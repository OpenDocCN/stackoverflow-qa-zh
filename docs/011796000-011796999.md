# StackOverflow 问答 11796000-11796999

# jquery - 由于 Ajax 未加载 jQuery 可排序

> ID：11796001
> 
> 赞同：0
> 
> 时间：2012-08-03T12:44:59.743
> 
> 标签：jquery, jquery-ui-sortable

我的网页上有一个列表（ul li），它使用 jQuery 转换为可排序列表。这一切正常，直到我在 Ajax 对话框中加载列表。然后列表失去了它的可排序功能。

有没有办法重新初始化可排序列表并保留我绑定到它的所有事件（如`update`）？

我试过了：`$('#sortable').sortable('refresh');`

但这对我不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:06:05.710

`sortable()`在您的 ajax 方法的回调中再次重新绑定该方法。

例子

```
 $("#someDiv").load("getitems.php",function(){
         $( "#sortableList" ).sortable();
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:09:32.003

检查这个小提琴它适用于我的内容的可排序和注入，就像你的例子一样。

[http://jsfiddle.net/un5ft/5/](http://jsfiddle.net/un5ft/5/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T13:03:08.823

正如您[在此处](http://jsfiddle.net/un5ft/1/)看到的，动态内容不会破坏可排序功能，因此您的问题在其他地方。

**更新：**检查[这个](http://jsfiddle.net/un5ft/3/)。阅读更多关于`.on()` [这里](http://api.jquery.com/on/)。

# c# - 如何在ItemsControls中单击按钮时调用子窗口？

> ID：11796002
> 
> 赞同：1
> 
> 时间：2012-08-03T12:45:02.083
> 
> 标签：c#, silverlight-4.0, itemscontrol, childwindow

我正在开发 Silverlight 应用程序。我正在使用 silverlight 中的 itemscontrols 根据要求调整 UI。

```
<ItemsControl x:Name="CertificationsAndLicensesItemsControl">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>                               
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <Grid Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Row="0" Grid.Column="0" Width="500">
                                <TextBlock TextWrapping="Wrap" Foreground="Green" Text="{Binding Path=CertificationsAndLicensesTitle}" FontWeight="Bold" Margin="5"></TextBlock>
                            </Grid>
                            <Grid Grid.Row="0" Grid.Column="1">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock FontWeight="Bold" Text="Valid from:" HorizontalAlignment="Left" Margin="5"></TextBlock>
                                    <TextBlock Text="{Binding Path=ValidFrom}" Margin="5" ></TextBlock>
                                    <TextBlock Text="Until" Margin="5"></TextBlock>
                                    <TextBlock Text="{Binding Until}" Margin="5"></TextBlock>
                                </StackPanel>
                            </Grid>
                            <Grid Grid.Row="1" Grid.ColumnSpan="2">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="5">
                                    <Button x:Name="EditButton" Tag="{Binding Path=ID}" Content="Edit" Click="EditButton_Click"></Button>
                                    <Button x:Name="DeleteButton" Tag="{Binding Path=ID}" Content="Delete" Click="DeleteButton_Click"></Button>
                                </StackPanel>
                            </Grid>
                        </Grid>

                    </Grid>

                </DataTemplate>

            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

后面的代码如下

```
private void EditButton_Click(object sender, RoutedEventArgs e)
        {
            //int a = 10;
            //CertificationsAndLicensesChildWindow obj = new CertificationsAndLicensesChildWindow();
            //obj.Show();
            ChildWindow1 obj1 = new ChildWindow1();
            obj1.Show();
        }

        private void DeleteButton_Click(object sender, RoutedEventArgs e)
        {
            CertificationsAndLicensesChildWindow obj = new CertificationsAndLicensesChildWindow();
            obj.Show();
        } 
```

单击按钮时不会显示子窗口。单击按钮后，整个用户界面消失。如果我删除以下句子

```
ChildWindow1 obj1 = new ChildWindow1();
                obj1.Show(); 
```

然后至少断点被击中。如果我保持上述句子不变，那么断点就不会被击中。如何在按钮单击时显示子窗口？您能否提供我可以解决上述问题的任何代码或链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:27:05.613

消失的 UI 几乎总是意味着未处理的异常 - 可能在 ChildWindow1 创建/显示期间存在一些错误。如果未附加（在 App 构造函数中执行），您可以尝试在 App 类中附加未处理异常的处理程序，并在未处理的异常处理程序中设置断点。这应该有助于您跟踪导致 UI 消失的异常。

默认情况下，在创建 Silverlight 项目时，有处理程序，它会向 DOM 报告异常 - 您应该能够在 JavaScript 控制台中看到异常。

# jquery - 卡片翻转动画插件

> ID：11796003
> 
> 赞同：1
> 
> 时间：2012-08-03T12:45:08.993
> 
> 标签：jquery, css

我正在寻找卡片翻转 jquery 动画插件或 css3 动画。我已附上它的图像。所以动画应该像在甲板上翻牌一样发生。 ![在此处输入图像描述](../Images/a4a58451d6af8c96626a5bb4ee14fb8e.png)

任何有助于找到这样的插件或 css3 效果 appriciated。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:49:42.023

试试这个[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T18:17:20.710

我对我们的抽认卡交互的任何现有随机转换都不满意，所以我最终选择了[Mosaic Jquery Library](http://buildinternet.com/project/mosaic/1.0/)。我只是使用滑动过渡来模拟卡片翻转，然后淡化 div 以显示新卡片。

这是一个示例初始化函数：

```
// add our sliding box event
$('.cover').mosaic({
    animation:  'slide', // fade or slide
    speed:       500,
    hover_x:    '900px', // horizontal position of overlay after hover/click 
    hoverdelay: '0',
    mouseevent: 'click'  // click or hover
}); 
```

我的[小提琴](http://jsfiddle.net/speeves/LcJKX/4/)和[我修改过的马赛克库](https://github.com/speeves/mosaic/blob/master/js/mosaic.1.0.1.js)的链接，它处理点击事件，除了默认的悬停。

# javascript - windows onload 未从外部脚本触发

> ID：11796004
> 
> 赞同：0
> 
> 时间：2012-08-03T12:45:14.003
> 
> 标签：javascript, asp.net, .net, visual-studio-2010

好的，我知道这已经被问了很多，但似乎没有一个解决方案真正适合我。这是情况。我有一个需要添加到现有站点的网页，该站点使用我无法触摸的母版页。这限制了我使用 javascripts window.onload，因为我无权访问 body 标签。

在我的页面上，我已将我的外部 .js 文件链接在每个其他外部文件下方的头部。这是我的 .js 文件的示例。

```
var myobj = null;
(5 or so functions that work properly. Mainly just toggles that show and hide divs. none touch the onload)
function load(){
myobj = document.getElementById("my_element");
alert("test");
}
window.onload = load; 
```

试过这个，加载功能永远不会触发，因为我从来没有收到警报。我试过注释掉加载函数中的第一行，但没有警报，仍然没有。环顾四周，我还找到了另一种方法，但我尝试过但没有成功。除了我删除了 window.load 并添加了这个之外，其他一切都是一样的。

```
function addLoadEvent(func) {
var oldonload = window.onload;
if (typeof window.onload != 'function') {
    window.onload = func;
} else {
    window.onload = function () {
        if (oldonload) {
            oldonload();
        }
        func();
    }

  }
}
addLoadEvent(load);
addLoadEvent(function () {
    /* more code to run on page load */
    alert("hello2");
}); 
```

在此函数中，不会触发任何警报。我还尝试在函数之外放置一个警报，该警报确实有效。

我使用的浏览器是 IE 8.0.7600.16385 和 Chrome 21.0.1180.60

如果您需要更多信息，请与我们联系。

哦，顺便说一句，我不能使用 jquery 或任何其他 javascript 库，因为我们正试图让它尽可能轻。这个页面也必须在IE8下工作，也就是目前企业唯一支持的浏览器。如果它也能在 Chrome 中工作，那就太好了。

*编辑* 如果我完全错误地处理这个问题，我想做的是跟踪我拥有的最后一个元素。我基本上有一个包含 2 列的页面，左侧是菜单，右侧是内容。内容全部放在 div 中，一次只显示一个类别。它应该工作的方式是在单击菜单类别时隐藏以前的内容并显示新内容。

我已将我的内容类设置为显示：无；并将 start_content ID 设置为 display: block;。Javascript 应该做的是用 start_content 对象初始化我的全局。在菜单中单击时，它会调用一个执行 obj.style.display = 'none' 的函数，然后将新的 obj 设置为 display = 'block'。然后它将新的 obj 放在我的全局变量中，以便在下一次单击菜单时进行更改。

这是一个没有任何 onload 函数的示例

```
var prevContent = document.getElementById("start_content");
function toggle(id) {
prevContent.style.display = "none";
var content = document.getElementById(id);
content.style.display = "block";
prevContent = content;
} 
```

这样做的问题是 prevContent 在进入切换功能时无法识别。我以为这是因为我在头部链接了这个 .js 文件，所以页面还没有加载我的 start_content 这就是为什么我将它更改为将全局声明为 null 然后设置一个 window.onload 到创建后设置适当的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:08:06.257

将“Defer”添加到头部的脚本标签最终起到了作用。

# python-2.7 - 用漂亮的汤刮页面的问题

> ID：11796005
> 
> 赞同：2
> 
> 时间：2012-08-03T12:45:16.850
> 
> 标签：python-2.7, screen-scraping, web-scraping, beautifulsoup

我正在使用 Beautiful Soup 来尝试刮一页。

我正在尝试遵循[本](http://blog.dispatched.ch/2009/03/15/webscraping-with-python-and-beautifulsoup/)教程。

提交股票代码后，我试图获取以下页面的内容：

[http://www.cboe.com/delayedquote/quotetable.aspx](http://www.cboe.com/delayedquote/quotetable.aspx)

本教程适用于具有“GET”方法的页面，我的页面是“POST”。我想知道这是否是问题的一部分？

我想使用第一个文本框——在它下面写着：

“在下方输入股票或指数代码以获取延迟报价。”</p>

相关代码：

```
user_agent = 'Mozilla/5 (Solaris 10) Gecko'
headers = { 'User-Agent' : user_agent }

values = {'ctl00$ctl00$AllContent$ContentMain$ucQuoteTableCtl$txtSymbol' : 'IBM' } 
data = urllib.urlencode(values)
request = urllib2.Request("http://www.cboe.com/delayedquote/quotetable.aspx", data, headers)
response = urllib2.urlopen(request) 
```

调用没有失败，我没有得到一组选项和价格，就像我以交互方式运行页面时一样。我一堆乱码的HTML。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T23:29:20.440

好的 - 我想我找到了问题（并找到了另一个）。我决定从“urllib2”切换到“机械化”。不幸的是，我一直在获取数据时遇到问题。最后，我意识到有两个“提交”按钮，所以我尝试在提交表单时传递名称参数。就获得正确的响应而言，这起到了作用。

然而，下一个问题是我无法让 BeautifulSoup 解析 HTML 并找到必要的标签。一个简短的谷歌搜索发现其他人也有类似的问题。所以，我放弃了 BeautifulSoup，只是在 HTML 上做了一个基本的正则表达式。不如 BeautifulSoup 优雅，但有效。

好的 - 足够的演讲。这是我想出的：

```
import mechanize
import re

br = mechanize.Browser()
url = 'http://www.cboe.com/delayedquote/quotetable.aspx'
br.open(url)
br.select_form(name='aspnetForm')
br['ctl00$ctl00$AllContent$ContentMain$ucQuoteTableCtl$txtSymbol'] = 'IBM'
# here's the key step that was causing the trouble - pass the name parameter
# for the button when calling submit
response = br.submit(name="ctl00$ctl00$AllContent$ContentMain$ucQuoteTableCtl$btnSubmit")
data = response.read()

match = re.search( r'Bid</font><span>&nbsp;\s*([0-9]{1,4}\.[0-9]{2})', data, re.MULTILINE|re.M|re.I)
if match:
   print match.group(1)
else:
   print "There was a problem retrieving the quote" 
```

# html - 不透明度在ie9中不起作用

> ID：11796014
> 
> 赞同：0
> 
> 时间：2012-08-03T12:45:49.637
> 
> 标签：html, css

我正在使用不透明度，我想将它应用到图像上。

这是我的 CSS 代码：

```
img {
    opacity:0.4;
    filter:alpha(opacity=40);
}

img:hover {
    filter:alpha(opacity=100);
    opacity:1;
    -moz-opacity: 1.0;
    -khtml-opacity: 1.0; 
} 
```

它在 Firefox、Chrome 和 Safari 中运行良好，但在 Internet Explorer 9 中无法运行。问题在于悬停效果。

在简单的 img 上，不透明度在 IE9 中有效，但悬停效果不起作用。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:47:48.750

我有同样的问题，试试这个：按 F12（调试控制台），然后按 F5（刷新）。IE9 会弹出一个小框：“Internet Explorer 限制此页面运行脚本或 ActiveX 控件”单击“允许阻止内容”按钮，您的不透明度应该可以工作。

不太确定如何确保它自动运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:39:41.433

不透明度还不是 CSS 标准。但是，它适用于所有现代浏览器，并且是 W3C CSS 3 推荐的一部分。

请参考：[http ://www.w3schools.com/Css/css_image_transparency.asp](http://www.w3schools.com/Css/css_image_transparency.asp)

如果没有快乐，

使用兼容模式

```
 <meta http-equiv="X-UA-Compatible" content="IE=8" > 
```

# oracle - excel中的Oracle查询输出

> ID：11796016
> 
> 赞同：4
> 
> 时间：2012-08-03T12:46:02.897
> 
> 标签：oracle, plsql, excel-2003

我有一个 Oracle 10G 数据库，我需要编写一个相当简单的查询来连接两个表并选择一些数据。但是，我想将结果列表导出到 Excel，因此最终用户可以使用此 .xls 文档查看结果并按字段之一（位置）进行过滤

当我编写查询时，是否有一种简单的方法可以生成/创建一个包含上述结果的 Excel 文档？SQL 不需要在 excel 中运行，但我想现在我想这将是一个有用的功能！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T09:57:54.923

您的要求有一个简单的解决方案。

通过使用生成Excel xlsx文件的小pl/sql包ora_excel，您可以选择数据并将所选数据导出到Excel并设置过滤。

请看下面的例子：

```
BEGIN    
    ORA_EXCEL.new_document;    

    ORA_EXCEL.add_sheet('My sheet');        
    ORA_EXCEL.query_to_sheet('select * from employees'); -- Select data from database   
    ORA_EXCEL.set_cells_filter('A1', 'K1'); -- Add cell filtering from column A1 to column K1    

    -- Save generated Excel to file with name example.xlsx to Oracle folder EXAMPLE_XLSX
    ORA_EXCEL.save_to_file('EXPORT_DIR', 'example.xlsx'); 
END; 
```

有关更多详细信息，请查看[此处](http://www.oraexcel.com/examples/pl-sql-excel-cells-filtering)

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T19:22:25.960

Since you cannot use OLE DB in your version of Excel. Use `SPOOL` to create a CSV file.

```
 SQL> SET echo off
 SQL> SET verify off
 SQL> SET colsep ,     
 SQL> SET pagesize 0   
 SQL> SET trimspool on
 SQL> SET feedback off
 SQL> SPOOL ON
 SQL> SPOOL C:\data.csv
 SQL> SELECT COLUMN1,COLUMN2,COLUMN3....
      FROM TABLE;
 SQL> SPOOL OFF 
```

The `.csv` file should open in Excel by default. Use proper column aliases so that users understand the column headers.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T12:51:14.330

在excel中很容易做到；完成后，用户可以右键单击数据并说“刷新”以获取最新更新。

但是为什么要重新发明轮子很多在线文章已经解释了如何做到这一点......这是一个

[http://blog.mclaughlinsoftware.com/microsoft-excel/how-to-query-oracle-from-excel-2007/](http://blog.mclaughlinsoftware.com/microsoft-excel/how-to-query-oracle-from-excel-2007/)

连接到表后，您可以编辑连接上的属性并输入自定义 SQL（从开发人员工具复制和粘贴）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T17:15:43.893

您可以直接从 Excel 2003 查询 oracle 数据库，但是，您的 sql 语句由 MS Query 解释，因此常常令人沮丧。我将假设有问题的机器已经能够查询您的数据库并已正确配置数据库命名。

要从 excel 2003 查询您的数据库，您必须：

1.  安装和配置 oracle 的 ODBC 驱动程序（您必须安装 32 位驱动程序，因为 excel03 是 32 位应用程序）。可以在开始 > 管理工具 > ODBC 数据源管理器下配置 ODBC

2.  打开 excel 2003 并转到数据 > 导入外部数据 > 新数据库查询。

这应该会调出 MS Query，它是一个类似于 Access 的界面。

显然，这是一个非常简短的开始，可以让您朝着正确的方向前进。如果您有任何具体问题，请发表评论，我会尽力帮助您。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T13:04:51.687

快捷方式：

首先创建一个包含您的查询的视图（最好的方法，因为您以后可能需要更改此查询）。

请务必正确安装 oracle 客户端。

*   在数据选项卡的 Excel（2007 及更高版本）中，这样：

从其他来源 -> 从数据连接向导 -> Microsoft 数据访问 - Oracle 的 OLE DB 提供程序

*   现在输入您的数据源名称（存储在 tnsnames.ora 中）和用户密码

*   找到你的看法，然后你就会有你需要的东西。

您可以保存密码并设置选项以在连接属性中自动刷新。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-04T10:36:32.457

第 1 步运行您的查询右键单击结果[在此处输入图像描述](https://i.stack.imgur.com/Ez46k.jpg)

第 2 步单击导出 [在此处输入图像描述](https://i.stack.imgur.com/dU5KT.jpg)

步骤 3 选择格式为 Excel 输入数据表名称和位置

第 4 步单击下一步，然后 [在此处完成输入图像描述](https://i.stack.imgur.com/yRtT8.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-03T17:47:33.857

你可以做一件事。

1.  首先以包含使用符号（如，或#）的列分隔符的形式生成输出。
2.  将数据导入 excel，然后将占位符定义为列分隔符。

# c# - 如何测试课程？

> ID：11796017
> 
> 赞同：1
> 
> 时间：2012-08-03T12:46:06.813
> 
> 标签：c#, oop

我有这样的课

```
public class BonusImageHandler
{   private static IStorageProvider _storageProvider;
    private static Type storageProviderType;
    private static readonly object _lock = new object();
    private static IStorageProvider StorageProvider
    {
        get
        {
            lock (_lock)
            {
                if (_storageProvider == null)
                {
                    lock (_lock)
                    {
                        _storageProvider = (IStorageProvider)Activator.CreateInstance(storageProviderType);
                    }
                }
            }
            return _storageProvider;
        }
    }

    public BonusImageHandler(string providerTypeName)
    {
        storageProviderType = Type.GetType(providerTypeName);
    }

   public void ProcessRequest(HttpContext context)
   {
        //do some thing here
    }

    private static string ParseInputs(string baseUrl, string imageType)
    {
      //do other things
     }
} 
```

构造函数不是静态的，因为它将字符串作为参数，并且私有静态 IStorageProvider StorageProvider 属性是静态的。组长告诉我这样不行，为什么？？我该如何测试它？如何将 httpContext 传递给 ProcessRequest 函数。对于这个愚蠢的问题，我很抱歉，但我仍然是初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:51:18.233

这很糟糕，因为*实例*构造函数分配了*静态*字段；考虑：

```
var x = new BonusImageHandler("foo");
var y = new BonusImageHandler("bar"); 
```

现在......什么是**static** `storageProviderType`，为什么这有意义？使用什么处理程序`x`？（提示：不是`"foo"`）。

现在考虑多个调用者，可能在不同的线程上，看似随机地调用它。

坦率地说，看起来应该更像：

```
public static void InitProvider(string providerTypeName) {...} 
```

但是当你这样做时，你开始思考也许它应该是：

```
public static void InitProvider(Type providerType) {...} 
```

甚至更清楚：

```
public static void InitProvider(IStorageProvider provider) {...} 
```

或者：只需将其设为实例字段，这样您就可以（可能通过 IoC/DI 工具）将提供程序分别传递到每个实例中，即

```
private readonly IStorageProvider provider;
public BonusImageHandler(IStorageProvider provider) {this.provider = provider;} 
```

# .net - 搜索和替换子数组

> ID：11796020
> 
> 赞同：0
> 
> 时间：2012-08-03T12:46:14.550
> 
> 标签：.net, vb.net, arrays, replace

我需要执行`Search and Replace`一个子数组。这是我的代码

```
Dim IntegerArray() As Int32 = {1, 0, 2, 0, 0, 0,
                               1, 0, 2, 0, 0, 0, 
                               1, 0, 2, 0, 0, 0, 
                               0, 0, 0, 0} 
```

具体来说，我需要`2, 0, 0, 0, 1`在数组中搜索元素并将每个元素替换为 5

这是数组的图片

![整数数组](../Images/218c8ac6055c7a0cd8238e9e28ffd632.png)

如何执行`search and replace`工作？

注意：我尝试遍历数组，但要识别 5 个元素值非常棘手，到目前为止我仍然无法使其工作。是否有任何 .NET 内置函数可以完成这项工作或任何智能解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:59:41.037

**myArray 是整数数组**

*解决方案*

```
String.Join(";", myArray).Replace("2;0;0;0;1", "5;5;5;5;5").Split(';').Select(n => Convert.ToInt32(n)).ToArray() 
```

*解释*

*   第 1 步：将整数数组转换为字符串（以 ';' 作为分隔符）
*   第 2 步：将部分字符串 ("2;0;0;0;1") 替换为另一个值 ("5;5;5;5;5")
*   第 3 步：将字符串转换回数组

    ```
    Split(';').Select(n => Convert.ToInt32(n)).ToArray() 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:43:37.783

```
 internal int[] Solve(int[] input, int[] pattern, int[] replace)
    {
        var result = new List<int>();

        for (int i = 0; i < input.Length; i++)
        {
            bool match = true;

            for (int j = 0; j < pattern.Length; j++)
            {
                if ((i + j >= input.Length) || (input[i + j] != pattern[j]))
                {
                    match = false;
                    break;
                }
            }

            if (match)
            {
                foreach (var item in replace)
                {
                    result.Add(item);
                }

                i += (pattern.Length - 1);
            }
            else
            {
                result.Add(input[i]);
            }
        }

        return result.ToArray();
    } 
```

# android - 适用于 Android 的良好预建 GNU 工具链？

> ID：11796022
> 
> 赞同：2
> 
> 时间：2012-08-03T12:46:22.823
> 
> 标签：android, compiler-construction, android-ndk, cross-compiling, gnu-toolchain

我目前使用的是 Android 的 NDK 中的独立工具链，但是交叉编译程序似乎相当困难，因为 NDK 中提供的库缺少很多东西。

我已经`binutils`使用 NDK 独立工具链构建并全部编译（虽然我还没有测试过二进制文件是否真的有效），但是当它遇到`GCC`时变得相当困难。

[我在Gnash 的网站上](http://www.gnashdev.org/tools/)看到了一个可以下载的工具链和 sysroot ，但是当我尝试在我的计算机上运行它时它不起作用，因为该软件包只是从其原始环境中打包的，可移植性很差。

我想知道是否还有其他预构建的 GNU 工具链可用于在 Android 上构建 Thinsg？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:06:41.327

我知道的唯一其他选择是[Crystax NDK](http://www.crystax.net/en/android/ndk)。Crystax 添加了一些不错的东西，例如宽字符支持。我早期使用 Crystax，运气不佳。值得一试。

# php - 使用 php 脚本编辑 XML

> ID：11796023
> 
> 赞同：0
> 
> 时间：2012-08-03T12:46:25.253
> 
> 标签：php, xml, file, editing

我有一个问题，我需要使用 php 编辑一个 xml 文件，基于它已传递的字符串变量。

即，我的 php 有一个字符串变量，其值为“true”或“false”，我需要更改以下 xml 文件代码：

```
<Parameter>             
     <ParameterName>Method1</ParameterName>                  
     <ParameterDescription>description</ParameterDescription>
     <ParameterValue type="bool">false</ParameterValue>
</Parameter>

<Parameter> 
     <ParameterName>Method2</ParameterName>       
     <ParameterDescription>description</ParameterDescription> 
     <ParameterValue type="bool">true</ParameterValue>
</Parameter> 

<Parameter>
     <ParameterName>Method3</ParameterName>
     <ParameterDescription>description</ParameterDescription>
     <ParameterValue type="float">0.025</ParameterValue> 
</Parameter> 
```

这样第一个“ParameterValue”就会从默认的“false”变为变量的值（注意 php 中的变量是字符串，而 xml 中的变量是布尔类型）。我查看了涉及 awk、sen 和 dom 的建议，但运气不佳。我希望有一种最简单的方法来更改 XML 中的这个单词！

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:53:23.130

你见过 Domdocument 类吗？[http://www.php.net/manual/es/class.domdocument.php](http://www.php.net/manual/es/class.domdocument.php)这个类，你可以编辑你的 XML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:55:33.193

你把事情弄得太复杂了。XML 只是一个具有一些格式化要求的字符串（文本文件）。只需像创建其他字符串一样创建字符串，但请记住这些格式规则。

这应该可以在 PHP 中解决问题。

```
$xml = <<<EOT
<Parameter>              
     <ParameterName>Method1</ParameterName>                   
     <ParameterDescription>description</ParameterDescription>
EOT

$xml .= '     <ParameterValue type="bool">' . $var . "false</ParameterValue>\n";
$xml .= <<<EOT;
</Parameter> 

<Parameter>  
     <ParameterName>Method2</ParameterName>        
     <ParameterDescription>description</ParameterDescription>  
     <ParameterValue type="bool">true</ParameterValue> 
</Parameter>  

<Parameter> 
     <ParameterName>Method3</ParameterName> 
     <ParameterDescription>description</ParameterDescription> 
     <ParameterValue type="float">0.025</ParameterValue>  
</Parameter> 
EOT; 
```

然后，您可以将字符串保存到文件（添加其他所需的 XML 内容！），将其打印到 STDOUT 或将其加载到 DOMDocument 以进行进一步处理。你的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:59:25.753

如果不是真的有必要，我建议不要在 php 中使用 dom...

例如，从头开始编写文档可以在没有 dom 的情况下完成。

即使你不使用Dom php，也要小心编码，如果你需要在with dom之后使用生成的文件......然后放置适当的xml头......（没有它真的是@*！§&）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:05:13.620

php 中有多个 xml 库，包括[simplexml](http://php.net/manual/en/book.simplexml.php)和[Dom](http://php.net/manual/en/book.dom.php)。对于选择节点，这两个库都支持 xpath，这是一个强大的工具。使用 Dom，这看起来像这样：

```
$the_variable = true;
$xml = simplexml_load_string($xml);
$elements = $xml->xpath('//Parameter/ParameterValue[text()="false"]'); // select paramter/parameterValue nodes where the text content is "false"
foreach ($elements as $elem) {
    $elem[0] = $the_variable; // will output "<ParameterValue>1</ParameterValue>"
    // $elem[0] = var_export($the_variable, true); // will output "<ParameterValue>true</ParameterValue>"
}   

print $xml->saveXML(); 
```

# java - 为什么电锯中的套接字接收器不活动？

> ID：11796027
> 
> 赞同：0
> 
> 时间：2012-08-03T12:46:33.800
> 
> 标签：java, log4j

当我启动 ChainSaw 时（使用端口 4445 上的简单接收器）

我看到它的：属性

```
active  false
class   class org.apache.log4j.net.SocketReceiver
connectedSocketDetails  []
listener    
loggerRepository    org.apache.log4j.Hierarchy@1c3dc66
name    SocketReceiver
paused  false
port    4445
threshold   TRACE 
```

由于 Socket Receiver 处于非活动状态，我可能看不到我的日志。我怎么能改变它？如果你有使用电锯的经验，你能不能检查一下我的 log4j.properties 是否正常？

```
log4j.rootLogger=DEBUG, server

log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4445
log4j.appender.server.RemoteHost=localhost
log4j.appender.server.ReconnectionDelay=10000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T11:52:48.917

You can use this property file.when you start chainsaw v2 web start check radio button with let me use simple receiver and select socket receiver and then ok.

```
log4j.rootLogger=DEBUG, CHAINSAW_CLIENT

log4j.appender.CHAINSAW_CLIENT=org.apache.log4j.net.SocketAppender
log4j.appender.CHAINSAW_CLIENT.RemoteHost=localhost
log4j.appender.CHAINSAW_CLIENT.Port=4445
log4j.appender.CHAINSAW_CLIENT.LocationInfo=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:34:11.487

您使用的是 Chainsaw 的 Web Start 版本吗？我们将很快发布 Chainsaw 的更新版本，其中包含许多新功能 - 您介意下载开发者快照并尝试一下吗？它还不能通过 Web Start 获得。

当 Chainsaw 启动时，您应该会收到一个（新的）配置对话框提示，您可以在其中要求它设置套接字接收器并提供端口，并告诉它始终使用此配置。

这是开发人员快照的链接：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# powershell - Powershell：将参数传递给函数

> ID：11796030
> 
> 赞同：0
> 
> 时间：2012-08-03T12:46:47.593
> 
> 标签：powershell, parameters, parameter-passing, code-duplication

所以我在我的剧本上做了一些“看家”，我发现了一个可以减少/整理的区域。使用我创建的这个 GUI：

![在此处输入图像描述](../Images/21b9aa1f83aeb5b4f0e244ea6d318da8.png)

两个菜单栏`add_click`事件 Restart HostnameA 和 HostnameB 调用单独的函数，即使这两个函数中的代码实际上是相同的，唯一的区别是主机名的这个变量（见下文）。

按钮事件的代码。

```
$Restart_current_machine.Add_Click(
{
restart_current_machines
})

$Restart_target_machine.Add_Click(
{
restart_target_machines
})

# Function Blocks

function restart_target_machines
{
restart-computer -computer $combobox1.text -force
}

function restart_current_machines
{
restart-computer -computer $combobox2.text -force
} 
```

我的问题是：有没有办法我可以使用`Param()`（或类似的东西）来摆脱，`function restart_current_machines`从而只有一个功能来重新启动任何一台机器？

就像是？

```
$Restart_current_machine.Add_Click(
{
param($input = combobox1.text)
$input | restart_current_machines
})

$Restart_target_machine.Add_Click(
{
param($input = combobox2.text)
$input | restart_current_machines
})

# Only needing one function

function restart_target_machines
{
restart-computer -computer $input -force
} 
```

我知道这很可能是错误的，但只是为了让您更好地了解我正在尝试做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:53:55.620

创建一个定义 ComputerName 参数的通用函数并将该参数传递给基础 cmdlet：

```
function restart-machine ([string[]]$ComputerName)
{
    Restart-Computer -ComputerName $ComputerName -Force
} 
```

cmdlet ComputerName 参数接受名称集合，因此该`Rastart-Compter`参数被定义为字符串数组。

现在，从代码中的任何位置调用 restart-machine 并将要重新启动的计算机名称传递给 ComputerName 参数。要重新启动多台机器，请用逗号分隔每个名称（即 restart-machine -computerName $combobox1.text,$combobox2.text）

```
$Restart_target_machine.Add_Click(
{
   restart-machine -computerName $combobox1.text
}) 
```

# django - 客户端的 Tornado + Mustache 模板

> ID：11796031
> 
> 赞同：2
> 
> 时间：2012-08-03T12:47:00.413
> 
> 标签：django, templates, tornado, mustache

有什么方法可以强制龙卷风跳过模板的一部分变量？

我想要这样的东西：

**模板**：

```
{{ block render_me }} 
   {% for var in range(1,3) %}
       {{ var }} 
   {% end %}
{{ end }}
{{ block render_me_later }} 
   {% magic_no_replace_vars_word %}
   <script id="mustacheTemplate"> 
        <ul data-role="listview" data-inset="true">{{#items}}<li>{{item}}</li>{{/items}}</ul>
   </script> 
   {% end %}
{{ end }} 
```

**输出**：

```
1 2 3
<script id="mustacheTemplate"> 
<ul data-role="listview" data-inset="true">{{#items}}<li>{{item}}</li>{{/items}}</ul>
</script> 
```

同样的解决方案`django`也受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:29:56.503

在 Tornado 中，您可以使用`{{!`to 输出`{{`和`{%!`for `{%`。如果没有打开标签，关闭标签应该按字面意思工作。

在 Django 中，正如 Chris Pratt 所提到的，您可以使用`{% templatetag openvariable %}var{% templatetag closevariable %}`for `{{var}}`. 由于这很糟糕，如果您所做的不仅仅是一两页，那么可能值得`verbatim`像 supervacuo 建议的那样反向移植模板标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:16:44.327

不确定 Tornado，但对于 Django，您可能需要[模板`{% verbatim %}`标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#verbatim)：

**输入**

```
{% block render_me %}
{% for var in range(1,3) %}
    {{ var }} 
{% endfor %}
{% endblock %}
{% block render_me_later %} 
   {% verbatim %}
   <script id="mustacheTemplate"> 
        <ul data-role="listview" data-inset="true">{{#items}}<li>{{item}}</li>{{/items}}</ul>
   </script> 
   {% endverbatim %}
{% endblock %} 
```

**输出**

```
1 2 3
<script id="mustacheTemplate"> 
<ul data-role="listview" data-inset="true">{{#items}}<li>{{item}}</li>{{/items}}</ul>
</script> 
```

不幸的是，它还没有成为发布版本（计划在 1.5 中发布）——要么使用 Django 的开发版本，自己反向移植添加的模板标签，要么使用类似的东西[`django-templatetag-handlebars`](http://pypi.python.org/pypi/django-templatetag-handlebars)为你实现它，直到你可以升级.

# sql-server-2008 - 在 Visual Studio 2010 的 Crystal Report 中找不到数据库

> ID：11796045
> 
> 赞同：1
> 
> 时间：2012-08-03T12:48:05.673
> 
> 标签：sql-server-2008, crystal-reports-xi, crystal-reports-server

我有 SQL Server 2008 和 Visual Studio 2010。我安装了 Crystal Report XI，它很好。我可以看到我可以在我的 Visual Studio 和工具箱中拥有它。

但是当我想将数据库连接到 Crystal Report 时，问题就开始了。我尝试了一切意味着我检查服务器名称，服务器名称的所有可能性。我得到了 .\SQLEXPRESS 服务器。因此，当我使用 OLE DB 建立新连接并为 SQL Server 选择提供程序时，它要求我输入服务器名称、用户 ID、密码、数据库。

所以我正在使用集成登录，但没有服务器弹出。所以我把 .\sqlexpress 但在数据库字段中我看不到我的数据库，我可以看到这 4 个数据库，如 master、model 等。我在整个互联网上检查了这个问题，但没有解决方案。

# php - Wordpress：使用 method="post" 进行多种语言选择

> ID：11796046
> 
> 赞同：6
> 
> 时间：2012-08-03T12:48:05.957
> 
> 标签：php, html, wordpress, multilingual

我正在建立一个具有双语和两个标志作为入口页面的网站。我计划在`<form method="post">`标志周围使用，以便用户可以选择他们想要的语言。

然后在以下页面上我想使用类似的东西：

```
<?php
if( $_POST['language']=='uk' ){
    echo $uk;
}elseif( $_POST['language']=='french' ){
    echo $french;}
?> 
```

所以在点击标志时，他们选择了他们想要的语言。这只会在他们单击标志后在下一页上起作用，还是他们可以继续导航到不同的页面并且仍然选择选择的语言？

如果这不起作用，那还能怎么做？

* * *

**更新：**

我认为我之前没有说清楚我正在使用 Wordpress，它显然不喜欢`$_SESSION`.

我在一个名为 region.php 的模板上有这个来提交语言选择：

```
 <form action="<?php the_permalink(); ?>/home" name="region" method="post">              
        <div id="uk">
            <a href="javascript:document.region.submit()" name="UK">
                <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/-uk.png" width="259" height="160" alt="UK" />
            </a>
            <h1 style="color:black!IMPORTANT;">Enter United Kingdom site</h1>
        </div>

        <div id="world">
            <a href="javascript:document.region.submit()" name="World">
                <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/
world.png" width="258" height="160" alt="
Rest of the World" />
            </a>
            <h1 style="color:black!IMPORTANT;">Enter Rest of the World site</h1>                    
            </div>  
    </form> 
```

我需要在每个其他模板上添加什么来检查选择了哪种语言？为了帮助示例，如果选择了英国，那么它可以只回显“英国”，如果选择了世界其他地区，那么它可以只显示“世界”。

**这需要跨多个页面工作，因此如果他们转到关于页面，它会检查语言，然后如果他们导航到联系页面，它会再次检查语言 - 所有这些都必须来自初始语言选择。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T12:49:48.857

我会将选择放入一个`$_SESSION`变量中。这将一直伴随着他们，直到他们离开。你也可以很好地使用cookie。实际上，将两者结合起来会很棒，它将不允许 cookie 在一次访问的基础上运行的用户联系在一起，而启用 cookie 的人只需选择一次。

编辑：工作代码示例：

```
<form action="<?php the_permalink(); ?>/home" name="region" method="post">              
    <div id="uk">
    <a href="javascript:document.region.submit()" name="UK">
        <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/=uk.png" width="259" height="160" alt="UK" />
    </a>
    <h1 style="color:black!IMPORTANT;">Enter United Kingdom site</h1>
    </div>

    <div id="world">
    <a href="javascript:document.region.submit()" name="World">
        <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/world.png" width="258" height="160" alt="Rest of the World" />
    </a>
    <h1 style="color:black!IMPORTANT;">Enter Rest of the World site</h1>                    
    </div>  
</form>
// I assume that this form sends a POST request to the following page URL. 
```

表单重定向到的页面：

```
<?php

    session_start();
    if(isset($_POST['country'])) 
    // assuming that your form returns a field called 'country'...
    {
        $_SESSION['myCountry'] = htmlspecialchars($_POST['country']);
        // Assumes that myCountry is now 'UK' or 'World'...
    }
    header('Location: http://www.example.com/yourIndexPage.php');
    // You want to use a quick snippet to process the form and 
    // then redirect them away. This makes for less stupid BACK actions
    // in the browser as well as data being resent to the code.
?> 
```

yourIndexpage.php

```
<?php

    // As the $_SESSION is now set, we can use it in the page as follows:
    session_start();
    switch($_SESSION['myCountry'])
    {
        case 'UK':
            echo $UK;
            // And anything else you want to do with the UK language.
            break;
        case 'World':
            echo $world;
            // etc etc etc...
            break;
        default:
            // echo out default stuff, probably 'World' at a guess.
            break;
    }

?> 
```

如果您使用的是 wordpress，您可能应该[阅读这个](http://www.frank-verhoeven.com/using-session-in-wordpress/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:16:19.933

如果您不想使用 cookie，您可以这样做。

```
session_start();    
if(!isset($_SESSION['language'])){
    $_SESSION['language'] = 'English'; //default language
} 
```

然后当你有 2 个按钮时，一个是英语，另一个是德语或任何你想要的。

```
<a href="?language=English">English</a>
<a href="?language=German">German</a> 
```

您可以使用此检查来验证页面应该是什么语言。

```
if(isset($_GET['language'])){
    if($_GET['language'] == 'English'){
        $_SESSION['language'] = 'English';
    }
    if($_GET['language'] == 'German'){
        $_SESSION['language'] = 'German';
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:30:17.873

# 答案

首先，为了向 wordpress 站点添加区域/多语言支持，没有比这个插件更好的选择：[http](http://wpml.org/) ://wpml.org/ 。它有与之相关的成本，但它并不令人望而却步（您需要为出色的支持付费）。

其次，您不能默认使用 $_SESSION。WP 在设计上是无状态的。也就是说，网上有大量的插件和教程来获得这个功能。

# 代码的东西

您的原始表单 html 没有输入。这是一个什么都不提交的表格。此表单有两个名称相同的提交`location`。因此，无论单击哪个按钮，都会根据`$_POST['location']`.

```
<form action="<?php the_permalink(); ?>/home" name="region" method="post">              
    <div id="uk">
        <input type="submit" name="location" value="UK" />
        <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/uk.png" width="259" height="160" alt="UK" />
        <h1 style="color:black!IMPORTANT;">Enter United Kingdom site</h1>
    </div>

    <div id="world">
        <input type="submit" name="location" value="World" />
        <img style="margin-bottom:10px;" src="<?php bloginfo('stylesheet_directory'); ?>/images/world.png" width="258" height="160" alt="Rest of the World" />
        <h1 style="color:black!IMPORTANT;">Enter Rest of the World site</h1>                    
    </div>  
</form> 
```

编写一个 wordpress 操作来处理帖子。将此添加到主题的函数文件中。查看[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)获取 setcookie 文档。

```
function set_location_cookie()
{
    if(isset($_POST['location']))
    {
        setcookie('location', $_POST['location'], time()+1209600);
    }
}
add_action('init', 'set_location_cookie'); 
```

然后，在您想知道位置的任何地方：

```
<?php echo $_COOKIE["location"]; ?> 
```

# 附加信息

*我最初单击 UK 开始并设置 cookie，然后我返回并单击 World 但并没有复制带有 world 的 cookie，它只是再次显示 UK。每次做出不同的选择时，是否可以擦除 cookie？*

**所以这是一个关于 cookie 如何在技术层面上工作的问题：**

> 当浏览器执行此操作 [请求站点] 时，它会在您的计算机上查找 [您的站点] 设置的 cookie 文件。如果它找到一个 cookie 文件，您的浏览器会将文件中的所有名称-值对连同 URL 一起发送到 [the] 服务器。如果它没有找到 cookie 文件，它将不发送任何 cookie 数据。

最初不会发送新的 cookie 数据，b/c 直到请求从浏览器发送到服务器后，新的 cookie 数据才被保存并可用于与请求一起发送。

**那你怎么做呢？** 在成功设置 cookie 事件后重定向。

```
function set_location_cookie()
{
    if(isset($_POST['location']))
    {
        // Set Cookie
        setcookie('location', $_POST['location'], time()+1209600);
        // Reload the current page so that the cookie is sent with the request
        header('Location: '.$_SERVER['REQUEST_URI']);
    }
}
add_action('init', 'set_location_cookie'); 
```

*是否可以将标志的图像用作提交按钮？* 是的，使用 CSS 来设置输入按钮的样式。

为每个输入添加一个 id：`id="uk-button"`和`id="world-button"`

CSS：

```
#uk-button {
    background-image: url(uk-flag.png);
    background-size: 100%;
    background-repeat:no-repeat;
}
#world-button {
    background-image: url(world-flag.png);
    background-size: 100%;
    background-repeat:no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:00:32.533

$_POST 变量包含仅包含在单个请求中的数据（请参阅[POST (HTTP)](http://en.wikipedia.org/wiki/POST_%28HTTP%29)），因此他们将在“单击”或发布某些表单后看到适当的内容，因此仅在请求到您的页面后。

为了更永久地存储用户设置，有必要将这些设置保存到“会话”数据中，这些数据在 $_SESSION 变量中可用并且是持久的，因此在访问者浏览您的页面之前一直可用。更持久但不那么纯粹的解决方案是将设置保存到 cookie 中，在这种情况下您可以定义过期时间，以便下次访问时也会使用它们。

看一些例子：

```
<?php

session_start();
$language = $_POST['language'];
$_SESSION['language'] = $language; 
```

...和其他地方：

```
<?php

session_start();
$language = $_SESSION['language']; 
```

或者您可以使用 cookie：

```
<?php

session_start();
$language = $_POST['language'];
set_cookie('language', $language, 365 * 24 * 60 * 60);   
// will live for one year 
```

...和其他地方：

```
$language = $_COOKIE['language']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:52:31.710

它不适用于其他页面。POST 变量并非一直发送。它仅在提交表单时发送。您可以将 COOKIES 用于您的任务。将变量保存在那里并在每一页上检查它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T01:38:23.803

如果您希望选择持续存在（或通过`GET`like继续传递值`?lang=uk`，但这不是很优雅），您确实需要会话/cookie。顺便说一句，您不需要在默认行为被阻止并且其父表单使用 JavaScript 提交的超链接中的图像。你可以简单地使用这样的东西：

```
<input alt="en-UK" name="lang" src="uk-flag.png" type="image" value="en-UK"> 
```

这将作为一个图像，也是一个表单提交按钮。

# google-voice - 将通话录音存储到 Google Voice

> ID：11796051
> 
> 赞同：2
> 
> 时间：2012-08-03T12:48:27.703
> 
> 标签：google-voice

我不使用 Google Voice，但我想将通话录音存储到 Google Voice。

我正在考虑编写一个应用程序，允许您将音频文件存储到 Google Voice 中，以便您可以转录、索引和搜索它。

这是可能的，还是仅限于只有存储在那里的电话才是您使用 Google Voice 拨打的电话？

谢谢

* * *

澄清：我在 Android Play Store 上查看了一个应用程序后产生了这个想法，该应用程序可让您使用 IMAP 将所有 SMS/MMS 复制到 Gmail 收件箱，您将能够在收件箱中查看所有对话。我在想，如果可以记录一些通话并将通话记录转移到 Google Voice 中，那就太好了。但是，这将是一个单独的应用程序，与使用 Google Voice 打电话和发短信无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:54:36.313

虽然将内容放入谷歌语音可能效果不佳，但您仍然可以利用它们的力量。google 语音识别 api 是可公开访问的，尽管大部分没有记录，您可以在此处查看有关制作自己的 siri 的演示中的示例用法教程：http: [//cranklin.wordpress.com/2012/01/13/building-我自己的siri-jarvis/](http://cranklin.wordpress.com/2012/01/13/building-my-own-siri-jarvis/)

您可以在此处了解有关该 api 的更多信息：

[http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)

玩得开心。

# c# - 在 Visual c# 中对新记录和更新记录使用相同的表单

> ID：11796053
> 
> 赞同：3
> 
> 时间：2012-08-03T12:48:40.383
> 
> 标签：c#, asp.net, visual-c#-express-2010

我正在使用 Visual C# 2010 Express 在 c# 中构建一个简单的应用程序。我创建了一个捕获一些数据的数据输入表单。

当用户想要编辑某些数据时，我想使用相同的表单。我将如何编写代码来告诉表单它处于编辑模式，所以加载`recordID=4431`. 如果它不在编辑中，则只需空白并在按下保存时添加新记录。

有什么想法吗？！干杯，马特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:51:44.597

有几种方法可以做到这一点。最简单的方法是在您的表单中添加一个`hidden field`，其中包含版本中对象的 ID，如果是新提交，则为 null。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:51:58.030

出色地，

我以前做过。我所做的是创建一个函数来检索指定记录的数据。然后，此函数将仅填充表单中的字段。

为了告诉表单它处于编辑模式，我只使用一个布尔值来指定它。还需要存储正在编辑的记录，以便您可以在之后对其进行更新。

这是您正在寻找的还是您想要代码示例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T05:18:00.200

那么你也可以重载表单的构造函数。为此，您可以在插入时将表单值作为空白传递，并在编辑模式下附加数据库中的值。

希望这是有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:53:47.360

尝试使表单像普通的数据绑定控件一样工作。

如果你给它一个填充了它的成员的实体，它会相应地填写字段。

任何不应该是用户可见的字段，例如 id 字段，都应该在表单中表示为隐藏字段。

最后，您的保存函数应根据主键字段是否具有默认值（通常为 0）来决定是否进行插入或更新。

# iis-7.5 - 新的应用程序初始化 1.0 不适用于 Win 2008 r2、IIS 7.5

> ID：11796054
> 
> 赞同：12
> 
> 时间：2012-08-03T12:48:42.930
> 
> 标签：iis-7.5

我尝试在 Win 2008 R2、IIS 7.5 和 Windows 7、IIS 7 上使用应用程序初始化。它没有按预期工作。我下载了x64版本。

来源`applicationhost.config`：

```
<applicationPools>     
    <add name="MyApp" autoStart="true" 
        startMode="AlwaysRunning" 
        managedRuntimeVersion="v4.0"> 
</applicationPools>

<sites> 
    <site name="Default Web Site" id="1" serverAutoStart="true">
        <application path="/MyApp" applicationPool="MyApp"
            preloadEnabled="true">
    </site>
</sites> 
```

申请`web.config`文件：

```
<system.webServer>
    <applicationInitialization remapManagedRequestsTo="loading.html" 
        skipManagedModules="true">
        <add initializationPage="/default.aspx" />
    </applicationInitialization>
</system.webServer> 
```

它没有任何效果。当我重新启动 IIS 并在浏览器 ( `localhost/.../default.aspx`) 中加载 URL 时，它没有显示`loading.html`页面，看起来 appPool 始终在运行\预热。

此外，它没有显示 w3p 进程的多个实例。它不工作。

在 Windows 7、IIS 7 或 Windows 2008 R2、IIS 7.5 上配置应用程序初始化模块的小视频会很有帮助，因为我可能错过了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T22:20:10.397

我们发现，当应用程序池在使用 IIS 7.5 的 Windows Server 2008 R2 上重新启动时，安装它会导致对网站的第一个请求出现 HTTP 500 错误

非常令人失望，我希望这将是一个很好的模块，但它看起来确实很不稳定，我们已经停止使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:24:34.897

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T17:53:26.317

我也无法让它工作，我的问题是我试图使用 32 位编辑器（在我的例子中是记事本++）手动修改“C:\Windows\System32\inetsrv\config\applicationHost.config”和它*实际上是在*打开“C:\Windows\SysWOW64\inetsrv\Config\applicationHost.config”，它不适用于我的 64 位站点/池。导致我得出这个结论的一个副作用是 notepad++ 中的文件与我在 IIS 管理器中看到的文件不匹配，这导致我发现[IIS 7.5 applicationHost.config 文件没有被更新](https://stackoverflow.com/questions/5696801/iis-7-5-applicationhost-config-file-is-not-being-updated)。

一旦我使用 64 位编辑器（例如 sublime text 3）打开它，我开始看到 IIS 管理器中描述的更改，并且在对我的应用程序池和站点进行了规定的应用程序初始化更改后，一切都开始工作了。

我怀疑上述答案中描述的 UI 工具可能对其他人有用，因为它作为 64 位应用程序运行，因此会更新正确的 applicationHost.config 文件。

# java - Android 标签片段

> ID：11796058
> 
> 赞同：0
> 
> 时间：2012-08-03T12:49:16.737
> 
> 标签：java, android, tabs, android-fragments

我已按照本教程了解标签片段的工作原理：

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

它工作得很好但是，当我点击一个选项卡时，这段代码似乎不起作用：

```
return (LinearLayout)inflater.inflate(R.layout.tab2, container, false); 
```

有人可以解释为什么会这样吗？我尝试更改一些代码，但似乎没有任何效果。提前致谢。

ps 我的代码与链接的代码相同，因为我想先对其进行测试，然后再对其进行更改。

# c# - SplitContainer 内的 DataGridView 无法重绘

> ID：11796062
> 
> 赞同：1
> 
> 时间：2012-08-03T12:49:27.500
> 
> 标签：c#, winforms

我有一个 DataGridView，其中第一列可以保存动画 gif（动画加载圈）。为了使动画部分工作，我使用了每 100 毫秒滴答一次的 Forms.Timer 并调用此方法

```
 private void timGifAnimation_Tick(object sender, EventArgs e)
    {
        if(this.dataGridView1.Rows.Count > 0 && current >= 0 && current < this.dataGridView1.Rows.Count) 
        {
            this.dataGridView1.Rows[current].Cells[0].Value = this.picProcessing.Image;
            this.dataGridView1.InvalidateCell(0, current);
        }
    } 
```

在我将 DataGridView 放入 SplitContainer 之前，这很有效。不再通过调用 InvalidateCell 重新绘制单元格，gif 动画唯一起作用的时间是现在调整窗口大小或将鼠标悬停在按钮上时（悬停重新绘制一次，将鼠标从按钮上移开重新绘制再次）。调试时，上面的方法仍然被调用，它根本不重绘单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:13:14.533

使控件或控件的一部分无效会将该区域标记为需要重新绘制。为了强制同步重绘，您应该在控件上调用 Update()。否则，每当下一个绘制消息出现时，将重新绘制无效的单元格。

```
dataGridView1.Update(); 
```

# java - 在 Google App Engine 中设置 cookie 超时

> ID：11796063
> 
> 赞同：0
> 
> 时间：2012-08-03T12:49:34.177
> 
> 标签：java, google-app-engine, cookies

在他们的在线开发者文档中，Google App Engine (GAE) 提到您可以从管理控制台中指定您的应用程序的标题和 cookie 超时。

我的问题是：我可以以编程方式做这些事情吗？如果可以，怎么做？如果不是，为什么？！？

我问是因为能够为我的应用程序的每个新上传版本设置不同的设置会很好。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:44:35.507

不，没有设置 GAE 会话 cookie 过期的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:36:53.827

您可以在代码中的响应标头中设置 cookie 过期时间。

有关使用 java 在标头中设置 cookie，请参阅此问题和答案。[谷歌应用引擎java上的HttpOnly cookie](https://stackoverflow.com/questions/2642252/httponly-cookies-on-google-app-engine-java)

此外，您可以在管理控制台中设置的 cookie 过期时间是 1 天（默认）、1 周或 2 周，因此不太确定在每个版本中设置这些时间会有什么好处。

# java - 卡在两个活动之间滑动

> ID：11796064
> 
> 赞同：1
> 
> 时间：2012-08-03T12:49:34.630
> 
> 标签：java, android, adapter, pager

我坚持这个项目，试图在两个活动之间制作页面滑块。

*   我只知道每个活动都是独立工作的，但是当我尝试设置 PageAdapter 进行滑动放置时：
*   **此外，我在 Manifest 中编写活动，在 Java 中从 XML 初始化所有变量，但问题正是在我为按钮设置 onClickListener 时开始的。**

    LayoutInflater inflater = LayoutInflater.from(this); 列表页面 = new ArrayList();

    ```
    View page = inflater.inflate(R.layout.photo, null);
    pages.add(page);
    page = inflater.inflate(R.layout.cameragrid, null);
    pages.add(page);

    CameraPagerAdapter pagerAdapter = new CameraPagerAdapter(pages);
    ViewPager viewPager = new ViewPager(this);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setCurrentItem(0);    //view being shown firstly

    setContentView(viewPager); 
    ```

    而不是`*setContentView(R.layout.photo);*`它不会启动。我错过了什么？感谢提前。

第一个活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    makeAdditionalPageSlide(); //>>> problems started here

    initialize();

    InputStream is = getResources().openRawResource(R.drawable.dinam);
    bmp = BitmapFactory.decodeStream(is);
}
public void makeAdditionalPageSlide(){
    LayoutInflater inflater = LayoutInflater.from(this);
    List<View> pages = new ArrayList<View>();

    View page = inflater.inflate(R.layout.photo, null);
    pages.add(page);
    page = inflater.inflate(R.layout.cameragrid, null);
    pages.add(page);

    CameraPagerAdapter pagerAdapter = new CameraPagerAdapter(pages);
    ViewPager viewPager = new ViewPager(this);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setCurrentItem(0);    //view being shown firstly

    setContentView(viewPager); 

}

private void initialize() {
    // TODO Auto-generated method stub
    iv = (ImageView) findViewById (R.id.ivReturnedPic);
    ib = (ImageButton) findViewById (R.id.ibTakePic);
    b = (Button) findViewById(R.id.bSetWall);
    b.setOnClickListener(this);
    ib.setOnClickListener(this);
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.bSetWall:
        try {
            getApplicationContext().setWallpaper(bmp);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    case R.id.ibTakePic:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, cameraData);
    break;
    }
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK){
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
    }
} 
```

页面适配器：

```
public class CameraPagerAdapter extends PagerAdapter  {
 List<View> pages = null;

    public CameraPagerAdapter(List<View> pages){
        this.pages = pages;
    }

    @Override
    public Object instantiateItem(View collection, int position){
        View v = pages.get(position);
        ((ViewPager) collection).addView(v, 0);
        return v;
    }

    @Override
    public void destroyItem(View collection, int position, Object view){
        ((ViewPager) collection).removeView((View) view);
    }

    @Override
    public int getCount(){
        return pages.size();
    }

    @Override
    public boolean isViewFromObject(View view, Object object){
        return view.equals(object);
    }

    @Override
    public void finishUpdate(View arg0){
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1){
    }

    @Override
    public Parcelable saveState(){
        return null;
    }

    @Override
    public void startUpdate(View arg0){
    } 
```

第二个活动：

```
public class CameraGrid extends Activity implements OnItemClickListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cameragrid);
    GridView gv = (GridView) findViewById(R.id.cameragrid);
    CameraImageAdapter ia = new CameraImageAdapter(getApplicationContext());
    gv.setAdapter(ia);
    //gridview.setOnItemClickListener(this); 
    gv.setOnItemClickListener(this);
}

public void onItemClick(AdapterView<?> arg0, View iv, int position, long id) {
    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(), ""+position, Toast.LENGTH_LONG).show();

    Intent i = new Intent(getApplicationContext(),CameraImageDetails.class);
    i.putExtra("id", position);
    startActivity(i);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:48:32.130

我的建议是使用 ViewPager 和 setContentView(R.layout.mainActivity) 的占位符制作 mainActivity.xml 布局

与您在 PageViewAdapter 中设置的页面视图内容相关的事情。

也许我不太明白你试图这样做的逻辑，但这似乎有点令人困惑..：S

# iphone - 在 UITextField 中同时显示右视图和清除按钮

> ID：11796065
> 
> 赞同：13
> 
> 时间：2012-08-03T12:49:37.357
> 
> 标签：iphone, ios, uitextfield

向 a 添加右视图后`UITextField`，我发现它拒绝显示右视图和清除按钮（同时具有`rightViewMode`并`clearButtonMode`设置为`UITextFieldViewModeAlways`）。我看到了正确的视图，但清除按钮不再显示。我通过覆盖`clearButtonRectForBounds`and确保它们不会重叠`clearButtonRectForBounds`，但无济于事。如果我使用 leftView 而不是 rightView，则不会发生此类问题，并且会显示左视图和清除按钮。

因此，尽管文档中似乎没有说明，但在我看来，清除按钮仅在未显示正确视图时（并且当 text 属性不是空白字符串时）才显示。这是正确的，有没有人有可靠的解决方法？与此同时，我相信我不得不创建一个 UIView，将我的右视图覆盖在 UITextField 之上，以便获得我虽然只能从 UITextField 获得的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-04T10:35:04.817

你不能同时显示两者，但你可以这样做

```
UITextField * textfield = [[UITextField alloc] initWithFrame:CGRectMake(10, 100, 300, 40)];

[textfield setBorderStyle:UITextBorderStyleRoundedRect];

UIImageView * imgvw = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"search.jpeg"]];

[imgvw setFrame:CGRectMake(0, 0, 30, 30)];

[textfield setRightView:imgvw];

[textfield setRightViewMode:UITextFieldViewModeUnlessEditing];

[textfield setClearButtonMode:UITextFieldViewModeWhileEditing];

[self.view addSubview:textfield]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T12:58:33.810

是的你是对的。UITextfield 具有左右视图等属性。如果您使用清除按钮，它会与右视图重叠。

表单 Apple 文档[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)

> 如果您的覆盖视图不与任何其他同级视图重叠，它会像任何其他视图一样接收触摸事件。如果您为视图指定一个控件，该控件将照常跟踪和发送操作。但是，如果覆盖视图与清除按钮重叠，则清除按钮始终优先接收事件。默认情况下，右侧覆盖视图确实与清除按钮重叠。

但就像名字所说的那样，它是一个视图。因此，您可以创建自己的视图，上面有 2 个按钮并设置文本字段的右视图。如果您愿意，您可以使用文本字段的委托方法使您的按钮在视图中出现和消失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-18T14:06:21.897

我有同样的问题，但通过“欺骗”UITextField 使用 LeftView 而不是 RightView 很容易解决。这样你就可以同时使用 clear 按钮和你应该的`rightView`. 您需要做的就是继承 UITextField 并返回“右角”`leftViewRectForBounds`并类似地​​更新`editingRectForBounds`和`textRectForBounds`. 完美运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-19T15:29:08.577

我将用一些代码支持@strange 的答案（使用左视图而不是右视图）：

```
-(CGRect)leftViewRectForBounds:(CGRect)bounds
{
    return CGRectOffset([super leftViewRectForBounds:bounds], bounds.size.width - 30, 0);
}

-(CGRect)clearButtonRectForBounds:(CGRect)bounds
{
    return CGRectOffset([super clearButtonRectForBounds:bounds], -30, 0);
}

-(CGRect)editingRectForBounds:(CGRect)bounds
{
    CGRect rect = bounds;
    rect.origin.x = 10;
    rect.size.width -= 60;
    return rect;
}

-(CGRect)textRectForBounds:(CGRect)bounds
{
    CGRect rect = bounds;
    rect.origin.x = 10;
    rect.size.width -= 60;
    return rect;
} 
```

请注意，我的右（左）视图宽度为 30。

如果您碰巧同时使用左右视图和清除按钮，那么此解决方案显然行不通。在这种情况下，您将不得不放弃使用其中之一，并使用放在 UITextField 旁边的单独视图。

# java - 如何在 JSF-Portlet 中创建 Portlet URL

> ID：11796068
> 
> 赞同：1
> 
> 时间：2012-08-03T12:49:45.547
> 
> 标签：java, portlet, jsf-1.2, jsr286

目标是使用以下代码创建 Portlet 的 URL：

```
ExternalContext ctx = FacesContext.getCurrentInstance().getExternalContext();
RenderResponse response = (RenderResponse)ctx.getResponse();
PortletURL portletUrl = response.createRenderURL();
String url = portletUrl .toString(); 
```

但是，如果我在支持 bean 的 JSF-actionListener 方法中调用它，我会得到一个，`ClassCastException`因为`ctx.getResponse()`给了我一个`javax.portlet.ActionResponse`。

我知道 a`RenderResponse`可以从`doView`Portlet 类中的方法访问。但是我怎样才能在我的支持 bean 中访问它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:27:27.563

> 我想将链接放入将用户引导至 portlet 的电子邮件中。我正在使用 WebSphere Portal 6.1。

在 portlet 生命周期的那个时刻，呈现 URL 通常不可用。

1.  考虑使用[URL 映射功能](http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1/topic/com.ibm.wp.ent.doc_v6101/admin/adpltflt_sync.html)
2.  考虑使用带有[URL 引擎服务](http://www.ibm.com/developerworks/websphere/library/techarticles/0612_behl/0612_behl.html)的 servlet来执行重定向

在这两种情况下，您都不需要通常由 Portal 生成的巨大的编码 URL；你使用类似的东西`http://host/foo/bar`作为你的入口点。

*我在生产中使用了第二种方法。将唯一名称添加到目标页面和 portlet 实例以便于查找。这些是通过 XMLAccess 脚本添加到页面配置中的——它们在 6.1 版中无法通过管理用户界面使用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:00:48.573

我现在使用以下方法，这会导致一些（非常少的）工作负载开销，但效果很好：

*   抓住方法`RenderResponse`_`doView`
*   在 portlet 会话中使用`PortletURL portletUrl = response.createRenderURL();`和存储这个对象（我知道，对于每个请求）。
*   在您的动作侦听器方法中，检索`PortletURL`对象，附加必要的参数并呈现 URL。

# android - NDKr8b 和 gnu++0x 状态

> ID：11796072
> 
> 赞同：0
> 
> 时间：2012-08-03T12:50:05.923
> 
> 标签：android, android-ndk

我尝试在我的原生 android 代码中使用 gnu++0x 功能。我使用的是最新版本（r8b，带有工具链 4.6），虽然使用 std::chrono 或 std::thread 的代码在使用 linux gcc 4.6 时运行良好，但似乎 android ndk 不支持这些功能。

为了编译，我在 Application.mk 文件中使用了以下标志：

```
 APP_CPPFLAGS := -std=gnu++0x
    APP_STL := gnustl_shared
    APP_GNUSTL_CPP_FEATURES := rtti exceptions 
```

我可以做错什么吗？是否有链接可以了解 android ndk 中 c++0x 支持的状态？

非常感谢 ！

问候，

JB

只是这样的示例代码：

```
 std::chrono::time_point<std::chrono::system_clock> start = 
            std::chrono::system_clock::now();

    std::chrono::milliseconds duration (100);
    std::this_thread::sleep_for(duration);

    std::chrono::milliseconds elapsedTime =
        std::chrono::duration_cast<std::chrono::milliseconds>
            (std::chrono::system_clock::now() - start); 
```

带有标题，

```
 #include <chrono>
    #include <thread> 
```

使用 ndk-build，我收到如下错误消息：

```
 error: 'chrono' in namespace 'std' does not name a type
    ....
    error: 'std::this_thread' has not been declared 
```

以及关于chrono和thread的一切！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T10:15:55.937

我知道这是一个老问题，但我成功地在 Android NDK 中使用了chrono。我刚刚将这一行添加到我的 Android.mk 中：

```
LOCAL_CPPFLAGS  := -std=c++11 
```

我还在 Application.mk 中添加了这一行来解决我使用 chrono 时遇到的一些问题：

```
NDK_TOOLCHAIN_VERSION := 4.8 
```

现在你已经支持了 c++11，包括 chrono。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:02:05.173

```
<NDK_root_folder>/docs/CPLUSPLUS-SUPPORT.html 
```

就是这样，在这里您可以获得 NDK 可以为您的 C++ 代码提供的所有信息和支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T13:45:23.170

试一试：NDK_TOOLCHAIN_VERSION := 4.8

NDK_TOOLCHAIN_VERSION 将此变量定义为 4.4.3 或 4.6 以选择 GCC 编译器的版本。4.6 是默认值

# c# - .NET 中的 SOAP 请求

> ID：11796076
> 
> 赞同：7
> 
> 时间：2012-08-03T12:50:15.423
> 
> 标签：c#, web-services, soap, exception-handling

我们正在尝试使用 SOAP 请求与使用 Visual Studio C# 的预订 API 进行交互。

我们已经毫无问题地与另一个 API 的 Web 服务进行了交互，但事实证明这个 API 存在问题。

我们已将其添加为服务参考，Visual Studio 已为其生成所有类和 web.config 条目，因此一切看起来都很好。

但是，当我们尝试向客户端 SOAP 服务发出简单请求时，我们会收到以下错误：

> rpc\literal SOAP 不支持 Namespace='com.hrs.soap.hrs'。包装器元素必须是不合格的。

代码是：

```
PingRequest pingrequest = new PingRequest();    
SoapServiceClient service = new SoapServiceClient();
service.ping(pingrequest); 
```

这是在 Web.config 文件中添加的内容：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="HRSSoapServiceBinding" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="..."
          binding="basicHttpBinding" bindingConfiguration="HRSSoapServiceBinding"
          contract="HRSService.HRSSoapService" name="HRSSoapServicePort" />
    </client>
  </system.serviceModel> 
```

根据文档，请求应如下所示：

```
<complexType name="PingRequest">
    <complexContent>
        <extension base="tns:Request">
            <sequence>
                <element name="echoData" type="xsd:string"/>
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

下面的完整堆栈跟踪：

```
[InvalidOperationException: Namespace='com.hrs.soap.hrs' is not supported with rpc\literal SOAP. The wrapper element has to be unqualified.]
   System.Xml.Serialization.XmlReflectionImporter.CheckTopLevelAttributes(XmlAttributes a, String accessorName) +842469
   System.Xml.Serialization.XmlReflectionImporter.ImportAccessorMapping(MemberMapping accessor, FieldModel model, XmlAttributes a, String ns, Type choiceIdentifierType, Boolean rpc, Boolean openModel, RecursionLimiter limiter) +4072651
   System.Xml.Serialization.XmlReflectionImporter.ImportMemberMapping(XmlReflectionMember xmlReflectionMember, String ns, XmlReflectionMember[] xmlReflectionMembers, Boolean rpc, Boolean openModel, RecursionLimiter limiter) +699
   System.Xml.Serialization.XmlReflectionImporter.ImportMembersMapping(XmlReflectionMember[] xmlReflectionMembers, String ns, Boolean hasWrapperElement, Boolean rpc, Boolean openModel, RecursionLimiter limiter) +298

[InvalidOperationException: There was an error reflecting 'HRSException'.]
  System.Xml.Serialization.XmlReflectionImporter.ImportMembersMapping(XmlReflectionMember[] xmlReflectionMembers, String ns, Boolean hasWrapperElement, Boolean rpc, Boolean openModel, RecursionLimiter limiter) +1051
   System.Xml.Serialization.XmlReflectionImporter.ImportMembersMapping(String elementName, String ns, XmlReflectionMember[] members, Boolean hasWrapperElement, Boolean rpc, Boolean openModel, XmlMappingAccess access) +137
   System.ServiceModel.Description.XmlSerializerImporter.ImportMembersMapping(XmlName elementName, String ns, XmlReflectionMember[] members, Boolean hasWrapperElement, Boolean rpc, Boolean isEncoded, String mappingKey) +237
   System.ServiceModel.Description.OperationReflector.ImportMembersMapping(String elementName, String ns, XmlReflectionMember[] members, Boolean hasWrapperElement, Boolean rpc, String mappingKey) +134
   System.ServiceModel.Description.OperationReflector.ImportFaultElement(FaultDescription fault, XmlQualifiedName& elementName) +458
   System.ServiceModel.Description.OperationReflector.GenerateXmlSerializerFaultContractInfos() +153
   System.ServiceModel.Description.OperationReflector.EnsureMessageInfos() +929
   System.ServiceModel.Description.Reflector.EnsureMessageInfos() +98
   System.ServiceModel.Description.XmlSerializerOperationBehavior.CreateFormatter() +32
   System.ServiceModel.Description.XmlSerializerOperationBehavior.System.ServiceModel.Description.IOperationBehavior.ApplyClientBehavior(OperationDescription description, ClientOperation proxy) +42
   System.ServiceModel.Description.DispatcherBuilder.BindOperations(ContractDescription contract, ClientRuntime proxy, DispatchRuntime dispatch) +94
   System.ServiceModel.Description.DispatcherBuilder.ApplyClientBehavior(ServiceEndpoint serviceEndpoint, ClientRuntime clientRuntime) +247
   System.ServiceModel.Description.DispatcherBuilder.BuildProxyBehavior(ServiceEndpoint serviceEndpoint, BindingParameterCollection& parameters) +342
   System.ServiceModel.Channels.ServiceChannelFactory.BuildChannelFactory(ServiceEndpoint serviceEndpoint, Boolean useActiveAutoClose) +85
   System.ServiceModel.ChannelFactory.CreateFactory() +43
   System.ServiceModel.ChannelFactory.OnOpening() +23
   System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) +274
   System.ServiceModel.ChannelFactory.EnsureOpened() +107
   System.ServiceModel.ChannelFactory`1.CreateChannel(EndpointAddress address, Uri via) +134
   System.ServiceModel.ChannelFactory`1.CreateChannel() +29
   System.ServiceModel.ClientBase`1.CreateChannel() +91
   System.ServiceModel.ClientBase`1.CreateChannelInternal() +26
   System.ServiceModel.ClientBase`1.get_Channel() +261
   BLL.HRSService.HRSSoapServiceClient.ping(HRSPingRequest pingRequest) in C:\Code\-------\BLL\Service References\HRSService\Reference.cs:15850
   -------.Test.Ping() in C:\Code\-------\Test.aspx.cs:48
   -------.Test.Page_Load(Object sender, EventArgs e) in C:\Code\-------\Test.aspx.cs:24
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

我们安装了 Fiddler，我们可以看到没有任何 XML 请求通过，大概是因为它在发送任何内容之前抛出异常。

我们究竟需要在设置中进行哪些更改才能使其正常工作？

**更新**

**WSDL：**可用 [此处][1]

**更新**

遵循 davidfmatheson 的出色建议，我在本地复制了 WSDL 并按照建议进行了修改。尽管可能在不同的地方，但我仍然遇到相同的错误：

```
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
        BLL.HRSService.pingResponse BLL.HRSService.HRSSoapService.ping(BLL.HRSService.pingRequest request) {
            return base.Channel.ping(request);
        }

        public BLL.HRSService.HRSPingResponse ping(BLL.HRSService.HRSPingRequestWrapper ping1) {
            BLL.HRSService.pingRequest inValue = new BLL.HRSService.pingRequest();
            inValue.ping = ping1;
            BLL.HRSService.pingResponse retVal = ((BLL.HRSService.HRSSoapService)(this)).ping(inValue);
            return retVal.pingResponse1;
        } 
```

失败的行是*return base.Channel.ping(request);* *rpc\literal SOAP 不支持*错误Namespace='com.hrs.soap.hrs'。*包装器元素必须是不合格的。*

我还尝试显式设置 SOAPBinding：

```
Exception Details: System.InvalidOperationException: Namespace='com.hrs.soap.hrs' is not supported with rpc\literal SOAP. The wrapper element has to be unqualified.

Source Error: 

Line 15917:        [System.Web.Services.Protocols.SoapDocumentMethod(Use = System.Web.Services.Description.SoapBindingUse.Literal)]
Line 15918:        BLL.HRSService.pingResponse BLL.HRSService.HRSSoapService.ping(BLL.HRSService.pingRequest request) {
Line 15919:            return base.Channel.ping(request);
Line 15920:        }
Line 15921: 
```

好的，现在我已经修改了 SOAP 绑定样式以记录在我的本地 WSDL 中并重新创建了类，但我有一个不同的错误：

```
Unable to generate a temporary class (result=1).
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelTaxDetail[]' to 'BLL.HRSService.HRSHotelTaxDetail'
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelAmenityCriterion[]' to 'BLL.HRSService.HRSHotelAmenityCriterion'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelTaxDetail' to 'BLL.HRSService.HRSHotelTaxDetail[]'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelAmenityCriterion' to 'BLL.HRSService.HRSHotelAmenityCriterion[]' 
```

**堆栈跟踪：**

```
[InvalidOperationException: Unable to generate a temporary class (result=1).
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelTaxDetail[]' to 'BLL.HRSService.HRSHotelTaxDetail'
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelAmenityCriterion[]' to 'BLL.HRSService.HRSHotelAmenityCriterion'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelTaxDetail' to 'BLL.HRSService.HRSHotelTaxDetail[]'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelAmenityCriterion' to 'BLL.HRSService.HRSHotelAmenityCriterion[]'
]
   System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence) +1024
   System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies) +1997
   System.Xml.Serialization.XmlSerializer.GetSerializersFromCache(XmlMapping[] mappings, Type type) +772
   System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type) +4066268
   System.ServiceModel.Description.SerializerGenerationContext.GenerateSerializers() +185
   System.ServiceModel.Description.SerializerGenerationContext.GetSerializer(Int32 handle) +102
   System.ServiceModel.Description.MessageInfo.get_BodySerializer() +17
   System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest) +112

[CommunicationException: There was an error in serializing body of message pingRequest: 'Unable to generate a temporary class (result=1).
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelTaxDetail[]' to 'BLL.HRSService.HRSHotelTaxDetail'
error CS0030: Cannot convert type 'BLL.HRSService.HRSHotelAmenityCriterion[]' to 'BLL.HRSService.HRSHotelAmenityCriterion'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelTaxDetail' to 'BLL.HRSService.HRSHotelTaxDetail[]'
error CS0029: Cannot implicitly convert type 'BLL.HRSService.HRSHotelAmenityCriterion' to 'BLL.HRSService.HRSHotelAmenityCriterion[]'
'.  Please see InnerException for more details.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +9440287
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +345
   BLL.HRSService.HRSSoapService.ping(pingRequest request) +0
   BLL.HRSService.HRSSoapServiceClient.BLL.HRSService.HRSSoapService.ping(pingRequest request) in C:\Code\...\BLL\Service References\HRSService\Reference.cs:17311
   BLL.HRSService.HRSSoapServiceClient.ping(HRSPingRequestWrapper ping1) in C:\Code\...\BLL\Service References\HRSService\Reference.cs:17317
   BLL.HRS_Integration.Ping() in C:\Code\...\BLL\General\HRSIntegration.cs:55
   VenueOptions.Test.Page_Load(Object sender, EventArgs e) in C:\Code\...\Test.aspx.cs:24
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

终于提出要求了！

Fiddler 为 PING 显示以下内容：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><ping xmlns="com.hrs.soap.hrs"><pingRequest xmlns=""><credentials><clientType>...</clientType><clientKey>...</clientKey><clientPassword>...</clientPassword><customerKey xsi:nil="true"/></credentials><myHRSCredentials xsi:nil="true"/><echoData>Hello HRS</echoData></pingRequest></ping></s:Body></s:Envelope> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T13:01:17.210

您正在尝试使用 .NET 中的 RPC 文字服务，因此您可能必须将该服务转换为 doc-literal。请参阅[MSDN 博客](http://blogs.msdn.com/b/beatsch/archive/2004/08/23/218886.aspx)。

编辑：更完整的答案

目标是能够使用 doc-literal，但仍然发送相同的消息。让我们专注于`ping`操作。现在您的 WSDL 的类型定义为：

```
<complexType name="HRSPingRequest">
    <complexContent>
        <extension base="tns:HRSRequest">
            <sequence>
                <element name="echoData" type="xsd:string"/>
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

您的消息定义为：

```
<message name="HRSSoapService_pingRequest">
    <part name="pingRequest" type="tns:HRSPingRequest"/>
</message> 
```

您的绑定定义为：

```
<binding name="HRSSoapServiceBinding" type="tns:HRSSoapService">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="ping">
        <soap:operation soapAction=""/>
        <input>
            <soap:body namespace="com.hrs.soap.hrs" use="literal"/>
        </input>
        <output>
            <soap:body namespace="com.hrs.soap.hrs" use="literal"/>
        </output>
        <fault name="HRSException">
            <soap:fault name="HRSException" use="literal"/>
        </fault>
    </operation>
</binding> 
```

因此，我们在本地将“rpc”更改为“document”，然后将 WSDL 修复为实际的文档/文字：

```
<element name="ping" type="tns:HRSPingRequestWrapper" />
<complexType name="HRSPingRequestWrapper">
    <sequence>
        <element name="pingRequest" type="tns:HRSPingRequest" />
    </sequence>
</complexType>
<complexType name="HRSPingRequest">
    <complexContent>
        <extension base="tns:HRSRequest">
            <sequence>
                <element name="echoData" type="xsd:string"/>
            </sequence>
        </extension>
    </complexContent>
</complexType>

...

<message name="HRSSoapService_pingRequest">
    <part name="pingRequest" element="tns:ping"/>
</message> 
```

现在生成此 WSDL 并查看它是否发送 ping 请求。如果您不修复 Response 结构，它可能无法理解返回的内容，但您至少应该看到通过网络发送的请求。您可以使用 SoapUI 加载这两个 WSDL 并查看生成了哪些类型的请求。目标是发送相同的请求，只是使用 document/literal 而不是 rpc/literal。

# cpu - 多核 CPU 能力

> ID：11796078
> 
> 赞同：0
> 
> 时间：2012-08-03T12:50:15.923
> 
> 标签：cpu, cpu-usage

多核处理器是否可以同时（同时）运行来自 2 个不同进程的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:52:55.907

是的，如果操作系统支持的话。受欢迎的人多年来一直这样做。

# javascript - Foundation 3 - customForms 复选框`es/单选按钮在动态加载时不起作用

> ID：11796079
> 
> 赞同：0
> 
> 时间：2012-08-03T12:50:22.303
> 
> 标签：javascript, zurb-foundation

我正在与Foundation 3合作。

而且我在使用自定义表单和 javascript 时遇到了问题。我使用显示插件登录和注册表单。如果我将表单静态加载到 HTML 中，一切正常。但是如果我动态加载它们（比如说 ajax），复选框和单选按钮就不起作用。即使在 reviel 之后，我也会调用“$.foundation.customForms.appendCustomMarkup”。我应该怎么办？我真的很喜欢那些自定义复选框和单选按钮。我如何将它们与动态加载的 HTML 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T05:49:51.180

我知道这是很久以前问过的 - 但如果其他人遇到它，你可以这样做：

假设您`ajax`装载的容器是`<div id="myModal"></div>`

加载完您的内容后，您必须开火`$('#myModal).foundation('forms');`

# sql - 得到错误的结果

> ID：11796081
> 
> 赞同：2
> 
> 时间：2012-08-03T12:50:33.690
> 
> 标签：sql, sql-server

```
Hospital_Visit
      hid pid HospitalName DoctorId
      41   1  abc        1
      42   2  xyx        2

Patient_Master
       pid  PatientName
       1        jill
       2        rosy
Doctor_Master
      DoctorID DoctorName
       1        John
       2        Jack
Hospital_Study
      sid  hid  exam  status
       1    41   jjj   sfvn
       2    41   fks   jdjd

select  Hospital_Visit.Pid,PatientName,DoctorName from Patient_Master
inner join Hospital_Visit on Hospital_Visit.pid=Patient_Master.pid
inner join Doctor_Master on Doctor_Master.DoctorID= Hospital_Visit.DoctorID
inner join Hospital_Study on Hospital_Study.hid=Hospital_Visit.hid

Pid PatientName  DoctorName exam status
1   Jill         John       jjj  sfvn
2   rosy         John       fks   jdjd 
```

**

```
//Correct output i want
    Pid PatientName  DoctorName exam status
    1   Jill         John       jjj  sfvn
    2   rosy         Jack       fks   jdjd 
```

**

`inner join`由于隐藏在 Hospital_Visit 和 Hospital_Study 上，我得到了错误的结果重复医生姓名
我该如何解决这个问题

* * *

（DTU 编辑 - 可用形式的当前样本数据）：

```
create table Hospital_Visit(hid int,pid int,HospitalName char(3), DoctorId int)
insert into Hospital_Visit(hid, pid, HospitalName, DoctorId) values
      (41,   1,  'abc',        1),
      (42,   2,  'xyx',        2)

create table Patient_Master(pid int,  PatientName char(4))
insert into Patient_Master(pid,  PatientName) values
       (1,        'jill'),
       (2,        'rosy')
create table Doctor_Master(DoctorID int, DoctorName char(4))
insert into Doctor_Master(DoctorID, DoctorName) values
       (1,        'John'),
       (2,        'Jack')
create table Hospital_Study(sid int, hid int,  exam char(3),  status char(4))
insert into Hospital_Study(sid,  hid,  exam,  status) values
       (1,    41,   'jjj'   ,'sfvn'),
       (2,    41,   'fks'   ,'jdjd') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:07:55.293

使用现在给出的示例数据（[修订版 4](https://stackoverflow.com/revisions/11796081/4)），不可能获得您想要的输出。

现在，您的查询返回以下内容：

```
Pid PatientName DoctorName
1   jill        John
1   jill        John 
```

你想要的是这样的：

```
//Correct output i want
Pid PatientName  DoctorName exam status
1   Jill         John       jjj  sfvn
2   rosy         Jack       fks   jdjd 
```

...但`Hospital_Study`表中的数据与此不匹配，因为两行都有`hid = 41`：

```
Hospital_Study
  sid  hid  exam  status
   1    41   jjj   sfvn
   2    41   fks   jdjd 
```

所以他们都引用了`Hospital_Visit`表中的第一行，该行属于名为“Jill”的患者。
--> 有了这个数据，不可能选择名为“rosy”的患者，因为`Hospital_Study`表中没有引用 rosy 就诊（`hid = 42`）的行。

要获得所需的输出， 中的数据`Hospital_Study`需要如下所示：

```
Hospital_Study
  sid  hid  exam  status
   1    41   jjj   sfvn
   2    42   fks   jdjd
        /\
        ||
        this is different 
```

有了这些数据，以及您问题的确切查询，您将得到以下结果：

```
Pid PatientName DoctorName
1   jill        John
2   rosy        Jack 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T12:59:34.623

我对你的加入有疑问

```
inner join Hospital_Study on Hospital_Study.hid=Hospital_Visit.hid 
```

Hospital_Study.hid 是正确的外键，但 Hospital_Visit.hid 是主键还是外键。

如果 Hospital_Visit.hid 是外键，那么您必须在医院的主表 (Hospital_Master) 上再添加一个内部连接。

# c# - 设置图像时参数无效

> ID：11796082
> 
> 赞同：5
> 
> 时间：2012-08-03T12:50:37.420
> 
> 标签：c#, winforms, image, exception-handling, .net-2.0

我在多台计算机上运行 .NET 2.0 程序。在一个我有这个错误反复发生，直到我重置应用程序。

```
 //line below was throwing the exception
 this.myButton.BackgroundImage = global::myNamespace.Properties.Resources.myImage; 
```

例外：

```
 ExceptionType: ArgumentException
 Message: Parameter is not valid.
 Source: System.Drawing
 StackTrace:    at System.Drawing.Image.get_Flags()
     at System.Windows.Forms.ControlPaint.IsImageTransparent(Image backgroundImage)
      at System.Windows.Forms.Control.set_BackgroundImageLayout(ImageLayout value) 
```

该资源存在，并且一旦重置它就可以正常工作。任何人都可以提供任何可能发生的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:15:50.933

我建议您使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来检查文件上的实时活动，以及哪些进程可能正在锁定它。添加一个过滤器，其中路径是图像/资源文件的名称；这应该可以快速显示是否有任何东西在你背后的文件中胡闹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-20T19:44:53.693

是的，这是一个 6 岁的帖子！今天遇到了同样的错误，我花了比它应该的时间更长的时间来修复。我实际上是在启动时处理我的图像控件，所以我显然无法在运行时调整它的背景图像。如果你在这里，不妨仔细检查一下。

# ruby-on-rails-3 - 在 Rails 3 中创建操作以更改布尔值

> ID：11796085
> 
> 赞同：1
> 
> 时间：2012-08-03T12:50:51.803
> 
> 标签：ruby-on-rails-3, methods, controller, routes, link-to

我的 Rails 3 应用程序中有一个简单的建议模型。我正在尝试在索引视图上添加一个简单的 link_to 链接，单击该链接将建议标记为已批准。

到目前为止，我有以下代码：

**路线.rb**

```
resources :suggestions do
 get :approve
end 
```

**建议控制器.rb**

```
def approve
 @suggestion = Suggestion.find(params[:id])
 @suggestion.update_attribute(:approved, 'true')
 @suggestion.update_attribute(:approved_on, Time.now)
 redirect_to suggestion_path
end 
```

**建议.rb**

```
attr_accessible :author, :details, :localip, :title, :approved, :approved_on 
```

**架构.rb**

```
create_table "suggestions", :force => true do |t|
 t.string   "title"
 t.string   "author"
 t.text     "details"
 t.string   "localip"
 t.datetime "created_at",                     :null => false
 t.datetime "updated_at",                     :null => false
 t.boolean  "approved",    :default => false
 t.datetime "approved_on"
end 
```

**index.html.erb（建议）**

```
<% if @suggestion.approved? %>
    <%= @suggestion.approved_on %>
<% else %>
    Not yet approved. (<%= link_to "Approve", approve_suggestion_url(@approve), :method => :put %>)
<% end %> 
```

使用上述代码时，出现以下异常错误：

```
undefined method `approved?' for nil:NilClass 
```

我错过了某个地方的一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:19:20.490

很可能，您发布的代码位于每个循环中，例如

```
<% @suggestions.each do |suggestion| %>
  ...
  <% if @suggestion.approved? %>
    <%= @suggestion.approved_on %>
  <% else %>
    Not yet approved. (<%= link_to "Approve", approve_suggestion_url(@approve), :method => :put %>)
  <% end %>
<% end %> 
```

您需要使用`suggestion`变量而不是`@suggestion`实例变量。此外，要构建建议批准 url，您需要使用`suggestion`而不是`@approve`. 代码应该像

```
 <% if suggestion.approved? %>
    <%= suggestion.approved_on %>
  <% else %>
    Not yet approved. (<%= link_to "Approve", approve_suggestion_url(suggestion), :method => :put %>)
  <% end %> 
```

此外，您应该修改您的 routes.rb 以反映该`approve`操作是成员操作。

```
resources :suggestions do
  put :approve, on: :member
end 
```

要了解成员和收集路线之间的区别，请阅读[ruby​​ on rails 中收集路线和成员路线之间的区别？](https://stackoverflow.com/questions/3028653/difference-between-collection-route-and-member-route-in-ruby-on-rails).

# delphi - 分配一个字节数组，然后在 delphi 中释放它

> ID：11796088
> 
> 赞同：5
> 
> 时间：2012-08-03T12:51:06.157
> 
> 标签：delphi, winapi, memory-management, delphi-7

我想用一个字节数组分配空间（动态大小）并获得一个指向“空间区域”的指针，如果我不再需要它，以后再释放它。

我知道 VirtualAlloc、VirutalAllocEx 和 LocalAlloc。哪个是最好的，之后如何释放内存？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T12:57:25.590

我认为使用 winapi 而不是本机 Pascal 函数不是一个好主意。

您可以简单地将字节数组定义为

```
var yourarray: array of byte; 
```

那么它可以分配给

```
setlength(yourarray, yoursize); 
```

并被释放

```
setlength(yourarray, 0); 
```

这样的数组是引用计数的，您可以访问单个字节`yourarray[byteid]`

或者如果你真的想要指针，你可以使用：

```
var p: pointer;

GetMem(p, yoursize);

FreeMem(p); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T13:25:16.950

您应该更好地使用`GetMem/FreeMem`或动态数组，或`RawByteString`. 请注意`GetMem/FreeMem`，动态数组或`RawByteString`使用*堆*而不是*堆栈*进行分配。

使用`VirtualAlloc/VirtualFree`而不是没有兴趣`GetMem/FreeMem`。对于大块，内存管理器（实现堆）将调用`VirtualAlloc/VirtualFree`API，但对于较小的块，它将更加优化以依赖堆。

由于`VirtualAlloc/VirtualFree`对于当前进程是本地的，使用它的唯一兴趣是如果您想创建一些能够执行代码的内存块，例如，通过它们的`VirtualAllocEx/VirtualFreeEx`API 创建一些类或接口的存根包装器（但我怀疑这是您的需要）。

如果你想对所有进程/程序使用一些全局内存，你`GlobalAlloc/GlobalFree`手头有 API 调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T19:35:35.673

VirtualAlloc 是一个页面分配函数。它是用于分配内存的低级用户空间代码函数。但是你必须明白，从 VirtualAlloc 返回的内存是对齐到页面大小的倍数的。

在 Windows 32 位上，页面大小通常为 4096 字节。在其他系统上，它可能更大。

因此，当您需要整页内存时，这使得 VirtualAlloc 很有用。VirtualAlloc 可以分配大的“页面范围”。这些页面是虚拟的，因此实际上是到底层系统 RAM 的映射，并且有一半的时间被换出到交换文件，这就是为什么它被称为 VirtualAlloc，强调虚拟。

使用 VirtualAlloc 和 VirtualAllocEx 你也可以只保留一些内存页面。保留页面是在您确定它们将被使用之前保持在保留状态的范围，此时您可以提交页面，此时将分配/提交页面所需的底层资源。

使用 VirtualFree 释放您使用 VirtualAlloc 分配或保留的页面。

VirtualAlloc 和 LocalAlloc 之间的区别在于 LocalAlloc 从堆中分配，而堆是从更大的保留页面块分配内存块的机制。在内部，堆使用 VirtualAlloc 分配大部分内存，然后将这些页面分成较小的块，您可以将这些块视为从 malloc、getmem 和 LocalAlloc 等函数返回的缓冲区。

LocalAlloc 可以看作是 Windows 内置的 malloc 或 getmem 版本。对 LocalAlloc 的调用类似于在 C++ 中调用 malloc 或在 Delphi 中调用 getmem。事实上，您可以在 Delphi 中覆盖 GetMem 并使用 LocalAlloc，您的 DElphi 应用程序可能会运行相同。

调用 LocalFree 以释放一些使用 LocalAlloc 分配的内存。在内部，这会将内存块标记为可供下一个调用者使用。

因此，现在决定时的主要考虑因素是开销。如果您需要经常分配，那么您应该使用 LocalAlloc 或 getmem，因为提交和保留虚拟页面是一个更耗时的过程。

换句话说，使用 getmem 或 LocalAlloc 除非您有非常特殊的理由不这样做。

在我使用 Delphi 5 与 C++ 编译器的所有测试中，Delphi 5 getmem 更快，尽管那是五年前的事了。从那时起，像hoard 这样的分配器就可以使用，它可能会更快。但是当有这么多变量时，很难说什么更快。

但是可以肯定的是，像 LocalAlloc、malloc 和 getmem 这样的所有堆函数应该比使用 VirtualAlloc 分配和释放要快得多，VirtualAlloc 通常用于在内部为 LocalAlloc 和 getmem 等堆函数保留内存。

对于 Pascal 程序，更喜欢 getmem 或 SetLength，因为它更便于移植。或者，您可以将自己的包装函数写入 LocalAlloc 或任何 OS 堆函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:00:03.740

您列出的函数是 WinAPI 函数，它们是平台相关的。显然，您应该使用用于分配的相同 API 的功能来解除分配。

如果您想使用 Delphi 内存管理器，那么 GetMemory 和 FreeMemory 是显而易见的选择，但是如果您需要将指针与系统页面大小对齐（这是某些低级库的要求）或者您将使用大缓冲区大小，那么 Windows API 虚拟内存函数[VirtualAlloc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)和 VirtualFree 是你最好的朋友。

# vim - vim 在哪里搜索它的文件名补全 ctrl-x ctrl-f？

> ID：11796089
> 
> 赞同：9
> 
> 时间：2012-08-03T12:51:11.413
> 
> 标签：vim, autocomplete

我在 (project)/src 和 (project)/inc 中有一堆文件。

当我按下`<C-x><C-f>`vim 时，应该从那里给我关于文件名的建议，但我找不到如何设置它搜索的目录。

我阅读的文档仅说明了这一点`<C-p>`并`<C-n>`在列表中移动，但没有关于校准搜索路径的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T15:54:48.193

```
set autochdir 
```

自动将“当前目录”设置为包含当前文件的目录。把它放在你的vimrc中，享受生活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:57:32.423

它是启动`pwd`的路径。它`vim`是不可配置的。

虽然一个名为`path`-support的新功能`vim`很快就会推出：http: [//vimdoc.sourceforge.net/htmldoc/options.html#%27path%27](http://vimdoc.sourceforge.net/htmldoc/options.html#%27path%27)

这可能会帮助您配置更多。

同时尝试这些 vim 插件：

FuzzyFinder [http://www.vim.org/scripts/script.php?script%5Fid=1984](http://www.vim.org/scripts/script.php?script%5Fid=1984)

zvim [https://bitbucket.org/ZyX_I/zvim](https://bitbucket.org/ZyX_I/zvim)

t 命令 [http://www.vim.org/scripts/script.php?script_id=3025](http://www.vim.org/scripts/script.php?script_id=3025)

或者您可以编写自己的 vim 插件。

参考： http:
[//vim.wikia.com/wiki/Searching_for_files_in_a_directory_listing](http://vim.wikia.com/wiki/Searching_for_files_in_a_directory_listing)
和
[http://vim.wikia.com/wiki/Source_vimrc_and_use_tags_in_a_parent_directory](http://vim.wikia.com/wiki/Source_vimrc_and_use_tags_in_a_parent_directory)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:10:47.900

这是我为解决问题所做的，似乎比@askmish 解决方案容易得多。
编辑`vimrc`并添加此映射：

```
map <F4> :cd %:h<CR> 
```

从现在开始，按`F4`切换到当前目录。
现在，当您按下时，`<C-X><C-F>`您可以看到当前工作目录中所有文件的列表。

# android - Facebook SSO 在应用程序被终止时返回

> ID：11796090
> 
> 赞同：0
> 
> 时间：2012-08-03T12:51:11.587
> 
> 标签：android, facebook-android-sdk

我将 facebook 用于 android sdk 用于 SSO。

我的活动调用`fb.authorize()`函数来执行 OAuth。在这个函数中，我给出了一个对`DialogListener`负责根据 OAuth 结果采取适当措施的对象的引用。当用户从 FB 应用程序返回并且 DialogListener 对象丢失时，操作系统可能已经终止了该活动。在这种情况下，无法获得我们应该在 DialogListener 中获得的 AccessToken。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:57:55.687

您可以致电：

```
mFB.getAccessToken() 
```

但是您可以将会话存储在 SharedPreferences 中以在本地重用它。令牌将过期，并在再次需要时被请求和存储。

[https://github.com/facebook/facebook-android-sdk/blob/master/examples/simple/src/com/facebook/android/SessionStore.java](https://github.com/facebook/facebook-android-sdk/blob/master/examples/simple/src/com/facebook/android/SessionStore.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:42:35.880

我自己回答这个问题。

执行 OAuth 后的 Facebook 应用程序返回的结果是我们获取的意图数据。它`onActivityResult();`需要调用`mFB.authorizeCallback()`。`onActivityResult`

如果您查看此函数的来源，您将知道如何从意图数据中提取它。这样做你可以在 onActivityResult 中获得访问令牌。

这是源链接 [https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java#L417](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java#L417)

# javascript - 有没有办法在 JavaScript 的函数调用中提供命名参数？

> ID：11796093
> 
> 赞同：332
> 
> 时间：2012-08-03T12:51:22.053
> 
> 标签：javascript, function, optional-parameters, named-parameters

我发现 C# 中的命名参数功能在某些情况下非常有用。

```
calculateBMI(70, height: 175); 
```

如果我想在 JavaScript 中使用它，我可以使用什么？

* * *

我不想要的是：

```
myFunction({ param1: 70, param2: 175 });

function myFunction(params){
  // Check if params is an object
  // Check if the parameters I need are non-null
  // Blah blah
} 
```

我已经使用过这种方法。还有其他方法吗？

我可以使用任何库来执行此操作。

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-08-03T13:32:16.777

**ES2015 及更高版本**

在 ES2015 中，可以使用[*参数解构来模拟命名参数。*](https://simonsmith.io/destructuring-objects-as-function-parameters-in-es6)它需要调用者传递一个对象，但如果您还使用默认参数，则可以避免函数内部的所有检查：

```
myFunction({ param1 : 70, param2 : 175});

function myFunction({param1, param2}={}){
  // ...function body...
}

// Or with defaults, 
function myFunc({
  name = 'Default user',
  age = 'N/A'
}={}) {
  // ...function body...
} 
```

* * *

**ES5**

有一种方法可以接近您想要的，但它基于[`Function.prototype.toString` *^([ES5])*](https://es5.github.io/#x15.3.4.2)的输出，这在某种程度上依赖于实现，因此它可能不兼容跨浏览器。

这个想法是从函数的字符串表示中解析参数名称，以便您可以将对象的属性与相应的参数相关联。

函数调用可能看起来像

```
func(a, b, {someArg: ..., someOtherArg: ...}); 
```

其中`a`和`b`是位置参数，最后一个参数是具有命名参数的对象。

例如：

```
var parameterfy = (function() {
    var pattern = /function[^(]*\(([^)]*)\)/;

    return function(func) {
        // fails horribly for parameterless functions ;)
        var args = func.toString().match(pattern)[1].split(/,\s*/);

        return function() {
            var named_params = arguments[arguments.length - 1];
            if (typeof named_params === 'object') {
                var params = [].slice.call(arguments, 0, -1);
                if (params.length < args.length) {
                    for (var i = params.length, l = args.length; i < l; i++) {
                        params.push(named_params[args[i]]);
                    }
                    return func.apply(this, params);
                }
            }
            return func.apply(null, arguments);
        };
    };
}()); 
```

您将用作：

```
var foo = parameterfy(function(a, b, c) {
    console.log('a is ' + a, ' | b is ' + b, ' | c is ' + c);     
});

foo(1, 2, 3); // a is 1  | b is 2  | c is 3
foo(1, {b:2, c:3}); // a is 1  | b is 2  | c is 3
foo(1, {c:3}); // a is 1  | b is undefined  | c is 3
foo({a: 1, c:3}); // a is 1  | b is undefined  | c is 3 
```

[**演示**](https://jsfiddle.net/9U328/)

这种方法有一些**缺点**（您已被警告！）：

*   如果最后一个参数是对象，则将其视为“命名参数对象”
*   您将始终获得与函数中定义的参数一样多的参数，但其中一些可能具有值`undefined`（这与根本没有值不同）。这意味着你不能用它`arguments.length`来测试已经传递了多少参数。

* * *

除了让函数创建包装器之外，您还可以拥有一个接受函数和各种值作为参数的函数，例如

```
call(func, a, b, {posArg: ... }); 
```

甚至扩展`Function.prototype`，以便您可以执行以下操作：

```
foo.execute(a, b, {posArg: ...}); 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-08-03T12:54:44.687

**不**——对象方法是 JavaScript 对此的回答。如果您的函数需要一个对象而不是单独的参数，这没有问题。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-07-10T20:06:24.677

很多人说只使用“传递对象”技巧，以便您命名参数。

```
/**
 * My Function
 *
 * @param {Object} arg1 Named arguments
 */
function myFunc(arg1) { }

myFunc({ param1 : 70, param2 : 175}); 
```

这很好用，除了......当涉及到大多数 IDE 时，我们中的许多开发人员都依赖于我们 IDE 中的类型/参数提示。我个人使用 PHP Storm（以及其他 JetBrains IDE，例如用于 python 的 PyCharm 和用于 Objective C 的 AppCode）

使用“传递对象”技巧的最大问题是，当您调用函数时，IDE 会为您提供单一类型提示，仅此而已......我们应该如何知道应该进入的参数和类型arg1 对象？

![我不知道 arg1 中应该包含哪些参数](../Images/f0f26cc68571d1aa0b0c3c235dca33e2.png)

所以......“传递对象”技巧对我不起作用......它实际上会导致更多的头痛，因为在我知道函数期望的参数之前必须查看每个函数的文档块......当然，它非常适合当您维护现有代码时，编写新代码却很糟糕。

嗯，这就是我使用的技术......现在，它可能存在一些问题，一些开发人员可能会告诉我我做错了，而我对这些事情持开放态度......我总是愿意寻找更好的方法来完成任务......所以，如果这种技术有问题，那么欢迎发表评论。

```
/**
 * My Function
 *
 * @param {string} arg1 Argument 1
 * @param {string} arg2 Argument 2
 */
function myFunc(arg1, arg2) { }

var arg1, arg2;
myFunc(arg1='Param1', arg2='Param2'); 
```

这样，我就拥有了两全其美...新代码很容易编写，因为我的 IDE 为我提供了所有正确的参数提示...而且，在以后维护代码时，我可以一目了然，不仅传递给函数的值，也是参数的名称。我看到的唯一开销是将您的参数名称声明为局部变量，以防止污染全局命名空间。当然，这有点额外的输入，但与在编写新代码或维护现有代码时查找文档块所需的时间相比，这是微不足道的。

![现在，我在创建新代码时拥有了所有参数和类型](../Images/2f9986c688fc09083fdd03d01f930511.png)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-06-03T13:29:59.273

如果你想清楚每个参数是什么，而不仅仅是调用

```
someFunction(70, 115); 
```

为什么不做以下

```
var width = 70, height = 115;
someFunction(width, height); 
```

当然，这是一行额外的代码，但它在可读性方面胜出。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-07T15:40:38.117

另一种方法是使用合适对象的属性，例如：

```
function plus(a,b) { return a+b; };

Plus = { a: function(x) { return { b: function(y) { return plus(x,y) }}}, 
         b: function(y) { return { a: function(x) { return plus(x,y) }}}};

sum = Plus.a(3).b(5); 
```

当然，对于这个虚构的例子来说，这有点毫无意义。但是在函数看起来像的情况下

```
do_something(some_connection_handle, some_context_parameter, some_value) 
```

它可能更有用。它还可以与“parameterfy”的想法相结合，以通用方式从现有函数中创建这样的对象。也就是说，对于每个参数，它将创建一个可以评估为函数的部分评估版本的成员。

这个想法当然与 Schönfinkeling aka Currying 有关。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-25T03:11:21.957

`f`使用作为对象传递的命名参数调用函数

```
o = {height: 1, width: 5, ...} 
```

基本上是`f(...g(o))`在我使用扩展语法的地方调用它的组合，并且`g`是将对象值与其参数位置连接起来的“绑定”映射。

绑定映射正是缺少的成分，可以通过其键的数组来表示：

```
// map 'height' to the first and 'width' to the second param
binding = ['height', 'width']

// take binding and arg object and return aray of args
withNamed = (bnd, o) => bnd.map(param => o[param])

// call f with named args via binding
f(...withNamed(binding, {hight: 1, width: 5})) 
```

请注意**三个解耦的成分：**函数、具有命名参数的对象和绑定。这种解耦为使用此构造提供了很大的灵活性，其中绑定可以在函数定义中任意定制，并在函数调用时任意扩展。

例如，您可能希望在函数定义中缩写`height`和`width`as `h`，`w`以使其更短、更清晰，同时为了清楚起见，您仍希望使用全名来调用它：

```
// use short params
f = (h, w) => ...

// modify f to be called with named args
ff = o => f(...withNamed(['height', 'width'], o))

// now call with real more descriptive names
ff({height: 1, width: 5}) 
```

这种灵活性对于函数式编程也更有用，在函数式编程中，可以任意转换函数，而原始参数名称会丢失。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-02T23:43:58.413

还有另一种方法。如果您通过引用传递对象，则该对象的属性将出现在函数的本地范围内。我知道这适用于 Safari（尚未检查其他浏览器）并且我不知道此功能是否有名称，但下面的示例说明了它的用法。

尽管在实践中我认为这不会提供超出您已经使用的技术的任何功能价值，但它在语义上更清晰一些。它仍然需要传递对象引用或对象字面量。

```
function sum({ a:a, b:b}) {
    console.log(a+'+'+b);
    if(a==undefined) a=0;
    if(b==undefined) b=0;
    return (a+b);
}

// will work (returns 9 and 3 respectively)
console.log(sum({a:4,b:5}));
console.log(sum({a:3}));

// will not work (returns 0)
console.log(sum(4,5));
console.log(sum(4)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-11T06:25:17.140

这无疑是伪代码，但我相信它会起作用（我知道它在 Typescript 中起作用；我正在将它用于 JavaScript）

```
// Target Function
const myFunc = (a=1,b=2,c=3) => {a+b+c}

// Goal usage:
myFunc(a=5, b=6) // 14
myFunc(c=0) // 3 
```

* * *

```
// set your defaults
const myFuncDefaults = {a:1, b:2, c:3};

// override them with passed params
const myFuncParams = (params) => { return Object.assign(myFuncDefaults, params)}

// use the overloaded dict as the input
const myFunc2 = (params) => {
  let {a, b, c} = myFuncParams(params);
  return myFunc(a, b, c)
}

// Usage:
myFunc({a:5, b:6}) // 14
myFunc({c:0}) // 3

// Written more succinctly:
const myFunc = (params) => {
  let {a,b,c} = Object.assign({a:1, b:2, c:3}, params)
  return a + b + c
} 
```

* * *

FWIW Typescript 通过提示使这种方式变得很好：

```
interface IParams {
  a: number;
  b: number;
  c: number;
}

const myFunc = (params: Partial<IParams>): number => {
  const default: IParams = {a:1, b:2, c:3};
  let {a, b, c} = Object.assign(default, params)
  return a + b + c
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-18T08:58:06.727

注意。如评论中所述，我对 2016 年的回答不正确且具有误导性。

尝试 Node-6.4.0 (process.versions.v8 = '5.0.71.60') 和 Node Chakracore-v7.0.0-pre8 然后 Chrome-52 (V8=5.2.361.49)，我注意到命名参数*几乎*已实施，但该命令仍具有优先权。我找不到 ECMA 标准所说的内容。

```
>function f(a=1, b=2){ console.log(`a=${a} + b=${b} = ${a+b}`) }

> f()
a=1 + b=2 = 3
> f(a=5)
a=5 + b=2 = 7
> f(a=7, b=10)
a=7 + b=10 = 17 
```

但是需要下单！！这是标准行为吗？

```
> f(b=10)
a=10 + b=2 = 12 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-02T09:58:07.257

**是**的，嗯，有点。我找到了 2 个解决方案。我只解释一个。

在这个解决方案中，我们放弃了位置参数。

我们可以使用一个对象（几乎与**python 中的 dict**相同）来传递参数。

在此示例中，我使用该函数生成图像文件的名称

```
//first we define our function with just ONE argument
function name_of_img(img_desc){

  // with this step, any undefined value will be assigned a value
  if(img_desc.size == undefined) {img_desc.size = "400x500"}
  if(img_desc.format == undefined) {img_desc.format = ".png"}

  console.log(img_desc.size + img_desc.format)
}

//notice inside our function we're passing a dict/object

name_of_img({size: "200x250", format=".jpg"})
// returns "200x250.jpg"

name_of_img({size: "1200x950"})
// returns "1200x950.png" 
```

我们可以修改这个例子，所以我们也可以使用位置参数，我们也可以修改它，所以可以传递无效的参数，我想我会为此做一个 github 存储库

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-02T01:06:08.453

来自 Python 这让我很烦。我为节点编写了一个简单的包装器/代理，它将接受位置对象和关键字对象。

[https://github.com/vinces1979/node-def/blob/master/README.md](https://github.com/vinces1979/node-def/blob/master/README.md)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2019-08-05T11:38:20.043

与通常认为的相反，命名参数可以通过简单、整洁的编码约定在标准的老式 JavaScript（仅用于布尔参数）中实现，如下所示。

```
function f(p1=true, p2=false) {
    ...
}

f(!!"p1"==false, !!"p2"==true); // call f(p1=false, p2=true) 
```

注意事项：

*   必须保留参数的顺序 - 但该模式仍然有用，因为它使哪个实际参数适用于哪个形式参数很明显，而无需 grep 函数签名或使用 IDE。

*   这仅适用于布尔值。但是，我确信可以使用 JavaScript 独特的类型强制语义为其他类型开发类似的模式。

# php - php中不可能有静态数组属性吗？

> ID：11796096
> 
> 赞同：11
> 
> 时间：2012-08-03T12:51:27.013
> 
> 标签：php, class, static

以下是我在php中的代码，我收到错误：

> 解析错误：语法错误，第 4 行 /LR_StaticSettings.php 中的意外“[”

```
<?php
class StaticSettings{
    function setkey ($key, $value) {
        self::arrErr[$key] = $value; // error in this line
    }
}
?> 
```

我不想静态使用`$this->arrErr[$key]`，这样我就可以在不创建实例/对象的情况下获取和设置静态属性。

为什么会出现这个错误？我们不能创建静态数组吗？

如果有其他方法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-03T12:52:54.313

您需要将该变量声明为静态成员变量，并在引用它时在其名称前加上美元符号：

```
class StaticSettings{
    private static $arrErr = array();
    function setkey($key,$value){
        self::$arrErr[$key] = $value;
    }
} 
```

你会像这样实例化它：

```
$o = new StaticSettings;
$o->setKey( "foo", "bar");
print_r( StaticSettings::$arrErr); // Changed private to public to get this to work 
```

[您可以在此演示](http://viper-7.com/0q9hBA)中看到它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:55:07.513

您的代码未定义`$arrErr`为静态成员变量。您应该将其声明为

```
<?php
class StaticSettings{
    public static $arrErr = array();

    function setkey($key,$value){
        self::arrErr[$key] = $value;
    }
}
?> 
```

# jquery - 设置相对于父 div 位置的 jQuery UI 可拖动坐标

> ID：11796104
> 
> 赞同：1
> 
> 时间：2012-08-03T12:52:01.603
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有一个 jQuery UI 可拖动 div，它嵌套在绝对定位的 div 中。我目前正在使用以下代码：

```
 $(function() {
    $('#home-elev-door').draggable({
        axis: 'x',
        containment: [2440, 0, 2650, 0]
        });
} 
```

这可行，但是，我设置的包含坐标是相对于窗口的。我需要将它们设置为相对于父 div 的位置。我尝试将可拖动元素的 css 位置更改为“相对”并将第一个包含参数设置为 0，但它不起作用。我需要做什么？

# c# - 如何使用 Microsoft Speech 从语音模式中识别说话者？

> ID：11796105
> 
> 赞同：8
> 
> 时间：2012-08-03T12:52:03.927
> 
> 标签：c#, speech

我正在将 Microsoft Speech C# API 用于家庭自动化命令

我想知道是否有一种方法或内置的 C# 方法来散列语音输入并识别谁在说话。如果是 Alice 或 Bob 说“Hello Alice”或“Hello Bob”。

编辑：

Microsoft Speech API 可以提供 .wav 的录音。它可能能够散列、处理……以了解谁在说话：

*   响亮的声音，缓慢的调制，... => Bob
*   高音，快速调制，... => Alice

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:34:04.953

说话人识别是一个难题，仍然是一个活跃的研究领域。我不认为 Microsoft 语音 api 有任何说话人识别支持，但不是 100% 肯定。

在研究该主题时，我发现以下文章确实很有帮助。它介绍了主题，还提供了一个非常粗略的实现。可能是一个很好的起点。

[http://www.ibm.com/developerworks/opensource/library/os-sndpeek/index.html](http://www.ibm.com/developerworks/opensource/library/os-sndpeek/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T09:52:56.887

您可以使用 Microsoft Speaker Recognition API 来执行此任务：[https ://www.microsoft.com/cognitive-services/en-us/speaker-recognition-api](https://www.microsoft.com/cognitive-services/en-us/speaker-recognition-api)

Microsoft 为此提供了两个 API：说话者验证和说话者识别。

您可以在这里找到他们的 C# 和 Python SDK：[https ://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/SpeakerRecognition](https://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/SpeakerRecognition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T05:41:30.293

看起来您正在尝试解决说话人分类问题（找出谁在什么时候说话）；互联网上有很多工具包可用。我可以推荐一个名为 LIUM 的（在 Java 上运行）：[http](http://www-lium.univ-lemans.fr/diarization/doku.php) ://www-lium.univ-lemans.fr/diarization/doku.php 。

如果您只是对区分 Alice 和 Bob 感兴趣，您可以查看上面网站脚本页面中的性别检测部分（或直接访问此处[http://www-lium.univ-lemans.fr/diarization/doku .php/gender_detection](http://www-lium.univ-lemans.fr/diarization/doku.php/gender_detection)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T22:38:32.840

Microsoft Speech 也有 SDK for Speaker Diarization。 [https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/how-to-use-conversation-transcription](https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/how-to-use-conversation-transcription)

它有 C++/C#/Java 版本，并且有专门的硬件可供购买。

# java - 我需要在 java 中创建一个使用基于 SOAP 的 .Net Web 服务的 Web 应用程序。为此，我将使用哪个工具和框架？

> ID：11796106
> 
> 赞同：0
> 
> 时间：2012-08-03T12:52:13.880
> 
> 标签：java, web-services, jakarta-ee, web-applications, soap

需要考虑的事情是：

*   开源
*   用于从 WSDL 文件生成 SOAP 请求的 API。（我用 AXIS 2 做了一些示例。）
*   易于实施（如 PLAY/GRAILS 框架）以优化开发人员的生产力。

我找到了这个链接： http: [//playframework.wordpress.com/2010/08/15/web-services-using-play/](http://playframework.wordpress.com/2010/08/15/web-services-using-play/) 这听起来更容易构建，但不确定一段时间内需求变化时的复杂性.

截至目前，将没有任何数据库来存储任何详细信息。但是一旦原型完成，要求可能会发生变化。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:26:37.090

Spring Web 服务非常好，并且有一个易于使用的客户端层。

[http://static.springsource.org/spring-ws/site/reference/html/client.html](http://static.springsource.org/spring-ws/site/reference/html/client.html)

您必须在 spring XML 或基于 java 的配置中进行配置工作，但是一旦完成，就很容易了：

```
StreamSource source = new StreamSource(new StringReader(msgText));
StreamResult result = new StreamResult(System.out);               
webServiceTemplate.sendSourceAndReceiveToResult(
            uri,
            source,
            result); 
```

如果要将消息发送到 webServiceTemplate 对象的默认 URI，则 uri 参数是可选的（有一个方法不需要它）。

特定示例处理直接 xml，但有更高级的功能用于编组/解组对象、安全性等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:08:14.853

我会建议[JDeveloper](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)和[ADF](http://www.oracle.com/technetwork/developer-tools/adf/index.html)。

# javascript - 每次刷新页面时，地理位置共享对话框都不会显示

> ID：11796110
> 
> 赞同：1
> 
> 时间：2012-08-03T12:52:20.243
> 
> 标签：javascript, android, iphone, w3c-geolocation

为 android 和 iphone 编写了 Geolocation API 代码。参考[http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)。显示一个对话框 - 要求共享设备当前位置。如果我单击拒绝/共享位置，下次对话框不会显示。每次刷新同一页面时都应显示对话框。下面是代码示例：

```
function showMap(position) {
// Show a map centered at (position.coords.latitude, position.coords.longitude).
return function(position) {
    callback({
        latitude: position.coords.latitude,
        longitude: position.coords.longitude
    });
}; 
```

}

navigator.geolocation.getCurrentPosition(showMap);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:50:33.993

它取决于浏览器，但通常一旦您授予站点使用您的位置的权限，该权限就会存储在浏览器中，如果您返回，该权限将再次使用。有一些控件，同样取决于浏览器。以下是 Safari 和 Chrome 的一些信息：

[http://hiddencodes.wordpress.com/2012/01/16/geolocation-api-chrome-safari-permission-management-and-visual-differences/](http://hiddencodes.wordpress.com/2012/01/16/geolocation-api-chrome-safari-permission-management-and-visual-differences/)

# javascript - 我想使用 jquery、javascript 或 asp 在单击查看购物车链接时显示添加到购物车弹出窗口

> ID：11796114
> 
> 赞同：-3
> 
> 时间：2012-08-03T12:52:38.607
> 
> 标签：javascript, jquery

请检查以下链接：

[http://v1098050.jkgeyrewb7wh.demo10.volusion.com/ProductDetails.asp?ProductCode=MacFRC](http://v1098050.jkgeyrewb7wh.demo10.volusion.com/ProductDetails.asp?ProductCode=MacFRC)

单击添加到购物车按钮它显示添加到购物车弹出窗口我想在单击查看购物车链接后显示添加到购物车弹出窗口。请记住，我没有添加到购物车的代码意味着我不能更改该代码，只有我可以访问它的 ID 和类。只有在查看源代码之后，我才能看到代码或脚本。
怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:02:35.303

```
<a href="" onclick="return addToCart(this.form, this);" id="btnaddtocart1">View Cart</a> 
```

你得到了错误的上下文来运行 addToCart，所以它返回一个错误。您需要做的是将正确的 DOMObjects 放入函数中：

```
<a href="" onclick="return addToCart(document.MainForm, document.getElementsByClassName('vCSS_input_addtocart')[0]);" id="btnaddtocart1">View Cart</a> 
```

而且你还需要一些关于 JS 和 HTML 的初学者书籍。

# c# - 如何将 PDF 转换为网页版 Flash？

> ID：11796115
> 
> 赞同：2
> 
> 时间：2012-08-03T12:52:39.853
> 
> 标签：c#, asp.net, flash, pdf2swf

下面的代码在我后面的代码中用于上传 .pdf 文件，然后将其转换为 .swf(flash)。该 `WriteToFile`方法将pdf保存到服务器目录并在该`Button1_Click`方法中调用。在该`Button1_Clicked`方法中，我创建了一个进程来执行随 swftools 套件安装的 pdf2swf.exe，该套件将 pdf 转换为 flash 可读形式。

但是，下载的 pdf 没有转换为 swf，我想用它以不可下载的形式向我的网站用户显示。我已经知道如何显示 Flash 文件 (.swf)，但需要转换方面的帮助。

```
private void WriteToFile(string fileName)
{
    // Create a file

    string path = Server.MapPath("~/");           
    // string filename = FileUpload1.PostedFile.FileName;
    int fileLength = FileUpload1.PostedFile.ContentLength;
    byte[] imageBytes = new byte[fileLength];
    FileUpload1.SaveAs(path + fileName);
}

protected void Button1_Click(object sender, EventArgs e)
{
    int pageNumber = 1;
    string inputfile = FileUpload1.FileName;
    string filename = @"Sports_Events.pdf";
    WriteToFile(FileUpload1.FileName);
    string outputfile = @"pdfdoc.swf";
    System.Diagnostics.Process pdf2swfprocess = new System.Diagnostics.Process();
    // Process pdf2swfprocess = new Process();
    pdf2swfprocess.StartInfo.UseShellExecute = false;
    pdf2swfprocess.StartInfo.RedirectStandardOutput = true;
    pdf2swfprocess.StartInfo.CreateNoWindow = true;
    pdf2swfprocess.EnableRaisingEvents = false;
    pdf2swfprocess.StartInfo.WorkingDirectory = HttpContext.Current.Server.MapPath("~");
    pdf2swfprocess.StartInfo.RedirectStandardError = true;
    pdf2swfprocess.StartInfo.FileName = HttpContext.Current.Server.MapPath("~/PDF2SWF/pdf2swf.exe");
    //pdf2swfprocess.StartInfo.Arguments = inputfile + "-o" + outputfile;
    pdf2swfprocess.StartInfo.Arguments = "\"" + HttpContext.Current.Server.MapPath("~/PDF2SWF/FONTS") + "\"" + " -p " + pageNumber + " " + filename + " -o " + filename + pageNumber + ".swf";
    if (FileUpload1.HasFile)
    {

        try
        {

            pdf2swfprocess.Start();

            pdf2swfprocess.WaitForExit();
            pdf2swfprocess.Close();
        }
        catch (System.Exception)
        {
            Error1.Text = "Error converting file";
        }

    }
    else
    {
        Error1.Text = "The selected file does not exist";
    }
} 
```

相关链接：

1.  [此链接尝试将相同的 pdf 转换为 .swf](http://dotnetslackers.com/Community/blogs/haissam/archive/2008/03/14/convert-pdf-to-swf-in-asp-net.aspx)

2.  [这是工具 pdf2swf 工具的链接，该工具与我安装的 swftools 版本 0.92 一起安装以进行转换](http://www.swftools.org/download.html)

3.  这个人想出了如何让它工作，但我不明白如何做出这样的改变：[SWFTools' pdf2swf: No text conversion if started from IIS-hosted website](https://stackoverflow.com/questions/10137401/swftools-pdf2swf-no-text-converted-if-started-from-iis-hosted-website?rq=1)

# java - 如何使用 SolrJ 运行完全导入命令

> ID：11796116
> 
> 赞同：3
> 
> 时间：2012-08-03T12:52:41.227
> 
> 标签：java, solr, solrj

请建议，我如何运行 command=full-import？

```
 SolrServer solrServer = new HttpSolrServer("http://localhost:8080/solr"); 
```

然后呢...

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:48:16.260

看看这个[wiki](http://wiki.apache.org/solr/SolJava)页面和那里的拼写检查示例。它使用旧`CommonsHttpSolrServer`的，但与您想要的相似。这段代码应该是您正在寻找的，即使我还没有尝试过：

```
SolrServer solrServer = new HttpSolrServer("http://localhost:8080/solr");
ModifiableSolrParams params = new ModifiableSolrParams();
params.set("qt", "/dataimport");
params.set("command", "full-import");
QueryResponse response = solrServer.query(params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-08T04:39:40.937

在 SolrJ 7 中

```
import org.apache.solr.client.solrj.SolrClient; 
import org.apache.solr.client.solrj.SolrQuery; 
import org.apache.solr.client.solrj.SolrServerException; 
import org.apache.solr.client.solrj.impl.HttpSolrClient; 
import org.apache.solr.client.solrj.response.QueryResponse;

SolrClient client = new HttpSolrClient.Builder("http://localhost:8983/solr/test_core").build();

SolrQuery query = new SolrQuery(); 
query.set("qt", "/dataimport"); 
query.set("command", "full-import"); 

QueryResponse response = client.query(query); 
```

# c++ - 使用 C++ 模板实现访问者模式

> ID：11796121
> 
> 赞同：22
> 
> 时间：2012-08-03T12:53:06.560
> 
> 标签：c++, templates, visitor-pattern

我一直在尝试通过使用 C++ 模板来实现访问者模式来减少代码中的样板数量。到目前为止，我想出了这个：

```
class BaseVisitor {
public:
    virtual ~BaseVisitor() {}
};

template<typename T>
class Visitor : public BaseVisitor {
public:
    virtual void visit(T& /* visitable */) = 0;
};

template<typename Derived>
class Visitable {
public:
    void accept(Visitor<Derived>& visitor) {
        visitor.visit(static_cast<Derived&>(*this));
    }
}; 
```

Visitable 的每个子类如下所示：

```
class Mesh : public Object, public Visitable<Mesh> {};
class Text : public Object, public Visitable<Text> {}; 
```

最后访客看起来像这样：

```
class Renderer : public Visitor<Mesh>, public Visitor<Text> {} 
```

到目前为止一切顺利......现在问题来了：

```
for(Scene::iterator it = scene.begin(); it != scene.end(); ++it) {
    Object& object = static_cast<Object&>(*it);
    if(pre_visit(object)) {
        object.accept(this); ///Erm, what do I cast to??
        post_visit(object);
    }
} 
```

我需要以某种方式转换为 Visitable 以便我可以调用 accept()，但显然我不知道 T 是什么。或者，我不能将虚拟 accept() 添加到 Visitable 模板，因为我不知道它应该采用什么参数。

任何 C++ 模板大师都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T19:27:34.337

这可以使用可变参数模板在 C++11 中完成。继续皮特的回答：

```
// Visitor template declaration
template<typename... Types>
class Visitor;

// specialization for single type    
template<typename T>
class Visitor<T> {
public:
    virtual void visit(T & visitable) = 0;
};

// specialization for multiple types
template<typename T, typename... Types>
class Visitor<T, Types...> : public Visitor<Types...> {
public:
    // promote the function(s) from the base class
    using Visitor<Types...>::visit;

    virtual void visit(T & visitable) = 0;
};

template<typename... Types>
class Visitable {
public:
    virtual void accept(Visitor<Types...>& visitor) = 0;
};

template<typename Derived, typename... Types>
class VisitableImpl : public Visitable<Types...> {
public:
    virtual void accept(Visitor<Types...>& visitor) {
        visitor.visit(static_cast<Derived&>(*this));
    }
}; 
```

的子类`Visitable`：

```
class Mesh : public Object, public VisitableImpl<Mesh, Mesh, Text> {};
class Text : public Object, public VisitableImpl<Text, Mesh, Text> {}; 
```

一个`Visitor`子类：

```
class Renderer : public Visitor<Mesh, Text> {}; 
```

目前尚不清楚`value_type`您的`Scene`容器是什么，但您需要获取`Visitable<Mesh, Text>`要调用的引用或指针`accept`：

```
for(Scene::iterator it = scene.begin(); it != scene.end(); ++it) {
    Visitable<Mesh, Text>& object = static_cast<Visitable<Mesh, Text>&>(*it);
    if(pre_visit(object)) {
        object.accept(*this);
        post_visit(object);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T13:43:30.827

除了允许任意访问者删除访问者之外，您的 BaseVisitor 不会为您做任何事情。相反，您希望为访问者提供一个基类，该基类提供可以在其上调用的*所有*不同`accept`函数，并用于`Visitable`接受该访问者。

为此，您可以使用[类型列表](http://books.google.co.uk/books?id=aJ1av7UFBPwC&lpg=PA52&vq=type%20list&pg=PA51#v=onepage&q&f=false)来定义访问者可以接受的类型，拥有一个接受类型列表的基本访问者类，并将类型列表作为参数添加到访问者实现中。

示例草图：

```
// assuming a typelist has typedefs first and second and a 
// type 'empty' representing end of type list

template<typename Types>
class Visitor : public Visitor<Types::second> {
public:
    // visitor has a visit function for each type in Types
    virtual void visit(typename Types::first& visitable) = 0;
};

template<> class Visitor<empty> { };

template<typename Types>
class Visitable{
    public:
    // base accepts a visitor which can visit any type in Types
    virtual void accept(Visitor<Types>& visitor) = 0;
};

template<typename Derived, typename Types>
class VisitableImpl : public Visitable<Types> {
public:
    // impl calls specific visit function 
    virtual void accept(Visitor<Types>& visitor) override {
        visitor.visit(static_cast<Derived&>(*this));
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T21:39:11.410

我还需要一个模板化的访问者模式，并且能够创建一个不涉及使用可变参数类型或类型列表的解决方案。

```
// forward declarations for our Visitable interface
class Object;
class Visitor;

// Visitable objects can accept a visitor.
class Visitable
{
public:
    virtual ~Visitable() { }
    virtual void accept_visitor(Visitor& visitor) = 0;
    virtual void accept(Object& obj);
};

// A base class, to allow downcasting
class Object
{
protected:
    virtual void _f() { }
};

// Our Visitor class, which will wrap our concrete visitor implementation
class Visitor
{
public:
    Visitor(Object* obj);

    // Base class for concrete visitors
    template<typename D, typename V>
    class OfType : public Object
    {
    public:
        void visit(V* visitable) {
            D* derived = static_cast<D*>(this);

            // "duck-typed" method; if our derived class does not have
            // this method, compilation will fail.
            derived->on_visit(visitable);
        }
    };

    template<typename D, typename V>
    void visit(V* visitable);

private:
    Object* m_obj;
};

Visitor::Visitor(Object* obj) : m_obj(obj) { }

template<typename D, typename V>
void Visitor::visit(V* visitable) {
    // check if our visitor is able to visit this instance
    OfType<D,V>* visitor = dynamic_cast<OfType<D,V>* >(m_obj);
    if (visitor) {
        visitor->visit(visitable);
    }
}

void Visitable::accept(Object& visitor) {
    Visitor wrapped(&visitor);
    accept_visitor(wrapped);
} 
```

定义上述接口后，为可访问对象的访问者创建特定接口，然后在您的具体类中实现它们：

```
class This;

class ThisVisitor : public Visitor::OfType<ThisVisitor, This>
{
public:
    virtual void on_visit(This* item) = 0;
};

class This : public Visitable
{
public:
    void accept_visitor(Visitor& visitor) {
        visitor.visit<ThisVisitor>(this);
    }
};

class That;

class ThatVisitor : public Visitor::OfType<ThatVisitor, That>
{
public:
    virtual void on_visit(That* item) = 0;
};

class That : public Visitable
{
public:
    void accept_visitor(Visitor& visitor) {
        visitor.visit<ThatVisitor>(this);
    }
};

class MyVisitor : public ThisVisitor, public ThatVisitor
{
public:
    void on_visit(This* item) { printf("This!"); }
    void on_visit(That* item) { printf("That!"); }
};

int main(int argc, const char* argv[] {
    This item1;
    That item2;
    MyVisitor visitor;
    item1.accept(visitor);   // "This!"
    item2.accept(visitor);   // "That!"
} 
```

您也可以完全跳过访问者界面并让您的具体访问者直接派生`OfType<Derived, SomeClass>`，但我发现使用前者更好地扩展您的访问者，因为定义了新类（`That`不应该关心谁访问它，只要它是类型`ThatVisitor`） .

# android - android数据库更改表而不是向所有行添加固定值？

> ID：11796123
> 
> 赞同：0
> 
> 时间：2012-08-03T12:53:15.733
> 
> 标签：android, sqlite, android-sqlite

~~我的 android 应用程序中有一个非常简单的表。有一个 id 和几个 long/int 值。我有一段时间没有更新我的应用程序，但我正在开发一个巨大的、完全改进的版本。我曾想过让应用程序完全独立于原始应用程序，但这可能会让当前用户失望。相反，我会将其作为上一次迭代的重大升级。我想知道是否应该将所有数据复制到新表并丢弃旧表，或者只是修改现有表的架构并避免删除？~~

~~我的另一个问题是....如果我要执行这些任务中的任何一个，我将如何使用与原始表对应的所有行中的新条目的固定、预定值来执行此操作？我想可能很难理解我真正在问什么。假设我希望在已经创建的表中为每一行添加一个新列的值“5”。我可以轻松地这样做吗？如果是这样，怎么做？~~

**编辑：** 我会更加具体，并为您提供我真正想做的事情。我有 1 张桌子。我们称它为 Z。Z 由自动增量 int 主键、int 日期、数字价格、数字长度和数字金额组成。我将添加另一个表 X，它将有一个自动增量 int 主键和一个字符串值作为名称。在表 Z 中，我想添加属性：int 类型和 int x_id（这将链接到 X 表中的字符串）。我将如何使用 onUpgrade() 更改我的原始表 Z，然后用 2 个变量（在 Java 中）填充新属性（类型和 x_id）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:00:35.207

如果您根据实际更改和您的个人喜好更改表的布局或创建新的布局，则该问题没有通用答案。

**您可以在SQLiteOpenHelper**子类的**onUpgrade**方法中执行所有必要的升级/迁移任务

# c# - 无法使用 Int64 转换 System.Func`2 类型的对象

> ID：11796125
> 
> 赞同：5
> 
> 时间：2012-08-03T12:53:26.467
> 
> 标签：c#, linq, reflection, dynamic

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Net;
using System.Text;
using System.Text.RegularExpressions;
using System.Web.UI.WebControls;
using dynamic = System.Linq.Dynamic;
using System.Linq.Expressions;

namespace Project.Lib.Extensions
{
    public static partial class Utils
    {
        public static List<T> SortForMe<T>(this List<T> list, string propertyName,SortDirection sortDirection)
        {
            string exp1 = string.Format("model.{0}", propertyName);
            var p1 = Expression.Parameter(typeof(T), "model");
            var e1 = dynamic.DynamicExpression.ParseLambda(new[] { p1 }, null, exp1);

            if (e1 != null)
            {
                if (sortDirection==SortDirection.Ascending)
                {
                    var result = list.OrderBy((Func<T, object>)e1.Compile()).ToList();
                    return result;
                }
                else
                {
                    var result = list.OrderByDescending((Func<T, object>)e1.Compile()).ToList();
                    return result;
                }
            }
            return list;
        }
    }
} 
```

我正在使用此代码按 propertyName 对我的通用列表进行排序。当属性类型为`string`时，此代码成功运行，但当类型为`long`or`int`时，我收到此异常：

> 无法将“System.Func`2[Project.Lib.Model.UserQueryCount,System.Int64]”类型的对象转换为“System.Func`2[Project.Lib.Model.UserQueryCount,System.Object]”。

* * *

```
var result = list.OrderBy((Func<T, dyamic>)e1.Compile()).ToList(); 
```

在上面的行中，我决定使用`dynamic`，但再次遇到异常。我应该怎么办？

* * *

我改变了我的方法是这样的：

```
public static List<TModel> SortForMe<TModel>(this List<TModel> list, string propertyName,SortDirection sortDirection) where TModel:class
    {
        var ins = Activator.CreateInstance<TModel>();
        var prop= ins.GetType().GetProperty(propertyName);
        var propertyType =  prop.PropertyType;

    string exp1 = string.Format("model.{0}", propertyName);
    var p1 = System.Linq.Expressions.Expression.Parameter(typeof(TModel), "model");
    var e1 = System.Linq.Dynamic.DynamicExpression.ParseLambda(new[] { p1 }, null, exp1);

    if (e1 != null)
    {
        if (sortDirection==SortDirection.Ascending)
        {
            return list.OrderBy((Func<TModel, propertyType>)e1.Compile()).ToList();
        }

        return list.OrderByDescending((Func<TModel, propertyType>)e1.Compile()).ToList();
    }
        return list;
} 
```

我使用反射获得了 propertyType，但在 Func 中我不能像这样使用它：`"Func<TModel, propertyType>"`有什么方法可以解决这个问题

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:35:15.990

如另一个答案所述，它不起作用的原因确实是拳击。

```
class S
{
  public int f;
  public S s;
}

{
  Func<S, S> sGetter = s => s.s; // okay
  Func<S, object> objectGetter = s => s.s; // okay
  objectGetter = sGetter; // also okay
}

{
  Func<S, int> intGetter = s => s.f; // okay
  Func<S, object> objectGetter = s => s.f; // still okay
  objectGetter = intGetter; // not okay
} 
```

有效但最后一个分配无效的原因`Func<S, object> objectGetter = s => s.f`是它实际上被解释为`Func<S, object> objectGetter = s => (object)s.f`，并且强制转换执行了实际操作。`intGetter`和`objectGetter`不做同样的事情，所以不能将一个重新解释为另一个。意识到这一点，如果您自己包含该演员表，您应该没问题。据我所知，如果您简单地指定所需的返回类型为`object`：

```
var e1 = DynamicExpression.ParseLambda(new[] { p1 }, typeof(object), exp1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:30:33.640

我怀疑这与值类型的装箱有关，但我不能确定。但是，有一种解决方法不涉及装箱，既可以解决您的问题，又可以使您的方法更易于使用。

您实际上可以使用返回该属性的 lambda 表达式，而不是标识要排序的属性的字符串。这可以通过以下方法完成：

```
private static string GetPropertyName<TObject, TProperty>(Expression<Func<TObject,     TProperty>> property)
{
    MemberExpression memberExpression = (MemberExpression)property.Body;
    PropertyInfo propertyInfo = (PropertyInfo)memberExpression.Member;

    return propertyInfo.Name;
} 
```

请注意，我已将`Func`委托包装到`Expression`类型中（您可能想了解[更多相关](http://msdn.microsoft.com/en-us/library/bb397951.aspx)信息）。这样，我可以询问表达式并找出它使用了哪些成员。当然，除了简单的`x => x.Property`lambda 之外，这将失败，因此您可能需要进行一些错误检查。

要使用它，您必须稍微更改扩展方法：

```
public static List<TObject> SortForMe<TObject, TProperty>(
    this List<TObject> list, 
    Expression<Func<TObject, TProperty>> property, 
    SortDirection sortDirection)
{
     string propertyName = GetPropertyName(property);
     ...
     ...          
     // when casting compiled expression to Func, instead of object, use TProperty
     // that way, you will avoid boxing
     var result = list.OrderBy((Func<T, TProperty>)e1.Compile()).ToList();
     ...
     ...
} 
```

实际用法可能如下所示：

```
List<Foo> foos = ... ;
foos.SortForMe(x => x.IntegerProperty, SortDirection.Ascending);
foos.SortForMe(x => x.StringProperty, SortDirection.Ascending); 
```

`IntegerProperty`和是在类型上定义的`StringProperty`实际属性。`Foo`使用该方法时无需指定实际的类型参数 - C# 的类型推断在这里非常好地发挥了作用。

# php - 我可以使用 mod_vhost_alias 和 mod_wsgi 在同一个 Apache 服务器上运行 PHP 和 Python 吗？

> ID：11796126
> 
> 赞同：3
> 
> 时间：2012-08-03T12:53:26.203
> 
> 标签：php, python, apache, mod-vhost-alias

我目前使用 mod_fastcgi 和 mod_vhost_alias 使用 PHP 在“云中”运行我自己的服务器。我的 mod_vhost_alias 配置使用 /var/www/%0/htdocs 的 VirtualDocumentRoot，以便我可以从具有该名称的目录中提供路由到我的服务器 IP 地址的任何域。

我想从我的服务器开始编写和提供一些 Python 项目，但我不确定如何配置，以便每个站点都可以访问适当的脚本处理器。

例如，对于我的博客 dead-parrot.com，我正在运行一个 PHP 博客平台（Habari，而不是 WordPress）。但我想在 not-dead-yet.com 上运行我用 Flask 编写的应用程序。

我希望在对我的 mod_vhost_alias 配置造成尽可能少的干扰的情况下启用 Python 执行，以便我可以通过添加适当的目录继续在此服务器上托管新域。如有必要，我愿意更改目录结构，但不希望为每个新的 Python 运行域添加额外的、特定的 vhost 配置文件，因为除了比我当前使用 PHP 的设置更方便之外，它似乎还不错为了让 Apache 在单个 mod_vhost_alias vhost 配置之前获取它们，必须先按字母顺序命名这些 hacky。

你知道我可以设置它以像只运行 PHP 一样方便地并行运行 Python 和 PHP 的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:08:16.217

以下是一些可能有助于使 python 工作的信息（尽管它不是特定于 Ubuntu 的标题）：http:

[//infobees.wordpress.com/2011/05/15/python-cgi/](http://infobees.wordpress.com/2011/05/15/python-cgi/)

我认为您可能会在这里感到困惑，因为您似乎认为特定域只能是 PHP 或 Python，并且您必须指定在每种情况下使用 2 中的哪一个？Apache 将根据请求的资源是 .php 还是 .py 扩展名来调用适当的处理器，这意味着如果您在像 httpd.conf 这样的全球性地方。

由于可以在 .htaccess 中使用 AddHandler 指令（假设在 httpd 或 vhosts 中具有适当的 AllowOverride 权限），因此您可以仅将其包含在您想要运行 python 的域上的 htaccess 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T11:50:53.013

即使我遇到了同样的情况，最初我在 google 中想知道但后来意识到并修复了它，我在 ubuntu 中使用 EC2 服务，我分别创建了 php 和 python 的别名，现在我可以访问两者。

# c++ - 如何交叉编译具有依赖关系的 C++ 库？

> ID：11796127
> 
> 赞同：9
> 
> 时间：2012-08-03T12:53:27.683
> 
> 标签：c++, c, autotools, autoconf, automake

我需要交叉编译一些 C/C++ 库。该库依赖于几个 C/C++ 库。其中一些库又依赖于其他库。所有库都带有配置脚本。我知道如何在主机系统上编译和安装库——在我需要的库之前安装依赖项。显然这在交叉编译时不起作用。任何提示表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T22:14:00.863

通常，要交叉编译一个自动工具包，您需要将几个额外的参数传递给`./configure`:`--host`和`--build`. `--host`是构建程序将在其上运行`--build`的系统的名称，并且是进行编译的系统的名称。

当我说“系统的名称”时，我的意思是表单的元组`ARCH-VENDOR-OS-LIBC`。（例如`i686-pc-linux-gnu`，描述我当前使用的系统的元组。）有时会省略元组的某些部分，例如 mingw32 工具链（在我的系统上，mingw32 交叉工具与元组`i586-mingw32msvc`和/或一起安装`amd64-mingw32msvc`） .

（configure 还有另一个参数，`--target`用于交叉编译编译器，并指定正在构建的编译器在生成代码时将针对的系统。）

每个工具链都有自己的子目录，`/usr`例如`/usr/i586-mingw32msvc`. 您将要在此处安装新软件包以便找到它们。使用`--prefix`参数来`configure`。

所以要从我的 GNU/Linux 系统交叉编译到 MinGW32 系统，我会这样运行`configure`：

```
./configure --host=i586-mingw32msvc --build=i686-pc-linux-gnu --prefix=/usr/i586-mingw32msvc 
```

因此，从依赖关系图的叶子开始，逐步向上。您可能还想传递`--enable-static --disable-shared`给`configure`: 这将停止为 libtooled 包创建动态库。如果包需要在构建过程中运行程序，您可能必须在本地安装一些包以及交叉编译它们。

有时`configure`的测试会失败：例如，它试图编译和运行程序。通常这些测试设置一个缓存变量，您也可以在命令行上将其传递给`configure`. 同样，您可以覆盖程序路径和库编译/链接标志等内容。检查您的包裹的`./configure --help`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:22:14.173

只要您确保针对目标系统而不是开发主机的头文件和库进行构建，针对交叉编译的共享库构建绝对没有问题。

即使您将所有明显的依赖项构建为静态库，您可能仍然会发现自己链接到共享的 C 和 C++ 语言运行时库。您还需要确保用于交叉编译的头文件来自您的目标系统而不是开发主机。
大多数时候不这样做可能会奏效。在剩下的时间里，你会遇到微妙的难以调试的崩溃。

您如何实现这一点取决于您的跨工具链和目标环境的方式。正如您都没有提到的那样，我猜测它是 GCC 和某种 Linux 作为开发主机和目标 - 尽管这些原则同样适用于使用其他开发主机。

交叉编译的 GCC 和 bin-utils 发行版通常是这样构建的，以便默认库和头文件搜索路径指向目标系统的根文件系统的副本。链接器将在此处查找要链接的共享库，并且在构建依赖共享库时，您将在此处安装它们。

`--sysroot <mySysRoot>`您可以通过在命令行上将选项传递给 GCC 来覆盖 GCC 的默认系统根目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:04:30.993

您需要做的是为所有依赖项创建静态库并将它们静态链接到您的可执行文件。您需要使用交叉编译器来生成这些库。您可以通过查找“min​​gw static link cross compile”找到一些好的示例

# php - 来自爆炸的 Codeigniter 和 insert_batch

> ID：11796129
> 
> 赞同：-2
> 
> 时间：2012-08-03T12:53:42.633
> 
> 标签：php, codeigniter

我有这个代码：

```
 function insertGenre() {
    $genres = explode(',',$this->input->post('genreName'));

    foreach($genres as $genre) {
        $temp = array(
            'id' => null,
            'name' => $genre,
            'popular' => '0'
        );

        $data2[] =  $temp;
    }

    return $data2;

    $data = array(
        'id' => null,
        'name' => $this->input->post('genreName'),
        'popular' => '0'
    );

    //$this->db->insert('genres',$data);
    $this->db->insert_batch('genres',$data2);
} 
```

它应该运行得很好（我在这里遇到了几个问题），但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:03:03.977

不应该是这样的：

```
function insertGenre() {
    $genres = explode(',',$this->input->post('genreName'));

    foreach($genres as $genre) {
        $temp = array(
            'id' => null,
            'name' => $genre,
            'popular' => '0'
        );
        $data2[] =  $temp;
    }

    if( $this->db->insert_batch('genres',$data2) ) {
        return $data2;
    } else {
        return false;
    }
} 
```

您在运行插入查询之前返回。第二个`$data`变量似乎也是多余的。

我还在末尾添加了 if 语句，如果插入失败，它将返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:59:41.053

您需要将您的移动`return`到函数的末尾，否则它将永远不会执行它下面的行：

```
function insertGenre() {
    $genres = explode(',',$this->input->post('genreName'));

    foreach($genres as $genre) {
        $temp = array(
            'id' => null,
            'name' => $genre,
            'popular' => '0'
        );

        $data2[] =  $temp;
    }

    $data = array(
        'id' => null,
        'name' => $this->input->post('genreName'),
        'popular' => '0'
    );

    //$this->db->insert('genres',$data);
    $this->db->insert_batch('genres',$data2);

    return $data2;
} 
```

# python - 如何使用非默认参数的值作为 Python 中默认参数的默认值？

> ID：11796138
> 
> 赞同：1
> 
> 时间：2012-08-03T12:54:13.970
> 
> 标签：python, default-value, default-arguments

这是我的班级酒吧：

```
class Bar:
    def __init__(self, start, end, open, volume, high=open, low=open, last=open):
        self.start = start
        self.end = end
        self.open = open
        self.high = high
        self.low = low
        self.last = last
        self.volume = int(volume)

    def __str__(self):
        return self.start.strftime("%m/%d/%Y\t%H:%M:%S") + "\t" + self.end.strftime("%H:%M:%S") + "\t" +str(self.open) + "\t" + str(self.high) + "\t" + str(self.low) + "\t" + str(self.last) + "\t" + str(self.volume) 
```

1）我正在尝试初始化高、低和最后的开盘价。这是正确的方法吗？

2）当我做 print(str(bar)) 我得到有趣的输出，比如......

`03/13/2012 12:30:00 13:30:00 138.91 <built-in function open> 138.7 <built-in function open> 13177656`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:03:22.387

如果您将函数编写为

```
def __init__(self, start, end, foo, volume, high=foo, low=foo, last=foo):
    self.start = start
    self.end = end
    self.open = foo
    self.high = high
    self.low = low
    self.last = last
    self.volume = int(volume) 
```

你会得到一个 NameError 抱怨名称`foo`没有定义。这是因为参数的默认值不能引用另一个参数，当您尝试获取其值时，该参数尚未定义。（默认值是在定义方法时设置的，而不是在调用它时设置的。）

但是，`open`是Python的内置函数，所以*定义*了；这不是`open`你的本意。这样做的正确方法可能是

```
class Bar:
    def __init__(self, start, end, open, volume, high=None, low=None, last=None):
        self.start = start
        self.end = end
        self.open = open
        self.high = open if high is None else high
        self.low = open if low is None else low
        self.last = open if last is None else last
        self.volume = int(volume) 
```

此外，您可能希望使用 'open_' 而不是 'open' 作为参数名称，以避免混淆（并暂时隐藏）内置函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:58:55.277

你知道，对，那`open`是用于打开文件的内置 Python 函数？也就是说，您正在将[方法](http://docs.python.org/tutorial/inputoutput.html)分配给变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T13:03:02.083

这行不通。

解析函数时，默认参数只计算*一次。*这意味着它**必须**有一个值：方法签名中的其他形式参数没有值。它们更像是占位符。因此，不可能做你想做的事。

Python 将搜索一个名为 的预先存在的标识符`open`，始终将它当时表示的那个对象分配给您的变量`high`以及`low`函数何时执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T13:04:27.243

我不认为你能做到这一点。您有该输出，因为“打开”考虑了内置函数 open()。如果不调用 open 而是使用另一个名称，则会出现错误。

如果 low, high 和 last 不能是 None 你可以这样做：

```
class Bar:
def __init__(self, start, end, open, volume, high=None, low=None, last=None):
    self.start = start
    self.end = end
    self.open = open
    self.high = high if high is not None else open
    self.low = low if low is not None else open
    self.last = last if last is not None else open
    self.volume = int(volume) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T13:06:57.770

在：

```
def __init__(self, start, end, open, volume, high=open, low=open, last=open) 
```

`open`指的是内置`open`方法。在某些情况下，将方法作为参数传递非常有用，例如：`max(sequence, key=itemgetter(2))`需要可调用的地方。

我怀疑您希望将默认值`high`, `low`,作为传递给`last`的值，在这种情况下，我将使用关键字参数。`open``__init__`

```
def __init__(self, start, end, open, volume, **kwargs):
    for k in ('high', 'low', 'last'):
        setattr(self, k, kwargs.get(k, open)) 
```

或者：

```
def __init__(self, start, end, open, volume, high=None, low=None, last=None):
    if high is None:
        self.high = open
    # etc... 
```

我也不会`open`用作名字...

# algorithm - 如何在具有异构办公桌的排队系统中预测等待时间？

> ID：11796140
> 
> 赞同：1
> 
> 时间：2012-08-03T12:54:19.307
> 
> 标签：algorithm, queue

我有一个系统可以模拟一种排队系统，它由以下元素组成：

*   服务：可以提供给客户的服务
*   办公桌：可以提供一项或多项服务的办公桌。有多个服务台，每个服务台都可以配置为提供不同的服务子集，服务台之间有或没有重叠
*   客户/票：客户进来，并打印一张票，说明她需要哪种服务

该系统已经到位并且工作正常。这是一个真实的系统，票务分销商允许客户请求和打印票，服务台客户端应用程序可以将客户呼叫到服务台，并显示以显示客户去哪里。

现在一个新的要求是一种近似预测队列中任何给定票的等待时间的方法，如果等待时间太长，就会发出警报。

对于每项服务，我们将从使用统计中收集服务持续时间。

预测不需要很精确，目的是让网站管理员快速了解情况，反馈一切是否顺利，或者客户是否在排队等候，打开就好了多一张桌子，或者相反，客户稀缺，一张桌子可能会关闭。最重要的因素是客户的等待时间（例如，如果每个客户在办公桌前停留 1 分钟，则可以让 10 个客户等待，但如果此持续时间为 10 分钟，则不是！）。

问题是任何办公桌都可以无限制地提供任何服务。因此，任何数量的办公桌都可以提供给定的服务。但反过来，每个办公桌都可以提供任意数量的服务。

我尝试了各种方法：

您可以生成一个队列，其中仅包含一个服务台可以提供的服务的票证。但是，此列表中的每张票可能仅可由这张桌子“服务”，或者也可由其他 5 张桌子“服务”......

您可以获取一张票，查看哪些服务台可以为其提供服务，然后获取这些服务台中的任何一个可以服务的所有票。同样的问题是，有些票只能由一组中的一张桌子处理，而另一些则由所有桌子处理......

我真的不知道如何从这里解决这个问题。有没有可用于那种异构办公桌的排队模型？任何想法如何对此建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:51:04.850

由于您已用 标记了问题`algorithm`，并且您在编程站点（而不是数学或统计站点）中提问，因此我将从编程的角度来处理这个问题。

模型：

```
// creates a new ticket for a given service; arrival time and length are only known
// for generated tickets
class Ticket(int arrival, int length, Service s)

// an abstract distribution (parameters are distribution-dependent)
class Distribution(...) 
      int generate() // generates integer with this distribution

// a service, with a distributions of time-to-finish and time-between-arrivals 
//    (both set experimentally from historical data).
class Service(Distribution lengths, Distribution arrivals)
      // simulated ticket: length from lengths.generate(), 
      //     arrival from t + arrivals.generate();
      Ticket createFuture(int t)  
      // same as above, but arrival = t+0
      Ticket createNow(int t)

// a desk, offers one or more services
class Desk() 
      void addService(Service s) // allows this desk to attend this service
      void removeService(Service s) 
      bool isCompatible(Service s) // is this desk compatible with this service?
      void attend(Ticket t) // marks a desk as attending a service
      bool isFree() // returns true if the desk is not attending anyone
      // returns a finished ticket, if any. After this, isFree() will return true
      Ticket finished() 

// a policy which assigns tickets to desks. Implement your current one (probably "FIFO") 
class Policy()
      // returns a suitable desk for that ticket, or null if none is posible/desired
      Desk assign(Ticket t, Ticket[] pending, Desk[] deks) 

// a live queue of tickets, dispatched using policy p t
class Queue(int startTime, Policy p, Service[] ss, Desk[] ds)
      void push(Ticket t) // adds a new real ticket to the queue
      // estimates wait-times for new arrivals to all services at time 't'
      Map<Service, int> forecast(int t) 
      void tick() // advances time for this queue
      Queue clone(); // deep-clones the queue (including time, policy, desks, and services) 
```

**用法：**

1.  定义您的服务并为它们的到来建模。
2.  创建办公桌并为其分配服务。
3.  定义你当前的策略，用它创建一个队列。队列将开始为空。
4.  随着时间的推移，调用 tick() （并且，如果有票进来，使用 createNow() 来 push() 他们）
5.  根据需要调用estimate()

**执行：**

tick() 将遍历所有桌子以查看哪些已完成（），并根据当前策略将票分配给桌子。通过多次调用 tick() 直到队列为空，可以确定每种服务类型的确切关闭时间——但这会破坏队列，并且只能在当前队列的 clone() 上完成.

Forecast() 将克隆() 队列 N 次，并且对于每个克隆的队列，在添加模拟票证（使用 createFuture() 生成）的同时将时间提前 'now-t' 次。您应该将 createFuture 的时间链接如下：

```
// create 3 future tickets for service s
Ticket t1 = s.createFuture(now);
Ticket t2 = s.createFuture(t1.arrival);
Ticket t3 = s.createFuture(t2.arrival);
//... 
```

只有在模拟时间达到模拟到达时间后，模拟票才会被推入实际队列。一旦模拟时间达到“now+t”，将确定实际服务延迟并在所有 N 次模拟中取平均值，以产生概率预测。

# java - 谷歌应用引擎用户 API

> ID：11796141
> 
> 赞同：4
> 
> 时间：2012-08-03T12:54:23.457
> 
> 标签：java, google-app-engine, authentication, login

我对 Google App Engine (GAE) 用户/登录 API 的工作方式感到非常困惑。他们提到您可以通过 Google 帐户、Google Apps 帐户或 OpenID 对用户进行身份验证。

我不想*强迫*我的用户要求他们拥有 GMail 帐户、任何其他类型的 Google 帐户（应用程序或其他）或 OpenID 帐户。如果我的用户有一个有效的电子邮件`john@example.com`，那么他/她应该能够注册我的应用程序，获得我们的帐户，并使用该有效的电子邮件登录。

所以我的问题是：**这是否可能，或者 GAE 是否要求用户首先拥有 GMail 或 OpenID 帐户？！？**

如果这*是*可能的，那么我是否仍然可以使用 GAE 提供的用户/登录 API 服务，还是必须使用自己的本地登录/身份验证系统？而且，如果我必须使用自己的系统，我能/不能使用/做什么有什么限制吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:30:26.920

如果需要，您可以选择使用 Google Apps 域 - 这将非常有效。

但是，如果您不想使用 Google 提供的任何选项或任何其他基于 OAuth 的安全服务，那么您将需要推出自己的身份验证机制。

我认为对此没有任何限制。您将需要在数据存储区中定义您的实体，并提出您自己的授权/权限内容。

# c - 正确处理非可选参数的 optargs (c)

> ID：11796142
> 
> 赞同：0
> 
> 时间：2012-08-03T12:54:25.670
> 
> 标签：c, command-line-arguments

我有一个需要调用的程序：

```
program parameter1 parameter2 -x1 -y 
```

但我觉得如果我这样做应该会起作用：

```
program -x1 -y parameter1 parameter2 
```

或其组合。我如何获得`parameter1`并且`parameter2`没有可怕的肮脏黑客？目前我有一个

```
while ((c = getopt (argc, argv, "x:y")) != -1){
   /* do stuff */
} 
```

循环获取可选参数，但其他参数呢？只看似乎是错误的`argv[1]`，`argv[2]`因为它们可能在任何地方。

我确信有一个既定的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:09:07.783

退出`while`循环后，`optind`指向第一个非选项参数。看一下`getopt(3)`手册页：

```
 If  there  are  no  more option characters, getopt() returns -1\.  Then optind is the
   index in argv of the first argv-element that is not an option. 
```

所以你的第一个非选项参数是`argv[optind]`等等。

```
while ((c = getopt (argc, argv, "x:y")) != -1){
   /* do stuff */
} 

param1 = argv[optind]
param2 = argv[optind+1] 
```

`getopt`将置换参数，以便即使对于您的第一个示例，这仍然是正确的，其中选项参数位于非选项参数之后的命令行上。

# c++ - 多列表数据结构在C++中的应用

> ID：11796143
> 
> 赞同：1
> 
> 时间：2012-08-03T12:54:35.203
> 
> 标签：c++, data-structures

我正在阅读 RobertSedwick 的 C++ 算法中的多列表数据结构。

> 如果多维矩阵是稀疏的，那么我们可以使用多列表而不是多维数组来表示它。我们可以为矩阵中的每个值使用一个节点，为每个维度使用一个链接，链接指向该维度中的下一项。这种安排减少了从维度中最大索引的乘积到与非零条目的数量成正比所需的存储空间，但增加了许多算法所需的时间

请通过简单的示例请求您帮助理解上述陈述。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:17:07.947

这是一个示例实现：

```
class MultiList
{
    public:
        int value, x, y;
        MultiList *next_x, *next_y;
        void add( int xcor, int ycor, int val );
} 
```

MultiList 类具有指向同一行中的下一个对象和同一列中的下一个对象的指针。对于二维 MultiList，您需要以下虚拟节点：

```
root -> col0 -> col1
  |
  V
row0
  |
  V
row1 
```

用`row0.next_x`指向`null`、`col0.next_y`指向`null`等。

要在 处插入值 '3' `(0, 1)`，请从 处开始`root`，并继续前进，`next_x`直到到达`1`列虚拟节点`col1`。然后从该节点开始，继续查看其子节点，直到

`this->next_y == null`或者`this->next_y.y > ycor`

```
root -> col0 -> col1
  |               |
  V               V
row0              3
  |
  V
row1 
```

然后，您将带有您的值的新节点插入到该列表中。您使用 x 中的相应行节点而不是 y 重复。

```
root -> col0 -> col1
  |               |
  V               V
row0      ->      3
  |
  V
row1 
```

* * *

**分析**：这个实现非常适合真正稀疏的多维数组，考虑到您只为需要添加的每个节点分配内存，这意味着内存复杂度为 O(n)。插入/删除是 O(n)，因为如果它们都在同一行或同一列中，您可能必须遍历每个现有节点。出于类似的原因，查找也是 O(n)。

# jquery - jQuery - 根据另一个表行索引从表行中获取值

> ID：11796147
> 
> 赞同：0
> 
> 时间：2012-08-03T12:54:46.903
> 
> 标签：jquery, jqplot

我有 2 张桌子。一个只保留我的“数据表”的第一列，其余的存储在另一个表中，该表位于第一列。

我需要做的是从特定行获取所有数据以将其传递给 jqplot。

我的表格如下所示：http: [//jsfiddle.net/Misiu/eajpy/](http://jsfiddle.net/Misiu/eajpy/)

我的代码基本上可以工作，但我认为它可以改进。任何建议都会有所帮助:)

我的代码如下所示：

```
$('table#baseTable  > tbody > tr > td'').click(function() {
    var rowIndex = $(this).parent().parent().children().index($(this).parent());
    $('div#log').html(rowIndex);

    var myData = [];

    $('#dataTable tbody tr:eq(' + rowIndex + ')').map(function() {
            return $(this.cells).get();
        }).each(function() {
    var headerVal = $(this).closest("table").find("thead > tr > th").eq($(this).index()).html();
    myData.push([headerVal, $(this).html()]);
})

    alert(myData);
    console.log(myData);
});​ 
```

# android - 如何在 textView 中生成数学常数 e（如 exp(1)）？

> ID：11796151
> 
> 赞同：1
> 
> 时间：2012-08-03T12:54:59.993
> 
> 标签：android, android-layout

我希望 textView 显示数学常数 e。我尝试使用斜体“e”，但看起来不同。我寻找了一个 HTML 代码来表示它，但找不到。那么如何在 textView 中输入 e 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:02:50.737

根据[Wikipedia](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML)，没有*e*的 HTML 代码。此外，在[*e*](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29)[上查看Wikipedia 页面](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29)*的来源表明，他们只是将其稍微放大、斜体**和`font-family:serif`**. 真的不需要其他任何东西 - 它只是一个公认的常数，但仍然是英文字母。如果它实际上是一个拉丁字符，您可能想找到一个，但在这种情况下，一个简单的“ *e* ”似乎可以正常工作。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:30:03.143

您可能需要检查此链接：[http](http://www.codetable.net/unicodecharacters?page=1) ://www.codetable.net/unicodecharacters?page=1 。好吧，实际上只使用“e”就可以了。*

# windows - 长时间运行任务的 OpenCL 错误

> ID：11796156
> 
> 赞同：0
> 
> 时间：2012-08-03T12:55:20.553
> 
> 标签：windows, opencl, nvidia

我在 nVidia Quattro 6000 设备上运行一个长时间运行的内核。内核涉及具有数万次迭代的循环。

当我运行内核时，2 秒后屏幕变黑，Windows 重新启动 GPU 驱动程序并且 clFinish 返回错误。所以我给自己买了第二张 GPU 卡，只是为了显示，现在 2 秒超时不适用。

内核计算了 50 秒，然后出现了这些错误（以“GPU ERROR”为前缀的行是 clCreateContext 错误回调打印的错误）：

```
GPU ERROR:
CL_OUT_OF_RESOURCES error executing clFinish on Quadro 6000 (Device 0).

Computation finished, took 50 seconds (00:00:50)
GPU ERROR:
CL_OUT_OF_RESOURCES error waiting for idle on Quadro 6000 (Device 0).

clFinish() returned CL_OUT_OF_RESOURCES
GPU ERROR:
CL_OUT_OF_RESOURCES error waiting for idle on Quadro 6000 (Device 0). 
```

我能做些什么呢？

为简单起见，这是该内核的精简版本。实际上，它在曲面上执行积分，这就是我需要一个循环的原因 - 但是这个简单的版本也会崩溃，因为 n 足够大。

```
__kernel void integrate(
                 __global float *input,
                 __global float *output,
                 unsigned int n,
         float c)
{
  size_t kernel_idx = (get_global_id(1)*get_global_size(0) + get_global_id(0));
  if(kernel_idx < inputWidth*inputHeight*inputDepth)
  {
    int j;
    ...
    float sum = 0.0;

    for(j = 0; j < n; j++) // y
    {
      sum += input[j];
    }

    output[kernel_idx] = sum;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:31:20.017

检查您的 TDR 注册表项并进行相应调整

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff569918%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569918%28v=vs.85%29.aspx)

# delphi - 如何在delphi中使用parsedelmeter解析索引矩阵

> ID：11796157
> 
> 赞同：-2
> 
> 时间：2012-08-03T12:55:21.930
> 
> 标签：delphi, parsing, matrix

我想用这个代码使用空格分隔符解析索引矩阵

```
 Temp := TStringList.Create;
  Temp.LoadFromFile('training.txt');
  Row := 1;
  for I := 0 to Temp.Count-1 do
  begin
    S := Temp.Strings[I];
   ParseDelimited(Memo1.Lines, Trim(S), ' ');
    Inc(Row);
  end; 
```

该代码用于解析在值之间包含一个空格的索引矩阵，但是我的矩阵在值之间包含一个和两个空格？任何人都可以帮助我我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:04:08.820

TStrings 类具有 CommaText 属性。阅读并使用它。它适用于数据块之间的多个空格：

```
var
  Temp, TempList: TStringList;
  i: Integer;
begin
  Temp := TStringList.Create;
  try
    TempList := TStringList.Create;
    try
      Temp.LoadFromFile('training.txt');
      for i := 0 to Temp.Count - 1 do begin
        TempList.CommaText := Temp[i];
        Memo1.Lines.AddStrings(TempList);
      end;
    finally
      TempList.Free;
    end;
  finally
    Temp.Free;
  end; 
```

# objective-c - 谁能帮我在标签中显示当前时区？

> ID：11796159
> 
> 赞同：-1
> 
> 时间：2012-08-03T12:55:28.793
> 
> 标签：objective-c, xcode

任何人都可以帮我在 xcode(objective-c) 的标签中显示当前时区吗？

我尝试了以下方法并一直在尝试将其分配给标签：

```
NSArray *timezoneList = [NSTimeZone knownTimeZoneNames]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:02:45.837

您可以使用 获取当前时区`[NSTimeZone localTimeZone]`。因此，如果您将标签作为 IBOutlet 在视图控制器中，您可以这样做

```
label.text = [[NSTimeZone localTimeZone] description]; 
```

# vb.net - 关于用于 BeginReceive 方法的回调方法

> ID：11796169
> 
> 赞同：0
> 
> 时间：2012-08-03T12:56:23.270
> 
> 标签：vb.net, sockets, asyncsocket, beginreceive

以下是我在客户端的套接字编程中使用的回调方法，用于从服务器异步接收数据：-

```
Public Sub Connect()    
    m_clientSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
    m_clientSocket.Connect(Ip, PortNo)
    If (m_clientSocket.Connected) Then       
        m_clientSocket.BeginReceive(dataBuffer, 0,dataBuffer.Length SocketFlags.None, New AsyncCallback(AddressOf OnDataReceived), m_clientSocket)     //here I connect the callback OnDataRecieved
    End If    
End Sub    

Public Sub OnDataRecieved(ByVal async As IAsyncResult)    
    Dim Recieved_Size As Integer = m_clientSocket.EndReceive(async)  
    ' rest of the code ...    
End Sub 
```

我的疑问是，当在“OnDataReceived 方法”“Received_Size”= 0 内部时，我是否应该断定套接字已断开连接？如果不是，那么在什么情况下 Received_Size 应该 = 0 ？

为什么我要问的是，每当连接的服务器断开连接时，就会调用“OnDataReceived”方法，结果“Received_Size”为= 0。但只有在有一些数据要为套接字读取时才应该调用它，而不是在连接时调用/disconnect 发生了，对吧？

我非常感谢任何能澄清我的疑问的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:15:22.727

来自[MSDN](http://msdn.microsoft.com/en-us/library/w7wtt64b)（重点是我的）：

> 如果远程主机使用 Shutdown 方法关闭了 Socket 连接，并且已经接收到所有可用数据，**则 EndReceive 方法将立即完成并返回零字节**。

您有一个流式套接字，因此这是断开连接的信号。我怀疑这恰好允许每个呼叫`BeginReceive`与对`EndReceive`.

# android - 检查设备重启后是否必须启动服务

> ID：11796183
> 
> 赞同：2
> 
> 时间：2012-08-03T12:57:44.733
> 
> 标签：android

我正在尝试在我的应用程序中实现一项服务，该服务由一个活动启动。该服务如果服务已经启动，它应该在后台运行，直到它被手动停止（由活动）。该服务必须检查每个传入的 SMS 是否有特殊字符串。如果消息包含字符串，则服务应通过发送另一条 SMS（如自动响应系统 (ARS)）来响应。第一个问题是服务在 ca 之后被系统停止。60 分钟。此外，如果该服务在系统关闭之前正在运行，则必须在启动后启动该服务。这是该服务的代码：（对于德国人的评论，我很抱歉。我没有时间翻译它们。）

```
package [...]
import [...]

public class SMSReaderService extends Service {

public  static String searchString;
private SMSreceiver mSMSreceiver; 
private IntentFilter mIntentFilter; 
private static Messenger outMessenger;
private final Messenger inMessenger = new Messenger(new IncomingHandler());

@Override
public void onCreate() {
    super.onCreate();

    //SMS-received-event receiver 
    mSMSreceiver = new SMSreceiver(); 
    mIntentFilter = new IntentFilter(); 
    mIntentFilter.addAction("android.provider.Telephony.SMS_RECEIVED"); 
    registerReceiver(mSMSreceiver, mIntentFilter);

    // Loggen, dass das Objekt erstellt wurde
    Log.d("SMSReaderService::Created", "SMSReaderService has been Created.");
}

@Override
public IBinder onBind(Intent intent) {
    [...] 
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    searchString = (String) intent.getExtras().get("SERCHVALUE");

    // Loggen, dass der Service gestartet wurde
    Log.d("SMSReaderService::Started", "SMSReaderService has Started.");

    return ???;

}

@Override
public void onDestroy() {
    // Unregister the SMS receiver
    unregisterReceiver(mSMSreceiver);

    // Loggen, dass das Objekt zerstört wurde
    Log.d("SMSReaderService::Object::Destroyed", "SMSReaderService has been destroyed.");

    super.onDestroy();
} 

private class SMSreceiver extends BroadcastReceiver {
    @Override 
    public void onReceive(Context context, Intent intent) 
    { 
        Bundle extras = intent.getExtras(); 
        if ( extras != null ) 
        { 
            [...]
        } 
    } 
}
} 
```

**编辑：** 现在服务返回`START_STICKY`。我认为这会奏效。（实际上确实如此，但发生错误）。1 小时后，logcat 显示以下信息：

```
08-03 16:31:29.345: E/AndroidRuntime(9885): java.lang.RuntimeException: Unable to start service de.[...].SMSReaderService@41912c88 with null: java.lang.NullPointerException
08-03 16:31:29.345: E/AndroidRuntime(9885):     at de.[...].SMSReaderService.onStartCommand(SMSReaderService.java:161)

08-03 16:32:20.940: E/AndroidRuntime(9933): java.lang.RuntimeException: Unable to start service de.[...].SMSReaderService@41913a30 with null: java.lang.NullPointerException
08-03 16:32:20.940: E/AndroidRuntime(9933):     at de.[...].SMSReaderService.onStartCommand(SMSReaderService.java:161) 
```

在“Anwendungsmanager”中（我不知道它是如何用英文调用的......也许像“应用程序管理器”之类的东西）我可以看到服务正在运行...... 1 秒钟。然后它立即停止并尝试重新启动。2次尝试后运行。这是 logcat 记录错误的时候。

第 161 行： `searchString = (String)intent.getExtras().get(GET_SEARCHSTRING_AFTER_START);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:09:58.347

该文档建议您希望[`Service.START_STICKY`](http://developer.android.com/reference/android/app/Service.html#START_STICKY)从您的`onStartCommand()`方法返回。这将在资源可用时再次启动您的服务，如果它之前已被运行时杀死。

至于在启动时启动服务，您可以创建一个[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来监听运行时发送的[系统启动意图。](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)当您的`Intent`收到 时`BroadcastReceiver`，您就可以开始您的`Service`. 如果您只需要`Service`在设备关闭后启动，您可以执行类似的操作来监听[关闭意图](http://developer.android.com/reference/android/content/Intent.html#ACTION_SHUTDOWN)并保持您的状态`Service`（运行与否）。

附加说明，您需要启用 BootCompleted 权限。

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

# c++ - 池内存和 std::forward_list

> ID：11796188
> 
> 赞同：0
> 
> 时间：2012-08-03T12:58:17.433
> 
> 标签：c++, c++11, boost, forward-list

我将为 C++11 的节点创建一个内存池`forward_list`。

是否可以使用 BOOST 池内存`std::forward_list`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:08:15.517

[此堆栈溢出答案](https://stackoverflow.com/questions/11703643/can-i-assume-allocators-dont-hold-their-memory-pool-directly-and-can-therefore/11703840#11703840)提供了符合 C++11 的池分配器的源代码，该分配器将与任何符合 C++11 的容器一起使用，包括`std::forward_list`.

# clearcase - 是否可以将活动从一个流转移到另一个[在同一个副本中]？

> ID：11796192
> 
> 赞同：3
> 
> 时间：2012-08-03T12:58:35.777
> 
> 标签：clearcase, clearcase-ucm

我们有多站点clearcase环境。

在一个站点中，我们有多个流。

是否可以将活动从一个流传输到另一个 [使用相同的副本]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:42:20.503

多站点与否，活动链接到**流**（您不能将活动从一个流“移动”到另一个流）

见“[关于活动](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/c_about_rmt_delvr_ucm_cq_ccms.htm)”：

![活动](../Images/e9b69832d214e5d53887718fc7d80c39.png)

> **活动对象属于单个流，不能移动到另一个流**。
> （如果您将一个或多个版本分配给错误的活动，或者如果您创建新活动以更好地代表您的工作，您可以将这些版本分配给不同的活动。）

多站点允许所有权（称为“主控权”，请参阅“[关于 Rational ClearCase MultiSite 项目中的交付](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.hlp.doc/cc_main/c_about_deliver_MultiSite_proj.htm)”）在*站点*之间转移，但它仍然附加到同一流。

# sql - 防止用户在自引用表中添加空间大于分配空间的行

> ID：11796194
> 
> 赞同：1
> 
> 时间：2012-08-03T12:58:43.723
> 
> 标签：sql, oracle, oracle10g, hierarchical-data, self-referencing-table

我在分层查询中遇到问题。我有一个这样的自引用表：

```
 id    parent_id    name    size
-----------------------------------------
    1       null       Ship1    50
    2        1         cabin1   10
    3        1         cabin2   30
    4        3         shelf1    5
    5        3         shelf2   20
    6       null       Ship2    50
    7        6         cabin1   10
    8        6         cabin2   30
    9        7         shelf1   15 
```

我需要在数据库中添加一个触发器，以防止用户添加超过该船剩余大小的客舱。

例如，在表中，对于 1 号船，我们的总尺寸为 50。存在 2 个舱室，消耗 40 的尺寸。所以现在我们剩下 10 个作为可用空间。我们应该不能再添加一个大小>10 的客舱。任何 <= 10 都可以。小木屋和货架也是如此。一个客舱内所有货架的总尺寸不应超过分配给该客舱的总尺寸。

表中可以有任意数量的船舶条目（这是根）。

我知道分层查询，我可以遍历一棵树，但我发现很难收集我对这个问题的想法。谁能指出我正确的方向，以便我可以成功添加该触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:04:00.353

我同意@N_west 的观点，为了您的极简主义目的和便于维护（存档/清除等），您可能应该为 和 设置单独`Ships`的表`Cabins`。`Shelves`如果您想要一个触发器来处理这个问题，那么您将必须`SHIPS`使用触发器将数据从日志表捕获，`SHIPS`然后使用日志表上的数据来验证是否插入 on `SHIPS`。它不是最好的解决方案，但可以实现您想要的。您可以`ALERTS`根据错误代码 (20101) 在应用程序中处理用户定义的异常。

```
SQL> CREATE TABLE LOG_SHIPS AS SELECT * FROM SHIPS;

SQL> CREATE or REPLACE TRIGGER TRG_SHIP
BEFORE INSERT ON SHIPS
FOR EACH ROW

L_count   NUMBER(10);
L_total   NUMBER(10);
e_exp     EXCEPTION;

BEGIN
     SELECT sum(size) INTO L_count
       FROM LOG_SHIPS
      WHERE parent_id = :new.parent_id;

     SELECT size INTO L_total
       FROM LOG_SHIPS
      WHERE id = :new.parent_id;

     if L_count+:new.size > L_total then
        RAISE e_exp;
     else
        INSERT INTO LOG_SHIPS VALUES (:new.id,:new.parent_id,:new.name,:new.size);
     end if;

EXCEPTION
   WHEN e_exp THEN
     RAISE_APPLICATION_ERROR (-20101,'Size entered exceeds limit.');
   WHEN others THEN
      null; -- do some meaningful exception handling here
END;
/ 
```

另一种方法是`COMPOUND TRIGGERS`仅在您使用 Oracle 11g 时使用。

# ios - 以一个国家为中心的 mapkit 地图

> ID：11796196
> 
> 赞同：2
> 
> 时间：2012-08-03T12:58:46.590
> 
> 标签：ios, ipad, mkmapview, mapkit

在我的 ipad 应用程序中，我需要放置一个国家的地图，所以我的问题有两个部分：1：如何将地图放在一个国家的中心？2：如何设置地图的初始Scale？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:51:33.180

好的，您首先需要找到该国中心某个点的纬度/经度坐标。假设您定义了以下内容：

```
MKMapView *mapView;
float latitude_coordinate;
float longitude_coordinate;
float latMeters;
float lonMeters;

CLLocationCoordinate2D coordinates = CLLocationCoordinate2DMake(latitude,longitude);
MKCoordinateRegion region = MKCoordinateRegionMake(coordinates, latMeters, lonMeters)
[mapView setRegion:region animated:NO]; 
```

latMeters/lonMeters 是地图将显示的区域的宽高米数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T17:48:53.180

要获得一个国家的中心坐标，您可以使用地名网络服务。有关详细信息，请检查堆栈溢出中的以下问题：

[需要世界上所有国家的列表，带有经纬度坐标](https://stackoverflow.com/questions/2702309/need-a-list-of-all-countries-in-the-world-with-a-longitude-and-latitude-coordin)

# java - 通过 Java/WebService API 仅获取选定的属性

> ID：11796205
> 
> 赞同：2
> 
> 时间：2012-08-03T12:59:09.927
> 
> 标签：java, rally

使用 Java 应用程序和 Rally WS API (XML)，我想做一个查询，它只返回对象 HierarchicalRequirement 的属性子站点。

我写的是：

```
 QueryResult result = new QueryResult();
 result = service.query(ws, resultType, query, null, false, 0, 100); 
```

其中 resultType = HierarchicalRequirement e 查询是

> (Project.Name = "示例项目")& fetch="Name,FormattedID"

我做错了什么还是它不是受支持的功能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:27:08.770

SOAP 的工作方式与 REST 稍有不同，因为没有 Fetch 参数。它要么用它们的数据字段对从 Rally 返回的对象进行充分补充，要么不这样做。查询的函数原型如下所示：

```
 queryResult = rallyService.query(workspace, artifactType, queryString, order, 
                    fetchFullObjects, start, pageSize); 
```

因此，在您的查询中，您为 fetchFullObjects 指定了“false”。这在数据传输方面肯定更有效，因为您只获取对象外壳。如果你想用数据水合一个特定的返回对象，你可以对它做一个额外的 service.read() ，即

```
 DomainObject myObject = (DomainObject) queryResult.Results[0];
    DomainObject myFullObject = service.read(myObject); 
```

或者，您可以设置`fetchFullObject = true;`识别将在序列化并返回给您的客户端的数据量方面对性能产生影响。

从那里，您可以使用对象的 get 方法从其字段中提取数据。

# ios - 如何使用情节提要重新排列 UITabBarController 项目？

> ID：11796208
> 
> 赞同：71
> 
> 时间：2012-08-03T12:59:22.533
> 
> 标签：ios, iphone, xcode, storyboard

嗨，我在 XCode 4.5 中有一个 UITabBarController 作为根控制器，其中包含许多我需要更改顺序的选项卡。

唯一对我有用的是删除关系并以我希望标签栏项目出现的所需顺序再次添加它们。

还有另一种方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-08-03T13:09:04.127

在情节提要中突出显示标签栏控制器。

确保您已足够放大并且标签栏控制器周围有一个蓝色框。

然后单击选项卡并将它们拖动到您想要的位置

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-04T13:54:41.253

我通过右键单击情节提要解决了这个问题-> 作为源代码打开，然后按照我希望的顺序重新排列“segue”xml 块。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-07T02:03:06.580

xcode 4.5，拖放失败。正如另一个人所建议的那样，关闭 xcode 并重新启动 xcode。在此拖放 tabBarItems 完美地重新排列顺序之后。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-20T00:36:19.733

当我将标签栏控制器作为导航控制器的根视图时，我无法拖动标签。我不得不删除导航控制器并重新启动 xcode (4.5.2)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-01T04:34:30.487

上面的一些建议有时对我有用，但并非总是如此。即使重新启动 Mac 也无济于事。
我发现始终有效的唯一方法是删除从标签栏控制器到其子视图控制器的所有 segue，并以正确的顺序重新连接它们。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-19T14:18:19.150

使用 Xamarin iOS 设计器时，我在文本编辑器中打开 .storyboard 文件并找到`<tabBarController ...>`节点。然后我重新排列该`<connections>`部分中segues的顺序：

```
<connections>
    <segue destination="274" kind="relationship" relationship="viewControllers" id="286"/>
    <segue id="943" destination="910" kind="relationship" relationship="viewControllers"/>
    <segue destination="147" kind="relationship" relationship="viewControllers" id="159"/>
</connections> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-29T06:36:53.990

**1）**确保你放大到足够大，并且标签栏控制器周围有一个蓝色框。

**2）**然后单击选项卡并将它们拖动到您想要的位置。

**3）**如果它不起作用，只需单击任何 .h 或 .m 文件，然后转到情节提要文件并尝试。

**4）**即使它不工作，只需重新启动 xcod 并尝试它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-10T23:15:35.877

使用正确缩放级别的 Xcode 6.2 单击并拖动对我有用。

![在此处输入图像描述](../Images/136591a3c56b4bf7b5d94b9b3b5235da.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-18T04:01:43.737

使用 Xcode 5 及更高版本，您应该只需拖放它们：

![在此处输入图像描述](../Images/f274879c9b91c65028cb7947fff64a5f.png)

# ruby-on-rails - 在 Ruby 中使用集合比较两个哈希数组

> ID：11796214
> 
> 赞同：1
> 
> 时间：2012-08-03T12:59:46.933
> 
> 标签：ruby-on-rails, ruby

在此之后，[我](https://stackoverflow.com/questions/1574776/ruby-comparing-two-arrays-of-hashes)试图比较两个哈希数组：

```
db = [
{:foo => "bar", :stack => "overflow", :num => 0.5},
{:foo => "bar", :stack => "underlow", :num => 0.5},
{:foo => "bar", :stack => "overflow", :num => 0.1}
]

csv = [
{:foo => "bar", :stack => "overflow", :num => 0.5},
{:foo => "bar", :stack => "underlow", :num => 0.1},
] 
```

我正在尝试使用 Ruby Set ( `db_set = Set[db]`, `csv_set = Set[csv]`) 使用`-`( `db_set - csv_set`) 和`&`( `db_set & csv_set`) 比较两者，但这些似乎没有执行比较操作。

我误解了使用`Set`吗？我如何比较这两个哈希数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:05:05.917

这里不需要使用集合。似乎你会很好地使用数组运算符。

```
db = [
  {:foo => "bar", :stack => "overflow", :num => 0.5},
  {:foo => "bar", :stack => "underlow", :num => 0.5},
  {:foo => "bar", :stack => "overflow", :num => 0.1}
]

csv = [
  {:foo => "bar", :stack => "overflow", :num => 0.5},
  {:foo => "bar", :stack => "underlow", :num => 0.1},
]

db - csv # => [{:foo=>"bar", :stack=>"underlow", :num=>0.5}, {:foo=>"bar", :stack=>"overflow", :num=>0.1}]
db & csv # => [{:foo=>"bar", :stack=>"overflow", :num=>0.5}] 
```

# c# - 从中获取文件在 C#.net 中

> ID：11796215
> 
> 赞同：1
> 
> 时间：2012-08-03T12:59:50.690
> 
> 标签：c#, asp.net, html

我需要从我的输入 id 中获取文件名是 Announcement_PIC，但是当我尝试获取文件名时它总是返回 null。下面是我的代码：

前面：

```
<input type="file" runat="server" class="textboxTabsFiles" ID="Announcement_PIC"/> 
```

后端：我已经在部分类中包含以下内容：

```
protected System.Web.UI.HtmlControls.HtmlInputFile File1;
protected System.Web.UI.HtmlControls.HtmlInputButton Submit1; 
```

这就是我目前获取文件名的方式

```
string fn = System.IO.Path.GetFileName(Announcement_PIC.PostedFile.FileName).ToString(); 
```

编辑：我的文件上传放置在 JQuery 选项卡中，使用 asp fileupload 获取文件名也有问题，因此我尝试使用输入文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:03:14.303

如果您使用网络表单，请查看[FileUpload](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:05:08.427

您还记得`enctype='multipart/form-data'`表单标签上的 a 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:06:51.303

为什么不使用：

```
<asp:FileUpload id="FileUploadControl" runat="server" /> 
```

这将允许您访问 .HasFile 并执行 .SaveAs

# functional-testing - 我应该如何在 QTP 中插入标准检查点？

> ID：11796222
> 
> 赞同：0
> 
> 时间：2012-08-03T13:00:17.663
> 
> 标签：functional-testing, qtp

我是 QTP 的新手，我记录了示例航班预订应用程序。当我尝试插入标准检查点时，它会显示错误。这是我的脚本：

```
Window("Program Manager").WinListView("SysListView32").Activate "Flight"

Dialog("Login").WinEdit("Agent Name:").Set "jojo"

Dialog("Login").WinEdit("Agent Name:").Type  micTab

Dialog("Login").WinEdit("Password:").Set "mercury"

Dialog("Login").WinButton("OK").Click

Window("Flight Reservation").Close 
```

请让我知道是否有其他人面临同样的问题。错误截图： ![当我单击航班预订并选择插入标准检查点选项时。 我收到以下错误](../Images/6171344a9e0edbf7da083b54cb071cbb.png)

# templates - afterRender 模板调用似乎是作为 computedObservables 执行的。为什么以及如何解决它？

> ID：11796223
> 
> 赞同：1
> 
> 时间：2012-08-03T13:00:20.677
> 
> 标签：templates, knockout.js, knockout-2.0

所以这个问题是我之前的问题[在什么情况下 Knockout 原生模板重新渲染的问题](https://stackoverflow.com/questions/11241540/under-what-conditions-does-a-knockout-native-template-re-render)

经过一番调查，似乎如果模板定义了一个`afterRender`函数并且该`afterRender`函数引用了一个零件模型，那么如果该模型的该部分随后被更改，`afterRender`则再次调用该函数。

这种行为似乎类似于`computedObservables`(aka `dependentObservables`)，其中敲除跟踪它所依赖的模型的哪些部分，然后在它所依赖的值之一发生变化时重新运行`computedObservables`。

为了证明这一点，我写了一个 jsFiddle：http: [//jsfiddle.net/unklefolk/nczCt/1/](http://jsfiddle.net/unklefolk/nczCt/1/)

正如预期的那样，在渲染视图时会调用 afterRender 函数。但是，如果您单击该复选框，则 afterRender 函数将再次运行，因为它使用`viewModel.selectedPet().pet().IsHappy()`

这对我来说没有意义。所以我的问题是：

*   **这是`afterRender`函数正在重新运行的错误吗？**
*   **如何确保该`afterRender`功能只运行一次？**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:33:39.507

Knockout 使用计算的 observable 来包装元素上绑定的执行。这就是在依赖项更改时再次触发绑定的方式（此[链接](http://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html)可能有助于进一步解释。

目前，`afterRender`不排除将代码添加到这些依赖项中。如果这不适合您的方案，那么有几种方法可以防止它。

*   在以下位置运行您的代码`setTimeout`：例如[http://jsfiddle.net/rniemeyer/nczCt/2/](http://jsfiddle.net/rniemeyer/nczCt/2/)
*   将您的代码包装在您自己的计算 observable 中，您可以立即处理，例如：http: [//jsfiddle.net/rniemeyer/nczCt/3/](http://jsfiddle.net/rniemeyer/nczCt/3/) （我现在会这样做以避免 setTimeout）
*   在 KO 2.2 中，您将能够`peek`在 observables 上使用新函数，该函数允许您在不创建依赖项的情况下获取值。

# wordpress - 每个帖子的WordPress图片库

> ID：11796224
> 
> 赞同：1
> 
> 时间：2012-08-03T13:00:25.207
> 
> 标签：wordpress, post, gallery

在 Wordpress 中为每个帖子集成图片库的最佳方式是什么？

我正在寻找一个插件，它允许我为每个帖子上传未指定数量的图像，然后将这些图像显示在模板中指定的固定位置的画廊中。

我这样做的主要原因是提供一步解决方案，而不必先在其他地方创建相册，然后再将其关联到帖子中。

我尝试了 NextGen Gallery 和其他一些，但找不到实现我正在寻找的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:08:58.730

WordPress 带有一个内置的画廊制造商，当您撰写帖子或页面时可以使用它。更多详细信息[http://codex.wordpress.org/Inserting_Images_into_Posts_and_Pages#WordPress_Gallery](http://codex.wordpress.org/Inserting_Images_into_Posts_and_Pages#WordPress_Gallery)

# java - 带有数据库连接的检票口登录页面

> ID：11796226
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:00:31.423
> 
> 标签：java, jdbc, wicket

我得到了一个项目来开发一个登录页面，该页面检查用户是否存在于 postgres db 中并允许他登录，否则要求他以新用户身份登录我也输入了 if 子句，但它不起作用....我的代码是-

```
enter code here

package in.login;

import java.sql.Connection;

public  class Page3 extends WebPage{

    public Page3(){
        final TextField uname = new TextField("uname", new Model());
        final TextField  password = new PasswordTextField("password", new Model());
        add(new FeedbackPanel("feedback"));

        Form form = new Form("f"){
            protected void onSubmit() {
                String v1= uname.getDefaultModelObjectAsString();
                String v2 = password.getDefaultModelObjectAsString();
                System.out.println(uname.getDefaultModelObjectAsString());
                System.out.println(password.getDefaultModelObjectAsString());
                try {

                    Class.forName("org.postgresql.Driver");
                    Connection conn = DriverManager.getConnection(
                            "jdbc:postgresql://localhost/registration:5432",
                            "postgres",
                            "ashneel");
                    try {
                        conn.setAutoCommit(false);
                        PreparedStatement st = (PreparedStatement) conn.prepareStatement("select * from registration where uname='"+v1+"' and password='"+v2+"' ");
                        try{
                            if(password.equals(v2)) {
                                System.out.print("aaaaa");
                                setResponsePage(Inbox.class);
                            }
                            else {
                                System.out.print("new user");
                            }
                            setResponsePage(Inbox.class);
                        } finally {
                            st.close();
                        } 
                    } catch (Exception e) {
                        conn.rollback();
                        throw e;
                    }

                } catch (Exception e) {
                    throw new RuntimeException(e);
                }

            }

        };

        form.add(uname);
        password.add(StringValidator.minimumLength(5));
        password.add(StringValidator.maximumLength(10));
        form.add(password);
        add(form);

        form.add(new Link("link") {
            public void onClick() {
                Registr registr = new Registr();
                setResponsePage(registr);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:53:24.967

你应该使用：

```
PreparedStatement st = (PreparedStatement) conn.prepareStatement("select * from registration where uname=? and password=? ");
st.setString(1,v1);
st.setString(1,v2);
ResultSet rs=st.executeQuery();
if(rs.next()){
                            System.out.print("aaaaa");
}else{
                            System.out.print("new user");
} 
```

# delphi - 如何在delphi中使TImage透明？

> ID：11796228
> 
> 赞同：2
> 
> 时间：2012-08-03T13:00:31.987
> 
> 标签：delphi

我制作了一个带有透明表单的小型 EXE，上面有一个 TImage。为了使我的表单透明，我使用以下代码：

```
Function TForm1.CombineRegions (FrmX , FrmY  :Integer;CtrlComp : TControl;Var RegHandle : THandle) : Boolean;

Var
CtrlHandle : THandle;
 CtrlLeft,
 CtrlTop,
 CtrlWidth,
 CtrlHt     : Integer;
begin
  Result := False;
  CtrlHandle := 0;
  FrmX := 0;
  FrmY := 0;
  Try
      CtrlLeft   := CtrlComp.Left;
      CtrlTop    := CtrlComp.Top;
      CtrlWidth  := CtrlComp.Width;
      CtrlHt     := CtrlComp.Height;

 Except
     Exit;
 End;

 Try
   FrmX:=0;
   FrmY:=0;
   FrmX := FrmX + CtrlLeft;
   FrmY := FrmY + CtrlTop;
   CtrlHandle := CreateRectRgn(FrmX, FrmY, FrmX + CtrlWidth, FrmY + CtrlHt) ;
   CombineRgn(RegHandle, RegHandle, CtrlHandle, RGN_OR) ;
Except
End;
End; 
```

它所做的是首先使所有表单消失，然后根据我想要在表单上的哪些控件，我将调用上述函数并且只绘制该区域。现在我的 TImage 有一个图像，它有一些背景颜色。![图片](../Images/c4efdedfc89250cc0fad942f0b3cc22d.png)

如您所见，图像有一些背景。我希望绘制我的 TImage 以便只绘制里面的位图，而不是整个区域。可以做到吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:41:53.577

我有一个仅显示混合在屏幕上的 32 位 PNG 图像的启动表单，希望对您有所帮助。

```
unit SplashU;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, pngimage, ExtCtrls;

type
  TSplashForm = class(TForm)
    SplashImg: TImage;
  public
    procedure Execute;
  end;

var
  SplashForm: TSplashForm;

implementation

{$R *.dfm}

procedure TSplashForm.Execute;
var
  t: Cardinal;
  f: TBlendFunction;
  p: TPoint;
  z: TSize;
  s: DWORD;
  b: TBitmap;
  x, y:integer;
  a, d,c: PByteArray;
begin
s := GetWindowLongA(Handle, GWL_EXSTYLE);
if (s and WS_EX_LAYERED = 0) then
  SetWindowLong(Handle, GWL_EXSTYLE, s or WS_EX_LAYERED);

b := TBitmap.Create;
b.Width :=  SplashImg.Width;
b.Height :=  SplashImg.Height;
b.PixelFormat := pf32bit;
for y := SplashImg.Height - 1 downto 0 do
  begin
  a := (SplashImg.Picture.Graphic as TPNGObject).AlphaScanline[y];
  c := (SplashImg.Picture.Graphic as TPNGObject).Scanline[y];
  d := b.ScanLine[y];
  for x := 0 to SplashImg.Width - 1 do
    begin
    d^[x * 4 + 3] := a^[x];
    d^[x * 4] := MulDiv(c^[x * 3], a^[x], 255);
    d^[x * 4 + 1] := MulDiv(c^[x * 3 + 1], a^[x], 255);
    d^[x * 4 + 2] := MulDiv(c^[x * 3 + 2], a^[x], 255);
    end;
  end;

p := Point(0, 0);
z.cx := b.Width;
z.cy := b.Height;

f.BlendOp := AC_SRC_OVER;
f.BlendFlags := 0;
f.SourceConstantAlpha := 0;
f.AlphaFormat := AC_SRC_ALPHA;

Show;
t := 0;
while (f.SourceConstantAlpha < 255) do
  begin
  while (t = GetTickCount) do Sleep(25);
  t := GetTickCount;
  Inc(f.SourceConstantAlpha, (255 - f.SourceConstantAlpha) div 32 + 1);
  UpdateLayeredWindow(Handle, 0, nil, @z, b.Canvas.Handle, @p, 0, @f, ULW_ALPHA);
  end;
b.Free;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T20:20:39.643

获得一个正常的形式，隐藏它的所有边缘/标题。将您的图像放在该表单上并将其与 alClient 对齐。在 for 循环中将表单的透明度 (TForm.AlphaBlendValue) 设置为 0 到 255。

伪代码：

```
procedure ShowSplashScreen;
begin
 frmSplash:= TfrmSplash.Create(NIL);
 frmSplash.imgSplash.Picture.LoadFromFile('Splash.png');
 frmSplash.AlphaBlendValue:= StartValue; // This is about 50
 frmSplash.CurrAlpha:= frmSplash.AlphaBlendValue;
 frmSplash.Increment:= 5;  
 frmSplash.Show;         
 frmSplash.FormStyle := fsStayOnTop;   
 frmSplash.Timer.Enabled:= TRUE;
end; 
```

我将它与 PNG 图像（具有透明度）一起使用，它可以工作。

# coordinates - 在 AS3 的舞台上任意 2 个坐标之间画 2 条平行线

> ID：11796230
> 
> 赞同：1
> 
> 时间：2012-08-03T13:00:33.457
> 
> 标签：coordinates, lines, parallels, actionscript-3

我正在开发一个 Web 应用程序，基本上它是 Illustrator/Flash 的简单版本。所以足球教练可以制定计划。
我制作了不同的工具，比如在 Photoshop 中（线条工具、矩形工具……）。所有这些工作。

但是现在我需要开发一个工具，**用户可以在其中绘制双平行线**。我希望能够**在变量中定义这两条线之间的距离**。我需要在舞台上的任意 2 个点之间绘制 2 条平行线。与 Photoshop/Illustrator 中的线条工具类似，但它一次绘制 2 条线条。

* * *

它基本上应该像这样工作
**1) 在鼠标按下时：**
创建一个新的图形对象并注册用户单击的 X 和 Y。开始收听鼠标移动。

**2) 鼠标移动：**
清除图形对象，从原来的鼠标位置画双线到当前的鼠标位置。在每次鼠标移动时重绘。

**3) 鼠标向上：**
停止监听事件并将双线添加到舞台。

* * *

这非常适合绘制一条线，但我遇到了两条平行线的问题。它们彼此不平行，或者旋转无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:44:46.267

您将需要以这种方式绘制点：

```
90 degrees (UP from the START point)        90 degrees (UP from the END point)
|                                                                            |
START- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - END
|                                                                            |
90 degrees (DOWN from the START point)    90 degrees (DOWN from the END point) 
```

一旦确定了这 6 个点（顶线 2 个，鼠标起点和终点 2 个，底线 2 个），您可以将顶线和底线的这对点与lineTo(...) 命令给你这个：

```
------------------------------------------------------------------------------

START                                                                      END

------------------------------------------------------------------------------ 
```

要知道 START 和 END 点形成的当前角度是多少，您需要点的 X 和 Y 值的增量（两个值之间的差异）。

所以**X2 - X1 = DeltaX**和**Y2 - Y1 = DeltaY**。

然后，将这些增量放入`Math.atan2(y:Number, x:Number):Number`. 我相信返回值以弧度表示，因此要使用度数，您可以通过将结果乘以**180 / Math.PI**来进行转换。

然而，这并不是真正必要的，因为我们可以以弧度恢复其余的计算。将上述值 (180/Math.PI) 存储在变量中会很有用。

如果我们继续使用弧度，将 90 度转换为弧度很重要。

*   **90 / 弧度**给了我们一个数字来偏移我们的 START 和 END 点来解决**顶线**。
*   **-90 / 弧度**为我们提供了从 START 和 END 点偏移的数字，以解决**底线**。

换句话说...

这是我快速测试过的完整解决方案，如果它不能 100% 工作，我深表歉意：

```
var startPoint:Point = new Point(10, 0); //Replace by start-mouse location
var endPoint:Point = new Point(20, 0); //Replace by end-mouse location

var mouseAngle:Number = Math.atan2( endPoint.y - startPoint.y, endPoint.x - startPoint.x );

var angle:Number;
var lineHalfGap:Number = 100 * .5; //Replace 100 by your seperation value
var radians:Number = 180 / Math.PI;
angle = 90 / radians + mouseAngle;
var topOffsetX:Number = Math.cos( angle ) * lineHalfGap;
var topOffsetY:Number = Math.sin( angle ) * lineHalfGap;
angle = -90 / radians + mouseAngle;
var bottomOffsetX:Number = Math.cos( angle ) * lineHalfGap;
var bottomOffsetY:Number = Math.sin( angle ) * lineHalfGap;

var topStart:Point = new Point(startPoint.x + topOffsetX, startPoint.y + topOffsetY);
var topEnd:Point = new Point(endPoint.x + topOffsetX, endPoint.y + topOffsetY);

var bottomStart:Point = new Point(startPoint.x + bottomOffsetX, startPoint.y + bottomOffsetY);
var bottomEnd:Point = new Point(endPoint.x + bottomOffsetX, endPoint.y + bottomOffsetY);

trace(topStart, topEnd, bottomStart, bottomEnd); 
```

显然，您必须替换/替换您自己的一些变量（例如鼠标位置和线间距的分隔值），但这应该可以解决问题。

可以在此处找到一个运行示例：

[http://pierrechamberlain.ca/blog/2012/08/math-101-parallel-lines-two-points/](http://pierrechamberlain.ca/blog/2012/08/math-101-parallel-lines-two-points/)

# php - 通过主题的 functions.php 应用 Wordpress 补丁

> ID：11796232
> 
> 赞同：1
> 
> 时间：2012-08-03T13:00:37.100
> 
> 标签：php, wordpress, core

我正在尝试解决 Wordpress 不允许菜单项中的“tel：”链接的简单问题。我发现[这个补丁](http://core.trac.wordpress.org/attachment/ticket/18469/formatting.php.patch)解决了这个问题，但我必须编辑不理想的核心文件。任何知道通过主题的functions.php向该数组添加协议的方法的WP大师吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:07:12.950

看看 Hotfix 插件 - [http://wordpress.org/extend/plugins/hotfix/](http://wordpress.org/extend/plugins/hotfix/)

它基本上是通过定位函数并覆盖它来实现的。在您的情况下，请尝试覆盖“wp_allowed_protocols”。（看3.3代码）

# iphone - 如何在 iOS 上使用 OpenCV 检测面部元素？

> ID：11796234
> 
> 赞同：1
> 
> 时间：2012-08-03T13:00:50.573
> 
> 标签：iphone, ios, opencv

我正在使用 OpenCV 开发 iPhone 应用程序，并使用它来检测人脸。我不想检测整个面部，而是检测每个较小的面部特征（眼睛、鼻子、耳朵、嘴唇等）。

如何使用 OpenCV 做到这一点？

# eclipse - Eclipse/CDT 项目资源管理器中这个装饰文件夹图标的含义是什么？

> ID：11796235
> 
> 赞同：12
> 
> 时间：2012-08-03T13:00:56.773
> 
> 标签：eclipse, icons, cvs, eclipse-cdt

CDT/Eclipse 项目资源管理器中的这个特殊文件夹图标是什么意思？蓝色的东西看起来像钥匙、螺丝或某种工具。我想这与CVS有关。我在“首选项”>“外观”>“标签装饰”设置中找不到信息。

![放大的屏幕截图](../Images/4d528dfc39df28941dc41eff6aeb30c2.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-28T20:41:21.067

文件夹或文件上的扳手图标意味着它正在覆盖从其父级继承的一些构建设置。如果它是偶然出现的，您很可能右键单击该文件夹而不是整个项目并更改了它的一些属性。

要修复它，请右键单击带有扳手图标的文件夹，转到其属性，然后在与主项目不同的每个类别上单击“恢复默认值”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:23:44.463

这似乎是[自定义资源设置](https://bugs.eclipse.org/bugs/show_bug.cgi?id=298540)，也显示在[CDT 7.0 发布新闻](http://wiki.eclipse.org/CDT/User/NewIn70)中（对覆盖进行页面搜索）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T06:52:05.597

当您有一个指向目录的包含路径时，该目录将有一个键符号

# jquery - jQuery如何多次克隆（）

> ID：11796237
> 
> 赞同：1
> 
> 时间：2012-08-03T13:01:02.030
> 
> 标签：jquery, clone, prepend

我克隆了一些元素列表，但我需要克隆不止一次，你能告诉我怎么做吗？

```
$('.main_content ul li').clone().prependTo('.main_content ul') 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:06:07.627

试试这个可能吗？

```
var objToClone = $('.main_content ul li');
for (var i = 0; i < 10; i++)
   objToClone.clone().prependTo('.main_content ul'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:44:39.560

我不完全确定你在问什么，你想将列出的标签克隆到它的同一个父级中吗？这将导致相同的列出的项目在同一个父项中。

或者你想克隆父母？还是您只想克隆某些列出的项目？

这是你想要的？

```
<div class="main_content">
    <ul>
        <li>1</li>
        <li>2</li>
    </ul>
</div>

    <script type="text/javascript">

    $(document).ready(function(){
        var numberOfCopies = 5;

        for(x = 0; x < numberOfCopies; x++){
            $(".main_content ul li").each(function(){
                $(this).clone().appendTo(".main_content ul");
            });
        }
    })

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T23:05:01.143

或者不使用 .prependTo() 替换为 .insertAfter()

例如：

**jQuery**

```
$(function() {
    for () {
        $('.main_content ul li').clone().insertAfter('.main_content ul li');
    }
}); 
```

[提琴手](http://jsfiddle.net/Rx9Tu/)

# eclipse - 如何使用具有多个项目的maven创建一个zip文件

> ID：11796239
> 
> 赞同：2
> 
> 时间：2012-08-03T13:01:10.950
> 
> 标签：eclipse, maven-2, maven-assembly-plugin

我有 3 个模块链接到父项目。我需要创建一个包含所有这些项目的 zip 文件。我知道可以使用 Maven 程序集插件来完成。但是我应该在哪个 pom.xml 中使用它。有没有办法可以将 3 个项目中的资源复制到 1 个公共文件夹中。有没有相同的例子。这是一个多模块构建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:05:30.840

为此目的，最好的方法是在您的多模块构建中创建一个单独的模块，从而形成以下结构：

```
 root (pom.xml)
   +--- mod1 (pom.xml)
   +--- mod2 (pom.xml)
   +--- mod3 (pom.xml)
   +--- mod-package (pom.xml) 
```

mod-package 的 pom.xml 如下所示：

```
<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.soebes.packaging.test</groupId>
    <artifactId>root</artifactId>
    <version>0.1.0-SNAPSHOT</version>
  </parent>

  <artifactId>mod-package</artifactId>
  <packaging>pom</packaging>

  <name>Packaging :: Mod Package</name>

 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <descriptors>
            <descriptor>pack.xml</descriptor>
          </descriptors>
        </configuration>
        <executions>
          <execution>
            <id>package-the-assembly</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

并且不要忘记位于 mod-package/pack.xml 中的 pack.xml 文件：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  <id>pack</id>
  <formats>
    <format>zip</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <moduleSets>
    <moduleSet>
      <!-- Enable access to all projects in the current multimodule build! -->
      <useAllReactorProjects>true</useAllReactorProjects>
      <binaries>
        <outputDirectory>modules/${artifactId}</outputDirectory>
        <unpack>false</unpack>
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly> 
```

# asp.net - 带有固定水平子菜单的 asp 菜单

> ID：11796243
> 
> 赞同：1
> 
> 时间：2012-08-03T13:01:45.447
> 
> 标签：asp.net, html, css

我目前正在使用 asp 菜单及其子菜单。目前，当我们将鼠标悬停在菜单项上时，子菜单会垂直显示，当我们将鼠标移开时会消失。我对控件进行了调整，以便当我单击菜单项时，子菜单项应水平显示在菜单下方，但当我将鼠标移开时它们不应消失。参见示例。

如果没有点击。

![如果没有点击](../Images/9883aa829a3702376fb410c2dc721133.png)

如果点击了一个项目

![在此处输入图像描述](../Images/28a40551d29660fe073183415deeaa6a.png)

这里“活动日历”是菜单项，其下方的项目“每月、节日、有趣的旅行”是子菜单项

单击的项目应突出显示，并且必须在其下方显示子菜单，直到我单击另一个菜单项。

你能帮助我吗？？？

# linq - 如果给子查询，如何保持查询结果的顺序与相同的顺序？

> ID：11796248
> 
> 赞同：1
> 
> 时间：2012-08-03T13:01:52.077
> 
> 标签：linq, sql-order-by

我写了一个sql查询如下-

```
select 
    Customers.Id 
from 
    customers 
        inner join opportunities 
            on customers.id=opportunities.customerid 
group by 
    opportunities.customerId,
    Customers.Id 
order by 
    count(Opportunities.Id) desc 
```

上面的查询以机会 id 计数的降序返回客户 id。

我将上述查询作为另一个查询的子查询作为-

```
select * from Customers where Id in ( above query) 
```

但我的最终查询没有返回相同的订单结果。它正在将我的结果顺序更改为升序。

如何保持与内部查询/子查询相同的记录顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:21:23.300

在`SQL`中，表是无序的。子查询的结果被视为一个表；因此它们是无序的。当子查询显式具有`ORDER BY`. 顺便说一下，观点也是如此。`SQL`数据库不需要在视图定义中支持 ORDER BY 。

换句话说，`ORDER BY`是为了将最终数据呈现给用户。

我发现理解这一点的最好方法是认识到表可以跨不同的存储分区 ( `table spaces`)。尽管用户倾向于认为 a`table`是一个“文件”，但它可以（并且通常是）存储在多个文件中。多个文件的记录之间没有固有的顺序。

在某些特殊情况下，`ORDER BY`可以用在`subquery`. 例如，在支持`TOP`or的数据库中`LIMIT`，您可以使用 order by 来指定您获得的特定行。这是唯一想到的例外，但可能还有其他例外。

在任何情况下，解决方案都是将 order by 放在 external 上`query`，正如其他答案所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:13:52.883

试试这样

select * from Customers, (select Customers.Id, Row_Number() OVER(ORDER BY count(Opportunities.Id) desc) as row_num 从customers.id=opportunities.customerid 组的客户内部加入机会中按opportunities.customerId, Customers.Id ) 作为测试，其中 Customers.ID=test.Id 按 test.row_num 排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:05:29.230

```
select 
    Customers.Id, count(Opportunities.Id) as cnt
from 
    customers 
        inner join opportunities 
            on customers.id=opportunities.customerid 
group by 
    opportunities.customerId,
    Customers.Id 
```

在外部查询中按 cnt 排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:06:38.300

```
select C.* from Customers C 
INNER JOIN  ( yourquery) T1 on T1.Id = C.id
order by Count desc 
```

在您的第一个查询中，您需要设置

```
select 
    Customers.Id, Count(*) as [Count]
from (..) 
```

并删除`Order-By`

# c# - 在 Windows 服务中使用 Rx

> ID：11796256
> 
> 赞同：2
> 
> 时间：2012-08-03T13:02:18.110
> 
> 标签：c#, windows-services, system.reactive

我正在尝试在 Windows 服务中使用 Rx 扩展，但我被卡住了。我找到的样本不起作用。我将用一些代码解释我想要实现的目标。我正在创建的第一个类实际上是完成所有工作的类：

```
class Worker : IDisposable {
    public Worker() {
    }

    private void Run() {
    }

    public void Dispose() {
    }
} 
```

我想在 OnStart 中创建一个实例并在 OnStop 中杀死它：

```
public partial class MyService : ServiceBase {
    private Worker _Worker;

    public MyService () {
        InitializeComponent ();
    }

    protected override void OnStart ( string[] args ) {
        _Worker = new Worker();
    }

    protected override void OnStop () {
        _Worker.Dispose();
        _Worker = null;
    }
} 
```

所以我在Worker的构造函数中这样做了：

```
/* _TimesEvents and _Events are class level variables */
_TimedEvents = Observable.Timer ( TimeSpan.FromSeconds ( 1 ), new EventLoopScheduler() ).Timestamp ();
_Events = ( from events in _TimedEvents select events ).Subscribe ( e => Run() ); 
```

在 Dispose 中，我只是在 Dispose _Events。运行被调用一次。我怀疑它每秒被调用一次或根本不调用。

我错过了什么？

**编辑：**

`Main()`像这样测试我的外观：

```
static void Main ( ) {
    var args = Environment.GetCommandLineArgs ();
    if ( null != args && args.Length > 0 ) {
        using ( BRWorker worker = new BRWorker ()  ) {
            System.Windows.Forms.MessageBox.Show ( "Press ok to quit", "Test", System.Windows.Forms.MessageBoxButtons.OK );
        }
    } else {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] 
        { 
            new BRService() 
        };
        ServiceBase.Run ( ServicesToRun );
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:10:48.810

`Observable.Timer`完成后产生**单个**值`TimeSpan`。您想使用which 在**every**`Observable.Interval`之后产生一个新值。 **`TimeSpan`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:12:43.143

你可能想使用 Observable。**间隔**（[http://rxwiki.wikidot.com/101samples#toc14](http://rxwiki.wikidot.com/101samples#toc14)）**

# ruby-on-rails - 在 Rails 中读取通过 Via 表单发送的属性访问器

> ID：11796258
> 
> 赞同：0
> 
> 时间：2012-08-03T13:02:24.560
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我使用一个简单的邮件功能将一些属性访问器传递给我拥有的电子邮件模板。

我的模型如下所示：

```
class Model < ActiveRecord::Base

attr_accessor :replace_1, :model_id

end 
```

我的控制器如下所示：

```
def model_replace
  @model= Model.find(params[:model][:model_id])

  UserMailer.replacement_model(@model).deliver
  respond_to do |format|
    format.html { redirect_to({ :action => "model_replace"}, :notice => 'Model has been replaced.') }
  end
end 
```

我的表格如下所示：

```
 # Form stuff bound to Model

<div class="radio"><%= f.check_box :replace_1 %></div>
<%= f.hidden_field(:model_id, :value =>model.id) 
```

我的邮件程序工作正常并将模型传递给以下简单的 .erb 文件：

```
<p>Hello, the value of replace_1 is <%=@model.replace_1 %></p> 
```

我知道模型正在通过，因为我能够成功访问“@model.User.user_id”。

同样在 rails 终端我可以看到正在提交的数据 - “model” => { “replace_1” => “1” }

有人可以帮助我吗，我在我的 erb 文件中为 replace_1 返回一个空白值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:10:01.790

我通过以下方式将参数添加到我的控制器中解决了这个问题：

```
def model_replace
@model= Model.find(params[:model][:model_id])

@model.replace_1 = params[:model][:replace_1]

UserMailer.replacement_model(@model).deliver
respond_to do |format|
  format.html { redirect_to({ :action => "model_replace"}, :notice => 'Model has been replaced.') }
 end
end 
```

然后我简单地通过以下方式在我的 .erb 文件中访问它：

@model.replace_1

看起来有点脏，但它的工作。希望它可以帮助任何遇到这个新手问题的人，并且我对执行此功能的任何改进方法持开放态度。

谢谢！

# .net - EF Code First：在保存时复制数据（多对多）

> ID：11796259
> 
> 赞同：0
> 
> 时间：2012-08-03T13:02:29.193
> 
> 标签：.net, entity-framework

我正在使用 Entity Framework 并遇到了关于多对多映射的绊脚石。假设我有两个实体，订单和产品。

在我的 Order 实体中，我有：

```
int OrderID,
double OrderPrice
datetime OrderDate
ICollection<Product> Products
datetime DispactDate 
```

等等...

然后在我的产品类中我有

```
int ProductID
string ProductName
string ProductDescription 
```

等等。

在我的 Code First EF DB 中，我有一个订单表，它很好地映射到我的订单，一个产品表，其中包含可以订购的产品列表，然后使用 EF 代码优先迁移 EF 创建了带有外键的 OrderProducts 的两个主键其他表。都好。

但是，当我保存在其产品集合中有多个产品的订单时，EF 正在复制产品表中的所有条目。因此，如果我添加产品 10、12 和 13，它会使用三个新 ID 创建三个新行并映射到它们，而不是原来的。如果我随后处理另一个包含另外 20 个现有产品的订单，那么产品表中将创建 20 个新条目！

在我的 DBContext 中，我已经覆盖了 onModelCreatingEvent：

```
modelBuilder.Entity<Order>()
                .HasMany(x=>x.Products)
                .WithMany()
                .Map(be =>
                    {
                        be.ToTable("OrderProducts");
                }); 
```

我猜这里配置有问题。我从[如何在实体框架 CTP5 中映射多对多关系？](https://stackoverflow.com/questions/5188958/how-to-map-many-to-many-relationships-in-entity-framework-ctp5)

以前我有两个独立的存储库——一个用于订单，一个用于产品。我现在已将这些合并到 orderRepository 中，它公开了 Orders 和 Products，以便我可以将产品附加到 orderRepository 上下文。为了生成产品，我有一个控制器操作 AddProducts：

```
public RedirectToRouteResult Products(FormCollection selectedProducts)
        {
                currentOrder.Products = new List<Product>();
                foreach (string thisProduct in selectedProducts)
                {
                    int thisProductID = int.Parse(thisProduct);
                    Product selectedProduct = orderRepository.Products.Where(e => e.ProductID == thisProductID).FirstOrDefault();

                    if (selectedProduct != null)
                    {
                        orderRepository.AttachToContext(selectedProduct);
                        currentOrder.Products.Add(selectedProduct);
                    }                    
                }

                orderRepository.saveChanges(currentOrder); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:09:10.060

我怀疑 in`orderRepository`您的上下文实例与 in 不同`ProductsRepo`。您应该首先[将](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.attach%28v=vs.103%29.aspx)产品附加到`Products`in`orderRepository`的上下文中。

顺便说一下，这是为什么每个实体的存储库会真正妨碍您的一个示例。如果您想使用存储库模式，通常最好考虑聚合根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:46:14.830

你能敲出一个小单元测试，它只创建上下文、检索产品、创建订单并将检索到的产品添加到订单中吗？

那应该工作得很好。听起来您正在创建一个新的产品对象，而不是使用预先存在的产品对象。或者创建一个而不设置适当的实体键。

这听起来不像是从不同的上下文中获取它，因为您通常会收到警告说它已经附加到另一个上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:59:16.173

谢谢。设法解决了这个问题。在我的`OrderRepository`我不得不手动标记每个`Product`状态`EntitySate.Unchanged`。所以，`SaveOrder()`我现在做：

```
foreach (Product product in Orders.Products)
{
  context.Entry(product).State = System.Data.EntityState.Unchanged;
} 
```

这工作正常，但我很好奇为什么当订单中的每个产品都已经分配了一个有效的（和现有的）productid 时我必须执行此步骤？奇怪的。

# php - 通过 phpmailer（托管在 Google Apps 上的电子邮件地址）发送电子邮件

> ID：11796262
> 
> 赞同：2
> 
> 时间：2012-08-03T13:02:33.573
> 
> 标签：php, google-apps, phpmailer

我决定从 php`mail()`类切换到`phpMailer`. 我也将我的电子邮件地址移至`Google Apps`.

我一直在查看 PHPMailer 示例[http://phpmailer.worxware.com/index.php?pg=examples](http://phpmailer.worxware.com/index.php?pg=examples)但没有指定使用`Google Apps`.

我也试过这个（但它使用`Gmail` **NOT** `Google Apps`）：[Can't send an email using a google apps account with PHPMailer](https://stackoverflow.com/questions/5301213/cant-send-an-email-using-a-google-apps-account-with-phpmailer)

有没有人做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:16:42.157

使用`Gmail`和`Google Apps`作为邮件主机是类似的。[Can't send an email using a google apps account with PHPMailer](https://stackoverflow.com/a/5301733/1349295)中的答案演示了如何`Google Apps`使用`PHPMailer`. 检查此页面：[GMail 和 Google Apps 作为外发邮件服务器 (SMTP)](http://www.activecollab.com/forums/post/17023/)。

# android - 如何在填充列表后以编程方式更改列表元素的高度

> ID：11796263
> 
> 赞同：5
> 
> 时间：2012-08-03T13:02:33.327
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

我正在处理新闻项目列表。我的清单是一个`Activity`可以扩展的`ListActivity`。我还创建了一个`ArrayAdapter`用于扩充列表元素的方法。使用`ArrayAdapter`带有一个`ImageView`和两个`TextView`s的简单布局。一切正常，但是当我覆盖的`onListItemClick()`方法并尝试在单击列表元素时调整它们的大小时，没有任何反应。

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    v.getLayoutParams().height=300;
} 
```

我也尝试过上述`LayoutParams`方法

这是我用来填充列表的每一行的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:background="@color/white"
     >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="4dp"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    <TextView
        android:id="@+id/title1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textColor="@color/black"
        android:textColorHint="@color/black"
        android:textSize="10dp"
        android:textStyle="bold" >

    </TextView>  

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textColor="@color/black"
        android:textColorHint="@color/black"
        android:textSize="10dp" >

    </TextView>
    </LinearLayout>

</LinearLayout> 
```

有没有人遇到过同样的问题？任何人都可以为 Android 的初学者投一些光吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:21:43.403

我终于找到了解决问题的方法，我想与社区的其他人分享。

我正在使用 arrayAdapter 来扩展我的行布局，下面是它的代码：

```
public class MySimpleArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;
    private final Bitmap[] images;
    private final String[] names;

    public MySimpleArrayAdapter(Context context, String[] values, Bitmap[] images, String [] names) {
        super(context, R.layout.rowlayout, values);
        this.context = context;
        this.values = values;
        this.images=images;
        this.names=names;
    }

    View rowView;
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //View rowView;

        rowView = inflater.inflate(R.layout.rowlayout, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
        TextView title=(TextView) rowView.findViewById(R.id.title1);
        textView.setText(values[position]);
        imageView.setImageBitmap(images[position]);
        title.setText(names[position]);
        return rowView;
    }
} 
```

我的主要活动扩展了 ListActivity，其中列表的项目是从异步任务中的一些 json 文件中获取的。在 AsyncTask 的 onPostExecute 方法中，我的列表是使用获取的项目创建的。

以下是 onListItemClick 方法的代码：

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    int hei=v.getLayoutParams().height;
    System.out.println("Height   "+hei);
    if (hei==LayoutParams.WRAP_CONTENT) {
        v.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,105));
        v.requestLayout();

    }
    else {
        v.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        v.requestLayout();
    }
} 
```

诀窍是调用 requestLayout 方法以刷新您的布局。

# php - PHP PDO：显示错误

> ID：11796269
> 
> 赞同：3
> 
> 时间：2012-08-03T13:02:49.890
> 
> 标签：php, pdo

我是否需要使用 try 和 catch 块来显示 PHP 的 PDO 扩展错误？

例如，使用 mysql，您通常可以执行以下操作：

```
if ( ! $query)
{
    die('Oh noes!');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:03:55.363

```
public static function qry($sql) {
    try {
    $statement = $db_handle->prepare($sql);
    $retval = $statement->execute();
    if($statement->rowCount() >= 1) { 
        //do something               
    }else {
    $errors = $statement->errorInfo();
    echo $errors[2] . ", " . $errors[1] . " ," . $errors[0];
}
} catch (Exception $e) {
echo $e->getMessage();
}        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:32:41.053

PDO 默认支持它自己的异常类，`PDOException`.

应该没有理由不能使用：

```
try{
    $query = $db->prepare(...);
    if( !$query ){
        throw new Exception('Query Failed');
    }
}
catch(Exception $e){
    echo $e->getMessage();
} 
```

我只抓住的原因`Exception`是因为`PDOException`是异常的孩子。抓住父母将抓住所有孩子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:11:37.253

您可以通过 PDO::ATTR_ERRMODE 选择 PDO 对错误的处理方式：

```
$pdo->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); // Raise E_WARNING.
$pdo->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT); // Sets error codes.
// or
$pdo->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // throws exception 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:05:58.137

如果您不想使用 try catch 语句，您仍然可以使用这种代码：

```
$query = $db->prepare("SELECT * FROM table");
if(!$query->execute()) {
   print_r($query->errorInfo());
} 
```

# oop - 即使类和函数/方法之间没有直接联系，使用 defmethod 代替 defun 是否合理

> ID：11796271
> 
> 赞同：5
> 
> 时间：2012-08-03T13:03:00.517
> 
> 标签：oop, coding-style, common-lisp

考虑这个例子：

> 有一个名为“first”的类，它在包“a”中定义。
> 
> 还有一个使用模块“a”功能的包“b”。包“b”的某些功能需要“first”类的对象作为参数。但除此之外，包“a”和“b”之间没有直接的逻辑联系。

现在我想知道编写`(defmethod package-b-function ((param first)) #|do stuff..|#)`而不是普通函数是否合理，因为函数需要对象并且定义一个方法将为运行时环境和包'b'的其他用户澄清这一点。

我曾经用 C++/Java 编程，因此我不熟悉在这种情况下使用的 OOP 约定。

欣赏你的洞察力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T15:58:05.810

Common Lisp 中的方法与您注意到的语言的工作方式并不完全相同（有关详细信息，请参阅Practical [Common Lisp的](http://www.gigamonkeys.com/book/)[相应](http://www.gigamonkeys.com/book/object-reorientation-generic-functions.html)两[章](http://www.gigamonkeys.com/book/object-reorientation-classes.html)）。简而言之，在非常高的层次上，您需要将 lisp 中的 OO 视为“方法专门用于类”而不是“类具有方法”。

也就是说，是的，我认为对于一个包来说，拥有一个专门针对在别处定义的类的方法是完全合理的。指定您期望的输入类型可以阐明未来读者的意图（并且可能有助于优化，也可能没有帮助，但从我的角度来看，这并不是非常重要）。如果您正在为您的包[定义一个 ASDF 系统](http://common-lisp.net/~mmommer/asdf-howto.shtml#sec6)，请确保`import`使用适当的符号和`depends-on`适当的包。

就像脚注一样，请注意，Common Lisp 作为一种语言并不是特别面向对象的（例如，如果您决定某个特定的类应该具有`length`、`pop`或`push`方法，或专注于算术运算，您会遇到一些奇怪的角落） .

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:02:00.033

Common Lisp 提供普通函数和泛型函数。

作为第一条规则，请使用：

当您想从各种可用方法（例如使用 Mixins 编程时）或当您想根据运行时参数选择方法时，使用泛型函数。

如果您不需要这种高级行为，那么只需使用普通函数即可。记录普通函数需要什么样的参数以及相应的运行时检查可以通过其他 CL 功能来完成：

*   `CHECK-TYPE`
*   `ASSERT`
*   文档字符串
*   `DECLARE`参数类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:50:31.020

如前所述，在您描述的场景中，从纯技术 POV 来看，函数和方法都可以正常工作。Inaimathi 的回答（以及您的问题文本）给出了使用的理由`defmethod`（更好地向读者传达意图，更好的编译器信息）。使用普通函数的一个原因是在设计的早期阶段和探索性编程中都有助于重构。一种常见的 CL 技术是让函数接受仅传递给其他函数的任何参数（例如，在您的情况下，获取/设置槽的访问器`a:first`）`package-b-function`。

如果您创建`package-b-function`一个函数，您可以更改 class 的名称`a:first`，将其从一个类更改为一个结构，将它从一个列表更改为一个向量，然后在进行性能测量时返回，您的中间层`package-b-function`和它的 50 个兄弟将继续工作。如果使用 对类型信息进行编码`defmethod`，则付出的代价是在更改系统中的基本数据结构时必须更改大量代码，因此您无法轻松回答诸如“如果我使用 5 元素向量，事情会运行得更快”之类的问题而不是这里的物体？” 否则，只需定义 5 个访问器函数来`svref`代替，`slot-value`以及调用工厂`vector`代替`make-instance`.

# sass - 为什么我的semantic.gs 网格的排水沟总是为零？

> ID：11796284
> 
> 赞同：0
> 
> 时间：2012-08-03T13:03:17.907
> 
> 标签：sass, semantic.gs

我正在使用 semantic.gs 为网页创建网格。我注意到无论我做什么，我都没有任何“排水沟”，这意味着在 CSS 中边距计算为 0，尽管默认值为 20px。

于是我退后一步，尝试复现这个非常简单的官方例子：

[http://semantic.gs/examples/fixed/fixed.html](http://semantic.gs/examples/fixed/fixed.html)

我尝试的输出在这里：

[http://jsfiddle.net/QXpcq/](http://jsfiddle.net/QXpcq/)

如您所见，再次没有排水沟。标记是相同的，输出 CSS 不是。我的输出 CSS 总是显示 0 的边距。您可能会认为这可能是由于我的输入与示例不同，但据我所见，事实并非如此。我正在使用 SCSS，如下所示：

```
@import 'compass';
@import 'grid';

// Specify the number of columns and set column and gutter widths
$columns: 12;
$column-width: 60;
$gutter-width: 20;

// Uncomment the definition below for a percentage-based layout
// $total-width: 100%;

////////////
// LAYOUT //
////////////

// center the contents
div.center {
    width: 960px;
    margin: 0 auto;
    overflow: hidden;
}

// header
header#top {
    @include column(12);
    margin-bottom: 1em;
}

// main and sidebar
#maincolumn {
    @include column(9);
}
#sidebar {
    @include column(3);
} 
```

我已经在演示中剪断了重置 CSS 代码和设置颜色样式的 CSS。相信我，正如您在小提琴中看到的那样，它们是官方演示的精确复制和粘贴。

“grid”导入是grid mixins的官方下载。我没有改变它。这里最大的谜团是为什么使用相同的标记和 SCSS 我会得到不同的结果？

难道是因为我的编译过程？我正在使用 Scout 应用程序来监控我的 SCSS 文件夹。它拾取对它的任何更改并将其编译为 CSS。

# javascript - 防止标签内容多次加载（backbone.js）

> ID：11796289
> 
> 赞同：2
> 
> 时间：2012-08-03T13:03:28.800
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我的页面上有几个选项卡，只要单击其选项卡，就会使用 Backbone.js 加载其内容（由 包含的许多选项卡组成）`SetView`。`SetListView`

**问题：：**当用户从选项卡切换到以前加载/查看的选项卡时，内容会再次加载并附加到`SetListView`. 我可以让它在再次加载之前清除以前加载的内容，但是继续加载相同的内容似乎不是最佳选择。

是否可以让 Backbone.js 为一个选项卡存储现有内容，并且在切换回同一个选项卡时不多次加载它？

**意见**

```
// Views

var SetListView = Backbone.View.extend({
    el: '#set_list',

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(set, index) {
            $(this.el).append( new SetView({ model: set }).render().el );
        }, this);
        return this;
    }
});

var SetView = Backbone.View.extend({
    tagName: 'div',
    className: 'photo_box',

    template: _.template( $('#tpl_SetView').html() ),

    initialize: function() {
        this.model.on('destroy', this.close, this);
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    close: function() {
        this.unbind();
        this.remove();
    }
}); 
```

**路由器**

```
// Router

var AppRouter = Backbone.Router.extend({

    routes: {
        '': 'sets',
        'sets': 'sets'
    },

    viewing_user_id: $('#viewing_user_id').val(),

    sets: function() {
        this.showTab('sets');

        this.setList = new SetCollection();
        this.setListView = new SetListView({ collection: this.setList });
        var self = this;
        this.setList.fetch({
            data: {user_id: self.viewing_user_id},
            processData: true
        });
    },

    showTab: function(tab) {
        // Show/hide tab contents
        $('.tab-content').children().not('#tab_pane_' + tab).hide();
        $('.tab-content').children('#tab_pane_' + tab).fadeIn('fast');

        // Activate/deactivate tabs
        $('#tab_' + tab).addClass('active');
        $('#tab_' + tab).siblings().removeClass('active');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:18:43.483

Backbone 没有任何*内部*系统来区分您何时想要*重新获取*内容或*重新使用*已经获取的内容。您必须决定何时执行每个操作。

为实现此目的而对示例代码进行修改可以是：

```
var AppRouter = Backbone.Router.extend({
    // ... more router code

    sets: function() {
        if( !this.setList ) this.initializeSets();
        this.showTab('sets');
    },

    initializeSets: function(){
        this.setList = new SetCollection();
        this.setListView = new SetListView({ collection: this.setList });
        var self = this;
        this.setList.fetch({
            data: {user_id: self.viewing_user_id},
            processData: true
        });
    },
}); 
```

`initializeSets()`因此，只有在它们尚未初始化时才调用。当然，询问是否*`sets`已初始化*会更优雅、更简洁，但这取决于您。

# c# - 导航回视图时引发 InvalidOperationException

> ID：11796290
> 
> 赞同：1
> 
> 时间：2012-08-03T13:03:40.457
> 
> 标签：c#, wpf, exception-handling, prism

我有一个在两个父视图之间共享的子视图（SharedView），所以我通过这样的区域将它添加到每个父视图

```
<StackPanel>
  <ContentControl cal:RegionManager.RegionName="SharedViewRegion" />
</StackPanel> 
```

在父视图的 ViewModel 中，我像这样注册子视图

```
regionManager.RegisterViewWithRegion("SharedViewRegion", typeof(SharedView)); 
```

当我运行应用程序时，如果我只打开一个父视图，它会按预期工作，但如果我打开两个父视图，则会出现以下异常

> 创建名为“SecondRegion”的区域时发生异常。例外是：System.InvalidOperationException：指定元素已经是另一个元素的逻辑子元素。先断开它。

我一直在谷歌搜索，这是我发现的问题的更接近的解决方案[InvalidOperationException 当同一个视图实例添加到多个 ContentControl 区域时发生](http://compositewpf.codeplex.com/wikipage?title=InvalidOperationException%20when%20the%20same%20view%20instance%20is%20added%20to%20multiple%20ContentControl%20regions)

但我正在使用棱镜导航功能，所以我像这样实例化父视图

```
regionManager.RequestNavigate("ModuleRegion", new Uri("ParentView1", UriKind.Relative)); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:33:39.883

尝试执行以下操作：

向托管区域的 ContentControl 添加名称

现在您必须在离开父视图之前删除区域的内容，因此在 ViewModel 中将以下代码添加到 OnNavigatedFrom 方法

```
public void OnNavigatedFrom(NavigationContext navigationContext)
{
  ParentView.MyContentControl.Content = null;
} 
```

注意：您可以访问将其导入 ViewModel 的父视图。

现在您需要手动将内容添加到该区域，因为您在离开该区域之前已将其删除。这是代码

```
public void OnNavigatedTo(NavigationContext navigationContext)
{
  SharedView view = (SharedView)ServiceLocator.Current.GetInstance(typeof(SharedView));
  ParentView.MyContentControl.Content = view;
} 
```

注意：在此方法中，您必须添加一些解决方法，因为第一次打开此视图时，您将收到 System.InvalidOperationException，因为 PRISM 将尝试将 SharedView 添加到 MyContentControl。

这是一个可能的解决方法

```
bool isFirstTime = true;

public void OnNavigatedTo(NavigationContext navigationContext)
{
  if (isFirstTime)
  {
    isFirstTime = false;
    return;
  }
  SharedView view = (SharedView)ServiceLocator.Current.GetInstance(typeof(SharedView));
  ParentView.MyContentControl.Content = view;
} 
```

您必须在共享 SharedView 的所有父视图中执行相同的工作

我希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:35:14.513

对于这种情况，您应该直接将视图添加到区域而不是视图发现。为您的父视图赋予唯一的名称（您可以使用计数器来组成唯一的名称）。

```
var region = this.regionManager.Regions["SharedViewRegion"];
var viewName = string.Format("SharedView{0}", this.countParent+1);

//Only add if it doesn't exist
var view = region.GetView(viewName);
if (null==view)
{
 //Use container to get new instance of the parent view.
 view = this.container.Resolve<SharedView>();
 region.Add(view, name);
 //Increment the counter as you added a new parent view 
 this.countParent++;
}

//Now activate the view
region.Activate(view); 
```

# php - 服务器端查询后如何等待来自客户端的输入？

> ID：11796291
> 
> 赞同：3
> 
> 时间：2012-08-03T13:03:41.573
> 
> 标签：php, jquery

为了合并一些 SQL 调用，我尝试对服务器进行一次查询，然后让客户端遍历每个结果。需要注意的是，在处理下一个结果之前，我需要等待用户输入。这可能吗？

我有一个类似于下面的 jquery 调用：

```
$.post('functions/file_functions.php', {type: 'test', f: 'load'}, function(data) {
    if (data.success) {
        $.each(data.files, function() {

            // Can I wait for user input at this point and then process the next
            // file after a users interaction (e.g. a button click)?

        });
    }
}, "json"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:14:03.043

我将稍微扩展我的评论，并希望使它成为一个有用的答案。JavaScript 是单线程的，因此在等待其他事情（例如单击元素）发生时，无法阻止函数的执行。相反，您可以做的是在 AJAX POST 请求成功返回时将文件列表存储到一个数组中，然后使用单独的`click`事件处理程序循环它们（我假设每次单击获取一个文件）。

代码可能如下所示：

```
$(function() {
    var files, index = 0;

    $.post('functions/file_functions.php', {type: 'test', f: 'load'}, function(data) {
        if (data.success) {
            files = data.files;
        }
    }, "json");

    $('.mybutton').click(function() {
        if(files) {
            var file = files[index++];
            // do something with the current file
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:09:44.977

在 javascript 中“阻止”用户输入的一种方法是调用[window.prompt](https://developer.mozilla.org/en/DOM/window.prompt)（以及其他类似[window.confirm](https://developer.mozilla.org/en/DOM/window.confirm)或[window.showModalDialog](https://developer.mozilla.org/en/DOM/window.showModalDialog)）。然而，它并不是真正可定制的，您可能只想保存`data`从服务器返回的内容并进行某种基于用户输入事件的处理。

在代码中它看起来像这样：

```
var the_answer = window.prompt("What's the airspeed velocity of an unladen swallow?");
console.log(the_answer); 
```

# dynamic - 如何在 Spring Integration 中轻松地将消息转换逻辑添加和删除到处理流中？

> ID：11796294
> 
> 赞同：0
> 
> 时间：2012-08-03T13:03:59.360
> 
> 标签：dynamic, spring-integration, type-conversion

我一直在玩 Spring 集成，我看不出如何最好地解决以下问题。

假设我有 XML 消息到达通道。这些消息可能具有任意结构，我想将它们转换为我的规范形式，所以我想我想为每种类型的结构编写自定义转换器，以便我可以进行任何我想要的处理和错误检查。

显而易见的事情是连接路由器以查看消息并路由到适当的转换器，但我认为这意味着我需要将处理流程硬编码到指向每个转换器的通道上。

我想避免在不同的转换器和路由逻辑中进行硬配置，而想到的替代方案是拥有一组实现某种转换器的转换器`boolean canHandle(message)`，这样我们就只向每个转换器显示消息，直到一个'声称'消息或我们用完。这样，我似乎可以在不实际修改处理流程的情况下将转换器注释到配置中。

我是 Spring 集成的新手，我很可能会误解这一点。在 Spring 集成中是否有一种常用的方法来做到这一点，我错过了什么还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:51:15.207

有很多方法可以做到这一点。第一个想到的是带有选择器表达式的收件人列表路由器：

```
<recipient-list-router id="simpleDynamicRouter" input-channel="simpleDynamicInput">
    <recipient selector-expression="@handler1.canHandle(payload)" channel="toHandler1"/>
    <recipient selector-expression="@handler2.canHandle(payload)" channel="toHandler2"/>
    <recipient selector-expression="@handler3.canHandle(payload)" channel="toHandler3"/>    
</recipient-list-router>

<transformer ... ref="handler1" />
<transformer ... ref="handler2" />
<transformer ... ref="handler3" /> 
```

其中 handler1 等是 <bean/> 与您的实现和 canHandle() 方法。

另一种选择是编写自己的自定义动态路由器；这里有一个如何做到这一点的例子[https://github.com/SpringSource/spring-integration-samples/tree/master/advanced/dynamic-ftp](https://github.com/SpringSource/spring-integration-samples/tree/master/advanced/dynamic-ftp)

# jquery - 更新空输入计数更改事件

> ID：11796296
> 
> 赞同：0
> 
> 时间：2012-08-03T13:04:20.280
> 
> 标签：jquery

我正在计算有多少配置文件字段项为空并将计数显示为标签。如果所有字段都已完成，它将显示一个勾号而不是计数 (0)。

像这样

```
$(function() {
    var num = $('input[name^="p-"]').filter(function(){
        return !$(this).val();
    }).length;
    if (num > 0) {
    $('.Personal').prepend('<span class="label label-important" title="<?php _e('Incomplete'); ?>">'+num+'</span>');
    } else {
    $('.Personal').prepend('<span class="label label-info" title="<?php _e('Completed'); ?>">&#10004;</span>');
    }
}); 
```

我想更新它，以便在每个字段完成时更新计数，因此您会在完成字段时看到它倒计时。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:21:30.990

```
$('input[name^="p-"]').on('change',function(){
    var num = $('input[name^="p-"]').filter(function(){
        return !$(this).val();
    }).length;
    if (num > 0) {
    $('.Personal').prepend('<span class="label label-important" title="<?php _e('Incomplete'); ?>">'+num+'</span>');
    } else {
    $('.Personal').prepend('<span class="label label-info" title="<?php _e('Completed'); ?>">&#10004;</span>');
    }
}); 
```

如果你想选择 textarea 以及像这样修改选择器

```
$('input[name^="p-"], textarea').on('change',function(){}); 
```

当然`[name^="p-"]`，如果您愿意，您也可以申请

# mobile - Div 显示/隐藏媒体查询

> ID：11796297
> 
> 赞同：48
> 
> 时间：2012-08-03T13:04:21.063
> 
> 标签：mobile, media

只有在移动宽度上，我才能使用什么代码来制作特定的 div？

我的屏幕顶部有一个 100% 宽度的完整 div，希望它仅在设备被指定为移动宽度时显示。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-03T13:14:45.380

我不确定，您所说的“移动宽度”是什么意思。但在每种情况下，CSS `@media`都可以用于在屏幕宽度的基础上隐藏元素。看一些例子：

```
<div id="my-content"></div> 
```

...和：

```
@media screen and (min-width: 0px) and (max-width: 400px) {
  #my-content { display: block; }  /* show it on small screens */
}

@media screen and (min-width: 401px) and (max-width: 1024px) {
  #my-content { display: none; }   /* hide it elsewhere */
} 
```

一些真正的移动检测是一种硬编程，而且相当困难。最终看到：[http](http://detectmobilebrowsers.com/) ://detectmobilebrowsers.com/或其他类似来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-12T09:00:09.867

```
 Small devices (landscape phones, 576px and up)
@media (min-width: 576px) { 
  #my-content{
   width:100%;
 }

// Medium devices (tablets, 768px and up)
@media (min-width: 768px) { 
  #my-content{
   width:100%;
 }
 }

// Large devices (desktops, 992px and up)
@media (min-width: 992px) { 
display: none;
 }

// Extra large devices (large desktops, 1200px and up)
@media (min-width: 1200px) {
// Havent code only get for more informations 
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-17T04:24:14.117

听起来您可能想要访问设备的视口。您可以通过在标题中插入此元标记来做到这一点。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

[http://www.w3schools.com/css/css_rwd_viewport.asp](http://www.w3schools.com/css/css_rwd_viewport.asp)

# vb.net - 当我在数学运算中添加“=”符号时会发生什么？

> ID：11796306
> 
> 赞同：2
> 
> 时间：2012-08-03T13:05:15.537
> 
> 标签：vb.net, math, syntax

我正在快速从其他地方复制代码。经过测试和调试，我不断得到非常奇怪的结果。再次比较代码后，我意识到我在`=`等式中添加了一个额外的内容：

```
Dim lowerLeft As Integer = x = +y * terrainWidth 
```

与此相反：

```
Dim lowerLeft As Integer = x + y * terrainWidth 
```

这实际上是在做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T13:06:42.950

如果你有`Option Strict On`（而且你**应该**），这不会编译。

表达式内部的A`=`是比较运算符。其结果是`Boolean`. 在您的情况下，这意味着表达式等效于：

```
Dim lowerLeft As Integer

If x = +y * terrainWidth Then
    lowerLeft = True ' Converted to 1
Else
    lowerLeft = False ' Converted to 0
End If 
```

`Option Strict On`正确地禁止这种隐式转换。

# scala - scala 隐式身份

> ID：11796309
> 
> 赞同：0
> 
> 时间：2012-08-03T13:05:24.637
> 
> 标签：scala, identity, implicit

进行数据库事务：

```
def create(model: Model, orderNum: String) = {
  db.handle withSession { implicit ss: Session=>
    ss.withTransaction { // auto commit now set to false
      val result = for {
        uid <- repo.user.create(model)
        mid <- repo.membership.create(uid)
        oid <- repo.orders.create(model, uid, orderNum)
      } yield uid
      result fold( 
        e=> { ss.rollback; Left(e) }, 
        s=> { Cache.remove("member.directory"); Right(s) } 
      )
    }
  } 
} 
```

如果存储库用户创建实现采用隐式 Session，*它是否与*上面启用了 withTransaction 的 Session 相同，或者是隐式值“is a”而不是“is the”身份？

```
def create[T <: User](t: T)(implicit ss: Session) = // what Session is this?
  for {
    uid <- either( Users.insert( Users(t) ), i18n("user not created") )
    ur  <- either( UserRoles.insert( UserRole(uid, t.role) ), i18n("user role not created") )
  } yield uid 
```

我可以显式传入会话`repo.user.create(model)(ss)`并创建显式会话，但我很想知道更简洁/方便的隐式方法是否提供相同的结果，*即*启用事务的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:12:01.357

如果我正确理解您，您正在使用 ScalaQuery，并且您希望您的方法在用户从外部提供会话时也能正常工作。

> def withSession [T] (f: ⇒ T): T 使用新会话运行提供的 thunk 并在结束时自动关闭会话。
> 
> def withSession [T] (f: (Session) ⇒ T): T 使用新会话运行提供的函数并在结束时自动关闭会话。

这两个都在创建一个新事务，所以我会采用 Optional[Session] 作为隐式并将其默认为 None

```
 def onProvidedOrCreatedSession[K](f: Session => K)(session:Option[Session]) = {
    session match {
      case Some(s) => f(s)
      case None => db.withSession { f }
    }
  }

  def create(model: Model, orderNum: String)(implicit session:Option[Session]=None){
    onProvidedOrCreatedSession( 
      implicit s => s.withTransaction {  val x = 10 }
    )(session)  

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:25:51.630

不确定以下是否是您尝试做的忠实抽象，但我希望它有所帮助：

```
class Store(var x: Int) {
  def flip() { x = -x }
}

object M1 {
  implicit val store2 = new Store(2)

  def create(s: String) = {
    implicit val store3 = new Store(3)

    { implicit store: Store => 
        println("[M1.create] store.x = " + store.x)
        store.flip()
        M2.create("tummy")
        println("[M1.create] store.x = " + store.x)
    }
  }
}

object M2 {
  implicit val store4 = new Store(4)

  def create(s: String)(implicit store: Store) = {
    println("[M2.create] store.x = " + store.x)
    store.flip()
  }
}

M1.create("dummy")(new Store(1)) 
```

输出是：

```
[M1.create] store.x = 1
[M2.create] store.x = -1
[M1.create] store.x = 1 
```

*   `new Store(1)`明确传递给的`M1.create`转发给`M2.create`

*   `store2, store3, store4`编译器显然忽略了附加的隐式存储。

# asp.net - ASP.NET 4.0 服务器标签

> ID：11796329
> 
> 赞同：1
> 
> 时间：2012-08-03T13:06:14.570
> 
> 标签：asp.net, asp.net-4.0

我们正在将 ASP.NET 项目从 2.0 版迁移到 4.0 版

在以前的版本中，我指定了以下代码行：

```
<asp:CheckBox runat="server" ID="chkContentFilter" 
       Text="<%# SearchResultDictionary.ContentFilter %>" 
       OnCheckedChanged="chkFilterCheckbox_ValueChanged" AutoPostBack="True"
       EnableViewState="True" ></asp:CheckBox> 
```

问题是在 ASP.NET 4.0`<%# %>`服务器标签中没有将数据映射到控件。

当然，有一种解决方法可以在代码隐藏中设置控制文本。但我很有趣有没有办法在 aspx 布局上绑定文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:15:50.863

您必须调用`DataBind()`容器或控件本身`<%# %>`才能进行评估：

[数据绑定表达式](http://msdn.microsoft.com/en-us/library/ms178366.aspx)

**标记：**

```
<asp:CheckBox runat="server" ID="chkContentFilter" 
       Text='<%# SearchResultDictionary.ContentFilter %>' 
       OnCheckedChanged="chkFilterCheckbox_ValueChanged" AutoPostBack="True"
       EnableViewState="True" ></asp:CheckBox> 
```

**代码隐藏：**

```
chkContentFilter.DataBind(); 
```

# objective-c - 带有 UITabBar 实时字节的 UINavigationController

> ID：11796332
> 
> 赞同：0
> 
> 时间：2012-08-03T13:06:30.793
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller, uitabbar, allocation

我有一个带有 3 个视图控制器的导航控制器。第三个视图控制器包含一个 UITabBar 并且标签栏上的每个标签都有自己独立的导航控制器。当我在标签栏导航控制器上推送和弹出视图控制器时，所有分配工作正常。它们相应地上升和下降。但是，当我将承载标签栏（第三个 VC）的导航控制器弹出回第二个视图控制器（没有标签栏的视图控制器），然后再次回到第三个 VC（承载标签栏的那个），活动字节增长到比以前在同一个视图控制器上时的更多。

当从标签栏弹出没有标签栏的视图控制器时，我需要做一些特别的事情吗？？？

或任何其他想法

我正在使用 ARC

我也不使用 UITabBar 的子类来控制标签栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:40:35.377

问题是我将 uitabbarcontroller 推到导航堆栈上，据我了解这是不可能的。

因此，我使用 uitabbar 启动应用程序并将单独的导航控制器显示为模式

# python - 任何错误的python Django自定义错误消息（除了尝试，除外）

> ID：11796333
> 
> 赞同：0
> 
> 时间：2012-08-03T13:06:30.607
> 
> 标签：python, django

在 django 中，每当发生错误时，如果我们不保留在 try 块中，就会引发错误。在那个时间点（错误期间），如果它不在 try 块中，而不是错误页面，我们可以显示一个 msg 。

我实际上要说的是，django 中是否有任何东西（如信号）在错误期间被激活并打印出那个 msg 。在我的情况下，它是一个 ajax 请求，所以我想要的是，当 try 块中没有某些内容时，如果它仍然引发错误，那么它应该至少发回一个错误 msg（到另一个服务器，该服务器对我们的 ajax 进行了调用服务器）说“发生错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:23:30.670

据我所知，没有办法全局覆盖 Python 中的默认异常处理。您可以使用`try`/`except`块来捕获错误，执行一些代码，然后重新引发异常。

将您的代码放在一个`try`块中，并在`except`块中打印您的消息，然后调用`raise`以重新引发捕获的异常。

前任：

```
try:
    raise Exception("This is an exception")
except Exception:
    print ("Exception raised, notify server")
    #re-raise exception
    raise 
```

这将打印如下内容：

```
Exception raised, notify server
Traceback (most recent call last):
  File "[file]", line [line], in [module]
Exception: This is an exception 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:32:22.027

在 Django 中，如果发生错误，它实际上并不会自动传播给用户。相反，如果发生错误，它会返回 500 错误页面。如果 Django 处于调试模式，它会给出回溯。如果另一台服务器是智能的，它将意识到有 500 错误消息而不是 200 消息。在 Django 中，您可以在根目录中定义一个“500.html”来处理错误（或使用默认的 Django 模板）。GLHF

# android - 在android中计算互联网速度

> ID：11796334
> 
> 赞同：16
> 
> 时间：2012-08-03T13:06:36.647
> 
> 标签：android

我正在使用一个包含 Web 服务内容的应用程序。

因为我需要知道网速低时的状态。如何在 Android 中找到互联网速度级别？

例如，如果我在手机中使用 2Mbps 连接，当它慢到 50Kbps 时，我需要通过 Toast 或 Alert 来注意这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T13:37:23.933

如果您已连接，`WiFi`您可以使用以下方法找到连接速度[`WifiManager`](http://developer.android.com/reference/android/net/wifi/WifiManager.html)：

```
WifiInfo wifiInfo = wifiManger.getConnectionInfo(); 
```

然后从[`WifiInfo`](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getLinkSpeed%28%29)你可以得到当前的速度：

```
int speedMbps = wifiInfo.getLinkSpeed(); 
```

如果您使用 3G，我认为没有标准的查找方法，也许您可​​以自动假设 3G 很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T10:10:15.150

这专门用于通过 [facebook sdk检测互联网连接速度](https://github.com/facebook/network-connection-class)

```
ConnectionQuality cq = ConnectionClassManager.getInstance().getCurrentBandwidthQuality(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T04:57:22.083

这是连接到 wifi 时获取互联网速度的代码。

```
WifiManager wifiManager = (WifiManager) 
    this.getSystemService(Context.WIFI_SERVICE);

List<ScanResult> wifiList = wifiManager.getScanResults();
for (ScanResult scanResult : wifiList) {
    int level = WifiManager.calculateSignalLevel(scanResult.level, 5);
    String net=String.valueOf(level);
   // Toast.makeText(MainActivity.this,net,Toast.LENGTH_LONG).show();

}

// Level of current connection.here rssi is the value of internet speed whose value
// can be -50,-60 and some others,you can find the speed values easily on internet.

int rssi = wifiManager.getConnectionInfo().getRssi();
int level = WifiManager.calculateSignalLevel(rssi, 5);
String net=String.valueOf(rssi);
Toast.makeText(MainActivity.this,net,Toast.LENGTH_LONG).show();

// -100 is the minimum speed value of your internet.
if(rssi < -100) {
    slowInternet=false;
} 
```

# c# - 当母版页中没有 ScriptManager 时，从内容页更新 MasterPage 的标签

> ID：11796336
> 
> 赞同：0
> 
> 时间：2012-08-03T13:06:39.763
> 
> 标签：c#, asp.net, master-pages, ajaxcontroltoolkit, scriptmanager

我没有`ScriptManager`在我的 MasterPage 上使用它，因为当我开始开发项目时不需要它，所以我有一个个人`ScriptManager`和`UpdatePanel`每个内容页面。

现在，在 MasterPage 中，我添加了一个显示当前系统时间的标签，我的客户希望它异步更改并提供实时时钟的感觉。我可以使用从内容页面更改母版页中的标签文本`Timer`吗？到目前为止，我无法实现这一点，因为我不能`UpdatePanel`在 MasterPage 中使用 an，因为没有`ScriptManager`标签。

那么有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:01:23.080

谢谢@ Yuriy Rozhovetskiy，根据您的建议，我创建了一个简单的javascript，并在加载时在母版页主体上调用该javascript，并且工作正常。请在下面找到可能对也有相同要求的人有所帮助的代码：-

Javascript函数：-

```
<script type="text/jscript">
    function clock(){ 
      var d = new Date(); 
      var h = d.getHours(); 
      var m = d.getMinutes(); 
      var s = d.getSeconds(); 
      $('#clock').html(h+"<span class='colon'>:</span>"+m+"<span class='colon'>:</span>"+s); 
    //  $('.colon').fadeTo(1000, .2); 
      setTimeout(clock, 1000); 
    } 
```

`<body onload="clock()">`

添加此以在母版页上显示时钟。

```
<span id="clock" style="font-family:Calibri;color:White;font-weight:bold;font-size:1.3em;"></span> 
```

# php - 在有效的 PHP query() XPath 中转换 Javascript XPath | 规范化 JS XPath --> PHP

> ID：11796340
> 
> 赞同：19
> 
> 时间：2012-08-03T13:06:50.323
> 
> 标签：php, javascript, xml, dom, xpath

这是 Javascript 中的有效 XPath：

```
id("priceInfo")/div[@class="standardProdPricingGroup"]/span[1] 
```

这变成了与 DOMXPath->query() 一起使用的有效 PHP XPath 是

```
//*[@id="priceInfo"]//div[@class="standardProdPricingGroup"]//span[1] 
```

1.  您知道已经进行此转换的任何库或自定义组件吗？
2.  您知道列出两种语法差异的可用文档吗？

我主要担心的是可能存在很多差异，我正在寻找这些差异，但我在识别这些差异时遇到了问题。

这个问题也可以用不同的方式提出：**由于 Javascript 可以有不同的有效 XPath 格式，如何规范它们以与 PHP 一起使用。**

其中一项更新还提到，如果存在包含此定义的有效 DTD，则 id() 函数是有效的 XPath。我没有输入 DTD 的权力，如果有办法找到一个没有任何特定 DTD 的解决方案，那就太棒了。

**更新：**

我想用算法将第一种格式转换为第二种格式。我的输入是第一个而不是第二个。不能改变这一点。

正如@Nison Maël 所指出的，第二种格式是有效的 Javascript XPath，如下所示：http://jsbin.com/elatum/2/edit[不幸](http://jsbin.com/elatum/2/edit)的是，这只会增加 Javascript XPath“碎片化”的问题。

@salathe 指出，如果记录的输入具有有效的 DTD（@Dimitre Novatchev 在评论中提到这一点，但忽略了重要性），则有效的 Javascript XPath 查询在 PHP 中可以正常工作。不幸的是，我无法控制输入 DTD，所以现在我必须研究一种方法来克服这个问题，或者找到一个即使没有有效 DTD 也能工作的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T19:19:31.797

只是看到 Salathe 实际上回答了同样的问题，但考虑到您的评论并更加强调这一点：

您不需要指定任何 DTD。只要您使用`DOMDocument::loadHTML`or`DOMDocument::loadHTMLFile`函数，HTML`id`属性实际上是为 xpath`id()`函数注册的。[使用http://jsbin.com/elatum/2/edit](http://jsbin.com/elatum/2/edit)中给出的演示 HTML ，您甚至在加载文档时会遇到错误：

> 警告：DOMDocument::loadHTMLFile(): ID priceInfo 已在...中定义

这已经表明这是一个真正的 ID 属性，因为它抱怨重复。相关的示例代码如下所示：

```
$xpath = 'id("priceInfo")/div[@class="standardProdPricingGroup"]/span[1]';

$doc = new DOMDocument();
$doc->loadHTMLFile(__DIR__ . '/../data/file-11796340.html');
$xp = new DOMXPath($doc);

$r = $xp->query($xpath);
echo $xpath, "\n";
echo $r ? $r->length : 0, ' elements found', "\n";
if (!$r) return;
foreach($r as $node) {
    echo " - ", $node->nodeValue, "\n";
} 
```

输出是：

```
id("priceInfo")/div[@class="standardProdPricingGroup"]/span[1]
1 elements found
 - hello 
```

如果您需要更多控制，首先运行 xpath 将所有 HTML`id`属性标记为 xpath 的 ID：

```
$r = $xp->query("//*[@id]");
if ($r) foreach($r as $node) {
    $node->setIdAttribute('id', true);
} 
```

然后，您可以使用与该`id()`函数相同的 xpath，无需更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:46:09.837

这不是一个完整的答案，但它太大而无法作为评论发表，它可能会对您有所帮助。

如果您可以控制输入 XML，那么`id`您可以在 XML 文档本身中通过在`id`属性前面加上`xml:`.

例如，如果您有 XML

```
<foo id="x27"/> 
```

并将其更改为

```
<foo xml:id="x27"/> 
```

那么 id() 函数会将该属性识别为正式的 XML`id`类型，而不仅仅是带有 name 的属性`id`。

我知道这个“技巧”适用于 Saxon 处理器，但我必须承认我没有在 PHP 上尝试过。

[W3C xml:id](http://www.w3.org/TR/xml-id/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:23:41.317

你不能在你的表达开始时翻译`id("...")`成吗？`//*[@id="..."][1]`

例如，如果可以假设您在`id(...)`表达式中没有任何括号：

```
$queryRewritten =   preg_replace('/^id\(([^\)]+)\)/','//*[@id=$1][1]',$query); 
```

[示例代码](http://so.viperpad.com/QWSTqs)

编辑：更正了替换， id() 必须是表达式中的第一个

# c# - DDD 封装和存储库模式

> ID：11796343
> 
> 赞同：3
> 
> 时间：2012-08-03T13:06:56.953
> 
> 标签：c#, domain-driven-design

说我有这个简单的课程

```
public class MyEntity
{
    public DateTime DateUpdated { get; private set; }
    public string Author { get; private set; }
    public string Comment { get; private set; }

    public void AddComment(string comment, string author)
    {
        Author = author;
        Comment = comment;
        DateUpdated = DateTime.Now;
    }
} 
```

我已将 setter 设为私有以封装类，并添加了 AddComment 方法以向我的类添加一些行为。这在创建新对象时工作得非常好，但是当我想从数据库加载实体时，DateUpdated 当然设置为我想避免的当前日期。

是否有任何模式可以用来避免公开 DateUpdated 设置器，因为这似乎破坏了我的良好封装并弄乱了类的干净接口？当然，这个类只是一个更一般的问题的例子。

在不创建更多公共构造函数的情况下，我现在最接近的是创建一个私有构造函数，我通过公共静态方法访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:10:33.837

使用一个构造函数，它接受与对象字段匹配的参数。

这将允许您在启动时填充对象并保持它们不可变。

```
public MyEntity(DateTime dateUpdated, string author, string comment)
{
  DateUpdated = dateUpdated;
  Author = author;
  Comment = comment;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T20:12:31.597

查看 Memento 模式，为您的对象补充水分。仅将构造函数用于创建新实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T00:22:32.490

如果您使用诸如 NHibernate 之类的 ORM 来实现存储库，那么即使属性是私有集，它也会根据数据库中的数据为属性分配值。也就是说，它绕过了`AddComment`方法，直接注入数据。这是有道理的，因为在重构实体时，行为不会重复，只需要复制数据。NHibernate 确实要求实体包含受保护的无参数构造函数。如果使用您自己的 ORM 实现，那么您可以使用 Oded 建议的构造函数模式，因为在这种情况下，您的实体可以真正保持对持久性的无知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:24:16.113

您可以像这样重载 AddComment 方法：

```
public class MyEntity
{
    public DateTime DateUpdated { get; private set; }
    public string Author { get; private set; }
    public string Comment { get; private set; }

    public void AddComment(string comment, string author)
    {
        Author = author;
        Comment = comment;
        DateUpdated = DateTime.Now;
    }

    public void AddComment(string comment, string author, DateTime dateUpdated)
    {
        Author = author;
        Comment = comment;
        DateUpdated = dateUpdated;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T17:11:30.947

如果负责创建这些对象的存储库位于同一个程序集中，则应检查[内部访问修饰符](http://msdn.microsoft.com/en-us/library/7c5ka91b%28d=lightweight%29.aspx)。如果这符合您项目的需求，您可以通过以下两种方式之一来实现它...

1.  将您的设置器从 更改`private`为`internal`。然后，创建者只需在实例化后设置属性的值。
2.  添加一个`internal`构造函数，该构造函数接受所有属性的值并设置它们。

无论哪种方式，您仍然可以通过您在示例中演示的公共方法进行更改。

# asp.net-mvc-3 - @Ajax.ActionLink 的渲染被添加了一个新路由搞砸了

> ID：11796344
> 
> 赞同：2
> 
> 时间：2012-08-03T13:06:56.973
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我有一个 ActionLink：

```
<td>
    @Ajax.ActionLink(item.HostedBy, "_DetailsMerged", "Marcher",
            new { id = item.HostedById },
            new AjaxOptions
            {
                UpdateTargetId = "marcherId" + @i ,
                HttpMethod="GET",
                InsertionMode = InsertionMode.Replace,
            })

</td> 
```

当我只有默认路由时，它会显示适当的链接。但是，在默认路由之前为地理位置代理引入路由（实现`IRouteHandler`并且是自定义路由处理程序）：

```
routes.Add("WebgisUscproxy", new Route("WebgisUscproxy", new OpenLayers_Bronze.Utility.WebgisUscProxyHandler()));

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
 ); 
```

在我的客户端 javascript ajax 调用（看起来像：）中为半硬编码链接工作正常时，搞砸`/WebgisUscproxy?zip=10003`了`@Ajax.ActionLink`链接的呈现方式。他们也拿起`'/WebgisUscproxy'`。所以我得到：

```
http://localhost:59723/WebgisUscproxy?action=_DetailsMerged&controller=Marcher&id=1 
```

代替：

```
http://localhost:59723/Marcher/_DetailsMerged/1 
```

这就是我想要的，只需使用默认路由即可。放：

```
routes.Add("WebgisUscproxy", new Route("WebgisUscproxy", new OpenLayers_Bronze.Utility.WebgisUscProxyHandler())); 
```

AFTER 默认路由处理程序也不起作用，因为默认路由现在匹配半硬编码链接，例如`'/WebgisUscproxy?zip=10003'`.

==================================================== =========================

我找到了解决方法，但我希望有人发布更直接的内容。

```
routes.MapRoute("webgisusc", "WebgisUscProxy",     
                    new { controller = "Utility", action = "WebgisUsc" }
                    ).RouteHandler = new OpenLayers_Bronze.Utility.WebgisUscProxyHandler(); 
```

我创建了一个空的 Utility 控制器，并打算向它添加一个虚拟的“WebgisUscProxy”操作，但事实证明甚至不需要一个虚拟的 UtilityController。这个路由定义本身就可以工作。

# instagram-api - Instagram如何从用户名中获取我的用户ID？

> ID：11796349
> 
> 赞同：138
> 
> 时间：2012-08-03T13:07:11.543
> 
> 标签：instagram-api

我正在使用 JSON 将我的图像提要嵌入到我的网站中，URL 需要我的用户 ID，以便我可以检索此提要。

那么，我在哪里可以找到/获取我的用户 ID？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2016-07-13T03:20:33.793

答案很晚，但我认为这是该主题的最佳答案。希望这是有用的。

使用以下 url 发出请求时，您可以获取用户信息：

```
https://www.instagram.com/{username}/?__a=1 
```

例如：

此 url 将获取有关用户名为 therock 的用户的所有信息

```
https://www.instagram.com/therock/?__a=1 
```

* * *

## 2019 年 6 月 20 日更新，API 现已公开。无需身份验证。

2018 年 12 月 11 日更新，我需要确认此端点仍然有效。您需要在向该站点发送请求之前登录，因为它不再是公共端点。登录步骤也很简单。这是我的演示： [https ://youtu.be/ec5QhwM6fvc](https://youtu.be/ec5QhwM6fvc)

* * *

2018 年 4 月 17 日更新，看起来此端点仍在工作（但它不再是公共端点），您必须向该端点发送带有额外信息的请求。（按 F12 打开开发人员工具栏，然后单击网络选项卡并跟踪请求。）

对不起，因为我太忙了。希望这些信息对大家有所帮助。嗯，如果你愿意，请随时给我投反对票。

* * *

2018 年 4 月 12 日更新，cameronjonesweb 表示此端点不再工作。当他/她尝试访问此端点时，返回 403 状态码。

* * *

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-27T14:49:40.630

在您的浏览器中输入此 url，其中包含您要查找的用户名和访问令牌

```
https://api.instagram.com/v1/users/search?q=[USERNAME]&access_token=[ACCESS TOKEN] 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-01-17T09:13:29.943

轻松获取 USER ID 和用户详细信息

[https://api.instagram.com/v1/users/search?q=[](https://api.instagram.com/v1/users/search?q=[) 用户名]&client_id=[你的APP客户端ID]

**例如：**

[https://api.instagram.com/v1/users/search?q=zeeshanakhter2009&client_id=enter_your_id](https://api.instagram.com/v1/users/search?q=zeeshanakhter2009&client_id=enter_your_id)

**结果：**

> {"meta":{"code":200},"data":[{"username":"zeeshanakhter2009","bio":"http://about.me/zeeshanakhter","website":"http: //zeeshanakhter.com","profile_picture":"http://images.ak.instagram.com/profiles/profile_202090411_75sq_1377878261.jpg","full_name":"Zeeshan Akhter","id":"202090411"}]}

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-07-05T18:07:07.070

自 2016 年 1 月 1 日 api 更改以来，大多数方法已过时

下面为我​​工作，

*   在浏览器上访问 Instagram，比如 chrome、safari 或 firefox。
*   启动开发者工具，进入控制台选项。
*   在命令提示符下输入以下命令并回车：

    ```
    window._sharedData.entry_data.ProfilePage[0].user.id 
    ```

如果运气好的话，第一次尝试就会成功，如果没有，请耐心等待，刷新页面再试一次。继续做，直到你看到用户 ID。祝你好运！！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-01-22T00:03:37.037

可以检查 Instagram 用户页面来获取 ID，而不是使用 API。PHP 中的示例代码：

```
$html = file_get_contents("http://instagram.com/<username>");
$doc = new DOMDocument();
$doc->loadHTML($html);

$xpath = new DOMXPath($doc);
$js = $xpath->query('//body/script[@type="text/javascript"]')->item(1)->nodeValue;

$start = strpos($js, '{');
$end = strrpos($js, ';');
$json = substr($js, $start, $end - $start);

$data = json_decode($json, true);
$data = $data["entry_data"]["UserProfile"][0];
# The "userMedia" entry of $data now has the same structure as the "data" field
# in Instagram API responses to user endpoints queries

echo $data["user"]["id"]; 
```

当然，如果 Instagram 更改其页面格式，则必须调整此代码。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-10-15T00:27:48.110

**截至 2018 年 10 月 14 日，没有访问令牌**的工作解决方案：

搜索用户名：

```
https://www.instagram.com/web/search/topsearch/?query=<username> 
```

例子：

```
https://www.instagram.com/web/search/topsearch/?query=therock 
```

这是一个搜索查询。在回复中找到完全匹配的条目，并从该条目中获取用户 ID。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-09-19T15:03:35.667

目前没有直接的 Instagram API 可以从用户名中获取用户 ID。您需要调用[GET /users/search](http://instagram.com/developer/endpoints/users/#get_users_search) API，然后迭代结果并检查`username`字段值是否等于您的用户名，然后获取`id`.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-01-02T03:49:24.600

我编写了这个工具来通过用户名检索 Instagram ID：[Instagram User ID Lookup](http://instagram-uid.herokuapp.com/)。

它利用[python-instagram](https://github.com/Instagram/python-instagram)库来访问 API，并包含一个[指向源代码的链接](https://github.com/zeantsoi/django-instagram-uid)（在 Django 上编写），该链接说明了 Instagram API 的各种实现。

**更新：添加了**[移植到 Ruby on Rails](https://github.com/zeantsoi/rails-instagram-uid)的源代码。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-04-17T08:09:49.897

我尝试了所有上述解决方案，但都没有奏效。我猜 Instagram 加速了他们的变化。然而，我尝试了浏览器控制台方法并玩了一会儿，发现这个命令给了我用户 ID。

```
window._sharedData.entry_data.ProfilePage[0].graphql.user.id 
```

您只需访问个人资料页面并在控制台中输入此命令。您可能需要刷新页面才能使其正常工作。（我不得不发布这个作为答案，因为我的声誉很低）

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-08-03T13:14:26.357

您需要使用`Instagrams API`将您的转换`username`为`id`.

如果我没记错的话，您可以`users/search`用来查找用户名并从那里获取 id

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-06-23T17:28:01.523

[在 2016 年6 月 1 日 Instagram API 更改](https://www.instagram.com/developer/changelog/)后，这些答案中的大多数都无效。现在最好的解决方案就[在这里](http://www.otzberg.net/iguserid/index.php)。转到您在 instagram.com 上的提要，复制任何图片的链接地址，然后将其粘贴到该页面上的文本框中。像魅力一样工作。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-08-03T13:49:48.260

要获取您的 ID，请向 Instagram API[`users/self/feed`](http://instagram.com/developer/endpoints/users/#get_users_feed)端点发出经过身份验证的请求。响应将包含用户名和用户 ID 等数据。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-09-16T00:26:18.440

尽管它不再列在 API 文档页面上，但我发现一个[线程](https://groups.google.com/forum/?fromgroups=#!searchin/instagram-api-developers/get%2420authenticated%2420user%27s%2420info/instagram-api-developers/pgdmEBYmDpo/oYPqHQkb0RsJ)提到您可以使用`self`它代替端点`user-id`，[`users/{user-id}`](http://instagram.com/developer/endpoints/users/#get_users)它将返回当前经过身份验证的用户信息。

因此，`users/self`与显式调用相同，`users/{some-user-id}`并且包含用户 ID 作为有效负载的一部分。一旦您通过身份验证，只需调用 ，`users/self`结果将包括当前经过身份验证的用户的 id，如下所示：

```
{
    "data": {
        "id": "1574083",
        "username": "snoopdogg",
        "full_name": "Snoop Dogg",
        "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg",
        "bio": "This is my bio",
        "website": "http://snoopdogg.com",
        "counts": {
            "media": 1320,
            "follows": 420,
            "followed_by": 3410
        }
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-01-19T11:53:45.040

[转到 api 控制台](http://instagram.com/developer/api-console/) 并在文本字段中复制链接 `https://api.instagram.com/v1/users/self` 并使用您的 instagram id 和密码进行身份验证，您将获得您的 id 作为响应

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-02-20T12:29:42.870

您可以使用**Instagram API**（用户端点：/users/search）来做到这一点

php中的操作方法：

```
function Request($url) {

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);  
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
    curl_setopt($ch, CURLOPT_HEADER, 0);  

    $result = curl_exec($ch);

    curl_close($ch);

    return $result;

}

function GetUserID($username, $access_token) {

    $url = "https://api.instagram.com/v1/users/search?q=" . $username . "&access_token=" . $access_token;

    if($result = json_decode(Request($url), true)) {

        return $result['data'][0]['id'];

    }

}

// example:
echo GetUserID('rathienth', $access_token); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-05-20T05:00:23.143

这可以通过Instagram 开发者网站上的apigee.com Instagram API 访问[来完成。](http://instagram.com/developer/api-console/)登录后，点击“/users/search”API调用。从那里您可以搜索任何用户名并检索其 ID。

```
{
"data": [{
    "username": "jack",
    "first_name": "Jack",
    "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_66_75sq.jpg",
    "id": "66",
    "last_name": "Dorsey"
},
{
    "username": "sammyjack",
    "first_name": "Sammy",
    "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_29648_75sq_1294520029.jpg",
    "id": "29648",
    "last_name": "Jack"
},
{
    "username": "jacktiddy",
    "first_name": "Jack",
    "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_13096_75sq_1286441317.jpg",
    "id": "13096",
    "last_name": "Tiddy"
}]} 
```

如果您已经有访问代码，也可以这样操作： [https ://api.instagram.com/v1/users/search?q=USERNAME&access_token=ACCESS_TOKEN](https://api.instagram.com/v1/users/search?q=USERNAME&access_token=ACCESS_TOKEN)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-05-03T11:54:54.100

那么你可以调用这个链接

[http://jelled.com/ajax/instagram?do=username&username=[USER_NAME_GOES_HERE]&format=json](http://jelled.com/ajax/instagram?do=username&username=%5bUSER_NAME_GOES_HERE%5d&format=json)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-09-18T17:21:30.767

如果使用隐式认证肯定有找不到 `user_id`

例如，我找到了一种方法：

`Access Token = 1506417331.18b98f6.8a00c0d293624ded801d5c723a25d3ec the User id is 1506417331`

你会做一个由 . 分隔的拆分单。obtenies 访问令牌和第一个元素

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-03-28T19:16:57.083

我认为最好、最简单和最安全的方法是在浏览器中**打开您的 Instagram 个人资料，****查看源代码**并在主 javascript 代码中**查找用户变量**(ctrl+f *"user":{"* )。用户变量中的 id 号应该做你的身份证。

这是编写此答案时的代码（可以并且将来可能会更改）：

```
"user":{"username":"...","profile_picture":"...","id":"..........","full_name":"..."}}, 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2015-05-25T12:21:42.887

以下是从用户名中检索用户 ID 的方法：

```
$url = "https://api.instagram.com/v1/users/search?q=[username]&access_token=[your_token]";
$obj = json_decode(@file_get_contents($url));
echo $obj->data[0]->id; 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-06-22T11:09:56.997

这是一个非常适合我的非常简单的网站：

[http://www.instaid.co.uk/](http://www.instaid.co.uk/)

或者您可以执行以下操作，将“用户名”替换为您的 Instagram 用户名

[https://www.instagram.com/username/?__a=1](https://www.instagram.com/username/?__a=1)

或者您可以登录您的 Instagram 帐户并使用谷歌开发工具并查看已存储的 cookie。'ds_user_id' 是您的用户 ID

[![在此处输入图像描述](../Images/f92014b61b199b14bfcd943f5e30afd7.png)](https://i.stack.imgur.com/97NDA.png)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-12-15T03:46:21.463

**工作解决方案 2020 年 12 月 14 日**

对于需要 Instagram 用户 ID 的 3rd 方工具（例如嵌入图像提要）的简单用途，我倾向于使用：

[https://www.thekeygram.com/find-instagram-user-id/](https://www.thekeygram.com/find-instagram-user-id/)

因为它使复制和粘贴我正在寻找的 Instagram 用户 ID 变得非常容易。与大多数工具不同，我可以快速获得结果，它是免费的并且没有广告。我建议您在使用它之前先观看 youtube 视频，这样您就可以了解它的简单程度并了解它的使用方式：

[https://www.youtube.com/watch?v=9HvOroY-YBw](https://www.youtube.com/watch?v=9HvOroY-YBw)

对于更高级的用法，我建议：

`https://www.instagram.com/{username}/?__a=1`

（用请求的用户名替换用户名）

例如，要查找用户名“instagram”的用户 ID，您可以使用：

`https://www.instagram.com/instagram/?__a=1`

这是返回 JSON 响应的最先进的方式，如果您正在构建需要原始数据的应用程序，这非常棒。您可以将其保存在数据库中或构建某种类型的前端 UI 来显示它。示例：用于仪表板或网站。此外，使用 url 也很棒，因为您可以获得有关用户的其他属性，例如他们的总追随者人数和个人资料。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-07-28T09:33:07.073

```
https://api.instagram.com/v1/users/search?q="[USERNAME]"&access_token=[ACCESS TOKEN] 
```

请注意引号。

这并不总是返回有效结果，但比未引用的结果更常见：

```
https://api.instagram.com/v1/users/search?q="self"&count=1&access_token=[ACCESS TOKEN] 
```

返回用户 "self" (id: 311176867)

```
https://api.instagram.com/v1/users/search?q=self&count=1&access_token=[ACCESS TOKEN] 
```

返回用户“super_selfie”（id：1422944651）

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-07-20T01:58:37.393

**工作解决方案~2018**

我发现，只要您有访问令牌，您就可以在浏览器中执行以下请求：

`https://api.instagram.com/v1/users/self?access_token=[VALUE]`

实际上，访问令牌包含**用户 ID**（令牌的第一段）：

`<user-id>.1677aaa.aaa042540a2345d29d11110545e2499`

[您可以使用Pixel Union 提供的此工具](http://instagram.pixelunion.net/)获取访问令牌。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-12-02T11:38:17.763

首先在 Instagram 上创建一个应用程序并为您的应用程序获取客户端 ID

[http://instagram.com/developer/](http://instagram.com/developer/)

现在只需通过替换您的用户名和您的客户 ID [https://api.instagram.com/v1/users/search?q=[Your-username]&client_id=[Your-Client-Id]将以下 URL 复制粘贴到浏览器窗口](https://api.instagram.com/v1/users/search?q=[Your-username]&client_id=[Your-Client-Id])

您将获得一个 Json 结果，其中包含有关您的帐户的一般信息以及您的数字用户 ID

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-08-17T08:35:00.687

2021 年更新

只需转到[Facebook 应用程序](https://developers.facebook.com/apps)选择您与 Instagram 连接的应用程序，您将看到您的**Instagram ID：** ********

[![在此处输入图像描述](../Images/886c8bea1b0bad60819892dd68c7ecf2.png)](https://i.stack.imgur.com/r5tug.png)

> 注意[https://www.instagram.com/{username}/?__a=1](https://www.instagram.com/%7Busername%7D/?__a=1)不适合我，所以如果你想使用 Instagram Graph API，这不是 2021 年的解决方案

# jquery - TypeError: $("#search-form").jqTransform 不是函数

> ID：11796351
> 
> 赞同：0
> 
> 时间：2012-08-03T13:07:40.413
> 
> 标签：jquery, plugins, jqtransform

我将使用 jqTransform（jquery 插件）；但是当页面加载时在萤火虫上显示错误：

```
TypeError: $("#search-form").jqTransform is not a function
[Break On This Error]   

...'#search-form').jqTransform({imgPath: "http://localhost/bankemelk/includes/img/"... 
```

这是我的代码：

```
<script type="text/javascript">
    $(function(){
        $('#search-form').jqTransform({imgPath: "<?php echo base_url(); ?>includes/img/"});
        $('#search-form1').jqTransform({imgPath: "<?php echo base_url(); ?>includes/img/"});
        console.log();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:28:50.133

你可以试试 $("#search-form").jqTransform(); 它应该会自动加载正确的图像，但似乎您没有按照应有的方式包含它。显示您的代码...

无论如何，如果可以的话，这里是我 7 个月前开始的 jqtransform 的替代品。 [http://www.pkoretic.net/csTransPie/](http://www.pkoretic.net/csTransPie/)

我之所以做到这一点，正是因为 jqtransform 存在的所有问题。它从 jqtransform 改进开始，现在是别的东西，我希望更好......

# c - How to convert or cast a float into its bit sequence such as a long

> ID：11796355
> 
> 赞同：5
> 
> 时间：2012-08-03T13:07:51.573
> 
> 标签：c, casting, floating-point

Good day, I am working in a 16-bit C environment, and I want to convert a float value into its bit sequence such as an integer value. There are multiple ways I know how to achieve this, one is with a union; such as:

```
union ConvertFloatToInt
{  
   float input;  
   unsigned long  output;  
}; 
```

this will "convert" the floating values into a long value, by reading the same memory area, just interpreting it differently.

```
union ConvertFloatToInt x;
x.input = 20.00; 
```

result

```
x.output = 0x41A00000; 
```

Other methods are void pointer casts...

```
float input = 40.00;
unsigned long output;
void* ptr;
ptr = &input;
output = *(unsigned long*) ptr; 
```

result

```
output = 0x42200000; 
```

This is the idea of what I am trying to do, however, I want the compiler to do the conversion for me, during build, not during run time.

I need a to insert the converted floating data into a constant (const) unsigned long.

I was thinking of trying to convert the float value into a void, and then the void into the unsigned long. Something like this: (and yes this is incorrect, you can not cast to a void)

```
const unsigned long FloatValue = (unsigned long) ((void) ((float) 20.654)); 
```

Is there some way to do this? I was thinking maybe something with void pointers, but all void pointers I know of needs a variable, and variables may not be used in the assignment of const values.

**Edit**

I am using a C90 compiler. The question is intended in the file scope.

**Conclusion**

The conclusion was that there is no real solution to this question except when working in the block scope. For which multiple answers were given, and I thank all of you.

**My Solution**

This is not a good solution, however it solves my problem, but I do not think that this will help many people either. I created a small program for a demonstration purpose. This is not my projects code, and also not the compiler used in my project (before someone says that this is not a C90 compiler)

The compiler used in the demonstration: gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

```
typedef union
{
            float myfloat;
            unsigned long mylong;
} custom_type;

typedef struct
{
            int a;
            int b;
            custom_type typeA;
            custom_type typeB;
} my_struct;

const my_struct myobj =
{
                            1,2,3.84F,4
};

int main(void)
{
            printf(":: %f\n", myobj.typeA.myfloat);
            printf(":: %ul\n", myobj.typeA.mylong);
            return 0;
} 
```

Output

```
:: 3.840000
:: 1081459343l 
```

This is little bit crude, however it works in the file scope (but generates warnings).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:30:00.990

You can do this by type-punning through an anonymous union:

```
unsigned int i = ((union { float f; unsigned int i; }){5.0}).i; 
```

Note that this initialiser is not a constant expression and so cannot be used at file scope.

Type-punning through a union is specified to be allowed by the standard in a footnote:

> [c11](/questions/tagged/c11 "show questions tagged 'c11'")
> 
> ### 6.5.2.3 Structure and union members
> 
> 95) If the member used to read the contents of a union object is not the same as the member last used to store a value in the object, the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type as described in 6.2.6 (a process sometimes called ‘‘type punning’’). This might be a trap representation.

From a practical point of view, although you cannot use this method to initialise a file-scope constant, you could write an initialisation function that loads the values into file-scope variables at program or module initialisation time.

You're not going to find a portable method that allows you to calculate the values as a compile-time constant expression, because the object representations covered by section 6.2.6 of the standard only apply at run time. Otherwise, a cross-compiler would be required to *simulate* and not just parametrise the execution environment of its target.

* * *

Addendum: this *is* valid C++, with the condition that the `union` type must be named:

```
union u { float f; unsigned int i; };
unsigned int i = u{5.0}.i; 
```

So if you're willing to write in hybrid C/C++ and compile with a C++ compiler, then you can perform the cast at compile time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:12:32.417

You can use a C99 compound literal:

```
const unsigned long FloatValue =
        *(unsigned long *) &(float) {20.654f}; 
```

Note that the initializer is not a constant expression so `FloatValue` can only be declared at block scope and not at file scope.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:13:38.910

I am assuming that these floats are constants and therefore you could just write a small program to do it as a one off exercise - generate the output as required. From that small program do a cut'n'paste job into the other code.

If you have a lot of them, why not just write a script to create the appropriate file for C.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:12:48.910

You should know somethings about IEEE floating point standards. [http://en.wikipedia.org/wiki/IEEE_floating-point_standard](http://en.wikipedia.org/wiki/IEEE_floating-point_standard)

get the fractions bits and get the exponent bits and process them into a long

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T16:47:58.683

You could achieve your purpose by defining a float constant and then a macro:

```
const float _FloatValue = 20.654;
#define FloatValueL *((unsigned long *) &_FloatValue) 
```

# android - 触摸画圆

> ID：11796357
> 
> 赞同：10
> 
> 时间：2012-08-03T13:07:56.893
> 
> 标签：android, android-layout

我正在尝试在用户触摸屏幕的地方画一个圆圈。

```
public class MainActivity extends Activity implements OnTouchListener {

LinearLayout layout;
float x=0;
float y=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);
    layout=(LinearLayout)findViewById(R.id.layout);
    layout.addView(new CustomView(MainActivity.this));
}

public class CustomView extends View {

    Bitmap mBitmap;
    Paint paint;
    public CustomView(Context context) {
        super(context);
        mBitmap = Bitmap.createBitmap(400, 800, Bitmap.Config.ARGB_8888);
        paint=new Paint();
        paint.setColor(Color.RED);
        paint.setStyle(Style.FILL);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.setBitmap(mBitmap);
        canvas.drawCircle(x, y, 50, paint);
        Toast.makeText(MainActivity.this, "DDD", 1).show();
    }
}

@Override
public boolean onTouch(View v, MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
    layout.invalidate();

    }
    return false;
}} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T13:17:55.827

我会这样做：

```
public class TestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new DrawingView(this));
    }

    class DrawingView extends SurfaceView {

        private final SurfaceHolder surfaceHolder;
        private final Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

        public DrawingView(Context context) {
            super(context);
            surfaceHolder = getHolder();
            paint.setColor(Color.RED);
            paint.setStyle(Style.FILL);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN) {
                if (surfaceHolder.getSurface().isValid()) {
                    Canvas canvas = surfaceHolder.lockCanvas();
                    canvas.drawColor(Color.BLACK);
                    canvas.drawCircle(event.getX(), event.getY(), 50, paint);
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T13:39:55.683

这是您的版本，其中包含使其工作的修复：

```
public class MainActivity extends Activity {

LinearLayout layout;
float x = 0;
float y = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    layout=(LinearLayout)findViewById(R.id.layout);
    layout.addView(new CustomView(MainActivity.this));
}

public class CustomView extends View {

    Bitmap mBitmap;
    Paint paint;

    public CustomView(Context context) {
        super(context);
        mBitmap = Bitmap.createBitmap(400, 800, Bitmap.Config.ARGB_8888);
        paint = new Paint();
        paint.setColor(Color.RED);
        paint.setStyle(Style.FILL);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawCircle(x, y, 50, paint);
    }

    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            x = event.getX();
            y = event.getY();
            invalidate();
        }
        return false;
    }
}

} 
```

# rest - RestTemplate - 处理自定义错误消息

> ID：11796358
> 
> 赞同：0
> 
> 时间：2012-08-03T13:07:57.310
> 
> 标签：rest, error-handling, resttemplate

我有 Restful API，它在找不到项目时响应 404 错误，但根据未找到项目的原因（未知、不可用、...）有不同的消息，它是使用 Spring MVC 以这种方式完成的：

```
response.sendError(HttpServletResponse.SC_NOT_FOUND, "NOT_AVAILABLE"); 
```

（这适用于任何浏览器，以“NOT_AVAILABLE”作为消息显示 404 错误）

现在，我想使用 Spring RestTemplate 将该消息返回到我的 Java 代码中以管理它们。我试过这个：

```
try {
    rest.put(apiRootUrl + "/item/{itemId}", null, itemId);
} catch (HttpClientErrorException e) {
    if (NOT_FOUND == e.getStatusCode()) {
        switch (MyErrorCode.valueOf(e.getStatusText())) {
            case NOT_AVAILABLE:
                return displayNotAvailableError();
            case UNKNOWN:
                return displayUnknownError();
            default:
                // ...
        }
    }
} 
```

但在 中`getStatusText()`，我总是得到 NOT FOUND 标签（来自 404）而不是我的自定义值。

有人知道是否可以从 404 错误中检索自定义消息？因此如何？

多谢！

**编辑：**我在 Tomcat 服务器（发送 404 HTML 页面）上运行，这不会附加 Weblogic 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:09:25.997

OK，再挖一点，解决方法其实很简单！

Tomcat 将其默认的 404 页面发回给我，我只需要告诉它使用我的页面！

这该怎么做：

*   像这样创建一个 404.jsp 页面：

    ```
    <%@ page pageEncoding="UTF-8" %>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <c:out value="${requestScope['javax.servlet.error.message']}"/> 
    ```

*   在您的 web.xml 中引用它

    ```
    <error-page>
        <error-code>404</error-code>
        <location>/error/404.jsp</location>
    </error-page> 
    ```

现在，您可以使用`e.getStatusText()`

# php - php文件读取函数

> ID：11796366
> 
> 赞同：-2
> 
> 时间：2012-08-03T13:08:16.737
> 
> 标签：php, file-read

我正在使用以下文件读取

```
$myFile = "file.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData; 
```

问题是 file.txt 是动态生成的并且在不同的文件夹中，所以我如何在 fopen 中调用它？我在尝试

```
$fh = fopen(/path/to/$myFile, 'r'); 
```

但显然它不起作用并给我错误

```
PHP Parse error:  syntax error, unexpected '/', 
```

如何纠正这一点并包括我的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:09:58.953

这是一种更简单的方法：

```
$theData = file_get_contents("/path/to/file/" . $myFile); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:09:57.513

首先，使用起来会更简单[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)

至于文件路径，它需要是一个字符串，即：

```
$fh = fopen("/path/to/".$myFile, 'r'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:09:38.923

```
$myPath = "/path/to/file/";
$myFile = "file.txt";
$fh = fopen($myPath.$myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData; 
```

我还没有测试它，但我想它会这样工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:09:40.880

我试图以自己的方式解决这个问题。希望这会帮助你。

```
<?php

$myFile = "folder/file.txt";
$myHandle = fopen($myFile, "r");

$myData = fread($myHandle, filesize($myFile));
$rows = explode(" ", $myData);

foreach($rows as $row) 
{
    print $row;
}

fclose($myHandle);

?> 
```

# ruby-on-rails - rails button_to --- 替代文字

> ID：11796369
> 
> 赞同：2
> 
> 时间：2012-08-03T13:08:22.117
> 
> 标签：ruby-on-rails

我需要向 button_to 标记添加替代文本。

这是我的按钮代码：

```
 <%= button_to 'Reject' , reject_paper_path(paper), :confirm => 'Are you sure you want to reject this paper?' %> 
```

我希望在用户将鼠标悬停在按钮上时出现文本。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:14:01.660

知道了：

```
<%= button_to 'Reject' , reject_paper_path(paper), :title=> "title text", :confirm => 'Are you sure you want to reject this paper?' %> 
```

您只需要添加一个标题选项。

希望它可能对其他人有所帮助。

# java - 检查一个列表是否包含另一个列表中的元素

> ID：11796371
> 
> 赞同：147
> 
> 时间：2012-08-03T13:08:26.157
> 
> 标签：java, list, find, element

我有两个列表，其中包含不同的对象。

```
List<Object1> list1;
List<Object2> list2; 
```

我想检查 list1 中的元素是否存在于 list2 中，基于特定属性（Object1 和 Object2 具有（除其他外），一个相互属性（类型为 Long），名为 attributeSame）。

现在，我这样做：

```
boolean found = false;
for(Object1 object1 : list1){
   for(Object2 object2: list2){
       if(object1.getAttributeSame() == object2.getAttributeSame()){
           found = true;
           //also do something
       }
    }
    if(!found){
        //do something
    }
    found = false;
} 
```

但我认为有更好更快的方法来做到这一点:) 有人可以提议吗？

谢谢！

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-08-03T15:59:46.040

如果您只需要测试基本相等，可以使用基本JDK完成，而无需修改一行中的输入列表

```
!Collections.disjoint(list1, list2); 
```

如果您需要测试特定属性，那就更难了。我建议，默认情况下，

```
list1.stream()
   .map(Object1::getProperty)
   .anyMatch(
     list2.stream()
       .map(Object2::getProperty)
       .collect(toSet())
       ::contains) 
```

...它收集不同的值`list2`并测试每个值`list1`的存在。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2019-04-28T11:24:22.307

为了缩短 Narendra 的逻辑，你可以使用这个：

```
boolean var = lis1.stream().anyMatch(element -> list2.contains(element)); 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-08-03T13:19:17.423

您可以使用[Apache Commons CollectionUtils](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#containsAny-java.util.Collection-java.util.Collection-)：

```
if(CollectionUtils.containsAny(list1,list2)) {  
    // do whatever you want
} else { 
    // do other thing 
} 
```

这假设您已经为您的自定义对象正确地重载了​​ equals 功能。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-03T13:23:17.163

有一种命名**方法**，但有一些**副作用**供您[参考](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)`Collection``retainAll`

 **> 仅保留此列表中包含在指定集合中的元素（可选操作）。换句话说，从这个列表中删除所有不包含在指定集合中的元素。
> 
> 如果此列表因调用而更改，则为 true

就像是

```
boolean b = list1.retainAll(list2); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-02-19T16:57:07.827

Loius的回答是正确的，我只想补充一个例子：

```
listOne.add("A");
listOne.add("B");
listOne.add("C");

listTwo.add("D");
listTwo.add("E");
listTwo.add("F");      

boolean noElementsInCommon = Collections.disjoint(listOne, listTwo); // true 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-03T13:10:17.843

为了使其更快，您可以添加休息时间；这样，如果 found 设置为 true，循环将停止：

```
boolean found = false;
for(Object1 object1 : list1){
   for(Object2 object2: list2){
       if(object1.getAttributeSame() == object2.getAttributeSame()){
           found = true;
           //also do something  
           break;
       }
    }
    if(!found){
        //do something
    }
    found = false;
} 
```

如果您将使用映射而不是列表作为键属性相同，那么您可以更快地检查一个映射中的值，如果在第二个映射中有对应的值或没有相应的值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-03T13:13:00.070

根据 JavaDoc 的[`.contains(Object obj)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)：

> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。

因此，如果您`.equals()`为给定对象覆盖您的方法，您应该能够：`if(list1.contains(object2))...`

如果元素是唯一的（即具有不同的属性），您可以覆盖`.equals()`and`.hashcode()`并将所有内容存储在 [`HashSets`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html). 这将允许您检查一个是否在恒定时间内包含另一个元素。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-03T13:20:21.570

更快的方式将需要额外的空间。

例如：

1.  将一个列表中的所有项目放入一个 HashSet （您必须自己实现哈希函数才能使用 object.getAttributeSame() ）

2.  浏览另一个列表并检查 HashSet 中是否有任何项目。

这样每个对象最多被访问一次。并且 HashSet 足够快，可以在 O(1) 中检查或插入任何对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-03T13:27:39.560

你能定义你持有的数据类型吗？是大数据吗？排序了吗？我认为您需要根据数据考虑不同的效率方法。

例如，如果您的数据很大且未排序，您可以尝试通过索引将两个列表一起迭代，并将每个列表属性存储在另一个列表助手中。然后您可以通过帮助列表中的当前属性进行交叉检查。

祝你好运

编辑：我不建议重载equals。它很危险，可能与您的对象 oop 含义相反。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-13T07:04:40.830

[org.springframework.util.CollectionUtils](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/CollectionUtils.html)

```
boolean containsAny(java.util.Collection<?> source, java.util.Collection<?> candidates)

Return true if any element in 'candidates' is contained in 'source'; otherwise returns false 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-15T10:50:07.143

有了**`java 8`**，我们可以像下面这样检查一个列表是否包含另一个列表的任何元素

```
boolean var = lis1.stream().filter(element -> list2.contains(element)).findFirst().isPresent(); 
```**

# django - django - 在视图中设置upload_to

> ID：11796383
> 
> 赞同：0
> 
> 时间：2012-08-03T13:09:33.877
> 
> 标签：django, file-upload, filefield

我有一个用于存储文件的模型：

```
class AFile(models.Model):
    path = models.CharField(max_length=256)
    name = models.CharField(max_length=256)
    file = models.FileField(upload_to=get_path) 
```

有许多保存文件的视图。我想要一个单独的路径。所以我把路径放在模型中并在获取路径函数中使用它。像这样：

```
afile = AFile(path='blah/foo/', name='filex.jpg')
afile.save() 
```

所以文件在正确的位置。但我真的不想将路径和名称字段存储在我的数据库中，它只是用来生成路径。有什么方法可以在没有额外模型字段的情况下实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:11:15.273

这里的问题是只有在模型上定义or`upload_to`时才可用。对该字段的任何后续访问都会返回一个实例，该实例无权访问定义的. 总而言之，在最初定义方法后，无法更改方法。`FileField``ImageField``FieldFile``upload_to`

但是，您也许可以围绕它进行某种最终运行。请注意，我实际上并没有尝试过，但它*应该可以*工作：

首先在您的模型上定义一个方法，该方法将具有在模型上设置实例变量的简单任务：

```
def set_upload_to_info(self, path, name):
    self.upload_to_info = (path, name) 
```

然后，在您的`upload_to`方法中，您可以测试这些属性是否存在，并在它们存在时使用它们：

```
def my_upload_to(instance, filename):
    if hasattr(instance, 'upload_to_info'):
        path, name = instance.upload_to_info
        # do something and return file path
    else:
        # standard upload_to bit here 
```

那么在你看来，你只需要在保存模型*之前*调用你创建的方法：

```
afile.set_upload_to_info(path, name)
afile.save() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-13T10:20:52.397

上传到参数可以通过在保存模型之前更改`field.upload_to`属性来更改。`FileField`就我而言，我将基于类的视图与表单一起使用。所以在模型实例之前。我使用下面的代码将上传更改为路径。

```
with transaction.atomic():
        model_instance = form.save(commit=False)
        model_instance.creator = self.request.user
        model_instance.img_field.field.upload_to = 'directory/'+model_instance.name+'/logo'
        self.object = form.save() 
```

简而言之，如果您的图像字段被命名为 imageupload，`imageupload.field.upload_to`请相应地更改以指向您需要的路径。请告知此方法是否解决了您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:18:59.817

为什么不从实例生成路径？

```
def generate_path(instance, filename):
    return os.path.join("hardcoded_prefix", instance.name, filename)

class AFile(models.Model):
    name = models.CharField(max_length=256)
    file = models.FileField(upload_to=generate_path) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T07:40:55.940

解决办法是放入一些非持久化的字段，仍然在get_path方法中引用它们

```
class AFile(models.Model):
    name = models.CharField(max_length=256)
    file = models.FileField(upload_to=get_path)
    path = '' 
```

# jquery - 表单提交不发布文本输入字段

> ID：11796393
> 
> 赞同：1
> 
> 时间：2012-08-03T13:10:14.253
> 
> 标签：jquery, simplemodal

我尝试以 eric martins 简单模式提交表单。一切正常，只是表单没有提交我在文本字段中输入的数量。有没有人对此有一个巧妙的解决方案？

我的 Jquery 已更新以获得更好的视图，如下面的帖子中所述

```
 <script type="text/javascript">
 function image_id_convert(image_id)
 {
image_id = parseInt(image_id, 10).toString(35);
while (image_id.length < 6)
{
  image_id = 'z' + image_id;
}
return image_id;
}

$('.opener').click(function (event) {

  var url = $(this).attr("href")+'/?format=json';

  $('#formVariants').modal({
    onOpen: function (dialog) {
            dialog.overlay.fadeIn('fast', function () {
                dialog.container.slideDown('fast', function () {
                    dialog.data.fadeIn('fast');
                });
            });
        },
    onShow:function(dialog) {      

      $.getJSON(url, function(data) {           

        var contentHtml = '';

        $.each(data.product, function(index, product){

          var image = 'http://cdn.webshopapp.com/i/' + image_id_convert(data.product.image) + '/160x120x2/image.jpg';

          contentHtml =
            '<img src="' + image + '"/>' +
            '<div class="variantsContainer">' +
            '<div class="pop_headerContainer">' +  
            '<div class="pop_title"><h3>' + data.product.fulltitle + '</h3></div>' +
            '<div class="pop_code">Artikelcode:' + data.product.code + '</div>' +
            '<div class="pop_price">€' + data.product.price.price + '</div>' +
            '</div>';
        });

         $.each(data.product.variants, function(index, variant){     

          contentHtml = contentHtml +
            '<form class="formProduct" id="formProduct">' +
            '<div class="variants">' +
            '<div class="pop_variantTitle"><label>' + variant.title + '</label></div>' +
            '<div class="pop_variantQuantity"><label">{{ 'Quantity' | t }}: <input type="text" name="quantity" id="formProductQuantity" value="50" /></label></div>' +
            '<div class="pop_variantAdd"><input type="submit" id="submit" class="button green" value="{{ 'Add to cart' | t }}"/></div>' +
            '</form>';

          contentHtml = contentHtml +
            '</div>';       
           // action="{{ 'cart/add/' | url }}' + variant.id + '" method="post"
           /* quantity = $('#formProductQuantity').val();
           $('#formProductQuantity').val(quantity);*/

         });     

        $('.formProductContent').html(contentHtml);            
      });  
    }

  });
  return false
})

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:16:47.340

您正在尝试在两个地方提交数量 - 检查您的 URL（表单操作）。如果您需要两者，请从 URL 中删除数量或重命名其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:27:19.513

你可以随时尝试

```
var value = $("input[name=quantity]").val(); 
```

或者尝试将 var 值移动到 click 函数中

```
$(".submit").click(function(e){
    e.preventDefault();

    var value = $("input[name=quantity]").val();
    $('form#formProduct').submit()
}); 
```

# objective-c - 带静态轴的核心图

> ID：11796402
> 
> 赞同：0
> 
> 时间：2012-08-03T13:10:59.500
> 
> 标签：objective-c, ios, core-plot

如何使两个轴都静止，但绘图可移动？我的意思是只移动图（轴内是什么），而不是轴。我的客户讨厌那个轴，他们的标签一起移动。有可能做出这样的事情，所以我的客户会很高兴吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:37:21.200

`axisConstraints`在每个轴上设置。

```
x.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0];
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# android - 每当活动开始时，AdMob 应用中的 NullPointerException

> ID：11796403
> 
> 赞同：2
> 
> 时间：2012-08-03T13:11:05.553
> 
> 标签：android, admob

在添加了 AdMob 的 Android 应用程序午餐后，我收到了这样的错误，尽管广告显示正确，我想修复它...你能帮忙吗？

```
08-03 14:47:28.296: E/Ads(3247): An error occurred while destroying an AdWebView:
08-03 14:47:28.296: E/Ads(3247): java.lang.NullPointerException
08-03 14:47:28.296: E/Ads(3247):    at android.webkit.WebView.setWebViewClient(WebView.java:5084)
08-03 14:47:28.296: E/Ads(3247):    at com.google.ads.internal.AdWebView.destroy(SourceFile:252)
08-03 14:47:28.296: E/Ads(3247):    at com.google.ads.internal.c$e.run(SourceFile:191)
08-03 14:47:28.296: E/Ads(3247):    at android.os.Handler.handleCallback(Handler.java:605)
08-03 14:47:28.296: E/Ads(3247):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-03 14:47:28.296: E/Ads(3247):    at android.os.Looper.loop(Looper.java:137)
08-03 14:47:28.296: E/Ads(3247):    at android.app.ActivityThread.main(ActivityThread.java:4514)
08-03 14:47:28.296: E/Ads(3247):    at java.lang.reflect.Method.invokeNative(Native Method)
08-03 14:47:28.296: E/Ads(3247):    at java.lang.reflect.Method.invoke(Method.java:511)
08-03 14:47:28.296: E/Ads(3247):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-03 14:47:28.296: E/Ads(3247):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-03 14:47:28.296: E/Ads(3247):    at dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

在 oncreate() 内部：

> ```
>  // Create the adView            
>       adView = new AdView(this, AdSize.BANNER,
>       ADMOB_UNIT_ID);
> 
>       // Lookup your LinearLayout assuming it’s been given            // the
>       attribute android:id="@+id/mainLayout"          RelativeLayout layout =
>       (RelativeLayout) findViewById(R.id.main_relative_layout);
> 
>       // Add the adView to it             layout.addView(adView);
> 
>       AdRequest adRequest = new AdRequest();
> 
>       if (DebugIndicator.DEBUG) {
>           adRequest.addTestDevice(AdRequest.TEST_EMULATOR); // Emulator
>           adRequest.addTestDevice(deviceid); // Test Android Device
>           adRequest.addTestDevice("c16079314a5512f"); // Test Android
>                                                       // Device
>           adRequest.addTestDevice("2cf3765d"); // Test Android Device
>           adRequest.addTestDevice("FC4AA4F51610C2029A55E3E9A323617A");            }
> 
>       // Initiate a generic request to load it with an ad
>       adView.loadAd(adRequest); 
> ```

还添加到活动中：

```
@Override
public void onDestroy() {
    if (adView != null) {
        adView.destroy();
    }
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:30:34.460

这是 AdMob SDK 捕获并记录为错误的 Android WebView 错误崩溃。它应该被记录为警告。它不会使应用程序崩溃，也不应该影响广告重新加载。

# perl - 将 MS-Office 转换为 pdf

> ID：11796414
> 
> 赞同：-2
> 
> 时间：2012-08-03T13:11:53.613
> 
> 标签：perl, pdf, converter

我正在使用 OfficeToPDF 将 MS-Office 文件转换为 pdf。但是，我只能运行命令：

```
OfficeToPDF test.doc test.pdf 
```

在 cmd (windows) 中

我想将此代码嵌入到我的 cgi 文件 (Perl) 中。谁能告诉我如何做到这一点，谢谢！

（我用了：

```
system("OfficeToPDF test.doc test.pdf"); 
```

但似乎它不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:22:28.573

尝试：

*   使用完整路径`OfficeToPDF`和目标 PDF 位置，因为通常 CGI 脚本在另一个用户上下文中运行，
*   检查，CGI 用户对这两个文件都有读写权限（当然还有执行`OfficeToPDF`.

但这当然取决于“它不起作用”的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:17:28.790

这应该可以，但是您的环境参数可能设置不正确，您应该包含完整路径（或正确的相对路径）并查看是否可以解决问题。如果不是，您可能想要发布您的调试日志，或启用详细输出。在 cgi 模式下，出于安全原因，您的 perl 也可能未设置为执行 shell 命令，日志将有助于澄清这一点。

# html - 正文不会扩展以包含相对定位的元素

> ID：11796415
> 
> 赞同：3
> 
> 时间：2012-08-03T13:11:54.360
> 
> 标签：html, css, css-float, css-position

我正在尝试设计一个相对定位`div`的 ，它又包含两个`div`s。没有一个 child`div`有固定的高度，但是它们会随着内容的变化而变化，所以 parent`div`会随着 child div 的更高而扩展。现在设计工作正常，但是当我用 Firebug 分析代码时，我看到在 Firebug 中将鼠标悬停在`body`标签上时，整个屏幕顶部只有一小部分显示为主体。侧面板确认，body的宽度还可以，但高度为0。这意味着父级的高度`div`为0，但Firebug告诉我不是，大约是560px。这怎么可能？我知道如果内容是绝对定位的，元素不会随内容扩展，但这里的孩子`div`s 是相对定位的，那么为什么 parent 不随内容展开呢？小提琴位于[http://jsfiddle.net/Cupidvogel/y79NS/6/](http://jsfiddle.net/Cupidvogel/y79NS/6/)。截图（请放大以理解我的观点！这是我在 Firefox 中尝试将代码作为完整的 HTML 页面时）：

![在此处输入图像描述](../Images/17648069c8654dfea05010ddd101d627.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:21:50.087

在您的 CSS 中，`div.clear`您用来尝试清除浮动的 CSS 本身是向左浮动的。这意味着它也不是文档流的一部分，因此无法清除任何内容。

删除`float`可以解决问题：

```
.clear { width: 400px; clear: both; position: relative; } 
```

或者，如果您想`div.clear`因某种原因被浮动，[还有很多其他方法可以清除您的浮动](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)。

编辑：`div.main`高度为 520px，因为它是浮动的，并且浮动元素“捕捉”到其子项的尺寸。如果您`body`向左浮动（请不要；这不是一个好主意），它也会“捕捉”到其子级的尺寸并设置为 520 像素的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:00:27.710

这里发生的是正常的浏览器行为，您浮动 div，因此由于 float 属性，“正常”流程中不再存在。所以 body 的高度为 0，因为 body 无法计算“不在其中”的元素的高度。

将 div class="clear" 移出 div class="main" 并删除 div class="clear" 上的 float 属性，问题解决。

查看：http: [//jsfiddle.net/y79NS/8/](http://jsfiddle.net/y79NS/8/)

# jquery - 在 jQuery 中使用 input:text 选择了所有输入和复选框元素？

> ID：11796434
> 
> 赞同：0
> 
> 时间：2012-08-03T13:13:03.743
> 
> 标签：jquery, html

我有一个带有文本区域、文本、复选框和按钮的表单。我选择的元素如下：

```
$("#frmPersonalInfo :input:not(input[type=radio]):not(input[type=button])").each(function(){  
  //code here
}); 
```

当我省略`not(input[type=radio])`then 无线电元素时，将被选中。我想选择已检查的无线电（活动的）而不是所有无线电输入。有没有办法做到这一点？
Radio HTML 代码如下：

```
<input type="radio" checked="checked" id="txtPersonalInfoMale" name="gender" value="1" />
<input type="radio" id="txtPersonalInfoFemale" name="gender" value="2" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:15:27.803

用于`:checked`选择所有选中的复选框，

```
$("#frmPersonalInfo :input[type=radio]:checked").each(function(){  
  //code here
}); 
```

如果你想选择一些输入类型，那么你可以这样做，你需要自定义它。

**[现场演示](http://jsfiddle.net/rajaadil/AStAT/2/)**

```
$("#frmPersonalInfo :input").not(':button').not(':text').filter(function(){
    if($(this).attr('type') == 'radio' && $(this).attr('checked') == 'checked')
    return $(this);
}).each(function(){
   //Your code here
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:36:46.480

这可能不是最好的方法，但以下应该可以

```
 $("#frmPersonalInfo :input:not(input[type=radio]):not(input[type=button]),#frmPersonalInfo :input[type=radio]:checked").each(function(){  
//code here
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:34:22.187

为了实现我想要的，我做了以下事情：

```
 var cnt=0;
            $("#frmPersonalInfo :input[type=radio]:checked").each(function(){
                    personalInfoArr[cnt++]=$(this).val();
            });
            $("#frmPersonalInfo :input:not(input[type=radio]):not(input[type=button])").each(function(){
                    personalInfoArr[cnt++]=$(this).val();
            }); 
```

有更好的方法吗？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-03T13:19:16.930

不应该是这样吗？为什么所有的：不是？

```
$("#frmPersonalInfo input[type=radio]:selected").each(function(){  
      //code here
}); 
```

伙计，也许我不明白你的问题。jQuery 有一个 ":selected" 选择器。你可以在这里找到所有信息：

[http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

# c# - 将数组写入excel文件

> ID：11796437
> 
> 赞同：0
> 
> 时间：2012-08-03T13:13:08.447
> 
> 标签：c#, excel

我有一个数组列表，`List<float[]>`我想创建 excel 文件，以便我可以通过电子邮件发送数组进行测试。我需要它在 excel 而不是 XML - 序列化不会在这里做。我想在自己的工作表（选项卡）中拥有每个数组 - 这里 CSV 走出窗口:(

有人可以指导我实现它的最佳方法是什么吗？使用`Microsoft.Office.Interop.Excel`似乎对我的需求来说有点过头了，但如果这是最好的方法，我会很感激一个关于如何做到这一点的样本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:17:49.490

您好，您可以按照以下步骤操作

1 添加对 Microsoft.Office.Interop.Excel 的引用；

2 在您的班级中使用 Microsoft.Office.Interop.Excel 添加

3 试试这个代码

阅读

```
 var applicationClass = new Application();
            var workbook = applicationClass.Workbooks.Open(workbookPath, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing
                                , Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
            var worksheet = workbook.GetWorksheet(sheet);
            var usedRange = worksheet.UsedRange;

            for (int i = beginIndexRow; i < usedRange.Rows.Count; i++) 
            {
                var input = (Range)usedRange.Cells[i, 1]; //I read the first column

            }
            workbook.Close(false, workbookPath, null);
            applicationClass.Quit();

            while (Marshal.ReleaseComObject(usedRange) > 0)
            { }
            while (Marshal.ReleaseComObject(worksheet) > 0)
            { }
            while (Marshal.ReleaseComObject(workbook) > 0)
            { }
            while (Marshal.ReleaseComObject(applicationClass) > 0)
            { } 
```

写作

```
 usedRange.Cells[i, 1].Value2 = .....; //I write the first column 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:28:36.293

使用互操作可能是最简单的事情。

如果 l 是您的列表：

```
 Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.ApplicationClass();
    xlApp.Visible = true;
    xlApp.Workbooks.Add(misValue);
    int nWS = xlApp.ActiveWorkbook.Worksheets.Count;
    for (int i = nWS; i < l.Count; i++)
        xlApp.ActiveWorkbook.Worksheets.Add(misValue, misValue, misValue, misValue);
    int iWS = 1;
    foreach (float[] ff in l)
    {
        Microsoft.Office.Interop.Excel.Worksheet ws = (Microsoft.Office.Interop.Excel.Worksheet)xlApp.ActiveWorkbook.Worksheets[iWS++];
        int idxRow = 1;
        foreach (float aFloat in ff)
            ws.Cells[idxRow++, 1] = aFloat;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:30:18.743

我发现[ClosedXML](http://closedxml.codeplex.com/) api 很容易使用并且速度更快，因为它生成 Excel XML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T03:20:42.563

以下是如何在[ClosedXML](http://closedxml.codeplex.com)中执行此操作：

```
var list = new List<float[]>() { new float[] { 1, 2 }, new float[] { 3, 4 } };

var wb = new XLWorkbook();
int i = 1;
foreach (var l in list)
    wb.AddWorksheet("Sheet" + i++).FirstCell().Value = l;

wb.SaveAs("Arrays.xlsx"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:33:41.270

您可以查看 Matt Hidinger 的开源项目 - DoddleReport - “开箱即用，它可以将报告呈现为 Excel、PDF、HTML 和 CSV——当然是完全可插入的”。

它可以从任何 IEnumerable 数据源生成表格报告

# mysql - 为什么我的查询结果的总数没有加起来？

> ID：11796438
> 
> 赞同：2
> 
> 时间：2012-08-03T13:13:10.217
> 
> 标签：mysql, sql

我有三个从数据库中获取统计信息的查询，但我的结果的总数并没有正确加起来。如果我自己做数学，这就是我得到的： `// 440728 / 1128 = 390.72`

但是，以下是我的查询返回的内容：

```
SELECT * FROM facebook_accts
         WHERE user_id IN (SELECT id FROM  `user_accts` WHERE owner_id = '121') 
// returns 1128

SELECT sum(friend_count) FROM facebook_accts
                         WHERE user_id IN
                            (SELECT id FROM  `user_accts` WHERE owner_id = '121') 
// returns 440728

SELECT avg(friend_count) FROM facebook_accts
                         WHERE user_id IN
                            (SELECT id FROM  `user_accts` WHERE owner_id = '121') 
// returns 392.11 (number formatted to two decimal places by php) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:22:55.500

这可能是因为列`friend_count`有一些`NULL`值，因为`SUM`和`AVG`功能忽略`NULL`值。看[这里](https://stackoverflow.com/questions/1659977/mysql-count-vs-mysql-select-which-one-is-faster)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:20:41.047

我猜这 1128 行包含 NULL 值（AVG 和 SUM 忽略）。

# php - 用于订阅的 PayPal IPN - 部分工作

> ID：11796442
> 
> 赞同：1
> 
> 时间：2012-08-03T13:13:18.743
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox, paypal-subscriptions

我正在运行 PayPal 订阅，我正在尝试根据收到的响应触发数据库写入。直到昨天，代码工作正常。但今天，奇怪的是，代码在收到付款后停止发送电子邮件。我不确定这是 PayPal 方面的故障还是我的故障。我不认为我的代码有问题，因为我从中删除了很多代码，并且我目前正在使用 IPN 的基本版本进行支付跟踪，但即便如此，它也不会插入数据库或触发电子邮件。

我还搜索了 SO 以寻找可能的解决方案，甚至实施了我发现的与我的答案相近的解决方案。但不幸的是，他们没有工作。所以这是我的IPN代码：

```
<?php
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}
// post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

// If testing on Sandbox use:
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$business = $_POST['business'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$mc_gross = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$receiver_id = $_POST['receiver_id'];
$quantity = $_POST['quantity'];
$num_cart_items = $_POST['num_cart_items'];
$payment_date = $_POST['payment_date'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$payment_type = $_POST['payment_type'];
$payment_status = $_POST['payment_status'];
$payment_gross = $_POST['payment_gross'];
$payment_fee = $_POST['payment_fee'];
$settle_amount = $_POST['settle_amount'];
$memo = $_POST['memo'];
$payer_email = $_POST['payer_email'];
$txn_type = $_POST['txn_type'];
$payer_status = $_POST['payer_status'];
$address_street = $_POST['address_street'];
$address_city = $_POST['address_city'];
$address_state = $_POST['address_state'];
$address_zip = $_POST['address_zip'];
$address_country = $_POST['address_country'];
$address_status = $_POST['address_status'];
$item_number = $_POST['item_number'];
$tax = $_POST['tax'];
$option_name1 = $_POST['option_name1'];
$option_selection1 = $_POST['option_selection1'];
$option_name2 = $_POST['option_name2'];
$option_selection2 = $_POST['option_selection2'];
$for_auction = $_POST['for_auction'];
$invoice = $_POST['invoice'];
$custom = $_POST['custom'];
$notify_version = $_POST['notify_version'];
$verify_sign = $_POST['verify_sign'];
$payer_business_name = $_POST['payer_business_name'];
$payer_id =$_POST['payer_id'];
$mc_currency = $_POST['mc_currency'];
$mc_fee = $_POST['mc_fee'];
$exchange_rate = $_POST['exchange_rate'];
$settle_currency  = $_POST['settle_currency'];
$parent_txn_id  = $_POST['parent_txn_id'];
$pending_reason = $_POST['pending_reason'];
$reason_code = $_POST['reason_code'];

// subscription specific vars

$subscr_id = $_POST['subscr_id'];
$subscr_date = $_POST['subscr_date'];
$subscr_effective  = $_POST['subscr_effective'];
$period1 = $_POST['period1'];
$period2 = $_POST['period2'];
$period3 = $_POST['period3'];
$amount1 = $_POST['amount1'];
$amount2 = $_POST['amount2'];
$amount3 = $_POST['amount3'];
$mc_amount1 = $_POST['mc_amount1'];
$mc_amount2 = $_POST['mc_amount2'];
$mc_amount3 = $_POST['mcamount3'];
$recurring = $_POST['recurring'];
$reattempt = $_POST['reattempt'];
$retry_at = $_POST['retry_at'];
$recur_times = $_POST['recur_times'];
$username = $_POST['username'];
$password = $_POST['password'];

//auction specific vars

$for_auction = $_POST['for_auction'];
$auction_closing_date  = $_POST['auction_closing_date'];
$auction_multi_item  = $_POST['auction_multi_item'];
$auction_buyer_id  = $_POST['auction_buyer_id'];

$notify_email =  "myemail@domain.com"; //email address to which debug emails are sent to
$DB_Server = "host"; //your MySQL Server
$DB_Username = "user"; //your MySQL User Name
$DB_Password = "password"; //your MySQL Password
$DB_DBName = "dbname"; //your MySQL Database Name

if (!$fp) 
{
    // HTTP ERROR
} 
else 
{

    mail($notify_email, "IPN Triggered 1", "IPN Triggered 1");  

    fputs ($fp, $header . $req);

    while (!feof($fp)) 
    {
        //Already used this
        //$res = fgets ($fp, 1024);

        //Using this to see if it sends response
        $res = stream_get_contents($fp, 1024);

        if (strcmp ($res, "VERIFIED") == 0) 
        {   
            mail($notify_email, "VERIFIED 1", "VERIFIED 1");

            //create MySQL connection
            $Connect = mysql_connect($DB_Server, $DB_Username, $DB_Password)
            or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno());

            //select database
            $Db = @mysql_select_db($DB_DBName, $Connect)
            or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno());

            $fecha = date("m")."/".date("d")."/".date("Y");
            $fecha = date("Y").date("m").date("d");

            //check if transaction ID has been processed before
            $checkquery = "select txnid from paypal_payment_info where txnid='".$txn_id."'";
            $sihay = mysql_query($checkquery) or die("Duplicate txn id check query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
            $nm = mysql_num_rows($sihay);

            if ($nm == 0)
            {
                //execute query
                if ($txn_type == "cart")
                {
                    $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";

                     $result = mysql_query($strQuery) or die("Cart - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

                     for ($i = 1; $i <= $num_cart_items; $i++) 
                     {
                         $itemname = "item_name".$i;
                         $itemnumber = "item_number".$i;
                         $on0 = "option_name1_".$i;
                         $os0 = "option_selection1_".$i;
                         $on1 = "option_name2_".$i;
                         $os1 = "option_selection2_".$i;
                         $quantity = "quantity".$i;

                         $struery = "insert into paypal_cart_info(txnid,itemnumber,itemname,os0,on0,os1,on1,quantity,invoice,custom) values ('".$txn_id."','".$_POST[$itemnumber]."','".$_POST[$itemname]."','".$_POST[$on0]."','".$_POST[$os0]."','".$_POST[$on1]."','".$_POST[$os1]."','".$_POST[$quantity]."','".$invoice."','".$custom."')";
         $result = mysql_query($struery) or die("Cart - paypal_cart_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

                     }
                }
                else
                {
                     $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,itemnumber,itemname,os0,on0,os1,on1,quantity,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$item_number."','".$item_name."','".$option_name1."','".$option_selection1."','".$option_name2."','".$option_selection2."','".$quantity."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";

                     $result = mysql_query("insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,itemnumber,itemname,os0,on0,os1,on1,quantity,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$item_number."','".$item_name."','".$option_name1."','".$option_selection1."','".$option_name2."','".$option_selection2."','".$quantity."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')") or die("Default - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
                }

            // send an email in any case
             //echo "Verified";
                mail($notify_email, "VERIFIED IPN", "$res\n $req\n $strQuery\n $struery\n  $strQuery2");
            }
            else 
            {
                // send an email
                mail($notify_email, "VERIFIED DUPLICATED TRANSACTION", "$res\n $req \n $strQuery\n $struery\n  $strQuery2");
            }

            //subscription handling branch
            if ( $txn_type == "subscr_signup"  ||  $txn_type == "subscr_payment"  ) 
            {
                // insert subscriber payment info into paypal_payment_info table
                $strQuery = "insert into paypal_payment_info(paymentstatus,buyer_email,firstname,lastname,street,city,state,zipcode,country,mc_gross,mc_fee,memo,paymenttype,paymentdate,txnid,pendingreason,reasoncode,tax,datecreation) values ('".$payment_status."','".$payer_email."','".$first_name."','".$last_name."','".$address_street."','".$address_city."','".$address_state."','".$address_zip."','".$address_country."','".$mc_gross."','".$mc_fee."','".$memo."','".$payment_type."','".$payment_date."','".$txn_id."','".$pending_reason."','".$reason_code."','".$tax."','".$fecha."')";
                $result = mysql_query($strQuery) or die("Subscription - paypal_payment_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

                 // insert subscriber info into paypal_subscription_info table
                $strQuery2 = "insert into paypal_subscription_info(subscr_id , sub_event, subscr_date ,subscr_effective,period1,period2, period3, amount1 ,amount2 ,amount3,  mc_amount1,  mc_amount2,  mc_amount3, recurring, reattempt,retry_at, recur_times, username ,password, payment_txn_id, subscriber_emailaddress, datecreation) values ('".$subscr_id."', '".$txn_type."','".$subscr_date."','".$subscr_effective."','".$period1."','".$period2."','".$period3."','".$amount1."','".$amount2."','".$amount3."','".$mc_amount1."','".$mc_amount2."','".$mc_amount3."','".$recurring."','".$reattempt."','".$retry_at."','".$recur_times."','".$username."','".$password."', '".$txn_id."','".$payer_email."','".$fecha."')";
                $result = mysql_query($strQuery2) or die("Subscription - paypal_subscription_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());

                mail($notify_email, "VERIFIED IPN", "$res\n $req\n $strQuery\n $struery\n  $strQuery2");

            }
        }

        // if the IPN POST was 'INVALID'...do this
        else if (strcmp ($res, "INVALID") == 0) 
        {
            // log for manual investigation
            mail($notify_email, "INVALID IPN", "$res\n $req");
        }
    }

    fclose ($fp);
}
?> 
```

我注意到，直到下一行，代码工作正常：`mail($notify_email, "IPN Triggered 1", "IPN Triggered 1");`我收到这封电子邮件，主题行**IPN Triggered 1**。所以直到这条线，它工作得很好。

一旦它进入 while 循环，它就**不会**触发邮件。有一个邮件功能，`if (strcmp ($res, "VERIFIED") == 0)`但它没有被触发。昨天还可以，今天不行！！！`while`不会触发循环内的任何邮件功能。

**可以做些什么来解决这个问题，以便我可以执行这两个操作，即写入数据库和发送邮件？**

**编辑1：**

好的，我剥离了插入数据库的代码，它的行为仍然相同。我真的觉得 PayPal Sandbox 没有发送响应。任何人都可以确认这一点吗？

我修改的另一半代码现在看起来像这样：

```
if (!$fp) 
{
    // HTTP ERROR
} 
else 
{

    mail($notify_email, "IPN Triggered 1", "IPN Triggered 1");  

    fputs ($fp, $header . $req);

    while (!feof($fp)) 
    {
        //Already used this
        //$res = fgets ($fp, 1024);

        //Using this to see if it sends response
        $res = stream_get_contents($fp, 1024);

        if (strcmp ($res, "VERIFIED") == 0) 
        {   
            mail($notify_email, "VERIFIED 1", "VERIFIED 1");

        }
        // if the IPN POST was 'INVALID'...do this
        else if (strcmp ($res, "INVALID") == 0) 
        {
            // log for manual investigation
            mail($notify_email, "INVALID IPN", "$res\n $req");
        }
    }

    fclose ($fp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:27:00.363

解决了。这是修改后的代码：

```
<?php
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
$req .= "&$key=$value";
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n"; 
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

if (!$fp) 
{
// HTTP ERROR

} 
else 
{
    fputs ($fp, $header . $req);

    while (!feof($fp)) 
    {
        $res = fgets ($fp, 1024);

        if (strcmp ($res, "VERIFIED") == 0) 
        {
            mail($notify_email, "VERIFIED 1", "VERIFIED 1");

        }
        else if (strcmp ($res, "INVALID") == 0) 
        {

            mail($notify_email, "INVALID IPN", "$res\n $req");
        }
    }

    fclose ($fp);
}
?> 
```

# ios - Facebook 应用请求未显示在 iOS 设备上？

> ID：11796445
> 
> 赞同：8
> 
> 时间：2012-08-03T13:13:28.190
> 
> 标签：ios, facebook

我已经通过 Facebook 的 API 从 iPad 应用程序向测试 Facebook 帐户发送了应用程序邀请。当我在我的电脑上登录测试帐户时，应用程序请求就在那里。

当我在 iPad 上（通过 Safari 或通过 Facebook 应用程序）登录测试帐户时，我可以在应用程序中心选项卡旁边看到数字“1”，但是当我单击它并转到应用程序中心时，没有要求。事实上，我在 iOS 版 Facebook 上看不到任何专门处理请求的应用中心区域——只有社交精选和热门应用。对此有何解释？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-03T15:20:24.267

这是由于 Facebook 应用程序设置页面上的配置不正确造成的。在设置应用程序时，您需要确保正确设置以下内容。

转到`developers.facebook.com`然后选择“应用程序”。编辑您的应用程序并填写以下内容..

*   iOS App Bundle（认为它不是必需的，但请填写，这是来自 Xcode (com.companyname.appname) 的 bundle id）

*   iPhone/iPad App Store ID - 这是必需的，其中之一必须填写有效的应用商店 ID。当您使用 iTunes Connect 创建应用程序时，您会得到此信息。如果您创建一个应用程序，并在它要求您提交二进制文件时填写详细信息，它将生成 Apple 所说的 Apple ID（或 iTunes Id？）。它只是一个长整数值。它不一定是对应的应用程序，如果您已经在应用程序商店中有应用程序，只需登录到 iTunes 连接并使用现有的进行测试。

*   为 iOS SSO 配置 - 已启用

*   为深度链接配置 - 已启用

当用户在 iOS 上单击应用程序通知时，您从 Facebook 获得的唯一功能是用户被重定向到应用程序（如果已安装）或应用程序商店（如果未安装）。此外，如果您希望您的应用通知显示在桌面上，您将需要在“Facebook 上的应用”部分下的 Canvas URL。

在我的测试中，我必须有一个画布 URL 才能让 iOS 通知正常工作，但我不确定这是否是 Facebook 的错误或预期的行为，所以如果它不适用于仅启用 iOS，请在 Facebook 上启用应用程序如果您没有，请插入一个随机网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T08:54:39.603

我只是认为这种症状可能还有另一个原因：如果您的应用程序有位置限制（仅在某些国家/地区可用），接收请求的用户必须在该国家/地区（例如，我必须通过 GeoEdge 与我的连接）。

# node.js - Node.js：使用 domain.dispose()

> ID：11796449
> 
> 赞同：1
> 
> 时间：2012-08-03T13:13:40.990
> 
> 标签：node.js, error-handling

我正在 node.js 中编写服务器，并希望在连接失败并出现错误时保持运行。所以，我正在尝试使用新`domain`模块，但找不到正确的使用方式`domain.dispose()`。

一、`node -v`：v0.8.3

我认为`domain.dispose()`应该在错误时调用它来清理域对象设置的任何内容。但结果不是我所期望的，我无法找到任何关于正确使用的文档或讨论。

这是我用来隔离问题的代码：

```
var domain = require('domain');
var EventEmitter = require('events').EventEmitter;

var i = 0;
function cycle() {
    process.nextTick(cycle);

    var emitter = new EventEmitter();
    emitter.i = ++i;
    emitter.on('test', function() {
        throw new Error('asdasd ' + emitter.i);
    });

    var dm = domain.create();
    dm.on('error', function(er) {
        console.error('Error', er);
        //dm.dispose();
    });
    dm.add(emitter);

    emitter.emit('test');
}

cycle(); 
```

它为它创建`EventEmitter`一个单独的域，将发射器添加到域并触发发射器的错误。然后它重复。

一切都很好，循环继续，错误一个接一个地被记录下来：

```
[...]
Error { [Error: asdasd 1068]
  domain_thrown: true,
  domain: { members: [ [Object] ], _events: { error: [Function] } } }
Error { [Error: asdasd 1069]
  domain_thrown: true,
  domain: { members: [ [Object] ], _events: { error: [Function] } } }
[...] 
```

现在，我添加了`domain.dispose()`我认为应该在的位置：

```
dm.on('error', function(er) {
    console.error('Error', er);
    dm.dispose();
}); 
```

这样，循环只重复两次：

```
Error { [Error: asdasd 1]
  domain_thrown: true,
  domain: { members: [ [Object] ], _events: { error: [Function] } } }
Error { [Error: asdasd 2]
  domain_thrown: true,
  domain: { members: [ [Object] ], _events: { error: [Function] } } } 
```

没有更多的输出，程序就退出了。

所以，要么我不理解 的目的和语义`domain.dispose()`，要么它做了它不应该做的事情。我可能会深入研究源头，但与此同时，如果只是为了后代，澄清这个问题会很好。如果您知道应该如何使用该功能来保持应用程序的活力，请分享。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:26:34.853

通过使用 v0.8.11 节点将正确循环使用`dm.dispose()`.

# java - 对象可以在java中声明为静态的吗？

> ID：11796450
> 
> 赞同：1
> 
> 时间：2012-08-03T13:13:49.693
> 
> 标签：java, jakarta-ee, jdbc

```
public static Connection connect;
    public static ResultSet resultSet;
    static final String DATABASE_URL = "jdbc:mysql://localhost/java_dev";

    public ServerFunctions() {
        String Driver = "com.mysql.jdbc.Driver";            
        String DB_USERNAME = "lucky";
        String DB_PASSWORD = "lucky";

        try {
            Class.forName(Driver);
            connect = DriverManager.getConnection(DATABASE_URL,DB_USERNAME, DB_PASSWORD);
        } catch(Exception e) {
            System.out.println("Database Not Connected ! ");
        }
    }

    public static Boolean verificator(String username, String password) {
        try {
            PreparedStatement prepare = connect.prepareStatement(
                "Select * from users where username='?'&&password='?'"); 
```

以上是我的代码片段。我将`Connection`and`Resultset`对象声明为静态的，以便可以从静态验证器方法中调用它们。验证器方法也被声明为静态的，因此可以通过使用 className.verificator(param, param) 从不同的类作为类变量调用它。

当我单独测试该类时，它会编译并运行，但是每当从不同的类进行调用时，我都会在 PerparedStatement Line 处收到 NullPointerException 错误。

有人可以帮我为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T13:18:06.307

您说您将验证器方法声明为静态，因此可以从其他类访问它，并且验证器方法正在使用连接，这也是静态的。

问题是连接只在对象的构造函数中初始化，所以，如果构造函数从未被调用，connect 将为空。

您需要在静态块中初始化连接变量，或者在使用它之前验证它是否为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T08:48:29.803

> 对象可以在java中声明为静态的吗？

你可以，但这是个坏主意。

```
public static Boolean verificator(String username, String password) {
    try {
        synchronized(DATABASE_URL){
            if(connect==null){
                Class.forName(Driver);
                connect = DriverManager.getConnection(DATABASE_URL,DB_USERNAME, DB_PASSWORD);
            }
        }

        PreparedStatement prepare = connect.prepareStatement( 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:16:57.470

你得到 a`NullPointerException`因为你没有初始化变量。尝试类似的东西

```
public static ResultSet resultSet = new ResultSet(); 
```

**或运行在访问变量之前**初始化变量的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:17:53.397

这意味着您的`Connection`对象在某处关闭或未正确初始化（通过调用构造函数）。我强烈建议不要使用 and 等静态资源`Connection`，`ResultSet`而是让它们基于实例并从静态方法调用该实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T13:19:47.210

构造函数在类的实例被构造时执行，也就是当你使用`new`关键字时。`connect`在创建构造函数实例之前使用静态变量`ServerFunctions`不会被执行。

您可以使用静态初始化程序块来纠正此问题，该程序将在加载类时执行。

```
static{
    //code from your constructor here
} 
```

# c# - .net 应用程序对象提升到第 2 代

> ID：11796454
> 
> 赞同：4
> 
> 时间：2012-08-03T13:14:00.687
> 
> 标签：c#, .net, windbg

很长一段时间以来，我一直在尝试修复应用程序中的内存泄漏。几个月前，我注意到在我的应用程序中，超过 95% 的对象被提升到 Gen2；我有一些非常基本的问题，我无法在书中找到。我希望你们能帮助我：

1.  拥有这么多 Gen2 对象是个坏消息吗？在我拍摄的每个快照中，我都会在 WinDbg 中获得大约 77,000 个 Gen2 对象、100 个 Gen1 对象和 10 个 Gen0 对象。
2.  我怎样才能找出这么多对象被提升的原因？有什么好的工具吗？我一直在使用 WinDbg/SOS，但运气不佳

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T14:09:44.987

> 拥有这么多 Gen2 对象是个坏消息吗？

这不是坏消息。这可能意味着 GC.Collect 刚刚运行，或者它经常运行，并且您有足够的可用内存 - 因此 Gen2 中的对象不会被收集。这是另一个 StackOverflow 问题的一些很好的解释， [即使需要垃圾收集也不会发生](https://stackoverflow.com/questions/10016541/garbage-collection-not-happening-even-when-needed)：

> > 开始垃圾收集时，GC 确定需要收集哪些代（0、0+1 或全部）。每一代都有一个由 GC 确定的大小（它可以随着应用程序的运行而改变）。如果只有第 0 代会超出其预算，那是唯一将收集垃圾的代。如果第 0 代幸存的对象会导致第 1 代超出其预算，那么第 1 代也将被收集并将其幸存对象提升到第 2 代（这是微软实现中的最高代）。如果也超出了第 2 代的预算，则会收集垃圾，但对象无法提升到更高的一代，因为不存在。
> > 
> > 所以，这里有重要的信息，在最常见的 GC 启动方式中，只有在第 0 代和第 1 代都已满时才会收集第 2 代。此外，您需要知道超过 85,000 字节的对象不会存储在具有 0、1 和 2 代的普通 GC 堆中。它实际上存储在所谓的大对象堆 (LOH) 中。LOH 中的内存仅在 FULL 收集期间（即第 2 代收集时）被释放；永远不会只收集第 0 代或第 1 代。

对于你的第二个问题：

> 我怎样才能找出这么多对象被提升的原因？有什么好的工具吗？我一直在使用 WinDbg/SOS，但运气不佳

Windbg 和 SOS 很好 :) 在这种情况下，我建议添加 psscor2（或 psscor4，如果使用 .NET 4.0）您需要使用 psscor 轻松转储特定生成的对象。

这是下载[psscor2](http://www.microsoft.com/en-us/download/details.aspx?id=1073)和[psscor4](http://www.microsoft.com/en-us/download/details.aspx?id=21255) dll 的官方链接。将它们的适当版本放在安装 Windbg 的文件夹中。x86 版本的 dll 到 x86 文件夹（C:\Program Files (x86)\Debugging Tools for Windows），x64 版本的 dll 到 x64 文件夹（C:\Program Files\Debugging Tools for Windows (x64)）。

然后您将能够运行下一个命令：

```
 !dumpheap -gen 2 
```

当 psscor 有时，SOS 没有简单的命令来仅转储特定代的对象。

使用此命令，您可以创建类似的结构

```
.foreach (obj { !dumpheap -gen 2 -short }) { !do ${obj} } 
```

或者

```
.foreach (obj { !dumpheap -gen 2 -type ExactTypeName -short }) { !gcroot ${obj} } 
```

找出第 2 代中对象的主要类型，以及哪些方法引用了它们。

正如您所说，您的主要想法是查找内存泄漏，您应该使用更通用的方法，并且不仅要分析生成。以下是我关于分析高内存使用问题的帖子：

**托管内存**：

[http://kate-butenko.blogspot.com/2012/06/investigating-memory-issues-high-memory.html](http://kate-butenko.blogspot.com/2012/06/investigating-memory-issues-high-memory.html)

**非托管内存**：

[http://kate-butenko.blogspot.com/2012/07/investigating-issues-with-unmanaged.html](http://kate-butenko.blogspot.com/2012/07/investigating-issues-with-unmanaged.html)

[http://www.codeproject.com/Articles/31382/Memory-Leak-Detection-Using-Windbg](http://www.codeproject.com/Articles/31382/Memory-Leak-Detection-Using-Windbg)

如果您仍然停留在某个步骤上，请留下您的问题。

# java - 如何在不将我的类绑定到特定实现的情况下获得实现继承的好处？

> ID：11796458
> 
> 赞同：2
> 
> 时间：2012-08-03T13:14:05.693
> 
> 标签：java, inheritance, refactoring, coupling

我正在开发一个应用程序，它建立在另一个开发人员编写的类上（我没有源代码）。

我希望使用该类的所有功能，但也希望使用其他功能对其进行扩展。通常为了实现这一点，我会定义一个接口 ( *MyInterface* ) 并在实现*MyInterface*时从我自己的 ( *MyClass* )扩展外部类 ( *TheyClass* ) 。

 **```
public interface TheirClassInterface {
    public void theirMethod1();
    public void theirMethod2();
}

public class TheirClass implements TheirClassInterface {
    public void theirMethod1() { ... }
    public void theirMethod2() { ... }
}

public class TheirOtherClass {
    public void theirOtherMethod1(TheirClassInterface o) { ... }
}

public interface MyInterface() {
    public void myMethod1();
}

public class MyClass extends TheirClass implements MyInterface {
    public void myMethod1() { ... }
}

public class MyNewClass extends MyClass {
    public void MyNewClassMethod() { ... }
} 
```

问题因以下事实而变得复杂：

1.  我现在希望创建一个新类（*MyNewClass ），它为**MyClass*添加附加功能，但我不希望我的代码依赖于*TheyClass*。
2.  我希望能够将我的类用作*TheyOtherClass*方法的参数。

为了解决这个问题，我重构了我的代码，改为使用组合而不是继承并实现*TheyClassInterface*。这可行，但需要我实现许多方法并将它们委托给*theirClassObject*（实际上，它们的*ClassInterface*包含大量方法）。

```
public interface TheirClassInterface {
    public void theirMethod1();
    public void theirMethod2();
}

public class TheirClass implements TheirClassInterface {
    public void theirMethod1() { ... }
    public void theirMethod2() { ... }
}

public class TheirOtherClass {
    public void theirOtherMethod1(TheirClassInterface o) { ... }
}

public interface MyInterface() {
    public void myMethod1();
}

public class MyClass implements TheirClassInterface, MyInterface {
    private TheirClass theirClassObject;

    public void myMethod1() { ... }
    public void theirMethod1() { theirClassObject.theirMethod1(); }
    public void theirMethod2() { theirClassObject.theirMethod2(); }
}

public class MyNewClass extends MyClass {
    public void MyNewClassMethod() { ... }
} 
```

我的问题是我的方法在这种情况下是否合适，是否可以改进，因为在我看来，我的代码使用过多的委托来完成工作。

非常感谢任何人对此提供的任何指导。

丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:23:44.553

首先，由于 java 是一种强类型的单继承语言，您无法逃避委托。

但是你可以避免编写大量的委托代码，通过使用代理和反射的肮脏小技巧。代码如下

```
public interface Interface1 {
    void m1();
}
public interface Interface2 {
    void m2();
}
public class Class1 implements Interface1 {
    public void m1() {
        System.out.println(1);
    }

}
public class Class2 implements Interface2 {
    public void m2() {
        System.out.println(2);
    }
}
public interface MixinInterface extends Interface1, Interface2 {

} 
```

这就是魔法发生的方式

```
package j.with.pseudo.multiple.inheritance;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

public class MixinBuilder {

    public static Object buildMixed(Class _interface, Object... impls){
        InvocationHandler h = new MixinHandler(_interface.getInterfaces(), impls);
        return Proxy.newProxyInstance(MixinBuilder.class.getClassLoader(), 
            new Class[]{_interface}, h);
    }

    public static void main(String[] args) {
        Class1 o1 = new Class1();
        Class2 o2 = new Class2();
        MixinInterface almost_like_multiple_inheritance_guy = 
            (MixinInterface) buildMixed(MixinInterface.class, o1, o2);
        almost_like_multiple_inheritance_guy.m1();
        almost_like_multiple_inheritance_guy.m2();
    }

    private static class MixinHandler implements InvocationHandler{

        private Class[] interfaces;
        private Object[] impls;

        public MixinHandler(Class[] interfaces, Object[] impls) {
            this.interfaces = interfaces;
            this.impls = impls;
        }

        public Object invoke(Object proxy, Method method, Object[] args)
                throws Throwable {
            int i=0;
            for(Class _interface : interfaces){
                if(method.getDeclaringClass().isAssignableFrom(_interface)){
                    return method.invoke(impls[i], args);
                }
                i++;
            }
            // TODO Auto-generated method stub
            throw new RuntimeException("Method not found: "+method);
        }

    }
} 
```

很酷吧？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:53:32.497

Many thanks for the answers so far. I've come up with a solution which I think seems reasonable and allows me to fully encapsulate the foreign class.

At the moment I've returned to the method discussed in the first block of code (repeated and extended below) and am now implementing my *MyInterface* interface for *MyNewClass* and delegating all interface operations to a composed object. The object to delegate to is decided at runtime by calling a static method on a Factory.

```
public interface TheirClassInterface {
    public void theirMethod1();
    public void theirMethod2();
}

public class TheirClass implements TheirClassInterface {
    public void theirMethod1() { ... }
    public void theirMethod2() { ... }
}

public class TheirOtherClass {
    public void theirOtherMethod1(TheirClassInterface o) { ... }
}

public interface MyInterface() {
    public void myMethod1();
}

public class MyClass extends TheirClass implements MyInterface {
    public void myMethod1() { ... }
}

public class MyNewClass implements MyInterface {
    private MyInterface myObject;

    public MyNewClass() {
        myObject = MyClassFactory.createMyClass();
    }

    public void myMethod1() {
        myObject.myMethod();
    }

    public void MyNewClassMethod() { ... }
} 
```

Once again, thanks for the ideas. I'm now going to look into them all and see if I can use them to improve my code.

Cheers,

Danny

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:35:26.593

**如果你正在扩展**一个类，你就不能不依赖它；就像有一个 的定义`Human`，它不依赖于 的定义`Mammal`，您的 optinos 将重写父级中的所有内容，或者依赖于它。**

# asp.net-mvc-3 - 我们如何在 _layout 中包含表单？

> ID：11796459
> 
> 赞同：0
> 
> 时间：2012-08-03T13:14:08.243
> 
> 标签：asp.net-mvc-3

我目前有一个 _layout.cshtml 用于我网站的每个页面。
我需要在显示为 popin 的每个页面上放置一个表单。
因此，我创建了一个带有相应 ViewModel 的新 PartialView（我的表单的内容），并在 _layout.cshtml 中调用它。

但是，我在使用布局的页面的 ViewModel 和新表单使用的 ViewModel 之间存在模型冲突（因为我们不能直接为同一个视图创建两个模型）。

> 传入字典的模型项是“XXX”类型，但该字典需要一个“YYY”类型的模型项。

我们如何在 _layout 中包含一个表单而不发生这种冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:01:41.630

以下内容对我有用，每个页面上都有一个侧边栏。

1.  为局部视图创建控制器
2.  在该控制器中，为要返回的视图创建一个方法，并确保使用 [ChildActionOnly] 过滤器

    ```
    public class PartialController : Controller
    {
        [ChildActionOnly]
        public PartialViewResult Alerts()
        {

            return PartialView("Alerts", messages);
        }
    } 
    ```

3.  在您的 _layout 视图中，您将拥有以下内容：

    ```
    @Html.Action("Alerts", "Partial") 
    ```

    （而不是@Html.RenderPartial 或@Html.Partial）

4.  听起来您已经拥有了视图所需的东西。

我没有将它与表单一起使用，但它应该类似地工作。希望这可以帮助。

# java - Java - Swing 中的监听器

> ID：11796460
> 
> 赞同：2
> 
> 时间：2012-08-03T13:14:18.830
> 
> 标签：java, swing, listener

我开始在 Java Swing 中编写一些代码，并且在 Swing 提供的侦听器层次结构中有些混乱。即我想知道何时使用，例如，`ActionListener`over`ListSelectionListener`以及如何区分何时从 UI 调用特定侦听器，即在用户交互之后。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:34:21.410

关于`ActionListener`

> 每当用户执行一个动作时，就会发生一个动作事件。示例：当用户单击按钮、选择菜单项、在文本字段中按 Enter 时。结果是 actionPerformed 消息被发送到在相关组件上注册的所有操作侦听器。[参考](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

关于`ListSelectionListener`

> 当列表或表格中的选择正在更改或刚刚更改时，会发生列表选择事件。列表选择事件从实现 ListSelectionModel 接口的对象触发。要获取表的列表选择模型对象，您可以使用 getSelectionModel 方法或 getColumnModel().getSelectionModel()。[参考](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)

问：如何区分何时从 UI 调用特定侦听器，即在用户交互之后。

上述详细信息和参考资料包含许多入门信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:24:24.673

`ActionListener`例如用于`JButton`，它只是告诉 GUI 元素已经做了一些事情（一个按钮除了被点击之外不能做任何事情）。

`ListSelectionListener`包含更多信息（选择了哪个元素）。

有关何时使用 which`Listener`检查您要使用的元素的 javadoc 的更多信息。

# java - 我的 Eclipse 副本不知道对象或字符串是什么

> ID：11796464
> 
> 赞同：3
> 
> 时间：2012-08-03T13:14:30.903
> 
> 标签：java, eclipse, string, object, import

我的 Mac 上有一份 Eclipse Indigo。在我导入我在另一台计算机上制作的项目之前，它工作正常。现在我收到“无法解析类型 java.lang.Object”之类的错误。和“字符串无法解析为类型”。

此外，我构建它的计算机有 Java 7，而我稍微损坏的 mac 有 Java 6，并且不会更新。我不确定，但我怀疑这可能是一个问题。

发生了什么，我该如何解决？

**更新**

我将我认为正确的 JRE 放在构建路径中，但现在当我运行它时，我收到以下错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Game : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T13:16:59.060

验证您的构建路径中是否有运行时环境。

Object 和 String 至少在 JRE 中，并且 JRE 必须在构建路径中引用。

如果您创建一个新的 java 项目，默认情况下您会在那里找到，但它就在那里。

可以通过移动 JRE 或 JDK、更改 JAVA_HOME 环境变量或错误配置引用特定 JRE 的自定义系统库来破坏项目构建路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:09:28.363

您的工作区已损坏，尤其是您尝试使用的 JRE。

修复 Eclipse 中使用的 JRE 和编译器设置，然后重新构建项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T17:36:54.647

我遇到了同样的错误，但经过一番挖掘，我了解了[http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html](http://dev-answers.blogspot.de/2009/06/eclipse-build-errors-javalangobject.html)

他们只是说要删除 JRE 库并添加默认系统 JRE 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:16:12.930

检查你的类路径。它必须指向您的 JDK。

# java - f:param 返回空值？

> ID：11796467
> 
> 赞同：1
> 
> 时间：2012-08-03T13:14:37.473
> 
> 标签：java, jsf, primefaces

af:param 标记中的我的值“image_id”返回 null。

JSF网站

```
 <p:dataGrid value="#{main.game.cards}" var="cad" columns="3"
                            rows="12" paginator="true"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,10,25, 50, 100"> 
                            <p:panel header="Nr. #{cad.id}">
                                    <f:param name="image_id" id="image_id" value="#{cad.id}"></f:param>
                                <p:graphicImage cache="true" value="#{main.fileContent}">

                                </p:graphicImage>    

                            </p:panel>
                        </p:dataGrid>  

</h:form> 
```

尝试读取值：

```
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    String photoId = externalContext.getRequestParameterMap().get("image_id"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:22:22.273

`<f:param>`必须进入内部，但在您的`<p:graphicImage>`代码中，您已将其放在外部。相应地修复它。

顺便说一句，它只会`null`在网络浏览器请求图像时发送（因此是非 ），而不是在 JSF 即将生成`<img>`元素时发送。因此，`#{main.fileContent}`对于单个图像，getter 将被调用两次：第一次是生成 HTML 时，第二次是 web 浏览器实际请求图像时。

### 也可以看看：

*   [在 <ui:repeat> 内的 <p:graphicImage> 中显示数据库 blob 图像](https://stackoverflow.com/questions/10073905/problems-displaying-database-blob-image-in-primefaces-graphicimage/10161878#10161878)

# php - 为什么即使重定向后我也会收到“您要再次提交表单”吗？

> ID：11796473
> 
> 赞同：0
> 
> 时间：2012-08-03T13:14:55.400
> 
> 标签：php, codeigniter

我在这里有一个奇怪的问题 - 见下文。

第 X 页

*   包含一个具有作为帖子的方法的表单
*   用户提交表单 - 有一些表单验证。
*   如果一切都验证我保存数据，在会话中设置一个闪存数据消息（即查询成功/失败）并将用户重定向（）到 current_ur（）
*   现在，我可以看到 Flash 消息，如果我按`F5`- 我得到你想再次提交表格吗？

这不应该只是刷新页面吗？如何阻止它发出另一个提交请求？如果我重定向到页面 Y，然后按`F5`那里，那么它不会要求我重新提交吗？我在这里迷路了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:44:23.363

好了朋友们

这不是`CodeIgniter`问题。这是一个问题`Firefox`。我正在`14.0.1`使用`Firefox`.

我在`IE 7, 8, 9`, `Safari 5,` `Chrome`（最新）中尝试了相同的表格和流程 - 他们没有向我显示确认对话框以重新提交表格`F5`。

* * *

**更新**

在 Firefox 中，我收到此消息 -

> 要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。

我只是设置了另一个脚本（没有 CI）并在 Firefox 中进行了测试。我试图创建类似的过程（即发布并重定向到同一页面）......我根本没有收到这条消息。刷新工作得很好。**所以我现在把它带回CI？**

**更新 2**

好的，我想我现在已经破解了 -

我正在使用 CI 的重定向功能 - 见下文 - 第二个参数将默认值设为“自动”，并且当`auto`它发送标头时，`header('Refresh:0;url='.$uri);`这会使 Firefox 抛出上述消息。如上所述，我在其他浏览器中没有得到相同的行为。我希望它可以帮助某人。

```
function redirect($uri = '', $method = 'auto', $http_response_code = 302)
{
    if ( ! preg_match('#^https?://#i', $uri))
    {
        $uri = site_url($uri);
    }

    // IIS environment likely? Use 'refresh' for better compatibility
    if (DIRECTORY_SEPARATOR !== '/' && $method === 'auto')
    {
        $method = 'refresh';
    }

    switch($method)
    {
        case 'refresh':
            header('Refresh:0;url='.$uri);
            break;
        default:
            header('Location: '.$uri, TRUE, $http_response_code);
            break;
    }
    exit;
} 
```

# python - 在特定脚本行上启动交互模式

> ID：11796474
> 
> 赞同：13
> 
> 时间：2012-08-03T13:14:55.567
> 
> 标签：python, interactive

我需要像往常一样运行我的 Python 脚本，但我想在特定行上停止执行并启动交互模式。

换句话说，我希望能够在那时检查所有变量的值，并从那里继续使用 python 的命令行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T13:17:08.010

这可以通过`code`模块来完成。最简单的方法是调用[`code.interact()`](http://docs.python.org/library/code.html#code.interact).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T13:17:00.783

使用调试器并添加断点。你使用 IDE 吗？所有主要的 IDE 都支持调试器。在 CLI 中，您可以使用`pdb`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T13:20:05.067

不完全是您要查找的内容，但是您可以通过在您希望程序中断的任何位置添加此行来轻松地将程序中断为 pdb（Python 调试器）：

```
import pdb; pdb.set_trace() 
```

然后，您可以轻松地检查如下变量：

```
p variable_name 
```

您还可以步进、继续等。

有关 pdb 的更多详细信息，请[点击此处](http://docs.python.org/library/pdb.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T13:21:03.303

除非您需要将其用于生产目的，否则我认为最好的方法是使用交互式调试器：

[http://infohost.nmt.edu/tcc/help/pubs/python/web/pdb.html](http://infohost.nmt.edu/tcc/help/pubs/python/web/pdb.html)

[http://onlamp.com/pub/a/python/2005/09/01/debugger.html](http://onlamp.com/pub/a/python/2005/09/01/debugger.html)

出于其他目的考虑可能对您的代码做方面，使用装饰器从方法类中获取运行时特征：

[http://www.cs.tut.fi/~ask/aspects/index.shtml](http://www.cs.tut.fi/~ask/aspects/index.shtml)

[http://www.linuxtopia.org/online_books/programming_books/python_programming/python_ch26.html](http://www.linuxtopia.org/online_books/programming_books/python_programming/python_ch26.html)

# r - 通过根据索引列在其他列中选择一个值来创建一个新的数据框列

> ID：11796475
> 
> 赞同：5
> 
> 时间：2012-08-03T13:14:57.460
> 
> 标签：r, dataframe

这是（一小部分）数据框“df”，其中：

11 个变量“v1”到“v11”

和一个索引列“indx”（1 <= indx <= 11）。

"indx" 是通过对另一个数据帧的上一步获得的，然后合并到 "df" ：

```
> df
    v1 v2  v3  v4  v5 v6  v7 v8 v9 v10 v11 indx
1  223  0  95 605  95  0   0  0  0 189   0   10
2   32  0   0  32   0 26   0  0  0  32   0    6
3    0  0 127  95  64 32   0  0  0 350   0   10
4  141  0 188   0 361  0   0  0  0 145   0    3
5   32  0 183   0 127  0   0  0  0 246   0    3
6   67  0 562   0   0  0   0  0  0 173   0    3
7   64  0 898   0   6  0   0  0  0   0   0    3
8    0  0  16   0  32  0   0  0  0  55   0   10
9    0  0 165   0   0  0 312  0  0 190   0   10
10   0  0 210   0   0  0 190  0  0  11   0    7 
```

我需要建立一个新列“vsel”，其值为“v(indx)”

（也就是说，对于第一行：vsel=189 因为 indx=10 和 v10=189）

我通过使用“for”循环成功地获得了这个结果：

```
> df
    v1 v2  v3  v4  v5 v6  v7 v8 v9 v10 v11 indx vsel
1  223  0  95 605  95  0   0  0  0 189   0   10  189
2   32  0   0  32   0 26   0  0  0  32   0    6   26
3    0  0 127  95  64 32   0  0  0 350   0   10  350
4  141  0 188   0 361  0   0  0  0 145   0    3  188
5   32  0 183   0 127  0   0  0  0 246   0    3  183
6   67  0 562   0   0  0   0  0  0 173   0    3  562
7   64  0 898   0   6  0   0  0  0   0   0    3  898
8    0  0  16   0  32  0   0  0  0  55   0   10   55
9    0  0 165   0   0  0 312  0  0 190   0   10  190
10   0  0 210   0   0  0 190  0  0  11   0    7  190 
```

代码是：

```
df$vsel = NA
for (i in seq(1:nrow(df))   )
{
  r = df[i,]
  ind = r$indx
  df[i,"vsel"] = r[ind]
} 
```

...我想避免这个循环（因为当数据框很大时它相当慢）。

可能有一种（更快的）R 型方式：

也许与 apply(df, 1, ...) ？

还是 ddply ？

感谢您的帮助……</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:01:59.730

Matrix indexing to the rescue! R has a way of doing exactly what you are describing. It is simple and powerful but surprisingly little-known.

```
df$vsel <- df[cbind(1:nrow(df), df$indx)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:40:26.870

这是一个完全矢量化的解决方案，在速度方面很难被击败。

```
df$vsel <- as.matrix(df)[1:nrow(df) + nrow(df)*(df$indx-1)] 
```

这利用了矩阵在内部存储为长向量（按列）的事实。将`1:nrow(df)`因此指定行和`nrow(df)*(df$indx-1)`列。如果您有混合数据类型，这将不起作用，`df`因为所有内容都将通过`as.matrix`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:26:06.077

你可以这样做：

```
f <- function(i){df[i,df[i,]$indx]}
temp <- sapply(FUN=f,X=1:length(df[,1]))
cbind(df,vsel=temp) 
```

# css - 使用CSS在html中并排排列图像？

> ID：11796486
> 
> 赞同：1
> 
> 时间：2012-08-03T13:15:31.510
> 
> 标签：css, fluid-layout

我正在尝试实现一种使用 CSS 以特定布局显示图像的方法。我不知道如何使用 CSS 来做到这一点。

我将两张小图像放在一起，一张高的在小图像旁边，高图像的高度等于小照片。

**所需布局：**

```
┌─────────────┬────────────┐
│ SMALL IMAGE │            │
├─────────────| TALL IMAGE |
│ SMALL IMAGE │            │
└─────────────┴────────────┘ 
```

我的代码在 jsfiddle 上：http: [//jsfiddle.net/VjfGS/](http://jsfiddle.net/VjfGS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:33:32.050

以最少的标记更改实现所需的输出：http: [//jsfiddle.net/pratik136/AzyQG](http://jsfiddle.net/pratik136/AzyQG)

**HTML：**

```
<div class ="image-section">
    <img class="tall" src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="60px" height="180px">
    <img src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="120px" height="90px"> 
    <img src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="120px" height="90px">
</div>
<div class ="image-section"></div> 
```

**CSS：**

```
.tall {
    float: right;
}
img {
    float: left;
}
.image-section{
    width: 180px;
}​ 
```

![输出](../Images/86f7f6877f7afe3b97db823d605c8e85.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:20:21.283

你可以这样做：

演示：http: [//jsfiddle.net/5kxNm/](http://jsfiddle.net/5kxNm/)

CSS：

```
.tall {
    float: none;
}
img {
    float: left;
    clear: left;
}​ 
```

警告：这是一个“quick-n-dirty”修复，可能不适用于所有情况！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:19:36.513

例如，像这样[http://jsfiddle.net/VjfGS/4/](http://jsfiddle.net/VjfGS/4/)

```
<div class ="image-section">
    <div class="left">
        <img> 
        <img>
    </div>
    <img class="tall">
</div>
<div class ="image-section"></div>
​.tall {
    float:left;
}
.left{
    float: left;
}
.left img{
    display:block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:20:23.323

这会做到的

[http://jsfiddle.net/VjfGS/18/](http://jsfiddle.net/VjfGS/18/)

```
<div class ="image-section">
    <div class="smallDiv">    
         <img src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="120px" height="90px"> <br/>
          <img src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="120px" height="90px">
    </div>
    <img class="tall" src ="http://static.guim.co.uk/sys-images/Lifeandhealth/Pix/pictures/2009/3/5/1236251569000/Six-gorgeous-plants-Close-001.jpg" width="60px" height="180px">
</div>
<div class ="image-section"></div>

.smallDiv{
    float:left;
} 
```

​</p>

# c++ - emacs 向下钻取快捷方式

> ID：11796489
> 
> 赞同：0
> 
> 时间：2012-08-03T13:15:34.370
> 
> 标签：c++, emacs

我是新手`emacs`。在 Netbeans 中，您可以右键单击任何对象，它会将您直接发送到头文件或实现文件。有没有快捷键可以做到这一点`emacs`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:27:02.003

与所有事情一样：Emacs 为您提供了几种方法来做某事，在这种情况下，其中一些方法不能开箱即用。您可以使用`etags`或者如果您需要一个非常大的锤子[语义](http://cedet.sourceforge.net/semantic.shtml)，它是 cedet 项目的一部分。这将为您提供比简单地跳转到头文件更多的功能，但也许这就是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:48:57.040

您必须先创建一个**TAGS**文件。

如果你在 linux 上：

```
$ ctags -e -R *.h *.cpp
// this will create tags for all .h and .cpp files, 
// starting from the current directory, and recursing into subdirectories.
// -e : emacs tags (as oposed to vi tags, the default)
// -R : recursive 
```

`--append`您还可以使用该标志添加到现有标签文件。例如：

```
$ ctags --append -e -R *.h *.cpp /home/user/jdoe/thirdparty
// This will add to the TAGS file in the current directory 
```

当您想跳转到符号定义时，在 emacs 中使用`M-x find-tag`, 或`M-.`. 它会问你 TAGS 文件在哪里，然后你就设置好了。要弹出，使用`M-x pop-tag-mark`, 默认情况下映射到`M-*`.

注意：ctags 没问题，但由于它不是编译器，有时它会带你到错误的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:19:52.040

您可以使用它`etags`来提供类似的功能。创建 TAGS 文件后，您可以使用`M-.`调用`(find-tag)`.

# hsqldb - flyway:init 找不到初始的 sql 脚本

> ID：11796491
> 
> 赞同：1
> 
> 时间：2012-08-03T13:15:46.847
> 
> 标签：hsqldb, flyway

我用 flyway-maven-plugin 做了一些实验。我没有空数据库，所以我需要一个初始 ddl 脚本。我按照 flyway wiki 中的说明进行操作：

*我将名为V1__Base_Migration.sql*的 sql 脚本放在*src/main/resources/db/migration*中。

flyway-maven-plugin 的配置如下所示：

```
<build>
    <plugins>
        <plugin>
            <groupId>com.googlecode.flyway</groupId>
            <artifactId>flyway-maven-plugin</artifactId>
            <version>1.7</version>
            <configuration>
                <driver>org.hsqldb.jdbcDriver</driver>
                <url>jdbc:hsqldb:hsql://localhost:9001/testdb</url>
                <user>SA</user>
                <password></password>
                <schemas>PUBLIC</schemas>
                <initialVersion>1</initialVersion>
                <initialDescription>Base Migration</initialDescription>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

当我调用`mvn install flyway:init`cmd并查看数据库中的运行时，我可以找到flyway的版本表，但找不到该表，其ddl在sql脚本中。

当我查看 Maven 的调试日志时，我找不到任何关于运行 sql 脚本的提示。

```
[DEBUG]   Excluded: classworlds:classworlds:jar:1.1
[DEBUG] Configuring mojo com.googlecode.flyway:flyway-maven-plugin:1.7:init from   plugin realm ClassRealm[plugin>com.googlecode.flyway:flyway-maven-plugin:1.7, parent: sun.misc.Launcher$AppClassLoader@11799e7]
[DEBUG] Configuring mojo 'com.googlecode.flyway:flyway-maven-plugin:1.7:init' with include-project-dependencies configurator -->
[DEBUG]   (f) driver = org.hsqldb.jdbcDriver
[DEBUG]   (f) initialDescription = Base Migration
[DEBUG]   (f) initialVersion = 1
[DEBUG]   (f) schemas = PUBLIC
[DEBUG]   (f) settings = org.apache.maven.execution.SettingsAdapter@1aa246e
[DEBUG]   (f) url = jdbc:hsqldb:hsql://localhost:9001/testdb
[DEBUG]   (f) user = SA
[DEBUG] -- end configuration --
[DEBUG] Database: HSQL Database Engine
[INFO] Hsql does not support locking. No concurrent migration supported.
[DEBUG] Schema: PUBLIC
[INFO] Creating Metadata table: schema_version (Schema: PUBLIC)
[DEBUG] Found statement at line 17: CREATE TABLE PUBLIC.schema_version (
version VARCHAR(20) PRIMARY KEY,
description VARCHAR(100),
type VARCHAR(10) NOT NULL,
script VARCHAR(200) NOT NULL,
checksum INT,
installed_by VARCHAR(30) NOT NULL,
installed_on TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
execution_time INT,
state VARCHAR(15) NOT NULL,
current_version BIT NOT NULL,
CONSTRAINT PUBLIC.schema_version_script_unique UNIQUE (script)
);
[DEBUG] Found statement at line 30: CREATE INDEX    PUBLIC.schema_version_current_version_index ON PUBLIC.schema_version (current_version);
[DEBUG] Executing SQL: CREATE TABLE PUBLIC.schema_version (
version VARCHAR(20) PRIMARY KEY,
description VARCHAR(100),
type VARCHAR(10) NOT NULL,
script VARCHAR(200) NOT NULL,
checksum INT,
installed_by VARCHAR(30) NOT NULL,
installed_on TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
execution_time INT,
state VARCHAR(15) NOT NULL,
current_version BIT NOT NULL,
CONSTRAINT PUBLIC.schema_version_script_unique UNIQUE (script)
)
[DEBUG] Executing SQL: CREATE INDEX PUBLIC.schema_version_current_version_index ON PUBLIC.schema_version (current_version)
[DEBUG] Metadata table created: schema_version (Schema: PUBLIC) 
```

我做错了什么吗？如果有人可以给我一个提示，那会很酷，我做错了什么。

您可以在 [github] (https://github.com/skosmalla/flyway-maven-test) 中找到整个 Maven 测试项目

最好的祝福，

桑德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:31:35.160

**当您的生产模式（例如 ABC 和 XYZ）中有现有表并且您决定开始使用 Flyway 来管理数据库的生命周期**时，flyway:init 很有用。****

 **您可以将生产模式的结构转储到 sql 脚本中，例如`V0_9__Prod.sql`在本地执行。这样，您可以将您的开发数据库与 PROD 的当前结构对齐。添加功能时，您可以添加其他迁移，例如`V1__Base_Migration.sql`.

但是，当部署到 PROD 时，您不想`V0_9__Prod.sql`再次运行。为避免这种情况，您可以使用 0.9 flyway:init PROD 模式。

当它运行迁移时，它将跳过`V0_9__Prod.sql`并直接移动到`V1__Base_Migration.sql`.

**如果这种情况不适用于您，您可以简单地运行 flyway:migrate**。不需要 flyway:init 首先。**

# php - 无法使用 PHP 获得六月的最后一天

> ID：11796495
> 
> 赞同：2
> 
> 时间：2012-08-03T13:15:51.230
> 
> 标签：php, codeigniter, date

评论是我看到的输出。帮助！

```
echo date("Y-m-t", strtotime("2012-07-31 -1 month")); //2012-07-31
echo date("Y-m-t", strtotime("2012-07-31 -2 month")); //2012-05-31 
```

7 月有 31 天，所以不能按 8 月 1 日处理，对吧？即使是这样，第二行也应该起作用。对？！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:31:57.167

这里发生的情况是，“7-31”减去一个月得出“6-31”，转换为“7-1”，即要求该月的最后一天，得出“7-31” .

当您想要进行月份数学计算时，几乎总是（如果不是总是）使用 mktime 来构建时间会更好。

```
$month = 7;
echo date("Y-m-t", mktime(0, 0, 0, $month - 1, 1, 2012)); //2012-06-30 
```

请注意，在 mktime 中进行月份数学运算时，始终将“1”作为日期。或者真的任何东西，只要它是 28 或更低。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T13:27:42.957

你可以这样做：

```
$month  = date('m') ;
$day    = date('d') ;
$year   = date('Y') ;
// ----
$current    = mktime( 0, 0, 0, $month , $day, $year);
$yesterday  = mktime( 0, 0, 0, $month , $day-1, $year);
$tomorrow   = mktime( 0, 0, 0, $month , $day+1, $year);
// ----
echo '<pre>Current Day: '.date('Y-m-d', $current).'</pre>';
echo '<pre>Day Before: '.date('Y-m-d', $yesterday).'</pre>';
echo '<pre>Day After: '.date('Y-m-d', $tomorrow).'</pre>'; 
```

如果您正在寻找 7 月的最后一天：

```
$july = mktime( 0, 0, 0, 8, 1-1, 2012);
// Last Day of July: 2012-07-31
echo '<pre>Last Day of July: '.date('Y-m-d', $july).'</pre>'; 
```

使用 mktime，只需输入 8 月的第一天并减去一天。

# asp.net - 如何使用 nUnit 测试响应数据？

> ID：11796499
> 
> 赞同：1
> 
> 时间：2012-08-03T13:16:09.257
> 
> 标签：asp.net, unit-testing, nunit

Django 有一个非常方便的[测试客户端](https://docs.djangoproject.com/en/1.3/topics/testing/#module-django.test.client)/虚拟网络浏览器，可以在测试用例中使用它来验证 HTTP 响应的正确性（例如，状态代码、上下文/模型数据）。它不需要您运行 Web 服务器，因为它直接处理框架来模拟调用。

我真的很喜欢一个 nUnit（或类似的）等价物，我们可以直接滑入我们的测试套件。我们正在使用 MVC3 和 4，并且想要检查诸如成功的 301 重定向、模型验证是否正确以及视图中的 ViewModel 数据是否正确等内容。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:47:33.237

ViewModel 数据应该很容易通过以下方式检查：

```
 public T GetViewModelFromResult<T>(ActionResult result) where T : class
    {
        Assert.IsInstanceOf<ViewResult>(result);
        var model = ((ViewResult)result).Model;
        Assert.IsInstanceOf<T>(model);
        return model as T;
    }

    [Test]
    public void TheModelHasTheOrder()
    {
        var controller = new MyController();
        var result = controller.MyActionMethod();
        var model = GetViewModelFromResult<MyModel>();

        Assert.That(model, Is.SameAs(???));
    } 
```

至于模型验证，如果您使用的是开箱即​​用的 .net 属性，例如 [Required] 等，您可以确定它们可以正常工作，并且不需要测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:12:20.113

要显式测试对象上的 [Required] 等属性，您需要将内置的 .net 验证提取到另一个类中。然后在控制器中使用该类来验证您的对象，而不是控制器上的 Model.IsValid 属性。

模型验证器类：

```
public class ModelValidator : IModelValidator
{
    public bool IsValid(object entity)
    {
        return Validate(entity, new List<ValidationResult>());
    }

    public IEnumerable<ValidationResult> Validate(object entity)
    {
        var validationResults = new List<ValidationResult>();
        Validate(entity, validationResults);
        return validationResults;
    }

    private static bool Validate(object entity, ICollection<ValidationResult> validationResults)
    {
        if (entity != null)
        {
            var validationContext = new ValidationContext(entity, null, null);
            return Validator.TryValidateObject(entity, validationContext, validationResults);    
        }

        return false;
    }
} 
```

这可以在单元测试中通过以下方式进行验证：

```
public class MySampleEntity
{
    [Required]
    public string X { get; set; }

    [Required]
    public int Y { get; set; }
}

[TestFixture]
public class ModelValidatorTests
{
    [Test]
    public void GivenThePropertiesArePopulatedTheModelIsValid()
    {
        // arrange
        var _validator = new ModelValidator();
        var _entity = new MySampleEntity { X = "ABC", Y = 50 };

        // act
        var _result = _validator.IsValid(_entity);

        // assert
        Assert.That(_result, Is.True);
    }
} 
```

# java - 在 Java 中通过 MS Exchange 获取任务

> ID：11796500
> 
> 赞同：1
> 
> 时间：2012-08-03T13:16:10.037
> 
> 标签：java, exchange-server-2007, outlook-2003

我在从 Exchange Server 检索任务列表时遇到问题。我已经有了添加和更新任务的代码，但我无法进行检索。这是它的代码：

```
public void getEvents(String a_sPrefix, String a_sMailboxName,
        String a_sFolderName) throws ExchangeException, IOException {

    WebdavResource wrFolder = getExchangeWebdavResource(a_sPrefix,
            a_sMailboxName, a_sFolderName);

    // Get the session:
    HttpClient httpClient = wrFolder.retrieveSessionInstance();

    String sPrefix = "";

    if (a_sPrefix != null && a_sPrefix.length() > 0) {
        sPrefix = a_sPrefix + "/";
    }

    // Build the Url of the contacts folder:
    String sFolderUrl = m_sExchangeUrl + sPrefix + a_sMailboxName + "/"
            + a_sFolderName;

    // Escape any spaces:
    sFolderUrl = sFolderUrl.replaceAll("\\s", "%20");

    // Try to find the event first:
    String sQuery = "<?xml version=\"1.0\"?>"
            + "<D:searchrequest xmlns:D = \"DAV:\" xmlns:e = \"http://schemas.microsoft.com/exchange/\">"
            + "<D:sql>" + "SELECT "/*\"DAV:uid\"*/ + "FROM \"" + sFolderUrl + "\" " +
            // "WHERE \"e:extensionattribute1\" = '"+a_exEvent.getId()+"'" +
            "</D:sql>" + "</D:searchrequest>";
    System.out.println("The Query:" + sQuery);

    SearchMethod searchMethod = new SearchMethod(sFolderUrl, sQuery);

    int iStatusCode = httpClient.executeMethod(searchMethod);

    // See if there was an error:
    handleReturnCode(iStatusCode);

    Enumeration resp = searchMethod.getResponses();
    byte[] b = searchMethod.getResponseBody();

    Enumeration<String> enumMatchingUrls = searchMethod.getAllResponseURLs();
    while (enumMatchingUrls != null && enumMatchingUrls.hasMoreElements()) {
        String sEventUrl = (String) enumMatchingUrls.nextElement();
        Enumeration ob = searchMethod.getResponseProperties(sEventUrl);
        while (ob.hasMoreElements()) {
            BaseProperty v = (BaseProperty) ob.nextElement();
            log(v.toString());
        }

    }

    /*
     * if (enumMatchingUrls != null && enumMatchingUrls.hasMoreElements()) {
     * sEventUrl = (String)enumMatchingUrls.nextElement(); bExists = true; }
     * else { // This is a new contact: sEventUrl = sFolderUrl + "/" +
     * a_exEvent.getUniqueIdForUrl() + ".EML"; bExists = false; }
     */
} 
```

添加任务的代码：

```
public static void addEventToExchange(String login, String password,
        TaskDTO task) {
    // TODO: iommi - finish
    TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }

        public void checkClientTrusted(
                java.security.cert.X509Certificate[] certs, String authType) {
        }

        public void checkServerTrusted(
                java.security.cert.X509Certificate[] certs, String authType) {
        }
    } };
    // Install the all-trusting trust manager
    try {
        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    } catch (Exception e) {
        e.printStackTrace();
    }
    String sExchangeServerUrl = "http://url.which.pings.com";
    // Account name of an exchange user that has permission to see and modify
    // other user's mailboxes.
    String sApplicationUserAccountName = "login";
    String sApplicationUserPassword = "p@ssw0rd";

    // Connect to exchange.
    ExchangeBridge exchangeBridge = new ExchangeBridge(sExchangeServerUrl,
            sApplicationUserAccountName, sApplicationUserPassword);
    HashMap out = new HashMap();
    Vector ret = null;
    try {
        String mailbox = "iommi";
        String folder = ExchangeConstants.k_sInboxName;
        long lSince_TimeInMillisecs = System.currentTimeMillis()
                - (1000 * 60 * 60 * 24);
        /*
         * ret = exchangeBridge.getEmails(mailbox, folder, lSince_TimeInMillisecs,
         * null, null, 100);
         */
        java.util.Calendar c = java.util.Calendar.getInstance();

        ExchangeEvent a_exEvent = task.getDTOasExchangeEvent();
        // a_exEvent.setBusyStatus(ExchangeEvent.);
        // a_exEvent.setStartDate(c.getTime());
        // c.add(java.util.Calendar.HOUR, 1);
        // a_exEvent.setEndDate(c.getTime());
        // a_exEvent.setSubject(subject);
        // a_exEvent.setDescription(decription);
        // a_exEvent.setUniqueIdForUrl("i" + c.getTimeInMillis());
        String a_sPrefix = ExchangeConstants.k_sExchangeName;
        exchangeBridge.updateEvent(a_sPrefix, "iommi",
                ExchangeConstants.k_sCalendarName, a_exEvent);
        exchangeBridge.getEvents(a_sPrefix, "iommi",
                ExchangeConstants.k_sCalendarName);
    } catch (ExchangeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // exchangeBridge.getContacts(a_sPrefix, a_sMailboxName, a_sFolderName);
    // exchangeBridge.getEmails(a_sMailboxName, a_sFolderName,
    // a_lDateReceived, a_hmFromEmailFilter, a_hmToEmailFilter, a_iMaxAtATime);
} 
```

我正在连接到一个虚拟机，如果这有任何用处的话。如果您想了解更多信息，请不要犹豫。

软件：

虚拟机：

*   微软视窗服务器2003
*   微软展望 2003
*   微软视窗交换服务器 2007。

# java - 制作多个列表视图和项目的金字塔结构

> ID：11796501
> 
> 赞同：1
> 
> 时间：2012-08-03T13:16:10.647
> 
> 标签：java, android, listview, android-listview, items

我正在尝试制作一个应用程序，该应用程序从一个文本视图（问题）开始，然后是一个下拉列表选项（选择答案），具体取决于结果，如果单击该项目，它将带您进入具有更多问题文本视图的不同视图和下拉列表视图选项。最后，根据您选择的选项，最终结果会有所不同。说得通？寻找任何关于如何开始的源代码或示例，以确保它非常重复，所以任何东西都会取悦大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:51:50.333

好吧，要制作下拉列表，您需要使用[此处](http://developer.android.com/guide/topics/ui/controls/spinner.html)详述的微调器对象，然后您需要使用微调器适配器来填充此列表，[这可能很有用](https://stackoverflow.com/questions/867518/how-to-make-an-android-spinner-with-initial-text-select-one)。

一旦用户在您的测验中选择了一个答案，您可以使用不同的问题和答案重新填充相同的布局，通过更改您的 answerArray 并使用`invalidate();`重绘视图来开始下一轮（如果他们得到错误的答案，您将移动到而是“游戏结束”布局）。

至于存储问题和答案，我建议使用某种 SQLite 数据库。SQLite 数据库可以存储在应用程序的数据目录中。Android 有创建、编辑和读取数据库的方法，[看看这个](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)。大多数教程向您展示了如何使用代码创建数据库，但如果您有一个预定义的问题数据库要发布，那么您可以将它放在 assets 文件夹中，然后从那里将其复制到应用程序的数据目录中。

数据库会将问题存储在一个表中，并将答案存储在另一个表中。通过使用问题 ID 字段，您可以显示哪些答案属于哪个问题。您还可以使用真/假布尔字段显示哪些答案是正确的。

当应用程序将答案读入适配器时，您可以创建一个包含文本以及布尔正确/错误值的答案对象

```
public class AnswerObject{
    public String text;
    public boolean isCorrect;

    public AnswerObject(){
        this.text = "";
        this.isCorrect=false;
    }
} 
```

然后为问题中的每个答案创建一个对象并将它们存储在一个数组中

```
AnswerObject[] answers = new AnswerObject[numberOfAnswers];
for(i=0; i<answers.length; i++){
     answers[i].text = textFromDatabase;
     answers[i].isCorrect = booleanFromDataBase; 
} 
```

我为代码中的错误道歉。我是手写的。

# groovy - 闭包是如何执行的？

> ID：11796504
> 
> 赞同：4
> 
> 时间：2012-08-03T13:16:16.127
> 
> 标签：groovy

我对 Groovy 很陌生。我想知道如何在 Groovy 中实现闭包。

让我们说：

```
def a = { println "Hello" }
a() 
```

什么时候`a()`完成，幕后实际发生了什么？调用哪个方法`a()`使闭包可执行？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T14:26:53.677

基本上：

*   您的闭包是具有特定名称的类
*   `a()`调用`doCall()`哪个调用`doCall(Object it)`（隐含`it`在闭包中）
*   `acallsite`包含方法名称 (2 x `println`) - 并使用适当的参数调用

干得好：

对于这个 Groovy 脚本：

```
def a = { println "Hello"; println "Hello2" }
a() 
```

* * *

闭包`a`看起来像这样：

```
class Test$_run_closure1 extends Closure
implements GeneratedClosure
{

    public Object doCall(Object it)
    {
        CallSite acallsite[] = $getCallSiteArray();
        acallsite[0].callCurrent(this, "Hello");
        return acallsite[1].callCurrent(this, "Hello2");
    }

    public Object doCall()
    {
        CallSite acallsite[] = $getCallSiteArray();
        return doCall(null);
    }

    protected MetaClass $getStaticMetaClass()
    {
        if(getClass() != Test$_run_closure1)
            return ScriptBytecodeAdapter.initMetaClass(this);
        ClassInfo classinfo = $staticClassInfo;
        if(classinfo == null)
            $staticClassInfo = classinfo = ClassInfo.getClassInfo(getClass());
        return classinfo.getMetaClass();
    }

    public static void __$swapInit()
    {
        CallSite acallsite[] = $getCallSiteArray();
        $callSiteArray = null;
    }

    private static void $createCallSiteArray_1(String as[])
    {
        as[0] = "println";
        as[1] = "println";
    }

    private static CallSiteArray $createCallSiteArray()
    {
        String as[] = new String[2];
        $createCallSiteArray_1(as);
        return new CallSiteArray(Test$_run_closure1, as);
    }

    private static CallSite[] $getCallSiteArray()
    {
        CallSiteArray callsitearray;
        if($callSiteArray == null || (callsitearray = (CallSiteArray)$callSiteArray.get()) == null)
        {
            callsitearray = $createCallSiteArray();
            $callSiteArray = new SoftReference(callsitearray);
        }
        return callsitearray.array;
    }

    static Class _mthclass$(String s)
    {
        try
        {
            return Class.forName(s);
        }
        catch(ClassNotFoundException classnotfoundexception)
        {
            throw new NoClassDefFoundError(classnotfoundexception.getMessage());
        }
    }

    private static ClassInfo $staticClassInfo;
    public static transient boolean __$stMC;
    private static SoftReference $callSiteArray;

    static 
    {
        __$swapInit();
    }

    public Test$_run_closure1(Object _outerInstance, Object _thisObject)
    {
        CallSite acallsite[] = $getCallSiteArray();
        super(_outerInstance, _thisObject);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T13:25:43.140

它最终调用了其中一种`Closure.call`方法（在本例中[为没有 args](http://groovy.codehaus.org/api/groovy/lang/Closure.html#call%28%29)的方法）

[文档中](http://groovy.codehaus.org/Closures+-+Formal+Definition)有关于此的更多信息

# php - PHP 到 MsSql 查询 - 转义引号 (') 问题

> ID：11796506
> 
> 赞同：1
> 
> 时间：2012-08-03T13:16:21.557
> 
> 标签：php, sql-server, escaping, quotes

我正在构建我的查询：

```
$q = sprintf("UPDATE testTable SET Text='%s', [Read]=0, TimeUpdated='%s', [From]='%s' WHERE ID='%s'", ms_escape_string($text), $dateReceived, $from, $convID); 
```

我执行它：

```
$res = mssql_query($q, $dbhandle); 
```

`$text`应该是自由文本，因此它可以包含各种奇怪的字符（现在让我们坚持使用 ASCII）。最简单的情况是当 $text 包含引号时，例如`$text = "Mc'Donalds"`

在[ms_escape_string](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-mssql-using-php)函数中，我尝试通过将 ' 替换为 2 个引号 '' 来防止这种情况。我回显查询字符串：

```
UPDATE testTable SET Text='Mc''Donalds', [Read]=0, TimeUpdated='2012-08-03 12:44:49', [From]='bogus' WHERE ID='14' 
```

（注意：在同一个数据库上从 VS 服务器资源管理器执行这个查询就可以了）

一切似乎都很好 - 请参阅 Mc''Donalds 的双引号 - 但执行时仍然失败： `[mssql_query(): message: Incorrect syntax near 'Mc'`

我认为 SET QUOTED_IDENTIFIER 可能是罪魁祸首，所以我尝试了

```
 $q = "SET QUOTED_IDENTIFIER OFF";
 $resq = mssql_query($q,$dbhandle); 
```

在执行我的查询但没有雪茄之前 - 我仍然得到同样的错误。

现在我被卡住了 - 我应该改变什么来让包含单引号的字符串通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:36:41.237

这个问题似乎更多地与缺少本机 mssql_real_escape_string() 函数有关，[该线程](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-mssql-using-php?rq=1)已解决该函数。

您应该更担心 SQL 注入攻击，正如评论中提到的，我们中的许多人最终通过更喜欢使用 PDO 解决了这个问题。

这种类型的“为下一个数据接收者准备好转义”构成了 FIEO 口头禅（过滤输入转义输出）的一部分。

# javascript - 连接后更新脚本标签的 Javascript 构建工具

> ID：11796512
> 
> 赞同：4
> 
> 时间：2012-08-03T13:16:56.993
> 
> 标签：javascript, build-process, build-automation

我非常热衷于在我的 Javascript/Web 应用程序开发中使用一些构建技术，例如

*   串联
*   缩小
*   用数据替换图像：uri的
*   构建与源 *
*   应用缓存清单生成 *

最后两个我还没有找到答案。

## 构建与源

我的意思是我的 HTML 和 Javascript 的“源”版本是不变的，这样我就不必每次都构建来预览更改。我所有的 JS 文件都是单独的 <script> 标记，与构建和使用最终连接版本更新这些脚本部分一样。老实说，我觉得所有这些新的 Javascript 构建系统都缺少一些东西，因为这似乎是一个明显的需求，但我找不到其他人在谈论它。其他人是如何处理这个问题的？.. 建立在开发过程中的每一个变化上？肯定不是。

## 应用缓存清单生成

这说明了自己 - 遍历我的源代码树并构建一个清单并将其插入到我的 <html> 标记中。

我没有运气搜索过这两个 - 任何指针？如果不是这两个，我会带着杀手级构建系统上路。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:49:34.030

## 回复：构建与源代码

听起来您已经熟悉 grunt。您可能需要考虑查看[grunt node-build-script plugin](https://github.com/h5bp/node-build-script)。

它添加了许多新任务，尤其是将您`grunt mkdirs`的`grunt copy`项目目录复制到单独的暂存文件夹中，然后将优化的项目复制到发布文件夹中。如果我没记错的话，这就是您保留源文件的“未修改”版本的意思吗？

然后运行`grunt server`将在 localhost 上提供发布文件的内容。如果您想检查处于未优化状态的应用程序，您总是可以将您的 Web 服务器指向您的初始项目目录。

`node-build-script`添加了许多其他超级方便的任务，例如图像优化、自动文件更新和替换。它非常易于使用且超级可定制。

我有一个[基本的单页模板](https://github.com/robinpyon/h5bp-grunt-project)，使用`node-build-script`它也可能感兴趣。

## 回复：App Cache Manifest 生成

我相信这曾经是其中的一部分，`node-build-script`但后来被删除了，见[1](https://github.com/h5bp/node-build-script/issues/32) , [2](https://github.com/h5bp/ant-build-script/issues/59)

然而，没有什么能阻止你创建一个自定义的 grunt 任务，该任务使用了像[confess.js](https://github.com/jamesgpearce/confess)之类的东西。

最后，如果您还没有的话，看起来 Google 即将推出的[Yeoman](http://yeoman.io/)可能值得关注！

# asp.net-mvc - MVC C# 实体框架的专家教程/书籍

> ID：11796513
> 
> 赞同：2
> 
> 时间：2012-08-03T13:16:57.383
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0

我对 C#、对象和类足够熟悉，并且我已经测试了 Entity Framework 4（用于 CRUD 操作的教程、视频、博客）。但我认为这些知识对于具有实际业务方面的大型项目来说是不够的，例如 Ajax 部分更新、jquery、json 数据填充列表等。

对于使用 MVC 进行专业编程，您推荐哪些书籍或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:24:21.853

[ASP.NET MVC in Action](http://manning.com/palermo/)，值得一看的好书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:43:54.840

我喜欢 Steve Sanderson MVC 的书，因为它很好地概述了框架：

[http://www.amazon.co.uk/Pro-ASP-NET-MVC-Framework-Edition/dp/1430234040/ref=sr_1_4?ie=UTF8&qid=1344004976&sr=8-4](http://www.amazon.co.uk/Pro-ASP-NET-MVC-Framework-Edition/dp/1430234040/ref=sr_1_4?ie=UTF8&qid=1344004976&sr=8-4)

相信现在也有一个 MVC4 版本，但没有史蒂夫：

[http://www.amazon.co.uk/Pro-NET-Edition-Professional-Apress/dp/1430242361/ref=sr_1_2?ie=UTF8&qid=1344004976&sr=8-2](http://www.amazon.co.uk/Pro-NET-Edition-Professional-Apress/dp/1430242361/ref=sr_1_2?ie=UTF8&qid=1344004976&sr=8-2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:44:14.853

查看 ASP.NET MVC 站点中的教程。他们有一个很好的[Contoso University 示例](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)MVC 应用程序，它使用实体框架和存储库模式。

您也可以考虑查看 Codeplex/Github 中的一些开源项目并下载源代码并尝试进行一些自定义。这肯定是一个很好的练习。

练习会让你成为专家。所以练习练习练习。写一些代码...

# javascript - 为什么我的全局自定义 jQuery 函数没有被调用？

> ID：11796517
> 
> 赞同：0
> 
> 时间：2012-08-03T13:17:01.780
> 
> 标签：javascript, jquery

[http://jsfiddle.net/xEpGg/740/](http://jsfiddle.net/xEpGg/740/)

如果我在我的脚本使用后直接调用它：

```
$.custom.test(); 
```

它按预期工作。但是，如果我将它放在 HTML 中的任何位置，它就不会触发。我在 jQuery 中定义了我的对象，不应该在页面中的任何地方都可以访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:21:10.417

[请参阅此处](http://jsfiddle.net/xEpGg/743/)的解决方案：您需要先定义自定义功能，然后才能使用它。像这样：

```
 <script>

        $.custom = {
              test : function() { alert("wtf"); }
        };

    </script>

    <div id="helloworld" style="border:solid; border-width:5px;">
        BLAH
    </div>
    <script>
        $.custom.test();
    </script> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:27:49.680

如果您无法按照@frenchie 建议的方式定义函数，请尝试：

```
 setTimeout(function(){$.custom.test();}, 0); 
```

[为什么 setTimeout(fn, 0) 有时有用？](https://stackoverflow.com/questions/779379/why-does-settimeoutfn-0-sometimes-help)

为什么你要为 jQuery 全局分配任何东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:23:09.020

您在加载脚本后将其添加到页面，但`$.custom.test()`在加载之前调用..

![在此处输入图像描述](../Images/0c55a4c36b7d0554d11b96fdba4ee191.png)

将此选项更改为`no wrap (head)`，它将正常工作..

# c# - 如何创建树状结构

> ID：11796518
> 
> 赞同：1
> 
> 时间：2012-08-03T13:17:02.747
> 
> 标签：c#, data-structures

我想创建如下所示的数据结构。 ![在此处输入图像描述](../Images/daa77773a3bb691bfce7e308ba460fa7.png)

对于这个我想去键值对结构。但我无法创建它。

```
public class NewStructure
{
    public Dictionary<string, Dictionary<string, bool>> exportDict;
} 
```

是不是一个正确的方法。如果是这样，我如何向其中插入值。如果我插入喜欢

```
NewStructure ns = new NewStructure();
ns.exportDict.Add("mainvar",Dictionary<"subvar",true>); 
```

它给出了编译错误。我什么都没有想到。请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:20:49.740

您可以通过以下方式摆脱错误

```
Dictionary<string, bool> values = new Dictionary<string, bool> ();
values.Add("subvar", true);
ns.exportDict.Add("mainvar", values); 
```

但也许你最好尝试这样的事情：

```
class MyLeaf
{
  public string LeafName {get; set;}
  public bool LeafValue {get; set;}
}
class MyTree
{
  public string TreeName {get; set;}
  public List<MyLeaf> Leafs = new List<MyLeaf>();
} 
```

接着

```
MyTree myTree = new MyTree();
myTree.TreeName = "mainvar";
myTree.Leafs.Add(new MyLeaf() {LeafName = "subvar", LeafValue = true}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:22:02.300

一方面，您必须先初始化每个字典，然后再添加它们：

```
exportDict = new Dictionary<string, Dictionary<string, bool>>();
Dictionary<string,bool> interiorDict = new Dictionary<string,bool>();
interiorDict.Add("subvar", true);
exportDict.Add("mainvar", interiorDict); 
```

但是如果你知道你的内部字典只有一个键值对，那么你可以这样做：

```
exportDict = new Dictionary<string, KeyValuePair<string,bool>>();
exportDict.Add("mainvar", new KeyValuePair<string,bool>("subvar", true)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:22:08.420

如果你在，你可以用一个来`C# 4.0`完成这个`Dictionary<>``KeyValuePair<>`

你`NewStructure`会变成

```
public class NewStructure
{
    public Dictionary<string, KeyValuePair<string, bool>> exportDict =
        new Dictionary<string, KeyValuePair<string, bool>>(); //this is still a dictionary!
} 
```

你会像这样使用它：

```
NewStructure ns = new NewStructure();
ns.exportDict.Add("mainvar",new KeyValuePair<string,bool>("subvar",true)); 
```

使用字典词典，您可以使每个“叶子”本身成为一个列表。

# facebook-graph-api - 获取用户墙的所有Facebook帖子

> ID：11796519
> 
> 赞同：1
> 
> 时间：2012-08-03T13:17:04.410
> 
> 标签：facebook-graph-api, facebook-php-sdk

我正在使用 Facebook php sdk 来尝试获取用户墙的帖子。

当我使用以下代码时，我只会对事件和一些提及有一些反应，但不会对消息、照片等做出反应。我实际上张贴在我的墙上？

可能是什么问题？

```
$result = $facebook->api('/me/feed/',array('access_token' => $facebook->access_token,'limit'=>100)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:06:16.940

您如何进行身份验证以及您在您的 中要求什么权限`access_token`？如果您不验证您的用户，您将仅限于`public`帖子。您还需要确保`read_stream`在对用户进行身份验证时请求权限。

# php - PHP连接到不同机器上的SQL服务器

> ID：11796521
> 
> 赞同：0
> 
> 时间：2012-08-03T13:17:05.670
> 
> 标签：php, sql, iis

我在 Windows 机器上有一个 PHP 网站，想将数据直接插入到位于另一台机器上的 IIS 服务器上的 SQL 数据库中？

我应该遵循哪种方法？

**我最初的想法是转移到由 IIS 托管的 PHP 页面，该页面执行查询，然后重定向回我的网站。但是，我更喜欢更简单、更简单的方法。

IIS 位于 Windows Server 2008 R2 上。

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:19:28.150

如果您使用的是 PHP，您可以使用 PDO 打开与另一台计算机上的数据库的连接：

```
$remotedb = new PDO("*dbtype*:dbname=*dbname*;host=*addressOfOtherMachine*", $user, $password); 
```

[http://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:30:11.643

**我在 PHP 中使用 SQLSRV 连接到具有 2008 R2 的 IIS6 机器上的数据库。** 我相信远程机器必须允许远程连接，如果不是，则需要通过设置打开。这是我的连接字符串的样子：

```
<?php
    /* NEW CONNECTION FOR SQLSRV DRIVER (for MSSQL access) */
    $uid = "username";
    $pwd = "password";
    $DB = "database_name";
    $serverName = "ip_address_of_remote_server (example: 192.168.0.25)";
    $connectionInfo = array("UID" => $uid, "PWD" => $pwd, "Database"=> $DB, "ReturnDatesAsStrings" => true);
    $conn = sqlsrv_connect( $serverName, $connectionInfo);
?> 
```

这是使用连接的示例**参数化插入查询**：

```
<?php
    $p1 = "values passed from a form";
    $p2 = "values passed from a form";
    $p3 = "values passed from a form";

    $params = array(
        array(&$p1, null, null, SQLSRV_SQLTYPE_VARCHAR(50)),
        array(&$p2, null, null, SQLSRV_SQLTYPE_DATETIME),
        array(&$p3, null, null, SQLSRV_SQLTYPE_VARCHAR(50))
    );

    $sql = "INSERT INTO database_name (column1, column2, column3) values (?,?,?)";
    $stmt = sqlsrv_prepare($conn, $sql, $params);

    if( !$stmt ) { die( print_r( sqlsrv_errors(), true)); } 

    if(sqlsrv_execute( $stmt ) === false ) { die( print_r( sqlsrv_errors(), true)); } 

?> 
```

**有关更多 SQLSRV 参数**，请访问[http://msdn.microsoft.com/en-us/library/cc626305.aspx](http://msdn.microsoft.com/en-us/library/cc626305.aspx)

# php - PHP OOP 返回和调用单个数组值

> ID：11796524
> 
> 赞同：2
> 
> 时间：2012-08-03T13:17:10.357
> 
> 标签：php, oop

我正在学习在 php 中使用 OOP，我遇到了一些问题，这可能是一个非常简单的解决方案，我只是没有使用正确的搜索术语来查找。

我有我的课

```
class user {

    function getUser() {

        if ($_SESSION['status'] == "authorized") {

            $conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );

            $sql = "SELECT * FROM users WHERE username = :username";

            $st = $conn->prepare( $sql );

            $st->bindValue( ":username", $_SESSION['usernames'], PDO::PARAM_STR );

            $st->execute();

            $row = $st->fetch();

            $conn = null;

            return $row;

        }
    }
} 
```

然后在我的模板文件中，我调用以下内容

```
$user = new user();
echo $user->getUser->icon; 
```

希望底线显示我要调用的内容，基本上是在我刚刚调用 $row['icon']; 之后的 sql 结果中。直接从返回数组。

这可能吗？如果是这样，有人可以指出我缺少的术语

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:20:31.923

如果您要继续使用该对象，我将执行以下操作：

```
class user {
    public $icon;

    function getUser() {

    if ($_SESSION['status'] == "authorized") {

        $conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );

        $sql = "SELECT * FROM users WHERE username = :username";

        $st = $conn->prepare( $sql );

        $st->bindValue( ":username", $_SESSION['usernames'], PDO::PARAM_STR );

        $st->execute();

        $row = $st->fetch();

        $conn = null;

        $this->icon=$row;

    }
    }
} 
```

然后你可以使用：

```
echo $user->icon; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:22:06.193

尝试以下操作：

```
print_r ($user->getUser); 
```

如果返回一个数组，试试这样：

```
echo $user->getUser['icon']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:22:18.410

你应该这样使用它：

```
$userobj = new User();
$user = $userobj->getUser(); 
```

现在您在`$user`变量中拥有了获取的数据，并且可以随意输出它：

```
echo $user['icon']; 
```

我的示例应该适用于您现有的代码，如果您想在未来更改用户的值，您只需更改 echo 语句中的键：echo`$user['someothervalue'];`

# php - PHP脚本显示图像BLOB执行了两次？

> ID：11796527
> 
> 赞同：4
> 
> 时间：2012-08-03T13:17:29.520
> 
> 标签：php, database, image, blob

我找不到简洁的方式来总结标题中的问题，请允许我详细说明：

我有一个使用 PHP 脚本“getImg.php”的网站，该脚本从我的数据库中获取图像二进制对象，并在单独页面上的 HTML img 标记调用时显示它。

我想记录人们查看图像的次数，所以我添加了一个简单的行来增加适当图像的“视图”属性。

我认为这很简单，但事实证明它增加了两次。我解决这个问题的方法是使“视图”列浮动并增加 0.5 以增加 1。但是，我今天查看了我的数据库，在一些图像中找到了 0.5！

当我注释掉最后的打印时，它可以正常工作。我假设来自 HTML 标记的调用加上脚本本身算作两次调用？但其他人似乎并非如此。

这只是我的设置吗？

```
<?php

# Connect to db
include('db.php');

# Get ID
$id = $_GET['id'];
if(!is_numeric($id)) exit;

$q = $db->prepare("SELECT tNail,image,format FROM gallery WHERE id = '$id'");
$q->execute();
$row = $q->fetch(PDO::FETCH_ASSOC);

if(array_key_exists("thumb", $_GET))
    $img = base64_decode($row["tNail"]);
else
{
    $img = base64_decode($row["image"]);

    # Add to views if not thumb
    // 0.5 because script called twice due to print?
    $db->query("UPDATE gallery SET views = (views + 0.5) WHERE id = '$id'");
}

switch($row["format"])
{
    case ".jpg":
        header("Content-type: image/jpeg");
        break;
    case ".png":
        header("Content-type: image/png");
        break;
}

print $img;

?> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:00:35.613

这似乎是一个浏览器问题。像 Chrome 这样的浏览器可以预取图像，因此它会被加载一次，如果用户点击图像的链接 - 它会被加载两次。

**检查**：

Load a image with your browser and then check your apache access.log and if you see 2 request at the same time it is a browser issue.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:49:22.893

这是你的问题：

```
if(array_key_exists("thumb", $_GET))
    $img = base64_decode($row["tNail"]);
else
{$img = base64_decode($row["image"]);//<== 
```

您将此`if...else`分支作为 1 行交易开始，但在 else 情况下，您正在执行代码块。php 开始执行 if 下面的 1 行，跳过 else 和后续的第一行，并继续执行，就好像关闭 barcket 不存在一样。我认为这是一个错误。我最近听到很多人抱怨这件事。（从 5.3.7 或其他版本开始）。将您的ini设置为`E_STRICT`错误报告并检查是否有任何不同

* * *

看起来 Besnik 在我开始研究它之前就找到了它（做得好，+1）。@Lee：这是避免此问题的方法：

```
RewriteEngine On
SetEnvIfNoCase X-Forwarded-For .+ proxy=yes
SetEnvIfNoCase X-moz prefetch no_access=yes

# block pre-fetch requests with X-moz headers
RewriteCond %{ENV:no_access} yes
RewriteRule .* - [F,L] 
```

[在这里](http://www.askapache.com/htaccess/modrewrite-tips-tricks.html#Stop_browser_prefetching)找到这个

* * *

```
if(array_key_exists("thumb", $_GET))
{
    $img = base64_decode($row["tNail"]);
}
else
{
    $img = base64_decode($row["image"]);
    $db->query("UPDATE gallery SET views = (views + 0.5) WHERE id = '$id'");
} 
```

如果其中一个分支缺少可能导致问题的花括号。同样：如果 if 语句不包含在代码块中，则只有 else 语句之后的第一个语句（直到第一个分号的所有代码）将被解释为分支。在您的情况下，这是对`$img`变量的赋值。在这两种情况下都会调用数据库插入。

您可以使用以下命令检查天气或是否执行 db 查询`__halt_compiler`：

```
if(array_key_exists("thumb", $_GET))
{
    $img = base64_decode($row["tNail"]);
}
else
{
    $img = base64_decode($row["image"]);
    if ($db->query("UPDATE gallery SET views = (views + 0.5) WHERE id = '$id'"))
    {
        if (array_key_exists("thumb", $_GET))
        {//this should be an impossible branch
            __halt_compiler();//or exit || throw if this is a (member) function
        }
    }
} 
```

该`__halt_compiler()`函数不能在除全局命名空间之外的任何其他范围内使用，并且仅影响当前正在执行的脚本，如果此脚本是包含的-例如- the `index.php`，则 index.php 将按原样进行，但包含脚本将停止。[阅读文档](http://www.php.net/manual/en/function.halt-compiler.php)以获得更全面的解释（我不擅长解释事情）。

* * *

所有这一切都不会帮助您在解决这个问题时避免这个问题，所以我建议暂时解决这个问题：

```
if(array_key_exists("thumb", $_GET))
{
    $img = base64_decode($row["tNail"]);
    $db = null;//disconnect
}
else
{
    $img = base64_decode($row["image"]);
    if ($db !== null)
    {//or $db instanceof PDO (or whatever object you're using)
     //or try{$db->query('UPDATE...');}catch(Exception $e){}//<- suppress exception
        $db->query("UPDATE gallery SET views = (views + 0.5) WHERE id = '$id'");
    }
} 
```

让我知道以上哪些方法有效，或者您是否仍然遇到同样的问题。我发现这是一个非常好奇且因此很有趣的案例 :)

# c# - 如何在 C# 中调用 SQL 函数？

> ID：11796530
> 
> 赞同：7
> 
> 时间：2012-08-03T13:17:34.280
> 
> 标签：c#, sql, sql-server-2008, function

我在 SQL 中创建了一个函数，现在我需要在我的 C# 应用程序中使用该函数。

我尝试使用这样的东西，但似乎我做错了，因为我得到：

```
Must declare the scalar value '@2064734117' 
```

...当我`2064734117`作为第一个参数和`1`第二个参数给出时。这是我正在谈论的代码：

```
SqlConnection con = new SqlConnection(clsDb.connectionString);
string query = string.Format("select Function1(@{0},@{1}) ",
  int.Parse(e.CurrentRow.Cells["CodeMeli"].Value.ToString()),1);
con.Open();
SqlCommand cmd = new SqlCommand(query,con);
SqlDataAdapter READER = new SqlDataAdapter();
READER.SelectCommand = cmd;
DataTable table = new DataTable();
READER.Fill(table);
radGridView1.DataSource = table;
con.Close(); 
```

我的函数接受两个整数参数并返回一个表。我在 Visual Studio 中检查了它，它工作正常，但我无法让它在我的应用程序中工作。

这是我的函数声明：

```
ALTER FUNCTION dbo.Function1
(
/*
@parameter1 int = 5,
@parameter2 datatype
*/
@ID int,
@clsTypeID int
)
    RETURNS TABLE/* @table_variable TABLE (column1 datatype, column2 datatype) */
    AS
         /*BEGIN */
    /* INSERT INTO @table_variable
       SELECT ... FROM ... */
RETURN SELECT  * FROM tblCLASS2 
        WHERE STNID = @ID AND CLASSTYPEID =  @clsTypeID  
/*END */
/*GO*/ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T13:25:43.960

你的 SQL 有点不对劲，应该是：

```
 string query = string.Format("select * from dbo.Function1({0},{1});", int.Parse(e.CurrentRow.Cells["CodeMeli"].Value.ToString()),1); 
```

您可能希望使用 SqlParameter-objects 来防止 sql 注入：

```
 string query = "select * from dbo.Function1(@pa1,@par2);";
  cmd.Parameters.Add("@par1", SqlDbType.Int).Value = int.Parse(e.CurrentRow.Cells["CodeMeli"].Value.ToString());  
  cmd.Parameters.Add("@par2", SqlDbType.Int).Value = 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T13:24:38.110

乍一看，我首先看到的是您没有指定对象所有者/模式；这是功能所必需的，所以它应该是`select dbo.Function1(...`

第二：看看你的调用`string.Format`产生了什么；那是为另一个整数生成`@1`和，但这**不是**一个有效的参数名称。这很方便，因为`@n``n`

 **第三：你没有添加任何参数

第四：对于表 UDF（而不是标量 UDF），您必须`select * from dbo.Function1(...`，而不仅仅是`select dbo.Function1(...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:23:39.590

你可以这样做：

```
 myConn.Open();

        //generating the new command for our database
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT OBJECTID_1, NDNT as theAddress, MIN(ABS(x - " + double.Parse(x.ToString()) + ") + ABS(y - " + double.Parse(y.ToString()) +")) from dbo.DWH_OUTPUT  GROUP BY OBJECTID_1,NDNT HAVING   (MIN(ABS(x - " + double.Parse(x.ToString()) + ") + ABS(y - " + double.Parse(y.ToString()) + ")) = (Select MIN(ABS(a.x - " + double.Parse(x.ToString()) + ") + ABS(a.y - " + double.Parse(y.ToString()) + ")) from dbo.DWH_OUTPUT a ) )";
        cmd.Connection = myConn;

        //getting some more ado.net objects
        SqlDataAdapter da = new SqlDataAdapter();
        DataSet ds = new DataSet();

        da.SelectCommand = cmd;
        da.Fill(ds, @"Addresses");

        if (ds.Tables[0].Rows.Count > 0)
        {
            theAddress = ds.Tables[0].Rows[0][@"theAddress"] + @" (proximity address)";
        }

        myConn.Close(); 
```

请注意，在此示例中，如何将 SqlCommand 的 CommandType 设置为`CommandType.Text`. 指定您的命令参数（即代码片段中的选择函数），然后使用该`Fill`方法填充数据集。然后，您可以像通常使用标准 ado.net 一样从行中提取值。

如果您需要调用存储过程，请查看以下内容：

[如何从 ado.net 调用 TSQL 函数](https://stackoverflow.com/questions/4145329/how-do-i-call-a-tsql-function-from-ado-net)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:24:40.210

您需要具有所有者/模式名称的函数的完全限定名称 [以下链接提供的工作示例：](https://stackoverflow.com/questions/1056390/how-to-use-sql-user-defined-functions-in-net)**

# ios - 用于交互式书籍的最佳控制器是什么？

> ID：11796532
> 
> 赞同：0
> 
> 时间：2012-08-03T13:17:38.630
> 
> 标签：ios, uiviewcontroller

我正在 iOS 中创建交互式触控书。我想知道最好的控制器用于书籍。（例如 UIViewController、NavigationController 等）。我更愿意保留故事板选项。

其次，处理页面的最佳方式是什么？每个页面都有一个单独的 ViewController？每个页面都有单独的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:13:37.943

## [UIPageViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

从文档：

> 页面视图控制器允许用户使用指定的转换在视图控制器之间导航。导航可以由用户使用手势和编程控制。
> 
> 通过 setViewControllers:direction:animated:completion: 方法一次提供一个视图控制器（或一次提供两个，取决于脊椎位置和双面状态），或者根据数据源的需要提供。仅当提供数据源时才启用基于手势的导航。
> 
> 要更改此类的行为，您应该提供数据源和委托。这个类不打算被子类化。

至于您的第二个问题，是的，将每个页面作为视图控制器进行管理是最简单的，因为 UIPageViewController 是一个容器视图控制器，并且它包含一组视图控制器。

# html - 在 ul 中堆叠的问题

> ID：11796536
> 
> 赞同：2
> 
> 时间：2012-08-03T13:17:50.267
> 
> 标签：html, css, html-lists, z-index, css-position

我在 HTML 页面中的元素堆叠遇到问题。我需要让**span** (class= **"class_span"** ) 具有比带边框的**div** (class= **"class_div" ) 更高的堆叠顺序。**我试图改变 z-index 但没有运气。我知道我不应该使用绝对位置，但是页面依赖于它，对不起。我怎样才能做到这一点？

**HTML**：

```
<ul>
    <li>
        <div class="class_div">
        </div>
        <span class="class_span">
            <a href="google.com">google</a>
        </span>
    </li>
</ul>​ 
```

**CSS**：

```
.class_div{
    position: absolute; 
    border: 100px solid; 
    width:100px;
    height:50px;
    left:0px;
}
.class_span{
    float: left;
}​ 
```

[现场演示](http://jsfiddle.net/YMrLd/10/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:25:48.110

添加`position: relative`到跨度，以便您可以`z-index`在其上应用。请注意，`z-index`您的跨度的 必须高于 的，`div`以便它出现在 之上`div`：

```
.class_div{
    position: absolute; 
    border: 100px solid; 
    width:100px;
    height:50px;
    left:0px;
    z-index: 1;
}
.class_span{
    float: left;
    position: relative;
    z-index: 10;
}​ 
```

**[例子](http://jsfiddle.net/YMrLd/17/)**

**编辑：**

作为 的替代方法`float: left`，您可以考虑使用`position: absolute`并设置`left`为`0px`：

```
.class_span{
    position: absolute;
    left: 0;
    z-index: 10;
}​ 
```

您可能还需要设置`top`，并且可能还需要将父元素设置为`position`，`relative`以便可以相对于该父元素定位跨度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:25:02.927

`position:absolute`将从流中删除一个元素。您还需要使用更高`position`的.`.class_span``z-index`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:31:57.683

请检查这个。 [http://jsfiddle.net/YMrLd/18/](http://jsfiddle.net/YMrLd/18/)

小提琴链接中有以下 CSS。

```
.class_div{
    position: absolute; 
    border: 100px solid; 
    width:100px;
    height:50px;
    left:0px;
}
.class_span{
    position: absolute; 
    top: 100px;
    left: 100px;
}​ 
```

让我知道你需要任何不同的东西。如果这没有帮助，请附上您所需输出的屏幕截图。

# git - 合并的 git 遥控器在单个遥控器上不可见

> ID：11796539
> 
> 赞同：0
> 
> 时间：2012-08-03T13:17:58.483
> 
> 标签：git, github, bitbucket, git-remote

我有以下 git 远程配置，以便将更改推送到两个单独的存储库（受[来自多个远程位置的拉/推的](https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations#answer-3195446)启发）：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@bitbucket.org:sgrodzicki/test.git
    url = git@github.com:sgrodzicki/test.git 
```

这很好用，直到我在某处制作新的克隆：

```
git clone git@bitbucket.org:sgrodzicki/test.git 
```

克隆配置只有一个主机：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@bitbucket.org:sgrodzicki/test.git 
```

与其他存储库（GitHub）相同：

```
git clone git@github.com:sgrodzicki/test.git 
```

然后它看起来像这样：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@github.com:sgrodzicki/test.git 
```

我的问题是：**如何使这些配置更改在两台主机上都可见？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:29:40.053

你的遥控器的配置不是被克隆的信息的一部分——就像你的 git 目录中的许多东西一样，它被认为是私人信息。

您只需在每个存储库中执行以下操作：

```
git remote set-url --add origin git@github.com:sgrodzicki/test.git 
```

...克隆后。

# php - 从 PHP 插入时在 MongoDB 上执行 JS

> ID：11796546
> 
> 赞同：3
> 
> 时间：2012-08-03T13:18:34.923
> 
> 标签：php, javascript, json, mongodb

使用 mongo shell 时，我可以运行如下内容：

```
db.sandbox.insert({"line" : db.eval('storedFunction()') })
       or
db.sandbox.insert({"line" : function() {return 1337} }) 
```

我无法使用 php 达到相同的效果。我想做的是运行类似于

```
$fnc = "function() {return 123}";
$col = (new Mongo)->database->collection;
$col->insert(['col' => new MongoCode($fnc)]); 
```

并找到

```
{
   "_id" : ...., 
   "col" : 123
} 
```

在集合中。我怎样才能做到这一点？甚至可能吗？

* * *

如果您想要更多详细信息，我正在尝试模仿自动增量。我正在编写的这个函数应该检索增量字段的最后使用值，将其递增并返回该值，从而为正在插入的文档分配一个唯一值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:59:55.173

JavaScript 函数是 BSON 中的一等类型（参见[规范](http://bsonspec.org/#/specification)），因此在两个示例（JS shell 和 PHP）中，您都将函数本身存储在字段中。如果要评估函数，则必须执行服务器端 JavaScript。考虑这个例子：

```
<?php

$m = new Mongo();
$db = $m->test;
$c = $db->foo;
$c->drop();

$f = 'function() { return 123; }';

$c->insert(['f' => new MongoCode($f)]);
var_dump($c->findOne()['f']);

$g = <<<'END'
    function() {
        var doc = db.foo.findOne();
        db.foo.update(
            { _id: doc._id },
            { $set: { f: doc.f() }}
        );
    }
END;

$db->execute(new MongoCode($g));

$c->insert(['f' => new MongoCode($f)]);
var_dump($c->findOne()['f']); 
```

它产生以下输出：

```
object(MongoCode)#7 (2) {
  ["code"]=>
  string(26) "function() { return 123; }"
  ["scope"]=>
  array(0) {
  }
}
float(123) 
```

如果您的函数依赖于某些外部状态（例如，它需要运行查询来计算其结果），您可能希望将其存储在单独的字段中并定期迭代您的文档并更新另一个字段以保存其输出。在您实现这一点时，请记住[服务器端代码评估](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution)有几个并发限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:25:15.010

你不能用 MongoDB 做你想做的事。当您在 shell 中运行示例时，它`db.eval...`首先调用该位，然后将计算结果作为文档的一部分传递。Mongo 在写入操作期间唯一会评估的是特殊修饰符字段作为更新（或 upsert，如果需要）的一部分。但是，这些都不会让你做一个每个集合的计数器。

对于自动增量，您需要执行两个查询。您可以使用`findAndModify`以原子方式递增和检索数字，然后将其分配给您的`lines`值。

以下是您从 shell 执行此操作的方法：

```
counter = db.counters.findAndModify({
  query: {_id: "line-counter"}, 
  update: {$inc: {value: 1}}, 
  new: true, 
  upsert: true}).value
db.sandbox.insert({line: counter}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:13:53.610

既然你正在尝试做一个增量领域，请让我说你做错了。

正如@jmikola 所说，服务器端评估存在严重问题，包括它几乎与包括分片在内的所有内容不兼容。事实上，我什至建议不要过多地学习服务器端执行，以至于我什至不会向您展示如何做到这一点的示例。

我建议你远离 JS 的服务器端执行，它不像 SQL 中的存储过程或触发器，而且运行起来也不一样。JS 控制台只是另一个驱动程序，很像 MySQL 控制台，我认为这就是您感到困惑的地方，您有些人认为控制台就像服务器端执行（存储过程等），但事实并非如此，它只是另一个客户。

Map Reduce 是唯一真正受支持的真正“服务器端”执行。您当然可以将脚本存储在 system.js 中以备将来使用，但这更多是为了将繁琐的 MR 脚本存储在数据库中，这样您就不必经常将它们写出或通过网络反复发送大文件。

> 我正在编写的这个函数应该检索增量字段的最后使用值

这个函数肯定不会像你期望的那样工作，因为并发会使这个新 ID 无效，因为它可能已经被另一个插入使用。当然，这取决于插入的频率，但即使在轻微负载下，您的 ID 也不会正确增加。

要实现自动递增 ID，您实际上可以使用 findandmodify ，如下所示：[http](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field) ://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field和 @MrKurts 答案。

# vb.net - 不支持关键字：VB.NET 中的“故障转移伙伴：sql-failover；初始目录”

> ID：11796549
> 
> 赞同：1
> 
> 时间：2012-08-03T13:18:57.747
> 
> 标签：vb.net, sql-server-2008-r2, mirroring

我们有一个为镜像配置的 SQL Server。今天最初的服务器出现故障，除了 VB.NET 应用程序外，我们几乎所有的应用程序都正确故障转移。

当它启动设置连接字符串时，我收到以下错误：

```
"Keyword not supported: 'failover partner:sql-failover;initial catalog'." 
```

这是连接的代码：

```
 Dim sConnectionString As String
    Dim sServer As String

    Try
        'Always connect to production server to get startup environment variables
        If gbIsProduction Then
            If gsProductionServer = "" Then
                sServer = "PROD-SQL"
            Else : sServer = gsProductionServer
            End If
        Else : sServer = gsDevelopmentServer
        End If
        sConnectionString = "Data Source=" & sServer & ";Failover Partner:SQL-FAILOVER;Initial Catalog=*****;User ID=****;Password=******;"
        cnSystem.ConnectionString = sConnectionString
        cnSystem.Open()
        cmdSystem.Connection = cnSystem
    Catch ex As Exception
        RaiseError("", "modGeneral." & System.Reflection.MethodBase.GetCurrentMethod().Name, Err.Number, Err.Description) 
```

有什么理由吗？我知道 .NET 1.1 不支持故障转移合作伙伴，但我使用的是框架 3.5 SP1。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:22:17.793

这部分连接字符串是错误的

```
....;Failover Partner:SQL-FAILOVER;..... 
```

应该

```
....;Failover Partner=SQL-FAILOVER;...... 
```

# javascript - 自动将 HTML5 画布裁剪为内容

> ID：11796554
> 
> 赞同：28
> 
> 时间：2012-08-03T13:19:09.527
> 
> 标签：javascript, html, html5-canvas

假设这是我的画布，上面画着一张邪恶的脸。我想用来`toDataURL()`将我的邪恶面孔导出为 PNG；然而，整个画布被光栅化了，包括邪恶的脸和画布边缘之间的“空白”。

```
+---------------+
|               |
|               |
|     (.Y. )    |
|      /_       |
|     \____/    |
|               |
|               |
+---------------+ 
```

将我的画布裁剪/修剪/收缩到其内容的最佳方法是什么，所以我的 PNG 不大于面部的“边界框”，如下所示？最好的方法似乎是缩放画布，但假设内容是动态的......？我确信应该有一个简单的解决方案，但它正在逃避我，有很多谷歌搜索。

```
+------+
|(.Y. )|
| /_   |
|\____/|
+------+ 
```

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-03-08T09:49:03.913

**已编辑**（见[评论](https://stackoverflow.com/questions/11796554/automatically-crop-html5-canvas-to-contents#comment106458193_22267731)）

```
function cropImageFromCanvas(ctx) {
  var canvas = ctx.canvas, 
    w = canvas.width, h = canvas.height,
    pix = {x:[], y:[]},
    imageData = ctx.getImageData(0,0,canvas.width,canvas.height),
    x, y, index;

  for (y = 0; y < h; y++) {
    for (x = 0; x < w; x++) {
      index = (y * w + x) * 4;
      if (imageData.data[index+3] > 0) {
        pix.x.push(x);
        pix.y.push(y);
      } 
    }
  }
  pix.x.sort(function(a,b){return a-b});
  pix.y.sort(function(a,b){return a-b});
  var n = pix.x.length-1;

  w = 1 + pix.x[n] - pix.x[0];
  h = 1 + pix.y[n] - pix.y[0];
  var cut = ctx.getImageData(pix.x[0], pix.y[0], w, h);

  canvas.width = w;
  canvas.height = h;
  ctx.putImageData(cut, 0, 0);

  var image = canvas.toDataURL();  //open cropped image in a new window
  var win=window.open(image, '_blank');
  win.focus();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T15:35:57.320

如果我理解得很好，您想“修剪”掉所有围绕您的图像/绘图，并将画布调整到该大小（就像您在 Photoshop 中执行“修剪”命令一样）。

我将这样做。

1.  遍历所有画布像素，检查它们的 alpha 分量是否 > 0（这意味着在该像素中绘制了一些东西）。或者，您可以检查 r、g、b 值，例如，如果您的画布背景充满纯色。

2.  获取最左上角非空像素的坐标，与最右下角相同。因此，您将获得一个包含非空画布区域的想象“矩形”的坐标。

3.  存储该区域的像素数据。

4.  将您的画布调整为新尺寸（我们在步骤 2 中获得的区域。）

5.  将保存的区域粘贴回画布。

等等，瞧 :)

根据画布的大小，访问像素数据非常慢（如果它很大，可能需要一段时间）。使用原始画布像素数据有一些优化（我认为在 MDN 上有一篇关于这个主题的文章），我建议你在谷歌上搜索一下。

我在 jsFiddle 中准备了一个小草图，您可以将其用作代码的起点。

[jsFiddle 的工作示例](http://jsfiddle.net/yHyPX/1/)

希望我对你有所帮助。
C：。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-15T18:08:45.713

这是我的看法。我觉得所有其他解决方案都过于复杂。虽然，在创建它之后，我现在看到它与其他解决方案相同，但希望他们只是共享一个小提琴而不是一个函数。

```
function trimCanvas(canvas){
    const context = canvas.getContext('2d');

    const topLeft = {
        x: canvas.width,
        y: canvas.height,
        update(x,y){
            this.x = Math.min(this.x,x);
            this.y = Math.min(this.y,y);
        }
    };

    const bottomRight = {
        x: 0,
        y: 0,
        update(x,y){
            this.x = Math.max(this.x,x);
            this.y = Math.max(this.y,y);
        }
    };

    const imageData = context.getImageData(0,0,canvas.width,canvas.height);

    for(let x = 0; x < canvas.width; x++){
        for(let y = 0; y < canvas.height; y++){
            const alpha = imageData.data[((y * (canvas.width * 4)) + (x * 4)) + 3];
            if(alpha !== 0){
                topLeft.update(x,y);
                bottomRight.update(x,y);
            }
        }
    }

    const width = bottomRight.x - topLeft.x;
    const height = bottomRight.y - topLeft.y;

    const croppedCanvas = context.getImageData(topLeft.x,topLeft.y,width,height);
    canvas.width = width;
    canvas.height = height;
    context.putImageData(croppedCanvas,0,0);

    return canvas;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-11T17:14:52.530

这里投票得最多的答案，以及我在网上找到的实现修剪一个额外的像素，这在尝试从画布中修剪文本时非常明显。我写了自己的，对我来说效果更好：

```
var img = new Image;
img.onload = () => {

  var canvas = document.getElementById('canvas');
  canvas.width = img.width;
  canvas.height = img.height;
  var ctx = canvas.getContext('2d');
  ctx.drawImage(img, 0, 0);

  document.getElementById('button').addEventListener('click', ()=>{
    autoCropCanvas(canvas, ctx);
    document.getElementById('button').remove();
  });

};
img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABooAAAA2CAYAAADwOsspAAAF/0lEQVR4nO3dTagdZx3H8W+sxQgqGrWbahEqLopGUAm60iqI2IWrdKOigmC7EepLNi6ELiwUFLTNQiG1i4ogUrUKgvj+AoouasWXlrZWogYsxlZFE5umLmZKbk7n3Nxz3zI3fD4wXGbuM//n95zlf86ZpwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgPEeqp6oPXGDc5dUt1R+rv1SPVJ/c0WTnu7s63ZD1YxP/v9j5VjH3tci3NfLNc24AAAAAACbc19C0/f4Fxh2pzlQHx/Prqx/uXKxJr255g3kO+VYx97XItzXyzXNuAAAAAADWeE31aPXX6snqZeuM/U51/5rzZ1UHdi7apPUazHPIt4q5r0W+rZFvnnMDAAAAALDGrdXR6jMNjdsj64z9VXXvboRax3oN5jnkW8Xc1yLf1sg3z7kBAAAAAC5pz60+VT1YnWjY5+Mr1Tsnxu6rjldvql7X0Li9b2Lc4epUdXY8To3HDWvGHKy+W/2n+nt1V/XWseYT4/hVM66t+bfq9upQz2wwX4x8V1Wfrn47jjle3dPQAJ8y57XIJ99O5dvuuQEAAAAAuIDPVw9ULx/PX1x9u+lv6F9bPbTm/HcNzduDE2Nr+Tf9r64eqx6u3lJdWd04nk/9amAjGZfV/NmSmrud7/3VyYaGd9XzqzsamuHXbHD+uaxFPvl2Kt92zg0AAAAAwAacqI4tXDtYfW1i7LHq5jXnn2ho3t66pPayBu6XxvvevHD9c003gzeScdWau53vuuqmhTHPaXhQdHSL85fPWr5LI992zg0AAAAAwAb8uvpn9Z6GBxfL7G/4pv+r1lx7RcMrn/7csIH8oqkG7r7q8YZXUC16R9PN4Atl3EzN3cy3ngeqH2xx/vJZy7f3823n3AAAAAAAbNCh6pGGJuxjnds/ZNHh6pcT13863jt1z1QD9yXj+N9MjH9t083gC2XcTM3dzFfD3jBHxvn+0bn9VM5WP99Da5FPvp3Kt51zAwAAAACwgmdX76q+XP23oSF758KYr3du4/m1xxPj+Dsm6k41cF/a5prB62XcbM3dylf11YaHQjc27E/0tD90/oOiua9FPvl2Kt92zg0AAAAAwAZdtnB+RfXjhqbs68drB6p/N3zjf9GB6n8Nr4zav/C/9V5HdXKi1rLXS10o42Zq7ma+FzQ8JPrFRM3FB0VzX4t88u1Uvu2cGwAAAACADTrd+b9wqfpgQ1P2beP5DdU969T4xjj++oXrq25w/9mmm8Ebybhqzd3Mt786M8631uXVvzr/QdFm5i+ftXyXRr7tnBsAAAAAgA04U32hc83jK6ofVX9q2Fenhn2IDq9T43BDE/ebC9eXNXCvbtgf5eGGhvCV1YeqnzTdDN5IxmU1H1pSc7fz3T3e+9HqeeOYO8driw+K5r4W+eTbqXzbOTcAAAAAABvw7upbDY3iEw0b3R+rrmpo0p5qaNCerm6buP+28X9Pjcep6qbx79nxOFU9uHDfwep7DXukPFodrd441vjIChmX1TxZ3VVdO9Z8en+lGh5s7Xa+F1a3V8cbXuN3b/Xh6v41GQ7tkbXIJ99O5dvuuQEAAAAA2EPe3tAMft/FDrLE3POtYu5rkW9r5AMAAAAAYLauqb44cf3mhl8GvHJ34zzD3POtYu5rkW9r5AMAAAAAYM95Q/Vk9d5qX3VZdV31eMP+KRfb3POtYu5rkW9r5AMAAAAAYM95UXVLwz49Jxqaxr+vPt7QSL7Y5p5vFXNfi3xbIx8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACXrv8D9cs03XV5TWUAAAAASUVORK5CYII=';

function autoCropCanvas(canvas, ctx) {
		var bounds = {
			left: 0,
			right: canvas.width,
			top: 0,
			bottom: canvas.height
		};
		var rows = [];
		var cols = [];
		var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
		for (var x = 0; x < canvas.width; x++) {
			cols[x] = cols[x] || false;
			for (var y = 0; y < canvas.height; y++) {
				rows[y] = rows[y] || false;
				const p = y * (canvas.width * 4) + x * 4;
				const [r, g, b, a] = [imageData.data[p], imageData.data[p + 1], imageData.data[p + 2], imageData.data[p + 3]];
				var isEmptyPixel = Math.max(r, g, b, a) === 0;
				if (!isEmptyPixel) {
					cols[x] = true;
					rows[y] = true;
				}
			}
		}
		for (var i = 0; i < rows.length; i++) {
			if (rows[i]) {
				bounds.top = i ? i - 1 : i;
				break;
			}
		}
		for (var i = rows.length; i--; ) {
			if (rows[i]) {
				bounds.bottom = i < canvas.height ? i + 1 : i;
				break;
			}
		}
		for (var i = 0; i < cols.length; i++) {
			if (cols[i]) {
				bounds.left = i ? i - 1 : i;
				break;
			}
		}
		for (var i = cols.length; i--; ) {
			if (cols[i]) {
				bounds.right = i < canvas.width ? i + 1 : i;
				break;
			}
		}
		var newWidth = bounds.right - bounds.left;
		var newHeight = bounds.bottom - bounds.top;
		var cut = ctx.getImageData(bounds.left, bounds.top, newWidth, newHeight);
		canvas.width = newWidth;
		canvas.height = newHeight;
		ctx.putImageData(cut, 0, 0);
	}
```

```
<canvas id=canvas style='border: 1px solid pink'></canvas>
<button id=button>crop canvas</button>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-16T17:33:03.980

这是 ES 语法中的代码，简短、快速、简洁：

```
/**
 * Trim a canvas.
 * 
 * @author Arjan Haverkamp (arjan at avoid dot org)
 * @param {canvas} canvas A canvas element to trim. This element will be trimmed (reference)
 * @param {int} threshold Alpha threshold. Allows for trimming semi-opaque pixels too. Range: 0 - 255
 * @returns {Object} Width and height of trimmed canvcas and left-top coordinate of trimmed area. Example: {width:400, height:300, x:65, y:104}
 */
const trimCanvas = (canvas, threshold = 0) => {
    const ctx = canvas.getContext('2d'),
        w = canvas.width, h = canvas.height,
        imageData = ctx.getImageData(0, 0, w, h),
        tlCorner = { x:w+1, y:h+1 },
        brCorner = { x:-1, y:-1 };

    for (let y = 0; y < h; y++) {
        for (let x = 0; x < w; x++) {
            if (imageData.data[((y * w + x) * 4) + 3] > threshold) {
                tlCorner.x = Math.min(x, tlCorner.x);
                tlCorner.y = Math.min(y, tlCorner.y);
                brCorner.x = Math.max(x, brCorner.x);
                brCorner.y = Math.max(y, brCorner.y);
            }
        }
    }

    const cut = ctx.getImageData(tlCorner.x, tlCorner.y, brCorner.x - tlCorner.x, brCorner.y - tlCorner.y);

    canvas.width = brCorner.x - tlCorner.x;
    canvas.height = brCorner.y - tlCorner.y;

    ctx.putImageData(cut, 0, 0);

    return {width:canvas.width, height:canvas.height, x:tlCorner.x, y:tlCorner.y};
} 
```

# php - 是或否的php代码

> ID：11796558
> 
> 赞同：1
> 
> 时间：2012-08-03T13:19:27.577
> 
> 标签：php

```
<body background="logo1.jpg">
<IMG SRC="ONGC.jpg" ALT="some text" WIDTH=1050 HEIGHT=306>

<form method="post" action="passing.php">
<br>
<font size="5" color="800517"><b>&nbsp;PLEASE LOG IN TO ENTER VISITOR DETAILS</b></font>
<input type="radio" name="yes" value="v1"><b>YES
  <input type="radio" name="yes" value="V2">NO</b></p></p>
<input type="submit" name="submit" value="approve"/>
<input type="button" value="Reload Page" onClick="document.location.reload(true)">

</form> 
```

我已经在 html 中编写了这个简单的程序。现在我的查询是如何写下是/否按钮的 php 代码。即如果单击并提交是按钮，那么只有我将被重定向到 pass.php 页面，否则它会将我重定向回相同的当前页面..谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:27:33.737

HTML：

```
<input type="radio" name="yes" value="1"><b>YES</b>
<input type="radio" name="yes" value="0"><b>NO</b> 
```

PHP：

```
if (!empty($_POST['yes'])) {
  // Yes
} else {
  // No
} 
```

以这种方式将`1`/`0`与[`empty()`](http://php.net/manual/en/function.empty.php)) 结合使用可以适应用户的选择，并允许该值完全丢失（在这种情况下，它默认为“否”）。

是/否是一个布尔（真/假）决定，应该这样对待。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:22:24.487

```
$_POST['yes'] 
```

如果用户做出选择，将包含 eityer **v1**或**V2 。**使用**isset($_POST['yes'])**查看是否进行了选择，或者是否在没有 'yes' 参数的情况下调用了passing.php。然后检查它是**v1**，**V2**还是其他东西并相应地处理案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:22:24.687

检查设置了哪个值：

```
switch($_POST['yes']) {
  case 'v1': // checked 'yes'
  break;
  case 'V2': // checked 'no'
  break;
  default: // didn't check anything
} 
```

您可以使用生成 HTTP 重定向`header('Location: http://example.com/page.php'); exit;`

# java - 读取调制解调器固件版本：Android

> ID：11796562
> 
> 赞同：2
> 
> 时间：2012-08-03T13:19:30.837
> 
> 标签：java, android, android-firmware

我正在开发一个在 iPhone 和 Android 中的应用程序，我需要`Modem Firmware Version`像 iPhone 开发人员在他身边那样阅读。

我在 Internet/SO 上进行了搜索，但找不到与我的问题相关的任何内容。

***`Modem Firmware Version`安卓可以阅读吗？如果不是，应该等同于什么？***（我们阅读此属性和更多内容以跟踪设备）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T07:31:36.497

正如nandeesh所说，使用基带版本代替调制解调器固件，他没有提供任何自定义方法的源代码。

*我做了一些 RnD 并得到了最终解决方案*

```
private static final String BASEBAND_VERSION = "gsm.version.baseband";

/**
     * Returns a SystemProperty
     *
     * @param propName The Property to retrieve
     * @return The Property, or NULL if not found
     */
    public static String getSystemProperty(String propName) {
        String TAG = "TEst";
        String line;
        BufferedReader input = null;
        try {
            Process p = Runtime.getRuntime().exec("getprop " + propName);
            input = new BufferedReader(new InputStreamReader(p.getInputStream()), 1024);
            line = input.readLine();
            input.close();
        }
        catch (IOException ex) {
            Log.e(TAG, "Unable to read sysprop " + propName, ex);
            return null;
        }
        finally {
            if (input != null) {
                try {
                    input.close();
                }
                catch (IOException e) {
                    Log.e(TAG, "Exception while closing InputStream", e);
                }
            }
        }
        return line;
    } 
```

并将其称为

```
String basebandVersion = getSystemProperty(BASEBAND_VERSION); 
```

所有学分都归[cyanogen-updater](http://code.google.com/p/cyanogen-updater/source/checkout)，来自同一个项目[SysUtils的自定义方法](http://code.google.com/p/cyanogen-updater/source/browse/trunk/src/cmupdaterapp/utils/SysUtils.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:23:17.570

android 上的 about phone 通过获取属性 gsm.version.baseband 来显示基带版本。您可以使用 SystemProperties.get("gsm.version.baseband","unknown");

# java - 错误 XJ001：Java 异常：'：java.lang.StackOverflowError'

> ID：11796570
> 
> 赞同：1
> 
> 时间：2012-08-03T13:19:57.243
> 
> 标签：java, sql, database, derby, javadb

我正在使用 Derby DB 并且正在执行简单的 INSERT 语句，大约有 9000 行要填写。在此期间我收到错误：

错误 XJ001：Java 异常：'：java.lang.StackOverflowError'

任何人都可以帮我一些提示吗？

谢谢

雷米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-22T02:56:33.960

我有同样的问题，我找到了三种不同的方法来解决它：

*   每行使用一个`INSERT`命令。
*   在子句`INSERT`中使用多个（但更少）行拆分多个命令中的行。`VALUES`
*   使用[-Xss](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html)选项设置 Java 虚拟机的线程堆栈大小。请参阅[此处](https://stackoverflow.com/a/12643977/4071001)和[此处](https://stackoverflow.com/a/20030999/4071001)以更好地了解此选项。

# extjs4.1 - Extjs 4.1.0 网格存储字段附加 Id

> ID：11796573
> 
> 赞同：1
> 
> 时间：2012-08-03T13:20:14.823
> 
> 标签：extjs4.1

我有一个带有 JSON 存储的网格面板，如果我发出警报（myGrid.model.prototype.fields.keys），它会显示所有以 结尾的字段名称`id`，例如，如果我有两个字段`a1`，`a2`则在警报中它显示为（ 'a1'，'a2'，'id'）。我不知道这个 Id 是如何附加到字段中的。如果我在 extjs4.0.2 中做同样的事情，它工作正常，但在 extjs 4.1.0 中它显示了这个问题。

示例代码是：

```
 tbar : [{
          text : 'Save',
          height : 20,
          handler : function(){
            var gridColumnIds = component.gridStore1.model.prototype.fields.keys;

            // alert(grid1.columns[0].dataIndex)
            // console.log(gridColumnIds);
            alert("grid ids :"+gridColumnIds);
            var gridData = Ext.encode(Ext.pluck(component.gridStore1.data.items,'data'));
            alert("grid data is :"+gridData);
          }
         },{
          text : 'Get Record',
          height : 20,
          handler : function(){
            p1.show();
          }
         }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:07:58.947

可能是因为您使用了具有默认 idProperty 值的模型（默认情况下为 idProperty == 'id'）。尝试更改此属性[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-cfg-idProperty](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-cfg-idProperty)。

# java - Java.nio.channels.ServerSocketChannel - accept() 内存泄漏

> ID：11796577
> 
> 赞同：0
> 
> 时间：2012-08-03T13:20:26.273
> 
> 标签：java, android

我在我的 Android 应用程序中获得了服务器线程，当用户决定关闭它时需要正确处理它。我选择接受（）客户端的非阻塞 ServerSocketChannel。
得到了这个![问题](../Images/1c7e7fb07a6644acc32b7fdfb7732e24.png)

```
public class SocketServer extends Thread
{
  private static final String LOG_TAG  = "SocketServer";
  private boolean isRunning  = false;
  private ServerSocketChannel listener = null;

public void _stop()
{
  this.isRunning = false;
}

public void _start()
{
  this.isRunning = true;
  this.start();
}

private void free()
{
  try
  {
    listener.close();
  }
  catch (IOException e)
  {
    //Error handle
  }
  listener = null;
}

public SocketServer(int port)
{
  super();
  try
  {
     listener = ServerSocketChannel.open();
     listener.configureBlocking(false);
     listener.socket().bind(new InetSocketAddress(port));
  }
  catch (IOException e)
  {
    //Error handle
  }
}

public void run()
{
  SocketChannel client = null;
  while(isRunning)
  {
    try
    {
      client = listener.accept();//GC going mad
    }
     if(client != null)
                Log.i(LOG_TAG, "ACCEPTED CLIENT");

    catch (IOException e)
    {
      //Error handle
    }
  }
    free();
} 
```

我正在做的就是接受新客户端 -因为没有传入连接而变为**空**，然后再做一次，直到服务器停止。
ServerClient**客户端**在启动时为 null ，如果没有可用连接，则由 accept()分配为**null 。**

但是Java的垃圾收集器认为客户端以某种方式通过accept（）或accept（）以某种方式初始化分配了一些内存，GC在每个while循环后都会清理这些内存。
如果注释accept() 行（例如什么都不做）根本就没有GC，那么就在accept() 中出现问题。

在我看来，这完全不对。

**PS**如果有什么方法可以打破阻塞**ServerSocket** accept()/ **Socket** read() 状态并正确退出，请告诉我。

**PS 2**对于 Socket，对 SocketChannel 的 socket() 进行写入/读取是否安全，它会阻塞线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:26:28.010

Java 中的许多操作在内部创建临时对象来完成它们的工作。

使用阻塞的 SocketServer 会好得多。这样，它创建的对象仅基于每个接受的套接字，而不是基于每个尝试。

我建议您首先为每个连接使用一个（或两个）线程来实现阻塞 NIO。如果随后您发现线程数存在性能问题，请尝试使用具有非阻塞 NIO 的 Selector。

# git - git pull 错误：错误：远程参考在但预期

> ID：11796580
> 
> 赞同：288
> 
> 时间：2012-08-03T13:20:36.953
> 
> 标签：git, pull, git-pull

**完整留言：**

```
error: Ref refs/remotes/origin/user is at 3636498c2ea7735fdcedc9af5ab3c8689e6abe77 but expected a21359c6cc2097c85775cde6a40105f4bd7100ec
From github.com:{github project url}
 ! a21359c..6273ffc  user -> origin/user  (unable to update local ref) 
```

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-08-22T09:15:48.433

如果您在不区分大小写的文件系统（Windows 或 OS X）下运行 git，如果有两个具有相同名称但大小写不同的分支，则会发生这种情况，例如`user_model_changes`，`User_model_changes`因为两个远程分支都将匹配相同的跟踪参考.

删除错误的远程分支（你不应该有仅因大小写而异的分支），然后`git remote prune origin`一切都应该工作

* * *

## 回答 #2

> 赞同：251
> 
> 时间：2014-12-29T19:21:40.153

# 永久修复

`git update-ref -d`解决了我的这个错误实例，例如

```
git update-ref -d refs/remotes/origin/user 
```

请注意，这不会影响远程。

在我的情况下，随后`git fetch`再次获取了该分支，并且在 git fetches/pulls 之后不再给出错误“remote ref is at but expected”。

# 如果这不起作用，则临时修复：

另请注意，如果您不关心相关分支（例如，您只想更新 master，而不是 origin/user），`git pull`解决方法是获取然后合并您关心的特定分支，例如

```
git fetch # may give an error for a particular branch, but other branches will still be successfully fetched
git merge origin/master 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2016-03-15T11:59:21.030

只需删除`\.git\refs\remotes\origin`. 工作，当你没有未推动的变化时。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2018-08-03T09:50:33.057

一一使用以下两个命令。

```
git gc --prune=now

git remote prune origin 
```

这将解决您的问题。

* * *

## 回答 #5

> 赞同：60
> 
> 时间：2018-02-16T16:28:49.070

我运行它来解决问题：

```
git gc --prune=now 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-03-31T02:08:02.480

我不得不从我的命令行中删除我的**分支：**

```
.git\refs\remotes\{my remote}\{**my branch**} 
```

然后手动执行：

```
git pull [remote_name] [branch_name] 
```

我能够拉动更改。

注意：我使用的是*SourceTree*，无法进行拉取。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-08-21T16:41:50.453

硬重置也可以解决问题

```
git reset --hard origin/master 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-12-18T21:20:26.943

不幸的是，像 prune 和 reset 或 push 这样的 GIT 命令对我不起作用。修剪工作一次，然后问题又回来了。

对我有用的永久解决方案是手动编辑 git 文件。只需转到项目的 .git 文件夹，然后在 Notepad++ 等文本编辑器中打开文件 packed-refs。然后导航到带有失败分支的行并将其 guid 更新为预期的。

如果你有这样的消息：

> 错误：无法锁定 ref 'refs/remotes/origin/feature/branch_xxx'：位于 425ea23facf96f51f412441f41ad488fc098cf23 但预期为 383de86fed394ff1a1aeefc4a522d886adcecd79

然后在文件中找到带有`refs/remotes/origin/feature/branch_xxx`. 那里的向导将是预期的（第二个）一个 - `383de86fed394ff1a1aeefc4a522d886adcecd79`。您需要将其更改为真正的（第一个）一个 - `425ea23facf96f51f412441f41ad488fc098cf23`。

重复其他失败的分支，你会很好地继续。有时在重新获取后，我不得不重复我之前已经“修复”过的相同分支。在重新获取 GIT 更新指南并为您提供最新的。

无论如何，这个问题不是一个表演障碍。分支列表得到更新。这是一个警告。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-07-10T18:49:50.913

**更清晰的步骤**

1.  在终端

    ```
    cd /.git/refs/remotes/origin 
    ```

2.  做 `ls`，你会看到一些**分支**和**HEAD**

3.  删除你认为有问题的分支

    ```
    rm branchname 
    ```

4.  如果它不起作用，请删除所有**分支/HEAD**

    *   你可能想拉

希望它现在有效。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-12T12:03:51.723

试试这个，它对我有用。在您的终端中：`git remote prune origin`.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-06T20:21:36.240

git for-each-ref --format='delete %(refname)' refs/original | git update-ref --stdin git reflog expire --expire=now --all git gc --prune=now

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-02-04T14:37:31.027

我遇到了同样的问题，因为即使我已经推送到远程分支，我也重置为较旧的提交。

我通过删除我的本地分支然后检查原始分支`git checkout origin/my_branch`然后执行来解决它`git checkout my_branch`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-30T06:50:34.173

这里的情况相同，但没有任何关于评论的评论在我的情况下是正确的，我只有一个分支（主）并且只使用 Unix 文件系统，当我运行 git fetch --progress --prune origin 并且分支在前面时，这个错误随机发生或“起源/主人”。没有人可以提交，只有 1 个用户可以推送。

注意：我在 acme 存储库中有一个子模块，并且 acme 有新的子模块更改（新提交），我需要首先使用 git submodule update 进行子模块更新。

```
[2014-07-29 13:58:37] Payload POST received from Bitbucket
[2014-07-29 13:58:37] Exec: cd /var/www/html/acme
---------------------
[2014-07-29 13:58:37] Updating Git code for all branches
[2014-07-29 13:58:37] Exec: /usr/bin/git checkout --force master
[2014-07-29 13:58:37] Your branch is ahead of 'origin/master' by 1 commit.
[2014-07-29 13:58:37]   (use "git push" to publish your local commits)
[2014-07-29 13:58:37] Command returned some errors:
[2014-07-29 13:58:37] Already on 'master'
---------------------
[2014-07-29 13:58:37] Exec: /usr/bin/git fetch --progress --prune origin
[2014-07-29 13:58:39] Command returned some errors:
[2014-07-29 13:58:39] error: Ref refs/remotes/origin/master is at 8213a9906828322a3428f921381bd87f42ec7e2f but expected c8f9c00551dcd0b9386cd9123607843179981c91
[2014-07-29 13:58:39] From bitbucket.org:acme/acme
[2014-07-29 13:58:39]  ! c8f9c00..8213a99  master     -> origin/master  (unable to update local ref)
---------------------
[2014-07-29 13:58:39] Unable to fetch Git data 
```

要解决这个问题（在我的情况下），如果您的分支在原点之前，只需运行第一个 git push 即可。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-12T16:25:32.817

我尝试了多个选项，但没有一个选项对我有用。下面的命令对我有用。把它放在这里，如果它可以帮助人们以防其他选项不起作用。

**git 拉 -p**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-12T17:01:55.173

我遇到了这个问题，我的解决方案如下：

步骤1：

1.  请先运行此命令。

    **git gc --Prune=now**

第2步：

1.  如果运行第 1 步命令后没有错误，请在终端中运行以下命令。

    **git远程修剪起源**

我希望这能解决你的问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-29T15:57:01.517

我遇到了同样的问题，我刚刚删除了远程分支并从主分支创建了新分支，并将我的更改从旧功能分支合并到新功能分支。现在我尝试了拉取和推送请求，它对我有用

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-25T09:00:14.967

我知道这很旧，但我有自己的解决方法。因为我使用的是源代码树，所以发生此错误是因为有人创建了一个新分支。源代码树对此感到困惑。在我按下“要拉取的远程分支”组合框旁边的“刷新”按钮后，似乎sourcetree已经更新了分支列表，现在我可以成功拉取。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2020-03-04T13:36:43.533

在不断搜索之后，这是对我有用的解决方案，它需要取消设置/删除上游

```
git branch --unset-upstream 
```

# java - 在新的事务范围内更新对象

> ID：11796584
> 
> 赞同：4
> 
> 时间：2012-08-03T13:20:52.240
> 
> 标签：java, spring, hibernate, jpa

我有一个与事务边界有关的问题，我无法弄清楚出了什么问题。

```
@Transactional( propagation = Propagation.REQUIRED )
Class A {
void methodA() {
     try {
     new B().callMethodB(obj)
     } catch(Exception e) {
           updateSomeProperty(obj1)
     }
}
@Transactional(propagation = Propagation.REQUIRES_NEW)
void updateSomeProperty(Object obj1) {
     obj1.setProperty(1);
     obj1.save();       
}
        }

 Class B {

   public void callMethodB(Object obj) throws Exception {
    throws new Exception();  
 }

 } 
```

问题是抛出错误时我的对象没有更新。我还尝试从该方法中触发 SQL 代码，`updateSomeProperty`但这也不起作用。

基本上我想更新对象的属性，不管是否抛出异常。
有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:59:59.790

它不应该工作。因为您从该类的另一个方法调用 updateSomeProperty(obj1) 并尝试更改默认事务行为（从 REQUIRED 到 REQUIRED_NEW）。但它不会起作用。这就是为什么发生异常时所有更改都将回滚的原因。

默认情况下，Spring 为接口创建代理，@Transactional 注释应该只用于公共方法。并且应该从“外部”调用此方法。如果您将从类中的另一个方法调用它们，则 @Transactional 注释将不起作用。

您还可以更改 xml 中事务的默认设置（查看属性 proxy-target-class 和 mode）。但我从未改变过这一点，也不记得它应该如何工作。

```
<tx:annotation-driven transaction-manager="txManager" mode="..." proxy-target-class="..."/> 
```

**编辑：**

顺便一提。[这是一篇关于交易陷阱](http://www.ibm.com/developerworks/java/library/j-ts1/index.html)的非常好的文章。它对我帮助很大。还有一些关于交易的其他非常有趣的文章。

**编辑2：**

再次问好。我认为我找到了解决您问题的方法。至少我对此进行了测试，它对我很有效。我建议您将事务模式更改为“AspectJ”，并为项目使用 AspectJ 编译时间。这将使您有可能从一个类中的另一个方法调用私有事务方法，并更改事务行为（对于已启动的嵌套事务）。在这种情况下，您可以在嵌套事务中提交一些更改，而外部事务将被回滚。为此，您需要执行以下步骤：

1）在事务定义中更改事务模式： - 如果您使用 xml 配置，则：

```
<tx:annotation-driven transaction-manager="txManager" mode="aspectj"/> 
```

*   如果您使用 java 配置，那么：

    @EnableTransactionManagement(mode=AdviceMode.ASPECTJ, proxyTargetClass=false)

2）在pom中添加aspectj依赖：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>${aspectj.version}</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>${aspectj.version}</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjtools</artifactId>
    <version>${aspectj.version}</version>
</dependency> 
```

3）在pom中添加spring-aspects依赖：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aspects</artifactId>
    <version>3.1.2.RELEASE</version>
    <scope>compile</scope>
</dependency> 
```

4) 添加 maven 插件，启用编译时 wieving：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <configuration>
                <showWeaveInfo>true</showWeaveInfo>
                <source>${compiler.version}</source>
                <target>${compiler.version}</target>
                <Xlint>ignore</Xlint>
                <complianceLevel>${compiler.version}</complianceLevel>
                <encoding>UTF-8</encoding>
                <verbose>false</verbose>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <!-- <goal>test-compile</goal> -->
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

5）我的 pom 中还有 maven 编译器插件，这就是为什么我认为你最好也添加它：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <compilerVersion>${compiler.version}</compilerVersion>
        <fork>true</fork>
        <source>1.7</source>
        <target>1.7</target>
    </configuration>
</plugin> 
```

*注意：我使用 jdk 1.7+ 版本。我的编译器和aspectj版本是sush：

```
<compiler.version>1.7</compiler.version>
<aspectj.version>1.6.12</aspectj.version> 
```

我也有其他库的此类版本（但我认为这不是必需的）：

```
<org.springframework.version>3.1.0.RELEASE</org.springframework.version>
<org.hibernate.version>4.1.0.Final</org.hibernate.version>
<org.springdata.version>1.0.2.RELEASE</org.springdata.version> 
```

您也可以尝试在 spring 中使用加载时间，但它更难配置（这是我的观点），不建议在生产中使用（正如我在几篇文章中读到的）。但是如果你决定使用它，你可以在 web 和 spring 参考文档中找到很多信息。

如果你想在没有 maven 的情况下使用编译时间，那么我不知道如何配置它。（我只用 Maven 测试过）。您可以尝试在 web 中查找此类信息，但我不建议这样做，因为使用 maven 处理依赖项要容易得多（并且在此示例的情况下 - 添加必要的插件）。

这是我用于测试的示例：

*   一些界面：

    公共接口 TestClassInterface {

    ```
    void testMethod(); 
    ```

    }

*   一些实现此接口的测试类：

    @Transactional(propagation = Propagation.REQUIRED, rollbackFor=Exception.class) @Component public class TestClass implements TestClassInterface {

    ```
    @Autowired
    private SpringDataFooDAO fooDao;

    public void testMethod() {
        try {
            Foo foo = fooDao.findOne(2L);
            System.out.println(TransactionSynchronizationManager.getCurrentTransactionName());
            System.out.println(TransactionSynchronizationManager.isActualTransactionActive());
            foo.setName("should be rolled back");
            new ExceptionThrower().doSomething("default string");
        } catch(Exception e) {
            updateSomeProperty(1L, "Changed name");
            throw new RuntimeException(e);
        }
    }

    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor=Exception.class)
    private void updateSomeProperty(long id, String newFooName) {

        System.out.println("   ---   ");
        System.out.println(TransactionSynchronizationManager.getCurrentTransactionName());
        System.out.println(TransactionSynchronizationManager.isActualTransactionActive());

         // Update property of test object.
         Foo foo = fooDao.findOne(id);
         foo.setName(newFooName);    
    } 
    ```

    }

*   另一个具有引发异常的方法的类：

    公共类 ExceptionThrower {

    ```
    public void doSomething(Object obj) throws Exception {
        throw new Exception();  
     } 
    ```

    }

请注意，我从 catch 块中重新抛出异常（我将其作为运行时异常执行，因为我不需要在上层类中处理它）。这是正确的外部事务回滚所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:01:32.893

查看[spring 参考](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative)以了解如何使用 @Transactional。@Transactional 使用 spring 代理时有很多 ** 条件适用，您需要在将其应用到代码中之前了解它们。

> 在代理模式下（默认），只有通过代理传入的外部方法调用会被拦截。这意味着自调用，实际上是目标对象中的一个方法调用目标对象的另一个方法，在运行时不会导致实际事务，即使调用的方法被标记为@Transactional。
> 
> 如果您希望自调用也与事务一起包装，请考虑使用 AspectJ 模式（请参见下表中的模式属性）。在这种情况下，首先不会有代理；相反，目标类将被编织（即，其字节码将被修改），以便将@Transactional 转换为任何类型的方法的运行时行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:35:48.340

您可以尝试指定 noRollbackFor = RuntimeException.class 或您想要的任何其他类，并希望它可以让您更新数据库。即@Transactional(noRollbackFor = RuntimeException.class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:23:24.123

上述安排非常适合开始新事务并执行与原始事务不同的其他事情。

在我的情况下出错的一件事是，在另一个事务中，我自己抛出了一个异常，导致第二个事务再次回滚。

```
So The thing is beware off exception in the transaction because they ensure that the database state rolls back. It is for what they are meant for. 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T11:42:13.903

创建一个自定义异常并使用它来抛出，另外请在定义自定义异常时使用@ApplicationException(rollback=false) 作为类级别的注释。

例如

```
@ApplicationException(rollback=false)
public CustomException extends Exception{ 
```

# excel - Octave：不支持 Excel

> ID：11796585
> 
> 赞同：1
> 
> 时间：2012-08-03T13:20:57.123
> 
> 标签：excel, matlab, octave, xls

我最近下载了 Octave，因为我需要将 .mat 文件转换为 .xls。

我将 .mat 文件导入到程序中，然后运行以下代码：
`xlswrite('Elettra.xls', 'elettra_processed_data.mat')`

但我得到了这个错误：

```
Creating file Elettra.xls
Supported interfaces: 
warning: No support for Excel .xls I/O
error: oct2xls: unknown Excel .xls interface - NONE.
error: called from:
error:   C:\Octave\3.2.4_gcc-4.4.0\share\octave\packages\io-1.0.11\oct2xls.m at line 100, column 3
error:   C:\Octave\3.2.4_gcc-4.4.0\share\octave\packages\io-1.0.11\xlswrite.m at line 160, column 6
>> Variables in the current scope:

 Name                 Size             Class           Bytes       
 ====                 ====             =====           =====        
 ans                  1x11             cell            92          
 dirlist              1x6              cell            18          
 ii                   1x1              double          8           
 old_format           1x45             char            45          
 processedData        1x1              struct          3978113     

Total is 64 elements using 3978276 bytes 
```

有没有人有任何想法？我对这个程序不太熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:42:44.857

你的标题说明了这一点。Octave 没有内置支持从 Excel 读取/写入，因为 xlswrite 函数使用 Windows COM。话虽如此，有一些[选项包括使用纯 java ，在博客](http://undocumentedmatlab.com/blog/xlswrite-for-mac-linux/)[Undocumented Matlab](http://undocumentedmatlab.com/)上进行了讨论。

你是什​​么意思“将.mat文件转换为.xls”你的意思是你想读入mat文件中的数据并在Excel中写出来？如果是这样，如果您没有合适的 Matlab，您将需要卷起袖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:21:49.393

您可以先加载数据

```
load elettra_processed_data.mat 
```

那么当前范围内应该有你的结构“processedData 1x1 struct 3978113”。由于我不知道结构中的内容，您只需调用名称即可找到

```
processedData 
```

将有一个输出为您提供结构子元素的名称（可能包含大量数据）：

```
processedData =
{
   lat = ...
   lon = ... 
   positions = ...
} 
```

如果您找到要保存的数据（假设它在位置），您可以致电

```
csvwrite("Elettra.csv", processedData.positions); 
```

以及可以使用 Excel 打开的 Elettra.csv。

# java - 包含带有标签的值的 XML 属性文件

> ID：11796588
> 
> 赞同：1
> 
> 时间：2012-08-03T13:21:09.153
> 
> 标签：java, xml, properties, tags, sax

我正在使用类的`loadFromXML`方法`java.util.Properties`来解析包含一些应用程序参数的 XML 文件。这些参数之一的值是一个 HTML 字符串，如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="THREAD_COUNT">4</entry>
    <entry key="SENDER_EMAIL">MAIL@SOMESITE.COM</entry>
    <entry key="EMAIL_SUBJECT">SAMPLE SUBJECT</entry>
    <entry key="EMAIL_BODY"><span style='font-family : Monotype Corsiva ; font-size:14pt'>SAMPLE TEXT</span></entry>
</properties> 
```

当我有这样的值时，`loadFromXML`方法会引发以下异常：

```
java.util.InvalidPropertiesFormatException: org.xml.sax.SAXParseException: Element type "span" must be declared.
    at java.util.XMLUtils.load(XMLUtils.java:59)
    at java.util.Properties.loadFromXML(Properties.java:852)
    at com.test.mail.ConfigReader.<init>(ConfigReader.java:27)
    at com.test.mail.ConfigReader.getInstance(ConfigReader.java:43)
    at com.test.mail.SendMail.readParameters(SendMail.java:64)
    at com.test.mail.SendMail.startJob(SendMail.java:29)
    at com.test.mail.SendMail.main(SendMail.java:24) 
```

有没有办法在 XML 属性文件中使用这样的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:25:02.707

在 xml 中使用 CDATA 部分，将其标记为数据，否则它将被解析为 xml 的一部分：

见[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="THREAD_COUNT">4</entry>
    <entry key="SENDER_EMAIL">MAIL@SOMESITE.COM</entry>
    <entry key="EMAIL_SUBJECT">SAMPLE SUBJECT</entry>
    <entry key="EMAIL_BODY"><![CDATA[<span style='font-family : Monotype Corsiva ; font-size:14pt'>SAMPLE TEXT</span>]]></entry>
</properties> 
```

# ant - Ant scp 任务错误

> ID：11796590
> 
> 赞同：1
> 
> 时间：2012-08-03T13:21:10.417
> 
> 标签：ant, task, scp

我的 Ant scp 任务有问题。当我尝试将文件发送到服务器时，出现以下错误：

```
com.jcraft.jsch.JSchException: 2: No such file 
```

这是我的任务：

```
<scp verbose="yes"
 todir="${deploy.user}@${app.deploy.server}:/home/software/public_html/${app.appName}"
 password="${deploy.password}" sftp="true" trust="true" >
    <fileset dir="${basedir}/jnlp/extensions/production" includes="*.jnlp"/>
</scp> 
```

任何人都知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:17:30.137

某些 Ant 任务，虽然是标准任务，但需要[第三方库](http://ant.apache.org/manual/install.html#librarydependencies)。如果您查看该表，您会发现您需要安装[jsch.jar](http://www.jcraft.com/jsch/index.html)版本 0.142 或更高版本。

最简单的做法是将它安装在`$ANT_HOME/lib`. 这将解决你的问题。但是，它现在会产生一个问题，即您的`build.xml`文件中存在其他用户必须注意的库依赖项。他们必须知道在他们的 .jar 中手动安装所需的 jar `$ANT_HOME/lib`，或者定义一个`$ANT_LIB`目录并将其放在那里。

# android - 在不同的线程上运行方法

> ID：11796597
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:21:36.037
> 
> 标签：android, multithreading, twitter4j

我创建了一个使用 twitter 4j 的应用程序，我试图在不同的线程上运行以使其更快，但我得到了那个错误

```
08-03 16:02:02.138: E/AndroidRuntime(439): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.view.View.invalidate(View.java:5139)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.widget.AbsListView.resetList(AbsListView.java:1011)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.widget.ListView.resetList(ListView.java:493)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.widget.ListView.setAdapter(ListView.java:422)
08-03 16:02:02.138: E/AndroidRuntime(439):  at android.app.ListActivity.setListAdapter(ListActivity.java:267)
08-03 16:02:02.138: E/AndroidRuntime(439):  at a.a.a.StatusListActivity.loadHomeTimeline(StatusListActivity.java:91)
08-03 16:02:02.138: E/AndroidRuntime(439):  at a.a.a.StatusListActivity.access$0(StatusListActivity.java:84)
08-03 16:02:02.138: E/AndroidRuntime(439):  at a.a.a.StatusListActivity$2.run(StatusListActivity.java:78) 
```

这是我的代码

```
public class StatusListActivity extends ListActivity{

    private Otweet app;
    private Twitter twitter;
    private OAuthHelper authhelper;
    private LoadMoreListItem headerView;
    private LoadMoreListItem FooterView;
    private StatusListAdapter adapter;
    protected ProgressDialog progressdialog;
    private Handler handler=new Handler();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        app=(Otweet)getApplication();
        twitter=app.gettwitter();
        System.setProperty("twitter4j.http.useSSL","false");
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.main);

    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        if(!app.isAuthorized())
        {
        beginAuthorization();
        }
        else
        {
            if(null==getListAdapter())
            loadHomeTimelineifnotloaded();
        }
    }

    public void beginAuthorization()
    {
        Intent intent=new Intent(StatusListActivity.this,AuthorizationActivity.class);
        startActivity(intent);
    }

    private void loadHomeTimelineifnotloaded() {
        // TODO Auto-generated method stub
    //  progressdialog=ProgressDialog.show(StatusListActivity.this,"Load home timeline","loading");
        Thread LoadHomeTimeline=new Thread(){
            public void run()
            {
            loadHomeTimeline();
            handler.post(FinishedLoadingTasks);
            }
        };
        LoadHomeTimeline.start();
    }
    private void loadHomeTimeline()
    {
    try {

        ArrayList<Status> status=twitter.getHomeTimeline();
        adapter=new StatusListAdapter(this, status);
        setListAdapter(adapter);
        setloadMoreViews();
        setListAdapter(adapter);
        getListView().setSelection(1);

    } catch (TwitterException e) {
        // TODO Auto-genera ted catch block
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "jj", Toast.LENGTH_SHORT).show();
    }

}

    private Runnable FinishedLoadingTasks=new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            finishedLoadinglist();
        }

    };

    public void finishedLoadinglist()
    {
        setloadMoreViews();
        setListAdapter(adapter);
        getListView().setSelection(1);
    //  progressdialog.dismiss();

    }
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        if(v.equals(headerView))
        {
            headerView.showProgress();
            try {
                headerView.showProgress();
                loadnewerTweets();
            } catch (TwitterException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else if

            (v.equals(FooterView))
            {
                FooterView.showProgress();
                try {
                    LoadOlderTweets();
                } catch (TwitterException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

    private void LoadOlderTweets() throws TwitterException {
        // TODO Auto-generated method stub
    FooterView.hideProgress();
    ArrayList<Status> statii=twitter.getHomeTimeline(new Paging().maxId(adapter.getLastId()));
    adapter.appendOlder(statii);    
    }
    private void loadnewerTweets() throws TwitterException {
        // TODO Auto-generated method stub

        //try {
            headerView.showProgress();
            setProgressBarIndeterminateVisibility(true);
            Thread loadMoreThread=new Thread()
            {
                public void run()
                {
                    try {
                ArrayList<Status> statii = twitter.getHomeTimeline(new Paging().sinceId(adapter.getFirstId()));
                        Runnable finishedLoadingNewerTask=new LoadNewerResults(statii);
                        handler.post(finishedLoadingNewerTask);
                    } catch (TwitterException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            };

    //  }
//  catch (TwitterException e) {
            // TODO Auto-generated catch block
    //      throw new RuntimeException("Unable to load home timeline",e);
    //  }

    }

    protected void finishedLoadingNewer(ArrayList<Status> statii)
    {

        adapter.appendNewer(statii);
        headerView.hideProgress();
        setProgressBarIndeterminateVisibility(false);
        getListView().setSelection(1);
    }
    private class LoadNewerResults implements Runnable
    {

        private ArrayList<Status> statii;
        public LoadNewerResults(ArrayList<Status> statii)
        {
            super();
            this.statii=statii;
        }
        public void run() {
            // TODO Auto-generated method stub
            finishedLoadingNewer(statii);
        }

    }
    private void setloadMoreViews() {
        // TODO Auto-generated method stub

        headerView=(LoadMoreListItem)getLayoutInflater().inflate(R.layout.load_more, null);
        headerView.showHeaderText();
        FooterView=(LoadMoreListItem)getLayoutInflater().inflate(R.layout.load_more,null);
        FooterView.showFooterText();
        getListView().addHeaderView(headerView);
        getListView().addFooterView(FooterView);
    }

    } 
```

我搜索了这些错误，发现我必须在主线程上运行一些东西。有人可以修复它并向我解释吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:28:41.847

所有 Ui 操作都需要在 UI 线程上完成，因此您可以从其他线程调用[runonUithread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)来更新来自其他线程的 Ui 元素。但在您的情况下，我认为您最好使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)并更新[Onprogressupdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)和[OnpostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)中的 Ui 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:29:08.150

您需要在 UI 线程上更新 loadHomeTimeline 中的状态列表。查看[Activity.runOnUIThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

# ruby-on-rails - 如何创建嵌套模型表单

> ID：11796606
> 
> 赞同：0
> 
> 时间：2012-08-03T13:22:14.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我只是不确定如何构建嵌套表单。我关注了 Ryan Railscasts，但我不确定如何在我的案例中创建一个新实例。

我有以下型号

```
Customer,
Book Manager, and
Book 
```

他的关系如下

```
Customer
    has_many :book_managers, :dependent => :destroy
    accepts_nested_attributes_for :book_managers
Book
    belongs_to :book_manager
    def customer
        book_manager.customer
    end
Book_Manager
    belongs_to :customer
    has_many :books, :dependent => :destroy 
```

他的形式遵循

```
<%= form_for @bookmanager do |f| %>
  <%= f.fields_for :books, Book.new do |builder| %>
  <div>
    <%= builder.label :description %><br />
    <%= builder.text_area :description, :rows => 3 %>
  </div>
  <% end %>
  <div class="field">  
    <%= f.label :visible %><br />  
    <%= f.text_field :visible %>  
  </div>  
  <div class="actions">
    <%= f.submit %>
  </div>  
<% end %> 
```

让我困惑的部分是他以单一形式创建一个新实例。我有一个属于 book 的描述，我有一个属于 book_managers 的 isVisible

这是我在想但似乎不起作用

```
@customer = Customer.find(params[:id])
@bookmanager = BookManager.new(params[:bookmanager])
@book = Book.new(params[:book]) 
```

我也尝试以下

```
@customer = Customer.find(params[:id])
@bookmanager = @customer.book_managers.build 
```

它不起作用，并且不确定如何建立关系。对此的任何帮助表示赞赏！

这是我在 rails c 中所做的查询

```
cust = Customer.first
cust.book_managers.build :visible => true
cust.book_managers.first.books.build :description => 'the odyssey'
cust.save! 
```

看起来没问题，然后我做了以下检查

```
cust = Customer.find 1
cust.books              ### This is where the error was given to me
Book.first.customer 
```

错误是

```
NoMethodError: undefined method `books' for #<Customer:0xad55afc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:22:55.867

您应该使用 has_many: through: 关系

```
class Customer < ActiveRecord::Base
  has_many :book_managers, :dependent => :destroy
  has_many :books, :through => :book_managers
  accepts_nested_attributes_for :book_managers
end

class BookManager < ActiveRecord::Base
  belongs_to :customer
  has_many :books, :dependent => :destroy
end

class Book < ActiveRecord::Base
  has_many :book_manager
  def customer
    book_manager.customer
  end
end 
```

您可以阅读更多[http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

# javascript - 以类似时尚的视频在浏览器中渲染多个图像

> ID：11796614
> 
> 赞同：0
> 
> 时间：2012-08-03T13:22:28.020
> 
> 标签：javascript, html

我有大约 500 张图像，它们之间的差异非常小。它们的大小相同。因此，当一个接一个地快速观看时，它们会形成一种视频。

我正在寻找一种在浏览器中显示它们的方法（来自磁盘的 html 文件），所有这些都在同一个位置，以形成那种视频效果。我希望能够播放、暂停、停止、更快地播放、更慢地播放（如果可能的话甚至更多的控制，比如可能去特定的时间（例如，图像 47，如果有一个滑块；如果只有播放，暂停，快慢都可以）。

我不是程序员，但我认为 javascript 可能会这样做。如果有更好的技术，请重定向我。我只是在寻找一种按我的意图工作的解决方案，但我没有 javascript 知识。不过，这肯定已经做过，所以我很乐意接受一个可行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:02:23.333

尽管您似乎正在走转换路线，但这是一个使用 javascript 的解决方案，允许暂停、跳转到帧和更改速度（我没有为此使用滑块 [或任何一个不错的 UI]） ：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body onload="launch()">
</body>
<script>
var frames=['frame1.png','frame2.png','frame3.png','frame4.png','frame5.png','frame6.png','frame7.png','frame8.png','frame9.png','frame10.png'];
var playing=true;
var on_frame=0;
var timer;

function launch(){
    document.body.innerHTML='<img id="film" src="frames/'+frames[on_frame]+'"/><br/><button id="actionbutton">Play</button><button onclick="stop()">Stop</button><br/>Milliseconds between frames:<input type="text" id="framerate" value="50"/><br/>Go to frame:<input type="text" id="gotoframe"><button onclick="goFrame(document.getElementById(\'gotoframe\').value);">Go</button>';   
    document.getElementById('actionbutton').addEventListener('click',play); 
    play();
}

function change(){
    document.getElementById('film').src='frames/'+frames[on_frame]; //I have my images in a folder named frames
    on_frame++;
    if(on_frame==frames.length){on_frame=0;}
    if(playing){
        timer=setTimeout(change,document.getElementById('framerate').value?document.getElementById('framerate').value:50);
    }
}

function play(){
    document.getElementById('actionbutton').removeEventListener('click',play);
    document.getElementById('actionbutton').addEventListener('click',pause);
    document.getElementById('actionbutton').innerHTML='Pause';
    clearInterval(timer);
    playing=true;
    change();
}

function pause(){
    document.getElementById('actionbutton').removeEventListener('click',pause);
    document.getElementById('actionbutton').addEventListener('click',play);
    document.getElementById('actionbutton').innerHTML='Play'; 
    playing=false; 

}

function stop(){
    document.getElementById('actionbutton').removeEventListener('click',pause);
    document.getElementById('actionbutton').addEventListener('click',play);
    document.getElementById('actionbutton').innerHTML='Play'; 
    playing=false; 
    on_frame=0;
}

function goFrame(x){
    if((x>-1)&&(x<=frames.length)){
        on_frame=x;
        if(!playing){document.getElementById('film').src='frames/'+frames[on_frame];}
    }
    else{
        alert('Out of range');
    }
}
</script>
</html> 
```

# html - 表格行边框问题 - 需要一些填充或边距（左侧和右侧）

> ID：11796617
> 
> 赞同：0
> 
> 时间：2012-08-03T13:22:48.673
> 
> 标签：html, css, css-tables

点击链接[http://jsfiddle.net/anglimass/njAFp/](http://jsfiddle.net/anglimass/njAFp/)

 `我想要左右边框一些空间：

**现在**：

![在此处输入图像描述](../Images/fa0ffc2622ed64e626091921315ae0a9.png)

**想要**：

![在此处输入图像描述](../Images/9514616115855225d3ee76eb714263e6.png)

请注意左右两侧的“想要的形象”。我敲击了“表行”填充（左右）。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:30:54.237

我认为您无法在 TR 级别上做到这一点。TD水平如何：

```
table tbody tr td {
    border-top: 1px solid red;
    border-bottom: 1px solid red;
}

table tr td:first-child {
    padding-left: 20px;
    border-left: 10px solid red;
}

table tr td:last-child,
td.last-td {
    padding-left: 20px;
    border-right: 10px solid red;
} 
```

这对于 x 浏览器的兼容性也很重要。

编辑：您可以将上述内容放入您的小提琴中并在 ie7 中查看它，将“hacky”“last-td”选择器添加到您的最后一个 TD（ie7 不支持“last-child”，但支持“first-child” )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:33:30.363

这有点 hacky，但它会产生您正在寻找的效果：

[http://jsfiddle.net/njAFp/3/](http://jsfiddle.net/njAFp/3/)

```
<table cellspacing="0" cellpadding="0">
    <thead>
        <tr>
            <th></th>
            <th>lai</th>
            <th>pola</th>
            <th>vaala</th>
            <th>elah</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="blank"></td>
            <td>ennala</td>
            <td>yamla</td>
            <td>varamattala</td>
            <td>vettiruven</td>
            <td class="blank"></td>
        </tr>
    </tbody>
</table> 
```

​</p>

```
 table{width:400px; height:auto; background:silver;border-collapse:collapse;}
    table thead{}
    table tbody{}
    table tr{ background:silver;}
    table tr th{ padding:5px; background:silver;}
table tr td{ border-bottom:1px solid red; border-top:1px solid red; padding:5px; background:#eee;}

td.blank { width:20px; border:0; } 
````

# objective-c - NSNotificationCenter 在 NSMutableDictionary addObject 上获取通知

> ID：11796618
> 
> 赞同：0
> 
> 时间：2012-08-03T13:22:53.473
> 
> 标签：objective-c, ios, nsnotificationcenter

将对象添加到 NSMutableDictionary 时，如何使用 NSNotificationCenter 获取通知？

还有关于不可变 NSDictionary 的通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:36:42.143

继承之美：）

```
#define kSomeDictionarySetAValue @"SomeDictionarySetAValue"

@interface SomeDictionary : NSMutableDictionary

@end

@implementation SomeDictionary

- (void) setValue:(id)value forKey:(NSString *)key
{
    [super setValue:value forKey:key];

    [[NSNotificationCenter defaultCenter] postNotificationName:kSomeDictionarySetAValue
                                                        object:self];
}

@end 
```

# java - Sin/Cos 在 java/android 中不起作用

> ID：11796623
> 
> 赞同：-2
> 
> 时间：2012-08-03T13:23:09.573
> 
> 标签：java, android

说我有

```
Log.e("deg: "+dd,  "X:"+ Math.sin( Math.toRadians(dd) ) +"| Y:"+Math.cos( Math.toRadians(dd) ) ); 
```

如果 dd = 180，那么 sin 应该是 0 和 cos -1 ，对吗？但它输出

度数：180 X：1.2246467991473532E-16| Y:-1.0

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T13:25:02.130

该值`1.2246467991473532E-16` *实际上*为零，小数点后 16 位；它是`0.00000000000000012246`。

如果这是问题，您只需要格式化显示的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T08:28:00.587

如上所述，这不是错误，只是计算机浮点运算的近似值。

为了得到预期的答案，因为 sin() & cos() 介于 -1, 0 , +1 之间，请尝试将其加 1 到所需的精度并减去 1。

```
x = round15(Math.sin(toRad(angle))+1)-1; 
```

其中定义了 round15

```
public double round15(double x){
    DecimalFormat twoDForm = new DecimalFormat("0.##############E0");
    String str = twoDForm.format(x);
    return Double.valueOf(str);
} 
```

它对我有用，希望未来的读者喜欢它。

# ruby-on-rails - rails check_box_tag 使用默认值设置检查

> ID：11796629
> 
> 赞同：23
> 
> 时间：2012-08-03T13:23:16.890
> 
> 标签：ruby-on-rails, checkbox, arguments

我目前有一个看起来像的 rails check_box_tag 调用

```
check_box_tag #{name} 
```

我想包含一个选中的属性，我知道我可以使用它

```
check_box_tag name, value, checked 
```

但是，如果我想在不明确指定的情况下将其设置为选中状态`value`（我只想使用默认值）怎么办？或者类似地，如果我想指定 html 选项而不指定`checked`属性怎么办。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-08-20T21:41:56.367

只是想更新这个。第三个参数`check_box_tag`是表示检查状态的布尔值。

```
check_box_tag name, value, true 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-24T11:13:10.140

如果要选中复选框，则

```
check_box_tag name, value, {:checked => "checked"} 
```

否则

```
check_box_tag name, value 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-04T19:14:15.027

**check_box_tag**（名称，值 =“1”，选中 = false，选项 = {}）

例子：

```
check_box_tag 'receive_email', 'yes', true
# => <input checked="checked" id="receive_email" name="receive_email" type="checkbox" value="yes" />

check_box_tag 'tos', 'yes', false, class: 'accept_tos'
# => <input class="accept_tos" id="tos" name="tos" type="checkbox" value="yes" />

check_box_tag 'eula', 'accepted', false, disabled: true
# => <input disabled="disabled" id="eula" name="eula" type="checkbox" value="accepted" /> 
```

`[api.rubyonrails.org](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T13:44:11.137

没有办法直接做到这一点。但是`check_box_tag`实现很简单，您可以对其进行修补或创建自己的助手。

原始实现：

```
 def check_box_tag(name, value = "1", checked = false, options = {})
    html_options = { "type" => "checkbox", "name" => name, "id" => sanitize_to_id(name), "value" => value }.update(options.stringify_keys)
    html_options["checked"] = "checked" if checked
    tag :input, html_options
  end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-08T19:51:18.013

如果您将值“1”传递给 value 字段，它将传递复选框真实状态的值，而不管选中的默认值如何：

```
is_checked = <default boolean>

check_box_tag :show_defaults, '1', is_checked 
```

（现在总是反映用户输入）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-26T06:50:48.117

如果有人有布尔类型的列，那么看看这个。is_checked？将是默认布尔值。它对我有用。

`<%= hidden_field_tag :name, 'false' %> <%= check_box_tag :name, true, is_checked? %>`

# azure - Azure 表查询部分分区键 guid 匹配

> ID：11796631
> 
> 赞同：2
> 
> 时间：2012-08-03T13:23:20.147
> 
> 标签：azure, azure-table-storage

我有以下 PartitionKey 并希望通过“EndsWith”“092a2dca-7107-4859-a129-e590ebd86614”查询找到它。

e306cdfc-f573-490c-937b-c283f2d61e6c|092a2dca-7107-4859-a129-e590ebd86614

有没有办法通过支持的比较字符串方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:28:01.633

答案是不。

不要对分区键进行部分查找，这会导致常规的旧表扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:17:36.457

我建议观看这个云层集，其中 Jai Haridas 介绍[了 Windows azure 存储中的规模设计](http://channel9.msdn.com/Shows/Cloud+Cover/Episode-82-Designing-for-Scale-with-Windows-Azure-Storage)

# java - Weblogic 和 Hibernate 3.6.5，将 DB 层从 Oracle 10g 迁移到 11g，陷阱、陷阱和经验？

> ID：11796633
> 
> 赞同：2
> 
> 时间：2012-08-03T13:23:25.850
> 
> 标签：java, hibernate, oracle10g, weblogic, oracle11gr2

我们目前有一个大型企业基于 java 的代码库，其中包含许多在 Weblogic 中运行的旧项目和新项目，这些项目使用诸如 struts 1、spring MVC 等框架。

我们使用 hibernate 3.6.5 作为我们的 ORM。

我们的 IT 正在将数据库层从 Oracle 10g 升级到 11g。他们正在处理与此相关的所有 db 和 pl/sql 相关问题。

从code/java/weblogic/hibernate来看，有什么需要特别注意的吗？Hibernate 3.6.5 支持 Oracle 11g 并且使用相同的方言，所以从技术上讲，与客户端应该没有任何区别。

我错过了什么吗？如果您有类似迁移的经验，请分享您可能偶然发现的任何陷阱和陷阱，以便我们寻找。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:57:58.560

我相信您必须专门将 Oracle 方言设置为 10g，因为 Hibernate 3.6.x 不会自动检测 Oracle 11g。如果您的应用程序完全依赖 Hibernate 生成的 SQL 语句，那么您应该没问题。

如果您使用一些显式的 Oracle SQL 语句，您可能需要仔细检查它们是否仍然有效 - 与 10g 相比，11gR2 加强了 SQL 语法检查。此外，如果您有明确的 SQL 并在其中包含一些提示，那么您不妨删除提示并重新进行性能测试 - 您可能需要在不同的地方使用与以前不同的提示。祝你好运！

# ios - as3 组件，例如 iOS 的 UIScrollView

> ID：11796637
> 
> 赞同：1
> 
> 时间：2012-08-03T13:23:46.583
> 
> 标签：ios, actionscript-3, air, uiscrollview

我正在寻找一个与 iOS 上的 UIScrollView 类似的 as3 类；IE。您可以拖动视图（电影剪辑）上的任何位置，它会滚动里面的内容。我找到了[ScrollPane](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html)类，但它的右侧只有一个栏，您必须在其中拖动栏或按向上和向下箭头。我想要一个直观的类，您可以在其中滑动任意位置以滚动视图。那里有类似的东西吗？我很惊讶我无法通过搜索找到一些东西。

作为记录，我看到了[这个问题](https://stackoverflow.com/questions/11172033/ios-like-scrollview-in-as3-air)，但它接受的答案链接到一个拙劣的 UITableView 实现，而不是 UIScrollView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T13:25:28.137

这正是你想要的：[https ://github.com/albert-zhang/AZScroll](https://github.com/albert-zhang/AZScroll)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T09:21:32.627

这对我有用，它没有评论，但它相当简单。所有 .fla（不包括在内）都有一个名为 scroll_container 的 MC，其中包含所有项目。

```
 private var hasScrolled:Boolean = false;
    private var checkForScroll:Boolean = false;
    private var oldMouse:Point;

    public function IOSScrollTest() {

        addEventListener( MouseEvent.MOUSE_DOWN, MouseDown );
        addEventListener( MouseEvent.MOUSE_UP, MouseUp );
        addEventListener( Event.ENTER_FRAME, EnterFrame );
    }

    private function MouseDown( e:MouseEvent ) {

        hasScrolled = false;
        checkForScroll = true;
        oldMouse = new Point( mouseX, mouseY );
    }

    private function MouseUp( e:MouseEvent ) {

        if( ! hasScrolled ) {

            // Do your stuff here (onClick things)
        }

        checkForScroll = false;
    }

    private function EnterFrame( e:Event ) {

        if( checkForScroll ) {

            var diff:Number = mouseY - oldMouse.y;
            if( Math.abs(diff) > 2 ) {

                hasScrolled = true;
                oldMouse = new Point( mouseX, mouseY );
                scroll_container.y += diff;
            }
        }
    } 
```

# ruby-on-rails-3 - Rails：确保日期时间使用系统时间

> ID：11796638
> 
> 赞同：0
> 
> 时间：2012-08-03T13:23:52.933
> 
> 标签：ruby-on-rails-3, datetime, timezone

在我们的 rails 应用程序中，时区在我们的环境文件中设置为 UTC。在我们的生产或登台服务器上运行时，这不会导致任何问题。但是，我们的本地开发机器都没有在系统时钟中设置为 UTC，这在比较日期时会导致一些测试失败。这是因为当我们调用时 Rails 使用的是 UTC `DateTime.now`，而我们的 MySQL 数据库使用的是系统时间（在我的例子中是 CST）。

有没有办法确保在某些情况下`DateTime.now`不使用 UTC 时区？我想我要的是一种纯 SQL 更新日期字段的方法，它绕过了 Rails 引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:40:17.177

实际上，您应该能够告诉 rails 仅将本地设置用于`development`其他环境，例如`test`通过将其添加到相应的`config/environments`文件：

```
config.time_zone = "Eastern Time (US & Canada)" #Change this
config.active_record.time_zone_aware_attributes = false
config.active_record.default_timezone = :local 
```

这对我有用，但我将包括生产在内的所有内容都切换到了当地时间。但我不明白为什么这种方法不适用于每个环境！

# perl - perl 脚本中的 sed

> ID：11796640
> 
> 赞同：0
> 
> 时间：2012-08-03T13:24:01.117
> 
> 标签：perl, sed

我在我的 perl 脚本中使用了以下类型的脚本，并期望在第 1 行输入。我收到一些错误，如下所示；有什么帮助吗？

请忽略 perl 变量....

错误消息 - sed：-e 表达式 #1，字符 22：命令后的额外字符

```
# Empty file will not work for Sed line number 1
    `"Security Concerns Report" > $outputFile`;

    `sed '1i\
    \
    DATE :- $CDate \
    Utility accounts with super access:- $LNumOfSupUserUtil \
    Users not found in LDAP with super access: - $LNumOfSupUserNonLdap\

    ' $outputFile > $$`;
    `mv $$ $outputFile`;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T14:34:35.577

您的直接问题是反斜杠字符由 Perl 在[反引号运算符](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)中解释，美元字符也是如此。因此，您的反斜杠换行序列变成了执行的 shell 命令中的换行符。如果你用 替换这些反斜杠`\\`，你会克服这个障碍，但你仍然会有一个非常脆弱的程序。

Perl 正在调用一个调用 sed 的 shell。这需要对您未执行的 shell 进行额外的引用。如果您的文件名和数据不包含特殊字符，则您可能可以摆脱这种情况，直到有人使用包含 a 的日期格式`'`（在许多情况下会破坏您的代码）。

与其解决这个问题，不如在 Perl 中做所有事情要简单得多。sed 和 shell 可以做的所有事情，Perl 几乎可以轻松或更轻松地完成。你的问题不是很清楚你要做什么。我将专注于 sed 调用，但这可能不是编写程序的最佳方式。

如果您确实需要在现有文件中添加一些文本，[CPAN](http://www.cpan.org/)上有一个广泛使用的模块已经很好地完成了这项工作。优先使用现有库而不是重新发明轮子。[`File::Slurp`](http://search.cpan.org/perldoc?File%3A%3ASlurp)有一个[`prepend_file`](http://search.cpan.org/perldoc?File%3A%3ASlurp#prepend_file)方法。在下面的代码中，我对多行字符串使用了[here-document运算符。](http://perldoc.perl.org/perlop.html#%3c%3cEOF)

```
use File::Slurp; # at the top of the script with the other use directives
File::Slurp->prepend_file($outputFile, <<EOF);
DATE :- $CDate
Utility accounts with super access:- $LNumOfSupUserUtil
Users not found in LDAP with super access: - $LNumOfSupUserNonLdap
EOF 
```

# c# - 应用程序通过 ODBC 访问 Sage Line 50 数据时出错

> ID：11796641
> 
> 赞同：1
> 
> 时间：2012-08-03T13:24:09.963
> 
> 标签：c#, .net, odbc, windows-server-2008-r2, sage-line-50

我开发了一个简单的基于 C# 控制台的应用程序，用于从 Sage Line 50 中的表中提取一些数据，并将数据上传到 Web 服务器。它用于 Windows 7 x64 上的 ODBC 连接，并且运行良好。Sage 帐户数据位于映射的网络驱动器上。

我开发/测试过此软件的 PC 已完整安装 Sage Line 50 2011，带有 v17 ODBC 驱动程序，并已应用所有更新。

最终，应用程序将在我们的文件服务器上作为计划作业运行，但是当我尝试在我们的 Windows 2008 R2 文件服务器（托管 Sage 帐户数据的同一文件服务器）上运行代码时，ODBC 驱动程序抛出异常， 如下：

```
ERROR [28000] User ID or Password invalid
ERROR [01000] The driver returned invalid (or failed to return) SQL_DRIVER_ODBC_VER: 2.00
ERROR [IM006] [Microsoft][ODBC Driver Manager] Driver's SQLSetConnectAttr failed
ERROR [01000] [Microsoft][ODBC Driver Manager] The driver doesn't support the version of ODBC behavior that the application requested (see SQLSetEnvAttr). 
```

密码错误是用词不当，因为我知道密码是正确的。ODBC 配置也已确认。

我只从安装 CD 安装了 Sage ODBC 驱动程序，因为我不想在我们的服务器上安装完整的 Sage 应用程序，并注意到 S17DBC32.dll 文件与我的工作站上安装的版本不同（可能由于 Sage 帐户安装的自动更新）。我尝试将这个较新的文件复制到我们文件服务器上原始文件的顶部，并重新创建了 ODBC 配置，但这没有帮助。

自从将 DLL 文件复制到旧的（它是生产服务器）上后，我还没有重新启动服务器。服务器是否需要重新启动才能使新的 DLL 生效，或者是否有其他触发方式？

也许我在叫错树，Sage ODBC 驱动程序 DLL 版本是否无关紧要？非常感谢任何帮助。

* * *

**编辑**

有机会重新启动服务器，新的 DLL 没有任何区别。我仍然看到同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T11:01:28.097

在干净的 Windows 8 安装中遇到了同样的问题。解决方法是安装 .net 3.5 运行时。

在我的 .net 应用程序失败并出现相同的错误（MS-Access 抛出的相同错误没有提示安装）之后，Windows 实际上自己建议了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T14:49:19.153

您需要安装 32 位驱动程序，如果您通过进入 64 位版本的控制面板访问 ODBC，您需要 C:\Windows\SysWOW64\odbcad32.exe

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T15:31:37.017

我最终求助于在服务器上安装了 Sage Accounts 的完整安装（yuk！），应用了自动更新，现在我的应用程序工作正常。

# http - 从 Netty 连接到外部 HTTP 服务器

> ID：11796643
> 
> 赞同：0
> 
> 时间：2012-08-03T13:24:20.980
> 
> 标签：http, nio, netty, router

我需要一些帮助来理解如何编写 HTTP 路由器，它将 HTTP 标头识别为路由条件。我找到了链接[https://github.com/cgbystrom/netty-tools/blob/master/src/main/java/se/cgbystrom/netty/http/router/RouterHandler.java](https://github.com/cgbystrom/netty-tools/blob/master/src/main/java/se/cgbystrom/netty/http/router/RouterHandler.java)似乎自己做路由。但现在还不清楚，如何

*   连接到另一个 HTTP 服务器
*   发送 HTTP 请求
*   等待 HTTP 响应
*   将 HTTP 响应转发给客户端

有人可以给我一些解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:13:01.913

[http://static.netty.io/3.5/xref/org/jboss/netty/example/proxy/package-summary.html](http://static.netty.io/3.5/xref/org/jboss/netty/example/proxy/package-summary.html)

Netty中代理服务器的例子，本质上是我想要的

# jquery - jQuery 将参数传递给 iFrame

> ID：11796650
> 
> 赞同：0
> 
> 时间：2012-08-03T13:24:50.037
> 
> 标签：jquery, jquery-ui, iframe, jquery-selectors

我有几个包含几个复选框的下拉列表。我有一个 iFrame。

我想要的是当我选择我需要的任何选项时，当我单击“刷新”按钮/链接时，值作为参数传递给 iFrame 并刷新该 iFrame

例如，假设我有两个下拉菜单（**dropdownA**和**dropdownB**）。iFrame 的 URL 为**www.report.com/reportone**。

**dropdownA**的值为**1,2,3**，而**dropdownB**的值为**A,B,C**。

假设我选择**1,2**和**B,C**并单击刷新，然后 iFrame 应加载此**report.com/reportone?dropdownA=1&dropdownA=2&dropdownB=B&dropdownB=C**

我该如何设置呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:42:22.417

这样的事情可能会帮助你：

```
var params = "";
$("#dropdownA option:selected").each(function () {
    if (params.length == 0)
        params += "?";
    else
        params += "&";
    params += "dropdownA=" + $(this).val();
});

$("#dropdownB option:selected").each(function () {
    if (params.length == 0)
        params += "?";
    else
        params += "&";

    params += "dropdownB=" + $(this).val();
});
$('#your_iframe_id').attr("src", "report.com/reportone" + params); 
```

# javascript - Javascript HTTPS-Frame 访问父 HTTP-Frame

> ID：11796651
> 
> 赞同：1
> 
> 时间：2012-08-03T13:24:52.613
> 
> 标签：javascript, html, cross-domain, xss, same-origin-policy

带有 URL 的 IFRAME 如何`https://domain/`访问具有 URL 的父框架的 DOM `http://domain/`（HTTPS 调用 HTTP）？

**两个框架将合作。**两个帧的域相同，只是**协议不同**。不允许设置`document.domain`，因为这将允许来自其他不受信任的帧的 XSS 攻击。

作为访问 DOM 的替代方法，发送消息（包含单个整数）就足够了。请注意，该`postMessage`API 仅适用于 IE8+。我需要**IE6+**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:39:23.523

easyXDM 是一种选择。它支持带有支持的浏览器的 postMessage，并回退到旧浏览器的其他机制。有些机制有点老套，但它们确实有效。

但是为什么要在不安全的页面上使用安全的 iframe？

# iphone - NSObject+JSONSerializableSupport 中的内存泄漏

> ID：11796652
> 
> 赞同：2
> 
> 时间：2012-08-03T13:24:56.937
> 
> 标签：iphone, ios, xcode, memory-management, memory-leaks

在我的 iPad 应用程序中删除运行时内存泄漏时，我在以下方法中的 NSObject+JSONSerializableSupport 类中遇到了这个奇怪的内存泄漏

```
+ (id) deserializeJSON:(id)jsonObject {
id result = nil;
if ([jsonObject isKindOfClass:[NSArray class]]) {
    //JSON array
    result = [NSMutableArray array];
    for (id childObject in jsonObject) {
        [result addObject:[self deserializeJSON:childObject]];
    }
}
else if ([jsonObject isKindOfClass:[NSDictionary class]]) {
    //JSON object
    //this assumes we are dealing with JSON in the form rails provides:
    // {className : { property1 : value, property2 : {class2Name : {property 3 : value }}}}
    NSString *objectName = [[(NSDictionary *)jsonObject allKeys] objectAtIndex:0];

    Class objectClass = NSClassFromString([objectName toClassName]);
    if (objectClass != nil) {
        //classname matches, instantiate a new instance of the class and set it as the current parent object
        result = [[[objectClass alloc] init] autorelease];
    }

    NSDictionary *properties = (NSDictionary *)[[(NSDictionary *)jsonObject allValues] objectAtIndex:0];

    NSDictionary *objectPropertyNames = [objectClass propertyNamesAndTypes];

    for (NSString *property in [properties allKeys]) {
        NSString *propertyCamalized = [[self convertProperty:property andClassName:objectName] camelize];
        if ([[objectPropertyNames allKeys]containsObject:propertyCamalized]) {
            Class propertyClass = [self propertyClass:[objectPropertyNames objectForKey:propertyCamalized]];
            [result setValue:[self deserializeJSON:[propertyClass deserialize:[properties objectForKey:property]]] forKey:propertyCamalized];
        }
    }
}
else {
    //JSON value
    result = jsonObject;
}
return result; 
```

}

我在这条线上遇到了内存泄漏

```
[result setValue:[self deserializeJSON:[propertyClass deserialize:[properties objectForKey:property]]] forKey:propertyCamalized]; 
```

请提出解决方案或告诉我哪里出错了。

# javascript - 使用 jquery 或 javascript 删除事件

> ID：11796660
> 
> 赞同：5
> 
> 时间：2012-08-03T13:25:12.923
> 
> 标签：javascript, jquery

我有这个：

```
$(function(){
    //remove keydown doSomething2
    $("body").keydown(doSomething1);
}); 
```

在其他观点我有这个：

```
$(function(){
    //remove keydown doSomething1
    $("body").keydown(doSomething2);
}); 
```

如何处理评论中的内容？使用我当前的代码，doSomething1 和 doSomething2 都被调用。我想禁用我不需要的那个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T13:27:14.797

要使用 jQuery 删除事件侦听器，您可以使用[`.off()`](http://api.jquery.com/off/)：

```
$("body").off("keydown", doSomething2); 
```

请记住，该[`keydown`方法](http://api.jquery.com/keydown/)只是[`.on("keydown", ...)`](http://api.jquery.com/on/).

但是，要“禁用”它们，可能更容易只有一个处理程序根据当前选定的视图执行不同的事情，或者将它们都绑定并且每个都进行简短检查以确保当前选择了正确的视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T13:27:45.623

如果`doSomething2`是**函数引用**，您可以使用[`.off()`](http://api.jquery.com/off/)（jQuery 1.7+）或[`.unbind()`](http://api.jquery.com/unbind/)删除 jQuery 绑定事件处理程序：

```
$('body').off('keydown', doSomething2);

// or

$('body').unbind('keydown', doSomething2); 
```

请注意，执行顺序将是一个因素。如果首先运行取消绑定事件处理程序的代码，它将无效。一般来说，jQuery 事件处理程序是按照它们绑定的顺序触发的，所以如果你的问题中的第一个代码片段首先执行，这种方法将不起作用（你需要重新排序）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T13:29:07.483

使用 jQuery 尝试如下：

```
$(function(){
    // this would remove keydown from body
    $("body").unbind('keydown', doSomething2);
}); 
```

# android - 在列表中的最后一项之后显示分隔符

> ID：11796662
> 
> 赞同：4
> 
> 时间：2012-08-03T13:25:21.303
> 
> 标签：android, android-listview, divider

我在我的列表视图中添加了一个可绘制的分隔线，但它出现在除最后一项之后的所有项目中。

我的列表中只有 5 项，所以在最后一项之后都是空白，即使在最后一项之后我也想有一个分隔符

我试过这个：

```
android:footerDividersEnabled="true" 
```

在我的列表视图中。但它没有工作

谢谢你

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T13:29:51.957

尝试在 XML 中关注

```
<View
    android:background="#00ff00"
    android:layout_width="fill_parent"
    android:layout_height="3dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/YOUR_LIST_ID" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T13:33:18.447

水平线

```
<View
android:id="@+id/view"
android:background="#FF4500"
android:layout_width="fill_parent"
android:layout_height="2dp"     
android:layout_below="@+id/listview_id" /> 
```

垂线

```
 <View
android:id="@+id/view"
android:background="#FF4500"
android:layout_width="2dp"
android:layout_height="fill_parent"     /> 
```

# mysql - 编写mysql函数但失败

> ID：11796663
> 
> 赞同：0
> 
> 时间：2012-08-03T13:25:25.083
> 
> 标签：mysql

尝试在 mysql 中编写此函数，但它给出的错误是：

**`Error Code : 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF Per='hour' THEN SET t=Price ; END IF; IF Per='day' THEN SET t=Price/24; END ' at line 8`**

```
DELIMITER$$
CREATE  FUNCTION PricePerHour (Price REAL, Per VARCHAR(5))  
RETURNS REAL 
DETERMINISTIC

BEGIN 
DECLARE t REAL;
IF Price IS NOT NULL AND Per IS NOT NULL

IF Per='hour' THEN SET t=Price ; END IF;
IF Per='day' THEN SET t=Price/24; END IF;
IF Per='week' THEN SET t=Price/7/24; END IF;
IF Per='month' THEN SET t=Price/30/24; END IF;
IF Per='year' THEN SET t=Price/365/30/24; END IF;

RETURN t;
END IF;
END $$
DELIMITER; 
```

任何帮助都应该不胜感激。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:29:03.580

缺少 THEN 吗？

```
DELIMITER$$
CREATE  FUNCTION PricePerHour (Price REAL, Per VARCHAR(5))  
RETURNS REAL 
DETERMINISTIC

BEGIN 
DECLARE t REAL;
IF Price IS NOT NULL AND Per IS NOT NULL   **THEN**

IF Per='hour' THEN SET t=Price ; END IF;
IF Per='day' THEN SET t=Price/24; END IF;
IF Per='week' THEN SET t=Price/7/24; END IF;
IF Per='month' THEN SET t=Price/30/24; END IF;
IF Per='year' THEN SET t=Price/365/30/24; END IF;

RETURN t;
END IF;
END $$
DELIMITER; 
```

# python - 如果消息包含某些字符，smtplib 将发送空白消息

> ID：11796664
> 
> 赞同：12
> 
> 时间：2012-08-03T13:25:36.437
> 
> 标签：python, email, smtplib

我当前的脚本允许我很好地发送电子邮件，但是它不喜欢一些字符，特别是`':'`在这个示例中。

```
import smtplib, sys

mensaje = sys.argv[1]
def mailto(toaddrs, msg):
    fromaddr = 'myemailblabla'

    username = 'thisismyemail'
    password = '122344'

    server = smtplib.SMTP('smtp.gmail.com:587')
    server.starttls()
    server.login(username, password)
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()

mailto('test@gmail.com', mensaje) 
```

如果我写了一个示例消息，例如，假设`"Hi there\n how are you?"`它工作正常，但假设我尝试发送一个 url `http://www.neopets.com`，则电子邮件发送为空白。我相信`':'`导致这个问题的原因，所以我试图逃避它，但没有。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T14:08:53.810

问题是`smtplib`没有在邮件标题和邮件正文之间放置一个空行，如我的测试的“显示原始”表单所示：

```
Return-Path: <me@gmail.com>
Received: **REDACTED**
        Fri, 03 Aug 2012 06:56:20 -0700 (PDT)
Message-ID: <501bd884.850c320b@mx.google.com>
Date: Fri, 03 Aug 2012 06:56:20 -0700 (PDT)
From: me@gmail.com
http: //www.example.com 
```

尽管这是一个合法的邮件标题，但邮件传输代理和邮件用户代理应该忽略他们不理解的明显标题字段。并且因为 RFC822 标头一直持续到第一个空白行并且`http:`看起来像标头行，所以它被解析为好像它是标头一样。如果给出换行符：

```
mensaje = '\nhttp://www.example.com' 
```

然后它按预期工作。虽然电子邮件在技术上只需要`smtplib`邮件内容提供的“信封”，但如果您希望您的收件人（及其邮寄者）很好地处理邮件，那么您应该更完整，但您可能应该使用[电子邮件](http://docs.python.org/library/email.html)模块来生成正文。

**添加**

根据其中的 doctest，`smtplib.py`这似乎是一个有意的功能，允许调用者`sendmail()`附加到标题：

```
 >>> msg = '''\\
     ... From: Me@my.org
     ... Subject: testin'...
     ...
     ... This is a test '''
     >>> s.sendmail("me@my.org", tolist, msg) 
```

`From:`和线是我上面提到`Subject:`的“漂亮”标题的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-09T15:09:34.473

正确的解决方案是使用 Python`email`库来创建有效消息，而不是费力地学习（或疯狂地随机猜测）如何通过将文本连接在一起来构建有效的 MIME 消息结构。

可以轻松创建仅包含 ASCII 的简单 RFC822 消息

```
'From: {0}\nTo: {1}\nSubject: {2}\n\n{3}'.format(
    fromaddr, toaddr,
    'Hello, I am the exiled prince of Ubandingba',
    'http://clickme.example.net/scam/') 
```

但是，一旦您需要其他字符集、超过 80 个字符的行、纯文本以外的内容类型，或者通常比 1990 年的电子邮件更高级的任何内容，代码应该看起来像

```
from email.message import EmailMessage

msg = EmailMessage()
msg['from'] = fromaddr
msg['to'] = toaddr
msg['subject'] = 'You have been nominated for the Nobel prize'
msg.set_content('http://scam.example.org/clickme') 
```

诚然，它稍微有点冗长，但也无限多才多艺、健壮和可扩展。

这使用了`EmailMessage`Python 3.6 中正式引入的 API。新代码可能应该针对这个平台，而不是`email.Message`早期版本的遗留模块，尽管您可以找到的大多数在线代码示例都是针对较旧的 Python 库的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:53:45.800

我不认为这与冒号有关，而是与`http://`开始信息有关。

```
mailto('test@gmail.com', 'http://www.url.com')
mailto('test@gmail.com', 'http://www.url.com that is a url')
mailto('test@gmail.com', ' http://www.url.com') 
```

都失败了，但是：

```
mailto('test@gmail.com', 'Here is a url http://www.url.com') 
```

顺利通过。

# c# - 使用泛型的接口“无法隐式转换类型”

> ID：11796665
> 
> 赞同：1
> 
> 时间：2012-08-03T13:25:42.353
> 
> 标签：c#, generics

如果我有一个接受从 IUser 派生的泛型类型的类，我该如何避免此错误消息

> 无法将类型隐式转换`ElimCMS.Service.Users.someclass<ElimCMS.DataModel.Users.User>`为`ElimCMS.Service.Users.Isomeclass<ElimCMS.DataModel.Users.IUser>`. 存在显式转换（您是否缺少演员表？）

例子

```
 public interface Isomeclass<TUser>
   where TUser : class, IUser
   {

    string test(TUser user);
    TUser returnUser();
   }

   public class someclass<TUser> : Isomeclass<TUser>
   where TUser : class, IUser, new()
   {
    public string test(TUser user)
    {
        string email = user.EMail;
        user.EMail = "changed:" + email;

        return email;
    }

    public TUser returnUser()
    {
        throw new NotImplementedException();
    }
}

 Isomeclass<ElimCMS.DataModel.Users.IUser> servicetest = new someclass<ElimCMS.DataModel.Users.User>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:34:45.853

发生这种情况是因为具有不同类型的泛型彼此不兼容。为了解决这个问题，您可以使用声明您的泛型参数`Isomeclass`是协变的

```
public interface Isomeclass<out TUser>
   where TUser : class, IUser
{

    string test(TUser user);
    TUser returnUser();
} 
```

但是，这将破坏该`test`方法，因为它不再是类型安全的。要解决这个问题，您可以将参数`user`类型更改为`IUser`，它会像以前一样工作。

这取决于您使用的 C# 版本。对于某些旧版本，泛型不能声明为协变，这意味着您必须将分配目标更改为与您分配给它的对象的类型相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:34:00.083

`Isomeclass<ElimCMS.DataModel.Users.IUser>`并且`someclass<ElimCMS.DataModel.Users.User>`不是赋值兼容的。事实上，`Isomeclass<ElimCMS.DataModel.Users.IUser>`并`Isomeclass<ElimCMS.DataModel.Users.User>`不能相互分配。

由于您想将类型参数指定的类型`TUser`同时用作输入和输出参数，因此不能将类型参数声明为协变或逆变，因此在接口/类中保留当前方法签名的唯一解决方案似乎是键入您的列表实例`IUser`：

```
new someclass<ElimCMS.DataModel.Users.IUser>(); 
```

或键入您的列表变量`User`：

```
 Isomeclass<ElimCMS.DataModel.Users.User> servicetest 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:32:49.287

更改您的声明

```
public interface Isomeclass<TUser> where TUser : class, IUser
{
    string test(TUser user);
    TUser returnUser();
} 
```

至

```
public interface Isomeclass<out TUser> where TUser : class, IUser
{
    string test(IUser user);
    TUser returnUser();
} 
```

并`test`适当地重新定义方法`someclass<TUser>`以匹配。

如果您使用的是 C# 4 (Visual Studio 2010) 或更高版本，则可以执行此操作。这会给你你所需要的。如果您使用的是以前的版本，那么您将不得不恢复`object`并进行一些转换。

# c++ - 将 4 个值编码为 32 位整数

> ID：11796674
> 
> 赞同：3
> 
> 时间：2012-08-03T13:25:59.187
> 
> 标签：c++, c

我正在尝试创建一个将 4 个值编码为一个 32 位整数的类。到目前为止，它保存并输出了所有值而没有丢失任何东西，但是由于某种原因，顺序错误。

```
struct encoder {
    uint32_t val;

    encoder(uint32_t _val = 0) : val(_val) {}

    uint32_t first(uint32_t v = 0) {
        if (!v) return (val << (8*3)) >> (8*3);

        val |= v;
    }

    uint32_t second(uint32_t v = 0) {
        if (!v) return (val << (8*2)) >> (8*3);

        encoder _backupval(val);

        val = (val >> (8*1));
        val |= v;
        val = (val << (8*1));
        val |= _backupval.first();
    }

    uint32_t third(uint32_t v = 0) {
        if (!v) return (val << (8*1)) >> (8*3);

        encoder _backupval(val);

        val = (val >> (8*2));
        val |= v;
        //now restore
        val = val << 8;
        val |= _backupval.second();
        val = val << 8;
        val |= _backupval.first();
    }

    uint32_t fourth(uint32_t v = 0) {
        if (!v) return (val << (8*0)) >> (8*3);

        encoder _backupval(val);

        val = (val >> (8*3));
        val |= v;
        //now restore
        val = val << 8;
        val |= _backupval.second();
        val = val << 8;
        val |= _backupval.first();
        val = val << 8;
        val |= _backupval.third();
    }
};

int main() {
    encoder t;
    t.first(6);
    t.second(42);
    t.third(212);
    t.fourth(23);

    cout << "first number: " << t.first()
         << "\nsecond number: " << t.second()
         << "\nthird number: " << t.third()
         << "\nfourth number: " << t.fourth() << endl;

} 
```

请注意，我这样做是作为练习，并且该程序不会在实际程序中使用。所以不要提出替代方法，也不要指出缺陷（比如如果数字的大小超过 256，它会破坏另一个整数等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:37:11.547

您混合了函数的顺序`fourth`：

```
uint32_t fourth(uint32_t v = 0) {
    if (!v) return (val << (8*0)) >> (8*3);

    encoder _backupval(val);

    val = (val >> (8*3));
    val |= v;
    //now restore
    val = val << 8;
    val |= _backupval.second();
    val = val << 8;
    val |= _backupval.first();
    val = val << 8;
    val |= _backupval.third();  // this should be called first!
} 
```

这将导致加扰的返回值。只需`third`先打电话，[它就会工作](http://ideone.com/V2Y7D)：

```
uint32_t fourth(uint32_t v = 0) {
    if (!v) return (val << (8*0)) >> (8*3);

    encoder _backupval(val);

    val = (val >> (8*3));
    val |= v;
    //now restore
    val = val << 8;
    val |= _backupval.third();
    val = val << 8;
    val |= _backupval.second();
    val = val << 8;
    val |= _backupval.first();
} 
```

# c#-4.0 - 如果有新消息，MSMQ 能否引发事件

> ID：11796676
> 
> 赞同：4
> 
> 时间：2012-08-03T13:26:06.340
> 
> 标签：c#-4.0, msmq

作为不断轮询现有 Microsoft 消息队列的替代方法，我想知道 MSMQ 是否可以引发某种类型的事件/通知以让应用程序知道消息可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:17:07.533

`MessageQueue`通知不佳且没有消息到达通知（请参阅[MessageQueue 类](http://msdn.microsoft.com/en-us/library/4a8520c4)）

您可以自己实现通知。这是很好的实现（请参阅[A simple MSMQ Listener helper class](http://blogs.msmvps.com/manoj/2005/10/16/a-simple-msmq-listener-helper-class/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-10T08:41:24.777

我知道这是一个老问题，但来这里是为了寻找在队列中收到消息时命中的事件。这是我所做的：

```
 private static MessageQueue _messageQueue = null;
    static void Main(string[] args)
    {

        if (MessageQueue.Exists(@".\Private$\orders"))
        {
            _messageQueue = new MessageQueue(@".\Private$\orders") {Label = "Testing Queue"};
        }

        _messageQueue.ReceiveCompleted += new ReceiveCompletedEventHandler(OnMessageRecieved);
        _messageQueue.BeginReceive();

        Console.ReadLine();

    }

    private static void OnMessageRecieved(object sender, ReceiveCompletedEventArgs e)
    {
        //Process your message here. 
        _messageQueue.BeginReceive();
    } 
```

# android - 没有 clientID 和 clientSecret 的 Accountmanager Auth 令牌

> ID：11796677
> 
> 赞同：3
> 
> 时间：2012-08-03T13:26:13.940
> 
> 标签：android, accountmanager, auth-token

您好，我正在使用该代码在我的应用程序上检索身份验证令牌：

```
private String updateToken(boolean invalidateToken, int accountref) {
    String authToken = "null";
    try {
        AccountManager am = AccountManager.get(TestAuthActivity.this);
        Account[] accounts = am.getAccountsByType("com.google");
        AccountManagerFuture<Bundle> accountManagerFuture;
        if(TestAuthActivity.this == null){//this is used when calling from an interval thread
            accountManagerFuture = am.getAuthToken(accounts[accountref], SCOPE_CONTACTS_API, false, null, null);
        } else {
            accountManagerFuture = am.getAuthToken(accounts[accountref], SCOPE_CONTACTS_API, null, TestAuthActivity.this, null, null);
        }
        Bundle authTokenBundle = accountManagerFuture.getResult();
        authToken = authTokenBundle.getString(AccountManager.KEY_AUTHTOKEN).toString();
        if(invalidateToken) {
            am.invalidateAuthToken("com.google", authToken);
            authToken = updateToken(false, accountref);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    Dialog d = new Dialog(TestAuthActivity.this);
    d.setTitle("Token :" + authToken);
    d.show();

    return authToken;
} 
```

我确实收到了一个 authToken ！（虽然我没有输入clientID和clientSecret）==> `accountManagerFuture = am.getAuthToken(accounts[accountref], SCOPE_CONTACTS_API, null, TestAuthActivity.this, NULL (HERE), null);`，那个令牌有效吗？

编辑 2012 年 5 月 8 日：

这是我的新 PHP 脚本代码，它试图使用令牌来获取用户的 ID，但仍然从谷歌服务器获取“无效令牌”：

```
<?php

if( isset($_POST['authToken'])){        

//curl -H 'Authorization: GoogleLogin auth="Your_ClientLogin_token"' https://www.google.com//m8/feeds/contacts/default/full

    $var = $_POST['authToken'];
    $url = "https://accounts.google.com/o/oauth2/tokeninfo?access_token='".$var."' ";       
    //$url = "https://www.google.com/accounts/OAuthAuthorizeToken?oauth_token='"<?php echo rfc3986_decode($_POST['authToken'])"' ";

    //<?php echo $oauth->rfc3986_decode($accrss_token['oauth_token']) 
    // Initialize session and set URL.
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);

        // Set so curl_exec returns the result instead of outputting it.
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

        // Get the response and close the channel.
        $response = curl_exec($ch);
        curl_close($ch);

        echo(json_encode($response));

}
?> 
```

我得到的令牌是相同的 java android 代码，但这两行发生了变化：

```
 if(TestAuthActivity.this == null){//this is used when calling from an interval thread
            accountManagerFuture = am.getAuthToken(accounts[accountref], "oauth2:https://www.googleapis.com/auth/userinfo.email", false, null, null);
        } else {
            accountManagerFuture = am.getAuthToken(accounts[accountref], "oauth2:https://www.googleapis.com/auth/userinfo.email", null, TestAuthActivity.this, null, null);
        } 
```

这是我将令牌从我的 android 应用程序发送到我的 php 服务器的方式：

```
public static void createSession(Context con, String authToken) {

    String result = null;
    InputStream is = null;

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("authToken", authToken));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://192.168.1.13/loginSession/authActivity4.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);

        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.i("taghttppost", "" + e.toString());

    }

    // conversion de la réponse en chaine de caractère
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"));

        StringBuilder sb = new StringBuilder();

        String line = null;

        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();

        result = sb.toString();
    } catch (Exception e) {
        Log.i("tagconvertstr", "" + e.toString());
    }
    // recuperation des donnees json
    try {
        Log.i("tagconvertstr", "[" + result + "]");

        JSONObject jObj = new JSONObject(result);

        long userID = jObj.getLong("user_id");

        Dialog d = new Dialog(con);
        d.setTitle(String.valueOf(userID));
        d.show();

    } catch (JSONException e) {
        Log.i("tagjsonexp", "" + e.toString());
    } catch (ParseException e) {
        Log.i("tagjsonpars", "" + e.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:16:42.393

鉴于您正在使用令牌类型“ `oauth2:https://www.googleapis.com/auth/userinfo.email`”，我看不出您获取令牌的 Android 代码有任何问题，正如您在稍后的更新中提到的那样。

我有一个代码非常相似的测试应用程序，当使用令牌类型“ `oauth2:https://www.googleapis.com/auth/userinfo.email`”时，我得到了一个有效的令牌（在我的手机上运行 Android 2.3.3），所以它应该可以工作。

为了确保令牌有效，我记录了令牌，从日志中复制它并加载`https://accounts.google.com/o/oauth2/tokeninfo?access_token=<token>`到 Chrome 中。当我这样做时，我得到了预期的响应，没有任何错误。

也许您可以进行相同的测试以缩小问题所在？

更新：

这仅在您获得的初始令牌有效时才有效，在过期后您尝试使用它时会收到错误消息。令牌过期一段时间后，我的测试应用程序停止工作。当我将其更改为在收到令牌后始终使令牌无效时，它又开始工作了。

由于某种原因，当令牌类型为“”时调用`am.invalidateAuthToken("com.google", null);`不会使令牌无效`oauth2:https://www.googleapis.com/auth/userinfo.email`，因此当您想要使其无效时必须指定令牌（就像您的代码一样）。

因此，如果您确保始终调用 updateToken() 方法并将 invalidateToken 参数设置为 true，那么这应该适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:31:07.313

此 API 不将 clientID 或 clientSecret 作为输入。AccountManager 将使用您保存的 Google 凭据通过在后台调用任何所需的 Web API 为您获取令牌，或者返回缓存的令牌（如果可用）。如果它返回一个没有错误的令牌，它应该是有效的。试试看。

# json - 客户端的 Api 空输出

> ID：11796679
> 
> 赞同：0
> 
> 时间：2012-08-03T13:26:23.143
> 
> 标签：json, api

我正在研究我最近编写的脚本的 api。在浏览器上，文件的输出工作正常，请参见此处： http://www.lilink.it/api.php?u=http: [//www.designzzz.com/&method=get_short_url](http://www.lilink.it/api.php?u=http://www.designzzz.com/&method=get_short_url)
但如果我在客户端调用它返回空。这是客户端的代码：

```
<script type="text/javascript">
$(document).ready(function() { 
    // method 1
    $.get('http://lilink.it/api.php', {method: 'get_short_url', u: 'http://www.blastingart.com/ayaz-malik'},

        function(data){
            alert(data.status + data.res);
        }, "json"
    );

    // method 2
    $.getJSON('http://lilink.it/api.php?method=get_short_url&u=http://www.blastingart.com/ayaz-malik', function(data) {
        if (data.status == 1) {
            alert(data.status + data.res);
        }
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:33:41.923

可能，您正在尝试发出跨域请求。出于安全原因，现代 Web 浏览器拒绝跨域请求。但是可以使用特殊技术来实现它们。看：

[http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:29:50.400

您可能对同源策略有疑问：更多信息[在这里](http://en.wikipedia.org/wiki/Same_origin_policy)

# ruby-on-rails - 使用 Ruby 临时设置系统时间以进行单元测试

> ID：11796683
> 
> 赞同：4
> 
> 时间：2012-08-03T13:26:45.363
> 
> 标签：ruby-on-rails, unit-testing, validation, mocking, ruby-on-rails-3.2

我已经在 Apt 模型上创建了一个自定义验证，如果表单提交是在下午 3 点之后完成，则验证不能在第二天预订约会，我正在尝试确定运行单元测试的最佳方式验证我的自定义验证是否正常工作。

目前，我的测试包含一个 if 语句来检查测试是在下午 3 点之前还是之后运行，并根据当前系统时间使用不同的测试。但是，无论系统时间是多少，我都希望能够测试这两种情况。

```
test "booking appointment for tomorrow before/after three pm" do
  a = appointments(:aptone)

  # Set appointment date to tomorrow
  a.apt_date = DateTime.current + 1.day

  if (Time.current.hour >= 12)
    assert(a.invalid?, 'Appointment CANNOT be booked after 3 PM')
  elsif
    assert(a.valid?, 'Appointment CAN be booked before 3 PM')
  end
end 
```

我想知道是否有办法在运行测试时临时设置系统时间，以便无论何时运行测试，我都可以测试这两个断言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T13:33:46.870

一种更简单的方法是使用模拟框架来存根来自`DateTime.current`调用的响应以返回您的硬编码值。

这样可以避免弄乱您的系统时钟。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T13:35:21.067

我可以强烈推荐[timecop gem](https://github.com/jtrupiano/timecop)，它是为您提到的要求而编写的。查看 github 页面上的文档，特别是`freeze`方法（或`travel`，但最好在您的示例中针对冻结的系统时间进行测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:38:05.947

系统时间与您的操作系统有关，与您的应用程序无关。所以如果你想设置它，那么你可以在 Linux 中使用 date --set="STRING" 来设置它。

# jsp - JSTL 从其他变量中引用变量

> ID：11796685
> 
> 赞同：0
> 
> 时间：2012-08-03T13:26:52.960
> 
> 标签：jsp, jstl, el

我想做这样的事情。

```
<c:set var="test_test">test</c:set>

<c:set var="test2">test_test</c:set> 
```

现在我想从 test2 打印 test_test

```
<c:out value ="${{test2}}"/> 
```

这行不通，但我想做这样的事情。

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:52:05.677

如果您事先知道范围，则在使用大括号表示法传递动态键时直接使用范围映射。当在`<c:set>`没有明确指定`scope`属性的情况下使用 时，它最终会出现在页面范围内，这是一个可用的地图`${pageScope}`，所以这应该适合你：

```
${pageScope[test2]} 
```

请求、会话和应用程序范围映射可通过`${requestScope}`和`${sessionScope}`获得`${applicationScope}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:45:41.743

如果我理解正确，您想`test2`使用 的值进行初始化`test_test`。如果是这样，你只需要

```
<c:set var="test2" value="${test_test}"/> 
```

大致相当于下面的Java代码

```
Object test2 = test_test; 
```

而如果要显示 的内容`test2`（也就是 的内容`test_test`），只需要

```
<c:out value="${test2}"/> 
```

# xsd - XSD 枚举限制不起作用

> ID：11796691
> 
> 赞同：3
> 
> 时间：2012-08-03T13:27:21.133
> 
> 标签：xsd, xsd-validation

```
<xs:element name="featureTests">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="test" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="status">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:enumeration value="not run"/>
                                    <xs:enumeration value="passed"/>
                                    <xs:enumeration value="failed"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element> 
                        <xs:element name="summary" type="xs:string"/>
                        <xs:sequence>
                            <xs:element name="step" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
                        </xs:sequence>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

我正在使用上面的 XSD 来验证我的 xml 文件，除了`status`标签枚举限制之外，这些文件都可以正常工作。

如果我这样做：

```
<status>
    not run <!--OR passed OR failed-->
</status> 
```

验证失败，说它必须包含 [not run,passed,failed]

你能告诉我哪里出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:17:45.897

问题的出现是因为 xml 文档中围绕枚举值的空格/制表符，即有这个“不运行”而不是这个“不运行”。

为了解决这个问题，我将 XSD 文件更改为使用令牌类型而不是字符串类型来删除前导和尾随空白字符：

```
<xs:restriction base="xs:token"> 
    <xs:enumeration value="not run"/> 
    <xs:enumeration value="passed"/> 
    <xs:enumeration value="failed"/> 
</xs:restriction> 
```

# jquery - “全选”复选框不起作用

> ID：11796696
> 
> 赞同：0
> 
> 时间：2012-08-03T13:27:28.920
> 
> 标签：jquery

我正在尝试创建域搜索表单。将有带有单个域名的复选框以及全选或搜索所有复选框。当点击它时，所有其他复选框都应该被选中，而在取消选中它时，所有其他复选框也应该被取消选中。现在这是我正在尝试使用的脚本，但由于某种原因它不起作用

脚本

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'></script>
        <script type="text/javascript">//<![CDATA[ 
$(window).load(function(){

$("#checkAll").change(function() {
    $(":checkbox").attr("checked", this.checked);
});
$(".others").change(function() {
    if (!$('input.others[type=checkbox]:not(:checked)').length)
        $("#checkAll").attr('checked', true);
    if (!$('input.others[type=checkbox]:checked').length)
        $("#checkAll").attr('checked', false);
});
});//]]> 
```

HTML 部分

```
<div class="tran_form">
                    <form id="form3" action="whmcs/cart.php?a=add&domain=register" method="post">
                    <input type="hidden" name="token" value="52fe670c7c55b28b9e76c677afd97580147cbb5e" />
                        <fieldset class="d-block">
                            <div class="margin-bot">
                                <div class="inp_title">www.</div>
                                <label class="input-1">
                                    <input type="text" name="sld">
                                </label>
                                <a href="#" class="button-2" onClick="document.getElementById('form3').submit()">Search Now!</a>
                                <div class="clear"></div>
                            </div>
                            <div class="wrapper">
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".in" class="others">
                                    <label>.in</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".com" class="others">
                                    <label>.com</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".net" class="others">
                                    <label>.net</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".org" class="others">
                                    <label>.org</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".biz" class="others">
                                    <label>.biz</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" name="tlds[]" value=".info" class="others">
                                    <label>.info</label>
                                </div>
                                <div class="col-1">
                                    <input type="checkbox" id="checkAll">
                                    <label class="reg2 color-1">Search All</label>
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div> 
```

知道我在做什么错吗？似乎不起作用。当我使用该脚本的低调版本时，如下所示

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'></script>
<script type="text/javascript">//<![CDATA[
$(window).load(function(){
$("#checkAll").change(function() {
$(":checkbox").attr("checked", this.checked);
});
$(".others").change(function() {
    if (!$('input.others[type=checkbox]:not(:checked)').length)
        $("#checkAll").attr('checked', true);
    if (!$('input.others[type=checkbox]:checked').length)
        $("#checkAll").attr('checked', false);
});
});//]]> 
</script>
</head>
<body> 
<div>
<input type="checkbox" value="" id="checkAll">
<input type="checkbox" value="a" class="others">
<input type="checkbox" value="b" class="others">
<input type="checkbox" value="c" class="others">
</div>
</body>
</html> 
```

全选工作正常，但是当我尝试将其采用到我正在处理的站点中时，它将无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:34:44.200

将 javascript 放在`<head>`您的 HTML 中，该`checkAll`功能将正常工作。[**JSFIDDLE**](http://jsfiddle.net/pz6wB/)

```
<html>
<head>
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'>
  </script>
  <script type="text/javascript">//<![CDATA[ 
    $(window).load(function(){
    $("#checkAll").change(function() {
    $(":checkbox").attr("checked", this.checked);
    });
    $(".others").change(function() {
        if (!$('input.others[type=checkbox]:not(:checked)').length)
            $("#checkAll").attr('checked', true);
        if (!$('input.others[type=checkbox]:checked').length)
            $("#checkAll").attr('checked', false);
    });
    });//]]>
  </script>
</head>

<body>
  <div class="tran_form">
    ..... 
```

# eclipse - 如何使用 Eclipse Datasource Explorer 浏览 derby 内存数据库？

> ID：11796697
> 
> 赞同：7
> 
> 时间：2012-08-03T13:27:29.653
> 
> 标签：eclipse, derby

对于单元测试，我使用 derby 内存数据库。

测试运行时是否有机会使用 Eclipse Datasource Explorer 之类的工具连接到该数据库？

我用谷歌搜索了很多，有时我发现了类似的东西：

连接 URL：jdbc:derby://localhost:1527/memory/mydb...

但这对我不起作用。

它说 1527 是默认端口。

是否可以使用 eclipse explorer 之类的工具连接到 derby 内存数据库？数据库是否打开连接端口来连接？还是我必须配置一些特别的东西才能使它工作？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:39:22.620

嗨，经过更多研究，我得到了解决方案。

要连接到嵌入式 derby 内存数据库，您必须在应用程序中启动 NetworkServerControl。之后，您可以使用 eclipse DTP Plugin / Datasource Explorer 连接到 derby 数据库。

创建内存数据库和启动 NSC 的代码如下所示：

```
public static void main(String args[])
{
   NetworkServerControl nsc = new NetworkServerControl(InetAddress.getByName("localhost"), 1527);
   nsc.start(new PrintWriter(System.out, true));

   Class.forName("org.apache.derby.jdbc.EmbeddedDriver");

   Connection c = DriverManager.getConnection("jdbc:derby:memory:testdb;create=true");

} 
```

您必须包含 jdk7 (lib\db) 附带的 derby.jar 和 derbynet.jar 才能创建 NetworkServerControl 和数据库。

之后，只要您的应用程序（和数据库）正在运行，您就可以连接到数据库。连接 URL 为：jdbc:derby://localhost:1527/memory:testdb

用户和密码：您的选择

问候，

亚历克斯

# java - `@XmlRootElement` 和 `nillable`

> ID：11796699
> 
> 赞同：2
> 
> 时间：2012-08-03T13:27:34.580
> 
> 标签：java, xml, jaxb, jaxb2

有什么方法可以让 JAXB 正确打印`xmlns:xsi`和`xsi:nill`nillable `@XmlRootElement`？

```
public class XmlValueTest {

    public static void main(final String[] args) throws JAXBException {

        final JAXBContext context =
            JAXBContext.newInstance(Wrapper.class, Value.class);

        final Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        marshaller.marshal(Value.newInstance(null), System.out);
        marshaller.marshal(Value.newInstance("null"), System.out);
        marshaller.marshal(Wrapper.newInstance(null), System.out);
        marshaller.marshal(Wrapper.newInstance("null"), System.out);
    }
}

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
class Value {

    public static Value newInstance(final String raw) {
        final Value instance = new Value();
        instance.raw = raw;
        return instance;
    }

    @XmlValue
    private String raw;
}

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
class Wrapper {

    public static Wrapper newInstance(final String raw) {
        final Wrapper wrapper = new Wrapper();
        wrapper.raw = raw;
        return wrapper;
    }

    @XmlElement(nillable = true, required = true)
    private String raw;
} 
```

印刷

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<value/> <!-- is this normal? -->

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<value>null</value>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<wrapper>
    <raw xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</wrapper>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<wrapper>
    <raw>null</raw>
</wrapper> 
```

我只是想知道有没有什么办法可以让第一个`<value/>`武装`xmlns:xsi`起来`xsi:nill`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:21:44.903

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我不相信有办法使用标准的 JAXB API 来做到这一点。下面是一个示例，可以通过利用`@XmlElement(nillable=true)`with`@XmlPath("text()")`来获得所需的行为。

**价值**

```
package forum11796699;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Value {

    private String value;

    @XmlElement(nillable=true)
    @XmlPath("text()")
    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要`jaxb.properties`在与域模型相同的包中调用一个文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11796699;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Value.class);

        Value value = new Value();
        value.setValue(null);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(value, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/> 
```

# javascript - 设置 JavaScript 变量以稍后检查定义

> ID：11796700
> 
> 赞同：0
> 
> 时间：2012-08-03T13:27:36.547
> 
> 标签：javascript, jquery

如何将 var 设置为稍后要检查它是否已定义的内容？

示例：要检查是否未定义 jQuery，您可以这样做：

```
if (typeof(jQuery) === 'undefined') { 
} 
```

但是如果我想做这样的事情怎么办（这显然行不通）：

```
 var toCheckLater = jQuery;   // This fails.

   // Some time later.. 
   if (typeof(toCheckLater) === 'undefined') {
   } 
```

我正在尝试做的是从数组中动态加载脚本，但我想提前设置变量，稍后我将检查其定义。而且我想避免一大堆 ifs 或 switch 语句。这意味着我希望找到一个比以下更优雅的解决方案：

```
switch (scriptName) {
  case 'jQuery': 
    if (typeof(jQuery) === 'undefined') {
    }
    break;
  case 'someOtherScriptName':
  .
  .
  .
} 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:37:17.850

一个函数会做：

```
var toCheckLater = function() { return typeof jQuery == "undefined"; }

// later:
toCheckLater() 
```

您也可以使用结构来实现这些功能：

```
function getChecker(name) {
    return function() {
        return typeof window[name] == "undefined";
        // alternative:
        return name in window; // can be undefined, but the variable exists
    };
}
var toCheckLater = getChecker("jQuery"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:29:53.953

利用

```
if (typeof jQuery === "undefined") 
```

检查未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:30:19.180

我不太明白你想要达到的目标，但我认为你可以做这样的事情

```
var toCheckLater = typeof jQuery; //if, for example, jQuery is defined you'll get "function"

// Some time later.. 
if (toCheckLater === 'undefined') {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:44:09.903

只需这样做：

```
var scriptName = 'jQuery';

if( !window.hasOwnProperty(scriptName) ){
    //jQuery is undefined
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:31:51.753

```
var checker = function(scriptArray) {
  for(var i in scriptArray) 
    this[i] = i?i:loadScript(i); // make your own loadScript function
}

checker({'jquery','anothercode'});

//access checker.jquery / checker.anothercode 
```

你可以使用这样的东西。创建一个加载所有脚本的“类”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T13:32:44.687

你已经使用了`typeof`方法

`typeof(variable_name)`将根据变量为您提供“字符串”、“对象”、“未定义”或“数字”

```
typeof(jQuery) == "未定义"

```

是要走的路。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T13:32:54.937

您的脚本数组：

```
var scripts = ['script1', 'jQuery']; 
```

加载脚本后，您可以使用相同的数组并循环遍历它。

```
for (var i = 0, n = scripts.length; i !== n; i++) {
    if (!window.scripts[i]) {
        // falsy
    }
} 
```

这假定脚本数组引用脚本在加载时将公开的全局变量。

但是，如果我了解您要做什么，更好的方法是在`script`加载适当的元素时注册一个回调。有关一些示例，请参阅这些问题：[(1)](https://stackoverflow.com/questions/4249030/load-javascript-async-then-check-dom-loaded-before-executing-callback) , [(2)](https://stackoverflow.com/questions/3032721/async-load-javascript-files-with-callback)

像这样的代码非常标准：

```
function loadScriptAsync(src, callback) {
    var script = document.createElement('script'),
        place = document.getElementsByTagName('script')[0];

    script.type = "text/javascript";
    script.async = true;
    script.src = src;
    script.onload = script.onreadystatechange = function() {
        callback();
        // clean up for IE and Opera
        script.onload = null;
        script.onreadystatechange = null;
    };

    place.parentNode.insertBefore(script, place);
} 
```

# ruby - 宝石服务器不会提供宝石

> ID：11796703
> 
> 赞同：2
> 
> 时间：2012-08-03T13:27:43.880
> 
> 标签：ruby, rubygems

我正在尝试设置我自己的私有 gem 服务器，该服务器应该为我的 gem 提供服务并显示 rdoc。正如我所读到的，默认的 gem 服务器应该能够做到这一点。而且由于我不希望在 gem 服务器上显示除我自己以外的所有 gem，因此我正在执行以下操作：

```
gem install -i /some/dir --ignore-dependencies my-special.gem
gem server -d /some/dir # -d should let me set my gem dir 
```

但首先，gem 服务器仍然显示所有已安装的系统 gem，而不显示里面有什么`some/dir`。其次，在尝试执行以下操作时：

```
gem install --source http://localhost:8808 my-special.gem 
```

我只收到以下消息：

```
ERROR:  Could not find a valid gem 'my-special' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
        bad response Gateway Time-out 504 (http://localhost:8808/latest_specs.4.8.gz) 
```

即使对于在创建的 gem 服务器页面上显示的 gem，我也能做到这一点

```
http://localhost:8808 
```

我究竟做错了什么？一些博客提到要更新索引，`gem generate_index`但这没有任何意义，因为该工具希望`*.gem`文件位于`/gems`子目录中，但默认情况下它们位于`/cache`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:36:46.003

我很容易解决了这个问题。

我什至不使用专用的 gem 服务器。

我做了以下事情：

1.  在您的 apache Web 服务器上创建一个可服务的目录并在其中创建一个子目录`gems`。例如： `mkdir -p /var/www/rubygems/gems`

2.  将您想要服务的所有 gem 放到创建的`gems`子目录中：`cp /my/gems/dir/*.gem /var/www/rubygems/gems`

3.  生成 gem 索引： `gem generate_index -d /var/www/rubygems`

4.  不要忘记调整访问权限，以便您的 Web 服务器可以读取内容

**信息：**索引必须在包含子目录的目录中生成`gems`，而不是`gems`目录本身！在这种情况下，它是`/var/www/rubygems`.

现在您可以添加`http://<my-gem-server>.domain/rubygems`到您的 gem 资源中

# vb.net - 创建一个涉及多个类或结构的通用函数

> ID：11796707
> 
> 赞同：0
> 
> 时间：2012-08-03T13:27:53.693
> 
> 标签：vb.net

我目前正在研究一个 VB.Net 通用函数，它吃两个结构并返回一个结构，就像这样......

```
Public Function MyFunction (Of ThisType As {Structure, MyInterface}) _
                           (ByVal first_param As ThisType, _
                            ByVal second_param As ThisType, _
                            ByVal third_param As Object, _
                            ByVal fourth_param As Object) As ThisType
   ' Do works
End Function 
```

但该函数将在运行时失败，除非third_parameter 和fourth_parameter 也是实现MyInterface 的结构。有没有办法将第三个和第四个参数限制为这种类型的结构（结构有很多可能性；太多而无法为每种可能性创建重载），以便在编译时出现错误？

（我尝试从基础结构派生所有结构，但我现在知道不能这样做。）我可以在使用它们之前检查类型，但这仍然是运行时检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:30:02.673

将这些参数声明为`MyInterface`而不是`Object`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:44:01.743

您可以为泛型函数提供一种以上的类型。只需添加第二个 Type 参数，然后将其约束为您想要与第一个相同的类型。

```
Public Function MyFunction (Of ThisType As {Structure, MyInterface}, SecondType) _
                           (ByVal first_param As ThisType, _
                            ByVal second_param As ThisType, _
                            ByVal third_param As SecondType, _
                            ByVal fourth_param As SecondType) As ThisType
   ' Do works
End Function 
```

# android - 整理 FragmentActivity 导航栈

> ID：11796710
> 
> 赞同：3
> 
> 时间：2012-08-03T13:28:15.300
> 
> 标签：android, android-intent, android-activity

应用程序（目标 API 级别必须为第 7 级）在作为额外传递的片段密钥`FragmentActivity`处进行分析。`onCreate`

现在需要重新排序到前面已经用给定的片段键创建的活动。

假设`FragmentActivity`具有不同片段键的 `FA1`和`FA2`-`FA3`每个都是具有不同片段的相同活动类实例。

现在在堆栈中`FA1`> `FA2`>`FA3`我想使用意图而不是后退按钮来访问`FA2`，默认情况下会给出：

`FA1`> `FA2`> `FA3`> 新的`FA2`。

我想获得`FA1`> `FA3`>`FA2`因为`FA3`可能有一些待处理的操作， `FA1`>`FA2`没有那么好，但肯定比默认值好。

如果有几个活动，我会使用`FLAG_ACTIVITY_REORDER_TO_FRONT`标志来表示意图，但这不适用于这种情况。

* * *

`FA1, FA2, FA3, etc.`都是同一个类的所有实例`MyFA`，这就是为什么我无法使用意图标志并且 FragmentManager 似乎没有帮助，直到有一个标准的全局片段缓存。

* * *

**里程碑（目前正在工作并有待改进）解决方案**我今天学到的一件事是[活动别名](http://developer.android.com/guide/topics/manifest/activity-alias-element.html)，它允许为同一个活动创建多个别名，并将不同的 Intent 附加项用作 id。现在使用 REORDER_TO_FRONT 标志，它可以按我的意愿工作。

**解决方案反馈**该解决方案没有低级操作，我更喜欢挖掘任务或回栈。现在的缺点是每个这样的活动都需要一个带有硬编码路径的单独别名，我不太喜欢它。

**要求（赏金在这里）**进行了不错的优化的人需要~~150~~ 300 个 cookie。不错 ？任何其他固溶体也受到高度赞赏。

目前我在应用程序清单中有 10 个别名，例如

```
 <activity
        android:name=".activity.FragmentActivity"
        android:configChanges="orientation"
        android:screenOrientation="portrait" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />

            <action android:name="com.company.name.intent.FragmentActivity" />
        </intent-filter>
    </activity>

    <activity-alias
        android:name="com.company.name.intent.FragmentActivity.FragmentedOne"
        android:targetActivity=".activity.FragmentActivity" >
        <intent-filter>
            <action android:name="com.company.name.intent.FragmentActivity.FragmentedOne" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <meta-data
            android:name="fragment_key_extra"
            android:value="FragmentOne" />
    </activity-alias>
    <activity-alias
        android:name="com.company.name.intent.FragmentActivity.FragmentedTwo"
        android:targetActivity=".activity.FragmentActivity" >
        <intent-filter>
            <action android:name="com.company.name.intent.FragmentActivity.FragmentedTwo" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <meta-data
            android:name="fragment_key_extra"
            android:value="FragmentTwo" />
    </activity-alias> 
```

然后活动重新排序

```
Intent intent = new Intent(
"com.company.name.intent.FragmentActivity.FragmentedOne");
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T02:40:20.770

这个答案值 300 块饼干 :-D Mmmmm

1.  **扩展应用程序，以便我们可以创建自己的全局范围的后退堆栈列表。**

    导入android.app.Application；导入android.content.Intent；

    类 MyApp 扩展应用程序 {

    ```
    //This is our very own back stack.
    private ArrayList<Intent> backStack = new ArrayList<Intent>();

    public void reorderBackStack(){
        //Do what you want to the order of your backstack
        //You can read the value of your intent extras from here.
    }

    public void addIntent(Intent i){ // this gets called from our activities onCreate
        backStack.add(i);
    }

    public void goBack(){
        if(backStack.size() >= 2){ // can go back
            backStack.remove(backStack.size() - 1); // drop the last item in stack if you want.  This is how Android does it.  (no forward capability)
            this.startActivity(backStack.get(backStack.size() - 1));
        }
    } 
    ```

    }

2.  **在我们的活动中添加对我们自定义返回堆栈的引用。**

    公共类 MainActivity 扩展 Activity { MyApp myapp;

    ```
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
         myapp = ((MyApp)getApplicationContext());
         myapp.addIntent(this.getIntent()); //add the intent for this instance to backStack.
         myapp.reorderBackStack(); // call this anytime we need to reorder the back stack.
     }

     @Override
     public void onNewIntent(Intent newIntent){
         this.setIntent(newIntent);
         myapp.addIntent(this.getIntent());
     }

     @Override
     public boolean onCreateOptionsMenu(Menu menu) {
         getMenuInflater().inflate(R.menu.activity_main, menu);
         return true;
     }

     @Override
     // We won't be using the back stack we will be using our own list of intents as a back stack so we need to override the back button.
     public boolean onKeyDown(int keyCode, KeyEvent event) {
         if (keyCode == KeyEvent.KEYCODE_BACK) {
             myapp.goBack();
             return true;
         }
         return super.onKeyDown(keyCode, event);
    } 
    ```

    }

3.  **覆盖后退按钮，这样我们就可以使用我们自己的后退堆栈而不是 Android 的。**

**编辑**

我整理了一个概念证明。

*   优点
    *   没有别名
    *   完全动态且可重用
    *   低电平控制
    *   易于使用（扩展 CustomBackStackActivity 而不是 FragmentActivity 或 Activity）
*   缺点
    *   不是开箱即用的解决方案。将需要调整和调试。

[.apk](https://docs.google.com/open?id=0B2BD9i1zpmm5VGNMR0pWaHI5R28)在我的谷歌驱动器上。

完整的[项目文件夹在这里](https://docs.google.com/folder/d/0B2BD9i1zpmm5ODFyZ3FDOTRSUzg/edit)。

压缩[的可下载项目文件夹在这里](https://docs.google.com/open?id=0B2BD9i1zpmm5R0YwcExiSWMxTmM)。

请不要抱怨我的代码。我知道我在应该使用常量的地方使用了字符串，并且我复制了代码而不是分开它，而且我的间距并不完美，而且我使用了过多的循环和对象。我还没有整理保存的InstanceState。同样，这只是一个概念证明。它有效，我认为它可能会帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:08:59.333

您可以考虑使用[FragmentManager](http://developer.android.com/reference/android/app/FragmentManager.html)提供的功能。它具有诸如`popBackStack`.

您还可以使用[FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html)将片段添加到后台堆栈。您可以使用`addToBackStack`来完成此操作。

因此，使用这两个类，您应该能够根据需要重新排序 backstack 中的片段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T13:26:42.980

这是解决方案：

**1.**在您`FragmentActivity`实现`Interface`从 Fragment 到 Activity 的回调。

**2.**当您启动任何片段时，将其与参数或标签一起放入后堆栈`(addToBackStack(String arg0))`，您可以借助该标签弹出该标签。

**3.**当您需要对片段进行重新排序时，请根据要求使用适当的参数调用您实现的接口的方法，然后使用`popBackStack(String arg1, String arg2)`您将其放入后台堆栈的标签获取片段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T10:24:28.323

我已经回答了类似的问题，但解决方案不是最好的，因为 FA1 > FA2 > FA3 会将您带到 FA1 > FA2 而不是 FA1 > FA3 > FA2。

[我的回答是针对问题：如何标记活动](https://stackoverflow.com/a/12215566/833622)

无论如何，我稍微编辑了代码以使用将是字符串的“标签”，但我认为您可以使用使用整数索引的主要解决方案。总而言之，这应该允许您`fallBackToActivity`使用某个 TAG。我不确定每个 Activity 将如何决定它的标签是什么，但同样，在我之前的回答中，这是一个简单的增量整数问题。

```
package sherif.android.stack.overflow;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class SuperActivity extends FragmentActivity {
    private static String EXTRA_INDEX = "SUPER_INDEX";
    private static int RESULT_FALLBACK = 0x123456;
    private String tag; //this is your tag
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(getIntent()!=null) {
            tag = getIntent().getStringExtra(EXTRA_INDEX, "default_tag");
        }
    }
    protected final String getIndex() {
        return tag;
    }
    protected final void fallBackToActivity(String tag) {
        Intent intent = new Intent();
        intent.putExtra(EXTRA_INDEX, tag);
        setResult(RESULT_FALLBACK, intent);
        finish();
    }
    //@Override
    //public void startActivityForResult(Intent intent, int requestCode) {
    //  intent.putExtra(EXTRA_INDEX, getIndex());
    //  super.startActivityForResult(intent, requestCode);
    //}
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_FALLBACK) {
            if(!data.getStringExtra(EXTRA_INDEX, "default_tag").equals(getIndex())) {
                setResult(RESULT_FALLBACK, data);
                finish();
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T05:42:22.977

根据您`activity-alias`用于解决此问题的想法，我编写了一个[Historian 类](https://gist.github.com/3992032)，它将执行以下操作：

*   扫描包中的 Activity 列表以查找特定 Activity 的别名。
*   设置一个查找表，将每个别名映射到一个 Intent。
*   提供一个`startActivity()`和`activityDestroyed()`方法来做一些记账，这样查找表就可以用来根据 Intent 为正在运行的 Activity 动态分配一个别名。

这是有关如何使用它的示例：

*   在 AndroidManifest.xml 中

    ```
    <activity android:name=".MyFragmentActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity-alias android:name=".Alias0" android:targetActivity=".MyFragmentActivity" />
    <activity-alias android:name=".Alias1" android:targetActivity=".MyFragmentActivity" />
    <activity-alias android:name=".Alias2" android:targetActivity=".MyFragmentActivity" />
    <activity-alias android:name=".Alias3" android:targetActivity=".MyFragmentActivity" />
    <activity-alias android:name=".Alias4" android:targetActivity=".MyFragmentActivity" /> 
    ```

*   在您的活动课程中

    ```
    public class MyFragmentActivity extends FragmentActivity
            implements Historian.Host {

        private Historian<MyFragmentActivity> mHistorian;

        // ...

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            mHistorian = new Historian<MyFragmentActivity>(this);

            // ...
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();
            mHistorian.activityDestroyed(this);
        }

        @Override
        public boolean matchIntent(Intent intent0, Intent intent1) {
            if (intent0 == null || intent1 == null) return false;
            final String title0 = intent0.getStringExtra("title");
            final String title1 = intent1.getStringExtra("title");
            return title0.equals(title1);
        }

        // ...

    } 
    ```

而不是像这样开始一个新的活动实例：

```
 Intent intent = new Intent(this, MyFragmentActivity.class);
    intent.putExtra("title", newActivityTitle);
    intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    startActivity(intent); 
```

你来做这件事：

```
 Intent intent = new Intent(this, MyFragmentActivity.class);
    intent.putExtra("title", newActivityTitle);
    intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    mHistorian.startActivity(this, intent); 
```

因此，您仍然需要`activity-alias`手动将一些添加到清单中（用作池）并`matchIntent()`在 Activity 中实现该方法（以帮助检测两个 Intent 是否与您相同），但其余部分由 Historian 类动态处理。

我没有对代码进行详尽的测试，但它似乎在我所做的一些简单测试中运行良好。这个想法实际上与[我](https://stackoverflow.com/a/12164426/1023092)对[另一个问题](https://stackoverflow.com/q/12090256/1023092)的回答非常相似（只需要使用`FLAG_ACTIVITY_CLEAR_TOP`而不是`FLAG_ACTIVITY_REORDER_TO_FRONT`那里），但是使用`activity-alias`内部子类而不是内部子类可以使它更干净:)

# jakarta-ee - Bean 在使用 cobertura / 检测代码进行部署时失去了它的“供应类”

> ID：11796711
> 
> 赞同：0
> 
> 时间：2012-08-03T13:28:27.527
> 
> 标签：jakarta-ee, jboss, javabeans, instrumentation, cobertura

在我的应用程序正常启动下，检查服务器日志显示，当需要部署特定 bean 时，它会显示以下内容：

```
installing bean: ...

with dependencies: 
and demands:
  ...
and supplies:  
  jndi:My_EAR/My_Class/remote   
  Class:my.package.my.class  
  jndi:My_EAR/My_Class/local-my.package.my.class 
```

但是，如果我使用 cobertura 检测的所有类部署同一个 bean，它不再“提供”“类：”条目，这似乎阻止了我在不通过 JNDI 名称显式引用它的情况下注入该类。

这是故意行为吗？有没有办法强制它仍然提供 Class 条目？这是一个大型代码库，有一个频繁使用的类，所以如果我能摆脱它，我宁愿不必更新所有注入引用。

谢谢。

# c# - List中的移除操作

> ID：11796712
> 
> 赞同：2
> 
> 时间：2012-08-03T13:28:35.170
> 
> 标签：c#, string

我有 2 个字符串类型列表：

*   List1 有项目 - item1, item2, item3
*   List2 有项目 - item2, item3

现在我需要比较两个列表并从中删除重复的项目`List1`。修改后`List1`应该只有一项，即“item1”。

foreach 循环可能有效，但我想知道是否有任何内置方法可以做到这一点？

## 编辑

谢谢你们的答案。我只是在想如果我想将错过的项目添加到列表中会怎样。所以刚刚提出了另一个类似的问题。

[在 List<string> 中添加操作](https://stackoverflow.com/questions/11797000/add-operation-in-liststring)

蒂亚！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T13:31:17.043

你可以使用：

```
list1.RemoveAll(item => list2.Contains(item)); 
```

（正如 Marc 所说，这是 O(N*M) - 如果您希望列表非常短，那很好，但如果它们中的任何一个变得很大，那就太糟糕了。）

或者，如果您不介意它是一个*新*列表（而不是修改现有列表），您可以使用：

```
list1 = list1.Except(list2).ToList(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T13:31:22.317

我怀疑在这里使用的最佳方法是首先将第二个列表放入哈希中，即

```
var hash = new HashSet<TheType>(List2);
List1.RemoveAll(hash.Contains); 
```

这避免了 O(n*m) 的性能，而不是 O(n+m)

例子：

```
List<int> List1 = new List<int> {1,2,3};
List<int> List2 = new List<int> {2,3};

var hash = new HashSet<int>(List2);
List1.RemoveAll(hash.Contains);
// now List1 just has {1} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T13:29:35.513

利用

```
List1 = List1.Except(List2).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:32:07.387

我建议使用：

```
List1 = List1.Except(List2).ToList(); 
```

# javascript - getElementById().value 不设置隐藏输入

> ID：11796713
> 
> 赞同：1
> 
> 时间：2012-08-03T13:28:35.547
> 
> 标签：javascript, jsf, hiddenfield

我正面临一个有趣的情况。我正在尝试使用 javaScript 代码将 myBean 中的 myValue 设置为隐藏输入，但它不起作用。我调试了一下，发现它从 myBean 调用了 getMyValue() 方法，然后什么也没做。它不会给出错误或警告，也不会设置值。请提供任何帮助。

提前致谢。代码如下：

```
<h:body>

<script type="text/javascript">
   function setHiddenValue(){
   document.getElementById('myForm:hidden2').value = 3.0;
  }
</script>
<h:form id="myForm">            
   <h:inputHidden id="hidden2" value="#{myBean.myValue}" />
   <h:commandButton value="submit" action="..." onclick="setHiddenValue();" />
</h:form>

</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:43:05.313

按钮不是提交表单而不是执行 onclick 操作吗？请尝试相同但使用

```
<button onclick="setHiddenValue();">submit</button> 
```

代替

```
<h:commandButton value="submit" action="..." onclick="setHiddenValue();" /> 
```

或者使用：

```
<h:commandButton value="submit" action="..." onclick="setHiddenValue(); return false;" /> 
```

# c# - C# ASP MVC 中的 JavaScript 问题

> ID：11796717
> 
> 赞同：0
> 
> 时间：2012-08-03T13:28:41.503
> 
> 标签：c#, jquery, asp.net-mvc, google-visualization, castle

我们有一个 Web 项目，它从 MS SQL 数据库中获取数据，并使用 Google Visualization API 在 Web 视图上显示这些图表。

最近我们添加了城堡温莎，因此我们可以使用 XML 文件将应用程序配置给不同的用户。在我们添加它之前，视图运行良好，使用了该查询所需的内置参数。出于某种原因，当我们从 XML 文件中发送参数时（使用断点运行显示参数正在传递给页面的主控制器操作），没有返回数据。这是给你的一些代码。

JavaScript

```
<script type="text/javascript">
var csvDataUrl = '@Url.Action("TradeValuesDataCsv", "Dashboard")';
var jsonDataUrl = '@Url.Action("TradeValuesDataJson", "Dashboard")';
 google.load("visualization", "1", { packages: ['table', 'corechart', 'gauge'] });
 google.setOnLoadCallback(drawCharts);
 drawCharts();

 $("body").on({
     ajaxStart: function () {
         $(this).addClass("loading");
     },
     ajaxStop: function () {
         $(this).removeClass("loading");
     }
 });

function drawCharts() {
    var queryString = 'platform=' + $('#PlatformDropDownList').val();
    queryString += '&startDate=' + $('#startDatePicker').val();
    queryString += '&endDate=' + $('#endDatePicker').val();
    queryString += '&model=' + $('#ModelDropDownList').val();
    queryString += '&eventType=' + '@Model.EventType';
    queryString += '&parameterName=' + '@Model.ParameterName';
        $.ajax({
            type: "POST",
            url: jsonDataUrl,
            data: queryString,
            statusCode: {
                200: function (r) {
                    drawToolbar(queryString);
                    drawTable(r);
                    drawChart(r);
                },
                400: function (r) {

                },
                500: function (r) {

                }
            }
        });
} 
```

此页面的主控制器方法：

```
 public ActionResult ActionResultName(EventTypeParameterNameEditModel model)
    {
        var viewModel = new EventTypeParameterNameViewModel(_queryMenuSpecific);
        viewModel.EventType = model.EventType;
        viewModel.ParameterName = model.ParameterName;
        PopulateFilters(viewModel);
        return this.View(viewModel);
    } 
```

检索 JSON 数据控制器方法：

```
 public ActionResult ActionResultNameJson(EventTypeParameterNameEditModel filters)
    {
        List<CustomDataType> results = this.GetTradeValues(filters);
        return this.Json(results, JsonRequestBehavior.AllowGet);
    } 
```

**编辑**我设法找到了一个解决方案，即使它是一个相当混乱的解决方案。我在页面中内置了一些过滤器，允许用户按设备和操作系统进行过滤，这些过滤器在页面加载时填充了“未定义”。我在第一次使用 NProf Running 时没有发现这种情况，但是在我们将输入配置为来自 XML 之前加载页面时并没有发生这种情况。我会将其添加为答案并接受并关闭问题。感谢大家尝试提供帮助。开始真正喜欢这个社区。作为研究生开发人员寻求帮助的理想场所。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:29:58.243

是的。我不是 Razor 语法专家，但我认为这些属性引用可能是您的问题。我怀疑 razor 会倾向于避免在 JS 上下文中具有属性的语句中使用的字符串中声明自己。或者您可以尝试实现可能会起作用的 getter 函数。否则一个 @ 和一个 . 如果不是一个明显的方法调用，在字符串中很容易导致混淆与电子邮件地址：

```
queryString += '&eventType=' + '@Model.EventType';
queryString += '&parameterName=' + '@Model.ParameterName'; 
```

作为任何服务器到客户端场景的一般规则，我的建议是将 JavaScript 直接从后端限制为 JSON 对象。这样一来，您就可以更精细地控制 http 请求墙两侧发生的事情，如果短期需要快速修改，您的客户端开发人员不必弄清楚东西是在哪里构建的。一般来说，如果可以避免的话，不要用其他代码构建行为代码。

起初我无法说服我的 .net MVC 老板，但几个月后他慢慢接受了这个想法。

We also store a URL base path along with some other context-shifting params in a standard JSON object that loads on every page so the JS devs can add these things linked JS files rather than have to work with JS in the HTML (I don't recall why but document.location wasn't always going to work).

Lastly, try to keep the JS out of the HTML. Link it. It seems like a pain from a procedural POV but trust me. It makes life much easier when you are juggling 3 major concerns as one ball each rather than all in the same jumbled HTML/template mess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:36:07.760

It turned out that the problem was not in my Javascript. I have some filters in there that allow the user to filter the results my model and operating system and date and what not. These were being automatically populated on page load with 'undefined' which is not an option in the database. I added something to catch that in the call to the query and it seemed to solve the problem.

# jquery - SoundCloud：播放按钮

> ID：11796719
> 
> 赞同：0
> 
> 时间：2012-08-03T13:28:58.023
> 
> 标签：jquery, soundcloud

我只想要一个播放和停止按钮来替换 SoundCloud 中的原始按钮。我遵循了“Widget API”：http: [//developers.soundcloud.com/docs/api/html5-widget#](http://developers.soundcloud.com/docs/api/html5-widget#)
但它不起作用。我想我不太了解 SoundCloud 的说明。

我在这里播放：http: [//jsfiddle.net/wBTCh/1/](http://jsfiddle.net/wBTCh/1/)

HTML：

```
 <script type="text/javascript" src="http://w.soundcloud.com/player/api.js"></script>

    <iframe id="so" width="100%" height="160" scrolling="no" src="http://w.soundcloud.com/player/?url=http://api.soundcloud.com/users/1539950/favorites" frameborder="0" ></iframe>

    <div id="playSound"></div>
    <div id="stopSound"></div> 
```

CSS：

```
#so{
    position: absolute;
    top: 20px;
    left: 20px;
}

#playSound{
    position: absolute;
    top: 200px;
    left: 20px;
    width: 20px;
    height: 20px;
    background-color: blue;
}

#stopSound{
    position: absolute;
    top: 200px;
    left: 50px;
    width: 20px;
    height: 20px;
    background-color: green;
} 
```

JAVASCRIPT/JQUERY：

```
$(function(){

    var iframeElement   = document.querySelector('iframe');
    var iframeElementID = iframeElement.id;
    var widget1         = SC.Widget("#so");
    var widget2         = SC.Widget("#so");
    // widget1 === widget2

    $("#playSound").click(function() {
        $("#so").play()
    });

    $("#stopSound").click(function() {
        $("#so").pause()
    });

}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:13:46.087

好的，这对我有用：

JS：

```
var widget1 = SC.Widget("so");

$(function(){
    $("#playSound").click(function() {
        widget1.play();

    });

    $("#stopSound").click(function() {
        widget1.pause()
    });
}) 
```

html:

```
<script type="text/javascript" src="http://w.soundcloud.com/player/api.js"></script>

<iframe id="so" width="100%" height="160" scrolling="no" src="http://w.soundcloud.com/player/?url=http://api.soundcloud.com/users/1539950/favorites" frameborder="0" ></iframe>

<div id="playSound"></div>
<div id="stopSound"></div> 
```

它现在可以正确控制 iframe 播放器。

这是来自 JSBin 的完整工作示例：

```
<!DOCTYPE HTML>
 <head>

 <meta charset="UTF-8">
  <title></title>

   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<!-- SoundCloud-->
<script type="text/javascript" src="http://w.soundcloud.com/player/api.js"></script>
    <script type="text/javascript">

    $(function(){
      var widget1 = SC.Widget("so");

        $("#playSound").click(function() {
          widget1.play();

      });  
      $("#stopSound").click(function() {
          widget1.pause();
      });      
    });
  </script> 

  <style type="text/css">
  <!--

  #so{
      position: absolute;
      top: 20px;
      left: 20px;
  }

  #playSound{
      position: absolute;
      top: 200px;
      left: 20px;
      width: 20px;
      height: 20px;
      background-color: blue;
  }

  #stopSound{
      position: absolute;
      top: 200px;
      left: 50px;
      width: 20px;
      height: 20px;
      background-color: green;
  }
  ​

  -->
  </style>
 </head>

<body>

<iframe id="so" width="100%" height="160" scrolling="no" src="http://w.soundcloud.com/player/?url=http://api.soundcloud.com/users/1539950/favorites" frameborder="0" ></iframe>

<div id="playSound"></div>
<div id="stopSound"></div>

</body>
</html> 
```

# sql - 在选择中按错误分组

> ID：11796724
> 
> 赞同：0
> 
> 时间：2012-08-03T13:29:13.927
> 
> 标签：sql, group-by

我有个问题。

这是查询：

```
SELECT a.naam as "Artiest", SUM(o.numberOfOrders) as "Aantal singles",   
(SUM(o.numberOfOrders) * s.price) * 0.35 as "Winst  

FROM orders o
JOIN singles s ON s.singleid = b.singleid
JOIN artist a ON a.artistid = s.artistid
WHERE b.date= TO_DATE('15/MAY/2012','dd/mon/yyyy')
GROUP BY a.name 
```

当我执行此查询时，我收到错误：

> “不是 GROUP BY 表达式”

我已经尝试将**(SUM(o.numberOfOrders) * s.price) * 0.35**也放入 group by ，
但随后出现错误：

> “这里不允许使用群组功能”

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:31:16.077

您想将其替换为以下内容之一：

```
sum(o.numberOfOrders*s.price)*0.35 
```

或者：

```
sum(o.numberOfOrdrs)*avg(s.price)*0.35 
```

或者可能）：

```
sum(o.numberOfOrdrs)*max(s.price)*0.35 
```

换句话说，s.price 不在 group by

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:35:16.530

您缺少双引号。尝试这个：

```
SELECT 
    a.naam as "Artiest", 
    SUM(o.numberOfOrders) as "Aantal singles",   
    (SUM(o.numberOfOrders) * s.price) * 0.35 as "Winst"
FROM 
    orders o
        JOIN singles s ON s.singleid = b.singleid
        JOIN artist a ON a.artistid = s.artistid
WHERE 
    b.date= TO_DATE('15/MAY/2012','dd/mon/yyyy')
GROUP BY a.name 
```

# qt - 无法将 QHash 序列化为 DataStream

> ID：11796728
> 
> 赞同：0
> 
> 时间：2012-08-03T13:29:37.247
> 
> 标签：qt, qhash

在学习 QHash 并将 QHash 序列化为 DataStream 时，我收到以下代码错误。

```
typedef QHash <quint32,QString> hashtype1;
typedef QHash <QLocale::Language,hashtype1> hashtype;

hashtype1 hash;
hash.insert(1, "Key1");
hash.insert(2, "Key2");

hashtype hash1;
hash1.insert(QLocale::English, hash);
hash1.insert(QLocale::French, hash);

QByteArray ba;
QByteArray ba1;
QDataStream ds(&ba, QIODevice::ReadWrite);
QDataStream ds1(&ba1, QIODevice::ReadWrite);
ds << hash;
ds1 << hash1;

qDebug() << ds.device()->readAll();
ds.device()->reset();
ds1.device()->reset();

hashtype1 hashcopy;
ds >> hashcopy;

hashtype hash1copy;
ds1 >> hash1copy; 
```

最后一条语句给出一个错误，说 /usr/include/qt4/QtCore/qdatastream.h:362: error: no match for 'operator>>' in 'in >> k'</p>

我无法纠正这个..我做错了吗？我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:40:25.507

问题是`QDataStream`没有`QLocale::Language`. 当流式传输时，这是可行的，因为它会自动转换为整数类型。它不能为流式输入执行此操作。因此，您需要更改您`QHash`的密钥以使用不同的模板参数或编写流式操作符`QLocale::Language`（这应该是微不足道的，您只需要将其转换为 int 或从 int 转换）。

# c# - 将 XML 数据读入 C# 应用程序

> ID：11796730
> 
> 赞同：1
> 
> 时间：2012-08-03T13:29:46.277
> 
> 标签：c#, xml, xml-serialization

我需要创建一个看起来像这样的 xml 文件。

```
<Event id="Date - Event Name - Event Type">      
    <DogNumber id="dog id number">           
        <dogName id-"dog id number">dog name</dogName>               
        <dogBreed>dog breed</dogBreed>      
    </DogNumber>
</Event> 
```

然后它会再次重复另一个事件，除了元素的不同值和属性。

```
<Event id="Date - Event Name - Event Type">      
    <DogNumber id="dog id number">           
        <dogName id-"dog id number">dog name</dogName>               
        <dogBreed>dog breed</dogBreed>      
    </DogNumber>
</Event> 
```

我是使用 C# 创建 XML 文件的新手，并且无法正确地将属性添加到元素并让父节点和子节点与上面显示的相同。我需要能够从我的 C# 应用程序中查看这个文件，并且能够根据特定事件读取上面列出的所有值，然后是每个事件中的特定狗。选择哪个事件和选择哪只狗的标准可能取决于用户在 ComboBox 中的输入。我的计划是使用该`getElementById`方法。但是，我已经看到了很多不同的方法来做到这一点，以至于我很难决定什么是最好和最有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:47:40.710

我认为读取/写入该 xml 文件的最简单方法是使用 XMLSerializer。这种方法还使您能够轻松绑定到数据（如果您使用 WPF 进行 UI）

创建可序列化的类：

```
 public class Event
    {
        [XmlAttribute]
        public string id { get; set; }

        [XmlElement]
        public DogNumber DogNumber { get; set; }
    }

    public class DogNumber
    {
        [XmlAttribute]
        public string id { get; set; }

        [XmlElement]
        public dogName dogName { get; set; }

        [XmlElement]
        public string dogBreed { get; set; }
    }

    public class dogName
    {
        [XmlAttribute]
        public string id { get; set; }

        [XmlTextAttribute]
        public string value { get; set;  }
    } 
```

然后使用 XmlSerializer 反序列化（使用文件的示例）：

```
 Stream input = File.OpenRead("C:\\test.xml");
        XmlSerializer serialier = new XmlSerializer(typeof(Event));
        Event newevent = serialier.Deserialize(input) as Event;
        input.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:44:56.093

检查 LINQ to XML。

[这是一个非常快速的概述](http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx)

[微软](http://msdn.microsoft.com/en-us/library/bb387098)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:43:21.163

在 C# 中创建或读取 XML，您想使用[XDocument 类](http://msdn.microsoft.com/fr-fr/library/system.xml.linq.xdocument.aspx)（您在此 msdn 网站末尾有使用示例）

```
XDocument yourXml = null; 
```

治疗后（添加节点等...），如果需要，您希望将 xml 保存在 file.xml 中

```
// verify if file not existing
if (!System.IO.File.Exists(@"yourName.xml"))
{
    // if file not exist, create xml file.
    FileStream fs = File.Create(@"yourName.xml");
    fs.Close();
}

// save your xml in xml file
yourXml.Save(@"yourName.xml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:40:25.477

当涉及到 XML 时，我正在寻找满足我需求的最佳方法是使用类进行序列化/反序列化。

例如，采用以下代码：

```
/// <summary>
/// Details on the destination of the shipment.
/// </summary>
[XmlRoot("destination")]
public class Destination
{
    List<Recipient> recipient { get; set; }
}

/// <summary>
/// Recipient details.
/// </summary>
[XmlRoot("recipient")]
public class Recipient
{

    /// <summary>
    /// Client Id of the recipient; only used if selected as the sort criterion.
    /// </summary>
    /// <remarks>Truncated after 30 characters.</remarks>        
    [XmlElement("client-id")]
    public string ClientID { get; set; } 

    /// <summary>
    /// Name of the individual receiving the shipment.
    /// </summary>
    /// <remarks>Truncated after 44 characters.</remarks>
    [XmlElement("contact-name")]
    public string ContactName { get; set; } 

    /// <summary>
    /// Name of the company.
    /// </summary>
    /// <remarks>Truncated after 44 characters.</remarks>
    [XmlElement("company")]
    public string Company { get; set; }

    ... 
```

这将允许我将对象序列化为如下所示的 XML：

```
<destination>
     <recipient>
         <client-id></client-id>
         <contact-name></contact-name>
         <company></company>
         ... 
```

我可以通过使用 XmlRoot 或 XmlElement 修饰符来控制如何创建 XML。在您的情况下，您可以使用`[XmlAttribute("attributeName")]`来指定属性。

您可以在此处阅读有关各种 XML 修饰符的更多信息：http: [//msdn.microsoft.com/en-us/library/e123c76w](http://msdn.microsoft.com/en-us/library/e123c76w)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:44:37.360

您可以尝试使用 XDocument，例如：

```
XDocument doc = new XDocument(new XElement("Event", new XAttribute("Id", youEventString),
    new XElement("DogNumber", new XAttribute("id", dogId),
    new XElement("dogName", new XAttribute("id", dogNumber), dogNname),
    new XElement("dogBreed", dogBreed)  
    )));
doc.Save(filename); 
```

您可以在其中用适当的字符串替换 youEventString、dogId、dogNumber、dogName、dogBreed。还提供要保存文件的文件名。

祝你好运

# java - JAX-RS @Path 可以指定长度要求吗？

> ID：11796733
> 
> 赞同：3
> 
> 时间：2012-08-03T13:29:51.783
> 
> 标签：java, regex, jax-rs

我一直在使用`@Path("{id: [a-zA-Z0-9-]*}")`URL 来捕获预期的标识符。

工作正常，但我想确保这些标识符的长度在 1-64 个字符之间。

根据 Java Reg Exp 文档，类似的东西`@Path("{id: [a-zA-Z0-9-]{1,64}}")`应该可以工作，但我遇到了`HTTP 405`.

我在这里缺少什么魔法？我真的很想应用简单的请求验证。

更新：删除结束连字符会使事情变得生动起来。请注意确定为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:35:40.600

最终找到了解决方案：

```
@Path("{id: [a-zA-Z0-9\\-]{1,64}}") 
```

结束连字符需要转义。

# macos - 将 PackageMaker 命令行构建安装程序移植到 pkgbuild

> ID：11796740
> 
> 赞同：14
> 
> 时间：2012-08-03T13:30:04.203
> 
> 标签：macos, installation, packagemaker, pkgbuild

我一直在尝试将 Mac [PackageMaker](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/PackageMakerUserGuide/Introduction/Introduction.html)命令行构建移植到 pkgbuild 和 productbuild 但我被卡住了。[不幸的是，除了这篇StackOverflow 帖子](https://stackoverflow.com/a/11487658/330110)以及[pkgbuild](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html)和[productbuild](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/productbuild.1.html)手册页 之外，我还没有找到任何记录这些新程序如何工作的任何内容。

这是我的问题。我创建了一个根安装目录，其中包含以下文件：

```
/some_path/Applications
                       /MyProgram.app
          /Library
                  /Frameworks
                             /MyFramework.framework
                                                   /[library files...] 
```

下面的命令行调用非常适合 PackageMaker。它创建了一个安装程序，安装了上述所有文件。

```
$ /Developer/usr/bin/packagemaker \
    --title "My Program" \
    --root /some_path \
    --version 1.0.0 \
    --filter "\.DS_Store" \
    --resources ./resources/ \
    --scripts ./scripts/ \
    --root-volume-only \
    --domain system \
    --verbose \
    --no-relocate \
    --target 10.5 \
    --id com.my_company.pkg \
    --out MyProgram.pkg 
```

现在我正在尝试用 pkgbuild 写这个并且遇到了一个主要问题。我使用以下调用：

```
$ pkgbuild \
    --root /some_path \
    --version 1.0.0 \
    --install-location "/" \
    --scripts "./scripts/" \
    --identifier "com.my_company.pkg" \
    MyProgram.pkg 
```

此命令构建一个安装程序，将 MyProgram.framework 目录复制到 /Library/Frameworks。但是，它不会将 MyProgram.app 文件安装到 /Applications 目录中。当我查看安装程序日志时，我看到以下消息：

> Applications/MyProgram.app 重定位到 /some_path/Applications/MyProgram.app

谁能解释一下为什么没有像 PackageMaker 那样将 MyProgram.app 文件添加到 /Applications 目录中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:00:42.803

不幸的是，这个问题的答案并不是我想要的。我不知道如何从流程中消除 PackageMaker。但是，有一个解决方案包括 pkgutil 和 PackageMaker，可以完全在命令行上创建带有自定义欢迎消息、许可证和背景图像的安装程序。*不需要*PackageMaker GUI 。步骤如下：

1.  在特殊目录结构上运行[packagemaker 命令行可执行文件。](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/packagemaker.1.html)此目录结构反映了 Mac 文件系统。在旧的但可靠的[“PackageMaker How-to”教程](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html)中阅读更多信息。
2.  运行 pkgutil ( `pkgutil --expand`) 以提取包内容
3.  查看内容并确定要更改的内容。一些选项是欢迎信息、许可证和背景图像。
4.  添加命令以通过命令行更改这些文件。查看[“自动化 Apple 的 PackageMaker”教程](http://www.codeography.com/2009/09/04/automating-apple-s-packagemaker.html)以获取更多信息。最简单的方法就是运行这样的东西`echo '<background file="your_background.png">'`。
5.  运行 pkgutil ( `pkgutil --flatten`) 以重建包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:56:36.053

首先，您确定需要安装程序吗？您可以将框架放入应用程序中。至少可以说，安装程序和 pkgbuild 有点不稳定。

现在到手头的问题：重定位与用户可以将应用程序从 /Applications 移动到 /WorkApplications /PrivateApplications 的事实有关。在您的情况下，安装程序可能会在构建文件夹中找到您的应用程序并将其安装在这个文件夹上。

我认为安装程序使用 Application Bundle Identifier 和 Spotlight 进行重定位，因此为了进行测试，您可以将构建文件夹添加到 Spotlight 忽略列表中。

您可以在[组件属性列表](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html) `BundleIsRelocatable`中定义。如果你真的必须安装一个全局框架，这是一个你想将 BundleIsRelocatable 设置为 false 的包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T16:41:15.697

[您引用的问题](https://stackoverflow.com/q/11487596/120292)几乎包含完全消除 Package Maker 所需的一切。我添加的一件事是`sed`在`productbuild --synthesize ...`调用之后将行插入到分发文件中。例如，以下是我在构建组件包后使用的一些终端命令：

```
productbuild --synthesize --package "components/SubPackage.pkg" "distribution.xml"
sed -i "" \
-e '$ i\
\    <title>Installer Title</title>' \
-e '$ i\
\    <background file="background.png" alignment="left" scaling="proportional" />' \
-e '$ i\
\    <welcome file="welcome.rtf" />' \
"distribution.xml"
productbuild --distribution "distribution.xml" --resources "resources/" --package-path "components/" "Installer.pkg" 
```

这避免了必须使用`pkgutil --expand`和`pkgutil --flatten`修改安装程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-24T08:41:05.310

创建组件 plist 文件，该文件具有可重定位属性的值。

```
pkgbuild --analyze --root "$dst_src_root" "$installer_root/Components.plist" 
```

编辑组件 plist 并将“BundleIsRelocatable”设置为 false。这是在我的项目中完成的一次，因为安装程序内容不会改变（一个应用程序和一个插件）。我每次都重用相同的组件 plist 来创建内容包。

```
sudo pkgbuild --root "$dst_src_root" --component-plist "$installer_root/Components.plist" --identifier "com.company.app" --version "1.0" --scripts "$dst_scpt_root" "$dst_pkg_root/InstallPackage/cisContents.pkg" 
```

然后使用productbuild，我们可以创建最终包

# emacs - 带有Qt4的emacs cedet语义如何配置

> ID：11796744
> 
> 赞同：4
> 
> 时间：2012-08-03T13:30:15.233
> 
> 标签：emacs, emacs23, cedet

我在 X86_64-pc-gnu-linux (ubuntu 10.04) 上使用 emacs 23.1.1 并按照著名的链接[http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)将所有配置添加到 .emacs。但它甚至不能完成基本的工作。我的设置或配置一定有问题。

如果我试图让它显示成员函数，它就无法找到。[自动完成使用clang作为解析器。那么解析器语义使用什么？]

```
;; Load CEDET
(load-file "~/backup/cedet-trunk/common/cedet.el")
(global-ede-mode 1)                      
;(semantic-load-enable-code-helpers)       
(semantic-load-enable-excessive-code-helpers)
;(semantic-load-enable-semantic-debugging-helpers)
(global-srecode-minor-mode 1)            
(global-semantic-tag-folding-mode 1)
(require 'semantic-tag-folding)
(global-semantic-idle-scheduler-mode 1)
(global-semantic-idle-completions-mode 1)
(global-semantic-idle-summary-mode 1)
(global-semantic-idle-completions-mode)
(require 'semantic-ia)
(require 'eassist)
(require 'semantic-gcc)
(require 'semanticdb-global)
(semanticdb-enable-gnu-global-databases 'c-mode)
(semanticdb-enable-gnu-global-databases 'c++-mode)
(setq qt4-base-dir "/usr/include/qt4")
(setq qt4-gui-dir (concat qt4-base-dir "/QtGui"))
(setq qt4-core-dir (concat qt4-base-dir "/QtCore"))
(semantic-add-system-include qt4-base-dir 'c++-mode)
(semantic-add-system-include qt4-gui-dir 'c++-mode)
(semantic-add-system-include qt4-core-dir 'c++-mode)
(add-to-list 'auto-mode-alist (cons qt4-base-dir 'c++-mode))
(add-to-list 'semantic-lex-c-preprocessor-symbol-file (concat qt4-base-dir 
"/Qt/qconfig.h"))
(add-to-list 'semantic-lex-c-preprocessor-symbol-file (concat qt4-base-dir "/Qt/qconfig-large.h"))
(add-to-list 'semantic-lex-c-preprocessor-symbol-file (concat qt4-base-dir "/Qt/qglobal.h"))

(defun my-cedet-hook ()
 (local-set-key [(control return)] 'semantic-ia-complete-symbol-menu)
 (local-set-key "\C-c?" 'semantic-ia-complete-symbol)
 (local-set-key "\C-c>" 'semantic-complete-analyze-inline)
 (local-set-key "\C-c=" 'semantic-decoration-include-visit)
 (local-set-key "\C-cj" 'semantic-ia-fast-jump)
 (local-set-key "\C-cb" 'semantic-mrub-switch-tags)
 (local-set-key "\C-cd" 'semantic-ia-show-doc)
 (local-set-key "\C-cs" 'semantic-ia-show-summary)
 (local-set-key "\C-cp" 'semantic-analyze-proto-impl-toggle)
 (local-set-key "\C-cr" 'semantic-symref)
 (local-set-key "\C-c\-" 'senator-fold-tag)
 (local-set-key "\C-c\+" 'senator-unfold-tag)
 )

(add-hook 'c-mode-common-hook 'my-cedet-hook)
(add-hook 'lisp-mode-hook 'my-cedet-hook)
(add-hook 'emacs-lisp-mode-hook 'my-cedet-hook)

(ede-cpp-root-project "Test"
        :name "Test Project"
        :file "~/project/shared/test-qt-semantic.cpp"
        :include-path '("/"
               )
        :system-include-path '("/usr/include/qt4"
                   "/usr/include/qt4/Qt"
                   "/usr/include/qt4/QtGui"
                   "/usr/include/qt4/QtCore"
                   )) 
```

这是源文件：

```
#include <QApplication>
#include <QPushButton>
#include <QString>
int main (int argc, char ** argv)
{
QApplication app (argc, argv);
QPushButton hello ("Hello, World!");
hello.resize (100, 30);
hello.show ();
QString id("hi");
return app.exec ();
} 
```

> 找不到“class QPushButton hello ()”的数据类型。
> 声明的类型是："class QPushButton {}"
> 原始数据类型是：("QPushButton" type (:type "class") nil nil)
> 
> Semantic 在其任何全局表中都找不到此数据类型。
> 
> 语义通过本地范围或全局类型缓存定位数据类型。
> 
> 本地范围信息：
> * 针对范围的标记类约束：（类型）
> * 当前范围内没有已知的父级。
> * 目前范围内没有已知符号。
> * 没有本地声明的已知符号。
> Semantic 为每个缓冲区创建并维护一个类型缓存。
> 如果类型是全局类型，那么它应该出现在它们的 typecache 中。
> 要检查类型缓存，请键入：
> 
> Mx semanticdb-typecache-dump RET [做它]
> 
> 当前类型缓存统计信息：
> 此文件中的 0 种全局
> 类型 0 种来自包含的类型。
> 
> 如果数据类型不在类型缓存中，则您的包含路径可能不正确。
> 
> 包括路径摘要：
> 
> 此文件的项目包含搜索由 EDE 对象处理：
> 缓冲区目标：#ede-cpp-root-target /home/mike/project/shared/>
> 缓冲区项目：#ede-cpp-root-project 测试>
> 备份定位器：# ede-locate-base Loc>
> 
> 系统包含路径为：
> 
> ```
> /usr/include/qt4/
> /usr/include/qt4/QtGui/ 
> /usr/include/qt4/QtCore/
> /usr/include/c++/4.4/
> /usr/include/c++/4.4/x86_64-linux-gnu/
> /usr/include/c++/4.4/backward/
> /usr/local/include/
> /usr/lib/gcc/x86_64-linux-gnu/4.4.3/include/
> /usr/lib/gcc/x86_64-linux-gnu/4.4.3/include-fixed/
> /usr/include/ 
> ```
> 
> 包括摘要：/home/mike/project/shared/test-qt-semantic.cpp
> 
> test-qt-semantic.cpp 包含 3 个包含。
> 未知包含： 0 未解析包含
> ：0
> 已解析包含：3
> 无未知包含。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:54:28.957

好吧，它在底部说：

> 看来，这种方法不适用于新的 CEDET - 我正在修复

然后在评论中他说：

> 看来，CEDET 没有正确编译。请从 CVS 获取 CEDET 并按照说明进行编译

所以我认为你应该再次编译并构建它，然后它应该可以工作 - 但我还没有尝试过。我只是建议它，因为那是文章所说的。

# python - 不使用任何库模块或虚拟变量的 Python 字符串/列表反转

> ID：11796749
> 
> 赞同：-4
> 
> 时间：2012-08-03T13:30:26.577
> 
> 标签：python, string, list

我想知道如何在不使用任何库模块甚至虚拟变量或扩展切片表示法的情况下反转字符串，例如`s[::-1]`

例如我有一个字符串 `>>>['f','a','l','u','b']`

输出应该是`>>>['b','u','l','a','f']`

我已经搜索了这两个链接，但他们没有提供这个解决方案

[Python中的字符串反转](https://stackoverflow.com/questions/990934/string-reversal-in-python)

[在 Python 中反转字符串](https://stackoverflow.com/questions/931092/reverse-a-string-in-python/931095#931095)

[Python使用递归反转字符串](https://stackoverflow.com/questions/5532902/python-reversing-a-string-using-recursion)

这些链接没有提供答案。我知道字符串是不可变的，这正是我在列表中使用字符串字符的原因，而且这里几乎每个人都使用内置函数（我已经知道）解决了它。仍然没有具体的答案

这个问题是在一次采访中问我的。而且我认为鼓励新来者而不是谴责和否决他们的问题更好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:34:01.283

正如@Chris 在评论中提到的，

```
seq = ['f','a','l','u','b'] # this is a list not a string 
```

因此您可以轻松地就地反转列表

```
seq.reverse() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:32:37.977

```
s = 'falub'
s = ''.join(reversed(s)) 
```

或者

```
list(reversed(s)) 
```

如果您想将其保留为列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:33:34.200

您可以在没有切片符号的情况下使用它来反转，无需调用`list()`

```
s = "hello world"
s_reversed = ''.join(reversed(s))

// output
'dlrow olleh' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:37:10.987

你可能会做一些疯狂的按位运算，但这不是我的强项。因为我不会考虑内置函数“库模块”，所以我认为你可以这样做：

```
my_str = "".join(reversed(my_str)) 
```

但你真的永远不想这样做。

ETA：实际上，经过研究，看起来这个问题的“疯狂按位”解决方案实际上要复杂得多，可能需要库模块。

# bash - [] 在 bash 中做了什么？

> ID：11796751
> 
> 赞同：12
> 
> 时间：2012-08-03T13:30:34.110
> 
> 标签：bash

> **可能重复：**
> [bash：双括号或单括号、括号、花括号](https://stackoverflow.com/questions/2188199/bash-double-or-single-bracket-parentheses-curly-braces)

查看`rc.d`archlinux中的cron脚本：

```
#!/bin/bash
. /etc/rc.conf
. /etc/rc.d/functions

name=crond
. /etc/conf.d/crond
PID=$(pidof -o %PPID /usr/sbin/crond)

case "$1" in
start)
    stat_busy "Starting $name daemon"
    [[ -z "$PID" ]] && /usr/sbin/crond $CRONDARGS &>/dev/null \
    && { add_daemon $name; stat_done; } \
    || { stat_fail; exit 1; }
    ;; 
```

虽然我可以弄清楚大部分语法，但这到底是做什么的：

```
 [[ -z "$PID" ]] 
```

我看到也写成：

```
 [ -z "$PID" ] 
```

在参考中，我发现它`[]`在 if 语句中使用，但我在这里看不到。任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T13:34:36.777

左括号 ([) 是 test 命令的别名，它执行所有测试并返回 0 表示真或其他值表示假。“if”只对测试命令的返回值作出反应。右括号告诉 test 表达式在哪里结束。双括号 ([[) 是内置的 bash，可以替换外部调用来测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T13:37:30.910

单括号 emulate`/usr/bin/test`是一个旧的 Unix 实用程序。他们做你要求的，但不是你想要的。双括号是 Bash 特有的改进。

[http://tldp.org/LDP/abs/html/testconstructs.html#DBLBRACKETS](http://tldp.org/LDP/abs/html/testconstructs.html#DBLBRACKETS)

> 存在一个名为 [（左括号特殊字符）的专用命令。它是 的同义词`test`，并且出于效率原因而内置。此命令将其参数视为比较表达式或文件测试，并返回与比较结果相对应的退出状态（0 表示真，1 表示假）。
> 
> 在 2.02 版本中，Bash 引入了 [[ ... ]] 扩展测试命令，它以其他语言的程序员更熟悉的方式执行比较。请注意 [[ 是关键字，而不是命令。
> 
> [[ 和 ]] 之间没有文件名扩展或分词，但有参数扩展和命令替换。
> 
> 使用 [[ ... ]] 测试构造，而不是 [ ... ] 可以防止脚本中的许多逻辑错误。例如，&&、||、< 和 > 运算符在 [[ ]] 测试中工作，尽管在 [ ] 构造中给出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:35:15.467

从[本](http://ss64.com/bash/syntax-brackets.html)手册：

> 括号返回表达式的二进制结果：[[]]
> 
> [[ 表达 ]]
> 
> 根据条件表达式的评估返回状态 0 或 1。`[[' and`]]'之间的单词不进行分词和文件名扩展；执行波浪号扩展、参数和变量扩展、算术扩展、命令替换、进程替换和引号删除。
> 
> && 和 || 如果 expression1 的值足以确定整个条件表达式的返回值，则命令不会执行 expression2。

# batch-file - (MS-DOS, BATCH FILES) 如何写入日志文件，只保留最近的前 1000 行

> ID：11796752
> 
> 赞同：1
> 
> 时间：2012-08-03T13:30:33.643
> 
> 标签：batch-file, dos

在 Windows Server 2003 环境中，我们有一个批处理文件 (*.bat)，它写入特定目录中的文本日志文件。

为了防止这个文件变得太大，我想知道如何修改批处理文件以便只保留前 1000 个最近的行。

预先感谢您的友好合作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:19:23.363

您可以随时调用以下例程来修剪您的日志文件，只保留最后 1000 行。文件名作为第一个也是唯一的参数传递。

```
:KeepLast1000
@echo off
setlocal
set keep=1000
if not exist "%~1" exit /b
set skip=0
for /f  %%N in ('find /c /v "" ^<"%~1" 2^>nul') do if %%N gtr %keep% set /a skip=%%N-keep
more +%skip% "%~1" >"%~1.new"
move /y "%~1.new" "%~1" >nul 
```

# asp.net-mvc-3 - 将 DateTime[] 传递给视图以部署为视图中的下拉列表

> ID：11796753
> 
> 赞同：0
> 
> 时间：2012-08-03T13:30:52.207
> 
> 标签：asp.net-mvc-3

我看过这个：

[ASP.NET MVC - 如何将数组传递给视图？](https://stackoverflow.com/questions/1405383/asp-net-mvc-how-to-pass-an-array-to-the-view)

并且正在努力将我的 DateTime[] 部署为视图中的下拉列表，特此附上我的行，但它不正确：

```
<p style="color:Red"><%: Html.DropDownList("Choose a Sunday: ", (IEnumerable<SelectListItem>)ViewData["Sundays"], "--Select--")%>
</p> 
```

在控制器中我有：

```
[HttpGet]
public ActionResult MyAction()
{
  DateTime[] allSundaysInMonth = GetDatesOfSundays(System.DateTime.Now);
  ViewData["Sundays"] = allSundaysInMonth;
  return View();
} 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:37:21.610

也许您想要做的是：

```
[HttpGet]
public ActionResult MyAction()
{
  IEnumerable<SelectListItem> allSundaysInMonth = GetDatesOfSundays(System.DateTime.Now).Select(day => new SelectListItem() { Text = day.ToString(), Value = day.ToString() });
  ViewData["Sundays"] = allSundaysInMonth;
  return View();
} 
```

这取决于您的显示格式。我要指出的是，`DateTime`并且`SelectListItem`可能没有隐式转换，因此您在运行时会遇到类型不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:44:43.087

如果您曾经认为（实现）像`ViewData`/这样的动态魔法变量`ViewBag`是邪恶的，并且考虑为您的视图使用强类型 ViewModel，您可以这样做

`ViewModel`为您的视图（UI）创建一个特定的。

```
public class EventViewModel
{
  public IEnumerable<SelectListItem> AllSundays { set;get;}
  public string SelectedSunday { set;get;}
} 
```

在您的操作方法中，设置值并将其发送到视图

```
public ActionResult MyAction()
{
  var vm=new EventViewModel();
  vm.AllSundays = GetDatesOfSundays(System.DateTime.Now).
          Select(d => new SelectListItem() {
            Text = d.ToString(), Value = d.ToString() }).ToList();

  return View(vm);
} 
```

像这样改变你的看法

```
@model EventViewModel
@Html.DropDownListFor(x => x.SelectedSunday, Model.AllSundays, "--Select One--") 
```

**ViewBag/ViewData 不好。它使您的代码难看。坚持强类型。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:34:45.030

您将列表转换为`IEnumerable<SelectListItem>`，但它是一个日期时间列表。将列表投射到`IEnumerable<DateTime>`应该修复它。

或者您可能希望将列表`SelectListItem`放在 ViewData 上！

# java - 如何从具有 2 种不同格式的字符串列表中解析持续时间并添加它们？

> ID：11796755
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:30:55.013
> 
> 标签：java

我有一个具有两种不同格式的字符串列表，例如

08:50 09:50

10:30

06:40 07:30

03:50 05:50

03:32

我需要对它们进行迭代并减去第一个为 01:00 和第三个为 00:50 和第四个为 02:00 并计算得到所有它们的总数为 17:52 注意列表包括成千上万的记录不是这些记录，我需要一个通用的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:37:03.093

使用正则表达式在不同类型之间进行过滤？

`\d\d:\d\d \d\d:\d\d`08:50 09:50 应为 true，但 10:30 应为 false。

网上有足够多的关于 reg exps 的教程。

[http://www.regexpal.com/](http://www.regexpal.com/)有助于构建新的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:29:56.750

我会分线，看看你会得到什么。

```
String[] parts = line.split(" ");
switch(parts.length) {
    case 1: 
        Date time = sdf.parse(parts[0]);
        // use time.
        break;
    case 2:
        Date time1 = sdf.parse(parts[0]);
        Date time2 = sdf.parse(parts[1]);
        // use time1 and time2
        break;
    default:
        // invalid line.
} 
```

# java - 渲染第三人称 3D

> ID：11796756
> 
> 赞同：0
> 
> 时间：2012-08-03T13:30:58.320
> 
> 标签：java, 3d, rendering, ogre, jmonkeyengine

我的第三个人漂浮在空中，相机应该缩小： ![在此处输入图像描述](../Images/65795c9d497c3877219935ce2ecacd36.png)

这是程序

```
package adventure;

import java.applet.Applet;
import com.jme3.math.Quaternion;
import com.jme3.math.FastMath;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import com.jme3.material.RenderState.FaceCullMode;
import javax.swing.JFrame;
import javax.swing.JPanel;

import com.jme3.animation.AnimChannel;
import com.jme3.animation.AnimControl;
import com.jme3.animation.AnimEventListener;
import com.jme3.animation.LoopMode;
import com.jme3.app.SimpleApplication;
import com.jme3.asset.BlenderKey;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.PhysicsSpace;
import com.jme3.bullet.collision.PhysicsCollisionEvent;
import com.jme3.bullet.collision.PhysicsCollisionListener;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.SphereCollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.effect.ParticleEmitter;
import com.jme3.effect.ParticleMesh.Type;
import com.jme3.effect.shapes.EmitterSphereShape;
import com.jme3.input.ChaseCamera;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector2f;
import com.jme3.math.Vector3f;
import com.jme3.post.FilterPostProcessor;
import com.jme3.post.filters.BloomFilter;
import com.jme3.renderer.Camera;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;
import com.jme3.scene.shape.Sphere;
import com.jme3.scene.shape.Sphere.TextureMode;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;
import com.jme3.terrain.geomipmap.TerrainLodControl;
import com.jme3.terrain.geomipmap.TerrainQuad;
import com.jme3.terrain.heightmap.AbstractHeightMap;
import com.jme3.terrain.heightmap.ImageBasedHeightMap;
import com.jme3.texture.Texture;
import com.jme3.texture.Texture.WrapMode;
import com.jme3.util.SkyFactory;

public class MountainWorld extends SimpleApplication implements ActionListener,
        PhysicsCollisionListener, AnimEventListener, Playable {
    private static World world;
    private static Person person;
    private static Player dplayer;
    private static TextArea textarea;
    private BulletAppState bulletAppState;
    private AnimChannel channel;
    private AnimControl control;
    // character
    CharacterControl character;
    Node model;
    // temp vectors
    Vector3f walkDirection = new Vector3f();
    // terrain
    TerrainQuad terrain;
    RigidBodyControl terrainPhysicsNode;
    // Materials
    Material matRock;
    Material matBullet;
    // animation
    AnimChannel animationChannel;
    AnimChannel shootingChannel;
    AnimControl animationControl;
    float airTime = 0;
    // camera
    boolean left = false, right = false, up = false, down = false;
    ChaseCamera chaseCam;
    // bullet
    Sphere bullet;
    SphereCollisionShape bulletCollisionShape;
    // explosion
    ParticleEmitter effect;
    // brick wall
    Box brick;
    float bLength = 0.8f;
    float bWidth = 0.4f;
    float bHeight = 0.4f;
    FilterPostProcessor fpp;

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                MountainWorld canvasApplication = new MountainWorld();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Mountain World");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                world = new DungeonWorld(canvasApplication);
                person = new Person(world, "You", null);
                dplayer = new Player(world, person);
                Commands commands = new Commands(person);
                textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a mountain. The trolls live here.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);
        stateManager.attach(bulletAppState);
        setupKeys();
        prepareBullet();
        prepareEffect();
        createLight();
        createSky();
        createTerrain();
        createWall();
        createCharacters();

        setupChaseCamera();
        setupAnimationController();
        setupFilter();
    }

    private void setupFilter() {
        FilterPostProcessor fpp = new FilterPostProcessor(assetManager);
        BloomFilter bloom = new BloomFilter(BloomFilter.GlowMode.Objects);
        fpp.addFilter(bloom);
        viewPort.addProcessor(fpp);
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    private void setupKeys() {
        inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
        inputManager.addListener(this, "wireframe");
        inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("CharSpace",
                new KeyTrigger(KeyInput.KEY_RETURN));
        inputManager
                .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "CharLeft");
        inputManager.addListener(this, "CharRight");
        inputManager.addListener(this, "CharUp");
        inputManager.addListener(this, "CharDown");
        inputManager.addListener(this, "CharSpace");
        inputManager.addListener(this, "CharShoot");
    }

    private void createWall() {
        float xOff = -144;
        float zOff = -40;
        float startpt = bLength / 4 - xOff;
        float height = 6.1f;
        brick = new Box(Vector3f.ZERO, bLength, bHeight, bWidth);
        brick.scaleTextureCoordinates(new Vector2f(1f, .5f));
        for (int j = 0; j < 15; j++) {
            for (int i = 0; i < 4; i++) {
                Vector3f vt = new Vector3f(i * bLength * 2 + startpt, bHeight
                        + height, zOff);
                addBrick(vt);
            }
            startpt = -startpt;
            height += 1.01f * bHeight;
        }
    }

    private void addBrick(Vector3f ori) {
        Geometry reBoxg = new Geometry("brick", brick);
        reBoxg.setMaterial(matBullet);
        reBoxg.setLocalTranslation(ori);
        reBoxg.addControl(new RigidBodyControl(1.5f));
        reBoxg.setShadowMode(ShadowMode.CastAndReceive);
        this.rootNode.attachChild(reBoxg);
        this.getPhysicsSpace().add(reBoxg);
    }

    private void prepareBullet() {
        bullet = new Sphere(32, 32, 0.4f, true, false);
        bullet.setTextureMode(TextureMode.Projected);
        bulletCollisionShape = new SphereCollisionShape(0.4f);
        matBullet = new Material(getAssetManager(),
                "Common/MatDefs/Misc/Unshaded.j3md");
        matBullet.setColor("Color", ColorRGBA.Green);
        // matBullet.setColor("m_GlowColor", ColorRGBA.Green);
        getPhysicsSpace().addCollisionListener(this);
    }

    private void prepareEffect() {
        int COUNT_FACTOR = 1;
        float COUNT_FACTOR_F = 1f;
        effect = new ParticleEmitter("Flame", Type.Triangle, 32 * COUNT_FACTOR);
        effect.setSelectRandomImage(true);
        effect.setStartColor(new ColorRGBA(1f, 0.4f, 0.05f,
                (float) (1f / COUNT_FACTOR_F)));
        effect.setEndColor(new ColorRGBA(.4f, .22f, .12f, 0f));
        effect.setStartSize(1.3f);
        effect.setEndSize(2f);
        effect.setShape(new EmitterSphereShape(Vector3f.ZERO, 1f));
        effect.setParticlesPerSec(0);
        effect.setGravity(0, -5, 0);
        effect.setLowLife(.4f);
        effect.setHighLife(.5f);
        effect.setInitialVelocity(new Vector3f(0, 7, 0));
        effect.setVelocityVariation(1f);
        effect.setImagesX(2);
        effect.setImagesY(2);
        Material mat = new Material(assetManager,
                "Common/MatDefs/Misc/Particle.j3md");
        mat.setTexture("Texture",
                assetManager.loadTexture("Effects/Explosion/flame.png"));
        effect.setMaterial(mat);
        // effect.setLocalScale(100);
        rootNode.attachChild(effect);
    }

    private void createLight() {
        Vector3f direction = new Vector3f(-0.1f, -0.7f, -1).normalizeLocal();
        DirectionalLight dl = new DirectionalLight();
        dl.setDirection(direction);
        dl.setColor(new ColorRGBA(1f, 1f, 1f, 1.0f));
        rootNode.addLight(dl);
    }

    private void createSky() {
        rootNode.attachChild(SkyFactory.createSky(assetManager,
                "Textures/Sky/Bright/BrightSky.dds", false));
    }

    private void createTerrain() {
        matRock = new Material(assetManager,
                "Common/MatDefs/Terrain/TerrainLighting.j3md");
        matRock.setBoolean("useTriPlanarMapping", false);
        matRock.setBoolean("WardIso", true);
        matRock.setTexture("AlphaMap",
                assetManager.loadTexture("Textures/Terrain/splat/alphamap.png"));
        Texture heightMapImage = assetManager
                .loadTexture("Textures/Terrain/splat/mountains512.png");
        Texture grass = assetManager
                .loadTexture("Textures/Terrain/splat/grass.jpg");
        grass.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap", grass);
        matRock.setFloat("DiffuseMap_0_scale", 64);
        Texture dirt = assetManager
                .loadTexture("Textures/Terrain/splat/dirt.jpg");
        dirt.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_1", dirt);
        matRock.setFloat("DiffuseMap_1_scale", 16);
        Texture rock = assetManager
                .loadTexture("Textures/Terrain/splat/road.jpg");
        rock.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_2", rock);
        matRock.setFloat("DiffuseMap_2_scale", 128);
        Texture normalMap0 = assetManager
                .loadTexture("Textures/Terrain/splat/grass_normal.jpg");
        normalMap0.setWrap(WrapMode.Repeat);
        Texture normalMap1 = assetManager
                .loadTexture("Textures/Terrain/splat/dirt_normal.png");
        normalMap1.setWrap(WrapMode.Repeat);
        Texture normalMap2 = assetManager
                .loadTexture("Textures/Terrain/splat/road_normal.png");
        normalMap2.setWrap(WrapMode.Repeat);
        matRock.setTexture("NormalMap", normalMap0);
        matRock.setTexture("NormalMap_1", normalMap2);
        matRock.setTexture("NormalMap_2", normalMap2);

        AbstractHeightMap heightmap = null;
        try {
            heightmap = new ImageBasedHeightMap(heightMapImage.getImage(),
                    0.25f);
            heightmap.load();

        } catch (Exception e) {
            e.printStackTrace();
        }

        terrain = new TerrainQuad("terrain", 65, 513, heightmap.getHeightMap());
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        TerrainLodControl control = new TerrainLodControl(terrain, cameras);
        terrain.addControl(control);
        terrain.setMaterial(matRock);
        terrain.setLocalScale(new Vector3f(2, 2, 2));

        terrainPhysicsNode = new RigidBodyControl(
                CollisionShapeFactory.createMeshShape(terrain), 0);
        terrain.addControl(terrainPhysicsNode);
        rootNode.attachChild(terrain);
        getPhysicsSpace().add(terrainPhysicsNode);
    }

    private void createCharacters() {
        CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
        character = new CharacterControl(capsule, 0.01f);
        model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
        model.setLocalScale(0.15f);
        //ninja.setViewDirection( new Vector3f( 1, 0, 1 ) );
         //model.rotate(0.0f, -3.0f, 0.0f);

        model.addControl(character);
        character.setPhysicsLocation(new Vector3f(-140f, 9.9f, -9f));
        character.setViewDirection(new Vector3f(1, 0, 0));
        rootNode.attachChild(model);
        getPhysicsSpace().add(character);

        //BlenderKey blenderKey = new BlenderKey(
            //  "objects/creatures/alien/alien.mesh.xml");

        //Node alien = (Node) assetManager.loadModel(blenderKey);
        //alien.setLocalTranslation(new Vector3f(-145, 21, -10));

        //rootNode.attachChild(alien);

        BlenderKey blenderKey2 = new BlenderKey(
                "objects/creatures/minotaur/minotaur.mesh.xml");

        Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
        man.setLocalTranslation(new Vector3f(-140, 15, -10));

        rootNode.attachChild(man);

    }

    private void setupChaseCamera() {
        flyCam.setEnabled(false);
        chaseCam = new ChaseCamera(cam, model, inputManager);
    }

    private void setupAnimationController() {
        animationControl = model.getControl(AnimControl.class);
        animationControl.addListener(this);
        animationChannel = animationControl.createChannel();
        //shootingChannel = animationControl.createChannel();
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "uparm.right"));
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "arm.right"));
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "hand.right"));
    }

    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
        camDir.y = 0;
        camLeft.y = 0;
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        if (!character.onGround()) {
            airTime = airTime + tpf;
        } else {
            airTime = 0;
        }
        if (walkDirection.length() == 0) {
            if (!"Idle1".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Idle1", 1f);
            }
        } else {
            character.setViewDirection(walkDirection);
            if (airTime > .3f) {
                if (!"stand".equals(animationChannel.getAnimationName())) {
                    animationChannel.setAnim("stand");
                }
            } else if (!"Walk".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Walk", 0.7f);
            }
        }
        character.setWalkDirection(walkDirection);
    }

    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("CharLeft")) {
            if (value) {
                left = true;
            } else {
                left = false;
            }
        } else if (binding.equals("CharRight")) {
            if (value) {
                right = true;
            } else {
                right = false;
            }
        } else if (binding.equals("CharUp")) {
            if (value) {
                up = true;
            } else {
                up = false;
            }
        } else if (binding.equals("CharDown")) {
            if (value) {
                down = true;
            } else {
                down = false;
            }
        } else if (binding.equals("CharSpace")) {
            character.jump();
        } else if (binding.equals("CharShoot") && !value) {
            bulletControl();
        }
    }

    private void bulletControl() {
        shootingChannel.setAnim("Dodge", 0.1f);
        shootingChannel.setLoopMode(LoopMode.DontLoop);
        Geometry bulletg = new Geometry("bullet", bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setShadowMode(ShadowMode.CastAndReceive);
        bulletg.setLocalTranslation(character.getPhysicsLocation().add(
                cam.getDirection().mult(5)));
        RigidBodyControl bulletControl = new BombControl(bulletCollisionShape,
                1);
        bulletControl.setCcdMotionThreshold(0.1f);
        bulletControl.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletControl);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletControl);
    }

    public void collision(PhysicsCollisionEvent event) {
        if (event.getObjectA() instanceof BombControl) {
            final Spatial node = event.getNodeA();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        } else if (event.getObjectB() instanceof BombControl) {
            final Spatial node = event.getNodeB();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        }
    }

    public void onAnimCycleDone(AnimControl control, AnimChannel channel,
            String animName) {
        if (channel == shootingChannel) {
            channel.setAnim("stand");
        }
    }

    public void onAnimChange(AnimControl control, AnimChannel channel,
            String animName) {
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        return null;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }
} 
```

我希望绿色人留在地上，但我似乎无法将物理位置更改为合适的。你有什么主意吗？我拿了这个程序，只是将角色从 oto 切换到 ninja： [http ://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/test/jme3test/bullet/TestWalkingChar.java](http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/test/jme3test/bullet/TestWalkingChar.java)

您知道如何使相机缩小以显示整个绿色人并更改绿色人的位置以使他在地面上吗？

我注意到我可以用这个更改主字符的位置

`character.setPhysicsLocation(new Vector3f(-140f, 9.9f, -9f));`

但是当我输入较低的 y 坐标时，主字符会从地面下降，然后在天空中漂浮，就像他穿过地面时最终到达了所有物体的顶部一样。我可以完美地使用 Oto 运行该示例，它将主字符更改为对我不起作用的 ninja。

## 更新

当使用`setlocaltranslation`而不是`setphysicallocation`我的主字符时，它位于空中：

![在此处输入图像描述](../Images/9ca7f5694e41b9c9a8884e8439fd9482.png)

## 更新 2

缩放主字符后： `model.scale(0.25f);` 如答案中所建议的，渲染效果要好得多： ![在此处输入图像描述](../Images/1273dba2f8a22888b24171f6e6e9521e.png)

![在此处输入图像描述](../Images/dad98ac83e005b6659fd19bf90f7aba5.png)

## 更新 2

经过更多操作，它看起来更像我想要的方式： ![在此处输入图像描述](../Images/908587d1f34c8e42a81baad7b8928476.png)

```
private void createCharacters() {
    CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
    character = new CharacterControl(capsule, 0.01f);
    model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
    model.setLocalScale(0.15f);
    // ninja.setViewDirection( new Vector3f( 1, 0, 1 ) );
    // model.rotate(0.0f, -3.0f, 0.0f);
    float scale = 0.25f;
    model.scale(scale, scale, scale);
    model.addControl(character);
    character.setPhysicsLocation(new Vector3f(-141f, 10.5f, -9f));
    model.setShadowMode(ShadowMode.CastAndReceive);
    // model.setLocalTranslation(0, 50, 0);

    character.setViewDirection(new Vector3f(1, 0, 0));
    rootNode.attachChild(model);
    getPhysicsSpace().add(character);

    // BlenderKey blenderKey = new BlenderKey(
    // "objects/creatures/alien/alien.mesh.xml");

    // Node alien = (Node) assetManager.loadModel(blenderKey);
    // alien.setLocalTranslation(new Vector3f(-145, 21, -10));

    // rootNode.attachChild(alien);

    BlenderKey blenderKey2 = new BlenderKey("Models/Oto/Oto.mesh.xml");

    Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
    man.setLocalTranslation(new Vector3f(-140, 10, -10));

    // man.setShadowMode(ShadowMode.CastAndReceive);
    rootNode.attachChild(man);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:11:23.403

我怀疑有 3 件事可以让你的角色看起来在徘徊：

1.  你的角色在徘徊。在这种情况下，您需要`character.setLocalTranslation(0, -20, 0)`调整角色所在的位置（可能需要将 -20 调整为其他负数）
2.  与地面的比例相比，您角色的比例太大（听起来这是您无论如何都想解决的问题）。要解决此问题，您需要使用`character.scale(.25)`（可以将 .25 调整为适合您的任何数字
3.  你在地面上没有阴影。这确实将您的角色与地面联系起来，并给人以某种方式联系在一起的感觉。为此，您可能希望将其`object.setShadowMode(RenderQueue.ShadowMode.Receive)`用于所有地形对象和`character.setShadowMode(RenderQueue.ShadowMode.CastAndReceive)`角色对象。

JMonkeyEngine javadoc 非常好——如果你还没有，我建议你去那里看看，看看你能用你的引擎做什么。 [http://jmonkeyengine.org/javadoc/index.html](http://jmonkeyengine.org/javadoc/index.html)

# android - 如何检查用户是否接受了读/写联系人的权限？

> ID：11796758
> 
> 赞同：2
> 
> 时间：2012-08-03T13:31:02.907
> 
> 标签：android, permissions, screen, contacts

我的应用程序从手机中读取联系人，因此当它运行时，他会获得许可。

我如何再次询问或检查用户是否给予许可？

非常感谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T13:35:59.037

用户实际上没有选择他们批准或不批准哪些权限的选项。要么他们批准所有内容并安装您的应用程序，要么他们选择拒绝然后您的应用程序没有安装。

但是，要回答您的问题，您可以使用PackageManager 中的[checkPermission方法](http://developer.android.com/reference/android/content/pm/PackageManager.html#checkPermission%28java.lang.String,%20java.lang.String%29)

```
PackageManager manager = getPackageManager();
int hasPermission = manager.checkPermission ("android.permission.READ_CONTACTS", "com.your.package")
if (hasPermission == PackageManager.PERMISSION_GRANTED) {
    //you have permission
} 
```

# xpages - 如何为所有使用自定义控件的页面设置 pageTitle 属性？

> ID：11796760
> 
> 赞同：1
> 
> 时间：2012-08-03T13:31:12.330
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

希望自动计算 XPage 上的 pageTitle 属性以简单地显示 XPage 名称。我想在 Application Layout 自定义控件上对此进行一次编码，以便添加控件的每个页面都能从属性计算中受益。到目前为止，我的 CC 上有一些 SSJS 来计算页面标题并分配给 viewScope 变量：

```
var path:String = context.getUrl().getPath();
var xpageName:String = @RightBack(path,"/");
viewScope.xpageName = xpageName;
return xpageName 
```

在我添加 CC 的任何 XPage 上，我可以简单地将 viewScope 变量的值返回给 pageTitle 属性，如下所示：

```
viewScope.xpageName 
```

但是，想知道如何在不需要上述行的情况下从 CC 自动设置它。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:28:14.980

您还可以在主题中设置 pageTitle。Julian Buss 网站上的这个页面显示了默认值[http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_themes](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_themes)的代码。因为 override 设置为 false，所以您可以在您选择的任何自定义控件或 XPage 上覆盖它。这是我在所有应用程序中设置的主题属性之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:38:19.693

您可以按照 Declan 在自定义控件的所有属性属性中所说的那样执行此操作。我更喜欢使用这样的控制块将其放入数据库主题中：

```
<control override="true">
    <name>ViewRoot</name>
    <property>
        <name>pageTitle</name>
        <value>#{javascript:
var path:String = context.getUrl().getPath();
var xpageName:String = @RightBack(path,"/");
viewScope.xpageName = xpageName;
return xpageName
}</value>
    </property>
 </control> 
```

然后，这会强制您的代码对数据库中交付的所有 XPage 使用 ssjs 代码。我实际上更喜欢返回值是：

```
return database.getTitle() + " : " + xpageName; 
```

享受

/新人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:37:09.027

在自定义控件的“所有属性”面板中，您可以使用一个“pageTitle”属性。一旦设置，只要在主 XPage 上没有设置 pageTitle 属性，并且只要同一页面上没有其他自定义控件设置了该属性，它就会用于页面的标题。

# java - Core Java 中的 OGNL 表达式 - 使用动态键访问地图

> ID：11796766
> 
> 赞同：1
> 
> 时间：2012-08-03T13:31:37.683
> 
> 标签：java, ognl

我是 OGNL 的新手。我正在尝试在核心 java 中编写 OGNL 表达式来检索属性/调用方法。

这是我的测试类。它有一个键列表和一个使用这些键存储值的映射。请看下面

```
package ognl.test;
import java.util.List;
import java.util.Map;

public class OGNLTestProg {

    List<String> keys = null;
    Map<String, Object> data = null;

    public OGNLTestProg(List<String> keys, Map<String, Object> data){
        this.keys = keys;
        this.data = data;
    }

    public List<String> getKeys(){
        return keys;
    }

    public Object getData(String key){
        return data.get(key);
    }
} 
```

下面是实例化上述类的一个对象并使用OGNL调用一些方法的测试程序。

```
package ognl.test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import ognl.Ognl;

public class Test { 
    public static void main(String[] args) throws Exception {
        String str1 = "1";
        String str2 = "2";
        List<String> keys = new ArrayList<String>();
        keys.add(str1);
        keys.add(str2);

        User u1 = new User();
        u1.setFirstName("x");
        u1.setLastName("y");

        User u2 = new User();
        u2.setFirstName("x1");
        u2.setLastName("y1");

        Map<String, Object> data = new HashMap<String, Object>();
        data.put(str1, u1);
        data.put(str2, u2);

        OGNLTestProg o = new OGNLTestProg(keys, data);

        /**
        #{
            #outerObj = #this,
            'users': getKeys().
                {
                    #{  
                    #user = outerObj.getData(#this),
                    #{
                        'firstName': user.getFirstName(),
                        'lastName':user.getLastName()
                    }       
                   }
                }
            }
         */
        Object expression1 = Ognl.parseExpression("#{"+
                  "#outerObj = #this,"+
                  "'users': getKeys()."+
                    "{"+                     
                      "#{"+
                        "#user = outerObj.getData(#this),"+
                        "#{ 'firstName': user.getFirstName(),"+
                            "'lastName':user.getLastName()"+
                        "}"+        
                       "}" +
                       "}"+
                 "}");

        Map<String,Object> map = (Map<String,Object>)Ognl.getValue(expression1, o);

    }

} 
```

User 是一个自定义类，具有 firstName 和 lastName 作为属性。

我试图使用 OGNL expr 实现的是迭代列表，检索每个键，然后将该键传递给映射以检索值（用户对象），然后调用该对象的某些属性。

虽然我可以使用迭代列表

```
'users': getKeys().{
        //I need to access the getData() method of the root object here passing the current #this object
 } 
```

我的 OGNL 表达式在线程“main”ognl.NoSuchPropertyException 中引发以下错误异常：java.lang.String.outerObj

请帮忙。我在谷歌上发现了很多关于使用带有 struts2 标签的 OGNL 的东西，但它在访问上述对象属性方面的用法并没有太多。

问候， Suv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:50:05.417

如果我要实现它看起来像你想要的功能，那么我可能会使用 google guava Table 对象来创建多个索引用户对象，然后你可以通过一个简单的 map.get(key) 调用来检索它。

您在示例中的内容甚至在 API 的 guava Table wiki 教程中完全匹配。你让它变得比它必须的更复杂。;)

# javascript - jquery中的超时函数

> ID：11796767
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:31:39.773
> 
> 标签：javascript, jquery

jquery中的超时功能是什么？

```
setTimeout("searchClusterAction(action)",3000);

function searchClusterAction(action)
{
        var url = action
        $(location).attr('href',url);
} 
```

在使用超时时，我在第 2 行遇到错误

```
var action = "/search/perform/1584/xyz/["1","2","3","4,5,6"]/json
setTimeout('searchClusterAction('+action+')',3000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:34:40.990

jQuery 没有特殊的超时功能，原生的可以完美运行且易于使用。

```
 var timeout = setTimeout(function(){
    $('.example').fadeOut();
  },400); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:35:16.933

该[`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)函数允许 JavaScript 记下在未来 X 毫秒内运行给定函数。`setTimeout()`（顺便说一句，无论 w3Schools 怎么说，你都应该传递函数，而不是字符串）

一个警告：不要`setTimeout()`像这样在调用中调用函数：

```
setTimeout(foo(),1000); 
```

因为它将运行`foo()`然后将*结果*传递给`foo`to `setTimeout()`。简单地：

```
setTimeout(function(){ foo(); },1000); 
```

[对大值使用 setTimeout()](https://stackoverflow.com/questions/10950533/using-settimeout-for-large-values)

# python - & 在 bash 命令之后

> ID：11796791
> 
> 赞同：0
> 
> 时间：2012-08-03T13:33:18.227
> 
> 标签：python, linux, bash, shell

我不确定`&`这个 bash 脚本中的 after 命令在做什么。

```
 python alt_pg ${args} & 
```

另外，我正在修改的脚本的原始版本在命令开头没有使用“python”，这与“&”有关吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T13:35:54.183

`&`在该行的末尾`python alt_pg ${args}`在您的 linux shell 下的“背景”中运行；但是，脚本仍然与 shell 相关联。因此，如果 shell 停止，脚本也会停止。

旁注：您可以使用`nohup python alt_pg ${args} &`. 如果您像这样生成脚本，则脚本在退出 shell 后仍然存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T13:35:36.697

与号在分叉/后台进程中运行该进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T13:36:38.553

不，它们是两个不同的东西。

运行`python alt_pg ...`方式`python`将在 中查找`$PATH`，并将`alt_pg ...`作为参数传递给 python。然后 Python 会查找一个名为`alt_pg`. 运行`alt_pg ...`方式`alt_pg`将在 中查找`$PATH`。后者可能会导致 python 运行，这取决于做什么`alt_pg`。

在命令后添加 a`&`表示命令在后台运行，即使`alt_pg`仍在运行，shell 也可以继续执行后面的命令。

# linux - 从 shell 脚本中的另一个文件读取命令？

> ID：11796792
> 
> 赞同：0
> 
> 时间：2012-08-03T13:33:21.163
> 
> 标签：linux, shell

看到我想`source`在我的 shell 脚本中使用命令。现在，当我在终端上键入 source 时，它​​显示为

```
-bash: source: filename argument required
source: usage: source filename [arguments] 
```

现在当我像这样在我的shell脚本中使用它时

```
#!/bin/sh
source 
```

并保存为 test.sh

然后运行然后像这样

```
./test.sh: 2: source: not found 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:36:23.017

您使用 运行脚本`sh`，而不是使用`bash`. `source`不存在 plain `sh`，但你可以使用`.`它，它的意思是一样的。

```
#!/bin/sh
. /path/to/other/script
function_defined_in_other_script 
```

# iphone - 将多个上下文与核心数据一起使用时出现错误 133000

> ID：11796797
> 
> 赞同：3
> 
> 时间：2012-08-03T13:33:36.370
> 
> 标签：iphone, objective-c, ios, core-data, magicalrecord

我花了几天时间尝试我能想到的所有可能的解决方案来解决这个问题，但似乎没有任何效果。

我运行这样的后台线程：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {

                    Media *localMedia = [media inContext:localContext];

                    UIImage *image = localMedia.thumbnail;

                    dispatch_async(dispatch_get_main_queue(), ^{

                        [thumbnails setObject:image forKey:[NSNumber numberWithInt:i]];
                        [contentDict setObject:thumbnails forKey:@"MediaItems"];
                        [cell.entryView setNeedsDisplay];
                    });

                }]; 
```

或者像这样：

```
dispatch_queue_t cellSetupQueue = dispatch_queue_create("com.Journalized.SetupTimelineThumbnails", NULL);
            dispatch_async(cellSetupQueue, ^{

                NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];
                NSPersistentStoreCoordinator *coordinator = [NSManagedObjectContext contextForCurrentThread].persistentStoreCoordinator;
                [newMoc setPersistentStoreCoordinator:coordinator];

                NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];
                [notify addObserver:self
                           selector:@selector(mergeChanges:)
                               name:NSManagedObjectContextDidSaveNotification
                             object:newMoc];

Media *localMedia = [media inContext:[NSManagedObjectContext contextForCurrentThread];

                        UIImage *image = localMedia.thumbnail;

                        dispatch_async(dispatch_get_main_queue(), ^{

                            [thumbnails setObject:image forKey:[NSNumber numberWithInt:i]];
                            [contentDict setObject:thumbnails forKey:@"MediaItems"];
                            [cell.entryView setNeedsDisplay];
                        });

                    }]; 
```

这两个都让我崩溃，UIImage 作为 nil 对象返回，而`Cocoa Error 133000`.

我已经删除了所有其他后台线程代码，并在此之前直接保存在主线程中以确保。在主线程上运行上面的代码也可以，但会冻结我的 UI。尽管付出了所有这些努力，但上述代码每次都会崩溃。

我不知道该怎么做才能完成这项工作。

编辑：

具体来说，我的问题是如何在不崩溃的情况下完成这项工作？来自 1 个上下文的对象在另一个上下文中不存在似乎是一个问题，但是我如何使它们存在于另一个上下文中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:52:46.427

Remember, the MR_inContext: method is using [NSManagedObjectContext objectWithID: ] method under the covers. You should look in there to make sure your object has:

1) Been saved prior to entering into the background context/block in your first code block 2) This method is returning something useful

I'm also not sure how you set up your thumbnail attribute. Ideally it shouldn't matter as long as you have the NSTransformable code write (there are samples on the internets that show you how to save a UIImage in core data using the transformable attribute)

Also, your code should look like this:

```
UIImage *image = nil;
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {

  Media *localMedia = [media inContext:localContext]; //remember, this looks up an existing object. If your context is a child of a parent context that has contains this, the localContext should refresh the object from the parent.

  //image processing/etc

  image = localMedia.thumbnail;

} completion:^{              

    [thumbnails setObject:image forKey:@(i)]; //new literals are teh awesome
    contentInfo[@"MediaItems"] = thumbnails;  //as is the new indexer syntax (on the latest compiler)

    [cell.entryView setNeedsDisplay];

}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:38:10.040

快速回答：

> NSManagedObjectReferentialIntegrityError = 133000, // 尝试触发指向不存在的对象的故障（我们可以看到存储，我们看不到对象）

编辑：很难从代码中看到一些东西。那里的托管对象是什么？

我想问题是您在另一个上下文中使用来自一个上下文的临时对象。

# javascript - 准备 Outlook 邮件正文时出现 %0A 问题

> ID：11796802
> 
> 赞同：1
> 
> 时间：2012-08-03T13:33:42.797
> 
> 标签：javascript, browser, outlook

我有一个通过浏览器地址栏运行的脚本。该脚本会在网页中提取几个名称，并会打开一个新的邮件窗口，其中包含所有选定的名称和一些正文。

**我正在尝试使用%0A**对正文内容应用几个换行符，但它会引发未终止的**字符串常量**错误。如何摆脱这个？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:12:12.220

尝试这个。编辑标签**_**

[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_mailto](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_mailto)

像这样

```
<a href="mailto:someone@example.com?Subject=Hello%20again&body=Hello,%0AHow are you"> 
```

# powershell - 使用 Powershell 将所有 .dll 文件从一台虚拟服务器复制到另一台

> ID：11796804
> 
> 赞同：1
> 
> 时间：2012-08-03T13:33:47.663
> 
> 标签：powershell, scripting, virtual-machine, code-cleanup

我正在尝试将虚拟服务器中的 C:\windows 中的所有 .dll 文件复制到新的虚拟服务器。我已经设法获取所有 .dll 文件，但是我找不到将它们复制到新虚拟服务器的方法，并且想知道是否有人可能知道如何使用 Powershell 执行此操作。

```
[void][System.Reflection.Assembly]::LoadWithPartialName('Microsoft.VisualBasic') 
$server = [Microsoft.VisualBasic.Interaction]::InputBox("Enter the server name with files you want to copy", "Server")
$server2 = [Microsoft.VisualBasic.Interaction]::InputBox("Enter the server name you want files copied to", "Server")
$destinationName = ("\\" + $server2 + '\C$\windows')
$Files = Get-ChildItem -Path ("\\" + $server + '\C$\windows') -recurse | Where {$_.extension -eq ".dll"} 
```

我要如何处理我的 $Files 变量才能将其复制到新 VM？我知道 copy-item cmdlet，但不知道如何使用它将所有这些移动到新的虚拟服务器。

编辑：

```
[void][System.Reflection.Assembly]::LoadWithPartialName('Microsoft.VisualBasic') 
$server = [Microsoft.VisualBasic.Interaction]::InputBox("Enter the server name with files you want to copy", "Server")
$server2 = [Microsoft.VisualBasic.Interaction]::InputBox("Enter the server name you want files copied to", "Server")
$destinationName = ("\\" + $server2 + '\C$\windows')

$Files = Get-ChildItem -Path ("\\" + $server + '\C$\windows') -recurse | Where {$_.extension -eq ".dll"}
foreach($dll in $Files){
$destinationName +=  
cp $dll.fullname $destinationName} 
```

我想让每个特定文件的路径字符串为“\$server2\C$\windows\ ..\ ..”。

目前，如果代码运行，它将使每个文件/目录显示为“\$server2\C$\windows”，而不是获得完整路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:18:32.887

事实上，你真的快到了。

`$Files = Get-ChildItem...`make`$Files`变成了一个项目数组，并且因为 Powershell 设计用于处理对象，所以您只需将`$Files`其用作`Copy-Item`. 需要注意的是，无论出于何种原因，`Copy-Item`它都不会使用通过获得的对象的完整路径属性`Get-ChildItem`（而是只获取文件名，因此您必须在该目录中才能工作），所以最简单的方法是：

`foreach($dll in $Files){cp $dll.fullname $destinationName}`

**要在保留目录结构的同时进行复制**，您需要采用起始完整路径并对其进行修改以反映新的根目录/服务器。这可以在与上述类似的一行中完成，但为了清晰和可读性，我将其扩展为以下多行设置：

```
foreach($dll in $Files){
    $target = $dll.fullname -replace "\\\\$server","\\$server2"
    $targetDir = $($dll.directory.fullname -replace "\\\\$server","\\$server2")
    if(!(Test-Path $targetDir){
        mkdir $targetDir
    }
    cp $dll.fullname $target
} 
```

为了解释，该`$target...`行采用当前的完整路径`$dll`，例如`\\SourceServer\C$\windows\some\rather\deep\file.dll`，并且正则表达式替换路径的一部分`\\SourceServer`并替换它，`\\DestinationServer`以便路径的其余部分保持不变。也就是说，现在将是`\\TargetServer\C$\windows\some\rather\deep\file.dll`。这种方法消除了对`$destinationName`变量的需要。该`Test-Path`位确保文件的父文件夹在复制之前远程存在，否则将失败。

# windows-8 - Live Tiles - 保持联系

> ID：11796809
> 
> 赞同：0
> 
> 时间：2012-08-03T13:34:06.213
> 
> 标签：windows-8, microsoft-metro, live-tile

实时磁贴能够接收推送通知，而无需运行相关的 Metro 应用程序。

但是我相信应用程序必须至少运行一次才能让应用程序获取通知通道并订阅通知服务器，将通道传递给服务器。

我的问题是——

如果服务器切断客户端会发生什么？如果用户关闭他们的计算机，我认为服务器将开始接收交付失败错误。然后服务器可能会切断客户端。

但是当用户重新打开他们的计算机时会发生什么？磁贴现在是否断开连接，直到用户再次启动应用程序并重新向服务器订阅通知？

或者有没有办法让磁贴在启动时自动重新订阅而无需运行应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:10:22.307

推送通知不直接发送给客户端；它们是通过云中的 Windows 通知服务发送的。这意味着您的服务将能够发送它们。当机器退出睡眠/重新连接到网络时，WNS 服务将通过通知做正确的事情。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx)概述了通知的服务端。

请务必注意，磁贴通道将在 30 天后过期，并且需要（以编程方式）更新。指导意见是，您应该在应用程序运行时进行更新，以确保它不会过期。

我似乎无法在文档中找到的唯一一件事是客户端上有多少推送通知排队 - 我怀疑对于给定的标签通知，只保留一个。

也许另一种思考方式是使用错误通知——例如“新项目”计数。如果您在设备与网络断开连接（关闭、驱动等）时推送此号码，那么您的服务将成功发送通知，并且当该机器重新连接时，它将无缝地看到徽章更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:47:29.203

你应该在你的代码中处理这个问题，当你的客户端从服务器离线时，你应该删除它们并断开它们，客户端将只接收活动切片中的缓存值。

如果他们重新启动，那么您还应该在服务器端处理它以推送新的通知数据。

只是一个快速提示：如果您使用 WCF 作为您的服务，您可能需要检查[Announcement Service Class](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementservice.aspx)那里您可以处理您的客户在线/离线场景。

# javascript - 计算趋势线并预测未来结果

> ID：11796810
> 
> 赞同：6
> 
> 时间：2012-08-03T13:34:10.003
> 
> 标签：javascript, node.js, math, polynomial-math, trendline

我正在为我正在处理的网站编写一些分析模块，我需要估计当前小时后的总浏览量。我有每分钟到当前分钟的数据，所以如果时间是 12:28，我将有一个看起来像这样的数组：

```
0: "21410"
1: "21886"
2: "21837"
3: "21895"
4: "21564"
5: "21714"
6: "21571"
7: "21324"
8: "21310"
9: "21390"
10: "21764"
11: "21598"
12: "21493"
13: "21352"
14: "21478"
15: "21058"
16: "20942"
17: "20825"
18: "21321"
19: "20950"
20: "21039"
21: "21117"
22: "20733"
23: "20773"
24: "20929"
25: "20900"
26: "20687"
27: "20999" 
```

目前我正在预测小时的价值是这样的：

```
(60/minsSoFar)*totalSoFar 
```

这工作得相当好，但我宁愿在数学上做得更多。我想计算迄今为止我拥有的数据的最佳拟合线，并将其投影到第 60 分钟。这将考虑加速和减速。

使用我目前使用的方法，我有效地假设趋势是一条直线。我将如何计算多项式或幂趋势的公式？

我在 NodeJS 中编写这个，所以 JavaScript 是理想的，但我也会使用伪代码！

如果您需要，这是一种更简单格式的数组：

```
[21410, 21886, 21837, 21895, 21564, 21714, 21571, 21324, 21310, 21390, 21764, 21598, 21493, 21352, 21478, 21058, 20942, 20825, 21321, 20950, 21039, 21117, 20733, 20773, 20929, 20900, 20687, 20999] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T14:13:37.037

您可以对一条线[进行最小二乘拟合](http://en.wikipedia.org/wiki/Simple_linear_regression)。

```
function LineFitter()
{
    this.count = 0;
    this.sumX = 0;
    this.sumX2 = 0;
    this.sumXY = 0;
    this.sumY = 0;
}

LineFitter.prototype = {
    'add': function(x, y)
    {
        this.count++;
        this.sumX += x;
        this.sumX2 += x*x;
        this.sumXY += x*y;
        this.sumY += y;
    },
    'project': function(x)
    {
        var det = this.count * this.sumX2 - this.sumX * this.sumX;
        var offset = (this.sumX2 * this.sumY - this.sumX * this.sumXY) / det;
        var scale = (this.count * this.sumXY - this.sumX * this.sumY) / det;
        return offset + x * scale;
    }
};

function linearProject(data, x)
{
    var fitter = new LineFitter();
    for (var i = 0; i < data.length; i++)
    {
        fitter.add(i, data[i]);
    }
    return fitter.project(x);
} 
```

**例子：**

```
>>> linearProject([
        21410, 21886, 21837, 21895, 21564, 21714, 21571, 21324, 21310, 21390,
        21764, 21598, 21493, 21352, 21478, 21058, 20942, 20825, 21321, 20950,
        21039, 21117, 20733, 20773, 20929, 20900, 20687, 20999
    ], 60);
19489.614121510676 
```

* * *

对平方多项式做类似的事情要复杂一些：

```
function SquareFitter()
{
    this.count = 0;
    this.sumX = 0;
    this.sumX2 = 0;
    this.sumX3 = 0;
    this.sumX4 = 0;
    this.sumY = 0;
    this.sumXY = 0;
    this.sumX2Y = 0;
}

SquareFitter.prototype = {
    'add': function(x, y)
    {
        this.count++;
        this.sumX += x;
        this.sumX2 += x*x;
        this.sumX3 += x*x*x;
        this.sumX4 += x*x*x*x;
        this.sumY += y;
        this.sumXY += x*y;
        this.sumX2Y += x*x*y;
    },
    'project': function(x)
    {
        var det = this.count*this.sumX2*this.sumX4 - this.count*this.sumX3*this.sumX3 - this.sumX*this.sumX*this.sumX4 + 2*this.sumX*this.sumX2*this.sumX3 - this.sumX2*this.sumX2*this.sumX2;
        var offset = this.sumX*this.sumX2Y*this.sumX3 - this.sumX*this.sumX4*this.sumXY - this.sumX2*this.sumX2*this.sumX2Y + this.sumX2*this.sumX3*this.sumXY + this.sumX2*this.sumX4*this.sumY - this.sumX3*this.sumX3*this.sumY;
        var scale = -this.count*this.sumX2Y*this.sumX3 + this.count*this.sumX4*this.sumXY + this.sumX*this.sumX2*this.sumX2Y - this.sumX*this.sumX4*this.sumY - this.sumX2*this.sumX2*this.sumXY + this.sumX2*this.sumX3*this.sumY;
        var accel = this.sumY*this.sumX*this.sumX3 - this.sumY*this.sumX2*this.sumX2 - this.sumXY*this.count*this.sumX3 + this.sumXY*this.sumX2*this.sumX - this.sumX2Y*this.sumX*this.sumX + this.sumX2Y*this.count*this.sumX2;
        return (offset + x*scale + x*x*accel)/det;
    }
};

function squareProject(data)
{
    var fitter = new SquareFitter();
    for (var i = 0; i < data.length; i++)
    {
        fitter.add(i, data[i]);
    }
    return fitter.project(60);
} 
```

**示例 2：**

```
>>> squareProject([
        21410, 21886, 21837, 21895, 21564, 21714, 21571, 21324, 21310, 21390,
        21764, 21598, 21493, 21352, 21478, 21058, 20942, 20825, 21321, 20950,
        21039, 21117, 20733, 20773, 20929, 20900, 20687, 20999
    ], 60);
19282.85862700518 
```

我可以对更高次的多项式执行此操作，但表达式会变得更长。对于任意程度，您将不得不查看矩阵。

# javascript - 如何在 javascript 中通过 id 和 class 选择元素？

> ID：11796822
> 
> 赞同：0
> 
> 时间：2012-08-03T13:34:51.630
> 
> 标签：javascript, jquery

我想知道我们是否可以同时使用它的 id 和 class 来选择一个元素。我知道在 css 中我们可以做到这一点`#x.y`，但是如何在 javascript 中完成呢？我尝试了以下代码，它运行良好，但是所有带有 ui-slider-handle 类的控件都受到了影响（这很明显）。我想我需要一个 id 和 class 的组合，这样只有那个特定的元素会受到影响。

**Javascript**：

```
$(".ui-slider-handle").text(ui.value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:36:39.097

用于选择元素的 ID 和类的组合是没有用的，因为 ID 是唯一的。

**一页中**永远不会有多个具有相同值的标识符！****

 **如果您想要多个具有相同属性的元素，请使用一个类。如果没有，请考虑一个 ID 或一个类。

如果您希望有很多元素具有相同的属性，但其中一个具有额外的属性，您可以给那个元素一个 ID 并为该 ID 分配额外的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:36:55.540

由于 id 应该是唯一的，因此您应该能够仅通过 id 进行选择器。如果想要将相同的属性应用于多个元素，那么您应该使用一个类。在您的情况下，您似乎只需像这样使用 id 就可以了：

```
$("#id").text(ui.value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:40:42.513

您永远不需要这样做，因为 ID 是唯一的；如果您知道，您已经可以识别该元素。

你的问题实际上是你的选择器匹配了太多的元素。还有其他方法可以限制选择器的“范围”：

1.  添加具有特定 ID/类的父元素：`.parent .ui-slider-handle`仅匹配属于该类`ui-slider-handle`的所有元素的子类的元素`parent`

2.  您还可以按父类型限制：`div .ui-slider-handle`

3.  或者只有直接的孩子：`div > .ui-slider-handle`

[请参阅 jQuery 选择器了解所有好东西](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T13:38:46.137

你可以写的是：

```
$("#ID.ui-slider-handle").text(ui.value); 
```

引号内的字符串是一个普通的 CSS 选择器，它支持类和 id。但是，上面的代码是多余且缓慢的，除非您只想选择具有特定类的特定 id，否则最好这样编写：

```
$("#ID").text(ui.value); 
```**

# javascript - node-mysql connection.query() 返回未定义

> ID：11796823
> 
> 赞同：4
> 
> 时间：2012-08-03T13:34:59.067
> 
> 标签：javascript, node.js, return, undefined, node-mysql

我正在使用基于[einaros/ws](https://github.com/einaros/ws)构建的节点 ws 服务器。该服务器必须向数据库发送查询。为此，我正在使用[felixge/node-mysql](https://github.com/felixge/node-mysql)。

当用户连接到服务器时，应该检查客户端是否仍然存在于数据库中。

这是一段有趣的代码：

```
console.log("client-liste ist leer");
var query = "SELECT name FROM spieler WHERE name='"+id+"' AND passwort='"+passwort+"'";
var result = queryToDatabase(query);
console.log(getTime() + "DB-Result Abfrage: " + result); 
```

以及完成查询的代码：

```
var mysql = require('mysql');
var mysqlConnection = mysql.createConnection({
    host: dbHost,
    user: dbUser,
    password: dbPassword,
});

function queryToDatabase(anfrage) {
    mysqlConnection.connect();

mysqlConnection.query("USE " + db, function(err, rows, fields) {
    if (err) throw err;
});

mysqlConnection.query(anfrage, function(err, rows, fields) {
        if (err) throw err;
        console.log("rows as String - " + JSON.stringify(rows));
        return rows;

    });

    mysqlConnection.end();
} 
```

控制台中的日志是：

client-liste ist leer
3.8.2012 - 15:29:0 - DB-Result Abfrage: undefined
rows as String - [{"name":"lukas"}]

有谁明白，为什么函数返回未定义？我还尝试通过简单的 setTimout 等待 Database-Connection 完成，但没有任何改变！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:25:01.617

You can't return a value from an asynchronous callback like the one used by `query`. You need to rewrite queryToDatabase so it takes a callback as its second argument and calls it with `rows` when the query is successful. Then your main code needs to look like:

```
queryToDatabase(query, function(result) {
     console.log(getTime() + "DB-Result Abfrage: " + result);
   }); 
```

In reality, all your code that depends on the query result will need to go into that callback.

In practice, you'd want the callback to take two arguments: an **error status** and a **result**, with the error status being `null` if the query was successful.

# java - 使用 Java 生成 .ov2 文件

> ID：11796824
> 
> 赞同：2
> 
> 时间：2012-08-03T13:35:05.373
> 
> 标签：java, php, tomtom

我试图弄清楚如何创建一个 .ov2 文件以将 POI 数据添加到 TomTom GPS 设备。数据的格式需要如下：

OV2 文件由 POI 记录组成。每条记录具有以下数据格式。

*   1 BYTE、char、POI 状态（'0' 或 '2'）
*   4 BYTES，长，表示 POI 记录的长度。
*   4 BYTES, long, 经度 * 100000
*   4 字节，长，纬度 * 100000
*   x BYTES，字符串，POI 的标签，x =3D=3D 总长度 =96 (1 + 3 * 4)
*   终止空字节。

我发现以下 PHP 代码应该采用 .csv 文件，逐行浏览它，拆分每条记录，然后以适当的格式将其写入一个新文件。我希望有人能帮我把它翻译成 Java。我真的只需要我用'--->'箭头标记的行。我根本不了解 PHP，但除了这一行之外的所有内容都足够基本，我可以查看并翻译它，但我不知道 PHP 函数在那一行上做了什么。即使有人可以很好地解释它，那么也许我可以用 Java 弄清楚。如果您可以直接翻译，请这样做，但即使是解释也会有所帮助。谢谢。

```
<?php 
$csv = file("File.csv"); 
$nbcsv = count($csv); 
$file = "POI.ov2"; 
$fp = fopen($file, "w"); 
for ($i = 0; $i < $nbcsv; $i++) { 
    $table = split(",", chop($csv[$i])); 
    $lon = $table[0]; 
    $lat = $table[1]; 
    $des = $table[2]; 
    --->$TT = chr(0x02).pack("V",strlen($des)+14).pack("V",round($lon*100000)).pack("V",round($lat*100000)).$des.chr(0x00); 
    @fwrite($fp, "$TT"); 
} 
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:43:13.813

将文件加载到数组中，其中每个元素都是文件中的一行。

```
$csv = file("File.csv"); 
```

计算数组中元素的数量。

```
$nbcsv = count($csv); 
```

打开输出文件进行写入。

```
$file = "POI.ov2"; 
$fp = fopen($file, "w"); 
```

虽然`$i`< 数组项的数量，`$i++`

```
for ($i = 0; $i < $nbcsv; $i++) { 
```

右修剪行（删除所有空格），并用'，'分割字符串。`$table`是来自 csv 行的值数组。

```
 $table = split(",", chop($csv[$i])); 
```

通过数字索引将表的组成部分分配给它们自己的变量。

```
 $lon = $table[0]; 
    $lat = $table[1]; 
    $des = $table[2]; 
```

棘手的一点。

chr(02) 字面意思是字符代码号 2。 `pack`是二进制处理函数。它需要一种格式和一些数据。 `V`= unsigned long（始终为 32 位，[小端](http://en.wikipedia.org/wiki/Endianness)字节序）。

我确定您可以计算出数学位，但您需要将它们转换为[小端](http://en.wikipedia.org/wiki/Endianness)序的 32 位值。

`.`是一个字符串连接运算符。

最后它以 chr(0) 结束。空字符。

```
$TT = chr(0x02).
  pack("V",strlen($des)+14).
  pack("V",round($lon*100000)).
  pack("V",round($lat*100000)).
  $des.chr(0x00); 
```

写出来并关闭文件。

```
 @fwrite($fp, "$TT"); 
} 
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T10:51:19.797

JAVA 中的关键是将正确的字节顺序 ByteOrder.LITTLE_ENDIAN 应用于 ByteBuffer。

整体功能：

```
private static boolean getWaypoints(ArrayList<Waypoint> geopoints, File f)
{
try{
FileOutputStream fs = new FileOutputStream(f);

for (int i=0;i<geopoints.size();i++)
{

     fs.write((byte)0x02);
     String desc = geopoints.get(i).getName();

     int poiLength = desc.toString().length()+14;
     fs.write(ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(poiLength).array());

     int lon = (int)Math.round((geopoints.get(i).getLongitudeE6()/1E6)*100000);
     fs.write(ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(lon).array());        

     int lat = (int)Math.round((geopoints.get(i).getLatitudeE6()/1E6)*100000);
     fs.write(ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(lat).array());

     fs.write(desc.toString().getBytes());

     fs.write((byte)0x00);

}

    fs.close();

    return true;

}
catch (Exception e)
{
    return false;
}

} 
```

# java - 如何在java中将地图转换为二维数组？

> ID：11796825
> 
> 赞同：3
> 
> 时间：2012-08-03T13:35:08.273
> 
> 标签：java, map, arraylist

我想将 Map 的所有键/值添加到二维数组。

**有没有人知道更好的方法？** 我做了如下，但我寻找更好的方法。

```
 Map<String, String> memoMap = AvoCollection.getMemoMap();
    String[][] data = new String[memoMap.size()][2];
    int ii =0;
    for(Map.Entry entry : memoMap.entrySet()){
        data[ii][0] = entry.getKey().toString();
        data[ii][1] = entry.getValue().toString();
        ii++;
    }
    final DefaultTableModel model = new DefaultTableModel(data,new String[]{"Memo","ID"}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T13:38:12.590

这可能会稍微好一点，但不会好很多：

```
Map<String,String> memoMap = AvoCollection.getMemoMap();
String[][] data = new String[memoMap.size()][];
int ii =0;
for(Map.Entry<String,String> entry : memoMap.entrySet()){
    data[ii++] = new String[] { entry.getKey(), entry.getValue() };
}
final DefaultTableModel model = new DefaultTableModel(data,new String[]{"Memo","ID"}); 
```

声明后`Map.Entry<String,String>`可以停止调用`toString`；您还可以使用聚合创建一个二元素数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:43:50.197

你愿意使用谷歌的番石榴图书馆吗？[http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)。然后，您可以尝试使用 MultiMap，它将返回键和值的集合，这些键和值可以轻松转换为数组。尝试查看这个库，它有很多很酷的功能。

# android - android中选择可用连接的默认优先级是什么？

> ID：11796826
> 
> 赞同：2
> 
> 时间：2012-08-03T13:35:10.487
> 
> 标签：android

我想知道 。

android设备在选择网络连接时的默认行为是什么。

例子：-

我有我的`WIFI`和`MOBILE DATA` ON。

我的设备默认选择哪个连接。

如果是选择`WIFI`/`MOBILE DATA`

那么为什么选择它，请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:44:46.247

这是给出我答案的链接。

这是完美而好的答案

[http://mobisocial.stanford.edu/news/2011/03/let-wifi-and-3g-connection-work-together-by-hacking-connectivityservice-java/](http://mobisocial.stanford.edu/news/2011/03/let-wifi-and-3g-connection-work-together-by-hacking-connectivityservice-java/)

# google-drive-api - 如何创建一个空的 Google 文档/电子表格

> ID：11796827
> 
> 赞同：3
> 
> 时间：2012-08-03T13:35:10.503
> 
> 标签：google-drive-api

创建空的 Google 文档/电子表格的最佳方法是什么？我现在正在使用 GData 文档/电子表格 API，但我更喜欢使用 Drive API。是否有一个 mimetype 会创建一个空的 Google Doc/Google 电子表格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T23:51:16.507

As Claudio mentioned in the comment, you can see the list of the supported MIME types in the other question. In practice, its very easy to create a blank doc. For example:

```
POST https://www.googleapis.com/drive/v2/files

{
'title' : 'My new document',
'mimeType':'application/vnd.google-apps.document'
} 
```

# javascript - Javascript Ajax 重新初始化

> ID：11796836
> 
> 赞同：0
> 
> 时间：2012-08-03T13:35:42.380
> 
> 标签：javascript, jquery, ajax, url-routing

我有一个 Web 应用程序，我正在转向基于 Ajax 的工作流。目前，我使用自己的基于页面 url 的路由机制加载我的 Javascript。为了跟踪 Ajax 的“页面”，我使用了哈希标签。我遇到的问题是如何在内容更改时重新初始化页面？我可以重新运行我的路由机制，但我不想意外地重新创建和重新附加现有事件。我认为在理想的解决方案中，我会在 Ajax 完成后对所有事件执行全局清理并重新初始化整个 Javascript。这样，我就不必担心元素是否消失或它是否已附加到事件或类似情况。

这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:37:23.670

您可以使用 jQuery 的 hashchange 事件：

```
$.on("hashchange", init); 
```

作为`init`您的路由功能或初始功能。

这是我使用的示例：

```
function route() {
    var loc = (location.hash && location.hash.split("#")[0]) || location.pathname;

    if (loc.search("profile") !== -1) {
        // do profile page stuff
    }
    if (loc.search("home") !== -1) {
        // do home stuff
    }
}

$.on("hashchange", route); 
```

# visual-studio - Web 部署任务失败。无法连接...服务器没有响应

> ID：11796838
> 
> 赞同：80
> 
> 时间：2012-08-03T13:35:51.143
> 
> 标签：visual-studio, iis, deployment, msdeploy, webdeploy

我一直使用 Visual Studio 2012 RC 将我的 Lightswitch 应用程序发布到我的本地主机（Win 7、SQL 2008 R2、IIS 7.5）就好了。现在我正在尝试发布到远程服务器（Win 2008 R2、SQL 2008 R2、IIS 7.5），但遇到了麻烦。

当我尝试发布时，我收到以下错误：

> Web 部署任务失败。（无法使用指定的进程（“Web 部署代理服务”）连接到远程计算机（“###.###.###.###”），因为服务器没有响应。请确保进程（“Web 部署代理服务”）在远程计算机上启动。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC) ?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC 。）

我已经检查了“了解更多”链接建议检查的每一件事。我已经验证 MsDepSvc 和 WMSVC 都在运行，并且端口 80 和 8172 都在响应端口扫描。在发布设置中，对于服务 URL，我使用远程计算机的 IP 地址 ( [http://###.###.###.###](http://###.###.###.###) )。对于用户名，我使用的是 DomainName\Administrator，这是我使用 RDP 登录时使用的名称。

我在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/19197323-6d97-4252-a2c3-c34ebdaf0f46/)上发帖，其中一位成员建议我将 Web 部署工具从 V2.0 回滚到 V1.1。我已经完成了，但它没有改变任何东西。

按照这个[SO Question](https://stackoverflow.com/questions/6188418/problem-using-web-deploy-with-iis-6)的答案中的建议，我尝试`msdeploy`从命令行运行。

从***服务器***上的命令行我得到：

> C:\Program Files\IIS\Microsoft Web 部署>msdeploy -verb:dump -source:dirpath=c:\temp,computername= [http://SeverName:80/msdeployagentservice,username=Administrator,password=XXXX](http://SeverName:80/msdeployagentservice,username=Administrator,password=XXXX) -verbose -debug详细：使用 ID 'c12c3392-2290-44b7-9434-dbd0ff5f9385' 连接到远程服务器。[详细：以“管理员”身份对远程代理 URL“ http://ServerName:80/msdeployagentservice](http://ServerName:80/msdeployagentservice) ”进行预身份验证。MSDeploy.dirPath (name=MSDeploy.dirPath) c:\temp (name=dirPath) (keyAttribute=c:\temp) (linkName=Child1)

从***开发机器***上的命令行我得到：

> C:\Program Files\IIS\Microsoft Web Deploy V3>msdeploy -verb:dump -source:dirpath =c:\temp,computername= [http://###.###.###.###: 80/msdeployagentservice,username=Administrator,password=XXXX](http://###.###.###.###:80/msdeployagentservice,username=Administrator,password=XXXX) -verbose -debug 信息：使用 ID '7f0b7d5b-e202-424c-a7dd-246920253081' 连接到远程服务器。[详细：以“管理员”身份对远程代理 URL“ http://###.###.###.###:80/msdeployagentservice](http://###.###.###.###:80/msdeployagentservice) ”进行预身份验证。详细：预验证远程代理 URL ' [http://###.###.###.###:80/msdeployagentservice](http://###.###.###.###:80/msdeployagentservice)'作为'管理员'。错误代码：ERROR_COULD_NOT_CONNECT_TO_REMOTESVC 更多信息：无法使用指定的进程（“Web 部署代理服务”）连接到远程计算机（“###.###.###.###”），因为服务器没有回应。确保进程（“Web 部署代理服务”）已在远程计算机上启动。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC) ?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC 。了解更多信息：http: [//go.microsoft.com/fwlink/ ?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC). ---> Microsoft.Web.Deployment.DeploymentException：无法创建“dirPath”类型和路径“c:\temp”的对象。---> System.Net.WebException：远程服务器返回错误：（400）错误请求。在 System.Net.HttpWebRequest.GetResponse() 在 Microsoft.Web.Deployment.AgentClientProvider.GetHttpResponse(HttpWebRequest request) --- 内部异常堆栈跟踪结束 --- --- 内部异常堆栈跟踪结束 --- 在 Microsoft .Web.Deployment.DeploymentManager.CreateObjectPrivate(DeploymentProviderContext providerContext, DeploymentBaseOptions baseOptions, DeploymentObject sourceObject, String serverVersion) 在 Microsoft.Web.Deployment.DeploymentManager.CreateObject(DeploymentProviderOptions providerOptions, DeploymentBaseOptions baseOptions) 在 MSDeploy.MSDeploy。
> 在 MSDeploy.MSDeploy.Main(String[] usedArgs) 错误计数：1。

使用 Wireshark，我发现我可以正常登录，但在`POST /MSDEPLOYAGENTSERVICE`出现错误 400：错误请求后，如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">\r\n
<HTML><HEAD><TITLE>Bad Request</TITLE>\r\n
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>\r\n
<BODY><h2>Bad Request - Invalid Content Length</h2>\r\n
<hr><p>HTTP Error 400\. There is an invalid content length or chunk length in the request.</p>\r\n
</BODY></HTML>\r\n 
```

我能找到的唯一提到此特定行为的是[Microsoft 支持](http://support.microsoft.com/kb/300707)ISA Server 2000 的文章。

我还应该看什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-10-08T10:10:57.050

当我使用“Web Platform Installer 5.0”安装 Web Deploy 3.5 时，我遇到了同样的问题

当我尝试从 Visual Studio 发布时，出现此错误：

```
---------------------------
Microsoft Visual Studio
---------------------------
Could not connect to the remote computer ("10.0.3.102") using the specified process 
("Web Management Service") because the server did not respond. Make sure that the process 
("Web Management Service") is started on the remote computer.  Learn more at: 
http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC. 
The remote server returned an error: (403) Forbidden.
---------------------------
OK   
--------------------------- 
```

我仔细检查了服务，两者都在运行。我也关闭了防火墙，仍然是同样的错误。

我是如何解决这个问题的：

1.  打开“添加或删除”程序
2.  单击“Microsoft Web 部署”
3.  单击“更改”按钮（“卸载”除外）
4.  点击“下一步”

![在此处输入图像描述](../Images/13653b60b9a679f14a22f6bbb52ecb85.png)

5.  点击“更改”

![在此处输入图像描述](../Images/b78b53f172b2be4a7dc921bf3120429d.png)

6.  添加标记为红色 X 的功能

![在此处输入图像描述](../Images/ae094d5fd4048892a4e3995e77d5dd20.png)

7.  完成安装

    **结果**：从 Visual Studio 发布工作正常

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-05-31T15:01:53.113

我昨天遇到了这个。在我的场景中，它完全归结为它要求`Site Name:`我提供的发布设置`MyApplication`。当它真的希望我提供：

```
Default Web Site/MyApplication 
```

我向 Microsoft 部署团队提出了这个问题，因此希望他们能够清楚地说明，如果您不指定现有站点名称，那么 Web 部署服务器不会像您所想的那样死机。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-27T09:51:16.967

我遇到了同样的问题，并通过删除程序文件（x86）\IIS 和 Program Files\IIS 中的所有 Web 部署文件夹来解决它。

之后，我重新安装了没有捆绑 SQL 的 web deploy 1.1 和 web deploy 3.0。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-07-20T14:44:04.620

使用来自多个论坛和答案的信息，我终于设法安装了 Microsoft 的 Web Deploy，我可以使用它成功地从 Visual Studio 发布（在没有激活防火墙的情况下进行测试）：

1.  使用服务器管理器中的“添加角色功能”为 IIS 安装“管理服务”
2.  安装 Web 部署（重要提示：“完成”并在安装“管理服务”之后） [http://www.iis.net/downloads/microsoft/web-deploy#additionalDownloads](http://www.iis.net/downloads/microsoft/web-deploy#additionalDownloads)

3.  确保在服务器级别的 IIS 中

    *   打开“管理服务”
    *   允许 Windows 和 IIS 凭据
4.  在站点级别的 IIS 中
    *   打开“IIS 管理器权限”
    *   添加用于实际发布的用户，例如管理员

如果防火墙处于活动状态：启用“文件共享”和“远程服务管理”

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-02T03:33:10.037

为了解决这个问题，我使用了以下步骤：服务器：WS2012。DEV Vs2012 项目 MVC4。

1) 在需要名称的服务器上创建空站点，或者在发布时使用“默认网站”，如果您没有将默认值重命名为其他名称。

[我使用了此链接中的信息](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)

在使用 WPI 的服务器上安装以下

> 为托管服务器安装 Web Deploy (3.5)
> 
> 为 Web 托管服务提供商推荐的服务器配置

我确保没有安装其他版本

所以验证您正在使用的站点名称....我使用 AdminUI。这是在测试服务器上创建的空站点

![站点名称很重要。](../Images/dd6d5c2e524f7134f65e285708f9b0dc.png)

所以在使用向导时，匹配站点名称

![发布向导](../Images/b8bd28d3ad4ee91d62f50f5ad3ba483e.png)

确保相关**服务正在**服务器上运行。并且您有**足够的权限写入网站**

![服务](../Images/12715407b376180573b30d90a8245f66.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-11T07:46:18.967

我已经设法通过重新启动 Web 管理服务在我的服务器上解决了这个问题

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-07-17T15:41:34.097

Chris 说的是：“当它真的希望我提供‘默认网站/我的应用程序’时。” 实际单词“默认网站”，而不是您的服务器的名称。

我也有这个，花了几个小时把我的头撞在墙上，直到我尝试这个。（谢谢克里斯！）

FWIW，我使用的是默认网站的名称（服务器名称），而不是您显然必须使用的“默认网站”一词。有点蹩脚，但至少我现在知道了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-07T01:57:55.420

检查管理服务是否有任何 IP 地址限制也是一个好主意 - 这些限制与 Windows 防火墙是分开的。

[![窗口管理服务](../Images/93b38084d24b26a476343d5c72165962.png)](https://i.stack.imgur.com/RGLGR.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-28T08:20:16.743

我有同样的问题。最后通过在服务 URL 中更改为 https 来解决它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-24T15:47:15.617

Web 部署任务失败。（无法连接到远程计算机。）

就我而言，我不得不重新启动远程机器上的 Web 部署代理服务。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-19T14:49:23.147

我`ERROR_COULD_NOT_CONNECT_TO_REMOTESVC`今天也浪费了几个小时来处理这个错误（），有趣的是我能够使用构建的 gui 进行部署`Properties/PublishProfiles/<Profile>.pubxml`（通过`right click on project -> Publish... -> create via wizard`）。

然而，就我而言，我不小心弄乱了这个`<DeployIisAppPath>`属性。这需要指向`SiteName`而不是`ApplicationPool/SiteName`。这是我`*.csproj`文件中的完整块：

```
<Project ...>
...
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'DEV-Deploy|AnyCPU'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>x64</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
    <DeployIisAppPath>HERE GOES THE SITE NAME ONLY</DeployIisAppPath>
  </PropertyGroup>
...
</Project> 
```

因此，如果您将 SiteName 配置为 Foo，则该配置块的最后一部分将是`<DeployIisAppPath>Foo</DeployIisAppPath>`.

此外，[IIS 站点上有关错误代码](http://www.iis.net/learn/publish/troubleshooting-web-deploy/web-deploy-error-codes)的全部信息从未真正有帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-17T13:03:17.490

我在这里尝试了所有其他流行的解决方案，但没有一个对我有用。 **:** (

我首先安装了“ ***Web Deploy 3.6 without bundled SQL support*** ”。
***然后***是“ ***Web 托管服务提供商的推荐服务器配置***”。
我想，“*我不需要所有的 SQL 支持*”。
我无法通过 Visual Studio 发布配置文件上的“*验证连接*”，而没有看到与上述提问者文档相同的错误。

我在某处读到卸载和重新安装 Web Deploy 将如何修复它，所以我打开“*程序和功能*”，找到“ ***Microsoft Web Deploy 3.6*** ”，然后将其卸载。
它给了我关于其他人连接到系统的警告，但我很绝望。

卸载后，我打开IIS，点击我的服务器节点，然后在“*管理*”部分下打开“ *Web Platform Installer* ”，这次安装了“ ***Web Deploy 3.6*** ”（这是我通常安装的，而不是没有SQL的那个）支持）。
然后我终于能够通过 Visual Studio 验证来自本地计算机的连接。

它可能与我安装的 Web Deploy 版本无关。
我读到这些东西对安装这些工具和建议的顺序有多么挑剔。
我认为这是因为做了一些不正常的事情（比如在 Web 部署***之后***安装推荐的服务器配置，而不是事先安装），但现在一切都很好。

以下是在 IIS 8.0 上安装 Web Deploy 时需要遵循的一些有用说明的链接：
[https ://docs.microsoft.com/en-us/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy -on-iis-80 或更高版本](https://docs.microsoft.com/en-us/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-09-17T15:13:56.457

AWS EC2 实例上的同样问题。

1.  导航到**EC2 实例**，选择相应的实例并在**描述**部分复制**安全组**名称

[![在此处输入图像描述](../Images/f8aff930efd6e8686d70dbf0e2d3c003.png)](https://i.stack.imgur.com/vv9sb.png)

2.  导航到**安全组**并选择相应的安全组，**如果缺少，请添加以下****输入**规则

 **[![在此处输入图像描述](../Images/7c332798186e50fe8124f28be91cc225.png)](https://i.stack.imgur.com/ppIEM.png)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-09-19T21:25:10.887

我有另一种情况，这突然停止为我工作。

这是因为我在管理服务中指定了 IP 地址限制，而我的 ISP 为我分配了一个新 IP。我忘了我指定了。

1.  打开 IIS 管理器
2.  单击左侧树中的服务器名称
3.  在功能视图中，选择“管理服务”
4.  停止右侧面板上的管理服务
5.  在 IP 地址限制下添加新 IP 并删除旧 IP
6.  应用更改并再次启动服务
7.  使用以下步骤更新服务器文档的故障排除部分 :)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-08-17T15:27:31.193

请安装最新版本的 Microsoft Web 部署工具。您可以使用以下链接。 [https://www.iis.net/downloads/microsoft/web-deploy](https://www.iis.net/downloads/microsoft/web-deploy)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-09-07T15:14:31.663

我在`Visual Studio 2022`.

> 错误 Web 部署任务失败。（无法连接到远程计算机（“<>.scm.azurewebsites.net”）。确保在远程计算机上安装了 Web Deploy 并启动了所需的进程（“Web 管理服务”）。了解更多在： [https://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE。](https://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE.)）请求的资源不存在，或者请求的 URL 不正确。错误详细信息：无法连接到远程计算机（“<>.scm.azurewebsites.net”）。在远程计算机上，确保安装了 Web Deploy 并且启动了所需的进程（“Web 管理服务”）。了解更多信息： [https ://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE](https://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE). 远程服务器返回错误：(404) Not Found。Intranet.Hub.Admin

真正的问题是我在创建 Web 应用程序后立即开始发布。因此，在从 Azure Web 应用程序下载发布配置文件并将其上传到 Visual Studio 之前，最好等待几分钟。

如果您仍然遇到同样的问题，请将 Application settings 的值更改`WEBSITE_WEBDEPLOY_USE_SCM`为`false`，下载发布配置文件，将其上传到 Visual Studio，然后发布。

您还可以将[Web 部署部署](https://azure.microsoft.com/en-us/blog/web-deploy-as-a-site-extension/)为 Azure Web 应用程序中的站点扩展。我无法做到这一点，因为我使用的是 Linux Azure Web 应用程序，站点扩展选项是灰色的。该功能[尚未为 Linux 提供](https://social.msdn.microsoft.com/Forums/azure/en-US/cac05673-eeb7-46d5-968d-24f00674bc97/why-is-extensions-grayed-out-on-my-wep-app-linux-resource-in-portal-ui?forum=windowsazurewebsitespreview)。

[![在此处输入图像描述](../Images/e7774779c390d5750625d823fd8cda83.png)](https://i.stack.imgur.com/sizGi.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-25T08:56:15.783

这个错误`ERROR_COULD_NOT_CONNECT_TO_REMOTESVC`花了我两天时间才弄清楚，就我而言，站点名称不匹配。远程 IIS 服务器上的站点名称与我在 Visual Studio 中为部署设置的站点名称不同。我希望它可以帮助某人

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-06-09T19:53:40.330

我有类似的问题“ERROR_COULD_NOT_CONNECT_TO_REMOTESVC”，我去了 IIS -> 您的网站 -> 高级设置，发现“物理路径凭据”中有我的用户名。我将其删除，并且 wed 部署开始工作。

还要确保从 VS 部署时，在下一个字段中使用没有端口号和站点名称的“localhost”。

我放了端口，它也因ERROR_DESTINATION_NOT_REACHABLE而失败。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-06-13T06:11:13.297

确保允许到端口 8172 的流量。在我的 NSG 上添加入站规则解决了它。

![在此处输入图像描述](../Images/d95051f4ba277cfc502c27c216bbae5e.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-07-22T18:54:32.737

Also, ensure the Remote Procedure Call (RPC) Locator service is started.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-12-19T03:08:08.517

从 Visual Studio 2013 中的向导发布时，我通过在站点名称文本框中输入“默认网站”一词解决了这个问题

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-05-15T12:29:40.417

I also got this working by uninstalling all Web Deploys, and then only install Web Deploy 2.0.

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-05-08T18:28:22.697

只需从[http://SeverName:80/msdeployagentservice](http://SeverName:80/msdeployagentservice)中删除 http:// 。也尝试只使用 ServerName。我遇到了这个问题，只需删除 http://

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-06-30T11:48:30.223

我在visual studio的**连接窗口**中设置了在iis的**Config Web Deploy**中使用的用户名和密码，它对我来说很好......

 *** * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-01-30T10:46:39.140

就我而言，未安装 Web 部署工具。在 Web 平台安装程序中安装它后，它为我工作。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-12-16T12:48:27.433

我已经尝试了大多数建议的答案，但没有解决问题。但是，这是我的解决方案：

1-关闭 FTP 连接（如果有）

2-使用更快的连接，使用慢速 wifi 会导致此问题

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-07-12T03:25:18.420

检查 TLS 不匹配。我们使用 SchUseStrongCrypto 注册密钥在一台机器上强制使用 TLS 1.2，而不是在另一台机器上。在此处记录更多详细信息[https://fuseit.zendesk.com/hc/en-us/articles/360000328595](https://fuseit.zendesk.com/hc/en-us/articles/360000328595)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-01-18T08:46:14.717

还要确保 IIS 中存在具有您在“站点名称”字段下提供的名称的网站。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-12-06T05:04:21.940

显然对我有用的只是重新启动我的视觉工作室/重新启动我的计算机并通过重新发布我的网络应用程序来重新部署。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-04-24T14:41:34.633

我在尝试将网站发布到 azure app 服务时遇到了同样的问题。
就我而言，我为一个新网站创建了一个虚拟路径，出于某种与主题无关的原因，我从应用服务中删除了该虚拟路径。
我再次创建了它，**但**忘记了 Azure 门户中的新闻**保存**。
结果是该错误，
当然，这是通过再次创建此虚拟路径而不忘记保存来解决的。

为了更清楚，最后一个虚拟路径不存在：
[![在此处输入图像描述](../Images/152303a556a2ec4fb00573a61277f2f5.png)](https://i.stack.imgur.com/eYf25.png)

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2022-02-18T09:12:21.477

如果您已经安装了 web deploy，只需检查其相关服务是否正在运行

[![在此处输入图像描述](../Images/e13f95f36771b18d150efdbd848ad0aa.png)](https://i.stack.imgur.com/hZFZv.png)

如果其中一个停止，您将收到此类错误

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2018-03-01T05:29:47.670

我在发布一组选择性文件时遇到了同样的问题。我只是选择了所有要发布的文件，然后成功发布。****

# javascript - 格式化 RSS 源 pubDate

> ID：11796843
> 
> 赞同：2
> 
> 时间：2012-08-03T13:36:16.930
> 
> 标签：javascript

我正在尝试将 rss 提要的日期格式化为月/日/年（2012 年 8 月 3 日）。我正在使用以下代码执行此操作：

```
// pubDate
postDate = new Date("Fri Aug 03 2012 06:08:11 GMT-0700");
// reformat pubDate
pubDate = postDate.getMonth() + "/" + postDate.getDate() + "/" + postDate.getFullYear();
// return pubDate
console.log(pubDate + " pubDate"); 
```

使用我当前的代码，输出是 2012 年 7 月 3 日，但月份不正确。我得到 7 而不是 8。如何让它产生正确的月份？

演示：http: [//jsfiddle.net/LmZMX/](http://jsfiddle.net/LmZMX/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:38:08.800

[getMonth()](http://www.w3schools.com/jsref/jsref_getmonth.asp)返回“一个数字，从 0 到 11，代表月份”

```
(postDate.getMonth() + 1) 
```

# javascript - 为什么 !x 将 1 和 0 更改为 true / false

> ID：11796849
> 
> 赞同：2
> 
> 时间：2012-08-03T13:36:36.917
> 
> 标签：javascript, jquery

所以这是我的示例代码 - [http://jsfiddle.net/JRqq3/](http://jsfiddle.net/JRqq3/)。

它输出真/假而不是 0/1 为什么会这样？

代码 -

```
x = 1;
for(i = 0; i < 20; i++) {
    x = !x;    
    $("body").append(x+"<br />");
}​ 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T13:38:20.000

因为！运算符在完成其工作时将值强制为布尔值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-03T13:38:55.963

因为“！” 运算符将变量的类型转换为 bool。你可能想做：

```
for (let i = 1; i <= 20; ++i) {
    $("body").append( String(i % 2) + '<br />');
}​ 
```

这里发生了什么事？`%`是模除法运算符。`i % 2`意思是“除以`i`2 并返回**余数**”。

`i % 2`始终为 1 或 0（除以 2 的余数始终为 0 或 1）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T13:38:31.317

因为通过评估`x = !x;`，您将类型更改为布尔值而不是整数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T13:39:15.587

因为否定运算符**！**.

如果参数为真，它将返回假，反之亦然。

在这种情况下，首先将 0 转换为 false，然后将 1 转换为 true。然后这些值将被否定。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-03T13:43:15.430

`!`是一个[布尔逻辑运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)，将返回一个布尔值。要将`true`/转换`false`回`1`/ `0`，您可以使用[一元运算`+`符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)：

```
x = 1;
for(i = 0; i < 20; i++) {
    x = +!x;    
    $("body").append(x+"<br />");
}​ 
```

但是，@Miszy 对`mod 2` [运营商](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.25_%28Modulus%29)的回答更加优雅简洁。

# javascript - CKEditor选项startupMode导致js报错

> ID：11796861
> 
> 赞同：0
> 
> 时间：2012-08-03T13:37:03.997
> 
> 标签：javascript, ckeditor

几个小时以来，我一直试图找出这段代码有什么问题。双击 div 后 CKEditor 正确打开并按下按钮后正确隐藏。但是在再次单击 div 后，它不想再次打开，然后 firebug**在 ckeditor.js 的第 86 行返回错误“p is null”**。

最后，当我关闭选项**"startupMode: 'source'"**时，问题消失了。有谁知道这种行为是由什么引起的？这是 CKEditor 中的错误还是我做错了什么。我使用的 CKEditor 版本是 3.6.4。提前感谢您的帮助！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="js/admin/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
</head>

<body>
<h2>Vars</h2> 

<table>
    <tbody>
        <tr>
            <td>Cell no 1.1</td>
            <td><div class="editable" id="cell1">Cell no 1.2</div></td>
        </tr>
        <tr>
            <td>Cell no 2.1</td>
            <td><div class="editable" id="cell2">Cell no 2.2</div></td>
        </tr>
    </tbody>
</table>
<input type="submit" id="submit" value="Close"/>

<script type="text/javascript">

editor = false; 

function destroy_cke() {
    if (editor) {
        editor.updateElement();
        editor.destroy();
    }
}

function replace_div(div) {
    destroy_cke();
    editor = CKEDITOR.replace(div,{
        startupMode: 'source',
    });
}
$(document).ready (function() { 
    $('.editable').dblclick(function(e) {
        e.stopPropagation();
        var element = e.target || e.srcElement;
        while (element.nodeName.toLowerCase() != 'html' && (element.nodeName.toLowerCase() != 'div' || element.className.indexOf('editable') == -1 )) element = element.parentNode;
        replace_div(element);
    });

    $('#submit').click(function(){
        destroy_cke();
    });
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:44:14.433

[在http://cksource.com/forums/viewtopic.php?f=11&t=26734&p=67792#p67792](http://cksource.com/forums/viewtopic.php?f=11&t=26734&p=67792#p67792)回答

该`destroy_cke`函数没有清除`editor`变量。

# ios - 无法从 fetchedResultsController 中删除最后一个对象

> ID：11796862
> 
> 赞同：1
> 
> 时间：2012-08-03T13:37:05.563
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我使用 NSFetchedResultsController 来填充 tableview 并且一切正常（添加、删除 ..）.. 但是每当我尝试从 tableview 中删除最后一行时（当 tablview 中只有一行时）应用程序崩溃并显示以下日志：

```
 *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037
2012-08-03 16:32:39.667 MackaWithCoreData[793:15503] CoreData: error: Serious application error.  An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.  Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (1) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null) 
```

据我所见，当委托方法尝试重新加载 tableview 时删除对象后，因为 fetchedResultsController 为空，它会导致崩溃。如何处理这个问题？提前致谢

**编辑**实现`controller controllerDidChangeContent:..`。方法如下

```
 - (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{

    switch(type)
    {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            XLog(@"the row removed from tv");

            break;

        case NSFetchedResultsChangeUpdate:
         // [self configureCell:[self.tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            XLog(@" object deleted from fetchedresultscontroller");

            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:17:01.240

几天后，我决定用不同的逻辑来解决这个问题。我首先控制`fetchedObjects`on的计数`fetchedResultsController`，如果计数大于 1，我调用数据库上的删除和保存委托，但如果计数等于 1，则只需推送到不同的 viewController。在那个 vc 上，我也会禁用导航控制器回到这个视图控制器，直到有新消息出现。当有新消息出现时，我将首先删除实体上的对象，然后添加消息..

这是一些伪代码和算法：

```
 if ([[self.fetchedResultsController fetchedObjects]count] >1) {
         callDeletionDelegateForDatabase;
      }else{
       declare a viewController object;
       pushToThatVC;
      } 
```

// 关于目标 vc 的类

```
hide_back_navigation_back_to_theViewControllerYouCameFrom;
     //when a new message comes from web service
     reset Entitiy(the property we need its value)
     show_navigation_Controller_To_theViewControllerOfMessages... 
```

我发布了这个愚蠢的伪代码来帮助面临同样情况的其他人，如果有人知道更好的方法，请写下来。下面是我的代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
     if (editingStyle == UITableViewCellEditingStyleDelete) { 
         if ([[self.fetchedResultsController fetchedObjects]count] >1) {

        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext]; 
          [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]]; 

        // Save the context. 
        NSError *error = nil; 
        if (![context save:&error]) { 
             /* 
             Replace this implementation with code to handle the error appropriately. 

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
             */ 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]); 
            abort(); 
            } 
         }else {
             BNT_DetailViewController *vc=[BNT_DetailViewController new];
             [self.navigationController pushViewController:vc animated:YES];

             XLog(@"You Cant delete this");
         }
     } 

} 
```

# javascript - ckeditor jquery 适配器设置模板路径

> ID：11796874
> 
> 赞同：0
> 
> 时间：2012-08-03T13:37:33.857
> 
> 标签：javascript, jquery, ckeditor

如何使用 jquery 适配器设置 ckeditor 模板文件？即 mytemplates.js 包含哪些 var 在 jquery 适配器配置中设置的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:01:14.173

您应该使用相同的配置条目，jQuery 适配器只是一个小包装器，引擎盖下的一切都只是普通的 CKEditor。

[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.templates_files](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.templates_files)

# regex - 在eclipse中附加到行尾

> ID：11796875
> 
> 赞同：10
> 
> 时间：2012-08-03T13:37:39.877
> 
> 标签：regex, eclipse, editor

有没有办法将字符串附加到 Eclipse 中的行尾？搜索和查找似乎可以工作，但仅使用正则表达式的`$`查找找不到任何字符串。`.$`会找到一些东西，但是运行 find replace 会删除行的最后一个字符，这是不可取的。有谁知道在 Eclipse 中实现这一点的方法？我的正则表达式是否有什么问题可能使 Eclipse 无法理解这一点，而其他编辑器（如 vim）处理得很好..（在 Vi / Vim 中`:0,$s/$/appended to end of line/`）。

当然，我不是唯一一个希望有这个功能的人......大多数其他优秀的编辑器都提供了它。这可以被认为是一个错误吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T14:41:30.047

我同意这是 eclipse 中的一个错误。我尝试了与您相同的结果。我还尝试使用正则表达式搜索字符串“(?<=.)$”来尝试忽略替换中的单个字符匹配，但这也失败了。应该能够搜索要附加的字符串结尾。

这是让它工作的技巧，

```
 Find: "(.)$"
      Replace: $1foo 
```

这将替换行尾之前的单个字符匹配并附加 foo。

这是很多箍跳，但至少它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:55:47.023

我想知道最好的选择是否是在复制变量之前在变量列表上运行 Java 程序。我不确定您从中剪切和粘贴的文件的格式，但如果它只是一个仅列出每行上的变量名称，试试这个：

```
ArrayList<String> importarray = new ArrayList<String>();
ArrayList<String> rebuildarray = new ArrayList<String>();
BufferedReader bufferedfile = new BufferedReader();

public static void main(String[] args) {
   readFile();
   processFile();
}

static void readFile() {

String file = "C:\\path\\file.txt";
try { 
    String line;
    importstart = new BufferedReader(new FileReader(file));
    for (line = importstart.readLine(); line != null; line = importstart.readLine()) {
        importarray.add (line);
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
}

 static void processFile() {
String complete = "";
for (String string : importarray) {
    complete = string + "\";";
    rebuildarray.add(complete);
}
  } 
```

添加它会提供一个带有“”的变量名数组；“最后。

或者，您可以在 String 声明中使用此数组并执行以下操作：

```
for (String variable : rebuildarray) {
final String string = variable;
doSomething(string);
} 
```

这将否定添加“;.

请注意确定这是否有点过多，甚至完全是您正在寻找的东西，但它们是一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-23T21:59:05.713

就我而言，使用 Eclipse Luna (4.4.0)，接受的解决方案不起作用。它只是替换第一行并留下其他行。但是有效（想添加一个分号）：

```
find: ^.*$
Replace: $0; 
```

# c++ - 如何使用通用功能/插槽连接到 boost::signal？

> ID：11796878
> 
> 赞同：1
> 
> 时间：2012-08-03T13:38:00.720
> 
> 标签：c++, boost, boost-bind, boost-signals2

是否可以将具有不同签名的函数连接到需要某个签名的 Boost::Signal ？

我有许多信号（具有不同的签名）并且从该模块外部我希望能够在不关心信号签名的情况下观察信号。甚至可能吗？

例子：

```
float sum(float x, float y)
{
  return x + y;
}

void signal_monitor(void)
{
  //Do something
}

boost::signal<float (float, float)> sig;

sig.connect(&print_sum);
sig.connect(/* How to connect to signal_monitor ?  */);

sig(5, 3); 
```

是否可以使用 Boost::Bind 来做到这一点？

使用的升压版本：1.46.1

如果我使用

```
sig.connect( ( boost::phoenix::bind( &signal_monitor ), 1.f ) ); // Return 1.f 
```

我收到以下错误：

```
opt/include/boost/function/function_template.hpp: In static member function ‘static R boost::detail::function::function_obj_invoker2<FunctionObj, R, T0, T1>::invoke(boost::detail::function::function_buffer&, T0, T1) [with FunctionObj = float, R = float, T0 = float, T1 = float]’:
opt/include/boost/function/function_template.hpp:913:60:   instantiated from ‘void boost::function2<R, T1, T2>::assign_to(Functor) [with Functor = float, R = float, T0 = float, T1 = float]’
opt/include/boost/function/function_template.hpp:722:7:   instantiated from ‘boost::function2<R, T1, T2>::function2(Functor, typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, int>::type) [with Functor = float, R = float, T0 = float, T1 = float, typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, int>::type = int]’
opt/include/boost/function/function_template.hpp:1064:16:   instantiated from ‘boost::function<R(T0, T1)>::function(Functor, typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, int>::type) [with Functor = float, R = float, T0 = float, T1 = float, typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, int>::type = int]’
opt/include/boost/function/function_template.hpp:1105:5:   instantiated from ‘typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, boost::function<R(T0, T1)>&>::type boost::function<R(T0, T1)>::operator=(Functor) [with Functor = float, R = float, T0 = float, T1 = float, typename boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value, boost::function<R(T0, T1)>&>::type = boost::function<float(float, float)>&]’
opt/include/boost/signals2/detail/slot_template.hpp:156:9:   instantiated from ‘void boost::signals2::slot2<R, T1, T2, SlotFunction>::init_slot_function(const F&) [with F = float, R = float, T1 = float, T2 = float, SlotFunction = boost::function<float(float, float)>]’
opt/include/boost/signals2/detail/slot_template.hpp:81:9:   instantiated from ‘boost::signals2::slot2<R, T1, T2, SlotFunction>::slot2(const F&) [with F = float, R = float, T1 = float, T2 = float, SlotFunction = boost::function<float(float, float)>]’
../../../example/example.cpp:200:61:   instantiated from here
opt/include/boost/function/function_template.hpp:132:42: error: ‘* f’ cannot be used as a function
opt/include/boost/function/function_template.hpp:133:9: error: control reaches end of non-void function [-Werror=return-type]
cc1plus: all warnings being treated as errors
make[1]: *** [example.o] Error 1 
```

非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:02:20.277

是的：

```
sig.connect( boost::bind( &signal_monitor ) ); 
```

Bind 根本不会转发参数。

编辑：正如 Luc 所提到的，由于绑定表达式不返回任何内容，这将不起作用，也许仅使用 boost bind 有不同的解决方案，但另一个是拿出大枪，`boost::phoenix`（`#include "boost/phoenix.hpp"`）：

```
sig.connect( ( boost::phoenix::bind( &signal_monitor ), 1.f ) ); // Return 1.f 
```

请注意 extra `()`，否则您仍在将参数传递给`connect`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:33:06.787

我希望禁止使用返回 void 的函数代替旨在返回 float 的函数；因为如果返回值实际用于某事，那么该值将是未定义的，因此程序的行为可能会变得不可预测。

所以我很确定做你想做的事情的唯一方法是创建一个具有正确签名的新函数，然后让该函数简单地调用你的 void 函数并返回 0。我认为在 C++11 中这将起作用：

```
sig.connect([](float, float)->float { signal_monitor(); return 0.0f; }); 
```

# java - IntelliJ可以在没有相应源代码的情况下反汇编第三方（或JDK）的java字节码吗？

> ID：11796884
> 
> 赞同：2
> 
> 时间：2012-08-03T13:38:13.330
> 
> 标签：java, intellij-idea, disassembly

我正在寻找类似于 Reflector VS 插件为 .NET 所做的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T19:25:41.683

**IntelliJ IDEA 14**带有内置的 Java 反编译器：http: [//blog.jetbrains.com/idea/2014/07/intellij-idea-14-eap-138-1029-is-out/](http://blog.jetbrains.com/idea/2014/07/intellij-idea-14-eap-138-1029-is-out/)

现在您可以从他们的官方网站下载预览版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:40:08.003

做一个快速的谷歌我发现

[http://java.decompiler.free.fr/?q=jdintellij](http://java.decompiler.free.fr/?q=jdintellij)

[http://sourceforge.net/projects/ideajad/](http://sourceforge.net/projects/ideajad/)

[http://plugins.intellij.net/plugin/?id=126](http://plugins.intellij.net/plugin/?id=126)

[http://code.google.com/p/intellijad/](http://code.google.com/p/intellijad/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:42:15.443

我知道 Netbeans 会做这样的事情 - 只需单击`.class`依赖项的文件，它就会自动完成。它不生成 Java 源代码，但注释很好地说明了简单操作的情况。

# asp.net - 显示评论asp mvc

> ID：11796887
> 
> 赞同：0
> 
> 时间：2012-08-03T13:38:22.297
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, razor

我正在开发一个 mvc .net Web 应用程序。我有一个包含困难的数据库（称为困难的表），每个困难都有评论。在我看来，我想用相应的评论和一个新评论的文本区域和一个提交它的按钮来展示每一个困难。我创建了一个模型类，其中包含难度和评论、新评论内容的字符串 var 和想要评论的人的姓名的字符串 var。我的问题是我未能提交新评论。

这是我的模型课

```
public class difficultecommentaires
{
    public difficulte diff { get; set; }
    public IList<commentaire> comms { get; set; }
    public string pseudo { get; set; }
    public string nouveau { get; set; }
} 
```

这是我提交新评论的操作方法

```
 [HttpPost]
    public ActionResult NewComment(int id_diff, string pseudo, string contenu)
    {
        difficulte d = new difficulte();
        using (BDGestionEntities bd = new BDGestionEntities())
        {
            var query = from j in bd.difficultes where (j.id_diff == id_diff) select j;
            foreach (var k in query)
                d = k;
        }
        commentaire com = new commentaire();
        com.pseudo = pseudo;
        com.difficulte= d;
        com.contenu = contenu;
        db.AddTocommentaires(com);
        db.SaveChanges();
        ObtenirDifficulte(id_diff);
        return View();
    } 
```

这是我的看法

```
 @model GestionProjet.Models.difficultecommentaires

@{
    ViewBag.Title = "ObtenirDifficulte";
}

<h2>Détails</h2>

<fieldset>
<table>
<tr><td>
    <label><b>Titre de la difficulté :</b></label></td><td>@Html.DisplayFor(m=>m.diff.titre)</td></tr>

    <tr><td>
    <label><b>Description :</b></label></td><td>@Html.DisplayFor(m=>m.diff.description)</td></tr>
    </table>
    <table>
    @foreach (var k in Model.comms)
    {

        <tr><td>@k.pseudo a dit :</td><td>
        @k.contenu</td></tr>

    }
    </table>
    <br />
    <table>
    <tr><label><b>Nouveau commentaire</b></label></tr>
    <tr>
    <td><b>Nom :</b></td><td>@Html.TextBoxFor(m=>m.pseudo)</td>
    </tr>
    <tr>
    <td><b>Commentaire :</b></td><td>@Html.TextAreaFor(m=>m.nouveau)</td>
    </tr>
    </table>
    @Html.ActionLink("Ajouter", "NewComment", new { Model.diff.id_diff, Model.pseudo , Model.nouveau}) 

</fieldset>
<p>
<a href="@Url.Action("Index")"><img src="~/Images/retour.png" alt =""/></a>
</p> 
```

这是我的模型设计（困难部分）

![在此处输入图像描述](../Images/d627604004ae260883db34d81114c8ef.png)

我认为问题出在我的操作链接的参数中。我是空值错误。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:34:34.330

从外观上看，您正在使用将执行 GET 的 ActionLink（传递您作为路由参数提供的参数，但不传递表单元素值，即新评论。）可以尝试如下所示：

```
@Html.BeginForm("Ajouter", "NewComment", FormMethod.Post, new { id_diff = Model.diff.id_diff })
    {        
        <table>
            <tr><label><b>Nouveau commentaire</b></label></tr>
            <tr>
            <td><b>Nom :</b></td><td>@Html.TextBoxFor(m=>m.pseudo)</td>
            </tr>
            <tr>
            <td><b>Commentaire :</b></td><td>@Html.TextAreaFor(m=>m.nouveau)</td>
            </tr>
        </table>

        <input type="submit" value="Submit" />
    } 
```

并让您的行动接受：

```
[HttpPost]
public ActionResult NewComment(int id_diff, string pseudo, string contenu)
{ 
```

# mysql-workbench - Mysql工作台从服务器刷新EER图

> ID：11796889
> 
> 赞同：4
> 
> 时间：2012-08-03T13:38:35.040
> 
> 标签：mysql-workbench, database-schema, eer-model

是否可以从 mysql 工作台中的服务器重新获取或重新导入整个数据库结构？

我已经尝试过同步选项（模型和任何来源），但它总是以相反的方式工作（工作台->服务器）并删除我在 mysql 工作台之外在线/创建的新列。

我正在使用最新版本 5.2.41。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:10:20.693

使用最新版本 5.2.42 并执行“数据库 > 与任何源同步”，因为您似乎仍然遇到此错误 [http://bugs.mysql.com/bug.php?id=61211](http://bugs.mysql.com/bug.php?id=61211)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T03:07:57.673

在“选择更改以应用”步骤中，默认为“更新源”（您会看到从左到右的箭头）。在您的情况下，您应该选择表并单击“更新模型”，它将从 Mysql 同步到模型。

# objective-c - 如何将 unicode 代码点范围转换为 NSString 字符范围？

> ID：11796892
> 
> 赞同：0
> 
> 时间：2012-08-03T13:38:46.757
> 
> 标签：objective-c, macos, cocoa, unicode, character-encoding

我有一个`NSString`和一个*unicode 代码点范围*，它代表`NSString`. 由于其中的*字符与**代码点*`NSString`一一对应，因此我需要以某种方式**将我的代码点范围转换为相应的字符范围**。我该怎么做呢？

 ***[我知道我可以使用](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html)该`NSString`方法`-rangeOfComposedCharacterSequencesForRange:`将字符范围转换为字素簇范围，但我想做的是与此相反，我在 API 中找不到该方法的逆。即使有这样的方法可用，我也不认为这正是我正在寻找的，因为（如果我理解正确的话）一个*字形集群*与一个*unicode 代码点*不同，并且可以在事实上由多个代码点组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:35:15.713

你所拥有的是来自两个不同世界的混合数据。您通常可能会得到一个 Unicode 代码点范围以及一个 UTF-32 字符串（其中对应关系是一对一的），因此提取子字符串将是微不足道的。你有两个选择：

1.  在将数据放入 NSString 之前在 UTF-32 世界中工作
2.  将 Unicode 码位范围转换为 UTF-16 单位范围

我从您的问题中假设＃2是您情况下最简单的选择。

正如您所说， NSString 中的字符与 Unicode 代码点不一一对应，因为 NSString 字符是 UTF-16 单元。但是，一个 Unicode 代码点恰好对应于 NSString 中的 1 或 2 个字符。通过遍历 NSString 字符并计算 Unicode 代码点，您可以相当轻松地编写自己的范围转换例程。由于有效的 BMP 字符、前导代理和跟踪代理是不相交的，因此您甚至不关心 UTF-16 数据的字节序，这使这变得更加容易。CFString 提供了一些函数来确定每个字符是什么。因此，在伪代码中，您的计数将如下所示：

```
for each NSString character {
    if (CFStringIsSurrogateHighCharacter(character) ||
        CFStringIsSurrogateLowCharacter(character))
    {
        Skip forward another character in the NSString
    }
    Increment count of Unicode code points stepped through
} 
```***

# sql-server-2008 - 无法在远程服务器上执行 SQL 查询

> ID：11796893
> 
> 赞同：0
> 
> 时间：2012-08-03T13:38:48.007
> 
> 标签：sql-server-2008, jira

我正在使用 jtds 驱动程序连接到 Microsoft SQL Server 2008 实例（在我的本地主机上运行）并尝试执行基本查询，如下所示。

```
select * from Test 
```

但是我得到一个 SQLException 作为 -

> java.sql.SQLException：在语句 [select * from Test] 中找不到表

有趣的是，我可以登录到服务器并手动执行相同的查询而没有任何问题。

我也尝试了以下选项

1.  `select * from <DB name>.dbo.Test`
2.  `select * from dbo.Test`
3.  `select * from [Test]`

我登录的用户拥有所有数据库的数据库管理员权限。

任何帮助都感激不尽！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:41:35.603

在连接到表所在的同一数据库时连接到数据库。

# javascript - 脸书好友点赞

> ID：11796896
> 
> 赞同：0
> 
> 时间：2012-08-03T13:38:50.190
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我需要知道，在我的应用中，用户的 10 位朋友是否喜欢我的 Facebook 页面。我也无法通过以下方式访问朋友

```
 FB.api('/me/friends?access_token=<?php $this->access_token; ?>',
 function(result){ 
     console.log(result); 
 }) 
```

如何在特定页面中获得所有朋友的喜欢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:09:05.867

要查找喜欢某个页面的朋友列表，您只能通过 FQL 获取。您需要确保您的访问令牌具有`friends_likes`权限。

您可以修改代码以获取喜欢您页面的用户朋友列表，如下所示：

```
FB.api('/fql?q=<?php urlencode(
    "SELECT uid FROM page_fan WHERE page_id={$your_page_id} ".
       "AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"
     );?>&access_token=<?php echo $this->access_token; ?>', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:02:26.517

最后，我的最终代码是：

```
FB.api('/me/friends?access_token=<?php echo $this->access_token; ?>', 
        function(response){ 
            i=0;
            for(i=0; i<response.data.length; i++) {
                searchForLikes(response.data[i].id);
            }
            if(friends_like>=<?php echo FRIENDS_LIKE; ?> && step<3){
                stepReach(3, friendsNum, 80);
                $.post("/default/index/next-step", { userId: '<?php echo $this->user->getId(); ?>' });
            }
        }); 
```

我因此使用 searchForLikes 函数来制作我的代码：3

# google-chrome - Google Chrome - IndexedDB - 配额

> ID：11796899
> 
> 赞同：3
> 
> 时间：2012-08-03T13:38:57.320
> 
> 标签：google-chrome, indexeddb

谷歌浏览器中 indexedDB 的配额限制是什么？不知何故，似乎很少有人提到这一点。我可以像在Firefox中那样使用具有用户权限的无限配额吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T04:28:16.920

在另一个问题中没有谈到无限，但你可以在这里阅读： [https ://developers.google.com/chrome/whitepapers/storage#unlimited](https://developers.google.com/chrome/whitepapers/storage#unlimited)

简短的版本是您可以为应用程序或扩展程序请求无限的 indexeddb 存储，但不能为普通页面请求。

# objective-c - 我可以在运行时在 Objc 中计算方程吗？

> ID：11796900
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:38:58.410
> 
> 标签：objective-c

我可以在 Objc 中做这样的事情吗：

```
NSString* myEquation = @"(3 * 4 / 2 ) - 5";
[myEquation calculate]; // return 1 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:46:39.453

[http://apptree.net/parser.htm](http://apptree.net/parser.htm)应该做你想做的。

[NSString to equation](https://stackoverflow.com/questions/1501949/nsstring-to-equation)这个问题似乎已经在这里问过了。所以一定要先搜索:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:55:00.843

你可以在没有外部库的情况下做到这一点：用你的表达式创建一个谓词`== 0`，然后使用它的左表达式。然后，您可以评估该表达式，如下所示：

```
NSExpression *e = [(NSComparisonPredicate *)[NSPredicate
    predicateWithFormat:@"(3 * 4 / 2 ) - 5==0"]
    leftExpression];
NSLog(@"%@", [e expressionValueWithObject:self context:nil]); 
```

# java - Java 应用程序抛出`Gtk-WARNING **: cannot open display:` 即使不需要 xserver

> ID：11796905
> 
> 赞同：5
> 
> 时间：2012-08-03T13:39:23.160
> 
> 标签：java, linux, opensuse, xserver

我有一个将 WebRenderer 用于 Java 无头浏览器的 Java 应用程序。WebRenderer 不需要 xserver 来运行，我已经通过卸载所有 x11 库和 xserver 组件确认了这一点。

但是问题是它会引发错误：`Gtk-WARNING **: cannot open display:`在某些情况下。经过研究，我发现安装了 openJDK 的系统通常会引发该错误。此外，当当前的 java 版本来自 Sun 但仍安装了 openJDK 时。要修复它，我需要卸载`libatk-wrapper-java`和`libgtk2.0-0`（也删除`default-jre`、`cedtea-netx`、`libatk-wrapper-java-jni`、`libgtk2.0-bin`和`openjdk-6-jre`）。

它还会在 openSUSE 中引发相同的错误（使用 Sun 的 Java）。是否有任何方法可以修复此错误，而无需启动 xserver 或卸载一堆其他可能需要的组件？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:15:02.050

是的，使用`Xvfb`.

在一个终端中，您运行`Xvfb :1`. 在另一个终端中，您运行`DISPLAY=:1 ./yourapp`.

一些发行版有一个`xvfb-run`脚本，可以`Xvfb`在同一命令上执行启动和您的应用程序的魔力。

`http://en.wikipedia.org/wiki/Xvfb`

谷歌`Xvfb`了解更多信息

# python - 从目录中的文件读取错误

> ID：11796906
> 
> 赞同：0
> 
> 时间：2012-08-03T13:39:26.833
> 
> 标签：python

我正在尝试读取文件夹内的文件，原因是文件夹内的文件数量不固定，但如果有 3 个文本文件夹，如果 4 个所有 4 个文本文件，我必须读取所有 3 个文件。

这是我尝试使用的代码，但出现了 IOError：

```
for i in os.listdir("./RecordFolder"):
    print i 
```

输出为：record1.txt record2.txt

现在问题是读取文件：

```
for files in os.listdir("./RecordFolder"):
    filecontent = open(files).readlines()
    for lines in filecontent:
    print lines 
```

输出：

```
IOError: [Errno 2] No such file or directory: 'record.txt' 
```

这里需要帮助，谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T13:40:40.007

该函数`os.listdir()`仅返回文件名，而不是完整路径，因此您应该使用`os.path.join()`添加目录名称：

```
directory = "./RecordFolder"
for filename in os.listdir(directory):
    with open(os.path.join(directory, filename)) as f:
        for line in f:
            print line 
```

（另请注意，您不应使用`file.readlines()`简单地遍历文件的行，并且您的代码无法关闭文件。这些问题已在上面的代码中修复。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:40:24.217

`os.listdir`仅返回文件夹内文件的名称。不是整个路径。

你想要这样的东西：

```
directory = os.path.join(os.curdir, "RecordFolder")
for files in os.listdir(directory):
    filecontent = open( os.path.join(directory, files) ).readlines()
    for lines in filecontent:
        print lines 
```

但这不是从文件中获取行的最佳方法。查看 python 上下文管理器——特别是：

```
with open(filename) as f:
     for line in f:
         print line 
```

这可以确保文件被正确关闭（即使发生错误——除非解释器本身出现分段错误或类似的奇怪情况）。

# objective-c - Xcode 搜索数组或字典的最佳方式？

> ID：11796907
> 
> 赞同：-1
> 
> 时间：2012-08-03T13:39:32.123
> 
> 标签：objective-c, xcode

我有一些需要搜索的数据，有 401 个这样的条目：

“1”、“1”、“1”、“1”、“0”、**“1”**

“1”、“2”、“1”、“1”、“0”、**“2”**

“1”、“3”、“1”、“1”、“0”、**“3”**

“1”、“1”、“2”、“1”、“0”、**“1”**

……

“3”、“3”、“3”、“3”、“0”、**“1”**

我需要的是搜索前 5 个字符串然后使用最后一个字符串填充变量的最佳方法。

我不知道如何做到这一点，在.net中我会使用一个数据表并搜索它并获取我需要的数据我只是不确定如何在Objective-C中做到这一点。

**编辑**

它不是家庭作业，所以我在 SQL 数据库中有一个 401 行的列表，因此有 6 列，前 5 列有结果数据用户从 1-3 中选择一个数字假设最后一列是我正在寻找的数据所以在 SQL 中，我会做类似的事情：

从表中选择 Column6，其中 Column1 = 1 AND Column2 = 1 AND Column3 = 2 AND Column4 = 2 AND Column5 = 5

我不知道如何在 Objective-c 中做到这一点，客户不希望我使用任何类型的网络，所以他们想要一个独立的应用程序。所以我需要使字典或数组或 txt 文件能够搜索每一行以匹配我捕获的 5 个变量，然后将第 6 个“列”作为数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:52:37.800

如果您可以操作数据，我会将其设置为`NSDictionary`或`NSMutableDictionary`使用字符串`@"11110"`作为键和字符串`@"1"`作为值。然后，您可以使用`objectForKey:`来查找您要查找的值并设置一个变量，例如`int myVariable = [string intValue]`.

要从单独的值中创建一个键，您可以使用`[NSString stringWithFormat:@"%i%i%i%i%i", column1, column2, column3, column4, column5]`.

# c - 如何解决：C代码中的“从不同大小的整数转换为指针”警告？

> ID：11796909
> 
> 赞同：11
> 
> 时间：2012-08-03T13:39:36.710
> 
> 标签：c, pointers, gcc-warning

我正在从遗留代码中删除 gcc 警告。

是否可以通过类型转换抑制警告“从不同大小的整数转换为指针”：

```
example:

some_struct *ptr = func()  // func() returns an integer. 
```

有人可以指导我如何解决此类 gcc 警告吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T13:51:20.707

首先，如果你能修复`func`（允许修改它的源），然后修复它。如果它的计算可以用指针来完成，那么用指针来做它们并返回指针。有时有正当的理由将地址作为整数工作（例如，处理特殊代码中的对齐问题）。在这种情况下，更改`func`为使用`uintptr_t`类型（定义在 中`stdint.h`）。它旨在在必要时将指针视为整数。（也有`intptr_t`如果有符号的算术由于某种原因更好，但我通常发现无符号`uintptr_t`的麻烦更少。）最好在返回时将其`func`转换`uintptr_t`为指针，因此返回类型`func`将是指针（指向某物，也许`some_struct`或`void`）。

如果您无法修复`func`，那么您可以使用强制转换告诉编译器您打算执行正在执行的转换。但是，这个特定的错误消息告诉您，您不仅将整数转换为指针，而且将一种大小（例如，四个字节）的整数转换为另一种大小（例如，八个字节）的指针。很可能这段代码最初是为一个系统编写的，其中返回的整数类型`func`与指针类型具有相同的大小，但您现在正在一个指针类型大于或小于该整数大小的系统上进行编译。

在这种情况下，您必须确保由`func`新架构执行的计算工作。如果它只返回一个 32 位的值，它会始终保持正确的值吗？也就是说，丢失的高 32 位不会丢失任何东西？没有`func`应该计算的地址超过它使用的整数类型的最大值？如果`func`使用有符号整数类型，也要考虑符号位。

如果您确保返回的值`func`是正确的，那么您可以使用显式转换，例如：`some_struct *ptr = (some_struct *) (intptr_t) func();`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T13:45:19.070

我的 gcc 没有给出你引用的警告。这也会很奇怪，因为您的代码中没有演员表。

我收到警告

```
assignment makes pointer from integer without a cast 
```

请注意“没有演员表”部分。因此，您可以通过强制转换使 gcc 保持沉默（不改变行为）：

```
some_struct *ptr = (void*)func(); 
```

`func`然后，如果返回类型不适合地址，您将收到警告（“从不同大小的整数转换为指针”） 。这可以通过另外转换`func()`为合适的整数类型来消除，例如`intptr_t`：

```
some_struct *ptr = (void*)(intptr_t)func(); 
```

所有这一切都假设您真的想将错误大小的整数转换为指针。可能，重新编写代码是一个更好的主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T13:47:57.477

这里有两种可能：

1.  `func`正在将实际指针转换为整数；它后来被用作指针。
2.  `func`正在返回一个存储在指针中的整数；`ptr`稍后转换为整数并用作整数。

在第一种情况下，如果小于数据指针的大小，则 from 的返回值`func`将*丢失信息*，并且可能会崩溃或更糟，这将在大多数[64 位内存模型](http://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models)（包括 Windows 和 Linux）上。在这种情况下，您应该将返回类型更改为; 请参阅[使用 intptr_t 而不是 void*？](https://stackoverflow.com/questions/9492798/using-intptr-t-instead-of-void)以及[为什么/何时在 C 中使用`intptr_t`进行类型转换？](https://stackoverflow.com/questions/6326338/why-when-to-use-intptr-t-for-type-casting-in-c).`int``func``intptr_t`

在第二种情况下，这不是一个问题，而是要处理字节顺序问题，您应该通过`intptr_t`:`some_struct *ptr = (some_struct *)(intptr_t)func();`和稍后`int value = (int)(intptr_t)ptr;`的 . 有关该问题的讨论，请参阅[GLib 类型转换宏](http://developer.gnome.org/glib/2.32/glib-Type-Conversion-Macros.html) 。

# ios - 应用程序在 setIdleTimerDisabled 上直接进入空闲状态：否

> ID：11796914
> 
> 赞同：3
> 
> 时间：2012-08-03T13:40:01.903
> 
> 标签：ios, idle-timer

我在用着

```
[[UIApplication sharedApplication] setIdleTimerDisabled: YES]; 
```

防止应用程序进入空闲状态，但是当我发出

```
[[UIApplication sharedApplication] setIdleTimerDisabled: NO]; 
```

该应用程序直接进入空闲状态。

此时有没有办法重新启动计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:36:29.333

不，没有办法重新启动计时器。也许您应该考虑您的应用程序是否真的需要这样做。苹果引用：

> “唯一应该禁用空闲计时器的应用程序是映射应用程序、游戏或具有零星用户交互的类似程序。”

如果您的应用确实需要关闭 idleTimer，那么它可能会一直关闭直到应用进入后台？

您可以尝试在定时事件结束时添加警报

```
UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Timer Complete" message:@"Timer ended, well don you" delegate:nil cancelButtonTitle:@"OKAY" otherButtonTitles:nil];
[myAlert show];
[myAlert release]; 
```

如果您使用 ARC，请忽略该版本。这可能会点亮屏幕备份，那么也许您不需要弄乱空闲计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T20:19:39.637

对于提出这个问题的人来说，这显然为时已晚，但对于其他正在寻找的人来说，对我有用的是这样做：

```
[[UIApplication sharedApplication] setIdleTimerDisabled:NO];
[[UIApplication sharedApplication] setIdleTimerDisabled:YES];
[[UIApplication sharedApplication] setIdleTimerDisabled:NO]; 
```

一个接一个地包含所有三行会以某种方式重置计时器。因此，计时器不会在立即收到 setIdleTimerDisabled:NO 时变暗，而是需要一段时间才能变暗。

# sencha-touch-2 - SenchaTouch2 - NestedList - 标题“切断”

> ID：11796915
> 
> 赞同：0
> 
> 时间：2012-08-03T13:40:04.577
> 
> 标签：sencha-touch-2

我创建了一个 NestedList，里面有一些数据.. 一切都按预期工作。但是有一件很奇怪的事情..

标题的最后 2 个字符总是用点代替 - 我不知道为什么......

有什么解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:08:22.393

根据[http://www.sencha.com/forum/showthread.php?228621-Short-titles-in-title-bar-also-gets-clipped-with-text-ellipsis 它](http://www.sencha.com/forum/showthread.php?228621-Short-titles-in-title-bar-also-gets-clipped-with-text-ellipsis)在 2.1.0-b2

据我判断这是CSS问题，因为在真实设备（iPhone测试）上没有这样的怪癖

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:21:12.810

This can be fixed with this solution, which only shows dots when necessary:

```
.x-title .x-innerhtml:after {
    content: '';
    display: inline-block;
    width: .3em; /* equal to the amount of padding on the element */
} 
```

# asp.net - 舍入 asp.net 图表系列值

> ID：11796920
> 
> 赞同：0
> 
> 时间：2012-08-03T13:40:19.347
> 
> 标签：asp.net

我有以下代码

```
DataTable dt = new DataTable();
Chart1.Series["Available_Capacity(QTY)"].YValueMembers = Convert.ToString(dt.Columns[0]);
series.LabelFormat = "{0:#,#}"; 
```

结果是 1.671.197 但是我想要 1,671

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:44:22.850

```
Try series.LabelFormat = "{0:N0}"; 
```

顺便说一句：根据您所说的所需输出，您没有四舍五入，而是截断。

该`{0:N0}`格式只是丢弃任何十进制值。例如，要仅获得 2 个十进制值，您可以：`{0:N2}`

# c++ - C++ Linux 服务 - 如何使用 init.d + 自动重启？

> ID：11796922
> 
> 赞同：2
> 
> 时间：2012-08-03T13:40:24.253
> 
> 标签：c++, linux

我创建了一个 linux c++ 服务（它基本上是一个应用程序，但它经常通过 TCP/IP 处理请求）。

我想知道如果出现问题（如崩溃）或服务器重新启动，是否有任何简单的方法让它“自动重启”？

我不确定如何甚至是否应该将其设置为服务或设置 rc.d 脚本，我不是 100% 熟悉如何在 linux 上执行此操作（如果重要，我的服务器正在运行 ubuntu ）。

任何建议将不胜感激！

〜乔什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:36:07.397

这里的很多答案都建议有一个“父应用程序”来做这件事，但你最终会遇到与父应用程序相同的问题——它一直是乌龟。

在许多 unix 类型系统中（尤其是历史上），init 进程是第一个执行的进程，并将执行（并自动重新启动）在 /etc/inittab 中定义的进程。

因此，与其编写自己的看门狗或进程来自动重启 - 您可以使用它自动为您完成这项工作，并且由于它是 init 进程，如果它死了，系统比您的服务更需要担心.

@doron 建议另一种好方法，如果您的服务应该为每个传入连接生成一个新进程，并且只有在它有传入连接时才起作用。

最后，这些天来，在 Ubuntu 类型系统上的 init 进程（和 /etc/inittab）已被替换为 upstart - [http://upstart.ubuntu.com/](http://upstart.ubuntu.com/) - 一个更灵活的系统，用于同样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T13:46:50.310

在我的产品中，我创建了看门狗进程，该进程在单独的进程中分叉和执行服务进程，并等待其终止。如果由于某种原因进程终止，看门狗进程将创建另一个线程并再次启动进程。

如评论中所述，您应该检查它崩溃的原因。首先，您可以读取程序退出值。

这是让您入门的简单程序：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

int main()
{
    create_process();
    return 0;
}

void create_process()
{
    int exit_code;
    if(fork() == 0)
    {
        exec("./your_service");
    }
    else
    {
        wait(&exit_code);
        if(WIFEXITED(exit_code))
        {
            /* Program terminated with exit */
            /* If you want, you could decode exit code here using
               WEXITSTATUS and you can start program again.
            */
            return;
        }
        else
`       {
                /* Program didn't terminated with exit, restart */
            create_process();
        }

    }
} 
```

为了在系统启动时启动服务，只需编辑`/etc/rc.local`脚本并附加命令以运行您的看门狗进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T13:46:13.337

*   创建一个控制应用程序，在必要时启动并重新启动它。
*   在您的应用程序中执行此操作 - 派生一个孩子，在那里运行程序，捕获停止/崩溃并在必要时派生新的孩子。一些工作代码可以在这里找到：[monitoring the main app in c](https://stackoverflow.com/questions/11514703/monitoring-the-main-app-in-c)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:00:27.263

在 *NIX 上编写自动重启子进程的父应用程序的最简单方法是使用 shell 脚本：

```
#!/bin/sh
while true;
do
    run_my_program;
done 
```

您可以选择拥有此重定向输出，在后台运行自身等。这并没有首先解决*启动*进程的问题，但与在 C++ 中编写父进程相比，它的工作量更少（对于完全相同的结果）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:39:08.570

您可能想看看使用[Inet Daemon](https://en.wikipedia.org/wiki/Inetd)。每次有新请求进入时，inet 守护进程都会启动一个新进程。因此，如果您的服务器发生崩溃，它只会在下一个请求进入时重新启动。

# c# - 如何在 XAML 中将静态值传递给 IValueConverter

> ID：11796930
> 
> 赞同：10
> 
> 时间：2012-08-03T13:40:39.860
> 
> 标签：c#, windows-phone-7, xaml, ivalueconverter

我想在我的 WP7 应用程序中使用从 Web 服务获取的静态文本。每个文本都有一个名称（标识符）和一个内容属性。

例如，文本可能如下所示：

```
Name = "M43";
Content = "This is the text to be shown"; 
```

然后我想将文本的名称（即标识符）传递给一个`IValueConverter`，然后查找名称并返回文本。

我认为转换器看起来像这样：

```
public class StaticTextConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null)
        {
            return App.StaticTexts.Items.SingleOrDefault(t => t.Name.Equals(value)).Content;
        }

        return null;
    }
} 
```

然后在 XAML 中：

```
<phone:PhoneApplicationPage.Resources>
    <Helpers:StaticTextConverter x:Name="StaticTextConverter" />
</phone:PhoneApplicationPage.Resources>

...

<TextBlock Text="{Binding 'M43', Converter={StaticResource StaticTextConverter}}"/> 
```

但是，这似乎不起作用，我不确定我是否正确地将值传递给转换器。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T07:19:06.863

我终于找到了答案。答案是@Shawn Kendrot 和我在这里问的另一个问题之间的混合：[IValueConverter not getting in some scenario](https://stackoverflow.com/q/11843551/746968)

总结使用的解决方案`IValueConverter`我必须在以下庄园中绑定我的控件：

```
<phone:PhoneApplicationPage.Resources>
    <Helpers:StaticTextConverter x:Name="TextConverter" />
</phone:PhoneApplicationPage.Resources>

<TextBlock Text="{Binding Converter={StaticResource TextConverter}, ConverterParameter=M62}" /> 
```

由于文本的 ID 是通过转换器参数传入的，因此转换器看起来几乎相同：

```
public class StaticTextConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (parameter != null && parameter is string)
        {
            return App.StaticTexts.Items.SingleOrDefault(t => t.Name.Equals(parameter)).Content;
        }

        return null;
    }
} 
```

但是，事实证明，如果*没有*`DataContext`. 为了解决这个问题，`DataContext`只需将控件的属性设置为任意值：

```
<TextBlock DataContext="arbitrary" 
           Text="{Binding Converter={StaticResource TextConverter}, ConverterParameter=M62}" /> 
```

然后一切都按预期工作！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T13:51:48.803

问题在于您的绑定。它将检查`DataContext`, 并且在这个对象上，它会尝试评估属性`M62`和`ValueboxConsent`那个对象。

您可能希望在应用程序中可以绑定到的某个位置添加静态键：

```
<TextBlock Text="{Binding Source="{x:Static M62.ValueboxConsent}", Converter={StaticResource StaticTextConverter}}" /> 
```

其中 M62 是您的密钥所在的静态类.. 像这样：

```
public static class M62
{
    public static string ValueboxConsent
    {
        get { return "myValueBoxConsentKey"; }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T22:05:03.200

如果要使用值转换器，则需要将字符串传递给值转换器的参数

xml:

```
<TextBlock Text="{Binding Converter={StaticResource StaticTextConverter}, ConverterParameter=M43}"/> 
```

转换器：

```
public class StaticTextConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (parameter != null)
        {
            return App.StaticTexts.Items.SingleOrDefault(t => t.Name.Equals(parameter)).Content;
        }

        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-18T17:19:17.560

```
xmlns:prop="clr-namespace:MyProj.Properties;assembly=namespace:MyProj"

<TextBlock Text="{Binding Source={x:Static prop:Resources.MyString}, Converter={StaticResource StringToUpperCaseConverter}}" /> 
```

# jquery - 文本输入上的 Chome 自动完成功能可防止触发 keydown 事件（jquery）

> ID：11796932
> 
> 赞同：2
> 
> 时间：2012-08-03T13:40:44.573
> 
> 标签：jquery, html, google-chrome

当使用键盘导航到自动完成选项并点击 [enter] 时，其他浏览器（例如：Firefox 14.0.1）会触发此事件，但 chrome (21.0.1180.60 m) 不会。我正在使用 jquery 来挂钩事件：

```
 $('input').keydown(function (event) {
        if (event.which == 13) {
            var $txt = $(this);
            //settimeout req. for firefox to append autocomplete
            setTimeout(function () {
                //**chrome doesn't get here until you hit enter a second time
            }, 0);

        }
   });​ 
```

这里的例子：http: [//jsfiddle.net/a9vbe/4/](http://jsfiddle.net/a9vbe/4/)

有谁知道这里发生了什么或可能的解决方案是什么？改用 keyup 事件会“解决”问题，因为计算机比手指快，但我宁愿不这样做。最好使用 Keydown（或 Keypress）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T14:01:06.677

在这样的实例中进行 keyup 并没有错，特别是因为它解决了问题。问题是数据列表填充文本框的速度不够快，以至于 keydown 事件无法触发输入事件。此时，您仍然专注于数据列表本身。这是 keyup 的好处之一的一个典型例子。

更不用说一旦用户释放一个键它就会触发自动完成，所以你不会让它触发*1000 倍*，因为有人无缘无故地按住“F”键。

**在这样的 ajax / 自动完成情况下，我总是使用“keyup”。**

# salesforce - 如何通过 API 将帐户分配给 SalesForce 中的某个人？

> ID：11796933
> 
> 赞同：0
> 
> 时间：2012-08-03T13:40:51.793
> 
> 标签：salesforce

是否可以通过 API 将 SalesForce 帐户分配给某人？我检查了现有的方法，但没有找到任何东西。我知道，存在帐户分配规则，但也可以通过 API 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:21:46.803

您将调用 update() 传递一个 Account 结构，该结构在 OwnerId 字段中指定了 Account 的 Id 和新所有者（aka 用户）的 Id。

# object - Flask SqlAlchemy：TypeError：'Class'对象不可迭代

> ID：11796934
> 
> 赞同：8
> 
> 时间：2012-08-03T13:40:54.790
> 
> 标签：object, sqlalchemy, relationship, python-2.6, flask-sqlalchemy

我正在关注 Flask-SQLAlchemy 教程。我在 python 2.6 上有 Flask 0.9、sqlalchemy 0.7.8 和 flask-sqlalchemy 0.16。（我和日食一起工作）

（教程在这里：[http](http://packages.python.org/Flask-SQLAlchemy/models.html) ://packages.python.org/Flask-SQLAlchemy/models.html ）

我有两个班级：一个男人和一个钱包。有1-1的关系。（每个人都有自己的钱包）

```
class Man(db.Model):
    sid = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), unique=False)
    wallet = db.relationship('Wallet', backref='man', lazy='dynamic', uselist=False)

    def __init__(self, wallet):
        self.wallet = wallet

class Wallet(db.Model):
    sid = db.Column(db.Integer, primary_key=True)
    account = db.Column(db.Integer)
    manId = db.Column(db.Integer, db.ForeignKey('man.sid'))

    def __init__(self, account):
        self.account = account 
```

在我的“主”模块中，我创建了我的数据库：

```
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:PATH'
db = SQLAlchemy(app) 
```

在同一个模块中，我尝试将 Wallet 附加到 Man ：

```
if __name__ == "__main__":
    db.create_all() 
    w1 = Wallet(132)
    w2 = Wallet(18)
    db.session.add(w1)
    db.session.add(w2)
    db.session.commit()
    man1 = Man(w1)
    db.session.add(man1)
    db.session.commit() 
```

但我得到这个错误：

```
TypeError: 'Wallet' object is not iterable 
```

我不明白为什么会出现这样的错误。添加映射对象的正确方法是什么？

PS：我一直在学习 SQLAlchemy 教程，我相信他们会以不同的方式声明事物：

```
class Man(db.Model):
    sid = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), unique=False)
    wallet = db.relationship('Wallet', backref='man', lazy='dynamic', uselist=False)
    manId = db.Column(db.Integer, db.ForeignKey('man.sid'))
    def __init__(self, wallet):
        self.wallet = wallet

class Wallet(db.Model):
    sid = db.Column(db.Integer, primary_key=True)
    account = db.Column(db.Integer)

    def __init__(self, account):
        self.account = account 
```

我应该相信哪个教程？

非常感谢 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T13:35:57.607

> 我不明白为什么会出现这样的错误。添加映射对象的正确方法是什么？

请注意，当您配置您的钱包关系时，您使用lazy="dynamic" 选项。这样你就建立了一个[动态的关系](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html#dynamic-relationship-loaders)。由于它被设计用于大型集合，因此将其用于一对一关系并没有多大意义。

同时它改变了你可以分配给你的标量关系的方式，即你不能直接分配你的单个对象：

```
self.wallet = wallet 
```

但你必须使用可迭代的

```
self.wallet = [wallet] 
```

因此，您在这里有两种解决方案：要么分配一个元素的集合，如上所示，要么更好地停止对这种关系使用动态集合。

# entity-framework - 实体框架事务和 sql azure 默认隔离级别

> ID：11796937
> 
> 赞同：2
> 
> 时间：2012-08-03T13:40:57.567
> 
> 标签：entity-framework, entity-framework-4, azure-sql-database, transactionscope, isolation-level

根据这篇文章[http://social.technet.microsoft.com/wiki/contents/articles/handling-transactions-in-sql-azure.aspx](http://social.technet.microsoft.com/wiki/contents/articles/handling-transactions-in-sql-azure.aspx)

```
SQL Azure default database wide setting is to enable read committed 
snapshot isolation (RCSI) 
```

我是否正确地假设：

A）以下代码默认为Serializable（覆盖数据库默认值）

```
 using (TransactionScope transaction = new TransactionScope())
        {                                                               

        } 
```

B）以下代码默认为带有快照隔离的ReadCommitted（而不仅仅是普通的ReadCommitted）

```
 TransactionOptions options = new TransactionOptions();
        options.Timeout = TimeSpan.FromMinutes(1);
        options.IsolationLevel = IsolationLevel.ReadCommitted;

        using (TransactionScope transaction = new 
          TransactionScope(TransactionScopeOption.Required, options))
        {                                                               

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:46:35.237

a) 是的。默认情况下，隔离级别将是可序列化的。[http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx)

b) 对于该事务，隔离级别将只是 ReadCommitted。对于快照，您需要

```
 options.IsolationLevel = IsolationLevel.Snapshot; 
```

[http://msdn.microsoft.com/en-us/library/system.data.isolationlevel.aspx](http://msdn.microsoft.com/en-us/library/system.data.isolationlevel.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:07:36.890

我不确定我认为您的隔离级别将只是 SnapShot 而不是读取提交的快照，这是两种不同的隔离

它与 SNAPSHOT 隔离级别的不同之处在于，它不是为读取器提供事务启动时可用的行的最后提交版本，而是读取器获取语句启动时可用的行的最后提交版本

# java - 如何在表格单元格内放置带有 mouseClick 监听器的文本？

> ID：11796938
> 
> 赞同：0
> 
> 时间：2012-08-03T13:41:04.633
> 
> 标签：java, gwt, cell, celltable

我需要在 celltable 的单元格内放置一个带有监听器的文本。我也想在点击后渲染一个窗口。我不知何故未能实现这一目标。请注意，我是 gwt 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:33:16.783

您可以通过在表格中插入[ClickableTextCell](http://google-web-toolkit.googlecode.com/svn/javadoc/2.2/com/google/gwt/cell/client/ClickableTextCell.html)来实现此目的。单击此表会触发[ValueUpdater](http://google-web-toolkit.googlecode.com/svn/javadoc/2.2/com/google/gwt/cell/client/ValueUpdater.html) .update(value) 方法。内部更新你可以做你想做的事。

# windows - 如何将 Erlang 程序编译成独立的 windows 可执行文件？

> ID：11796941
> 
> 赞同：17
> 
> 时间：2012-08-03T13:41:14.510
> 
> 标签：windows, erlang, executable

[来自metabrew](http://www.metabrew.com/)的 Last.fm 的 Richard已将[他的应用程序移植到 Erlang](http://www.metabrew.com/article/rewriting-playdar-c-to-erlang-massive-savings)。它也是由riak、couchdb 和其他人完成的。他提到提取所需的部分，或者将整个 VM 包含到分发中。这里的主要特点是：该程序不需要在目标机器上安装 Erlang。

所以问题是，**你如何一步一步地将 Erlang 程序打包成一个 windows（以及不太重要的 linux）可执行文件？**

*PS 我看过 SAE 项目，并且在这里阅读了所有相关问题。没有人回答我的问题。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T11:54:34.297

1.  创建 Erlang 的可移植版本（例如，使用此讨论组中的方法：[Erlang on Windows from USB](http://erlang.2086793.n4.nabble.com/Erlang-on-Windows-from-USB-td2118647.html)）。本练习中最重要的部分是创建`erl.ini`具有正确路径的文件，该文件可用于从任何所需位置启动 Erlang。
2.  创建应用程序的 Erlang 版本和发布启动脚本。有关说明，请参阅[有关发布的 Erlang 文档](http://www.erlang.org/doc/design_principles/release_structure.html)。
3.  创建一个 Windows 命令行脚本来启动您的应用程序。这将简单地以您的引导脚本作为参数运行 Erlang（例如`erl -boot someapp`）。Erlang 将读取该`erl.ini`文件以从正确的位置加载您的应用程序和系统库。
4.  创建一个包含所有相关部件的 Windows 安装应用程序：
    *   Erlang 分布
    *   包含所有路径的`erl.ini`文件作为要由安装应用程序填写的变量
    *   应用程序的发布（所有的梁文件和启动脚本）
    *   使用启动脚本启动应用程序的命令行脚本

从 Windows 安装程序的角度来看它应该如何工作：

*   询问用户在哪里安装应用程序（或使用 Program Files 中的某个默认位置）
*   将 Erlang 发行版、您的应用程序和启动脚本复制到正确的位置
*   更新`erl.ini`和命令行脚本以使用所选位置
*   创建将执行命令行脚本的图标或自动启动条目

现在，当用户单击图标或以另一种方式执行命令行脚本时，他们实际上将从自定义位置运行 Erlang，这反过来将根据 Erlang 启动脚本启动您的应用程序。这只是一个普遍的想法，因为命令行脚本应该例如在用户第二次启动应用程序时检查 Erlang 是否尚未运行，或者它可能需要能够卸载它。

# html - 将一个 div 放置在接下来的两个 div 之上

> ID：11796946
> 
> 赞同：5
> 
> 时间：2012-08-03T13:41:49.640
> 
> 标签：html, css

![在此处输入图像描述](../Images/b41a4d346229837d5ca40957ac59af73.png)

我想放置 3 个 div，如照片所示 **div 编号 2 必须贴在底部**

这是我所做的：http: [//jsfiddle.net/GLHur/1/](http://jsfiddle.net/GLHur/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:46:48.813

尝试这个：

[http://jsfiddle.net/GLHur/18/](http://jsfiddle.net/GLHur/18/)

```
<div class="con">
    <div id="div3"></div>
    <div id="div1_2">
        <div id="div1"></div>
        <div id="div2"></div>
    </div>
</div>

#div3{height:100px;width:100px;border: solid 1px #000; display:inline-block; background:red;}

#div1{height:30px;width:100px;border: solid 1px #000; position:absolute; top:0; background:blue;}
#div2{height:20px;width:100px;border: solid 1px #000; position:absolute; bottom:0; background:green;}

#div1_2{display:inline-block; vertical-align:top;}

.con { position:relative; }​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:49:23.507

这有效：

```
 #div3{height:100px;width:100px;border: solid 1px #000;
display:inline-block;}
    #div1{height:30px;width:100px;border: solid 1px #000;}
#div2{height:20px;width:100px;border: solid 1px #000; position: absolute; bottom: 0}
#div1_2{display:inline-block;vertical-align:top; position: relative; height: 100px;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:50:21.580

我建议您使用绝对位置进行此基本定位：

```
<div id="content">
    <div id="div3"></div>
    <div id="div1"></div>
    <div id="div2"></div>
</div> 
```

.

```
#content { position: relative; height: 100px; width: 220px; }

#div1{ position: absolute; top: 0; right: 0;   height:30px;  width:100px; background: blue; }
#div2{ position: absolute; bottom:0; right: 0; height:20px;  width:100px; background: green; }
#div3{ position: absolute; top: 0; left: 0;    height:100px; width:100px; background: red; } 
```

[jsFiddle](http://jsfiddle.net/samsamX/GLHur/19/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:44:27.520

像这样的东西？

[http://jsfiddle.net/GLHur/6/](http://jsfiddle.net/GLHur/6/)

* * *

或者添加内容后高度会改变吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:47:19.000

```
<div style="position: relative;">
    <div style="height: 100%;"> </div>
    <div style="position: absolute; right: 0px;"> </div>
    <div style="position: absolute; right: 0px; bottom: 0px;"> </div>
</div> 
```

通过使外部 div “相对”，您可以使用绝对比例将其他 div 定位在内部。将第二个对齐到右侧，最后一个对齐到右侧和底部。您可能需要根据需要为样式添加高度/最小高度。

# spring-webflow - 如何为不同的流定义多个流执行器并为某些流禁用延续快照？

> ID：11796947
> 
> 赞同：2
> 
> 时间：2012-08-03T13:41:59.870
> 
> 标签：spring-webflow, continuations

我正在从事一个大型项目，我们希望对某些流程的延续进行不同的管理。

我们希望能够对我们的大多数流程使用延续快照（允许使用后退按钮的那些），但我们也希望能够完全禁用一些使用大量内存的流程的延续快照和我们不想序列化。

是否可以 ？如何 ？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:46:32.567

大警告，我没有尝试做任何这些。但是，这是一种潜在的方法。

首先，您需要自己实现`FlowExecutionSnapshotFactory`. 这将允许您管理快照的创建和恢复。您可能想要 wrap `SerializedFlowExecutionSnapshotFactory`，但只允许在某些情况下创建快照。更好的是，您可能希望允许创建快照，但忽略其中的一些数据。

现在的问题是让 Webflow 使用您的新`SnapshotFactory`. 工厂创建于`FlowExecutorFactoryBean.createFlowExecutionSnapshotFactory()`. 所以你需要创建这个。`FlowExecutorFactoryBean`您可以在`application-context.xml`文件中指定您自己的。[在http://forum.springsource.org/showthread.php?54714-SWF-2-0-Backtracking-and-exception-catch](http://forum.springsource.org/showthread.php?54714-SWF-2-0-Backtracking-and-exception-catching)中有关于如何做到这一点的说明- 向下滚动到底部的angeroussoul 的帖子。

现在您*只*需要确保提供您自己的 实例`FlowExecutorImpl`，其中包含您自己的快照工厂。

# vb.net - VB.NET 应用程序不使用故障转移伙伴

> ID：11796952
> 
> 赞同：2
> 
> 时间：2012-08-03T13:42:20.130
> 
> 标签：vb.net, sql-server-2008, sql-server-2008-r2, mirroring, database-mirroring

我有一个连接到 SQL Server 的 VB.NET 应用程序。

我们最近添加了数据库镜像以防服务器故障。

当然，我们的 SQL Server 失败了，但 VB.NET 应用程序没有进行故障转移。

我发现在我们的代码中，连接字符串中没有指定故障转移伙伴，所以我更新了连接字符串，如下所示：

```
sConnectionString = "Data Source=PROD-SQL;Failover Partner=FAILOVER-SQL;Initial Catalog=DB;User ID=****;Password=******;" 
```

该`SqlClient.SqlConnection`对象接受此连接字符串，但是当我调用它的`.Open()`命令时，它失败并出现以下错误：

```
"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)" 
```

为什么是这样？我们的 Intranet 应用程序故障恢复得很好（使用 DSN-less 连接的经典 ASP）。

应用程序是否必须至少与主服务器建立一次成功的初始连接才能成功进行故障转移？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T06:14:46.150

在您的主体数据库上运行它

```
SELECT DB_NAME(database_id) AS 'DatabaseName'
, mirroring_role_desc 
, mirroring_safety_level_desc 
, mirroring_state_desc 
, mirroring_partner_instance
FROM
sys.database_mirroring WHERE mirroring_guid IS NOT NULL; 
```

mirroring_partner_instance 中返回的值是连接将用于故障转移的服务器名称，而不是 FAILOVER-SQL。FAILOVER-SQL 将在它第一次尝试获取连接但无法联系 PROD-SQL 时使用。如果 PROD-SQL 可用，则故障转移伙伴将从 sql 服务器值 mirroring_partner_instance 设置在缓存中。

有关更多信息，请参见此处：http: [//blogs.msdn.com/b/spike/archive/2010/12/15/running-a-database-mirror-setup-with-the-sqlbrowser-service-off-may-产生意外的结果.aspx](http://blogs.msdn.com/b/spike/archive/2010/12/15/running-a-database-mirror-setup-with-the-sqlbrowser-service-off-may-produce-unexpected-results.aspx)

# c# - C#从后面的代码调用或单击MyLink

> ID：11796954
> 
> 赞同：0
> 
> 时间：2012-08-03T13:42:25.593
> 
> 标签：c#

我想这样做。

```
<asp:Button OnClick="MyCode" ID="Button1" runat="server"/>
<asp:LinkButton runat="server" ID="ButtonLink" href="#menu">
    <img src="images/create.png"/>
</asp:LinkButton>

protected void MyCode(object sender, EventArgs e)
{
    // Run my update script here
    ButtonLink.Click();
} 
```

但是，我需要在客户端对此进行模拟，该操作没有后面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:45:59.577

如果需要`click`通过 JavaScript 在链接上触发事件：

```
document.getElementById('<%= ButtonLink.ClientID %>').click(); 
```

# c# - 在 Excel 工作表中选择查询

> ID：11796956
> 
> 赞同：0
> 
> 时间：2012-08-03T13:42:43.603
> 
> 标签：c#, sql, excel

我对选择查询有疑问。我的目标是在 excel 表中选择一些列并将它们复制到我的 sql 表中。我有六列要复制。当我尝试复制由于标识列而更改的订单时。

这是我的代码；

```
 string path = Server.MapPath(Session["excel_sheet"].ToString());
        //Create connection string to Excel work book
        string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;Persist Security Info=False";
        //Create Connection to Excel work book
        OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
        //Create OleDbCommand to fetch data from Excel
        OleDbCommand cmd2 = new OleDbCommand("Select [column_1],[column_2],[column_3],[column_4],[column_5],[column_6] from [Sheet1$]", excelConnection);
        excelConnection.Open();
        OleDbDataReader dReader;
        dReader = cmd2.ExecuteReader();
        SqlBulkCopy sqlBulk = new SqlBulkCopy(con);
        //Give your Destination table name
        sqlBulk.DestinationTableName = "MYtable";
        sqlBulk.WriteToServer(dReader);
        excelConnection.Close(); 
```

我的表有这样的列 identity_column,column_1,column_2,column_3,column_4,column_5,column_6。

例如在 excel column_4 字符串中的副本写入 sql column_3 后，它必须写入 column_4 。我正在等待答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:42:51.023

您应该使用 SqlBulkCopy 类的 ColumnMappings 属性。

例如：

```
sqlBulk.ColumnMappings.Add("column_1", "column_1");

sqlBulk.DestinationTableName = "MYtable"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:36:37.437

您可以遍历列并映射它们，这会将excel中的列名映射到连接中的相同名称（即Excel column_1 = sql column_1）

```
 SqlBulkCopy sqlBulk = new SqlBulkCopy(con);
       //Define column mappings 

    for (int i = 0; i < dReader.FieldCount; i++)
    {
        sqlBulk.ColumnMappings.Add(dReader.GetName(i), dReader.GetName(i));
     } 
```

# mercurial - Mercurial 子存 储库的多用户访问

> ID：11796962
> 
> 赞同：2
> 
> 时间：2012-08-03T13:43:17.570
> 
> 标签：mercurial, mercurial-subrepos

在 mercurial 中组织对子存储库的 ssh 访问的正确方法是什么？考虑以下情况：

```
master
|--.hgsub
|--slave1
|--slave2 
```

和.hgsub：

```
slave1 = ssh://user@host://var/local/repos/slave1
slave1 = ssh://user@host://var/local/repos/slave2 
```

问题是这`.hgsub`是存储库的一部分，因此不可能（或者是吗？）将各种用户名存储在存储库的 ssh 地址中。我真的很想避免仅仅因为这个而使用“全局”用户来访问存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:39:53.040

你基本上有两种选择：

1.  如果您的子存储库与容器位于同一服务器中，请使用相对路径。这是最方便的解决方案。
2.  否则，您可以让每个用户定义一个*子路径*规则。[在本文档中](http://selenic.com/hg/help/config)查找*子路径*词。

# rdf - Sparql - owlim 查询在更新后不起作用

> ID：11796970
> 
> 赞同：1
> 
> 时间：2012-08-03T13:43:39.100
> 
> 标签：rdf, sesame

我创建了应用程序，它与 openrdf sesame 和 owlim 模块一起使用。最近，我需要更新 owlim 的许可证密钥（我收到了最新 owlim 版本的密钥），所以我也不得不更新 sesame。

应用程序是用 sesame 2.6.0 和 owlim 4.3 构建的，现在更新到 sesame 2.6.8 和 owlim 5.2

我对使用 owlim 模块的 sparql 查询有疑问。

```
PREFIX geo: <http ://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX opgeo: <http ://something.com/OPropertiesGeo#>
PREFIX opnet: <http ://something.com/OPropertiesNet#>
PREFIX omgeo: <http ://www.ontotext.com/owlim/geo#>

SELECT  (?doorwayID as ?address) ?longitude ?latitude ?mobile ?streetName ?houseNumber WHERE {

    ?doorwayID geo:long ?longitude . 
    ?doorwayID geo:lat ?latitude . 
    ?doorwayID opnet:mobile ?mobile .  
    ?specialzoneID geo:lat ?centerlat . 
    ?specialzoneID geo:long ?centerlong . 
    ?specialzoneID geo:radius ?radius . 
    ?doorwayID omgeo:nearby(?centerlat ?centerlong ?radius) . 
    ?doorwayID opgeo:street ?streetID . 
    ?streetID opgeo:name ?streetName . 
    OPTIONAL { ?doorwayID opgeo:houseNumber ?houseNumber . } 

} 
```

这应该选择附近函数中定义的区域中的每个点 - ?doorwayID omgeo:nearby(?centerlat ?centerlong ?radius)。，问题是结果集是空的。

我认为这与我之前的帖子（http://stackoverflow.com/questions/11780014/sparql-delete-queries-stop-working-after-update/11787809#11787809）有关，但经过两个小时的尝试和谷歌搜索后，我仍然没有找到正确的解决方案：-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:46:30.910

升级后，您是否使用以下方法重新创建了地理空间索引：

前缀 ontogeo：[http](http://www.ontotext.com/owlim/geo#) ://www.ontotext.com/owlim/geo# INSERT DATA { _:b1 ontogeo:createIndex _:b2。}

?

# sql - Excel Vba - 在 sql 字符串中使用撇号

> ID：11796973
> 
> 赞同：2
> 
> 时间：2012-08-03T13:43:54.460
> 
> 标签：sql, ms-access, excel, vba

我正在使用 excel 将数据输入到 Access 数据库中，并且我的一些数据字符串包含用于测量的撇号。

这是我的 SQL 输入字符串

```
 stSQL = "INSERT INTO Products (ProductName, ProductDescription, ProductUnit, SupplierID) " & _
            "Values ('" & cboxItemNum & "', '" & txtDescription & "', '" & txtUnit & "', " & linkPID & ")"

    cn.Execute (stSQL) 
```

我的字符串如下：

Aliplast 4E 白色。30" X 80' X 1/4" 柔软。

在这个字符串中，80 之后的 ' 导致错误，我不知道如何解决这个问题。我不能只告诉用户不要输入撇号。我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T13:47:43.660

您可以通过使用参数（推荐）或使用替换来更正此问题。

```
& Replace(txtDescription,"'","''") & 
```

**参数**

```
Dim cmd As New ADODB.command
cn.Open ServerConnect

cmd.ActiveConnection = cn

stSQL = "INSERT INTO Products (ProductName, " _
   & "ProductDescription, ProductUnit, SupplierID) " _
   & "Values (param1,param2,param3,param4)"

cmd.CommandText = stSQL
cmd.CommandType = adCmdText
With cmd
   .Parameters.Append .CreateParameter( _
         "param1", adInteger, adParamInput, , cboxItemNum)
   .Parameters.Append .CreateParameter( _
         "param2", adVarChar, adParamInput, 50, txtDescription )
   .Parameters.Append .CreateParameter( _
         "param3", adInteger, adParamInput, , txtUnit )
   .Parameters.Append .CreateParameter( _
         "param4", adInteger, adParamInput, , linkPID )
End with
cmd.Execute recs 
```

请注意，虽然我将这些参数命名为 param1 到 param4，但为了方便起见，重要的是顺序，它必须与使用参数的顺序相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:05:52.403

替换用单引号括起来的值中的撇号（例如 'O'Brien' 中的 O'Brien），如下所示：O' & "'" & 'Brien

使用以下代码片段： Replace(rs![field1], " ' ", " ' " & " & " & """" & " ' " & """" & " & ' ") & "'" ) . 注意我在单引号和双引号之间添加了一个空格，以便更容易区分它们。在您使用的实际代码中，您不应该有这些空格。

例如

代替

Docmd.RunSQL ("INSERT INTO 表名 (DestinationField) SELECT '" & rs![field1] & "'")

采用

Docmd.RunSQL("INSERT INTO Tablename (DestinationField) SELECT '" & Replace(rs![field1], "'", "'" & " & " & """" & "'" & """" & " & '") & "'" )

这对我有用，并允许我使用 VBA 使用 SQL 插入语句将包含撇号（单引号）的值插入到表中

# java - 使用 .cer 文件对 .jar 文件进行签名

> ID：11796976
> 
> 赞同：7
> 
> 时间：2012-08-03T13:43:57.160
> 
> 标签：java, applet, code-signing

我正在尝试使用 globalsign 颁发的代码签名证书对 jar 文件进行签名。

我对此完全陌生，但经过一些谷歌搜索和大量试验和错误后，我执行了以下步骤。

我已使用以下方法在我的密钥库中导入了证书：

```
keytool -importcert -alias signalias -file OS200912023195.cer 
```

当我尝试使用以下命令对我的 jar 文件进行签名时：

```
jarsigner applet.jar signalias 
```

我收到以下错误：

> jarsigner：找不到证书链：signalias。signalias 必须引用包含私钥和相应公钥证书链的有效 KeyStore 密钥条目。

我是否忘记了什么或证书有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T18:12:10.327

> ...我想知道我是否可能需要的不仅仅是 cer 文件？...

@Mark 我想你是对的。我记得，异常类型像

> jarsigner：找不到证书链：signalias。signalias 必须引用包含私钥和相应公钥证书链的有效 KeyStore 密钥条目。

...让我觉得你试图只用证书签署 jar。所以你必须跳过一些重要的步骤：|

如果要使用证书，首先要做的就是生成[CSR](http://www.sslshopper.com/what-is-a-csr-certificate-signing-request.html) ...

*   A) 生成密钥库；然后在密钥库中生成公钥/私钥。命令就像一个

> keytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks -keysize 2048

*   B）然后是 gen CSR - 有关更多信息，您可以阅读[此](https://knowledge.verisign.com/support/code-signing-support/index?page=content&id=AR185&actp=LIST&viewlocale=en_US)内容。命令就像一个

> keytool -certreq -alias mydomain -keystore keystore.jks -file mydomain.csr

*   C）有关 keytool 常用命令的更多详细信息，您可以阅读[此内容](http://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html)

如果您对 OpenSSL 没问题，那么按照步骤 D 生成您自己的证书...

*   D）如果您需要自签名证书，您可以按照[以下](http://www.akadia.com/services/ssh_test_certificate.html)步骤操作...

...返回您的密钥库

*   E）只有在那之后，您才能使用以下命令将证书**导入**您的密钥库

> keytool -import -trustcacerts -alias root -file server.crt -keystore keystore.jks

*   F）只有这样你才能使用**[jarsigner](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/jarsigner.html)**工具来签署你的 jar

* * *

评论是否有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:48:55.503

`.cer`文件从不存储私钥，并且要签署一个`JAR`您需要在您的密钥库中有一个私钥。所以我想，您需要找出证书的私钥在哪里，并将其添加到您的密钥库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:26:21.417

您能否使用以下命令来验证您导入的证书的密钥库。

keytool -list -v -keystore your_keystore_name -alias your_alias

如果发现详细信息正确，则提供的证书似乎存在问题。它是不完整的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:28:44.913

希望这会有所帮助： [Java 教程 - 签署 JAR 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)

另外，请查看[上述教程中引用的页面](http://docs.oracle.com/javase/7/docs/technotes/guides/security/cert3.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T20:21:57.897

> jarsigner：找不到证书链：signalias。signalias 必须引用包含私钥和相应公钥证书链的有效 KeyStore 密钥条目。

当我使用 openssl 命令而不是使用 keytool 创建证书签名请求 (CSR) 时，出现了该错误。结果是，当我生成我的密钥库时，它不包含私钥，只包含我导入的证书。

这篇文章解决了我的问题：[Java 密钥库可以导入 OpenSSL 生成的密钥对吗？](https://stackoverflow.com/questions/2685512/can-a-java-key-store-import-a-key-pair-generated-by-openssl)

使用 OpenSSL 创建密钥和证书后，使用 OpenSSL 创建 PKCS #12 密钥库：

> openssl pkcs12 -export -in cert.pem -inkey key.pem > server.p12

然后将此存储转换为 Java 密钥存储：

> keytool -importkeystore -srckeystore server.p12 -destkeystore server.jks -srcstoretype pkcs12

# web-services - POST xml 无效时正确的 HTTP 状态代码？

> ID：11796980
> 
> 赞同：1
> 
> 时间：2012-08-03T13:44:10.183
> 
> 标签：web-services, http, rest

当对我的 RESTful API 发出 POST 请求但 POST 字段中的内容（比如说 XML）无效时，我应该返回什么 HTTP 状态代码？

我想构建一个适当的 RESTful Web 服务，所以我想知道。

当使用特定 API 不支持的 HTTP 方法时，我现在返回 405，一切正常时返回 200，所有其他错误（XML 验证错误等）返回 500。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:15:01.953

我会回复 400

> 400 错误请求
> 
> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-22T07:59:58.410

这就是状态码 422 的用途。

# sql - 维度ID记录，也可以用作列（属性）吗？

> ID：11796983
> 
> 赞同：0
> 
> 时间：2012-08-03T13:44:11.387
> 
> 标签：sql, ssas, data-warehouse, dimensions

维度ID记录，也可以用作列（属性）吗？我不知道这是否可行，或者如果我这样做是否违反最佳实践。这是我为什么要问这个问题以及我在寻找什么的更详细的解释：我有一个只有 6 条记录的维度，称为逾期维度。它如下所示：

```
 PastDueBandDimID     PastDueMin     PastDueMax     PastDueDesc
    _____________________________________________________________________
    1                    0              0              Current
    _____________________________________________________________________
    2                    1              29             1-29 Days Past Due 
```

并且持续 30-59 天/60-89 天/90-180 天。这种模式总体上工作正常，但我想用这些数据创建一个用户层次结构，所以我可以用不同的方式对其进行分组。所以我想做的是在 DSV 中创建名为 1-29 / 30-59.... 的附加字段，并在这些字段中引用 DimID，这样我就可以创建我的层次结构。我觉得这不是一个好方法，但我没有其他想法。任何建议表示赞赏！我想将我的报告分组（不是全部，而是一些）0-59 天和 60-180 天，并且用户层次结构将使用户能够执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:32:08.213

在进行这样的分桶时，我几乎总是在聚合事实而不是“逾期”维度上创建物理桶列。

我可以理解像这样构建这个维度的诱惑，因为它非常“灵活”，但是当您发现它使使用自动化工具（例如 ssas）变得更加困难时，并且迫使您不断更新事实表以反映新的“逾期”维度值。

相反，为什么不只是构建一个基于您的事实并每天重建的聚合（如果您的数据库足够强大，甚至是一个视图）。以发票为例：

```
Invoice
Invoice Due Date
PastDueLTE29 (1 if <= 29, 0 otherwise)
PastDue30to59 (1 if >= 30 and <= 59, 0 otherwise)
PastDue60to89 (1 if >= 60 and <= 89, 0 otherwise)
PastDue90to180 (1 if >= 90 and <= 179, 0 otherwise)
PastDueGTE180 (1 if >= 180, 0 otherwise) 
```

然后，如果您想分组，假设所有发票逾期 < 60 天，您只需过滤前两列中的任何一列 = 1。

如果你真的想要一个层次结构，你不能在你的表中添加几列吗？

我真的不喜欢在列名中使用“级别”......但是：

```
PastDueBandDimID
PastDueLevel1Name ("Past Due" or "Current")
PastDueLevel2Name ("1-60" or "61-180" or "180+")
PastDueLevel3Name ("1-30", "31-60", "61-90", "90+"
PastDueLevel3Min
PastDueLevel3Max 
```

# sql - 从 CE 设备连接到 SQL Server Express 2008

> ID：11796984
> 
> 赞同：0
> 
> 时间：2012-08-03T13:44:13.140
> 
> 标签：sql, sql-server, tsql, windows-ce, connection-string

我正在开发一个 .NET Compact Framework 应用程序，该应用程序需要连接到另一台机器（Windows 7 x64）上的 SQL Server 2008 Express。

我在这里扯头发-我可以从设备到机器等双向ping通（尽管我丢失了一些数据包-大概是因为目前无线路由器在数英里之外，我们这里没有太多信号） ，但是当我尝试在 CE 机器上调试应用程序时，它总是找不到 SQL Server。

我已经尝试了各种不同的连接字符串，但没有任何乐趣。

这是我目前得到的连接字符串：

```
Data Source=10.0.0.12;Initial Catalog=EMS_Main;User ID=sa;Password=password; 
```

防火墙已关闭。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:55:24.850

您是否已将 SQL Express 实例[设置为接受远程连接](http://blogs.msdn.com/b/bethmassi/archive/2008/09/17/enabling-remote-sql-express-2008-network-connections-on-vista.aspx)？您是否关闭了 WIndows 防火墙，或允许 SQL Server 的端口访问？

# java - Java正则表达式删除所有非字母数字字符，除了空格

> ID：11796985
> 
> 赞同：31
> 
> 时间：2012-08-03T13:44:13.917
> 
> 标签：java, regex

我正在尝试用 Java 编写一个正则表达式，它从段落中删除所有非字母数字字符，除了单词之间的空格。

这是我写的代码：

```
paragraphInformation = paragraphInformation.replaceAll("[^a-zA-Z0-9\s]", ""); 
```

但是，编译器给了我一条错误消息，指向 s 说它是一个非法的转义字符。在我将 \s 添加到正则表达式的末尾之前，程序编译正常，但问题是段落中单词之间的空格被删除了。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-03T13:48:10.757

您需要双重转义`\`字符：`"[^a-zA-Z0-9\\s]"`

Java 将解释`\s`为 Java 字符串转义字符，这确实是无效的 Java 转义。通过编写`\\`，您可以转义`\`字符，本质上是将单个`\`字符发送到正则表达式。这`\`然后成为正则表达式转义字符的一部分`\s`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-03T13:49:10.003

您需要转义 \ 以便正则表达式识别 \s ：

```
paragraphInformation = paragraphInformation.replaceAll("[^a-zA-Z0-9\\s]", ""); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T13:48:16.997

维多利亚，你`\\s`不能`\s`在这里写。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T13:48:33.243

通常，每当您看到该错误时，这意味着您只有一个反斜杠，而您需要两个反斜杠：

```
paragraphInformation = paragraphInformation.replaceAll("[^a-zA-Z0-9\\s]", ""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-13T13:41:42.490

请查看此站点，您可以在线测试 Java Regex 并获取格式正确的 regex 字符串模式：

[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

# c# - 使用 RegEx 读取 CSV 文件

> ID：11796986
> 
> 赞同：2
> 
> 时间：2012-08-03T13:44:19.167
> 
> 标签：c#, regex, csv

我有一个 CSV 文件，其中包含以下类型的数据：

```
0,'VT,C',0,
0,'C,VT',0,
0,'VT,H',0, 
```

我想要以下输出

```
0
VT,C
0
0
C,VT
0
0
VT,H
0 
```

因此，在逗号上拆分字符串，但忽略引号内的逗号。目前我正在使用以下正则表达式：

`("(?:^|,)(\"(?:[^\"]+|\"\")*\"|[^,]*)"`

但是，这给了我以下结果：

```
0
VT
C
0
0
C
VT
0
0
VT
H
0 
```

这表明 RegEx 没有正确读取引号。任何人都可以提出一些可能有帮助的改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:53:14.060

通常在 CSV 解析方面，人们使用非常适合他们用来编写应用程序的编程语言的特定库。

无论如何，如果您要使用正则表达式进行非常松散（！）的解析，您可以尝试使用以下内容：

```
'(?<value>[^']*?)' 
```

它将匹配单引号之间的任何内容，并且假设 csv 文件格式正确，它不会错过任何字段。当然，它不接受嵌入式引号，但它很容易完成工作。这就是我需要快速完成工作时使用的方法。请不要将其视为您问题的完整解决方案……它仅在您所描述的要求和输入格式正确的特殊条件下工作。

[编辑]

我再次检查了您的问题，并注意到您还想包含未引用的字段……好吧，在这种情况下，我的表达将根本不起作用。不管怎样，听着……如果你认真思考你的问题，你会发现这是很难在没有歧义的情况下解决的。因为您需要固定规则，并且如果您允许引用和不引用字段，解析器将很难找出合法的逗号作为分隔符/引用。

模拟这种解决方案的另一个表达式可能是：

```
('[^']+'|[^,]+),? 
```

它将匹配引用/未引用的字段......无论如何我不确定它是否需要假设 csv 必须遵守严格的条件。据我所知，这将比拆分策略更安全……您只需要收集所有匹配项并`matched_value + \r\n`在目标字符串上打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:01:01.777

This regex is based of the fact you have **1** digit before and after your **'value'**

```
Regex.Replace(input, @"(?:(?<=\d),|,(?=\d))", "\n"); 
```

You can test it out on [RegexStorm](http://regexstorm.net/tester)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:35:49.527

我设法获得以下方法来根据需要读取文件：

```
public List<string> SplitCSV(string input, List<string> line)
    {

        Regex csvSplit = new Regex("(([^,^\'])*(\'.*\')*([^,^\'])*)(,|$)", RegexOptions.Compiled);

        foreach (Match match in csvSplit.Matches(input))
        {
            line.Add(match.Value.TrimStart(','));
        }
        return line; 
    } 
```

感谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:30:19.253

```
foreach(var m in Regex.Matches(s,"(('.*?')|[0-9])")) 
```

# java - 几次插入后自定义哈希图停止工作

> ID：11796991
> 
> 赞同：1
> 
> 时间：2012-08-03T13:44:30.323
> 
> 标签：java

我正在尝试为自定义哈希图（链表数组）编写代码，它可以存储 5 亿个值（键是链表数组号）并且可以将索引保存到磁盘。代码如下：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:28:09.667

这就是我将如何实现它

```
import java.io.File;
import java.io.IOException;
import java.nio.*;
import java.nio.channels.FileChannel;
import java.io.RandomAccessFile;
import java.util.Arrays;

class LongIntParallelHashMultimap {
    public static final int BUFFER_BITS = 24;
    private final FileChannel fc;
    private final ByteBuffer[] keys, data;
    private final int topBits, topMask, offsetMask;

    public LongIntParallelHashMultimap(String fileName, int sizeBits, boolean load) throws IOException {
        fc = new RandomAccessFile(fileName, "rw").getChannel();
        long totalSize = 4L << sizeBits;
        int bufferIndex = (int) (totalSize >> BUFFER_BITS);
        keys = new ByteBuffer[bufferIndex];
        data = new ByteBuffer[bufferIndex];
        int bufferSize = 1 << BUFFER_BITS;
        long offset = 0;
        for (int i = 0; i < bufferIndex; i++) {
            MappedByteBuffer kmap = fc.map(FileChannel.MapMode.READ_WRITE, offset, bufferSize);
            kmap.load();
            keys[i] = kmap.order(ByteOrder.nativeOrder());
            MappedByteBuffer dmap = fc.map(FileChannel.MapMode.READ_WRITE, offset + bufferSize, bufferSize);
            dmap.load();
            data[i] = dmap.order(ByteOrder.nativeOrder());
            offset += bufferSize * 2;
        }
        topBits = sizeBits + 2 - BUFFER_BITS;
        topMask = (1 << topBits) - 1;
        offsetMask = bufferSize - 4;
    }

    public void put(int key, int value) {
        int buffer = key & topMask;
        int key2 = (key >> topBits) + 1;
        assert key2 != 0;
        ByteBuffer keys2 = keys[buffer];
        ByteBuffer data2 = data[buffer];
        int offset = (key2 * 101) & offsetMask;
        while (keys2.getInt(offset) != 0) {
            offset += 3 * 4;
            offset &= offsetMask;
        }
        keys2.putInt(offset, key2);
        data2.putInt(offset, value);
    }

    public int get(int key, int[] values) {
        int buffer = key & topMask;
        int key2 = (key >> topBits) + 1;
        assert key2 != 0;
        ByteBuffer keys2 = keys[buffer];
        ByteBuffer data2 = data[buffer];
        int offset = (key2 * 101) & offsetMask;
        for (int count = 0; count < values.length; ) {
            int key3 = keys2.getInt(offset);
            if (key3 == 0)
                return count;
            if (key3 == key2)
                values[count++] = data2.getInt(offset);

            offset += 3 * 4;
            offset &= offsetMask;
        }
        return values.length;
    }

    private final int[] getValues = new int[1000];
    private static final int[] NO_VALUES = { };

    public int[] get(int key) {
        int len = get(key, getValues);
        return len == 0 ? NO_VALUES : Arrays.copyOf(getValues, len);
    }

    public static void main(String... args) throws IOException {
        int keys = 500 * 1000 * 1000;

        new File("abc.bin").delete();
        long startTime = System.nanoTime();
        LongIntParallelHashMultimap lph = new LongIntParallelHashMultimap("abc.bin", 30, true);
        long time = System.nanoTime() - startTime;
        System.out.printf("Load time was %.3f sec%n", time / 1e9);

        timePut(keys, lph);

        timeGet(keys, lph);

        timeGet2(keys, lph);

        startTime = System.nanoTime();
        System.gc();
        time = System.nanoTime() - startTime;
        System.out.printf("Time to Full GC was %.3f sec%n", time / 1e9);
    }

    private static void timePut(int keys, LongIntParallelHashMultimap lph) {
        long startTime;
        long time;
        startTime = System.nanoTime();
        for (int i = 0; i < keys; i++) {
            lph.put(i, i + 100);
            if ((i + 1) % 100_000_000 == 0)
                System.out.printf("%,d ", i + 1);
        }
        time = System.nanoTime() - startTime;
        System.out.printf("%nput time was %.3f sec%n", time / 1e9);
    }

    private static void timeGet(int keys, LongIntParallelHashMultimap lph) {
        long startTime;
        long time;
        startTime = System.nanoTime();
        int[] values = new int[2];
        for (int i = 0; i < keys; i++) {
            lph.get(i, values);
            if ((i + 1) % 100_000_000 == 0)
                System.out.printf("%,d ", i + 1);
        }
        time = System.nanoTime() - startTime;
        System.out.printf("%nget(key, values) time was %.3f sec%n", time / 1e9);
    }

    private static void timeGet2(int keys, LongIntParallelHashMultimap lph) {
        long startTime;
        long time;
        startTime = System.nanoTime();
        for (int i = 0; i < keys; i++) {
            lph.get(i);
            if ((i + 1) % 100_000_000 == 0)
                System.out.printf("%,d ", i + 1);
        }
        time = System.nanoTime() - startTime;
        System.out.printf("%nget(key) time was %.3f sec%n", time / 1e9);
    }
} 
```

注意：没有额外的步骤来加载或保存数据。这意味着当你从`put(key, value)`数据返回时，即使你的程序崩溃了（假设你的操作系统没有崩溃）

这增加了 500m 个条目。运行`-ea -verbosegc -mx16m`最大堆为 16 MB。

```
Load time was 0.121 sec
100,000,000 200,000,000 300,000,000 400,000,000 500,000,000 
put time was 47.017 sec
100,000,000 200,000,000 300,000,000 400,000,000 500,000,000 
get(key, values) time was 50.858 sec
[ GC goes bananas for get(key) ]
100,000,000 200,000,000 300,000,000 400,000,000 500,000,000 
get(key) time was 87.634 sec
Time to Full GC was 0.015 sec 
```

注意：它只是 GCed，因为我调用`System.gc();`并查看使用的堆的大小！

* * *

我会使用 a`int[]`而不是节点的链接列表。

```
import sun.nio.ch.DirectBuffer;

import java.io.IOException;
import java.util.*;
import java.nio.*;
import java.nio.channels.FileChannel;
import java.io.RandomAccessFile;

class LongIntParallelHashMultimap {
    private static final int[] NO_INTS = {};

    final int[][] data;

    public LongIntParallelHashMultimap() {
        data = new int[Integer.MAX_VALUE][];
    }

    public void put(int key, int value) {
        int[] ints = data[key];
        if (ints == null) {
            data[key] = new int[]{value};
        } else {
            int[] ints2 = Arrays.copyOf(ints, ints.length + 1);
            ints2[ints.length] = value;
            data[key] = ints2;
        }
    }

    public int[] get(int key) {
        int[] ints = data[key];
        return ints == null ? NO_INTS : ints;
    }

    private FileChannel channel;
    private MappedByteBuffer mbb;

    public void save() throws IOException {
        channel = new RandomAccessFile("abc.bin", "rw").getChannel();
        mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, 1 << 24);
        mbb.order(ByteOrder.nativeOrder());

        for (int i = 0; i < Integer.MAX_VALUE - 32; i += 32) {
            int bits = 0;
            for (int j = 0; j < 32; j++) {
                if (data[i + j] != null) bits |= 1;
                bits <<= 1;
            }
            getMbb().putInt(bits);
        }

        for (int i = 0; i < Integer.MAX_VALUE; i++) {
            int arr[] = get(i);
            if (arr.length == 0) continue;
            getMbb().putInt(arr.length);
            for (int a : arr)
                getMbb().putInt(a);
        }
        channel.close();
        cleanMbb();
    }

    private ByteBuffer getMbb() throws IOException {
        if (mbb.remaining() <= 0) {
            cleanMbb();
            mbb = channel.map(FileChannel.MapMode.READ_WRITE, channel.size(), 1 << 24);
            mbb.order(ByteOrder.nativeOrder());
        }
        return mbb;
    }

    private void cleanMbb() {
        ((DirectBuffer) mbb).cleaner().clean();
    }

    public static void main(String... args) throws IOException {
        int keys = 50 * 1000 * 1000;

        long startTime = System.nanoTime();
        LongIntParallelHashMultimap lph = new LongIntParallelHashMultimap();
        long time = System.nanoTime() - startTime;
        System.out.printf("Create time %.3f sec%n", time / 1e9);

        startTime = System.nanoTime();
        for (int i = 0; i < keys; i++) {
            lph.put(i, i + 100);
            if (i % 10000000 == 0 && i != 0)
                System.out.print(" " + i + " ");
        }
        time = System.nanoTime() - startTime;
        System.out.printf("%nput time was %.3f sec%n", time / 1e9);

        startTime = System.nanoTime();
        lph.save();
        time = System.nanoTime() - startTime;
        System.out.printf(" time to save was %.3f sec%n", time / 1e9);

        startTime = System.nanoTime();
        for (int i = 0; i < keys; i++) {
            int k[] = lph.get(i);
        }
        time = System.nanoTime() - startTime;
        System.out.printf("get time was %.3f sec%n", time / 1e9);
    }
} 
```

# c# - 日期范围重叠

> ID：11796992
> 
> 赞同：4
> 
> 时间：2012-08-03T13:44:33.150
> 
> 标签：c#, sql-server-2008, date-range

我有两个包含日期的变量。`DateStart`和`DateEnd`（在 SQL 中）。
我还有两个`DatePicker`控件（在 WinForm 中）。
我从数据库中导入这两个日期，需要做一些棘手的事情。

因此，这两个变量创建了一个日期范围，两个日期选择器创建了另一个日期范围。
如何检查这些日期范围是否与 Sql 查询重叠？

例如（yyyy/mm/dd 格式）

`DateStart = 2012/07/01`,`DateEnd = 2012/07/31`

```
| DatePicker1  | DatePicker2 | Overlapping | 
--------------------------------------------
| 2012/07/15   | 2012/07/16  |    True     |
--------------------------------------------
| 2012/07/31   | 2012/08/01  |    True     |
--------------------------------------------
| 2012/06/20   | 2012/07/01  |    True     |
--------------------------------------------
| 2012/08/01   | 2012/09/01  |    False    |
-------------------------------------------- 
```

我知道这有点混乱，但我不知道还能问这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:53:35.370

如果第一个范围的开始在第二个范围的结束之前并且第一个范围的结束在第二个范围的开始之后，则两个日期范围重叠。所以：

```
where DateStart <= @DatePicker2
  and DateEnd >= @DatePicker1 
```

[一个很好的解释就是这样](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:59:33.603

使用此功能

```
/* 
 * Tests if two given periods overlap each other.
 *
 * @TS Test period start
 * @TE Test period end
 * @BS Base period start
 * @BE Base period end
 */
CREATE FUNCTION [fn_DateTime_Overlap]
(
    @TS DATETIME = NULL,
    @TE DATETIME = NULL,
    @BS DATETIME = NULL,
    @BE DATETIME = NULL
)
RETURNS BIT
AS
BEGIN
    -- More simple?
    -- return !((TS < BS && TE < BS) || (TS > BE && TE > BE));
    -- The version below, without comments 
    -- (TS >= BS && TS < BE) || (TE <= BE && TE > BS) || (TS <= BS && TE >= BE)
    IF (
        -- 1\. Case:
        --       TS-------TE
        --    BS------BE
        -- TS is after BS but before BE
        (@TS >= @BS AND @TS < @BE)
        -- 2\. Case
        --    TS-------TE
        --        BS---------BE
        -- TE is before BE but after BS
        OR (@TE <= @BE AND @TE > @BS)
        -- 3\. Case
        --  TS----------TE
        --     BS----BE
        -- TS is before BS and TE is after BE
        OR (@TS <= @BS AND @TE >= @BE)
    ) RETURN 1
    RETURN 0
END 
```

# php - Zend 导航问题

> ID：11796993
> 
> 赞同：1
> 
> 时间：2012-08-03T13:44:33.913
> 
> 标签：php, zend-framework, zend-navigation

我正在使用 Zend 导航在网站上显示菜单项。

在下面的引导函数中， $this->bootstrap('layout')中的“布局”是什么意思？它是带有路径的布局文件名吗？，因为我有几个模块，所以有点混乱。

```
protected function _initNavigation()
{
    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();             
    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');

     $container = new Zend_Navigation($config);

     $view->navigation($container);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:50:00.590

布局是将出现在所有网站页面中的网站模板。

（为简单起见：例如，您有一个将出现在所有网站页面中的页眉和页脚，您将它们放在布局中，它们将自动包含在所有页面中）

有关 Zend 布局的更多信息，请参阅[Zend 布局文档](http://framework.zend.com/manual/en/zend.layout.html)

**编辑 ：**

您可以为所有模块指定布局，也可以为每个模块制作一个布局（这是您的选择，取决于您想要什么）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:36:26.890

> $this->bootstrap('layout') ？它是带有路径的布局文件名吗？

这意味着 Zend 首先将引导 Zend_Application_Resource_Layout

更多您可以在这里找到：http: [//framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.layout](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.layout)

# php - 从另一个孩子访问子类方法

> ID：11796995
> 
> 赞同：-2
> 
> 时间：2012-08-03T13:44:35.740
> 
> 标签：php, inheritance, validation

我正在使用我自己的轻量级 MVC 框架。我有一个带有两个子类的主模型，members_model 和验证模型。

```
Members_Model extends Model
Validation_Model extends Model 
```

在 members_model 中，我需要验证一些数据。如何从成员模型中调用验证方法？感谢您的帮助，我已经搜索并没有解决方案。

编辑：为了更简单，我需要孩子 A 玩孩子 B 的玩具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:46:38.367

您需要实例化一个验证模型并使用它的方法。但我认为你的设计有缺陷。请参阅问题：**[如何在 MVC 中构建模型？](https://stackoverflow.com/q/5863870/871050)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:47:09.590

如果我理解正确，您需要访问父方法[http://php.net/manual/en/keyword.parent.php](http://php.net/manual/en/keyword.parent.php)

那么孩子A必须实例化一个孩子B并访问它的方法或在B中创建一个静态方法，这样你就不需要实例化B

# objective-c - 应用程序在 segue 调用后加载 viewController 之前崩溃

> ID：11796998
> 
> 赞同：0
> 
> 时间：2012-08-03T13:44:38.347
> 
> 标签：objective-c, xcode, uisplitviewcontroller, mkmapview

我有一个带有 masterView 的 splitViewController，它有四个按钮，可以连接到四个不同的视图。我的一个视图是 mapView，它根据用户输入的位置数据填充了注释。用户输入存储在核心数据中的地址，mapView 获取输入地址的经纬度并填充地图。

我遇到的问题是 - 当我在地图上绘制注释之前转到地图然后转到另一个视图时，我的应用程序崩溃并且 NSEnabledZombie 错误说 - “[viewController respondsToSelector: ] : message sent to deallocated instance 。” 如果我允许加载注释，它运行良好并且不会崩溃。我现在在 viewDidAppear 中放置了一个 sleep 函数，这样当你继续使用它时，注释就有时间加载。

我应该将加载代码放在不同的线程中，还是有比睡眠功能更好的方法？

这是注释的方法：

```
-(void)showAddresses {
    NSFetchRequest *fetchR = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"theAddrs" inManagedObjectContext:self.manageCont];
    [fetchR setEntity:entity];
    NSError *error = nil;
    NSArray *theLoc = [self.manageCont executeFetchRequest:fetchR error:&error];

        NSError *saveError = nil;
        [self.manageCont save:&saveError];
} 
```

在这里，我在 viewDidAppear 中调用它：

```
 -(void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[self showAddresses];
} 
```