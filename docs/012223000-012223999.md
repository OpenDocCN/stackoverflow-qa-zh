# StackOverflow 问答 12223000-12223999

# javascript - 在 highchart 中使用大数组绘制折线图

> ID：12223001
> 
> 赞同：0
> 
> 时间：2012-08-31T22:04:08.487
> 
> 标签：javascript, highcharts

我正在尝试使用具有 id、命名值的对象的大数组列表绘制折线图，​​但出现了问题。我可以在萤火虫窗口中看到以下警告：

```
Unexpected value NaN parsing y attribute.
elem[setAttribute](prop, value); 
```

[http://jsfiddle.net/stGXM/19/](http://jsfiddle.net/stGXM/19/)

为什么会出现这些警告？尽管我已经提到了所有必要的值，但目前还没有绘制图表。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:49:47.907

您应该以 [x, y, ID] 的形式指定系列中的每个点。

我修改了你的代码：http: [//jsfiddle.net/Ut5C3/](http://jsfiddle.net/Ut5C3/)

这是 Highcharts 参考：[http ://api.highcharts.com/highcharts#series.type](http://api.highcharts.com/highcharts#series.type)

# c - 在 TCP 标头中操作 ISN 编号的最有效方法

> ID：12223002
> 
> 赞同：4
> 
> 时间：2012-08-31T22:04:14.817
> 
> 标签：c, tcp, header, network-programming, low-level

我目前正在尝试编写一个能够创建稳定的 TCP 连接并完全控制 ISN 编号的程序。我一直在用 C 语言编写，我的知识非常有限，已经达到了极限，我想知道是否有更好的方法来做到这一点。

我尝试的是手动构建标头，使用原始套接字发送和接收数据包，而不需要内核干扰，这是一个挑战。

因此，无论语言如何，您认为最有效和最简单的操作 ISN 的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T00:21:16.583

好吧，ISN 是以随机方式生成的，以防止 ISN 毁灭攻击（[http://www.thegeekstuff.com/2012/01/tcp-sequence-number-attacks/](http://www.thegeekstuff.com/2012/01/tcp-sequence-number-attacks/)）。

Linux网络栈，使用函数`tcp_v4_init_sequence`生成ISN（[http://lxr.free-electrons.com/source/net/ipv4/tcp_ipv4.c#L101](http://lxr.free-electrons.com/source/net/ipv4/tcp_ipv4.c#L101)），这个函数调用`secure_tcp_sequence_number`函数（[http://lxr.free -electrons.com/source/net/core/secure_seq.c#L106](http://lxr.free-electrons.com/source/net/core/secure_seq.c#L106)）来完成这项工作。看看这个函数并尝试克隆它，以便可以在用户空间的代码中使用它。

如果您有足够的时间，您可以查看( [http://www.rfc-editor.org/rfc/rfc6528.txt ) 的](http://www.rfc-editor.org/rfc/rfc6528.txt)**第 3 部分**，它描述了如何生成 ISN 的算法：`RFC 6528`

```
ISN = M + F(localip, localport, remoteip, remoteport, secretkey) 
```

并尝试实现它，如果你愿意:)

# c++ - C++ for循环、while循环和do while循环生成十进制数表

> ID：12223004
> 
> 赞同：0
> 
> 时间：2012-08-31T22:04:24.787
> 
> 标签：c++

我需要帮助作为一个起点，真的。我们必须使用这 3 个循环来生成一个十进制数表，以及十进制数的二进制、八进制和十六进制等价物，范围为 1-256。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:09:58.567

如果你不知道从哪里开始，那是……不是一个好兆头。也许你应该和你的老师聚在一起，这样你就不会落伍了。

无论如何，基本思想将是：

```
for loop counting from 1 to 256
    write counter in decimal form 
    write counter in binary form 
    write counter in hex form 
    write counter in octal form 
end loop 
```

您确实不需要三个循环，但如果需要，您可以将其分成三个循环。您可以将不同的格式说明符传递给`printf`等来格式化您的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:09:37.630

查看此页面以了解说明符：[http ://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

如果您使用 printf 并包含 %d 那么您将打印一个小数。如果您使用 %x，您将获得相同数字的无符号十六进制。

例如：

```
int i;
for(i=1;i<=256;i++){
    printf("the number %d in dec: %d",i,i);  \\prints i
    printf("the number %d in hex: %x",i,i); \\prints i in hex.
    printf("the number %d in oct: %o",i,i);  \\prints i in oct.
} 
```

或者

```
int i = 1;
while(i<=256) {
    ...
    i++;
} 
```

或者

```
int i = 1;
do {
    ...
    i++;
} while (i<=256); 
```

本页讨论循环的类型：[http ://www.tutorialspoint.com/cplusplus/cpp_loop_types.htm](http://www.tutorialspoint.com/cplusplus/cpp_loop_types.htm)

# python - 转义字符串并在之后将其拆分

> ID：12223006
> 
> 赞同：1
> 
> 时间：2012-08-31T22:04:48.133
> 
> 标签：python, regex, split

我有以下代码：

```
import re

key = re.escape('#one #two #some #tests #are #done')
print(key)
key = key.split()
print(key) 
```

和以下输出：

```
\#one\ \#two\ \#some\ \#tests\ \#are\ \#done
['\\#one\\', '\\#two\\', '\\#some\\', '\\#tests\\', '\\#are\\', '\\#done'] 
```

反斜杠怎么会重复？我只希望它们在我的列表中出现一次，因为我想在正则表达式中使用这个列表。

提前致谢！约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:07:23.933

每个*只有*一个反斜杠，但是在打印`repr`字符串时，它们会被复制（转义）——就像在使用字符串构建正则表达式时需要复制它们一样。所以一切都很好。

例如：

```
>>> len("\\")
1
>>> len("\\n")
2
>>> len("\n")
1
>>> print "\\n"
\n
>>> print "\n"

>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:12:58.220

\ 字符是转义字符，即改变后续字符[s] 含义的字符。例如，“n”字符就是一个“n”。但是，如果您像“\n”一样对其进行转义，它就会变成“换行符”。因此，如果您需要使用 \ 文字，则需要使用...本身对其进行转义： \\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:08:09.697

反斜杠不重复。要实现这一点，请尝试执行以下操作：

```
for element in key:
    print element 
```

你会看到这个输出：

```
\#one\
\#two\
\#some\
\#tests\
\#are\
\#done 
```

当您打印整个列表时，python 使用的表示形式不是按原样打印字符串，而是打印为 python 表达式（注意引号“”，它们不在字符串中）

要实际编码包含反斜杠的字符串，您需要复制该反斜杠。这就对了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:16:48.077

当您将列表转换为字符串（例如打印它）时，它会调用`repr`列表中包含的每个对象。这就是为什么您在第二行输出中获得引号和额外的反斜杠的原因。试试这个：

```
s = "\\a string with an escaped backslash"
print s       # prints: \a string with an escaped backslash
print repr(s) # prints: '\\a string with an escaped backslash' 
```

该`repr`调用在字符串周围加上引号，并显示反斜杠转义。

# android - 更改 AlertDialog 取消行为

> ID：12223007
> 
> 赞同：0
> 
> 时间：2012-08-31T22:04:53.437
> 
> 标签：android, android-alertdialog

我试图让我的警报对话框不仅在取消时自行关闭，而且还返回到调用它之前的活动。是否有一个我可以覆盖的取消功能，或者最好`setCancelable(false)`在后面使用 KeyListener按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:19:15.647

使用 AlertDialog.Builder 创建 AlertDialog 时，您可以设置 OnCancelListener ( [OnCancelListener docs](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setOnCancelListener%28android.content.DialogInterface.OnCancelListener%29) )。

然后在侦听器中，您可以调用 finish() 来销毁活动。

# grid - 我在选项卡面板中的选项卡中有一个网格。如何刷新打开选项卡中的网格？

> ID：12223013
> 
> 赞同：0
> 
> 时间：2012-08-31T22:05:19.267
> 
> 标签：grid, extjs4, tabpanel

如果我在选项卡面板的打开选项卡中有一个网格，并且我想在选项卡打开时刷新网格内容怎么办。如何刷新网格内容？

我有一个选项卡面板，每个新选项卡都包含一个网格。在任何打开的选项卡中，我可以更改该打开的选项卡中的网格内容，但是在进行这些更改时，有时更改可能包括已经打开的选项卡的内容，而不是我正在处理的具有网格的选项卡。然后我该如何在另一个打开的选项卡中刷新网格内容？

目前我必须关闭打开的选项卡并重新打开它以查看更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:39:43.020

是否出于某种原因重新加载另一个开放网格的商店不起作用？我认为这将是正常的事情。例如：

```
var grid = theOtherOpenTab.down('gridpanel');
grid.store.load(); 
```

如果另一个网格的存储*正在*更新，但由于某种原因它没有呈现，您可以尝试以下方法之一：

```
var grid = theOtherOpenTab.down('gridpanel');
grid.doComponentLayout(); 
```

或者

```
var view = theOtherOpenTab.down('gridview');
view.refresh(); 
```

# security - 为什么我的网站需要 SSL？

> ID：12223019
> 
> 赞同：-6
> 
> 时间：2012-08-31T22:05:39.623
> 
> 标签：security, ssl

SSL 有什么作用？如果我为我的网站省略 SSL，会发生什么坏事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:07:45.190

SSL 可防止中间人攻击者查看或修改通过 Internet 发送的数据。

任何包含或要求提供敏感信息的页面，或任何涉及以提升权限执行的代码（例如，浏览器插件或软件下载）的页面都应该对所有请求使用 SSL。

理论上，签名的 SSL 证书也表明签名者已经验证了站点的身份，但这并不意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:10:33.610

基本上，HTML 中的所有内容都以纯文本格式发送，这意味着如果被拦截，它可以很容易地准备好。

SSL 将所有纯文本变成加密的 mumojumbo，极难解密和阅读。

# google-chrome-extension - 在 chrome.extension.sendMessage 回调函数之外临时未定义的变量

> ID：12223020
> 
> 赞同：0
> 
> 时间：2012-08-31T22:05:53.340
> 
> 标签：google-chrome-extension, google-chrome-devtools

我有这个奇怪的问题：

上`content_script`：

```
函数获取文本（）{
    var = 文本；
    chrome.extension.sendMessage({}, function(response){
        文本=响应数据；
    });
    返回文本；
}

如果（getText（））{
    console.log('OK')
} 别的{
    console.log('不行')
}

```

上`background.js`：

```
var text = '测试';

chrome.extension.onMessage.addListener(function(request, sender, sendResponse){
    发送响应（{'数据'：文本}）；
})

```

在 line 上放置一个断点`return text`，你就可以`OK`进入控制台。

禁用断点，你只会得到`Not OK`.;

似乎是一些时间问题，比如`text`在返回时没有定义，除非你通过使用断点给 Chrome 一些时间。

清单.json：

```
{
  ...
  “权限”：[“标签”]，
  “背景”： {
    “脚本”：[“js/background.js”]
  },
  “内容脚本”：[
        {
            ...
            “js”：[“js/content_script.js”]，
            “run_at”：“document_end”
    }
  ],
  “清单版本”：2
}

```

有人可以重现这个吗？

# android - 内部类（Android）不在驼峰式？

> ID：12223022
> 
> 赞同：1
> 
> 时间：2012-08-31T22:06:11.930
> 
> 标签：android

```
public final class R {

    public static final class id {
        public static final int menu_settings=0x7f080000;
    }
    public static final class layout {
        public static final int activity_main=0x7f030000;
    }
    public static final class menu {
        public static final int activity_main=0x7f070000;
    }
    public static final class string {
        public static final int app_name=0x7f050000;
        public static final int hello_world=0x7f050001;
        public static final int menu_settings=0x7f050002;
        public static final int title_activity_main=0x7f050003;
    }

} 
```

我不明白为什么那些内部类不是 CamelCased？

他们这样做有原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:10:42.573

我认为这些不是驼峰式大小写的原因是因为谷歌希望我们在代码中引用它们的方式并将 xml 文件命名为相同，并且 xml 文件必须全部小写（这可能是为了与其他文件保持一致构建文件和资源）。

因此，我们创建了 string.xml，并将其称为 R.string。*_*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:10:09.360

也许是为了给人一种你正在调用 fields 的印象`R.id.xxxx`？无论如何都不能是骆驼案，因为这个名字已经被占用了
。`string`

# c++ - 如何在不使用另一个文件的情况下剪切一个文件？

> ID：12223027
> 
> 赞同：0
> 
> 时间：2012-08-31T22:06:32.217
> 
> 标签：c++, logging, stl, fstream

是否可以删除文件的一部分（比如说从头到尾），而不必使用另一个文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:14:01.827

是的，这是可能的，但您仍然必须重写大部分文件。

大致思路如下：

```
open the file
beg = find the start of the fragment to be removed
len = length of the fragment to be removed
blocksize = 4096 -- example block size, may be any
datamoved = 0
do {
  fseek(pos +len +datamoved);
  if( endoffile ) return; -- finished!
  actualread = fread(buffer, blocksize)
  fseek(pos + datamoved)
  fwrite(buffer, actualread)
  datamoved += actualread
} 
```

循环之后的最后一步是将文件“截断”为 pos+datamoved 大小。如果底层文件系统不处理'truncatefile'操作，那么你必须重写..但大多数文件系统和库都支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:12:58.020

简短的回答是不，大多数文件系统不会尝试支持这样的操作。

这让你有两个选择。显而易见的一个是创建数据的副本，去掉不需要的部分。您可以就地执行此操作（即，在同一个文件中移动数据）或使用辅助文件，通常将数据复制到新文件，然后执行诸如将新文件重命名为旧名称之类的操作。

另一个主要选择是简单地重新构建您的文件和数据，这样您就不必完全摆脱旧数据。例如，如果你想保留一个进程最近的 N 数据量，你可以将文件（大部分）构造为一个循环缓冲区，在开头有几个“指针”告诉你头和尾点，所以你知道从哪里读取数据/向哪里写入数据。使用这样的结构，您不会擦除或删除旧数据，只需根据需要覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:12:16.073

如果您有足够的内存，请将其内容完全读取到内存中，将其复制回文件的前面，然后截断文件。

如果您没有足够的内存，请在块中复制，并且仅在您完成后截断文件。

# google-apps-script - 谷歌电子表格电子邮件

> ID：12223034
> 
> 赞同：2
> 
> 时间：2012-08-31T22:07:17.240
> 
> 标签：google-apps-script, google-sheets

我是 Google Scripts 的新手，想知道是否有人可以帮助我。

我有一个共享的谷歌电子表格，它基本上用新的员工信息更新行。

我希望只有在插入这些新员工行时，特定列（比如说 F 列）上存在与“ABC”匹配的字符串时才触发电子邮件。基本上，电子邮件触发器会让我们的团队知道设置新的员工帐户。

谁能帮我吗？我不知道如何进行字符串匹配或将其专门发送给固定的电子邮件收件人。我已经安装了 Python 和 gspread 和 gdata，感觉我把它复杂化了，但是好几天都没有取得任何进展......

请帮忙！

在此先感谢，杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:41:06.267

这里的答案取决于电子表格如何获取其数据。

如果数据是通过表单获得的，您可以简单地创建一个函数并设置一个提交触发器。代码：

```
function formSubmit(e) {
  //Column F is the 6th colmn so you want the 5th value from the array (array starts with 0)
  if (e.values[5] == "ABC"){
    //read: https://developers.google.com/apps-script/class_gmailapp#sendEmail
    GmailApp.sendEmail("bla@bla.com","Subject","Content")
  }
} 
```

然后转到您的脚本触发器并将此函数添加到 onSubmit 触发器。

如果有人在电子表格中输入数据，则很难找出它在哪一列

尝试这样的事情：

```
function onEdit(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  if (rangeArray = ss.getActiveCell().getRow() == 6){
    if (ss.getActiveCell().getValue() == "ABC"){
      GmailApp.sendEmail(recipient, subject, body, options)
      //etcetc
    }
  }
} 
```

现在您使用 onEdit 功能，您不需要在这里设置触发器。

希望这个对你有帮助！

亲切的问候，

托马斯·范拉图姆

# php - 如何将 jquery get 字符串传递给 php 脚本

> ID：12223038
> 
> 赞同：0
> 
> 时间：2012-08-31T22:07:24.743
> 
> 标签：php, jquery, get, urlencode

我确定这个问题已经被问过很多次了，但是经过相当多的搜索后我找不到答案。

我有一个简单的 jquery ajax 请求来获取特定字符串的一些数据，如下所示：

```
$.ajax( 
   { url: "/getval.php?title="+encodeURIComponent(title), 
     dataType:"json", 
     success: function(data) { console.log(data) } 
   }); 
```

php脚本正在使用：

```
$title = urldecode($_GET["title"]); 
```

从获取请求中获取值。它不需要适用于每个可以想象的字符串，但我确实需要它适用于带有单引号的字符串。执行此请求并在 php 中处理请求的最安全（也是最简单）的方法是什么？

在此先感谢，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:12:58.600

何为艰难？

jQuery：

```
$.get("/getval.php", { title: 'your title' },
   function(data){
     console.log(data);
  }
); 
```

PHP：

```
<?php

$title = $_GET['title']; 
```

请始终先阅读手册：

*   [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:14:30.533

您只需要设置`data`属性，PHP 将从`$_GET`数组中获取值：

```
$.ajax( 
   { url: "/getval.php", 
     dataType:"json",
     data: { title: 'the title' },
     success: function(data) { console.log(data) } 
   }); 
```

# ios - 在单独的文件中使用接口声明

> ID：12223039
> 
> 赞同：1
> 
> 时间：2012-08-31T22:07:26.447
> 
> 标签：ios, interface

游戏.h 文件

```
@interface ViewController : UIViewController
{
  UIImageView * player;
}

@end 
```

游戏.m

```
-(void)InitPlayer
{    
  player.tag = 0;
} 
```

播放器.m

我希望 InitPlayer 在这个文件中，但在 game.h 文件中保留声明。

```
- (void)InitPlayer
{
  player.tag = 0;  // access UIImageView *player;

} 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:20:22.213

只需使用它来声明`-InitPlayer`类的公共接口的一部分：

```
@interface ViewController : UIViewController
{
@private
  UIImageView * player;
}

- (void)InitPlayer;

@end 
```

然后你将你的实现保存`-InitPlayer`在 ViewController.m 中，它必须驻留在那里。您不能将方法的实现放在`@interface`块内。

如果您来自其他语言，那么您应该知道 objc 中的调度是动态的——在标题中放置定义（如果可能的话）不会导致内联/优化。

**针对已澄清的问题：**

好的，那么就这样做：

播放器.h

```
@interface Player : NSObject
- (void)prepareUIImageView:(UIImageView *)pImageView; // << could actually be a class method in this case
@end 
```

播放器.m

```
@implementation Player

- (void)prepareUIImageView:(UIImageView *)pImageView
{
    pImageView.tag = 0;
}

@end 
```

然后你可以告诉 Player 从 初始化视图`ViewController`，假设它本身没有控制器。

（注意：objc 方法名称通常以小写字符开头。同样，对客户隐藏这些初始化内容通常是个好主意）

# c# - 使用 LibTiff.Net 从 tif 图像中获取 tiff 标签计数的最佳/最快方法是什么？

> ID：12223041
> 
> 赞同：1
> 
> 时间：2012-08-31T22:07:48.683
> 
> 标签：c#, tags, tiff, libtiff.net

正如标题中所述，获取图像中 tiff 标签数量的最佳和最快方法是什么？

目前我知道的唯一方法是尝试使用 GetField() 方法查询标签 1-65534 并简单地计算。我可以从 LibTiff.Net 库中的 Tiff 对象访问某种类型的数组或标签列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:12:55.223

您当前的方法是唯一可通过 API 获得的方法。所以，显然，它是最快的。

`Tiff`类维护当前图像目录（页面）的内部表示。此信息包含所有找到的标签。但是，尝试获取该信息可能不值得麻烦。

# eclipse - Gprof可以更详细吗？

> ID：12223043
> 
> 赞同：0
> 
> 时间：2012-08-31T22:08:04.340
> 
> 标签：eclipse, gprof

我正在尝试使用 gprof 分析我的 C 代码。我正在使用 -pg 选项编译 .a 库，并使用 -pg 和这个 .a 库编译可执行文件。跑步。获取 gmon.out。使用 Eclipse 查看它。我得到的只是下面的截图所示。我认为应该有一些功能而不是那些地址。有人可以告诉我如何解决吗？在此先感谢， - 伊利亚。 ![游戏](../Images/864ce59ffe38f9c13085db9d694ed740.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:29:22.047

我刚刚使用命令行而不是 Eclipse 使用 gprof 检查了 gmon.out，似乎没有任何 ?? 和 0x 地址。所以我认为这是某种 Eclipse 查看器问题。感谢您对此的关注。我也会尝试你建议的所有工具。

# jquery - 如何使用jquery通过选定的选项值选择一个选择字段

> ID：12223045
> 
> 赞同：1
> 
> 时间：2012-08-31T22:08:13.020
> 
> 标签：jquery

标题说明了一切。jquery 如何通过选定的选项值来选择一个选择字段。IE。我想选择所有选择字段，其中 2 是所选选项的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:11:14.813

将[`:selected`](http://api.jquery.com/selected-selector/)选择器与选择器结合使用[`attribute equals`](http://api.jquery.com/attribute-equals-selector/)：

```
​$("select option:selected[value='2']").parent() 
```

**[演示](http://jsfiddle.net/BJvD8/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:11:26.500

您可以使用`:has`选择器。

```
$('select:has(option[value="2"]:selected)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:17:09.343

```
$('#SelectId option').each(function() {
  if($(this).val()==desiredValue) $(this).attr('selected','selected');
}); 
```

[http://jsbin.com/amomek/1/edit](http://jsbin.com/amomek/1/edit)例如。

# android - 路线不尊重Android中的街道

> ID：12223063
> 
> 赞同：1
> 
> 时间：2012-08-31T22:10:38.050
> 
> 标签：android, google-maps, google-maps-api-3

我有一个获取当前位置的应用程序，用户选择一个目的地，这两个起始位置，它查询谷歌： [https ://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

并获得一个带有我“转弯”到达目的地的地方的 xml

在我阅读了 xml 之后，在 xml 的第一个点和第二个点之间追踪了一条路径，依此类推

在 API 更改之前，街道上的路径是完美的，但现在看起来像这样：

![图片](../Images/8a5cd33becc8cf9809af04aa73bf42f8.png)

我用来绘制的代码：

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);

    Projection proj = mapView.getProjection();

    Point ponto1, ponto2;
    Path caminho = new Path();
    for (int i = 0; i < geoPoints.size() - 1; i++) {
        ponto1 = proj.toPixels(geoPoints.get(i), null);
        ponto2 = proj.toPixels(geoPoints.get(i + 1), null);

        caminho.moveTo(ponto2.x, ponto2.y);
        caminho.lineTo(ponto1.x,ponto1.y);

        canvas.drawPath(caminho, paint);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:37:11.143

这可能会对您有所帮助，我为与您有相同问题的人写了一个广泛的答案。看看吧，希望对你也有帮助

[https://stackoverflow.com/a/11357351/975959](https://stackoverflow.com/a/11357351/975959)

# django - 如果模板中存在项目，则自动添加更多项目

> ID：12223065
> 
> 赞同：0
> 
> 时间：2012-08-31T22:10:50.537
> 
> 标签：django

我有一个应用程序可以从我的视图中将“书”对象传递给模板。

如果正在传递“书”，我想自动将更多项目添加到模板上下文中。我不想为通过“书”的每个视图都这样做。

例如，如果“book”存在，则将与“books”相关的“other_books_user_read”添加到模板中。

我试图使用中间件来做到这一点，但如果“书”存在，我不知道如何检查上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:49:19.217

您可以制作一个执行此行为的模板标签，或者您可以在您的书籍模型上放置一个您可以在模板中访问的方法。

这是最简单的解释：

```
class Book(Model):
   def other_books_users_read(self):
      return Book.objects.filter(...)

{{ book.other_books_users_read }} 
```

模板标签：弄清楚自定义模板标签的工作原理是您的责任，但基本上代码将是......

```
@register.assignment_tag
def get_other_books_users_read(book):
    return Book.objects.filter(...) # logic here to get the books you need.

{% get_other_books_users_read book as other_books_users_read %}
{% for book in other_books_users_read %}
... 
```

现在，如果你真的想要它在上下文中，而一行代码（和一个点）工作量太大，你可以设置一个将内容注入上下文的中间件。

[https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-template-response](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-template-response)

```
class MyMiddleware(object):
    def process_template_response(self, request, response):
        if 'book' in response.context_data:
             response.context_data['other_books'] = Book.objects.filter(...)
        return response 
```

但是 IMO 使用模板上下文中间件是一种愚蠢的方式，因为您实际上可以访问模板中的书籍对象。

# grails - 如何保存具有多个多对一关系的 GORM 对象？

> ID：12223066
> 
> 赞同：3
> 
> 时间：2012-08-31T22:10:59.727
> 
> 标签：grails, groovy, grails-orm

假设我有以下域类层次结构。

```
class School {
   String name
   static hasMany = [teachers: Teacher, students: Student]
}

class Teacher {
   String name
   static belongsTo = [school: School]
   static hasMany = [students: Student]
}

class Student {
   String name
   static belongsTo = [school: School, teacher: Teacher]
} 
```

我尝试了两种不同的方法来拯救学校、老师和学生。

**尝试1：**

```
def school = new School(name: "School").save()
def teacher = new Teacher(name: "Teacher", school: school).save()
def student = new Student(name: "Student", school: school, teacher: teacher).save(flush: true) 
```

它似乎可以正确保存，但是当我运行时：

```
println(school.students*.name) 
```

它打印*null*。

所以我决定尝试不同的方法。

**尝试2：**

```
def school = new School(name: "School")
def teacher = new Teacher(name: "Teacher")
def student = new Student(name: "Student")
teacher.addToStudents(student)
school.addToStudents(student)
school.addToTeachers(teacher)
school.save(failOnError: true, flush: true) 
```

在这里，我尝试了几种保存组合，但总是收到有关必填字段为空的错误。在这种情况下，错误是

> JdbcSQLException：列“TEACHER_ID”不允许为 NULL

如果有人能解释我的尝试失败的原因以及创建数据的正确方法是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:30:29.163

```
def school = new School(name: "School").save(flush: true)
def teacher = new Teacher(name: "Teacher")
school.addToTeachers(teacher)
teacher.save(flush: true)
def student = new Student(name: "Student", teacher: teacher)
school.addToStudents(student) 
```

# java - 如何从 InputStream 中读取字节？

> ID：12223072
> 
> 赞同：5
> 
> 时间：2012-08-31T22:12:02.110
> 
> 标签：java, inputstream

我想测试我写入的字节`OutputStream`（文件 OuputStream）是否与我从 same 中读取的字节相同`InputStream`。

**测试**看起来像

```
 @Test
    public void testStreamBytes() throws PersistenceException, IOException, ClassNotFoundException {
        String uniqueId = "TestString";
        final OutputStream outStream = fileService.getOutputStream(uniqueId);
        new ObjectOutputStream(outStream).write(uniqueId.getBytes());
        final InputStream inStream = fileService.getInputStream(uniqueId);
    } 
```

我意识到`InputStream`没有`getBytes()`。

我怎样才能测试类似的东西

```
assertEquals(inStream.getBytes(), uniqueId.getBytes()) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:28:27.630

你可以使用[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)

```
ByteArrayOutputStream buffer = new ByteArrayOutputStream();

int nRead;
byte[] data = new byte[16384];

while ((nRead = inStream.read(data, 0, data.length)) != -1) {
  buffer.write(data, 0, nRead);
}

buffer.flush(); 
```

并检查使用：

```
assertEquals(buffer.toByteArray(), uniqueId.getBytes()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:15:53.417

试试这个（IOUtils 是 commons-io）

```
byte[] bytes = IOUtils.toByteArray(instream); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:27:41.910

您可以从输入流中读取并在 ByteArrayOutputStream 上写入，然后使用[toByteArray()](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#toByteArray%28%29)方法将其转换为字节数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:25:08.870

Java 不能提供你想要的东西，但你可以用类似 a[`PrintWriter`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)和的东西来包装你正在使用的流[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)：

```
new PrintWriter(outStream).print(uniqueId);
String readId = new Scanner(inStream).next();
assertEquals(uniqueId, readId); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-31T22:29:48.127

为什么不尝试这样的事情呢？

```
@Test
public void testStreamBytes()
    throws PersistenceException, IOException, ClassNotFoundException {
  final String uniqueId = "TestString";
  final byte[] written = uniqueId.getBytes();
  final byte[] read = new byte[written.length];
  try (final OutputStream outStream = fileService.getOutputStream(uniqueId)) {
    outStream.write(written);
  }
  try (final InputStream inStream = fileService.getInputStream(uniqueId)) {
    int rd = 0;
    final int n = read.length;
    while (rd <= (rd += inStream.read(read, rd, n - rd)))
      ;
  }
  assertEquals(written, read);
} 
```

# vba - 宏将数据从一张纸复制到另一张纸，仅当尚未存在时

> ID：12223073
> 
> 赞同：1
> 
> 时间：2012-08-31T22:12:06.583
> 
> 标签：vba, excel

我正在努力解决这个宏。我有两张床单；一个具有大量数据的数据集，这些数据由宏针对多个日期进行更新。

我想将数据从该工作表（“rawdata1”）复制到另一个工作表（“sheet1”），但前提是数据不存在（不希望“sheet1”上有多个相同数据条目）。我将数据复制到另一张表没有问题，但是当宏运行多次时，如何避免重复条目？

我到目前为止的代码：

```
Sub CopyData()
'Copy data if not present in other sheet
'???

Sheets("rawdata1").Select
Range("A4:AC10000").Select
Range("A4:AC10000").Copy

Sheets("Sheet1").Select
  ' Find the last row of data
  FinalRow = Cells(Rows.Count, 1).End(xlUp).Row
  ActiveSheet.Paste
  Sheets("Sheet1").Select 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:27:37.690

您的代码可以简化为：

```
Sheets("rawdata1").Range("A4:AC10000").Copy _
      Sheets("Sheet1").Cells(Rows.Count, 1).End(xlUp).Offset(1,0)    
Sheets("Sheet1").Select 
```

至于防止同一行的多个副本，如果您在 Excel 2007+ 中，则可以在运行副本后使用 RemoveDuplicates：这会将范围缩小到仅唯一行。注意：您需要调整`Columns`参数以包含所有相关的列号。

```
ActiveSheet.UsedRange("$A$1:$E$8").RemoveDuplicates _
    Columns:=Array(1, 2, 3, 4, 5), Header:=xlYes 'or xlNo, depending on your data 
```

# javascript - 如何使用 JavaScript 将焦点设置到下一个字段（基于 tabindex）？

> ID：12223074
> 
> 赞同：0
> 
> 时间：2012-08-31T22:12:11.420
> 
> 标签：javascript, html

> **可能重复：**
> [如何使用 jQuery 自动跳到下一个字段？](https://stackoverflow.com/questions/6360594/how-can-i-automatically-tab-to-the-next-field-using-jquery)

`tab`是否可以用 JavaScript模拟按键？

我希望焦点切换到下一个最高的字段[`tabindex`](http://www.w3.org/TR/1999/REC-html401-19991224/interact/forms.html#adef-tabindex)，就像实际按下`tab`一样。

# loops - PowerShell：多个脚本进度的写入进度

> ID：12223077
> 
> 赞同：7
> 
> 时间：2012-08-31T22:12:39.093
> 
> 标签：loops, powershell, progress

**我的研究：**

好的，我已经查看了数十个示例`Write-Progress`并观察了以下内容。大多数时候与循环结合使用，通常是“for”或“foreach”。大多数示例除了数到 100 之外什么都不做。其他更有用的示例将执行某个命令，例如复制文件。没有示例包含整个脚本。

**我的设置：**

我有几个脚本（数千行代码）在特定时间相互调用。一个脚本控制或调用所有其他脚本。该脚本运行大约 15 分钟，在此期间我想使用`Write-Progress`.

**我的问题：**

`Write-Progress`当我的所有脚本正在执行时，我如何使用它来提供状态？基本上，我想“包装”`Write-Progress`我所有的脚本，或者任何从单个脚本中为多个被调用脚本提供状态的最佳方法。

**最好的例子：**

到目前为止，我看到的最佳用途是`Update-Help`在 PowerShell V3 中使用 CmdLet。但是因为我看不到`Update-Help`CmdLet 的源代码，所以这对我没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T22:57:34.110

试试这个。第一个文件是master.p1：

```
$parentId = 1
$childId = 2

Write-Progress -Id $parentId -Activity "Running master script" -Status "Step 1 of 3" -PercentComplete 0

.\slave.ps1 $parentId $childId

Write-Progress -Id $parentId -Activity "Running master script" -Status "Step 2 of 3" -PercentComplete 33.3

.\slave.ps1 $parentId $childId

Write-Progress -Id $parentId -Activity "Running master script" -Status "Step 3 of 3" -PercentComplete 66.3

.\slave.ps1 $parentId $childId 
```

第二个文件是slave.ps1：

```
param([int32]$ProgressParentId, [int32]$progressId)

for($i = 0; $i -le 100; $i += 10)
{
    Write-Progress -Id $progressId -ParentId $parentId `
                   -Activity "Running slave script" `
                   -Status "Processing $i" `
                   -CurrentOperation "CurrentOp $i" -PercentComplete $i
    Start-Sleep -Milliseconds 500
} 
```

Put those two files in the same dir and from PowerShell (or ISE) execute master.ps1\. I have used this approach before to report progress of multiple phases across multiple scripts. The key is to pass the `ParentId` of the top level progress to the child scripts so they can report progress in that same context. If you provide a unique `Id` for each, they can get their own separate progress bar. Or just the same `Id` everywhere to update a single progress bar.

# mysql - 正则表达式让mysql变得疯狂

> ID：12223078
> 
> 赞同：0
> 
> 时间：2012-08-31T22:12:41.533
> 
> 标签：mysql

我在使用mysql时遇到了一些问题。请参阅下一个脚本，我将在其中创建一个表、插入一些数据、查询、更改数据，然后再次查询。

考虑这个脚本：

```
#Create the table
DROP TABLE IF EXISTS T;

CREATE TABLE `T` (
  `id` BIGINT(20) UNSIGNED NOT NULL,
  `x` VARCHAR(50) COLLATE utf8_bin DEFAULT NULL,
  `y` VARCHAR(15) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `d6fe1d0be6347b8ef2427fa629c04485` (`x`),
  KEY `ee16755af8c89d0c26540daf7a0fe1b3` (`y`)
) ENGINE=MYISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

#Add two lines
INSERT INTO T VALUES (1,'login','read'), (3,'','read');

#Query 1: expected 1 line, got 1 line
SELECT * FROM T WHERE
`y` = 'read' AND
(
        ('login' = '' AND `x` = '') OR
        (`x` != '' && 'login' REGEXP `x`)
);

#Query 2: expected 1 line, got 2 line
SELECT * FROM T WHERE
`y` = 'read' AND
(
        ('login' = '' AND `x` = '') OR
        ('login' REGEXP `x`)
);

#Invert field x
UPDATE T SET `x` = '' WHERE id = 1;
UPDATE T SET `x` = 'login' WHERE id = 3;

#Another time, Query 1: expected 1 line, got 1 line
SELECT * FROM T WHERE
`y` = 'read' AND
(
        ('login' = '' AND `x` = '') OR
        (`x` != '' && 'login' REGEXP `x`)
);

#Another time, Query 2: expected 1 line, got 1 line
SELECT * FROM T WHERE
`y` = 'read' AND
(
        ('login' = '' AND `x` = '') OR
        ('login' REGEXP `x`)
); 
```

它将输出：

```
id      x       y
1       login   read

id      x       y
1       login   read
3               read

id      x       y
3       login   read

id      x       y
3       login   read 
```

我认为这是一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:03:51.100

向 MySQL 报告：已验证为错误。[http://bugs.mysql.com/bug.php?id=66720](http://bugs.mysql.com/bug.php?id=66720)

# mysql - 用于查询坐标的最有效的 MySQL 解决方案

> ID：12223079
> 
> 赞同：3
> 
> 时间：2012-08-31T22:12:41.807
> 
> 标签：mysql, geolocation, query-optimization, spatial-query

我有一个地理定位对象的数据库：

*   ID
*   纬度
*   经度

我正在查询数据库以获取框内的对象：

```
WHERE longitude >= - 33.83789
  AND longitude <= 33.837891
  AND latitude >= 4.214943
  AND latitude <= 40.979898 
```

有一个索引：`latitude, longitude`。

**有没有更有效的方法来存储/查询数据库？**目前，根据框坐标/对象密度，查询时间从 0.1 秒到超过 1 秒不等。

我知道[MySQL Spacial 扩展](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)，但使用起来似乎有点工作，我不知道它是否会更容易/更有效。

*附加信息*：我还计划在未来执行简单的基于距离的查询（获取指定位置附近的对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:15:42.170

> 有没有更有效的方法来存储/查询数据库？

绝对，是的！[空间扩展](http://dev.mysql.com/doc/refman/5.6/en/spatial-extensions.html)正是为了解决这个问题而设计的。

> 我知道 MySQL Spacial 扩展，但使用起来似乎有点工作，我不知道它是否会更容易/更有效。

这并不容易（但也不难），而且*效率**更高*。对于大型数据集，它可以*更*有效。

# php - 如何在单个数组中显示更多数量的数组结果？

> ID：12223080
> 
> 赞同：1
> 
> 时间：2012-08-31T22:12:55.370
> 
> 标签：php, mysql, arrays, json, jsonresult

我有两个表：登录`and`跟随`。

*   表名：`login`
    字段：`id,email,username,imageurl`

*   表名：`follow`
    字段：`id:user_id:follow_id`

这就像 Twitter 追随者的概念。我想获取姓名的详细信息`myfollower`以及`myfollower`以下人员的姓名。

为此，我编写了如下代码。

```
public function follw ()
{
    if( $this->input->get("userid")  )

     {          

    extract($this->input->get()); 

    $followers_list = array();

    $follower = array();

    $query = $this->db->query('select follow_id from follow where user_id = '.$userid.'')->result();

    foreach($query as $row)

    { 
        $follower['follower_id'] = $row->follow_id;

        if($follower['follower_id'] == "")
        {
            echo "hi";
        }

        else
            {
        $query3 = $this->db->query('select username from login where id = '.$follower['follower_id'].'')->result();

        foreach($query3 as $row3)

            {
                $follower['followuser'] = $row3->username;
            }

        $query1 = $this->db->query('select follow_id from follow where user_id = '.$follower['follower_id'].'')->result();

        foreach($query1 as $row1)

            {
                $follower['follow_id'] = $row1->follow_id;

            if($follower['follow_id'] == "")

            {
                echo "jeeva";
                }

            else
            {
        $query2 = $this->db->query('select username from login where id = '.$follower['follow_id'].'')->result();

        foreach($query2 as $row2)

            {
                $follower['username'] = $row2->username;

            }

            }//second for each in else loop
            }//first foreach in else loop

            }//main else
        $followers_list[] = $follower;

        }

        $str = json_encode($followers_list);
    echo stripslashes($str);
}

else
{
    echo '[{"status":"Failure  - Error Occured - Not Enough Details provided"}]';

    }
} 
```

我得到这样的输出：

```
[{"follower_id":"12","followuser":"janmejoy","follow_id":"24","username":"sarvana"},{"follower_id":"10","followuser":"jeeva","follow_id":"23","username":"selva"},{"follower_id":"6","followuser":"raj","follow_id":"17","username":"jeeva"},{"follower_id":"23","followuser":"selva","follow_id":"22","username":"guru"}] 
```

此输出显示`myfollower`' 姓名 和`myfollower`' 关注人员姓名，但问题是它仅显示`myfollower`' 关注人员姓名的一个成员。

但是，我想要这样的输出：

```
[{"follower_id":"12","followuser":"janmejoy",{"follow_id":"24","username":"sarvana",follow_id":"13","username":"jai",follow_id":"9","username":"raj"}},{"follower_id":"10","followuser":"jeeva","follow_id":"23","username":"selva"},{"follower_id":"6","followuser":"raj","follow_id":"17","username":"jeeva"},{"follower_id":"23","followuser":"selva","follow_id":"22","username":"guru"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:05:19.990

> [{"follower_id":"12","followuser":"janmejoy",{"follow_id":"24","username":"sarvana",follow_id":"13","username":"jai", follow_id":"9","username":"raj"}},{"follower_id":"10","followuser":"jeeva","follow_id":"23","username":"selva"} ,{"follower_id":"6","followuser":"raj","follow_id":"17","username":"jeeva"},{"follower_id":"23","followuser":"selva ","follow_id":"22","用户名":"guru"}]

此代码是无效的 JSON 变量。我无法为你解决这个问题。请更新您的问题。

# javascript - 复制并粘贴到 html 中的 Microsoft Word 元数据（内容可编辑）

> ID：12223090
> 
> 赞同：1
> 
> 时间：2012-08-31T22:13:31.403
> 
> 标签：javascript, jquery, html, metadata

我想知道是否有任何方法可以从 Microsoft Word 或其他文本编辑程序的 html div / content editable = true 中复制和粘贴的段落/句子中忽略或删除元数据？

我正在构建一个作为文本编辑器的 html 应用程序，但问题是每次有人复制和粘贴已经在另一个程序中格式化的文本（单词、其他 html 页面）时，它都会添加一些我不知道如何的元数据剥离。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-31T22:34:54.607

您可能会考虑为此使用[TinyMCE](http://www.tinymce.com)，因为它是具有该功能的 WYSIWYG 文本编辑器。有一个[演示页面](http://www.tinymce.com/tryit/full.php)，在编辑器“Paste From Word”的顶部有一个按钮。

如果不能使用 TinyMCI，您可以[下载它的源代码](http://www.tinymce.com/download/download.php)并确定 TinyMCE 是如何做到的。

# console - 如何为 Xbox Kinect 构建控制台应用程序

> ID：12223092
> 
> 赞同：0
> 
> 时间：2012-08-31T22:13:49.020
> 
> 标签：console, kinect, xbox

我对编程还很陌生，而且我在工作中遇到了相当艰巨的任务。我需要从头开始构建一个程序，以便利用 Kinect 的运动跟踪功能与另一个应用程序交互。

一些上下文：

与我一起工作的其他人已经构建了测试程序——一个使用 OpenGL 的控制台应用程序。测试程序由天空图内的立方体组成。摄像头看着小立方体，可以围绕立方体旋转，从不同的角度观察它

其他人能够使用开发人员工具包中的示例代码来控制测试程序。测试程序现在可以与运动跟踪一起使用（将您的手滑到一边旋转立方体；左右移动您的头会改变相机角度，因此看起来您正在环顾一个浮动的 3D 对象；向前或向后行走会缩放相机） . 它按原样工作，但是...

问题是：既然我们知道这一切都有效，是时候简化一切，以便我们可以在平板电脑上运行测试程序。所以代码需要被剥离到最简单的部分。我们需要从 SkeletalViewer 代码中删除除收集和处理数据的元素之外的所有内容，以便可以在另一个程序中使用它。

我被要求从头开始构建一个控制台应用程序（而不是拆开示例代码——因为这非常混乱），它允许我们将 Kinect 与我们的测试程序一起使用。

过去几周我一直在试图找出代码，我感到不知所措！我不知道从哪里开始。

这是我的问题：Kinect 程序中绝对最基本的构建块是什么？我不需要它来画任何东西。我只需要一个控制台应用程序，它在运行时会收集运动跟踪数据并将其发送到其他程序。

我将非常感谢您提供的任何指导。

先感谢您！！！

-京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:36:15.973

您不需要绘制任何东西，但需要创建一个事件来缓存帧以便使用它们。

下面是对骨骼关节的非常酷的描述：[MSDN - Kinect](http://msdn.microsoft.com/en-us/library/hh438998.aspx)
我可以给你的另一件事是 Kinect 项目的主页。这里是库、指南、代码示例等。您可以下载并安装 Kinect Toolkit，里面有几个程序（二进制文件 + 代码示例）- 学习 Kinect API 所需的一切：[Kinect For Windows - 下载](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)和[Kinect For Windows - 学习](http://www.microsoft.com/en-us/kinectforwindows/develop/learn.aspx)

# .net - NLog 的沙发底座

> ID：12223093
> 
> 赞同：3
> 
> 时间：2012-08-31T22:13:50.157
> 
> 标签：.net, nlog, couchbase

我是 Couchbase 和 NoSql 的新手，所以我想知道使用 Couchbase 作为 NLog 日志记录的目标是否可行。我写了一个快速而肮脏的 Couchbase/NLog 目标，它确实将信息记录在指定的存储桶中。所以写信给 CB 就完成了，而且工作正常。

我看到的问题是从存储桶中获取/读取数据。我不知道键名……它们只是随机的向导。我只想转储数据，而 CB 1.8 不支持从 .NET 客户端获取所有密钥。

因此，如果我想制作一个查看器应用程序来查看存储桶中的数据，我该从哪里开始呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T18:00:25.673

您必须将每个密钥及其元数据存储在 ram 中。我怀疑你想对日志这样做。

您可能想要存储在 ElasticSearch 中。有一个叫做 Nest 的 .net 客户端，或者你可以只做 json 帖子。Elasticsearch 在文档和内存之间没有 1:1 的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T12:43:20.147

使用 map reduce 视图，您可以使用下面的 doc.key 获取所有键的列表，或者如果您想要键 (id) 和完整文档，则只需发出 doc。这仅适用于 couchbase 2.0 及更高版本。

```
function (doc, meta) {
 if(meta.type == 'json') {
   emit(doc.key, null);    
 }
} 
```

您可以使用 cbbackup 工具转储所有数据访问[http://www.couchbase.com/docs//couchbase-manual-2.0/couchbase-backup-restore-backup-cbbackup.html](http://www.couchbase.com/docs//couchbase-manual-2.0/couchbase-backup-restore-backup-cbbackup.html)

Couchbase 还支持在管理控制台中使用 XDCR 将数据复制到弹性搜索节点/集群。访问[http://docs.couchbase.com/couchbase-elastic-search/](http://docs.couchbase.com/couchbase-elastic-search/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T19:57:27.463

使用 Couchbase Server 3.x，您现在可以从 RAM 中弹出元数据和文档数据。此功能允许 Couchbase Server 3 存储非常大的数据集，并允许您在 RAM 中以增量方式索引更新，即使在大型或高速数据集上也是如此。

此外，正如其他人所指出的，Couchbase 服务器具有适用于 Lucidworks Solr、ElasticSearch、Splunk 等的插件。

试试 Couchbase 3.0，亲自看看吧！

[http://www.couchbase.com/nosql-databases/downloads](http://www.couchbase.com/nosql-databases/downloads)

# windows - 如何在 Windows 中 apt-get install libjpeg-dev libpng-dev -y？

> ID：12223097
> 
> 赞同：1
> 
> 时间：2012-08-31T22:14:06.177
> 
> 标签：windows, installation

我正在尝试在 Windows 上安装一些东西，其中一个要求是：

```
apt-get install libjpeg-dev libpng-dev -y 
```

这些库是否有 Windows 等价物？

FWIW，这是来自 sourceforge 的 python 程序的先决条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:24:21.130

这是用于在 Linux 上安装包（库）的命令。因此，它不能在 Windows 操作系统上执行。

如果你真的必须在 Windows 上工作，这里有替代方案：

1.  使用[Cygwin](http://www.cygwin.com/)并尝试 Cygwin 的安装程序 ( [apt-cyg](http://code.google.com/p/apt-cyg/) )。
2.  使用[VMware Player](http://www.vmware.com/products/player/)等虚拟化软件并在 Windows 上虚拟运行 Linux。

# javascript - 在 JavaScript 中创建动态超链接的正确方法是什么？

> ID：12223107
> 
> 赞同：2
> 
> 时间：2012-08-31T22:15:06.173
> 
> 标签：javascript, jquery, html, hyperlink

我知道创建这样的链接是不受欢迎的，`<a href="javascript:my_func();">link text</a>`这样会欺骗用户认为它是一个真正的链接。

我有很多链接实际上只是在浏览器中运行 JS 代码而不是强制页面导航，因此我不想使用上述内容，我正在寻找一种适用于所有浏览器**并**防止*中间点击*打开的替代方法一个新的标签/窗口。

以下方法是否令人满意？

**HTML**

```
<a href="javascript:void(0);" id="id_here">link text</a> 
```

**JavaScript**

```
$("#id_here").bind('click',(function(params){
    return function(){
        // do stuff here with `params`
    };
})(params)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:21:31.100

`javascript:`什么都不好。`javascript:`上面两种用法没有太大区别。使用`"#"`for`href`也一样糟糕；它在 JS 关闭的情况下添加到历史记录中，并且链接没有用。您应该做的（理想情况下）是让链接实际工作，例如

```
<a href="/an/actual/path"> ... 
```

然后，使用 JS，防止默认链接行为

```
$("#id_here").on('click', function (e) { e.preventDefault(); }); 
```

如果没有实际的路径可以去，那么链接甚至不应该在 JS 关闭的情况下暴露；您可以稍后将其附加到 DOM 或仅使用 CSS 隐藏它（并使用 JS 显示它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:38:44.757

我做了一些游戏，你可以得到一些[好的](http://jsfiddle.net/jgEyY/show)结果`hashchange`：

```
var commands = {
    foo: function() { alert("Foo!"); },
    bar: function() { alert("Foo bar!"); },
    baz: function() { alert("Foo bar baz!"); }
};

$(window).bind('hashchange', function() {
    var hash = window.location.hash.replace(/^#/,'');
    if(commands[hash]) {
        commands[hash]();
        return false;
    }
}).trigger('hashchange');​ 
```

使用简单的 HTML：

```
<a href="#foo">Foo</a>
<a href="#bar">Bar</a>
<a href="#baz">Baz</a>​ 
```

如果您右键单击 -> 在新选项卡中打开或单击中键，这甚至可以工作！

* * *

请注意，`hashchange`并非所有浏览器都支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:21:45.487

我建议您使用除 之外`<a>`的另一个节点，例如`<div>`：

```
<div id="jsLink" style="cursor:pointer">Click Me</div> 
```

和 jQuery：

```
$("#jsLink").click(function(params){
  // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:22:19.937

```
<a href="#" id="id_here">link text</a> 
```

# 在这里使链接看起来像链接 JavaScript：

```
$("#id_here").bind('click',function(e){
    e.preventDefault();
}) 
```

e.preventDefault() 不允许浏览器执行默认操作（例如导航到另一个页面）

# java - 在 Web 服务器中写入文件而不指定真实路径

> ID：12223108
> 
> 赞同：1
> 
> 时间：2012-08-31T22:15:21.573
> 
> 标签：java, jsp, servlets, file-io, filewriter

在我的应用程序中，我有一个函数，我需要在 webcontent 文件夹中写入一个文件，我有一个名为 data 的文件夹，我需要写一个新名称，如果我给出了真实路径（ C:\Users\SanWin\workspace\ RoleAccessControl\data\ActivityLog.txt）它写入文件但是当项目要在不同的机器上运行时这必须改变，所以我用它来获取真实路径

```
ServletContext ctx = getServletContext();
        String path = ctx.getRealPath("/data/ActivityLog.txt");
        System.out.println(path); 
```

当我打印时，我在控制台中收到以下消息

> C:\Users\SanWin\workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\RoleAccessControl\data\ActivityLog.txt

我不知道系统是如何得到这条线的

> .metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\

这是在 Eclipse 中，我期待像 **C:\Users\SanWin\workspace\RoleAccessControl\data\ActivityLog.txt这样的东西**

如何获得我想要摆脱线条（.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps）的真实路径，我查看并做了我在互联网上看到的所有可能，但失败了，抱歉如果我发了重复的帖子，请原谅我感谢您的时间和回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:28:39.500

在 Eclipse 的 Servers 视图中，您可以双击您的服务器以打开一个配置屏幕，该屏幕允许您设置不同的部署路径（至少在 Tomcat 中）。请注意，您只能在没有部署任何内容时修改该设置，否则您将看到选项灰显。

![在此处输入图像描述](../Images/a0c7b985c9328711c948eb04a0af0563.png)

`.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\`你得到的是因为你有使用*工作区元数据*选项。

无论如何，如果您将您的战争直接手动部署到 Tomcat webapps 文件夹中，而不使用 Eclipse，您将获得正确的路径。

换句话说，您的代码是正确的并且为您提供了正确的路径，您只是不喜欢您的应用程序的部署路径。

希望这可以帮助。

# sql - SQL 确定所有日子的高峰量和小时

> ID：12223109
> 
> 赞同：0
> 
> 时间：2012-08-31T22:15:22.263
> 
> 标签：sql

我有一张桌子可以节省客户观看视频的时间。我想找出观看视频最多的高峰时段以及高峰时段是多少。我需要这些数据在数据库中的所有日子。我怎样才能做到这一点？

通过使用 max 和 count 函数以及内部连接，我只能获得一条记录，但我想要每天的峰值音量和小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:33:54.153

语法取决于数据库。另外，你的问题很模糊。我将其解释为“一天中的高峰时段”，而不是“特定一天的高峰时段”。

以下几乎是 ANSI 语法：

```
select *
from (select extract(hour from ViewTime) as hr, count(*) as cnt
      from VideoViews
      group by extract(hour from ViewTime)
     ) t
order by cnt desc
limit 1 
```

在某些数据库中，您可能使用“datepart()”或“to_char()”从日期中获取小时。在某些数据库中，您可能会使用“top (1)”或“rownum = 1”而不是“limit 1”。但是，总体思路是一样的：聚合得到你想要的结果，然后通过使用 order by 并选择一行来选择最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:58:06.543

给定一个表模式，如：

```
create table customer_view_log
(
  customer_id int      not null ,
  dt_viewed   datetime not null ,
  video_id     int     not null ,

  constraint customer_view_log_PK   primary key nonclustered ( customer_id , dt_viewed   ) ,
  constraint customer_view_log_AK01 unique      nonclustered ( dt_viewed   , customer_id ) ,

  constraint customer_view_log_FK01 foreign key ( customer_id ) references customer ( id ) ,
  constraint customer_view_log_FK01 foreign key ( video_id    ) references video    ( id ) ,

) 
```

像这样的查询

```
select top 1
       Hour     = datepart(hour,dt_viewed) ,
       Viewings = count(*)
from customer_view_log
group by datepart(hour,dt_viewed)
order by 2 desc 
```

应该做的伎俩。以上是 SQL Server：您的实现可能因细节而异。与日期/时间相关的内容在不同的实现中差异很大。

# sql-server-2008 - 在我的 SQL 查询中选择超过 5 列会减慢它的速度

> ID：12223111
> 
> 赞同：1
> 
> 时间：2012-08-31T22:15:35.460
> 
> 标签：sql-server-2008, tsql

我在 SQL Server Management Studio 中运行一个简单的 SQL 查询（我实际上也在我的应用程序中执行），我发现这很有趣。我希望有人可以解释它有什么问题。

数据库表有 25 列，有 5 列被索引，并且存在 1 个主键列。除一列外，其余所有列的类型`varchar`均为 length <= 50 或`datetime`or `int`。一个例外是该列是类型`varchar(512)`（我们称此列`BigColumn`）

我的查询是这样的：

```
Select PKColumn, column1, column2, column3, column4, column5
from database_table
where PKColumn = value 
```

当我选择 5 个或更少的列时，查询执行得更快（< 1 秒）。`BigColumn`我可以选择除（当然还有 PK）之外的任何 5 列，结果会在 < 1 秒内返回。但是，如果我选择超过 5 列，查询会大大减慢（结果返回 6 秒）。另外，如果我选择`PKColumn`并且`BigColumn`结果会在 6 秒内返回。

有谁知道问题可能是什么？我确实请求我们的 DBA 对此进行调查，但我想知道是否有人遇到过这样的问题以及他们是如何解决的。

提前致谢。

# css - 在 Internet Explorer Windows Media 上设置背景颜色 或者 I'm attempting to set the background color on a video object in Internet Explorer. For both with a WMV source and (Windows Media), the default background color is black and it seems that I can't change it. I've tried setting the background color via CSS, via both inline styles and the stylesheet selecting video, object. I've also tried adding a bgcolor param to the object both when adding it to the DOM and after it's loaded. While I can examine the elements via JavaScript and the F12 tools and see that my CSS rule and bgcolor param are being applied, the video is still rendering with a black background. It might be worth noting that I'm running the video in windowless mode, since it's embedded inline on a webpage. (Applying the background color via CSS to a works fine in Chrome, Firefox, and Safari. It's just Internet Explorer / Windows Media Player that's giving me trouble.) $('#SelectId option').each(function() { if($(this).val()==desiredValue) $(this).attr('selected','selected'); }); http://jsbin.com/amomek/1/edit for an example. cssinternet-explorervideohtml5-videowindows-media-player 4 0 回答 0 Related 1 c# - 如何找到 Windows 版本名称 1 linux - find 命令在 zsh 和 bash 中的工作方式不同 2 postgresql - 对于数据有限制的随机查询，您会使用什么技术？ 1 ember.js - 使用 Ember 数据提交 1 java - Eclipse 选择了错误的 jdk 1 haskell - 为什么这个 [haskell] 编译错误？ 1 android - 在 DialogFragment 中显示来自 Internet 的信息 1 charts - 如何在柱形图上创建百分比？ 3 python - Neaten Python one-liner on read a multidimensional array 1 jquery - jQuery - 选择一个下拉值，该值将从另一个下拉列表中删除 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12223115
> 
> 赞同：2
> 
> 时间：
> 
> 标签：css, internet-explorer, video, html5-video, windows-media-player

I'm attempting to set the background color on a video object in Internet Explorer. For both `<video>` with a WMV source and `<object classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6">` (Windows Media), the default background color is black and it seems that I can't change it.

I've tried setting the background color via CSS, via both inline styles and the stylesheet selecting `video, object`. I've also tried adding a `bgcolor` param to the object both when adding it to the DOM and after it's loaded.

While I can examine the elements via JavaScript and the F12 tools and see that my CSS rule and bgcolor param are being applied, the video is still rendering with a black background.

It might be worth noting that I'm running the video in windowless mode, since it's embedded inline on a webpage.

(Applying the background color via CSS to a works fine in Chrome, Firefox, and Safari. It's just Internet Explorer / Windows Media Player that's giving me trouble.)

# c - 调用 printf 时的堆栈视图？

> ID：12223118
> 
> 赞同：2
> 
> 时间：2012-08-31T22:16:46.957
> 
> 标签：c, assembly, stack, calling-convention

我刚刚了解了让我问这个问题的格式字符串漏洞

考虑以下简单程序：

```
#include<stdio.h>
void main(int argc, char **argv)
{
char *s="SomeString";
printf(argv[1]);
} 
```

现在很明显，这段代码容易受到格式字符串漏洞的影响。即，当命令行参数为 %s 时，会打印值 SomeString，因为 printf 会弹出堆栈一次。

我不明白的是调用 printf 时的堆栈结构

在我的脑海中，我想象堆栈如下：

从左到右增长----->

```
main()                                                                  ---> printf()-->
RET to libc_main | address of 's' | current registers| ret ptr to main | ptr to format string| 
```

如果是这种情况，将 %s 输入到程序中如何导致 s 的值被弹出？

（或）如果我对堆栈结构完全错误，请纠正我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T04:52:54.390

堆栈内容很大程度上取决于以下内容：

*   中央处理器
*   编译器
*   调用约定（即参数如何在寄存器和堆栈中传递）
*   编译器执行的代码优化

这是我通过使用 x86 mingw 编译你的小程序得到的`gcc stk.c -S -o stk.s`：

```
 .file   "stk.c"
        .def    ___main;        .scl    2;      .type   32;     .endef
        .section .rdata,"dr"
LC0:
        .ascii "SomeString\0"
        .text
        .globl  _main
        .def    _main;  .scl    2;      .type   32;     .endef
_main:
LFB6:
        .cfi_startproc
        pushl   %ebp
        .cfi_def_cfa_offset 8
        .cfi_offset 5, -8
        movl    %esp, %ebp
        .cfi_def_cfa_register 5
        andl    $-16, %esp
        subl    $32, %esp
        call    ___main
        movl    $LC0, 28(%esp)
        movl    12(%ebp), %eax
        addl    $4, %eax
        movl    (%eax), %eax
        movl    %eax, (%esp)
        call    _printf
        leave
        .cfi_restore 5
        .cfi_def_cfa 4, 4
        ret
        .cfi_endproc
LFE6:
        .def    _printf;        .scl    2;      .type   32;     .endef 
```

这就是我使用`gcc stk.c -S -O2 -o stk.s`的，也就是说，启用了优化：

```
 .file   "stk.c"
        .def    ___main;        .scl    2;      .type   32;     .endef
        .section        .text.startup,"x"
        .p2align 2,,3
        .globl  _main
        .def    _main;  .scl    2;      .type   32;     .endef
_main:
LFB7:
        .cfi_startproc
        pushl   %ebp
        .cfi_def_cfa_offset 8
        .cfi_offset 5, -8
        movl    %esp, %ebp
        .cfi_def_cfa_register 5
        andl    $-16, %esp
        subl    $16, %esp
        call    ___main
        movl    12(%ebp), %eax
        movl    4(%eax), %eax
        movl    %eax, (%esp)
        call    _printf
        leave
        .cfi_restore 5
        .cfi_def_cfa 4, 4
        ret
        .cfi_endproc
LFE7:
        .def    _printf;        .scl    2;      .type   32;     .endef 
```

如您所见，在后一种情况下，堆栈上没有指向“SomeString”的指针。事实上，该字符串甚至不存在于已编译的代码中。

在这个简单的代码中，没有寄存器保存在堆栈上，因为没有任何变量分配给需要在调用`printf()`.

所以，你在堆栈上唯一的东西是字符串指针（可选），由于堆栈对齐而未使用的空间（`andl $-16, %esp`+`subl $32, %esp`对齐堆栈并为局部变量分配空间，这里没有），`printf()`'s参数，返回地址从`printf()`回来到`main()`。

在前一种情况下，指向“SomeString”的指针和`printf()`的参数（的值`argv[1]`）彼此相距很远：

```
 movl    $LC0, 28(%esp) ; address of "SomeString" is at esp+28
        movl    12(%ebp), %eax
        addl    $4, %eax
        movl    (%eax), %eax
        movl    %eax, (%esp) ; address of a copy of argv[1] is at esp
        call    _printf 
```

要使两个地址一个接一个地存储在堆栈上，如果这是您想要的，您需要使用代码、编译/优化选项或使用不同的编译器。

或者你可以提供一个格式字符串，`argv[1]`这样`printf()`就可以到达它。例如，您可以在格式字符串中包含许多虚假参数。

例如，如果我使用 编译这段代码`gcc stk.c -o stk.exe`并运行它`stk.exe %u%u%u%u%u%u%s`，我会从中得到以下输出：

```
4200532268676042006264200532880015253SomeString 
```

所有这一切都非常 hacky，让它正常工作并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:15:09.060

在 x86 上，函数调用的堆栈可能类似于：

```
 :              :
          +--------------+
          :  alignment   :
          +--------------+
12(%ebp)  |     arg2     |
          +--------------+
 8(%ebp)  |     arg1     |
          +--------------+
 4(%ebp)  |     ret      | -----> return address
          +--------------+
  (%ebp)  |     ebp      | -----> previous ebp value
          +--------------+
-4(%ebp)  |    local1    | -----> local vars, sometimes they can overflow ;-)
          +--------------+        
          :  alignment   :
          +--------------+
          :              : 
```

如果你用过`-fomit-frame-pointer` `ebp`就不会保存在堆栈上。在不同的优化级别，一些变量可能会消失（被优化），...

其他 ABI 将函数参数存储在寄存器上，而不是将它们保存在堆栈中。稍后，在调用另一个函数之前，活动寄存器可能会溢出到堆栈中。

# php - phpmyadmin csv conversion and login php

> ID：12223120
> 
> 赞同：0
> 
> 时间：2012-08-31T22:16:53.167
> 
> 标签：php, login, export-to-csv

I am sure errors similar to this have been posted. I dug around a bit and found nothing that helped me.

I am extremely new to PHP/HTML etc... however I have done a little coding with Java and C++ in the past.

For the end game I am trying to create a script that will let me access phpmyadmin and download tables each to its own individual CSV file.

The only thing I can find anywhere close to this is this one:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org
/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

$user =$_POST['user']; 

?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>MySql to CSV script by www.erriko.it</title>
<style type="text/css">
body{
background:#dedede;
margin:0;
padding:0;
}
#wrapper{
width:100%;
}
#form{
margin-left:auto;
margin-right:auto;
margin-top:100px;
width:400px;
padding:20px;
background:#efefef;
border:2px solid #2e2e2e;
}
</style>
</head>
<body>

<div id="wrapper">
<div id="form">

    <?php
$user = $_POST[$user];
print $user ;

 $host =  $_POST['host']; // <-- inserisci qui l'indirizo ip di MySql
 $user =  $_POST['user']; // <-- nome utente del database
 $pass =  $_POST['pass']; // <-- password dell'utente
 $db = $_POST['db']; // il database desiderato
 $table = $_POST['table']; // la tabella da esportare in .csv
 $file = $table; // il nome del file csv da generare

 $link = mysql_connect($host, $user, $pass) or die("Can not connect." .     
mysql_error()); 
/* usa i dati forniti per connetterti a MySql, se impossibile interrompi */

 mysql_select_db($db) or die("Can not connect."); 
// seleziona il db desiderato oppure interrompi

 $result = mysql_query("SHOW COLUMNS FROM ".$table."");
 $i = 0;
 if (mysql_num_rows($result) > 0) {
 while ($row = mysql_fetch_assoc($result)) {  
 $csv_output .= $row['Field']."; ";
 $i++;
 }
 }
 $csv_output .= "\n"; 

$values = mysql_query("SELECT * FROM ".$table."");
 while ($rowr = mysql_fetch_row($values)) {
 for ($j=0;$j<$i;$j++) { 
 $csv_output .= $rowr[$j]."; ";
 }
 $csv_output .= "\n"; 
 }
 $filename = $file."_".date("d-m-Y_H-i",time());
 // il nome del file sara' composto da quello scelto all'inizio e la data ed ora oggi
 /* setta le specifiche del file csv */
 header("Content-type: application/vnd.ms-excel");
 header("Content-disposition: csv" . date("Y-m-d") . ".csv");
 header( "Content-disposition: filename=".$filename.".csv");
 print $csv_output; // il file e' pronto e puo' essere scaricato
 exit;
 ?>
</div>
</div>
</body>
</html>` 
```

However this doesn't give me the first part the form for users to enter this information. Plus I would like to be able to run this only one time and get multiple files downloaded. for instance if I have three tables

```
table 1
table 2
table 3 
```

It would download table1.csv, table2.csv, and table3.csv all in in their own csv files no concatenating or appending them together.

Right now I'm having trouble getting a test login form to run properly:

```
login.php
<html>
<body>
<form name="myform" action="secondpage.php" method="post">
<div>Username: <input type="text" name="username" value="" /></div>

<div>Password: <input type="password" name="password" value="" /></div>

<div> <input type="submit" /> </div>
</form>
</body>
</html>

secondpage.php
<html>
<body>

Welcome <?php echo $_POST["username"]; ?>!<br />
Your password is: <?php echo $_POST["password"]; ?> 

</body>
</html> 
```

Nothing comes up in in the secondpage.php after I click submit query for login.php

The Form should be able to fill out these fields below, however $host and $db could probably remain the same so might not need form entry for these... just need to set the values.

```
$host =  $_POST['host']; // <-- inserisci qui l'indirizo ip di MySql
 $user =  $_POST['user']; // <-- nome utente del database
 $pass =  $_POST['pass']; // <-- password dell'utente
 $db = $_POST['db']; // il database desiderato
 $table = $_POST['table']; // la tabella da esportare in .csv
 $file = $table; // il nome del file csv da generare 
```

Any help you could give me some help it would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:21:09.467

PHPMyAdmin is not your database. It's a webbased mysql management tool.

The anwer in this similar question: [PHP code to convert a MySQL query to CSV](https://stackoverflow.com/questions/125113/php-code-to-convert-a-mysql-query-to-csv)

# mysql - 获取每个类别中某一列的最大值的整行

> ID：12223122
> 
> 赞同：0
> 
> 时间：2012-08-31T22:17:08.017
> 
> 标签：mysql, database

我有一个包含新闻帖子的表格，并希望获得每个类别的最后添加的整个新闻**帖子**。
该表包含以下列：

*   ID、标题、图像、描述、类别、日期

示例：我有 3 个类别的 20 个帖子。每个类别的最后一个帖子按日期返回，所以我得到了 3 个帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:22:13.970

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT newsposts.* FROM newsposts NATURAL JOIN (
  SELECT category, MAX(date) AS date FROM newsposts GROUP BY category
) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:30:35.600

认为对此最小和最有用的解决方案是：

```
SELECT * FROM ( 
   SELECT * FROM table ORDER BY date DESC
) as t
GROUP BY t.category; 
```

另一种方法是具有子查询的组...

@eggyal：这将使用插入 max_date 的 LASTEST，因为 rdbms 的内部排序...

# javascript - 从 webapp 设置 cookie。就是行不通

> ID：12223125
> 
> 赞同：2
> 
> 时间：2012-08-31T22:17:30.713
> 
> 标签：javascript, ajax, google-app-engine, web-applications, cookies

在这个问题上我已经用头撞了几个小时。我只是无法正确设置 cookie。我设置的 cookie 似乎永远不会被正确保存或发回。

情况是cookie：

*   发送完全相同的请求时会被退回，
*   发送具有不同路径的请求时不会被发回。
*   重新启动浏览器时似乎不存在
*   不会显示在 Chrome 开发者工具的“资源”区域中。

**服务器：** “谷歌应用引擎”上的“webapp”

**客户端：** Chrome 浏览器、Javascript、jQuery、Ajax 调用

使用以下 ajax 登录用户，这应该设置一个带有“令牌”的 cookie：

```
$.ajax({
    type:   'POST',
    url:    '/rest/login/',
    data: JSON.stringify({username:username, password: password}),
    error: function(jqXHR, status, errorThrown){...},
    success: function(data, status, jqXHR){...}
}); 
```

这会产生以下标题[更大的图片](http://s3.amazonaws.com/bsldm/public_files/so_cookies_01.gif)：

[![在此处输入图像描述](../Images/1d1ae32263ff43db86328a51766db205.png)](http://s3.amazonaws.com/bsldm/public_files/so_cookies_01.gif)

服务器在谷歌应用引擎上运行 webapp，它是这样设置 cookie 的：

```
w_self.response.set_status(200)
#     Put the token in the cookies. "str()" is used because without it, there is a unicode error
w_self.response.headers.add_header(str('Set-Cookie'), str('token=%s; max_age=360;' % token))
#     The user
r_object['user'] = the_user
# Respond
w_self.response.out.write(json.dumps(r_object)) 
```

如果再次请求此页面，则将 cookie 发送回服务器[大图](http://s3.amazonaws.com/bsldm/public_files/so_cookies_02.gif)：

[![在此处输入图像描述](../Images/4878a74c5e7f61861f7e5ad5d238db71.png)](http://s3.amazonaws.com/bsldm/public_files/so_cookies_02.gif)

但似乎没有保存在任何地方，因为在开发人员工具[大图](http://s3.amazonaws.com/bsldm/public_files/so_cookies_03.gif)中探索 cookie 时我永远找不到它：

[![在此处输入图像描述](../Images/a9461eb7a87e63597be65e0639470417.png)](http://s3.amazonaws.com/bsldm/public_files/so_cookies_03.gif)

当请求路径不完全相同的资源时也不会发送它（'logout'而不是'login'：

```
$.ajax({
    type:   'POST',
    url:    '/rest/logout/',
    data: JSON.stringify({something:'else'}),
    error: function(jqXHR, status, errorThrown){...},
    success: function(data, status, jqXHR){...}
}); 
```

这是请求的样子：

[大图](http://s3.amazonaws.com/bsldm/public_files/so_cookies_04.gif)：

[![在此处输入图像描述](../Images/52ec1b4e0db6a7a2966e0851baa4c4c7.png)](http://s3.amazonaws.com/bsldm/public_files/so_cookies_04.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:40:59.423

如果您没有设置路径，那么默认设置是仅将其发送回设置它的路径，如您所见。

我也认为它也意味着 Max-Age 而不是你所拥有的 max_age ，但不管 webapp2 给你的响应对象有一个[set_cookie 方法](http://webapp-improved.appspot.com/guide/response.html#setting-cookies)- 我相信这一切都会正确地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:41:51.563

我不确定为什么设置标题不起作用，也许您可​​以尝试使用 set cookie 方法：

```
# Saves a cookie in the client.
response.set_cookie('some_key', 'value', max_age=360, path='/',
                    domain='example.org', secure=True) 
```

[http://webapp-improved.appspot.com/guide/response.html#setting-cookies](http://webapp-improved.appspot.com/guide/response.html#setting-cookies)

以下是该`set_cookie`方法的来源：

[http://code.google.com/p/googleappengine/source/browse/trunk/python/lib/webob_1_1_1/webob/response.py#616](http://code.google.com/p/googleappengine/source/browse/trunk/python/lib/webob_1_1_1/webob/response.py#616)

# mysql - MYSQL partial match.... bit what you think

> ID：12223126
> 
> 赞同：2
> 
> 时间：2012-08-31T22:17:32.980
> 
> 标签：mysql

Is it possible in MYSQL to do a partial match but the opposite way round to how this is normally done..

I.E I have a website for checking.... voucher codes

A user types "WUD092050549E" and hits search

I want the database to return... any row with column_x matching

*   "WUD092050549E" - exact match

*   "WUD0920" - 7 character match

*   "WUD0" - 4 character match

**BUT NOT**

*   "WUD039540" - 4 character match, then incorrect

*   "123213WUD092050549E2334" - incorrect characters, then match

Essentially where the row matches 4 or more characters (in the same sequence) with no mistakes

I know exact matches can be achieved by.. "SELECT * WHERE column_x="WUD092050549E"

For myself I ideally want to sort exact matches, then if none were found other less accurate matches (so two queries possibly)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:32:14.207

目前尚不清楚规范是什么。

如果要检查整个匹配，前七个字符或前四个字符：

```
SELECT t.voucher_code='WUD092050549E' AS exact_match
     , t.*
  FROM mytable t
 WHERE t.voucher_code = 'WUD092050549E'
    OR t.voucher_code = LEFT('WUD092050549E',7)
    OR t.voucher_code = LEFT('WUD092050549E',4) 
```

如果您想要匹配任何长度的优惠券代码，您可以列举所有可能性：

```
SELECT t.voucher_code = 'WUD092050549E' AS exact_match
     , t.*
  FROM mytable t
 WHERE t.voucher_code = 'WUD092050549E'
    OR t.voucher_code = LEFT('WUD092050549E',11)
    OR t.voucher_code = LEFT('WUD092050549E',10)
    OR t.voucher_code = LEFT('WUD092050549E',9)
    OR t.voucher_code = LEFT('WUD092050549E',8)
    OR t.voucher_code = LEFT('WUD092050549E',7)
    OR t.voucher_code = LEFT('WUD092050549E',6)
    OR t.voucher_code = LEFT('WUD092050549E',5)
    OR t.voucher_code = LEFT('WUD092050549E',4) 
```

更慢，但更简洁：

```
SELECT t.voucher_code
     , t.*
  FROM mytable t
 WHERE t.voucher_code = LEFT('WUD092050549E',CHAR_LENGTH(t.voucher_code)) 
```

但我不确定我是否理解规范，所以这可能与您正在寻找的内容相去甚远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:20:48.687

关于什么：

```
SELECT 1 from DUAL 
WHERE column_x LIKE 'WUD092050549E%'
or INSTR('WUD092050549E', column_x ) > 0 
```

你可以在[**这里查看**](http://sqlfiddle.com/#!2/d41d8/1691)

# android - SurfaceView + Canvas，从一种颜色淡入另一种颜色

> ID：12223127
> 
> 赞同：1
> 
> 时间：2012-08-31T22:17:35.240
> 
> 标签：android, surfaceview, surfaceholder

我有

```
ArrayList<ColorDrawable> colors = new ArrayList<ColorDrawable>();
for(int i = 0; i = intList.size(); i++){ //some list of ints
    colors.add(new ColorDrawable(intList.get(i))); 
```

我想使用 SurfaceView + Canvas 方法从列表中的一种颜色淡化到另一种颜色。这是我的尝试：

```
 public void run() {
    int maxIndex = colors.size() - 1;
        while (isItOK) {
            for (int i = 0; i <= maxIndex; i++) {
                int color = colors.get(i).getColor();
                int nextColor = (i == maxIndex) ? colors.get(0).getColor() : colors.get(i + 1).getColor();

                if(color < nextColor) {
                    for(; color <= nextColor; color++) {
                        Canvas c = holder.lockCanvas();
                        c.drawColor(color);
                        holder.unlockCanvasAndPost(c);
                    }
                }

                if(color > nextColor) {
                    for(; color >= nextColor; color--) {
                        Canvas c = holder.lockCanvas();
                        c.drawColor(color);
                        holder.unlockCanvasAndPost(c);
                    }
                }
            }

        }
    } 
```

我觉得这应该按原样工作，并从第一种颜色褪色到第二种颜色，依此类推......最终循环，但相反，它从第一种颜色开始，然后褪色到一些不相关的颜色，结束超过。（我也测试了不同的数据）。这是我第一次使用 SurfaceView，所以我不确定我的画布方法是否正确。**使用 Log.d，我看到一旦它进入一个内部 for 循环（前面带有“if”语句的循环），它就不会离开那个 for 循环**......这对我来说没有意义但我认为这与画布和支架有关。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:02:44.113

我不确定，如果我正确理解你，如果没有，请告诉我。

在我的理解中，您想要：**循环遍历颜色并每次将 backgroundcolor 设置为颜色列表的第 i 个元素**。

**更新：**请注意，我还没有测试过它！

```
int currentIndex = 0;
int nextIndex = 0;

while (isItOK) 
{
    nextIndex = (currentIndex + 1) % colors.size();

    int currentColor = colors.get(currentIndex).getColor();
    int nextColor = colors.get(nextIndex).getColor();
    while(currentColor != nextColor)
    {
        //extract red, green, blue, alpha from the current color

        int r = Color.red(currentColor); //android.graphics.Color
        int g = Color.green(currentColor);
        int b = Color.blue(currentColor);
        int a = Color.alpha(currentColor);

        //extract the same from nextColor
        int nr = Color.red(nextColor);
        int ng = Color.green(nextColor);
        int nb = Color.blue(nextColor);
        int na = Color.alpha(nextColor);

        //get currentColors values closer to nextColor 
        r = (r<nr) ? r+1 : ((r>nr) ? r-1 : r);
        g = (g<ng) ? g+1 : ((g>ng) ? g-1 : g);
        b = (b<nb) ? b+1 : ((b>nb) ? b-1 : b);
        a = (a<na) ? a+1 : ((a>ar) ? a-1 : a);

        // generate currentColor back to a single int
        currentColor = Color.argb(a,r,g,b);

        // paint it 
        Canvas canvas = holder.lockCanvas();
        canvas.drawColor(currentColor );
        holder.unlockCanvasAndPost(canvas);
    }
    currentIndex = (currentIndex + 1) % colors.size();
} 
```

# java - Can I change the response buffer size in JBoss AS7

> ID：12223128
> 
> 赞同：2
> 
> 时间：2012-08-31T22:17:45.707
> 
> 标签：java, jax-rs, jboss7.x

I'm getting a VERY strange error I can't figure out in JBoss AS7\. Basically the web application is a REST application that takes data in as a large POST, stores it in a database, and returns the stored data to the user in the response as XML using JAX-RS. This is repeated thousands of times. The data is stored, and the client gets the full response.

Other than the JBoss server logs getting spammed with the following warnings/errors, there are no problems. Both the web application and client do not report errors, and run fine.

Very quickly after starting the process I get the following warnings:

```
08:54:30,327 WARN  [org.jboss.resteasy.core.SynchronousDispatcher] (http--0.0.0.0-8080-1) Failed executing POST /messages/ingestmessage/: org.jboss.resteasy.plugins.providers.jaxb.JAXBMarshalException: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.net.SocketException: Connection reset]
    at org.jboss.resteasy.plugins.providers.jaxb.AbstractJAXBProvider.writeTo(AbstractJAXBProvider.java:148) [resteasy-jaxb-provider-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.interception.MessageBodyWriterContextImpl.proceed(MessageBodyWriterContextImpl.java:117) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.interceptors.encoding.GZIPEncodingInterceptor.write(GZIPEncodingInterceptor.java:100) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.interception.MessageBodyWriterContextImpl.proceed(MessageBodyWriterContextImpl.java:123) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.ServerResponse.writeTo(ServerResponse.java:250) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.writeJaxrsResponse(SynchronousDispatcher.java:585) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:506) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.net.SocketException: Connection reset]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:251)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:74) [jboss-jaxb-api_2.2_spec-1.0.3.Final.jar:1.0.3.Final]
    at org.jboss.resteasy.plugins.providers.jaxb.AbstractJAXBProvider.writeTo(AbstractJAXBProvider.java:144) [resteasy-jaxb-provider-2.3.2.Final.jar:]
    ... 25 more
Caused by: ClientAbortException:  java.net.SocketException: Connection reset
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:403) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:426) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:415) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.resteasy.util.CommitHeaderOutputStream.write(CommitHeaderOutputStream.java:52) [resteasy-jaxrs-2.3.2.Final.jar:]
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.write(UTF8XmlOutput.java:411)
    at com.sun.xml.bind.v2.runtime.output.Encoded.write(Encoded.java:167)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.writeName(UTF8XmlOutput.java:241)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.endTag(UTF8XmlOutput.java:285)
    at com.sun.xml.bind.v2.runtime.output.NamespaceContextImpl$Element.endElement(NamespaceContextImpl.java:504)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.endElement(XMLSerializer.java:318)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:175)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:159)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:356)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:700)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:158)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:356)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:700)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:69)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:172)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:159)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:356)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:700)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:158)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:356)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:597)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:338)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:498)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323)
    ... 28 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96) [rt.jar:1.6.0_25]
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136) [rt.jar:1.6.0_25]
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:724) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:748) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:126) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:559) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.Response.doWrite(Response.java:594) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:398) [jbossweb-7.0.13.Final.jar:]
    ... 58 more 
```

This is then followed by errors after several of the warnings...

```
08:54:34,044 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/cdsWebApp].[org.neoninc.cds.RestApplication]] (http--0.0.0.0-8080-7) Servlet.service() for servlet org.neoninc.cds.RestApplication threw exception: java.lang.IllegalStateException
    at org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:408) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:71) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleFailure(SynchronousDispatcher.java:265) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleWriterException(SynchronousDispatcher.java:393) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:219) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleWriteResponseException(SynchronousDispatcher.java:203) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:510) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25] 
```

From searching around, it seems this error can happen if the response is too large. I'd like to set the buffer size to a larger size, at least for this REST call.

Am I correct in thinking the buffer is the problem? The responses can be several hundred kilobytes (~650 kB). If so, how can I change the buffer size on the response in JBoss AS7? If not, what else could it be?

Any other ideas are welcome.

EDIT: More info. It looks like this might be a problem where the client cuts the conversation abruptly. I'm using JAX-RS to marshal out the xml to the client using

```
// Marshal the created message transition run to xml and return it 
response = Response.status(201).entity(messageTransactionRunDomain).location(uriBuilder.build()).lastModified(new Date()).build(); 
```

The client is receiving the xml using

```
// Build the resource URL to get the first type .  Also set the mime type.
        long temptime = System.currentTimeMillis();
        ClientResponse response = 
            webResource.type("application/vnd.neoninc.cds.processedmessage-v1.0+xml")
                .post(ClientResponse.class, processedMsgIngest);

        // Get the saved message transition run, so you can get the new id
        if (response.getStatus() == 201) {
            long endtime = System.currentTimeMillis();
            log.debug("Time for " + readouts.size() + " readout values batching (seconds): " + (endtime-temptime)/1000.);
            CDSRESTDataIngest.postValsTotalTime = CDSRESTDataIngest.postValsTotalTime + (endtime-temptime);
            return true;
        } else {
            log.error("POST failed and returned a status of " + response.getStatus());
            log.error(response.getEntity(String.class));
} 
```

Where I'm confused, is this isn't a browser conversation. The client isn't hitting cancel or back, and is getting everything returned in the response...

# node.js - 如何管理内部 Node.JS 模块

> ID：12223129
> 
> 赞同：8
> 
> 时间：2012-08-31T22:18:05.147
> 
> 标签：node.js, github, dependencies, npm

在 node.js 应用程序中处理内部模块的首选方法是什么？

我的意思是，目前我们有一个相当大的应用程序，并且有几个依赖项，通过 npm 安装。我们`node_modules`在`.gitignore`. 因此它不在存储库中。我们使用`npm shrinkwrap`冻结模块版本，因此，在部署时，`npm install`将我们需要的所有内容组合到`node_modules`.

问题是，由于应用程序越来越大，我们希望将其拆分为更小的模块。现在，如果我创建一个`foo`模块并将其`node_modues`放入`node_modules`.

我们不能在 npm 注册表上发布这些，因为它们并不是真正的“公开”。

有什么我不知道的明显解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T22:35:52.177

我同意您不将第 3 方非回购内容与您的内部修订控制内容混合的审美。

NODE_PATH 搜索路径变量可以在这里为您提供帮助，您可以使用不同的目录，其内容受修订控制。

[http://nodejs.org/api/modules.html](http://nodejs.org/api/modules.html)

根据您对灵活性与复杂性的偏好，您可以考虑一个构建步骤，该步骤实际上将各种节点模块从您保存的位置复制到输出目录（可能是“命名的 node_modules”，但不一定）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T22:53:58.450

一个常见的解决方案是将模块存储在某个私有 Git 存储库中，然后使用`git://`URL 作为依赖项；npm 知道如何将存储库克隆为依赖项。

# android - google map api create a path with set of lattitude and longitude

> ID：12223130
> 
> 赞同：1
> 
> 时间：2012-08-31T22:18:19.810
> 
> 标签：android, google-maps, latitude-longitude

I am building a android/ web application. In with user can save a set of gps data ( latitude and longitude ) in our DB for eg my db looks like

```
Id     |    UserId     |   time                |    latitude     |      longitude
-----------------------------------------------------------------------------------
1      |    12         |  2012-05-05 11:11:01  | 12.21547        |      22.1245789
1      |    12         |  2012-05-05 12:13:01  | 12.21547        |      22.1245779
1      |    12         |  2012-05-05 13:11:01  | 12.27547        |      22.1745789
1      |    12         |  2012-05-05 14:11:01  | 12.30547        |      22.3045789
1      |    12         |  2012-05-05 14:22:01  | 12.36547        |      22.3555789
------------------------------------------------------------------------------------ 
```

My question is can I create a path Google Map using the above data. Straightly .... I want to draw the user traveled path in Google map with the above data

Thanks in advance

# c# - UserPrincipal.Save() causes an ObjectDisposedException

> ID：12223131
> 
> 赞同：1
> 
> 时间：2012-08-31T22:18:28.033
> 
> 标签：c#, .net, active-directory

Consider the following pieces of code from an Active Directory service I have. In the `Rename()` method it always throws an `ObjectDisposedException`, "*Cannot access a disposed object. Object name: 'DirectoryEntry'.*"

This used to work fine, but I also have an `Add()` method and the two were 95% identical code. So, I opted for the `SetIdentity()` method to which I would pass the principal and the properties dictionary and go from there. The `Add()` method works, but that's because there's no underlying object to manipulate yet. The `Rename()` method fails because there is one.

I know that if I put the code from `SetIdentity()` back into `Rename()` it will work just fine, but I don't want to do that.

I've tried wrapping the `using` clause in `Rename()` in a `try/catch` block, but it didn't do anything. I've tried passing the principal and dictionary by `ref`, but that also didn't help. I've tried checking if the `DirectoryEntry` is null and it didn't help.

So, I'm guessing it can't be the code inside the `using` clause that's failing. What else should I look for?

When debugging with Visual Studio I can hover over the object and it's there and complete with properties and values, so I don't know where I'm supposed be looking...

```
public override void Rename(
    UserPrincipal principal,
    IDictionary<string, object> properties) {
    if (principal != null) {
        this.SetIdentity(ref principal, ref properties);

        using (DirectoryEntry entry = (principal.GetUnderlyingObject() as DirectoryEntry)) {
            entry.Rename(newName: String.Format("CN={0}", principal.DisplayName));
            entry.CommitChanges();
        };

        principal.Save(); // this is where ASP.NET runtime points to when failed
    };
} // this is where Visual Studio points to when debugging

internal void SetIdentity(
    ref UserPrincipal principal,
    ref IDictionary<string, object> properties) {
    object obj = null;
    string displayName = string.Empty;
    string givenName = string.Empty;
    string middleName = string.Empty;
    string samAccountName = string.Empty;
    string surname = string.Empty;

    if (properties.TryGetValue("GivenName", out obj)) {
        givenName = (string)properties["GivenName"];
    };

    if (properties.TryGetValue("MiddleName", out obj)) {
        middleName = (string)properties["MiddleName"];
    };

    if (properties.TryGetValue("Surname", out obj)) {
        surname = (string)properties["Surname"];
    };

    if (properties.TryGetValue("SamAccountName", out obj)) {
        samAccountName = (string)properties["SamAccountName"];
    };

    if (String.IsNullOrEmpty(middleName)) {
        displayName = String.Format("{0} {1}", givenName, surname);

        if (String.IsNullOrEmpty(samAccountName)) {
            samAccountName = String.Format("{0}{1}", givenName[0], surname);
        };
    } else {
        displayName = String.Format("{0} {1}. {2}", givenName, middleName[0], surname);

        if (String.IsNullOrEmpty(samAccountName)) {
            samAccountName = String.Format("{0}{1}{2}", givenName[0], middleName[0], surname);
        };
    };

    samAccountName = samAccountName.ToLower();

    principal.DisplayName = displayName;
    principal.GivenName = givenName;
    principal.MiddleName = middleName;
    principal.SamAccountName = samAccountName;
    principal.Surname = surname;
    principal.UserPrincipalName = String.Format("{0}@dryforce.com", samAccountName);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T23:06:57.837

```
 using (DirectoryEntry entry = (principal.GetUnderlyingObject() as DirectoryEntry)) 
```

为 .NET 设计者购买一支雪茄，以获得良好的方法命名。您正在使用 using 语句处理“基础对象”。你猛地一拉地垫，让课堂正常运转的东西已经不复存在了。这是一只死鹦鹉。一个等价的方法是处理 StreamReader.BaseStream。在你这样做之后尝试从中读取将会去 Kaboom，无法从已处理的底层对象中读取。

处理它不是你的工作，你的代码没有创建它。通过省略*using*关键字来解决问题。

# java - 键绑定和按住键

> ID：12223133
> 
> 赞同：3
> 
> 时间：2012-08-31T22:18:42.073
> 
> 标签：java, swing, jtextarea, key-bindings, keystrokes

我为 JTextArea 组件创建了一个键绑定。当被调用时，它会创建一个自己的新实例并将焦点放在它上面。

如果您按住回车键（调用键绑定），我的程序将开始吐出一堆 JTextArea 实例。

有没有办法强制用户再次按回车键来创建一个新实例？

我是切换到 KeyListeners 还是有键绑定的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T22:29:46.147

`KeyStroke`您在设置输入映射时指定仅在按键释放时触发

参见 KeyStroke [getKeyStroke(int keyCode, int modifiers, boolean onKeyRelease)](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke%28int,%20int,%20boolean%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T08:00:54.037

使用键绑定的方法是执行两个操作：

*   创建组件的操作绑定到按下的输入，插入组件时它会禁用自身
*   再次启用该操作的操作绑定到已释放的输入

一些代码：

```
// the action to create the component
public static class CreateAction extends AbstractAction {

    private Container parent;
    private Action enableAction;

    public CreateAction(Container parent) {
        this.parent = parent;
        enableAction = new EnableAction(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        setEnabled(false);
        Component field = createTextField();
        parent.add(field);
        parent.revalidate();
        field.requestFocus();
    }

    int count;
    private Component createTextField() {
        // just for fun counting the fields we create
        JTextField field = new JTextField("field: " + count++, 20);
        field.getInputMap().put(KeyStroke.getKeyStroke("ENTER"), 
                "createComponent");
        field.getActionMap().put("createComponent", this);
        field.getInputMap().put(KeyStroke.getKeyStroke("released ENTER"), 
                "enableCreation");
        field.getActionMap().put("enableCreation", enableAction);
        return field;
    }

}

// the action that enables another
public static class EnableAction extends AbstractAction {

    Action toEnable;

    public EnableAction(Action toEnable) {
        this.toEnable = toEnable;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        toEnable.setEnabled(true);
    }

}

// usage
final JComponent parent = new JPanel(new MigLayout("wrap"));
// here I'm lazy and let the action create the very first component as well
add.actionPerformed(null);
add.setEnabled(true); 
```

请注意，相同的操作实例已注册到所有组件，因此哪个具有焦点并不重要（并最终再次启用创建）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T14:16:37.027

这是我使用的代码，仅在第一次按下键时才运行操作：

```
private void registerKeyBindings(final JFrame frame) {
    var inputMap = frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
    inputMap.put(KeyStroke.getKeyStroke(KeyCode.G.getInputEventCode(), 0, false), "g_down");
    inputMap.put(KeyStroke.getKeyStroke(KeyCode.G.getInputEventCode(), 0, true), "g_up");

    frame.getRootPane().getActionMap().put("g_down", new AbstractAction() {
      @Override public void actionPerformed(ActionEvent e) {
        if (gDown) return;
        gDown = true;

        // put your custom key-down-action code here
      }
    });
    frame.getRootPane().getActionMap().put("g_up", new AbstractAction() {
      @Override public void actionPerformed(ActionEvent e) {
        gDown = false;
      }
    });
}
Boolean gDown = false; 
```

# python - Python 正则表达式替换 - 可以有条件替换吗？

> ID：12223134
> 
> 赞同：1
> 
> 时间：2012-08-31T22:18:50.343
> 
> 标签：python, regex

我正在尝试编写一个正则表达式，以确保根据规范正确重新格式化“标签”。（我正在更新一堆遗留的东西。）

一般的想法是标签可以在`()`或中包含括号内容`[]`。但是，现有标签可能格式不正确：

*   好的 ：
    *   `Sample (sample)`
    *   `Sample [sample]`
*   坏的 ：
    *   `Sample (( sample )`
    *   `Sample [(sample]]`

我目前正在使用一系列正则表达式来处理这个问题，但我想知道在技术上是否可以一次性完成。

在代码的简化版本中......

```
RE_tag_collapse = re.compile(\
    """
        ([\[\(])+               ### opening bracket
            \s*
            (                   # the contents
                [^\]\)]+
            )
            \s*
        ([\]\)])*               # closing bracket
    """
    ,
    re.I | re.VERBOSE
)
edited= re.sub( RE_tag_collapse , r'\1\2\1' , tag ) 
```

这个正则表达式的问题是结束标记（第二个`\1`）与开始标记相同。

我想要做的是将结束标签映射为开始标签的倒数：

*   `(`反转为`)`
*   `[`反转为`]`

有谁知道这是否容易实现？在我看来，我最好的解决方案是保持原样并使用多个正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:30:39.740

如果我正确理解您的问题，您需要确保标签中的括号匹配。据我所知，python中的正则表达式无法计算出现次数。但是，您可以使用一个函数来检查括号是否匹配，如下所示：

```
def check_tag(tag):
    charstack = []
    for c in tag:
        if c in ["(","]"]:
            charstack.append(c)
        else if c in [")","]"]:
            popped = charstack.pop()
            if not ((c == ")" and popped == "(" ) or (c == "]" and popped == "[")):
                return False
    return len(charstack) == 0 
```

这个函数的工作方式是，每次它找到一个左括号时，它就会将它压入堆栈。每次遇到右括号时，它都会将一个元素推出堆栈以查看它们是否匹配。如果他们不这样做，则标签格式不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T10:01:09.333

修改您的正则表达式以将所有左括号和右括号捕获为组，然后您可以从左括号集中生成正确的右括号集并在正则表达式替换中使用它

像这样：

```
>>> def subber(matchobj):
    return ' '.join([matchobj.group(1),
             matchobj.group(2),
             matchobj.group(1).replace('[',']').replace('(', ')')[::-1]])

>>> new_RE = re.compile(\
    """
        ([\[\(]+)               ### opening brackets
            \s*
            (                   # the contents
                [^\]\)]+
            )
            \s*
        ([\]\)]+)               # closing brackets
    """
    ,
    re.I | re.VERBOSE
)
>>> txt = 'Sample [(sample]]'
>>> new_RE.sub(subber, txt)
'Sample [( sample )]'
>>> 
```

右括号只是将每个左括号替换为捕获左括号的组中的右括号，然后将其反转。

# qt - 在windows上构建qt lua

> ID：12223138
> 
> 赞同：2
> 
> 时间：2012-08-31T22:19:28.843
> 
> 标签：qt, compilation, lua

在构建 qtlua 时出现此错误：

```
libqtlua-1.4\src\qtluastate.cc: In member function 'void QtLua::State::gc_collect()':

libqtlua-1.4\src\qtluastate.cc:665:29: error: 'lua_setgcthreshold' was not declared in this scope

mingw32-make[2]: *** [CMakeFiles/qtlua.dir/src/qtluastate.cc.obj] Error 1
mingw32-make[1]: *** [CMakeFiles/qtlua.dir/all] Error 2
mingw32-make: *** [all] Error 2 
```

知道如何解决吗？

# c# - SOAP 返回数据，但 C# 显示空响应

> ID：12223141
> 
> 赞同：12
> 
> 时间：2012-08-31T22:19:39.157
> 
> 标签：c#, xml, web-services, soap, peoplesoft

除了 SOAP 调用的空结果外，我的 C# 应用程序不会给我任何东西。

我们使用 SOAP Web 服务公开了一些 PeopleSoft ERP 数据。

我正在从 Visual Studio 2012 ASP.NET C# 应用程序访问此 SOAP 服务。我有一个使用 ERP 生成的 WSDL 构建的名为**CampusDirectoryService的服务参考。**

这是 C# 代码：

```
var service = new CampusDirectoryService.TEST_PortTypeClient();
var input = new CampusDirectoryService.InputParameters();
input.First_Name = FirstNameBox.Text;
input.Last_Name = LastNameBox.Text;
var returnData = service.TEST_OP(input); 
```

问题`returnData`总是空的。通过 Wireshark，我确认我实际上得到了带有数据的有效 SOAP 响应。`returnData`不应为空。

我也通过[soapUI](http://www.soapui.org/)确认了来自 SOAP 服务的正确有效结果。提交与 .NET 发送的完全相同的 SOAP 请求（我从 Wireshark 中复制了它），我得到了预期的结果。

这是 SOAP 请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <InputParameters xmlns="http://xmlns.oracle.com/Enterprise/Tools/schemas">
      <Last_Name xmlns="">cambre</Last_Name>
      <First_Name xmlns="">aren</First_Name>
    </InputParameters>
  </s:Body>
</s:Envelope> 
```

这是 SOAP 响应，元素内部的一些内部数据被`ReturnID`混淆或删除：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <root xmlns="http://peoplesoft.com/rootResponse">
         <ReturnID>
            <PRF_Name>Cambre,Aren</PRF_Name>
            <Camp_Email>valid@email.com</Camp_Email>
         </ReturnID>
      </root>
   </soapenv:Body>
</soapenv:Envelope> 
```

该`TEST_OP`方法的返回类型是`CampusDirectoryService.rootReturnID[]`.

为什么`returnData`总是为空？

**更新** 根据评论，我使用soapUI 验证了这些消息。它对这条消息的回应大喊大叫：

**第 -1 行：缺少名称为 [{ [http://xmlns.oracle.com/Enterprise/Tools/schemas](http://xmlns.oracle.com/Enterprise/Tools/schemas) }root]的消息部分**

这是响应的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://xmlns.oracle.com/Enterprise/Tools/schemas" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="ReturnID">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="PRF_Name" type="xs:string" />
              <xs:element name="Camp_Email" type="xs:string" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

XSD 是应该验证里面的内容`soapenv:Body`，还是应该验证整个响应，包括`soapenv:Envelope`and`soapenv:Body`元素？看起来soapUI 期望XSD 验证整个响应，而不仅仅是里面的内容`soapenv:Body`。

这是 WSDL：

```
<wsdl:definitions name="TEST.1" targetNamespace="http://xmlns.oracle.com/Enterprise/HCM/schemas/TEST.1" xmlns:U_IT_CAMDIR_REQUEST_MSG.VERSION_1="http://xmlns.oracle.com/Enterprise/Tools/schemas" xmlns:U_IT_CAMDIR_RESPONSE_MSG.VERSION_1="http://xmlns.oracle.com/Enterprise/Tools/schemas" xmlns:plnk="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://xmlns.oracle.com/Enterprise/HCM/schemas/TEST.1" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
   <wsp:UsagePolicy wsdl:Required="true"/>
   <plnk:partnerLinkType name="TEST_PartnerLinkType">
      <plnk:role name="TEST_Provider">
         <plnk:portType name="tns:TEST_PortType"/>
      </plnk:role>
   </plnk:partnerLinkType>
   <wsdl:types>
      <xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
         <xsd:import namespace="http://xmlns.oracle.com/Enterprise/Tools/schemas" schemaLocation="U_IT_CAMDIR_REQUEST_MSG.VERSION_1.xsd"/>
         <xsd:import namespace="http://xmlns.oracle.com/Enterprise/Tools/schemas" schemaLocation="U_IT_CAMDIR_RESPONSE_MSG.VERSION_1.xsd"/>
      </xsd:schema>
   </wsdl:types>
   <wsdl:message name="U_IT_CAMDIR_REQUEST_MSG.VERSION_1">
      <wsdl:documentation>People Directory</wsdl:documentation>
      <wsdl:part element="U_IT_CAMDIR_REQUEST_MSG.VERSION_1:InputParameters" name="parameter"/>
   </wsdl:message>
   <wsdl:message name="U_IT_CAMDIR_RESPONSE_MSG.VERSION_1">
      <wsdl:documentation>People Directory</wsdl:documentation>
      <wsdl:part element="U_IT_CAMDIR_RESPONSE_MSG.VERSION_1:root" name="parameter"/>
   </wsdl:message>
   <wsdl:portType name="TEST_PortType">
      <wsdl:operation name="TEST_OP">
         <wsdl:documentation>TEST</wsdl:documentation>
         <wsdl:input message="tns:U_IT_CAMDIR_REQUEST_MSG.VERSION_1" name="U_IT_CAMDIR_REQUEST_MSG.VERSION_1"/>
         <wsdl:output message="tns:U_IT_CAMDIR_RESPONSE_MSG.VERSION_1" name="U_IT_CAMDIR_RESPONSE_MSG.VERSION_1"/>
      </wsdl:operation>
   </wsdl:portType>
   <wsdl:binding name="TEST_Binding" type="tns:TEST_PortType">
      <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
      <wsdl:operation name="TEST_OP">
         <soap:operation soapAction="TEST_OP.v1" style="document"/>
         <wsp:Policy wsu:Id="UsernameTokenSecurityPolicyPasswordOptional" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsp:ExactlyOne>
               <wsp:All>
                  <wsse:SecurityToken wsp:Usage="wsp:Required" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                     <wsse:TokenType>wsse:UserNameToken</wsse:TokenType>
                     <Claims>
                        <SubjectName MatchType="wsse:Exact"/>
                        <UsePassword wsp:Usage="wsp:Optional"/>
                     </Claims>
                  </wsse:SecurityToken>
               </wsp:All>
            </wsp:ExactlyOne>
         </wsp:Policy>
         <wsdl:input name="U_IT_CAMDIR_REQUEST_MSG.VERSION_1">
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="literal"/>
         </wsdl:input>
         <wsdl:output name="U_IT_CAMDIR_RESPONSE_MSG.VERSION_1">
            <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="literal"/>
         </wsdl:output>
      </wsdl:operation>
   </wsdl:binding>
   <wsdl:service name="TEST">
      <wsdl:documentation>TEST</wsdl:documentation>
      <wsdl:port binding="tns:TEST_Binding" name="TEST_Port">
         <soap:address location="http://domainname.com/longurltoSOAPservicehere"/>
      </wsdl:port>
   </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:04:01.903

好的，我想我找到了解决这个完全相同的问题的方法。我发现要解决这个问题，必须正确配置两个主要项目。

1.  确保在服务上设置命名空间（PeopleTools > Integration Broker > Integration Setup > Service）。在我的中，我使用了一个命名空间：

    ```
    http://xmlns.oracle.com/Enterprise/EnterprisePortal/services 
    ```

2.  如何创建模式和它们使用的命名空间非常重要。每个模式都需要基于 PeopleSoft 返回消息的方式的特殊名称空间格式和消息格式。对于我来说，我使用了以下模式：

    **请求消息模式示例：（** 我使用的请求消息是 IS_CL_COMPLETEPERCENTAGE_REQ.V1）

    ```
     <?xml version="1.0"?> 
        <xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/Enterprise/EnterprisePortal/services/IS_CL_COMPLETEPERCENTAGE_REQ.V1" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
          <xsd:element name="IS_CL_COMPLETEPERCENTAGE_REQ"> 
            <xsd:complexType> 
              <xsd:sequence> 
                <xsd:element name="USER_ID" type="xsd:string"/> 
                <xsd:element name="CHECKLIST_TYPE" type="xsd:string"/> 
                <xsd:element name="CHECKLIST_ID" type="xsd:string"/> 
                <xsd:element name="CHECKLIST_INSTANCE_ID" type="xsd:integer"/> 
              </xsd:sequence> 
            </xsd:complexType> 
          </xsd:element> 
        </xsd:schema> 
    ```

    **响应消息模式示例：（** 我使用的响应消息是 IS_CL_COMPLETEPERCENTAGE_RES.V1）

    ```
     <?xml version="1.0"?> 
        <xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://peoplesoft.com/IS_CL_COMPLETEPERCENTAGE_RESResponse" xmlns:tns="http://peoplesoft.com/IS_CL_COMPLETEPERCENTAGE_RESResponse" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
          <xsd:element name="IS_CL_COMPLETEPERCENTAGE_RES"> 
            <xsd:complexType> 
              <xsd:sequence> 
                <xsd:element name="PERCENTCOMPLETE" type="xsd:integer"/> 
              </xsd:sequence> 
            </xsd:complexType> 
          </xsd:element> 
        </xsd:schema> 
    ```

在我使用此信息发布我的 Web 服务后，SoapUI 验证了请求和响应，没有出现任何问题。

**示例 SOAP 请求消息**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:is="http://xmlns.oracle.com/Enterprise/EnterprisePortal/services/IS_CL_COMPLETEPERCENTAGE_REQ.V1" xmlns:sch="http://xmlns.oracle.com/Enterprise/Tools/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <is:IS_CL_COMPLETEPERCENTAGE_REQ>
         <is:USER_ID>999999</is:USER_ID>
         <is:CHECKLIST_TYPE>GRP</is:CHECKLIST_TYPE>
         <is:CHECKLIST_ID>NEW_HIRE_CHECKLIST</is:CHECKLIST_ID>
         <is:CHECKLIST_INSTANCE_ID>0</is:CHECKLIST_INSTANCE_ID>
      </is:IS_CL_COMPLETEPERCENTAGE_REQ>
   </soapenv:Body>
</soapenv:Envelope> 
```

**示例 SOAP 响应消息**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <IS_CL_COMPLETEPERCENTAGE_RES xmlns="http://peoplesoft.com/IS_CL_COMPLETEPERCENTAGE_RESResponse">
         <PERCENTCOMPLETE>33</PERCENTCOMPLETE>
      </IS_CL_COMPLETEPERCENTAGE_RES>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-23T20:19:52.937

来自 Oracle 该问题已由 PT8.50.00 中的错误 ID 11560861 解决

在 PT 8.50 步骤中： A. 重新创建回复消息的模式： 1\. Peopletools>Integration Broker>Integration Setup>Messages。2\. 选择 COMBO_CF_EDIT_REPLY 消息。3\. 选中“包括命名空间”复选框。4\. 保存。

B. 重新生成 WSDL： 1\. Peopletools>Integration Broker>Web Services。2\. 选择 COMBO_CF_EDIT_REQUEST 服务操作。3\. 继续使用提供 Web 服务向导生成 WSDL。

在升级到 8.50 之前，有三个解决方法选项： A. 修改 WSDL：
1\. 从 PeopleTools 生成 WSDL，然后保存到文件。2\. 通过修改回复来更新 WSDL 文件以具有条目

替换生成的：xmlns="http://xmlns.oracle.com/Enterprise/FSCM/schema/COMBO_CF_EDIT_REPLYResponse">"

3.  然后将 WSDL 文件读回存储库。Peopletools>Integration Broker>Web 服务>使用 Web 服务。

    或 B. 将基于行集的消息转换为容器/部分行集消息。

4.  要创建容器/行集部件消息，请参阅：PeopleBook：PeopleSoft 集成代理 > 管理消息>管理消息部件 PeopleBook：PeopleSoft 集成代理 > 管理消息>管理容器消息

5.  修改服务操作以引用容器消息。

6.  然后生成一个新的 WSDL。
7.  修改 Handler Peoplecode 以利用 Parts 消息的方法。请参阅：PeopleBook：PeopleCode API 参考 > 消息类> %PART% 方法

或 C. 通过 XSLT 或 PeopleCode 转换出站响应消息以匹配 WSDL 是将实际响应 xmlns 调整为预期值的另一种方法。

# jquery - 使用 jquery 隐藏使用转发器创建的表行

> ID：12223143
> 
> 赞同：1
> 
> 时间：2012-08-31T22:19:51.557
> 
> 标签：jquery, asp.net

我用中继器创建了一个表，我使用 itemtemplate 和alternatingtemplate。项目模板创建tablerow**标记**，交替模板关闭**tablerow 标记**。

这是一个示例（我将在下面提供代码）
单元格 1 到 3 由 itemtemplate 创建，而 4 到 6 则由交替模板创建。

单元格 1-3 具有 data_id 5
单元格 4-6 具有 data_id 2
下一行
单元格 1-3 具有 data_id 7
单元格 4-6 具有 data_id 3

看起来像这样用中继器创建了第一个循环
| *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |
使用中继器创建第二个循环
| *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |

最终结果 | *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* | | *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |

我的问题是我也想用 Jquery 隐藏某些 TD。假设我想隐藏 data-id=2 的所有 TD，即第一行的单元格 4 到 6。

我怎样才能在不破坏表结构的情况下做到这一点，最好是像这样移动所有东西。

去掉第一行的第 4 到 6 个单元格

| *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |
| *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |

这就是我移除后的样子..
| *单元 1 |_单元2_* | *细胞3* |
| *单元 1 |_单元2_* | *细胞3 |_细胞4_* | *细胞5 |_细胞6_* |

我希望它看起来像这样
| *单元 1 |_单元2_* | 单元*3 ||* *单元 1 |_单元2_* | *细胞3* |
| *单元4 |_单元5_* | *细胞 6* |

这甚至可能吗？

这是我的代码..

```
 <asp:Repeater ID="Repeater1" runat="server">
    <HeaderTemplate>

    <table cellspacing="0">
    <thead>
    <tr>
     <th scope="col" abbr="Sidor/Artiklar" class="nobg">Sidor/Artiklar</th>
     <th scope="col" abbr="Dual 1.8GHz">MozRank</th>
     <th scope="col" abbr="Dual 1.8GHz">PR</th>
     <th scope="col" abbr="Dual 1.8GHz">Fri tillgång</th>
     <th scope="col" abbr="Dual 2GHz">30 Artiklar(1 om dagen)</th>
     <th scope="col" colspan="2" abbr="Dual 2.5GHz">Välj själv</th>
     <th scope="col" abbr="Sidor/Artiklar" class="nobg">Sidor/Artiklar</th>
     <th scope="col" abbr="Dual 1.8GHz">MozRank</th>
     <th scope="col" abbr="Dual 1.8GHz">PR</th>
     <th scope="col" abbr="Dual 1.8GHz">Fri tillgång</th>
     <th scope="col" abbr="Dual 2GHz">30 Artiklar(1 om dagen)</th>
     <th scope="col" colspan="2" abbr="Dual 2.5GHz">Välj själv</th>
    </tr>
    </thead>
    </HeaderTemplate>

     <AlternatingItemTemplate>

    <th scope="row" class="spec"><%# DataBinder.Eval(Container.DataItem, "namn_domain")%> </th>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'> 
    <%# DataBinder.Eval(Container.DataItem, "moz_domain")%>
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'> 
    <%# DataBinder.Eval(Container.DataItem, "pr_domain")%>       
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'> 
    <input type='<%# DataBinder.Eval(Container.DataItem, "type_domain")%>' name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value='<%# DataBinder.Eval(Container.DataItem, "faccess_domain")%>' onclick="calculatePrice();disableTB(this.name);" /> "Fri tillgång" 
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <input type="radio" name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value='<%# DataBinder.Eval(Container.DataItem, "monthly_domain")%>' onclick="calculatePrice();disableTB(this.name);" /> "En artikel om dagen (30/mån)"
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <input type="radio" name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value="0"  onclick="calculatePrice();enableTB(this.name, this.checked)" />  "Skriv ditt antal själv"
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <input type="text"  name='<%# DataBinder.Eval(Container.DataItem, "moz_domain")%>' id='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>'  Enabled="false" Width="40px" onkeyup="calculatePrice()" style="background-color:#eeeeee" /> 
    </td>

    </tr>
    </AlternatingItemTemplate>

    <ItemTemplate>

    <tr>

    <th scope="row" abbr="Model" class="spec"><%# DataBinder.Eval(Container.DataItem, "namn_domain")%>   </th>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <%# DataBinder.Eval(Container.DataItem, "moz_domain")%>
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <%# DataBinder.Eval(Container.DataItem, "pr_domain")%>       
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <b></b>
    <input type='<%# DataBinder.Eval(Container.DataItem, "type_domain")%>' name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value='<%# DataBinder.Eval(Container.DataItem, "faccess_domain")%>' onclick="calculatePrice();disableTB(this.name);" /> "Fri tillgång" 
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>  
    <input type="radio" name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value='<%# DataBinder.Eval(Container.DataItem, "monthly_domain")%>' onclick="calculatePrice();disableTB(this.name);" /> "En artikel om dagen (30/mån)"
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'> 
    <input type="radio" name='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>' value="0"  onclick="calculatePrice();enableTB(this.name, this.checked)" />  "Skriv ditt antal själv"
    </td>
    <td class="alt" data_id='<%# DataBinder.Eval(Container.DataItem, "pr_domain")%>'>
    <input type="text"  name='<%# DataBinder.Eval(Container.DataItem, "moz_domain")%>' id='<%# DataBinder.Eval(Container.DataItem, "idtag_domain")%>'  Enabled="false" Width="40px" onkeyup="calculatePrice()" style="background-color:#eeeeee" /> 
    </td>

    </ItemTemplate>
    <FooterTemplate>
    </table>
    </FooterTemplate>
    </asp:Repeater> 
```

这是我的 jquery，只是弄乱了理解函数，所以这段代码显然不是正确的
函数 hidetd() {

```
for(var i = 0; i < 2; i++) {
    $("[data_id=" + i + "]").hide();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:53:54.673

*您的情况不需要*for循环。*下面的 jQuery 代码片段将隐藏所有属性**data_id = 2的****td**元素*

 ***```
<script type="text/javascript">
  var i = 2;
  $(document).ready(function() {
    $("td[data_id='"+ i +"']").hide();
  });
</script> 
```***

# linux - 在大多数 Linux GUI 中，右键单击“打开方式”选项的行为如何？

> ID：12223155
> 
> 赞同：0
> 
> 时间：2012-08-31T22:21:29.293
> 
> 标签：linux, desktop-application, desktop-integration

我一直在尝试制作一个存在于`/usr/bin`.

我想知道当双击或右键单击文件并选择“打开方式”选项时 Nautilus/Caja/Dolphin/PCManFM 发送什么样的命令/数据/任何内容，以及任何程序语言需要做才能获得它需要从中操作的文件的路径。我知道如何做到这一点的唯一语言是 BASH 脚本，而 BASH 的语法阻止我搜索有关我的代码功能的信息。

一般来说，这个主题很难搜索，所以我会很感激任何关于它的信息。

编辑：澄清一下，当我点击这里时：

![右键菜单的图片](../Images/bf5bae7f14a1a0be1c889947e817f21a.png)

什么数据被发送到程序“bleh”，它应该如何使用这些数据？

我不应该重述这...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:05:12.537

您的应用程序需要附带一个 .desktop 文件，这些文件放置在标准化位置。

请参阅此处的规范：[http](http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html) ://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html 并在此处进行一些解释：http: [//library.gnome.org/admin/system-admin -guide/stable/mimetypes-registering.html.en](http://library.gnome.org/admin/system-admin-guide/stable/mimetypes-registering.html.en)

回答您的问题特别重要的是“注册 MIME 类型”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:47:03.493

好吧，我自己想通了。

右键单击的文件的名称作为参数发送，工作目录设置为用户的主目录。

我的问题是由于我的程序试图同时处理两个不同的目标引起的：文件管理器发送给它的文件名，以及我的（不相关的）主目录。我自己指定了一个新的目标目录，现在它工作正常。

编辑：这可能特定于 TCL。如果是这样，那么我很抱歉发布这个问题。

# ruby-on-rails - 有没有办法使用 Resque 动态加载 Ruby 库？

> ID：12223158
> 
> 赞同：1
> 
> 时间：2012-08-31T22:21:39.283
> 
> 标签：ruby-on-rails, ruby, resque

我的 Rails 3.2.8 应用程序中有一个 Resque 的 Reporter 工作人员。我经常为用户添加新报告，或者修复现有报告中的错误。

报告部署为 Ruby 模块，其方法由 Resque 报告工作者调用。

每次部署新代码时，我都必须重新启动 Resque。在此期间，通常会有一个或多个报告被杀死，状态为“正在运行”。我想知道的是，有没有办法让 Resque 重新加载它用来运行报告的 ruby​​ 模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:34:05.670

而不是重新加载，您可以使用`kill -s QUIT`. 这将导致工作人员在关闭之前完成他们的报告。

有关在 resque 中使用信号的更多信息，请参见[https://github.com/defunkt/resque#signals](https://github.com/defunkt/resque#signals)。

# java - 您能否从 SQLException 中确定使用了哪个数据库供应商？

> ID：12223159
> 
> 赞同：0
> 
> 时间：2012-08-31T22:21:39.967
> 
> 标签：java, sql, datasource

我假设简单的答案是*否定*的，但想知道是否有一个 Java 忍者可能知道一个聪明的黑客......更具体地说，我的问题是我正在尝试创建可以从其他数据库中提取/恢复数据库的自动化数据格式（xml、另一个数据库供应商、json...）。我试图将供应商特定代码的范围限制为一个`*Adapter`类。界面是：

```
public String escapeName( String name );

public ColumnMetaData columnMetaDataFromResultSet( ResultSet resultSet ) throws SQLException;

public SqlQuery getColumnMetaDataSql( String schema, String table );

public String getCreateTableSql( TableMetaData tableMetaData );

public String getDropTableSql( TableMetaData tableMetaData );

public String getRowInsertSql( TableMetaData tableMetaData );

public String getRowSelectSql( TableMetaData tableMetaData );

public SqlQuery getTableMetaDataSql();

public TableMetaData tableMetaDataFromResultSet( ResultSet resultSet ) throws SQLException; 
```

这个问题的重要方法是`getDropTableSql( TableMetaData tableMetaData )`。该方法理论上将返回一个 SQL 语句，该语句将删除元数据指示的表，以便可以重新创建它（这用于在固定期限的基础上发布完整的数据集，因此，旧的，新的）。MySQL 和 SQLServer 的适配器都支持某种安全的`DROP`（`DROP table IF EXISTS`或类似的），但 Oracle 和 DB2 不支持。所以我的下一个想法是放弃它并捕获适当的异常。但是抛出的异常是`java.sql.SQLSyntaxErrorException`（或者`org.springframework.jdbc.BadSqlGrammarException`因为我使用的是弹簧`JdbcTemplate`）。那个异常系列似乎很广泛，可以安全地捕获（而且它对我来说似乎并不像语法......）。每个供应商似乎返回不同的 SQLState 和 ErrorCode，所以除非我也能确定供应商，否则这些并没有多大帮助。那么，我可以吗？我知道spring会以某种方式做到这一点，很可能是从`DataSource`发出查询的那个中挖掘出来的。只是还没有想通。

- - - - - - - - - - - 更新 - - - - - - - - - - - - - -

我能够用这段代码实现我的目标：

```
private void dropTable( JdbcTemplate jdbcTemplate, String dropSql ) {
    try {
        jdbcTemplate.execute( dropSql );
    }
    catch ( BadSqlGrammarException sqle ) {
        try {
            throw sqle.getRootCause();
        }
        catch ( SQLException rootCause ) {
            int errorCode = rootCause.getErrorCode();
            String sqlState = rootCause.getSQLState();

            try {
                String vendor = jdbcTemplate.getDataSource().getConnection().getMetaData().getDatabaseProductName();

                if ( vendor.equalsIgnoreCase( "mysql" ) && errorCode == 1051 && sqlState.equals( "42S02" ) ) {
                    logger.info( "mysql table does not exist, unable to drop ({})", dropSql );
                }
                else if ( vendor.equalsIgnoreCase( "oracle" ) && errorCode == 942 && sqlState.equals( "42000" ) ) {
                    logger.info( "oracle table does not exist, unable to drop ({})", dropSql );
                }
                else {
                    throw( sqle );
                }
            }
            catch ( Exception e ) {
                throw( sqle );
            }
        }
        catch ( Throwable e ) {
            throw sqle;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:16:34.730

您可以使用 . 检查数据库供应商的名称`DatabaseMetaData.getDatabaseProductName()`。

这样你就不需要“分析”异常

# database - 使用映射表按关系计数排序

> ID：12223164
> 
> 赞同：1
> 
> 时间：2012-08-31T22:22:21.183
> 
> 标签：database, orm, relationships

假设您有一个书本表、一个学生表和一个映射表，显示了书籍和表之间的多对多关系。然后说你需要按借最多到最少的顺序对书籍进行排序。实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:39:35.573

如果对于每本书的借阅，在 Mapper 表中都有一条记录带有该书的 ID，则以下查询将按图书 ID 的借阅次数对图书 ID 进行排序：

```
SELECT BOOK_ID, COUNT(*) CNT 
FROM MAPPER 
GROUP BY BOOK_ID 
ORDER BY CNT DESC 
```

# c++ - 保存和加载非纯文本的文本文件

> ID：12223166
> 
> 赞同：1
> 
> 时间：2012-08-31T22:22:59.983
> 
> 标签：c++, qt, save, text-editor, richtext

所以，我正在 Qt 中制作一个文本编辑器。它主要完成非常基本的功能。新建文件、保存、打开、剪切、复制、粘贴、粗体、下划线、斜体、撤消和重做。但是，当我将文本加粗、斜体或下划线，然后再次打开文本文件时，它会以纯文本形式打开。就像你打开一个文件一样，加粗一些文本，保存它然后再次打开它，它将是纯文本而不是粗体或任何东西。我曾尝试阅读有关如何使其按我想要的方式工作的信息，但没有运气。我的程序甚至可以创建/打开富文本文件，但它的工作方式完全相同。我了解我编写代码的方式使其按原样工作。我只是不知道如何“修复”它。

以下是我编写的使用 QFileDialog 保存和打开文件的代码块：

```
void WordWriteMain::on_actionOpen_File_triggered()
{
    QString fileName = QFileDialog::getOpenFileName(this,"Open a file","","Text (*.txt);;Rich Text (*.rtf)");
    QFile file(fileName);
    if(file.open(QIODevice::ReadOnly|QIODevice::Text)){
    ui->textBox->setText((file.readAll()));
    }
}

void WordWriteMain::on_actionSave_triggered()
{
    QString fileName = QFileDialog::getSaveFileName(this,"Open a file","","Text (*.txt);;Rich Text (*.rtf)");
    QFile file(fileName);
    if(file.open(QIODevice::WriteOnly|QIODevice::Text)){
        file.write(ui->textBox->toPlainText().toUtf8());
    }
} 
```

我正在尝试使用 QFileDialog 做些什么吗？就像我说的那样，我理解 file.write(ui->textBox->toPlainText().Utf8()); 将所有文本转换为纯文本，但我不知道如何在不这样做的情况下使保存槽工作。一如既往，非常感谢您花时间帮助我并阅读我的问题。如果需要更多信息，我将非常乐意提供。编辑：另外，我希望将来能够添加段落对齐，所以我应该让我的文本编辑器严格地富文本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:27:33.190

使用`toHtml()`而不是`toPlainText()`. `setHtml()`改为使用时`setText()`

也使用`toAscii()`代替`toUtf8()`不丢失用户的语言代码页。

见：[http ://doc.qt.io/archives/qt-4.7/qtextedit.html](http://doc.qt.io/archives/qt-4.7/qtextedit.html)

# python - 将标题添加到 Numpy 数组

> ID：12223167
> 
> 赞同：13
> 
> 时间：2012-08-31T22:23:02.090
> 
> 标签：python, numpy, python-3.x

我有一个要为其添加标头的数组。

这就是我现在拥有的：

```
0.0,1.630000e+01,1.990000e+01,1.840000e+01
1.0,1.630000e+01,1.990000e+01,1.840000e+01
2.0,1.630000e+01,1.990000e+01,1.840000e+01 
```

这就是我要的：

```
SP,1,2,3
0.0,1.630000e+01,1.990000e+01,1.840000e+01
1.0,1.630000e+01,1.990000e+01,1.840000e+01
2.0,1.630000e+01,1.990000e+01,1.840000e+01 
```

注意：“SP”总是第一个，后面是列的编号，可能会有所不同

这是我现有的代码：

```
fmt = ",".join(["%s"] + ["%10.6e"] * (my_array.shape[1]-1))

np.savetxt('final.csv', my_array, fmt=fmt,delimiter=",") 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-13T10:40:01.127

从 Numpy 1.7.0 开始，为了这个目的，已经在[numpy.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)中添加了三个参数：页眉、页脚和注释。所以你想要的代码可以很容易地写成：

```
import numpy
a = numpy.array([[0.0,1.630000e+01,1.990000e+01,1.840000e+01],
                 [1.0,1.630000e+01,1.990000e+01,1.840000e+01],
                 [2.0,1.630000e+01,1.990000e+01,1.840000e+01]])
fmt = ",".join(["%s"] + ["%10.6e"] * (a.shape[1]-1))
numpy.savetxt("temp", a, fmt=fmt, header="SP,1,2,3", comments='') 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-01T07:27:39.373

**注意：**此答案是为旧版本的 numpy 编写的，与编写问题时相关。使用现代 numpy，[makhlaghi 的答案](https://stackoverflow.com/a/16520086/1600898)提供了一个更优雅的解决方案。

由于`numpy.savetxt`也可以写入文件对象，因此您可以自己打开文件并在数据之前写入标题：

```
import numpy
a = numpy.array([[0.0,1.630000e+01,1.990000e+01,1.840000e+01],
                 [1.0,1.630000e+01,1.990000e+01,1.840000e+01],
                 [2.0,1.630000e+01,1.990000e+01,1.840000e+01]])
fmt = ",".join(["%s"] + ["%10.6e"] * (a.shape[1]-1))

# numpy.savetxt, at least as of numpy 1.6.2, writes bytes
# to file, which doesn't work with a file open in text mode.  To
# work around this deficiency, open the file in binary mode, and
# write out the header as bytes.
with open('final.csv', 'wb') as f:
  f.write(b'SP,1,2,3\n')
  #f.write(bytes("SP,"+lists+"\n","UTF-8"))
  #Used this line for a variable list of numbers
  numpy.savetxt(f, a, fmt=fmt, delimiter=",") 
```

# database-design - 为我的学生设计一个数据库

> ID：12223169
> 
> 赞同：0
> 
> 时间：2012-08-31T22:24:00.970
> 
> 标签：database-design, checkbox

我在管理数据库方面相当新手，但我对我想要完成的教学需求有一个想法。

我打算存储一些学生的英语技能水平信息。我打算让每个学生都登录数据库。在那里，他们应该能够通过选中与特定问题相关的框来评估自己的技能。

我有 7 个不同的类别，它们都包含许多问题。最重要的是，每个类别分为 6 个不同的级别。例如，听力理解有 A1、A2、B1、B2、C1、C2 级别。每个级别代表不同级别的英语技能。这些类别都有一组不同的问题。比如，“如果有人说得很慢并且使用清晰的语言，我可以理解。”

每个类别中的每个问题也有三个复选框。一个学生可以检查他们是否可以对特定问题回答“是”，一个让我（老师）在我确认他们可以时检查，一个复选框让学生填写如果问题是他们想要的目标喜欢到达。

到目前为止，我已经为学生创建了一个表格，一个列出所有 7 个类别的表格，每个类别一个包含许多问题的表格。我还有一个与学生表和类别列表相关的“之间”表，因为直接链接它们将是我假设的多对多关系。

这是设计这样一个数据库的明智方式吗？

我现在最大的问题是如何将复选框添加到组合中。应该将它们添加为单独的表格，还是应该将它们与类别表格中的问题放在一起？显然，它们应该与每个学生以及每个问题相关联。

我还没有开始研究不同的关卡，因为我认为我应该先让它在一个关卡上工作，然后再添加所有其他关卡。

感谢您一直以来的耐心阅读。我希望我已经足够清楚，以便可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:31:41.557

也许根据我更好的判断，我会将其发布为答案...

我创建了一个简单的数据库结构，并根据您的要求插入了一些数据。你可以在这里查看：[http ://www.sqlfiddle.com/#!3/54a2d/3](http://www.sqlfiddle.com/#!3/54a2d/3)

这种结构非常僵化，以至于添加简单的功能非常困难（建议从头开始）。

例如，如果不显着修改架构，您将无法收到“您学习英语多少年了。”这个问题的正确答案，您无法重新评估学生，学生无法澄清任何答案等。

请记住 - 任何时候您开始添加列以适应新功能时，您的脑海中应该有一个无声的喊叫，告诉您您（可能）做错了。阅读规范化。

另外，我不知道复选框是否会导致许多客户端/服务器组合出现问题，但在带有 SQL Server 后端的 MS Access 中，您需要添加一`TIMESTAMP`列，以便 Access 可以在提交更新之前确定记录是否已更改。

**更新**

添加了在 SQL Fiddle 链接上创建的表的可视化表示

![在此处输入图像描述](../Images/d8a88d76402a418ce94d540d05f4232c.png)

# git - 在 Jenkins 中跨作业检查特定 git id 的状态

> ID：12223174
> 
> 赞同：0
> 
> 时间：2012-08-31T22:24:58.917
> 
> 标签：git, version-control, continuous-integration, jenkins

我们正在使用 Jenkins 在我们构建的 20 个左右不同的平台/配置上持续构建我们的软件。其中一些平台比其他平台慢得多，并且代码并不总是在所有平台上都能干净地构建。

有没有办法检查给定 git ID 的“状态”。理想情况下，我想知道任何 ID 已经在哪些平台上构建，在哪些平台上可以，在哪些平台上失败。那可能吗？

我们不使用矩阵作业（每个平台都有一个“正常”作业）。这可能会到来，但我还没有尝试过。这会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:45:54.000

感谢您的澄清 - 使用矩阵构建最容易，因为矩阵中的所有构建都将由相同的 Git ID 触发，并且您会在一个矩阵中看到每个构建的通过/失败状态詹金斯页面。

您可以从 Jenkins API 相当轻松地拉取触发构建的更改，例如，`http://myjenkins:8080/job/myjob/22/api/json`将以 JSON 格式为您提供 myjob build 22 的所有详细信息，包括触发它的修订和构建结果。如果您不想设置矩阵构建，您可以编写一个脚本来为您的所有构建提取该信息。

查看`http://myjenkins:8080/job/myjob/22/api`其他可用的输出格式。

# php - 如何将存储库注入 Symfony 中的服务？

> ID：12223176
> 
> 赞同：80
> 
> 时间：2012-08-31T22:25:07.423
> 
> 标签：php, symfony, dependency-injection

我需要将两个对象注入`ImageService`. 其中一个是 的实例`Repository/ImageRepository`，我得到这样的：

```
$image_repository = $container->get('doctrine.odm.mongodb')
    ->getRepository('MycompanyMainBundle:Image'); 
```

那么如何在我的 services.yml 中声明呢？这是服务：

```
namespace Mycompany\MainBundle\Service\Image;

use Doctrine\ODM\MongoDB\DocumentRepository;

class ImageManager {
    private $manipulator;
    private $repository;

    public function __construct(ImageManipulatorInterface $manipulator, DocumentRepository $repository) {
        $this->manipulator = $manipulator;
        $this->repository = $repository;
    }

    public function findAll() {
        return $this->repository->findAll();
    }

    public function createThumbnail(ImageInterface $image) {
        return $this->manipulator->resize($image->source(), 300, 200);
    }
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-12-03T10:39:15.433

对于像我这样来自 Google 的人来说，这是一个干净的解决方案：

**更新：**这是 Symfony 2.6（及更高版本）的解决方案：

```
services:

    myrepository:
        class: Doctrine\ORM\EntityRepository
        factory: ["@doctrine.orm.entity_manager", getRepository]
        arguments:
            - MyBundle\Entity\MyClass

    myservice:
        class: MyBundle\Service\MyService
        arguments:
            - "@myrepository" 
```

* * *

**不**推荐使用的解决方案（Symfony 2.5 及更低版本）：

```
services:

    myrepository:
        class: Doctrine\ORM\EntityRepository
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - MyBundle\Entity\MyClass

    myservice:
        class: MyBundle\Service\MyService
        arguments:
            - "@myrepository" 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-09-01T00:31:40.147

我找到了这个[链接](http://symfony.com/doc/master/components/dependency_injection/factories.html)，这对我有用：

```
parameters:
    image_repository.class:            Mycompany\MainBundle\Repository\ImageRepository
    image_repository.factory_argument: 'MycompanyMainBundle:Image'
    image_manager.class:               Mycompany\MainBundle\Service\Image\ImageManager
    image_manipulator.class:           Mycompany\MainBundle\Service\Image\ImageManipulator

services:
    image_manager:
        class: %image_manager.class%
        arguments:
          - @image_manipulator
          - @image_repository

    image_repository:
        class:           %image_repository.class%
        factory_service: doctrine.odm.mongodb
        factory_method:  getRepository
        arguments:
            - %image_repository.factory_argument%

    image_manipulator:
        class: %image_manipulator.class% 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-09-01T04:07:23.643

如果不想将每个存储库定义为服务，则从版本开始，`2.4`您可以执行以下操作，（`default`是实体管理器的名称）：

```
@=service('doctrine.orm.default_entity_manager').getRepository('MycompanyMainBundle:Image') 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-10-21T11:36:14.913

# Symfony 3.3、4 和 5 让这变得简单多了。

**查看我的帖子[How to use Repository with Doctrine as Service in Symfony](https://www.tomasvotruba.cz/blog/2017/10/16/how-to-use-repository-with-doctrine-as-service-in-symfony/)**以获得更一般的描述。

对于您的代码，您需要做的就是使用*组合而不是继承*——这是一种 SOLID 模式。

### 1.创建自己的仓库，不直接依赖Doctrine

```
<?php

namespace MycompanyMainBundle\Repository;

use Doctrine\ORM\EntityManagerInterface;
use MycompanyMainBundle\Entity\Image;

class ImageRepository
{
    private $repository;

    public function __construct(EntityManagerInterface $entityManager)
    {
        $this->repository = $entityManager->getRepository(Image::class);
    }

    // add desired methods here
    public function findAll()
    {
        return $this->repository->findAll();
    }
} 
```

### [2\. 使用基于 PSR-4 的自动注册](https://www.tomasvotruba.cz/blog/2017/05/07/how-to-refactor-to-new-dependency-injection-features-in-symfony-3-3/#4-use-psr-4-based-service-autodiscovery-and-registration)添加配置注册

```
# app/config/services.yml
services:
    _defaults:
        autowire: true

    MycompanyMainBundle\:
        resource: ../../src/MycompanyMainBundle 
```

### 3\. 现在您可以通过构造函数注入在任何地方添加任何依赖项

```
use MycompanyMainBundle\Repository\ImageRepository;

class ImageService
{
    public function __construct(ImageRepository $imageRepository)
    {
        $this->imageRepository = $imageRepository;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-24T11:43:13.373

对于 Symfony 5，这真的很简单，不需要 services.yml 来注入依赖：

1.  在服务构造函数中注入实体管理器

> ```
> private $em;
> 
> public function __construct(EntityManagerInterface $em)
> {
>     $this->em = $em;
> } 
> ```

2.  然后获取存储库：

> $this->em->getRepository(ClassName::class)

通过将 ClassName 替换为您的实体名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-06T09:58:17.350

在我的案例中，基于@Tomáš Votruba 的回答和这个[问题](https://stackoverflow.com/q/52676915/4706711)，我提出了以下方法：

# 适配器方法

## 没有继承

1.  创建一个通用适配器类：

    ```
    namespace AppBundle\Services;
    use Doctrine\ORM\EntityManagerInterface;

    class RepositoryServiceAdapter
    {
        private $repository=null;

        /**
        * @param EntityManagerInterface the Doctrine entity Manager
        * @param String $entityName The name of the entity that we will retrieve the repository
        */
        public function __construct(EntityManagerInterface $entityManager,$entityName)
        {
            $this->repository=$entityManager->getRepository($entityName)
        }

        public function __call($name,$arguments)
        {
          if(empty($arrguments)){ //No arguments has been passed
            $this->repository->$name();
          } else {
            //@todo: figure out how to pass the parameters
            $this->repository->$name(...$argument);
          }
        }
    } 
    ```

2.  然后为每个实体定义一个服务，例如在我的例子中定义一个（我使用php来定义symfony服务）：

    ```
     $container->register('ellakcy.db.contact_email',AppBundle\Services\Adapters\RepositoryServiceAdapter::class)
      ->serArguments([new Reference('doctrine'),AppBundle\Entity\ContactEmail::class]); 
    ```

## 有继承

1.  与上述步骤 1 相同

2.  扩展`RepositoryServiceAdapter`类例如：

    ```
    namespace AppBundle\Service\Adapters;

    use Doctrine\ORM\EntityManagerInterface;
    use AppBundle\Entity\ContactEmail;

    class ContactEmailRepositoryServiceAdapter extends RepositoryServiceAdapter
    {
      public function __construct(EntityManagerInterface $entityManager)
      {
        parent::__construct($entityManager,ContactEmail::class);
      }
    } 
    ```

3.  注册服务：

    ```
    $container->register('ellakcy.db.contact_email',AppBundle\Services\Adapters\RepositoryServiceAdapter::class)
      ->serArguments([new Reference('doctrine')]); 
    ```

如果您有一个很好的可测试方法来测试您的数据库行为，它也可以帮助您模拟，以防您想要对您的服务进行单元测试，而无需过多担心如何做到这一点。例如，假设我们有以下服务：

```
//Namespace definitions etc etc

class MyDummyService
{
  public function __construct(RepositoryServiceAdapter $adapter)
  {
    //Do stuff
  }
} 
```

并且 RepositoryServiceAdapter 适应以下存储库：

```
//Namespace definitions etc etc

class SomeRepository extends \Doctrine\ORM\EntityRepository
{
   public function search($params)
   {
     //Search Logic
   }
} 
```

## 测试

因此，您可以通过模拟非继承方法或继承方法来轻松模拟/硬编码/模拟`search`定义的方法的行为。`SomeRepository``RepositoryServiceAdapter``ContactEmailRepositoryServiceAdapter`

# 工厂方法

或者，您可以定义以下工厂：

```
namespace AppBundle\ServiceFactories;

use Doctrine\ORM\EntityManagerInterface;

class RepositoryFactory
{
  /**
  * @param EntityManagerInterface $entityManager The doctrine entity Manager
  * @param String $entityName The name of the entity
  * @return Class
  */
  public static function repositoryAsAService(EntityManagerInterface $entityManager,$entityName)
  {
    return $entityManager->getRepository($entityName);
  }
} 
```

然后通过执行以下操作切换到 php 服务注释：

将其放入文件`./app/config/services.php`中（对于 symfony v3.4，`.`假定您的 ptoject 的根目录）

```
use Symfony\Component\DependencyInjection\Definition;
use Symfony\Component\DependencyInjection\Reference;
$definition = new Definition();

$definition->setAutowired(true)->setAutoconfigured(true)->setPublic(false);

// $this is a reference to the current loader
$this->registerClasses($definition, 'AppBundle\\', '../../src/AppBundle/*', '../../src/AppBundle/{Entity,Repository,Tests,Interfaces,Services/Adapters/RepositoryServiceAdapter.php}');

$definition->addTag('controller.service_arguments');
$this->registerClasses($definition, 'AppBundle\\Controller\\', '../../src/AppBundle/Controller/*'); 
```

并且 cange `./app/config/config.yml`（`.`假设您的 ptoject 的根）

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    #Replace services.yml to services.php
    - { resource: services.php }

#Other Configuration 
```

然后您可以按如下方式关闭服务（在我使用名为 的虚拟实体的示例中使用`Item`）：

```
$container->register(ItemRepository::class,ItemRepository::class)
  ->setFactory([new Reference(RepositoryFactory::class),'repositoryAsAService'])
  ->setArguments(['$entityManager'=>new Reference('doctrine.orm.entity_manager'),'$entityName'=>Item::class]); 
```

同样作为一个通用技巧，切换到`php`服务注释可以让您轻松完成上述更高级的服务配置。对于代码片段，请使用我使用该方法制作的特殊[存储库。](https://github.com/pc-magas/symfony-repository-as-a-service)`factory`

# matlab - 如何：可以从 Unix 命令行获取参数的 MATLAB 脚本

> ID：12223179
> 
> 赞同：9
> 
> 时间：2012-08-31T22:25:26.690
> 
> 标签：matlab, command-line, command-line-arguments

只是为了具体起见，在一个名为 的文件中考虑以下超级简单的 Python 脚本`add_em`：

```
#!/usr/bin/env python
# script name: add_em

from sys import argv

x = int(argv[1])
y = int(argv[2])
x_plus_y = x + y
print '%d' % x_plus_y 
```

我现在可以运行这个脚本，***并从 Unix 命令行向它传递参数***，如下所示：

```
% python add_em 3 8
11 
```

如果我使脚本可执行，我什至不需要`python`在命令行中提及：

```
% chmod +x add_em
% add_em 41 -29
12 
```

有人可以告诉我如何编写（和运行）一个 MATLAB 脚本，以便它的执行与上面的脚本完全一样吗？特别是，它必须能够从 Unix 命令行（与例如 MATLAB GUI 的“命令行”相反）读取它的参数，并将它们的数字总和打印到标准输出。

> 注意：这个脚本***不需要***是“独立的”；IOW，可以假设 MATLAB 是本地安装的，甚至可以`matlab`在命令行中提及（类似于上面的第一种形式，其中`python`解释器在命令行上显式调用）。

谢谢！

PS：不用说，这个脚本是“健壮”的对立面，但我的目的是产生一个容易传达的例子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T23:26:37.043

你可以让一个 MATLAB 函数在里面做你想做的事情`add_em.m`

```
function add_em(x, y)
x_plus_y = x + y;
disp(x_plus_y);
exit; 
```

然后使用`-r`开关从 Unix 命令行调用它。例子：

```
matlab -nodesktop -nojvm -nosplash -r "add_em(3, 8)" 
```

这些`-`选项抑制桌面、java 和 splash，因此脚本/函数将在没有额外开销的情况下执行。

您还可以通过将输出重定向到日志文件（用于任何计算）或拖尾（例如，输出）来抑制 MATLAB 欢迎/版权消息，以便在终端上打印一些内容

```
matlab -nosplash -nodesktop -nojvm -r "add_em(3, 8)" | tail -n 3 
```

**更新**：刚刚发现这篇文章/答案与相关信息：[抑制 Matlab 的启动消息](https://stackoverflow.com/questions/1518072/suppress-start-message-of-matlab)

# google-sheets - 第 n 行到最后一行的总和

> ID：12223180
> 
> 赞同：42
> 
> 时间：2012-08-31T22:25:34.363
> 
> 标签：google-sheets, sum, google-sheets-formula

我想在我的电子表格顶部创建一个 TOTAL 行。在这一行中，每个单元格应该是 TOTAL 行下方列中的值的总和。

因此，例如，如果总行是第 1 行，则单元格 A1 应该是 A2 到 A 列中最后一行的总和。电子表格中的行数会随着时间的推移而增长，所以我不能只说`SUM(A2:A500)`，因为最终会有将是第 501、502 行等。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-02T05:17:08.850

如果您想要仅适用于 Google 电子表格的内容（如标题所示），则可以使用开放式范围：

```
=SUM(A2:A) 
```

在 Excel 中，您可以指定该版本的最大行数；例如，对于 2007 年和 2010 年：

```
=SUM(A2:A1048576) 
```

这也适用于 Google 电子表格，并且超出了 GSheets (400000)* 中当前的理论行数限制。

*编辑：* *[新版表格的引用限制](https://support.google.com/drive/answer/37603?hl=en)实际上现在是 200 万个单元格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T00:37:15.263

尝试这个

```
=SUM(OFFSET(A1,1,0,ROWS(A:A)-1,1)) 
```

适用于 Excel 和 Google Docs

一个缺点：通过使用`OFFSET`公式变为`Volatile`ie 每次工作表计算时都会计算，而不考虑数据变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:34:17.023

您可以在 Excel/Google 电子表格中执行此操作的一种方法是在顶部添加一个具有单个值的虚拟列（以及该列其余部分的所有空白）。

然后，您可以`SUMIF`总结所有值，除了不是“”的值 - 它应该只是单元格 A1 - 将以下内容放在 B1 中，在 B1 下方添加您想要的任何数字，在 A1 中添加任何内容。

```
=SUMIF(A:A,"",B:B) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-21T22:48:45.240

```
=(B3+C3+D3+E3+F3+G3+H3+I3+J3+K3+L3+M3) 
```

这对我有用。3 是行号 当您向下拖动框时，公式会向下传输并自动更改每行的行号。

在我将另一个标题向下添加几行之后，将 SUM 这个词添加到公式中。

```
=SUM(B19+C19+D19+E19+F19+G19+H19+I19+J19+K19+L19+M19) 
```

不确定是否有必要。但是只需将我使用的第一个公式复制粘贴到下段中就会产生错误消息。

# java - Java在同一个for循环中找不到符号

> ID：12223184
> 
> 赞同：1
> 
> 时间：2012-08-31T22:26:29.463
> 
> 标签：java, for-loop

在下面的代码中，即使我在同一个 for 循环中初始化，`number`也无法在该行中找到该变量。谁能告诉我为什么？`number++``number`

```
import java.lang.Math;
import java.util.Random;

public class test
{
    public static void main( String [] args )
    {
        String cardNumber; 
        double cardRandom;
        int cardRandomNumber;
        String[] cardSelection = new String[10];

        for (int number = 0; number <=  9; );
        {
            Random ran = new Random();
            cardRandom = ran.nextInt(52 - 1 + 1) + 1;
            cardRandomNumber = (int) Math.round( cardRandom );

            if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )
            { 
                cardNumber =  "card" + cardRandomNumber;
                System.out.println( cardNumber );
                number++; // Says Error: Cannot find symbol
            }
        }   
    }
} 
```

这个程序基本上只是从 1-52 中选择一个随机数，在它的开头添加“卡片”并打印出来。它应该打印出 10 个数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T22:28:49.070

以下行中的最后一个分号必须去掉：

```
for (int number = 0; number <=  9; ); 
```

您基本上声明了一个`for`没有主体的循环。好的 IDE 应该警告您此类错误。顺便说一句，递增循环计数器应该转到`for`我们都期望的最后一个表达式：

```
for (int number = 0; number <=  9; ++number) {
  //..
} 
```

顺便说一句，在消除了始终满足的不必要的变量和条件后，您的代码如下所示：

```
public static void main(String[] args) {
    Random r = new Random();
    for (int number = 0; number <= 9; ++number) {
        int cardRandom = 1 + r.nextInt(52);
        String cardNumber = "card" + cardRandom;
        System.out.println(cardNumber);
    }
} 
```

严重地。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:27:53.340

您无意中`for`用尾随分号终止了循环：

```
for (int number = 0; number <=  9; ); 
```

这使其等效于：

```
for (int number = 0; number <=  9; )
{ ; }

{
    Random ran = new Random();
    cardRandom = ran.nextInt(52 - 1 + 1) + 1;
    cardRandomNumber = (int) Math.round( cardRandom );

    // etc. ... 
```

因此，`number`当您增加变量时，该变量超出了范围。

删除该尾随分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:29:05.647

删除分号：

```
for (int number = 0; number <=  9; ); // <-- this is your problem 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:58:18.950

```
import java.lang.Math; 
import java.util.Random; 
public class foo 
{
    public static void main( String [] args ) 
    {

        String cardNumber;          
        double cardRandom;       
        int cardRandomNumber;       
        String[] cardSelection = new String[10];   
        for (int number = 0; number <=  9; )
        {
            Random ran = new Random();   
            cardRandom = ran.nextInt(52 - 1 + 1) + 1;         
            cardRandomNumber = (int) Math.round( cardRandom );    

            if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )          
            {     
                cardNumber =  "card" + cardRandomNumber;               
                System.out.println( cardNumber );      
            }
            number++; 
        }
    }   
} 
```

输出是一组 10 项：（请注意，每次运行程序时，它都会给出不同的卡号）

卡2 卡12 卡37 卡23 卡18 卡20 卡21 卡45 卡19 卡13

# php - 这个“if”语句有什么问题？

> ID：12223191
> 
> 赞同：0
> 
> 时间：2012-08-31T22:27:10.267
> 
> 标签：php, javascript, if-statement

如果条件，我对 jquery 有一个大问题：我有一个 div，如果用户单击它，调用 ajax 并且用户输入数据并提交表单。我用 jQuery 检查输入，如果可以，发送到另一个 ajax 表单。第一次它工作并且如果检查条件但是第二次如果用户点击div并调用第一个ajax然后调用第二个ajax提交jQuery如果条件不起作用并将数据发送到第二个ajax表单即使条件是假的！！！！

注意：如果单击 div 一切都只能第一次正常工作，第二次不能正常工作。但是如果用户在第一次提交后刷新页面然后点击 div 它可以工作。

我的部分代码：

```
<div id="submit">submit</div>
//on click o div show the first ajax form for input
// and on submit check data and send it to second ajax
if( (val == 'A') || (val == '') ){
   //send data to ajax
} else if((cell_val != '') || (cell_val != 'A')){
   // show alert msg
} 
```

我想检查用户输入是否类似于“A”或为空，然后将数据发送到 ajax 否则显示警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:31:09.250

```
 if((cell_val != '') || (cell_val != '-')) 
```

将始终返回 true

利用

```
if (!(cell_val == '' || cell_val=='-')) 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:36:39.797

在代码的第一部分，您的 java 脚本位于 html 中。使用`<script type='text/javascript'> your code``

在 else 之后的第二个`if`中，您应该使用`&&`而不是`||`. 就在音符上-`val`听起来如此相似，以至于我想知道这是否是您想要的...根据您的解释，我也有这个疑问，因为如果我很好地理解了您，则除了显示警报之外`cell_val`，您不需要使用任何东西`else`盒子。

# linux - 很难在 mac osx 上安装 ia32-lib

> ID：12223192
> 
> 赞同：2
> 
> 时间：2012-08-31T22:27:19.423
> 
> 标签：linux, macos

我正在尝试在我的 mac leopard osx 10.5.8 上安装 ia32-lib，以便能够创建一些 Android 组件，如 SD 卡，问题是我收到以下错误：

```
E: Couldn't find package ia32-libs 
```

所以我认为这是一个更新问题，因此更新为：

```
sudo apt-get update 
```

但我仍然得到同样的错误，

我注意到的另一件事是，通过运行缓存扫描，例如：

```
sudo apt-cache search ia32-libs 
```

什么都没有返回，所以更新实际上并没有获取这个库，

你有过这样的经历吗？有一些提示吗？不幸的是，通过浏览网络，我只找到了 Debian 和 Ubuntu 的提示。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:09:44.600

好的：

1）您在同一个问题上打开了两个线程：

*   [很难在 mac osx 上安装 ia32-lib](https://stackoverflow.com/questions/12223192/hard-time-installing-ia32-lib-on-mac-osx)

*   [Android：无法创建 SD 卡](https://stackoverflow.com/questions/12221401/android-failed-to-create-sd-card)

2）更重要的是，老实说，我认为您在吠叫错误的树。

我认为您*不需要*在 Mac OSX 上安装 ia32-libs。哎呀，我什至不知道是否有*适用*于 Mac OSX 的 ia32-libs。是的，在某些 64 位 Linux 平台上是必需的。AFAIK，在 64 位 Mac OSX 上*没有必要。*诚实的！

3）请查看以下链接：

*   [http://www.buzztouch.com/files/howtos/Setting_Up_Your_Android_Development_Environment_For_MacOSX_v1.0.pdf](http://www.buzztouch.com/files/howtos/Setting_Up_Your_Android_Development_Environment_For_MacOSX_v1.0.pdf)

*   [64位mac上的android开发](https://stackoverflow.com/questions/5581874/android-dev-on-64-bit-mac)

*   [http://relentlessinquiry.com/2011/03/02/how-i-built-my-mac-os-x-android-development-environment/](http://relentlessinquiry.com/2011/03/02/how-i-built-my-mac-os-x-android-development-environment/)

*   [http://marakana.com/support/android_setup.html](http://marakana.com/support/android_setup.html)

# java - 在 for 循环中创建 JMenuitem

> ID：12223196
> 
> 赞同：2
> 
> 时间：2012-08-31T22:27:39.067
> 
> 标签：java, swing, actionlistener, jmenuitem

问候，我正在尝试这样做：

```
public float a=0;

for(a=1 ; a<100;a++){
        String fuent="font"+String.valueOf((int)a);
        JMenuItem fuent=new JMenuItem(String.valueOf(a));
        fuent.addActionListener(new ActionListener(){ public void actionPerformed(ActionEvent e){texto.setFont(texto.getFont().deriveFont(a)); current=a;}});
        tamano.add(fuent);
        } 
```

但它会抛出这些错误：

```
cambiar.java:71: error: variable fuent is already defined in constructor cambiar()
        JMenuItem fuent=new JMenuItem(String.valueOf(a));
                  ^

cambiar.java:72: error: cannot find symbol
        fuent.addActionListener(new ActionListener(){ public void actionPerformed(ActionEvent e){texto.setFont(texto.getFont().deriveFont(a)); current=a;}});
             ^

symbol:   method addActionListener(<anonymous ActionListener>)
  location: variable fuent of type String
2 errors
[Finished in 0.5s with exit code 1] 
```

我正在尝试这样做：

```
JMenuItem (String)fuent=new JMenuItem(String.valueOf(a));
 JMenuItem System.out.println(fuent)=new JMenuItem(String.valueOf(a)); 
```

但没有一个有效。

---编辑---我认为有些人对我想要的东西感到困惑：

```
String fuent="font"+String.valueOf((int)a);
        JMenuItem fuent=new JMenuItem(String.valueOf(a));//(Here sould go the value of the String, Example "font1")
        fuent.addActionListener(new ActionListener(){ public void actionPerformed(ActionEvent e){texto.setFont(texto.getFont().deriveFont(a)); current=a;}});
        tamano.add(fuent); //(Same Here) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:32:43.443

您用相同的名称定义了两个不同的变量

```
String fuent ="font"+String.valueOf((int)a);
JMenuItem fuent =new JMenuItem(String.valueOf(a)); 
```

尝试重命名一个或两个，例如

```
String strFuent="font"+String.valueOf((int)a);
JMenuItem miFuent=new JMenuItem(String.valueOf(a)); 
```

**更新示例**

```
JMenuItem fuent=new JMenuItem("font"+String.valueOf((int)a)); 
```

会解决你的问题

**OP 编辑​​后更新**

这仍然行不通...

```
String fuent="font"+String.valueOf((int)a); // You have defined fuent as a String
// Here you are trying to define fuent AGAIN as a JMenuItem
// You CAN NOT DO THIS...
// Change one of the variable names
JMenuItem fuent=new JMenuItem(String.valueOf(a));//(Here sould go the value of the String, Example "font1")
fuent.addActionListener(new ActionListener(){ public void actionPerformed(ActionEvent e){texto.setFont(texto.getFont().deriveFont(a)); current=a;}});
tamano.add(fuent); //(Same Here) 
```

这现在可以工作了......

```
String fuent1="font"+String.valueOf((int)a); // You have defined fuent as a String
JMenuItem fuent=new JMenuItem(fuent1);
fuent.addActionListener(new ActionListener(){ 
    public void actionPerformed(ActionEvent e){
        texto.setFont(texto.getFont().deriveFont(a)); current=a;
    }
});
tamano.add(fuent); //(Same Here) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:32:53.137

您应该学习 Java 的基础知识，因为您的代码存在主要的基本问题（浮点 a 不能在此处公开定义，除非它真的在其他地方并且您只是将它放在那里向我们展示）。您不能两次为变量定义相同的名称；调用一个 fuentMenu 和一个 fuentString 或其他。

# python - 关闭调试打印

> ID：12223204
> 
> 赞同：4
> 
> 时间：2012-08-31T22:28:38.227
> 
> 标签：python

有时我会在函数周围散布很多打印件来打印调试输出。为了切换这个调试输出，我想出了这个：

```
def f(debug=False): 
    print = __builtins__.print if debug else lambda *p: None 
```

或者，如果我需要打印除调试消息之外的其他内容，我会`dprint`为调试消息创建函数。

问题是，当`debug=False`这个`print`语句显着减慢代码时，因为`lambda *p: None`仍然被调用，并且已知函数调用很慢。

所以，我的问题是：有没有更好的方法来有效地禁用所有这些调试打印，以免影响代码性能？

* * *

所有的答案都是关于我不使用`logging`模块的。这是一个很好的注意事项，但这**并没有回答**如何避免函数调用大大减慢代码的问题——在我的例子中是 25 次（如果可能的话（例如通过修改函数代码对象来消除所有带有`print`语句或其他方式的行））。这些答案建议用 替换`print`，`logging.debug`这应该更慢。这个问题是关于完全摆脱那些函数调用。

我尝试使用`logging`而不是`lambda *p: None`，毫不奇怪，代码变得更慢。

* * *

也许有人想看看那些打印导致 25 减速的代码：http: [//ideone.com/n5PGu](http://ideone.com/n5PGu)

`logging`而且我对模块没有任何反对意见。我认为始终坚持稳健的解决方案而没有一些[*技巧*](https://stackoverflow.com/a/12223240/862380)是一个好习惯。但我认为，如果我在 20 行一次性代码片段中使用这些*hack* ，就没有什么犯罪行为。

* * *

`print`不是作为限制，而是作为建议，也许可以从函数源代码中删除一些行（例如以 开头）并重新编译它？我在下面的答案中列出了这种方法。尽管我希望看到对该解决方案的一些评论，但我欢迎其他解决此问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:34:51.010

您应该改用该`logging`模块。请参阅[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)

然后，您可以根据需要设置日志级别，并创建多个记录器对象，记录不同主题的日志。

```
import logging
#set your log level
logging.basicConfig(level=logging.DEBUG)
logging.debug('This is a log message') 
```

* * *

在您的情况下：您可以简单地用日志语句替换您的打印语句，例如：

```
import logging
print = __builtins__.print if debug else logging.debug 
```

现在，如果您将日志记录级别设置为调试，该函数只会打印任何内容

```
logging.basicConfig(level=logging.DEBUG) 
```

但作为一个优点，您可以在上面使用所有其他日志记录功能！`logging.error('error!')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T17:10:59.083

**Ned Batchelder在**[评论](https://stackoverflow.com/questions/12229424/replacing-parts-of-the-function-code-on-the-fly#comment16388151_12229424)中写道：

> 我怀疑减速是在计算调试函数的参数时。您应该寻找避免这些计算的方法。预处理 Python 只是一种干扰。

他是对的，因为减速实际上是由使用`format`方法格式化字符串引起的，无论结果字符串是否被记录，都会发生这种情况。

因此，如果不会发生日志记录，则应推迟并取消字符串格式化。这可以通过重构`dprint`函数或通过`log.debug`以下方式使用来实现：

```
log.debug('formatted message: %s', interpolated_value) 
```

如果消息不会被记录，它不会被格式化，不像`print`，它总是被格式化，不管它是否会被记录或丢弃。

`log.debug`推迟格式化的解决方案给[了](https://stackoverflow.com/questions/12229424/replacing-parts-of-the-function-code-on-the-fly/12229535#comment16387853_12229535)**Martijn Pieters** 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:30:10.467

另一种解决方案可能是动态编辑代码`f`并删除所有`drpint`调用。但是这个解决方案是非常[不推荐使用的](https://stackoverflow.com/questions/12238511/preprocessing-function-text-in-runtime-bofore-compilation#comment16403281_12238725)：

> 你是对的，你永远不应该诉诸于此，有很多方法可能出错。首先，Python 不是为源代码级别的转换而设计的语言，很难在不破坏有效代码的情况下将其编写为诸如 comment_1 之类的转换器。其次，这种 hack 会在各种情况下中断——例如，在定义方法时、定义嵌套函数时、在 Cython 中使用时、inspect.getsource 因任何原因而失败时。Python 是动态的，你真的不需要这种 hack 来定制它的行为。

以下是这种方法的代码，适合那些喜欢熟悉它的人：

```
from __future__ import print_function

DEBUG = False

def dprint(*args,**kwargs):
    '''Debug print'''
    print(*args,**kwargs)

_blocked = False
def nodebug(name='dprint'):
    '''Decorator to remove all functions with name 'name' being a separate expressions'''
    def helper(f):      
        global _blocked
        if _blocked:
            return f

        import inspect, ast, sys

        source = inspect.getsource(f)        
        a = ast.parse(source) #get ast tree of f

        class Transformer(ast.NodeTransformer):
            '''Will delete all expressions containing 'name' functions at the top level'''
            def visit_Expr(self, node): #visit all expressions
                try:
                    if node.value.func.id == name: #if expression consists of function with name a
                        return None #delete it
                except(ValueError):
                    pass
                return node #return node unchanged
        transformer = Transformer()
        a_new = transformer.visit(a)
        f_new_compiled = compile(a_new,'<string>','exec')

        env = sys.modules[f.__module__].__dict__
        _blocked = True
        try:
            exec(f_new_compiled,env)
        finally:
            _blocked = False
        return env[f.__name__]         
    return helper

@nodebug('dprint')        
def f():
    dprint('f() started')
    print('Important output')
    dprint('f() ended')
    print('Important output2')

f() 
```

更多信息：[动态替换部分功能代码](https://stackoverflow.com/questions/12229424/replacing-parts-of-the-function-code-on-the-fly)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:33:28.580

作为一个黑客，是的，这是有效的。（而且那些 lambda no-ops 绝对不可能成为您应用程序的瓶颈。）

`logging`但是，您确实应该使用该模块正确进行日志记录。

有关如何完成此操作的基本示例，请参见[http://docs.python.org/howto/logging.html#logging-basic-tutorial 。](http://docs.python.org/howto/logging.html#logging-basic-tutorial)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T22:35:23.833

您肯定需要使用 Python 的[日志记录](http://docs.python.org/library/logging.html)模块，它非常实用，您可以更改应用程序的日志级别。例子：

```
>>> import logging
>>> logging.basicConfig(level=logging.DEBUG)
>>> logging.debug('Test.')
DEBUG:root:Test. 
```

# iphone - JSON 到具有关系的核心数据

> ID：12223214
> 
> 赞同：4
> 
> 时间：2012-08-31T22:30:01.513
> 
> 标签：iphone, ios, core-data, one-to-many, relationships

按照[Ray Wenderlich 的新教程](http://www.raywenderlich.com/15916/how-to-synchronize-core-data-with-a-web-service-part-1)，我​​能够获取 JSON 数据并将其存储到核心数据中。不过，我很难理解如何处理 Core Data 中的关系。

这是我的数据模型：

![在此处输入图像描述](../Images/30ffbbb23f22faf5bcb441937da2f4aa.png)

这是我的 JSON：

```
{
    "results": [
        {
        "name": "Trivia 1",
        "objectId": "1000",
        "createdAt": "2012-08-31 18:02:52.249 +0000",
        "updatedAt": "2012-08-31 18:02:52.249 +0000",
        "questions": [
            {
                "text": "Question 1"
            },
            {
                "text": "Question 2"
            },
            {
                "text": "Question 3"
            }
         ]
       }
     ]
} 
```

最后，这里是我设置 managedObject 值的地方：

```
 //Sets values for ManagedObject, also checks type
    - (void)setValue:(id)value forKey:(NSString *)key forManagedObject:(NSManagedObject *)managedObject {

        NSLog(@"TYPE: %@", [value class]);

        //If managedObject key is "createdAt" or "updatedAt" format the date string to an nsdate
        if ([key isEqualToString:@"createdAt"] || [key isEqualToString:@"updatedAt"]) {
            NSDate *date = [self dateUsingStringFromAPI:value];
            //Set date object to managedObject
            [managedObject setValue:date forKey:key];
        } else if ([value isKindOfClass:[NSArray class]]) {  //<---This would be the array for the Relationship
            //TODO: If it's a Dictionary/Array add logic here
            for(NSDictionary *dict in value){
                NSLog(@"QUESTION");
            }
        } else {
            //Set managedObject's key to string
            [managedObject setValue:value forKey:key];
        }
    } 
```

我已经看过[这个问题](https://stackoverflow.com/questions/2362323/json-and-core-data-on-the-iphone)，但我真的很困惑如何将 Ray Wenderlich 示例中的各个部分连接在一起。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T21:45:39.570

在您的 for 循环中，您将进行一些特殊的处理，如果您正在处理 QuestionGroup，您将知道该对象上的数组是问题（假设它是唯一的数组），因此您可以为每个问题创建一个新的对象字典中的条目。这将破坏同步引擎的通用性，但如果需要，您可以通过一些额外的步骤来重新获得它。

```
else if ([value isKindOfClass:[NSArray class]]) {
    if ([[managedObject entity] name] isEqualToString:@"QuestionGroup") {
        NSSet *questions = [NSMutableSet set];
        for (NSDictionary *question in value) {
            // create your question object/record
            NSManagedObject *questionManagedObject = [NSEntityDescription insertNewObjectForEntityForName:@"Question" inManagedObjectContext:managedObjectContext];
            // setup your question object
            questionManagedObject.text = [question valueForKey:@"text"];
            // store all the created question objects in a set
            [questions addObject:questionManagedObject];
        }
        // assign the set of questions to the relationship on QuestionGroup
        [managedObject setValue:questions forKey:@"questions"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:13:08.553

我过去使用过 restkit 来处理这个问题。我觉得我正在做的事情非常繁重，但是现在我正在从事另一个需要解决相同问题的项目，我找不到任何可以更好地工作的东西。我想是时候再次清理restkit了。

看看[http://restkit.org](http://restkit.org)

# javascript - 使用 Javascript 创建内联样式表

> ID：12223215
> 
> 赞同：0
> 
> 时间：2012-08-31T22:30:13.063
> 
> 标签：javascript, html, css

嗨。我正在尝试在页面的开头创建一个内联样式表，该样式表对我从 url 获取的内容做出反应。我这样做是为了让我突出显示的页面的导航按钮。有点像这里 www.myeg.net ，但他们有一个静态站点，而且更容易。

```
<script type="text/javascript">
function parseUrl( url ) {
    var a = document.createElement('a');
    a.href = url;
    return a;
}

var page=parseUrl('').search

function getSecondPart(str) {
    return str.split('=')[1];
}

var site=getSecondPart(page);

var style = document.createElement("style");
style.innerHTML = ".nav_" + page + " { background-image:url('images/gradients/transparent_gradient.png');}";
document.body.appendChild(style);

}
</script>
</head>
<body>
<center><div><img width="960px" height="187.5" src="images/fullbanner.png"></div></center>
<div id="wrapper">
<div id="navbar">
<ul>
<li class="nav_index"><a href="index.php">Home</a></li>
<li class="nav_archive"><a href="index.php?site=news&action=archive">News</a></li>
<li class="nav_squads"><a href="index.php?site=squads">Roster</a></li>
<li class="nav_forum"><a href="index.php?site=forum">Forums</a></li>
<li class="nav_about"><a href="index.php?site=about">Contact</a></li>
</ul> 
```

我对 javascript 很陌生，所以抱歉 ;;;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:16:29.237

尝试这个：

```
<style type="text/css">
#banner{text-align:center;}
#banner>img{width:960px;height:187.5px;}
#nav>.selected{background-image:url('images/gradients/transparent_gradient.png');}
</style>
</head>
<body>
<div id="banner"><img src="images/fullbanner.png"></div>
<div id="wrapper">
<div id="navbar">
<ul id="nav">
<li id="nav_index"><a href="index.php">Home</a></li>
<li id="nav_archive"><a href="index.php?site=news&action=archive">News</a></li>
<li id="nav_squads"><a href="index.php?site=squads">Roster</a></li>
<li id="nav_forum"><a href="index.php?site=forum">Forums</a></li>
<li id="nav_about"><a href="index.php?site=about">Contact</a></li>
</ul> 
<script type="text/javascript">
document.getElementById('nav_'+window.location.href.split('=')[1]).className='selected';
</script> 
```

你不应该使用`<center>`它，它已被弃用！

您应该匹配一个类，然后只使用 javascript 将该类添加到您的元素中，而不是使用 javascript 编写样式表来匹配元素。

而且我不太了解您的代码：

```
function parseUrl( url ) {
    var a = document.createElement('a');
    a.href = url;
    return a;
}

var page=parseUrl('').search 
```

它给`""`了我，但我从来没有`.search`在锚上见过......如果你想获取当前的 URL，你可以做`window.location.href`.

还有一点：如果您使用`var`外部函数（在全局范围内），您正在创建一个全局变量，该变量不会被删除并使用内存。然后，您可以在不想再使用它时将其删除（`var a="dagjhdjgailghkagh";/*code*/;a=null;`），或者使用包含您的代码的自执行函数（闭包）。

**编辑：**

抱歉，`#nav>selected`我的意思不是`#nav>.selected`.

你可以在这里看到一个演示：http: [//jsfiddle.net/VhWHp/](http://jsfiddle.net/VhWHp/)

（但网址没有`=`，所以我手动将其替换为“存档”。在您的网站中，删除该行）

是的，它先加载 CSS，然后再加载导航。但这就是 CSS 和 javascript 的真正威力：如果在加载后将类设置为元素，则该元素将具有应用于该类的样式。

**编辑2：**

问题是，如果你这样做`split('=')[1]`，结果将类似于`"news&action"`而不是`"news"`.

然后，你可以使用我前段时间写的一个函数：

```
function sQuery(arg) {
  if(window.location.search){
    var que = window.location.search.substring(1);
    if(arg=='string'){return que;}
    que = que.split("&");
    if(!arg||arg=='array'){return que;}
    for(var i=0;i<que.length;i++){
      var qvar = que[i].split("=");
      if(qvar[0]==arg){
        return qvar[1];
      }
    }
  }
  return false;
} 
```

然后，像这样调用函数：`sQuery('site')`

```
document.getElementById('nav_'+(sQuery('site')||'index')).className='selected'; 
```

你也可以打电话`sQuery('array')`或只是`sQuery()`如果你想得到`["site=news","action=archive"]`，`sQuery('string')`如果你愿意`"site=news&action=archive"`。如果你不使用它，你可以简化函数：

```
function sQuery(arg) {
  if(window.location.search){
    var que = window.location.search.substring(1).split("&");
    for(var i=0;i<que.length;i++){
      var qvar = que[i].split("=");
      if(qvar[0]==arg){
        return qvar[1];
      }
    }
  }
  return false;
} 
```

# asp.net-mvc-3 - MemberShip.GetUser(model.Username) 在托管的 MVC3 站点中引发异常

> ID：12223216
> 
> 赞同：0
> 
> 时间：2012-08-31T22:30:16.863
> 
> 标签：asp.net-mvc-3, exception, stored-procedures, membership-provider

所以我在 MVC3 中构建了这个网站，我在其中使用默认的 ASP.NET 成员资格提供程序来提供用户、登录名、角色等。

终于到了在线托管解决方案的时候了，这给我带来了一些问题。

我已经通过一个运行良好的 sql 脚本文件将我的 SQL 2008 Express 数据库迁移到托管数据库（有一些错误，但解决了它）。我可以很好地渲染页面，并且可以很好地从数据库中加载数据。

问题是当我尝试使用现有用户登录或尝试创建新用户时。基本上任何使用成员资格提供程序存储过程的东西都会引发异常。

这是来自 AccountController 中的标准 Logon 函数抛出的尝试登录。

有什么建议这些存储过程是怎么突然出现的？

如果我尝试使用现有用户作为参数直接从数据库运行 SP，则效果很好。它只是在网站的上下文中不起作用。

AccountController 方法中失败的代码行：

```
MembershipUser user = Membership.GetUser(model.UserName);

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5009598
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Web.DataAccess.SqlConnectionHolder.Open(HttpContext context, Boolean revertImpersonate) +95
   System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation) +206
   **System.Web.Security.SqlMembershipProvider.GetUser(String username, Boolean userIsOnline) +1169
   System.Web.Security.Membership.GetUser(String username, Boolean userIsOnline) +63
   System.Web.Security.Membership.GetUser(String username) +6
   Venatores.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in C:\Users\dktvo\Desktop\Private TVO\Ørsø v1\Venatores\Venatores\Controllers\AccountController.cs:32
   lambda_method(Closure , ControllerBase , Object[] ) +157
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17**
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8841105
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:45:12.223

检查您的连接字符串，它可能不正确，如果正确，则数据库（SQL Server）可能没有运行或其他

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）]

# javascript - 在从服务器接收数据之前，如何防止方法触发？

> ID：12223217
> 
> 赞同：1
> 
> 时间：2012-08-31T22:30:16.740
> 
> 标签：javascript, html, backbone.js

所以我使用backbonejs根据我从谷歌数据存储接收到的数据生成一个html页面。我遇到的问题是试图在接收到数据之前阻止我的渲染方法返回。

一个小问题：是否可以打开传入 html 的 window.open() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:43:07.083

**在您的收藏中：**

```
var c = Backbone.Collection.extend({
    url: '/path/to/api',

    initialize: function() {
        this.deferred = this.fetch();
    }
}); 
```

**在您看来：**

```
var v = Backbone.View.extend({
    render: function() {
        c.deferred.done(function() {
            /* Render your View here */
        });
    }
}); 
```

由于`collection.fetch()`返回了 jqXHR，这成为可能。更多解释[在这里](http://quickleft.com/blog/leveraging-deferreds-in-backbonejs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:37:46.083

您可以通过 window.open() 打开窗口，然后在该窗口中调用预定义的函数并传递数据（或 HTML ) 到那个功能，让它完成你的工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:51:03.587

为什么要打呢？在谷歌数据将去的区域用微调器加载你的页面。当谷歌数据最终返回时，用该数据更新主干并再次渲染；这次使用数据而不是微调器。

如果您真的想与之抗争，您可以使 jQuery ajax 调用与该`async`选项同步运行。添加`async: false`到您传递给 ajax 调用的选项。

[jQuery.ajax() 文档](http://api.jquery.com/jQuery.ajax/)

# ios - 给定两个点的贝塞尔路径曲线动画的iOS计算控制点

> ID：12223220
> 
> 赞同：1
> 
> 时间：2012-08-31T22:30:35.607
> 
> 标签：ios, animation, core-animation, uiviewanimation, uiviewanimation-curve

我正在尝试使用 CGPathAddCurveToPoint 为视图的移动设置动画并生成贝塞尔路径，但我无法确定起点和终点之间的控制点。你们中的任何人都知道如何在给定 UIView 的来源和目的地的情况下动态计算控制点？

例如（iPad），我正在尝试制作一只鸟（UIView）从点（455,482）飞到（31,100）的动画。我想成为鸟儿飞行的曲线运动而不是直线运动。我会非常感谢你的帮助。

感谢您的回答，但仍然想知道如何计算控制点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:06:04.697

你能澄清一下你正在寻找的效果吗？控制点的选择不仅是起点和终点坐标的函数，也是您要达到的效果的函数。过去，在我想要“拾取和放下”视图的错觉的图像视图的运动动画中，我在同一方向上的控制点上做了轻微的垂直偏移，这会产生比纯粹的线性运动，但这完全取决于您要做什么。我还通过动画放大然后同时恢复到正常的变换比例来做到这一点，以进一步丰富拾取和放下动画视图的错觉。

在您修改后的答案中，您说您想展示一只鸟的飞行。现在，这是一个有趣的问题。是从侧面看到鸟的视图，例如从一个分支起飞到另一个分支，在这种情况下，您的控制点可能都会指向一点点，以显示鸟的起飞和降落。或者，如果您尝试模拟扑动运动，您可能还具有临时向上控制点，每个扑动一个。或者它是从下方或上方看鸟，在这种情况下，轻微的“s”形飞行模式可能就足够了，所以你只需要一个与起飞位置成 45 度角的控制器，指向沿飞行路径，并且终点的另一个控制点，指向起点向后 45 度，但指向另一个方向。这一切都取决于你的效果

您可能需要显示场景的屏幕快照和鸟的图像（是从侧面，还是从上方或下方）。您可能还想绘制一个您正在设想的飞行模式的示例，也许我们可以提出其他更具体的建议。

*其他资源：*

顺便说一句，有一些有趣的动画演示可能会有所帮助。[例如， Mike Nachbaur](http://nachbaur.com/blog/core-animation-part-4)的这个赛车动画在我制作第一个动画时很有帮助，向我展示了如何绘制贝塞尔路径，如何沿着路径旋转图像等等。我知道这不是鸟的飞行，而是它仍然是说明性的。我相信网上也有其他很好的例子。无论如何，这些类型的教程可能会帮助您弥合您对应用程序的愿景与贝塞尔路径的外观之间的差距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T12:35:19.120

```
//Draw points
UIBezierPath *aPath = [UIBezierPath bezierPath];
[aPath setLineWidth: LINE_SIZE];
for (int i=0; i<[results count]; i++) {
    CGPoint endPt = [[results objectAtIndex: i] CGPointValue];
    if (i == 0) {
        [aPath moveToPoint:endPt];
    } else {
        //Previous (start) point
        CGPoint startPt =[[results objectAtIndex: i-1] CGPointValue];

        //Default control points
        CGPoint cPt1, cPt2;
        if(ABS(startPt.x - endPt.x) > ABS(startPt.y - endPt.y)) {
            cPt1 = (CGPoint){(startPt.x + endPt.x) / 2, startPt.y};
            cPt2 = (CGPoint){cPt1.x, endPt.y};
        } else {
            cPt1 = (CGPoint){startPt.x, (startPt.y + endPt.y) / 2};
            cPt2 = (CGPoint){endPt.x, cPt1.y};
        }

        //Add curve to end point
        [aPath addCurveToPoint: endPt controlPoint1: cPt1 controlPoint2: cPt2];
    }
}
[aPath stroke]; 
```

# jquery - 使用 jQuery 获取动态 id 名称

> ID：12223222
> 
> 赞同：1
> 
> 时间：2012-08-31T22:30:56.793
> 
> 标签：jquery

在这个 jQuery 脚本中，我想`$("#rowDate1")`动态获取 id：

```
<script>
    $(function() {
       $("#rowDate1").click(function() {
           var thetext = $(this).html();
           $(this).html('<input type="text" name="edittext" id="edittext" value="'+thetext+'" />');
       });
    });
</script> 
```

我正在制作一个内联可编辑表格，我只想允许用户点击`<td>`带有 id 的 's。我怎样才能做到这一点，只允许`<td>`id 是可点击的？

编辑 - 添加了 HTML：

```
<td id="rowDate1">09/10/12 - 09/14/12</td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T22:39:24.777

您可以使用`attribute starts with`选择器：

```
$("td[id^=rowDate]").click(function() {
   // ...     
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T22:35:58.637

您不能有两个名称相同的 ID，因此您可能需要使用类。你可以做

```
$('#rowData').click(function() {
if($(this).attr("id") === "edittext"){
Do something } 
```

或者只为课程编写。

```
$('.edittext').click(function(){
do soemthing } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T22:36:59.333

您可以使用

```
 $("td[id]").click(function(){
    //Do something;
  }); 
```

这只会被 td 与 id 调用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T22:41:10.827

我会为每个可编辑分配`td`一个类，然后为每个可编辑分配一个点击事件，而不是按 id 遍历您的项目：

HTML：

```
<table>
    <tr>
        <td class="clickable">1</td>
        <td class="clickable">2</td>
        <td class="clickable">3</td>
        <td class="clickable">4</td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS：

```
$('.clickable').click(function(){
    $('.clickable').removeClass('active');
    $(this).addClass('active');
}); 
```

[**演示**](http://jsfiddle.net/mzaZ7/3/) ​</p>

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T22:40:15.053

您可以使用 jQuery 在选择器字符串中使用 [id] 来仅选择具有 id 的元素。

我已经为您创建了一个[jsFiddle](http://jsfiddle.net/wigster/9S8qj/)作为示例。

所以你的代码应该是这样的：

```
<script>
$(function() {
   $("td[id]").click(function() {
       var thetext = $(this).html();
       $(this).html('<input type="text" name="edittext" id="edittext" value="'+thetext+'" />');
   });
});
</script> 
```

# ruby - 如何在使用 watir-webdriver 进行测试期间列出所有 url

> ID：12223233
> 
> 赞同：1
> 
> 时间：2012-08-31T22:32:20.010
> 
> 标签：ruby, watir-webdriver

我正在编写很多测试（黄瓜 + watir-webdriver + pageobject），它们需要很长时间才能运行。

我想知道在测试期间是否可以知道浏览器中显示的所有页面的列表？事实上，我想验证每个测试是否都经过优化，而不是通过无用的页面。我可以观看所有测试来做到这一点，但我认为只阅读 url 列表会更有效率。

有人已经做过类似的东西了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:33:02.057

你不能在你的页面对象中添加一个日志语句吗？我在想类似的事情：

```
require 'time'
require 'logger'

module TestHelper
  pagelog = Logger.new('log.txt')

  class LoginPage

      def initialize()
        pagelog.debug "LoginPage: #{Time.now}"
      end

      ...
    end
end 
```

或者可能更新 PageObjects，以便它会自动为所有 PageObject 类执行此操作。

# xml - xmlnodelist 到下拉列表

> ID：12223238
> 
> 赞同：0
> 
> 时间：2012-08-31T22:33:15.147
> 
> 标签：xml, html-select

我正在尝试生成一个列表（字符串）以用作下拉列表的数据源。我已经这样做了很多次，但是这个版本并没有像往常那样将这些项目分开。

这是一个xml示例

```
<fueltypes>
<fuel>
  <type>Marine Diesel NY Harbor</type>
  <dbheader>NYMarineDiesel</dbheader>
</fuel>
<fuel>
  <type>ULSD NY Harbor</type>
  <dbheader>NYULSD</dbheader>
</fuel>
</fueltypes> 
```

这是功能

```
Public Shared Function GetFuelTypes(ddlControl As Control) As List(Of String)
    Dim doc As New XmlDocument()

    'Load XML from the file into XmlDocument object
    doc.Load("H:\OtherDataFiles\dataXML.xml") 'this needs to be changed to the server path
    Dim root As XmlNode = doc.DocumentElement

    'Select all nodes with the tag paramter indicated by the nodestring variable
    Dim nodeList As XmlNodeList = root.SelectNodes("fueltypes")
    Return (From node As XmlNode In nodeList Select node.InnerText).ToList()
End Function 
```

他们被绑定到下拉列表，如下所示

```
 'load the fuel types into the dropdownlist
    ddlFuelTypes.DataSource = GetFuelTypes()
    ddlFuelTypes.DataBind()
    ddlFuelTypes.SelectedIndex = 1 
```

下拉菜单在一行中显示所有项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:19:32.450

您需要完全限定`nodeList`，以便获得包含所需文本的子元素，例如

```
Dim nodeList As XmlNodeList = root.SelectNodes("/fueltypes/fuel/type") 
```

或者，您需要遍历`nodeList`并阅读您需要的元素，例如

```
Dim nodeList As XmlNodeList = root.SelectNodes("/fueltypes/fuel")

For Each fuelNode In nodeList
    Dim fuelType = fuelNode.ChildNodes.Item(0).InnerText 
```

# python - RuntimeError：无法在 2 秒内关闭实时测试服务器。服务器可能被卡住或产生缓慢的响应。- 姜戈

> ID：12223239
> 
> 赞同：1
> 
> 时间：2012-08-31T22:33:26.130
> 
> 标签：python, django, selenium

我收到 Django 的这个错误

```
RuntimeError: Failed to shutdown the live test server in 2 seconds. The server might be stuck or generating a slow response. 
```

我正在尝试在我网站上的菜单上运行一个简单的测试。菜单采用手风琴风格（向下滚动到概览菜单下的示例。手风琴是演示中的东西，菜单根据您单击它们的方式出现和消失：http: [//docs.jquery.com/UI/手风琴#overview](http://docs.jquery.com/UI/Accordion#overview) )

当其中一个菜单打开时，会出现一个用于搜索的文本框。我要做的是按下该按钮，然后输入一些值并单击“Enter”以查看搜索结果。

**代码**

```
from django.test import LiveServerTestCase
from selenium.webdriver.firefox.webdriver import WebDriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
import time

class SeleniumTests(LiveServerTestCase):
    fixtures = ['testData.json',]

    @classmethod
    def setUpClass(cls):
        cls.driver = WebDriver()
        super(SeleniumTests, cls).setUpClass()

    @classmethod
    def tearDownClass(cls):
        super(SeleniumTests, cls).tearDownClass()
        cls.driver.quit()

    def test_example(self):

        #load the site 
        self.driver.get('%s%s' % (self.live_server_url, '/testingDB/'))
        #find the accordion button
        elem1 = self.driver.find_element_by_id("search_button")
        #click it
        elem1.click()

        #wait a little bit so the accordion loads 
        self.driver.implicitly_wait(5)
        #could've also used this command ->time.sleep(1)

        #find the element that now appeared
        elem = self.driver.find_element_by_name("q")
        #enter the search query and press enter 
        elem.send_keys("selenium" + Keys.RETURN)
        #assert that a new page loaded, with Search in the title
        assert "Search" in self.driver.title 
```

测试效果很好，但 Django 给了我错误。如果我将时间缩短太多，那么 selenium 将无法找到搜索框，它声称

```
Element is not currently visible and so may not be interacted with 
```

我不知道如何避免实时测试服务器错误。（从[https://docs.djangoproject.com/en/dev/topics/testing/#django.test.LiveServerTestCase](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.LiveServerTestCase)获得的 Django 信息）

**附加信息**

这是菜单：

*第1部分*

![在此处输入图像描述](../Images/580d621915a9db025c4a53629430f437.png)

然后单击“搜索”，大约 0.5 秒后出现以下内容。

*第2部分* ![在此处输入图像描述](../Images/7facec13489cd00554f2f3416fb495ec.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T22:38:46.367

您看到的错误与`SeleniumTests.tearDownClass(cls)`. 在该方法中，如果您在调用`cls.driver.quit()`之前调用`super(SeleniumTests, cls).tearDownClass()`，错误将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:38:00.700

我知道我的解决方案不是正确的方法，但这最终对我有用：

首先，按照 diliop 的建议，我翻转了拆卸类中的方法调用：

```
@classmethod
def tearDownClass(cls):
    super(SeleniumTests, cls).tearDownClass()
    cls.driver.quit() 
```

但是，这产生了另一个错误：`[Errno 10054] An existing connection was forcibly closed by the remote host`. 一切正常，网站关闭，所有测试都通过了，但最后出现了这个错误。

我注意到，如果我转到另一个页面并尝试从该页面（而不是初始主页）关闭我的网站，错误就会消失。所以我在tearDown中加入了以下内容：

```
def tearDown(self):
    #go to main page
    self.driver.get('%s%s' % (self.live_server_url, '/testingDB/'))
    #find the first button
    elemOptionSet = self.driver.find_element_by_id("optionSetPage")
    #click it
    elemOptionSet.click() 
```

之后，当 selenium 尝试关闭网站时，没有错误。如果有人可以解释这种行为，那就太好了！但在那之前，这将是可行的。

# mysql - mysql，如何批量执行许多查询并知道哪些正在返回行

> ID：12223245
> 
> 赞同：2
> 
> 时间：2012-08-31T22:33:45.477
> 
> 标签：mysql

我有一个包含 800 个查询的脚本。他们中的大多数人一无所获。

如何修改此脚本以了解哪些仅返回行

```
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_notification_template` WHERE `name` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_notification_template` WHERE `push_title` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_notification_template` WHERE `message_title` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_queue` WHERE `push_title` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_queue` WHERE `message_title` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`xmlconnect_queue` WHERE `type` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`zizio_groupsale` WHERE `zizio_object_id` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`zizio_groupsale` WHERE `name` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`zizio_groupsale` WHERE `recurrence_child` LIKE '%1720%';
SELECT * FROM `theprint_depotlive-v16`.`zizio_groupsale` WHERE `recurrence_ancestor` LIKE '%1720%'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:50:19.367

一种方法是包含一个“查询标识符”作为结果集输出的第一列，例如一个序列号作为“键”。

```
SELECT 1 as q, t.* FROM foo t WHERE ... ;
SELECT 2 AS q, t.* FROM foo2 t WHERE ... ; 
```

（有关如何在每个生成的语句中包含此唯一值的示例，请参阅我对您上一个问题的回答的更新。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:41:15.713

你可以做这样的事情，这将只返回具有行的查询：

```
SELECT
  '`theprint_depotlive-v16`.`xmlconnect_notification_template`' as table,
  '`name` LIKE \'%1720%\'' as condition,
  count(*) as count
FROM `theprint_depotlive-v16`.`xmlconnect_notification_template`
WHERE `name` LIKE '%1720%'

UNION

SELECT
  '`theprint_depotlive-v16`.`xmlconnect_notification_template`' as table,
  '`push_title` LIKE \'%1720%\'' as condition,
  count(*) as count
FROM `theprint_depotlive-v16`.`xmlconnect_notification_template`
WHERE `push_title` LIKE '%1720%'

UNION

...

WHERE count > 0; 
```

如果您的查询列表位于表中或 mysql 可以读取的内容中，您可能会使用动态 SQL 以编程方式生成上述查询。

# gwt - GWT 单元回调

> ID：12223250
> 
> 赞同：1
> 
> 时间：2012-08-31T22:34:47.413
> 
> 标签：gwt, asynchronous, cell

我正在为 GWT 编写一个自定义单元格，但要显示的数据将被异步获取（REST 调用）。如何使单元格的渲染异步？

我看到 ImageLoadingCell 显示一个微调器，然后在加载图像时显示图像，这是由浏览器事件完成的，但是，由于我的是 REST 调用，我不能使用 onBrowserEvent() 方法，因此，我不t 有元素的句柄，以刷新其信息。

我在想也许我必须通过 table.refresh() 来做到这一点？但是，我真的很喜欢 render 方法来触发获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:58:17.977

如果您查看单元格小部件的目标，那么我认为这是不可能的，而且绝对不可取：

> Cell 小部件（数据展示小部件）是由 Cells 组成的用于显示数据的高性能、轻量级的小部件。

我遇到了类似的问题：假设您有一个带有标签列表的联系人，但只有 tagIds 与联系人一起存储。要可视化表中的标签，您必须回调服务器以获取名称。

解决方案是使用适配器模式。创建一个包含联系人和实际标签而不是 tagIds 的 ContactAdapter。使用基于 tagIds 的标签预填充联系人适配器，并将列表设置为单元格表的数据源。

# javascript - jquery 网格未填充 JSON 数据

> ID：12223255
> 
> 赞同：1
> 
> 时间：2012-08-31T22:35:07.977
> 
> 标签：javascript, jquery, json, jquery-ui

嗨，我无法从加载到网格的 JSON 中获取数据，

这是我的网格代码，它为用户显示股票的股价：

```
 $(document).ready(function () { 
        //  $("#jQGrid").html("<table id=\"list\"></table><div id=\"page\"></div>");
            jQuery("#jqTable").jqGrid({
                url:jqDataUrl,
                datatype: "json",
                mtype: "POST", 
                height: 250,
             // Specify the column names
                colNames: ["SYMBOL", "LAST", "CHANGE", "%CHANGE","HIGH/LOW"],

                // Configure the columns
                colModel: [
                { name: "SYMBOL", index: "SYMBOL", width: 200, align: "left" },
                { name: "LAST", index: "LAST", width: 200, align: "left" },
                { name: "CHANGE", index: "CHANGE", width: 200, align: "left" },
                { name: "%CHANGE", index: "%CHANGE", width: 200, align: "left"},
                { name: "HIGH/LOW", index: "HIGH/LOW", width: 200, align: "left"}
                ],
                jsonReader : {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    cell: "cell", 
                    id: "id",
                },
                multiselect: false,
               // paging: true,
              //  rowNum:10,
              //  rowList:[10,20,30],
                pager: $("#jqTablePager"),
                loadonce:true,
                caption: "WatchList"
            }).navGrid('#jqTablePager',{edit:false,add:true,del:true});
        } 
```

});

但是当我尝试运行代码时，我无法将内容放到表格中（但网格加载时没有内容）

我的 json 格式如下：

```
{
total: "1",
 page: "1",
 records: "2",
rows : 
[
{id:"1", cell:["cell11", "cell12", "cell13","cell13","cell13"]},
{id:"2", cell:["cell21", "cell22", "cell23","cell13","cell13"]}
]
} 
```

请帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:45:00.543

**更新**：

我发现如果您不将`repeatitems:true`选项放入 json 阅读器，jqGrid 会假定您使用的是 json 点表示法。当您将其放入 jsonReader 时，您的数据已正确加载。这是工作示例：http: [//jsfiddle.net/a5e5F/3/](http://jsfiddle.net/a5e5F/3/)

* * *

*旧版本*：

我用你的jqgrid代码玩了很多，看来这个版本的jqGrid有一个bug，导致你的jsonReader不能工作。它直接读取数据，忽略根元素并假设您的数据是格式为 json 对象的数组

```
{propertyName1:'PropertyValue1', propertyName2:'PropertyValue2', ...} 
```

[您可以在http://jsfiddle.net/a5e5F/2/](http://jsfiddle.net/a5e5F/2/)上看到我的意思

如果您替换`data:rows`为`data:data`（您的数据格式），则不会加载数据。也许您应该尝试更改您的 json 数据以使用真正的 json 格式（属性命名为列）？

我一直在尝试大量的东西，更改列名以检查@Barmar 评论中的问题，我也认为这是原因。

# architecture - 由于奇怪的模块循环，交叉编译的内核无法启动

> ID：12223258
> 
> 赞同：1
> 
> 时间：2012-08-31T22:35:24.973
> 
> 标签：architecture, linux-kernel, cross-compiling

我正在尝试为带有 vortexX86DX 处理器的嵌入式板准备优化的工具链/操作系统。

我的电脑的架构是 x86_64。所以我开始使用cross-NG编译一个交叉编译器。然后使用该编译器编译带有 Xenomai（用于 rt 内核模块）修补的 linux 2.6.38.8。该内核计划替换当前内核。目前在板上安装了 debian 6.0.4 i386 的默认内核。

编译的内核无法启动并出现以下错误：

```
request_module: runaway loop modprobe binfmt-464c 
```

我无法理解新内核有什么问题。仅在尝试加载用于加载不兼容精灵的模块时才会发生上述错误。虽然这里没有不兼容...使用 i586 优化编译的内核（包含 x86 通用代码和 elf 仿真器）应该能够加载`init`i386 架构...

如果这很重要，编译内核的体系结构是：

```
file ./vmlinux.o 
./vmlinux.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:54:51.463

为您搜索：[request_module: runaway loop modprobe binfmt-464c](http://saalwaechter-notes.blogspot.com/2008/10/requestmodule-runaway-loop-modprobe.html)
它尝试加载 binfmt-464c，但 modprobe 本身是 ELF，因此要运行 modprobe，它首先需要 binfmt-464c。可能的解决方案是将模块包含在内核构建中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-07T13:52:29.027

不知何故，您的交叉编译工具链在某处生成了不同于 i386 预期的其他架构二进制文件。您不仅应该检查内核，还应该检查内核正在调用的“init”、“shell”和其他命令，因为其中一个不是 i386，并且您的内核会尝试加载一个模块来模拟和运行它。

# wpf - 需要使用 RowDetailsTemplate--mvvm 在数据网格中选择或突出显示相似的行

> ID：12223259
> 
> 赞同：1
> 
> 时间：2012-08-31T22:35:39.517
> 
> 标签：wpf, mvvm, datagrid, rowdetailstemplate

我有具有行详细信息的数据网格。我的行可以重复。我想选择所有相似的行。我怎样才能做到这一点。我正在使用 mvvm 模式。我将 selectedItem 绑定到我的视图模型中的相同属性，但它不起作用。

这是 xaml 代码：

```
 <DataGrid Margin="0,6,0,12" 
          BorderBrush="Silver" 
          SelectionMode="Single" 
          HeadersVisibility="Column"
          AutoGenerateColumns="False" 
          CanUserAddRows="False" 
          CanUserDeleteRows="False" 
          CanUserSortColumns="False" 
          CanUserReorderColumns="False" 
          VerticalGridLinesBrush="Silver"
          HorizontalGridLinesBrush="Silver" 
          VerticalScrollBarVisibility="Visible" 
          HorizontalScrollBarVisibility="Auto" 
          RowDetailsVisibilityMode="Visible" 
          IsSynchronizedWithCurrentItem="{x:Null}"
          ItemsSource="{Binding AccessoryWalls}" 
          Grid.Row="1"
          Grid.Column="0" 
          Name="gAccessories">

    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding ID,StringFormat='W{0}'}" FontWeight="Bold" Foreground="Blue" />
    </DataGrid.Columns>

    <DataGrid.RowDetailsTemplate >
        <DataTemplate>
            <Grid >
                <DataGrid ItemsSource="{Binding Accessories}"
                          SelectedItem="{Binding Path=DataContext.SelectedAccessory, RelativeSource={RelativeSource AncestorType={x:Type UserControl}},Mode=TwoWay}"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          AutoGenerateColumns="False">

                    <DataGrid.Columns>
                        <DataGridTextColumn  Header="Horizontal"
                                             Width="60"
                                             Binding="{Binding Horizontal, Converter={StaticResource DimensionConverter}}" />
                        <DataGridTextColumn  Header="Vertical"
                                             Width="60"
                                             Binding="{Binding Vertical, Converter={StaticResource DimensionConverter}}" />
                        <DataGridTextColumn  Header="Detail"
                                             IsReadOnly="True"
                                             Binding="{Binding LongName}" />

                    </DataGrid.Columns>
                    <DataGrid.RowDetailsTemplate>
                        <DataTemplate />
                    </DataGrid.RowDetailsTemplate>
                </DataGrid>
            </Grid>
        </DataTemplate>
    </DataGrid.RowDetailsTemplate>
</DataGrid> 
```

如您所见，我将它绑定到 VM 级别的“SelectedAccessory”并且它可以工作。它与屏幕中的其他控件同步，但不与数据网格中的其他行同步。当我单击其中一个时，我想选择所有“Overhead Door Opening12”行。

提前致谢。

![在此处输入图像描述](../Images/b66f6114bdee80ef7a423b1ce38ebf7d.png)

# javascript - 为什么 Array.prototype 返回一个空数组？

> ID：12223264
> 
> 赞同：5
> 
> 时间：2012-08-31T22:35:57.333
> 
> 标签：javascript, arrays, prototype

这可能是一个愚蠢的问题，但是为什么我控制台输出时会得到一个空数组`Array.prototype`？

我期待推送和弹出方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:45:01.467

原型的大多数内置方法都不是可枚举的，所以如果你使用它们就不会显示出来`for..in`（你不应该在数组上，但这只是一个例子）。由于它们不可枚举，因此如果您“安慰它们”，它们将不会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:37:08.993

“注意：Array.prototype 不是指单个数组，而是指 Array() 对象本身。” - [http://www.w3schools.com/jsref/jsref_prototype_array.asp](http://www.w3schools.com/jsref/jsref_prototype_array.asp)

# jquery - 每个选项 3 个选项的多项选择 - 或其他解决方案？

> ID：12223270
> 
> 赞同：0
> 
> 时间：2012-08-31T22:36:30.310
> 
> 标签：jquery, multiple-select, asmselect

[asmselect](http://code.google.com/p/jquery-asmselect/)非常适合具有 2 个选项（选中或未选中）的多个选择框。它做了它应该做的，而且很好——当然它需要一点样式帮助。

但是，如果您需要为每个选择选项提供多个选项，会发生什么情况？例如，假设我有一个包含两列复选框的表格：

```
Name     | Displayed | Required

John Doe | Checkbox  | Checkbox (clicking this also checks "displayed")
Jane Doe | Checkbox  | Checkbox (clicking this also checks "displayed")
etc... 
```

以另一种方式显示它，例如使用 asmselect 之类的东西是违反直觉的。有没有像这样的每个选项有 2 个或更多选择的不错的解决方案？

老实说，我正在想象使用[multiselec.js](http://loudev.com/)，但在那里添加第三个框......虽然我不知道从哪里开始！

# c++ - 移动 std::thread 时出现链接错误？

> ID：12223273
> 
> 赞同：1
> 
> 时间：2012-08-31T22:36:47.360
> 
> 标签：c++, multithreading, c++11, move

尝试编译一个非常简单的类建模 TCP 服务器时，我遇到了一个奇怪的链接器错误。我已将其缩小到我试图调用的一行代码`operator=(std::thread&&)`；我调用移动运算符，因为复制构造函数被标记为`=delete`.

这是我第一个使用 std::thread 和 C++11 的项目，所以也许我在做一些愚蠢的事情，有什么想法吗？

我列出了代码、编译器选项和编译器输出。

```
clang++ -g -Weverything -Wall -std=c++11 -stdlib=libc++ -Wno-c++98-compat -Wno-weak-vtables -I../ -I/usr/local/include Main.cpp -c -o Main.o
clang++ -g -Weverything -Wall -std=c++11 -stdlib=libc++ -Wno-c++98-compat -Wno-weak-vtables -I../ -I/usr/local/include deepthgt/AdminHandler.cpp -c -o deepthgt/AdminHandler.o

clang++ -stdlib=libc++ -L/usr/local/boost_1_50_0/stage/lib -L/usr/local/lib -lboost_program_options -lboost_thread -lboost_system -lglog Main.o deepthgt/AdminHandler.o  -o bets42
Undefined symbols for architecture x86_64:
  "std::__1::__any::__any(...)", referenced from:
      __ZNSt3__114__thread_proxyINS_5tupleIJMN6bets428deepthgt12AdminHandlerEFvvENS_17reference_wrapperIS4_EEEEEEEPvSA_ in AdminHandler.o
  "__ZNSt3__18__invokeIJNS_17reference_wrapperIN6bets428deepthgt12AdminHandlerEEEEEENS_5__natENS_5__anyEDpOT_", referenced from:
      __ZNSt3__114__thread_proxyINS_5tupleIJMN6bets428deepthgt12AdminHandlerEFvvENS_17reference_wrapperIS4_EEEEEEEPvSA_ in AdminHandler.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [bets42] Error 1

//---

    class AdminHandler : private boost::noncopyable
    {
         public:
            explicit AdminHandler(const unsigned short port);
            ~AdminHandler();

            void start();
            void stop();

        private:
            void handle();

        private:
            std::thread thread_;
            std::mutex  mutex_;
            bool        doHandle_;
            const unsigned short port_;
    };    

//----

AdminHandler::AdminHandler(const unsigned short port)
    : doHandle_(false),
      port_(port) {}

AdminHandler::~AdminHandler()
{
    stop();
}

void AdminHandler::start()
{
    std::lock_guard<std::mutex> lock(mutex_);
    if( ! thread_.joinable())
    {
        doHandle_ = true;
        thread_ = std::move(std::thread(&AdminHandler::handle, std::ref(*this))); //this code here is the problem
    } 
}

void AdminHandler::stop()
{
    std::lock_guard<std::mutex> lock(mutex_);
    if(thread_.joinable())
    {
        doHandle_ = false;
        thread_.join();
    }
}

void AdminHandler::handle()
{
    try
    {
        using boost::asio::ip::tcp;

        boost::asio::io_service service;
        tcp::acceptor acceptor(service, tcp::endpoint(tcp::v4(), port_));

        do
        {
            tcp::socket socket(service);
            acceptor.accept(socket);

            boost::system::error_code error;
            boost::asio::write(socket, boost::asio::buffer("hello world!"), error);
        } 
        while(doHandle_); 
    }
    catch(const std::exception& e)
    {
        boost::throw_exception(
                Exception(__FILE__, __LINE__) 
                << "Failed to start or continue to listen on admin port " << port_
                << "; exception: " << e.what()
        );
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:53:02.240

尝试：

```
thread_ = std::move(std::thread(&AdminHandler::handle, this)); 
```

正在研究这是否是 libc++ 错误...

# ios - dequeueReusableCellWithIdentifier 不起作用

> ID：12223274
> 
> 赞同：4
> 
> 时间：2012-08-31T22:36:49.427
> 
> 标签：ios, cocoa-touch, ipad

我想在 UITableview 中加载大约 6000 - 8000 行。我使用异步调用从服务器获取数据，当我获取数据时我调用

```
[tableView 重载数据]

```

这是为了刷新表格视图。但是由于某种原因，我的应用程序卡住并冻结了。当我调试时，我发现 cellforrowatindexpath 被调用了 6000 次（在主线程上）并且 dequeueReusableCellWithIdentifier 总是返回 null 。

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath{
       CDTableRowCell *cell = nil;

        // Create and Resue Custom ViewCell
        static NSString *CellIdentifier = @"CellIdentifier";
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // got into render/theme objec 
        if(cell == nil){
            cell = [[CDTableRowCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }

// MODIFYING CELL PROPERTIES HERE FROM AN ARRAY
// NO HTTP CALLS 

} 
```

此外，一旦我开始滚动，tableview 就会开始重用单元格，但在此之前我从不总是创建一个新单元格。任何线索为什么会出现这种奇怪的行为？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:26:56.497

您问题中的方法不是表格视图数据源方法。数据源方法将表视图作为参数。您编写的方法是一种可用于从 tableView 本身获取单元格的方法，而不是从数据源中获取新单元格的方法。

我不知道该方法被调用的频率，但覆盖它几乎肯定不是您想要做的。

我猜你已经将 uitableview 子类化为它自己的数据源？如果是这样，您需要在数据源方法中包含问题中的代码`tableView:cellForRowAtIndexPath:`，而不是像现在那样覆盖该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:20:54.513

试试这样

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier =@"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}

return cell;

} 
```

# android - 操作项的自定义下拉列表 (actionbarsherlock)

> ID：12223283
> 
> 赞同：2
> 
> 时间：2012-08-31T22:37:52.540
> 
> 标签：android, android-actionbar, actionbarsherlock

我需要一个附加到操作项的**自定义**下拉菜单。我设法为主页图标做同样的事情，但它似乎与其他操作项目完全不同。

我知道这个问题和答案：[How to add a Dropdown item on the action bar](https://stackoverflow.com/questions/8312344/how-to-add-a-dropdown-item-on-the-action-bar) 我的问题是我想完全自定义它（我使用自定义字体，还需要图标），所以我想子菜单是不够的。并将自定义附加`Spinner`为`actionLayout`看起来不像下拉菜单。

对于主页图标，它看起来像这样：

```
 actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ArrayList<NavItem> data = new ArrayList<NavItem>();
    data.add(...);
    data.add(...);
    ActionBarNavAdapter adapter = new ActionBarNavAdapter(...);
    actionBar.setListNavigationCallbacks(adapter, new OnNavigationListener() {...}); 
```

我可以在不牺牲“下拉”的情况下添加我自己的设计。 **如何处理其他操作项？**

**编辑：** 我知道使用的活动使用`NAVIGATION_MODE_LIST`( `Spinner`ListNavigationCallbacks 使用 a `SpinnerAdapter`)，但它看起来更好，我不知道从哪里获得所有这些样式（如果只是那样的话）让它看起来像那样。我是说：

**好**->`NAVIGATION_MODE_LIST`外观如何：它包含列表，它附加在主页图标下。 **不好**-> 自定义外观如何`Spinner`：`actionLayout`它将屏幕宽度与一些额外的深色背景相匹配，替换操作项图标（这很容易更改），最重要的是，使屏幕的其余部分变暗。它看起来很像带有自定义列表的 AlertDialog，而不是下拉菜单。

**代码：**

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem sortItem = menu.findItem(R.id.sort);
    Spinner spinner = new Spinner(this);

    //this is the same adapter because I didn't want to spend time creating a new one
    //ActionBarNavAdapter extends SpinnerAdapter of course
    ArrayList<NavItem> data = new ArrayList<NavItem>();
    data.add(...);
    data.add(...);
    ActionBarNavAdapter adapter = new ActionBarNavAdapter(...);
    spinner.setAdapter(adapter);
    sortItem.setActionView(spinner);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:13:29.277

尝试更换：

```
Spinner spinner = new Spinner(this); 
```

和：

```
Spinner spinner = new Spinner(getActionBar().getThemedContext()); 
```

这将使用`Context`主题来匹配操作栏，并且应该有所帮助。

# python - 在不使用任何外部库的情况下，在 python 中将 ISO8601 格式转换为秒

> ID：12223284
> 
> 赞同：2
> 
> 时间：2012-08-31T22:37:54.043
> 
> 标签：python, datetime, time, iso8601

我正在尝试仅使用标准库将 ISO8601 时间格式转换为 python 中的秒/unix/epoch 时间。

时间格式 = '2012-09-30T15:31:50.262-08:00'

基本上时间将是一个字符串，它会解析并将其转换回秒。

切片和挑选我们想要的值是可能的，但还有比这更好的方法吗？

```
import datetime, time
def convert_enddate_to_seconds(self, ts):
    """Takes ISO 8601 format(string) and converts into epoch time."""
     dt = datetime.datetime.strptime(ts[:-7],'%Y-%m-%dT%H:%M:%S.%f')+\
                datetime.timedelta(hours=int(ts[-5:-3]),
                minutes=int(ts[-2:]))*int(ts[-6:-5]+'1')
    seconds = time.mktime(dt.timetuple()) + dt.microsecond/1000000.0
    return seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:14:23.010

Celada回答后的最终正确答案。下面我验证了 xml.iso8601.parse 的输出也返回与函数生成的结果相同的结果。感谢 Celada 提供原始代码的问题。

```
>>> import calendar, datetime, time 
>>> def convert_enddate_to_seconds(ts):
...   """Takes ISO 8601 format(string) and converts into epoch time."""
...   dt = datetime.datetime.strptime(ts[:-7],'%Y-%m-%dT%H:%M:%S.%f')-\
...       datetime.timedelta(hours=int(ts[-5:-3]),
...       minutes=int(ts[-2:]))*int(ts[-6:-5]+'1')
...   seconds = calendar.timegm(dt.timetuple()) + dt.microsecond/1000000.0
...   return seconds
... 
>>> import iso8601
>>> ts = '2012-09-30T15:31:50.262-08:00'
>>> iso8601.parse(ts)
1349047910.0
>>> convert_enddate_to_seconds(ts)
1349047910.26
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T02:55:21.270

对于初学者，您的示例代码中至少有 4 个错误：

*   您的`strptime`格式需要小数点和秒后的数字，但您的示例输入没有。
*   该`ts[:-7]`位没有正确地切掉字符串的结尾。`ts[:-6]`看起来更正确：您想从字符串的末尾切出 6 个字符（2 个代表 tz 小时，2 个代表 tz 分钟，1 个代表 :，1 个代表 + 或 -）。
*   您正在添加应该减去它的时区偏移量。您必须从东半球时区给定的时间中减去小时和分钟才能返回 UTC，而不是添加它们。
*   您正在使用`time.mktime()`which 假定时间元组是在本地时间给出的，但它实际上是 UTC。你需要`calendar.timegm()`改用。

这是您的代码更新为但后三个问题。第一个问题仍然存在，因为我不知道您是否打算在输入字符串中强制出现小数秒。您可以进一步调整它。

```
import datetime, time, calendar

def convert_enddate_to_seconds(ts):
    """Takes ISO 8601 format(string) and converts into epoch time."""
    dt = datetime.datetime.strptime(ts[:-6],'%Y-%m-%dT%H:%M:%S.%f')-\
                datetime.timedelta(hours=int(ts[-5:-3]),
                minutes=int(ts[-2:]))*int(ts[-6:-5]+'1')
    seconds = calendar.timegm(dt.timetuple()) + dt.microsecond/1000000.0
    return seconds 
```

使用`2010-01-04T12:15:30.1+01:00`作为测试输入，我得到 1262603730.1 作为输出，这是正确的。

至于您的问题：不，如果您只将自己限制在标准库中，那么您不太可能比这更简洁。

# javascript - 根据一天中的时间加载不同的链接

> ID：12223286
> 
> 赞同：1
> 
> 时间：2012-08-31T22:38:12.057
> 
> 标签：javascript, function, datetime

我需要你的帮助。在到处搜索之后，我找不到我需要的正确答案。我正在尝试创建一个 javascript 函数来根据一天中的时间更改链接 href 值。（即，我希望将用户连接到我们的帮助台的链接在中部标准时间晚上 11:45 停用并在中部标准时间上午 7 点激活。）我在网上找到了一个旧功能，可以让它工作，但它有一个开始日期，我是 javascript 新手所以我不知道如何将其更改为仅使用一天中的时间的位置。因此，如果您可以查看代码并建议如何修改它以使其仅在当天工作，或者提供另一种替代方案，我将不胜感激！

```
<script type="text/javascript">
var startDay = 5; // Start Day: 0 - 6 (Sun = 0, Mon = 1 ... Fri = 5, Sat = 6)
var startHour = 16; // Start Hour: 0 - 23
var startMin = 8; // Start Min: 0 - 59
var endDay = 5; // End Day: 0 - 6 (Sun = 0, Mon = 1 ... Fri = 5, Sat = 6)
var endHour = 16; // End Hour: 0 - 23
var endMin = 10; // End Min: 0 - 59

function alternateLink(linkObj)
{
var startTimeDate = new Date(2012, 01, 01, startHour, startMin, 00);
with (startTimeDate) while (getDay() != startDay) setDate(getDate()+1);
var startTimeDateMsecs = startTimeDate.getTime();

var endTimeDate = new Date(2012, 01, 01, endHour, endMin-1, 00);
with (endTimeDate) while (getDate() < startTimeDate.getDate()) setDate(getDate()+1);
with (endTimeDate) while (getDay() != endDay) setDate(getDate()+1);
var endTimeDateMsecs = endTimeDate.getTime();

var now = new Date();
var currentTimeDate = new Date(2012, 01, 01, now.getHours(), now.getMinutes(), 00);
with (currentTimeDate) while (getDate()<startTimeDate.getDate()) setDate(getDate()+1); 
with (currentTimeDate) while (getDay() != now.getDay()) setDate(getDate()+1);
var currentTimeDateMsecs = currentTimeDate.getTime();

if (currentTimeDateMsecs >= startTimeDateMsecs && currentTimeDateMsecs <=endTimeDateMsecs) linkObj.href = 'contactus.php';} 
</script>    

<img src="default.png" alt="Time Image" id="image_id"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:36:36.623

使用`getDate`和`getMonth`功能`getFullYear`：

```
var now = new Date();
var month = now.getMonth()+1; //return range is 0-11, so add 1
var day = now.getDate();
var year = now.getFullYear();

var startTimeDate = new Date(year, month, day, startHour, startMin, 00);
...
var startTimeDateMsecs = startTimeDate.getTime();

var endTimeDate = new Date(year, month, day, endHour, endMin-1, 00);
...
var endTimeDateMsecs = endTimeDate.getTime();

var currentTimeDateMsecs = now.getTime();

if (currentTimeDateMsecs >= startTimeDateMsecs && currentTimeDateMsecs <=endTimeDateMsecs) 
    linkObj.href = 'contactus.php';
else
    linkObj.href = '#'; 
```

# google-apps-script - 在 Google 协作平台上上传文件 - 文件柜、列表页 - doPost 问题、意外错误

> ID：12223290
> 
> 赞同：2
> 
> 时间：2012-08-31T22:39:01.377
> 
> 标签：google-apps-script

我有这个脚本工作，但几周前它突然停止了 - 我以为我犯了一些编程错误，但我已经无法调试它好几个星期了。

我想要谷歌网站上的一个脚本，它允许某人上传文件（以及其他一些信息，比如它的名称），并让脚本将其附加到新的文件柜页面，然后使用新页面的信息更新列表页面。

我使用了旧论坛帖子中的部分代码，在需要的地方进行了更新。如果有人知道更简单的方法，我不反对重写。

谢谢！

编辑：问题似乎出在 doPost(e) 函数中 - 点击提交后，没有任何反应，小工具变为空白，我收到错误消息：“发生意外错误。”

```
function doGet(e){
  return getUi(e);
}

function getUi(e) {
  //create user interface for uploading information
  var app = UiApp.createApplication().setTitle('File Upload');

  var form = app.createFormPanel().setId('form').setEncoding('multipart/form-data');

  //create grid to store information
  var formContent = app.createGrid().resize(6,2);

  formContent.setText(0,0,'File Name: ');
  var fileName = app.createTextBox().setName('fileName').setId('fileName');
  formContent.setWidget(0,1,fileName);

  var fileUpload = app.createFileUpload().setName('fileUpload').setId('fileUpload');
  formContent.setWidget(1,1,fileUpload);

  formContent.setWidget(2,0,app.createLabel('Short Description: '));
  var fileDescription = app.createTextBox().setName('fileDescription').setId('fileDescription');
  formContent.setWidget(2,1,fileDescription);

  formContent.setText(3,0,'Level: ');
  var level = app.createListBox().setName('level').setId('level').addItem('Introductory').addItem('Intermediate').addItem('Advanced');
  formContent.setWidget(3,1,level);

  formContent.setText(4,0,'Subject: ');
  var subject = app.createListBox().setName('subject').setId('subject').addItem('Fundamentals').addItem('Observing').addItem('Solar System').addItem('Stars').addItem('Stellar Evolution').addItem('Milky Way').addItem('Galaxies').addItem('Cosmology')
  formContent.setWidget(4,1,subject);

  var submitButton = app.createSubmitButton("Submit").setId("submitButton");
  formContent.setWidget(5,1,submitButton);
  //var handler = app.createServerHandler("pauseUi");
  //submitButton.addClickHandler(handler);

  form.add(formContent);
  app.add(form);

  var resultTextArea = app.createTextArea().setName("resultArea").setId("resultArea");
  resultTextArea.setVisibleLines(5);
  resultTextArea.setSize("80%","80%");
  app.add(resultTextArea);
  var ogga = 'good god';
  Logger.log(ogga);
  return app; 
}

function pauseUi(e){
  var app = UiApp.getActiveApplication();
  app.getElementById("file").setEnabled(false);
  app.getElementById("fileName").setEnabled(false);
  app.getElementById("fileDescription").setEnabled(false);
  app.getElementById("submitButton").setEnabled(false);
  app.getElementById("level").setEnabled(false);
  app.getElementById("subject").setEnabled(false);
  app.getElementById("resultArea").setEnabled(false);
  app.getElementById("resultArea").setText('Please wait...'); 
  return app;
}

function resetUi(app){
  app.getElementById("file").setEnabled(true);
  app.getElementById("fileName").setEnabled(true);
  app.getElementById("fileDescription").setEnabled(true);
  app.getElementById("submitButton").setEnabled(true);
  app.getElementById("level").setEnabled(true);
  app.getElementById("subject").setEnabled(true);
  app.getElementById("resultArea").setEnabled(true);
}

function doPost(e){
  var app = UiApp.getActiveApplication();
  Logger.log(e.parameter);
  //create new page for uploaded file
  var msg = createNewPage(e.parameter.fileName,e.parameter.fileUpload,e.parameter.fileDescription,e.parameter.level,e.parameter.subject);  
  //reset upload page
  resetUi(app);
  //notify user of success or failure
  app.getElementById("resultArea").setText(msg.join('\n'));
  return app;
}

function createNewPage(fileName,uploadedFile,fileDescription,level,subject){
  //site information
  var mysite = SitesApp.getSite("uw.edu","introductory-astronomy-clearinghouse");
  var labsPage = mysite.getChildByName("labs-exercises");
  Logger.log('url for lab page is: '+labsPage.getUrl());
  var msg = [];
  //create new page
  var page = findPage(fileName);
  if (page == null){
    var page = labsPage.createFileCabinetPage(fileName, normalizeName(fileName), '');
  }

  try{
    //add file to file cabinet
    var attachment = page.addHostedAttachment(uploadedFile);
    //see if already listed on list
    var listItem = getFileListItem(fileName);
    if (listItem == null) {
      var fileUrl = page.getUrl();
      var newValues = [repairUrlValue(fileUrl, fileName), fileDescription, level, subject];
      labsPage.addListItem(newValues);
    }
    msg.push('Refresh page to see your item added or edit your file at: '+fileUrl);
  } catch(e){
    msg.push('Failed to upload the '+ fileName +' attachment, possibly due to size constraints or time out issues.');
  }
  return msg; 
}

function getFileListItem(fileName){
  var mysite = SitesApp.getSite("uw.edu","introductory-astronomy-clearinghouse");
  var labPage = mysite.getChildByName("labs-exercises");

  var i = getListItemIndex(labPage,fileName,0);

  var items = labPage.getListItems();
  Logger.log('labPage list item'+items[i].getValueByIndex(0));
  return (i>-1)? labPage.getListItems()[i]:null;
}

//get the index of your item

function getListItemIndex(listPage,propOneValue,propOneIndex){
  //for column propOneIndex, returns index (row) that equals propOneValue, or -1.
  var listItems = listPage.getListItems();
  Logger.log('listItems '+listItems.length);
  var r = -1;
  for (var i = 0;i<listItems.length && r<0;i++){
    if ((listItems[i].getValueByIndex(propOneIndex) == propOneValue)){r = i;}
  }
  return r;
}

//repairs URL

function repairUrlValue(url,text){
  Logger.log('buildAnchor for'+text+'->'+url);
  var a = '<a href="'+url+'">"'+text+'</a>';
  Logger.log('...built '+a);
  return a;
}

//find name of page with normalized name

function findPage(name){
  var mysite = SitesApp.getSite("uw.edu","introductory-astronomy-clearinghouse");
  var parentPage = mysite.getChildByName("labs-exercises");
  var norm = normalizeName(name);

  var page = parentPage.getChildByName(norm);
  Logger.log('findPage '+page.getUrl());
  return page; 
}

//get size of attached file in KB

function getBlobSize(blob) {
  return Math.round(blob.getBytes().length/1024)+" KB"; 
}

//put the name into reasonable form

function normalizeName(header){
  var key = "";
  for (var i = 0; i < header.length; ++i){
    var letter = header[i];
    if (letter == " " && key.length > 0){
      key +='-';
      continue;
    }
    if (!isAlnum(letter)){
      continue;
    }
    if (key.length == 0 && isDigit(letter)){
      continue; //first character must be a letter
    }
    key += letter.toLowerCase();
  }
  Logger.log("normalizeName from '"+header+"' to '"+key+"'");
  return key;
}

/*
 i s A l n u m
Returns true if the character char is alphabetical, false otherwise
*/

function isAlnum(char){
  return char >= 'A' && char <= 'Z' ||
    char >='a' && char <= 'z' ||
    isDigit(char);
}

/* i s D i g i t
Returns true if the character is a digit, false otherwise.
*/

function isDigit(char){
  return char >='0' && char <= '9';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:23:08.090

当您尝试通过 ID 无效的 ID 访问 UI 元素时，通常会发生意外错误。

在您的情况下，没有小部件，例如

```
app.getElementById("file").setEnabled(false); 
```

# .net - EF 4.3.1 和 EF 5.0 DbSet.Local 比实际的数据库查询慢

> ID：12223291
> 
> 赞同：20
> 
> 时间：2012-08-31T22:39:01.827
> 
> 标签：.net, vb.net, entity-framework, entity-framework-5, entity-framework-4.3.1

我有一个包含大约 16,500 个城市的表的数据库，以及该数据库的 EF 数据模型（数据库优先）。我使用代码将它们预加载到内存中：

```
Db.Cities.Load() 
```

...然后在使用它们时，我尝试了以下每个查询：

```
Dim cities() As String = Db.Cities.Select(Function(c) c.CityName).ToArray

Dim cities() As String = Db.Cities.Local.Select(Function(c) c.CityName).ToArray 
```

第一个查询很快（约 10 毫秒），但第二个查询第一次运行大约需要 2.3 秒（尽管在此之后调用它比第一个查询快）。

这没有任何意义，因为 SQL Server Profiler 会验证第一个查询是否正在访问另一台计算机上的数据库，但第二个不是！

我试过关闭`Db.Configuration.AutoDetectChangesEnabled`，我试过预先生成视图。

我该怎么做才能`.Local`更快？（并非所有运行此应用程序的客户端都将在快速 LAN 上。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T07:54:18.000

[我使用Resharper](http://www.jetbrains.com/resharper/)的便捷功能走过了该`Local`物业的源头。如果您正在运行的只是上述三行，您将首先看到一个可能不是您的问题的调用。但是随后 EF 为它创建了一个新的 ObservableCollection并逐项填充它。在第一次通话时，其中任何一个都可能代价高昂。`DetectChanges``Local`

直接针对 EF 的查询`DbSet`将路由到我确定直接访问内部本地缓存的 EF 数据库提供程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T17:50:24.867

以下扩展方法将返回一个包含 DbSet 的本地缓存实体，而不会因检测上下文更改和创建对象`IEnumerable<T>`的方法而产生启动开销。`DbSet.Local()``ObservableCollection<T>`

```
<Extension()>
Public Function QuickLocal(Of T As Class)(ByRef DbCollection As DbSet(Of T)) As IEnumerable(Of T)
    Dim baseType = DbCollection.[GetType]().GetGenericArguments(0)
    Dim internalSet = DbCollection.GetType().GetField("_internalSet", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance).GetValue(DbCollection)
    Dim internalContext = internalSet.GetType().GetProperty("InternalContext").GetValue(internalSet, Nothing)
    Return DirectCast(internalContext.GetType.GetMethod("GetLocalEntities").MakeGenericMethod(baseType).Invoke(internalContext, Nothing), IEnumerable(Of T))
End Function 
```

调用`.QuickLocal`包含 19,679 个实体的 DbSet 需要 9 毫秒，而`.Local`第一次调用需要 2121 毫秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:37:28.677

为什么不简单地从第一个查询中保存字符串列表并改用它。

```
List<string> cities = db.Cities.Select( x=>x.CityName).ToList(); 
```

由于 Select 可能会执行一些一致性检查，因此本地可能会更慢。

# android - CursorAdapter bindView 优化

> ID：12223293
> 
> 赞同：15
> 
> 时间：2012-08-31T22:39:04.823
> 
> 标签：android, android-cursoradapter, android-adapter

当覆盖 ArrayAdapter 我知道使用这样的模式是正确的：

```
if(view != null){
   ...create new view setting fields from data 
}else
  return view; //reuse view 
```

将这种模式与 CursorAdapters 一起使用是否也正确？我的问题是我有一个文本颜色，根据光标字段可以是红色或蓝色，所以我不希望在有一个需要蓝色字段的单元格上出现任何错误，例如红色。我的 bindView 代码是这样的：

```
if(c.getString(2).equals("red"))
      textView.setTextColor(<red here>);
   else
      textView.setTextColor(<blue here>); 
```

如果我重用视图，我可以确定红色变为红色，而蓝色变为蓝色吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-01T03:45:29.273

在`CursorAdapter`中，您在 中获取布局并在中`newView`绑定数据`bindView`。`CursorAdapter`已经做了重用模式，`getView`所以你**不必再做一次**。下面是原始`getView`源代码。

```
 public View getView(int position, View convertView, ViewGroup parent) {
    if (!mDataValid) {
        throw new IllegalStateException("this should only be called when the cursor is valid");
    }
    if (!mCursor.moveToPosition(position)) {
        throw new IllegalStateException("couldn't move cursor to position " + position);
    }
    View v;
    if (convertView == null) {
        v = newView(mContext, mCursor, parent);
    } else {
        v = convertView;
    }
    bindView(v, mContext, mCursor);
    return v;
} 
```

如果您想进一步优化，请使用`ViewHolder Pattern`以下示例：创建标签`newView`并检索`bindView`

```
 public class TimeListAdapter extends CursorAdapter {
     private LayoutInflater inflater;
     private    static  class   ViewHolder  {
         int    nameIndex;
         int    timeIndex;
         TextView   name;
         TextView   time;
    }
  public TimeListAdapter(Context context, Cursor c, int flags) {
    super(context, c, flags);
  this.inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  }
  @Override
  public void bindView(View view, Context context, Cursor cursor) {
         ViewHolder holder  =   (ViewHolder)    view.getTag();
         holder.name.setText(cursor.getString(holder.nameIndex));
         holder.time.setText(cursor.getString(holder.timeIndex));
  }
  @Override
  public View newView(Context context, Cursor cursor, ViewGroup  
  p parent) {
         View   view    =   inflater.inflate(R.layout.time_row, null);
         ViewHolder holder  =   new ViewHolder();
         holder.name    =   (TextView)  view.findViewById(R.id.task_name);
         holder.time    =   (TextView)  view.findViewById(R.id.task_time);
     holder.nameIndex   =   cursor.getColumnIndexOrThrow 
         (TaskProvider.Task.NAME);
         holder.timeIndex   =   cursor.getColumnIndexOrThrow    
         (TaskProvider.Task.DATE);
         view.setTag(holder);
    return view;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:50:31.387

是的，`getView`is in`Adapter`并且不依赖于`ArrayAdapter`nor `CursorAdapter`。

回收始终是一个好习惯。确保您的代码在每种情况下都设置颜色。

# iis - 来自受信任域的用户的 Kerberos 委派失败

> ID：12223304
> 
> 赞同：2
> 
> 时间：2012-08-31T22:40:57.500
> 
> 标签：iis, dns, kerberos, delegation, trusted

我已成功设置 ASP.Net 网站和 SQL Server 之间的 Kerberos 委派。IIS 应用程序池帐户和 SQL Server 服务帐户的同一域中的所有用户都可以从网站委派给 SQL Server。现在我们有来自双向受信任域的用户尝试使用该网站，并且在 SQL Server 端发生以下错误：“用户'NT AUTHORITY\ANONYMOUS LOGON'登录失败。这意味着委托失败。

该网站是 Windows 2003 上的 IIS 6。

我检查了来自受信任域的用户，“userAccountControl”为 512，因此不会阻止委派。在用户IE浏览器设置中，我可以将“本地内网”配置正确。

有人能告诉我如何解决这个问题吗？

谢谢！

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:28:44.500

也许这可以帮助你： [http ://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/c43260a9-6791-4572-a7f2-1547467d89bb/](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/c43260a9-6791-4572-a7f2-1547467d89bb/)

这是报价（由 SenthilSK 撰写）

Kerberos 协议支持两种委托，基本的（不受约束的）和受约束的。基本 Kerberos 委派可以跨越单个林中的域边界，但无论信任关系如何，都不能跨越林边界。Kerberos 约束委派在任何情况下都不能跨越域或林边界。有关您的方案的 KCD 配置的更多详细信息，我建议您参考有关 Kerberos 的白皮书 [http://www.microsoft.com/download/en/details.aspx?id=23176](http://www.microsoft.com/download/en/details.aspx?id=23176)

# mysql - 从子查询中选择

> ID：12223305
> 
> 赞同：4
> 
> 时间：2012-08-31T22:41:05.463
> 
> 标签：mysql, sql

我正在尝试编写一个具有 2 个子查询的查询。查询在单独运行时起作用，但是当我将它们放在一起时，我没有得到所需的结果集。我将尝试举一个最小的例子。

主要查询：

```
mysql> select target_name_id,  ep, count(*), count(distinct wafer_id) 
       from data_cst 
       where target_name_id = 155609 
       and data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'
       GROUP BY target_name_id, data_cst.ep;

+----------------+------+----------+--------------------------+
| target_name_id | ep   | count(*) | count(distinct wafer_id) |
+----------------+------+----------+--------------------------+
|         155609 | Line |     4799 |                      215 |
+----------------+------+----------+--------------------------+
1 row in set (0.05 sec) 
```

第一个子查询：

```
 mysql> SELECT target_name_id,ep, wafer_id, AVG(bottom) as averages,
        FROM data_cst            
        WHERE target_name_id = 155609
        AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'
        GROUP BY target_name_id, ep, wafer_id;
+----------------+------+----------+------------+
| target_name_id | ep   | wafer_id | averages   |
+----------------+------+----------+------------+
|         155609 | Line |   401739 | 47.6236667 |
|         155609 | Line |   403041 | 47.3739167 |
|         155609 | Line |   408339 | 47.4901667 |
|         155609 | Line |   409683 | 48.3066250 |
|         155609 | Line |   409690 | 47.2402500 |
|         155609 | Line |   410249 | 47.3346667 |
|         155609 | Line |   410633 | 48.7373333 |
|         155609 | Line |   414000 | 48.1274167 |
              .
              .
              .
215 rows in set (0.07 sec) 
```

第二个子查询：

```
mysql> SELECT target_name_id, ep, data_file_id, lot_id, wafer_id, 
              date_time,
              COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id)-1 as reruns
       FROM data_cst         
       WHERE target_name_id = 155609  
       AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59' 
       GROUP BY target_name_id, data_cst.ep, wafer_id         
       HAVING COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id) > 1;

   +----------------+------+--------------+--------+----------+---------------------+--------+
    | target_name_id | ep   | data_file_id | lot_id | wafer_id | date_time           | reruns |
    +----------------+------+--------------+--------+----------+---------------------+--------+
    |         155609 | Line |          774 | 120804 |   403041 | 2012-07-06 03:51:50 |      1 |
    |         155609 | Line |         6502 | 123109 |   409683 | 2012-07-16 05:10:04 |      1 |
    |         155609 | Line |          749 | 120804 |   409690 | 2012-07-06 04:08:01 |      1 |
    |         155609 | Line |      3319148 | 123484 |   410633 | 2012-07-07 09:12:20 |      5 |
    |         155609 | Line |         8264 | 134609 |   414098 | 2012-07-03 11:34:12 |      5 |
    |         155609 | Line |      3279867 | 124752 |   414245 | 2012-06-26 00:51:31 |      1
                .
                .
                .
93 rows in set (0.06 sec) 
```

现在，当我将它们全部放在一起时，我想要来自主查询的计数、来自第二个的平均值以及来自第三个的重新运行列的总和。我已经搞砸了 3 天，我无法找到正确的连接来获得我想要的结果。我已经能够得到正确的总和，或者计数，或者平均值，但不是全部 3。这是我最近的尝试：

```
mysql> select data_cst.target_name_id, data_cst.ep, count(*) as count, 
       count(distinct data_cst.wafer_id) as wafers, 
       avg(averages) as average, sum(reruns) as rerun 
       from data_cst, 
          (SELECT target_name_id,ep, wafer_id, AVG(bottom) as averages            
           FROM data_cst                        
           WHERE target_name_id = 155609             
           AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'             
           GROUP BY target_name_id, ep, wafer_id) q1, 
          (SELECT target_name_id, ep, data_file_id, lot_id, wafer_id,
                  date_time, 
                  COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id)-1 as reruns
           FROM data_cst                     
           WHERE target_name_id = 155609              
           AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'             
           GROUP BY target_name_id, data_cst.ep, wafer_id                     
           HAVING COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id) > 1) r 
       where data_cst.target_name_id = 155609 
       AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59' 
       and  data_cst.wafer_id = q1.wafer_id 
       GROUP BY target_name_id, data_cst.ep;
+----------------+------+--------+--------+----------------+--------+
| target_name_id | ep   | count  | wafers | average        | rerun  |
+----------------+------+--------+--------+----------------+--------+
|         155609 | Line | 446307 |    215 | 48.12877962148 | 724649 |
+----------------+------+--------+--------+----------------+--------+
1 row in set (23.56 sec) 
```

使用这个最外层的 where 子句，晶圆计数和平均值是正确的，但计数和重新运行不正确。我可以使用不同的 where 子句并让重新运行正确，但是计数和晶片是错误的。我可以使用另一个不同的 where 子句并正确计数，但是重新运行是错误的。

我已经搞砸了 3 天，只是找不到适合我的 where 子句。

这是我的问题的更新：

我按照 Gordon Linoff 的建议修改了我的查询，从那时起，客户添加了许多新的要求，我已经能够将它们合并到查询中。但是现在他们添加了一些我不太清楚如何使用它。

我的查询现在看起来像这样：

```
SELECT data_target.name as Target,
       q1.ep as EP,
       COUNT(*) as Wafers,
       Lots,
       SUM(numonep)/(COUNT(*)+SUM(CASE WHEN reruns > 0 THEN reruns ELSE 0 END)) as 'Sites/Wafer',
       MAX(LastRun) as "Last Run",
       SUM(CASE WHEN reruns > 0 THEN reruns ELSE 0 END) as Rerun,
       COUNT(*)+SUM(CASE WHEN reruns > 0 THEN reruns ELSE 0 END) as Runs,
       avgbottom as "Avg Bottom",
       3*stdbottom as "3 Sig",
       maxbottom as Max,
       minbottom as Min,
       SUM(numonep) as Count,
       SUM(numonep) - SUM(numbottoms) as NAs,
       100-((SUM(numonep) - SUM(numbottoms))/SUM(numonep)*100) as "% Success",
       3*stdbottom/avgbottom as "3Sig/Avg",
       AVG(avgbottom) as 'Wafer Avg',
       AVG(Wafer3Sigma) as 'Wafer 3 Sigma',
       AVG(Ranges) as 'Avg Range',
       3*STD(Ranges) as '3Sig of Ranges',
       MAX(Ranges) as 'Max Range',
       MIN(Ranges) as 'Min Range',
       (SUM(numonep) - SUM(numbottoms))/COUNT(*) as 'NAs/Wafer'
   FROM (SELECT target_name_id,
                ep,
                wafer_id,
                COUNT(bottom) as numbottoms,
                AVG(bottom) as avgbottom, 
                STD(bottom) as stdbottom,
                MAX(bottom) as maxbottom,
                MIN(bottom) as minbottom,
                MAX(date_time) as "LastRun",
                COUNT(*) as numonep,
                COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id)-1 as reruns, 
                COUNT(DISTINCT(lot_id)) as Lots,
                3*STD(bottom) as Wafer3Sigma,
                MAX(bottom) - MIN(bottom) as Ranges
         FROM data_cst
         WHERE target_name_id IN (775, 776, 777, 778, 779, 780, 45, 44, 116, 117, 118, 119, 120, 121)  
         AND data_cst.date_time BETWEEN '2010-03-04 00:00:00' AND '2010-03-04 23:59:59' 
         GROUP BY target_name_id, ep, wafer_id  
         HAVING count(*) < 999) q1, 
   data_target  
   WHERE data_target.id = target_name_id  
   GROUP BY q1.target_name_id, q1.ep; 
```

这非常有效。但是现在他们希望我得到一个特定的列（image_measurer_id），返回的每一行对应于具有底部 = 最小值（底部）、底部 = 最大值（底部）、底部最接近平均（底部）的组中的行，以及date_time = Max(date_time) 所在行的底部。

这甚至可以从这个查询中获得吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:53:15.597

如果您使用正确的连接语法，它将对您有很大帮助。连接回 data_cst 似乎是多余的。如果您的两个子查询具有相同的目标和晶圆，那么简单的连接或左外连接应该可以工作：

```
select q1.target_name_id, q1.ep, count(*) as count, 
   count(distinct q1.wafer_id) as wafers, 
   avg(averages) as average, sum(reruns) as rerun 
   from (SELECT target_name_id,ep, wafer_id, AVG(bottom) as averages            
       FROM data_cst                        
       WHERE target_name_id = 155609             
       AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'             
       GROUP BY target_name_id, ep, wafer_id) q1 left outer join
      (SELECT target_name_id, ep, data_file_id, lot_id, wafer_id,
              date_time, 
              COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id)-1 as reruns
       FROM data_cst                     
       WHERE target_name_id = 155609              
       AND data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'             
       GROUP BY target_name_id, data_cst.ep, wafer_id                     
       HAVING COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id) > 1
      ) r 
      on r.wafer_id = q1.wafer_id and
         r.target_name_id = q1.target_name_id and
         r.ep = q1.ep
   GROUP BY q1.target_name_id, q1.ep; 
```

但是，您的查询非常相似，因此我认为您可以简化逻辑：

```
select q1.target_name_id, q1.ep, sum(numonep) as count, 
       count(*) as wafers, 
       avg(averages) as average,
       sum(case when reruns > 0 then reruns else 0 end) as rerun 
from (SELECT target_name_id, ep, wafer_id, AVG(bottom) as averages,
             count(*) as numonep,
             COUNT(DISTINCT target_name_id, ep, lot_id, data_file_id)-1 as reruns           
      FROM data_cst                        
      WHERE target_name_id = 155609 and             
            data_cst.date_time BETWEEN '2012-06-23 00:00:00' AND '2012-08-23 23:59:59'             
      GROUP BY target_name_id, ep, wafer_id
     ) q1 
group by q1.target_name_id, q1.ep 
```

# types - Ada 中子类型的非连续范围？

> ID：12223312
> 
> 赞同：9
> 
> 时间：2012-08-31T22:42:26.210
> 
> 标签：types, visibility, ada

完全作为 Ada 类型系统的学习练习，我试图制作 3 种类型（或者更确切地说，一种类型和 2 个子类型）：

*   `Month_Type`, 所有月份的枚举
*   `Short_Month_Type`, 一个`Month_Type`只有 30 天月份的子类型
*   `February_Month_Type`，只有二月的亚型

似乎子类型必须使用该`range`机制，对吗？（还有其他类型的子类型吗？）为了让它与连续范围一起工作，我必须`Month_Type`按以下顺序排列我的枚举：

```
 type Month_Type is (February, April, June, September, November, January, March, May, July, August, October, December); 
```

显然，这不是几个月的自然顺序，我可以看到人们/我正在尝试做`Month_Type'First`或期望得到一月份的事情。

所以，这个愚蠢的例子有两个一般性问题：

1.  我可以有一个子类型来指定其基本类型的特定组件而不是范围吗？
2.  我可以以某种方式隐藏我放置月份的顺序的实现细节（例如，让'First不可见）？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T02:41:39.980

不，[枚举](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-5-1.html) [子类型](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-2-2.html)在这种情况下只允许[range_constraint](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-2-2.html)，但您可以[使用](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-18-7.html)[`Ada.Containers.Ordered_Sets`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-18-9.html). [这里](http://rosettacode.org/wiki/Set#Ada)和[这里](https://sites.google.com/site/drjohnbmatthews/jumbleada)都有例子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T17:43:49.593

您可以创建一个仅指定枚举中某些值的*对象。*我们通常称其为“集合”。

许多语言都将集合作为基本类型（以及数组和记录）。当然有些没有。艾达在中间。它通常没有*名为*“set”或任何类型的类型，但[布尔运算被定义为](http://www.adapower.com/index.php?Command=Class&ClassID=Basics&CID=210)像`boolean`. 如果你打包这个数组，你得到的几乎就是其他语言的“set”类型给你的。所以**Ada 确实支持集合**，它们只是被称为“布尔数组”。

```
type Month_Set is array (Month) of Boolean;
Short_Month : constant Month_Set := 
    (September => true, April => true, June => true, November => true, 
     February => true, others => false);
Y_Month : constant Month_Set :=
    (January => true, February => true, May => True, July => true, 
     others => false);

-- Inclusion
if (Short_Month(X)) then ...

-- Intersection (Short_Y will include only February)
Short_Y := Short_Month and Month_Ending_in_Y;

-- Union (Short_Y will include All Short_Months and all Y_Months
Short_Y := Short_Month or Month_Ending_in_Y;

-- Negation (Short_Y will include all Short_Months not ending in Y
Shorty_Y := Short_Month and not Month_Ending_in_Y; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-15T22:54:27.710

您可以使用[子类型谓词](http://www.ada-auth.org/standards/12rat/html/Rat12-2-5.html)。在你的情况下：

```
subtype Short_Month_Type is Month_Type with
  Static_Predicate => Short_Month_Type in April | June | September | November 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T15:06:38.440

垃圾神回答了第一个问题。要回答第二个问题，请将类型本身设为私有。

# css - 锚标签没有响应

> ID：12223313
> 
> 赞同：2
> 
> 时间：2012-08-31T22:42:37.380
> 
> 标签：css, html, anchor, z-index

我的锚标记在#contentAboutMe 中没有响应（例如，我的鼠标没有将链接作为链接响应）...通过研究我发现z-index 可能会影响这个...但是，我注释掉了任何内容使用 z-index，这似乎不是问题。有任何想法吗？我将不胜感激任何帮助。（锚在我标记的其他地方工作）

```
#logo {
    position: absolute;
    top: 50px;
    left: 20px;
    /*z-index: 50;*/
}
#mainHeader > h1 {
    font-size: 18px;
}
#wrapperAboutMe {
    position: absolute;
    width: 525px;
    left: 400px;
    top: 40px;
    /*z-index: 2;*/
}
#placeHolder {
    position: relative;
}
#topAboutMe {
    background-image: url(../images/aboutTopBackground.png);
    width: 525px;
    height: 47px;
}
#contentAboutMe {
    width: 525px;
    background-image: url(../images/aboutMainBackground.png);
}
#contentAboutMe p {
    padding: 0 40px 0 40px;
    text-align: justify;
}
.firstCharacter {
    display: block;
    float: left;
    color: #155763;
    font-size: 330%;
    line-height: .5em;
    padding-top: 10px;
    padding-right: 2px;
}
#bottomAboutMe {
    background-image: url(../images/aboutBottomBackground.png);
    width: 525px;
    height: 71px;
}
#aboutImage {
    width: 220px;
    height: 45px;
    background-image: url(../images/graphicAbout_03.png);
    background-repeat: no-repeat;
    float: left;
    padding: 30px 0 0 0;
    position: absolute;
    top: -25px;
    left: -100px;
}
#aboutImage span {
    display: none;
}
#aboutBackground {
    position: absolute;
    background-image: url(../images/graphicAboutBackground.png);
    width: 462px;
    height: 125px;
    left: -260px;
    top: -110px;
    z-index: 1;
} 
```

HTML：

```
<article id="aboutMe">
    <div id="wrapperAboutMe">
      <div id="topAboutMe"> </div>
      <!--End topAboutMe-->

      <div id="contentAboutMe">
        <p><span class="firstCharacter">M</span>y content</p>
        <a href="includes/HappeResumeSept2012.pdf" target="_blank">View My Resume</a>
      </div>
      <!--End contentAboutMe-->

      <div id="bottomAboutMe"> </div>
      <!--End bottomAboutMe-->

      <div id="placeHolder">
        <h1 id="aboutImage"><span>About Me</span></h1>
        <div id="aboutBackground"></div>
        <!--End aboutBackground--> 
      </div>
      <!--End placeHolder--> 

    </div>
    <!--End wrapperAboutMe--> 

  </article>
  <!--End Article_aboutMe--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:47:05.723

`id`带有of的 div 位于`aboutBackground`链接的顶部，因此当您尝试单击时，它实际上是针对该 div 注册的，而不是链接。

要解决此问题，请将#aboutBackground z-index 更改为 -1，使其如下所示：

```
#aboutBackground {
position: absolute;
background-image: url(../images/graphicAboutBackground.png);
width: 462px;
height: 125px;
left: -260px;
top: -110px;
z-index: -1; // this line edited
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:50:15.200

摆脱这种风格

```
#placeHolder {
    position: relative;
} 
```

这会将元素置于您的链接之上

# java - 如何在休眠/JPA 中禁用自动更新

> ID：12223314
> 
> 赞同：12
> 
> 时间：2012-08-31T22:42:50.733
> 
> 标签：java, hibernate, jpa, orm

是否可以阻止休眠自动更新持久对象？

```
 @Transactional
    public ResultTO updateRecord(RequestTO requestTO) {

        Entity entity = dao.getEntityById(requestTO.getId());

         // now update the entity based on the data in the requestTO

         ValidationResult validationResult = runValidation(entity);

         if(validationResult.hasErrors()) {
            // return ResultTO with validation errors
         } else {
             dao.persist(entity);
        }
    } 
```

下面是代码中发生的情况，我检索了被休眠认为处于持久状态的实体，然后我更新了实体中的一些字段，然后将实体传递给验证。如果验证失败，则不要更新，如果验证成功，则保留实体。

这是此流程的主要问题：因为我更新了要在验证中使用的实体，所以无论我是否调用 persist() 方法（在 DAO 上）都没有关系，记录将始终更新，因为休眠检测到实体已更改并将其标记为更新。

请记住，我可以改变我进行验证和解决问题的方式，所以我对解决方法不感兴趣。我很想知道如何禁用休眠功能，它会自动更新持久对象。

请记住，我使用的是休眠的 JPA 实现。所以处理休眠特定API的休眠特定答案对我不起作用。

我试图寻找休眠配置，看看我是否可以设置任何配置来阻止这种行为，但没有运气。

谢谢

--EDIT --- 我找不到解决方案，所以我选择回滚事务而不抛出任何 RuntimeException，即使我处于声明性事务中，使用：

TransactionInterceptor.currentTransactionStatus().setRollbackOnly();

这就像一个魅力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:24:35.570

为您的会话配置 FlushMode。

[http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T07:27:19.193

您可以调用以下代码：

```
TransactionAspectSupport.currentTransactionStatus().setRollbackOnly(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T12:03:37.513

从数据库中获取对象后，您可以使用 EntityManager.clear() 方法。 [http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#clear()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#clear())

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:54:12.850

如果验证失败，则抛出异常并让调用者处理。

# ruby-on-rails - 在 rails 中指定 gem 包的非发布版本

> ID：12223315
> 
> 赞同：2
> 
> 时间：2012-08-31T22:42:54.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

如何在 Rails 中指定 gem 的非发布版本？

我不断地对我希望在我的 Rails 应用程序中测试的 gem 进行修改。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:04:22.000

解决此问题的一种方法是指定 git 存储库的位置，而不是 gem 的版本。

例如

```
gem "gem_name", git: "git://github.com/your_github/gem_name.git" 
```

指定本地机器

```
gem "gem_name", git: "/path/to/repository" 
```

或者，您可以简单地指定路径

```
gem "gem_name", path: "/path/to/gemfile" 
```

但是使用 git 存储库可以让您在备用分支中保留多个配置，指定以前的提交，以及我在这个简短答案中所能描述的更多内容。例如，以下指定了一个备用分支：

```
gem "gem_name", git: "git://github.com/your_github/gem_name.git", branch: "branch_name" 
```

有关更多详细信息，请参见[此处](http://gembundler.com/git.html)。

# android - 交换活动订单

> ID：12223316
> 
> 赞同：0
> 
> 时间：2012-08-31T22:42:57.443
> 
> 标签：android, xml, android-activity

这是一个非常基本的疑问。我有一个 MainActivity，我创建了另一个应该充当 MainActivity 的透明屏幕的 Activity。因此，我希望在应用程序启动时首先显示第二个 Activity，比如 DisplayHelpActivity。改变的唯一方法是交换名称和代码，还是有另一种方法来指定活动发生的顺序？请帮我。顺便说一句，当 DisplayHelpActivity 透明屏幕打开时，我希望 MainActivity 显示在后台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:58:35.580

在 Manifest 文件中更改活动的类型，对于要首先启动的 Activity，在清单文件中声明其操作为，

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

对于活动，您想在第一个活动旁边开始，在 mainfest 中将其操作声明为，

```
<action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" /> 
```

对于您提出的有关透明对话的问题，您可以将对话布局的主题定义为透明的，或者您可以为对话创建自己的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:14:09.620

您最好使用对话框来实现这一点，因为它并不完全是 Activites 的用途。还要查找片段，我还没有使用它们，但它们可能会提供使用对话框的替代方法。

活动往往会在那里完全相互替换，因此您不会在后台获得先前的活动。因此，对话或片段将是更好的方法。

您应该能够找到搜索 android 教程的示例。

# drupal-7 - 如何为第二个主题定义另一个预告片？

> ID：12223319
> 
> 赞同：0
> 
> 时间：2012-08-31T22:44:08.297
> 
> 标签：drupal-7, views, drupal-theming, teaser, display-suite

我有两个主题：常规（第一个）和移动（第二个）。与子域 m.mysite.com 绑定的移动主题。

**我无法在移动主题中显示我的移动节点预告片。**

我在 Display Suite 中为移动主题创建了预告片。接下来我需要在移动主题分类标签页面中显示这个。但我无法在 DS 中定义主题。当我在移动主题中使用 [taxonomy-term.tpl] 来定义移动预告片时，但 vars 不起作用：更改 $view_mode 没有结果（在移动预告片上键入机器名称），$content 数组为空。我尝试使用视图，但在显示中没有定义主题的选项。

我能做些什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:25:46.680

问题通过以下方式解决： 1\. 为第二个主题中的默认预告片创建 DS 模板：ds-2col--node-article-teaser.tpl.php 2\. 将代码放入其中以定义我的新 node_teaser_mobile 以显示：print render(node_view ($node, $view_mode = 'node_teaser_mobile', $langcode = NULL));

# python - M2Crypto 中 RSA 消息长度的下限

> ID：12223325
> 
> 赞同：1
> 
> 时间：2012-08-31T22:44:59.263
> 
> 标签：python, encryption, rsa, m2crypto

我正在尝试使用外部站点使用 Python M2Crypto 的 RSA 提供给我的公钥对消息进行编码。本质上，我正在做这样的事情：

```
from M2Crypto import RSA
import os
rsa = RSA.load_pub_key(os.path.join(BASE_PATH, 'external_site.pem'))
rsa_result = rsa.public_encrypt(message, 3).encode('base64') 
```

如果我在加密时不使用填充，则会收到错误消息：

```
RSAError: data too small for key size 
```

我理解为什么消息长度（RSA 加密的模数）有上限，但我不明白为什么会有下限。有人可以解释一下或者指出我正确的方向来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-29T04:05:41.320

消息中*也*必须有一个下限，否则，RSA 操作将是*常规*算术，而不是模算术。

[![m \equiv c^d mod(n)](../Images/ae7959fa10d0cb102ad621c7b1ad03b5.png)](https://i.stack.imgur.com/agpaY.gif)在哪里，[![c = m^e mod(n)](../Images/7d846b681fd5394203ec62965a5e3120.png)](https://i.stack.imgur.com/lOT7d.gif)和[![n = pq](../Images/13b88b34758a050b8114bd3b2a01bf02.png)](https://i.stack.imgur.com/1NBJ3.gif)

[![m^e > n](../Images/9bc5b6fb2ffbc00c6f661a085aaec5f8.png)](https://i.stack.imgur.com/LcA4q.gif)需要为真，对于给定的消息[![米](../Images/51918a41c206f026e37aaa3f58c057f5.png)](https://i.stack.imgur.com/Qm7eM.gif)，换句话说，[![米](../Images/51918a41c206f026e37aaa3f58c057f5.png)](https://i.stack.imgur.com/Qm7eM.gif)需要足够大以减少[![n](../Images/348063a2492680091c9f6db2b732bb72.png)](https://i.stack.imgur.com/IKrg1.gif)，否则对手可以简单地计算[![m = c^1/e](../Images/b10916c224dd0ba24015d8dab7ed4660.png)](https://i.stack.imgur.com/YBvu3.gif)并恢复消息，因为它*从未*减少过[![n](../Images/348063a2492680091c9f6db2b732bb72.png)](https://i.stack.imgur.com/IKrg1.gif)。因此，

[![\sqrt[e]{n} > m > (n - 1)](../Images/f73dc2086e9ebf0de79384f65955bb44.png)](https://i.stack.imgur.com/nadB7.gif)

需要对每条消息都是真实的[![米](../Images/51918a41c206f026e37aaa3f58c057f5.png)](https://i.stack.imgur.com/Qm7eM.gif)。

* * *

举个例子：

让 我们不需要这个例子，因为失败发生在到达那个点之前[![e = 3，p = 5，q = 11](../Images/969a7b4ed466bd86ac710f063b19fa5e.png)](https://i.stack.imgur.com/RMIbh.gif) 。[![n = 55](../Images/6a24a017ba8121a1b5912f21e5bb2cd5.png)](https://i.stack.imgur.com/gNLX2.gif)[![d](../Images/b18472f3993f4fd38e6ad03639a49911.png)](https://i.stack.imgur.com/eAguG.gif)

如果我们选择我们的[![米 = 3](../Images/6c1a8279205496e34fcfb195b078cd3f.png)](https://i.stack.imgur.com/5q8kq.gif)，这样 [![m ≤ n^1/e](../Images/de3129daab2500ad112c46b6bbac11aa.png)](https://i.stack.imgur.com/Arz9u.gif)或大致[![米≤3.803](../Images/8dfcc72de6803b53a00ba9249a4590b1.png)](https://i.stack.imgur.com/938Zv.gif)（为了*不满足*上述等式）

[![c ≡ 3^3 模 (55)](../Images/34a12abb46645a2e588b870505234988.png)](https://i.stack.imgur.com/QAOkQ.gif)

但是也：

[![c = 3^3](../Images/ab7d0ccf24c0d848b8dc7b3b689dccb5.png)](https://i.stack.imgur.com/RDZua.gif)没有 mod 存在，这就是重点，mod 55 从来没有做任何事情。由于[![e = 3](../Images/3c904af6424fd50d0e6c9b4e231ee643.png)](https://i.stack.imgur.com/cNlw9.gif)被告知公众，人们可以简单地计算[![27^1/3 = 3](../Images/9bb061b1969638095c151ce50057d59a.png)](https://i.stack.imgur.com/WCQ3s.gif)并得知该消息是[![米 = 3](../Images/6c1a8279205496e34fcfb195b078cd3f.png)](https://i.stack.imgur.com/5q8kq.gif).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T16:41:55.143

*（重复评论的答案，只是为了“关闭”）*

您可能需要以某种方式告诉您的 API 使用 OAEP 填充。如果您使用填充，错误可能会消失。不填充消息长度可能需要等于模数长度。但是不使用填充有严重的安全问题，所以除非你真的知道你在做什么，否则不要这样做。

# oop - MATLAB 是否支持“可调用”（即类函数）类？

> ID：12223329
> 
> 赞同：4
> 
> 时间：2012-08-31T22:45:30.903
> 
> 标签：oop, matlab, functional-programming, operator-overloading

是否可以定义一个 MATLAB 类，以便可以像调用任何其他函数一样调用此类中的对象？

IOW，我在问是否可以在 MATLAB 中编写类似于以下 Python 类的内容：

```
# define the class FxnClass
class FxnClass(object):
    def __init__(self, template):
        self.template = template

    def __call__(self, x, y, z):
        print self.template % locals()

# create an instance of FxnClass
f = FxnClass('x is %(x)r; y is %(y)r; z is %(z)r')

# call the instance of FxnClass
f(3, 'two', False)

...
[OUTPUT]
x is 3; y is 'two'; z is False 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:11:26.047

我不知道，MATLAB是否直接支持你想要的，但MATLAB确实支持一流的功能；因此，闭包可能会提供一个可用的替代品，例如：

```
function f = count_call(msg)
    calls = 0;

    function current_count()
        disp(strcat(msg, num2str(calls)));
        calls = calls + 1;
    end

    f = @current_count;
end 
```

在这种情况下，`current_count`关闭`calls`（和`msg`）。这样你就可以表达依赖于某些内部状态的函数。你会这样使用它：

```
g = count_call('number of calls: ') % returns a new function ("__init__")
g()                                 % "__call__" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T23:14:04.047

如果不简单地在 Matlab 中创建一个 java 方法，我将有兴趣看看这是否可能。我知道您可以执行以下操作

```
classdef ExampleObject
    properties
        test;
    end
    methods
        function exampleObject = ExampleObject(inputTest)
            exampleObject.test=inputTest;
        end
        function f(exampleObject,funcInput)
            disp(funcInput+exampleObject.test);
        end
    end
end

>> e=ExampleObject(5);
>> f(e,10)
    15 
```

但据我所知，如果你试图覆盖调用函数，你会遇到与 Matlab 的括号下标参考冲突`subsref`。您可以在[此处](http://www.mathworks.com/help/techdoc/matlab_oop/f3-28024.html#f3-62469)找到显示如何覆盖它的参考资料，并且您也许可以让它做您想做的事……但这样做似乎不是一种好的形式。不确定 Matlab 将如何处理对对象（而不是函数）的调用而不会与此混淆。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-12T17:39:05.137

一种方法是覆盖[`feval`](http://www.mathworks.com/help/matlab/ref/feval.html)类的函数：

```
classdef FxnClass < handle
    properties
        template
    end
    methods
        function obj = FxnClass(t)
            obj.template = t;
        end

        function out = feval(obj, varargin)
            out = sprintf(obj.template, varargin{:});
        end
    end
end 
```

这将用作：

```
>> f = FxnClass('x = %f, y = %s, z = %d');
>> feval(f, 3,'two',false)
ans =
x = 3.000000, y = two, z = 0 
```

现在，如果您想提供额外的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)，您可以按照[@Salain](https://stackoverflow.com/a/12223512/97160)的建议[重新定义](http://www.mathworks.com/help/matlab/matlab_oop/indexed-reference-and-assignment.html#br09ho8)[`subsref`](http://www.mathworks.com/help/matlab/ref/subsref.html)您的课程的功能。将以下内容添加到之前的类定义中：

```
classdef FxnClass < handle
    ...

    methods
        function out = subsref(obj, S)
            switch S(1).type
                case '.'
                    % call builtin subsref, so we dont break the dot notation
                    out = builtin('subsref', obj, S);
                case '()'
                    out = feval(obj, S.subs{:});
                case '{}'
                    error('Not a supported subscripted reference');
            end
        end
    end
end 
```

现在你可以简单地写：

```
>> f = FxnClass('x = %f, y = %s, z = %d');
>> f(3,'two',false)
ans =
x = 3.000000, y = two, z = 0 
```

就我个人而言，我不是特别喜欢覆盖`subsref`or`subsasgn`函数。它们用于太多情况，有时很难让它们写出来。例如，以下所有内容最终都会`subsref`使用不同的输入调用该方法：

```
f(..)
f.template
f.template(..)
f(..).template
f(..).template(..) 
```

还有`end`可能出现在索引中的关键字的情况，因此在某些情况下您可能还必须覆盖它。更不用说对象也可以连接成数组，这让事情变得更加复杂：

```
>> ff = [f,f];
>> ff(1)        % not what you expect! 
```

* * *

也就是说，我认为[@Frank](https://stackoverflow.com/a/12223494/97160)建议在这种情况下使用带有闭包的嵌套函数更优雅：

```
function f = FxnClass(t)
    f = @call;
    function out = call(varargin)
        out = sprintf(t, varargin{:});
    end
end 
```

像以前一样调用：

```
>> f = FxnClass('x = %f, y = %s, z = %d');
>> f(3, 'two', false) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T23:16:01.107

如果您的意思是您希望一个类拥有一个您像普通函数一样使用的方法（例如，在 m 文件中定义），那么是的，Matlab 确实支持[静态方法](http://www.mathworks.com/help/techdoc/matlab_oop/brdqiu3.html)。

静态方法独立于该类的任何实例运行，事实上，您甚至不需要实例化一个类来使用其静态方法。

但是， Matlab 不支持[静态*字段*](https://stackoverflow.com/a/6453124/1042555)，因此您必须先实例化这样的类，然后在使用函数之前设置其字段（可能会使用这些字段，因为您在问这个问题）。

[鉴于静态成员的限制，如Frank 所述，](https://stackoverflow.com/a/12223494/1042555)使用闭包可能会更好。

# php - 解析facebook feed的正确方法

> ID：12223333
> 
> 赞同：0
> 
> 时间：2012-08-31T22:45:57.130
> 
> 标签：php, facebook

我想通过 PHP 从一页解析一个最新的提要。

正如我所读到的，FB 拒绝了 curl/fopen 和另一种解析一些数据的方法。而不是这个，我应该使用 FB API，好的，我会使用 PHP SDK。

```
$info = json_decode(file_get_contents('https://graph.facebook.com/cocacola/feed?access_token={some_access_token}')); 
```

很好，它从可口可乐页面返回给我的提要，但它需要有效的访问令牌。要获得访问令牌，用户应该至少授权一次我的应用程序，对吧？

Reuire autoorize from user is not the best idea in this website,所以也许有人知道获得一个（最新）提要的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:03:37.177

访问公共页面的提要所需的只是应用程序的应用程序访问令牌，您不需要用户的访问令牌。如果您没有应用程序，您必须首先在[http://developers.facebook.com/apps](http://developers.facebook.com/apps)设置一个。

在 Facebook 上设置应用程序后，您可以在此处获取应用程序访问令牌（将您的应用程序 ID 和机密 ID 替换为 Facebook 应用程序页面上的值）：

```
https://graph.facebook.com/oauth/access_token?client_id=<YOUR_APP_ID>&client_secret=<YOUR_APP_SECRET>&grant_type=client_credentials 
```

您可以根据问题中的链接在对提要页面的调用中使用它。

# python - SQLAlchemy：创建与重用会话

> ID：12223335
> 
> 赞同：131
> 
> 时间：2012-08-31T22:46:25.367
> 
> 标签：python, sqlalchemy

只是一个简单的问题：SQLAlchemy[谈论](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#session-frequently-asked-questions)调用`sessionmaker()`一次，但`Session()`每次需要与数据库交谈时都会调用结果类。对我来说，这意味着第二个我会做我的第一个`session.add(x)`或类似的事情，我会先做

```
from project import Session
session = Session() 
```

到目前为止，我所做的是`session = Session()`在我的模型中调用*一次*，然后总是在我的应用程序的任何地方导入相同的会话。由于这是一个网络应用程序，这*通常*意味着相同（执行一个视图时）。

但区别在哪里？一直使用一个会话而不是在我的功能完成之前将其用于我的数据库内容，然后在下次我想与我的数据库交谈时创建一个新会话有什么缺点？

我知道如果我使用多个线程，每个线程都应该有自己的会话。但是使用`scoped_session()`，我已经确保该问题不存在，不是吗？

请澄清我的任何假设是否错误。

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-08-31T23:45:40.017

`sessionmaker()`是一个工厂，它鼓励`Session`在一个地方放置用于创建新对象的配置选项。它是可选的，因为您可以在`Session(bind=engine, expire_on_commit=False)`需要新的任何时候轻松调用`Session`，除了它的冗长和冗余，我想阻止小规模“帮助者”的扩散，每个帮助者都在一些新的问题中解决了这种冗余问题和更令人困惑的方式。

因此`sessionmaker()`，它只是一个工具，可帮助您`Session`在需要时创建对象。

下一部分。`Session()`我认为问题是，在不同的点上制作一个新的与一直使用一个有什么区别。答案，不是很多。 `Session`是您放入其中的所有对象的容器，然后它还跟踪打开的事务。`rollback()`在您调用or的那一刻`commit()`，事务已经结束，并且在`Session`调用它再次发出 SQL 之前，它没有与数据库的连接。它持有的映射对象的链接是弱引用，前提是对象没有挂起的更改，因此即使在这方面，`Session`当您的应用程序丢失对映射对象的所有引用时，它也会将自身清空回一个全新的状态。如果您将其保留为默认值`"expire_on_commit"`设置，则所有对象在提交后都会过期。如果它`Session`停留了五到二十分钟，并且下次使用它时数据库中的各种东西都发生了变化，那么下次访问这些对象时它会加载所有全新的状态，即使它们一直在内存中二十分钟。

在 Web 应用程序中，我们通常会说，嘿，为什么不对每个请求都创建一个全新`Session`的，而不是一遍又一遍地使用同一个。这种做法可确保新请求开始“干净”。如果上一个请求中的一些对象还没有被垃圾回收，并且如果你已经关闭了`"expire_on_commit"`，那么上一个请求中的某些状态可能仍然存在，并且那个状态甚至可能已经很老了。如果您小心地保持`expire_on_commit`打开状态并确定调用`commit()`或`rollback()`在请求结束时，那很好，但如果您从一个全新的开始`Session`，那么您甚至没有任何问题开始清洁。因此，以新的开始每个请求的想法`Session`这实际上只是确保您重新开始的最简单方法，并使`expire_on_commit`几乎可以选择使用，因为此标志可能会为`commit()`在一系列操作中间调用的操作产生大量额外的 SQL。不确定这是否回答了您的问题。

下一轮是你提到的线程。如果您的应用程序是多线程的，我们建议确保`Session`正在使用的应用程序是本地的...某物。 `scoped_session()`默认情况下，它对当前线程是本地的。在 Web 应用程序中，请求的本地化实际上更好。Flask-SQLAlchemy 实际上会发送一个自定义的“范围函数”，`scoped_session()`以便您获得一个请求范围的会话。普通的 Pyramid 应用程序将 Session 粘贴到“请求”注册表中。当使用这样的方案时，“在请求开始时创建新会话”的想法仍然看起来是最直接的方式来保持直截了当。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-11-11T10:22:36.820

除了出色的 zzzeek 答案之外，这里有一个简单的方法可以快速创建一次性的、自封闭的会话：

```
from contextlib import contextmanager

from sqlalchemy import create_engine
from sqlalchemy.orm import scoped_session, sessionmaker

@contextmanager
def db_session(db_url):
    """ Creates a context with an open SQLAlchemy session.
    """
    engine = create_engine(db_url, convert_unicode=True)
    connection = engine.connect()
    db_session = scoped_session(sessionmaker(autocommit=False, autoflush=True, bind=engine))
    yield db_session
    db_session.close()
    connection.close() 
```

用法：

```
from mymodels import Foo

with db_session("sqlite://") as db:
    foos = db.query(Foo).all() 
```

# android - 如何在 Android 中启动 home Activity

> ID：12223336
> 
> 赞同：1
> 
> 时间：2012-08-31T22:46:43.633
> 
> 标签：android, android-intent

我正在尝试编写一个类`BaseActivity`来处理一些通用行为。

其中之一是捕获对应用程序图标的点击并重新指向第一个活动。这听起来很简单，但这`BaseActivity`将在一个库项目中。我不能使用明确的意图（由类定义）。相反，我正在尝试使用通用意图：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
        // app icon in action bar clicked: go back home
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        intent.setPackage(getPackageName());
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;

    } else {
        return super.onOptionsItemSelected(item);
    }
} 
```

我的问题是我得到了一个`ActivityNotFoundException`，我不明白为什么。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:06:02.143

听起来您正在[`getLaunchIntentForPackage()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage%28java.lang.String%29)从`PackageManager`. 它将包名称作为参数并创建一个`Intent`来启动该包的主要活动。这样，您就不需要指明应该在包中启动的特定类。

> 当前实现将首先查找 category 中的主要活动`CATEGORY_INFO`，然后查找 category 中的主要活动 `CATEGORY_LAUNCHER`，或者如果都没有找到则返回 null。

# java - 执行主类后输出不同

> ID：12223337
> 
> 赞同：5
> 
> 时间：2012-08-31T22:46:51.170
> 
> 标签：java

```
public class Main {
    public static void main(String[] args){
        System.out.println(X.Y.Z);
    }
}

class X {
    static class Y {
        static String Z = "Result 1";
    }
    static C Y = new C();
}

class C {
    String Z = "Result 2";
} 
```

有时输出是`"Result 1"`，有时输出是`"Result 2"`。你能解释一下为什么吗？

我正在使用`JDK 1.6_33`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T22:49:31.167

这是 Java Puzzler #68 - 它应该始终打印`Result 2`. 引用：

> 事实证明，在这些情况下，有一条规则可以控制程序的行为。当变量和类型具有相同的名称并且都在范围内时，变量名称优先 [JLS 6.5.2]。据说变量名掩盖了类型名 [JLS 6.3.2]。类似地，变量和类型名称可能会掩盖包名称。这条规则确实晦涩难懂，任何依赖它的程序都可能使读者感到困惑。

# css - 如何对 CSS 精灵图像进行悬停效果？

> ID：12223344
> 
> 赞同：2
> 
> 时间：2012-08-31T22:48:13.080
> 
> 标签：css, sprite

我正在使用精灵图像。并且精灵上的每个图标都有相同但不同的悬停效果颜色。好吧，当我将鼠标悬停在图标上时，悬停效果正在起作用。但我想在 div 鼠标悬停而不是跨度上悬停（更改图像）。（由于跨度宽度指定为图标大小，我找不到解决方案）

如果你请检查下面的css和html，你会明白我需要什么。我希望在“each_option”div 鼠标悬停时更改“search_forums”（跨度）图标。

提前致谢

**CSS**

```
.each_option{
height:30px;
border-bottom:1px solid #ffe869;
font-size:14px;
padding-top:9px;
color:#707070;}

.forumdisplay_sprite{
background-image:url(../img/forumdisplay_sprite.png);
background-repeat:no-repeat;
display:block;
text-indent:-99999px;
overflow:hidden;}

.search_forums{height:24px;width:24px;background-position:-24px -48px;}

.search_forums:hover{height:24px;width:24px;background-position:-24px -72px;} 
```

**HTML**

```
<div class="each_option">
<span class="forumdisplay_sprite search_forums"></span>
<a href="#">Search Forums</a>
</div> 
```

**雪碧图标** [雪碧图标图像](http://i.imgur.com/HJoxi.png)

* * *

对不起，不够清楚。我原来的/以前的风格就像下面给定的页面。然后在阅读了一篇关于更好的 CSS 和优化的文章后，我决定使用精灵图像。但是我有这个问题...

这是我想做的：http: [//jsfiddle.net/stckhlm/EXZKa/](http://jsfiddle.net/stckhlm/EXZKa/)

是否可以像上面的示例一样获得悬停（同时更改包装 div 的背景颜色和内部 div 的背景图像）效果？如果没有，那么我将不得不停止使用精灵图像或悬停效果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:55:06.097

这就是你所追求的对吗？

[http://jsfiddle.net/j4nf4/1/](http://jsfiddle.net/j4nf4/1/)

不确定为什么您提供的图像没有渲染，所以找到了另一个精灵。

为什么要在锚上方有一个跨度？对我来说这没有意义。

如果你想要一个 div 悬停效果，CSS 应该是你的情况：

```
.each-option:hover {
Your styling here 
```

}

确保如果您为 div、span、段落等设置悬停状态，则将光标更改为指针：`cursor: pointer;`以便用户知道该区域/区域是可点击的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:52:42.943

```
.each_option:hover .search_forums{//enter your hover changes here.} 
```

不是 100% 确定我是否理解您的目标 - 但如果您希望在每个选项悬停时更改 search_forums 样式，上面的代码应该可以解决问题。

# jquery - jQuery load() 和 switch 语句不起作用

> ID：12223347
> 
> 赞同：0
> 
> 时间：2012-08-31T22:48:59.327
> 
> 标签：jquery, load, switch-statement

我的 html 中有三个锚标记链接，ID 为“switcher”、“switcher-b”、“switcher-c”，当单击锚标记“switcher”时，我想从我的服务器上的 html 页面加载内容“内容.html”，锚点“switcher-b”将加载“content-b.html”，“switcher-c”将加载“content-c.html”。我还有一个锚标记 ID“默认”，单击时将重置/卸载 html 页面。

我认为 switch 语句将是完成我的任务的最佳方式，但它不起作用......我不精通 jQuery/JavaScript，但我想学习，所以如果任何具有中级或高级知识的 JavaScript/jQuery 开发人员可以识别我在我的 jQuery 语法中做错了什么，并提出了一个带有解释的解决方案，我真的会很感激。

感谢您查看我的帖子和您的帮助。

```
 <!-- HTML code -->

     <html>

        </head>
        <body>
        <h1>AJAX Calls with jQuery load()</h1>
        <div id="switcher">
        <p><a id="switcher" href="#">Click here to fetch HTML content</a></p>
        <p><a id="switcher-b" href="#">Click here to fetch HTML content</a></p>
        <p><a id="switcher-c" href="#">Click here to fetch HTML content</a></p>
        <p><a id="default" href="#">Reset</a></p>
        </div>

            <div id="result"></div>
</body></html>      

<!-- jQuery Code -->

            $(function(){

                $('#switcher a').click(function(event){
                    var bodyClass = this.id.split('-')[1];

                    $('body').removeClass().addClass('bodyClass');

                    switch(bodyClass){
                        case 'switcher':
                            $('#result').load('content.html #content');
                            break;
                        case 'switcher-b':
                            $('#result').load('content-b.html #content');
                            break;
                        case 'switcher-c':
                            $('#result').load('content-c.html #content');
                            break;
                        default:
                            $('#result').unload();
                    }
                    return false;
                });

            });

            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:04:35.457

```
 $('#switcher a').click(function(event){
                    var bodyClass = this.id;

                    $('body').removeClass().addClass('bodyClass');

                    switch(bodyClass){
                        case 'switcher':
                            $('#result').load('content.html #content');
                            break;
                        case 'switcher-b':
                            $('#result').load('content-b.html #content');
                            break;
                        case 'switcher-c':
                            $('#result').load('content-c.html #content');
                            break;
                        default:
                            $('#result').unload();
                    }
                    return false;
                }); 
```

只需删除`.split('-')[1]`您只需要在“-”之后获取 id 的第二部分，然后测试完整的 id。当然它总是默认的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:04:34.207

你的元素是它的内部 p 元素

```
$('#switcher p a').click(function(event){}); 
```

你也可以做类似的事情

```
$('a[id^=switcher ]').click(function(event){}); 
```

# ios - 当 contentOffset 不在原点时，UIScrollView 不会触发附加到子视图的 UIGestureRecognizers

> ID：12223348
> 
> 赞同：2
> 
> 时间：2012-08-31T22:49:12.143
> 
> 标签：ios, uiscrollview, uigesturerecognizer

**已解决：查看评论以了解问题所在**

我正在 UIScrollView 上实现一个子类，它将是一个水平滚动的子视图/“单元格”行。基本上是一个水平滚动的“表格视图”元素。UIScrollView 内容视图中的每个子视图/“单元格”都附加了一个 UIGestureRecognizer ，因此当有人触摸其中一个时， UIGestureRecognizer 将触发。

问题是，当一个人滚动离开 contentView 原点时，即 UIScrollView 返回一个 x 不是 0 的 contentOffset，任何从右侧滚动的新子视图/“单元格”都不会触发 UIGestureRecognizer感动。所有的子视图都有它们的 UIGestureRecognizer。

例如，假设我要显示一行 80x80 图标，而我的 contentSize 是 1600,80，一行 20 个图标。UIScrollView 为 320,80，因此它将显示 4 个图标。最初的 4 个图标是可触摸的，并且 UIGestureRecognizer 会在每个图标上触发。用户向左滚动，即新图标从右侧进入。这些新图标（子视图）被创建并添加到我在 UIScrollView 中使用的 contentView 中，方法与原始 4 相同。但是不在原始边界内的新图标（子视图）不会触发。我实现了我自己的子视图队列/出队，类似于表视图所做的事情，如果我滚动到 #15 位置，

但是，如果用户然后滚动回到开头，即使这些单元格是新添加到 contentView 中的，只要它们的边界在 UIScrollView 的原始框架和我用来在滚动内聚合的 UIView contentView 内，它们也是可触摸的看法。所以它似乎取决于每个子视图的框架以及它是否位于滚动视图的框架内。

一切都显示得很好——因为它滚动了 contentOffset 更改，我删除并添加了子视图。只是附加到每个子视图的 UIGestureRecognizers 没有触发并且位置取决于在滚动视图开始滚动之前处于其原始边界内。

我整天都在摸头，昨天半天）并将其缩小到不依赖于其他东西的位置。

我会发布代码，但不确定要发布什么，因为有很多代码运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:04:57.757

我将 UIView 子类化，将其添加到 UIScrollView 中，并且我的子类 UIView 的子视图的手势识别器没有触发 - 除了在任何滚动之前最初可见的手势识别器。

简单的解决方法是将 UIView 的子视图直接添加到 UIScrollView 而不是我的子类 UIView。在我做之前

```
 // add to view
    [self addSubview:imageView]; 
```

所以我用

```
 // add to view - we're adding to the superview directly
    [self.superview addSubview:imageView]; 
```

这样我仍然可以将填充我的 UIScrollView 的逻辑保留在一个单独的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:06:56.370

我有这里描述的相同症状。根据接受的答案，我没有删除中间视图并将子视图直接添加到滚动视图，而是通过调整中间视图的大小来工作。

以前，我一直在设置滚动视图的内容大小，并将子视图添加到中间视图，但没有调整中间视图的大小。通过正确设置中间视图的框架，我的手势识别器开始正常工作。

我认为通常子视图将有机会处理事件，然后将未处理的事件传递到链上。然而，在滚动视图中，事件最终从滚动视图沿着视图链向下移动，并且中间视图抛出超出其边界的事件，因此手势最初不起作用。

希望这对遇到此问题的其他人有所帮助，因为追踪起来很令人沮丧。

# php - 无法让 mysql_real_escape_string() 正常工作

> ID：12223349
> 
> 赞同：-2
> 
> 时间：2012-08-31T22:49:12.090
> 
> 标签：php, sql, security, sql-injection

为了防止 sql 注入，我尝试了这个：

```
$db = new myConnectDB();

$beerName = mysql_real_escape_string($beerName);
$beerID = mysql_real_escape_string($beerID);
$brewery = mysql_real_escape_string($brewery);
$style = mysql_real_escape_string($style);
$userID = mysql_real_escape_string($userID);
$abv = mysql_real_escape_string($abv);
$ibu = mysql_real_escape_string($ibu);
$breweryID = mysql_real_escape_string($breweryID);
$icon = mysql_real_escape_string($icon);

$beerName = addslashes($beerName);
$brewery = addslashes($brewery);
$brewery = str_replace('\'', '', $brewery);
$query3 = "INSERT INTO uniqueBeers (userID,beerID,beerName,beerStyle,beerBrewery,abv,ibu,breweryID,icon, brewIcon) VALUES ($userID, '$beerID', '$beerName', '$style' , '$brewery', '$abv','$ibu','$breweryID', '$icon', '$iconBrew')";
$db->query($query3); 
```

但我得到了各种各样的错误，比如：

> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：用户访问被拒绝
> 
> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：用户访问被拒绝

在阅读了错误并在网上进行了一些研究后，我注意到我可以通过一个连接，我尝试了这个：

```
$beerName = mysql_real_escape_string($beerName,$db); 
```

对于上述所有条目，但它也不起作用，所以现在我有点卡住了。

更新：

这是我的数据库信息取出的 myConnectDB 的内容

```
<?php

class myConnectDB extends mysqli{

    public function __construct($hostname='localhost',  
        $user='',
        $password='', 
        $dbname=''){
        parent::__construct($hostname, $user, $password, $dbname);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:01:51.587

您正在使用 mysqli 扩展来连接您的数据库（假设这是成功的），但您稍后在脚本中使用了 MySQL 函数。等效的 mysqli（过程）函数是[mysqli_real_escape_string($dbLink,$stringToEscape)](http://www.php.net/manual/en/mysqli.real-escape-string.php) - 注意额外的`i`（用于改进）。但是，你有一个 mysqli 对象，所以你应该使用面向对象的风格：

```
$beerName = $db->real_escape_string($beerName);  // OOP 
```

此外，一旦您更正了上述内容，则不需要以下代码行：

```
$beerName = addslashes($beerName);
$brewery = addslashes($brewery);
$brewery = str_replace('\'', '', $brewery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:55:16.987

请检查您的功能的顺序。您首先需要对您的数据库有有效的访问权限。该消息告诉您您没有，并且代码显示您发起`$db = new myConnectDB();`但您从未连接到数据库。

# c# - 带有 EF 的 ASP.NET 成员资格提供程序

> ID：12223353
> 
> 赞同：7
> 
> 时间：2012-08-31T22:50:08.610
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

我一直在使用 ASP.NET 会员提供程序，它可以很好地满足我的基本目的。我意识到的一件事是，它将一堆存储过程等安装到数据库中。

是否有 ASP.NET 成员的 EF 实现？还是会有？

我有一个即将到来的项目，我需要通过一些 GUI 扩展成员资格提供者的功能，并提供角色和授权。

此外，每次我使用它时，我的 web.config 中有两个连接字符串，一个用于 DbContext，一个用于应用程序服务，特别是用于成员资格提供者。为什么我不能只有一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:55:49.340

通用提供程序是您正在寻找的：http: [//nuget.org/packages/Microsoft.AspNet.Providers.Core](http://nuget.org/packages/Microsoft.AspNet.Providers.Core)

这些是在内部使用 EF Code First 5 实现的，一旦我们确保一切顺利，我们将公开内部 DBContexts。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:24:50.877

对于 ASP.NET 成员资格提供者和实体框架中的角色实现，需要在 EDMX 文件中导入 ASPNETDB（成员资格数据库）的所有视图。例如 vw_aspnet_MembershipUsers、vw_aspnet_Roles、vw_aspnet_UsersInRoles、vw_aspnet_Users 等...

然后会员资格将通过 EF 运行。因此，您可以使用以下功能提供 GUI。

这是控制器代码。例如

```
 // GET: /Membership/Edit/5

    public ActionResult Edit(Guid id)
    {
        var recordToEdit = (from r in _db.vw_aspnet_Users where r.UserId == id select r).First();
        return View(recordToEdit);
    }

    public ActionResult Index()
    {
        return View(_db.vw_aspnet_MembershipUsers.ToList());
    } 
```

现在，如何将 ASPNETDB 合并到现有数据库中，以便在 web.config 中只创建一个连接字符串。（你的问题：为什么我不能只有一个？）

这也可以使用以下步骤。

ASPNETDB.MDF 是会员提供者数据库，用于存储和从数据库中检索会员数据，在这里我们将了解如何创建会员提供者数据库。用于创建 Aspnetdb.mdf 的命令是 ASPNET_RegSQL.EXE

1.开始->程序->Microsoft Visual Studio 2005->Visual Studio 工具->Visual Studio 2005 命令提示符。在 Visual Studio 2005 命令提示符中键入 ASPNET_RegSQL.EXE

1.  将显示一个标题为“欢迎使用 Asp.Net Sql Server 向导”的向导。这里需要点击下一步

2.  接下来将显示带有“选择设置选项”的向导。现在我们需要选择设置选项“为应用程序配置 sql server 是默认设置”。选择您想要的，然后选择下一个。

3.  将显示一个带有“Select Sql Server Database”的窗口现在我们需要选择我们的 sql server 数据库。这里需要设置服务器、认证类型和数据库。如果选择默认名称“aspnetDb.mdf”将被选中。如果要修改现有数据库，请选择该数据库。

5.现在将显示一个确认，标题为“确认您的设置”。现在检查服务器名称和数据库名称，然后单击下一步。

1.  将显示一个带有“已创建或修改数据库”的窗口。现在点击完成

在上述步骤中要小心，您需要选择现有数据库，一些表（11+）、视图、成员资格和角色的存储过程将被添加到现有数据库中......

享受它....谢谢...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:16:56.543

MVC3 有 gui 成员管理系统，您可以查看或添加到您的项目中。

*   [Asp.Net MVC 会员入门工具包](https://github.com/TroyGoode/MembershipStarterKit)
*   [警卫](https://github.com/kahanu/Security-Guard/wiki/1.--Overview)
*   [更多的](http://nuget.org/packages?q=membership)

你可以和他们一起玩，看看他们是如何工作的。一旦您知道在哪里寻找并且您可以创建自己的，这很简单。

[Membership Class](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)和MembershipUser [Class](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)包含所有用户信息。例如，要取消批准用户，您可以执行以下操作：

```
MembershipUser user = Membership.GetUser("userName");
user.IsApproved = false;
Membership.UpdateUser(user); 
```

如果要删除用户，可以使用`Membership.DeleteUser("userName");`.

[Roles 类](http://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)具有所有与角色相关的信息。Like`Roles.GetUsersInRole("roleName")`将返回角色中所有用户的列表`roleName`。`Roles.CreateRole("roleName");`将创建一个角色，`Roles.DeleteRole("roleName");`并将删除一个角色。

如果您需要的不仅仅是默认值，您可以查看[实现成员资格提供程序](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)。

就拥有两个数据库而言，这不是必需的。`Aspnet_regsql`您可以使用该工具将所有 ASP.NET 表、存储过程等添加到您的数据库中。查看[使用 Aspnet_regsql.exe 安装数据库](http://msdn.microsoft.com/en-us/library/x28wfk74%28v=vs.100%29.aspx)。这将允许您只有一个数据库，因此您可以删除您的 asp.net 连接字符串，`Web.Config`然后更改`AspNetSqlMembershipProvider` `AspNetSqlProfileProvider` `AspNetSqlRoleProvider`可能还有其他人，以使用连接字符串到您的主数据库。

# shell - 通过命令行直接调用python文件

> ID：12223358
> 
> 赞同：1
> 
> 时间：2012-08-31T22:50:23.793
> 
> 标签：shell, windows-7, python-2.7

再会，

我遇到了一些 Python 应用程序在 Windows 7 中没有正确调用它们的依赖项的问题。这些应用程序将直接调用它们的 Python 依赖项，而不是作为 python.exe 的参数。与更改依赖链中的每个文件以首先调用 python 命令相反，有没有办法直接调用 Python 文件并正确传递参数，或者这是对 Python 的不正确调用？

注意：我将 python.exe 设置为 .py 文件的默认程序

```
C:\Users\***>ftype | findstr -i python
Python.CompiledFile="C:\Python27\python.exe" "%1" %*
Python.File="C:\Python27\python.exe" "%1" %*
Python.NoConFile="C:\Python27\pythonw.exe" "%1" %*

C:\Users\***>assoc | findstr -i python
.py=Python.File
.pyc=Python.CompiledFile
.pyo=Python.CompiledFile
.pyw=Python.NoConFile 
```

我编写了一个[基本参数解析 Python 脚本](http://pastebin.com/f9LjiQKD "基本参数解析 Python 脚本")，它将解析命令行参数并将其作为问候语打印回来。如果参数不存在，则会要求将其作为原始输入输入。首先显式调用 Python 而不这样做的结果打印在下面：

```
C:\Users\***\Desktop>python input.py --greeting="john"
john
The greeting is:  john

C:\Users\***\Desktop>input.py --greeting="john"
None
Give me the greeting. johnrom
The greeting is:  johnrom 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:36:33.163

前几次搜索都找不到答案，但我终于在另一个 stackoverflow 帖子中找到了答案。

从[帖子](https://stackoverflow.com/questions/2640971/windows-is-not-passing-command-line-arguments-to-python-programs-executed-from-t)：

> 我想我解决了这个问题。由于某种原因，注册表中有第二个位置（除了存储在 HKEY_CLASSES_ROOT\Python.File\shell\open\command 中的文件关联显示的位置）：
> 
> [HKEY_CLASSES_ROOT\Applications\python.exe\shell\open\command] @="\"C:\Python25\python.exe\" \"%1\" %*"
> 
> 这似乎是我系统上的控制设置。上面的注册表设置添加了“%*”以将所有参数传递给 python.exe（由于某种原因，它在我的注册表中丢失了）。

在这一行的末尾添加 '%*' 对我有用，尽管它似乎对每个人都不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T23:07:37.563

您还需要更正另一个注册表项。根据[这篇](https://stackoverflow.com/questions/2640971/windows-is-not-passing-command-line-arguments-to-python-programs-executed-from-t)文章，您需要编辑

```
HKEY_CLASSES_ROOT\py_auto_file\shell\open\command 
```

成为`"C:\PythonPath\python.exe" "%1" %*`

# java - Android：从某个类别获取所有 JSON 值

> ID：12223361
> 
> 赞同：2
> 
> 时间：2012-08-31T22:50:47.803
> 
> 标签：java, json

我想向您寻求有关解析 JSON 字符串的帮助。

我有一个 JSON 字符串，可以在这里看到：[http ://www.skbf-csre.ch/apps/iphone/rss/?displayFormat=JSON&language=french&function=newsList](http://www.skbf-csre.ch/apps/iphone/rss/?displayFormat=JSON&language=french&function=newsList)

例如，我想获取类别为“讨论文档”的所有标题。我不知道该怎么做。

我试过这样：

```
for (int i = 0; i < jsonArrayFrench.length(); i++) {
            JSONArray innerJsonArray = jsonArrayFrench.getJSONArray(i);
            JSONObject jsonObject = innerJsonArray.getJSONObject(0);
            if(jsonObject.getString("category").equals("Document de discussion"))
                subnewsFrench.add(jsonObject.getString("title"));
        } 
```

但我只得到第一个，而不是 3 个标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:55:51.830

我找到了解决方案，这是工作示例。

```
for (int i = 0; i < jsonArrayFrench.length(); i++) {
            JSONArray innerJsonArray = jsonArrayFrench.getJSONArray(i);
            for (int j=0; j < innerJsonArray.length(); j++)
            {
                JSONObject jsonObject = innerJsonArray.getJSONObject(j);
                if(jsonObject.getString("category").equals(category))
                    subnewsFrench.add(jsonObject.getString("title"));
            }   
} 
```

如果这可以帮助你，请享受。

# image - 将纹理文件包含到 collada 文件中

> ID：12223364
> 
> 赞同：5
> 
> 时间：2012-08-31T22:51:07.360
> 
> 标签：image, image-processing, three.js, blender, collada

我想将我的纹理图像文件包含到我的 collada 文件中。现在我有很多文件：.dae 本身和 .png 纹理文件。

但是我只想要一个文件：.dae，但其中包含纹理。

我可以以某种方式将 .png 图像存储在 .dae 文件本身中吗？可能吗？先感谢您！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-25T23:00:01.793

尽管前面的答案说了什么，但完全可以在 COLLADA 文件本身中嵌入图像。在`<init_from>`元素下，您会发现您可以使用`<ref>`元素指定文件名，或者，您可以指定`<hex format="PNG">`在其下可以将图像数据指定为十六进制编码的二进制八位字节序列。但是，由于使用十六进制编码，这比将图像文件包含在 .zae 存档（实际上是具有不同扩展名和特殊元数据文件的 .zip 文件）中的存储效率要低一些。

我知道这个问题已经有几个月了，但我不得不更正以前的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:12:13.707

您不能在 .dae 文件中嵌入图像。这样做的方法是将它们放在一个 zip 文件中。COLLADA 文件中纹理的路径应该相对于存档中 .dae 文件的位置。

zip 文件有时会使用扩展名 .zae 重命名。[COLLADA 1.5 规范](http://www.khronos.org/files/collada_spec_1_5.pdf)在第 20 页正式定义了这些，在此重复以完成：

> 档案包装
> 
> 在导入和导出时，DCC 工具必须支持 .zae 格式，这是一个或多个 .dae 文件（COLLADA 文档）和所有引用内容（纹理）的 zip 存档。存档必须包含一个名为 manifest.xml 的文件，这是一个包含`<dae_root>`元素的 XML 编码文件。此元素是指向 .dae 文件的相对 URI 的 UTF8 编码。如果 URI 包含一个片段，则指示的元素是应用程序加载 .zae 档案的起点。否则，该 `<scene>`元素将成为应用程序加载 .zae 档案的起点。如果这两个条件都不满足，则行为未定义。
> 
> 根据 URI 标准，.zae 文件中的 URI 可以使用来自存档根目录的相对路径引用存档中的任何其他文件。
> 
> 档案本身可能包括其他档案（zip、rar、kmz、zae）。引用嵌套存档中的文档的 URI（本身位于 .zae 存档中）将使用路径中嵌套存档的名称。
> 
> 例如：
> 
> ```
> ./internal_archive.zip/directory/document.dae#element 
> ```
> 
> 无法使用相对 URI 引用存档之外的内容，但使用绝对 URI 引用内容是有效的，例如：
> 
> ```
> file:///other_directory/other_document.dae#element 
> ```

# java - 为什么我不能使用 String.format() 来格式化来自 Integer.toBinaryString() 的字符串？

> ID：12223365
> 
> 赞同：2
> 
> 时间：2012-08-31T22:51:07.517
> 
> 标签：java, string, string-formatting

`inttime[]`是一个已经包含个位数整数值的数组。第一个`for`循环试图将每个整数转换为二进制字符串并将其存储到字符串数组`bintime[]`中。这部分工作正常，但是当我尝试运行下一个 for 循环时，出现非法格式转换错误。

```
for(int j = 0; j < inttime.length; j++){
bintime[j] = Integer.toBinaryString(inttime[j]);
}

for(int a = 0; a < bintime.length; a++){
System.out.println(String.format("%04d",bintime[a]));
} 
```

`bintime[]`如果是`String`数组，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T22:53:42.397

如果`bintime`数组成立`Strings`- 正如你所说并且你正在分配给数组`Integer.toBinaryString`- 你会看到`format`尝试打印`String`as的异常`int`：`%d`格式需要一个`int`，而不是 a `String`。

如果您尝试填充以`String`2 为基数的表示形式，请使用以下内容：

```
System.out.println(
  String.format("%4s", Integer.toBinaryString(inttime[idx])).replace(' ', '0')); 
```

`4`格式字符串中的 表示 的最小*宽度*，`String`较短的字符串将用空格填充。

# methods - 自 __init__ 覆盖

> ID：12223368
> 
> 赞同：1
> 
> 时间：2012-08-31T22:52:04.527
> 
> 标签：methods, initialization, python-2.7, self, overwrite

我在初始化对象以及覆盖我不想覆盖的数据的方法时遇到问题。

如果我的术语不正确，我深表歉意，因为我在工作中使用多种编码语言，并且在来回弹跳时往往会忘记一些术语。

例子：

```
class SR(object):
        def __init__(self,arg1):

            ...some code with arg1...

            ...import some stuff into a,b,c,d,e...

            self.A = array([a,b,c,d,e)]

            print self.A

            self.B = self.func1(self.A)

            print self.A
            print self.B

        def func1(self,arg2):

            arg2[:,:] += ...some math...
            arg2[:,:] *= ...more math...

            arg3 = ...total of some stuff in arg2...

            return arg3

        def func2(self,arg4):
            ...use func3...
            ...use func1...
            return arg5

        def func3(self,arg4):
            return arg6

        def func4(self,arg7):
            ...output some stuff...                   

instance = SR(2012)

data = {...numbers...}
X = instance.func2(data)
instance.func4('label1')

data = {...numbers...}
X = instance.func2(data)
instance.func4('label2')

data = {...numbers...}
X = instance.func2(data)
instance.func4('label3')

data = {...numbers...}
X = instance.func2(data)
instance.func4('label4')

data = {...numbers...}
X = instance.func2(data)
instance.func4('label5') 
```

印刷：

```
[a,b,c,d,e]
[a,not_b,not_c,d,not_e]
[sum-of-a-not_b-not_c-d-not_e] 
```

问题：

打印的第二行应该看起来像第一行。我希望能够更改 self.A 中的值，但我不想永久更改它们。我认为 func1 只会接收到 self.A 的引用或指针，但它似乎覆盖了 self.A。

我该如何解决？

请记住，我需要使用 func1 来永久更改每个实例中的数据，而不是在 self.A 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:01:28.913

问题是您的`func1`方法修改了它的参数：

```
 def func1(self,arg2):
        arg2[:,:] += ...some math...
        arg2[:,:] *= ...more math... 
```

您可能有充分的理由这样做，但正如您所经历的那样，它可能会产生一些意想不到的副作用。那么你有两个选择：

*   修改`func1`，以便您不修改适当的参数。例如：

    ```
    def func1(self, arg2):
        arg2_copy = arg2.copy()
        arg2_copy[:,:] += .... 
    ```

*   将参数的副本传递给`func1`：

    ```
    self.B = self.func1(self.A.copy()) 
    ```

我使用了一种`.copy`方法，因为我认为`self.A`是`ndarray`. 如果不是这样，您将不得不使用适当的技巧（例如制作另一个列表或另一个字典......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:57:57.510

如果您不想更改 self.A，那么当您调用 func1 时，您应该通过：

```
self.func1(list(self.A)) 
```

# c# - 如何反序列化具有属性的元素

> ID：12223369
> 
> 赞同：4
> 
> 时间：2012-08-31T22:52:15.847
> 
> 标签：c#, restsharp

我正在使用 RESTSharp 使用 RESTful Web 服务。XML 元素之一如下所示：

```
<temp_c units="°C">7.9</temp_c> 
```

而C#类POCO如下：

```
public class Test
{
    public TempC temp_c { get; set; }
}

public class TempC
{
    public string units { get; set; }
    public string value { get; set; }
} 
```

当我使用 RESTSharp 时，我得到的`TempC`对象是单位而不是实际值；例如 7.9。该值为 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:34:21.780

通过将属性值更改为值来解决问题。

更详细的示例在这里： [https ://github.com/restsharp/RestSharp/wiki/Deserialization](https://github.com/restsharp/RestSharp/wiki/Deserialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T12:10:54.380

You need to put [XmlText] annotation in that case

```
public class TempC
    {
        public string units { get; set; }

        [XmlText]
        public string value { get; set; }
    } 
```

This will tell De-serializer to get that from body of tag.

Reference link : [https://groups.google.com/forum/#!topic/microsoft.public.dotnet.xml/loj2CBoyCnE](https://groups.google.com/forum/#!topic/microsoft.public.dotnet.xml/loj2CBoyCnE)

# java - JFrame.revalidate() 并产生灰屏 - 混乱

> ID：12223370
> 
> 赞同：1
> 
> 时间：2012-08-31T22:52:21.477
> 
> 标签：java, swing, graphics, paint, java-2d

我有一个方法`JPanel`

```
private void paintScore(Graphics2D g) {
    Font scoreFont = new Font("Arial", Font.PLAIN, 72);
    g.setFont(scoreFont);
    FontMetrics scoreFontMetrics = g.getFontMetrics();
    g.drawString("" + playerOneScore, SCREEN_WIDTH / 2 - 30
            - scoreFontMetrics.stringWidth("" + playerOneScore),
            SCREEN_HEIGHT / 2);
    g.drawString("" + playerTwoScore, SCREEN_WIDTH / 2 + 30,
            SCREEN_HEIGHT / 2);

} 
```

当我调用此方法时，它似乎第一次起作用。然后，在那之后它再也不会起作用了。

如果我注释掉该方法的调用，它始终有效。

但是，如果我调用`JFrame's revalidate()`方法，该程序也始终有效。

我不确定这里发生了什么。

如果需要，我可以发布完整的源代码。

提前致谢

* * *

这是其余的代码。

主 JPanel 扩展类。

```
 import java.awt.Color;
       import java.awt.Font;
       import java.awt.FontMetrics;
       import java.awt.Graphics;
       import java.awt.Graphics2D; 
       import java.awt.event.MouseEvent;
       import java.awt.event.MouseMotionListener;
       import java.awt.image.BufferedImage;

       import javax.swing.JFrame;
        import javax.swing.JPanel;

     public class GamePanel extends JPanel implements Runnable, MouseMotionListener {

private static final int SCREEN_WIDTH = 640;
private static final int SCREEN_HEIGHT = 480;
private static final int INDENT = 20;

private int playerOneScore = 0;
private int playerTwoScore = 0;
private ImageEntity playerOne = new ImageEntity("Images/bouncer.bmp");
private ImageEntity playerTwo = new ImageEntity("Images/bouncer.bmp");

private int mouseX = 0;
private int mouseY = 0;

private BufferedImage gameScreen = new BufferedImage(SCREEN_WIDTH,
        SCREEN_HEIGHT, BufferedImage.TYPE_INT_RGB);

Graphics2D gameScreenGraphics = gameScreen.createGraphics();

public GamePanel() throws Exception {
    paintBackground(gameScreenGraphics);
    paintScore(gameScreenGraphics);
    paintBouncers(gameScreenGraphics);

}

public void run() {
}

public void mouseMoved(MouseEvent m) {
    mouseX = m.getXOnScreen();
    mouseY = m.getYOnScreen();
}

public void mouseDragged(MouseEvent m) {
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(gameScreen, 0, 0, this);
}

private void paintBackground(Graphics2D g) {
    g.setColor(Color.BLACK);
    g.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);
    g.setColor(Color.WHITE);
    for (int i = 0; i < 10; i++) {
        g.fillRect(SCREEN_WIDTH / 2 - 5, i * SCREEN_HEIGHT / 10, 10,
                (SCREEN_HEIGHT / 10) - 10);
    }
}

private void paintScore(Graphics2D g) {
    Font scoreFont = new Font("Arial", Font.PLAIN, 72);
    g.setFont(scoreFont);
    FontMetrics scoreFontMetrics = g.getFontMetrics();
    g.drawString("" + playerOneScore, SCREEN_WIDTH / 2 - 30
            - scoreFontMetrics.stringWidth("" + playerOneScore),
            SCREEN_HEIGHT / 2);
    g.drawString("" + playerTwoScore, SCREEN_WIDTH / 2 + 30,
            SCREEN_HEIGHT / 2);

}

private void paintBouncers(Graphics2D g) {
    g.drawImage(playerOne.getImage(), playerOne.getX(), playerOne.getY(),
            this);
    g.drawImage(playerTwo.getImage(), playerTwo.getX(), playerTwo.getY(),
            this);
}

public static void main(String[] args)throws Exception {
    JFrame mainPane = new JFrame("Pong - Mrinank Sharma");
    mainPane.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
    mainPane.setVisible(true);
    mainPane.setResizable(false);
    GamePanel gp = new GamePanel();
    mainPane.add(gp);
    mainPane.revalidate();
}

  } 
```

ImageEntity 是一个类，它只是 BufferedImage 的包装器。

再次感谢各位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:53:45.633

尝试这样做：

```
public GamePanel() {
    paintBackground(gameScreenGraphics);
    paintScore(gameScreenGraphics);
    paintBouncers(gameScreenGraphics);
    addMouseMotionListener(this);
    repaint();
} 
```

您忘记添加鼠标运动侦听器，并重新绘制面板。重新验证（）；在这种情况下没有用。

# java - 从没有网址的主页下载文件。使用 java

> ID：12223374
> 
> 赞同：0
> 
> 时间：2012-08-31T22:53:20.033
> 
> 标签：java, url, download

我需要能够使用 Java 从网页下载文件。问题是我似乎无法找到该文件的确切 URL。示例：www.something.com/file.xls。

我需要的文件可以在这个 url 上找到：[http](http://www.nasdaqomxnordic.com/aktier/Historiska_kurser/?Instrument=SSE837#divId) ://www.nasdaqomxnordic.com/aktier/Historiska_kurser/?Instrument= SSE837#divId 如果向下滚动一点，您可以看到 Excel 徽标。

如果有人有一个图书馆可以帮助我解决这个问题，当然还有我的问题中的任何其他类型的指导，我会很高兴:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:34:31.073

您的问题没有通用的解决方案——JavaScript 可用于混淆什么是链接，什么不是链接以及链接的去向。但是，如果您对抓取特定页面感兴趣，则可以对其进行逆向工程。

例如，在您链接的页面上，Excel 徽标具有 ID `exportExcel`。搜索`#exportExcel`最终会导致这个代码片段：

```
if(to.match(/^\d{4}[-]\d{2}[-]\d{2}$/) && from.match(/^\d{4}[-]\d{2}[-]\d{2}$/)) {
    var query = webCore.createQuery( webCore.marketAction.getDataSeries, {}, {
            FromDate: from,
            ToDate: to,
            Instrument: webCore.getInstrument(),
            hi__a : "0,1,2,4,21,8,10,11,12,9",
            OmitNoTrade: "true",
            ext_xslt_lang: currentLanguage,
            ext_xslt_options: "," + $("#adjustedId:checked").val() + ",", //$("#unadjustedId:checked").val() + ",",
            ext_xslt: "hi_table_shares_adjusted.xsl",
            ext_contenttype : "application/ms-excel",
            ext_contenttypefilename : "_" + webCore.getInstrument() + ".xls",
            ext_xslt_hiddenattrs: ",ip,iv,",
            ext_xslt_tableId: "historicalTable"
        }
    );
    $("#excelQuery").val( query );
    $("#excelForm").attr( "action", webCore.proxyURL ).submit();
} 
```

那是建立一个带有某种隐藏表单提交的 URL。通过对源代码进行试验和跟踪，您应该能够在 Java 代码中复制它正在执行的操作以生成所需的 URL。您需要熟悉 JavaScript 和 JQuery。

另一种方法是在查看网络流量（例如通过[Wireshark](http://www.wireshark.org/)）的同时单击下载链接，并观察浏览器请求的构造 URL。您将需要一些 HTTP 知识。

# .htaccess - .htaccess rewriterule 不适用于特定页面

> ID：12223379
> 
> 赞同：0
> 
> 时间：2012-08-31T22:53:57.047
> 
> 标签：.htaccess, pattern-matching, rewrite

我有一个重写规则让我发疯。规则是：

```
RewriteCond %{QUERY_STRING} c=8
RewriteRule ^catalogue/index\.php$ http://www.domain.co.uk/accessories/? [NC,L,R=301] 
```

这不适用于：

```
http://www.domain.co.uk/catalogue/index.php?c=8 
```

但这会起作用：

```
RewriteCond %{QUERY_STRING} c=8
RewriteRule ^(.*)$ http://www.domain.co.uk/accessories/? [NC,L,R=301] 
```

但是我不能使用这个脚本，因为我需要指定目录/index.php 以免重写其他页面。请帮忙 ：（

* * *

以下是我之前存在的几行代码：

```
Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.(tpl|ini|log)">
Order deny,allow
Deny from all
</FilesMatch>

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you     folder it does run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule sitemap.xml /index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

### Additional Settings that may need to be enabled for some servers 
### Uncomment the commands by removing the # sign in front of it.
### If you get an "Internal Server Error 500" after enabling any of the following settings, restore the # as this means your host doesn't allow that.

# 1\. If your cart only allows you to add one item at a time, it is possible register_globals is on. This may work to disable it:
# php_flag register_globals off

# 2\. If your cart has magic quotes enabled, This may work to disable it:
# php_flag magic_quotes_gpc Off

# 3\. Set max upload file size. Most hosts will limit this and not allow it to be overridden but you can try
# php_value upload_max_filesize 999M

# 4\. set max post size. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value post_max_size 999M

# 5\. set max time script can take. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_execution_time 200

# 6\. set max time for input to be recieved. Uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:35:07.507

只是让人们知道解决方案是什么。

这些规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

请求时被应用`/catalogue/index.php?c=8`，并且 URI 被重写到路由器：`/index.php?_route_=/catalogue/index.php`。这使得您的目录规则没有得到应用。您需要将它们移到路由规则之上：

```
RewriteCond %{QUERY_STRING} c=8
RewriteRule ^catalogue/index\.php$ http://www.domain.co.uk/accessories/? [NC,L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

这样重定向就可以在它被抛出到路由器之前发生。

# mysql - 在单个资源中连接到多个 mysql 数据库

> ID：12223383
> 
> 赞同：1
> 
> 时间：2012-08-31T22:54:18.263
> 
> 标签：mysql, tomcat, rds

我正在使用 RDS，并且有一个我写入的主数据库和两个读取复制数据库

我正在使用 tomcat jdbc 并通过以下方式连接到数据库

现在我需要连接到第二个读取复制数据库但不想定义第三个资源，我想要一个连接到两个数据库的读取资源

以下是当前配置（Web 应用程序中的 context.xml）

```
<Resource type="javax.sql.DataSource"
            name="jdbc/iomdb"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://mydbinstance.blah:3306/mydb?user=user&amp;password=p"
            maxActive="4"/>

<Resource type="javax.sql.DataSource"
            name="jdbc/iomdbread"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://readreplicaiom.ff.com:3306/mydb?user=user&amp;password=p"
            maxActive="4"/> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:03:16.327

也许您可以使用[MySQL 代理](http://dev.mysql.com/downloads/mysql-proxy/)代理对应用程序不可见的两个读取实例的请求？

# magento - Magento 模块适用于本地主机，但不适用于远程主机

> ID：12223384
> 
> 赞同：0
> 
> 时间：2012-08-31T22:54:19.977
> 
> 标签：magento

我知道这是一个愚蠢的问题，但我已经彻底调查了所有文件名、目录和类名上的所有大写和小写。一切似乎都已经正确。但是，在远程主机上以某种方式未加载块文件 .phtml。布局 xml 已经加载，因为我可以看到 CSS 和 JS 文件已加载。

仅供参考，管理后端完美运行，只有未加载的前端块。不知道为什么前端块文件没有加载到远程主机上。

我给了我的模块名称，类似于 ModuleABCD。连续几个大写字母可以吗？提前感谢您的任何回复。

```
<?xml version="1.0"?>
<layout>
    <modulename_index_index>
    <reference name="head">
    <action method="addItem"><type>skin_css</type><name>modulename.css</name></action>
          <action method="addItem"><type>skin_js</type><name>modulename.js</name></action>
    </reference>
    <reference name="content">
          <block type="modulename/modulename" name="modulename" template="modulename.phtml"/>
    </reference>
    </modulename_index_index>
</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:51:25.713

鉴于您的布局文件似乎正在加载，我建议您在一个文件中执行以下操作，您可以在[http://site.com/demo.php](http://site.com/demo.php)`./demo.php`从浏览器运行该文件：

```
<?php

ini_set('display_errors',true);

include 'app/Mage.php';

Mage::setIsDeveloperMode(true);
Mage::app();

Zend_Debug::dump(Mage::getBlockClassName('classgroup/blockname');

Zend_Debug::dump(Mage::app()->getLayout()->createBlock('classgroup/blockname')); 
```

# c# - C# .net 2010 中的 FSO

> ID：12223385
> 
> 赞同：1
> 
> 时间：2012-08-31T22:54:42.457
> 
> 标签：c#, .net

我添加了参考“Microsoft Scripting Runtime”，并声明：

```
using Scripting; 
```

然后，我试图测试它，我做了一个函数：

```
private void showmessage(string path)
{
FileSystemObject fso;
label1.Text = fso.GetFileName(path); 
} 
```

我只是在测试它是否有效，但出现错误“使用未分配的局部变量”

对不起，如果这很傻，请帮我解决这个问题。上帝祝福你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:59:33.640

您需要在使用之前初始化 FileSystemObject。

尝试

```
FileSystemObject fso = new FileSystemObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:00:03.767

试试这个

```
label1.Text = System.IO.Path.GetFileName(path) 
```

在 .NET 中，您使用 System.IO 命名空间访问文件系统。

# mysql - 跨服务器，标准 SQL 生成逗号分隔列表

> ID：12223388
> 
> 赞同：5
> 
> 时间：2012-08-31T22:54:57.670
> 
> 标签：mysql, sql, sql-server, sqlite, postgresql

我一直在寻找，但找不到任何东西。是否有一种符合 SQL 标准的方式来产生像[这个](http://sqlandme.com/2011/04/27/tsql-concatenate-rows-using-for-xml-path/)TSQL 这样的输出？我想要一个在 sqlite、mysql、postgresql 或 sql server 上也能正常工作的查询。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:20:13.500

据我了解您的问题，您正在寻找一种跨数据库方法将列中的值聚合到逗号分隔的列表中。据我所知，没有标准的聚合可以做到这一点（在 PostgreSQL 上，在添加一些新聚合之前，我正在为此编写自己的聚合）。

您可以做的最好的事情是选择列表并在您的应用程序中处理它，但是当您必须编写跨数据库可移植的代码时就会发生这种情况。

您将遇到的第二个问题是，虽然可以向其中一些数据库添加扩展来管理此问题，但不可能对所有这些数据库进行扩展。

所以不，不可能。您的选择是：坚持使用一两个支持自定义聚合和填充的数据库，在一个数据库上构建基于 SP 的界面，或者只选择列表并在您的应用程序中处理它。

# c++ - OO 中的 C++ 隐式转换

> ID：12223389
> 
> 赞同：1
> 
> 时间：2012-08-31T22:54:59.327
> 
> 标签：c++, oop, casting, implicit

我的代码：

```
class myAbstractClass{

}

class dev1: public myAbstractClass{

}

class dev2: public myAbstractClass{
  public:
  myAbstractClass* temp;
  dev2(myAbstractClass* tmp) { temp=tmp; }
}

int _tmain(){
  dev1 d;
  dev2 derived2(d); 
```

这个怎么做？

错误 C2040：“v”：“dev2”与“myAbstractClass *”的间接级别不同错误 C2512：“dev2”：没有适当的默认构造函数可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:19:18.640

Since the constructor takes a pointer, pass the address-of object!

```
int _tmain()
{ 
      dev1 d; 
      dev2 derived2(&d); // &d
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:42:51.703

要转换为基址的指针或引用，基址必须是`public`. 默认情况下，继承是`private`在使用`class`关键字时。

# asp.net - 如何让用户选择过去的信用卡作为支付方式？ASP.NET

> ID：12223391
> 
> 赞同：2
> 
> 时间：2012-08-31T22:55:24.890
> 
> 标签：asp.net

我将用户在结帐期间输入的信用卡详细信息存储在数据库中。

如果用户有多个与用户关联的信用卡，我如何向用户显示这些详细信息，并允许他选择一张或输入新的信用卡并结帐？

我知道 gridview 可以显示选项。我应该在 gridview 中添加单选按钮并朝那个方向前进，还是应该动态添加表格行？

哪个是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:52:41.840

您不需要存储完整的卡号，只需存储最后 4 个。

一些支付网关可以通过重用客户之前的支付详细信息（由他们的交易 ID 标识）来提供支付选项。

基本上，您需要存储卡号的最后 4 位数字和上一个订单的交易 ID。您将其传递给支付提供商。

即使您存储了完整的详细信息（卡号、cv2、帐单地址、安全代码、到期日期等），如果卡已注册 3D Secure，您也可能无法创建交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:31:38.007

一些商家还允许您设置客户钱包。这是您可以用于未来付款的唯一 ID。

如果您决定存储完整的 cc#，我建议对其进行加密。如果别人得到了真正的抄送名单，你所有的客户都会很生气。

但要回答你的问题，我会允许客户给他们使用的卡一个名字。然后在带有 rb 的 gv 中显示名称列表。

# c# - 以 Windows 形式播放 youtube 视频

> ID：12223392
> 
> 赞同：2
> 
> 时间：2012-08-31T22:55:43.087
> 
> 标签：c#, .net, youtube, windows-forms-designer

我是 dot net 的新手，有一项任务要完成。我不知道如何开始。

我的问题：我的 Windows 窗体上应该有一个 youtube 视频。当用户单击播放按钮时，表单应该被刷新并在视频播放时打印“1 person 查看”。同样用户可以重复这个过程：他可以再次点击播放按钮，它会被刷新。现在这一次您将再次看到视频以及“2 人已查看”的文字。基本上，它保持点击播放按钮的计数器。

我在 Google 上找不到任何关于此的内容。我不知道如何将该视频嵌入到表单中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T23:31:36.850

1.  向表单添加`WebBrowser`控件
2.  检索`embed`视频的代码
3.  将视频加载到`WebBrowser`

例子 ：

```
 const string page = "<html><head><title></title></head><body>{0}</body></html>";
 webBrowser1.DocumentText = string.Format(page, "<iframe width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/yg2u_De8j5o\" frameborder=\"0\" allowfullscreen></iframe>"); 
```

至于计算观看次数：每次用户单击“查看”按钮时，加载视频然后增加您的计数器（这应该很容易）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T23:25:48.893

看这里[将 youtube 添加到 winform](http://www.youtube.com/watch?v=kg-z8JfOIKw)。只需使用他们的示例。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:21:21.357

您可以简单地下载 swf 并在表单中播放。为此，您可以从[这里](https://stackoverflow.com/questions/1439056/how-to-play-flash-in-wpf-application)开始。

对于计数器，您是否只想计算按下按钮的次数？那是微不足道的。

您想要 Youtube.com 显示的实际计数吗？您也许可以筛选源代码以获取它，尽管我不知道直接 swf 下载是否算作 Youtube 的播放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:59:10.120

您可能应该只跟踪应用程序或数据库中的播放点击，并使用 Web 浏览器控件导航到您需要的页面。

# cpu - 之间的事务大小和延迟：CPU 和 RAM、RAM 和 PCIE2.0 16x 设备

> ID：12223395
> 
> 赞同：1
> 
> 时间：2012-08-31T22:56:31.723
> 
> 标签：cpu, ram, latency, pci-e

以字节为单位的最小事务大小是多少，时钟周期或纳秒的延迟是多少？
为了：

1.  访问 CPU（桑迪/常春藤桥）到 RAM
2.  通过 PCIE 2.0 16x 在 RAM 和设备之间进行 DMA 访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:00:41.863

回答问题（部分）

**2：**[这里](http://www.hypertransport.org/docs/wp/Low_Latency_Final.pdf)的论文中有一些（芯片到芯片）数字（最后，表1和表2）

另请注意，延迟还取决于 PCIE 数据包的大小。

更复杂的是，操作系统和显卡驱动程序也引入了一些延迟（读/写内存、用户内核土地切换时间等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:27:13.953

最小传输大小为 0，这对双方都没有任何影响。对于数据，最小传输大小为 1 个双字（4 字节）

# css - django-mediagenerator CSS 错误

> ID：12223396
> 
> 赞同：1
> 
> 时间：2012-08-31T22:56:47.703
> 
> 标签：css, django, web-applications, django-media, django-mediagenerator

我正在使用 django-generator，它运行得相当好。

但是，在我的一些机器上，它似乎已经停止在 CSS 文件中翻译 url 值。在某些页面上，CSS 文件如下所示：

```
background-image: url("../img/bg_icongray.png"); 
```

在其中一些上，它们看起来像这样：

```
background-image: url("/media/img/logo_large.png?version=f764f4a8b01b957a45898cd7c065fcd61718b5ed"); 
```

有时只有页面上的某些元素可以工作，有时没有。

MEDIA_DEV_MODE 和 DEBUG 都设置为 True，DEV_MEDIA_URL 和 PRODUCTION_MEDIA_URL 都设置为 '/media/'。在不同的机器上也得到不同的结果——行为似乎完全随机。

我已经核对了我所有的 *.pyc 文件并仔细检查了我的设置。

关于从哪里*开始*寻找的任何建议？

* * *

编辑：如此处所述[，](https://bitbucket.org/Wilfred/django-mediagenerator/issue/48/in-development-mode-relative-url-in-css)这与 django 1.4 以及 runserver 如何处理线程有关。如果 runserver 使用 --nothreading 选项运行，这不再是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:35:40.557

如果您在 Chrome 上 - 使用 Tools-Developer 控制台 - 并找到您资源的实际 url，什么似乎没有加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:50:11.697

尝试设置`MEDIA_ROOT`您的图像所在的位置，然后在您的 CSS 文件定义中使用：

```
{{ MEDIA_URL }}logo.png 
```

还要确保您`STATIC_URL`的设置正确。

**编辑：**也尝试看看这个类似的问题：[little link](https://stackoverflow.com/q/8023282/364869)。

# jquery - 每张幻灯片内都有链接的滑块

> ID：12223397
> 
> 赞同：1
> 
> 时间：2012-08-31T22:56:56.110
> 
> 标签：jquery

我正在尝试制作一个带有 5 个内容幻灯片的滑块，每个幻灯片在一个 div 中以个性化每张幻灯片。

我通常在 jquery 中对此进行编码没有问题，但我现在的问题是，我需要每张幻灯片都有指向滑块其余部分的链接，而不是 prev-next 导航。所以在加载页面上显示第一张幻灯片，该幻灯片里面有幻灯片 2、3、4 和 5 的链接，依此类推

谁能帮我这个？

谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:04:47.937

没有看到你的 HTML / 图像 /css 我只能建议这么多，但我的第一个解决方案是这样的：（部分伪代码，因为你似乎了解 jQuery 并且只需要逻辑，但如果你想要它就说写得更完整:))

```
$('a.linkToOtherSlides').click(function(){
    slideNumber = $(this).val();
    imageWidth = $(this).parents(.theSliderImage);
    $(this).parents('.theSliderContainer').css('left',slideNumber * imageWidth);
}); 
```

所以这里发生的是链接的值（你应该把它给幻灯片编号，我是幻灯片 4 的链接，val 为 4）然后它会像往常一样简单地更改滑块容器的左侧值将通过将 slideNumber 乘以 imageWidth。

只是第一个想法，希望我们可以通过工作得出更好的结论。

# ios - 有没有像 XCode 的 MonoTouch 的 OpenGL 帧捕获之类的东西？

> ID：12223401
> 
> 赞同：1
> 
> 时间：2012-08-31T22:57:27.843
> 
> 标签：ios, xcode, xamarin.ios, opengl-es-2.0, xamarin

XCode 的“帧捕获”功能从 XCode 4.2 开始就在这里。

MonoTouch 中是否有类似的功能，或者是否可以在 MonoTouch 项目中利用 XCode 的功能？

@Xamarin 人：如果没有，有没有计划支持这样的事情？

# php - 保护具有数据库写权限的文件

> ID：12223403
> 
> 赞同：0
> 
> 时间：2012-08-31T22:57:40.163
> 
> 标签：php, javascript, jquery, mysql

关于安全问题，我有一个巧妙的问题。

*   如何保护目录和该目录中的文件免受黑客攻击？

案子：

*   网站上所有连接/登录到具有写入权限的 dBase 的文件都存储在一个目录中
*   dBase 上的所有其他请求都是只读的。（即网页请求）
*   一切都是用 PHP 和 jQuery 编写的。
*   （因此，这个问题也悬而未决：你如何保护主 .js 文件的下载？）

对此的解决方案是 - 经过广泛的研究 - 我仍然不清楚。

我想知道您是否对此有任何想法。而且我知道在此阅读您的想法会非常有用:-)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:24:30.623

有几种方法可以解决这个问题。第一种方法是在您不希望任何人看到的目录中使用 .htaccess 文件。像下面这样的东西应该可以工作：

```
order allow,deny
deny from all 
```

更好的方法是将凭据存储在 www 根目录之外的服务器上的单独文件中。

```
<?php
$dbUsername = 'mywebapp';
$dbPassword = 'jlsdkfj94r493340rfj30f';
?> 
```

然后只需将其包含在您的主代码中

```
<?php
include '/path/to/secure/location/vars.php';
?> 
```

这也让您更严格地限制对该文件的访问。例如，我不会将我的密码添加到源代码管理中。

您关于网站一般安全性的问题的第二部分实际上取决于您需要的安全性。Javascript 文件总是需要客户端可访问的，并且这些文件中的任何内容都可以毫不费力地取出和读取。

我的快速网络安全提示是：

*   清理/参数化从用户到数据库的任何输入
*   从公共文件中删除密码和敏感信息
*   为您的网络服务器提供最新的安全补丁
*   始终使用完善且经过测试的密码库。永远不要尝试自己实现
*   对命中数据库的任何密码进行加盐和哈希处理

网络和计算机安全是一门完整的学科，因此如果您的风险很高，您可能需要寻找专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:01:31.490

如果你想保护它们不被阅读，你可以使用 ioncube 对它们进行编码。但是有了一个安全的网站，您无需考虑保护您的文件，因为没有人可以访问这些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:02:35.950

这种课程的安全性有许多不同的方法。但是一个简单的基本安全方法可能是拒绝目录列表到文件夹，然后创建编码文件名并将它们放在 dBase 中。

# jquery - Rails form_tag 远程 json

> ID：12223407
> 
> 赞同：0
> 
> 时间：2012-08-31T22:58:05.193
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我的表格是这样设置的

```
= form_tag stocks_path, method: 'get', remote: true, class: "form-horizontal" do
      %legend Define Your Universe
      .control-group
        = label_tag :min_cap, "Min Cap", class: "control-label"
        .controls
          = text_field_tag :min_cap, params[:min_cap], size: 5, maxlength: 6, class: "input-small"
      .control-group
        = label_tag :max_cap, "Max Cap", class: "control-label"
        .controls
          = text_field_tag :max_cap, params[:max_cap], size: 5, maxlength: 6, class: "input-small"
      .control-group
        = label_tag :size, "Size", class: "control-label"
        .controls
          = text_field_tag :size, params[:size], size: 5, maxlength: 2, class: "input-small"
      .form-actions
        = submit_tag "Submit", class: "btn btn-primary" 
```

然后我在我的控制器中有：

```
respond_to do |format|
      format.html
      format.js { render :json => {:stocks=>@stocks, :stats => @stats}
      # By default, json method does not know about extra none activerecord attributes!
    end 
```

@stats 是一个数字数组。最后在我的javascript中，我有

```
 $("form").bind 'ajax:success', (xhr, data, status) -> 
    stocks = $.parseJSON(data.stocks) 
```

然后这里的问题是 data.stocks 没有将股票对象作为 json 获取。在我的控制台中，我在该行放置了一个断点`stocks = $.parseJSON(data.stocks)`。但是，回调函数永远不会被调用，所以我真的不明白发生了什么。但我从网络选项卡（在 chrome 中）看到该表单确实已提交并返回了所需的 javascript 对象。我想知道为什么没有真正调用成功的回调函数。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T19:58:21.967

好的，经过所有的努力。我想出解决办法。这很奇怪，我仍然找不到很好的解释。我将渲染线更改为`format.js {render :json => {:stocks=>@stocks, :stats => @stats}, :content_type => 'application/json'}`. 我试过`format.json`了，但响应头只是一直返回 text/html 而不是 javscript。但`format.js`适用于附加选项`:content_type =>'application/json'`。任何解释将不胜感激。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:02:22.990

改为使用`format.json { etc... }`；检查响应标头的差异。

# railstutorial.org - 如何让测试通过第 8.1.1 节中的测试？

> ID：12223413
> 
> 赞同：0
> 
> 时间：2012-08-31T22:59:12.447
> 
> 标签：railstutorial.org

当教程说它应该通过时，我在[第 8.1.1 节中的测试失败了。](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-sessions_controller)[这里](https://stackoverflow.com/questions/11142550/ruby-on-rails-michael-hartl-failing-test-8-1-1)有一个类似的封闭问题。我的问题与那个不同，因为我的测试产生了 17 次失败而不是 15 次。

```
Failures:

  1) Authentication signin page 
     Failure/Error: before { visit signin_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x529d880>:0x52a3970>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/authentication_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  2) Authentication signin page 
     Failure/Error: before { visit signin_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x529d880>:0x48f2238>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/authentication_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  3) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_3::Nested_1:0x44ae8e0>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  4) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_3::Nested_1:0x42bb2c0>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  5) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_3::Nested_1:0x42f6120>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  6) Static pages Help page 
     Failure/Error: before { visit help_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x4c62d08>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  7) Static pages Help page 
     Failure/Error: before { visit help_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x311a0c0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  8) Static pages About page 
     Failure/Error: before { visit about_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x3fdc578>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  9) Static pages About page 
     Failure/Error: before { visit about_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x47fdac8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  10) Static pages Contact page 
     Failure/Error: before { visit contact_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x3ddd330>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  11) Static pages Contact page 
     Failure/Error: before { visit contact_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4c59f00>:0x4cea548>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  12) User pages profile page 
     Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x4e2a1c8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  13) User pages profile page 
     Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x3fdf0e0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  14) User pages signup page 
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x48f8a60>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  15) User pages signup page 
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x4ccddd8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  16) User pages signup with invalid information should not create a user
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x4dffdf0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

  17) User pages signup with valid information should create a user
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x4e20a00>:0x3113700>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___509603306_33401520'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___981332443_30718356'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

Finished in 7.96 seconds
37 examples, 17 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:10 # Authentication signin page 
rspec ./spec/requests/authentication_pages_spec.rb:11 # Authentication signin page 
rspec ./spec/requests/static_pages_spec.rb:10 # Static pages Home page 
rspec ./spec/requests/static_pages_spec.rb:11 # Static pages Home page 
rspec ./spec/requests/static_pages_spec.rb:12 # Static pages Home page 
rspec ./spec/requests/static_pages_spec.rb:18 # Static pages Help page 
rspec ./spec/requests/static_pages_spec.rb:19 # Static pages Help page 
rspec ./spec/requests/static_pages_spec.rb:25 # Static pages About page 
rspec ./spec/requests/static_pages_spec.rb:26 # Static pages About page 
rspec ./spec/requests/static_pages_spec.rb:32 # Static pages Contact page 
rspec ./spec/requests/static_pages_spec.rb:33 # Static pages Contact page 
rspec ./spec/requests/user_pages_spec.rb:11 # User pages profile page 
rspec ./spec/requests/user_pages_spec.rb:12 # User pages profile page 
rspec ./spec/requests/user_pages_spec.rb:18 # User pages signup page 
rspec ./spec/requests/user_pages_spec.rb:19 # User pages signup page 
rspec ./spec/requests/user_pages_spec.rb:29 # User pages signup with invalid information should not create a user
rspec ./spec/requests/user_pages_spec.rb:42 # User pages signup with valid information should create a user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:38:59.523

由于错误非常明显，我以某种方式从我的 routes.rb 文件中删除了根路径。一旦我把下面的行放回去，所有的测试都通过了：

```
root to: 'static_pages#home' 
```

# jquery - 使用 jQuery 在元素之后和之前添加标签

> ID：12223418
> 
> 赞同：4
> 
> 时间：2012-08-31T23:00:25.453
> 
> 标签：jquery, tags, html

假设我有这个标记：

```
<li class="cat-item"><a href="#">Item 1</a> 5 </li>
<li class="cat-item"><a href="#">Item 2</a> 9 </li>
<li class="cat-item"><a href="#">Item 3</a> 4 </li>
<li class="cat-item"><a href="#">Item 4</a> 3 </li>
<li class="cat-item"><a href="#">Item 5</a> 7 </li> 
```

`<li><a>item</a>`我想在之后和之前插入一个跨度标签`</li>`。

```
<li class="cat-item"><a href="#">Item 1</a><span> 5 </span></li>
<li class="cat-item"><a href="#">Item 2</a><span> 9 </span></li>
<li class="cat-item"><a href="#">Item 3</a><span> 4 </span></li>
<li class="cat-item"><a href="#">Item 4</a><span> 3 </span></li>
<li class="cat-item"><a href="#">Item 5</a><span> 7 </span></li> 
```

我想做jQuery。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T23:06:29.860

尝试

```
$('li.cat-item a').each(function(){
    $(this.nextSibling).wrap('<span>');
}); 
```

这会将文本节点（即它的[nextSibling ）之后](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-6AC54C2F)[包装](http://api.jquery.com/wrap/)在一个`<a>``<span>`

[**演示**](http://jsfiddle.net/a7jtJ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:05:14.057

`span`这将在每个`a`标签之后插入一个空标签`li.cat-item`：

```
$('li.cat-item a').after('<span />'); 
```

见[jQuery - after()](http://api.jquery.com/after/)

# actionscript-3 - 在 AS3 中编写简单的 AI

> ID：12223420
> 
> 赞同：1
> 
> 时间：2012-08-31T23:00:30.693
> 
> 标签：actionscript-3, class, artificial-intelligence, frame, enter

我正在尝试创建一个小游戏，您可以在其中使用箭头键控制棋盘周围的电影剪辑，同时还有小角色四处走动。

我有一个用于 enterframe 的事件监听器，它不断更新可以在棋盘上移动的用户控制角色。我真正希望的是能够创建一个 AI 类来分配给四处走动的角色。这个 AI 类将负责它们的移动，而无需我添加额外的代码，而不是最初创建/添加 AI 影片剪辑实例到舞台的代码。

到目前为止，我有一个 AI 类，所有字符类都扩展为它们的基类。有没有办法在这个 AI 类中添加另一个 enterframe 事件侦听器，以便 AI 类可以处理所有 AI 运动？我走错方向了吗？

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:11:21.843

我会说这是一个很好的方向。在您的 AI 类中，创建一个 addedToStage 侦听器，并在该处理程序中创建一个受保护或公共的 ENTER_FRAME 处理程序，然后如果您对不同字符类型的需求略有不同，则可以覆盖其部分行为。

```
public class CharacterBase extends Sprite {

    public function CharacterBase():void {
        this.addEventListener(Event.ADDED_TO_STAGE,addedToStage,false,0,true);
        this.removeEventListener(Event.REMOVED_FROM_STAGE,removedFromStage,false,0,true);
    }

    private function addedToStage(e:Event):void {
        this.addEventListener(Event.ENTER_FRAME,enterFrameHandler, false,0,true);
    }

    private function removedFromStage(e:Event):void {
        this.removeEventListener(Event.ENTER_FRAME,enterFrameHandler);
    }

    protected function enterFrameHandler(e:Event):void {
        //do your AI moving around logic
        walk();
    }

    protected function walk():void {
        this.x += 2;  //the default walk behavior
    }
} 
```

覆盖默认移动的角色：

```
public class Character1 extends CharacterBase {
    public function Character1():void {
        super();
    }

    override protected function walk():void {
        this.x += 5; //this character needs to be faster than default
    }
} 
```

# git - Git：如何防止本地机器用户名被贴出？

> ID：12223422
> 
> 赞同：2
> 
> 时间：2012-08-31T23:00:43.143
> 
> 标签：git, private

我正在使用 OSX。

我注意到，当我使用本地计算机使用 git 提交对公共项目的更改时，提交上的用户名（在网站中 - 在“提交”下的项目页面中）是我在本地计算机中使用的用户名，而不是我的git用户名...

我怎样才能改变这个？我不想将我的本地用户名暴露给所有人！

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:37:50.707

在 git 配置中设置您的用户名（最好是电子邮件），使用：
`git config --global user.name "your username"`
`git config --global user.email "email@domain"`

# python - Python Pygame 新手代码显示空白屏幕

> ID：12223424
> 
> 赞同：2
> 
> 时间：2012-08-31T23:00:56.740
> 
> 标签：python, pygame

我执行以下代码并得到一个空白（黑色）窗口。

窗口标题显示，但我还没有加载图像（我尝试使用其他图像而不是使用的图像）。.py 文件和图像位于同一目录中。

```
background_image_filename='checkmark.jpg'
mouse_image_filename='digestive_bw.png'
import pygame, sys
from pygame.locals import*
from sys import exit

pygame.init()

screen=pygame.display.set_mode((800,800),0,32)
#pygame.display.set_caption("Hello, Howdy, Mate, and Hi there world!")

background=pygame.image.load(background_image_filename).convert()
mouse_cursor=pygame.image.load(mouse_image_filename).convert_alpha()

while True:
    for event in pygame.event.get():
        if event.type==QUIT:
            pygame.quit()
            sys.exit()

screen.blit(background,(0,0))

x,y=pygame.mouse.get_pos()
x-=mouse_cursor.get_width() /2
y=-mouse_cursor.get_height() /2
screen.blit(mouse_cursor,(x,y))

pygame.display.update() 
```

我已经用 pygame 1.9.2 安装了 python 3.2。如果我不能让它工作，我会考虑卸载这些并安装 3.1 + 1.9.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:20:00.140

您应该将代码放在循环中，并使用时钟来避免使用所有 cpu：

```
clock = pygame.time.Clock()

while True:
    for event in pygame.event.get():
        if event.type==QUIT:
            pygame.quit()
            sys.exit()

    screen.blit(background,(0,0))

    x,y=pygame.mouse.get_pos()
    x-=mouse_cursor.get_width() /2
    y=-mouse_cursor.get_height() /2
    screen.blit(mouse_cursor,(x,y))

    pygame.display.update()
    clock.tick(30)  # keep 30 fps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:28:38.830

你可能想做的其他事情，你把 y=- 放在一个点上，把 x-= 放在它旁边。我不认为你打算这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T18:13:28.917

您是否尝试添加

```
pygame.display.flip(screen)? 
```

也需要更新

```
pygame.display.update(screen) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T02:23:10.367

提示：您可以`width / 2`在使用`Rect`. 它们还有其他有用的动态属性：[http](http://www.pygame.org/docs/ref/rect.html) : //www.pygame.org/docs/ref/rect.html（宽度、中心、中心x、左上角等...）

代码：

```
mouse_cursor=pygame.image.load(mouse_image_filename).convert_alpha()
mouse_rect = mouse_cursor.get_rect()

mouse_rect.center = pygame.mouse.get_pos()
screen.blit(mouse_cursor, mouse_rect)
pygame.display.update() 
```

这是：

```
mouse_cursor=pygame.image.load(mouse_image_filename).convert_alpha()

x,y=pygame.mouse.get_pos()
x-=mouse_cursor.get_width() /2
y=-mouse_cursor.get_height() /2
screen.blit(mouse_cursor,(x,y))
pygame.display.update() 
```

# javascript - 图像自适应调整大小 + Javascript 的问题

> ID：12223426
> 
> 赞同：0
> 
> 时间：2012-08-31T23:01:36.227
> 
> 标签：javascript, html, image, resize

大家晚上好！！

我在调整图像大小和 Javascript 方面遇到了一些问题。

我编写了一个函数来调整图像保持纵横比的大小。这是功能：

```
function computeRatio () {

        var el_image = document.getElementById("div_image");

        var newImg = new Image();           
        newImg.src = document.getElementById("image").src;

// GET IMAGE REAL DIMENSIONS

        var image_height = newImg.height;
        var image_width = newImg.width;

// SET WINDOW DIMENSIONS

        var window_height = 762;
        var window_width  = 600;

// COMPUTE DIMENSION RATIOS

        var height_ratio  = image_height / window_height;
        var width_ratio   = image_width / window_width;

// RESET IMAGE POSITION

        el_image.style.left = "0px";
        el_image.style.top = "0px";

        if (height_ratio > width_ratio) {
            var width = window_height/(image_height/image_width);

// SET NEW DIMENSIONS (MAX HEIGHT & NEW WIDTH)

            el_image.style.width  = width+"px";
            el_image.style.height = window_height+"px"

// SET NEW POSITION TO CENTER IMAGE

            var scroll_x = (window_width-width)/2;

            el_image.style.left = scroll_x+"px";

        } else {
            var height = window_width*(image_height/image_width);

// SET NEW DIMENSIONS (MAX WIDTH & NEW HEIGHT)

            el_image.style.width  = window_width+"px"
            el_image.style.height = height+"px";

            var scroll_y = (window_height-height)/2;

            el_image.style.top = scroll_y+"px";
        }

} 
```

这是 HTML 中的相关部分：

```
<div id="div_image" style="display: block;">
    <img src="" alt="0" id="image" onLoad="computeRatio ()"/>
</div> 
```

除了处理不太小的图像（即大小> 1MB）外，它工作得非常好。

发生这种情况时，该函数会计算正确的尺寸，但随后图像会全屏显示（W=600px，H=762px），显然，它没有居中！

我真的不明白为什么会这样！！

有什么帮助吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:01:50.130

要保持容器中图像的纵横比，只需将图像设置为`display:block`并添加`width:100%`. 效果是图像将填充到包含元素的宽度，高度会自动调整。

```
#image {
    display:block;
    width:100%;
} 
```

# ruby-on-rails - Rails 忽略清扫器中的 expire_page

> ID：12223428
> 
> 赞同：2
> 
> 时间：2012-08-31T23:01:57.903
> 
> 标签：ruby-on-rails, caching

所以我设置了一个清扫器来收听模型 Connection。该模型是模型/控制器 Tag 和 Post 之间的关系模型。超标准。当创建或销毁新连接时，我希望清扫器清除相应 Tag#show 上的页面缓存（即标签 id 1 的“/tags/1”，它显示所有关联的帖子）。

看起来很简单，但是我在清扫器中的 expire_page 调用没有做任何事情，而且在日志中，它似乎完全被跳过了。但是通过我的puts，我知道清扫器被调用并且我调用expire_page 的expire_cache 函数被调用。而且我已经尝试了各种方法来指定哪个页面到期，只要引用控制器（例如：controller =>：tags，：controller =>“tags”），甚至尝试放入相对url，但没有任何效果一个区别。

在我的 Tags 控制器中，我有另一个功能可以清除 Tag#index 页面，并且实际上工作正常。关于我在这里做错了什么的任何想法？

所以我有这个作为我的清扫器：

```
class CacheSweeper < ActionController::Caching::Sweeper

  observe Connection

  def after_create(record)  expire_cache(record) ; end 
  def after_destroy(record) expire_cache(record) ; end 

  def expire_cache(record)
      puts "begin page expire"
      expire_page(:controller => '/tags', :action => 'show', :id => record.tag.id)
      puts "end page expire"
  end
end 
```

这是我的标签控制器，精简：

```
class TagsController < ApplicationController
  before_filter :signed_in_user, only: [:new, :destroy]
  caches_page :index, :show
  cache_sweeper :cache_sweeper

  def create
    @tag = Tag.create(params[:tag])
    if @tag.save
      flash[:success] = "Tag added"
      redirect_to :action => "tags", :controller => :admin_pages
      expire_page(:controller => :tags, :action => :index)
    else
      render 'new'
    end
  end

  def index
    @tags = Tag.all
  end

  def show
    @tag = Tag.find(params[:id])
    @posts = @tags.posts.paginate :page => params[:page], :per_page => 10
  end
end 
```

# java - 如何创建以下 json 输出

> ID：12223429
> 
> 赞同：-1
> 
> 时间：2012-08-31T23:01:59.277
> 
> 标签：java, json

使用**net.sf.json.JSONObject**和**net.sf.json.JSONArray**库。

如何实现以下输出？

```
[
  {
    marks: {
      show: true
    },
    data: [],
    markdata: [
      {
        label: 'First Mark ',
        position: 3,
        labelVAlign: "top"
      },
      {
        label: 'Second Mark',
        position: 9,
        labelVAlign: "top"
      }
    ]
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:59:44.847

到目前为止，您尝试了什么，您在哪里发现问题？

```
 JSONArray array = new JSONArray();

    JSONObject container = new JSONObject();

    JSONObject showMarks = new JSONObject();
    showMarks.put("show", true);

    JSONArray markData = new JSONArray();

    JSONObject firstMark = new JSONObject();
    firstMark.put("label", "First Mark");
    firstMark.put("position", 3);
    firstMark.put("labelVAlign", "top");

    JSONObject secondMark = new JSONObject();
    secondMark.put("label", "Second mark");
    secondMark.put("position", 9);
    secondMark.put("labelVAlign", "top");

    markData.add(firstMark);
    markData.add(secondMark);

    container.put("marks", showMarks);
    container.put("data", new JSONArray());
    container.put("markData", markData);

    array.add(container);
    log.info(array.toString(4)); 
```

此外，-1 表示您到目前为止没有说出您尝试过的内容并提供了稍微无效的 JSON。

# git - 如何解决 EGit Eclipse 插件中的“多个合并基础”错误？

> ID：12223439
> 
> 赞同：10
> 
> 时间：2012-08-31T23:03:09.683
> 
> 标签：git, eclipse-plugin, merge, egit

使用 eclipse egit 插件我遇到了“多个合并基础”异常。在我设法解决这种情况之前，但这一次没有任何帮助。即使在创建了额外的提交和分支之后，cherry pick。存储库分支似乎被阻止合并。

这是一个例外：

```
An internal error occurred during: "Merging with refs/remotes/origin/master".
Exception caught during execution of merge command. java.io.IOException: Multiple merge bases for:
 082a3a9846147a0e6df72d6cffa6d6e517275b7b
 4d6c573c52ebb0de091bd91dbcefcbcbd44e7534 found:
 c480f2b3683a5d0c5607984ea6393d61dfa9fba4
 9da20a3c6304059ed92296ef2decb6f04e7112df 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T11:11:33.310

### EGit

为此所需的递归合并策略是自 EGit 3.0 以来的默认策略（请参阅[错误 380314](https://bugs.eclipse.org/bugs/show_bug.cgi?id=380314)）。

如果您使用的是旧版本，请参阅[下载页面](http://eclipse.org/egit/)进行升级。

### 解决方法

或者，在进行最后一次合并之前尝试重置为上一次本地提交，然后与`origin/master`. 然后，如果您在原始合并之上进行了更多更改，请选择这些。

另一种可能性是使用 C git（在控制台上）进行合并，它可以处理这种情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-02T13:24:01.037

如果您不能或不想更新到最新的 EGit，那么最可靠的解决方法是（如[robinst 建议](https://stackoverflow.com/a/12227221/42473)的那样）从该状态恢复，然后在命令行上合并。

*   请注意，正确地从中恢复很重要，因为`Multiple merge bases`问题会使您的存储库处于合并状态的中间。
*   如果您没有正确恢复，那么您所做的下一次提交将导致*合并提交*，它**会默默地恢复**所有远程更改！
    *   换句话说，当你推送时，只有你的本地更改会在远程结束。所有远程更改看起来像是已合并，但会被忽略，就像在`git merge -s ours`推送之前所做的那样。

您可以通过查找文件夹中`MERGE_HEAD`的文件来检查您是否处于合并状态。只是做一个告诉你：`MERGE_MSG``.git``git status``nothing to commit`

```
$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 4 and 25 different commit(s) each, respectively.
#
nothing to commit (working directory clean)
$ cat .git/MERGE_HEAD 
1234567890abcdef1234567890abcdef12345678
$ cat .git/MERGE_MSG 
Merge remote branch 'origin/master' 
```

然后，您可以返回到尝试从 EGit 合并之前所处的状态。

```
$ git reset --hard
HEAD is now at 0123456 Blah blah blah
$ cat .git/MERGE_HEAD .git/MERGE_MSG
cat: .git/MERGE_HEAD: No such file or directory
cat: .git/MERGE_MSG: No such file or directory 
```

与往常一样，这将丢失自上次提交以来所做的所有更改。

*   **注意**：这就是为什么在进行拉取或合并之前提交所有更改是一个好主意的原因。
    *   如果拉取或合并失败并且您的存储库处于不一致的状态，您希望能够在再次尝试拉取/合并之前重置回一个已知的好点。
*   作为在拉取/合并之前*提交*的替代方法，您还可以*存储*更改，执行合并，然后*取消存储*它们。这实际上就像在合并之上对未提交的更改进行小型*变基，但具有合并前提交的安全网。*

请注意，您也可以执行`git merge --abort`，但是在某些版本的 git 上，这建议您提交更改，如果您想避免远程更改被静默还原（您绝对不希望这样做），则不应该这样做。

您现在可以使用 git 命令行重新运行您最初想要的合并，这将使用递归解析策略，因此应该可以正常工作：

```
$ git merge origin/master
Auto-merging ...
...
Merge made by recursive.
...
$ git --no-pager log -1 --oneline
2345678 Merge remote branch 'origin/master' 
```

# ruby-on-rails - 将自定义字段日期分配给 LocomotiveCMS 中的变量

> ID：12223440
> 
> 赞同：0
> 
> 时间：2012-08-31T23:03:12.077
> 
> 标签：ruby-on-rails, ruby, liquid, locomotivecms

我正在尝试将日期分配给变量，以分解布局。也许有更好的方法可以做到这一点，所以请随意推荐替代方案。

我有一个 news_items 模型，带有一个名为 news_date 的日期字段。我想浏览每个模型条目，并在遇到新的一年时开始一个新的部分。我的计划非常基本：

```
{% assign curYear = "" %}
{% for news in contents.news_items %}
  {% assign prevYear = curYear %}  
  {% assign curYear = news.news_date.year %} <-- this does not work
  {% if prevYear != curYear %}
    <h1>Press Releases for {{ news.news_date | format_date: '%Y' }}</h1>
  {% endif %}
  <p>{{curYear}}</p> <-- this is always empty
  <p>{{news.content}}</p>
{% endfor %} 
```

我尝试了各种其他语法，比如`Time.parseTime(news.news_date).year`，但似乎你不能在 Liquid 中做任意的 Ruby。有什么方法可以实现我想要的吗？

感谢你的协助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:19:50.440

感谢 google 小组的一位乐于助人的人，`capture`向我指出了该标签，它将原本会在页面上输出的内容捕获到一个变量中：

而不是这个（或我尝试过的各种迭代`assign`）：

```
{% assign curYear = news.news_date.year %} 
```

这工作得很好，利用了`format_date`过滤器：

```
{% capture curYear %} {{ news.news_date | format_date: '%Y' }} {% endcapture %} 
```

# objective-c - 点击情节提要按钮时播放自定义声音

> ID：12223442
> 
> 赞同：1
> 
> 时间：2012-08-31T23:03:18.960
> 
> 标签：objective-c, ios, xcode

我在 .storyboard 中制作了自定义按钮，点击时需要播放声音（不是音板，只需播放按钮按下的自定义音频文件）。
故事板编辑器中是否有声音选项可以启用此功能？如果没有，还有什么方法可以实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T00:11:13.140

故事板不允许您将“音频”分配给按钮。但是，您可以做的是在函数中使用相当简单的[AVAudioPlayer](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)；

## 添加库

要使用 AVAudioPlayer，您首先需要将 2 个库/框架添加到您的项目中。这些框架包含实际播放器的基本代码，并允许我们（应用程序编写者）使用它。

在 xCode 中选择您的项目并转到**Build Phases**。选择**Link Binary with Libraries**。按小**[+]** - 图标并添加框架：

*   音频工具箱
*   AV基金会

## 构架

现在我们必须告诉我们的代码我们实际上将使用这两个框架。打开控制器的 .H 文件，并在顶部添加：

```
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h> 
```

## 事件+玩家

将 UIButton 的事件之一（通过情节提要）（例如 Touch Up Inside）绑定到新的 IBAction 函数（例如 playSound）。

通过绑定事件，您告诉您的应用程序如果用户按下按钮-> 运行此功能/代码。

现在，在您新创建的 IBAction 函数（例如 playSound）中添加一些代码来创建一个带有 MP3 的播放器并播放它；

```
- (IBAction)playSound:(id)sender
{

   // Load in a audio file from your bundle (all the files you have added to your app)
   NSString *audioFile = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"mp3"];

   // Convert string to NSURL
   NSURL *audioURL = [NSURL fileURLWithPath:audioFile];

   // Initialize a audio player with the URL (the mp3)
   AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:nil];

   // Start playing
   [player play];

} 
```

我希望这会帮助你朝着正确的方向前进？

检查 Apple 的[文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)，了解 AVAudioPlayer 除了“播放”之外的所有功能/方法（例如缓冲、暂停等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T19:01:08.317

当我使用设置音量时，上面的代码有效

[播放器设置音量：1.0]；

在我这样做之前它不起作用。

# javascript - 如何将点击事件添加到 JQuery 中动态添加的元素？

> ID：12223446
> 
> 赞同：-1
> 
> 时间：2012-08-31T23:03:54.093
> 
> 标签：javascript, jquery

我想添加`click`事件做动态创建的元素。我如何使用 JQuery 做到这一点？

```
$(function() {
   $('.class').after('<a href="#" onclick="displayHideBox('1'); return false;">Text</a>');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:07:45.067

试试看：

```
$(function() {
   $('.class').each(function(){
    // construct link-OBJECT! here
    var link = $('<a />').attr('href', '#').click(function(){ displayHideBox('1'); }).text('Text');
    // insert link after ".class"-element
    $(this).after(link);
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:08:43.257

> 如何在 jquery 中进行 onclick 工作？

我认为您要问的问题是“如何将点击事件添加到动态添加的元素”，对吗？

假设您的标记是这样的：

```
<div id="someContainer">
    <p class="class">asdasd</p>
    <a href="#" class="newLink">Text</a>
</div> 
```

如果是这样，您可以`.on()`像这样使用：

```
$("#someContainer").on('click','a.newLink', function() {
    displayHideBox('1');
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:26:38.223

你可以试试这个

```
$(function(){
    $('<a />', { href: '#', text: 'Text', click: function(e){ 
            e.preventDefault();
            displayHideBox('1'); 
        }
    }).insertAfter('.class');
}); 
```

[**演示**](http://jsfiddle.net/PEX7u/1/)。

# pyqt4 - PyQt4 - 如何动态调整 Qt 布局的大小

> ID：12223452
> 
> 赞同：2
> 
> 时间：2012-08-31T23:04:29.777
> 
> 标签：pyqt4

所以我一直在尝试做的是生成一个小部件列表，将它们添加到网格布局中，然后将它们添加到选项卡并呈现给用户。我现在遇到的问题是网格布局跨越了每个选项卡的整个页面，但是我没有要添加的行太多，因此这些行最终跨越了整个页面并且不会与顶部对齐。我尝试设置对齐和垂直间距，但都没有改变小部件的显示方式。

前任：

我希望小部件显示如下：

```
WidgetName WidgetLabel 
WidgetName WidgetLabel     
WidgetName WidgetLabel 
WidgetName WidgetLabel 
```

相反，我得到了这个：

```
WidgetName WidgetLabel

WidgetName WidgetLabel 

WidgetName WidgetLabel

WidgetName WidgetLabel 
```

有没有办法将所有元素强制到顶部或任何所需的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:19:16.840

默认情况下，布局将占用其父小部件允许的全部空间。我通常会做的是将网格放在另一个布局中并在末尾添加一些拉伸。

```
class Widget(QtGui.QWidget):

    def __init__(self, parent=None):
        super(Widget, self).__init__(parent)

        mainLayout = QtGui.QVBoxLayout(self)

        grid = QtGui.QGridLayout()
        # you can directly control the spacing here
        grid.setSpacing(20)

        for row in xrange(5):
            grid.addWidget(QtGui.QLabel("Text"), row, 0, 
                1, 1, QtCore.Qt.AlignTop)
            grid.addWidget(QtGui.QLabel(str(row)), row, 1, 
                1, 1, QtCore.Qt.AlignTop)

        mainLayout.addLayout(grid)
        mainLayout.addStretch() 
```

拉伸将占用所有剩余的可用空间并将网格挤压到顶部。这样做的好处是您不必向网格本身添加任何其他异常。拉伸是父布局的一部分。

现在，`setSpacing`您可以很好地控制将空间推回物品中。

# url - 当方案没有双斜杠时无法抓取 NSURL 组件

> ID：12223462
> 
> 赞同：4
> 
> 时间：2012-08-31T23:05:41.557
> 
> 标签：url, nsurl

我正在尝试使用 NSURL 类参考中提供的方法解析 URL 以获取方案、路径和参数。但是，我注意到，如果我以这种方式构建 url（方案后没有双斜杠）：    

```
NSString *urlString = @"customScheme:myPath?parameter=hello&other_parameter=12";
NSURL *url = [NSURL URLWithString:urlString]; 
```

我无法从 NSURL 中获取任何这些值。换句话说，方法

```
path
query 
```

返回零。

如果我像这样添加双斜杠：

```
NSString *urlString = @"customScheme://myPath?parameter=hello&other_parameter=12";
NSURL *url = [NSURL URLWithString:urlString]; 
```

一切正常。为什么是这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:44:15.833

这些方法在 Apple 的文档中有非常清楚的记录：

> `path` 返回符合 RFC 1808 的 URL 的路径。
> 
> `- (NSString *)path`
> 
> URL 的路径，未使用该`stringByReplacingPercentEscapesUsingEncoding:`方法进行转义。如果接收方不符合 RFC 1808，则返回`nil`.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

RFC 1808 非常清楚什么是有效的相对 URL：

> `<scheme>://<net_loc>/<path>;<params>?<query>#<fragment>`

[http://www.w3.org/Addressing/rfc1808.txt](http://www.w3.org/Addressing/rfc1808.txt)

如果您想解析`mailto:`URL 等，您将不得不使用其他东西`NSURL`来完成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:23:23.800

对于不符合 RFC 1808 的 URL，您可能希望用于`-[NSURL resourceSpecifier]`检索冒号后的 URL 部分。之后，如果合适，您可以将其分解为“路径”和“查询”。

# java - 试图通过java中的字符数组读取

> ID：12223464
> 
> 赞同：1
> 
> 时间：2012-08-31T23:05:51.280
> 
> 标签：java, string, char

我是一个尝试学习java的新手。我正在为我的班级做一个项目，我们正在创建一个十六进制-十进制转换器。我已经完成了转换，但是当我打印出十六进制结果时，字母（因为十六进制包含 AF）以小写形式打印出来。我尝试使用以下代码来读取字符数组并将所有小写字符大写：

```
int i = Integer.parseInt(input);
String hex = Integer.toHexString(i);
char[] hexchar = hex.toCharArray();
for(int j=0; j<=hexchar.length; j++){
   if(hexchar[j].equals("a")){
     hexchar[j]=hexchar[j].toUpperCase();
} 
} 
```

我打算为字母 af 设置此代码，但我不断收到的错误是不能延迟 Char 数组。有谁知道是否有办法读取 char 数组或可以提交可能的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:10:04.707

您不能将其应用于`toUpperCase`原始字符：[它是 String 类的方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase%28%29)。下面的代码应该做你想做的事：

```
int i = Integer.parseInt(input);
String hex = Integer.toHexString(i).toUpperCase(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:15:46.797

`char`是原始的。也许你的意思是[`Character.toUpperCase`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toUpperCase%28char%29)？

```
final int i = Integer.parseInt(input);
String hex = Integer.toHexString(i);
final char[] cs = hex.toCharArray();
for (int j = cs.length; j > 0; --j) {
  final char ch = cs[j];
  if (Character.isLetter(ch)) {
    cs[j] = Character.toUpperCase(ch);
  }
}
hex = new String(cs); 
```

不过，我不明白这一点；你真的应该使用[`String.toUpperCase`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase%28%29)，所以......

```
final String hex = Integer.toHexString(i).toUpperCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:45:31.280

这不应该完美无缺。

```
int i = Integer.parseInt(input);
    String hex = Integer.toHexString(i);
    System.out.println(hex);
    System.out.println(hex.toUpperCase()); 
```

它将所有字符从 af 更改为 AF 并保持数字不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T18:03:03.123

干得好：

```
import java.util.Scanner;

public class classy
{
    public static void main(String args[])
    {
        Scanner input = new Scanner( System.in );

        int i;

        System.out.println("Please enter an integer");
        i=input.nextInt();

        System.out.printf( "Your Integer  is  %d\n", i );

        String hex=Integer.toHexString(i).toUpperCase();
          System.out.println("Your Hexadecimal Number is  "+hex);
    }
} 
```

# arrays - mongodb查询数组的子集

> ID：12223465
> 
> 赞同：7
> 
> 时间：2012-08-31T23:06:01.673
> 
> 标签：arrays, mongodb, subset, keyword-search

我有一个字段`_keywords`，它是一个字符串数组。我想获取`_keywords`查询数组的超集的文档。

例如：

```
db.article.insert({'_keywords': ['foo', 'foo1', 'foo2']}) 
```

当我查询 ['foo', 'foo1', 'foo2'] 的子集时，我想检索此记录，例如：['foo'], ['foo1', 'foo2']

编辑：类似：

```
db.article.find({'_keywords': {$contains: array}}) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T23:18:43.040

使用`$all`运算符：

```
db.article.find( { _keywords: { $all: [ 'foo1', 'foo2' ] } } ); 
```

来源：[http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-27T03:35:39.967

在 MongoDb 中，对于数组字段：

```
"$in:[...]" means "intersection" or "any element in",
"$all:[...]" means "subset" or "contain",
"$elemMatch:{...}" means "any element match"
"$not:{$elemMatch:{$nin:[...]}}" means "superset" or "in" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T23:30:49.697

简短的回答：[`$all`](http://docs.mongodb.org/manual/reference/operators/#_S_all)操作员。
要查询具有超集 ['foo1', 'foo2'] 的数组的文档，请使用：
`db.article.find( { '_keywords': { $all: ['foo1', 'foo2'] } } );`

# ruby-on-rails - 如何获取 Sprockets 生成资源的摘要？

> ID：12223467
> 
> 赞同：0
> 
> 时间：2012-08-31T23:06:06.457
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, sprockets

使用 sprockets 时，我有一个完整的 .coffee 文件目录，这些文件可以转换、合并并成为“mobile_v2.js”。当这个文件被提供时，一个美妙的 ETag 被设置在它上面，并带有内容的 SHA1 哈希值。这允许缓存清除和其他一切美妙且良好的正常工作。即，如果我修改任何源 .coffee 文件并重新加载页面，Sprockets 将重新生成“mobile_v2.js”并将其发送到客户端。如果我不更改任何内容，客户端将使用该资源的缓存副本。这很好用。

现在我有一个场景，其中一部分网络应用程序使用[Backbone.js](http://backbonejs.org/)，并且用户可以在一个页面上花费很长时间而不进行完全“刷新”......即，大量的 AJAX 更新，但是没有新的 ”...”。从字面上看，客户可能会在此页面上花费数周时间。因此，如果我将更新推送到 JS/CSS 资源，我需要一种方法让客户端检测到这一点并触发整个页面的重新加载。完全重新加载是破坏性的，所以我不想做太多不必要的事情。我也不想轮询服务器以获取这些资源......我有所有这些 AJAX 调用，所以我可以使用额外的响应头来搭载这些调用。我能做的一切。我只需要一个简单问题的帮助：

**给定一个生成的资源，如“mobile_v2.js”，我如何查询 Sprockets 以获取该文件的 SHA1 摘要？**（来自我的红宝石代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:50:20.760

不确定我是否正确，但如果您正在预编译资产，一种方法是从生成的 manifest.yml 中提取摘要

```
manifest = YAML.load(File.open(Rails.root.join("public", "assets", "manifest.yml")))
digest = manifest["mobile_v2.js"].gsub("mobile_v2-", "").gsub(".js", "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T20:06:07.707

要查找生成资产的 sprockets 摘要：

```
Rails.application.assets.find_asset(asset_name).digest 
```

在生产中，没有 sprockets(*)，所以我们使用 git 修订版（我们使用 .git 文件夹进行部署）。或者，我想我们可以按照 DavidO 的建议阅读 manifest.yaml。

这是我最终使用的完整解决方案：

```
def asset_digest(asset_name)
  if Rails.env == 'production'
    # Production
    Git.open(Rails.root).object('HEAD').sha
  else
    # Development / Test
    Rails.application.assets.find_asset(asset_name).digest
  end 
end 
```

(*)：实际上，在生产中，sprockets 行“工作”，但它是通过重新编译所有资产而不是读取预编译资产来实现的。

# jquery - 调整窗口大小时的 CSS

> ID：12223468
> 
> 赞同：0
> 
> 时间：2012-08-31T23:06:23.740
> 
> 标签：jquery, resize, location, reload, window-resize

我有这个网站：[http](http://www.sfrpsicologia.com) ://www.sfrpsicologia.com 。当绿色 div 被充电时，这个 div 有不同的高度和 margin-top 取决于浏览器窗口。但是，问题在于，当我调整窗口大小时，它不会立即更改此属性，而只会在我刷新 Web (f5) 时更改。当我调整窗口大小时，我怎么能得到这些特征？我不想在调整大小时重新加载页面...在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:10:45.627

您必须将“高度/宽度”计算代码封装到：

```
$(window).resize(function(){
      // your code here
}); 
```

由于这不会在页面加载时触发，因此您必须在第一次触发它：

```
$(window).resize(function(){
    // your code here
}).trigger('resize'); 
```

见[jQuery - resize()](http://api.jquery.com/resize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:10:09.857

```
$(window).bind("resize", function () {
    console.log('window resized. Recalculate your dimensions');
}); 
```

[**演示**](http://jsfiddle.net/QtaZr/)

# background - Monotouch - DialogViewController 的 TableView 背景也改变了元素的背景

> ID：12223469
> 
> 赞同：1
> 
> 时间：2012-08-31T23:06:27.217
> 
> 标签：background, xamarin.ios, tableview, viewcontroller, dialogviewcontroller

我有一个带有 2 个主要子视图的 UIViewController。一个子视图是 UIViewController，另一个是 DialogViewController。DialogViewController 包含一些元素。我有一个我想在 DVC 后面分配的自定义背景，因此当用户向上或向下滚动时，会显示背景，直到他们松开手指或鼠标并且视图弹回其原始位置。

问题是，当我使用通过搜索找到的方法分配背景时，元素看起来很清晰，并在视图加载时通过它们显示背景。但是，当我滚动到足以在弹回之前将元素推离屏幕时，元素的背景就会变回白色。我希望我的元素始终是白色的，并且只有背景作为我的自定义图像。

我用来尝试实现此目的的代码如下：

```
// Declare my background
UIImage background = UIImage.FromBundle("images/background.png");

// Assign background pattern to dvc's ParentViewController -- which is my NavigationController (Not sure if this is what it should be)

dvc.TableView.BackgroundColor = UIColor.Clear;
dvc.ParentViewController.View.BackgroundColor = UIColor.FromPatternImage(background); 
```

我也尝试过分配给 dvc.TableView.BackgroundView ，但没有成功。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:25:41.090

也许这有效：

```
UIView background = new UIView(dvc.TableView.Bounds);
background.BackgroundColor = UIColor.Green;

dvc.TableView.BackgroundView = background; 
```

如果 dvc 中有许多其他“根”，则必须继承 UINavigationControllerDelegate 并覆盖“WillShowViewController”。只需将代码放入此方法中即可。

# php - 行尾检查

> ID：12223475
> 
> 赞同：3
> 
> 时间：2012-08-31T23:07:34.773
> 
> 标签：php, mysql, select, while-loop

在 PHP 中，我试图以最大字符限制显示一行的内容，所以

```
$result = mysql_query("SELECT * FROM `news`");

$length = 350; // Show first 350 characters of row, then cut it off

while($row = mysql_fetch_array($result)) {
$show = nl2br(substr($row['content'], 0, $length));
} 
```

PS：代码标签对我来说搞砸了， $length 不在 while 循环中。

使用 while() 语句来增加 strpos 的 $length 是行不通的。

有什么建议么？

我想这样做，以防线路中有链接，它不会将其切断，直到它转到新线路，并且它知道它已经完成，所以链接将是完整的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:15:53.173

我不能给你一个简短的答案，因为它很难......像 Symfony 这样的框架已经内置了这个功能（看看`truncate`smarty，symfony 等）

但我找到了一个有用的函数示例：[HERE -- truncate($text, $length = 100, $ending = '...', $exact = false, $considerHtml = true)](http://dodona.wordpress.com/2009/04/05/how-do-i-truncate-an-html-string-without-breaking-the-html-code/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:44:06.793

我的理解是你想为一篇文章或类似的东西生成一个预告片。我使用了一个`generate_teaser`函数的组合，该函数基本上不会`substr`在单词或句子中间剪切文本，而`close_tags`函数则尝试（并且通常成功）关闭标签（警告：它可能无法正确关闭表格） . 目前我不能给你我使用的代码，但我可以告诉你它的灵感来自（并改进了）这两个实现：[`node_teaser`](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_teaser/6)和[`closetags`](http://snipplr.com/view/3618/close-tags-in-a-htmlsnippet/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:12:13.350

在服务器端进行。我也建议不要`SELECT`ing `*`(all)。始终使用列列表。

```
$result = mysql_query("SELECT SUBSTR(content, 0, 350) AS content FROM `news`");

while($row = mysql_fetch_array($result)) {

    $show = nl2br($row['content']);
} 
```

和往常一样，请[停止使用](http://www.deprecatedphp.com/mysql) `mysql_`函数。

**更新**

我忽略了阅读整个要求。这应该有效：

```
SELECT
    CASE
        WHEN LOCATE('</a>', content) > 350 THEN SUBSTRING(@str, 1, LOCATE('</a>', content)+4)
        ELSE SUBSTRING(content, 1, 350)
    END
FROM `news` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T23:39:19.907

使用这个 CSS：

```
.wrap-link {
  word-wrap: break-word;
} 
```

这样，不是切断链接文本或根据任意字符限制手动换行（无论如何都会不一致），任何比其容器宽度长的单词（例如长 url）都将被强制换行自动地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T23:20:05.370

写入一个宽度有限的 div 框：

```
<div style="width=100px; display: inline-block;"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T23:34:17.373

```
$show = nl2br(substr(trim(strip_tags($row['content'])), 0, $length)); 
```

# twitter-bootstrap - 使用 twitter bootstrap 在按钮样式中输入

> ID：12223480
> 
> 赞同：1
> 
> 时间：2012-08-31T23:08:36.143
> 
> 标签：twitter-bootstrap

我正在尝试将输入框添加到按钮类型样式。我的努力在下面。它可以工作，但是带有输入框的“按钮”比没有输入框的要胖得多（高度）。是否可以使高度相同？

```
<div class="btn btn-info">I'm nice and slim</div>
<div class="btn btn-info">help <input type="text" class="input-mini" placeholder="Type here"> I'm too fat!</div> 
```

![胖按钮](../Images/26d21e7690935e85b526ff684dc5e532.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:18:45.317

```
.btn > input {
    font-size: 11px;
    height: 16px;
    line-height: 16px;
    margin-bottom: 0;
    padding-bottom: 0;
    padding-top: 0;
} 
```

# jquery - 具有多个值的 Asp.Net Mvc JQuery 自动完成？

> ID：12223483
> 
> 赞同：0
> 
> 时间：2012-08-31T23:08:54.740
> 
> 标签：jquery, asp.net-mvc, autocomplete

**控制器**

```
[HttpGet]
public JsonResult GetTags()
{
    var data = entity.Tags.Select(x => new { tagName = x.TagName });
    return Json(new { result = data }, JsonRequestBehavior.AllowGet);
} 
```

**脚本**

```
$(function () {
    function split(val) {
        return val.split(/,\s*/);
    }
    function extractLast(term) {
        return split(term).pop();
    }
    $("#tags")
// don't navigate away from the field on tab when selecting an item
.bind("keydown", function (event) {
    if (event.keyCode === $.ui.keyCode.TAB &&
    $(this).data("autocomplete").menu.active) {
    event.preventDefault();
        }
})
.autocomplete({
    source: function (request, response) {
    $.getJSON('@Url.Action("GetTags", "Question")', {
        term: extractLast(request.term)
}, response);
},
    search: function () {
        // custom minLength
    var term = extractLast(this.value);
    if (term.length < 2) {
        return false;
    }
    },
focus: function () {
    // prevent value inserted on focus
    return false;
    },
select: function (event, ui) {
    var terms = split(this.value);
    // remove the current input
    terms.pop();
    // add the selected item
    terms.push(ui.item.value);
    // add placeholder to get the comma-and-space at the end
    terms.push("");
    this.value = terms.join(", ");
    return false;
    }
});
}); 
```

实际上，脚本来自默认[的 jquery-ui-autocomplete-with-multi-values](http://jqueryui.com/demos/autocomplete/#option-source)

**剃刀**

```
<div class="demo">
    <div class="ui-widget">
        @Html.TextBoxFor(x => x.Title, new { @class = "my_text_box", id = "tags" })
    </div>
</div> 
```

控制器动作被触发，但我在文本框中看不到任何数据。我调试了javascript，但函数没有触发。我该如何解决？

我可以`auto-complete-with-multi-values`用另一种方式，而不是这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:26:23.740

您的 Action 方法正在返回一个对象集合，其结构如下；

```
[ { tagName: result1}, {tagName: result2} ... ] 
```

因为您直接将结果用于自动完成，所以该方法需要以[以下两种格式](http://jqueryui.com/demos/autocomplete/#remote-jsonp)之一返回数据；

> 来自本地数据、url 或回调的数据可以有两种变体：
> 
> 字符串数组：
> `[ "Choice1", "Choice2" ]`
> 
> 具有标签和值属性的对象数组：
> `[ { label: "Choice1", value: "value1" }, ... ]`

或者，您可以获取结果并将它们适当地映射到上述格式之一，然后再将它们发布到响应方法。

# android - 即使用户离开它，也让我的 Android 应用程序正常工作。我怎么做？

> ID：12223485
> 
> 赞同：1
> 
> 时间：2012-08-31T23:09:12.413
> 
> 标签：android, android-activity, lifecycle

我的 Android 应用程序进行了一些计算，但我最近注意到，如果我要离开应用程序，正在运行并执行工作的线程会停止。如果手机进入待机模式或用户将其锁定，也会发生这种情况。

我想让我的应用程序继续工作，即使用户离开它，或者锁定手机（或者如果手机进入待机模式）。

我正在使用所有 Activity 生命周期方法，但除非用户实际按下手机物理按钮上的“返回”或按下应用程序菜单中的“退出”，否则我不会破坏任何东西。

执行计算的线程位于它自己的公共方法中，但是它是从按钮处理程序的 onclick 方法调用的。这个处理程序，几乎所有这些都在 onCreate 方法中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:11:55.290

您`Activity`将在设备屏幕关闭时暂停（并在屏幕打开时恢复）。

考虑改为在 a 中工作[`Service`](http://developer.android.com/reference/android/app/Service.html)。[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)是一种相对简单的方法，因为它负责创建一个单独的线程，一次处理一个工作请求，并在没有更多工作要做时进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:12:52.193

您所要求的通常称为“在后台运行”。一种方法是服务（[这里](http://marakana.com/forums/android/examples/60.html)是教程）。

# bash - 使用“读取”命令附加到变量

> ID：12223487
> 
> 赞同：5
> 
> 时间：2012-08-31T23:09:42.897
> 
> 标签：bash, variables

使用 Bash，您可以附加到变量，例如

```
$ foo=Hello

$ foo+=world

$ echo $foo
Helloworld 
```

但是，这可以通过`read`命令实现吗？就像是

```
$ foo=Hello

$ read --append foo
world

$ echo $foo
Helloworld 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T23:16:27.567

不是直接的，所以使用一个临时变量。

```
foo="Hello"
read tmp
foo+="$tmp" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T00:05:33.210

您可以使用以下方式伪造它`readline`：

```
$ foo=Hello
$ read -e -i"$foo" foo
Hello 
```

`readline`通过`-e`标志使用时，参数 to`-i`放在输入的第一行以帮助您入门。您与其说是附加，`foo`不如说是给出`foo`一个全新的值，如果您不编辑初始行，它恰好以旧值开头。

# html - 带有用户输入字段的 HTML 下拉列表

> ID：12223497
> 
> 赞同：2
> 
> 时间：2012-08-31T23:11:37.830
> 
> 标签：html, forms, html-select

我有一个下拉列表如下..

```
<select name="school"><option value="None" selected>None</option>
<option value="DeSoto">DeSoto</option>
<option value="Hillsboro">Hillsboro</option>
<option value="Grandview">Grandview</option>
<option value="Festus">Festus</option>
<option value="R-7">R-7</option>
<option value="Home-Schooled">Home-Schooled</option> 
```

如果在数据库中输入的联系人碰巧住在下拉列表中未列出的学区，则数据输入人员必须将学校添加到数据库中。如何在列表末尾添加一个选项，以允许最终用户输入学校名称。

我可以处理 PHP 代码来处理条目，我只需要一些关于如何完成将下拉列表转换为用户输入字段或其他解决方案的想法。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:18:34.790

您可以使用组合框：输入+下拉列表。

[http://javascript.about.com/library/blcombo.htm](http://javascript.about.com/library/blcombo.htm)

演示：http: [//jsfiddle.net/P39W5/](http://jsfiddle.net/P39W5/)

**或者**您可以动态添加一个输入框：

[http://jsfiddle.net/EMEVL/](http://jsfiddle.net/EMEVL/)

JS：

```
$(document).ready(function() {
    $('#newSchool').hide();
    $("#schoolContainer").change(function() {
        var val = $(this).val();      
        if (val == 'Other School') {
            $('#newSchool').show();
        } else {
            $('#newSchool').hide();
        }
    }).change();
}); 
```

HTML：

```
School: <select name="school" id="schoolContainer">
    <option value="None" selected>None</option>
    <option value="DeSoto">DeSoto</option>
    <option value="Hillsboro">Hillsboro</option>
    <option value="Grandview">Grandview</option>
    <option value="Festus">Festus</option>
    <option value="R-7">R-7</option>
    <option value="Home-Schooled">Home-Schooled</option>
    <option value="Other School">Other School</option>
</select>

    <input type="text" id="newSchool"/>
    <input type="button" id="otherschool" value="Insert"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:16:53.980

jQuery 帮助：

```
$("select[name='school']").change(function() {
    var val = $(this).val();
    if(val == 'notlisted') {
        $('input[name="otherschool"]').show();
    } else {
        $('input[name="otherschool"]').hide();
    }
}).change(); 
```

然后在 HTML

```
<input type="text" name="otherschool" style="display:none" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:16:17.227

添加另一个`<option>`值为 other 的字段，当用户选择它时，他们可以在输入框中输入学校名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T23:17:07.497

为什么在此下拉列表旁边没有添加按钮？在下拉列表末尾添加条目似乎并不直观。作为用户，我什至不展开下拉列表，只是滚动浏览当前值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T23:26:02.753

这里是这样的：

```
$(document).ready(function(){

    $("#addSchool").click(function(){
    $("#schoolContainer").append('<option value="' + $("#newSchool").val() + '">' + $("#newSchool").val() + '</option>');
    });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<select name="school" id="schoolContainer">
    <option value="None" selected>None</option>
    <option value="DeSoto">DeSoto</option>
    <option value="Hillsboro">Hillsboro</option>
    <option value="Grandview">Grandview</option>
    <option value="Festus">Festus</option>
    <option value="R-7">R-7</option>
    <option value="Home-Schooled">Home-Schooled</option>
</select>

    <input type="text" id="newSchool"/>
    <input type="button" id="addSchool" value="Insert"/>
```

[http://jsfiddle.net/damian_silvera/NcpKp/](http://jsfiddle.net/damian_silvera/NcpKp/)

# javascript - 利用 Flexslider 外的 Flexslider 字幕

> ID：12223499
> 
> 赞同：1
> 
> 时间：2012-08-31T23:12:00.103
> 
> 标签：javascript, css, flexslider

由于布局问题，我试图在 flexslider 本身之外使用 .flex-caption。

你能想出我能做到这一点的方法吗？

理想情况下，标记的结构如下：

```
<div class="flexslider gallery">
<ul class="slides">
<li><img src="image.jpg"  /></li>
</ul>
</div>

<p class="flex-caption">Caption</p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T01:10:13.510

这解决了它，而不需要额外的滑块：

```
$captions = $('.captions');

$('.flexslider').flexslider({
    animation: "fade",
    controlNav: true,
    directionNav: false,
    slideshow: false,
    prevText: "Previous",
    nextText: "Next",
    useCSS: true,
    touch: true,
    start: function() {
        $activecaption = $('.flex-active-slide .flex-caption');
        $captions.html($activecaption.text());        
    },
    after: function() {
        $activecaption = $('.flex-active-slide .flex-caption');
        $captions.html($activecaption.text());
    }
}); 
```

[请参见此处](http://jsfiddle.net/3Hq7Q/1/)的示例。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:11:47.670

刚刚遇到同样的问题，并找到了一个帮助我解决问题的链接。这也是假设您正在寻找要随滑块导航更改的标题。

[https://github.com/woothemes/FlexSlider/issues/108](https://github.com/woothemes/FlexSlider/issues/108)

基本上，它涉及创建两个单独的 flexslider，并使用标题滑块上的此选项将它们与导航控件链接在一起：

```
start: function(slider){

            $('.flex-direction-nav li a').click(function(event){
              event.preventDefault();
              var dir = $(this).text().toLowerCase();
              slider.flexAnimate(slider.getTarget(dir));
            });
        } 
```

仅供参考，该功能似乎不适用于移动设备。进一步调查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T05:59:40.233

这个解决方案对我很有效。谢谢！您也可以使用图像标题而不是文本来执行此操作。

```
after: function() {
   $activecaption = $('.flex-active-slide .flex-caption img');
   $activecaption.clone().prependTo($captions);
} 
```

你想先复制元素，然后再添加它。

# c# - 在 Fluent 断言中排除未初始化 (null) 的属性

> ID：12223503
> 
> 赞同：1
> 
> 时间：2012-08-31T23:12:21.303
> 
> 标签：c#, linq, reflection, .net-4.0, fluent-assertions

在 FluentAssertions 中，我可以使用`AllProperties.But(obj => obj.property_I_do_not_want)`来从比较断言中删除特定属性，当我知道要忽略的属性的名称时这很好，但在我的情况下，我只想忽略未初始化的属性。现在我愿意忽略一个等于 null 但如果有一个解决方案也排除了设置为默认值的原语，那将更加方便。

我开始尝试为`PropertyAssertions`该类编写一个扩展方法，但不知道如何创建一个`IEnumerable<Expression<T>>`包含`Expression<T>`用于访问每个属性以忽略以传递给该方法的`But`方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:49:23.983

如果您愿意尝试 2.0 测试版，您可以在新的 ShouldBeEquivalentTo() API 中使用 lambda 来排除某些属性，如下所示：

```
subject.ShouldBeEquivalentTo(expected, options =>
    options.Excluding(ctx => ctx.PropertyPath == "Level.Level.Text")); 
```

如果需要，您甚至可以将其封装在自定义规则（实现 ISelectionRule 的类）中，如下所示：

```
subject.ShouldBeEquivalentTo(expected, options => 
    options.Using(new ExcludeUninitializedProperties())); 
```

事实上，您甚至可以通过覆盖创建初始选项的工厂方法，将其设为特定类型的默认值：

```
EquivalencyAssertionOptions<TSubject>>.Default = () =>    
    EquivalencyAssertionOptions<TSubject>>.Default.Using(new ExcludeUninitializedProperties()) 
```

# html - 如何创建具有多个可能参数的 GET

> ID：12223504
> 
> 赞同：0
> 
> 时间：2012-08-31T23:12:40.360
> 
> 标签：html, asp.net-mvc

我正在使用**ASP.NET** Web API (4 RTM) 并想创建一个方法来处理 GET 请求。将其视为`GetCustomer()`处理我的 GET 请求。
现在，通过客户 ID 获取客户非常简单；我将客户 ID 传递给我们，`querystring`然后我们就开始运行了。假设我希望选项传递两个可能的参数之一；代表客户的整数或缩写。

一种选择是使用单一方法来处理整数和字符串的 GET 请求。然后，在方法内部，我可以测试该值是否能够被解析为整数并相应地处理它。但这是处理这种情况的正确方法吗？

如果我应该有两种不同的方法，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:11:19.163

从您提到使用（可能是唯一的）ID 中，您可能需要一个单独的操作方法。但是从您对单一*意图*的描述来看，单一控制器方法可能是要走的路 - 请注意，您仍然不必手动解析字符串，MVC 模型绑定器可以为您做到这一点。

如果您有单独的方法，它们必须有不同的 URL。它们可能是重载的相同方法名称，但它们仍然必须使用 ActionName 属性进行修饰以分配它们不同的身份。（请注意，您可以使用其他选择器属性来区分，例如 [HttpPost] 或自定义属性。）

请注意，您还可以使用需要参数的 MapRoute（在 Global.asax 中）根据其参数有条件地在 URL 上调用不同的控制器方法。

在一个地方处理所有相同类型的活动的好处是代码变得更清晰、更易于维护并且更不容易出错。如果你发现情况并非如此，那就分手吧。这是我所说的常见的不要重复自己/单点真理/责任分离的东西。

作为一般规则，我在 MVC 中发现 URL 路径（没有查询字符串）、控制器方法和意图都沿着相同的路线分解。例如，这两个 URL 遵循该规则：

```
http://example.com/person/id/403
http://example.com/person/search?FirstName=Joe&LastName=Smith 
```

我们在 URL 中表达我们的意图，以获取单个人或可能的多个匹配项。

你说你可能会传递一个缩写（听起来不像是唯一的），作为两个参数之一。如果每个可选参数都是独立唯一的，那么一次形成一个以上的问题可能没有意义。如果您可能有 a、b 或 a AND b，那么在实际输入您的自定义控制器逻辑的主力之前确定将请求传递给哪个方法会变得很复杂。

此外，像 LINQ 这样的技术可以很容易地以程序方式动态组合查询，从而对结果进行一个或两个约束。

```
[HttpGet]
public ViewResult Search(string FirstName, string LastName) {
     var people = AllPeopleInDatabase();
     if (!string.IsNullOrEmpty(FirstName)) people=people.Where(p => p.FirstName==FirstName);
     if (!string.IsNullOrEmpty(LastName)) people=people.Where(p => p.LastName==LastName);
     return View(people);
} 
```

将唯一 ID 放入该组合对我来说没有意义，只是因为我无法想到一个编程场景（除了密码验证的相当独特的情况），如果另一个条件匹配，您只想获取指定的记录. 因此，如果有人要求一个 id 并且它不存在，这可能是一个错误情况，如果有人按照不产生结果的条件进行搜索，它可能不是一个错误情况。但是，您仍然可以：

```
public ViewResult Search(string FirstName, string LastName, int? id) { 
```

编辑：还要注意模型绑定器将处理类的属性，这是绑定多个参数的典型方法：

```
public ViewResult Search(MyCriteriaViewModel criteria) { 
```

编辑2：还请注意，RESTful 服务（WebAPI 非常适合）具有 CRUD URL 的标准做法。以下来自[http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)：

```
Action                      HTTP method  Relative URI
Get a list of all products  GET          /api/products
Get a product by ID         GET          /api/products/id
Get a product by category   GET          /api/products?category=category
Create a new product        POST         /api/products
Update a product            PUT          /api/products/id
Delete a product            DELETE       /api/products/id 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:18:57.057

就个人而言，我只会使用一个入口点来访问这种代码：

```
http://example.com/lookupUser?id=18475
http://example.com/lookupUser?userCode=jjs
http://example.com/lookupUser?FullName=Jeremy%20J%20%Starcher 
```

好吧，也许不是最后一个例子，因为可能有多次点击。

# java - JAVA - 如何打印从外部 jar 使用的方法/对象的跟踪

> ID：12223506
> 
> 赞同：0
> 
> 时间：2012-08-31T23:13:05.047
> 
> 标签：java, jar, trace

我目前正在测试在罐子中提供给我们的 api。我正在尝试获取我们已触及或至少我们的源代码引用的 jar 方法和对象的“覆盖范围”或列表。

我们拥有或将拥有的是“这里是 API 列表”的文本格式

我们需要交叉引用我们自己的应用程序，以确保我们涵盖了列出的 API。

...

这是一个简化的示例... 下面我列出了 jar 中可用的外部代码示例，以及我们使用这些 API 的代码。

-- EXTERNAL_USE_CLASS -- 用我们需要覆盖的公共 API 模拟外部 JAR

```
package external_api;

public class EXTERNAL_USE_CLASS {
    String myString;
    Integer myInteger;
    Boolean has_ran;
    public EXTERNAL_USE_CLASS() {
        myString = "initial_string";
        myInteger = 4;
        has_ran = false;
    }
    public String getMyString() {
        return myString;
    }
    public void setMyString(String myString) {
        this.myString = myString;
    }
    public Integer getMyInteger() {
        return myInteger;
    }
    public void setMyInteger(Integer myInteger) {
        this.myInteger = myInteger;
    }
    public Boolean getHas_ran() {
        return has_ran;
    }
    public void setHas_ran(Boolean has_ran) {
        this.has_ran = has_ran;
    }
} 
```

我的项目会将上述内容作为 jar 导入并将其添加到构建路径中。我的代码将执行的操作是这样的：

UseExtJar -- 使用外部 jars 对象/方法模拟我们的测试应用程序

```
import external_api.EXTERNAL_USE_CLASS;

public class UseExtJar {
    static EXTERNAL_USE_CLASS u = new EXTERNAL_USE_CLASS();

    //below is callable via a CLI interface test APP.
    public static void test_basics() {
        Boolean hasRan = u.getHas_ran();
        Integer getInt = u.getMyInteger();
        String getString = u.getMyString();
        System.out.println("u.getHas_ran()"+hasRan);
        System.out.println("u.getMyInteger()"+getInt);
        System.out.println("u.getMyString()"+getString);
    }
} 
```

我有兴趣公开的是外部 Jar 触及的所有 API。

（即这些行）

```
 Boolean hasRan = u.getHas_ran();
    Integer getInt = u.getMyInteger();
    String getString = u.getMyString(); 
```

如果可能的话......我希望能够打印出一些报告，大意是说

> 您的对象方法 'test_basics' 使用了以下 api：
> --external_api.EXTERNAL_USE_CLASS.getHas_ran()
> --external_api.EXTERNAL_USE_CLASS.getMyInteger() --external_api.EXTERNAL_USE_CLASS.getMyString()

我必须通过进入我的测试类并在 Eclipse 中右键单击并说“复制限定名称”来获得上述名称。

如果我们必须为 1,000 个 API 执行此操作，这将是一种痛苦……我只是想出了某种方法可以在逻辑上打印出跟踪。

可能我只是不知道正确的谷歌搜索词，这是一个常见的简单任务。

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:38:15.297

如果您知道类的名称以获取有关它的信息，则可以使用反射解决部分问题。您可以打印甚至练习课堂上的方法

```
import java.lang.reflect.*;

public class DumpMethods { 

  public static void main(String args[])
  {
     try {
        Class c = Class.forName("MyClassName");
        Method m[] = c.getDeclaredMethods();
        for (int i = 0; i < m.length; i++)
        System.out.println(m[i].toString());
     }
     catch (Throwable e) {
        System.err.println(e);
     }
  }
} 
```

这是一个初学者的[教程](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

使用一些库代码来减轻你的一些负担对你来说并不是一件可怕的事情。

不幸的是，分析 jar 的内容并不是那么简单。一旦 jar 的类被加载到 jar 类的概念中就消失了。默认的类加载器只使用包名作为标识唯一类并决定它是否存在于类加载器中的键。因此，您甚至无法真正遍历包中的类，更不用说 jar 的内容了。

为此，您可以创建一个自定义类加载器来分析 jar 并在它从类路径中获取信息时记录信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:55:21.060

当您必须为使用的每个 API 类编写一个模拟类时

```
System.out.println(MyMockedClass.class.getCanonicalName()); 
```

获取您正在模拟的类的限定名称。

像这样的东西

```
Object doMethod(String name){
    try {
        Method method = u.getClass().getDeclaredMethod(name);
        System.out.println("called: " + name);
        try {
            return (String)method.invoke(this);
        } catch (IllegalArgumentException e) {
            return false;
        } catch (IllegalAccessException e) {
            return false;
        } catch (InvocationTargetException e) {
            return false;
        }
    } catch (NoSuchMethodException e) {
        return false;
    }
} 
```

可以给你一种调用和打印你调用的每个方法的方法。

对于使用参数调用的方法，它会变得更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:28:03.927

谢谢。

我按照您的建议从反射开始，然后转向 ASM，因为我正在使用字节码。

* * *

我从引用 ASM 和反射的 2 个链接中提取了我的引用

[Java：从 JAR 文件中的类文件中获取方法存根的简单方法？反射？](https://stackoverflow.com/questions/2690118/java-easy-way-to-get-method-stub-out-of-class-files-within-a-jar-file-reflecti)

[如何找到在 Java 中调用给定方法的所有方法？](https://stackoverflow.com/questions/930289/how-can-i-find-all-the-methods-that-call-a-given-method-in-java)

* * *

我的解决方案基本上分两步解决了问题

## 1.从external-jar中读取所有的target-methods

通过 ASM，读入所有满足类路径 (com.my.class.object.*) 和一些 opt-code 过滤器（非私有、非抽象等）的公共类/方法对象，并附加所有满足过滤到存储类/方法的对象列表。

## 2\. foreach 目标方法，检查它是否存在于我们的源代码中。

对于找到的每个目标类/方法，就像上面提供的链接一样，我可以检查位置，并使用行/文件名等打印所有出现。

# bash - iOS 从 Activator 执行 shell 脚本

> ID：12223510
> 
> 赞同：2
> 
> 时间：2012-08-31T23:13:34.937
> 
> 标签：bash, ios5, jailbreak

我正在使用越狱的 iOS 设备，我想向 Activator 添加一个操作，该操作执行存储在已知位置的 shell 脚本。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T05:22:52.057

我不确定 Activator 是否可以*直接*运行脚本，但它肯定可以运行您在设备上安装的任何**应用程序**，并执行您喜欢的任何操作（例如滑动、摇动、按下按钮）。只需制作一个使用该`system()`函数或`exec`调用脚本的函数的简单应用程序：

```
int main(int argc, char *argv[])
{
    int returnCode = system("/bin/myscript.sh arg1 arg2");
    return 0;
} 
```

然后，设置 Activator 以运行该应用程序。

**编辑：这将导致***应用程序*启动时 短暂闪烁，然后关闭。这也意味着您正在运行的任何其他应用程序都将被关闭（发送到后台）。如果您不喜欢这样，Activator 还允许您构建一个 SBSettings*切换*，然后在用户定义的操作上运行它。请参阅[此处以构建 SBSettings 切换](http://thebigboss.org/guides-iphone-ipod-ipad/sbsettings-toggle-spec)。您只需以这种方式实现该`setState`方法：

```
void setState(BOOL Enabled) 
{
    int returnCode = system("/bin/myscript.sh arg1 arg2");
} 
```

# java - Android倒计时错误

> ID：12223511
> 
> 赞同：-3
> 
> 时间：2012-08-31T23:14:00.570
> 
> 标签：java, android, countdown

我正在尝试为我的应用程序做一个简单的倒计时，持续 30 秒，然后结束游戏，但是一旦我的手机上加载了活动，应用程序就会崩溃。这是代码，是的，我确信这是我的倒计时代码使应用程序崩溃。

```
public void UpdateTime()
{
    CountDownTimer timer = new CountDownTimer(3000, 100)
    {

        public void onTick(long l)
        {
          Time--;
          tDown.setText(Time);
        }

        public void onFinish()
        {
            GameOver();
        };
    }.start();
}
public void Begin()
{
   UpdateTime();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T00:08:48.997

除了其他人描述的问题之外，真正的问题是您正在设置这样的文本：

```
tDown.setText(Time); 
```

其中时间是一个整数。当您将整数传递给 setText() 时，它会查找在 strings.xml 中声明的字符串资源。你真正想要的是

```
tDown.setText(""+Time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:39:59.803

我可以在您的代码中看到以下错别字：

*   额外分号
*   显式 start() 调用

还要确保您的`tDown`变量不是`null`当 Android 无法找到您在`findViewById()`调用中指定的 id 的 TextView 时发生这种情况

尝试像这样修改您的代码：

```
public void UpdateTime()
{
    CountDownTimer timer = new CountDownTimer(30000, 1000)
    {
        public void onTick(long l)
        {
            Time--;
            tDown.setText(Time);
        }

        public void onFinish()
        {
            GameOver();
        }
    }
    timer.start();
}
public void Begin()
{
   UpdateTime();
} 
```

# c# - 死锁后重新提交事务

> ID：12223514
> 
> 赞同：4
> 
> 时间：2012-08-31T23:14:14.500
> 
> 标签：c#, asp.net, .net, sql-server, linq-to-sql

我有一个包含在事务范围内的代码块。我正在使用 LINQ 与数据库进行通信。捕获到死锁异常后，如何重新提交事务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:42:44.530

基本上，您只需捕获死锁异常并再次尝试代码。我们做这样的事情：

```
private static void ExecuteWithDeadlockRetry(int maxAttempts, bool useTransaction, Action action)
{
    int tryCount = 0;
    string errorMessage;

    // If use transaction is true and there is an existing ambient transaction (means we're in a transaction already)
    // then it will not do any good to attempt any retries, so set max retry limit to 1.
    if (useTransaction && Transaction.Current != null) { maxAttempts = 1; }

    do
    {
        try
        {
            // increment the try count...
            tryCount++;

            if (useTransaction)
            {
                // execute the action inside a transaction...
                using (TransactionScope transactionScope = new TransactionScope())
                {
                    action();
                    transactionScope.Complete();
                }
            }
            else
                action();

            // If here, execution was successful, so we can return...
            return;
        }
        catch (SqlException sqlException)
        {
            if (sqlException.Number == (int)SqlExceptionNumber.Deadlock && tryCount < maxAttempts)
            {
                // Log error here
            }
            else
            {
                throw;
            }
        }
    } while (tryCount <= maxAttempts);
} 
```

电话看起来像这样：

```
SqlDeadlockHelper.Execute(() =>
{
  // Code to execute here
} 
```

请注意，Execute() 方法最终会调用 ExecuteWithDeadlockRetry()。我们的解决方案比您所要求的要多一些，但这应该会给您一些大致的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:52:09.683

首先思考*为什么*会发生死锁？是因为您在 LINQ 上下文中读取并修改的值**被另一个事务更改了**吗？唯一合理的做法是再次读取这些值并确定您的更改是否*对新值有意义*。由于这是 ASP.NET，这意味着向用户显示新值，因此您必须再次将页面返回给用户，并通知用户发生了更改，并且必须再次编辑数据。

死锁时自动重新提交*是*可能的，但几乎总是一个坏主意。它可能会导致数据库中的错误状态，因为您的域规则被破坏，因为您的重试覆盖了读取值*后发生的更改。*

# web - 是否有支持自定义内容类型/分类但没有其他功能的 cms？

> ID：12223517
> 
> 赞同：-1
> 
> 时间：2012-08-31T23:14:33.127
> 
> 标签：web, content-management-system, template-engine

我从事的所有项目中有 95% 需要以下内容

*   一个简单的管理界面，允许一个用户编辑/添加/删除我指定的预定义内容。（每个内容可以包含多个输入字段、所见即所得、单选按钮、图像等）
*   在页面上显示这些内容中的一个或多个的可能性。最好使用模板语言。
*   一些小助手的东西，例如分页，忘记密码等。

通过研究，我发现了非常复杂的解决方案（wordpress 等）、框架（django、drupal）和无数只支持静态页面的超轻量级 cms:es（get-simple 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:20:02.553

通常我不会推荐 Drupal，因为我过去有过一些不好的经验，但它确实解决了你的问题（CCK 和 Views）。是的，这确实很复杂，但是您可以禁用不需要的模块，让编辑者可以访问他们需要的内容。

顺便说一句，Drupal 是一个 CMS。作为一个框架，与 Django 相比，它很糟糕。

编辑：关于复杂性：不仅它很复杂，而且您的项目可能会变得越来越复杂，从而使整个事情变得无法维护。你可以把事情简单化成一条规则——在做出决定之前问自己两次，比如安装一个新模块，因为它实现了“很酷的功能 X”或“很高兴拥有功能 Y”。如果您的回答不是 100%“是”，请远离它 :)

编辑 2：WordPress - 那些将 HTML 与 SQL 查询混合在一起的主题使其成为 90 年代的平台。我会选择 Drupal 而不是 WordPress，它有更好的设计恕我直言，并且下面的框架不会让你变得愚蠢（除非你能够理解“ [[臭名昭著的]循环](http://codex.wordpress.org/The_Loop)”）

编辑 3：如果您可以通过编程方式创建这些内容类型，我的建议是在 Django 上构建一些自定义 CMS。如果您需要从 Web 界面创建它们，Drupal 将立即为您提供帮助。

所以：

*   如果您可以编写代码（有能力、精力、时间和/或金钱），请使用 Django 构建它
*   否则，请使用 Drupal

# python - map_reduce() *和* find() 在同一个查询中

> ID：12223518
> 
> 赞同：4
> 
> 时间：2012-08-31T23:15:21.903
> 
> 标签：python, mongodb, pymongo

我发现了一堆 map_reduce 教程，但它们似乎都没有“where”子句或任何其他方式来排除正在考虑的文档/记录。我正在处理一个看似简单的查询。我有一个包含时间戳、IP 地址和活动 ID 的基本事件日志文件。我想在给定的时间戳范围内为给定的活动获取唯一用户的计数。听起来很容易！

我构建了一个类似这样的查询对象：

`{'ts': {'$gt': 1345840456, '$lt': 2345762454}, 'cid': '2636518'}`

有了这个，我尝试了两件事，一件使用 distinct，另一件使用 map_reduce：

**清楚的**

`db.alpha2.find(query).distinct('ip').count()`

在 mongo shell 中，您可以将查询作为 distinct 函数的第二个参数，它在那里工作，但我读过您不能在 pymongo 中这样做。

**Map_reduce**

```
map = Code("function () {"
        "    emit(this.ip, 1);"
        "}")
reduce = Code("function (key, values) {"
    "  var total = 0;"
    "  for (var i = 0; i < values.length; i++) {"
    "    total += values[i];"
    "  }"
    "  return total;"
    "}")

totaluniqueimp = db.alpha2.map_reduce(map, reduce, "myresults").count(); 
```

（我意识到 reduce 函数正在做我不需要的东西，我从演示中得到它）。这很好用，但没有使用我的“where”参数。我试试这个：

```
totaluniqueimp = db.alpha2.find(query).map_reduce(map, reduce, "myresults").count();` 
```

我得到这个错误：

```
AttributeError: 'Cursor' object has no attribute 'map_reduce' 
```

**结论**

基本上，这就是我在 mysql 中尝试做的事情：

```
select count(*) from records where ts<1000 and ts>900 and campaignid=234 group by ipaddress 
```

看起来很简单！你如何在mongo中做到这一点？

## 更新：答案

根据下面德米特里的回答，我能够解决（并简化）我的解决方案（这是否尽可能简单？）：

```
#query is an object that was built above this
map = Code("function () { emit(this.ip, 1);}")
reduce = Code("function (key, values) {return 1;}")
totaluniqueimp = collection.map_reduce(map, reduce, "myresults", query=query).count(); 
```

谢谢德米特里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:30:58.240

你可以尝试使用这个：

```
totaluniqueimp = db.alpha2.map_reduce(map, reduce, {
    out: "myresults",
    query: {'ts': {'$gt': 1345840456, '$lt': 2345762454}, 'cid': '2636518'}
}).count(); 
```

更新：上面的语句在 mongo shell 中工作。在 pymongo 中，您应该将查询添加为第四个参数：

```
totaluniqueimp = db.alpha2.map_reduce(map, reduce, "myresults", query={'ts': {'$gt': 1345840456, '$lt': 2345762454}, 'cid': '2636518'}) 
```

详细的文档可以在[这里](http://api.mongodb.org/python/current/examples/aggregation.html#advanced-map-reduce)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:14:10.710

不确定这是否可以通过 pymongo 实现，手册表明应该可以，但是在 mongoDB shell 中，您有一个 group() 函数，这将很容易让您在问题中重写 SQL：

```
select count(*) 
  from records 
 where ts<1000 
   and ts>900 
   and campaignid=234
 group by ipaddress; 
```

作为：

```
db. alpha2.group(
   { cond: { 'ts': {'$gt': 900, '$lt': 1000}, 'campaignid': '234' }
   , key: {  "ipaddress" : 1 }
   , initial: {count : 0}
   , reduce: function(doc, out){ out.count++}
   }
); 
```

# javascript - 在 JavaScript 中创建全局唯一 ID

> ID：12223529
> 
> 赞同：37
> 
> 时间：2012-08-31T23:16:39.447
> 
> 标签：javascript

我有一个脚本，当用户加载时，它会创建一个唯一的 ID。然后将其保存`localStorage`并用于跟踪交易。有点像使用 cookie，除了因为浏览器正在生成唯一 id，因此在发送到服务器时可能会发生冲突。现在我正在使用以下代码：

```
function genID() {
    return Math.random().toString(36).substr(2)
        + Math.random().toString(36).substr(2)
        + Math.random().toString(36).substr(2)
        + Math.random().toString(36).substr(2);
} 
```

我意识到这是一个超级基本的实现，并且想要一些关于更好的方法来创建一个“更随机”的 id 来防止服务器上的冲突。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T23:23:26.093

我过去用过这个。碰撞几率应该很低。

```
var generateUid = function (separator) {
    /// <summary>
    ///    Creates a unique id for identification purposes.
    /// </summary>
    /// <param name="separator" type="String" optional="true">
    /// The optional separator for grouping the generated segmants: default "-".    
    /// </param>

    var delim = separator || "-";

    function S4() {
        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
    }

    return (S4() + S4() + delim + S4() + delim + S4() + delim + S4() + delim + S4() + S4() + S4());
}; 
```

# php - 找不到文件时如何创建请求的图像文件？

> ID：12223535
> 
> 赞同：0
> 
> 时间：2012-08-31T23:17:10.773
> 
> 标签：php, apache, .htaccess

例如，如果我有一个文件`http://site.com/images/bird.jpg`

当我去时`http://site.com/images/bird-200px-width.jpg`，服务器会说“找不到文件”。

当服务器判断文件没有找到时，有没有办法去/images/目录下查看是否有标题为第一部分的图片（“bird.jpg”），如果存在则自动调整大小并生成具有请求文件名的图像而不是说“找不到文件”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:29:34.900

是的。当你问一个理论问题时，我的回答也将是理论上的。希望对你有用：

1.  您可以使用 .htaccess ( **[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)** )中的重写条件检查文件**是否不存在**
2.  如果文件不存在，请再次检查其他文件**是否存在**（再次重写条件，查找例如`bird(.*)`.jpg`(.*)`您的通配符在哪里）
3.  现在，如果该文件存在，则指向例如处理图像并显示它的 php 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:20:29.553

使用[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)（特别是`RedirectCond`[两次]）检测缩略图的缺失并重写为生成和输出图像的脚本。

# javascript - 使用 CSS 或 Javascript 使圆形图像变暗

> ID：12223537
> 
> 赞同：3
> 
> 时间：2012-08-31T23:17:29.683
> 
> 标签：javascript, jquery, css, html

到目前为止，我看到的所有使图像变暗的解决方案都适用于没有圆角的图像。这是有问题的，因为我见过的所有解决方案都需要使用背景颜色。当角落变圆时，背景颜色会显示出来。我说的是这些解决方案：

[http://jsbin.com/icemiy/1/edit](http://jsbin.com/icemiy/1/edit)

[翻转时使图像变暗](https://stackoverflow.com/questions/5249229/darken-image-on-rollover)

是否还有其他方法仍然纯粹通过 css 或 javascript（当然包括 jQuery）。提前致谢！

![在此处输入图像描述](../Images/dd24fc4fd1b213a3277d0080900b0c2b.png)

![在此处输入图像描述](../Images/54fd9d48e748c1a95291c1f07c6f4c40.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:25:43.907

[http://jsfiddle.net/L7rWJ/](http://jsfiddle.net/L7rWJ/)

完全可以使用 css。

圆形覆盖和图像：

```
#overlay, img{
    -webkit-border-radius:15px;
    -moz-border-radius:15px;
     border-radius:15px;
} 
```

哦，如果你不关心 ie，你可以使用过渡来获得额外的好处：http: [//jsfiddle.net/fYEWr/](http://jsfiddle.net/fYEWr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T23:26:01.110

您可以`background-clip`在图像及其容器上使用 - [**DEMO**](http://jsbin.com/icemiy/121/edit)

```
 figure {
    border-radius: 10px;
    -moz-background-clip: padding; 
    -webkit-background-clip: padding-box; 
    background-clip: padding-box;
  }

  img {
    float: left;
    background: black;
    display: block;
    -moz-transition: opacity .3s linear;
    -webkit-transition: opacity .3s linear;
    -ms-transition: opacity .3s linear;
    -o-transition: opacity .3s linear;
    transition: opacity .3s linear;

    border-radius: 10px;
    -moz-background-clip: padding; 
    -webkit-background-clip: padding-box; 
    background-clip: padding-box;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T03:42:00.940

我使用本教程解决了我的问题[http://mattbango.com/notebook/web-development/hover-zoom-effect-with-jquery-and-css/](http://mattbango.com/notebook/web-development/hover-zoom-effect-with-jquery-and-css/)

希望尝试做同样事情的人会找到此页面，并且这几种解决方案中的一种对他们有用！

谢谢大家！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T23:26:54.460

您可以将此代码放入 img、img hover 和 tint 以具有圆角

```
-webkit-border-radius:10px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T23:25:04.097

将边框半径添加到您为其提供背景颜色的容器。

在您的 jsBin 示例中，请执行以下操作：

```
 .tint {
    overflow: hidden;
    float: left;
    background: blue;
    margin: 0 20px 20px 0;
    border-radius:20px;
    -moz-border-radius:20px;
    -webkit-border-radius:20px;
  } 
```

# java - 用于在线游戏的 Java 机器人

> ID：12223540
> 
> 赞同：6
> 
> 时间：2012-08-31T23:17:57.653
> 
> 标签：java, bots, awtrobot, online-game

我正在使用 .java 在 java 中创建一个机器人`java.awt.Robot`。该机器人在浏览器上运行良好（我也使用 Microsoft Word 对其进行了测试！）但是当我在游戏中运行它时，唯一有效的功能是`mouseMove`. 我想构建一个简单地为我按下键盘按钮的机器人。

我实例化机器人类

```
Robot r = new Robot(); 
```

然后我做一些简单的事情：按z，按1，移动鼠标并单击鼠标右键。

```
r.keyPress(KeyEvent.VK_Z);
r.keyRelease(KeyEvent.VK_Z);

r.keyPress(KeyEvent.VK_1);
System.out.println("Press 1 button");
r.keyRelease(KeyEvent.VK_1);
System.out.println("Release 1 button");
r.delay(1000);

System.out.println("Move mouse");
r.mouseMove(110, 690);

System.out.println("Press");
r.mousePress(InputEvent.BUTTON3_MASK);
System.out.println("Release");
r.mouseRelease(InputEvent.BUTTON3_MASK); 
```

为什么会这样？如果这个机器人类在后台运行，它可以在游戏中执行这些动作吗？

谢谢

**更新**：例如，如果我在 PES 2012 上运行我的机器人，它工作正常，但如果我在像阴谋集团这样的在线游戏上运行它，它就不起作用？游戏的保护系统没有检测到任何东西，所以情况并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T03:38:24.823

首先，大多数游戏都有机器人保护，所以一定要给机器人添加延迟，也许还有一个“冷却时间”。在该`r.delay(1000)`声明之前，机器人做了两个即时动作。

我几乎可以肯定它不起作用，因为击键速度太快了：它们会立即按下并释放。在实例化 Robot 类之后尝试添加`bot.delay(500)`（或更多，取决于游戏）；在所有按键功能之前。这会在机器人完成的所有动作之间增加 500 毫秒的延迟。

```
public static void doStuff() {

    Robot r = new Robot();

        r.delay(500); //Or more - depends on the game

        r.keyPress(KeyEvent.VK_Z);
        r.keyRelease(KeyEvent.VK_Z);

        r.keyPress(KeyEvent.VK_1);
        System.out.println("Press 1 button");
        r.keyRelease(KeyEvent.VK_1);
        System.out.println("Release 1 button");
        r.delay(1000);

        System.out.println("Move mouse");
        r.mouseMove(110, 690);

        System.out.println("Press");
        r.mousePress(InputEvent.BUTTON3_MASK);
        System.out.println("Release");
        r.mouseRelease(InputEvent.BUTTON3_MASK);
} 
```

我认为 Z 和 1 键不起作用的唯一原因是一切完成的速度。游戏可能有一个反机器人系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:46:32.897

这很大程度上取决于它是什么类型的游戏。如果代码只是模拟键盘操作等系统输入。它应该看起来像一个普通人。

然而从它的样子来看。从你的例子。它以闪电般的速度运行，因此它可能根本没有检测到输入，和/或反机器人措施对你试图机器人的所谓游戏进行了测量。正在阻塞输入。将延迟混合在一起。看看是否有帮助。我会回来寻求更多帮助。这点我不专业。但这是我最好的猜测。

编辑：

当我的意思是延迟在触发按键事件之前放置一个延迟。这样它就有时间处理按键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T18:51:02.297

您的代码可能在游戏中太快地按下和释放键。经常有游戏要求您至少延迟 40 毫秒至 80 毫秒来按下和释放键。尝试这个应该会有所帮助 -

```
public static void doSomething() throws Exception{
    Robot rbt = new Robot();
    int typingTimes = 20;
    while(timer-- > 0){
        rbt.keyPress(KeyEvent.VK_1);
        //You can use Thread.sleep() after each keyPress to increase the delay
        Thread.sleep(500);
        rbt.keyRelease(KeyEvent.VK_1);

        rbt.keyPress(KeyEvent.VK_Z);
        //You can use Robot's delay() method after each keyPress too
        rbt.delay(500);
        rbt.keyRelease(KeyEvent.VK_Z);
    }
} 
```

希望这可以帮助！

# c# - 比较 2 个相同长度的 byteArrays

> ID：12223542
> 
> 赞同：0
> 
> 时间：2012-08-31T23:18:05.440
> 
> 标签：c#, performance, bytearray

我在看@stackOverFlow 有两种方法，我想其他地方可能还有更多，我的问题是最好的性能是什么

第二个问题，我有这个代码只需要几个`byte[]`

```
 bool ArraysEqual(byte[] a1, byte[] a2)
     {
         if (a1 == a2)
             return true;
          if (a1 == null || a2 == null)
             return false;
          if (a1.Length != a2.Length)
             return false;
          for (int i = 0; i < a1.Length; i++)
         {
             if (a1[i] != a2[i])
                 return false;
         }
         return true;
     } 
```

而且我无法实现这个，我不知道我使用了错误的语法，所以如果我有一个辅助方法来读取字节 [] 文件

```
 public byte[] readByteArr(string FilePath)
    {
       return File.ReadAllBytes(FilePath);

    } 

i could make it simply via 

void CompareIt(){

byte[] src = readByteArr(S.bar);
byte[] dest = readByteArr(D.bar);
if(ArraysEqual(src, dest))
DoSomthing
} 
```

我该如何制作`CompareIt()`，在第二个代码中需要设置参数集，我也尝试实现，只是为了检查哪个执行beeter

```
 bool ArraysEqual<T>(T[] a1, T[] a2)
    {
     if (ReferenceEquals(a1,a2))
         return true;
      if (a1 == null || a2 == null)
         return false;
      if (a1.Length != a2.Length)
         return false;
      EqualityComparer<T> comparer = EqualityComparer<T>.Default;
     for (int i = 0; i < a1.Length; i++)
     {
         if (!comparer.Equals(a1[i], a2[i]))
            return false;
     }
     return true;
 } 
```

实现最后一个的正确语法是什么，以及是否有更快的方法来比较两者

```
 byte[] 
```

知道**它们的长度相同**。你怎么看？

**重新编辑：** ![在此处输入图像描述](../Images/77fe4ce445774fa3abdf214208d9adba.png)

首先是不安全的代码。

第二个是我写的第一个代码（`bool ArraysEqual()`）

第三是

```
myArray.SequenceEqual(otherArray); 
```

**现在好好看看这个** 请允许我宣布，获胜者是：

```
[DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int memcmp(byte[] b1, byte[] b2, long count);

static bool ByteArrayCompare(byte[] b1, byte[] b2)
{
    // Validate buffers are the same length.     
    // This also ensures that the count does not exceed the length of either buffer.
    return b1.Length == b2.Length && memcmp(b1, b2, b1.Length) == 0;
} 
```

@混乱 。**你能用我的 Pinvoke 发布你的 Random 的实现**吗？

![在此处输入图像描述](../Images/e51daafe1224607e00e54b90c307d6e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T23:24:01.747

如果您使用 .NET > 3.0：

```
myArray.SequenceEqual(otherArray); 
```

见[MSDN - Enumerable.SequenceEqual](http://msdn.microsoft.com/de-de/library/bb348567%28v=vs.100%29.aspx)

如果您想使用自定义的“EqualityComparer”，您可以使用[MSDN - Enumerable.SequenceEqual 和 IEqualityComparer](http://msdn.microsoft.com/de-de/library/bb342073%28v=vs.100%29)

;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:33:35.713

*   最佳：数据是随机的
*   最差：数据相等
*   平均值：最好情况和最坏情况的平均值

真正的测试将包括数据几乎相等的情况，但我们在这里看到的平均值让我们很好地了解如果您的数据几乎可以是任何东西，这些事情将如何执行。最好的算法实际上取决于您期望什么样的数据。请注意，单线程安全方法在最好的情况下最快，但在最坏的情况下最慢。

![表现](../Images/246f63f89db246d40b92114664ef7f4a.png)

```
class Program
{
    [DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern int memcmp(byte[] b1, byte[] b2, long count);

    static bool AreEqualNative(byte[] a, byte[] b)
    {
        if (a == b)
            return true;
        if (a == null || b == null)
            return false;
        if (a.Length != b.Length)
            return false;
        return memcmp(a, b, a.Length) == 0;
    }

    static bool AreEqualSafe(byte[] a1, byte[] a2)
    {
        if (a1 == a2)
            return true;
        if (a1 == null || a2 == null)
            return false;
        if (a1.Length != a2.Length)
            return false;
        for (int i = 0; i < a1.Length; i++)
        {
            if (a1[i] != a2[i])
                return false;
        }
        return true;
    }

    static bool AreEqualSafeParallel(byte[] a1, byte[] a2, int start, int length)
    {
        for (int i = start; i < length; i++)
        {
            if (a1[i] != a2[i])
                return false;
        }
        return true;
    }

    static bool AreEqualSafeParallel(byte[] a, byte[] b)
    {
        if (a == b)
            return true;
        if (a == null || b == null)
            return false;
        if (a.Length != b.Length)
            return false;
        bool b1 = false;
        bool b2 = false;
        bool b3 = false;
        bool b4 = false;
        int quar = a.Length / 4;
        Parallel.Invoke(
            () => b1 = AreEqualSafeParallel(a, b, 0, quar),
            () => b2 = AreEqualSafeParallel(a, b, quar, quar),
            () => b3 = AreEqualSafeParallel(a, b, quar * 2, quar),
            () => b4 = AreEqualSafeParallel(a, b, quar * 3, a.Length)
        );
        return b1 && b2 && b3 && b4;
    }

    static unsafe bool AreEqualUnsafe(byte[] a, byte[] b)
    {
        if (a == b)
            return true;
        if (a == null || b == null)
            return false;
        if (a.Length != b.Length)
            return false;
        int len = a.Length / 8;
        if (len > 0)
        {
            fixed (byte* ap = &a[0])
            fixed (byte* bp = &b[0])
            {
                long* apl = (long*)ap;
                long* bpl = (long*)bp;

                for (int i = 0; i < len; i++)
                {
                    if (apl[i] != bpl[i])
                        return false;
                }
            }
        }
        int rem = a.Length % 8;
        if (rem > 0)
        {
            for (int i = a.Length - rem; i < a.Length; i++)
            {
                if (a[i] != b[i])
                    return false;
            }
        }
        return true;
    }

    static unsafe bool AreEqualUnsafeParallel(byte[] a, byte[] b, int start, int length)
    {
        int len = length / 8;
        if (len > 0)
        {
            fixed (byte* ap = &a[0])
            fixed (byte* bp = &b[0])
            {
                long* apl = (long*)ap;
                long* bpl = (long*)bp;

                for (int i = start; i < len; i++)
                {
                    if (apl[i] != bpl[i])
                        return false;
                }
            }
        }
        int rem = length % 8;
        if (rem > 0)
        {
            for (int i = length - rem; i < length; i++)
            {
                if (a[i] != b[i])
                    return false;
            }
        }
        return true;
    }

    static unsafe bool AreEqualUnsafeParallel(byte[] a, byte[] b)
    {
        if (a == b)
            return true;
        if (a == null || b == null)
            return false;
        if (a.Length != b.Length)
            return false;
        bool b1 = false;
        bool b2 = false;
        bool b3 = false;
        bool b4 = false;
        int quar = a.Length / 4;
        Parallel.Invoke(
            () => b1 = AreEqualUnsafeParallel(a, b, 0, quar),
            () => b2 = AreEqualUnsafeParallel(a, b, quar, quar),
            () => b3 = AreEqualUnsafeParallel(a, b, quar * 2, quar),
            () => b4 = AreEqualUnsafeParallel(a, b, quar * 3, a.Length)
        );
        return b1 && b2 && b3 && b4;
    }

    static readonly Random _rnd = new Random();
    static void SpeedTest(string name, int length, int iterations, Func<byte[], byte[], bool> func)
    {
        var a = new byte[length];
        var b = new byte[length];

        _rnd.NextBytes(a);
        _rnd.NextBytes(b);

        var sw1 = Stopwatch.StartNew();
        for (int i = 0; i < iterations; i++)
        {
            func(a, b);
        }
        sw1.Stop();

        var c = new byte[length];
        var d = new byte[length];

        var sw2 = Stopwatch.StartNew();
        for (int i = 0; i < iterations; i++)
        {
            func(c, d);
        }
        sw2.Stop();

        Console.WriteLine(name + ":");
        Console.WriteLine("  Best: " + sw1.Elapsed);
        Console.WriteLine("  Worst: " + sw2.Elapsed);
        Console.WriteLine("  Average: " + TimeSpan.FromTicks((sw1.Elapsed.Ticks + sw2.Elapsed.Ticks) / 2));
    }

    static void Test(bool shouldBeEqual, byte[] a, byte[] b)
    {
        if (shouldBeEqual != AreEqualSafe(a, b))
            throw new Exception();
        if (shouldBeEqual != AreEqualSafeParallel(a, b))
            throw new Exception();
        if (shouldBeEqual != AreEqualUnsafe(a, b))
            throw new Exception();
        if (shouldBeEqual != AreEqualUnsafeParallel(a, b))
            throw new Exception();
        if (shouldBeEqual != AreEqualNative(a, b))
            throw new Exception();
    }

    static void VerifyCorrectness()
    {
        Test(true,
        new byte[] { 1, 2, 3, 4, 5, 6, 7 },
        new byte[] { 1, 2, 3, 4, 5, 6, 7 });

        Test(true,
        new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 },
        new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 });

        Test(false,
        new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 },
        new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12 });
    }

    static void Main(string[] args)
    {
        VerifyCorrectness();

        var length = 1000000;
        var iterations = 10000;

        Console.WriteLine("Length:");
        Console.WriteLine("  " + length.ToString("N"));
        Console.WriteLine("Iterations:");
        Console.WriteLine("  " + iterations.ToString("N"));

        SpeedTest("Safe", length, iterations, AreEqualSafe);
        SpeedTest("SafeParallel", length, iterations, AreEqualSafeParallel);
        SpeedTest("Unsafe", length, iterations, AreEqualUnsafe);
        SpeedTest("UnsafeParallel", length, iterations, AreEqualUnsafeParallel);
        SpeedTest("Native", length, iterations, AreEqualNative);

        Console.ReadLine();
    }
} 
```

# core-data - 核心数据——通过关系获取价值

> ID：12223545
> 
> 赞同：0
> 
> 时间：2012-08-31T23:18:45.007
> 
> 标签：core-data, one-to-many

假设我有一个名为“Coffee Mug”的表，并且与许多类型的“coffee”有关系。

我可以访问 Coffee Mug 记录及其所有详细信息，但是当我尝试通过关系获取咖啡类型时，我只获取指针值。

我正在尝试创建一个这样的咖啡值数组：

```
self.coffeeTypeArray = [[NSMutableArray alloc] initWithArray:[coffeeMug.coffee allObjects]];
NSLog(@"Filled Array with: %i records", [self.coffeeTypeArray count]);
NSLog(@"Array contents: %@", self.coffeeTypeArray); 
```

我的日志显示该数组填充了 5 个对象。但是，对于每条记录，我得到的不是我正在寻找的字符串：

```
"<CoffeeTypes: 0x7f460b0> (entity: Coffees; id: 0x7f46100 <x-coredata:///Coffees/t113639D7-6BA1-4FDB-9739-7781EE6460134> ; data: {\n    mug = \"0x7f40370 <x-coredata:///coffeeMugs/t113639D7-6BA1-4FDB-9739-7781EE6460132>\";\n    coffee = Columbian;\n})" 
```

我知道答案必须很简单，但我已经用完了搜索词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:36:19.610

您在数组中看到的是“咖啡”实体的托管对象。该实体有一个`coffee`似乎是您正在寻找的属性。

以下应该可以打印`coffee`数组中所有对象的属性：

```
for (CoffeeTypes *theCoffee in self.coffeeTypeArray) {
    NSLog(@"%@", theCoffee.coffee);
} 
```

*注意：*也许您应该重新考虑实体和关系的命名。您的“咖啡”实体代表（据我所知）一种咖啡，因此“咖啡”（不带复数 s）将是一个更好的名称。另一方面，从“CoffeeMugs”到“Coffees”的一对多关系称为“coffee”。在这里，“咖啡”（带有复数 s）将是该关系的更好名称。

# php - 权限文件的必要性和失败的打开流

> ID：12223556
> 
> 赞同：0
> 
> 时间：2012-08-31T23:20:11.637
> 
> 标签：php, xampp

我刚刚在 Ubuntu 上安装了 XAMPP，并在我的网站页面上遇到了这个错误......

```
Warning: require_once(core/init.php): failed to open stream: Permission denied in 

/opt/lampp/htdocs/lr/start.php on line 44

Fatal error: require_once(): Failed opening required 'core/init.php' (include_path='.:/opt

/lampp/lib/php') in /opt/lampp/htdocs/lr/start.php on line 44 
```

所以我接着跑了几行代码，用这段代码改变了文件`/opt/lampp/htdocs`的权限`php.ini`

```
sudo chmod 777 filename 
```

问题是我仍然收到来自 php.ini 的错误。所以我的问题是，我在哪些文件应该是可执行的方面缺少什么，以便我可以运行我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:36:27.480

我将检查以下项目以确定 require_once() 为何返回 FATAL 错误：

1.  验证文件 /opt/lampp/htdocs/lr/core/init.php 是否存在。
2.  验证文件的所有者。该文件应归运行 PHP 的用户所有。
3.  验证运行 PHP 的用户是否具有对该文件的读取权限。

# macos - 如何创建一个小程序，从任何窗口（如三指点击（Ctrl-Cmd-D）字典弹出窗口）访问鼠标下的单词？

> ID：12223560
> 
> 赞同：1
> 
> 时间：2012-08-31T23:20:36.817
> 
> 标签：macos, cocoa, user-interface, hover, shortcut

OSX 允许您将鼠标光标悬停在几乎任何应用程序中的某个单词上，并通过三指点击（或 Ctrl-Cmd-D）来创建包含该单词的字典弹出窗口。

如何创建一个类似的弹出窗口来访问鼠标光标下的单词（或者最好是任意字符串）？

# javascript - 在 IE8 中启用 Microsoft XML DOM 文档插件会导致堆栈溢出

> ID：12223561
> 
> 赞同：2
> 
> 时间：2012-08-31T23:20:41.147
> 
> 标签：javascript, internet-explorer, internet-explorer-8

在 IE8 中启用“Microsoft XML DOM 文档”加载项会在某些页面加载时导致堆栈溢出弹出错误。有人会知道为什么吗？禁用此加载项似乎不会对启用 JavaScript 的站点产生任何影响。 ![在此处输入图像描述](../Images/e06410ff0a0b81694817bb034d80e3ba.png)

# java - Android TextView 的 HTML 中的换行符

> ID：12223562
> 
> 赞同：0
> 
> 时间：2012-08-31T23:20:48.620
> 
> 标签：java, android, html

> **可能重复：**
> [如何在 Android TextView 中添加换行符？](https://stackoverflow.com/questions/5382490/how-to-add-a-line-break-in-an-android-textview)

我试图在三个不同的行中用上标和其他文本表示一个数字，但由于某种原因换行符不起作用。

```
TextView tvAnswer = (TextView)findViewById(R.id.textView_answer);
tvAnswer.setText(Html.fromHtml("16<sup>4</sup>" + "istext \nistextonanotherline")); 
```

“\n”不会导致换行，但它没有我需要的“Html.fromHtml”。

这也不起作用：

```
tvAnswer.setText(Html.fromHtml("16<sup>4</sup>" + "istext<br>istextonanotherline")); 
```

因为 Android 显然不支持 br HTML 标签。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:26:48.093

一种可能的解决方案是

```
tvAnswer.setText(Html.fromHtml("16<sup>4</sup>" + "istext "));
    tvAnswer.append("\n"); 
```

# java - JScrollpane 仅在最大化窗口 Java Swing 后可见

> ID：12223564
> 
> 赞同：2
> 
> 时间：2012-08-31T23:21:30.173
> 
> 标签：java, swing, jtable, jscrollpane, maximize

我正在使用 JScrollPane 将一些值放入 JTable 中，但是在用户单击按钮之前，JScrollPane 必须是不可见的。但是在我手动最大化窗口之前，JScrollPane 仍然不可见。我已经尝试了几乎所有东西，.validate(); .revalidate(); .repaint()... 我正在使用 Netbeans，在 JScrollPane 的自定义代码上我写了这个：

```
scrollPane = new javax.swing.JScrollPane();
this.scrollPane.setVisible(false);
// El código de los subcomponentes y del gestor de distribución - no se muestra aquí

// El código que agrega el componente al contenedor superior - no se muestra aquí 
```

然后，在 MouseReleased 上：

```
private void botoGeneraLlistatMouseReleased(java.awt.event.MouseEvent evt) {
    this.generaLlistat();
} 
```

在generaLlistat() 结束时：

```
public void generaLlistat(){{
   ...(Some code requesting data from DB)
   JTable table = new JTable(rows, headings);
   scrollPane.setViewportView(table);
   this.scrollPane.setVisible(true);
   statement.close();
   connection.close();
} 
```

我将不胜感激 :) 谢谢大家，对我的英语语法和拼写感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:38:51.427

尝试这样做：

```
package stack;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Aitor extends JFrame implements ActionListener{
    JTable table;
    JPanel panel = new JPanel();
    JButton button = new JButton("Add"); 

    String data[][]={{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"},                        {"hey","hey"},{"hey","hey"}
,{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"},{"hey","hey"}
,{"hey","hey"},{"hey","hey"}};
    String columns[] = {"First","Second"};

    public Aitor(){
        setLayout(new BorderLayout());
        panel.setLayout(new BorderLayout());
        panel.setPreferredSize(new Dimension(500,400));
        button.addActionListener(this);
        add(panel,BorderLayout.CENTER);
        add(button, BorderLayout.SOUTH);

    }

    public static void main(String [] a){
        Aitor aitor = new Aitor();
        aitor.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        aitor.pack();
        aitor.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        panel.removeAll();
        table =new JTable(data,columns);
        panel.add(new JScrollPane(table),BorderLayout.CENTER);
        repaint();
        revalidate();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T23:37:54.593

您可以在调用`pack()`后调用您的容器`setVisible(true)`，然后您的滚动窗格就会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T23:57:29.093

您可以使用[`setPreferredScrollableViewportSize()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setPreferredScrollableViewportSize%28java.awt.Dimension%29), 如此处和[此处所示，尽管它有一些与](https://stackoverflow.com/a/7356518/230513)[此处](https://stackoverflow.com/a/4528604/230513)提到的相同的[缺点](https://stackoverflow.com/q/7229226/230513)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-09T14:52:43.847

如果您使用`jframe`.

在构造方法中，给出

```
Jscrollpane.setVisible (false); 
```

给出`jscrollpane`与您的`jtable`in相关联的特定信息`jframe`。

然后在 actionperformed 方法中给出

```
Jscrollpane. setvisible (true); 
pack (); 
```

这会有所帮助......

# php - AJAX url调用上的多个PHP脚本

> ID：12223566
> 
> 赞同：2
> 
> 时间：2012-08-31T23:21:49.017
> 
> 标签：php, jquery, ajax

我创建 AJAX 调用没有问题，但目前每个 url 都必须是唯一的。我希望在同一个文件中包含多个 PHP 函数，并通过特定的 AJAX 调用专门访问其中一个 PHP 函数。

使用 jQuery，目前我正在传递带有整数规范的 .data 参数，然后使用 PHP 文件中的 $_GET 方法并运行整数指定的正确函数。

我怎样才能做得更好？我想在 PHP 文件中调用一个*特定的函数；*我不想每个函数都有单独的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:38:14.933

我可以告诉你使用快速而肮脏的解决方案，即`function`在调用中传递一个参数，然后：

```
switch($_GET['function'])
{

case 'show':    
    show();
    break;

case 'delete':
    delete();
    break;

case 'awesome':

    awesome();
    break;

} 
```

但这是完全无法维护的，因为你会淹没在一堆乱七八糟的包含中，或者更糟的是陷入无法在任何地方重用的巨大代码列中。

我建议您进入**路由**，即在指向的 URL 和被调用的函数之间建立关系，如果需要使用参数 [如下面的第二个示例]：

```
/users              --> printAllUsers
/users/123          --> printUser($id)
/products/beers     --> printProducts($category)
/search             --> search()
... 
```

这样您就可以将*路由本身与响应生成分离：您可以*[在此处](http://symfony.com/doc/current/book/routing.html)找到更好的整体解释，然后您可以在[此处](https://github.com/chriso/klein.php)找到一个非常好的精简库，您可以在您的项目中使用而无需依赖整个框架。

啊，在使用诸如 OOP、MVC、RESTful 服务之类的东西进入流行语海洋之前——当然，所有这些都值得学习——坚持第一个概念：当我开始学习所有这些东西时，我真的很怀念它，它是我的*尤里卡*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:25:58.593

您可以为每个函数分配一个`ID`，发送`AJAX` `GET`基于一个并使用[switch](http://uk.php.net/manual/en/control-structures.switch.php)`ID`调用该函数

例如：发送`GET = 1`，或`GET = 2`

```
switch ((int)$_GET['id']) {
    case 1:
        processData();
        break;
    case 2:
        sendEmail();
        break;
    case 3:
        restoreBackup();
        break;
    // ........ and so on
} 
```

# pdf - 以安全的方式上传文件

> ID：12223567
> 
> 赞同：1
> 
> 时间：2012-08-31T23:22:05.210
> 
> 标签：pdf, file-upload

我正在创建一个允许用户将 pdf 文档上传到私人区域的应用程序。可能要将所有文件上传到 /uploads 目录。

是否有任何最佳实践/建议关于我如何命名 pdf 以使猜测其他可下载文档的名称变得非常困难。

我想知道原始文件名加上某种递增的 id 是否可能是要走的路？

例如：

*   heresmydocument-0.pdf
*   你应该猜猜this-1.pdf
*   howabouthisone-2.pdf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:29:51.587

原始名称加上随机 ID。

```
R := random-integer;
new-filename := original-filename + R; 
```

其中`+`代表连接。

这基本上与您的想法相同，除了我添加了一个观察结果，即如果您想让 ID*难以猜测*，那么使其*严格递增*有点愚蠢。

如果您担心这`rand()`仍然太容易猜到，那么请使用`SHA1(original-file-contents + R)`而不是 just `R`。但这肯定是矫枉过正。

**编辑：**实际上，更好的是使用`R-original-filename.pdf`，然后实现`R-origi.pdf`被视为等效于`R-original-filename.pdf`. 你会注意到很多新闻网站，包括 Reddit，都使用这个成语。它使共享 URL 更加方便，因为您可以只写[http://www.reddit.com/r/programming而不是写出](http://www.reddit.com/r/programming/comments/z3ha1/)[http://www.reddit.com/r/programming/comments/z3ha1/how_did_you_know_so_much_about_computers_then_i/](http://www.reddit.com/r/programming/comments/z3ha1/how_did_you_know_so_much_about_computers_then_i/) [/评论/z3ha1/](http://www.reddit.com/r/programming/comments/z3ha1/)。我建议您还要求用户输入原始文件名的前几个字符，以防止随意浏览；`R`但当然，你可以通过延长几个字符来获得同样的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:28:56.623

如果您有一个数据库后端，您可能希望在上传时保留文档的详细信息。然后用非常复杂的东西命名文件

3058348113409780784350983450894350809.pdf

然后你可以假设这将很难猜到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:25:48.520

您可以使用带有 md5 哈希值的文件名结尾。我想这很难猜到。

# python - 从使用线程和队列模块的 Python 脚本中识别队列返回

> ID：12223568
> 
> 赞同：0
> 
> 时间：2012-08-31T23:22:14.247
> 
> 标签：python, multithreading, queue

对于我之前提出的问题，我有一个补充问题，如有必要，您可以参考：

[使用 Python 进行长期仪器数据采集 - 使用“While”循环和线程处理](https://stackoverflow.com/questions/12165652/long-term-instrument-data-acquisition-with-python-using-while-loops-and-thre/12166110#comment16284125_12166110)

我经历了一堆 SO 问题和其他阅读，并提出了一个可以正常工作的代码块，尽管它非常初级：

```
import ue9
import LJ_Util
import DAQ_Util
import threading
import Queue

queue = Queue.Queue()

def ljThread(ue9ipAddr):
    print '\nExecuting in ljThread...'
    a = ue9.UE9(ethernet=True, ipAddress=ue9ipAddr)
    reading = a.feedback()
    queue.put(reading)

print "Opening device...\n",
# Opens a UE9 at IP Address 192.168.1.127
ipAdd = '192.168.1.127'
feedbackThread = threading.Thread(target=ljThread, args=(ipAdd,))
feedbackThread.start()

outcome = queue.get()
print outcome
print "\nDone" 
```

我的问题是，我想使用单个线程来访问来自对象 ue9.UE9 的不同实例的信息，该对象与数据采集单元相关联。我预计每个单元将返回不同的数据，但我需要将正确的数据与正确的单元相关联。谁能指出我通过用于将数据传递回调用线程的队列对象来追踪源的正确方法？

谢谢大家，提前，任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:13:21.343

`ljThread`修改您的函数以返回识别信息（例如它正在检查的 IP 地址）以及它读取的数据应该很容易。只需将最后一行替换为：

```
queue.put((ue9ipAddr, reading)) 
```

然后，当您从队列中获取结果时，请执行以下操作：

```
ip, outcome = queue.get() 
```

然后，您可以使用 IP 执行您需要执行的任何操作。

# javascript - 不同脚本中的不同“点击”回调：我可以控制执行顺序吗？

> ID：12223569
> 
> 赞同：1
> 
> 时间：2012-08-31T23:22:40.017
> 
> 标签：javascript, jquery, javascript-events

我有一个管理播放列表剪辑的脚本。它包含一个回调，指定当用户单击剪辑时如何处理播放列表：

```
$('div.clip').bind("click.playlist", function() {
  ...
}); 
```

我现在计划添加 jquery-tabs，并希望创建第二个带有第二个回调的脚本，该脚本指定当用户单击剪辑时如何处理选项卡内容：

```
$('div.clip').bind("click.tabs", function() {
  ...
}); 
```

这是我的问题：当用户单击剪辑时，我希望在“click.playlist”回调*之前*执行“click.tabs”回调。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:26:53.647

恕我直言，我会以另一种方式做到这一点：

```
$('div.clip').bind("clip.playlist", function() {
  ...
}); 
```

和

```
$('div.clip').bind("clip.tabs", function() {
  ...
}); 
```

然后启动它：

```
$('div.clip').click(function(){
    $(this).trigger('clip.playlist').trigger('clip.tabs');
}); 
```

获得对事件链的完全控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:29:24.423

**不能保证**同一元素上的事件处理程序运行的顺序。不要依赖它，在大多数事件系统中都是如此，它们被设计为解耦的。如果你真的需要它，你需要设置一个处理程序来按顺序调用你需要的两个函数。

代替

```
$('div.clip').bind("click.playlist", function() {
  doSomething();
});

$('div.clip').bind("click.tabs", function() {
  doSomethingElse();
}); 
```

做

```
$('div.clip').bind("click", function() {
  doSomething();
  doSomethingElse();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:26:06.917

如果你用过

```
$('div.clip').click(function()
{
    func1().func2()
}); 
```

# android - 获得像这样的选项卡式布局（活动活动下划线）

> ID：12223578
> 
> 赞同：1
> 
> 时间：2012-08-31T23:24:37.437
> 
> 标签：android, android-layout

我首先向您展示我想获得的布局： ![在此处输入图像描述](../Images/305e9f3a4fe7e1c6fe541b72da9251af.png)

有两个部分，活动的一个带有红色下划线，带有 1dp 线：如果用户切换到第 2 部分，则第 2 部分带有下划线，而第 1 部分不再存在。 **请注意，我不想要选项卡式活动中的图标，布局必须像图片中一样：只是带下划线的文本。**

此外，另一条黑色 1dp 线将顶部导航栏与底层内容分开。你能帮帮我吗？我不一定需要选项卡式活动，即使只是线性布局和形状的组合也可以！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:51:50.210

这带有android sdk20。有两种可能的类型，带有或不带有滑动手势（从一个选项卡转到另一个选项卡）。

无需滑动：

```
 import android.app.ActionBar;
        import android.app.FragmentTransaction;
        import android.os.Bundle;
        import android.support.v4.app.Fragment;
        import android.support.v4.app.FragmentActivity;
        import android.view.Gravity;
        import android.view.LayoutInflater;
        import android.view.Menu;
        import android.view.View;
        import android.view.ViewGroup;
        import android.widget.TextView;

   public class Tabs extends FragmentActivity implements ActionBar.TabListener {

private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // For each of the sections in the app, add a tab to the action bar.
    actionBar.addTab(actionBar.newTab().setText(R.string.title_section1).setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText(R.string.title_section2).setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText(R.string.title_section3).setTabListener(this));
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
        getActionBar().setSelectedNavigationItem(
                savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    outState.putInt(STATE_SELECTED_NAVIGATION_ITEM,
            getActionBar().getSelectedNavigationIndex());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.tabs, menu);
    return true;
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the container
    Fragment fragment = new DummySectionFragment();
    Bundle args = new Bundle();
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, tab.getPosition() + 1);
    fragment.setArguments(args);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.container, fragment)
            .commit();
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
}
 } 
```

这是标签+滑动：

```
 import android.app.ActionBar;
     import android.app.FragmentTransaction;
     import android.content.Context;
     import android.os.Bundle;
     import android.support.v4.app.Fragment;
     import android.support.v4.app.FragmentActivity;
     import android.support.v4.app.FragmentManager;
     import android.support.v4.app.FragmentPagerAdapter;
     import android.support.v4.app.NavUtils;
     import android.support.v4.view.ViewPager;
     import android.view.Gravity;
     import android.view.LayoutInflater;
     import android.view.Menu;
     import android.view.MenuItem;
     import android.view.View;
     import android.view.ViewGroup;
     import android.widget.TextView;

    public class TabsSwipe extends FragmentActivity implements ActionBar.TabListener {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs_swipe_new);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding tab.
    // We can also use ActionBar.Tab#select() to do this if we have a reference to the
    // Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by the adapter.
        // Also specify this Activity object, which implements the TabListener interface, as the
        // listener for when this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.tabs_swipe_new, menu);
    return true;
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
}
 } 
```

要更改选项卡的数量，只需更改 getCount() 方法并使其返回 2（而不是 3）并在 getPageTitle() 方法中取消 case 2: 行（如果您只需要两个选项卡）。

您必须在 Android 4.0 或更高版本上运行它。

要使其在较低的 android 版本上运行，您必须使用 ActionBarSherlock 库。您将必须在您的项目中实现它（自己看看如何做到这一点），然后您将不得不更改此代码的某些内容。

```
public class TabsSwipe extends FragmentActivity implements ActionBar.TabListener { 
```

至

```
public class TabsSwipe extends SherlockFragmentActivity implements ActionBar.TabListener { 
```

然后：

-删除所有导入并重新开始导入，当您有选择时，请始终选择“support.v4”。选项或“com.actionbarsherlock.app”。选项

- getActionBar() 到 getSupportActionBar() 的所有发生

-getMenuInflater() 到 getSupportMenuInflater() 的所有发生

有一个 DummySectionFragment 类，这只是片段的一个示例，您必须构建自己的片段并更改活动类中的调用以匹配您的片段名称。

编辑：我忘记粘贴您必须在布局文件夹中创建的 xml（在 res 内）。

没有滑动手势的选项卡：tabs.xml

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/container"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Tabs" /> 
```

带有滑动手势的选项卡：tabs_swipe_new.xml

```
 <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".TabsSwipe" /> 
```

# ios - 在旧 Mac 上开发

> ID：12223581
> 
> 赞同：0
> 
> 时间：2012-08-31T23:25:18.830
> 
> 标签：ios, xcode, macos

我有一个旧的 PowerMac G5，我想知道我是否可以用它来创建一个 ios 应用程序。我查了一下，似乎我无法在上面安装 OSX 雪豹或其他东西，所以我有一个较旧的操作系统。

无论如何，我的问题是，我可以使用旧版本的 xcode 为 iphone 或 osx 正确创建应用程序吗？对不起，如果这个问题很愚蠢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:27:45.267

抱歉，iOS SDK 仅适用于 Intel 目标。基于 PowerPC 的 Mac 无法使用它。

# asp.net-mvc - 在哪里为我的网络网格指定页面/排序（例如在控制器或视图中）？

> ID：12223583
> 
> 赞同：0
> 
> 时间：2012-08-31T23:25:21.463
> 
> 标签：asp.net-mvc, model-view-controller, gridview

我应该在哪里初始化我的网络网格（为什么，请我寻求远见而不仅仅是意见）？

一方面，将当前页码和排序顺序视为“视图问题”似乎是合乎逻辑的，从这个角度来看，在控制器中构建网格与在那里布置 HTML 非常相似。

另一方面，例如页码似乎是一个“位置问题”，在控制器中解析该指令更有意义。

根据经验，当责任分离不明确时，我很有可能会做出一个糟糕的选择，并在以后进行重大重构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:50:08.640

您的视图应该请求一组数据（页码、排序顺序...等）。您的控制器会处理这些请求并将数据呈现给视图。

我将使用默认视图和排序在控制器中初始化您的网格。在分页或排序时，视图会将参数或模型发送到控制器。我喜欢在控制器中尽可能多地保留逻辑。它使修改视图、创建移动视图、使用 ajax 而不是整个页面重新加载等变得更加容易。

还有很多支持分页和排序的 3rd 方网格，你考虑过吗？但是，自己动手并不难。

# iis - Windows 7 IIS FTP 问题

> ID：12223585
> 
> 赞同：1
> 
> 时间：2012-08-31T23:25:29.623
> 
> 标签：iis, windows-7, ftp

我一直在尝试使用 Windows 7 中的 IIS 设置 ftp 服务器。我在本地网络上已经成功，但现在我想将其公开。我转发了端口 21，但是现在当我从外部打开我的 ftp 服务器时（ftp://myexternalip），我确实收到了输入用户名和密码的提示，但是当我登录时，我得到了这个日志：

```
Command:    OPTS UTF8 ON
Response:   200 OPTS UTF8 command successful - UTF8 encoding now ON.
Status: Connected
Status: Retrieving directory listing...
Command:    PWD
Response:   257 "/" is current directory.
Command:    TYPE I
Response:   200 Type set to I.
Command:    PASV
Response:   227 Entering Passive Mode (192,168,178,14,57,219).
Status: Server sent passive reply with unroutable address. Using server address instead.
Command:    LIST
Response:   150 Opening BINARY mode data connection.
Error:  Connection timed out
Error:  Failed to retrieve directory listing 
```

因此，我在我的 ftp 服务器中看不到任何数据/文件。我不知道这里的问题是什么，也不知道如何解决这个问题。我也确定我的防火墙没有阻止 ftp 服务器，因为我把它关掉了。谁有更多的知识可以启发我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:34:34.623

FTP 协议与其他协议不同，因为它不仅使用命令通过的专用端口 (21)（这就是您可以登录等的原因），而且使用自发的其他端口来传输数据有效负载。

这不是问题，当设计 FTP 并且客户端和服务器通常直接看到自己（并且防火墙是外来的）时，但 NAT 改变了游戏规则：您的服务器看到的地址（192.168.178.14）在互联网上不可见。

修复它的唯一方法是在 NAT 上：那里的连接跟踪模块实际上会拦截和操纵命令通道，以将 NATed 地址/端口转换为公共地址/端口。大多数防火墙设备都知道如何做到这一点。

在您的防火墙中查找“触发应用程序”或“FTP 转发”。

# android - Android：在调用之前创建选项菜单

> ID：12223595
> 
> 赞同：0
> 
> 时间：2012-08-31T23:26:33.317
> 
> 标签：android

在按下菜单按钮之前，我无法创建选项菜单。据我所知，当我按下菜单按钮时会调用 onCreateOptionsMenu()，然后创建菜单。我需要在按下菜单按钮之前访问菜单。

到目前为止，我得到了平常的东西。下面的 onCreateOptionsMenu()。

```
public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:37:00.783

你真的想错了。如果您需要“调用 Activity 中的某个菜单项”，只需执行该菜单项将执行的功能，不要尝试以编程方式“按下”该菜单项。

也就是说，如果菜单选项`finish()`在按下时调用 Activity，则只需调用`finish()`而不是尝试虚拟“按下”菜单项。

# excel - VBA 对象数据在集合中被覆盖

> ID：12223598
> 
> 赞同：1
> 
> 时间：2012-08-31T23:26:39.977
> 
> 标签：excel, class, vba, object, collections

在下面的循环中，我将一个类对象添加到另一个类对象内的集合中，该类对象本身就在一个集合中。

```
 Dim opportunity As New ClmOpportunity

    opportunity.name = name

    owners.item(overallOwner).addOpportunity opportunity

    MsgBox opportunity.name

Next i

MsgBox owners("John Smith").opportunities(1).name 
```

第一个消息框显示正确的机会名称，但第二个消息框设置为最后添加的机会，即使 John Smith 是集合中的第一个。

因此，如果我有两个所有者，John Smith 的机会 1 和 Mary Lou 的机会 2，第二个消息框的输出将是两个记录的机会 2。

但正如预期的那样，第一条消息将是机会 1 和 2。

这是 Owner 类模块的代码：

```
Public name As Variant
Public opportunities As New collection

Public Function addOpportunity(opp As ClmOpportunity)

    Dim OppID As String
    OppID = opportunities.count + 1

    opp.ID = OppID
    opportunities.Add opp, OppID

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T23:51:39.087

因此，解决方案是在循环之外实例化机会，然后每次重新初始化，如下所示：

```
Set opportunity = New ClmOpportunity 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:06:44.107

您肯定不会添加“相同”机会对象的多个副本？没有完整的循环很难说。如果您检查集合中的所有项目，它们是否都具有相同的名称？

如果您注释掉标记的行，此代码将显示相同的行为...

```
Sub Tester()

    Dim col As New Collection         
    Dim o As clsTest     'has just a "name" property

    Set o = New clsTest
    o.name = "obj1"
    col.Add o, "key1"

    'compare debug output with the next line
    '  commented/uncommented
    Set o = New clsTest
    o.name = "obj2"
    col.Add o, "key2"

    Debug.Print col(1).name, col(2).name

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T05:22:42.567

您总是添加相同的 ClmOpportunity 对象，因为 Dim as New 仅实例化新对象一次，即使在循环内使用也是如此。

在循环内创建新对象的正确方法是：

```
For ...

  Dim opportunity As ClmOpportunity
  Set opportunity = New ClmOpportunity

Next 
```

# android - 游标加载器在 Spinner onSelectedItem 调用上自动重新查询

> ID：12223602
> 
> 赞同：1
> 
> 时间：2012-08-31T23:26:55.877
> 
> 标签：android, android-fragments, android-spinner, android-loadermanager, android-fragmentactivity

我使用微调器作为操作栏项目（也使用带有滑动的标签导航）。我有 2 个使用加载器加载数据的 listFragments（通过选项卡访问）。我希望每次在微调器中选择不同的项目（在活动级别上工作）时加载程序重新查询。这是片段加载器的调用之一， selectedNumber 是一个字符串，应该从微调器 onSelectedItem 传递给片段（我还不知道如何，但这应该很容易）。

```
 public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection= MyContentProvider.Data.E_NUMBER +"=";
    String[] selectionArgs= {numberSelected};

    return new CursorLoader(getActivity(),  MyContentProvider.Data.CONTENT_URI_EVENTS,
            null, selection, selectionArgs,
            Data.E_ID + " DESC");
} 
```

有没有一种方法可以强制加载程序重新查询内容提供程序，或者我必须取消片段并使用新查询构建另一个片段？

（关于如何将字符串从活动传递到两个片段的一些快速建议会很酷）

# arrays - VBA：变体数组与类型数组与非键集合的迭代速度

> ID：12223603
> 
> 赞同：15
> 
> 时间：2012-08-31T23:27:01.617
> 
> 标签：arrays, vba, collections, iteration, dynamic-arrays

我的项目需要一组用于不同对象的可动态调整大小的数组。一个数组可以包含任意数量的对象，可能是数千个，单个类，但不能包含多个类的对象。

大多数情况下，我将遍历数组，因此使用键控集合并不理想。我想我有两个选择：

第一种选择是为每种对象类型开发一个“List”类，包括添加对象（和扩展数组）、获取 First 和 Last 索引和对象计数以及按索引检索对象的方法（后 4 个将包括数组为空时的错误处理）。

第二种选择是使用 Variant 数据类型开发一个具有相同方法的单个“List”类。显然这是少了很多工作，但我担心速度。使用变体比使用类型对象慢多少？请注意，我将始终在检索时将数组中的变体对象直接转换为类型化变量，例如：

```
Dim myObject As MyClass
Set myObject = variantList.Get(i) 
```

铸造是否提高了速度，还是 vba 仍然必须执行与变体相关的所有类型检查？

另外，这第二个选项会比使用非键控集合更快吗？我读过 Collection 迭代很慢，它们是为查找而设计的。这适用于非键集合，还是仅适用于键值映射集合？

感谢任何可以提供建议的人。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-01T08:32:25.157

我听从了蒂姆·威廉姆斯的建议，做了一些速度测试。

对于每种类型的集合/数组，我首先添加了 100,000 个“SpeedTester”类对象，它只是一个包含长变量（具有 get/set 属性）的 shell 对象。变量的值是循环索引的值（1 到 100,000 之间）

然后我进行了第二个循环，其中涉及访问集合/数组中的每个对象并将对象的 long 属性值分配给 long 类型的新变量。我对每种方法执行了 3 轮，并平均了 And 和 get 循环的时间。

结果如下：

```
Method                      Avg Add Time    Avg Get Time    Total Time
Collection Indexed             0.305          25.498         25.803
Collection Mapped              1.021           0.320          1.342
Collection Indexed For Each    0.334           0.033          0.367
Collection Mapped For Each     1.084           0.039          1.123
Dynamic Array Typed            0.303           0.039          0.342
Static Array Typed             0.251           0.016          0.266 
```

Collection Indexed 和 Collection Mapped 方法涉及将对象保存在集合中。第一个添加没有键，第二个添加了一个键，该键是对象的长属性转换为字符串。然后使用从 1 到 c.Count 的索引在 for 循环中访问这些对象

接下来的两种方法在将变量添加到集合中的方式上与前两种方法相同。但是，对于 Get 循环，我没有使用带索引的 for 循环，而是使用了 for-each 循环。

类型化的动态数组是一个包含 SpeedTester 类型数组的自定义类。每次添加变量时，数组的大小都会扩展 1 个插槽（使用 ReDim Preserve）。get 循环是一个使用从 1 到 100,000 的索引的 for 循环，这对于数组来说是典型的。

最后，静态数组 typed 只是一个 SpeedTester 类型的数组，它被初始化为 100,000 个插槽。显然这是最快的方法。奇怪的是，它的大部分速度提升是在获取而不是添加。由于需要调整大小，我会假设其他方法的添加速度会更慢，而获取每个对象不会比动态数组快。

我对使用 for 循环和 for-each 循环访问索引集合的对象之间的区别感到震惊。映射集合的键查找速度也让我感到惊讶 - 比索引快得多，并且与静态数组以外的所有其他方法相当。

简而言之，它们都是我项目的可行替代方案（除了第一种和最后一种方法，首先是因为它的速度很慢，最后是因为我需要动态调整大小的数组）。我对集合的实际实现方式或动态数组和静态数组之间的实现差异一无所知。任何进一步的见解将不胜感激。

编辑：测试本身的代码（使用动态数组）

```
Public Sub TestSpeed()
    Dim ts As Double
    ts = Timer()

    Dim c As TesterList
    Set c = New TesterList

    Dim aTester As SpeedTester

    Dim i As Long
    For i = 1 To 100000
        Set aTester = New SpeedTester
        aTester.Number = i

        Call c.Add(aTester)
    Next i

    Dim taa As Double
    taa = Timer()

    For i = c.FirstIndex To c.LastIndex
        Set aTester = c.Item(i)

        Dim n As Long
        n = aTester.Number
    Next i

    Dim tag As Double
    tag = Timer()

    MsgBox "Time to add: " & (taa - ts) & vbNewLine & "Time to get: " & (tag - taa)
End Sub 
```

对于动态数组类TesterList：

```
Private fTesters() As SpeedTester

Public Property Get FirstIndex() As Long
    On Error GoTo Leave

    FirstIndex = LBound(fTesters)

Leave:
    On Error GoTo 0
End Property

Public Property Get LastIndex() As Long
    On Error GoTo Leave

    LastIndex = UBound(fTesters)

Leave:
    On Error GoTo 0
End Property

Public Sub Add(pTester As SpeedTester)
    On Error Resume Next

    ReDim Preserve fTesters(1 To UBound(fTesters) + 1) As SpeedTester
    If Err.Number <> 0 Then
        ReDim fTesters(1 To 1) As SpeedTester
    End If

    Set fTesters(UBound(fTesters)) = pTester

    On Error GoTo 0
End Sub

Public Function Item(i As Long) As SpeedTester
    On Error GoTo Leave

    Set Item = fTesters(i)

Leave:
    On Error GoTo 0
End Function 
```

最后，非常简单的 SpeedTester 对象类：

```
Private fNumber As Long

Public Property Get Number() As Long
    Number = fNumber
End Property

Public Property Let Number(pNumber As Long)
    fNumber = pNumber
End Property 
```

# android - 活动中的铅笔素描

> ID：12223605
> 
> 赞同：0
> 
> 时间：2012-08-31T23:28:06.190
> 
> 标签：android

如果有办法做到这一点，请帮助我。

我有一个 ImageView。加载了默认图像。在我的应用程序中，我希望它被圈起来，比如说用铅笔素描，就像用铅笔圈出来的一样，然后有一个箭头从它引出。有没有办法把它放在图像视图周围，在布局中？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:45:24.157

一种方法（可能还有其他方法）是将 ImageView 替换为 RelativeLayout。将您当前的 ImageView 放置在该 RelativeLayout 中，并将第二个 ImageView 放置在其中，使两者重叠在同一个地方。第二个 ImageView 将包含您的铅笔/箭头的图像，否则将是透明的。

根据您正在寻找的确切外观，您可能会发现您需要 RelativeLayout 占用比主图像更多的屏幕空间，以便您的叠加层可以超出该图像。

# android - 安卓 - 摩尔斯电码？

> ID：12223610
> 
> 赞同：1
> 
> 时间：2012-08-31T23:29:15.737
> 
> 标签：android

在 android sdk (android-sdk\samples\android-8\ApiDemos\src\com\example\android\apis\os\MorseCode.java) 中有一个莫尔斯电码示例。当您启动应用程序并键入文本时，它会以摩尔斯电码振动。在 MorseCode.java 中有这部分：

```
 long[] pattern = MorseCodeConverter.pattern(text);

        // Start the vibration
        Vibrator vibrator = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
        vibrator.vibrate(pattern, -1); 
```

我试图将振动更改为在显示屏上显示某些内容。我的意思是，图像可见/不可见。没有成功。

这是另一个例子。

[https://code.google.com/p/androidomatic-keyer/source/browse/src/com/templaro/opsiz/aka/MorsePlayer.java](https://code.google.com/p/androidomatic-keyer/source/browse/src/com/templaro/opsiz/aka/MorsePlayer.java)

我只需要一点帮助。我可以从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:34:05.047

您链接到的库 (com.templaro.opsiz.aka) 有一个`MorseConverter`实用程序类，它返回一个数组`MorseBit`- 您可以改用它：

```
MorseBit[] bits = MorseConverter.pattern(text);
for (MorseBit bit : bits) {
    switch(bit) {
        case MorseBit.DOT:
            print(".");
            break;
        case MorseBit.DASH:
            print("-");
            break;
        ...
} 
```

# jquery - 快速滚动时jQuery滚动加载器加倍结果

> ID：12223614
> 
> 赞同：0
> 
> 时间：2012-08-31T23:29:58.463
> 
> 标签：jquery

我制作了一个 jQuery 脚本，当用户滚动时从数据库中加载项目。唯一的问题是，当用户在页面加载后快速滚动时，脚本的结果会加倍，因此来自数据库的信息会显示两次。不太确定这里发生了什么，但脚本如下。顺便说一句，这一切都准备好了。

```
function last_item_funtion() 
     { 
     var ID=$(".newsItem:last").attr("id");
     $('#feedLoader').html('<img src="../files/images/bigLoader.gif" style="display:block;margin-left:auto;margin-right:auto;">');
     $.post("AJAX/scroll_feed.php?action=get&last_item_id="+ID,

     function(data){
     if (data != "") {
     $(".newsItem:last").after(data); 
     }
     $('#feedLoader').empty();
     });
     }; 

     $(window).scroll(function(){
     if ($(window).scrollTop() == $(document).height() - $(window).height()){
     last_item_funtion();
     }
     }); 
```

这不是我的[jsfiddle](http://jsfiddle.net/2LdvT/1/)，但它简而言之显示了脚本的作用。它没有显示我遇到的问题，但我无法复制它，因为我无法将整个数据库放在 jsfiddle 上。

**更新** 玩完游戏后，我意识到不是用户在页面加载后直接滚动，而是用户连续滚动而不是短滚动。由此我猜测jQuery不会注册数据已经加载，直到滚动停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:12:06.177

好吧，我猜这个`scroll`事件被触发了多次，所以请求被多次完成。尝试以下操作：

```
function bind_scroll() {
    $(window).bind('scroll', function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {
            $(window).unbind('scroll');
            last_item_funtion();
        }
    });
}

function last_item_funtion() {
    var ID = $(".newsItem:last").attr("id");
    $('#feedLoader').html('<img src="../files/images/bigLoader.gif" style="display:block;margin-left:auto;margin-right:auto;">');
    $.post("AJAX/scroll_feed.php?action=get&last_item_id=" + ID,

    function (data) {
        if (data != "") {
            $(".newsItem:last").after(data);
        }
        $('#feedLoader').empty();
        bind_scroll();
    });
};

bind_scroll(); 
```

它绑定`scroll`事件，并在触发后解除绑定。请求完成后再次绑定事件。

（您也可以查看[jQuery.one()](http://api.jquery.com/one/)，但我从未使用过它。）

**编辑：** 在做了一些测试之后，即使我们取消绑定，滚动事件也会被触发很多，所以这里有一个更新的例子，它使用一个全局变量来告诉`scroll`-callback 它是否已经加载了一些东西，或者是否可以做一个新的发帖请求：

```
window.scroll_loading = false;

function last_item_funtion() {
    var ID = $(".newsItem:last").attr("id");
    $('#feedLoader').html('<img src="../files/images/bigLoader.gif" style="display:block;margin-left:auto;margin-right:auto;">');

    $.post("AJAX/scroll_feed.php?action=get&last_item_id=" + ID,
        function (data) {
            window.scroll_loading = false;
            if (data != "") {
                $(".newsItem:last").after(data);
            }
            $('#feedLoader').empty();
        }
    );
};

$(window).bind('scroll', function () {
    if (window.scroll_loading == true) {
        return;
    }
    if ($(window).scrollTop() > $(document).height() - $(window).height() - 10) {
        window.scroll_loading = true;
        console.log("FIRE!");
        last_item_funtion();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:32:25.070

尚未对此进行测试，但看看这是否可以解决您的问题

```
$(window).die("scroll").live("scroll",function(){
     if ($(window).scrollTop() == $(document).height() - $(window).height()){
     last_item_funtion();
     }
     }); 
```

# bash - Bash：从命令行输出中获取部分字符串

> ID：12223615
> 
> 赞同：0
> 
> 时间：2012-08-31T23:30:06.420
> 
> 标签：bash, awk, grep, gawk, amazon-elastic-beanstalk

我在 CentOS 中运行一个命令，它给我一个字符串的输出，我想获取该输出的某个部分并将其设置为一个变量。

我运行命令 ebi-describe-env。

我的输出如下：

```
ApplicationName | CNAME | DATECreated | DateUpdated | Description | EndpointURL |   
EnvironmentID | EnvironmentName | Health | Stack | Status | TemplateName | 
Version Label --------------------------
Web App | domain.com | 2012-02-23 | 2012-08-31 | |
anotherdomain.com | e-8sgkf3eqbj | Web-App-Name | Status | 
Linux | Ready | N/A | 20120831 - daily 
```

我想抓住字符串的 ' `20120831 - daily`' 部分（这个字符串总是会改变但保持在同一个地方）并将其设置为一个变量。

最初我以为我可以使用 grep 或 sed 并在每个 '|' 之后打印一行 并将第 13 行设置为变量。

我对 bash 脚本非常陌生，所以任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T23:31:56.483

使用`awk`：

```
awk -F"|" '{print $NF}' 
```

这将起作用：

```
echo " Web App | domain.com | 2012-02-23 | 2012-08-31 | | anotherdomain.com | 
       e-8sgkf3eqbj | Web-App-Name | Status | Linux | Ready | N/A | 
       20120831 - daily" | awk -F"|" '{print $NF}' 
```

和产量：

```
20120831 - daily 
```

*要分配给变量*（`data.txt`为了简单起见，包含您的字符串，它也适用于`echo`上述）：

```
$ myvar=$(awk -F"|" '{print $NF}' data.txt)
$ echo $myvar
20120831 - daily 
```

*解释*

设置`-F`输入字段分隔符，在本例中为`|`. `NF`是一个内置`awk`变量，表示输入字段的数量，`$`变量前面的 访问该元素，即在本例中为行中的最后一个字段 ( `$NF`)。

*或者*：您可以使用以下命令获取最后三个由空格（`awk`默认）分隔的字段中的每一个：

```
awk '{print $(NF-2), $(NF-1), $NF}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T23:37:38.790

Levon 的回答效果很好，但我只需要证明 shell 脚本总是有其他方法。

这个使用称为的基本工具`cut`

```
echo "Web App | domain.com | 2012-02-23 | 2012-08-31 | | anotherdomain.com |  e-8sgkf3eqbj | Web-App-Name | Status | Linux | Ready | N/A |   20120831 - daily" | cut -d"|" -f13 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:59:27.353

我知道这已经被接受了，但这里是如何在纯 bash 中做到这一点：

```
string="Web App | domain.com | 2012-02-23 | 2012-08-31 | | anotherdomain.com | e-8sgkf3eqbj | Web-App-Name | Status | Linux | Ready | N/A | 20120831 - daily"
myvar="${string##*| }"
echo "$myvar" 
```

# javascript - Indexeddb IDBDatabase 异常 11 新创建 db 时

> ID：12223618
> 
> 赞同：1
> 
> 时间：2012-08-31T23:30:22.607
> 
> 标签：javascript, indexeddb

我对 indexeddb 有疑问 - 我正在使用此方法打开和设置数据库

```
DBService.prototype.open = function (dbName, entity, cb) {
  var self = this;
  var req = indexedDB.open(dbName)
  req.onsuccess = function(e) {
    var v = 1;
    DBService.storage.db = e.target.result;
    var db = DBService.storage.db;
    // We can only create Object stores in a setVersion transaction;
    if (v != db.version) {
      var setVrequest = db.setVersion(v);

      setVrequest.onerror = function (err, stack) {
        console.log(err, stack);
      }

      setVrequest.onsuccess = function(e) {
        if(db.objectStoreNames.contains(entity)) {
          db.deleteObjectStore(entity);
        }

        var store = db.createObjectStore(entity,
          {keyPath: "timeStamp"});
        e.target.transaction.oncomplete = function() {
          console.log(db);
          cb(db);
        };
      };
    } else {
      cb(db);
      /*
      req.transaction.oncomplete = function() {
        cb(db);
      */
    }
  };

  req.onerror = function (err, stack) {
    console.log(err)
    console.log(stack)
  }
}; 
```

一切都很好，除非数据库从未打开过。我仍然得到

```
InvalidStateError: DOM IDBDatabase Exception 11 
```

（当我 console.log req.error 时）

我知道这段代码现在很脏，我正在尝试一切。我保证当它运行良好时，我会重构它！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:57:08.957

我假设您仅在 chrome 中使用此页面，因为其他浏览器不再支持 setVersion。

你到底是什么意思“除了没有打开数据库的情况外，一切都很好。”？有时 db.open 调用失败并调用 req.onerror ？在任何情况下，您的错误事件处理程序都应该只接受一个参数，只传递一个错误，而不是堆栈。

InvalidStateError: DOM IDBDatabase Exception 11 异常的一个常见原因是在请求对象收到任何事件之前访问 req.error。例如，此代码将抛出异常 11：

```
var request = indexedDB.open("some db");
console.log(request.error); 
```

然而

```
var request = indexedDB.open("some db");
request.onerror = request.onsuccess = function(e) { console.log(request.error); }; 
```

不会抛出异常。

您可能还想添加`setVrequest.onblocked = function(e) { console.log("got blocked:" + e); };`只是为了知道被阻止的事件是否会给您带来一些麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T21:37:08.550

“InvalidStateError：DOM IDBDatabase Exception 11”的另一个原因是当您尝试在 Chrome 中的 setVersion 操作中执行另一个事务时 - 通常在创建/升级数据库后立即填充数据。

如果您需要在 setVersion 完成后填充数据，那么您必须使用此模式，否则您将收到该异常 - 奇怪的是 Chrome 22 我只有在将扩展程序发布到 chrome 商店后才看到这一点。

确保使用此模式：

[https://groups.google.com/a/chromium.org/forum/#!msg/chromium-html5/VlWI87JFKMk/6GWbB_HvxtsJ](https://groups.google.com/a/chromium.org/forum/#!msg/chromium-html5/VlWI87JFKMk/6GWbB_HvxtsJ)

```
db.setVersion('3').onsuccess = function(event) {
var transaction = event.result;
transaction.oncomplete = function() {
  db.transaction('mystore', 'readwrite').onsuccess = populateDataStore;
 };
} 
```

# jquery - 使用 .datepicker() 两次

> ID：12223622
> 
> 赞同：0
> 
> 时间：2012-08-31T23:31:27.217
> 
> 标签：jquery

我有一个使用 jQuery 的表单`datepicker()`。这很好用。

现在，我正在为我的用户添加内联编辑功能。但是，`datepicker()`不会将值返回到可编辑字段。

剧本：

```
<script>
    $(function() {
       $("td[id^=rowDate]").click(function() {
           $(this).html('<input type="text" name="editStartDate" value="" class="editStartDate" />');
           $(".editStartDate").datepicker();       
       });
    });
</script> 
```

我不确定这是否重要，但我也调用`datepicker()`after this 函数来处理单独的任务：

```
<script> $(".startDate, .endDate").datepicker(); </script> 
```

我想`datepicker()`返回一个新值`#editStartDate`我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:35:47.603

干净的方法：

```
$(function() {
   $("td[id^=rowDate]").click(function() {
        // if there is already an input-field in this TD, return...
        if($(this).find('input').length > 0)
            return;

        // else create new input-field-object
        $('<input type="text" name="editStartDate" />')
            .addClass('editStartDate') // add the corresponding class (not useful anymore, but for completeness)
            .appendTo(this) // append that to the TD
            .datepicker(); // run the datepicker
   });
}); 
```

# r - 表中的 if/else 语句

> ID：12223628
> 
> 赞同：3
> 
> 时间：2012-08-31T23:32:37.900
> 
> 标签：r, if-statement

比方说，我有一个`table`用标题命名的表，看起来像

`A B`
`1 2`
`2 1`

我想要做的是添加一个新列`table$C`，这样

1.  如果`table$A < table$B`那么`table$C <- (table$B-table$A)/table$A`
2.  如果`table$A > table$B`那么`table$C <- (table$B-table$A)/table$B`

对于每一行，以便生成的表看起来像

`A B C`
`1 2 1`
`2 1 -1`

我尝试过，很天真，
`> table$C <- if (table$A < table$B) (table$B-table$A)/table$A else (table$B-table$A)/\table$B`
但
`> table$C <- ifelse(table$A < table$B, (table$B-table$A)/table$A, (table$B-table$A)/table$B)`
他们都没有工作。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T04:53:21.630

像往常一样，有*很多*方法可以做到这一点。假设您的规则保持不变并且您从来没有被零除的情况，这里有一些想法......

```
df <- data.frame(A = c(1, 2), B = c(2, 1))

# Making use of pmin.
df$c <- (df$B - df$A) / pmin(df$A, df$B)

# Making use of 'with' ( See ?with )
df$C <- with(df, (B - A)/pmin(A, B))

# Making use of data.table.
library(data.table, quiet = TRUE)

## data.table 1.8.2 For help type: help("data.table")

dt <- data.table(df)

dt[, `:=`(C, (B - A)/pmin(A, B))]

##    A B  C
## 1: 1 2  1
## 2: 2 1 -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:57:28.220

正如您所指出的，您的第二种方法（没有原始拼写错误）是正确的，但我认为这更快、更容易阅读且不易出错：

```
table$C <- with(table, ifelse(A < B, (B - A)/A, (B - A)/B)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:40:30.207

使用逻辑索引：

```
table$C <- (table$B-table$A)/((table$A<=table$B)*table$A+(table$A>table$B)*table$B) 
```

# ruby-on-rails - 当我尝试捆绑安装 Nokogiri 时出现捆绑器错误

> ID：12223643
> 
> 赞同：3
> 
> 时间：2012-08-31T23:36:13.503
> 
> 标签：ruby-on-rails, ruby, nokogiri

当我`$bundle install --without production`，我得到这个：

```
An error occured while installing nokogiri (1.5.5), and Bundler cannot continue.
Make sure that `gem install nokogiri -v '1.5.5'` succeeds before bundling. 
```

我的 gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

group :development, :test do
gem 'sqlite3', '1.3.5'
gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '3.2.5'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
gem 'capybara', '1.1.2'
end

group :production do
gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:42:32.730

您可能缺少本机扩展的一些依赖项。当你运行`gem install nokogiri -v '1.5.5'`它应该输出丢失的东西，你可以修复它。

在 Debian/Ubuntu 上，您还可以运行以下命令

`sudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion`

安装 Ruby / gems 通常需要的依赖项。这可能会为您解决问题。

# jquery - jquery - 写入时更改文本

> ID：12223651
> 
> 赞同：-1
> 
> 时间：2012-08-31T23:37:04.640
> 
> 标签：jquery, html

我有一个带有 ID 的 html 输入字段。页面的另一部分也有一些空的 div。我想要做的是在输入字段中复制文本 AS PER WRITING。与本网站在创建问题时所做的完全相同。（注意你输入的文本区域，以及它下面的部分——这正是我想要的功能）。

我想为此使用 jQuery。什么功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:41:11.313

On keyup 功能将执行此操作。

```
$("#myinput").keyup(
    function(){
        my_text = $(this).val(); // grab what's in the field
        // do stuff with the text so that it's what you want
        $("#other_div").val(my_text);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:40:00.630

```
$("#myInputField").keydown(function(){
  $("#myDiv").html($(this).val());
}) 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:31:40.967

最好尝试使用 keyup，因为如果使用 keydown，您将丢失最后一个字符。

```
$("#myInputField").keyup(function(){
   $("#myDiv").html($(this).val());
}) 
```

（更新是因为我正在寻找同样的东西）。

# html - 有没有办法在不使用相对定位的情况下让水平 ul 跑出页面而不是换行？

> ID：12223657
> 
> 赞同：0
> 
> 时间：2012-08-31T23:37:52.690
> 
> 标签：html, css

假设我有一个无序列表元素在水平行（内联）中显示列表项，但内容比包含元素宽。有没有办法让他们简单地跑出页面而不是在不使用绝对定位的情况下下降到新行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:40:24.760

当然有，只需使用：

```
ul {
    white-space: nowrap;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uruu8/)。

这会强制包含的内容沿着一条不换行的线继续。

参考：

*   [`white-space`财产，在 MDN](https://developer.mozilla.org/en-US/docs/CSS/white-space)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:40:54.997

只需使用`white-space: nowrap;`.

# java - 解析java xml文件中的字符串

> ID：12223666
> 
> 赞同：0
> 
> 时间：2012-08-31T23:39:04.183
> 
> 标签：java, xml, parsing

这是我需要解析的xml文件。我想从 weatherDesc 标签中提取数据

```
<weather>
  <date>2012-08-31</date>
  <tempMaxC>33</tempMaxC>
  <tempMaxF>91</tempMaxF>
  <tempMinC>22</tempMinC>
  <tempMinF>71</tempMinF>
  <windspeedMiles>15</windspeedMiles>
  <windspeedKmph>24</windspeedKmph>
  <winddirection>W</winddirection>
  <winddir16Point>W</winddir16Point>
  <winddirDegree>260</winddirDegree>
  <weatherCode>113</weatherCode>
  <weatherIconUrl>
    <![CDATA[
    http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png
    ]]>
  </weatherIconUrl>
  <weatherDesc>
    <![CDATA[ Sunny ]]>
  </weatherDesc>
  <precipMM>0.0</precipMM>
</weather> 
```

当前代码：我希望它打印出weatherDesc ....在这种情况下为“Sunny”

```
URL url = new URL("http://free.worldweatheronline.com/feed/weather.ashx?   key=14d7241962022903123108&q=Pittsburgh,pa.xml");
URLConnection conn = url.openConnection();

DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(conn.getInputStream());  

Element root = doc.getDocumentElement();
NodeList nodel = root.getChildNodes();

for (int a = 0; a < nodel.getLength(); a++) {
     String weather = /////////////////????? code i dont know
     System.out.println(weather);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:56:46.090

您可以使用 getElementsByTagName 来获取元素：

```
NodeList nodel = root.getElementsByTagName("weatherDesc");

if(nodel.getLength() > 0) {
    Node item = nodel.item(0);
    String weather = item.getTextContent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T18:56:51.563

更好地使用 jaxb 进行 xml 和 java 对象之间的任何转换

[http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:56:58.753

这将打印`weatherDesc`文档中所有标签的值：

```
NodeList nodeList = doc.getElementsByTagName("weatherDesc");

for (int i = 0; i < nodeList.getLength(); i++) {
    System.out.println("Weather: " + nodeList.item(i).getNodeValue()); 
```

# jquery - 使用 jquery .on() 在 div 按钮上触发提交会给出“(object) has no method 'apply'”

> ID：12223671
> 
> 赞同：0
> 
> 时间：2012-08-31T23:39:34.453
> 
> 标签：jquery, delegates

我有一个用作按钮的 div，为了提交包含它的表单，我使用 jQuery 的 .on() 在内容包装器上设置了一个委托，但是单击时没有调用回调函数发生（我在 Chrome 中设置断点来检查这个），并且我收到错误“Uncaught TypeError: Object #signup-button has no method 'apply'”。

我最初认为这可能是因为我使用字符串作为 .on() 的第二个参数，但我之前用另一种事件类型（不是点击）做过同样的事情，它已经奏效了，所以我很难过.

我的 JS 看起来像：

```
var myApp = function () {
  var handleSubmitForm = function (e) {
    $(this).closest('form').submit(); // this is what's not getting called w/breakpoint
  }

  var init = function () {
    var self = this;

    $('.content').on('click', '#signup-button', self.handleSubmitForm);
    $('.content').on('click', '#login-button', self.handleSubmitForm);
  }

  return {
    init: init,
    handleSubmitFrom: handleSubmitForm
  }
}(); 
```

HTML类似于：

```
<div class="content">
  <form>
    <div id="signup-button">
      <span>SIGNUP</span>
      <img src="/path/">
    </div>
  </form>
</div>
<script>
  myApp.init();
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:47:35.337

```
var myApp = {
    handleSubmitForm : function(e) {
        $(this).closest('form').submit();
    },

    init : function() {
        var self = this;

        $('.content').on('click', '#signup-button', self.handleSubmitForm);
        $('.content').on('click', '#login-button', self.handleSubmitForm);
    }
};
myApp.init(); 
```

[http://jsfiddle.net/b84cE/](http://jsfiddle.net/b84cE/)

# javascript - 试图让 AJAX 调用不那么笨重

> ID：12223683
> 
> 赞同：3
> 
> 时间：2012-08-31T23:40:33.797
> 
> 标签：javascript, jquery, ajax, design-patterns

我最近阅读了一篇关于让您的代码尽可能少地依赖 DOM 的博客文章（即尽可能远离 $(document).ready() 函数）。我已经成功地通过创建这样的视图模块来做到这一点：

```
var View = function (e) {
  this.element = e;
};

View.prototype = {
  show: function () {
    this.element.fadeIn();
  },
  //More manipulation functions
};

$(document).ready(function () {
  var myView = new View($('#element'));
  myView.show();
}); 
```

我似乎找不到将 AJAX 调用包装到对象中的方法，因此它们不依赖于正在加载的 DOM，因此每次进行 AJAX 调用时我都不必编写类似的内容：

```
$.ajax({
  url: "signout.php",
  type: "POST",
  dataType: "json",
  error: function (jqXHR, textStatus, errorThrown) {
    alert('An error occured while trying to log out.');
  },
  success: function (data, textStatus, jqXHR) {
    settingsWidget.getAction('#settings').triggerAction(500, function () {
      WIDGETS.setOnTop('#login', SideEnum.RIGHT);
    });
  },
  complete: function (jqXHR, textStatus) {}
}); 
```

有没有一种设计模式可以用来实现我想要做的事情？此外，最好将 jQuery DOM 对象传递给 View 对象，还是仅将选择器传递给 View 对象中的 DOM 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:48:16.420

你调查过`$.ajaxSetup()`吗？我为我设置了所有常用的 ajax 选项，然后每次你制作`$.ajax()`, `$.getJson()`,`$.post()`等时它都会使用你在设置中预定义的所有默认值。至于不依赖dom，尽量不打扰就很好了！看看backbone.js，它可以解决你所有的问题，包括设置和View.prototype，因为它会为你完成所有这些。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:23:26.783

值得一看：[**全局 Ajax 事件处理程序**](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T01:58:08.840

弄脏 DOM 一直是个问题。Backbone.js 很棒，它有助于为您的代码提供大量结构。Douglas Crockford 的模块模式也将有助于为您的许多代码提供封装。

[http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

一些设计模式的精彩概要

[http://addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

这就是我目前用作设计模式的

[https://github.com/bmarti44/jq-mod-pat](https://github.com/bmarti44/jq-mod-pat)

你使用什么取决于你，但你应该可以使用任何这些模式进行 ajax 调用。希望其中之一能给你一些启发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T00:09:44.873

我会给你和你应该做什么的想法：

```
var View = function(e) {
  this.$el = e; //using "$" before variable with jquery object is better for reading code
  this.$settings = $('#settings');
  this.login = $('#login');
}

View.prototype = {
  show: function() {
    this.element.fadeIn();
  },

  signOut: function() {
    var self = this;

    $.ajax({
        url:                "signout.php",
        type:               "POST",
        dataType:           "json",
        error:          function(jqXHR, textStatus, errorThrown) {
            alert('An error occured while trying to log out.');
        },
        success:            function(data, textStatus, jqXHR) {
          self.someAction();
        },
        complete:           function(jqXHR, textStatus) {
        }
    });

  },

  someAction: function() {
    var self = this;
    settingsWidget.getAction(self.settings).triggerAction(500, function() {
      WIDGETS.setOnTop(self.login, SideEnum.RIGHT);
    });
  }
} 
```

我不确定你应该在 getAction 和 setOnTop 函数中传递什么作为参数，但我告诉你如何缓存对象并使它们成为某种类变量。

# pandas - 如何有效地分解 Dataframe 中的数据（给定一组权重、映射等）？

> ID：12223689
> 
> 赞同：0
> 
> 时间：2012-08-31T23:41:48.130
> 
> 标签：pandas

我有一个数据框，它保存特定聚合级别的数据——我们称之为区域性的。

我还有一个解释这些区域是如何形成的字典。像这样的东西：

```
map = {'Alabama': 'region_1', 'Arizona': 'region_1', 'Arkansas': 'region_2' ... } 
```

以及其区域内每个状态的一组权重，存储为一系列：

```
Alabama    .25
Arizona    .75
Arkansas   .33
.... 
```

有没有一种有效的方法来应用这个分解图来获得一个州级的新数据框？

聚合很容易：

```
df_regional = df_states.groupby(map).sum() 
```

但是我该如何进行分解呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:19:12.323

```
In [238]: map = {'Alabama': 'region_1', 'Arizona': 'region_1', 'Arkansas': 'region_2'}

In [239]: weigths = pandas.Series([.25, .75, .33], index=['Alabama', 'Arizona', 'Arkansas'])

In [240]: df_states = pandas.DataFrame({'map': pandas.Series(map), 'weigths': weigths})

In [241]: df_states
Out[241]:
               map  weigths
Alabama   region_1     0.25
Arizona   region_1     0.75
Arkansas  region_2     0.33

In [242]: df_regional = df_states.groupby('map').sum()

In [243]: df_regional
Out[243]:
          weigths
map
region_1     1.00
region_2     0.33 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:39:36.853

假设有两个数据帧`df_states`和`df_regional`，具有以下结构：

```
In [36]: df_states
Out[36]: 
          Weight    Region
Alabama     0.25  region_1
Arizona     0.75  region_1
Arkansas    0.33  region_2

In [37]: df_regional
Out[37]: 
          Value
region_1    100
region_2     80 
```

是否`pandas.merge`以看起来有用的方式排列数据？

```
In [39]: df = pandas.merge(df_states, df_regional, left_on='Region', right_index=True)

In [40]: df
Out[40]: 
          Weight    Region  Value
Alabama     0.25  region_1    100
Arizona     0.75  region_1    100
Arkansas    0.33  region_2     80

In [41]: df.Weight * df.Value
Out[41]: 
Alabama     25.0
Arizona     75.0
Arkansas    26.4 
```

# animation - VTK 模型动画

> ID：12223691
> 
> 赞同：0
> 
> 时间：2012-08-31T23:41:59.957
> 
> 标签：animation, model, xtk

首先 .. 恭喜您为社区创建了如此出色的库。

我一直在查看 XTK 以获取有关如何加载场景图文件的示例，更重要的是对于我们的应用程序，如何可视化 VTK 模型动画。是否支持这些功能？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:01:35.713

我认为这应该已经可以通过添加所有 vtk 文件并将可见性设置为 false 来实现。然后，在 onRender 回调中，显示一个并跟踪显示哪些显示，哪些隐藏。如果您能够共享数据，我很乐意看看！

# php - 带有循环的 PHP 表并将表单数据传递到下一页

> ID：12223693
> 
> 赞同：0
> 
> 时间：2012-08-31T23:42:04.260
> 
> 标签：php, html, forms, loops

我正在为一个朋友制作一个基于网络的联系人列表。我已经完成了 html 部分并处理了 PHP 脚本等。我将主页作为表格标记在while循环中。我需要做两件事，但不知道如何完成。

首先，每一行必须有两个提交按钮，一个用于编辑，另一个用于详细信息，并传递全局 $_POST 中的值。

其次，列表大约有 300 行，所以我使用 while 循环来创建表。

我有表单工作并传递数据，但它总是传递表格的最后一行。这是我的带有表格的主页：

```
<?php
if 
    (!isset ($_SESSION['username'])) 
            {
                    session_start();
                }
        ?>      
<html>
<head>

<title>Client Contact List</title>

</head>

<?php
$user1 = implode(',',$_SESSION);

//DB information
        require_once('/includes/db.php'); 

//Declaring edit and details
        $edit = "<INPUT type='image' src='/addressbook/images/edit.png' onclick='\addressbook\edit.php'>"; 
        $details = "<INPUT type='image' src='/addressbook/images/contact.gif' name='details' onclick='f1.action='\addressbook\contact_details.php'>";   

//Table declarations and such       
        mysql_connect("$host", "$username", "$password") or die(mysql_error());
        mysql_select_db("$db_name")or die("cannot select DB");
        $result = mysql_query("SELECT * FROM contacts")  or die(mysql_error());
        $num=mysql_numrows($result);

        $user1 = implode(',',$_SESSION);
        $userresults = "SELECT first FROM i_user where userid IN $user1";
        $user = mysql_query($userresults);
//      print_r ($_SESSION);
//      print_r ($_POST);

?>

<body style="background-image: url('Images/background_login.jpg');">

        <br><br><br><br><br><br>

<table>
    <br><br>
        <tr><td width="500">Welcome Back, <?php echo $user; ?></td><td width="500"></td><td width="300"><form name="search" method="post" id="searchform" action="<?php echo $_SERVER['PHP_SELF'];?>"><label for="searchtext">Search:&nbsp; </label><input type="text" name="name" /> <input type="submit" name="submit" value="Search" /></form>
    </td></tr>
</table>
        <br> 
        <form name="f1" method="post" action="/addressbook/edit.php">
<table border="1">
    <tr> 
    <?php
        echo "<table border='1'>";
        echo "<tr> 

                <th>First</th> 
                <th>Last</th>  
                <th>Company</th> 
                <th>Primary Email</th>
                <th>Secondary Email</th> 
                <th>Primary Phone</th>  
                <th>Second Phone</th> 
                <th>Action</th>
            </tr>";

    $i=0;
            while ($i<$num) {
                            $id = mysql_result($result,$i,"id");
                                $first = mysql_result($result, $i, "first");
                                $last = mysql_result($result,$i, "last");
                            $company = mysql_result($result, $i, "company");
                                $email1 = mysql_result($result,$i, "email1");
                                $email2 = mysql_result($result,$i, "email2");
                                $phone = mysql_result($result,$i, "phone");
                                $mobile = mysql_result($result,$i, "mobile");

        // Print out the contents of each row into a table      
            echo "<tr><td width = '100'><center><input type='hidden' value='$first' name='first'>"; 
            echo $first;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$last' name='last'>"; 
            echo $last;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$company' name='company'>"; 
            echo $company;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$email1' name='email1'>"; 
            echo $email1;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$email2' name='email2'>"; 
            echo $email2;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$phone' name='phone'>"; 
            echo $phone;
            echo "</center></td><td width = '100'><center><input type='hidden' value='$mobile name='mobile'>";
            echo $mobile;
            echo "</center></td><td width = '100'><center>"; 
            echo $edit;
            echo " &nbsp&nbsp ";
            echo $details;
            echo "</td></center></tr>"; 
            echo "<input type='hidden' value='$id name='id'></td>";

        $i++;
        }  
    ?> 
</tr>
</table>
</form>
</body>
</html> 
```

这将被定向到详细信息或编辑页面。下面是编辑页面......

```
<?php
if     
        (!isset ($_SESSION['username'])) 
            {
                    session_start();
                }

?>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Edit Contact Information</title>
</head>

<?php

//DB information
    require_once('/includes/db.php'); 
    mysql_connect("$host", "$username", "$password") or die(mysql_error());
    mysql_select_db("$db_name")or die("cannot select DB");

$id = $_POST['id'];
$first = $_POST['first'];
$last = $_POST['last'];
$company = $_POST['company'];
$email1 = $_POST['email1'];
$email2 = $_POST['email2'];
$phone = $_POST['phone'];
$mobile = $_POST['mobile'];

//pulling the record id from the main login page.
    $first=$_POST['first'];
    $query="SELECT * FROM contacts where last=$last";
    $result=mysql_query($query);

print_r($_POST);
?>
<html xmlns="http://www.w3.org/1999/xhtml">

<body style="background-image: url('Images/background_login.jpg');">
<br><br><br><br><br>
<!-- First Table with the back and search option but disabled for now -->
<table>
        <br>
            <tr>
            <td width="500">    
                    <input type='button' value='Back' onClick='history.go(-1)'> 
                </td>
                <td width="500"></td>
                <td width="300">
                <!--    <form name="search" method="post" id="searchform" action="<?php echo $_SERVER['PHP_SELF'];?>">
                        <label for="searchtext">Search:&nbsp; </label>
                        <input type="text" name="name" /> <input type="submit" name="submit" value="Search" />
                    </form> -->
                </td>
            </tr> 
    </table>
                <br><br>
                <center>
<!-- Second Table with form data pulled out for Identify -->
<table>
    <tr>
      <th>
            <table>
            <tr> 
                    <td bgcolor="silver" colspan="4"><center>Identify</center></td>
                </tr>
                <tr>                    
                <td width="100"><center><b>Title</b></center></td>
                <td width="100"></td>
                <td width="150"><center><b>Company Name</b></center></td>       
            </tr>
            <tr>
                <td width="100"><input value="Title"></td>
                <td width="100"></td>   
                <td width="100"><? echo $company ?></td>
            </tr>
            <tr><td colspan="4"></td></tr>
            <tr>                    
                <td width="100"><center><b>First Name</b></center></td>
                <td width="100"></td>
                <td width="100"><center><b>Last Name</b></center></td>      
            </tr>
            <tr>
                <td width="100"><input value="Test"></td>
                <td width="100"></td>   
                <td width="100"><input value="Test"></td>
            </tr>
    </table>
    </th>     <!-- Space between the contact info and Indenty -->
        <td width="100">
    </td>   

   <th>
    <td>              <!-- Third Table with form data pulled out -->
        <table>
            <tr> 
                <td bgcolor="silver" colspan="4"><center>Contact Information</center></td>
            </tr>
            <tr>                    
                <td width="100"><center><b>Office Phone</b></center></td>
                <td width="100"></td>
                <td width="150"><center><b>Mobile Name</b></center></td>        
            </tr>
            <tr>
                <td width="100"><input value="Test"></td>
                <td width="100"></td>   
                <td width="100"><input value="Test"></td>
            </tr>
            <tr>
                <td colspan="4"></td>
            </tr>
            <tr>                    
                <td width="100"><b>Primary Email</b></td>
                <td width="100"></td>
                <td width="150"><b>Secondary Email</b></td>     
            </tr>
            <tr>
                <td width="100"><input value="Test"></td>
                <td width="100"></td>   
                <td width="100"><input value="Test"></td>
            </tr>
    </table>
    </td>
  </th>
<tr height="100"> <td colspan="9"></td> </tr>
      <th class="style2">
    <table>
         <tr width="400"></tr>
            <tr> 
                <td bgcolor="silver" colspan="4"><center>Applications Used</center></td>
            </tr>
            <tr>
                <td width="100"></td>   
            </tr>
            <tr>
                <td colspan="4"></td>
            </tr>
            <tr>                    
                <td width="100"></td>
            </tr>
            <tr>
                <td width="100"></td>
                <td width="100"></td>   
                <td width="100"></td>
                <td width="100"></td>
            </tr>
    </table>
</th>
  <td width="200"></td> 
  <td>
   <th class="style2">
        <table>
            <tr> 
                <td bgcolor="silver" colspan="4"><center>Internal Information</center></td>
            </tr>
            <tr>                    
                <td width="100"><center><b>Account Mgr</b></center></td>
                <td width="100"></td>
                <td width="150"><center><b>Client Relations</b></center></td>       
            </tr>
            <tr>
                <td width="100"><input value="Test"></td>
                <td width="100"></td>   
                <td width="100"><input value="Test"></td>
            </tr>
            <tr><td colspan="4"></td></tr>
        <tr>                    
                <td width="200"><center><b>Acct Development</b></center></td>
                <td width="100"></td>
                <td width="100"><center><b>Project Mgr</b></center></td>        
            </tr>
            <tr>
                <td width="100"><input value="Test"></td>
                <td width="100"></td>   
                <td width="100"><input value="Test"></td>
            </tr>
    </table>
</th>

</td>
    </table>    
</center>
</body>

</html> 
```

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:54:30.690

将表单标签放在循环内。并将提交按钮放在表单标签内。

听起来您需要很多表格，而不是包含很多字段的表格。

还有另一个建议.. [jqgrid](http://jqframework.com/jqgrid/ "JQgrid")在这里使用可能是一件好事。如果有机会，请查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:53:02.953

问题是您正在创建大量具有相同名称的元素......每一行都有一个名称为 email1、email2、电话、手机等的输入。

当您提交表单时，它只采用具有给定名称的最后一个 html 元素的值。所以它总是会给你最后一行。

您可以做的是每个属性只有 1 个隐藏输入。然后，当您选择一行时，您可以使用 javascript 设置隐藏输入的值。

但是，为了更简单...您已经将所有用户数据存储在数据库中，因此您无需将其全部传递到下一页。只需将 id 传递到下一页，然后当您到达下一页时执行选择查询以获取该用户的所有数据。

这样你就可以有 1 个隐藏的 id 输入。当用户选择他们想要编辑的行时，使用 Javascript 设置该输入的值。

每个按钮应如下所示：

```
echo "<input type=\"button\" onclick=\"document.form.id=$id\">"; 
```

输入应如下所示：

```
echo "<input type=\"hidden\" name=\"id\"/>"; 
```

然后在编辑页面上使用：

```
$id = $_POST['id'];
$query = "SELECT id, first, last, company, email1, email2, phone, mobile 
          FROM contacts WHERE ID=$id"
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result);
$id = $row['id'];
$first = $row['first'];
etc... 
```

# git - Git 并与选定用户共享 /bin

> ID：12223694
> 
> 赞同：0
> 
> 时间：2012-08-31T23:42:19.347
> 
> 标签：git, sharing, restrict

对 Git 来说有点新，但我正在考虑从 SVN 迁移过来。我知道 Git 不允许您阻止用户访问单个目录，因此在访问方面是全有或全无，但我经常遇到的情况是我想对整个项目使用源代码控制，但只共享/bin 目录与客户端。是否有这方面的策略或最佳实践？我将 BitBucket 视为主机，因此我不会自己托管 Git，因此我认为我无法对 Git 的工作方式进行任何修改。

你们是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:50:46.853

将`bin`目录放在单独的存储库中。如果它*必须*是子目录，请使用子模块。

# objective-c - sectionNameKeyPath 是否允许 NSNumber？

> ID：12223695
> 
> 赞同：0
> 
> 时间：2012-08-31T23:42:23.793
> 
> 标签：objective-c, ios, nsfetchedresultscontroller

可以？

我有我的 NSFetchedResultsController，

```
sectionNameKeyPath:@"month.month_" 
```

月指父母关系。而month_是我的核心数据模型中的一个NSNumber。

这应该工作吗？或者month_必须是一个字符串？如果是这样，还有其他方法吗？

文档对此不是很清楚。

任何帮助表示赞赏。

谢谢！

努诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:22:09.483

是的，它确实允许 NSNumber。

它在我的情况下不起作用的原因是我没有实施

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

在没有这个的情况下，它没有显示带有部分的表格视图。让我相信它可能不支持 NSNumber。但确实如此。

# numpy - numpy：你如何“破坏”一个 numpy 操作？

> ID：12223705
> 
> 赞同：3
> 
> 时间：2012-08-31T23:44:12.217
> 
> 标签：numpy

我不小心尝试在 numpy 中创建一个 200,000 x 200,000 的数组。Control-C 似乎没有中断操作。有没有办法在不简单地杀死 python 会话的*情况下停止数组创建？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:47:02.330

很不幸的是，不行。Python（和 MatLab，我使用的唯一其他分析包）在当前操作（未运行）完成之前不会检测到用户中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T04:54:22.257

这不起作用的原因是 numpy 有很大一部分是用 C 编写的。

当 Python 开始执行编译函数时，Python 信号处理实际上会暂停，直到编译代码的执行完成。

这对您的交互式 Python 会话来说是个坏消息，但除了等待不可避免的 OutOfMemoryError 或终止会话之外，您无能为力。

# sql - 将 Zend Db Select 查询转换为 sql 查询

> ID：12223719
> 
> 赞同：3
> 
> 时间：2012-08-31T23:48:03.957
> 
> 标签：sql, zend-framework, zend-db, zend-db-select

有什么方法可以在查询数据库之前将 Zend db Select 或 Zend DB 查询转换为 SQL 查询？还有其他解决方法吗？

因为我想构建一个 Zend DB 无法处理的更复杂的 SQL 查询，而不修改我当前的 Zend db 代码结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:48:11.253

您可以通过以下方式将 Zend db Select 对象转换为字符串`$select->__toString()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-21T08:12:47.963

对于一个`Zend\Db\Sql\Select`对象（在 Zend 2.2 中），

`$select->getSqlString();`为我工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T01:44:24.520

您总是`echo $select`可以使用纯 SQL 查询返回字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-12T15:51:50.407

对于 Zend 框架`1.*`，您可以使用 assemble

```
echo $select->assemble(); 
```

# c# - 对包含数字数据的字符串类型数据表的特定列进行排序

> ID：12223722
> 
> 赞同：3
> 
> 时间：2012-08-31T23:49:11.803
> 
> 标签：c#

我有一个包含多列的数据表（.Net）。其中一列说 RollNo 是字符串类型，但包含数字数据。例如。**1、2、3、4、5、6、7、8、9、10、11、12、13、14**。我正在尝试使用以下内容进行排序：

```
string sql = 
  "Select StudentID, RollNo, AdmissionID,(FirstName + Space(1) + Isnull(MiddleName,'') + Space(1) + Isnull(LastName,'')) as Name," +
  " PermState as State from Students where ClassId  = '" + ddlClass.SelectedValue + "'" +
  " order by RollNo";

DataTable dt = bl.GetDataSet(sql);       
dt.DefaultView.Sort = "RollNo"; 
```

但排序后，我得到的结果为**1、10、11、12、13、14、2、3、4、5、6、7、8、9。**

如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T23:52:53.363

您可以使用[`Linq-To-DataSet`](http://msdn.microsoft.com/en-us/library/bb386977.aspx)并将其`string`转换为`int`：

```
DataTable ordered = dt.AsEnumerable()
                      .OrderBy(r => int.Parse(r.Field<String>("RollNo")))
                      .CopyToDataTable(); 
```

[您需要添加对`System.Data.DataSetExtensions.dll`和的引用`using System.Linq;`]

请注意，`CopyToDataTable`如果您不需要它，您可以省略它，我展示它只是为了演示如何`DataTable`从`IEnumerable<DataRow>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:02:22.770

如果您的数据库很大，请不要这样做。您必须在 sql 语句中进行“字符串到数字”转换（这意味着在数据库服务器上），这很昂贵，或者必须将所有表读入内存并在那里进行这种排序，这也很昂贵。

我将创建一个新的数字字段（列）并将此转换作为批处理进行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T07:22:25.960

```
 DataTable dt = GetData();
        dt.Columns.Add("RollNo1", typeof(Int32));
        foreach (DataRow item in dt.Rows)
        {
            item["RollNo1"] = item["RollNo"];
        }
        dt.DefaultView.Sort = "RollNo1";
        dt.Columns.Remove("RollNo");
        dataGridView1.DataSource = dt; 
```

# wordpress - .htaccess 将查询字符串永久重定向到目录

> ID：12223726
> 
> 赞同：0
> 
> 时间：2012-08-31T23:50:03.557
> 
> 标签：wordpress, .htaccess, slider, rewrite, query-string

我正在尝试使用 .htaccess 重定向来解决我的 wordpress 网站上的滑块发布问题。

我当前的“滑块帖子”网址如下，导致空白帖子： [http ://mysite.com/?slider=post-slug](http://mysite.com/?slider=post-slug)

我想使用相同的“post slug”重定向到真实的帖子位置：http: [//mysite.com/news/post-slug](http://mysite.com/news/post-slug)

如何设置我的重写规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:04:59.950

将此（在您可能拥有的任何 wordpress 规则之上）放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} slider=([^&]+)
RewriteRule ^$ /news/%1? [R=301,L] 
```

# android-emulator - 如何在 sdk 模拟器上测试自定义 android ROM？

> ID：12223727
> 
> 赞同：2
> 
> 时间：2012-08-31T23:50:28.323
> 
> 标签：android-emulator

嘿，我想在 android 模拟器上测试一个 ROM？

我可以以某种方式将 zip 文件转换为`system.img`文件吗？或者我可以在恢复模式下重新启动模拟器吗？

# php - 在 mysql 查询中使用多个 WHERE 条件

> ID：12223731
> 
> 赞同：0
> 
> 时间：2012-08-31T23:51:42.667
> 
> 标签：php, mysql

我正在尝试将多个 WHERE 条件应用于我的查询，如下所示：

```
$hotel="Hotel Name";
$data1=explode('/',$data1);
$newdata1=mktime(0, 0, 0, $data1[0], $data1[1], $data1[2]);
$newdata1=date("Y-m-d", $newdata1);

$data2=explode('/',$data2);
$newdata2=mktime(0, 0, 0, $data2[0], $data2[1], $data2[2]);
$newdata2=date("Y-m-d", $newdata2);

$filtro=mysql_query("SELECT * 
                    FROM hotels_rates_flat
                    WHERE htl_name = $hotel AND  
                          given_date>=$newdata1 AND 
                          given_date<=$newdata2 
                    ORDER BY htl_name, city_zone, given_date") 
             or die(mysql_error()); 
```

它返回以下错误：

***你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“do Hotel AND given_date>=2012-09-01 AND given_date<=2012-09-05 ORDER BY htl_nam”附近使用正确的语法。***

这真的让我很困扰，因为我看不到任何明显的错误。

我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:08:05.703

使用 PDO 避免 SQL 注入和错误报告：

```
<?php
    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    $hotel="Hotel Name";                                                                                    
    $data1=explode('/',$data1);
    $newdata1=mktime(0, 0, 0, $data1[0], $data1[1], $data1[2]);
    $newdata1=date("Y-m-d", $newdata1);

    $data2=explode('/',$data2);
    $newdata2=mktime(0, 0, 0, $data2[0], $data2[1], $data2[2]);
    $newdata2=date("Y-m-d", $newdata2);

    try {
        $stmt = $db->query("SELECT * FROM `hotels_rates_flat` WHERE `htl_name` = :hotel AND (`given_date` BETWEEN :date1 AND :date2) ORDER BY `htl_name`, `city_zone`, `given_date`");
        $stmt->execute(array(':hotel' => $hotel,':date1' => $newdata1,':date2' => $newdata2));
        $results = $stmt->fetchAll(PDO::FETCH_ASSOC);
    } catch(PDOException $ex) {
        echo $ex->getMessage();
    }
    // use $results
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:03:52.767

你的问题的根源是引用。您应该使用带有占位符的准备好的语句，并让 mysql 驱动程序弄清楚如何以语法有效的方式插入值。

您可以使用与`mysqli_`函数类似`mysql_`的函数，只需添加几个额外的调用来处理参数。您确实需要一个显式的数据库句柄（我在`$dbh`下面调用它；它是从 中返回的`mysqli_connect()`），而不是像 mysql_ 函数那样依赖于一个隐含的句柄。

```
$stmt = mysqli_prepare($dbh, 'SELECT * FROM hotels_rates_flat' 
                           . ' WHERE htl_name = ?'
                           .   ' AND given_date BETWEEN ? AND ?'
                           . ' ORDER BY htl_name, city_zone, given_date');

# the 'sss' means treat all three parameters as (s)trings
mysqli_bind_param($stmt, 'sss', $hotel, $newdata1, $newdata2) or die(mysqli_error($dbh));

$filtro = mysqli_stmt_execute($stmt) or die(mysqli_error($dbh)); 
```

或者你可以使用 PDO，就像 Mihai 的回答一样，这有点不同。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-31T23:54:51.320

您需要将`$hotel`,`$newdata1`和`$newdata2`单引号括起来。

`SELECT * FROM hotels_rates_flat WHERE htl_name = '$hotel' AND ...`

您还可以使用`BETWEEN`运算符而不是写出小于和大于：

`AND given_date BETWEEN '$newdata1' AND '$newdata2'`

您还应该[停止使用](http://www.deprecatedphp.com/mysql) `mysql_`函数。

# windows-phone-7 - Windows phone 7 应用栏显示为灰色框

> ID：12223734
> 
> 赞同：0
> 
> 时间：2012-08-31T23:51:52.753
> 
> 标签：windows-phone-7, xaml

我对默认的应用程序栏做了非常小的修改，但是当我运行代码时，它只是显示为一个灰色框。这是 XAML：

```
<phone:PhoneApplicationPage 
    x:Class="IHeartWords.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="696"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True" xmlns:my="clr-namespace:Microsoft.Advertising.Mobile.UI;assembly=Microsoft.Advertising.Mobile.UI" Loaded="PhoneApplicationPage_Loaded">

    <!--Sample code showing usage of ApplicationBar-->
    <phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="False">
            <shell:ApplicationBarIconButton x:Name="help" IconUri="/icons/appbar.questionmark.rest.png" Text="Help" Click="helpButton_Click"/>
            <shell:ApplicationBarIconButton x:Name="rules" IconUri="/icons/appbar.feature.settings.rest.png" Text="Rules" Click="rulesButton_Click"/>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:18:24.683

我想到了。我在后面的代码中创建了一个新的应用程序栏。删除了该代码，我的 XAML 很好。

# eclipse - 自动修复eclipse中的常见错字

> ID：12223735
> 
> 赞同：0
> 
> 时间：2012-08-31T23:51:59.147
> 
> 标签：eclipse, ide, eclipse-plugin, editor

比如说我写了很多次private而不是private。

有没有办法让 Eclipse 自动修复我的常见拼写错误？

像构建一个我的常见错字的地图来修复它，然后让 Eclipse 修复它而不问我这个问题。

是否有任何其他具有此类支持的 IDE\编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:17:34.167

There is no builtin support for automatically changing strings. The closest to your request are the templates of the Java editor, but even those must explicitly be activated using `Ctrl``Space`.

To get around your problem, I suggest simply not to write that much yourself. If you want to declare a private field, type just "pr" and hit `Ctrl``Space` to invoke code completion. Eclipse can do code completion quite well, often even without any trigger characters (try it with an empty class file).

# c++ - Linux - 放弃键盘输入

> ID：12223736
> 
> 赞同：2
> 
> 时间：2012-08-31T23:52:12.613
> 
> 标签：c++, linux, input, keyboard, console

首先，一些背景知识：我正在 VirtualBox VM 中运行最新稳定版本的 Crunchbang Linux。我正在设计一个自定义的基于文本的用户界面以在 bash 之上运行。这是通过 C++ 和 bash 脚本的组合来完成的。

有时，我需要完全彻底地取消用户向系统提供任何类型的标准键盘输入的能力。这是因为，当我运行系统的一部分时，用户被迫等待一定的时间。
不幸的是，用户仍然可以在此过程中键入，并且无论他们键入什么内容都会显示在屏幕上。当我运行 C++ 程序和 bash 脚本时会发生这种情况。这是一个问题的原因是屏幕上有用户要阅读的文本，如果他们可以打字，它就会取代文本。稍后还会有其他用途，比如让系统看起来像是冻结了一样。

所以，问题 - 我该怎么做

1.  禁用键盘，或
2.  防止键盘上的任何内容出现在屏幕上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T00:02:13.183

`stty -echo`使用或等效的 C 代码（将使用`tcgetattr`and ）关闭回显模式`tcsetattr`。当您准备好再次接受输入时，将其重新打开。您可能还希望丢弃在您没有预料到的情况下到达的输入。可以这样做，`tcflush`但请注意，某些用户（例如我）会认为这很烦人。Typeahead 是一项功能，而不是错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:26:36.420

要查看如何拦截用户对某个进程或 tty 的输入，拦截的手册页和源代码[可能](http://www.suspectclass.com/sgifford/interceptty/)会有所启发。（没有经验）

但是，您几乎不能（完全）阻止用户输入。如果未禁用，用户可能总是能够切换到不同的虚拟终端（如果有），或者至少使用 Alt+Print+B ( [Magic SysRq_key ) 重新启动系统。](http://en.wikipedia.org/wiki/Magic_SysRq_key)忽略给定 tty 上的输入和完全禁用键盘输入是两件事。

# iphone - iOS Obj-C：可以分配为双精度或字符串的变量对象？

> ID：12223738
> 
> 赞同：0
> 
> 时间：2012-08-31T23:52:44.703
> 
> 标签：iphone, methods, nsarray

我对 iOS 开发很陌生，我想知道是否有处理这个问题的好方法。基本上，我正在制作一个技术计算器，它会根据用户输入参数返回一些产品规格。*有问题的产品有一些但不是所有*用户参数的规格，所以我 . 在常量文件中，我有一堆 ATTEN_SPEC_X 变量，它们是`const double`或`const NSString *`. 现在，缺少规范是完全可以的，所以我的计划是利用 NSArray 保存不同类型的能力，然后在我报告返回的规范之前使用自省来处理字符串与双精度数。

这是我正在实施的一种方法的不完整示例。`spec`它只是一个大的条件树，它应该返回一个由and的最终值组成的二元素数组`nominal`。

```
- (NSArray *)attenuatorSwitching:(double *)attenuator{
double spec, nominal;
{...}
    else if (*attenuator==0){
        spec=ATTEN_SPEC_3;     //this atten spec is a string!
        nominal=ATTEN_NOM_3;
    }
{...}
return {array of spec, nominal} //not actual obj-c code 
```

因此，我可以将它们制作为其他通用类型，而不是制作规格和名义双打吗？这里真正重要的是我不想在这个方法中使用任何特殊处理；**另一个编码器应该能够返回到常量文件，将 ATTEN_NOM_3 更改为双精度，并且根本不必重新调整此方法。**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T00:01:30.760

你会遇到的问题是 NSArrays 不能直接处理`double`s. 但是，如果您开始使用 NSNumber 实例，则可以解决此问题 - 您可以返回`NSArray *`包含 an`NSString *`和 an`NSNumber *`的没有问题。如果您需要更通用的类型，Objective-C 类型`id`可以用于任何对象实例（尽管仍然不能用于原语；您不能创建`double`an `id`）。

稍后，当你得到一个数组时，你可以使用 NSObject 方法`-isKindOfClass:`来确定你从数组中拉出的对象的类型，并根据结果类型处理字符串或数字。如果您需要将您的 NSNumber 转换回双精度，只需使用 NSNumber 实例方法`-doubleValue`来拆箱您的双精度。（`+[NSNumber numberWithDouble:]`反过来，给你一个 NSNumber 出双倍。）

如果你使用的是最新版本的 Xcode，你甚至可以将这些东西变成文字，而不必到处乱扔调用`+numberWithDouble:`：

```
return @[ @3, @"number of things" ] 
```

# ios - iOS to Mac GraphicContext 解释/转换

> ID：12223739
> 
> 赞同：13
> 
> 时间：2012-08-31T23:52:47.170
> 
> 标签：ios, macos, core-graphics, converter, cgcontext

我已经在 iOS 上编程了两年，从来没有在 mac 上。我正在开发一个小实用程序来处理我在 iOS 开发中的一些简单图像需求。无论如何，我在 iOS 中有可以完美运行的工作代码，但我完全不知道 mac 的等价物是什么。

我尝试了很多不同的东西，但我真的不明白如何在“drawRect：”方法之外在 Mac 上启动图形上下文。在 iPhone 上，我只使用 UIGraphicsBeghinImageContext()。我知道其他帖子说过要使用 lockFocus/unlockFocus，但我不确定如何准确地满足我的需要。哦，我真的很想念 UIImage 的“CGImage”属性。我不明白为什么 NSImage 不能有一个，尽管听起来比这有点棘手。

这是我在 iOS 上的工作代码——基本上它只是从掩码创建一个反射图像并将它们组合在一起：

```
 UIImage *mask = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"Mask_Image.jpg" ofType:nil]];
    UIImage *image = [UIImage imageNamed::@"Test_Image1.jpg"];
    UIGraphicsBeginImageContextWithOptions(mask.size, NO, [[UIScreen mainScreen]scale]);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(ctx, 0.0, mask.size.height);
    CGContextScaleCTM(ctx, 1.f, -1.f);
    [image drawInRect:CGRectMake(0.f, -mask.size.height, image.size.width, image.size.height)];
    UIImage *flippedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGImageRef maskRef = mask.CGImage;
    CGImageRef maskCreate = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                              CGImageGetHeight(maskRef),
                                              CGImageGetBitsPerComponent(maskRef),
                                              CGImageGetBitsPerPixel(maskRef),
                                              CGImageGetBytesPerRow(maskRef),
                                              CGImageGetDataProvider(maskRef), NULL, false);
    CGImageRef masked = CGImageCreateWithMask([flippedImage CGImage], maskCreate);

    CGImageRelease(maskCreate);

    UIImage *maskedImage = [UIImage imageWithCGImage:masked];
    CGImageRelease(masked);

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(image.size.width, image.size.height + (image.size.height * .5)), NO, [[UIScreen mainScreen]scale]);

    [image drawInRect:CGRectMake(0,0, image.size.width, image.size.height)];
    [maskedImage drawInRect:CGRectMake(0, image.size.height, maskedImage.size.width, maskedImage.size.height)];

    UIImage *anotherImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 

//do something with anotherImage 
```

在 Mac 上实现这个（简单地）有什么建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T19:50:13.137

这是一个将蓝色圆圈绘制到 NSImage 中的简单示例（我在此示例中使用 ARC，添加保留/释放以品尝）

```
NSSize size = NSMakeSize(50, 50);

NSImage* im = [[NSImage alloc] initWithSize:size];
NSBitmapImageRep* rep = [[NSBitmapImageRep alloc]
                            initWithBitmapDataPlanes:NULL
                                          pixelsWide:size.width
                                          pixelsHigh:size.height
                                       bitsPerSample:8
                                     samplesPerPixel:4
                                            hasAlpha:YES
                                            isPlanar:NO
                                      colorSpaceName:NSCalibratedRGBColorSpace
                                         bytesPerRow:0
                                        bitsPerPixel:0];

[im addRepresentation:rep];

[im lockFocus];

CGContextRef ctx = [[NSGraphicsContext currentContext] graphicsPort];
CGContextClearRect(ctx, NSMakeRect(0, 0, size.width, size.height));
CGContextSetFillColorWithColor(ctx, [[NSColor blueColor] CGColor]);
CGContextFillEllipseInRect(ctx, NSMakeRect(0, 0, size.width, size.height));

[im unlockFocus];

[[im TIFFRepresentation] writeToFile:@"/Users/USERNAME/Desktop/foo.tiff" atomically:NO]; 
```

主要区别在于，在 OS X 上，您首先必须创建图像，然后才能开始绘制；在 iOS 上，您创建上下文，然后从中提取图像。

基本上，lockFocus 使当前上下文成为图像，您直接在其上绘制，然后使用图像。

我不完全确定这是否能回答你所有的问题，但我认为这至少是其中的一部分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T03:47:22.263

好吧，这是关于`UIGraphicsBeginImageContextWithOptions`：

> **UIGraphicsBeginImageContextWithOptions**
> 
> > *使用指定的选项创建基于位图的图形上下文。*

OS X 等价物，也可在 iOS 中使用（并且`UIGraphicsBeginImageContextWithOptions`可能是一个包装器）是`CGBitmapContextCreate`：

声明为：

```
CGContextRef CGBitmapContextCreate (
   void *data,
   size_t width,
   size_t height,
   size_t bitsPerComponent,
   size_t bytesPerRow,
   CGColorSpaceRef colorspace,
   CGBitmapInfo bitmapInfo
); 
```

虽然它是一个 C API，但您可以将 CGBitmapContext 视为 CGContext 的子类。它渲染到像素缓冲区，而 CGContext 渲染到抽象目标。

对于`UIGraphicsGetImageFromCurrentImageContext`，您可以使用`CGBitmapContextCreateImage`并传递您的位图上下文来创建 CGImage。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-18T17:46:58.507

这是[Cobbal 答案的 Swift (2.1 / 10.11 API-compliant) 版本](https://stackoverflow.com/a/12270398/1226095)

```
 let size = NSMakeSize(50, 50);
    let im = NSImage.init(size: size)

    let rep = NSBitmapImageRep.init(bitmapDataPlanes: nil,
        pixelsWide: Int(size.width),
        pixelsHigh: Int(size.height),
        bitsPerSample: 8,
        samplesPerPixel: 4,
        hasAlpha: true,
        isPlanar: false,
        colorSpaceName: NSCalibratedRGBColorSpace,
        bytesPerRow: 0,
        bitsPerPixel: 0)

    im.addRepresentation(rep!)
    im.lockFocus()

    let rect = NSMakeRect(0, 0, size.width, size.height)
    let ctx = NSGraphicsContext.currentContext()?.CGContext
    CGContextClearRect(ctx, rect)
    CGContextSetFillColorWithColor(ctx, NSColor.blackColor().CGColor)
    CGContextFillRect(ctx, rect)

    im.unlockFocus() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-10T13:04:50.297

[Cobbal答案的](https://stackoverflow.com/questions/12223739/ios-to-mac-graphiccontext-explanation-conversion/12270398#12270398)Swift3 版本

```
 let size = NSMakeSize(50, 50);
    let im = NSImage.init(size: size)

    let rep = NSBitmapImageRep.init(bitmapDataPlanes: nil,
                                    pixelsWide: Int(size.width),
                                    pixelsHigh: Int(size.height),
                                    bitsPerSample: 8,
                                    samplesPerPixel: 4,
                                    hasAlpha: true,
                                    isPlanar: false,
                                    colorSpaceName: NSCalibratedRGBColorSpace,
                                    bytesPerRow: 0,
                                    bitsPerPixel: 0)

   im.addRepresentation(rep!)
    im.lockFocus()

    let rect = NSMakeRect(0, 0, size.width, size.height)
    let ctx = NSGraphicsContext.current()?.cgContext
    ctx!.clear(rect)
    ctx!.setFillColor(NSColor.black.cgColor)
    ctx!.fill(rect)

    im.unlockFocus() 
```

# android - 如何从同一布局中拥有多个选项卡，正确处理edittext？

> ID：12223745
> 
> 赞同：0
> 
> 时间：2012-08-31T23:53:51.333
> 
> 标签：android, android-layout, android-tabhost, android-orientation

我有三个选项卡，全部来自布局 xml 文件，比如 list.xml。在 list.xml 中，我定义了一个 EditText，如下所示：

```
<EditText
    android:id="@+id/filterText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/filterClear"
    android:hint="@string/filterHint"
    android:text="@string/filter">
</EditText> 
```

但是，似乎如果进行方向更改并在三个 EditText 之一中输入了一些内容（我猜都是使用相同的 ID），则文本不会恢复到相同的状态。有时（取决于我输入的选项卡）所有字段为空或所有字段都已填充。

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:54:23.590

我最终得到了三个单独的布局文件`list1.xml`, `list2.xml`, `list3.xml`，它们仅在 ID 上有所不同。所以`list1.xml`会有`@+id/filterText1`，`list2.xml`会有`@+id/filterText2`，等等。

然后在`ListActivity.java`我曾经将它作为我的 onCreate 的一部分的文件中：

```
setContentView(R.layout.list); 
```

在整个活动中多次提到这一点：

```
EditText filter = (EditText)findViewById(R.id.filterText); 
```

...

相反，我现在在我的 onCreate 中得到了这个：

```
if(START_TAB1.equals(startMode)) { // Checks which tab is being started
    setContentView(R.layout.list1); // Use appropriate layout
    filterTextId = R.id.filterText1; // Save correct ID in a class variable
}
// And then the same "else if..." for all other tabs 
```

这在整个活动中引用字段本身时：

```
EditText filter = (EditText)findViewById(filterTextId); // Use common ID 
```

# php - 在 Godaddy Linux 主机上编辑 PHP5.INI 文件

> ID：12223747
> 
> 赞同：0
> 
> 时间：2012-08-31T23:53:59.177
> 
> 标签：php

我需要编辑我的 Godaddy Linux 主机帐户的 PHP INI 文件。

我已经使用 SSH 找到了文件，我可以下载它，但是当我上传编辑过的文件时，我得到了 Permission Denied。

我用谷歌搜索了它，但找不到解决方案。发现一个 9 个月大的博客抱怨完全相同的问题，但没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:05:57.330

您应该能够创建自定义 php.ini 文件并将其与网站的其余内容一起上传到共享主机帐户的根目录。这不会位于 /etc/php.ini。

# javascript - Twitter 引导按钮活动状态

> ID：12223749
> 
> 赞同：0
> 
> 时间：2012-08-31T23:54:10.287
> 
> 标签：javascript, jquery, button, twitter-bootstrap, focus

对于我的网络应用程序中的按钮，我几乎只使用带有“btn”类的 <a> 标签。

问题是，当用户使用 <tab> 键导航表单字段时，无法识别这些“按钮”之一何时具有焦点，这让他们感到沮丧。

我尝试将其添加到 CSS 中：

a.btn:active{背景颜色：红色；}

但这并不能真正做到我想要的。这只会在单击按钮*时*更改背景颜色。当按钮通过 <tab> 键获得焦点时，它不会影响按钮的显示方式。

我也尝试使用 :focus 而不是 :active，但这也不起作用。

有谁知道我可以在我的应用程序中全局更改它的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T00:10:24.467

`:focus`是要走的路。也许 Twitter 引导程序正在压倒你的`:focus`风格。

[http://jsfiddle.net/4aVuK/2/](http://jsfiddle.net/4aVuK/2/)

也许尝试在你的 CSS 中添加 !important。

```
a.btn:focus{background-color:red !important;} 
```

# maven - 如何设置具有相互依赖关系的 Maven 子项目？

> ID：12223754
> 
> 赞同：28
> 
> 时间：2012-08-31T23:54:54.020
> 
> 标签：maven, maven-2

我很难设置一组相互依赖的相关 Maven 项目。

这是我的简化案例：

```
pom.xml     -- parent pom
\base\
    pom.xml
    src\main\java\Base.java     -- this is just a simple class
\derived\
    pom.xml
    src\main\java\Derived.java  -- this is a simple class that needs Base class to compile successfully, and has a main function 
```

我的目标是：

1.  能够在我的机器上编译所有项目：
    *   即`mnv clean compile`在\中成功
2.  能够在我的机器上编译一个项目：
    *   即`mnv clean compile`在 \base\ 和 \derived\ 中成功（尽管这可能无法按设计工作：[Inter Project Dependencies in Maven](https://stackoverflow.com/questions/2970231/inter-project-dependencies-in-maven)）
        *[编辑：找到这个答案：base 需要在本地发布，然后在编译中派生：即在 \基础，做`mvn clean compile install`而不是做只是做`mvn clean compile`。完成此操作后，`mvn clean compile`在 \derived 中进行操作即可。尽管如此，在不触及全局状态（即无需安装基础）的情况下这样做会很棒——所以如果有人知道实现这一点的方法，请将其添加为答案]*
3.  能够直接从源代码树在我的机器上运行派生项目（mvn exec:run 或等效项）：
    *   即`mvn exec:run`在 \derived\ 应该编译（如果需要）并运行derived.jar
4.  “共享组件”用例：将基础工件推送到共享存储库，其他人可以将其作为 maven 依赖项（即编译时依赖项）使用：
    *   即`mvn clean compile ???`会将其推送到 ~/.m2/config.xml 中指定的共享存储库
5.  “图像目录”用例：将派生的工件及其依赖项推送到本地目录，可以通过“java -jar ...”在其中运行，也可以公开为 ftp/http 共享以供其他人获取. 即，像这样的用例：
    *   `mvn clean compile ???`会将derived.jar 和依赖项（如base.jar）推送到~/.m2/maven.repo/.../derived 或等效项，然后我可以cd ~/.m2/maven.repo/.../derived并`java -jar derived.jar`运行它。
    *   `mvn clean compile ???`将 base.jar 推送到 ~/.m2/maven.repo/.../base （或derived.jar 到其相应的目录），它已经通过本地 Web 或 ftp 服务器作为下载点公开。

如何实现上述目标？

这是父pom的相关部分：

```
...
<modelVersion>4.0.0</modelVersion>
<groupId>com.foo</groupId>
<artifactId>parentpom</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<name>parentpom</name>

<modules>
    <module>base</module>
    <module>derived</module>
</modules>
... 
```

这是 base pom.xml 中的相关部分：

```
...
<parent>
    <groupId>com.foo</groupId>
    <artifactId>parentpom</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<modelVersion>4.0.0</modelVersion>
<groupId>com.foo.base</groupId>
<artifactId>base</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>base</name>
... 
```

这是派生的 pom.xml 的相关部分：

```
...
<parent>
    <groupId>com.foo</groupId>
    <artifactId>parentpom</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<modelVersion>4.0.0</modelVersion>
<groupId>com.foo.derived</groupId>
<artifactId>derived</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>derived</name>

<dependencies>
    <dependency>
        <groupId>com.foo</groupId>
        <artifactId>base</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
</dependencies>

... 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-03T07:20:39.597

您的父 pom 看起来不错，但您的模块/派生 pom 不：有几个问题会产生一些问题等。

首先，您为派生/基本模块使用不同的 groupId。如果你有一个[多模块](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)构建，你不应该这样做。此外，派生/基础的版本由父级继承，不应设置为显式，这意味着您应该具有以下内容：

```
<modelVersion>...</...>
...
<parent>
    <groupId>com.foo</groupId>
    <artifactId>parentpom</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<artifactId>base</artifactId>
<packaging>jar</packaging>

<name>base</name> 
```

groupId 通常是继承的。但有时你有大量的模块，这些模块可能是子模块的子模块，这会导致这样的结构：

```
+--- parent (pom.xml)
       +--- mod1 (pom.xml)
              +--- mod11 (pom.xml)
              +--- mod12 (pom.xml)
       +--- mod2 (pom.xml) 
```

在这种情况下，mod1 本身就是一个 pom 打包模块：

```
<modelVersion>...</...>
...
<groupId>com.company.project<groupId>  
<artifactId>parent</artifactId>
<packaging>pom</packaging>
<modules>
  <module>mod1</module>
  <module>mod2</module>
</modules> 
```

模组1：

```
<parent>
    <groupId>com.company.project<groupId>  
    <artifactId>parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<groupId>com.company.project.mod1</groupId>
<artifactId>mod1</artifactId>
<packaging>pom</packaging>

<modules>
  <module>mod11</module>
  <module>mod12</module>
</modules> 
```

模组11：

```
<parent>
    <groupId>com.company.project.mod1</groupId>
    <artifactId>mod1</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<artifactId>mod11</artifactId>
<packaging>pom</packaging>

<modules>
  <module>mod11</module>
  <module>mod12</module>
</modules> 
```

如果您需要在模块之间建立依赖关系，则解决方案是：

```
<parent>
    <groupId>com.company.project.mod1</groupId>
    <artifactId>mod1</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<artifactId>mod11</artifactId>
<packaging>jar</packaging>

<dependencies>
  <dependency>
    <!-- This shouldn't be a dep which is packaging: pom -->
    <groupId>${project.groupId}</groupId>
    <artifactId>mod2</artifactId>
    <version>${project.version}</version>
  </dependency>

</dependencies> 
```

要编译包含所有子模块的整个项目，只需转到父文件夹并：

mvn 清洁包

将编译等。如果您只想编译一个项目，您可以通过（从父级）执行此操作：

```
mvn -pl mod1 
```

仅当您以前安装过整个项目一次时才有效。另一种解决方案是：

```
mvn -am -pl mod1 
```

为了使其他人可以访问工件，最简单的解决方案是安装存储库管理器并执行以下操作：

mvn 部署

所有其他人都可以使用和工件作为 SNAPSHOT 依赖项。

# ruby-on-rails-3 - AWS::Errors::MissingCredentialsError 在 rails 3.1 中使用回形针和 aws-s3

> ID：12223762
> 
> 赞同：4
> 
> 时间：2012-08-31T23:56:42.207
> 
> 标签：ruby-on-rails-3, amazon-s3

我正在尝试在 aws 上传图片。

```
class Asset < ActiveRecord::Base
  belongs_to :post
  attr_accessible :image
  has_attached_file :image, :styles => { :medium => "640x480>", 
                                     :thumb => "100x100#"},
  :storage => :s3,
   :s3_credentials => "#{Rails.root}/config/s3.yml",
  :path => ":attachment/:id/:style.:extension",
  :bucket => 'yourbucket'
end 
```

s3.yml

```
development:
  access_key_id: xxxxxxxx

   secret_code: xxxxx 
```

我收到一条消息

```
 AWS::Errors::MissingCredentialsError in PostsController#create

Missing Credentials.

 Unable to find AWS credentials.  You can configure your AWS credentials
 a few different ways:

 * Call AWS.config with :access_key_id and :secret_access_key

 * Export AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY to ENV

* On EC2 you can run instances with an IAM instance profile and credentials 
 will be auto loaded from the instance metadata service on those
  instances.

* Call AWS.config with :credential_provider.  A credential provider should
either include AWS::Core::CredentialProviders::Provider or respond to
the same public methods.

= Ruby on Rails 
```

在 Ruby on Rails 应用程序中，您还可以通过以下方式指定您的凭据：

*   通过使用上述任何方法的配置初始化脚本（例如 RAILS_ROOT/config/initializers/aws-sdk.rb）。

*   通过位于 RAILS_ROOT/config/aws.yml 的 yaml 配置文件。该文件的格式应类似于默认的 RAILS_ROOT/config/database.yml 文件。

我相信我正在做最后一步。

宝石文件

```
gem 'rails', '3.1.3'
gem 'mysql'
gem 'koala'
gem 'paperclip'
gem 'aws-s3'
gem 'aws-sdk' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-21T21:52:15.553

以下对我有用：

1.  在您的初始化程序中创建一个名为 aws.rb 的文件
2.  在您的 aws.rb 文件中输入以下内容：

    ```
    AWS.config(
    access_key_id: 'your_access_key',
    secret_access_key: 'your_secret_access_key') 
    ```

3.  然后我的回形针选项如下所示：

    ```
    has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" },       
    :default_url => "missing_:style.png", :default_url => 'missing_:style.png', :storage =>   
    :s3, :bucket => "<my_bucket>" 
    ```

# android - 我可以使用 javax.mail 进行后台电子邮件发送吗？

> ID：12223763
> 
> 赞同：1
> 
> 时间：2012-08-31T23:56:42.727
> 
> 标签：android

> **可能重复：**
> [使用 JavaMail API 在 Android 中发送电子邮件而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

我需要从后台线程发送一封电子邮件，我想知道我是否可以在 android 项目中使用 javax 邮件，或者它们是否是一些替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:07:37.040

是的，伙计，您可以使用[此](https://stackoverflow.com/a/2033124/1218762)代码在后台发送邮件，Android api 中发生了什么，用户必须手动单击发送按钮，但在上面的链接中，您可以在后台发送邮件。

# ubuntu - 如何移动windows文件夹链接中的所有内容

> ID：12223771
> 
> 赞同：0
> 
> 时间：2012-08-31T23:57:38.857
> 
> 标签：ubuntu

我在双启动时安装的 Windows 已损坏...我需要备份某些文件。我目前正在尝试使用 Nautilus 和 Dolphin 备份“我的文档”和其他一些文件夹。我的文档是一个“链接”，当我在 ubuntu 中复制它时，我只会得到一个指向另一个分区的链接。如何复制链接文件夹的实际内容以及其中包含的任何链接文件夹的内容？（递归链接目录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:06:37.250

这可能是严重的矫枉过正，但有时我会选择我知道有效的霰弹枪方法。

使用两个 tar 实例——一个用于创建存档，第二个用于恢复它。

```
$SOURCE=/windows/whatever
$DEST=/tmp

tar --dereference -vcf - $SOURCE | (cd $DEST ; tar xf -)

The `--dereference` tells tar to follow symbolic links to the actual files they point to. 
```

# bash - 使用 gnuplot 编写脚本--where sed

> ID：12223772
> 
> 赞同：2
> 
> 时间：2012-08-31T23:58:04.407
> 
> 标签：bash, scripting, sed, gnuplot

所以我正在寻找一些快速而肮脏的解决方案。

**问题：**

我正在尝试使用 gnuplot 绘制数据文件的特定部分。这可以。基本行类似于

```
plot "<(sed -n '1,100p' pointsandstuff.dat)" u 1:log($4**2+$5**2) notitle 
```

这工作得很好。我想要的下一步是在我的标题中包含数据的另一部分，即数据条目 $3（列出的点是相同的，所以我可以从任何地方解析它）。我遇到了问题，因为虽然情节看起来不错，但我似乎无法将正则表达式信息输入“标题”。一个*不起作用*的例子”

```
plot "<(sed -n '1,100p' pointsandstuff.dat)" u 1:log($4**2+$5**2) title "<(sed -n '1,1p' pointsandstuff.dat)" 
```

（理论上，这会吐出一整条数据线，但实际上我只是得到标题“<（sed ...”）

我尝试使用 bash 脚本来攻击它，但是我使用的 '$' 将 bash 脚本扔进了一个头晕：

```
#!/bin/bash

STRING=$(echo|sed -n '25001,25001p' pointsandstuff.dat)
echo $STRING

 gnuplot -persist << EOF
 set xrange[:] noreverse nowriteback
 set yrange[:] noreverse nowriteback

 eval "plot "<(sed -n '25001,30000p' pointsandstuff.dat)" u 1:log($4**2+$5**2) title $STRING

EOF 
```

Bash 不知道如何处理 '$4' 和 '$5'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:03:16.277

您似乎正在尝试进程替换，但双引号在第一种情况下会阻止它工作，而在第二种情况下您需要命令替换。

你有：

```
plot "<(sed -n '1,100p' pointsandstuff.dat)" u 1:log($4**2+$5**2) \
      title "<(sed -n '1,1p' pointsandstuff.dat)" 
```

你需要：

```
plot <(sed -n '1,100p' pointsandstuff.dat) u 1:log($4**2+$5**2) \
      title "$(sed -n '1,1p' pointsandstuff.dat)" 
```

第二种情况下的双引号可能不是绝对必要的，但它们的存在不会出错。

*   进程替换生成一个文件名并将嵌套命令的输出提供给该文件；该命令认为它正在读取文件（因为它正在读取文件）。

*   命令替换在字符串中捕获嵌套命令的输出并将该字符串传递给命令（当它用作命令的参数时，如此处）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:50:52.830

我对这个问题的理解有点模糊，但看起来你想绘制前 100 行——这很容易做到：

```
plot '< head -100 datafile.dat' u  .... 
```

当然，您可以根据需要使用`sed`（或`awk`或...）。仅 gnuplot 的解决方案可能如下所示：

```
plot 'datafile.dat' u ($0 > 100? 1/0:$1):(log($4**2+$5**2)) 
```

或者像这样（对于常规选择更简单）：

```
plot 'datafile.dat' every ::25001::30000 u 1:(log($4**2+$5**2) 
```

[并在另一个答案](https://stackoverflow.com/questions/10881747/how-to-plot-specific-rows-in-gnuplot/10882104#10882104)中更详细地解释。

现在，如果您希望标题来自数据文件，您可以使用 gnuplot 解析它`backtic substitution`：

```
plot ... title "`head -1 datafile.dat | awk '{print $3}'`" 
```

这与 gnuplot 的系统命令基本相同：

```
plot ... title system("head -1 datafile.dat | awk '{print $3}'") 
```

但在这种情况下，您*也许*可以使用以下`columnhead`功能：

```
plot ... title columnhead(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:39:41.760

啊哈，谢谢大家。现在已经想出了一些解决方案——最简单的就是从以前的那些 $s 中转义（我错误地认为 gnuplot 不喜欢......）。到白衣：

```
STRING=$(echo|sed -n '1,1p' spointsandstuff.dat)
echo $STRING

 gnuplot -persist << EOF
 set xrange[:] noreverse nowriteback
 set yrange[:] noreverse nowriteback

 eval "plot "<(sed -n '1,100p' pointsandstuff.dat)" u 1:(log(\$4**2+\$5**2)) title '$STRING'
 !gv diag_spec.eps &

EOF 
```

不过，谢谢大家——这是玩这些东西的一个很好的借口……希望，如果以后有任何可怜的灵魂看到这个脚本，他们可能会更容易一些。

# c++ - 如何创建大小合适的 QWebView？

> ID：12223774
> 
> 赞同：2
> 
> 时间：2012-08-31T23:58:13.490
> 
> 标签：c++, qt, widget, sizing

我想让 QWebView 看起来扩展到宽度和高度，以便理想情况下它没有滚动条。有些网站可能有固定的宽度，不允许这样做，但我不关心这些。无论如何，我不能如我所愿，因为 QWebView 实现 sizeHint 如下：

```
QSize QWebView::sizeHint() const
{
    return QSize(800, 600); // ####...
} 
```

这在许多层面上都是不正确的。1.根本没有考虑实际网页的大小。2.没有考虑高度和宽度是相互关联的。（为了证明 #2 考虑换行到下一行的网页中的文本。）

作为一个简单的修复，我尝试做（QResizingWebView 扩展 QWebView）：

```
QSize QResizingWebView::sizeHint() const{
    return this->page()->mainFrame()->contentsSize();
} 
```

虽然这更接近结果，但它也有 2 个缺陷。1\. 没有考虑显示的宽/高之间的关系。2.`this->page()->mainFrame()->contentsSize()`从我的初步测试中可以看出是不准确的（它返回的高度在许多情况下都大于它应该的高度，尽管这可能与＃1有关）。

有没有人有任何提示来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:31:50.860

根据[qtcentre.org 上的这篇文章](http://www.qtcentre.org/threads/37512-Why-does-QWebView-sizeHint%28%29-return-a-fixed-value)，您应该能够通过设置大小策略来纠正该行为。

**更新：**

在根本不修改大小策略的情况下，a`QWebView`上的默认`QHBoxLayout`布局`QWidget`会导致 web 视图`QWidget`在大于的 at 大小范围内正确调整大小`800x600`（使用 QtCreator、C++、Windows 7、Qt 4.8.1）。

**更新 2：**

我做了一些挖掘，发现这个问题与您[之前](https://stackoverflow.com/q/12221345/31044)发布的包含相关要求的问题有关:)

以下代码似乎满足这些要求。唯一相关的位是我将 的水平和垂直大小策略更改`QWebView`为“扩展”。

**主窗口.cpp：**

```
#include "MainWindow.h"
#include "ui_MainWindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

**主窗口.ui：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QWidget" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>587</width>
    <height>442</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <layout class="QHBoxLayout" name="horizontalLayout">
   <item>
    <widget class="QLabel" name="label">
     <property name="text">
      <string>TextLabel</string>
     </property>
     <property name="alignment">
      <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
     </property>
    </widget>
   </item>
   <item>
    <layout class="QVBoxLayout" name="verticalLayout">
     <item>
      <widget class="QLabel" name="label_2">
       <property name="text">
        <string>TextLabel</string>
       </property>
       <property name="alignment">
        <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>
       </property>
      </widget>
     </item>
     <item>
      <widget class="QWebView" name="webView">
       <property name="sizePolicy">
        <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
         <horstretch>0</horstretch>
         <verstretch>0</verstretch>
        </sizepolicy>
       </property>
       <property name="url">
        <url>
         <string>http://www.google.ca/</string>
        </url>
       </property>
      </widget>
     </item>
    </layout>
   </item>
  </layout>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <customwidgets>
  <customwidget>
   <class>QWebView</class>
   <extends>QWidget</extends>
   <header>QtWebKit/QWebView</header>
  </customwidget>
 </customwidgets>
 <resources/>
 <connections/>
</ui> 
```

~~**更新 3：**~~ **更新 4：**

鉴于评论中提供的 URL。它显示如下。

主窗口为 640x480：

![在此处输入图像描述](../Images/9bc1d3c710402acc6351b48671c04e15.png)

主窗口为 1024x768：

![在此处输入图像描述](../Images/c76add8afec27253b8dff8e9a9479623.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T21:52:28.890

我通过在扩展 QWebView 的自定义小部件中实现 heightForWidth 来使其工作

# java - Sling 调度程序定期作业——作业会重叠吗？

> ID：12223776
> 
> 赞同：2
> 
> 时间：2012-08-31T23:58:27.080
> 
> 标签：java, quartz-scheduler, sling

我正在使用 Sling 的调度程序来安排定期作业，我想知道我是否正在安排作业 A 每 5 分钟运行一次。在不太可能的情况下，作业开始运行并耗时超过 5 分钟会发生什么情况？我已指定作业不能并行运行。

1.  作业 A 将在前一次运行完成后立即再次运行。
2.  作业 A 将在前一次运行完成后 5 分钟运行。

在底层，Sling 的调度程序使用的是 QuartzScheduler，所以如果你知道 QuartzScheduler 在这种情况下的表现，请也分享你的知识。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:02:59.290

在 Quartz Scheduler 2.1.x 中，[注解 DisallowConcurrentExecution](http://www.quartz-scheduler.org/api/2.1.5/org/quartz/DisallowConcurrentExecution.html)用于防止同一个 Job 的并发执行。

在 Quartz Scheduler 2.0.x 中，为了使 Job 的并发执行无效，您必须实现[StatefulJob 接口](http://www.quartz-scheduler.org/api/2.0.0/org/quartz/StatefulJob.html)。

是否在前一个作业完成时执行失败的执行或将被忽略**取决于触发器的失败策略**。默认情况下，当调度程序启动时，它会搜索任何未触发的持久触发器，然后根据其单独配置的不触发指令更新每个触发器。

因此，在我看来，作业 A 将在上一次运行完成后立即再次运行。我想 Sling 使用默认的失火策略。否则答案取决于失火策略选择。

这就是 Quartz Scheduler 的工作原理。我不知道 Sling 的调度程序是如何工作的。

我希望这有帮助。

# c++ - C++/CLI UTF-8 & JNI 不能正确转换 Unicode 字符串

> ID：12223778
> 
> 赞同：3
> 
> 时间：2012-08-31T23:58:49.200
> 
> 标签：c++, c++-cli, java-native-interface

我有一个返回 unicode 字符串的 Java 类... Java 具有正确版本的字符串，但是当它通过 jstring 形式的 JNI 包装器时，它必须转换为 C++ 或 C++/CLI 字符串。这是我拥有的一些测试代码，它实际上适用于除亚洲字符集之外的大多数语言。简体中文和日文字符是乱码，我不知道为什么。这是代码片段，我没有看到任何一种转换方法有任何问题（if 语句检查 os，因为我有两个具有不同操作系统的 VM 并运行适当的转换方法）。

```
 String^ JStringToCliString(const jstring string){
        String^ converted = gcnew String("");
        JNIEnv* envLoc = GetJniEnvHandle();
        std::wstring value;
        jboolean isCopy;

        if(string){
            try{
                jsize len = env->GetStringLength(string);
                if(Environment::OSVersion->Version->Major >= 6) // 6 is post XP/2003                                        
                {
                    TraceLog::Log("Using GetStringChars() for string conversion");
                    const jchar* raw = envLoc->GetStringChars(string, &isCopy);
                    // todo add exception handling here for jvm
                    if (raw != NULL) {                          
                        value.assign(raw, raw + len);
                        converted = gcnew String(value.c_str());
                        env->ReleaseStringChars(string, raw);
                    }
                }else{
                    TraceLog::Log("Using GetStringUTFChars() for string conversion.");
                    const char* raw = envLoc->GetStringUTFChars(string, &isCopy);
                    if(raw) {
                        int bufSize = MultiByteToWideChar(CP_UTF8, 0 , raw , -1, NULL , 0 );
                        wchar_t* wstr = new wchar_t[bufSize];
                        MultiByteToWideChar( CP_UTF8 , 0 , raw , -1, wstr , bufSize );
                        String^ val = gcnew String(wstr);                           
                        delete[] wstr;

                        converted = val; // partially working
                        envLoc->ReleaseStringUTFChars(string, raw);
                    }                       
                }
            }catch(Exception^ ex){
                TraceLog::Log(ex->Message);
            }
        }
        return converted;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:19:45.143

答案是在 Windows XP 中启用东亚语言，因为 Win7 + 后来工作正常。超级容易....浪费一整天哈哈。

# xcode - 由于一般 / IO 错误，此时无法处理应用程序 Info.plist 验证

> ID：12223786
> 
> 赞同：0
> 
> 时间：2012-09-01T00:00:08.177
> 
> 标签：xcode, app-store-connect

> **可能重复：**
> [由于一般错误 (1095)，此时无法处理应用程序 info.plist 验证](https://stackoverflow.com/questions/8353049/unable-to-process-application-info-plist-validation-at-this-time-due-to-a-genera)

超过 12 小时前开始的问题现在似乎已修复。

已提交错误 ID# 12218349。

此消息已发布，因为原始帖子已被锁定，因此没有人可以更新它以让其他人知道它可能已被修复。

# java - 为什么 fill3DRect 在我自己以外的其他计算机上无法正常工作？

> ID：12223789
> 
> 赞同：0
> 
> 时间：2012-09-01T00:00:22.303
> 
> 标签：java, swing, graphics, java-2d, paintcomponent

我正在研究一个视觉排序算法项目，我正在将它们绘制在 JPanel 中：

```
public void paint(Graphics g) {
    super.paint(g);
    g.setColor(Color.WHITE);
    for (int i = 0; i < array.length; i++) {
        g.fill3DRect(i * barWidth, height, barWidth, -array[i], true);
    }
    g.dispose();
} 
```

我编译了我的程序并在我的 Windows 7 计算机上运行了 jar，我得到了正确绘制的条形图：

[![好的](../Images/8ae4957ea94206eb112e75df588fe0f4.png)](https://i.stack.imgur.com/uWVXu.png)

我在另一台 Windows 7 计算机和 Mac 上对此进行了测试，它绘制的条不正确：

[![坏的](../Images/5b4aefbd52a02d8f4842b257fb437fb9.png)](https://i.stack.imgur.com/Pfgd0.png)

为什么会这样？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:34:48.287

```
g.dispose(); 
```

仅调用`dispose()`您的代码创建的图形实例。这个由 JRE 提供。

# powershell - 将 %* 从批处理脚本作为 $args 传递到 powershell 脚本时转义参数

> ID：12223790
> 
> 赞同：5
> 
> 时间：2012-09-01T00:00:38.657
> 
> 标签：powershell, batch-file, escaping, cmd

我有一个批处理脚本，它接受任意数量的参数（文件列表）并执行具有以下命令结构的 powershell 脚本：

`"%POWERSHELL%" -Command "%SCRIPT%" %*`

`%POWERSHELL%`是 的路径`PowerShell.exe`，并且`%SCRIPT%`是我的 powershell 脚本，它将接收的内容解释`%*`为`$args`. 问题是，如果我传入类似 filename 的内容`test$file.name`，PowerShell 会收到`test.name`，大概是因为`$file`它被解释为一个空变量。

有没有一种好方法可以用批处理脚本中的单引号或反引号来转义每个参数，或者以其他方式处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T00:33:26.790

在将 %* 传递给 PowerShell 脚本之前转义 $ 字符。

```
set ARGS=%*
set ARGS=%ARGS:$=`$%
"%POWERSHELL%" -Command "%SCRIPT%" %ARGS% 
```

# c# - StreamResourceInfo 尝试获取 ResourceStream 时出现空引用异常？

> ID：12223791
> 
> 赞同：0
> 
> 时间：2012-09-01T00:00:54.287
> 
> 标签：c#, image, windows-phone-7, io

[我正在关注 MSDN Introduction to Windows Phone Development labs 之一，并且在这个实验室](http://msdn.microsoft.com/en-us/windowsphonetrainingcourse_windowsphonenavigationandcontrolslab_topic3#_Toc311119302)中遇到了问题（Introduction to Controls Available for Windows Phone Applications）。实验提供了起始文件和结束文件（即实验完成后程序的外观）。

让我难过的实验室的特定部分是我从 Assets 文件夹中读取一系列图像，然后将它们显示在屏幕上的 ListBox 中。每当此代码尝试运行时，它都会引发空引用异常：

```
public static BitmapImage GetImage(string filename)
    {
        string imgLocation = Application.Current.Resources["ImagesLocation"].ToString();

        StreamResourceInfo imageResource = Application.GetResourceStream(new Uri(imgLocation + filename, UriKind.Relative));
        BitmapImage image = new BitmapImage();
        image.SetSource(imageResource.Stream);

        return image;
    } 
```

我已经尽可能多地进行了研究，并且 imageResource 总是以某种方式结束 Null ，而且我一生都无法弄清楚哪里出了问题。

[我在这里](https://dl.dropbox.com/u/19417676/Ex2-IntroductionToTheControls.zip)包含了两个项目的链接（129 MB，抱歉）。“开始”文件夹下的所有内容都是我迄今为止所做的（当我在运行时尝试导航到图像页面时会引发异常）。“结束”文件夹下的所有内容都是它应该最终看起来的样子，并且可以正常工作。

我对 C# 和 WP7 开发非常陌生，因此将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:47:58.823

尝试将 .bmp 的构建更改为“资源”。

这是几个解释它的链接：

[http://forums.silverlight.net/t/238891.aspx/1](http://forums.silverlight.net/t/238891.aspx/1)

[对内容资源调用的 Application.GetResourceStream 仍然返回 null](https://stackoverflow.com/questions/7394282/application-getresourcestream-called-on-a-content-resource-still-return-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T20:07:57.870

问题是当您在`App.xaml`文件中设置图像目录时，教程中有一个错误。您应该设置应用程序资源，`ImagesLocation`如下所示：

```
<system:String x:Key="ImagesLocation">Begin;component/Assets/Images/</system:String> 
```

在哪里`Begin`需要您的项目名称`;component/`作为分隔符，最后`Assets/Images/`是您的图像目录的相对路径。

# asp.net-mvc-3 - 在运行时缓存 Nhibernate 实体

> ID：12223792
> 
> 赞同：0
> 
> 时间：2012-09-01T00:00:56.370
> 
> 标签：asp.net-mvc-3, nhibernate, asp.net-mvc-4

嘿 StackOverflow 朋友，我有一种情况，我希望能够缓存一些 nhibernate 实体，很可能是通过缓存查询。我试图找出在 MVC 4 项目中构建它的最佳方法。我的 NHibernate 层位于一个单独的层中，我将 Windsor 用于我的 DI。

我希望能够做到以下几点。比如说我在数据库中有一个 UserTypes 表，PK 是一个 GUID/唯一标识符。我希望能够执行 Session.Load(guid) 而不必在每次需要这些数据时为选择付费。

这是一些代码。我不喜欢 GUID 像这样硬编码。我想我可以在 web.config 中填充 GUID，但我想要更自动的东西，以防万一发生变化，

```
nhsession.Save(new User
                           {
                               UserType = nhsession.Load<UserType>(Guid.Parse("BE4A74B1-5B21-4109-AD69-A0AF00FC879F")),
                               UserSetting = nhsession.Load<UserSetting>(Guid.Parse("CB0B2053-E173-408D-A991-A09B00E45330")),
                               UserName = userDto.UserName,
                               Password = hash,
                               Salt = salt,
                               IsLockedOut = 0,
                               InvalidLoginAttempts = 0,
                               ActivationCode = activationCode,
                               Active = active,
                               LastLoginDate = DateTime.Now,
                               DateCreated = DateTime.Now,
                               LastUpdated = DateTime.Now,
                               Profile = new Profile
                                             {
                                                 EmailAddress = userDto.UserName, 
                                                 Active = 1, 
                                                 DateCreated = DateTime.Now, 
                                                 LastUpdated = DateTime.Now
                                             }
                           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:17:03.527

NHibernate 提供对一级和二级缓存的支持。一级缓存的范围仅限于会话本身。但是，二级缓存可用于会话工厂中的所有会话。Ayende Rahien 在此处发布了有关 NHibernate 缓存的详细说明：http: [//nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)

# javascript - .NET windows app / google map api，不能两次搜索相同的地址

> ID：12223793
> 
> 赞同：0
> 
> 时间：2012-09-01T00:00:57.533
> 
> 标签：javascript, vb.net, visual-studio, google-maps, windows-applications

不久前，stackoverflow 的某个人帮助我提供了一个在 Windows 应用程序上使用 google maps api 的不错的解决方案

html代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<script type="text/javascript" src="http://maps.google.com.mx/maps/api/js?sensor=true&language=es"></script>
<script type="text/javascript">

    var geocoder;
    var map;

    function initialize(address) {

        geocoder = new google.maps.Geocoder();

        var myOptions = {
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        geocoder.geocode({ 'address': (address ? address : "Miami Beach, Flordia")}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });

        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>

  </body>
</html> 
```

Windows 应用程序代码

```
Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        WebBrowser1.Document.InvokeScript("initialize", New String() {AddressM.Text})

    End Sub

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        WebBrowser1.Url = New Uri("http://datasharesas.com/CompanyAdmin/map2.html")
    End Sub
End Class 
```

项目图片

![](../Images/ceb4c6f9c993545c28443bb5ed985853.png)

现在的问题是，当我查看同一个地址一次时，它工作得很好。当我搜索两次时，我得到一个灰屏，当我搜索超过 3 次时，我得到一个错误脚本

错误信息

![](../Images/34ee808dcc3ac17a714f2f25792f7acc.png)

这怎么能解决？

先感谢您，

里奥·P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:03:14.597

地理编码是异步的，因此在某些情况下（取决于它返回的速度），当您尝试使用它时，您的地图尚未创建。您需要先创建地图，然后再进行地理编码。试试这个：

```
 script type="text/javascript">
    // Global vars
    // Sorry, I can't be bothered typing "google.maps." every time. ;-)
       var G = google.maps;
       var map;
       var geocoder = new G.Geocoder();

        function initialize() {
          createMap();
          geocode('Chicago');
        }

        function createMap() {
            var myOptions = {
                center: new G.LatLng(0,0),
                zoom: 4,
                mapTypeId: G.MapTypeId.ROADMAP
            }
            map = new G.Map(document.getElementById("map_canvas"), myOptions);
        }

function geocode(address){
            geocoder.geocode({ 'address': (address ? address : "Miami Beach, Florida")}, function (results, status) {
                if (status == G.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    var marker = new G.Marker({
                        map: map,
                        position: results[0].geometry.location
                    });
                } else {
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });

        }

        </script>
      </head>
      <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%"></div>

      </body>
    </html> 
```

# java - Admob xml 错误

> ID：12223795
> 
> 赞同：0
> 
> 时间：2012-09-01T00:01:06.973
> 
> 标签：java, android, xml, admob

我之前制作了一个使用 adMob 广告的应用程序，但由于某种原因，它不适用于我最新的应用程序。该应用程序运行良好，直到我输入我的 xml 编码。

我添加了外部 JAR：

我将代码添加到清单中：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="14" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <meta-data
        android:name="ADMOB_PUBLISHER_ID"
        android:value="a1504053602839f" />

    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

我将 .properties 中的目标更改为 -14：

我还将这段代码添加到我的 xml 布局的顶部：

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

这是我用于实际广告的代码：

```
 <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a150072b02930f"
        ads:loadAdOnCreate="true" /> 
```

就像我说的那样，一个月前我的其他应用程序可以使用这个确切的代码。

当我将 ads.AdView 代码粘贴到我的 xml 中时，该应用程序甚至无法启动。一旦我删除代码，应用程序运行良好，没有广告。我的 Startup 类中也没有广告，只有 Game 类。但是，一旦我启动该应用程序，它就会崩溃。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:37:33.963

我没有使用元数据来从 admob 添加，所以我无法告诉你错误是否存在于元数据上，否则你的代码是完美的。

您可以检查您添加的 jar，可能是已损坏或不知道。您可以使用此代码并检查它是否适用于您的应用程序

```
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
        android:launchMode="singleTop"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" />
    <!-- Track Market installs from AdMob ads -->
    <receiver
        android:name="com.google.ads.InstallReceiver"
        android:exported="true" >
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </receiver> 
```

布局 -

```
<TableRow
    android:id="@+id/tbl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="63dp"
    android:gravity="center" >

    <com.google.ads.AdView
        android:id="@+id/adddd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a14fe2bc0ebbc0c"
        ads:backgroundColor="#FFFF00"
        ads:keywords="SNS"
        ads:loadAdOnCreate="true"
        ads:primaryTextColor="#FFFFFF"
        ads:refreshInterval="30"
        ads:secondaryTextColor="#CCCCCC"
        android:visibility="visible" />
</TableRow> 
```

# android - Android - PhoneGap 2.0.0 - ChildBrowser - 对象# 没有方法'exec'

> ID：12223796
> 
> 赞同：0
> 
> 时间：2012-09-01T00:01:16.797
> 
> 标签：android, cordova, phonegap-plugins, childbrowser

我正在使用 phonegap/cordova 2.0.0 开发一个 android 应用程序。

截至目前，我的服务器上托管了一个网站，而我的 android 应用程序只是用作包装器 webView。

这是我的java文件中的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);
    webview = new WebView(this);

    webview.getSettings().setJavaScriptEnabled(true);

    webview.getSettings().setPluginsEnabled(true);
    webview.addJavascriptInterface(new JavaScriptInterface(), "jsinterface");

    setContentView(webview);

    // This is where I load the URL of my website
    webview.loadUrl("http://192.168.0.109:3000/");  
} 
```

当我将应用程序部署到安卓手机时，它工作得非常好，我可以在手机中看到我的网站。

我现在面临的问题是使用 phonegap 插件，尤其是 ChildBrowser（其他插件给我同样的结果）。我的javascript控制台上抛出了这个异常：

```
window.plugins.childBrowser.showWebPage("http://www.example.com")
TypeError: Object #<an Object> has no method 'exec' 
```

我按照有关如何使用插件[ChildBrowser Plugin的说明进行操作](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)

我已将 javascript 文件包含在我的服务器上托管的网站上

```
<script src="/assets/cordova-2.0.0.js" type="text/javascript"></script>
<script src="/assets/childbrowser.js" type="text/javascript"></script> 
```

我花了几天时间试图弄清楚这一点，并在谷歌上搜索了我能尝试的一切。但是我没有运气，因为没有一个解决方案对我有用。我尝试了 deviceready 选项，但没有成功：

> document.addEventListener("deviceready", yourCallbackFunction, false);

有没有人有解决方案，或者甚至可以从外部网站调用 phonegap 插件？

PS：我有一个 ChildBrowser 的工作示例，但我的 android 应用程序正在读取

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

# mysql - SQL 返回 1 个表中的用户名，其中表 2 中没有匹配的用户

> ID：12223802
> 
> 赞同：0
> 
> 时间：2012-09-01T00:01:50.637
> 
> 标签：mysql, join, left-join

我有一个时间表，有几个人使用它

users 有用户的用户名和 id，这与存储日期和 user_id 的时间表一致，user_id 和 id 是链接，因此表 2 可能每天都有一个新条目。

现在我想做的是收集一份今天没有更新时间表的人的名单。这是我的新手尝试

> select * from users left join timesheet ON users.id = timesheet.user_id WHERE timesheet.user_id is null AND timesheet.value is null

这将返回所有没有完美的时间表条目但我正在查询特定日期的用户，因此如果他们昨天填写，他们将在时间表中有相应的条目，但这仍然意味着他们今天还没有填写。

我试过

> select * from users left join timesheet ON users.id = timesheet.user_id WHERE timesheet.user_id is null AND timesheet.value is null AND timesheet.date != '12-09-05'

我可以看到该逻辑中的缺陷，我已经排除了我想按日期进一步过滤的人，但我无法弄清楚如何获得我想要的结果。我真的希望它先按日期过滤，然后运行该查询，但我不知道该怎么做，因为我对 MySQL 不太熟悉，谷歌说他不知道答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:06:02.457

将日期条件移至`ON`子句：

```
SELECT * FROM `users`
  LEFT JOIN `timesheet`
     ON `users`.`id`=`timesheet`.`user_id` AND `timesheet`.`date`=CURDATE()
  WHERE `timesheet`.`user_id` IS NULL AND `timesheet`.`value` IS NULL 
```

# python - 如何找到特定类型的单词并计算它

> ID：12223803
> 
> 赞同：1
> 
> 时间：2012-09-01T00:01:57.123
> 
> 标签：python

我正在尝试识别一个特定的单词，然后计算它。我需要保存每个标识符的计数。

例如，一个文档可能包含以下内容：

```
risk risk risk free interest rate 

asterisk risk risk 

market risk risk [risk 
```

*我需要计算“风险”而不是星号。可能还有其他与风险相关的词，所以不要拘泥于上面的例子。我需要找到的是“风险”。如果风险以 < [ ( 或 . ! * > ] ) 之类的东西结束或开始，等等。我也需要计算它。但是如果风险词是像星号这样的词的组成部分，那么我不应该计算它。

这是我到目前为止所拥有的。但是，它返回星号和 [风险以及风险的计数。我尝试使用正则表达式，但不断出错。另外，我是 Python 的初学者。如果有人有任何想法，请帮助我！^^谢谢。

```
from collections import defaultdict
word_dict=defaultdict(int)

for line in mylist:
    words=line.lower().split()  # converted all words to lower case
    for word in words:
        word_dict[word]+=1

for word in word_dict:
    if 'risk' in word:
       word, word_dict[word] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:09:58.850

使用正则表达式实际上很容易做到这一点：

```
import re
haystack = "risk asterisk risk brisk risk"
prog = re.compile(r'\brisk\b')
result = re.findall(prog, haystack)
print len(result) 
```

这输出“3”。

\b 正则表达式表示任何单词分隔符，包括行尾/行首。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:17:48.833

如果正则表达式`(?<![a-zA-Z])risk(?![a-zA-Z])`前面或后面没有另一个字母，则它应该匹配“风险”。例如：

```
>>> len(re.findall('(?<![a-zA-Z])risk(?![a-zA-Z])','risk? 1risk asterisk risky'))
2 
```

这是这个re的细分：

*   `(?<![a-zA-Z])`这种否定的lookbehind断言表明，只有在匹配之前没有匹配for 时才会发生匹配`[a-zA-Z]`，而for 又只匹配一个字母。
*   `risk`这是与“风险”相匹配的中心资源；这里没有什么特别的......
*   `(?![a-zA-Z])`这与第一部分类似。这是一个否定的先行断言，只有当它后面没有一个字母时才会发生匹配。

因此，假设您也不想匹配前面有数字的“1risk”之类的东西。您只需`[a-zA-Z]`将 re 的部分更改为`[a-zA-Z0-9]`. 例如。：

```
>>> len(re.findall('(?<![a-zA-Z0-9])risk(?![a-zA-Z0-9])','risk? 1risk asterisk risky'))
1 
```

**更新：** 针对您的问题[How to replace words, count a word, and save the count](https://stackoverflow.com/questions/12223937/how-to-replace-words-count-a-word-and-save-the-count)，我现在得到了您的要求。您可以使用我向您展示过的相同类型的结构，但经过修改以包含所有这些词：

*   风险
*   冒险
*   风险更大
*   最危险的
*   冒险的
*   风险性
*   冒险
*   风险
*   有风险

有几种方法可以修改原始 re; 最直观的可能是只使用 re OR`|`并添加`\-`到负前瞻中以防止匹配“无风险”等。例如：

```
>>> words = '|'.join(["risk","risked","riskier","riskiest","riskily","riskiness","risking","risks","risky"])
>>> len(re.findall('(?<![a-zA-Z])(%s)(?![a-zA-Z\-])' % words, 'risk? 1risk risky risk-free'))
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:04:09.023

```
if 'risk' == word:
    print word, word_dict[word] 
```

# php - Zend 应用程序可以在 Windows 上运行，但不能在 Linux 服务器上运行

> ID：12223813
> 
> 赞同：1
> 
> 时间：2012-09-01T00:03:47.750
> 
> 标签：php, zend-framework

我有这个问题，当我在 Linux 服务器（Ubuntu 或托管服务器）上运行使用 Zend Framework 开发的应用程序时，登录将不起作用。主要问题是应用程序无法在服务器上写入会话（我将会话应写入的目录设置为 0777 ），另一方面，在我的本地 WAMP 服务器上一切正常。

没有例外，日志文件中没有错误，除了这个：

> PHP 已弃用：指令 'safe_mode' 在 PHP 5.3 中已弃用，在第 0 行的 Unknown 中已弃用更高版本

我已经被这个问题困扰了两个星期了，请指导我。我应该给 Zend 库中的 PHP 文件任何特定的访问权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:57:39.653

我使用 CPanel 安装了 zend，我不知道为什么，但它现在可以工作了。

# jquery - -webkit-linear-gradient jquery 和 var

> ID：12223819
> 
> 赞同：2
> 
> 时间：2012-09-01T00:04:24.847
> 
> 标签：jquery, html, css

我是 JQuery 的新手，所以我很可能做错了。当我尝试这样做时：

jQuery

```
$(document).ready(function () {
  spectrum();

  function spectrum() {
    var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.foor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';

    $('body').animate({
      background: '-webkit-linear-gradient(-45deg, ' + hue + ' 0%, ' + hue + ' 100%)'
    }, 2500, spectrum);
  }
}); 
```

HTML

```
<!DOCTYPE html>

<html lang="en">  
  <head>
    <meta charset="utf-8" />
    <title>Moody Colors</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
  </head>

  <body></body>

  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="https://raw.github.com/jquery/jquery-color/master/jquery.color.js"></script>
  <script src="js/moody.js"></script>
</html> 
```

我只是得到一个空白页，Chrome 控制台中没有错误。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T01:30:23.573

既然你已经在使用 CSS3，为什么不使用[CSS3 过渡](http://www.w3schools.com/css3/css3_transitions.asp)来改变背景颜色呢？

JavaScript：

```
$(document).ready(function () {

    spectrum();

    function spectrum() {
        var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';           
        $('body').css('background-color', '-webkit-linear-gradient(-45deg, ' + hue + ' 0%, ' + hue + ' 100%)');
        setTimeout(spectrum, 2500);
    }
});​ 
```

CSS：

```
body {
    transition: background-color 2.5s;
    -moz-transition: background-color 2.5s;
    -webkit-transition: background-color 2.5s;
} 
```

和您现在使用的 HTML 相同。[在 jsFiddle 演示](http://jsfiddle.net/znB8c/)

（为 Firefox 和 WebKit 添加了供应商前缀，您还需要使用通过 JavaScript 添加的 CSS 来执行此操作）

# c# - 为 CRUD 操作构建 RestSharp 的通用助手

> ID：12223820
> 
> 赞同：5
> 
> 时间：2012-09-01T00:04:32.423
> 
> 标签：c#, restsharp

我已经开始使用 RestSharp 来调用 webapi proejct，因为它看起来很容易使用。

我想为我所有的 crud 操作建立一个助手类。

到目前为止，我有一个简单的 PUT 请求。

```
 public static IRestResponse Update(object objectToUpdate,string apiEndPoint)
    {
        var client = new RestClient(CreateBaseUrl(null))
        {
            Authenticator = new HttpBasicAuthenticator("user", "Password1")
        };
        var request = new RestRequest(apiEndPoint, Method.PUT);
        request.AddObject(objectToUpdate);
        var response = client.Execute<MyViewModel>(request);
        //var response = client.ExecuteDynamic(request);
        return response;
    } 
```

所以上面的代码有效但是我不得不将我的视图模型硬编码到它里面

```
 var response = client.Execute<MyViewModel>(request); 
```

我怎样才能改变这个，所以我不需要知道我期待的模型类型？

我尝试使用`var response = client.ExecuteDynamic(request);` 但是这会引发异常

> 无法将“RestSharp.RestResponse”类型的对象转换为“RestSharp.RestResponse”1 [System.Object

我不确定我应该如何正确地投射我的对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T00:35:26.820

我不熟悉 RestSharp。但是，听起来泛型可以在这里为您提供帮助。您的类或方法需要接受类型。例如，您的方法的签名将更改为

```
public static IRestResponse Update<T>(object objectToUpdate,string apiEndPoint) 
```

这将允许您将该方法称为：

```
Update<MyViewModel>(objectToUpdate, apiEndPoint); 
```

您的实现将从您的具体类型更改为：

```
var response = client.Execute<T>(request); 
```

总体而言，您可以将代码修改为以下内容：

```
 public static IRestResponse Update<T>(object objectToUpdate,string apiEndPoint)
{
    var client = new RestClient(CreateBaseUrl(null))
    {
        Authenticator = new HttpBasicAuthenticator("user", "Password1")
    };
    var request = new RestRequest(apiEndPoint, Method.PUT);
    request.AddObject(objectToUpdate);
    var response = client.Execute<T>(request);
    //var response = client.ExecuteDynamic(request);
    return response;
} 
```

有关 C# 泛型的文档可在此处找到：http: [//msdn.microsoft.com/en-us/library/ms379564 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

# mysql - WordPress 自定义选择查询

> ID：12223822
> 
> 赞同：1
> 
> 时间：2012-09-01T00:04:45.997
> 
> 标签：mysql, wordpress, select

我真的对 MySQL 查询知之甚少，它正在显示。

我为每个帖子设置了一个自定义字段。自定义字段将帖子源 URL 存储在名为“source_url”的键中。

我让它与下面的 WP_Query 参数一起工作，但**速度非常慢**。请记住，可以搜索 50 多个网址。

因此，给定一组源 URL，我想获取匹配的帖子。

例如，这是我目前在 WP_Query 中运行缓慢的内容：

```
// var_dump of $urls array (this could be 50+ urls)
array(7) {
  [0]=>
  string(42) "http://www.youtube.com/watch?v=FMghvnqDhT8"
  [1]=>
  string(42) "http://www.youtube.com/watch?v=RY-yUFpXTnM"
  [2]=>
  string(58) "http://www.youtube.com/watch?v=nIm2dnyJ1Ps&feature=related"
  [3]=>
  string(42) "http://www.youtube.com/watch?v=NoCtRQlJAqM"
  [4]=>
  string(57) "http://holidaycustoms.blogspot.com/2012/08/busy-week.html"
  [5]=>
  string(42) "http://www.youtube.com/watch?v=DcZvg197Ie4"
  [6]=>
  string(42) "http://www.youtube.com/watch?v=7P3UEbLmLuo"
}

// Build Media Query
$meta_query = array(
    'relation' => 'OR'
);
foreach( $urls as $url ) {
    $meta_query[] = array(
                        'key'       => 'source_url',
                        'value'     => $url
                    );
}

// Get 20 matching posts from a category set by a variable
$args = array(
    'post_type'        => 'post',
    'posts_per_page'   => 20,
    'orderby'          => 'rand',
    'cat'              => $cat_ID,
    'meta_query'       => $meta_query
);
$posts = get_posts($args); 
```

我想要做的是用自定义查询选择替换上面的代码，[我读过它比 WP_Query 快得多](http://wordpress-hackers.1065353.n5.nabble.com/Expensive-meta-query-Is-there-a-better-way-td38467.html)。

**但我对 MySQL 或 WP 数据库的了解不够，无法构建自定义选择查询。任何人都可以帮忙吗？提前致谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:10:20.550

在您链接自己的帖子中，第一个回复已经指出

> [...] 默认模式甚至在 value 列上都没有索引

这比使用查询生成器遇到的问题要严重得多，因为没有索引，DBMS 必须遍历整个表并比较每个字段的字符串。

[使用PHPMyAdmin](http://www.phpmyadmin.net)等适当的管理工具添加索引相当容易。您需要添加索引的有问题的表被调用`wp_postmeta`，需要索引的字段是`meta_value`，索引类型应该是`INDEX`。

添加索引是透明的，除了性能之外不会影响 wordpress。不过，这可能需要一些时间，因为 MySQL 需要遍历整个表。此外，因为您正在索引字符串数据，所以索引会非常大。

* * *

您还应该尝试为您的查询使用适当的结构。您当前正在使用`OR`具有不同值但始终相同字段的大 ed 选择。为此有一个构造，它被称为`IN`.

```
...
// Build Media Query
$meta_query = array();
$meta_query[] = array(
    'key'       => 'source_url',
    'value'     => $urls,
    'compare'   => 'IN'
);

// Get 20 matching posts from a category set by a variable
.. 
```

（未经测试。我实际上从未这样做过，[参考](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)）

与我假设的添加索引相比，性能提升可以忽略不计，但您的代码会变得简单得多。

# php - 在while循环中将三元运算符添加到超链接

> ID：12223824
> 
> 赞同：0
> 
> 时间：2012-09-01T00:05:09.607
> 
> 标签：php, mysql, if-statement

我正在向我的 mysql 查询返回的 while 循环添加一个 if 语句。我有 4 个文档路径，具体取决于路径的类别。我整天都在搜索谷歌，到目前为止，我能想到的最好的方法是使用我已经放入我的代码中的三元，但它一直抛出错误，我得到一个空白的白页。我想我的引语一定是错误的或什么的。我需要重复 if 语句 4 次，但我试图让它先正常工作一次。

这是我的代码。

```
 echo "<td><a href=\"".((.$row ['category'].=='Validation_Letter') ? "../../../../Docs/Doc/val_letters/":"")."".$row ['filepath']."\">".$row ['filepath']."</a></td>"; 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:07:55.927

您不需要 .$row['category'].=='Validation_Letter' 中的两个句点

echo "".$row ['filepath']."";

它是这样工作的 - ( $val == true ? 'true' : 'false' )

# opengl - 使用 OpenGL 编译错误

> ID：12223825
> 
> 赞同：0
> 
> 时间：2012-09-01T00:05:19.780
> 
> 标签：opengl, glut, glew

这是我要运行的程序

```
////////////////////////////////////////////////////          
// square.cpp
//
// Stripped down OpenGL program that draws a square.
// 
// Sumanta Guha.
////////////////////////////////////////////////////

#include <iostream>

#ifdef __APPLE__
#  include <GLUT/glut.h>
#else
#  include <GL/glut.h>
#endif

using namespace std;

// Drawing (display) routine.
void drawScene(void)
{
   // Clear screen to background color.
   glClear(GL_COLOR_BUFFER_BIT);

   // Set foreground (or drawing) color.
   glColor3f(0.0, 0.0, 0.0);

   // Draw a polygon with specified vertices.
   glBegin(GL_POLYGON);
      glVertex3f(20.0, 20.0, 0.0);
      glVertex3f(80.0, 20.0, 0.0);
      glVertex3f(80.0, 80.0, 0.0);
      glVertex3f(20.0, 80.0, 0.0);
   glEnd();

   // Flush created objects to the screen, i.e., force rendering.
   glFlush(); 
}

// Initialization routine.
void setup(void) 
{
   // Set background (or clearing) color.
   glClearColor(1.0, 1.0, 1.0, 0.0); 
}

// OpenGL window reshape routine.
void resize(int w, int h)
{
   // Set viewport size to be entire OpenGL window.
   glViewport(0, 0, (GLsizei)w, (GLsizei)h);

   // Set matrix mode to projection.
   glMatrixMode(GL_PROJECTION);

   // Clear current projection matrix to identity.
   glLoadIdentity();

   // Specify the orthographic (or perpendicular) projection, 
   // i.e., define the viewing box.
   glOrtho(0.0, 100.0, 0.0, 100.0, -1.0, 1.0);

   // Set matrix mode to modelview.
   glMatrixMode(GL_MODELVIEW);

   // Clear current modelview matrix to identity.
   glLoadIdentity();
}

// Keyboard input processing routine.
void keyInput(unsigned char key, int x, int y)
{
   switch(key) 
   {
      // Press escape to exit.
      case 27:
         exit(0);
         break;
      default:
         break;
   }
}

// Main routine: defines window properties, creates window,
// registers callback routines and begins processing.
int main(int argc, char **argv) 
{  
   // Initialize GLUT.
   glutInit(&argc, argv);

   // Set display mode as single-buffered and RGB color.
   glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB); 

   // Set OpenGL window size.
   glutInitWindowSize(500, 500);

   // Set position of OpenGL window upper-left corner.
   glutInitWindowPosition(100, 100); 

   // Create OpenGL window with title.
   glutCreateWindow("square.cpp");

   // Initialize.
   setup(); 

   // Register display routine.
   glutDisplayFunc(drawScene); 

   // Register reshape routine.
   glutReshapeFunc(resize);  

   // Register keyboard routine.
   glutKeyboardFunc(keyInput);

   // Begin processing.
   glutMainLoop(); 

   return 0;  
} 
```

我确定我安装了 glut 和 OpenGL 并且是最新的，这是我遇到的错误（我正在按照 2011 年的书中列出的方式编译代码）：

> ubuntu:~/Downloads/Code$ gcc square.cpp -o square -I /usr/include/ -L /usr/lib -lglut -lGL -lGLU -lX11 /tmp/ccAq6h4h.o:square.cpp:function __static_initialization_and_destruction_0( int, int): error: undefined reference to 'std::ios_base::Init::Init()' /tmp/ccAq6h4h.o:square.cpp:function __static_initialization_and_destruction_0(int, int): error: undefined reference to 'std ::ios_base::Init::~Init()' collect2: ld 返回 1 退出状态

我编写了自己的代码并将其保留为 ac 文件并编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:10:17.520

是编译错误文件的简单错误。

# android - 适用于 Android 的蓝牙 GPS 5Hz 接口

> ID：12223826
> 
> 赞同：0
> 
> 时间：2012-09-01T00:05:29.123
> 
> 标签：android, gps, gps-time

我希望这是一个适合这个小组的问题。严格来说，这不是一个编程问题，除非我最终编写自己的 NEMA 侦听器而不是位置侦听器，但这意味着要重新编写大量代码。我编写了一个基于 GPS 的应用程序，并希望在 5HZ 下使用外部 GPS。我一直在谷歌和这个论坛上搜索几个小时，但没有找到我的问题的答案。

我一直在使用 Android 应用程序与外部 GPS 通话。我可以使用蓝牙 GPS 提供程序或 GPS 鼠标获得 5Hz，但它们都有大约 18 秒的时间误差（慢）。我可以使用蓝牙 GPS 获得准确的时间，但只有 1Hz。我检查了 Qstarz 单元的原始 NEMA 输出，它在 1Hz 和 5Hz 都是正确的。

我正在使用标准位置侦听器，程序中的所有内容都运行良好。我只想获得 5Hz 数据和准确的 GPS 时间。起初我以为是 GPS 闰秒问题，但 NEMA 数据实时正确。我使用 WWV 来查找实时时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:10:55.487

尝试：

[http://sourceforge.net/projects/bluegps4droid/files/](http://sourceforge.net/projects/bluegps4droid/files/)

此应用程序以源 GPS 的频率更新模拟位置。

# django - 来自移动应用程序的 Oauth2 代码

> ID：12223829
> 
> 赞同：1
> 
> 时间：2012-09-01T00:06:20.067
> 
> 标签：django, redirect, oauth-2.0

我正在编写一个 Android 应用程序，它将使用 OAuth2 对我控制的 Web 服务器进行身份验证。

我在客户端使用 Apache Amber，在服务器端使用 oauth2app 和 Django。

从客户端，我可以生成一个授权请求，并启动一个浏览器活动，该活动进入一个页面询问是否允许客户端访问，并在肯定回答后重定向到一个带有“代码”参数的页面。

但是如何将“代码”返回给我的客户，以便发出后续的 access_token 请求？

我需要完全绕过浏览器吗？那将如何运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:40:00.663

我相信你在这里有几个选择。

该`redirect_uri`参数将向服务器指示它应该将代码发送到哪里。从[`ouath2app`文档](http://hiidef.github.com/oauth2app/authorize.html)：

> 如果请求被授权，Authorizer:grant_response() 会将对象序列化为 JSON 响应，并将重定向响应返回到客户端的 redirect_uri，其中包含作为查询字符串参数 (response_type CODE) 传递的授权代码或作为 URI 片段传递的访问令牌的信息.

如此武装：

1.  如果该值是您服务器上的一个位置，那么您的移动浏览器将获取该值作为重定向的一部分。具体来说，您正在尝试读取重定向中的 URI 片段。我相信这是像您这样的应用程序的预期用途。[在“检索访问令牌”部分下，这篇博](http://blog.doityourselfandroid.com/2010/11/10/oauth-flow-in-android-app/)文似乎有可能相关的代码。

2.  或者，正如您所指出的，您可以将令牌发送到服务器上的不同处理程序，然后将其传递回您的客户端。它必须是服务中定义的回调 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:03:51.030

我发现了一篇不同的博客文章，专门针对 OAuth 2：

[http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/](http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/)

诀窍是启动一个新的 Activity，其内容由 WebView（而不是布局）提供。您可以将处理程序附加到在重定向到包含“代码”参数的页面时调用的 WebView。

博客文章中的一些细节涉及 Google API，但到目前为止，我的实验表明它适用于我的情况。

# python - 查找老式 Python 类的魔法方法

> ID：12223836
> 
> 赞同：3
> 
> 时间：2012-09-01T00:07:14.637
> 
> 标签：python

我知道不再推荐旧式 Python 类，尤其是在 Python 3 删除了它们之后。但是，我仍然想了解这里发生了什么：

```
class MyClass:
  pass

my_instance = MyClass()
str(my_instance) 
```

此代码段打印以下内容：

'<位于 0x108ec4290 的**主**.MyClass 实例>'

所以，我没有任何显式继承，也没有重载**str**方法。但是，这不会为所谓的缺失方法引发异常。为什么？

我知道旧式类具有“实例”和“类型”的概念，而新式类旨在统一这些概念。Python 是否会在我的实例隐式连接到的“实例”类型上查找并调用**str方法？**

这里有一些线索：

dir(my_instance) - 返回：

```
['__doc__', '__module__'] 
```

type(my_instance) - 返回：

```
<type 'instance'> 
```

dir(type(my_instance)) - 返回：

```
['__abs__', '__add__', '__and__', '__call__', '__class__', '__cmp__', '__coerce__', '__contains__', '__delattr__', '__delitem__', '__delslice__', '__div__', '__divmod__', '__doc__', '__eq__', '__float__', '__floordiv__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getslice__', '__gt__', '__hash__', '__hex__', '__iadd__', '__iand__', '__idiv__', '__ifloordiv__', '__ilshift__', '__imod__', '__imul__', '__index__', '__init__', '__int__', '__invert__', '__ior__', '__ipow__', '__irshift__', '__isub__', '__iter__', '__itruediv__', '__ixor__', '__le__', '__len__', '__long__', '__lshift__', '__lt__', '__mod__', '__mul__', '__ne__', '__neg__', '__new__', '__nonzero__', '__oct__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdiv__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__setitem__', '__setslice__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__xor__', 'next'] 
```

谁能准确解释旧式类中的类和类型之间的关系以及这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:22:00.013

我相信其他人可以给你更具体的理由，但是这里有一个类似讨论的引用：[old-style class](http://www.daniweb.com/software-development/python/threads/70403/old-style-class)

> `object`是位于任何继承树顶部的基类。我相信坚持基类的目的是统一对象行为而不需要太多的“魔法”。也就是说，在新式类之前，对象只是神奇地具有像`__doc__` 和这样的属性`__str__`；现在，他们拥有它们是有原因的：因为他们从基类继承了它们。

我相信关于“魔法”的那部分就是……黑盒魔法。显然，旧样式类的 MRO（方法解析顺序）更加神奇，因为它可能必须检查`instance`对象上的显式定义以及`type`. `__str__`要么，要么旧样式类的部分机制是在找不到方法时始终提供默认方法。

现在使用新样式的类就不会那么神奇了，因为由于继承，方法确实就在实例上。

这是另一个有一些很好的引用和例子的网站：[最大惊喜的原则](http://segfaulthunter.github.com/articles/biggestsurprise/)

> 对于旧式类，所有查找都在实例中完成。
> 
> 对于新式类的实例，所有隐式完成的特殊方法查找都在类结构中完成

**新风格：**

```
class Foo(object):
    def __str__(self):
        return "old str"

foo = Foo()
foo.__str__ = lambda: "new str"

print str(foo)
print foo.__str__()

# old str
# new str 
```

**老式：**

```
class Foo:
    def __str__(self):
        return "old str"

foo = Foo()
foo.__str__ = lambda: "new str"

print str(foo)
print foo.__str__()

# new str
# new str 
```

# java - 无法使用 HTMLParser 从网页中获取所有内容

> ID：12223840
> 
> 赞同：0
> 
> 时间：2012-09-01T00:08:07.307
> 
> 标签：java, android, html, parsing, jsoup

我正在使用 Jsoup 来解析这个网页[https://daisy.dsv.su.se/servlet/schema.MomentInfoRuta?id=261020&kind=100&nochange=true&allPrio=true&multiple=true&allEx=true](https://daisy.dsv.su.se/servlet/schema.MomentInfoRuta?id=261020&kind=100&nochange=true&allPrio=true&multiple=true&allEx=true)

在那个网页中，我可以在浏览器中看到一些东西，但是当我试图用 Jsoup 解析它时

```
Document doc = Jsoup.parse("https://daisy.dsv.su.se/servlet/schema.MomentInfoRuta?id=261020&kind=100&nochange=true&allPrio=true&multiple=true&allEx=true");
System.out.println(doc); 
```

它会回来

```
<html>
<head></head>
<body>
https://daisy.dsv.su.se/servlet/schema.MomentInfoRuta?id=261020&amp;kind=100&amp;nochange=true&amp;allPrio=trueμltiple=true&amp;allEx=true
</body>
</html> 
```

这不是所有的 HTML。

有什么建议我可以解决它或为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:13:31.090

看起来他们正在检测爬虫，通常是通过您的用户代理，并发送不同的内容。尝试[将您的用户代理字符串](https://stackoverflow.com/questions/6581655/jsoup-useragent-how-to-set-it-right)设置为标准浏览器的字符串，看看是否能解决您遇到的问题。

另一个潜在的问题，虽然我不认为这是这里的问题，但是通过 AJAX 加载的数据不会被 JSoup 下载。它解析提供的 HTML，但它不执行 JavaScript，因此它无法获取稍后出现的任何额外内容。您可能可以使用[PhantomJS](http://phantomjs.org/)之类的东西来解决这个问题，它可以处理和呈现 HTML、CSS 和 JavaScript，并且（理论上）会为您提供最终在浏览器中看到的实际 HTML。

# css - 为什么这个 div 没有继承正确的宽度样式

> ID：12223841
> 
> 赞同：2
> 
> 时间：2012-09-01T00:08:30.223
> 
> 标签：css, width

我的 .left div 在 CSS 中将其宽度设置为 260px，但由于某种原因，它的计算样式出现在 980px（包装器的全宽），因此在页面上推出了另一个 fiv（div 右）。网站在[这里](http://www.jamesperrett.co.uk/testsite)，我正在谈论的部分是“我是谁？”中的左侧 h2 和右侧段落文本 部分。

**HTML**

```
<div id="topwrapper">
      <div class="left">
        <h2>I create films <span class="green">//</span></h2>
        <h2>I dance <span class="green">//</span></h2>
        <h2>I do silly things <span class="green">//</span></h2>
        <h2>I explore <span class="green">//</span></h2>
      </div>
      <div class="right">
        <p>lorem ipsum (changed as text is wordy)</p>
         <p>lorem ipsum (changed as text is wordy)</p>
         <p>lorem ipsum (changed as text is wordy)</p>

      </div>
    </div> 
```

**CSS**

```
.left {
width:250px;
float:left;
text-align:right;
padding-right:50px;
}

.right {
    float:right;
    width:680px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:13:31.800

你确定你包含了那个 CSS 吗？我没看到。是的.. CSS 肯定没有被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:10:24.390

这可能与错误的标记有关。// 不是你注释掉 html 的方式。html 注释看起来像：

```
<!-- </span></h2>  --> 
```

当你有错误的标记时，浏览器会做一些有趣的事情来匹配不匹配的元素，例如那些被“注释掉”的 span 元素。

只是我最初的想法。不过我会继续寻找。

[我在http://w3schools.com](http://w3schools.com)使用了 javascript 编辑器，它对我有用。我喜欢在那个网站上编辑我的代码。这是我使用的代码。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.left {
width:250px;
float:left;
text-align:right;
padding-right:40px;
border:1px solid blue;
}

.right {
    float:right;
    width:250px;
border:1px solid green;
}

</style>

</head>
<body>

<div id="topwrapper">
      <div class="left">
        <h2>I create films <span class="green"></h2>
        <h2>I dance <span class="green"></h2>
        <h2>I do silly things <span class="green"></h2>
        <h2>I explore <span class="green"></h2>
      </div>
      <div class="right">
        <p>lorem ipsum (changed as text is wordy)</p>
         <p>lorem ipsum (changed as text is wordy)</p>
         <p>lorem ipsum (changed as text is wordy)</p>

      </div>
    </div>
  </div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:10:54.700

我看不到“包装器”的关闭 div？鉴于 HTML 已损坏，这可能是您的问题

尝试在你的#topwrapper 中使用它。left {你的样式在这里}

我不认为你的 CSS 也被加载了？检查头部内的链接

# c++ - 在 C++ 中测量时间

> ID：12223842
> 
> 赞同：1
> 
> 时间：2012-09-01T00:08:31.210
> 
> 标签：c++, time

这是我的 C++ 代码。

```
double start_time = time(NULL);
double start_clock = clock();

#pragma omp parallel for private(i) 
for(i=0;i<max_i;i++)
      PROCESS(i);

double end_time = time(NULL);
double end_clock = clock();

printf("%lf second(s)\n", end_time-start_time);
printf("%lf second(s)\n", (end_clock-start_clock)/CLOCKS_PER_SEC); 
```

这就是输出。

```
took 2.000000 second(s)
took 11.410000 second(s) 
```

有谁知道为什么这些不一致？有没有其他方法来衡量这个？顺便说一句，根据我在这里看到的时间，2 秒似乎更合理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T00:20:03.353

该`clock()`函数返回您的进程自启动以来使用的*CPU 时间*量，而不是根据实时时钟的绝对时间。

在另一条评论中，您说这`CODE_BLOCK`是一个并行循环 - 这意味着在您的情况下，它在 2 秒的实际（“挂钟”）时间内使用了相当于 11.41 秒的 CPU 时间。显然，您正在并行使用大约 6 个 CPU 的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:17:45.900

这可能会有所帮助：

```
int main() {
    double start_time = time(NULL);
    double start_clock = clock();

    sleep(10);

    double end_time = time(NULL);
    double end_clock = clock();

    printf("%lf second(s)\n", end_time-start_time);
    printf("%lf second(s)\n", (end_clock-start_clock)/CLOCKS_PER_SEC);
} 
```

这个的输出是：

```
10.000000 second(s)
0.000070 second(s) 
```

所以，如果你以任何方式调用内核，或者跳出处理器，那只会出现在两个计时器之一中。

*从说明您正在使用 OpenMP 的说明中：*您可能还看到的是乘数效应。如果您的 openMP 线程使用 8 个内核，则第二个计时器的计数将是第一个计时器的 8 倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:14:17.833

您没有发布代码块中的内容，但通常时间会有所不同，因为您正在测量自程序启动以来程序一直在运行的时钟滴答的绝对时间以及测量实际数量程序消耗的 CPU 时间。这是两个截然不同的东西。

此外，返回的值`clock()`也不是浮点值；它们应该是`clock_t`类型值，它是一个整数类型。`time()`返回`time_t`类型也是如此。因此，在您执行某种类型的除法并且您想要一个浮点值作为结果之前，无需将它们分配给浮点类型。

# java - Tomcat 的行为就好像它不是线程请求一样，导致响应时间变慢

> ID：12223844
> 
> 赞同：0
> 
> 时间：2012-09-01T00:08:34.580
> 
> 标签：java, tomcat5.5

我看到奇怪的行为，我不知道如何进一步了解并希望有人能提供帮助。

背景：我有一个查询需要很长时间才能返回结果，因此我没有让用户在请求时直接等待数据，而是定期通过 Timer 对象执行此查询并将结果存储在静态变量中。因此，当用户请求数据时，我总是从静态变量中提取数据，从而使响应几乎是即时的。到目前为止，一切都很好。

问题：然而，我看到的行为是，如果我在后台（定时器）请求开始查询数据时请求数据，我的用户的请求会等待数据返回后再响应——强迫用户等待。就好像 tomcat 的行为与线程同步（我知道不是——它只是看起来那样）。

这是在生产环境中，并且在大多数情况下，一切都很好，但对于用户来说，有时网站只是为他们挂起并且他们觉得它不可靠（嗯，在某种意义上它是）。

我所做的：由于对数据的请求是在静态方法中，我想“啊哈！线程已同步，这导致了延迟！” 所以我把我所有的静态方法都拿出来，删除了同步并强制每个调用实例化它自己的对象来检索数据（以保持线程安全）。静态变量的信号量也没有任何同步。

我还安装了 javamelody 来尝试了解正在发生的事情，但到目前为止还没有什么新鲜事。我注意到很多（大多数）线程处于“等待”状态，但它们也有 0 毫秒的用户和 CPU 时间，所以不要认为这指向任何东西（？）。

运行 Tomcat 5.5（无 apache 层）、struts 2、Java 1.5

如果有人知道为什么对静态变量的简单请求会挂起更长的后台进程，我将不胜感激！或者，如果您知道我如何获得洞察力，那也很棒。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:15:34.540

一种可能的解释是，由于长时间运行的查询引起的数据库锁定（或其他原因），线程实际上在数据库级别阻塞。

弄清楚发生了什么的方法是准确找出被阻塞的线程阻塞的位置。可以通过向 JVM 发送 SIGQUIT（或等效项）来生成线程转储，并包含所有 Java 线程堆栈的堆栈跟踪。或者，您可以通过附加调试器等来获得相同的信息（以及更多信息）。无论哪种方式，每个堆栈顶部框架的类名和行号应该允许您查看源代码并（至少）弄清楚正在发生什么样的锁定或阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:13:51.890

对于那些想知道的人，我最终找到了 VisualVM ( [http://visualvm.java.net/download.html](http://visualvm.java.net/download.html) )。这是完美的。我像往常一样从 Eclipse 运行 Tomcat，它出现在 VisualVM 客户端中。右键单击 tomcat 图标，选择 Thread Dump，然后，我已经搞定了。

谢谢大家的帮助和指向正确方向的指示！

# user-interface - 为什么我不能在设计器的 QStackedWidget 中为页面设置布局？

> ID：12223847
> 
> 赞同：13
> 
> 时间：2012-09-01T00:08:52.633
> 
> 标签：user-interface, layout, qt4, qt-designer, qstackedwidget

在 Qt 4.8.0 设计器中重现的步骤

*   我在 Qt Designer 中创建了一个新的对话框表单
*   我在对话框中添加了一个 QStackedWidget
*   我设置了对话框的布局，使对话框的堆叠布局大小
*   我在堆叠小部件的第一页添加了一些控件
*   我在控件的右侧树视图中选择堆叠小部件的第一页
*   该页面旁边的图标（这是一个 QWidget）显示该页面缺少布局

当我单击上面的布局按钮之一时，它不会更改页面 QWidget 的布局，它会更改对话框的布局，即使我已经明确选择了页面。

这是设计师的错误吗？我错过了什么吗？我真的不想以编程方式添加布局，因为这会阻止我在同一个 .ui 文件中的设计器中布局页面

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T03:36:19.227

单击对象树中的小部件页面会将该页面带到堆栈的顶部，但不会选择它。

事实上，不可能选择小部件页面本身 - 只能选择其子小部件（当然还有父堆叠小部件）。

为小部件页面设置布局的最简单方法是：

1.  通过单击其父堆叠小部件右上角的小箭头将其带到顶部
2.  使用工具栏上的按钮设置适当的布局

请注意，无法在没有任何子小部件的小部件上设置布局。

*（如果这里有一个错误，那就是当单击对象树*中没有子小部件的小部件页面时，工具栏按钮应该是灰色的。当使用堆叠的小部件箭头时，工具栏按钮*是*灰色的-正确输出）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-01T02:38:45.883

这不是设计师的错误，但也不是很直观。您需要在堆叠的小部件页面本身（您的控件所在的位置）内单击，然后单击工具栏中的布局按钮之一。单击树视图中的页面不会为您选择页面。

# java - 接受对接口对象的引用的 Java 方法

> ID：12223848
> 
> 赞同：2
> 
> 时间：2012-09-01T00:09:33.097
> 
> 标签：java, methods, interface

我有点不确定以下问题：

如果`Launchable`是 Java 接口，可以将哪些对象传递给以下方法？可以在此方法内的 item 上调用哪些方法？

```
public void prepareForLaunch (Launchable item) {
    // some code
} 
```

我目前的答案是：
根据上述信息，唯一可以传递给方法的对象是实例化为接口的子类类型的对象`Launchable`。（？）可以在方法内的 item 上调用的方法必须是同一包中的公共方法或受保护方法。这些方法也必须用于`Launchable`对象的子类，因为它只存在于方法体定义可以存在的抽象和实际（具体）类中。

我想知道这里是否有人可以检查我的答案并添加任何建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T00:14:39.880

您只能传入实现的类的实例`Launchable`（直接或通过从超类继承）。也可以传入`null`。

在方法内部，您可以调用定义在`Launchable`（和`Object`）中的所有方法。

这些方法将在接口中*定义*`Launchable`，但在实际类中*实现*（Java 类型系统保证了这一事实，它不会让您拥有接口实现不完整的类，那些需要声明为抽象的，不能实例化）。

如果您需要调用任何其他方法，您需要知道所讨论的对象还实现了一些其他接口（或属于给定类），并首先对其进行类型转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:17:49.613

既然你说这`Launchable`是一个接口，任何实现的类的实例`Launchable`都可以传递给`prepareForLaunch`. 任何实现的类`Launchable`都必须实现接口中定义的方法，因此任何方法`Launchable`都可以调用给给定的对象`prepareForLaunch`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T00:20:09.397

你对第一部分是正确的。关于您可以调用的方法：如果您不使用强制转换，那么您只能在同一个 Launchable 包中调用 public\protected。如果您将使用强制转换，您可以将可以调用的方法范围扩展到强制转换类中的方法。

考虑这段代码：

```
public interface Launchable
{
    public void aMethod();
}
public class SomeClass implements Launchable
{
    public void aMethod()
    {
    }
    public void bMethod(){}
} 
```

无需铸造你就可以打电话

```
item.aMethod(); 
```

使用 Casting，您可以调用：

```
((SomeClass)item).bMethod(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T00:16:40.643

你应该使用`implements`声明，

```
public void prepareForLaunch() implements Launchbla {
} 
```

# php - 手动设置 curl 的 cookie 文件

> ID：12223850
> 
> 赞同：0
> 
> 时间：2012-09-01T00:09:55.443
> 
> 标签：php, cookies

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

.example.com    TRUE    /   FALSE   0   session 4029916%2C2010-04-30T22%3A51%3A52%2C1243925043100000000000000000000000000000 
```

我从 API 请求中获取 cookie，并且我需要将这些 cookie 用于以下请求，如何将从请求中检索到的 cookie 设置为 curl 使用的 cookie 文件？

上面你可以看到一个例子，我需要用不同的域向这个文件写入 3 个 cookie。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:15:08.973

您需要在`cURL`请求中添加 2 个参数

```
$cookie_file = "/directory/to/cookie1.txt";
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file); 
```

`cookie1.txt`必须由 cURL 写入。剩下的留给 cURL，它会知道放置多个域并使用它们。

# vim - Vim behaves differently depending on backup and swapfile

> ID：12223856
> 
> 赞同：1
> 
> 时间：2012-09-01T00:10:45.250
> 
> 标签：vim, nerdtree

Right now I have backup and swapfile turned off in my vimrc, like this

```
 set nobackup
    set noswapfile 
```

and everything works fine. But if I decide to turn backup and swapfile on

```
 set backup
    set swapfile 
```

then vim starts acting differently. For example, if I try to use nerdtree (I have F4 mapped to :NERDTreeToggle) I'll hit F4 and the entire screen will go blank, prompting me to hit enter to continue.

But when I have backup and swapfile turned off hitting F4 opens nerdtree like normal. Why does this happen? How do I turn on backup and swapfile without changing the behavior of vim?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:58:54.470

In general, the settings should not affect Vim behavior. If this is limited to NERD_tree, I would contact the plugin author and ask for help. (I could not reproduce your problem.)

When this doesn't happen when you type the `:NERDTreeToggle` command yourself, maybe your mapping is missing a `<silent>` or `:silent NERDTreeToggle`.

# php - 在 PHP 中定义的错误消息

> ID：12223859
> 
> 赞同：0
> 
> 时间：2012-09-01T00:11:15.560
> 
> 标签：php

如何在最佳实践中“制作”错误消息？现在我只有`$error = '';`很多 if(){} 可以做`.= 'Message<br>'`, then `if (!empty($error)) { echo $error; }`，我认为这是一件可怕的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:19:44.010

我猜你想向用户显示错误。我通常使用数组。

```
$success = true;
$messages = array();
if($something_wrong == true){
   $success = false;
   $messages[] = 'something wrong';
}

if($morething_wrong == true){
   $success = false;
   $messages[] = 'more thing wrong';
}

if(!$success){
   foreach($messages as $message){
      echo $message.'<br />';
   }
} 
```

基本上，如果出现问题，我总是将消息分配为 $messages 的最后一个新组件。在执行结束时，我会显示所有消息。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:23:31.103

一种方法：

```
function err($err){
    switch($err){
        case 0: $message.="brain fried"; break;  // comment if you want
        case 1: $message.="head ache"; break;
        case 2: $message.="segment fault big time"; break;
    }
return $message;
} 
```

和

```
if (something is wrong){$message=err(3);} 
```

只是一种将事物组合在一起的方法。

# ios - 在 iOS 上，对于单视图应用程序，视图是否总是按纵向布局并调整大小，即使应用程序仅在横向模式下运行？

> ID：12223862
> 
> 赞同：0
> 
> 时间：2012-09-01T00:11:21.457
> 
> 标签：ios, uiviewcontroller, uiinterfaceorientation

如果应用程序仅支持横向模式，通过单击项目摘要中的图标指定，然后在

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return  interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
                   interfaceOrientation == UIInterfaceOrientationLandscapeRight;

} 
```

然后如果在`viewDidLoad`，我做

```
UIView *smallBox = [[UIView alloc]initWithFrame:CGRectMake(10, 10, 300, 300)];
smallBox.autoresizingMask = UIViewAutoresizingFlexibleWidth;

smallBox.backgroundColor = [UIColor yellowColor];
[self.view addSubview:smallBox]; 
```

然后我拿着一个横向的物理 iPad 2，并从 Xcode 运行程序。黄色框实际上比 300px 宽得多。但这只有在纵向模式下首先将 300px 视为 300px，然后将其调整为固定的左右边距，使其宽度为 556px。（正如我添加的用于打印帧宽度的触摸处理程序中所确认的那样）。

但是该应用程序被配置为仅在横向模式下运行，那么为什么要调整大小呢？所以似乎iOS应用程序的规则是它***总是***首先以纵向模式布局，然后如果想要横向模式则调整大小/重新布局？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-01T00:16:17.557

**尝试将此方法设置为自动调整界面：**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation != UIInterfaceOrientationPortrait);

} 
```

# android - 将 setOnFocusChangeListener 设置为 EditText 时 Android 应用程序崩溃

> ID：12223863
> 
> 赞同：-1
> 
> 时间：2012-09-01T00:11:30.677
> 
> 标签：android

当我将 OnFocusChangeListener 设置为 editText 时，我的应用程序不断崩溃。应用程序崩溃并且我 logcat 向我发送 java.lang.nullPointerException ..为什么？

```
public class MainActivity extends FragmentActivity 
    implements HeadlinesFragment.OnHeadlineSelectedListener {
 private int myYear, myMonth, myDay;
 static final int ID_DATEPICKER = 0;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.news_articles);
    EditText txt1 = (EditText) findViewById(R.id.editText2);
    txt1.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
             final Calendar c = Calendar.getInstance();
             myYear = c.get(Calendar.YEAR);
             myMonth = c.get(Calendar.MONTH);
             myDay = c.get(Calendar.DAY_OF_MONTH);
             showDialog(ID_DATEPICKER);
        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:22:58.507

确保你的布局`news_articles.xml`在`editText2`里面。

如果您正在`NullPointerException`上网，`txt1.setOnFocusChangeListener`这可能是原因

# java - Hibernate - 带有集合的实体

> ID：12223865
> 
> 赞同：1
> 
> 时间：2012-09-01T00:12:09.950
> 
> 标签：java, hibernate

我有一个这样的实体（省略任何不必要的代码）：

```
class Client{
    private id;  
    @OneToMany(mappedBy = "client", fetch = FetchType.EAGER)
    private Set<Remark> remarks = new HashSet<Remark>();
    //getters and setters
} 
```

我调用 List clients = session.createCriteria(Client.class)。如果客户有多个评论，我会得到多个相同的客户对象，例如，如果客户有 2 个评论，那么在列表中有两个相同的客户。我认为这不是好的行为，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:09:43.697

不幸的是，您似乎必须使用`criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);` 才能获得想要的东西。查看nsfyn55粘贴的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T16:38:21.723

我看起来不像您正在使用 HQL，但为了完整起见，解决此问题的另一种方法是使用`distinct`HQL 中的关键字。我有理由相信，像下面这样的 HQL 查询也可以解决您的问题。

```
select distinct c from Client c where c.id = ? 
```

# javascript - Meteor 发布/订阅独特客户端集合的策略

> ID：12223866
> 
> 赞同：22
> 
> 时间：2012-09-01T00:12:12.790
> 
> 标签：javascript, mongodb, meteor

使用 Meteor，我想知道如何最好地处理共享相同服务器端数据库集合的不同客户端集合。考虑以下示例：我有一个`User`集合，在我的客户端我有一个*朋友用户列表，*我有一个搜索功能，它对整个用户数据库执行查询，返回*与查询匹配的用户名列表*.

在 Publish 服务器端方法中，我有两个针对同一集合的查询，它们返回不同的文档集。这些数据是否应该在客户端进入两个单独的集合？还是应该将所有匹配两个查询的用户文档都放在同一个集合中？如果是后者，我会复制用于服务器端和客户端查询的代码吗？

在服务器上：

```
Meteor.publish('searchResults', function(query){
  var re = new RegExp(query, 'i')
  return Users.find({ 'name' : {$regex: re}})
}) 
```

在客户端：

```
Session.set('searchQuery', null)

Meteor.autosubscribe(function(){
  Meteor.subscribe('searchResults', Session.get('searchQuery'))
})

Template.search.events = {
  'keyup #user-search' : function(e){
    Session.set('searchQuery', e.target.value)
  }
}

_.extend(Template.search, {

  searchResults: function() {
    var re = new RegExp(Session.get('searchQuery'), 'i')
    return Users.find({ 'name' : {$regex: re}})
  }
}) 
```

这似乎是一个合理的解决方案，但不是最佳解决方案。如果我想创建一个新的客户端集合，其中包含来自多个服务器端集合的搜索结果，该怎么办？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T20:29:37.677

在共享区域：

```
function getSearchUsers(query) {
  var re = new RegExp(query, "i");
  return Users.find({name: {$regex: re}});
}

function getFriendUsers() {
  return Users.find({friend: true});    // or however you want this to work
} 
```

在服务器上：

```
Meteor.publish("searchUsers", getSearchUsers);
Meteor.publish("friendUsers", getFriendUsers); 
```

在客户端：

```
Template.search.onCreated(function () {
   var self = this;
   self.autorun(function () {
     self.subscribe("searchUsers", Session.get("searchQuery"));
   });
});

Template.friends.onCreated(function () {
  this.subscribe("friendUsers");
});

Template.search.helpers({
  searchResults: function () {
    return getSearchUsers(Session.get("searchQuery"));
  }
});

Template.friends.helpers({
  results: function () {
    return getFriendUsers();
  }
}); 
```

从中得出的关键结论是，当数据通过网络传输时，幕后发生的事情并不明显。Meteor 似乎*将* 在服务器上的各种查询中匹配的记录组合起来，并将其发送到客户端。然后客户端再次运行相同的查询以将它们分开。

例如，假设您在服务器端集合中有 20 条记录。然后您有两个发布：第一个匹配 5 个记录，第二个匹配 6 个，其中 2 个是相同的。Meteor 将发送 9 条记录。然后在客户端上运行与在服务器上执行的完全相同的查询，最终应该分别得到 5 条和 6 条记录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-18T10:12:50.933

我参加聚会有点晚了，但是有一种方法可以在客户端上为一个服务器集合的子集提供单独的集合。在此示例中，我有一个名为的服务器集合`entities`，其中包含有关`polygons`and的信息`rectangles`。
共享代码（lib 文件夹）：

```
// main collection (in this example only needed on the server
Entities = new Meteor.Collection('entities');
// partial collections
RectEntities = new Mongo.Collection('rectEntities');
PolyEntities = new Mongo.Collection('polyEntities'); 
```

客户端代码：

```
// this will fill your collections with entries from the Entities collection
Meteor.subscribe('rectEntities');
Meteor.subscribe('polyEntities'); 
```

请记住，订阅的名称需要与发布的名称匹配（但不是集合本身的名称）
服务器代码：

```
Meteor.publish('rectEntities', function(){
    Mongo.Collection._publishCursor( Entities.find({shapeType: 'rectangle'}), this, 'rectEntities'); 
    this.ready();
});

Meteor.publish('polyEntities', function(){
    Mongo.Collection._publishCursor( Entities.find({shapeType: 'polygon'}), this, 'polyEntities'); 
    this.ready();
}); 
```

感谢 user728291 使用更简单的解决方案`_publishCursor()`！
该`_publishCursor()`函数的第三个参数是新集合的名称。
来源：[http ://docs.meteor.com/#/full/publish_added](http://docs.meteor.com/#/full/publish_added)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T09:47:31.840

使用[发布复合](https://atmospherejs.com/reywood/publish-composite)包

```
// main collection
Entities = new Meteor.Collection('entities');

// partial collections only client side
RectEntities = new Mongo.Collection('rectEntities');
PolyEntities = new Mongo.Collection('polyEntities');

// server publish
Meteor.publishComposite("rectEntities", function(someParameter) {
    return {
            collectionName:'rectEntities',
            find: function() {
                return Entities.find({shapeType: 'rectangle'});
            },
            children: []
    }
});
Meteor.publishComposite("polyEntities", {
        collectionName:'polyEntities',
        find: function() {
            return Entities.find({shapeType: 'polygon'});
        },
        children: []
}); 
```

来源：[http ://braindump.io/meteor/2014/09/20/publishing-to-an-alternative-clientside-collection-in-meteor.html](http://braindump.io/meteor/2014/09/20/publishing-to-an-alternative-clientside-collection-in-meteor.html)

# ios - 有没有办法在运行时修改用于 iOS 本地化的字符串？

> ID：12223874
> 
> 赞同：1
> 
> 时间：2012-09-01T00:13:36.807
> 
> 标签：ios, localization

有没有办法在 iOS 从 Localizable.strings 读取本地化字符串后更改它们，并且仍然保持使用能力`NSLocalizedStringWithDefaultValue(key, table, bundle, value, comment)`？换句话说，是否有可能以编程方式更改本地化字符串，例如，在从服务器接收到一组更新的字符串之后？

这个问题假设 Localizable.strings 不能修改，因为这需要修改主 NSBundle，在安装应用程序后不允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:37:24.077

一种方法是创建一个包含所需字符串文件的新包，并使用该包而不是`[NSBundle mainBundle]`in `NSLocalizedStringWithDefaultValue(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T09:21:40.980

将您的宏重新定义`NSLocalizedString`为您想要的任何内容：

```
#undef  NSLocalizedString
#define NSLocalizedString(key, comment) \
[MyLocalizationManager localizedStringForKey:key] 
```

# ios - 在 objc_exception_throw 中停止时如何查看异常原因？

> ID：12223875
> 
> 赞同：3
> 
> 时间：2012-09-01T00:13:39.723
> 
> 标签：ios, xcode, xcode4

> **可能重复：**
> [Xcode/GDB：如何获取有关刚刚抛出的异常的信息？](https://stackoverflow.com/questions/3327828/xcode-gdb-how-to-get-information-about-an-exception-that-was-just-thrown)

我的 iPhone 应用程序导致抛出异常。我在 Xcode 中添加了一个异常断点，这会导致调试器在`objc_exception_throw`. 我如何查看异常的原因（`NSException`'s `reason`）？我可以从断点继续，这会导致应用程序将堆栈一直展开到 main() 并在输出窗口中记录异常，但随后我丢失了发生异常的上下文。

# c# - 正则表达式获取包含特定innerHTML的单元格的表格

> ID：12223876
> 
> 赞同：-3
> 
> 时间：2012-09-01T00:13:48.820
> 
> 标签：c#, regex

这张表的图片：

```
<table cellpadding="0" border="0">
<tr class="someclass">

<td>blah blah THISISIMPORTANT blah blah</td>

</tr>
</table> 
```

我只想选择具有包含“THISISIMPORTANT”的innerHTML 的TD 的表。

这必须使用 c# 中的正则表达式来完成

这是我尝试过的：

```
<table\s*.*?\s*>\s*.*?\s*<td\s*.*?\s*>\s*.*?\s*</td>\s*.*?\s*</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:39:42.973

```
/<table[^>]*>(?:.(?!<\/table>))*<td[^>]*>(?:.(?!<\/td>))*THISISIMPORTANT.*?<\/td>.*?<\/table>/ 
```

这很接近......我的意思是，只要没有人在标签内使用“>”，你就可以了。但是你真的应该找到比正则表达式更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:25:36.650

为什么不直接使用[HTML Agility Pack](https://htmlagilitypack.codeplex.com/)？它非常好地解析 HTML，甚至支持 LINQ，所以用它实现你想要的应该是微不足道的。

您*可以*使用正则表达式解析您想要的文本，但是您需要假设将始终完美地形成并采用相同的特定格式等，这将使代码难以维护。

编辑：我发现了另一个与您的问题几乎相同的问题，其中的代码示例显示了如何使用 HTML 敏捷包来实现解决方案：[regex to get value of inside a specific TD in HTML](https://stackoverflow.com/questions/1876822/regex-to-get-value-of-inside-a-particular-td-in-html?rq=1)

# java - 在Java中，如何将对象从工作线程传回主线程？

> ID：12223882
> 
> 赞同：2
> 
> 时间：2012-09-01T00:14:37.883
> 
> 标签：java, multithreading

在Java中，如何将对象从工作线程传回主线程？以以下代码为例：

```
 main(String[] args) {

    String[] inputs;
    Result[] results;
    Thread[] workers = new WorkerThread[numThreads];

    for (int i = 0; i < numThreads; i++) {
        workers[i] = new WorkerThread(i, inputs[i], results[i]);
        workers[i].start();
    } 

    ....
  }
  ....

class WorkerThread extends Thread {
    String input;
    int name;
    Result result;

    WorkerThread(int name, String input, Result result) {
        super(name+"");
        this.name = name;
        this.input = input;
        this.result = result;
    }

    public void run() {
        result  = Processor.process(input);
    }
} 
```

怎么传`result`回给`main`的`results[i]`？

`this`传递给`WorkerThread`,怎么样

```
workers[i] = new WorkerThread(i, inputs[i], results[i], this); 
```

这样它就可以

```
mainThread.reults[i] = Processor.process(inputs[i]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T00:23:46.363

为什么不使用[`Callable`s](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)和 an [`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)？

```
main(String[] args) {

  String[] inputs;
  Future<Result>[] results;

  for (int i = 0; i < inputs.length; i++) {
    results[i] = executor.submit(new Worker(inputs[i]);
  } 
  for (int i = 0; i < inputs.length; i++) {
    Result r = results[i].get();
    // do something with the result
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:43:36.780

@Thilo 和 @Erickson 的答案是最好的。现有的 API 可以简单可靠地执行此类操作。

但是，如果您想坚持当前的手动操作方法，那么对您的代码进行以下更改可能就足够了：

```
for (int i = 0; i < numThreads; i++) {
    results[i] = new Result();
    ...
    workers[i] = new WorkerThread(i, inputs[i], results[i]);
    workers[i].start();
}

...

public void run() {
    Result tmp = Processor.process(input);
    this.result.updateFrom(tmp);
    // ... where the updateFrom method copies the state of tmp into
    // the Result object that was passed from the main thread.
} 
```

另一种方法是`Result[]`在主程序中替换为`Result[][]`a 并将其传递`Result[0]`给可以使用结果对象更新的子线程。（一个轻量级的持有人）。

但是，当您在低级别实现此功能时，我们有一个**重要**的问题是主线程需要在尝试检索结果之前在所有子线程上调用 Thread.join。如果不这样做，主线程可能会*偶尔*在 Result 对象中看到陈旧的值。这`join`还确保`main`线程在相应的子线程完成之前不会尝试访问 Result。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:22:33.010

主线程需要等待工作线程完成才能获得结果。一种方法是让主线程在尝试读取结果之前等待每个工作线程终止。线程在其 run() 方法完成时终止。

例如：

```
for (int i = 0; i < workers.length; i++) {
  worker.join(); // wait for worker thread to terminate
  Result result = results[i]; // get the worker thread's result
  // process the result here...
} 
```

您仍然必须安排工作线程的结果以某种方式插入到 result[] 数组中。作为一种可能性，您可以通过将数组和索引传递给每个工作线程并让工作线程在终止之前分配结果来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T00:28:40.690

一些典型的解决方案是：

*   将结果保存在工作线程的实例中（无论是它`Runnable`还是`Thread`）。这类似于`Future`接口的使用。
*   使用`BlockingQueue`构建工作线程的 a，它们可以将结果放入其中。
*   简单地使用`ExecutorService`和`Callable`接口来获得一个`Future`可以被询问的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T00:39:05.507

看起来您的目标是并行执行计算，然后一旦所有结果都可用于主线程，它就可以继续并使用它们。

如果是这种情况，请将您的并行计算实现为一个[`Callable`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)而不是一个线程。将此任务集合传递[`invokeAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)给`ExecutorService`. 此方法将阻塞，直到所有任务都完成，然后您的主线程才能继续。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T09:38:05.343

I think I have a better solution, why don't you make your worker threads pass the result into a linkedListBlockingQueue, which is passed to them, after they are done, and your main function picks the results up from the queue like this

```
while(true){linkedListBlockingQueue.take(); 
    //todo: fil in the task you want it to do
    //if a specific kind of object is returned/countdownlatch is finished exit
} 
```

# ruby - 我在这个 Ruby 代码中做错了什么？

> ID：12223884
> 
> 赞同：1
> 
> 时间：2012-09-01T00:15:04.650
> 
> 标签：ruby

```
def pregunta 
    reply = gets.chomp.downcase
    if reply == 'si'
        puts 'Correcto'
    end

    if reply == 'no'
        puts 'Incorrecto'
    end
end

pregunta 'alfkjdasñlfj?' 
```

在我提出问题（“pregunta”是英文问题）后，当我输入答案（“si”或“no”时，程序应该告诉我我是对的（“correcto”）还是错误的（“incorrecto”） ）。我没有得到答案，而是得到一个“ArgumentError”。我究竟做错了什么？

我正在使用 Ruby 1.9.3-p194

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:26:18.490

pregunta 不带参数，但无论如何你都会传递一个参数。我可能是错的，但不是你试图做这样的事情：

```
def pregunta(preg)
    puts preg
    reply = gets.chomp.downcase
    if reply == 'si'
        puts 'Correcto'
    end

    if reply == 'no'
        puts 'Incorrecto'
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:22:39.063

您没有将值传递给函数调用，而是从终端读取它。调用该函数，*然后*输入您的字符串。

```
pregunta
si
Correcto
=> nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T00:23:25.957

您的方法声明中没有任何参数。

你需要这样的东西：

```
def pregunta(foo)
   if foo == 'bar'
      true
   end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T00:24:22.813

你叫 pregunta 'alfkjdasñlfj'？但该方法没有参数。

```
def pregunta(answer) 
    reply = answer.chomp.downcase
    if reply == 'si'
        puts 'Correcto'
    end

    if reply == 'no'
        puts 'Incorrecto'
    end
end

pregunta gets 
```

也许 ？

# python - 代码正在运行，但带有“DeprecationWarning”-scipy.stats

> ID：12223892
> 
> 赞同：0
> 
> 时间：2012-09-01T00:16:32.217
> 
> 标签：python, csv, numpy, statistics, scipy

我编写了这段代码来计算大样本的众数和标准差：

```
import numpy as np
import csv
import scipy.stats as sp
import math

r=open('stats.txt', 'w') #file with results
r.write('Data File'+'\t'+ 'Mode'+'\t'+'Std Dev'+'\n')
f=open('data.ls', 'rb') #file with the data files

for line in f:
    dataf=line.strip()
    data=csv.reader(open(dataf, 'rb'))
    data.next()
    data_list=[]
    datacol=[]
    data_list.extend(data)
    for rows in data_list:
            datacol.append(math.log10(float(rows[73])))
    m=sp.mode(datacol)
    s=sp.std(datacol)
    r.write(dataf+'\t'+str(m)+'\t'+str(s)+'\n')
    del(datacol)
    del(data_list) 
```

哪个运作良好-我认为！但是，在我运行代码之后，我的终端上出现了一条错误消息，我想知道是否有人可以告诉我这意味着什么？

```
 /usr/lib/python2.6/dist-packages/scipy/stats/stats.py:1328: DeprecationWarning:     scipy.stats.std is deprecated; please update your code to use numpy.std.
    Please note that:
    - numpy.std axis argument defaults to None, not 0
    - numpy.std has a ddof argument to replace bias in a more general manner.
      scipy.stats.std(a, bias=True) can be replaced by numpy.std(x,
      axis=0, ddof=0), scipy.stats.std(a, bias=False) by numpy.std(x, axis=0,
      ddof=1).
  ddof=1).""", DeprecationWarning)
/usr/lib/python2.6/dist-packages/scipy/stats/stats.py:1304: DeprecationWarning: scipy.stats.var is deprecated; please update your code to use numpy.var.
Please note that:
    - numpy.var axis argument defaults to None, not 0
    - numpy.var has a ddof argument to replace bias in a more general manner.
      scipy.stats.var(a, bias=True) can be replaced by numpy.var(x,
      axis=0, ddof=0), scipy.stats.var(a, bias=False) by var(x, axis=0,
      ddof=1).
  ddof=1).""", DeprecationWarning)
/usr/lib/python2.6/dist-packages/scipy/stats/stats.py:420: DeprecationWarning: scipy.stats.mean is deprecated; please update your code to use numpy.mean.
Please note that:
    - numpy.mean axis argument defaults to None, not 0
    - numpy.mean has a ddof argument to replace bias in a more general manner.
      scipy.stats.mean(a, bias=True) can be replaced by numpy.mean(x,
axis=0, ddof=1).
  axis=0, ddof=1).""", DeprecationWarning) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T02:44:17.937

这些是[弃用警告](http://docs.python.org/library/exceptions.html#exceptions.DeprecationWarning)，这通常意味着您的代码可以工作，但可能会在未来的版本中停止工作。

目前你有这条线`s=sp.std(datacol)`。看起来警告建议使用`numpy.std()`而不是进行`scipy.stats.std()`此更改可能会使此警告消失。

如果您不关心弃用警告并想按原样使用您的代码，您可以使用[警告](http://docs.python.org/library/warnings.html)模块来抑制它。例如，如果你有一个`fxn()`生成 DeprecationWarning 的函数，你可以像这样包装它：

```
with warnings.catch_warnings():
    warnings.simplefilter("ignore")
    fxn()  #this function generates DeprecationWarnings 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T14:16:12.487

`DeprecationWarnings`不要阻止您的代码正常运行，它们只是警告您正在使用的代码将很快被弃用，您应该将其更新为正确的语法。

在这种特殊情况下，它源于 NumPy 和 SciPy 在`var`, `std`... 函数/方法的默认参数上的不一致。为了清理干净，决定从`scipy.stats`NumPy 中删除这些函数并使用它们的对应项。

当然，仅仅删除这些功能会让一些用户感到不安，他们的代码会突然无法工作。因此，SciPy 开发人员决定在`DeprecationWarning`几个版本中包含一个，这应该为每个人留出足够的时间来更新他们的代码。

在您的情况下，您应该使用检查`scipy.stats.std`系统上的文档字符串来查看他们使用的默认值，并按照有关如何相应修改代码的警告说明进行操作。

# ef-code-first - 实体框架外键关联是否总是暗示级联删除？

> ID：12223894
> 
> 赞同：0
> 
> 时间：2012-09-01T00:16:52.777
> 
> 标签：ef-code-first, entity-framework-5

在阅读[实体框架中的外键后，](http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx)我尝试将外键关系添加到 EF 5 Code First 应用程序（该应用程序迄今为止使用独立关联）。

我注意到生成的 DDL 包含级联删除。这与独立协会的行为相反。

鉴于通过添加根据约定*ClassnameId命名的**int*属性在 EF Code First 中创建外键关系，是否可以进行非级联删除？如果是这样，将向*ClassnameId*分配什么值以解除相关对象的关联而不将其从数据库中删除？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:49:18.293

如果您明确声明一个不可为空的外键，EF 将假定您需要级联删除。

您可以使外键可以为空：

```
public int? YourFkId {get;set;} 
```

或者你可以在你的`OnModelCreating`

```
 modelBuilder.Entity<Class1>()
        .HasMany( c => c.Class2s )
        .WithRequired(x => x.Class1 )
        .WillCascadeOnDelete(false); 
```**

# java - ApplicationContext 感知的替代方案

> ID：12223902
> 
> 赞同：0
> 
> 时间：2012-09-01T00:18:28.240
> 
> 标签：java, spring, applicationcontext

我的情况是，我有一个只有静态方法的类（设计糟糕），并且我在其中添加了一个新字段，该字段将初始化为由 spring 管理的 bean。该字段将由其中一种静态方法使用。

我发现我可以创建一个新类，它可以感知上下文并从该类中获取 bean。

```
class A implements ApplicationContextAware{

   static beanType givebean(){
   }

   //Code to retrieve bean from application context    
}

class B{

  static beanType bean;

  static void method1(){
      bean = A.giveBean();
      //does stuffs
  }

  static void method2(){
  }

}

 configuration file::
  <bean id="bean" class="X.X.X.X.beanType"/> 
```

我的问题是除了使用 Applicationcontextaware 之外，还有没有办法在不受 spring 管理的类中使用 bean。我不反对使用 Appcontextaware，但我想知道这些是否还有其他可能性。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:11:57.687

如果您在 Web 应用程序中，您可以使用：

*   [http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/web/context/support/WebApplicationContextUtils.html](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/web/context/support/WebApplicationContextUtils.html)

然后：

```
WebApplicationContextUtils.getApplicationContext(extract servlet context from request for example)).getBean("beanid") 
```

问候

# php - 每二十四小时自动更新mysql表

> ID：12223904
> 
> 赞同：2
> 
> 时间：2012-09-01T00:18:52.713
> 
> 标签：php, mysql, cron

我想知道如何设置一个脚本（我假设这将是一个 cron 作业），它将每 24 小时将 mysql 表中的一个字段重置为零。我希望它为每个用户重置字段，而不仅仅是特定的人。不幸的是，我对 cron 作业一无所知，但也许我什至不需要使用它们。我非常不确定如何解决这个问题。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T00:24:35.027

使用 MySql 事件调度程序本身呢？

[http://dev.mysql.com/doc/refman/5.6/en/events-overview.html](http://dev.mysql.com/doc/refman/5.6/en/events-overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:22:18.390

创建一个连接到 mysql 表并执行更新查询的 python 脚本。

创建一个每天运行 1 次的 cron 作业，该作业执行：

python updateValue.py

这很容易，也是我能想到的最好方法。

crontab 参数看起来像：

```
0 0 * * * python updateValue.py 
```

# android - 是否可以预测 Android 不同屏幕中 UI 元素的新位置？

> ID：12223906
> 
> 赞同：0
> 
> 时间：2012-09-01T00:19:11.717
> 
> 标签：android, android-layout

我一直在尝试找出 android 如何在同一应用程序的不同屏幕上重新定位 UI 元素。我一直在用 Android 2.2 的音乐播放器做一些测试：（ [来源：][[simplehelp.net](http://www.simplehelp.net/images/android_music_windows/android_music_windows17.png)][）][![安卓2.2音乐播放器](../Images/88c918d9ed1f2f825cbc6fd2015a167c.png)](https://i.stack.imgur.com/iOEz0.png)

这是 MediaPlaybackActivity 的第一个图像按钮在不同屏幕尺寸下的位置（左上角）： 屏幕 1（分辨率：480x800，密度：240dpi）：像素坐标：345、109 屏幕 2（分辨率：240x400，密度： 120dpi): 像素坐标: 173, 53 屏幕 3 (分辨率: 320x480, 密度: 160dpi): 像素坐标: 230, 46

我的问题是：给定任何屏幕中的 UI 元素（在本例中为按钮）的坐标，是否可以预测该元素在其他两个屏幕上的坐标？我尝试从 px 转换为 dp 然后再转换回 px 但它不起作用（虽然很接近），这是我尝试过的：

屏幕 2 中索引为 0 的图像按钮的位置 px：173、53 屏幕 2 中索引为 0 的图像按钮的位置 dp：230.66、70.66 ()（我使用这个公式：px = dp * (dpi / 160) 其中我在[这里](https://developer.android.com/guide/practices/screens_support.html)找到）在屏幕 1 中索引为 0 的图像按钮的位置（以像素为单位）：346、106

您可以看到这里非常接近，但是当使用相同的公式将 px 从屏幕 1 转换为屏幕 3 时，我得到：230, 72.66，因此您可以看到*y*轴上的差异非常大。我想上条会影响*y*轴，但我不明白为什么会有这样的差异。

我在这里做错了吗？有没有办法预测 UI 元素的新位置和大小？Android 是如何重新定位视图的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:23:27.450

我想我知道为什么计算失败了。我创建了一个简单的应用程序，让 android 自己进行缩放，然后应用公式并且它起作用了。所以我猜我正在使用的应用程序（音乐播放器）可能会被定制为在不同的屏幕上以不同的方式显示，即使它看起来完全一样。而且由于开发人员可以为不同的屏幕使用不同的布局，所以我想问题并不像我想象的那么简单。谢谢@aprian，您的评论帮助我找出可能是什么问题。

# php - PDO：为什么这会导致错误？

> ID：12223911
> 
> 赞同：1
> 
> 时间：2012-09-01T00:20:02.903
> 
> 标签：php, pdo

我不明白为什么在创建这样的对象时会出现此错误：

错误在这一行的 index.php 中：

```
$dbPerfiles = new DB_Functions(); 
```

错误是这样的：

```
PDO Connection error: invalid data source name 
```

**配置文件**

```
<?php
define ("DB_USER","root");
define ("DB_PASS","root");
define ("DNS","mysql:host=localhost;dbname=example");
?> 
```

**DB_Connect.php**

```
<?php
require_once 'config.php';
class DB_Connect {
    private static $_instance;

    //Connecting to database
    public function &pdo_connect() {    
        if(!self::$_instance) {
            try{
                self::$_instance = new PDO(DNS,DB_USER, DB_PASS);
                self::$_instance->setAttribute(PDO::ATTR_PERSISTENT, true);
                self::$_instance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            } catch (PDOException $ex) {
                die("PDO Connection error: ".$ex->getMessage()."<br/>");
            }
        }
        return self::$_instance;
    }

    private function __construct() {
    }

    private function __clone() {
    }
}
?> 
```

**DB_Functions.php**

```
<?php
    session_start();
    require_once 'DB_Connect.php';

    class DB_Functions extends DB_Connect{

        private $dbConnect = "";

        public function __construct() {
            $this->dbConnect = $this->pdo_connect();
        }

        public function __destruct() {
            $this->dbConnect = null;
        }

        public function getDetails() {
            try {
                //sql statement

            } catch (PDOException $e) {
                echo "Error: ".$e->getMessage()."<br/>";
                return false;
            }
        }
    }
?> 
```

**索引.php**

```
<?php 
session_start();
$max_time = 1800;
$current = time();
if(!isset($_SESSION['clientmac']['un']) ) { 
    $_SESSION['clientmac']['un'] == "";
    header('Location: index.php');
} else {
    if (!isset($_SESSION['timeLogin'])){
        $_SESSION['clientmac']['tl'] = time();
    } else {
        $session_life = $current - $_SESSION['clientmac']['tl'];    

        if ($session_life > $max_time) {
            header('Location: include/logout.php');
        } else {
            $_SESSION['clientmac']['tl'] = time();
        }
    }

    require_once 'include/DB_Functions.php';
    $dbPerfiles = new DB_Functions();  //With this line shows the error

    //code to connect to getDetails() function in DB_Functions.php and
    //retrieve some data.

?>
<!doctype html>
<html lang=en>
<!--
CODE HTML
-->
</html>
<?php
}
?> 
```

我想连接到 DB_Functions 并连接到此文件中的 getDetails() 函数或其他函数并检索数据.. 仅此而已！

我希望我已经解释过了。

问候！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:47:05.900

**无效数据源名称**等错误可能指：

1.  DSN 语法不正确（在您的情况下它看起来正确）；
2.  DSN 参数不正确
    1.  主机可能不是本地主机（您的 mysql 配置可能不允许通过 TCP 或来自本地主机本身的连接，但我对此表示怀疑，因为默认允许来自本地主机的 TCP 连接）；
    2.  数据库名称可能不正确（因为在您的代码中`example`）使我认为您可能没有创建名为 example 的数据库；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:12:41.980

解决了！只有我只需要添加这一行

```
require_once 'include/config.php'; 
```

以上

```
require_once 'include/DB_Functions.php'; 
```

并且有效，但我不明白为什么？

因为在 DB_Connect.php 中是相同的这一行。

# c# - 更高质量的通知栏图标奇怪的失真

> ID：12223913
> 
> 赞同：1
> 
> 时间：2012-09-01T00:20:36.723
> 
> 标签：c#, .net

我最近决定为我开发的应用程序创建更高质量的图形。原始且质量较低的图形为 48x48 像素，而新图形为 256x256 像素。当我运行具有较低分辨率图标的旧版本应用程序时，该图标会正确显示。

但是，在运行新应用程序时，更高分辨率的图标会变形（带有锐利边缘的方形而不是圆形边缘，并且图标以一定角度关闭）。

![在此处输入图像描述](../Images/69f6dc201569a097818dbc78c5bd0fb8.png)

![在此处输入图像描述](../Images/5d0e8f63298479e7e9097fd8f038458a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:26:18.710

看起来像一个糟糕的采样功能被用来重新缩放图标。

虽然有更优雅的解决方案，但 256 像素到 48 像素是一个相当大的调整大小。为什么不简单地制作第二个更小分辨率的图标，并将其用于托盘？

我玩了一下你的图片，这是我能做的最好的：

![已编辑图标](../Images/ceb18ee0f3808120cf352549eb7650be.png)

您可以将其复制并粘贴到资源管理器中的 16px 24 位图标中（不要忘记“清理”您的解决方案重建，因为它可能仍使用旧的），而不是您正在使用的大图标。我通过将你的图标缩小到 16x16，然后手动编辑像素直到它看起来正确：

![截屏](../Images/d6c809b4d3666a0d52f329384b1d28e0.png)

如果您在其他地方需要一个高分辨率图标，我认为您应该有一个高分辨率和一个低分辨率图标，并使用合适的图标。

简单地拥有一个图标并将其重新缩放为不同的大小听起来像是一件聪明的事情，但实际上你不能简单地重新缩放图标并期望它能够工作： http: [//mrgan.tumblr.com/post/708404794/ios-应用程序图标大小](http://mrgan.tumblr.com/post/708404794/ios-app-icon-sizes)

# c++ - strtok 读长

> ID：12223918
> 
> 赞同：0
> 
> 时间：2012-09-01T00:21:58.927
> 
> 标签：c++, strtok

这是一个文本文件的内容：

```
SQUARE 2
SQUARE
RECTANGLE 4 5 
```

我试图弄清楚为什么我的 strtok() 循环不会结束第二个“SQUARE”而只是使长度 = 0。也不完全理解 strtok 背后的概念，我不介意关于 strtok 的讲座。这是代码：

```
#include <cstring>
#include <cstdlib>
#include <iostream>
using std::cout;
using std::endl;
using std::cin;
using std::ios;

#include<iomanip>
using std::setprecision;

#include <fstream>
using std::ifstream;

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = " ";

int main()
{
// create a file-reading object
ifstream fin;
fin.open("geo.txt"); // open a file
if (!fin.good()) 
    return 1; // exit if file not found

//PI
float pi = 3.14159265359; 

//DIMENSIONS
float length, width, height, radius;

//AREAS, PERIMETERS, VOLUMES
float areaSquare, periSquare;
float areaRectangle, periRectangle;
float areaCube, volCube;
float areaPrism, volPrism;
float areaCircle, periCircle;
float areaCylinder, volCylinder;

// read each line of the file
while (!fin.eof())
{
    // read an entire line into memory
    char buf[MAX_CHARS_PER_LINE];
    fin.getline(buf, MAX_CHARS_PER_LINE);
    // parse the line into blank-delimited tokens
    int n = 0; // a for-loop index

    // array to store memory addresses of the tokens in buf
    const char* token[MAX_TOKENS_PER_LINE] = {0}; // initialize to 0

    // parse the line
    token[0] = strtok(buf, DELIMITER); // first token
    if (token[0]) // zero if line is blank
    {
        for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
        {
            token[n] = strtok(0, DELIMITER); // subsequent tokens
            if (!token[n] || token[n]==0) break;
        }
    }

    if(strcmp("SQUARE", token[0]) == 0) //1
    {
        length = atof(token[1])?atof(token[1]):0;
        areaSquare = length * length;
        periSquare = 4 * length;

        cout.setf(ios::fixed|ios::showpoint);
        cout << setprecision(2);
        cout << token[0] << ' ' << "length="<< token[1] << ' ';
        cout << "Area=" << areaSquare << ' ';
        cout << "Perimeter=" << periSquare << '\n';
        cout.unsetf(ios::fixed|ios::showpoint);
        cout << setprecision(6);
    }

    else if(strcmp("RECTANGLE", token[0]) == 0) //2
    {
        length = atof(token[1])?atof(token[1]):0;
        width = atof(token[2])?atof(token[2]):0;

        areaRectangle = length * width;
        periRectangle = 2 * length + 2 * width;

        cout.setf(ios::fixed|ios::showpoint);
        cout << setprecision(2);
        cout << token[0] << ' ' << "length="<< token[1] << ' ';
        cout << "width=" << token[2] << ' ' ;
        cout << "Area=" << areaRectangle << ' ';
        cout << "Perimeter=" << periRectangle << '\n';
        cout.unsetf(ios::fixed|ios::showpoint);
        cout << setprecision(6);
        }
    else
    {
        cout << "End of program. Press ENTER to exit.";
        cin.ignore(1000,10);
        break;
}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T02:04:50.807

这是一个有效的版本。

主要区别是，

1.  已将 char * 数组更改为 20 个字符字符串数组。这保证了数组元素已分配内存，在您的情况下，它们是空指针，并且当 strtok 返回 NULL 时保持这种状态，然后您不能使用 NULL 指针。
2.  对 strtok 的第二次调用是“strtok(0,DELIMITER)”，但应该是“strtok(NULL,DELIMITER)”。

我认为它们是唯一的差异，但使用 diff 实用程序进行检查。

```
#include <cstring>
#include <cstdlib>
#include <iostream>
using std::cout;
using std::endl;
using std::cin;
using std::ios;

#include<iomanip>
using std::setprecision;

#include <fstream>
using std::ifstream;

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = " ";

int main()
{
// create a file-reading object
   char *tok;
   ifstream fin;
   fin.open("geo.txt"); // open a file
   if (!fin.good())
       return 1; // exit if file not found

       //PI
       float pi = 3.14159265359;

       //DIMENSIONS
       float length, width, height, radius;

       //AREAS, PERIMETERS, VOLUMES
       float areaSquare, periSquare;
       float areaRectangle, periRectangle;
       float areaCube, volCube;
       float areaPrism, volPrism;
       float areaCircle, periCircle;
       float areaCylinder, volCylinder;

       // read each line of the file
       while (!fin.eof())
       {
           // read an entire line into memory
           char buf[MAX_CHARS_PER_LINE];
           fin.getline(buf, MAX_CHARS_PER_LINE);
           // parse the line into blank-delimited tokens
           int n = 0; // a for-loop index

           // array to store memory addresses of the tokens in buf
//         const char* token[MAX_TOKENS_PER_LINE] = {0}; // initialize to 0
           char token[MAX_TOKENS_PER_LINE][20];
           for (n=0;n<MAX_TOKENS_PER_LINE;n++)
               {
               token[n][0] = NULL;
               }
           // parse the line
           tok = strtok(buf, DELIMITER); // first token
           if (tok == NULL)
               break;
           strcpy(token[0],tok);
           if (token[0]) // zero if line is blank
               {
               for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
                   {
                   tok = strtok(NULL, DELIMITER); // subsequent tokens
                   if (tok == NULL)
                       break;
                   strcpy(token[n],tok);
//                 if (!token[n] || token[n]==0) break;
                   }
               }
           if(strcmp("SQUARE", token[0]) == 0) //1
                {
                length = atof(token[1])?atof(token[1]):0;
                areaSquare = length * length;
                periSquare = 4 * length;

                cout.setf(ios::fixed|ios::showpoint);
                cout << setprecision(2);
                cout << token[0] << ' ' << "length="<< token[1] << ' ';
                cout << "Area=" << areaSquare << ' ';
                cout << "Perimeter=" << periSquare << '\n';
                cout.unsetf(ios::fixed|ios::showpoint);
                cout << setprecision(6);
                }

            else if(strcmp("RECTANGLE", token[0]) == 0) //2
                {
                length = atof(token[1])?atof(token[1]):0;
                width = atof(token[2])?atof(token[2]):0;

                areaRectangle = length * width;
                periRectangle = 2 * length + 2 * width;

                cout.setf(ios::fixed|ios::showpoint);
                cout << setprecision(2);
                cout << token[0] << ' ' << "length="<< token[1] << ' ';
                cout << "width=" << token[2] << ' ' ;
                cout << "Area=" << areaRectangle << ' ';
                cout << "Perimeter=" << periRectangle << '\n';
                cout.unsetf(ios::fixed|ios::showpoint);
                cout << setprecision(6);
            }
        else
            {
            cout << "End of program. Press ENTER to exit.";
            cin.ignore(1000,10);
            break;
            }
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T01:37:42.447

您的分段错误是由以下原因引起的：

```
length = atof(token[1])?atof(token[1]):0; 
```

您错误地假设 token[1] 已被标记化。如果您查看第二个“SQUARE”，您会发现对于该行，它会将 token[1] 设置为 NULL。然后将 NULL 传递给 atof() ，这是可以理解的错误。

您还错误地使用了 strtok() 。没有理由从它的结果中去 strcpy()，因为 strtok() 本身就是一个破坏性的操作。

所以这里有一个关于 strtok 的讲座。

首先，它是邪恶的，但非常方便，以至于你有时会使用它。Tokenizers 写起来可能会很痛苦。

strtok 背后的想法是创建一个简单的标记器。分词器写起来很麻烦，如果你不介意让它很容易炸毁你的计算机，它的界面实际上相当不错。例如，您可以使用非常少量的代码来解析命令行参数。

但是， strtok 对您使用它的字符串具有破坏性。它将用 0 替换它找到的标记，自动以 null 终止返回的值。这意味着您可以直接使用返回的字符串而无需复制它。像这样的字符串：

```
here are spaces0 
```

改为

```
here0are0spaces0 
```

其中 0 分隔字符串字符 (0) 的结尾。这是就地完成的，你会得到指向这里、是和空格的指针。

strtok 使用静态变量——这意味着它在调用之间保留状态信息。在第一次调用时，您将指针传递给您尝试标记的字符串；从那时起，您将向它传递一个 NULL 指针以表示您希望它从之前停止的地方继续。它返回下一个标记，当它找到字符串的结尾时返回 NULL。

strtok 循环很容易编写。此代码将为您正确标记一个字符串。下面的示例代码很丑，但我怪累了。

```
char *input_string;        // Just so we have it
const int MAX_TOKENS = 10; // Arbitrary number
char *tokens[MAX_TOKENS];  // This will do all the storage we need.
tokens[0] = strtok(input_string, " -=\""); // Setup call.
int number_of_tokens = 1;  // We've already filled tokens[0], so we have 1 token. We want to start filling from 1.

do {
    if (tokens[number_of_tokens] = strtok(NULL," -=\"")) number_of_tokens++;
    else break;
} while(number_of_tokens < MAX_TOKENS); 
```

循环中的第一行是 C 程序员的常见做法，但不利于可读性。这是它的作用：

a) 将 tokens[number_of_tokens] 设置为 strtok 的返回值。b) 如果为 NULL，则终止循环（第二行）。addendnum：有一个内联测试。您可以执行 if (a = 1) 并且它会返回 true 并将 a 设置为 1。您可以执行 if (a = 0) 它会在将 a 设置为 0 时返回 false。这一行利用了这一事实，如果 strtok( ) 返回 NULL，好吧，那是错误的。c) 如果它不为 NULL，tokens[number_of_tokens] 现在包含一个指向字符串中找到的下一个标记的指针。d) 由于找到了一个令牌，令牌的数量（number_of_tokens）就增加了。5) 它重用了计算有多少令牌的变量，作为它保存的指针数组的索引。6) 无限循环，直到满足 strtok 返回 NULL 的条件，或 while() 条件（在这种情况下，有超过 10 个标记）。

如果给它这个字符串：

这里有一些=words0

这将是

```
*tokens[0]="here"
*tokens[1]="are"
*tokens[2]="some"
*tokens[3]="words"
*tokens[4] = NULL
number_of_tokens = 4 
```

如您所见，无需复制任何内容，因为该字符串在内存中被替换为：

这里0是0some0words0

其中 0 分隔字符串字符 (0) 的结尾。

我希望这回答了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T03:23:56.700

这是一些基于您的代码的工作 C++。

我已经修改了 I/O 处理；`fin.getline()`报告它是否有一条线，所以它应该用来控制循环；`fin.eof()`在我的估计中是一个危险信号（就像`feof(fp)`在 C 中一样）。

发生核心转储是因为您没有检查在 word 之后是否有长度标记`SQUARE`。修改后的代码检查它是否获得了正确数量的令牌，如果没有则抱怨。使用的代码`strtok()`已经统一到一个循环中；它包含一个诊断打印语句，显示刚刚找到的令牌（对于检查正在发生的事情很有价值）。

我删除了一堆未使用的变量；每个变量在计算块中定义和初始化。

关于使用 C 字符串和`strtok()`在 C++ 中可能存在无穷无尽的保留（如果所有代码都是使用 C 标准 I/O 函数等 C 语言编写的，那么打印会更加简洁`printf()`）。您可以`strtok()`在[Strange `strtok()`error](https://stackoverflow.com/questions/11911884/strange-strtok-behaviour/11912769#11912769)找到替代方案的讨论。[您可以在阅读用户输入和检查字符串](https://stackoverflow.com/questions/4981935/reading-user-input-and-checking-the-string/4982167#4982167)中找到另一个关于为什么`strtok()`库函数中的灾难的讨论。

### 问题中 3 行数据的工作代码

```
#include <cstring>
#include <cstdlib>
#include <iostream>
using std::cout;
using std::endl;
using std::cin;
using std::ios;
using std::cerr;

#include<iomanip>
using std::setprecision;

#include <fstream>
using std::ifstream;

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = " ";

int main()
{
    // create a file-reading object
    const char *fname = "geo.txt";
    ifstream fin;
    fin.open(fname); // open a file
    if (!fin.good()) 
    {
        cerr << "Failed to open file " << fname << endl;;
        return 1; // exit if file not found
    }

    // read each line of the file
    char buf[MAX_CHARS_PER_LINE];
    while (fin.getline(buf, sizeof(buf)))
    {
        int n = 0;
        const char *token[MAX_TOKENS_PER_LINE] = {0};
        char *position = buf;

        while ((token[n] = strtok(position, DELIMITER)) != 0)
        {
            cout << "Token " << n << ": " << token[n] << endl;
            n++;
            position = 0;
        }

        if (strcmp("SQUARE", token[0]) == 0 && n == 2)
        {
            float length = atof(token[1])?atof(token[1]):0;
            float areaSquare = length * length;
            float periSquare = 4 * length;
            cout.setf(ios::fixed|ios::showpoint);
            cout << setprecision(2);
            cout << token[0] << ' ' << "length="<< token[1] << ' ';
            cout << "Area=" << areaSquare << ' ';
            cout << "Perimeter=" << periSquare << '\n';
            cout.unsetf(ios::fixed|ios::showpoint);
            cout << setprecision(6);
        }
        else if (strcmp("RECTANGLE", token[0]) == 0 && n == 3)
        {
            float length = atof(token[1])?atof(token[1]):0;
            float width = atof(token[2])?atof(token[2]):0;
            float areaRectangle = length * width;
            float periRectangle = 2 * length + 2 * width;
            cout.setf(ios::fixed|ios::showpoint);
            cout << setprecision(2);
            cout << token[0] << ' ' << "length="<< token[1] << ' ';
            cout << "width=" << token[2] << ' ' ;
            cout << "Area=" << areaRectangle << ' ';
            cout << "Perimeter=" << periRectangle << '\n';
            cout.unsetf(ios::fixed|ios::showpoint);
            cout << setprecision(6);
        }
        else
        {
            cout << "Unrecognized data: " << buf << endl;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T00:39:41.650

好的。当你的线

`const char* token[MAX_TOKENS_PER_LINE] = {0};`

创建一个指针数组，但它们都没有指向任何东西。第一个元素设置为 0（这是一个 NULL 地址），其余元素未初始化。当您运行和处理第 2 行（有 1 个元素）时，token[0] 指向“SQUARE”，但 token[1] 的值是 0x00（NULL）。这是一个无效的内存位置。然后，您使用该行处理 token[1]

```
length = atof(token[1])?atof(token[1]):0; 
```

这会导致分段错误，因为 token[1] 是一个 NULL 指针。在我的版本中，token[1] 是一个指向 NULL 字符串的有效指针，它将长度设置为 0。我建议您使用 -g 标志进行编译（例如 g++ -g test.cpp -o test）。然后调用“gdb test”并使用 break、run、continue 命令来单步执行代码。您可以使用 print 命令来显示变量的内容。

在 gdb 的第一次运行中，只需输入“运行”。这将失败，然后输入'bt'，它将告诉你失败的行，我们称之为行号。

在第二次运行中输入“break linenumber”，然后输入“run”，执行将在失败的行上停止，但在执行之前。然后，您可以查看变量的内容，这将为您提供有关失败原因的重要线索。

# cassandra - Cassandra - 如何使用 cqlsh 创建复合列名（非键）

> ID：12223925
> 
> 赞同：2
> 
> 时间：2012-09-01T00:23:04.247
> 
> 标签：cassandra

我正在尝试在 Cassandra 1.1 中对列族进行建模，逻辑上看起来像这样：

```
Entp: //CF
 //rowkey->  entp_name_xyz: 
                   {entp_full_name: "full_name_xyz",
                    some_value: 1,
                    policy: {policy_name: "default policy",
                             type: "type 1",
                             prop_1: "prop 1",
                             ...
                             },
                    rules: {rule_1:, rule_2:,rule_3:}
                   } 
```

我要建模的查询是：获取给定 entp 名称的所有策略，获取给定 entp 的所有规则，获取给定 entp_name 的所有列 我计划将此列族建模为具有“宽行”，其中一行将看起来像这样：

```
RowKey:- entp_name_xyz,
column_name:- policy:p1
Value:-{JSON object - {policy_name: "default policy", type: "type 1",                 prop_1: "prop 1", ...}}
column_name:- policy:p2
Value:-{JSON object - {policy_name: "default policy2", type: "type 1",                 prop_1: "prop 1", ...}}
column_name: rule:r1 where r1 is a rowkey of a Rules column family
Value: Null 
```

现在我的问题是在 cqlsh 或 cassandra-cli 中，

1.  如何插入复合列名称，例如 policy:p1？
2.  使用此方案，是否可以进行如下查询： select * from entp where column_name like "policy:*" and entp_name= xyz 以便只读取所有策略列？
3.  如何为列设置空值。我在一些论坛上读到，您不需要设置 null，因为它相当于没有值。但是考虑一下你有一个带有 col1、col2 和 col3 的静态模式的情况，我想插入一个 col3 =null 的行，但 col1 和 col2 有一些值。插入此类数据的 cqlsh 语法是什么（我在文档中找不到），因为以下给出了错误：

    插入 entp (col1,col2,col3) 值 ("abc","xyz", null)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T04:30:38.413

1.  复合材料在 CQL3 中更容易使用，在 cassandra 1.1 中可供您使用，所以我将在我的回答中使用它。CQL3 中具有多组件主键的表相当于存储引擎（Cassandra）层中的宽行。

    如果我已经解释了您的政策和规则数据的样子，那么这是一个可能的答案：

    ```
    CREATE TABLE entp_policies (
        entp_name text,
        policy_name text,
        policy_value text,
        PRIMARY KEY (entp_name, policy_name)
    );
    CREATE TABLE entp_rules (
        entp_name text,
        rule_name text,
        rule_value text,
        PRIMARY KEY (entp_name, rule_name)
    ); 
    ```

    你会这样使用它：

    ```
    INSERT INTO entp_policies (entp_name, policy_name, policy_value)
         VALUES ('entp_name_xyz', 'p1',
                 '{policy_name: "default policy", type: "type 1", ...}');

    INSERT INTO entp_policies (entp_name, policy_name, policy_value)
         VALUES ('entp_name_xyz', 'p2',
                 '{policy_name: "default policy2", type: "type 1", ...}');

    INSERT INTO entp_rules (entp_name, rule_name) VALUES ('entp_name_xyz', 'r1');

    -- Get all policies given an entp name
    SELECT * FROM entp_policies WHERE entp_name = 'entp_name_xyz';

    -- Get all rules given an entp
    SELECT * FROM entp_rules WHERE entp_name = 'entp_name_xyz';

    -- Get all columns given an entp_name (both of the above) 
    ```

2.  使用您的方案，是的，可以进行这样的查询，但它会比我的版本更挑剔，而且 CQL2 已被弃用。

3.  没错，您只是避免插入该值。`NULL`cql中没有任何明确的（[尚未](https://issues.apache.org/jira/browse/CASSANDRA-3783)），但你可以这样做：

    ```
    insert into entp (col1,col2) values ('abc','xyz'); 
    ```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T01:10:05.277

如果您在组合中定义另一列，则可以在一个表中同时使用规则和策略

```
create table entp_details(
    entp_name text,
    type text,
    name text,
    value text,
    primary key (entp_name, type, name)); 
```

在这里类型是（策略或规则）。

```
INSERT INTO entp_details (entp_name, type, name, value)
     VALUES ('entp_name_xyz', 'Policy', 'p1',
             '{policy_name: "default policy", type: "type 1", ...}');

INSERT INTO entp_details (entp_name,  type, name, value)
     VALUES ('entp_name_xyz', 'Policy', 'p2',
             '{policy_name: "default policy2", type: "type 1", ...}');

INSERT INTO entp_details (entp_name, type, name, value) VALUES ('entp_name_xyz', 'Rule', 'r1', null); 
```

查询就像

```
select * from entp_details WHERE entp_name = 'entp_name_xyz' and type = 'Policy';
select * from entp_details WHERE entp_name = 'entp_name_xyz' and type = 'Rule'; 
```

# android - 谷歌地图上不在谷歌地方的标记点

> ID：12223930
> 
> 赞同：0
> 
> 时间：2012-09-01T00:23:51.027
> 
> 标签：android, database, sqlite

我在 SO 中对此进行了相当多的搜索，但没有解决这个确切的问题。所以就在这里。

我有一个不在谷歌地方的大约 100000 个地理点的 Excel 表。我需要获取当前位置附近的点 - 给定绑定半径。并在我的 android 应用程序中显示这些要点。

我阅读了使用 SQLite 数据库，但在创建数据库之前，我想知道是否有其他方法可以做到这一点。

我可以只用 KML 或其他格式解析这些数据，还是最好使用 SQLite？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:06:26.157

有了这么多数据点，我肯定会使用数据库，然后按与当前地图中心点的粗略距离对它们进行排序，并且只将满足阈值的项目添加到叠加层（或者应该在地图上可见）

请参阅此处的[SO 问题](https://stackoverflow.com/questions/3695224/android-sqlite-getting-nearest-locations-with-latitude-and-longitude)并查看答案，尤其是选择语句位于底部的答案。

# view - UIPageViewController 改变大小？

> ID：12223932
> 
> 赞同：2
> 
> 时间：2012-09-01T00:24:01.387
> 
> 标签：view, orientation, frame, subview, uipageviewcontroller

我在 Xcode 4 中使用基于页面的应用程序模板来加载 PDF 页面并在隐藏的文本框上创建 UITextView，以便用户可以写笔记。

到目前为止，我已经完成了所有工作，但是当我添加 UITextView 时，它在横向模式下位于错误的位置（显示 2 页）。

```
// ModelController.m

- (id)init
{
    self = [super init];
    if (self) {
        NSString *pathToPdfDoc = [[NSBundle mainBundle] pathForResource:@"My PDF File" ofType:@"pdf"];
        NSURL *pdfUrl = [NSURL fileURLWithPath:pathToPdfDoc];
        self.pageData = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfUrl);  // pageData holds the PDF file
    }
    return self;
}

- (DataViewController *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard
{
    // Return the data view controller for the given index.
    if( CGPDFDocumentGetNumberOfPages( self.pageData ) == 0 || (index >= CGPDFDocumentGetNumberOfPages( self.pageData )))
        return nil;

    // Create a new view controller and pass suitable data.
    DataViewController *dataViewController = [storyboard instantiateViewControllerWithIdentifier:@"DataViewController"];
    dataViewController.dataObject = CGPDFDocumentGetPage( self.pageData, index + 1 );   // dataObject holds the page of the PDF file

    [dataViewController view];  // make sure the view is loaded so that all subviews can be accessed

    UITextView  *textView = [[UITextView alloc] initWithFrame:CGRectMake( 10, 20, 30, 40 )];

    textView.layer.borderWidth = 1.0f;
    textView.layer.borderColor = [[UIColor grayColor] CGColor];

    [dataViewController.dataView addSubview:textView];  // dataView is a subview of dataViewController.view in the storyboard/xib

    CGRect  viewFrame = dataViewController.dataView.frame;  // <- *** THIS IS THE WRONG SIZE IN LANDSCAPE ***
} 
```

这种行为真的让我很惊讶，因为当我旋转 iPad 时不会调用 viewControllerAtIndex，所以我无法知道视图框架的实际大小是多少。我在纵向和横向都得到相同的视图框架：

```
# in Xcode console:
po [dataViewController view]

# result in either orientation:
(id) $4 = 0x0015d160 <UIView: 0x15d160; frame = (0 20; 768 1004); autoresize = RM+BM; layer = <CALayer: 0x15d190>>
# 
```

有谁知道我是否应该使用转换来正确定位 UITextView？我担心我可能必须独立存储元素的位置并在收到 shouldAutorotateToInterfaceOrientation 消息时重新定位它们。

似乎 Apple 可能不正确地实现了 UIPageViewController，但我能找到的只是我仍在试图弄清楚的部分解决方法：

[UIPageViewController 和屏幕外方向更改](https://stackoverflow.com/questions/10111156/uipageviewcontroller-and-off-screen-orientation-changes)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T03:09:48.390

我认为这里的技巧是覆盖**DataViewController**中的 viewDidLayoutSubviews并管理所有以编程方式插入的非自动调整大小的视图的大小，因为直到那时你才真正知道父级将对其子视图做什么。

```
-(void)viewDidLayoutSubviews
{
  [super viewDidLayoutSubviews];

  self.textView.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
} 
```

# c# - 返回数据后如何继续执行方法？

> ID：12223933
> 
> 赞同：1
> 
> 时间：2012-09-01T00:24:07.427
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api

我开发了一个用于机器性能监控的 Web API，当通过 URL 调用资源时，信息以 json 格式打印在浏览器上。其中一种方法有一个循环，每秒获取一个新的数据值。

是否可以在每次迭代时“返回”值并在浏览器上以 json 格式显示，从而在每次迭代时自动更新？换句话说，我正在尝试创建一个实时更新机制，而不是等待程序执行然后在性能数据日志完成后显示 json。

```
public List<LogInfo> LogTimedPerfData(string macName, string categoryName, string counterName,
                                          string instanceName, string logName, long? seconds)
    {
        iModsDBRepository modsDB = new iModsDBRepository();
        List<MachineInfo> theMac = modsDB.GetMachineByName(macName);

        if (theMac.Count == 0)
            return new List<LogInfo>();

        else if (instanceName == null)
        {
            if (!PerformanceCounterCategory.Exists(categoryName, macName) ||
                !PerformanceCounterCategory.CounterExists(counterName, categoryName, macName) )
            {
                return new List<LogInfo>();
            }
        }
        else if (instanceName != null)
        {
            if (!PerformanceCounterCategory.Exists(categoryName, macName) ||
                !PerformanceCounterCategory.CounterExists(counterName, categoryName, macName) ||
                !PerformanceCounterCategory.InstanceExists(instanceName, categoryName, macName))
            {
                return new List<LogInfo>();
            }
        }
        else if (logName == null)
        {
            return new List<LogInfo>();
        }

        // Check if entered log name is a duplicate for the authenticated user
        List<LogInfo> checkDuplicateLog = this.GetSingleLog(logName);
        if (checkDuplicateLog.Count > 0)
        {
            return new List<LogInfo>();
        }

        PerformanceCounterCategory category = new PerformanceCounterCategory(categoryName, theMac[0].MachineName);
        if (category.CategoryName == null || category.MachineName == null)
        {
            return new List<LogInfo>();
        }

        List<LogInfo> logIt = new List<LogInfo>();
        if (category.CategoryType != PerformanceCounterCategoryType.SingleInstance)
        {
            List<InstanceInfo> instances = modsDB.GetInstancesFromCatMacName(theMac[0].MachineName, category.CategoryName);

            foreach (InstanceInfo inst in instances)
            {
                if (!category.InstanceExists(inst.InstanceName))
                {
                    continue;
                }
                else if (inst.InstanceName.Equals(instanceName, StringComparison.OrdinalIgnoreCase))
                {
                    PerformanceCounter perfCounter = new PerformanceCounter(categoryName, counterName,
                                                                        inst.InstanceName, theMac[0].MachineName);

                    string data = "";
                    List<UserInfo> currUser = this.GetUserByName(WindowsIdentity.GetCurrent().Name);

                    string timeStarted = DateTime.Now.ToString("MM/dd/yyyy - h:mm:ss tt");

                    string[] dataValues = new string[(int)seconds];
                    for (int i = 0; i < seconds; i++)
                    {
                        data = "Value " + i + ": " + perfCounter.NextValue().ToString();
                        dataValues[i] = data;
                        Thread.Sleep(1000);
                    }
                    string timeFinished = DateTime.Now.ToString("MM/dd/yyyy - h:mm:ss tt");

                    Log log = new Log
                    {
                        LogName = logName,
                        CounterName = perfCounter.CounterName,
                        InstanceName = perfCounter.InstanceName,
                        CategoryName = perfCounter.CategoryName,
                        MachineName = perfCounter.MachineName,
                        TimeStarted = timeStarted,
                        TimeFinished = timeFinished,
                        PerformanceData = string.Join(",", dataValues),
                        UserID = currUser[0].UserID
                    };
                    this.CreateLog(log);
                    logIt.Add(new LogInfo
                    {
                        LogName = logName,
                        CounterName = perfCounter.CounterName,
                        InstanceName = perfCounter.InstanceName,
                        CategoryName = perfCounter.CategoryName,
                        MachineName = perfCounter.MachineName,
                        TimeStarted = timeStarted,
                        TimeFinished = timeFinished,
                        PerformanceData = dataValues.ToList<string>()
                    });
                    break;
                }
            }
        }
        else
        {
            PerformanceCounter perfCounter = new PerformanceCounter(categoryName, counterName,
                                                                        "", theMac[0].MachineName);

            string data = "";
            List<UserInfo> currUser = this.GetUserByName(WindowsIdentity.GetCurrent().Name);

            string timeStarted = DateTime.Now.ToString("MM/dd/yyyy - h:mm:ss tt");

            string[] dataValues = new string[(int)seconds];
            for (int i = 0; i < seconds; i++)
            {
                data = "Value " + i + ": " + perfCounter.NextValue().ToString();
                dataValues[i] = data;
                Thread.Sleep(1000);
            }
            string timeFinished = DateTime.Now.ToString("MM/dd/yyyy - h:mm:ss tt");

            Log log = new Log
            {
                LogName = logName,
                CounterName = perfCounter.CounterName,
                InstanceName = perfCounter.InstanceName,
                CategoryName = perfCounter.CategoryName,
                MachineName = perfCounter.MachineName,
                TimeStarted = timeStarted,
                TimeFinished = timeFinished,
                PerformanceData = string.Join(",", dataValues),
                UserID = currUser[0].UserID
            };              
            this.CreateLog(log);
            logIt.Add(new LogInfo
            {
                LogName = logName,
                CounterName = perfCounter.CounterName,
                InstanceName = perfCounter.InstanceName,
                CategoryName = perfCounter.CategoryName,
                MachineName = perfCounter.MachineName,
                TimeStarted = timeStarted,
                TimeFinished = timeFinished,
                PerformanceData = dataValues.ToList<string>()
            });
        }
        return logIt;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:13:07.387

您可能想对一些关于`SignalR`使用 SignalR 向浏览器推送通知的教程进行一些研究。

少数可能有用的链接：

*   [https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)
*   [http://www.codeproject.com/Articles/322154/ASP-NET-MVC-SIngalR-and-Knockout-based-Real-time-U](http://www.codeproject.com/Articles/322154/ASP-NET-MVC-SIngalR-and-Knockout-based-Real-time-U)
*   [http://www.msguy.com/2011/11/real-time-push-notifications-with.html](http://www.msguy.com/2011/11/real-time-push-notifications-with.html)

# python - 如何替换单词，统计一个单词，并保存计数

> ID：12223937
> 
> 赞同：0
> 
> 时间：2012-09-01T00:24:54.197
> 
> 标签：python

我需要首先替换风险相关的词，例如risky riskier riskless [risk]（风险）风险。风险！将风险* 转化为风险，只计算风险并将其归还。

这样做时，有一些条件。我不应该把“风险-”和任何有风险的词算作星号这样的组成部分。

例如，在一个长文档中，可能有很多与风险相关的词。为了简化解释，

#

我喜欢冒险。我不喜欢冒险的路线。

无风险利率是多少？

什么是星号？【风险】就是风险。

#

从上面的文件来看，1）需要将risk和riskier替换为risk。（也可能有其他词，所以不要坚持冒险）。2）只计算风险，包括[风险]风险。但不是风险和星号。

该示例非常简化。同样，“风险”，任何像risky riskless riskness riskier这样的词，任何内部的“风险”（[{，任何以.*！？之前或结尾的“风险”等......都应该在将其替换为风险后计算。任何词不应将包含风险作为组成部分的内容计算在内。此外，不应将风险-计算在内。

谢谢。

市场风险风险[风险

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:19:39.450

这实际上是如何编写正则表达式的问题。我不太擅长RE。但就您的示例而言，以下内容有效：

```
>>> import re
>>> a= '''I like to take risk. I don't like to take a riskier route.
How much is the risk-free interest rate?
What is asterisk? [risk] is risk. '''
>>> pattern=r'\brisk[^\-]?\w*\b'
>>> re.subn(pattern,'risk',astr)
("\nI like to take risk. I don't like to take a risk route.\nHow much is the risk-free interest rate?\nWhat is asterisk? [risk] is risk.\n" , 5) 
```

* * *

基于以上，您可以实现您的逻辑：

```
counts=0
with open(myfile, 'r') as f:
    with open(my_new_file, 'a') as fo:
        for line in f:
            newline, lcount= re.subn(pattern,'risk',line)
            counts+=lcount
            fo.write(newline) 
```

# objective-c - 在 Objective-C 中，我们必须使用 self.var 还是只使用 var 来引用 self 的属性？

> ID：12223939
> 
> 赞同：4
> 
> 时间：2012-09-01T00:25:19.353
> 
> 标签：objective-c, ios

如果我向 ViewController 添加属性

```
@property (strong, atomic) UIView *smallBox; 
```

并在文件中合成它`.m`，该变量实际上可以被`smallBox`任何实例方法内部引用。

但是，`self.view`不能被 替换`view`，即使它也`view`被定义为 UIViewController 的属性。为什么有区别，规则是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T00:44:31.257

`self.view`和`view`/`_view`不是一回事。取决于您如何创建实例变量，`view`或`_view`参考实际的对象实例变量。直接访问它是危险的，你应该只在`init`,`dealloc`或访问器中这样做。在其他任何地方，您都应该使用`self.view`.

`self.view`与 完全相同`[self view]`，将消息“view”传递给对象“self”并返回结果。默认情况下，当一个对象接收到一条消息时，它会执行具有该名称的方法，并且默认实现`view`将返回相关实例变量的值（`view`或`_view`）。

在旧版本的 Xcode 中，`@synthesize view`会创建一个名为`view`. 在最新版本的 Xcode 中，声明一个属性`view`会自动创建一个实例变量`_view`，在很多情况下都会调用，即使没有`@synthesize`. 此更改使您在直接访问 ivar 时更容易注意到。

简而言之：

*   除了 in`init`和`dealloc`访问`view`器（如果您自定义编写它们），请始终使用`self.view`.
*   在这些方法中，您应该将其称为`_view`.
*   如果您正在为最新的 Xcode 编写，则根本不要包含`@synthesize`。如果您正在为稍旧的 Xcode 编写代码，请使用`@synthesize view=_view;`
*   `self.view`并不意味着“实例变量的值”。它的意思是“传递消息'view'的结果”，通常实现为返回实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:59:40.077

您不能`view`直接访问该成员，因为它`@package`在`UIViewController`. 这可以防止您的代码访问它。（通常，无论如何您都不想直接访问超类的实例变量。）

对于您的类自己的属性，您可以直接访问实例变量，但您需要了解这对内存管理的影响。（同样，正如 Rob 所指出的，正如您通过避免访问器来回避的任何其他行为一样。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:31:31.203

Apple 定义的属性通常在其名称前包含一个下划线，因此当您使用 时`self.view`，它实际上是`_view`从对象中获取实例变量。您不能`_view`在代码中使用，因为它会在编译时导致链接器错误，但 Xcode 仍会为您突出显示它。访问实例变量的另一种方法`self.view`是 by `self->_view`，但这同样会导致链接器错误。这些链接器错误的原因是编译的库不包含 ; 的符号`_view`。即使它的声明可以在`UIViewController.h`.

# javascript - 如何使用 FireBug 对 JavaScript 应用的 CSS 进行故障排除

> ID：12223940
> 
> 赞同：0
> 
> 时间：2012-09-01T00:25:29.317
> 
> 标签：javascript, css, firebug

我正在使用 JavaScript 向我的页面添加一些内容。它没有显示在屏幕上，我使用 FireBug HTML 选项卡来调查正在应用于元素的样式，我看到以下内容：

```
element.style {display: list-item;opacity: 0;} 
```

好的，这就是它不显示的原因。FireBug 控制台右侧没有 CSS 文件名，因此该样式必须已由 JavaScript 应用。如何确定哪个脚本将此样式添加到元素？

谢谢

# javascript - 为什么 delete 关键字的行为与预期相反？

> ID：12223951
> 
> 赞同：10
> 
> 时间：2012-09-01T00:27:35.123
> 
> 标签：javascript, google-chrome

在 Chrome 中，在控制台中尝试以下操作。第一的

```
console = 0; 
```

将值分配`0`给`console`。然后

```
console // (prints `0`) 
```

检查我们是否正确覆盖了`console`. 最后，

```
delete console 
```

令人惊讶的是，`console`现在持有原始`Console`对象。实际上，`delete`关键字“复活” `console`，而不是消灭它！

这是预期的行为吗？这在 Chromium 代码中在哪里实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T14:05:57.733

正如[MDN 的文档`delete`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)中提到的：

> 如果删除操作符成功，它会从对象中完全删除该属性，尽管这可能会在对象的原型上显示一个类似命名的属性。

您`delete`只需取消隐藏通过原型链继承的本机属性。

一些浏览器`window`继承了原生原型，如果你真的想知道这么多细节，你可以查看源代码以查看属性是如何继承的，但大多数情况下它们的工作方式就像 JS 自己的一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T09:12:12.813

**知道了：**

我已经设法*证明*控制台是全局对象的属性：只需打开控制台并输入：`this.parent`或`window.parent`. 这将显示更完整的属性和方法列表供您使用。包括`console: Console`，大约下降了 2/3，就在下面`chrome: Object`（有趣...:)）。当我记得我以某种方式设法更改了控制台本身的 CSS 规则时，我想到了这一点（在 chrome 中，不要问我是如何到达那里的，我不记得了）。
底线：`console`是窗口对象的一个​​属性。我认为这很好地支持了我的解释。

* * *

@Randomblue：由于您对*v8 中的实现方式*感兴趣，您可以在此处检查[主干](http://v8.googlecode.com/svn/)，或浏览流血。您会在某个地方找到一个测试目录，其中包含许多处理`delete`. 特别注意`delete`用于全局变量/属性：它们不能被删除，换句话说：控制台永远不会真正消失。我想知道为什么这个答案从被选为有帮助和被接受变成无帮助和不被接受，虽然......

* * *

这非常简单。`Console`不是一些随机的、独立的对象。它实际上是全局对象的属性。打开您的控制台并输入`this.console === console`or `window.console === console`。当然，它是真实的。

因此，由于隐含`console = 0`的全局变量与`window.console = 0`. 您正在重新分配实例的属性。与普通对象的不同之处在于全局对象不仅仅是任何旧对象：它的属性*不能*被删除（[在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects)的某个地方）。所以你的全局正在掩盖控制台对象，它仍然存在，你也失去了你的参考：

```
var bar = window.console;
console = 12;
bar.log(console);//logs 12, bar is now an alternative reference to the console object
delete console;//unmasks the console reference
console === bar;//true 
```

暂时不要误以为全局对象没有原型。只需键入`this.constructor.name`并瞧瞧：确实出现`Window`了大写字母。`W`另一种双重检查方法是：`Object.getPrototypeOf(this);`or `Object.getPrototypeOf(window);`。换句话说，有一些原型需要考虑。像往常一样，链以`Object.prototype`：

```
 Object.getPrototypeOf(Object.getPrototypeOf(window)); 
```

简而言之，这里没有什么奇怪的事情发生，而是全局对象本身的奇怪性质。它表现得好像正在进行某种形式的原型继承。查看全局对象，就好像它是这样设置的：

```
this.prototype.window = this;//<-- window is a circular reference, global obj has no name
this.prototype.console = new Console();//this is the global object
this.hasOwnProperty(console);//false
console = 0;//implied global 
```

尝试访问`console`时，JS 会找到`console`您刚刚在对象实例之前设置的`Console`属性，并愉快地返回它的值。当我们删除它时也会发生同样的情况，第一次出现的`console`被删除，但原型链更高的属性保持不变。下次`console`请求时，JS会扫描继承链，返回old的控制台实例。控制台对象从未真正消失过，它只是隐藏在您自己设置的属性后面。

*题外话，但为了完整起见：*
由于全局对象的特殊性，还有比这更多的东西（对象/原型链搜索之前的范围扫描），但这是 AFAIK，本质它。
您需要知道的是（在 JS 中）没有（在 JS 中）没有（至少）1 个原型的对象。这包括全局对象。你所做的只是增加当前全局对象的实例，删除一个属性，原型再次接管。就那么简单。这就是@Peeter 在他的回答中暗示的：在严格模式下不允许隐含全局变量，因为它们修改了全局对象。正如我在这里试图解释的那样，这正是这里发生的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T00:36:38.347

窗口对象的某些属性是不可删除的。返回 True 是因为您没有在严格模式下运行。尝试以下操作（不在控制台中）：

```
"use strict";
delete console; 
```

你会得到一个异常（[JSFiddle](http://jsfiddle.net/4Jps6/)）。

[您可以在http://es5.github.com/#x11.4.1](http://es5.github.com/#x11.4.1)阅读有关如何处理的更多信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T15:06:50.830

首先，这不仅仅是控制台，您可以使用~~每个本地财产~~上的每个浏览器定义的属性`window`。

```
setTimeout = 0;
setTimeout //=> 0
delete window.setTimeout;
setTimeout //=> function setTimeout() { [native code] } 
```

[作为ECMA 脚本规范](http://www.ecma-international.org/publications/standards/Ecma-262.htm)一部分的属性可以被完全覆盖和删除：

```
Array = 0;
Array //=> 0
delete window.Array;
Array //=> ReferenceError 
```

~~您几乎可以覆盖 上`window`的任何属性，删除覆盖并恢复正常功能。~~

这样做的简单原因是控制台和所有其他~~本机全局函数~~浏览器定义的属性*不是*通过 javascript 而是通过 C++ 链接到 DOMWindow 对象的。您可以在此处看到附加到 DOMWindow 的控制台以及[此处](http://code.google.com/p/chromium/source/search?q=console&origq=console&btnG=Search+Trunk)的[DOMWindow 实现](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMWindow.h&type=cs&l=1)

这也意味着~~窗口对象不知何故是一个被屏蔽为 javascript 对象的 C++ 对象~~窗口对象至少部分是由 C++ 定义的，*它不是原型继承在发挥作用：*例如：

```
window.hasOwnProperty('console') //=> true, console is defined directly on the window
window.__proto__.hasOwnProperty('console') // => false, the window prototype does not have a console property 
```

此外，如果它是原型继承，以下将导致控制台返回 3：

```
window.__proto__.console = 3;
delete console;
console //=> still returns console;
window.hasOwnProperty('console') //=> the window still has it. 
```

关于原型继承的属性也是如此：

```
window.someProp = 4;
window.__proto__.someProp = 6;
someProp //=> 4
delete someProp;
someProp //=> 6 
```

因此，当你设置`console`任何东西时，它就*消失了*，只能通过（讽刺万岁）复活：`delete console`。

~~因此，这意味着您*不能删除*窗口对象上的任何本机属性。~~尝试`delete window.console`当它没有被覆盖时，它会再次弹出。事实上，您可以在没有收到任何警告（在我眼中）的情况下首先覆盖它（即使在严格模式下），这是 javascript 的关键漏洞之一（将几乎任何页面上的 setTimeout 设置为 0 并看到它撕裂本身分开），但正如他们在蜘蛛侠中所说：

> 拥有权利的同时也被赋予了重大的责任

## 更新

要包含一个提示，这是特定于浏览器/引擎的实现而不是语言本身的任何要求：在 nodejs 中，删除全局对象上的引擎指定属性和 ecma-script 属性有效：

```
delete this.console //=> true
console //=> ReferenceError

delete parseInt //=> true
parseInt //=> ReferenceError 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T00:38:58.153

完全相同的事情发生在 Firefox 中。

根据我自己的观察，我假设如下。

首先检查变量是否匹配局部变量，如果不匹配，则检查它们是否匹配`window.variable`。

当您设置`console`为 1 时，您将局部变量设置`console`为 1，因此任何查找都会看到它而不是`window.console`（仍然存在）。当您删除`delete console`局部变量时。`console`现在任何查找都`console`将匹配`window.console`。这就是为什么你会得到你得到的行为。

我假设这是基于在 Firefox 中尝试 JavaScript 解释器。而且，我对不正确的术语感到抱歉（请随意编辑），我对命名空间没有那么丰富的经验。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T00:46:34.650

> 删除操作符从对象中删除一个属性。
> 
> ...
> 
> 您可以使用 delete 运算符删除隐式声明的变量，但不能删除使用 var 或 function 语句声明的变量。

参见[`delete`MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)

编辑：

如果您真的喜欢核心 JavaScript，另请参阅[了解删除。](http://perfectionkills.com/understanding-delete/#summary)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-13T13:51:24.690

发生的情况是您正在覆盖对象原型，然后删除被覆盖的值，剩下的……是原始对象，即原型。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-01T00:33:22.937

预期的行为。鲜为人知的事实是 Javascript 控制台不在浏览器的全局空间中运行，而是在其自己的匿名函数中运行。

我知道不同的浏览器处理事情的方式不同，但简而言之——删除没有按预期运行，因为它没有在全局空间中运行。

~~如果您真的想看到事情破裂，请尝试使用`delete window.console`~~

好吧，这是官方的——我是个白痴。ECMAScript 中的一项新功能是将属性声明为`dontdelete`. 对这种混乱感到抱歉。

# python - python帮助>>模块给出分段错误-如何修复？

> ID：12223953
> 
> 赞同：6
> 
> 时间：2012-09-01T00:28:26.603
> 
> 标签：python

欢迎来到 Python 2.7！这是联机帮助实用程序。...

```
>> help()

help> modules

Please wait a moment while I gather a list of all available modules...

/usr/lib/python2.7/dist-packages/gobject/constants.py:24: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  from gtk import _gtk

** (python:9642): CRITICAL **: pyg_register_boxed: assertion `boxed_type != 0' failed
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: cannot register existing type `GdkDevice'
  from gtk import _gtk
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: assertion `node != NULL' failed
  from gtk import _gtk
Segmentation fault
durrantm.../dmWorkflow$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T01:00:04.380

`help`不幸的是，这是在 Python 上使用时的一个已知问题。它目前必须导入模块来检查它们的文档字符串，如果模块在导入时执行代码并调用期望特定执行上下文或可能只是错误的第三方库，这可能会导致崩溃。这是一个关于这个特定案例的[开放 Ubuntu 问题。](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/896836)[Python 问题跟踪器](http://bugs.python.org)中有许多关于由于`help`导入导致的类似崩溃的未解决问题。

# r - 对 R 数据帧进行特定过滤

> ID：12223958
> 
> 赞同：0
> 
> 时间：2012-09-01T00:29:50.580
> 
> 标签：r, dataframe

我想对我的 R 数据框应用过滤器。基本上给定一个数据框，我想在所有列中选择值 > N 的行。

N 可以是任何浮点数

```
 N_0m    N_10m    N_30m     N_1h       N_2h     N_6h
TCONS_00000001 26.23550 9.699170 6.766650 8.218550 13.2213000 9.292600
TCONS_00000002  5.63183 0.720824 1.043490 2.022020  3.5085200 0.000000
TCONS_00000003  1.79447 0.931127 1.485220 1.518330  0.0730952 0.000000
TCONS_00000004 17.07330 2.408020 1.263210 1.479090  1.7122500 1.121740 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:37:06.430

这简直

```
df[apply(df > N, 1, all),,drop=FALSE] 
```

如果您的数据框是`df`. 查看`?apply`更多。

# php - 如何测试 Web 服务器之间的速度

> ID：12223959
> 
> 赞同：0
> 
> 时间：2012-09-01T00:30:24.373
> 
> 标签：php, webserver

我的网页托管在 A 公司。我已搬到 B 公司。我在 A 公司的帐户将在几天内有效。我如何测试并因此比较这两者的速度？

谢谢你。

我通过 cPanel 使用网络服务器，所以我猜一个 PHP 脚本或其他东西会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:35:33.713

你可以使用[JMeter](http://jmeter.apache.org/)。便于使用。您可以对您实际想要做的各种场景进行一些回归测试。即：查看 Web 服务器在不同负载下的性能并比较这些公司。

或者您可以使用[Pingdom 工具](http://tools.pingdom.com/fpt/)，即使 firebug 也会告诉您每个 Web 服务器需要多长时间来加载相同的资源。

请注意，您的速度测试主要取决于延迟，即：您与一个网络服务器与另一个网络服务器的距离。加上公司 A 的一台服务器上运行的应用程序数量与公司 B 上的另一台服务器（如果这是共享主机）相比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:20:59.100

正如先前所说：

`traceroute`使用或查看服务器的“跃点”`tracert`

有一些很棒的服务器工具，比如[Nagios](http://www.nagios.org/)，它们会给你很多关于服务器和网络的信息。

如果它们是您自己的服务器，您甚至可以尝试对它们进行 DDOS 攻击，看看它们能承受多大的压力。

您可以简单地运行一个 php 脚本，其中包含文件 I/O、数据库查询等不同操作的 50k 循环迭代，以查看 2 个服务器如何在毫秒内比较不同操作。

您可以设置一个[jsperf](http://jsperf.com)脚本来运行数百个 ajax 请求，以查看每个请求的执行情况。

这真的取决于你怀疑是什么问题？有工具和方法来测试每件事（网络、硬件存储、cpu 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:33:30.753

如果您使用的是 apache，请查看`ab`基准测试工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T01:48:24.650

您还可以根据您使用的操作系统执行*tracert*或*traceroute来测试实际连接速度。*对于服务器速度本身，您可以直接在其中监视脚本（在加载开始时启动计时器并在页面加载结束时显示它）。

关于“服务器速度”有几件事情需要考虑，不仅仅是马力:)

# jquery - 将鼠标悬停在图像上以显示文本（垂直居中）

> ID：12223960
> 
> 赞同：0
> 
> 时间：2012-09-01T00:30:42.267
> 
> 标签：jquery, css

这似乎是一个标准问题，但我在这里进行了一些“最佳实践”。在网络周围（一个很好的例子是 designspiration.net），您的网站有图像，当悬停时，显示块/alpha 颜色，文本（通常是标题、标题或数字）位于水平和垂直中心。

在过去，我通常会通过破解来实现这种效果，但如果知道最好和最有效/最语义化的方式来做到这一点（CSS？jQuery？两者？）

如果您查看 designspiration 登录页面并将鼠标悬停在图像上，您就会明白这一点。请注意，这些图像没有固定的高度。

任何实现都将不胜感激（jsFiddle等），希望这对其他人有所帮助。

非常感谢理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:39:50.247

使用`vertical-allign: middle;`！ [http://jsfiddle.net/zR4kk/](http://jsfiddle.net/zR4kk/)

你只需要制作你的容器`display:table` 和你的内容`display: table-cell`

HTML

```
<div class="area">
     <p>To look best, text should really be centered inside this div both vertically and horizontally.</p>
</div>​ 
```

CSS

```
.area { 
  width: 300px; 
  height: 300px; 
  background: green; 
  display:table;
    padding:5px;
}

.area p {
  display: table-cell; 
  vertical-align: middle; 
  text-align: center; 
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:58:32.430

对于这种特殊情况，designspiration 使用的解决方案是这篇博文中的方法 4：[Vertical Centering with CSS](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)。

```
<style>
    .container {
        position: relative; /* or absolute, if needed */
    }

    .covering {
        position: absolute;
        top: 0; left: 0;
        opacity: 0;
        -webkit-transition: opacity 0.5s ease-in-out;
        -moz-transition: opacity 0.5s ease-in-out;
        -o-transition: opacity 0.5s ease-in-out;
        transition: opacity 0.5s ease-in-out;
    }
    .container:hover .covering {
        opacity: 0.9;
    }

    .background {
        width: 100%; height: 100%;
        background: white;
    }
    .foreground {
        height: 30px;
        bottom: 0; right: 0;
        margin: auto;
        text-align: center;
    }
</style>

<!-- floated so that it fits the image; position: absolute would also work -->
<div class="container" style="float: left">
    <img src="(source image)" />
    <div class="covering background"></div>
    <div class="covering foreground">
        This will be centered
    </div>
</div> 
```

# java - 为 Hibernate 组合键生成 bulletprooh hashCode

> ID：12223964
> 
> 赞同：0
> 
> 时间：2012-09-01T00:30:59.413
> 
> 标签：java, hibernate

我有一张表，其 PK 由两个短 varchars（15 和 5）和一个日期时间字段组成。

我对创建 hashCode 的想法是将日期时间格式化为 yyyyMMddHHmmss 之类的东西，然后使用一些分隔符（例如 _）将它与其他两个字段连接起来，然后询问该字符串上的哈希码。

想知道是否有更优雅的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:00:29.713

一切都取决于您所说的“防弹”。如果您只是说它可以用作`hashCode`Java 对象，那么它应该没问题。Hibernate 不会将日期时间作为 java 返回`Date`吗？如果是这样，只需`hashCode`使用`Date`. 您可以与其他 s 进行异或（或添加，...）`hashCode`而不是连接和散列，它可能会更快一些。

如果通过“防弹”你需要一个加密安全的哈希，那么你需要做更多。

# python - 如何在 Python 中将文本文件中的块数据解析为二维数组？

> ID：12223965
> 
> 赞同：0
> 
> 时间：2012-09-01T00:31:13.507
> 
> 标签：python, arrays, parsing, text, block

我正在尝试解析具有以下结构的文本文件：

```
latitude                        5.0000
number_of_data_values             9
  0.1   0.2   0.3   0.4
  1.1   1.2   1.3   1.4      
  8.1
latitude                        4.3000
number_of_data_values             9
  0.1   0.2   0.3   0.4
  1.1   1.2   1.3   1.4       
  8.1
latitude                        4.0000
number_of_data_values             9
  0.1   0.2   0.3   0.4
  1.1   1.2   1.3   1.4       
  8.1
 ... 
```

每个不同`latitude`的数字都是不同的阵列行。 `number_of_data_values`是列数（与文件一致）。

对于这个例子，我想读取文件并输出一个 3 x 9 的二维数组，如下所示：

```
array = [[0.1,0.2,0.3,0.4,1.1,1.2,1.3,1.4,8.1],
         [0.1,0.2,0.3,0.4,1.1,1.2,1.3,1.4,8.1],
         [0.1,0.2,0.3,0.4,1.1,1.2,1.3,1.4,8.1]] 
```

我通过循环遍历该行来尝试它，但我正在寻找一种更有效的方法来做到这一点，因为我可能会处理大量的输入文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:04:56.293

看起来很直截了当。解析数字的部分只是`line.split()`. 其余的或解析可以被强化或软化，这取决于输入数据的格式有多稳定。

```
results = []
latitude = None
numbers_total = None
value_list = []

for line in text.splitlines():
  if line.startswith('latitude '):
    if latitude is not None:
      assert len(value_list) == numbers_total
      results.append((latitude, value_list))
      value_list = []
    latitude = line.split()[-1]
  elif line.startswith('number_of_data_values '):
    numbers_total = int(line.split()[-1])
  else:
    value_list.extend(line.split())

# Make sure the last block gets added to the results.
if latitude is not None:
  assert len(value_list) == numbers_total
  results.append((latitude, value_list))
  value_list = []

for latitude, value_list in results:
  print 'latitude %r: %r' % (latitude, value_list) 
```

这输出：

```
latitude '5.0000': ['0.1', '0.2', '0.3', '0.4', '1.1', '1.2', '1.3', '1.4', '8.1']
latitude '4.3000': ['0.1', '0.2', '0.3', '0.4', '1.1', '1.2', '1.3', '1.4', '8.1']
latitude '4.0000': ['0.1', '0.2', '0.3', '0.4', '1.1', '1.2', '1.3', '1.4', '8.1'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:15:28.380

逐行实现相当简单易懂。假设您`latitude`总是从新行开始（这不是您的示例给出的，但可能是错字），您可以这样做：

```
latitudes = []
counts = []
blocks = []
current_block = []
for line in test:
    print line
    if line.startswith("latitude"):
        # New block: add the previous one to `blocks` and reset
        blocks.append(current_block)
        current_block = []
        latitudes.append(float(line.split()[-1]))
    elif line.startswith("number_of_data"):
        # Just append the current count to the list
        counts.append(int(line.split()[-1]))
    else:
        # Update the current block
        current_block += [float(f) for f in line.strip().split()]
# Make sure to add the last block...
blocks.append(current_block)
# And to remove the first (empty) one
blocks.pop(0) 
```

您可以知道检查所有块是否具有正确的大小：

```
all(len(b)==c for (c,b) in zip(counts,blocks)) 
```

**替代解决方案**

如果您担心循环，您可能需要考虑查询文件的内存映射版本。这个想法是找到以 开头的行的位置`latitude`。一旦你找到一个，找到下一个，你有一个文本块：删除前两行（以 开头的一行`latitude`和以 开头的一行`number_of_data`），合并其余行并处理。

```
import mmap

with open("crap.txt", "r+b") as f:
    # Create the mapper
    mapper = mmap.mmap(f.fileno(), 0)
    # Initialize your output variables
    latitudes = []
    blocks = [] 
    # Find the beginning of the first block
    position = mapper.find("latitude")
    # `position` will be -1 if we can't find it
    while (position >= 0):
        # Move to the beginning of the block
        mapper.seek(position)
        # Read the first line
        lat_line = mapper.readline().strip()
        latitudes.append(lat_line.split()[-1])
        # Read the second one
        zap = mapper.readline()
        # Where are we ?
        start = mapper.tell()
        # Where's the next block ?
        position = mapper.find("latitude")
        # Read the lines and combine them into a large string
        current_block = mapper.read(position-start).replace("\n", " ")
        # Transform the string into a list of floats and update the block
        blocks.append(list(float(i) for i in current_block.split() if i)) 
```

# php - 使用 Doctrine 魔法“findby”方法进行生产是否安全？还是它们仅用于原型设计？

> ID：12223966
> 
> 赞同：0
> 
> 时间：2012-09-01T00:31:18.850
> 
> 标签：php, codeigniter, doctrine-orm

我在很多地方都在使用，如下所示的教义魔术方法

```
Doctrine::getTable('User')->findByUserid(id); 
```

是否建议获取这样的数据，或者是否应该将其替换为查询？

另外，在使用 Doctrine + CodeIgniter 时，一般有什么推荐的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:28:43.533

是的，如果您查看 Doctrine[源代码](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityRepository.php)，您会发现它只是一个方法转发器。如果您愿意，您可以用静态方法替换魔术方法 - 但我想性能优势可以忽略不计。

# android - 突然，Android 应用程序开始停止响应

> ID：12223971
> 
> 赞同：0
> 
> 时间：2012-09-01T00:32:56.837
> 
> 标签：android, sqlite, android-layout, android-emulator, sqliteopenhelper

我在我的 android 应用程序中有一个插入条目逻辑，它在我上次访问该应用程序之前一直响应完美。但它突然开始停止响应和运行。所以请帮助我在我的逻辑中犯了什么错误或错误，或者我的编码中还有什么问题会突然响应 sqlite 以这种方式运行。请尽快帮助我，因为我今天对 android-application 进行了最后的演示，而我被排除在外的时间非常少。

在此先感谢您的帮助。

问候 ：）

按照我的创建表逻辑：

```
private static final int DATABASE_VERSION = 1; // db version
    private static final String DATABASE_NAME = "db_Blood_Donation"; // db name
    private static final String TABLE_NAME = "Table1"; // table name
    // table fields
    private static final String KEY_ID = "bid";
    private static final String KEY_NAME = "bname";
    private static final String KEY_DATE = "bdate";
    private static final String KEY_GRP = "bgroup";
    private static final String KEY_ADD = "baddress";
    private static final String KEY_PH = "bphno";

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        /* ------------- CREATE TABLE ------------- */

        String CREATE_TABLE1 = "CREATE TABLE " + TABLE_NAME + "(" + KEY_ID
                + "INTEGER PRIMARY KEY, " + KEY_NAME + "TEXT, " + KEY_DATE
                + "TEXT, " + KEY_GRP + "TEXT, " + KEY_ADD + "TEXT, " + KEY_PH
                + "TEXT " + ")";

        db.execSQL(CREATE_TABLE1);
        Log.d("Table_Created", "table1");
    } 
```

以下是我的 AddEntry 逻辑：

```
/* ----------------- ADD USER ------------- */

    void addUser(BDFieldClass user) {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, user.getBname());
        cv.put(KEY_DATE, user.getBdate());
        cv.put(KEY_GRP, user.getBgroup());
        cv.put(KEY_ADD, user.getBaddress());
        cv.put(KEY_PH, user.getPhno());

        // INSERT ROWS

        db.insertOrThrow(TABLE_NAME, null, cv);
        db.close();
    } 
```

以下是我调用插入逻辑的代码：

/*-------------------------------- 添加记录 --------------- ----------------- */

```
 btnadd.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
    EditText ednm = (EditText)findViewById(R.id.txtname);
        String name = ednm.getText().toString();

        eddate = (EditText)findViewById(R.id.txtdate);
        String date1 = eddate.getText().toString();

        EditText edadd = (EditText)findViewById(R.id.txtadd);
        String add = edadd.getText().toString();

        EditText edno = (EditText)findViewById(R.id.txtno);
        String phno = edno.getText().toString();

    dbh.addUser(new BDFieldClass(name,date1,bgrp,add,phno)); 
```

以下是 LogCat 错误：

```
09-01 06:20:59.087: W/KeyCharacterMap(359): No keyboard for id 0
09-01 06:20:59.097: W/KeyCharacterMap(359): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-01 06:21:16.307: D/dalvikvm(359): GC_FOR_MALLOC freed 4630 objects / 232480 bytes in 119ms
09-01 06:21:30.917: D/Table_Created(359): table1
09-01 06:21:30.936: I/Database(359): sqlite returned: error code = 1, msg = table Table1 has no column named bname
09-01 06:21:30.947: D/AndroidRuntime(359): Shutting down VM
09-01 06:21:30.947: W/dalvikvm(359): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-01 06:21:30.976: E/AndroidRuntime(359): FATAL EXCEPTION: main
09-01 06:21:30.976: E/AndroidRuntime(359): android.database.sqlite.SQLiteException: table Table1 has no column named bname: , while compiling: INSERT INTO Table1(bname, bphno, bgroup, bdate, baddress) VALUES(?, ?, ?, ?, ?);
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1432)
09-01 06:21:30.976: E/AndroidRuntime(359):  at com.example.blooddonationapp.DBHelper.addUser(DBHelper.java:66)
09-01 06:21:30.976: E/AndroidRuntime(359):  at com.example.blooddonationapp.CreateClass$2.onClick(CreateClass.java:80)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.view.View.performClick(View.java:2408)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.view.View$PerformClick.run(View.java:8816)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.os.Handler.handleCallback(Handler.java:587)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.os.Looper.loop(Looper.java:123)
09-01 06:21:30.976: E/AndroidRuntime(359):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-01 06:21:30.976: E/AndroidRuntime(359):  at java.lang.reflect.Method.invokeNative(Native Method)
09-01 06:21:30.976: E/AndroidRuntime(359):  at java.lang.reflect.Method.invoke(Method.java:521)
09-01 06:21:30.976: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-01 06:21:30.976: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-01 06:21:30.976: E/AndroidRuntime(359):  at dalvik.system.NativeStart.main(Native Method)
09-01 06:21:33.286: I/Process(359): Sending signal. PID: 359 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T01:07:32.403

使用以下字符串创建表。注意在列类型开头添加空格

```
 String CREATE_TABLE1 = "CREATE TABLE " + TABLE_NAME + "(" + KEY_ID
            + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT, " + KEY_DATE
            + " TEXT, " + KEY_GRP + " TEXT, " + KEY_ADD + " TEXT, " + KEY_PH
            + " TEXT " + ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:27:59.890

问题出在这里：`KEY_NAME + "TEXT, "`. 它将创建一个列：`bnameTEXT`在您的数据库中！您应该在 之前添加一个空格`TEXT`。

# ajax - 使用 Ajax 将数据加载到 Highcharts

> ID：12223972
> 
> 赞同：8
> 
> 时间：2012-09-01T00:33:03.333
> 
> 标签：ajax, json, highcharts

我正在尝试使用 JQUERY AJAX 调用更新页面加载和选择菜单更改的高图表。有数据以 [[10,1228800000],[10,1228800000]] 格式返回。图表为空白，未绘制任何数据。

尝试了此处发布的几种解决方案，但均未奏效。

```
var chart;
        $(document).ready(function() {

            var options = {
                chart: {
                    renderTo: 'stats',
                    defaultSeriesType: 'spline'
                },
                title: {text:''},
                xAxis: {
                    type: 'datetime'
                },
                yAxis: {},
                series: []
            };
    var month = 'July';
    $.ajax({
        type: "POST",
        data: "month="+month,
        url: "update_visits_chart",
        success: function (data) {

            options.series.push(data);
            chart = new Highcharts.Chart(options);
        }
    }); 
```

有什么错误吗？提前致谢。编辑：

最近的代码仍然不起作用：

```
var options = {

            chart: {
                renderTo: 'stats',
                type: 'spline'
            },
            title: {
                text: ''
            },
            xAxis: {

                type:'datetime',
                tickInterval: 30 * 24 * 3600 * 1000,
                dateTimeLabelFormats: {
                    day: '%b %e'
                },
                labels: {
                    rotation: -45,
                    align: 'right'
                }
            },
            yAxis: {
                title: {
                    text: 'Number of visits'
                },
                min: 0
            },
            tooltip: {
                formatter: function() {
                        return Highcharts.dateFormat('%b %e', this.x) +'<br />'+this.y+' visit(s)';
                }
            },
            legend: {
                enabled: true
            },
            credits: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'Number of Visits',
                data: []
            }]
        };
        var month = 'July';
        $.ajax({
            type: "POST",
            url: "update_visits_chart",
            data: "month="+month,
            success: function(data){
                options.series[0].data = data;
                chart = new Highcharts.Chart(options);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T21:25:05.883

您必须使用文档中描述的系列对象的 setData 方法。在你的情况下`options.series[0].setData(Data)`

而且我认为您必须通过使用将 Ajax 结果从字符串转换为真实的对象/数组`JSON.parse(data)`。

**编辑：** @Ricardo Lohmann：在 ajax 调用中，他没有在响应中指定他期望的数据类型，所以 jQuery 会猜测数据类型。但它不会识别以`[`JSON 开头的字符串，我怀疑他的响应是否会以正确的 mime 类型提供`application/json`。因此，指定正确的 mime 类型也应该可以解决问题。但是我没有提问者完整的ajax响应的例子。所以我也只是猜测。

我建议使用以下 ajax 调用：

```
$.ajax({
    type: "POST",
    url: "update_visits_chart",
    data: {month: month},
    dataType: 'json',
    success: function(data){
        options.series[0].setData(data);
    }
}); 
```

@Jugal Thakkar

`$.getJSON`只是上面 ajax-call 的一种快捷方式，但它的灵活性较低，因为您的选择较少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T01:37:00.247

您必须直接设置`data`为系列，因为`data`已经是一个多维数组。
以下代码将修复它。
**更改** `options.series.push(data);` **为** `options.series = data;`

# gcc - gcc 版本对内核模块是否重要

> ID：12223974
> 
> 赞同：4
> 
> 时间：2012-09-01T00:33:14.323
> 
> 标签：gcc, kernel, embedded-linux

几年来，我们一直在为嵌入式 powerpc 系统编译内核模块，通常情况下，一些罕见的无法解释的稳定性问题都可以。最近有同事指出，内核模块应该使用与内核相同的编译器进行编译。经过一番挖掘后，我发现内核（montavista linux 2.4.20）是用 gcc3.4.1 编译的，我们一直在使用（denx eldk）gcc4.0.0。我最近为我们的用户空间代码构建了 gcc4.7.1，但加载使用此版本构建的内核模块会导致系统崩溃。然后我从源代码构建 gcc3.4.1，有些构建工作，有些不工作 - 认为我可能对 make 脚本有问题，但那是另一个故事。

所以我的问题是：我的同事是否正确？如果是这样，任何人都可以解释导致不兼容的结果 .o 文件有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T17:32:12.217

哇，这个内核已经存在了很长时间，从我以前的 MontaVista 工作的早期开始！我不确定这里有一个快速的答案，但我知道如果是我，我会担心编译器的差异。Linux 内核一直对编译器版本很敏感，部分原因在于它的庞大规模和复杂性。内核使用了大量的 GNU 扩展，实际上为新的编译器构建做了一个很好的压力测试。

您可以通过查看 /proc/version 的输出来发现用于构建内核的编译器（我认为早在 2.4.20 内核时代就已经存在，但我可能错了。） $ cat /过程/版本。它当然适用于现代内核，并且已经在内核中存在了很长时间。

我的第一个建议是将内核升级到更现代的东西，但我怀疑这不是一个真正的选择，或者你不会问这个问题！;)

我怀疑即使是编译器专家（不是我）也很难回答“有什么不同”的问题。但是做这个简单的测试。使用 3.4.1 和 4.7 编译您的模块。生成的对象（.ko 文件）肯定会有所不同。

现实情况是，所有软件中都存在错误，并且可能会潜伏很长时间，直到出现刺激错误的东西。在这里查看我的博客文章：http: [//blogs.mentor.com/chrishallinan/blog/2012/05/18/fun-with-toolchain-versions](http://blogs.mentor.com/chrishallinan/blog/2012/05/18/fun-with-toolchain-versions)以获得一个完美的例子。

现在我并不是说这是你的问题，但我认为如果我的模块和内核都使用相同的编译器版本编译，我会感觉好多了。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-28T09:28:51.647

**这很重要**。

大多数情况下，您会遇到以下情况，即

```
rmmod: ERROR: could not remove 'hello': Device or resource busy 
```

# database - 为什么我的数据库表需要主键？

> ID：12223978
> 
> 赞同：2
> 
> 时间：2012-09-01T00:33:49.767
> 
> 标签：database, database-design, entity-relationship

在我的数据库中，我有一个用户列表，其中包含有关他们的信息，并且我还有一个允许用户将其他用户添加到候选名单的功能。我的用户信息存储在一个带有用户 ID 主键的表中，我还有另一个表用于候选名单。候选名单表的设计使其有两列，基本上只是一对名称的列表。因此，要查找特定用户的候选名单，您可以从第二列中检索所有名称，其中第一列中的 id 是特定值。

问题是，根据诸如此类的许多来源[，每个表都应该有一个主键吗？](https://stackoverflow.com/questions/840162/should-each-and-every-table-have-a-primary-key)您应该在数据库的每个表中都有一个主键。

根据这个来源[http://www.w3schools.com/sql/sql_primarykey.asp](http://www.w3schools.com/sql/sql_primarykey.asp) - 一个唯一标识数据库中的条目的主键。所以我的问题是：

1.  我的数据库中的表有什么问题？为什么需要主键？

2.  我应该如何给它一个主键？只需创建一个新的自动递增列，以便每个条目都有一个唯一的 id？这似乎没有多大意义。还是我会以某种方式将代表候选名单的多个条目封装到另一个表中的另一个实体中并将其链接起来？我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:36:54.153

如果行是唯一的，您可以有一个两列的主键，尽管这可能取决于数据库。这是一个例子：

```
CREATE TABLE my_table
(
col_1 int NOT NULL,
col_2 varchar(255) NOT NULL,
CONSTRAINT pk_cols12 PRIMARY KEY (col_1,col_2)
) 
```

如果您已经拥有该表，则示例为：

```
ALTER TABLE my_table
ADD CONSTRAINT pk_cols12 PRIMARY KEY (col_1,col_2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:46:45.530

主键必须唯一标识每条记录，如前所述，主键可以包含多个属性（1 列或多列）。首先，我建议确保每条记录在您的表中都是独一无二的。其次，据我了解，您在没有主键的情况下离开了表，这是不允许的，所以是的，您需要为其设置键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T03:42:56.693

在这种特殊情况下，将同一对用户 ID 多次存储在`shortlist`表中是没有意义的。毕竟，该表模拟了一个集合，一个元素要么在集合中，要么不在集合中。在集合中有一个元素“两次”没有意义¹。为防止这种情况，请创建一个由这两个用户 ID 字段组成的复合键。

这个复合键是否也是主键，或者您将拥有*另一个*键（将充当代理主键）是[另一回事](https://stackoverflow.com/a/11176811/533120)，但无论哪种方式，您都需要这个复合键。

请注意，在支持[集群的数据库（又名索引组织表）](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)下，PK 通常也是一个**集群键**，这可能会对性能产生重大影响。

* * *

*¹与 mutiset 不同。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T12:52:31.547

具有重复行的表不能充分表示关系。这是一袋行，而不是一组行。如果你让这种情况发生，你最终会发现你的计数将被取消，你的总和将被取消，你的平均值将被取消。简而言之，当你去使用它时，你会从你的数据中得到令人困惑的错误。

声明主键是一种防止重复行进入数据库的便捷方法，即使其中一个应用程序出错。您获得的索引是副作用。

可以通过引用任何候选键来对表中的单行进行外键引用。但是，如果您将其中一个候选键声明为主键，然后使所有外键引用都引用主键，则会方便得多。这只是仔细的数据管理。

现实世界中的实体与该实体的表中相应行之间的一一对应关系超出了 DBMS 的范围。由您的应用程序甚至您的数据提供者通过不为现有实体发明新行并且不让一些新实体从裂缝中溜走来维持这种对应关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T10:27:57.217

好吧，既然您在问，这是一种很好的做法，但在少数情况下（不需要连接数据），它可能不是绝对需要的。但最大的问题是你永远不知道需求是否会改变，所以你现在真的想要一个，所以你不会在事后向 10m 记录表添加一个......

除了主键（顺便说一句，它可以跨越多个列）之外，我认为拥有一个作为单个字段的辅助候选键是一种很好的做法。这使得连接更容易。

首先是一些理论。您可能还记得 HS 或大学代数中对函数的定义是，`y = f(x)`其中 f 是一个函数当且仅当对于每个 x 都恰好有一个 y。在这种情况下，在关系数学中，我们会说 y`functionally dependent`在这种情况下位于 x 上。

您的数据也是如此。假设我们正在存储支票号码、支票帐号和金额。假设我们可能有多个支票账户，并且每个支票账户不允许有重复的支票号码，那么金额在功能上取决于 (account, check_number)。通常，您希望将功能上依赖于同一事物的数据存储在一起，而没有传递依赖。主键通常是您指定为主键的功能依赖项。然后，这会识别该行中的其余数据（因为它与该标识符相关联）。认为这是`natural primary key.` 在可能的情况下（即不使用 MySQL），我喜欢将主键声明为自然键，即使它跨越列。这有时会变得复杂，因为您可能有多个可互换的候选键。例如，考虑：

```
CREATE TABLE country (
    id serial not null unique,
    name text primary key,
    short_name text not null unique
); 
```

这个表真的可以有任何列作为主键。这三个都是完全可以接受的候选键。假设我们有一个国家记录（232，'United States'，'US'）。这些字段中的每一个都唯一地标识记录，因此如果我们知道一个，我们就可以知道其他的。每一个都可以定义为主键。

我还建议使用第二个人工候选键，它只是用于连接连接的机器标识符。在上面的例子中 country.id 就是这样做的。这对于将其他记录链接到国家/地区表很有用。

需要候选键的一个例外可能是确实可能出现重复记录。例如，假设我们正在跟踪发票。我们可能会遇到这样一种情况，即有人为两个项目单独开具发票，两个项目中的每一个都显示一个。这些可能是相同的。在这种情况下，您可能想要添加一个人工主键，因为它允许您稍后将事物加入该记录。您现在可能不需要这样做，但将来可能！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-02T04:24:27.353

创建复合主键。要详细了解复合主键是什么，请访问 [http://www.relationaldbdesign.com/relational-database-analysis/module2/concatenated-primary-keys.php](http://www.relationaldbdesign.com/relational-database-analysis/module2/concatenated-primary-keys.php)

# c# - 为什么是 ReadOnlyCollection 不是 ReadOnlyCollection ?

> ID：12223983
> 
> 赞同：1
> 
> 时间：2012-09-01T00:35:43.103
> 
> 标签：c#, generics

`ReadOnlyCollection<T>`仅支持读取操作。为什么`T`没有标注`out`关键字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T00:44:33.330

> ReadOnlyCollection 仅支持读取操作

它只支持读取，因为它是通用只读集合的​​基类。

> 为什么 T 没有用 out 关键字标记？

out 关键字表示参数是协变的，只有接口和委托可以是协变的。请注意，`ReadOnlyCollection<T>`实现`IEnumerable<T>`是协变的。

# symfony - 如何在奏鸣曲管理类中获取容器实例？

> ID：12223989
> 
> 赞同：23
> 
> 时间：2012-09-01T00:37:06.333
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我需要从我的 config.yml 中解析一些配置参数，例如启用的语言。但是当我尝试通过使用普通的 symfony 方法来做到这一点时：`$this->container->get('my_params');`它失败了，因为我的管理类扩展`Sonata\AdminBundle\Admin\Admin`了不扩展类的`Symfony\Component\DependencyInjection\ContainerAware`类。

请问，如何在奏鸣曲管理类中获取容器？

现在我通过覆盖奏鸣曲管理类来解决这个问题，使其扩展 ContainerAware。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-01T20:27:41.953

可能已经解决了，因为它是一个老问题，但仅供参考，容器已经在使用配置池的管理类中可用......

```
$this->getConfigurationPool()->getContainer(); 
```

当然，在管理类中注入服务是更好的做法，但是，就像在控制器中一样。如果容器已经可用，为什么有人会花时间配置 setter 注入？

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-03T02:27:46.047

添加到您的管理类

```
/** @var \Symfony\Component\DependencyInjection\ContainerInterface */
private $container;

public function setContainer (\Symfony\Component\DependencyInjection\ContainerInterface $container) {
    $this->container = $container;
} 
```

并在服务配置中添加调用（可以在 YAML、XML 或 PHP 中指定配置）：

**YAML**

```
calls:
    - [ setContainer, [ @service_container ] ] 
```

**XML**

```
 <call method="setContainer">
     <argument type="service" id="service_container" />
 </call> 
```

现在你可以使用普通的 symfony 方法了：`$this->container->get()`

有关更多信息，请参阅[服务容器](http://symfony.com/doc/master/book/service_container.html)文档

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T15:52:28.210

这是在奏鸣曲管理课程中使用服务的最佳方式：

*只需使用setter injection*注入所需的服务。在这种情况下不允许构造函数注入，因为您必须重写父类的构造函数。父类的构造函数只接受3个参数，所以不能再添加一个。

解决方案是：

```
<!-- file: services.xml -->

 <service id="skonsoft.znata.admin.keyword" class="%skonsoft.znata.admin.keyword.class%">
            <tag name="sonata.admin" manager_type="orm" group="Keyword" label="Keyword"/>
            <argument />
            <argument>%skonsoft.znata.admin.keyword.entity.class%</argument>
            <argument>SonataAdminBundle:CRUD</argument>
            <call method="setTranslationDomain">
                <argument>SkonsoftZnataBundle</argument>
            </call>

            <!-- here you inject needed services or parameters -->
            <call method="setEnabledLocales">
                <argument>%skonsoft_znata.locales%</argument>
            </call>
        </service> 
```

然后，只需在您的管理类中添加一个名为`setEnabledLocales`.

```
/* file: MyclassAdmin.php */

 public function setEnabledLocales($locales){
    $this->enabedLocales = $locales;
} 
```

看一眼：

[服务容器文档](http://symfony.com/fr/doc/master/book/service_container.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T15:26:35.433

`AdminController`在您的特定情况下，让自定义类设置您的类的参数可能是明智的`Admin`。这将遵循 MVC 模式，并使您免于更改供应商捆绑包。如果您不知道如何执行此操作，请更新您的问题，我会更详细地解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T15:03:29.423

这是 liip_imagine 服务的示例：

```
 $cacheManager = $this->getConfigurationPool()->getContainer()->get('liip_imagine.cache.manager'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-21T11:06:06.620

Admin Pool 的 getContainer() 方法自 Sonata Admin 3.77.0 起已被弃用，并已在 v4.x 中删除。

您可以通过 Sonata Admin 类（v4.x）中的依赖注入来实现这一点。

例如，我已经注入 ParameterBagInterface 以在我的奏鸣曲管理员中获取应用程序参数。

```
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

class ProtocolAdmin extends AbstractAdmin
{
    private $params;

    public function __construct(string $code, string $class, string $baseControllerName, ParameterBagInterface $params)
    {
        parent::__construct($code, $class, $baseControllerName);
        $this->params = $params;
    }

    ...
} 
```

# windows - 合并文件传输对话框

> ID：12223992
> 
> 赞同：-1
> 
> 时间：2012-09-01T00:37:57.023
> 
> 标签：windows, operating-system, windows-8

我正在考虑升级我的工作计算机以使用 Windows 8，因为新的文件传输功能似乎非常有用。不幸的是，在我的家用电脑上安装 Windows 8 进行测试后，文件正在单独的对话框中传输，而不是微软提供的这个[图像。](http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-29-43-metablogapi/8156.Figure_2D00_4_2D002D002D00_Pause_2D00_more_2D00_details_2D00_view_5F00_thumb_5F00_5DB6E11C.png)

当我不断地传输文件时，一个单一的传输对话框会让事情变得不那么混乱。有谁知道要更改哪些设置以使文件传输出现在同一窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:37:16.223

要使文件传输出现在同一窗口中，您需要在本地传输文件。

这是因为网络连接随时可能中断。

# c++ - 我的分类神经网络存在逻辑问题

> ID：12223997
> 
> 赞同：2
> 
> 时间：2012-09-01T00:38:43.290
> 
> 标签：c++, machine-learning, neural-network

我用 C++ 制作了我的第一个一维分类神经网络，其逻辑如下：

*   如果输入 <= 1：f(x) = 1
*   如果输入 > 1：f(x) = -1

一开始我把它做得非常草率，但现在我知道它可以工作，我将代码更改为更通用的输入数量，这样当我感觉如此倾向于时，我可以轻松更改 [x] 的大小。但是，新代码的逻辑不正确；它给出了完全错误的答案和所有输入的相似权重。* 请记住，我的变量名称很愚蠢，变量“输出”实际上是训练集。

这是程序的最终输出：

```
Input: 1 ; Class: 1 ; Eval = -1
Weight for node 1: -2
Input: 2 ; Class: -1 ; Eval = -1
Weight for node 2: -2
Input: 3 ; Class: -1 ; Eval = -1
Weight for node 3: -1 
```

“Class”是它应该是的，而“Eval”是它实际的样子。请注意，第一个输入与它的训练元素不匹配。

# 原始代码：

```
#include <iostream>

using namespace std;

double weights[2] = {0.0};

double classify(double);

int main() {
   double inputs[2] = {1.0, 2.0};
   double outputs[2] = {1.0, -1.0};
   int index = 0;
   bool trained = false;

   while(!trained) {
      trained = true;

       cout << inputs[0] << " , " << outputs[0] << " eval = " << classify(inputs[0]) << endl;
       cout << inputs[1] << " , " << outputs[1] << " eval = " << classify(inputs[1]) << endl;
       cout << "Weights = " << weights[0] << " , " << weights[1] << endl << endl;

       index = 0;

       while(index < 2) {
           double input = inputs[index];
           double output = outputs[index];
           double dClass = classify(input);

           if (dClass != output) {
               weights[0] += output * input;
               weights[1] += output * 1.0;
               trained = false;
           }
           index++;
       }
   }

   return 0;
}

double classify(double input){
double products[2];
double sum = 0;
double threshhold;

// Sumation of inputs
products[0] = input * weights[0];
products[1] = 1.0 * weights[1];
sum         = products[0] + products[1];

// Threshold function
if (sum >= 0.0)
    threshhold = 1.0;
else
    threshhold = -1.0;

return threshhold;
} 
```

# 修改代码：

```
#include <iostream>
#define NODES 3

using namespace std;

double weights[NODES] = {0.0};

double classify(double);

int main() {
    double inputs[NODES] = {1.0, 2.0, 3.0};
    double outputs[NODES] = {1.0, -1.0, -1.0};
    int index = 0;
    bool trained = false;
    index = 0;

    // While the classifications are incrorrect
    while(!trained) {
       trained = true;

       while(index < NODES) {
           double input = inputs[index];           // Input nodes
           double output = outputs[index];         // Desired class
           double dClass = classify(input);        // Calculated class

           // If calculated class != desired class:
           // adjust the weights
           if (dClass != output) {
               for(int i = 0; i < NODES - 1; i++)
                  weights[i] += output * input;

               // Bias weight
               weights[NODES-1] += output * 1.0;

               trained = false;
           }
           index++;

           // Debugging
           for(int i = 0; i < NODES; i++){
              cout << "Input: " << inputs[i] << " ; Class: " << outputs[i] << " ; Eval = "      << dClass << endl;
              cout << "Weight for node " << i + 1 << ": " << weights[i] << endl;
           }
           cout << endl;
           }

    }

    return 0;
}

double classify(double input){
   double products[NODES];
   double sum = 0;
   double threshhold;

   // Attach weights to nodes
   for(int i = 0; i < NODES - 1; i++)
       products[i] = input * weights[i];

   // Last node with bias
   products[NODES-1] = 1.0 * weights[NODES-1];

   // Sumation of inputs
   for(int i = 0; i < NODES; i++)
       sum += products[i];

   // Threshold function
   if (sum >= 0.0)
       threshhold = 1.0;
   else
       threshhold = -1.0;

   return threshhold;
} 
```

如果你能回答这个问题，那么如果你想给我意见，我会跟进（尽管它更接近对话问题）。我是实现神经网络的新手，我很好奇你们都认为对于平均反向传播、固定拓扑 ANN 以及动态神经网络（可能用于神经进化）的最佳数据结构。是否有一个好的神经网络实现约定可以通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:53:44.267

看来我们有一个谜。在我们深入了解它之前，请尝试对它进行这个小改动`main()`（只是改变它的打印内容）并告诉我们你得到了什么。不要只是说它给出了错误的答案或没有达到预期的结果，*告诉我们它实际产生了什么*。

**已删除过时的代码**

**编辑：**
你有两个问题。首先，您对这段代码在做什么有点困惑；*训练集中*的*节点*数量和元素数量基本上是独立的，但是您将它们视为相同并且对您正在迭代哪个感到困惑。其次，您忽略了在内循环结束时重置。改变这个：*`index`*

 *```
 // Debugging
  for(int i = 0; i < NODES; i++){
    cout << "Input: " << inputs[i] << " ; Class: " << outputs[i] << " ; Eval = "      << dClass << endl;
    cout << "Weight for node " << i + 1 << ": " << weights[i] << endl;
  }
  cout << endl;
} 
```

对此：

```
 // Debugging
  cout << "Input: " << input << " ; Class: " << output << " ; Eval = " << dClass << endl;
  cout << "Weights:";
  for(int i = 0; i < NODES; i++){
    cout << " " << weights[i];
  }
  cout << endl;
}
cout << endl;
index = 0; 
```

现在它起作用了。*