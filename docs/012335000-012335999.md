# StackOverflow 问答 12335000-12335999

# php - 行走的 DOM 崩溃

> ID：12335000
> 
> 赞同：1
> 
> 时间：2012-09-08T22:31:48.877
> 
> 标签：php, dom

我有这个简单的 DOM 遍历功能，我用过几次。

这是一个简化版本：

```
function walk_DOM(&$dom, &$node, $func){

    $args = array(&$node, &$dom);

    call_user_func_array($func, $args);

    if ($node->nextSibling !== null) {
        walk_DOM($dom, $node->nextSibling, $func);
    }
    if ($node->hasChildNodes()) {
        $children = nodeList_to_array($node->childNodes);
        walk_DOM($dom, $children[0], $func);
    }
} 
```

我开始质疑它的价值。我最近使用了一个新函数作为 $func 参数。它旨在仅允许渲染“#text”节点和“p”节点。

该功能是：

```
function strip_test(&$node, &$dom){

    if (($node->nodeName !== 'p') &&
            ($node->nodeName !== '#text') &&
            ($node->nodeName !== 'body')) {

        if ($node->parentNode !== null) {
            $parent = $node->parentNode;
            $parent->removeChild($node);
        }
    }
} 
```

Walk_DOM() 停止而不查看所有节点。剩余的节点仍然存在于 DOM 中。他们只是从未被评估过。

所以，关于这个问题。这种技术有什么明显的问题吗？如果没有，是否有调试 DOM 问题的好方法？

我跟踪了 walk_DOM() 访问的节点，发现它覆盖的部分和它之前停止的部分没有区别。

在以前的使用中，我发现了这一点。虽然很简单，但它不会重复检查任何节点，并且之前已经覆盖了整个 DOM。

**编辑 ：**

为了清楚起见，当我说“停止而不查看”时，我的意思是在（任意）50 个具有 0 到 3 层子节点的节点列表中。该函数将解析其中的 25%，然后停止。它解析的最后一个节点是 DOM 主体的直接后代。

这两个函数也不会抛出任何错误。

# apache - xampp设置文档根目录

> ID：12335008
> 
> 赞同：1
> 
> 时间：2012-09-08T22:34:29.493
> 
> 标签：apache, xampp, root

我在尝试在 xampp 上设置文档根目录时遇到问题

我在 httpd.conf 中做了以下更改

```
DocumentRoot "C:/xampp/htdocs/sites/bk"

<Directory "C:/xampp/htdocs/sites/bk">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

当我尝试在 chrome 中访问我的本地主机时，我收到一条`oops google chrome could not...`消息，我做错了什么？

# ember.js - 无法运行 ember 示例

> ID：12335011
> 
> 赞同：0
> 
> 时间：2012-09-08T22:34:48.973
> 
> 标签：ember.js

我已经下载了 ember.js 的示例，当我运行基本的 todo 示例时，我收到以下错误。该错误听起来像是其中一个脚本未加载，但我已验证所有文件均已正确加载。我可以从 emberjs.com 网站成功运行完全相同的文件，所以我不确定出了什么问题。有任何想法吗？

```
Uncaught ReferenceError: Handlebars is not defined          ember.min.js:17
Uncaught TypeError: Cannot call method 'extend' of undefined        app.js:44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:02:17.920

您需要确保已包含 Handlebars。早期版本的 Ember 带有 Handlebars，但较新版本没有。

只需将类似的内容添加到您的页面（在包含 Ember 之前）。

```
<script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js"></script> 
```

# visual-studio-2010 - Visual Studio 上的 Glut 文档

> ID：12335014
> 
> 赞同：3
> 
> 时间：2012-09-08T22:35:32.857
> 
> 标签：visual-studio-2010, visual-studio, opengl, documentation, glut

是否可以将 Glut 和 openGL 文档添加到 Visual Studio 2010？它是如何完成的？Intellisense 确实有效，但我想知道在从 intellisense 菜单浏览功能时是否可以添加文档。

# xcode - 如何在 Xcode 中更改 Git 的用户名？

> ID：12335015
> 
> 赞同：17
> 
> 时间：2012-09-08T22:35:37.817
> 
> 标签：xcode, git, github, settings

有什么方法可以更改 Xcode 的 Git 用户名和电子邮件？当我现在尝试提交时，它会发布我的真实姓名。我希望它发布我的 GitHub 用户名，以便您可以将提交链接到我在 GitHub 上的用户。

通常使用 Git，我可以`git config --global user.name whoosh`在终端中输入，但它似乎不适用于 Mac 和 Xcode。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-25T10:31:50.603

以下终端命令适用于我：

```
xcrun git config --global user.name 'new_user_name'
xcrun git config --global user.email 'new@email.com' 
```

这些分别用于更新用户名和电子邮件。

执行该命令后，通过 Xcode 对 Git 的连续提交将使用其中指定的数据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-09T07:34:14.850

如“ [Xcode 4 中设置的 Git 提交信息在哪里？](https://stackoverflow.com/questions/7812404/where-is-the-git-commit-info-set-in-xcode-4) ”中所述，XCode从您的 (2012)**[通讯录](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)**（[在 2014 年称为联系人）中的](https://stackoverflow.com/questions/10245689/xcode-change-company-name-and-username#comment36044155_10453148)**联系人卡片**中获取用户信息。

更改您的联系人卡片会更改用户信息（对于*新*提交）

* * *

2014 年更新（2 年后），如[sergtk](https://stackoverflow.com/users/13441/sergtk)的[回答](https://stackoverflow.com/a/23290581/6309)所示，XCode (5+)**现在支持 git config`user.name`和`user.email`**.
这将填写：

[![XCode user.name/user.email](../Images/68a01b00ce5df84b2d6e2b8e4fe13af0.png)](https://i.stack.imgur.com/lgEuW.png)

[`xcrun`](https://www.manpagez.com/man/1/xcrun/)在命令之前使用`git config`允许从命令行定位或调用共存和平台感知的开发人员工具。
（假设[Xcode 命令行工具是最新的](https://stackoverflow.com/a/52522566/6309)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-19T04:57:03.307

由于我有多个具有不同提交名称的项目，@sergtk 提供的解决方案对我不起作用。相反，我做了以下事情：

```
xcrun git config --local user.name 'new_user_name'
xcrun git config --local user.email 'new@email.com' 
```

另外，请注意第一次提交需要更改，因此我使用此处提供的解决方案来解决此问题：[更改 Git 中多个提交的作者和提交者名称和电子邮件](https://stackoverflow.com/questions/750172/change-the-author-of-a-commit-in-git)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T08:11:19.663

我从公司 mac 开始工作，并且在使用 bitbacket 存储库时遇到了同样的问题。任何答案都没有帮助我。既不会从通讯簿中删除以前的用户，也不会保存我自己的或终端命令。有一天，我尝试使用 SourceTree 的新仓库（来自 Atlassian 的免费软件）。我已经用我自己的偏好替换了用户名和邮件，一切都很好。我有自己的凭据提交。耶！希望我的解决方法有用！

# php - 通过while循环向html表中的行发送电子邮件，其中填充了mysql数据库中的数据

> ID：12335019
> 
> 赞同：0
> 
> 时间：2012-09-08T22:36:39.113
> 
> 标签：php, mysql, while-loop, html-table

`while()`我有一个使用循环填充来自 MySQL 数据库的数据的 HTML 表。该数据库具有以下结构：

```
+++++++++++++++++++++
| id | name | email |
+++++++++++++++++++++ 
```

我想做的是让用户可以向选定的用户组（行）发送电子邮件，我正在考虑以下解决方案之一：

1.  每行都有一个按钮，显示“发送邀请电子邮件”或
2.  用于选择我要发送邀请电子邮件的复选框和提交表单的“提交”按钮。

我不确定如何将数据放入要处理的表单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:44:05.660

启动一个表单，该表单提交给您的 PHP 声音`<table>.` 在每一行中，有一个这样的复选框：

```
<input type="checkbox" name="emails[]" value="<?php echo $row['email']; ?>" /> 
```

底部有一个提交按钮（在表单内）。在 PHP 页面上：

```
<?php
$emails = $_POST['emails'];
foreach ($emails as $email) {
   ###Logic to send your HTML e-mail
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:52:22.337

首先，让 PHP 为每个复选框分配一个唯一的 ID 和一个值，以了解哪些复选框被选中以及电子邮件地址。例如：

```
<input type="checkbox" name="5" value="email@foo.com">email@foo.com 
```

此外，使用 an`<input type="hidden">`来存储复选框的总数：

```
<input type="hidden" name="totalCheckboxes" value="20"> 
```

在目标页面（在 中指定的页面`<form action="...">`）上，从 hidden 中获取复选框的总数`<input>`，并在 For 循环中：

*   读取并存储每个复选框的电子邮件；
*   将电子邮件发送到存储的地址。

最终代码应如下所示：

**表单页面**

```
<form method="POST" action="target.php">
<table><tbody>
  <tr>
    <td><input type="checkbox" name="1" value="foo@bar.com"></td>
    <td>foo@bar.com</td>
  </tr>
  <tr>
    <td><input type="checkbox" name="2" value="herp@derp.com"></td>
    <td>herp@derp.com</td>
  </tr>
</tbody></table>
<input type="hidden" name="totalCheckboxes" value="2">
</form> 
```

**目标页面**

```
<?php
$total=$_POST['totalCheckboxes'];
for ($k=1; $k!=$total; $k++) {
   if ($_POST[$k]) {
      // Email
   }
}
?> 
```

# authentication - 如何在jetty jersey rest web app中使用MD5

> ID：12335021
> 
> 赞同：0
> 
> 时间：2012-09-08T22:37:05.153
> 
> 标签：authentication, jetty, jersey, md5

有人可以为我提供一些帮助，如何在码头服务器上运行的 jersey rest web 应用程序中使用 MD5 身份验证。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:55:59.573

如果您的意思是摘要身份验证，您可以首先在您的`web.xml`:

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Secured Services</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>DIGEST</auth-method>
    <realm-name>Web Services</realm-name>
</login-config>
<security-role>
    <role-name>admin</role-name>
</security-role>
<security-role>
    <role-name>user</role-name>
</security-role> 
```

然后使用 Jetty 配置您的领域：[http ://wiki.eclipse.org/Jetty/Tutorial/Realms](http://wiki.eclipse.org/Jetty/Tutorial/Realms)

# css - 当字体大小增加时，CSS Web 字体不会扩展 DIV？

> ID：12335024
> 
> 赞同：2
> 
> 时间：2012-09-08T22:37:10.227
> 
> 标签：css, twitter-bootstrap, font-awesome

您可以在缩略图中看到我在这里的大字体：http: [//unlockinglg.com/beta/index.html](http://unlockinglg.com/beta/index.html)

我在 bootstrap 中使用 font-awesome

![在此处输入图像描述](../Images/28ce991abd47de3234fa6121cac00608.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:42:26.363

这部分`bootstrap.min.css`负责：

```
[class^="icon-"],[class*=" icon-"]{height:14px} 
```

一个快速（阅读：脏）的修复方法是将以下内容添加到您的自定义样式表中：

```
[class^="icon-"],[class*=" icon-"]{height:auto !important} 
```

# drupal-7 - 如何更改用户关系选项卡路径

> ID：12335025
> 
> 赞同：0
> 
> 时间：2012-09-08T22:37:10.860
> 
> 标签：drupal-7, drupal-modules, relationships

我使用 Drupal 7 中的[用户关系](http://drupal.org/project/user_relationships)模块，它在用户配置文件中生成了一个不错的选项卡。我使用特定类型的关系“朋友”，所以我需要两个选项卡作为反映这一点的路径。我已经使用模块[Tab Tamer](http://drupal.org/project/tabtamer)覆盖选项卡名称，我似乎无法找到设置路径的位置。我会想象在 Views UI 中看到一个视图或在模块目录本身中找到它，但到目前为止还没有运气。

简而言之，有没有办法将**users/%/relationships**更改为**users/%/friends**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:33:53.827

我建议您使用自定义模块创建一个新的菜单选项卡，其中包含您想要的链接，并删除默认选项卡。[这](https://drupal.stackexchange.com/questions/31129/how-to-add-additional-tabs-to-user-profiles)提供了一个例子。

# zend-framework - Zend 新手问题与控制器

> ID：12335026
> 
> 赞同：0
> 
> 时间：2012-09-08T22:37:12.487
> 
> 标签：zend-framework, controller

我有一个可以工作的前端控制器。我编写了一个名为 AuthController.php 的登录控制器。它内部配置了适当的代码。我的问题是当我转到 /auth 时，我得到一个 404。这似乎是某种路由问题。

我的身份验证控制器称为 AuthController.php，它的顶部如下所示：

```
class AuthController extends Zend_Controller_Action
{
public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    $form = new Application_Form_Login();
    $request = $this->getRequest();
    if ($request->isPost()) {
        if ($form->isValid($request->getPost())) {
            if ($this->_process($form->getValues())) {
                // We're authenticated! Redirect to the home page
                $this->_helper->redirector('index', 'index');
            }
        }
    }
    $this->view->form = $form;
} 
```

当然，下面还有一些受保护的函数可以处理其他事情。在 Zend 中，当您创建一个新控制器时，它的存在（如在 CodeIgniter 中）是否意味着它应该可用？还是我必须将它添加到某处的路由表中？

编辑：这是我的 Apache Vhost 配置：

```
<VirtualHost *:80>
ServerName      new.mydomain.com
DocumentRoot    /www/htdocs/zend/public
<Directory /www/htdocs/zend/public>
  DirectoryIndex index.php
  AllowOverride All
  Order allow,deny
  Allow from all
</Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:48:29.243

尝试创建另一个控制器或 testController 然后尝试访问 /test 如果它给出错误，那么可能有问题。如果它有效，则更改您的 Auth 控制器并用不同的类名命名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:01:46.830

我自己是zend的新手，根据我的经验，由于以下原因发生了404错误

htaccess 未配置（正如 Keyne 在评论中提到的那样）

或者

没有与控制器/操作关联的视图，或者它不是我完全创建的，或者文件夹/操作/视图文件名中有某种错字。

因此，请确保上述 2 不是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T13:09:26.733

1.  确保您启用了 mod_rewrite（如果在 Apache 上）
2.  确保 AuthController.php 文件位于默认模块中（与您放入 IndexController.php 的相同）
3.  检查 httpd.conf 文件是否在 Apache 中设置为允许覆盖（因此 htaccess 将起作用） - 如果使用带有 debian 挤压的 debian 框，这可能是 apache.conf - 虽然不确定其他 linux 类型。

如果所有这些都是正确的，那么它应该可以正常工作。

# php - 将最后“N”张图像作为电影播放

> ID：12335028
> 
> 赞同：1
> 
> 时间：2012-09-08T22:37:34.600
> 
> 标签：php, image, animation

我创建了一个 php 脚本，以指定的时间间隔从某个 URL 获取图像，比如 5 分钟到一个文件夹中。我希望播放与电影/动画 GIF 相同的内容，只要可能，然后将其嵌入 iframe 中。请分享我试图找到的最简单的代码，但我发现所有需要手动提供图像网址，我想要的是指定文件夹和要播放的最后“n”张图像。

谢谢，尼克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:48:41.447

您可以使用图像魔术将图像组合成动画 gif。这里解释了如何： http: [//blog.gotofritz.net/geekery/combining-images-imagemagick/](http://blog.gotofritz.net/geekery/combining-images-imagemagick/)（在页面的中间），但你也应该咨询[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php) .

ImageMagick 安装在大多数网络空间上。

您可能需要生成要在 php 中使用的文件列表（用文件名中的数字保存它们可能会有所帮助，或者您可以使用文件的时间戳）或删除旧图像。

# javascript - setInterval 计时器需要在动画进度条上偏移

> ID：12335030
> 
> 赞同：1
> 
> 时间：2012-09-08T22:37:44.063
> 
> 标签：javascript, jquery

我有一个脚本：

[http://jsfiddle.net/bXJhe/7/](http://jsfiddle.net/bXJhe/7/)

```
jQuery(document).ready(function() {

    timer(10)

});

// Timer
var GLOBAL_TIMER;

function timer(intCount) {
    GLOBAL_TIMER = setInterval(function() {

        var intTickLength = 10;

        if (intCount < 10) {
            jQuery('#timer').html('00:0' + intCount--);
            jQuery('#bar').css('width', intCount * intTickLength + 'px');
        } else {
            jQuery('#timer').html('00:' + intCount--);
            jQuery('#bar').css('width', intCount * intTickLength + 'px');
        }

        if (intCount < 0) {
          stopTimer();
        }

    }, 1000);
}

function stopTimer() {
    clearInterval(GLOBAL_TIMER);
}​ 
```

我正在根据`intCount`*为进度条的宽度设置动画`intTickLength`（也许有更好的方法？）

问题是，当计数器达到 1 时，柱上的最后一个刻度消失了。我需要它一直保持到计数器达到 0。我需要某种偏移量。有什么想法吗？我不是 js 专家，但我渴望成为其中的一员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T22:42:28.133

在减少计数器之前设置条形大小：

```
jQuery('#bar').css('width', intCount * intTickLength + 'px');
jQuery('#timer').html('00:0' + intCount--); 
```

# email - 从 gmail 组织多个电子邮件帐户和一站式解决方案

> ID：12335032
> 
> 赞同：0
> 
> 时间：2012-09-08T22:38:08.787
> 
> 标签：email, gmail

假设您是多个网站的网站管理员，每个网站都有一个不同的网站管理员电子邮件帐户，您必须每天登录和回复，您还有多个个人电子邮件帐户（用于 facebook 和垃圾邮件等，用于工作，以及一个用于大学，一个用于休息）！我的问题是，有没有一种简单的方法可以将所有电子邮件托管在一个 gmail 帐户中，这样当有人向 admin@website1.com 发送电子邮件时，它会以该 gmail 的方式进入目录 website1.com，并以相同的方式将电子邮件发送到 website2.com最终进入另一个目录，并且在使用您的特殊 gmail 帐户回复这些电子邮件时也有类似的解决方案，website1.com 的电子邮件向收件人显示为 website1.com。你知道我的意思。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:46:45.930

据我了解，您可能正在寻找这些设置：[如何将所有电子邮件地址合并到一个 Gmail 收件箱中](http://www.howtogeek.com/106034/how-to-combine-all-your-email-addresses-into-one-gmail-inbox/)

# opengl - 使用 VBO 和元素数组索引的 OpenGL 纹理

> ID：12335033
> 
> 赞同：1
> 
> 时间：2012-09-08T22:38:18.617
> 
> 标签：opengl

我正在尝试将元素索引与存储在矢量类型中的顶点和纹理坐标一起使用。

我的问题是纹理没有在我的矩形上正确渲染。

这是相关的着色器初始化：

```
prog = f.compile_shaders(vshader, fshader);
const char* uniform_name = "mvp";
this->uni_mvp = glGetUniformLocation(prog, uniform_name);
if (this->uni_mvp == -1) {
    fprintf(stderr, "Could not bind uniform %s\n", uniform_name);
    return;
}

uniform_name = "texData";
this->uni_texdata = glGetUniformLocation(prog, uniform_name);
if (this->uni_texdata == -1) {
    fprintf(stderr, "Could not bind uniform %s\n", uniform_name);
    return;
} 
```

和顶点着色器：

```
layout(location = 0) in vec4 coord3d;
layout(location = 1) in vec2 texcoord;
uniform mat4 mvp;
out vec2 uv;

void main(void) {
    gl_Position = mvp * coord3d;
    uv = texcoord;
} 
```

和片段着色器：

```
in vec2 uv;
out vec3 color;

uniform sampler2D texData;

void main(){
    color = texture2D(texData, uv).rgb;
} 
```

这是我相关的 BUFFER 初始化代码：

```
 glGenVertexArrays(1, &this->vao);
    glBindVertexArray(this->vao);

    glm::vec2 bar;
    bar.x = 0.0; bar.y = 0.0;
    texcoords.push_back(bar);
    bar.x = 1.0; bar.y = 0.0;
    texcoords.push_back(bar);
    bar.x = 1.0; bar.y = 1.0;
    texcoords.push_back(bar);
    bar.x = 0.0; bar.y = 1.0;
    texcoords.push_back(bar);

    glm::vec4 foo;
    foo.x = 0.0; foo.y = 0.0; foo.z = 0; foo.w = 1.0;
    vertices.push_back(foo);
    foo.x = 10.0; foo.y = 0.0; foo.z = 0; foo.w = 1.0;
    vertices.push_back(foo);
    foo.x = 10.0; foo.y = 10.0; foo.z = 0; foo.w = 1.0;
    vertices.push_back(foo);
    foo.x = 0.0; foo.y = 10.0; foo.z = 0; foo.w = 1.0;
    vertices.push_back(foo);

    elements.push_back(0);
    elements.push_back(1);
    elements.push_back(2);
    elements.push_back(3);

    glGenBuffers(1, &this->tbo);
    glBindBuffer(GL_ARRAY_BUFFER, this->tbo);
    glBufferData(GL_ARRAY_BUFFER, sizeof(texcoords) * sizeof(texcoords[0]), texcoords.data(), GL_STATIC_DRAW);

    glGenBuffers(1, &this->vbo);
    glBindBuffer(GL_ARRAY_BUFFER, this->vbo);
    glBufferData(GL_ARRAY_BUFFER, vertices.size() * sizeof(vertices[0]), vertices.data(), GL_STATIC_DRAW);

    glGenBuffers(1, &this->ibo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, this->ibo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, elements.size() * sizeof(elements[0]), elements.data(), GL_STATIC_DRAW); 
```

这是我相关的 TEXTURE 初始化代码：

```
 glGenTextures(1, &this->texture_id);
glBindTexture(GL_TEXTURE_2D, this->texture_id);

int k = 12;
GLubyte image[12][12][3];
for ( int i = 0; i < k; i++ ) {
    for ( int j = 0; j < k; j++ ) {
        GLubyte c = (((i & 0x8) == 0) ^ ((j & 0x8)  == 0)) * 255;
        image[i][j][0]  = c;
        image[i][j][1]  = c;
        image[i][j][2]  = c;
    }
}
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);    
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, k, k, 0, GL_RGB, GL_UNSIGNED_BYTE, image); 
```

这是相关的渲染/显示代码：

```
 glUseProgram(this->prog);
glBindVertexArray(this->vao);
glUniformMatrix4fv(this->uni_mvp, 1, GL_FALSE, glm::value_ptr(f.mvp));

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D,  this->texture_id);
glUniform1i(this->uni_texdata, 0);

glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, this->vbo);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

glEnableVertexAttribArray(1);
glBindBuffer(GL_ARRAY_BUFFER, this->tbo);
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, 0);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, this->ibo);
glGetBufferParameteriv(GL_ELEMENT_ARRAY_BUFFER, GL_BUFFER_SIZE, &size);
glDrawElements(GL_QUADS, size / sizeof(GLushort), GL_UNSIGNED_SHORT, 0);

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

glBindVertexArray(0); 
```

这段代码用纹理渲染我的矩形，但是纹理是错误的（只是没有在矩形上正确显示）。据我所知，这个简单示例的纹理坐标应该是正确的。索引和纹理是否存在问题 - 我如何执行此操作的顶点坐标？

这是我的绿色背景上的渲染图片：

![在此处输入图像描述](../Images/7e68acf4443cf2e5fb102f148ddd4697.png)

我期待一个矩形黑白棋盘格（12 个部分）。

**好的，添加最后一个纹理坐标后，渲染如下所示：**

![在此处输入图像描述](../Images/7dbdaca6f022c84da947a26b89219128.png)

UDPATE：例如，当创建更大的棋盘纹理时，`GLubyte image[16][16][3];`我得到以下渲染：

![在此处输入图像描述](../Images/7ef049d474a0c9822bcf1cb924867b98.png)

我还注意到我的 .raw 文件可以正确呈现。我仍然希望在我的棋盘纹理中看到 16 x 16 的正方形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:50:45.110

我不认为你的 OpenGL 有什么问题了，尽管我认为你的纹理生成函数没有达到你的预期。

```
for ( int i = 0; i < k; i++ ) {
    for ( int j = 0; j < k; j++ ) {
        GLubyte c = (((i & 0x8) == 0) ^ ((j & 0x8)  == 0)) * 255;
        ...
    }
} 
```

您从左到右有 16 个纹素，并且在 X 或 Y 方向上每 8 个颜色交替一次。

为什么你认为这会产生 12 个（或 16 个）跳棋？`& 0x8`如果您想在每个增量上交替颜色，您应该删除。

# java - JUnit：可以（应该）这样做吗？

> ID：12335034
> 
> 赞同：2
> 
> 时间：2012-09-08T22:38:22.737
> 
> 标签：java, testing, junit

我正在尝试为 Web 应用程序编写一些 UI 测试，但我希望您能帮助我解决一些复杂问题。

首先，该应用程序有两种模式。其中一种模式是“训练”，另一种是“现场”。在实时模式下，数据直接从我们的数据库中获取，我的测试所做的任何更改都会反映在数据库中，在“实时”运行每个测试之前，我需要生成测试数据，因为它每次都不同（我已经有了那个逻辑到位）。在训练模式下，所有数据都是静态的，因此每次都使用相同的测试数据。

由于 UI 在每种模式下都是相同的，我想针对每种模式运行一次测试，但是由于某些特殊性，我的一些测试只能在实时模式下运行。

理想情况下，我希望将我的测试分成几个类，例如：UserTests、PaymentTests、LiveOnlyTests 等。并且有两个不同的类（扩展一个通用接口）来提供测试数据。

然后在这些部分中，我想构建 2 个不同的测试套件，每个模式一个。测试套件将接受带有我传递给它们的数据的对象并执行测试。

有谁知道在JUnit（或任何其他Java测试框架）中是否可以做到这一点或达到类似效果的东西。我可以看到完成此操作的唯一方法是编写我自己的测试运行程序，但我宁愿避免这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:45:06.657

我要做的是查看[Parameterized](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runners/Parameterized.html)和[Assume](http://kentbeck.github.com/junit/javadoc/latest/org/junit/Assume.html)的组合。

参数化允许您为测试定义一组测试数据。您可以返回训练/直播的数据集（可能基于系统属性）。

Assume 允许你测试某些东西，如果假设是错误的，它会中止测试（假设失败，而不是失败）。

您也可以使用[Categories](http://kentbeck.github.com/junit/javadoc/latest/org/junit/experimental/categories/Categories.html)，但使用 Parameterized 运行它们更难，因为必须结合两个跑步者。

因此，假设参数化 & 假设：

```
@RunWith(Parameterized.class)
 public class MyTest {
  @Parameters
  public static List<Object[]> data() {
    // return different data, depending upon the value of System.getProperty("testType");
    return Arrays.asList(new Object[][] {
      { 0, 0 }, { 1, 1 }, { 2, 1 }, { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 }
    });
  }

  private int fInput;
  private int fExpected;

  public MyTest(int input, int expected) {
    fInput= input;
    fExpected= expected;
  }

  @Test
  public void testTraining() {
    Assume("training".equals(System.getProperty("testType"));

    // test which only runs for training, using the data from data()
  }

  @Test
  public void testBoth() {
    // test which only runs for both, using the data from data()
  }
 } 
```

通过以上的一些组合，你可能会得到你想要的。

# android - 在传入的 sco 套接字上播放数据

> ID：12335047
> 
> 赞同：0
> 
> 时间：2012-09-08T22:40:23.280
> 
> 标签：android, bluetooth

我正在尝试编写一个读取数据 drom sco 套接字并在扬声器上播放的 Android 应用程序。同时它从 mic 读取数据并在连接的 sco 连接上发送。`setbluetoothsco(on)`不适合我。根据我的理解，我们需要将 mic 设置为输入设备，将扬声器设置为输出设备，用于 sco 套接字上的所有数据。如何处理这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:24:34.933

[STREAM_MUSIC](http://developer.android.com/reference/android/media/AudioManager.html#STREAM_MUSIC)的默认设备应该是内置扬声器，除非您已连接有线配件或将手机与 A2DP 配件配对。您可以为 AudioTrack 指定该流类型。

要使用内部麦克风，您可以将[MIC](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)指定为 AudioRecord/MediaRecorder 的音频源。

setbluetoothsco 不是你想要的。这将强制将某些流类型路由到 BT SCO 附件。

AFAIK SCO 链路只有 8 kHz 单声道全双工音频的带宽，所以无论你在扬声器中播放什么，通过 SCO 都可能听起来很糟糕。您可能已经很清楚这一点，但我想我应该提一下。

# javascript - 将需要 CommonJS 功能的 JavaScript 编译为原生 Java

> ID：12335057
> 
> 赞同：1
> 
> 时间：2012-09-08T22:42:28.827
> 
> 标签：javascript, java, native, rhino, commonjs

我想知道是否有人尝试过将实现 CommonJS API (require()) 的 JavaScript 文件编译为本机 Java 代码。

我目前正在构建一个网站，它将使用类似于这个的文本编辑器，它是 stackoverflow 开源的（WMD 编辑器的一个端口）： [http ://code.google.com/p/pagedown/](http://code.google.com/p/pagedown/)

这个项目附带了一些 JavaScript 文件，这些文件可以清理编辑器的标记语言并将其转换为有效的 HTML。

在玩了一些 Rhino 1.7R4 之后，我设法在运行时加载了 JavaScript 文件/模块，并且能够在何时执行 require 函数。

但是，我宁愿将这些脚本预编译为本机 Java 代码。我已经设法编译了遵循此 Rhino 文档的不使用 CommonJS 功能的单个脚本：

[https://developer.mozilla.org/en-US/docs/Rhino/JavaScript_Compiler](https://developer.mozilla.org/en-US/docs/Rhino/JavaScript_Compiler)

但是我不知道编译多个实现 CommonJS 功能的依赖脚本的正确方法，而且 Rhino 本身也没有很好的文档记录。

我们的想法是使用本地 Java 代码进行标记转换和清理，而无需编写/维护两个不同代码库的翻译成本（只需将 JS 转换为 JAVA）。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-04T15:39:48.053

RingoJS 可以做这样的事情：

> Ringo 实现了 CommonJS 模块规范。简而言之，这意味着：
> 
> 每个 JavaScript 文件都被视为生活在其自己的顶级范围内的模块。
> 
> 附加到模块导出对象的任何函数或属性都将被公开。
> 
> require() 函数返回模块的导出对象。
> 
> 如果给定的标识符字符串以 ./ 或 ../ 开头，Ringo 的模块加载器会搜索文件并尝试加载它。因此 require('./foo') 建议 Ringo 将文件 ./foo.js 作为模块加载。
> 
> 否则，Ringo 在模块路径的每个文件夹中查找模块。
> 
> 模块路径是 Ringo 将在其中查找模块的标准位置列表。
> 
> 模块路径可以通过以下方式设置：
> 
> 设置 RINGO_MODULE_PATH 环境变量。
> 
> 设置 ringo.modulepath Java 系统属性。
> 
> 对 ringo 命令行工具使用 -m 或 --modules 选项。
> 
> 将 module-path servlet 初始化参数与 JsgiServlet 一起使用。
> 
> 从 Ringo 中向 require.paths 类数组属性添加或删除元素。
> 
> 包提供了一种将多个模块和其他资源捆绑到一个单元中的方法。包是包含 package.json 包描述符文件的目录。package.json 描述符中的 main 属性被 Ringo 的模块加载器识别为模块的主入口点：

```
{
    "main": "lib/main.js"
} 
```

> 如果模块 id 直接解析为包目录并且 package.json 定义了 main 属性，Ringo 将尝试加载指定的资源。main 属性的值必须是相对于包根的路径。
> 
> 如果模块 id 解析到不包含 package.json 文件的目录，或者 package.json 没有定义 main 属性，Ringo 将尝试在该目录中加载文件 index.js。
> 
> 如果模块 id 的一部分解析为包目录，Ringo 将尝试根据该包的 lib 目录解析 id 的剩余部分。可以使用 package.json 中的 directory.lib 属性覆盖 lib 目录的位置。

```
{
    "directories": {
        "lib": "new-lib"
    }
} 
```

> CommonJS 模块规范故意保持较小。Ringo 为导出和导入内容提供了一些额外的细节。使用这些的缺点是您的代码与 Ringo 相关联，但是将代码转换为“纯”CommonJS 相对容易，并且还有一个用于此目的的命令行工具。
> 
> 一个 Ringo 扩展是包含功能。这类似于 require ，但不是将其他模块的导出对象作为一个整体返回，而是直接将其每个属性复制到调用模块的范围内，使它们像本地定义一样可用。
> 
> include 非常适合 shell 工作和快速脚本，其中打字经济是最重要的，这就是它的意义所在。将它用于大型、长期存在的程序通常不是一个好主意，因为它隐藏了程序中使用的顶级函数的起源。
> 
> 为此，最好将 require 与 JavaScript 1.8 解构赋值结合使用，以在本地范围内显式包含来自另一个模块的选定属性：

```
var {foo, bar} = require("some/module"); 
```

> 上述语句在调用范围内直接导入了“some/module”导出的API的“foo”和“bar”属性。
> 
> 使用 Ringo 编写命令行脚本很简单。每个任意 JavaScript 文件都可以作为 [script-file] 参数传递给 ringo 命令：

```
ringo [script-file] [script-arg1] [script-arg2] ... 
```

> Ringo 加载脚本文件并通过系统模块的 args 数组提供参数。args 数组中的第一个元素是脚本文件的名称。

**参考**

*   [Ringo 中的模块 - RingoJS](https://ringojs.org/documentation/modules/)

*   [命令行工具 - RingoJS](https://ringojs.org/documentation/commandline_tools/)

*   [Java 集成 - RingoJS](https://ringojs.org/documentation/java_integration/)

*   [rhino/RELEASE-NOTES.md at master · mozilla/rhino](https://github.com/mozilla/rhino/blob/master/RELEASE-NOTES.md)

# javascript - 在页面上显示带有射击子弹效果的图像

> ID：12335058
> 
> 赞同：1
> 
> 时间：2012-09-08T22:42:36.013
> 
> 标签：javascript, html

我想要一些关于 HTML5 和可能的 Javascript 库的指导。

这个想法是在网页上显示图像列表（图像列表将每隔几分钟更改一次）。但每张图片都会滑入页面，效果就像一颗带有轨迹的超速子弹。图像会堆积起来并在显示中停留几秒钟，然后新图像将被推入显示器（旧图像从显示器中取出）。

把它想象成一堆图像；但是许多代码彼此堆叠在一起。

HTML5 中是否有任何功能可以做到这一点？或者任何可以启用此效果的 Javascript 库？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:16:38.633

我最近编写了自己的代码类，请随意扩展它以满足您的需求：

```
// An advanced timeout class which also calculates the current progress
var Ticker = function(start, duration, callback) {

    var _this = this;

    this.start = start;
    this.duration = duration;

    // TODO easing options

    this.reverse = false;
    this.auto_reset = false;
    this.auto_reverse = false;

    this.callback = callback ? callback : null;
    this.timeout = callback ? setTimeout(function() {
        _this.callback();
        if (_this.auto_reset || _this.auto_reverse) { _this.reset(); }
    }, this.duration) : null;
};

Ticker.prototype.status = function() {
    var end = this.start + this.duration;
    var current = +new Date;
    var duration = end - this.start;
    var difference = current - this.start;
    var progress = this.reverse ? 1 - (difference / duration) : (difference / duration);

    if (current >= end) { progress = this.reverse ? 0 : 1; }

    return progress;
};

Ticker.prototype.reset = function() {
    if (this.auto_reverse) { this.reverse = this.reverse ? false : true; }

    var _this = this;
    this.timeout = this.callback ? setTimeout(function() {
        _this.callback();
        if (_this.auto_reset || _this.auto_reverse) { _this.reset(); }
    }, this.duration) : null;

    this.start = +new Date;
}; 
```

**用法：**

```
// Tickers every 1000 ms
var ticker = new Ticker(+new Date, 1000, function() {
    console.log("done");
});

ticker.auto_reset = true; 
```

您还可以通过调用该`status()`方法来获取当前进度。它返回一个数字，表示从到
的当前进度。`0.0``1.0`

# mysql - 供远程 Excel 用户使用的数据库

> ID：12335062
> 
> 赞同：2
> 
> 时间：2012-09-08T22:43:33.170
> 
> 标签：mysql, xml, database, excel, remote-access

我的问题不是一个简单的问题，但简单来说，我正在寻找有关与 excel 一起使用哪种数据库的建议，远程用户可以轻松地离线访问。

我是每天使用 Excel 记录和报告大量信息的十几个现场工程师之一。我追求的最终结果是所有工程师都可以访问其他工程师记录的数据。回忆信息是必不可少的，但不一定是完整的查询。问题是我们都是基于现场的，因此不会永久连接到服务器，但确实可以通过 VPN 访问中央服务器，因此可以定期进行同步。有几点需要考虑：

1.  我为一家拥有完善的 IT 基础设施的大公司工作。实现服务器更改将是困难的，但如果绝对必要的话可能是可能的。
2.  没有一个用户是 IT 专业人员，因此需要简单地保存/调用信息。
3.  它将由我管理。我是一名仪器工程师，而不是软件主管。我不是专家，但我敢说我对 VBA 相当胜任，并且刚刚开始掌握 XML 并开始学习 SQL。
4.  它必须可以离线使用，同步是可能的，并且冲突解决可以像最新数据一样简单。
5.  Excel 是必不可少的，进行了很多复杂的计算，所以这不是一个糟糕的选择数据输入平台的情况。

我有一半期待答案喊 mySQL，但到目前为止，我肯定对使用它没有信心，而且服务器端的事情有点令人生畏。据我了解，Excel 非常适合 XMl，这可以工作，因为数据可以按客户划分（40-50 个不同的文件？）。

我有点卡住了，希望能得到一些有见地的意见。我很高兴澄清任何观点，这是一个很难解释的情况。谢谢。

编辑：数据量约为每个工作簿 15 张，所有用户每天 2-3 个工作簿。每个工作簿大约 50 行。所以每天总共 100-200 行，假设每天最多 250 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:44:25.543

我将首先找出您的中央 IT 部门将允许您将什么用作服务器上的数据库。

如果它们会给您对任何类型的 SQL RDB 的读写访问权限（对于您的卷，哪个 RDB 无关紧要，它们都可以正常工作，包括可能已经安装在服务器上的 Jet），那么编写一个相当简单的VBA 插件使用 ADO 或 DAO SQL 查询，使用记录集来获取数据并同步它，然后使用 CopyFromrecordset 将其转储到 Excel 工作表中。

如果他们不允许您对任何类型的 RDB 进行 R/W 访问或设置，那么处理同时更新/锁定数据的可能性将变得更加棘手。

# ruby-on-rails - 使用本机扩展构建二进制文件 - Ruby/Rails

> ID：12335065
> 
> 赞同：3
> 
> 时间：2012-09-08T22:44:21.813
> 
> 标签：ruby-on-rails, cmake, taglib

我正在使用我的应用程序所需的 C++ taglib 库。我想编译所有东西，这样它就可以独立发布，而不必搜索扩展。外部。

假设我有一个依赖于 C++ 库的 ruby​​/rails 应用程序。如何通过在供应商目录中包含所有扩展来使我的应用程序独立？

我问是因为当我在 Heroku 上部署我的应用程序时，我无法在应用程序中使用 C 库。Heroku 提供了一种使用 Vulcan 构建库的方法，但 Vulcan 使用 AutoConf，我需要 CMAKE 来构建 taglib。

[taglib-ruby-gem](https://github.com/robinst/taglib-ruby)依赖于需要[构建 CMAKE的](http://www.cmake.org/)[TagLib](http://taglib.github.com)（C 库）。我怎样才能在本地完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:50:24.610

我自己没有尝试过，但是按照[这里](https://github.com/heroku/vulcan)的示例，您可以向 vulcan 提供命令行

你可以尝试类似的东西

```
vulcan build -s <path to source code> -c "cmake . && make install" 
```

# flash - 如何重定向基于 Flash 的 GET 请求？

> ID：12335069
> 
> 赞同：0
> 
> 时间：2012-09-08T22:45:09.713
> 
> 标签：flash, get, greasemonkey

我有一个网页，我想用 Greasemonkey 搞乱。顶部有 Flash 标题（随着图像的变化）。
我已经拥有所有这些图像并复制了文件结构，因此我可以重定向图像请求。

这就是 flash 对象的工作方式：
它加载，然后每当它转到幻灯片中的下一个图像时，它都会发送一个 GET 请求来检索图像。我想将该请求重定向到我的图像，以便幻灯片现在显示我的图像。

*   该站点是[Haslett 公立学校的页面](http://www.haslett.k12.mi.us/)。我想将图像更改为小马。

*   [闪光对象](http://www.haslett.k12.mi.us/images/headers/header_theme_80.swf)

我不想编辑 flash 对象，只是重定向请求。

示例：重定向：

```
http://www.haslett.k12.mi.us/images/album/11139/hs/album_3964_1327077935.png 
```

到：

```
http://anotherdomain.net/images/album/11139/hs/album_3964_1327077935.png 
```

或者，最有可能的情况是，我将使用图像共享站点，然后重定向到：

```
http://imagesite.com/image/album_3964_1327077935.png 
```

11139 目录有时不同，HS 目录也不同，但文件名实际上不会从旧文件更改为新文件。

文件名都不同，所以我想我可以重定向特定的专辑请求（11139、11140、11141 等）。到一个目录。

这就是我所拥有的：我从一些示例代码中得到它，但感觉它只是编辑任何和标签，或者可能是标签。我的需要实际重定向 GET 请求。

```
// ==UserScript==
// @name           Sudofox image redirect 
// @namespace      imagehost redirect
// @description    Replace requests for images with 
// @include        http://www.haslett.k12.mi.us/*
// @include        https://haslett.k12.mi.us/*
// @include        https://www.haslett.k12.mi.us/*
// @include        http://haslett.k12.mi.us/*
// ==/UserScript==

var a = document.getElementsByTagName('a');
for (i=0;i<a.length;i++) {
  p = /\/images\/album\/([A-Za-z0-9]+)/;
  res = p.exec(a[i]);

  if (res!=null) {
    a[i].href = 'http://site.com/image/' + res[1] + '.png';
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:03:21.617

它是 Flash，而不是 Javascript。你不能从外面弄乱它。如果无法访问服务器以实际重定向请求，那么您的机会微乎其微。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:24:25.420

Greasemonkey（和 javascript）无法访问基于 Flash 的请求。所以这对于 Greasemonkey 脚本是不可能的。

以下是一些替代方案：

*   查找或制作 Firefox 插件。[*重定向*](https://addons.mozilla.org/en-US/firefox/addon/redirector/)器非常好，但在这种情况下它可能不起作用。（但请尝试并确保。）

*   安装并运行代理服务器。 [*提琴手*](http://fiddler2.com/fiddler2/)很不错。

*   如有必要，更改您的`hosts`配置并设置 Web 服务器。请参阅[“如何将 URL 重定向到本地文件？”](https://superuser.com/q/222810/41023) .

# javascript - jQuery 和 svg 文件

> ID：12335070
> 
> 赞同：0
> 
> 时间：2012-09-08T22:45:10.737
> 
> 标签：javascript, jquery, html, css

我正在开发一个网站，并希望实现 svg 文件来帮助处理视网膜显示，但想要一个后备 png 文件作为备份。这是html/js/css；

```
<div id="band">
</div> <!--band--> 

<script>
        $(document).ready(function() {
                if (Modernizr.inlinesvg) {
                //SVG.
            $('#band').html('<img src="barbGradient.svg"  />');
                } else {
                //No SVG.
            $('#band').html('<img src="barbGradient.png"  />');
            }
         });
</script> 
```

这是CSS；

```
}

.no-inlinesvg div#band {
 position: relative;
 top: -950px;
 background-repeat: repeat-x;
 background-image: url('../_images/barbGradient.png');
 z-index: -1;

}

.inlinesvg div#band {
 position: relative;
 top: -950px;
 background-repeat: repeat-x;
 background-image: url('../_images/barbGradient.svg');
 z-index: -1;
} 
```

所有的浏览器都渲染得很糟糕！我知道我可以包含两个不同分辨率的 png，但我发现 js 方法更聪明！任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:48:46.203

我会坚持使用 png 解决方案。99.5% 的用户不会注意到。[HTML 规范](http://dvcs.w3.org/hg/html-proposals/raw-file/tip/responsive-images/responsive-images.html)还没有为此做好准备（Editors Draft），而且 hacky 实现的成本超过了 IMO 带来的好处。如果您仍然想要这个，请查看[此解决方案](https://github.com/scottjehl/picturefill)。但再一次，这一次引用了 polyfill 开发人员的话：

> *"Note: Supporting this many breakpoints quickly adds size to the DOM and increases implementation and maintenance time, so use this technique sparingly."*

# ios - 为什么我的 iOS 配置文件“不受信任”？

> ID：12335078
> 
> 赞同：4
> 
> 时间：2012-09-08T22:46:06.330
> 
> 标签：ios, openssl, ssl-certificate

我使用 OpenSSL 为我的应用程序创建了 CA、服务器和客户端证书。当我查看配置文件时，根 CA 显示为“受信任”，但我的服务器和客户端证书（由我的 CA 签名）显示为“不受信任”。

这些证书显示为由根 CA 签名，并在 IE 或 Chrome 下*正常工作。*

1.  为什么这些不起作用？
2.  有什么方法可以调试*为什么*它们显示为“不可信”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:25:00.243

我推测它的发生是因为我只使用了一个小（512 或 1024）字节证书。当我使用较新版本的 OpenSSL 创建一个 2048 字节的证书时，它就开始工作了。

我仍然需要验证 iOS 中是否确实存在可接受的最小密钥长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:24:16.597

[iPhone 配置实用程序](http://support.apple.com/kb/DL1465)允许您安装和管理各种配置设置，包括根证书颁发机构。

它应该使您能够查看设备上的 CA、添加新 CA，并删除任何导致问题的 CA。

# ide - 便携式 Mac Web 开发 IDE？

> ID：12335085
> 
> 赞同：0
> 
> 时间：2012-09-08T22:47:51.473
> 
> 标签：ide, portability

我的平面设计老师打算让我在课间休息时使用学校的 imac 来做 Web 开发工作。唯一的问题是 imacs 上有软件，可以在您注销时删除任何写入硬盘的文件，所以我需要一个便携式应用程序。像 aptana 这样的 Eclipse 应用程序更可取。有任何想法吗？

# html - html 5中sideber小部件的语义正确容器是什么？

> ID：12335086
> 
> 赞同：2
> 
> 时间：2012-09-08T22:48:07.327
> 
> 标签：html, wordpress-theming, semantic-markup

我有一个根本没有文本类型内容的页面。它是一个 jquery 页眉、两个侧边栏和一个页脚。辅助边栏是动态生成的插件 Wordpress 小部件列。

我喜欢的滑块是 html5，所以我要尝试一下。这是xhtml版本：

```
// Area 4 home secondary
register_sidebar( 
    array (
        'name' => 'Home Secondary Widget Area',
        'id' => 'home_secondary_widget_area',
        'before_widget' => '<div id="%1$s" class="widget-container %2$s">',
        'after_widget' => "</div>",
        'before_title' => '<h3 class="widget-title">',
        'after_title' => '</h3>'
     ) 
); 
```

然后解析为：

```
<div id="primary" class="widget-area">
    <ul class="xoxo">
        <li id="search-2" class="widget-container widget_search">
          <form role="search" method="get" id="searchform" action="http://localhost/wordpress_testbed/" >
            <div>
                  <label class="screen-reader-text" for="s">Search for:</label>
              <input type="text" value="" name="s" id="s" />
              <input type="submit" id="searchsubmit" value="Search" />
            </div>
       </form>
         </li>      
         <li id="recent-posts-2" class="widget-container widget_recent_entries">            
           <h3 class="widget-title">Recent Posts</h3>       
           <ul>
            <li><a href="http://localhost/wordpress_testbed/?p=1" title="Hello world!">Hello world!</a></li>
            <li><a href="http://localhost/wordpress_testbed/?p=358" title="Readability Test">Readability Test</a></li>
            <li><a href="http://localhost/wordpress_testbed/?p=188" title="Layout Test">Layout Test</a></li>
            <li><a href="http://localhost/wordpress_testbed/?p=128" title="Images Test">Images Test</a></li>
            <li><a href="http://localhost/wordpress_testbed/?p=555" title="Post Format Test: Gallery">Post Format Test: Gallery</a></li>
          </ul>
        </li>
    </ul>
</div> 
```

小部件应该如何标记？奖金将是一种头衔机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:24:54.020

在这种情况下使用是完全可以接受的`<aside>`，如下所示：http: [//html5doctor.com/aside-revisited/](http://html5doctor.com/aside-revisited/)

您的 HTML 可以正常工作并验证为 HTML5。我建议一些更简单的东西，比如：

```
<aside>
    <section>
        <h2>Item Title</h2>
        <ul>
            <li>Some Items</li>
        </ul>
    </section>
</aside> 
```

# zend-framework - 路由器zend框架1.11中的动态控制器

> ID：12335097
> 
> 赞同：3
> 
> 时间：2012-09-08T22:49:47.630
> 
> 标签：zend-framework, frameworks, controller, router

路由中的多控制器如何工作？我的路线：

```
$router->addRoute(
       'index',
       new Zend_Controller_Router_Route('/:lang/:@action',
           array(
                'lang' => 'en',
               'module' => 'default',
               'controller' => 'index',
               'action' => 'index'
           )
       )
    ); 
```

此路由适用于索引控制器，但不适用于身份验证控制器。如何使用该路由和索引身份验证控制器？

我的菜单项：

```
$this->url(array('controller'=>'Auth','action'=>'index') 
```

这个菜单项，不起作用。我的完整函数 _initRoutes()

```
protected function _initRoutes(){

    $frontController = Zend_Controller_Front::getInstance();
    $router = $frontController->getRouter();
    $router->removeDefaultRoutes();
    $router->addRoute(
            'fullRoute',
            new Zend_Controller_Router_Route('/:lang/:module/:controller/:action',
                    array('lang' => ':lang')
            )
    );
    $router->addRoute(
            'languageControllerAction',
            new Zend_Controller_Router_Route('/:lang/:controller/:action',
                    array('lang' => ':lang')
            )
    );

    $router->addRoute(
       'index',
       new Zend_Controller_Router_Route('/:lang/:@action',
           array(
                'lang' => 'en',
               'module' => 'default',
               'controller' => 'index',
               'action' => 'index'
           )
       )
    );

} 
```

我需要控制器身份验证操作的路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:54:32.633

**路线#1**

这将指向`http://yoursite.com/auth`模块`default`, `AuthController`, `indexAction`:

```
$router->addRoute(
       'auth',
       new Zend_Controller_Router_Route(
           'auth',
           array(
               'lang' => 'en',
               'module' => 'default',
               'controller' => 'auth',
               'action' => 'index'
           )
       )
); 
```

**路线#2**

这将指向`http://yoursite.com/`模块`default`, `AuthController`, `indexAction`:

```
$router->addRoute(
       'index',
       new Zend_Controller_Router_Route(
           '',
           array(
               'lang' => 'en',
               'module' => 'default',
               'controller' => 'auth',
               'action' => 'index'
           )
       )
); 
```

# mysql - Rails 将 db 表值设置为 nil

> ID：12335098
> 
> 赞同：-1
> 
> 时间：2012-09-08T22:49:54.730
> 
> 标签：mysql, ruby-on-rails, ruby

我有巨大的数据库，在一张表中我想将 somefield 设置为 nil，我该怎么做？当我这样做时：

```
@act = Article.all
 @act.each do |aaa|
   aaa.name = nil
 end 
```

但是这个加载系统，如何以更快更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:56:31.263

这样做：

```
Article.update_all(:name => nil) 
```

这将直接进入数据库，而不加载对象。

# php - Wordpress 和 IE 特定标记错误

> ID：12335108
> 
> 赞同：1
> 
> 时间：2012-09-08T22:52:40.957
> 
> 标签：php, mysql, wordpress, internet-explorer-9

我在 Wordpress 循环中有这段代码，它收集当前帖子的所有父项，并在无序列表中显示每个父项的子项。

```
<?php $taxonomyName = "custom_tax";
$parent_terms = get_terms($taxonomyName, array('parent' => 0, 'orderby' => 'slug', 'hide_empty' => false)); ?>  
<ul>
  <?php foreach ($parent_terms as $pterm) :
    $terms = get_terms($taxonomyName, array('parent' => $pterm->term_id, 'orderby' => 'slug', 'hide_empty' => false));
      foreach ($terms as $term) :?>
          <li><a><?php echo $term->name ?></a></li>
      <?php endforeach;?>
  <?php endforeach;?>
</ul> 
```

这适用于 FF、Chrome、Safari 和 Opera，但是在 IE9 中，我得到了

```
<ul>
  <a>
  <li>Term1</a></li>
  <a>
  <li>Term2</a></li>
  ...
<ul> 
```

我确定有一个简单的解决方法，我检查并没有在这里或 WP 论坛中发现任何类似的问题，所以我希望有人能阐明这是否是一个已知问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:11:58.463

您的 PHP 脚本生成的 HTML 代码不受您使用的浏览器的影响。使用输出缓冲，您应该将生成的 html 保存到文件中，以查看脚本生成的 html 代码。

清除 IE 中的缓存，然后重试。这有帮助吗？

# python - 为织物 rsync_project() 函数设置密码

> ID：12335114
> 
> 赞同：1
> 
> 时间：2012-09-08T22:53:56.963
> 
> 标签：python, rsync, fabric

我想以某种方式从**Fabric**库中传递**rsync_project()**函数（即常规 rsync 命令的包装器）的用户密码。

 **我发现 rsync 命令的选项**--password-file=FILE**需要将密码存储在 FILE 中。这可能会起作用，但我正在寻找更好的解决方案，因为我（临时）将密码以纯文本形式存储在数据库中。

请给我任何建议我应该如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:26:31.170

如果**rsync**使用**ssh**作为远程 shell 传输是一个选项，并且您可以为用户设置公钥身份验证，这将为您提供一种安全的方式来执行 rsync，而无需输入密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T13:02:07.387

在 Pedro 的回答中使用公钥身份验证是自动使用**rsync**的理想方式，但是在某些情况下（例如我的），您会被困在使用密码作为连接目标主机的唯一方法。

YMMV，但我的解决方案是通过**期望**输入密码来实现以下运行**rsync的函数：**

 **```
 def run_rsync(source, target, excludes=[]):
        excludes = "".join(map(lambda e: " --exclude="+e, excludes))
        local("expect -c 'spawn rsync -avz"+excludes+" --force -e \"ssh -oStrictHostKeyChecking=no -p "+env.port+"\" "+source+" "+target+"; expect password; send \""+env.password+"\\n\"; interact'") 
```

请注意，此方法是不安全的，因为在执行命令时密码将输出到 STDOUT，因此仅应作为最后的手段并从受信任的环境中使用。****

# asp.net - ASP.NET 4 包和 WebResource.axd

> ID：12335119
> 
> 赞同：2
> 
> 时间：2012-09-08T22:54:36.893
> 
> 标签：asp.net, webresource.axd

ASP.NET 4 包括一个很棒的捆绑和压缩功能。我想知道我们是否可以以某种方式将它与 WebResource.axd 一起使用。

现在，我可以使用为我的应用程序注册资源

```
[assembly: WebResource("MvcApplication1.Bootstrap.js", "text/javascript", PerformSubstitution = true)] 
```

当我尝试了一些使用捆绑路径的组合时 - 它只是不包含它，这听起来很合理，因为 Web 资源是嵌入在库中的实际文件。但我希望确保我没有遗漏任何东西。

有没有办法将捆绑包与网络资源结合起来？

# java - 初始化图形变量

> ID：12335121
> 
> 赞同：1
> 
> 时间：2012-09-08T22:54:46.457
> 
> 标签：java, graphics, initialization

如何初始化 Graphics 变量？

我试过了`Graphics g = new Graphics()`，`Graphics g;`但它说它不能被实例化。我需要`Graphics g`从一种方法传递到另一种方法，所以我不能只从参数中调用它。任何帮助表示赞赏。

这是我的代码：

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Image;
import java.applet.Applet;
import java.lang.Math;
import java.util.Random;

public class testApp extends JApplet 
{
    public void init() 
    {
    this.add(new RandomCardsPanel());
    }

public RandomCardsPanel extends JPanel 
{
    public Image card1, card2, card3, card4, card5, card6, card7, card8, card9, card10, card11, card12, card13;
    public Image card14, card15, card16, card17, card18, card19, card20, card21, card22, card23, card24, card25, card26;
    public Image card27, card28, card29, card30, card31, card32, card33, card34, card35, card36, card37, card38, card39;
    public Image card40, card41, card42, card43, card44, card45, card46, card47, card48, card49, card50, card51, card52;

    public RandomCardsPanel() 
    {
        Image[] card = new Image[52];

        card[0] = getImage( getDocumentBase(), "c1.gif" );
        card[1] = getImage( getDocumentBase(), "c2.gif" );
        card[2] = getImage( getDocumentBase(), "c3.gif" );
        card[3] = getImage( getDocumentBase(), "c4.gif" );
        card[4] = getImage( getDocumentBase(), "c5.gif" );
        card[5] = getImage( getDocumentBase(), "c6.gif" );
        card[6] = getImage( getDocumentBase(), "c7.gif" );
        card[7] = getImage( getDocumentBase(), "c8.gif" );
        card[8] = getImage( getDocumentBase(), "c9.gif" );
        card[9] = getImage( getDocumentBase(), "c10.gif" );
        card[10] = getImage( getDocumentBase(), "cj.gif" );
        card[11] = getImage( getDocumentBase(), "cq.gif" );
        card[12] = getImage( getDocumentBase(), "ck.gif" );
        card[13] = getImage( getDocumentBase(), "d1.gif" );
        card[14] = getImage( getDocumentBase(), "d2.gif" );
        card[15] = getImage( getDocumentBase(), "d3.gif" );
        card[16] = getImage( getDocumentBase(), "d4.gif" );
        card[17] = getImage( getDocumentBase(), "d5.gif" );
        card[18] = getImage( getDocumentBase(), "d6.gif" );
        card[19] = getImage( getDocumentBase(), "d7.gif" );
        card[20] = getImage( getDocumentBase(), "d8.gif" );
        card[21] = getImage( getDocumentBase(), "d9.gif" );
        card[22] = getImage( getDocumentBase(), "d10.gif" );
        card[23] = getImage( getDocumentBase(), "dj.gif" );
        card[24] = getImage( getDocumentBase(), "dq.gif" );
        card[25] = getImage( getDocumentBase(), "dk.gif" );
        card[26] = getImage( getDocumentBase(), "h1.gif" );
        card[27] = getImage( getDocumentBase(), "h2.gif" );
        card[28] = getImage( getDocumentBase(), "h3.gif" );
        card[29] = getImage( getDocumentBase(), "h4.gif" );
        card[30] = getImage( getDocumentBase(), "h5.gif" );
        card[31] = getImage( getDocumentBase(), "h6.gif" );
        card[32] = getImage( getDocumentBase(), "h7.gif" );
        card[33] = getImage( getDocumentBase(), "h8.gif" );
        card[34] = getImage( getDocumentBase(), "h9.gif" );
        card[35] = getImage( getDocumentBase(), "h10.gif" );
        card[36] = getImage( getDocumentBase(), "hj.gif" );
        card[37] = getImage( getDocumentBase(), "hq.gif" );
        card[38] = getImage( getDocumentBase(), "hk.gif" );
        card[39] = getImage( getDocumentBase(), "s1.gif" );
        card[40] = getImage( getDocumentBase(), "s2.gif" );
        card[41] = getImage( getDocumentBase(), "s3.gif" );
        card[42] = getImage( getDocumentBase(), "s4.gif" );
        card[43] = getImage( getDocumentBase(), "s5.gif" );
        card[44] = getImage( getDocumentBase(), "s6.gif" );
        card[45] = getImage( getDocumentBase(), "s7.gif" );
        card[46] = getImage( getDocumentBase(), "s8.gif" );
        card[47] = getImage( getDocumentBase(), "s9.gif" );
        card[48] = getImage( getDocumentBase(), "s10.gif" );
        card[49] = getImage( getDocumentBase(), "sj.gif" );
        card[50] = getImage( getDocumentBase(), "sq.gif" );
        card[51] = getImage( getDocumentBase(), "sk.gif" );

        String cardNumber; 
        double cardRandom;
        int cardRandomNumber;
        public int[] ranNum = new int[10];
        Random ran = new Random();

        for (int number = 0; number <=  9; )
        {
            cardRandom = ran.nextInt(52) + 1;
            cardRandomNumber = (int)Math.round( cardRandom );

            if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )
            { 
                ranNum[number] = cardRandomNumber;
                number++;
            }
        }   
    }

   public void paintComponent(Graphics g) 
    {
        setBackground( Color.green );
        g.drawImage( cards[ranNum[0]], 10, 10, this);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:58:50.617

通常您不需要初始化`Graphics`变量，因为大多数绘制应该在组件`paintComponent()`方法中完成。（你不能这样做`Graphics g = new Graphics();`，因为`Graphics`它是一个抽象类。）通常我会创建一个类来扩展`JPanel`并覆盖该`paintComponent()`方法来进行我的自定义绘画。从那里，我可以将`Graphics`引用传递给需要它的任何其他方法。

试试这个。当然，我说的是相当抽象的水平。让我们知道您从这些提示中发现了什么，我们将从那里开始工作。

**编辑：**

`JComponent`声明一个抽象方法[`paintComponent(Graphics g)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)。如果您想提供自己的实现，则*必须*完全匹配此方法签名。这意味着您只允许使用*一个*参数，即`Graphics`对象。

您可以自由地创建`paintComponent()`具有更多参数的方法，但由于方法签名不匹配，因此当操作系统决定您的 Applet 需要重新绘制时，它不会在 Event Dispatch Thread 上自动调用。

话虽如此，您不必扩展`JPanel`即可使其正常工作。您可以扩展任何`JComponent`作为祖先的类。在您的特定情况下，`JPanel`似乎是最好的选择。我建议你重构你的代码如下：

在 RandomCards.java 中

```
public RandomCards extends JApplet {
    public void init() {
        this.add(new RandomCardsPanel();
    }
} 
```

在 RandomCardsPanel.java 中

```
public RandomCardsPanel extends JPanel {
    // Put private member variables here

    public RandomCardsPanel() {
      // Put code from your current init() method here
    }

    public void paintComponent(Graphics g) {
        // Put your custom painting code here, including setting the background color and drawing the card images
    }
} 
```

如果您不介意，我还有一些建议：

1.  请注意，我正在扩展`JApplet`而不是`Applet`. 这是首选课程。`Applet`仍然存在与 AWT 的向后兼容性。现代 Java 小程序使用`JApplet`和 Swing 代替。

2.  缩进代码时，使用空格而不是制表符。选项卡以系统相关的方式显示。这意味着如果您在另一个编辑器或另一台计算机上查看您的代码，选项卡格式的代码可能不会按照您的预期方式显示。特别是，您可以看到该网站没有正确格式化您的代码。大多数文本编辑器都有用空格替换制表符的设置。我强烈建议你找出如何用你的方法做到这一点。

3.  当您发现自己使用的变量名称仅与数字后缀不同（例如`Image card1, card2, card3, card4, card5`等）时，您应该使用数组来代替。

4.  您在方法*中*使用了一个数组`init()`。但是，您已将其声明为局部变量。这意味着您的其他方法都无法看到`card`您在此处声明的数组。您应该将其声明为成员变量，而不是`card1, card2, card3`等变量。您需要在`paintComponent()`方法中使用的任何其他变量也是如此，因为它只能有一个`Graphics g`参数。

5.  您不需要`paintComponent()`显式调用。事实上，你*不应该*明确地调用它。系统将在适当的时候调用此方法。

我希望这有助于澄清几点。祝您的 Java 体验好运。如果您还有其他问题，请告诉我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T22:59:01.523

**那么这里有两个问题：**

```
Graphics g1;
a.paint(g1); 
```

而且您收到 G1 未初始化的错误。这是因为变量 g1 从未设置为任何值，这会导致编译错误。要编译代码，您至少需要这样做：

```
Graphics g1 = null;
a.paint(g1); 
```

但是，这显然不会对您有太大帮助。当您尝试运行代码时，您将收到 NullPointerException。为了真正使您的图形绘制，您需要这样做：

```
So1 a=new So1();
Graphics g1 = So1.getGraphics();
a.paint(g1); 
```

**例如：**

```
import java.awt.*;
import javax.swing.*;
import java.applet.*;

public class So1 extends Applet{

    public void paint (Graphics g)
    {
        g.drawString("hello",40,30);
    }

    public static void main(String ad[])
    {

        JFrame jp1 = new JFrame();
        So1 a=new So1 ();
        jp1.getContentPane().add(a, BorderLayout.CENTER);
        jp1.setSize(new Dimension(500,500));
        jp1.setVisible(true);

    }
} 
```

现在请注意，我们实际上并没有自己调用paint() 函数。这由 awt 处理，它实际上选择图形上下文，并为我们调用我们的绘制函数。不过，如果你愿意，你可以传入任何你想要的图形对象，并要求它在上面绘制。（因此，如果您想将组件绘制到图像上，可以这样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T23:00:57.937

根据 Java [Graphics](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html)类的文档是抽象的，所以你不能实例化它。

# wordpress - Wordbooker 卷曲错误

> ID：12335124
> 
> 赞同：1
> 
> 时间：2012-09-08T22:56:29.467
> 
> 标签：wordpress, curl

我正在使用 Wordpress V 3.4.2，在尝试安装 Wordbooker 时，它不断给出错误：

*插件无法激活，因为它触发了致命错误。致命错误：在第 111 行调用 /data/www/.../plugins/wordbooker/wordbooker.php 中的未定义函数 curl_version()*

我确实激活了 cURL。

```
curl -V/    
curl 7.21.4 (x86_64-apple-darwin10.7.0) libcurl/7.21.4 OpenSSL/1.0.0d zlib/1.2.5 libidn/1.20
    Protocols: dict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp smtp smtps telnet tftp 
    Features: IDN IPv6 Largefile NTLM SSL libz 
```

我在 Wordbooker 的论坛上找不到足够的信息，请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:03:43.077

取自[http://support.it-mate.co.uk/?mode=KB&kbid=32](http://support.it-mate.co.uk/?mode=KB&kbid=32)

**症状**

运行需要 cURL 的 PHP 应用程序时收到“致命错误：调用未定义函数 curl_version()”

**原因**

未安装或未启用 cURL 时会发生此错误。

**解析度**

检查 cURL (php_curl.dll) 是否已在 php.ini 中安装并启用。

检查 php_curl.dll 是否存在

打开您的 PHP 扩展目录（通常是 C:\PHP\ext）并找到 php_curl.dll

该文件通常包含在来自 php.net 的最新 PHP 安装文件中

**检查 cURL 已启用**

为此，打开 php.ini 并找到以下行；

扩展=php_curl.dll

如果它以分号 (;) 开头，请删除分号，保存文件，然后重新启动服务器。

# jquery - 找出用户没有在输入字段中提交的内容。

> ID：12335127
> 
> 赞同：0
> 
> 时间：2012-09-08T22:56:54.803
> 
> 标签：jquery, python, google-app-engine, autocomplete, submit

我在输入字段上使用 Jquery 自动完成功能。因此，当用户输入一个单词时，他们可以看到一个下拉列表，其中显示可供选择的选项越来越少。

问题是，有时用户的输入不会出现在该列表中的选项中。我相信，当用户看到该列表为空时，他们会放弃原来的搜索词并输入其他搜索词，或者干脆将其删除并将该字段留空。

发生这种情况时，我想知道输入的原始搜索词是什么？

（因为随着时间的推移收集这些信息后，我计划将最受欢迎的添加到列表中，供未来用户选择）

所以我的问题是，找出用户输入但未提交的内容的最佳方法是什么？

到目前为止，我的想法是倾听用户何时将焦点从输入字段上移开，并获得改变的价值。这将告诉我删除并将其留空的用户，但对于删除然后输入新术语的用户，它仍然没有告诉我任何信息。

有更好的解决方案吗？

PS - 我的网站在 GAE 上，所以如果使用 python 打开任何相关的门......也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:05:10.447

您可以添加一个击键事件侦听器并简单地侦听退格按键事件。发生这种情况时，将表单字段值保存并 ajax 到您的服务器进行存储。

**编辑：**基于 Scott Selby 的分析器：涵盖所有基础：按键退格的事件侦听器

选择开始和结束的事件侦听器。如果表单字段在下一次按键时发生更改，则保存并 ajax 选定的部分。

捕获 onunload 事件，如果存在则保护表单数据。

这样你总能得到用户删除的内容。这也有助于使您的搜索查询窗口“错字”证明，因为随着时间的推移，您将能够发现“常见”错误。

这也是收集潜在客户对您的期望产品或服务的数据的好方法。

# ruby-on-rails - （显然）两个 rake 任务的相同测试；只有一个通过

> ID：12335134
> 
> 赞同：7
> 
> 时间：2012-09-08T22:58:54.973
> 
> 标签：ruby-on-rails, rspec, rake

我正在尝试在 rspec 中为在同一文件中定义的两个 rake 任务编写测试（在 Rails 3.0.11 项目中）。由于某种原因，其中只有一个通过了。我写了一个小演示来抽象出任务的实际内容，同样的事情也会发生。`rake`当从命令行调用时，这两个任务都可以工作。这是怎么回事？这是我的演示：

**lib/tasks/demo_tasks.rake**

```
namespace :demo do
  task :test => :environment do
    puts "test!"
  end

  task :test_two => :environment do
    puts "second test!"
  end
end 
```

**规范/lib/tasks/demo_spec.rb**

```
require 'spec_helper'
require 'rake'

describe "test tasks" do
  let(:rake) do
    app = Rake::Application.new
    app.options.silent = true
    app
  end

  before :each do
    Rake.application = rake
    Rake.application.rake_require 'lib/tasks/demo_tasks',
                                  [Rails.root.to_s]
    Rake::Task.define_task :environment
  end

  describe "demo:test" do
    it "runs" do
      rake["demo:test"].invoke
    end
  end

  describe "demo:test_two" do
    it "also_runs" do
      rake["demo:test_two"].invoke
    end
  end
end 
```

**rspec 规范/lib/tasks/demo_spec.rb**

```
test tasks
  demo:test
test!
    runs
  demo:test_two
    also_runs (FAILED - 1)

Failures:

  1) test tasks demo:test_two also_runs
     Failure/Error: rake["demo:test_two"].invoke
     RuntimeError:
       Don't know how to build task 'demo:test_two'
     # ./spec/lib/tasks/demo_spec.rb:26:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T00:09:41.017

**简而言之：**将您的更改`before`为`before :all`（而不是`:each`）。

**或者：**将一个空数组作为第三个参数传递给`rake_require`.

```
Rake.application.rake_require 'lib/tasks/demo_tasks', 
                              [Rails.root.to_s], 
                              [] 
```

**细节**

```
def rake_require(file_name, paths=$LOAD_PATH, loaded=$")
  fn = file_name + ".rake"
  return false if loaded.include?(fn)
  ... 
```

`$"`是一个 Ruby 特殊变量，它保存由`require`.

如果您不传递可选参数，`rake_require`将使用 Ruby 加载的模块数组。这意味着模块不会再次加载：Ruby 知道模块已加载，rake 检查 Ruby 知道的内容，并且它是每个测试的新 rake 实例。

切换到`before :all`工作，因为这意味着该`let`块只运行一次：一个 rake 实例，一个模块加载，每个人都很高兴。

说了这么多，为什么还要重新加载 rake 环境两次呢？您的目标是测试您的任务，这不需要为每个规范提供新的 rake 上下文。

您可以以每个规范中的一些次要冗长为代价完全消除本地：

```
describe "test tasks" do
  before :all do
    Rake.application = Rake::Application.new
    Rake.application.rake_require 'lib/tasks/demo_tasks', [Rails.root.to_s]
    Rake::Task.define_task :environment
  end

  describe "demo:test" do
    it "runs" do
      Rake::Task["demo:test"].invoke
    end
  end
end 
```

您可以在块中定义一个实例变量`before`以避免`Rake::Task`引用：

```
before :all do
  @rake = Rake::Application.new
  Rake.application = @rake
  Rake.application.rake_require 'lib/tasks/demo_tasks', [Rails.root.to_s]
  Rake::Task.define_task :environment
end

describe "demo:test" do
  it "runs" do
    @rake["demo:test"].invoke 
```

出于多种原因，IMO 不太理想。[这是我同意的总结](https://stackoverflow.com/a/5359979/438992)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-18T22:11:17.120

一个流行的搜索引擎把我带到了这里，因为在我的例子中，当`#invoke`一个给定的测试被多次使用时，我看到测试失败。下面的解决方案建立在@dave-newtown 的回答之上。

出现问题是因为在撰写本文时（Rake v12），*仅*`#invoke`运行一次任务，例如：

 *```
RSpec.describe "demo:test" do
  it "runs" do
    expect(SomethingWeAreInvoking).to eql(ProofIfWasInvoked)
    Rake::Task["demo:test"].invoke
  end

  it "runs" do
    expect(SomethingWeAreInvoking).to eql(ProofIfWasInvoked)
    Rake::Task["demo:test"].invoke
  end
end 
```

`it`...如果测试写得好并且任务正确调用，则可能会通过第一个运行，但总是会在第二个失败，`it`因为在给定`Rake.application`的范围内，使用`#invoke` 只运行一次任务。has-been-run-before 状态显然在`Rake.application`实例中被记住了。

是的，这确实意味着*至少在*经过测试的 Rake v12 下，许多显示如何测试 Rake 任务的在线文章是（fo）不正确的，或者侥幸逃脱，因为它们在示例中只显示了对任何给定任务的单一测试.

我们可以使用 Rake's `#execute`，但这不会运行相关任务，因此会导致其自身的一系列问题，并使我们远离测试 Rake 堆栈，就像在命令行上调用它一样。

取而代之的是，将接受的答案与在线其他零碎的混合产生这种替代方案：

```
require 'spec_helper'
require 'rake'

RSpec.describe 'demo:test' do
  before :each do
    Rake.application = Rake::Application.new
    Rake.application.rake_require 'lib/tasks/demo_tasks', [Rails.root.to_s], []
    Rake::Task.define_task(:environment)
  end

  it 'runs' do
    expect(SomethingWeAreInvoking).to eql(ProofIfWasInvoked)
    Rake.application.invoke_task('demo.test')
  end

  it 'runs with a parameter' do
    expect(SomethingWeAreInvoking).to eql(ProofIfWasInvoked)
    Rake.application.invoke_task('demo.test[42]')
  end
end 
```

*   它准备 Rake on `before :each`。
*   每次`Rake.application`都会创建一个新的；这意味着我们可以`invoke`在任意数量的测试中使用，尽管在任何单个测试中只能使用一次。
*   如果我们只是使用`Rake.application`开箱即用的实例，我们可以在`Rake.application.rake_require 'tasks/demo_tasks'`所有路径等都设置好后编写，但是因为我们肯定需要为每个测试创建一个新的 Rake 应用程序实例，以避免在测试中“弄脏”它的状态，需要来自@dave-newtown 的“速记”表格。
*   我使用`Rake.application.invoke_task`而不是`Rake::Task[...].invoke`. 这使参数的语法与 Rake 命令行上使用的语法相同，我觉得这是一种更“准确”和自然的方式来测试需要 args 的任务。

是的，这确实意味着*至少在*经过测试的 Rake v12 下，许多展示如何测试 Rake 任务的在线文章是不正确的，或者侥幸逃脱，因为它们在示例中只显示了对任何给定任务的单一测试。很可能早期的 Rake 版本没有这种行为，所以这些文章在撰写时是正确的。

希望有人觉得这很有帮助。

> 参考文章：
> 
> *   [https://www.rubydoc.info/gems/rake/Rake/Task#invoke-instance_method](https://www.rubydoc.info/gems/rake/Rake/Task#invoke-instance_method) - 线索在“*如果需要就*调用任务” 。先决条件被调用'（我的重点）
> *   比较[https://www.rubydoc.info/gems/rake/Rake/Task#execute-instance_method](https://www.rubydoc.info/gems/rake/Rake/Task#execute-instance_method) -“执行与此任务相关的操作”，没有提及“如果需要”或先决条件
> *   搜索引擎产生诸如[https://medium.com/@sampatbadhe/rake-task-invoke-or-execute-419cd689c3bd之类的文章](https://medium.com/@sampatbadhe/rake-task-invoke-or-execute-419cd689c3bd)
> 
> （搜索引擎提示：testing rake rspec test invoked invoked only run once）*

# javascript - 验证我的代码仅使用 ASCI | 用正则表达式检查

> ID：12335137
> 
> 赞同：0
> 
> 时间：2012-09-08T22:59:10.200
> 
> 标签：javascript

IE9 给了我一个对语法没有意义的错误。`missing )`

以前是`Expected ;`以前的 SO 帖子[在这里](https://stackoverflow.com/questions/11474812/ie9-reports-missing-semicolon-that-exists)

我在任何其他浏览器上都看不到随机错误，并且我的代码通过了 jslint.com 和 jshint.com

想要验证`snuck`我的代码中没有 unicode，所以我将通过正则表达式运行它并检查

```
[\x00-\x7F] 
```

这是一种有效的方法吗？

**有关的**

[http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:16:08.953

自从我在 IE 中开发以来已经差不多十年前了，所以我的记忆可能是错误的，但我隐约记得 IE 不喜欢代码中的控制字符（0x20 以下的字符，换行、回车和制表符除外） .

根据您使用的编辑器，很容易插入控制代码，方法`CTRL`是同时按下`@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`以获得控制代码 0x00 - 0x1f 之一。

如果您想使用正则表达式来验证您只有可打印的 ASCII 和允许的控制字符，您可以使用`^[\x09\x0a\x0d\x20-\x7e]*$`. 它允许制表符 (x09)、换行符 (x0a)、回车符 (x0d) 和所有可打印的 ASCII 字符。删除 (x7f) 被忽略。

如果您想检测是否有一些不是可打印的 ASCII 或允许的控制字符，您可以使用它`[^\x09\x0a\x0d\x20-\x7f]`来匹配任何不是制表符、换行符、回车或可打印 ASCII 的内容。

在 Unicode 中有一些新的行终止符：下一行 (\u0085)、行分隔符 (\u2028) 和段落分隔符 (\u2029)。

许多 Internet 协议（以及 Windows 系统上的普通文本文件）期望行尾用回车符后跟换行符 ( `\0x0d\0x0a`) 来指示，这是从您希望能够仅返回不前进到下一行，例如能够写下划线。它还可以通过再次打印同一行来使文本更粗，或者以灰度打印...

# trigger.io - Trigger.io forge 运行网络

> ID：12335138
> 
> 赞同：2
> 
> 时间：2012-09-08T22:59:25.563
> 
> 标签：trigger.io

运行时出现一些随机错误：

```
forge run web 
```

在我的应用程序中。

```
$ forge run web
[   INFO] Forge tools running at version 3.3.11
[   INFO] Checking JavaScript files...
[   INFO] JavaScript check complete
[   INFO] Verifying your configuration settings...
[   INFO] Configuration settings check complete
[   INFO] { [Error: listen EADDRINUSE] code: 'EADDRINUSE', errno: 'EADDRINUSE', syscall: 'listen' } 
```

知道什么可能导致此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T01:03:54.327

该错误是由于应用程序已经在您尝试侦听的端口上侦听。

您可以使用`ps aux | grep node`查看是否有任何节点进程正在运行。然后使用`kill pid`where pid is the process id杀死它们

例子：

```
ps aux | grep node
37211   0.0  0.2  3029484  17852 s018  S+    5:35PM   0:00.28 node ./web.js
kill 37211 
```

# matlab - 使用 uigetfile 后显示文件名

> ID：12335144
> 
> 赞同：0
> 
> 时间：2012-09-08T23:00:37.203
> 
> 标签：matlab, filenames, msgbox

我有个问题。我正在使用 Matlab。我使用 uigetfile 并在用户选择文本文件后，我想在消息框中显示文件名（并且没有路径名）。我怎样才能做到这一点？这是我的代码示例。

```
[HMF,HMP,HML] = uigetfile(('*.txt', 'Please select your data');

if HML>0;

msgbox([You selected 'bla3']) <- I know this isn't correct)

else

return; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:44:19.383

您将文件名作为`uigetfile`. 因此，您需要做的就是：

```
[HMF,HMP,HML] = uigetfile(('*.txt', 'Please select your data');

if HML>0;

msgbox(sprintf('You selected %s',HMF)) 

else

return;

end 
```

# c# - 无法在 WPF 应用程序中使用 Controls.Add

> ID：12335146
> 
> 赞同：1
> 
> 时间：2012-09-08T23:01:04.857
> 
> 标签：c#

当我编写 Controls.Add() 以在窗口中动态创建控件时，它表示控件未定义或存在于窗口类中。换句话说，“控件”没有被识别为类或命令，因此代码不起作用。任何建议将不胜感激。

我想动态创建一个窗口并向其添加一个文本框。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

 public partial class Window2 : Window
    {
        public Window2()
        {
             InitializeComponent();
        } 

private void button2_Click(object sender, RoutedEventArgs e)
        {
            Window f1 = new Window();
            f1.Show();
            TextBox tb = new TextBox();
            tb.Width = 150;
            tb.Height = 60;
            tb.Name = "TextBoxID";
            tb.Text = "This is textbox first data";
            Controls.Add(f1);  

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:16:56.273

如果您查看[Window Class](http://msdn.microsoft.com/en-us/library/system.windows.window%28v=vs.100%29.aspx)的文档，您会发现它没有这样的属性。它有一个`Content`属性，您可以将其设置为一个控件。因此，如果要添加多个控件，则必须将窗口的`Content`属性设置为多项面板，例如 StackPanel 或 Grid，然后将控件添加到面板中。

[面板](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx#inheritanceContinued)

# continuous-integration - 无法使用 VIX api 启动 VM，使用 msiexec 安装软件，然后创建快照

> ID：12335148
> 
> 赞同：3
> 
> 时间：2012-09-08T23:01:20.307
> 
> 标签：continuous-integration, vix

我不知道如何使用 VIX api 来安装我的被测软件，这有望成为我持续集成的补充。以下是高级别的操作：

1.  打开虚拟机快照
2.  使用 RunProgramInGuest 在 VM 上安装 msi 包（此 msi 是我正在测试的软件）
3.  关闭虚拟机
4.  拍摄快照

现在 - 如果我首先手动登录到已经开机的快照并在步骤 2 中启动我的程序，这些步骤可以正常工作。一切正常。但是，如果我从第 1 步开始并允许 VIX 启动快照，我的 RunProgramInGuest 就不会像我已经登录的情况下那样做

在来宾虚拟机中，我有：

*   桌面上的 .bat 文件，它调用通过任务计划程序创建的任务。此任务设置为以最高权限运行。我正在使用[Using VMRUN with Windows Vista and UAC](http://tsells.wordpress.com/2009/10/15/using-vmrun-with-windows-vista-and-uac/#comments)中的想法。虽然注意：*我现在完全关闭了 UAC，所以这不是问题*
*   上面的任务将在桌面上运行一个不同的 .bat 文件，这是我的安装脚本，例如 msiexec /i ...

除非我已经登录到 VM，否则主机运行的代码令人窒息：

```
using (VMWareVirtualHost virtualHost = new VMWareVirtualHost()) {
    virtualHost.ConnectToVMWareWorkstation();

    using (VMWareVirtualMachine virtualMachine = virtualHost.Open(@"D:\VMware-VMs\testvm-W7x86-3\testvm-W7x86-3.vmx"))
    {

        virtualMachine.PowerOn();
            virtualMachine.WaitForToolsInGuest();  
        virtualMachine.LoginInGuest("myusername", "myfakepassword");

        VMWareVirtualMachine.Process guestProcess = virtualMachine.RunProgramInGuest(@"C:\Windows\System32\cmd.exe", @"/c C:\Users\myusername\Desktop\StartTask.bat", Constants.VIX_RUNPROGRAM_ACTIVATE_WINDOW);
        Thread.Sleep(60000);
        virtualMachine.RunProgramInGuest(@"C:\Windows\System32\cmd.exe", @"/c C:\Windows\System32\shutdown.exe -s -t 0");
        Thread.Sleep(30000); //wait for guest to shutdown before continuing to make snapshot.. 
```

...等等

**我的问题：**

*   为什么这仅在我已经登录到已启动的 VM 时才有效？
*   除了使用 VIX api（例如使用 Psexec.exe 或类似的东西）之外，我还有其他方法吗？使用任务集设置以使用最高权限运行的方式 - 这意味着我想要混合的任何 VM 都必须设置此任务。我已经研究过其他方法——RemoteInstall 看起来很有希望，除非你必须关闭 UAC 才能使其工作。所以我现在求助于这些 hacky 解决方法。

编辑：如果我使用 vmrun.exe 启动任务，也会发生相同的行为。除非我已经通过远程会话登录到机器，否则它不起作用，例如：

编辑：如果我使用 sysinternals 'PsExec.exe' 在 VM 中运行程序，则会发生相同的行为 - 它仅在我已经登录到交互式会话时才有效。

```
vmrun -T ws -gu myusername -gp myfakepassword runProgramInGuest D:\VMware-VMs\testvm-3\testvm-W7x86-3.vmx -activeWindow "C:\users\myusername\desktop\StartTask.bat" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:00:55.443

来自 VMvare 文档：“应使用 VIX_LOGIN_IN_GUEST_REQUIRE_INTERACTIVE_ENVIRONMENT 来确保 CaptureScreenImage、OpenUrlInGuest 和 RunProgramInGuest 函数正常工作。”

此标志假定 VM 已在运行并且您已登录。

[http://www.vmware.com/support/developer/vix-api/vix16_reference/lang/com/functions/LoginInGuest.html](http://www.vmware.com/support/developer/vix-api/vix16_reference/lang/com/functions/LoginInGuest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T13:11:44.183

有一个框架可以做到这一点，您可以自由浏览其源代码： [RemoteInstall](https://github.com/dblock/remoteinstall)

# c# - 使用网络摄像头建立实时视频流

> ID：12335149
> 
> 赞同：-1
> 
> 时间：2012-09-08T23:01:22.833
> 
> 标签：c#, video-streaming, webcam, live

有一个“WebCam Station”是一个PC运行窗口，一个“主机（Windows服务器）”和人！我如何提供从“WebCam Station”到“Host”的实时视频流并对其进行管理，以便人们可以在他们的 PC 浏览器中观看它？而且我没有静态IP！我不需要完全控制视频。目标是在网页的框中播放流（如 youtube）。谢谢你抽出时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:43:46.323

有像***UStream*** ( [http://www.ustream.tv/](http://www.ustream.tv/) ) 这样的跨平台服务，允许您直接从您的网络摄像头（基于 Flash/启用）执行此类任务，它们还提供专有软件和/或网络工具，您可以根据自己的需要进行自定义，以增加主播在直播时的体验。

对于最终用户而言，您将能够收集一个纯 html 代码，您可以在服务器中或仅通过提供适当的 html 文件来提供该代码，我们将其称为“stream.html”。这样，您可以将其用作电子邮件的模板，以便直接从接收电子邮件的人的收件箱中查看您的内容，或者作为可以从他们最喜欢的网络浏览器下载和运行的附件（当然更新） .

如果用户打开电子邮件/文件并且您还没有开始广播，他们将收到一条“离线”消息，可以自定义该消息以提供您的徽标或其他任何内容。如果他们保持页面打开并且您突然开始广播，它将立即显示在最终用户的一侧。

***Qik***（*[由 Skype 提供支持](http://blogs.skype.com/en/2011/01/qik.html)* [http://qik.com/](http://qik.com/) ）观察到了相同的行为，它是一个适用于现代移动设备（如 iPhone/iPad 和基于 Android 的手机/平板电脑）的应用程序。

在这两种情况下，都允许单向通信，但通过一些编程技能（html/css），您可以构建双向通信系统。我确信，通过一些努力，它也可以实现多向化，但是有些服务（例如 google+）已经提供了这样的功能。

如果您需要进一步的帮助，请随时发表评论，如果您打开相关问题，请返回链接以继续为您提供支持。

祝你好运！

# jquery - Twitter-bootstrap：如何检查弹出框是否已经显示？

> ID：12335155
> 
> 赞同：6
> 
> 时间：2012-09-08T23:02:20.167
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, popover

我通过数据属性在下拉列表中创建了一个弹出框：

```
<select id="timezone_dropdown" data-content="This is the timezone" rel="popover" data-placement="bottom" data-original-title="Time Zone"> 
```

每当我点击一个链接按钮时，我想显示弹出框浮动在下拉菜单上。

```
<a class="btn timezone_help" href="#">Help</a> 
```

在javascript中我这样定义它：

```
$(document).ready(function () { 
     $('.timezone_help').click(show_timezone_help);     
})

function show_timezone_help(event){
    event.preventDefault(); 
    $('#timezone_dropdown').popover('show');
} 
```

这可以完成工作，但是当我再次单击该按钮时，它仍然停留在那里。有没有办法检查它是否已经打开并将其隐藏在函数中，还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T23:17:21.107

使用`.popover('toggle')`：

```
function show_timezone_help(event){
    event.preventDefault(); 
    $('#timezone_dropdown').popover('toggle');
}​ 
```

并将属性添加`data-trigger="manual"`到您的下拉列表中。

**[演示](http://jsfiddle.net/XkLpD/)**。

# wcf - 将 SSL 与 WP7、WCF 服务和 Azure 结合使用

> ID：12335156
> 
> 赞同：1
> 
> 时间：2012-09-08T23:02:24.830
> 
> 标签：wcf, windows-phone-7, ssl, azure, ssl-certificate

我正在尝试使用 SSL 证书连接到我的 azure WCF 服务。我已经看过一些关于更改 web.config 文件中的“绑定”属性的教程，但是我遵循的教程导致这是不可能的（据我所知）：

[http://www.silverlightshow.net/items/Producing-and-Consuming-OData-in-a-Silverlight-and-Windows-Phone-7-application-Part-4.aspx](http://www.silverlightshow.net/items/Producing-and-Consuming-OData-in-a-Silverlight-and-Windows-Phone-7-application-Part-4.aspx)

我的 Azure 数据库中的数据是使用我的 Azure 托管 WCF 服务公开的，目前，连接字符串包含敏感数据。

使用我的 SSL 证书（我最近购买了通配符 SSL 证书）我想从我的 WP7 应用程序连接到我的 Azure 托管 WCF 服务。

本质上，我正在寻找一些指导：

*   如何在我的 WP7 应用程序和我的 Azure 托管 WCF 服务之间设置 SSL 连接，以便只有应用程序的用户才能访问该服务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:51:43.307

你需要做几件事：

1.  将客户端（WP7）和服务器（WCF 服务）配置为[使用 basicHttpBinding 并将安全模式设置为 Transport](http://www.silverlightshow.net/items/Windows-Phone-7-Data-Access-Strategies-Security.aspx)。这将允许您使用 HTTPS 端点。

* * *

```
<system.serviceModel>    
   <bindings>
     <basicHttpBinding>
       <binding allowCookies="True">
         <security mode="Transport" />
       </binding>
     </basicHttpBinding>
   </bindings>
</system.serviceModel> 
```

1.  通过门户[将证书上传到您的云服务中。](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-create-and-deploy-a-cloud-service/)
2.  在 Web 角色（csdef 和 cscfg）中[添加引用证书（通过指纹）的 HTTPS 端点。](http://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/)
3.  [将 CNAME 映射到](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)与证书中定义的通配符域匹配的云应用地址。

# c++ - 类构造函数重载不起作用

> ID：12335158
> 
> 赞同：-2
> 
> 时间：2012-09-08T23:02:34.127
> 
> 标签：c++, visual-studio-2010

```
#include <iostream>

class Car{
public:
    Car(float newSpeed = 0, double newHP = 100);

protected:
    double HP;

private:
    float speed;
};

Car::Car(float newSpeed, double newHP)
{
    speed = newSpeed;
    HP = newHP;
}

#include <vector>

using namespace std;

int main(){
    Car car(10, 100);
    return(0);
} 
```

上面的代码编译时出现错误提示：“1>c:\users\aaron\documents\visual studio 2010\projects\ass3\ass3\main.cpp(9): error C2661: 'Car::Car' :没有重载函数需要 2 个参数”

我不确定为什么。我首先尝试使用 Car 构造函数的默认参数

```
Car::Car(float newSpeed = 0, double newHP = 100); 
```

但这也不起作用。

我已经为此工作了3天。任何帮助深表感谢。谢谢你。

编辑：以下建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:50:34.040

**（野猜警告）**

根据您在评论中的所有描述，这看起来像是您的计算机上某处有**另一个 car.h 文件的情况。**编译器正在找到那个。

由于您在 Windows 中，它也可能是 Car.h 或 CAR.H 等。

**编辑**

没有明确的解决方案，*“我将称之为解决。感谢您的所有帮助。-ngong0”*。

投票结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:11:57.843

如果这是你的 ctor

车（）;

那么你将无法成功给出两个论点

您需要创建一个带有两个参数的构造函数

class Car{ public: Car(int HP, float speed);

# php - 网站 URL：正在将页面定向到修改后的索引

> ID：12335160
> 
> 赞同：-2
> 
> 时间：2012-09-08T23:02:38.807
> 
> 标签：php, apache, .htaccess, mod-rewrite

抱歉标题很尴尬。这是怎么回事..如果我去：

*   URL.com/ # 我完美地看到了我的网站
*   URL.com/sagfasgfr # 我完美地看到了我的网站（url 中的随机噪音）
*   URL.com/sagfas/udsudfsa # 我得到了我的索引，但没有我的 CSS 样式（url 中的随机噪声 + 子噪声更多）

我已经配置了 HTACCESS：

```
ErrorDocument 404 http://URL.com
ErrorDocument 403 http://URL.com
ErrorDocument 500 http://URL.com

<IfModule mod_rewrite.c>

 Options +FollowSymlinks

 RewriteEngine On

</IfModule> 
```

我也想删除`.php`，但我的重写规则不起作用。**请告知**顺便说一下，本网站是一个注册表单，因此家庭以外的所有页面`DIR`都不应直接访问。

顺便说一句：BOX 是 APACHE，Linux

删除 .php 的重写规则导致内部服务器错误

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:51:43.623

为您的样式和其他 url 使用绝对链接，所以不要`style.css`使用`http://www.yourdomain.com/path/to/style.css`.

对所有其他网址执行此操作。

如果您需要将其定向到主页，请将其添加到您的页面上：

```
if ($_SERVER['REQUEST_URI'] != 'correcturi') {
header("Location: correcturi", 301);
exit();
} 
```

替换`correcturi`为您希望页面重定向到的 uri。

**更新：**我明白你的意思。由于它不存在，因此您正在将页面“重定向”到`url.com`. 但你必须记住。它不会重定向。它只会在相同的 url 上显示该页面。这就是上面两段代码派上用场的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:06:00.463

.htaccess 中的行不进行任何重写，您需要为此添加一些 RewriteRules。但是由于您声称随机 url 将您发送到您的站点，我想肯定有另一个 .htaccess （可能在父目录中）在此处执行实际重定向。

而且，css 没有显示，因为您可能在样式表 href 中使用相对于 webroot 的路径，所以当您在子目录中时，此路径不再有效

# java - SwingWorker 使用一张地图更新多个组合、列表、表格

> ID：12335165
> 
> 赞同：3
> 
> 时间：2012-09-08T23:03:43.957
> 
> 标签：java, swing, hashmap, swingworker

在解决了[上一个](https://stackoverflow.com/questions/12028016/swingworker-updating-multiple-comboboxes-in-multilpe-panels)问题之后，我可以用`SwingWorker`using one填充多个组合框`HashMap`。现在我想通过使用一个地图（如果可能的话）填充/更新包含在 gui 应用程序的不同面板中的多个组合框和列表和表。在 javadocs 中我看到了`DefaultListModel`和`DefaultComboBoxModel`extend `AbstractListModel`，所以我改变了 Map 从

```
Map<String, DefaultComboBoxModel> 
```

至

```
Map<String, AbstractListModel> 
```

然后将其传递给`SwingWorker`. 以下代码有效，它可以使用这张地图填充许多组合和列表。

SSCCE：

```
public class TestPanel extends JPanel {

    private final Map<String, AbstractListModel> map = new HashMap<String, AbstractListModel>();

    private TestPanel() {
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        JComboBox combo1 = new JComboBox();
        JComboBox combo2 = new JComboBox();
        JList list1 = new JList(new DefaultListModel());
        JList list2 = new JList(new DefaultListModel());
        add(combo1);
        add(combo2);
        add(new JLabel("LIST 1:"));
        add(list1);
        add(new JLabel("LIST 2:"));
        add(list2);
        map.put("ComboBox1", (DefaultComboBoxModel)combo1.getModel());
        map.put("ComboBox2", (DefaultComboBoxModel)combo2.getModel());
        map.put("List1", (DefaultListModel)list1.getModel());
        map.put("List2", (DefaultListModel)list2.getModel());
        new MyWorker(map).run();
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(new TestPanel());
                frame.setSize(200, 300);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    private class MyWorker extends SwingWorker<Void, Object[]> {
        private final int COMBO_BOX_MODEL = 1;
        private final int LIST_MODEL = 2;
        private final Map<String, AbstractListModel> map;

        public MyWorker(Map<String, AbstractListModel> map) {
            this.map = map;
        }

        @Override
        protected Void doInBackground() throws Exception {
            // just a random way to fill the combos and the lists
            for (int i = 0; i < 20; i++) {
                Object[] cell = new Object[3];
                if (i>=0 && i<=4) {
                    cell[0] = "ComboBox1";
                    cell[1] = COMBO_BOX_MODEL;
                } else if (i>=5 && i<=9) {
                    cell[0] = "ComboBox2";
                    cell[1] = COMBO_BOX_MODEL;
                } else if (i>=10 && i<=14) {
                    cell[0] = "List1";
                    cell[1] = LIST_MODEL;
                } else if (i>=15 && i<=20) {
                    cell[0] = "List2";
                    cell[1] = LIST_MODEL;
                }
                cell[2] = "value " + i;
                publish(cell);
            }
            return null;
        }

        @Override
        protected void process(List<Object[]> chunks) {
            for (Object[] chunk : chunks) {
                if (chunk[1] == Integer.valueOf(COMBO_BOX_MODEL)) {
                    DefaultComboBoxModel model = (DefaultComboBoxModel)map.get(chunk[0]);
                    model.addElement(chunk[2]);
                }
                else if (chunk[1] == Integer.valueOf(LIST_MODEL)) {
                    DefaultListModel model = (DefaultListModel)map.get(chunk[0]);
                    model.addElement(chunk[2]);
                }
            }
        }
    };

} 
```

问题 1：虽然上面的代码有效，但我不喜欢它的外观（尤其是`process()`方法中的检查）。有没有更好和/或更聪明的方法来完成整个事情？

问题 2：有没有办法`SwingWorker`通过使用一张地图来更新表格以及组合和列表？我找不到方法，因为`DefaultTableModel`扩展与地图使用的扩展`AbstractTableModel`不同。`AbstractListModel`

我希望我很清楚，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:22:40.567

1.  您的数据源无疑具有与 Java 不同的类型系统；将这些类型与 Java 类型匹配的代码不会更漂亮，但至少您已经将其封装起来。一个`enum`可能会有所帮助。

2.  是的，您可以通过委派默认实现来扩展`AbstractTableModel`和实现其他接口。[这里](https://stackoverflow.com/a/7572903/230513)有一个大纲。您必须确定这样的瓶颈在您的应用程序中是否有意义。

    ```
    public class SharedModel extends AbstractTableModel
        implements ComboBoxModel, ListModel 
    ```

附录：另一种方法是编写三个模型（`MyTableModel`, `MyListModel`, `MyComboBoxModel`），每个模型都引用一个公共数据模型。

> *您的意思是由三个模型实现的通用接口吗？*

是的，一个由类实现的接口，例如`ApplicationDataModel`，将数据库读入内部格式。然后，客户端模型可以请求`ApplicationDataModel`每个需要的数据来完成自己的接口契约。

# ruby-on-rails - 设计 - 不要使用电子邮件

> ID：12335167
> 
> 赞同：4
> 
> 时间：2012-09-08T23:03:55.593
> 
> 标签：ruby-on-rails, validation, devise, passwords

我希望设计身份验证使用登录而不是电子邮件并跳过电子邮件验证，但保留密码验证。这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:16:40.693

要更改 devise 用于身份验证的模型属性，您需要查看 devise.rb 文件中的“任何身份验证机制的配置”部分。你至少需要改变

```
config.authentication_keys = [ :email ] 
```

至

```
config.authentication_keys = [ :login ] 
```

你可能想改变

```
config.case_insensitive_keys = [ :email ] 
```

至

```
config.case_insensitive_keys = [ :login ] 
```

您还应该查看 apneadiving 提供的链接，因为它解释了如何在一个模型中进行这些更改，而不是为所有模型更改它（这就是更改 devise.rb 所做的）。

要更改设计用于验证电子邮件的正则表达式，您可以将 config.email_regexp 属性更改为您想要的任何内容 - 例如“。*”将允许任何人使用 ANYTHING 作为登录名，所以我不建议这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:10:59.573

一切都[在这里](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-with-something-other-than-their-email-address)解释，特别是如何摆脱电子邮件（见底部）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T23:29:16.867

正确答案在这里：http: [//jessewolgamott.com/blog/2011/12/08/the-one-where-devise-validations-are-customized/](http://jessewolgamott.com/blog/2011/12/08/the-one-where-devise-validations-are-customized/)

# objective-c - 找到匹配的 NSDictionary

> ID：12335168
> 
> 赞同：0
> 
> 时间：2012-09-08T23:04:07.653
> 
> 标签：objective-c, ios, xcode

我正在使用一个结构为带有字典的数组的 plist 来填充我的应用程序。plist 存储在包中。我对某些词典中的某些字符串进行了一些更改（例如拼写更正）。

`appDidFinishLaunchingWithOptions``copyPlist`如果 plist 不存在，则调用将其复制到文档目录。因此，如果 plist 确实存在，我需要检查每个字典中的一些字符串是否有更改，并替换这些字符串。

我做了两个`NSMutableArrays`：

```
if ([fileManager fileExistsAtPath: documentsDirectoryPath]) {
NSMutableArray *newObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:documentsDirectoryPath];
NSMutableArray *oldObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:bundlePath];

//Then arrange the dictionaries that match so some their strings can be compared to each other.
} 
```

如何安排匹配`NSDictionaries`以便可以比较他们的一些字符串？该`Name`字符串未更改，因此可用于识别匹配项。

代码示例或参考有用的教程或示例代码会很棒，因为我自己的研究并没有带来任何有用的东西，我真的需要纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:09:44.347

plist 可以像这样直接读入字典：

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

如果对两个 plist 执行此操作，则可以使用来自另一个 plist 的匹配键更新其中一个，如下所示：

```
- (void)updateDictionary:(NSMutableDictionary *)dictA withMatchingKeysFrom:(NSDictionary *)dictB {

    // go through all the keys in dictA, looking for cases where dictB contains the same key
    // if it does, dictB will have a non-nil value.  use that value to modify dictA

    for (NSString *keyA in [dictA allKeys]) {
        id valueB = [dictB valueForKey:keyA];
        if (valueB) {
            [dictA setValue:valueB forKey:keyA];
        }
    }
} 
```

在开始之前，您需要使更新的字典可变，如下所示：

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
NSMutableDictionary *dictA = [dict mutableCopy]; 
```

# php - 循环 OBJECT 并获取 key 和 value

> ID：12335170
> 
> 赞同：9
> 
> 时间：2012-09-08T23:04:26.390
> 
> 标签：php, arrays, object, loops

好的，我们开始吧。我希望我能正确解释这一点。

我有一个对象，我想循环获取键和值。这是我收到的对象的示例。提前感谢您的任何帮助或想法。

```
 Array
(
    [0] => stdClass Object
        (
            [id] => 93
            [RecordGUID] => 
            [txtEmplid] => 0134754
            [txtFname] => 
            [txtLname] => 
            [txtMname] => 
            [txtEmail] => 
            [txtSecEmail] => 
            [txtPhoneNo] => 4046565454
            [drpMajor] => 
            [drpStatus] => 
            [regmain] => 
            [chkDental] => 0
            [chkDO] => 
            [chkMD] => 
            [chkMDPHD] => 
            [chkNursin] => 
            [chkOPT] => 
            [chkPA] => 
            [chkPH] => 
            [chkPharm] => 
            [chkPOD] => 
            [chkPostBac] => 
            [chkVet] => 
        )

) 
```

我基本上需要遍历上述信息来获取键和值。例如：

```
id=93
RecordGUID=
txtEmplid=0134754 
```

等等。

再次，提前感谢任何答案。

DBF 的更新这是我使用您的代码片段时得到的结果：

```
int(0)
object(stdClass)#27 (24) {
  ["id"]=>
  string(2) "93"
  ["RecordGUID"]=>
  NULL
  ["txtEmplid"]=>
  string(7) "0134754"
  ["txtFname"]=>
  string(0) ""
  ["txtLname"]=>
  string(0) ""
  ["txtMname"]=>
  string(0) ""
  ["txtEmail"]=>
  string(0) ""
  ["txtSecEmail"]=>
  string(0) ""
  ["txtPhoneNo"]=>
  string(10) "4045506561"
  ["drpMajor"]=>
  NULL
  ["drpStatus"]=>
  NULL
  ["regmain"]=>
  NULL
  ["chkDental"]=>
  string(1) "0"
  ["chkDO"]=>
  NULL
  ["chkMD"]=>
  NULL
  ["chkMDPHD"]=>
  NULL
  ["chkNursin"]=>
  NULL
  ["chkOPT"]=>
  NULL
  ["chkPA"]=>
  NULL
  ["chkPH"]=>
  NULL
  ["chkPharm"]=>
  NULL
  ["chkPOD"]=>
  NULL
  ["chkPostBac"]=>
  NULL
  ["chkVet"]=>
  NULL
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-08T23:08:37.387

利用`get_object_vars ( object $object )`

```
$vars = get_object_vars ( $object );
foreach($vars as $key=>$value) {
  var_dump($key);
  var_dump($value);
} 
```

或者只是迭代对象本身

```
foreach($object as $key=>$value) {
  var_dump($key);
  var_dump($value);
} 
```

-- 编辑 2

在这里，您将在一行中拥有键和值

```
$string = "";
foreach($regs as $object) {
  foreach($object as $key=>$value) {
    $string += "{$key}={$value} ";
  }
}
echo $string; 
```

如果这不是你需要的，我一无所知..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:08:03.983

您可以遍历对象属性`foreach`

```
foreach($array as $key => $object)
    foreach($object as $property => $value)
        echo "{$property} : $value" . PHP_EOL; 
```

# c++ - 为什么在继承父级时需要“public：ParentClass”？

> ID：12335175
> 
> 赞同：0
> 
> 时间：2012-09-08T23:04:42.943
> 
> 标签：c++

据我了解，这是在 C++ 中进行子类化的唯一方法：

```
class ParentClass {
    ...
}

class ChildClass : public ParentClass {
    ...
} 
```

为什么需要“：public”？子类是否总是从父类继承所有公共和受保护的变量和方法？

我不确定为什么不能使用它：

```
class ChildClass : ParentClass { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:08:00.090

它不是必需的，尽管私有继承是一种代码味道，因为它不能完全反映 is-a 关系（继承也应该如此）。

```
class ChildClass : ParentClass 
```

相当于

```
class ChildClass : private ParentClass 
```

这并不意味着`ChildClass`只继承基类的私有成员，而是将它们的可访问性限制在指定的级别。这意味着继承基类的方法在派生类中变为私有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:11:39.240

如果你没有`public`那里，它将相当于以下内容：

```
class ChildClass : private ParentClass 
```

这是因为`class`s`private`默认具有访问权限。

此外，`private`和`protected`是`public`调用*访问说明符*。这与继承的内容无关，而是您可以在派生类中*访问的内容。*

如果你想有默认`public`继承，使用 a`struct`代替：

```
struct ChildClass : ParentClass 
```

以上等价于`struct ChildClass : public ParentClass`因为`struct`s`public`默认具有访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T23:08:19.273

C++ 还允许**受保护继承**和**私有继承**。

类默认为私有。结构默认为公共。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T23:08:58.653

您还可以拥有私有和受保护的继承。你在这里有什么

```
class ChildClass : ParentClass { 
```

将导致私有继承。

# java - 在不关闭整个程序的情况下处理窗口

> ID：12335185
> 
> 赞同：0
> 
> 时间：2012-09-08T23:08:11.430
> 
> 标签：java, swing, window, jframe

我又回来了：PI有这个程序可以打开一个窗口。有在新窗口中打开的选项菜单，我想要发生的是当我关闭选项窗口时，它不会关闭程序。我知道

```
setDefaultCloseOperation(); 
```

将关闭我的窗口，但我查看了文档并没有解决我的问题。任何人都可以提供帮助吗？谢谢 （：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T23:10:47.553

```
// different close actions are available, that do different things!
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

但另请参阅，[多个 JFrame 的使用：好的还是坏的做法？](https://stackoverflow.com/q/9554636/418556) 先睹为快，答案是：**Bad (bad, bad) practice。**

> ..（将）查看其他窗口管理器

我们在这里需要的不是“窗口”管理器，而是“视图”管理器。这些视图（例如面板中的每个视图）可能由对话框、选项窗格、弹出窗口、工具栏、布局管理器、（很少）其他框架或窗口管理。

您提到的内容似乎很适合在（可能是模态的）对话框中显示。

# mysql - SQL 查询 - 在字段中拆分字符串，展开行以使其包含子字符串

> ID：12335190
> 
> 赞同：1
> 
> 时间：2012-09-08T23:08:34.410
> 
> 标签：mysql, sql

> **可能重复：**
> [如何对 sql 表列进行拆分](https://stackoverflow.com/questions/12087885/how-to-do-a-split-on-a-sql-table-column)

我有一个以下 MySQL 表

```
(ID,my_string)
(1,"substrA,substrB,substrC")  
(2,"substrD,substrE")
... 
```

是否有一些语句可以将字符串拆分为单个子字符串（用逗号分隔）并将它们与相应的 ID 合并？

喜欢

```
(ID,substring)
(1,substrA)
(1,substrB)
(1,substrC) 
(2,substrD)
(2,substrE)  
... 
```

感谢您提前提供建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:20:06.000

核实：

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

# javascript - 使用多种图表类型和选项渲染到同一个容器

> ID：12335193
> 
> 赞同：1
> 
> 时间：2012-09-08T23:08:41.597
> 
> 标签：javascript, highcharts

根据所选图表类型（线/列/散点等），是否可以在一个渲染中具有多个选项设置？例如，我有两种图表类型：

```
var options = {
    chart: {
        renderTo: 'container',
        type: 'column',
    },
    title: {
        text: title
    },
    subtitle: {
        text: subtitle
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Percentage'
        }
    },
    legend: {
        layout: 'vertical',
        backgroundColor: '#FFFFFF',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 70,
        floating: true,
        shadow: true
    },
    tooltip: {
        formatter: function () {
            return Math.round(this.y * 100) + '%';
        }
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: []
}; 
```

和：

```
var options = {
    chart: {
        renderTo: 'container',
        type: 'line'
    },
    title: {
        text: title
    },
    subtitle: {
        text: subtitle
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Count'
        }
    },
    tooltip: {
        formatter: function () {
            var s = '';

            $.each(this.points, function (i, point) {
                s += point.series.name + ': ' + point.y + '<br/>';
            });
            return s;
        },
        shared: true
    }
},
legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'top',
    x: -10,
    y: 100,
    borderWidth: 0
},
series: []
}; 
```

是否可以将它们组合在一起作为一个`$(document).on("click", ".render-Chart", function () {...}`或`var chart`？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:29:12.660

我真的没有得到这个问题。但如果问题是，“有可能吗？” 那你为什么不直接尝试做呢。如果您尝试过但结果不如预期，请返回此处进行 jsFiddle 试用以及您的预期与实际行为。

如果您要问的是您是否有两个图表选项，一个用于线，另一个用于列，都指向同一个容器，并且基于某些单击或条件，您可能**想要绘制一条线或列，但不是两者都**可以很有可能。如果您担心在两个选项中都提到了相同的容器 id 会导致一些冲突，请注意选项本身只是存储数据/信息的变量，不会修改 DOM 或执行自己，它只是Highchart 的构造函数将这些作为参数并绘制图表，因此只要构造函数只被调用一次，您就应该安全地使用相同的容器 n 次，否则最新的构造函数的图表将被绘制到该容器。

```
var lineOptions = {
    chart: {
        type: 'line',
        renderTo: 'container',
        //...
    }
    //...
};

var columnOptions = {
    chart: {
        type: 'column',
        renderTo: 'container',
        //...
    }
    //...
};
//...
var chart;
function onClick(){
    if(...){
        chart = new Highcharts.StockChart(lineOptions);
    }else if(...){
        chart = new Highcharts.StockChart(columnOptions);
    }       
} 
```

# java - Java ufo 游戏中的碰撞检测

> ID：12335196
> 
> 赞同：0
> 
> 时间：2012-09-08T23:08:47.887
> 
> 标签：java, collision-detection, collision, stanford-nlp

我有一个简单的 Java 游戏，您可以在其中向移动的目标发射子弹。这两个对象都是 GRects。我有碰撞检测，可以检查 ufo 和子弹何时相互交叉，但奇怪的是：

这有效：

```
private void collideWithUFO() { 
    if (bullet != null) {
        GObject collObj = getElementAt(ufo.getX(), ufo.getY()); 
        if (collObj == bullet) {
            remove(ufo); 
            remove(bullet); 
            ufo = null; 
            bullet = null;
        }
     }
} 
```

..但是如果我将`getElementAt`项目符号更改为如下所示，并检查 ufo，它无法检测到碰撞：

```
private void collideWithUFO() { 
    if (bullet != null) {
        GObject collObj = getElementAt(bullet.getX(), bullet.getY()); 
        if (collObj == ufo) {
            remove(ufo); 
            remove(bullet); 
            ufo = null; 
            bullet = null;
        }
     }
 } 
```

我是否先选择 ufo 或子弹应该无关紧要，但显然不是。现在这里有一些更奇怪的东西。如果我将子弹从 GRect 更改为 GOval，突然之间第二种形式的碰撞检测就起作用了。我是一个 Java 菜鸟，所以请让我知道这种行为是否有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:14:44.007

```
public GObject getElementAt(double x, double y)

Returns the topmost graphical object that contains the point (x, y), or null if no such object exists. 
```

因此`getElementAt(bullet.getX(), bullet.getY())`，如果 ufo 是最顶层的图形元素，只会给你 ufo，否则你会得到子弹。

# c++ - Windows下C++代码同步API失败

> ID：12335200
> 
> 赞同：1
> 
> 时间：2012-09-08T23:09:15.360
> 
> 标签：c++, winapi, synchronization

如果我像这样定义模板结构：

```
template <typename T> 
struct SYNCHED_DATA
{
    SYNCHED_DATA()
    {
        hMutex = ::CreateMutex(NULL, FALSE, NULL);
    }
    ~SYNCHED_DATA()
    {
        if(hMutex)
            CloseHandle(hMutex);
        hMutex = NULL;
    }

    void set(T* pV)
    {
        if(pV)
        {
            ::WaitForSingleObject(hMutex, INFINITE);
            var = *pV;
            ::ReleaseMutex(hMutex);
        }
    }
    void get(T* pV)
    {
        if(pV)
        {
            ::WaitForSingleObject(hMutex, INFINITE);
            *pV = var;
            ::ReleaseMutex(hMutex);
        }
    }

private:
    HANDLE hMutex;
    T var;

    SYNCHED_DATA(const SYNCHED_DATA& s)
    {
    }
    SYNCHED_DATA& operator = (const SYNCHED_DATA& s)
    {
    }
}; 
```

我可以确定那些 WaitForSingleObject() API 将始终返回 WAIT_OBJECT_0 吗？如果不是，在什么情况下他们会失败，我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:29:29.250

The Old New Thing 有一篇关于如何在等待成功之前关闭句柄将导致`WAIT_ABANDONED`任何人等待的文章：

[http://blogs.msdn.com/b/oldnewthing/archive/2005/09/12/463977.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/09/12/463977.aspx)

`WAIT_FAILED`在这个网站上有一些讨论：

[为什么 WaitForSingleObject 会返回 WAIT_FAILED](https://stackoverflow.com/questions/210751/why-would-waitforsingleobject-return-wait-failed)

这些表明即使无限超时，也有可能失败。

# android - 如何将位图图像保存在 sdcard 的 jpeg 上？

> ID：12335211
> 
> 赞同：2
> 
> 时间：2012-09-08T23:10:53.577
> 
> 标签：android, image, bitmap, save, jpeg

我正在尝试编写一个应用程序以从图库中获取图像然后对其进行一些效果，并且在显示图像后，我想将其保存为 SdCard 中的 JPG。可以请告诉我如何将图像保存在 sdcard 上，我应该将保存代码放在哪里？这是我要保存的地方，点击button2后：

```
public void onClick(View arg0) {
                    Bitmap yourimage;
                    yourimage=toGrayscale(yourSelectedImage);
                    ImageButton effected=(ImageButton)findViewById(R.id.imageButton2);
                    int width = 150;
                    int height =150; 
                    Bitmap resizedbitmap=Bitmap.createScaledBitmap(yourimage, width, height, true);
                    effected.setImageBitmap(resizedbitmap);
} 
```

我的意思是在将图像设置为**resizedbitmap**后，我想将其保存在 sdcard 中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T23:25:23.517

基本上就是这样

```
Bitmap bmp = createBitmap();
OutputStream stream = new FileOutputStream("/sdcard/test.jpg");
bmp.compress(CompressFormat.JPEG, 100, stream); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-16T05:47:11.267

```
**This Code Cover the Following Topics**

1\. Save a bitmap Image on sdcard a jpeg
2\. Create a folder on sdcard
3\. Create every file Separate name
4\. Every file save with date and time
5\. Resize the image in very small size
6\. Best thing image Quality fine not effected from Resizing

The following method is used to create an image file using the bitmap 
```

公共无效createImageFromBitmap（位图bmp）{

```
 FileOutputStream fileOutputStream = null;
    try {

        // create a File object for the parent directory
        File wallpaperDirectory = new File("/sdcard/Capture/");
        // have the object build the directory structure, if needed.
        wallpaperDirectory.mkdirs();

        //Capture is folder name and file name with date and time
        fileOutputStream = new FileOutputStream(String.format(
                "/sdcard/Capture/%d.jpg",
                System.currentTimeMillis()));

        // Here we Resize the Image ...
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.JPEG, 100,
                byteArrayOutputStream); // bm is the bitmap object
        byte[] bsResized = byteArrayOutputStream.toByteArray();

        fileOutputStream.write(bsResized);
        fileOutputStream.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
    }
}

   and add this in manifest

 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T20:47:25.710

如果您有一个 bitmpa 格式的图像，例如，如果您拍摄应用程序的屏幕截图，并且现在您想将该位图图像对象存储为“jpg”格式的 sdcard 中的图像文件，那么使用这几行代码，希望你能得到你的答案。

//----------- 将图像文件以图像文件名存储在 sdcard 中..-------

```
 OutputStream fOut = null;
 File file = new File("sdcard/pir_fahim_shah.jpg");
     try
     {
        fOut = new FileOutputStream(file);
         b.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
         try 
         {
            fOut.flush();
             fOut.close();
          }
         catch (IOException e) 
        {   e.printStackTrace();  }
        } catch (FileNotFoundException e) 
          {     e.printStackTrace();    }

 try {
  MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
} 
 catch (FileNotFoundException e) 
{     e.printStackTrace();   } 
```

# c# - 如何将 C# 中的日期字符串变量与 sql 查询中的日期时间字段进行比较

> ID：12335213
> 
> 赞同：2
> 
> 时间：2012-09-08T23:11:08.323
> 
> 标签：c#, sql, datetime

我有以下代码，我正在尝试将日期字符串与日期时间进行比较，但我无法让它工作。这不会输出任何行。

```
DataTable tbl3 = dii.SelectGeneric("select * from widget_messages  where convert(datetime, m_date) ='" + String.Format("{0:d/M/yyyy}", DateUsed) + "'"); 
```

两个日期时间的格式完全相同。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:18:31.307

您正在转换`m_date`to`datetime`但`DateUsed`仍然是一个字符串。

您应该将它们作为字符串进行比较，如下所示

```
DataTable tbl3 = dii.SelectGeneric("select * from widget_messages  where m_date ='" + String.Format("{0:d/M/yyyy}", DateUsed) + "'"); 
```

或作为日期时间，像这样：

```
DataTable tbl3 = dii.SelectGeneric("select * from widget_messages  where convert(datetime, m_date) = convert(datetime,'" + String.Format("{0:d/M/yyyy}", DateUsed) + "')"); 
```

编辑：在 SQL Server 2005 上试试这个：

```
DataTable tbl3 = dii.SelectGeneric("select * from widget_messages  where abs(datediff(day,convert(datetime, m_date), convert(datetime,'" + String.Format("{0:d/M/yyyy}", DateUsed) + "'))) = 0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:05:54.787

如果 m_date 字段是 Date/DateTime 类型，则以下代码可以正常工作。

```
DataTable tbl3 = dii.SelectGeneric("select * from widget_messages  where convert(varchar, m_date, 12) ='" + String.Format("{0:yyyyMMdd}", DateUsed) + "'"); 
```

# php - 使用 jQuery 在同一页面上显示表单并获取输入

> ID：12335217
> 
> 赞同：1
> 
> 时间：2012-09-08T23:11:47.887
> 
> 标签：php, jquery, html

因此，我将尝试描述我正在尝试制作的内容。

一个表格应该出现在顶部。只有一个输入和一个提交按钮。当您单击提交时，应该会出现一个带有结果的弹出窗口。

这是我的代码：

```
<html>
    <head>

        <script type="text/javascript">
            $(document).ready(function(){
                $(".show").click(function(){
                $("#popup").fadeIn();
                return false; 
                });
            });
        </script>
    </head>

    <body>    
        <form action="<?php echo $_SERVER['PHP_SELF'];?>" method="post">
            Number: <input type="number" name="number" />
            <input class="show" type="submit" name="submit" />
        </form>

        <div id="popup">    
            <?php
                if(isset($_POST["number"])) {
                    echo $_POST["number"];
                }
            ?>
              <a id="iks">Close</a>
        </div>
    </body>
</html> 
```

（我删除了一部分以使其更小，但有一些`<head>`样式说明）`display:none;``#popup`

问题是它不会更新：它保持不变。弹出窗口有效，但无论我输入什么，它总是给出相同的数字。

我尝试不使用 jQuery，它可以工作，所以它与 php/html 无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:16:00.270

你`.show`是一个提交按钮，但你`return false;`在点击事件中（有效地停止提交，因此不会出现新值）。

我要么将 绑定`show`到一个新按钮，要么使用 AJAX 提交值并在`#popup`返回后显示结果。

* * *

为了冗余和进一步解释，这里有一个[工作示例](http://jsfiddle.net/8UMh8/3/)以及代码：

首先，将其添加到当前 PHP 文件的顶部：

```
<?php
  // check if a value is being submitted
  if (isset($_REQUEST['number'])){
    // there is one, output it then exit PHP (so we don't output the
    // rest of the page--an ajax call only needs the response, not
    // the layout)
    echo $_REQUEST['number'];
    exit;
  }
?> 
```

*请注意，我不检查有效值，也不检查它来自哪个方法。这使您能够更改`method="POST"`并`method="GET"`让示例仍然有效。否则，您可能希望坚持使用`$_POST[]`超全局并验证输入。*

现在，修改您`<script></script>`以使用以下内容而不是您拥有的内容：

```
$(document).ready(function(){

// we want to trigger this function when the form's submitted
$('form').on('submit',function(e){
     // store the form element
     var $form = $(this);

     // make an AJAX call to the action of the form
     // using the method supplied.
     $.ajax({
         'type': $form.prop('method'),
         'url': $form.prop('action'),
         'data': $form.serialize(), // send the value of "number"
         'dataType': 'html',
         'success': function(html){
            // we now have the value back, let's add it to the #popup
            // element, add a close button and then fade both in.
            $('#popup').html(html).append(
                $('<a>',{'href':'#','html':'Close','id':'iks'}).on('click',function(e){
                     $(this).parent().fadeOut();
                })
            ).fadeIn();
        }
    });
    // prevent the form from submitting the traditional way
    e.preventDefault();
});

}); 
```

因为上面利用了表单指定的内容（在`action`和`method`属性中），所以不需要太多自定义。现在它将使用 AJAX POST/GET 数字输入中的值，因为我们添加了 PHP 代码，该数字将被重新输出并且`success`函数将接收它，将其添加到`#popup`元素（以及关闭按钮）和淡入淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:11:23.607

您将客户端代码与服务器端代码混合在一起。您的所有 PHP 在您的任何 JavaScript 之前运行。一旦 JavaScript 开始运行，PHP 早就完成了，不会在这个页面上做更多的事情。

您必须将 Web 开发视为一种元编程。即生成软件的软件。您的 PHP 是在您的服务器上运行并生成要在浏览器中运行的代码的代码。您的 PHP 会为每个 HTTP Web 请求运行一次。您的 JavaScript 是根据浏览器中发生的事情运行的。您的 JavaScript 对 Web 请求或服务器一无所知。它只知道它所在的页面、浏览器、DOM。同样，PHP 对浏览器或 JavaScript 在做什么一无所知。JavaScript 和 PHP 完全独立运行，没有交互。

也就是说，直到您引入 AJAX。AJAX 风格的编程提供了一种让 JavaScript 与 PHP 对话的机制。

创建一个专门用于处理 AJAX 请求的 PHP 页面。您需要一个单独的页面，因为您不会返回完整的 html 页面，而只是返回少量数据，可能是 html，但通常是 JSON，或者 XML。

如果您的 Ajax 处理程序 PHP 页面如下所示：

AjaxHandler.php

```
<?php 
    if(isset($_POST["number"])) { 
        echo $_POST["number"]; 
    } 
?> 
```

然后你可以像这样对你的 JavaScript 进行 ajax 化：

```
$(".show").click(function(){ 
    $.post("ajaxHandler.php", { number: $("input[name=number]").val() }, function (response) {
        $("#popup").text(response).fadeIn(); 
    });
    return false;  
}); 
```

此代码发出一个 http 请求，发布`number=[n]`到 ajaxHandler.php。响应将提供给回调函数，以便根据需要使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T23:31:55.100

好吧，你做错了。除了显示弹出窗口外，您还需要向 PHP 脚本发送 AJAX 请求，等待结果，然后在弹出窗口中显示。所以总结一下你需要的是 - 一个 php 脚本和一个 html 文件。它可能看起来像

**ajax.php**

```
<?php
if (isset($_POST['number'])){
    echo $_POST['number'];
} 
```

**表单.html**

```
<html>
<head>
<script type="text/javascript">
    $(document).ready(function(){
        $('#form').on('submit',function(e){
            e.preventDefault();
            $.post('ajax.php', $(this).serialize(), function(response){
                $('#result').html(response);
                $('#popup').fadeIn();
            }
        });
    });
</script>
</head>
<body>

<form id="form" method="post">
    Number: <input type="number" name="number" />
    <input class="show" type="submit" name="submit" />
</form>

<div id="popup">
  <div id="result"></div>
  <a id="iks">Close</a>
</div>
</body>
</html> 
```

# pdf - 打开受密码保护的 PDF

> ID：12335219
> 
> 赞同：0
> 
> 时间：2012-09-08T23:12:30.767
> 
> 标签：pdf, passwords, password-protection

我创建了一个受密码保护的 PDF。前几天在我的电脑上找到的。现在我不记得密码了，我真的需要打开这个文件。我尝试了一些受密码保护的删除软件，但仍然没有。它总是要求输入密码。我有没有机会找到阅读其内容的解决方案？

谢谢

# java - x = - x 在Java中，它是做什么的？

> ID：12335221
> 
> 赞同：-8
> 
> 时间：2012-09-08T23:12:39.303
> 
> 标签：java, integer, operators

```
x = - x 
```

我知道......这个问题很简单，但我第一次在 Java 中看到这种语法——没有任何解释它是如何工作的，它到底是做什么的？它只是将值更改为负数还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:15:05.230

对于某些数字类型（为其`-`定义了一元运算符），这会反转值的符号，将负数变为正数，将正数变为负数......但当数字处于其各自类型的限制时除外范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:14:40.343

这里没有魔法：它只是将负值变为正值，将正值变为负值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T23:14:56.423

如果 `x`是整数、双精度或其他`-x`有意义的类型，则将 的值设置`x`为`-x`。

如果`x`是`5`，则设置`x`为`-5`。如果`x`是`1.1`，则设置`x`为`-1.1`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T23:15:11.740

是的，假设 x 被定义为保持负值。否则会抛出异常或导致编译时错误。

# javascript - 设置超时和 V8

> ID：12335222
> 
> 赞同：10
> 
> 时间：2012-09-08T23:12:52.297
> 
> 标签：javascript, v8

我已经独立安装了 V8 并执行这样的 javascript 代码：`./d8 source.js`. 当我使用 setTimeout 时，我收到`ReferenceError: setTimeout is not defined`. 这是应该的吗？是否有可能以某种方式包含此功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T10:43:34.480

`setTimeout`不是 ECMA-262 的一部分，它是由浏览器实现的。但是，如果您安装[Node.js](http://nodejs.org)（即 V8 + extras），您将获得一个命令行`setTimeout`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-22T17:58:44.663

对于它的价值，V8`setTimeout`现在（大约 7.5 年后）在它提供的 shell 中拥有自己的东西。但是它只需要一个参数（要调用的函数）并安排在当前作业完成后调用它，大致就像您将第二个参数作为第二个参数传递给浏览器和 Node.js 提供`0`的更熟悉的形式一样。`setTiemout`

所以给出`example.js`：

```
console.log("a");
setTimeout(() => {
    console.log("c");
}, 5000);
console.log("b"); 
```

然后

```
$ v8 example.js

```

输出

```
一种
b
C

```

...在`b`和之间没有明显的延迟`c`。

（该示例使用由[jsvu](https://github.com/GoogleChromeLabs/jsvu)`v8`安装的命令，这至少是您直接在 V8 中运行代码的一种方式。我认为已被包含...）`d8`

# java - 下拉和内容的布局

> ID：12335223
> 
> 赞同：0
> 
> 时间：2012-09-08T23:12:57.243
> 
> 标签：java, swing, awt, layout-manager

我有一个摆动窗口。在顶部，我有一个基于下拉值选择的下拉列表，具体内容应该显示。

哪个是最好的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:18:47.023

您的问题表明您对 swing 不是很熟悉，所以我建议使用默认布局，即[FlowLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#flow)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:21:58.767

Swing 窗口应该有边框布局。对于 North 约束，您应该将组合框包装到一个简单的 JPanel 中，该 JPanel 具有 FlowLayout。根据 ComboBox 的更改，您将更改 Swing 窗口的中心。请参阅[http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html上的示例代码](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

您将在组合框操作中需要此代码：

```
button = new JButton("Button 2 (CENTER)");
button.setPreferredSize(new Dimension(200, 100));
pane.add(button, BorderLayout.CENTER); 
```

我希望它有所帮助。

# objective-c - NSView 只在断点处重绘

> ID：12335236
> 
> 赞同：0
> 
> 时间：2012-09-08T23:15:55.867
> 
> 标签：objective-c, macos, cocoa

我在`NSPopover`. 它应该根据用户输入进行更改，并且它会在用户第一次与之交互时进行，但在以下时间重绘失败。

我试图`NSLog`在方法内部放置一个`-drawRect:`，但在正常执行期间它不会被调用。当我尝试调试并在方法中放置断点时，它会正常调用并且应用程序可以正常工作。

`-setNeedsDisplay:`每次需要重绘时，我都会显式调用视图方法。我不明白为什么它应该有所作为。

这是更新视图状态的代码。这些方法是`NSTextField`委托方法的一部分，`-textDidChange:`我检查了每次用户在与弹出框关联的文本字段中键入内容时都会调用这些方法。

```
[tokenCloud tokensToHighlight:[NSArray arrayWithObject:completeSuggestionString]];
tokenCloud.tokens = filteredTokens;
[tokenCloud setNeedsDisplay:YES]; 
```

视图是一系列凹进的按钮。第一行更新弹出框中所有按钮的状态，第二行更新添加或删除按钮。它们都可以正常工作，因为第一次调用视图时会正确更新。我还检查了按钮的状态`tokenCloud`及其属性`tokens`是否正确更新。问题是`NSView`子类`tokenCloud`不会重绘，因此更改不会第二次反映在 UI 中。

这是视图的绘制方法：

```
- (void)drawRect:(NSRect)rect {
    [self recalculateButtonLocations];
    NSLog(@"Redrawn");
} 
```

如果我在`[self recalculateButtonLocations];`. 相反，如果我让应用程序正常运行，那么在我第二次更新视图时，控制台中不会记录任何内容。如果我`NSLog`在`recalculateButtonLocations`方法中包含同样的事情，第二次没有记录任何内容，这意味着没有调用该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:11:16.957

**EDIT2：对于未来的读者，很抱歉这个答案质量低下。其中大部分是无用的，有用的部分应该作为评论。我会删除它，但我觉得那是不诚实的。希望任何有这个问题的人都可以在链接的答案中找到更多的见解，其中确实包含一些关于为什么有时添加断点会改变程序流程的信息。**

根据您绘制按钮的方式，使用`layoutSubviews`and可能`setNeedsLayout`比`drawRect`重新定位子视图更好。*[编辑：没有看到这是针对 Mac OS 而不是 iOS。`layout`确实相当于 layoutSubviews 并且有一个`setNeedsLayout`for `NSView`，应该在其中进行子视图排列。]*

如果没有更多信息，无法提供更多建议。然而，它与断点一起工作的事实很奇怪。我看不出为什么在方法调用行上设置断点会导致它被更频繁地调用。无论是否有断点，都应该调用该方法，并且似乎无法仅使用上述代码复制此错误...使我认为这是您的代码中的其他内容导致了此问题。

* * *

关于断点更改代码流的一些类似问题。也许以断点以外的方式休眠代码/添加暂停，看看它是否有效？如果确实如此，则可能表明存在以下问题之一。

> 断点改变代码工作方式的第一大原因是竞争条件。它基本上是这样的：
> 
> ```
> Without breakpoints:
>     make some asynchronous request
>     do something with response
>     ERROR because request hasn't responded yet
> 
> With breakpoints:
>     send some asynchronous request
>     wait for user to continue
>     response arrived while waiting for the continue
>     do something with response
>     OK! 
> ```

^Niet the Dark Absol from [Breakpoint 改变程序流程](https://stackoverflow.com/questions/12083526/breakpoint-changes-program-flow)

> 我以前见过这种情况，我的猜测是事件发布得太快，系统无法处理（因为它实际上只需要处理不超过每秒 20 个关键事件）。我猜想加入类似 usleep(100000) 的东西（将线程暂停 1/10 秒）会有很大帮助。

^来自[CGKeyEvent Pasting 的 Dave DeLong 使用断点，但并非没有](https://stackoverflow.com/questions/6239140/cgkeyevent-pasting-working-with-breakpoints-but-not-without)

> 一般表示竞态条件；您的代码取决于线程 A 在线程 B 达到某个特定状态之前是否完成某些事情。

^bbum 来自[EXC_BAD_ACCESS，但不是在使用断点时](https://stackoverflow.com/questions/11569241/exc-bad-access-but-not-when-using-breakpoints)

# redis - 查找与前缀匹配的所有键并在 Redis 中检索它们的值

> ID：12335238
> 
> 赞同：3
> 
> 时间：2012-09-08T23:16:03.513
> 
> 标签：redis

我有一堆以下模式的键：

```
config:id:attr 
```

现在我想通过首先找到所有以 开头的键`config:`，然后检索它们的关联值来读取所有配置。

这样做的有效方法是什么？

注意：`keys()`方法可以完成工作，但不建议用于生产用途。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:11:13.417

不建议在生产中使用 Keys，因为它是 O(N)，其中 N 是 redis 实例中的键数。如果您没有很多配置值，则使用键是合理的。但是，它的可扩展性不是很高，我不推荐它。

我的解决方案是将所有配置键名称存储在 redis 的另一个列表中。当您添加新的配置值时，也只需插入到列表中。

另一个合理的选择是将所有配置值存储在一个哈希中，例如：

```
config => { "id:attr" => value } 
```

然后，您可以通过调用 hkeys('config') 来获取所有配置键。

# haskell - 为什么捕获异常是非纯的，但抛出异常是纯的？

> ID：12335245
> 
> 赞同：45
> 
> 时间：2012-09-08T23:17:12.123
> 
> 标签：haskell, exception-handling, functional-programming, purely-functional

在 Haskell 中，您可以从纯函数代码中抛出异常，但您只能在 IO 代码中捕获。

*   为什么？
*   你能在其他情况下捕捉还是只捕捉 IO monad？
*   其他纯函数式语言如何处理它？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-10T05:12:09.273

因为在函数内部*抛出*异常不会使函数的结果依赖于除参数值和函数定义之外的任何东西；函数保持纯净。OTOH在函数内部*捕获*异常*确实*（或至少可以）使该函数不再是纯函数。

我将研究两种例外情况。第一个是不确定的；此类异常在运行时出现不可预测，包括内存不足错误。这些异常的存在不包括在可能生成它们的函数的*含义中。*它们只是我们必须处理的一个令人不快的生活事实，因为我们在现实世界中拥有实际的物理机器，它们并不总是与我们用来帮助​​我们对其进行编程的抽象相匹配。

如果函数抛出这样的异常，则意味着对函数求值的一次特定尝试未能产生值。这并不一定意味着函数的结果是未定义的（在这次调用它的参数上），但系统无法产生结果。

如果您可以在纯调用者中捕获此类异常，则可以执行以下操作：当子计算成功完成时返回一个（非底部）值，当内存耗尽时返回另一个值。作为纯函数，这没有意义。函数调用计算的值应该由其参数的值和函数的定义唯一确定。能够根据子计算是否内存不足返回不同的东西，这使得返回值取决于其他东西（物理机器上有多少内存可用，其他程序正在运行，操作系统及其策略等.); 根据定义，可以以这种方式运行的函数不是纯粹的，并且不能（通常）存在于 Haskell 中。

由于纯粹的操作失败，我们必须允许评估一个函数可能会产生底部，而不是它“应该”产生的值。这并没有完全破坏我们对 Haskell 程序的语义解释，因为我们知道底部也会导致所有调用者产生底部（除非他们不需要应该计算的值，但在这种情况下非严格评估意味着系统永远不会尝试评估此功能并失败）。这听起来很糟糕，但是当我们将计算放在`IO`monad 中时，我们可以安全地捕获此类异常。`IO`monad中的值*是*允许依赖程序“外部”的东西；事实上，它们可以根据世界上的任何事物来改变它们的值（这就是为什么对`IO`值的一种常见解释是它们好像被传递给了整个宇宙的表示）。因此，`IO`如果一个纯子计算内存不足，一个值有一个结果，如果没有，另一个结果是完全可以的。

* * *

但是*确定性*异常呢？在这里，我谈论的是在对特定参数集评估特定函数时*总是抛出的异常。*此类异常包括被零除错误，以及从纯函数显式抛出的任何异常（因为它的结果只能取决于它的参数和它的定义，如果它评估为一个 throw 一旦它*总是*评估为相同的 throw对于相同的论点[1]）。

看起来这类异常*应该*可以在纯代码中捕获。毕竟，`1 / 0`just的值**是**被零除的错误。如果一个函数可以有不同的结果，这取决于子计算是否通过检查它是否传入零来评估被零除错误，为什么它不能通过检查结果是否是被除数来做到这一点-零错误？

在这里，我们回到 larsmans 在评论中提出的观点。如果一个纯函数可以观察到它是从*哪个*异常中得到的`throw ex1 + throw ex2`，那么它的结果就取决于执行的顺序。但这取决于运行时系统，可以想象它甚至可以在同一系统的两个不同执行之间发生变化。也许我们有一些先进的自动并行实现，它在每次执行时尝试不同的并行化策略，以便尝试在多次运行中收敛到最佳策略。这将使异常捕获功能的结果取决于所使用的策略、机器中的 CPU 数量、机器上的负载、操作系统及其调度策略等。

同样，纯函数的*定义*是只有通过其参数（及其定义）进入函数的信息才会影响其结果。在非`IO`函数的情况下，影响抛出异常的信息不会通过其参数或定义进入函数，因此它不会对结果产生影响。但是`IO`monad 中的计算隐含地被允许依赖于整个宇宙的任何细节，所以在那里捕捉这样的异常是很好的。

* * *

至于你的第二个点：不，其他单子不能用于捕获异常。所有相同的论点都适用；计算产生`Maybe x`或`[y]`不应该依赖于它们的参数之外的任何东西，并且捕获任何类型的异常“泄漏”关于那些不包含在这些函数参数中的事物的各种细节。

请记住，单子并没有什么特别之处。它们的工作方式与 Haskell 的其他部分没有任何不同。monad 类型类是在普通的 Haskell 代码中定义的，几乎所有的 monad 实现都是如此。*适用于普通 Haskell 代码的所有*相同规则都适用于所有 monad。它`IO`本身是特别的，而不是它是一个单子的事实。

* * *

至于其他纯语言如何处理异常捕获，我所体验过的唯一具有*强制纯洁性的其他语言是 Mercury。 [2]* Mercury 的做法与 Haskell 略有不同，您*可以*在纯代码中捕获异常。

Mercury 是一种逻辑编程语言，因此 Mercury 程序不是基于函数构建的，而是*基于谓词*构建的；对谓词的调用可以有零个、一个或多个解决方案（如果您熟悉在 list monad 中进行编程以获得不确定性，这有点像整个语言都在 list monad 中）。在操作上，Mercury 执行使用回溯递归枚举谓词的所有可能解决方案，但非确定性谓词的语义是它只是*具有*每组输入参数的一组解决方案，而不是为每组输入参数计算单个结果值的 Haskell 函数。与 Haskell 一样，Mercury 是纯的（包括 I/O，尽管它使用了稍微不同的机制），因此对谓词的每次调用都必须唯一地确定单个*解集*，这仅取决于参数和谓词的定义。

Mercury 跟踪每个谓词的“确定性”。总是导致恰好一个解决方案的谓词被称为`det`（确定性的缩写）。产生*至少*一种解决方案的那些称为`multi`. 还有一些其他的确定性类，但它们在这里不相关。

用块捕获异常`try`（或通过显式调用实现它的高阶谓词）具有确定性`cc_multi`。cc 代表“承诺的选择”。这意味着“这个计算至少有一个解决方案，并且在操作上程序只会得到其中一个”。这是因为运行子计算并查看它是否产生异常有一个解决方案集，该解决方案集是子计算的“正常”解决方案加上它可能抛出的所有可能异常的集合。由于“所有可能的异常”包括所有可能的运行时故障，其中大部分都不会真正发生，因此无法完全实现此解决方案集。那里'`try`块，所以它只是给你**一个**解决方案（要么是一个正常的解决方案，要么是一个指示所有可能性都被探索并且没有解决方案或异常，或者碰巧出现的第一个异常）。

因为编译器会跟踪确定性，所以它不允许您`try`在完整解决方案集很重要的上下文中调用。您不能使用它来生成所有没有遇到异常的解决方案，例如，因为编译器会抱怨它需要`cc_multi`调用的所有解决方案，而这只会产生一个。但是，您也不能从`det`谓词中调用它，因为编译器会抱怨`det`谓词（应该只有一个解决方案）正在`cc_multi`调用，它将有多个解决方案（我们只会知道什么其中之一是）。

那么这到底有什么用呢？好吧，您可以将`main`（以及它调用的其他东西，如果有用的话）声明为`cc_multi`，并且它们可以毫无问题地调用`try`。这意味着*整个程序*理论上有多个“解决方案”，但运行它会产生**一个**解决方案。这允许您编写一个程序，当它碰巧在某个时候耗尽内存时，它的行为会有所不同。但它不会破坏声明性语义，因为它本应使用更多可用内存计算的“真实”结果仍在*解决*方案集中（就像程序实际执行时内存不足异常仍在解决方案集中一样计算一个值），只是我们最终只能得到一个任意的解决方案。

重要的是`det`（只有一种解决方案）与`cc_multi`（有多种解决方案，但您只能拥有其中一种）不同的处理方式。与在 Haskell 中捕获异常的推理类似，异常捕获不能允许在非“承诺选择”上下文中发生，或者您可以获得纯谓词，根据来自现实世界的信息产生不同的解决方案集，它们应该t 有权访问。的`cc_multi`确定性`try`允许我们编写程序*，就好像*它们产生了一个无限的解决方案集（大部分充满了不太可能的异常的次要变体），并阻止我们编写实际上需要多个解决方案的程序。 [3]

* * *

[1] 除非评估它首先遇到不确定性错误。现实生活很痛苦。

[2] 仅鼓励程序员使用纯度而不强制执行的语言（例如 Scala）往往只会让您在任何地方捕获异常，就像它们允许您在任何地方进行 I/O 一样。

[3] 请注意，“承诺选择”概念并不是 Mercury 处理纯 I/O 的方式。为此，Mercury 使用独特的类型，它与“承诺选择”确定性类正交。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-09T06:19:44.743

delnan 在评论中提到的[论文，以及对](http://research.microsoft.com/en-us/um/people/simonpj/Papers/marktoberdorf/)[前一个问题](https://stackoverflow.com/questions/3642793/why-can-haskell-exceptions-only-be-caught-inside-the-io-monad)的答案，当然为仅在`IO`.

但是，我也可以理解为什么诸如观察评估顺序或打破单调性之类的原因在直觉层面上可能没有说服力；很难想象这两种方法中的任何一种都会对绝大多数代码造成多大的伤害。因此，回忆一下异常处理是一种明显非局部的*控制流结构*可能会有所帮助，并且能够在纯代码中捕获异常将允许（错误地）将它们用于该目的。

请允许我准确说明这意味着什么恐怖。

首先，我们定义一个要使用的异常类型，以及一个`catch`可以在纯代码中使用的版本：

```
newtype Exit a = Exit { getExit :: a } deriving (Typeable)
instance Show (Exit a) where show _ = "EXIT"

instance (Typeable a) => Exception (Exit a)

unsafeCatch :: (Exception e) => a -> (e -> a) -> a
unsafeCatch x f = unsafePerformIO $ catch (seq x $ return x) (return . f) 
```

这将让我们抛出任何`Typeable`值，然后从某个外部范围捕获它，而无需任何中间表达式的同意。例如，我们可以将一个`Exit`throw 隐藏在我们传递给高阶函数的东西中，以便用它的求值产生的一些中间值进行转义。精明的读者现在可能已经知道这是怎么回事：

```
callCC :: (Typeable a) => ((a -> b) -> a) -> a
callCC f = unsafeCatch (f (throw . Exit)) (\(Exit e) -> e) 
```

是的，这确实有效，但需要注意的是，它需要在整个表达式存在时对任何延续进行评估。如果您尝试这样做，请记住这一点，或者`deepseq`如果从轨道上进行核弹更适合您的速度，请使用。

看哪：

```
-- This will clearly never terminate, no matter what k is
foo k = fix (\f x -> if x > 100 then f (k x) else f (x + 1)) 0 
```

但：

```
∀x. x ⊢ callCC foo
101 
```

从内部逃逸`map`：

```
seqs :: [a] -> [a]
seqs xs = foldr (\h t -> h `seq` t `seq` (h:t)) [] xs

bar n k = map (\x -> if x > 10 then k [x] else x) [0..n] 
```

注意需要强制评估。

```
∀x. x ⊢ callCC (seqs . bar 9)
[0,1,2,3,4,5,6,7,8,9]
∀x. x ⊢ callCC (seqs . bar 11)
[11] 
```

...啊。

现在，让我们再也不提这个了。

# c++ - 为什么这个对重载函数的调用模棱两可？

> ID：12335247
> 
> 赞同：2
> 
> 时间：2012-09-08T23:18:01.137
> 
> 标签：c++, templates, overloading

我是模板编程的初学者，我正在使用以下模板函数来避免代码重复：

```
template <class T>
void foo(T iInteger) {

    // ... same algorithm for all integer types

    std::to_string( static_cast<T>(iInteger) ); // C2668: ambiguous call to overloaded function

    // ... end of algorithm

} 
```

我的`foo`函数将仅使用原始整数类型调用。我天真地认为这`static_cast`足以告诉编译器`std::to_string()`使用哪个重载，但这似乎还不够，因为我仍然得到一个`C2668: ambiguous call to overloaded function`. 我错过了什么？是否可以避免为所有原始整数类型重复相同的代码，同时仍然调用适当的`std::to_string`重载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:02:25.740

正如克里斯在对问题的评论中指出的那样，问题是我使用的是 VS2010，它没有完全实现 c++11 标准。`std::to_string`仅实现`long long`, `unsigned long long`,`long double`的重载 有关此事的更多详细信息，请参阅[此](https://stackoverflow.com/questions/10664699/stdto-string-more-than-instance-of-overloaded-function-matches-the-argument)相关问题。

# jquery - 带有 JQuery Mobile 的 Angular.js，嵌套列表视图的问题

> ID：12335248
> 
> 赞同：0
> 
> 时间：2012-09-08T23:18:22.167
> 
> 标签：jquery, mobile, angularjs

我正在使用 JQuery Mobile (JQM) 和 Angular.js 的 JQM 适配器 (https://github.com/tigbro/jquery-mobile-angular-adapter) 试用 Angular.js。事情通常很好而且很花哨，但是当我使用嵌套列表视图时，我在更新绑定时遇到了问题。我已经破坏了“待办事项”应用程序来举例说明我的问题：

[http://jsfiddle.net/thostr/yGeQx/3/](http://jsfiddle.net/thostr/yGeQx/3/)

为什么单击处理程序中的按钮标签绑定不会更新（ng-click="task.name = 'changed'"）？当列表视图没有嵌套时，这似乎很简单，并且使用普通的 Angular.js（没有 JQM，只是普通的嵌套 ng-repeats）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:08:13.550

我认为这是[JSFiddle](http://jsfiddle.net/t4YXR/1/)上的解决方案可以帮助您。

# iphone - 保存图像视网膜

> ID：12335258
> 
> 赞同：-1
> 
> 时间：2012-09-08T23:20:12.663
> 
> 标签：iphone, objective-c, ios

我将保存从用户库中检索到的图像，假设图像被裁剪后为 300 x 300。我是否需要将视网膜和非视网膜图像直接保存到文档中（即 150 x 150 和 (300 x 300)？

这似乎是不必要的，因为 iPhone 的显示屏要么是视网膜，要么是非视网膜。检查视网膜显示器是否更有效，并且仅在存在时保存较大的图像（如果可能）？

我只是想确保我的解决方案不会忽略某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:38:59.207

仅仅因为他们现在拥有非视网膜设备并不意味着他们总是会这样做。他们有一天会升级，并且可能会带来您的应用程序数据。

此外，对于拥有多台设备的用户，您应该在所有设备之间同步这些图像（使用 iCloud）。

由于目前出售的几乎所有设备都是视网膜，我只会保存视网膜图像。不要为非视网膜版本而烦恼，让图像绘制 API 为您处理调整大小。

尝试各种调整大小/抗锯齿算法。有些比其他更快，并且调整到正好一半宽度/高度是一种特殊情况，其中低质量/快速调整大小算法看起来与高质量/慢速算法一样好甚至更好。

如果在非视网膜硬件上绘制视网膜图像会导致性能或内存问题（通常不会），那么您可以将图像调整为较小的尺寸并将较小的图像保留在 RAM 中。调整大小比从闪存读取要快得多，因此这不会减慢速度。

# javascript - 如何在不检查 HTTP 标头的情况下检测移动浏览器？

> ID：12335259
> 
> 赞同：0
> 
> 时间：2012-09-08T23:20:44.433
> 
> 标签：javascript, html, browser-detection, mobile-browser

在告诉我这个问题之前只是在阅读我的标题后才提出的，请进一步阅读。

我想知道在不嗅探标题的情况下检测移动浏览器的最佳方法，原因很简单，因为这可以在桌面计算机上修改插件。

这样做的原因是我正在构建一个 HTML5 游戏，我不希望它在桌面计算机上播放。如果我让这种情况发生，它可能最终会被自动机器人玩。

我能想到的唯一方法是比较 Javascript并将其与可能大小的列表进行比较`offsetWidth`。`document/window`但是，我相信在不久的将来，手机和平板电脑的屏幕分辨率将与台式电脑相似，我无法将它们分开。

我还有哪些其他选择？当然，Javascript 非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:24:26.897

如果您担心阻止从台式计算机访问，那么您基本上不能。标题可以很容易地伪造，击败浏览器大小检测只是调整窗口大小的问题......我想说的是正常的用户代理检测并希望最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:37:51.060

也许您可以尝试的一件事是在游戏启动时做出某种“解锁”触摸手势。因此，例如将一个圆圈拖到另一个圆圈或沿着这些线的东西上，这将：

1.  要求浏览器触发触摸事件
2.  每次位置/大小可能略有不同，因此难以编写脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T01:02:11.373

CSS3 在媒体查询方面做得更好。它允许我们根据屏幕大小编写代码，而不是使用设备类型（用户代理）的 if-then-else 逻辑。

[这](https://developer.mozilla.org/en-US/docs/Browser_detection_using_the_user_agent)是很好的阅读。

基本思想是，动态适应屏幕尺寸（和其他功能！），并从头开始设计网站的未来证明。

一些概念性的例子在[这里](http://www.w3.org/TR/css3-mediaqueries/)

# cocoa - 每天安排一次方法 Cocoa

> ID：12335261
> 
> 赞同：0
> 
> 时间：2012-09-08T23:20:53.383
> 
> 标签：cocoa, nstimer

再会！

我正在为 Mac OS X（不是 iPhone）开发提醒软件。它应该在一天内显示一个窗口。具体时间没有规定，只有一次。我怎样才能做到。它注册自己以在登录后启动。我已经尝试过 NSTimer，但是当我在第一个方法触发后调用 [timer setfFireDate:] 时，它看起来没有触发方法。

期待您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:39:08.387

从您的最新评论来看，您似乎需要同时使用计时器和用户默认值。用户默认方法首先检查是否存在名为“firstOpening”的用户默认设置，如果没有，则将其设置为当前时间——这将为您的 20 天试用期的开始设置时钟。第一个 if 子句只会在程序第一次打开时运行。

我创建了一个属性 firstOpenTime，它从用户默认值中检索值，并使用它来检查 20 天是否已过期——如果是，程序运行 presentExpiredWindow 方法，如果没有，它会显示提醒窗口，并且设置一个每 24 小时运行一次的重复计时器。因此，即使程序一直保持打开状态，计时器也应每 24 小时触发一次以显示提醒窗口（除非 20 天已过，然后计时器方法调用 showExpiredWindow 方法并使其自身无效）。

```
 - (void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    if (![[NSUserDefaults standardUserDefaults] objectForKey:@"firstOpening"] ){
        [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"firstOpening"];
    }

    self.firstOpenTime = [[NSUserDefaults standardUserDefaults] objectForKey:@"firstOpening"];
    if ([[NSDate date] timeIntervalSinceDate:self.firstOpenTime] > 1728000) { //1,728,000 seconds is 20 days
        [self presentExpiredWindow];
    }else{
        [self presentReminderWindow];
        [NSTimer scheduledTimerWithTimeInterval:86400 target:self selector:@selector(presentReminder:) userInfo:nil repeats:YES]; 
    }

}

-(void)presentReminder:(NSTimer *) aTimer {
    if ([[NSDate date] timeIntervalSinceDate:self.firstOpenTime] > 1728000) {
        [self presentExpiredWindow];
        [aTimer invalidate];
    }else{
        [self presentReminderWindow];
    }

}

-(void)presentReminderWindow {
    //show reminder window
}

-(void)presentExpiredWindow {
    //show trial period has ended window
} 
```

# ruby-on-rails - 在查询中包含多个关联

> ID：12335262
> 
> 赞同：0
> 
> 时间：2012-09-08T23:21:01.780
> 
> 标签：ruby-on-rails, ruby

我希望使用下表来解释我的问题：

```
university = University.where('class.name' => 'example', 'class.students.age' => '21').includes(:class, :student)

University
id
class.id
name

Class:
id
student.id
name
MaximumStudents

Student:
id
name
age 
```

如您所见，该`University`表引用了该`Class`表。该`Class`表引用该`Student`表。

我想要那些有一个班级`example`并且学生年龄较大的大学`21`。我知道这很奇怪，但它表明了我的问题：D

我无法让我的查询获取`Student`. 我总是收到错误“找不到名为‘学生’的协会”

如果我在不使用`Student`表格的情况下执行以下操作，它工作正常

```
university = University.where('class.name' => 'example').includes(:class) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:25:56.210

首先，请注意，将模型命名为“类”不是一个好主意，因为这是 Ruby 中的保留字（用于类），这可能会引起麻烦。

除此之外：在`University`模型中，您需要指定与`Student`模型的关系，如下所示：

```
has_many :students, :through => :class 
```

然后你可以通过这样的关系得到你想要的：

```
university = University.where('class.name' => 'example', 'students.age' => 21).includes(:class, :students) 
```

# php - 我应该将我的 HTML 文件更改为 PHP

> ID：12335264
> 
> 赞同：0
> 
> 时间：2012-09-08T23:21:38.317
> 
> 标签：php, html

我的问题是，是否有任何理由不只是将我的所有 HTML 文件转换为 PHP 文件，以便我可以将 PHP 代码放入其中。是否存在命名文件 *.php 会使 HTML 解析不正确的情况？

那么，保留 HTML 文档有什么意义呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:25:08.013

你必须反过来想。将 HTML 转换为 PHP 应该是有原因的。如果它不存在，那就不要这样做。

如果这样做，由于您页面的 PHP 服务器的解释，用户请求和网页呈现之间会有更多的“延迟”。此外，您还增加了系统的复杂性（服务器配置、安全修复等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:24:00.447

如果您的服务器配置为解析 PHP 的 *.php 文件，但只提供 HTML 文件，那么将您的 HTML 文件重命名为具有 .php 扩展名会减慢速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T23:25:49.680

一个完全是 HTML 的名为 *.php 的文件仍将正确地解析为 HTML。然而，正如其他人已经指出的那样，它与 .html 扩展名之间存在性能差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T23:26:25.247

请记住，所有 .php 文件都需要通过 php 解析器。因此，您将稍微增加 Web 服务器的负载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T23:49:41.173

您可以做的其他事情也可以将扩展`httpd.conf` `application/x-httpd-php`识别`.html`为 PHP 文件。这样您就不必更改扩展名。

# java - 如何在java中使用indexOf（int ch）

> ID：12335268
> 
> 赞同：1
> 
> 时间：2012-09-08T23:22:22.130
> 
> 标签：java, string, indexof

我正在尝试获取字符串中字符的索引号以将字符串划分为子字符串。示例：我想转：

```
String book1 = "green eggs and ham, usa, dr. seuss"; 
```

进入：

```
green eggs and ham
usa
dr. seuss 
```

这必须适用于不同长度的字符串。基本上，如果我使用不同的词，它仍然可以工作。

我需要帮助理解将`indexOf()`逗号索引放入子字符串的方法。

我尝试在 之后的方法调用中使用变量，`indexOf`当我使用除 int 以外的任何内容时出现错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T23:24:10.787

我不太确定您的实际要求，但您有很多选择可以尝试：

*   使用[`split(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法拆分字符串并将其存储为字符串数组
*   使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)在特定分隔符上标记您的 String 并用于获取*标记*`nextToken()`。（*请注意，StringTokenizer 是一个遗留类，出于兼容性原因保留，尽管在新代码中不鼓励使用它*）
*   第三种选择是使用[Pattern的正则表达式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

选择适用于您要求的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:24:30.680

使用拆分。

```
"green eggs and ham, usa, dr. seuss".split(", "); 
```

请参阅：[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T23:58:06.957

如果您被允许使用它，那么该`split()`方法正是您所需要的。

否则，如果您只需要使用`indexOf()`，请查看[String API 的 Java API 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)以了解其工作原理。我注意到的第一件事是有三个不同的版本`indexOf()`：[`indexOf(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)、[`indexOf(int, int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int,%20int%29)和[`indexOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)。我相信其中的第二个将最适用于这个问题。由于文档声明此版本的`indexOf()`“返回此字符串中第一次出现指定字符的索引，从指定索引处开始搜索”，因此您很可能需要某种循环来查找每次出现一个人物。

# java - 触发器生成帐号 .on 插入表中

> ID：12335271
> 
> 赞同：-2
> 
> 时间：2012-09-08T23:23:06.990
> 
> 标签：java, servlets, jdbc

我是 java servlet 的初学者，我的问题是我想生成一个帐号。每次我的桌子上都会有一个新帐户。但是触发器不工作请帮助 fname lname 用户名和 pword 等其他值工作正常 servlet 没问题，但创建 accno 的触发器工作不正常

```
CREATE OR REPLACE TRIGGER T1 BEFORE INSERT ON UINFO
FOR EACH ROW
BEGIN
set new.UACCNO="jith"||to_char(SQ_1.nextval,'FM0009');
END;
/ 
```

//`this is my servlet prog`

```
String s1=hreq.getParameter("fname");
            String s2=hreq.getParameter("lname");
            String s3=hreq.getParameter("uacc");
            String s4=hreq.getParameter("uname");
            String s5=hreq.getParameter("pword");
            String s6=hreq.getParameter("pword2");
            String s7[]=hreq.getParameterValues("select");
            String s8=hreq.getParameter("uans");
            String s9=hreq.getParameter("ueid");
            PrintWriter pw=hres.getWriter();

    //if passwords match        

        if(s6.equals(s5))
        {

            PreparedStatement pstmt=con.prepareStatement("insert into uinfo(fname,lname,uacc,uname,pword,uques,uans,ueid) values(?,?,?,?,?,?,?,?)");
pstmt.setString(1,s1);
pstmt.setString(2,s2);
pstmt.setString(3,s3);
pstmt.setString(4,s4);
pstmt.setString(5,s5);
for(int i=0;i<s7.length;i++)
{
if(s7[i]!=null)
pstmt.setString(6,s7[i]);

}
pstmt.setString(7,s8);
pstmt.setString(8,s9);
pstmt.executeUpdate();
pw.println("<html><body  bgcolor=wheat text=blue>");
pw.println("<h1>user  "+s4+"  has Registered successfully</h1><br/><br/>");
pw.println("<h3><a href=login.html>Login Now?</a></h3>");
 pw.println("</body></html>");
 }
 else
 {
            pw.println("<html><body  bgcolor=wheat text=blue>");
            pw.println("<h1>**the passwords do not match go back and check</h1>");
            pw.println("</body></html>");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:36:32.223

使用触发器为记录创建连续的记录是多余的，您应该从另一个 PreparedStatement 调用序列，如下所示：

```
PreparedStatement statement = con.prepareStatement( "SQ_1.nextval from dual") 
```

然后在取出连续后，进行所需的转换以创建您​​的密钥并将其传递到插入语句中。

您拥有的另一个选项是直接`SQ_1.nextval`在插入语句中传递，但这可能取决于您使用的数据库引擎。

如果它是我怀疑的预言机，它会是这样的（请注意，下面的示例没有在触发器中进行连接/转换，我把它留给你）：

```
PreparedStatement pstmt=con.prepareStatement(
"insert into uinfo(UACCNO,fname,lname,uacc,uname,pword,uques,uans,ueid) values(SQ_1.nextval,?,?,?,?,?,?,?,?)"); 
```

# android - 创建Android背景，多少像素？

> ID：12335276
> 
> 赞同：3
> 
> 时间：2012-09-08T23:24:04.097
> 
> 标签：android, image, background, pixel, image-size

我想为我的 Android 游戏创建背景。[在这里](http://developer.android.com/guide/practices/screens_support.html)阅读时，我知道它是如何工作的，但我不知道如何在[Photoshop](http://en.wikipedia.org/wiki/Adobe_Photoshop)中为不同的文件夹设置正确的大小。

以下是来自[Android 开发者](http://developer.android.com/index.html)的列表：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

但这将以像素为单位是多少？由于 Photoshop 没有 dp。如何制作如下列表？

*   小屏幕至少是 <在此处插入像素大小>
*   普通屏幕至少是 <在此处插入像素大小> (...)

我不希望我的背景拉伸和收缩太多，所以我想要至少四种不同的尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:21:32.150

您链接的“支持多个屏幕”页面上的关键内容之一是：

> 要为不同密度创建替代位图可绘制对象，您应该遵循四个通用密度之间的 3:4:6:8 缩放比例。例如，如果您有一个 48x48 像素用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：
> 
> 36x36 用于低密度 48x48 用于中密度 72x72 用于高密度 96x96 用于超高密度

话虽如此，因为我们知道大多数可用的屏幕尺寸和密度（这是我刚刚找到的一个简洁的参考页面：http: [//blog.blundell-apps.com/list-of-android-devices-with-pixel-density -buckets/](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)），您也可以将其用作指南。所以，要创建一个填充屏幕的背景，我会专注于宽度分辨率。最流行的手机宽度为 320、480、540 或 720 像素。所以我会这样创建我的背景（仅限手机......你可以为平板电脑做数学）
mdpi：320 宽
hdpi：540 宽
hxdpi：720 宽

高度有点复杂，因为并非所有手机的纵横比都相同。根据您的应用，您可以选择缩放高度或剪裁高度。

我还想看看这个页面上的屏幕尺寸和密度图表：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)。如您所见，ldpi 是一个很小的百分比，因此您可能更愿意让 android 进行缩放。另一方面，ldpi 图像的文件大小可能很小，所以如果你想确保它看起来很棒，你可以提供资产。对于 xlarge 平板电脑，您现在可能只关心 mdpi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:33:52.573

我不确定您到底在寻找什么，但这里有一些以像素为单位的尺寸：

```
 320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).  
    480dp: a tweener tablet like the Streak (480x800 mdpi).  
    600dp: a 7” tablet (600x1024 mdpi).  
    720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc.). 
```

它直接取自 Stack Overflow 问题*[Android 屏幕尺寸 HDPI, LDPI, MDPI](https://stackoverflow.com/questions/6166677)*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T16:14:23.627

平均而言，每个*_* _ 的像素，以英制和公制为单位，仅最常用的单位。（对不起，我不知道它在 dpi 中是什么。）

300 像素每英寸
118.1102362204724 像素每厘米
11.81102362204724 像素每毫米

来源

谷歌长度单位转换器
谷歌在线计算器
其他一些人雅虎回答帖子

# windows-phone-7 - 连接设备失败

> ID：12335283
> 
> 赞同：1
> 
> 时间：2012-09-08T23:24:42.100
> 
> 标签：windows-phone-7

连接设备失败。确保设备已完全启动并已连接......这就是我在过去 24 小时内尝试部署到我的 wp7 设备时所得到的结果。这曾经发生在我身上，但它总是暂时的。

-我尝试重新启动 pc 和 wp7 手机。- 不同的 USB 端口和电缆。-创建另一个用户（运行 Windows 8 企业版）-重新安装 vs skd 7.1.1

现在我正在安装整个 sdk（不仅仅是以前的更新），看看它是否有效。

除此之外，我无法在 Windows 8 上运行模拟器。总是关闭。

还有其他建议吗？

# webgl - WebGL：纹理中的零 alpha 像素是否一定会更新深度缓冲区？

> ID：12335284
> 
> 赞同：5
> 
> 时间：2012-09-08T23:24:47.370
> 
> 标签：webgl, fragment-shader, alpha-transparency

我正在尝试渲染一个混合了完全透明像素和完全不透明像素的纹理。似乎我唯一的选择是从后到前按距离渲染它们（毕竟是完全不透明的多边形），因为即使是完全透明的像素也会更新深度缓冲区，但我不确定这是否准确。是吗？

似乎可以告诉片段着色器将深度缓冲区单独留给透明像素，但显然不是。我错过了什么吗？

除了我没有想到的许多多边形之外，还有其他一些明智的方法来渲染高度不规则形状的图像吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T23:44:19.647

既然我已经提出了这个问题，我似乎至少找到了一个答案。片段着色器中的`discard`语句似乎可以满足我的需要：

```
void main(void) {
  vec4 textureColor = texture2D(uSampler, vTextureCoord);
  if (textureColor.a < 0.5) 
    discard;
  else
    gl_FragColor = vec4(textureColor.rgb * vLighting, textureColor.a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T23:41:51.927

当您到达片段着色器时，无论您是否输出 alpha，都已经确定会有一个像素。避免它的唯一方法是使用 glEnable(GL_ALPHA_TEST) 之类的选项。然而，这仅适用于 0 或 1 的 alpha 值，例如当您绘制带有硬边框的精灵时。如果你想要软边框或者你想要半透明的物体，你需要从前向后画。您可能需要为此切割几何形状。

# c# - VS 2010 - 如何添加项目属性窗口

> ID：12335285
> 
> 赞同：0
> 
> 时间：2012-09-08T23:24:59.833
> 
> 标签：c#, asp.net, visual-studio-2010

感觉真的很傻，但是对于一个新的VS2010 ASP.Net网站，如何在项目下添加一个Properties项呢？您可以双击打开“属性”页面，该页面的左侧有属性、应用程序、Web、设置和其他选项卡？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:01:46.563

是的。为此，您需要有一个网站项目而不是 websie。

# matlab - 如何在 MATLAB 中计算 2D 和 3D 自相关？

> ID：12335289
> 
> 赞同：-2
> 
> 时间：2012-09-08T23:25:36.863
> 
> 标签：matlab, image-processing, statistics, signal-processing

我需要在 MATLAB 中计算矩阵 A 和 B 之间的 2D 和 3D 自相关。有什么功能可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T00:10:31.373

自相关是在 MATLAB 中作为互相关的一种特殊情况实现的。只需将 xcorr2(a) 用于 2D 自相关，将 convn(a,a(end:-1:1,end:-1:1,end:-1:1)) 用于 3D。

# asp.net - 在 Visual Basic 中对 Gridview 进行排序

> ID：12335290
> 
> 赞同：0
> 
> 时间：2012-09-08T23:25:38.423
> 
> 标签：asp.net, vb.net, datatable, dataview

我正在尝试使用以下方法在 Visual Basic 中对 gridview 进行排序，但是第二行代码（Dim dv as DataView ...）会引发 NullReferenceException。当我调试代码并单步执行时，我可以看到 DataTable dt 在实例化后的值为“Nothing”。任何帮助将不胜感激。

```
 Dim dt As DataTable = grdExpProd.DataSource
        Dim dv As DataView = dt.DefaultView

        If (blnExTraining) Then
            dv.Sort = "ExpirationDate DESC"
        Else
            dv.Sort = "ExpirationDate ASC"
        End If

        grdExpProd.DataSource = dv
        grdExpProd.DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:31:45.710

回发后，任何 Web-Databound-Control 的 DataSource 都`GridView`为 Nothing（C# 中为 null）。请注意，HTTP 是无状态的，在页面生命周期中创建的所有对象将在页面呈现后立即销毁。

所以解决方法很简单，`DataSource`再次选择正确的`ORDER BY`。

# html - 未排序的列表显示为表格，但删除第一项和最后一项的空格

> ID：12335291
> 
> 赞同：0
> 
> 时间：2012-09-08T23:25:39.830
> 
> 标签：html, css, navigation, space

我有以下`HTML`代码：

```
<body>
<div id='wrapper'>
    <ul id='nav'>
        <li><a href='#'>Link</a></li>
        <li><a href='#'>Link</a></li>
        <li><a href='#'>Link</a></li>
        <li><a href='#'>Link</a></li>
    </ul>
</div> 
```

以及以下`CSS`代码：

```
#wrapper {width:960px; margin:0 auto;}

#nav {display: table;width:100%;}
#nav li {display: table-cell;}
#nav li a {display: block;text-align: center; border-bottom:1px solid #f00;margin:0 5px; padding:0 0 15px 0;} 
```

此代码生成一个带有底部的水平菜单`border`。

就像是..

```
|   Link      Link       Link      Link   |
|_________  _________  _________ _________|
<-----------------  960px  ---------------> 
```

我想知道是否可以删除第一个和最后一个项目的空格，以便底部`border`以垂直线开始，第一个链接的第一个字母和最后一个链接的最后一个字母。就像是...

```
|Link         Link       Link         Link|
|______     ________   ________     ______|
<-----------------  960px  ---------------> 
```

有人对此有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:02:14.153

您需要创建几个其他样式：firstElement、lastElement。并以不同的方式对待他们

```
 <li id='firstElement'><a href='#'>Link</a></li>
    <li><a href='#'>Link</a></li>
    <li><a href='#'>Link</a></li>
    <li id='lastElement'><a href='#'>Link</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T23:33:42.877

我不确定我是否正确理解了您的问题，但也许尝试在您的 li 元素上执行 float:left 而不是 display:table 和 display:table-cell? 这样它们仍将水平排列，但您将能够对每个 li 及其内容的填充进行单独的样式设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T01:00:09.787

一种解决方案是针对列表的第一个和最后一个孩子。

```
ul li:first-child a { margin-left: 0 }
ul li:last-child a { margin-right: 0 } 
```

或者，您的父容器可以有负边距。如果有可能进行列表换行（例如在移动设备上），我发现这会更好。

```
ul { margin-left: -10px; margin-right: -10px } 
```

# github - 在 Github 拉取请求中格式化评论

> ID：12335294
> 
> 赞同：5
> 
> 时间：2012-09-08T23:26:01.507
> 
> 标签：github

有没有办法在 Github 拉取请求的评论中正确缩进和格式化代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:35:38.337

围栏代码块

Markdown 将每行前面有四个空格的文本转换为代码块。GFM 支持这一点，但我们也支持围栏块。只需将代码块包装在 ``` 中，您就无需手动缩进来触发代码块。

语法高亮

如果您要求，我们将代码块更进一步，并添加语法突出显示。在您的围栏块中，添加一个可选的语言标识符，我们将通过语法高亮来运行它。例如，语法高亮 Ruby 代码：

```
```ruby
    require 'redcarpet'
    markdown = Redcarpet.new("Hello World!")
    puts markdown.to_html
``` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-04T18:26:36.313

如果您不想手动格式化降价代码，您可以在 6 年后（2018 年）[使用全新的降价工具栏](https://blog.github.com/changelog/2018-10-03-markdown-toolbar-on-pr-comments/)（2018 年 10 月）

> “对话”选项卡中的拉取请求评论评论现在有一个文本编辑工具栏，用于快速设置评论样式并添加已保存的回复。

[![工具栏](../Images/5bfdfd0dd26ff9b7dc478e2875306c56.png)](https://i.stack.imgur.com/puZwH.jpg)

# objective-c - 使用 NSImages 设置背景颜色？

> ID：12335296
> 
> 赞同：0
> 
> 时间：2012-09-08T23:26:24.077
> 
> 标签：objective-c, cocoa, nscolor

我无法理解以下代码：

```
[window setBackgroundColor:[NSColor colorWithPatternImage:[NSImage imageNamed:@"myImage.png"]]]; 
```

假设将背景图像设置为 NSWindow。但

1.  为什么要设置背景颜色？
2.  `NSColor colorWithPatternImage`真正做什么？NSColor 应该只是一种颜色吗？

我的问题可能很简单，但这让我感到不安。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:20:44.680

Core Graphics 具有（类似于 PostScript 和 PDF）“图案颜色”的概念。参见“Quartz 2D Programming Guide”中的示例[模式：](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_patterns/dq_patterns.html#//apple_ref/doc/uid/TP30001066-CH206-TPXREF101)

> 模式是重复绘制到图形上下文的一系列绘图操作。您可以像使用颜色一样使用图案。

`[NSColor colorWithPatternImage:image]`创建一个重复绘制图像的模式。因此，在您的情况下，如果图像与窗口大小相同，则仅绘制一次。但如果图像小于窗口，则会在 x 和 y 方向重复绘制以填充窗口背景。

# android - 无法在新的 Kindle Fire HD 模拟器中安装应用程序

> ID：12335302
> 
> 赞同：1
> 
> 时间：2012-09-08T23:27:09.687
> 
> 标签：android, kindle-fire

有人在新的 Kindle Fire HD 上安装应用程序时遇到任何问题吗？我遵循了亚马逊给出的所有步骤，但它没有安装应用程序。我从 Eclipse 和 ADB 都试过了。

# haskell - 将 Haskell 的 WAI 请求转换为 Network.HTTP.Conduit 请求

> ID：12335304
> 
> 赞同：1
> 
> 时间：2012-09-08T23:27:37.990
> 
> 标签：haskell, request, yesod, conduit, http-conduit

我正在编写一个服务器，我需要沿着某个请求消息转发。该消息基本上是 POST（或 GET）消息，可能包含几兆字节的文件。此消息被转发到实际存储（或检索）文件的另一台服务器。

我正在使用 Yesod 框架。因此，使用`getWaiRequest`，我可以获得 WAI 请求。但是要发起一条新消息传递，我需要使用 Network.HTTP.Conduit 来解决它的惰性。所以我需要`Request m`在那个模块中做一个。但我不知道如何进行这种转换。WAI`Request`只是一种数据类型，但 Conduit 是一种`Request m`类型，所以我不断收到错误消息，试图将内容复制过来。

有人能告诉我我是怎么做到的吗？如果没有，我如何在不使用 HTTP Conduit 的情况下将 WAI 请求传递给另一台服务器也一样好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:09:39.503

这两种请求类型不兼容。您需要手动在它们之间进行转换。WAI 并不真正适合代理。最简单的选择是配置您的前端 HTTP 守护程序以立即转发相应的 URL，而无需将它们发送到您的 Yesod 应用程序。

# svn - 颠覆和显示存储库，如 Mercurial

> ID：12335306
> 
> 赞同：0
> 
> 时间：2012-09-08T23:28:03.903
> 
> 标签：svn, mercurial

有没有办法显示存储库，它通过 html 进行更改，类似于 Mercurial 提供可以使用的 hgwebdir.cgi 脚本。

我知道它可能可以编码，但是那里已经建立了一些东西吗？

任何建议表示赞赏，谢谢，D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:52:11.430

好吧，你总是可以使用[hgsubversion](https://bitbucket.org/durin42/hgsubversion/overview)，然后使用 Mercurial 的 web 视图。如果您只想查看（而不是将更改推送回 SVN），这将是一种非常简单的方法，尤其是在您已经在使用 Mercurial 的情况下。我有一个[补丁](https://bitbucket.org/magao/hgsubversion-tags)，将 SVN 修订作为临时标签添加到每个节点，然后将显示在 Web 视图中（这些标签不显示在 中`hg tags`）。

顺便说一句，我也有[一些补丁](https://bitbucket.org/magao/hgsubversion)来处理在提取大量 SVN 存储库时发生的某些错误。它们还没有处于最终状态——我目前正在对它们进行审查并将其拉入主存储库——但我已经使用它们将 >40000 个修订版拉入 7GB hg 存储库。

# javascript - 在 IE7 下完全崩溃 - FIX

> ID：12335309
> 
> 赞同：-3
> 
> 时间：2012-09-08T23:28:24.527
> 
> 标签：javascript, internet-explorer, joomla, internet-explorer-7

我将 Joomla 与 VirtueMart 一起用于电子商务网页。我还安装插件到 VirtueMart 以进行产品滑动。图库工作正常，但在 IE7 下，所有页面都被阻止，没有任何可点击的链接，只是页面上的所有链接都无法点击。[这是](http://shoesnbags.de/index.php/herbst-winter-2012-2013/paolo-bocelli-damenschuhe-keilabsatz-3m-12427-detail) 我不知道要搜索什么来解决此问题的站点。有什么建议可以解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:20:28.247

*   尝试逐步禁用 js 文件以检查它是否是 JavaScript 问题。
*   对 CSS 文件执行相同的操作。

# php - 使用 PHP 在 Joomla 中获取用户类型

> ID：12335316
> 
> 赞同：2
> 
> 时间：2012-09-08T23:30:04.867
> 
> 标签：php, joomla2.5, joomla1.7, joomla1.6

我正在尝试获取登录用户类型（例如超级管理员，已注册）。我试过这段代码：

```
$user =& JFactory::getUser();
$curref = $user->usertype(); 
```

这给出了一个未找到函数的错误。获取用户类型名称的正确方法是什么，如果可能的话，没有数据库查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T23:33:19.623

您只需要将 usertype 视为成员，而不是方法。

```
$type = $user->usertype; 
```

文档：[http ://docs.joomla.org/Accessing_the_current_user_object](http://docs.joomla.org/Accessing_the_current_user_object)

您可以通过执行 var_dump 查看 $user 对象结构。试试这个，并检查输出：

```
var_dump( $user ); 
```

因此，如果您想遍历 groups 数组，您可以执行以下操作：

```
$groupIDs = array();
foreach( $user->groups as $groupID ){
  $groupIDs[] = $groupID;
}

var_dump( $groupIDs ); 
```

您还可以使用一些 joomla 方法以不同的方式返回组。您可能想查看此论坛主题：http: [//forum.joomla.org/viewtopic.php?t=530721](http://forum.joomla.org/viewtopic.php?t=530721)

# java - JPA/Hibernate - 共享主键

> ID：12335317
> 
> 赞同：1
> 
> 时间：2012-09-08T23:30:14.153
> 
> 标签：java, hibernate, sqlite, jpa, jpa-2.0

我想用共享主键创建双向一对一关系。

正如这里所说，[JPA Hibernate 一对一关系](https://stackoverflow.com/questions/787698/jpa-hibernate-one-to-one-relationship)我有：

```
@Entity
public class UserProfileInformation {

    @Id
    @GeneratedValue(generator = "customForeignGenerator")
    @org.hibernate.annotations.GenericGenerator(
        name = "customForeignGenerator",
        strategy = "foreign",
        parameters = @Parameter(name = "property", value = "userEntity")
    )
    long id;

    private long itemsPerPage;

    @OneToOne(mappedBy="userProfileInformation")
    private UserEntity userEntity;
...}

@Entity
@Table(name = "UserTable")
public class UserEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String publicName;

    private String password;

    private String emailAddress;

    private String name; 

    private boolean active;

    @OneToOne(cascade=CascadeType.ALL)
    @PrimaryKeyJoinColumn
    private UserProfileInformation userProfileInformation;
...} 
```

现在，当我尝试将我的用户保存在数据库中时，我得到`org.hibernate.id.IdentifierGenerationException: null id generated for:class pl.meble.taboret.model.UserProfileInformation`. 是因为，当 userProfileInformation 持久化到数据库 userEntity 时没有生成 id 吗？

另外，在我的示例中，如何创建与共享主键的双向关系？

编辑：请求的代码，这是测试持久用户实体操作的简单控制器。

```
@Controller
@RequestMapping("/test")
public class TestController {
    @Autowired
    UserDao userDao;

    @RequestMapping(method= RequestMethod.GET)
    public String t(Model model){
        UserEntity entity=new UserEntity();
        entity.setActive(false);
        entity.setEmailAddress("a");
        entity.setName("name");
        entity.setPassword("qqq");
        entity.setPublicName("p");
        UserProfileInformation p = new UserProfileInformation(entity);
        entity.setUserProfileInformation(p);
        userDao.addUser(entity);
        return "login";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:17:25.713

我认为问题在于 id 生成策略。因为休眠`@GeneratedValue(strategy = GenerationType.AUTO)`转换为`native`标识符生成。这意味着 hibernate 需要`identity`UserTable 的 id 字段。

我不确切知道`SQLite`身份列是如何工作的，但从[这个 SO question](https://stackoverflow.com/questions/989821/identity-column-maximum-value-in-sqlite-dbs)看来有点不同（见第二个答案）。

无论如何，如果您计划在多个数据库上运行您的应用程序，那么从更改 id 生成策略`GenerationType.AUTO`并使用 hibernate 增强生成器：`SequenceStyleGenerator`或`TableGenerator`. 请参阅休眠文档中的[此链接](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#portability-idgen)。

**编辑：**

我试图重现您的问题，似乎 SQLite dialect 不在官方支持的[hibernate dialects](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-optional-dialects)中。同时，我使用[H2 嵌入式数据库](http://www.h2database.com/html/main.html)测试了您的案例，它按预期工作：您的映射是正确的。

如果您使用的是非官方的 SQLite 方言，则可能是该方言的错误。

# android - 在 android 活动之间共享搜索栏进度

> ID：12335318
> 
> 赞同：0
> 
> 时间：2012-09-08T23:30:54.263
> 
> 标签：android, android-activity, sharing

如何将搜索栏进度从我的主要活动共享到另一个活动？

这是我的搜索条码：

```
SeekBar seekbarChargeStart;

seekbarChargeStart = (SeekBar) findViewById(R.id.seekbar_charge_start);

seekbarChargeStart.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                @Override
                public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser) {
                    chargeStart.setText("Charge start is "
                            + progress);

                }

                public void onStartTrackingTouch(SeekBar seekBar) {

                }

                public void onStopTrackingTouch(SeekBar seekBar) {

                }
            }); 
```

如果 seekbar 是 void 类型，您如何在其他任何地方使用此信息，例如在另一个活动中一起使用？

我尝试使用 getProgress() 但不断收到空异常。我在 main 以外的活动中调用 getProgress()（这是具有搜索栏的活动）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:13:52.987

将 seekbarChargeStart 设为静态，您可以通过类访问 (Activity.seekbarChargeStart) 获取它

# html - div高度没有增加以包围子内容

> ID：12335322
> 
> 赞同：4
> 
> 时间：2012-09-08T23:31:55.523
> 
> 标签：html, css

我在`div`

高度是自动的`div`，但不幸的是`searchbar_home` `div`高度没有增加以包围我的输入框和提交按钮。

这是我的 HTML

```
 <div id='container'>    
    <div id="content">
        <h1 class="home_title">English to Malayalam</h1>
        <div id="searchbar_home">
            <input type="text" />
            <input type="submit" />
        </div>
    </div>
    <footer>
        <p>Copy right only for me ;)</p>
    </footer>

  </div>​ 
```

我的 CSS：

```
#searchbar_home{
    margin: 0 auto 20px;
    padding: 10px;
    height: auto;
    width: 80%;
    background: #F5F5F5;
    border: 1px solid #D8D8D8;

    border-radius: 6px;
}
#searchbar_home:after{
    clear: both;
}
#searchbar_home input[type="text"]{
    height: 35px;
    float: left;
    width: 90%;
    border: 1px solid #CCCCCC;
    border-right: none;

    border-radius: 6px 0 0 6px;
}
#searchbar_home input[type="submit"]{
    float: left;
    background: #414141;
    height: 40px;
    width: 50px;
}​ 
```

这是jsfiddle 上的[演示。](http://jsfiddle.net/sweetmaanu/De7um/)

![这里是图像演示](../Images/c6f79b5ed34cce2d324f853cc16da8b9.png)

如何让 `searchbar_home``div' 增加大小？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-08T23:36:39.897

我假设你已经浮动了你的`input`. 要使`div`尺寸适合它，`overflow:auto;`请为其样式添加规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:56:06.393

啊，您尝试使用 :after 技巧来清除浮动？

从您的代码：

```
 #searchbar_home:after{
         clear: both;
    } 
```

您实际上需要给它一些内容并使其成为块项目而不是内联项 -

```
 #searchbar_home:after{
         content:'';
         display:block;
         clear: both;
    } 
```

应该管用。

# excel - 宏以在excel工作表的各个列中进行所有可能的数据组合？

> ID：12335323
> 
> 赞同：-1
> 
> 时间：2012-09-08T23:32:01.303
> 
> 标签：excel, combinations, vba

在另一篇[文章](https://stackoverflow.com/questions/5729967/macro-to-make-all-possible-combinations-of-data-in-various-columns-in-excel-shee)中，用户[Excellll](https://stackoverflow.com/users/657668/excellll)提供了上述问题的宏地址。

我有一个工作表，其数据如下：

```
A                      B           C
abc,def,ghi,jkl      1,2,3     a1,e3,h5,j8 
```

以下[解决方案](https://stackoverflow.com/a/5731496/573261)将其变为

```
abc  1  a1
abc  2  a1
abc  3  a1
abc  1  e3
abc  2  e3
abc  3  h5 
```

但是，我想知道随着数据列数从 3 列数据增长到 10 列数据，如何修改宏。

我尝试根据我看到的代码中的模式多次修改宏，但我一直收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:45:02.207

这是一个通用的解决方案，它使用递归来处理任意数量的列（大于 1）

```
Sub Combinations()
    Dim aSrc As Variant

    ' Get Data into an array
    '  This section is an example to get the source data into an array
    '  Replace this section if your data is sourced differently.
    '  The required format of aSrc is Array(1 To NumberOfColumnsOfData)
    '  where each element aSrc(n) is Array(1 To NumberOfRowsInColumnN, 1 To 1) of Variant
    Dim rSrc As Range, colR As Range
    Dim sh As Worksheet
    Dim a As Variant
    Dim i As Long
    Set sh = ActiveSheet ' <-- Adjust to suit
    Set rSrc = sh.[A:D]  ' <-- Adjust to suit
    ReDim aSrc(1 To rSrc.Columns.Count)
    With sh
        For i = 1 To rSrc.Columns.Count
            Set colR = rSrc.Columns(i)
            aSrc(i) = .Range(colR.Cells(1, 1), colR.Cells(.Rows.Count, 1).End(xlUp))
        Next
    End With

    ' Generate output
    '  This populates aDst(1 To lSize, 1 To NumberOfSourceColumns)
    '  where lSize is total number of combinations
    Dim aDst As Variant
    Dim lSize As Long
    Dim n As Long
    Dim aBase() As String
    lSize = 1
    For i = 1 To UBound(aSrc)
        lSize = lSize * UBound(aSrc(i), 1)
    Next
    ReDim aDst(1 To lSize, 1 To UBound(aSrc))
    ReDim aBase(0 To UBound(aSrc) - 1)
    n = 1
    aBase = Split(String(UBound(aSrc) - 1, ","), ",")
    aBase(0) = aSrc(1)(1, 1)
    Generate aSrc, aDst, aBase, 1, n

    ' Place output into sheet
    '   Starting at cell rDst
    Dim rDst As Range
    Set rDst = [E1]  ' <-- Adjust to suit
    Set rDst = rDst.Resize(UBound(aDst, 1), UBound(aDst, 2))
    rDst = aDst

End Sub

Private Sub Generate(ByRef aSrc As Variant, ByRef aDst As Variant, ByRef aBase As Variant, ByVal pCol As Long, ByRef pDst As Long)
    Dim i As Long, j As Long
    If pCol = UBound(aSrc) Then
        ' If iterating the last source column, output to aDst
        For i = 1 To UBound(aSrc(pCol), 1)
            For j = 1 To UBound(aBase)
                aDst(pDst, j) = aBase(j - 1)
            Next
            aDst(pDst, j) = aSrc(pCol)(i, 1)
            pDst = pDst + 1
        Next
    Else
        ' If NOT iterating the last source column, aBase and call Generate again
        For i = 1 To UBound(aSrc(pCol), 1)
            aBase(pCol - 1) = aSrc(pCol)(i, 1)
            Generate aSrc, aDst, aBase, pCol + 1, pDst
        Next
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:29:48.860

我是递归的粉丝，但前提是我相信它提供了最简单的解决方案。我不认为它适合这个问题。

在最初的问题中，UJ9 有：

```
Column    A                B         C
Row 1     abc,def,ghi,jkl  1,2,3     a1,e3,h5,j8 
```

并想要：

```
Column    A    B   C
Row  1    abc  1   a1
Row  2    abc  2   a1
Row  3    abc  3   a1
Row  4    abc  1   e3
Row  5    abc  2   e3
Row  6    abc  3   h5
 :
Row 48    jkl  3   j8 
```

user1657410 想要相同但有 10 列。

原始问题的解决方案使用三个（每列一个）嵌套的 for 循环。为十个嵌套的 for 循环调整这些解决方案是可能的，但实现起来并不容易。让我们考虑这些解决方案背后的原理，然后寻找不同的实施策略。

如果我们索引每列中的值，我们会得到：

```
Column    A                B         C
Row 1     abc,def,ghi,jkl  1,2,3     a1,e3,h5,j8
Index     0   1   2   3    0 1 2     0  1  2  3 
```

解决方案所做的是生成索引的每个组合：000 001 002 003 010 011 012 013 020 021 021 023 100 ... 323 并使用数字从适当的字符串中选择适当的子字符串。

为了使这种方法适用于更多的列，我们需要从嵌套的 for 循环切换到每列一个条目的数组。一个数组保存列索引的最大值，另一个保存当前选定的索引。初始状态将类似于：

```
Column               A    B    C    D    E    F    G    H    I    J
Maximum index array  4    3    4    4    3    2    6    3    4    2
Current index array  0    0    0    0    0    0    0    0    0    0 
```

我们现在需要一个循环来增加当前索引数组，就像速度表一样，除了每列都有自己的最大值。也就是说，我们希望在 Current 索引数组的最右边的元素上加一，除非它已经是最大值。如果它处于最大值，则将其重置为零，并且左侧的下一列将递增，除非它处于最大值。这一直持续到循环想要将最左边的索引增加到超过其最大值为止。也就是说，我们需要一个循环，它将当前索引数组设置为以下值：

```
Column               A    B    C    D    E    F    G    H    I    J
Maximum index array  4    3    4    4    3    2    6    3    4    2
Current index array  0    0    0    0    0    0    0    0    0    0
                     0    0    0    0    0    0    0    0    0    1
                     0    0    0    0    0    0    0    0    0    2
                     0    0    0    0    0    0    0    0    1    0
                     0    0    0    0    0    0    0    0    1    1
                     0    0    0    0    0    0    0    0    1    2
                     0    0    0    0    0    0    0    0    2    0
                     0    0    0    0    0    0    0    0    2    1
                     0    0    0    0    0    0    0    0    2    2
                     0    0    0    0    0    0    0    0    3    0
                     0    0    0    0    0    0    0    0    3    1
                     0    0    0    0    0    0    0    0    3    2
                     0    0    0    0    0    0    0    1    0    0
       :      :
                     4    3    4    4    3    2    6    3    4    2 
```

对于当前索引数组的每个不同值，您从每一列中选择适当的子字符串并生成包含子字符串的行。

在我们继续之前，您确定要为每个子字符串组合生成一行吗？使用我为示例选择的最大索引值，您将获得 2,520,000 行。

下面的代码假设源行是第 1 行。它从第 3 行开始输出生成的行。此代码生成与上面类似的表，因此您可以正确理解代码的工作原理。此代码下方是修改它以输出子字符串的说明。代码会根据源行中的列数进行调整。该代码不会检查您的 Excel 版本是否可以支持生成的行数。

```
Sub Combinations()

  Dim ColCrnt As Long
  Dim ColMax As Long
  Dim IndexCrnt() As Long
  Dim IndexMax() As Long
  Dim RowCrnt As Long
  Dim SubStrings() As String
  Dim TimeStart As Single

  TimeStart = Timer

  With Worksheets("Combinations")

    ' Use row 1 as the source row.  Find last used column.
    ColMax = .Cells(1, Columns.Count).End(xlToLeft).Column

    ' Size Index arrays according to number of columns
    ' Use one based arrays so entry number matches column number
    ReDim IndexCrnt(1 To ColMax)
    ReDim IndexMax(1 To ColMax)

    ' Initialise arrays
    For ColCrnt = 1 To ColMax
      SubStrings = Split(.Cells(1, ColCrnt).Value, ",")
      ' SubStrings is a zero-based array with one entry
      ' per comma separated value.
      IndexMax(ColCrnt) = UBound(SubStrings)
      IndexCrnt(ColCrnt) = 0
    Next

    RowCrnt = 3     ' Output generated values starting at row 3

    Do While True

      ' Use IndexCrnt() here.
      ' For this version I output the index values
      For ColCrnt = 1 To ColMax
        ' This will generate an error if RowCrnt exceeds the maximum number
        ' of columns for your version of Excel.  
        .Cells(RowCrnt, ColCrnt).Value = IndexCrnt(ColCrnt)
      Next
      RowCrnt = RowCrnt + 1

      ' Increment values in IndexCrnt() from right to left
      For ColCrnt = ColMax To 1 Step -1
        If IndexCrnt(ColCrnt) < IndexMax(ColCrnt) Then
          ' This column's current index can be incremented
          IndexCrnt(ColCrnt) = IndexCrnt(ColCrnt) + 1
          Exit For
        End If
        If ColCrnt = 1 Then
          ' Leftmost column has overflowed.
          ' All combinations of index value have been generated.
          Exit Do
        End If
        IndexCrnt(ColCrnt) = 0
        ' Loop to increment next column
      Next

    Loop

  End With

  Debug.Print Format(Timer - TimeStart, "#,###.##")

End Sub 
```

如果你很高兴你理解了上面的代码，请替换：

```
 ' For this version I output the index values
      For ColCrnt = 1 To ColMax
        .Cells(RowCrnt, ColCrnt).Value = IndexCrnt(ColCrnt)
      Next 
```

经过：

```
 For ColCrnt = 1 To ColMax
        SubStrings = Split(.Cells(1, ColCrnt).Value, ",")
        .Cells(RowCrnt, ColCrnt).Value = SubStrings(IndexCrnt(ColCrnt))
      Next 
```

此修改后的代码为每个组合输出适当的子字符串，但是对于大量组合它会很慢，因为它从源单元格中为每个生成的行提取所需的子字符串。例如，它在 12.66 秒内生成 27,648 行。下面的代码需要 9.15 秒，但使用了更高级的技术。

第1步，更换：

```
 Dim SubStrings() As String 
```

经过：

```
 Dim SubStrings() As Variant 
```

使用`Dim SubStrings() As String`, SubString(N) 只能包含一个字符串。使用`Dim SubStrings() As Variant`, SubString(N) 可以包含字符串或整数或浮点值。这在大多数情况下都不好，因为变体的处理速度比字符串或 long 慢，并且如果您将其设置为代码的错误类型的值，您将不会收到警告。但是，我将在 SubString(N) 中存储一个数组。我将使用所谓的参差不齐的数组，因为每一行都有不同的列数。

第二步，更换：

```
 ReDim IndexCrnt(1 To ColMax)
    ReDim IndexMax(1 To ColMax) 
```

经过：

```
 ReDim IndexCrnt(1 To ColMax)
    ReDim IndexMax(1 To ColMax)
    ReDim SubStrings(1 To ColMax) 
```

第三步，更换：

```
 ' Initialise arrays
    For ColCrnt = 1 To ColMax
      SubStrings = Split(.Cells(1, ColCrnt).Value, ",")
      ' SubStrings is a zero-based array with one entry
      ' per comma separated value.
      IndexMax(ColCrnt) = UBound(SubStrings)
      IndexCrnt(ColCrnt) = 0
    Next 
```

经过：

```
 ' Initialise arrays
    For ColCrnt = 1 To ColMax
      SubStrings(ColCrnt) = Split(.Cells(1, ColCrnt).Value, ",")
      IndexMax(ColCrnt) = UBound(SubStrings(ColCrnt))
      IndexCrnt(ColCrnt) = 0
    Next 
```

在第一个版本中，每次拆分单元格时，我都会覆盖数组 SubStrings。在第二个版本中，我保存了每一列的子字符串。使用 UJ9 在原始问题中使用的值，新的 SubString 看起来像：

```
 ---- Columns -----
Row     0    1    2    3  
  1     abc  def  ghi  jkl
  2     1    2    3
  3     a1   e3   h5   j8 
```

第4步：替换：

```
 For ColCrnt = 1 To ColMax
        SubStrings = Split(.Cells(1, ColCrnt).Value, ",")
        .Cells(RowCrnt, ColCrnt).Value = SubStrings(IndexCrnt(ColCrnt))
      Next 
```

经过：

```
 For ColCrnt = 1 To ColMax
        .Cells(RowCrnt, ColCrnt).Value = SubStrings(ColCrnt)(IndexCrnt(ColCrnt))
      Next 
```

使用修改后的代码，我不会为每个生成的值拆分源单元格。我从数组中提取我需要的子字符串。

**注意**：如果您曾经使用过二维数组，您将编写类似`MyArray(Row,Column)`. 参差不齐的数组是不同的；你写`MyArray(Row)(Column)`。

# c++ - 当子类的析构函数被调用时，父类的析构函数也会被调用吗？

> ID：12335325
> 
> 赞同：2
> 
> 时间：2012-09-08T23:32:28.397
> 
> 标签：c++

> **可能重复：**
> [我是否需要显式调用基本虚拟析构函数？](https://stackoverflow.com/questions/677620/do-i-need-to-explicitly-call-the-base-virtual-destructor)

假设您有以下内容：

```
class ParentClass {
    ...
    virtual ~ParentClass(); 
```

和

```
class ChildClass {
    ...
    virtual ~ChildClass(); 
```

哪个析构函数会被调用？父母和孩子的析构函数都会被调用吗？目前没有在我的计算机上设置 C++ 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:36:02.080

如果`ChildClass`是从派生的，`ParentClass`那么首先调用派生的析构函数，然后是父类。正如它在您的代码中所代表的那样，`ChildClass`不继承自`ParentClass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:38:53.083

是的，两个构造函数都被调用：构造和销毁是对称的：所有子对象都以与创建它们的顺序完全相反的顺序被销毁。对于破坏顺序，析构函数是否为虚拟无关紧要。虚拟析构函数与非虚拟析构函数的唯一影响是当`delete`使用指向基的指针 ing 驱动类型的对象时：如果基的析构函数不是虚拟的，这将导致未定义的行为。

# sockets - 将 SSL 流与异步 System.Net.Sockets 一起使用

> ID：12335328
> 
> 赞同：0
> 
> 时间：2012-09-08T23:33:05.050
> 
> 标签：sockets, ssl, asynchronous, stream, certificate

我的服务器现在使用异步 System.Net.Sockets 运行，但我想使用 SSL 流。我对使用 SSL 很陌生，所以如果有人可以帮助我，这是我的服务器代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;

    public class Wrapper
    {
        public byte[] buffer;
        public Socket _socket;
        public object connector;
    }

    public class WinSocket
    {
        private Dictionary<string, byte> Connections;
        public event Action<Wrapper> AnnounceNewConnection;//Event Handlers
        public event Action<Wrapper> AnnounceDisconnection;
        public event Action<byte[], Wrapper> AnnounceReceive;
        private Socket _socket;
        public int MAX_USER_CONNECTIONS = 2;//Max User Connections

        public WinSocket(ushort port)
        {
            try
            {
                Connections = new Dictionary<string, byte>();
                _socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                _socket.Bind(new IPEndPoint(IPAddress.Any, port));
                _socket.Listen(500);
                _socket.BeginAccept(AcceptConnections, new Wrapper());
            }
            catch (Exception e)
            {
                Console.WriteLine(e);//write an exception
            }
        }

        private void AcceptConnections(IAsyncResult result)
        {
            try
            {
                Wrapper wr = result.AsyncState as Wrapper;
                wr._socket = _socket.EndAccept(result);
                #region Invisible
                string IP = wr._socket.RemoteEndPoint.ToString().Split(':')[0].ToString();//Get user ip
                if (!Connections.ContainsKey(IP))
                    Connections.Add(IP, 1);
                else
                    if (Connections[IP] <= MAX_USER_CONNECTIONS)//Maximum Connections Per IP
                    {
                        byte connections = Connections[IP];
                        Connections.Remove(IP);//Limit exceeded
                        Connections.Add(IP, (byte)(connections + 1));
                    }
                    else
                    {
                        wr._socket.Disconnect(false);
                        _socket.BeginAccept(AcceptConnections, new Wrapper());
                        return;
                    }
                #endregion
                wr.buffer = new byte[65535];
                wr._socket.BeginReceive(wr.buffer, 0, 65535, SocketFlags.None, ReceiveData, wr);
                AnnounceNewConnection.Invoke(wr);
                _socket.BeginAccept(AcceptConnections, new Wrapper());
            }
            catch (Exception e)
            {
                Console.WriteLine(e);//write an exception
            }
        }

        private void ReceiveData(IAsyncResult result)//Receiving Data
        {
            try
            {
                Wrapper wr = result.AsyncState as Wrapper;
                string IP = wr._socket.RemoteEndPoint.ToString().Split(':')[0].ToString();//Get UIP
                if (Connections.ContainsKey(IP))
                {
                    SocketError error = SocketError.Disconnecting;
                    int size = wr._socket.EndReceive(result, out error);
                    if (error == SocketError.Success && size != 0)
                    {
                        byte[] buffer = new byte[size];
                        Buffer.BlockCopy(wr.buffer, 0, buffer, 0, size);
                        AnnounceReceive.Invoke(buffer, wr);//The delegate
                        if (wr._socket.Connected)//Make sure socket is connected
                            wr._socket.BeginReceive(wr.buffer, 0, 65535, SocketFlags.None, ReceiveData, wr);//Start Receiving Data
                    }
                    else
                    {
                        if (wr._socket.Connected)
                        {
                            wr._socket.Disconnect(true);//Disconnect the client
                        }
                        byte connections = Connections[IP];
                        Connections.Remove(IP);
                        Connections.Add(IP, (byte)(connections - 1));
                        try
                        {
                            AnnounceDisconnection.Invoke(wr);
                        }
                        catch { }
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e);//write an exception
            }
        }
    } 
```

所以我的问题再次清楚地是：How to use SSL Stream with socket class like the ABOVE code

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:19:24.760

将该`Stream`类替换为[System.Net.SslStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)类。除了上面的代码，调用[AuthenticateAsServer](http://msdn.microsoft.com/en-us/library/ms145064)并在构造函数中传递服务器 SSL 证书`WinSocket`。

# vim - 空行可以在 Vim 中显示为其他内容吗？

> ID：12335329
> 
> 赞同：2
> 
> 时间：2012-09-08T23:33:13.420
> 
> 标签：vim

我希望我的 Vim 将空行显示为字符串`###`，如下所示：

[![所需的空行显示](../Images/fda819d2fde72b65082878a83036f912.png)](https://i.stack.imgur.com/gYUsE.png)

我希望它的工作方式与我将制表符 char 替换`>---`为`set listchars=tab:>-`. 只是以这种方式显示，而不是实际插入它们。

此外，如果它能够适应我的终端大小，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T05:56:40.563

通过折叠可以达到预期的效果。如果我们单独创建包含缓冲区空行的单行折叠，它们都将被标记为折叠。唯一剩下的就是相应地自定义突出显示。

首先，我们需要自动创建折叠。为此，我们可以将折叠切换到该`expr`方法，然后将`foldexpr`选项设置为仅针对空行计算为非零值：

```
:setl foldmethod=expr
:setl foldexpr=empty(getline(v:lnum)) 
```

我们接下来应该做的是让这些折叠自动关闭以触发折叠突出显示：

```
:setl foldminlines=0
:setl foldlevel=0
:set foldclose=all 
```

最后，要在折叠线中重复一个自定义字符，我们只需清空关闭折叠显示的文本，并更改​​填充字符：

```
:setl foldtext=''
:set fillchars+=fold:# 
```

为方便起见，将上述命令组合在一个函数中，我们得到以下结果：

```
function! FoldEmptyLine()
    setl foldmethod=expr
    setl foldexpr=empty(getline(v:lnum))
    setl foldminlines=0
    setl foldlevel=0
    set foldclose=all
    setl foldtext=''
    set fillchars+=fold:#
endfunction 
```

当然，这个技巧的缺点是它会干扰折叠的通常应用，如果用户大量依赖折叠用于其他目的，则无法在不修改的情况下轻松使用。

# android - 如何在姜饼上使用冰淇淋三明治 UI 小部件？

> ID：12335331
> 
> 赞同：-1
> 
> 时间：2012-09-08T23:33:22.550
> 
> 标签：android, android-2.3-gingerbread

抱歉，由于我是stackoverflow的新手，我无法正确发布图片。

我已经在 Android 2.3 上实现了带有[“tabs+swipe”导航的](http://developer.android.com/design/patterns/actionbar.html#considerations-split-action-bars)[ActionBarSherlock 。](http://actionbarsherlock.com)我的目标是在 Gingerbread 上获得尽可能纯的 ICS 体验。但是，本机 Gingerbread UI 小部件仍会显示，如这张图片中**的绿星所示：**

 **![](../Images/1153c479b0a7409f719268a23dfd1717.png)

## 所以问题是：

*   如何让 Gingerbread 轻松显示一组原生 Ice Cream Sandwich UI 小部件？（即，不用大惊小怪地创造一切是一种“定制”的方式。）

图片上的注释，以免我混淆你：

*   GREEN STARS 中的兴趣点，它是本机 Gingerbread UI 小部件的一部分。
*   那是我的物理 Android 2.3.3 平板电脑。
*   它出现在屏幕底部的控制栏，非常类似于蜂窝，但该栏实际上只是一个 OEM UI 产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:03:36.113

我相信 HoloEverywhere 项目使您能够在旧设备上使用以 Holo 为主题的小部件： [https ://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)**

# docx4j - 使用 docx4j 从 Word 文档中解析内容

> ID：12335332
> 
> 赞同：2
> 
> 时间：2012-09-08T23:33:26.350
> 
> 标签：docx4j, word-2010

感谢[之前的回答](https://stackoverflow.com/questions/12100736/can-poi-or-docx4j-read-word-docs-that-are-password-protected)，我现在可以阅读受密码保护的 Word 2010 文档。（我必须将它们从 .doc 一个一个翻译成 .docx。它们可以追溯到 1994 年，但没关系。）

我写了一个简单的 Java 类来开始：

```
package model.docx4j;

import model.JournalEntry;
import model.JournalEntryFactory;
import org.docx4j.openpackaging.exceptions.Docx4JException;
import org.docx4j.openpackaging.packages.OpcPackage;
import org.docx4j.openpackaging.parts.Parts;

import java.io.IOException;
import java.io.InputStream;
import java.security.GeneralSecurityException;
import java.util.LinkedList;
import java.util.List;

/**
 * JournalEntryFactoryImpl using docx4j
 * @author Michael
 * @link
 * @since 9/8/12 12:44 PM
 */
public class JournalEntryFactoryImpl implements JournalEntryFactory {
    @Override
    public List<JournalEntry> getEntries(InputStream inputStream, String password) throws IOException, GeneralSecurityException {
        List<JournalEntry> journalEntries = new LinkedList<JournalEntry>();
        if (inputStream != null) {
            try {
                OpcPackage opcPackage = OpcPackage.load(inputStream, password);
                Parts parts = opcPackage.getParts();
            } catch (Docx4JException e) {
                LOGGER.error("Could not load document into docx4j", e);
                throw new IOException(e);
            }
        }
        return journalEntries;
    }
} 
```

还有一个 JUnit 测试来驱动它：

```
package model.docx4j;

import model.JournalEntry;
import model.JournalEntryFactory;
import org.docx4j.openpackaging.exceptions.Docx4JException;
import org.docx4j.openpackaging.packages.OpcPackage;
import org.docx4j.openpackaging.parts.Parts;

import java.io.IOException;
import java.io.InputStream;
import java.security.GeneralSecurityException;
import java.util.LinkedList;
import java.util.List;

/**
 * JournalEntryFactoryImpl using docx4j
 * @author Michael
 * @link
 * @since 9/8/12 12:44 PM
 */
public class JournalEntryFactoryImpl implements JournalEntryFactory {
    @Override
    public List<JournalEntry> getEntries(InputStream inputStream, String password) throws IOException, GeneralSecurityException {
        List<JournalEntry> journalEntries = new LinkedList<JournalEntry>();
        if (inputStream != null) {
            try {
                OpcPackage opcPackage = OpcPackage.load(inputStream, password);
                Parts parts = opcPackage.getParts();
            } catch (Docx4JException e) {
                LOGGER.error("Could not load document into docx4j", e);
                throw new IOException(e);
            }
        }
        return journalEntries;
    }
} 
```

我在测试中设置了一个断点，以查看 docx4j 在读取我的文档后在做什么。我看到一个包含 8 个部分的列表，但我穿过树而没有找到内容。

每个文档都包含一个带有日期和内容的页面，但我找不到页面。他们住在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T11:40:28.650

主文档内容位于“主文档部分”，通常命名为“/word/document.xml”。

使用 docx4j 获取它的常用方法是：

```
WordprocessingMLPackage wordMLPackage = (WordprocessingMLPackage)opcPackage;
MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart(); 
```

但你会期望你的方法也能奏效。

# javascript - Return 的符号表示 | \x0a 与其他

> ID：12335334
> 
> 赞同：1
> 
> 时间：2012-09-08T23:34:43.947
> 
> 标签：javascript, regex

我正在尝试验证我的代码。

这是一个没有 0xa 的正则表达式检查：

![在此处输入图像描述](../Images/3c84a988c22584d1d2db187fb96f4f5f.png)

正如您在某些有返回字符的地方看到的那样，正则表达式不匹配 bc 0xa 用于返回字符。

这是一个包含 0xa 的正则表达式检查：

![在此处输入图像描述](../Images/64bd5aa9ce45fb620b0adc2f5caefe09.png)

如您所见，它全部包含在内。

简而言之，我的 .js 包含以下字符：

```
[\x0a\x20-\x7e] 
```

但是我担心为什么它有时会使用 return 作为：

```
\\ the other return character ( have not verified yet ) 
```

有时它使用返回作为：

```
\x0a 
```

**有关的**

[http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:55:11.540

我很惊讶它看起来像是将行组合在一起，但它与您的正则表达式中的星号有关。将您的正则表达式更改为`[\x20-\x7e]+`. 使用加号（一个或多个匹配项）而不是星号（零个或多个匹配项）我认为您会得到预期的结果。

如果您想查看正则表达式的 inputText 字段中的内容，请在浏览器中打开控制台并运行`document.getElementById('inputText').value.replace(/[^\x20-\x7e]/g,function(a){‌​a = a.charCodeAt(0).toString(16); return '\\u0000'.slice(0,6-a.length) + a;});`，您将获得字符串的真实表示。

漂亮的印刷品：

```
document.getElementById('inputText').value.replace(
  /[^\x20-\x7e]/g,
  function (a){‌
    ​a = a.charCodeAt(0).toString(16);
    return '\\u0000'.slice(0,6-a.length) + a;
  }
); 
```

# javascript - jQuery Mobile 上的 AJAX 请求

> ID：12335335
> 
> 赞同：0
> 
> 时间：2012-09-08T23:34:53.627
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我目前有一个通过`foreach()`循环生成的动态数量：

```
<div id="<?php echo $data['id']; ?>" data-role="collapsible" data-theme="a">
    <h1 style="white-space: normal"><?php echo $data['text']; ?></h1>
    <center>
        <p><?php echo $data['text']; ?></p>
    </center>
</div> 
```

我想要的是将 AJAX POST 请求分派到另一个资源，其中`$data['id']`包含可折叠`<div>`打开时的参数。

我尝试使用一种`.click`方法，但无法使其适用于`<div>`s 的动态列表。我觉得等到动画完成（以确保页面仍然响应）的方法是最好的方法。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:47:27.343

对于动态生成的内容，我建议您使用该`.on()`方法。以下面的代码为例：

```
$('#container').on('click', 'div', function() {
    var id = $(this).attr('id');
    $(this).animate({
        your animation
    }, 5000, function() {
        $.ajax({
            url: "another_resource.php",
            type: "POST",
            data: {
                id: id
            }, //data to be sent
            dataType: "text", //return data type
            async: false,
            success: function(data) {
                console.log(data);
            },
            error: function(data) {
                console.log(data);
            }
        });
    });
} 
```

第一个参数是事件（多个事件可以用空格分隔），而第二个参数可以是目标元素，也可以是要执行的函数。在这种情况下，最后一个当然是要执行的函数。

当动画完成时，ajax 将按要求执行。

# ruby - Ruby：通过一组lambdas“管道”一组值的功能性方法？

> ID：12335336
> 
> 赞同：1
> 
> 时间：2012-09-08T23:35:04.933
> 
> 标签：ruby, map, lambda

给定一个 lambda 数组和一个值数组（均在运行时创建），

```
values.map{ |value| lambdas[0].(value) } 
```

将（显然）将第一个 lambda 表达式应用于每个值的结果作为数组返回。但我需要做的是应用所有的 lambda，即相当于

```
values.
  map{ |value| lambdas[0].(value) }.
  map{ |value| lambdas[1].(value) }.
  ...
  map{ |value| lambdas[-1].(value) } 
```

我当然可以写一个方法来做到这一点，例如

```
def map_all(lambdas, values)
  if lambdas.length == 0
    values
  else
    map_all(lambdas.drop(1), values.map{ |value| lambdas.first.(value) })
  end
end 
```

但是有没有更优雅或惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:41:59.540

喏，给你：

```
values.map { |value| lambdas.inject(value) { |v,l| l.(v) } } 
```

# jquery - jQuery tablesorter.js 错误行 600

> ID：12335340
> 
> 赞同：2
> 
> 时间：2012-09-08T23:36:35.483
> 
> 标签：jquery, tablesorter

我想使用[tablesorter.js](http://tablesorter.com/docs/index.html)。

在 FireBug 中，当我启动时`$("#myTable").tablesorter();`，它会返回`[table#myTable.table]`。

但是当我想排序时`$("#myTable").tablesorter( {sortList: [[0,0], [1,0]]} );`，它会返回这个错误：

```
TypeError: table.config.parsers is undefined
...tion("text", "asc", c) : makeSortFunction("text", "desc", c)) : ((order == 0) ? ...
jquery.tablesorter.js (ligne 600) 
```

页面启动时没有错误，我使用`ready`函数来启动 tablesorter。

这是一个简短的版本：

```
<script type="text/javascript" src="/static/js/jquery.tablesorter.js"></script>
<script type='text/javascript'>
$(function() { 
   $("#myTable").tablesorter(); 
});
</script>

<table id="myTable" class="table table-condensed table-striped tablesorter">
 <thead>
  <tr>
   <th></th>
   <th>Nom</th>
   <th>Taille</th>
  </tr>
 </thead>
 <tbody>

 </tbody>
</table> 
```

我使用来自推特的引导程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:59:56.913

与其重新初始化插件来更改表格的排序，不如在表格`sorton`上触发一个事件。请参阅[此演示](http://tablesorter.com/docs/example-trigger-sort.html)，并尝试以下代码：

```
var sorting = [[0,0], [1,0]];

// note: the square brackets around sorting are required!
$("table").trigger("sorton", [sorting]); 
```

我还制作了[这个演示](http://jsfiddle.net/Mottie/eY8uH/193/)来展示使用该`sortList`选项应该可以工作。

但我想知道你是否只在 IE 中遇到这个问题？我似乎记得 IE 不喜欢驼峰式 ID...也许尝试将表 id 更改为`mytable`而不是`myTable`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-20T21:39:17.597

我有同样的错误。在挖掘插件代码并搞砸后，我发现标题单元格的数量与列数不匹配。毕竟这是一个糟糕的 HTML，而不是脚本。从那时起，tablesorter 就可以完美运行。

# php - 速记 IF/ELSE 条件 PHP - 我做错了什么？

> ID：12335341
> 
> 赞同：0
> 
> 时间：2012-09-08T23:36:38.170
> 
> 标签：php, mysql, select, selected

我正在尝试基于 mySQL 查询在我的 SELECT/OPTION HTML 标记中实现默认的 SELECTED 选项，但是当条件为真时，不显示“已选择”：

```
<select>
<option value=1 <?php ($rowRR[assignedRad]=1 ? ' selected="selected"' : '');?> >GE</option>
<option value=2 <?php ($rowRR[assignedRad]=2 ? ' selected="selected"' : '');?> >AN</option>
<option value=3 <?php ($rowRR[assignedRad]=3 ? 'selected' : '');?> >DD</option>
<option value=4 <?php ($rowRR[assignedRad]=4 ? 'selected' : '');?> >JS</option>
</select> 
```

我不应该当我回显 $rowRR[assignedRad] 它返回值 INT 所以这不是问题。mySQL 查询很好。

selected="selected" 或只是 'selected' 都不起作用。我都试过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:37:39.820

你需要一个双 == 而不是一个。一个等号用于赋值。double 用于比较

您还缺少 echo 语句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:37:52.727

```
<select>
<option value=1 <?php echo ($rowRR['assignedRad']==1 ? ' selected="selected"' : '');?>     >GE</option>
<option value=2 <?php echo ($rowRR['assignedRad']==2 ? ' selected="selected"' : '');?> >AN</option>
<option value=3 <?php echo ($rowRR['assignedRad']==3 ? 'selected' : '');?> >DD</option>
<option value=4 <?php echo ($rowRR['assignedRad']==4 ? 'selected' : '');?> >JS</option>
</select> 
```

所以你忘记了 ECHO，你需要一个双 ==。

# html - 限制文本选择区域

> ID：12335344
> 
> 赞同：2
> 
> 时间：2012-09-08T23:37:19.557
> 
> 标签：html, css, selection

例如，在 GitHub 上，如果您选择代码，它只会选择代码而不是它旁边的行号：

![文本选择限制](../Images/91227e7763721972cb1f1b8c038f5a0a.png)

这是因为他们使用了一个表格—— a 中的行号和 a`td`中的代码`td`。

我怎样才能做到这一点`div`？

编辑：请参阅[www.duncannz.com](http://www.duncannz.com)并尝试突出显示文本。我希望选择的东西只在内容区域内，而不是填充页面的宽度（例如选择背景不超过黑色边框）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:49:12.377

示例：http: [//jsfiddle.net/gfp28/](http://jsfiddle.net/gfp28/)

```
<div>

  <ul class='no_select'>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
  </ul>

  <ul>
      <li>111111111</li>
      <li>222222222</li>
      <li>333333333</li>
      <li>444444444</li>
      <li>555555555</li>
  </ul>

</div>​ 
```

CSS：

```
ul {
  display: inline; 
  float: left; 
  margin: 10px;
}

.no_select { 
 -webkit-touch-callout: none;
 -webkit-user-select: none;
 -khtml-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 user-select: none;
} 
```

如果将此添加到您的 css 中，它应该将突出显示限制为容器的宽度：

```
#actualcontent, #actualcontent * { position: relative; } 
```

# php - 如何在 MySQL 上获取 vBulletin 线程 ID？

> ID：12335349
> 
> 赞同：0
> 
> 时间：2012-09-08T23:37:44.077
> 
> 标签：php, mysql, vbulletin

```
$reviewsthread = $vbulletin->db->query_first("
    SELECT
        thread.threadid, thread.title,
        post.pagetext AS preview
    FROM
        ".TABLE_PREFIX."thread AS thread INNER JOIN
        ".TABLE_PREFIX."post AS post ON thread.firstpostid = post.postid
    WHERE
        thread.forumid = 12
        AND
        thread.title LIKE '%".$vbulletin->db->escape_string($moviedata['title'])."%'
    LIMIT
        1
"); 
```

上面是 php 代码的一部分，用于在外部电影页面上显示来自论坛线程的帖子内容。

假设正在查看 AVATAR 电影页面。它会自动检查论坛（只有 id(12) 的电影评论论坛）是否有任何线程标题包含“头像”字样。如果是，则它正在电影页面中显示线程帖子内容。

由于我想提供该线程的链接，因此我也需要知道线程标题。

在这一点上我需要帮助。如何获取论坛线程 ID，以便添加链接 html 模板，例如：

```
<a href="showthread.php?t=$moviereviewthreadid">Click here to read the entire review...</a> 
```

在此先感谢...问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:10:24.647

你能解释更多吗？

似乎答案就在您的问题之内！

vb中线程的URL

```
<a href="SITE URL/showthread.php?t=THREAD ID > title </a> 
```

所以你可以把它分配给 var 然后像你一样把它：

```
$moviereviewthreadid = $vbulletin->db->query_read("SELECT thread.threadid FROM ".TABLE_PREFIX."thread WHERE forumid = 12 ") 
```

然后 ：

```
<a href="showthread.php?t=$moviereviewthreadid">Click here to read the entire review...</a> 
```

# javascript - javascript/regex 忽略双引号中的分号

> ID：12335355
> 
> 赞同：3
> 
> 时间：2012-09-08T23:38:11.930
> 
> 标签：javascript, regex, split

我对这个有点难过 - 我有一个几乎是分号分隔的字符串，它会是这样的：

> 一; 二; 三“四；五；六”；七

我想使用 javascript 中的正则表达式将其拆分为这样的数组（例如，忽略双引号内的任何分号）：

> ['一二三四五六七']

我尝试过调整已知的工作 CSV 函数，但它们似乎能够适应第三个元素（'三“四；五；六”；'）。

这似乎是一种正则表达式类型的问题，但如果存在使用多于正则表达式的解决方案，我当然会感兴趣！

**更新**：我还应该注意，引号字符串中的分号之前或之后可能有空格。我已经更新了示例以反映这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:59:20.057

假设您不允许在引号内使用转义引号（例如`"this has \"escaped quotes\" inside"`），那么这应该可以工作：

```
var rx = /(?!;|$)[^;"]*(("[^"]*")[^;"]*)*/g;
var str = 'one; two; three "four;five;six"; seven';
var res = str.match(rx)
// res = ['one', ' two', ' three "four;five;six"', ' seven'] 
```

请注意，您需要在正则表达式的开头进行[否定前瞻](http://www.regular-expressions.info/lookaround.html) ，以防止它与空字符串匹配，否则该方法会出于某种原因匹配每个分号前面的空字符串。`(?!;|$)``match`

***更新：***

我认为这个正则表达式也应该与转义引号一起使用（尽管我很感激关于正确性的反馈）。我还在`\s`负前瞻模式中添加了额外的内容，以去除前面分号后的空格。

```
/(?!\s|;|$)[^;"]*("(\\.|[^\\"])*"[^;"]*)*/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:14:57.387

这会去除分号前后的空格：

```
'one; two; three "four;five;six"; seven'.match(/(?!;| |$)([^";]*"[^"]*")*([^";]*[^ ";])?/g)

['one', 'two', 'three";four;five;six"', 'seven']

'one ; two"; three ; "four" ; five ; "six ; seven'.match(/(?!;| |$)([^";]*"[^"]*")*([^";]*[^ ";])?/g)

['one', 'two" ; three ; "four" ; five ; "six', 'seven'] 
```

它不会尝试处理转义的引号。

# linux - 如何处理 shell 脚本中的错误/异常？

> ID：12335356
> 
> 赞同：6
> 
> 时间：2012-09-08T23:38:25.093
> 
> 标签：linux, bash, shell, unix

下面是我在 bash 中执行的脚本。它工作正常。

```
fileexist=0
for i in $( ls /data/read-only/clv/daily/Finished-HADOOP_EXPORT_&processDate#.done); do
  mv /data/read-only/clv/daily/Finished-HADOOP_EXPORT_&processDate#.done /data/read-only/clv/daily/archieve-wip/
  fileexist=1
done 
```

**问题陈述：-**

在我上面必须每天运行的 shell 脚本中`cron job`，我没有任何`error/exception handling mechanism`. 假设如果出现任何问题，那么我不知道发生了什么？

由于执行上述脚本后，有`some other scripts that will be dependent on the data provided by above script`，所以我总是收到其他依赖我的脚本数据的人的抱怨，说发生了错误。

那么`get notified if anything wrong has happened`我的脚本有什么办法吗？假设`cluster is having some maintenance`当时我正在运行我的脚本，那么它肯定会失败，那么如果我的上述脚本失败了，我可以得到通知，这样我就可以确定发生了错误。

希望我的问题足够清楚。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T06:30:28.987

您可以检查每个命令的退出状态，正如 freetx 回答的那样，但这是手动错误检查而不是异常处理。获得等效异常处理的标准方法`sh`是使用`set -e`. 这告诉`sh`一旦任何执行的命令失败（即以非零退出状态退出），就以非零状态退出。

如果它旨在使此类脚本中的某些命令（可能）失败，则可以使用构造`COMMAND || true`，这将强制该表达式的退出状态为零。例如：

```
#!/bin/sh

# if any of the following fails, the script fails
set -e
mkdir -p destdir/1/2
mv foo destdir/1/2
touch /done || true    # allowed to fail 
```

另一种确保您在 cron 调用的脚本中出现问题时得到通知的方法是遵守 Unix 约定，即不[打印任何内容，除非发生错误](http://catb.org/esr/writings/taoup/html/ch01s06.html#id2878450)。成功的运行将在没有通知的情况下通过，不成功的运行将导致 cron 守护程序通过电子邮件通知您错误。请注意，本地邮件传递必须在您的系统上正确配置才能正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T00:27:39.643

每个 unix 命令行实用程序通常在成功时返回 0，在失败时返回非零。因此，您可以使用 $? 模式来显示最后的返回值并相应地处理事情。

例如：

```
> ls
> file1 file2
> echo $?
> 0
> ls file.no.exist
> echo $?
> 1 
```

因此，您可以将其用作基本错误检测，以查看是否出现问题。所以正常的方法是

```
some_command
if [ $? -gt 0 ]
then
handle_error here
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:30:54.930

好吧，如果其他脚本在同一台机器上，那么您可以在其他脚本中为此脚本执行 pgrep，如果发现睡眠一段时间并稍后尝试其他脚本，重新检查过程就消失了。

如果脚本在另一台机器甚至本地，另一种方法是在远程机器上生成一个临时文件，可通过正在运行的 http 浏览器访问该文件，其他脚本可以检查状态，即运行或完成

您也可以将脚本包装在另一个寻找这些错误的脚本周围，如果找到它，如果没有按照正常方式将结果发送给任何人，则通过电子邮件发送给您

```
go=0;
function check_running() {

         running=`pgrep -f your_script.sh|wc -l `
    if [ $running -gt 1 ]; then
        echo "already running $0 -- instances found $running ";
      go=1;
}

check_running;
if [ $go -ge 1 ];then
      execute your other script
else
   sleep 120;
    check_running;
fi 
```

# python - 分号有什么作用？

> ID：12335358
> 
> 赞同：56
> 
> 时间：2012-09-08T23:39:28.040
> 
> 标签：python, function, if-statement, syntax, break

我在网上获得了一个功能来帮助我完成当前的项目，并且它在某些行上有分号。我想知道为什么？是破坏功能吗？

```
def containsAny(self, strings=[]):
    alphabet = 'abcdefghijklmnopqrstuvwxyz0123456789'
    for string in strings:
        for char in string:
            if char in alphabet: return 1;
    return 0; 
```

我上网的功能几乎没有修改：

```
for string in strings:
    for char in string:
        if char in alphabet: return 1; 
```

上面是在说下面吗？

```
if char in alphabet:
    return 1
    break 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-08T23:40:35.673

分号在您显示的代码中没有任何作用。

我怀疑这是一个用另一种语言（C、Java、...）编程的人，在语句的末尾需要分号，这只是一种习惯（有时也发生在我身上）。

如果您想将多个 Python 语句放在同一行，可以使用分号分隔它们，请参阅此[Python 文档](http://docs.python.org/reference/compound_stmts.html)：

> 套件是由子句控制的一组语句。一个套件可以是一个或多个分号分隔的简单语句，与标题在同一行，在标题的冒号之后，或者它可以是一个或多个在后续行中的缩进语句

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-08T23:41:47.560

这里的分号没有任何作用。来自 C/C++/Java/（许多其他语言）背景的人出于习惯倾向于使用分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-05T16:42:11.630

C、C++ 和 Java 的程序员习惯于使用分号告诉编译器这是语句的结尾，但对于 Python，情况并非如此。

原因是在 Python 中，换行符是分隔代码行的明确方式。这是设计使然，它的工作方式已经过彻底的思考。因此，Python 代码是完全可读且明确的，没有任何特殊的语句结束标记（除了换行符）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-02T13:02:48.037

一般来说，分号什么都不做。但是，如果您使用的是 jupyter notebook（取决于您的版本），您可能会得到一个绘制两次的图形。plot 命令末尾的分号可以防止这种情况：

```
df.plot(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T14:56:06.580

正如其他答案所指出的那样，分号在那里什么都不做。它是一个分隔符（例如`print 1;print 2`）。但它不是这样工作的：（`def func():print 1;print 2;;print'Defined!'`是`;;`一个语法错误）。出于习惯，人们倾向于使用它（因为它在 C/Java 等语言中是必需的......）。

# c - 如何使用带有动态内存的新 Intel 指令分配 128 位数组？

> ID：12335359
> 
> 赞同：0
> 
> 时间：2012-09-08T23:39:42.850
> 
> 标签：c, instruction-set

我是新的英特尔指令，所以直到现在我一直在使用静态内存，所以我有一个声明：

```
__m128i  pResult[10]; 
```

但现在我想知道是否有可能以动态方式分配内存，如使用`malloc`或`calloc`但对于这个新指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:42:32.693

就像任何其他 malloc 一样：

```
__m128i *p = (__m128i*)malloc(10 * sizeof(__m128i)); 
```

# loops - 将文件名写入第一行的批处理文件

> ID：12335360
> 
> 赞同：0
> 
> 时间：2012-09-08T23:39:46.327
> 
> 标签：loops, batch-file, directory, dos

您好，首先感谢您花时间阅读本文。

我正在尝试编写一个简单的批处理文件，它将对文件夹中的每个文本文件做一件事。文本文件具有以下格式：

```
Format of txt files:
##### [delimeter "tab"] #####
##### [delimeter "tab"] #####
##### [delimeter "tab"] #####
....
EOF 
```

我需要在文件夹中的每个文件中添加一行作为标题。标头应包含文件名的一部分。文件名总是有 2-3 个字母和 3-5 个数字。我需要附加 x 和 y 的数字。

```
For instance for 
File CJF0185.PRN 

0185X [delimeter "tab"] 0185Y
##### [delimeter "tab"] #####
##### [delimeter "tab"] #####
##### [delimeter "tab"] #####
....
EOF 
```

到目前为止，我只能将文本添加到我知道名称的单个文件的第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:02:26.773

```
@echo off
setlocal enableDelayedExpansion
for %%F in (*.txt) do (
  for /f "delims=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz" %%n in ("%%~nF") do (
    >%%F.new echo %%nX  %%nY
    >>%%F.new type %%F
    move /y %%F.new %%F
  )
) 
```

批处理脚本的第一个 ECHO 语句中有一个硬编码的制表符，但我不确定该站点是否保留了制表符。没有已知的方法可以以编程方式批量生成制表符。

# java - Google App Engine 类生产环境

> ID：12335363
> 
> 赞同：0
> 
> 时间：2012-09-08T23:40:49.240
> 
> 标签：java, google-app-engine, production-environment, demo

如果在测试新代码后，我可以将更改发布到我的 GAE 应用程序的特定子域（例如`demo.my-gae-app.com`代替我的实时环境`my-gae-app.com`）或特定后端实例（如果子域被禁止或不是正确的解决方案） ，那就太好了这里）。

然后，我可以向我的 beta 测试人员演示新的代码更改，并针对真实的 GAE 环境运行性能测试。我知道 GAE SDK 带有一个开发应用程序服务器，但它会存根大多数 API 调用，并且根本不像生产环境那样处理缩放。尽管我们绝对会将它用于开发人员的本地沙箱以及我们的 QA 环境，但我只是觉得将代码发布到没有针对真正模仿生产的环境运行的产品中是不正确的。

其他 GAE 开发人员/团队如何处理这个问题？我真的只是想拥有一个预生产环境（如“演示”）......但实际上是在实时 GAE 应用程序服务器上。当然，我需要限制对这段代码的访问，以便只有我自己、我的开发人员、我的 beta 测试人员和我们的自动性能测试可以访问它......（这是踢球者）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T11:04:03.053

您可以通过以下方式将代码部署到非默认应用程序版本：

*   更改[appengine-web.xml](https://developers.google.com/appengine/docs/java/config/appconfig#About_appengine_web_xml)`version`中的标记值
*   `-V version`使用参数调用 appcfg.sh
*   更改 Google Eclipse 插件部署选项中的版本

完成后，您可以访问您的应用程序`version.appid.appspot.com`

请注意，不同版本可以访问相同的应用程序数据存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:16:30.307

我在 Google 应用程序引擎中注册了一个新应用程序，并通过在 eclipse 中更改 project 的设置来为其部署 beta 版本。然后使用谷歌的工具（见谷歌文档）我将生产数据存储的内容复制到新的测试版应用程序中。

*   提取数据时数据存储处于只读模式
*   在处理无主关系时，实体键可能会出现问题——有人知道这方面的信息吗？

这为我提供了一个完美的 beta 直播环境。

# android - Android ArrayList HashMap 不显示数据

> ID：12335365
> 
> 赞同：0
> 
> 时间：2012-09-08T23:41:28.887
> 
> 标签：android, arraylist, hashmap, listadapter

我需要你的帮助！谷歌上的 3 页紫色链接，我被这么简单的任务困住了！我想要做的是获取一个包含多个 HashMap 的 HashMap 类型的 ArrayList，并使用 ListAdapter 显示它们。我从 SQL DB 获取信息，我知道这是可能的，但我看不出我做错了什么，列表只是显示为空白。

```
public class History extends ListActivity {

    ArrayList<HashMap<String, String>> inboxList;
    HashMap<String, String> dealList;
    ListView lv;
    AddSQL entry;
    Button bRefresh;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.history);

        entry = new AddSQL(History.this);
        inboxList = new ArrayList<HashMap<String, String>>();

        ListAdapter adapter = new SimpleAdapter(History.this, inboxList, R.layout.history_list, new String[] { SEX, NAME, RATING, DATE },
                new int[] { R.id.sex, R.id.name, R.id.rating, R.id.date });
        inboxList = entry.getAllEntrys();
        setListAdapter(adapter);

    } 
```

/** 这是我的 SQL */

```
public ArrayList<HashMap<String, String>> getAllEntrys(){
    Log.d("Select", "Get");

    String s = "";
    String n = "";
    String r = "";
    String d = "";

    String select = "SELECT sex, name, rating, date FROM " + MAIN_TABLE;

    ArrayList<HashMap<String, String>> inboxList = new ArrayList<HashMap<String, String>>();
    Log.d("Select", "1");
    try{
        open();
        Cursor mCursor = database.rawQuery(select, null);
        while(mCursor.moveToNext()){

            HashMap<String, String> dealList = new HashMap<String, String>();
            s = mCursor.getString(mCursor.getColumnIndex(SEX)); 
            n = mCursor.getString(mCursor.getColumnIndex(NAME));
            r = mCursor.getString(mCursor.getColumnIndex(RATING));
            d = mCursor.getString(mCursor.getColumnIndex(DATE));

            dealList.put(SEX, s);
            dealList.put(NAME, n);
            dealList.put(RATING, r);
            dealList.put(DATE, d);
            inboxList.add(dealList);
        } 
        return null;    
    }catch (Exception e){
        Log.e("Sort By List", "ERROR: " + e);
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:46:33.847

您的 getAllEntrys 始终返回 null，应该是 try 块中的 inboxList。

# android - OpenCV for Android - 初始化矩阵

> ID：12335366
> 
> 赞同：4
> 
> 时间：2012-09-08T23:41:30.430
> 
> 标签：android, opencv

我想初始化一个 3 x 3 的十字形内核矩阵，并用它来扩大 OpenCV4Android 中的图像。在本机 C++ OpenCV 中，您可以：

```
Mat kernel = (Mat_<int>(3,3) << 0,1,0,1,1,1,0,1,0);
dilate(image, image, kernel); 
```

但是我怎样才能在Java中做相当于第一行的事情？不能将 Mat 视为数组，并且 Java 没有 << 运算符。似乎有一个名为 cvCreateStructuringElementEx 的 OpenCV 函数初始化 Mats 以用作内核，但我在 OpenCV4Android 中找不到这个函数。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:17:52.513

我从未尝试过，但检查它是否有效，至少这是 OpenCV4Android 设置结构元素的方法：

```
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_CROSS, new Size(3, 3)); 
```

另外，查看 copyTo() 方法，它可以接收一个掩码：

```
src_mat.copyTo(dst_mat, mask); 
```

# mysql - 如何在sql中选择特定的表？

> ID：12335375
> 
> 赞同：-1
> 
> 时间：2012-09-08T23:43:12.973
> 
> 标签：mysql, sql

> **可能重复：**
> [如何在 MySQL 中找到所有具有特定列名的表？](https://stackoverflow.com/questions/193780/how-to-find-all-the-tables-in-mysql-with-specific-column-names-in-them)

我想从 sql 中选择表，其中表有一个名为“TimeStamp”的列。如何列出所有将被选中的表中包含名为“TimeStamp”的列的所有表？我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:47:32.173

```
SELECT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME = 'timestamp'
      AND TABLE_SCHEMA='YourDatabase'; 
```

做完了。

[来源](https://stackoverflow.com/questions/193780/how-to-find-all-the-tables-in-mysql-with-specific-column-names-in-them)

# d - 在 D 中解析事物的惯用方法是什么？

> ID：12335378
> 
> 赞同：3
> 
> 时间：2012-09-08T23:43:42.720
> 
> 标签：d

假设我想解析 jquery 选择器语法并将事物转换为标记。

我应该将事物解析为字节数组吗？作为带有 std.string 的字符串？逐个字符，或者也许在火卫一的某个地方有博耶-摩尔搜索？D 有最快的正则表达式，所以也许是正则表达式？

如果有人可以链接到用 D 编写的任何好的解析器，那也将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T08:19:14.283

[Pegged](https://github.com/PhilippeSigaud/Pegged/wiki)易于使用的解析器生成器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:58:28.233

我在我的 dom.d 文件中写了一点 CSS 选择器：

[https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff](https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff)

如果您想使用它，只需获取文件 dom.d 和 characterencodings.d。

我这样做的方式是使用std.string。我不会称这为惯用语，甚至不会很好......但它很容易编写并且为我完成了工作。选择器字符串太短了，我认为速度无论如何都不重要。

对于 html 解析器，我逐个字符地执行该字符。一种更惯用的方法可能是在输入范围上进行模板化并返回输出范围。不久前，我为一个玩具示例做了类似的事情：

[http://arsdnet.net/dcode/lex.d](http://arsdnet.net/dcode/lex.d)

再说一次，我不会说这是理想的 D 方式……甚至是好的 D 方式，但它是一种可行的可能性。

# c - 在 VB.NET 项目中添加 DLL 的更好方法

> ID：12335379
> 
> 赞同：0
> 
> 时间：2012-09-08T23:43:43.343
> 
> 标签：c, vb.net, dll

我想在 VB 项目中使用用 C 编写的 DLL，以便将 DLL 复制到输出目录。我之前在这里问过这个问题并得到了一个很好的答案： [VB.Net using C DLL](https://stackoverflow.com/questions/11851761/vb-net-using-c-dll) 你所要做的就是进入项目菜单和“添加现有项目”。如果您将 DLL 的任何更新复制到项目文件夹中，这将非常有用。现在我有一个新项目，我将我的 C 项目文件夹放在 Visual Basic 项目文件夹中，希望 Visual Basic 会从该文件夹中获取 DLL 并将其复制到输出目录。哦不，他们永远不会那么容易。添加现有项目将该文件复制到项目文件夹。所以现在它总是获取 DLL 的旧副本，除非我手动修复它，我不想这样做。如何让 Visual Basic 实现我的愿望？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:36:56.593

当您执行“添加现有项目...”时，添加按钮有两个选项，一个会将链接添加到现有文件而不复制到您的项目，但它会复制到构建输出。

![在此处输入图像描述](../Images/9b332f4b2306b02e028a533fef86133b.png)

# python - if/elif 语句的多个条件

> ID：12335382
> 
> 赞同：12
> 
> 时间：2012-09-08T23:44:16.637
> 
> 标签：python, python-2.7, if-statement

我试图让一个 if 语句从多个条件触发，而无需使用不同的触发器多次重写该语句。例如：

```
if user_input == "look":  
    print description

if user_input == "look around":
    print description 
```

您如何将这些内容浓缩为一份声明？

我尝试使用“或”，它导致任何 raw_input 触发语句，无论输入是否匹配任何一个条件。

```
if user_input == "look" or "look around":  
    print description 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T23:51:39.727

你想做的是

```
if user_input == "look" or user_input == "look around":
    print description 
```

如果您有很多可能性，则另一种选择：

```
if user_input in ("look", "look around"):
    print description 
```

由于您使用的是 2.7，因此您也可以这样编写（在 2.7 或 3+ 中有效，但在 2.6 或更低版本中无效）：

```
if user_input in {"look", "look around"}:
    print description 
```

这使[`set`](http://docs.python.org/library/stdtypes.html#set)您的元素中的一个，搜索起来非常快（尽管只有当您检查的元素数量远大于 2 时才重要）。

* * *

您第一次尝试总是通过的原因是这个。Python 中的大多数东西都会计算为`True`（除了`False`,`None`或空字符串、列表、字典等）。`or`接受两件事并将它们评估为布尔值。所以`user_input == "look" or "look around"`被视为`(user_input == "look") or "look_around"`; 如果第一个是假的，就像你写的那样`if "look_around":`，它总是会通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:52:37.973

如果字符串遵循带有可选部分的模式，您可以使用正则表达式来匹配字符串，或者您可以进行数组查找：

```
if user_input in ["look", "look around"]:
    print description 
```

布尔运算符`or`仅适用于布尔值，它计算两边的表达式，`True`如果其中一个表达式的计算结果为 ，则返回`True`。它与自然语言无关'

# python - Python - 从用户输入的数据中过滤链接

> ID：12335385
> 
> 赞同：0
> 
> 时间：2012-09-08T23:44:19.227
> 
> 标签：python, html

什么是从用户输入数据中过滤链接并创建然后在 html 中使用的锚链接的一种安全有效的方法。就像在写一个问题时，你复制粘贴一个链接，它会自动成为一个锚链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:25:03.047

使用[Gruber 的正则表达式](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)来查找 URI。

```
import re

text = "foo http://www.stackoverflow.com bar"

uri_re = re.compile(r"""(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|"""
                    r"""www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?"""
                    r""":[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))"""
                    r"""*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|"""
                    r"""[^\s`!()\[\]{};:'".,<>?«»“”‘’]))""")

print uri_re.sub(r"""<a href="\g<0>">\g<0></a>""", text) 
```

结果：

```
foo <a href="http://www.stackoverflow.com">http://www.stackoverflow.com</a> bar 
```

现在，Gruber 正则表达式实际上将匹配部分 URI，例如`www.stackoverflow.com`（这缺少`http://`方案），当您将其粘贴到锚标记中时，这将不起作用。您可以编写一个函数来检查它并在必要时添加它，然后使用它来进行替换：

```
text = "foo www.stackoverflow.com bar"

def link(match):
    uri = match.group()
    if ":" not in uri[:7]:
        uri = "http://" + uri
    return r"""<a href="{0}">{0}</a>""".format(uri)

print uri_re.sub(link, text) 
```

# javascript - 为什么字符编码对 URL 很重要？

> ID：12335387
> 
> 赞同：1
> 
> 时间：2012-09-08T23:46:16.697
> 
> 标签：javascript, html, url, console

我目前正在学习 JavaScript，但我不明白为什么对 URL 进行编码很重要。

```
>>> var url = 'http://www.packtpub.com/scr ipt.php?q=this and that';
>>> encodeURI(url); 
```

**“http://www.packtpub.com/scr%20ipt.php?q=this%20and%20that”**

例如，在此示例中，将第一个 URL 更改为后一个 URL 的目的是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T23:54:39.833

这取决于您要使用该 URL 做什么。

当您只使用 document.location = url 时，您不希望它被编码。

如果您打算将该 URL 作为变量传递，那么是的，您希望对其进行编码，否则会混淆浏览器。例如：

[http://www.someurl.com?myFavwebsite=http://www.stackoverflow.com?someParam=test](http://www.someurl.com?myFavwebsite=http://www.stackoverflow.com?someParam=test)。

看看这可能会让浏览器感到困惑吗？

顺便说一句，永远不要在 url 或 php 文件中使用空格。我总是发现这会造成不必要的压力。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T00:04:03.897

根据 RFC 3986 标准，URL 中只允许使用有限数量的字符。例如，如果 URL 中有空格，除非您对其进行编码，否则这将使 URL 无效。

通常，浏览器可以通过自己进行编码来处理未正确编码的 URL，但这不是您作为 Web 开发人员应该依赖的东西。

当使用 URL 作为另一个 URL 的参数时，URL 编码也很重要。在这种情况下，需要对 URL 的保留字符进行编码，而不仅仅是不允许的字符。但是，为此，您不要使用`encodeURI`, 而是`encodeURIComponent`。

# scala - Scala中的换行符

> ID：12335388
> 
> 赞同：25
> 
> 时间：2012-09-08T23:46:25.560
> 
> 标签：scala, newline

我想像这样拆分以下 Scala 代码行：

```
ConditionParser.parseSingleCondition("field=*value1*").description 
  must equalTo("field should contain value1") 
```

但哪个是续行字符？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-09T00:01:10.300

用括号括起来：

```
(ConditionParser.parseSingleCondition("field=*value1*").description 
  must equalTo("field should contain value1")) 
```

Scala 没有“行继续符”——它总是在以下情况下推断出分号：

*   表达式可以结束
*   以下（不是空格）行不是以可以启动语句的标记开头
*   之前没有未关闭`(`或`[`发现

因此，要“延迟”分号推断，可以将方法调用或点放在行尾或将点放在下一行的开头：

```
ConditionParser.
parseSingleCondition("field=*value1*").
description must equalTo("field should contain value1")

a +
b +
c

List(1,2,3)
  .map(_+1) 
```

# http - 如何解码多部分 HTTP 响应？

> ID：12335391
> 
> 赞同：3
> 
> 时间：2012-09-08T23:47:09.210
> 
> 标签：http, c#-4.0, web-applications, multipart

我有一个 ASP.NET Web 应用程序，它返回一个包含 JSON 编码对象以及一堆二进制文件的多部分响应。（有关产生此内容的代码，请参阅[https://stackoverflow.com/a/12334553/98422](https://stackoverflow.com/a/12334553/98422) - 该问题也提供了一些背景知识）。

HTTP 响应数据如下所示：

```
--b621907a-a740-44f4-b495-a91a078b90ef
Content-Type: application/json; charset=utf-8

[1,2]

--b621907a-a740-44f4-b495-a91a078b90ef
Content-Type: image/jpeg

<image file content>

--b621907a-a740-44f4-b495-a91a078b90ef
Content-Type: text/plain

<text file content>

--b621907a-a740-44f4-b495-a91a078b90ef-- 
```

所以，我现在想在客户端消费响应。我的客户端是一个 C# 应用程序。

我怎样才能做到这一点？我认为它必须有一些框架支持，但我不确定从哪里开始寻找。

它可能不相关，但我在与 Web 服务器的大部分交互中使用 RestSharp。据我所知，RestSharp 将无法处理此响应（这很公平——它不是很 RESTy）。

我有什么选择？

# php - 使用 PHP mySQL simpleHTMLDOM 插入数据时在非对象上调用成员函数 find()

> ID：12335394
> 
> 赞同：0
> 
> 时间：2012-09-08T23:47:49.210
> 
> 标签：php, mysql, simple-html-dom

我有一个脚本可以解析网页中的某些元素并将它们存储在 mysql 数据库中。一切正常，直到我尝试拆分元素并将结果数据存储到数据库中。有什么想法可能是错的吗？这是我正在解析的页面：[http ://www.ratemyprofessors.com/SelectTeacher.jsp?sid=953](http://www.ratemyprofessors.com/SelectTeacher.jsp?sid=953)

这是我的代码：

```
<?php
include('simple_html_dom.php'); 

//connect to db (code emitted)

prof_List("http://www.ratemyprofessors.com/SelectTeacher.jsp?sid=953");

function prof_name($url)
{
    // collect data
    echo $url;
    $data = new simple_html_dom();  
    $data->load_file($url);
    $profName = $data->find("//*[@id=profName]", 0);
    $profName = strip_tags($profName);
    echo "Full Name: " . $profName = trim($profName);
    list($first, $last) = explode("&nbsp;", $profName);
    echo "fname: " .  $first;
    echo "lname: " . $last;

    //call mysql function
    insert_row($profName, $first, $last);

}

function insert_row($profName, $first, $last)
{
    $sql1="INSERT INTO PROFESSOR(name, firstname, lastname) VALUES('$profName','$first', '$last')";
    $sql1=strip_tags($sql1);
    echo $sql1;
    mysql_query($sql1) or die(mysql_error());  
    echo "Data Inserted!"; 
}

function prof_List($mainURL)
{

    $list = new simple_html_dom();  
    $list->load_file($mainURL);
    $profLinks = $list->find("//*[@class=profName]/a");
    foreach($profLinks as $profLink)
    {
        $profU=$profLink->href;
        echo $profURL = "http://www.ratemyprofessors.com/" . $profU;
        prof_name($profURL);
    }

}

?> 
```

这是我的输出：

```
Connected to MySQL
Connected to Databasehttp://www.ratemyprofessors.com/SelectTeacher.jsp?the_dept=All&sid=953&orderby=TLName&toggel=truehttp://www.ratemyprofessors.com/SelectTeacher.jsp?the_dept=All&sid=953&orderby=TLName&toggel=trueFull Name: fname: lname: INSERT INTO PROFESSOR1(name, firstname, lastname) VALUES('','', '')Data Inserted!http://www.ratemyprofessors.com/ShowRatings.jsp?tid=861228http://www.ratemyprofessors.com/ShowRatings.jsp?tid=861228
Fatal error: Call to a member function find() on a non-object in /Users/user1/Sites/simple_html_dom.php on line 879 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:53:46.090

我不认为你可以使用`find()`on `simple_html_dom()`。

试试这个：

```
$data = new simple_html_dom();  
$data->file_get_html($url);
$profName = $data->find("//*[@id=profName]", 0); 
```

[此链接](http://davidwalsh.name/php-notifications)提供了一个很好的基本示例。

# javascript - 为什么我不能在字段名称中使用 -？

> ID：12335395
> 
> 赞同：2
> 
> 时间：2012-09-08T23:47:56.497
> 
> 标签：javascript, html

基本上我只是想清除一个文本字段，这对我来说从来都不是问题。但是，这不起作用：

```
<html>
<body>

<form name="form">

<input type="text" name="input-field" value="Value" />

<input type="button" name="clear" value="Clear field" onclick="document.form.input-field.value = ''"; />

</form>

</body>
</html> 
```

但是，如果我将“input-field”重命名为“inputfield”并将 onclick 重命名为 onclick="document.form.inputfield.value = ''"; ...然后它工作正常。

但是...从字段名称中删除“-”在我的情况下不是一个选项（长解释）。

那么，如何清除包含“-”的文本字段？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T23:49:16.337

因为它不是有效的 JavaScript 标识符。但是，您可以改用以下内容：

```
document.form['input-field'].value 
```

出于同样的原因，您不能使用`var my-var`. 另一方面，如果你有一个`object`，比如`form`有几个键，你可以访问它的属性，就好像它是一个关联数组：

```
var form = {
  "input-field": 20,
  otherKey: 30
};
form.input-field; // Error
form.otherKey; // OK
form['input-field']; // OK 
```

### 参考：

*   **[标识符名称和标识符](http://ecma-international.org/ecma-262/5.1/#sec-7.6)**（ECMAScript 语言规范）
*   [**对象作为关联数组**](http://www.quirksmode.org/js/associative.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T23:52:17.103

`-`不是标识符中的有效字符，因为例如

```
document.form.input-field; 
```

被解释为

```
document.form.input - field; 
```

当然，您可以使用方括号表示法来解决问题：

```
document.form["input-field"]; 
```

# android - 如何让 Android 应用程序从暂停中恢复并优雅地恢复

> ID：12335396
> 
> 赞同：2
> 
> 时间：2012-09-08T23:48:23.420
> 
> 标签：android, lifecycle

我对 Android 活动生命周期非常熟悉，但我觉得我遗漏了一些在这里应该很明显的东西。

我有一个多活动 Android 应用程序；它使用静态变量（在应用程序类中）来处理跨不同视图使用的各种对象。当应用程序暂停（退出）并且Android（可能）清理内存以维护前台进程时，就会出现问题。当用户恢复应用程序时，它偶尔（并非总是）似乎回来并在用户离开的 Activity 中恢复，但静态变量为空。更糟糕的是，活动有时似乎在静态变量仍然存在的情况下恢复，但对象中的内部变量为空。

我最终实现了一个简单的完整性检查，它检查静态变量是否为空（以及相关对象的最重要的内部变量），如果失败则返回应用程序以启动。这确实减少了很多问题，但我仍然看到偶尔出现的问题，因为检查每个 resume() 的所有内容根本不切实际。

我真正需要的是，如果 Android 操作系统决定在应用程序处于非活动状态时需要从内存中清除任何非 GC 内容，那么该应用程序需要从头开始重新启动。我觉得应该有一种优雅的方式来做到这一点，但没有注意到文档中的任何内容。

有什么想法吗？其他人如何避免这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:58:15.643

如果 Android 决定完全终止您的进程，使用 Application 类来保留状态可能会导致意外行为。查看[类似问题的答案，](https://stackoverflow.com/a/4642069/465009) 即您可能应该在 Activity 生命周期回调中使用某种持久性（SharedPreferences 或某些 DB）。

# javascript - Div中的图像对齐以Jquery为中心

> ID：12335403
> 
> 赞同：0
> 
> 时间：2012-09-08T23:49:56.357
> 
> 标签：javascript, css, image, alignment, center

所以，我有一个用于登陆页面的水平和垂直居中的 div。我正在尝试将图像添加到 div，但是一旦我插入它，居中的 div 的内容就会被推到屏幕底部或一侧（请参阅[此处](http://adrienneadams.org/landing/)的页面）。我试图用这个 CSS 解决这个问题：

```
#landlogo {
display: block;
margin-left: auto;
margin-right: auto;
float: left;
clear: both;
} 
```

但无济于事。出于某种原因，图像拒绝像页面上的其他组件一样与文本上方的中心对齐。我想 Jquery 可能存在问题，以某种方式阻止它以图像正确居中，但我想在我尝试任何更深入的解决方案之前，我可能会以更敏锐的头脑运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:56:01.227

您已`float:left`被应用到 img。

一旦我在浏览器中删除该 css，它就会自动居中。

# java - 使用for循环遍历java中的列表

> ID：12335405
> 
> 赞同：3
> 
> 时间：2012-09-08T23:50:17.020
> 
> 标签：java, list, for-loop

如何使用索引遍历列表数据结构。例如，考虑一个列表形式的句子，每个元素都是一个单词。我可以使用索引逐步浏览每个单词吗？像这样的东西——

```
// sentence defined something like this - List<String>
int size = sentence.size();
for (int i=0; i<size-1; i++)
{
    System.out.println(sentence[i] + " " + sentence[i+1]);
} 
```

当然，上面的代码不起作用，但可以在这些行上做些什么吗？如您所见，我想访问两个连续的元素并使用迭代器，它开始变得非常混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T23:52:09.587

您可以使用该`get(i)`方法代替`[i]`：

```
for (int i=0; i<size-1; i++) {
    System.out.println(sentence.get(i) + " " + sentence.get(i+1));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T23:53:34.443

`[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)`实例与数组不同。他们有特定的方法来获取特定索引的项目。试试这个：

```
// sentence defined something like this - List<String>
int size = sentence.size();
for (int i=0; i<size-1; i++)
{
    System.out.println(sentence.get(i) + " " + sentence.get(i + 1));
} 
```

现在，如果您有一个数组（例如`String[] sentence = new String[]{"hello", "there"}`），那么您所拥有的就可以了。

附带说明一下，Java 有一个 for-each 循环，可以在*数组*和`List`s 上使用：

```
for (String s : sentence) {
    // do something
} 
```

当然，这不能在您的情况下使用，因为您在循环的每次迭代中访问多个索引处的元素 - 但重要的是要知道存在这样的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T01:03:19.673

Java 中的`x[i]`表达式语法只能用于数组。没有其他的。

正如其他答案所述，使用索引逐步遍历 Java 列表元素的方法是使用`List.get(int)`. 但是，执行此操作时需要考虑一个重要的性能问题。

问题是`get(int)`调用的成本取决于`List`您使用的实现类：

*   对于 an `ArrayList`（或 a `Vector`），`get(int)`对长度为 N 的列表的操作是`O(1)`。这意味着它不依赖于列表长度，实际上它很便宜：只比`someArray[i]`.

*   对于 a `LinkedList`，`get(int)`列表上的操作必须从头开始遍历列表，直到到达您要求的位置。如果列表长度为 N，则（假设列表中的随机位置）的*平均*成本为; 即它与列表长度成正比。如果长度很长，那将是昂贵的。`get(int)``O(N)`

相比之下，如果您使用 an `Iterator`（显式地，或使用`for (E e : l)`语法隐式地），获取每个元素将用于和`O(1)`中的所有列表实现（忽略多线程问题，例如激烈的争用）。`java.util``java.util.concurrent`

话虽如此，在某些情况下迭代器不起作用，应用程序需要使用索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T00:00:02.473

在这种情况下，您也可以使用 Iterator 例如：

首先将你的元素放在arraylist上并尝试像这样使用Iterator：

```
ArrayList arrayList = new ArrayList();

Iterator itr = arrayList.iterator();

while(itr.hasNext())
{
  System.out.println(itr.next()); // Print out the elements from arraylist

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T00:40:12.940

您可以在不使用索引的情况下处理列表中的连续值对。这是一种方法：

```
private void processWordsInSentence(List<String> sentence) {
    Iterator<String> it = sentence.iterator();
    if (it.hasNext()) {
        String previous = it.next();
        while(it.hasNext()) {
            String current = it.next();

            // use previous and current values, e.g.
            System.out.println(previous + " " + current);

            previous = current;
        }
    }
} 
```

为什么要使用这样的东西而不是`sentence.get(index)`？我会提供几个原因：

1.  在您的示例中，您的处理实际上与列表中的连续值有关，而不是它们的位置。因此，必须明确地摆弄索引没有“附加值”。

2.  请记住，这`List<T>`是一个具有多个实现的接口。`ArrayList<T>`在恒定时间内执行`.get(index)`，但对 a 的相同调用`LinkedList<T>`需要与 的值成比例的时间`index`。所以可能会有一个真正的性能考虑。

上面的`processWordsInSentence`实现必须明确处理少于两个元素的列表的情况。`if`如果您更喜欢这种风格，可以使用语句编写保护内部的循环`for`，以更积极地将遍历与处理实际数据分开。

```
private void processWordsInSentence(List<String> sentence) {
    Iterator<String> it = sentence.iterator();
    if (it.hasNext()) {
        for (
            String previous = it.next(), current = null;
            it.hasNext();
            previous = current
        ) {                
            // use previous and current values, e.g.
            System.out.println(previous + " " + current);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-24T05:57:14.960

试试这个简单的代码：

```
List mobileSoftwares = new ArrayList();    
mobileSoftwares.add("Android");    
mobileSoftwares.add("IOS");    
mobileSoftwares.add("Blackberry");    
int size = mobileSoftwares.size();    
for (int i = 0; i < size - 1; i++)     
{           
   System.out.println(mobileSoftwares.get(i));
} 
```

# cassandra - 通过 UUID 检索 Astyanax

> ID：12335409
> 
> 赞同：1
> 
> 时间：2012-09-08T23:50:39.673
> 
> 标签：cassandra, uuid, astyanax

我们如何使用 Astyanax 在 Cassandra 中检索一行？

我有一个需要在服务器端进行分页的 Web 应用程序，数据库是 cassandra。行键是一个 UUID，我一行中有几列，所以我试图对行键进行分页。

我已经制定了一个我并不完全满意的解决方案。问题是，当我根据从 UI 获得的搜索过滤器进行第一次搜索时，我不知道第一行的 UUID，所以我准备了一个查询，它给出了前 6 条记录，我存储了MAP 中的第 6 条记录并将其放入会话中，因此当用户从 UI 请求第二页时，我检索此键（UUID）并将其作为要检索的下一组记录的开始。我试图找到一种更清洁的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:55:27.563

编辑以响应问题更改...

在这种情况下，听起来你做得很好。听起来您也正在使用 OOP，否则行不按顺序排列。虽然 playOrm 的解决方案更优雅地返回您存储在会话中的光标，但我认为您所拥有的一切都很好。

编辑因为我们的代码更改了此链接中的第 74 行，我们就是这样做的（您基本上可以深入到该游标类以查看我们所做的事情）。

[https://github.com/deanhiller/playorm/blob/master/src/main/java/com/alvazan/orm/layer9z/spi/db/cassandra/Cas​​sandraSession.java](https://github.com/deanhiller/playorm/blob/master/src/main/java/com/alvazan/orm/layer9z/spi/db/cassandra/CassandraSession.java)

如果您有 10 个行键，则只需传入键列表即可。

不知道你说的分页是什么意思？？？你是说你有一个 from 和 to 行键并想要它们之间的行吗？您是否使用按行键对集群进行排序？

另一个完全不同的排序方向是 playOrm，尽管它可以执行 S-SQL，如果事情被分区，您可以执行连接和其他类似操作（上面的链接实际上是 playOrm 中的一个文件）。

我真的不确定你的意思是“你没有带行键”

后来，迪恩

# node.js - 根目录上方的 Node.js 服务器文件

> ID：12335416
> 
> 赞同：0
> 
> 时间：2012-09-08T23:52:27.693
> 
> 标签：node.js

我有以下目录结构：

```
limejs/
  closure/
    closure/
      goog/
        base.js
  projects/
    myGame/
      myGame.html
      server.js 
```

我在“cdlimejs/projects/myGame”中调用“node server.js”。当我提供 myGame.html 时，我希望包含 base.js。这是 myGame.html 中包含的脚本：

```
<script type="text/javascript" src="../../closure/closure/goog/base.js"></script> 
```

GET 尝试在 localhost:8080/closure/closure/goog/base.js 上。我知道如果我将服务器代码放在更高的几个目录中，我可以通过以下方式访问 base.js：

```
<script type="text/javascript" src="/closure/closure/goog/base.js"></script> 
```

但我想在试验时将所有“myGame”相关代码保留在同一个文件夹中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:46:46.437

您可能正在使用`express.static(dir)`. 文件只能从`dir`下方提供，其他一切都是不可见的。任何其他静态文件服务器（Apache、ningx 等）也是如此。

您需要从目录树的较高位置提供文件，以便`closure/closure/goog/base.js`可以访问（`limejs`在这种情况下），或者将文件复制/链接到您的游戏文件夹中。

如果你在 linux/mac 上，`ln -s closure/closure projects/myGame/closure`应该做的伎俩，那么你可以包括`<script src="closure/goog/base.js">`.

# actionscript-3 - 从影片剪辑中删除动作

> ID：12335418
> 
> 赞同：0
> 
> 时间：2012-09-08T23:52:45.210
> 
> 标签：actionscript-3, flash, movieclip

我正在向其他人的影片剪辑添加一个小部件。

在舞台上是另一个动画剪辑，它在动画剪辑内有一个动作（通过在 Flash 中按 F9 来实现）。

```
function onClicked()
{
    parent.onOldBtnClick("go");
} 
```

我需要做的是摆脱这种行为并添加我自己的操作。

如何覆盖此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:38:52.040

如果是 ActionScript3，则仅`removeEventListiner`在`MovieClip`, 上触发`onClicked()`并`addEventListener`用于您自己的操作。如果您不知道确切的侦听器，可以使用`hasEventListener`. 有关事件及其工作原理的更多信息，您可以阅读[ActionScript3 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:45:09.400

要覆盖，只需在 onClicked 函数中删除该行并编写您自己的行。编写代码块时必须小心，主要是范围。因为您在影片剪辑中编写代码，所以如果您尝试访问舞台中的另一个影片剪辑（没有指定父级或根或其实际范围），那么它将引发错误。

# apache - 如何防止 mod_authz_ldap 使用登录凭据绑定到 LDAP

> ID：12335419
> 
> 赞同：0
> 
> 时间：2012-09-08T23:52:45.837
> 
> 标签：apache, authentication, ldap

我正在尝试使用 mod_authz_ldap 进行用户身份验证。有一个奇怪的 LDAP 设置，我们必须绑定到 LDAP 目录

```
uid=user,o=organisation 
```

然后查询

```
cn=xxx,o=organisation 
```

获取用户的凭据。以下配置实际上有效，*只是*它尝试使用登录用户的凭据绑定到 LDAP 目录，这不用说失败了。

为了验证这一点，我尝试以我们的 LDAP 绑定用户身份对应用程序进行身份验证，并且身份验证成功。

```
<Location />

    AuthType Basic
    AuthName "My LDAP authenticated app"

    AuthzLDAPLogLevel debug

    AuthBasicProvider ldap
    AuthBasicAuthoritative off
    AuthzLDAPAuthoritative off

    AuthzLDAPBindPassword bindpass
    AuthzLDAPBindDN "uid=binduser,o=my.edu.au"

    AuthzLDAPMethod ldap
    AuthzLDAPServer ldapdevel.my.edu.au
    AuthzLDAPUserBase o=my.edu.au
    AuthzLDAPUserKey cn
    AuthzLDAPUserScope base
    AuthLDAPRemoteUserAttribute cn

    Require valid-user

</Location> 
```

Apache 错误日志以证明 mod_authz_ldap 在用户尝试再次验证应用程序时尝试绑定：

```
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] [15628] bind as cn=devraj,l=X,ou=Students,o=my.edu.au failed: 49
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] [15628] basic LDAP authentication of user 'devraj' failed
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] access to / failed, reason: verification of user id 'devraj' not configured 
```

此外，如果我提供不正确的绑定凭据 mod_authz_ldap 抱怨无法以绑定用户身份绑定。这表明它尝试以绑定用户身份绑定，但也以身份验证用户身份绑定。

我的问题，我做错了什么导致 mod_auz_ldap 使用用户凭据绑定到 LDAP 目录？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:06:13.173

为什么 AuthzLDAPBindDN “uid=binduser,o=my.edu.au”？然后显示 AuthzLDAPUserKey cn。

“uid=binduser,o=my.edu.au”通常应该是来自 LDAP 的有效用户，并且通常是服务帐户。

那么 AuthzLDAPUserKey cn 将代表 LDAP 中用户的 RDN（相对可分辨名称）属性。让用户 uid=binduser 和其他用户类似：cn=devraj 对您来说是非典型的。

uid=binduser,o=my.edu.au 是否存在？

用户 cn=devraj,l=X,ou=Students,o=my.edu.au 是否存在？（或者是：uid=devraj,l=X,ou=Students,o=my.edu.au）

-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:23:27.957

> it attempts to use the credentials of the user logging in to bind to the LDAP directory, which needless to say fails

Why 'needless to say'? And why does it fail at all? This is exactly what it is supposed to do. Normally you should be searching the directory for the user, possibly using a system account to do so, then binding as the found user with his credentials. If that succeeds, authentication is complete. If your LDAP isn't set up to support that, it is set up wrongly.

# c++ - 未解决 在 Eclipse、Ubuntu 中

> ID：12335420
> 
> 赞同：17
> 
> 时间：2012-09-08T23:53:20.050
> 
> 标签：c++, linux, eclipse, gcc, eclipse-cdt

是的，又是**这个**问题……

不知何故，我无法解决这个问题。信不信由你，我有 Eclipse 的经验，但只用于 Java 开发。我已经使用 vi 在 C++ 中编程，但没有使用 Eclipse。

我已经安装了：

*   Ubuntu 12.04
*   日食 3.7.2
*   海合会 4.6.3
*   Eclipse CDT 8.0.2

我创建了一个空的 Makefile 项目并选择了 Linux GNU 工具链：

![空的 Makefile 项目](../Images/fc029921e71acdbd8afde8b6e3585d0c.png)

我得到标准`Unresolved inclusion <iostream>`错误，并且我对项目中的各种“包含”目录有一些引用：

![<code>未解决的包含 <iostream></code> 错误](../Images/9a8e27c64818dbccf84a1ea8f4e63bb5.png)

我确实注意到，虽然我的 GNU C 的“路径和符号”设置包含各种路径，但 GNU C++ 的相同设置是空的：

![GNU C 路径和符号](../Images/dd8679abf5ef67472e2cc51056981387.png)

![GNU C++ 路径和符号](../Images/c5aac6e92acb3715ee9c458c2c828067.png)

此外，我的 C/C++ 构建设置下还有“GNU Elf Parser”：

![在此处输入图像描述](../Images/9da420bac729fdc277e9ce2539abe390.png)

* * *

## **我在这里做错了什么？**

干杯

* * *

**编辑：**

这是我的项目构建路径的更新照片，该路径正常工作： ![更新了构建路径](../Images/07753f75f9366836b617ba024bd7314a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T00:21:11.687

原因是 Eclipse 根本无法导入正确的标头。可以在 Ubuntu 中找到 C++ iostream 标头：

> $: sudo find / -name iostream
> 
> ```
> /home/beniamin/QtSDK/Madde/toolchains/arm-2009q3-67-arm-none-linux-gnueabi-x86_64-unknown-linux-gnu/arm-2009q3-67/arm-none-linux-gnueabi/include/c++ /4.4.1/iostream
> /home/beniamin/QtSDK/Madde/sysroots/harmattan_sysroot_10.2011.34-1_slim/usr/include/c++/4.4/iostream
> /usr/share/gccxml-0.9/GCC/2.95/iostream
> /usr/include/c++/4.6/iostream 
> /usr/include/boost/tr1/tr1/iostream
> ```

所以基本上，我想你要找的是`/usr/include/c++/4.6/iostream`，所以你应该在某个地方包含这个目录。

编辑：您还应该安装 g++，或者简单地安装 build-essential 包，这是构建 debian 包所必需的。不过，无论如何，g++ 都应该包含在您的 Ubuntu 安装中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T14:16:19.437

是的，我发现使用

```
$: sudo find / -name iostream 
```

并在包含路径中添加包含文件，然后成功。

# c - 在没有保存对话框的情况下保存文件

> ID：12335421
> 
> 赞同：0
> 
> 时间：2012-09-08T23:53:20.700
> 
> 标签：c, winapi, file-io

我有 3 个全局变量：

```
OPENFILENAME ofn;

TCHAR FileName[1024];

TCHAR Title[1024]; 
```

在 WM_CREATE 中，我填写了 ofn 的信息：

```
static TCHAR filter[] = TEXT("Bitmap Files (*.BMP)\0*.bmp\0") \
    TEXT("All Files (*.*)\0*.*\0\0");

ofn.lStructSize = sizeof(OPENFILENAME);
ofn.hwndOwner = hwnd;
ofn.hInstance = NULL;
ofn.lpstrFilter = filter;
ofn.lpstrCustomFilter = NULL;
ofn.nMaxCustFilter = 0;
ofn.nFilterIndex = 0;
ofn.lpstrFile = NULL;
ofn.nMaxFile = 1024;
ofn.lpstrFileTitle = NULL;
ofn.nMaxFileTitle = 1024;
ofn.lpstrInitialDir = NULL;
ofn.lpstrTitle = NULL;
ofn.Flags = 0;
ofn.nFileOffset = 0;
ofn.nFileExtension = 0;
ofn.lpstrDefExt = TEXT("bmp");
ofn.lCustData = 0;
ofn.lpfnHook = NULL;
ofn.lpTemplateName = NULL; 
```

在 WM_COMMAND 中`case ID_FILE_SAVE:`，我有

```
 case ID_FILE_SAVE:
                if (!SaveAsBmpDialog(hwnd, FileName, Title))
                    return 0;
                SaveAsBmp(FileName);
                return 0; 
```

`SaveAsBmpDialog`在哪里

```
static bool SaveAsBmpDialog(HWND hwnd, TCHAR *fileName, TCHAR *title) 
{
ofn.hwndOwner = hwnd;
ofn.lpstrFile = fileName;
ofn.lpstrFileTitle = title;
ofn.Flags = NULL;

return GetSaveFileName(&ofn);
} 
```

将 HDC 保存到位图文件（可以打开）可以正常工作。

但是在 WM_CHAR 中`wParam == 'p'`，我有

```
SaveAsBmp(FileName);
return 0; 
```

我在之前一次调用时使用此函数`SaveAsBmpDialog`，因此`FileName`已经是完整路径。

但是我得到一个无法打开的位图文件。（即使我先删除文件，它也会创建文件，但仍然无法打开）。文件大小和以前一样，所以我认为`WriteFile`在`SaveAsBmp`工作中。

我不明白为什么没有`GetSaveFileName(&ofn)`in就不能工作`WM_CHAR`。

我想要的是在没有保存对话框的情况下将 HDC 保存到现有文件中。

ps：在`SaveAsBmp`，我有

```
HANDLE hFile = CreateFile(FileName, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

DWORD dwBytesWritten;

//SetFilePointer(hFile, 0, NULL, FILE_BEGIN);
WriteFile(hFile, &fileHeader, sizeof(BITMAPFILEHEADER), &dwBytesWritten, NULL);
WriteFile(hFile, &info.bmiHeader, sizeof(BITMAPINFOHEADER) + info.bmiHeader.biClrUsed * sizeof(RGBQUAD), &dwBytesWritten, NULL);
WriteFile(hFile, pPixels, (int) info.bmiHeader.biSizeImage, &dwBytesWritten, NULL);

CloseHandle(hFile); 
```

# python - Eclipse Pydev：运行选定的代码行

> ID：12335424
> 
> 赞同：19
> 
> 时间：2012-09-08T23:53:38.370
> 
> 标签：python, eclipse, pydev

Eclipse Pydev 中是否有一个命令允许我在较大的脚本中只运行几行选定（突出显示）的代码？

如果没有，是否可以一次在 PyDev 控制台中运行多行代码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-08T01:07:32.700

按下`CTRL+ALT+ENTER`以将选定的行发送到交互式控制台

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-20T20:20:55.677

解决方案是选择并按下**F2**，请参阅[此](https://stackoverflow.com/questions/9664539/execute-python-line-of-code-in-eclipse)问题或只是手册的[本](http://pydev.org/manual_adv_interactive_console.html#starting-the-interactive-console)节。

# git - Git Pre-Commit Hook - 没有这样的文件或目录

> ID：12335426
> 
> 赞同：0
> 
> 时间：2012-09-08T23:54:24.510
> 
> 标签：git, bash

在 git 中运行预提交挂钩时出现错误，我无法弄清楚。这是脚本，错误如下。

```
#!/bin/bash

# Pre-commit hook passing files through jslint and uglify

#ROOT_DIR=$(git rev-parse --show-toplevel)
JSLINT="/home/john/Projects/node/uglify/node_modules/.bin/jslint --indent 4 --white true -nomen"
UGLIFYJS="/home/john/Projects/node/uglify/node_modules/.bin/uglifyjs"
JS_TEMP_EDITOR="/home/john/Projects/node/test/generated/tmp/_combined_editor.js"
JS_COMBINED_EDITOR="/home/john/Projects/node/test/public/javascripts/editor.min.js"

# Where the editor files are located
BASE="/home/john/Projects/node/test/public/javascripts/editor/"
EDITOR=(
    "init.js"
    "utils.js"
    "validation.js"
    "main.js"
    "menu.js"
    "graph.js"
    "settings.js"
    "interview.js"
    "list.js"
    "thumbnail.js"
)

# go through each javascript file that has changed and run it rhough JSLINT
for file in $(git diff-index --name-only --diff-filter=ACM --cached HEAD -- | grep -P '\.((js)|(json))$'); do
    if  ! node $JSLINT $file 2>&1 | grep ${file}' is OK.' ; 
    then
        node $JSLINT $file
        exit 1
    fi  
done

# Erase old
> $JS_TEMP_EDITOR
> $JS_COMBINED_EDITOR

#run thru the EDITOR and cat the files into one
for editor_file in ${EDITOR[@]}; do
  cat "$BASE/$editor_file" >> $JS_TEMP_EDITOR
done

# check if  UGLIFYJS gives us an error
if node $UGLIFYJS $JS_TEMP_EDITOR 2>&1 | grep 'Error' ; 
then
    exit 1
else
        # *** THIS IS WHERE THE ERROR IS THROWN
    "node $UGLIFYJS -o $JS_COMBINED_EDITOR $JS_TEMP_EDITOR"
fi

exit 0 
```

这是我得到的错误：

```
.git/hooks/pre-commit: line 55: node /home/john/Projects/node/uglify/node_modules/.bin/uglifyjs -o /home/john/Projects/node/test/public/javascripts/editor.min.js /home/john/Projects/node/test/generated/tmp/_combined_editor.js: No such file or directory 
```

我已将所有文件的权限更改为 777 只是为了进行测试，并且还检查了任何地方的 CR，但我仍然收到错误消息。奇怪的部分是当**我运行命令时，从给出的错误来看，我没有问题**！

```
node /home/john/Projects/node/uglify/node_modules/.bin/uglifyjs -o /home/john/Projects/node/test/public/javascripts/editor.min.js /home/john/Projects/node/test/generated/tmp/_combined_editor.js 
```

会工作得很好。

希望有人能看到我看不到的东西。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T01:24:35.067

你可能想要：

```
node "$UGLIFYJS" -o "$JS_COMBINED_EDITOR" "$JS_TEMP_EDITOR" 
```

Otherwise your telling bash to execute a binary at path "/home/john/Projects/node/uglify/node_modules/.bin/uglifyjs -o /home/john/Projects/node/test/public/javascripts/editor.min.js /home/john/Projects/node/test/generated/tmp/_combined_editor.js" which is just what the error message says but maybe a bit confusing as the error message don't include the quotes, that is just used during argument parsing. So in this case bash ends up seeing a command with just one argument (path to the program to execute) that is very long and does not exist.

# php - 使用 PDO 连接到数据库返回非对象错误

> ID：12335428
> 
> 赞同：2
> 
> 时间：2012-09-08T23:54:50.147
> 
> 标签：php, object, pdo, fetch, sqlconnection

我试着按照这个关于 PDO 的教程，完全按照它，但是当尝试在一个非常基本的级别上连接时，它输出一个非对象错误。我做了一个小测试来确定 $query 变量的布尔值，它的结果是错误的，这会产生错误。为什么这样做？：

**教程**

> [http://www.youtube.com/watch?v=lb0NYODtGr4&feature=share&list=EC23A4AFEA46A5CB23](http://www.youtube.com/watch?v=lb0NYODtGr4&feature=share&list=EC23A4AFEA46A5CB23)

**错误**

> 致命错误：在第 16 行的 C:\xampp\htdocs\projects\dentaloffice\php\php_connect.php 中的非对象上调用成员函数 fetch()

**代码**

```
<?php

$config['db'] = array(
    'host'      => 'localhost',
    'username'  => 'root',
    'password'  => '',
    'dbname'    => 'dentaloffice'
);

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname =' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);

$query = $db->query("SELECT appointments.ROOM FROM appointments");

if($query === false){
    echo '$query variable returned false <br>';
}else{
    echo '$query variable returned true <br>';
}

while ($row = $query->fetch(PDO::FETCH_ASSOC)){
    echo $row['ROOM'];
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:44:50.017

更改此行：

```
$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname =' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']); 
```

...进入这个...

```
$db = new PDO("mysql:host={$config['db']['host']};dbname={$config['db']['dbname']}",
              $config['db']['username'], $config['db']['password']); 
```

换句话说，删除 之后的空白符号`dbname`，它将起作用。) PDO DSN 语法非常严格，并且您示例中的字符串被解析为没有指定数据库 - 因此您会看到一个错误。

顺便说一句，始终检查`errorInfo()`我之前在`false query/statement/result`PDO 代码分支中的评论中显示的方式是一个好习惯。现在你可能明白为什么了。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:05:17.740

创建一个 phpinfo 文件并检查您是否启用了 PDO 并安装了正确的驱动程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T00:09:52.947

确保您启用了 PDO。

顺便说一句，您可以像这样检查查询验证：

```
if($query) // will return true if succefull else it will return false 
{ 
// code here for true
} 
```

# perl - Perl 在使用前验证模块

> ID：12335431
> 
> 赞同：0
> 
> 时间：2012-09-08T23:55:18.050
> 
> 标签：perl, module

我正在使用 Module::Pluggable 从给定目录加载模块：

```
for my $module ( plugins() ) {

    eval "use $module";
    if ($@) {

        my $error = (split(/\n/, $@))[0];
        push @rplugin_errors, $error;
        print STDOUT "Failed to load $module: $error\n";
    } else {

        print STDOUT "Loaded: $module\n";
        my $mod = $module->new();
        my $module_name = $mod->{name};
        $classes{$module_name} = $mod;
    }
} 
```

可以通过其他地方的 reload 方法调用此函数。但是，如果我试图“使用”的模块之一引发错误，则它不会被加载并且脚本有些瘫痪。

我想在执行使用之前验证 plugins() 中的每个模块。所以理想情况下我可以做类似的事情：

```
$error = 0;
for my $module ( plugins() ) {

    eval TEST $module;
    if ($@) {

        print STDERR "$module failed. Will not continue";
        $error = 1;
        last;
    }
}

if ($error == 0) {

    for my $module ( plugins() ) {

        use $module;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:11:39.753

我认为你过于复杂了。您的代码已经包含一个子句，用于测试 中的错误`use`并在发生错误时报告错误。( `if ($@)... print STDOUT "Failed to load $module: $error\n";`) 根据您对 ikegami 答案的评论，您的目标是“如果失败，我们会暂停并发送一条消息，说明由于模块错误而无法进行重新加载。” （是的，我知道您*说过*您的目标是在加载模块之前对其进行验证。事实并非如此。您的目标是在出现错误时停止；您刚刚决定预验证是实现此目的的方法。这就是我们所说的[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。）

您已经在检测并报告发生的任何错误...您希望在出现错误时停止...因此，当您检测到错误时，请在报告后停止。

```
if ($@) {
    my $error = (split(/\n/, $@))[0];
    push @rplugin_errors, $error;
    die "Failed to load $module: $error\n";
} else { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:36:05.850

改变

```
eval TEST $module; 
```

回到

```
eval "use $module"; 
```

好吧，在此处（或在您的原始代码中）导入可能没有意义，因此以下内容会更好：

```
eval "require $module"; 
```

# ios - 控件在初始加载时在 UIPopoverController 中没有响应，但在后续加载时会响应？

> ID：12335435
> 
> 赞同：0
> 
> 时间：2012-09-08T23:56:41.793
> 
> 标签：ios, ipad

我有一个正在加载覆盖控制器的应用程序（显示相机以便我可以扫描）。它在 iPhone 上运行良好，在我第二次调用后它在 iPad 上运行良好。让我解释。

我有一个 UIButtonBarItem 以模态方式加载视图控制器。控制器中有几个控件，大多数按钮（使用笔尖定义）。如果我在 iPhone 上加载控制器（通过响应 UIButtonBarItem 操作），它会加载并且所有按钮每次都可以正常工作。

但是...如果我使用 UIPopoverController 加载相同的视图控制器，那么在我第一次加载它时，所有按钮都不会响应。因此，我在控制器外部某处触摸屏幕并关闭控制器。然后，我再次触摸相同的操作按钮，现在当控制器加载时，视图控制器中的所有控件都可以正常工作。真的很奇怪！

[可能的提示] 当我第一次加载时，按钮被放置在奇怪的位置。随后的每个呼叫都将按钮显示在正确的位置。我通过禁用笔尖中的“自动调整子视图”来实现这一点。这些按钮现在位于正确的位置，但是当我第一次加载此弹出框时它们仍然不会响应。

这是我用来响应 UIButtonBarItem 的代码。

```
 -(void)launchOverlayController:(id)sender
 {
if([pickerControllerPopover isPopoverVisible])
{
    [pickerControllerPopover dismissPopoverAnimated:YES];
    pickerControllerPopover = nil;
    return;
}

// Deselect any selected cell
[self.tableView deselectRowAtIndexPath:self.tableView.indexPathForSelectedRow animated:NO];

// Working code that shows the overlay (camera on) but the overlay takes the whole screen
SRSScanVINViewController *scanVINViewController = [[SRSScanVINViewController alloc] init];
[pickerController setOverlay:scanVINViewController];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:scanVINViewController];
[navController setModalPresentationStyle:UIModalPresentationFormSheet];
[navController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[[UIApplication sharedApplication] setStatusBarHidden:YES];
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
{
    pickerControllerPopover = [[UIPopoverController alloc] initWithContentViewController:pickerController];
    [pickerControllerPopover setDelegate:self];
    [pickerControllerPopover setPopoverContentSize:CGSizeMake(320.0f, 460.0f)];
    [pickerControllerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}
else
{
    [self presentViewController:pickerController animated:YES completion:nil];
}

 } 
```

我完全没有想法。我不明白为什么覆盖控制器中的控件在我每次调用它时都能正常工作，除了第一次。

提前感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:05:34.127

所以答案是超类与您的观点相左。我猜它不是为子类而设计的，但无法确定。它在“视图..”方法之一中所做的是用自己的视图覆盖 self.view，并使您的视图成为该视图的子视图。第一次使您的视图框架具有零尺寸。下一次它像以前一样离开它 - 也许是一些持久的标志。它还在其子视图的不同位置插入视图，这看起来很奇怪，但如果您有代码，您可能会明白原因。

Soooo - 问题的解决方案是将视图的子视图移动到超级视图（子类的视图），然后将视图的框架设置为空框架：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];  // StackOverflow says to add this TCL?

    // Set the initial scan orientation
    [self setLayoutOrientation:self.parentPicker.orientation];

    if ([self.parentPicker hasFlash])
    {
        [flashButton setEnabled:YES];
        [flashButton setStyle:UIBarButtonItemStyleBordered];
        [self.parentPicker turnFlash:NO];
    } else
    {
        [flashButton setEnabled:NO];
    }

    textCue.text = @"";
    viewHasAppeared = NO;

    // move the subviews    
    while([self.view.subviews count]) [self.view.superview addSubview:[self.view.subviews objectAtIndex:0]];
    self.view.frame = CGRectMake(0,0,0,0);
} 
```

PS：请注意，您在这里错过了 superView 调用，但这似乎并不重要（您不知道您的复杂超类可能需要哪种方法，所以我一定会向他们发送您拦截的所有内容。

# java - Tomcat7死了，日志中没有任何内容

> ID：12335437
> 
> 赞同：4
> 
> 时间：2012-09-08T23:57:14.630
> 
> 标签：java, tomcat, ubuntu, tomcat7, ubuntu-11.10

我进行了搜索和搜索，但对我没有太大帮助，因此发布了新问题。平台 Ubuntu 11.10 服务器 64 位 JVM 1.7.0_03 Tomcat 7

配置没有什么特别之处 - 前端服务器是使用 ajp 连接器的 apache。Tomcat 作为 ubuntu 服务运行。

在我们的服务器上，tomcat7 正在死去，无法找出原因。我检查了所有日志文件（syslog、catalina.out，甚至 auth.log），看看是否有记录。

根据顶级命令，服务器仍然有大约 4gb 的可用内存，并且 cpu 使用率在大多数情况下平均约为 35%。

为了隔离问题，有什么办法可以得到tomcat进程终止的退出状态码？

我阅读了一些报告，其中 jvm 记录错误日志以防 jvm 崩溃。我也没有看到。

似乎我需要设置 ulimit 来获取核心转储，但不确定如何为 tomcat 服务执行此设置，或者该设置对所有用户都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:19:22.997

> It seems like I need to set ulimit to get the core dump, but not sure how to do it for tomcat service or is the setting valid for all the users.

One way to do that without interfering with anything else would be to add a `ulimit` command to the `catalina.sh` script. (It is a bit hacky ... but it sounds like you are at the point where hackiness might give happiness.)

# sql - 服务器时区偏移值

> ID：12335438
> 
> 赞同：2
> 
> 时间：2012-09-08T23:57:32.617
> 
> 标签：sql, postgresql, datetime

我正在处理与数据库服务器相关的日期。

在 Oracle 中，要获得完整的时区偏移量，您可以使用如下内容：

```
select tz_offset(SESSIONTIMEZONE) from dual; 
```

或者

```
select tz_offset(DBTIMEZONE) from dual; 
```

在我的情况下，这些会返回（重要的是它包括标志）

```
-04:00 
```

我想知道 Postgres 中存在什么功能来获得与上述 Oracle 版本完全相同的格式的结果？我需要知道服务器的时区偏移量，包括指示它落后或领先于 GMT/UTC 的标志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T10:57:32.037

对于时区，您可以：

```
SHOW timezone; 
```

或等价物：

```
SELECT current_setting('TIMEZONE'); 
```

但这可以是服务器接受的任何格式，因此它可能返回`UTC`、`08:00`、`Australia/Victoria`或类似的。

令人沮丧的是，似乎没有内置函数来报告客户端使用的 UTC 时间偏移（以小时和分钟为单位），这对我来说似乎有点疯狂。您可以通过将 UTC 中的当前时间与本地当前时间进行比较来获得偏移量：

```
SELECT age(current_timestamp AT TIME ZONE 'UTC', current_timestamp)` 
```

...但是 IMO 以秒为单位提取 tz 偏移量`current_timestamp`并转换为间隔更干净：

```
SELECT to_char(extract(timezone from current_timestamp) * INTERVAL '1' second, 'FMHH24:MM'); 
```

这将匹配所需的结果，只是它不产生前导零，所以`-05:00`只是`-5:00`. 令人讨厌的是，似乎不可能在`to_char`几个小时内产生前导零，给我留下以下丑陋的手动格式：

```
CREATE OR REPLACE FUNCTION oracle_style_tz() RETURNS text AS $$
SELECT to_char(extract(timezone_hour FROM current_timestamp),'FM00')||':'||
       to_char(extract(timezone_minute FROM current_timestamp),'FM00');
$$ LANGUAGE 'SQL' STABLE; 
```

感谢 Glenn，`timezone_hour`而`timezone_minute`不是我之前使用的 hack`extract(timezone from current_timestamp) * INTERVAL '1' second)`和 CTE。

如果您不需要前导零，则可以使用：

```
CREATE OR REPLACE FUNCTION oracle_style_tz() RETURNS text AS $$
SELECT to_char(extract(timezone from current_timestamp) * INTERVAL '1' second, 'FMHH24:MM');
$$ LANGUAGE 'SQL' STABLE; 
```

也可以看看：

*   [PostgreSQL 中的本地时区偏移量](https://stackoverflow.com/questions/2110216/local-time-zone-offset-in-postgresql)
*   [如何知道 postgresql 8.3 中时间戳的时区](https://stackoverflow.com/questions/553822/how-to-know-a-timezone-of-a-timestamp-in-postgresql-8-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:37:21.093

“to_char”格式化组件，修剪摆脱了“sign”字符，它只是正数的空格。

```
select trim(to_char(extract(timezone_hour from now()), '00')) ||
       ':' ||
       trim(to_char(extract(timezone_minute from now()), '00')) AS tz 
```

查看时间函数的[文档](http://www.postgresql.org/docs/9.1/interactive/functions-datetime.html)。

# uitableview - 具有选择器视图和持久性的 Tableview

> ID：12335443
> 
> 赞同：1
> 
> 时间：2012-09-08T23:58:31.370
> 
> 标签：uitableview, core-data, persistence, tableview, uipickerview

我正在努力寻找一个好的解决方案，并且也进行了很多搜索，但我找不到任何与我想要的相似的东西，所以我希望任何人都可以帮助我：

我有两个**表格视图**，在**第一个**中我已经有自定义单元格，每个单元格都有两个文本字段，一个用于产品名称的文本字段，另一个用于价格，然后如果用户想要，他可以拥有更多的单元格，他将插入更多具有各自价格的产品。

第二**个**表格视图也有两个文本字段，在第一个文本字段中，他将选择一个带有选择器视图的产品（插入第一个表格视图中），当他选择产品时，我希望相应的价格出现在另一个 texfield 中。

**我的问题是，我应该使用核心数据吗？**还是其他类型的坚持？是否可以将 texfields 的值分配给在核心数据模型中创建的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:01:12.753

您可以根据需要使用核心数据，并且可以将数据分配给文本字段。

# hadoop - 如何强制hadoop使用一定数量的地图任务

> ID：12335446
> 
> 赞同：1
> 
> 时间：2012-09-08T23:58:51.810
> 
> 标签：hadoop, mapreduce

运行一个 hadoop 作业，我将我的地图设置为 100，并将我的 reduce 设置为 1（我并没有真正减少任何东西）。

```
conf.setNumMapTasks(100);
conf.setNumReduceTasks(1); 
```

作业运行后，我查看了 hadoop 日志，发现使用了一个 reduce 任务并使用了零 (0) 个 map 任务。现在我有两个问题：

1）即使我的工作很小，地图任务的数量不应该至少是一个吗？

2）有没有办法强制hadoop运行指定数量的map任务？我已经知道这`conf.setNumMapTasks(100)`只是一个提示。但是还有其他方法吗？

# c++ - 在c ++中将-inf和inf值过滤为0

> ID：12335453
> 
> 赞同：1
> 
> 时间：2012-09-09T00:00:01.413
> 
> 标签：c++

假设你有一个`std::complex<double> array[N];`

您如何在 for 循环中将 all`-inf`和values 设置为 0？`inf`

`std::isinf` 对我不起作用编译器早于 C++11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:10:26.863

试试这个：`std::numeric_limits<double>::infinity()`将提供一个值，告诉您一个数字是否为无穷大。

这是一个值的示例`vector`代码`double`；您可以更改`repl_inf`为使用`complex<double>`。

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <limits>

using namespace std;

int repl_inf (double v) { return (v== std::numeric_limits<double>::infinity() || -v== std::numeric_limits<double>::infinity()) ? 0.0 : v; }

int main() {
    vector<double> v;
    v.push_back(1);
    v.push_back(1.0/0.0);
    v.push_back(2);
    v.push_back(-1.0/0.0);
    transform (v.begin(), v.end(), v.begin(), repl_inf);
    for (int i = 0 ; i != v.size() ; i++) {
        cout << v[i] << endl;
    }
    return 0;
} 
```

在 ideone：[链接](http://ideone.com/XkAFV)。

对于`complex<double>`：

```
bool isInf(double v) {
    return v== std::numeric_limits<double>::infinity()
       || -v== std::numeric_limits<double>::infinity();
}
bool isInf(complex<double> c) {
    return isInf(c.real) || isInf(c.imag);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:15:19.370

```
std::replace( array, array + N, std::complex( std::numeric_limits<double>::infinity(), 0.0), std::complex(0.0) );
std::replace( array, array + N, std::complex( -std::numeric_limits<double>::infinity(), 0.0), std::complex(0.0) ); 
```

或者

```
bool isinf( std::complex<double> d )
{
  return std::abs( d.real() ) == std::numeric_limits<double>::infinity()
}

std::replace_if( array, array + N, isinf, 0.0 ); 
```

# javascript - 在 node.js 中将结果向上传递多个嵌套回调

> ID：12335460
> 
> 赞同：0
> 
> 时间：2012-09-09T00:00:57.077
> 
> 标签：javascript, node.js, callback, pagination, instagram

以下代码获取 Instagram 用户的关注者列表并将它们组合成一个数组，以便我可以在 Express 路由处理程序中返回它们。

这需要继续运行，直到 Instagram 表示没有更多结果可供浏览。该函数接受一个必需的“用户 ID”、一个必需的“access_token”、一个可选的“光标”和一个回调。

完全组合的数据以正确的 JSON 格式成功返回，但我无法将其返回给 express 处理程序。

如何将此信息传递回快递处理程序？

```
var out_data = [];
function getFollows(id,access_token,cursor,callback) {
  if(cursor && cursor != 1) {
    console.log('using cursor url with cursor: '+cursor);
    var url = 'https://api.instagram.com/v1/users/'+id+'/follows?&access_token='+access_token+'&client_id='+client_id+'&cursor='+cursor;
  } else {
    console.log('using standard url');
    var url = 'https://api.instagram.com/v1/users/'+id+'/follows?&access_token='+access_token+'&client_id='+client_id+';
  }
  request(url,function(err,res,body){
    var json = JSON.parse(body);
    _.each(json.data,function(item){
      out_data.push(item);
    });
    if(json.pagination.next_cursor) {
      getFollows(id,access_token,json.pagination.next_cursor,function(adata){
          out_data.push(adata);
      });
    }
    if(!json.pagination.next_cursor) {
      callback(out_data);
      //console.log(out_data);
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:24:29.360

取决于结果的路由处理程序部分`getFollows()`需要在`getFollows()`作为其回调传递的函数中。本质上，调用必须`getFollows()`是处理程序中的最后一条语句。

# ruby - 我可以用 ruby 创建桌面应用程序吗？

> ID：12335461
> 
> 赞同：6
> 
> 时间：2012-09-09T00:01:03.633
> 
> 标签：ruby, desktop

我想知道是否可以使用 ruby​​ 创建桌面应用程序以及缺点，请您举个例子吗？在 Windows 中使用的应用程序

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T00:22:09.500

是的，您可以，先生！

缺点是为接口做高级的东西可能会有一些困难，但我只是猜测，因为我在这个领域根本没有经验。

看看您拥有的一些解决方案：

[http://shoesrb.com](http://shoesrb.com)

[https://github.com/larskanis/fxruby](https://github.com/larskanis/fxruby)

[https://github.com/maccman/bowline](https://github.com/maccman/bowline)（这个我现在才发现，看起来很有趣，但它不再维护了：/）

[http://macruby.org](http://macruby.org)（仅适用于 OS X）

[http://www.rubymotion.com](http://www.rubymotion.com)（仅限付费和 OS X）

我能想到的其他方法是使用 Java Swing 和 JRuby

你也可能想看看这个-> [http://en.wikibooks.org/wiki/Ruby_Programming/GUI_Toolkit_Modules](http://en.wikibooks.org/wiki/Ruby_Programming/GUI_Toolkit_Modules)

# database - 没有属性的 WCF 服务返回对象

> ID：12335463
> 
> 赞同：2
> 
> 时间：2012-09-09T00:01:11.147
> 
> 标签：database, vb.net, wcf, web-services, microsoft-metro

我正在学习如何使用 WCF Web 服务访问数据库上的数据。我遇到的主要问题是，当从服务调用结果时，返回值的类型是 UniversityClass 但没有可用的属性，我相信它的真实类型只是一个对象，因此我无法访问它的任何“真实”属性。

这是我的界面中名为“Service1”的类的片段

```
<ServiceContract()>
Public Interface IService1

    <OperationContract()>
    Function GetUniversity(ByVal universityID As Integer) As UniversityClass

End Interface

<DataContract()>
Public Class UniversityClass

    Private _universityId As Integer

    Public Property UniversityID As Integer
        Get
            Return _universityId
        End Get
        Set(value As Integer)
            _universityId = value
        End Set
    End Property 
```

这是我调用服务以获取数据的预览

```
 Dim client As New ServiceReference1.Service1Client
        Dim result As New ServiceReference1.UniversityClass

        Dim x = client.GetUniversityAsync(Integer.Parse(tbUniversityID.Text))
        Dim r As WCFServiceExample.ServiceReference1.UniversityClass = Await x
        If x.IsCompleted Then
            result = x.Result
        End If

        tbResult.Text = result. _ _ _ _

'// ^ No properties accessible here even though it recognizes that result is of type UniversityClass 
```

在检查 ServiceReference1.UniversityClass 后，我被带到 Referenceece.vb 并注意到有继承对象的 Partial Class UniversityClass。我认为这可能是我无法访问我的 Service1 类中定义的属性的原因，因为它认为 UniversityClass 是一个没有类型的对象。

我已经尝试单独重建所有项目，重建解决方案，但仍然没有。

希望获得有关如何实际获得 UniversityClass 类型的对象以从我的服务中返回的帮助。

识别类型： http: [//i50.tinypic.com/e5mhvk.jpg](http://i50.tinypic.com/e5mhvk.jpg) 无可用属性：http: [//i50.tinypic.com/wmjui9.jpg](http://i50.tinypic.com/wmjui9.jpg)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:55:29.250

您的客户看不到 UniversityID，因为您尚未将其标记为数据成员：

```
<DataContract()>
Public Class UniversityClass

    Private _universityId As Integer

    <DataMember()>
    Public Property UniversityID As Integer
        Get
            Return _universityId
        End Get
        Set(value As Integer)
            _universityId = value
        End Set
    End Property 
```

# css - 未记录的 CSS 属性

> ID：12335469
> 
> 赞同：0
> 
> 时间：2012-09-09T00:02:34.217
> 
> 标签：css, properties

我一直在研究一些基于模板的 CSS。不是我的选择，但这是我所拥有的。

在清理 CSS 的过程中（有人使用 CSS 美化器对其进行列化，使其成为主要的 PITA 编写），我遇到了一个完全无法解释的 CSS 属性：`nowhitespace`.

在我拥有的文档中，它显示为`nowhitespace: afterproperty;`，并且经常在单个规则中重复多次。在网上搜索之后，我发现这个神秘的属性出现在左右样式表中，但从来没有对它的作用或作者认为它做了什么做出任何解释。

所以，我呼吁你，Stackoverflow 社区，请解释这个属性的起源，据我所知，它绝对没有任何作用，并且没有被任何已知的浏览器识别。

这是我拥有的文档中的一个片段，经过美化后：

```
ul.nav a, ul.nav a:visited {
  /* grouping these selectors makes sure that your links
     retain their button look even after being visited */
  padding: 5px 5px 5px 15px;
  nowhitespace: afterproperty;
  nowhitespace: afterproperty;
  nowhitespace: afterproperty;
  nowhitespace: afterproperty;
  nowhitespace: afterproperty;
  nowhitespace: afterproperty;
  display: block; /* this gives the link block properties
    causing it to fill the whole LI containing it. This
    causes the entire area to react to a mouse click. */
  width: 160px; /*this width makes the entire button
    clickable for IE6\. If you don't need to support IE6,
    it can be removed. Calculate the proper width by
    subtracting the padding on this link from the width
    of your sidebar container. */
  text-decoration: none;
  background-color: #C6D580;
} 
```

在搜索了评论的文字后，我相信这个 CSS 模板的起源是一个通用的 DreamWeaver 模板。[在这里](http://www.adobe.com/devnet/dreamweaver/articles/introducing_new_css_layouts.html#a)。我想知道我的特定版本来自哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T00:08:52.813

`nowhitespace`在任何主要浏览器中都不是有效的 CSS 属性。如果您尝试它，您将在该浏览器的控制台窗口中收到错误或警告。

当我在 jsfiddle 中尝试时，Firefox 给了我这个错误：

> 时间戳：2012-09-09 01:06:10
> 
> 警告：未知属性“nowhitespace”。声明被放弃。
> 
> 源文件： http: [//fiddle.jshell.net/_display/](http://fiddle.jshell.net/_display/) 行：14

当我用谷歌搜索时，我发现一些使用该名称的样式表，但作为类名，而不是作为属性。可能有人在不知道它是什么的情况下复制了它（即货物崇拜编程）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:38:03.707

此代码潜入通过工具“ [ProCSSor](http://procssor.com/) ”处理的样式表中。

我怀疑这是决定如何重写 CSS 的一些内部代码，因为“属性后没有空格”的简单英文阅读似乎是指样式表中属性的格式，而不是元素的呈现一个网页。

因此，我建议这是软件中的错误。我已经[在他们的 Twitter 提要上报告了它](https://twitter.com/plechem/status/322286889530953728)，所以希望它会在未来的版本中得到解决。

# json - 有没有办法在nodejs中将默认对象传递给require？

> ID：12335471
> 
> 赞同：0
> 
> 时间：2012-09-09T00:03:23.327
> 
> 标签：json, node.js

我想做这样的事情：

```
var jsonFileName = aDynamicallyGeneratedJsonFileName(),
    defaultObject = {'my': 'default', 'json': 'object'};

var cachedOrRequiredObject = require(jsonFileName, defaultObject); 
```

如果不存在，我希望`cachedOrRequiredObject`得到，并且`defaultObject`即使`jsonFileName`不存在，我也希望 require 缓存作为`jsonFileName`键保留。`defaultObject``jsonFileName`

当然这不起作用——尤其是在找不到文件时需要错误。我可以做类似的事情：

```
function myRequire (file, defaultObj) {
   try {
       return require(file);
   catch () {
       return defaultObj;
   }
} 
```

但是每次执行`require`都会访问文件系统以尝试查找`file`它何时不存在。除了复制 require 的功能和维护我自己的缓存之外，我有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:08:19.120

您必须为不存在的文件维护自己的缓存，`require`没有理由这样做。一个非常简单的对象缓存就足够了（并且是 require() 内部使用的）：

```
function requireWithDefault(path, default){
    var module
    if ((module = requireCache[path]) === undefined){
        try {
            module = require(path)
        } catch(e) {
            module = requireCache[path] = default
        }
    }
    return module
} 
```

# objective-c - OBJ-C 的体面数据包教程？

> ID：12335474
> 
> 赞同：0
> 
> 时间：2012-09-09T00:04:54.857
> 
> 标签：objective-c, tcp, udp, packets

我想了解有关使用 Obj C 发送和接收数据包的更多信息。我想了解有关数据包 ID 和类型的更多信息。除了 Apple 文档之外，还有关于一些简单教程的想法吗？多谢你们！
注意：我对如何发送数据包有基本的了解。但我需要了解更多关于类型和 ID 的信息。目前我无法使用 login.minecraft.net 登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:27:21.207

*违反圣层，蝙蝠侠！*

我想你真正想了解的是 iOS 下的 HTTP 通信，而不是 TCP/IP 数据包。在这个时代，除非您正在*发明一种新协议*，否则没有理由深入研究 TCP/UDP 。对于每个流行的协议，都有一个封装它的库。

在这种情况下，看起来[Minecraft 是基于 HTTP 构建的](http://www.minecraftwiki.net/wiki/User%3aOxguy3/Minecraft.net_API)。这不足为奇；除非您的游戏需要实时交互，否则 HTTP 是一种无处不在的协议，可以通过任何东西进行路由。

因此，我建议您从[HTTP 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)之一开始。

# objective-c - 为什么角色显示像旋转的'？

> ID：12335478
> 
> 赞同：-1
> 
> 时间：2012-09-09T00:05:52.180
> 
> 标签：objective-c, properties, char

我的项目是制作 Checker 土耳其语游戏

我做了2个班板和单元

在 Cell.h 中

```
#import <Foundation/Foundation.h>

@interface Cell : NSObject

{
    int number;
    char checker;
}
@property (nonatomic ) int number;
@property (nonatomic ) char checker;
@end 
```

在 Cell.m 中

```
#import "Cell.h"

@implementation Cell
-(void)Cell{
    checker=' ';
    number=1;
}
@end 
```

但是在board.m中我尝试了很多方法但是这里没有成功是我打印出检查器的代码

```
DrawCell[ 3 ].checker  = 'X'; 
```

结果是旋转的问号，它们的数字都是0，我正在尝试更改它们，但它们是0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:38:48.403

显示方法的实现`Cell`表明您可能来自 C++，其中构造函数以类命名。Objective-C 以不同的方式做到这一点。与您匹配的实现`@interface`是：

```
@implementation Cell

@synthesize number, checker; // implement the properties, not required in Xcode 4.4

- (id) init // the constructor
{
   self = [super init]; // must invoke superclass init
   if(self != nil)      // check a valid object reference was returned
   {
      checker = ' ';
      number = 1;
   }
   return self;         // return the initialized object
}

@end 
```

现在看起来您正在声明一个 的静态数组`DrawCell`，`Cell *`例如：

```
Cell *DrawCell[9]; 
```

您需要分配此数组中的单元格，循环可以做到这一点：

```
for(unsigned ix = 0; ix < 9; ix++)
   DrawCell = [[Cell alloc] init]; // allocate & init each Cell 
```

现在你的线：

```
DrawCell[3].checker = 'X'; 
```

应该可以正常工作。

有些人可能会建议您使用一个`NSArray`而不是 C 样式的数组，但在您的小型固定大小数组的情况下，后者很好。

其他人可能会建议您甚至不要为此烦恼一个对象，因为您似乎只存储了两个简单的数据。在这种情况下使用结构可能是一个不错的选择，例如使用：

```
typedef struct
{
   int number;
   char checker;
} Cell;

Cell DrawCell[9]; 
```

和你的线

```
DrawCell[3].checker = 'X'; 
```

也可以，不需要动态内存分配、属性合成等。

高温高压

# regex - Bash 脚本 - 批量修改文件 sed 正则表达式

> ID：12335481
> 
> 赞同：5
> 
> 时间：2012-09-09T00:06:08.520
> 
> 标签：regex, bash, sed

我有一组 .csv 文件（都在一个文件夹中），格式如下：

```
170;151;104;137;190;125;170;108
195;192;164;195;171;121;133;104
... (a lot more rows) ... 
```

问题是我搞砸了一点，它应该看起来像这样

```
170;151;104.137;190.125;170;108
195;192;164.195;171.121;133;104 
```

如果差异太细微而无法注意到：

**我需要编写一个脚本，在该文件夹中的 efery 文件的每一行中将每第三个和第五个分号更改为一个句点。**

我的研究表明我必须`sed s/`在我的脚本中设计一些巧妙的命令。问题是我不太擅长正则表达式。通过阅读教程，它可能会涉及 /3 和 /5 的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:16:35.767

这是一个非常简短的方法：

```
sed 's/;/./3;s/;/./4' -iBAK * 
```

它用 替换了第 3 个和第 5 个（现在是第 4 个）实例`;`。`.`

我在您的样本上对其进行了测试（另存为 sample.txt）：

```
$ sed 's/;/./3;s/;/./4' <sample.txt
170;151;104.137;190.125;170;108
195;192;164.195;171.121;133;104 
```

为了安全起见，我将我的示例备份为`<WHATEVER>.BAK`. 为防止这种情况，请更改`-iBAK`为`-i`.

* * *

*这个脚本可能不是完全可移植的，但我已经在带有 BSD sed（不知道什么版本）的 Mac 10.8 和带有 sed (gsed) 4.1.4 (2003) 的 Linux 上对其进行了测试。@JonathanLeffler 指出它`sed`是 2008 年的标准 POSIX。我也刚刚找到它并且非常喜欢它。*

* * *

高尔夫提示：如果从 bash 运行命令，则可以使用大括号扩展来实现极短的版本：

```
sed -es/\;/./{3,4} -i * 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:10:54.433

这是一种方法：

```
sed -i 's/^\([^;]*;[^;]*;[^;]*\);\([^;]*;[^;]*\);/\1.\2./' foldername/* 
```

（免责声明：我确实对此进行了测试，但其中的一些细节`sed`并不完全可移植。我认为上面没有任何不可移植的东西，所以应该没问题，但请先备份您的文件夹，然后再运行以上。以防万一。）

# php - 无法使用 PHP DOMDocument 附加第二个元素

> ID：12335482
> 
> 赞同：1
> 
> 时间：2012-09-09T00:06:12.203
> 
> 标签：php, domdocument

我正在尝试通过 PHP 的 DOMDocument 传递一个 HTML 块来重构`<img>`内联元素：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

对于每个`<img>`我尝试插入重构的副本，然后将原始副本包装在`<noscript>`标签中以用于非 JS 后备。

**例子：**

输入：

`<img src="img/example.jpg" width="640" heigh="480">`

输出：

`<img class="lazy" src="img/grey.gif" data-original="img/example.jpg" width="640" heigh="480"><noscript><img src="img/example.jpg" width="640" heigh="480"></noscript>`

我有包装工作，新元素也正确构造。问题是第二个`appendChild`（下面）不起作用，我不知道为什么。任何人都可以提供解决方案吗？

我有以下代码：

```
$noScript = $dom->createElement('noscript');
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
    $src = $image->getAttribute('src');
    $alt = $image->getAttribute('alt');
    $title = $image->getAttribute('title');
    $style = $image->getAttribute('style');

    $newImage = $dom->createElement('img');
    $newImage->setAttribute('class', 'lazy');
    $newImage->setAttribute('data-original', $src);
    $newImage->setAttribute('src', '/images/whitespace.gif');
    if ($style) $newImage->setAttribute('style', $style);
    if ($alt) $newImage->setAttribute('alt', $alt);
    if ($title) $newImage->setAttribute('title', $title);

    $noScriptClone = $noScript->cloneNode();
    $image->parentNode->replaceChild($noScriptClone, $image);
    $noScriptClone->appendChild($image);
    $noScriptClone->parentNode->appendChild($newImage);
}
return $dom->saveHTMLExact(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:52:23.753

我确实解决了这个问题（以一种迂回的方式）但忘记发布我的解决方案 - 直到现在。

我最终使用了[QueryPath](http://querypath.org/)，效果非常好。

```
function lazyLoadImages($source = '') {
  $qp = htmlqp($source);
  foreach ($qp->find('img') as $image) {
    $src = $image->attr('src');
    $alt = $image->attr('alt');
    $title = $image->attr('title');
    $style = $image->attr('style');
    $class = $image->attr('class');
    $image->wrap('<noscript/>')->parent('noscript')->after('<img src="/images/whitespace.gif" data-original="' . $src . '" style="' . trim($style) . '"' . ($alt ? ' alt="' . $alt . '"' : '') . ($title ? ' title="' . $title . '"' : '') . ' class="lazy' . ($class ? ' ' . $class : '') . '" />');
  }
  $content = preg_replace(array("/<\?xml.*?\?>/si", "/<\!DOCTYPE.*?>/", "!<(/)?body>!si", "!<(/)?html>!si"), '', $qp->writeSnippet());
  return $content;
} 
```

# ruby-on-rails - 无法查看 FILENAME.rhtml 但可以查看 FILENAME.html

> ID：12335486
> 
> 赞同：0
> 
> 时间：2012-09-09T00:07:05.923
> 
> 标签：ruby-on-rails

我收到以下错误消息：

> 缺少模板应用程序/索引，应用程序/索引与 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}。在以下位置搜索：*“/home/paul/Projects/Ruby on Rails/mark_hughes_seo_project/app/views”

看起来它正在期待 html 格式。如何指示它查找 .rhtml 文件？我看了一遍，似乎找不到答案！

谢谢，保罗

附言。如果我将文件重命名为 .html，它可以工作。但是，我试图弄清楚为什么 .rhtml 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:52:51.617

使用 .html.erb。您是否正在访问映射到应用程序控制器的路由上的操作？如果是这样，那可能不是最好的主意。

基本上，如果有意义的话，这些文件会放在“app/views/#{controller_name}/#{action_name}.html.erb”中。

当然，如果使用 haml，则为 .html.haml。

# c# - 如何轻松地将旧代码转换为 WCF？

> ID：12335487
> 
> 赞同：1
> 
> 时间：2012-09-09T00:07:31.643
> 
> 标签：c#, wcf

嗨，我有以下旧代码。我想创建一个 WCF 而无需创建所有合同和其他垃圾 MS 已内置到他们的代码中。我必须为每个方法和命令创建超过 100 个命令。仅使用现有代码会更简单。

```
 using System;
 using System.Net.Sockets;

 namespace Server
 {
class Program
{
    static void Main(string[] args)
    {
        TcpListener serverSocket = new TcpListener(55555);
        TcpClient clientSocket = default(TcpClient);
        serverSocket.Start();
        Console.WriteLine(" >> " + "Server Started");
        ServerLobby.Initialize();
        ServerLobby.reader.Load("Users.xml");

        while (true)
        {
            clientSocket = serverSocket.AcceptTcpClient();
            Client client = new Client(clientSocket);
          }
       }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:21:50.343

最简单的方法是定义一个简单的 WCF 接口来调用您的旧方法。不过，您仍然必须填写所有*“垃圾”*。

```
public interface ICommandServer
{
    void Execute(string command, string[] args);
} 
```

# python - 无法在 Django 中使用环境变量进行设置

> ID：12335488
> 
> 赞同：13
> 
> 时间：2012-09-09T00:07:32.373
> 
> 标签：python, django, environment-variables

在尝试找到存储和保存 settings.py 和数据库之外的设置的地方时，我使用 environment.json 作为环境变量。我在 settings.py 中导入这些。

我的问题是，当我尝试在我的环境中更改或存储新值时`env`，`settings.py`并没有注意到更改 - 可能是因为 Django 读取了 settings.py 的时间和次数。

有没有一种方法可以像下面尝试的那样以我想要的方式使用我的环境变量？

```
# settings.py
import json
with open('/home/dotcloud/environment.json') as f:
    env = json.load(f)
EMAIL_HOST = env.get('EMAIL_PORT', '500')

# views.py
import json
def site_configuration(request):
    with open('/home/dotcloud/environment.json') as f:
        env = json.load(f)
    if request.method == 'POST':
        os.environ['EMAIL_PORT'] = request.POST['email_port']
    return render(request, ...)

# python manage.py shell demo
>>> import json
>>> with open('/home/dotcloud/environment.json') as f:
...     env = json.load(f)
... 
>>> project_settings.EMAIL_PORT
'500'
>>> env['EMAIL_PORT']
Traceback (most recent call last):
  File "<console>", line 1, in <module>
KeyError: 'EMAIL_PORT'
>>> env['EMAIL_PORT'] = "123"
>>> env['EMAIL_PORT']
'123'
>>> project_settings.EMAIL_PORT
'500'
>>> project_settings.EMAIL_PORT == env['EMAIL_PORT']
False' 
```

如果没有，我还能如何存储由`settings.py`我的 Django 项目中某处检索到的可变设置？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-17T17:57:11.410

您可能想查看`foreman`( [GitHub](https://github.com/ddollar/foreman) ) 或`honcho`( [GitHub](https://github.com/nickstenning/honcho) )。这两个都在当前目录中查找一个`.env`文件，从中加载本地环境变量。

对于大多数项目，我的`.env`外观是这样的（我使用 dj-database-url 进行数据库配置）：

```
DATABASE_URL=sqlite://localhost/local.db
SECRET_KEY=<a secret key>
DEBUG=True 
```

在您的`settings.py`文件中，您可以`os.environ`像这样加载这些设置：

```
import os
DEBUG = os.environ.get('DEBUG', False) 
```

如果有必要的设置，您可以`assert`在尝试设置它们之前将它们存在：

```
assert 'SECRET_KEY' in os.environ, 'Set SECRET_KEY in your .env file!'
SECRET_KEY = os.environ['SECRET_KEY'] 
```

在我开始的最后几个项目中，我一直在使用这种处理本地设置的方法，我认为它非常有效。一个警告是*永远不要*承诺你`.env`的源代码控制。这些是仅存在于当前配置的本地设置，应该为不同的环境重新创建。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T00:43:06.277

我看到问题略有变化，原始答案仍在下方，但这个答案略有不同：

* * *

首先，确保您使用的是正确的 settings.py （`print 'This file is being loaded'`应该可以解决问题）。

其次，我个人建议不要使用 json 文件进行配置，因为它不像 Python 文件那样动态，但无论如何它都应该工作。

我推荐的做这样的事情的方式：

1.  `base_settings.py`使用标准设置创建文件
2.  创建一个`settings.py`这将是您的默认设置导入。该文件`from base_settings import *`的顶部应该有一个以继承基本设置。
3.  例如，如果您想要一个自定义设置文件，`dotcloud_settings.py`只需添加`from dotcloud_settings import settings`（或`base_settings`）并将环境变量设置`DJANGO_SETTINGS_MODULE`为`dotcloud_settings`或`your_project.dotcloud_settings`取决于您的设置。

**请注意，从这些设置文件中导入 Django 模块时应该非常小心。如果任何模块执行此操作`from django.conf import settings`，它将在该点之后停止解析您的设置。**

至于使用json文件，当然原理大致相同：

*   再一次，确保你没有`django.conf.settings`在这里导入的任何东西
*   将 json 文件中的所有变量设置为全局变量：

    import json with open('/home/dotcloud/environment.json') as f: env = json.load(f) # 一个小技巧，让我们的环境中的所有变量 globals().update(env)

* * *

无论如何，我建议转而让设置文件导入此模块。

此外，Django 默认情况下不会监听环境变量（除此之外，`DJANGO_SETTINGS_MODULE`这也可能是问题所在。

# core-data - 保存导致“非法建立关系的尝试......”

> ID：12335489
> 
> 赞同：0
> 
> 时间：2012-09-09T00:07:42.383
> 
> 标签：core-data, nsmanagedobjectcontext

我正在将数据导入核心数据的后台线程上执行 NSOperation。为此，我首先创建导入记录（“导入”），然后导入与导入记录相关的对象。如果我保存托管对象上下文，下一次将导入对象链接到导入记录的尝试将失败：

```
Illegal attempt to establish a relationship 'import' between objects in different contexts (source = <NSManagedObject: 0x1067bb730> (entity: Genre; id: 0x1053330c0 <x-coredata:///Genre/tC6A85CFE-3D0A-4E29-9186-4FD46104AEBC60> ; data: {
    import = nil;
    name = Polka;
}) , destination = <NSManagedObject: 0x106736170> (entity: Import; id: 0x103b571e0 <x-coredata://440D80CF-7C56-4B6F-9778-990032A76B8B/Import/p1> ; data: <fault>)) 
```

这是简化的代码。我稍微修改了代码，通过添加一个多余的保存来演示效果；通常没有理由在那里有一个。

```
NSError *writeError = nil;

TNAppDelegate *del = (TNAppDelegate *)[[NSApplication sharedApplication] delegate];
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
[moc setPersistentStoreCoordinator:[del persistentStoreCoordinator]];
[moc setUndoManager:nil];

NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self
       selector:@selector(mergeChanges:)
           name:NSManagedObjectContextDidSaveNotification
         object:moc];

// create import instance
NSManagedObject *import = [NSEntityDescription insertNewObjectForEntityForName:@"Import" inManagedObjectContext:moc];
[import setValue:[NSDate date] forKey:@"start"];

[moc save:&writeError];
[moc reset];

NSString *newGenre = [songDictItem objectForKey:@"Genre"];
NSManagedObject *newGenreObject = [NSEntityDescription insertNewObjectForEntityForName:@"Genre" inManagedObjectContext:moc];
[newGenreObject setValue:newGenre forKey:@"name"];
[newGenreObject setValue:import forKey:@"import"]; // BOOM! 
```

**更新：**应要求，我提供了 mergeChanges 的代码：。它可以在 NSOperation 中找到。我已经尝试了[许多](http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/)将[更改](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)保存到主 MOC 的变体，但它们都以相同的方式结束。

```
- (void)mergeChanges:(NSNotification*)notification
{
    TNAppDelegate *del = (TNAppDelegate *)[[NSApplication sharedApplication] delegate];
    if ([notification object] == [del managedObjectContext]) return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(mergeChanges:) withObject:notification waitUntilDone:YES];
        return;
    }

    [[del managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:47:52.207

直到今天，我还没有弄清楚到底发生了什么。最后，我重新启动了我的项目，并像[本教程](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)一样从头开始设计它。我过去曾使用它作为参考，但不知何故，它需要完全采用他们的代码才能工作。

# c# - jquery asp.net 悬停框用于在代码中创建的多个 div 到文字控件中

> ID：12335496
> 
> 赞同：1
> 
> 时间：2012-09-09T00:10:14.663
> 
> 标签：c#, jquery, asp.net

我正在尝试绘制地图，并且我有一个村庄对象的列表。然后我计算出地图的视图窗口，然后循环检查每个坐标，以查看数据库中是否存在村庄。如果有，我画村庄。我真正想要的是在每个村庄上空悬停时能够有一个 jquery 悬停菜单。

目前我有它，所以当你将鼠标悬停在一个村庄上时，每个村庄的所有悬停菜单都会显示，因为它们当然都共享相同的图像 ID 和悬停菜单 ID。但是，如果我将它们更改为唯一的 ID，我怎样才能为每个村庄制作悬停框？

这是我目前的代码（我正在循环并写入文字控件）

地图.aspx.cs

```
MapLiteral.Text = "";
    MapLiteral.Text += "<table cellpadding=\"0\" cellspacing=\"0\">";

    for (int i = minx; i <= maxx; i++)
    {
        MapLiteral.Text += "<tr>";
        for (int j = miny; j <= maxy; j++)
        {
            MapLiteral.Text += "<td width\"50px\" height=\"50px\" style=\"border: solid 1px #2d5c25;\">";
            if (Objects.Village.VillageExists(i, j))
            {
                Objects.Village village = new Objects.Village();
                village = Objects.Village.GetVillage(i, j);
                MapLiteral.Text += "<div class=\"village\"><img src=\"/Images/Map/Village1.gif\" /></div>";
                MapLiteral.Text += "<div class=\"villagehover\" id=\"villagehover\">test</div>";
            }
            else
            {
                MapLiteral.Text += "<img src=\"/Images/Map/Grass.gif\" />";
            }
            MapLiteral.Text += "</td>";
        }
        MapLiteral.Text += "</tr>";
    }

    MapLiteral.Text += "</table>"; 
```

地图.aspx

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $(".villagehover").hide()
        $(".village").hover(
  function () {
      $('.villagehover').stop().fadeTo("slow", 0.33);
  },
  function () {
      $('.villagehover').stop().fadeOut("slow");
  }
);

    });
</script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
<center>
    <h2>
        Map (<asp:Label ID="XTitleLabel" runat="server" />,
        <asp:Label ID="YTitleLabel" runat="server" />)
    </h2>
     <asp:Literal ID="MapLiteral" runat="server"></asp:Literal> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:04:07.407

这可以通过更好的选择器来解决。如您所见，`$('.villagehover')`正在选择所有悬停 div。在 jQuery 中，`this`设置为所选元素（在悬停功能内），因此您可以通过使用获得正确的悬停 div

```
$(this).parent().find('.villagehover') 
```

`id="villagehover"`还要记住，每页只能有一个。

# php - 正则表达式用php提取

> ID：12335497
> 
> 赞同：1
> 
> 时间：2012-09-09T00:10:17.157
> 
> 标签：php, regex

我需要一个正则表达式，如果有一个数字后跟一个百分号，它将在我的字符串开头搜索并提取它。

```
$string = "20% - some text";

preg_match('/^[0-9]+%$/',$string); 
```

应该返回 20%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:12:48.330

您应该使用以下`$matches`参数：

```
$string = "20% - some text";
$matches = array();
if (preg_match('/^([0-9]+%)/', $string, $matches)) {
     print_r($matches);
} 
```

# json - 以应用程序/八位字节流的形式发送数据是否比以 JSON 编码的字节数组形式发送数据更有效？

> ID：12335500
> 
> 赞同：6
> 
> 时间：2012-09-09T00:10:42.900
> 
> 标签：json, http, encoding

我有一个 Web 应用程序，允许客户端一次请求多个图像缩略图。响应当前作为 JSON 编码的对象列表发送，其中每个对象都包含（编码的）图像数据。（我使用的是 JSON.NET；看起来它正在将图像数据编码为 base64 字符串）。

如果我更改我的应用程序，以便将图像数据与 JSON 对象分开发送，作为“二进制”（应用程序/八位字节流）内容，这会更有效吗？

或者更简单地说，应用程序/八位字节流是比 base64 更紧凑的编码吗？

另外，这与 image/jpeg 有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T23:07:32.493

好的，所以 application/octet-stream 本质上是二进制的，这当然比 base64 更有效。在空间方面效率提高了 30%，并且无需编码/解码。

# ruby-on-rails - Rails 如何知道在类中使用“as_json”

> ID：12335505
> 
> 赞同：0
> 
> 时间：2012-09-09T00:11:16.193
> 
> 标签：ruby-on-rails, datatables

我正在阅读这个 Railscast：[http: //railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast)

瑞恩说，在页面的中间

> as_json 方法由控制器中的 render_json 调用在后台触发。

但没有给出更多解释。我试图让这个类也用 CSV 响应，但是`def as_csv`在类和`format.csv { render :csv =>`调用控制器中什么都不做。

所以，不知何故，该类知道它何时由 初始化`render :json`，但我不知道如何让它知道它是由 初始化的`render :csv`。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:22:38.053

如果将对象传递给`render :json`，则`as_json`对该对象调用该方法以检索该对象的 JSON 表示。您可以覆盖此方法，以便它返回您想要的任何内容。

这仅适用于 JSON，它不是适用于所有格式的通用规则。如果您想呈现某个对象的 CSV 表示，您可以使用以下方法轻松完成：

```
format.csv do
  render :text => object.as_csv
end 
```

然后`as_csv`在类中实现该方法。

# c# - 通过单击按钮更改标签文本

> ID：12335507
> 
> 赞同：0
> 
> 时间：2012-09-09T00:11:25.223
> 
> 标签：c#, button, label

我需要更改按钮单击时标签的文本，但它不起作用并给我运行时错误。我有单独的标签类和单独的按钮。这是虚拟代码。真正的代码包含位置和大小标签和按钮。一切都是动态创建的。谢谢！

```
 /-------------------------------------LABEL class-------------------------------/
   private Label label1;

   public Label getLabel1()
   {
       return label1;
   }

   public LABEL()
   {
       label1 = new Label();
   }

    public void print()
    {            
        label1.Text = "x";
        Controls.Add(label1);
    }//

  /-------------------------------------BUTTON class----------------------------------/
    private Button button1;

    public BUTTON()
    {

    }

    public void print()
    {
        button1 = new Button();
        button1.Click +=new EventHandler(button1_Click);
        Controls.Add(button1);
    }

     public void button1_Click(object sender, EventArgs e)
     {
        LABEL label = new LABEL();
        label.getLabel1().Text = "y";
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-31T06:28:49.343

你可以简单地尝试一下。

```
private void button1_Click(object sender, EventArgs e){label1.Text = "Hi";label1.Refresh();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:19:16.243

您正在尝试更改空引用标签的文本：

```
// Label Class
private Label label1;
public Label getLabel1()
{
    return label1;
}
// Button Class
LABEL label1 = new LABEL();
label1.getLabel1().Text = "y";
// getLabel1 is returning null, because you have not initialized label1 
```

为了使代码正常工作，您必须更改以下内容：

```
public LABEL()
{
    label1 = new Label();
}

public void print()
{
    label1.Text = "x";
    Controls.Add(label1);
} 
```

希望这可以帮助！

# c++ - C++ 获取一个尚未在向量中使用的随机值

> ID：12335512
> 
> 赞同：1
> 
> 时间：2012-09-09T00:13:23.057
> 
> 标签：c++, vector, iteration

我正在制作井字游戏，而我现在正在制作玩家的对手。如您所知，井字游戏有 9 个字段，所以我制作了一个向量，其中包含其他 X 和 O 已经使用的所有字段。

```
std::vector<int> UsedPositions; 
```

因此，在我尝试使用 srand(time()) 获取随机值并遍历向量以检查该位置是否已被使用之前。它确实有效，但正如您想象的那样，我可怜的 CPU 需要进行大量计算（因此是时间），因为如果向量有大约 8 个元素，则意味着它必须迭代 8 次（如果随机数是不同，否则它必须再经过 8 次）。

TL; DR - 如何从向量中获得 < 10 && > 0 的不同随机值？

对我来说很慢的代码：

```
int FindUniqueAnswer()
{
    int answer;
    bool AnswerFound = false;

    while(!AnswerFound)
    {
        bool DoesntEqual = true;
        srand(time(0));
        int random = rand()%10;
        if(random == 0)
        {
            random++;
        }

        for(int i = 0;i<UsedPositions.size();i++)
        {
            if(random == UsedPositions.at(i))
            {
                DoesntEqual = false;
                break;
            }
        }
        if(DoesntEqual)
        {
            answer = random;
            AnswerFound = true;
        }
    }

    return answer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:54:28.730

```
#include <random>
#include <algorithm>
...
vector<int> v = {1, 2, 3, 4, 5, 6, 7, 8, 9};
std::random_device rd
mt19937 g(rd());
shuffle(v.begin(), v.end(), g); 
```

复制自 cppreference.com

# java - 查询用户数据时 Java ResultSet 已关闭异常

> ID：12335513
> 
> 赞同：2
> 
> 时间：2012-09-09T00:13:38.807
> 
> 标签：java, sql, jdbc

正如我在标题中开始的那样，当我在我的 java 应用程序中查询用户数据时，我收到以下消息：*"Operation not allowed after ResultSet closed"*。

我知道如果您尝试同时打开更多结果集，就会发生这种情况。

这是我当前的代码：

应用程序调用 getProject("...")，其他 2 个方法只是为了寻求帮助。我正在使用 2 个类，因为代码更多，这只是我得到的异常示例之一。

*请注意，为了更好地理解，我已经翻译了变量名等，希望我没有遗漏任何内容。*

```
/* Class which reads project data */

public Project getProject(String name) {
    ResultSet result = null;
    try {
        // executing query for project data
        // SELECT * FROM Project WHERE name=name
        result = statement.executeQuery(generateSelect(tProject.tableName,
                "*", tProject.name, name));
        // if cursor can't move to first place,
        // that means that project was not found
        if (!result.first())
            return null;
        return user.usersInProject(new Project(result.getInt(1), result
                .getString(2)));
    } catch (SQLException e) {
        e.printStackTrace();
        return null;
    } catch (BadAttributeValueExpException e) {
        e.printStackTrace();
        return null;
    } finally {
        // closing the ResultSet
        try {
            if (result != null)
                result.close();
        } catch (SQLException e) {
        }
    }
}

/* End of class */

/* Class which reads user data */

public Project usersInProject(Project p) {
    ResultSet result = null;
    try {
        // executing query for users in project
        // SELECT ID_User FROM Project_User WHERE ID_Project=p.getID()
        result = statement.executeQuery(generateSelect(
                tProject_User.tableName, tProject_User.id_user,
                tProject_User.id_project, String.valueOf(p.getID())));

        ArrayList<User> alUsers = new ArrayList<User>();
        // looping through all results and adding them to array
        while (result.next()) { // here java gets ResultSet closed exception
            int id = result.getInt(1);
            if (id > 0)
                alUsers.add(getUser(id));
        }
        // if no user data was read, project from parameter is returned
        // without any new user data
        if (alUsers.size() == 0)
            return p;
        // array of users is added to the object,
        // then whole object is returned
        p.addUsers(alUsers.toArray(new User[alUsers.size()]));
        return p;
    } catch (SQLException e) {
        e.printStackTrace();
        return p;
    } finally {
        // closing the ResultSet
        try {
            if (result != null)
                result.close();
        } catch (SQLException e) {
        }
    }
}

public User getUser(int id) {
    ResultSet result = null;
    try {
        // executing query for user:
        // SELECT * FROM User WHERE ID=id
        result = statement.executeQuery(generateSelect(tUser.tableName,
                "*", tUser.id, String.valueOf(id)));
        if (!result.first())
            return null;
        // new user is constructed (ID, username, email, password)
        User usr = new user(result.getInt(1), result.getString(2),
                result.getString(3), result.getString(4));
        return usr;
    } catch (SQLException e) {
        e.printStackTrace();
        return null;
    } catch (BadAttributeValueExpException e) {
        e.printStackTrace();
        return null;
    } finally {
        // closing the ResultSet
        try {
            if (result != null)
                result.close();
        } catch (SQLException e) {
        }
    }
}

/* End of class */ 
```

两个类的语句都添加到构造函数中，在构造每个类时调用 connection.getStatement()。

tProject 和 tProject_User 是我的枚举，我使用它来简化名称处理。generateSelect 是我的方法，应该可以按预期工作。我之所以使用它，是因为在我编写了大部分代码之后，我发现了准备好的语句，所以我保持原样。

我正在使用最新的 java MySQL 连接器（5.1.21）。

我不知道还能尝试什么。任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T00:24:14.667

在没有看到您的代码的情况下，真的不可能明确地说出了什么问题。但是请注意，在许多情况下 a`ResultSet`会*自动*为您关闭。引用[官方文档](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)：

> 当生成它的 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，ResultSet 对象将自动关闭。

可能你已经发生了其中一件事情。`ResultSet`或者你在实际完成之前明确地关闭了某个地方。

另外，您是否考虑过使用像 Hibernate 这样的 ORM 框架？一般来说，使用这样的东西比使用低级 JDBC API 更愉快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T06:23:06.230

引用@aroth 的回答：

在很多情况下，a`ResultSet`会自动为您关闭。引用官方文档： [http ://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

```
A ResultSet object is automatically closed when the Statement object that generated 
it is closed, re-executed, or used to retrieve the next result from a sequence of 
multiple results. 
```

在您的代码中，您正在使用在方法中创建结果集的同一对象`ResultSet`在方法中创建新对象，从而导致在方法中关闭结果集对象。`getUser``Statement``usersInProject``usersInProject`

**解决方案：** 创建另一个语句对象并使用它 `getUser`来创建结果集。

# objective-c - 如何在 nsaaray 中触摸和拖动对象

> ID：12335514
> 
> 赞同：-2
> 
> 时间：2012-09-09T00:13:44.907
> 
> 标签：objective-c, ios, xcode

我正在尝试触摸和移动 nsarray 内的对象。我不知道下一步该做什么。这是显示我正在尝试做的代码的代码（显然不起作用，但给出了一个想法）。也许有人可以指导我。

```
 cardKeys = [[NSArray alloc] initWithObjects:
            @"a",
            @"b",
            @"c",
            @"d",
                                 nil];

  -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
   {

{
    UITouch *myTouch = [touches anyObject];
  startPoint = [myTouch locationInView:self.view];

    [cardKeys:startPoint.x:startPoint.y];

}   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:27:31.440

Your code is poorly formatted. Ex. extraneous pair of curly braces in the method, incorrect indentation. You should consider reading a good book on Objective-C and iOS development, like *Programming iOS 5*.

Onto your question. I have no idea how you display the NSStrings in that array, why it's global and not a property/ivar, etc. but one way to make something draggable is to make it a UIView subclass, implement touchesBegan and touchesMoved (as you have), grab the point the user touched in your coordinate system, compare it to the point the person's finger is when it moves, then offset your position based on that.

# objective-c - iOS 开发 - 如何从自定义视图控制器类接收按钮事件？

> ID：12335521
> 
> 赞同：0
> 
> 时间：2012-09-09T00:15:12.847
> 
> 标签：objective-c, ios, model-view-controller, ibaction

所以我在我的主视图控制器中有这个“保存”按钮，我想移动到不同的视图控制器（WriterViewController）。完成此操作后，我的自定义视图控制器类无法响应任何按钮事件。不知道我在这里做错了什么，但这里有一些截图：

保存按钮首先在我的主视图控制器中。我将把它移到右边的视图控制器（WriterViewController）。

![保存按钮当前位于主视图控制器中。](../Images/8fd102e4a03d455ecaa9c53d662398f9.png)

如您所见，将按钮移动到预期的视图控制器后，视图控制器有一个自定义类设置为“WriterViewController”。

![在此处输入图像描述](../Images/226ccb7201a9fb80a22a8e2434038896.png)

然后我 ctrl + 单击并拖动保存按钮，以便我可以将它的“Touch Up Inside”事件链接到“saveEntry”方法。

![在此处输入图像描述](../Images/e6d22fc6567f7584f89d01e592e5b90f.png)

我的 WriterViewController.h 文件的屏幕截图。

![在此处输入图像描述](../Images/56cef20b89047bd06a0223745a9dd4cc.png)

和实施。

![在此处输入图像描述](../Images/a8a88aa14cc9d730f6cb5245ff5f0975.png)

对主视图控制器执行相同的步骤确实有效，并且我能够记录我的消息。但是，它不适用于自定义视图控制器。

有什么想法吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:07:36.223

为什么不从头开始为 WriterViewController 制作保存按钮？拖出 UIButton 并将其文本设置为“保存”并不难。

无论如何，您是否单击了场景中的按钮并查看了连接检查器以确保连接符合您的预期？这似乎很明显，但有时如果您忘记清理它们，连接可能会全部搞砸。（即，您复制了一个按钮、连接和所有内容，但事情并没有按照您认为的那样运行。）

# jquery - jQuery Ui 不工作

> ID：12335529
> 
> 赞同：0
> 
> 时间：2012-09-09T00:16:30.470
> 
> 标签：jquery, jquery-ui

嗨，我正在尝试一个简单的 jquery ui 示例，但它不起作用，我不明白为什么。有谁能够帮我？谢谢

```
<html><head>
<script type="text/javascript" src="jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="jquery-1.8.0.js"></script>
<link rel="stylesheet" type="text/css" href="jquery-ui-1.8.23.custom.css">

<script type="text/javascript">
            $(function(){
                $('#datepicker').datepicker({
                    inline: true
                });
            });
        </script>
  </head>
  <body>
              <input type="text" id="datepicker" class="datepicker">

  </body>
</html> 
```

我真的不明白为什么它不起作用。通过单击我的 mozilla firefox browser 15.0 的源代码视图中的链接，可以找到所有包含在同一个文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:18:18.933

`jQuery-ui.js`之后应该导入`jQuery.js`吗？

由于您使用的是 firefox，因此我推荐使用[firebug](http://getfirebug.com/)控制台。它会向您显示您的 javascript 引发的任何错误。

在正常情况下，当浏览器遇到脚本标签时，它会开始下载它并将其放入队列中等待执行。因此 jQuery-ui 的代码将在 jQuery 中的代码之前执行，并且由于 ui 框架引用了 jQuery，它会抛出一个异常。

有多种解决方案可以启用乱序执行，但**最简单**的是确保所有依赖文件在需要它们的文件之前加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:19:24.650

看起来您在 jQuery 之前就有了 jQuery UI。

# android - 试图使菜单按钮居中

> ID：12335536
> 
> 赞同：2
> 
> 时间：2012-09-09T00:18:26.233
> 
> 标签：android

我正在尝试垂直设置 2 个按钮的菜单。我将布局设置为 RelativeLayout 。第一个按钮以 android:layout_centerVertical="true" android:layout_centerHorizo​​ntal="true" 为中心，这是可行的。

当我尝试通过 android:layout_toBottomOf="@+id/menuat" 将第二个按钮添加到第一个按钮下时，它给了我一个错误。

我如何在屏幕上居中多个按钮？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backFeetGallery"
    android:background="@drawable/background"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

  <Button
      android:id="@+id/menua"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_centerHorizontal="true"
      android:text="But A" 
  />

  <Button
      android:id="@+id/menub"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_centerHorizontal="true"
      android:layout_toBottomOf="@+id/menuat"
      android:text="But B" 
  />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:24:06.930

`layout_toBottomOf`不是有效参数。改为使用`layout_below`。

这是修改后的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backFeetGallery"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

  <Button
      android:id="@+id/menua"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_centerHorizontal="true"
      android:text="But A" 
  />

  <Button
      android:id="@+id/menub"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_centerHorizontal="true"
      android:layout_below="@+id/menua"
      android:text="But B" 
  />

</RelativeLayout> 
```

通过替换此代码，您将获得 menub 低于 menua

完整的相对位置是：

```
android:layout_toLeftOf
android:layout_toRightOf
android:layout_above
android:layout_below 
```

# android - 在 Android 中实现片段

> ID：12335537
> 
> 赞同：1
> 
> 时间：2012-09-09T00:18:40.203
> 
> 标签：android, fragment

我正在开发一个应用程序，并且在一个活动中我希望它类似于 ICS 设置应用程序；即左侧我有一个ListFragment，有4个类别，右侧有一个Fragment，每个类别的内容，每个类别都有不同的布局。我遇到了一个疑问：我应该为类别开发4个不同的片段并根据所选类别替换它们，还是有一种方法只为内容使用一个片段并根据所选类别使用不同的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:05:59.997

编写单独的片段并根据需要将它们切换出来。

这样做会使您的代码更加模块化，并允许您利用现有的 Android API（例如[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)来显示您的数据。

# c++ - 静态数组初始化的好设计

> ID：12335539
> 
> 赞同：2
> 
> 时间：2012-09-09T00:19:19.277
> 
> 标签：c++, api

我有一个关于 C++ 中良好设计的问题。我有一个`class A`, 并且这个类的所有对象都使用一个常量值的整数数组（它们应该共享同一个数组，因为它们的值是常量）。该数组需要在任何对象 A 之前计算（仅一次）。

我想过有另一个`class B`包含整数数组作为静态成员的`init()`方法，一个根据一些公式填充这个数组的方法和一个静态布尔标志`initialized`（如果这个变量为真，那么该`init()`方法将什么都不做），但我不是确定这是解决我的设计问题的最佳方法。

所以我的问题是，什么是实现这一目标的好设计/方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:37:18.307

由于数组是常量，因此使用`const`.

由于该数组在类的所有实例之间共享，因此使用`static`.

在你的头文件中，*声明*它：

```
class A
{
    static const int the_array[10];
} 
```

在 A 的源文件中，*初始化一个实例*：

```
const int A::the_array[10] = { ... }; 
```

**从评论编辑...**

或者，如果通过算法更好地生成数组，请使用常量指针。数组的使用语法是相同的。

请注意，数组和指针都是`const`.

*标题：*

```
class A
{
    static const int * const the_array;
} 
```

*源文件：*

```
namespace
{
  const int * generate_my_array()
  {
    // Allocate an array, initialize it, return it.
  }
}

const int * const A::the_array = generate_my_array(); 
```

# c# - 为什么我在每次事务之后都被迫关闭（） C# 异步客户端套接字？

> ID：12335542
> 
> 赞同：-1
> 
> 时间：2012-09-09T00:19:40.693
> 
> 标签：c#, sockets, asyncsocket

我正在尝试编写一个异步套接字应用程序，该应用程序在两侧传输复杂的对象..

我在[这里](http://roy-t.nl/index.php/2009/05/31/sending-objects-via-high-speed-asynchronous-sockets-in-c-serialization-socket-programming/)使用了这个例子......

一切都很好，直到我尝试发送多包数据。当传输的数据需要多个包传输时，服务器应用程序正在挂起并且服务器失控而没有任何错误...

几个小时后，我找到了解决方案；如果我在每次 EndSend 回调后关闭客户端发送方套接字，则问题正在解决。但我不明白为什么这是必要的？或者对于这种情况还有其他解决方案吗？

我的 (2) 项目与[上面](http://roy-t.nl/index.php/2009/05/31/sending-objects-via-high-speed-asynchronous-sockets-in-c-serialization-socket-programming/)的示例相同，只是我更改了 EndSend 回调方法，如下所示：

```
 public void EndSendCallback(IAsyncResult result)
    {
        Status status = (Status)result.AsyncState;
        int size = status.Socket.EndSend(result);
        status.Socket.Close(); // <--------------- This line solved the situation
        Console.Out.WriteLine("Send data: " + size + " bytes.");
        Console.ReadLine();
        allDone.Set(); 
    } 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:43:48.497

这是由于给出的示例代码没有处理多个包（并且被破坏）。

几点观察：

*   服务器一次只能处理 1 个客户端。
*   服务器只是检查传入的数据是否在一次读取中小于请求的数据，如果是，则假定这是最后一部分。
*   然后服务器在保持连接打开的同时忽略客户端套接字。这将关闭连接的责任放在客户端，这可能会造成混淆，并且会浪费服务器上的资源。

现在第一个观察结果是一个实现细节，与您的情况并不真正相关。第二个观察与您相关，因为它可能会导致无法解释的错误 - 可能不是在开发中 - 但是当这段代码实际上是在真实场景中的某个地方运行时。套接字不是流线型的。当客户端发送超过 1000 个字节时。这可能需要在服务器上调用 1 次或 10 次读取。只要有“一些”数据可用，读取调用就会返回。您需要做的是实现某种协议，以传达正在发送多少数据或何时发送所有数据。我真的建议坚持使用 HTTP 协议，因为这是一个经过良好测试且支持良好的协议，适合大多数场景。

第三个观察结果也可能导致服务器资源不足的错误，因为它使所有连接都处于打开状态。

# java - 为命令行构建设置 debug.keystore 的位置而不重写 Ant 目标

> ID：12335543
> 
> 赞同：1
> 
> 时间：2012-09-09T00:19:57.463
> 
> 标签：java, android, build

当我从命令行运行“ant debug”时，我收到以下错误消息：

[apkbuilder] keytool error: java.io.FileNotFoundException: \stulab2\folderRedir ection$.android\debug.keystore (系统找不到指定的路径)

```
BUILD FAILED
e:\programs\java\android-sdk\tools\ant\build.xml:919: The following error occurred while executing this line:
e:\programs\java\android-sdk\tools\ant\build.xml:930: The following error occurred while executing this line:
e:\programs\java\android-sdk\tools\ant\build.xml:295: com.android.sdklib.build.ApkCreationException: Unable to get debug signature key
        at com.android.sdklib.build.ApkBuilder.getDebugKey(ApkBuilder.java:277) 
```

接下来是很长的堆栈跟踪。

问题是我在公共计算机上并且没有对 Ant 期望找到 .android\debug.keystore 的文件夹的写入权限。一些研究在 Android 文档中发现了以下内容：

> 如有必要，您可以更改调试密钥库/密钥的位置/名称或提供自定义调试密钥库/密钥以供使用。但是，任何自定义调试密钥库/密钥都必须使用与默认调试密钥相同的密钥库/密钥名称和密码（如上所述）。（要在 Eclipse/ADT 中执行此操作，请转到 Windows > Preferences > Android > Build。）

不幸的是，这并没有解释如何使用命令行工具更改调试密钥库的位置。

几个月前，有人在 stackoverflow 上问了基本相同的问题：[如何为 Android ant 调试版本指定调试密钥库的位置？](https://stackoverflow.com/questions/9019833/specify-location-of-debug-keystore-for-android-commandline-ant-build). 到目前为止，最好的答案是重写 -do-debug 目标。据我所知，我还需要设置指定的属性。

这个答案的一个问题是它使用与发布版本相同的属性。此外，最好简单地设置正确的属性，而不是重写（和调试）整个 -do-debug 目标。有谁知道是否可以设置属性来指定 debug.keystore 文件的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:05:44.200

在[`.bashrc`](https://serverfault.com/questions/606/)中，将`ANDROID_SDK_HOME`环境变量设置为您的 Android SDK 安装位置。例如：

```
export ANDROID_SDK_HOME="/home/myusername/path/to/androidsdk" 
```

然后，在一个新的 shell 中，运行`ant debug`会创建一个`${ANDROID_SDK_HOME}/.android/debug.keystore`文件。

或者，无需全局更改变量，您可以简单地运行：

```
ANDROID_SDK_HOME="/home/myusername/path/to/androidsdk" ant debug 
```

# c++ - 从 com 端口 C++ 读取

> ID：12335544
> 
> 赞同：0
> 
> 时间：2012-09-09T00:20:08.693
> 
> 标签：c++, arduino, fstream

我正在尝试与 Arduino 微控制器通信。这在 C# 中很容易做到，但在 C++ 中我无法弄清楚。这是我的arduino代码...

```
void loop()
{
  if (Serial.available() > 0)
  {
    byte input = Serial.read();
    Serial.write(input);
  }
} 
```

因此，您发送到 arduino 的任何内容都会被退回给您。

我可以使用 fstream 库读取对它的写入。问题是当我尝试从缓冲区读取时，什么都没有。

```
int main(int argc, char** argv)
{
fstream filestr;
filestr.open ("COM4", fstream::in | fstream::out | fstream::trunc);

if (!filestr.is_open())
{
    cout << "error opening port";
}
else
{
    cout << "port opened";
}

char* input = new char();
cin >> input;
filestr.write(input, 1);
filestr.flush();

char * buffer = new char [1];
buffer[0] = -1;

filestr.read (buffer,1);
while ((int)buffer[0] == -1)
{
    filestr.read (buffer,1);
}
cout << buffer[0];

cin >> input;

filestr.close();
return 0;  
} 
```

所以我向它发送一些数据并开始循环读取，直到 arduino 回复。第一次阅读不会得到任何回报，因为 arduino 没有时间响应，所以我一直阅读直到它得到数据。但我似乎永远得不到回应。如果我在第一次阅读之前稍作延迟并给 arduino 时间做出响应，它确实有效。当我阅读某些内容时，阅读器的位置会向前移动吗？当我从缓冲区中读取某些内容时，它会自动从缓冲区中删除吗？有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:03:03.840

您应该获取 arduino Firmata windows 工具的代码。它可以完成您尝试做的所有事情。

[http://firmata.org/wiki/Main_Page](http://firmata.org/wiki/Main_Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:38:53.187

查看有关使用 Boost Asio 读取串行端口的另一个问题：[Reading from serial port with Boost Asio](https://stackoverflow.com/questions/2807055/reading-from-serial-port-with-boost-asio)

# http - 当 Web 服务器返回 JPEG 图像（mime 类型图像/jpeg）时，它是如何编码的？

> ID：12335546
> 
> 赞同：14
> 
> 时间：2012-09-09T00:20:40.593
> 
> 标签：http, mime-types

如果您向 Web 服务器发出 HTTP 请求，它返回类型为 image/jpeg 的响应，那么二进制数据实际上是如何编码的？是通过网络传输的图像的原始字节级内容，还是它的一些基于字符的表示（例如base64）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T01:03:05.377

编码后的传输数据由`Content-Encoding`HTTP 响应标头指定（请参阅[RFC2616](https://www.rfc-editor.org/rfc/rfc2616)第 14.11 和 3.5 节中的 HTTP 1.1 规范）。如果存在，它可以是`gzip`、`compress`或`deflate`压缩数据（HTTP 1.1 中未定义其他数据）。如果不是，则数据采用基于`Content-Type`HTTP 响应标头（MIME 类型）的原始编码。这`Content-Encoding`取决于`Accept-Encoding`HTTP 请求标头值和 Web 服务器是否支持请求的编码。

在您的情况下，如果`Content-Encoding`HTTP 响应标头不存在，则数据与文件内容完全相同。否则，将使用指定的编码对其进行压缩。例如：*GZip*或*Deflate*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T00:30:01.093

原始字节通过线路发送。

（通过一些设置，您可以使用 Wireshark、tcp_dump 等来确认这一点。）

请注意，大多数服务器都配置为*不*压缩 JPEG，但文本数据通常以压缩方式发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T17:20:58.830

奇怪的是，这不是“直通”。

除了添加 MIME 标头外，网络服务器似乎删除了所有 jpeg 标记（0xFF、0xNN），但其余部分保持不变。这似乎很奇怪，因为我不知道网络浏览器是如何识别图像帧的开始的。

我通过在嵌入式系统中编写自己的简单网络服务器发现了这一点 - 我认为我只需要添加 MIME 标头并发送 jfif-jpeg 文件的其余部分不受影响，但浏览器显示“无法显示图像，因为它包含错误”！

这是十六进制原始 jpeg/jfif 的开头

ff d8 ff e0 00 10 4a 46 49 46 00

[SOI][APP0][长度]JFIF NULL

根据规范。

收到的文件在标题之后包含以下内容：

0d 0a 0d 0a 00 10 4a 46 49 46 00

前 4 个字节是标头末尾的 cr/lf/cr/lf，然后是 NO 标记，但它确实包含数据字段。对其他标记重复同样的事情，例如帧的开始。

奇怪吧？我认为这不是 MIME 编码问题，因为其余数据看起来完好无损 - 包括数据中的 FF 等。

有人知道这里发生了什么吗？PS 仔细观察，只需使用 putty 或类似工具从任何网站请求 .jpg 并保存您获得的内容，并将其与原始版本甚至另存为版本进行比较。

# java - 如何将另一个 JSP 页面注入到 单击链接时？

> ID：12335547
> 
> 赞同：5
> 
> 时间：2012-09-09T00:20:50.750
> 
> 标签：java, javascript, jsp

我在 JSP 页面中有两个不同的部门。一个包含一个链接菜单，当单击 div2 (id-content) 时会相应地加载不同的页面。我正在做类似的事情 -

```
<div id="menu">
<ul class="navbar">
  <li><a name="login" href="Login.jsp" onclick="changeContent()">Login</a>
   </li></div> 
```

在脚本中我有一些东西 -

```
<script language="JavaScript">
function changeContent() {
    document.getElementById('content').load('Login.jsp');
}
</script> 
```

我也试过——

```
document.getElementById('content').innerHTML=
"<jsp:include page="Login.jsp">"; 
```

没有一种方法奏效。请建议我应该如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:36:53.843

试试jquery ..

```
function changeContent() {
    $('#content').load('Login.jsp');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:55:18.717

解决方案是使用 Ajax，它将异步检索可以使用 innerHTML 方法粘贴的页面内容。请参阅[我](https://stackoverflow.com/questions/12308384/loading-resources-before-running-java-code-in-servlet/12308550#12308550)对 Ajax 调用如何工作的类似问题的回答以及一些介绍性链接。

至于为什么您的答案中的示例不起作用，在第一种情况下， Element 对象上没有 load() 方法（除非您自己定义了一个并且没有显示它）。在第二个示例中，正如其中一个问题评论所说，可能有一些东西导致了 javascript 中的语法错误。

作为仅供参考，当网页中的某些 javascript 存在语法错误时，当前正在解析的表达式和 <script></script> 块的其余部分将被忽略。由于这是在函数声明中，因此该函数永远不会被定义。例如，包含页面中的嵌入引号将结束 innerHTML 分配的字符串。然后 javascript 解析器将尝试解析 HTML 的其余部分，从而导致语法错误，因为 HTML 将不是有效的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:47:17.113

我们使用jquery。将 click 事件处理程序添加到锚元素。在点击处理程序调用`$('#content').load(your_url);`中。您可能想要使用该`load(url, function() { ...})`版本。更多信息在这里[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T01:59:47.243

您的初始页面来自服务器。它由浏览器显示。当您单击浏览器中的链接（或按钮）时，您希望用新的 HTML 填充第二个 div。这是 AJAX 请求的完美工作。浏览器中的 AJAX 对象所做的是将 POST（或其他）字符串发送到服务器。然后 Ajax 对象从服务器接收 HTML 响应。然后你可以在任何你想要的地方显示 AJAX 对象包含的响应数据。

# php - PHP + 允许上传 JPG 文件

> ID：12335553
> 
> 赞同：1
> 
> 时间：2012-09-09T00:21:53.647
> 
> 标签：php, jpeg

我有一些 php 代码检查用户上传的文件类型：

```
 $fileType = $_FILES['file']['type'];
  $allowedFileTypes = array('image/jpeg','image/gif','image/png','image/jpg');
  if(!in_array($fileType, $allowedFileTypes)) {echo 'fileTypeNotAllowed'; exit;} 
```

我发现 gif 和 png 文件上传时不会触发回声，但 jpg 文件会触发回声。

下面是一个触发回显的文件示例：

![在此处输入图像描述](../Images/da00b43e9bc771bba0a6beae3aaa63da.png)

关于我在这里做错了什么有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:08:41.223

好吧，你想检查他们上传的内容......所以我会使用 !in_array(strtlower($fileType, $allowedFileTypes)) in_array。

那应该清除一切。

# cakephp - CakePHP 烘焙自连接模型

> ID：12335561
> 
> 赞同：0
> 
> 时间：2012-09-09T00:24:39.253
> 
> 标签：cakephp, model, self-join

我正在尝试设置一个自我加入并有地狱。

例如，一个用户有一个联系人列表，它只是其他用户。所以 ContactList 是一个将 User 连接到自身的连接表。

用户

编号 | 姓名

联系人列表

编号 | 用户 ID | 朋友ID

然而，烘烤后，我没有得到我期望的结果。我已经用谷歌搜索了解决方案，但它们对我不起作用。这种情况如何处理？我需要自定义模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:31:58.800

解决方案是根据[CakePHP 的书 [Associations]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)手动设置关联。

如果没有“friends”表，CakePHP 怎么知道“friend_id”指的是什么？提示：不能。

书中关于协会的页面上有很多很好的例子（上面的链接）。通读一遍，你肯定会有更好的理解。

它并没有真正考虑通过做不适合你的事情来“定制模型”。烘烤只是让准系统启动并滚动的一种快速方法，但不能指望它能完成所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T15:01:01.297

`bake``parent_id`如果您指定了在数据库中命名的字段，则能够生成自引用关系（仅）

# vb.net - 在 Visual Basic 中将 GridViewRow 数据导入 DataRow

> ID：12335563
> 
> 赞同：0
> 
> 时间：2012-09-09T00:24:46.900
> 
> 标签：vb.net

下面是我尝试使用的一个循环，用于将 GridViewRow 中的值获取到 DataRow 对象中（使用 Visual Basic 的 Godforsaken 语言）。但是，在这一行：

```
 dr(i) = r.Cells(i).Text 
```

我不断收到以下错误消息：

```
the value of type string cannot be converted to system.data.datarow 
```

有人可以指出我如何做到这一点的正确方向吗？

```
 Dim rows As New List(Of GridViewRow)()

        For Each item As GridViewRow In grdExpProd.Rows
            rows.Add(item)
        Next

        Dim value As Integer = rows.Count

        Dim dt As New DataTable()

        For index As Integer = value - 1 To 0 Step -1
            Dim dr As DataRow()
            Dim r As GridViewRow = rows(index)

            For i As Integer = 0 To r.Cells.Count - 1
                dr(i) = r.Cells(i).Text
            Next

            dt.Rows.Add(dr)
        Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:02:47.157

我相信您需要将文本添加到[DataRows 项属性](http://msdn.microsoft.com/en-us/library/kwfe1t7z%28v=vs.100%29.aspx)中，这将允许您访问 DataRow 的各个单元格。您还需要将 GridRowView 中存在的列添加到新的`DataTable`.

```
For i = 1 To rows(0).Cells.Count
    dt.Columns.Add("Header" & i)
Next

For index As Integer = value - 1 To 0 Step -1
    Dim dr As DataRow = dt.NewRow()
    Dim r As GridViewRow = rows(index)

    For i As Integer = 0 To r.Cells.Count 
        dr.Item(i) = r.Cells(i).Text
    Next

    dt.Rows.Add(dr)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:35:44.517

您不小心将 dr 创建为 DataRow 对象数组，而不是单个 DataRow 对象。尝试更换

```
Dim dr As DataRow() 
```

和

```
Dim dr As New DataRow() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:52:50.640

尝试更换

```
Dim dr As DataRow() 
```

和

```
Dim dr As DataRow = dt.NewRow() 
```

此外，正如另一位海报指出的那样，您需要在数据表中创建列，然后再尝试向其中添加行。

# c# - Linq SelectMany 查询

> ID：12335564
> 
> 赞同：4
> 
> 时间：2012-09-09T00:24:53.547
> 
> 标签：c#, linq

我有以下查询：

```
 DateTime cutoffDate = new DateTime(1997, 1, 1); 

 var orders = 
     from c in customers 
     where c.Region == "WA" 
     from o in c.Orders 
     where o.OrderDate >= cutoffDate 
     select new { c.CustomerID, o.OrderID }; 
```

这怎么能用 Linq Lambda 写呢？顺便说一句，这是否称为 SelectMany 查询？

这也可以通过加入来完成，如上所示，这样做的利弊是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T00:44:41.647

是的，这是一个`SelectMany`. 您可以`SelectMany`将嵌套或分层集合（在这种情况下，订单嵌套在客户下）“扁平化”为简单的单层集合。

```
customers.Where(c => c.Region == "WA")
    .SelectMany(c => c.Orders)
    .Where(o => o.Orderdate >= cutoffDate)
    .Select(x => new { x.OrderID, x.Customer.CustomerID }); 
```

如果订单是客户的属性，则无需使用连接。

# javascript - jQuery在之后停止工作

> ID：12335565
> 
> 赞同：0
> 
> 时间：2012-09-09T00:24:57.180
> 
> 标签：javascript, jquery

我有一个严重依赖 CSS3 动画的页面。我正在创建一个脚本，该脚本将成为那些没有 CSS3 动画的浏览器的后备方案（看看你的 IE ......）。我创建了以下脚本，它将完成我需要的基本操作：

```
var $j = jQuery.noConflict();
$j(document).ready(function() {
    //Hide All Elements to Fade Them In
    $j(".frame-1, .frame-2, .frame-3, .frame-4, #tile-wrap, #copyright").addClass("hide", function() {
        //Change Color of "Frames"
        $j(".frame-1, .frame-2, .frame-3, .frame-4").addClass("color", function() {
            //Frame 1
            $j(".frame-1").fadeIn("slow", function() {
                $j('.frame-1').delay(3000).fadeOut('slow', function() {
                    //Frame 2
                    $j(".frame-2").fadeIn("slow", function() {
                        $j('.frame-2').delay(3000).fadeOut('slow', function() {
                            //Frame 3       
                            $j(".frame-3").fadeIn("slow", function() {
                                $j('.frame-3').delay(3000).fadeOut('slow', function() {
                                    //Frame 4 
                                    $j(".frame-4").fadeIn("slow", function() {
                                        $j('.frame-4').delay(3000).fadeOut('slow', function() {
                                            //Tile
                                            $j('#tile-wrap').fadeIn('slow');
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
});​ 
```

脚本的第一部分没有问题（添加类`.hide`）。但在那之后什么也没有发生或起作用。我被卡住了，因为没有看到任何错误，并且我认为我的脚本中有错误。

这是脚本与其余代码的[小提琴。](http://jsfiddle.net/Lynda333/VNfT2/1/)

注：本人对 JS 的编写不是很了解，欢迎任何改进脚本的方法，请提供示例。

***FIDDLE NOTE*** Firebug 在运行 fiddle 时显示了几个错误。这些错误仅在 Fiddle 页面上，我相信与 jsFiddle 相关，而不是我的代码或页面。

***我试图实现的目标***

我想要的是对每个项目（按类或 id 列出）将它们淡入，然后在延迟后淡出，然后淡入最后一个 div 并保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:36:37.417

这将起作用，[http://jsfiddle.net/VNfT2/2/](http://jsfiddle.net/VNfT2/2/)。addclass 没有回调。话说回来。啊啊啊！！！！！！这不是正确的做法。提示：当你看到超过 10 个 }); 连续，停下来，深呼吸。:)

编辑：有数百个插件可以做到这一点（google for jquery slideshow）。但是，如果你想手动做......看看这个：小提琴：http: [//jsfiddle.net/VNfT2/5/](http://jsfiddle.net/VNfT2/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:40:56.900

见[http://jsfiddle.net/VNfT2/4/](http://jsfiddle.net/VNfT2/4/)

```
 var $j = jQuery.noConflict();

 $j(document).ready(function() {
//Hide All Elements
    $j(".frame-1, .frame-2, .frame-3, .frame-4, #tile-wrap, #copyright")
        .addClass("hide")
//Change Color of "Frames"
        .addClass("color");
//Frame 1
    $j(".frame-1").fadeIn("slow", function() {
     $j(this).delay(3000).fadeOut('slow', function() {
//Frame 2
      $j(".frame-2").fadeIn("slow", function() {
       $j(this).delay(3000).fadeOut('slow', function() {
//Frame 3        
        $j(".frame-3").fadeIn("slow", function() {
         $j(this).delay(3000).fadeOut('slow', function() {
//Frame 4
          $j(".frame-4").fadeIn("slow", function() {
           $j(this).delay(3000).fadeOut('slow', function() {
//Tile
            $j(this).fadeIn('slow');
           });
          });   
         });
        });
       });
      });
     });
    });
}); 
```

正如我在评论中所说的，您可以`addClass`使用字符串（类）或返回类的函数调用。但是你不能用一个字符串和一个函数来做......见[api.jquery.com/addClass](http://api.jquery.com/addClass)

在你应该使用的回调函数中`$(this)`，它更快，因为这样你就不会再次搜索元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T00:57:28.233

没有调用您的回调的问题，因为它们是作为第二个参数提供的。

[`addClass( className )`](http://api.jquery.com/addClass/)

描述：将指定的类添加到每个匹配的元素集中。

```
.addClass( className )
.addClass( function(index, currentClass) ) 
```

以下是一些提示：

# 1)

尝试在另一个函数中仅包含 1 个嵌套/回调函数。

请参阅技巧 4，然后以函数`fadeElementsInThenOut`为例。

# 2)

不要重复查找。

旧代码：

```
// Let's forget about the callbacks for now
$j(".frame-1, .frame-2, .frame-3, .frame-4, #tile-wrap, #copyright").addClass("hide");
$j(".frame-1, .frame-2, .frame-3, .frame-4").addClass("color"); 
```

新代码：

```
$j(".frame-1, .frame-2, .frame-3, .frame-4").addClass("color hide");
$j("#tile-wrap, #copyright").addClass("color"); 
```

# 3)

用于`$(this)`在回调中引用相同的元素。

旧代码：

```
$j(".frame-4").fadeIn("slow", function () {
    $j('.frame-4').delay(3000).fadeOut('slow', function () {
        //...
    });
}); 
```

新代码：

```
$j(".frame-4").fadeIn("slow", function () {
    $j(this).delay(3000).fadeOut('slow', function () {
        //...
    });
}); 
```

# 4)

如果不需要，请不要使用回调。

旧代码：

```
$j(".frame-4").fadeIn("slow", function () {
    $j(this).delay(3000).fadeOut('slow', function () {
        //...
    });
}); 
```

新代码：

```
$j(".frame-4").fadeIn("slow").delay(3000).fadeOut('slow', function () {
    //...
}); 
```

这是您重写的代码以解决问题。

```
var $j = jQuery.noConflict();
$j(function () {
    var frames = [ ".frame-4", ".frame-3", ".frame-2", ".frame-1" ];
    var fadeElementsInThenOut = function( els, lastCallback ){
        var el = els.pop();
        if( el ){
            $j(el).fadeIn("slow").delay(3000).fadeOut('slow', function(){
                fadeElementsInThenOut( els, lastCallback );
            });
        }else{
            lastCallback();
        }
    };

    $j( frames.join( ", " ) ).addClass("color hide");
    $j("#tile-wrap, #copyright").addClass("color");
    fadeElementsInThenOut( frames, function(){
        $j('#tile-wrap').fadeIn('slow');
    });
}); 
```

# c# - iOS 5.0 Monotouch 的 NSUrl.ToString() 方法，可能的错误

> ID：12335566
> 
> 赞同：0
> 
> 时间：2012-09-09T00:24:58.380
> 
> 标签：c#, ios, ios5, xamarin.ios

我在 iOS 5.0 中遇到了我认为是一个有趣的错误（此代码在 5.1 中完美运行）。在使用大量 Console.Write() 缩小范围之后，我将崩溃范围缩小到：

```
nsUrl.ToString(); 
```

这在 MonoTouch 库或 iOS 中。

还有人遇到这个吗？这很烦人，因为我们显然希望尽可能支持最低的 iOS 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:53:29.930

在 MonoTouch 中`ToString`，子类的默认实现`NSObject`是调用`description`选择器。

在某些情况下（是的，它因 iOS 版本而异）调用`description`可能会失败（甚至使进程崩溃）。这通常发生在本机对象处于不良状态时（例如，错误初始化、无效值......）。

MonoTouch 尝试通过使用不同的实现（例如，使用额外的检查或回退到返回类型名称的默认值）来处理这种情况（如果可能并且*已知）。*`ToString``ToString`

注意：如果您发现此类行为，请在[错误报告](http://bugzilla.xamarin.com)中报告它们，我们将看看是否可以以不同的方式处理它们。

# jquery - Jquery单击功能相同的脚本

> ID：12335569
> 
> 赞同：0
> 
> 时间：2012-09-09T00:27:09.707
> 
> 标签：jquery, ajax, click

有没有办法为同一页面上的不同元素执行不同的功能？

```
$('.class1').click(function() {
   $.ajax({  url:'pages/page1.php?id1='+this.id, 
         success:function(data){
            $("#Loading").fadeOut('fast'); //hide when data's ready
            $("#homeContent").html(data);
         } });
});

$('.class2').click(function() {
   $.ajax({  url:'pages/page2.php?id2='+this.id, 
         success:function(data){
            $("#Loading").fadeOut('fast'); //hide when data's ready
            $("#homeContent").html(data);
         } });
}); 
```

我使用的是萤火虫，当我进行不同的点击时，它会堆叠获取请求，如下所示：

```
GET http://127.0.0.1/pages/jemissoes.php?id=1 (1st click)
GET http://127.0.0.1/pages/jemissoes.php?id=2 (2nd click)
GET http://127.0.0.1/pages/jemissoes.php?id=2
GET http://127.0.0.1/pages/jemissoes.php?id=3 (3rd click)
GET http://127.0.0.1/pages/jemissoes.php?id=3
GET http://127.0.0.1/pages/jemissoes.php?id=3 
```

谢谢

# ios - 创建自定义的、类似 iOS 6 的 App Store TabBar（包括图片）

> ID：12335573
> 
> 赞同：3
> 
> 时间：2012-09-09T00:28:49.610
> 
> 标签：ios, ipad

我正在开发一个最初由另一个程序员开发的应用程序。我的工作是让界面更吸引人。我发现的一种真正有效的方法是自定义标签栏。我已经非常喜欢 iOS 6 的 iPad 版 App Store。我想知道重新创建它的最佳方法是什么（对于 iPad）？任何帮助将不胜感激！

![在此处输入图像描述](../Images/469d226e8dbff2184904547656c273e8.png)

该应用程序严重依赖 UITabBar，所以我尽量不改变这个模型。我检查了 TBTabBar，但目前它只支持 iPhone。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T00:40:45.277

我在[这里](http://kurrytran.blogspot.ro/2011/10/ios-5-tutorial-creating-custom-tab-bar.html)和[这里](http://felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/)找到了一些定制。我不知道它是否也适用于 iPad，但我希望它有助于找到方向。

# ruby-on-rails - 为什么这个 before_filter 不执行？

> ID：12335575
> 
> 赞同：0
> 
> 时间：2012-09-09T00:29:17.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, before-filter

所以在我的`ClientsController.rb`我有一个之前的过滤器，它执行以下操作：

检查当前年份和月份。如果月份在六月之后，则将变量设置`vote_year`为明年。如果不是，则将其设置`vote_year`为今年。

然后我根据那一年设置日期属性，以及 7 月 1 日的艰难月份和日期。

基本上，这个特定的日期是每年的 7 月 1 日。我希望这个前置过滤器根据运行此过滤器的时间是在 7 月 1 日之前还是之后来设置下一个日期。

我的代码如下：

```
before_filter :set_next_vote_date, :only => [:create, :new, :edit, :update]

private

def set_next_vote_date
    client = current_user.clients.find(params[:id])
    today = DateTime.parse(Time.now.to_s)
    year = today.year

    if today.month == 7 && today.day == 1
        vote_year = today.year
    elsif today.month > 6
        vote_year = year + 1
    else
        vote_year = year
    end

    client.next_vote = "#{vote_year}-07-01"         
end 
```

问题是，每当我在这些控制器上执行任何这些操作时，都不会引发错误。但是，`next_vote`客户记录上的属性没有被更新。

我错过了什么？

**编辑1：**

使用`update_attribute`（不带`!`）后，我没有收到错误消息，但我没有在日志中看到此特定属性正在更新。

```
Started PUT "/clients/1" for 127.0.0.1 at 2012-09-08 20:09:17 -0500
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J172LuZQc5N=", "client"=>{"name"=>"John F Kennedy", "email"=>"jfk@email.com", "phone"=>"8234698765", "firm_id"=>"1", "topic_ids"=>"2"}, "commit"=>"Update Client", "id"=>"1"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Client Load (0.1ms)  SELECT "clients".* FROM "clients" WHERE "clients"."user_id" = 1 AND "clients"."id" = ? LIMIT 1  [["id", "1"]]
   (0.1ms)  begin transaction
   (0.0ms)  commit transaction
  CACHE (0.0ms)  SELECT "clients".* FROM "clients" WHERE "clients"."user_id" = 1 AND "clients"."id" = ? LIMIT 1  [["id", "1"]]
   (0.1ms)  begin transaction
  Topic Load (0.6ms)  SELECT "topics".* FROM "topics" WHERE "topics"."id" = ? LIMIT 1  [["id", 2]]
  Topic Load (0.2ms)  SELECT "topics".* FROM "topics" INNER JOIN "clients_topics" ON "topics"."id" = "clients_topics"."topic_id" WHERE "clients_topics"."client_id" = 1
   (0.4ms)  UPDATE "clients" SET "phone" = 823498765, "updated_at" = '2012-09-09 01:09:17.631839' WHERE "clients"."id" = 1
   (1.4ms)  commit transaction
Redirected to http://localhost:3000/clients/1 
```

请注意，该`next_vote`属性未更新。当然，我没有在`edit`部分表单中包含该属性，但我假设这`before_filter`- 如果它正在执行，将更新记录。但我什至不确定它是否正在执行。

**编辑2：**

没关系，它现在似乎正在工作。上面的日志粘贴是在编辑操作之后，而 before_filter 在编辑操作之前执行 - DUH！傻我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:46:57.763

更改属性后，您似乎没有保存客户端。

关于如何稍微清理该代码的一些进一步建议：

```
before_filter :set_next_vote_date, :only => [:create, :new, :edit, :update]

private

def set_next_vote_date
  client    = current_user.clients.find(params[:id])
  today     = Date.today
  vote_year = today.month > 6 ? today.year + 1 : today.year

  client.update_attribute(:next_vote, Date.new(vote_year, 7, 1))
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:48:01.183

尝试：

```
def set_next_vote_date
  client = Client.find(params[:id])
  today = Time.now
  year = today.year

  if today.month == 7 && today.day == 1
    vote_year = year
  elsif today.month > 6
    vote_year = year + 1
  else
    vote_year = year
  end

  client.update_attribute!(:next_vote, "#{vote_year}-07-01")
end 
```

更新属性！（注意爆炸声）如果出现问题，将导致引发异常.. 至少允许您使用 pry-rescue 进行救援并查看发生了什么。不需要调用 save ，因为它将在稍后的 activerecord 回调周期中持续存在。

# android - 什么是android.widget.FrameLayout

> ID：12335578
> 
> 赞同：1
> 
> 时间：2012-09-09T00:29:58.813
> 
> 标签：android, layout, android-framelayout

我有一个简单的应用程序，布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <WebView
        android:id="@+id/webview"
        android:layout_width="200dp"
        android:layout_height="200dp" />
</RelativeLayout> 
```

当我使用以下代码时：

```
WebView webview = (WebView)findViewById(R.id.webview);
webview.getRootView().findViewById(android.R.id.content); 
```

webview.getRootView().findViewById(android.R.id.content); **返回 android.widget.FrameLayout**。它是什么？我从未在我的应用程序中定义 FrameLayout。这是 Android 默认提供的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:58:20.553

我认为这个问题（虽然已关闭）回答了它。

[findViewById(R.id.content) 和 getRootView() 之间的区别](https://stackoverflow.com/questions/10668330/difference-between-findviewbyidr-id-content-and-getrootview)

查看层次结构查看器工具。如果它对调试您的布局很有帮助。它将向您显示 Activity 中所有视图的整个树。我相信几乎每个 Activity 的根源都是 FrameLayout。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T00:41:52.670

[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)由[WebView](http://developer.android.com/reference/android/webkit/WebView.html)内部使用。

# c++ - 是否有标准函数可以将 cstring（可能是文字）复制到 std::array 中？

> ID：12335580
> 
> 赞同：0
> 
> 时间：2012-09-09T00:30:16.990
> 
> 标签：c++, c++11, iterator, std

有没有办法将 cstring 文字（或变量）直接写入现有的 std::array 中？

即，我想做这样的事情：

```
std::array<unsigned char, 100> test;
// std::copy("testing", test);
// test="testing"; 
```

我希望行为是“复制直到复制空终止符或目标缓冲区已满”。

我试图避免执行 strlcpy(test.data()... 因为我正在寻找一种可以应对缓冲区溢出的方法，而不必明确将缓冲区长度作为参数包含在内。

谢谢。

* * *

编辑：

这是迄今为止我从建议中找到的最佳解决方案。这仅适用于文字。MSVC 没有统一初始化，所以它需要在 then { 之前添加 =。它还需要缓冲区大小，但如果缓冲区大小不匹配或存在溢出，则编译失败：

```
#include <array>
#include <algorithm>
#include <iostream>

int main() {
   std::array<char, 100> arr1={"testing"};
   std::array<char, 100> arr2;
   arr2=arr1;
   std::cout << arr2.data();
} 
```

这通常适用于字符串，但要小心，因为嵌入的空值不会被复制，并且要包含空值，您必须通过数组构造，即字符串 mystring("junk\0", 5)。

```
#include <string>
#include <array>
#include <algorithm>
#include <iostream>

int main()
{
  const std::string str("testing");
  std::array<char, 100> arr;
  std::copy(str.begin(), str.end(), arr.begin());
  // Note that the null terminator does not get copied.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:34:48.403

这应该这样做：

```
std::array<unsigned char, 100> test = { "testing" }; 
```

如果您使用过大的字符串文字，则`std::array`构造将在编译时失败。不过，这不适用于非文字。

对于非文字，您需要自己检查空终止符。你可以做类似的事情`std::copy(my_non_literal, my_non_literal + length_literal, test.begin());`，但我认为你已经遇到过那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:01:10.627

这样的事情怎么样？

```
#include <string>
#include <array>
#include <algorithm>

int main(int argc, char *argv[])
{
  std::string str("testing");
  std::array<char, 100> arr;
  std::copy(str.begin(), std.end(), arr.begin());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:34:19.457

C 字符串和 C++ 数据结构之间的直接操作不是标准库通常处理的问题。`c_str()`和`std::string`构造函数差不多。您将不得不手动编写一个循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T00:47:03.893

```
#include <iostream>
#include <array>
#include <cstring>

int main(){

    std::array<char,100> buffer;
    char * text = "Sample text.";
    std::memcpy (buffer.data(),text,100);
    std::cout << buffer.data() << std::endl;

return 0;
} 
```

# javascript - 在 Handlebars Helper 中使用函数

> ID：12335587
> 
> 赞同：0
> 
> 时间：2012-09-09T00:32:18.190
> 
> 标签：javascript, jquery, coffeescript, bing-maps, handlebars.js

我正在使用车把模板并已成功注册了一个助手。但是，我想做一个 $.getJSON 并在模板中显示该 ajax 请求的一些结果。

这是我的 javascript 代码（用咖啡编写）

```
 Handlebars.registerHelper('getNearestAddressFromPoint',(lat,lon) ->
    console.log("in register helper")
    bingURL = 'http://dev.virtualearth.net/REST/v1/Locations/' + lat + ','+ lon + '?&key=' + bingMapsKey + '&jsonp=?'
    $.getJSON(bingURL,@pointSuccess))

  pointSuccess:(data)=>
    tooltipAddr = $(@el).find("#tooltipAddr")
    address = data.resourceSets[0].resources.name
    $(tooltipAddr).text(address)
    console.log("hello") 
```

这个 jquery.text 没有运行，console.log 也没有运行，但是正在记录“in register helper”。

这可能是因为帮助程序将 $.getJSON 作为函数返回，因为在我的模板中 [object Object] 正在显示并且它正在将函数显示为对象。我想要它以便返回回调的结果，或者正在调用回调

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:14:44.920

线索在 url: 的末尾`'&jsonp=?'`。这表示使用 JSONP，这是一种使用 JSON 跨域的方式。因此，`$.getJSON`您将不得不使用类似的东西：

```
$.ajax({
    url: bingURL,
    dataType: 'jsonp',
    jsonp: "jsonp",
    success: @pointSuccess
}); 
```

删除`'&jsonp=?'`你的 url 并让 jQuery 处理它。

# dojo - dojo 数据存储和自定义模板

> ID：12335588
> 
> 赞同：-1
> 
> 时间：2012-09-09T00:32:24.477
> 
> 标签：dojo

嘿伙计们，我还有一个关于道场的问题。

这次它与数据存储（内存）和自定义模板有关。

所以我有一个从 Json Data 构建的 dataStore，我想知道如何创建自定义模板而不是网格来显示该数据。

假设我有以下 JSON 数据：

```
var employees = [
        { id: 1, name: "Jim", department: "accounting" },
        { id: 5, name: "Bill", department: "engineering" },
        { id: 3, name: "Mike", department: "sales" },
        { id: 4, name: "John", department: "saleas" } 
```

我像这样创建我的数据存储：

```
employeeStore = new Memory({ data: employees });
employeeStore = new Memory({ data: employeeStore.query({}, { sort: [{ attribute: "id"}] }) }); 
```

现在我想做的是在这个模板 HTML 中显示该数据：

```
<div data-dojo-attach-point="someNode">
<div data-dojo-attach-point="checkbox" data-dojo-type="dijit/form/CheckBox"></div>
<div data-dojo-attach-point="id"></div>
<div data-dojo-attach-point="name"></div>
<div data-dojo-attach-point="department"></div> 
```

我想用下面的方式显示数据（风格现在不重要了）

我无法添加图像，所以这是我正在寻找的结果 HTML。

```
 <div>
<div>1</div>
<div>Jim</div>
<div>accounting</div>
</div>
<div style="clear:both;"></div>
<div>
<div>3</div>
<div>Mike</div>
<div>sales</div>
</div>
<div style="clear:both;"></div>
<div>
<div>4</div>
<div>John</div>
<div>sales</div>
</div>
<div style="clear:both;"></div>
<div>
<div>5</div>
<div>Bill</div>
<div>engineering</div>
</div>
<div style="clear:both;"></div> 
```

在此先感谢您的帮助！梭伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:41:45.417

听起来你想创建一个模板小部件。虽然由于我没有使用过 dojo 工具包的这一部分，所以我没有任何建议，但这听起来像是您需要的：

[https://dojotoolkit.org/documentation/tutorials/1.8/templated/](https://dojotoolkit.org/documentation/tutorials/1.8/templated/)

# python - 在python中计算三次根

> ID：12335589
> 
> 赞同：8
> 
> 时间：2012-09-09T00:32:29.847
> 
> 标签：python

我正在尝试在 python 中评估以下函数：

```
f(x) = (1 + cos(x))^(1/3)

def eval( i ):
   return math.pow( (1 + math.cos( i )), 1/3) 
```

为什么它总是返回我`1`？我正在尝试计算积分的`Right`和`Left`近似值，后者 apply `Simpson's Rule`，但`Python`似乎不喜欢那个表达式。帮助？ ***完整代码***

```
import math

min = 0
max = math.pi / 2
n = 4
delta  = ( min + max ) / n

def eval( i ):
   return math.pow( (1 + math.cos( i )), 1/3)

def right( ):
   R = 0
   for i in range(1, n+1):
        R += eval( i )

   return R

def left():
   L = 0
   for i in range(0, n):
        print eval( i )
        L += eval( i ) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-09T00:34:31.433

使用浮点数学（1 / 3 截断为零）。此外，不需要 math.pow （** 求幂）...

```
(1 + math.cos(i)) ** (1 / 3.0) 
```

此外，`min`和`max`是`eval`内置函数 - 您正在遮蔽它们。

此外，您在函数调用参数中添加的额外空格违反[PEP-8](http://www.python.org/dev/peps/pep-0008/)（Python 样式指南）。特别是这一段：

[http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements](http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-09T00:33:47.520

利用

```
1/3.0 
```

代替

```
1/3 
```

在你的代码中。否则，您的指数将始终`0`归因于整数截断。

是否使用`**`或`math.pow()`取决于您的喜好，大多数人可能只会使用`**`.

定义一个名为的函数可能*不是*一个好主意，`eval`因为[**eval()**](http://docs.python.org/library/functions.html#eval)已经被 Python 用作内置函数。

*背景：*

请注意，您也可以做 `1.0 / 3` or `1.0 / 3.0`.. 只要除法中的操作数之一是 a*结果*`float`将是 a `float`。

但是，这 `float(1/3)`不起作用*，*因为它将`0`整数除法的结果`1/3`转换为`float`给你`0.0`

在**Python 3.x**下，除法运算符`/`会按照您的预期工作（即，`float`即使有两个整数操作数，它也会给您一个值）。要获得整数除法，您必须使用`//`.

所以如果你在 Python 3.x 下运行它，你就不会遇到这个特殊的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-26T08:17:48.123

### Python 3.11 中的新功能

该`math`模块现在包含一个内置的[**`cbrt`**](https://docs.python.org/3.11/library/math.html#math.cbrt)立方根，因此您的函数可以实现为：

```
def f(x):
    return math.cbrt(1 + math.cos(x)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T00:35:09.253

1/3 是整数除法，计算结果为 0。试试 1./3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T00:36:01.023

我认为这是因为您正在执行整数运算，而您确实打算执行浮点运算。尝试将 [second] *1*更改为 *1.0*：

```
def eval( i ):
    return math.pow( (1 + math.cos( i )), 1.0/3) 
```

# jquery - jQuery 问题。点击 - 打开代码

> ID：12335591
> 
> 赞同：0
> 
> 时间：2012-09-09T00:32:50.827
> 
> 标签：jquery, function, click

我有这个 JQuery 代码

```
jQuery(\'.tpcoupon-reveal\').click( function() {
jQuery(\'.inner-code\').css(\'background-color\',\'#FFF\');
jQuery(\'.inner-code\').text(jQuery(this).attr(\'caption\'));
visitstore = jQuery(this).attr(\'url\');
window.open(visitstore);
    });

$newText = '

            <div class="tpcoupon-code-wrapper">
                <span class="tpcoupon-msg"> '.tpbox2_unhtmlentities($content).'</span>
                <span class="tpcoupon-reveal" caption="'.$couponcode.'" url="'.$url.'">Vis koden & besøg siden</span>
                <span class="tpcoupon-code-show">
                    <span class="inner-code"></span>
                </span>
            </div>
            <div class="clr"></div>
'; 
```

由于此代码，当我单击 ID 为 tpcoupon-reveal 的 span 对象时，它会显示 ID 为 inner-code 的 span 对象中的代码问题是我在一页中有很多块。但是当我单击一个跨度时，它会使用 id=inner-code 打开所有跨度中的所有代码 如何让 JQuery 只打开这个块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:35:13.443

尝试通过在点击处理程序中执行以下操作来为 '.inner-code' 确定 jQuery 选择器的范围：

```
$(this).parent().find('.inner-code') 
```

# markdown - Markdown 是否有将数字、列表等数字附加到内容块的机制？

> ID：12335600
> 
> 赞同：0
> 
> 时间：2012-09-09T00:34:50.743
> 
> 标签：markdown, jekyll, octopress

例如，如果我想在一篇文章中将一段代码称为“清单 1”，有没有办法在该代码块的末尾呈现“清单 1”？

例如：

```
public class Foo {
}

                                   Listing 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:40:53.257

您可以将`backtick_codeblock`清单放在顶部。
这是语法。

```
``` [language] [title] [url] [link text]
code snippet
``` 
```

有关更多详细信息，请参阅此[链接](http://octopress.org/docs/plugins/backtick-codeblock/)。

# c# - Nested Subscriptions in Reactive Extentions

> ID：12335606
> 
> 赞同：0
> 
> 时间：2012-09-09T00:36:14.097
> 
> 标签：c#, system.reactive

I have a problem getting my observers working properly when on specific threads.

```
Subject<bool> subjEvent = new Subject<bool>();
Subject<int> subjValue = new Subject<int>();

IScheduler sched = new EventLoopScheduler(ts => new Thread(ts));

subjEvent.ObserveOn(sched).Subscribe(
    r =>
        {
            if(r)
            {
                Console.WriteLine("Connected On: \t{0}", Thread.CurrentThread.ManagedThreadId);

                subjValue.ObserveOn(sched).Subscribe(
                    x => Console.WriteLine("Recieved On: \t{0}", Thread.CurrentThread.ManagedThreadId));
            }else{
                Console.WriteLine("Disconnect On: \t{0}", Thread.CurrentThread.ManagedThreadId);
            }
        }
    );

subjEvent.OnNext(true);
for(int i=0; i< 10; i++)
{
    subjValue.OnNext(i);
}
subjEvent.OnNext(false);
subjValue.OnCompleted();
subjEvent.OnCompleted(); 
```

The idea is to subscribe to something when it becomes available and unsubscribe/resubscribe with events thereafter. Now as I require to observe on a specific (read same) thread, as well as ensure correct ordering, I have an EventLoopScheduler.

The problem is I get nothing from the value subscription.

Now, if I add a Thread.Sleep(10) to the generation loop (after OnNext) it works perfectly fine. So I'm kinda perplexed as to what I'm doing wrong and would be very grateful for help/advise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:23:57.693

Although this doesn't help answer your question directly - I think Asti has done a fine job of doing that - I thought I'd post this code to help you write your queries.

You should try very hard not to subscribe to your observables until you absolutely have to. And when you do the code in your `OnNext` handler needs to be as small as possible.

Try this version of your queries:

```
var query =
    from b in subjEvent.Do(x =>
        Console.WriteLine("{0}onnected On: \t{1}",
            x ? "C" : "Disc",
            Thread.CurrentThread.ManagedThreadId))
    select b ? subjValue : Observable.Empty<int>();

query.Switch().Subscribe(x =>
    Console.WriteLine("Recieved On: \t{0}",
        Thread.CurrentThread.ManagedThreadId)); 
```

Barring the issue with the event loop scheduler this code does the same as yours, but it only has one subscribe and it does a minimal amout of work in that subscription. I hope this helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:18:23.190

This is although non-deterministic, expected behaviour. The problem is that the second subscription is being set up in the `EventLoopScheduler`. It takes some time to set up the subscription to be observed by the scheduler. But notifications for it are already underway in the main thread. By the time the subscription is set up, the loop will have finished executing.

To see this happening, remove the `ObserveOn` from your event subject. This will force the subscription to be set up before moving on notifying the second subject with values. You can also allow some time to elapse after the `OnNext(true)` to allow it to wire up the subscription.

# ruby - Ruby 删除目录

> ID：12335611
> 
> 赞同：63
> 
> 时间：2012-09-09T00:36:54.750
> 
> 标签：ruby, directory

我正在尝试删除 Ruby 中的一个非空目录，无论我采用哪种方式，它都无法正常工作。我曾尝试使用 FileUtils、系统调用、递归进入给定目录并删除所有内容，但似乎总是以（临时？）文件结束，例如

> .__afsECFC
> .__afs73B9

任何人都知道为什么会发生这种情况以及我该如何解决？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-09-09T01:01:16.580

```
require 'fileutils'

FileUtils.rm_rf('directorypath/name') 
```

这不行吗？

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-07-29T04:32:17.303

安全方法：[`FileUtils.remove_dir(somedir)`](https://ruby-doc.org/stdlib-2.5.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-remove_dir)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-09T03:27:28.660

意识到我的错误，一些文件没有被关闭。我在我之前使用的程序中

```
File.open(filename).read 
```

我换了一个

```
f = File.open(filename, "r")
while line = f.gets
    puts line
end
f.close 
```

现在

```
FileUtils.rm_rf(dirname) 
```

完美无瑕

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-31T16:49:44.600

我猜想“不使用附加库”删除包含所有内容的目录的最佳方法是使用简单的递归方法：

```
def remove_dir(path)
  if File.directory?(path)
    Dir.foreach(path) do |file|
      if ((file.to_s != ".") and (file.to_s != ".."))
        remove_dir("#{path}/#{file}")
      end
    end
    Dir.delete(path)
  else
    File.delete(path)
  end
end
remove_dir(path) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-02T22:42:05.173

内置`pathname`gem*确实*改善了使用路径的人体工程学，并且它有一种[`#rmtree`](https://ruby-doc.org/stdlib/libdoc/pathname/rdoc/Pathname.html#method-i-rmtree)方法可以实现这一点：

```
require "pathname"

path = Pathname.new("~/path/to/folder").expand_path
path.rmtree 
```

# c# - 项目文件的文件路径？

> ID：12335618
> 
> 赞同：58
> 
> 时间：2012-09-09T00:39:26.933
> 
> 标签：c#, .net, path

我正在使用 C# 开发媒体播放器，但是当我想进行测试时，我遇到了问题。

我必须使用以下路径创建一个新的对象歌曲：

```
@"C:\Users\Jesus Antonio\Desktop\JukeboxV2.0\JukeboxV2.0\Datos\ich will.mp3" 
```

它可以工作，但是当我更换计算机时，我必须重写整个路径，我的项目称为 JukeboxV2.0

在java中我记得你可以只写路径例如

```
@"JukeboxV2.0\JukeboxV2.0\Datos\ich will.mp3" 
```

这将节省大量时间，因为我可以将我的项目带到不同的计算机上并且它可以工作，但是在这里我不知道该怎么做，有人知道吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-09T08:52:36.760

您将执行类似的操作来获取应用程序环境文件夹中的路径“Data\ich_will.mp3”。

```
string fileName = "ich_will.mp3";
string path = Path.Combine(Environment.CurrentDirectory, @"Data\", fileName); 
```

就我而言，它将返回以下内容：

```
C:\MyProjects\Music\MusicApp\bin\Debug\Data\ich_will.mp3 
```

我在我的例子中使用`Path.Combine`和。`Environment.CurrentDirectory`这些非常有用，允许您根据应用程序的当前位置构建路径。`Path.Combine`组合两个或多个字符串来创建一个位置，并`Environment.CurrentDirectory`为您提供应用程序的工作目录。

工作目录不一定与您所在的路径相同`executable`，但在大多数情况下应该是相同的路径，除非另有说明。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-09-09T01:33:16.487

```
Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"JukeboxV2.0\JukeboxV2.0\Datos\ich will.mp3") 
```

基本目录 + 你的文件名

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-06-15T15:42:57.997

我遇到了类似的问题，我的项目中有一个文件，并且想测试一个必须处理从 FS 加载文件并以某种方式处理它们的类。我所做的是：

*   将文件添加`test.txt`到我的测试项目
*   在解决方案资源管理器中命中`alt-enter`（文件属性）
*   在那里我设置`BuildAction`到`Content`和`Copy to Output Directory`到`Copy if newer`，我想`Copy always`也会这样做

然后在我的测试中，我不得不这样做`Path.Combine(Environment.CurrentDirectory, "test.txt")`，就是这样。每当编译项目时，它都会将文件（以及它的所有父路径，如果它位于文件夹中）复制到`bin\Debug`（或您正在使用的任何配置）文件夹中。

希望这可以帮助某人

# ruby-on-rails - 为什么当我还没有包含它时，ruby 会响应我已经混合在一个模块中？

> ID：12335619
> 
> 赞同：4
> 
> 时间：2012-09-09T00:39:37.400
> 
> 标签：ruby-on-rails, ruby

我有一个类 Ryte::Theme。如果我在课堂上调用included_modules，我会回来（缩写）：

> [Ryte::Bundleable::Core、Ryte::Bundleable::Validators、Ryte::Bundleable::Builder、ActiveModel::Validations::HelperMethods、ActiveModel::Validations、ActiveSupport::Callbacks、Ryte::Bundleable]

Ryte::Theme 通过单个模块 Ryte::Bundleable 引入嵌套模块。以下是相关的类和模块定义：

```
class Ryte::Theme
  include Ryte::Bundleable
end

module Ryte::Bundleable
  extend ActiveSupport::Concern

  included do
    include ActiveModel::Validations
    include Ryte::Bundleable::Builder
    include Ryte::Bundleable::Validators
    include Ryte::Bundleable::Core
  end
end 
```

鉴于此，为什么我会收到以下回复：

```
Ryte::Theme.include?(Ryte::Theme::Validators)
=> true 
```

我还没有包含这个附加模块。这在 included_modules 响应中很明显。这与 ActiveSupport 关注有关吗？我希望能够包含 Ryte::Theme::Validators 并将其混入，但由于它认为它已经被包含，它不会“再次”包含它（如果这是真的，它不应该包含它）。因此，当我将包含添加到类定义中时，它会被遗忘，如下所示：

```
class Ryte::Theme
  include Ryte::Bundleable
  include Ryte::Theme::Validators # <- Does not load
end 
```

为什么这个额外的模块 Ryte::Theme::Validators 也没有混合在一起？

# 添加

好的，刚刚意识到：

```
1.9.3p194 :005 > Ryte::Bundleable::Validators == Ryte::Theme::Validators
 => true 
```

奇怪..这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T06:30:55.443

**更新**：这*与*ActiveSupport::Concern 有关（见下文）。

尝试以下操作：

```
# initialize constants
class A; end                               # class Ryte
module A::B; end                           # module Ryte::Bundleable
module A::B::C; end                        # module Ryte::Bundleable::Validators

module A::B                                # module Ryte::Bundleable
  def self.include(base)
    base.class_eval do
      include A::B::C                      # include Ryte::Bundleable::Validators
    end
  end
end

class D                                    # class Ryte::Theme
  include A::B                             # include Ryte::Bundleable
end

A::B::C == D::C                            #=> true 
```

发生这种情况是因为模块和类的命名空间方式：当您`A::B::C`从内部包含时`A::B`，模块名称是相对于模块本身引用的，它变成了 just `C`（在您的情况下， just `Validators`）。因此，当您`A::B`在其他类`D`中包含而不是包含名为`A::B::C`(ie `Ryte::Bundleable::Validators`) 的模块时，ruby 包含一个名为`C`(ie `Validators`) 的模块。这就是为什么`Ryte::Bundleable::Validators == Ryte::Theme::Validators`评估为真。

但是，对于上面的示例：

```
D.include?(A::B::C)                       #=> false 
```

所以这就是`ActiveSupport::Concern`开始的地方。重新定义上面的模块`A::B`，如下所示：

```
module A::B                                # module Ryte::Bundleable
  extend ActiveSupport::Concern

  included do
    include A::B::C                      # include Ryte::Bundleable::Validators
  end
end 
```

你会发现`D.include?(A::B::C)`现在评估为真。老实说，我不确定为什么会发生这种情况，但它一定与上面的命名空间有关。

# c++ - WM_PASTE 挂钩不起作用

> ID：12335622
> 
> 赞同：0
> 
> 时间：2012-09-09T00:40:37.337
> 
> 标签：c++, winapi, hook

我想检测每次我粘贴的东西。这只是使某些数据输入工作更简单的东西。我设置了一个全局钩子，然后“等待”wm_paste。这是我拥有的代码的一部分：

```
LRESULT CALLBACK GetMsgProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if(nCode < 0)//Do not process the message
        return CallNextHookEx(msg_hook,nCode,wParam,lParam);

    LPMSG m=(LPMSG)lParam;

    if(m->message == WM_PASTE)
    {
        OutputString("Paste detected!\n");
    }
    if(m->message == WM_PASTE)
    {
        OutputString("Paste detected!\n");
    }

    return CallNextHookEx(msg_hook,nCode,wParam,lParam);
    }

//DLL_ATTACH:
...
if(strstr(ProcName, LOADERNAME))
        {
            InitCommonControls();

            if(!(msg_hook=SetWindowsHookEx(WH_GETMESSAGE, GetMsgProc, hinstDLL, 0)))
            {
                ErrorExit(TEXT("SetWindowsHookEx"));
                //MessageBox(0, "WH_GETMESSAGE", 0, 0);
                //return -1;
            }
        } 
```

WM_PASTE 调试字符串永远不会被打印。我知道并非所有应用程序都使用 WM_PASTE。但至少记事本应该可以工作。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:02:23.330

在[GetMsgProc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644981%28v=vs.85%29.aspx)中，`wParam`参数不是被拦截的消息，而是一个标志，指示消息是否在消息队列中`lParam`并从消息队列中删除。

你应该`m->wParam`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:30:58.513

Wm_paste 消息仅在组合框和编辑控件中触发。没有简单的方法来捕获粘贴，但是您可以通过创建一个小窗口并将此[窗口添加到剪贴板查看器链](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649052%28v=vs.85%29.aspx)来获取复制消息。

# android - 对于 android 开发，我应该升级到 Eclipse v4 吗？

> ID：12335630
> 
> 赞同：2
> 
> 时间：2012-09-09T00:41:54.793
> 
> 标签：android, eclipse

我正在使用 Eclipse v 3.7.2 开发 Android 应用程序。我已经做了几个月并且取得了一些不错的进展，但我不确定我是否想重建我的开发环境。

我不怀疑 Eclipse 已经改进了，但是它对于 android 开发有改进吗？

在我重建我的环境之前，我想知道我为什么要修复它。

谁能告诉我他们是否发现升级到 Eclipse 版本 4 的主要功能优势？

我尝试在 android 爱好者组中发帖，发现问题是“离题”，因为这里有很多开发人员，我希望你们不要介意与编码无关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:05:19.790

完全没有必要重建任何东西。从您的 3.7.2 安装中，您应该能够将您的安装更新到 3.8。使用*Help->Check for updates* with the 3.8 specific update site: [http://download.eclipse.org/eclipse/updates/3.8](http://download.eclipse.org/eclipse/updates/3.8)

这样您就可以获得上一个发布周期的所有错误修复和更改，但不需要切换到 Juno 的 e4 版本。作为 Eclipse*用户*，建模工作台和 CCS 样式的更改并不重要。

注意：如果您使用 Linux 并通过存储库管理器安装了 Eclipse，则就地更新可能会成为问题。

# spring - Spring Portlet MVC 和移动门户加速器

> ID：12335631
> 
> 赞同：1
> 
> 时间：2012-09-09T00:42:09.100
> 
> 标签：spring, mobile, portlet, websphere-portal

我有一些使用 Spring Portlet MVC 框架开发的 portlet。目前，它们部署在 WebSphere Portal Server v7 中，工作非常出色，但现在客户购买了用于 Portal 的 Mobile Portal Accelerator，并希望使用该技术为所有已开发的 portlet 启用移动功能。

有没有人有使用该技术的经验，特别是与 Spring Portlet MVC 结合使用？IBM 发表[了一些关于公开现有 JSR-168 portlet 的文章](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/How_To_XDIME_Enable_An_Existing_Portlet)，但我不确定这将如何与 Spring Portlet 和 JSR-286 API 一起使用。

# .htaccess - 我的 .htaccess 被一次又一次地改变

> ID：12335634
> 
> 赞同：2
> 
> 时间：2012-09-09T00:42:37.427
> 
> 标签：.htaccess, web

我希望你能帮助我，我有一个网站，并且 .htaccess 文件经常被黑客重定向到另一个页面，每次我删除该文件时，当我在 5 分钟后检查文件时，再次写入文件以重定向到带有恶意软件的页面，我从具有 Windows 和 linux 的不同计算机上多次更改了 sftp、页面本身和数据库的密码，但该文件在主页中不断更改，并在子目录中创建被黑客入侵的 .htaccess，为什么会继续发生这种情况？帮助

该网页托管在 Dreamhost 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:06:19.833

如果您的 .htaccess 文件的权限设置为只有您可以修改它，那么您会发现以下内容之一：

*   您的 FTP 访问日志中显示正在上传 .htaccess 的条目
*   控制面板访问日志中的条目显示正在编辑的 .htaccess
*   修改发生时 HTTP 访问日志中的条目（通常是 POST，但不一定）。这通常是某种广义的后门程序。
*   进行此修改的 crontab 条目

此外，您会发现您的网站以某种方式被黑客入侵 - 例如，不安全的 JCE 编辑器版本、密码错误、无编号扩展、Flash 上传器、因已知安全问题而无法更新或类似情况。这一切都在日志中。你还会发现有一堆小的 PHP 文件或一个额外的管理员帐户，一旦你解决了问题的明显部分，攻击者就会回来。

# performance - 使用 PHP 进行简单查询的 mongo 查询速度很慢

> ID：12335638
> 
> 赞同：3
> 
> 时间：2012-09-09T00:44:19.610
> 
> 标签：performance, mongodb

我有一个非常简单的 Mongo Query，我正在使用 PHP 执行它。

我相信查询执行得非常快，因为当我在终端上运行它时，它几乎立即完成，当我执行 explain() 时，它显示它在 1-2 毫秒内执行。

但是，当我去迭代光标并将内容放入一个数组时，它会减慢 bigtime 需要大约 1 秒来迭代几条记录。

它使用索引，索引将扫描的对象减少到它返回的少数文档。

我在这个数据库上运行了其他非常相似的查询，它们的完成速度提高了 1000 倍。

以下是 explain() 的结果：

```
cursor (String, 18 characters ) BtreeCursor vsid_1
nscanned (Integer) 7
nscannedObjects (Integer) 7
n (Integer) 7
scanAndOrder (Boolean) TRUE
millis (Integer) 2
nYields (Integer) 0
nChunkSkips (Integer) 0
isMultiKey (Boolean) FALSE
indexOnly (Boolean) FALSE
indexBounds (Array, 1 element)

    vsid (Array, 1 element)
        0 (Array, 2 elements)
            0 (String, 32 characters ) e11d0d96958a473e261933516489158c
            1 (String, 32 characters ) e11d0d96958a473e261933516489158c

allPlans (Array, 4 elements)
oldPlan (Array, 2 elements) 
```

如您所见，它使用的是适合此查询的“vsid”上的索引。这个集合的规模不小，但也不大（约 250,000 条记录）。

当我执行查询时，我只是使用一个非常简单的迭代循环它，将它放入一个数组中：

```
foreach ($cursor as $obj) {
  $vhit[] = $obj;
} 
```

执行每次迭代的实际时间是几分之一毫秒。查询的执行时间最多为 2 毫秒。但是进入“foreach”循环的过程会导致 1 秒的延迟。

有任何想法吗？

编辑：服务器运行大约 8 GIG 的 RAM，但整个数据库只有 745 MB，所以它应该能够在 RAM 中容纳整个数据库。

# python - 在 Python 中复制和移动文件？

> ID：12335640
> 
> 赞同：-3
> 
> 时间：2012-09-09T00:44:31.670
> 
> 标签：python, linux, shell, filesystems, copy

将python中的文件复制和移动到不同目录并覆盖目标中的这些文件（如果它们已经存在）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:47:06.153

看看[shutil.copyfile](http://docs.python.org/library/shutil.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:43:23.773

```
file1=open('insert directory here').readlines()
file2=open('insert directory here', 'w')
file2.write(file1) 
```

如果任一目录中有空格，请执行以下操作：

```
directory='insert directory here'
directory=directory.rstrip() 
```

然后像使用“在此处插入目录”一样使用变量目录。

# java - 创建适用于 SmsMessage.createFromPdu() (GSM 3gpp) 的 Android PDU

> ID：12335642
> 
> 赞同：12
> 
> 时间：2012-09-09T00:44:46.883
> 
> 标签：java, android, pdu

**目标：（**注意：选择的答案为 CDMA（3gpp2）生成一个 GSM（3gpp）PDU [）请参考这里](https://stackoverflow.com/q/12487634/1443717)

创建一个可以传递到的 PDU `SmsMessage.createFromPdu(byte[] pdu)`。我正在向我的`BroadcastReciever`一个收听 SMS 消息的人“广播意图”。

一`BroadcastReciever`

用于*“真正*`android.provider.Telephony.SMS_RECEIVED`的”短信

 *`intent-filter`对这些新*的“应用程序短信”*使用自定义操作。

```
@Override
public void onReceive(Context context, Intent intent) {

    Bundle bundle = intent.getExtras();

    if (bundle != null) {
        Object[] pdusObj = (Object[]) bundle.get("pdus");
        SmsMessage[] messages = new SmsMessage[pdusObj.length];

        // getting SMS information from Pdu.
        for (int i = 0; i < pdusObj.length; i++) {
            messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i]);
        }

        for (SmsMessage currentMessage : messages) {
            //the currentMessage.getDisplayOriginatingAddress() 
            //or .getDisplayMessageBody() is null if I Broadcast a fake sms
            Log.i("BB", "address:"+currentMessage.getDisplayOriginatingAddress()+" message:"+currentMessage.getDisplayMessageBody());
    ... 
```

所以我希望我`BroadcastReciever`能够在不添加额外代码的情况下处理这两种类型的消息

（是的，我知道我可以`BroadcastReciever`为不同的`intent-filter`动作采取不同的方式，但我想真正做到这一点，因为我知道这是可以做到的，我很固执）

**研究：**

我整天/晚上都在做研究。即使我对数学和转换以及创建合适的算法非常糟糕，我也尝试过编写自己的代码。我查看了有关 PDUs和[Create PDU Android的](https://stackoverflow.com/q/5822806/1443717)[Stack 主题](https://stackoverflow.com/tags/pdu/hot)，但答案中的链接已损坏。我什至看了源代码`com.google.android.mms.pdu`

到目前为止，我只能使用[http://www.wrankl.de/JavaPC/SMSTools.html](http://www.wrankl.de/JavaPC/SMSTools.html)中的一些代码创建一个没有“*原始地址”的 PDU*

**配电单元：**

目的地：555 消息：helloworld

```
"1100038155f50000aa0ae8329bfdbebfe56c32" 
```

这显然是无效的......

**旁注：**

除了本地使用之外，我不打算对 PDU 做任何事情，我不想在我的代码中使用硬编码的 PDU，因为我没有重复使用 PDU。

如果有什么我可以添加到我用来添加*“原始地址”*的代码中，那将起作用。或者有人知道我不知道的图书馆的信息吗？

谢谢

**更新：**

试过了

```
byte[] by =(byte[])(SmsMessage.getSubmitPdu("12345", "1234", "hello", false).encodedMessage); 
```

这给了我以下（以十六进制表示）

```
"0000100200000000000000000000000004010203040000000e000320ec400107102e8cbb366f00" 
```

没用

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-09T11:05:20.443

也许这个片段没有你想要的很多细节字段，但为了我的**简单目的**，它可以像另一个短信一样调用通知。

```
 private static void createFakeSms(Context context, String sender,
        String body) {
    byte[] pdu = null;
    byte[] scBytes = PhoneNumberUtils
            .networkPortionToCalledPartyBCD("0000000000");
    byte[] senderBytes = PhoneNumberUtils
            .networkPortionToCalledPartyBCD(sender);
    int lsmcs = scBytes.length;
    byte[] dateBytes = new byte[7];
    Calendar calendar = new GregorianCalendar();
    dateBytes[0] = reverseByte((byte) (calendar.get(Calendar.YEAR)));
    dateBytes[1] = reverseByte((byte) (calendar.get(Calendar.MONTH) + 1));
    dateBytes[2] = reverseByte((byte) (calendar.get(Calendar.DAY_OF_MONTH)));
    dateBytes[3] = reverseByte((byte) (calendar.get(Calendar.HOUR_OF_DAY)));
    dateBytes[4] = reverseByte((byte) (calendar.get(Calendar.MINUTE)));
    dateBytes[5] = reverseByte((byte) (calendar.get(Calendar.SECOND)));
    dateBytes[6] = reverseByte((byte) ((calendar.get(Calendar.ZONE_OFFSET) + calendar
            .get(Calendar.DST_OFFSET)) / (60 * 1000 * 15)));
    try {
        ByteArrayOutputStream bo = new ByteArrayOutputStream();
        bo.write(lsmcs);
        bo.write(scBytes);
        bo.write(0x04);
        bo.write((byte) sender.length());
        bo.write(senderBytes);
        bo.write(0x00);
        bo.write(0x00); // encoding: 0 for default 7bit
        bo.write(dateBytes);
        try {
            String sReflectedClassName = "com.android.internal.telephony.GsmAlphabet";
            Class cReflectedNFCExtras = Class.forName(sReflectedClassName);
            Method stringToGsm7BitPacked = cReflectedNFCExtras.getMethod(
                    "stringToGsm7BitPacked", new Class[] { String.class });
            stringToGsm7BitPacked.setAccessible(true);
            byte[] bodybytes = (byte[]) stringToGsm7BitPacked.invoke(null,
                    body);
            bo.write(bodybytes);
        } catch (Exception e) {
        }

        pdu = bo.toByteArray();
    } catch (IOException e) {
    }

    Intent intent = new Intent();
    intent.setClassName("com.android.mms",
            "com.android.mms.transaction.SmsReceiverService");
    intent.setAction("android.provider.Telephony.SMS_RECEIVED");
    intent.putExtra("pdus", new Object[] { pdu });
    intent.putExtra("format", "3gpp");
    context.startService(intent);
}

private static byte reverseByte(byte b) {
    return (byte) ((b & 0xF0) >> 4 | (b & 0x0F) << 4);
} 
```

希望你能找到有用的东西

更新 ：

```
 public static final SmsMessage[] getMessagesFromIntent(
                Intent intent) {
            Object[] messages = (Object[]) intent.getSerializableExtra("pdus");
            byte[][] pduObjs = new byte[messages.length][];

            for (int i = 0; i < messages.length; i++) {
                pduObjs[i] = (byte[]) messages[i];
            }
            byte[][] pdus = new byte[pduObjs.length][];
            int pduCount = pdus.length;
            SmsMessage[] msgs = new SmsMessage[pduCount];
            for (int i = 0; i < pduCount; i++) {
                pdus[i] = pduObjs[i];
                msgs[i] = SmsMessage.createFromPdu(pdus[i]);
            }
            return msgs;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:01:58.300

自从我进行任何直接的 PDU 争吵以来已经很久了，但是当我这样做时，我很快放弃并使用了[SMSLib](http://code.google.com/p/smslib/)：PDU 实用程序非常适合通过诺基亚手机（通过串行链接）发送。我的假设（可能是错误的）是它们也适用于 Android，假设接口实际上符合规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:02:28.270

[请在 console.c 中](http://androidxref.com/4.0.4/xref/external/qemu/android/console.c#1576)检查此代码。这是 android 模拟器创建 pdu 和[RIL.java](http://androidxref.com/4.0.4/xref/frameworks/base/telephony/java/com/android/internal/telephony/RIL.java#2467)的地方，其中 CMT 消息被转换为 SmsMessage。您可以使用`SmsMessage.getPdu`来获取 pdu。但`SmsMessage.newFromCmt`看起来是一个内部api。所以可能不靠谱。

此外，这仅适用于 Gsm，cdma 具有完全不同的代码流，并且由于 RIL.java 和调制解调器完全是特定于制造商的，这可能仅适用于模拟器。

通常 GSM 代码在 android 上更可靠，所以也可以在 gsm 手机上工作。一定要试一试。*

# boost - BGL。在旅途中计算边缘权重的最短路径？

> ID：12335647
> 
> 赞同：1
> 
> 时间：2012-09-09T00:46:03.410
> 
> 标签：boost, boost-graph

我正在尝试在一组具有坐标的点上构建一个完整的图形（边上的权重等于它们的长度），然后找到两个特定点之间的最短路径。有没有办法在运行期间计算边缘的权重*`dijkstra_shortest_paths()`*？

我可以在构建图形时计算它们，但我希望能够更改点的坐标并重新计算最短路径而不重建图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T17:04:42.763

用于边缘权重的属性映射可以是任意的，因此特别是它可以是一个`function_property_map`（[文档](http://www.boost.org/doc/libs/1_54_0/libs/property_map/doc/function_property_map.html)）以任意方式计算权重。您还可以查看`libs/graph/example/implicit_graph.cpp`如何手动创建权重图；但是，您不需要自定义图形类来将自定义属性映射传递给算法。

# javascript - 从远程数据填充嵌套 JSON

> ID：12335651
> 
> 赞同：0
> 
> 时间：2012-09-09T00:46:35.157
> 
> 标签：javascript, jquery, ajax, json, html

我想使用 get 请求填充这个 json [http://www.godsgypsychristianchurch.net/music.json](http://www.godsgypsychristianchurch.net/music.json)，我想使用 jquery 和使用一些隐藏的 div 解析多个级别的数据（这个 json 保存来自多个不同城市的教堂）

*解析的思路是这样的*

**城市>专辑>曲目>Div with Mp3 Link/Player**

*详细解释*

**Church** with the string church 我想首先列出您单击的引用列表，然后字符串 **专辑**将填充并列出所选城市的每个专辑（同时隐藏城市列表），一旦选择了专辑字符串 **曲目**将被填充和列出（同样在隐藏专辑列表时）

一旦选择了一个曲目，我希望有一个链接到 mp3 的隐藏潜水（它必须与*baseurl*字符串结合以完成 url，但是一旦我可以到达这个 div，我就能够创建模板对于它，它只是以那种方式解析嵌套的 json，这就是问题所在。

请帮忙，如果你愿意**包括完整的代码**（当只显示一段代码时我很困惑，**JSfiddle**也是一个很大的帮助，我知道它要求很多，但我真的需要一些帮助，提前谢谢你

**要更多地了解我想要做什么，去你可以从应用商店“GGCC MOBILE”下载iOS应用我基本上是想复制它，但对于网站[http://www.ggcc。电视](http://www.ggcc.tv)**

我已经重写了 JSON 格式并让它在 Sencha touch 中工作[http://www.ggcc.tv/app/STNL](http://www.ggcc.tv/app/STNL)重写的数据在这里[http://www.ggcc.tv/app/data.json](http://www.ggcc.tv/app/data.json)但问题使用鼠标滚动，ST 需要您必须单击并拖动才能滚动，我似乎找不到禁用 is 的方法，所以我请求您帮助我们为我们的网站解析这些数据不使用 sencha touch，非常感谢您的所有帮助、时间和精力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:11:33.923

“从远程数据填充嵌套 JSON”令人担忧。

这样想：

*   网页发出`.getJSON()`请求（或其`$.ajax()`等价物）。
*   远程服务器应用程序接收请求。
*   远程服务器上的脚本通过从数据库中检索数据并组合数据结构（深度对象或深度数组或两者的组合）来响应请求。
*   远程服务器上的脚本对数据进行 JSON 编码，并在其响应中将其发送回客户端。
*   客户端接收响应，jQuery 自动将其 JSON 解码为反映服务器原始数据结构的 javascript 数据结构。

您如何处理数据取决于您和您的应用程序构建技能，作为练习的副产品，这些技能将被磨练到完美。

# ios - iOS：从 NSMutableArray 中获取 3 个不同的随机元素

> ID：12335652
> 
> 赞同：6
> 
> 时间：2012-09-09T00:46:51.210
> 
> 标签：ios, random, nsarray

我有一个包含 N 个整数元素（N>4）的 NSMutableArray，我想从这个数组中获取 3 个不同的随机元素。我真的不需要完全均匀的分布，只需要 3 个不同的随机元素就可以了。你有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T00:52:02.693

制作`NSIndexSet`并继续添加

```
int value = arc4random() % array.count; 
```

项目到它，直到它的大小达到`3`。你知道你有你的三个索引。

```
NSMutableIndexSet *picks = [NSMutableIndexSet indexSet];
do {
    [picks addIndex:arc4random() % array.count];
} while (picks.count != 3);
[picks enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
    NSLog(@"Element at index %ud: %@", idx, [array elementAt:idx]);
}]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T00:49:32.177

```
for (int i = 1; i <= 3; i++) {    
    int index = (int)(arc4random() % [array count]);
    id object = [array objectAtIndex:index];
    [array removeObjectAtIndex:index];
} 
```

`arc4random()`返回 [0,2^32-1) 范围内的随机数。当您使用数组大小​​取模时，余数会得到一个介于 [0,arrayCountLessOne] 之间的值。

如果您不想更改原始数据数组，则只需复制该数组即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T00:51:37.310

如果您想从代码中的不同位置多次执行此操作，请考虑执行此操作：“Objective C 方式”是在 NSMutableArray 上创建一个类别，该类别添加一个 method `randomObjects`。该方法本身应生成从 0 到数组长度 -1 ( `N-1`) 的三个随机整数，然后根据此处的其他答案（尤其是 dasblinkenlight 的其他答案）在这些索引处从数组中返回一组对象。

首先，创建类别。创建一个新的头文件`NSMutableArray+RandomObject.h`，包含：

```
@interface NSMutableArray (RandomObjects)

- (NSSet *) randomObjects;

@end 
```

括号中的`RandomElement`是您的类别的名称。您编写的任何包含这个新头文件的类都将为您`NSMutableArray`的所有实例提供`randomElement`方法。

然后执行，在`NSMutableArray+RandomObjects.m`：

```
@implementation NSMutableArray (RandomObjects)

- (NSSet *) randomObjects {
  // Use the code from @dasblinkenlight's answer here, adding the following line:
  return picks;
}

@end 
```

基本上就是这样。您已经有效地将该功能添加到`NSMutableArray`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T17:02:35.110

dasblinkenlight 的回答很好！

在**斯威夫特 4**中：

```
let indexes = NSMutableIndexSet()
if array.count > setSize {
    repeat {
        indexes.add(Int(arc4random_uniform(UInt32(array.count))))
    } while (indexes.count < setSize)
} 
```

# zend-framework2 - Zend Framework 2 CLI

> ID：12335657
> 
> 赞同：0
> 
> 时间：2012-09-09T00:47:22.320
> 
> 标签：zend-framework2

我意识到 Zend Framework 2 的稳定版本发布时间不长，但是通过[骨架教程](http://zf2.readthedocs.org/en/latest/user-guide/database-and-models.html)似乎需要做很多工作才能使新模块正常工作。

我只是想知道是否有任何可用的工具（例如 CLI）可以更轻松地创建新模块/模型等。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:04:26.507

您可以使用新的 ZFTool 模块通过 cli 为您创建新的模块和应用程序结构

[https://github.com/zendframework/ZFTool](https://github.com/zendframework/ZFTool)

创建一个新模块

```
zf.php create module <name> [<path>] 
```

创建一个新项目

```
zf.php create project <path> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:31:50.393

稍后可能会有工具来自动创建模块，但可能还没有。回想一下，为 ZF1 自动创建项目的工具并没有出现在很多版本中。我不确定具体是哪个版本，但我认为这些工具直到 1.8 之后才可用。

在那之前，一定要考虑创建一个“骨架”模块并将其放在 github 上，或者甚至在骨架应用程序上创建一个拉取请求，以使您的骨架模块在已经完成额外设置的情况下，添加到骨架应用程序或它完全取代了 Zend。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:02:55.763

github 上已经存在一个骨架模块。它已经存在了几个月，并随着 zf2 的开发而定期更新。

[https://github.com/zendframework/ZendSkeletonModule](https://github.com/zendframework/ZendSkeletonModule)

# c# - 如何让 Graph API 访问令牌服务器端发布到我自己的页面？

> ID：12335659
> 
> 赞同：1
> 
> 时间：2012-09-09T00:47:24.440
> 
> 标签：c#, facebook-graph-api, oauth, facebook-wall, facebook-access-token

我的工作是运行服务器端并发布到我自己的 facebook 页面，但是我通过 API 图形资源管理器手动获取的令牌过期并且我的应用程序失败。

我所需要的只是一个访问令牌，这样我就可以通过带有新令牌的作业以编程方式将消息发布到我自己的墙上。

生成新令牌时，“https://graph.facebook.com/oauth/access_token”API 要求我提供 URI (redirect_uri) 参数，但我没有它，因为它将是在后台运行的工作.

如何做到这一点？设置了什么范围，以便我可以通过服务器端作业以编程方式管理页面并发布到我自己的墙上？我始终不以任何其他用户的身份发布，而是以我自己的身份发布。

我已经尝试过了，但它仍然在向我询问 uri。

[https://graph.facebook.com/oauth/access_token?client_id=XXXX&client_secret=XXXd&scope=publish_stream,manage_pages](https://graph.facebook.com/oauth/access_token?client_id=XXXX&client_secret=XXXd&scope=publish_stream,manage_pages)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:24:11.970

Redirect_uri 是指向您的应用程序的链接。

您可以在此页面上阅读更多信息：http: [//developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)

# python - pip 给出“ImportError：没有名为 setuptools 的模块”，但我可以在 python 解释器中导入 setuptools

> ID：12335662
> 
> 赞同：7
> 
> 时间：2012-09-09T00:48:31.200
> 
> 标签：python, pip, setuptools

我正在一台新的 Mac 上进行设置，我一直在哼唱，安装 pip 和一些软件包。突然之间，我尝试运行的每个 pip 命令都会抛出

```
Exception:
Traceback (most recent call last):
  File "/Library/Python/2.6/site-packages/pip-1.2.1-py2.6.egg/pip/basecommand.py", line 107, in main
    status = self.run(options, args)
  File "/Library/Python/2.6/site-packages/pip-1.2.1-py2.6.egg/pip/commands/install.py", line 248, in run
    import setuptools
ImportError: No module named setuptools 
```

我想我不小心删除了一个目录或其他东西，所以我尝试重新安装 setuptools，遵循本网站上[其他答案的建议。](https://stackoverflow.com/a/4111811/625840)[我从这里](http://pypi.python.org/pypi/setuptools#files)下载了 setuptools egg并像 shell 脚本一样运行它。得到这个输出：

```
Processing setuptools-0.6c11-py2.7.egg
Removing /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
Copying setuptools-0.6c11-py2.7.egg to /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
setuptools 0.6c11 is already the active version in easy-install.pth
Installing easy_install script to /Library/Frameworks/Python.framework/Versions/2.7/bin
Installing easy_install-2.7 script to /Library/Frameworks/Python.framework/Versions/2.7/bin

Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
Processing dependencies for setuptools==0.6c11
Finished processing dependencies for setuptools==0.6c11 
```

现在，如果我启动一个交互式 python 会话，我可以`import setuptools`没有错误，但是 pip（和其他命令行脚本）抱怨它没有安装。任何想法为什么 Python 似乎找到了它，而不是其他脚本？

如果它有帮助，这就是`sys.path`：

```
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T00:53:48.950

您`pip`似乎与您的 Python 不一致。比较：

```
File "/Library/Python/2.6/site-packages/pip-1.2.1-py2.6.egg/pip/basecommand.py", line 107, in main 
```

到

```
Installed /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg 
```

如果python2.7有setuptools，那么你应该有

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/easy_install-2.7 
```

可用，在这种情况下

```
easy_install-2.7 pip 
```

应该给你`pip-2.7`。

# c++ - 获取 OpenCV 图像类型的枚举名称（例如 CV_32FC1）？

> ID：12335663
> 
> 赞同：22
> 
> 时间：2012-09-09T00:48:45.310
> 
> 标签：c++, image-processing, opencv, enums, image-formats

在 OpenCV 的 C++ 接口中，检查图像的类型似乎很容易。如果你有图像`cv::Mat img = cv::imread("someImage.xyz")`，你就去做`int theType = img.type()`。

然而，正如您所料，调用`img.type()`只给出一个整数，而不是一个枚举名称（例如`CV_32FC1`）。

`CV_32FC1`如果我知道 OpenCV 枚举的整数值，是否有一种简单的方法可以打印出枚举名称（例如）？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-09T01:59:39.657

据我所知，OpenCV 中不存在这样的功能。

我认为你最好编写自己的函数来获得这些。很多开关盒，但我想它可以完成工作。枚举可以在[这里](http://docs.opencv.org/modules/core/doc/intro.html#fixed-pixel-types-limited-use-of-templates)找到。

**编辑：**

这是您可以用来提取类型的东西。我猜可能有一种更有效的方法，但我现在无法理解它。

```
std::string getImageType(int number)
{
    // find type
    int imgTypeInt = number%8;
    std::string imgTypeString;

    switch (imgTypeInt)
    {
        case 0:
            imgTypeString = "8U";
            break;
        case 1:
            imgTypeString = "8S";
            break;
        case 2:
            imgTypeString = "16U";
            break;
        case 3:
            imgTypeString = "16S";
            break;
        case 4:
            imgTypeString = "32S";
            break;
        case 5:
            imgTypeString = "32F";
            break;
        case 6:
            imgTypeString = "64F";
            break;
        default:
            break;
    }

    // find channel
    int channel = (number/8) + 1;

    std::stringstream type;
    type<<"CV_"<<imgTypeString<<"C"<<channel;

    return type.str();
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-09T03:52:47.987

按照@Bob 的建议，我编写了自己的函数来解决这个问题。这里是：

```
// take number image type number (from cv::Mat.type()), get OpenCV's enum string.
string getImgType(int imgTypeInt)
{
    int numImgTypes = 35; // 7 base types, with five channel options each (none or C1, ..., C4)

    int enum_ints[] =       {CV_8U,  CV_8UC1,  CV_8UC2,  CV_8UC3,  CV_8UC4,
                             CV_8S,  CV_8SC1,  CV_8SC2,  CV_8SC3,  CV_8SC4,
                             CV_16U, CV_16UC1, CV_16UC2, CV_16UC3, CV_16UC4,
                             CV_16S, CV_16SC1, CV_16SC2, CV_16SC3, CV_16SC4,
                             CV_32S, CV_32SC1, CV_32SC2, CV_32SC3, CV_32SC4,
                             CV_32F, CV_32FC1, CV_32FC2, CV_32FC3, CV_32FC4,
                             CV_64F, CV_64FC1, CV_64FC2, CV_64FC3, CV_64FC4};

    string enum_strings[] = {"CV_8U",  "CV_8UC1",  "CV_8UC2",  "CV_8UC3",  "CV_8UC4",
                             "CV_8S",  "CV_8SC1",  "CV_8SC2",  "CV_8SC3",  "CV_8SC4",
                             "CV_16U", "CV_16UC1", "CV_16UC2", "CV_16UC3", "CV_16UC4",
                             "CV_16S", "CV_16SC1", "CV_16SC2", "CV_16SC3", "CV_16SC4",
                             "CV_32S", "CV_32SC1", "CV_32SC2", "CV_32SC3", "CV_32SC4",
                             "CV_32F", "CV_32FC1", "CV_32FC2", "CV_32FC3", "CV_32FC4",
                             "CV_64F", "CV_64FC1", "CV_64FC2", "CV_64FC3", "CV_64FC4"};

    for(int i=0; i<numImgTypes; i++)
    {
        if(imgTypeInt == enum_ints[i]) return enum_strings[i];
    }
    return "unknown image type";
} 
```

我是否忘记在查找表中包含任何 OpenCV 图像类型？

# higher-order-functions - 为什么 Haskell 不为一维数组提供折叠？

> ID：12335664
> 
> 赞同：5
> 
> 时间：2012-09-09T00:48:49.950
> 
> 标签：higher-order-functions, haskell

`Data.Array`不提供`Array`类型的折叠。

在 Real World Haskell（第 12 章）中，据说原因是`Array`s 可以根据程序员的需要以不同的方式折叠：

> 首先，有几种折叠是有意义的。我们可能仍然想要折叠单个元素，但我们现在也可以折叠行或列。最重要的是，对于一次元素折叠，不再只有两个序列用于遍历。

这不正是`List`s 的真实情况吗？用多维 s 表示例如矩阵是很常见的`List`，但仍然为一维`List`s 定义了折叠。

我缺少什么微妙之处？是多维与s 的`Array`一个足够不同吗？`Array``Array`

**编辑：**嗯，即使是*多维*数组也确实以 .[0] 实例的形式定义了折叠，`Data.Foldable`那么这如何与 Real World Haskell 引用相匹配？

[0] [http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-Foldable.html](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-Foldable.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T04:05:22.777

`Array`既然您提到了“多维”和s之间的区别`Array`，`Array`那将很好地说明这一点，并与列表进行比较。

折叠（在`Foldable`类意义上）本质上是线性操作，就像列表本质上是线性结构一样；右折叠通过将其构造函数与 的参数一对一匹配来完全表征列表`foldr`。虽然您也可以定义类似`foldl`的函数，但可以明确选择标准的规范折叠。

`Array`没有这样的透明结构，可以在折叠中一对一匹配。它是一种抽象类型，可以访问由索引值提供的各个元素，索引值可以是任何具有`Ix`实例的类型。因此，实现折叠不仅没有单一的明显选择，也没有内在的线性结构。它确实发生了`Ix`让您枚举一系列索引的情况，但这更像是一个实现细节而不是其他任何东西。

那么多维`Array`s呢？它们实际上并不存在。`Ix`为同样是实例的类型的元组定义实例，如果您想将此类元组视为“多维”的索引类型`Array`，请继续！但它们仍然只是元组。显然，`Ix`在这些元组上设置了一些线性顺序，但它是什么？你能在文档中找到任何告诉你的东西吗？

所以，我认为我们可以有把握地说，`Array`使用定义的顺序折叠多维`Ix`是不明智的，除非你真的不在乎你得到元素的顺序。

另一方面，对于 an `Array`of s，只有一种合理的方式来组合它们，就像嵌套列表一样：根据它们自己的元素顺序分别折叠每个内部，然后根据外部的顺序折叠每个的结果元素。`Array``Array``Array`

* * *

现在，您可能会合理地反对，因为一维和多维之间没有类型区别`Array`，并且可以假设前者具有基于`Ix`实例的合理折叠排序，为什么不默认使用该排序呢？`Array`毕竟，已经有一个函数可以返回列表中的元素。

事实证明，库本身会同意你的观点，因为这正是`Foldable`实例所做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T03:51:27.933

折叠列表有一种自然的方式，即`foldr`. 注意列表构造函数的类型：

```
(:) :: a -> [a] -> [a]
[]  :: [a] 
```

替换出现的`[a]`with `b`，我们得到以下类型：

```
f :: a -> b -> b
z :: b 
```

当然，现在的类型`foldr`是基于这个原则：

```
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

因此，鉴于列表的构造/观察语义，`foldr`这是最自然的一种。您可以将类型理解为“告诉我如何处理 a`(:)`以及如何处理 a `[]`，我会为您处理掉一个列表”。

`Array`没有这个属性；你从关联列表`Ix i => [(i,a)]`（

# iphone - uialertview 和委托（在代码中延迟）

> ID：12335665
> 
> 赞同：0
> 
> 时间：2012-09-09T00:48:58.280
> 
> 标签：iphone, objective-c, xcode, ipad

我正在检查文件是否已经存在，如果存在，我会提醒用户是否要替换文件。我正在使用警报视图和委托。但是，当我在用户选择“是”或“否”时使用模拟器运行它时，程序已经运行通过它并且 blnVal 没有值，无论我不确定我在这里缺少什么。？
（我在这里搜索了数据库，但找不到任何相关的具体问题）

```
 -(void) chkFile2Save
    {
        short tst;

        NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        NSString* foofile = [documentsPath stringByAppendingPathComponent:pln2Save.text];
        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:foofile];

        if(fileExists)
        {
            blnVal=NO;
           [self AskFileSave];
        }

        //blnVal always NO for whatever reason ... ?
        if(blnVal==NO)
            tst=5;
              //...
        else {
            tst=10;
            //..
        }

    }

    - (void) AskFileSave
    {
        UIAlertView *alertFileSave = [[UIAlertView alloc] initWithTitle:@"" message:@"File already exists.  Override the file with current data?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];

        [alertFileSave setTag:10];
        [alertFileSave show];
        [alertFileSave release];
    }

    -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {

        //override file exists
        if([alertView tag]==10)
        {
            if(buttonIndex == 1)
            {
                blnVal=YES;
            }
            else
            {
                blnVal=NO;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:01:10.813

你在打电话

```
[self AskFileSave]; 
```

那将执行

```
- (void) AskFileSave 
```

比执行将回到：

```
//blnVal always NO for whatever reason ... ?
        if(blnVal==NO)
            tst=5;
              //...
        else {
            tst=10;
            //..
        } 
```

您应该将那部分代码移动到委托方法，在那里您可以选择用户选择的选项，因为 UIAlerView 不会停止代码执行。

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //override file exists
    if([alertView tag]==10)
    {
        if(buttonIndex == 1)
        {
            blnVal=YES;
            tst = 10;
        }
        else
        {
            blnVal=NO;
            tst=5;
        }

    }
} 
```

我希望它有帮助！

# joomla - Joomla 包括——文件是什么以及在哪里？

> ID：12335666
> 
> 赞同：0
> 
> 时间：2012-09-09T00:49:21.380
> 
> 标签：joomla, include

```
<jdoc:include type="modules" name="foot"/> 
```

上面的代码在 joomla 中包含什么文件，它在哪里？

我已经对整个站点进行了 grep 处理，以查找我知道必须在该代码行调用的文件中的字符串......但我还没有找到它。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:57:14.570

这是一个称为脚的模板位置。jdoc:include 是 joomla 框架用来为模板中的模块创建位置的代码。因此，如果您在“脚”位置发布模块，您会看到它出现在“脚”位置的占位符中。

# api - NServiceBus Sagas 和 REST API 集成最佳实践

> ID：12335673
> 
> 赞同：3
> 
> 时间：2012-09-09T00:51:46.780
> 
> 标签：api, architecture, nservicebus

将 NServiceBus Sagas 与 REST API 集成/交互的最明智的方法是什么？

场景如下，

*   我们有一个负载平衡的 REST API。根据负载，我们可以添加更多节点。
*   REST API 是围绕 DomainServices API 的包装器。这意味着可以直接使用 API。
*   我们想将 Sagas 用于工作流并实现 NServiceBus Distributor 以进行横向扩展。

问题是，如果我们使用 Sagas 的 REST API，实际处理发生在 API 场中。这在某种程度上违背了实现分发者模式的目的。

另一方面，直接从 Sagas 使用 DomainServives API，允许在工作节点内进行本地处理。使用这种方法，我们将不得不在多个位置维护 API 程序集，但吞吐量可能会更高。

我试图了解最好的方法。就个人而言，我更喜欢使用 API（如果随时可用），但这可能会给系统带来麻烦，并且与进程内相比可能需要更长的时间才能完成。

一个典型的序列可能类似于发布在线广告，

*   广告商通过 Web 应用程序提交新的广告请求。
*   Web 应用程序调用相关的 API 端点并发送命令消息。
*   命令消息启动一个新的发布广告 Saga 实例。
*   Saga 发送一个命令来验证调用者权限（进程内/进程外 API 调用）
*   Saga 发送一个命令来验证广告数据（进程中/进程外 API 调用）
*   Saga 向欺诈服务（第三方服务）发送命令
*   一旦内容和欺诈验证成功，
*   Saga 向计费系统发送命令。
*   Saga 调用 API 调用以保存添加详细信息。（进程中/进程外 API 调用）

这种情况一直持续到广告过期，有许多重试和失败条件路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:29:33.300

经过多次设计迭代后，我们提出了以下准则，

1.  将 REST API 层视为集成平台。
2.  假设 API 端点能够抽象出相当复杂的微工作流。微工作流是在单次突发（不可中断）中执行并在很短的时间跨度（<1 秒）内完成的操作。
3.  假设 API 农场能够服务许多并发请求并且可以轻松横向扩展。
4.  当目标操作相当简单时，优先使用同步调用而不是基于异步消息的调用。
5.  当需要异步处理时，使用单个消息处理程序并从处理程序调用 API。这会将工作委派给 API 农场。这也将消除对分销商和额外硬件资源的需求。
6.  除非业务工作流包含多个事务、补偿逻辑和恢复，否则请避免使用 Saga。测试表明 Sagas 在负载下表现不佳。
7.  避免直接从消息处理程序中使用 DomainServices。这直到在本地完成工作，并且还通过分发业务逻辑引入了部署麻烦。

很高兴听到想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:24:47.923

您正确地确定了您将需要 Sagas 来管理工作流程。我敢打赌，您的域连接到一个通用数据库。如果这是真的，那么直接使用您的域并消除序列化/网络开销会更快。您还将失去在数据库级别轻松管理事务的能力。

假设你直接调用你的域，性能就变成了域如何执行的问题。您可能会采取措施优化数据库、降低分布式事务成本、分片数据等。您最终可能会使用 Distributor 来拥有多个 Saga 处理节点，但听起来一旦设计完成后您需要进行更多测试选择。

一般而言，我们使用 REST API 将命令建模为资源（通过 POST），以允许无法直接访问消息传递的客户端与 NSB 进行交互。这是一个潜在的解决方案，可以将内容从您的 Web 应用程序转移到 NSB。

# unit-testing - 在 Sinatra 应用程序的机架单元测试中访问“t”（来自 r18n）

> ID：12335676
> 
> 赞同：2
> 
> 时间：2012-09-09T00:52:28.390
> 
> 标签：unit-testing, internationalization, sinatra

当`sinatra-r18n`用于处理国际化时，`r18n`lib 会根据[这些说明](https://github.com/ai/r18n/tree/master/sinatra-r18n)`t`公开一个变量以在您的助手、路由和模板中使用。

我编写了一个简单的单元测试，`rack-unit`用于确认我的一些复数形式有效，但测试抛出一个错误，声称`t`是 nil。

我尝试通过`app.t`, `MySillyApp.t`（其中 MySillyApp 是我的 Sinatra 应用程序的名称）`MySillyApp.settings.t`等引用它，但它们都没有让我访问`t`我需要的。

我想要实现的是确认我的翻译文件包含我需要的所有键，这些键对应于我的应用程序需要理解的各种度量单位的复数。也许有一种更直接的测试方法，无需通过 Sinatra 应用程序本身。我欢迎任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:10:33.567

我有类似的任务来检查我的 Cucumber 场景中的本地化字符串。我已经做了[工作示例](https://github.com/qatsi/sinatra-cucumber-r18n-example)。 [在这里](https://github.com/qatsi/sinatra-cucumber-r18n-example/blob/master/features/step_definitions/web_steps.rb)你可以找到字符串是如何被翻译的。 [该文件](https://github.com/qatsi/sinatra-cucumber-r18n-example/blob/master/features/support/env.rb)无法理解如何将 R18n 支持添加到您的测试框架：

```
require 'r18n-core'
...

class SinCucR18nWorld
  ...
  include R18n::Helpers
end 
```

如您所见，我使用的是 RSpec/Cucumber，而不是机架/单元，抱歉。

# streaming - 在 A/V 流中，流式传输的数据量是恒定的还是波动的？

> ID：12335679
> 
> 赞同：1
> 
> 时间：2012-09-09T00:53:35.623
> 
> 标签：streaming, video-streaming, audio-streaming

A/V 流中的活动量可能会有所不同。例如，如果正在流式传输的数据来自一个空旷、安静的房间，那么与数据是一个响亮而爆炸性的视频游戏相比，发生的事情要少得多。

我想知道的是，上下波动的实际数据*量是否会因对“活动”的这种主观解释而有所不同。*换句话说，我在观看空房间的视频流时下载的数据是否比活动的视频游戏少？我的直觉一直是响亮的“不”；毕竟，程序如何知道两者之间的区别？

不过，我现在要问，因为我注意到过去流式传输视频时有所不同。视频在主观“低”活动期间似乎总是很好，而在“高”活动期间它开始滞后或跳过。这只是巧合，还是实际上有某种算法或服务在低活动或类似情况下稀释数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:39:58.813

嗯，问题是音频和视频流被压缩了。它们可以用各种格式中的任何一种进行压缩。一些格式的目标是减少 % 的大小，一些会设置质量值，另一些会执行相同的步骤，无论数据是简单的还是复杂的。

以 jpg 和 png 格式为例。打开您最喜欢的编辑器并创建一个 640x480 像素的图像，填充纯白色。现在保存该文件并查看它的大小。现在对图像应用噪点并将其保存为新文件。比较两者 - 看看大小的巨大差异。我得到了 1.37kb 的白色图像，331kb 的嘈杂图像。（可以为整个白色图像重复单个 8x8 或 16x16 块，对于嘈杂的图像必须使用唯一的 8x8 或 16x16 块）

VBR（可变比特率）和CBR（恒定比特率）是视频转码（从一种格式转换为另一种格式）时常用的两个术语

无论如何 - 答案是“这取决于格式” - 有些格式确实如此，有些则不然。

显卡总是在每一帧向屏幕发送相同数量的数据，即使其中的信息很少——它是未压缩的。另一方面，传输的音频和视频（几乎）总是被压缩，因此当信息较少时，传输它需要的数据较少。

# android - OpenCV for Android，我需要单独安装 OpenCV Manager 吗？

> ID：12335680
> 
> 赞同：13
> 
> 时间：2012-09-09T00:53:47.280
> 
> 标签：android, opencv

刚刚开始研究适用于 Android 的 OpenCV。我注意到在运行使用它的应用程序之前，我需要安装一个叫做 OpenCV Manager 的东西。

有没有办法将此管理器与我的应用程序捆绑在一起，这样用户就不必单独安装它？如果这是可能的，那真的很有帮助。

我还没有编写使用 OpenCV 的应用程序，但我只是在展望未来。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:00:22.130

您正在寻找静态初始化方法。

请参阅[此处的文档](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)。

你也可以检查这个线程：

[OpenCV Android 上的静态初始化](https://stackoverflow.com/q/12615712/1085483)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T22:41:29.993

我发现这个答案非常有帮助：

[https://stackoverflow.com/a/40018413/6030520](https://stackoverflow.com/a/40018413/6030520)

在执行此操作之前，您必须确保您的 OpenCV 功能齐全（换句话说，确保您可以构建一个没有错误的项目等）。此外，请确保在 settings.gradle 文件中包含以下代码行：

```
include ':openCVLibrary330' 
```

（单引号之间的内容取决于您导入的 openCVLibrary 文件夹的名称。即，如果该文件夹名为 openCVLibrary320，那么您将输入：

```
include ':openCVLibrary320' 
```

反而。文件夹名称取决于您使用的 OpenCV 版本。）

# php - 将多字节字符串中的符号与 ASCII 中的符号进行比较

> ID：12335683
> 
> 赞同：0
> 
> 时间：2012-09-09T00:54:27.103
> 
> 标签：php, string, encoding

我想检测多字节字符串中的空格或连字符。
起初我将一个字符串拆分为字符数组

```
$chrArray = preg_split('//u', $str, -1, PREG_SPLIT_NO_EMPTY); 
```

然后我尝试将这些符号与连字符或空格进行比较

```
foreach ($chrArray as $char) {
    if ($char == '-' || $char == ' ') {
        // Do something
    }
} 
```

哦，这个不行。好吧，为什么？也许是因为 ASCII 中的那些符号？

```
echo mb_detect_encoding('-'); // ASCII 
```

好的，我会努力处理的。

```
 $encoding = mb_detect_encoding($str); // UTF-8
    $dash = mb_convert_encoding('-', $encoding);
    $space = mb_convert_encoding(' ', $encoding); 
```

哦，但它也不起作用。等一等...

```
echo mb_detect_encoding($dash); // ASCII 
```

！！！发生了什么？？？我怎么能做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:49:26.597

我开始使用正则表达式。这个

```
"/(?<=-| |^)([\w]*)/u" 
```

查找 unicode 中在前一个位置有连字符、空格或什么都没有（一行中的第一个）的所有单词。我使用的是`preg_replace_callback`（在 PHP >= 5.4.1 中`mb_ereg_replace_callback`可以使用），而不是迭代 chars 数组。

# c++ - c ++：强制转换运算符与分配运算符与转换构造函数优先级

> ID：12335684
> 
> 赞同：13
> 
> 时间：2012-09-09T00:54:32.693
> 
> 标签：c++, casting, copy-constructor, assignment-operator

让我们有这个代码：

```
Test1 t1;
Test2 t2;
t1 = t2; 
```

我相信有三种（或更多？）方法来实施`t1 = t2`

*   重载赋值运算符`Test1`
*   重载类型转换运算符`Test2`
*   创建`Test1(const Test2&)`转换构造函数

根据我的 GCC 测试，这是使用的优先级：

1.  赋值运算符
2.  转换构造函数和类型转换运算符（不明确）
3.  const 转换构造函数和 const 类型转换运算符（不明确）

请帮助我理解为什么这个优先级。

我使用此代码进行测试（取消注释某些行以尝试）

```
struct Test2;
struct Test1 {
  Test1() { }
  Test1(const Test2& t) { puts("const constructor wins"); }
//  Test1(Test2& t) { puts("constructor wins"); }
//  Test1& operator=(Test2& t) { puts("assign wins"); }
};

struct Test2 {
  Test2() { }
//  operator Test1() const { puts("const cast wins"); return Test1(); }
//  operator Test1() { puts("cast wins"); return Test1(); }
};

int main() {
  Test1 t1;
  Test2 t2;
  t1 = t2;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T00:59:01.987

该语句`t1 = t2;`等效于：

```
t1.operator=(t2); 
```

现在适用重载决议的通常规则。如果有直接匹配，那就是选择的。如果不是，则考虑将隐式转换与（自动生成的，“隐式定义的”）复制赋值运算符一起使用。

有两种可能的隐式用户定义转换。所有用户定义的转换计数相等，如果两者都定义，则重载是不明确的：

*   通过转换构造函数转换`t2`为 a 。`Test1``Test1::Test1(Test2 const &)`

*   通过强制转换运算符转换`t2`为 a 。`Test1``Test2::operator Test1() const`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T18:36:45.747

当我使用以下代码时，优先级优先于构造函数而不是强制转换运算符

```
 #include<iostream>
 using namespace std;
 class C1;
 class C2
 {
      int x;
 public:
     operator C2()
     {
       C2 temp;
       cout<<"operator function called"<<endl;
       return temp;
    }
 };
class C1
{
   int x;
public:
   C1():x(10){}
   C1(C2)
  {
    cout<<"constructor called"<<endl;
  }
};
 int main()
{
  C1 obj1;
  C2 obj2;
  obj1=obj2;
} 
```

> 输出构造函数调用

# azure - 如何在 Azure 上部署自定义 DataCacheStoreProvider 以进行直写和后读

> ID：12335685
> 
> 赞同：1
> 
> 时间：2012-09-09T00:55:53.763
> 
> 标签：azure, appfabric, azure-appfabric, appfabric-cache

是否可以在 Azure 上部署自定义 DataCacheStoreProviders？我目前正在尝试在本地部署和测试一个，但我不确定如何去做，因为文档没有涵盖我的场景。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:12:07.130

不，这不可能。您可以在此处找到所有支持的功能：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg278350.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg278350.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:36:29.660

我认为您的问题是针对云服务的，不是吗？

我没有关于如何让所有这些工作的确切经验，但是在一次类似的讨论中，结果是，如果在您的机器中构建和注册 DataCacheStoreProviders 之后，您可以使用 Azure 的 DataCacheStoreProviders，您可以使用 Windows Azure 缓存模块访问它们，即使用 DataCacheFactory.GetCache(String cacheName) 并处理缓存项。如果您尝试在任何步骤中遇到任何问题，我可以在您发布问题后找到一些帮助您的方法。

# hibernate - java.io.IOException：使用 jersey 的 Java 中 REST 中的过早 EOF

> ID：12335687
> 
> 赞同：0
> 
> 时间：2012-09-09T00:56:37.867
> 
> 标签：hibernate, rest, tomcat, jersey, jax-rs

我[使用 jersey 在 Java 中实现了一个 RESTful Web 服务](http://www.vogella.com/articles/REST/article.html)并在`Tomcat7`.

我有这个查询来获取任务列表：

```
@GET
@Path("/users/{username}/")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response taskList(@PathParam("username") String username) {      
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<Task> tasks = null;
        try { 
            tasks = (List<Task>)session.createQuery("from Task as t where t.user.username = :name order by t.project.key ASC, t.deliverable.key ASC, t.activity.key ASC, t.start ASC").setString("name", username).list();   
        } catch (HibernateException e) {
            e.printStackTrace();
            session.getTransaction().rollback();
        }
        session.getTransaction().commit();
        return Response.ok().entity(tasks).build();
    } 
```

我用球衣客户测试它：

```
try {
    response = service.path("task/users/are/").type("application/json").get(ClientResponse.class);
    s = response.getEntity(String.class);
    System.out.println(s);
} catch (Exception e) {
    e.printStackTrace();
} 
```

结果示例：

```
[{"id":5369,"start":1331428800000,"end":1331428800000,"description":"","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1282,"description":"andra saker","key":"andra","name":"Other","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1266,"description":"","key":"other","name":"Other","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":null,"orderIndex":0,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":3,"done":false,"minEstimate":10.0,"maxEstimate":30.0,"task_id":0},"link":""},{"id":5324,"start":1331254080000,"end":1331254800000,"description":"","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1274,"description":"","key":"login","name":"Login","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1273,"description":"","key":"client","name":"Android client","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":1,"done":false,"minEstimate":15.0,"maxEstimate":30.0,"task_id":0},"link":""},{"id":7901,"start":1338678900000,"end":1338678900000,"description":"","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":101,"key":"c","name":"Consulting","description":"Just in special cases, authorized by Rüdiger after discussion with customer.","cost":990.0,"orderIndex":3,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1278,"description":"Stagtistic check","key":"statistic","name":"Statistics","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1273,"description":"","key":"client","name":"Android client","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":5,"done":false,"minEstimate":20.0,"maxEstimate":40.0,"task_id":0},"link":""},{"id":10441,"start":1347134220000,"end":1347135120000,"description":"hello","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"deliverable":{"id":1278,"description":"Stagtistic check","key":"statistic","name":"Statistics","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1273,"description":"","key":"client","name":"Android client","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":5,"done":false,"minEstimate":20.0,"maxEstimate":40.0,"task_id":0},"link":""},{"id":6259,"start":1334170080000,"end":1334170140000,"description":"hi","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1276,"description":"","key":"task","name":"Uppgifter","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1273,"description":"","key":"client","name":"Android client","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":3,"done":false,"minEstimate":15.0,"maxEstimate":30.0,"task_id":0},"link":""},{"id":7900,"start":1338678600000,"end":1338678780000,"description":"","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1276,"description":"","key":"task","name":"Uppgifter","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1273,"description":"","key":"client","name":"Android client","project":{"id":115,"key":"are","name":"Master Thesis","description":"Android client for Timelog","date":1328396400000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"orderIndex":3,"done":false,"minEstimate":15.0,"maxEstimate":30.0,"task_id":0},"link":""},{"id":6258,"start":1334170020000,"end":1334170080000,"description":"Develop","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1495,"description":"Develop statistic","key":"3.2","name":"statistic","project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1240,"description":"Developing","key":"3","name":"Android Client","project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":null,"orderIndex":2,"done":false,"minEstimate":0.0,"maxEstimate":0.0,"task_id":0},"user":null,"orderIndex":2,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"link":""},{"id":10442,"start":1347134640000,"end":1347135540000,"description":"hello","started":false,"user":{"id":28,"username":"are","hash":"$2a$10$G0e7cjXtn60XmAhUx8JpNOYk.EwpIEwDvc2mBaNsTGqQe1tgIZAxy"},"project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"activity":{"id":108,"key":"v","name":"Vacation/Holidays","description":"Planned vacation (counting agains the 25 days)","cost":300.0,"orderIndex":5,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},"deliverable":{"id":1237,"description":"","key":"o","name":"Other","project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":{"id":1236,"description":"","key":"other","name":"Other","project":{"id":109,"key":"mre","name":"Master Thesis Ali Rezaei","description":"Timelog Android","date":1328223600000,"category":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},"valueType":0,"fixValue":0.0,"done":0,"task_id":0},"parent":null,"user":null,"orderIndex":0,"done":false,"minEstimate":null,"maxEstimate":null,"task_id":0},"user":null,"orderIndex":2,"done":true,"minEstimate":null,"maxEstimate":null,"task_id":0},"link":""}] 
```

它非常适合这个用户 ( **are** ) 和所有其他用户，除了其中一个用户。

该用户在数据库中有**大量**任务，所以我收到了这个错误：

```
Caused by: java.io.IOException: Premature EOF
    at sun.net.www.http.ChunkedInputStream.readAheadBlocking(Unknown Source)
    at sun.net.www.http.ChunkedInputStream.readAhead(Unknown Source)
    at sun.net.www.http.ChunkedInputStream.read(Unknown Source)
    at java.io.FilterInputStream.read(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
    at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.Reader.read(Unknown Source)
    at com.sun.jersey.core.util.ReaderWriter.readFromAsString(ReaderWriter.java:171)
    at com.sun.jersey.core.util.ReaderWriter.readFromAsString(ReaderWriter.java:157)
    at com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.readFromAsString(AbstractMessageReaderWriterProvider.java:114)
    at com.sun.jersey.core.impl.provider.entity.StringProvider.readFrom(StringProvider.java:73)
    at com.sun.jersey.core.impl.provider.entity.StringProvider.readFrom(StringProvider.java:58)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:554)
    ... 2 more 
```

我很感激任何帮助。

* * *

**附加物**

我发现问题不在服务器端。它在客户端。我有一个 Android 客户端，它面临内存不足的问题。

问题是我怎样才能在我的客户端解决这个问题。你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:25:54.123

如果返回的项目数量确实*很大*，另一种选择是将数据分页返回给客户端。如果列表足够大，它甚至可能对用户和界面没有用（不确定您的体验是什么）。例如，看看 StackOverflow——每天都有大量的帖子，但界面（可能还有后端查询模式）分页数据。

简单的分页方式就是“更多”模式

```
/users/{username}/tasks?top=n 
```

如果它以 25 开头，则可能会有更多链接拉到前 50 名等...有点像 ios 邮件和其他类似的应用程序。

另一种方法是“页面”

```
/users/{username}/tasks?page=1 
```

有趣的问题是你是否希望集合是稳定的。换句话说，该用户的任务正在发生变化，因此转到第 2 页可能会跳过项目或显示第 1 页中的项目 - 除非您为该用户“查询”保持状态 - 可能存储结果集（可能只是 ID ) 在数据库、中间层（有问题的多个 AT）或客户端（返回所有 ID 并具有客户端页面列/数据）中 - 有点像虚拟列表视图。

当您使用大量数据集时，仅返回所有数据通常不是正确的答案，然后它开始使您的分页等方法变得复杂......

希望这能引发对不同选择的一些想法。可能不是您问题的确切答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:25:34.503

问题在于返回的数据量很大。尝试下面的代码从响应中读取数据。

```
 InputStream is = response.getEntityInputStream(); 
    BufferedReader r = new BufferedReader(new InputStreamReader(is)); 
    int more = 1;
    StringBuilder responseString = new StringBuilder();
    char[] cbuf = new char[5000];
    while (more > 0 ) {
        more = r.read(cbuf, 0, 5000);
        responseString.append(cbuf);
    }
    System.out.println(responseString.toString()); 
```

# c# - wpf 类全球？

> ID：12335690
> 
> 赞同：0
> 
> 时间：2012-09-09T00:57:09.247
> 
> 标签：c#, wpf, xaml

IM 本质上不是 C# 程序员，但我可以满足我的需要。我正在尝试学习 WPF，我的问题是，我可以在 App.xaml 中声明我的类并从我所有的单独控件中访问它吗？我主要对此感兴趣，因为我不想拥有一个 LogWriter 并让所有人都与之交谈。

```
<!-- App.xaml -->
<Application x:Class="MyAPP.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:src="clr-namespace:LogWriter"
         StartupUri="MainWindow.xaml">
<Application.Resources>
 <src:LogWriter x:Name="LogWriter"/> 
</Application.Resources>
</Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:58:42.920

设置[`x:Key`](http://msdn.microsoft.com/en-us/library/ms742804.aspx)，用于[`StaticResource`](http://msdn.microsoft.com/en-us/library/cc189045.aspx)参考。[`Application.Resources`](http://msdn.microsoft.com/en-us/library/system.windows.application.resources.aspx)可以在应用程序的任何地方访问。

# javascript - 将范围扩展到 url

> ID：12335696
> 
> 赞同：1
> 
> 时间：2012-09-09T00:58:56.673
> 
> 标签：javascript, range

我试图使用范围来检查鼠标是否在 url 上，但我不知道如何告诉扩展范围以获得完整的 url，而不仅仅是其中的每个单词。

这是一个显示问题的示例：[jsFiddle](http://jsfiddle.net/q3AtL/)

我将在可编辑的 iframe 中使用此代码。如果用户写了一个 url，我想给他打开它的可能性，尽管它不是锚元素而是纯文本。我不确定是否可以实现，但我想尝试一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:47:25.723

一个问题是`expand()`Range 的方法是非标准的，仅在 WebKit 中支持。另一个`document.caretRangeFromPoint()`也是 WebKit-only。还有一个问题是，在识别单词时无法指定要匹配的正则表达式。

一个选项是我的[Rangy库的新](http://code.google.com/p/rangy)[TextRange 模块](http://code.google.com/p/rangy/wiki/TextRangeModule)，它适用于所有主要浏览器并提供更灵活的范围方法。还有一个进行中的职位模块，它提供了一个跨浏览器的实现（标准化为）。`expand()``document.caretRangeFromPoint()`[`document.caretPositionFromPoint()`](http://www.w3.org/TR/cssom-view/#dom-document-caretpositionfrompoint)

不幸的是，位置模块在 Firefox 中是不稳定的，但我打算尽快修复它。此外，由于我认为与 jsFiddle 有关的原因，以下演示目前在 IE 中不起作用。所以总的来说这还远远不能令人满意，但可能会给你一些想法。

现场演示：http: [//jsfiddle.net/q3AtL/5/](http://jsfiddle.net/q3AtL/5/)

# c# - 创建、读取和删除本地文件

> ID：12335698
> 
> 赞同：0
> 
> 时间：2012-09-09T00:59:29.207
> 
> 标签：c#, .net, wpf, windows-8

在 Windows 8 中（对于桌面应用程序 - 不是 Metro），您将如何创建文件、写入文件和读取文件？

* * *

以下链接未提供有关此信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh447209 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447209(v=vs.85).aspx)

我知道如何在 Metro 应用程序中执行此操作，但文档在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:02:16.973

这听起来像是您可以使用完整的 .NET 框架，[`System.IO.File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)在这种情况下，该类应该会有所帮助。

# php - .php 扩展名和 AddType 之间的区别

> ID：12335700
> 
> 赞同：1
> 
> 时间：2012-09-09T01:00:06.007
> 
> 标签：php, html, .htaccess

由于我想让 PHP 代码在我的网站上正常运行，我应该添加

`AddType application/x-httpd-php .html`

到我的 htaccess 文件，或者只是将我的所有`*.html`文件更改为`*.php`文件？

我听说将文件扩展名更改为`*.php`会导致网站加载速度变慢，但我想知道更改 htaccess 文件是否也一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:02:42.917

无论哪种方式，这些文件都将通过 PHP 解释器传递，这使得它们比直接提供的纯 HTML 文件要慢一些。无论您如何设置，它都是相同的过程。除非你有很多动态 PHP，否则与纯 HTML 的速度差异将非常小。鉴于您正在考虑将现有文件从`.html`to重命名`.php`，我怀疑您那里已经（或任何）*没有*太多 PHP 代码。

所以你用哪种方式处理它并不重要。

### 然而...

保留它们`.html`可能有一个缺点，即如果您*忘记*设置此配置，您最终可能会向浏览器提供原始 PHP 代码，其中可能包括您的数据库连接详细信息或其他机密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:02:21.327

它完全一样。.php 不比 html 慢，html 不比 php 慢，只是你的网络服务器配置中的不同设置。

AddType application/x-httpd-php .html 会慢一点，因为 apache 会动态加载这一行。如果你在 httpd.conf 中设置它，它会完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T01:23:10.713

同意迈克尔的观点，您需要小心重命名它们为 HTML 并有可能无法设置它，或者您的主机提供商对您的帐户进行了一些搞砸的事情。

如果您这样做，请确保所有数据库/密码文件都保留为您只需包含在 HTML 文件中的 PHP。

# c# - 将现有代码目录添加到 Visual C# 2010 express

> ID：12335705
> 
> 赞同：2
> 
> 时间：2012-09-09T01:00:56.693
> 
> 标签：c#, visual-studio-2010

Visual C# 的新手。我可以添加现有的 .cs 文件，但有没有办法将整个代码目录添加到 C#。否则我将不得不在 Visual C# 中再次创建文件夹并将文件添加到其中。必须有一种更简单的方法可以在 Visual C# 中复制我现有的目录结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:06:09.950

单击解决方案资源管理器中的显示所有文件以查看项目目录中的整个文件系统。

然后，您可以右键单击整个文件夹（或选择多个文件夹）并单击包含在项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:33:31.437

您应该能够通过将文件夹拖放到项目或子文件夹中来简单地将文件夹从资源管理器窗口拖放到您的解决方案中。

# php - 使用 html 格式回显 PHP 变量

> ID：12335707
> 
> 赞同：0
> 
> 时间：2012-09-09T01:01:07.057
> 
> 标签：php, html

我需要做的是回显一个 PHP 变量，但它需要位于我的 HTML 页面中某个 DIV 的底部，而不仅仅是页面的底部。将其放入该 DIV id 应该涵盖格式，因为该 div 是使用 CSS 格式化的。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:03:46.957

我相信您要执行的操作类似于以下内容。

```
<div id="divName"><?php echo($variable); ?> </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:05:00.543

`<div><?php echo $variable; ?> </div>`

我不明白您要做什么或这样做有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:12:15.103

你也可以这样写：

```
 <?php echo "<div id='idName'> Hello World </div>"?>
     <?php echo "<b>This text is in bold.</b>"?> 
```

# css - 如何使用 CSS 在以下布局中选择“a”标签？

> ID：12335712
> 
> 赞同：0
> 
> 时间：2012-09-09T01:01:22.263
> 
> 标签：css, css-selectors

我有以下 html 片段：

```
...
<div>
    <a></a>
    <select class="error"></select>
    <label class="error"></label>
    <div></div>
</div>
... 
```

我需要用 CSS 选择“a”标签。这可能吗？

我正在尝试选择“a”标签。错误类是通过 javascript 动态注入的。我想要一个使“a”标签变红的静态 css 规则。

我只对使用选择器的 CSS 方法感兴趣。如果这是不可能的，我不需要其他方法的帮助。

~~~~~~~~~~~~~~ 编辑：~~~~~~~~~~~~~~~

唯一将这个“a”标签与其他“a”标签区分开来的是它后面的错误类元素的存在。错误类是动态应用的。我不想选择其他没有错误类的“a”标签。我只想在它后面跟着错误类时选择这个“a”标签。

~~~~~~~~~ 再次编辑：~~~~~~~~~

我解释得很糟糕。我希望我可以选择包含错误类的所有 div 的第一个孩子（或其他东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T05:21:19.420

这不可能。CSS 没有根据其后的兄弟元素来选择元素的工具。甚至[CSS Selectors 4](http://www.w3.org/TR/selectors4/)（包含许多提议的，但未批准或实施的选择器添加）也缺少这样的功能。（如果它会被添加，我想它会被称为“前兄弟组合器”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:04:23.603

*只需选择锚点即可在该*特定布局中为您提供所需的内容。

```
a {color: red;} 
```

- 编辑 -

既然你改变了你的问题，这里有一个新的答案：

使用 JS 检查是否存在特定类型的兄弟姐妹。

```
$('a').each(function(){
    if (​$(this).siblings('.error').length > 0​​)
        $(this).css('color','red');
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T01:08:10.963

```
<style>
  .mylinkclass {
    ...style info goes here
  }
</style>

...
<div>
    <a class="mylinkclass"></a>
    <select class="error"></select>
    <label class="error"></label>
    <div></div>
</div>
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T02:02:02.543

关于您更新的问题，请尝试以下 hackish 解决方案：

```
div a:nth-last-child(4)
{
    background-color:yellow;
} 
```

如果您可以指望`DIV`当错误元素存在时您的内部有 4 个且只有 4 个元素（锚是第一个），否则存在更少（或更多）元素。

无论如何，您最好为此使用 Javascript（或适当的 HTML）。

# javascript - 在 Masonry 的 container.append Uncaught TypeError 上出现错误：对象没有方法过滤器

> ID：12335719
> 
> 赞同：1
> 
> 时间：2012-09-09T01:02:27.177
> 
> 标签：javascript, jquery, html, jquery-masonry, infinite-scroll

我在显示图像的网页上实现无限滚动。图像使用[masonry](http://masonry.desandro.com/)对齐。最初，当页面加载时，我只在`#container`div 中放了 10 张图像。并且所有图像都使用下面的代码正确对齐，在 chrome 脚本控制台中没有错误。

```
var $container = $('#container');
        $container.imagesLoaded(function(){
        $('#container').masonry({
          itemSelector: '.box',
          columnWidth: 200,
          isAnimated: true
        });
    }); 
```

但是当用户向下滚动时，我会

```
$.ajax({
         url: "load.php?offset="+1+"&quantity="+1,
         success: function(html){
         if(html){
                  var $container = $('#container');
                  var $test = "<div>even doing this causes error </div>";
              $container.append($test).masonry('appended',$test);
        }
  }); 
```

现在，当我向下滚动时，我会在 chrome 控制台中遇到错误，并且附加的图像会堆积起来。

```
 Uncaught TypeError: Object <div class....... </div>  has no method filter 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-09T08:25:25.830

正如我在评论中所说，您收到的错误消息在使用 jQuery 时很典型。`filter()`是 jQuery 对象的一种方法。masonry 似乎试图在`$test`变量内的任何对象上调用它，在您的示例中，该对象是一个 String 对象。基本上，它调用

```
"<div>even doing this causes error </div>".filter(...) 
```

这会产生你的错误。

为了使事情顺利进行，您必须将`masonry()`jQuery 对象而不是 String（或任何其他 JavaScript 对象）传递给该方法。如果您有一个字符串，例如作为 AJAX 调用的结果，您可以使用其上的 jQuery 函数将其转换为 jQuery 对象。对于您的示例：

```
$test = $("<div>even doing this causes error </div>"); 
```

这将创建一个 jQuery div 对象，该对象应该可用于砌体。

另一个提示：您似乎在所有 JavaScript 变量前面都加上了一个`$`符号。虽然这取决于您，但我建议只为保存 jQuery 对象的变量添加前缀，`$`而不是任何其他变量的前缀。因此，对于字符串，您只需使用`var test = "String";`. 这是我发现非常有用的约定。此外，这将使其他人更容易理解您的代码。

# java - 如何使用 JSTL 为 paramID 的特定 ID 页面设置页面标题

> ID：12335720
> 
> 赞同：0
> 
> 时间：2012-09-09T01:02:36.977
> 
> 标签：java, jsp, title, tiles

使用 Tiles 和 JSP。在 JSP 上，`${param.ID}`用于获取特定页面。

`sub-category.jsp`

```
<jsp:include page="categories/sub-category/${param.ID}.jsp" flush="true" /> 
```

`/sub-category/test-page.jsp`是一个身份证

我需要找到一种方法来制作`test-page.jsp`自己可以插入的独特页面标题`test-page.jsp`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:39:00.357

我假设您想根据加载的页面更改网页的标题（例如 test-page.jsp）。

如果是这样，那么在 test-page.jsp 中，您可以编写

```
<script>
    document.title = "My Title";
</script> 
```

或写在 document.onload()

最好是 jquery.ready 函数

# apache - 我需要将 apache 重写转换为 nginx

> ID：12335722
> 
> 赞同：2
> 
> 时间：2012-09-09T01:02:54.790
> 
> 标签：apache, mod-rewrite, nginx

我需要将 apache mod_rewrite 规则转换为 nginx 请帮忙！

Apache重写规则是：

```
RewriteEngine On
Options +FollowSymLinks

RewriteRule ^(.*).htm$ index.php?p=$1 [L]
RewriteRule ^(.*).html$ index.php?p=site&d=$1 [L]

RewriteRule ^images/w-([0-9]+)-(.*).*$ img/rsc.php?w=$1&ph=$2 [L]
RewriteRule ^images/h-([0-9]+)-(.*).*$ img/rsc.php?h=$1&ph=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:23:09.020

[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html) This page explains how to use nginx rewrite.

# ios - UITableView 中需要多次点击以进行复选标记

> ID：12335728
> 
> 赞同：2
> 
> 时间：2012-09-09T01:03:49.030
> 
> 标签：ios, didselectrowatindexpath, uitableview

温柔点，我在学习。

下面的代码实际上工作正常，除了在我第一次点击一行（适当地放置一个复选标记）之后，我必须点击一个单元格两次才能让它删除相同的复选标记。

同样，删除它后，需要轻按两次才能将复选标记放回去。

我该如何解决？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *thisCell = [tableView cellForRowAtIndexPath:indexPath];
    NSInteger selectedRow = indexPath.row;

    if (thisCell.accessoryType == UITableViewCellAccessoryNone) {
        thisCell.accessoryType = UITableViewCellAccessoryCheckmark;
        if (selectedRow == 0) dm = 1;
        else if (selectedRow == 1) athero1 = 1;
        else if (selectedRow == 2) athero2 = 1;
        else if (selectedRow == 3) athero3 = 1;
        else if (selectedRow == 4) familyHistory1 = 1;
        else if (selectedRow == 5) familyHistory2 = 1;
    }
    else  {
        thisCell.accessoryType = UITableViewCellAccessoryNone;
        if (selectedRow == 0) dm = 0;
        else if (selectedRow == 1) athero1 = 0;
        else if (selectedRow == 2) athero2 = 0;
        else if (selectedRow == 3) athero3 = 0;
        else if (selectedRow == 4) familyHistory1 = 0;
        else if (selectedRow == 5) familyHistory2 = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:55:05.327

确保`allowsMultipleSelection`未设置为`YES`. 不使用此属性时设置的默认值为`NO`。如果您在班级的任何地方使用此属性，请尝试将其设置为`NO`以检查它是否有效。这将导致需要点击 2 次才能选择一行。

```
self.tableView.allowsMultipleSelection = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:49:53.623

*有一个数组来存储选定的行索引。在**-didSelect**中，检查行索引是否已存在于数组中，如果不添加，则将其从数组中删除。并重新加载表。就这样。我相信这会奏效。:]*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:55:01.950

您是否有可能将两个 UITableViewControllers 推送到导航控制器堆栈上？

我遇到过这种情况，问题是 switch 语句中缺少“中断”，导致第二个 TableViewController 被推送。视图上的所有内容都需要点击两次，甚至是我的“返回”按钮。

# java - 如何在继续之前等待 JFrame 关闭？

> ID：12335733
> 
> 赞同：5
> 
> 时间：2012-09-09T01:04:29.597
> 
> 标签：java, swing, user-interface, jdialog, cardlayout

我的程序由 3 个主要“部分”组成。主要功能，登录表单和应用程序表单。主要功能应该是这样的：打开登录表单，等待它关闭，然后打开应用程序表单。我无法让等待部分工作，或者更确切地说，我不知道我将如何去做。

有人告诉我改用 JDialog 并使用`setModal(true)`，但是使用这种方法，登录表单不会出现在任务栏上，这在我看来很糟糕。

我考虑的另一件事是在关闭后从登录内部打开应用程序，但这感觉像是糟糕的设计，因为这会使登录表单不可重用。

那么，请问您有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T01:08:22.573

*   为什么登录必须出现在任务栏上，因为主应用程序将在那里，并且您不希望单个程序有多个任务栏项目。您最好的选择可能是使用模态 JDialog。
*   另一种选择是使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)交换“视图”。
*   第三种选择是使用 JFrame，如果你必须附加一个监听器，我相信一个 WindowListener 来响应它的关闭事件。
*   不管你走哪条路，你的登录 gui 应该是一个 JPanel，这样你就可以把它放在你想要的任何地方，然后再改变主意。

# php - 正则表达式从 CSS 中提取类似 Sass 的键/变量对 - php

> ID：12335737
> 
> 赞同：0
> 
> 时间：2012-09-09T01:05:37.987
> 
> 标签：php, regex, sass

如何在 php 中使用 sass 之类的变量提取键值对？

```
$blue: #3bbfce;
$margin:16px; 
```

结果应如下所示：

```
array('blue' => '#3bbfce', 'margin' => '16px'); 
```

其次，如何删除（剥离）css 样式表中的所有/任何变量声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T01:27:27.320

```
<?php
$subject = '$blue: #3bbfce; \n $margin:16px;';
$pattern = '/\$(.*?):(.*?);/';

preg_match_all($pattern, $subject, $matches);
$variableArray = array_combine( $matches[1], $matches[2] );
array_map( function($val) { return ltrim($val); }, $variableArray );
print_r($variableArray); 
```

This will net you the result you're looking for. To get rid of all such definitions, just use `preg_replace` over the subject with the same `$pattern`. Basically, what this regular expression says is

*   Find anything starting with a $ that...
    *   Is followed by an arbitrary set of characters, then a colon and another arbitrary set of characters followed by a semicolon.

You might want to refine this pattern using character classes like to so you won't match variables like `$this is not a valid variable: name`.

# php - 从函数中删除全局

> ID：12335738
> 
> 赞同：1
> 
> 时间：2012-09-09T01:05:56.940
> 
> 标签：php, pdo

我对 PDO 很陌生。我创建了以下函数，但我读到拥有全局数据库 ($dbo) 是个坏主意。该代码也可以工作并输出我想要的。关于如何改进/修复的任何建议？

```
function langString($lang_id) { 
    global $dbo;
    $lang_result=$dbo->prepare("SELECT lang_string FROM lang WHERE lang_id=:lang_id");
    $lang_result->bindParam(":lang_id",$lang_id,PDO::PARAM_INT,3);
    if($lang_result->execute()){ 
        $lang_row = $lang_result->fetch(PDO::FETCH_OBJ);
        echo "<br><br>$lang_row->lang_string";
    }
}

echo langString(3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:08:13.310

将变量作为参数传递给函数

```
function langString($lang_id, $dbo) {   
    $lang_result=$dbo->prepare("SELECT lang_string FROM lang WHERE lang_id=:lang_id");
    $lang_result->bindParam(":lang_id",$lang_id,PDO::PARAM_INT,3);
    if($lang_result->execute()){ 
        $lang_row = $lang_result->fetch(PDO::FETCH_OBJ);
        echo "<br><br>$lang_row->lang_string";
    }
}

echo langString(3, $dbo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:36:38.047

接受答案的问题是，您最终将在每个函数中作为参数跟踪数据库。这会导致更长的参数列表，并且随着您获得更多的东西开始看起来很乱。

另一种方法是创建一个单例，您可以调用它来获取数据库连接，例如，通常大型项目将使用它来不仅仅是访问数据库，但这里有一个简单的示例

```
class DatabaseProvider {
     private static $database;
     private $dbo;
     private function __construct() {
         //Here's where you do your PDO connection creation
         $this->dbo= new PDO()....;
     }
     public static function getDatabase() {
         if(!isset(self::$database) {
               self::$database = new DatabaseProvider();
         }
         return $database->dbo;
     }
} 
```

然后你只需调用`DatabaseProvider::getInstance()`which 返回 pdo 对象

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-09T01:17:21.407

使用包含文件...

将您的变量甚至在包含中创建一个 db 对象，然后您可以从任何地方调用它。

```
function langString($lang_id) { 

    include($_SERVER['DOCUMENT_ROOT']."/dbconnect.php"); //Put your vars in this document

    $lang_result=$dbo->prepare("SELECT lang_string FROM lang WHERE lang_id=:lang_id");
    $lang_result->bindParam(":lang_id",$lang_id,PDO::PARAM_INT,3);
    if($lang_result->execute()){ 
        $lang_row = $lang_result->fetch(PDO::FETCH_OBJ);
        echo "<br><br>$lang_row->lang_string";
    }
}

echo langString(3); 
```

# asp.net - 输入标签和表格高度

> ID：12335742
> 
> 赞同：2
> 
> 时间：2012-09-09T01:06:10.777
> 
> 标签：asp.net, button, html-table

我有 asp.net 按钮、表格和按钮，如下所示：

```
<table style="width: 600px;">
    <tr>
        <td>
            <div style="float: right;">
                <asp:Button ID="_btn01" runat="server" Text="GO" />
                <table class="IHCommandButtonContainer" cellpadding="0" cellspacing="0">
                    <tr>
                        <td class="IHCommandButtonL"><asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="/Test/Images/btn_Search.gif" /></td>
                        <td class="IHCommandButtonM"><span>Search</span></td>
                        <td class="IHCommandButtonR"><img src="/Test/Images/btn_R.gif" /></td>
                    </tr>
                </table>
                <asp:Button ID="Button1" runat="server" Text="GO" />
            </div>
        </td>
    </tr>
</table> 
```

问题是我不能把它们放在同一行。它们如下所示：

![在此处输入图像描述](../Images/77800c47fe3b685aea77e8edefca9dcf.png)

我的CSS如下：

```
<style type="text/css">
    .IHCommandButtonContainer   { height: 21px; border: 0px; display: inline-block; cursor: pointer; margin: 0px; padding: 0px; border-spacing: 0px; border-collapse: collapse; }
    .IHCommandButtonL           { width: 22px; height: 21px; }
    .IHCommandButtonL   input   { width: 22px; height: 21px; }
    .IHCommandButtonM           { background-image: url(/Test/Images/btn_M.gif); height: 21px; font-size: 9pt; font-family: Sans-serif, Arial, Dotum; }
    .IHCommandButtonM   span    { margin: 0px 2px 0px 0px; }
    .IHCommandButtonM_          { background-image: url(/Test/Images/btn_M_.gif); height: 21px; font-size: 9pt; font-family: Sans-serif, Arial, Dotum; }
    .IHCommandButtonM_  span    { margin: 0px 2px 0px 0px; }
    .IHCommandButtonR           { width: 3px; height: 21px; }
    .IHCommandButtonR   img     { width: 3px; height: 21px; cursor: pointer; }
</style> 
```

我怎样才能把它们放在同一行？像 2 个 GO 按钮在同一行，但中间的表格比它们高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:37:55.780

您的 css 中的用户“垂直对齐”属性。将值设置为“中间”。

干杯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T08:43:35.080

垂直对齐是正确的答案，尽管我反对使用“开发人员工具”......诀窍是了解你在做什么......

这会帮助你： http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

请注意，将按钮放在“显示：内联块”中将帮助您轻松解决此问题！

# actionscript-3 - 支持Flash游戏中的多种分辨率

> ID：12335746
> 
> 赞同：3
> 
> 时间：2012-09-09T01:06:51.107
> 
> 标签：actionscript-3, flash, resolution

我正在开发一个带有几个 GUI 组件的小 Flash 游戏。我在想出一个可以支持最小规格 768x1024 和最大规格 1200 x 1920 的好设计时遇到了一些麻烦。

我的设计示例：我有一个 List 组件，它紧贴右上角。当浏览器调整大小时，我将组件滑过，使其始终与浏览器边缘保持 5 像素。一旦舞台达到最小尺寸（宽度为 1024），我将停止滑动 GUI，否则它将开始与左侧的其他 GUI 重叠。这似乎与 Farmville 和其他流行的 Flash 游戏处理其 GUI 的方式类似（它们在所有分辨率下保持相同的比例，并且只翻译它们以保持它们居中等等）

如果我知道最小规格总是 768x1024，那么我可以处理它，但问题是这种情况很少发生。似乎 url 栏和其他浏览器菜单切入了您的高度空间。此外，当我运行 Ubuntu（我的版本在侧面有菜单栏）时，我的舞台失去了一些宽度。我猜底部的窗口菜单栏也切入了浏览器的高度空间。这最终会削减我的 GUI 的一部分，并且会使游戏无法玩。

我相信我只能在全尺寸模式下真正期待 768x1024。

我的问题是： **什么是安全的最小分辨率规格，包括 windows/ubuntu 菜单栏和浏览器菜单栏将占用什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:24:55.547

没有安全的最小尺寸。一些用户有 6 个栏（收藏夹、雅虎、谷歌、stumble、+2 间谍软件）。

您可以做的是将您的 Flash 动画调整为 100% 的 div 并为此 div 设置一个 min-with min-height。这样，用户会看到他们需要将窗口放大。

分辨率取决于您的目标受众。你想让用户在上网本上玩吗？只需使用典型的上网本分辨率检查您的游戏即可。

你应该看看[http://www.greensock.com/liquidstage/](http://www.greensock.com/liquidstage/)这是你需要的。Greensock api 很棒。

我认为 1000x600 是一个不错的选择。

我们使用宽度 x 高度，因此您的 768x1024 会很高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:26:41.913

安全区域因浏览器/操作系统而异：http:
[//designerstoolbox.com/designresources/safearea/](http://designerstoolbox.com/designresources/safearea/)

回到过去（当全 Flash 网站流行时），处理这个问题的常用方法是，正如 bokan 所说，让您的 SWF 始终填满浏览器的视口，除非视口小于某个限制，然后显示滚动条. [swffit](http://swffit.millermedeiros.com/)是一个非常流行的脚本来帮助解决这个问题。典型的最小安全区域过去约为 990x600（以支持 1024x768）。

不过，作为一款游戏，我建议定义游戏可玩的最小区域，如果您检测到较小的视口，则要求用户[全屏](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#displayState)（我不会在任何游戏中依赖滚动条，除非它是一个超级 -酷视差 html5 游戏，当然 :P)。

# c++ - C++ - 数组的初始化器太多

> ID：12335747
> 
> 赞同：11
> 
> 时间：2012-09-09T01:07:05.463
> 
> 标签：c++, c, multidimensional-array, initialization

我做了一个这样的数组，但它一直说我有太多的初始化程序。我该如何解决这个错误？

```
 int people[6][9] = {{0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0},
                        {0,0,0,0,0,0}}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T01:09:21.250

这里的问题是您在数组声明部分交换了行/列索引，因此编译器感到困惑。

通常在声明多维数组时，第一个索引用于行，第二个用于列。

此表单应修复它：

```
 int people[9][6] = {{0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0},
                    {0,0,0,0,0,0}}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T01:26:23.217

```
int people[6][9] =
{
    {0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0},
}; 
```

Arrays in C are in the order rows then columns, so there are 6 rows of 9 integers, not 9 rows of 6 integers in the initializer for the array you defined.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T01:10:39.950

您在索引中混合了 6 和 9。

# php - max(id) 和限制 10，但在不同的地方使用它们

> ID：12335755
> 
> 赞同：0
> 
> 时间：2012-09-09T01:09:22.760
> 
> 标签：php, mysql, arrays, limit, fetch

我有两个表格，帖子和部分。我想获得最后 10 个帖子 WHERE section = 1，但在不同的地方使用 10 个结果。我做了一个功能：

```
 function sectionposts($section_id){
mysql_set_charset('utf8');
$maxpost1 ="SELECT max(id) from posts WHERE section_id = $section_id ORDER BY ID DESC LIMIT 20";
$maxpost12 =mysql_query($maxpost1);
while ($maxpost_rows = mysql_fetch_array($maxpost12 ,MYSQL_BOTH)){
$maxpost2 = $maxpost_rows[0];
}
$query = "SELECT * FROM posts WHERE id = $maxpost2";
$query2 = mysql_query($query);
return $query2;
}
$query2 = sectionposts(6);
while ($rows = mysql_fetch_array($query2)){
echo $rows['title'] . "<br/>" . "<br/>";
echo $rows['id'] . "<br/>" . "<br/>";
echo $rows['image_section'] . "<br/>";
echo $rows['subject'] . "<br/>";
echo $rows['image_post'] . "<br/>";
} 
```

怎么能把这十个结果用在不同的地方，从一到十排列。

这是旧案例，我解决了，但我发现了另一个问题，如果客户删除了一个 id = 800 的帖子“所以 DB 中没有 id = 800”，所以当我得到最大 id 减去 $NUM从中，这个操作必须等于 id = 800，所以我这里有一个编程错误，我该如何处理这样的事情。

```
 function getmax_id_with_minus ($minus){
    mysql_set_charset('utf8');
    $maxid ="SELECT max(id) FROM posts";
    $maxid1 =mysql_query($maxid);
        while ($maxid_row = mysql_fetch_array($maxid1)){
                $maxid_id = $maxid_row['0'];
                $maxid_minus = $maxid_id - $minus;
                }
    $selectedpost1 = "SELECT * FROM posts WHERE id = $maxid_minus";
    $query_selectedpost =mysql_query($selectedpost1);
        return ($query_selectedpost);

}
<?php 
$ss = getmax_id_with_minus (8);
while ($rows = mysql_fetch_assoc($ss)){
$main_post_1 = $rows;
?> 
```

无论如何“真的”再次感谢:)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:32:19.243

试试这个，为自己节省很多无意义的代码：

```
$sql = "SELECT * FROM posts WHERE section_id=$section_id HAVING bar=MAX(bar);"
$result = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_assoc($result);
echo ...;
echo ...; 
```

该`having`子句使您可以在单个操作中找到最大记录，而没有两个查询版本的固有竞争性。除非您允许具有相同 ID 的多条记录污染您的表，否则删除 while() 循环也会使事情变得更加清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:16:32.957

似乎您想将它们存储在数组中。

```
 $posts = array(); //put this before the while loop. 
 $posts[] = $row; //put this in the while loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T02:45:17.250

关于发布代码的一些想法：

*   首先，您应该停止使用`mysql_`函数，因为它们已被[弃用](http://www.deprecatedphp.com/mysql)并且容易受到 SQL 注入的攻击。

> ```
> $maxpost1 ="SELECT max(id) from posts WHERE section_id = $section_id ORDER BY ID DESC LIMIT 20"; 
> ```

*   当您`SELECT` `MAX`, `MIN`, `COUNT`, `AVG`... 只返回单行的函数时，您不需要 an`ORDER BY`或 a `LIMIT`。

*   鉴于您只要求`MAX(id)`，您可以通过组合查询来节省工作，如下所示：

> ```
> SELECT * FROM posts 
> WHERE id = (SELECT MAX(id) from posts WHERE section_id = $section_id) 
> ```

如果我理解你想要做什么（如果我错了，请纠正我），你的函数看起来像：

```
function sectionposts($section_id) {
    $link = mysqli_connect("localhost", "my_user", "my_password", "world");

    $stmt = mysqli_prepare($link, "SELECT title, id, image_section, subject, image_post FROM posts " 
        . "WHERE section_id = ? ORDER BY id DESC LIMIT 10");
    mysqli_stmt_bind_param($stmt, $section_id);
    return mysqli_query($link, $stmt)
}

$result = sectionposts(6);
while ($row = mysqli_fetch_assoc($result)) {
    echo $rows['title'] . "<br /><br />";
    echo $rows['id'] . "<br /><br />";
    echo $rows['image_section'] . "<br />";
    echo $rows['subject'] . "<br />";
    echo $rows['image_post'] . "<br />";
} 
```

# c# - 当我将一个类转换为它未实现的接口时，为什么没有编译器错误？

> ID：12335757
> 
> 赞同：14
> 
> 时间：2012-09-09T01:09:34.837
> 
> 标签：c#, c#-4.0, interface, casting, abstract-class

如果我尝试从类到接口的无效转换，那么编译器不会抱怨（错误发生在运行时）；但是，如果我尝试对抽象类进行类似的强制转换，它*确实会抱怨。*

```
class Program
{
    abstract class aBaz
    {
        public abstract int A { get; }
    }

    interface IBar
    {
        int B { get; }
    }

    class Foo
    {
        public int C { get; }
    }

    static void Main()
    {
        Foo foo = new Foo();

        // compiler error, as expected, since Foo doesn't inherit aBaz
        aBaz baz = (aBaz)foo;

        // no compiler error, even though Foo doesn't implement IBar
        IBar bar = (IBar)foo;
    }
} 
```

为什么编译器不拒绝从*Foo*到*IBar*的转换，当它（看似？）无效时？或者，换个问题，如果编译器允许对接口 IBar 进行这种“无效”*强制转换*，为什么它不允许对抽象类*aBaz*进行类似的“无效”强制转换？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T01:42:42.043

您需要了解 .Net 的继承系统才能明白为什么这样做是有意义的。在 .Net 中，一个类只能从一个基类继承，但可以实现任意数量的接口。

```
class Program
{
    abstract class aBaz
    {
        public abstract int A { get; }
    }

    interface IBar
    {
        int B { get; }
    }

    class Foo
    {
        public int C { get; }
    }

    class BarableFoo : Foo, IBar
    {
        public int C { get; }
    }

    static void Main()
    {
        // This is why the compiler doesn't error on the later cast
        Foo foo = new BarableFoo();

        // compiler error: aBaz is a class and the compiler knows that
        // Foo is not a _subclass_ of aBaz.
        aBaz baz = (aBaz)foo;

        // no compiler error: the class Foo does not implement IBar, however at runtime
        // this instance, "foo", might be a subclass of Foo that _implements_ IBar.
        // This is perfectly valid, and succeeds at runtime.
        IBar bar = (IBar)foo;

        // On the other hand...
        foo = new Foo();

        // This fails at runtime as expected. 
        bar = (IBar)foo;
    }

} 
```

在问题中极其简单的原始示例中，编译器似乎可以检测到 foo 的这个实例永远不会被转换为 IBar，但这更像是一个“很高兴”的警告，而不是语言正确性的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T01:12:28.970

强制转换的全部目的是抑制该编译器错误。
（例如，如果您知道这`foo`实际上是实现接口的子类型的实例）

如果编译器可以证明强制转换不可能成功，它仍然会报错。（例如，如果您转换为不在其层次结构中的*类）*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-09T03:57:30.140

并且为了表明编译器并不愚蠢，实际上存在强制转换在编译时失败的情况：如果编译器可以证明没有其他类可以从该类派生，它将在编译时无法转换为接口：

```
sealed class NoBar
{ 
} 

struct NoBarValue
{
}

IBar noBar = (IBar)(new NoBar()); // fails at compile time
IBar noBarValue = (IBar)(new NoBarValue()); // fails at compile time 
```

在第一种情况下 ( `NoBar`) 类是显式密封的（因此没有派生类可以实现 IFoo）并且编译器知道它不会实现`IBar`自身 - 因此可能在编译时失败。第二种情况 ( `NoBarValue`) 类似，唯一的区别是值类型 (struct) 是隐式密封的。

# ruby-on-rails - 我想为 ActiveRecord 创建“第二个”、“第三个”（可能最多“第九个”）自定义方法，并可能将更改推送（贡献）到 rails

> ID：12335761
> 
> 赞同：2
> 
> 时间：2012-09-09T01:10:04.463
> 
> 标签：ruby-on-rails, ruby, activerecord, open-source, customization

我从来没有向开源项目提交过任何东西，坦率地说，我不在乎人们对这些方法的看法。我喜欢“最后一个”和“第一个”方法，并希望将该概念扩展到“第二个”-“第九个”方法以进行抽样。

我如何创建自己的自定义方法，将这些方法移植到 ActiveRecord 上？

**目前正在 railscasts.com 观看 Ryan Bates 的截屏视频 #50

** 关于如何实现这一点的头脑风暴，我认为它可以循环遍历 :id 值（0、1、2、3、4...），直到找到下一条记录。然后“第三个”命令可以跳过第一个匹配项，直到找到第二个匹配项（Model.third），依此类推。哈现在我想知道 .first 是否使用相同的方法。我想我会检查源代码。:)

** 当我在这条路上冒险时，我会留下一个相关链接列表（我不能列出超过 2 个链接，除非我得到 10 分。给我一个，这样我就可以添加更多）

[http://railscasts.com/episodes/50-contributing-to-rails](http://railscasts.com/episodes/50-contributing-to-rails)

[http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html](http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:35:52.573

它实际上比您想象的要复杂一些，因为`first`它们`last`不是单个类上的单个方法，而是在 ActiveRecord 中的许多不同类上实现的。

例如，

*   您可以使用`Post.first`, 在这种情况下您正在调用`ActiveRecord::Base#first`.

*   您可以使用`Post.where(:submitted => true).first`, 在这种情况下您正在调用`ActiveRecord::Relation#first`

*   您可以使用`Post.comments.first`, 在这种情况下您正在调用`ActiveRecord::Associations::CollectionAssociation#first`

看看这是怎么回事？为了使 、 等具有类似的行为`second`，`third`您需要在多个地方实现这些方法，而不仅仅是一个。

但只是为了让您开始，以下是您可以实施的方法`ActiveRecord::Relation#second`：

```
class ActiveRecord::Relation
  def second
    if loaded?
      @records[1]
    else
      @second ||= limit(2).to_a[1]
    end
  end
end 
```

例如，在初始化程序中执行这段代码，突然间你调用`second`了所有的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:23:59.187

如果您的态度是“坦率地说，不在乎 Rails 的人们对这些方法的看法”，那么我不会指望您将某些东西投入到 Rails 核心中的运气，但是说欢迎任何人从 github 中提取源代码和进行自己的修改。

同样，您可以自由地向 Rails 团队提交“拉取请求”，以使您将更改提交回 Rails，但是它们是否合并回 Rails 由 Rails 的维护者决定。

开始在 github 上克隆项目，自己进行更改，然后提交拉取请求。这里有明确的说明[http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html](http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html)（特别是第 5 节）

# c++ - 成员函数的部分特化

> ID：12335762
> 
> 赞同：5
> 
> 时间：2012-09-09T01:10:09.980
> 
> 标签：c++, templates, template-specialization, partial-specialization

> **可能重复：**
> [部分模板专业化的“不完整类型的无效使用”错误](https://stackoverflow.com/questions/165101/invalid-use-of-incomplete-type-error-with-partial-template-specialization)

为什么我可以这样做：

```
template <typename T>
struct A
{
    void foo(int);
};

template <>
void A<int>::foo(int)
{
} 
```

但不是这个：

```
template <typename> struct C {};

template <typename T>
struct A
{
    void foo(int);
};

template <typename T>
void A<C<T> >::foo(int)
{
} 
```

对于第二种情况，GCC 给出以下错误：

```
test.cpp:10:23: error: invalid use of incomplete type 'struct A<C<T> >'
test.cpp:4:8: error: declaration of 'struct A<C<T> >' 
```

**编辑**：

在解释为什么不允许第二个示例时，还请考虑使成员函数也成为模板对哪个示例有效和哪个无效没有影响。也就是说，这仍然有效：

```
template <typename T>
struct A
{
    template <typename U>
    void foo(U);
};

template <>
template <typename U>
void A<int>::foo(U)
{
} 
```

但这不会：

```
template <typename> struct C {};

template <typename T>
struct A
{
    template <typename U>
    void foo(U);
};

template <typename T>
template <typename U>
void A<C<T> >::foo(U)
{
} 
```

所以原因不能是函数模板只能完全特化，因为第三个示例不是完全特化（模板参数`U`仍然存在），但它仍然有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T01:19:32.527

Function templates can only be specialised completely, not partially.

You're using the fact that member functions of class templates are themselves function templates, so this rule still applies.

* * *

As for your edit: The following things can be explicitly (i.e. completely) specialized, from 14.7.3/1:

> An explicit specialization of any of the following:
> 
> — function template
> 
> — class template
> 
> — **member function of a class template**
> 
> — static data member of a class template
> 
> — member class of a class template
> 
> — member enumeration of a class template
> 
> — member class template of a class or class template
> 
> — **member function template of a class or class template**
> 
> can be declared by a declaration introduced by `template<>;`

I've emphasized the two statements that apply to your case. Absent any other explicit provisions, those entities can *not* be specialized partially.

# jquery - 格式化电子邮件输入字段

> ID：12335767
> 
> 赞同：0
> 
> 时间：2012-09-09T01:11:37.347
> 
> 标签：jquery, html, css

我试图格式化我的输入字段以帮助用户更好地理解他们必须在输入字段中写什么。

我想要做的是在他们开始输入时显示“example@domain.com”，并且在他们输入时@将一直保留到他们输入它并且与域相同。我通过使用 jQuery Masked Input Plugin (http://digitalbush.com/projects/masked-input-plugin/) 在我的输入类型 tel 上实现了这一点。

有没有人有这个插件或者我怎么能做到这一点？

谢谢一群人！:)

# opencart - 在 Opencart 1.5.2.1 中查看顶部时要隐藏的类别

> ID：12335772
> 
> 赞同：-2
> 
> 时间：2012-09-09T01:12:38.990
> 
> 标签：opencart

我在 Opencart 1.5.2.1 中需要一些帮助。我想在左栏中创建一个类别。

我想放入工具栏（在类别顶部）。当我放在顶部时，iy 在顶部，但它也在左侧的菜单中。

我希望当我放在顶部时，我想成为仅在顶部的那个类别并从左侧隐藏在菜单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:54:43.943

我的理解是：您只想在左侧菜单上显示不在顶部菜单中的那些类别。

没有通过管理员执行此操作的默认功能。您只能为类别设置顶部选项打开或关闭。您需要`getCategorisNotOnTop()`在目录/类别模型中编写一个新函数（例如：）以在模块/类别控制器中使用并调用它而不是默认的 getCategories() 函数。

喜欢：改变

```
$categories = $this->model_catalog_category->getCategories(0); 
```

至：

```
$categories = $this->model_catalog_category->getCategorisNotOnTop(0); 
```

如果您需要更多帮助，请告诉我。

谢谢。

# c# - 如何访问所有设置 Show Acquisition Wizard

> ID：12335778
> 
> 赞同：2
> 
> 时间：2012-09-09T01:14:36.660
> 
> 标签：c#, image, wia, image-scanner

我有馈线扫描仪，所以我使用此代码

```
 device=w.ShowSelectDevice(WiaDeviceType.ScannerDeviceType,true,false);
    commondialog.ShowAcquisitionWizard(device); 
```

并成功扫描了扫描仪中的所有图像，但我想访问向导存储的这些图像的路径以获取这些图像并存储在数据库中，我该如何获取路径`c#`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:17:32.150

我使用了扫描 dll，这是一个很棒的 dll

[扫描sdk](http://bytescoutscansdk.codeplex.com/)

# asp.net - asp.net 下拉列表静态列表项

> ID：12335782
> 
> 赞同：3
> 
> 时间：2012-09-09T01:16:13.537
> 
> 标签：asp.net

我正在使用 c# 在一个 asp.net 网站上工作。我有一个包含来自 sql 数据库的数据的下拉列表。下拉列表位于网格视图上。

下拉列表位于edititemtemplate 上的模板字段内。

数据被加载到下拉列表中，一旦按下链接按钮，下拉列表就可以进行编辑，并带有相应的值，......以及来自列中的所有其他值数据库在那里加载（这最后一件事是我不想要的）。

下拉列表绑定在 GridView1_RowDataBound 事件上：

```
Control ctrlgridMonedaEdit = e.Row.FindControl("gridMonedaEdit");
            if (ctrlgridMonedaEdit != null)
            {
                DropDownList dd = ctrlgridMonedaEdit as DropDownList;
                //more code here
                dd.DataSource = dt;
                dd.DataValueField = "Moneda";
                dd.DataTextField = "Moneda";
                dd.DataBind();
                DataRowView rowView = (DataRowView)e.Row.DataItem;
                string tempDate = rowView["Moneda"].ToString();
                dd.SelectedIndex = dd.Items.IndexOf(dd.Items.FindByText(tempDate));
                sqlConn.Close();
            } 
```

我想要的是启用下拉列表进行编辑时必须加载的 3 个值。并且相应的值保持选中状态。我试过这个：

```
<EditItemTemplate>
      <asp:DropDownList Width="90" runat="server" id="gridMonedaEdit" AutoPostBack="true" Enabled ="true"   >
         <asp:ListItem Value="MONEDA"> MONEDA </asp:ListItem>
                  <asp:ListItem Value="USD"> USD </asp:ListItem>
                  <asp:ListItem Value="MONEDA/USD"> MONEDA/USD </asp:ListItem>
      </asp:DropDownList>                          
</EditItemTemplate> 
```

但是这些值没有显示出来。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:05:03.830

`dataBind()`在调用您的下拉列表后，我会在后面的代码中插入静态列表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T09:41:09.670

您可以使用 AppendDataBoundItems 属性告诉 ASP.NET DataSource 应该附加到“静态”项。

```
 <asp:DropDownList id="gridMonedaEdit" AppendDataBoundItems="True"    runat="server"> 
```

# c - C整数溢出

> ID：12335784
> 
> 赞同：1
> 
> 时间：2012-09-09T01:16:39.057
> 
> 标签：c, integer, overflow

我在 C 中使用整数，试图更多地探索溢出发生的时间和方式。

我注意到当我添加两个正数时，总和溢出，我总是得到一个负数。

另一方面，如果我将两个负数相加，其和溢出，我总是得到一个正数（包括 0）。

我做了一些实验，但我想知道这是否适用于每种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T01:49:25.217

整数溢出是 C 中未定义的行为。

C 表示一个涉及整数的表达式*溢出*，如果它在通常的算术转换之后的结果是有符号类型的并且不能以结果的类型表示。赋值和强制转换表达式是一个例外，因为它们由整数转换决定。

无符号类型的表达式不能溢出，它们会换行，例如`0U - 1`is `UINT_MAX`。

例子：

```
INT_MAX + 1    // integer overflow
UINT_MAX + 1   // no overflow, the resulting type is unsigned
(unsigned char) INT_MAX // no overflow, integer conversion occurs 
```

永远不要让任何整数表达式溢出，现代编译器（如`gcc`）利用整数溢出作为未定义行为来执行各种类型的优化。

例如：

```
a - 10 < 20 
```

when`a`是`int`提升后的类型，表达式在`gcc`（启用优化时）减少为：

```
a < 30 
```

它利用表达式是未定义的行为，当`a`在范围内`INT_MIN + 10 - 1`时`INT_MIN`。

无法在`a`is时进行此优化，`unsigned int`因为如果`a`is `0`，则`a - 10`必须将其评估为`UINT_MAX - 9`（没有未定义的行为）。优化`a - 10 < 20`to`a < 30`将导致与所需的结果不同的结果 when `a`is `0`to `9`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T01:19:53.680

有符号整数的溢出在 C 中是未定义的行为，因此无法保证。

也就是说，环绕或算术模 2 ^N是类型中`N`的位数，这是一种常见行为。对于这种行为，实际上如果总和溢出，则结果具有操作数的相反符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T01:21:32.880

形式上，有符号算术溢出的行为是未定义的；任何事情都可能发生，而且它是“正确的”。这与完全定义溢出的无符号算术形成对比。

在实践中，许多较旧的编译器使用有符号算术，如您所描述的那样溢出。然而，现代 GCC 正在改变它的工作方式，你会非常不明智地依赖这种行为。当编译代码的环境中的任何内容发生变化时，它可能随时发生变化——编译器、平台、...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T14:49:11.237

C中的溢出是一个可怕的混乱。

*   无符号算术或转换为无符号类型期间的溢出导致模 2 ^(n换行)
*   转换为有符号类型期间的溢出是实现定义的，大多数实现将模 2 ^n包装，但有些可能不会。
*   有符号算术期间的溢出是未定义的行为，根据标准，任何事情都可能发生。在实践中，有时它会做你不想做的事情，有时它会在 yoir 代码中导致奇怪的问题，因为编译器会优化重要的测试。

更糟糕的是这与整数提升的相互作用。多亏了提升，当看起来你正在做无符号算术时，你可以做有符号算术。例如考虑以下代码

```
uint16_t a = 65535;
uint16_t b = a * a; 
```

在具有 16 位 int 的系统上，此代码是明确定义的。然而，在具有 32 位 int 的系统上，乘法将作为有符号 int 进行，由此产生的溢出将是未定义的行为！

# c# - 组合多头列表

> ID：12335786
> 
> 赞同：0
> 
> 时间：2012-09-09T01:16:54.020
> 
> 标签：c#

假设我有一个有点像这样的对象模型：

```
public class MyModel
{
    public List<long> TotalItems { get; set; }
    public List<long> ItemsApples { get; set; }
    public List<long> ItemsOranges { get; set; }
    public List<long> ItemsPeaches { get; set; } 

    public void CombineItems()
    {

    }
} 
```

现在实际上，模型中有大约 14 个多头列表。组合这些列表的最佳方法是什么，以便 TotalItems 是所有其他列表组合的列表。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:18:11.280

创建一个新的`List<long>`，然后调用`AddRange()`以将每个现有列表添加到其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T01:29:49.880

```
using System.Collections.Generic;
using System.Linq;

public class MyModel
{
    public List<long> TotalItems
    {
        get
        {
            return ItemsApples.Concat(ItemsOranges).Concat(ItemsPeaches).ToList(); // all lists conbined, including duplicates
            //return ItemsApples.Union(ItemsOranges).Union(ItemsPeaches).ToList(); // set of all items
        }
    }

    public List<long> ItemsApples { get; set; }

    public List<long> ItemsOranges { get; set; }

    public List<long> ItemsPeaches { get; set; }

    public void CombineItems()
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T01:42:13.773

除非您一次需要所有项目（而不是枚举它们），否则我会做这样的事情：

```
public IEnumerable<long> TotalItems 
{
    get 
    {
        foreach(var i in ItemsApples) 
            yield return i;
        foreach(var i in ItemsOranges)
            yield return i;
        foreach(var i in ItemsPeaches)
            yield return i;
    }
} 
```

* * *

从那里开始，如果除了添加或删除 long 列表之外，您不想再维护该类，您可以通过反射获得一些乐趣：

```
public IEnumerable<long> TotalItems
{
    get
    {
        // this automatically discovers properties of type List<long>
        // and grabs their values
        var properties = from property in GetType().GetProperties()
                    where typeof(List<long>).IsAssignableFrom(property.PropertyType)
                    select (IEnumerable<long>)property.GetValue(this, null);

        foreach (var property in properties)
        {
            foreach (var value in property)
                yield return value;
        }
    }
} 
```

# macos - 在 Mac 上使用 iTerm2，如何在命令行上从光标中删除一个单词？

> ID：12335787
> 
> 赞同：38
> 
> 时间：2012-09-09T01:17:04.080
> 
> 标签：macos, bash, special-characters, typing, iterm2

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-06-09T07:55:39.317

`Preferences`→ `Profile`→`Keys`添加以下快捷键：

* * *

`⌥</kbd>`←</kbd> Send Escape Sequence Esc+ b``

`⌥</kbd>`→</kbd> Send Escape Sequence Esc+ f``

`⌘</kbd>`←</kbd> Send Escape Sequence Esc+ [H``

`⌘</kbd>`→</kbd> Send Escape Sequence Esc+ [F``

`⌘</kbd>`←Delete` Send Hex Code 0x18 0x7f (add `bindkey "^X\\x7f" backward-kill-line` to `.zshrc` if you use zShell)`

`⌥</kbd>`←Delete` Send Hex Code 0x1B 0x08`

`⌘</kbd>`Del→</kbd> Send Hex Code 0x0b``

`⌥</kbd>`Del→</kbd> Send Escape Sequence d``

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-09T01:36:23.170

我手边没有mac，但理论上 ESC d 应该和 ALT-d 做同样的事情。

注意：这意味着按 ESC，释放它，然后按 d。看，没有关键和弦。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-24T13:22:18.447

只是为了添加到 Alexsander 的答案中，复制此行为的最简单方法是在 Preferences->Profiles->Keys 屏幕中选择“Left option key 作为 +Esc”选项。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-12-28T06:30:16.133

您可以为其添加快捷方式，转到“首选项”→“配置文件”→“键”，然后单击“+”添加自定义快捷方式，并添加：

[![在此处输入图像描述](../Images/2a9c397dff91f80287ae525ebfed6eab.png)](https://i.stack.imgur.com/Gusw9.png)

现在您应该可以通过单击删除一个单词`⌥</kbd> + `d`.`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-19T12:32:58.603

您可以按照[本文](https://coderwall.com/p/ds2dha/word-line-deletion-and-navigation-shortcuts-in-iterm2)在 iterm2 中设置键绑定。这个对我有用。十六进制代码...
删除一个单词：0x17。
删除一行：0x15。

[![在此处输入图像描述](../Images/a81efb03334ae1f77df7d82a915e35c8.png)](https://i.stack.imgur.com/cr2W4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-01T08:57:00.570

`ctrl+d`在 iTerm2 中`irb`对我来说是向前删除。`iex`但由于我想在小键盘上使用常规的 del 键，所以我寻找了别的东西。然后我找到了一个与 ctrl+something 按键对应的十六进制代码列表：4是数字，数字是4。[![iTerm2 Del 键映射](../Images/4ff37d0c26b83876cf77ec8fda8286cf.png)](https://i.stack.imgur.com/TwvsS.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-05T14:02:38.633

[maxbellec 的](https://stackoverflow.com/users/3218806/maxbellec)回答真的很有帮助，我只是补充一下：

> ⌘← 发送转义序列 Esc+ [H

> ⌘→ 发送转义序列 Esc+ [F

没有为我做伎俩。首先，这些快捷方式已在`Preferences -> Keys -> Key Bindings`其他操作快捷方式（下一个/上一个选项卡）中配置。但是将这些快捷方式更改为其他组合也不起作用。所以，我添加了：

> bindkey "^[[F" 行尾

> bindkey "^[[H" 行首

到`.zshrc`，它解决了它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-08T10:11:57.230

惊讶地没有人提到这个，它对我有用：

设置 -> 配置文件 -> 默认（或其他） -> 按键 -> 常规 -> 左选项键：从 切换`Normal`到`Esc+`。

# django - Misunderstanding the cycle tag in Django

> ID：12335790
> 
> 赞同：1
> 
> 时间：2012-09-09T01:17:58.517
> 
> 标签：django, django-templates, cycle

I am not sure whether I have discovered a bug, have my system misconfigured, or am just misunderstanding the {% cycle %} template tag in Django.

The manual provides the following sample code:

```
{% cycle 'row1' 'row2' as rowcolors silent %}{# no value here #}
{% for o in some_list %}
    <tr class="{% cycle rowcolors %}">{# first value will be "row1" #}
        ...
    </tr>
{% endfor %} 
```

It clearly says that the first cycle declaration will output nothing, and the subsequent call will be the first iteration.

I am having the following issues: firstly, the second call outputs 'row2', which would be expected on the second call. Secondly, the subsequent {% cycle rowcolors %} calls don't output anything either!

Am I completely misunderstanding something, or does the tag not work as specified?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:42:17.523

据我所知，代码是循环函数的文档字符串[与实际文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#cycle)中的代码示例不同。您应该使用`{{ rowcolors }}`来显示循环文本。

> 其次，随后的 {% cycle rowcolors %} 调用也不输出任何内容！

从文档中：

> 在循环定义中使用静默关键字时，静默将自动应用于循环标记的所有后续使用。在中，即使对 {% cycle %} 的第二次调用没有指定静默，以下模板也不会输出任何内容：

该段后面的代码示例似乎与您当前的问题相似。

# jquery - 使用循环优化 Jquery

> ID：12335799
> 
> 赞同：4
> 
> 时间：2012-09-09T01:19:57.230
> 
> 标签：jquery, loops

**我有这个代码：**

```
 $('.counter_d').mouseover(function() {
                   $('#description').html('Counter');
             });
            $('.selector_d').mouseover(function() {
                   $('#description').html('Selector');
             });
             $('.date_d').mouseover(function() {
                   $('#description').html('Date');
             }); 
```

还有更多，但我认为文件可以更小，甚至可以使用循环重复使用，但我无法将描述（HTML 方法）与选择器绑定。

**我想使用这样的东西：**

```
 var selectors=['.counter_d','.selector_d','.date_d'];
              var description=['Counter', 'Selector', 'Date'];

              for(var i=0; i<selectors.length; i++)
                 $(selectors[i]).mouseover(function() {
                   $('#description').html(description[i]);
                 }); 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T01:21:55.877

```
var selectors = {
    '.counter_d': 'Counter',
    '.selector_d': 'Selector',
    '.date_d': 'Date'
};

$.each(selectors, function (key, value) {
    $(key).mouseover(function () {
        $("#description").html(value);
    });
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/bS28q/](http://jsfiddle.net/andrewwhitaker/bS28q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:37:13.690

问题是在执行 mouseover 回调时变量`i`被分配给 3。
因为`description[3]`没有`undefined`分配新的 HTML。
[Fiddle](http://jsfiddle.net/XrGx9/1/) *使您的浏览器控制台能够读取 console.log！*

我认为一个更优雅的解决方案是给 HTML 元素一个额外的属性`description`，并在 mouseover 回调中简单地做：

```
$('#description').html($(this).attr("description")); 
```

（你在上面的小提琴中看到它）

在我看来，您甚至可以以更优雅的方式选择所有元素并摆脱循环，因为 jQuery 会为您处理这个问题：

```
$(".counter_d, .selector_d, .date_d").mouseover(function() {
    $('#description').html($(this).attr("description"));
}); 
```

[更新的小提琴](http://jsfiddle.net/XrGx9/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T07:13:28.803

由于已经给出了正确的解决方案（[Andrew Whitaker 接受的答案](https://stackoverflow.com/a/12335810/548696)是我最喜欢的），我实际上会告诉你**你的代码有什么问题**（[yoshi 的答案](https://stackoverflow.com/a/12335883/548696)有一些线索，但没有详细解释）。

## 问题

问题是，即使`i`循环内的更改值在执行时`i`保持不变（与循环结束时相同`for`），但在执行事件处理程序时。

## 你的代码中真正发生了什么

证明看起来像这样（参见[jsfiddle](http://jsfiddle.net/awfrP/)）：

```
var selectors=['.counter_d','.selector_d','.date_d'];
var description=['Counter', 'Selector', 'Date'];

for(var i=0; i<selectors.length; i++)
    $(selectors[i]).mouseover(function() {
        $('#description').html(i); // i is always equal to 3
    });​ 
```

问题是事件处理程序`i`从外部范围使用，在处理程序执行时等于`3`. 因此，即使在`i`附加处理程序时变量具有您想要的值，该值也会在它们执行之前发生变化。

## 解决方案

为了解决这个问题，您可以稍微修改您的代码以使用匿名函数，这些函数通过传递正确的值来立即调用`i`：

```
var selectors=['.counter_d','.selector_d','.date_d'];
var description=['Counter', 'Selector', 'Date'];
for(var i=0; i<selectors.length; i++)
    (function(i){
        $(selectors[i]).mouseover(function() {
            // i is the same as when the outer function was called
            $('#description').html(description[i]);
        });
    })(i); // executing function by passing current i
​ 
```

为了证明它工作正常：http: [//jsfiddle.net/ZQ6PB/](http://jsfiddle.net/ZQ6PB/)

## 看更多

[循环内的 JavaScript 闭包 - 简单实用的示例](https://stackoverflow.com/a/750506/548696)，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T01:31:46.167

我会去做这样的事情：

```
var obj = {
    'a': 'content a',
    'b': 'content b',
    'c': 'content c'
};

$('.a,.b,.c').mouseover(function() {
    $('#d').html(obj[this.className]);
});​ 
```

[**演示**](http://jsfiddle.net/H7rNy/)

不太喜欢循环的想法，因为它使它的可读性大大降低。

UPD：您始终可以为更多类扩展解决方案

```
var obj = {
    '.a': 'content a',
    '.b': 'content b',
    '.c': 'content c'
};

var selector = Object.keys(obj).join(',');
$(selector).mouseover(function() {
    $('#d').html(obj['.' + this.className]);
});​ 
```

[**演示**](http://jsfiddle.net/H7rNy/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T01:35:01.030

看起来你的选择器都以 _d 结尾。我们可以执行以下操作似乎是合理的。

```
$('[class$=_d]').mouseover(function(){
    var str = $(this).prop('class').split('_')[0];
    var desc = str.charAt(0).toUpperCase() + str.slice(1);
    $('#description').html(desc);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T02:11:49.253

如下构造 HTML（假设元素是跨度）...

```
<span class="d counter_d" data-desc="Counter">...</span>
<span class="d selector_d" data-desc="Selector">...</span>
<span class="d date_d" data-desc="Date">...</span> 
```

... 允许 javascript 像这样简单：

```
var $description = $("#description");

$(".d").mouseover(function() {
    $description.text($(this).data('desc'));
}); 
```

类名 '.counter_d'、'.selector_d'、'.date_d' 是多余的，可以删除，除非出于其他原因需要它们 - 例如。造型。

当然，如果你有数百个这样的元素，那么手动编写 HTML 会很痛苦。使用另一种方法会更好。

# python - 有没有办法用python制作视频？

> ID：12335801
> 
> 赞同：1
> 
> 时间：2012-09-09T01:20:14.697
> 
> 标签：python, video, encoding

我在 Windows XP 计算机上安装了 python 2.5。我想从图像列表中创建一个视频（最好是 AVI）。我还希望能够为视频添加声音。我尝试过 pymedia（不断崩溃）、pyFFMPEG（给定 DLL NOT FOUND ImportError）、pyglet（仅显示视频）和 OpenCV（不会安装）等模块。我想用 py2exe 将我的程序编译成 Windows 可执行文件，如果可以通过我的程序重新分发该程序并且可以在编译程序时打开它，我愿意使用外部程序。如果该程序与 PIL 或 pygame 图像兼容，那就太好了，但如果不是，我可能会解决这个问题。如果有一个这样的，或者如果你能帮助我让 PyFFMPEG 与 python 2.5 一起工作，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:45:14.813

不是 100% 清楚你所说的“制作视频”是什么意思。如果您说出于某种原因不喜欢使用 ffmpeg，您可以运行 use mencoder。

不管是什么，您都需要视频源和视频编码器来生成视频。当然，如果你愿意，你可以用 python 编写你自己的视频编码器，但这会让你在接下来的几个月里只能这样做，而且运行速度会非常慢。

您需要一个原始 YUV 输入来编码或另一个流来转码和“制作视频”。输入可以来自硬件或套接字上的文件或流。

# objective-c - 反转 animateWithDuration

> ID：12335815
> 
> 赞同：0
> 
> 时间：2012-09-09T01:23:19.063
> 
> 标签：objective-c, ios, animation

我有一个从 IBAction 向前运行的动画。在下一个 IBAction 中，我希望它反转。我看到 animateWithDuration 有一个自动反转功能，但我只希望它每次都走一条路。

我通过简单地将反向数组加载到视图中找到了一种解决方法，但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:03:02.210

`ivar`在调用动画的对象中保持动画的状态。

要么作为`BOOL`要么`NSInteger`。一个整数将允许两个以上的状态。

例如

```
BOOL animationState;

-(IBAction)actionWhichTriggers:(id)sender
{

if(animationState)
{
    animationState = NO;
    [self reverseAnimateMechanism];
}
else
{
   animationState = YES;
   [self forwardAnimateMechanism];
}

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T01:29:25.173

好问题！有些动画有对应的：比如旋转。那些有更优雅的方法。

# android - Use Asynctask as a private class or with broadcast receiver?

> ID：12335817
> 
> 赞同：1
> 
> 时间：2012-09-09T01:23:30.747
> 
> 标签：android, inheritance, android-asynctask, broadcastreceiver, inner-classes

I'm trying to make an application that uses Asynctask. Particularly, I want to make different http petitions with different JSON in different activities without the activity being frozen while the communication is done.

At first I thought to use asynctask as a private inner class in those activities, but I saw that they share a lot of code. So I thought to make a single class and play with broadcast receivers as I need to monitorize when I receive the result of the http petition, and isn't good to interfere with activity directly in the onPostExecute while in a different class.

What I want to know is, what is more efficient and better practice. Make a class that has the shared code and extends asynctask, then doing inner classes for each activity that extends that one or make a single asynctask that sends broadcast and receive them with each activity when needed.

Excuse my poor english, if needed I'll try to specify more clearly.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T04:07:29.467

## 背景

> 我想知道的是，什么是更有效和更好的做法。创建一个具有共享代码并扩展 asynctask 的类，然后为每个扩展该类的活动执行内部类，或者创建一个发送广播并在需要时与每个活动一起接收它们的单个异步任务。

我不清楚为什么这些是您仅有的两个选择。创建一个`AsyncTask`，例如`JsonPetitionTask`，然后推送一个新`JsonPetitionTask.Data`对象。该对象将包含您的 URL、JSON 以及您需要的任何其他数据。

## 设置异步任务

像这样的东西：

```
public class JsonPetitionTask extends AsyncTask<JsonPetitionTask.Data, Integer, Boolean> {
    protected Boolean doInBackground(JsonPetitionTask.Data... args) {
        for (int i = 0; i < args.length; i++) {
            JsonPetitionTask.Data data = args[i];
            // Send your JSON; check for errors, and return false if needed.
            if (isCancelled()) break;
        }
        return true;
    }

    protected void onProgressUpdate(Integer... progress) {
        // Show progress?
    }

    protected void onPostExecute(Boolean result) {
        // result is your success true/false.
    }

    public static class Data {
        public String jsonContent;
        public String petitionUrl;

        public Data(String content, String url) {
            jsonContent = content;
            petitionUrl = url;
        }
    }
} 
```

## 调用 JsonPetitionTask

然后你可以这样称呼它：

```
JsonPetitionTask.Data data = new JsonPetitionTask.Data(myJSON, myURL);
new JsonPetitionTask().execute(data); 
```

瞧，您`AsyncTask`只使用了一个没有接收器的类来执行您的操作。

## 实现回调

现在，如果您想注册一个回调（特定于调用代码的要执行的东西），那就有点棘手了。~~如果这是您正在寻找的内容的一部分，我将很高兴编辑这篇文章并解释它。~~

要添加回调，我们可以使用[`Runnable`](http://developer.android.com/reference/java/lang/Runnable.html)该类在作业完成后执行一些代码。

首先，我们需要在`Data`内部类中添加一个新字段：

```
public Runnable callback; 
```

接下来，在我们调用之前`execute()`，我们需要为我们的`data`对象添加一个新的回调。

```
data.callback = new Runnable() {
    public void run() {
        // Whatever code you want to run on completion.
    }
}; 
```

第三，在`JsonPetitionTask`课堂上，我们需要一个要运行的东西的列表：

```
private ArrayList<Runnable> mRunnables = new ArrayList<Runnable>(); 
```

确保在循环的每次迭代中`doInBackground()`，您都执行`mRunnables.add(data.callback);`.

最后，在 中`onPostExecute()`，我们需要调用它：

```
protected void onPostExecute(Boolean result) {
    for (Runnable r : mRunnables)
        if (r != null) r.run();
} 
```

我确实意识到我没有发送`result`到`Runnable`，但是我不想实现一个新`Runnable`类型来处理它。如果你需要这个，我想这对你来说有点功课！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T11:31:10.843

The way I found the best is just simply create public class that extends AsyncTask and then you just override onPostExecute function in every activity you use it.

Example:

```
MyDataTask dataTask = new MyDataTask() //you can add your parameters in class constructor
        {
            @Override
            protected void onPostExecute(Object result) //replace Object with your result type
            {
                MyActivity.this.doStuff(result); //use result in current activity
            }
        }; 
```

you can also create some custom functions to set private variables in datatask

```
dataTask.AddParam("user", username);
dataTask.AddParam("pass", pass); 
```

and then just execute it with your args...

```
dataTask.execute(myArgs); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-02T09:46:54.190

我已将异步任务类用作单个类。对于每个 Web 服务调用，我都使用了唯一的 IntentFilter 来广播响应。将广播接收器放在每个班级中。你有完美的解决方案。它运作良好。

# php - NginX with FastCGI and WordPress in a subdirectory - "No input file specified"

> ID：12335822
> 
> 赞同：3
> 
> 时间：2012-09-09T01:24:21.300
> 
> 标签：php, wordpress, nginx, fastcgi

I'm trying to migrate a WordPress blog to a subdirectory of my website (i.e. example.com/blog/). Using NginX and FastCGI, I've managed to get the entire WordPress site working on port 8080, but as soon as I attempt to apply rules to place it in /blog, I get "No input file specified"

I think because I can get PHP and WordPress working, I can assume that there are no issues with my installation or the permissions of the relevant folders.

This is what my virtual host looks like (I am running a rails site at "/"):

```
 server {
    listen       80;
    server_name  example.com localhost;

    #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location /blog/ {
        root /home/deploy/www/blog.example.com/html;
        index index.php;
        try_files $uri $uri/ /blog/index.php;
    }

    location ~ \.php$ {
        root /home/deploy/www/blog.example.com/html;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location / {
        root   /home/deploy/www/example.com/public;
        passenger_enabled on;
        index  index.html index.htm;
    } 
```

I have also tried this configuration for the same result:

```
 location ~ ^/blog/.*(\.php)?$ {
           fastcgi_split_path_info ^(.+\.php)(.*)$;
           root   /home/deploy/www/blog.example.com/html;
           try_files $uri =404;
    #        fastcgi_split_path_info ^(/blog/.+\.php)(.*)$;

            #fastcgi_split_path_info ^(.+\.php)(/.+)$;
            #NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

            include fastcgi_params;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    #       fastcgi_intercept_errors on;
          fastcgi_pass 127.0.0.1:9000;
    } 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:31:56.007

你在使用多站点的 WordPress 吗？

我不清楚您的设置，但此列表中的教程肯定会对您有所帮助：[http ://rtcamp.com/wordpress-nginx/tutorial](http://rtcamp.com/wordpress-nginx/tutorial)

如果您可以分享更多详细信息，我可以更好地指导您。

8080从何而来？你使用 Nginx 和 Apache 吗？

“未指定输入文件”看起来像是与 PHP 文件位置不正确有关的错误...

尝试改变

`enter code here`fastcgi_index index.php；

至

```
try_files index.php blog/index.php 
```

假设“博客”是您移动 WordPress 的文件夹。

# wxwidgets - 想要 wxWidgets 内存泄漏异常

> ID：12335826
> 
> 赞同：0
> 
> 时间：2012-09-09T01:24:43.033
> 
> 标签：wxwidgets

我有一个 wxWidgets 应用程序 (wxApp)。我正在使用 Visual Studio 2010。

_CrtSetDbgFlag 在应用程序的 OnInit 方法中设置。

如果在退出时检测到内存泄漏，我希望应用程序抛出异常。我希望这可以通过直接修改它转储内存泄漏的 wxWidgets 来完成，但我更想知道是否有标准的方法来代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:28:06.157

wxWidgets 本身不会转储内存泄漏，您看到的转储是由 MSVC CRT 完成的。因此，无论您需要做什么，都应该在其水平上完成。`_CrtSetReportHook()`可能有用。

# trigger.io - trigger.io duplicate builders running simultaneously?

> ID：12335827
> 
> 赞同：0
> 
> 时间：2012-09-09T01:24:54.423
> 
> 标签：trigger.io

Not critical, but just wondering - when iterating thru builds it seems that sometimes more than one is running at the same time... here's a screen shot.

[![](../Images/0c9daeebe81bac8d5d3649c501f4efa6.png)](https://i.stack.imgur.com/ne6VQ.png)
[(source: [kimosabe.net](http://kimosabe.net/trigger-dup-runs.png))]

Closing the toolkit and reopening it fixes it. Just wondering why it happens.

Thanks.

# jquery - loading div on submit button to prevent double submit

> ID：12335830
> 
> 赞同：0
> 
> 时间：2012-09-09T01:26:14.987
> 
> 标签：jquery, asp.net

Background : my code uses master page which has frames inside and all the other navigation happens using frame and master page is used for menu purpose. On submit button click (on all screen) , want to disable page for any further user interference. For that master page has a div and on individual page following code is written

```
var loading = window.parent.document.getElementById('dvLoading');
$(loading).show(); 
```

Problem: i have one frame which has couple ajax tab, on clicking on individual tab , i would like to call same div to prevent user interference while tab navigation. for which following code is written

```
$(".ajax__tab_inner").click(function() {
     var loading = window.parent.document.getElementById('dvLoading');
     $(loading).show();
}); 
```

This works fine untill user clicks on currently active tab, which does not remove the loading div and it remains loaded/hanging state.

kindly suggest how to prevent div loading for active tab or any other way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:34:59.097

您应该检查单击的选项卡是否是当前选项卡，如果是，请取消其余代码。

这是这种方式的示例代码：

```
 $(".ajax__tab_inner").click(function() {
             // assuming that the active tab has a class called `active`
             if((this).hasClass('.active')) 
                 {
                     return false;
                 }
            var loading = window.parent.document.getElementById('dvLoading');
            $(loading).show();
        }); 
```

# ruby - How to find and click an object based on title?

> ID：12335832
> 
> 赞同：0
> 
> 时间：2012-09-09T01:26:36.313
> 
> 标签：ruby, mechanize, mechanize-ruby

I want to click a html object based on title

```
<a class="class_id" style="background: url(&quot;http://cdn.server.net/Img/openid/openid-logos.png?v=8&quot;) repeat scroll -1px -518px rgb(255, 255, 255);" href="javascript:openid.signin('google');" title="log in with Google"></a> 
```

but my code doesn't work

```
require 'rubygems'
require 'mechanize'

agent = Mechanize.new
page = agent.get('http://server.com/')
page = page.link_with(:text=>'log in').click
page = page.link_with(:title=>'log in with Google').click 
```

it returns `(eval):14:in 'block (2 levels) in links_with': undefined method 'title' for #<Mechanize::Page::Link:0x1f6aeb0> (NoMethodError)`

is there any way how to find and click an object using title?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:30:55.177

几个选项：

```
page.links.find{|l| 'log in with Google' == l.attributes[:title]} 
```

或者

```
page.link_with(:node => page.at('a[@title="log in with Google"]')) 
```

# php - 如果图片为空，如何显示要重复的图片？

> ID：12335846
> 
> 赞同：-1
> 
> 时间：2012-09-09T01:29:54.653
> 
> 标签：php, if-statement

我试图创建这个东西，如果它从数组中什么也得不到，它会显示一个默认图片，但它没有按照我想要的方式工作。它使用每个数组，但我想将每个数组分开。

```
 $result = mysql_query("SELECT * FROM `im_album` WHERE username = '".$user_data['username']."'  ");
$d_name = array();
$d_amount = array();
$d_cover = array();
while(($row =  mysql_fetch_assoc($result))) {
    $d_name[] = $row['name'];

    $d_mode[] = $row['mode'];
    $d_amount[] = $row['amount'];
    $d_cover[]= $row['cover'];
 }
$p_cover = implode($d_cover) ;
  if ( $p_cover == "") {
  $p_cover = "cpages/img/default_pic.jpg";
  }
  else
  {
  $p_cover= "userdata/".$user_data['username']."/profilepic/".$p_cover;
  }
<img  style="margin:2pt" src="<?php echo $p_cover ?>"  height="250" width="200"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:40:23.490

```
$result = mysql_query("SELECT * FROM `im_album` WHERE username = '".$user_data['username']."'  ");
while ($row =  mysql_fetch_assoc($result)) {
  $d_name = $row['name'];
  $d_mode = $row['mode'];
  $d_amount = $row['amount'];
  $d_cover = $row['cover'];
  if ( $d_cover == "") {
  $p_cover = "cpages/img/default_pic.jpg";
  }
  else
  {
  $p_cover= "userdata/".$user_data['username']."/profilepic/".$d_cover;
  }
  echo '<img  style="margin:2pt" src="'.$p_cover.'"  height="250" width="200"  />';
} 
```

# c++ - ubuntu 12.04中的openCV程序编译错误“libopencv_core.so.2.4：无法打开共享对象文件：没有这样的文件或目录”

> ID：12335848
> 
> 赞同：58
> 
> 时间：2012-09-09T01:30:15.780
> 
> 标签：c++, ubuntu, opencv, g++

我在 ubuntu 12.04 中编译并安装了 openCV 2.4.2。在`/usr/local/include`我可以看到目录`/usr/local/opencv`和`/usr/local/opencv2`.

这是我写的代码：

```
#include <cv.h>
#include <highgui.h>
#include <iostream>
using namespace cv;
using namespace std;
int main(int argc,char **argv)
{
   Mat image;
   image = imread(argv[1],1);

   if(argc != 2 || !image.data)
   {
       cout << "No image data\n";
       return -1;
   }

   namedWindow("Display Image",CV_WINDOW_AUTOSIZE);
   imshow("Display Image",image);
   waitKey(0);
   return 0;
} 
```

我使用这个命令行编译它：

```
g++ DisplayImage.cpp -o DisplayImage `pkg-config opencv --cflags --libs` 
```

没有编译时错误，但是当我尝试运行生成的二进制文件时，`/DisplayImage code.png`我收到以下错误消息：

```
./DisplayImage: error while loading shared libraries: libopencv_core.so.2.4: cannot open shared object file: No such file or directory 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-09T01:55:26.063

您还没有将共享库放在加载程序可以找到它的位置。查看`/usr/local/opencv`and`/usr/local/opencv2`文件夹，查看其中是否包含任何共享库（以 开头`lib`且通常以 结尾的文件`.so`）。当你找到它们时，创建一个名为的文件`/etc/ld.so.conf.d/opencv.conf`并将存储库的文件夹的路径写入其中，每行一个。

例如，如果库存储在下面，`/usr/local/opencv/libopencv_core.so.2.4`那么我会将其写入我的`opencv.conf`文件：

```
/usr/local/opencv/ 
```

然后运行

```
sudo ldconfig -v 
```

如果找不到库，请尝试运行

```
sudo updatedb && locate libopencv_core.so.2.4 
```

在一个壳里。`updatedb`如果您在编译 OpenCV 后重新启动，则无需运行。

参考：

关于 Linux 上的共享库：[http ://www.eyrie.org/~eagle/notes/rpath.html](http://www.eyrie.org/~eagle/notes/rpath.html)

关于添加 OpenCV 共享库： http: [//opencv.willowgarage.com/wiki/InstallGuide_Linux](http://opencv.willowgarage.com/wiki/InstallGuide_Linux)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-08T09:09:41.607

为了更清楚（并将其放在一起），我必须做上面提到的两件事。

1-创建一个文件`/etc/ld.so.conf.d/opencv.conf`并将存储您的opencv库的文件夹的路径写入其中。（由Cookyt回答）

`.so`2-在 LD_LIBRARY_PATH () 中包含 opencv 文件的路径

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/opencv/lib 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-07-20T23:24:15.447

使用以下命令行查找包含共享库 libopencv_core.so.2.4 的文件夹。

```
sudo find / -name "libopencv_core.so.2.4*" 
```

然后我得到了结果：

```
 /usr/local/lib/libopencv_core.so.2.4. 
```

创建一个名为 `/etc/ld.so.conf.d/opencv.conf` 的文件并将存储二进制文件的文件夹的路径写入其中。例如，我写入`/usr/local/lib/`了我的`opencv.conf`文件。运行命令行如下。

```
sudo ldconfig -v 
```

尝试再次运行该命令。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-06-28T06:10:50.733

Umair R 的回答主要是解决问题的正确举措，因为这个错误曾经是由 opencv 库和程序之间缺少链接引起的。所以需要指定 ld_libraty_path 配置。附言。通常的库路径应该是：

`export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib`

我已经尝试过了，效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-23T10:07:06.733

添加此链接：

```
/usr/local/lib/*.so.* 
```

总数为：

```
g++ -o main.out main.cpp -I /usr/local/include -I /usr/local/include/opencv -I /usr/local/include/opencv2 -L /usr/local/lib /usr/local/lib/*.so /usr/local/lib/*.so.* 
```

# python - 在 OS X 10.8.1 上设置 Python 和 Virtualenv？

> ID：12335856
> 
> 赞同：0
> 
> 时间：2012-09-09T01:32:44.787
> 
> 标签：python, macos, virtualenv, osx-mountain-lion, homebrew

我最近重新安装了我的 OS X，我的 python 设置也随之消失了。我不记得我之前是如何设置的，现在我遇到了很多麻烦。我按照本指南（http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/#python）直到建立符号链接的部分。（网页中的CTRL+F这个：“ln -s /usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/Current”）

当我输入“which python”时，它没有产生“/usr/local/bin/python”。相反，它给了我“/usr/bin/python”。

我究竟做错了什么？这太令人沮丧了！我该如何解决这个问题，或者是否有更好的分步教程允许我通过 Homebrew 安装 python，然后在该 python 安装之上安装 virtualenv？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:08:52.883

终于解决了！

PATH 变量有一个短路逻辑。它会记录每个变量（文件夹位置，如“/etc/paths”、“~/.profile”等）。当它在它正在查看的文件夹中找到您的命令（“python”）时，这就是终端为您提供的。

要解决我的问题，您必须将“/usr/local/bin”（自制 python 安装所在的位置）放在“/usr/bin”（默认 OS X python 安装所在的位置）之前。为此，请在终端中打开“/etc/paths”：

```
open /etc/paths 
```

这将在您的默认文本编辑器中打开“路径”文件。现在它应该看起来像这样：

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin 
```

由于该文件位于受保护的文件夹中，因此您无法直接对其进行编辑。当您编辑文件时，它会要求制作副本。

将副本保存到桌面，然后将“/usr/local/bin”移动到顶部，如下所示：

```
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin 
```

删除实际文件（“/etc/paths”）并从桌面复制您的重复文件。请务必删除副本上的 .txt 扩展名。如果您不确定如何执行此操作，请转到 Finder > 首选项 > 高级并选中显示所有文件扩展名。将文件重命名为“路径”

注销并重新登录以刷新它，您就完成了！

# javascript - 将 jQuery 事件应用于所有类元素？

> ID：12335859
> 
> 赞同：12
> 
> 时间：2012-09-09T01:33:22.903
> 
> 标签：javascript, jquery, mobile-safari, dom-events

我有以下代码，它允许运行 iOS 的用户在页面上移动一个`<div>`类`.drag`。这在有一个 的`.drag`情况下工作正常，但在有两个实例时无法工作。是否可以让代码找到所有的`<div>`，然后让它们可以拖动？

```
var drag = $(".drag")[0];
    xPos = drag.offsetWidth / 2;
    yPos = drag.offsetHeight / 2;
    drag.addEventListener("touchmove", function() {
        event.preventDefault();
        $(this).css({
        'left' : event.targetTouches[0].pageX - xPos + 'px', 
        'top' : event.targetTouches[0].pageY - yPos + 'px'
    });
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T01:36:47.880

使用 时`$(selector)[0]`，您将获得与选择器匹配的*第一个DOM 元素。*`.each()`改为将事件侦听器添加到与选择器匹配的*所有*元素：

```
$(".drag").each(function () {
    var drag = this;
    xPos = drag.offsetWidth / 2;
    yPos = drag.offsetHeight / 2;
    drag.addEventListener("touchmove", function() {
        event.preventDefault();
        $(this).css({
          'left' : event.targetTouches[0].pageX - xPos + 'px', 
          'top' : event.targetTouches[0].pageY - yPos + 'px'
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:36:32.607

是的，这是可能的。但是您使用的是 jQuery 选择器（可以选择并返回多个元素），然后立即展开它以返回第一个元素。您可以修改您的代码以在整个过程中使用 jQuery 函数并避免这种情况。

```
// an array of all elements with class "drag"
// each element is wrapped
var drag = $(".drag");

// selects all matching elements, but then references
// the first raw DOM element in the array
var drag = $(".drag")[0]; 
```

另一种看待它的方式：

```
var matches = $(".drag");

// each() executes a function for each matched element
matches.each(function () {
    var drag = this; // raw dom element

    // or, wrap to get jQuery object
    // var drag = $(this);
});​ 
```

正如我所提到的，您还可以在整个代码中使用 jQuery 函数。我看到的两个简单示例是 x/y 坐标计算和事件绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T01:47:35.410

首先，您通过使用声明您只需要第一个元素`[0]`。

其次，你应该使用jQuery的`on()`方法。这是我如何看待你的功能：

```
var drag = $(".drag");

drag.on("touchmove", function(event) {
    xPos = $(this).offsetWidth / 2;
    yPos = $(this).offsetHeight / 2;

    event.preventDefault(); // preventDefault is IE-specific, is it?  

    $(this).css({
        'left' : event.targetTouches[0].pageX - xPos + 'px', 
        'top' : event.targetTouches[0].pageY - yPos + 'px'
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-07T19:46:22.040

这对于大多数有经验的开发人员来说可能是显而易见的，但对于像我这样在让 jQuery 应用于多个元素时遇到困难的初级开发人员可能会有所帮助。

今天我了解到您必须确保在 div 本身*之外加载脚本。*

我错误地将脚本加载到*第*一个元素中，并想知道为什么 jQuery 函数没有应用于页面下方的另一个 div。

[屏幕截图显示父 <div> 内的 <script>](https://i.stack.imgur.com/bkAgv.png) ^ 我做错了

# c++ - C ++算法，如python的'groupby'

> ID：12335860
> 
> 赞同：16
> 
> 时间：2012-09-09T01:33:44.090
> 
> 标签：c++, boost, stl, c++11, containers

是否有任何类似于的 C++ 转换[`itertools.groupby()`](http://docs.python.org/library/itertools.html#itertools.groupby)？

当然，我可以轻松编写自己的代码，但我更喜欢利用惯用行为或从 STL 或`boost`.

```
#include <cstdlib>
#include <map>
#include <algorithm>
#include <string>
#include <vector>

struct foo
{
        int x;
        std::string y;
        float z;
};

bool lt_by_x(const foo &a, const foo &b)
{
        return a.x < b.x;
}

void list_by_x(const std::vector<foo> &foos, std::map<int, std::vector<foo> > &foos_by_x)
{
        /* ideas..? */
}

int main(int argc, const char *argv[])
{
        std::vector<foo> foos;
        std::map<int, std::vector<foo> > foos_by_x;

        std::vector<foo> sorted_foos;
        std::sort(foos.begin(), foos.end(), lt_by_x);
        list_by_x(sorted_foos, foos_by_x);

        return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T03:48:45.570

这并不能真正回答您的问题，但为了好玩，我实现了一个 group_by 迭代器。也许有人会发现它很有用：

```
#include <assert.h>
#include <iostream>
#include <set>
#include <sstream>
#include <string>
#include <vector>

using std::cout;
using std::cerr;
using std::multiset;
using std::ostringstream;
using std::pair;
using std::vector;

struct Foo
{
  int x;
  std::string y;
  float z;
};

struct FooX {
  typedef int value_type;
  value_type operator()(const Foo &f) const { return f.x; }
};

template <typename Iterator,typename KeyFunc>
struct GroupBy {
  typedef typename KeyFunc::value_type KeyValue;

  struct Range {
    Range(Iterator begin,Iterator end)
    : iter_pair(begin,end)
    {
    }

    Iterator begin() const { return iter_pair.first; }
    Iterator end() const { return iter_pair.second; }

    private:
      pair<Iterator,Iterator> iter_pair;
  };

  struct Group {
    KeyValue value;
    Range range;

    Group(KeyValue value,Range range)
    : value(value), range(range)
    {
    }
  };

  struct GroupIterator {
    typedef Group value_type;

    GroupIterator(Iterator iter,Iterator end,KeyFunc key_func)
    : range_begin(iter), range_end(iter), end(end), key_func(key_func)
    {
      advance_range_end();
    }

    bool operator==(const GroupIterator &that) const
    {
      return range_begin==that.range_begin;
    }

    bool operator!=(const GroupIterator &that) const
    {
      return !(*this==that);
    }

    GroupIterator operator++()
    {
      range_begin = range_end;
      advance_range_end();
      return *this;
    }

    value_type operator*() const
    {
      return value_type(key_func(*range_begin),Range(range_begin,range_end));
    }

    private:
      void advance_range_end()
      {
        if (range_end!=end) {
          typename KeyFunc::value_type value = key_func(*range_end++);
          while (range_end!=end && key_func(*range_end)==value) {
            ++range_end;
          }
        }
      }

      Iterator range_begin;
      Iterator range_end;
      Iterator end;
      KeyFunc key_func;
  };

  GroupBy(Iterator begin_iter,Iterator end_iter,KeyFunc key_func)
  : begin_iter(begin_iter),
    end_iter(end_iter),
    key_func(key_func)
  {
  }

  GroupIterator begin() { return GroupIterator(begin_iter,end_iter,key_func); }

  GroupIterator end() { return GroupIterator(end_iter,end_iter,key_func); }

  private:
    Iterator begin_iter;
    Iterator end_iter;
    KeyFunc key_func;
};

template <typename Iterator,typename KeyFunc>
inline GroupBy<Iterator,KeyFunc>
  group_by(
    Iterator begin,
    Iterator end,
    const KeyFunc &key_func = KeyFunc()
  )
{
  return GroupBy<Iterator,KeyFunc>(begin,end,key_func);
}

static void test()
{
  vector<Foo> foos;
  foos.push_back({5,"bill",2.1});
  foos.push_back({5,"rick",3.7});
  foos.push_back({3,"tom",2.5});
  foos.push_back({7,"joe",3.4});
  foos.push_back({5,"bob",7.2});

  ostringstream out;

  for (auto group : group_by(foos.begin(),foos.end(),FooX())) {
    out << group.value << ":";
    for (auto elem : group.range) {
      out << " " << elem.y;
    }
    out << "\n";
  }

  assert(out.str()==
    "5: bill rick\n"
    "3: tom\n"
    "7: joe\n"
    "5: bob\n"
  );
}

int main(int argc,char **argv)
{
  test();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-21T11:50:49.240

Eric Niebler 的[范围库](https://github.com/ericniebler/range-v3)提供了[group_by](https://github.com/ericniebler/range-v3/blob/master/include/range/v3/view/group_by.hpp)视图。

根据文档，它是一个只有标题的库，可以很容易地包含在内。

它应该进入标准 C++ 空间，但可以与最近的 C++11 编译器一起使用。

最小的工作示例：

```
#include <map>
#include <vector>
#include <range/v3/all.hpp>
using namespace std;
using namespace ranges;

int main(int argc, char **argv) {
    vector<int> l { 0,1,2,3,6,5,4,7,8,9 };
    ranges::v3::sort(l);
    auto x = l | view::group_by([](int x, int y) { return x / 5 == y / 5; });
    map<int, vector<int>> res;

    auto i = x.begin();
    auto e = x.end();
    for (;i != e; ++i) {
      auto first = *((*i).begin());
      res[first / 5] = to_vector(*i);
    }

    // res = { 0 : [0,1,2,3,4], 1: [5,6,7,8,9] }
} 
```

（我用 clang 3.9.0 编译了这个。和`--std=c++11`）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-20T20:33:25.867

我最近发现[`cppitertools`](https://github.com/ryanhaining/cppitertools)。

它完全按照描述的方式满足了这一需求。

[https://github.com/ryanhaining/cppitertools#groupby](https://github.com/ryanhaining/cppitertools#groupby)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-09T01:52:14.420

用一行代码的算法来膨胀标准 C++ 库有什么意义？

```
for (const auto & foo : foos) foos_by_x[foo.x].push_back(foo); 
```

另外，看一下`std::multimap`，它可能正是您所需要的。

**更新：**

当你的向量已经排序时，我提供的单行没有很好地优化。如果我们记住先前插入对象的迭代器，则可以减少许多映射查找，因此它是下一个对象的“键”，并且仅在键发生变化时才进行查找。例如：

```
#include <map>
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>

struct foo {
    int         x;
    std::string y;
    float       z;
};

class optimized_inserter {
  public:
    typedef std::map<int, std::vector<foo> > map_type;

    optimized_inserter(map_type & map) : map(&map), it(map.end()) {}

    void operator()(const foo & obj) {
        typedef map_type::value_type value_type;
        if (it != map->end() && last_x == obj.x) {
            it->second.push_back(obj);
            return;
        }
        last_x = obj.x;
        it = map->insert(value_type(obj.x, std::vector<foo>({ obj }))).first;
    }

  private:
    map_type          *map;
    map_type::iterator it;
    int                last_x;
};

int main()
{
    std::vector<foo> foos;
    std::map<int, std::vector<foo>> foos_by_x;

    foos.push_back({ 1, "one", 1.0 });
    foos.push_back({ 3, "third", 2.5 });
    foos.push_back({ 1, "one.. but third", 1.5 });
    foos.push_back({ 2, "second", 1.8 });
    foos.push_back({ 1, "one.. but second", 1.5 });

    std::sort(foos.begin(), foos.end(), [](const foo & lhs, const foo & rhs) {
            return lhs.x < rhs.x;
        });

    std::for_each(foos.begin(), foos.end(), optimized_inserter(foos_by_x));

    for (const auto & p : foos_by_x) {
        std::cout << "--- " << p.first << "---\n";
        for (auto & f : p.second) {
            std::cout << '\t' << f.x << " '" << f.y << "' / " << f.z << '\n';
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-05T03:48:41.943

这个怎么样？

```
template <typename StructType, typename FieldSelectorUnaryFn>
auto GroupBy(const std::vector<StructType>& instances, const FieldSelectorUnaryFn& fieldChooser)
{
    StructType _;
    using FieldType = decltype(fieldChooser(_));
    std::map<FieldType, std::vector<StructType>> instancesByField;
    for (auto& instance : instances)
    {
        instancesByField[fieldChooser(instance)].push_back(instance);
    }
    return instancesByField;
} 
```

并像这样使用它：

```
auto itemsByX = GroupBy(items, [](const auto& item){ return item.x; }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-03T09:33:43.783

我编写了一个[C++ 库以](https://github.com/Eleobert/duf)优雅的方式解决这个问题。鉴于你的结构

```
struct foo
{
    int x;
    std::string y;
    float z;
}; 
```

要按`y`您分组，只需执行以下操作：

```
std::vector<foo> dataframe;
...
auto groups = group_by(dataframe, &foo::y); 
```

您还可以按多个变量分组：

```
auto groups = group_by(dataframe, &foo::y, &foo::x); 
```

然后正常遍历组：

```
for(auto& [key, group]: groups)
{
    // do something
} 
```

它还具有其他操作，例如：subset、concat 等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-15T01:38:38.567

我会简单地使用[boolinq.h](https://github.com/k06a/boolinq/blob/master/include/boolinq/boolinq.h)，其中包括所有 LINQ。没有文档，但使用起来非常简单。

# c++ - 在 Qt 中添加项目时如何保持相同的滚动位置？

> ID：12335861
> 
> 赞同：2
> 
> 时间：2012-09-09T01:34:17.583
> 
> 标签：c++, qt, layout, qscrollarea

我有一个 QScrollArea，其中包含一个 QWidget，它有一个 QVBoxLayout。我想实现一个无限滚动，当你到达滚动底部的 80% 时，它会加载更多项目，这样你就可以滚动更多。

问题是当我达到 80% 并尝试向 QVBoxLayout 添加更多项目时，所有项目都会上移，以便您看到所有新项目。添加新项目时，如何让 QScrollArea 保持在相同的相对位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:41:25.557

添加项目前保存绝对位置，添加项目后恢复。像这样（未经测试）。默认行为显然保留了相对位置，而这正是您不想要的。

请注意，这仅在您附加项目时才有效。

```
void code() {
  //...
  QScrollBar * bar; 
  const int savedPos = bar->value();
  // add items here
  bar->setValue(savedPos);
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:53:39.340

这与 jdi 的评论一致：我使用 QScrollBar 的值来获取 QScrollArea 的当前位置，然后我循环遍历 QLayout 并检查每个孩子的 QLayoutItem->geometry() 以查看哪个孩子最接近顶部. 然后，在我插入之后，我执行 QWidget->geometry() 以获取该项目的高度，然后执行 QScrollBar->setValue() 以滚动到该位置。

# devise - Rails 3 fields_for has_one不使用设计呈现表单字段

> ID：12335865
> 
> 赞同：3
> 
> 时间：2012-09-09T01:34:55.573
> 
> 标签：devise, ruby-on-rails-3.2

您好我使用设计来注册用户，并且我想在每次用户注册时创建与用户相关的个人资料，问题是当我尝试在注册视图中添加个人资料模型中的人的全名时设计的用户注册，它没有显示...

这是我的模型：

```
class User < ActiveRecord::Base

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :profile_attributes

  has_one :profile, dependent: :destroy
  accepts_nested_attributes_for :profile
  # attr_accessible :title, :body 
end 
```

这是配置文件模型

```
class Profile < ActiveRecord::Base
  attr_accessible :email, :name, :phone, :code
  belongs_to :user

  validates_presence_of :user
end 
```

这是修改后的设计视图：

```
<% provide(:title, 'Sign up' ) %>
<h2>Sign up</h2>

<div class="row">
  <div class="span6 offset3">

    <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
      <%= render 'shared/error_messages', object: resource %>

      <%= f.fields_for :profile do |profile_form| %>
        <%= profile_form.label :full_name %>
        <%= profile_form.text_field :name %>
      <% end %>

      <%= f.label :email %>
      <%= f.email_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation %>

      <div class="form-actions">
        <%= f.submit "Sign up", class: "btn btn-large btn-primary" %>
      </div>
    <% end %>

    <%= render "devise/shared/links" %>

  </div>
</div> 
```

我看不出为什么名称文本字段不会出现有任何问题...

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:59:07.137

想通了，太简单了，我感觉很糟糕......所以这里是：

我忘了在表单上生成一个新的配置文件，所以它最终看起来像这样：

```
.
.
.

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
      <%= render 'shared/error_messages', object: resource %>

      <div class="invisible">
        <%= resource.build_profile %>
      </div>

      <%= f.fields_for :profile do |profile_form| %>
        <%= profile_form.label :full_name %>
        <%= profile_form.text_field :name %>

      <% end %>

      <%= f.label :email %>
      <%= f.email_field :email %> 

.
.
. 
```

希望这也能解决别人的问题！

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T14:28:04.257

这个问题已经回答了，但我想我会把它作为其他人的替代方案。表单支持对象可用于返回一个表单/一个模型类型的设置并帮助保持代码更清洁。

这是一篇很好的文章： [http ://pivotallabs.com/form-b​​acking-objects-for-fun-and-profit/](http://pivotallabs.com/form-backing-objects-for-fun-and-profit/)

# android - 按钮上的重叠文本

> ID：12335868
> 
> 赞同：1
> 
> 时间：2012-09-09T01:35:18.390
> 
> 标签：android, button, text

![看看那些漂亮的蓝色替代文本](../Images/dee0fdd3c107bbbad8928bfc42f0ebde.png)

我想为带有普通和辅助文本的计算器创建一个按钮。下图非常简洁地概括了它。我主要关心的是让辅助文本在不同的设备上很好地扩展。这让我觉得我想使用辅助文本视图，或者想办法使用 HTML 在按钮中呈现按钮辅助文本。

我遇到的问题是我不知道最可扩展和最强大的方法是什么。

是否有必要创建自定义按钮？或者有什么方法可以让按钮的 setText() 和 HTML.fromHTML() 将辅助文本放在左上角？到目前为止，添加更多行会使按钮拉伸，并且为按钮添加特定填充不会扩展到其他设备。我假设使用辅助文本的背景 9 补丁图像也不起作用，因为较大的按钮不会缩放辅助文本。

有人有任何指示吗？谢谢！

# c# - 动态强制原始类型从一个到另一个？

> ID：12335869
> 
> 赞同：4
> 
> 时间：2012-09-09T01:35:23.057
> 
> 标签：c#, type-conversion

我正在研究一个相当棘手的问题。在非常高的层次上，我有一个原始对象，我需要将它强制转换为 C# 中的不同原始类型。值**和类型**在运行时确定。

我大致尝试了这个（我的代码更复杂，这说明了问题）：

```
object value = (int)0x8ba9dc90;
Type t = typeof(UInt64);
object result = Convert.ChangeType(value, t); 
```

这在某些时候有效，除非在（如上所述）会发生上溢或下溢的情况下。

我*想要*发生的是强制（而不是转换）会发生。在这种情况下，我只是希望“（int）0x8ba9dc90”为“（ulong）0x8ba9dc90”。与浮点数类似：如果 value = "(float)-32.01" 且 "t" 为 "UInt64"，我希望结果为 "0xffffffffffffffe0"。这正是你运行“unchecked { ulong u = (ulong)(double)-32.01; }”时得到的结果

有什么办法可以做到这一点，还是我坚持编写自定义转换器？

（是的，我意识到这是一件奇怪的事情。这都是高度动态的代码，我正在尝试在 DynamicObject.TryConvert 覆盖中进行强制。我也完全知道在很多情况下这会通过向下转换等丢弃数据。这在我的应用程序中非常好。如果没有巨大的嵌套 switch 语句，我无法弄清楚如何编写它。）

**编辑：**要清楚我的功能看起来像这样：

```
public override bool TryConvert(ConvertBinder binder, out object result)
{
    if (binder.Type.IsPrimitive && m_type.IsPrimitive)
    {
        // m_type is System.Type, which is m_value's current type.
        // m_value is System.Object, contains a primitive value.
        // binder.Type is the System.Type I need to coerce m_value into.
        result = Convert.ChangeType(m_value, binder.Type);
        return true;
    }
    result = null;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T01:55:52.617

您可以使用 LINQ 表达式进行此转换。[这篇文章](http://www.codeproject.com/Articles/61460/Using-LINQ-for-type-conversion)解释了如何。

基本思想是构造一个与强制转换表达式等效的 LINQ 表达式。

```
ParameterExpression convParameter = Expression.Parameter(typeof(object), "val");
var conv = (Func<object,object>)Expression.Lambda(
    Expression.Convert(
        Expression.Convert(
            Expression.Convert(
                convParameter
            ,   fromType
            )
        ,   targetType
        )
    ,   typeof(object)
    )
    ,   convParameter
).Compile(); 
```

现在您可以调用`conv`并传递一个`object`包装原始类型的值；它会返回一个强制值给你。此代码也将获取您的自定义类型转换（对于您自己的类型，而不是原语）。如有必要，您可以通过增加`Expression.Convert`对象的嵌套级别在两者之间添加更多转换。

# asp.net-mvc - MVC 项目设计，复用局部视图的优缺点

> ID：12335871
> 
> 赞同：0
> 
> 时间：2012-09-09T01:35:37.850
> 
> 标签：asp.net-mvc, asp.net-mvc-3, partial-views

我有一个关于如何在项目中使用可重用部分视图的利弊问题。

在第一个示例中，我有一个在所有视图之间使用的布局。在布局中，我有一个使用`Html.RenderAction("Index", "Header")`. 此标头会根据用户是否登录而更改，并且会在每个视图上呈现。

在第二个示例中，我有一个在所有视图之间使用的静态布局。但是，在此布局中没有调用局部视图。每个视图都调用 Header 部分视图，并且基本上与第一个示例执行相同的操作（根据用户是否登录等进行更改）

哪种方法更好，一种方法还是另一种方法正确？各有优劣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:03:19.470

[asp.net-mvc](/questions/tagged/asp.net-mvc "显示标记为“asp.net-mvc”的问题")背后的主要思想之一是不重用代码。因此，考虑到这一点，您应该`Header`在文件中包含代码`_Layout`。这样它就不会在 every 中重新输入`View`，如果您需要删除它或添加路由值等，您不必更新每个`View`拥有它的东西。

这方面的一个例子是`_LogOnPartial`默认项目中的那个。在 中，`_Layout`它被 调用`@Html.Partial("_LogOnPartial")`，并且`_LogOnPartial`视图包含一个逻辑语句，它要么显示`LogOn or Register`要么`Welcome back...`。

# ruby - Rails 3.2.8 - 将多个数据保存到数据库时应该使用 Thread 吗？

> ID：12335881
> 
> 赞同：0
> 
> 时间：2012-09-09T01:36:59.573
> 
> 标签：ruby, ruby-on-rails-3, thread-safety

我经常使用 Thread，我想知道这是否是一个好习惯：

```
 def self.create_all_posts
      threads = []
      self.fetch_all_posts.each do |e|
        if e.present?
          threads << Thread.new {
          self.create(title: e[:title], url: e[:url])
          }
        end
      end
        main     = Thread.main       # The main thread
        current  = Thread.current    # The current thread
        all      = Thread.list       # All threads still running

        all.each { |t| t.join }
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:53:20.133

基本上，是的。您可能需要调用 config.threadsafe！在 application.rb 和 mayve allow_concurrency: true 在 database.yml 中。根据您的 rails 版本，您可能至少需要第一个，否则您的数据库请求可能不会并行运行。

尽管如此，在您的情况下，并行运行每个“INSERT INTO ...”可能没有太大的性能影响，认为这在很大程度上取决于您的磁盘、内存和数据库主机上的 CPU 情况。顺便说一句，如果您的 fetch_all_posts 需要相当长的时间来获取，您可以使用 find_each 方法，这可能会在扫描大量数据集的同时启动创建线程。您可以为 find_each 设置“页面”大小，使其在每 10 个帖子上运行一次广告。

# php - PHP将字符串添加到文本文件

> ID：12335885
> 
> 赞同：26
> 
> 时间：2012-09-09T01:37:17.740
> 
> 标签：php

> **可能重复：**
> [在 php 中写入文本文件](https://stackoverflow.com/questions/1451590/writing-to-a-text-file-in-php)

假设我想将字符串 $ip 添加到同一目录中的文本文件 ip.txt 中。我目前正在使用`file_get_contents`从文本文件中读取。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-09T01:38:21.587

你可以使用[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)

```
<?php
  $ip = "foo";
  file_put_contents("ip.txt", $ip, FILE_APPEND);
?> 
```

`FILE_APPEND`将*附加*文本。缺少此标志将导致文件覆盖。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-09T01:40:45.020

[`file_put_contents()`](http://php.net/manual/en/function.file-put-contents.php)with `FILE_APPEND`flag 将文本附加到给定文件：

```
file_put_contents('filename.txt', $stringToAppend, FILE_APPEND); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-09T01:38:03.607

[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)将内容放入文件中。

```
if(!file_put_contents("path/to/file.txt", $ip, FILE_APPEND)){
    // failure
} 
```

# java - Jackson - 如何将复杂的 JSON 转换为地图中的对象？

> ID：12335886
> 
> 赞同：0
> 
> 时间：2012-09-09T01:37:37.060
> 
> 标签：java, json, jackson

以下代码可能看起来很复杂，但实际上很简单（并且与复制/粘贴兼容）：

```
import java.io.IOException;
import java.util.Map;

import org.junit.Test;

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.JsonGenerationException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonTest {
    @Test
    public void test_complex_json_to_object() throws JsonGenerationException, JsonMappingException, IOException {
        final String json = "{\"source[longitude]\":[\"26.3843435\"],\"source[latitude]\":[\"174.78830093\"]}";

        final ObjectMapper m = new ObjectMapper();

        @SuppressWarnings("unchecked")
        final Map<String, Object> json_map = m.readValue(json, Map.class);

        m.convertValue(json_map, Data.class);
    }

    public static class Location {
        public double   latitude;
        public double   longitude;
    }

    public static class Data {
        public Location location;

        @JsonProperty(value = "source[longitude]")
        public void setSource__longitude(final String[] data) { // Invoked.
            System.err.println("longitude");
        }

        @JsonProperty(value = "source[latitude]")
        public void setSource__latitude(final String[] data) { // Invoked.
            System.err.println("latitude");
        }

        public void setLocation(final String[] data) { // NOT Invoked!
            System.err.println("latitude");
        }
    }
} 
```

JSON 字符串是固定的。我将其作为地图从外部服务中获取，因此在转换为`Data`对象之前转换为地图。

我希望在对象中定义`latitude`和设置器，而不是像我目前被迫（在 内）那样。`longitude``Location``Data`

问题是，**杰克逊不明白那`source[longitude]`实际上是`source.longitude`.**

有什么办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:31:41.380

您需要进行自定义处理；要么通过编写 custom `JsonDeserializer`。您的用例相当深奥，因此没有开箱即用的支持。这有点像在 JSON 中拥有自己的数据格式，因此您需要自己的处理程序。

# python - 为 Python 服务实现自制插件

> ID：12335890
> 
> 赞同：1
> 
> 时间：2012-09-09T01:38:16.290
> 
> 标签：python, plugins, importerror

我正在编写一个简单的调度服务。我不想硬编码它可以安排的所有任务，而是希望支持可以放在文件夹中并在运行时动态加载的插件。

我的计划是有一个 JSON 文件（或任何配置文件），将任务名称映射到 Python 文件（模块）的位置，该文​​件将有一个名为`Plugin`. 很简单，我想。当有人安排任务运行时，他们会传递任务名称和运行时间。当时间过去时，插件被加载（或重新加载）并使用传递给调度程序的任何附加参数运行。

我一直在查看`imp`模块以了解如何在运行时加载模块。我不确定我是想使用它们的物理位置（文件系统路径）列出插件还是使用它们的模块名称，就像你在`import`声明中看到的那样。它似乎`imp`想使用物理位置。

我得到了这个代码“工作”的两个不同版本。这是一个使用`importlib`：

```
 pluginName = self.__pluginLookup[pluginName]
    module = import_module(pluginName)
    module = reload(module)  # force reload

    plugin = module.Plugin()
    return plugin 
```

这是我写的一个`imp`：

```
 path = self.__pluginLookup[pluginName]
    path, moduleName = split(path)
    moduleName, extension = splitext(moduleName)

    file, path, description = find_module(moduleName, [path])
    with file:
        module = load_module(moduleName, file, path, description)

    plugin = module.Plugin()
    return plugin 
```

我遇到的问题是处理依赖项。如果我有一个`plugin.py`文件依赖于`dependency.py`同一文件夹中的文件，那么说`import dependency`似乎不起作用。相反，它从`PYTHONPATH`.

我怎样才能使导入相对于插件本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:13:30.827

您可以附加`path`到`sys.path`：

```
import sys
sys.path.append(path) 
```

`path`包含dependency.py的目录在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:35:45.163

如果您有一个`plugins`带有 的目录`__init__.py`，则可以将该目录添加到`sys.path`. 然后里面的模块可以`from . import dependency`导入另一个插件。或者，如果插件本身是一个子包（即，一个有自己的目录`__init__.py`），那么它可以`from . import dep`在同一个插件`from .. import dep`中导入一个依赖项，或者从全局插件目录中导入一个依赖项。有了这个设置，你甚至不需要使用`imp`或类似的东西；您可以使用该`__import__`功能，该功能按模块名称工作。

但是，一个可能的问题是您说插件目录将位于“当前工作目录下”。这到底是什么意思？您的意思是您希望人们能够在驱动器上的任何位置添加插件并仍然使用它们？最好为您的应用程序提供一个中央插件目录，并将其添加到`sys.path`，并告诉人们将他们的插件放在那里。

# oop - 将职责与依赖于中央“生产者”对象分离

> ID：12335892
> 
> 赞同：1
> 
> 时间：2012-09-09T01:38:56.247
> 
> 标签：oop

假设您有一个与平台或其他东西有某种联系的对象。例如，用于连接远程网站的对象，您可以在其中控制各种机器人。

生产者对象用于通过代表这些机器人的连接获取几十个实例。这些对象依赖于第一个对象，因为任何操作都需要通过连接。因此，任何本地代码都只是通过生产者对象进行调用。

机器人 <-> 连接 <-> 机器人对象

原始对象可以为这些实例中的每一个实例提供一定数量的实用方法，这些实例可以将更改返回。但是，这可能会将其变成某种无所不能的“神”类。

在这种情况下，您将如何分离责任？

PS：随意建议一个更好的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:25:47.013

您所描述的听起来与[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)非常相似：

*   有一个`Robot`接口。
*   服务器通过具体的实现来控制真实的机器人，比如说`RealRobot`。
*   客户端有一个`Connection`对象，它可以返回实现`Robot`接口的代理，但通过连接将调用转发到真实的机器人。

该`Connection`对象本身将仅提供基本的通信方法（例如发送和接收数据），并且不包含您描述的任何“实用方法”。代理实现将利用这些通信方法将调用中继到服务器。

这是一个例子：

共享界面：

```
public interface Robot {
  void move(...);
} 
```

服务器实现：

```
public class RealRobot implements Robot { ... } 
```

客户端库：

```
public class Connection {
  public Robot getRobot(int id) {
    return new RobotProxy(id, this);
  }

  // ...
  // methods for sending and receiving data
  // ...
}

public class RobotProxy implements Robot {
  private final int id;
  private final Connection conn;

  public RobotProxy(int id, Connection conn) {
    this.id = id;
    this.conn = conn;
  }

  public void move(...) {
    conn.send("move", id, ...);
  }
} 
```

# android - Android Virtual Device Emulator 冻结了操作系统

> ID：12335893
> 
> 赞同：-1
> 
> 时间：2012-09-09T01:39:21.747
> 
> 标签：android, freeze, avd

我正在尝试`Android4.0.3`在 Windows 7 64 位上运行 Android 虚拟设备（称为“”）。但是，每当我启动它时，它最终都会完全冻结计算机（似乎不接受鼠标/键盘输入）。不过，我的音乐一直在后台播放。

有什么方法可以在不冻结 Windows 的情况下运行设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:41:20.823

Comodo Firewall 的 Defense+ 搞砸了。IIRC，驱动程序在内核级别运行，从而使其能够完全冻结计算机。

要解决这个问题：

1.  右键单击任务栏中的 Comodo 防火墙图标。
2.  在“防御+安全级别”下，选择“训练模式”。
3.  *至少*运行一次虚拟机后，请务必将其切换回之前的状态。

还是行不通？

1.  右键单击任务栏中的 Comodo 防火墙图标。
2.  点击“打开...”
3.  点击“防御+”
4.  点击“受信任的文件”
5.  查找 AVD 目录并删除这些条目；**或者**，只需单击清除。

# iphone - 如何解析这种类型的数据ios sdk

> ID：12335898
> 
> 赞同：0
> 
> 时间：2012-09-09T01:40:39.120
> 
> 标签：iphone, ios, parsing

> **可能重复：**
> [解析 UTF-8 JSON ios sdk](https://stackoverflow.com/questions/12334675/parse-utf-8-json-ios-sdk)

```
[4,"1.0",1347139911696]
[0,"Neathouse Place","58226","STBC",154,"L",51.495322,-0.141808]
[0,"Vauxhall Bridge Rd / Victoria Stn","59516","STBC",160,"Z9",51.495931,-0.142216]
[0,"VICTORIA, VAUXHALL BRIDGE ROAD (EAST)",null,null,0,null,51.495839,-0.142119]
[0,"Vauxhall Bridge Rd / Victoria Stn","54249","STBC",256,"M",51.496573,-0.141354] 
```

如何解析此类数据。

检查这个[链接](http://countdown.api.tfl.gov.uk/interfaces/ura/instant_V1?Circle=51.49598,-0.14091,100&StopPointState=0&ReturnList=StopCode1,StopPointName,Bearing,StopPointIndicator,StopPointType,Latitude,Longitude)。

根据服务提供商，它是 UTF-8 JSON 数据类型。如果不是，请告诉我它是哪种类型的数据以及如何解析它。

请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:15:26.753

首先要意识到的是，您的数据实际上是 5 个独立但有效的`JSON`数组。`JSON`可以在[jsonlint.com](http://jsonlint.com)进行验证。

要从他们那里得到有用的东西，您必须按行拆分您的回复。您可以使用换行符作为分隔符。

```
// stringWithContentsOfURL: used for demonstration
NSURL *sourceURL = [NSURL URLWithString:@"http://countdown.api.tfl.gov.uk/interfaces/ura/instant_V1?Circle=51.49598,-0.14091,100&StopPointState=0&ReturnList=StopCode1,StopPointName,Bearing,StopPointIndicator,StopPointType,Latitude,Longitude"];
NSString *actualResponse = [NSString stringWithContentsOfURL:sourceURL encoding:NSUTF8StringEncoding error:nil];
NSArray *individualJSONArrays = [actualResponse componentsSeparatedByString:@"\n"]; 
```

你现在有一个`NSArray`with 5 valid `JSON` `NSStrings`。您可以处理其中任何一个，也可以`NS`通过如下枚举将它们全部转换为 -Class 对象：

```
NSMutableArray *jsonObjects = [[NSMutableArray alloc] init];
for (NSString *jsonString in individualJSONArrays) {
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:nil];
    if (jsonArray){
        [jsonObjects addObject:jsonArray];
    }
}
NSLog(@"%@",jsonObjects); 
```

你现在有一个`NSArray`充满`NSArrays`.

# css - 在鼠标悬停时在 CSS 背景图像上显示提示

> ID：12335906
> 
> 赞同：1
> 
> 时间：2012-09-09T01:42:55.980
> 
> 标签：css

我正在使用`<span class="image">`具有背景的：

```
.image {
    background-image: url("image.jpg")
} 
```

当人们将鼠标悬停在该图像上时，如何在该图像上添加提示？

有没有一种CSS方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:06:56.023

使用 HTML 标题属性：

```
<span class="image" title="This is a hint."> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T01:56:28.500

你可以对内容做一些事情`:after`：

```
.image:hover:after {
    content:"This is a hint";
} 
```

演示：http: [//jsfiddle.net/fXuSB/](http://jsfiddle.net/fXuSB/)

但是，此内容在 HTML 中可能会更好（实际上您的图像也可能如此）。您可以将该`title`属性用于简单的默认工具提示，或者可能是这样的：

```
<span class="image">
    <span class="hint">This is a hint</span>
</span>​​​​ 
```

```
.image .hint {
    display:none;
}
.image:hover .hint {
    display:block;
} 
```

演示：http: [//jsfiddle.net/fXuSB/1/](http://jsfiddle.net/fXuSB/1/)

# java - Java 程序在没有警告的情况下停止工作

> ID：12335911
> 
> 赞同：0
> 
> 时间：2012-09-09T01:44:10.083
> 
> 标签：java

我创建了一个方法：

```
public double Calculouno(double x1,double x2,double y1,double y2)
{
    double ecuacion1;
    ecuacion1= (x2-x1)+(y2-y1);
    ecuacion1= Math.sqrt(ecuacion1);
    return ecuacion1;
} 
```

当我的程序尝试使用数学函数计算 ecuacion1`pow`时`sqrt`（至少我怀疑是这样），它会在没有编译器警告的情况下停止工作并显示“构建成功”。请帮忙。

当我到达这部分（方法）时，编译器会说“构建成功”，然后它就结束了。在这部分之前，我的程序运行良好。

这是完整的源代码。

```
 import java.util.Scanner;
import java.lang.Math;

public class Ejercicio12
{
    public static void main(String args[])
    {
        double[] x= new double[3];
        double[] y= new double[3];
        double a,b,c;
        int con=0, con2=0;
        double[] angulo= new double[3];
        Scanner entrada = new Scanner(System.in);
        Calculos cal= new Calculos();

        for(con=0;con<3;con++)
        {
        System.out.println("Ingrese un valor x para el punto "+(con+1)+": ");
        x[con]= entrada.nextDouble();
        System.out.println("Ingrese un valor y para el punto "+(con+1)+": ");
        y[con]= entrada.nextDouble();
        }

        a= cal.Calculouno(x[0],x[1],y[0],y[1]);
        b= cal.Calculouno(x[1],x[2],y[1],y[2]);
        c= cal.Calculouno(x[2],x[0],y[2],y[0]);

        angulo[0]= cal.Angulo(a,b,c);
        angulo[1]= cal.Angulo(c,a,b);
        angulo[2]= cal.Angulo(b,a,c);

        if(angulo[0]>90||angulo[1]>90||angulo[2]>90)
        {
            System.out.println("El triangulo es obtusangulo");
        }
        else
        {
            if(angulo[0]==90||angulo[1]==90||angulo[2]==90)
            {
                System.out.println("El triangulo es rectangulo");
            }
            else
            {
                if(angulo[0]<90&&angulo[1]<90&&angulo[2]<90)
                {
                    System.out.println("El triangulo es acutangulo");
                }
            }

        }
    }

}

 import static java.lang.Math.sqrt;
    import static java.lang.Math.pow;
    import static java.lang.Math.acos;
    public class Calculos
    {
    public double Calculouno(double x1,double x2,double y1,double y2)
        {
            double ecuacion1;
            double dx= (x2-x1);
            double dy= (y2-y1);
            return Math.sqrt(dy+dx);

        }

        public double Angulo(double a1,double b1, double c1)
        {
            double ecuacion2;
            double a11 = pow(a1,2);
            double b11 = pow(b1,2);
            double c11 = pow(c1,1);

            double xx=(b11+c11-a11);
            double zz=(2*b1*c1);

            return Math.acos(xx/zz);
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:08:50.023

您的代码段中的代码中没有任何内容会（直接）导致程序“在没有警告的情况下停止”。

*   没有会导致构建失败的语法错误（等等）。（这与您报告的内容相符。）

*   提供“错误”输入`Math.sqrt`不会导致它停止，甚至不会引发异常。javadoc 说：*“[返回] a 的正平方根。如果参数为 NaN 或小于零，则结果为 NaN。”* 即错误的输入会给你一个`NaN`价值。

*   错误的输入不会导致`sqrt`调用之前的算术抛出异常。JLS 说（对于浮点数`+`和`-`运算符）*“[i]如果任一操作数为 NaN，则结果为 NaN。”*

因此，您的应用程序停止的直接原因必须在您的应用程序的其他地方。

我预计正在发生的事情是，当您的代码的其他部分从该方法（可能是 NaN）获得意外结果时抛出异常......并且您的应用程序正在*压缩*异常。

* * *

我现在明白了这个问题。

正在发生的事情是算术和/或调用`sqrt`and `pow`>>are<< 生成 NaN 值。当您使用任何关系运算符测试 NaN 值时，表达式的结果**始终**为false。所以这意味着您的代码没有进行任何`println`调用。

您的代码实际上并没有停止。相反，它正常完成而不产生任何输出。

计算产生 NaN 值的根本原因是......正如@duffymo 所指出的......您错误地实现了几何公式。

* * *

作为记录，NaN 值在关系表达式中使用时具有特殊的行为。例如：

```
 double x = 0.0 / 0.0;  // generate a NaN
    System.out.println(0.0 == x);
    System.out.println(0.0 != x);
    System.out.println(0.0 < x);
    System.out.println(0.0 > x);
    System.out.println(x == x);
    System.out.println(x != x);
    System.out.println(x < x);
    System.out.println(x > x); 
```

以上所有遗嘱都会打印“false”。是的，全部！

测试 NaN 的唯一方法是使用`Double.isNaN(double)`or `Float.isNaN(float)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:46:58.200

我相信这里有两个链接可以很好地描述您想要解决的问题：

[http://mathworld.wolfram.com/AcuteTriangle.html](http://mathworld.wolfram.com/AcuteTriangle.html)

和

[http://mathworld.wolfram.com/ObtuseTriangle.html](http://mathworld.wolfram.com/ObtuseTriangle.html)

这就是我可能会写它的方式。我没有详尽地测试它：

```
package cruft;

/**
 * Junk description here
 * @author Michael
 * @link
 * @since 9/8/12 10:19 PM
 */

public class Triangle {

    private final Point p1;
    private final Point p2;
    private final Point p3;

    public static void main(String args[]) {
        if (args.length > 5) {
            Point p1 = new Point(Double.valueOf(args[0]), Double.valueOf(args[1]));
            Point p2 = new Point(Double.valueOf(args[2]), Double.valueOf(args[3]));
            Point p3 = new Point(Double.valueOf(args[4]), Double.valueOf(args[5]));
            Triangle triangle = new Triangle(p1, p2, p3);
            double angle = triangle.calculateAngle();
            System.out.println(triangle);
            if (angle > 0.0) {
                System.out.println("obtuse");
            } else if (angle < 0.0) {
                System.out.println("acute");
            } else {
                System.out.println("right triangle");
            }
        } else {
            System.out.println("Usage: Triangle x1 y1 x2 y2 x3 y3");
        }
    }

    public Triangle(Point p1, Point p2, Point p3) {
        this.p1 = p1;
        this.p2 = p2;
        this.p3 = p3;
    }

    public double calculateAngle(){
        double a = Point.distance(this.p1, this.p2);
        double b = Point.distance(this.p2, this.p3);
        double c = Point.distance(this.p3, this.p1);
        return Math.acos(a*a + b*b - c*c)/2.0/a/b;
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append("Triangle");
        sb.append("{p1=").append(p1);
        sb.append(", p2=").append(p2);
        sb.append(", p3=").append(p3);
        sb.append('}');
        return sb.toString();
    }
}

class Point {
    public final double x;
    public final double y;

    public Point(double x, double y) {
        this.x = x;
        this.y = y;
    }

    public static double distance(Point q1, Point q2) {
        double dx = Math.abs(q1.x-q2.x);
        double dy = Math.abs(q1.y-q2.y);
        if (dx > dy) {
            double r = dy/dx;
            return dx*Math.sqrt(1.0+r*r);
        } else {
            double r = dx/dy;
            return dy*Math.sqrt(1.0+r*r);
        }
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append('(').append(x);
        sb.append(',').append(y);
        sb.append(')');
        return sb.toString();
    }
} 
```

# java - 如何处理 UNICODE URL？

> ID：12335912
> 
> 赞同：4
> 
> 时间：2012-09-09T01:44:32.663
> 
> 标签：java, url, unicode

如果我想在 Java 中粘贴以下 URL：

![UNICODE 中 URL 的屏幕截图](../Images/948ff1e10753427798a2a80ac98c5bfd.png)

...我应该对字符串使用什么句柄。

到目前为止，我一直无法处理那个字符串，我所拥有的只是？？？？字符。

谢谢。

2012.09.09修改：

```
package pruebas;

import java.io.UnsupportedEncodingException;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLDecoder;
import java.net.URLEncoder;
import java.util.Vector;

public class Prueba03
{
    public static void main(String argumentos[])
    {
        Vector<String> listaURLs = new Vector<String>();

        listaURLs.add("http://президент.рф/");
        listaURLs.add("http://www.中国政府.政务.cn");
        listaURLs.add("http://www.原來我不帥.cn/");
        listaURLs.add("http://وزارة-الأتصالات.مصر/");

        URL currentURL;
        URLConnection currentConnection;
        int currentSize;

        for(int i=0; i<listaURLs.size(); i++)
        {
            try
            {
                System.out.println(URLDecoder.decode(listaURLs.get(i), URLEncoder.encode(listaURLs.get(i), "UTF-8")));
            } // End of the try.
            catch(UnsupportedEncodingException uee)
            {
                uee.printStackTrace();
            } // End of the catch.
            catch(Exception e)
            {
                e.printStackTrace();
            } // End of the catch.

            try
            {
                currentURL = new URL(listaURLs.get(i));
                System.out.println("currentURL" + " = " + currentURL);

                currentConnection = currentURL.openConnection();
                System.out.println("currentConnection" + " = " + currentConnection);

                currentSize = currentConnection.getContentLength();
                System.out.println("currentSize" + " = " + currentSize);
            } // End of the try.
            catch(Exception e)
            {
                e.printStackTrace();
            } // End of the catch.
        } // End of the for.
    } // End of the main method.
} // End of the Prueba02 class. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-19T12:07:38.510

对于域名，您应该使用[Punycode](https://en.wikipedia.org/wiki/Punycode)转换 unicode 主机名。Punycode 是一种将 unicode 字符串转换为 ascii 字符串的方法。

以下链接显示了将 Unicode 域名转换为国际域名的 JAVA 方法。 [https://docs.oracle.com/javase/6/docs/api/java/net/IDN.html#toASCII(java.lang.String)](https://docs.oracle.com/javase/6/docs/api/java/net/IDN.html#toASCII(java.lang.String))

```
 URL u = new URL(url);
    String host = u.getHost();

    String[] labels = host.split("\\.");
    for (int i = 0; i < labels.length; i++) {
        labels[i] = java.net.IDN.toUnicode(labels[i]);
    }
    host = StringUtils.join(labels, ".");
    System.out.println(host); 
```

此外，您可以使用在线 punycode 转换器测试一些 unicode URL。 [https://www.punycoder.com/](https://www.punycoder.com/)

例如，将“ [http://www.中国政府.政务.cn](http://www.%E4%B8%AD%E5%9B%BD%E6%94%BF%E5%BA%9C.%E6%94%BF%E5%8A%A1.cn) ”转换为“ [http://www.xn--fiqs8sirgfmh.xn--zfr164b.cn/](http://www.xn--fiqs8sirgfmh.xn--zfr164b.cn/) ”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T03:19:35.317

您可以尝试以下代码：

```
import java.net.URLDecoder;
import java.net.URLEncoder;

public class Test7 {
public static void main(String[] args) throws Exception {
    String str = "http://www.中国政府.政务.cn";
    System.out.println(URLDecoder.decode(str, URLEncoder.encode(str,
            "UTF-8")));
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-09T03:07:50.270

不确定“解析”是什么意思——你打算用这些部分做什么？
据我所知，UTF-8 支持阿拉伯语和俄语。
不确定您的数据源是什么（可能是某种 Stream？），但[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)有一个接受所需编码的 CTOR。
您应该能够获得一个不包含 ??? 的字符串 当涉及到阿拉伯语和俄语时，如果您使用此 CTOR（带有“UTF-8”参数）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-22T05:09:22.800

您可以尝试使用以下内容：

```
String pageUrl = "http://www.中国政府.政务.cn";

try 
{
        URL url = new URL(pageUrl);
        System.out.println(url.toURI().toASCIIString());
}

catch (MalformedURLException e1) 
{
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

catch (URISyntaxException e) 
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

结果如预期： [http://www.%E4%B8%AD%E5%9B%BD%E6%94%BF%E5%BA%9C.%E6%94%BF%E5%8A%A1。 cn](http://www.%E4%B8%AD%E5%9B%BD%E6%94%BF%E5%BA%9C.%E6%94%BF%E5%8A%A1.cn)

但是转换成`URI`有它自己的缺点，你应该手动替换`'|', '"', '#'`它的`URL`编码之类的特殊字符。

# plsql - PLSQL - 交替安装

> ID：12335913
> 
> 赞同：0
> 
> 时间：2012-09-09T01:45:00.400
> 
> 标签：plsql

我有一个 sql 脚本文件，用于安装表、触发器、序列，最后是一个包。该包使用由 sql 脚本文件创建的表。程序包被指定在应用程序中发生事件时运行，即程序包在应用程序触发器被触发时运行。

该软件包所做的只是将批量选择插入到临时表中。这就是它所做的一切。

现在，问题是当我第一次进行全新安装时，程序包被触发并运行，但不会将数据插入临时表。但是，当下一个事件发生时，会触发包并将数据插入到暂存稳定器中并继续正常运行。所以最初我认为这可能是一个初始化错误。

但是，当我删除由 sql 脚本文件（包括包）创建的所有对象并重新运行 sql 脚本文件时，当第一个事件本身发生并继续正常运行时，包工作得很好。

所以这不可能是初始化错误。

但是再一次（只是因为我失去了理智）我放弃了所有内容并重新运行脚本文件，我发现我第一次注意到的行为相同。然后我再次删除所有内容并重新运行脚本文件，它第一次工作得很好。

我不知道为什么它会交替工作，这太奇怪了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:58:17.777

我猜代码处于无效（未编译）状态。在调用尚未创建的包的表上创建触发器。然后创建包。首次运行后，触发代码由服务器自动重新编译。在您的创建脚本中，创建所有对象后，运行一个脚本来编译无效对象 ( `ALTER <object> COMPILE`)。

通过检查来验证是否是这种情况：

```
SELECT object_type, object_name
  FROM all_objects
  WHERE status = 'INVALID' 
```

在创建之后，但在您的事件触发之前。

# windows - 将 OpenGL 顶点缓冲区对象与 Windows 中的动态链接 OpenGL 一起使用

> ID：12335914
> 
> 赞同：1
> 
> 时间：2012-09-09T01:45:22.400
> 
> 标签：windows, opengl, dynamic-linking

我正在通过动态链接与 Windows 预打包的 opengl32.dll 文件来设置基本的 OpenGL 应用程序（该部分是非可选的）。但是，我在获取与顶点缓冲区对象相关的函数的过程地址时遇到了很多困难。

我最初的调查显示，Windows 最初只公开了 OpenGL 1.1 规范，并且需要使用 wglGetProcAddress 调用来获取任何更新的函数。所以我修改了我的代码以尝试该方法。我使用 glGenBuffers 作为我的示例案例，并尝试了四种不同的尝试来加载它，但都失败了。我还使用 glGetString 检查了报告为主要版本 4 的版本号，所以我怀疑它缺乏 VBO 支持。

我应该如何获取这些 VBO 函数的 proc 地址？

我正在处理的代码的最小化示例如下：

```
#include <iostream>
#include "windows.h"

using namespace std;

int main()
{

//Load openGL and get necessary functions
HINSTANCE hDLL = LoadLibrary("opengl32.dll");
PROC WINAPI(*winglGetProcAddress)(LPCSTR);
void(*genBuffers)(int, unsigned int*);

if(hDLL)
{
    winglGetProcAddress = (PROC WINAPI(*)(LPCSTR))GetProcAddress(hDLL, "wglGetProcAddress");
    if(winglGetProcAddress == NULL){cout << "wglGetProcAddress not found!" << endl; return 0;}

    genBuffers = (void(*)(int, unsigned int*))GetProcAddress(hDLL, "glGenBuffers");
    if(genBuffers == NULL){genBuffers = (void(*)(int, unsigned int*))winglGetProcAddress("glGenBuffers");}
}
else
{cout << "This application requires Open GL support." << endl; return 0;}

//glGenBuffers not supported, fallback to glGenBuffersARB
if(genBuffers == NULL)
{
    genBuffers = (void(*)(int, unsigned int*))GetProcAddress(hDLL, "glGenBuffersARB");
    if(genBuffers == NULL){genBuffers = (void(*)(int, unsigned int*))winglGetProcAddress("glGenBuffersARB");}
    if(genBuffers == NULL)
    {cout << "Could not locate glGenBuffers or glGenBuffersARB in opengl32.dll." << endl; return 0;}
}

//get a Vertex Buffer Object
unsigned int a[1];
genBuffers(1, a);

//cleanup
if(!FreeLibrary(hDLL))
{cout << "Failed to free the opengl32.dll library." << endl;}

return 0;
} 
```

运行时，它会加载库并正确获取 wglGetProcAddress，但随后会输出“无法在 opengl32.dll 中找到 glGenBuffers 或 glGenBuffersARB”。错误，表明它无法使用“GetProcAddress”或“wglGetProcAddress”获取“glGenBuffers”或“glGenBuffersARB”。

或者，如果这确实意味着我没有 VBO 支持，驱动程序更新是否有帮助，或者是否有可能获得支持？我真的不想使用已弃用的立即模式调用。

我在 Windows XP、Intel Core i5 和 NVIDIA GeForce GTX 460 上的 Code::Blocks 中运行它。

# python - 查找拉丁语/希腊语词根 NLTK

> ID：12335917
> 
> 赞同：2
> 
> 时间：2012-09-09T01:45:56.237
> 
> 标签：python, nltk, wordnet

有没有办法可以用 NLTK（可能还有 wordnet）在一个词中找到所述词根的拉丁词根/定义？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:16:20.600

你需要的是[lemmatizers](https://en.wikipedia.org/wiki/Lemmatisation)。拉丁语词形还原器是：

*   LemLat [对于[一个单词](http://www.ilc.cnr.it/lemlat/)，整个[文本文档]](http://www.ilc.cnr.it/lemlat/)

希腊词形还原器：

*   ELTL的[语法标注器](http://hermes.di.uoa.gr/gramtaggereng.htm)[[下载](http://hermis.di.uoa.gr:8080/gramtag/indexeng.html)]

# c# - Visual C# - 访问在另一个类中创建的对象的实例

> ID：12335918
> 
> 赞同：13
> 
> 时间：2012-09-09T01:46:03.263
> 
> 标签：c#, instance-variables

我提前道歉，根据范围可能会是一个相当简单/快速的答案，但我到处看了看，很惊讶没有找到答案。

我创建了一个名为**Soldier**的类，其中包含大约 100 个类变量。我需要一个用户输入信息，并在几个不同的类 Forms 的过程中逐渐构建一个**Solider**对象（因为有太多的数据需要收集一个）。

**我在Form1.cs**中创建了一个士兵 (tempSoldier) 的（空）实例，并开始**设置**我从用户那里收集的对象的类变量。

```
private void button1_Click(object sender, EventArgs e)
{
    Soldier tempSoldier = new Soldier();
    tempSoldier.surname = textbox1.text;
} 
```

我的问题：如何从其他类（Form2.cs、Form3.cs ...）中的 Form1.cs 访问对象实例（tempSoldier）？

我应该提到所有的表单（Form1.cs、Form2.cs ...）共享相同的命名空间。

提前致谢

编辑：下面的所有解决方案都有效，所以它只取决于你最喜欢哪一个。感谢您的反馈意见。一个小提示，确保你将所有的类修饰符设为公开，包括你的自定义类（在我的例子中是 Soldier.cs）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T01:51:25.363

您需要`Soldier`在更高的范围内声明实例。

一种方法是在*Form1*中声明它，然后将其传递给*Form2*，依此类推。

```
public class Form1
{
    private Soldier tempSoldier = new Soldier();

    private void button1_Click(object sender, EventArgs e)
    {
        tempSoldier = new Soldier();
        tempSoldier.surname = textbox1.text;
    }

    private void GotoNextStep()
    {
        // pass the existing instance to the next form
        Form2 form2 = new Form2(tempSoldier);

        // display form 2 ...
    }
} 
```

* * *

另一种可能性是在所有表单都可以访问的类中使用单例变量。

```
public class MyAppManager
{
    private static readonly Soldier _soldier = new Solider();

    public static Soldier SoldierInstance
    {
        get { return _soldier; }
    }
}

private void button1_Click(object sender, EventArgs e)
{
    MyAppManager.SoldierInstnace.surname = textbox1.text;
} 
```

如果表格有不同的顺序，前一种方法是可以的；如果可以在不同时间使用或重新访问不同的表格，则后者会更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T08:12:46.047

您还可以使 Soldier 成为静态变量：

```
public static Soldier soldier {get;set;}
private void button1_Click(object sender, EventArgs e)
{
    soldier = new Soldier();
    soldier.surname = textbox1.text;
} 
```

其他形式的代码：

```
Form1.soldier.name =""; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T01:54:36.777

您应该在表单上创建一个公开该士兵的公共属性。然后，您可以从其他表单访问此属性。

```
// ...

public Soldier Soldier { get; private set; }

private void button1_Click(object sender, EventArgs e)
{
  Soldier tempSoldier = new Soldier();
  tempSoldier.surname = textbox1.Text;

  this.Soldier = tempSoldier;
}

// ... 
```

您的`Form2`课程可能看起来像这样：

```
public partial class Form2
{
  private Form1 form1;

  public Form2(Form1 form1)
  {
    this.form1 = form1;

    this.InitializeComponent();
  }

  public void DoStuffWithForm1()
  {
    // ...

    string surname = this.form1.Soldier.surname;

    // ...
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T01:29:30.140

在您的另一个类中，创建一个以对象为参数的方法。

```
public class TryMe (TextBox newTextbox) {
newTextbox.Text = "Hello this is a text."
//You can also get the value of textbox of another form
var textString = newTextbox.Text;
} 
```

然后在您的主窗体中，使用您的对象作为参数调用该方法。在这种情况下，将 textbox1 添加到方法的参数中。

您的代码形式：

```
TryMe(textbox1); 
```

# javascript - CSS变换高度不起作用

> ID：12335920
> 
> 赞同：0
> 
> 时间：2012-09-09T01:46:46.657
> 
> 标签：javascript, jquery, css

我正在尝试为元素的高度属性设置动画，但由于某种原因它根本没有动画。

[**这是我要制作动画的小提琴。**](http://jsfiddle.net/uJCQV/)

HTML

```
<ul>
    <li>
        li 1
    </li>
    <li>
        li 2
    </li>
    <li>
        li 3
    </li>
</ul>​ 
```

CSS

```
ul.hide {
    height: 0px;
    overflow: hidden;
}
ul {
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
} 
```

JS：

```
setTimeout(function () { $('ul').addClass('hide'); }, 2000);
setTimeout(function () { $('ul').removeClass('hide'); }, 4000);​ 
```

有什么我想念或忘记的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:57:31.360

`height`如果它是自动的，即如果您没有明确设置它，我认为您无法制作动画。只需尝试添加`height: 50px;`到`ul`您的小提琴中。

改用`transform: scaleY(0);`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:57:15.557

见[http://jsfiddle.net/uJCQV/1/](http://jsfiddle.net/uJCQV/1/)

您可以使用

```
$('ul').css('height',$('ul').height())
setTimeout(function () {$('ul').addClass('hide');}, 2000);
setTimeout(function () { $('ul').removeClass('hide'); }, 4000); 
```

或者您也可以使用`max-height`：

```
ul.hide {
    max-height: 0px;
    overflow: hidden;
}
ul{max-height:999px;} 
```

[http://jsfiddle.net/uJCQV/2/](http://jsfiddle.net/uJCQV/2/)

# php - 防止在“Chrome/Firebug”的网络控制台中看到 URL

> ID：12335926
> 
> 赞同：0
> 
> 时间：2012-09-09T01:47:49.970
> 
> 标签：php, curl, https, http-headers

您能否让某人通过 iFrame/Script 标签访问 HTTPS URL（例如[https://graph.facebook.com/Enrique](https://graph.facebook.com/Enrique) '），而访问者仍然不知道下载的 URL 是什么，即使他们检查“网络控制台”或其他东西，

我可以自由使用类似的 PHP 'headers'，但我想远离服务器端的'cURL'，因为我只想让访问者使用他自己的代理访问 URL 来执行那个url 不是我的服务器（用于防止服务器负载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:54:44.833

不; 这是完全不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:01:49.500

没有。有一些方法可以对其进行混淆以使其更难理解，但没有什么防弹的。也许您可以尝试对文本部分进行 URL 编码。例如：

[https://graph.facebook.com/%45%6e%72%69%71%75%65](https://graph.facebook.com/%45%6e%72%69%71%75%65)

（我认为 chrome 会自动替换不必要的 url 编码字符。）

这是一些执行此转换的 javascript，我相信您可以在 PHP 中进行类似的操作。

```
function percentEncodeAllChars(str) {

    var strEncoded = '';

    for(var i = 0, ilen = str.length; i < ilen; i++) {

        var strHex = parseInt(str.charCodeAt(i)).toString(16);
        strEncoded += '%' + strHex;
    }

    return strEncoded;
}

function doEncode() {

    var strInput = document.getElementById('encode').value;

    document.getElementById('result').innerHTML = percentEncodeAllChars(strInput);
} 
```

[资源](http://2tap.com/2009/12/06/percent-encoding-aka-url-encoding-all-characters/)

# php - 我应该使用 foreach 让这个 PHP 脚本按预期工作吗？

> ID：12335927
> 
> 赞同：-1
> 
> 时间：2012-09-09T01:48:03.693
> 
> 标签：php, file-io, while-loop

我有一个脚本，它在目录中搜索包含特定字符串（例如 5126）的文件。然后，它重命名文件名中包含该字符串的每个文件，并在文件名前加上另一个字符串（例如'coursefile5126）。这一点工作正常。重命名字符串后，我希望将电子邮件发送给文件所在的人。目前，我的脚本只向数组中返回的最后一个人发送电子邮件，其中包含所有文件的链接。请参阅下面的示例和代码。

示例文件名：

*   Test_47-20120908-154525-5126.zip
*   Test_48-20120908-155253-5126.zip
*   Test_49-20120908-160226-5125.zip

示例数组：

*   电子邮件1@email.com, 51, 26
*   email2@email.com, 51, 25

如您所见，test_47 和 test_48 链接应该发送到 email1@email.com，test_49 应该发送到 email2@email.com，但目前，所有电子邮件都发送到数组中的最后一个电子邮件 (email2@email.com)。 com 在这个例子中）

谁能给我一个线索，让我知道我在哪里出错了？

谢谢。

```
 $dh  = scandir("courses/");
        ...some SQL query here that returns an array
  $i=0;
  while ($data= mysql_fetch_array($query)) {
  $j=1;
  //this is the array returned by the SQL query
  echo $data["email"]."-".$data["id_cart"]."-".$data["id_product"]."<br/>";
  while ($j<sizeof($dh)) {  //Ensures there are courses to look for

  // this looks for courses that have not yet been renamed and prefixes them with the string  'coursefile' if necessary

  if(end(explode("-",$dh[$j]))==$data["id_product"].$data["id_cart"].".zip" &&   reset(explode("-",$dh[$j])) != 'coursefile')
      {
       rename('courses/'.$dh[$j],'courses/'.'coursefile-'.$dh[$j]);                         

       //sends email   ---- this is where my problem lies I think
       $to      = $data["email"];
       $subject = 'Your link to download your course';
       $message = 'Link: http://www.website.com/courses/'.'coursefile-'.$dh[$j];
       $headers = 'From: contact@website.com' . "\r\n" .
       'Reply-To: contact@website.com' . "\r\n";

       mail($to, $subject, $message, $headers);
       }
       $j++;
       }             
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:15:54.467

您的代码有点难以理解，但从您的描述来看，这是我的建议：

您可以使用[glob](http://php.net/manual/en/function.glob.php)来简化搜索并删除所有不必要的条件。所以代码可以变成：

```
// This needs to be adjusted to the current settings.
$full_path = $current_path . '/courses';

...some SQL query here that returns an array
while ($data = mysql_fetch_array($query)) 
{
    // this is the array returned by the SQL query
    echo $data["email"]."-".$data["id_cart"]."-".$data["id_product"]."<br/>";

    // This is what we are looking for for every user
    $key = $data["id_cart"] . $data["id_product"];

    foreach (glob("{$full_path}/*-{$key}.zip") as $filename) 
    {
        // glob returns the full path so we need to split it from
        // the actual filename. I am assuming that the $full_path 
        // is known and it is the full path for the courses/ folder.
        // $real_filename contains the name of the file processed 
        // (used in checking if the file has been renamed and in renaming)
        $real_filename = str_replace($full_path, '', $filename);

        // Check if the file has already been processed i.e. renamed
        if (substr($real_filename, 0, 11) != 'coursefile-')
        {
            // There are files so, rename and then email
            rename($filename, $full_path . 'coursefile-' . $real_filename);                         

            // sends email
            $to      = $data["email"];
            $subject = 'Your link to download your course';
            $message = 'Link: http://www.website.com/courses/'
                     . 'coursefile-' . $real_filename;
            $headers = 'From: contact@website.com' . "\r\n" 
                     . 'Reply-To: contact@website.com' . "\r\n";

            $mail_status = mail($to, $subject, $message, $headers);
        }
    }
} 
```

高温高压

# php - 页面选项选择

> ID：12335929
> 
> 赞同：0
> 
> 时间：2012-09-09T01:48:57.950
> 
> 标签：php, html, dreamweaver

我正在尝试创建一个注册网站，用户在第一页上的三个选项中进行选择，选择后，可以移动到第二页，根据之前选择的选项显示不同的信息。

在 Registration_1.php 这是代码：

```
<?php
$clicked = $_POST["Next"];
if(isset($_POST['Reg_type']))
{
    header('Location:Registration_2.php');
}
elseif(isset($_POST['Next']))
{
    header('Location:Registration_1.php');
    echo "Error! You must select an option!";
    // display form again here
}
?>

<form name="frmtype" action="Registration_2.php" method="post" >
<input type="radio" name="Reg_type" value="1"/> Registering myself with credit card or bank account <br/>
<input type="radio" name="Reg_type" value="2"/> Registering multiple people using credit card or bank account <br/>
<input type="radio" name="Reg_type" value="3"/> Registering multiple people using a purchase order <br/>
<input type="submit" name="Next" value="Submit"/>
</form> 
```

如果他们只是单击提交而不选择选项并可能显示错误消息，我如何将用户重定向回此页面，如果他们选择了选项，则将他们发送到第 2 页？谢谢

编辑：添加了 if 块，但无论是否选择选项，仍会移至下一页。header() 不是移动到另一页的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:53:35.810

```
if(isset($_POST['Reg_type']))
{
    // execute some code
    // go to page 2
}
else
{
    echo "Error! You must select an option!";
    // display form again here
} 
```

文档：[$_POST 变量](http://php.net/manual/en/reserved.variables.post.php)

# java - 哪个布局管理器最适合行和列表示

> ID：12335936
> 
> 赞同：2
> 
> 时间：2012-09-09T01:51:43.907
> 
> 标签：java, swing, jtable, layout-manager

我有 2 行必须显示，每行将有 11 列。想知道哪个是最好的布局管理器最适合这个。组件应从左到右排列

![在此处输入图像描述](../Images/971febad27c2eeeaec8595beed9026ae.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T02:05:48.537

如果你真的知道你需要一个*布局管理器*而不是像 JTable 这样的组件，你应该考虑[`GridLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)或[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html). GridLayout 专为您描述的行和列而设计；而 GridBagLayout 为您提供更精细的控制并让您脱离标准网格（例如，执行您可能在 HTML 中使用 rowspan 或 colspan 执行的操作）。

[`BoxLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)对于单行或单列很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T02:02:19.650

这看起来像是[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的一个案例。

![带有组件的 JTable](../Images/be61c260a519112cc7882d2172344d9b.png)

> .. 必须将它们与组合框、微调器、..

有关自定义用户看到和控制的组件的更多详细信息，请参阅[概念：编辑器和渲染器。](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)请注意，上表使用复选框表示素食者。

* * *

OTOH，如果 a`JTable`不适合此用例，则实现它的最佳（Java SE）布局管理器可能是[`GroupLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html). 其他可能实现它的 Java SE 布局是`GridBagLayout`或嵌套`BoxLayout`/`GridLayout`如 Ray 所述。

参加第 3 方，该领域是广阔的。（JGoodies）`FormLayout`，`MigLayout`..我认为甚至有一个`TableLayout`地方。

# ruby-on-rails - Ruby - 为什么线程不尊重方法？

> ID：12335940
> 
> 赞同：0
> 
> 时间：2012-09-09T01:52:51.117
> 
> 标签：ruby-on-rails, ruby, multithreading

以下代码抛出消息而不用换行符放置它们。

```
threads = []
counter = 1000
counter.times do
     threads << Thread.new do 
        puts "This is a line."
        sleep 1
     end
end

threads.each {|t| t.join} 
```

结果是

```
This is a line. This is a line

This is a line.
This is a line.

and so on... 
```

无论如何以更整洁的方式打印结果行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T03:10:58.940

`puts`通过打印它的参数在内部工作，然后打印一个换行符。有时，线程会在两个操作之间中断，从而导致您看到的行为。你可以改为说：

```
 print "This is a line.\n" 
```

...这将在单个操作中写入整个字符串 - 包括换行符。

# java - spring mvc 和 hibernate 的代码生成器

> ID：12335951
> 
> 赞同：5
> 
> 时间：2012-09-09T01:55:25.017
> 
> 标签：java, spring, hibernate

我一直在 symfony 之类的 php 框架中工作，它们有代码生成器或 CLI 工具来生成诸如表单、模型之类的代码。在 ORM 中，如 propel、doct 等，他们有 cli 工具来生成数据库表的所有 DBA 模型。

spring mvc 框架和 Hibernate 框架中是否有这样的代码生成器？我在工作windows平台

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T03:03:41.177

请考虑使用[Spring Roo](http://www.springsource.org/spring-roo)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-30T14:25:38.290

您可以试试**Telosys Tools** ( [http://www.telosys.org](http://www.telosys.org) )，这个简单的代码生成器非常易于使用。

*   Eclipse 插件：[http ://marketplace.eclipse.org/content/telosys-tools](http://marketplace.eclipse.org/content/telosys-tools)
*   VSCode 插件：[https ://marketplace.visualstudio.com/items?itemName=telosysteam.telosys](https://marketplace.visualstudio.com/items?itemName=telosysteam.telosys)

它提供了一组模板来生成 JPA/Hibernates 实体您还可以使用 Spring MVC 或其他生成完全可操作的 Web 应用程序，请参阅教程：[https ://sites.google.com/site/telosystutorial/](https://sites.google.com/site/telosystutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T18:06:02.183

jHipster 可以做到这一点。

JHipster 是一个免费的开源应用程序生成器，用于使用 Angular 或 React（JavaScript 库）和 Spring 框架快速开发现代 Web 应用程序和微服务。

[https://www.jhipster.tech/](https://www.jhipster.tech/)

[https://www.jhipster.tech/tech-stack/](https://www.jhipster.tech/tech-stack/)

# c# - Win RT / Metro Windows 8 打印

> ID：12335956
> 
> 赞同：1
> 
> 时间：2012-09-09T01:56:34.047
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

嗨，我想知道你们中是否有人知道，Windows RT 是否支持收据打印机（用于 POS 系统）？

我读了这篇博 [文 http://blogs.msdn.com/b/b8/archive/2012/07/25/simplifying-printing-in-windows-8.aspx](http://blogs.msdn.com/b/b8/archive/2012/07/25/simplifying-printing-in-windows-8.aspx)

但是，不清楚他们是否支持这些类型的打印机，我想知道是否有人对此有任何想法。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:06:45.180

如果打印设备有 Windows 打印驱动程序，您应该能够从 WinRT 应用程序打印到它。

# coding-style - 向开源项目提交补丁

> ID：12335959
> 
> 赞同：0
> 
> 时间：2012-09-09T01:57:33.313
> 
> 标签：coding-style, open-source, refactoring

我对我在工作中使用的一个相当大的开源项目所做的拉取请求有点困惑。我不会透露该项目，但它包含大量主要由用户提交的脚本，用于监控关键任务系统或应用程序的各个方面。我找到了一个用户提交的 shell 脚本，我需要将它用于我自己的工作，但它有几个主要错误，而且在风格上是一个残骸。我修复了这些错误，并重构了几乎整个脚本，使其成为一个相当干净的“bash 形式”。我在脚本上做了一个拉取请求，项目负责人用引用拒绝了补丁：

> “这主要是编码风格的变化。非常感谢您的努力，但如果我们开始接受这种补丁，我们将一事无成。请尽量专注于此事，即真正需要修复的东西。谢谢！”

这是我在整个脚本中为提高可读性而更改 bash 编码样式的示例：

```
- start_time=`date +%s%N`
+ start_time=$(date +%s%N) 
```

这在开源项目中很常见吗？我承诺的大多数项目都是我自己的，而且我一直在重构风格上糟糕的代码。如果代码将被其他人使用，例如所讨论的脚本，难道不应该欢迎可用性重构吗？我只是有点困惑，因为该项目没有编码风格指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:06:55.313

您是否拆分了补丁，以便先修复错误，然后再更改样式？如果没有，我也会拒绝补丁。更改逻辑的补丁应尽可能小且独立。没有人愿意经历数十次样式更改以确保在尝试了解您修复的内容时它们对逻辑没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:29:07.400

这在开源项目中绝对不是通用的。我将仅举一个反例，来自最近的拉取请求：

[https://github.com/djcb/mu/pull/65](https://github.com/djcb/mu/pull/65)

我的拉取请求与 mu 的 Emacs 组件有关，称为 mu4e。我唯一的改变是使项目中的更多变量可用于编辑`M-x customize`（Emacs 等效于“编辑 -> 首选项”或“工具 -> 选项”）。任何程序逻辑都没有改变。如您所见，仅两个小时后，拉取请求就被合并了。（我以前从未为这个项目做过贡献，所以我没有根据我过去的贡献或类似的东西得到快速跟踪。）所以这是一个只有外观更改的拉取请求示例，它被愉快地接受而没有任何投诉。

至于为什么有问题的项目拒绝了您的补丁，也许他们只是固执或太骄傲以至于不能让其他人在他们的代码中乱七八糟或类似的东西，但另一方面，有正当理由不合并化妆品非- 面向用户的变化。如果他们接受您的代码并且他们至少承担最低限度的责任，他们将必须至少查看您所做的所有更改并确保您没有破坏某些内容，并确保您的代码更改与您的提交日志相匹配说你变了。我猜你的拉取请求在许多文件中改变了一大堆孤立的行或块，对吧？如果您进行全面搜索并将反引号替换为`$()`. 这种补丁可能很难验证，因为您逐行查看相同的更改并且您的眼睛呆滞，您会错过导致整个项目中断的关闭括号丢失的情况。

关键是即使你免费给他们代码，实际上合并你的代码也不是免费的，将你的代码集成到项目中所涉及的工作*必须*由运行项目的人完成，否则他们将合并他们无法信任的代码。在某些情况下，拥有该项目的人可能会查看您的更改声称要改进的内容，并做出合理的决定，即这些改进不能证明以负责任的方式合并您的代码所需的努力是合理的。如果您不同意，您可以自由地创建自己的分叉（不是“敌对”分叉，只是普通的“带有我的自定义的 Project X”分叉）并将您的更改放在那里，然后自己使用它们。如果您的更改真的值得拥有，人们可能会开始切换到您的分支，此时原始开发人员可能会重新考虑他们的立场并最终合并您的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T02:03:04.647

每个项目都有自己的规则和指导方针。你被告知这个项目的工作规则与你工作的规则不同。如果你想贡献，听起来你必须遵守他们的规则。（在辩论中我倾向于站在你这边——但当我不负责时，我会遵守那些负责人的规则！）

# jquery-mobile - jquery mobile Header 图标位置在 1.2.0-Beta-1 中不同

> ID：12335961
> 
> 赞同：2
> 
> 时间：2012-09-09T01:57:36.040
> 
> 标签：jquery-mobile

我在每个页面的标题中都有一个正确的注销按钮，它是这样定义的：

```
<div data-role="page" id="displaySchedule" data-title="Display Schedule">
<div data-role="header" data-theme="a">
<a href="#home" data-icon="home" data-iconpos="notext"></a>
<h1>Schedule</h1>
<div class="ui-btn-right">
<a class="logoffButton" data-role="button" id="logoffButton" href="#logout" data-icon="delete" data-iconpos="notext"></a>
</div>
..... 
```

这在 1.1.1 中运行良好。但是，当页面在 1.2.0-Beta-1 中显示时，标题如下所示（请注意 X 图标位于主页按钮的水平线下方（大约其高度的 1/2）和单词 Schedule ）。在 1.1.1 中，所有三个都正确排列。

![在此处输入图像描述](../Images/ba55b693a48d756829532967b8b8ec1a.png)

当然，任何帮助都会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:35:11.610

事实上，你不应该在 div 中包含你的右键。

试试：

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile.structure-1.2.0-beta.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.js"></script>

    </head>

    <body>

        <div data-role="page" id="displaySchedule" data-title="Display Schedule">
            <div data-role="header" data-theme="a">

                <a href="#home" data-icon="home" data-iconpos="notext"></a>
                <h1>Schedule</h1>
                <a class="logoffButton" data-role="button" id="logoffButton"
                    href="#logout" data-icon="delete" data-iconpos="notext"></a>

            </div>
        </div>

    </body>
</html> 
```

![截屏](../Images/8a22f652a478367bc295140501143156.png)

* * *

如果要**在 header 中添加多个对齐的按钮**，可以执行以下操作：

*   **将类** `class="ui-btn-right"`（或`class="ui-btn-left"`）添加到您的按钮/链接`<a>`中，这些按钮将位于标题标题的**右侧**（**左侧）**

*   使用 CSS`margin-right`和/或`margin-left`将不同按钮从同一侧（右/左）分开；否则，按钮将堆叠在一起。

**这是一个包含几个按钮的简单示例：**

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>        

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile.structure-1.2.0-beta.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.js"></script>                        
    </head>

    <body>
        <div data-role="page" id="page_1">
            <div data-role="header" data-theme="a">

                <!-- 1st LEFT BUTTON FROM THE LEFT -->
                <a href="#" data-icon="arrow-l" data-iconpos="notext" 
                    class="ui-btn-left"></a>

                <!-- 2nd LEFT BUTTON FROM THE LEFT -->
                <a href="#" data-icon="arrow-r" data-iconpos="notext" 
                    class="ui-btn-left" style="margin-left: 30px"></a>

                <!-- HEADER TITLE -->   
                <h1>hello</h1>

                <!--  1st RIGHT BUTTON FROM THE RIGHT -->
                <a href="#" data-icon="gear" data-iconpos="notext" 
                    class="ui-btn-right"></a>

                <!--  2nd RIGHT BUTTON FROM THE RIGHT -->
                <a href="#" data-icon="arrow-r" data-iconpos="notext" 
                    class="ui-btn-right" style="margin-right: 30px;"></a>

                <!--  3rd RIGHT BUTTON FROM THE RIGHT -->
                <a href="#" data-icon="arrow-l" data-iconpos="notext" 
                    class="ui-btn-right" style="margin-right: 60px;"></a>

            </div>
        </div>
    </body>
</html> 
```

这是上面示例的屏幕截图：

*   **在纵向模式下：**

![人像模式](../Images/125cfab6f7c7c13c07e49937ad09b81e.png)

*   **在横向模式下：**

![横向模式](../Images/8571631928f8b361c6486cd0be6701f9.png)

# api - 什么是查找邮政编码的纬度和经度的好 API？

> ID：12335962
> 
> 赞同：5
> 
> 时间：2012-09-09T01:57:45.743
> 
> 标签：api, geocoding, latitude-longitude

任何人都知道一个很好的免费 API 来获取邮政编码的坐标？我目前使用的是

```
http://forecast.weather.gov/zipcity.php?inputstring=00000 
```

但这不是真正的 API，可能会发生变化。我不需要确切的位置，此信息的目的是查找日出/日落时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-23T20:21:48.230

由于我只需要对一堆地址进行地理编码并将其存储在数据库中，因此我无法使用 Google API，因为它违反了 TOS。如果可能的话，我也在寻找批处理。我的搜索引导我找到 2 个 API。

第一个 API 来自[MapQuest](http://open.mapquestapi.com/geocoding/ "开放地理编码服务 - MapQuest 平台")。注册密钥并开始使用该服务很容易。免费版本的问题是，有时您会得到地址的空白坐标。显然企业版没有这个问题。唉，我不得不这样做，因为它不适合我的需要。

我偶然发现的第二颗宝石来自[美国人口普查局](http://geocoding.geo.census.gov/geocoder/ "地理编码器")。它为 API 访问提供 REST 接口，并且不需要 API 密钥。到目前为止，在我的测试中，我的所有查询都返回了一个匹配项。我唯一担心的是我没有看到关于使用限制等的空话。这是文档的链接：http: [//geocoding.geo.census.gov/geocoder/Geocoding_Services_API.pdf](http://geocoding.geo.census.gov/geocoder/Geocoding_Services_API.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T02:06:11.903

我认为你应该看看[Google API。](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T02:08:30.920

我使用[Yahoo Placefinder API](http://developer.yahoo.com/geo/placefinder/)取得了成功。

您也可以使用 Google Map 的 API，但我相信使用它也需要将地图数据嵌入到您的站点中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-15T05:12:06.737

```
<?php

    $zipcode=$_POST('zipcode');

    $url = "http://maps.googleapis.com/maps/api/geocode/json?address=".$zipcode."&
            sensor=false";

    $details=file_get_contents($url);

    $result = json_decode($details,true);

    $account_lat=$result['results'][0]['geometry']['location']['lat'];

    $account_long=$result['results'][0]['geometry']['location']['lng'];

    echo "Latitude :" .$account_lat;

    echo '<br>';

    echo "Longitude :" .$account_long; 
```

?>

# magento - Magento 核心折扣

> ID：12335964
> 
> 赞同：0
> 
> 时间：2012-09-09T01:58:23.230
> 
> 标签：magento, discount, coupon

我已经为此苦苦挣扎了一段时间，应该很直截了当，但是...我正在尝试使用magento cart.coupon.add api将优惠券应用于订单。该产品是**虚拟**的 ，这是我的代码（在我来到这里之前，我已经尝试了所有可以在谷歌上找到的东西）：

```
protected function _applyCoupon($quoteId, $couponCode, $store = null)
{
    $coupon = Mage::getModel('salesrule/coupon');
    $coupon->loadByCode($couponCode);
    Mage::log('_applyCoupon('.$couponCode.')');
    $quote = $this->_getQuote($quoteId, $store);

    if (!$quote->getItemsCount()) {
   //     $this->_fault('quote_is_empty');
    }

    $oldCouponCode = $quote->getCouponCode();
    if (!strlen($couponCode) && !strlen($oldCouponCode)) {
        return false;
    }
    try {
        //$quote->getShippingAddress()->setCollectShippingRates(true);
        $quote->setCouponCode($couponCode);
        $quote->setTotalsCollectedFlag(false)->collectTotals();
        $quote->collectTotals();
        $quote->save();
        Mage::getModel("checkout/session")->setData("coupon_code",$couponCode);
        Mage::getModel('checkout/cart')->getQuote()->setCouponCode($couponCode)->save();
        Mage::getModel('checkout/cart')->getQuote()->collectTotals();
        Mage::getModel('checkout/cart')->getQuote()->save();
        Mage::log("_applyCoupon : Set coupon to quote:".$quote->getCouponCode());

    } catch (Exception $e) {
        $this->_fault("cannot_apply_coupon_code", $e->getMessage());
    }
        Mage::log('3');

    if ($couponCode) {
        Mage::log("Coupon applied");
        if (!$couponCode == $quote->getCouponCode()) {
            Mage::log('3.2');
            $this->_fault('coupon_code_is_not_valid');
        }
    }

    return true;
} 
```

我也尝试将优惠券应用于地址：

```
protected function applyDiscountToAddress($address,$quote)
{
    Mage::log('applyDiscountToProduct ...');
    $coupon = Mage::getModel('salesrule/coupon');
    Mage::log("checkoutprocess: checkout/session:".Mage::getModel("checkout/session")->getData("coupon_code"));
    $coupon->loadByCode(Mage::getModel("checkout/session")->getData("coupon_code"));
    $rule = Mage::getModel('salesrule/rule');
    $rule->load($coupon->getRuleId());
    $discountamount = $rule->getDiscountAmount();
    $dbldiscount = 0.00 + $discountamount;
    $grandTotal = Mage::getModel('checkout/cart')->getQuote()->getGrandTotal();
    $subTotal = Mage::getModel('checkout/cart')->getQuote()->getSubtotal();
    Mage::log('applyDiscountToProduct $grandTotal:'.$grandTotal);
    Mage::log('applyDiscountToProduct $subTotal:'.$subTotal);

    $gTotal = $grandTotal - $dbldiscount;
    $address->setDiscountAmount($dbldiscount)
        ->setBaseDiscountAmount($dbldiscount)
        ->setGrandTotal($gTotal)
        ->setBaseGrandTotal($gTotal);

    $grandTotal     = $address->getGrandTotal();
    $baseGrandTotal = $address->getBaseGrandTotal();
    Mage::log('applyDiscountToProduct Address:$grandTotal:'.$grandTotal);
    Mage::log('applyDiscountToProduct Address:$baseGrandTotal:'.$baseGrandTotal);

    $totals     = array_sum($address->getAllTotalAmounts());
    $baseTotals = array_sum($address->getAllBaseTotalAmounts());

    $address->setGrandTotal($grandTotal+$totals);
    $address->setBaseGrandTotal($baseGrandTotal+$baseTotals);
} 
```

优惠券是有效的，但在 Magento 管理员中下订单后，我看到折扣金额 = 0.0，并且用户已从他的信用卡中扣除全额费用。任何人....？帮助...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:03:27.290

终于找到答案了

`setCouponCode()`在添加任何要引用的项目之前，我需要先打电话。

```
$quote= Mage::getModel('sales/quote')->setCouponCode($couponCode); 
```

# iphone - 向 iPhone 上的 SharePoint 声明身份验证

> ID：12335967
> 
> 赞同：8
> 
> 时间：2012-09-09T01:59:56.520
> 
> 标签：iphone, ios, sharepoint, sharepoint-2010, claims-based-identity

我为 iPhone 制作了一个简单的 SharePoint 客户端应用程序，它需要访问一些 SharePoint Web 服务（主要是 /_vti_bin/Lists.asmx）。我无法弄清楚如何在较新的 SharePoint 环境（例如 Office365）上执行此操作。

使用具有基于表单的身份验证的旧 BPOS 环境，我能够通过简单地实现`didReceiveAuthenticationChallenge`方法对这些服务进行身份验证；

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
NSURLCredential *newCredential = [NSURLCredential credentialWithUser:username
                                               password:password
                                            persistence:NSURLCredentialPersistenceForSession];
[[challenge sender] useCredential:newCredential
       forAuthenticationChallenge:challenge];
} 
```

这显然不再适用于具有声明身份验证的 SharePoint 网站，因此我进行了一些研究，发现我需要`FedAuth`将 cookie 附加到请求中。

[http://msdn.microsoft.com/en-us/library/hh147177.aspx](http://msdn.microsoft.com/en-us/library/hh147177.aspx)

根据这篇文章，使用 .NET 应用程序，似乎可以`FedAuth`使用 WININET.dll 检索那些 HTTPOnly cookie，但我想这在 iPhone 上不可用？

然后，我看到[SharePlus](http://itunes.apple.com/us/app/shareplus-sharepoint-mobile/id364895421?mt=8)应用程序`UIWebView`首先在浏览器屏幕上显示并让用户登录到他们的 Office365 帐户（这与上面文章的“为远程身份验证启用用户登录”部分中解释的概念相同）。

因此，我尝试查看是否可以`FedAuth`通过登录 Office365 帐户以某种方式访问​​这些 cookie `UIWebView`，但`[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]`没有让我访问 HTTPOnly cookie。

有没有一种方法可以在 iPhone 应用程序上实现声明身份验证，而不需要指定的中间 .NET 服务来处理身份验证，或者要求用户关闭这些 cookie 上的 HTTPOnly 属性？

抱歉，我对 SharePoint 还很陌生，所以我什至可能没有找到正确的方向，但如果有任何关于让声明身份验证在 iPhone 应用程序上工作的建议，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:04:30.137

我自己已经弄清楚了。不得不嘲笑我自己的愚蠢和不耐烦。

首先，`[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]`一定要让你访问 HTTPOnly cookie。但是，当用户在 上登录 Office 365 时`UIWebView`，`(void)webViewDidFinishLoad:(UIWebView *)webView`委托方法会被调用多次，因此您只需要等到 FedAuth 出现在 cookie jar 中即可。

这是我的`(void)webViewDidFinishLoad:(UIWebView *)webView`实现；

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    NSArray *cookiesArray = [storage cookies];
    for (NSHTTPCookie *cookie in cookiesArray) {
        if ([[cookie name] isEqualToString:@"FedAuth"]) {
            /*** DO WHATEVER YOU WANT WITH THE COOKIE ***/
            break;
        }
    }
} 
```

获取 cookie 后，只需在调用 SharePoint Web 服务时将其附加到`NSURLRequest`using方法即可。`(void)setAllHTTPHeaderFields:(NSDictionary *)headerFields`

希望这可以帮助某人。

# c - 指针之谜/noobish 问题

> ID：12335968
> 
> 赞同：3
> 
> 时间：2012-09-09T02:00:03.560
> 
> 标签：c, pointers

我最初是一名 Java 程序员，现在正在为 C 尤其是 C 的指针而苦苦挣扎。

我的想法是在命令行上从用户那里接收一个字符串到一个字符指针中。然后我想访问它的各个元素。后来的想法是设计一个可以反转元素顺序的函数。（我想在文本中使用字谜。）

我的代码是

```
#include <stdio.h>

char *string; 

int main(void)
{
printf("Enter a string: ");
scanf("%s\n",string);
putchar(*string);

int i;
for (i=0; i<3;i++)
{
  string--;
}
putchar(*string);

} 
```

（对不起，代码标记不起作用）。我想做的是先尝试访问单个元素。如果字符串是“Santillana”并且指针设置在最开始（在 scanf() 之后），则内容 *string 应该是 S。如果我不知道，指针应该恰好设置在 '\0'在 scanf() 之后，备份几个步骤（字符串 - 重复）应该会以带有 *string 的字符的方式产生一些东西。但是，这两个 putchar() 都会产生分段错误。

我在做一些根本上错误的事情，而一些根本性的事情已经逃脱了我。对于我的缺点的任何建议，我将永远感激不尽，最重要的是任何说明这些特殊问题的书籍/资源的提示。就这一点而言，两本厚厚的 C 书和参考手册已被证明毫无用处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T02:08:05.327

您还没有为字符串分配空间。你需要类似的东西：

```
char string[1024]; 
```

您也不应该递减变量`string`。如果它是一个数组，你不能这样做。

你可以简单地做：

```
putchar(string[i]); 
```

或者您可以使用指针（指向建议的数组）：

```
char *str = string;

for (i = 0; i < 3; i++)
    str++;

putchar(*str); 
```

但是您可以将该循环缩短为：

```
str += 3; 
```

或者干脆写：

```
putchar(*(str+3)); 
```

等等。

* * *

您应该检查`scanf()`是否成功。您应该限制输入字符串的大小以避免缓冲区（堆栈）溢出：

```
if (scanf("%1023s", string) != 1)
    ...something went wrong — probably EOF without any data... 
```

请注意，`%s`跳过前导空格，然后将字符读取到下一个空格（“单词”的简单定义）。将换行符添加到格式字符串几乎没有什么区别。你可以考虑`"%1023[^\n]\n"`；最多可查找 1023 个非换行符，后跟一个换行符。

您应该开始避免使用全局变量。有时，它们是必要的，但在此示例中并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:10:37.853

另一方面，使用 scanf(3) 是不好的做法。您可能需要研究 fgets(3) 或类似函数，以避免与 scanf(3) 相关的常见陷阱。

# sql - 避免加入 MS Access 删除查询

> ID：12335973
> 
> 赞同：1
> 
> 时间：2012-09-09T02:01:51.057
> 
> 标签：sql, ms-access

我正在尝试创建一个删除查询以根据另一个主表中是否存在一个字段来从一个表中删除记录。情况是我正在将新记录导入数据库，但我想删除已经导入的记录，*即*在主表中已经有一个帐户。但是，我需要加入的字段并不相等：它以恒定的三字母代码 XYZ 为前缀。

```
 tbl_to_import.Account     master_table.Account
 123456                    XYZ.123456
 345678                    XYZ.345678 
```

为了避免在删除查询中使用连接，我尝试了以下操作：

```
 Delete tbl_to_import.*
 From tbl_to_import
 Where Exists( Select master_table.Account From master_table 
 Where master_table.Account =  ("XYZ."& tbl_to_import.Account) ) = True; 
```

但是，查询会在 Access 中挂起。我不确定我做错了什么。我没有收到错误消息，但查询运行时没有产生任何内容，我最终将其停止。在这种情况下，tbl_to_import 有 2,700 条记录，master_table 有 50,000 条记录。此外，我通过 ODBC 连接到 master_table。

最初，我使用连接构造了两个查询来执行删除。tbl_to_import.Account 有一个称为 ID 的主键。一个查询**qry_find_existing_accounts**在 tbl_to_import 中找到了在 master_table.Account 中存在对应帐户的 ID 号：

```
 SELECT DISTINCTROW tbl_to_import.ID AS DELETEID
 FROM tbl_to_import LEFT JOIN master_table 
      ON ("XYZ."& tbl_to_import.Account) = master_table.Account
 WHERE ((("XYZ." & [Account])=[master_table].[Account])); 
```

然后我使用这个查询来构造删除查询：

```
 DELETE DISTINCTROW tbl_to_import.*, tbl_to_import.ID
 FROM tbl_to_import RIGHT JOIN qry_find_existing_accounts 
      ON tbl_to_import.ID =qry_find_existing_accounts.DELETEID
 WHERE (((tbl_to_import.ID)=[qry_find_existing_accounts].[DELETEID])); 
```

查询**qry_find_existing_accounts**工作正常；但是，当我尝试运行第二个查询以删除时，出现错误：**无法从指定的表中删除**。通常，当我收到此错误时，这是​​因为我没有只选择唯一记录，但是，我在两个查询中都使用了 DISTINCTROW。

任何想法我做错了什么以及如何完成我需要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:08:43.080

我会使用更简单的嵌套 SQL 语句：

```
Delete tbl_to_import.*
From tbl_to_import
Where "XYZ." & tbl_to_import.Account In
(Select master_table.Account From master_table); 
```

这应该相当快，尤其是在您的 Account 字段被索引的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:09:20.110

我认为您可以简化查询；根据 ID 删除，其中 ID 在查询中：

```
DELETE * FROM tbl_to_import 
    WHERE tbl_to_import.ID IN (
        SELECT DISTINCT [DELETED] FROM qry_find_existing_accounts
    ) 
```

# java - 如何从选定的集合中找到最近的城市

> ID：12335981
> 
> 赞同：2
> 
> 时间：2012-09-09T02:03:30.183
> 
> 标签：java, google-maps, postgis, openstreetmap

我需要从一组选定的城市中找到最近的城市。

我们公司有一份子公司名单（在我国大约有 100 家）。我们每天收到大约 3000 个请求。此请求应分配给子公司（按地理距离）。

有没有 API 可以做到这一点？

最好的是（java）GoogleMaps API 或类似的网络服务。

最好的问候，克里斯蒂安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:07:53.027

我要做的是根据地理距离构建您子公司的[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi_diagram#Illustration)，并将该图以可在您的代码中使用的形式存储。然后，查找每个请求的包含单元格，这将告诉您哪个子公司是最接近的。

如果您真的想使其精确，您可以使用 OSM 的道路网络根据行驶距离来构建图表，而不仅仅是地理上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:49:53.467

[从Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)获取坐标，从 java 应用程序发出请求应该很简单。计算每个城市到每个城市的大圆距离。我不得不承认结果可能是 300 乘 300？大批。但是它可能只包含整数。将其保存在内存中以备将来请求。查找行或列中编号最小的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T18:29:17.930

一个老问题，对你来说可能为时已晚。

在绝对精度不是本质的情况下，速度问题的一个很好的近似值是围绕一个点绘制一个矩形（您需要在此处找到最近的子公司）。该矩形本身将具有 NE 和 SW 坐标边界（或 NW/SE）。

要找到最近的子公司，需要找到所有的NE坐标比矩形的“小”和“多”的SW边界。

我引用“更多”和“更少”是因为它们的含义可能不同，具体取决于您在地球上的位置。

几年前，我为自己的需要写了[https://github.com/grumlimited/geocalc 。](https://github.com/grumlimited/geocalc)查看有关名称“BoundingArea”的部分。

# mysql - MYSQL ORDER BY 与 WHERE 子句中的值数组

> ID：12335983
> 
> 赞同：0
> 
> 时间：2012-09-09T02:04:00.950
> 
> 标签：mysql, sql, arrays, sql-order-by

我正在处理搜索脚本的一部分，其中解析提交的搜索字符串并将每个重要术语放入数组中。然后在 WHERE 子句中循环该数组以搜索 MYSQL 数据库中的多个列。这是一个示例 SQL 代码：

```
$sql = "SELECT title, question, tag1, tag2, tag3, tag4, tag5 FROM question WHERE ";

while(list($key,$val)=each($split_stemmed)){
          if($val<>" " and strlen($val) > 0){
          $sql .= 
           "(title LIKE '$val%' 
          OR question LIKE '$val%' 
          OR tag1 LIKE '$val%' 
          OR tag2 LIKE '$val%' 
          OR tag3 LIKE '$val%' 
          OR tag4 LIKE '$val%' 
          OR tag5 LIKE '$val%') OR";
          }
}
          $sql=substr($sql,0,(strLen($sql)-3));
          $sql .= "GROUP BY q_id ORDER BY 
           ((title LIKE '$val%') + 
            (question LIKE '$val%') + 
            (tag1 LIKE '$val%') + 
            (tag2 LIKE '$val') + 
            (tag3 LIKE '$val%') +
            (tag4 LIKE '$val%') +
            (tag5 LIKE '$val%')) desc, title asc"; 
```

我遇到的问题是让 ORDER BY 正常工作。ORDER BY 的目的是将查询结果从搜索字符串上的最多命中的顺序排列到最少。我的假设是我需要在 ORDER BY 子句中再次循环遍历数组，但不确定如何执行此操作，或者我什至在该假设中是否正确。有帮手吗？

我知道我可以使用 mysql 全文搜索更简单地完成此操作，但使用的表是 InnoDB，所以我认为目前还不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:52:24.947

需要考虑的几个问题...

1) ORDER BY 表达式中任何列 tag1、tag2、tag3... 中的 NULL 值将为整个表达式返回 NULL。考虑：

```
SELECT 0 + NULL + 1 + 0 
```

如果所有这些列都定义为 NOT NULL，那么这不是问题。但更一般地说，您希望与 NULL 值隔离...

```
ORDER BY ( IFNULL(title    LIKE '$val%'),0) + 
           IFNULL(question LIKE '$val%'),0) + 
           IFNULL(tag1     LIKE '$val%'),0) + 
           IFNULL(tag2     LIKE '$val' ),0) + 
```

- 或者替代地 -

```
ORDER BY ( IFNULL(title   ,'') LIKE '$val%') +
           IFNULL(question,'') LIKE '$val%') +
           IFNULL(tag1    ,'') LIKE '$val%') +
           IFNULL(tag2    ,'') LIKE '$val' ) + 
         ) 
```

（似乎您缺少`%`基于模式的 on tag2 ，但遗漏完全有可能是故意的

2）根本不清楚为什么您需要`GROUP BY q_id`在查询中使用 a 。

* * *

我建议您通过使用 ORDER BY 子句中的表达式进行测试，并将其复制到您的 SELECT 列表中，然后运行查询以查看它返回的值。

在 MySQL 中，如果将该表达式添加到 SELECT 列表并为其指定别名，则可以在 ORDER BY 上引用别名。

```
 SELECT expr AS match_count, ...
   FROM
  ORDER BY match_count DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:58:17.817

您正在寻找的功能——在多个列中搜索搜索词并按相关性排序——正是[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)的设计目的。如果可能的话，你应该使用它，因为从长远来看它会减少你的头痛。

如果您绝对必须以这种方式实现，那么有必要将*LIKE*语句移动到*SELECT*子句中，以便您可以对它们进行求和。像这样：

```
SUM (CASE WHEN title LIKE '$val%' THEN 1 ELSE 0 END
    + CASE WHEN question LIKE '$val%' THEN 1 ELSE 0 END 
    + CASE WHEN tag1 LIKE '$val%' THEN 1 ELSE 0 END 
    ... etc
) AS relevance 
```

然后只选择匹配项，您可以使用`HAVING relevance > 0`. 并且要订购，您只需使用`ORDER BY relevance DESC`（因为上面的*相关性*列将为您提供匹配列的数量）。

# ruby-on-rails - Rails：查找数据库记录

> ID：12335985
> 
> 赞同：0
> 
> 时间：2012-09-09T02:04:39.153
> 
> 标签：ruby-on-rails

为了提高我对 Rails 的理解，我正在转换一个使用 data_mapper 的 Sinatra 应用程序。

我正在尝试为搜索数据库并返回所寻求记录的第一个实例的数据映射器“第一”方法找到最佳替代品。

任何人都可以评论这样做是否正确，或者是否有更好的解决方案？

**情况 #1** 西纳特拉

```
url = Url.first(:original => original) 
```

Rails（这两个都好吗？）

```
url = Url.find_by_original(original) #this  find_by_original
url = Url.where(:first_name => 'original') 
```

**情况#2**

辛纳特拉

```
raise 'Someone has already taken this custom URL, sorry' unless Link.first(:identifier => custom).nil? 
```

我的 Rails（带查找）

```
raise 'Someone has already taken this custom URL, sorry' unless Link.find(:identifier => custom).nil?  #this  Link.find 
```

原始上下文是一种缩短 url 的方法

```
def self.shorten(original, custom=nil)
    url = Url.first(:original => original) 
    return url.link if url    
    link = nil
    if custom
      raise 'Someone has already taken this custom URL, sorry' unless Link.first(:identifier => custom).nil?
      raise 'This custom URL is not allowed because of profanity' if DIRTY_WORDS.include? custom
      transaction do |txn|
        link = Link.new(:identifier => custom)
        link.url = Url.create(:original => original)
        link.save        
      end
    else
      transaction do |txn|
        link = create_link(original)
      end    
    end
    return link
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:15:56.580

您可以在模型上使用验证器。只需`validates_uniqueness_of :first_name`在 Url 模型 (app/models/url.rb) 中做一个。[Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers)中还有其他可用的验证

*编辑*

如果你真的想手动查找这样的记录是否存在。你可以做`Url.find(:first, :conditions => { :first_name => 'original' })`并检查 nil

```
raise 'Someone has already taken this custom URL, sorry' unless Link.find(:first, :conditions => { :identifier => custom }).nil? 
```

此外，如果您是 Rails 新手，可能需要查看[查询界面](http://guides.rubyonrails.org/active_record_querying.html)。就个人而言，我喜欢使用[squeel](https://github.com/ernie/squeel) gem，所以我的查询是严格的 ruby​​，而不是混合 ruby​​ 和 sql 语句。

# c++ - 如何将网格归一化为 -1 到 1，然后从归一化网格恢复为原始网格？

> ID：12335989
> 
> 赞同：0
> 
> 时间：2012-09-09T02:05:45.593
> 
> 标签：c++, c, math, opengl, directx

我有一个 X、Y、Z 格式的网格模型。可以说。

```
Points *P; 
```

第一步，我想将此网格归一化为 (-1, -1, -1) 到 (1, 1, 1)。这里的归一化意味着将此网格拟合到 (-1, -1, -1) 到 (1, 1, 1) 的框中。

然后我对标准化网格进行了一些处理，最后我想将尺寸恢复为与原始网格相似。

**step-1：** P = 原始网格尺寸；

**步骤 2：** nP = 归一化（P）；// 从 (-1, -1, -1) 到 (1, 1, 1)

**step-3:** cnP = 用 (nP) 做某事，顶点数量增加或减少。

**step-4:** 原始网格尺寸 = Revert(cnP); // 尺寸应与原始网格相同

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T02:17:18.053

它很容易使用形状函数。这是两点的一维示例：

```
-1 <= u <= +1
x(u) = x1*(1-u)/2.0 + x2*(1+u)/2.0
x(-1) = x1
x(+1) = x2 
```

您可以使用 Jacobbean 在坐标系之间进行转换。

让我们看看它在 2D 中的样子：

```
-1 <= u <= =1
-1 <= v <= =1
x(u, v) = x1*(1-u)*(1-v)/4.0 + x2*(1+u)*(1-v)/4.0 + x3*(1+u)*(1+v)/4.0 + x4*(1-u)*(1+v)/4.0
y(u, v) = y1*(1-u)*(1-v)/4.0 + y2*(1+u)*(1-v)/4.0 + y3*(1+u)*(1+v)/4.0 + y4*(1-u)*(1+v)/4.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T12:08:18.410

我知道在编程中迷失方向并完全错过底层数学的简单性是多么容易。但相信我，这真的很简单。

解决您的问题的最直观的方法可能是：

1.  `x`确定所有三个坐标轴（即`y`和）的最小值和最大值`z`。此信息包含在立方体的八个角顶点中。将这六个值保存在六个变量中（例如`min_x`、`max_x`等）。

2.  对于网格中的所有点`p = (x,y,z)`，计算

    ```
    q =  ( 2.0*(x-min_x)/(max_x-min_x) - 1.0
           2.0*(y-min_y)/(max_y-min_y) - 1.0
           2.0*(z-min_z)/(max_z-min_z) - 1.0 ) 
    ```

    现在`q`等于`p`转换为区间`(-1,-1,-1) -- (+1,+1,+1)`。

3.  在这个中间网格上做任何你需要做的事情。

4.  通过执行逆操作将所有坐标转换`q = (xx, yy, zz)`回原始网格：

    ```
    p =  ( (xx+1.0)*(max_x-min_x)/2.0 + min_x
           (yy+1.0)*(max_y-min_y)/2.0 + min_y
           (zz+1.0)*(max_z-min_z)/2.0 + min_z ) 
    ```

5.  清理你造成的任何混乱并继续你的程序的其余部分。

这很容易，找出哪个库包含这些函数可能比自己编写它们要多得多。

# java - 找不到符号 - 构造函数（java）

> ID：12335996
> 
> 赞同：2
> 
> 时间：2012-09-09T02:07:35.217
> 
> 标签：java, constructor

```
public class Picture
{

    private Square s1;
    private Square s2;
    private Square s3;
    private Square s4;
    private Square s5;
    private Square s6;
    private Square s7;
    private Square s8;
    private Square s9;

    /**
     * Constructor for objects of class Picture
     */
    public Picture()
    {
        // nothing to do... instance variables are automatically set to null
    }

    /**
     * Draw this picture.
     */
    public void draw()
    {
      s1 = new Square(23,87,104,"red",true);
      s2 = new Square(23,112,104,"yellow",true);
      s3 = new Square(23,137,104,"magenta",true);
      s4 = new Square(23,87,129,"blue",true);
      s5 = new Square(23,112,129,"green",true);
      s6 = new Square(23,137,129,"yellow",true);
      s7 = new Square(23,87,154,"magenta",true);
      s8 = new Square(23,112,154,"red",true);
      s9 = new Square(23,137,154,"blue",true);
    }

} 
```

我必须为班级创建一个 rubix 立方体，但似乎无法让它工作。我不断收到错误：

```
cannot find symbol - constructor Square(int,int,int,java.lang.String,boolean) 
```

有谁知道我哪里出错了？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T02:09:42.637

您尚未包含 的源代码`Square`，但我可以告诉您，它没有具有这些参数的公共构造函数。这些行导致了问题：

```
s1 = new Square(23,87,104,"red",true); // etc 
```

你的`Square`类需要有这样的构造函数：

```
public class Square {
    public Square(int a, int b, int c, String color, boolean flag) {
    }
} 
```