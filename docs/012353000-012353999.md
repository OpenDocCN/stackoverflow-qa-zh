# StackOverflow 问答 12353000-12353999

# javascript - Handlebars.js 和多个模板

> ID：12353001
> 
> 赞同：0
> 
> 时间：2012-09-10T13:44:23.513
> 
> 标签：javascript, json, handlebars.js

我有一个场景，我从服务器接收一个 json 格式的对象数组，我需要根据被传回的对象的内容类型加载不同的把手模板。例如，我的网站由多个内容块组成，这些块的显示方式各不相同。因此，我将拥有一个宽度相同且包含不同内容的块，而不是另一个可能具有不同宽度并包含需要以不同方式设置样式的完全不同类型的内容的块。我想使用把手，这样我就不会用 js 构建一大堆 html，然后将其插入 DOM。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:00:03.323

假设您无法控制来自服务器的响应，则在页面加载时，您可以将模板预编译为 javascript 对象，由您用来确定用于 JS 对象的适当模板的启发式方法作为键。然后在收到数据时使用该映射来呈现模板。

如何预加载此模板映射并进行渲染取决于您使用的 JS 库（如果有）。

如果您提供有关模板、数据和环境的更多详细信息，则可能可以提供一些代码。

# java - 在 Android Java 中使用 JSoup

> ID：12353003
> 
> 赞同：0
> 
> 时间：2012-09-10T13:44:33.913
> 
> 标签：java, android, jsoup

```
package com.example.application;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

import com.example.androidtablayout.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class PhotosActivity extends Activity  {

    public void onCreate(Bundle savedInstanceState) {

        String htmlCode = "";

            Document doc;
              try {
                  //Problem start
            doc = Jsoup.connect("http://www.example.com/").get();
            Element content = doc.select("a").first();
                    String variable = content.text();
                  // Problem end
                    TextView t = new TextView(this);
                    t=(TextView)findViewById(R.id.textView3); 
                    t.setText(variable);
               } catch (IOException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
            }

            super.onCreate(savedInstanceState);
            setContentView(R.layout.photos_layout);

    }
} 
```

我的问题是 JSoup 框架。在“问题”行之间。我采取“意外停止错误”。

当我像这样放置“htmlCode”变量时

```
t.SetText(htmlCode); 
```

这是工作，但我得到了所有的 html 源代码。

主要问题是什么，我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:59:55.310

你的代码有很多问题：

*   `super.onCreate()`应该永远是你自己的第一个电话`onCreate()`

*   您在最后调用，但在 catch 子句中`setContentView()`尝试在此之前调用。`findViewById()`那时，您`Activity`还没有内容视图，因此`findViewById()`将返回`null`- 结果`NullPointerException`很可能是您的代码崩溃的原因。

*   您在 UI 线程上执行 IO。不要那样做，Android 会强制退出你的应用，因为 IO 是不可预测的，你的应用会无响应，网络 IO 更糟糕。查看[AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask)，了解如何从 UI 线程执行 IO，然后异步更新您的`TextView`.

另外，请查看[logcat](https://stackoverflow.com/a/3280126/180740)。对于大多数崩溃，它将包含一个堆栈跟踪，可以查明哪里出了问题。

* * *

这是您的代码的修改版本，它遵循了我给出的一些建议。

请注意，我没有**时间**解决**最重要的问题**：这段代码仍然在 UI 线程上执行 IO。它应该使用[AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask)代替！

```
public class PhotosActivity extends Activity {

  // Use a string constant to "tag" log statements that belong to the same
  // feature/module of your app. This activity does something with "photos" so
  // use that as a tag. It's the first parameter to Android's Log methods.
  private static final String TAG = "photos";

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); // Always call super.onCreate() first.
    setContentView(R.layout.photos_layout); // Then load the layout.

    // Find textView3 in layout and set it's text to HTML code.
    // There's no need to create a new TextView() here.
    TextView textView = (TextView) findViewById(R.id.textView3);
    textView.setText(getHtmlCode());
  }

  // Structure your code. If it's a larger block that does one thing,
  // extract it into a method.
  private String getHtmlCode() {
    try {
      Document doc = Jsoup.connect("http://www.example.com/").get();
      Element content = doc.select("a").first();
      return content.text();
    } catch (IOException e) {
      // Never e.printStackTrace(), it cuts off after some lines and you'll
      // lose information that's very useful for debugging. Always use proper
      // logging, like Android's Log class, check out
      // http://developer.android.com/tools/debugging/debugging-log.html
      Log.e(TAG, "Failed to load HTML code", e);
      // Also tell the user that something went wrong (keep it simple,
      // no stacktraces):
      Toast.makeText(this, "Failed to load HTML code",
          Toast.LENGTH_SHORT).show();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:01:50.923

您应该将呼叫移动`super.onCreate(...)`到`setContentView(...)`onCreate 方法的前两行。

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.photos_layout);
  ..... 
```

# sharepoint - 将内容数据库从 SharePoint 2007 升级到 SharePoint 2010 时出现 XMLException（无效字符）

> ID：12353008
> 
> 赞同：0
> 
> 时间：2012-09-10T13:44:47.787
> 
> 标签：sharepoint, sharepoint-upgrade

我正在尝试将一些内容数据库从 SharePoint 2007 升级到 SharePoint 2010。我已经解决了升级内容数据库所需的所有功能依赖项。其中两个内容数据库升级得很好，但其中一个升级失败，错误日志文件中出现以下错误：-

```
[STSADM] [SPContentDatabaseSequence] [INFO] [8/25/2012 3:08:13 PM]: SPContentDatabase Name=ANONYMOUS_ContentDB
[STSADM] [SPContentDatabaseSequence] [ERROR] [8/25/2012 3:08:13 PM]: Action 4.0.2.0 of Microsoft.SharePoint.Upgrade.SPContentDatabaseSequence failed.
[STSADM] [SPContentDatabaseSequence] [INFO] [8/25/2012 3:08:13 PM]: SPContentDatabase Name=ANONYMOUS_ContentDB
[STSADM] [SPContentDatabaseSequence] [ERROR] [8/25/2012 3:08:13 PM]: Exception: '.', hexadecimal value 0x00, is an invalid character. Line 1, position 10023.
[STSADM] [SPContentDatabaseSequence] [INFO] [8/25/2012 3:08:13 PM]: SPContentDatabase Name=ANONYMOUS_ContentDB
[STSADM] [SPContentDatabaseSequence] [ERROR] [8/25/2012 3:08:13 PM]:    at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.ThrowInvalidChar(Int32 pos, Char invChar)
   at System.Xml.XmlTextReaderImpl.ParseText(Int32& startPos, Int32& endPos, Int32& outOrChars)
   at System.Xml.XmlTextReaderImpl.ParseText()
   at System.Xml.XmlTextReaderImpl.ParseElementContent()
   at System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   at System.Xml.XmlDocument.Load(XmlReader reader)
   at System.Xml.XmlDocument.LoadXml(String xml)
   at Microsoft.SharePoint.Upgrade.RemoveContentTypeField.UpgradeSchema(String originalSchema, String& newSchema, Boolean& AddIndex)
   at Microsoft.SharePoint.Upgrade.RemoveContentTypeField.Upgrade()
   at Microsoft.SharePoint.Upgrade.SPActionSequence.Upgrade() 
```

我正在使用命令

```
stsadm -o addcontentdb -url "webappurl" -databasename "contentdbname" 
```

附加和升级内容数据库。

谁能指导我这里可能是什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:07:55.997

通过查看日志文件，该内容数据库中站点中的一种内容类型的 XML 模式似乎具有无效字符。

可能很难诊断。这是“长途”——其他人可能有更好的路线。

您能否备份内容数据库，以便您可以回到开始的位置，然后慢慢删除内容类型，直到 stsadm 命令起作用（您需要删除使用该内容类型的项目才能删除该内容类型）。首先执行自定义内容类型，因为它们更有可能成为罪魁祸首。如果您发现包含无效架构的内容类型，则可以尝试修复架构或在可能的情况下继续使用内容类型。

# c++ - 如何在 C++ 中将 UTC 日期和时间转换为 time_t？

> ID：12353011
> 
> 赞同：8
> 
> 时间：2012-09-10T13:44:57.117
> 
> 标签：c++, time-t

我想将以年、月、日等数字形式给出的 UTC 日期和时间转换为 time_t。一些系统提供类似`mkgmtime`或`timegm`用于此目的的功能，但这不是标准的，并且在我的 Solaris 系统上不存在。

到目前为止，我发现的唯一解决方案是使用 setenv 将本地时区设置为 UTC，然后调用`mktime`. 然而，这种方法不是线程安全的、缓慢的、不可移植的，甚至会在我的系统上产生内存泄漏。

我还看到了尝试确定当前 UTC 偏移量的方法`gmtime`，然后将其添加到`mktime`. 但据我所见，所有这些方法都有差距。毕竟，从本地时间到 UTC 的转换并不是唯一的。

你认为最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T13:44:57.117

我决定实现我自己的 mkgmtime 版本，它比我想象的要容易。

```
const int SecondsPerMinute = 60;
const int SecondsPerHour = 3600;
const int SecondsPerDay = 86400;
const int DaysOfMonth[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

bool IsLeapYear(short year)
{
    if (year % 4 != 0) return false;
    if (year % 100 != 0) return true;
    return (year % 400) == 0;
}

time_t mkgmtime(short year, short month, short day, short hour, short minute, short second)
{
    time_t secs = 0;
    for (short y = 1970; y < year; ++y)
        secs += (IsLeapYear(y)? 366: 365) * SecondsPerDay;
    for (short m = 1; m < month; ++m) {
        secs += DaysOfMonth[m - 1] * SecondsPerDay;
        if (m == 2 && IsLeapYear(year)) secs += SecondsPerDay;
    }
    secs += (day - 1) * SecondsPerDay;
    secs += hour * SecondsPerHour;
    secs += minute * SecondsPerMinute;
    secs += second;
    return secs;
} 
```

我主要担心的是它`mkgmtime`必须与`gmtime`. 这样`gmtime(mktime(t))`返回原始输入值。因此，我比较了 time_t 的 0 和 MAX_INT 之间所有 61 的倍数的结果，它们确实是相等的（至少在我的系统上）。因此上述程序是正确的。

这个结果也意味着 C 库没有考虑闰秒，这本身就是一件坏事，但对我的目的有好处。这两个功能将长期保持一致。可以肯定的是，使用此函数的 Timestamp 类总是对程序启动执行快速检查，并证明几个有意义的值的一致性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-06T18:48:06.783

为了完整起见，这里是 mkgmtime() 的一个版本，它以 struct tm* 作为参数：

```
static time_t mkgmtime(const struct tm *ptm) {
    time_t secs = 0;
    // tm_year is years since 1900
    int year = ptm->tm_year + 1900;
    for (int y = 1970; y < year; ++y) {
        secs += (IsLeapYear(y)? 366: 365) * SecondsPerDay;
    }
    // tm_mon is month from 0..11
    for (int m = 0; m < ptm->tm_mon; ++m) {
        secs += DaysOfMonth[m] * SecondsPerDay;
        if (m == 1 && IsLeapYear(year)) secs += SecondsPerDay;
    }
    secs += (ptm->tm_mday - 1) * SecondsPerDay;
    secs += ptm->tm_hour       * SecondsPerHour;
    secs += ptm->tm_min        * SecondsPerMinute;
    secs += ptm->tm_sec;
    return secs;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-23T23:19:50.137

如上所述，虽然`time_t`通常表示自 1970 年 1 月 1 日以来经过的秒数，但在任何地方都没有指定。使用不同内部表示的实现可能随时出现，并且任何对内部工作进行假设的代码`time_t`都不会在那里正常工作。

经过一番思考，我想出了以下几点：

```
time_t mkgmtime(struct tm * pt) {
    time_t ret;

    /* GMT and local time */
    struct tm * pgt, * plt;

    ret = mktime(pt);

    pgt = g_memdup(gmtime(ret), sizeof(struct tm));
    plt = g_memdup(localtime(ret), sizeof(struct tm));

    plt->tm_year -= pgt->tm_year - plt->tm_year;
    plt->tm_mon -= pgt->tm_mon - plt->tm_mon;
    plt->tm_mday -= pgt->tm_mday - plt->tm_mday;
    plt->tm_hour -= pgt->tm_hour - plt->tm_hour;
    plt->tm_min -= pgt->tm_min - plt->tm_min;
    plt->tm_sec -= pgt->tm_sec - plt->tm_sec;

    ret = mktime(plt);

    g_free(pgt);
    g_free(plt);

    return ret;
} 
```

可以通过删除`plt`（`pt`在其位置使用并省略`localtime()`and`g_free(plt)`调用）来进一步优化这一点。

这应该适用于所有公开`mktime()`,`gmtime()`和的实现`localtime()`，包括跨 DST 切换日期。（`mktime()`将“标准化”超出范围的值，例如将 1 月 35 日变为 2 月 4 日；我还希望冬季中期的 9:50 DST 变为标准时间 8:50。）

它确实存在一个潜在的错误：如果时区的 UTC 偏移量因 DST 标志中未反映的原因而发生变化，则切换时间周围的时间戳可能会被错误地解释：标准情况是立法更改其时区（例如立陶宛从苏联独立后到 CET 的时间，几年后到 EET）。一些立法在仲夏有双倍的 DST，每年循环通过 3 个不同的 UTC 偏移，这是 DST 标志无法代表的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-19T01:48:33.657

这是我在标准库中找不到任何东西来为我做这件事后为自己想出的一个解决方案。此方法仅使用基本算术进行计算，使其比从 1970 年到提供的日期之间的每年循环要快得多。但是与之前的大多数答案一样，这取决于使用 Unix/Epoch 时间实现的 time_t，并且不适用于早于 1970 年的时间戳，这对我来说不是必需的。

```
#include <ctime>
#include <cassert>

constexpr unsigned int count_leapyears(unsigned int year) {
    assert(year > 0);
    return year / 4 - year / 100 + year / 400;
}

time_t timeutc(tm utc) {
    assert(utc.tm_year >= 70);
    constexpr unsigned int const leaps_before_epoch = count_leapyears(1970);
    unsigned int leapdays = count_leapyears(utc.tm_year + 1899) - leaps_before_epoch;
    unsigned int unix_time;

    unix_time = ((utc.tm_year - 70) * 365 + leapdays) * 86400;
    unix_time += utc.tm_yday * 86400 + utc.tm_hour * 3600 + utc.tm_min * 60 + utc.tm_sec;

    return unix_time;
} 
```

# endpoint - WS 寻址如何创建“有状态”端点 (JBossWS)

> ID：12353012
> 
> 赞同：0
> 
> 时间：2012-09-10T13:44:58.520
> 
> 标签：endpoint, stateful, jbossws

所以阅读 JBoss 管理指南，我看到 WS-addressing 用于创建“有状态端点”。

我知道 WS-addressing 创建了一个标准，用于在 Web 服务的 SOAP 标头中指定消息传递路由数据……但我不确定这与端点状态有何关系。

以下是来自维基百科的内容：

> WS-Addressing 通过指定一个公共 SOAP 标头 (wsa:ReplyTo) 来支持异步交互的使用，该标头包含要向其发送响应的端点引用 (EPR)。服务提供者通过单独的连接将响应消息传输到 wsa:ReplyTo 端点。这将 SOAP 请求/响应交互的生命周期与 HTTP 请求/响应协议的生命周期分离，从而实现可以跨越任意时间段的长时间运行的交互。

因此`wsa:ReplyTo`，您可以异步执行操作，因为即使 HTTP 请求已完成，您也有办法将响应发送到正确的位置。

我仍然看不到“状态”的来源。

对此有何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:20:21.873

我现在明白了。当您查看代码示例时，这是有道理的。以下是从 JBoss Admin 指南中提取的 StatefulEndpoint WebService 示例：

```
@WebService(name = "StatefulEndpoint", targetNamespace = "http://org.jboss.ws/sam ples/wsaddressing", serviceName = "TestService")
@Addressing(enabled=true, required=true)
@SOAPBinding(style = SOAPBinding.Style.RPC)
public class StatefulEndpoint implements StatefulEndpoint, ServiceLifecycle
{
@WebMethod
public void addItem (String item )
{ ... }
@WebMethod
public String getItemsInCart()
{ ... }
} 
```

然后 Web 服务客户端创建两个单独的端口

```
port1 = (StatefulEndpoint)service.getPort(StatefulEndpoint.class, new
javax.xml.ws.soap.AddressingFeature());
port2 = (StatefulEndpoint)service.getPort(StatefulEndpoint.class, new
javax.xml.ws.soap.AddressingFeature()); 
```

将新的 AddressingFeature 传入 getPort 函数将启用 WS 寻址功能。

这是演示我们刚刚创建的两个端口的状态的代码：

```
public class AddressingStatefulTestCase extends JBossWSTest
{
...
public void testAddItem() throws Exception
{
port1.addItem ("Ice Cream ");
port1.addItem ("Ferrari");
port2.addItem ("Mars Bar");
port2.addItem ("Porsche");
}
public void testGetItems() throws Exception
{
String items1 = port1.getItems();
assertEquals("[Ice Cream , Ferrari]", item s1);
String items2 = port2.getItems();
assertEquals("[Mars Bar, Porsche]", item s2);
}
} 
```

请注意，port1 添加的项目与 port2 不同，但是当 port1 调用 getItems... 时，它只获取它添加的项目，而不是来自 port2 的项目。这就是赋予它状态的原因。

# ruby - 我应该使用哪个静态 Web 生成器？

> ID：12353014
> 
> 赞同：4
> 
> 时间：2012-09-10T13:45:13.413
> 
> 标签：ruby, ruby-on-rails-3, code-generation, middleman, nanoc

我知道普通的红宝石语言。我整理了两个静态网络生成器**Nanoc**和**Middleman** 我的要求是：-

1.  易于定制
2.  简单易学
3.  更多学习资源

所以告诉我哪个更适合我 Nanoc 或 Middleman？

谢谢阅读

# jquery - jQuery Post() 在 IE 中不起作用

> ID：12353016
> 
> 赞同：0
> 
> 时间：2012-09-10T13:45:20.593
> 
> 标签：jquery, internet-explorer

我在这里阅读了几篇关于人们在 IE 9 和 8 中遇到 jQuery post 问题的文章。我遵循了建议，但仍然无法解决问题。

该代码是一个简单的视频跟踪器，由于某种原因，它不适用于任何版本的 IE。

有任何想法吗？

```
<script>
    $(document).ready(function () { 

        var href = jQuery(location).attr('href');
        var url = jQuery(this).attr('title');
        var account = "parts_survey"; // Account name, no spaces
        jQuery.post("http://mydomain.com/tracking/vt.php", { title: url, video_url: href, account: account } );
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:54:26.600

“由于浏览器安全限制，大多数“Ajax”请求都受制于同源策略；请求无法成功地从不同的域、子域或协议中检索数据。”

尝试`$.post("/tracking/vt.php", { title: url, video_url: href, account: account } );`

对于跨域请求，请查看`$.getJSON`

[http://api.jquery.com/jQuery.getJSON/#jsonp](http://api.jquery.com/jQuery.getJSON/#jsonp)

[http://en.wikipedia.org/wiki/JSONP#How_it_works](http://en.wikipedia.org/wiki/JSONP#How_it_works)

# ios - 是否可以在 ios 应用程序和 WebView 之间共享 FB 会话

> ID：12353021
> 
> 赞同：1
> 
> 时间：2012-09-10T13:45:33.187
> 
> 标签：ios, uiwebview, facebook-comments, facebook-ios-sdk

在我的 ios 应用程序中，我为“post to wall”和“Connect with Facebook”集成了 FBSDK，在 UIWebView 中，我调用了一个 URL，该 URL 显示了一个集成了“facebook 评论框”的 html 页面。这很好用，除了：

*   在 web 视图中，即使用户在应用程序中连接到 facebook（通过 fbsdk），它也会显示“登录 facebook 发布”按钮。因为网页中的连接会话 fb 与我的应用程序的连接会话是独立的。

*   在应用程序中，如果使用通过 webview 连接，则如果没有 fbsdk 的另一个“登录”，他将无法共享消息。出于同样的原因。

我想知道有没有一种方法可以在 uiwebview 和应用程序之间共享 le session fb？谢谢！

# asp.net - Asp.net mvc webgrid 搜索

> ID：12353024
> 
> 赞同：0
> 
> 时间：2012-09-10T13:45:44.210
> 
> 标签：asp.net, asp.net-mvc-4

我有一个 Asp.net MVC 4 应用程序。我已向此应用程序添加了一个 Web 网格。一些如何在此网格顶部显示搜索框。

![在此处输入图像描述](../Images/f44593210900610bd248ced59ccff856.png)

我的第一个偏好是删除它，如果我不能删除它，我想控制行为，即过滤哪一列。

这是代码

```
@model IEnumerable<Fai.Backend.Services.Models.CaseListModel>
<script type="text/javascript">   

</script>
@{
    ViewBag.Title = "Index";
}
<h2>Index</h2>

<div class="row">
    <div class="columns twelve">
    <select id="statusFilter">
        <option value='0'>@Fai.Backend.Services.Utilities.TextProvider.StatusOpen </option>
        <option value='1'>@Fai.Backend.Services.Utilities.TextProvider.StatusClosed </option>
        <option value='2' selected="selected">@Fai.Backend.Services.Utilities.TextProvider.StatusAll</option>
    </select>
    </div>
</div>

<div class="dataTable">
    @{
        var grid = new WebGrid(source:Model,canPage:false);
    @grid.GetHtml(

            columns: grid.Columns(grid.Column("Date", @Fai.Backend.Services.Utilities.TextProvider.Text.CreatedOn, canSort: true ),
            grid.Column("Title", @Fai.Backend.Services.Utilities.TextProvider.Text.Title, canSort: true),
            grid.Column("NameOfCreatingUser", @Fai.Backend.Services.Utilities.TextProvider.Text.CreatedBy, canSort: true),
            grid.Column("Company", @Fai.Backend.Services.Utilities.TextProvider.Text.Company, canSort: true),
            grid.Column("Organization", @Fai.Backend.Services.Utilities.TextProvider.Text.Organization, canSort: true),
            grid.Column("Status", @Fai.Backend.Services.Utilities.TextProvider.Text.Status, canSort: true),
            grid.Column("", format: @<text>@Html.ActionLink(Fai.Backend.Services.Utilities.TextProvider.Text.ViewCaseDetails, "Details", "Case", new { id = item.Id }, null)</text>)
                      ));
    }
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:53:05.473

最简单（但不推荐的方法）是简单地将其隐藏在 CSS 中。只需在 chrome 或 firefox 中右键单击它，您就会看到需要添加“显示：无”的样式。否则，请按照 Darin 在评论中的建议发布您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:17:35.733

这是我的错误，_Layout.cshtml 中有一个 JavaScript 正在创建这个过滤器框。这里的javascript供参考

```
$('.dataTable > table').dataTable(
                  {
                      "bPaginate": false,
                      "bLengthChange": false,
                      "bFilter": true,
                      "bSort": false,
                      "bInfo": false,
                      "bAutoWidth": true
                  }
                  ); 
```

# .net - ReadOnlyDictionary 两种类型的区别？

> ID：12353025
> 
> 赞同：1
> 
> 时间：2012-09-10T13:45:49.623
> 
> 标签：.net, dictionary

有谁知道和的`System::Collections::ObjectModel::ReadOnlyDictionary`区别`Microsoft::TeamFoundation::Client::ReadOnlyDictionary`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:48:07.907

我怀疑引入[Team Foundation](http://msdn.microsoft.com/en-us/library/ff732967.aspx)只是因为主框架中没有只读字典，而他们想公开一个。

[.NET 框架一](http://msdn.microsoft.com/en-us/library/gg712875.aspx)仅在 .NET 4.5 中引入。

.NET 框架版本被记录为只是现有字典的包装器 - 因此，虽然从客户端的角度来看它是只读的，但它仍可能随时间而变化。目前尚不清楚（来自文档） Team Foundation 是否以相同的方式表现，尽管我希望它（作为最简单的方法）。

# c# - WCF 和 SOAP 标头 - 如何确保默认标头元素未在请求中签名？

> ID：12353028
> 
> 赞同：2
> 
> 时间：2012-09-10T13:46:04.243
> 
> 标签：c#, .net, xml, wcf, soap

WCF 有问题 - 连接到不需要签名 SOAP 标头的 Weblogic 服务 - 即 <TO>、<ACTION>、<MessageID> 和其他 WS-Addressing 元素 - 不需要签名。在请求中，WCF 无论如何都会默认对这些进行签名，这不会是一个问题，除非它期望它们也在响应中被签名，并且我从 WCF 返回了这个异常：

```
System.ServiceModel.Security.MessageSecurityException: 

The 'To', 'http://www.w3.org/2005/08/addressing' required message part  was not     signed.\r\n\r\nServer stack trace: \r\n   at 

System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.ExecuteMessageProtectionPass(Boolean hasAtLeastOneSupportingTokenExpectedToBeSigned)\r\n   at 
System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)\r\n   at 
System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message& message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)\r\n   at
System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message& message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)\r\n   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingM.... 
```

我正在为 web 服务客户端的其他元素使用 CustomEncoder 和自定义行为，但似乎无法通过此路由禁用默认元素的签名 - 我尝试在 IEndpointBehaviour 中访问以下内容

```
public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
{
   ChannelProtectionRequirements requirements = bindingParameters.Find<ChannelProtectionRequirements>();
   requirements.IncomingSignatureParts...
   requirements.OutgoingSignatureParts...
} 
```

但是`HeaderTypes`在 WCF 进程的消息行为阶段，这些集合中的数量对我来说始终为零。

此外，在尝试访问`MessageHeaderAttribute`IClientMessageInspector 时，我尝试添加以下内容但无济于事。

```
 public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
{
     int headerIndex = request.Headers.FindHeader("To", "http://www.w3.org/2005/08/addressing");

} 
```

这是我的配置 -

**XML 中的配置**

```
<binding name="CUS_BINDING" >
      <transactionFlow />
      <security defaultAlgorithmSuite="TripleDesRsa15"
                authenticationMode="MutualCertificate"
                messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                requireDerivedKeys="false"
                messageProtectionOrder="SignBeforeEncrypt"
                securityHeaderLayout="Lax"
                allowSerializedSigningTokenOnReply="true"
                enableUnsecuredResponse="true"                     
                    >

        <secureConversationBootstrap authenticationMode="CertificateOverTransport"
                                   messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10"
                                   requireDerivedKeys="false"
                                        />
      </security>
      <customTextMessageEncoding messageVersion="Soap11WSAddressing10"  />
      <httpsTransport requireClientCertificate="true" />
    </binding> 
```

**配置在代码中调整**

```
public static CustomBinding GetServiceBinding()
    {            
        //Get custom binding reference from app.config
        CustomBinding binding = new CustomBinding("CUS_BINDING");
        binding.ReceiveTimeout = new TimeSpan(0, 0, 15, 0);
        binding.SendTimeout = new TimeSpan(0, 0, 15, 0);
        // Reference the asymettric security element            
        AsymmetricSecurityBindingElement securityBindingElement = binding.Elements.Find<AsymmetricSecurityBindingElement>();
        // Get the x509ProtectionParams from the security element
        X509SecurityTokenParameters tokenParameters = new X509SecurityTokenParameters();
        tokenParameters.X509ReferenceStyle = X509KeyIdentifierClauseType.IssuerSerial;
        tokenParameters.RequireDerivedKeys = false;
        tokenParameters.InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient;

        securityBindingElement.InitiatorTokenParameters = tokenParameters;
        //securityBindingElement.ProtectionTokenParameters = tokenParameters;
        securityBindingElement.LocalClientSettings.DetectReplays = false;

        //Set timestamp to false as it's not in the request
        securityBindingElement.IncludeTimestamp = false;
        // Added during testing, permanant fixture
        securityBindingElement.RequireSignatureConfirmation = true;
        securityBindingElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;            

        return binding;
    } 
```

所以我需要能够通过任何可能的方法做两件事之一 -

1.  关闭客户端对这些标头元素的请求的签名，以便它们不会在传入的响应中被签名或

2.  告诉 WCF 忽略响应 XML 中缺少数字签名并继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T10:25:34.637

前段时间有人问过这个问题，但我在寻找解决方案时发现了这个问题。

所以这对我有用。只需在自定义绑定中设置 enableUnsecuredResponse="true" 即可。

```
<customBinding>
    <binding name="WsHttpSoap11" >          
        <textMessageEncoding messageVersion="Soap11WSAddressing10" />            
        <security authenticationMode="UserNameOverTransport" enableUnsecuredResponse="true"></security>
        <httpsTransport/>
    </binding>
  </customBinding> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T09:40:15.507

我最初的预感是有一些方法可以使 requirements.IncomingSignatureParts 路径工作。但后备方案是简单地一起关闭 ws-addressing（例如，使用消息版本“Soap11”）并在消息检查器/编码器中手动添加它们。

# html - chrome 和 Internet Explorer 中的 DIV 元素

> ID：12353030
> 
> 赞同：0
> 
> 时间：2012-09-10T13:46:16.897
> 
> 标签：html, css

当我使用 DIV 元素将我的网页划分为不同的块时，我与 Google Chrome 和 Internet Explorer 的对齐方式不同。

Chrome 和 IE 使用 CSS 属性进行 Div 标签对齐有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:49:02.277

是的，根据`IE`您使用的版本，存在非常明显的差异。

一个快速的边距/填充修复将把它放在你的顶部`css`：

```
* {
    padding:0;
    margin:0;
} 
```

更彻底的解决方法是包含[normalize.css](http://necolas.github.com/normalize.css/)

# objective-c - iOS 音频单元 - 创建立体声正弦波

> ID：12353033
> 
> 赞同：5
> 
> 时间：2012-09-10T13:46:24.713
> 
> 标签：objective-c, ios, audio, core-audio, audiounit

周末，我在学习如何在 iOS 上编程音频合成时遇到了一个绊脚石。我已经在 iOS 上开发了几年，但我只是进入音频合成方面。现在，我只是在编写演示应用程序来帮助我学习这些概念。我目前已经能够在音频单元的播放渲染器中构建和堆叠正弦波而没有问题。但是，我想了解渲染器中发生了什么，这样我就可以在每个左右通道中渲染 2 个单独的正弦波。目前，我假设在我的初始音频部分中，​​我需要进行以下更改：

从：

```
AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate = kSampleRate;
    audioFormat.mFormatID = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket = 1;
    audioFormat.mChannelsPerFrame = 1;
    audioFormat.mBitsPerChannel = 16;
    audioFormat.mBytesPerPacket = 2;
    audioFormat.mBytesPerFrame = 2; 
```

至：

```
AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate = kSampleRate;
    audioFormat.mFormatID = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket = 1;
    audioFormat.mChannelsPerFrame = 2;
    audioFormat.mBitsPerChannel = 16;
    audioFormat.mBytesPerPacket = 4;
    audioFormat.mBytesPerFrame = 4; 
```

但是，渲染器对我来说有点希腊化。我一直在研究我能找到的任何教程或示例代码。我可以使事情适用于给定的单声道信号上下文，但我不能让渲染器生成立体声信号。我想要的只是左声道中的一个不同频率和右声道中的不同频率 - 但老实说，我对渲染器的了解不足以让它工作。我已尝试将 memcpy 函数放入 mBuffers[0] 和 mbuffers[1]，但这会使应用程序崩溃。我的渲染在下面（它当前包含堆叠的正弦波，但对于立体声示例，我可以在每个通道中只使用一个设定频率的波）。

```
#define kOutputBus 0
#define kSampleRate 44100
//44100.0f
#define kWaveform (M_PI * 2.0f / kSampleRate)

OSStatus playbackCallback(void *inRefCon,
                          AudioUnitRenderActionFlags *ioActionFlags,
                          const AudioTimeStamp *inTimeStamp,
                          UInt32 inBusNumber,
                          UInt32 inNumberFrames,
                          AudioBufferList *ioData) {

        HomeViewController *me = (HomeViewController *)inRefCon;

    static int phase = 1;
    static int phase1 = 1;

    for(UInt32 i = 0; i < ioData->mNumberBuffers; i++) {

        int samples = ioData->mBuffers[i].mDataByteSize / sizeof(SInt16);

        SInt16 values[samples];

        float waves;
        float volume=.5;
        float wave1;

        for(int j = 0; j < samples; j++) {

            waves = 0;
            wave1 = 0;

            MyManager *sharedManager = [MyManager sharedManager];

            wave1 = sin(kWaveform * sharedManager.globalFr1 * phase1)*sharedManager.globalVol1;
            if (0.000001f > wave1) {
                [me setFr1:sharedManager.globalFr1];
                phase1 = 0;
                //NSLog(@"switch");
            }

            waves += wave1;
            waves += sin(kWaveform * sharedManager.globalFr2 * phase)*sharedManager.globalVol2;
            waves += sin(kWaveform * sharedManager.globalFr3 * phase)*sharedManager.globalVol3;
            waves += sin(kWaveform * sharedManager.globalFr4 * phase)*sharedManager.globalVol4;
            waves += sin(kWaveform * sharedManager.globalFr5 * phase)*sharedManager.globalVol5;
            waves += sin(kWaveform * sharedManager.globalFr6 * phase)*sharedManager.globalVol6;
            waves += sin(kWaveform * sharedManager.globalFr7 * phase)*sharedManager.globalVol7;
            waves += sin(kWaveform * sharedManager.globalFr8 * phase)*sharedManager.globalVol8;
            waves += sin(kWaveform * sharedManager.globalFr9 * phase)*sharedManager.globalVol9;
            waves *= 32767 / 9; // <--------- make sure to divide by how many waves you're stacking

            values[j] = (SInt16)waves;
            values[j] += values[j]<<16;

            phase++;
            phase1++;

        }

        memcpy(ioData->mBuffers[i].mData, values, samples * sizeof(SInt16));

    }

    return noErr;

} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T17:19:16.890

OP 似乎已经解决了他的问题，但我认为发布一个明确的答案会对我们其他人有所帮助。

我有同样的问题，想将音调独立地引导到左右声道。用 Matt Gallagher 现在标准[的 An iOS 音调发生器（AudioUnits 简介）](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)来描述是最容易的。

要进行的第一个更改是设置（在@jwkerr 之后）`streamFormat.mChannelsPerFrame = 2;`（而不是`streamFormat.mChannelsPerFrame = 1;`）`createToneUnit`。一旦完成并且每帧中有两个通道/缓冲区，您需要分别填充左右缓冲区`RenderTone()`：

```
// Set the left and right buffers independently
Float32 tmp;
Float32 *buffer0 = (Float32 *)ioData->mBuffers[0].mData;
Float32 *buffer1 = (Float32 *)ioData->mBuffers[1].mData;

// Generate the samples
for (UInt32 frame = 0; frame < inNumberFrames; frame++) {
    tmp = sin(theta) * amplitude;

    if (channelLR[0]) buffer0[frame] = tmp; else buffer0[frame] = 0;
    if (channelLR[1]) buffer1[frame] = tmp; else buffer1[frame] = 0;

    theta += theta_increment;
    if (theta > 2.0 * M_PI) theta -= 2.0 * M_PI;
} 
```

当然`channelLR[2]`是一个`bool`数组，您设置其元素以指示相应通道是否可听。请注意，程序需要将静音通道的帧显式设置为零，否则会发出一些有趣的音调。

# c# - ASP.NET MVC Actions 和 Javascript 需要调用相同的 API

> ID：12353036
> 
> 赞同：0
> 
> 时间：2012-09-10T13:46:32.680
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个 ASP.NET MVC 4 应用程序，它需要将现有 API 用于不同的服务。很明显，ApiController 的返回*数据*和常规控制器的返回*视图*。

我需要某种形式的 RESTful API 来连接外部 API，以实现 Javascript 功能，但我的操作（呈现视图）**也**需要调用外部 API。简而言之，我的控制器操作*和*调用 JavaScript 的 API 都需要调用一个通用的外部 API。

我的问题是：我如何构建它，以便我的操作和 JS API 使用通用接口进行调用？

到目前为止我的两个想法：

1.  为每个实体创建一个`ApiController`。然后这些 ApiController 调用外部 API。然后，我的 Javascipt 可以调用这些 ApiController，并且在我的操作中，我可以根据需要创建每个 ApiController 的实例并调用它们的方法（GET、POST、PUT 等）。这听起来很骇人吗？
2.  将所有业务逻辑放入模型对象中，然后调用外部 API。要向 Javascript 公开某些方法，请提供一些 HTTP 端点，并且 Javascript 传递要调用的操作的名称，该操作调用模型方法，然后调用外部 API。

这些听起来比另一个更“正确”吗？还是这只是另一种过度担心并“随心所欲”的情况？*这里的目标只是以 Javascript和*我的控制器操作可以访问的通用方式调用一些外部 API 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:53:48.643

我将创建一个 API 控制器，作为您的域和外部 Web 服务之间的桥梁。现在，您的标准 MVC 控制器和 javascript 都将使用此 API 控制器。这里的问题是你是否可以使这个 API 控制器通用，这样它就可以避免你需要为每个实体创建一个 API 控制器但使用相同的控制器。这样可以避免重复。这是否可能当然取决于您的确切情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:01:52.897

> 我如何构建它，以便我的操作和 JS API 使用通用接口进行调用

我将介绍一个`ApiController`底层，它执行您的外部 API 和返回数据的 MVC 应用程序之间的所有底层通信。然后在您的视图控制器中更新操作以处理通过 AJAX 访问或不通过 AJAX 访问的场景，例如

```
public ActionResult MyAction(...)
{
    // contact middle-ware controller
    ...
    // handle response
    if (Request.IsAjaxRequest()) {
        return Json(...); // JS specific response
    } else {
        return View() // view specific response
    }
} 
```

这使您的 API 在客户端和服务器端保持一致。您可能可以使用自定义属性做一些聪明的事情，该属性可以处理响应类型，这将减少您所有操作中的代码重复。

# java - 无法激活 CXF ResponseTimeFeature

> ID：12353039
> 
> 赞同：4
> 
> 时间：2012-09-10T13:46:59.237
> 
> 标签：java, spring, tomcat, cxf, jmx

我在Tomcat 服务器中使用[CXF公开了一个 Web 服务。](http://cxf.apache.org/)我想在 JMX 中公开一些性能信息，例如 ResponseTimeFeature 提出的那些信息。

我的 cxf-beans.xml 文件如下：

```
<cxf:bus bus="cxf" id="MyBus">
  <cxf:properties>
    <entry key="bus.jmx.enabled" value="true" />
  </cxf:properties>
</cxf:bus>

<bean id="CounterRepository" class="org.apache.cxf.management.counters.CounterRepository">
  <property name="bus" ref="cxf" />
</bean>

<jaxws:endpoint id="analyserEndpoint" implementor="#analyserImpl" address="/analyser">
  <jaxws:features>
    <bean class="org.apache.cxf.management.interceptor.ResponseTimeFeature" />
  </jaxws:features>
</jaxws:endpoint> 
```

[这与CXF JMX page](http://cxf.apache.org/docs/jmx-management.html)中的解释非常相似。

问题是当我在 [默认地址 (service:jmx:rmi:///jndi/rmi://localhost:9913/jmxrmi)] 使用[jconsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)连接时，我看不到任何性能 MBean。我有 MyBus 的管理信息和里面的服务。但是没有关于 ResponseTime 的内容（即使在对服务进行 SOAP-UI 负载测试之后）。

我在 Web 应用程序启动时记录了以下错误：

```
2012-09-10 15:13:19,692 ERROR org.apache.cxf.management.jmx.InstrumentationManagerImpl - Could not start JMX connector server : java.io.IOException: Cannot bind to URL [rmi://localhost:9913/jmxrmi]: javax.naming.NameAlreadyBoundException: jmxrmi [Root exception is java.rmi.AlreadyBoundException: jmxrmi] 
```

有人对如何解决这个问题有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:26:36.437

我终于找到了一个“解决方案”（实际上它只是一种解决方法）。

```
<cxf:bus bus="MyBus" id="MyBus" name="MyBus">
  <cxf:properties>
    <entry key="bus.jmx.enabled" value="true" />
    <entry key="bus.jmx.persistentBusId" value="MyBus" />
    <entry key="bus.jmx.usePlatformMBeanServer" value="true" />
    <entry key="bus.jmx.createMBServerConnectorFactory" value="false" />
  </cxf:properties>
</cxf:bus>

<bean id="CounterRepository" class="org.apache.cxf.management.counters.CounterRepository">
  <property name="bus" ref="MyBus" />
</bean>

<jaxws:endpoint id="analyserEndpoint" implementor="#analyserImpl" address="/analyser">
  <jaxws:features>
    <bean class="org.apache.cxf.management.interceptor.ResponseTimeFeature" />
  </jaxws:features>
</jaxws:endpoint> 
```

在 JMX 控制台的最后，我可以看到以下层次结构。

```
org.apache.cxf
  Bus
    MyBus
      Operations
        shutdown
      Notifications
  Performance.Counter.Server
    cxf+random_number
      "WebServiceServiceNameAsAQName"
        "WebServicePortName"
          Attributes
            NumInvocations
            AvgResponseTime
            MaxResponseTime
            MinResponseTime
            NumCheckedApplicationFaults
            NumLogicalRuntimeFaults
            NumRuntimeFaults
            NumUnCheckedApplicationFaults
            TotalHandlingTime
          Operations
            reset
          "WebServiceMethodName"
            Attributes (same as above, per method)
            Operations
              reset 
```

我说的是解决方法，因为我丢失了一些通常在 CXF WebServices MBean 上可用的属性（例如状态），并且计数器的总线名称不是我设置的。

# sql - 查找前 n 个平均值

> ID：12353040
> 
> 赞同：2
> 
> 时间：2012-09-10T13:46:59.800
> 
> 标签：sql, sql-server, tsql

我有一个看起来像这样的表：

```
UID DATE GROUP VALUE 
```

数据类型有：

```
 VARCHAR DATE VARCHAR NUMERIC 
```

例子：

```
abc1000 2012-09-01 1205 1000.0000
abc1000 2012-09-01 1210 1010.0000
abc1000 2012-09-02 1205 1100.0000
abc1000 2012-09-02 1210 1020.0000
def1010 2012-09-01 1205 2000.0000 
```

我需要为每个唯一的“UID+GROUP”找到前 N(15) 个值 (VALUE) 并对它们进行平均，因此输出如下所示：

```
abc1000 1205 1050.0000
abc1000 1210 1015.0000
def1010 1205 2000.0000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:51:14.990

```
select uid, [group], avg(value)
from
(
 select *,
        row_number() over (partition by uid, [group] order by value desc) rn 
        from yourtable
) v
where rn<=15
group by uid, [group] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:51:23.587

这是你想要的？你需要使用`AVG`函数

```
SELECT TOP 15 [UID], [GROUP], AVG(VALUE) avgValue
FROM tableName
GROUP BY [UID], [GROUP]
ORDER BY avgValue DESC 
```

或通过使用`CTE`

```
WITH cte AS
(
    SELECT [UID], [GROUP], AVG(VALUE) avgValue,
           ROW_NUMBER() OVER (Partition By AVG(VALUE) ORDER BY AVG(VALUE) DESC) as Row_Num
    FROM tableName
    GROUP BY [UID], [GROUP]
)
SELECT [UID], [GROUP], avgValue
FROM cte 
WHERE Row_Num <= 15 
```

这将允许相同的总平均记录出现在前 15 个列表中，例如

```
1 , rec 1, 100
2 , rec 2, 98
....
....
....
14, recX , 76
15, recY , 76
16, recZ , 76 
```

# objective-c - 在inAppPurchase 中调用applicationWillResignActive

> ID：12353046
> 
> 赞同：2
> 
> 时间：2012-09-10T13:47:24.197
> 
> 标签：objective-c, ios

我有一个 iOS 应用程序，我正在这样做：在应用程序委托中，我调用了一个方法：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
   [self performSelector:@selector(myFunction) withObject:self afterDelay:0.0];
   .... 
} 
```

问题是，当我在我的一个控制器中实现 inAppPurchase 并且当用户确认付款或取消付款时，`- (void)applicationWillResignActive:(UIApplication *)application`会调用并调用`myFunction`：我不想`myFunction`在用户接受或取消付款时调用它，而是在用户午餐应用程序时调用它。

我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:54:21.340

您的应用程序 applicationWillResignActive 的原因是屏幕上显示的蓝色弹出窗口。此弹出窗口不属于您的应用程序。因此，调用 applicationWillResignActive 方法的逻辑将不得不改变。

请记住，applicationWillResignActive 是一个由许多简单的操作系统交互调用的方法，包括查看通知中心或多任务栏。如果在这些交互期间不应调用该方法，您可能希望有一个白名单逻辑来调用该方法，以便仅在需要调用它时调用它，而不仅仅是特定于应用内购买。

# performance - TagSoup vs JSoup :: 性能？

> ID：12353049
> 
> 赞同：1
> 
> 时间：2012-09-10T13:47:36.413
> 
> 标签：performance, jsoup, tag-soup

寻找 TagSoup 和 JSoup 对真实世界文档的性能比较。到目前为止，我一直在使用 TagSoup 进行 HTML 处理，并且效果很好。唯一的缺点是，由于 SAX 的性质，很多事情应该使用堆栈以编程方式完成（例如，用于处理带有标签的文本）。JSoup 看起来更简洁——但我关心的是性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T20:28:45.500

[TagSoup 网站](http://home.ccil.org/~cowan/XML/tagsoup/#other)指出：

> 还有许多其他用 Java 编写的 HTML SAX 解析器，特别是 NekoHTML、JTidy（C 库和工具 HTML Tidy 的一个端口）和 HTML Parser。都有其优点和缺点：Web 上的普遍看法似乎是 TagSoup 是最慢的，但也是最强大和最可靠的。

我尝试创建一个应用程序，该应用程序将使用 jsoup 解析 5 个页面，使用 TagSoup 解析 5 个页面并发布时间。不幸的是，我不知道如何使用 TagSoup 1.2.1 将网页返回到 DOM，这使得苹果与苹果之间的比较变得困难。

# php - HTML 表单调用返回附件的 PHP 页面；如何将“控制”返回给 HTML 页面？

> ID：12353051
> 
> 赞同：1
> 
> 时间：2012-09-10T13:47:43.870
> 
> 标签：php, html

全部，

我有一个包含表单的 HTML 页面。

当用户完成表单并单击“提交”时 - 表单将用户的输入发布到 PHP 页面。

该 PHP 页面处理输入并将用户的结果**作为附件**返回。

到目前为止 - 一切正常 - 用户单击“提交”，浏览器的进度条开始“旋转”，几秒钟后，附件被下载。

但是，在浏览器中 - 用户仍然在表单页面上。我没关系。

所以 - 这是我的问题。理想情况下，当用户单击“提交”时 - 我想更新表单页面以指示“过程”正在进行中。例如，

*   禁用提交按钮以防止重复点击
*   显示“正在下载”消息和“微调器”类型的图形

然后，当下载完成时 - 我想捕获该事件，以便我可以重新启用提交按钮并删除下载消息。

这可能吗？

或者 - 我的初始设置是错误的吗？有一个更好的方法吗？（即——有一个调用PHP页面的表单，让PHP页面返回一个附件，然后将控制权返回给调用页面？）

提前感谢您的建议和见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:53:57.407

我不确定是否会有任何关于通过 http 下载/流式传输文件的事件（考虑到它完全发生在服务器端），但是，如果我是你，我会将表单重定向到下载页面，然后在 web 服务器之后开始将文件流式传输到客户端的浏览器，我将再次重定向回表单页面。

您可以通过 PHP 和 Javascript 来实现。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:55:19.533

使用 javascript 在新窗口中打开下载。所以不要在 POST 请求中返回下载，只需让页面重新加载并在页面上放置一些 javascript，这将打开一个新窗口，该窗口将调用您的 PHP 脚本来下载文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:55:44.563

为了获得这种功能（禁用提交按钮、显示微调器或进度条），您需要使用一些 JavaScript。我会推荐 JQuery Ajax 表单插件： http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)。

使用 JS 和 AJAX 的棘手部分是很难让用户将文件作为附件下载。

要使用纯 HTML 和 PHP，我建议在提交时重定向到另一个页面，显示一些消息（...“处理中”...），然后重定向回页面将加载的表单页面，提示下载，然后再次显示表单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:07:24.437

处理此问题的一种优雅方式可能是通过 ajax。

a）在您按下“提交”按钮时的最后一页上，您将 ajax 请求发布到

1.  动态构建文档和/或生成下载文档的链接
2.  在ajax响应中返回下载链接

b) 在 ajax 响应中，您触发下载链接，例如

```
 //jquery code     
$.ajax ({...
        success:function(resp){
            window.open(resp.FILE);
            // to the rest of work here 
            // e.g enable disable submit button 
        }) 
```

# jquery - jQuery 内容交换脚本不适用于 IE7 和 IE8

> ID：12353053
> 
> 赞同：0
> 
> 时间：2012-09-10T13:47:48.643
> 
> 标签：jquery, html, css, internet-explorer

以下[线程](https://stackoverflow.com/questions/34536/how-do-you-swap-divs-on-mouseover-jquery)为我提供了一个简洁的脚本来交换 div 内容，由[Carl Meyer](https://stackoverflow.com/users/3207/carl-meyer)撰写。

不幸的是，该脚本不适用于 IE7 和 IE8，但适用于 Firefox 4+ 和 Chrome。

有谁知道我需要编辑什么才能让脚本在 IE7 和 IE8 中工作？

这是我编辑过的脚本：

```
<script type="text/javascript" src="scripts/jquery-1.8.1.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
    switches = $('#switches > div');
    slides = $('#slides > div');
    switches.each(function(idx) {
            $(this).data('slide', slides.eq(idx));
        }).hover(
        function() {
            switches.removeClass('active');
            slides.removeClass('active');             
            $(this).addClass('active');  
            $(this).data('slide').addClass('active');
        });
    });
</script>

<style type="text/css">
    #switches div.active {
      display: block;
    }   
    #slides div {
      display: none;
    }   
    #slides div.active {
      display: block;
    }   
</style>

<div id="switches" class="float_left">                      
 <div>switch 01</div>
 <div>switch 02</div>
 <div>switch 03</div>       
</div>

<div id="slides" class="float_left">
 <div class="active">(01) Slide content goes here</div>
 <div class="">(02) Slide content goes here</div>
 <div class="">(03) Slide content goes here</div>   
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:04:18.000

开关和幻灯片变量未初始化，因此在 Internet Explorer 中中断，请尝试在前面添加“var”

IE

```
var switches = $('#switches > div'); 
```

# python - 使用 django-nonrel 在 Google App Engine 上移植 OSQA

> ID：12353054
> 
> 赞同：1
> 
> 时间：2012-09-10T13:47:58.970
> 
> 标签：python, google-app-engine, django-nonrel, osqa

我一直在使用 Python 在 Google App Engine 上开发一个网站，我需要一个问答系统。[OSQA](http://www.osqa.net)似乎是最好的选择。因为它基本上是一个 Django 应用程序，任何人都可以给我一些关于将 OSQA 移植到 GAE 的指示吗？另外，我开始了解[django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)项目。任何关于如何将 OSQA 移植到 django-nonrel 的详细教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:53:56.873

最简单的方法可能是在 GAE 的 CloudSQL 上使用 Django（不是非 rel）运行它。

Django-nonrel 在 SQL 样式查询方面非常有限。如果 OSQA 需要复杂的查询，甚至是 JOIN，那么您很有可能需要更改数据建模的方式以及进行查询的方式。这可能是一项非常重要的工作，如果不熟悉软件包，很难说。

很少使用数据建模的 Django 应用程序倾向于相当容易地移植到 Django-nonrel。像 UI 模板这样的东西可能会起作用。

# c# - C# 将位图转换为 RichTextBox Rtf

> ID：12353058
> 
> 赞同：1
> 
> 时间：2012-09-10T13:48:21.217
> 
> 标签：c#, .net, winforms, image, richtextbox

将图像转换为 Rtf 的最简单方法是什么？我想做这样的事情：

```
rtb.AppendText(":P");
rtb.Rtf = ConvertSmileys(rtb.Rtf); 
```

在转换笑脸方法中，我想检查笑脸并调用一些这样的方法：

```
rtb.Rtf.Replace(":P", ConvertImageToRtf(new Bitmap("mySmiley.png")); 
```

但我不知道如何将图像转换为 rtf 格式。

提前致谢。

# azure - 带有 Windows Azure 预览版的远程桌面

> ID：12353060
> 
> 赞同：1
> 
> 时间：2012-09-10T13:48:30.530
> 
> 标签：azure, remote-desktop

我正在 Window Azure 预览门户上运行一个网站，并尝试通过远程桌面进行连接。我最近升级到 Visual Studio 2012，将网站发布到 Azure 的方式略有变化。

通常我会连接到云服务角色并以这种方式启用远程桌面。但是我正在运行两个网站并且没有云服务，所以我似乎无法在任何地方找到选项！

![Windows Azure 远程桌面](../Images/08b1e390d0573fbb24787cf0551ee27c.png)

我在 windowsazure.com 网站上尝试了以下链接，但没有成功：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)

[https://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/](https://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/)

我也试过去旧门户启用远程桌面，但似乎该选项是灰色的。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:51:26.983

据我所知，根据[http://cloud.dzone.com/articles/how-choose-windows-azure](http://cloud.dzone.com/articles/how-choose-windows-azure)，您无法使用 RDS 连接到网站（与 Web 角色相反）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:52:11.997

您是否希望远程桌面进入您的网站或云服务？如果是网站，我不认为你可以，因为它通常在共享环境中运行，即在一个虚拟机中托管许多网站，就像在云服务中一样，你会为你的应用程序获得一个专用的虚拟机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:00:34.760

您可以使用预览模式设置 Web 角色，这将创建您的云服务并为您提供远程访问权限。这可以通过 Visual Studio 2012 轻松完成，方法是右键单击项目并选择“添加 Windows Azure 云服务项目”。

# dynamics-crm - 如何将记录网址插入电子邮件模板？

> ID：12353062
> 
> 赞同：2
> 
> 时间：2012-09-10T13:48:32.137
> 
> 标签：dynamics-crm, dynamics-crm-2011, email-templates

我有“案例”类型的电子邮件模板。有没有办法在相关案例的正文中添加 URL？

如何在插件中获取记录 URL？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:23:56.117

在电子邮件和对话框中，您可以在可视化设计器中添加超链接。这是有关插入 url[第 3 部分的视频：CRM 2011 业务流程提示和技巧 (RichardKnudson)](http://www.youtube.com/watch?v=ad77iTTRRws&feature=relmfu)

也许您可以创建一个工作流程，在其中创建电子邮件并在其中添加链接。在电子邮件正文中，链接标记如下所示：

```
<hyperlink>
   <name>Link name</name>
   <value>Link URL</value>
</hyperlink> 
```

在插件中，我从几个部分组成一个 url，服务器部分 + 组织部分 + 链接以编辑实体的形式。

链接到机会，例如：

```
1\. ServerUrl = "http://192.168.0.1"
2\. OrgName = "TestOrg"
3\. OpportunityGuid = "96a63042-13d4-40b3-a4db-c024ffb64979"

var Link = String.Format("{0}/{1}/userdefined/edit.aspx?etc=3&amp;id=%257b{2}%257d", ServerUrl, OrgName, OpportunityGuid); 
```

如果是 OnPremises，您可以从注册表中获取 ServerURL。

```
RegistryKey regKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\MSCRM");
string serverUrl = regKey.GetValue("ServerUrl").ToString().Replace("/MSCRMServices", "");
serverUrl = serverUrl.Replace("/MSCRMServices", ""); 
```

# java - 编写带有内存不足错误 Java 的大型 XML 文件

> ID：12353063
> 
> 赞同：3
> 
> 时间：2012-09-10T13:48:33.587
> 
> 标签：java, android, xml, dom

我正在为 android 开发一个应用程序，我需要创建一个相当大的 XML 文件。

我已经尝试过使用 DOM 文档，但是因为它驻留在内存中，所以会引发“内存不足”错误。

有人可以提出替代解决方案吗？这是一个从头开始创建的 XML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:52:00.543

我会逐步将 XML 写入 Stream 或 Writer 以遍历要转换为 XML 的数据。这样，您不需要比原始数据更多的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:03:02.303

对于大数据大小，您总是会出现内存不足的情况。如何划分您的数据并创建小块，然后将所有这些附加在一起。

或者另一种选择是使用消耗更少 [内存](http://tech.inhelsinki.nl/2007-08-29/)的 SAX 解析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:14:03.140

流式 XML 是要走的路。最“香草”的方法可能是使用 StAX：[http ://docs.oracle.com/javaee/5/tutorial/doc/bnbem.html#bnbff](http://docs.oracle.com/javaee/5/tutorial/doc/bnbem.html#bnbff)

# machine-learning - 如何确定神经网络中的权重？

> ID：12353067
> 
> 赞同：4
> 
> 时间：2012-09-10T13:48:52.117
> 
> 标签：machine-learning, neural-network

如果我有一个三层神经网络，并且如果我有 3 个输入样本及其相应的预期输出值，我如何确定所有边缘的权重值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:44:26.053

估计人工神经网络（ANN）的权重只不过是一个*参数优化*问题。一般来说，需要一个*非线性优化器*来完成工作。在此过程中优化的大多数成本函数都是惩罚网络输出与期望输出之间不匹配的成本函数。

反向传播方法是一种应用基于梯度的优化的优雅方法，因为它可以估计隐藏层神经元输出的误差。因此可以使用误差梯度更新隐藏层中的权重。

为了处理基于梯度的方法中的局部最小值问题，通常的做法是使用*多开始方法*，这基本上相当于从一堆不同的初始猜测中重复估计过程。

请注意，当种群失去多样性时，遗传算法等进化方法也会过早收敛。

还要注意网络对训练数据的[过度拟合。](https://en.wikipedia.org/wiki/Overfitting)您将无法对看不见的数据进行良好的泛化，这毕竟是预测学习的函数*逼近**点*。

 *除了所有这些之外，令人不安的是，训练样本的数量太少，无法产生关于您试图逼近的函数的大量信息。粗略地说，如果 ANN 有大量的自由参数，那么训练数据必须提供足够的信息以允许对参数进行有意义的估计。3 个样本对于任何实际的函数逼近任务来说都太少了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T15:18:51.530

反向传播传统上用于此目的。就个人而言，我使用 Levenberg-Marquardt 算法获得了更好更快的结果。

您可能还想测试进化算法（例如，遗传算法、粒子群优化（易于实现！））。这些不太容易陷入局部最优，因为它们不是基于梯度的。*

# c# - 如何让我的 C# .exe 自动识别它运行的目录？

> ID：12353068
> 
> 赞同：0
> 
> 时间：2012-09-10T13:48:51.730
> 
> 标签：c#, visual-studio-2010

> **可能重复：**
> [C# Executable Executing 目录](https://stackoverflow.com/questions/7025269/c-sharp-executable-executing-directory)

我使用 2010 Visual C# Express 编写了一个小的 windows 窗体 .exe。如何让程序“知道”它从哪个目录运行，以便它可以读取/写入用户将我的 .exe 放入的任何目录？基本上，我希望我的小 .exe 是“可移植的”，它在哪个文件夹/目录中并不重要，但它可以“知道”它的所有文件在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:52:48.203

有不同的方法，但这对我有用。

```
string directory = AppDomain.CurrentDomain.BaseDirectory; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:53:45.757

您可以使用：

[`Application.StartupPath`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:54:09.917

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

# ios - iOS：在等待连接时使应用程序在后台保持活动状态

> ID：12353069
> 
> 赞同：4
> 
> 时间：2012-09-10T13:48:58.580
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我正在使用 BLE 开发一个 iOS 5 应用程序，该应用程序需要监视与蓝牙设备的连接数小时。我一直在我的 plist 中为 UIBackgroundModes 使用蓝牙中央，只要连接了设备，它就可以很好地保持应用程序运行。当它断开连接时，我尝试重新连接它，一旦设备再次开始广告，它也能正常工作。

问题是，如果它断开连接并且用户开始使用其他应用程序，它就不会重新连接。

我一直在尝试查看问题所在，据我了解，当内存级别较低时，如果连接了设备，我的应用程序将无法被终止，但如果什么都没有，它可以（并且将会）被终止已连接。我可以看到我的应用程序在 iPhone 的“LowMemory”日志中被抛弃了。

我怎样才能确保我的应用程序不会被抛弃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:18:16.913

你没有。iOS 看门狗准备释放尽可能多的资源，以确保**前台应用程序**的正确执行。由于您的应用程序不再处于前台，iOS 将允许该应用程序运行必要的服务，只要它有足够的资源来执行此操作。我在后台运行的定位服务也遇到过类似的问题。

在后台运行时检查应用程序的内存占用。释放你不需要的东西。这将降低您的应用程序被终止的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T21:44:03.070

可悲的是，就像 Apple 不允许您决定什么是必要的服务一样，您可以使用简单的解决方法，也可以在后台激活 GPS 或静音。

当然，这将是一个消耗电池的解决方法，并且您的应用验证可能会被拒绝。

# jquery - 有人可以以非常简单的方式帮助解释 jQuery 扩展吗？

> ID：12353071
> 
> 赞同：2
> 
> 时间：2012-09-10T13:49:04.380
> 
> 标签：jquery, datatables

我有以下代码：

```
 $.extend($.fn.dataTableExt.oSort, {
        "datetime-uk-pre": function (a) {
            from = a.split(' ');
            var ukDatea = from[0].split('/');
            var ukTimea = from[1].split(':');
            return (ukDatea[2] + ukDatea[1] + ukDatea[0] + ukTimea[1] + ukTimea[0]) * 1;
        },
        "datetime-uk-asc": function (a, b) {
            return ((a < b) ? -1 : ((a > b) ? 1 : 0));
        },
        "datetime-uk-desc": function (a, b) {
            return ((a < b) ? 1 : ((a > b) ? -1 : 0));
        }
    });

    $.extend($.fn.dataTableExt.oSort, {
        "date-uk-pre": function (a) {
            var ukDatea = a.split('/');

            return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
        },
        "date-uk-asc": function (a, b) {
            return ((a < b) ? -1 : ((a > b) ? 1 : 0));
        },
        "date-uk-desc": function (a, b) {
            return ((a < b) ? 1 : ((a > b) ? -1 : 0));
        }
    }); 
```

我阅读了有关扩展的信息，但仍然不明白它在做什么。有人可以帮忙解释一下吗。我正在寻找的是一个尽可能简单的解释。我也可以以某种方式组合这两个代码块。

这是为数据表提供不同排序方式的代码。但是这是什么意思：

```
$.fn.dataTableExt.oSort 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:04:31.640

`DataTables`在基本包中提供了几个[排序](http://legacy.datatables.net/development/sorting)选项。您正在查看的称为[**基于类型的列排序**](http://legacy.datatables.net/development/sorting#type_based)，它基本上会尝试根据列的类型对其进行排序。DataTables 已经为最常见的类型（例如 、 和 ）提供了默认`Date`排序`Numeric`函数`HTML`。这些被注册为一个名为 的对象中的属性`oSort`，可以使用 访问该对象`$.fn.dataTableExt.oSort`。这个对象看起来像这样：

```
oSort = {
  "string-pre": function ( a ) {
    // ...
  },
  "numeric": function ( a ) {
    // ...
  }
} 
```

但是，如果您需要自定义类型的自定义排序功能，您可以`oSort`通过向对象添加额外的*键*或属性来扩展`oSort`对象。

例如，要添加一个名为 的新类型`date-uk-pre`，您可以使用：

```
$.fn.dataTableExt.oSort['date-uk-pre'] = function ( a ) {
  // ...
} 
```

也就是说，您正在使用一个名为 的新属性来*扩展*。jQuery只不过是一个捷径而已。对于每个新类型，您无需手动添加每个属性，而是传递一个新对象，其中包含所有新类型（例如 ,和jQuery将它们与现有对象**合并**，有效地使用新功能扩展它。您甚至可以将两者结合起来s 到一个：`oSort``date-uk-pre`**[`$.extend()`](http://api.jquery.com/jQuery.extend/)**`date-uk-pre``datetime-uk-pre`**`oSort``$.extend()`**

 **```
$.extend($.fn.dataTableExt.oSort, {
    "date-uk-pre": function (a) {
        var ukDatea = a.split('/');

        return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
    },
    "date-uk-asc": function (a, b) {
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    },
    "date-uk-desc": function (a, b) {
        return ((a < b) ? 1 : ((a > b) ? -1 : 0));
    },
    "datetime-uk-pre": function (a) {
        from = a.split(' ');
        var ukDatea = from[0].split('/');
        var ukTimea = from[1].split(':');
        return (ukDatea[2] + ukDatea[1] + ukDatea[0] + ukTimea[1] + ukTimea[0]) * 1;
    },
    "datetime-uk-asc": function (a, b) {
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    },
    "datetime-uk-desc": function (a, b) {
        return ((a < b) ? 1 : ((a > b) ? -1 : 0));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:57:20.943

像这样：

```
var m1 = {'a':'a','b':'b'};
var m2 = {'c':'c','d':'d'};
var m3 = {'e':'e','f':'f'};

$.extend(m1,m2,m3);

console.log("m1:");
console.log(m1);

//Result : 
//m1:
//{'a':'a','b':'b','c':'c','d':'d','e':'e','f':'f'}; 
```

此外，对于一个论点：

```
$.extend(m1) 
```

相当于

```
$.extend($, m1); 
```

或者

```
jQuery.extend(jQuery, m1); 
```

所以 jQuery 会被扩展。然后 jQuery 将在我上面的特定示例中包含两个附加属性： 'a':'a' 和 'b','b' 。所以 $.a 会返回'a'。

有关详细信息，请参阅[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:57:29.277

扩展函数将第二个参数中定义的属性添加到第一个参数中的对象。通常它用于向插件添加更多功能，就像上面的代码一样。上面的代码向`$.fn.dataTableExt.oSort`对象添加了六个函数。[这个插件](http://datatables.net/plug-ins/sorting)来自谷歌搜索。扩展插件后，您可以执行以下操作：

```
$('selector').dataTableExt.oSort.date-uk-pre(); 
```**

# database - 实现分布式数据库

> ID：12353073
> 
> 赞同：0
> 
> 时间：2012-09-10T13:49:12.257
> 
> 标签：database, database-design, distribution, distributed-system

我需要在数据库系统中实现死锁避免和检测算法。我想知道如何使用 mysql 或 sqlserver 2008 等创建一个分布式数据库系统......任何有关创建分布式数据库系统的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-10T13:55:27.313

由此，您绝对可以创建分布式环境。这取决于您的需要，但[My SQL Cluster](http://www.mysql.com/products/cluster/)绝对适合您的需要。

希望这将使您在分布式系统设计上更上一层楼。

# c# - 使用 InlineUIContainer 在 RichTextBlock 中不必要的重叠插入 UI 对象

> ID：12353074
> 
> 赞同：2
> 
> 时间：2012-09-10T13:49:12.683
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在开发一个 C# Metro 应用程序。在我的页面的 XAML 代码中，我有一个 RichTextBlock，我正在以这种方式填充：

```
<RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}">
    <Paragraph>
        <Run FontWeight="SemiLight" Text="{Binding ContentBefore}"/>
    </Paragraph>
    <Paragraph>
        <InlineUIContainer>
            <Button Content="TEST" Width="300" Height="150"/>
        </InlineUIContainer>
    </Paragraph>
    <Paragraph>
        <Run FontWeight="SemiLight" Text="{Binding ContentAfter}"/>
    </Paragraph>
</RichTextBlock> 
```

我想看到的是 ContentBefore 文本，后跟一个按钮，然后是 ContentAfter 文本。

相反，按钮（或我尝试放在那里的任何其他元素，例如填充了东西的网格）与 ContentBefore 和 ContentAfter 重叠。我设法为按钮获得空间的唯一方法是插入一些 LineBreaks 来“腾出空间”，这显然不是一个可接受的解决方案。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:28:18.930

如果我理解你的问题，也许你可以用它`<Paragraph LineStackingStrategy="MaxHeight">`来解决这个问题。

# php - wp_list_pages 不显示标题属性

> ID：12353076
> 
> 赞同：1
> 
> 时间：2012-09-10T13:49:20.810
> 
> 标签：php, wordpress, list, wordpress-theming

我在我的网站上使用 wordpress，由于某种原因 wp_list_pages() 没有显示标题属性？

我很乐意为 SEO 目的添加它。

有什么帮助吗？

我目前的代码是

```
wp_list_pages('depth=1&title_li=&exclude=9'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:12:59.397

`wp_list_pages()`默认情况下不应该有标题属性。如果给定的函数不符合您的需要，您始终可以编写自己的函数。

```
<?php 
function mytheme_list_pages($param) {
  $pages = get_pages($param); 
  foreach ( $pages as $page ) {
    $li  = '<li><a href="' . get_page_link( $page->ID ) . '" title="';
    $li .= esc_attr($page->post_title);
    $li .= '">';
    $li .= $page->post_title;
    $li .= '</a></li>';
    echo $li;
  }
}
?> 
```

将它放在你的主题 function.php 中并使用它而不是`wp_list_pages()`. 如果您使用的是标准的 wordpress 主题，我建议为此创建一个子主题，因为主题更新将在将来删除您的更改。根据需要随意添加任何 id 和类。当您将当前可见页面的 css 类添加`current_page_item`到生成的 HTML 标记中时，它会变得有点复杂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-05T04:55:36.617

'post_title.'">%s%s%s',

```
add this code wp-includes/post-template.php  line number  1345

'<li class="%s"><a href="%s" title="'.$page->post_title.'">%s%s%s</a>',
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-10T14:09:28.870

这是来自 Wordpress 法典的示例。

在以下示例中，列表中仅包含 ID 为 9、5 和 23 的页面，并且标题文本已更改为“诗歌”一词，标题样式为：

```
 <ul>
<?php wp_list_pages('include=5,9,23&title_li=<h2>' . __('Poetry') . '</h2>' ); ?>
  </ul> 
```

# ruby-on-rails - 我可以在 Rails 中使用动态命名路线吗？

> ID：12353080
> 
> 赞同：0
> 
> 时间：2012-09-10T13:49:29.593
> 
> 标签：ruby-on-rails

我有一个页面控制器，其中支持 3 个静态页面（例如：aboutus、faq 和 home）。我在控制器内没有任何操作，只有适当的视图，所以添加新页面会很容易。

我使用了默认路由：匹配 ':controller(/:action(/:id))(.:format)'

现在可以通过以下方式访问我的页面：'http://localhost:3000/pages/faq'（或任何其他页面）

我想给这些路线命名，所以当我从其他页面创建指向它们的链接时，我会使用一些类似的东西：

```
link_to 'FAQ' faq_path' 
```

而不是 link_to 'FAQ' '/pages/faq'

是否可以创建“动态命名路由”？我试过这样的事情：

```
match 'pages/:action' => 'pages#:action', :as => :action 
```

但它并没有真正起作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:21:01.357

您不能轻易地创建这样的动态方法，但是如果您以不同的方式思考它，您实际上是在参数化您的路径助手。Rails*确实*有一个简单的方法来做到这一点：

```
match "pages/:action", controller: "pages", as: "pages"

pages_path("faq") # => /pages/faq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:06:32.113

```
match "pages/faq", to: "pages#faq", as: "faq"
match "pages/home", to: "pages#home", as: "home"
match "pages/aboutus", to: "pages#aboutus", as: "aboutus" 
```

会给你以下帮手：

```
home_path or home_url
faq_path or faq_url
aboutus_path or aboutus_url 
```

# c# - Facebook Graph API 删除权限

> ID：12353084
> 
> 赞同：1
> 
> 时间：2012-09-10T13:49:52.980
> 
> 标签：c#, facebook-graph-api

试图撤销用户对我的 facebook 应用程序的访问权限并遇到此错误：

> “远程服务器返回错误：（400）错误请求。”

据我了解，所需要做的就是向图形 api url 发出 HTTP DELETE 请求

这是我正在使用的代码：

```
using ( var client = new System.Net.WebClient() ){
                    client.Headers[ System.Net.HttpRequestHeader.ContentType ] = "application/x-www-form-urlencoded";
                    string url = "https://graph.facebook.com/" + fbString + "/permissions?access_token=X";
                    client.UploadString( url, "DELETE", "" );
            } 
```

我不能像登录/注册那样使用javascript，这必须发生在服务器端。

我已经在 C# 的 facebook api 上看到了一些帖子，不确定这是否值得信赖，如果可以正常工作，上面的代码听起来更简单（没有外部依赖项）。

# matlab - Matlab del2和Matlab梯度的梯度差异

> ID：12353087
> 
> 赞同：1
> 
> 时间：2012-09-10T13:49:58.000
> 
> 标签：matlab, image-processing, operators, gradient

谁能解释为什么我在 Matlab 中使用 Laplace 算子时得到如此显着不同的结果

```
laplacian = del2(image); 
```

相对

```
[x, y] = gradient(image);
[xx, xy] = gradient(x);
[yx, yy] = gradient(y);
laplacian = xx + yy; 
```

这些不应该是同一件事吗？当一个包含 dx 项时，它们会变得特别不同。

把我的例子放在这里以防万一：我有一个测试字段，包括

```
 [5; 2.5+2.5i; 5i; -2.5+2.5i; -5; -2.5-2.5i; -5i; 2.5-2.5i] 
```

乘以它的转置（如果有帮助，我可以发布整个矩阵）。该字段的 del2() 的内部块 (3:6, 3:6) 是：

```
[-2.5           -0.625-0.625i  -2.5i           0.625-0.625i ;
 -0.625+0.625i   0             -0.625+0.625i   0            ;
  2.5i          -0.625+0.625i  -2.5           -0.625+0.625i ;
  0.625+0.625i   0             -0.625+0.625i   0            ] 
```

而 xx + yy 的内部块 (3:6, 3:6) 是：

```
[-5             -2.5-2.5i      -5i            -2.5-2.5i     ; 
 -2.5+2.5i      -2.5           -2.5-2.5i      -2.5i         ; 
  5i            -2.5+2.5i      -5             -2.5-2.5i     ; 
  2.5+2.5i       2.5i          -2.5+2.5i      -2.5          ] 
```

如您所见，这将对任何进一步的方程式产生巨大的影响。哪位大神能解释一下，万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:03:47.990

正如您在[del2 的文档中](http://www.mathworks.nl/help/techdoc/ref/del2.html)看到的那样，它与您比较`1/4`的[梯度](http://www.mathworks.nl/help/techdoc/ref/gradient.html)方法不同。

This partly explains that factor 4 in your example. I blame the rest on edge effects :p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-25T14:44:01.490

If you look closely at [Matlab's documentation](https://uk.mathworks.com/help/matlab/), the laplacian of f at (x,y), del2(f(x,y)) is computed using only (x,y) and its nearest neighbours: x+1, x-1, y+1, y-1.

The same goes for the gradient function (and the divergence, which explicitly uses the gradient function). Computing the gradient twice involves the nearest neighbours of the nearest neighbours. Therefore div(grad(f(x,y)) is actually computed using (x,y) and x+2, x-2, y+2, y-2\. Hence the difference.

The greater the grid spacing, the greater the discrepancy between these two calculations will be.

# ruby-on-rails - 在 url 中显示类别名称的路线

> ID：12353088
> 
> 赞同：2
> 
> 时间：2012-09-10T13:50:19.593
> 
> 标签：ruby-on-rails, routes

我是 Rails 开发的新手。我需要有关必须在我的应用程序中编写的路线的帮助。我有以下模型：类别、ItemTypes 和 Items。一个类别可以有许多项目类型，而这些项目类型又可以有许多项目。

我需要编写类似这样的路线：

**www.domain.com**
-主屏幕。在主屏幕中，我将显示类别列表

当一个类别被点击时，我应该显示属于该类别的所有项目，即该类别和 url 的所有项目类型的项目应该像

**www.domain.com/category-name**

项目列表页面将有项目类型的下拉列表。当用户选择项目类型时，用户可以从中过滤项目，URL 应该是这样的

**www.domain.com/category-name/item-type-name/items**

请帮助我为这些案例编写路线。顺便说一句，以下是我编写的模型

```
 class Category < ActiveRecord::Base
     has_many :item_types
     has_many :items, :through => :item_types, :source => :category

     attr_accessible :name, :enabled, :icon
   end

  class ItemType < ActiveRecord::Base
        belongs_to :category
        has_many :items
  end
  class Item < ActiveRecord::Base
        belongs_to:item_type
  end 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:51:40.977

首先，在 routes.rb 中：

```
# Run rake routes after modifying to see the names of the routes that are generated.
resources :categories, :path => "/", :only => [:index, :show] do
  resources :item_types, :path => "/", :only => [:index, :show] do
    resources :items, :path => "/", :only => [:index, :show, :new]
  end
end 
```

然后，在您的 category.rb 模型中：

```
def to_param # Note that this will override the [:id] parameter in routes.rb.
  name
end 
```

在您的 categories_controller.rb 中：

```
def show
  Category.find_by_name(params[:id]) # to_param passes the name as params[:id]
end 
```

在您的 item_type.rb 模型中：

```
def to_param # Note that this will override the [:id] parameter in routes.rb.
  name
end 
```

在您的 item_types_controller.rb 中：

```
def show
  ItemType.find_by_name(params[:id]) # to_param passes the name as params[:id]
end 
```

我建议向您的模型添加 before_saves 和验证，以确保名称是 HTML 安全的，类似的东西`name = name.downcase.gsub(" ", "-")`应该让您开始使用 before_save（但它绝不是全面的）。

# xml - 将节点附加到 EMF 数据模型实例 XML

> ID：12353089
> 
> 赞同：1
> 
> 时间：2012-09-10T13:50:22.260
> 
> 标签：xml, eclipse, dom, xmlnode, emf

我使用 Eclipse 建模框架创建了一个数据模型。这是 XML 形式的数据模型的一个实例。

```
<?xml version="1.0" encoding="UTF-8"?>
<model2:Container xmlns:model2="http://model2/1.0" xmlns:xmi="http://www.omg.org/XMI" xmi:version="2.0">
  <containsRuleElementAssociation src1="//@containsRuleElement.0" target1="//@containsRuleElement.1"/>
  <containsRuleElement name="Sergei" type="//@containsRuleElemntType.0"/>
  <containsRuleElement name="VW Polo" type="//@containsRuleElemntType.1"/>
  <containsRuleElemntType name="Person"/>
  <containsRuleElemntType name="Car"/>
  <containsRuleElementAssociationType name="drives" src="//@containsRuleElemntType.0"
target="//@containsRuleElemntType.1"/>
</model2:Container> 
```

我想`containsRuleElement`用用户输入数据动态附加类型的引用。我正在使用 DOM 解析器来读取 xml，但我不知道如何附加类型`containsRuleElement`类型的节点。该节点`containsRuleElement`不是节点类型`Element`，因为它缺少标签。有人知道如何附加这样的节点吗？我可以为此使用 DOM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:16:39.830

别管这个问题。我现在使用 EMF 资源来创建引用并直接添加它们。它似乎工作。

# ios - iPad 上可填写的 PDF 表格

> ID：12353091
> 
> 赞同：3
> 
> 时间：2012-09-10T13:50:29.357
> 
> 标签：ios, pdf, pdf-generation

我对使用 iOS 和 Android 应用程序创建和注释 PDF 有特定要求。我的应用程序需要从用户输入创建一个 PDF 文件（将使用本机 UIViews 来收集用户输入），然后将此 pdf 通过电子邮件发送给另一个用户。另一个用户可能会在我的应用程序之外添加注释（文本输入），甚至可能在 PC 上进行，他们会将带注释的文件发送回发件人（iPad/Android 应用程序）。iPad App 现在必须打开带有注释文本的 pdf 文件，更新它并再次保存/发送。

如果这可能并且可以使用一些第 3 方 PDF 库来实现，你们能指导我吗？

谢谢你的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-05T18:43:19.457

你可以试试[ILPDFKit](https://github.com/iwelabs/ILPDFKit "ILPDFKit")，开源的，虽然它说它是实验性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:40:37.563

我很惊讶没有人回答这个问题......

我在google上搜索并想出了这两个，第一个是OpenSource

[http://pdfhummus.com/](http://pdfhummus.com/)带有指向他们的 github 存储库的链接和一个关于如何使用它的 wiki，但我不熟悉该项目以了解它的成功。我已经向作者发送了一条消息，希望他会回复一些指针，他的 wiki 有关于如何在 Mac OSX 中使用的文档，但是虽然他的演示中有 xcode 项目和在 iOS 中构建的说明，但我仍然不知所措...

另一个选择是： [http](http://www.pdftron.com/pdfnet/mobile/ios_pdf_library.html) ://www.pdftron.com/pdfnet/mobile/ios_pdf_library.html 这是一个 sdk 解决方案，您可以授权... :-/

后者似乎更易于使用，因为它有完整的示例和指南，说明构建您的应用程序所需的内容。这当然意味着您需要考虑许可他们的 sdk。

# java - 递归数组无法正常工作

> ID：12353096
> 
> 赞同：0
> 
> 时间：2012-09-10T13:50:47.593
> 
> 标签：java, recursion, sorting, recursive-query

好的，所以我已经编写了一些基本代码来测试各种排序方法（目前只测试一种排序方法）并找到最有效的方法。为了使结果被认为是准确的，我计划在不同大小的阵列上多次运行测试。我没有一遍又一遍地手动运行相同的测试，而是尝试创建一个递归函数，但到目前为止我所拥有的并不起作用（基本情况并不完全起作用，它会永远持续下去）。有人可以帮助我，以便我可以使用有效的递归方法多次运行测试吗？

旁注，我已经写了大约 5 种不同的排序方法（如下所示的 selectionSort），并且想知道是否有人对在测试方法中旋转它们的最佳方法有任何想法，这样我就不必将 selectionSort 更改为否则每次我想测试不同的排序方法。干杯。

```
public void testSorts(){

    int size = 100;
    if(size < 1000000){
        String[] data;
        long start;
        long time;

        UI.println("\n\n======Selection Sort=======\n");

        data = createArray(size);
        start = System.currentTimeMillis();
        selectionSort(data);
        time =  System.currentTimeMillis() - start;

        UI.printf("Number of items:  %,d\n", data.length);
        UI.printf("Sorted correcetly: %b\n", testSorted(data));
        UI.printf("Time taken:       %.2f s\n", time/1000.0);

        UI.println("\n=======DONE=========\n");

        size = size*10;
        testSorts();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:20:06.267

我同意其他回答者的观点，即这里不需要使用递归，@Rein 或多或少地建议了我会做什么。

关于“自动”尝试不同类型的排序，您可以：

*   定义一个包含`public String[] sort(String[] data)`方法的接口
*   使用实现排序接口的各种实现在您的测试类中填充一个列表。
*   在测试类的现有循环内部或外部有另一个循环迭代您委托搜索的对象（取决于您是否希望所有算法都具有一种大小或一个算法顺序的所有大小）

这意味着您的搜索算法与您的“测试工具”类很好地分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:10:37.993

如果您将“size”参数传递给您的 testSorts 函数，您可以解决此问题。就目前而言，您只是在自身内部调用相同的函数而没有任何更改，因此您将获得一个无限循环（实际上是堆栈溢出）。

作为一个更大的评论，我认为没有任何理由为此使用递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:10:39.910

你为什么不创建一个方法'test（）'，其中包含一个调用你实际测试方法的for循环？你的 for 循环可以增加 100，就像你的 'testSorts' 方法一样。

```
for(int size = 0; size < 1000000; size += 100) {
  testSort(size);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:14:53.393

问题是您的变量`size`是该方法的本地变量，因此当您增加大小然后`testSorts`再次调用时，会在递归调用的范围内创建一个“新大小”变量。

要递归使用它，您必须：

```
public void testSorts(int size){

    if(size < 1000000){
        ....
        size = size*10;
        testSorts(size);
    }
} 
```

但是，我会使用一个简单的循环将每个步骤的大小增加一个数量级：

```
for (int size = 100; size < 1000000; size = size * 10){
    String[] data;
    long start;
    long time;

    UI.println("\n\n======Selection Sort=======\n");

    data = createArray(size);
    start = System.currentTimeMillis();
    selectionSort(data);
    time =  System.currentTimeMillis() - start;

    UI.printf("Number of items:  %,d\n", data.length);
    UI.printf("Sorted correcetly: %b\n", testSorted(data));
    UI.printf("Time taken:       %.2f s\n", time/1000.0);

    UI.println("\n=======DONE=========\n");
} 
```

# css - Twitter Bootstrap 和比按钮中的标准图标更大

> ID：12353097
> 
> 赞同：1
> 
> 时间：2012-09-10T13:50:48.907
> 
> 标签：css, button, twitter-bootstrap, height, padding

当我使用时，一切都很完美：

```
<button type="submit" class="btn btn-primary">
  <i class="icon-user icon-white"></i> text
</button> 
```

我想要我自己的图标。这就是我使用的原因：

```
<button type="submit" class="btn btn-primary">
  <i class="icon-school icon-white"></i> text
</button> 
```

我的图标显示在按钮中，但我的图标有点高（20px x 16px）。因此，它显示为 75%。如何解决？改变高度或填充没有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:55:38.140

最好的方法是扩展**引导**图标精灵并在 css 上添加一行，其中包含新图标的确切位置。

搜索其中一个引导图标并添加您的下方。

如果我的图标更大，我也总是这样做，只需更改您唯一的宽度/高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:06:45.807

创建一个`icon-perso`类

```
<button type="submit" class="btn btn-primary">
  <i class="icon-school icon-perso"></i> text
</button> 
```

添加以下 css 以覆盖默认行为：

*   你图片的网址
*   图片的宽度和高度
*   将行高更改为图片高度
*   如果需要，边距

.

```
.icon-perso {
  background-image: url("../img/glyphicons-perso.png");
  width: 20px;
  height: 16px
  line-height: 16px;
} 
```

If you picture contain several icons like glyphicons-halflings.png you may have to change the background-position

```
.icon-school {
  background-position: 0px 0px;
} 
```

You can have a look at `bootstrap.css` around from line 2143 if you are curious.

# c# - 在 C# 中释放资源

> ID：12353101
> 
> 赞同：1
> 
> 时间：2012-09-10T13:51:02.243
> 
> 标签：c#, list, resources, garbage-collection, single-threaded

`[STAThread]`我有一个在 C# 中 运行的程序。

该程序定期创建类 X 的实例并将它们添加到列表中。
一段时间后，这些 X 的实例需要执行的任务都完成了，不再需要该类的实例。
由于我在单个线程上运行，并且这些 X 的许多实例可能同时运行并耗尽资源，即使它们不再需要，我想在我知道 X 的实例完成时释放资源，这样我的程序就不会变慢。

我的代码如下所示：

```
 public partial class Form1 : Form
 {
    List<X> myList = new List<X>();

    ...
 } 
```

我想知道是否：

1.  执行该操作`myList.RemoveAt(0)`将从内存中删除类 X 的第一个实例的所有跟踪。
2.  如果有更好的方法来做到这一点。

谢谢！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:59:37.327

从列表中删除类不会从内存中删除它的所有痕迹。C# 是一种带有垃圾收集器的托管语言。每当不再从任何被视为“活动”的位置引用特定对象时（意味着仍然可以在代码中以某种方式访问​​该引用），它*有资格*进行垃圾收集。这仅仅意味着在未来某个不确定的时间，GC 可以自由地清理该对象的内存。可能是马上，也可能是很长时间。幸运的是，您几乎不需要担心这一点；您只需要确保一旦不再需要它们就不会持有消耗大量内存的对象的引用。

在你的情况下，你没有提供很多细节。在对 X 类一无所知的情况下，我会说它不会消耗那么多内存，而且您的列表可能没有那么大。鉴于此，只要这不是一些将持续数天的长期任务，如果它在没有被释放的情况下比它应该运行的时间长一点，这可能没什么大不了的。

如果这些对象消耗大量内存（如果它们包含大型数据库查询的结果、大型文件的内容等），那么我会问你为什么首先要有这个列表？您创建了一个类型列表，并声明它正在后台线程中使用。整个列表是否传递给后台线程？只是某些项目？如果它被传递给后台线程，那么您根本不需要在主线程中引用它（尽管您需要显示更多代码才能确定地说）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:01:10.700

不，`myList.RemoveAt(0);`只会从列表中删除对您的对象的引用。但是垃圾收集器 (GC) 将删除您的完整对象，因为不再有对它的引用。

**如果你不使用非托管内存，只相信GC，你不知道他什么时候会准确地删除对象，但没关系，顺其自然。**

如果您在类 X 中使用非托管内存（COM 对象、文件句柄等，基本上是任何具有 Dispose() 方法的东西），那么仅删除对对象的引用是不够的。在这种情况下，在您的类 X 中实现 IDisposable 接口并编写一个 Dispose 方法，该方法将调用您在 X 中使用的对象的 Dispose 方法。然后将您的代码更改为

```
myList[0].Dispose();
myList.RemoveAt(0); 
```

# jsp - 将 ArrayList 从 Spring MVC 操作传递到 JSP 时遇到问题

> ID：12353102
> 
> 赞同：2
> 
> 时间：2012-09-10T13:51:08.733
> 
> 标签：jsp, spring-mvc, arraylist, jstl

我正在尝试将用户类型的对象列表从我的 Spring MVC 操作传递给 JSP。

下面是 User 类的样子：

```
public class User {

    String name = null;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

这是 Spring MVC 操作方法：

```
@RequestMapping("/search.htm")
public String searchUser(@ModelAttribute("user") User user,
        @ModelAttribute("userSearchResult") ArrayList<User> usersSearchResult) {
    usersSearchResult.add(new User()) ;
    usersSearchResult.get(0).setName("name1") ;
    System.out.println(usersSearchResult.get(0).getName()) ;
    System.out.println(user.getName());
    return "search" ;
} 
```

这是 JSP 代码：

```
<br/>
-----------------------<br/>
SEARCH RESULTS<br/>
-----------------------<br/>
#Results Shown: ${fn:length(userSearchResult)}
<br/>

<c:forEach items="${usersSearchResult}" var="auser">
    <br/>
    ------------<br/>
    ${auser.name}<br/>
    ------------<br/>
    <br/>
</c:forEach> 
```

length 函数正确返回值 1，但 auser.name 不显示任何内容。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:54:27.967

您`usersSearchResult`在`<c:forEach>`标签中使用，并`userSearchResult`为长度。

IMO 它应该只是`users`；这是一个用户列表。上下文是隐含的。

# apache - 重写规则没有斜杠？

> ID：12353106
> 
> 赞同：0
> 
> 时间：2012-09-10T13:51:14.707
> 
> 标签：apache, mod-rewrite, url-rewriting

我有一个链接设置：[http](http://website.com/link) ://website.com/link - 问题是当点击它时它会转到[http://website.com/link/](http://website.com/link/) - 当我输入网址[http://website.com/链接](http://website.com/link)重定向到[http://website.com/link/](http://website.com/link/)

那么，如果输入了[http://website.com/link](http://website.com/link) ，我怎么能做到，那么 url 不会转到[http://website.com/link/](http://website.com/link/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:56:52.520

没关系，对不起，删除了 Firefox 历史记录，现在它不再进行重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:57:40.153

```
RewriteEngine On
RewriteBase your.domain
# Rewrite an address with optional trailing slash to one without it
RewriteRule ^/?(.*)/?$ $1 [L] 
```

试试这个

# javascript - 带动画的 CSS 灰度

> ID：12353107
> 
> 赞同：6
> 
> 时间：2012-09-10T13:51:14.160
> 
> 标签：javascript, jquery, jquery-animate, grayscale

我有一些用于将图像更改为灰度的 CSS（带有一些用于 Firefox 的 svg）

```
img.grayscale{
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%); 
            -moz-filter: grayscale(100%);
            -ms-filter: grayscale(100%); 
            -o-filter: grayscale(100%);
            filter: url(desaturate.svg#greyscale);
            filter: gray;
            -webkit-filter: grayscale(1);
        } 
```

但现在我想要悬停动画以将灰度值更改为 0。

我有这段代码，但它什么也没做（当然是在 chrome 上），我不知道为什么它根本没有动画。

```
<script type="text/javascript">
        $(".grayscale").hover(
            function () {
                $(this).animate({
                    '-webkit-filter': 'grayscale('0'%)'
                }, 300);
            }
        );
    </script> 
```

我认为可以将 % 从 100% 设置为 0% 的动画，不是吗？

编辑：我正在尝试为所有浏览器做，不仅是 chrome，而且我在 chrome 上进行测试，这就是为什么我没有更改所有属性。我想当我找到 chrome 的答案时，我可以为其他浏览器做同样的事情:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T14:01:42.453

为什么要使用 animate() 呢？您已经只为 webkit 制作动画，那么为什么不使用转换属性和类来触发动画呢？像这样：

```
img {
  -webkit-transition: all 300ms;
}

img.grayscale {
  -webkit-filter: grayscale(1);
} 
```

然后只需通过调用删除类

> $('img.grayscale').removeClass('grayscale');

注意：我不知道仅对灰度进行动画处理的特定属性是什么，但是如果您没有对元素进行任何其他转换，则转换“全部”就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:42:58.160

您可以使用我的愚蠢功能。但它有效:)

HTML;

```
<img src ="http://upload.wikimedia.org/wikipedia/en/6/62/American_McGee_Alice_box.gif" border="0" class="ongray" /> 
```

CSS；

```
img {-webkit-transition:-webkit-filter 0.3s ease-in-out;}
.g {-webkit-filter: grayscale(1);} 
```

JS；

```
$(".ongray").hover(
    function(){$(this).addClass("g")},
    function(){$(this).removeClass("g");}
); 
```

[http://jsfiddle.net/kEC92/3/](http://jsfiddle.net/kEC92/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:53:29.513

像这样编辑

```
<script type="text/javascript">
    $(".grayscale").hover(
        function () {
            $(this).animate($(this).css("-webkit-filter" , "grayscale('0'%)"), 300);
        }
    );
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T16:39:58.563

```
.grayscale{
        filter: grayscale(0%);
        -webkit-filter: grayscale(0%);   }

.grayscale:hover{
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:15:17.670

您还可以使用**onmouseover**和**onmouseout设置内联 css**

```
<img src="image.jpg" onmouseover="$(this).css('-webkit-filter','grayscale(100%)')" onmouseout="$(this).css('-webkit-filter','grayscale(0%)')" style="-webkit-transition:1000ms;"> 
```

# javascript - 检索商店记录

> ID：12353113
> 
> 赞同：0
> 
> 时间：2012-09-10T13:51:26.690
> 
> 标签：javascript, extjs, extjs4

我有一个这样的 JSON。

```
{
    "children":[
        {"name": "subdivision1","id": "subdiv1","type": "subdiv","children":[
            {"name": "Scheme1","id": "scheme1","type": "scheme","children":[
                {"name": "Nathuji","id": "nathuji","type": "datalogger","leaf":true},
                { "name": "Tarsang","id": "tarsang","type": "datalogger","leaf":true},
                { "name": "Mithapur","id": "mithapur","type": "datalogger","leaf":true},
                { "name": "Samali","id": "samali","type": "datalogger","leaf":true}]},
            {"name": "Scheme2","id": "scheme2","type": "scheme","children":[
                { "name": "Bhunidra","belongsto": "scheme2","id": "bhunidra","type": "datalogger","leaf":true},
                { "name": "Chhogala","belongsto": "scheme2","id": "chhogala","type": "datalogger","leaf":true}]
                }]},
        {"name": "subdivision2","id": "subdiv2","type": "subdiv","children":[
            {"name": "Scheme3","id": "scheme3","type": "scheme","children":[
                { "name": "Thana Savli","belongsto": "scheme3","id": "thanasavli","type": "datalogger","leaf":true},
                { "name": "Padardi","belongsto": "scheme3","id": "padardi","type": "datalogger","leaf":true}]
                }]}]} 
```

像这样的模型。

```
Ext.define('DemoApp.model.dataloggerhierarchymodel',{
    extend: 'Ext.data.Model',
    fields: ['name','id','type'],
    proxy: {
        type: 'ajax',
        api: {
            read: 'data/allschemes.json'
        },
        reader: {
            type: 'json',
            root: 'children'
        }
    }
}); 
```

像这样存放。

```
Ext.define('DemoApp.store.dataloggerhierarchystore',{
    extend: 'Ext.data.TreeStore',
    model: 'DemoApp.model.dataloggerhierarchymodel',
    autoLoad: true,
    listeners: {
        load:function(){
            console.log('Datalogger Tree store loaded');
        }
    },
    root: {
        expanded: true
    }
}); 
```

我在控制器中访问它，例如，

```
var schemesStore = this.getDataloggerhierarchystoreStore();
        if(schemesStore == null || schemesStore == undefined){
            console.log('Store Undefined');
        }
        for(var i = 0; i< schemesStore.count();i++)
            {
                console.log('Record - '+schemesStore[i].get('id'));
            };

        schemesStore.each(function(currentRecord){
            console.log(currentRecord.get('id'));
        }); 
```

我在树形面板中显示它，它工作正常。现在我想从商店访问每条记录。但我得到的错误`count()`不是函数。在 , 的情况下也是`totalCount()`如此`each()`。我在这里想念什么？如何从商店访问个人记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:57:19.900

不幸的是，`Ext.data.TreeStore`它不是`Ext.data.Store`. 它没有普通商店的所有方法。为了访问数据，您必须通过使用`getRootNode()`和使用定义的方法访问根节点`Ext.data.NodeInterface`。

NodeInterface 提供了`cascadeBy()`等效于 的方法`each()`，您必须使用它来编写自己的`count()`方法。

# java - 用java打开上传的文件

> ID：12353120
> 
> 赞同：-1
> 
> 时间：2012-09-10T13:52:09.640
> 
> 标签：java, ftp

海。我有一个 java 代码，可以通过服务器上的 ftp 上传文件。我的项目的 xml 文件允许上传所有类型的文件，但是当我上传某些文件（例如 PNG 格式）时，它会传输它，但是当我尝试打开文件时在服务器上它不起作用。

```
 try
    {
        if (!ftp.login(username, password))
        {
            ftp.logout();
            error = true;
            break __main;
        }

        System.out.println("Remote system is " + ftp.getSystemName());

        ftp.setFileType(FTP.BINARY_FILE_TYPE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:54:16.847

我的猜测是您正在以文本模式传输文件。对于文本文件，这很好（实际上是首选）但是对于像 PNG 这样的二进制文件，它会损坏它们。

尝试以 BINARY 模式发送 PNG。

# php - 将 while 的输出作为字符串放置

> ID：12353125
> 
> 赞同：-1
> 
> 时间：2012-09-10T13:52:29.263
> 
> 标签：php

将 while 函数的结果放入字符串中的最佳做法是什么。

例如 ：

```
while($row2 = mysql_fetch_assoc($select2)){
    echo "id:".$id."<br />";
    echo "Job Title: ".$title."<br />";
    echo "Email: ".$email."<br />";
}

$message = $row2; 
```

这是我尝试过的，但找不到正确的方法。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:53:57.667

连接它：

```
$message = '';

while($row2 = mysql_fetch_assoc($select2)){
    $message .= "id:".$id."<br />";
    $message .= "Job Title: ".$title."<br />";
    $message .= "Email: ".$email."<br />";
}

echo $message; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:56:58.390

我更喜欢使用数组。

```
$message = "";
while($row2 = mysql_fetch_assoc($select2)){
   $message[] = "id:".$row2['id'];
   $message[] = "Job Title: ".$row2['title'];
   $message[] = "Email: ".$row2['email'];
}

echo implode('<br />', $message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:54:50.600

使用字符串 concat 运算符：

```
$message = "";
while($row2 = mysql_fetch_assoc($select2)){
   $message .= "id:".$id."<br />";
   $message .= "Job Title: ".$title."<br />";
   $message .= "Email: ".$email."<br />";
}

echo $message; 
```

# c# - 从具有其他属性名称的其他数据库导入数据

> ID：12353126
> 
> 赞同：0
> 
> 时间：2012-09-10T13:52:30.027
> 
> 标签：c#, database, entity-framework

所以我有 2 个数据库，1 个 SQLite 文件，每周更新一次（所以我需要每周运行一次此更新）。还有一个 SQLserver（但现在只使用 SQLfile 进行本地测试等）。但是我正在寻找一种简单的方法将所有数据从 SQLite 文件复制到 SQLserver，那里有 10 个类，它们存在于两个数据库中，除了 sqlite 在开始时没有大写字母，而 sqlserver 有。

sqlite 中有一个人表，其中包含 id、name 和 lastname。在 SQLserver 上，该表称为 Person（大写），列是 Id Name 和 Lastname。SQlite 文件由第 3 方提供，我无法决定他们做什么。SQLserver 是使用 Code First EF 制作的。（而且我更喜欢 CamelCase 这一切）。

有没有一种简单的方法来复制所有数据，例如，我正在寻找类的属性循环，然后再降低。

```
ForEach(var person in SQLiteDB.persons)
{
    Person thenewperson = new Person();
    foreach (var prop in person.GetType().GetProperties())
    {
        // Here I get stuck I want something like
        if(thenewperson.Haspropertie.ToLower(prop.GetName.ToLower) // This is incorrect but I think you ll understand if we do a ToLower then we can get it to work. Since only capitals are the things that are different.
        {
           //Then we copy the data to "thenewperson"
        }

    }
    SQlserverDB.Persons.AddorUpdate(thenewperson) // Not totaly correct but you get the point.
} 
```

我不确定或者我的方向是正确的，我已经用谷歌搜索了如何循环属性，但没有找到复制数据的好方法。我也因尝试修复 VS 2012 以与 SQLite 一起工作而头疼，但 ADO.net 似乎无法正常工作，所以我不得不再次安装 VS2010 等等，哈哈（现在都运行）。

希望有人对此有很好的解决方案，如果您还有其他问题，请随时提出。

编辑：我忘了提到它也有一个导航属性。（如 PersonAbilitys）。其中也需要复制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:11:52.453

这应该完成您正在尝试的操作（未经测试，可能会失败）：

```
foreach(var person in SQLiteDB.persons)
{
    Person thenewperson = new Person();
    foreach (var prop in person.GetType().GetProperties())
    {
        var newPersonProp = thenewperson.GetType().GetProperties()
                                                  .FirstOrDefault(p => p.Name.ToLower() == prop.Name.ToLower());

        if (newPersonProp != null)
        {
            newPersonProp.SetValue(thenewperson, prop.GetValue(person, null), null);
        }
    }
    SQlserverDB.Persons.AddorUpdate(thenewperson); // Not totaly correct but you get the point.
} 
```

但是，您可以通过预先计算属性映射来改进它，因此您不必为每个 SQLiteDB.persons 查找它。

```
var propertyMapping = new Dictionary<PropertyInfo, PropertyInfo>();
var efPersonType = typeof(Person);
var sqlitePersonType = typeof(SQLLitePerson);

foreach (var prop in sqlitePersonType.GetProperties())
{
    var efProp = efPersonType.GetProperties()
                             .FirstOrDefault(p => p.Name.ToLower() == prop.Name.ToLower());
    if (efProp != null)
    {
        propertyMapping.Add(prop, efProp);
    }
}

foreach (var person in SQLiteDB.persons)
{
    Person thenewperson = new Person();
    foreach (var i in propertyMapping)
    {
        i.Value.SetValue(thenewperson, i.Key.GetValue(person, null), null);
    }
    SQlserverDB.Persons.AddorUpdate(thenewperson);
} 
```

您还可以选择一个**对象映射器**，例如[AutoMapper](https://github.com/AutoMapper/AutoMapper)。然后，您可以创建自定义约定以使其工作。

如果您有更复杂的实体，那么您应该使用 AutoMapper 而不是滚动自己的映射解决方案以节省时间：[AutoMapper Wiki](https://github.com/AutoMapper/AutoMapper/wiki)

顺便说一句，最直接的方法是创建手写映射。

# google-chrome-extension - 为什么 chrome.downloads.download 在不添加其他功能的情况下无法正常工作。（在其后添加 alert() 时有效）

> ID：12353127
> 
> 赞同：2
> 
> 时间：2012-09-10T13:52:31.013
> 
> 标签：google-chrome-extension

我正在开发一个使用`chrome.downloads.download`API 的 chrome 扩展。我的扩展是捕获下载事件并触发`webkitNotification`。我从谷歌的一个示例中发布了我修改的主要工作功能。

```
function downloadCheckedLinks() {
    for (var i = 0; i < visibleLinks.length; ++i) {
        if (document.getElementById('check' + i).checked) {         
            chrome.downloads.download({url: visibleLinks[i]}, function(id) {
                var notification = window.webkitNotifications.createNotification('',
                               'OMG', 'hello within for loop, succeed!');
                notification.show();
            });
            alert("function executed!");
        }
    }
    window.close();
} 
```

问题是当我删除 时`alert("function executed")`，它只在调试模式下工作，我在 for 循环中设置了一个断点并单步执行代码。在正常模式下，我必须添加一些东西才能使其工作（即`alert()`）。我觉得是因为`chrome.downloads.download()`.

由于我对 Web 开发这个词不熟悉，所以我不完全知道我的问题出在哪里。谁能帮我弄清楚这里发生了什么？如果可能的话，你能教我在这样的异步函数调用中`chrome.downloads.download()`，当匿名回调函数被准确调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:04:25.660

评论`window.close()`可以工作。我猜当窗口关闭时，下载调用被取消。但我不能给出确切的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:52:22.060

您的 javascript 代码在文档的上下文中执行。如果您发出 window.close 您的 javascript 函数将停止并且它的代码和数据垃圾收集。由于回调函数，chrome.downloads.download 可能是异步的。Javascript 引擎是单线程的。因此，只要您的 for 循环正在执行，就没有其他 javascript 正在运行。对 chrome.downloads.download 的调用排队到一些内部 javascript 引擎队列：在当前函数结束后立即执行。您发出的最后一条语句是 window.close();

javascript 队列仍然包含一些要执行的函数，但是 window.close() 获胜：队列被杀死，你的回调永远不会被触发。

它在您使用调试器时起作用：调试器保持您的窗口被引用并因此在内存中，这使 javascript 引擎能够执行排队的函数。

如果您在代码中添加几行，如果所有下载都已结束，您可以关闭窗口：

```
function downloadCheckedLinks() {
    var pending = 0; // closure var
    for (var i = 0; i < visibleLinks.length; ++i) {
        if (document.getElementById('check' + i).checked) {
            pending = pending + 1;       
            chrome.downloads.download({url: visibleLinks[i]}, function(id) {
                var notification = window.webkitNotifications.createNotification('',
                               'OMG', 'hello within for loop, succeed!');
                notification.show();
                pending = pending - 1;
                if (pending <1) {
                   window.close();
                }
            });
        }
    }
} 
```

# android - android如何解析xml布局文件并在Graphical Layout中显示视图。

> ID：12353132
> 
> 赞同：2
> 
> 时间：2012-09-10T13:52:50.197
> 
> 标签：android, android-layout, xml-parsing, android-ui

android如何解析xml布局文件并在Graphical Layout中显示视图。

1.  android内部使用什么解析器？
2.  解析如何如此快速高效？

我知道关于 SO 有一些类似的问题，但我想具体了解以上我找不到的问题。如果这些问题确实存在，那么链接到它们会很棒。:)

# .net - 隐藏 StackPanel 项目 --> 调整剩余项目位置

> ID：12353134
> 
> 赞同：1
> 
> 时间：2012-09-10T13:52:54.410
> 
> 标签：.net, wpf, triggers

（使用 VS 2010）我是 WPF 的新手，正在尝试创建一个 TreeViewItem，它显示 2 个图像，然后是一些文本。为此，我正在使用 StackPanel。我希望根据模型属性的更改显示/隐藏第一张图像，因此我添加了一个触发器以将其宽度设置为 0：

```
 <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">

                <StackPanel Orientation="Horizontal" Margin="2" SnapsToDevicePixels="True" Width="Auto">
                    <Image Width="16" Height="16">
                        <Image.Style>
                            <Style TargetType="{x:Type Image}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding LinkType}" Value="Co">
                                        <Setter Property="Source" Value="/Images/Image1.png"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding LinkType}" Value="Post">
                                        <Setter Property="Width" Value="0"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>

                    <Image Source="/Images/Image2.png"
                        Width="15"
                        Height="15"
                        SnapsToDevicePixels="True" Margin="3,0"/>
                    <TextBlock Text="{Binding Name}" Margin="5,0" />
                </StackPanel>

            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
```

这实际上隐藏了图像，但留下了一个空白 - 堆栈面板中的剩余项目不会向左滑动以解释第一张图像的“移除”。我还尝试以相同的结果触发 Visibility。

有没有办法可以在 StackPanel 中添加/删除、显示/隐藏或更改 width=0 等项目，以便其余项目相应地重新调整它们的位置？或者有没有比 stackpanel 更好的容器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:44:55.830

是的。当您使用 TreeView 时，TreeView 的直接“子项”实际上并不是您的 Image 控件 - 您的 Image 控件包含在 TreeViewItem 控件中。这些是自动生成的，并允许 TreeView 以更直观的方式处理其子项（无需强制所有控件实现 TreeView 子项所需的属性/功能）。

自定义这些 TeeViewItem 很容易。它们与您的图像共享相同的 DataContext，因此您可以像这样设置 TreeView.ItemContainerStyle：

```
<TreeView>
    <TreeView.ItemContainerStyle>
        <Style TargetType="{x:Type TreeViewItem}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding LinkType}" Value="Post">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers> 
        </Style>
    </TreeView.ItemContainerStyle>
</TreeView> 
```

# c# - 更改 VS2012 中的默认 EventHandler 命名

> ID：12353139
> 
> 赞同：1
> 
> 时间：2012-09-10T13:53:09.667
> 
> 标签：c#, naming-conventions, visual-studio-2012

VS2010 有一个出色的扩展，允许用户更改事件处理程序的默认命名：http: [//einaregilsson.com/better-eventhandler-names-in-visual-studio-2010/](http://einaregilsson.com/better-eventhandler-names-in-visual-studio-2010/)

我真的不喜欢（我很确定）VS2012 生成的默认名称，我认为它们与早期版本相同。例如：

```
myMenuItem_Click(..) 
```

我更喜欢类似的东西

```
onMyMenuItemClick(..) 
```

到目前为止，Einar 还没有更新他的 VS2012 扩展 - 我希望他会......

我对 VS2012 的选项进行了一些查看，但没有看到任何明显的东西。据我所知，ReSharper 可能会告诉我下划线是不好的做法，但不允许我重写默认值。我对挖掘太多感到有点紧张，所以如果有人能指出我正确的方向或让我摆脱痛苦，那么我至少可以转移到另一个担忧....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:06:49.660

2012 年 8 月下旬的博客文章中有一条评论说 Einar 将尝试支持 VS 2012。也许发邮件问问你能提供什么帮助？

否则，我建议下载 2010 年的 GPL 代码并开始深入研究。

# android - 项目仅在触摸屏幕时出现

> ID：12353140
> 
> 赞同：1
> 
> 时间：2012-09-10T13:53:17.997
> 
> 标签：android, google-maps, itemizedoverlay

我正在使用 GoogleMaps 开发应用程序，但遇到了 ItemizedOverlay 的问题：覆盖显示正确，但只有在触摸屏幕时才会显示每个更改。我是 android 新手，所以我知道这可能不是叠加层的问题，而是 mapView 本身的问题，但我无法通过在网上搜索答案来解决这个问题。提前感谢！

有我的代码：（我在示例中看到的一切都是普通的）

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_location);

        map = (MapView) findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);

        Drawable markerDefault = this.getResources().getDrawable(
                R.drawable.star_icon);
        markerDefault = resize(markerDefault, 50);
        Drawable myselfIcon = this.getResources().getDrawable(
                R.drawable.myself2);
        myselfIcon = resize(myselfIcon, 50);

        itemizedOverlay = new GroupLocationOverlay(markerDefault, myselfIcon,
                this);
        map.getOverlays().add(itemizedOverlay);
}

private class GroupLocationOverlay extends ItemizedOverlay<OverlayItem> {
        Drawable myIcon;
        private int numOfMembers = 0;
        HashMap<String, Integer> nameTable = new HashMap<String, Integer>();
        HashMap<Integer, OverlayItem> overlays = new HashMap<Integer, OverlayItem>();

        public GroupLocationOverlay(Drawable icon, Drawable self,
                Context context) {
            super(boundCenterBottom(icon));
            ctxt = context;
            myIcon = self;
            populate();
        }

        public void clear() {
            nameTable.clear();
            overlays.clear();
            numOfMembers = 0;
            setLastFocusedIndex(-1);
            populate();
        }

        public void addItem(double lat, double lng, String id, String time) {
            GeoPoint point = new GeoPoint((int) (1E6 * lat), (int) (1E6 * lng));
            OverlayItem item = new OverlayItem(point, id, time);

            if (id.equals(identity)) {
                item.setMarker(boundCenterBottom(myIcon));
            }

            Integer index = nameTable.get(id);
            if (index == null) {// new member
                index = Integer.valueOf(numOfMembers++);
                nameTable.put(id, index);
            }
            overlays.put(index, item);
            setLastFocusedIndex(-1);
            populate();
        }

        @Override
        protected OverlayItem createItem(int index) {
            Integer i = Integer.valueOf(index);
            return overlays.get(i);
        }

        @Override
        public int size() {
            return numOfMembers;
        }
    }
} 
```

# c# - 在 WPF 中以编程方式添加“红色曲线”下划线

> ID：12353141
> 
> 赞同：5
> 
> 时间：2012-09-10T13:53:20.150
> 
> 标签：c#, wpf

> **可能重复：**
> [FlowDocument 中的波浪下划线](https://stackoverflow.com/questions/632450/wavy-underlines-in-a-flowdocument)

我有一个表单，我需要能够以编程方式添加红色波浪线错误下划线以在流文档中运行，但真的不知道从哪里开始。谁能指出我正确的方向？

# ruby-on-rails - 交易追踪

> ID：12353143
> 
> 赞同：0
> 
> 时间：2012-09-10T13:53:25.663
> 
> 标签：ruby-on-rails

如何为我的应用创建交易跟踪？我想检查我的用户的每一个动作。

支付

```
record transaction of the following and with the fields inputed:
creating payment
editing payment
deleting payment 
```

其他活动

```
Record add, edit, view and delete of other parts of the app including the fields input 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:59:42.087

你可以用`ActiveSupport::Notifications`这个

[http://asciicasts.com/episodes/249-notifications-in-rails-3](http://asciicasts.com/episodes/249-notifications-in-rails-3)

# c# - DbMigrator.GetPendingMigrations() 始终为空

> ID：12353149
> 
> 赞同：6
> 
> 时间：2012-09-10T13:53:48.407
> 
> 标签：c#, entity-framework, migration, ef-code-first, dbmigrator

我正在使用`DbMigrator`该类来获取待处理迁移的列表。出于某种原因，即使有待处理的迁移，它也不会返回任何项目。我错过了一步吗？

```
var configuration = new Migrations.Configuration();
configuration.TargetDatabase = new DbConnectionInfo("MyDatabase");

var migrator = new DbMigrator(configuration);
var migs = migrator.GetPendingMigrations().ToList();
Console.WriteLine(migrator.GetPendingMigrations().ToString()); 
```

我认为它可能是连接字符串，但有趣的是它`migrator.GetDatabaseMigrations()`返回已应用于数据库的正确迁移列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-23T00:33:40.557

同样的事情也发生在我身上，原因是我在不同的集会中工作。在这种情况下，您需要指定包含迁移的程序集和命名空间：

```
config.MigrationsAssembly = Assembly.GetAssembly(typeof([One of your migration classes]));
config.MigrationsNamespace = "[Namespace containing your migrations]"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-29T14:00:05.867

我也有同样的问题，经过一周的研究和阅读 .Net 源代码终于找到了解决方案。如果您在不同的程序集中工作，则必须完全像这样设置配置程序集信息：

```
 public void UpdateDatabaseToLatestVersion()
    {
        var configuration = new DbMigrationsConfiguration();
        var type = GetType();

        configuration.MigrationsAssembly = type.Assembly;
        configuration.TargetDatabase = new DbConnectionInfo(connectionString, "System.Data.SqlClient");
        configuration.MigrationsNamespace = type.Namespace + ".Migrations";
        configuration.ContextKey = type.Namespace + ".Migrations.Configuration";
        configuration.ContextType = type;
        var migrator = new DbMigrator(configuration);

        migrator.Update();
     } 
```

这段代码在`DbContextBase`课堂上，`DbContext`我的项目中的所有继承`DbContextBase`。`DbContextBase`是抽象的，它位于另一个程序集中。`UpdateDatabaseToLatestVersion`从每个 DbContext调用时，`var type = GetType();`返回继承的 DbContext 类型。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-18T14:58:35.463

当我试图在实体框架核心中解决这个问题时，我遇到了他的问题。发布我如何修复它，以防其他人也随机遇到这个问题试图解决这个问题。

这是有关如何在 EF Core 中解决此问题的解决方案。

我将此扩展方法添加到我的代码中

```
public static IApplicationBuilder MigrateDatabase(this IApplicationBuilder app, IServiceScopeFactory scopeFactory)
{
    using (var scope = scopeFactory.CreateScope())
    {
        var db = scope.ServiceProvider.GetRequiredService<ApplicationDbContext>();
        db.Database.EnsureCreated(); // this was my problem. If the database was missing, then the migrations were never applied.

        var migrations = db.Database.GetPendingMigrations();
        if (migrations.Any())
            db.Database.Migrate();
    }

    return app;
} 
```

我在 Startup.cs 中调用它

```
public void Configure(IApplicationBuilder app, IWebHostEnvironment env, IServiceScopeFactory scopeFactory)
{
    // other things here
    app.MigrateDatabase(scopeFactory);
} 
```

# pdf - 如何使用 TrimBox 数据裁剪 PDF

> ID：12353160
> 
> 赞同：3
> 
> 时间：2012-09-10T13:54:14.630
> 
> 标签：pdf, crop

我有一个很大的 PDF 文件，我使用的是 Adob​​e Acrobat X Pro。该文档直接来自发布者，因此定义了 TrimBox 和 BleedBox。问题是裁剪尺寸因页面而异。

是否可以在 Adob​​e Acrobat X Pro 中定义批处理操作，以便将所有页面自动裁剪为正确的大小（如每页的 TrimBox 设置所定义的那样）？我了解如何定义 CropBox，但如果我在整个文档（甚至是充满文档的文件夹）上使用这些设置，所有页面都将被裁剪为相同的固定尺寸（这不是我们需要的）。

我还发现了一个有用的问题，可以帮助我使用 ImageMagick 和 GhostScript（[链接](https://stackoverflow.com/questions/4712563/imagemagic-use-trimbox-doesnt-work-at-all)）解决这个问题，但我注意到这会导致一些数据丢失，使图像对于我的目的来说太“脏”。如果有办法用 ImageMagick 做到这一点而不会丢失数据，那也很好，但如果可能的话，我更喜欢使用 Adob​​e Acrobat X Pro 的批处理操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:32:17.180

您应该使用 -density 选项尝试 ImageMagick。所以像：

`convert -verbose -define pdf:use-trimbox=true -density 300x300 your_pdf.pdf output.format`

密度选项应确保它不会变得模糊，请参阅：[http ://www.imagemagick.org/script/command-line-options.php#density](http://www.imagemagick.org/script/command-line-options.php#density)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:34:47.663

在 AcrobatUsers.com 上找到答案：http: [//answers.acrobatusers.com/How-I-crop-PDF-TrimBox-data-q33436.aspx](http://answers.acrobatusers.com/How-I-crop-PDF-TrimBox-data-q33436.aspx)。Try67 给了我以下信息：

> 此脚本会将文档中每一页的裁剪框设置为与裁切框相同。您可以在 Action 中使用它以将其应用于多个文件：
> 
> ```
>  for (var p=0; p<this.numPages; p++)
>  {
>       this.setPageBoxes("Crop", p, p,
>       this.getPageBox("Trim", p));
>  } 
> ```

这有我需要的结果。

感谢用户 Joost 提醒我，我还没有关闭线程。

# java - 单线程池与每个任务一个线程池

> ID：12353162
> 
> 赞同：4
> 
> 时间：2012-09-10T13:54:19.340
> 
> 标签：java, multithreading, concurrency, runnable, threadpool

我想在 Java 中使用并发向在线 API 发出请求，下载并解析响应文档，并将结果数据加载到数据库中。

拥有一个线程池，每个线程在其中请求、解析和加载是标准的吗？换句话说，只有一个类实现了`Runnable`. 或者说，拥有三个不同的线程池是否更有效，第一个线程池发出请求并将它们推送到队列，第二个线程池从第一个队列轮询，解析并推送解析的数据到第二个队列，最后是第三个池从第二个队列轮询数据并加载到数据库中？在这种情况下，我将编写三个不同的类来实现`Runnable`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T14:14:18.297

您必须考虑处理的哪些部分将从并行性中受益。在线 API 通信很可能是候选者，因为会涉及到套接字和网络等待。数据库交互也是如此。如果有多个***可用***的CPU 内核，多线程解析可能只会提高性能。

将整个流程拆分为 3 个独立的类，肯定会增加凝聚力，意味着每个类的职责会减少，这是一件好事。另一方面，使这些类中的每一个都`Runnable`具有多个队列将增加应用程序的复杂性（可能是不必要的）。

我建议制作 3 个单独的课程，但不要制作它们`Runnable`。然后做一个`Runnable`那个`contains`和`orchestrates`3个类，也就是一个单线程池。如果您发现这似乎不够快（并且经过一些分析之后），请尝试将可运行对象拆分为 2 个线程池：一个下载和解析，以及一个数据库访问。

关键是，从简单开始，根据需要增加复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:54:48.697

要考虑的一件重要事情：*处理顺序是否重要*？即，*第一个下载请求的解析结果在**第二个*请求的结果*之前*加载到数据库中是否重要？

 *如果是这样，您确实需要队列（或类似的），每个任务一个。实际上，三个单线程线程“池”（或使用 ExecutorService）。

如果不是，@Brady 提出了很好的观点。与他不同的是，我可能会创建所有三个类`Runnable`，但这并不意味着您必须使用三个队列，您仍然可以尝试使用单个池和配置文件来查看它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:45:16.653

我不相信有一个标准的方法，这取决于你的要求。

如果你正在写一些又快又脏的东西，那么你最好有一个游泳池。

如果您正在寻找更具弹性的东西并且需要恢复，那么您可以选择多个池。例如。如果您坚持响应并且如果您的应用程序死了，那么当它重新启动时，您可以重新排队响应而无需再次获取它们。*

# java - 在 java 中处理目录和数据

> ID：12353169
> 
> 赞同：0
> 
> 时间：2012-09-10T13:54:37.407
> 
> 标签：java, libraries, directory

我希望为这个问题指出正确的方向。我有两个具有相同目录结构、子目录和相同名称的数据文件的数据集，这些数据文件在数据文件中具有不同的值。它们的区别在于每个目录的时间戳不同，数据文件中的值也不同。

我想要做的是同时在两个目录中选择两个 Data.txt 文件，然后处理它们并移动到其他子目录，直到每个时间戳目录完成。是否有任何图书馆可以帮助管理此过程，或者是否有人有任何可以提供帮助的想法？

时间戳 1

```
General Directory                              
      subdirectories                                  
               Data.txt 
```

时间戳 2

```
General Directory                              
      subdirectories                                  
               Data.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:56:37.593

我会使用 File.listFiles() 遍历每个目录并递归调用目录来处理子目录。您可以使用 File.lastModified() 获取文件的修改日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:08:39.773

您可以使用 Apache Commons IO [DirectoryWalker](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)，但我会选择`File.listFiles()`已经提到的，因为它很简单，可以递归目录树。

# javascript - 表单克隆唯一标识

> ID：12353171
> 
> 赞同：2
> 
> 时间：2012-09-10T13:54:42.413
> 
> 标签：javascript, jquery, forms, uniqueidentifier, cloning

我想克隆一个表单并且不修改该表单会影响原始表单。如何给表单的每个实例一个唯一的 ID，以便元素不重复？

```
$(document).ready(function() {
    // shows / hides results based on selection
    $(".categories-select").live("change", function() {
        if ($(this).val() == 'dinner') {
            $('.dinner').removeClass('hide');
            // toggles dinner results, sub menus
            $(this).parent('.controls').find('.restaurant-submenu-select').removeClass('hide');
        }
    });    

    // Duplicates category select menu 
    $(".add-activity").click(function() {
        $(".activity-category")
                       .clone()
                       .removeClass('activity-category')
                       .appendTo("#we-want-to")
                       .find('.restaurant-submenu-select')
                       .addClass('hide');
    });    

    $(".add-activity-alternate").click(function() {
        $(".activity-category-alternate")
                       .clone()
                       .removeClass('activity-category-alternate')
                       .appendTo("#we-want-to")
                       .find('.restaurant-submenu-select, .results-table')
                       .addClass('hide');
    });
}); 
```

​</p>

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:59:08.793

当您克隆时还添加一个动态 ID

```
var id = 0;

(function() {
    yourClone.attr('id', 'something-' + id);
    id++
}); 
```

* * *

在你的代码中是这样的：

```
$(document).ready(function() {

    var id = 0;

    // shows / hides results based on selection
    $(".categories-select").live("change", function() {
        if ($(this).val() == 'dinner') {
            $('.dinner').removeClass('hide');
            // toggles dinner results, sub menus
            $(this).parent('.controls').find('.restaurant-submenu-select').removeClass('hide');
        }
    });    

    // Duplicates category select menu 
    $(".add-activity").click(function() {
        $(".activity-category")
                       .clone()
                       .removeClass('activity-category')
                       .appendTo("#we-want-to")
                       .find('.restaurant-submenu-select')
                       .addClass('hide')
                       .attr('id', 'something' + id);
        id++
    });    

    $(".add-activity-alternate").click(function() {
        $(".activity-category-alternate")
                       .clone()
                       .removeClass('activity-category-alternate')
                       .appendTo("#we-want-to")
                       .find('.restaurant-submenu-select, .results-table')
                       .addClass('hide')
                       .attr('id', 'something' + id);
        id++
    });
}); 
```

# google-apps-script - 授权 Google Apps 脚本

> ID：12353172
> 
> 赞同：1
> 
> 时间：2012-09-10T13:54:44.317
> 
> 标签：google-apps-script, google-sites

在谷歌网站上集成谷歌应用脚​​本时，是否可以确保用户不会看到授权对话框？当网站只在内部公开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:50:25.297

如前所述，Apps Script 原生 Apps bean 主要支持两个用例：

*   以部署用户身份执行：终端用户无需授权，访问部署者的Apps资源
*   以终端用户身份执行：终端用户需要授权，因为访问终端用户的Apps资源

您描述的第三个用例由针对 Google Apps API 运行 的 Apps 脚本的[URLFetchApp支持。](https://developers.google.com/apps-script/class_urlfetchapp)

在许多情况下，Apps API 可以代表用户执行授权客户端（在本例中为 Apps 脚本）有权执行的操作，因此如果客户端获得了管理员凭据的授权，API 通常可以代表用户执行操作最终用户，而无需最终用户授权 Apps 脚本来执行此操作。

不幸的是，对于您的用例，Gmail Inbox API 似乎不是这些 API 之一。为了监控其他最终用户收件箱信息，[Gmail Audit API](https://developers.google.com/google-apps/email-audit/)可能会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:33:33.490

如果您将您的应用程序设置为以“用户访问应用程序”的身份执行，那么这是不可能的。但是，如果您将其设置为自己运行，则只有在对代码进行任何更改时才需要重新授权。不会要求最终用户授权

# javascript - JSRender 无法读取未定义的属性“描述”

> ID：12353177
> 
> 赞同：0
> 
> 时间：2012-09-10T13:55:04.643
> 
> 标签：javascript, templates, nested, jsrender

我在 jsFiddle 上有此代码：http: [//jsfiddle.net/Ue3VN/6/](http://jsfiddle.net/Ue3VN/6/)无法正常工作。

在我的机器上，它给出消息：错误：无法读取未定义的属性“描述”。

有谁知道我应该怎么做才能达到正确的结果？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:21:27.957

查看[http://jsfiddle.net/Ue3VN/10/](http://jsfiddle.net/Ue3VN/10/)

除了一些拼写错误之外，最新版本的 jsRedner 使用了稍微不同的语法：

```
{{if someCondition}}
{{:somevalue}}
{{>htmlEncodedValue}} 
```

在将 jsRender 值添加到属性中时，您也不需要转义引号。

# qt - Qt Creator 不建议非 Qt 容器内对象的成员方法

> ID：12353178
> 
> 赞同：0
> 
> 时间：2012-09-10T13:55:05.517
> 
> 标签：qt, qt-creator

在 Qt Creator 中，如果我有一个`QList<SomeClass*>`被调用`someList`的，我输入

```
someList[0]. 
```

它显示 SomeClass 的所有成员的列表，并转换“。” 进入“->”，这很棒。但是，如果我对 std::vector 做同样的事情，我不会得到任何建议或转换。我仍然可以自己输入代码，但它会起作用。

有什么方法可以让 Qt Creator 建议非 Qt 容器中的对象成员？

我正在使用 Qt Creator 2.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:34:16.477

Creator 实际上会解析 C++ 代码并忽略注释，因此 doxygen 不会在这里提供帮助；-) 它会解析项目中的所有文件以及包含的所有文件，并在必要时使用包含路径查找这些文件。

不，目前没有办法让 Creator 做到这一点。在模板方面，Creator 使用的代码模型有点受限，因此这些模板往往没有完成。QLists 也经常失败。

正在通过使用 clang 代码模型来解决这个问题，该模型比我们目前使用的更精确，但不幸的是，这也慢得多（这并不奇怪，因为创作者只会在需要太多时间的地方走捷径：- ）。目前这只是不可用，要获得代码完成和语法突出显示所需的初始解析需要太长时间。我们正在研究如何通过为我们的用例改进 clang 或缓存信息或其他方式来改进这一点。

也许我们最终会稍微修复一下我们现有的代码模型，或者使用我们的代码模型进行快速初始解析，然后再跟进 clang 以改进我们之前提取的数据。

# css - CSS 样式的社交媒体按钮未在特定帖子上排列

> ID：12353183
> 
> 赞同：1
> 
> 时间：2012-09-10T13:55:20.950
> 
> 标签：css, wordpress

我正在为 Wordpress 博客使用标准主题，并且在类似此处的“图像”帖子中：[http](http://www.justinmclachlan.com/topics/photos/) ://www.justinmclachlan.com/topics/photos/ ，底部的社交媒体按钮除了最后一个之外都排成一行一个，它是一个箭头，显示了更多的选择。

我已经搜索并搜索了 CSS，但我看不出它没有排队的原因。它适用于其他类型的帖子，只是由于某种原因不适用于图片帖子。

我确实更改了一些 CSS 以将按钮移动到右侧并取出边框，但这就是我所做的一切：

```
div.sharedaddy .sd-content {
    width:100%;
    float:none;
    margin:0;
}

div.sharedaddy div.sd-block {
    border:none;
    padding:12px 0 0;
} 
```

看不出这是如何搞砸的……任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:11:07.483

如果您将“无文本”类添加到“a”标签上，我认为可以为您解决问题。

# macos - 在 Mac 10.8 中找不到 packagemaker 命令行工具

> ID：12353186
> 
> 赞同：2
> 
> 时间：2012-09-10T13:55:32.960
> 
> 标签：macos, command-line, osx-mountain-lion, packagemaker

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:42:28.437

While the man pages haven't been updated (please file a radar on that) the **new** utilities are /usr/bin/pkgbuild and /usr/sbin/pkgutil.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T19:48:32.317

The `PackageMaker` command line tool is inside the app. Right click PackageMaker.app and choose `Show Package Contents`.

The full path to PackageMaker if you installed PackageMaker.app to Applications would be:

```
/Applications/PackageMaker.app/Contents/MacOS/PackageMaker 
```

# java - 如何将 Thread.currentThread() 与保存的 Thread 引用进行比较？==，等于，..？

> ID：12353193
> 
> 赞同：4
> 
> 时间：2012-09-10T13:56:07.973
> 
> 标签：java

我正在编写一个类，它将其他方法中的操作排队到 ConcurrentLinkedQueue 中，然后有一个 process() 方法，该方法只能从处理队列的创建线程调用。这是因为其他方法的操作可以从其他线程调用，但它们的实际操作只能在创建者线程上执行。这类似于 Android 的[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)，它必须用于在 UI 线程之外运行任何 UI 代码。

我对 process 方法的想法是首先断言创建者线程正在调用它，然后简单地运行队列中的每个事物。我不确定如何将当前线程与存储的线程引用进行比较；我找不到有关是否保证引用相同的文档。我应该使用该`equals`方法吗？我应该只使用`==`运营商吗？可以比较 Thread 对象，还是应该比较它们的名称或其他一些数据？

相关的代码将如下所示：（未显示队列逻辑）

```
public class MultiThreadTasker {
    private Thread creatorThread;

    public MultiThreadTasker() {
        creatorThread = Thread.currentThread();
    }

    public void process() {
        if(Thread.currentThread() != creatorThread) {
            throw new IllegalArgumentException("...");
        }
        // ...
    }

    // ...
} 
```

也欢迎就替代方法提出建议。似乎我正在重新发明一个 Executor，但我没有看到任何类型的 Executor 可以让您手动启动任务的运行而不是它处理自己的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:03:07.090

如果您只想在当前线程上执行任务，为什么它们要共享一个队列？我将对每个线程都有一个本地队列，只有该线程可以看到/使用。

这就是我会做的。

```
private static final ThreadLocal<Queue<Runnable>> QUEUE = new ThreadLocal<Queue<Runnable>>() {
    @Override
    protected Queue<Runnable> initialValue() {
        return new LinkedList<Runnable>(); 
    }
};

public static void runLater(Runnable runnable) {
    QUEUE.get().add(runnable);
}

public static void runAll() {
    for (Runnable runnable : QUEUE.get())
        runnable.run();
    QUEUE.get().clear();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:00:05.477

如果比较线程不起作用，您可以使用线程本地 UUID（[http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html、http://docs.oracle。 com/javase/1.5.0/docs/api/java/util/UUID.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html)）来比较调用者。您将在构造函数中填充线程本地字段。

# objective-c - 指向使 UIImageView 中的图像在单击时显示为全屏的指针

> ID：12353199
> 
> 赞同：0
> 
> 时间：2012-09-10T13:56:26.980
> 
> 标签：objective-c, uiimageview, fullscreen

我的应用程序中有一个 UIImageView。我想这样做，以便当您单击 UIImageView 时，照片会像您在照片应用程序中单击照片时一样全屏显示。我想知道的是苹果是否发布了一个 API 来做这件事——我见过像有线应用程序这样的应用程序，你点击一张照片，它就会全屏显示——这叫什么？所以我可以研究一下。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:29:32.460

我要做的是创建一个新`UIViewController`的，`UIImageView`它占据了整个视图。我将公开一个公共属性，允许我设置`UIImageView`.

然后让您的 UIImageView 响应`UIControlEventTouchUpInside`如下事件：`[imageView addTarget:self action:@selector(imagePressed:) forControlEvents:UIControlEventTouchUpInside];`

然后`imagePressed:`设置`UIViewController`'s image 属性，然后将新的推`UIViewController`送到导航控制器上。

# ios - 由 iOS 设备应用程序控制的伺服电机

> ID：12353203
> 
> 赞同：2
> 
> 时间：2012-09-10T13:56:37.547
> 
> 标签：ios, database, arduino

我正在尝试运行应该从 iPad 应用程序接收数据的伺服电机。假设这个伺服电机将用于商业用途，不能使用计算机运行程序。我必须使用预编程的处理器并使用普通电源。伺服电机必须由 iPad 设备无线控制。该应用程序可以直接将数据发送到电机或使用服务器。我想知道伺服电机从服务器或 iPad 读取数据的可能方式是什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:13:35.320

听起来您正在要求与我一直在从事的项目类似的事情。它在 Android 上，但至少应该为您要完成的工作提供一个框架。

## 基本沟通：

```
[Android/IPad] <---Wifi (UDP)---> [WIFI Reciever] <---Serial ---> [Arduino]--->[Servo] 
```

对于 Wifi 接收器，我目前使用的是 Linux 笔记本电脑。不过，我计划在不久的将来转移到 OpenWRT 接入点。

## 我的项目

*   [Power-Wheelino](http://code.google.com/p/power-wheelino/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:15:12.703

您的问题非常含糊，与相互矛盾的信息有些混淆。

“...app 可以直接向电机发送数据”和“...伺服电机从服务器或 iPad 读取数据？” 那么它是哪一个？从 iPad 或 iPad 读取的电机向电机发送信号？虽然许多部件都能够通过推送或拉取方法来获取数据，但这使得问题非常开放，并且实际上，组件可能难以可靠地连接到 iPad 并从 iPad 上提取信息。

无论哪种方式，所有可控机制都有一个定义和记录的沟通方式。如果没有确切的细节（甚至可能有它们），最好的信息是阅读伺服电机的文档或联系制造商。

# c# - 异常处理。抓到需要多长时间？

> ID：12353206
> 
> 赞同：5
> 
> 时间：2012-09-10T13:56:49.493
> 
> 标签：c#, exception, exception-handling

> **可能重复：**
> [.NET 异常有多慢？](https://stackoverflow.com/questions/161942/how-slow-are-net-exceptions)

抛出异常并立即捕获它是否有开销？这有区别吗

```
void DoSomething(object basic)
{
    try
    {
       if (basic == null)
         throw new NullReferenceException("Any message");
       else
       {
         //...
       }
    }
    catch (Exception error)
    {
       _logger.WriteLog(error);
    }
} 
```

还有这个（这里我们不抛出异常）：

```
void DoSomething(object basic)
{
    try
    {
        if (basic == null)
        {
            _logger.WriteLog(new NullReferenceException("Any message");
            return;
        }
        else
        {
         ...
        }
    }
    catch (Exception error)
    {
        _logger.WriteLog(error);
    }
} 
```

第二个片段会更快吗？

另外我想知道为什么一种解决方案比另一种更快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:08:28.863

异常比所有其他程序流慢，但由于性能原因，它们没有达到应避免的程度。但是，它们并不打算用于程序流。在您的情况下，您有一个非常有效的替代方法，它比使用异常更好。当您可以预测情况并无例外地适当处理时，请始终这样做。另外，为了方便起见，不要在正常程序流程中使用异常。

当您遇到无法直接处理的意外异常情况时，请使用异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:06:17.457

我收集到 Throw 的开销比 try/catch 多得多。我的意思是尝试/捕获几乎没有开销，但是一旦你真的必须捕获异常，就会有很小的开销。在许多程序中，您显示的两个选项都可以，但是如果您尝试真正分析您的代码，那么没有抛出它会更快。其他几个值得关注的问题：

[在 C# 下，try、throw 和 catch 块对性能的影响有多大](https://stackoverflow.com/questions/615955/under-c-sharp-how-much-of-a-performance-hit-is-a-try-throw-and-catch-block)

[C# 中 try/catch 的真正开销是什么？](https://stackoverflow.com/questions/52312/what-is-the-real-overhead-of-try-catch-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:33:23.970

在这种情况下，我认为第二种选择更快，但正如*@Samuel Neff*所说，异常非常慢。然而，当我阅读关于异常的*Jon Skeet*文章时，我发现了*Krzysztof Cwalina*的一篇有趣的文章：[设计指南更新：异常抛出。](http://blogs.msdn.com/b/kcwalina/archive/2005/03/16/396787.aspx)，这解释了我们什么时候应该和不应该使用异常。事实上阅读它我发现一个重要的观点说：

*1.2 例外与表现*：

> 与异常相关的一个常见问题是，如果将异常用于经常失败的代码，则实现的性能将是不可接受的。这是一个非常有道理的担忧。当成员抛出异常时，其性能可能会慢几个数量级。但是，在严格遵守不允许使用错误代码的异常准则的同时，可以获得良好的性能。本节中描述的两种模式建议了执行此操作的方法。
> 
> *   **不要**使用错误代码，因为担心异常可能会对性能产生负面影响。

# javascript - 禁用具有特定 Div ID 的输入的 Tab 键

> ID：12353207
> 
> 赞同：1
> 
> 时间：2012-09-10T13:56:50.180
> 
> 标签：javascript, html, key, input-field

我想禁用几个输入字段的 tab 键。但仅适用于**div id="two"**和**div id="five"**的那些。因此，当您按 Tab 键时，您会从字段***一***到***三***，到***四***，然后到***六***。

```
<form action="">
  <fieldset>
    <div id="one"><input type="text"/></div>
    <div id="two"><input type="text"/></div>
    <div id="three"><input type="text"/></div>
    <div id="four"><input type="text"/></div>
    <div id="five"><input type="text"/></div>
    <div id="six"><input type="text"/></div>
  </fieldset>
</form> 
```

任何人都知道可以做到这一点的Javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:00:12.647

见[http://jsfiddle.net/b9gsT/](http://jsfiddle.net/b9gsT/)

您可以使用`tabindex`属性：

```
<form action="">
  <fieldset>
    <div id="one"><input type="text"/></div>
    <div id="two"><input type="text" tabindex="-1"/></div>
    <div id="three"><input type="text"/></div>
    <div id="four"><input type="text"/></div>
    <div id="five"><input type="text" tabindex="-1"/></div>
    <div id="six"><input type="text"/></div>
  </fieldset>
</form> 
```

如果你想用 JavaScript 来做，请使用`.tabIndex`：

```
function getEl(id){
  return document.getElementById(id);
}
getEl('two').childNodes[0].tabIndex=getEl('five').childNodes[0].tabIndex=-1; 
```

在这里看到它：http: [//jsfiddle.net/b9gsT/1/](http://jsfiddle.net/b9gsT/1/)

请注意，该属性在 XHTML 中是小写的（在 HTML 中不区分大小写），但该属性是区分大小写的：它`.tabIndex`带有大写的“I”。在 Firefox 上，它也可以与小写的“i”一起使用，但在 Chrome 上却不行。

# c# - 与 SQL Server 中的 EXEC 函数相关的问题

> ID：12353213
> 
> 赞同：0
> 
> 时间：2012-09-10T13:57:00.727
> 
> 标签：c#, sql-server

我在 Varchar 变量中写了一些逻辑语句，如下所示：

```
declare @P1 as varchar(max)
   set @P1 = ' (select (Convert(float,(SELECT COUNT(*) FROM  AttendanceMaster AS innerAM WHERE
                                            (AttendanceTypeId IN (SELECT  TypeId FROM AttendanceTypeMaster AS innerATM WHERE 
                                            innerAM.ParshadId = '+@ParshadId+'
                                            and (AttendanceSubjectId ='+Convert(varchar(5),@ASubjectId)+' ))) and innerAM.Attendance=''P1'''+ @innerWhereCondition +'))/6))' 
```

现在我在 Exec 函数中执行了上面的@P1，如下所示

```
 exec(@P1) 
```

现在我想得到上面 @P1 语句的结果，该语句已经在 EXEC 函数中执行并希望存储在 int 变量中。我在用户定义的函数中编写了上面的两个语句，并希望从上面的两个语句中返回 int。

我怎样才能做到这一点？是否可以分配这样的结果？

```
Declare @result int

set @result = exec(@P1) 
```

它抛出一个错误说：`incorrect syntext near Exec`

如何在 SQL Server 的用户定义函数中从 Exec 函数返回结果？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:03:03.950

您不能`EXEC`在用户定义的函数中使用。你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T16:42:12.927

声明@a varchar(10)

声明@b int

设置@a='2 * 3';

执行（'选择' + @a）

声明@res int / *???* /;

声明@sql nvarchar(max);

设置@sql = N'SELECT @res = ' + @a;

exec sp_executesql @sql, N'@res int OUTPUT', @res = @res OUTPUT;

设置@b=@res

选择@b

# java - SwingWorker 线程中的 java.util.Timer 或 While 循环？

> ID：12353215
> 
> 赞同：1
> 
> 时间：2012-09-10T13:57:06.423
> 
> 标签：java, multithreading, timer, while-loop, swingworker

在我最近发布的另一个问题中，有人建议我在 SwingWorker 中使用 java.util.Timer 而不是 while 循环。SwingWorker 中的任务应该每 10 秒运行一次。

据我了解，java.util.Timer 创建了一个后台线程 (run()) 来执行任务。

如果我在 SwingWorker 线程中使用 java.util.Timer，在一个线程（SwingWorker）中创建另一个线程（Timer）不是效率低下吗？

请看看我下面的两个示例，让我知道哪个是正确的，或者如果这两个都不正确，我还应该使用什么（如果可能，请提供一个简短的示例代码）？谢谢

**示例 1 - 使用 java.util.Timer**

```
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.SwingWorker;

public class Example1 extends SwingWorker<Void, String> {

    @Override
    protected Void doInBackground() {

        int delay = 10000;//Delay for 10 seconds

        Timer timer = new Timer();

        timer.schedule(new TimerTask() {
            @Override
            public void run() {

                String database = "";

                //PARSE THE SQL DATABASE

                publish(database);//UPDATE THE GUI

            }
        }, delay);

        return null;
    }

    @Override
    protected void process(List<String> s) {
        //UPDATE THE GUI
    }
} 
```

**示例 2 - 使用 While 循环**

```
import java.util.List;
import javax.swing.SwingWorker;

public class Example2 extends SwingWorker<Void, String> {

    @Override
    protected Void doInBackground() {

        while (!this.isCancelled()) {

            String database = "";

            //PARSE THE SQL DATABASE

            publish(database);//UPDATE THE GUI

            try {
                synchronized (this) {
                    this.wait(10000);//Wait 10 seconds
                }
            } catch (Exception ex) {
            }

        }

        return null;
    }

    @Override
    protected void process(List<String> s) {
        //UPDATE THE GUI
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:01:58.850

如果唯一要做的`SwingWorker`就是启动一个计时器，那么它确实没用。只需从 UI 线程生成计时器并用于`SwingUtilities.InvokeLater`从计时器更新 GUI。

一个更好的选择是[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)。

# c# - 在 SignalR 中处理协商异常

> ID：12353216
> 
> 赞同：0
> 
> 时间：2012-09-10T13:57:14.390
> 
> 标签：c#, silverlight-4.0, signalr

我有一个 Silverlight 5 应用程序使用 SignalR 访问服务器。大多数情况下，这可以正常工作，但有时在调试中运行时，我会在协商过程中遇到错误。我在想这可能是因为我的本地 ISS 安装用完了连接。

无论如何，当这种情况发生时，我的应用程序中的未处理异常处理程序会被调用。我想更改它，以便我可以处理 SignalR 初始化的本地异常。我不希望协商错误传播到我的中央错误处理程序。

我有一段代码，如下所示：

```
 var uri = Application.Current.Host.Source.GetComponents(UriComponents.Scheme | UriComponents.HostAndPort, UriFormat.Unescaped);

     _hubConnection = new HubConnection(uri);
     var hub = _hubConnection.CreateProxy("stuffhub");
     hub.On<Stuff>("Stuff", message => DoStuff());

     var transport = new LongPollingTransport();
     _hubConnection.Start(transport); 
```

这段代码大部分时间都执行得很好，但有时在上面的代码执行几秒钟后，以下异常会被交给我的中央未处理的异常处理程序。

```
Message: Exception(s) occurred : .
[ Exception(s) occurred : .
[ Exception(s) occurred : .
[ Exception(s) occurred : .
[ System.InvalidOperationException: Server negotiation failed.
   vid SignalR.Client.Transports.HttpBasedTransport.<GetNegotiationResponse>b__0(IResponse     response)
   vid SignalR.TaskAsyncHelper.FromMethod[T1,TResult](Func`2 func, T1 arg) ]
 ]
 ] 
```

]

ApplicationUnhandledExceptionEventArgs 的 StackTrace 是：

```
 at System.Threading.Tasks.Task.Finalize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:57:38.700

正如 Jon Skeet 所说，您需要处理从 Start() 返回的任务的异常。

```
var uri = Application.Current.Host.Source.GetComponents(UriComponents.Scheme | UriComponents.HostAndPort, UriFormat.Unescaped);

 _hubConnection = new HubConnection(uri);
 var hub = _hubConnection.CreateProxy("stuffhub");
 hub.On<Stuff>("Stuff", message => DoStuff());

 _hubConnection.Start().ContinueWith(task => 
 {
     if(task.IsFaulted) {
         Debug.WriteLine("Error starting -" + task.Exception.GetBaseException());
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:39:46.907

我不清楚究竟是哪个任务引发了异常，但如果它是你控制的，你可以简单地添加一个延续：

```
task.ContinueWith(t => {
    // Depending on t.Status (cancelled or faulted) you could perform logging
    // or whatever... presumably nothing's watching for the task to complete,
    // otherwise *it* would see the exception...
}, TaskContinuationOptions.NotOnRanToCompletion); 
```

当然，如果您可以使用 .NET 4.5 和 C# 5，async/await*可能会对*您有所帮助——这取决于 SignalR 的功能。

# java - 截取屏幕截图并在电子邮件中发送的按钮

> ID：12353222
> 
> 赞同：-1
> 
> 时间：2012-09-10T13:57:26.670
> 
> 标签：java, php, javascript, html

我正在制作交货单；我希望当我按下一个按钮时，整个网站都会被捕获并发送到预定义的电子邮件地址。这可能吗？如果是这样，怎么做？

这是网站[http://finefoodandwine.nl/Restaurant-Veldhoven/bestelformulier.php](http://finefoodandwine.nl/Restaurant-Veldhoven/bestelformulier.php) 我还需要让按钮仅在填写所有名称和地址详细信息时出现，但这是以后关注的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:09:01.230

我希望你不想截图来查看订单。如果是这样，只需通过 php/mail 提交值。

制作屏幕截图并非不可能，但非常困难，请参阅[https://stackoverflow.com/a/6678156/425005](https://stackoverflow.com/a/6678156/425005)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:03:24.627

这是不可能的。

您需要处理用户已插入表单的数据并使用 PHP 将其发送出去。

您可以在 PHP 中使用邮件功能

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:00:52.013

不，这是不可能的。浏览器在沙箱中运行，并且（感谢上帝）无法访问（html5：访问非常有限）本地资源。

# .net - 当 Sql Server 中的数据发生变化时，有没有办法在 .NET 中得到通知？像一个事件？

> ID：12353225
> 
> 赞同：13
> 
> 时间：2012-09-10T13:57:29.740
> 
> 标签：.net, sql-server, azure

有没有办法将事件绑定到 Sql Server（特别是 Azure），以便当表中有新数据时，例如，我的 .NET 进程会收到通知？

我认为的另一个选项是 Sql Server`long polling`查询。也就是说，我执行了一个查询，但它不会返回任何东西，直到有东西要返回或达到超时。

为了更清楚地了解我的问题，我在不同的 Windows Azure 实例中有不同的线程等待通知。一旦有新的通知，他们必须立即采取行动。我不想让他们每 2 秒查询一次数据库或存储。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T14:28:30.700

不在 Azure 中。在盒子产品中，您有[Query Notifications](http://msdn.microsoft.com/en-us/library/ms188323%28v=sql.105%29)及其衍生产品（[`SqlNotificationRequest`](http://msdn.microsoft.com/en-us/library/system.data.sql.sqlnotificationrequest.aspx)和[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)）[`SqlCacheDependency`](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)，请参阅[神秘通知](http://rusanu.com/2006/06/17/the-mysterious-notification/)了解详细信息。您可以将它用作带有[LinqToCache](http://code.google.com/p/linqtocache/)的 LINQ 包装器。

但 Azure 不支持查询通知。[在 Azure 上，您的应用程序应在更新数据库时使用Azure Queues](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)进行通知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-13T06:21:14.037

您可以使用[SqlTableDependency](http://tabledependency.codeplex.com/)

SqlTableDependency 是一个通用 C# 组件，用于在指定数据库表的内容发生更改时接收通知。

.NET SqlDepenency 有什么区别？

基本上，主要区别在于 SqlTableDependency 发送包含插入、更改或删除记录的值的事件，以及在表上执行的 DML 操作（插入/删除/更新）：数据库表，他们只说有些东西发生了变化。

# c++ - 获取任何日期的 DST 信息

> ID：12353231
> 
> 赞同：1
> 
> 时间：2012-09-10T13:57:47.253
> 
> 标签：c++, dst

我写了一个函数，它提供任何日期的*夏令时信息*。但它仅适用于当地时区。

*   有没有办法让它通用？
*   它完全正确还是我没有想到任何陷阱？

对于*夏令时信息*，我的意思是：

*   夏令时已关闭
*   夏令时已开启
*   DST 从关闭变为开启
*   DST 从开到关

功能是：

```
enum DST { DST_OFF, DST_ON, DST_OFFTOON, DST_ONTOOFF };

DST getdstinfo(int year, int month, int day) {
    tm a = {};
    a.tm_isdst = -1;
    a.tm_mday = day;
    a.tm_mon  = month - 1;
    a.tm_year = year - 1900;
    tm b = a;
    a.tm_hour = 23;
    a.tm_min = 59;
    mktime(&a);
    mktime(&b);

    if      (a.tm_isdst  && b.tm_isdst)  return DST_ON;
    else if (!a.tm_isdst && !b.tm_isdst) return DST_OFF;
    else if (a.tm_isdst  && !b.tm_isdst) return DST_OFFTOON;
    else                                 return DST_ONTOOFF;
} 
```

如果我没有明确设置时区，这个函数似乎适用于我在 Windows (Visual Studio 2010) 上的测试用例。测试用例是：

```
#include <cstdlib>
#include <cstdio>
#include <ctime>

const char* WHAT[] = {
    "noDST", "DST", "switch noDST to DST", "switch DST to noDST"
};

int main() {
    const int DAY[][4] = {
        { 2012,  3, 24, DST_OFF },
        { 2012,  3, 25, DST_OFFTOON },
        { 2012,  3, 26, DST_ON },
        { 2012,  5, 22, DST_ON },
        { 2012, 10, 27, DST_ON },
        { 2012, 10, 28, DST_ONTOOFF },
        { 2012, 10, 29, DST_OFF },
        { 2013,  3, 30, DST_OFF },
        { 2013,  3, 31, DST_OFFTOON },
        { 2013,  4,  1, DST_ON },
        { 2013, 10, 26, DST_ON },
        { 2013, 10, 27, DST_ONTOOFF },
        { 2013, 10, 28, DST_OFF },
    };
    const int DAYSZ = sizeof(DAY) / sizeof (*DAY);

    //_putenv("TZ=Europe/Berlin");
    //_tzset();

    for (int i = 0; i < DAYSZ; i++) {
        printf("%04d.%02d.%02d (%-20s) = %s\n",
            DAY[i][0], DAY[i][1], DAY[i][2],
            WHAT[DAY[i][3]],
            WHAT[getdstinfo(DAY[i][0], DAY[i][1], DAY[i][2])]);
    }
    return 0;   
} 
```

结果是：

```
2012.03.24 (noDST               ) = noDST
2012.03.25 (switch noDST to DST ) = switch noDST to DST
2012.03.26 (DST                 ) = DST
2012.05.22 (DST                 ) = DST
2012.10.27 (DST                 ) = DST
2012.10.28 (switch DST to noDST ) = switch DST to noDST
2012.10.29 (noDST               ) = noDST
2013.03.30 (noDST               ) = noDST
2013.03.31 (switch noDST to DST ) = switch noDST to DST
2013.04.01 (DST                 ) = DST
2013.10.26 (DST                 ) = DST
2013.10.27 (switch DST to noDST ) = switch DST to noDST
2013.10.28 (noDST               ) = noDST 
```

但是如果我取消注释这些行`_putenv`并且`_tzset`我得到`DST`每个测试用例的结果（可能是因为我们现在有 DST）。

*   如何使其通用（使用`_putenv`and后的正确结果`_tzset`？
*   有没有我没有想到的陷阱？

# postgresql - （PostgreSql）根据给定的开始日期、结束日期和间隔计算时间段（以分钟为单位）

> ID：12353232
> 
> 赞同：4
> 
> 时间：2012-09-10T13:57:54.737
> 
> 标签：postgresql, datetime

我有一个查询，我需要在其中使用 TimeSlots（以分钟为单位）。

说输入是

```
Start Date : 01-08-2012 00:00:00,
End Date : 02-08-2012 00:00:00,
Interval : 5 Minutes 
```

输出应该是

```
2012-08-01 00:00:00.0
2012-08-01 00:05:00.0
2012-08-01 00:10:00.0
2012-08-01 00:15:00.0
.
. 
```

（请忽略日期格式，因为我已经找到了解决方法）没有可供参考的表格，我可以从中获取基本时间戳并执行 floor() 等。

我认为我们可以使用 PostgreSQL 库中的 now() 函数，但我找不到**“如何？”** 直到现在。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T14:35:58.363

好吧，这是我喜欢 Postgres 的原因之一：

```
SELECT generate_series(
   '01-08-2012 00:00:00'::timestamp, 
   '02-08-2012'::timestamp,
   '5 minutes'::interval);

  ┌─────────────────────┐
  │   generate_series   │
  ├─────────────────────┤
  │ 2012-01-08 00:00:00 │
  │ 2012-01-08 00:05:00 │
  │ 2012-01-08 00:10:00 │
  │ 2012-01-08 00:15:00 │
  │ 2012-01-08 00:20:00 │
  ... 
```

# regex - Perl：单个正则表达式中的多个后向正则表达式

> ID：12353233
> 
> 赞同：1
> 
> 时间：2012-09-10T13:57:59.693
> 
> 标签：regex, perl

我是 perl 和正则表达式的新手，所以正在`lookbehind`使用以下代码处理表达式：

```
my $string = "My hello 12 world 13";

say "$1 $2" if ($string =~ m!(?<=hello\s)(\d+)\s(?<=world\s)(\d+)!); 
```

现在，当我尝试运行上面的代码时，它什么也不打印，但如果我删除了一个后向 expr。它工作正常。

那么，在一个正则表达式中是否不可能有多个向后看，如果是，那么解决方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:09:28.637

您的正则表达式包含这部分：

```
(\d+)\s(?<=world\s) 
```

这读作：“捕获一系列数字。然后匹配一个空格字符。然后断言当前位置前面是字符串，`world`后面是空格。”

所以我们正在研究这个：

```
 \d+   \s
         world \s
My hello 12       world 13 
```

`world`并且`12`不匹配;-)

那么在这种情况下为什么不使用普通的正则表达式呢？

```
m/ hello \s (\d+) \s world \s (\d+) /x 
```

或者使用两个带有后视功能的正则表达式？

```
$string =~ m / (?<=hello\s) (\d+) /x;
my $x = $1;
$string =~ m / (?<=world\s) (\d+) /x;
my $y = $1; 
```

环视最适合作为一种思维训练练习，或者在搜索和替换操作中排除字符串的某些部分。假设我们想将`a owl`etc 更正为`an owl`. 我们可以这样做

```
s/ \b a \s+ ([aeiou]) /an $1/x; # ugly 
```

或向前看：

```
s/ \b a (?=\s*[aeiou])/an/x; # elegant 
```

使用普通模式匹配，模式通常可以在没有环顾的情况下表达。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:10:33.490

在一个表达式中可以有多个向后查看。

问题是：环顾断言与文本中的某些内容不匹配，因此您的文本中有一个“世界”，但您不匹配它

您只需检查第二个数字系列之前是否有“世界”==>这是不正确的，因此您的正则表达式失败。

你可以做

```
(?<=hello\s)(\d+)\s\w+\s(?<=world\s)(\d+) 
```

[在 Regexr 上](http://regexr.com?323p3)查看

[regular-expression.info](http://www.regular-expressions.info/lookaround.html)是关于正则表达式的一个很好的信息来源，也许他们对环视的解释可以帮助你理解。

# version-control - 修补代码的策略

> ID：12353238
> 
> 赞同：1
> 
> 时间：2012-09-10T13:58:46.770
> 
> 标签：version-control

我们遵循标准模式来促进从主干到分支的更改，再到生产版本的标记。当我们需要修补生产中的更改时，更改会影响分支，并从该分支创建一个新标签。目前，作者有责任确保更改也被拉到主干并进行测试。不幸的是，在修复当前生产问题、测试和部署的热潮中，有时作者未能将更改拉到主干，我们只有在下一次回归时才意识到这一点。我的一位同事建议，也许我们可以更改策略以首先在主干上测试所有更改，并且只有来自主干的更改才能提升到分支。

优点：

*   避免错过将更改拉到主干的策略解决方案

缺点：

*   在修复生产问题时，我想测试我对将要转移到生产的分支代码的即时修复，而不是可能已经移到更远的主干。对快进副本进行更改然后为分支代码修改补丁所浪费的时间似乎很尴尬。与此相对的可能是，主干移动方式与分支不同的情况*可能*并不多（如范式转变）。

在开源项目中通常如何处理这些事情？也随时指出任何其他优点或减轻缺点。

# javascript - 将 JQuery Handsontable 保存到服务器上的 excel 文件中

> ID：12353239
> 
> 赞同：0
> 
> 时间：2012-09-10T13:58:46.553
> 
> 标签：javascript, jquery, excel, handsontable

我正在寻找一种解决方案，您可以在其中将使用此 jquery 插件[http://handsontable.com/](http://handsontable.com/)输入的数据保存到服务器上的文件中。

简单地说，他们输入一些数据，单击保存按钮，文件将写入服务器上的指定文件夹。显然，第二部分是稍后打开文件并将其导入到 jquery 插件表中，但仍然在这里的第 1 步......真正的目标是让这些数据对插件之外的人可用。任何帮助或指示将不胜感激。我已经搜索了这个主题，但似乎找不到任何解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:41:57.297

您尝试做的事情当然是可能的，但是涉及许多步骤。

*   Handsontable 似乎有一个方法叫做`handsontable.getData()`.

您可以在 Load & Save 示例中看到，他们使用此方法从 handsontable 中“获取数据”并将其插入到 ajax 函数中。

*   使用 Ajax 函数将此数据传递给服务器端脚本。

一旦您满意可以获取数据，就需要将其传递给服务器端脚本以进行进一步处理。这可以使用 Ajax 和 POST 或 GET 变量来实现。对于这一步，您几乎可以复制他们示例的部分内容。否则 Jquery 有一个不错的 Ajax 函数，您可以使用它。

*   编写处理脚本，将数据格式化为 CSV 格式，并将其写入文件。

一旦您可以确认数据正在到达您的服务器端脚本，您需要将其编码为 CSV 格式。一些服务器端语言具有帮助您执行此操作的功能。获得正确格式的数据后，您可以将其写入文件。

请记住，这不会生成一个 .xls 文件，它会生成一个 .csv 文件，它与您得到的一样好，而且几乎不会大惊小怪，并且肯定会对插件之外的人有用。如果您想了解有关此类事情的更多信息，那么您应该看看使用 ajax 提交表单，因为这实际上是您所做的只是更复杂的事情。

# objective-c - Xcode - UIActivityIndi cator 消失得太快

> ID：12353240
> 
> 赞同：2
> 
> 时间：2012-09-10T13:58:49.980
> 
> 标签：objective-c, xcode, pdf, uiwebview, uiactivityindicatorview

我有一个 UIActivityIndi​​cator 应该循环直到加载 PDF 文件。

我不明白为什么，但在加载 PDF 之前指示器消失了。我无法理解 PDF 文件是否太大（1.4 MB）、我的应用程序是否冻结或我在代码中写错了什么

```
-(void)startTheProcess {

    act = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    //coordinate act
    [act setCenter:CGPointMake(320 / 2, 440 / 2)];
    self.act.hidden = FALSE;
    [self.view addSubview:act];
    [act startAnimating];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = TRUE;
    [NSThread detachNewThreadSelector:@selector(creaVista) toTarget:self withObject:nil];
}

- (void) creaVista{

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    NSURL *url = [NSURL URLWithString:@"http://www.something.com/file.pdf"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [pdfView loadRequest:request];
    [pdfView setScalesPageToFit:YES];
    [self performSelectorOnMainThread:@selector(processDone) withObject:nil waitUntilDone:NO];
    [pool release];
}
-(void)processDone {

    [act stopAnimating];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = FALSE;
} 
```

如果我调试它，我可以很容易地看到调试器快速进入`[act stopAnimating]`然后停止，但文件尚未加载：几秒钟后 PDF 出现。

你有什么提示吗？我是菜鸟，我认为我犯了一些愚蠢的错误......谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:36:26.267

听起来约书亚在评论中的想法是正确的。加载是异步的，将在加载实际完成之前返回。

如果您`pdfView`是 UIWebView，您可以使用该[`UIWebViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)方法`webViewDidFinishLoad:`了解 PDF 何时完成加载。如果你把你`[act stopAnimating]`的那里它应该工作。

您还希望将其放置在`webView:didFailLoadWithError:`有任何错误的情况下。

要设置委托，请`pdfView`执行以下操作：`[pdfView setDelegate:self];` 并确保您的控制器采用`UIWebViewDelegate`如下方式：
`@interface ClassName : ItsSuperclass < UIWebViewDelegate >`

# webkit - 强制contenteditable div在Webkit下失去焦点后停止接受输入

> ID：12353247
> 
> 赞同：8
> 
> 时间：2012-09-10T13:59:24.003
> 
> 标签：webkit, contenteditable

在 Chrome 和 Safari（可能还有其他基于 Webkit 的浏览器）中，即使在 div 失去焦点之后，仍然可以输入 contenteditable div。

我建立了一个简单的例子来说明这个问题：http: [//jsfiddle.net/yfcsU/3/](http://jsfiddle.net/yfcsU/3/)

该示例有两个元素：一个 div`contenteditable="true"`和一个链接，该链接将在 contenteditable div 被单击时触发模糊事件。

单击链接时，contenteditable div 失去焦点，但您仍然可以输入 div 并且任何按键都会导致它重新聚焦。

这种行为在 Firefox 中有所不同，它按预期工作：单击链接将导致 contenteditable div 停止接受输入。

在 Webkit 中，有没有办法强制 contenteditable div 在失去焦点后停止接受输入而不禁用 div 上的 contenteditable？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-12T15:01:48.653

标记为正确的答案实际上是正确的，但我会添加另一个可能更直接的解决方案。在 contentEditable div 上调用 blur() 后，您必须调用它：

```
window.getSelection().removeAllRanges(); 
```

在这里测试：http: [//jsfiddle.net/mareksuscak/oytdoxy8/](http://jsfiddle.net/mareksuscak/oytdoxy8/)

在我看来，它做了同样的工作，也解释了为什么它不能正常工作 - 通常选择范围在模糊时从输入元素中删除，但它不会以某种方式对 contentEditable div 执行，因此在输入任何字符/自由中断后它是再次聚焦。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T07:47:37.373

在为此苦苦挣扎了一段时间后，我本可以找到一种方法来强制 contenteditable 元素停止接受 Webkit 上的输入。

解决方案是创建一个临时的可编辑元素，将其添加到 DOM，聚焦，然后将其移除。这将导致页面上的任何其他 contenteditable 元素自行停用。

等效的 jQuery 代码是：

```
$('<div contenteditable="true"></div>').appendTo('body').focus().remove() 
```

我已经更新了原始示例以包含此技术的演示：http: [//jsfiddle.net/yfcsU/4/](http://jsfiddle.net/yfcsU/4/)

# android - 如何在 android 上为 Web 应用程序指定添加快捷方式到主屏幕图标？

> ID：12353248
> 
> 赞同：3
> 
> 时间：2012-09-10T13:59:23.317
> 
> 标签：android, html, web-applications, jquery-mobile, homescreen

我正在开发 html 5 应用程序，当我在 android 上创建主屏幕快捷方式时，它的应用程序图标获取默认书签图标或收藏图标 + 书签图标。如何为 android 指定应用程序图标，就像我们可以在 iPhone 中指定一样？

android是否有任何标签来指定应用程序图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:00:28.573

用这个：

```
<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"/> 
```

[想要更多信息？](https://stackoverflow.com/questions/1951381/configuring-android-web-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T08:57:56.263

看看这段代码。由元标记设置。

```
<!-- ***  Written in HTML5 *** -->

<!-- Button - dialog - slidedown - inline + mini w/ checkmark -->
<span><a href='#' data-rel='dialog' data-transition='slidedown' data-role='button' data-icon='check' data-inline='true' data-mini='true' data-theme='b'>TEXT</a></span>
<!-- Button (blue) - inline (not the full width) -->
<span><a href='#' data-role='button' data-inline='true' data-theme='b'>TEXT</a></span>
<!--  Start a Listview -->
<ul data-role='listview' data-theme='c'>
<!--  List element as pseudo BACK button -->
<li data-theme='a'><a href='#'>Back</a></li>
<!--  List element with COUNT present -->
<li>TEXT<span class='ui-li-count'>VALUEGOESHERE</span></li>
<!--  List DIVIDER -->
<li data-role='list-divider'>Inventory</li>
<!--  Disable AJAX processing on FORM -->
<form data-ajax='false' method='post' action='#' id='form_name' name='form_name'>
<!--  Fixed FOOTER with ACTIVE links for NAVigation -->
<div data-role='footer' data-position='fixed' data-id='fixed-footer'>
    <div data-role='navbar'>
        <ul>
            <li><a href='#' class='ui-btn-active ui-state-persist'>TEXT</a></li>
            <li><a href='#'>TEXT</a></li>
        </ul>
    </div>
</div><!-- /footer -->
<!--  List with SEARCH and custom keyword: Search -->
<ul data-role='listview' data-filter='true' data-filter-placeholder='Search' data-theme='c'>
<!--  List element with extra keywords for searching -->
<li data-filtertext='KEYWORDS'><a href='#'>TEXT</a></li>
<!--  Hidden LABEL for input -->
<label for='input_name' class='ui-hidden-accessible'>TEXT</label>
<!--   -->

<!-- Common Header Info for HTML5 Mobile Web App -->
<!doctype html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-us" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta NAME="robots" CONTENT="noindex, nofollow">
    <title>TEXT</title>
    <meta name="author" content="Mario Lurig - http://mariolurig.com/" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" /><!-- 129x129 -->
    <link rel="apple-touch-startup-image" href="/startup.png"><!-- 320x460 -->
</head> 

<!--  Input TYPEs for differing keyboards -->
<input type='date' name='date' id='date' value='2012-01-01' />
<input type='time' name='time' id='time' value='12:00:00' />
<input type='text' name='text' id='text' value='readonly' readonly /><!-- readonly can't be edited, MAYBE the same as disabled='disabled' -->
<input type='datetime-local' name='datetime-local' id='datetime-local' value='2012-01-01 12:00:00' />
<input type='url' name='url' id='url' placeholder='Enter URL' /><!-- placeholder automatically disappears when input begins or default value is present -->
<input type='email' name='email' id='email' autofocus /><!-- autofocus only added as an example; not required -->
<input type='tel' name='tel' id='tel' /> <!-- Keypad for integers only -->
<input type='number' name='number' id='number' /> <!-- numbers and symbols -->
<input type='range' name='range' id='range' min='0' max='50' /><!-- HTML5 slider, not as nice as jQueryMobile version --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T22:15:27.090

Update for September 2014

```
<link rel="shortcut icon" sizes="196x196" href="icon-196x196.png"> 
```

is initially what you need to allow Chrome for Android to have a "Add to home screen" option show up in the settings.

A starting template like

```
<!doctype html>
<html>
<head>
    <title>HTML5 app</title>
    <link rel="shortcut icon" sizes="128x128" href="./icns/1410745473_39412.ico">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>
    <h1>Adventures in HTML5 android apps</h1>
</body>
<script type="text/javascript">
    navigator.standalone = navigator.standalone || (screen.height-document.documentElement.clientHeight<40)

    alert(navigator.standalone == true);
    alert(screen.height-document.documentElement.clientHeight)
</script>
</html> 
```

Works with the latest Chrome for Android app ( version 35 ).

Add [https://stackoverflow.com/users/67606/pablo-santa-cruz](https://stackoverflow.com/users/67606/pablo-santa-cruz)'s answer and that should be iOS compatible as well ( I no longer own any iOS devices so I am not 100% sure ).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:40:58.843

使用 javascriptbridge

1.  声明你的 javascriptbridge

    ```
    private class JavaScriptBridge {

      private Context mContext;

      public JavaScriptBridge(Context context) {
        mContext = context;
      }

      public void launchHome() {
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.addCategory(Intent.CATEGORY_DEFAULT);
        mContext.startActivity(intent);

      }
    } 
    ```

2.  在 webview 实例中添加该桥的引用

    ```
    mWebView.addJavascriptInterface(new JavaScriptBridge(theContext), "MyAndroidBridge"); 
    ```

3.  html 方式来访问该按钮

    ```
    <html>
      <head>
        <script type="text/javascript">
          function launchHome() {
            if (typeof MyAndroidBridge === 'undefined') {
              alert('bridge not declared');
            } else {
             MyAndroidBridge.lauchHome();
            }
          }
        </script>
      </head>
      <body>
        <a href="javascript:launchHome();">Launch Home</a>
      </body>
    </html> 
    ```

# java - 复制字符串，直到在 Java 中找到字符

> ID：12353252
> 
> 赞同：4
> 
> 时间：2012-09-10T13:59:30.610
> 
> 标签：java, string, truncate

你好我在徘徊如何在Java中复制一段字符串，直到找到一个字符/符号。在我的情况下，原始字符串是：`"hello.1234"`并且我只想要`"hello"`，以便`.`丢弃符号之后的所有内容。

任何的想法？非常感谢

**编辑：**

解决如下：

```
String partBeforeFullStop = input.split("\\.")[0]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-10T14:01:06.873

使用[`String#indexOf(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)和[`String#substring(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)。

```
String input = "hello.1234";
String output = input.substring(0, input.indexOf('.')); 
```

# java - 迭代构造函数内存混乱

> ID：12353256
> 
> 赞同：1
> 
> 时间：2012-09-10T13:59:38.320
> 
> 标签：java, recursion, memory, stack-overflow, heap-memory

我来写以下代码：

```
public class foo {

    static int iterationCounter = 0;

    public foo() {
        iterationCounter++;
        System.out.println(iterationCounter);
        new foo();

    }

    public static void main(String[] args) {
        new foo();

    }

} 
```

在生成 StackOverflow 异常之前，最后一个由该值组成的日志`iterationCounter`是：`11472`，因此 Java 留出`x`一定量的内存来创建`11472`foo 对象。

然而，以下代码输出的日志与其他程序不同：

```
public class foo {

    static int iterationCounter = 0;
    foo fooObject;

    public foo() {
        iterationCounter++;
        System.out.println(iterationCounter);
        this.fooObject = new foo();

    }

    public static void main(String[] args) {
        new foo();

    }

} 
```

这是我对内存管理的困惑。我以为 的值`iterationCounter`会与其他程序的值相同，但这次的值是`9706`。由于`fooObject`是一个公共变量（一个字段），它应该存储在堆内存中（不是这样吗？）而不是堆栈内存。如果是这种情况，它不应该占用堆栈空间（或者正在将所有新创建的 fooObjects 及其所有属性存储在堆栈中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:16:19.180

第一个版本生成以下代码（的输出`javap -c ...`）：

```
 ...                                     
   18:  invokevirtual   #4; //Method java/io/PrintStream.println:(I)V            
   21:  new     #5; //class Test                                                 
   24:  dup                                                                      
   25:  invokespecial   #6; //Method "<init>":()V                                
   28:  pop                                                                      
   29:  return 
```

第二个 - 以下：

```
 ...                                       
   18:  invokevirtual   #4; //Method java/io/PrintStream.println:(I)V                 
   21:  aload_0                                                                       
   22:  new     #5; //class Test                                                      
   25:  dup                                                                           
   26:  invokespecial   #6; //Method "<init>":()V                                     
   29:  putfield        #7; //Field test:LTest;                                       
   32:  return 
```

如您所见，递归调用之前这些列表之间的唯一区别在于`aload_0`第二个列表的第 21 行。

该操作将一个局部变量`0`（它的`this`）的值加载到堆栈上，以便稍后可以将其用作[`putfield`](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.putfield)操作的对象引用。

因此，您观察到的差异是由于堆栈上每次调用存在一个额外条目 -`this`用于将值写入字段的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:14:31.783

> 因此 Java 留出 x 量的内存来创建 11472 个 foo 对象。

对象是在堆上分配的，你不会用完的。您将收到 OutOfMemoryError。

您将用完的是带有 StackOverflowError 的堆栈。由于您没有局部变量，因此您在堆栈上使用的所有内容都是保存需要返回的状态，因此您的深度相对较高。

> 我以为iterationCounter的值会和其他程序一样，但这次的值是9706

您很可能有效地拥有

```
foo $local_variable$ = new foo();
this.fooObject = $local_variable$ 
```

这意味着每次递归都会使用更多的堆栈（又一个引用）

# c++ - 将原始类型的数据成员作为常量引用返回？

> ID：12353257
> 
> 赞同：0
> 
> 时间：2012-09-10T13:59:38.997
> 
> 标签：c++

示例：我有一个名为 Class 的类，它有一个数据成员**std::string m_name**和**int m_value**。

为了避免不必要的副本，我这样做了。

```
const std::string& Class::name() const; 
```

为了使函数保持一致，对原始类型也可以接受吗？

```
const int& Class::value() const; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:10:35.550

对于您的 API 的用户来说，这没有任何区别。他的代码看起来像

```
Class c;
c.value(1940);
int x = c.value(); 
```

不管你怎么写。

如果您返回参考资料（您可能想要也可能不想要），他可能会做的一件事是

```
const int &x = c.value();
int &k = const_cast<int &>(x);
k++; // will change the internals of your object 
```

这是你的选择。

# android - 更新库后的 Http 响应问题

> ID：12353259
> 
> 赞同：0
> 
> 时间：2012-09-10T13:59:46.407
> 
> 标签：android, httpresponse, google-api-java-client

在我更新到最新的谷歌客户端 API 后，以下代码抛出错误

```
 catch (IOException e) {
                if (e instanceof HttpResponseException) {
                    HttpResponse response = ((HttpResponseException) e)
                            .getResponse();//The error is here
                    int statusCode = response.getStatusCode(); 
```

在 getResponse 它抛出一个错误`The method getResponse() is undefined for the type HttpResponseException` ，我尝试回滚到以前版本的 api 但徒劳无功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:37:50.527

这个方法[在 1.10 版](http://javadoc.google-http-java-client.googlecode.com/hg/1.9.0-beta/index.html)的[Google HTTP Client Library](https://code.google.com/p/google-http-java-client/)中被移除了。

异常现在有自己的[`getStatusCode()`](http://javadoc.google-http-java-client.googlecode.com/hg/1.11.0-beta/com/google/api/client/http/HttpResponseException.html#getStatusCode%28%29)方法。

# data-structures - B-Tree 增强 - order(k) 函数以排序顺序显示键排名

> ID：12353262
> 
> 赞同：3
> 
> 时间：2012-09-10T13:59:48.723
> 
> 标签：data-structures

我在数据结构作业中遇到了一个问题，我和我的任何同事都无法弄清楚，我们甚至不知道从哪里开始！

问题表明我们应该建议对 B-Tree 进行增强；函数 order(k) - 其中 k 是 B-Tree 中的一个键 - 它将在 O(log n) 中显示该键在 B-Tree 中所有键的排序顺序中的位置。我们还需要证明“增强”不会影响 B-Tree 的常规抽象函数的复杂性。我们可以使用 O(n) 额外空间，其中 n 是 B-Tree 中的键数。

进一步解释：以具有键 ABCDEFGHIJKLM N 的 B-Tree 为例。

*   order(A) 结果应为“1”。
*   order(N) 结果应为“14”。
*   order(I) 结果应为“9”。

到目前为止我发现了什么：

1.  鉴于我们被允许使用 O(n) 额外空间，并且 B-Tree 常规空间是 O(n)，我们应该 - 可能 - 使用额外的 B-Tree 来提供帮助。

2.  他们提到我们应该证明增强不会影响常规 B-Tree 函数的复杂性的事实，在某些时候我们必须以某种方式操作常规抽象 B-Tree 函数，而不影响它们的常规复杂性。

3.  我们必须在 O(log n) 中 order(k) 的事实表明我们应该以基于高度的方式遍历 B-Tree，而不是逐个节点。

4.  在某个地方，可能我们必须检查给定的 k in order(k) 是否确实存在于 B-Tree 中，我建议使用 B-Tree 的常规抽象搜索功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:19:35.740

在每个键上，您应该存储额外的数据来记录该节点下有多少键（包括节点本身）。

为了保持这一点，insert(k) 函数将不得不遍历新键 k 的所有祖先，并增加它们的值。这将使插入 O(log n) + O(log n)，仍然是 O(log n)，因此不会影响复杂性。delete(k) 必须做同样的事情，除了减少值。平衡操作也必须考虑到这一点。

然后，order(k) 将沿着树向下移动到 k：每次它移动到一个节点时，它应该将左侧有多少键的计数加到总数中，并返回这个总和。

**编辑：**我改变了节点和键之间“节点”的歧义，因为它们在 B 树中是不同的（一个节点可以包含多个键）。然而，该算法应该推广到大多数树数据结构。

这是B树的算法：

```
#In python-ish (untested psuedocode)
#root is the root of the tree
#Each node is expected to have an array named "keys",
# which contains the keys in the node.
#Each node is expected to have an array named "child_nodes",
# which contains the children of the node, if the node has children.
#If a node has children, this should be true: len(child_nodes) == len(keys) + 1

def inorder(q):
  order_count = 0
  current_node = root

  while True:
    #if q is after all keys in the node, then we will go to the last child node
    next_child_node_i = len(current_node.keys)

    #now see if q is in between any of the nodes
    #for each key-index in the keys array (ie. if the node contains 3 keys,
    # keyi will be in range [0-2] .)
    for keyi in range(len(current_node.keys)):
      #retrieve the value of the key, so we can do comparison
      current_key = current_node.keys[keyi]

      if current_key < q:
        #We are trying to find which child node to go down to next,
        # for now we will choose the child directly to the left of this key,
        #But we continue to look through the rest of the keys, to find which
        # two keys q lies in between.

        #before we continue, we should count this key in the order too:

        #if this is not a leaf node,
        if len(current_node.children) != 0:
          #retrieve the the recorded child count of the sub-tree
          order_count += current_node.children[keyi].recorded_descendant_key_count

        #add one for the key in this node that we are skipping.
        order_count += 1

        continue

      if q < current_key:
        #We found a key in the current node that is greater than q.
        #Thus we continue to the next level between this and the previous key.
        next_child_node_i = keyi
        break

      #we finally found q,
      if q == current_key:
        #now we just return the count
        return order_count

    #once we are here, we know which keys q lies between
    # (or if it belongs at the beginning or end), and thus which child to travel down to.

    #If this is a leaf node (it has no children),
    # then q was not found.
    if len(current_node.child_nodes) == 0:
      #Possible behaviors: throw exception, or just return the place in the order
      # where q *would* go, like so:
      return order

    #Travel down a level
    current_node = current_node.child_nodes[next_child_node_i] 
```

# memory - 使用 Powershell 检查很多文件夹

> ID：12353266
> 
> 赞同：1
> 
> 时间：2012-09-10T14:00:00.083
> 
> 标签：memory, powershell, foreach, internal, subdirectory

我的问题是 Powershell。我有一个很大的文件夹。Insider 大约有 1 600 000 个子文件夹。我的任务是删除它们下面所有超过 6 个月的空文件夹或文件。我用 foreach 写了一个循环，但是在 powershell 开始之前需要很长时间->

...

```
foreach ($item in Get-ChildItem -Path $rootPath -recurse -force | Where-Object -FilterScript { $_.LastWriteTime -lt $date })
{
# here comes a script which will erase the file when its older than 6 months
# here comes a script which will erase the folder if it's a folder AND does not have child items of its own 
```

...

问题：我的内存已满（4GB），我不能正常工作了。我的猜测：powershell 加载所有 1 600 000 个文件夹，然后才开始过滤它们。

有没有可能阻止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:23:23.760

你是对的，所有 160 万个文件夹，或者至少是对它们的引用，都是一次加载的。最佳做法是向左过滤并向右格式化；IOW，如果可能的话，在您点击之前删除这些文件夹`Where-Object`（不幸的是，`gci`不支持日期过滤器 AFAICT）。此外，如果您将事情保留在管道中，您将使用更少的内存。

以下将仅限`$items`于那些符合您的条件的文件夹，然后对这些对象执行循环。

```
$items = Get-ChildItem -path $rootpath -recurse -force | ?{ $_.LastWriteTime -lt $date }
foreach ($item in $items) {
# here comes a script which will erase the file when its older than 6 months
# here comes a script which will erase the folder if it's a folder AND does not have child items of its own
} 
```

或进一步精简：

```
function runScripts {
    # here comes a script which will erase the file when its older than 6 months. Pass $input into that script. $input will be a folder.
    # here comes a script which will erase the folder if it's a folder AND does not have child items of its own Pass $input into that script. $input will be a folder.
}
Get-ChildItem -path $rootpath -recurse -force | ?{ $_.LastWriteTime -lt $date }|runScripts 
```

在最后一种情况下，您使用`runScripts`的函数将流水线对象用作可以在 ( `$input`) 上操作的参数，因此您可以通过管道发送所有内容，而不是使用那些中间对象（这将消耗更多内存）。

# android - 使用 uri 和 cursor 读取指定位置的图像

> ID：12353269
> 
> 赞同：0
> 
> 时间：2012-09-10T14:00:05.617
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试使用光标从我这里读取 URI 中指定的文件。但我无法弄清楚错误似乎不是从我指示的路径中读取的

这是代码：

```
 public static Uri getRandomImage(ContentResolver resolver) {

    String[] projection = new String[] {
        BaseColumns._ID,

    };

    Uri uri = Media.getContentUri("/sdcard/DCIM/Wallpaper/");

    String[] selectionArgs = null; // there is no ? in selection so null here

    String sortOrder = null; // unordered
    Cursor cursor = resolver.query(uri, projection, null, selectionArgs, sortOrder);

    if (cursor == null || cursor.getCount() <= 0) {
            return null;
    }

    cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

    return Uri.withAppendedPath(uri, cursor.getString(0));
} 
```

这是出现新错误的代码：

```
ParcelFileDescriptor pfd;

    try {
        pfd = context.getContentResolver().openFileDescriptor(uri, "r"); //line with error
    } catch(FileNotFoundException fnfe) {
        Log.e(LOG_TAG, Log.getStackTraceString(fnfe));
        return null;
    } 
```

这是日志猫：

```
E/it.bisemanuDEV.slidepuzzle.TileView(11188): java.io.FileNotFoundException: No content provider: 
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:464)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.content.ContentResolver.openFileDescriptor(ContentResolver.java:380)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at it.bisemanuDEV.slidepuzzle.TileView.getImageFromUri(TileView.java:560)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at it.bisemanuDEV.slidepuzzle.TileView.onDraw(TileView.java:239)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6741)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.draw(ViewRoot.java:1407)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.os.Handler.dispatchMessage(Handler.java:99)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.os.Looper.loop(Looper.java:123)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.app.ActivityThread.main(ActivityThread.java:4627)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at java.lang.reflect.Method.invokeNative(Native Method)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at java.lang.reflect.Method.invoke(Method.java:521)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at dalvik.system.NativeStart.main(Native Method) 
```

# java - 如何在java中构建缓冲区以合并图像

> ID：12353271
> 
> 赞同：0
> 
> 时间：2012-09-10T14:00:07.950
> 
> 标签：java, user-interface

那里。我正在使用 Java 构建一个需要经常重绘的桌面程序。就像下面这样：

```
class myWindow extends JWindow {
    Image[] layers = new Image[8]  // Some png Image object filled here

    @Override
    public void paint(Graphics g) {
        int i;

        super.paint();
        for (i=0;i<=7;i++)
            g.paintImage(layers[i], /*other param*/);
    }
 } 
```

正如我们所见，绘制需要时间，所以我想为一些`layer`. 它应该是一个 Image 或 Graphics 对象。
但后来我发现我无法采取任何方法来**合并`Image`**（只需将它们放在另一个上）。
所以我的问题是：**我怎样才能像上面提到的那样建立一个缓冲区**，或者如果我用它`paintImage()`来绘制一个替代方案`Graphics`，**我怎样才能用它`Graphics`来绘制我的窗口**
谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:14:17.197

这是合并 Image 数组的一种方法。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.image.BufferedImage;

import javax.swing.JPanel;

class MyPanel extends JPanel {

    BufferedImage image;

    public MyPanel(Image[] layers) {
        this.image = createBufferedImage(layers);
    }

    protected BufferedImage createBufferedImage(Image[] layers) {
        Dimension maxSize = new Dimension();
        for (int i = 0; i < layers.length; i++) {
            Dimension d = new Dimension(layers[i].getWidth(this), 
                    layers[i].getHeight(this));
            maxSize = max(maxSize, d);
        }
        image = new BufferedImage(maxSize.width, maxSize.height, 
                BufferedImage.TYPE_INT_ARGB);
        Graphics g = image.getGraphics();
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, image.getWidth(), image.getHeight());

        for (int i = 0; i < layers.length; i++) {
            g.drawImage(layers[i], 0, 0, this);
        }
        g.dispose();
        return image;
    }

    protected Dimension max(Dimension a, Dimension b) {
        Dimension d = new Dimension();
        d.width = Math.max(a.width,  b.width);
        d.height = Math.max(a.height, b.height);
        return d;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, this);
    }
 } 
```

# java - 如何在Java中做与StringBuilder append相反的事情？

> ID：12353273
> 
> 赞同：3
> 
> 时间：2012-09-10T14:00:09.900
> 
> 标签：java

什么是相反的：

```
savedPlanets.append(planet.getDisplayName()+","); 
```

我有一个列表，每次用户单击复选框时我都会添加行星的名称，如果清除该复选框，我想从 savedPlanets 中删除名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:06:10.943

您可以执行以下操作：

```
 savedPlanets.replace(planet.getDisplayName(),""); 
```

理想情况下，我会做如下解决方案：

```
Set<String> selectedPlanets = new HashSet<String>();

selectedPlanets.add(planet.getDisplayName());        // Whenever a planet is selected
selectedPlanets.remove(planet.getDisplayName());     // Whenever a planet is removed 

// Prepare a String with all planets        
StringBuilder savedPlanets = new StringBuilder("");
for(String planetName : selectedPlanets ){
    savedPlanets.append(planetName).append(",");
}
// Removing , from the end if any       
if(savedPlanets.toString().endsWith(","))
    finalValue = savedPlanets.substring(0, savedPlanets.length()-1);

// finalValue is what you are looking for 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:07:53.487

我每次都会重建字符串，只包含你想要包含的元素。

例如

```
Set<Planet> planets = ...
StringBuilder sb = new StringBuilder();
String sep = "";
for(Planet planet: planets) {
   sb.append(sep).append(planet.getDisplayName());
   sep = ",";
}
String planetNames = sb.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:05:47.933

我认为您正在使用 StringBuffer 或类似的东西。在这种情况下，这不是一个好的解决方案，我建议您使用 Set。[http://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

像这样实现它：

```
Set planets = new HashSet();
planets.add("a");
planets.add("b");
planets.remove("a"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:08:27.390

假设... **StringBuffer savedPlanets...**

**附加：** `savedPlanets.append(planet.getDisplayName()+",");`

**附录的对面：** `savedPlanets.replaceAll(planet.getDisplayName()+",","");`

**前任：**

```
savedPlanets.append("Earth,");
savedPlanets.append("Mercury,");
savedPlanets.append("Venus,"); 
```

现在**保存的Planetes =“地球，水星，金星，”;**

然后

```
savedPlanets.replaceAll("Venus,",""); <----- 
```

现在值将被**保存Planetes= "Earth,Mercury,";**

# objective-c - UITextView：输入退格键时字符数不正确

> ID：12353277
> 
> 赞同：1
> 
> 时间：2012-09-10T14:00:17.530
> 
> 标签：objective-c, ios, uitextviewdelegate

我想在输入 UITextView 时显示字符数。但是当我按下删除/退格键时我很困惑。

我用：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

我的代码是：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    NSLog(@"input %d chars",textView.text.length + 1);
    return YES;
} 
```

当我输入 hello 时，它显示“输入 5 个字符”；但是如果我单击删除/退格键，数字变为 6，而不是 4。这是怎么回事？输入时如何知道 UITextView 中的确切字符数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:03:26.513

您可以在编辑后获取文本字段中的文本，然后检查其长度：

```
NSString* newString = [textField1.text stringByReplacingCharactersInRange:range withString:string];
int newLength = [newString length]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:03:55.773

这很明显:)

您正在输出长度+1

```
textView.text.length + 1 
```

但是退格键不会使长度 1 变长，而是使它变短 1！

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text

    // Do the replacement
    NSString *newText = [textView.text stringByReplacingCharactersInRange:range withString:text];

   // See what comes out
    NSLog(@"input %d chars", newText.length);

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T16:05:17.080

文本视图在实际更改其文本`textView:shouldChangeTextInRange:replacementText:` **之前发送。**

它在更改其文本`textViewDidChange:` **后发送。**

所以只需实现`textViewDidChange:`：

```
- (void)textViewDidChange:(UITextView *)textView {
    NSLog(@"textView.text.length = %u", textView.text.length);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:03:27.000

检查替换文本参数的长度，在退格的情况下将为零。

还有另一种情况需要考虑，用户选择一系列字符并将文本粘贴到字段中。在这种情况下，您还应该减去替换文本的长度。

```
NSLog(@"New length is: %d chars",textView.text.length - range.length + text.length); 
```

# java - axis2和json的单元素数组问题

> ID：12353279
> 
> 赞同：3
> 
> 时间：2012-09-10T14:00:27.427
> 
> 标签：java, ios, json, axis2

我们有 iphone 应用程序，它通过axis2 webservice 与后端数据服务器通信。通常这意味着带有 JSON 的 RESTful API。我们遇到了一个问题，我们正在处理以 JSON 形式呈现的现有 Web API。问题是在某些情况下数组被错误地序列化。具体来说，我们已经看到：

```
When an array has more than 1 entry, it is serialized correctly
When the array has only 1 entry, it is serialized not as an array, but as a single dictionary. 
```

那么如何从服务器端（java）控制这个？

# sql - 合并前五个字符相同的 2 个表

> ID：12353281
> 
> 赞同：3
> 
> 时间：2012-09-10T14:00:29.147
> 
> 标签：sql, oracle11g

我想合并两个表，条件是即使单词不完全相同，至少前 8 个字符应该相同但不能这样做。我的表包含客户的名字，名字是名字，然后是姓氏，然后是中间名。

在第二个表中，其中许多没有中间名，因此我无法合并大部分记录。这是我正在处理的代码：

```
SELECT
UPPER(REGEXP_REPLACE(A.NAME, '\s*', ''))
FROM
TABLE1 A,
TABLE2 B
WHERE
UPPER(REGEXP_REPLACE(A.NAME, '\s*', '')) = UPPER(REGEXP_REPLACE(B.NAME, '\s*', ''))
AND
ORDER BY A.NAME; 
```

编辑：（来自评论）

我想匹配`RAVI YADAV KUMAR`和`RAVI YADAV K`其他类似的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:20:15.250

这个查询怎么样：

```
SELECT A.name,B.name
FROM tableA A, tableB B
   WHERE UPPER(SUBSTR(A.name, 0, 8)) = UPPER(SUBSTR(B.name, 0, 8))
ORDER BY A.name, B.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:13:12.517

```
SELECT A.NAME,B.NAME
FROM TABLE1 A, TABLE2 B
WHERE UPPER(SUBSTR(A.NAME, 1, 8)) = UPPER(SUBSTR(B.NAME, 1, 8))
ORDER BY A.NAME,B.NAME; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:14:56.447

如果我理解正确，您可以`LEFT`使用

```
SELECT A.name,B.name
FROM tableA A INNER JOIN tableB B
       ON LEFT(A.name, 8) = LEFT(B.name, 8)
ORDER BY A.name, B.name 
```

问题，每列的值是否有8个字符及以上？

# jquery - 具有单独的单击和长按键功能

> ID：12353283
> 
> 赞同：1
> 
> 时间：2012-09-10T14:00:29.813
> 
> 标签：jquery, mouseevent

我有一个按钮，我想根据用户是单击按钮一次还是长按按钮来调用不同的功能。

单击可以正常工作，但是如果我长按按钮，则会执行长按功能，然后执行单击功能。

这是我正在使用的代码。

```
var timeout, clicker = $('#clicker');
var count = 0;

clicker.mousedown(function(){
timeout = setInterval(function(){
    clicker.text(count++);
}, 500);

return false;
});

$(document).mouseup(function(){
clearInterval(timeout);
return false;
});

clicker.click(function(){
$(this).css('background', 'red');
return false;
}); 
```

​</p>

看到这个小提琴：http: [//jsfiddle.net/8FmRd/181/](http://jsfiddle.net/8FmRd/181/)

在第一次长按时，div 的颜色不应变为红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:09:42.790

[http://jsfiddle.net/8FmRd/189/](http://jsfiddle.net/8FmRd/189/)

```
var timeout, clicker = $('#clicker');
var count = 0;

clicker.mousedown(function(){
    count = 0;
    timeout = setInterval(function(){
        clicker.text(count++);
    }, 500);

    return false;
});

$(document).mouseup(function(){
    clearInterval(timeout);
    return false;
});

clicker.click(function(){
    clearInterval(timeout);
    if (count < 1) {
        $(this).css('background', 'red');
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-14T14:54:24.453

编辑：发生的情况是，当第二次 mousedown 发生而没有 mouseup 时，超时变量被覆盖。这使得第一个间隔被困在永远循环中。您可以通过跟踪间隔是否已经过去并禁用 mousedown（如果是）来解决此问题。无论使用什么鼠标按钮，这都有效。

Gustonez 提供的原始示例和解决方案似乎都有一个小错误，如果您在左键按下的中间单击右键然后释放两者，计时器会继续运行。我相信这是因为右键单击也会触发 mousedown 事件，但是 mouseup 会被出现的上下文菜单淹没。无论哪种方式，您都可以通过禁用鼠标右键单击来解决此问题。（右键单击由元素指示。其值为 3）

```
var timeout, clicker = $('#clicker');
var count = 0;
var active = false;

clicker.mousedown(function(e){
    if (active) {
        return false;
    }

    timeout = setInterval(function(){
        clicker.text(count++);
        $(this).css('background', 'orange')
    }, 500);

    active = true;

    return false;
});

$(document).mouseup(function(){
    clearInterval(timeout);
    active = false;
    return false;
});

clicker.click(function(){
    clearInterval(timeout);
    active = false;
    return false;
}); 
```

JSFiddle：http: [//jsfiddle.net/8FmRd/634/](http://jsfiddle.net/8FmRd/634/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:11:31.370

只需将您的点击器功能更新为以下

```
clicker.click(function() {
    if(clicker.text() < 1) {       
       $(this).css('background', 'red');
    }
   return false;
});​ 
```

这是 jsFiddle [http://jsfiddle.net/8FmRd/187/](http://jsfiddle.net/8FmRd/187/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:09:06.813

删除`clicker.click`并在 mouseup 事件中检查计数，例如：

```
$(document).mouseup(function(){
   clearInterval(timeout);
   if(count < 2) {
      $(this).css('background', 'red');
   }
   return false;
}); 
```

点击的发生与您按住按钮的时间无关。此外，您可以在 mousedown 中开始单击时间并检查 mouseup 事件中的差异并仅在差异小于 X 毫秒时更改背景

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T14:17:25.297

就像 FAangel 指出的那样，您也可以使用起点差异，编写代码，而其他答案已经发布：P：

[jsfiddle](http://jsfiddle.net/8FmRd/188/)

```
var timeout,
    timerStart,
    timerEnd,
    count = 0,
    interval = 500;

$(document).on({
    mousedown: function() {
        timerStart = new Date().getTime();

        var $clicker = $(this);
        timeout = setInterval(function(){
            $clicker.text(count++);
        }, interval);
        return false;
    },
    mouseup: function() {
        timerEnd = new Date().getTime();
        clearInterval(timeout);

        if(timerEnd - timerStart < interval) {
            $(this).css('background', 'red');
        }
        return false;
    }
}, '#clicker'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T14:10:38.333

在 mousedown 事件上将一些数据附加到元素并在 click 事件上检查它。这是[示例](http://jsfiddle.net/8FmRd/184/)。

# menu - selectnav.js：标签显示但未在站点的第一页（主页）中选择

> ID：12353285
> 
> 赞同：0
> 
> 时间：2012-09-10T14:00:36.230
> 
> 标签：menu, navigation, responsive-design

脚本：[Selectnav Github](http://lukaszfiszer.github.com/selectnav.js/)

使用 selectnav 时，（标签）显示在选择中，但在第一个加载索引页面（主页）中未选择，但所选链接是（标签）之后的第一个链接？

选择菜单在代码中显示：

```
 <select class="selectnav" id="selectnav1">
  <option value="">- Navigation Menu - </option>
  <option value="index.html" selected="">Home</option> 
```

您将在主页链接中看到类（选定），而不是标签链接。

我用于选择导航的自定义 js：

```
jQuery(document).ready(function () {
  selectnav('nav', {
  label: '- Navigation Menu - ',
  nested: true,
  indent: '-'
});
}); 
```

我的 ul 列表结构示例：

```
 <ul id="nav" >
    <li><a href="index.html" class="active">Home</a>
      <ul>
        <li><a href="#1">Home 2</a></li>
        <li><a href="#2">Home 3</a></li>
        <li><a href="#3">Home 4</a></li>
        <li><a href="#4">Slider 1</a></li>
        <li><a href="#5">Slider 2</a></li>
        <li><a href="#6">Slider 3</a></li>
      </ul>
    </li>
    <li><a href="#7">Pages</a></li>
    <li><a href="#8">Features</a></li>
    <li><a href="#9">Portfolio</a> </li>
    <li><a href="blog.html">Blog</a> </li>
    <li><a href="contact.html">Contact</a></li>
  </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:52:20.230

您现在可能已经解决了这个问题，但是如果其他人偶然发现了这个页面，请参阅下面的修复：

```
selectnav('nav',{
label: 'Navigation',
activeclass: false, // Default value is true
autoselect: false // Default value true
}); 
```

# python - 使用 Python 从 JSON 获取值

> ID：12353288
> 
> 赞同：87
> 
> 时间：2012-09-10T14:00:42.737
> 
> 标签：python, json, simplejson

当我试图从 JSON 字符串中检索值时，它给了我一个错误：

```
data = json.loads('{"lat":444, "lon":555}')
return data["lat"] 
```

但是，如果我遍历数据，它会给我元素（`lat`和`lon`），而不是值：

```
data = json.loads('{"lat":444, "lon":555}')
    ret = ''
    for j in data:
        ret = ret + ' ' + j
return ret 
```

返回：`lat lon`

我需要做什么才能获得`lat`and的值`lon`？(`444`和`555`)

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-10T14:04:09.650

如果要遍历字典的键和值，请执行以下操作：

```
for key, value in data.items():
    print key, value 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-09-10T14:04:35.237

它给你什么错误？

如果你这样做：

```
data = json.loads('{"lat":444, "lon":555}') 
```

然后：

```
data['lat'] 
```

**根本不应该**给你任何错误。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-02-19T16:23:05.313

使用 Python 从提供的 Json 中提取值

```
Working sample:-

import json
import sys

//load the data into an element
data={"test1" : "1", "test2" : "2", "test3" : "3"}

//dumps the json object into an element
json_str = json.dumps(data)

//load the json to a string
resp = json.loads(json_str)

//print the resp
print (resp)

//extract an element in the response
print (resp['test1']) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-01T23:43:14.160

使用您的代码，这就是我的做法。我知道选择了一个答案，只是提供了其他选项。

```
data = json.loads('{"lat":444, "lon":555}')
    ret = ''
    for j in data:
        ret = ret+" "+data[j]
return ret 
```

当您以这种方式使用“for”时，您将获得对象的键，而不是值，因此您可以通过使用键作为索引来获取值。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-17T19:22:29.943

有一个 Py 库，它有一个模块，可以方便地访问类似 Json 的字典键值作为属性：[https://github.com/asuiu/pyxtension](https://github.com/asuiu/pyxtension) 您可以将其用作：

```
j = Json('{"lat":444, "lon":555}')
j.lat + ' ' + j.lon 
```

# jsf - JSF ui:composition 和复合组件的问题

> ID：12353289
> 
> 赞同：7
> 
> 时间：2012-09-10T14:00:45.237
> 
> 标签：jsf, jsf-2, composite-component

我试图找出这是一个 JSF/EL 问题还是这里有什么问题。

基本上，我想将一个项目对象作为 ui:param 传递给 ui:composition 并在内部有一个按钮（即引导按钮，因此它们实际上是 html 链接，因此使用 commandLink）并让它使用该项目执行操作参数。这是传递了一些参数的 ui:composition item.xhtml。

```
<ui:include src="comp/item.xhtml">
    <ui:param name="item" value="#{itemVM.item}"/>
    <ui:param name="desc" value="#{true}"/>
</ui:include> 
```

现在我希望这个按钮成为一个复合组件“bt：button”，但是它似乎在解析“item”参数时遇到了问题。为了确认这一点，我从组件中取出命令链接并将其放在页面上，果然它确实有效。此外，如果我将 bt:button 移到 ui:composition 之外，它也可以在那里工作。最后，如果我使用像“test”这样的单引号将项目更改为字符串，它也可以工作（出于测试目的，我的操作方法需要一个对象）。基于这 3 种情况，看起来组合组件在解析传递给组合的项目参数时遇到了麻烦。

这是 item.xhtml 中第一个测试的示例（即，复合组件与常规 JSF 命令链接）：

```
<!- This composite component doesn't Work -->
<bt:button id="cmpBtn" active="#{user.compares[item.id]}"
           disabled="#{user.compares[item.id] != null and itemsCtr.numOfCompares >= 100}"
           styleClass="btn-item-compare btn-small"
           style="margin-bottom:5px"
           action="#{itemsCtr.compare(item)}">
    <i class="#{user.compares[item.id] != null ? 'icon-minus' : 'icon-plus'}"/>
    <h:outputText value="#{user.compares[item.id] != null ? 'Comparing' : 'Compare'}"/>
    <f:ajax render="@this"/>
</bt:button>

<!-- This regular jsf component works -->
<h:commandLink action="#{itemsCtr.compare(item)}" value="Test">
    <f:ajax render="@this"/>
</h:commandLink> 
```

这是我对 bt:button 的复合组件定义：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core">

<cc:interface componentType="LinkComponent">
    <cc:attribute name="action" targets="button"/>
    <cc:attribute name="value" type="java.lang.String"/>
    <cc:attribute name="active" type="java.lang.Boolean"/>
    <cc:attribute name="title" type="java.lang.String"/>
    <cc:attribute name="styleClass" type="java.lang.String"/>
    <cc:attribute name="disabled" type="java.lang.Boolean"/>
    <cc:attribute name="style" type="java.lang.String"/>
</cc:interface>

<cc:implementation>
    <h:commandLink id="button" binding="#{cc.link}"
                   styleClass="btn #{cc.attrs.active ? 'active' : ''} #{cc.attrs.disabled ? 'disabled' : ''} #{cc.attrs.styleClass}"
                   title="#{cc.attrs.title}" style="#{cc.attrs.style}" disabled="#{cc.attrs.disabled}" value="#{cc.attrs.value}">
        <cc:insertChildren/>
    </h:commandLink>
</cc:implementation>
</html> 
```

我的问题是这是一个 JSF 问题还是这里有什么问题？也许在复合组件定义中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T15:52:02.887

尝试更换

```
disabled="#{user.compares[item.id] != null and itemsCtr.numOfCompares >= 100}" 
```

和

```
disabled="#{user.compares[item.id] != null and itemsCtr.numOfCompares ge 100}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:37:52.753

我和你有同样的需求，做了一个复合组件，我像你一样在其中插入带有视图参数的子元素作为属性，并且值始终为空，所以我认为这是一个 JSF 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T12:07:54.877

我不确定，但我想你应该尝试更换

```
#{user.compares[item.id]} 
```

和

```
#{user.compares[item]['id']} 
```

# ruby-on-rails - 自我参照关联有很多

> ID：12353298
> 
> 赞同：0
> 
> 时间：2012-09-10T14:00:58.740
> 
> 标签：ruby-on-rails, associations, polymorphism

用户可以关注另一个用户或公司。如何在一个表中保持关联，该表是对用户模型工作正常的追随者？我也想为公司使用同一张桌子。

退出代码。我正在为关注者功能使用自引用关联。

```
class User < ActiveRecord::Base

   has_many :followerships
   has_many :following, :through => :followerships

   has_many :inverse_followerships, :class_name => "Followership", :foreign_key => "following_id"
   has_many :inverse_following, :through => :inverse_followerships, :source => :user
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T00:20:31.403

这对于关注用户和公司可能没有任何帮助，但是您看过 Michael Hartl 的[Rails 教程](http://ruby.railstutorial.org/)吗？

基本上，他会引导您构建一个类似 twitter 的应用程序，包括关注其他用户和被关注。由于他的代码非常干净，因此查看此类事情的最佳实践可能会有所帮助。

[第 11 章：关注用户](http://ruby.railstutorial.org/chapters/following-users#top)

# advantage-database-server - 如何锁定记录和更新自己锁定的记录。（Asp.Net 和 ADS）

> ID：12353301
> 
> 赞同：2
> 
> 时间：2012-09-10T14:01:06.507
> 
> 标签：advantage-database-server

我想锁定一条记录以防止在我使用时没有人可以更新。

但是锁定记录后，即使我自己也无法更新锁定记录:(

在更新记录之前我必须解锁吗？

或者有没有办法更新我锁定自己的记录？

```
string query = "SELECT * FROM table1";
AdsCommand cmd = conn.CreateCommand();
cmd.CommandText = query;

AdsExtendedReader reader = cmd.ExecuteExtendedReader();
reader.Read();

int recordNo = reader.RecordNumber;
reader.LockRecord(recordNo);

// do something with table1 record
// while doing something, I need to lock the record before I update record

AdsCommand cm = new AdsCommand("UPDATE table1 SET field1 = 'UPDATED'", conn);
cm.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:10:01.117

不可能在“直接”打开的表（与通过 SQL 操作相反）和 SQL 操作或其他表实例之间共享记录锁。

一种可能性是在获得锁后通过扩展读取器进行更新。您可以使用[SetString](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/dotnet_adsextendedreader_setstring.htm)或[SetValue](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/dotnet_adsextendedreader_setvalue.htm)。

```
reader.SetString( colNumber, 'UPDATED' ); 
```

另一种可能性可能是更新事务中的记录。然后该记录将由该用户保持锁定，直到提交事务。例如，您可以使用类似以下语句作为“无操作”（假设不涉及触发器）来锁定事务中的记录而不修改数据：

```
UPDATE table1 set field1 = field1 WHERE pk=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:05:31.557

您不能锁定它，然后使用不同的 SQL 语句对其进行更新；这会打开另一个查询实例，这不会发生，因为您将表与第一个实例一起锁定。只是不要担心锁定它，并运行您的`UPDATE`语句。ADS 将自动为您锁定记录、进行更改和解锁。

```
// Note I added a WHERE statement with a dummy value for `finvno`, since your 
// select didn't provide one 
AdsCommand cm = new AdsCommand("UPDATE table1 SET field1 = 'UPDATED' WHERE finvno = 'SomeInvNo'", conn);
cm.ExecuteNonQuery(); 
```

# string - 用斜线分割字符串

> ID：12353306
> 
> 赞同：2
> 
> 时间：2012-09-10T14:01:14.713
> 
> 标签：string, qt, split

我只是想知道如何用正斜杠 (/) 和反斜杠 () 分割字符串。例如，这些类型的字符串；

```
"X:/Blah/blah/"
"X:\Blah\blah\" 
```

还有混合斜线；

```
"X:/Blah\blah/" 
```

可以工作&在每种情况下都会返回：“X:”、“Blah”、“blah”

我相信我需要使用 QRegExp，[http](http://doc.qt.io/archives/qt-4.7/qregexp.html) ://doc.qt.io/archives/qt-4.7/qregexp.html但我只是不确定我需要使用什么字符集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T15:24:18.450

```
str.split( QRegExp("[/\\\\]") ); 
```

正则表达式需要两个反斜杠以防止反斜杠字符转义`]`字符，而 C++ 添加了另外两个反斜杠，以便您传递`\`文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T03:13:48.007

如果是解析文件名，使用 QFileInfo 怎么样？

```
QFileInfo fileInfo("c:\\test folder\\one\\test\\three.avi"); 
```

这会将所有内容转换为正斜杠。输出绝对路径时：

```
qDebug() << fileInfo.absolutePath(); 
```

输出将只有这样的正斜杠：

```
"C:/test folder/one/test" 
```

然后，您可以使用常规拆分命令来获取组件：

```
QStringList fileParts = fileInfo.absolutePath().split("/"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:52:59.937

由于正则表达式的计算成本可能很高，也许更好的解决方案是替换字符然后拆分（假设正则表达式不会变得更复杂）。

```
QString string = someFilePath();
//replace one char with another, requires no memory allocation
string.replace('\\', '/', Qt::CaseSensitive);
//you may want to use QString::KeepEmptyParts instead
QStringList pathElements = string.split('/', QString::SkipEmptyParts, Qt::CaseSensitive); 
```

这样就不需要编译正则表达式并对其进行评估。这应该使它更快一点。`QRegExp`也不是最好的正则表达式实现，这就是为什么在 Qt 5 中有一个内部`QRegularExpression`使用的新类`PCRE`。

# java - 如何为 Java RESTful Web 服务发送 HTTP 错误？

> ID：12353307
> 
> 赞同：3
> 
> 时间：2012-09-10T14:01:18.833
> 
> 标签：java, web-services, http, error-handling

我已经完成了这个[教程](http://www.myeclipseide.com/documentation/quickstarts/webservices_rest/)，现在我想从这个 web 服务中抛出一个错误，比如 HTTP 错误代码`403`或`400`.

我怎样才能做到这一点？我注意到我有一个 type 的接口`HttpServletResponse`，但我不知道如何使用它。我必须导入其他东西吗？

```
import java.util.Date;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.net.*;

import javax.servlet.http.HttpServletResponse;
import javax.ws.rs.Consumes;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.xml.ws.http.HTTPException;

import sun.awt.RequestFocusController;

import com.sun.jersey.spi.resource.Singleton;
import com.sun.research.ws.wadl.Request;
import com.sun.research.ws.wadl.Response; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:11:14.207

你可以这样做。

```
@GET
public Response check(@QueryParam("username") String username) {
   if (facade.checkUser(username)) {
      return Response.status(Response.Status.NOT_FOUND).build();
   }
   return Response.ok().build();
} 
```

# c# - Tessnet - 在我的项目中引用 - 应用程序在 Init 调用中退出

> ID：12353311
> 
> 赞同：0
> 
> 时间：2012-09-10T14:01:33.083
> 
> 标签：c#, .net, tesseract, tessnet2

我在我的项目中引用了 tessnet lib 并调用了以下代码..但它存在，但在 Init 调用中没有任何异常

```
var fd = new OpenFileDialog();
        if (fd.ShowDialog() == DialogResult.OK)
        {
            var fileP = fd.FileName;
            var bmp = new Bitmap(fileP);
            var tessocr = new tessnet2.Tesseract();
            tessocr.Init(@"C:\Downloads\TesseractApp\TessApp\bin\Debug\", "eng", false);
            tessocr.GetThresholdedImage(bmp, Rectangle.Empty).Save("c:\\Downloads\\" + Guid.NewGuid() + ".bmp");
        } 
```

从这里获取项目[http://ge.tt/5AqxgSN/v/0?c](http://ge.tt/5AqxgSN/v/0?c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:02:57.753

的第一个参数`Init`指定语言数据文件（.inttemp、.normproto 等）的位置。因此，在构建项目时，请务必将它们复制到 Debug 文件夹。

# android - Content Provider w/ Cursor - Gets Killed (how to notify client)

> ID：12353322
> 
> 赞同：1
> 
> 时间：2012-09-10T14:02:02.077
> 
> 标签：android, cursor, android-contentprovider

I have a content provider in on apk which is providing Rest Based Search results for multiple client apps.

Basically, the client requests a cursor via content resolver, then fires an intent service request to trigger the search..

In the provider, the cursor is returned to a table, and each intent service request populates the corresponding table, and triggers a NotifyDataSetChanged.

Works really well.. The only issue I am having is that if the Provider is killed for some reason (tested by doing pkill -9 com.myprovider.name) the cursor on the client apk does not change, but the app is not notified that the provider went away, and would need to re-connected to the db.. So it will continue to fire off service intents, and the cursor never gets updated b/c it is no longer tied to the underlying db..

I went through our code to try and see if we were catching some exceptions, that maybe hiding the underlying issue, but I am not seeing it..

I tried explicitly doing a cursor.close() in the provider in finalize / onLowMemory / shutdown().. None appear to get triggered.

I noticed that this happens in the logcat

```
09-10 13:58:03.015: I/ActivityThread(4268): Removing dead content provider: com.myprovider.name (called from the calling app) 
```

Any way to get this notification from the calling app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:05:34.190

So after some research, I have a workable solution, but would if anyone has any other suggestions, they would be appreciated.

Due to the fact we are using a contentProvider to get a cursor, then just updating the back end data via IntentService. We grab the cursor when our user types the first character in of their search, if the cursor count = 0, then we show an empty list message, otherwise we display the list of items in that cursor..

** NOTE: Some of the cursor handling may need to be tweaked a bit, I did not see any crashes w/ our Adapter having a cursor ripped out and becoming null, but your mileage may vary.. ( This is more about using the contentProviderClient() )

** NOTE: Per the documentation, you MUST release the contentProviderClient() when not in use anymore.

Since a content provider should be returning a type, we can do the following..

So we define a member variable

```
private ContentProviderClient contentProviderClient = null; 
```

Then when our user changes the search string we end up calling

```
public void setFilter( String searchFilter ) {
   searchedString = !TextUtils.isEmpty(filter) ? filter : "";

   boolean reload = false;               // Reloads content provider

   // contentProvider is null on first connection, assumed to be up on 
   // subsequent connections as we only close the cursor and 
   // contentProviderClient when we exit

   if (contentProviderClient != null) {
      try {
      // getType will throw an exception if the instance of the 
      // contentProvider went away (killed by user/memory collection etc)

         contentProviderClient.getType(searchFactoryUri);
      } catch (RemoteException e) {
         if( searchAdapter != null ) {
            Cursor cursor = searchAdapter.getCursor();
            cursor = null; 
            reload = true;
            contentProviderClient.release();
         }
      }
   }

   // This is for first search initialization or reloading cursor 
   // if the content provider went away for some unknown reason.

   if( this.searchAdapter == null || reload ){
      Cursor cursor = getActivity().getContentResolver().query(
            MY_URI,
            null,
            null,
            null,
            null);

   contentProviderClient = getActivity()
             .getContentResolver()
             .acquireContentProviderClient(MY_URI);

   cursor.setNotificationUri(getActivity.getContentResolver(), MY_URI);

   // DO what ever you need to after getting cursor, a cursor loader
   // would be a better implementation here, but simplifying it as 
   // I don't want to over-complicate the example.

   myList.setAdapter(searchAdapter);

   }
   getActivity().startService(MyUtil.getSearchIntent( MY_URI, searchedString );
}

@Override
public void onDestroy() {
   super.onDestroy();
   // Cleanup adapter, cursor, provider client
   if (searchAdapter != null) {
      searchAdapter.changeCursor(null); // Closes existing cursor 
   }
   if (contentProviderClient != null) {
     contentProviderClient.release();  // Release client
   }
} 
```

# cassandra - Cassandra 抛出 org.apache.cassandra.config.ConfigurationException：找不到 dse.yaml

> ID：12353323
> 
> 赞同：2
> 
> 时间：2012-09-10T14:02:04.120
> 
> 标签：cassandra, datastax-enterprise

我试图在启动 cassandra 服务器后运行 sstable2json 实用程序，但它会引发以下错误。致命配置错误 org.apache.cassandra.config.ConfigurationException：找不到 dse.yaml

致命的配置错误；无法启动服务器。

命令：bin/sstabel2json /opt/dse2.1/dse-data/UserDemo/Users-hd-3-Data.db > Users.json

在此之前：我通过传递系统参数命令启动服务器：bin/cassandra -f -Ddse.config=file:/opt/dse2.1/resources/dse/conf/dse.yaml

尽管它正在通过这个错误。

请让我知道为什么 cassandra 在调用 sstable2json 时抛出此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:03:50.173

如果您将 /opt/dse2.1/resources/dse/conf/ 添加到类路径中，它应该可以工作

# compiler-errors - C++ Builder XE2：资源编译“分配失败”

> ID：12353325
> 
> 赞同：1
> 
> 时间：2012-09-10T14:02:10.900
> 
> 标签：compiler-errors, c++builder, embedded-resource, c++builder-xe2

我的 C++ Builder 项目中有一个资源脚本。在过去的 6 年中一直如此，并且在编译时从未抱怨过。

今天突然我`"resource.rc(4):Allocate failed"`每次尝试编译时都会得到。我试图重新启动并进行清洁。还是同样的错误。这是我的资源脚本：

```
//-------------------------------------------------------------------
// DOCUMENT ICONS
//
IDI_DOCUMENT0   ICON      "Documents\\Pictures\\IDI_APPLICATION.ico"
IDI_DOCUMENT1   ICON      "Documents\\Pictures\\IDI_DOCUMENT2.ico"
IDI_DOCUMENT2   ICON      "Documents\\Pictures\\IDI_DOCUMENT3.ico"

//-------------------------------------------------------------------
// CUSTOM CURSORS
//
IDC_DELETE   CURSOR     "Documents\\Pictures\\IDC_DELETE.cur"
IDC_ADD      CURSOR     "Documents\\Pictures\\IDC_ADD.cur"
IDC_MOVE     CURSOR     "Documents\\Pictures\\IDC_MOVE.cur" 
```

它在第一项上失败`IDI_APPLICATION.ico`，如果我删除它，它会编译。这很奇怪，因为它已经 6 年没有改变了，现在突然不能编译了。这个特定图标文件的大小是 201KB，另外两个是 158KB，三个光标每个是 8KB。当您添加所有 upp 时，它看起来像是通过了神奇的边界 512KB，但是，嘿，资源部分可以比这大得多吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:17:46.817

我发现了问题所在。似乎 C++ Builder XE2 不支持压缩的 256x256 图标（在任何地方都没有发现这一点）。当我重新生成没有压缩的图标时，它会再次编译。

我不知道为什么会突然发生这种情况，但我并不感到惊讶。自从 Embarcadero 接管 C++ Builder 以来，质量一直在稳步下降......

# java - Java 类是否在某个父包中？

> ID：12353329
> 
> 赞同：0
> 
> 时间：2012-09-10T14:02:16.827
> 
> 标签：java, packages

我有包裹：

```
com.google.*.*.* 
```

可能有很多子包。

我有一堂课`foo.java`

如何检查它是否在主包内`com.google`

当我使用`Class.getPackage()`时，它只提供这样的整个包： `com.google.util.domain.sup`

我必须真的使用像 : 之类的功能吗`substring() , split()`？还是有一种奇特的方法来检查它是否属于某些父包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T14:05:53.567

Java 中的包不是分层的。`com.google.foo`与包无关`com.google`。因此，如果您的目标是检查一个类是否在一个包中，或者它的“子包”之一中，那么是的，字符串操作是您最好的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T14:04:43.707

你的意思是像...

```
if (getClass().getName().startsWith("com.google.")) 
```

如果您需要完全匹配，您可以使用

```
if (getClass().getPackage().getName().equals("com.google.util.domain.sup")) 
```

# javascript - 使用 KnockoutJS 绑定的 YUI DataTable

> ID：12353330
> 
> 赞同：0
> 
> 时间：2012-09-10T14:02:17.810
> 
> 标签：javascript, data-binding, knockout.js, yui, yui-datatable

我有一个在[JSFiddle](http://jsfiddle.net/BM3kX/5)工作的例子。

它有一段由 YUI DataTable 使用的 JSON，我需要使用 KnockoutJS 绑定来创建它。我对 KnockoutJS 相当陌生，想知道如何做到这一点。

该表应在标记下创建 -

```
<div class="yui3-skin-sam" id="datatable"></div>​ 
```

代码如下 -

```
YUI().use('datatable', 'datasource-local', 'datasource-jsonschema',function(Y){
var data  = {"generations": [{
    "type": "Modern",
    "showName": "The Modern Generation",
    "imgURI": "file:/D:/projectGen.png",
    "relations": {
        "father": {
            "age": "49",
            "firstName": "George",
            "lastName": "Mathews",
            "priority": "1",
            "profession": "Service"
        },
        "mother": {
            "age": "47",
            "firstName": "Susan",
            "lastName": "Aldrin",
            "priority": "2",
            "profession": "Home-Maker"
        },
        "brother": {
            "age": "28",
            "firstName": "Martin",
            "lastName": "Mathews J",
            "priority": "3",
            "profession": "Engineer"
        },
        "sister": {
            "age": "23",
            "firstName": "Laura",
            "lastName": "Mathews J",
            "priority": "4",
            "profession": "Fashion Model"
        },
        "aunt": {
            "age": "50",
            "firstName": "Sally",
            "lastName": "Bekkers",
            "priority": "5",
            "profession": "Singer"                
        }
    }
 }]
};
var localDataSource = new Y.DataSource.Local({source:data});
var dynamicColumns = Y.Object.keys(data.generations[0].relations);
var config = {
    schema: {
        resultListLocator: 'generations',
        resultFields: [{key:'showName'}]
    }
};

Y.Array.each(dynamicColumns,function(key){
    config.schema.resultFields.push({
        key: key,
        locator: "relations."+key + ".firstName" 
    });
});

var jsonSchema = localDataSource.plug(Y.Plugin.DataSourceJSONSchema, config);
console.log(config.schema.resultFields); 
var table = new Y.DataTable({
    columns: config.schema.resultFields
});

table.plug(Y.Plugin.DataTableDataSource, {
    datasource: localDataSource
});

table.render('#datatable');
table.datasource.load(); 
```

}); ​</p>

这可以使用 KnockoutJS 投标来完成吗？我知道使用 KnockoutJS 绑定可以很好地创建 HTML 表，但我发现 YUI 部分很棘手。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T02:07:18.690

我假设您需要向表格单元格添加一些数据绑定属性。YUI 表允许您通过使用模板自定义 TD 元素的创建。查看[YUI 文档以获取更多信息](http://yuilibrary.com/yui/docs/api/classes/DataTable.BodyView.html#property_CELL_TEMPLATE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:03:09.317

自定义绑定有助于解决此问题。我可以将数据表创建代码放在自定义绑定中，以便它将在调用绑定的标记上创建表。凉爽的。

# php - 将自定义数据库表添加到 wordpress 搜索

> ID：12353332
> 
> 赞同：2
> 
> 时间：2012-09-10T14:02:25.447
> 
> 标签：php, sql, wordpress, search

我为我为 wordpress 编写的插件有一个自定义数据库表。现在我想将此表集成到 wordpress 搜索中，因为 wordpress 搜索当然只显示通过核心 CMS 输入的数据的结果。

最好我想避免改变 WP 核心来实现这一点。

那么有什么方法可以使这成为可能，还是我必须编写自己的搜索函数来搜索和显示此自定义表数据的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:12:31.210

这个绝对的答案，将是非常定制的，这取决于你想要做什么。但是如果你了解 SQL 和数据库，这篇文章会非常有用。

[http://codex.wordpress.org/Function_Reference/wpdb_Class](http://codex.wordpress.org/Function_Reference/wpdb_Class)

# c# - 支持超时的多线程 Web 请求

> ID：12353334
> 
> 赞同：0
> 
> 时间：2012-09-10T14:02:30.347
> 
> 标签：c#, multithreading, webclient

如果您出于简单目的使用它，WebClient 就足够了。如果没有 Timeout，您可以继承它并轻松覆盖它的 GetWebRequest 方法：

```
protected override WebRequest GetWebRequest(Uri address)
{
    WebRequest request = base.GetWebRequest(address);
    request.Timeout = Timeout;
    return request;
} 
```

如果使用多线程方式，则必须通过代码或 app.config 设置 MaxConnection： [提高 .NET 中多线程 HttpWebRequests 的性能](https://stackoverflow.com/questions/388908/improving-performance-of-multithreaded-httpwebrequests-in-net)

您也可以轻松地并行化它： [Best practics for parallelize web crawler in .net 4.0](https://stackoverflow.com/questions/10688359/best-practics-for-parallelize-web-crawler-in-net-4-0)

也许微软为 WebClient (HttpWebRequest) 的实现问题创建了新的 HttpClient 类

但它没有 Proxy，Gzip 支持。

对于 Web 客户端：

在多线程实现中设置超时仍然无用！

[HttpWebRequest 的并发限制](https://stackoverflow.com/questions/4382374/concurrency-limit-on-httpwebrequest)

所以问题：

我需要带有代理、超时（工作之一）、gzip 支持的 FastWebClient。我会将它与多个代理一起使用，所以我肯定需要多个 FastWebClient。

或助手：

FastWebHelper.DownloadString（字符串 url，WebProxy 代理，int 超时）

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:26:52.057

当然。[WebClient.DownloadStringAsync 方法](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadstringasync.aspx) 您仍然需要为每个连接/请求创建 1 个 WebClient 实例，因为它不是无状态的。

# google-app-engine - 谷歌应用引擎是否提供访问控制解决方案？

> ID：12353336
> 
> 赞同：3
> 
> 时间：2012-09-10T14:02:32.780
> 
> 标签：google-app-engine

谷歌应用引擎中运行的应用程序是否有可用的访问控制解决方案？我对 IP 白名单特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:09:59.687

关于管理控制台，可以使用三个角色。

查看者、开发者和所有者。

```
https://developers.google.com/appengine/docs/adminconsole/roles 
```

此外，您可以限制对特定域中用户的访问。

但你可能想要这个：

```
https://developers.google.com/appengine/docs/python/gettingstarted/usingusers 
```

然后，您可以强制用户通过 google（或其他一些选择）登录，然后您就可以看到他们的唯一 ID。然后，您可以使用该唯一 ID 来授予或拒绝访问您网站的各个部分。

```
https://developers.google.com/appengine/docs/python/tools/webapp/utilmodule 
```

> Google App Engine 提供了一些基于 Google 基础架构的有用服务，应用程序可以使用 SDK 中包含的库来访问这些服务。其中一项服务是用户服务，它可以让您的应用程序与 Google 用户帐户集成。通过用户服务，您的用户可以使用他们已经拥有的 Google 帐户登录您的应用程序。块引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:14:29.937

我对白名单 IP 也有类似的需求。我在数据存储中有一个允许的 IP 列表，然后对 AppEngine 的每个请求我只检查调用 IP 地址并检查它是否列在内存缓存中，如果不是，我在数据存储中查询它。如果我找到它，我会将它保存在内存缓存中以供将来请求并返回请求。如果我没有找到它，我会记录它并返回一个错误。

将 IP 保留在内存缓存中的原因是，如果我有一个来自 IP 的请求，他们很快就会发送更多请求（因为他们已经登录并正在做事）。

要在 appengine（在 java 中）中获取 IP，我使用

`String IPString = getThreadLocalRequest().getRemoteAddr();`

# cuda - CUDA multi gpu：运行相同的内核（双芯片设备）

> ID：12353337
> 
> 赞同：0
> 
> 时间：2012-09-10T14:02:35.167
> 
> 标签：cuda, multi-gpu

我正在编写必须在 GTX690（双芯片）板上运行相同内核的代码。由于计算是相当可分离的，我不需要设备之间的数据交换，我只是在 CPU 上合并结果。我了解如何在每个设备上运行代码，以及如何在每个设备的内存空间中提供 i/o 数据空间。

我在尝试设置在两个设备上运行的内核都使用的常量时遇到问题。我需要为每个设备制作一个阵列吗？如果是这样，我如何在内核中检查哪个设备正在运行，以便我可以从数组中访问正确的常量？

这是我正在使用的一些代码。当我仅使用 1 个芯片（通过设置`numDev = 1`）时，它可以正常工作，但不能同时使用。

```
__constant__ float d_cellSizeZ;  
std::vector<int*> d_cell;  
.................  
bool Init(int cellsN_, float size_){  
  bool res = true;
  if(cudaSuccess != cudaGetDeviceCount(&numDev))  
    return false;  
  //numDev = 1;  
  d_cl.resize(numDev);  
  for(int i = 0; i < numDev; ++i){  
    res &= (cudaSuccess == cudaSetDevice(i));  
    if(!res)  
      break;  
    res &= (cudaSuccess == cudaMalloc((void**)&d_cell[i], cellsN_*sizef(int)));  
  };  
  res &= (cudaSuccess == cudaMemcpyToSymbol(d_cellSizeZ, &size_, sizeof(float)));  
  if(!res)  
    Cleanup();  
  return res;  
} 
```

在内核中，我只使用`d_cellSizeZ`常量。那么，我应该如何为每个设备创建一个常量，以便在同一个内核中很好地使用？

另一个问题是：如果我尝试在设备之间交换数据，它会通过 PCI 总线还是双芯片板上存在一些内部路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:25:29.737

您只是`d_cellSizeZ`在最后一个设备上进行初始化，因此在其他设备上它将是未定义的。您需要`d_cellSizeZ`在每个设备上进行初始化，最简单的方法是按照 Greg 在评论中建议的那样在循环内执行此操作：

```
for(int i = 0; i < numDev; ++i)
{  
    checkCudaErrors(cudaSetDevice(i));
    checkCudaErrors(cudaMalloc((void**)&d_cell[i], cellsN_*sizef(int)));
    checkCudaErrors(cudaMemcpyToSymbol(d_cellSizeZ, &size_, sizeof(float)));
}; 
```

d_cellSizeZ 符号的重用确实有点奇怪。幕后有一些聪明之处，但本质上该`cudaMemcpyToSymbol()`功能会查找当前活动设备上的符号，因此每次都会复制到正确的设备。

# c# - 正则表达式与 RegularExpressionValidator 不匹配

> ID：12353339
> 
> 赞同：1
> 
> 时间：2012-09-10T14:02:44.177
> 
> 标签：c#, asp.net, regex, asp.net-4.0

我希望此文本匹配：

```
test123
id=125456 
```

这是我的正则表达式不起作用：

```
([iI]{1,1}[dD]{1,1}=((d+).))|([A-Za-z0-9]*) 
```

谁能告诉我我错过了什么？第二个样本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:11:03.623

您需要使用`\d+`来匹配多个数字。 `d+`寻找重复字符`d`：

```
...((\d+).))|(
     ^^ add \ in front of d 
```

工作示例：[http ://www.rubular.com/r/R8cxjZoG58](http://www.rubular.com/r/R8cxjZoG58)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:16:03.860

这可以解决问题： `([iI][dD]=\d+)|([A-Za-z0-9]*)`

几点建议：

*   `[iI]{1,1}`可以替换为`[iI]{1}`and 因为 once 是默认设置，所以您可以`{1}`完全省略。
*   `d+`匹配字母“d”一次或多次，`\d+`匹配一位或多位数字。

# spring - Spring Data Neo4j - 使用事务导致无限循环

> ID：12353353
> 
> 赞同：0
> 
> 时间：2012-09-10T14:03:35.447
> 
> 标签：spring, transactions, neo4j, spring-transactions, spring-data-neo4j

我正在尝试将 SDN 与我的 spring-hibernate 应用程序集成。只需最少的`<neo4j:config>`配置`<neo4j:repositories>`，它就可以正常工作。但是，当我包含`@Neo4jTransactional`或编写自定义项时，我会在类的拦截方法中`transactionManager`创建 bean 时得到一个无限循环。这是我得到的例外。`nodeEntityStateFactory``ConfigurationClassEnhancer`

```
java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation 
```

这是拦截方法。

```
 public Object intercept(Object enhancedConfigInstance, Method beanMethod, Object[] beanMethodArgs,
                MethodProxy cglibMethodProxy) throws Throwable {

        String beanName = BeanAnnotationHelper.determineBeanNameFor(beanMethod);

        Scope scope = AnnotationUtils.findAnnotation(beanMethod, Scope.class);
        if (scope != null && scope.proxyMode() != ScopedProxyMode.NO) {
            String scopedBeanName = ScopedProxyCreator.getTargetBeanName(beanName);
            if (this.beanFactory.isCurrentlyInCreation(scopedBeanName)) {
                beanName = scopedBeanName;
            }
        }

        if (factoryContainsBean('&'+beanName) && factoryContainsBean(beanName)) {
            Object factoryBean = this.beanFactory.getBean('&'+beanName);
            if (factoryBean instanceof ScopedProxyFactoryBean) {

            }
            else {

                return enhanceFactoryBean(factoryBean.getClass(), beanName);
            }
        }

        boolean factoryIsCaller = beanMethod.equals(SimpleInstantiationStrategy.getCurrentlyInvokedFactoryMethod());
        boolean factoryAlreadyContainsSingleton = this.beanFactory.containsSingleton(beanName);
        if (factoryIsCaller && !factoryAlreadyContainsSingleton) {

            if (BeanFactoryPostProcessor.class.isAssignableFrom(beanMethod.getReturnType())) {
                logger.warn(String.format("@Bean method %s.%s is non-static and returns an object " +
                        "assignable to Spring's BeanFactoryPostProcessor interface. This will " +
                        "result in a failure to process annotations such as @Autowired, " +
                        "@Resource and @PostConstruct within the method's declaring " +
                        "@Configuration class. Add the 'static' modifier to this method to avoid " +
                        "these container lifecycle issues; see @Bean Javadoc for complete details",
                        beanMethod.getDeclaringClass().getSimpleName(), beanMethod.getName()));
            }
               //This doesn't invoke the @bean annotated constructor which it should. Instead it comes back to the method.
            return cglibMethodProxy.invokeSuper(enhancedConfigInstance, beanMethodArgs); 
        }
        else {

            boolean alreadyInCreation = this.beanFactory.isCurrentlyInCreation(beanName);
            try {
                if (alreadyInCreation) {
                    this.beanFactory.setCurrentlyInCreation(beanName, false);
                }
                return this.beanFactory.getBean(beanName);
            } finally {
                if (alreadyInCreation) {
                    this.beanFactory.setCurrentlyInCreation(beanName, true);
                }
            }
        }

    } 
```

说，我使用 TM 有两种方法。

```
I have two methods

@Transactional
methodA(){} // access using entityManager (hibernate)

@Neo4jTransactional
methodB(){} // access using entityRepository interface (SDN) 
```

即使我尝试使用 ChainedTransactionManager 并使用 @Transactional 注释 methodB，也会发生相同的错误。提前致谢。

**更新**

完整的堆栈跟踪

```
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory org.springframework.data.neo4j.config.Neo4jConfiguration.typeRepresentationStrategyFactory() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'indexProvider' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.index.IndexProvider org.springframework.data.neo4j.config.Neo4jConfiguration.indexProvider() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingContext' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jMappingContext org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext() throws java.lang.Exception] threw exception; nested exception is java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
... 183 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'indexProvider' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.index.IndexProvider org.springframework.data.neo4j.config.Neo4jConfiguration.indexProvider() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingContext' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jMappingContext org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext() throws java.lang.Exception] threw exception; nested exception is java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.indexProvider(<generated>)
at org.springframework.data.neo4j.config.Neo4jConfiguration.typeRepresentationStrategyFactory(Neo4jConfiguration.java:144)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.CGLIB$typeRepresentationStrategyFactory$18(<generated>)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b$$FastClassByCGLIB$$8d1abdaa.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.typeRepresentationStrategyFactory(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
... 184 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.index.IndexProvider org.springframework.data.neo4j.config.Neo4jConfiguration.indexProvider() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingContext' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jMappingContext org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext() throws java.lang.Exception] threw exception; nested exception is java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
... 205 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingContext' defined in class path resource [org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jMappingContext org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext() throws java.lang.Exception] threw exception; nested exception is java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.mappingContext(<generated>)
at org.springframework.data.neo4j.config.Neo4jConfiguration.indexProvider(Neo4jConfiguration.java:266)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.CGLIB$indexProvider$32(<generated>)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b$$FastClassByCGLIB$$8d1abdaa.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.indexProvider(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
... 206 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jMappingContext org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext() throws java.lang.Exception] threw exception; nested exception is java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
... 227 more
Caused by: java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.afterSingletonCreation(DefaultSingletonBeanRegistry.java:312)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:239)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.nodeEntityStateFactory(<generated>)
at org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext(Neo4jConfiguration.java:199)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.CGLIB$mappingContext$11(<generated>)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b$$FastClassByCGLIB$$8d1abdaa.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$908ddc4b.mappingContext(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
... 228 more 
```

# progress-4gl - get selected lines from browse

> ID：12353354
> 
> 赞同：0
> 
> 时间：2012-09-10T14:03:39.933
> 
> 标签：progress-4gl, openedge

I'm trying to use a browse in Progress-4gl that will run a control-key to display the number of selected lines within the browse, as well as a total quantity from a temp table for all the lines selected. I have been able to get the total number of lines easily, but when trying to get a total quantity from the temp-table I created, it just has the last selected row value. How do I run a for each from the selected rows? Here's some code I have for the browse:

```
on CTRL-L of browse-1 in frame a do:
   assign buf-cnt = 0.
   /***  FOR EACH BROWSE RECORD SELECTED **/
       assign jqty = jqty + int(tt.tt-qty).
   assign jlines = browse-1:num-selected-rows.
  display
       jlineslabel "Selected Number Of Lines"
       jqtylabel "Quantity Of All Lines"
       with frame fselect down row 5 centered overlay.
  pause.
end. /* on CTRL-L */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:27:58.783

for anyone wondering...

```
on CTRL-L of browse-1 in frame a do:
 assign buf-cnt = 0
        jqty = 0.
 do x = 1 to browse-1:num-selected-rows:
   stat = browse-1:fetch-selected-row(x).
   for each usrw_wkfl no-lock where
            usrw_wkfl.usrw_key1 = "862" and
            entry(1,usrw_wkfl.usrw_key2) = tt.tt-part and
            usrw_wkfl.usrw_key4 = tt.tt-dest and
            usrw_wkfl.usrw_key3 = tt.tt-duedate and
            usrw_wkfl.usrw_charfld[3] = tt.tt-qty:
      assign jqty = jqty + int(tt.tt-qty).
   end. /* for each usrw_wkfl */
 end. /* do x = 1 to browse-1 */
 assign jlines = browse-1:num-selected-rows
        jtotal = browse-1:query:num-results.
 display
      jlines         column-label "Selected Number!Of Lines"
      jtotal         column-label "Total Number!Of Lines"
      jqty           column-label "Quantity Of!All Lines"
      with frame fselect down row 5 centered overlay.
 pause. 
```

end. /* on CTRL-L */

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:29:14.923

If I understand the question properly you probably want the num-results attribute of the query handle that is associated with the browse -- which would be browse-1:query. So:

```
jqty = browse-1:query:num-results. 
```

# python - 为什么 Pandas 在一种情况下会导致“ZeroDivisionError”，而在另一种情况下不会？

> ID：12353359
> 
> 赞同：4
> 
> 时间：2012-09-10T14:04:02.290
> 
> 标签：python, pandas

我有一个 Pandas 数据框 'dt = myfunc()' ，并从 IDLE 复制屏幕输出，如下所示：

```
>>> from __future__ import division
>>> dt = __get_stk_data__(['*'], frq='CQQ', from_db=False) # my function
>>> dt = dt[dt['ebt']==0][['tax','ebt']]
>>> type(dt)
<class 'pandas.core.frame.DataFrame'>
>>> dt
                tax ebt
STK_ID RPT_Date        
000719 20100331   0   0
       20100630   0   0
       20100930   0   0
       20110331   0   0
002164 20080331   0   0
300155 20120331   0   0
600094 20090331   0   0
       20090630   0   0
       20090930   0   0
600180 20090331   0   0
600757 20110331   0   0
>>> dt['tax_rate'] = dt.tax/dt.ebt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Python\Lib\site-packages\pandas\core\series.py", line 72, in wrapper
    return Series(na_op(self.values, other.values),
  File "D:\Python\Lib\site-packages\pandas\core\series.py", line 53, in na_op
    result = op(x, y)
ZeroDivisionError: float division
>>> 
```

我花了很多时间来弄清楚为什么 Pandas 会引发 'ZeroDivisionError: float division' ，而 Pandas 在下面的示例代码中效果很好：

```
tuples = [('000719','20100331'),('000719','20100930'),('002164','20080331')]
index = MultiIndex.from_tuples(tuples, names=['STK_ID', 'RPT_Date'])
dt =DataFrame({'tax':[0,0,0],'ebt':[0,0,0]},index=index)
dt['tax_rate'] = dt.tax/dt.ebt

>>> dt
                 ebt  tax  tax_rate
STK_ID RPT_Date                    
000719 20100331    0    0       NaN
       20100930    0    0       NaN
002164 20080331    0    0       NaN
>>> 
```

我希望 Pandas 为这两种情况都提供“NaN”，为什么在第一种情况下会发生“ZeroDivisionError”？如何解决？

* * *

附上以下代码和屏幕输出以提供更多信息以进行调试

```
def __by_Q__(df):
    ''' this function transforms the input financial report data (which
        is accumulative) to qurterly data
    '''
    df_q1=df[df.index.map(lambda x: x[1].endswith("0331"))]

    print 'before diff:\n'
    print df.dtypes
    df_delta = df.diff()
    print '\nafter diff: \n'
    print df_delta.dtypes

    q1_mask = df_delta.index.map(lambda x: x[1].endswith("0331"));
    df_q234 = df_delta[~q1_mask]

    rst = concat([df_q1,df_q234])

    rst=rst.sort_index()
    return rst 
```

屏幕输出：

```
before diff:

sales                      float64
discount                    object
net_sales                  float64
cogs                       float64
ebt                        float64
tax                        float64

after diff: 

sales                      object
discount                   object
net_sales                  object
cogs                       object
ebt                        object
tax                        object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:43:19.490

@bigbug，您如何从 SQLite 后端获取数据？如果您查看`pandas.io.sql`，该`read_frame`方法有一个`coerce_float`参数，如果可能，该参数应将数值数据转换为浮点数。

您的第二个示例有效，因为 DataFrame 构造函数试图巧妙地处理类型。如果将 dtype 设置为 object 则失败：

```
In [16]: dt = DataFrame({'tax':[0,0,0], 'ebt':[0,0,0]},index=index,dtype=object)

In [17]: dt.tax/dt.ebt
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last) 
```

再次检查您的数据导入代码并告诉我您发现了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:35:51.990

我无法重现这种行为（我尝试从整数、浮点数和 numpy 数组创建 DataFrames），购买我认为这是一个更好的主意，先`NaN`分配到`tax_rate`列然后在`ebt`非零时覆盖值：

```
dt['tax_rate'] = numpy.nan
dt['tax_rate'][dt.ebt != 0] = dt.tax[dt.ebt != 0] / dt.ebt[dt.ebt != 0] 
```

# javascript - 是否有任何带有表格的 JavaScript 的 Markdown 语法解析器？

> ID：12353364
> 
> 赞同：1
> 
> 时间：2012-09-10T14:04:11.390
> 
> 标签：javascript, parsing, markdown, multimarkdown

我正在寻找具有表格功能的 Markdown 语法 JavaScript 解析器。似乎我找不到一个，所以我很难将这个功能实现到现有代码中，但我无法这样做。有谁知道解析[MULTIMARKDOWN](http://fletcherpenney.net/multimarkdown/)的 JavaScript 库，或者至少是实现表格功能的不那么困难的方法？

表格功能是指要在 HTML 表格中转换的语法，例如：

```
|= header1 |= hader2
| cell 1 | cell 2 
```

会成为

```
<table>
    <tr>
        <th>
             header1
        </th>
        <th>
             header2
        </th>
    </tr>
    <tr>
        <td>
             cell1
        </td>
        <td>
             cell2
        </td>
    </tr>
</table> 
```

到目前为止，我什至尝试将 Wiki 解析器与 Markdown 解析器混合，但没有成功。

**编辑：我需要它在浏览器上运行而不是 node.js**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:35:06.110

我在[ghw](https://github.com/bebraw/ghw/blob/master/lib/ghw.js)有一个 GitHub 表语法的实现。如果您愿意，请随意使用它。请注意，它取决于[标记](https://github.com/chjj/marked)的 .

希望有帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T02:16:00.060

[Showdown](https://github.com/showdownjs/showdown)是 Markdown 的 JavaScript 端口，并使用[表格扩展名](https://github.com/showdownjs/table-extension).

我在加载表格插件时遇到了问题：`Uncaught Extension 'undefined' could not be loaded. It was either not found or is not a valid extension.`这可以通过以这种方式加载扩展来解决：正如[在此处](https://github.com/coreyti/showdown/pull/64)`var converter = new showdown.Converter({ extensions: ['table'] });`指出的那样。

如果您在一个文档上有多个表，它会重复它们，那么还有另一个错误，解决方法[在这里](https://github.com/coreyti/showdown/pull/48/files)。

# php - CodeIgniter 闪存数据

> ID：12353370
> 
> 赞同：19
> 
> 时间：2012-09-10T14:04:29.950
> 
> 标签：php, codeigniter, session, post

我正在为 CodeIgniter 中的 Flash 数据而苦苦挣扎。

我基本上想：

向数据库添加类别 将用户重定向回页面 显示成功弹出消息“您的类别已创建”

到目前为止，我可以成功地将类别添加到数据库并且用户输入得到正确验证，唯一的事情是我不知道如何创建弹出成功消息。（我不想加载成功视图），只需重定向回他们来自的地方并在顶角或其他地方显示小消息。

闪存数据是正确的方法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-10T14:11:31.167

在您的控制器中：

```
//add to db
// load session library if not auto-loaded
$this->session->set_flashdata('msg', 'Category added');
redirect('controller/method'); 
```

在视图中：

```
<script>
// assumes you're using jQuery
$(document).ready(function() {
$('.confirm-div').hide();
<?php if($this->session->flashdata('msg')){ ?>
$('.confirm-div').html('<?php echo $this->session->flashdata('msg'); ?>').show();
<?php } ?>
});
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-22T06:45:21.737

您可以执行不同的会话消息取决于您从控制器传递给视图的内容。注意到我使用 Bootstrap 作为我的 CSS 主干。

**鉴于，**

对于成功案例，

```
<?php if ($this->session->flashdata('category_success')) { ?>
        <div class="alert alert-success"> <?= $this->session->flashdata('category_success') ?> </div>
    <?php } ?> 
```

对于错误情况，

```
<?php if ($this->session->flashdata('category_error')) { ?>
    <div class="alert alert-danger"> <?= $this->session->flashdata('category_error') ?> </div>
<?php } ?> 
```

**在控制器中，**

对于成功案例，

```
$this->session->set_flashdata('category_success', 'Success message.');
redirect("To your view"); 
```

对于错误情况，

```
$this->session->set_flashdata('category_error', 'Error message.');
redirect("To your view"); 
```

如需更多参考，您可以访问： http: [//www.codeigniter.com/userguide2/libraries/sessions.html](http://www.codeigniter.com/userguide2/libraries/sessions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T10:11:14.870

使用三元运算符：

设置闪存数据：

```
$this->session->set_flashdata('insertproduct', 'Product added successfully');
$this->session->set_flashdata('deleteproduct','Delete added successfully'); 
```

使用 Flash 会话数据：

```
<?php if($this->session->flashdata('insertproduct')):echo $this->session->flashdata('insert');endif; ?><br/>
<?php if($this->session->flashdata('delete')): echo $this->session->flashdata('delete'); endif;?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-17T05:18:49.487

你可以试试这个——

控制器：

```
 $this->session->set_flashdata('success', 'Success Message...');

    OR

    $this->session->set_flashdata('error', 'Error Message...');

    OR

    $this->session->set_flashdata('warning', 'Warning Message...');

    OR

    $this->session->set_flashdata('info', 'Info Message...'); 
```

看法：

```
 <?php if($this->session->flashdata('success')){ ?>
        <div class="alert alert-success">
            <a href="#" class="close" data-dismiss="alert">&times;</a>
            <strong>Success!</strong> <?php echo $this->session->flashdata('success'); ?>
        </div>

    <?php } else if($this->session->flashdata('error')){  ?>

        <div class="alert alert-danger">
            <a href="#" class="close" data-dismiss="alert">&times;</a>
            <strong>Error!</strong> <?php echo $this->session->flashdata('error'); ?>
        </div>

    <?php } else if($this->session->flashdata('warning')){  ?>

        <div class="alert alert-warning">
            <a href="#" class="close" data-dismiss="alert">&times;</a>
            <strong>Warning!</strong> <?php echo $this->session->flashdata('warning'); ?>
        </div>

    <?php } else if($this->session->flashdata('info')){  ?>

        <div class="alert alert-info">
            <a href="#" class="close" data-dismiss="alert">&times;</a>
            <strong>Info!</strong> <?php echo $this->session->flashdata('info'); ?>
        </div>
    <?php } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:10:57.097

是的，只需检查闪存数据是否可用，如果是，则显示消息，如果不是，则不显示。就如此容易。

ps 你应该总是在 POST 请求之后进行重定向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T14:15:28.000

CodeIgniter 的[Flash 数据](http://codeigniter.com/user_guide/libraries/sessions.html)使用`PHP` `session`变量。它将 a`:old`放在会话名称中，以便它只持续一个 db 调用。它的功能和目的是做你想做的事，所以，是的，这是处理这些类型事情的好方法。

请记住，如果您要使用它，您必须包括 `$this->session->library('session')`

如果您不确定如何实际使用`flash_data`，我建议您阅读我之前链接的文档。

```
$this->session->set_flashdata(
    'category_success', 
    'Your category has been created'
);
redirect(); //location

echo $this->session->flashdata('category_success'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-03T17:50:16.807

```
//Set Flash messages

$this->session->set_flashdata('post_created', 'Your post has been Posted!');
redirect('Posts/index');

//In Posts View you will have

<?php if($this->session->flashdata('post_created')) : ?>
    <?php echo '<p class="alert alert-success"> ' .$this->session->flashdata('post_created'). '</p>'; ?>
<?php endif; ?> 
```

# ruby-on-rails - Rails：“创建”方法重定向到哪里？

> ID：12353372
> 
> 赞同：0
> 
> 时间：2012-09-10T14:04:33.060
> 
> 标签：ruby-on-rails, json, parsing, url-routing

我是一个完整的 Rails 初学者，我正在尝试理解完整的概念。我已经尝试解决这个问题几个小时了，我想在这里问一下。

我想对在 localhost 上运行的 Rails 应用程序执行 JSON 请求。但我不知道是我使用了错误类型的 JSON 请求软件（我使用的是 CocoaRestClient for mac）还是我的代码不正确。

我观察到，当我在 rails 中创建一个 POST 类型的 JSON 请求时，它会被引导到**create**方法。我想要实现的是实际存储从 JSON 接收到的多个变量，然后在页面上显示它。我知道这很简单，但真的很难，因为我尝试了很多东西。

我的问题：

1.  我将在 create 方法上捕获事件。如何从 JSON 请求中获取参数。我试过`@username = params[:username]`了，但没有成功。
2.  如果我有幸捕捉到 JSON 提供的参数，我应该在哪个页面打印它们。我试图在索引或显示页面上显示，但也无法管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:28:40.947

你有`request`变量，实际上是[`ActionDispatch::Request`](http://api.rubyonrails.org/classes/ActionDispatch/Request.html)类的实例。在这里，您有[`#body`](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-body)返回原始请求正文的方法。因此，如果您在正文中发送 JSON 请求，您应该解析它，即：

```
data = JSON.parse request.body
data['username'] 
```

如果你想显示它，你有 3 个选项：

*   在方法中渲染视图`#create`是个坏主意，因为这种方法只是将模型保存到数据库
*   将数据保存到数据库并显示在下一页
*   或使用`flash`对象并将其仅存储到下一个请求

# c#-4.0 - JQuery 事件被钩住多次

> ID：12353376
> 
> 赞同：0
> 
> 时间：2012-09-10T14:04:45.180
> 
> 标签：c#-4.0

我有一个页面包含 Ajax UpdatePanel，里面有一些控件，还有一些其他控件，当我单击提交按钮时，UpdatePanel 将被更新，并且 JQuery 事件将通过使用“Sys.WebForms”重新挂钩.PageRequestManager.getInstance();" 如下代码：

```
function DocReady() {
    $('#txtNewPassword').click(function () {
        alert('clicked');
    });
}

$(document).ready(function () {
     DocReady();
});

$(document).ready(function () {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(function () {
        DocReady();
    });
}); 
```

问题是，在任何部分回发之后，UpdatePanel JQuery 事件之外的控件重新挂钩 X 次，其中 X = 部分回发调用的次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:14:34.683

您可以在设置新的点击事件之前删除所有点击事件。

```
function DocReady() {
    $('#txtNewPassword').unbind('click');
    $('#txtNewPassword').click(function () {
        alert('clicked');
    });
} 
```

这不是最干净的代码，但似乎您每次只是向文本框添加一个新的单击事件，因此这种方式会删除任何以前的事件，然后添加新的事件。

# ios - 创建多个 UIButtons 但只有最后一个可见

> ID：12353378
> 
> 赞同：1
> 
> 时间：2012-09-10T14:04:57.193
> 
> 标签：ios

我在 UIView 中创建多个 UIButton。有两个嵌套循环，以创建不同的按钮组，具有不同的形状。问题是，只有最后一个创建的 UIButton 是可见的（并且可以使用 PanGestureRecognizer 移动），即使按钮应该插入不同的位置。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.

    int i, j;
    NSMutableString *backgoundImageName = [[NSMutableString alloc] init];
    NSMutableString *barTitle = [[NSMutableString alloc] init];
    sticks = [[NSMutableArray alloc] init];

    [mainView setBackgroundColor:[UIColor blackColor]];
    self.view = mainView;
    [mainView setNeedsDisplay];

    //create the bars
    UIButton *barra = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [barra addTarget:self action:@selector(changeButtonTitle:) forControlEvents:UIControlEventTouchUpInside];
    [barra addGestureRecognizer:panGestureRecognizer];
    for (j = 1; j <= 10; j++) {
        backgoundImageName = [NSMutableString stringWithFormat:@"Regolo%d%@",j,@".png"];
        for (i = 1; i <= 3; i++) {
            barra.frame = CGRectMake((SQUARE_SIZE * j), (SQUARE_SIZE * 2), SQUARE_SIZE, (SQUARE_SIZE * j));
            [barra setBackgroundImage:[UIImage imageNamed:backgoundImageName] forState:UIControlStateNormal];
            [barra setTag:j];

            barTitle = [NSMutableString stringWithFormat:@"%d",j];
            [barra setTitle:barTitle forState:UIControlStateNormal];
            [barra setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            [sticks addObject:barra];
            [self.mainView addSubview:(UIButton *)sticks.lastObject];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:14:28.780

移动这段代码：

```
UIButton *barra = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
[barra addTarget:self action:@selector(changeButtonTitle:) forControlEvents:UIControlEventTouchUpInside]; 
[barra addGestureRecognizer:panGestureRecognizer]; 
```

在你的内部 for 循环中。

您有一个对象（UIButton *barra），您正在循环内更改其属性，所以我认为最后您的所有按钮都堆叠在最后一个按钮的框架位置（以及最终的背景、标题和标签值），只有最上面是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:15:47.197

您只创建一个按钮。应该是这样的：

```
for (j = 1; j <= 10; j++) {
    backgoundImageName = [NSMutableString stringWithFormat:@"Regolo%d%@",j,@".png"];
    for (i = 1; i <= 3; i++) {
        //create the bars
        UIButton *barra = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
        [barra addTarget:self action:@selector(changeButtonTitle:) forControlEvents:UIControlEventTouchUpInside];
        [barra addGestureRecognizer:panGestureRecognizer];

        barra.frame = CGRectMake((SQUARE_SIZE * j), (SQUARE_SIZE * 2), SQUARE_SIZE, (SQUARE_SIZE * j));
        [barra setBackgroundImage:[UIImage imageNamed:backgoundImageName] forState:UIControlStateNormal];
        [barra setTag:j];

        barTitle = [NSMutableString stringWithFormat:@"%d",j];
        [barra setTitle:barTitle forState:UIControlStateNormal];
        [barra setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [sticks addObject:barra];
        [self.mainView addSubview:barra];
    }
} 
```

# php - 如何根据类别 ID 在产品视图上显示内容？

> ID：12353379
> 
> 赞同：0
> 
> 时间：2012-09-10T14:04:56.710
> 
> 标签：php, magento

我有这个代码片段，它可以根据产品所属的顶级类别显示内容：

```
<?php $categoryIds = $_product->getCategoryIds(); if($categoryIds[0]!= '42'):?>
   CONTENT HERE...
<?php endif; ?> 
```

这是放在 Magento 1.6.1 社区版的目录/产品下的 list.phtml 和 view.phtml 中。此代码适用于一个 ID，但是当我尝试添加时：

```
<?php $categoryIds = $_product->getCategoryIds(); if($categoryIds[0]!= '42' || $categoryIds[1]!= '43'):?>
   CONTENT HERE...
<?php endif; ?> 
```

它不再起作用了。你们中的一些 Magento 巫师可以帮助一个可怜的灵魂吗？！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:50:13.107

**Guerra**以前的帖子几乎是正确的。他只是在逻辑上搞砸了一点——你需要逻辑 AND 而不是 OR：

```
if(!in_array('42',$categoryIds) && !in_array('43',$categoryIds)) 
```

否则，对于 42 和 43 类别，案例将返回 true（因为 OR）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:50:43.277

您可以尝试通过以下方式更改您的 if 语句

```
if(!in_array('42',$categoryIds) || !in_array('43',$categoryIds)) 
```

它比固定位置更好。因为如果你的函数返回 43 和 42 以便你不能在位置 0 和 1 上正确。

# python - 从“开始到结束”“一遍又一遍”进行副作用迭代器循环

> ID：12353383
> 
> 赞同：1
> 
> 时间：2012-09-10T14:05:13.847
> 
> 标签：python, mocking, python-2.7

我必须说我是**python mock**的新手。我有一个**副作用迭代器**：

```
myClass.do.side_effect = iter([processStatus, memoryStatus, processStatus, memoryStatus, processStatus, memoryStatus, processStatus, memoryStatus]) 
```

*以上按预期工作，测试用例通过*

但我正在寻找一种更好的方法来写这个。我试过`[....]*4`了，但没有奏效。

我该怎么做？简单地说，使迭代器在它结束时从头开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:09:08.733

我想你可以`itertools.cycle`在这里使用，如果你想“一遍又一遍”：

```
>>> s = range(3)
>>> s
[0, 1, 2]
>>> from itertools import cycle
>>> c = cycle(s)
>>> c
<itertools.cycle object at 0xb72697cc>
>>> [next(c) for i in range(10)]
[0, 1, 2, 0, 1, 2, 0, 1, 2, 0]
>>> c = cycle(['pS', 'mS'])
>>> [next(c) for i in range(10)]
['pS', 'mS', 'pS', 'mS', 'pS', 'mS', 'pS', 'mS', 'pS', 'mS'] 
```

或者，正如@mgilson 所说，如果您想要有限数量的 2 元素项（我不完全确定您需要什么数据格式）：

```
>>> from itertools import repeat
>>> repeat([2,3], 3)
repeat([2, 3], 3)
>>> list(repeat([2,3], 3))
[[2, 3], [2, 3], [2, 3]] 
```

但正如评论中所指出的，`iter([1,2,3]*n)`也应该有效。

# php - SimpleXML XPath 查询中的转义问题

> ID：12353384
> 
> 赞同：1
> 
> 时间：2012-09-10T14:05:18.600
> 
> 标签：php, jquery, xpath, attributes, simplexml

我正在使用 XPath 从 PHP 中的 XML 文件中检索数据，例如：

```
$xml -> xpath('///Region[@country="Spain"]/..'); 
```

这工作正常。现在我正在从 AJAX 请求构建属性查询，例如：

```
$attributeQuery = '';
for ($i = 0; $i < count($queryArray); $i++){
    $attributeQuery .= '@'.$keys[$i].'="'.addslashes($values[$i]).'"'; //outputs `@key="value"`
    if ($i + 1 != count($queryArray)){ //string needs another ' and ' if not last element
        $attributeQuery .= ' and ';
    }
}
$path = '///Region['.$attributeQuery.']/..'; 
```

当我有标准的单字国家名称时，这很好用。当我正在寻找包含单引号的名称时，麻烦就开始了：`Lao People's Democratic Republic`。我的查询构造函数返回：

```
'///Region[@country="Lao People\'s Democratic Republic"]/..' 
```

在那种情况下，当我将它硬编码到 xpath-request 中时，它也可以正常工作，但是当我使用`$attributeQuery`-variable时`$xml -> xpath($path);`它会失败并返回一个空结果？有问题的节点确实存在于我的 XML 中（在硬编码查询中找到...）：

```
...
<Region continent="Asia" country="Lao People's Democratic Republic" state="" subcontinent="South-Eastern Asia" />
... 
```

老实说，我对可能导致这种情况的原因有些困惑，我想这是一些逃避问题，但我不知道它来自哪里。另外我不明白为什么硬编码的字符串会起作用而使用变量不会？`addslashes`我在这里遗漏了一些关于内部工作的东西吗？

**编辑：**

所以，我发现`addslashes`从我的查询字符串连接中删除我的问题可以解决我的问题，因为我里面的值`$_GET`似乎已经被转义了。奇怪的是，我确实关闭了 Magic Quotes（在运行时检查它也返回`0`了），并且从我在文档中可以阅读的内容来看，我的字符串应该发生的唯一事情是它们将在发送客户端之前由 jQuery 进行 URL 编码在服务器端处理之前进行 URL 解码。

所以发生的事情如下，我在我的 JS 中这样做：

```
params.country = $(this).val(); //returns "Lao People's Democratic Republic"
$.getJSON('getMapData.php',params,function(data){... 
```

服务器正在执行以下操作：

```
$vals = array_values($_GET);
$keys = array_keys($_GET); 
```

值已经以`$vals`某种方式神奇地逃脱了。

尽管目前一切正常，但有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:44:42.767

来自[**php.net 评论**](http://www.php.net/manual/en/simplexmlelement.xpath.php#106361)：

> 如果要搜索引用的值，请使用 xpath concat 函数。
> 
> ```
> $xml->xpath('//zone[@country=concat("Cote d", \''', "Ivoire")]'); 
> ```

所以对于你的（我猜评论中的转义字符顺序错误）：

```
$xml->path('///Region[@country=concat("Lao People", '\'', "s Democratic Republic"]/..' 
```

# wolfram-mathematica - 如何在 Mathematica 中编写最大似然估计？

> ID：12353387
> 
> 赞同：4
> 
> 时间：2012-09-10T14:05:30.687
> 
> 标签：wolfram-mathematica

我是 Mathematica 的初学者，目前只能理解基本命令。我需要帮助来编写最大似然估计函数。我想找到二项分布的 MLE，有 2 个参数：n 和 p。我知道这是一个非常简单的问题，实际上我可以手动获得答案，我做到了。但我需要知道如何在 Mathematica 中编写它以获得相同的答案。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:34:38.527

```
data = RandomVariate[BinomialDistribution[2, .3], 1000]; 
EstimatedDistribution[data, BinomialDistribution[n, p],
                      ParameterEstimator -> {"MaximumLikelihood"}]

(* -> BinomialDistribution[2, 0.3155] *) 
```

# java - Java Eclipse 剖析 Java 异常

> ID：12353388
> 
> 赞同：0
> 
> 时间：2012-09-10T14:05:34.660
> 
> 标签：java, eclipse

我会很感激一些帮助来弄清楚这个异常消息对我说的到底是什么。我能够使用调试器将问题缩小到代码中的特定行。但是，我认为更多信息可以更好地找出代码中的实际问题。

```
 public static List<ParsedNdefRecord> getRecords(NdefRecord[] records) 
    {
        List<ParsedNdefRecord> elements = new ArrayList<ParsedNdefRecord>();
        for (NdefRecord record : records) {
            if (UriRecord.isUri(record)) {
                elements.add(UriRecord.parse(record));
            } else if (TextRecord.isText(record)) {
                elements.add(TextRecord.parse(record));
            } else if (SmartPoster.isPoster(record)) {
                elements.add(SmartPoster.parse(record));
            }
        }
        return elements;
    }

09-10 13:47:38.207: D/dalvikvm(332): VFY: replacing opcode 0x71 at 0x000c
09-10 13:47:38.207: D/dalvikvm(332): VFY: dead code 0x000f-004f in Lcom/example/android/nfc/record/UriRecord;.parseWellKnown (Landroid/nfc/NdefRecord;)Lcom/example/android/nfc/record/UriRecord;
09-10 13:47:49.617: W/dalvikvm(332): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/example/android/nfc/record/UriRecord;
09-10 13:48:28.971: D/AndroidRuntime(332): Shutting down VM
09-10 13:48:28.971: W/dalvikvm(332): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-10 13:48:29.178: E/AndroidRuntime(332): FATAL EXCEPTION: main
09-10 13:48:29.178: E/AndroidRuntime(332): java.lang.ExceptionInInitializerError
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.NdefMessageParser.getRecords(NdefMessageParser.java:48)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.NdefMessageParser.parse(NdefMessageParser.java:41)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.TagViewer.buildTagViews(TagViewer.java:105)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.TagViewer.resolveIntent(TagViewer.java:86)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.TagViewer.onCreate(TagViewer.java:59)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
09-10 13:48:29.178: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-10 13:48:29.178: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
09-10 13:48:29.178: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-10 13:48:29.178: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method)
09-10 13:48:29.178: E/AndroidRuntime(332): Caused by: java.lang.NoClassDefFoundError: com.google.common.collect.ImmutableBiMap
09-10 13:48:29.178: E/AndroidRuntime(332):  at com.example.android.nfc.record.UriRecord.<clinit>(UriRecord.java:51)
09-10 13:48:29.178: E/AndroidRuntime(332):  ... 18 more
09-10 13:48:39.069: I/Process(332): Sending signal. PID: 332 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:06:42.190

```
 Caused by: java.lang.NoClassDefFoundError: com.google.common.collect.ImmutableBiMap 
```

看来您在运行时类路径中没有有效的番石榴库。确保已将它们添加到 lib 文件夹。

# python - django static_url vs media_url

> ID：12353389
> 
> 赞同：0
> 
> 时间：2012-09-10T14:05:37.687
> 
> 标签：python, django, django-urls, django-settings

在 settings.py 我得到了 media_url = '/media/' 和 static_url = '/static/'

在 urls.py 我得到：

```
(r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT,'show_indexes': True}),
(r'^static/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.STATIC_ROOT,'show_indexes': True}), 
```

当我尝试打开 localhost/media/django 正确加载放置在媒体目录中的图像时。但是当我尝试去 /static/ 我得到：

```
Request Method: GET
Request URL:    localhost/static/
Directory indexes are not allowed here. 
```

但是，当`setting.py`我更改 static_url = '/sssstatic/' 时，localhost/static/ 工作正常。

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:30:40.480

Django在. *_* _ 您没有在 urls.py 中指定它。或者，如果您出于某种原因确实需要指定它，请使用：`STATIC_URL``DEBUG=True`

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

# jquery - 将 a 添加到 div 标签

> ID：12353390
> 
> 赞同：2
> 
> 时间：2012-09-10T14:05:40.057
> 
> 标签：jquery, html, image

我有以下结构：

```
<div class="eventIcons">Sample Event</div> 
```

如何在文本之前向 div 添加标签，以便最终得到：

```
<div class"eventIcons"><img id="printOnlyIcon" src"printOnly.jpg"/>Sample Events</div> 
```

我目前正在使用以下 jquery，但它在文本后添加了标签：

```
$('div.eventIcons').append('<img id="printOnlyIcon" src="printOnly.jpg"/>'); 
```

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T14:06:26.677

用于[`.prepend`](http://api.jquery.com/prepend/)在开头添加元素。

见下文，

```
$('div.eventIcons').prepend('<img id="printOnlyIcon" src="printOnly.jpg"/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:07:02.713

只需使用“前置”而不是“附加”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:07:36.083

像这样试试

```
$('div.eventIcons').prepend('<img id="printOnlyIcon" src="printOnly.jpg"/>'); 
```

您必须将图像添加到您的 div 才能附加它。

# python - python 和 __init__ 中的子类化：实际示例

> ID：12353393
> 
> 赞同：0
> 
> 时间：2012-09-10T14:06:01.970
> 
> 标签：python, class, inheritance

在python中我可以这样做：

```
import mechanize
class MC (object):
      def __init__(self):
          self.Browser = mechanize.Browser()          
          self.Browser.set_handle_equiv(True)
      def open (self,url):
          self.url = url
          self.Browser.open(self.url) 
```

我的问题是：我怎样才能`__init__`在子类中使用父类方法（就像这样）：

```
class MC (mechanize.Browser):
      def __init__(self):
          self.Browser.set_handle_equiv(True) 
```

帮助很大！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:07:31.220

只需直接调用该方法，基类上的方法在初始化期间可在您的实例上使用：

```
class MC(mechanize.Browser):
    def __init__(self):
        self.set_handle_equiv(True) 
```

您可能还想调用基类`__init__`方法：

```
class MC(mechanize.Browser):
    def __init__(self):
        mechanize.Browser.__init__(self)
        self.set_handle_equiv(True) 
```

我们需要`__init__`直接调用，因为`Browser`它是一个[老式的 python 类](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)；在我们将使用的新型 python 类`super(MC, self).__init__()`中，该[`super()`函数](http://docs.python.org/library/functions.html#super)提供了一个代理对象，该对象搜索基类层次结构以查找您要调用的下一个匹配方法。

# html - HTML：使用行跨度控制表格中的单个行高

> ID：12353396
> 
> 赞同：3
> 
> 时间：2012-09-10T14:06:12.210
> 
> 标签：html, css, internet-explorer, internet-explorer-8

假设我有一个 2 行 2 列的表。然后我合并第二列中的行，并用几行文本填充这一列。

```
|------|------|
|      | text |
|------| text |
|      | text |
|------|------| 
```

我的浏览器（IE 8，标准模式）自动将第一列中的行调整为相等的高度。向第二列添加行会增加第一列中行的大小。现在，当文本添加到第一列中的一个行时，IE 会扩展该行以包含文本并将剩余高度分配到另一行。

问题是当文本添加到第二列时，我希望第一列行中的文本**不移动。**（控件使用 javascript 动态显示或隐藏，导致每次调整左列的大小）。我还希望第一列中的文本位于其单元格的顶部，并调整左上角单元格的大小，以便单元格 1 和 2 中的文本之间没有多余的空间。

```
|---------|--------|
|text     |text    |
|---------|        |
|text     |text    |
|         |text    |
|         |        |
|---------|--------| 
```

将 vertical-align:top 放在左上角的单元格上会将文本定位在该单元格中我想要的位置，但下面单元格中的文本仍然出现在页面下方太远，因为这些单元格的实际大小由控制渲染器。尝试设置单元格的高度 - style="height:100px;" 似乎也不起作用。我不想手动指定高度 - 我只想让 IE 最小化左上角单元格的高度，这样就没有多余的空间，并且在将文本添加到第二列时文本不会移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:48:51.413

一定要用桌子吗？使用 CSS 可能更容易实现这样的效果：

HTML：

```
<div class="row">
    <div class="col1">
        Row 1 Title                    
    </div>
    <div class="col2">
        Row 1 text<br />
        more text<br />
        even more text
    </div>
</div>
<div class="row">
    <div class="col1">
        Row 2 Title
    </div>
    <div class="col2">
        Row 2 text<br />
        more text<br />
        even more text<br />
        still more text
    </div>
</div>
<div class="row">
    <div class="col1">
        Row 3 Title
    </div>
    <div class="col2">
        Row 3 text<br />
        more text<br />
        even more text<br />
        still more text<br />
        yet another line of text
    </div>
</div> 
```

​ CSS：

```
.row {
    margin-bottom: 10px;            
    overflow: hidden;
}
.col1, .col2 {
    float: left;
}
.col1 {
    margin-right: 10px;
} 
```

[JSFiddle](http://jsfiddle.net/4xmC8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:26:44.853

我想我明白了。如果您的单元格最初没有文本，则该单元格没有高度，但是如果您随后向其中添加文本，则同一列中该单元格下方的单元格会跳下以为单元格中新添加的文本腾出空间（例如 A1）。

如果您`&nbsp;`在空白单元格中添加（编码空间），您将在该单元格中获得一行文本的高度，而无需实际添加可见内容。

# marklogic - Marklogic：搜索中的分页：基于eleemnt节点而不是文档uri的搜索

> ID：12353405
> 
> 赞同：3
> 
> 时间：2012-09-10T14:06:59.923
> 
> 标签：marklogic

我在**wells.xml**`xml`中有以下格式

 **```
<wells><well><date-created>MMDDYYYY</date-created><title>ABC</title></well><well><date-created>MMDDYYYY</date-created><title>ABC</title></well></wells> 
```

现在我执行了以下搜索查询：

```
declare namespace ts= "http://marklogic.com/mlu/clover/docs-xml";
import module namespace search ="http://marklogic.com/appservices/search" at "/MarkLogic/appservices/search/search.xqy";
declare variable $options :=<options xmlns="http://marklogic.com/appservices/search"><transform-results apply="snippet"></transform-results></options>;
for $doc in search:search("ABC",$options,1,1)//search:match 
return $doc 
```

结果，它给了我两个结果集作为同一个文档中的两个记录，无论我在哪里传递 (1,1) 组合`search:search`。

请帮助如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:12:13.827

搜索库以及 MarkLogic 的所有索引都是基于片段/文档的。因此，最好将 wells 文档拆分为单独的 well 文档。但您也可以通过添加可搜索的表达式轻松实现您要查找的内容。将以下内容添加到您的搜索选项中：

```
<searchable-expression>//well</searchable-expression> 
```

！**

# eclipse - Eclipse Flash Builder 显示 Actionscript 文件的类型层次结构

> ID：12353407
> 
> 赞同：2
> 
> 时间：2012-09-10T14:07:02.230
> 
> 标签：eclipse, flash-builder, hierarchy

在 Eclipse 中，在 Java 透视图中，点击`F4`会打开当前文件夹的类型层次结构。您还可以右键单击 Java 文件并选择 Open Type Hierarchy。（参见[eclipse 帮助页面](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/gettingStarted/qs-6.htm)）

出于某种原因，当在 ActionScript 文件 (.as) 中时，这在 flash builder 插件（flash 透视图）中不起作用，它既`F4`不会出现在右键单击上下文菜单中，也不会出现在右键单击上下文菜单中，即使某些网站建议它应该可以工作。

有没有办法在 flash builder 中或通过将任何其他插件安装到 Eclipse 中来做到这一点？
如果没有，是否有任何工具可以做到这一点？

# java - 获取`之间的文本 ` 和 ` ` 到一个 ArrayList

> ID：12353408
> 
> 赞同：-3
> 
> 时间：2012-09-10T14:07:06.410
> 
> 标签：java, android, eclipse, string, arraylist

我需要从字符串中获取一些特定的文本并将其放入数组列表中，但我不知道从哪里开始。字符串如下所示：

```
String exampleString = "some text I don't know <pre>the text I want to get</pre><pre>Some more text I want to get</pre> some text I don't know" 
```

但问题是我不知道有多少文本部分，`<pre> text </pre>`甚至可能根本没有这些部分。

那么谁能告诉我如何获取这些文本之间的文本`<pre>`以及`</pre>`如何将它们放入数组列表中。

太感谢了！

更新：我所知道的关于我说“我不知道的一些文本”的文本是它不包含`<pre>`或`</pre>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:14:29.757

假设没有嵌入式标签，您可以执行以下操作：

```
private List<String> getText(String text){

    List<String> result = new ArrayList<String>();

    String[] sections = text.split("<pre>");
    int i = 0;
    for (String s : sections) {
        i = s.indexOf("</pre>");
        if (i >= 0)          
           results.add(s.substring(0, i));        
    }  
    return result;
} 
```

运行时的代码示例

说：

```
text = "test text here <pre> item one </pre> and then another item <pre> item 2 </pre> and then some stuff." 
```

所以首先要说明的是：

```
String[] sections = text.split("<pre"); 
```

这定义了一个新的字符串数组并将其分配给调用“text”的字符串拆分函数的结果

此函数将字符串分解为由 分隔的部分，`"<pre>"`因此您可以得到：

```
sections[0] = "test text here" 
sections[1] = "item one </pre> and then another item"
sections[2] = "item 2 </pre> and then some stuff." 
```

所以正如你所看到的，我们现在需要做的就是删除任何东西，`"</pre>"`然后下一点出现：

```
for (String s : sections) 
```

是“for each”循环的开始，该循环将 String s 依次分配给数组部分的每个元素。

因此，对于上面的 3 个字符串中的每一个，我们都这样做：

```
 i = s.indexOf("</pre>");
    if (i >= 0)          
       results.add(s.substring(0, i)); 
```

因此，如果字符串包含`</pre>`，则从开始到 取一个子字符串`"</pre>"`并将其添加到我们的结果中。由于sections[1] 和sections[2] 包含它，它们最终会出现在结果中。

我希望这有帮助？

* * *

以下是我如何实现 JavaJugglers 解决方案以避免使用 while (true)：

```
private List<String> getText(String text){
    List<String> result = new ArrayList<String>();

    int indexStart = text.indexOf("<pre>");
    int indexEnd = text.indexOf("</pre>");
    while (indexStart >= 0 && indexEnd > indexStart) {
        result.add(text.substring(indexStart + 5, indexEnd));
        text = text.substring(indexEnd + 6);
        indexStart = text.indexOf("<pre>");
        indexEnd = text.indexOf("</pre>");
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:38:06.840

```
try {
    Pattern pattern = Pattern.compile("<pre>(.+?)</pre>");
    Matcher matcher = pattern.matcher(yourText);

    while (matcher.find()) {
        //  matcher.group() will contain the match from the previous find() statement
    }
}
catch(Exception ex){} 
```

编辑：更正正则表达式语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:27:21.153

这是一个简单的解决方案：

```
private List<String> getText(String text){

    List<String> result = new ArrayList<String>();

    while(true){
        int indexStart = text.indexOf("<pre>");
        int indexEnd = text.indexOf("</pre>");
        if(indexStart >= 0 && indexEnd >= 0 && indexEnd > indexStart){
            result.add(text.substring(indexStart + 5, indexEnd));
            text = text.substring(indexEnd + 6);
        }
        else{
            break;
        }

    }
    return result;
} 
```

请记住，您可以将此函数更改为更通用，例如将字符串作为参数传递给搜索并动态计算子字符串偏移量。我不建议你使用正则表达式，因为你可能有这样的字符串：

```
<pre>text<pre>more text</pre>some more text</pre> 
```

带有嵌套的“pre”标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:10:49.663

如果您确定 HTML 格式正确，则可以从使用简单[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)方法开始：

```
String foo = "some text I don't know <pre>the text I want to get</pre><pre>Some more text I want to get</pre> some text I don't know";
int preStart = foo.indexOf("<pre>");
int preEnd = foo.indexOf("</pre>", preStart);

if (preStart > -1 && preEnd > preStart)
{
    String inBetweenTags = foo.substring(preStart + 5, preEnd);
    System.out.println(inBetweenTags);
} 
```

[http://ideone.com/OkE9B](http://ideone.com/OkE9B)

否则使用 HTML 解析器。

# php - Doxygen 和许可证/版权信息

> ID：12353409
> 
> 赞同：10
> 
> 时间：2012-09-10T14:07:08.290
> 
> 标签：php, documentation, doxygen

我有一个简单的问题，我找不到挖掘谷歌。

我正在将我的项目文档从**phpDoc**移动到**Doxygen**，但我不知道如何将*@license*和*@copyright*一起编写。

在我的概念中，*@copyright*是为我的“公司”（还不是真实的：P）名称而设计的， *@license*可以使用我正在开发的方式：许多 CreativeCommons 组合之一，GNU、MIT、BSD，“在执照”...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T03:40:03.263

基于[Chris 的回答](https://stackoverflow.com/a/12366061/894042)，您可以使用该`\par`命令创建一个类似于内置`\copyright`命令的块。例如，像这样的别名：

```
ALIASES += "license=@par License:\n" 
```

将允许此评论：

```
/** My main function.

    \copyright Copyright 2012 Chris Enterprises. All rights reserved.
    \license This project is released under the GNU Public License.
*/
int main(void){
    return 0;
} 
```

产生这个输出：

![在此处输入图像描述](../Images/cadab3f3c05d72dec533618a492db9bb.png)

请注意，使用此解决方案，在 之前不需要空行`\license`，并且`{}`不需要语法。如果您尝试为 HTML 以外的格式生成文档，这也不太可能导致问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T08:52:57.467

虽然我同意您在版权和许可信息之间的区别，但似乎 doxygen 没有为这些提供单独的命令。事实上，从命令的文档来看，该命令[`\author`用于](http://www.doxygen.nl/manual/commands.html#cmdauthor)`\copyright`指示许可证信息。

您可以在这里（至少）做两件事：

1.  只需将版权和许可信息组合到`\copyright`命令的参数中：

    ```
    /** My main function.

        \copyright Copyright 2012 Chris Enterprises. All rights reserved.
        This project is released under the GNU Public License.
    */
    int main(void){
        return 0;
    } 
    ```

    这会生成 HTML

    ![doxygen 使用第一个解决方案生成的文档的屏幕截图](../Images/1ed86d27959f32488c759aadcaf4c81a.png)

    这几乎可以肯定是你能做的最简单的事情。

2.  或者，为生成上述图像而编写的 HTML 是

    ```
    <dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012 Chris Enterprises. All rights reserved. This project is released under the GNU Public License. </dd></dl> 
    ```

    我们可以利用它来[定义一个](http://www.doxygen.nl/manual/custcmd.html)名为的新命令`license`，它的行为方式与`copyright`命令类似。将以下内容放入`ALIASES`doxygen 配置文件的字段中

    ```
    ALIASES += license{1}="<dl class=\"section copyright\"><dt>License</dt><dd>\1 </dd></dl>" 
    ```

    并将上述文档块更改为

    ```
    /** My main function.

        \copyright Copyright 2012 Chris Enterprises. All rights reserved.

        \license{This project is released under the GNU Public License.}
    */ 
    ```

    我们得到 doxygen 生成的输出

    ![doxygen 使用第二种解决方案生成的文档的屏幕截图](../Images/af3f1506ac4680ecde07ff88c45818d9.png)

    请注意，在第二个解决方案中有几个怪癖：命令前必须有一个空行，`\license{...}`并且`\license`命令必须将它的参数包装在花括号中。您可以选择使用`\copyright`命令执行此操作，但是通过这些定义的参数的命令`ALIASES`必须带有大括号。

# javascript - Javascript 不会出现在每个页面上

> ID：12353410
> 
> 赞同：0
> 
> 时间：2012-09-10T14:07:14.660
> 
> 标签：javascript, prestashop

我的网站是[http://littlehousearts.com](http://littlehousearts.com)。我正在使用 Prestashop 并添加了 javascript 以在每个页面加载时显示横幅。目前我只有一张横幅图片，它可以在主页和类别页面上正常加载。但它并不总是加载到产品页面上。我能够查看源代码并在源代码中适当地查看脚本标记。我使用的标签是：

```
<script src="banner.js" type="text/javascript"></script> 
```

javascript文件中的代码是：

```
function random_imglink(){
  var myimages=new Array();
  index=0;

  //specify random images below. You can have as many as you wish
  myimages[1]="<a href='http://littlehousearts.com/28_golden'><img src='/img/golden.png' width='943' alt='GOLDEN Acrylic Paints' /></a>";     

  index=Math.floor(Math.random()*myimages.length);

  if (index == 0){
    index=1;
  }

  document.write(myimages[index]);
}
random_imglink(); 
```

我当前加载的横幅位于“赚取积分”下，并显示金色专业品质颜色。

知道为什么这不会在某些页面上加载吗？我对其进行了测试以加载不存在的图像，并且在该位置应该有一个文本可以读取`undefined`，但它甚至不会出现在它丢失的页面上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:11:59.817

这里没有广告

[http://littlehousearts.com/drawing/84-stockmar-wax-crayons-8-colours-supplementary-assortment.html](http://littlehousearts.com/drawing/84-stockmar-wax-crayons-8-colours-supplementary-assortment.html)

它有；

```
<script src="banner.js" type="text/javascript"></script> 
```

这是无效的，因为它在 \drawing 目录中查找；

```
http://littlehousearts.com/drawing/banner.js 404 (Not Found) 
```

因此，更改子目录中脚本的路径或使用 src 属性中的完整 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:11:02.627

问题是您要分配第一个横幅，`myimages[1]`因为数组索引是从零开始的，并且 JavaScript 动态扩展数组，您的数组现在的长度为 2。因此，您的随机数生成器创建索引 0 和 1。您的横幅只会显示上升了一半的时间。另一半时间什么都不会出现。你应该改变

```
myimages[1]="<a href='http://littlehousearts.com/28_golden'><img src='/img/golden.png' width='943' alt='GOLDEN Acrylic Paints' /></a>"; 
```

至

```
myimages[0]="<a href='http://littlehousearts.com/28_golden'><img src='/img/golden.png' width='943' alt='GOLDEN Acrylic Paints' /></a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:13:23.930

1.  将js文件放到你主题的js文件夹中

2.  要在您的站点中添加 js 文件，您有 2 个解决方案：

    *   在主题的 header.tpl 文件中，添加以下代码：
        `<script src="{$js_dir}myfile.js"></script>`

    *   覆盖 FrontController.php（函数 setMedia）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:12:20.393

我的猜测是你有这个问题，因为你使用相对 URL。

然后，`banner.js`指向当前目录中的一个文件。所以，如果你在“http://littlehousearts.com”，它指向“http://littlehousearts.com/banner.js”，但如果你在“http://littlehousearts.com/a/” ，它指向“http://littlehousearts.com/a/banner.js”。

取而代之的是，您应该使用指向站点根目录的相对 URL：

```
<script src="/banner.js" type="text/javascript"></script> 
```

这样，它将始终指向“http://littlehousearts.com/banner.js”

# android - Android - onPostCreate() 代码在 onCreate() 代码之前触发

> ID：12353412
> 
> 赞同：3
> 
> 时间：2012-09-10T14:07:18.837
> 
> 标签：android, sharedpreferences, oncreate

我有两个“验证”代码块，需要按特定顺序执行，但是 onPostCreate() 事件中的代码在 onCreate() 事件中的代码之前触发，我怀疑它可能与首选项商店。

一些伪代码可能有助于解释：

```
onCreate()
{
  prefs = PreferenceManager.getDefaultSharedPreferences(this);
  email = prefs.getString("email", "noemail@noemail.com").toString();
  if (email.equals("noemail@noemail.com")) 
  {
    //user has not supplied email address, show alert dialog
    warning();
  }
} 
```

warning() 方法只是构建一个警告对话框，让用户知道他们需要输入电子邮件地址，当他们单击“确定”时，它会启动 Preferences 活动，以便他们可以提供电子邮件地址。

```
onPostCreate()
{
  carrier = manager.getNetworkOperatorName();
  if(carrier.equals("SPRINT"))
  {
    //call web service to validate carrier compatibility
    //if web service returns "FALSE" call warning2();
  }
} 
```

warning2() 方法与 warning() 做同样的事情 - 它构建一个警告对话框，让用户知道他们的运营商不兼容。

尽管在 onCreate() 中调用了warning()，在onPostCreate() 中调用了warning2()，但当前应用程序在warning() 对话框之前抛出了warning2() 对话框，我不明白为什么。

是不是因为第二个验证调用了一个 Web 服务，而第一个验证是检查 Preference 存储，并且 Web 服务调用在可以访问 Preference 存储之前以某种方式完成？

如何强制在第二次验证和warning2（）之前处理第一次验证和警告（）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:05:52.020

你确定它是先调用warning2对话框，还是你只是先看到它？对话框不会阻止主要活动，因此它可能`warning`首先调用，但之后立即调用`warning2`，这将覆盖第一个对话框。所以你会看到warning2，直到它被解除才看到警告，因为它直接在它下面分层。

# drupal - 在 Drupal 测验模块中显示感谢页面

> ID：12353413
> 
> 赞同：0
> 
> 时间：2012-09-10T14:07:19.353
> 
> 标签：drupal

我在我的 drupal 网站中安装了测验模块。一旦测验完成，我的客户希望看到感谢页面而不是测验结果页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:12:49.423

我还没有真正使用过 Quiz 模块，但我推测可以使用 hook_form_alter 将表单状态重定向传递给它。就像是：

```
function MODULE_form_alter(&$form, &$form_state, $form_id)
{
  if($form_id == 'form_id')
  {
    $form['actions']['submit']['#submit'][] = 'MODULE_form_id_submit_handler';
  }
} 
```

然后使用自定义提交处理程序捕获它：

```
function MODULE_form_id_submit_handler($form, &$form_state)
{
  $form_state['redirect'] = 'path/to/thanks/page'; 
```

# seo - 谷歌分类

> ID：12353414
> 
> 赞同：-1
> 
> 时间：2012-09-10T14:07:21.133
> 
> 标签：seo

如何在 Google 中允许对网站进行此类分类？

![在此处输入图像描述](../Images/de74ddf21e647f8b9f2a27a8623539e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:05:33.130

这是Google 搜索结果中的[附加链接](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)示例。根据谷歌：

> 只有当我们认为附加链接对用户有用时，我们才会显示这些附加链接。如果您网站的结构不允许我们的算法找到好的附加链接，或者我们认为您网站的附加链接与用户的查询无关，我们将不会显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:08:40.930

你不能允许这样。

一段时间后，如果您的网站被频繁访问，最重要的页面将在那里列出，您将能够使用 Google 网站管理员工具对其进行管理。

# ruby-on-rails - Rails I18n，检查翻译是否存在？

> ID：12353416
> 
> 赞同：78
> 
> 时间：2012-09-10T14:07:25.500
> 
> 标签：ruby-on-rails, internationalization, rails-i18n

在 Rails 3 应用程序上工作，我想在输出之前检查翻译是否存在，如果不存在则回退到一些静态文本。我可以做类似的事情：

```
if I18n.t("some_translation.key").to_s.index("translation missing") 
```

但我觉得应该有比这更好的方法。如果将来 Rails 将“翻译缺失”更改为“未找到翻译”怎么办。或者如果由于某种奇怪的原因文本包含“翻译缺失”怎么办。有任何想法吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-09-10T14:11:16.750

根据您所描述的，这应该有效：

```
I18n.t("some_translation.key", :default => "fallback text") 
```

有关详细信息，请参阅[文档](http://guides.rubyonrails.org/i18n.html)。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2015-11-06T00:49:32.777

你也可以使用

```
I18n.exists?(key, locale)
I18n.exists?('do_i_exist', :en) 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-06-15T14:11:41.833

`:default`并不总是一个解决方案。将此用于更高级的情况：

助手/应用程序.rb：

```
def i18n_set? key
  I18n.t key, :raise => true rescue false
end 
```

任何 ERB 模板：

```
<% if i18n_set? "home.#{name}.quote" %>
  <div class="quote">
    <blockquote><%= t "home.#{name}.quote" %></blockquote>
    <cite><%= t "home.#{name}.cite" %></cite>
  </div>
<% end %> 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-09-26T09:50:13.503

那这个呢 ？

```
I18n.t('some_translation.key', :default => '').empty? 
```

我只是觉得感觉更好，更像*是没有翻译*

警告：如果您故意将空字符串作为翻译值，则不起作用。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-09-10T14:11:15.997

使用：默认参数：

```
I18n.t("some_translation.key", :default => 'some text') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-20T15:21:16.557

有时你想在翻译上做更多的事情失败了

```
v = "doesnt_exist"
begin
  puts I18n.t "langs.#{v}", raise: true
rescue
  ...
  puts "Nooo #{v} has no Translation!"
end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-29T16:08:35.830

这是一个技巧，但我认为它有时可能很有用......

**假设你的 i18n 文件中有这个：**

```
en:
  key:
    special_value: "Special value"
    default_value: "Default value" 
```

**你可以这样做：**

```
if I18n.t('key').keys.include?(:special_value)
  I18n.t('key.special_value')
else
  I18n.t('key.default_value')
end
# => "Special value"

if I18n.t('key').keys.include?(:unknown_value)
  I18n.t('key.special_value')
else
  I18n.t('key.default_value')
end
# => "Default value" 
```

*注意：这仅在您正在测试除根密钥之外的任何内容时才有效，因为您正在查看父项。*

事实上，有趣的是在请求父密钥时可以得到什么......

```
I18n.t('key')
# => {:special_value=>"Special value", :default_value=>"Default value"} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-14T14:09:03.333

导轨 4

我正在遍历陪审团成员的一些网址。url 的最大数量为 2，default_lang 为“de”。这是我使用的yaml

```
de:
 jury:
  urls:
   url0: http://www.example.com
   name0: example.com
   url1:
   name1:

en:
 jury:
  urls:
   url0: 
   name0: 
   url1:
   name1: 
```

以下是我检查是否有给定的 url，如果它不存在另一种语言，它将回退到 I18n default_lang“de”。我使用了@albandiguer 的答案，效果很好。

我希望这可以帮助别人：

```
 <% 2.times do |j| %>
        <% if I18n.exists?("jury.urls.url#{j}", "de") &&
           I18n.exists?("jury.urls.name#{j}", "de") %>
          <%= "<br/>".html_safe  if j == 1%>
          <a href="<%= t("jury.urls.url#{j}") %>" target="_blank">
            <%= t("jury.urls.name#{j}") %>
          </a>
        <% end %>
     <% end %> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-12T17:00:17.413

Some versions ago there is a easier way [i18next documentation > API > t](https://www.i18next.com/overview/api#t):

> You can specify either one key as a String or multiple keys as an Array of String. The first one that resolves will be returned.

Example:

`i18next.t ( ['unknown.key', 'my.key' ] ); // It will return value for 'my.key'`

Also you can use [Contexts](https://www.i18next.com/translation-function/context). `t` if not found a *key* into a *context* returns the default value.

# jasper-reports - 如何将父目录中的子报表包含到 iReport 中的报表中？

> ID：12353423
> 
> 赞同：1
> 
> 时间：2012-09-10T14:07:42.277
> 
> 标签：jasper-reports, report, subreport

如何在该报告中包含位于指定报告的父文件夹中的子报告 (.jrxml) 文件？似乎我不能使用相对路径来指定子报告（当我想使用相对路径时编译失败`../parent/subreport.jrxml`）。

# android - JNI 将 C 更改为 C++

> ID：12353424
> 
> 赞同：4
> 
> 时间：2012-09-10T14:07:52.807
> 
> 标签：android, android-ndk, java-native-interface

我有一段简单的代码要在我的 java (android) 应用程序中使用：

```
#include <string.h>
#include <jni.h>

jstring 
Java_com_example_ndk_MainActivity_stringFromJNI( JNIEnv* env,
                                                  jobject thiz)
{
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

如果我使用 C 并调用此文件 *.c - 一切正常，但我想在 C++ 上使用此代码，我将此文件重命名为 *.cpp（并更改 Android.mk）。一切都已编译，但是当我尝试以我在 C 中使用它的方式使用此函数时，我遇到了错误。

*我还修改了函数的主体：

```
 return env->NewStringUTF("Hello from JNI !"); 
```

尝试使用这个：

```
public native String stringFromJNI();

static {
    System.loadLibrary("hello-jni");
} 
```

并得到这样的错误：

```
09-10 17:55:46.410: W/dalvikvm(6339): No implementation found for native Lcom/example/ndk/MainActivity;.stringFromJNI ()Ljava/lang/String;

09-10 17:55:46.410: E/AndroidRuntime(6339): java.lang.UnsatisfiedLinkError: stringFromJNI
09-10 17:55:46.410: E/AndroidRuntime(6339):     at com.example.ndk.MainActivity.stringFromJNI(Native Method)
09-10 17:55:46.410: E/AndroidRuntime(6339):     at com.example.ndk.MainActivity.onCreate(MainActivity.java:22) 
```

我不明白为什么相同的代码在 C 中运行并在 C++ 中失败（运行时）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-10T14:13:12.403

为了允许函数重载，C++ 使用了一种叫做*name mangling*的东西。这意味着 C++ 中的函数名称与普通 C 中的函数名称不同。

要禁止此名称修改，您必须将函数声明为`extern "C"`：

```
extern "C" jstring 
Java_com_example_ndk_MainActivity_stringFromJNI( JNIEnv* env,
                                                 jobject thiz)
{
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:18:39.697

要[在 C++ 代码中使用 C 调用约定](http://www.parashift.com/c++-faq/c-calls-cpp.html)，请在函数周围加上：

```
extern "C" 
{
    /* your C API */
} 
```

# c++ - 阻止 gcc 在包含搜索路径上搜索当前目录“-I-”选项

> ID：12353429
> 
> 赞同：12
> 
> 时间：2012-09-10T14:08:00.083
> 
> 标签：c++, search, gcc, path, include

我们的开发环境大量使用具有本地修改的标头的目录，编译器应该看到这些目录，而不是“提交的”“存储库”版本。

如果标头 A 包含标头 B，则 gcc 在 A 所在的同一目录中查找 B，并且不遵循搜索路径。所以我们使用`-I-`gcc 上的选项来防止这种情况。然后 Gcc 将严格遵循包含路径的层次结构。与 gcc4 一样，该`-I-`选项已弃用并由`-iqoute`. 我无法弄清楚如何使用该`-iquote`选项获得相同的行为，因为我认为它缺乏禁用“当前”目录中搜索的副作用。

见[http://gcc.gnu.org/onlinedocs/cpp/Invocation.html#Invocation](http://gcc.gnu.org/onlinedocs/cpp/Invocation.html#Invocation)

任何想法如何实现相同的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T15:10:12.940

`#include <foo.h>`AFAIK，除了使用表单而不是在代码中之外，没有其他方法可以停用您抱怨的行为`#include "foo.h"`。

ISTR，但我没有找到参考资料，即在不`-I-`为此方面提供另一种机制的情况下弃用的理由是，库通常使用该表单`#include "foo.h"`来确保它们获得自己的内部头文件，并且在某些情况下`foo.h`使用破坏了它们如果`-I-`其他人碰巧在搜索路径上有一个类似名称的文件。

# security - 如何全局禁用 Adob e 脚本安全警告？

> ID：12353438
> 
> 赞同：0
> 
> 时间：2012-09-10T14:08:32.883
> 
> 标签：security, scripting, adobe-reader

## 问题

*   如何永久禁用脚本警告并允许在 Adob​​e Reader X 中编写脚本？
*   这是策略设置、本地设置还是不可能？

## 背景/问题

在我们的企业中，我们使用 Adob​​e Reader X（尽管原因我仍然无法理解）。

我们的企业应用程序之一允许查看和标记 PDF。

但是，其中一些 PDF 会弹出 Adob​​e 脚本警告，并且由于应用程序显示它的方式，用户不能允许脚本，从而使应用程序的某些 pdf 标记操作无用。

**注意**：我们意识到这带来的安全风险，并检查了我们的环境和流程，以确定在这种情况下这是一个合理的行动方案。

## 目标

*   在特定情况下打开 PDF 时删除警告，以便我们的应用程序可以正确使用 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:50:14.403

您可能想玩下设置`HKEY_CURRENT_USER\Software\Adobe\Adobe Acrobat\9.0\JSPrefs`

# android - 立即播放视频

> ID：12353439
> 
> 赞同：0
> 
> 时间：2012-09-10T14:08:38.637
> 
> 标签：android, asynchronous, android-videoview

我正在尝试使用 VideoView 播放流式视频，似乎发生的事情是它必须先下载整个视频，然后才能播放第一秒。显然，我希望它尽快开始播放视频。我可以用 VideoView 做些什么来完成这项工作，或者这是在托管视频 URL 的网站上控制的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:34:43.083

您上传（或链接到）的文件可能无法流式传输，必须在本地播放。

你能检查一下其他视频是否仍然发生这种情况吗？

# php - 在数据库中加密密码有什么意义？

> ID：12353447
> 
> 赞同：2
> 
> 时间：2012-09-10T14:09:01.653
> 
> 标签：php, security, passwords

有人可以为我确认以下内容：

将密码保存到数据库时加密的重点是，如果数据库被黑客入侵，那么黑客将无法知道实际密码，除非他/她有算法和盐等来解密它，因此赢了不能使用相同的密码破解此帐户或其他帐户？

但是我的主要查询是：大概密码是在例如将密码保存到数据库中的 PHP 脚本中加密的，因此解密密码的算法在该脚本中是明确的。那么，如果黑客侵入了网站的服务器或内容管理系统，他/她将能够访问该脚本并解密密码，这是否正确？

因此，本质上，加密仅与您的在线 CMS 或服务器的登录信息相关程度高吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T14:11:20.860

您的密码不应在数据库中加密。

通常做的是获取密码的哈希值，并将其存储在数据库中。哈希是一种单向函数。不可能逆转它并得到结果。为了检查密码是否正确，测试密码（用户输入的密码）用盐重新散列，看它是否与之前的密码匹配。

这样，如果有人获得了数据库的副本，他们只知道哈希值，这需要很长时间才能找到冲突（匹配）。为每个密码添加唯一的盐可确保具有相同密码的用户具有不同的哈希值，这意味着必须为每个密码进行查找哈希冲突的工作（非常慢）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:11:28.520

你没有抓住重点。您不会将加密密码存储在数据库中，而是将密码哈希存储在数据库中。

您不想解密密码，而是想将存储的哈希与计算的哈希进行比较！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:12:16.977

密码实际上并未加密。它们实际上是通过一种**单向**散列算法进行散列的。这意味着“理论上”，攻击者不应该能够反转散列。问题是：许多初学者 Web 开发人员将使用快速的散列算法。这意味着查找表的使用成为一个问题，其中可以使用脚本对一大堆字典单词进行散列，然后将它们与来自数据库的散列密码进行比较。

# kindle - 有谁知道 Kindle SDK 支持哪种语言？

> ID：12353451
> 
> 赞同：0
> 
> 时间：2012-09-10T14:09:17.137
> 
> 标签：kindle, kindle-kdk

我只想知道 Kindle Development Kit 支持哪种语言。我的意思是，这个 SDK ( ) 是否完全支持 UTF-8 `Specially RTL languages`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:12:32.500

它是 Java，完全支持 UTF-8。

[开发者网站](http://kdk.amazon.com/gp/public/gateway)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-16T21:43:03.540

通过随机点击，我找到了 API，或者可能是其中之一：

[https://kdk-javadocs.s3.amazonaws.com/2.0/index.html](https://kdk-javadocs.s3.amazonaws.com/2.0/index.html)

主站点：

[http://kdk.amazon.com/](http://kdk.amazon.com/)

不可用：

[![无法使用](../Images/d8d1b9b3b9e88267e773580700cf4694.png)](https://i.stack.imgur.com/ihYb7.png)

# iphone - 如何将 NSString 与 Push Notification Payload 中的变量进行比较

> ID：12353454
> 
> 赞同：1
> 
> 时间：2012-09-10T14:09:21.663
> 
> 标签：iphone, objective-c, cordova

我有一个 Phonegap 应用程序，我可以在其中接收推送通知。我在有效负载中发送了一个“Pagekey”，它告诉应用在收到推送通知后应用启动后要打开哪个 HTML 页面。

我在`- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions`（片段）中执行以下操作

```
NSDictionary* extras = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
NSString *key = ((NSString*)[extras objectForKey:@"pagekey"]);//get the Pagekey
NSLog(@"key: %@", key); //prints out "2" (2 without the "")

//Load the HTML Page depending on the pagekey
self.viewController.wwwFolderName = @"www";
if([key isEqual:@"2"]){
    NSLog(@"Im in the 2 branch");
    self.viewController.startPage = @"winnings.html";
}else{
    NSLog(@"Im in the else branch");//this branch is executed(unexpected behaviour)
    self.viewController.startPage = @"index.html";
} 
```

pagekey 最初是 JSON 数据，从推送通知服务器发送。任何人都知道如何正确比较字符串以便执行正确的分支？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:13:01.430

尝试`if([key isEqualToString:@"2"])...`

有关 isEqual 与 isEqualToString 的信息，请参阅[此线程](https://stackoverflow.com/questions/1292862/nsstring-isequal-vs-isequaltostring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:45:09.157

类的使用`- (NSComparisonResult)compare:(NSNumber *)decimalNumber`。`NSDecimalNumber`

```
if ([key compare:[NSNumber numberWithInt:2]]==NSOrderedSame) {
    //Equal
} 
```

# c# - 如果用户按 F5 或在 asp.net 中刷新，如何防止数据发送？

> ID：12353461
> 
> 赞同：7
> 
> 时间：2012-09-10T14:09:52.203
> 
> 标签：c#, asp.net, webforms

我有 asp.net 表单应用程序当用户单击 F5 或刷新时出现错误，它将输入上次数据输入的数据。如果用户单击 F5 或刷新，他们是否会阻止发送数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T14:12:24.857

在 ASP.NET 中，通过重定向到自身很容易将页面重置为其初始状态。这里有 3 种方法可以做到：

1.  响应。重定向（请求。路径）；

其中请求的路径以下列形式显示：/MyApp/MyFile.aspx

1.  Response.Redirect(Request.RawUrl);

其中不仅暴露了路径，还暴露了任何查询字符串参数，例如：/MyApp/MyFile.aspx?foo=bar

1.  Response.Redirect(Request.Url.ToString());

其中不仅公开了 path 和 querystring 参数，而且还提供了以下形式的绝对引用：MyServer/MyApp/MyFile.aspx?foo=bar

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T14:12:35.483

一个常见的解决方案称为[Post Redirect Get (PRG)](http://en.wikipedia.org/wiki/Post/Redirect/Get)，在任何帖子之后，浏览器都会立即重定向到 HTTP Get 页面。有关Web 表单实现，请参阅 [asp.net 中的 Post Redirect Get 。](https://stackoverflow.com/questions/5153018/post-redirect-get-in-asp-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:12:37.837

有多种方法可以防止这种情况发生。最简单的方法是转到`Response.Redirect`另一个页面，该页面可以刷新而不会产生任何后果。

```
// process form post
Response.Redirect("anotherpage.aspx"); 
```

# plone - 在我的 Plone 插件中包含 CSS 文件

> ID：12353464
> 
> 赞同：1
> 
> 时间：2012-09-10T14:10:06.040
> 
> 标签：plone

我想向 plone 4 产品添加一个简单的样式表。因此我添加了

```
<browser:resourceDirectory
    name="groovecubes.portlet.gallery.css"
    directory="css"
    /> 
```

到 [产品目录]/browser/configure.zcml，我应该启用它以使用以下语法浏览此文件夹中的样式表：++resource++groovecubes.portlet.gallery.css/mycss.css。但事实并非如此。即使在扩建之后也没有。

因此，找不到 [product dir]/profiles/default/cssregistry.xml 中的每个声明。我错过了什么？是包名吗？

包 main configure.zcml 包含该行

```
 <include package=".browser" /> 
```

应该执行 browser/configure.zcml

但不是。我粘贴了包[configure.zcml](http://pastie.org/4702334)和[browser/configure.zcml](http://pastie.org/4702346)

更新二：

它变得更加奇怪。当我修改文件头`browser/configure.zcml`时，当我尝试启动实例时被识别为格式错误。但是当我修改相关条目时，启动继续正常。

更新三：

我现在已经测试了各种东西，但我发现，`.zcml`文件中的任何格式错误的标签都会被 SaxParser 忽略。在我的开发和生产实例（Plone 4.2 / Plone 4.1）上的每个产品中。这可能是一个新功能吗，我可能错过了？

更新四：

**已解决：**我删除了`browser/configure.zcml`意外使用相同名称的接口声明。这使我的 .css 可用。但我仍然想知道所描述的解析器行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:27:08.387

您声明了名称`groovecubes.portlet.gallery.css`，但尝试访问它`++resource++groovecubes.portlet.gallery`（注意那里的缺失`.css`）。

从注册中使用`++resource++groovecubes.portlet.gallery.css/mycss.css`或删除该`.css`部分。`resourceDirectory`

如果这只是一个错字，请检查 ZCML 文件是否实际正在加载；如果名称匹配，注册本身就很好。

# iphone - 在 Facebook 墙和 facebook 朋友墙上张贴图片

> ID：12353476
> 
> 赞同：4
> 
> 时间：2012-09-10T14:10:46.057
> 
> 标签：iphone, ios, facebook

我对 API 的问题感到非常厌倦，比如 Facebook Graph API、天气 API 等。

我在我的项目中使用了这两个 API。Facebook 的 Graph API 和 Google 天气 API 的天气，但现在项目完成时，这两个 API 都不起作用。Google 天气 API 在 11 月贬值，

我一直在使用的 Facebook 功能（在墙上发布图片和在朋友墙上发布图片）昨天还在工作，但现在不行了。

问题是当我登录时，我会收到消息`The page you requested is not Found`并在链接下方返回上一页。

![在此处输入图像描述](../Images/0fb9a792ba9fa3bb2b5d456d3dc2a77b.png)

当我单击“返回上一页”链接时，它会显示消息：

```
An error has occurred with AppName, please try again
API error code : 100
API error Description : Invalid Parameter
Error_message : cancel_URL URL is not properly formatted 
```

我想知道 Facebook API 的解决方案。每个开发人员都有这个问题吗？如果 API 修改或更改了我们可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:41:07.450

您多久之前更新了您的 facebook API？大约两周前，我不得不删除我的整个 API，重新下载并更改我的应用程序使用的所有发布代码。它完全停止工作，直到应用程序用户抱怨才知道。新 facebook API 的一些必要更改：

如果您查看最新的示例应用程序，Facebook 建议将这些放在您的 appDelegate 中。

```
 #import <FacebookSDK/FacebookSDK.h>

     - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
        NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", nil];
                return [FBSession openActiveSessionWithPermissions:permissions
                                                      allowLoginUI:allowLoginUI
                                                 completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
     if(state==513){
                   //facebook usage has been approved
                   }
                   }];
            }    

     - (BOOL)application:(UIApplication *)application
                        openURL:(NSURL *)url
              sourceApplication:(NSString *)sourceApplication
                     annotation:(id)annotation {
                // We need to handle URLs by passing them to FBSession in order for SSO authentication
                // to work.
                return [FBSession.activeSession handleOpenURL:url];
            } 
```

无论你想在哪里发帖，都可以放这样的东西：

```
 if(facebookEnabled==YES)
    {

     NSString *fbText=[NSString stringWithFormat:@"whatever text you want to post";

            [FBRequestConnection startForPostStatusUpdate:fbText
                                        completionHandler:^(FBRequestConnection *connection, id result, NSError *error) 
{
                                                                                    }];
    } 
```

如果您有任何问题，请告诉我。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:25:02.873

好吧，我不确定这是你的代码的错，但 Facebook 现在有问题。

我在 iOS 中的 FB 应用程序不再工作了。您可以通过使用开发者帐户启用沙盒模式（在 FB 应用程序设置中）重试。这个对我有用。

[http://developers.facebook.com/bugs/463219573709230?browse=search_504fc79a6ea272d92740759](http://developers.facebook.com/bugs/463219573709230?browse=search_504fc79a6ea272d92740759)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:13:32.973

查看我的解决方案，但它仅用于在用户墙上发布 [http://www.developers-life.com/facebook-compose-view.html](http://www.developers-life.com/facebook-compose-view.html)

# mysql - 字典的数据库选择

> ID：12353487
> 
> 赞同：1
> 
> 时间：2012-09-10T14:11:21.267
> 
> 标签：mysql, mongodb, database-design, database, nosql

我想创建一个语义文本分析器。为此，我需要在数据库中存储大量词根——基本语言词汇表，大约有十万个词。是否有任何模式或通用架构以及我应该使用哪种数据库 - 关系或 nosql（可能是 mongodb）？

有 26 个字母，每个字母可以有数千个单词。如果使用关系数据库，我应该为每个字母创建 26 个不同的表，或者如果使用 nosql，我应该将它们全部存储在一起吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:12:33.577

装载 WORDNET 的 Oracle SPARQL 是一个好的开始。

# xcode - XCODE：图像的左侧部分和另一个图像之间的冲突

> ID：12353488
> 
> 赞同：0
> 
> 时间：2012-09-10T14:11:23.763
> 
> 标签：xcode, collision-detection, move, uitouch, cgrect

我正在开发一个游戏，其中玩家沿着屏幕移动牙刷（拖动它）。我希望它在牙刷的左侧（牙膏的一部分）接触另一个图像（牙齿）时做出反应以“清洁它”。我尝试了下一个代码，但我没有得到最好的结果，因为牙齿会与牙刷的孔图像产生反应，即使是手柄也是如此。我认为问题在于“.center”命令。在互联网上搜索后，我没有看到任何东西。我将衷心感谢您的帮助。

```
@synthesize toothbrush, teeth;

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

UITouch *myTouch =[[event allTouches]anyObject];
toothbrush.center=[myTouch locationInView:self.view];
[self collision];
}

-(void)collision {

if (CGRectIntersectsRect(toothbrush.frame, teeth.frame)) {
    cont++; //when the two images collide, the "cont" variable increases its value 
    mensaje.text=[[NSString alloc]initWithFormat:@"%d",cont];
} 
```

# jquery - jQuery > 定位动态创建的选择

> ID：12353496
> 
> 赞同：0
> 
> 时间：2012-09-10T14:11:49.510
> 
> 标签：jquery

我有一个包含 8 个下拉框的表单，其中填充了数据库条目（如果不存在，则为空白）。

例如：

```
<select name='admin_id[]' id='admin_select1st' class='listbox medium'>
<select name='admin_id[]' id='admin_select2nd' class='listbox medium'> 
```

等等通过8个条目。

我想要做的（最终）是当这些选择框之一被更改时，它将使用 jQuery post 并更新文本输入字段。

现在发生的事情是，当我使用以下 jQuery 时，我会收到每个选择框的警报（而不仅仅是我更改的那个）：

```
<script type='text/javascript'>
$("[id^=admin_select]").change(function() {
 alert('Handler for .change() called.');
});
</script> 
```

现在这是预期的行为，因为我告诉它匹配任何以 admin_select 开头的 ID。我需要知道的是，有没有一种方法可以让我使用此代码一次，而不必为每个 admin_select1st、admin_select2nd、admin_select3rd 等写出来，重复我的代码 8 次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:37:21.947

假设输入文本字段 ID id**结果**：

如果您不想通过匹配任何 ID 来保留元素，则可以通过类选择器获取它们；如果需要多次绑定代码部分，可以使用 unbind

```
$(document).ready(function(){
    $(".listbox.medium").each(function() {
        $(this).unbind("change").bind("change", function() {
        $("#result").val(sel.val());
        });
    });
 }); 
```

完整代码在这里

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $(".listbox.medium").each(function() {
                $(this).change(function() {
                    $("#result").val($(this).val());
                });
            });
        });
    </script>
</head>
<body style="background-color: rgb(78, 120, 178);"><br />
    <input type="text" id="result" value="" />
    <select name='admin_id[]' id='admin_select1st' class='listbox medium'>
        <option></option>
        <option>1</option>
    </select>
    <select name='admin_id[]' id='admin_select2nd' class='listbox medium'>
        <option></option>
        <option>2</option>
    </select>
    <select name='admin_id[]' id='admin_select3st' class='listbox medium'>
        <option></option>
        <option>3</option>
    </select>
    <select name='admin_id[]' id='admin_select4nd' class='listbox medium'>
        <option></option>
        <option>4</option>
    </select>
    <select name='admin_id[]' id='admin_select5st' class='listbox medium'>
        <option></option>
        <option>5</option>
    </select>
    <select name='admin_id[]' id='admin_select6nd' class='listbox medium'>
        <option></option>
        <option>6</option>
    </select>
    <select name='admin_id[]' id='admin_select7st' class='listbox medium'>
        <option></option>
        <option>7</option>
    </select>
    <select name='admin_id[]' id='admin_select8nd' class='listbox medium'>
        <option></option>
        <option>8</option>
    </select>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:29:33.067

重复警报中的问题在于，它位于生成 8 个选择框的 while 循环内，因此代码重复了 8 次，因此发出了 8 次警报。

将它移到 while 循环之外，现在它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:19:24.057

正如您的问题下面的评论中提到的那样，您现在所拥有的应该可以工作。

或者你可以尝试这样的事情

```
$("[id^=admin_select]").each(

function( intIndex ){

    $(this).change(function(){
    alert(intIndex);
    });
}
); 
```

我还没有测试它，但它应该做你想要的。

# sql-server-2008 - SQL 2008 合并语句 - 2008 源 - 2005 目标

> ID：12353514
> 
> 赞同：0
> 
> 时间：2012-09-10T14:12:54.087
> 
> 标签：sql-server-2008, sql-server-2005, merge

可以肯定地说，如果我尝试创建一个 MERGE 语句并从 SQL 2008 运行，那么源数据库和目标数据库都必须是 SQL 2008 或更高版本吗？

我正在尝试在 SQL 2008 上运行 MERGE 语句，其中源是 SQL 2008 数据库，目标是 2005 ......但我在所有 2005 表引用下都有红色曲线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:53:32.050

你是在链接服务器上运行它吗？您的第二台服务器必须在以下查询结果中：

```
select * from sys.servers 
```

如果是这样，我建议您从您实例中 2005 年的表中创建 2008 年服务器中的临时表。或者更好的是，创建同义词。这是一个示例代码：

```
CREATE SYNONYM [dbo].[Appointments] FOR [DevOffline].[dbo].[Appointments] 
```

# php - 字符串到数组，用单引号和双引号分隔

> ID：12353518
> 
> 赞同：3
> 
> 时间：2012-09-10T14:13:02.630
> 
> 标签：php, preg-split

我正在尝试使用 php 将字符串拆分为使用`"`或`'`作为分隔符的数组组件。我只想按最外面的字符串拆分。以下是四个示例以及每个示例的预期结果：

```
$pattern = "?????";
$str = "the cat 'sat on' the mat";
$res = preg_split($pattern, $str);
print_r($res);
/*output:
Array
(
    [0] => the cat 
    [1] => 'sat on'
    [2] =>  the mat
)*/

$str = "the cat \"sat on\" the mat";
$res = preg_split($pattern, $str);
print_r($res);
/*output:
Array
(
    [0] => the cat 
    [1] => "sat on"
    [2] =>  the mat
)*/

$str = "the \"cat 'sat' on\" the mat";
$res = preg_split($pattern, $str);
print_r($res);
/*output:
Array
(
    [0] => the
    [1] => "cat 'sat' on"
    [2] =>  the mat
)*/

$str = "the 'cat \"sat\" on' the mat 'when \"it\" was' seventeen";
$res = preg_split($pattern, $str);
print_r($res);
/*output:
Array
(
    [0] => the
    [1] => 'cat "sat" on'
    [2] =>  the mat
    [3] => 'when "it" was'
    [4] =>  seventeen
)*/ 
```

如您所见，我只想按最外层的引号分割，并且我想忽略引号中的任何引号。

我想出的最接近的`$pattern`是

```
$pattern = "/((?P<quot>['\"])[^(?P=quot)]*?(?P=quot))/"; 
```

但显然这是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:26:08.857

您可以使用`preg_split`该`PREG_SPLIT_DELIM_CAPTURE`选项。正则表达式不如@Jan Turoň 的反向引用方法那么优雅，因为所需的捕获组会弄乱结果。

```
$str = "the 'cat \"sat\" on' the mat the \"cat 'sat' on\" the mat";
$match = preg_split("/('[^']*'|\"[^\"]*\")/U", $str, null, PREG_SPLIT_DELIM_CAPTURE);
print_r($match); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:27:39.000

您可以仅用`preg_match`于此目的：

```
$str = "the \"cat 'sat' on\" the mat";
$pattern = '/^([^\'"]*)(([\'"]).*\3)(.*)$/';

if (preg_match($pattern, $str, $matches)) {
  printf("[initial] => %s\n[quoted] => %s\n[end] => %s\n",
     $matches[1],
     $matches[2],
     $matches[4]
  );
} 
```

这打印：

```
[initial] => the 
[quoted] => "cat 'sat' on"
[end] =>  the mat 
```

这是正则表达式的解释：

*   `/^([^\'"]*)`=> 将初始位放在第一个捕获组中的第一个引号（单引号或双引号）之前
*   `(([\'"]).*\3)`=> 在 \2 中捕获从初始引号（单引号或双引号）（在 \3 中捕获）到结束引号（必须与开始引号的类型相同，因此是 \3）对应的文本。正则表达式本质上是贪婪的这一事实有助于从第一个引号到最后一个引号，无论里面有多少引号。
*   `(.*)$/`=> 在 \4 中捕获直到结束

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T15:33:14.613

另一个使用[preg_replace_callback的解决方案](http://cz2.php.net/manual/en/function.preg-replace-callback.php)

```
$result1 = array();
function parser($p) {
  global $result1;
  $result1[] = $p[0];
  return "|"; // temporary delimiter
}

$str = "the 'cat \"sat\" on' the mat 'when \"it\" was' seventeen";
$str = preg_replace_callback("/(['\"]).*\\1/U", "parser", $str);
$result2 = explode("|",$str); // using temporary delimiter 
```

现在您可以使用压缩这些数组`array_map`

```
$result = array();
function zipper($a,$b) {
  global $result;
  if($a) $result[] = $a;
  if($b) $result[] = $b;
}
array_map("zipper",$result2,$result1);
print_r($result); 
```

结果是

```
[0] => the 
[1] => 'cat "sat" on'
[2] =>  the mat 
[3] => 'when "it" was'
[4] =>  seventeen 
```

**注意：**我可能会更好地创建一个执行此壮举的类，因此可以避免使用全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:39:20.537

您可以在中使用反向[引用](http://cz2.php.net/manual/en/regexp.reference.back-references.php)和[不贪婪的修饰符](http://cz2.php.net/manual/en/reference.pcre.pattern.modifiers.php)`preg_match_all`

```
$str = "the 'cat \"sat\" on' the mat 'when \"it\" was' seventeen";
preg_match_all("/(['\"])(.*)\\1/U", $str, $match);
print_r($match[0]); 
```

现在你有了最外层的报价部分

```
[0] => 'cat "sat" on'
[1] => 'when "it" was' 
```

你可以用`substr`and找到字符串的其余部分`strpos`（一种黑盒解决方案）

```
$a = $b = 0; $result = array();
foreach($match[0] as $part) {
  $b = strpos($str,$part);
  $result[] = substr($str,$a,$b-$a);
  $result[] = $part;
  $a = $b+strlen($part);
}
$result[] = substr($str,$a);
print_r($result); 
```

这是结果

```
[0] => the 
[1] => 'cat "sat" on'
[2] =>  the mat 
[3] => 'when "it" was'
[4] =>  seventeen 
```

如果引号位于字符串的开头/结尾，则只需去除最终的空标题/尾随元素。

# ruby - Ruby 字符串分区

> ID：12353525
> 
> 赞同：2
> 
> 时间：2012-09-10T14:13:22.500
> 
> 标签：ruby, string, partitioning

> **可能重复：**
> [将字符串拆分为列表，但保留拆分模式](https://stackoverflow.com/questions/6957858/split-string-into-a-list-but-keeping-the-split-pattern)

```
"hello world, I am the universe".partition(/I am/)
    #=> ["hello world, ", "I am", " the universe"] 
```

有这个输出的红宝石方式是什么？请记住更复杂的字符串。

```
#=> ["hello world, ", "I am the universe"] 
```

复杂的：

```
"hello world, I am the universe, I am the world".some_partitioning_function(/I am/)
#=>["hello world, ", "I am the universe, ", "I am the world"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:53:36.133

方法不存在？添加您自己的：

```
class String
  def some_partitioning_function(delim_str)
    split(delim_str).map.with_index do |str, i|
      i > 0 ? delim_str + str : str
    end
  end
end

"hello world, I am the universe, I am the world".some_partitioning_function('I am')

 => ["hello world, ", "I am the universe, ", "I am the world"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:14:28.620

```
"hello world, I am the universe".split(/,\s(?=I\sam)/,2) 
```

这真的是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:21:29.960

你说这不是@pwned 链接到[的问题](https://stackoverflow.com/questions/6957858/split-string-into-a-list-but-keeping-the-split-pattern)的重复，但它有点。你只需要稍微摆弄一下Ruby。

```
s = "hello world, I am the universe, I am the world" # original string
a = s.split(/(I am)/) 
#=> ["hello world, ", "I am", " the universe, ", "I am, " the world"] 
```

现在我们将使用上面链接的 SO 问题中建议的解决方案。除了我们将跳过数组的第一个元素。

```
sliced = a[1..-1].each_slice(2).map(&:join) 
#=> ["I am the universe, ", "I am the world"] 
```

现在我们将它与我们遗漏的数组元素结合起来。

```
final = [a[0]] + sliced 
#=> ["hello world, ", "I am the universe, ", "I am the world"] 
```

将其放入如下方法中：

```
class String
  def split_and_include(words)
    s = self.split(/(#{words})/)
    [s[0]] + s[1..-1].each_slice(2).map(&:join)
  end
end 

"You all everybody. You all everybody.".split_and_include("all")
#=> ["You ", "all everybody. You ", "all everybody."] 
```

我确信有一种更清洁的方法可以做到这一点，我会在发现更简单的方法后更新答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T20:33:45.033

我认为这个任务应该通过正则表达式来解决，我的正则表达式不是那么整洁，也许你可以稍后修复它。

```
reg = /(.+?(?=I\sam))(I\sam.+?(?=I\sam)|I\sam.+$)/
str = "hello world, I am the universe, I am the world, I am the earth"

str.scan(reg).flatten
=> ["hello world, ", "I am the universe, ", "I am the world, ", "I am the earth"] 
```

# java - m2eclipse 和 RAD 7.x

> ID：12353526
> 
> 赞同：2
> 
> 时间：2012-09-10T14:13:27.433
> 
> 标签：java, jakarta-ee, maven, m2eclipse, rad

我正在尝试在 RAD 7.5.5.4 之上安装 m2eclipse 但没有成功。看起来所有关于在 eclipse 3.4 上安装 m2eclipse（这是 RAD7.5 的基础）的线程都建议从[http://m2eclipse.sonatype.org/sites/m2e-e34/](http://m2eclipse.sonatype.org/sites/m2e-e34/)安装它， 但 eclipse 说“找不到存储库"

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:16:30.340

a) RAD 8.5.1 中引入了 Maven 支持。使用 Installation Manager 安装产品时选择 Maven。 [http://www-01.ibm.com/support/docview.wss?uid=swg27024363#whatsnew_851_maven](http://www-01.ibm.com/support/docview.wss?uid=swg27024363#whatsnew_851_maven)

b) 如果您想从 RAD 7.5.x 开始，您应该访问 RAD Wiki [http://www.ibm.com/developerworks/wikis/display/rad/Home](http://www.ibm.com/developerworks/wikis/display/rad/Home) 并查看文档“Java EE development using Rational Application开发者 7.5.5 和 Maven”

c) 如果您想在 RAD 8.0.x 或 RAD 8.5（不是 8.5.1 或更高版本）上使用 Maven，您应该查看 RAD Wiki 并查看文档“Rational Application Developer and M2Eclipse: Maven in the development workbench”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:05:48.587

您只能使用 IBM Installation Manager 在 RAD 8.5.1 中安装 Maven。您无法使用更新站点安装 Maven。

# perl - 使用 MakeMaker 的手册页

> ID：12353534
> 
> 赞同：1
> 
> 时间：2012-09-10T14:14:04.080
> 
> 标签：perl, manpage, makemaker

我写了一些我想从 MakeMaker 安装的手册页。

我想使用环境变量等环境变量来控制它们的安装位置`INSTALLSITEMAN1DIR*`。

我应该在源代码树的哪个位置放置 man 文件，或者我需要对 Makefile.PL 做些什么来告诉它有关它们的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:09:41.660

你的手册页是什么格式的？您不应该提供完全编译的联机帮助页，因为每个目标主机都需要根据需要使用自己的 groff 或 troff 或其他版本来格式化它们。

如果您以 POD 格式编写联机帮助页，MakeMaker 会自动选择它们并将它们放在正确的位置。

1.  只需`.pod`在最后命名文件，
2.  将它们放在您的`lib`目录中，然后
3.  将它们格式化为 Perl 的[普通旧文档 (POD)](http://perldoc.perl.org/perlpod.html)格式。

如果您需要以其他格式发布您的联机帮助页，我不知道协议是什么。您可能必须自定义`Makefile`ExtUtils [::MakeMaker](https://metacpan.org/module/ExtUtils%3a%3aMakeMaker)生成的。此时，您可能需要查看[Module::Build](https://metacpan.org/module/Module%3a%3aBuild)、[Module::Install](https://metacpan.org/module/Module%3a%3aInstall)或[Dist::Zilla](https://metacpan.org/module/Dist%3a%3aZilla)，因为它们更容易定制。

# regex - sparql 完全匹配正则表达式

> ID：12353537
> 
> 赞同：4
> 
> 时间：2012-09-10T14:14:21.823
> 
> 标签：regex, sparql

我正在使用以下 sparql 查询从 dbpedia 中提取与特定信息框匹配的页面：

```
PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX dbpedia: <http://dbpedia.org/property/>
PREFIX res:<http://dbpedia.org/resource/>
SELECT DISTINCT *
WHERE {
?page dbpedia:wikiPageUsesTemplate ?template .
?page rdfs:label ?label .
FILTER (regex(?template, 'Infobox_artist')) .
FILTER (lang(?label) = 'en')
}
LIMIT 100 
```

在这行查询中：

```
FILTER (regex(?template, 'Infobox_artist')) . 
```

我得到所有以艺术家开头的信息框作为artist_discography 和其他我不需要的信息框。我的问题是：我怎样才能通过正则表达式只获得与 "infobox_artist" 完全匹配的信息框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:33:43.190

由于它是一个正则表达式，您应该能够按如下方式限制搜索：

```
FILTER (regex(?template, '^Infobox_artist$')) . 
```

*   `^`是字符串的开头
*   `$`是字符串的结尾

在正则表达式中。

注意：我没有使用过 sparql，所以这可能行不通。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T00:20:12.993

虽然@beny23 建议的方法有效，但它确实非常低效。使用正则表达式基本上匹配一个精确值（可能）给被查询的端点带来不必要的负担。这是不好的做法。

的值`?template`是一个 URI，所以你真的应该使用值比较（或者甚至像 @cygri 演示的那样内联）：

```
SELECT DISTINCT * {
    ?page dbpedia:wikiPageUsesTemplate ?template .
    ?page rdfs:label ?label .
    FILTER (lang(?label) = 'en')
    FILTER (?template = <http://dbpedia.org/resource/Template:Infobox_artist> )
}
LIMIT 100 
```

您仍然可以轻松地在代码中调整此查询字符串以使用不同类型的信息框。另外：根据您用于创建和执行 SPARQL 查询的工具包，您可能有一些编程替代方案来使查询重用更加容易。

例如，您可以创建一个可以重复使用的“准备好的查询”，并在执行之前将绑定设置为特定值。例如，在 Sesame 中，您可以执行以下操作：

```
String q = "SELECT DISTINCT * { " +
               " ?page dbpedia:wikiPageUsesTemplate ?template . " +
               " ?page rdfs:label ?label . " +
               " FILTER (lang(?label) = 'en') " +
               " } LIMIT 100 ";

TupleQuery query = conn.prepareTupleQuery(SPARQL, q);
URI infoboxArtist = f.createURI(DBPedia.NAMESPACE, "Template:Infobox_artist");
query.setBinding("template", infoboxArtist); 

TupleQueryResult result = query.evaluate(); 
```

（顺便说一句：展示使用 Sesame 的示例，因为我在 Sesame 开发团队，但毫无疑问其他 SPARQL/RDF 工具包具有类似的功能）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:44:24.020

如果您只想进行直接字符串比较，那么您不需要正则表达式！这更简单，更快：

```
SELECT DISTINCT * {
    ?page dbpedia:wikiPageUsesTemplate
        <http://dbpedia.org/resource/Template:Infobox_artist> .
    ?page rdfs:label ?label .
    FILTER (lang(?label) = 'en')
}
LIMIT 100 
```

# hex - 任何人都知道从“30 01 00 00 40 03 00 00”字节中我可以得到值 19 和 104 的哪种方式？

> ID：12353545
> 
> 赞同：1
> 
> 时间：2012-09-10T14:14:36.380
> 
> 标签：hex, byte

我有一个坐标为 19、104 的对象。该对象的坐标由字节“30 01 00 00 40 03 00 00”表示
如果我将第一个字节替换为 00，则 19 变为 16
这 8 个字节是某些应用程序中的坐标值，每个值 4 个字节，但它看起来不像普通的十六进制值......因为数字 19 十六进制代码是 13。
也许你知道？对我来说有很多奇怪的东西，比如大/小端等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:24:51.600

因为每个字节都是反向读取的（Big Endian），所以`30`被解释为 3，`01`被解释为 16。但其余的被读取 ltr。

[什么是大端](http://www.webopedia.com/TERM/B/big_endian.html)

[字节序](http://en.wikipedia.org/wiki/Endianness)

# php - XSLTProcessor 问题

> ID：12353547
> 
> 赞同：0
> 
> 时间：2012-09-10T14:14:45.153
> 
> 标签：php, xslt

我的 XSLT 样式表有以下 XML（注意`table-number`参数：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tet="http://www.pdflib.com/XML/TET3/TET-3.0">
    <xsl:output method="text" />
    <xsl:param name="table-number" select="1" />
    <xsl:param name="page-number" select="0" />
    <xsl:param name="separator-char" select="','" />
    <xsl:variable name="double-quote">"</xsl:variable>

    <xsl:template match="/">
        <xsl:if test="tet:TET/tet:Document/tet:Pages/tet:Page/tet:Content[not(@granularity = 'word' or @granularity = 'page')]">
            <xsl:message terminate="yes">
                <xsl:text>Stylesheet table.xsl processing TETML for document '</xsl:text>
                <xsl:value-of select="tet:TET/tet:Document/@filename" />
                <xsl:text>': this stylesheet requires word info in TETML.</xsl:text>
                <xsl:text>Create the input in page mode "word" or "wordplus".</xsl:text>
            </xsl:message>
        </xsl:if>

        <xsl:choose>
            <xsl:when test="$page-number = 0">
                <xsl:variable name="table" select="(tet:TET/tet:Document/tet:Pages/tet:Page//tet:Table)[$table-number]"/>
                <xsl:if test="count($table) = 0">
                    <xsl:call-template name="table-not-found" />
                </xsl:if>
                <xsl:apply-templates select="$table" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:variable name="table" select="(tet:TET/tet:Document/tet:Pages/tet:Page[@number = $page-number]//tet:Table)[$table-number]"/>
                <xsl:if test="count($table) = 0">
                    <xsl:call-template name="table-not-found" />
                </xsl:if>
                <xsl:apply-templates select="$table" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    .
    .
    .
</stylesheet> 
```

以下 PHP 代码在给定的 XML 输入文件上执行 XSLT：

```
protected function tetml_to_csv() {
    $processor = new XSLTProcessor();

    $xsl = new DOMDocument();
    $xsl->load(realpath('./path/to/xslt/tetml_to_csv.xsl'), LIBXML_NOCDATA);

    $processor->importStylesheet($xsl);

    $tetml = file_get_contents($this->tetmlDoc);

    $tetml = new DOMDocument();
    $tetml->load($this->tetmlDoc);

    //var_dump($processor->getParameter('xsl', 'table-number'));
    //exit();
    $processor->setParameter(NULL, 'table-number', 1);

    file_put_contents($this->filepath . 'output.csv',  $processor->transformToXml($tetml));

    unlink($this->tetmlDoc);
} 
```

当我在不调用`setParameter()`XSLT 的情况下运行代码时，仅将输入 XML 中的第一个表放入输出 .csv 文件（这是预期的行为）。

但是，当我`setParameter()`在执行转换之前调用时，输入 XML 文件中的**所有**表都将传输到输出 .csv 文件，即使我将参数的值设置为默认值。

当我调用`getParameter()`函数时返回`false`（即使返回值应该是参数的值，或者`null`如果未找到参数）。

我尝试更改`namespace`传递给函数的值，但这根本没有帮助。

我究竟做错了什么？这一定很简单，但我一生都无法弄清楚。

**编辑**

我尝试将`value`参数`setParameter()`作为字符串和数字传递；两者都有相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:29:48.123

我不知道 API，但[http://php.net/manual/en/xsltprocessor.setparameter.php](http://php.net/manual/en/xsltprocessor.setparameter.php)建议 PHP 传入的参数是一个字符串，所以当你这样做时`$processor->setParameter(NULL, 'table-number', 1);`，数字可能`1`会作为字符串传递给 XSLT 和在这种情况下，XSLT 中的位置谓词不起作用，除非您将它们明确写为`[position() = $table-number]`.

# javascript - 防止图像在 AngularJs 中呈现

> ID：12353549
> 
> 赞同：5
> 
> 时间：2012-09-10T14:14:50.143
> 
> 标签：javascript, jquery, angularjs

我有这个 jsFiddle：http: [//jsfiddle.net/HMZuh/1/](http://jsfiddle.net/HMZuh/1/)

其中包含此 html

```
<div ng-app ng:controller="ShowHideController">
    <div ng-show='showMe'>
        <img ng-src="{{imageSource}}"/>
    </div>
    <button ng-click='showImage()'> show image </button>
<div> 
```

这个脚本：

```
function ShowHideController($scope) {
    $scope.showMe = false;

    $scope.imageSource = '';

    $scope.showImage = function(){
        $scope.showMe = true;
        $scope.imageSource = 'https://www.google.com/images/srpr/logo3w.png';
    }
} 
```

我得到一个 404，在尚未设置源时找不到图像，当 showMe 为假时，有什么方法可以防止这种情况发生吗？

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:03:11.083

要解决此问题，您可以：

1.  使用`ng-repeat` [http://jsfiddle.net/bGA4T/](http://jsfiddle.net/bGA4T/)
2.  使用[$compile](http://docs.angularjs.org/api/ng.%24compile)并声明您自己的指令
3.  编写自己的`ng-src`指令
4.  ...

我认为有很多方法可以解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:33:23.677

我通过使用来自[http://angular-ui.github.com/](http://angular-ui.github.com/)的 ui-if 对此进行了改进， 而不是使用 ng-hide/ng-show 隐藏/显示，ui-if 根本不渲染元素。

```
<div ui-hide='ImageHasBeenUploaded'>
    <img ng-src='/some/image/path/{{imageName}}/>
</div> 
```

# java - 任何适用于 Java 的 RFC 2397 数据 URI 解析器？

> ID：12353552
> 
> 赞同：9
> 
> 时间：2012-09-10T14:15:00.700
> 
> 标签：java, parsing, data-uri

```
 dataurl    := "data:" [ mediatype ] [ ";base64" ] "," data
   mediatype  := [ type "/" subtype ] *( ";" parameter )
   data       := *urlchar
   parameter  := attribute "=" value

   value := token / quoted-string 
```

根据 RFC 中的这些 BNF，将数据与 mime 类型分开的逗号实际上可以同时出现在 mime 类型和数据中，因此没有简单的方法（即 reg ex）将 URI 分成几部分。因此需要一个完整的解析器。

我想知道有人知道Java中的任何数据URI库吗？我的谷歌搜索没有产生任何结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-29T13:11:31.730

GitHub 上有一个名为[jDataUri](https://github.com/ooxi/jdatauri)的 Java 数据 URI 解析器实现。

免责声明：我是作者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:44:28.927

我最终不得不实现自己的解析器。RFC 提供了 BNF，因此可以实现完整的词法分析器和语法分析器。但是，对于这个简单的案例，我只是使用了简单的扫描+堆栈机制来跟踪引用的字符串并定位分隔逗号。javax.activation 的 MimeType 用于实际的 Mime 解析。

# javascript - 加载 div 标签

> ID：12353554
> 
> 赞同：2
> 
> 时间：2012-09-10T14:15:07.850
> 
> 标签：javascript, jquery

我有 div 标签，在某些事件之后，我将（更改旧内容）插入（更改旧内容）到这个标签中，几个图像和文本，例如：

```
 $("#some_button").on("click", function () {
        $("#mydiv").html("<div>aaaa</div><img src='1.jpg'><div>bbb</div><img src='2.jpg'>");
    }); 
```

我想要，在加载“mydiv”标签完整内容后，警报（“mydiv contonet is loaded”）。也就是说，有些是这样的：

```
$("#mydiv").onload( function () {
     alert("mydiv contonet is loaded");
}); 
```

请告诉，这怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:17:23.950

div 没有 onload 事件。你能做的最好的事情是这样的：

```
<div id="myDiv">I am a div</div>
<script>// do stuff with loaded div</script> 
```

...除非您可以/想要专门解决 div 中支持的内容`onload`，例如图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:19:14.627

`.html()`是同步操作。DOM 的实际更新取决于您的 html 内容。如果您有`<img>`或`<iframe>`标签，它们将需要时间来加载。之后的下一条语句`.html()`应该立即看到新的 html 内容。

您可以使用回调`.load()`

**[http://api.jquery.com/load/](http://api.jquery.com/load/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:19:21.423

预加载（http://stackoverflow.com/questions/476679/preloading-images-with-jquery）你的图像，那么你就不必担心这个用例了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:20:06.507

您必须检查 div 中图像的加载情况，因为在您的情况下没有可用的回调。

典型的方式是，对于每个图像

1.  检查图像是否已加载（检查`if (img.width)`）
2.  在此图像上添加 onload 回调

由于您有多个图像，您可能需要这样的功能：

```
function onLoadAll(images, callback) {
    var n=0;
    for (var i=images.length; i-->0;) {
        if (images[i].width==0) {
            n++;
            images[i].onload=function(){
                if (--n==0) callback();
            };
        }
    }
    if (n==0) callback();
} 
```

你可以这样称呼：

```
onLoadAll(imagesObj, function(){
     // do something with imagesObj when all images are loaded
}); 
```

# php - cakephp 2.2 Acl 不工作（组）

> ID：12353560
> 
> 赞同：1
> 
> 时间：2012-09-10T14:15:20.143
> 
> 标签：php, cakephp, cakephp-2.2

我正在浏览[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html) <--- 这个教程你猜怎么着？;) 它不起作用，我正在使用 cakephp 2.2.2 ...我得到下一个错误

> 未定义索引：id [CORE/Cake/Model/AclNode.php，第 140 行]
> 
> AclNode::node() - 找不到由“Array ([Aro0.model] => User [Aro0.foreign_key] =>)”标识的 Aro 节点错误：发生内部错误。

这个错误是因为我没有在我的用户模型中得到我的 group_id

```
public function bindNode($user) {
            return array('model' => 'Groups', 'foreign_key' => $user['Users']['groups_id']);
        } 
```

所以在这个函数中 $user var 只包含用户名和密码......并且没有 group_id

请大家帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:23:10.540

模型名称必须是单数。

```
'model' => 'Group'
$user['Users']['group_id'] //in your DB, put "group_id" to, not "groups_id" 
```

确保您创建的模型是“组”。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:58:57.797

我刚遇到这个问题。追溯代码问题是我的模型被称为“AdminUser”而不是默认的“User”。更改 userModel 设置为我解决了这个问题。

```
public $components = array(
    'Acl', 
    'Auth' => array(
        'authorize' => array(
            'Actions' => array(
                'actionPath' => 'controllers',
                'userModel' => 'AdminUser'
            )
        )
    ), 
    'Session'
); 
```

查看您的 bindNode 方法，您似乎使用了一个名为“Users”而不是“User”的模型，因此将 userModel 设置为“Users”可能会奏效。

我希望这会有所帮助，
皮特

# ios - “pushViewController” 到自己的类，然后是“performSegueWithIdentifier”，导致“Receiver has no segue with identifier”

> ID：12353561
> 
> 赞同：0
> 
> 时间：2012-09-10T14:15:23.843
> 
> 标签：ios, view, controller, push, segue

我有这个主菜单视图控制器——它不是在我的故事板中定义两次，中间有segues，而是调用`pushViewController`它自己类的一个新实例。就这样：

```
menu_a --> menu_a --> option_x 
```

而不是

```
menu_a --> menu_b --> option_x 
```

推送一次视图控制器后，`navigationController`关联的 segue 会丢失，我收到“Receiver has no segue with identifier”消息。那是，

```
menu_a --> option_y 
```

永远不会产生这种错误。

在过去的三个小时里，我在 Google 上搜索并搜索了 Stack Overflow，但没有成功。我希望有人尝试过同样的事情，并希望详细说明一种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:55:01.967

我不能保证这会奏效，但这里有：

大概是因为 segues 是 Storyboard 的一个特性，调用 performSegue 是指回你的由 Storyboard 实例化的 ViewController。如[本问题](https://stackoverflow.com/questions/12076393/how-to-perform-segue-to-a-nib-from-storyboard)中所述，可以请求您的故事板从其自身实例化一个新的 ViewController，而不是手动创建它（我认为您正在这样做）。

```
UIStoryboard* storyboard = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
UIViewController* dest = [storyboard instantiateViewControllerWithIdentifier:@"CustomController"]; 
```

尝试从以这种方式创建的 ViewController 中的 segue 可能会更幸运，因为它应该具有关联的相同 segue 信息，而手动创建的则不会）。这只是一个理论 - 让我知道它是否有效:)

# entity-framework-5 - 如何使用 EF5 migrate.exe 回滚代码优先迁移？

> ID：12353567
> 
> 赞同：2
> 
> 时间：2012-09-10T14:15:42.260
> 
> 标签：entity-framework-5, entity-framework-migrations

我试图找出 EF5 migrate.exe 的命令行参数，这将允许我手动回滚最新的代码优先迁移 - 即在最新的 DbMigration 中应用 Down() 函数。

注意我有 migrate.exe 工作 - 我可以应用 Up() 函数 - 但我没有在 migrate.exe 帮助页面上看到任何有关回滚的文档：http: [//msdn.microsoft.com/en-us/data /jj618307.aspx](http://msdn.microsoft.com/en-us/data/jj618307.aspx)

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T20:26:56.363

使用`targetMigration`参数并将其设置为您要结束的迁移的名称。如果是旧迁移，则该工具应还原在您选择的迁移之后应用的所有迁移。至少这是它在 powershell 命令中的工作方式。

# java - 我应该将 Cobertura 的哪些工件签入到 SVN？

> ID：12353568
> 
> 赞同：2
> 
> 时间：2012-09-10T14:15:46.277
> 
> 标签：java, svn, cobertura

我将 Cobertura 与我的项目集成，它按预期工作。但是，我不确定将哪些 Cobertura 工件签入到 SVN。

目录结构类似于：

*   主项目目录
*   cobertura.ser
*   cobertura目录
    *   css目录
    *   图像目录
    *   检测目录
    *   js
    *   报告
    *   大量的 html 文件

coberturaDir 中只有超过 1 MEG 的空间，签入该目录对于将来的提交似乎很麻烦。

我的目标是跟踪项目和每个班级的总数。

在 cobertura 工件中，我应该对 SVN 做出什么承诺？

谢谢，肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:22:48.930

他们都没有。

您应该能够通过指向版本控制系统中的旧版本来重新生成 Cobertura 报告。由于报告是软件版本的衍生产品，因此无需存储它们。这与适用于生成的文档（javadoc、doxygen）和从源代码生成的二进制文件（jars、exes、类文件）的原理相同。

如果您需要历史记录，我建议将报告保存在版本控制之外，例如文件服务器。然后，您可以将旧的报告目录压缩到 ZIP 或 tarball 中，以便它们可用，但存档以减少空间并使查找最新数据更容易。您还可以获取最重要的度量和指标并将它们放入单个文件（例如电子表格）中，然后将其放入文件服务器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:19:08.073

就像[托马斯欧文斯](https://stackoverflow.com/a/12353683/368630)说的：没有一个。

啊，你说。我希望能够看到结果并保存它们。我希望能够将它们链接回开发人员，并查看我的测试覆盖率如何随时间变化。

在这种情况下，请使用像[Jenkins](http://jenkins-ci.org)这样的持续集成系统。Jenkins 可以检查基于 XML 的 Cobertura 覆盖率报告并将它们显示为图表。它可以在每次构建时保存这些图表。每个构建都会向您显示谁进行了触发构建的提交以及自上次构建以来覆盖范围的变化。您甚至可以玩*CI 游戏*并向创建单元测试以扩大覆盖范围的开发人员奖励积分。（一等奖是凯迪拉克Eldorado。二等奖是一套牛排刀，三等奖是你被解雇了。）

Jenkins 的设置和工作非常简单。您需要下载 Cobertura 插件，这很容易做到。它会做您想做的事，而无需签入您的 Cobertura 文件。

# spring - 是否有春季批量“工作”范围？

> ID：12353570
> 
> 赞同：9
> 
> 时间：2012-09-10T14:15:55.310
> 
> 标签：spring, spring-batch, spring-batch-admin

我只想知道春季批次中是否有“JOB”范围，例如“STEP”范围？如果没有，我们应该开发我们的自定义范围，还是有更好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:54:04.450

关于此问题的春季批处理问题跟踪器已在一段时间前打开了 jira： [https ://jira.springsource.org/browse/BATCH-1701](https://jira.springsource.org/browse/BATCH-1701)

拉取请求也已提交，希望它会尽快合并，因为我也有这个用例： [https ://github.com/SpringSource/spring-batch/pull/41](https://github.com/SpringSource/spring-batch/pull/41)

同时有多种解决方法，每种都有其缺点，请参阅stackoverflow上的答案： [https ://stackoverflow.com/a/8121102/470107](https://stackoverflow.com/a/8121102/470107)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-07T15:44:54.863

最后，Spring Batch 3.0 现在支持`Job Scope`：[Spring Batch 3.0 中的新增功能](http://docs.spring.io/spring-batch/trunk/reference/html/whatsNew.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T21:09:52.160

如果您的 dataHolder bean 保持状态，您可以尝试使用适当的[bean 范围](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-scopes)，例如原型

# php - 多个替换语句交替替换特定字符

> ID：12353571
> 
> 赞同：0
> 
> 时间：2012-09-10T14:15:59.913
> 
> 标签：php, mysql

我需要从我的数据库中删除一些所有数字、一些特殊字符和文本的特定部分。我有一个可以一次删除一个字符的脚本，但我想一次删除所有字符。

我需要删除的字符和文本如下所示：Dollar, Sterling, Page, .p, ~, . 然后是数字 1-9

例如：我现在有一个看起来像这样的条目：这是一本很棒的书，595 页.p 595，成本仅为 54.95 美元

我需要更新它，使它看起来像这样：这是一本很棒的书，而且只是成本。

下面是我使用的替换功能的代码片段。我想使用此设置，因为我希望它与脚本的其余部分一起使用。$table 是名称，$field 是列名，$search 是需要替换的值，$replace 是要替换的值（在我的情况下为空白）

```
if($typeOK) { 
            // CREATE UNIQUE HANDLE FOR update_sql_array
            $handle = $table.'_'.$field;
            if($queryType=='replace') {
                $sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = REPLACE('.$field.',\''.$search.'\',\''.$replace.'\')';
            } elseif($queryType=='') {
                $sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = REPLACE('.$field.',\''.$keyword1.'\',\''.$replace1.'\')';
            } 
```

如果需要，我可以发布整个脚本。

我尝试过使用多个替换语句，但是当我这样做时，它只执行最后一个替换语句而忽略第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:32:10.630

一些数据库支持称为 TRANSLATE 的功能，但不幸的是，MySQL 不是其中之一。您可以使用嵌套替换来做到这一点：

```
set field = replace(replace(replace( . . . (field, '0', ''), '1', '') . . . , '9', '') 
```

不优雅，但它有效。

“...”旨在显示额外的替换调用，如下所示：

```
set field = replace(field, '0', '')

set field = replace(replace(field, '0', ''), '1', '')

set field = replace(replace(replace(field, '0', ''), '1', ''), '2', '')

. . . 
```

# php - 将头像添加到 PHP 消息传递脚本时，头像出现在目标区域之外

> ID：12353574
> 
> 赞同：0
> 
> 时间：2012-09-10T14:16:04.720
> 
> 标签：php, wordpress

我使用这个微信系统脚本，我想给它添加一个头像，但是，我缺乏 PHP 知识使得这变得困难。

我用来显示头像的代码是：

```
userphoto_thumbnail($user_info, $before = '', $after = '', $attributes = array(width => '40', height => '40'), $default_src = '') 
```

我想将此头像注入到消息脚本的这一部分（在循环内）：

```
$r = $r . '<tr id="wpam-reply-' . $post->post_ID . '-' . $count . '" ' . $style . '>';
$r = $r . '<td style="padding:10px 0 10px 10px; width:40px;"><span title="' . $user_info->display_name . ' (' . $user_info->user_login . ')">' . userphoto_thumbnail($user_info, $before = '', $after = '', $attributes = array(width => '40', height => '40'), $default_src = '') . '</span></td>';
$r = $r . '<td>' . wpam_get_message($reply, $user_info, $options, 2) . '</td>';
$r = $r . '</tr>'; 
```

如果您查看第二行，您将看到我是如何将其添加到那里的。但是，这不会将头像返回应在的位置。它出现在其他一切之外。也许是因为它返回一个字符串而不是数据？我不确定，因为我只是熟悉 PHP 术语。

我确定我没有正确地将头像代码添加到脚本中，您能帮忙吗？

编辑：为了澄清，在 HTML 输出中，头像图像出现在表格之外，而它们应该在`<td style="padding:10px 0 10px 10px; width:40px;">`标签内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:43:45.413

从[文档](http://wordpress.org/extend/plugins/user-photo/)中，它看起来像是`userphoto_thumbnails`打印出图像。您正在尝试将其连接起来。当您调用它时，它会在您创建字符串时被打印出来，因此它出现在错误的位置。

试试这个：

```
echo '<tr id="wpam-reply-' . $post->post_ID . '-' . $count . '" ' . $style . '>';
echo '<td style="padding:10px 0 10px 10px; width:40px;"><span title="' . $user_info->display_name . ' (' . $user_info->user_login . ')">';
userphoto_thumbnail($user_info, $before = '', $after = '', $attributes = array(width => '40', height => '40'), $default_src = '');
echo . '</span></td>';
echo '<td>' . wpam_get_message($reply, $user_info, $options, 2) . '</td>';
echo '</tr>'; 
```

尽管您不再创建`$r`变量，但这会将所有内容打印在正确的位置。

# drag-and-drop - 在 JavaFX 表中拖放？

> ID：12353576
> 
> 赞同：2
> 
> 时间：2012-09-10T14:16:09.117
> 
> 标签：drag-and-drop, javafx-2

我正在为某种播放列表使用 JavaFX 2 表，并且我希望能够在表中拖放行，例如将第 3 行拖放到第 2 行之前，就像您从典型媒体播放器的播放列表中了解的拖放内容一样例如 Winamp、AIMP...

那可能吗？有任何代码示例吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-02T14:08:30.160

试试这个:)

```
@FXML
TableView<String> tableView;
private  ObservableList<String> tableContent = FXCollections.observableArrayList();

//...

tableView.setOnMouseClicked(new EventHandler<MouseEvent>() { //click
            @Override
            public void handle(MouseEvent event) {
                    if(event.getClickCount()==2){ // double click

                        String selected =   tableView.getSelectionModel().getSelectedItem();
                        if(selected !=null){
                            System.out.println("select : "+selected);
                           ...
                        }
                    }
            }
    });

tableView.setOnDragDetected(new EventHandler<MouseEvent>() { //drag
        @Override
        public void handle(MouseEvent event) {
            // drag was detected, start drag-and-drop gesture
            String selected = tableView.getSelectionModel().getSelectedItem();
            if(selected !=null){

                Dragboard db = tableView.startDragAndDrop(TransferMode.ANY);
                ClipboardContent content = new ClipboardContent();
                content.putString(selected);
                db.setContent(content);
                event.consume(); 
            }
        }
    });

tableView.setOnDragOver(new EventHandler<DragEvent>() {
            @Override
            public void handle(DragEvent event) {
                // data is dragged over the target 
                Dragboard db = event.getDragboard();
                if (event.getDragboard().hasString()){
                    event.acceptTransferModes(TransferMode.COPY_OR_MOVE);
                }
                event.consume();
            }
        });

tableView.setOnDragDropped(new EventHandler<DragEvent>() {
            @Override
            public void handle(DragEvent event) {
                Dragboard db = event.getDragboard();
                boolean success = false;
                if (event.getDragboard().hasString()) {            

                    String text = db.getString();
                    tableContent.add(text);
                    tableView.setItems(tableContent);
                    success = true;
                }
                event.setDropCompleted(success);
                event.consume();
            } 
        }); 
```

# c# - 在构建和安装程序版本中引用图标的方式有什么不同吗？

> ID：12353579
> 
> 赞同：0
> 
> 时间：2012-09-10T14:16:29.680
> 
> 标签：c#, visual-studio-2008, installation

在构建和安装版本中引用图标的方式有什么不同吗？当我从 Visual Studio 构建时，表单图标没有任何白色背景，但安装后表单图标有白色背景一直以来，我在想在安装中图标是从 exe 中挑选的，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:22:55.560

图标通常是从 exe 中提取的。当创建窗口（窗体）时，它是控制用于其窗口的图标的应用程序（并且可以在运行时更改图标）。所以它应该使用相同的图标，无论是安装还是在构建后运行。

检查图标编辑器中的图标以确保它具有透明像素。更多细节也很好：这是一个窗口图标，这是 UI 中的图标吗？

更新：您应该使用图标编辑器用透明颜色填充背景。Visual Studio 无法编辑 32 位图标，但您可以尝试编辑 8 位图标（制作备份副本以防 VS 破坏 32 位子图像）。我使用了[IcoFX](http://icofx.ro/)编辑器，它曾经是免费的，但现在不是了。

# jquery - 有没有更简洁的方法来编写这个脚本？

> ID：12353584
> 
> 赞同：0
> 
> 时间：2012-09-10T14:16:53.127
> 
> 标签：jquery, syntax

几周前，我问了以下问题： [简单的 jquery 幻灯片脚本 - 我的 jquery 语法有问题吗？](https://stackoverflow.com/questions/12124606/simple-jquery-slideshow-script-is-there-something-wrong-with-my-jquery-syntax/12124738#12124738)

现在，我想通过在屏幕调整大小时更改容器高度来使该幻灯片脚本更进一步。

这就是我到目前为止所拥有的。我只想知道是否有更清洁的方法来做到这一点？

```
var j$ = jQuery.noConflict();

j$(document).ready(function(){

  j$.fn.slideShow = function (timeOut) {

      var $slidecontainer = this;
      var imgheight =  $slidecontainer.children('img').first().outerHeight();

      $slidecontainer.css({'height': imgheight, 'overflow':'hidden','position':'relative'});
      $slidecontainer.children(':gt(0)').hide();

      setInterval(function () {
          $slidecontainer.children().eq(0).fadeOut(2000).next().fadeIn(2000).addClass('on').nextAll().removeClass('on').end().end().appendTo($slidecontainer);
      }, timeOut || 1000);
  };

  j$(window).load(function () {
     j$('.slideshow').slideShow(6000);
  });

j$(window).resize(function() {
   var imgheight =  j$('.slideshow').children('img').first().outerHeight();
  j$('.slideshow').css({'height': imgheight, 'overflow':'hidden','position':'relative'});
});

}); 
```

# c# - 从共享驱动器运行的 C# 网络连接

> ID：12353586
> 
> 赞同：3
> 
> 时间：2012-09-10T14:17:05.493
> 
> 标签：c#, network-share

我正在尝试在 C# 代码中读取 Web 资源。不幸的是，该代码仅在从本地驱动器运行时有效，并且在从网络共享运行时抛出异常（这就是我需要的）。

```
The underlying connection was closed: Unable to connect to the remote server.
   in System.Net.HttpWebRequest.GetResponse()
   .........
Caused by: 
An invalid argument was supplied
   in System.Net.Sockets.Socket..ctor(AddressFamily addressFamily, SocketType socketType, ProtocolType protocolType)
   in System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress& address, Socket& abortSocket, Socket& abortSocket6, Int32 timeout)
   in System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback)
   in System.Net.Connection.CompleteStartConnection(Boolean async, HttpWebRequest httpWebRequest) 
```

我尝试过类似于（这会引发异常）的代码：

```
request = (HttpWebRequest)WebRequest.Create(url); 
```

以及根据[http://msdn.microsoft.com/en-us/library/2b86d684](http://msdn.microsoft.com/en-us/library/2b86d684)的直接套接字连接。

我怀疑 Windows 中有某种安全设置会阻止网络连接。有可能解决这个问题吗？通过广告策略？或者我的代码中有什么东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:23:28.377

您可以从[“项目位置不受信任”对话框](http://msdn.microsoft.com/en-us/library/bs2bkwxc%28v=vs.90%29.aspx)开始。引用：

> 默认情况下，UNC 路径不是项目的受信任位置。您可以修改文件共享的安全策略以防止出现此对话框。有关详细信息，请参阅[配置安全策略](http://msdn.microsoft.com/en-us/library/7c9c2y1w%28v=vs.90%29.aspx)。

# bash - 通过 shell、awk、bash 进行排序？

> ID：12353587
> 
> 赞同：0
> 
> 时间：2012-09-10T14:17:16.840
> 
> 标签：bash, shell, awk

我正在尝试学习 bash/shell *nix 命令/脚本。因此，我没有编写 python 程序，而是想使用 bash/awk 等来尝试它，但我遇到了困难。我有一个巨大的文本（实际上是 csv ）文件

```
 id_1, id_2, some attributes. 
```

我想根据 id2 对这个文件进行排序？我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:20:15.057

使用 的`--key`选项`sort`。

例如，以下`input.csv`对第二个字段进行排序（使用逗号作为字段分隔符）并将输出写入`output.csv`.

```
 sort --key=2,2 -t',' input.csv > output.csv 
```

`-n`ps如果您进行数字排序，请不要忘记使用该选项。

有关详细信息，请参阅[sort 的手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:19:58.213

您可以使用*sort(1)的***-k**选项

 *> -k, --key=POS1[,POS2]
> 
> ```
>  start a key at POS1, end it at POS2 (origin 1) 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T14:24:21.017

```
sort -t, -k2 filename.csv 
```

我没有shell可以验证，但基本上你需要指定分隔符和排序键

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:18:51.863

签出命令剪切：

```
cat file.cvs | cut -d";" -f 2 | sort 
```

我假设您的 csv 是用分号分隔的，但您可以更改它。

保存为不同的名称：

```
cat file.cvs | cut -d";" -f 2 | sort > newfile.txt 
```*

# entity-framework - 如何在嵌套对象中使用 DBContext.Add/Attach（使用 EF CodeFirst 4.1）

> ID：12353592
> 
> 赞同：4
> 
> 时间：2012-09-10T14:17:23.787
> 
> 标签：entity-framework, code-first, dbcontext

问题：将对象“订单”添加到我的 dbcontext 时，订单的所有嵌套对象都被“读取”到数据库中，尽管嵌套对象是静态数据并且只应在数据库中添加一个引用。

示例：数据库包含 0 个订单和 3 个项目。

我添加了一份包含 2 件商品的订单。

现在数据库有 1 个订单和 5 个项目。订单中的两个项目已“读取”到数据库中，即使这些项目在 db.SaveChanges() 之前具有正确的主键。

我意识到我可以在保存更改之前将现有项目附加到 dbcontext，但这真的是唯一的方法吗？当主键与现有项目匹配时，EF 不能确定项目已经存在吗？

有谁知道这在新版本的 EF CodeFirst 中是否有所不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T20:24:15.307

没有[EF 无法确定实体是现有实体还是新实体](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)- Add 和 Attach 命令都是面向图形的操作。您在图中的一个实体上调用它们，它们会遍历所有关系（及其关系等）并为它们执行操作。

您必须计算图中每个实体的正确状态，例如使用：

```
dbContext.Orders.Add(newOrder);
foreach(var item in newOrder.Items) {
    dbContext.Entry(item).State = EntityState.Unchanged;
}
dbContext.SaveChanges(); 
```

您可以通过调用`Attach(newOrder)`并将 order 设置为`Added`state 来使用反向操作。主要区别在于[独立关联](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)（例如多对多关系）。第一种方法将正确地在订单和每个项目之间添加新关系，而第二种方法不会，除非您手动将每个关系设置为`Added`状态（并且更改关系的状态更复杂）。

# c# - C# Win RT Metro 图 像数据存储和与另一个线程上的 UI 交换

> ID：12353594
> 
> 赞同：0
> 
> 时间：2012-09-10T14:17:30.103
> 
> 标签：c#, multithreading, image, user-interface, microsoft-metro

我正在编写用于图像共享的 Metro 应用程序（有点）。我有单独的项目用于下载和处理与服务器的通信（在单独的线程上运行）。我现在想知道应该使用哪些类来存储图像数据。我记得过去的美好时光，当时有图像课就是为了这个目的。但今天我似乎可以找到类似的东西。有像 BitmapSource 和 DrawingImage 这样的类，但这些是 UI 类，不能/不应该在非 UI 线程中使用。你会建议我存储图像数据并轻松将其传输回 UI 线程，这样我就可以将它用作 ImageSource（最好）。编辑：如果可能的话，我想将图像数据保存在内存中（不保存到画廊/退出时删除）

编辑：到目前为止，我使用的是 IRandomAccessStream，但我不喜欢这个解决方案，因为您只能从中读取一次（然后必须执行重置）。此外 - 我不确定当多个 BitmapImage(s) 将其设置为源时它的行为..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:24:39.153

请参阅[http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/) - WriteableBitmap 可能是票。没有玩过它，但概述似乎在球场上。

# jquery - 检索文件名 javascript/jquery

> ID：12353596
> 
> 赞同：0
> 
> 时间：2012-09-10T14:17:34.120
> 
> 标签：jquery, html

我有一个 html 页面，其中列出了文件夹中的所有文件名和常用文件操作作为它们旁边的锚标记。当用户单击文件操作说删除时，系统会提示用户是否确定要删除选定的文件。它几乎可以完美地工作，但是，当遇到包含空格和特殊字符 ex:(My Track [Ezee's].mp3) 的文件名时，它会失败。是否有解决方法。任何帮助或指向正确方向将不胜感激。谢谢

**HTML**

```
 <tr class="filetable_entry_alt">
<td>
    <input type="checkbox" name="sample10 with spaces (ezee's).jpg" value="file">
</td>
<td>
    <a href="/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg" title="sample10 with spaces (ezee's).jpg" class="thumb" rel="cb">
        <img src="/thumbnail.wft?image=/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg&amp;kind=micro&amp;lm=1308828676000" alt="">
        <b>
            <img src="/thumbnail.wft?image=/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg&amp;kind=micro&amp;lm=1308828676000" alt="" style="width:150px; height:150px;">
        </b>
    </a>
</td>
<td>
    <a href="/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg" title="sample10 with spaces (ezee's).jpg">
        sample10 with spaces (ezee's).jpg
    </a>
</td>
<td>
    06/23/11 12:31 PM
</td>
<td>
    1.76 MB
</td>
<td>
    <a href="#" onclick="return confirmDel('/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg', '/mnt/sdcard/DCIM/?');">
        delete
    </a> | 
    <a href="#" onclick="return confirmRen('/mnt/sdcard/DCIM/','sample10 with spaces (ezee's).jpg','/mnt/sdcard/DCIM/?');">
        rename
    </a>|
     <a href="#" onclick="return confirmCopy('/mnt/sdcard/DCIM/','sample10 with spaces (ezee's).jpg', '/mnt/sdcard/DCIM/?');">
        copy
    </a>
</td> 
```

**JS代码**

```
var selectedFile = 'noFile';
var selectedFile2 = 'noFile';

function confirmDel(t, p) {

    var confirmDeltxt = 'Are you sure you want to delete ' + t + '?';
    selectedFile = decodeURIComponent(t);
    selectedFile2 = decodeURIComponent(p);
    jQuery.prompt(confirmDeltxt, {
        callback: confirmDelcallback,
        buttons: {
            Delete: 'ok',
            Cancel: 'cancel'
        }
    });
    return false;

}

function confirmDelcallback(v, m, f) {
    if (v != undefined && v == 'ok') {

        var form = document.forms.filelist;
        form.action.value = 'delete';
        form.data_file.value = selectedFile2 + "/" + selectedFile;
        form.submit();

    }
}

function confirmRen(p, f, cp) {

    selectedFile = decodeURIComponent(p);
    selectedFile2 = decodeURIComponent(f);

    var confirmRentxt = 'Enter new file name:<br /><br /><input type="text"       id="newPath" name="newPath" value="' + f + '" />';

    jQuery.prompt(confirmRentxt, {
        submit: confirmRensubmit,
        callback: confirmRencallback,
        buttons: {
            Rename: 'ok',
            Cancel: 'cancel'
        }
    });
    return false;
}

function confirmRensubmit(v, m, f) {
    an = m.children('#newPath');

    if (v == 'ok') {
        if (f.newPath == "") {
            an.css("border", "solid #ff0000 1px");
            return false;
        }
    }
    return true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:40:40.470

当您输出 HTML 时，您必须在这样的行中转义 '。生成的 HTML 应如下所示：

```
onclick="return confirmCopy('/mnt/sdcard/DCIM/',
                            'sample10 with spaces (ezee\'s).jpg', 
                            '/mnt/sdcard/DCIM/?');" 
```

（新行只是为了更好的外观）

你将如何做到这一点取决于你的服务器端语言，但用 \' 替换' 应该就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:45:26.197

首先，我不确定您为什么要在网页中使用 /mnt/sdcard 的东西，但是如果您的编辑器具有语法高亮功能，您会立即看到您的代码一团糟。这是一个例子：

```
<a href="#" onclick="return confirmDel('/mnt/sdcard/DCIM/sample10 with spaces (ezee's).jpg', '/mnt/sdcard/DCIM/?');">
    delete
</a> 
```

我什至不确定其中一些是有效的文件路径。除此之外，您需要做的是转义字符。例如，

```
onclick="return confirmDel('/etc/ezze\'s.jpg');" 
```

我不确定您的 jquery 代码，但它似乎也很混乱，如果您检查它会更好。

# jquery - jQuery .each 循环字符串或对象

> ID：12353597
> 
> 赞同：1
> 
> 时间：2012-09-10T14:17:38.973
> 
> 标签：jquery, each

为什么这不起作用？

```
$( ["blog","user","forum"] ).each(function(num,opt) {
    if ( window.location.pathname.indexOf(opt) != -1 ) {
        $('#rb-' + opt).attr('checked','checked');
        return false;
      }
}); 
```

当我输入`$('#rb-blog').attr('checked','checked');`它按预期工作？

`console.log(typeof opt)`产生`string`和期望值。

- - 更新 - -

我刚刚看到 html 正在通过 ajax 写入页面并在`.ready()`:( 感谢大家的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:29:32.243

如果页面未完全加载且`#rb-blog`尚不可用，问题可能是什么。

```
$(document).ready(function(){
    $( ["blog","user","forum"] ).each(function(num,opt) {
        if ( window.location.pathname.indexOf(opt) != -1 ) {
            $('#rb-' + opt).attr('checked','checked');
            return false;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:34:42.173

正如评论中已经指出的那样，`return false`实际上将退出“博客”、“用户”、“论坛”循环，因此一旦一个`pathname.indexOf`条件为真，就会停止检查复选框。

此外，您可能需要添加 a`console.log(window.location.pathname);`以确保此变量包含您正在检查的内容。[也许这是一个外壳问题？](https://stackoverflow.com/a/8993788/540352)

如果您想知道路径名中存在哪些文字，可以使用：

```
var isPresent = [];
$( ["blog","user","forum"] ).each(function(num,opt) {
    if ( window.location.pathname.indexOf(opt) != -1 ) {
        $('#rb-' + opt).attr('checked','checked');
        isPresent.push(opt);
    }
}); 
```

如果您只想知道路径名中是否存在其中一种文字：

```
var isAtLeastOneIsPresent = false;
$( ["blog","user","forum"] ).each(function(num,opt) {
    if ( window.location.pathname.indexOf(opt) != -1 ) {
        $('#rb-' + opt).attr('checked','checked');
        isAtLeastOneIsPresent = true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:45:35.577

解决方案：HTML内容还没有写入页面，所以现在我们等待ajax请求完成，然后我们调用函数更新选择值，像这样......

```
// apply checked to the selected element
function setAsChecked() {
    $.each(["blog","user","forum"], function(num,opt){
        if (window.location.pathname.indexOf(opt) != -1) {
            $('#rb-' + opt, '.radio_menu').attr('checked','checked');
            return false;
        }
    });
}

// $('.radio_menu').ajaxStop(function(){
//  setAsChecked();
// });

// UPDATE! ajaxStop() catches all our ajax events - not cool. Instead, use when
$.when( $.ajax("") ).done(function(){
    setAsChecked();
}); 
```

也许这会让别人头疼！

- - 编辑 - -

被警告！当与 CakePHP 一起使用时，这个解决方案引起了很大的麻烦。当我们在页脚中调用此函数时，布局消失了。

看到这个线程：[CakePHP 在后退和前进按钮上没有布局](https://stackoverflow.com/questions/12403851/cakephp-no-layout-on-back-and-forward-button)

# android - Android、ListView、ArrayAdapter 和格式化文本

> ID：12353601
> 
> 赞同：0
> 
> 时间：2012-09-10T14:18:03.970
> 
> 标签：android, android-listview, android-arrayadapter

我正在尝试完成以下任务：

*   一个 ListView，带有 textview 行
*   当我单击一个项目时，文本变为斜体

斜体的改变可以是别的东西——重点是以某种方式改变文本。

我想使用 Html.fromHtml，因为在格式化文本时很容易处理。但是，我无法让它在我的设计中工作。

在我的主要活动中，我像这样创建和访问 ListView 和 ArrayAdapter：

```
lv = (ListView) this.findViewById(R.id.itemslist); 
```

我有一个创建/更新适配器的方法，以便我可以更新列表的内容：

```
private void displayList () {
   adapter = new ItemArrayAdapter(getApplicationContext(), R.layout.item_listitem, items);
    lv.setAdapter(adapter);
    adapter.setNotifyOnChange(true);

} 
```

我的 OnItemClickListener：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Toast.makeText(ShoppingListApp02Activity.this, "List item selected:" + 
        items.get(position).getId(), Toast.LENGTH_LONG).show();
    items.get(position).setName("<i>" + items.get(position).getName() + "</i>");
    displayList();
}); 
```

如您所见，在选择/单击项目时，我将由 html 标记包围的项目名称发送到 Item 类的 setName() 方法。项目对象的名称（字符串类型）现在是“<i>name</i>”

Item 类中的 setName() 方法：

```
public void setName (String nname) { this.name = nname; } 
```

现在，在 ArrayAdapter 类 (ItemArrayAdaper.java) 中，名称设置在 ListView 的 TextView 行中：

```
itemName.setText(item.name); 
```

如果我保持上面的代码不变，当单击列表中的项目时，名称会更改为：“<i>name</i>.

到目前为止，这和我预期的一样。

但是，从那里我需要将字符串“<i>name</i>”转换为 html 结果，即“ *name* ”。但是当我这样尝试时：

```
itemName.setText(Html.fromHtml(item.name).toString()); 
```

它只是跳过html标签并正常显示名称字符串。

为什么 fromHtml 在这里不起作用？

为了比较，我尝试以相同的方式在我的应用程序（页脚）中设置另一个 TextView 的内容，只需：

```
footerview.setText(Html.fromHtml("<i><font color='#123456'>text</font></i>")); 
```

这工作得很好。但是在路径的某个地方，项目名称周围的标签丢失了。这很奇怪，因为在 ItemArrayAdapter 类中，当我不尝试从 html 转换时，标签就在那里。在同一个地方使用 fromHtml 方法时，它们只是不被尊重。

有任何想法吗？

而且，我知道可能有更好的方法来做到这一点，我也会对此感兴趣:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:58:01.530

不同的方法怎么样？

正如你所说

> 我正在尝试完成以下任务：
> 
> *   一个 ListView，带有 textview 行。
>     
>     
> *   当我单击一个项目时，文本变为斜体

简单地说，初始化：

```
lv = (ListView) this.findViewById(R.id.itemslist);
private void displayList () {
   adapter = new ItemArrayAdapter(getApplicationContext(), R.layout.item_listitem, items);
    lv.setAdapter(adapter);
    adapter.setNotifyOnChange(true);

} 
```

在你的 onItemClickListener()

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Toast.makeText(ShoppingListApp02Activity.this, "List item selected:" + 
        items.get(position).getId(), Toast.LENGTH_LONG).show();

        ((TextView)view).setTypeface(null, Typeface.ITALIC);

}); 
```

够简单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:51:13.090

简单的解决方案：删除 toString()。我没有尝试过，因为我之前遇到过问题，认为传递给 TextView 的数据必须是纯字符串。但是，它就像没有 toString() 的魅力 :-)

# python - 来自可变长度元素的动态表单：wtforms

> ID：12353603
> 
> 赞同：5
> 
> 时间：2012-09-10T14:18:09.413
> 
> 标签：python, forms, wtforms

我正在使用 wtforms，我需要创建一个基于数据库中的信息生成表单定义的东西；动态表单创建。我对需要做的事情有所了解，而我才刚刚开始。我可以创建表单并将它们与 wtforms/flask 一起使用，但是从表单到表单略有不同的数据定义表单目前超出了我目前的技能水平。

有没有人这样做并且有一些意见可以提供？有点模糊的问题，还没有实际的代码。我还没有找到任何示例，但这并非不可能。

```
mass of variable data to be used in a form --> wtforms ---> form on webpage 
```

编辑：

因此，“例如”我们可以使用调查。一项调查由几个 SQLAlcehmy 模型组成。调查是具有任意数量的相关问题模型的模型（问题属于调查，例如多项选择题会变得复杂）。为了简化，让我们使用简单的 json/dict 伪代码：

```
{survey:"Number One",
    questions:{
        question:{type:truefalse, field:"Is this true or false"},
        question:{type:truefalse, field:"Is this true or false"},
        question:{type:text, field:"Place your X here"}
     } 
 }

{survey:"Number Two",
    questions:{
        question:{type:text, field:"Answer the question"},
        question:{type:truefalse, field:"Is this true or false"},
        question:{type:text, field:"Place your email address here"}
     } 
 } 
```

想象一下，而不是这个，数百个具有 5 种以上字段类型的不同长度。如何使用 WTForms 来管理表单，或者我什至需要使用 wtforms？我可以根据需要定义静态表单，但还不能动态定义。

顺便说一句，我在 rails 中使用 simpleform 做过类似的事情，但是当我在 Python atm 中工作时（在不同的事情上，我以调查的事情为例，但问题/字段/答案的事情抽象了一个我需要许多类型的输入）。

所以是的，我可能需要建造某种工厂，这样做会花费我一些时间，例如：

[http://wtforms.simplecodes.com/docs/1.0.2/specific_problems.html](http://wtforms.simplecodes.com/docs/1.0.2/specific_problems.html)

[https://groups.google.com/forum/?fromgroups=#!topic/wtforms/cJl3aqzZieA](https://groups.google.com/forum/?fromgroups=#!topic/wtforms/cJl3aqzZieA)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:41:34.560

只需在运行时将适当的字段添加到基本表单。这是您如何执行此操作的*草图（尽管已大大简化）：*

```
class BaseSurveyForm(Form):
    # define your base fields here

def show_survey(survey_id):
    survey_information = get_survey_info(survey_id)

    class SurveyInstance(BaseSurveyForm):
        pass

    for question in survey_information:
        field = generate_field_for_question(question)
        setattr(SurveyInstanceForm, question.backend_name, field)

    form = SurveyInstanceForm(request.form)

    # Do whatever you need to with form here

def generate_field_for_question(question):
    if question.type == "truefalse":
        return BooleanField(question.text)
    elif question.type == "date":
        return DateField(question.text)
    else:
        return TextField(question.text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T23:09:34.263

```
class BaseForm(Form):
    @classmethod
    def append_field(cls, name, field):
        setattr(cls, name, field)
        return cls

from forms import TestForm
form = TestForm.append_field("do_you_want_fries_with_that",BooleanField('fries'))(obj=db_populate_object) 
```

我对所有表单都使用扩展类**BaseForm**并在类上有一个方便的 append_field 函数。

返回附加字段的类，因为（表单字段的）实例不能附加字段。

# jquery - JQuery mobile 1.1.1 - 使用 $(document).bind('pageinit')，不加载脚本

> ID：12353604
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:09.400
> 
> 标签：jquery, jquery-mobile

我正在使用脚本来使锚元素在单击时将用户导航到我的网页底部。

我做的第一件事是在 $(document).ready() 函数中调用代码，这样一旦加载了 DOM，一切都会执行。然后，当我在移动网站上的页面之间导航时，我注意到我的脚本不起作用：

```
$(document).ready(function(){
    $("#menu-button").click(function(){
            $(document).scrollTop($(".mainFooter").position().top);
         });
    }); 
```

但是我意识到为什么会这样，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件，该事件位于本页面底部的描述中：http: [//jquerymobile.com/demos/1.1.1/docs/api/事件.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

我已经绑定到 pageinit 事件，但是如果我在不同页面之间导航然后单击同一个锚点，则锚点仍然没有将用户导航到页面底部。我很难理解为什么绑定到 pageinit 并没有解决问题。

```
 $(document).bind('pageinit', function() {
    $("#menu-button").on('click.menu', function(){
        $(document).scrollTop($(".mainFooter").position().top);
     });
    }); 
```

我知道可以在 jQuery mobile 中关闭 AJAX，这将允许我的代码使用 $(document).ready() 函数运行。这样做使我能够实现所需的功能。理想情况下，尽管我想让 pageinit 与 AJAX 一起工作，以便每次使用 AJAX 加载页面时锚都可以工作。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:55:05.140

为了工作，您应该在实际加载 jQuery Mobile**之前**`mobileinit`放置该代码。因此，您需要添加指向您的 JS 源代码的链接，如下所示：

 **```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script> // Place mobileinit script here
<script src="jquery-mobile.js"></script> 
```

可以在[文档中找到更多相关信息](http://jquerymobile.com/demos/1.2.0-pre/docs/api/globalconfig.html)

此外，值得注意的是，mobileinit 基本上是用于覆盖全局变量，而不是用于使用您网站的正常功能。

为此目的使用其他事件，如,`pagebeforeshow`等...`pageshow``pagebeforeload`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:52:31.093

我认为您正在尝试将事件绑定到尚未在 DOM 中的东西。试试这个：

```
$(document).bind('pageinit', function() {
    $(document).on('click.menu', '#menu-button', function(){
        $(document).scrollTop($(".mainFooter").position().top);
    });
}); 
```

或者

```
$(document).bind('pagebeforeshow', function() {
    $("#menu-button").on('click.menu', function(){
        $(document).scrollTop($(".mainFooter").position().top);
    });
}); 
```**

# c# - 使用 SAPI 5.4 或 MS Speech SDK v11 的 C# 中的语音识别，使用来自 Skype 呼叫的 MemoryStream

> ID：12353605
> 
> 赞同：5
> 
> 时间：2012-09-10T14:18:13.080
> 
> 标签：c#, skype, memorystream, sapi

我正在尝试让 SAPI 5.4（也是 MS Speech Platform SDK v11）对来自 Skype 通话的音频执行连续语音识别。

我可以使用 SKYPE4COMLib 获取来自 Skype 的音频，并通过发出 ALTER CALL 指令将其推送到 TCP 端口。您可以将 Skype 音频定向到文件或 TCP 套接字。文件工作正常，但我希望它能够实时运行识别，所以使用 TCP 套接字。

然后我构建了一个 TCP 侦听器来收集传入数据（音频原始格式）并将字节数组作为 MemoryStream 传递给 SAPI。我已经设置 SAPI 以期望 16 位、16khz、单声道、PCM 格式的原始音频。但是识别事件永远不会发生？！

我尝试将原始音频保存到磁盘，然后将其读入 SAPI，它工作正常......所以数据本身很好，Skype 正确发送音频。然而，这并不能让我做我需要的持续认可。

SAPI 识别代码使用 WAV 文件或从磁盘加载的原始文件或麦克风可以正常工作。我只是无法让它从 MemoryStream 中工作。

我发现了这篇类似的文章，那里的建议似乎都对我不起作用，讨论似乎已经安静下来。

[流式输入到 System.Speech.Recognition.SpeechRecognitionEngine](https://stackoverflow.com/questions/1682902/streaming-input-to-system-speech-recognition-speechrecognitionengine)

有没有人有关于如何成功让 SAPI 连续识别原始音频中的语音作为 C# 中的 MemoryStream 发送的任何指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T09:18:11.500

当您使用流式音频时，我认为您应该使用 `recognizer.RecognizeAsync`

# python - Sympy -solve() 和solve_poly_system()

> ID：12353608
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:20.007
> 
> 标签：python, solver, sympy

首先，

```
solve_poly_system( seq, *gens, **args), 
```

有谁知道solve_poly_system 的参数到底是什么意思？

我有系统，

```
rd = λk
ua = λk
k = ad 
```

其中 r, u, k 是已知的，a,d, λ 是变量。

当我使用 solve(system, [ a, d, λ]) 我得到错误，

```
NotImplementedError: only zero-dimensional systems supported (finite number of solutions) 
```

文件中出现此错误

```
/usr/lib/python2.7/dist-packages/sympy/solvers/polysys.py", line 148, in solve_reduced_system 
```

当我使用 solve_poly_system(system, [ a, d, λ]) 时，一切正常。

如我所见，solve() 和solve_poly_system() 最终都使用相同的函数来求解系统。对于非双二次，同样的函数是solve_generic(polys, opt)，然后是_solve_reduced_system(system, gens, entry=False)

谁能解释为什么会这样？

我想使用solve()，因为我只对积极的解决方案感兴趣，所以我想使用'force'标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:53:16.027

我解决了我的问题。

起初，在[Mateusz Paprocki](https://groups.google.com/forum/#!topic/sympy/RyaP9tAqTeU)的推荐下，我从[master](http://github.com/sympy/sympy)安装了 sympy 。这解决了solve（）的问题

经过一番努力，我发现我的程序依赖于读取某些输入文件的顺序。这导致solve() 和solve_poly_system() 都退出

```
NotImplementedError: only zero-dimensional systems supported (finite number of solutions) 
```

当我更改读取输入文件的顺序时。

更具体地说，我正在使用 Hadoop 1.0.2 Streaming 。我正在阅读一些文件，每个文件都有特定的、不同的内容和结构。在使用 sympy 模块进行一些操作后，这个总内容给出了一个线性系统。这就是问题所在。

Hadoop Streaming 不会以任何特定顺序读取输入文件。为此，在一起解析不同的文件时必须小心。我的“解析器”期望输入文件按特定顺序。当顺序不同时，文件的操作一直在给一个错误的系统来解决。为此，solve()、solve_poly_system() 引发了 NotImplementedError。这个问题的解决方案是修复我的“解析器”。

最后，从我使用它们的方式来看，solve_poly_system(seq, *gens, **args) 的参数，它们的意思是

*   seq = 序列，等于 0 的方程序列。在我的例子中，序列是一个列表

*   *gens = 在我的例子中，是一个变量列表。根据这些变量，我解决了我的系统。

# javascript - jQuery函数仅在一个页面上不起作用

> ID：12353610
> 
> 赞同：-1
> 
> 时间：2012-09-10T14:18:27.670
> 
> 标签：javascript, jquery

嗨，我有一个平滑滚动的 jQuery 函数，它适用于除一个以外的所有页面。无效页面的链接如下。子导航中的蓝色“免费测试”链接不起作用。以前有没有人遇到过这个奇怪的问题，可能是什么原因造成的？

[http://tinyurl.com/c364wwx](http://tinyurl.com/c364wwx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:20:48.613

您的页面正在导入 jQuery，然后调用`jQuery.noConflict()`. 因此没有`$`符号，但这显然是您的代码所期望的。控制台报错。

您使用的 jQuery 版本非常非常旧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:21:11.293

我收到以下错误：

```
TypeError: $ is not a function
$('html,body').animate({scrollTop: $("#"+id).offset().top},'slow'); 
```

那是因为你有

```
jQuery.noConflict(); 
```

去掉它。

如果您想了解更多信息，请参阅[http://api.jquery.com/jQuery.noConflict/ 。](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T14:22:09.423

您已`jQuery.noConflict();`激活，要么删除此行，要么使用 jQuery() 代替 $。（还要检查控制台是否有错误）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T14:24:20.623

删除 noconflict 声明，或将 goToByScroll 函数中的代码更改为：

```
jQuery('html,body').animate({scrollTop: 
                            jQuery("#"+'freeTest').offset().top
                            },'slow'); 
```

# objective-c - 当UIVIew隐藏在sameView中时如何为UIview设置动画

> ID：12353611
> 
> 赞同：0
> 
> 时间：2012-09-10T14:18:28.210
> 
> 标签：objective-c, ios, xcode, ipad, uiview

我有一个视图，我拖了一个视图并分配了它

IBOutlet UIView ***popupIpadView** 其中包含 tableview 文本字段和其他按钮。

我的要求是，在加载时，**popupIpadView**最初将被隐藏。当我单击一个按钮时，将出现此**PopupIpadview**。但我希望这个视图出现在动画过渡中，比如从左到右，反之亦然。我怎样才能做到这一点？

例如，我正在使用下面的代码，但没有任何反应。

```
- (IBAction)showPopover:(UIButton *)sender
{
    popupiPhoneView.hidden = NO;
    popupiPhoneView.backgroundColor = [UIColor colorWithWhite:0 alpha:.5];        

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationDuration:3.0];
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:57:42.187

不要使用 Hidden 属性，而是将 alpha 值设置为 0，并将原点设置在可见屏幕的左侧，例如 -320 x 和 0 y。

在您的动画块中，将 alpha 设置为 1，同时传递适当的过渡样式。最初将您的视图设置为

```
yourview.alpha = 0;
yourview.x = -320; 
```

然后在转换代码中将其设置为适当的坐标。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:window cache:YES];

yourview.alpha = 1;
yourview.x = 320; // new coordinates
[UIView commitAnimations]; 
```

# jquery - 简单解释为什么数据表使用 $.fn.dataTableExt.afnSortData

> ID：12353612
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:29.773
> 
> 标签：jquery

我在外面看到一个帖子：

[$.fn 是什么意思](https://stackoverflow.com/questions/4083351/what-does-jquery-fn-mean)

但是我还是不明白。有人可以用非常简单的术语向我解释这一点。为什么他们选择以这种方式指定它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:28:28.263

`$.fn`只是`jQuery.prototype`. 要编写一个 jQuery[插件](http://docs.jquery.com/Plugins/Authoring)，例如 DataTables，通常首先将一个新的函数属性添加到`$.fn`.

简单来说，当您编写jQuery 原型时，`$.fn.pluginName`您通过添加一个调用它的新函数来***扩展***jQuery[原型](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)`pluginName`。这样，您可以使用例如`$("#myElement").pluginName()`. 这基本上就是 DataTables 所做的，它为 jQuery 提供了一个名为`dataTablesExt`.

现在，这个插件有几个属性。其中之一，被称为`afnSortData`（您也可以参考 using `jQuery.prototype.dataTableExt.afnSortData`）。这样，插件属性的***作用域***就是`dataTableExt`对象/插件。DataTables 可以选择在全局命名空间中定义它，但是这样的话，有人可以覆盖`afnSortData`，比如说，`{}`破坏插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:24:37.357

在 jQuery 中，`fn`属性只是原型属性的别名。

`jQuery`标识符（或`$`）只是一个*构造函数*，用它创建的所有实例都继承自构造函数的原型。

* * *

资料来源：[jQuery.fn 是什么意思？](https://stackoverflow.com/questions/4083351/what-does-jquery-fn-mean)

所以它只代表`jQuery.prototype`.

```
$.fn === jQuery.prototype 
```

**.prototype 是什么？**

在 JavaScript 中，原型是提供继承的机制。

示例：`String.prototype`指的是字符串的原型对象，其中包含（除其他外）可以在任何字符串上调用的方法。

# android - 适用于 Android 的 trigger.io 启动画面

> ID：12353615
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:44.387
> 
> 标签：android, trigger.io

目前无法更改 android 的启动画面。每次我更改 config.json 中的启动图像设置时，都会显示旧的 trigger.io 启动画面。顺便说一句，这适用于 iOS。

Afaik，hojoki 还显示 trigger.io 闪屏...

```
"launchimage": {
  "android": "img\\splash_320480.png",
  "android-landscape": "img\\splash_320480.png",
  "ipad": "img\\splash_320480.png",
  "ipad-landscape": "img\\splash_320480.png",
  "ipad-landscape-retina": "img\\splash_320480.png",
  "ipad-retina": "img\\splash_320480.png",
  "iphone": "img\\splash_320480.png",
  "iphone-retina": "img\\splash_320480.png"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:02:46.703

此问题已在我们的 v1.4.15 平台版本中修复 - 如果您的 App Config 中有 v1.4，您将自动选择该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:13:17.910

如果您将图像放在根目录下，它应该可以工作。我认为路径解析存在错误，它不适用于子目录。（至少我上次尝试时是这样的）

# c++ - 关于 C++ 中 double 和 int 之间转换的奇怪结果

> ID：12353616
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:50.507
> 
> 标签：c++, c, type-conversion

我的问题：

尝试找出以下 C++ 片段的结果：

```
#include <iostream>

int main(int argc, char* argv[])
{
    double a = 5.1;
    int b = a * 100;
    std::cout << b << std::endl;

    double c = 6.1;
    int d = c * 100;
    std::cout << d << std::endl;
} 
```

在 Windows 上，我用 VS2008 SP1 编译并运行了上面的代码，得到：

```
509
610 
```

在 Linux 上，我使用 g++ 编译并运行相同的代码并获得：

```
509
609 
```

代码有什么问题？

抱歉，我试图为这个问题找到一个标题，因此我可以四处搜索。不过这个问题我也说不上来，就直接在这里介绍了。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:24:30.430

`double`不是一个*确切*的类型，你可以通过应用[`std::numeric_limits`typetrait](http://en.cppreference.com/w/cpp/types/numeric_limits/is_exact)看到：

```
#include <limits>

static_assert(std::numeric_limits<double>::is_exact == false); 
```

因此，涉及双打的计算只是近似的，你观察到的并没有错。

*您的代码没有问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:29:34.910

通常，双精度（和浮点）是二进制的，您只能精确表示 2 的幂的分数。因此，如果小数部分仅由 1/2、1/4、1/8 等术语组成, 1/16 等浮点数或双精度数将是精确的（当然，除非您遇到精度问题）。

现在，“0.1”是 1/10，实际上是 1/2 * 1/5。5 不是 2 的幂，因此“0.1”不能用二进制表示，只能近似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:55:29.483

`double``int`除非另有说明，否则转换是通过截断来完成的。在您的情况下，由于在四舍五入时会丢失精度（以及 MSalters 指出的少量厄运，因为这只发生在某些“边缘”值附近）。

以下是编译器/操作系统之间行为差异的几个可能原因：

*   优化：一些编译器以无限精度实现编译时浮动操作。由于您的代码很简单，因此编译器可以在编译时以无限精度进行计算。（您检查过生成的 ASM 代码吗？）
*   使用不同的内部表示。由于您正在运行 Windows，因此您使用的是 x86 或 x86-64 CPU，这些 CPU 实现了超过 64 位的浮点数，请参阅[此处](http://en.wikipedia.org/wiki/Extended_precision)了解一些详细信息。
*   完全使用不同的架构（您的操作系统都是 64 位吗？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T15:25:50.917

正如Kernighan 和 Plauger*的编程风格元素*的规则之一所述。

> `10.0`时代`0.1`几乎没有`1.0`

这意味着浮点数的行为不像数学实数。有一个标准（IEEE 754）如何实现浮点数，但它不是 C 标准的一部分，而仅在 C# 中。

# c - 有人可以解释这个函数指针语法吗？

> ID：12353619
> 
> 赞同：3
> 
> 时间：2012-09-10T14:18:59.273
> 
> 标签：c, dos, function-pointers

我得到了一些供应商提供的用 C 语言编写的驱动程序代码，该代码在 DOS（是的 DOS）上运行以访问硬件。我正在尝试弄清楚这段代码的作用，到目前为止没有太大的成功。特别是我在理解以下代码时遇到问题

```
void (interrupt *oldcan)(void);

void  interrupt far  can_isr(void)
{
    /* function body */
} 
```

我猜第一行定义了一个函数指针，但我从未见过`interrupt`我假设的词是某种 DOS API 函数。我以前从未使用过 DOS，上面的函数定义在我看来它有 3 个返回类型 - ，`void`这显然是不可能的。该函数实际上具有 void 返回类型，但是??的含义是什么？任何帮助将不胜感激。`interrupt``far``interrupt far`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:22:28.490

interrupt 关键字（曾经）用于创建中断处理程序——即，该函数旨在由中断调用。`far`意味着当它返回时，它期望 CS 和 IP 都在堆栈上（对于任何通过中断调用的东西都是给定的）。

最常见的用途可能是用于将使用串行端口的代码——BIOS/DOS 串行端口处理程序会在更高的速度（最初大约 300 bps）下丢失字符，因此您必须安装自己的处理程序. 当字符出现在串行端口时，串行端口硬件将断言一条中断处理器的行。基于此，将调用您的中断处理程序例程。您的代码需要将数据从串行端口读入内存（并执行一些操作，例如重新启用中断）并返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:21:25.360

它很可能是特定于编译器的扩展，用于以某种非常特定于平台的方式将函数“安装”为中断处理程序。

标准 C 语言中没有`interrupt`关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:23:49.110

查看链接[http://www.phanderson.com/printer/periodic_interrupt.html](http://www.phanderson.com/printer/periodic_interrupt.html)。该链接讨论了与代码示例一起使用的中断 - 请注意它非常简短。

还可以看这篇文章：[远指针和近指针有什么区别？](https://stackoverflow.com/questions/1749904/difference-between-far-pointer-and-near-pointer-in-c)有关 far 关键字的信息。

# facebook - Facebook应用程序上的搜索功能

> ID：12353623
> 
> 赞同：1
> 
> 时间：2012-09-10T14:19:14.653
> 
> 标签：facebook

我正在构建一个 Facebook 画布应用程序，该应用程序具有针对应用程序内容的搜索功能。我已阅读 Facebook 开发者政策，他们在第 III-A-3 点中声明： (a) 您不得在通过 Facebook 社交渠道分发的内容中包含广告、交叉推广其他应用程序或提供网络搜索功能，并且 ( b) 您只能使用 Facebook.com 应用程序中出现在此广告提供商列表中的公司的广告或类似货币化相关产品或服务。

1.  我是否使用仅限于我的应用程序内容的自定义搜索模块违反了规则？
2.  如果我想通过此搜索功能获利，例如在结果排名中，我可以实施我的自定义系统还是需要向其中一个广告提供商注册？
3.  如果上述 2 个问题的答案是“否”，那么对我来说最好的解决方案是什么？

# android - 如何关闭Android上的所有声音

> ID：12353629
> 
> 赞同：7
> 
> 时间：2012-09-10T14:19:42.297
> 
> 标签：android

我是 Android 上的新开发者。我有一个带有 ToggleButton 的视图，当按下时会关闭所有声音，直到再次按下 ToggleButton。

目前，我有这个代码。我可以看到正在发生的日志记录事件，但声音没有关闭。谁能提供一些见解？

```
 public void onToggleClicked(View view) {
    Log.i("onToggleClicked", "ToggleClick Event Started");
    // Is the toggle on?
    boolean on = ((ToggleButton) view).isChecked();

    if (on) {
        Log.i("onToggleIsChecked", "ToggleClick Is On");
        //turn off sound, disable notifications
        amanager.setStreamMute(AudioManager.STREAM_SYSTEM, true);
        Log.i("STREAM_SYSTEM", "Set to true");
        //notifications
        amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, true);
        Log.i("STREAM_NOTIFICATION", "Set to true");
        //alarm
        amanager.setStreamMute(AudioManager.STREAM_ALARM, true);
        Log.i("STREAM_ALARM", "Set to true");
        //ringer
        amanager.setStreamMute(AudioManager.STREAM_RING, true);
        Log.i("STREAM_RING", "Set to true");
        //media
        amanager.setStreamMute(AudioManager.STREAM_MUSIC, true);
        Log.i("STREAM_MUSIC", "Set to true");

    } else {
        Log.i("onToggleIsChecked", "ToggleClick Is Off");
        // turn on sound, enable notifications
        amanager.setStreamMute(AudioManager.STREAM_SYSTEM, false);
        Log.i("STREAM_SYSTEM", "Set to False");
        //notifications
        amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, false);
        Log.i("STREAM_NOTIFICATION", "Set to False");
        //alarm
        amanager.setStreamMute(AudioManager.STREAM_ALARM, false);
        Log.i("STREAM_ALARM", "Set to False");
        //ringer
        amanager.setStreamMute(AudioManager.STREAM_RING, false);
        Log.i("STREAM_RING", "Set to False");
        //media
        amanager.setStreamMute(AudioManager.STREAM_MUSIC, false);
        Log.i("STREAM_MUSIC", "Set to False");
    }
    Log.i("onToggleClicked", "ToggleClick Event Ended");
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T15:31:05.760

我能够通过将事件更改为侦听器来使其工作

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //create the toggle button ref and instantiate
    ToggleButton tb = (ToggleButton)this.findViewById(R.id.tglSetStatus);
    tb.setTextOff(getString(R.string.available_status));
    tb.setTextOn(getString(R.string.driving_status));
    //default to being available
    tb.setChecked(false);
    // attach an OnClickListener
    tb.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // your click actions go here
            Log.i("onToggleClicked", "ToggleClick Event Started");
            //an AudioManager object, to change the volume settings  
            AudioManager amanager; 
            amanager = (AudioManager)getSystemService(AUDIO_SERVICE);

            // Is the toggle on?
            boolean on = ((ToggleButton)v).isChecked();

            if (on) {
                Log.i("onToggleIsChecked", "ToggleClick Is On");
                //turn ringer silent
                amanager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                Log.i("RINGER_MODE_SILENT", "Set to true");

                //turn off sound, disable notifications
                amanager.setStreamMute(AudioManager.STREAM_SYSTEM, true);
                Log.i("STREAM_SYSTEM", "Set to true");
                //notifications
                amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, true);
                Log.i("STREAM_NOTIFICATION", "Set to true");
                //alarm
                amanager.setStreamMute(AudioManager.STREAM_ALARM, true);
                Log.i("STREAM_ALARM", "Set to true");
                //ringer
                amanager.setStreamMute(AudioManager.STREAM_RING, true);
                Log.i("STREAM_RING", "Set to true");
                //media
                amanager.setStreamMute(AudioManager.STREAM_MUSIC, true);
                Log.i("STREAM_MUSIC", "Set to true");

            } else {
                Log.i("onToggleIsChecked", "ToggleClick Is Off");

                //turn ringer silent
                amanager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                Log.i(".RINGER_MODE_NORMAL", "Set to true");

                // turn on sound, enable notifications
                amanager.setStreamMute(AudioManager.STREAM_SYSTEM, false);
                Log.i("STREAM_SYSTEM", "Set to False");
                //notifications
                amanager.setStreamMute(AudioManager.STREAM_NOTIFICATION, false);
                Log.i("STREAM_NOTIFICATION", "Set to False");
                //alarm
                amanager.setStreamMute(AudioManager.STREAM_ALARM, false);
                Log.i("STREAM_ALARM", "Set to False");
                //ringer
                amanager.setStreamMute(AudioManager.STREAM_RING, false);
                Log.i("STREAM_RING", "Set to False");
                //media
                amanager.setStreamMute(AudioManager.STREAM_MUSIC, false);
                Log.i("STREAM_MUSIC", "Set to False");
            }
            Log.i("onToggleClicked", "ToggleClick Event Ended");
        }
    }); 
```

我通过查看这些问题找到了输入：[如何通过 Android API 关闭所有声音和振动](https://stackoverflow.com/questions/5848146/how-to-turn-off-all-sounds-and-vibration-via-android-api) ，这个：[将 onClickListener 附加到 ToggleButton](https://stackoverflow.com/questions/7141531/attach-onclicklistener-to-togglebutton)

# android - KEYCODE_POWER 仅在长按时发送

> ID：12353647
> 
> 赞同：1
> 
> 时间：2012-09-10T14:20:49.877
> 
> 标签：android, keycode, dispatch

为什么此键仅在长按时才会发送。我试图让它正常按下电源按钮会使铃声流中当前正在播放的音频静音。它只适用于长按，正常按会关闭屏幕。我需要它在普通印刷机上工作。

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {

        switch (event.getKeyCode()) {
        case KeyEvent.KEYCODE_POWER:
            if (ringer == null)
                return super.dispatchKeyEvent(event);

            if (!mute)
                if (ringer.isRinging())
                    ringer.stopRing();
                else if (!ringer.isRinging())
                    ringer.ring();

            mute = !mute;
            return true;
        }
return super.dispatchKeyEvent(event); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:49:24.213

如此处所述[https://stackoverflow.com/a/15828732/1065357](https://stackoverflow.com/a/15828732/1065357)

如果您在活动或具有焦点的视图中覆盖此方法，则用户无法长按电源按钮

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    if(!hasFocus) {
        Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
        sendBroadcast(closeDialog);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:35:01.690

捕捉按下的 POWER 按钮需要的不仅仅是这些。

这是由 Google 故意完成的，因此恶意应用程序无法通过阻止任何用户输入和阻止硬件按钮来接管您的设备。除此之外，只有在有充分理由的情况下才应覆盖 POWER 按钮。

如果您想知道如何操作，请访问[此](https://stackoverflow.com/questions/3703071/how-to-hook-into-the-power-button-in-android)问题并查看评分最高的答案。

PS。下次搜索。

# date - 日期格式验证仅为 dd/mm/yyyy

> ID：12353650
> 
> 赞同：1
> 
> 时间：2012-09-10T14:20:56.887
> 
> 标签：date, jquery-ui-datepicker

我有一个 Jquery datepicker，它选择 dd/mm/yyyy 格式的值。但是，如果所选日期随后被编辑为 dd/mm/yyyy 以外的错误格式，那么我需要显示一条验证错误消息，指出日期应为 dd/mm/yyyy 格式。请帮助解决这个问题。输入的日期只能是 dd/mm/yyyy 格式。比较日期格式的逻辑或正则表达式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:23:50.297

你的代码在哪里？

根据文档（http://docs.jquery.com/UI/Datepicker）：

它说你更新时间格式是这样的：`$( ".selector" ).datepicker( "option", "altFormat", "yy-mm-dd" );`

# c# - 您如何确定整数值列表的模式？

> ID：12353651
> 
> 赞同：1
> 
> 时间：2012-09-10T14:20:56.093
> 
> 标签：c#

```
List<int> lstNumbers = new List<int>(); 
```

由流式阅读器实例化的数字列表

```
private void GetMode()
        {
            lblMode.Text +=  //How do I determine the mode of the data
        } 
```

对不起，这真的很愚蠢......谁能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:24:53.753

来自[http://www.remondo.net/calculate-mean-median-mode-averages-csharp/](http://www.remondo.net/calculate-mean-median-mode-averages-csharp/)

```
public static IEnumerable<double> Modes(this IEnumerable<double> list)
    {
        var modesList = list
            .GroupBy(values => values)
            .Select(valueCluster =>
                    new
                        {
                            Value = valueCluster.Key,
                            Occurrence = valueCluster.Count(),
                        })
            .ToList();

        int maxOccurrence = modesList
            .Max(g => g.Occurrence);

        return modesList
            .Where(x => x.Occurrence == maxOccurrence && maxOccurrence > 1) // Thanks Rui!
            .Select(x => x.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:49:43.613

因为这听起来像是一个学生问题，而语言是 C#，所以我希望 LINQ 查询是不可能的（尽管问题本身必须说明它）。对于 LINQ 查询，请查看另一个答案。我正在提供一种自己动手做的答案（不应该在现实世界的编程中使用）。

```
class Program
{
    static void Main(string[] args)
    {
        var listOfInt = new List<int> {7, 4, 2, 5, 7, 5, 4, 3, 4, 5, 6, 3, 7, 5, 7, 4, 2};

        var histogram = BuildHistogram1(listOfInt);

        var modeValue = FindMode(histogram);

        Console.WriteLine(modeValue);
    }

    private static int FindMode(Dictionary<int, int> histogram)
    {
        int mode = 0;
        int count = 0;
        foreach (KeyValuePair<int, int> pair in histogram)
        {
            if( pair.Value>count)
            {
                count = pair.Value;
                mode = pair.Key;
            }
        }
        return mode;
    }

    private static Dictionary<int,int> BuildHistogram1(List<int> listOfInt)
    {
        var histogram = new Dictionary<int, int>();
        foreach (var v in listOfInt)
        {
            if (histogram.ContainsKey(v))
                histogram[v] = histogram[v] + 1;
            else
                histogram[v] = 1;
        }
        return histogram;
    }
} 
```

它使用 Dictionary 来构建直方图。但是，如果您提前知道值范围并且足够窄，则可以将普通数组用于相同目的。

# asp.net-mvc - 布局中的 mvc 4 处理

> ID：12353654
> 
> 赞同：0
> 
> 时间：2012-09-10T14:21:03.737
> 
> 标签：asp.net-mvc

我将 webforms 应用程序转换为 mvc 4。该应用程序在母版页代码隐藏中进行了大量处理，以执行诸如根据用户角色确定用户可以或看不到的内容，在页面底部显示的版本组装等。所有服务器端。

我知道处理不是在代码隐藏中，而是在将数据发送到视图的控制器中。但我不清楚这是如何在 _Layout.cshtml 中完成的

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:34:26.207

您可能可以做的是使用基本控制器并覆盖该`OnActionExecuting`方法，然后使用`ViewBag`动态属性将值传递给您的`_Layout.cshtml`

```
public abstract class BaseController : Controller
{
   protected override void OnActionExecuting(ActionExecutingContext filterContext)
   {
      var user = filterContext.Controller.ControllerContext.RequestContext.HttpContext.User;
      // do whatever you need to do
      ViewBag.CanUserViewSomethingSecret = user.Identity.Name == "Kermit";
   }
} 
```

您需要使用应用程序控制器扩展此基本控制器

```
public class HomeController : BaseController 
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

然后在您的`_Layout.cshtml`您可以像这样访问该`ViewBag`属性...

```
 @if(ViewBag.CanUserViewSomethingSecret != null && (bool) ViewBag.CanUserViewSomethingSecret == true) 
   {
       <p>Secret</p>
   } 
```

# android - 复合组件可以为结果启动活动吗？

> ID：12353655
> 
> 赞同：0
> 
> 时间：2012-09-10T14:21:03.400
> 
> 标签：android

是否可以创建一个复合组件来封装结果启动活动的逻辑？

例如，如果我想创建一些能够让用户选择音频文件、图像文件和一些联系人的设置页面（活动）。为什么我不能将每个想法封装到一个单独的复合组件中，让其独立完成其工作？例如，选择音频示例可以运行一个隐含的意图来获取用户的音频选择，然后当做出选择时，它可以在包含在该复合组件中的 TextView 上显示结果，并可能让用户调整其音量和内容。

我不明白为什么谷歌会这样设计它，在我的用例中我必须在一个活动类中实现所有这些逻辑？（或者对我不想要的每一种用途都有一个活动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:25:44.680

您不必在单个活动类中实现所有逻辑。我相信最简单的方法是创建一个想要支持此元素的活动必须实现的接口。您在创建此组件时提供对此接口的引用。

然后，您可以有一个回调机制，当音频文件选择器活动的结果准备好（之后`onActivityResult()`）时通知组件。这并不容易，但绝对有可能将组件与特定活动分离。

# c# - WPF 应用程序在启动时崩溃

> ID：12353659
> 
> 赞同：1
> 
> 时间：2012-09-10T14:21:10.470
> 
> 标签：c#, wpf

我正在尝试在另一台计算机上启动我的应用程序，但是当它启动时它立即崩溃。

我的应用程序在启动时不会尝试读取文件，但它仍然会以`System.IO.FileNotFoundException`.

我不知道该怎么办，有人可以帮我解决这个问题吗？

此转储文件是由应用程序崩溃生成的。

```
<WERReportMetadata>
<OSVersionInformation>
    <WindowsNTVersion>6.1</WindowsNTVersion>
    <Build>7600 </Build>
    <Product>(0x3): Windows 7 Home Premium</Product>
    <Edition>HomePremium</Edition>
    <BuildString>7600.16917.amd64fre.win7_gdr.111118-2330</BuildString>
    <Revision>1</Revision>
    <Flavor>Multiprocessor Free</Flavor>
    <Architecture>X64</Architecture>
    <LCID>1043</LCID>
</OSVersionInformation>
<ProblemSignatures>
    <EventType>CLR20r3</EventType>
    <Parameter0>bw000.exe</Parameter0>
    <Parameter1>0.9.1.0</Parameter1>
    <Parameter2>50461072</Parameter2>
    <Parameter3>PresentationFramework</Parameter3>
    <Parameter4>4.0.0.0</Parameter4>
    <Parameter5>4d930fa2</Parameter5>
    <Parameter6>9ef</Parameter6>
    <Parameter7>f</Parameter7>
    <Parameter8>System.IO.FileNotFoundException</Parameter8>
</ProblemSignatures>
<DynamicSignatures>
    <Parameter1>6.1.7600.2.0.0.768.3</Parameter1>
    <Parameter2>1043</Parameter2>
    <Parameter22>0a9e</Parameter22>
    <Parameter23>0a9e372d3b4ad19135b953a78882e789</Parameter23>
    <Parameter24>0a9e</Parameter24>
    <Parameter25>0a9e372d3b4ad19135b953a78882e789</Parameter25>
</DynamicSignatures>
<SystemInformation>
    <MID>4F696B6F-82CF-4635-A6C8-BA2F7C68C6CA</MID>
    <SystemManufacturer>MICRO-STAR INTERNATIONAL CO., LTD</SystemManufacturer>
    <SystemProductName>MS-6657</SystemProductName>
    <BIOSVersion>V1.30</BIOSVersion>
</SystemInformation> 
```

我在发布文件夹中检查了我的文件，PresentationFramework.dll 在那里。

**更新：**

我尝试安装 .NET Framework 3.5，它没有运行。我认为这是因为我安装了 .NET 4。

我听从了 Simon 的建议，查看了 Windows 事件日志，发现了错误的堆栈跟踪。

这是现在的情况：

*   我有一个 64 位 Windows 7 Home Premium 来运行该应用程序。

*   该应用程序被编译为 32 位应用程序。

*   我安装了 .Net 4 Extended 和客户端。

*   我已将我的主项目和模块项目设置为在 .NET 4 上运行

*   我设置了一个`DispatcherUnhandledException`但它没有被调用，所以它在那之前崩溃了。

那么任何人都可以帮助我吗？

这是来自 Windows 事件日志的 strack 跟踪：

```
Log Name: Application
Source:. NET Runtime
Date: 13/09/2012 9:12:51
Event ID: 1026
Task Category: None
Level: Error
Keywords: Classic
User: NA
Computer: PC-freedom
Description:
Application: BW000.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.FileNotFoundException
Stack:
   at BW000.App.OnStartup (System.Windows.StartupEventArgs)
   ate System.Windows.Application. <. ctor> b__1 (System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall (System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen (System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl ()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext (System.Object)
   at System.Threading.ExecutionContext.runTryCode (System.Object)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup (TryCode, Cleanup code, System.Object)
   at System.Threading.ExecutionContext.RunInternal (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Windows.Threading.DispatcherOperation.Invoke ()
   at System.Windows.Threading.Dispatcher.ProcessQueue ()
   at System.Windows.Threading.Dispatcher.WndProcHook (IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndWrapper.WndProc (IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation (System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall (System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen (System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.Dispatcher.InvokeImpl (System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
   at MS.Win32.HwndSubclass.SubclassWndProc (IntPtr, Int32, IntPtr, IntPtr)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage (System.Windows.Interop.MSG ByRef)
   at System.Windows.Threading.Dispatcher.PushFrameImpl (System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.PushFrame (System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.Run ()
   at System.Windows.Application.RunDispatcher (System.Object)
   at System.Windows.Application.RunInternal (System.Windows.Window)
   at System.Windows.Application.Run (System.Windows.Window)
   at BW000.App.Main ()

Event XML:
 <event Xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
   <System>
     <Provider Name=".NET Runtime" />
     <EventID Qualifiers="0"> 1026 </ EventID>
     <level> 2 </ Level>
     <Task> 0 </ Task>
     <keywords> 0x80000000000000 </ Keywords>
     <TimeCreated SystemTime="2012-09-13T07:12:51.000000000Z" />
     <EventRecordID> 525 </ EventRecordID>
     <channel> Application </ Channel>
     <computer> Freedom-PC </ Computer>
     <Security />
   </ System>
   <EventData>
   <Data> Application: BW000.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.FileNotFoundException
Stack:
   at BW000.App.OnStartup (System.Windows.StartupEventArgs)
   ate System.Windows.Application. <. ctor> b__1 (System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall (System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen (System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl ()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext (System.Object)
   at System.Threading.ExecutionContext.runTryCode (System.Object)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup (TryCode, Cleanup code, System.Object)
   at System.Threading.ExecutionContext.RunInternal (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run (System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Windows.Threading.DispatcherOperation.Invoke ()
   at System.Windows.Threading.Dispatcher.ProcessQueue ()
   at System.Windows.Threading.Dispatcher.WndProcHook (IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndWrapper.WndProc (IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation (System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall (System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen (System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.Dispatcher.InvokeImpl (System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
   at MS.Win32.HwndSubclass.SubclassWndProc (IntPtr, Int32, IntPtr, IntPtr)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage (System.Windows.Interop.MSG ByRef)
   at System.Windows.Threading.Dispatcher.PushFrameImpl (System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.PushFrame (System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.Run ()
   at System.Windows.Application.RunDispatcher (System.Object)
   at System.Windows.Application.RunInternal (System.Windows.Window)
   at System.Windows.Application.Run (System.Windows.Window)
   at BW000.App.Main ()
</ Data>
  </ Event Data>
</ Event> 
```

这是我发现的一些额外信息：

```
Log Name: Application
Source: Application Error
Date: 13/09/2012 9:12:52
Event ID: 1000
Task Category: (100)
Level: Error
Keywords: Classic
User: NA
Computer: PC-freedom
Description:
Name of application with error: BW000.exe, version: 0.1.0.0, time stamp: 0x504dfc8f
Name of module with error: KERNELBASE.dll, version: 6.1.7601.17514, time stamp: 0x4ce7bafa
Exception code: 0xe0434352
Fault offset: 0x0000b727
ID of process error: 0xf90
Start time of application with error: 0x01cd917f300ba4e0
Path to application with error: C: \ Users \ freedom \ AppData \ Roaming \ Boomerweb \ Boomerweb Platform \ App \ BW000.exe
Path to module with error: C: \ Windows \ syswow64 \ KERNELBASE.dll
Report Id: 6e2030c0-fd72-11e1-9968-406186e5690b
Event XML:
<event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
   <System>
     <Provider Name="Application Error" />
     <EventID Qualifiers="0"> 1000 </ EventID>
     <level> 2 </ Level>
     <Task> 100 </ Task>
     <keywords> 0x80000000000000 </ Keywords>
     <TimeCreated SystemTime="2012-09-13T07:12:52.000000000Z" />
     <EventRecordID> 526 </ EventRecordID>
     <channel> Application </ Channel>
     <computer> Freedom-PC </ Computer>
     <Security />
   </ System>
   <EventData>
     <Data> BW000.exe </ Data>
     <Data> 0.1.0.0 </ Data>
     <Data> 504dfc8f </ Data>
     <Data> KERNELBASE.dll </ Data>
     <Data> 6.1.7601.17514 </ Data>
     <Data> 4ce7bafa </ Data>
     <Data> E0434352 </ Data>
     <Data> 0000b727 </ Data>
     <Data> F90 </ Data>
     <Data> 01cd917f300ba4e0 </ Data>
     <Data> C: \ Users \ freedom \ AppData \ Roaming \ Boomerweb \ Boomerweb Platform \ App \ BW000.exe </ Data>
     <Data> C: \ Windows \ syswow64 \ KERNELBASE.dll </ Data>
     <Data> 6e2030c0-fd72-11e1-9968-406186e5690b </ Data>
   </ Event Data>
</ Event> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:49:54.040

抱歉这么晚的回复，问题不在 .NET 中，而是在未安装的 Microsoft Redistributable 中。

感谢您的回复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:41:12.937

确保客户端计算机具有用于创建应用程序的相同版本的 .NET Framework。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:41:30.437

您可以在您的机器上安装 WPF 框架

在此您有带有 Service Pack 1 的 3.5 版本

链接：[http ://www.microsoft.com/en-us/download/details.aspx?id=22](http://www.microsoft.com/en-us/download/details.aspx?id=22)

如果您只想下载程序集（PresentationFramework.dll 或其他）：

链接：[http ://www.search-dll.com/dll-files/download/presentationframework.dll.html](http://www.search-dll.com/dll-files/download/presentationframework.dll.html)

# php - MySQL 创建新表时出现语法错误

> ID：12353662
> 
> 赞同：0
> 
> 时间：2012-09-10T14:21:12.183
> 
> 标签：php, mysql

我对以下代码中的查询没有任何问题。但是第二个代码抛出了错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

工作代码：

```
<?php
mysql_connect("localhost", "","") or die(mysql_error());
mysql_select_db("") or die(mysql_error());

$result ="  CREATE TABLE google_csv(
    ÿþName varchar(80),
    Given_Name varchar(80),
    Additional_Name varchar(80),
    Family_Name varchar(80),
    Yomi_Name varchar(80),
    Given_Name_Yomi varchar(80),
    Additional_Name_Yomi varchar(80),
    Family_Name_Yomi varchar(80),
    Name_Prefix varchar(80),
    Name_Suffix varchar(80),
    Initials varchar(80),
    Nickname varchar(80),
    Short_Name varchar(80),
    Maiden_Name varchar(80),
    Birthday varchar(80),
    Gender varchar(80),
    Location varchar(80),
    Billing_Information varchar(80),
    Directory_Server varchar(80),
    Mileage varchar(80),
    Occupation varchar(80),
    Hobby varchar(80),
    Sensitivity varchar(80),
    Priority varchar(80),
    Subject varchar(80),
    Notes varchar(80),
    Group_Membership varchar(80),
    E_mail_1___Type int(11),
    E_mail_1___Value int(11),
    E_mail_2___Type int(11),
    E_mail_2___Value int(11),
    Phone_1___Type int(11),
    Phone_1___Value int(11),
    Phone_2___Type int(11),
    Phone_2___Value int(11),
    Phone_3___Type int(11),
    Phone_3___Value int(11),
    Address_1___Type int(11),
    Address_1___Formatted int(11),
    Address_1___Street int(11),
    Address_1___City int(11),
    Address_1___PO_Box int(11),
    Address_1___Region int(11),
    Address_1___Postal_Code int(11),
    Address_1___Country int(11),
    Address_1___Extended_Address int(11),
    Website_1___Type int(11),
    Website_1___Value int(11)
)";

echo $result;

mysql_query($result);
echo mysql_error();
?> 
```

错误生成代码；

```
<?php

// GENERATE TABLE FROM FIRST LINE OF CSV FILE

$inputFile = 'google.csv';
$tableName = 'google_csv';

$fh = fopen($inputFile, 'r');
$contents = fread($fh, 5120); // 5KB
fclose($fh);

$fileLines = explode("\n", $contents);

$fieldList = explode(',', $fileLines[0]);

$lastField=count($fieldList)-1;

echo "Total Fields :".count($fieldList)."<br>";

echo "Last Field :".$lastField."<br>";

$result ="CREATE TABLE $tableName(";

for($i = 0; $i < count($fieldList); $i++)
{
    if(preg_match('/[1-9]/', $fieldList[$i]))
    {

    if ($i==$lastField)
    {$result .=str_replace(array(" ",'-'),"_",$fieldList[$i]). ' int(11)';}
    else
    {$result .=str_replace(array(" ",'-'),"_",$fieldList[$i]). ' int(11),';}

    }
    else
    {

    if($i==$lastField)

    {$result .=str_replace(array(" ",'-'),"_",$fieldList[$i]). ' varchar(80)';}
    else
    {$result .=str_replace(array(" ",'-'),"_",$fieldList[$i]). ' varchar(80),';}

    }
}

$result .=")";

if ($result) {echo $result."<br>".$i."<br>";} else {Echo "Some Problem!";}

mysql_connect("localhost", "","") or die(mysql_error());
mysql_select_db("") or die(mysql_error());

mysql_query($result);

echo mysql_error();

?> 
```

我`$result`在第一个代码中使用了这里的输出，它工作得很好！我在第二个代码中哪里出错了？

$result 回显给出

> 创建表 google_csv(ÿþName varchar(80),Given_Name varchar(80),Additional_Name varchar(80),Family_Name varchar(80),Yomi_Name varchar(80),Given_Name_Yomi varchar(80),Additional_Name_Yomi varchar(80),Family_Name_Yomi varchar(80) ),Name_Prefix varchar(80),Name_Suffix varchar(80),Initials varchar(80),Nickname varchar(80),Short_Name varchar(80),Maiden_Name varchar(80),Birthday varchar(80),Gender varchar(80), Location varchar(80),Billing_Information varchar(80),Directory_Server varchar(80),Mileage varchar(80),Occupation varchar(80),Hobby varchar(80),Sensitivity varchar(80),Priority varchar(80),Subject varchar (80),Notes varchar(80),Group_Membership varchar(80),E_mail_1_type **int(11),E_mail_1_Value** int(11),E_mail_2_Type **int(11),** E_mail_2_Value int(11),Phone_1_Type **int(11) ,电话_1**_Value int(11),Phone_2_ **Type int(11),Phone_2** _Value int(11),Phone_3_ **Type int(11),Phone_3** _Value int(11),Address_1_ **Type int(11),Address_1** _Formatted int(11),Address_1_ **Street int(11),Address_1** _City int(11),Address_1_ **PO_Box int(11),Address_1** _Region int(11),Address_1_ **Postal_Code int(11),Address_1** _Country int(11),Address_1_ **Extended_Address int(11),Website_1** _Type int (11),Website_1___值 int(11))

看起来这里一切都很好！但是之后......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:26:00.950

这是什么 ：

> ÿþ

```
$result ="CREATE TABLE google_csv(ÿþName ....")

           -----------------------^ 
```

ÿþ 是特殊字符（0xFE、0xFF）。我不认为 OP 想要它们在列名中，如果是这样，它应该由

```
`ÿþName` 
```

[http://en.wikipedia.org/wiki/ISO_8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)

# ios - 两个日期之间实体属性的核心数据总和

> ID：12353664
> 
> 赞同：0
> 
> 时间：2012-09-10T14:21:12.997
> 
> 标签：ios, ios5, nspredicate, nsfetchrequest

我有一个实体，它有一个金额属性 [NSNumber double] ...一个 NSDate 属性和 2 个布尔属性（存储为 NSNumber）...有没有办法获得“金额”属性的总和，使得日期属性在 2 个给定日期之间，并且其中一个布尔属性设置为 YES... 我猜它可以在不获取所有实体并将它们添加到每个实体的情况下完成...

```
 // sum of expenses this month
NSFetchRequest *fetchMonthExp = [[NSFetchRequest alloc] init];
NSEntityDescription *entityExp = [NSEntityDescription entityForName:kTransaction inManagedObjectContext:self.context];
[fetchMonthExp setEntity:entityExp];
NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:kDate ascending:NO];
[fetchMonthExp setSortDescriptors:[NSArray arrayWithObject:sort]];

NSPredicate *predFetchEx = [NSPredicate predicateWithFormat:@"(isExpense = YES) AND (date > %@) AND (date < %@) AND (isPendingScheduledTransaction = NO) AND (isDebtRepaiment = NO) AND (isLoanRepaiment = NO) AND (isDebt = NO) AND (isLoan = NO)",[self beginingOfMonthForDate:[NSDate date]],[NSDate date]];
[fetchMonthExp setPredicate:predFetchEx];

NSExpression *ex = [NSExpression expressionForFunction:@"sum:" 
                                             arguments:[NSArray arrayWithObject:[NSExpression expressionForKeyPath:@"totalAmountInDefaultCurrency"]]];

NSExpressionDescription *ed = [[NSExpressionDescription alloc] init];
[ed setName:@"resultExpSum"];
[ed setExpression:ex];
[ed setExpressionResultType:NSDoubleAttributeType];

NSArray *properties = [NSArray arrayWithObject:ed];
[fetchMonthExp setPropertiesToFetch:properties];

NSError *error1 = nil;
NSArray *resultsEx = [self.context executeFetchRequest:fetchMonthExp error:&error1]; <- EXC_BAD_ACCESS (code = 2, address = 0x0)
if(resultsEx == nil) {
    NSLog(@"Failed to fetch exp sum: %@", [error1 localizedDescription]);
    NSArray* detailedErrors = [[error1 userInfo] objectForKey:NSDetailedErrorsKey];
    if(detailedErrors != nil && [detailedErrors count] > 0) {
        for(NSError* detailedError in detailedErrors) {
            NSLog(@"  DetailedError: %@", [detailedError userInfo]);
        }
    }
} 
```

那个错误是怎么回事....

```
-[UIView count]: unrecognized selector sent to instance 0x7856150 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:02:32.053

您想查看`NSExpression`和`NSPredicate`。 [这](http://iphonedevelopment.blogspot.com/2010/11/nsexpression.html)是一个过时但有用的链接，其中包含一些帮助您入门的信息。

# java - 从服务器向客户端发送响应

> ID：12353677
> 
> 赞同：0
> 
> 时间：2012-09-10T14:22:11.583
> 
> 标签：java, sockets, outputstream

我想在连接后向客户端发送响应

这是代码片段

```
try {

    while (true)

    {
        in = socket.getInputStream();
        out = socket.getOutputStream();

        byte[] reception = new byte[1024];
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int read = in.read(reception);

        String bufferServer = "Buffer Server ";
        baos.write(reception, 0, read);
        reception = baos.toByteArray();
        String chaine = new String(reception, "Cp1252");
        System.out.println("Reception from client : " + chaine);

        byte[] bufferServeurToClient = bufferServer.getBytes();
        out.write(bufferServeurToClient); // send to client
        out.flush();
    }
} 
```

客户端可以发送多个请求，这就是为什么我使用 while(true) 来监听请求直到客户端断开连接。

问题是我从客户端的服务器没有收到任何东西。如果我删除了while（true）它可以工作并且我在客户端收到变量“bufferServeurToClient”

编辑：客户端现在可以工作，但是当我打印响应时，我的字符串后面有很多奇怪的字符（正方形），为什么？

```
String ip = InetAddress.getLocalHost ().getHostAddress ();
        Socket socket = new Socket(ip, port);
        System.out.println("SOCKET = " + socket);

         InputStream in = socket.getInputStream();
    BufferedInputStream bis = new BufferedInputStream(in);
    OutputStream out = socket.getOutputStream();
    BufferedOutputStream bos=new BufferedOutputStream(out);
    String bufferClient="Buffer Client ";

    byte[] bufferClientToServer= bufferClient.getBytes();
    out.write(bufferClientToServer);

    byte[] reception = new byte[1024] ;          

    int read;

    while ((read = bis.read(reception)) != -1){
        String chaine = new String( reception , "Cp1252" );
        System.out.println("Reception from server: " + chaine);

    }
    bis.close();
    bos.close(); 
```

}

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:27:52.910

> 客户端可以发送多个请求，这就是为什么我使用 while(true) 来监听请求直到客户端断开连接。

如果客户端可以发送多个请求，您将需要一种区分它们的方法 -*以及*响应之间的差异。目前，您只是假设一次调用就`read`可以完成这项工作：

```
int read =in.read(reception); 
```

这可以读取请求的*一部分*，或者可能读取多个请求。解决此问题的常用选项是使用某种分隔符（例如，每个文本行一个请求）或使用长度前缀，其中（例如）每个请求或响应的前四个字节表示还有多少数据。

现在您根本没有展示您的客户端是什么样子 - 但我的猜测是您实际上正在等待服务器关闭连接，当然当`while(true)`循环存在时您永远不会这样做。所以这是您需要修改的另一段代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:28:48.030

如果您发送多个请求，它们很可能被视为单个请求，这毫无价值。这是因为流没有消息的概念，因此如果您写入许多字节，它们可以以任何方式读取。例如，一次一个字节，或者一次全部。

无论如何，您至少应该得到一个答复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T18:24:42.880

在打印任何内容之前，您一直在客户端读取 EOS，并且服务器永远不会关闭连接，因此没有 EOS。

您不需要所有这些 ByteArrayOutputStreams。仔细查看您的代码，您会发现它们可以完全消除。这也将解决 EOS 问题。

如果 read() 返回 -1，服务器应该关闭套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:32:37.760

看看这个教程文档：[http](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html) ://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html 这可能会帮助你

# iphone - PDF iOS 应用程序的离线存储

> ID：12353681
> 
> 赞同：0
> 
> 时间：2012-09-10T14:22:37.473
> 
> 标签：iphone, ios, sqlite, core-data

我喜欢为我当前的 PDF 阅读器应用程序提供离线存储选项。我只是想知道离线存储 PDF 以进行持久存储的最佳方法是什么。我打算使用 CoreData，但我不知道这对我的项目是否会过大。有人可以帮我找到持久存储的快速方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:24:29.203

如果取决于此存储如何适合您的应用程序。如果您没有当前的数据库系统，那么创建一个数据库来保存 PDF 文档列表是一种矫枉过正的做法。只需创建一个目录并读取该目录中包含的文件。查看 NSFileManager 的文档以获取有关创建文件和目录的帮助：[NSFileManager 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)。

如果您已经有数据库，请不要将 pdf 文件保存在数据库中。如果使用核心数据，请使用 iOS 5 及更高版本上可用的“存储在外部记录文件中”功能。

# python - chardet 在 python 3 中运行不正确

> ID：12353682
> 
> 赞同：2
> 
> 时间：2012-09-10T14:22:42.193
> 
> 标签：python, encoding, python-3.x, chardet

我在python 3.2中使用chardet 2.01，源代码像这个网站[http://getpython3.com/diveintopython3/case-study-porting-chardet-to-python-3.html](http://getpython3.com/diveintopython3/case-study-porting-chardet-to-python-3.html)

可以在这里下载
[http://jaist.dl.sourceforge.net/project/cygwin-ports/release-2/Python/python3-chardet/python3-chardet-2.0.1-2.tar.bz2](http://jaist.dl.sourceforge.net/project/cygwin-ports/release-2/Python/python3-chardet/python3-chardet-2.0.1-2.tar.bz2)

我使用 lxml2 解析 html 以获取一些字符串
，并使用下面的代码来检测编码

```
chardet.detect(name) 
```

但是出现错误

```
Traceback (most recent call last):
  File "C:\python\test.py", line 125, in <module>
    print(chardet.detect(str(name)))
  File "E:\Python32\lib\site-packages\chardet\__init__.py", line 24, in detect
    u.feed(aBuf)
  File "E:\Python32\lib\site-packages\chardet\universaldetector.py", line 98, in feed
    if self._highBitDetector.search(aBuf):
TypeError: can't use a bytes pattern on a string-like object 
```

`name`是一个字符串对象
将字符串转换为字节意味着用'utf-8'，'big5'等编码对其进行编码
，charset会检测你所做的编码......不是原始字符串的编码
我不知道这个问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:11:49.327

问题很明显，您调用`chardet`的是字符串而不是字节对象。您缺少的是对于 Python，一个字符串**已经被解码**。它不再*有*编码。

您必须修复您的代码，以便在`chardet`将原始字节解码为字符串之前提供原始字节。如果您从另一个包中获取字符串，那么它已经确定了编码，您无能为力。

# mysql - 如何计算 MySQL 中今天和昨天值之间的百分比差异？

> ID：12353687
> 
> 赞同：0
> 
> 时间：2012-09-10T14:23:17.123
> 
> 标签：mysql

考虑下表：

```
id   _date          timestamp       views   change
--------------------------------------------------
1   2011-01-31  1296514800  550        0.00
1   2011-02-01  1296601200  504       -8.36
1   2011-02-02  1296687600  484       -3.97
2   2011-01-31  1296514800   50        0.00
2   2011-02-01  1296601200   40      -20.00
2   2011-02-02  1296687600   45       12.50
3   2011-01-31  1296514800  150        0.00
3   2011-02-01  1296601200  180       20.00
3   2011-02-02  1296687600  200       11.11 
```

请注意，该表首先按 排序`id`，然后按排序`_date`。`_date`每个 s 的数量相同`id`。

在`change`专栏中，我想计算每家公司昨天和今天的观点差异百分比`id`。请注意，每当我们开始计算新公司的 %change 时`id`，第一行应该说`0.00`因为我们没有昨天的值来计算。其他值简单地用公式计算：

```
todays_value - yesterdays_value          504 - 550
------------------------------- x 100 =  --------- x 100 = -8.36
       yesterdays_value                     550 
```

我的问题是：这可以在 MySQL 中完成吗？如果可以，我应该如何或应该使用 PHP 层（最好不要:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:42:22.513

您可以在 SQL 中执行此操作。一种方法是使用用户定义的变量来跟踪从一行到下一行的值。为了获得所需的输出，您可以在子查询中进行计算，然后从最终输出中省略跟踪前一行值的列。

尝试这样的事情：

```
select id, _date, views, change_pct
from 
(
  select @id := id as id, _date as _date, @views := views as views, 
    (case when @id = @last_id then round(((@views - @last_views)/@last_views)*100,2) else 0.00 end) as change_pct,
    @last_id := @id, @last_views := @views
  from your_table
  order by id,_date
) as sub_query
order by id,_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:11:52.340

只是第 4 行的一个小注释，日期为 _date 而不是 _date 为 _date。

# c# - 绕过 WebBrowser 控件中的查找对话框

> ID：12353689
> 
> 赞同：1
> 
> 时间：2012-09-10T14:23:26.583
> 
> 标签：c#, search, find, webbrowser-control

我需要实现按 Ctrl+F 时弹出的查找对话框提供的搜索功能。

我有一个文本框，用户可以在其中输入要搜索的字符串，还有一个“搜索”按钮。单击按钮时，需要突出显示 HTML 文档中的匹配项 - 与“查找”对话框中的实现完全相同。

有没有办法绕过 WebBrowser 控件中的“查找”对话框？是否可以将搜索参数发送到“查找”功能？

在此先感谢您的帮助。

**编辑**

理想情况下，我将能够使用“查找”对话框提供的全部功能，包括“仅匹配整个世界”、“匹配大小写”和“突出显示所有匹配项”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T15:36:03.310

我在这方面遇到了很多困难，但我终于找到了一个可行的解决方案。它有点混乱，但它可以按预期用于 Winforms WebBrowser 控件。这是在 .Net 4.0 中导入了 Microsoft.mshtml 7.0.3300 参考。

```
using mshtml;

private int _findClicks = 0;
private string _searchText = "";

public string SearchText
    {
        get { return _searchText; }
        set
        {
            if (value.ToUpper() != _searchText)
            {
                ClearFind();
                _searchText = value.ToUpper();
                txtSearch.Text = value.ToUpper();

                _findClicks = 0;
            }
        }
    }

private void btnSearch_Click(object sender, EventArgs e)
    {
        SearchText = txtSearch.Text;
        if (_findClicks == 0)
            FindFirst();
        else
            FindNext();
    }

 /// <summary>
    /// Search through all text to find. Sets all occurrences to background color yellow.
    /// </summary>
    private void FindFirst()
    {
            if (_searchText == "")
                return;
            IHTMLDocument2 doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
            IHTMLSelectionObject sel = doc.selection;
            IHTMLTxtRange range = sel.createRange() as IHTMLTxtRange;
            //Mark all occurrences with background color yellow
            while (true)
            {
                if ((range.findText(_searchText)) && (range.htmlText != "span style='background-color: yellow;'>" + _searchText + "</span>"))
                {
                    range.pasteHTML("<span style='background-color: yellow;'>" + _searchText + "</span>");
                }
                else
                    break;
            }
            //Move to beginning and select first occurence.
            range.moveStart("word", -9999999);
            range.findText(_searchText);
            range.select();
            _findClicks++;
        }

/// <summary>
    /// Finds next occurrence of searched text and selects it.
    /// </summary>
    private void FindNext()
    {
            if (_searchText == "")
                return;
            IHTMLDocument2 doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
            IHTMLSelectionObject sel = doc.selection;
            IHTMLTxtRange range = sel.createRange() as IHTMLTxtRange;
            range.collapse(false); // collapse the current selection so we start from the end of the previous range

            if (range.findText(_searchText, 1000000, 0))
            {
                range.select();
            }
            else // If at end of list, go to beginning and search one more time.
            {
                range.moveStart("word", -9999999);
                if (range.findText(_searchText, 1000000, 0))
                {
                    range.select();
                }
            }
    }

/// <summary>
    /// Remove highlighting on all words from previous search.
    /// </summary>
    private void ClearFind()
    {
            if (_searchText == "" || webBrowser1.ReadyState != WebBrowserReadyState.Complete)
                return;
            IHTMLDocument2 doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
            IHTMLSelectionObject sel = doc.selection;
            IHTMLTxtRange range = sel.createRange() as IHTMLTxtRange;
            range.moveStart("word", -9999999);
            while (true)
            {
                if ((range.findText(_searchText)) && (!range.htmlText.Contains("span style='background-color: white")))
                {
                    range.pasteHTML("<span style='background-color: white;'>" + _searchText + "</span>");
                }
                else
                    break;
            }

    } 
```

同样，这有点混乱，可能会被清理很多。这几乎复制了 Web 浏览器控件中 Ctrl+F 功能的基础知识。希望它对所有未来的读者有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:41:42.687

自己做并不难，您只需将搜索文本框中的内容替换为以下内容，假设搜索词是“hello”，然后将所有出现的 hello 替换为以下内容：

```
<font color="yellow">hello</font> 
```

当然，此 HTML 可以替换为 SPAN 标签（这是 DIV 标签的内联版本，因此您的行不会使用 SPAN 中断，但会使用 DIV）。但无论哪种情况，这两个标签都有一个 style 属性，您可以使用 CSS 更改其颜色或与 CSS 兼容的无数其他属性，如下所示：

```
<SPAN style="background-color: yellow;">hello</SPAN> 
```

当然，还有无数其他方法可以使用 HTML 更改颜色，如果需要，请随时在网络上搜索更多信息。

现在，您可以使用 dotnet 中的 .Replace() 函数来执行此操作（替换搜索到的文本），非常简单。因此，您可以使用 .DocumentText 将整个文档作为字符串获取，并且一旦所有出现的内容都被替换（使用 .Replace()），您可以将其设置回 .DocumentText（因此，您使用 .DocumentText 来获取原始文件字符串，并使用替换的字符串设置 .DocumentText）。当然，您可能不想对实际 HTML 中的项目执行此操作，因此您可以通过对所有元素执行 For Each 循环来遍历页面上的所有元素，如下所示：

```
For Each someElement as HTMLElement in WebBrowser1.Document.All 
```

每个元素都有一个 .InnerText/.InnerHTML 和 .OuterText/.OuterHTML ，您可以获取（读取）和设置（用替换文本覆盖）。

当然，根据您的需要，您可能只想替换和覆盖 .InnerText 和/或 .OuterText。

如果您需要更多帮助，请告诉我。无论哪种情况，我都想知道它是如何为您解决的，或者我们是否可以做任何其他事情来为您的问题增加价值。干杯。

# html - 谷歌广告与固定 div 重叠？

> ID：12353691
> 
> 赞同：0
> 
> 时间：2012-09-10T14:23:30.867
> 
> 标签：html, fixed, ads

我最近开始从头开始自学 Web 开发，但遇到了麻烦。

我使用基本的 html 5 代码为我的网站的标题创建了一个固定的 div。滚动内容时，标题在大多数情况下效果很好，但是一旦到达 Google 广告展示位置，广告似乎会重叠并在标题前面而不是后面滚动。有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:48:57.310

查看一些示例代码会有所帮助，但首先尝试在标题上使用 CSS 设置 z-index，使其高于谷歌广告 div。

# ms-access - 如何在加载或删除时使 Access 显示“请选择或创建记录”

> ID：12353692
> 
> 赞同：0
> 
> 时间：2012-09-10T14:23:31.980
> 
> 标签：ms-access, vba, ms-access-2010

我确信这个问题之前已经被问过并得到了回答，但是我的 Google-fu 让我失望了。

我有一个表单，用户可以在其中通过组合框选择记录，效果很好。但是，当用户删除记录、刷新记录或打开表单时，它会自动跳回我表中的第一条记录。理想情况下，我想让它显示“请选择记录或创建新记录”的内容，禁用所有其他字段。现在，一个潜在的解决方案实际上是将记录号 1*命名*为“请选择...”，然后编写代码来禁用这些字段中的每一个，但这似乎不是一个理想的解决方案，因为手动灰化看起来很不稳定。此外，无法保证未来具有有限访问经验的管理员不会意外删除第一条记录。所以，我的问题是：

1）有更好的解决方案吗？解决这个问题的好/标准方法是什么？
2）如果没有，我可以迭代禁用表单上的每个字段吗？还是我必须按名称引用每个？

提前感谢您的帮助！

编辑：像往常一样，写下这个问题帮助我自己形成了解决方案。我意识到如果显示第一条记录，我可以将 Me.AllowDeletions 和 Me.AllowInsertions 设置为 false。但是，这些字段仍然没有变灰，您可以更改我的选项卡控件上的选项卡（甚至有事件处理程序吗？）并且仍然存在创建愚蠢的虚拟记录的问题。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:25:38.643

您可以使用循环禁用所有控件。最好设置要禁用的控件的标记属性。

```
For Each ctl In Me.Controls
   If ctl.tag = "problem" Then
       ctl.Enabled=false
   End If
Next 
```

当打开表单或删除记录时，您可以如上所述更改启用或锁定的属性，并使合适的标签可见。我猜你有一个刷新按钮，它可以调用相同的过程。

# ms-access - 处理过滤器和 OpenArgs

> ID：12353695
> 
> 赞同：1
> 
> 时间：2012-09-10T14:23:44.460
> 
> 标签：ms-access, ms-access-2010

继续我现有项目的一些可能性。

我正在研究处理有人在我之后通过 OpenForm 传递 OpenArgs 或 Where 值的可能性，我想知道是否有一种方法可以“捕获并释放”无效的值。

我想在 OpenArgs 中我会通过它来处理它`Open`，除非我误读了 MSDN 上的信息（考虑到信息的抽象混淆，这是可能的）。

1.  我的问题更多是关于如何捕捉将 Where 值传递给表单的人？
2.  是否有一个一站式商店我可以同时抓住它们，或者我必须处理两个事件？

如果可能的话，希望尝试用一块“石头”杀死两只“鸟”。我计划将这两个事件抽象为位于模块中的标准方法，但需要先从某个地方开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:32:26.623

Where 将通过过滤器限制记录集。您可以检查表单的过滤器属性。Openargs 是分开的。

```
Private Sub Form_Open(Cancel As Integer)
Debug.Print "Open filter " & Me.Filter & " is on " & Me.FilterOn
End Sub 
```

# sed - 如何将这些 sed 命令压缩为一个？

> ID：12353700
> 
> 赞同：0
> 
> 时间：2012-09-10T14:23:57.760
> 
> 标签：sed

我使用 sed 在 XML 文件中进行了一些替换（我知道这很糟糕，但它只是为了快速测试一些东西——通常我会为此使用解析器）。我有 4 个看起来完全一样的语句，即匹配部分仅在键上有所不同

```
 sed -i "s/\(key=\"liferay.db.host\" value=\)\".*\"/\1\"$hostname\"/" "$installer_directory/silent.xml"
  sed -i "s/\(key=\"idm.backend.db.host\" value=\)\".*\"/\1\"$hostname\"/" "$installer_directory/silent.xml"
  sed -i "s/\(key=\"idm-frontend.portal-tarent.tarent-frontend-host\" value=\)\".*\"/\1\"$hostname\"/" "$installer_directory/silent.xml"
  sed -i "s/\(key=\"openid-idp.hostname\" value=\)\".*\"/\1\"$hostname\"/" "$installer_directory/silent.xml" 
```

现在我想知道是否有某种方法可以将这些放入一个 sed 语句中？

就像是

```
/\(key="(first_key|second_key|third_key)"\) value=\)\".*\"/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:30:11.827

这可能对您有用（GNU sed）：

```
sed -i 's/\(key="\(liferay\.db\.host\|idm\.backend\.db\.host\|idm-frontend\.portal-tarent\.tarent-frontend-host\|openid-idp\.hostname\)" value=\)".*"/\1"'"$hostname"'"/' "$installer_directory/silent.xml" 
```

使用交替将四个命令缩短为一个并替换句点，这可能被解释为元字符，以匹配实际句点。

# android - ListFragment 下方固定且始终可见的页脚

> ID：12353701
> 
> 赞同：16
> 
> 时间：2012-09-10T14:24:00.703
> 
> 标签：android, android-listview, android-listfragment

我正在尝试将一个固定且始终可见的页脚附加到 ListFragment 的底部。

我目前正在这样做：

```
@Override public void onActivityCreated(Bundle savedInstanceState) {

    // ...

    adapter = new MyAdapter(getActivity(), R.layout.list, dataList);

    ListView list = getListView();
    View footer = ((LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.footer_add, null, false);

    list.addFooterView(footer);
    setListAdapter(adapter);
} 
```

虽然这段代码确实在列表底部生成了一个视图，但它并没有真正做到我想要的：

首先，我需要固定页脚，即无论列表滚动到哪里，都可以在屏幕上看到。使用此解决方案，页脚仅在屏幕滚动到列表底部时可见。

其次，即使列表为空，我也需要显示页脚。在此解决方案中，当列表为空时，页脚不可见。

让固定页脚（在我的例子中是一个按钮）始终出现在 ListFragment 或 ListActivity 下方的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-10T14:40:10.620

您可以在 xml 布局中执行此操作：

```
<RelativeLayout>

    <Button android:id="@+id/footer" android:layout_alignParentBottom="true"/> 
    <ListView android:id="@android:id/list" android:layout_above="@id/footer"> <!-- the list -->

</RelativeLayout> 
```

这个布局将在`onCreateView`片段的方法中使用。

# objective-c - Core Data 对象删除使应用程序崩溃

> ID：12353702
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:02.327
> 
> 标签：objective-c, ios, core-data, magicalrecord

我已经尝试在我的源代码中恢复原状，试图找出导致严重问题的原因。

当我`NSManagedObjects`从 Core Data 中删除 a 时，我的应用程序因以下建议而崩溃：

```
CoreData`_nameForEntityDescription: 
```

请注意，我看到了其中一个`NSManagedObject`s 的错误，但也没有看到另一个`NSManagedObject`s 的错误。

我正在使用 MagicalRecord 来满足我的核心数据需求，但我不怀疑这是问题所在。在这一点上，我很困惑这个问题可能是什么。

是否有任何 Core Data 专家可以就问题可能给我任何提示？

当我尝试为一个对象（通过它的关系）获取一组 NSManagedObjects 时，我也看到了与 _nameForEntityDescription 完全相同的问题：

```
NSSet* delSet = [NSSet setWithSet:contact.contactEmails]; 
```

所以看起来 NSManagedObject 模型有些东西已经损坏了，但是我已经查看了我拥有的所有东西，但我看不到它会是什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:28:59.627

我过去在删除对象时遇到过崩溃。由于您在这里没有足够的详细信息，因此我将给您一些一般性的检查：

1）当你删除一个对象时，确保你没有对它的未完成的引用。删除对象后保存上下文时，将删除存储中的支持引用。这意味着，您的对象在数据库中没有实际记录。下次您使用该对象时，Core Data 会向您大喊大叫。

2) 当您有线程后台保存时，问题 1 经常发生。您可以使用的解决方案是在保存后重新获取我们所有的数据对象引用，以保证您拥有正确的数据和有效的对象。MagicalRecord 提供了一个完成块机制来帮助你解决这个问题。

如果您怀疑您的 ManagedObjectModel 是问题所在，我还必须进行干净的构建并从模拟器/设备中删除应用程序以删除任何以前的构建工件。

# c++ - QPushButton 内的 QLayout

> ID：12353703
> 
> 赞同：1
> 
> 时间：2012-09-10T14:24:04.063
> 
> 标签：c++, qt, user-interface

我知道我可以将`Icon`and添加`Text`到 a`QPushButton`中，但我对它们的布局不满意。有没有办法`QLayout`用我想要的任何控件添加 a `QPushButton`？例如，我可以有一个`Icon`, 两行文本，然后在右侧有另一个图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:47:01.857

好吧，真的很丑……

但是如果你只需要一次并且不想开发自己的小部件，你可以把你想要的所有东西都涂成a `QPixmap`，并将其设置为普通的图标`QPushButton`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:41:01.797

我怀疑这个问题的唯一答案是从以下任何一个派生一个类：

1）一个`QPushButton`类并重新实现绘画程序。

2）一个`QLayout`满足你需求的类，并捕获传递给它的 MouseEvents 并直接处理它们。但是较低的类也可以捕获 MousEvents，并且可能会超过你的父类看到它们，所以要小心你放入 Layout 的内容。

# java - 找不到或无法加载主类

> ID：12353705
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:13.043
> 
> 标签：java, netbeans

我正在使用 Netbeans 创建 Java 桌面应用程序。Netbeans 内部一切正常。但是当我尝试运行在我的项目工作区的文件夹中`.jar`创建的`dist`文件时，我收到以下错误：`can not find or load main class`.

我最近升级到 Java 1.7.0_03。你认为这可能是原因吗？新的JDK位于里面`glassfish`，我不明白为什么？！

顺便说一句，当我在安装了 Java 1.6 的 Mac OS X 中构建相同的应用程序时，我没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:29:40.557

如果您通过双击运行 jar 文件，则错误是 manifest.mf 文件（通常在 META-INF 文件夹中）需要定义主类。

看看[http://java.sun.com/developer/Books/javaprogramming/JAR/basics/manifest.html](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/manifest.html)

那个部分

> 主类：com.package.MYMainClass

否则，如果您从命令提示符运行，则

```
java -jar my.jar com.package.MYMainClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:13:21.760

您还可以在 Netbeans 中选择 Main-Class。当您第一次尝试运行您的应用程序时，Netbeans 会询问哪个类应该是 Main-Class，但您也可以手动选择它：

`Right click on your project -> Properties -> Run`

`Main Class`单击`Browse...`并选择包含启动应用程序时应运行的主要方法的类。

最后，再次构建您的项目，并且应该正确设置`Main-Class`属性。`manifest.mf`然后，您的应用程序应根据需要启动，方法是双击 jar 或`java -jar myfile.jar`.

# visual-studio-2010 - Visual Studio 2010 MS 测试不确定测试未运行

> ID：12353711
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:28.993
> 
> 标签：visual-studio-2010, mstest

我一直在尝试在我的项目上运行单元测试（vs2010 pro，asp.net 项目，后面有 vb.net 代码，.net 4.0），但没有成功。以下是我的最新尝试，当我运行它时，我得到“不确定：测试未运行”。我究竟做错了什么？

```
Imports Microsoft.VisualStudio.TestTools.UnitTesting.Web
Imports Microsoft.VisualStudio.TestTools.UnitTesting

Public Class CriteriaCopy

    Private Shared Function ConvertToDBNull(ByVal intGID As Integer) As Object
        Dim result

        If intGID.Equals(0) Then
            result = DBNull.Value
        Else
            result = intGID
        End If

        Return result
    End Function

    <TestClass()>
    Class Test

        <TestMethod()>
        Public Sub ConvertToDBNullTest()
            Dim intGID As Integer = 1
            Dim expected As Object = 1
            Dim actual As Object
            actual = ConvertToDBNull(intGID)
            Assert.AreEqual(expected, actual)
        End Sub
    End Class
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:10:47.110

我无法找到解决问题的方法。从那篇文章开始，我创建了一个新的解决方案和项目，其中包括一个测试项目，并且所有内容都可以正确编译。我将我的问题归咎于用户错误。

# jquery - Ajax 调用缓存 CSS - IE7

> ID：12353713
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:30.200
> 
> 标签：jquery, ajax, caching

我正在尝试修复 IE7 中的一些样式错误（惊喜）。现在，我有一个 jquery ajax 调用从另一个页面中提取内容，很像 iFrame。此内容显示在 jQuery 对话框中。

我无法进行这些修改，因为 IE7 非常深地缓存了这个 css。是的，我已经清除了浏览器缓存并在 ajax 调用属性中添加了 cache: false 。我什至尝试将不相关的 date() 和 getTime() 变量添加到 url。

```
function getDocAlert() {
var currentLoc = document.domain;

if ((currentLoc == "stuff.com") || (currentLoc == "junk.com")) {
    loadPreview("derp/alerts.html");
} else {
    loadPreview("herp/alerts.html");
}
$(".preview-link").click(function(event) {
    event.preventDefault();
    $('#dialog').dialog('open');
});
};

function loadPreview(url) { 

url = url + '?cache' + new Date().getTime();

var dialog = $('<div style="display:none" class="loading"></div>').appendTo('body');
// open the dialog
dialog.dialog({
    width: 850,
    height: 600,
    position: top,
    // add a close listener to prevent adding multiple divs to the document
    close: function(event, ui) {
        // remove div with all data and events
        dialog.remove();
    },

    modal: true,
        buttons: {Close: function() {
        $( this ).dialog( "close");
    }}
});

var content = $.ajax({
    url: url,
    context: document.body,
    cache: false,
    dataType: 'html',
    success: function(data) {
        $('.loading').html(data);
    }
});
return false;
} 
```

# c# - C#中的NHibernate不同的数据库备份

> ID：12353714
> 
> 赞同：1
> 
> 时间：2012-09-10T14:24:30.803
> 
> 标签：c#, database, nhibernate, backup

情况：我做了一个应用程序更新程序。问题是更新后的应用程序使用的数据库可能不同。

我已经搜索了一个 .dll，它可以制作备份转储并为不同的数据库类型轻松恢复该转储。但遗憾的是没有可用的。

我的第一个想法是为每个 DatabaseType 制作一个用例，并使用 config.txt 文件指定的正确用例。但我的老板不喜欢这种解决方案。因此，我尝试查看是否可以 NHibernate（也用于发送更新文件）来进行数据库备份。可悲的是，虽然这是可能的，但它是不可行的。因为这会产生过多的开销。我还查看了 Rhino.ETL，但遗憾的是没有足够的文档供我使用。

所以我想问一下是否有人知道其他可能有用的方法。还是我辞职是为了违背我老板的意愿并使用每个用例的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:43:59.707

我使用 NHibernate 进行备份和恢复。导出和导入中实体的顺序很重要

```
ExportData(config, config.BuildSessionFactory(), dataFile, config.ClassMappings.Select(m => m.EntityName));

public void ExportData(Configuration config, ISessionFactory factory, string dataFile, IEnumerable<string> entitiesToExport)
{
    File.Delete(dataFile);
    using (var zip = new ZipFile(dataFile) { CompressionMethod = CompressionMethod.Deflate, CompressionLevel = CompressionLevel.BestCompression })
    using (var session = factory.OpenStatelessSession())
    using (var tx = session.BeginTransaction())
    {
        foreach (var name in entitiesToExport)
        {
            // copy for closure
            var entityName = name;
            zip.AddEntry(entityName + ".csv", (tablename, outstream) =>
            {
                using (var writer = new StreamWriter(outstream))
                {
                    // mapping der Klasse
                    var entityMap = config.GetClassMapping(entityName);
                    // only properties, no Collections (toMany)
                    var properties = entityMap.PropertyClosureIterator.Where(prop => prop.ColumnSpan > 0).ToArray();

                    // write csv(tsv) header
                    writer.WriteLine(string.Join(SEPERATOR, ToPropertyNames(properties)));

                    var classMetaData = factory.GetClassMetadata(entityName);

                    const int pagesize = 10000;
                    int page = 0;
                    IList<object> objects;
                    do
                    {
                        objects = session.CreateCriteria(entityName)
                            .SetFirstResult(page * pagesize)
                            .SetMaxResults(pagesize)
                            .AddOrder(Order.Asc(Projections.Id()))
                            .List<object>();

                        foreach (var obj in objects)
                        {
                            // get property values as string
                            var values = ToPropertyValues(factory, classMetaData, properties, string.Empty, obj).Select(Serialize);

                            writer.WriteLine(string.Join(SEPERATOR, values));
                        }

                        page++;
                    } while (objects.Count > 0);
                }
            });
        }
        zip.Save(dataFile);
    }
} 
```

并导入

```
public void ImportData(NHCfg.Configuration config, ISessionFactory factory, string dataFile)
{
    using (var zip = new ZipFile(dataFile))
    using (var session = factory.OpenSession())
    using (var tx = session.BeginTransaction())
    {
        var filesAndMaps = from file in zip.EntryFileNames
                           join map in config.ClassMappings on Path.GetFileNameWithoutExtension(file) equals map.EntityName
                           select new { Filename = file, Entitymap = map };

        foreach (var fileAndMap in filesAndMaps)
        {
            using (Stream stream = zip[fileAndMap.Filename].OpenReader())
            using (StreamReader reader = new StreamReader(stream))
            {
                // mapping der Klasse
                var classMetadata = factory.GetClassMetadata(fileAndMap.Entitymap.EntityName);

                var propertyNames = reader.ReadLine().Split(SEPERATOR[0]).Select(str => str.EndsWith("_Id") ? str.Remove(str.Length - "_Id".Length) : str).ToArray();

                // propertyNamen(/pfade) und typen aus dem mapping holen
                List<string> names = new List<string>();
                List<IType> itypes = new List<IType>();

                names.AddRange(classMetadata.PropertyNames);
                itypes.AddRange(classMetadata.PropertyTypes);
                for (int index = names.Count - 1; index >= 0; index--)
                {
                    var propertyType = itypes[index];
                    if (propertyType.IsComponentType)
                    {
                        var basename = names[index];
                        var componentType = (ComponentType)propertyType;
                        names.RemoveAt(index);
                        names.InsertRange(index, componentType.PropertyNames.Select(name => basename + "." + name));
                        itypes.RemoveAt(index);
                        itypes.InsertRange(index, componentType.Subtypes);
                        index += componentType.Subtypes.Length;
                    }
                    else if (propertyType.IsEntityType)
                    {
                        itypes[index] = factory.GetClassMetadata(((EntityType)propertyType).GetAssociatedEntityName()).IdentifierType;
                    }
                }

                // mit den namen aus der csv abgleichen um den index im array der namen und typen zu bestimmen
                int[] indices = new int[propertyNames.Length];
                for (int i = 0; i < indices.Length; i++)
                {
                    indices[i] = names.IndexOf(propertyNames[i]);
                }

                object[] deserialisedValues = new object[itypes.Count];
                object[] objectValues = new object[classMetadata.PropertyTypes.Length];

                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    string[] serialisedValues = line.Split(SEPERATOR[0]);

                    // Werte deserialisieren
                    for (int i = 0; i < serialisedValues.Length; i++)
                    {
                        // nur deserialisieren wenn es das property überhaupt noch gibt
                        if (indices[i] >= 0)
                            deserialisedValues[indices[i]] = Deserialize(serialisedValues[i], itypes[indices[i]].ReturnedClass);
                    }

                    int offset = 0;
                    for (int i = 0; i < objectValues.Length; i++)
                    {
                        var propertyType = classMetadata.PropertyTypes[i];
                        if (propertyType.IsComponentType)
                        {
                            objectValues[i] = ToComponentObject(deserialisedValues, ref offset, (ComponentType)propertyType, session);
                        }
                        else
                        {
                            objectValues[i] = (propertyType.IsEntityType && deserialisedValues[offset] != null) ?
                                session.Load(((ManyToOneType)propertyType).GetAssociatedEntityName(), deserialisedValues[offset]) :
                                deserialisedValues[offset];

                            offset++;
                        }
                    }
                    object entity = classMetadata.Instantiate(null, EntityMode.Poco);

                    classMetadata.SetPropertyValues(entity, objectValues, EntityMode.Poco);

                    session.Save(entity);
                }
            }
        }
        tx.Commit();
    }
} 
```

不存在的功能是供读者练习的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T00:15:32.317

很好的答案 Firo，可以把方法“ToPropertyNames”、“ToPropertyValues”和“ToComponentObject”的代码吗？

我补充说要使用它，需要库[DotNetZip](http://dotnetzip.codeplex.com/)

# c# - ScatterViewItem Pixelsense 中的多个元素

> ID：12353718
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:34.290
> 
> 标签：c#, wpf, pixelsense

我有一个关于`ScatterViewItem`WPF 表面控制的问题。

我想在控件中有一个图像——我可以这样做——但我也想在同一个 ScatterViewItem 中有更多的控件，比如删除按钮。

现在我被困在如何在 ScatterViewItem 控件中获取多个元素。我尝试了`Canvas`，但这看起来不太正确，因为您不能像使用 ScatterViewItem 控件那样使用图像。

有没有人有可以帮助我的想法或代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:58:56.600

您可以简单地使用任何可以按比例缩放的容器。我通常在 ScatterViewItem 中使用 Grid 容器，它允许我在 Grid 中拥有任意数量的嵌套元素。

Canvas 的问题在于它不能自动调整大小，而且因为 ScatterViewItems 是为**调整大小**和旋转而设计的，所以这不是一个很好的匹配。

XAML：

```
<s:ScatterView >    
    <Grid Width="Auto" Height="Auto">
        <s:SurfaceButton />
    </Grid>
</s:ScatterView> 
```

# jquery - 除非页面调整大小，否则隐藏滚动条

> ID：12353719
> 
> 赞同：6
> 
> 时间：2012-09-10T14:24:36.413
> 
> 标签：jquery, html, scrollbar, mcustomscrollbar

我需要一个用于个人项目的自定义滚动条插件（“自定义”是指基本惯性效果、自定义图像等）。我的选择是[mCustomScrollbar](http://manos.malihu.gr/jquery-custom-content-scroller)。

文档确实很清楚，我在实现脚本时没有遇到任何问题，但它似乎只有在我调整页面大小时才有效，好像不需要滚动一样。

事实上，滚动条`style="display: hidden"`在一个完全加载的页面上，就像在这个[问题](https://stackoverflow.com/questions/9370179/scrollbar-automatically-hidden-unless-i-resize-the-page)中一样（但我找不到任何有用的答案）。

我相信有一些`height`问题与`slidesjs`（我也在使用）相关，但我找不到它......这里有一些代码：

（[有](http://canteletermoidraulica.com/preview/prodotti.html)整页，所以你可以用firebug查看代码......只需进入“Pulcini”查看长内容）

```
<head>
  <!-- everything is included -->
  <link href="css/style.css" type="text/css" rel="stylesheet" />
  <link href="css/jquery.mCustomScrollbar.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
  <script type="text/javascript" src="js/jquery.mCustomScrollbar.js"></script>
  <script>
    $(function(){
      $("#slides").slides({
        generatePagination: false,
        pagination: true,
        paginationClass: 'pagination'
      });
    });
  </script>
  <script>
    (function($){
      $(window).load(function(){
        $("#slide2").mCustomScrollbar();
      });
    })(jQuery);
  </script>
</head>
<body>
  <div id="slides">
    <!-- other stuff -->
    <div class="slides_container">
      <div id="slide1">
        <h2>Uova</h2>
        <p>Text1...</p>
      </div>
      <!-- slide2 is the scrollbar div -->
      <div id="slide2">
        <h2>Blabla</h2>
        <p>Lorem ipsum</p><br />
      </div>
    </div>
  </div>
</body> 
```

CSS：

```
div#slides {
  height: 506px;
}
.slides_container {
  width: 900px;
  height: 506px;
}

.slides_container, div#slide1, div#slide2, div#slide3, {
  width: 808px;
  height: 366px;
  display: block;
  float: left;
  overflow-y: auto;
}

.slides_container {
  margin-top: 30px;
  margin-bottom: 30px;
  height: 366px;
}​ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T05:42:03.113

我有同样的问题。`updateOnBrowserResize: true`所以我更改了, 和 的流体代码`updateOnContentResize: true`，现在它适用于所有 javascript。

```
(function($) {  
  $(window).load(function() {  
    $("#content_1").mCustomScrollbar({  
      scrollEasing:"easeOutCirc",  
      mouseWheel:"auto",   
      autoDraggerLength:true,   
      advanced:{  
        updateOnBrowserResize:true,   
        updateOnContentResize:true   
      } // removed extra commas  
    });  
  });  
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T02:32:42.613

您正在初始化 mCustomScrollbar 而其所在的容器仍处于隐藏状态，因此浏览器无法计算 div 的高度。您需要在 div 可见时触发 resize 事件，或者在滚动条第一次在页面上变为活动状态之前不要初始化滚动条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T12:39:44.520

[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

这是自定义滚动条的非常好的链接我也在我的项目中使用了这个插件，你可以轻松地自定义它，嵌套滚动条也可以在这里使用。

# hive - 如何从 grunt shell 在猪拉丁语中运行宏？

> ID：12353724
> 
> 赞同：4
> 
> 时间：2012-09-10T14:24:47.997
> 
> 标签：hive, apache-pig

我有一个宏，可以在过滤数据后计算记录数。但是当我在 grunt shell 中运行宏时，会出现以下错误：

```
grunt> DEFINE count_by_group(X) RETURNS Y { 
           A = GROUP $X  ALL;
           $Y = FOR EACH A GENERATE COUNT($X);
  }; 
```

随之而来的错误：

```
ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2999:
Unexpected internal error. Can not create a Path from a null string 
```

猪日志中的完整堆栈跟踪：

```
================================================================================
Pig Stack Trace
---------------
ERROR 2999: Unexpected internal error. Can not create a Path from a null string

java.lang.IllegalArgumentException: Can not create a Path from a null string
    at org.apache.hadoop.fs.Path.checkPathArg(Path.java:78)
    at org.apache.hadoop.fs.Path.<init>(Path.java:90)
    at org.apache.pig.impl.io.FileLocalizer.fetchFilesInternal(FileLocalizer.java:770)
    at org.apache.pig.impl.io.FileLocalizer.fetchFile(FileLocalizer.java:737)
    at org.apache.pig.parser.QueryParserDriver.getMacroFile(QueryParserDriver.java:350)
    at org.apache.pig.parser.QueryParserDriver.makeMacroDef(QueryParserDriver.java:406)
    at org.apache.pig.parser.QueryParserDriver.expandMacro(QueryParserDriver.java:268)
    at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:169)
    at org.apache.pig.PigServer$Graph.validateQuery(PigServer.java:1565)
    at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1538)
    at org.apache.pig.PigServer.registerQuery(PigServer.java:540)
    at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:970)
                                                                                                                                                                                              org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:386)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
    at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)
    at org.apache.pig.Main.run(Main.java:490)
    at org.apache.pig.Main.main(Main.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
 ================================================================================ 
```

请帮忙。提前致谢。

问候，

钱丹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T05:07:56.963

你不能；[grunt 不支持宏](http://grokbase.com/p/pig/user/124cv2k7db/macros-in-grunt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T09:02:59.963

通过将宏分配给关系，在 Pig Latin 代码中调用该宏。宏不能在命令行中传递。

# android - Chrome 上的 z-index 问题（Android 4.1）

> ID：12353727
> 
> 赞同：0
> 
> 时间：2012-09-10T14:24:51.780
> 
> 标签：android, google-chrome, z-index, viewport

在运行 4.1.1 的 Galaxy Nexus 上发现了一个奇怪的 Chrome 错误（在旧的 android 浏览器上不会发生）

如果您查看[带有视口元标记的测试](http://dl.dropbox.com/u/6910873/android-test/test1.html)（内容粘贴在下面），您会期望 #container 移动到 #header 上方，因为它具有更高的 z-index 但它低于它。

```
<!DOCTYPE html>
<html>
<head>
    <title>Android Bug?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <style type="text/css">
        html, body { padding: 0; }
        #header {
            background: green;
            width: 100%;
            height: 230px;
            top: 0;
            left: 0;
            right: 0;
            position: fixed;
            z-index: 100;
        }
        #container {
            background: blue;
            padding: 500px 0;
            margin-bottom: 1000px;
            position: relative;
            z-index: 200;
            top: 230px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="header"></div>
    <div id="container"></div>
</body>
</html> 
```

如果您删除视口元标记，那么它会按预期工作[没有视口元标记的测试](http://dl.dropbox.com/u/6910873/android-test/test2.html)

有谁知道发生这种情况是有原因的，还是 Chrome/Android 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:10:03.813

这是默认浏览器的 Android 错误。它发生在许多设备上（包括我的 Maxx 4.0.4），不确定设备的完整列表是什么。

它受固定位置的影响。虽然这会改变您网站的布局，但将标题设置为 position:absolute; 将确保尊重 z-index。

至少对于移动设备而言，一些较旧的 iOS 设备并不总是尊重固定位置元素，因此需要考虑这一点。

# ios - UIButton (w/image) 在应用基于旋转的 CGAffineTransform 后对设备方向做出奇怪的反应

> ID：12353729
> 
> 赞同：1
> 
> 时间：2012-09-10T14:25:14.773
> 
> 标签：ios, uikit, uibutton, orientation, cgaffinetransform

所以，我有一个 UIButton（由一个图像组成），当我点击它时应用一个 CGAffineTransform 以突出它所处的状态：

```
- (void)animateMasterAddButton
{
    CGAffineTransform buttonTransform;

    // Button state hasn't been changed at this point, so selected == NO applies to when the button is *about* to be selected 
    if(self.masterAddButton.selected == NO)
    {
        CGAffineTransform buttonRotationTransform = CGAffineTransformMakeRotation((135.0 * M_PI) / 180);
        buttonTransform = CGAffineTransformConcat(CGAffineTransformIdentity, buttonRotationTransform);
    }
    else
    {
        buttonTransform = CGAffineTransformIdentity;
    }

    [UIView animateWithDuration: 0.3
                     animations: ^{
                         self.masterAddButton.transform = buttonTransform;
                     }];
} 
```

如果我将设备保持在相同的方向，这可以正常工作。但是，一旦我转动设备，UIButton 就会消失，*但前提是选择了 UIButton*（即，仅当旋转变换生效时）。我在视图控制器的`willRotateToInterfaceOrientation:duration:`方法中记录了按钮的框架和边界，结果如下：

在未选择按钮的情况下旋转设备：

> 框架：{{8, 8}, {57, 57}}
> 边界：{{0, 0}, {57, 57}}（这些是正确的值）

选择按钮旋转设备：

> 帧：{{-4, -4}, {80, 80}}
> 边界：{{0, 0}, {0, 113.137}}

在第二组结果中，框架是正确的，因为旋转后的图像有它的角，所以会占用更多的空间。然而，界限表明有些事情是古怪的。我猜由于边界宽度为零，按钮在那里但太窄而无法渲染。

谁能告诉我为什么会发生这种情况，以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:13:27.333

搞定了，有点侧身思考。基本上，一旦旋转动画完成，转换后的按钮图像就会被替换为与动画应用旋转量相同的版本（我编写了一个 UIImage 类别方法来执行此过程）。然后使用 禁用按钮上的转换`CGAffineTransformIdentity`。由于旋转设备时按钮上不存在任何变换，因此它保持不变:-)

这是代码：

```
- (void)animateMasterAddButton
{
    CGFloat addButtonRotationAngle = AddButtonRotationAngle * -1.0;    // AddButtonRotationAngle is a const float defined at the top of .m file
    CGAffineTransform buttonTransform;
    UIImage *rotatedAddButtonImage = [UIImage imageNamed: @"Add button"];

    if(self.masterAddButton.selected == NO)
    {
        addButtonRotationAngle =  AddButtonRotationAngle;
        rotatedAddButtonImage = [UIImage rotatedImageFromImage: rotatedAddButtonImage withAngle: (addButtonRotationAngle * M_PI) / 180];
        // rotatedImageFromImage:withAngle: is a self-written category method on UIImage
    }

    CGAffineTransform buttonRotationTransform = CGAffineTransformMakeRotation((addButtonRotationAngle * M_PI) / 180);
    buttonTransform = CGAffineTransformConcat(CGAffineTransformIdentity, buttonRotationTransform);

    [UIView animateWithDuration: 0.3
                     animations: ^{
                         self.masterAddButton.transform = buttonTransform;
                     }
                     completion: ^(BOOL finished) {
                         [self.masterAddButton setImage: rotatedAddButtonImage forState: UIControlStateNormal];
                         self.masterAddButton.transform = CGAffineTransformIdentity;
                     }];
} 
```

# c - OpenCV中像素邻域差异的高效算法

> ID：12353730
> 
> 赞同：0
> 
> 时间：2012-09-10T14:25:21.543
> 
> 标签：c, image-processing, opencv, pixel

我正在阅读[这篇](http://www.eecs.qmul.ac.uk/~cfshan/papers/shan-etal-pr07.pdf)文章和[这篇](http://www.research.att.com/people/Gibbon_David_C/library/publications/dg19960101120000.pdf)关于手/头跟踪的论文。他们都谈到了检测运动计算每个像素邻域的差异并将结果与​​阈值进行比较：

引用第一篇论文：

> 我们使用参考文献中描述的时间差分方法。[41]，它计算每个像素周围邻域中差异的绝对值，然后通过对所有相邻像素的差异求和来得出累积的差异。当累积的差值高于预定阈值时，像素被分配到移动区域。

有没有一种有效的方法（可能在 OpenCV 中）？
我写的代码非常幼稚，除了失去实时性之外，似乎没有比更简单的像素到像素差异更好的结果：

```
template<class T> class Image {
private:
    IplImage* imgp;
public:
    Image(IplImage* img=0) {imgp=img;}
    ~Image(){imgp=0;}
    void operator=(IplImage* img) {imgp=img;}
    inline T* operator[](const int rowIndx) {
        return ((T *)(imgp->imageData + rowIndx*imgp->widthStep));}
};

typedef Image<unsigned char>  BwImage;
typedef Image<float>          BwImageFloat;

void computeMovingRegion( IplImage* prev,  IplImage* cur, IplImage *mov) {

    BwImage _prev(prev);
    BwImage _cur(cur);
    BwImage _mov(mov);

    for (int i = 3; i<prev->height-3; i++) {
        for (int j=3; j<prev->width-3; j++) {

            int res=0;

            for (int k=i-3; k<i+3; k++) 
                for (int n=j-3; n<j+3; n++) 
                    res += abs(_cur[k][n] -_prev[k][n]);

            if (res>2000) {
                _mov[i][j]=_cur[i][j];
            }
            else
                _mov[i][j]=0;

        }
    }
} 
```

图像为灰度。不要认为这很重要，但我使用的是 MacOS 10.8 和 Xcode 4.4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:30:36.157

`abs(_cur[] - prev[])`如果您首先计算绝对差异图像（即）然后对其进行迭代，您应该能够消除很多冗余。除此之外，您还可以进行更多优化，但这将是一个相对较少努力的良好开端。

另请注意，您的循环索引看起来错误 - 如果您想做 7x7 邻域操作，它应该是：

```
for (int k=i-3; k<=i+3; k++) 
    for (int n=j-3; n<=j+3; n++) 
        ... 
```

# android - 如何在处理时使整个android屏幕（当前）无响应？

> ID：12353731
> 
> 赞同：0
> 
> 时间：2012-09-10T14:25:21.787
> 
> 标签：android, user-interface, block

我有一项活动，其中包含标题（标题栏）。此标头还包含我的应用程序的同步功能的图像。根据客户的要求，我希望当用户点击这个按钮时，这个图像（按钮）的动画开始，这是旋转动画（我已经实现了这个动画）。但是在执行此动画时，我想冻结整个屏幕，以便用户在同步进行时无法点击其他视图。到目前为止，我已经使用了以下方法，但没有成功：

```
private boolean stopUserInteractions = false;
    public boolean dispatchTouchEvent(int i) {
    View v = imgSync;
    if (v.getId() == R.list.imgSync) {
        System.out.println("UI Blocked...");
        return false;
        } 
    else {
            return super.dispatchTouchEvent(ev);
        }

        return false;
} 
```

任何人都可以指导我吗？任何技巧/片段或任何其他提示。 **编辑**：我不想在这个同步过程发生时使用 ProgressDialog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:38:50.990

在你的 Activity 中有一个 OnTouchListener 类，或者让你的 Activity 实现 OnTouchListener。如果要监听触摸事件，则活动布局的所有子级都应设置 this 的单个对象。在侦听器中，检查您是否应该处理点击。

# oracle - oracle sql中违反PK

> ID：12353732
> 
> 赞同：1
> 
> 时间：2012-09-10T14:25:25.007
> 
> 标签：oracle, insert, sequence, primary-key, unique-constraint

我想知道是否有人可以帮助我解决这个问题。我在sql中运行了整个东西，但它给了我这个错误：

> 错误报告：SQL 错误：ORA-00001：违反唯一约束 (GAMES.ATHLETE_PK) 00001。 00000 - “违反唯一约束 (%s.%s)” *原因：UPDATE 或 INSERT 语句试图插入重复键。对于在 DBMS MAC 模式下配置的 Trusted Oracle，如果在不同级别存在重复条目，您可能会看到此消息。*操作：要么删除唯一限制，要么不插入密钥。

我想在一个事务中一次插入所有记录。并且还使用序列来生成新的主键。我试着一一插入，没关系。但是，如果我一次全部插入，这就是错误...

```
INSERT ALL 
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Michael Phelps', to_date('1985-06-30','yyyy-mm-dd'), 'Towson', 'USA', 'M', 193, 88, 'USA')
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Stephanie Rice', to_date('1988-06-17','yyyy-mm-dd'), 'Brisbane', 'AUS', 'F', 176, 67, 'AUS')
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Rebecca Adlington', to_date('1989-02-17','yyyy-mm-dd'), 'Mansfield', 'GBR', 'F', 179, 870, 'GBR')
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Lee Chong Wei', to_date('1982-10-21','yyyy-mm-dd'), 'Perak', 'MAS', 'M', 170, 60, 'MAS')
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Lin Dan', to_date('1983-10-14','yyyy-mm-dd'), 'Fujian', 'CHN', 'M', 176, 68, 'CHN')
    INTO athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
    VALUES (athlete_no_seq.nextval, 'Peter Gade', to_date('1976-12-14','yyyy-mm-dd'), 'Aalborg', 'DEN', 'M', 183, 73, 'DEN')
INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
    INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
    INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
    INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
    INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
    INTO competes (athlete_no, discipline_code, sg_gameno)
    VALUES (athlete_no_seq.currval, (SELECT discipline_code FROM discipline where discipline_name = 'Swimming'), 30)
INTO venue(venue_no, venue_name, venue_location, venue_usedfrom, venueused_to, venue_seatingcapacity, venue_structure, venue_use)
    VALUES(venue_no_seq.nextval, 'Aquatics Centre', 'Olympics Park, East London', to_date('2012-07-28','yyyy-mm-dd'), to_date('2012-10-08','yyyy-mm-dd'), 17500, 'N', 'P')
    INTO venue(venue_no, venue_name, venue_location, venue_usedfrom, venueused_to, venue_seatingcapacity, venue_structure, venue_use)
    VALUES(venue_no_seq.nextval, 'Wembley Arena', 'North West London', to_date('2012-07-28','yyyy-,mm-dd'), to_date('2012-08-05','yyyy-mm-dd'), 6000, 'E', 'P')
SELECT * FROM dual;
commit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:34:59.560

发布的代码使用 INSERT ALL 语法在单个语句中插入多行。它尝试使用序列 NEXTVAL 为每一行生成唯一标识符。

[文档非常清楚](http://docs.oracle.com/cd/B28359_01/server.111/b28286/pseudocolumns002.htm#sthref812)NEXTVAL的功能：

> “在包含对 NEXTVAL 的引用的单个 SQL 语句中，Oracle 将序列递增一次”

因此，对 NEXTVAL 的每个调用都会从序列中返回*相同*的值，因此语句会抛出 ORA-00001。

问题是 OP 的代码滥用了多表插入语法。它旨在将一组源数据中的行分布到多个表中，或者有条件地将行操作到一个表中。无论哪种情况，它都假定源数据已经有一个主键。

有多种解决此问题的方法，从对 ID 进行硬编码到使用多个单表插入语句。

这是使用发布的数据填充这些表的一种方法：

```
insert into athlete (athlete_no, athlete_name, athlete_birthdate, athlete_birthplace, athlete_born_country, athlete_gender, athlete_height, athlete_weight, athlete_team_country)
select athlete_no_seq.nextval , nm, dt, pl, ctry, gn, ht, wt, tm
from (
    select 'Michael Phelps' nm, to_date('1985-06-30','yyyy-mm-dd') dt, 'Towson' pl, 'USA' ctry, 'M' gn, 193 ht, 88 wt, 'USA' tm from dual union all
    select 'Stephanie Rice', to_date('1988-06-17','yyyy-mm-dd'), 'Brisbane', 'AUS', 'F', 176, 67, 'AUS' from dual union all
    select 'Rebecca Adlington', to_date('1989-02-17','yyyy-mm-dd'), 'Mansfield', 'GBR', 'F', 179, 870, 'GBR' from dual union all
    select 'Lee Chong Wei', to_date('1982-10-21','yyyy-mm-dd'), 'Perak', 'MAS', 'M', 170, 60, 'MAS' from dual union all
    select 'Lin Dan', to_date('1983-10-14','yyyy-mm-dd'), 'Fujian', 'CHN', 'M', 176, 68, 'CHN' from dual union all
    select 'Peter Gade', to_date('1976-12-14','yyyy-mm-dd'), 'Aalborg', 'DEN', 'M', 183, 73, 'DEN' from dual
    )
/    

insert into competes (athlete_no, discipline_code, sg_gameno)
select ath.athlete_no, disc.discipline_code, 30
from athlete ath
     cross join discipline disc
where disc.discipline_name = 'Swimming'
/

insert into venue(venue_no, venue_name, venue_location, venue_usedfrom, venueused_to, venue_seatingcapacity, venue_structure, venue_use)
select venue_no_seq.nextval, nm, loc, dtf, dtt, cap, vs, vu
from (
    select 'Aquatics Centre' nm, 'Olympics Park, East London' loc, to_date('2012-07-28','yyyy-mm-dd') dtf, to_date('2012-10-08','yyyy-mm-dd') dtt, 17500 cap, 'N' vs, 'P' vu  from dual union all
    select 'Wembley Arena', 'North West London', to_date('2012-07-28','yyyy-,mm-dd'), to_date('2012-08-05','yyyy-mm-dd'), 6000, 'E', 'P'  from dual 
    )
/ 
```

# delphi - 如何完成通过函数的无类型参数传递的记录？

> ID：12353736
> 
> 赞同：4
> 
> 时间：2012-09-10T14:25:26.763
> 
> 标签：delphi, record, delphi-6, finalize

我可以将“任何”记录类型传递给我的程序吗？

很多时候，我将“记录”与字符串一起使用。

```
type 
  TR = record
    a: string;
    b: string;
  end; 
```

要清除它们，我需要写：

```
Finalize(R);
FillChar(R, SizeOf(R), #0); 
```

问题是我如何通过任何类型的记录来清除它？

为此，我得到了这个提示：“表达式不需要初始化/完成”。

```
procedure ClearRecord(var R);
begin
  Finalize(R);
  FillChar(R, SizeOf(R), #0);
end; 
```

感谢您提供的每一个信息！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T14:45:56.340

不要让它过于复杂。如果您不想写一个两行来清除记录，请考虑声明：

```
Const TR_Empty: TR = (); 
```

并使用它：

```
R := TR_Empty; 
```

正如其他人所评论的那样，这样做的通用程序是不值得的。

如果您有 Delphi-2009 或更新版本，则此代码对清除记录有效：

```
R := Default(TR); 
```

# jquery - 如何检查 div 是否为可见状态？

> ID：12353741
> 
> 赞同：41
> 
> 时间：2012-09-10T14:25:47.033
> 
> 标签：jquery

我有这样的标签。

```
<li id="singlechatpanel-1" style="visibility: hidden;">
     //content
</li> 
```

尝试像这样检查它：

```
$(".subpanel a").click(function() 
     {
        var chatterNickname = $(this).text();

        if(!$("#singlechatpanel-1").is(':visible'))
        {
            alert("Room 1 is filled.");
            $("#singlechatpanel-1").css({'visibility':'visible'});
            $("#singlechatpanel-1 #chatter_nickname").html("Chatting with: " + chatterNickname);
        } 
```

如果条件总是返回假。如何检查此 div 的可见性状态？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-05-29T11:14:50.440

### 检查它是否可见。

`$("#singlechatpanel-1").is(':visible');`

### 检查它是否隐藏。

`$("#singlechatpanel-1").is(':hidden');`

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-09-10T14:30:50.693

`is(':visible')`检查`display`元素的属性，可以使用`css`方法。

```
if (!$("#singlechatpanel-1").css('visibility') === 'hidden') {
   // ...
} 
```

如果您将`display`元素的属性设置为，`none`那么您的`if`语句将返回`true`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-03-11T09:37:48.803

如果元素被 jquery 隐藏然后使用

```
if($("#elmentid").is(':hidden')) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-10T14:29:17.917

您可以使用[`.css()`](http://api.jquery.com/css/)来获取“可见性”的值：

```
 if( ! ( $("#singlechatpanel-1").css('visibility') === "hidden")){
 } 
```

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-10T15:20:16.537

您可以使用 (':hidden') 方法来查找您的 div 是否可见。如果您在代码中多次使用它，缓存元素也是一个好习惯。

```
$(".subpanel a").click(function() 
     {
        var chatterNickname = $(this).text();
        var $chatPanel = $("#singlechatpanel-1");

        if(!$chatPanel.is(':hidden'))
        {
            alert("Room 1 is filled.");
            $chatPanel.show();
            $("#singlechatpanel-1 #chatter_nickname").html("Chatting with: " + chatterNickname);
        }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-01T09:55:34.463

```
if (!$('#singlechatpanel-1').css('display') == 'none') {
   alert('visible');
}else{
   alert('hidden');
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-10T14:33:10.603

将您添加`li`到一个类中，并`$(".myclass").hide();`在开始时隐藏它而不是可见性样式属性。

据我所知，jquery 使用`display`style 属性来显示/隐藏元素而不是可见性（这可能是错误的，在任何一种情况下都值得尝试）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-30T16:33:44.313

您可以通过以下**两种方式中的任何一种来完成：**

```
$("#elementId").css('visibility')
and
$("#elementId").is(':visible'); 
```

如果您的元素**可见**，那么

```
$("#elementId").css('visibility') will return "visible"
and
$("#elementId").is(':visible') will return true 
```

但是如果您的元素**不可见**，那么

```
$("#elementId").css('visibility') will return undefined
and
$("#elementId").is(':visible') will return false 
```

# c# - 除了luxand，什么是最好的人脸检测.net

> ID：12353742
> 
> 赞同：-2
> 
> 时间：2012-09-10T14:25:55.093
> 
> 标签：c#, face-detection

我想知道最好的人脸检测软件

我尝试了luxand facesdk，但它太多了。每个过程每年 4000 美元。

那么 .NET 、 ASP.NET 或 MVC 的替代方案是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:28:49.997

你可以试试`OpenCV`图书馆

链接： http: [//www.codeproject.com/Articles/23191/Face-and-Eyes-Detection-Using-OpenCV](http://www.codeproject.com/Articles/23191/Face-and-Eyes-Detection-Using-OpenCV)

# javascript - 单击时如何更改单选按钮的css

> ID：12353745
> 
> 赞同：-4
> 
> 时间：2012-09-10T14:26:16.550
> 
> 标签：javascript, html, css, onclick

```
<style type="text/css">
.radiostyle {
    background-color: #999;
}
</style>

<label for="a1" class="radiostyle">
<Input type = radio Name = 1 Value = 100 Onclick="changecss()" id="a1">
100 bucks</label> 
```

函数 changecss() 的代码是什么，以便在单击单选按钮时，单选背景更改为其他颜色，例如绿色。请帮忙，我在网上找了几个小时没有解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:38:09.663

您可以使用仅 CSS 解决方案 (CSS3)：

HTML：

```
<input type="radio" name="1" value="100" id="a1">
<label for="a1" class="radiostyle">100 bucks</label> 
```

CSS：

```
.radiostyle {
    background-color: #999;
}
input[type=radio]:checked+label {
/* Or `#a1:checked+label` if you only want it for that input */
    background-color: red;
} 
```

[http://jsfiddle.net/peSJG/](http://jsfiddle.net/peSJG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:32:29.150

这是一个快速的 jQuery 示例，说明如何做到这一点：

[http://jsfiddle.net/NuzpR/](http://jsfiddle.net/NuzpR/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:30:52.443

```
function changecss() {
    var rb = document.getElementsByClassName('radiostyle');
    rb[0].style.backgroundColor = 'red';
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/QFtBt/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:33:52.880

如果您使用的是 Jquery，您可以这样做：

```
$("#a1").click(changecss);

function changecss()
{
 $(this).parent().removeClass("radiostyle").addClass("selectedStyle");
}​ 
```

对于直接 javascript，其中 selectedStyle 定义了您的样式：

```
function changecss()
{
    this.parentNode.setAttribute("class", "selectedStyle");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:48:10.337

这应该可以帮助你..

*   你必须使用 id 属性
*   使用获取该元素`getElementById()`
*   现在更改您喜欢的属性

.radiostyle { 背景颜色：#999; } .radiostyle1 { 背景颜色：#ffff; }

```
<script type="text/javascript">
    function changecss()
    {
        var e= document.getElementById("a1");
        e.className="radiostyle1";
    }
</script>

 <label for="a1" id="a1" class="radiostyle">
    <Input type ="radio" id="r1" Name ="r1" Value = 100 Onclick="changecss()" id="a1">
    100 bucks
</label> 
```

# javascript - 从网格拖放到树而不添加树节点

> ID：12353747
> 
> 赞同：0
> 
> 时间：2012-09-10T14:26:26.550
> 
> 标签：javascript, extjs, drag-and-drop, extjs4

嘿，

我希望能够将项目（书签）从网格拖动到树（类别），但我不希望将删除的书签项目作为新节点添加到类别树中，我不希望将其从网格中删除。我只想捕获 dropnode-event 并更新书签的 category-id。

如何才能做到这一点？到目前为止我得到的是以下内容：http:
[//jsfiddle.net/suamikim/A3T6W/](http://jsfiddle.net/suamikim/A3T6W/)

```
Ext.onReady(function() {
    // define model for tree
    Ext.define('Category', {
        extend: 'Ext.data.Model',

        fields: [
            { name: 'id',            type: 'int' },
            { name: 'parentCatId',    type: 'int' },
            { name: 'name',            type: 'string' }
        ]
    });

    // define model for grid
    Ext.define('Bookmark', {
        extend: 'Ext.data.Model',

        fields: [
            { name: 'id',        type: 'int' },
            { name: 'catId',    type: 'int' },
            { name: 'title',    type: 'string' },
            { name: 'url',        type: 'string' }
        ]
    });

    // Create the tree-panel
    var catTree = Ext.create('Ext.tree.Panel', {
        itemId: 'catTree',

        title: 'Categories',
        flex: 0.5,
        hideHeaders: true,
        rootVisible: false,
        allowDeselect: true,

        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop',
                dropGroup: 'bkmDDGroup',
                enableDrag: false,
                appendOnly: true
            }
        },

        store: Ext.create('Ext.data.TreeStore', {
            model: 'Category',
            proxy: {
                type: 'memory',
                reader: {
                    type: 'json',
                    root: 'categories'
                }
            }
        }),

        root: [],

        columns: [{
            xtype: 'treecolumn',
            dataIndex: 'name',
            flex: 1
        }],

        listeners: {
            afterrender: function(tree) {
                var root = tree.getRootNode();

                // load static data
                root.appendChild([{
                        id: 0,
                        parentCatId: -1,
                        name: 'Cat1',
                        expanded: true,
                        categories: [{
                                id: 2,
                                parentCatId: 0,
                                name: 'Cat1.1',
                                categories: []
                            },{
                                id: 3,
                                parentCatId: 0,
                                name: 'Cat1.2',
                                categories: []
                        }]
                    },{
                        id: 1,
                        parentCatId: -1,
                        name: 'Cat2',
                        categories: []
                }]);

                // select the first item
                tree.getSelectionModel().select(root.getChildAt(0));
            },

            selectionChange: function(model, selected, opts) {
                bkmGrid.filterBookmarks((selected && selected[0]) ? selected[0].get('id') : -1);
            }
        }
    });

    // Create the grid-panel
    var bkmGrid = Ext.create('Ext.grid.Panel', {
        itemId: 'bkmGrid',

        title: 'Bookmarks',
        flex: 1,

        viewConfig: {
            plugins: {
                ptype: 'gridviewdragdrop',
                dragGroup: 'bkmDDGroup'
            }
        },

        store: Ext.create('Ext.data.Store', {
            model: 'Bookmark',
            proxy: {
                type: 'memory'
            },
            data: [
                { id: 0, catId: 0, title: 'bkm1', url: 'http://www.url1.com' },
                { id: 1, catId: 0, title: 'bkm2', url: 'http://www.url2.com' },
                { id: 2, catId: 1, title: 'bkm3', url: 'http://www.url3.com' },
                { id: 3, catId: 1, title: 'bkm4', url: 'http://www.url4.com' },
                { id: 4, catId: 2, title: 'bkm5', url: 'http://www.url5.com' },
                { id: 5, catId: 3, title: 'bkm6', url: 'http://www.url6.com' }
            ]
        }),

        columns: [{
                text: 'Title',
                dataIndex: 'title',
                flex: 0.7
            },{
                text: 'URL',
                dataIndex: 'url',
                flex: 1,
                renderer: function(value, meta) {
                    meta.tdAttr = 'data-qtip="' + value + '"';
                    return '<a href="' + value + '">' + value + '</a>';
                }
        }],

        filterBookmarks: function(catId) {
            var store = this.getStore();

            store.clearFilter();
            if (catId >= 0) {
                store.filter('catId', catId);
            }
        }
    });

    // Create window which holds the dataview
    Ext.create('Ext.window.Window', {
        width: 500,
        height: 300,

        layout: {
            type: 'hbox',
            align: 'stretch'
        },

        items: [ catTree, bkmGrid ]
    }).show();
}); 
```

将书签放在树上后会引发以下异常：
“未捕获的 TypeError：对象 [对象对象] 没有方法 'updateInfo'”

在 appendChild 方法中抛出异常，最终根本不应该调用它。因此异常无关紧要，但我如何防止树在删除后尝试添加新节点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:20:22.437

我刚刚找到了一个看起来像这样的解决方案：http: [//jsfiddle.net/suamikim/A3T6W/4/](http://jsfiddle.net/suamikim/A3T6W/4/)

“魔术”只是删除 beforedrop-listener 中的记录数组。在删除之前，我将数组保存到我的树（this.droppedRecords）的自定义配置对象中，以便能够在下拉侦听器中再次访问数据：

```
 viewConfig: {
        plugins: {
            ptype: 'treeviewdragdrop',
            dropGroup: 'bkmDDGroup',
            enableDrag: false,
            appendOnly: true
        },
        listeners: {
            beforedrop: function(node, data, overModel, dropPos, opts) {
                this.droppedRecords = data.records;
                data.records = [];
            },
            drop: function(node, data, overModel, dropPos, opts) {
                var str = '';
                Ext.iterate(this.droppedRecords, function(record) {
                    str += record.get('title') + ' (id = ' + record.get('id') + ') dropped on ' + overModel.get('name') + '\n';
                });
                alert(str);

                this.droppedRecords = undefined;
            }
        }
    }, 
```

就是这样。

谢谢

# jquery-mobile - RedirectToAction 不会更改浏览器 URL

> ID：12353748
> 
> 赞同：11
> 
> 时间：2012-09-10T14:26:27.783
> 
> 标签：jquery-mobile, razor, asp.net-mvc-4

我试图通过执行以下语法从帐户控制器（帐户/登录）重定向到用户/索引。

```
return RedirectToAction("Index", "User"); 
```

它显示了正确的视图，但 URL 仍保留为帐户/登录。任何人都可以建议我如何实现同样的目标。我已经尝试了一些来自谷歌的搜索，但它们都不适合我。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-10T14:53:14.167

这是由 jQuery-mobile 引起的问题。默认情况下，jQM 将使表单使用 ajax 调用，因为这是在框架中执行页面导航的方式。[AJAX 导航在这里有更详细的解释。](http://view.jquerymobile.com/1.3.0/docs/widgets/navigation/)

解决方案是添加`data-ajax="false"`到用于初始服务器调用的表单标记。

所以你的表格看起来像这样：

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { data_ajax = "false" })) 
```

# android - 播放一个简单的视频文件，不工作

> ID：12353754
> 
> 赞同：0
> 
> 时间：2012-09-10T14:26:48.797
> 
> 标签：android

我制作了一个简单的应用程序来播放视频，但视频没有播放。我将视频文件放在 res/raw 文件夹中。

```
public class Video extends Activity {

private MediaController mc;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    VideoView video = (VideoView) findViewById(R.id.video);

    Uri uri = Uri.parse("android.resource://" + getPackageName() + "kidvideo");

    mc = new MediaController(this);
    video.setMediaController(mc);

    video.setVideoURI(uri);
    video.start();
} 
```

}

* * *

我已更改代码，以便可以从 SD 卡运行视频文件。我已将视频文件推送到 data/misc/video/ 文件夹中。并将代码更改为 -

```
public class Video extends Activity {

private MediaController mc;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 // Fill view from resource
    setContentView(R.layout.main);
    VideoView video = (VideoView) findViewById(R.id.video);

 // Load and start the movie
    video.setVideoPath("data/misc/video/pocket-bike-kid");
    video.start();

}

} 
```

但它不工作.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:29:48.170

您在包名称和视频 ID 之间缺少“/”。

此外，“kidvideo”不起作用。您需要使用 R.raw.kidvideo

# java - 计算对象中值的数量

> ID：12353755
> 
> 赞同：-3
> 
> 时间：2012-09-10T14:26:48.937
> 
> 标签：java

我写过这样的代码：

```
public void SetPosition(int lfp, int lhp, int rfp, int rhp)
{
        leftFront = lfp;
        leftHind = lhp;
        rightFront = rfp;
        rightHind = rhp;

        System.out.print((lfp+1) + "...");
        System.out.print((lhp+1) + "...");
        System.out.print((rfp+1) + "...");
        System.out.println((rhp+1) + "...");

} 
```

现在我想计算我的输出中有多少 (lfp+1)... 请让我知道如何执行此操作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:24:47.157

使用静态计数器

```
private static counter = 0 ; 
```

检查 lfp 的值后在函数中增加 this

# file - 使用 gedit 根据扩展名过滤文件

> ID：12353756
> 
> 赞同：0
> 
> 时间：2012-09-10T14:26:50.243
> 
> 标签：file, filter, gedit

有没有办法在 gedit 中包含或排除某些文件？

例如，在我的项目目录中，有 .metadata 文件。我怎样才能过滤它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:23:37.250

将以下内容放入侧面板过滤器框中，然后按 Enter

`*.metadata`

# jquery - 自定义滑块不太好用

> ID：12353758
> 
> 赞同：0
> 
> 时间：2012-09-10T14:26:55.233
> 
> 标签：jquery

我制作的滑块有问题，我需要它，以便当下一个 div 出现在 div 顶部的屏幕上时，它看起来很平滑，如果你看看我的 jsfiddle 你会看到它进来了在底部然后跳到顶部... [http://jsfiddle.net/Gfzwp/](http://jsfiddle.net/Gfzwp/)

如果你能帮助我，那就太好了，谢谢！

**html**

```
 <div class="section">
        <div class="controls">
            <div class="next"><span class="hidden">Next</span></div>
        </div>
         <div class="gallery" id="one">
            <div class="box">one</div>
            <div class="box">two</div>
            <div class="box">three</div>
        </div>
        <div class="gallery" id="two">
            <div class="box">one</div>
            <div class="box">two</div>
            <div class="box">three</div>
        </div>
    </div> 
```

**css**

```
 .section {
        width:100%;
        overflow:hidden;
        white-space:nowrap;
    }

    .gallery {
        width:100%;
        min-height:450px;
        display:inline-block;
        top:0;
        white-space:normal;
        float:left;
        padding:0px 0px 200px 49px;
    }

    .box {
        width:200px;
        height:200px;
        background:#ff0000;
        float:left;
        margin:0px 3px 3px 0px;    
    }

    .controls {
        position:absolute;
        z-index:3;
    }

    .controls .next {
        width:44px;
        height:133px;
        margin:0px 0px 0px 2px;
        cursor:pointer;
    }

jQuery    
​$('.controls .next').click(function(){
    $('.gallery#one').hide('slide', { direction: "left" }, 1000);
    $('.gallery#two').show('slide', { direction: "right" }, 1000);
});    ​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:46:23.213

添加`position:absolute`到图库 CSS。

更新小提琴：http: [//jsfiddle.net/johnkoer/Gfzwp/5/](http://jsfiddle.net/johnkoer/Gfzwp/5/)

# c# - log4net 通用故障。无法获取文件锁定

> ID：12353761
> 
> 赞同：13
> 
> 时间：2012-09-10T14:27:03.660
> 
> 标签：c#, log4net, config

我第一次尝试配置 log4net，我确信我已经正确配置了所有内容，但是，在获得空日志文件后，我打开了 log4net 调试器。我现在不断看到以下错误：

```
log4net:ERROR [RollingFileAppender] ErrorCode: GenericFailure. Unable to acquire lock on 
file "file path\file name" The process cannot access the file "file path\file name" because 
it is being used by another process. 
```

因此，我目前通过我的 Web.config 文件配置了 log4net：

```
<log4net debug="true">
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="Logs\\TransferPicturesApplicationLog.txt"/>
  <appendToFile value="true"/>
  <rollingStyle value="Size"/>
  <maxSizeRollBackups value="5"/>
  <maximumFileSize value="10MB"/>
  <staticLogFileName value="true"/>
  <filter type="log4net.Filter.LevelRangeFilter">
    <param name="LevelMin" value="ERROR"/>
    <param name="LevelMax" value="DEBUG"/>
  </filter>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %level %logger - %message%newline"/>
  </layout>
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
</appender>
<root>
  <level value="INFO"/>
  <appender-ref ref="RollingFileAppender"/>
</root>
<logger>
  <level value="DEBUG"/>
  <appender-ref ref="RollingFileAppender"/>
</logger>
</log4net> 
```

帮助！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T15:10:36.970

我也收到了这个错误，因为我在 appender 中指定了目录的名称而不是文件的名称，错误消息很神秘：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
      <file value="C:\DirectoryNameHere\MyBad" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:46:27.643

我的猜测是，您在尝试访问此路径的不同程序集中有多个 appender 副本，因此它们都尝试同时获取适当的日志文件。但是，可以肯定的是，我建议您使用[Unlocker](http://www.emptyloop.com/unlocker/)来确保您的文件没有被您不期望的其他东西持有。如果您有多个此 appender 实例试图打开同一个文件，那么您的问题将是您没有正确使用 appender；如果 appender 跨程序集使用，那么它的两次调用将不能很好地相互配合，从而导致像这样的已经在使用中的错误。如果是这种情况，重构可能是您唯一的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T09:54:37.443

当我尝试将日志文件写入子目录（与@PeteN 相同）时，我遇到了这个问题。当使用正确的语法时，这不再发生，在 de appender 配置集中：

```
<appender name="TestLogAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value=".\logDirectory\LogFileName.csv" />
  <....> 
```

希望这可以帮助

# java - Java SSL -OpenSSL- Snafu

> ID：12353764
> 
> 赞同：1
> 
> 时间：2012-09-10T14:27:09.870
> 
> 标签：java, sockets, ssl, applet

下面是我发现的一些关于“网络”的代码，但我无法让它工作。据我所知，它应该工作。遗憾的是，当我在 OpenSSL 工具包中使用 s_server 时，它没有注册连接。服务器是用 Cpp 编写的，并且运行良好（至少我有那么多）。任何人都可以为我做出适当的更正，将不胜感激。

```
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;
import java.io.*;

import java.applet.*;
import java.awt.*;

public class jclientssl extends Applet {

    public static void main() {

        try {
            SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
            SSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket("localhost", 9999);

            InputStream inputstream = System.in;
            InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
            BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

            OutputStream outputstream = sslsocket.getOutputStream();
            OutputStreamWriter outputstreamwriter = new OutputStreamWriter(outputstream);
            BufferedWriter bufferedwriter = new BufferedWriter(outputstreamwriter);

            String string = null;
            while ((string = bufferedreader.readLine()) != null) {
                bufferedwriter.write(string + '\n');
                bufferedwriter.flush();
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
    }

    public void paint(Graphics g) {

        g.drawString("Welcome to Java!!", 50, 60 );

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:51:04.480

如果您将此代码作为 Applet 运行，则[main 方法无关紧要](https://stackoverflow.com/questions/932052/why-do-applets-not-need-a-main)，因此您的套接字代码不会被执行。（并且，如果您想在独立应用程序中使用该 main 方法，那么它必须是`public static void main(String[])`）。

# c# - MEF/Prism 导出/导入属性的属性

> ID：12353765
> 
> 赞同：0
> 
> 时间：2012-09-10T14:27:16.330
> 
> 标签：c#, mvvm, prism, mef, prism-4

这是情况

我有 2 个单例类（实际上是 ViewModels）。

```
[Export]
[PartCreationPolicy(CreationPolicy.Shared)]
public class CompanyViewModel, INavigationAware
{
   private Model.Company _selected;

   [ImportingConstructor]
   public CompanyViewModel(Service.ICompany companyService)
   {
      Companies = companyService.Companies;       
   }

   [Export("SelectedCompany")]
   public Model.Company Selected
   {
      get
      {
         return _selected;
      }
      set
      {
         _selected = value;
      }
   }

   public ObservableCollection<Model.Company> Companies{get;set;}

   public void OnNavigatedTo(NavigationContext navigationContext)
   {
      _selected = Companies.First();
   }
   ~~~
} 
```

companyService 返回 2 个公司“A”和“B”。导航到 CompanyViewModel 类时，“A”被设置为选定的公司。然后用户选择公司“B”，CompanyViewModel 通过它的绑定更新。

```
[Export]
[PartCreationPolicy(CreationPolicy.Shared)]    
public class DepartmentViewModel, INavigationAware
{
   [Import("SelectedCompany")]
   private Model.Company _selectedCompany{get;set;};

   [ImportingConstructor]
   public DepartmentViewModel(Service.IDeparment departmentService)
   {
      Departments= departmentService.Departments;
   }

   public ObservableCollection<Model.Department> Departments{get;set;}

   public void OnNavigatedTo(NavigationContext navigationContext)
   {
      this.departmentService.Refresh(_selectedCompany);
   }
   ~~~
} 
```

在上述事件之后，DepartmentViewModel 被创建。问题是 DepartmentViewModel 中的公司属性设置为公司“A”而不是公司“B”，正如我所料，因为我认为 MEF 会导入最后一个值 Selected 设置为（在创建 DepartmentViewModel 之前）而不是第一个值它被设置为。

有人能告诉我到底发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:26:01.010

我相信您使用的 MEF 不是按照设计的那样。当您尝试使用 MEF 时，它不适用于“绑定”。MEF 用于创建组合应用程序。

在您的情况下，问题是 MEF`SelectedCompany`在创建`CompanyViewModel`. 这就是为什么它`A`总是返回。

使用另一种方法 -`DepartmentViewModel`为每个公司单独创建，或根据所选公司进行相应更新。不要为此使用 MEF - 仅将 MEF 用作“在启动期间初始化应用程序一次的容器”。

PS。实际上，我以前从未见过使用`Export`属性来表示属性。

# android - 如何使用光标从特定位置读取 jpg 文件

> ID：12353766
> 
> 赞同：0
> 
> 时间：2012-09-10T14:27:15.817
> 
> 标签：android, android-layout, android-intent, android-widget

我想了解如何使用光标在 sdcard 中指定的文件夹中生成 jpg 文件。我试图用光标选择特定文件夹中的 jpg 文件，我尝试了这个：

这是代码：

```
public static Uri getRandomImage(ContentResolver resolver) {

    String[] projection = new String[] {
        BaseColumns._ID,     
    };

    String folder = "/sdcard/DCIM/Wallpaper/";
    folder = folder + "%";
    Uri uri = Media.EXTERNAL_CONTENT_URI;
    String[] whereArgs = new String[]{folder};

    Cursor cursor = resolver.query(uri, projection, null, whereArgs, MediaColumns._ID);

    if (cursor == null || cursor.getCount() <= 0) {
            return null;
    }

    cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

    return Uri.withAppendedPath(uri, cursor.getString(0));
} 
```

但是这段代码给了我错误。

这是日志猫：

```
E/AndroidRuntime(11986): FATAL EXCEPTION: main
E/AndroidRuntime(11986): android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x26a490
E/AndroidRuntime(11986):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
E/AndroidRuntime(11986):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
E/AndroidRuntime(11986):    at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
E/AndroidRuntime(11986):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
E/AndroidRuntime(11986):    at android.content.ContentResolver.query(ContentResolver.java:245)
E/AndroidRuntime(11986):    at it.bisemanuDEV.slidepuzzle.SelectImagePreference.getRandomImage(SelectImagePreference.java:126)
E/AndroidRuntime(11986):    at it.bisemanuDEV.slidepuzzle.TileView.newGame(TileView.java:156)
E/AndroidRuntime(11986):    at it.bisemanuDEV.slidepuzzle.SlidePuzzleActivity.onOptionsItemSelected(SlidePuzzleActivity.java:377)
E/AndroidRuntime(11986):    at android.app.Activity.onMenuItemSelected(Activity.java:2762)
E/AndroidRuntime(11986):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
E/AndroidRuntime(11986):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
E/AndroidRuntime(11986):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
E/AndroidRuntime(11986):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
E/AndroidRuntime(11986):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
E/AndroidRuntime(11986):    at android.view.View$PerformClick.run(View.java:8819)
E/AndroidRuntime(11986):    at android.os.Handler.handleCallback(Handler.java:603)
E/AndroidRuntime(11986):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(11986):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(11986):    at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(11986):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(11986):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(11986):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(11986):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(11986):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:03:12.007

当我理解你的正确时，你想用你的 sd 卡中的图像设置一个 imageView。如果是这样，您可以像我的示例中那样进行操作：

```
 ImageView shopLogo = (ImageView) findViewById(R.id.img);
 Resources res = getResources();
 Bitmap bmp = BitmapFactory.decodeFile(YOUR_SDCARD_PATH);
 BitmapDrawable bd = new BitmapDrawable(res, bmp);
 shopLogo.setBackgroundDrawable(bd); 
```

YOUR_SDCARD_PATH 包含：

```
Environment.getExternalStorageDirectory().getAbsolutePath() + "/Directory/image.jpg";

Environment.getExternalStorageDirectory().getAbsolutePath() 
```

为您提供通往 SD 卡的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:45:36.677

从你有的例外：

```
cursor.moveToPosition(new Random().nextInt(cursor.getCount())); 
```

更准确地说：

```
new Random().nextInt(cursor.getCount()) 
```

正在返回游标范围之外的 cursor.getCount()。

来自`Random().nextInt(n)` java文档：

```
Returns a pseudo-random uniformly distributed int in the half-open range [0, n). 
```

这意味着它可以返回 n。所以如果你想让你的代码工作，试试，`new Random().nextInt(cursor.getCount() -1)`因为你已经测试过了`cursor.getCount() > 0`

# c# - 简单文本显示窗口

> ID：12353769
> 
> 赞同：1
> 
> 时间：2012-09-10T14:27:22.003
> 
> 标签：c#, wpf

我正在尝试寻找/开发一种非常轻量级的方法来在我的桌面应用程序的窗格中显示文本。除了为所有文本设置单一字体外，我对文本格式没有任何要求。我尝试过使用 TextBox、TextBlock 和各种可观察的集合。计算效率至关重要。

文本由应用程序创建，用户永远不会修改。最重要的要求是应用程序通常以每秒 100 到 700 行的速度生成文本，峰值速率为每秒 1900 行。应用程序运行几天并不罕见。理想情况下，显示将连续滚动，以便添加的最后一行始终可见。

我当前的实现使用 TextBox（对于更长的时间，我目前别无选择，只能禁用文本显示）。我尝试过的事情包括：

*   设置 IsUndoEnabled="False"
*   删除在 n 之后添加的每一行文本（通常为 1000）的第一行文本。这真的很难看，并促使我尝试将其重新设计为 MVVM。
*   使用带有 ListView (ala MVVM) 的 Observable Collection 或 BindingList
*   抑制收集/列表已更改，以便 UI 更新推迟到“空闲”期间。

我可以提供更多关于我尝试过的细节，但我不想从写一本书开始。

这是我当前的 XAML 实现：

```
<TextBox Grid.Row="1" Name="tbTraceLog" IsReadOnly="True" IsUndoEnabled="False" VerticalScrollBarVisibility="Auto" FontFamily="Courier New"/> 
```

在代码隐藏中：

```
 for (icount = 0; icount < tlData.stringcount; icount++)
    {
        tbTraceLog.AppendText(tlData.s[icount]);          // TextBox implementation
        if (tbTraceLog.LineCount > 1000)
        {
            // Remove one line
            tbTraceLog.Text = tbTraceLog.Text.Substring(tbTraceLog.Text.IndexOf('\n')+1);
        }
    }
    tbTraceLog.ScrollToEnd(); 
```

有没有更基本的文本渲染类我可以开始？TextBlock/TextBox 继承自哪些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:57:18.723

我不相信控制选择是问题，我相信你的问题是与维护字符串连接相关的性能。我假设由于您尝试删除第一个条目以在 1000 之后添加一个新条目，因此您不需要保留历史记录。也不需要处理每 1 秒生成的最大 1900 条消息。

我会保留 TextBox 作为您的控件。使其成为多行和只读。

为您的结果创建一个班级级别列表：

```
List<string> list = new List<string>(); 
```

创建一个公共字符串属性：

```
public string Result 
{ 
    get 
    { 
        return string.Concat(list); 
    } 
} 
```

在您的 XAML 中，将 TextBox.Text 绑定到 Result 属性：

```
<TextBox Text="{Binding Path=Result}" /> 
```

接下来创建一个名为 update 的类级别布尔值：

```
private bool update = false; 
```

当您收到要连接的结果时，检查 list.Count 是否 > 1000。如果是，则 list.RemoveAt(0)，然后 list.Add(newTextToAdd + Environment.NewLine)。然后将更新设置为真。请注意，我假设您收到的文本是一次添加一个。如果您收到了一组文本，您可以计算要删除的数量，然后调用 list.AddRange(collection)。

```
if (list.Count > 1000)
{
    list.RemoveAt(0);
    list.Add(newTextToAdd + Environment.NewLine);
}    
update = true; 
```

创建一个计时器。我会说将其设置为触发 1 秒。然后，当它触发时检查我们是否更新了列表。如果是这样，则引发 Result 属性更改通知，然后将 update 设置为 false：

```
if (update)
{
    OnPropertyChanged("Result");
    update = false;
} 
```

那应该这样做。我认为 string.Concat 如果你在 1 秒计时器上有它应该足够快来处理你的负载。我认为使用计时器是可以接受的，因为应用程序每秒生成 X 条消息。排队到列表中也应该没问题，因为如果它在一秒钟内生成超过 1000 个文本，您只会错过看到文本。由于您已经尝试将最大值限制为 1000，因此似乎不需要支持更多。

# php - 加入后选择同名的列

> ID：12353771
> 
> 赞同：2
> 
> 时间：2012-09-10T14:27:43.320
> 
> 标签：php, mysql, zend-framework

基本上我需要使用以下方法进行此查询`Zend_Db_Select`：

```
SELECT *, `matches`.`name` AS superName, `dimension`.`name` AS someName 
FROM `matches`
JOIN `dimension` ON [whatever condition]
-- etc, etc. 
```

做连接，剩下的很容易，最终会变成这样：

```
$select = Globals::db()->select();
$select -> from("matches")
        -> join("dimension", "`matches`.`idDimension` = `dimension`.`idDimension`")
        -> join("accounts", "`accounts`.idAccount = `matches`.idOwner");        
     // -> etc, etc

return Globals::db()->fetchAll($select); 
```

问题是该列出`name`现在超过 1 个表中，因此`name`其本身是模棱两可的，因此响应为`null`. 我该如何解决？

我试过了：

```
$select = Globals::db()->select();
$select -> from("matches", "*, `matches`.`name`") 
```

和

```
$select = Globals::db()->select();
$select -> from("matches", "*", "`matches`.`name`") 
```

但两者都返回错误（未找到列 * 和语法错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:21:18.827

尝试

```
$select -> from("matches", array("*", "name as superName")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:34:37.837

我认为您需要指定一个相关名称（别名）`matches.*`

# json - 如何自定义 Jackson 类型信息机制

> ID：12353774
> 
> 赞同：5
> 
> 时间：2012-09-10T14:28:13.430
> 
> 标签：json, jackson

在 Jackson 中，我使用注释**@JsonTypeInfo**来包含多态性支持。

如果我不想使用基于注释的方法，我可以使用全局默认类型或覆盖类型信息处理模块。

我已经尝试过全局类型信息，但它正在为所有非最终类型发出类型信息。

我需要的 ，

1.  我只想包含多态类型的类型信息。
2.  我想更改类型信息的默认格式（键值对）

是否可以仅通过 twitting 全局配置来实现以上两点？

如果不是，我应该使用什么扩展点来自定义类型信息模块？我读过**JacksonAnnotationIntrospector**是处理类型信息的类。

我应该自定义它以实现上述两点吗？

Example 的帮助会很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-29T18:56:54.557

`DefaultTypeResolverBuilder`为此，您可以使用 Jackson's 。扩展此类并`useForType`适当地覆盖该方法。这是一个仅为属于`test.jackson`包（和子包）的类添加类型信息的示例：

```
import com.fasterxml.jackson.databind.JavaType;
import com.fasterxml.jackson.databind.ObjectMapper.DefaultTypeResolverBuilder;
import com.fasterxml.jackson.databind.ObjectMapper.DefaultTyping;

public class CustomTypeResolverBuilder extends DefaultTypeResolverBuilder
{
    public CustomTypeResolverBuilder()
    {
        super(DefaultTyping.NON_FINAL);
    }

    @Override
    public boolean useForType(JavaType t)
    {
        if (t.getRawClass().getName().startsWith("test.jackson")) {
            return true;
        }

        return false;
    }
} 
```

现在，考虑你有`Foo.java`in `test.jackson`package 和`Bar.java`in `org.myorg`package，每个都包含一个`int`名为“integer”的`String`变量和一个名为“string”的变量。

您可以通过这种方式序列化这两个类的对象：

```
ObjectMapper objectMapper = new ObjectMapper();

TypeResolverBuilder<?> typeResolver = new CustomTypeResolverBuilder();
typeResolver.init(JsonTypeInfo.Id.CLASS, null);
typeResolver.inclusion(JsonTypeInfo.As.PROPERTY);
typeResolver.typeProperty("@CLASS");
objectMapper.setDefaultTyping(typeResolver);

Foo foo = new Foo(10, "Foo");
Bar bar = new Bar(20, "Bar");

System.out.println(objectMapper.writeValueAsString(foo));
System.out.println(objectMapper.writeValueAsString(bar)); 
```

相应的输出将是：

```
{"@CLASS":"test.jackson.Foo","integer":10,"string":"Foo"}
{"integer":20,"string":"Bar"} 
```

您还可以自定义表示类型的属性的名称（上例中的“@CLASS”）。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-10T20:58:11.517

您可以使用[Moonwlker](https://github.com/bertilmuth/moonwlker)库。

有了它，你可以创建一个`ObjectMapper`这样的：

```
 ObjectMapper objectMapper = new ObjectMapper();

 MoonwlkerModule module =
   MoonwlkerModule.builder()
     .fromProperty("@CLASS").toSubclassesOf(Animal.class)
     .build();

 objectMapper.registerModule(module); 
```

然后使用该映射器进行（反）序列化。Moonwlker 网站包含更多详细信息和配置选项。

# php - 根据赢/输数显示获胜成功率

> ID：12353775
> 
> 赞同：1
> 
> 时间：2012-09-10T14:28:18.547
> 
> 标签：php

我想显示输赢之间的获胜成功率我尝试过

```
$percent = ($row['wins'] - $row['loses'] / (($row['wins'] + $row['loses']/2))* 100); 
```

基于[calculatorsoup.com](http://www.calculatorsoup.com/calculators/algebra/percentagedifference.php) % 差异计算器公式

> 计算 V1 = 15 和 V2 = 6 之间的百分比差异
> 
> ( | V1 - V2 | / ((V1 + V2)/2) ) * 100
> 
> = ( | 15 - 6 | / ((15 + 6)/2) ) * 100
> 
> = ( | 9 | / (21/2) ) * 100
> 
> = ( 9 / 10.5 ) * 100
> 
> = 0.857143 * 100
> 
> = 85.7143% 差异

但我认为我的做法完全错误，我的目标是输出如下：

> 用户 bob 的成功率为：17%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:29:50.493

*这是获胜次数*/*总尝试*次数的比率：

```
$percent = 100 * $row['wins'] / ($row['wins'] + $row['loses']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:37:59.993

如果你想显示一个玩家的成功率，这将是代码片段：

```
$wins = 9;
$losses=3;
$succesRate =  ( $wins/ ($wins + $losses) ) * 100 ; 
//output will be "Success rate is: 75%"
echo "Success rate is:".$successrate."%" ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:31:00.837

```
$v1 = $row[wins];
$v2 = $row[loses];

$percent = ( abs($v1 - $v2) / (($v1 + $v2)/2) ) * 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:39:10.310

如果我理解了这个问题，数学就很简单了：W = wins

L = 输

T = W+L

中奖率按比例为 W : T = X : 100。

在代码中

```
$w = $row['wins'];
$l = $row['loses'];
$rate = ($w * 100)/($w + $l) 
```

# qt - Qt "monkey" 测试 - 模拟随机点击和按键

> ID：12353786
> 
> 赞同：6
> 
> 时间：2012-09-10T14:28:42.987
> 
> 标签：qt, testing, qttest

是否有一个框架来模拟施加在 Qt 应用程序上的确定性伪随机系列点击 - 以尝试触发任何内存泄漏、线程错误等 - 典型的猴子测试？

QTestLib 的一些异国情调的猴子用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:40:53.353

是的，您可以使用有用的单元测试模块。特别看一下[QTestEventList](http://doc-snapshot.qt-project.org/4.8/qtesteventlist.html)类。只需提供您想要测试的 QWidget，或者 QMainWindow 或您想要的任何子类，然后添加您想要生成的事件列表。如果要生成点序列，以便在失败的情况下可以重现，请使用[qsrand](http://doc.qt.nokia.com/4.7-snapshot/qtglobal.html#qsrand) () 和[qrand](http://doc.qt.nokia.com/4.7-snapshot/qtglobal.html#qrand) ()。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-21T20:49:49.703

[Squish 自动化 GUI 测试框架](http://www.froglogic.com/squish/gui-testing/)可用于在您的应用程序中进行猴子点击。为此目的使用 Squish 有几个好处：

*   Squish 可在 Windows、Mac、Linux 和 Android 上运行
*   它将发生的任何随机步骤记录为可以重新运行的脚本（[猴子测试文档](http://doc.froglogic.com/squish/4.0/all/ug-stresstesting.html)）
*   它可以选择在应用程序崩溃时[截取屏幕截图（故障设置文档中](http://doc.froglogic.com/squish/4.1/qt/ugs-screenshotsonfail.html)的屏幕截图）

缺点：Squish 不是免费的。设置 Squish 来运行您的应用程序可能会非常烦人，尤其是当您的应用程序需要 Qt 或 Python 的特定构建特性时。

# objective-c - Objective C - 在私有方法中对核心功能进行单元测试？

> ID：12353795
> 
> 赞同：9
> 
> 时间：2012-09-10T14:29:12.970
> 
> 标签：objective-c, ios, unit-testing

我遇到过很多情况，我的核心逻辑在私有方法中。您将如何进行单元测试，是否有任何类型的编译时操作来忽略未知/私有方法的编译错误？我知道对于代码的第二部分，我可以使用 performSelector，但这是一个合理的解决方案吗？

例如：

```
[[self.objectMock expect] privateMethod];
or 
[self.object callPrivateMethodsToExpectSomeOtherBehaviour] 
```

**编辑：**

这是一个示例来说明为什么我觉得我需要测试一些私有方法。这些测试不合理吗？否则我将如何测试调用 clear 是否真正做到了它应该做的事情？

```
- (void)clear
{
   self.orderNumber = nil;
   [self.items removeAllObjects];
   // Clear the rest of fields
}

- (void)testClearShouldRemoveOrderNumber
{
   Order *order = [[Order alloc] init];
   OCMockObject *orderPartialMock = [OCmockObject partialMockForObject:order];

   [[orderPartialMock.items expect] setOrderNumber:nil];
   [orderPartialMock clear];
   [orderPartialMock verify];
}

- (void)testClearShouldRemoveItems
{
    Order *order = [[Order alloc] init];
    order.items = [[OCMockObject niceMockForClass:[NSMutableArray class]];

    [[orderPartialMock.items expect] removeAllObjects];
    [orderPartialMock performSelector@selector(clear)];
    [orderPartialMock.items verify];
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T14:38:53.563

方法永远不是“私有的”，因为一旦一个类实现了一个方法，它就可以发送给我的任何人。

因此，假设您有一个`Foo`带有“私有”方法的类，该方法`bar`不在接口声明中。`bar`尽管您可能会获得编译器诊断，但您仍然可以从任何地方调用。

可能最简单的方法是在测试使用的类别中声明方法。例如：

```
@interface Foo (MyPrivateMethodsUsedForTesting)
- (void)bar;
@end 
```

现在，您也可以在编译器不抱怨的情况下使用它们。请注意，这些方法不必在实际`MyPrivateMethodsUsedForTesting`类别中实现。这种技术有时也被称为“非正式协议”。

**编辑**

此外，正如其他人所指出的，如果您需要访问私有方法，您可能应该重新审视您的设计。在这样做了大约 30 年之后，肯定有一些时候，特别是对于测试，你需要访问私有的东西，但大多数时候这意味着某种类型的设计审查是有序的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T14:37:27.430

你不应该直接测试你的私有方法。相反，您需要通过公共方法来测试它们。这是[在programmers.stackexchange.com 上](https://softwareengineering.stackexchange.com/questions/100959/how-do-you-unit-test-private-methods)讨论此事的问题的链接。

答案的总体思路是，您（或维护您的代码的任何其他人）应该可以随时通过更改签名、更改实现或完全删除它们来更改您的私有方法。你班以外的任何人都不应该关心 - 毕竟，这是首先将这些方法设为私有的主要驱动力。

如果您以不兼容的方式更改您的私有方法，那么您的公共方法的单元测试必须中断；否则，你没有很好地测试你的公共方法。实际上，这使得私有方法的单元测试变得不必要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-10T14:36:36.320

一般来说，您不需要对私有方法进行单元测试。

公开的方法告诉你你的类做了什么——这是你关心的，你应该测试这些。私有方法关心你的类*如何*完成它的工作，你的测试不应该关心工作是如何完成的，只要它被正确地完成。

如果有一天你决定改变你的类的工作方式（即通过改变你的私有方法中的代码），而不改变*你*的类实际做了什么，那么你的单元测试应该继续通过。通过尝试测试类的内部结构，您创建了一个脆弱的测试，即使该类仍然正常工作，它也可能会中断。

如果您发现仅使用公共方法很难彻底测试您的类，那么这是一个警告信号，表明您的类可能太大 - 考虑将其分解成更小的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:44:23.977

你不需要对这些进行单元测试——事实上你不应该。
您将通过公共方法间接测试您的私有方法。私有方法是为您的公共方法完成工作的辅助方法。

因为你应该有足够的自由来改变你喜欢的私有方法，所以单元测试也会适得其反。

但请务必测试您的公共方法的所有案例，以便涵盖所有私有方法。

# .net - 使用 IBM DB2 .NET 数据提供程序“找不到或加载已注册的 .Net Framework 数据提供程序”

> ID：12353807
> 
> 赞同：1
> 
> 时间：2012-09-10T14:29:46.143
> 
> 标签：.net, db2, dataprovider, enterprise-library-5

部署应用程序后，我在 UAT 服务器上收到此错误。它适用于其他环境，包括 DEV 和 QA 服务器。

*   UAT 服务器是带有 SP2 64 位、.NET 4.0 和 IBM .Net 数据提供程序的 windows 2008 R2
*   DEV & QA box 有 windows 2003 SP2 32bit, .NET 4.0 和 IBM .Net Data Provider

我们使用 Enterprise Library 5.0。这是web.config中的配置：

```
<configSections>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</configSections>

<connectionStrings>
    <add name="DatabaseServer" connectionString="Server=XXX;Database=XXXX;UID=XXXX;PWD=XXXX;" providerName="IBM.Data.DB2" />
</connectionStrings>

<dataConfiguration defaultDatabase="DatabaseServer"/>

<system.data>
    <DbProviderFactories>
         <remove invariant="IBM.Data.DB2"></remove>
         <add name="IBM DB2 .NET Data Provider" invariant="IBM.Data.DB2" description="IBM DB2 Data Provider for .NET Framework 2.0" type="IBM.Data.DB2.DB2Factory, IBM.Data.DB2, Version=9.0.0.2, Culture=neutral, PublicKeyToken=7c307b91aa13d208"/>
    </DbProviderFactories>
</system.data> 
```

它工作正常并连接到 32 位服务器上的数据库。我开发了一个 Windows 应用程序来测试 64 位服务器上的数据库连接，并将所有配置包含在 app.config 中。这也很完美，但是当通过 IIS 访问网站时，它会抛出这个错误：

> 未能找到或加载已注册的 .Net Framework 数据提供程序

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:11:52.843

根据您使用的客户端访问版本，IBM.DB2.iSeries 组件可能工作也可能不工作。我们目前处于 V5R4，同时我们正在努力修复所有在 6.1 版本发布时出现问题的代码。V5R4 版本根本无法在 64 位上运行。我不确定更新的版本。

您可以选择将项目设置为针对 x86 而不是 X64、Itanium 或任何 CPU 进行编译。

# javascript - 如何组织用户系统的 Mongo 集合

> ID：12353812
> 
> 赞同：2
> 
> 时间：2012-09-10T14:29:56.483
> 
> 标签：javascript, node.js, mongodb

我是 noSQL 数据库（MongoDB）的新手，我不确定如何组织集合。我有一个**用户系统**，每个用户都有：

> *   _ID
> *   用户名
> *   密码
> *   ...（更多基本数据）
> *   朋友们
> *   信誉积分
> *   声望点历史
> *   通知
> *   已加入的用户组

基本数据通常存储在集合**用户**中，但我不知道如何存储像朋友列表这样的复杂数据。

我应该在每个用户对象中（在用户集合中）存储一个**_id 数组之类的朋友，还是应该创建一个****新集合**来只存储朋友？如果我创建这个新集合，它应该像用户的 _id 和它的朋友的数组，或者像用户 => 朋友 _id 这样的对。

通知和历史记录也是如此。和朋友有同样的问题，但是这些情况下数组的大小可能会大很多，所以使用新集合的想法更强烈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:08:13.763

我假设您正在创建某种社交网络，其中每个用户的朋友都是其他用户。

在 MongoDB 中通常应避免仅表示文档之间关系的集合。在关系数据库中，您可以使用它们来连接表，但 MongoDB 不支持连接。

您应该为每个用户添加一组朋友。这是在 MongoDB 中实现多对多关系的常用方法。但是因为你有一个关系而不是一个聚合（朋友不*属于*用户 - 他们独立存在）你不应该把整个朋友对象放入这些数组中。取而代之的是，您应该使用可用于在用户集合中查找朋友的唯一标识符。这可以是朋友的 _id、[DBRef](http://docs.mongodb.org/manual/applications/database-references/)或朋友的名字（仅当它们是唯一的并被索引时）。后一种解决方案将允许您获得用户朋友的可读列表，而无需请求所有参考文档。

将整个对象存储在用户文档中有意义的反例可能是通知。向单个用户发送通知。没有用户，通知是没有意义的。如果没有收到通知的用户，您将永远不需要通知。当一个用户被删除时，它的通知可以被删除。因此，您可以将其直接存储在用户文档中。

# mysql - MySQL 查询合并与内部联接

> ID：12353813
> 
> 赞同：1
> 
> 时间：2012-09-10T14:29:59.433
> 
> 标签：mysql, sql

我对这样做还是很陌生，所以我不完全确定这是可能的。

我有两个数据库，我想从两个数据库中运行一个查询——定位在哪里

```
database1.table1.firstname + database1.table1.lastname = database2.table2.name 
```

这可能吗？

我以为我可以做类似的事情

```
SELECT
    COALESCE(firstname + ' ' + lastname, firstname, lastname) Name 
FROM database1.table1
INNER JOIN database1.table1, database2.table2
WHERE
    Name = table2.name; 
```

这可能吗？还是只能对同一数据库中的表执行连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:32:14.000

任何 MySQL 查询只能在同一个数据库上运行，您必须从不同的连接执行两个查询，然后合并数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:35:05.230

您的连接语法不正确。我认为你的意思是：

```
SELECT COALESCE(firstname + ' ' + lastname, firstname, lastname) Name 
FROM database1.table1 t1 inner join
     database2.table2 t2 
     on  COALESCE(t1.firstname + ' ' + t1.lastname, t1.firstname, t1.lastname) = t2.name 
```

# java - 从网站读取 JSON 的 Android 应用

> ID：12353819
> 
> 赞同：2
> 
> 时间：2012-09-10T14:30:16.310
> 
> 标签：java, android, json, http-status-code-415

我正在尝试使用一个显示来自网站的信息的应用程序开始我的 Android 应用程序之旅。该网站来自一个电力通风系统，它可以帮助我监测我在吸烟者身上长时间烹饪的火和肉块的温度。

JSON 页面位于`http://192.168.101.101/stoker.json`我的本地网络上，数据如下所示：

```
{
"stoker": {
    "sensors": [
        {
            "id": "620000116F01CA30",
            "name": "SS2",
            "al": 0,
            "ta": 66,
            "th": 75,
            "tl": 65,
            "tc": 69.1,
            "blower": null
        },
        {
            "id": "E20000116F0CDB30",
            "name": "brskt2",
            "al": 0,
            "ta": 203,
            "th": 32,
            "tl": 32,
            "tc": 71.7,
            "blower": null
        } 
```

我尝试使用的代码一直失败，因此我在流程的第一步添加了一个日志，以查看发现了什么。这是代码：

```
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://192.168.101.101/stoker.json");
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    InputStream webs = entity.getContent();

try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(webs,"iso-8859-1"),4);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }

    webs.close();

    result=sb.toString();
    Log.i("log_tag", result); 
```

这是调试期间日志的结果：

```
09-10 08:44:58.375: I/log_tag(748): <body>
09-10 08:44:58.375: I/log_tag(748): <h1>415 Unsupported Type</h1>
09-10 08:44:58.375: I/log_tag(748): </body> 
```

我认为读取 JSON 信息会非常简单，但显然不是。我在这里想念什么？

此时我只想在手机上显示信息，仅此而已。以后我想为应用程序添加更多功能，例如将更改发布回 JSON 站点和本地警报，但不是现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:37:00.067

它看起来像一个服务器端错误。您可以尝试将您的`HttpPost`请求更改为`HttpGet`一个。

如果这不起作用，那么您的服务器可能正在等待请求标头中的某些特定数据（有时，服务器等待特定的用户代理字段或语言......）

你能告诉我们生成这个 JSON 的服务器端代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:44:33.403

[HTTP 状态 415 -在您的情况下，*不支持的媒体类型*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.16)表示服务器不支持请求资源的请求方法，因为您尝试使用 HTTP POST 方法而不是 GET。

规范的完整定义是：

> 服务器拒绝为请求提供服务，因为请求实体的格式不受所请求方法的请求资源支持

所以我认为你应该改用[HTTPGet](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpGet.html)。也就是说，您真的应该尝试使用支持将 JSON 对象绑定到 Java 类的库。有许多库封装了这个功能，这*应该*使你的代码不那么复杂，因为你依赖于一个（希望是经过良好测试的）库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:42:32.540

尝试添加

```
httppost.setHeader("Accept", "application/json");
httppost.setHeader("Content-type", "application/json"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:52:12.320

看起来……您从服务器收到了错误的响应。所以最后你必须检查为什么会这样

您可以做的另一件事...请检查响应中的状态代码。您将准确了解您或服务器所犯的错误。

```
System.out.println(response.getStatusLine().getStatusCode()); 
```

并匹配来自 [http://en.wikipedia.org/wiki/List_of_HTTP_status_codes的响应代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

你会得到准确的......出了什么问题......

# r - 按字符串键“order（-x，v）”的降序对data.table中的行进行排序，在data.table 1.9.4或更早版本上会出错

> ID：12353820
> 
> 赞同：138
> 
> 时间：2012-09-10T14:30:18.353
> 
> 标签：r, string, sorting, data.table, key

假设我有以下`data.table`内容`R`：

```
 library(data.table)
  DT = data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6), v=1:9) 
```

我想按两列（比如列`x`和`v`）对其进行排序。我用这个：

```
 DT[order(x,v)] # sorts first by x then by v (both in ascending order) 
```

但是现在，我想按`x`（按降序）对其进行排序并具有以下代码：

```
 DT[order(-x)] #Error in -x : invalid argument to unary operator 
```

因此，我认为这个错误是由于`class(DT$x)=character`. 你能给我任何建议来解决这个问题吗？

我知道我可以使用`DT[order(x,decreasing=TRUE)]`，但我想知道同时使用两种方式（一些减少，一些增加）按几列排序的语法。

请注意，如果使用`DT[order(-y,v)]`结果是可以的，但如果使用`DT[order(-x,v)]`则会出现错误。所以，我的问题是：如何解决这个错误？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-10T14:41:59.473

## 更新

**data.table** v1.9.6+ 现在支持 OP 的原始尝试，不再需要以下答案。

* * *

您可以使用`DT[order(-rank(x), y)]`.

```
 x y v
1: c 1 7
2: c 3 8
3: c 6 9
4: b 1 1
5: b 3 2
6: b 6 3
7: a 1 4
8: a 3 5
9: a 6 6 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-10T15:00:39.560

您只能`-`在数字条目上使用，因此您可以按递增顺序使用递减和否定您想要的条目：

```
DT[order(x,-v,decreasing=TRUE),]
      x y v
 [1,] c 1 7
 [2,] c 3 8
 [3,] c 6 9
 [4,] b 1 1
 [5,] b 3 2
 [6,] b 6 3
 [7,] a 1 4
 [8,] a 3 5
 [9,] a 6 6 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-08-19T03:44:20.237

`DT[order(-x)]`按预期工作。我有 data.table 版本 1.9.4。也许这在最近的版本中得到了修复。
另外，我建议使用与**set***命令`setorder(DT, -x)`保持一致的语法，例如，**`setnames``setkey`**

# c# - 从 MVC 运行一个短暂的后台任务

> ID：12353824
> 
> 赞同：6
> 
> 时间：2012-09-10T14:30:44.423
> 
> 标签：c#, asp.net-mvc, multithreading

我正在编写一个 ASP.NET MVC 3 应用程序。当用户登录时，我需要检查远程系统并从系统中获取该用户的最新数据。此任务大约需要 15 秒。

用户应该能够在登录后直接进入我的应用程序（不必等待 15 秒进行远程调用！）。当远程调用完成时，用户本地信息将被更新。

我正在考虑使用一个线程来执行此操作，在他们登录后创建它并让它运行它。但是，在阅读之后，我担心在 MVC 中使用线程时会发生回收等问题。我会使用异步控制器，但我不需要向用户反馈这个后台进程的状态。我关心线程是否正确，即使它们是短暂的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:40:10.800

“ *...关注回收利用...* ”

“ *...不需要向用户反馈状态...* ”

“ *……短暂的……* ”

[您应该使用ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)的3 个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:40:21.937

不要在 Web 应用程序中使用“线程”。让服务器通过使用“异步”调用来处理这个问题。否则，您将不得不设置一个线程池并对慢速请求进行队列处理。

# c - lua中的printf格式

> ID：12353826
> 
> 赞同：1
> 
> 时间：2012-09-10T14:30:50.777
> 
> 标签：c, lua, printf, coronasdk

> **可能重复：**
> [Lua - 格式化整数](https://stackoverflow.com/questions/10989788/lua-format-integer)

如何格式化整数让我们说 1000000 以它返回 1.000.000 的方式？

这可以通过使用来管理`printf`吗？有人知道该怎么做吗？参数是什么样的？

我目前正在使用`Corona SDK`/`Lua`并且有一个类似于`printf`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:45:53.717

您将需要一个自定义函数。就像是：

```
function comma_value(amount)
  local formatted, k = amount, 0
  while true do  
    formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2')
    if (not k) or k==0 then
      break
    end
  end
  return formatted
end 
```

更多[数字格式化功能](http://lua-users.org/wiki/FormattingNumbers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:36:49.880

Lua 中与 C`printf`类似的格式化函数是`string.format`.

[http://www.lua.org/manual/5.1/manual.html#pdf-string.format](http://www.lua.org/manual/5.1/manual.html#pdf-string.format)

请注意，它不支持千位​​分隔符，因为它不是标准 C89，而是 SUSv2 扩展。

# maven - 如何使 FlexUnit 的代码覆盖率与 Sonar 一起使用？

> ID：12353828
> 
> 赞同：2
> 
> 时间：2012-09-10T14:30:51.027
> 
> 标签：maven, sonarqube, flexunit, flexunit4

### 情况

我试图让[Sonar显示](http://www.sonarsource.org/)[FlexUnit](http://flexunit.org/)从使用 Flex-Mojos 的 Maven 构建作业生成的代码覆盖率报告，但我没有运气——我得到的只是一个令人沮丧的“-”。

* * *

### 构建输出

结果是仪表板总是显示这个（左列）：（ ![声纳项目仪表板](../Images/00a7291387cbc7b68c8ad368d77609a8.png) 不，单元测试不会运行超过 90 分钟，而是 16 秒；不知道这里有什么问题）

声纳相关的控制台输出是这样的： ![Maven 控制台输出](../Images/9132791bc009c9178cda67e27212de80.png) 所以一切似乎都工作正常（除了 Cobertura 之外没有文件未找到错误，我似乎无法以任何方式摆脱它，没有解析异常等）。

* * *

### 构建设置

`pom.xml`用于构建项目的代码如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>foo</groupId>
        <artifactId>parent</artifactId>
        <version>1.0.3</version>
    </parent>
    <groupId>foo</groupId>
    <artifactId>bar</artifactId>
    <version>0.1.0-SNAPSHOT</version>
    <packaging>swc</packaging>
    <name>Bar</name>
    <dependencies>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito</artifactId>
            <version>1.4M5</version>
            <type>swc</type>
            <scope>external</scope>
        </dependency>
        <dependency>
            <groupId>com.adobe.flexunit</groupId>
            <artifactId>flexunit</artifactId>
            <version>4.1.0-8</version>
            <classifier>flex</classifier>
            <type>swc</type>
            <scope>external</scope>
        </dependency>
    </dependencies>
    <build>
        <testSourceDirectory>src/test/flash</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.sonatype.flexmojos</groupId>
                <artifactId>flexmojos-maven-plugin</artifactId>
                <version>4.2-beta</version>
                <configuration>
                    <coverage>true</coverage>
                    <debug>false</debug>
                    <optimize>true</optimize>
                    <omitTraceStatements>true</omitTraceStatements>
                    <verboseStacktraces>false</verboseStacktraces>
                    <defines>
                        <property>
                            <name>CONFIG::BUILD</name>
                            <value>"${project.version}"</value>
                        </property>
                    </defines>
                </configuration>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>asdoc</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>${project.build.directory}/asdoc/tempdita</directory>
                <targetPath>docs</targetPath>
                <includes>
                    <include>**/*.xml</include>
                </includes>
                <excludes>
                    <exclude>ASDoc_Config.xml</exclude>
                    <exclude>overviews.xml</exclude>
                </excludes>
            </resource>
        </resources>
    </build>
    <properties>
        <sonar.language>flex</sonar.language>
        <sonar.sources>src/main/flash</sonar.sources>
        <sonar.tests>src/test/flash</sonar.tests>
        <sonar.surefire.reportsPath>target/surefire-reports</sonar.surefire.reportsPath>
    </properties>
</project> 
```

我尝试了几种运行声纳的方法：

1.  `dynamicAnalysis=reuseReports`+ `mvn clean install`+`mvn sonar:sonar`

2.  `dynamicAnalysis=true`+`mvn clean install sonar:sonar -Dmaven.test.failure.ignore=true`

3.  `dynamicAnalysis=true`+ `mvn clean install -DskipTests=true`+ `mvn sonar:sonar`（<-- 不起作用：由于某种原因，在这种情况下，在 Flex-Mojos 的`test-run`目标执行期间，单元测试无法运行并出现 NullPointerException）。

* * *

有没有办法在 Sonar 仪表板中显示覆盖结果？我是否需要额外的插件（Emma、Clover 等）才能显示标准 Surefire 报告的覆盖范围？是否存在阻止此功能的已知问题？难道我做错了什么？

* * *

### 更新

我试过用 Sonar-Runner 运行 Sonar。有趣的是，仪表板随后完全删除了代码覆盖率小部件。检查运行器的控制台输出表明运行器没有执行`FlexSurefireSensor`（`sonar:sonar`Maven 目标执行）：

![声纳运行器的控制台输出](../Images/905d4613f057e3977dbb9b3cc3150017.png)

该`sonar-project.properties`文件包含：

```
sonar.projectKey=foo:bar
sonar.projectName=Bar
sonar.projectVersion=0.1.0-SNAPSHOT

sonar.language=flex
sources=src/main/flash
tests=src/test/flash

sonar.dynamicAnalysis=reuseReports
sonar.surefire.reportsPath=target/surefire-reports 
```

我正在运行它，`mvn clean install`然后是`sonar-runner`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:45:30.483

要获得代码覆盖率，您需要添加以下属性：

```
<sonar.cobertura.reportPath>target/site/coverage-cobertura/coverage.xml</sonar.cobertura.reportPath> 
```

（或任何覆盖文件的路径）。

这记录在[插件主页上](http://docs.codehaus.org/display/SONAR/Flex+Plugin)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T18:29:10.803

I think the property you are missing in your POM is **sonar.dynamicAnalysis**:

```
<properties>
    ..
    <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
    <sonar.surefire.reportsPath>target/surefire-reports</sonar.surefire.reportsPath>
</properties> 
```

The [Flex plugin documentation](http://docs.codehaus.org/display/SONAR/Flex+Plugin) describes how to enable Unit test and code coverage reporting. It also recommends using the Java Runner, but it should be functionally similar to the Maven plugin launcher.

# python - 命令行 Python 莫名其妙的 NameError

> ID：12353836
> 
> 赞同：1
> 
> 时间：2012-09-10T14:31:29.963
> 
> 标签：python, oop

我正在努力完成出色的“Python The Hard Way”，并将以下代码复制到名为 mystuff.py 的文件中：

```
class MyStuff(object):

    def __init__(self):
        self.tangerine = "And now a thousand years between"

    def apple(self):
        print "I AM CLASSY APPLES!" 
```

在终端：

```
import mystuff

thing = MyStuff()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'MyStuff' is not defined 
```

这在今天的其他简单类中反复发生。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T14:32:18.387

您可能想要`thing = mystuff.MyStuff()` （假设`mystuff`是类`MyStuff`所在文件的名称）。

这里的问题在于 python 如何处理命名空间。您可以通过导入将某些内容带入当前命名空间，但是在如何将命名空间从一个文件合并到另一个文件方面有很大的灵活性。例如，

```
import mystuff 
```

将 mystuff（模块/文件级别）命名空间中的所有内容带入您当前的命名空间，但要访问它，您需要`mystuff.function_or_class_or_data`. 如果您不想一直键入`mystuff`，可以更改用于在当前模块（文件）中引用它的名称：

```
import mystuff as ms 
```

现在，您可以`MyStuff`通过以下方式访问：

```
thing = ms.MyStuff() 
```

并且（几乎）最后，有`from mystuff import MyStuff`. 在这种形式中，您`MyStuff`直接将其带入您的命名空间，但没有其他任何内容`mystuff`进入您的命名空间。

最后，（不推荐这个）`from mystuff import *`。这与前一个的工作方式相同，但它也抓取`mystuff`文件中的所有其他内容并将其导入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T14:33:18.977

您正在将模块导入本地命名空间，而不是类。如果您想在当前导入中使用该类，您需要：

```
thing = mystuff.MyStuff() 
```

如果你想使用你拥有的声明，你需要：

```
from mystuff import MyStuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:50:15.460

好的，我想你得到了你需要的东西。但这是怎么回事

```
import mystuff 

#with this type of import all the names in the `mystuff` module's namespace are not copied into current modules namespace. 
```

所以你需要使用`mystuff.MyStuff()`

用于将模块命名空间中的名称`from mystuff import *`复制`mystuff`到当前模块的命名空间。现在可以直接使用`thing=MyStuff()`

# entity-framework-4 - 可以使用 EF DbMigrator 添加迁移

> ID：12353840
> 
> 赞同：0
> 
> 时间：2012-09-10T14:31:41.977
> 
> 标签：entity-framework-4, entity-framework-migrations, dbmigrator

是否可以在代码中使用 DbMigrator 而不是通过 powershell 命令添加迁移文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:16:34.017

`DbMigrator`是运行迁移的类。用于创建迁移的类位于[`System.Data.Entity.Migrations.Design`](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.design%28v=vs.103%29.aspx). `ToolingFacade`由 powershell 命令调用。其他类代表用于创建迁移代码的低级 API。

# php - 控制器中的数据库事务

> ID：12353841
> 
> 赞同：0
> 
> 时间：2012-09-10T14:31:45.220
> 
> 标签：php, transactions, zend-framework2

我创建了一个 crud 系统。在这里，我有一个主要模型，然后是依赖细节模型。因此它们是多行（有时 > 100 ）输入到与父模型相关的详细信息模型中。通过网格（内联编辑）处理的所有操作。所以创建、更新、删除操作都是通过单个请求（通过数据库进行逻辑检查）来执行的。

现在我正在考虑将数据库事务用于整个操作。但是我很困惑，如何使用相同的结构来实现它。我已经建议将我的所有代码移动到一个模型中，因此可以在那里应用事务。但我在想，是否可以使用任何其他方法来保留主要和细节模型代码的分离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:57:30.350

您是使用 AJAX 进行更改还是依赖手动表单提交？

您可以使用所谓的 UnitOfWork 模式。

保存用户对网格每一行所做的任何更改，但实际上并不将它们提交到数据库。然后，在页面上放置一个通用保存按钮，这将使您的服务器通过事务实际提交所有更改。

您可以保留用户更改的每一行的列表服务器端。您不需要跟踪所有行，因为如果它们没有更改任何内容，您就不需要保存任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:00:12.920

你在你的模型中使用了什么样的方法？你的模型是否知道他们自己的持久性（你会做类似的事情`$user->save()`），还是你正在做更多的数据映射器方法（`$userManager->save($userEntity)`）？后者使事务处理更容易。

如果您正在执行活动记录类型的模式 ( `$user->save()`)，那么最好的选择可能只是手动获取数据库连接并在控制器中管理事务。

如果你在做数据映射器的东西，你有更多的选择，包括做一个完整的工作单元实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:10:50.453

至于我的最后一条评论，将代码移动到父模型是我现在的解决方案。所以我想我应该标记这个线程已回答。

# c# - Metro / Modern UI 中对象的自定义搜索

> ID：12353844
> 
> 赞同：1
> 
> 时间：2012-09-10T14:32:02.770
> 
> 标签：c#, windows-8, microsoft-metro, asp.net-4.5

我正在为 Windows 8 实现一个应用程序。它将从 xml 中搜索大量数据。

所以现在我使用文本框和列表视图来显示搜索结果，但是当我使用文本框事件时，TextChanged 会减慢输入速度，因为它会为输入的每个字母执行新搜索。

所以问题是，如何在地铁/现代用户界面中进行延迟，在输入几个字母后触发事件，而不是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:47:53.093

不鼓励您将任何可能使 UI 陷入困境的同步任务运行。尝试将其作为后台任务运行，该任务会在完成时更新 UI。有关详细信息，请参阅[后台任务](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977059.aspx)和[TimeTrigger](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.background.timetrigger.aspx)。在任务完成时，使用[Core Dispatcher](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher) 更新 UI。 [核心调度程序示例](https://stackoverflow.com/questions/10990152/c-sharp-metro-app-ui-update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:35:52.597

为什么不使用“离开”事件而不是文本框的文本更改事件？当用户在文本框中完成输入时，它会变得更流畅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:10:08.087

您不应创建自己的搜索体验。您应该挂接到 SearchPane 并在那里处理它。

```
SearchPane searchPane = SearchPane.GetForCurrentView();
searchPane.QuerySubmitted += searchPane_QuerySubmitted;
searchPane.SuggestionsRequested += searchPane_SuggestionsRequested; 
```

然后，您可以在处理程序中根据需要处理事件。如果您正在提供建议，并且您的进程运行缓慢，并且会通过异步方式运行，那么您一定会得到延期。

```
void searchPane_SuggestionsRequested(SearchPane sender, SearchPaneSuggestionsRequestedEventArgs args)
{
    var deferral = args.Request.GetDeferral();
    // do real time type ahead here
    deferral.Complete();
}

void searchPane_QuerySubmitted(SearchPane sender, SearchPaneQuerySubmittedEventArgs args)
{
    // complete search here
} 
```

# jquery - 远程设置自动完成的来源

> ID：12353845
> 
> 赞同：2
> 
> 时间：2012-09-10T14:32:06.657
> 
> 标签：jquery, jquery-ui

> **可能重复：**
> [jquery autocomplete this.source 不是函数错误](https://stackoverflow.com/questions/3308935/jquery-autocomplete-this-source-is-not-a-function-error)

我有一个自动完成功能，我想将它连接到我的 API 以返回所有客户帐号。问题是我的 API 返回一个对象：AccountNumber、InvoiceNumber、Name、Address 等。当我尝试将我的源设为 AccountNumber 时，如下所示：

```
$.getJSON('/api/Customers', function(data) {
    $("#AccountNumber").autocomplete({
        source: data.AccountNumber,
        minLength: 4
    });
}); 
```

我得到了这个错误：

```
Uncaught TypeError: Property 'source' of object #<Object> is not a function 
```

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:49:58.373

由于回调返回一个对象，因此您必须提取数据并将其放在一个数组中。只要`data`是一组帐户对象，您就可以试试这个：

```
$.getJSON('/api/Customers', function(data) {
    var acctNums = [];
    for(a in data) {
        acctNums.push(data[a].AccountNumber);
    }   

    $("#AccountNumber").autocomplete({
        source: acctNums,
        minLength: 4
    });
}); 
```

另一种选择是只添加一个不同的请求路由，该路由只会返回一组客户帐号。这样你就可以这样传递它：

```
$.getJSON('/api/Customers/AccountNums', function(data) {
    $("#AccountNumber").autocomplete({
        source: data,
        minLength: 4
    });
}); 
```

最后，您可以让[jQuery UI 插件处理调用](http://jqueryui.com/demos/autocomplete/#overview-main)。您需要创建一个不同的请求路由，该路由仅返回一个 JSON 对象数组，用于自动完成（每个包含`value`和`label`属性）。然后只需使用路由的绝对或相对 URL 即可获取数据。下面是一个小例子：

```
$("#AccountNumber").autocomplete({
    // This GET Request returns an Array of Objects used for Auto-Complete:
    // [ { label: "Choice1", value: "value1" }, ... ]
    source: '/api/Customers/AccountNumsAuto',
    minLength: 4
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:52:13.393

jQuery UI 自动完成的源属性必须是：

*   结果数组：
    `source : ["string1","string2","string3","string4"]`

*   一个字符串（处理查询的远程 PHP 页面的 url），这将触发对该页面的 ajax 请求，其参数 named`term`包含搜索值：
    `source : "page.php"`

*   使用 2 个参数`request`和调用的函数`response`。第一个包含搜索的值 ( `request.term`)，第二个包含一个您必须用这些值填充的对象。

您应该阅读 jQuery UI[文档](http://jqueryui.com/demos/autocomplete/ "jQuery UI 自动完成文档")。
在您的情况下，您可以将您的 JSON 转换为结果数组。

# javascript - Django 对 Javascript 文件翻译的支持

> ID：12353846
> 
> 赞同：5
> 
> 时间：2012-09-10T14:32:07.963
> 
> 标签：javascript, django, internationalization

我阅读并按照[此处](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#internationalization-in-javascript-code)的说明进行操作，但似乎看不到 po 文件中 javascript 中的字符串。

```
structure of my project is: 
cb/    
   cb_app    
   cb    
   static_files    
   templates 
```

首先，我将这些复制到我的 url.py 中：

```
js_info_dict = {
    'packages': ('cb_app',),
}

urlpatterns = patterns('',
    (r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict),
) 
```

然后我将此脚本添加到我的 html 中：

```
<script type="text/javascript" src="{% url django.views.i18n.javascript_catalog %}"></script> 
```

我想要翻译的实际脚本就这么简单：

```
$(document).ready(function () { 
    $('#id_sales_item').chosen({no_results_text: gettext('No results match')}); 
}); 
```

...并在同一个 html 中使用。

那么我还有什么需要做的吗？

然后我所做的就是在 from`cb/cb`和 from下运行下面的行`cb/cb_app`。

```
django-admin.py makemessages -l en_GB 
```

但仍然没有任何迹象表明“没有结果匹配`cb/cb/locale`”`cb/cb_app/locale`

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:53:17.937

我终于找到了问题所在。

文档建议从 Django 项目和 Django 应用程序创建一次消息。这样你最终有两个`locale`目录。无论如何，这些都不会提取 javascript 翻译。这真是一团糟。

我找到的最干净的解决方案是转到`settings.py`并插入这一行（另请参阅我上面的项目层次结构）：

```
LOCALE_PATHS = ( '/home/kave/projects/cb/locale',) 
```

`locale`然后在 project-root-directory 中创建一个名为的目录（参见上面的路径）

不要忘记将条目应用到`url.py`and`html`中（见上文）。

最后，现在本地的都统一到一个地方，进入 project-root-directory:`/home/kave/projects/cb`并运行这两个命令：

```
django-admin.py makemessages -l en_GB
django-admin.py makemessages -d djangojs -l en_GB 
```

第一个命令从项目和应用子文件夹中获取翻译文本。第二个将 javascript 翻译成第二个 po 文件。

就是这样。

# php - 我怎样才能使这项工作？http_build_query 示例

> ID：12353848
> 
> 赞同：1
> 
> 时间：2012-09-10T14:32:08.930
> 
> 标签：php, string, url, lang

如何`http_build_query`为我的网页添加以下脚本？

```
$params = array(
    'p'    => 'foo',
    'lang' => 'bar'
);

echo http_build_query($params); // p=foo&lang=bar

echo '?' . http_build_query($params); // ?p=foo&lang=bar 
```

与[PHP url 字符串冲突有关的“？” 和 ”＆”](https://stackoverflow.com/questions/12352625/php-url-strings-conflict-and)

这是我的页面的工作方式：

```
<a href="?lang=es">Español</a>
<a href="?lang=en">English</a>

<?php
    $p = $_GET['p'];
    $pages = array('g1', 'g2', 'g3');
    if (!empty($p)) {
        if(in_array($p,$pages)) {
            $p .= '.php';
            include($p);
        }
    }
    else {
        echo '<a href="?p=g1">Page 1</a> <a href="?p=g2">Page 2</a></li> <a href="?p=g3">Page 3</a>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:05:24.210

您可以编写一个函数来将查询参数与当前`$_GET`数组合并。

```
<?php
function merge_queries(array $original, array $updates) {
    $params = array_merge($original, $updates);
    return '?'.http_build_query($params);
}
?>

<a href="<?php echo merge_queries($_GET, array('lang'=>'es')); ?>">Español</a>
<a href="<?php echo merge_queries($_GET, array('lang'=>'en')); ?>">English</a>

<?php
// code abbreviated for clarity
echo '<a href="'.merge_queries($_GET, array('p'=>'g1')).'">Page 1</a>
      <a href="'.merge_queries($_GET, array('p'=>'g2')).'">Page 2</a>
      <a href="'.merge_queries($_GET, array('p'=>'g3')).'">Page 3</a>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:35:04.763

你可以很容易地做到这一点：

```
$urlpath = implode('&', $params);
$url = $yourhost . '?' . $urlpart; 
```

# java - 打开 tcp InetSocketAddress 到应用程序路径（不仅仅是主机+端口）

> ID：12353850
> 
> 赞同：2
> 
> 时间：2012-09-10T14:32:11.817
> 
> 标签：java, android, sockets, networking, tcp

我正在尝试连接到 Android 中的 TCP 套接字。

我知道套接字服务可以工作，因为我可以在浏览器中（在 JavaScript 中）连接并与之交互，如下所示：

```
var ws = window.WebSocket || window.MozWebSocket;  
window.ws = new wsImpl('ws://foo.bar.com:8282/MySocketService', 'my-protocol');  
... 
```

* * *

所以，在我的 Android 应用程序中：

这成功连接，但我从未收到过它的消息：

```
SocketAddress sa = new InetSocketAddress("foo.bar.com", 8282); 
```

这无法连接：

```
SocketAddress sa = new InetSocketAddress("foo.bar.com/MySocketService", 8282); 
```

我收到如下错误：

> *java.net.UnknownHostException：主机未解析：foo.bar.com/MySocketService:8282*

有什么方法可以指示 TCP 服务的应用程序路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:35:35.263

TCP端点只是IP地址和端口号。您所说的是由 TCP 之上的上层协议处理的，例如 HTTP，因此您需要查看其他实用程序，例如[`java.net.URL`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URL.html).

# bash - 每个文件只保留一个版本 (bash)

> ID：12353856
> 
> 赞同：3
> 
> 时间：2012-09-10T14:32:22.533
> 
> 标签：bash

我想删除文件夹中的多余文件。就像是

```
cat_1.jpg
cat_2.jpg
cat_3.jpg
dog_10.jpg
dog_100.jpg 
```

减少到

```
cat_3.jpg
dog_100.jpg 
```

即只取每个后缀最大的文件的版本，删除其余的。

这很像

[列出具有最小序列的文件](https://stackoverflow.com/questions/6027939/list-the-files-with-minimum-sequence?rq=1)

但是那里的bash答案有一个“for ... in ...”。我有数千个文件名。

编辑：

文件名约定错误。可能还有其他下划线（例如 cat_and_dog_100.jpg）。我需要它只取最后一个下划线之后的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:51:19.617

假设您的文件名始终采用 form `<name>_<numbers>.jpg`，这里有一个快速破解：

```
while read filename; do
    prefix=${filename/%_*/}  # Get text before underscore
    if [ "$prev_prefix" != "$prefix" ]; then  # we see a new prefix
        echo "Keeping filename"
        prev_prefix=$prefix
    else  # same prefix
        echo "Deleting $filename"
        rm $filename
    fi
done < <(find . -maxdepth 1 -name "*.jpg"| sort -n -t'_' -k1,2) 
```

这是如何工作的：

1.  先对所有`*.jpg`文件排序`<name>`，然后再排序`<numbers>`。
    *   所有具有相同前缀的文件将被分组在一起，`<number>`首先出现的最高的文件
2.  遍历文件名列表并删除文件，除非`<name>`找到新文件（应该是最高的文件`<number>`）

请注意，`find`使用它代替，`ls *.jpg`以便我们可以更好地处理大量文件。

* * *

*免责声明：这是处理文件和版本控制的一种相当脆弱的方式，不应作为长期解决方案采用。请注意发布在该问题上的评论。*

# android - 如果使用 android 布局，着色器编译会崩溃

> ID：12353866
> 
> 赞同：0
> 
> 时间：2012-09-10T14:33:05.157
> 
> 标签：android, opengl-es, shader

如果我想使用 SurfaceView 上方的任何本机接口，着色器编译将失败。

如果我像这样启动应用程序一切正常：

```
surfaceView = new mSurfaceView(this);
renderer = new mRender();
surfaceView.setRenderer(renderer);
setContentView(surfaceView); 
```

但如果我想使用任何界面，它就会失败。我正在应用这样的布局：

```
setContentView(R.layout.main);
surfaceView = (mSurfaceView) findViewById(R.id.gl_surface_view);
renderer = new mRender();
surfaceView.setRenderer(renderer); 
```

应用程序在编译着色器时崩溃。这是我的代码：

```
protected int compileShader(int shaderType, String shaderCode)
{
    int shaderHandle = GLES20.glCreateShader(shaderType);

    if (shaderHandle != 0)
    {
        // Pass in the shader source.
        GLES20.glShaderSource(shaderHandle, shaderCode);

        // Compile the shader.
        GLES20.glCompileShader(shaderHandle);

        // Get the compilation status.
        final int[] compileStatus = new int[1];
        GLES20.glGetShaderiv(shaderHandle, GLES20.GL_COMPILE_STATUS, compileStatus, 0);

        // If the compilation failed, delete the shader.
        if (compileStatus[0] == 0)
        {
            GLES20.glDeleteShader(shaderHandle);
            shaderHandle = 0;
        }
    }

    if (shaderHandle == 0)
    {
        throw new RuntimeException("Error creating shader.");
    }

    return shaderHandle;
} 
```

着色器未成功编译，因此 shaderHandle 为 0，应用程序在此行崩溃：

```
throw new RuntimeException("Error creating shader."); 
```

没有布局它编译得很好。我认为问题在于，在第一个变体中，我以这种方式创建布局：surfaceView = new mSurfaceView(this); 但在崩溃变体中，我以这种方式创建它：surfaceView = (mSurfaceView) findViewById(R.id.gl_surface_view); 我认为它因此而崩溃，但我不知道为什么。对我来说它看起来很好，我没有看到问题。

这是 main.xml 中表面视图的外观：

```
<engine.core.mSurfaceView
    android:id="@+id/gl_surface_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

# javascript - 如何使用多个javascript？

> ID：12353869
> 
> 赞同：-3
> 
> 时间：2012-09-10T14:33:10.663
> 
> 标签：javascript, jquery

大家好，我正在尝试运行多个 javascript。我的第一个 javascript 具有更改功能，但第二个不起作用。那么我怎样才能运行多个 javascript 代码呢？这是我的代码：

```
<html>
      <head>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
            <script type="text/javascript">
              $(document).ready(function () {
                  $('#main').on('change', '.select-box', function () {

                      if ($(".select-box option[value='3']").attr('selected')) {
                          $('#demo').html("<select class='select-box'><option value='4'>a</option><option value='5'>b</option></select>");

                      }

                      if ($(this).val() == 5) {
                          document.getElementById("demo").innerHTML = "Woo";
                      }

                  });

              });
            </script>
            <script>
              var x = "", i;
              for (i = 0;i < 3;i++) {
                  x = x + "<option value='" + i + "'> " + i + "</option>";
              }
              document.getElementById("demo2").innerHTML = "<select>" + x + "</select>";
            </script>
      </head>
      <body>
            <div id="main">
                  <select class="select-box">
                        <option>Select an option</option>
                        <option value="1">no alert</option>
                        <option value="2">no alert too</option>
                        <option value="3">alert</option>
                  </select>
                  <p>
                        <br/>
                  </p>
                  <div id="demo"></div>
            </div>
            <p id="demo2"></p>
      </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:42:59.240

如果你想使用 jQuery 和其他一些 javascript 库，你可以尝试这样的事情

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

在您的代码中，脚本标记中缺少额外的 type="text/javascript" 。所以它应该看起来像这样：

```
<script type="text/javascript">

var x="",i;
for(i=0;i<3;i++)
{
x=x + "<option value='"+i+"'> " + i + "</option>";
}
document.getElementById("demo2").innerHTML="<select>"+x+"</select>";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:36:14.717

这个脚本：

```
<script>

var x="",i;
for(i=0;i<3;i++)
{
x=x + "<option value='"+i+"'> " + i + "</option>";
}
document.getElementById("demo2").innerHTML="<select>"+x+"</select>";
</script> 
```

尝试在元素`demo2`存在之前获取它。将脚本移到之后的某个地方`demo2`，也许就在之前`</body>`。

或者，或者，将最后一部分放在`ready`像您的第一个脚本一样的处理程序中：

```
<script>
var x="",i;
for(i=0;i<3;i++)
{
x=x + "<option value='"+i+"'> " + i + "</option>";
}

$(document).ready(function() {
    document.getElementById("demo2").innerHTML="<select>"+x+"</select>";
});
</script> 
```

顺便说一句，这就是我的做法：

```
var demo2 = document.getElementById('demo2');

for(var i = 0; i < 3; i++) {
    var item = document.createElement('option');
    item.value = i;
    item.appendChild(document.createTextNode(i.toString()));
    demo.appendChild(item);
} 
```

# php - 如何使用 Facebook 图形 api 获取 URL 的共享消息？

> ID：12353871
> 
> 赞同：0
> 
> 时间：2012-09-10T14:33:15.550
> 
> 标签：php, facebook, facebook-graph-api

我知道我可以用这样的东西获得共享计数

```
http://graph.facebook.com/?id=http://stackoverflow.com 
```

但是是否可以从 facebook 获取消息，他们使用共享链接发布的内容？例如，我分享了 stackoverflow[.]com 并发布了消息“它很有用！！”。我怎样才能收集所有的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:27:05.107

如果您使用图形资源管理器来检索它，则该消息将作为返回对象的一部分包含在内，但您应该传递该 link_id。如果您使用 FQL，那么您可以查询[链接](https://developers.facebook.com/docs/reference/fql/links/)表，并且 owner_comment 字段将为您获取该数据。

# sql - 我的子查询返回超过 1 行

> ID：12353875
> 
> 赞同：1
> 
> 时间：2012-09-10T14:33:23.767
> 
> 标签：sql

当然，问题是我在子查询中获得了更多行。

但我不知道如何解决它以实现我的目标。

这就是我的查询的样子：

```
SELECT movies.name, movies.id, 
    (SELECT username FROM users INNER JOIN movies ON 
        movies.added_by_id = users.id) 
    AS added_by_username FROM movies 
```

例如，我们的数据库中有更多电影，这些电影是由用户添加的。

**目标：**我想显示所有电影以及添加它们的用户的用户名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T14:35:11.877

不需要子查询：

```
SELECT movies.name, movies.id, username 
FROM users 
  INNER JOIN movies 
    ON movies.added_by_id = users.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:36:31.697

```
SELECT movies.name, movies.id, 
(SELECT TOP 1 username FROM users INNER JOIN movies ON 
    movies.added_by_id = users.id) 
AS added_by_username FROM movies 
```

# cocoa - NSTextfield 完成

> ID：12353880
> 
> 赞同：1
> 
> 时间：2012-09-10T14:33:41.163
> 
> 标签：cocoa, autocomplete, nstextfield

有一个解决方案可以使用方法完成 NSTextField：

```
- (NSArray *)control:(NSControl *)control textView:(NSTextView *)textView completions:(NSArray *)words forPartialWordRange:(NSRange)charRange indexOfSelectedItem:(int*)index 
```

有几个词而不是一个词？因为当你输入一个空格时，补全又开始了……

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-07T09:49:05.183

迟到总比没有好，它可能对其他人有帮助：

这是一个有点棘手的问题，因为`NSControlTextEditingDelegate`/`NSTextFieldDelegate`没有提供直接解决它的方法。您需要做的是创建`NSTextView`（是的，文本**视图**）的自定义子类，并覆盖该方法`- (NSRange)rangeForUserCompletion`：

```
- (NSRange)rangeForUserCompletion
{
    return [self selectedRange];
} 
```

然后子类`NSTextFieldCell`覆盖该方法`- (NSTextView *)fieldEditorForView:`：

```
- (NSTextView *)fieldEditorForView:(NSView *)aControlView
{
    static MyTextView* _myFieldEditor = nil;
    if (_myFieldEditor == nil) {
        _myFieldEditor = [[MyTextView alloc] init];
        [_myFieldEditor setFieldEditor:YES];
    }
    return _myFieldEditor;
} 
```

然后在 Interface Builder 中，将文本字段单元格的类设置为`NSTextFieldCell`. 当您的文本字段成为第一响应者时会发生什么，窗口将调用您的单元格的`-fieldEditorForView:`方法，并使用您的自定义文本视图作为**字段编辑器**。因此，在编辑文本字段的值期间，任何完成都会调用`-(NSRange)rangeForUserCompletion`您的文本视图。

然后你可以微调你的`-rangeForUserCompletion`，让它返回你想要完成的确切范围。

此外，中的代码`fieldEditorForView:`假设您的应用程序**仅使用一个窗口**，如果您使用多个窗口（例如基于文档的应用程序），您必须更改它并**为每个窗口保留一个字段编辑器实例**。

希望能帮助到你 ：）

# php - 使用 MySQL 和 PHP 在两个表之间进行数学运算

> ID：12353885
> 
> 赞同：-3
> 
> 时间：2012-09-10T14:34:08.000
> 
> 标签：php, mysql

我的 SQL 数据库中有两张表，一张用于用户发送的照片，另一张用于照片在我的应用程序中的投票。我需要从 'photos' 表中提取 'votes' 表中得票最多的 30 张照片。

有没有办法在一个查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:36:58.463

您应该能够使用这样的查询：

```
select
    a.photoFileName
from
    photos a
        join votes b
            on a.photoId=b.photoId
order by 
    b.voteCount desc
limit 30 
```

将键调整为链接字段上的确切列名。

这假设投票表有一个数字列 (voteCount)，其中包含该图像的投票总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:39:28.930

像这样的东西（如果每个投票都是单独存储的），但要进行自己的调整：

```
SELECT
  p.id,
  COUNT( v.id )
FROM
  photos p
JOIN
  votes v ON p.id = v.photo_id
ORDER BY
  COUNT( v.id ) DESC
GROUP BY
  v.photo_id
LIMIT 30; 
```

*PS：我没有测试查询，只是给你一个例子！*

# android - Android webview - 无法插入文本字段

> ID：12353887
> 
> 赞同：1
> 
> 时间：2012-09-10T14:34:12.397
> 
> 标签：android, cordova, jquery-mobile, webview

使用 Jelly bean (4.1) 和 2.3 的用户体验

在 api 级别 14 和 15 上不会出现问题。

我找不到解决这个问题的任何方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:08:00.793

这通常是由某些 CSS 属性应用于您的文本字段引起的，尽管这通常只影响 4.0 及更高版本。您当前运行的是哪个版本的 PhoneGap？

# sql - 创建数据库以恢复员工感受民意调查的结果

> ID：12353888
> 
> 赞同：-2
> 
> 时间：2012-09-10T14:34:18.553
> 
> 标签：sql, database

我的项目是制作一个软件来单独询问员工每天的感受，好、正常、坏。例如，在 2012 年 10 月 9 日，三名员工感觉良好，四名感觉正常，两名感觉不好。他们有能力说出他们为什么会这样。

我正在考虑为约会创建一张表，一对多，另一张用于感觉，好，正常，坏，存储每天有多少感觉好/坏/正常。

我的问题是如何做“为什么你会这样”表。每种状态都有很多原因。

员工必须是匿名的，所以我不能存储每个人的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:48:01.480

对于这样的事情，我会使用带有 theDate、Feeling、Reason 和 CookieValue 的单个表。（使用 cookie 来防止一名员工感觉不好 18 次）。每天你都会有一堆条目。

然后，老板页面将在此表上进行选择，按日期分组，并显示计数。也许`Select distinct feeling, count(*) as numCount where theDate = getdate() group by feeling`

* * *

如果您真的想要多个表，那么您可能希望实现多对多连接的中间。为此，有一个具有主键 (pkDateTable) 和 theDate 的表，具有主键 (pkFeeling) 和感觉选项的第二个表，然后创建具有两个外键 (pkDateTable, pkFeeling) 和原因的第三个表. 我不会这样做（对于这个例子来说太复杂了），但问题可能还有更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:55:33.967

这会有点复杂，因为您无法存储实际用户的识别信息。我的建议是执行以下操作：

1 - 为“感觉”创建一个表，其中仅包含用户可以选择的所有可用感觉的列表（可能类似于“好”、“好”、“好的”、“不好”、“坏”或任何组合你想要）。给这个表一个唯一的递增标识和一个 varchar(25) 来描述感觉。所以你的桌子看起来像这样：

```
Feelings
    id (int, identity)
    description (varchar(25)) 
```

2 - 为“用户”创建一个表，其中包含与所选密码合并的电子邮件的 MD5 或 SHA-2 哈希。这样您就不会存储他们的实际用户信息。还要给这个表一个唯一的递增标识。您的用户表应类似于：

```
Users
    id (int, identity)
    userhash (varchar(64)) 
```

3 - 通过创建一个包含Feelings.id 和Users.id 作为外键以及一个日期字段和一个描述“为什么”的字段的表，将它们作为一种关系组合在一起。我会这样：

```
UserFeelings
    id (int)
    user_id (int, fkey to Users.id)
    feeling_id (int, fkey to Feelings.id)
    when (date)
    why (varchar(max)) 
```

只要您将 user_id + 设置为唯一约束，那么您就不应该在数据库中出现任何冲突，一切都应该很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:52:26.857

这是我将如何设置它：

```
CREATE TABLE feelings (
  feeling_id tinyint PRIMARY KEY,
  feeling_type varchar(15))

INSERT INTO feelings (feeling_id, feeling_type) VALUES 
(3, 'Good'), (2, 'Normal'), (1, 'Bad') 
```

通过赋予“感觉”权重（3 = 好，1 = 坏），您可以更轻松地计算整体“情绪”。

```
CREATE TABLE feeling_entry (
  entry_id int PRIMARY_KEY,
  entry_date date,
  entry_feeling_id tinyint)) 
```

该表将记录日期和`feeling_id`参考表`feelings`。

```
CREATE TABLE feeling_entry_reason (
  entry_id int PRIMARY KEY,
  entry_reason varchar(255)) 
```

为感觉原因添加表格是有益的，因为每个记录的感觉可能没有原因。

最后，您应该有一种跟踪用户提交表单的方法，以防止重复的“负面”反馈。您的脚本将简单地检查该用户是否对该日期进行了输入。它与实际条目不对应。

```
CREATE TABLE feeling_submit (
  user_id int,
  entry_date date,
  PRIMARY KEY (user_id, entry_date)) 
```

# .net - 如何防止从 HTML 表单上传匿名文件

> ID：12353889
> 
> 赞同：1
> 
> 时间：2012-09-10T14:34:18.197
> 
> 标签：.net, security, file-upload

我们公司的一个网站存在重大安全漏洞。该网站基于 C#、ASP.Net 和 IIS 7 构建。有些黑客能够从网站主页的登录表单上传文件。网站上没有其他表格，用户只能看到索引页面。

当我检查服务器日志时，远程桌面或 FTP 没有匿名访问。所以我认为黑客只是从登录表单上传文件。我们已经设置了限制用户访问某些国家的防火墙，但是当我看到服务器日志时，来自这些受限制国家的人仍然能够访问该页面，并且这些文件仅来自这些国家。

我们使用的服务器是专用服务器。客户支持无法提供足够的帮助来解决此问题。

有人可以解释一下这里发生的事情以及我如何防止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:23:42.930

我认为您的应用程序无意接受匿名文件上传。这意味着某些东西正在被利用。

如果不查看您的应用程序源代码并且不知道您的服务器是如何配置的，那么实际上不可能提供一个简单的解决方案来防止您怀疑的文件上传漏洞。相反，我提供了有关如何保护您的服务器和应用程序的信息，我希望这些信息对您有用。

* * *

**重新开始：**现在您的服务器已被入侵，理想情况下，您应该重新格式化服务器并从最后一次知道的安全备份中加载数据。在不重新格式化的情况下挽救已被入侵的服务器并将其恢复到安全状态是相当困难的，除非您确切地知道它们在系统上被入侵的内容，并且可以确定您可以扭转影响。我总是会谨慎行事。

**主动保护：** 您应确保定期启用和应用 Windows 更新。您安装了每天运行的防病毒软件，一个严密的防火墙。当然，为所有用户帐户使用强密码。不要忘记定期修补第 3 方软件和控件。

**FTP 不安全：**您注意到您正在使用 FTP。[FTP 本身是不安全](http://en.wikipedia.org/wiki/File_Transfer_Protocol#Security)的，您的凭据以纯文本形式通过 Internet 发送，您应该避免使用 FTP，如果黑客入侵了您和您的服务器之间的任何网络（其中一些网络可能超出您的控制范围），那么他们当您登录时可能刚刚阅读它。不会记录身份验证错误，因为他们知道密码。[因此，用SFTP](http://en.wikipedia.org/wiki/SSH_file_transfer_protocol)替换 FTP ，或者更好的是只通过[VPN](http://en.wikipedia.org/wiki/VPN)隧道访问您的服务器到您的服务器。

**PCI 漏洞扫描：**一旦您的服务器处于相对安全、新鲜的状态，您应该对您的服务器运行 PCI 扫描。PCI 扫描是处理敏感信用卡详细信息的服务器的一项要求，但它对于检查任何面向公众的服务器的安全性很有用，即使您不处理信用卡也是如此。

有许多[PCI 合规性扫描提供商](https://www.pcisecuritystandards.org/approved_companies_providers/approved_scanning_vendors.php)。那里有很多免费试用解决方案，因此您的初始成本很低。我可以同时推荐[Comodo Hacker Guardian](http://www.hackerguardian.com/)和[McAfee Vulnerability Scanner](http://www.mcafee.com/us/products/vulnerability-assessment-saas.aspx)。

它使用起来非常简单，您注册并向扫描器提供您的服务的 IP 地址，然后它会扫描它并提供它知道并需要修补的所有漏洞的报告。它很可能不会在您的 Web 应用程序中找到漏洞，但很可能该漏洞存在于 IIS 或其他服务器技术中，而不是您的代码中。

我相信您会惊讶于可以返回多少关于服务器的信息，我第一次运行扫描时就是这样。

**强化您的 Web 应用程序：**一旦您解决了所有问题，您就可以相对确定您的服务器是安全的，现在您只需要检查您是否遵循[最佳实践](http://msdn.microsoft.com/en-US/practices)并强化您的代码。并非所有这些都一定适用，（例如，我不确定您是否使用 SQL Server），但您绝对应该按照以下教程编写代码：

[Microsoft：防止 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)
[MSDN：保护 IIS 7](http://blogs.msdn.com/b/alikl/archive/2008/02/28/securing-iis7-windows-server-2008-security-guide.aspx)
[Microsoft：为 ASP.NET 应用程序的安全配置 NTFS 文件权限](http://support.microsoft.com/kb/815153)

ASP.NET 有很多内置检查来尝试防止不安全的代码被注入到您的表单中。这可能与您的情况最相关，如果您确定这是他们破坏您的服务器的方式。[微软：防止 ASP.NET 中的注入攻击](http://msdn.microsoft.com/en-us/library/ff647397.aspx)

在构建 ASP.NET 应用程序时，了解所有各种漏洞可能存在的位置很有用。此表可能有用：

![网守表](../Images/3542ea4d7994fa95f52cc69be551f095.png)

归功于[Rick G. Garibay](http://rickgaribay.net)。您应该阅读他的安全演示：[强化 ASP.NET 应用程序和服务中](http://rickgaribay.net/Resources/PublishedContent/Hardening%20Security%20in%20ASP.NET%20Applications%20&%20Services.pdf)的安全性。

**继续检查：**一旦您的应用程序已经部署并正在运行，并且您已经强化了您的应用程序和服务器，只是为了让它运行，这是非常诱人的。但请定期检查防病毒软件是否仍在运行和正确更新，以及是否正在应用补丁等。在攻击发生之前扫描您的日志。您的服务器运行时间越长，随着时间的推移可能会发现更多漏洞，因此请继续运行 PCI 扫描，您选择的频率将取决于数据的安全要求。

* * *

这是一个有点长的答案，但我希望它有助于解决您的安全问题。

# php - PHP提交表单突出显示JQuery错误的文本字段

> ID：12353891
> 
> 赞同：0
> 
> 时间：2012-09-10T14:34:22.317
> 
> 标签：php, jquery, mysql, html, forms

我的网站由几个文件组成。首先，我有 index.html，我的表单详细信息所在的位置。它包含 JQuery，因此当用户按下提交时，站点会将填写的信息发送到处理所有信息的 .php 文件（检查信息，如果信息正确，则将其上传到MySQL数据库）。.html 文件在 .css 文件的帮助下进行格式化。

所有这些都正常工作。JQuery、HTML 页面或 PHP 文件中没有错误。

接下来，我想添加一个可以做以下两件事的功能：

*   该表单具有三个必需的文本字段。当用户未能填写其中任何一个，或未能通过位于 .php 文件中的电子邮件检查时，我希望看到发生错误的文本字段以红色突出显示（例如文本字段应变为红色）。

*   成功后，表单应该被隐藏，而另一个表单（位于同一位置但通过 .css 文件隐藏）变得可见。这仅包含一个标签，并具有以下文字：“提交成功。”

我对 JQuery 不太熟悉，所以我很高兴看到调用 .php 文件的 JQuery 已经工作了。即便如此，我对如何开始处理上述问题一无所知。谁能给我一个简单的例子或解释如何继续？

索引.html 文件：

```
<html>
<head>
    <title>Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="resources/assets/styles.css" type="text/css"  />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#contactForm").validate({
            debug: false,
            submitHandler: function(form) {
                // do other stuff for a valid form
                $.post('resources/assets/sharedatabase.php', $("#contactForm").serialize(), function(data) {
                 // $('#contactForm').hide();
                  $('#results').html(data);
                });
            }
        });
    });
    </script>

</head>

<div class="form">
<div class="formcontainer">
<form action="" method="post" id="contactForm" name="contactForm">
<fieldset>
And so on...

<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
...
    }
    */
} 
```

接下来，PHP 文件：

```
if (($_SERVER['REQUEST_METHOD'] == 'POST' && ... $_SERVER['REQUEST_METHOD'] == 'GET')
{
    if ($_SERVER['REQUEST_METHOD'] == 'POST')
    {
        if (!empty($empty_name)) {
            echo json_encode(array(
                'error' => true,
                'msg'   => "Name"
            ));
            exit;
            }
        elseif (!empty($empty_company))  {
            echo json_encode(array(
                'error' => true,
                'msg'   => "Company"
            ));
            exit;
            }
        elseif (!empty($empty_email))     {
            echo json_encode(array(
                'error' => true,
                'msg'   => "Email"
            ));
            exit;
            }
        else    
             {
            echo json_encode(array(
                'error' => true,
                'msg'   => "Something else went wrong."
            ));
            exit;
            }
    }
}
//send
else
{
    mysql_connect("site.nl", "username", "********") or die ('Error: ' . mysql_error());
    mysql_select_db ("databasename") or die(mysql_error());

    //creating values here

    $query="xxxxx";
    mysql_query($query) or die ('Error updating database');
    mysql_close();

    echo json_encode(array(
                'error' => false,
            ));
            exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:48:50.250

在提交数据之前，请检查必填字段。显示表单错误的最佳方式是简单地将“错误”类添加到表单项。

使用 CSS，将您的错误类格式化为任何内容（表单字段上的红色背景或其他内容）。在 jQuery 中，您可以执行以下操作：

```
// Check form fields for error.
if($('#name').val == ""){
  // Apply an error class.
  $('#name').addClass("error");
}

// On a successful submission, hide the old form and show the new one.
$('#oldForm').hide();
$('#newForm').show(); 
```

如果没有看到您的提交代码，我无法为您提供更多帮助，但是您可以进行后端验证并使用 AJAX 将结果传递给前端。这将允许您在显示新表单之前验证表单提交是否已进入数据库。

# jenkins - Jenkins 用于聚合下游项目状态的插件

> ID：12353897
> 
> 赞同：1
> 
> 时间：2012-09-10T14:34:38.537
> 
> 标签：jenkins, jenkins-plugins

我需要有以下工作流程：
运行“beforejob”-> 运行作业（job1、job2、job3）-> 在 job1、job2、job3 完成时运行“afterJob”。

只有在所有作业 job1、job2、job3 都具有 PASSED 状态的情况下，作业“afterJob”才应该具有 PASSED 状态。
如果某些作业 job1、job2、job3 具有 FAILED 状态，则“afterJob”也应该具有 FAILED 状态。

它就像[Join Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Join+Plugin)，但 join 插件仅在所有作业都具有 PASSED 状态的情况下运行 joinJob 。

PS。
我需要它来发送通知，其中的状态不是来自每个工作，而是来自每个组的一个 afterJob。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T04:54:19.863

您是否尝试过[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)。

您可以将其添加为构建步骤和/或构建后操作。它可能不会让你得到你需要的一切，但它会让你更近一步，有时这就是你所能要求的。

# css - 自定义 twitter 和 fb 分享按钮图像

> ID：12353905
> 
> 赞同：1
> 
> 时间：2012-09-10T14:34:55.923
> 
> 标签：css, facebook, user-interface, twitter

我的页面中有这段代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php echo $refLink; ?>" data-text="my text data" data-via="testdata" data-lang="it" data-size="large" data-count="none" data-dnt="true">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>

<a name="fb_share" type="button" 
share_url="<?php echo $refLink; ?>" id="facebook-share">Facebook</a> 
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
</script> 
```

哪个显示默认按钮（带有渐变的 Twitter 按钮和 fb 共享蓝色图标），但现在我想要两个灰色背景，没有这些图像......我该如何自定义它们？

我尝试使用他们的选择器自定义 CSS，但图像总是覆盖我的 css `background-color`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:39:58.160

将#facebook-share div 的 css opacity 属性设置为 0，然后在其周围放置另一个具有正确背景颜色的 div。

例如。

```
<div id="fb-wrap"><a name="fb_share" type="button" 
share_url="<?php echo $refLink; ?>" id="facebook-share">Facebook</a></div>

css:
#fb-wrap{
  background-color: #foo;
}
#facebook-share{
  opacity: 0;
} 
```

当然，您可以在包装器 div 上使用背景图像，并为按钮使用您喜欢的任何图像。

# django - django 内联小部件模板脚本在添加另一个内联时未呈现

> ID：12353912
> 
> 赞同：2
> 
> 时间：2012-09-10T14:35:20.350
> 
> 标签：django, autocomplete, django-admin, inline

当我添加另一个内联模板时，模板有一些 javascript 代码......

代码在这里：[https ://github.com/jeremyjbowers/django-autocomplete/blob/master/autocomplete/templates/admin/autocomplete/inline_widget.html](https://github.com/jeremyjbowers/django-autocomplete/blob/master/autocomplete/templates/admin/autocomplete/inline_widget.html)

当用户在管理页面上按下添加另一个内联链接时，会添加另一个内联，但脚本标签不会出现，在之前创建的之前它可以正常工作。

我正在使用[https://github.com/jeremyjbowers/django-autocomplete](https://github.com/jeremyjbowers/django-autocomplete)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:50:48.847

这是因为在小部件中呈现*内联 javascript 是一种不好的做法*。

即使添加了脚本标签，我也不认为`$(document).ready`回调会被触发。

如果你想修复它，你可以看看[django-autocomplete-light](https://github.com/yourlabs/django-autocomplete-light/commit/cc5eacc3004b90535449b87c6ec81e4640d3d979)是如何做到的：

1.  不要在文档加载时初始化小部件，而是[在**自定义信号回调**](https://github.com/yourlabs/django-autocomplete-light/commit/cc5eacc3004b90535449b87c6ec81e4640d3d979#L0L32)中进行，

2.  **[在文档加载](https://github.com/yourlabs/django-autocomplete-light/commit/cc5eacc3004b90535449b87c6ec81e4640d3d979#L1R320)**时发出自定义信号，

3.  **[创建小部件时](https://github.com/yourlabs/django-autocomplete-light/commit/cc5eacc3004b90535449b87c6ec81e4640d3d979#L1R326)**发出该自定义信号。

# r - 如何使用自定义中断从连续变量创建分箱因子变量？

> ID：12353915
> 
> 赞同：11
> 
> 时间：2012-09-10T14:35:30.160
> 
> 标签：r

我有一个看起来像这样的向量：

```
dataset <- c(4,7,9,1,10,15,18,19,3,16,10,16,12,22,2,23,16,17) 
```

我想创建四个虚拟类别，在其中我通过自定义中断对连续数据集进行分类。.. 例如：1:4、5:9、10:17、18:23。

输出虚拟类别将与原始连续向量具有相同的长度（在本例中为 18），但现在每个分箱虚拟变量将仅包含 1 或 0。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T14:41:42.030

使用`cut`：

```
data.frame(dataset, bin=cut(dataset, c(1,4,9,17,23), include.lowest=TRUE)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T16:22:41.273

我同意 Joshua 的观点，这`cut`是大多数人对这项任务的看法。我不喜欢它的默认值，更喜欢左闭区间，正确设置它是一个小麻烦`cut`（尽管可以做到。幸运的是，对于我虚弱的大脑，Frank Harrell`cut2`在他的 Hmisc 中设计了一个函数我更喜欢其默认值的包。第三种选择是使用`findInterval`它，它特别适用于您希望将结果用作另一个提取或选择过程的索引的问题。它的结果大致是您将`as.numeric`结果应用于`cut`：

```
require(Hmisc)
cut2(dataset, c(1,4,9,17,23) )
 [1] [ 4, 9) [ 4, 9) [ 9,17) [ 1, 4) [ 9,17) [ 9,17) [17,23] [17,23] [ 1, 4) [ 9,17)
[11] [ 9,17) [ 9,17) [ 9,17) [17,23] [ 1, 4) [17,23] [ 9,17) [17,23] 
```

（请注意，除非将最大值替换为 R 中无穷大的保留字，`findInterval`否则将使用上限作为闭合端以形成额外的区间。）`Inf`

```
findInterval(dataset, c( c(1,4,9,17,23) ) )
 [1] 2 2 3 1 3 3 4 4 1 3 3 3 3 4 1 5 3 4
as.numeric( cut(dataset, c(1,4,9,17,Inf), include.lowest=TRUE))
 [1] 1 2 2 1 3 3 4 4 1 3 3 3 3 4 1 4 3 3
as.numeric( cut(dataset, c(1,4,9,17,23), include.lowest=TRUE))
 [1] 1 2 2 1 3 3 4 4 1 3 3 3 3 4 1 4 3 3 
```

# c# - 如何在辅助扩展中访问大括号之间的视图内容

> ID：12353918
> 
> 赞同：0
> 
> 时间：2012-09-10T14:35:36.717
> 
> 标签：c#, asp.net-mvc, htmlextensions

有没有办法在 html 辅助扩展中的大括号之间获取视图的内容，以便我可以显示内容或不依赖条件元素。这个想法是测试用户是否可以访问特定内容，如果可以，则显示内部内容，如果没有，则不显示任何内容。

类似于 Html.BeginForm 的东西

```
<% using(Html.HasAccess()){%>
  <p>You can view the content<p>
<% } %> 
```

我发现了很多可以在内容周围添加标签的示例，但没有一个可以直接操作内容。

有可能还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:38:45.063

为什么不只是：

```
<% if (Html.HasAccess()){%>
  <p>You can view the content<p>
<% } %> 
```

?

# php - Wordpress Post 特色图片动态调整大小

> ID：12353921
> 
> 赞同：0
> 
> 时间：2012-09-10T14:35:42.600
> 
> 标签：php, image, wordpress

我有一个主题，其中我有不同类别的不同类型的模板。由于缩略图大小设置为固定大小。不同类别的图像未正确显示。有没有办法让类别/模板而不是整个系统的图像大小动态？我可以在多个类别中发布相同的帖子，这会产生问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:48:35.583

您可以为每个类别定义不同的大小。

[http://codex.wordpress.org/Function_Reference/add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)

# powershell - 如何在 Powershell 中循环访问 Active Directory 组成员

> ID：12353922
> 
> 赞同：4
> 
> 时间：2012-09-10T14:35:44.277
> 
> 标签：powershell, for-loop, active-directory-group

我正在尝试列出包含来自特定 OU 的成员的所有组。为此，我正在读取一个包含所有组名列表的文件，并使用 get-ADGroupMember $groupName 来查找每个组的成员。我将每个成员的值转换为字符串并与 $member.indexOf("specific OU") 进行比较。问题是，我还没有弄清楚如何获取 $member[$i].indexOf("specific OU")。我的代码如下。

编辑：如果我使用 for-each 循环，我可以正确地遍历成员，但我不能使用 break，它可以防止重复。

```
Import-Module ActiveDirectory
#declaring end result group array
$results = @()

#sets path for files
$pathName = $MyInvocation.MyCommand.Path
$pathLen = $pathName.LastIndexOf("\")
$pathStr = $PathName.Substring(0,$pathLen +1)
$APgroupFile = $pathStr + "APGroups.csv"
$groupFile = $pathStr + "GGroups.csv"

#gets the list of group names and loops through them
get-content $groupFile | foreach-object{
#sets all of the group names
#start of if1 
if($_.IndexOf("CN=") -ge 0){
$nameStart = $_.IndexOf("CN=")+3
$nameEnd = $_.indexOf(",")-$nameStart
$name = $_.substring($nameStart, $nameEnd)

#issue starts here
#goal is to find member of "specific OU".
#If found, add group to $results.  If not, go to next group
$members = get-ADGroupMember -Identity $name
if($members.length -gt 0){
$i=0
for($i=0; $i -le ($members.length -1); $i++){
#need to check users OU for specific OU.  If a user is member, save group to .txt.  If none are members, move to next group
    $OU = $members.toString()
    if($OU.indexOf("OU=specific OU") -ge 0){#start of if OU
    $results += New-Object psObject -Property @{'GroupName'=$name; 'Member'=$OU}
    break
    }#end if OU
    }#end for mem.length
}#end if mem.length
}#end if1
}#end foreach

$results | Export-Csv $APgroupFile -NoTypeInformation 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:00:01.093

试试这个：

```
Get-ADGroupMember -Identity $name |
Where-Object {$_.distinguishedName -like '*OU=specific OU*'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:54:10.987

您没有明确提及的一个考虑因素：嵌套 OU 呢？即，您是否只考虑直接在您的目标 OU 中的成员？或者，出于您的目的，两个或三个层次的 OU 成员是否也符合逻辑？例如，如果“California”是您的目标 OU，您是否只想要直接在 California 下的对象？或者您想在结果集中包括旧金山的所有成员和圣地亚哥的所有成员（它们是加利福尼亚的子 OU）？无论哪种方式：

[Get-ADUser 包括搜索和过滤功能 - http://technet.microsoft.com/en-us/library/ee617241](http://technet.microsoft.com/en-us/library/ee617241)

```
 Get-ADuser -Filter {sAMAccountName -eq "jdoe"} -SearchBase "OU=IS,DC=foodomain,DC=com" -SearchScope SubTree

  Get-ADuser -Filter {sAMAccountName -eq "jdoe"} -SearchBase "OU=IS,DC=foodomain,DC=com" -SearchScope OneLevel 
```

所以这里的方法是为你的目标用户搜索你的目标OU，为每个用户单独搜索。您是否会在返回的结果集中获得该用户。这可能是您测试的条件。显然，您将希望用适当的变量替换“jdoe”（我认为 $members[i].SamAccountName 会在那里解决问题）。

* * *

刚刚看到Shay Levy的回答。更简洁，干得好。如果没有明确的搜索库，您最终可能会访问隐藏在其他父 OU 下的同名容器，但结果集应该是相同的。例如，如果每个城市都包含一个标准的“Office Staff”OU，则每个城市都将使用“ *OU=Office Staff* ”表达式进行搜索。您可能想尝试这两种方法并测试性能差异。在相同的情况下，Shay Levy 的阅读更愉快。

# spring - Struts2 拦截器和 Spring 集成

> ID：12353926
> 
> 赞同：0
> 
> 时间：2012-09-10T14:35:54.853
> 
> 标签：spring, struts2, interceptor, interceptorstack

我的问题有点基本，因为我仍在学习 Struts2 和 Spring 以及它们的集成。当我们在 struts.xml 中定义一个拦截器时，例如

```
<interceptors>
  <interceptor name="validation" class="org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor"/> 

  <interceptor-stack name="simpleStack">
    <interceptor-ref name="validation">
      <param name="excludeMethods">input,back,cancel,execute</param>
    </interceptor-ref>
  </interceptor-stack>
</interceptors>

<default-interceptor-ref name="simpleStack"/> 
```

如果在 applicationContext.xml 我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
          "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
 <bean id="user" class="struts.model.User"/>
     <bean id="registerUserAction" class="struts.actions.UserInformationAction">
         <property name="userBean" ref="user"/>
    </bean>

    <bean id="chooseUsernamePasswordAction" class="struts.actions.ChooseUsernameAction">
        <property name="userBean" ref="user"/>
    </bean>    
</beans> 
```

如果没有定义拦截器，用户 bean 在两个操作（registerUserAction -> JSP -> chooseUsernamePasswordAction）中都是持久的，我可以访问这些属性。一旦引入了拦截器，看起来这些值就被清空了。

1.  首先从我读到的看起来我可能做错了。即集成了 Spring 的所有这些项目都处于单例默认模式，这可能是不正确的，因为多个用户将注册，因此每个用户都必须有自己的 Action/User bean。
2.  正在发生什么或需要做什么来传递信息并使拦截器正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:45:18.883

*如果*您在 Spring 配置中明确定义您的操作，则它们必须定义为`scope="prototype"`. 您需要手动定义它们是相对不寻常的，除非您特别想对所有内容使用 XML 配置，例如服务注入等。

我并不完全清楚您对用户 bean 的意图是什么。您*可以*使用 Spring 会话范围的 bean，可用于 Spring Web 上下文。我不确定这是多么必要。我通常手动完成它，并在我真正需要它时从会话中检索 bean。可能没关系。

另请注意，您的堆栈基本上消除*了所有*Struts 2 功能，例如将表单参数转换为操作属性。这*可能*是您想要的，但不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T11:25:50.410

我们也使用相同的项目结构

Struts2+Spring+Hibernate

在使用 Struts 拦截器之前，我们可以传递参数

但是使用拦截器后，我们无法发送参数（值为空）

为避免这种情况，请使用`params`拦截器，然后您可以传递参数

例如：

```
<action name="doUpload_valid1" method="importExcel" class="validationAction">
  <interceptor-ref name="params"/>
  <interceptor-ref name="fileUpload"/>

  <result name="error">jsp/cmdbValidPage.jsp</result> 
  <result name="success">jsp/testJob.jsp</result> 
</action> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:18:50.610

看看[struts-default.xml](http://struts.apache.org/2.0.6/docs/struts-defaultxml.html)。现在查看名为*defaultStack*的拦截器堆栈。在文档的最后，这个栈被设置为默认的拦截器栈。正如 Dave Newton 所解释的，struts 2 的所有魔力都来自于它的拦截器。

基本上，当您将堆栈设置为默认堆栈时，您会将包含 17 个拦截器的堆栈替换为仅包含 1 个拦截器的堆栈。这样做您放弃了许多 struts 2 功能，例如由拦截器*param*提供的参数注入。

另外，请注意验证拦截器包含在*defaultStack*中，但具有不同的参数*excludeMethods*。

# jdbc - 在支持阿拉伯语的 powerbuilder 9 中通过 JDBC 连接到 sql server

> ID：12353934
> 
> 赞同：0
> 
> 时间：2012-09-10T14:36:35.293
> 
> 标签：jdbc, unicode, utf-8, arabic, powerbuilder

给定： 1\. powerbuilder 9 应用程序 2\. microsoft sql server 2008 r2 3\. microsoft sql JDBC 驱动程序

我在使用 powerbuilder 9 中的 JDBC 连接（Microsoft JDBC 驱动程序）从 sql server 2008 r2 数据库中检索阿拉伯语数据时遇到问题。

我在 powerbuilder 9 中使用以下内容连接到数据库，但阿拉伯字符显示`???????`在数据窗口中，我尝试使用**UTF-8**和**CP1256**，但仍然出现阿拉伯字符`????`

```
SQLCA.DBMS = "JDBC"
SQLCA.AutoCommit = False
SQLCA.LogPass = gs_password
SQLCA.LogId = gs_userid
SQLCA.DBParm = "Driver='com.microsoft.sqlserver.jdbc.SQLServerDriver',URL='jdbc:sqlserver://servername:8080;databaseName=dbname;useUnicode=yes;characterEncoding=UTF8'"* 
```

数据已正确保存在数据库中。

知道如何使用 JDBC 连接读取阿拉伯字符吗？

# linux - 如何区分两个文件夹到多个补丁文件

> ID：12353936
> 
> 赞同：2
> 
> 时间：2012-09-10T14:36:42.707
> 
> 标签：linux, ubuntu, command-line, diff

首先，我尝试在 askubuntu 上问同样的问题，但我并没有走得太远...... [https://askubuntu.com/questions/186114/how-to-diff-two-folders-to-multiple-patch-files/ 186121#comment231985_186121](https://askubuntu.com/questions/186114/how-to-diff-two-folders-to-multiple-patch-files/186121#comment231985_186121)

所以，我会在这里复制/粘贴，希望能给我一个可行的解决方案......

我不是一个 unix 人，所以我会继续问：

我有以下问题 - 两个包含大量子文件夹的文件夹。我需要区分它们。

我试过这个：

```
diff -drupN vanila_kernel_3.0.8 my_kernel_3.0.8 > kernel.patch 
```

这会产生一个 185mb 的文件......并不是我真正想要的。

我希望差异的结果是许多较小的补丁，理想情况下，每个已更改的文件都有一个包含更改内容的补丁。这意味着我必须改变我使用差异的方式，我需要把它放在某种循环中......所以我尝试运行这个小脚本

```
for file in original_308/*.*; do
    diff -dupN "$file" "my_308/${file##*/}" > "$file".patch
done 
```

但它不起作用：/

理想情况下，我希望每次更改都有一个 .patch 文件，但是为原始文件更改的文件提供补丁就可以了（因为我可以过滤新添加的文件并将它们复制过来）

有人可以为我提供一个体面的方法吗？

更新：我知道这些文件夹和 4546 个新添加的文件之间有 231 个更改的文件......我只是对生成这 231 个补丁感兴趣。我什至有一个包含这 231 个文件名的文件，因此也可以在脚本中使用。

我用它来生成更改日志

```
diff -qdr -x *.o -x *.cmd -x *.d original_308 my_308 | sed "s/^.* and \(.*\) differ/\1/" | sort > changes.txt 
```

并且只打印更改的文件名，后跟“仅在 my_308”文件中...... 231 个文件位于该文件的顶部（前 231 行）

所以让我们说清楚 - 我想要源文件的 .patch 文件。如果补丁可以在补丁//file_name.c.patch 中结束，那就太好了……

如果你给我 PERL 脚本，请告诉我如何最好地使用它们，因为我不明白那些垃圾。请不要让我失望。我需要移植、测试和运行这个东西，我在 unix 命令和无形脚本 ffs 上浪费时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:12:37.603

像这样的东西？

```
DIR1="vanila_kernel_3.0.8"
DIR2="my_kernel_3.0.8"
OUTDIR="patches"
SUFFIX=".patch"

while IFS="," read f1 f2; do
  filename=${f1#$DIR1}  # remove base dir name
  outfile="${OUTDIR}/${filename}${SUFFIX}"
  mkdir -p $(dirname $outfile)  # make sure output directory exist

  diff -dupN "$f1" "$f2" > "$outfile"
done < <(diff -qdr $DIR1 $DIR2 | awk '/differ$/{print $2","$4}') 
```

* * *

### 快速解释：

```
diff -qdr $DIR1 $DIR2 | awk '/differ$/{print $2","$4}' 
```

这应该会为您提供一份表格中已更改的文件列表`source_file,dest_file`。将其传递给`while ...read..`每个已更改文件的循环体，文件名存储为`f1`f2。

```
filename=${f1#$DIR1}  # remove base dir name 
```

这会去除文件名的尾随部分（通过删除基本目录），因此我们可以确定输出补丁文件的正确路径。之后，只需确保输出目录存在并在 和 上写出差异`f1`结果`f2`。

所有文件名的引号确保我们可以处理文件名中的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:24:27.667

你可以拿下《Learning Perl》这本书，一周就学会了，Perl 很酷，请不要说它是垃圾。这是生成补丁的shell脚本

```
find ./original_308 -type f | while read file
do
  nfile="./my_308/${file#*original_308/}"
  if [ -f $nfile ]; then
    patchfile="./patch/${file#*original_308/}.patch"
    mkdir -p `dirname $patchfile`
    echo "checking $file $nfile"
    diff -dupN "$file" "$nfile" > "$patchfile" && rm "$patchfile"
  fi
done 
```

diff xxx >patch && rm patch 只会删除空的补丁文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T15:37:59.610

这应该适用于`kernel.patch`文件，即使您提供的选项`diff`与上面显示的选项不同：

```
perl -ne 'if(m{^diff .* (.*/.*) (.*/.*)}) {
              my $f = $1;
              $f =~ s{/}{_}g;
              open $FH, ">", "$f.patch" or die $!;
          } else {
              print {$FH} $_;
          }' kernel.patch 
```

如果您的文件名包含空格，这可能会中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T16:05:20.767

感谢大家的贡献...这是最终结果

```
#!/bin/bash                               
FOLDER_OLD="original"
FOLDER_NEW="changed"
FOLDER_PATCHES="./fresh_patches"

echo "Generating changelog for $FOLDER_OLD --> $FOLDER_NEW"
diff -qdr ${FOLDER_OLD} ${FOLDER_NEW} | sed "s/^.* and \(.*\) differ/\1/" | sort > newchanges.txt

mkdir -p ${FOLDER_PATCHES}                                                                                                           
for newfile in `find $FOLDER_NEW -type f`
do
sufix=${newfile#${FOLDER_NEW}/}
oldfile="${FOLDER_OLD}/${sufix}"

if [ -f $oldfile ]; then
    patchfile="${FOLDER_PATCHES}/`echo $sufix |sed 's/\//_/g'`.patch"
    if [ "`diff $oldfile $newfile`" != "" ]; then
        echo "Make patch ${patchfile}"
        diff -dupN "$oldfile" "$newfile" > "$patchfile"
    fi
else
patchfile="${FOLDER_PATCHES}/ADDONS/${newfile#$FOLDER_NEW}"
    echo "Copy $newfile --> $patchfile"
    mkdir -p "`dirname ${patchfile}`"
    cp $newfile $patchfile
fi
done 
```

该脚本首先生成更改文件列表和仅对新项目/文件夹唯一的文件；然后它为每个文件生成一个补丁文件并将新添加的文件复制到 ADDONS 文件夹（新项目独有）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T06:36:23.240

1.  **项目清单**

    ```
     $ diff -rauB  old_dir   new_dir   >  patchfile_name

             $ patch --dry-run -p1 -i patchfile_name

             $ patch -p1 -i patchfile_name 
    ```

这会在两个目录之间创建一个补丁。

# web-services - 无法从 WebService Flex 4.6 中获取结果

> ID：12353939
> 
> 赞同：1
> 
> 时间：2012-09-10T14:36:52.057
> 
> 标签：web-services, apache-flex, flex4.5

我是 FLEX 的新手，我无法从我的网络服务中获取结果。

在我的项目中，我使用 php 函数来形成一个 web 服务并返回一个校验和。以下表单项可以正常返回校验和。

```
<s:FormItem label="LoginCheck">
  <s:TextInput id="loginChecklastresult" text="{loginCheckResult.lastResult as int}"/>
</s:FormItem> 
```

但是，当我在脚本中使用以下代码时。

```
protected function loginButton_clickHandler(event:MouseEvent):void
{
  loginCheckResult.token = accountloginService.loginCheck(usernameLogin.text,passworkLogin.text) ;
  var check:int = loginCheckResult.lastResult as int;
} 
```

“检查”的值始终为 0。

相应的呼叫响应者和服务是

```
<s:CallResponder id="loginCheckResult" />
<accountloginservice:AccountloginService id="accountloginService"
   fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
   showBusyCursor="true"
   /> 
```

并且没有显示任何故障。

# splunk - splunk 4.3.3 索引器过滤问题

> ID：12353944
> 
> 赞同：1
> 
> 时间：2012-09-10T14:37:04.830
> 
> 标签：splunk

我在过滤/忽略索引器上的 splunk 中的某些事件时遇到了一些问题。

我在 ubuntu 12.04 上运行一个 splunk 4.3.3 索引器，它运行良好，可以接收来自远程 syslog 主机和运行 splunkforwarder-4.3.3-128297-x86-release 的 Windows 主机的输入

问题是，我想过滤掉一些事件。按照这里的文档...

从通用转发器过滤索引器上的窗口事件 [http://splunk-base.splunk.com/answers/24310/filter-windows-events-on-indexer-from-a-universal-forwarder](http://splunk-base.splunk.com/answers/24310/filter-windows-events-on-indexer-from-a-universal-forwarder)

我可以成功过滤掉安全事件，但无论出于何种原因，系统事件 10060 仍在通过

```
root@box:/home/msbren# cat /opt/splunk/etc/system/local/transforms.conf
[FilterSecurityEvents]

REGEX=(?msi)^EventCode=(4634|4624|4769|515|577)

DEST_KEY=queue

FORMAT=nullQueue

[FilterSystemEvents]

REGEX=^EventCode=10016

DEST_KEY=queue

FORMAT=nullQueue

root@box:/home/msbren# cat /opt/splunk/etc/system/local/props.conf
[WinEventLog:Security]

TRANSFORMS-Filter_Events = FilterSecurityEvents

[WinEventLog:System]

TRANSFORMS-Filter_Events = FilterSystemEvents

root@box:/home/msbren# 
```

据我了解，我做的事情是正确的，所以我一定遗漏了一些东西。如果有人有任何建议，我将非常感激。

-麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T01:19:49.253

要添加到 MHibbins 注释，您需要删除 EventCode 之前的 ^，因为 EventCode 位于事件中间。查看[http://blogs.splunk.com/2012/09/21/the-splunk-app-for-active-directory-and-how-i-tamed-the-security-log/](http://blogs.splunk.com/2012/09/21/the-splunk-app-for-active-directory-and-how-i-tamed-the-security-log/)上的 splunk 博客文章关于这个的详细过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:25:01.643

我会建议....

首先，Splunk 在 SplunkBase 有一个官方论坛，非常适合这些问题。

其次，查看两个过滤器...您在系统节中缺少正则表达式标志。

即您拥有的安全性和您拥有`REGEX=(?msi)^EventCode=(4634|4624|4769|515|577)`的系统`REGEX=^EventCode=10016`。

我相信这是问题所在，因为 MS 事件是多行的，您将需要`m`多行标志，因此我建议至少将您的系统 REGEX 更改为`REGEX=(?msi)^EventCode=10016`.

试一试，让我们知道你的进展如何……

米宾

# php - 来自textarea的PHP MySQL新行/空格

> ID：12353948
> 
> 赞同：0
> 
> 时间：2012-09-10T14:37:32.770
> 
> 标签：php, mysql, json

我对文本区域开头的空格和换行有疑问。我将带有 ajax 的 json 字符串发送到 php 脚本。然后我将字符串解码为一个 php 数组（使用 json_decode）。所以我在这个数组中有一个字符串，开头有两个换行符。如果从数组中打印文本，则有换行符，但是如果我将文本存储到 mysql 数据库中，则换行符消失了...仅在字符串的开头，换行符消失了...在字符串的其余部分，换行符都可以。

感谢您的回答！抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:41:11.627

可能（希望）您在存储到数据库之前进行了一些转义/清理。这可能会修剪你的结果，而在纯 php 中，结果不会被修剪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:59:12.903

使用 PHP [serialize()](http://php.net/manual/en/function.serialize.php)确保您的信息保持需要保存的方式。然后添加到数据库。检索时，调用[unserialize()](http://php.net/manual/en/function.unserialize.php)以获取所有可爱的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:36:08.793

在大多数浏览器中，textareas 的值以某种方式解析，如果第一个字符是换行符，则忽略它。

```
<textarea>Value</textarea> <!-- value will be "Value" -->

<textarea>
Value
</textarea> <!-- value will be "Value\n" -->

<textarea>

Value

</textarea> <!-- value will be "\nValue\n\n" --> 
```

在 Chrome / FF / Opera 中使用 javascript 检查。

# caching - 为 openjpa 2 使用全局缓存

> ID：12353949
> 
> 赞同：1
> 
> 时间：2012-09-10T14:37:42.813
> 
> 标签：caching, global, openjpa

我在我的服务器中部署了 2 个 Web 应用程序，它们使用相同的持久性单元。一个是更新对象，另一个应用程序正在获取它。在这两个 Web 应用程序中，openjpa 缓存都在 L2 级别启用。因此，Web 应用程序所做的更改不会反映在其他 Web 应用程序上。因为这两个上下文都有自己的开放 jpa 缓存。

我如何在全球范围内使用开放的 jpa 缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:59:11.107

您需要将 L2 缓存更改为支持分布式缓存的缓存，例如[Oracle Coherence](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)或[Memcached](http://memcached.org/)。

[此处](http://ppoddar.blogspot.com/2009/10/l2-cache-in-jpa-20-and-openjpa-plug-in.html)提供了使用 Coherence 进行设置的说明。我在网上找不到有关 Memcached 的说明，但我相信这是可能的。

# rest - 有没有办法在没有用户的情况下访问 LinkedIn API

> ID：12353950
> 
> 赞同：8
> 
> 时间：2012-09-10T14:37:45.760
> 
> 标签：rest, oauth, linkedin

我正在构建一个使用 REST API 从 LinkedIn 获取数据的应用程序。当我的用户拥有 LinkedIn 帐户时，我使用 OAuth 代表用户进行身份验证和访问数据。

我的问题是当用户没有 LinkedIn 帐户时。在这种情况下，我想回退到匿名访问并从 LinkedIn 获取非常基本的（和公开的）信息。

我在其他一些问题和讨论中看到，一般来说，LinkedIn 不允许匿名访问其 API，但我也看到了一些关于也可以匿名使用的 API 的提示。

绝对没有办法从 LinkedIn API 匿名获取任何类型的数据？即使是任何人都可以在不登录的情况下在用户的公开资料中看到的最基本数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:53:40.283

根据[使用条款，](https://developer.linkedin.com/documents/linkedin-apis-terms-use)不允许向未经身份验证的用户显示 API 数据（第 III(A)(1)、III(A)(2)(g) 节）。从 API 中提取的所有数据都应由经过身份验证的用户使用其 OAuth 凭据提取。

在匿名显示基本个人资料数据方面，[会员个人资料插件](http://developer.linkedin.com/plugins/member-profile-plugin-generator?button-type-inline=true)旨在做到这一点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-16T05:00:28.533

//Rest API 来获取登录用户的详细信息

var lkdURL = " [https://api.linkedin.com/v1/people/~:(id,location:(name),email-address,first-name,last-name)?oauth2_access_token=](https://api.linkedin.com/v1/people/~:(id,location:(name),email-address,first-name,last-name)?oauth2_access_token=) "+LinkedSecurityKey+"&callback=你的功能";

AJAX(lkdURL); // ajax 调用

# tinymce - Umbraco TinyMCE - 在插入/更新链接中不显示绝对 URL

> ID：12353953
> 
> 赞同：4
> 
> 时间：2012-09-10T14:38:00.007
> 
> 标签：tinymce, umbraco

这让我发疯了几个小时，我设法在我的本地开发机器上修复它，当然当我把它投入使用时它不起作用。

这是我在 Umbraco 设置中所做的：

在我添加的 Config/tinyMceConfig.Config 中：

```
<config key="relative_urls">false</config>

<config key="convert_urls">false</config>

<config key="remove_script_host">false</config> 
```

我还修改了 insertLink.aspx 中的 Javascript 代码，将 localUrl 设置为空白，因为这使它可以在开发机器上运行。有谁知道如何在我的实时服务器上修复这个非常愚蠢的错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:06:53.190

Unfortunately, **you could not override "remove_script_host" because it is hardcoded** in umbraco.editorControls.tinyMCE3.TinyMCE :

Line 250: `config.Add("remove_script_host", "true");`.

And when you add new value to config file - you will get **"true,false"** instead of **"false"**, because of **NameValueCollection** used.

And as we know, when you add **2 items with same key** to NameValueCollection, as result you will have **concatenation of that two values, with comma separator**.

So don't waste your time on finding out what's wrong with your "remove_script_host" configuration.

# objective-c - 'NSMenu' 可能不会响应 'initWithTitle:action:keyEquivalent:'

> ID：12353954
> 
> 赞同：0
> 
> 时间：2012-09-10T14:38:03.020
> 
> 标签：objective-c, xcode

我尝试使用以下代码向我的应用程序菜单添加一个选项：

```
NSMenuItem *myNewMenuItem = [[[NSMenu alloc] initWithTitle:@"MenuOption1" action:@selector(myNewMenuItemMethod) keyEquivalent:@"j"] autorelease];

[myMenu addItem:myNewMenuItem]; 
```

在编译时，我得到了标题的警告，它显示在控制台中，我的应用程序根本不会运行。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:40:33.657

您收到警告的原因是您试图将“ `NSMenu`”对象分配给您已声明为“”的对象`NSMenuItem`。

这不是一回事。NSMenu 对象*使用*NSMenuItems 来定义它们显示的项目。

利用[`[[NSMenuItem alloc] initWIthTitle: action: keyEquivalent:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMenuItem/initWithTitle%3aaction%3akeyEquivalent%3a)

# css - 准备好像在 duolingo 中一样使用 TreePanel 了吗？

> ID：12353959
> 
> 赞同：0
> 
> 时间：2012-09-10T14:38:25.387
> 
> 标签：css

[我正在寻找如何在http://duolingo.com/](http://duolingo.com/)中进行树形面板的概念

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:45:27.840

我不确定这是否有帮助，但如果您使用的是 Google Chrome，那么我建议您右键单击 DuoLingo 主页的内容区域并选择“检查元素”。这将向您展示 html 布局和一些 css 样式，希望能让您大致了解他们是如何设置和实现这样的设计的。

如果您不使用 Google Chrome，则可以使用其他浏览器的插件，例如[firebug](https://getfirebug.com/downloads)。

希望这可以帮助。

# wordpress - wordpress 和动态页面

> ID：12353960
> 
> 赞同：0
> 
> 时间：2012-09-10T14:38:30.377
> 
> 标签：wordpress, embed

我最近在 localhost 上安装了 wordpress。我想将动态页面集成到 wordpress。即用户选择了一些复选框，我创建了一个图表并显示它。

1）是否可以直接使用wordpress？2) 目前，图表服务器也是本地主机上的 Java 服务器。我可以使用嵌入页面吗？3) 我是一名 Java/PHP 开发人员，我可以对 wordpress/chart 服务器进行所需的任何修改。我确实在互联网上阅读过，但找不到 amything。

你能指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:17:54.320

更新 ：

我发现了这个——http [://wordpress.org/extend/plugins/iframe/](http://wordpress.org/extend/plugins/iframe/)

初步测试看起来很有希望。如果它不起作用，我会更新这篇文章。

谢谢。

# jquery - 在文档就绪时显示提示

> ID：12353966
> 
> 赞同：0
> 
> 时间：2012-09-10T14:38:47.243
> 
> 标签：jquery, tiptip

我正在使用 Drew Wilsons Tip Tip Plugin 和修改后的方法来“显示”、“隐藏”或“销毁”一个 TipTip...

出于某种原因，我无法准备好在文档上显示的所有工具提示，但它们不会出现我想知道是否有人可以引导我朝着正确的方向前进......这是我的代码......

jQuery：

```
jQuery(document).ready(function($) {
$(".botpage a").tipTip({ content: "This is an anchor tag!"});
$(".botpage a").tipTip('show');
}); 
```

提示默认值

```
var defaults = {
        activation: "hover", // How to show (and hide) the tooltip. Can be: hover, focus, click and manual.
        keepAlive: false, // When true the tooltip won't disapper when the mouse moves away from the element. Instead it will be hidden when it leaves the tooltip.
        maxWidth: "200px", // The max-width to set on the tooltip. You may also use the option cssClass to set this.
        edgeOffset: 6, // The offset between the tooltip arrow edge and the element that has the tooltip.
        defaultPosition: "bottom", // The position of the tooltip. Can be: top, right, bottom and left.
        delay: 400, // The delay in msec to show a tooltip.
        fadeIn: 200, // The length in msec of the fade in.
        fadeOut: 200, // The length in msec of the fade out.
        attribute: "title", // The attribute to fetch the tooltip text if the option content is false.
        content: false, // HTML or String or Function (that returns HTML or String) to fill TipTIp with
        enter: function () { }, // Callback function before a tooltip is shown.
        afterEnter: function () { }, // Callback function after a tooltip is shown.
        exit: function () { }, // Callback function before a tooltip is hidden.
        afterExit: function () { }, // Callback function after a tooltip is hidden.
        cssClass: '' // CSS class that will be applied on the tooltip before showing only for this instance of tooltip.
    }; 
```

HTML

```
<div class="botpage">
<a>TOOLTIP YAY!</a>
</div> 
```

我究竟做错了什么？？？如果您需要任何其他代码，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:56:42.907

啊哈。我看到了这个问题。它显示了一个工具提示。但它只显示一个。看起来该插件可能一次只能让您显示一个。请参阅此更新的小提琴：jsfiddle.net/ygswQ/1。因此，您可能需要修改源代码或使用其他工具提示插件来执行此操作。

有*一堆*jQuery 工具提示插件。我认为最受欢迎的之一是 qtip。以下是如何在 qTip 中执行此操作的示例：http: [//jsfiddle.net/GEycz/](http://jsfiddle.net/GEycz/)

# ios - 如何在界面生成器中隐藏 UIPickerView？

> ID：12353969
> 
> 赞同：0
> 
> 时间：2012-09-10T14:38:50.660
> 
> 标签：ios, xcode, uipickerview

编辑xib文件时，UIPickerView占用空间很大，有点烦人，不想看的时候怎么隐藏呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:48:29.877

你不能从 Interface Builder 中“隐藏”它，但是你可以做两到三件事来减少它对你的干扰。

1)

将它在您的 ViewController 中出现的顺序更改为最高（或实际上是最深），因此它位于其他所有内容的后面。然后，您放置在 Picker 上的所有其他控件或视图都将位于 Picker 的“顶部”。

这是我的 Interface Builder 中的样子：

![Picker 位于视图顶部，或](../Images/bef366a0da3815ec0e5991ce29ea6820.png)

2)

在 Picker 对象上设置“隐藏”位。这会使 IB 中的选取器“变暗”，但同时不要忘记在对象出现时以编程方式取消隐藏它。

3)

或者只是将 Picker 移出您正在做的任何事情，然后将其移动到位（无论是在编译之前在 IB 中手动还是在运行时以编程方式）。

# c++ - C/C++ 中的 sizeof char* 数组

> ID：12353973
> 
> 赞同：11
> 
> 时间：2012-09-10T14:39:00.890
> 
> 标签：c++, c, sizeof

有很多类似的查询，但就我而言，我不明白什么不起作用：

```
int mysize = 0;
mysize = sizeof(samplestring) / sizeof(*samplestring);
std::cout << mysize << '\n' << samplestring; 
```

这输出：

```
4

Press 'q' to quit. 
```

这怎么可能？4 绝对不是这个字符串的大小。我什至尝试了以下方法，结果相同：

`mysize = sizeof(samplestring) / sizeof(samplestring[0]);`

编辑：好的，这是声明：

```
char *samplestring = "Start."; 
```

我在 C++ 上，但我需要使用只接受 char * 的函数。稍后在代码中，我将新字符串分配给该变量，例如：

```
samplestring = "Press 'r' for red text."; 
```

是的，编译器给了我警告，但我不知道如果我不能覆盖它们，我怎么能使用不同的字符串......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T14:40:32.540

`4`不是字符串的大小，因为`samplestring`不是字符串。它是一个`char*`，其大小为（在您的平台上）4，除以 1（大小`char`）正确地为 4。

在 C++ 中，您将使用`std::string`and`length()`方法。

在 C 语言中，您将使用`strlen`以 NULL 结尾的字符指针作为参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T14:49:34.853

首先，`sizeof(samplestring[0])`与 相同`sizeof(*samplestring)`，它们都返回`samplestring`数组第一个元素的大小。并且，假设`samplestring`是一个字符数组，`sizeof(char)`定义为 1。

你还没有展示如何`samplestring`声明。它可能是以下之一：

```
char const *samplestring = "Hello, World!"; 
```

或者

```
char *samplestring = malloc( ... ); 
```

或者

```
char samplestring[10]; 
```

在前 2 种情况下，类型`samplestring`是`char *`，所以`sizeof(samplestring)`返回`sizeof(char *)`，在您的平台上是 4。

在第三种情况下，类型`samplestring`为`char[10]`（10 个字符的数组），但如果调用以 a`char *`作为参数的函数，则 char 数组将*衰减*为指向数组第一个元素的指针。在这种情况下，尝试`sizeof`在函数内打印仍然会导致打印指针的大小。

如果您希望从函数中打印原始数组的大小，则函数参数需要是指向原始数组类型的指针（并且类型包括原始数组的大小）。

```
#include <stdio.h>

void foo( char (*arr)[42] )
{
  printf( "%u", (unsigned)sizeof(*arr) );
}

int main()
{
  char arr[42];
  foo( &arr );

  return 0;
} 
```

输出：

```
42 
```

这固定了可以传递给函数的数组的大小，并且在很多情况下是不可取的。唯一的其他解决方案是自己跟踪数组（或者`strlen`如果您有一个以 NULL 结尾的字符串，则使用）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T14:43:43.617

有两种方法可以使字符串保持不变，而您的技术仅适用于第一种。第一个创建一个字符数组，您可以在编译时获得其大小，另一个创建一个*指向*字符数组的指针。

```
char samplestring[] = "hello";
char * samplestring = "hello"; 
```

尝试以您的方式获取第二种情况的大小只会给您指针的大小。在 32 位构建上，指针的大小为 4 个字符，即指针占用与 4 个字符相同的内存量。

以下将*始终*为正确以空字符结尾的字符串提供正确的长度，但速度较慢。

```
mysize = strlen(samplestring); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T14:48:47.427

看起来好像你有一个指针，而不是一个数组。当程序需要时，数组会转换为指针，所以你会得到：

```
size_t size(char * p) { // p is a pointer
    return sizeof(p) / sizeof(*p); // size of pointer
}

size_t size(char p[]) { // p is also a pointer        
    return sizeof(p) / sizeof(*p); // size of pointer
} 
```

虽然，因为`sizeof (char) == 1`，这里的除法是多余的；如果指针指向更大的类型，那么您会得到不同的意外结果。

在 C++（但显然不是 C）中，您可以将数组的大小推断为模板参数：

```
template <typename T, size_t N>
size_t size(T (&)[N]) {
    return N;  // size of array
} 
```

或者您可以使用 和 等类`std::vector`来`std::string`跟踪大小。

在 C 中，您可以使用`strlen`来查找以零结尾的字符串的长度，但在大多数情况下，您需要自己跟踪数组大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:41:12.917

您在询问 char 上指针的大小。所以我猜你使用的是32位系统。

如果您使用 C++，请使用 std::string ：

```
std::string samplestring("Hello world");
std::cout << samplestring.size() << std::endl; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T14:42:37.900

元素的 sizeof 返回为该对象分配的内存大小。在您的示例中，字符串可能在某处声明为

```
samplestring[4] 
```

在这种情况下，内存大小为 4。您可能希望在应用程序中使用的方法是

```
strlen(samplestring); 
```

它返回空终止字符串的大小（没有终止）

# python - 在 GAE 项目中使用 pycharms 单元测试运行程序

> ID：12353974
> 
> 赞同：2
> 
> 时间：2012-09-10T14:39:02.140
> 
> 标签：python, unit-testing, google-app-engine, pycharm

在我们的项目中，我们一直使用 ant 命令来运行项目的单元测试。这个 ant 命令只是调用一个 manage.py 文件（它本质上将 GAE 和 django 联系在一起）。

> 示例用法：python manage.py test

```
from appengine_django import InstallAppengineHelperForDjango
InstallAppengineHelperForDjango(version='1.2')

from django.core.management import execute_manager
try:
    import settings # Assumed to be in the same directory.
except ImportError:
    import sys
    sys.stderr.write("""Error: Can't find the file 'settings.py' in the directory containing %r. 
It appears you've customized things.
You'll have to run django-admin.py, passing it your settings module.
(If the file settings.py does indeed exist, it's causing an ImportError somehow.)
""" % __file__)
    sys.exit(1)

if __name__ == "__main__":
    execute_manager(settings) 
```

在 IDE 方面，团队已经转而使用 pycharm，这是出于提高开发人员生产力的愿望。但是，我们无法让 pycharm 的单元测试运行程序正常工作。

Pycharms 尝试运行测试会导致错误：

> 找不到 Google App Engine SDK！

跑步者被称为如下：

> python \pycharm\django_test_manage.py" 测试可见性

在 pycharm 项目设置中：

*   已添加并启用 google app engine sdk
*   我尝试扩展 python 解释器以包含 GAE 的路径
*   修改 django_test_manage.py 文件以包含 GAE 的路径

所有结果都以 App Engine SDK 错误结束。我忽略了一些微不足道的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:38:57.470

改造我的开发环境后，我能够让 Pycharms 单元测试运行程序正常工作。我没有输入我遵循的步骤，而是看到了这个与我遵循的非常相似的博客：http: [//schettino72.wordpress.com/2010/11/21/appengine-virtualenv/](http://schettino72.wordpress.com/2010/11/21/appengine-virtualenv/)

我的虚拟环境没有明确导入 Google App Engine 及其相关的第三方库，这导致单元测试运行器崩溃。

# asp.net - WCF 服务在服务器上不起作用

> ID：12353976
> 
> 赞同：1
> 
> 时间：2012-09-10T14:39:17.507
> 
> 标签：asp.net, wcf

WCF 服务不在服务器上工作。我收到以下错误

> 由于内部错误，服务器无法处理请求。有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。

它在本地主机中为我工作

我还在 web.config 中设置了端点地址

```
 <service name="Myproject.project.Web.UI.SurveyServices">
      <endpoint adress="http://www.abc.com/SurveyServices/SurveyServiceWeb.svc" 
      behaviorConfiguration="Myproject.project.Web.UI.SurveyServices.SurveyServiceWebAspNetAjaxBehavior" 
      binding="webHttpBinding" 
      contract="Myproject.project.Web.UI.SurveyServices.SurveyServiceWeb" />
   </service> 
```

我正在使用 Microsoft.Practices.Unity 进行数据访问。在查看异常详细信息时，返回了错误。

```
 Some internal error occured while processing your request please try again later Error:System.NullReferenceException: Object reference not set to an instance of an object.

       at MyProject.Project.Web.Extensions.UnityUtiliy.GetContainer() in E:\HostingSpaces\montotec\myproject.domain.com\wwwroot\MyProject.Project.Web.Extensions\UnityUtiliy.cs:line 62

       at MyProject.Project.Business.Surveys.SurveyServiceManager.GetSurveyDetailsBySurveyId(Int32 SurveyId) in E:\HostingSpaces\montotec\Myproject.domain.com\wwwroot\Myproject.project.Business.Surveys\SurveyServiceManager.cs:line 31" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:25:07.000

我已经解决了这个问题

为了解决这个问题，我被设置`<serviceHostingEnvironment aspNetCompatibilityEnabled="true">` 为`<system.serviceModel>`

# oracle - Oracle 存储过程中的选择引发 PLS-00428

> ID：12353980
> 
> 赞同：0
> 
> 时间：2012-09-10T14:39:32.590
> 
> 标签：oracle, stored-procedures

我对 Oracle 很陌生，我被安排在一个需要我使用它的项目上。我正在尝试创建一个新的存储过程，select语句有效，但是当我运行整个过程时，它会说：

[错误] PLS-00428 (8: 9)：PLS-00428：此 SELECT 语句中应有一个 INTO 子句

这是代码：

```
CREATE PROCEDURE SSACHDEV.CheckServiceProviderDownload
as

tempInt number;

BEGIN

    Select 
        distinct(trunc(dateStamp)), 
        SVCProviderSTTSSEQID, 
        CaseNbr 
        into 
        "Date",
        PrividerId,
        CaseNumber
    from SVCProviderSTTS 
    Where (trunc(datestamp) between trunc(sysdate - 1) and trunc(sysdate));

   -- tskmgr.task_priority_download (CaseNumber, Id, tempInt);

END; 
```

我想我必须创建一个临时表来存储结果，然后做一个游标来调用我已经注释掉的下一个过程，称为 tskmgr.task_priority_download(CaseNumber, Id, tempInt);

任何帮助将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:49:35.823

首先，我建议不要使用名为 date 的本地临时变量。在我看来，像 myDate 或 Date1 或其他任何东西会更可取。

其次，您必须声明这些变量——Date、ProviderId 和 Casenumber。

例如，

```
CREATE PROCEDURE...
as
   tempInt NUMBER;
   myDate NUMBER;
   caseNumber VARCHAR2(100);
   ProviderId NUMBER;
BEGIN
... 
```

最后，即使它让事情变得有点冗长，我还是倾向于给我的变量加上前缀，这样我就可以知道它们是变量。例如，我可能会这样做，但有些人会告诉我这是浪费和不必要的。

```
CREATE PROCEDURE...
as
   tempInt NUMBER;
   l_Date NUMBER;
   l_caseNumber VARCHAR2(100);
   l_ProviderId NUMBER;
BEGIN
... 
```

以这种方式命名我的变量可以让我更容易理解当我在执行 join 或 where 子句并且列名与我的变量相同时 - 你这样做。

不过，我对错误消息有些困惑。如有必要，我会再看一眼并更新我的答案。

# c# - 给定项目 GUID，我如何找到项目的名称/路径？

> ID：12353982
> 
> 赞同：4
> 
> 时间：2012-09-10T14:39:33.747
> 
> 标签：c#, .net, solution, envdte

我有一个 sln 文件中的项目 GUID 列表。

我需要以编程方式找到与每个 GUID 对应的项目。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:36:23.100

项目 GUID 与 .sln 文件中的项目名称一起存储，如下所示：

```
Project("{Project Type GUID}") = "MyProject",
"Source\MyProject\MyProject.vbproj",
"{AB5BA87B-77D5-4812-B02C-9B4FB87F4EF6}" EndProject 
```

从理论上讲，您可以预先解析解决方案文件并构建 Project-To-GUID 关联的映射。建立该映射后，您应该能够很容易地将对项目 GUID 的任何引用替换为实际项目名称。

注意：您在项目文件中看到的第一个 GUID 是项目类型，而不是实际项目。这有助于 Visual Studio 在打开和使用文件时管理要使用的模板。在这种情况下，您想要的是**{AB5BA87B-77D5-4812-B02C-9B4FB87F4EF6}**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:10:09.617

所有 Visual Studio 设置都驻留在注册表中，键值如下：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\[Version] 
```

版本可以是“9.0”（VS 2008）、“10.0”（VS 2010）、“11.0”（VS 2012），但也可以是其他任何版本，因为 Visual Studio 可以使用自定义的“hive”键启动（参见devenv.exe 命令行的 /RootSuffix 参数）。

因此，对于正常操作，项目指南位于此处：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\[Version]\Projects 
```

Visual Studio 中的项目可以是标准项目（C#、VB.NET 等）或聚合项目（WPF“风格”优于 C# 或 VB.NET）。

通常，项目有一个“包”键，其中包含包含项目类型的 Visual Studio 包（二进制文件）的 guid。

包描述可以在这里找到：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\[Version]\Packages 
```

本机包（C#、VB.NET、C++、...）作为本机 COM 服务器实现，路径在`InprocServer32`密钥中定义。托管包将 MSCOREE.DLL 定义为`InprocServer32`键，还有一个`CodeBase`键是包不在 GAC 中，`Assembly`如果包在 GAC 中，则只有一个键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-09T08:00:38.793

我可能回答这个问题很晚了，但希望能帮助任何想知道这个问题的人。您想使用几个程序集来解析 C# 中的解决方案和项目文件，它们是：

```
Microsoft.Build.Evaluation 
```

和

```
Microsoft.Build.Construction 
```

在后面的程序集中有一个名为`SolutionFile`. [文档](https://msdn.microsoft.com/en-us/library/microsoft.build.construction.solutionfile.aspx)。在文档`SolutionFile`中包含属性`ProjectsByGuid`，如果您已经拥有 GUID，您可以在其上执行 linq 查询。执行此操作的代码如下所示：

```
var guid = "{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}"
var pathToSolutionFile = "C:\users\user\source\repos\solution\solution.sln"
var sln = SolutionFile.Parse(pathToSolutionFile);
var projectName = sln.ProjectsByGuid.Where(x => x.key==guid)
                     .FirstOrDefault().Value?.projectname; 
```

我希望这对您或其他任何人都有帮助。

# ios - 发送 NSNotification 时，CustomCell 中的 UIProgressView 从不显示

> ID：12353984
> 
> 赞同：2
> 
> 时间：2012-09-10T14:39:40.027
> 
> 标签：ios, multithreading, uitableview, nsnotifications, uiprogressview

我有杂志应用程序。其中`UITableView`包含自定义单元格。每个单元格中都有按钮、图标、标题和隐藏`UIProgressView`。当有人点击按钮时，页面（图像）开始下载。下载某些页面时，我想显示隐藏`UIProgressView`或更新。这就是问题所在。我正在使用`NSNotification`和`performSelectorOnMainThread`更新`UIProgressView`. 但是`UIProgressView`没有显示。我不知道错误在哪里......谢谢回复！

有一些代码......创建`UIProgressView`：

```
self.progressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
[self.progressView setFrame:CGRectMake(250, 200, 92, 28)];
[self.progressView setProgress:0.0];
[self.progressView setHidden:YES];
[self.cellView addSubview:self.progressView]; 
```

发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:kDownloadedIcon object:nil userInfo:dict]; 
```

接受通知：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iconDownloaded:) name:kDownloadedIcon object:nil]; 
```

向主线程重新发送通知：

```
- (void)iconDownloaded:(NSNotification *)notification {
[self performSelectorOnMainThread:@selector(updateProgressBar:) withObject:notification waitUntilDone:YES];} 
```

更新或显示`UIProgressView`：

```
- (void)updateProgressBar:(NSNotification *)notification {
NSDictionary *dict = [notification userInfo];

NSLog(@"%@ %@ %@", [dict objectForKey:@"name"], self.identifier, self.progressView);

if ([[dict objectForKey:@"name"] isEqualToString:self.identifier]) {
    if (self.spinner) [spinner stopAnimating];
    self.spinner = nil;
    [self.spinner removeFromSuperview];

    [self.progressView setHidden:NO];
    self.progress++;
    NSInteger count = [[dict objectForKey:@"pages"] intValue];
    [self.progressView setProgress:self.progress/count];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:49:38.337

欢呼！感谢蒂姆的想法！您的“简单项目”帮助我解决了它。问题是，我开始循环。在这个循环中，我发布通知。但是当 for 开始时，它会阻塞主线程并且 UI 没有被重绘。所以我将 for 循环的调用发送到后台，一切正常。再次感谢蒂姆

# java - LOG4J：一个记录器的一个附加程序

> ID：12353985
> 
> 赞同：1
> 
> 时间：2012-09-10T14:39:45.990
> 
> 标签：java, log4j

是否可以为一个记录器设置附加程序？我在示例`log4j.properties`文件中找到了一行：

```
log4j.logger.org.apache.activemq=INFO, stdout 
```

但我很好奇它是否可以为我定义的记录器完成。这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:42:40.677

创建一个仅在您的包中使用的新附加程序。

```
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.logger.mycom.mypackage=INFO, A1 
```

或者

```
log4j.logger.mycom.mypackage.MyClass=INFO, A1 
```

甚至是班级中的一个记录器。

```
log4j.logger.mycom.mypackage.MyClass.LOG1=INFO, A1

Log LOG = LogFactory.getLog(getClass().getName()); // doesn't go to A1
Log LOG1 = LogFactory.getLog(getClass().getName()+".LOG1"); // goes to A1 
```

# android - Android 3.2 摩托罗拉 Xoom 方向更改

> ID：12353986
> 
> 赞同：0
> 
> 时间：2012-09-10T14:39:48.800
> 
> 标签：android, screen-orientation, motorola, orientation-changes, xoom

我想根据设备有 2 种不同的方向模式 - 如果设备屏幕是 Extra Large ，方向应该是**LANDSCAPE**，如果设备屏幕更小，方向应该是**PORTRAIT**。

我做了以下检查：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Set orientation for tablets and phones
    if (isXLarge()) {     
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } else {    
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }

    setContentView(R.layout.activity_main); 
} 
```

活动的清单条目是：

```
<activity 
    android:configChanges="keyboardHidden" 
    android:launchMode="singleTop" 
    android:theme="@android:style/Theme.NoTitleBar" 
    android:name=".MyActivity"/> 
```

它在手机上运行良好，但在**装有 Android 3.2 的摩托罗拉 Xoom 平板电脑**上无法正常运行。

如果我们假设平板电脑处于纵向模式，则会发生以下一系列动作：

1.  Activity 以纵向模式创建和显示 - 这会在视觉上显示半秒
2.  Activity 在横向模式下被销毁并重新创建。

问题在于，平板电脑当前物理持有的方向总是存在中间转换，然后以所需的方向重新创建活动。

感谢您提供有关该问题的任何信息或建议，如果您需要更多详细信息，请告诉我。

*isXLarge() 方法正确返回显示的类型*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:58:56.693

如果您自己处理方向更改，那么更好的方法是`android:configChanges="orientation"`在活动的清单中声明并覆盖该`onConfigurationChanged()`方法。在您的情况下，您在`onCreate()`方法中设置方向，但如果用户物理更改方向，系统将更改方向。

我建议您覆盖`onConfigurationChanged()`并实现您的代码以提供正确的方向。

# sencha-touch - Sencha Touch 2- 解析存储包含数组的 JSON 文件

> ID：12353987
> 
> 赞同：1
> 
> 时间：2012-09-10T14:39:53.020
> 
> 标签：sencha-touch, jsonp, sencha-touch-2

我有以下 JSON 文件，我想将其解析到我的 Sencha Touch 应用程序中。我无法弄清楚要使用什么类型的“存储”（Store、JsonStore、ArrayStore 等）以及“字段”设置是什么样的。数组中的每个“数据点”都应存储为一个 xValue 和一个 yValue。我不明白如何在没有单独标签的情况下阅读这些要点

```
{
  "status_code": 200,
  "status_text": "Success",
  "data": [
    "Ajwan",
    "Alasande Gram",
    "All Flower",
    ...
    "Wood",
    "Wool",
    "Yam",
    "Yam (Ratalu)"
  ],
  "count": 357
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:03:00.820

正如我在另一个问题上已经回答的有点早，您必须将 JsonStore 与您的自定义阅读器一起使用。

在您的 Reader 版本中，您必须覆盖 readRecords: function(data) {} 方法...

干杯，奥列格

# css - CSS: LINK:HOVER 背景图像似乎可以工作，但一旦悬停就不会出现

> ID：12353988
> 
> 赞同：0
> 
> 时间：2012-09-10T14:39:57.003
> 
> 标签：css, hyperlink, hover, background-image

例子：

```
.twitter:LINK{
     width: 15px;
     height:15px;
     display:block;
     background-image: url('../_img/social_butt/twitter.jpg');
}

.twitter:HOVER{
     width: 15px;
     height:15px;
     display:block;
     background-image: url('../_img/social_butt/twitter_hover.jpg');
} 
```

如您所见，代码相同，路径也相同。这两张图片完全在同一个文件夹中，我仔细检查了名称。这显示为`<a>`元素内的背景图像。

问题是，一旦您将链接悬停，状态 LINK 就会消失（图片 twitter.jpg），而不是出现在 HOVER 之后（图片 twitter_hover.jpg），您什么都看不到。因此，当您取出鼠标时，LINK 会再次出现。目的是在悬停后加载不同的悬停图像。

为什么它不起作用？

新编辑/////////////////////////

其余的评论似乎表明代码是正确的。我也觉得是对的。我跨越了不同的图像，我发现我想要悬停的图像只有问题。我尝试了不同的格式等......仍然是一样的。我什至打开了 LINK 图像并用 Photoshop 更改了颜色并再次保存为 jpg。也不工作...

我附上两张图片，看看您是否知道可能的解决方案...![在此处输入图像描述](../Images/e4c40acd50f3edd05e8d28ff2294f5ad.png)![在此处输入图像描述](../Images/14034473a1a7a32fe65e27f16dc4c6b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:54:37.740

我想它必须是小写的，你需要尊重正确的顺序：

爱与恨

链接、访问、悬停、活动

```
a.twitter:link, a.twitter:visited {
     width: 15px;
     height:15px;
     display:block;
     background-image: url('../_img/social_butt/twitter.jpg');
}
a.twitter:hover, a.twitter:active{
     width: 15px;
     height:15px;
     display:block;
     background-image: url('../_img/social_butt/twitter_hover.jpg');
} 
```

# java - 将 java.util.logging 与 HyperSQL 数据库引擎的 JDBC 驱动程序一起使用

> ID：12353990
> 
> 赞同：5
> 
> 时间：2012-09-10T14:39:57.673
> 
> 标签：java, jdbc, hsqldb, java.util.logging

在搜索了关于java.util.logging 包的在[Java 应用程序中实现日志记录](https://stackoverflow.com/questions/12343600/implementing-logging-in-a-java-application)和[在 Swing 应用程序中使用 java.util.logging 包的](https://stackoverflow.com/questions/12344824/using-the-java-util-logging-package-in-a-swing-application)问题的答案后，我已经找到了问题并想在这里分享我的解决方案。我将其作为一个新问题发布（希望）对实际问题做出简明陈述（这在我之前的问题中并不完全清楚，因为我问的是错误的问题）以及（希望）给出明确的答案。

下面的代码说明了这个问题：

```
package jdbcloggingsscce;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.logging.FileHandler;
import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;

public class JDBCLoggingSSCCE {
    public static void main(String[] args) throws IOException, SQLException {
        JDBCLoggingSSCCE.initLogger();
        Logger logger = Logger.getLogger(JDBCLoggingSSCCE.class.getName());
        logger.log(Level.INFO, "Starting JDBCLoggingSSCCE");

        Connection conn = DriverManager.getConnection(DB_URL);
        logger.log(Level.INFO, "JDBC Connection created");
    }

    private static void initLogger() throws IOException {
        Handler handler = new FileHandler(JDBCLoggingSSCCE.LOG_FILE_NAME);
        handler.setFormatter(new SimpleFormatter());

        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.ALL);
        logger.addHandler(handler);
    }
    private static final String LOG_FILE_NAME = "jdbcloggingsscce.log";
    private static final String DB_URL = "jdbc:hsqldb:file:db/jdbcloggingsscce.db";
} 
```

此示例使用[HyperSQL 数据库引擎 (HSQLDB)](http://hsqldb.org/)的 JDBC 驱动程序。问题是记录了第一条日志消息（“Starting JDBCLoggingSSCCE”），但没有记录第二条消息（“JDBC Connection created”）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:39:57.673

解决方案是将名为“hsqldb.reconfig_logging”的系统属性设置为 false。设置此属性的一种方法是将以下代码行添加到`initLogger()`方法的末尾：

```
System.setProperty("hsqldb.reconfig_logging", "false"); 
```

我相信，只要在调用`DriverManager.getConnection(DB_URL)`. 设置此“hsqldb.reconfig_logging”属性会告诉 HSQLDB JDBC 驱动程序**不要**从 java.util.logging 包重新配置 Logger。结果是登录应用程序的其余部分按需要继续。当然，HSQLDB 本身也包括日志消息，但处理这些是另一个问答。

# php - 将循环输出保存到数据库

> ID：12353994
> 
> 赞同：0
> 
> 时间：2012-09-10T14:40:16.207
> 
> 标签：php, mysql

1.  在下面的代码中回显 $AA 它可以工作！回显正确显示 $rec['totsb'] 减 1，从数据库中的现有值中减去 1。然后我需要将减一后生成的新数字保存回数据库，这是我的代码肯定是错误的。我尝试了许多替代方法来纠正它，但无法通过。有人能告诉我如何将新号码保存回数据库吗？

信息：我的数据库如下所示。正如您所见，数字填充在下拉列表中以供用户选择。（数据库仅从 302 开始，以 309 结尾，下拉列表中全部为 302,303,304...309）因此，如果用户选择 306，例如应自动识别适合的起始编号和结束编号 306 并将新编号适当地保存在 totsb 中。

```
+--------+---------+------+
|sbstart |sbend    | totsb|
+--------+---------+------+
|302     |309      | 8    |
|200     |208      | 9    |
|405     |409      | 5    |
+--------+---------+------+ 
```

代码：

```
<?php
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT * FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);

while ($rec = mysql_fetch_array($run))
{
for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
    {
    $opt=$_POST['options'];
    if($i = $opt)
     {
        if($rec['totsb'] <= "0")
        {
        echo "You have already entred this cheque number."; 
        return false;
        } else {
        echo "You can proceed with this entry";
        $AA = $rec['totsb']-1;
        $BB=$rec['sbstart'];
        echo $AA;
        $con=mysql_connect('localhost','root') or die ("Server connection      failure!");
        $db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the     database");
        $SQL="UPDATE newchk SET totsb='$AA'";   
        return false;
        }
     }
     else 
     { echo "Error: Cant find choosen in the databse"; 
      return false;
     }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:55:31.237

尝试更改此行

```
$SQL="UPDATE newchk SET totsb='$AA'"; 
```

到

```
$SQL="UPDATE newchk SET totsb=".$AA; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:48:48.817

除非您缺少代码...

1）您没有像第一个那样对 SQL 语句做任何事情（需要实际运行它）。
2）如果金额是您在表格 chema 中指示的数字，则不需要引号
3）还建议使用您的 sbstart 作为更新记录的限定符，否则您将更新所有内容。

```
$SQL2="UPDATE newchk SET totsb=$AA where sbstart=$BB"; 
$run2=mysql_query($SQL2,$con) or die ("SQL Error"); 
```

如果这没有帮助，请发送有关您的数据库架构的更多信息

### 添加代码

```
$matches=0;
$opt=$_POST['options'];
while ($rec = mysql_fetch_array($run)){
    if($opt>=$rec['sbstart'] && $opt<=$rec['sbend']){
        # we have a match, run your code

        if($rec['totsb'] <= "0") 
        { 
        echo "You have already entred this cheque number.";  
        return false; 
        } else { 
        echo "You can proceed with this entry"; 
        $AA = $rec['totsb']-1; 
        $BB=$rec['sbstart']; 
        echo $AA; 
        $con=mysql_connect('localhost','root') or die ("Server connection      failure!"); 
        $db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the     database"); 
# fixed lines
        $SQL2="UPDATE newchk SET totsb=$AA where sbstart=$BB"; 
        $run2=mysql_query($SQL2,$con) or die ("SQL Error"); 
# end fixed lines
        return false; 
        } 
        # end your code
        $matches++
    }else{
        # no match
    }
} # while loop through records

if($matches==0){
    echo "Error: Cant find choosen in the databse";  
    return false; 
}else{
    return true;
} 
```

你可以多清理一下你的代码，但这应该会让你走上正确的轨道

# python - Python lxml - 获取标签文本的索引

> ID：12353995
> 
> 赞同：5
> 
> 时间：2012-09-10T14:40:17.007
> 
> 标签：python, xml, lxml

我有一个格式类似于 docx 的 xml 文件，即：

```
<w:r>
  <w:rPr>
    <w:sz w:val="36"/>
    <w:szCs w:val="36"/>
  </w:rPr>
  <w:t>BIG_TEXT</w:t>
</w:r> 
```

我需要获取`BIG_TEXT`源 xml 中的索引，例如：

```
from lxml import etree
text = open('/devel/tmp/doc2/word/document.xml', 'r').read()

root = etree.XML(text)

start = 0
for e in root.iter("*"):
    if e.text:
        offset = text.index(e.text, start)
        l = len(e.text)
        print 'Text "%s" at offset %s and len=%s' % (e.text, offset, l)
        start = offset + l 
```

我可以从当前`index`+的位置开始新的搜索`len(text)`，但是还有其他方法吗？例如，元素可能只有一个字符`w`。它将找到标签文本的索引`w`，但不是标签文本的索引`w`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T16:26:56.680

我正在寻找一个类似的解决方案（在一个大的 xml 文件中索引节点以便快速查找）。

*   AFAIK，`lxml`只提供源代码，这是不够的。参照[API](http://lxml.de/api/lxml.etree._Element-class.html)：`Original line number as found by the parser or None if unknown.`
*   但`expat`提供文件中的确切偏移量：[CurrentByteIndex](http://docs.python.org/library/pyexpat.html#xml.parsers.expat.xmlparser.CurrentByteIndex)。
    *   从`start_element`处理程序中获取，它返回标签的开始（即`'<'`）偏移量。
    *   从`char_data`处理程序中获取，它返回数据的开始（即`'B'`在您的示例中）偏移量。

例子 ：

```
import xml.parsers.expat

# handler functions for parser events, and housekeeping.
class handler :
   def __init__(self, current_parser) :
      #tag of interest
      self.TARGET_TAG = "w:t"

      #set up parser
      self.parser = current_parser
      self.parser.StartElementHandler  = self.start_element
      self.parser.EndElementHandler    = self.end_element
      self.parser.CharacterDataHandler = self.char_data

      self.target_tag_met = False
      self.index = None

   def start_element(self, name, attrs):
      self.target_tag_met = (name == self.TARGET_TAG)

   def end_element(self, name) :
      self.target_tag_met = False

   def char_data(self, data):
      if self.target_tag_met :
         self.index = self.parser.CurrentByteIndex

#open file in binary mode for robuster byte offsets.
xmlFile = open("so_test.xml", 'rb')

p = xml.parsers.expat.ParserCreate()
h = handler(p)

p.ParseFile(xmlFile)
print (h.index) 
```

# python - 需要一个用于 python 的实际 SSH 客户端库，而不是 spawner

> ID：12353996
> 
> 赞同：0
> 
> 时间：2012-09-10T14:40:18.543
> 
> 标签：python, ssh

我需要一个实际建立 ssh 连接的帮助程序库。没有一个会产生另一个应用程序来这样做。（例如：预期）。它还需要支持自动化 CLI 界面。然而，它需要与 pexpect 类似，因为它需要等待输入（即：其中包含特定文本的提示）。最终它也需要跨平台（这就是为什么 pexpect 是一个糟糕的选择）。还需要特别注意：我**没有**登录 linux shell。这是一个自定义 CLI 应用程序。它还必须支持 SSH，而不是 SSH2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:44:15.053

[**paramiko**](https://github.com/paramiko/paramiko)或其[fork **ssh**](https://github.com/bitprophet/ssh)是原生 Python 中的 ssh 客户端实现。

但是，两者都只支持较新的 ssh v2 协议。ssh v1 存在根本缺陷。它[基本上是一个模糊的 telnet](https://stackoverflow.com/questions/936783/why-no-pure-python-ssh1-version-1-client-implementations)，已经被弃用了十年。因此，它不再被广泛使用。

如果远程支持，请使用[telnetlib](http://docs.python.org/library/telnetlib.html)建立 telnet 连接。

# asp.net-mvc - 如何在不同的按钮点击上调用不同的控制器动作？

> ID：12353998
> 
> 赞同：0
> 
> 时间：2012-09-10T14:40:25.087
> 
> 标签：asp.net-mvc, controller

我有多个按钮来执行不同的收据报告操作。打印按钮会提示用户下载选项。视图代码如下：

```
@using (Html.BeginForm())
{ 

<fieldset style="width:525px; padding-top:20px; margin:0 auto;">
    <legend>Select Criteria</legend>

        <center>
            @Html.Partial("_MagazineType")<br /><br />
        </center>

            @Html.Partial("_RadioBtnCriteria")

            @Html.Partial("_ReportExportFormat")<br />  

        <center>                 
            <button type= "submit" id = "status" onclick="ReceiptsStatus();" >Receipts Status Details</button>
            <button type= "submit" id = "duplicate" onclick="NoDuplicate();" >No Duplicate</button>
            <button type= "submit" id = "pr_rcpt" onclick="PrintReceipts()">Print Receipts</button>                         
        </center>          

</fieldset><br />

} 
```

现在，当单击 Receipt status detail 按钮时，它再次提示下载选项，因为使用了 @using (Html.BeginForm()) 选项。但我只想让控制器动作让它运行。此外，根据输入的参数，它必须在要调用的不同操作中进行选择。那么如何仅与参数一起运行该按钮的特定方法。说日期范围必须从日期开始，并且只能从日期开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:34:43.287

在我看来，在同一个视图上有多个按钮调用不同操作方法的最简单方法是用每个按钮包围`@using (HTML.BeginForm(“actionName”, “controllerName”))`，然后你不需要你只需要的 onClick 事件，每个按钮的每个回发都会将你定向到指定的 actionName控制器名称。

这个例子修改了 ASP.Net 网站上的电影教程：

```
<div style="width:100px; float:left" >
    @using (Html.BeginForm())
    {
    <p>
    <input type="submit" value="Delete" /> 
    @Html.ActionLink("Back to List", "Index")
    </p>
    }
    </div>

    <div style="width:100px; float:left">       
    @using (Html.BeginForm("Index","Movies"))
    {
    <p>
    <input type="submit" value="Cancel" /> 
    </p>
    }
</div> 
```

希望有帮助