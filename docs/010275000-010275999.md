# StackOverflow 问答 10275000-10275999

# c - pthread 和选择

> ID：10275000
> 
> 赞同：0
> 
> 时间：2012-04-23T04:55:25.903
> 
> 标签：c

那里。

我正在尝试对服务器进行编程。

服务器从客户端接收一些信息

并将信息发送到另一台服务器并接收响应。

我需要在这种情况下使用 select() 吗？

或仅 Pthread 就足以做到这一点。

我的服务器有许多客户端同时连接

请好心回答我。

如果有，请告诉我可以参考的源代码或网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:23:42.743

实现处理多个客户端的服务器的一种方法是为每个客户端连接创建一个 pthread，以便您可以在专用线程中读取/写入每个连接。听起来您要问的是“如果每个客户端连接都有一个 pthread，我还需要使用`select`吗？”

在一个非常简单的服务器中，您可能可以省去`select`：连接线程看起来像：

```
do {
      read(conn, cmd);
      response = process(cmd);
      write(conn, response);
} while (cmd != DONE) 
```

但是，即使使用专用的客户端线程，您仍可能会发现在调用客户端连接之前仍想使用它`select`来检查可用输入。`read`例如，如果您需要能够在您的连接上实现空闲超时，您不会只想做一个阻塞`read`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:02:33.663

我不确定使用 pthread 在客户端和服务器之间进行通信是什么意思 - 我对 pthread 的体验是与通信无关的 POSIX 线程库....

如何使用 select 的文档和示例广泛可用：

[http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/lr2/select.htm](http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/lr2/select.htm) http://www.lowtek.com/sockets/select.html

是您可以通过使用 google 搜索“select c”找到的示例....

# dns - DNS IP 检查 Cpanel 提醒/通知

> ID：10275002
> 
> 赞同：0
> 
> 时间：2012-04-23T04:55:45.180
> 
> 标签：dns, cpanel, whm

每天我都会收到来自 cpanel 的以下电子邮件，我不知道这意味着什么，在当前配置中，我有一个 ns1.nameserver 的 ip 和一个 ns2.nameserver 的 ip，但顶级域名服务器映射到一个 ip 地址。但是没有办法在那里添加另一个 A 记录（我不知道如何）或者我想禁用这个通知，因为在网络中仍然一切正常......

```
The hostname (nameserver.com) resolves to 67.xxx. It should
resolve to 67.xxxx. Please be sure that the contents of
/etc/hosts are configured correctly, and also that there is a
correct 'A' entry for the domain in the zone file.

Some or all of these problems can be caused by /etc/resolv.conf
being setup incorrectly. Please check that file if you believe
everything else is correct.

You may be able to automatically correct this problem by using the
'Add an A entry for your hostname' option under 'Dns Functions' in
your Web Host Manager. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:41:38.783

解决问题的两种方法。

1.  为 IP 和完全限定域名添加正确的 A 记录

2.  根据 cPanel，它不应该在 NAT 后面运行，尽管许多人发现这确实有效。因此，您可以通过进入联系人管理器并禁用“IP 地址 dns 检查”选项来“修复”或停止此消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:28:22.367

您需要确保已为您的主机名正确添加 A 记录并将其分配给您的服务器的 IP 地址。例如，如果您的服务器主机名是 xyz.abcd.com，那么您需要在 abcd.com DNS 区域中添加 xyz A 记录并将其指向您的服务器 IP 地址。

# outlook - Outlook 插件自定义弹出表单

> ID：10275007
> 
> 赞同：2
> 
> 时间：2012-04-23T04:56:54.567
> 
> 标签：outlook, add-in, ribbon

我正在为 Outlook 创建一个插件。我坚持我的要求......如何打开一个弹出窗口以在单击功能区中的自定义按钮时输入一些输入值。

即如何在 Outlook UI 中打开表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:12:49.563

简单的问题是..

我可以打开vb表格..

NativeAddIn::ApplicationConfiguration ^appConfigurationform = gcnew NativeAddIn::ApplicationConfiguration(); appConfigurationform->ShowDialog();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T06:22:12.327

在 Outlook 中创建功能区 单击文件 - 转到选项 - 自定义功能区 - 创建一个新选项卡 - 通过单击它来重命名它接下来拖动要在特定功能区上执行的操作并导入设置单击确定关闭 outllok 并重新打开又来了

这适用于 Outlook 应用程序 2019。

# objective-c - 在 Cocoa 中写入 XML

> ID：10275010
> 
> 赞同：0
> 
> 时间：2012-04-23T04:57:11.063
> 
> 标签：objective-c, xml, cocoa, nsxmlelement

是否可以在不使用外部库的情况下写入我已读取的 XML 文件？我已经阅读过关于使用 KissXML 进行写作的文章，但我想不带任何额外内容进行写作。

因此，如果我在内存中有一个 NSXMLElement 或 NSXMLDocument，我将如何更改其中一个节点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:19:28.297

尝试阅读苹果文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSXML_Concepts/NSXML.html#//apple_ref/doc/uid/TP40001269](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSXML_Concepts/NSXML.html#//apple_ref/doc/uid/TP40001269)

1.  您需要获取节点以进行更改（使用遍历树或通过 XPath 查询节点）。
2.  根据需要更改节点。

在为文档调用 XMLStringWithOptions 后，您可以将 xml 数据作为字符串写入文件。

# playframework-2.0 - Play 2.0 Scala Project Eclipse 错误地将 Java 文件添加到项目而不是 Scala

> ID：10275011
> 
> 赞同：0
> 
> 时间：2012-04-23T04:57:18.937
> 
> 标签：playframework-2.0

我不确定 Eclipse 是否正在这样做。任何想法为什么会发生这种情况？尝试添加控制器时也会发生这种情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:36:49.443

您是否为 Eclipse 安装了 Scala 插件？如果没有，您可以从以下位置执行此操作：http: [//scala-ide.org/download/current.html](http://scala-ide.org/download/current.html)

之后，您应该**在 eclipse 中打开 Scala 透视图**

添加新控制器时，实际上是新类，您只需从上下文菜单中选择 New Scala 类或从菜单中选择新类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:22:46.610

据我所知，play 2.0 没有 eclipse 插件。因此，您可以只添加类（scala 或 java，这取决于您选择的内容）。

您是说您正在尝试添加一个控制器：也许您正在使用 eclipse 的 play 1.x 插件来创建控制器，但在这种情况下，插件创建一个 java 文件是正常的，因为它只是为 1.x java 设计的玩的版本

# ios - iOS JSON 解析为 NSDictionary，然后使用 SBJson 解析为 NSArray

> ID：10275018
> 
> 赞同：2
> 
> 时间：2012-04-23T04:57:48.760
> 
> 标签：ios, json, parsing, sbjson

它应该很简单，但我无法让它工作。

Json 响应是 ([{"id":"1", "x":"1", "y":"2"},{"id":2, "x":"2", "y": "4"}])

```
NSString *response = [request responseString];
//response is ([{"id":"1", "x":"1", "y":"2"},{"id":2, "x":"2", "y":"4"}])

SBJSON *parser = [[[SBJSON alloc] init] autorelease];

NSDictionary *jsonObject = [parser objectWithString:response error:NULL];
// jsonObject doesn't have any value here..Am I doing something wrong?

NSMutableArray Conversion = [jsonObject valueForKey:NULL];
//Even if I get the value of jsonObject. I don't know what to put for valueForKey here 
```

转换应该有两个 NSObjects ..他们每个人都应该有

id:1 x:1 y:2

和

id:2 x:2 y:4

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T05:08:36.183

您的 JSON 解析器将从您的响应字符串生成 NSArray，而不是 NSDictionary。请注意，包括 SBJSON 在内的 JSON 解析器将返回数组对象或字典对象，具体取决于正在解析的 json 的内容。

```
NSArray *jsonObject = [parser objectWithString:response error:nil]; 
```

然后，您可以访问数组中的各个项目（数组元素的类型为 NSDictionary）并用于`valueForKey:`获取每个项目的属性。

```
NSDictionary *firstItem = [jsonObject objectAtIndex:0];
NSString *theID = [firstItem objectForKey:@"id"]; 
```

# html - 如何根据 URL 参数在选择字段中自动选择选项？

> ID：10275020
> 
> 赞同：0
> 
> 时间：2012-04-23T04:58:07.207
> 
> 标签：html, html-select

在下面的表格中，如何根据我的 URL 参数的值自动选择各种选项？

例如：`http://example.com/?type=%28shirt%2C+tshirt%2C+t-shirt%29&length=25&width=17&expand=yes`

```
 <form name="shirty" method="get">
            <select name="type" />
            <option value="(shirt, tshirt, t-shirt)">T-Shirt</option>
            <option value="(hoodie, sweatshirt)">Sweatshirt</option>
           </select>

          <select name="length" />
            <option value="select">Select a length</option>
            <option value="14">14 Inches</option>
            <option value="15">15 Inches</option>
            <option value="16">16 Inches</option>
            <option value="17">17 Inches</option>
            <option value="18">18 Inches</option>
            <option value="19">19 Inches</option>
            <option value="20">20 Inches</option>

           </select>

            <select name="width" />
            <option value="select">Select a Width</option>
            <option value="14">14 Inches</option>                
            <option value="15">15 Inches</option>
            <option value="16">16 Inches</option>
            <option value="17">17 Inches</option>
            <option value="18">18 Inches</option>
            <option value="19">19 Inches</option>
            <option value="20">20 Inches</option>
           </select>

          <input type="checkbox" name="expand" value="yes"" checked><small>include ± 1 inch?</small>

          <input type="submit" name="Submit" value="Search" />

        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:27:23.467

知道了。

```
 <form name="shirty" method="get">
            <select name="type" />
             <?php //create the select options
                $options = "
                    <option value=\"(shirt, tshirt, t-shirt)\">T-Shirt</option>
                    <option value=\"(hoodie, sweatshirt)\">Sweatshirt</option>";
                    $saved = $type;
                $saved = (!empty($saved))? $saved: false;
                if ($saved)
                    //if there is a saved data set the option to selected
                    $options = str_replace('value="'.$saved.'"','value="'.$saved.'" selected="selected"',$options);
                //echo out the options
                echo $options; ?>
                ?>
           </select>

          <select name="length" />
            <?php //create the select options
                $options = "
                    <option value=\"14\">14 Inches</option>
                    <option value=\"15\">15 Inches</option>
                    <option value=\"16\">16 Inches</option>
                    <option value=\"17\">17 Inches</option>
                    <option value=\"18\">18 Inches</option>
                    <option value=\"19\">19 Inches</option>
                    <option value=\"20\">20 Inches</option>";

                    $saved = $length;
                $saved = (!empty($saved))? $saved: false;
                if ($saved)
                    //if there is a saved data set the option to selected
                    $options = str_replace('value="'.$saved.'"','value="'.$saved.'" selected="selected"',$options);
                //echo out the options
                echo $options; ?>
                ?>
           </select>

            <select name="width" />
            <?php //create the select options
                $options = "
                    <option value=\"14\">14 Inches</option>
                    <option value=\"15\">15 Inches</option>
                    <option value=\"16\">16 Inches</option>
                    <option value=\"17\">17 Inches</option>
                    <option value=\"18\">18 Inches</option>
                    <option value=\"19\">19 Inches</option>
                    <option value=\"20\">20 Inches</option>";
                    $saved = $width;
                $saved = (!empty($saved))? $saved: false;
                if ($saved)
                    //if there is a saved data set the option to selected
                    $options = str_replace('value="'.$saved.'"','value="'.$saved.'" selected="selected"',$options);
                //echo out the options
                echo $options; ?>
                ?>
           </select>

          <input type="checkbox" name="expand" value="yes"" checked><small>include ± 1 inch?</small>

          <input type="submit" name="Submit" value="Search" />

          </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T22:12:59.897

```
<?php   
  //This example creates a select element and marks selected option using selected_id in URL 

        $attributesAssocArray = array(
            "id"=>"someId","class"=>"someClass"
        );

        $optionsArray = array(
            0=>"choose...",1=>"one",2=>"two",3=>"three"
        );

        $selectedId = (!empty($_GET['selected_id'])&&(is_numeric($_GET['selected_id'])))?  intval($_GET['selected_id']):-1;

        echo generate_select($attributesAssocArray,$optionsArray,$selectedId);

        function generate_select($attributesAssocArray=array(),$optionsArray=array(),$selected=-1)
        {
            $attributes = generate_attributes($attributesAssocArray);
            $html = '<select '.$attributes.'>';
            foreach ($optionsArray as  $value => $name)
            {
                $isSelected = $value==$selected ? " selected" : "";
                $html.= '<option value="'.$value.'"'.$isSelected.'>'.$name.'</option>';
            }
            $html.='</select>';
            return $html;
        }

        function generate_attributes($attributesAssocArray)
        {
            $attributes='';
            foreach ($attributesAssocArray as $name => $value)
            {
                $attributes.= $name.'="'.$value.'" ';
            }
            return $attributes;
        }
?> 
```

# c# - 如何检测 DataGridView.RowValidating 事件何时来自用户交互与 BindingSource 列表更改？

> ID：10275021
> 
> 赞同：1
> 
> 时间：2012-04-23T04:58:26.307
> 
> 标签：c#, data-binding, datagridview, datagridviewcolumn

我终于找到了一个我整个周末都在努力解决的错误，但是我看不到真正解决它的方法 - 就是以一种干净的方式。

情况是我有一个绑定到业务对象列表的 DGV 控件。其中一列未绑定到 DataSource，我已经连接了 CellParsing 和 CellFormatting 事件来处理此单元格的数据的持久性。我基本上绕过了 .net 数据绑定并实现了我自己的糟糕版本。这不是故意的，它是真正的旧代码，具有复杂的解析和格式化要求，我错误地实现了基于未绑定列的解决方案。我现在知道处理这个问题的正确方法，并且已经修复了我的代码，但是我仍然想知道如何以另一种方式解决这个错误。

我处理 RowValidating 事件并对整个行进行最终验证，以确保一切正常。当然，如果出现问题，我会取消验证并且未提交该行。当用户通过 UI 交互编辑和添加行时，这一切都可以正常工作，但在设置 DataSource 时会产生问题。问题**似乎**是当 DGV 更新其内部列表并构建行时未调用 CellFormatting，或者至少在触发验证事件之前未调用它。这会导致 RowValidating 处理程序从 Unbound 列中提取一个空值（因为尚未调用 CellFormatting 并设置该值）。

我正在刷新我对 DGV 的了解，并认为处理 CellValueNeeded 事件可能是票，但设置 DataGridViewCellValueEventArgs.Value 并没有像我希望的那样触发 CellFormatting 事件。

我一直在考虑如何处理这种情况，我想出的唯一方法是检测何时从 UI 事件触发验证，而不是初始绑定或绑定列表更改。这不仅是一个 hacky 解决方案，而且看不到它是如何完成的。

我创建了一个完整的示例应用程序来说明问题。我真的很想知道你们中的一些人将如何解决这样的问题。这里很可能有主要的设计气味。

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;

public class Form1 : Form
{
    private List<DomainModel> _sampleData;
    public Form1()
    {
        InitializeComponent();

        _sampleData = new List<DomainModel>();
        _sampleData.Add(new DomainModel("Widget A"));
        _sampleData.Add(new DomainModel("Widget B"));
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Console.WriteLine("Setting DataSource");
        domainModelBindingSource.DataSource = _sampleData;
    }

    private void dataGridView1_CellFormatting(object sender,
        DataGridViewCellFormattingEventArgs e)
    {
        Console.WriteLine("CellFormatting fired for {0},{1}",
            e.RowIndex, e.ColumnIndex);

        if (e.ColumnIndex != 0 && !dataGridView1.Rows[e.RowIndex].IsNewRow)
        {
            var model = domainModelBindingSource[e.RowIndex] as DomainModel;
            e.Value = model.Name;
            e.FormattingApplied = true;
        }
    }

    private void dataGridView1_CellParsing(object sender, DataGridViewCellParsingEventArgs e)
    {
        if (e.ColumnIndex == 1)
        {
            e.Value = e.Value.ToString();
            e.ParsingApplied = true;
        }
    }

    private void dataGridView1_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
    {
        if (dataGridView1.Rows[e.RowIndex].IsNewRow)
            return;

        object value = dataGridView1[1, e.RowIndex].Value;
        if (value == null || String.IsNullOrEmpty(value.ToString()))
            e.Cancel = true;
    }

    #region Designer stuff

    private System.ComponentModel.IContainer components = null;
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
            components.Dispose();

        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    private void InitializeComponent()
    {
            this.components = new System.ComponentModel.Container();
            this.dataGridView1 = new System.Windows.Forms.DataGridView();
            this.nameDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.Column1 = new System.Windows.Forms.DataGridViewTextBoxColumn();
            this.domainModelBindingSource = new System.Windows.Forms.BindingSource(this.components);
            this.button1 = new System.Windows.Forms.Button();
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.domainModelBindingSource)).BeginInit();
            this.SuspendLayout();
            // 
            // dataGridView1
            // 
            this.dataGridView1.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
            | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.dataGridView1.AutoGenerateColumns = false;
            this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
            this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
            this.nameDataGridViewTextBoxColumn,
            this.Column1});
            this.dataGridView1.DataSource = this.domainModelBindingSource;
            this.dataGridView1.Location = new System.Drawing.Point(12, 41);
            this.dataGridView1.Name = "dataGridView1";
            this.dataGridView1.Size = new System.Drawing.Size(437, 161);
            this.dataGridView1.TabIndex = 0;
            this.dataGridView1.CellFormatting += new System.Windows.Forms.DataGridViewCellFormattingEventHandler(this.dataGridView1_CellFormatting);
            this.dataGridView1.CellParsing += new System.Windows.Forms.DataGridViewCellParsingEventHandler(this.dataGridView1_CellParsing);
            this.dataGridView1.RowValidating += new System.Windows.Forms.DataGridViewCellCancelEventHandler(this.dataGridView1_RowValidating);
            // 
            // nameDataGridViewTextBoxColumn
            // 
            this.nameDataGridViewTextBoxColumn.DataPropertyName = "Name";
            this.nameDataGridViewTextBoxColumn.HeaderText = "Name";
            this.nameDataGridViewTextBoxColumn.Name = "nameDataGridViewTextBoxColumn";
            // 
            // Column1
            // 
            this.Column1.HeaderText = "Data (unbound)";
            this.Column1.Name = "Column1";
            // 
            // domainModelBindingSource
            // 
            this.domainModelBindingSource.DataSource = typeof(DomainModel);
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(12, 12);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(168, 23);
            this.button1.TabIndex = 1;
            this.button1.Text = "Update Data Source";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(461, 214);
            this.Controls.Add(this.button1);
            this.Controls.Add(this.dataGridView1);
            this.Name = "Form1";
            this.Text = "Form1";
            ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.domainModelBindingSource)).EndInit();
            this.ResumeLayout(false);
    }

    #endregion

    private System.Windows.Forms.DataGridView dataGridView1;
    private System.Windows.Forms.BindingSource domainModelBindingSource;
    private System.Windows.Forms.Button button1;
    private System.Windows.Forms.DataGridViewTextBoxColumn nameDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn Column1;

    #endregion
}

internal sealed class DomainModel
{
    public DomainModel() { }

    public DomainModel(string name)
    {
        this.Name = name;
    }

    public string Name { get; set; }
}

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:23:35.823

I had mentioned that I already "fixed the problem" which wasn't completely accurate. I fixed it in the test application, effectively validating the solution I was planning on using, but hadn't actually implemented it. Once I tried to I realized why I did things the way I did originally: The data that is used in the unbound column is a read-only collection of objects and in order to set them I need to call a separate method on the object. Best practices and all...

Well, read only properties of course can't be edited in the DGV so I was dead in the water. This made me go BACK to my original design and while researching I stumbled on [this column/blog by Brian Noyes](http://www.informit.com/articles/article.aspx?p=446453&seqNum=5).

He mentions the event RowsAdded and that's all I needed! Here is the solution for my problem:

```
private void dataGridView1_RowsAdded(object sender, 
    DataGridViewRowsAddedEventArgs e)
{
    if (dataGridView1.Rows[e.RowIndex].IsNewRow)
    {
        return;
    }

    dataGridView1[1, e.RowIndex].Value = 
        (dataGridView1.Rows[e.RowIndex].DataBoundItem as DomainModel).Name;
} 
```

I like this solution because it's placing the data on the Cell the same way it would if it were bound, it then hands off formatting responsibility to CellFormatting and I can do my work. Likewise I can parse the data and construct the required objects to pass to my bound objects "SetListData" method.

All good!

# ruby-on-rails - Rails 关联验证：字段还是 _id 字段？

> ID：10275023
> 
> 赞同：2
> 
> 时间：2012-04-23T04:58:36.250
> 
> 标签：ruby-on-rails, activemodel

我在 Rails 开发中遇到的一个比较混乱的做法是在验证实际对象（例如：validates_presence_of :related_object）和验证该关联的 id 列（例如：validates_presence_of :related_object_id）之间处理关联字段的验证。

我想我可能应该开始对此更加一致，在我承诺任何事情之前，我想知道这两种方法是否有任何优势？我什么都想不出来，但是我以前就知道我会忽略一些东西。那么，这有什么不同吗？是否有一个约定：大多数开发人员应该遵守什么？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:23:13.727

当然，您必须检查`:object_id`. 如果您检查是否存在，`:object`则将从您的数据库中获取该对象，然后通过 simple 进行检查`blank?`。我猜你不会对额外的数据库命中感到满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:58:10.563

这个问题经常出现。

在大多数情况下，您需要验证**实际关联对象**的存在，而不仅仅是验证是否设置了 id（很可能是无效的）。

验证`association_id`还将阻止您创建具有新关联记录的对象并将两者保存在一起。

# java - 在最终方法中获取“子”对象的类？

> ID：10275025
> 
> 赞同：2
> 
> 时间：2012-04-23T04:58:41.300
> 
> 标签：java, inheritance

是否可以访问父**类中的子类？**

例如，我希望以下代码的输出为“红蓝”。

```
class Color {
    public final void printName() {
        System.out.println(__Something_Here!!!__.class.getSimpleName());
    }
}

class Red extends Color;

class Blue extends Color;

main() {
    Red red = new red();
    Blue blue = new blue();
    red.printName();
    blue.printName();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:01:28.983

写

```
class Color {
    public final void printName() {
        System.out.println(this.getClass().getSimpleName());
    }
} 
```

[通过getClass()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)方法，每个 Java 对象都可以访问所有的类信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:02:22.290

您可以使用`getClass()`为任何对象返回类对象。

```
public final void printName() {
    System.out.println(getClass().getSimpleName());
} 
```

有关详细信息，请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)`getClass()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:02:47.170

`printName()`如果您将其设为私有，则不会。如果它受到保护，那么您可以调用

```
Red red = new Red();
Blue blue = new Blue();
red.printName();
blue.printName(); 
```

然后打电话

```
System.out.println(this.class.getSimpleName()); 
```

实际上，私有禁止`Red`和`Blue`继承该方法。

# javascript - 获取Javascript在datalist中单击的项目的值

> ID：10275028
> 
> 赞同：0
> 
> 时间：2012-04-23T04:59:18.120
> 
> 标签：javascript, asp.net

设计时，我有一个内部带有标签的 Datalist。加载时它将有 10 个标签（列表中的数据源有 10 个值类型 int ）。我想获得我点击的任何标签的价值。我想我必须解决 2 个问题： 1\. 找到被点击的控件（datalist 中的标签）。2\. 获得它的价值。

```
protected void Page_Load(object sender, EventArgs e)
    {
        List<int> list = new List<int>();
        for (int i = 0; i < 10; i++)
        {
            list.Add(i);

        }
        int a=1;

        DataList1.DataSource = list;
        DataList1.DataBind();
        foreach (DataListItem item in DataList1.Items)
        {
            ((Label)item.FindControl("Label1")).Text = a.ToString();
            if ((Convert.ToInt32(((Label)item.FindControl("Label1")).Text)) % 2 != 0)
            {
                ((Label)item.FindControl("Label1")).BackColor = System.Drawing.Color.Gray;
            }
            ((Label)item.FindControl("Label1")).Attributes.Add("onclick", "run();");
            a++;
        } 
```

这是我的 run() 函数

```
function run() {

            $("#Panel1").scrollTop(100*gt1);

        } 
```

在这里，我希望 gt1 获取点击标签的值。

感谢您的帮助（关于我的英语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:52:28.957

我找到了如何解决我的问题：
首先添加：

> 字符串 gt = ((标签)item1.FindControl("lblstt")).Text;

在那之后：

> ((标签)item2.FindControl("lblCauHoi")).Attributes.Add("onclick", "run("+gt+");");

希望它有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:04:14.223

试试这个方法...

我们将传递标签的当前对象，同时使用关键字 this 绑定 javascript 事件。在服务器端

```
((Label)item.FindControl("Label1")).Attributes.Add("onclick", "run(this);"); 
```

在客户端，我们必须更改定义以接收从服务器端传递的参数。在我们的例子中，参数名称是 lbl。

```
function run(lbl)
{
alert(lbl.innerText);
} 
```

这是一篇不错的文章，可以让您很好地理解[这里的网格视图](http://www.codeproject.com/Articles/18136/Edit-Individual-GridView-Cells-in-ASP-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:10:57.740

您可以使用 css 类更优雅地为 datalist 中的任何项目附加点击事件，而不是为每个项目定义 onclick 事件。

例如标签具有以下css属性=“itm”；

```
$(document).on('click', '.itm', function (e) {
   run(this);
}); 
```

# c# - MODI 文档创建路径

> ID：10275031
> 
> 赞同：1
> 
> 时间：2012-04-23T04:59:28.820
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

我目前正在使用 MODI dll 在 OCR 阅读器中工作，我的代码就像

```
 MODI.Document md = new MODI.Document();

    //image path 
    string fileToOCR="C:\\temp\\1in.jpg";

    md.Create(fileToOCR);
    md.OCR(MODI.MiLANGUAGES.miLANG_ENGLISH, true, true);
    MODI.Image img = (MODI.Image)md.Images[0];
    MODI.Layout layout = img.Layout;
    layout = img.Layout;
    string result = layout.Text;
    md.Close(false); 
```

我想用

```
 //image path 
    string fileToOCR="C:\\temp\\1in.jpg"; 
```

到

```
 //image path 
    string fileToOCR="http://example.com/image.png"; 
```

这怎么可能，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:22:13.327

MODI 需要一个本地文件来处理。您可以使用 WebClient.DownloadData（请参阅[http://msdn.microsoft.com/en-us/library/xz398a3f.aspx](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)）获取数据，然后将其保存在本地。

# html - 引导网格系统是流动的但不是静态的

> ID：10275032
> 
> 赞同：0
> 
> 时间：2012-04-23T04:59:35.940
> 
> 标签：html, css, twitter-bootstrap

我将我的网格系统更改为引导程序，我发现它不是静态的。`span`当's 是特定尺寸时，它似乎会适应屏幕尺寸。我不想删除 responsive.css 文件以查看它是否有效。我见过几个使用这个系统构建的站点，有些是静态的。我的问题是我该怎么做？

```
<div class="container">

    <div class="span3">Logo Placement</div>
    <div class="span4 offset4">Weather Modal</div>
    <div class="span12">Nav placement 940px</div>
    <div class="span12">imageslider placement</div>
    <div class="row">
        <div class="span12">
            <div class="span4">sidebar placement</div>
            <div class="span6">body content placement</div>
        </div>
    </div>
</div> 
```

它不居中，并且似乎根据浏览器缩小。我不知道使用什么值或改变什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:39:27.153

在引导网站上生成和下载代码之前，只需取消选中“响应式布局”即可。这应该使您的网站具有静态网格。

# linux - 具有 preempt_rt 补丁的用户空间硬实时

> ID：10275036
> 
> 赞同：1
> 
> 时间：2012-04-23T05:00:25.470
> 
> 标签：linux, real-time, hard-real-time, preempt-rt

来自：[https ://rt.wiki.kernel.org/articles/f/r/e/Frequently_Asked_Questions_7407.html](https://rt.wiki.kernel.org/articles/f/r/e/Frequently_Asked_Questions_7407.html)

> 实时只对内核有影响；除了更好的实时行为外，用户空间不会注意到差异。

这是否意味着如果我们在用户空间编写应用程序，它们将不会获得硬实时效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:05:43.743

这取决于您对“实时效果”的含义。通常，您希望实时系统中有**保证的时序行为。**你不会明白的。但是，您的应用程序将运行得更“流畅”并且响应速度更快。对于许多尽力而为的系统来说，这就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-16T11:53:06.453

不，不是这个意思。

这意味着使用 PREEMPT_RT 您可以**在用户空间中获得更低的最大延迟，而无需调整您的代码**或使用其他库/工具。在实践中： PREEMPT_RT 不需要用户级应用程序来使用特定的 API。

相反，内核代码中的 API 发生了显着变化（例如，通过将任何自旋锁更改为互斥锁等）

顺便说一句，请记住 PREEMPT_RT 减少了任务经历的*最大*延迟，但系统吞吐量会更低（即，更多的上下文切换）并且平均延迟可能会增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T05:16:41.893

我相信这个问题可以在上下文中得到最好的回答——询问是否有应用程序作者可以使用的特定补丁集引入的任何 API——并且这个补丁集没有添加任何 API。您不需要重新编译您的应用程序，并且重新编译没有任何好处。您也不会被*锁定在*任何特定的 API 中。

如果您有一个编写良好的用户空间应用程序，它依赖于在硬件条件要求它应该响应时能够尽快运行，那么是的，这些补丁*可以*提供帮助。但是你仍然可以编写糟糕的应用程序来阻止良好的实时行为，而补丁集无法帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-02T20:34:28.790

这意味着实时补丁将操纵内核中的一些代码，这种操纵的效果是我们将拥有一个细粒度的抢占式内核。用户空间中的所有程序都将受益于实时抢占式内核，无需任何修改。甚至不需要重新编译！PREEMPT_RT 补丁的目标是将 Linux 转换为硬实时系统，它对大多数任务都非常有用。但在军事和航空航天等安全关键系统中，Linux 无能为力，我们应该使用其他 RTOS，如 VxWorks、QNX 和 Integirty！

# android - 如何使用 FragmentStatePagerAdapter 跨方向更改保存片段状态？

> ID：10275045
> 
> 赞同：2
> 
> 时间：2012-04-23T05:01:01.810
> 
> 标签：android, android-fragments, android-viewpager

我正在使用 a`ViewPager`并且`FragmentStatePagerAdapter`在跨方向更改时保存 Fragment 的状态时遇到问题。它在来回分页时工作正常，例如查看一个页面，滑动两页，然后将 2 页返回到原始 Fragment 正确保存和恢复状态。如果不为空，我正在使用`onSaveInstanceState`和恢复状态来执行此操作。`onCreateView``Bundle`

然而，改变方向并不能通过相同的机制起作用，而且根据我的测试，甚至不会调用片段的`onSaveInstanceState`方法。

这是预期的吗？我是否遗漏了一些东西来强制它保存实例状态？我做了什么阻止它工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T19:47:07.980

原来我没有打电话`super.onSaveInstanceState()`，`Activity`所以没有维护`ViewPager`/状态。`Fragment`添加`super.onSaveInstanceState()`修复它！

# magento - Magento 可能获得全部愿望物品

> ID：10275058
> 
> 赞同：0
> 
> 时间：2012-04-23T05:02:32.480
> 
> 标签：magento

是否有一种简单的方法/功能来接收愿望清单中产品的总计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:40:14.540

像这样的东西可以工作

```
public function getWishListTotal($customer) {
$wishList = Mage::getSingleton('wishlist/wishlist')->loadByCustomer($customer);
$wishListItemCollection = $wishList->getItemCollection();

$wishListTotal=0;
foreach ($wishListItemCollection as $_item) {
    $_product = $_item->getProduct();

    $wishListTotal = $wishListTotal + $_product->getPrice()
}

return $wishListTotal;   
} 
```

这是愿望清单上商品的总价格，不含税、运费等。

# android - Android 上的 Netty 在 bootstrap.connect 后抛出 NullPointerException

> ID：10275067
> 
> 赞同：0
> 
> 时间：2012-04-23T05:03:32.993
> 
> 标签：android, netty

**我的 Netty 通信类在标准 Java 应用程序中运行良好，但是当我在 Android 应用程序中运行它们时，我得到了 NullPointerException。**

我的问题是，是否有任何 Netty 专家可以指出解决这个问题的正确方向。这是与 Android 的不兼容问题，还是您在堆栈跟踪中看到任何可能表明我可能做错了什么的东西？

我在用`netty-3.4.0.Final.jar`

我已将 Internet 权限添加到`AndroidManifest.xml`.
我已经验证我可以在 android 应用程序中仅使用原始套接字（没有 Netty）成功连接到服务器。

调用后，`bootstrap.connect()`我可以在两个线程的断点处暂停执行。一进`exceptionCaught()`一进`channelClosed()`。

下面的堆栈跟踪来自异常`exceptionCaught()`。

该项目的完整源代码`codeplex`位于`elvemobileandroid project`.

我相信我实际上看到过一次 Android 项目工作，这可能表明异常并不总是被抛出。不幸的是，我无法让它再次工作（即使我没有对项目进行任何更改）。

```
Thread [<1> main] (Suspended (breakpoint at line 172 in UptimeClientHandler))   
    UptimeClientHandler.exceptionCaught(ChannelHandlerContext, ExceptionEvent) line: 172    
    UptimeClientHandler(SimpleChannelUpstreamHandler).handleUpstream(ChannelHandlerContext, ChannelEvent) line: 117 
    DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline$DefaultChannelHandlerContext, ChannelEvent) line: 564    
    DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(ChannelEvent) line: 792    
    ReadTimeoutHandler(SimpleChannelUpstreamHandler).exceptionCaught(ChannelHandlerContext, ExceptionEvent) line: 143   
    ReadTimeoutHandler(SimpleChannelUpstreamHandler).handleUpstream(ChannelHandlerContext, ChannelEvent) line: 117  
    DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline$DefaultChannelHandlerContext, ChannelEvent) line: 564    
    DefaultChannelPipeline.sendUpstream(ChannelEvent) line: 559 
    Channels.fireExceptionCaught(Channel, Throwable) line: 533  
    NioClientSocketPipelineSink.connect(NioClientSocketChannel, ChannelFuture, SocketAddress) line: 152 
    NioClientSocketPipelineSink.eventSunk(ChannelPipeline, ChannelEvent) line: 97   
    DefaultChannelPipeline.sendDownstream(ChannelEvent) line: 574   
    Channels.connect(Channel, SocketAddress) line: 642  
    NioClientSocketChannel(AbstractChannel).connect(SocketAddress) line: 204    
    ClientBootstrap.connect(SocketAddress, SocketAddress) line: 230 
    ClientBootstrap.connect(SocketAddress) line: 183    
    ClientBootstrap.connect() line: 154 
    UptimeClient.run() line: 94 
    CommunicationTest.test() line: 32   
    ElveMobileActivity.onCreate(Bundle) line: 25    
    Instrumentation.callActivityOnCreate(Activity, Bundle) line: 1047   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2627  
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2679   
    ActivityThread.access$2300(ActivityThread, ActivityThread$ActivityRecord, Intent) line: 125 
    ActivityThread$H.handleMessage(Message) line: 2033  
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 123 
    ActivityThread.main(String[]) line: 4627    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 521  
    ZygoteInit$MethodAndArgsCaller.run() line: 868  
    ZygoteInit.main(String[]) line: 626 
    NativeStart.main(String[]) line: not available [native method] 
```

这是我在stackoverflow上的第一篇文章，如果我可以提供更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:48:26.150

感谢您指出 logcat 窗口（我是 Eclipse 新手）。它显示了另一个错误：java.net.SocketException: Bad address family

在做了一些研究后，我发现了这个： [http ://code.google.com/p/android/issues/detail?id=9431](http://code.google.com/p/android/issues/detail?id=9431)

修复是在使用模拟器时禁用 IPv6：

```
java.lang.System.setProperty("java.net.preferIPv6Addresses", "false"); 
```

# ruby-on-rails - 从 Zombie#show 到 Tweet#new 时发送zombie_id（一对多关系）

> ID：10275068
> 
> 赞同：0
> 
> 时间：2012-04-23T05:03:35.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我有两个模型，Zombie 和 Tweet。架构如下：

```
 create_table "tweets", :force => true do |t|
    t.string   "status"
    t.integer  "zombie_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "zombies", :force => true do |t|
    t.string   "name"
    t.string   "graveyard"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

具有以下关联：

```
class Zombie < ActiveRecord::Base
    has_many :tweets
end

class Tweet < ActiveRecord::Base
    belongs_to :zombie
end 
```

在 Zombie#show 视图中，我添加了一个“New Tweet”按钮，将其发送到 Tweet#new (new_tweet_path)。在 Tweet#new 视图中，我有一个包含两个字段的表单：状态和僵尸 ID。当我到达来自 Zombie 个人资料的 Tweet#new 页面时，我不想填写zombie_id，或者我希望它知道 id 是什么，因为我刚刚来自它的个人资料页。

我需要做什么才能做到这一点？我假设我需要将僵尸对象从 Zombie#show 页面发送到 Tweet#new 页面，但我不确定我需要在控制器或视图中做什么来处理这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:25:33.790

在 Zombie#show 视图中，将zombie_id 参数添加到`new_tweet_path`调用中，如下所示：

```
new_tweet_path(zombie_id: @zombie.id) 
```

然后在 Tweet#new 中创建一个 Tweet 模型，其中已经填充了zombie_id，它在 params 哈希中传递：

```
@tweet = Tweet.new(zombie_id: params[:zombie_id]) 
```

# codeigniter - 如何使用 Codeigniter 的表单验证来防止特殊字符？

> ID：10275074
> 
> 赞同：0
> 
> 时间：2012-04-23T05:04:58.433
> 
> 标签：codeigniter

我有一个用户名字段，我不想接受像`{*)&(%^%()_}`. 我需要在表单验证规则中添加什么？

```
$this->form_validation->set_rules('user_name' 'User Name', 'trim|required|min_length[4]|xss_clean'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T05:26:44.160

只需阅读[文档](http://codeigniter.com/user_guide/libraries/form_validation.html)。这并不难。

如果要将用户名字符限制为字母和数字，请使用该`alpha_numeric`规则。

```
$this->form_validation->set_rules('user_name', 'User Name', 'trim|required|min_length[4]|xss_clean|alpha_numeric'); 
```

但如果您只想限制为字母，请使用该`alpha`规则。或者，如果您想将用户名限制为字母、数字、下划线和破折号，请使用该`alpha_dash`规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:27:32.273

您应该使用回调函数来检查用户名是否与模式匹配：

```
$this->form_validation->set_rules('username', 'Username', 'username_check');
....
public function username_check($str)
{
    if ($str == 'test')
    {
        $this->form_validation->set_message('username_check', 'The %s field can not be the word "test"');
        return FALSE;
    }
    else
    {
        return TRUE;
    }
} 
```

# variables - Alfresco Share：在 Activiti 工作流程中访问 bpm_comment

> ID：10275075
> 
> 赞同：3
> 
> 时间：2012-04-23T05:05:00.347
> 
> 标签：variables, workflow, alfresco

在 Activiti 工作流程中，如何访问`bpm_comment`用户输入的每条评论的变量？

如果我`bpm_comment`在每个任务中使用，它会显示相同的评论（第一个）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:05:24.817

我已经解决了！

在每个 userTask 中，我使用以下代码检索 bpm:comment。

```
var taskId = "activiti$" + task.getId();
var taskComment = workflow.getTask(taskId).getProperties()["bpm:comment"]; 
```

# database - 4NF分解后新关系的主键

> ID：10275080
> 
> 赞同：1
> 
> 时间：2012-04-23T05:06:07.147
> 
> 标签：database, database-design, primary-key

假设我有一个`R`带有属性`A`, `B`,的表，主键`C`在哪里。`A`假设我有多值依赖 B->-> C。我将表分解`R`为两个新表`R1`，`R2`其中`R1`有 attributes `A`，`B`key`A`和`R2`has attributes `B`，`C`。主键是干什么用的`R2`？

我认为答案应该是：由于 4NF 要求每个 MVD 的左侧都应该是一个超级键，那么在新表中，键将是 B，尽管整个属性集也可能是一个超级键（虽然是一个微不足道的属性，但那不是'我认为在 4NF 分解中无关紧要）。所以，这是我的猜测。

根据 Catcall 的出色建议，由于 B 的多值依赖性，生成的 R2 表将有许多行与 B 的重复值。键的替代选项是 C 本身以及 B 和 C 一起。如果 C->B 成立，C 可以是主键，在这种情况下它不是。因此，在这种情况下，唯一的关键是 B,c。有人可以检查我的推理是否正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:33:54.360

如果我理解正确，您有：

A -> B

和

B ->-> C

这意味着对于 A 的每个值，只有一个 B 的值，而对于 B 的每个值，都有许多 C 的值。

分解后，这使得 (A, B) 成为 R1 的超级键，而 (B, C) 成为 R2 的超级键。

所以到目前为止的推理是正确的。但是，我不认为你可以在现实世界中结束。如果你正在设计一个db，你还想问以下问题：

1.  以下是真的吗？C -> B 如果是这样，C 将是您的主键，而 (B, C) 将是超级键。
2.  以下是真的吗？C ->-> B 如果是这样，您基本上在其他两个实体之间有一个多对多的连接。

# android - 在 Android 中发布到服务器

> ID：10275082
> 
> 赞同：-1
> 
> 时间：2012-04-23T05:06:15.950
> 
> 标签：android, sqlite

1）查找每次发送到服务器的 GPS 值。2）现在我想将它存储在 SQLite DB 上，然后在单个帖子中将多个参数发送到服务器。我的问题是（1）或（2）哪一个是有效的，哪一个消耗更多的电池电量等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:09:24.480

第二总是最好的，因为您不必多次发布，而且效率很高！您可以将其作为 JSON 或 XML 之类的有效负载发送，一次性发送所有数据。

# android - 在 Unity3d 中使用 Android 陀螺仪

> ID：10275086
> 
> 赞同：0
> 
> 时间：2012-04-23T05:06:37.720
> 
> 标签：android, unity3d, gyroscope

您好，我发现 Unity3D 不支持 Android 上的陀螺仪，同时有应用程序使用它。我想知道是否有人有一个插件可以使它工作或知道如何制作它。我的计划是让相机以与手机相同的速度旋转。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:40:19.803

三星安卓设备中没有陀螺仪，你可以使用加速度计。要使用加速度计，请使用您需要的 Input.acceleration.x / y / z。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:42:33.070

您可以使用[GyroDroid](http://forum.unity3d.com/threads/101279-GyroDroid-2.0-Access-each-and-every-sensor-on-Android-devices-RELASED)插件。

# list - ocaml 超大数据结构建议

> ID：10275091
> 
> 赞同：3
> 
> 时间：2012-04-23T05:07:56.940
> 
> 标签：list, data-structures, ocaml, large-data

我正在寻找有关将哪种数据结构用于 OCaml 中可扩展的超大型结构的建议。

通过很好的扩展，我不希望堆栈溢出或指数堆增长，假设有足够的内存。所以这几乎消除了标准库的 List.map 函数。速度不是什么大问题。

但对于初学者来说，假设我在 2^10 - 2^100 个项目的范围内操作。

我对结构只执行了三个“操作”：

(1) 结构子集上的映射函数，它增加或减少结构

(2)扫描结构

(3) 删除结构中满足特定标准的特定项目对

最初我使用的是常规列表，这仍然是非常可取的，因为结构在不断变化。通常在执行完所有操作之后，该结构最多要么在大小上翻倍（或大约一倍），要么缩小为空列表 []。也许翻倍从一开始就注定了我，但这是不可避免的。

无论如何，大约 2^15 --- 2^40 个项目开始引起严重问题（可能是由于我也使用了简单的列表函数）。该程序使用了 100% 的 cpu，但几乎没有内存，并且通常在一两天后堆栈溢出。

如果可能的话，我宁愿开始使用更多内存，以便继续在更大的空间中运行。

无论如何，如果有人有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:55:30.460

如果理论上您有足够的空间来包含数据结构的所有项目，那么您应该查看具有高效内存表示的数据结构，并且尽可能少地进行簿记。动态数组（当您需要更多空间时以指数方式调整大小）比列表（支付一个完整的单词来存储每个单元格的尾部）更有效地存储，因此对于相同的内存使用，您将获得大约两倍的元素。

如果您无法将所有元素都保存在内存中（这就是您的数字的样子），您应该使用更抽象的表示。如果没有更多关于您的元素是什么的信息，很难说出更多信息。但也许抽象表示的一个例子可以帮助你设计你需要的东西。

想象一下，我想记录一组整数。我想制作这些集合的并集、交集，以及一些更时髦的操作，例如“获取所有多重元素”。我希望能够为非常大的集合（无数不同的整数）做到这一点，然后我希望能够在我构建的这个集合中选择一个元素，任何一个。我可以做的是存储与这些集合的定义相对应的逻辑公式，而不是尝试存储整数列表、整数集或布尔数组：整数集的特征是这样`P`的公式。因此，我可以定义一种谓词（条件）：`F``F(n) ⇔ n∈P`

```
type predicate =
  | Segment of int * int   (* n ∈ [a;b] *)
  | Inter of predicate * predicate
  | Union of predicate * predicate
  | Multiple of int  (* n mod a = 0 *) 
```

存储这些公式需要很少的内存（与我要应用的操作总数成正比）。建立交叉口或联合需要固定的时间。然后我会做一些工作来找到一个满足公式的元素；基本上我将不得不推理这些公式的含义，从中得到一个正常的形式（它们都是“满足某些模标准的区间有限联合的元素”的形式），然后从那里提取一些元素。

在一般情况下，当您在数据集上获得“命令”时，例如“添加映射到该子集的结果”，您始终可以将其存储为数据，而不是实际评估此命令——您的定义结构体。您可以更准确地描述这些命令（例如，您说“map”，但是存储一个 (elem -> elem) 函数将不允许您轻松地对结果进行推理，也许您可​​以将该映射操作表述为一个具体的组合操作），更准确地说，您将能够在这个抽象级别上处理它们，而无需实际计算元素。

# powershell - 将 powershell 脚本导出为 CSV

> ID：10275097
> 
> 赞同：0
> 
> 时间：2012-04-23T05:09:06.367
> 
> 标签：powershell, export-to-excel, export-to-csv

我有一个小脚本，它为 AD 中特定 OU 中的所有用户检索 LastLogonTimestamp 和 SAMAccount，并将时间戳转换为日期并仅从字符串中提取日期。那部分工作正常。然后我想将其输出到 CSV，以便它可以在 Excel 中打开并完美地格式化为列并且看起来很漂亮。

我已经尝试过 ConvertTo-Csv 和 Export-Csv 但没有成功。问题是我是 Powershell 的新手。这是我的第一个脚本，我不完全理解它是如何工作的。我的脚本可能非常混乱和不合逻辑，但到目前为止它完成了这项工作。

请帮忙。谢谢。

```
$userlist = Get-ADUser -SearchBase "OU=IT,DC=whatever,DC=com,DC=au" -Filter * -Properties * | Select-Object -Property Name,LastLogonTimestamp,SAMAccountName | Sort-Object -Property Name

$userlist | ForEach-Object {
    $last = $_.LastLogonTimestamp;
    $ADName = $_.SAMAccountName;

    $tstamp = w32tm /ntte $last;
    if($tstamp.Length -lt "40"){}else
    {
        $ADDate = [DateTime]::Parse($tstamp.Split('-')[1]).ToString("dd/MM/yyyy")
        write-host $ADDate;
        write-host $ADName;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:01:49.417

您必须为每个用户创建对象并将这些对象通过管道传送到`Export-CSV`cmdlet：

```
$usersList | %{

# current logic

$user = new-object psobject
$user | add-member -membertype noteproperty -name LastLogon -value $last
$user | add-member -membertype noteproperty -name ADName -value $ADName
$user | add-member -membertype noteproperty -name ADDate -value $ADDate
$user
} | export-csv test.csv -notype 
```

填充对象的替代语法：

```
$properties = @{"LastLogon" = $last; "ADName" = $ADName; "ADDate" = $ADDate}
$user = new-object psobject -property $properties 
```

# select - Richfaces 4 用户输入时的动态选择选项

> ID：10275098
> 
> 赞同：0
> 
> 时间：2012-04-23T05:09:13.630
> 
> 标签：select, dynamic, richfaces

我正在使用丰富的面孔选择组件。当用户在选择组件中手动键入某些内容时，我想要动态值。

```
<rich:select enableManualInput="true" defaultLabel="start typing for select" value="#{supplierSearchBean.userInput}">
                        <a4j:ajax event="keyup" execute="@this" listener="#{supplierSearchBean.userInputChange}"/>
                        <f:selectItems value="#{supplierSearchBean.selectOptions}" />
                        </rich:select> 
```

Java代码如下

```
public void userInputChange(ActionEvent  ae){
       Map map = ae.getComponent().getAttributes();
       System.out.println(map.toString());

   }

 public void setUserInput(String userInput) {
       System.out.println("userINput = " + userInput);
       this.userInput = userInput;
   } 
```

在这里我发现了 2 个问题 第一个：setUserINput 总是在用户类型值时打印空字符串 第二个：监听器方法永远不会被调用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:06:15.043

问题很可能是用户键入时没有选择值，并且此组件将允许的值限制为指定的选择项。因此，部分输入无效并且不能绑定到您的 bean。

`rich:autocomplete`我认为如果您使用 a代替，您可以获得预期的行为。但是，如果您想限制允许的值，也许您可​​以保留`rich:select`并监听`selectitem`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T07:42:47.923

覆盖文件夹下文件中的`getItems`功能。`richfaces-utils.js``richfaces-core-impl-4.0.0.Final.jar``richfaces-core-impl-4.0.0.Final\META-INF\resources`

将推送项目的条件更改为

```
if(p != -1) 
```

代替

```
if(p == 0) 
```

这应该可以解决问题。

# java - 自定义滑动抽屉把手位置

> ID：10275099
> 
> 赞同：1
> 
> 时间：2012-04-23T05:09:15.673
> 
> 标签：java, android, slidingdrawer

我研究了许多来源并尝试过，但仍然无法将手柄的位置从中心移到右侧。

```
 <SlidingDrawer
        content >

        <ImageButton                                  <-- this is handle
            android:id="@+id/handle"                  <-- i want to customize position
            android:layout_width="50px"
            android:layout_height="60px"
            android:background="@drawable/icon_other" />

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/background_others"
            android:orientation="vertical" >

            //content
        </LinearLayout>
    </SlidingDrawer> 
```

那么如何自定义位置呢？

请给意见。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:16:54.717

使用表格布局。这类似于 HTML Table 概念，允许您定义放置按钮和其他组件的行和列。

如果您不想在整个屏幕上使用表格布局，您应该能够将布局嵌套在另一个中......

# xcode - xcode：分段控制出现在 sim 上，而不是在设备上

> ID：10275102
> 
> 赞同：0
> 
> 时间：2012-04-23T05:09:32.933
> 
> 标签：xcode, device, uisegmentedcontrol

我有一个带有多个分段控件的 iPad 应用程序，包括一个带有两个控件的视图。

在这种情况下，一切都显示在 sim 中，包括正常和视网膜。但是，在设备中，只有一个显示。

以下是设备上未显示的代码。我已经检查过，构成控件的所有图像都复制到捆绑资源中。我试过移除、清洁等。没有乐趣。我一定错过了一些东西（希望很简单）..

```
 UISegmentedControl *controls = [[UISegmentedControl alloc] initWithItems:
 [NSArray arrayWithObjects: 
 [UIImage imageNamed:@"1.png"],
 [UIImage imageNamed:@"2.png"],
 [UIImage imageNamed:@"3.png"],
 [UIImage imageNamed:@"4.png"],
 [UIImage imageNamed:@"5.png"],
 [UIImage imageNamed:@"6.png"],                 
 [UIImage imageNamed:@"7.png"], 
 nil]];

 CGRect frame = CGRectMake(35, 70, 700, 35);
 controls.frame = frame;

 }

[controls addTarget:self action:@selector(drawSegmentAction:) forControlEvents:UIControlEventValueChanged];

controls.segmentedControlStyle = UISegmentedControlStyleBar;
controls.momentary = YES;
controls.tintColor = [UIColor grayColor];
[self.view addSubview:controls];

} 
```

作为参考，同一视图中的此代码确实有效：

作为参考，此控制代码确实有效：

```
-(void) buildColorBar {
//NSLog(@"%s", __FUNCTION__);

 UISegmentedControl *colorControl = [[UISegmentedControl alloc] initWithItems:
                                        [NSArray arrayWithObjects: [UIImage imageNamed:@"White.png"],
                                         [UIImage imageNamed:@"Red.png"],
                                         [UIImage imageNamed:@"Yellow.png"],
                                         [UIImage imageNamed:@"Green.png"],
                                         [UIImage imageNamed:@"Blue.png"],
                                         [UIImage imageNamed:@"Purple.png"],                         
     [UIImage imageNamed:@"Black.png"],

                                         nil]];

NSLog(@"Portrait");
CGRect frame = CGRectMake(35, 950, 700, 35);
colorControl.frame = frame;

     // When the user chooses a color, the method changeBrushColor: is called.
     [colorControl addTarget:self action:@selector(changeBrushColor:) forControlEvents:UIControlEventValueChanged];

     colorControl.segmentedControlStyle = UISegmentedControlStyleBar;

     // Make sure the color of the color complements the black background
     colorControl.tintColor = [UIColor grayColor];

     // Add the control to the window
     [self.view addSubview:colorControl];

} 
```

是否有禁止在一个视图中使用两个分段控件的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:47:36.263

我发现分段控件中的一个图像 - 虽然它看起来像是在捆绑包中 - 但它不是。PITA，但至少，它有效..

# php - PHP+MySQL：基于视图创建照片库

> ID：10275104
> 
> 赞同：1
> 
> 时间：2012-04-23T05:09:53.007
> 
> 标签：php, mysql

所以我正在尝试创建一个系统，用户可以在其中访问显示照片的页面。这些照片在 MySQL 数据库中有一个用于查看的列。我如何能够通过页面上的链接查看查看次数最多的照片，其中包含查看次数第二多的照片的链接，其中包含查看次数第三多的照片的链接等。每张照片都有一个专用页面。

我正在使用 CakePHP，如果有任何 CakePHP 特定的策略可以做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:16:18.773

我从来没有使用 cakePHP 的经验，但是使用 PHP 和 MySQL，你可以使用这样的查询：

```
SELECT image_link, view_count
FROM `tablename`
ORDER BY view_count DESC
LIMIT 1
OFFSET $i; 
```

然后，使用 GET 变量传递`$i`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:25:24.173

您可以使用收集每个图像的统计信息

```
<?php
   $ip = $_SERVER['REMOTE_ADDR'];
   $url = $_SERVER['HTTP_REFERER'];
?> 
```

其中 $url - 是图像的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:17:12.613

好吧，我不了解 cakephp，但我告诉你实现你想要的逻辑，

只需在照片点击上发送一些参数并设置照片的唯一 ID，以便在照片上的点击事件中，您将获得照片的唯一 ID，并获取查看了哪张照片并在每次点击时更新数据库。

除此之外，您将根据您的要求生成链接，以按降序获取视图中的图像

# c# - BadImageFormatException x64 问题

> ID：10275106
> 
> 赞同：17
> 
> 时间：2012-04-23T05:10:31.460
> 
> 标签：c#, visual-studio-2010, windows-services, badimageformatexception

我发誓微软越“进化”Visual Studio，整个过程就会变得越无知。

我有一个包含 3 个类库的 Windows 服务。我进入每个类库的属性并将平台目标设置为 x64。我对 Windows 服务以及我添加以验证所有内容的测试控制台项目做了同样的事情。

我可以在我的 Windows 2008 R2 x64 服务器上毫无问题地运行控制台应用程序，但愚蠢的安装程序一直在轰炸并告诉我我的图像不好。我确实确保已将安装程序的目标平台设置为 x64。

我不知道这个愚蠢的东西会爆炸，并且真的很感激任何见解。我确实引用了其他 DLL，那些可能是 x86，但我认为如果主库设置正确，那么一切都会正常工作......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T13:30:09.447

我终于弄清楚了——它与架构、参考或任何其他废话无关，而与安装程序本身有关。 [正如这篇文章所解释](http://blogs.msdn.com/b/heaths/archive/2006/02/01/64-bit-managed-custom-actions-with-visual-studio.aspx)的——默认情况下，Visual Studio 安装程序使用 32 位 DLL，这就是导致失败的原因。

要克服这个问题，只需按照以下步骤操作：

1.  确保进入每个项目的 Properties ⇒ Build 选项卡并将 Target Platform 设置为 x64
2.  单击安装项目的名称，然后单击属性并确保目标平台为 x64
3.  构建您的解决方案 - 如果解决方案无法编译，请右键单击并卸载项目，然后为那些引用失败的项目加载项目。
4.  [去这里](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=3138)下载并安装 7.0 INstaller SDK
5.  进入 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin 文件夹并通过双击 Orca.Msi 文件安装 Orca
6.  运行 Orca 并打开项目的 MSI 文件夹
7.  选择二进制表
8.  双击记录 InstallUtil 的单元格 [Binary Data]
9.  确保选中“从文件名读取二进制文件”
10.  单击浏览按钮 浏览到 C:\Windows\Microsoft.NET\Framework64\v4.0.30319
11.  选择 InstallUtilLib.dll
12.  单击打开按钮，然后单击确定按钮

就是这样 - 将您的 MSI 文件保存在 Orca 中，然后部署它 - x64 安装应该可以正常工作，没有任何进一步的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-15T11:34:43.023

这个错误发生在我将 .Net 4.5+ 服务安装到 64 位机器上。

*   安装程序设置为**x64**
*   服务项目构建平台设置为**x64**

安装失败并出现 BadImageFormatException。

对我来说，解决方案是转到服务项目属性，并将构建平台更改为“**任何 CPU** ”，并取消选中默认**选中的“首选 32 位”**复选框（另请参阅[它的含义](https://stackoverflow.com/questions/12066638/what-is-the-purpose-of-the-prefer-32-bit-setting-in-visual-studio-and-how-does)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T19:11:15.980

我自己在 Visual Studio 2017 中遇到了这个问题，为长期使用 x86 的应用程序的 x64 版本构建安装程序。

我不怀疑 Ken 的回答是确定的，但我突然想到，由于安装程序调用了自定义操作，而不是已安装的应用程序，因此至少在我的情况下，不需要包含自定义的项目与应用程序的其余部分具有相同位数的操作，因为它的类永远不会被应用程序本身实例化。

所以我将那个项目的平台单独改回 x86，并重建了安装程序。

这一切都“刚刚奏效”。

当然，这取决于拥有与解决方案的其余部分完全隔离的自定义操作。然而，不必使用 Orca 真是一种解脱。

# html - 用于 jQuery 或 HTML5 的世界地图框架

> ID：10275107
> 
> 赞同：6
> 
> 时间：2012-04-23T05:10:49.347
> 
> 标签：html, jquery, ajax, dictionary

我有一个项目，它需要在其主页上类似于[此示例](http://www.ammap.com/examples/flight_routes)的动画世界地图。Flash 不是让我使用 html5 css jquery 或其他 ajax 框架的选项。

你知道任何用于 jQuery、HTML 5 或其他 ajax 框架的世界地图框架吗？

数据不需要是动态的，我想要的只是代表起点和终点的线条**，**以**进行**动画处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:13:22.433

按照我个人的偏好顺序：OpenLayers、Leaflet 或 Polymaps

[http://openlayers.org/](http://openlayers.org/)

[http://leaflet.cloudmade.com/](http://leaflet.cloudmade.com/)

[http://polymaps.org/](http://polymaps.org/)

所有开源，所有 Javascript，所有 IE 兼容（至少对于 IE>8，我认为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T13:32:59.127

AmMap 很久以前就从 flash 切换到了 JavaScript，现在上面的演示是用 JavaScript 制作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:43:24.020

您可以尝试以下基于 HTML5 / Google Map 而不是 Flash 的地图软件产品：

[iMapBuilder HTML5 地图软件](http://www.imapbuilder.com/html5-mapping/) 基于地图模板（类似于 amMap），但使用 HTML5 地图而不是 Flash 地图。让您使用图钉、线条、鼠标悬停效果等轻松创建交互式地图。

[Flight Routing Map Base a Custom Google Map](http://www.imapbuilder.net/interactive-map-samples/category-legend-map-filter.php) 这是一个基于 Google map 的飞行路线图，使用 gmap 编辑器创建。

# c# - 根据命令行在Dll中定义启动方法

> ID：10275117
> 
> 赞同：1
> 
> 时间：2012-04-23T05:12:15.110
> 
> 标签：c#, dll

我有一个带有两个方法名称 ShowUserProfile 和 ShowProfileWithArea 的 ShowUsers.dll。

当用户输入 cmd>ShowUsers.dll 'UserName' 它应该调用 ShowUserProfile

当用户输入 cmd>ShowUsers.dll 'UserName' 'Area' 时，它应该调用 ShowProfileWithArea。

如何在 dll 代码中配置它以适应命令行中的这些调用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:43:33.697

`dll`代表“动态链接*库*”，所以基本上没有任何启动方法的概念。如果您想有条件地执行该库中的方法，则无法使用其他方法，`exe`例如桥接，并将调用路由到`dll`基于在`exe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:14:09.947

我认为您必须制作一个控制台应用程序才能运行它。我的意思是你需要exe而不是dll。

```
static void Main(string[] args)
{
 if (args.Length > 0)
 {
  if(args[0] == "your text")
     // call first method
  else 
     // call second method       
 }
} 
```

# javascript - Javascript 布尔值：false && true 结果为 true

> ID：10275119
> 
> 赞同：8
> 
> 时间：2012-04-23T05:12:29.353
> 
> 标签：javascript

我需要根据某些无线电组的值禁用/启用按钮。这些收音机由一些 groovy 代码填充，因为我使用的是 grails，一个 groovy 框架，它是 java 的超集。嗯，这个解释是说无线电的值被定义为布尔值，这是很自然的，因为它们对应于是/否的答案。

现在，为了禁用/启用这个按钮，我使用了一些 javascript，但它带有布尔值。`false`正如标题所述，在某些时候，我在一个持有的变量和另一个持有的变量之间做了一个逻辑和`true`

这是有问题的代码的一部分：

```
var actual = true;
$('.requerido input:radio:checked').each(function() {
    console.log("actual: " + actual);
    console.log("value: " + this.value);
    console.log("actual and value: " + (actual && this.value));
    actual = actual && this.value;
    console.log("actual: " + actual);
}); 
```

如您所见，我使用 console.log 进行调试，这就是在某些时候抛出的：

```
actual: true
value: true
actual and value: true
actual: true

actual: true
value: false
actual and value: false
actual: false

actual: false
value: true
actual and value: true
actual: true 
```

所以 true && false == false，但是 false && true == true ？请注意，这些值没有引号，因此它们是布尔值（我正在使用 Chrome 控制台进行调试，它表示双引号内的字符串，因此您可以区分 true 和“true”）。

有任何想法吗？

此外，像总是按预期进行手动比较一样`var x = true && false`，只是使用存在问题的变量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T05:25:55.227

您选中的`this.value`单选按钮输入实际上不是布尔值，而是字符串。字符串和布尔值的比较可能会导致这样的问题。这就是为什么它被认为是最佳实践的原因之一是`===`用于比较。

有关详细信息，请参阅此 SO Question；[JavaScript === vs == ：我使用哪个“等于”运算符重要吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T05:25:35.587

请注意，`&&`执行以下操作：

> 如果可以转换为 false，则返回 expr1；否则，返回 expr2。

[[来源](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)]

因此，在以下情况下：

```
var truish=true;//interchangeable with anything different than 0,"",false,null,undefined,NaN
var falsish=null;//interchangeable with 0,"",false,null,undefined,NaN

alert(truish&&falsish);//null (falsish was returned) 
```

返回的值不一定是布尔值，对此的解决方案是强制布尔值`!(x&&y)`

所以我的猜测是这样的事情正在发生

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T05:44:33.953

如果您尝试使用逻辑运算符进行计算，请记住：

```
var result = true && "false";// always results (string) "false"
var result = true && "true";// always results (string) "true"
var result = false && "true";// always results (boolean) false
var result = false && "false";// always results (boolean) false
var result = "true" && true;// always results (boolean) true
var result = "true" && false;// always results (boolean) false
var result = "false" && true;// always results (boolean) true
var result = "false" && false;// always results (boolean) false
var result = "true" && "true";// always results (string)"true"
var result = "true" && "false";// always results (string) "false"
var result = "false" && "true";// always results (string) "true"
var result = "false" && "false";// always results (string) "false" 
```

因为：javascript判断第一个操作数，如果为true则返回第二个操作数，否则返回false；它就像：

```
var first = true
var second = "false";
if (first) {
    result = second;
} else {
    result = false;
} 
```

或者

```
result = first ? second : false; 
```

这是 javascript 逻辑运算符实际工作的方式。您必须在不同的变量类型之间进行严格的比较：

```
result = true && (value==="false"); 
```

不为空的字符串等于（布尔）真，甚至是“假”。

并记住 html 元素属性是“字符串”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T05:23:19.530

这必须与您的无线电控件的（其中一个）值有关，因为在普通的 javascript 中，它的计算结果符合预期：

```
function boolx(tf,val){ 
  var test = tf && val;
  console.log([tf,val,tf && val,test]); 
}
tf(true,false); //=> [true,false,false,false]
tf(false,true); //=> [false,true,false,false] 
```

也许是`this.value`帮助的显式转换，因为`this.value`实际上是一个字符串：

```
var actual = true;
$('.requerido input:radio:checked').each(function() {
    var val = /true/i.test(this.value);
    console.log("actual: " + actual);
    console.log("value: " + val);
    console.log("actual and value: " + (actual && val));
    actual = actual && val;
    console.log("actual: " + actual);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T05:22:15.740

尝试按位和`&`副`&&`。后者适用于条件比较，但不适用于为变量赋值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T05:23:05.517

这真的是你想做的吗？：

```
actual = actual && this.value; 
```

这与以下内容相同：

```
if (actual) {
    actual = this.value;
} 
```

`actual`始终`true`如您的代码中所定义，因此`actual`将是`this.value`而不是布尔值。

# iphone - iPhone对象不会死

> ID：10275124
> 
> 赞同：0
> 
> 时间：2012-04-23T05:13:06.883
> 
> 标签：iphone, animation, uiviewcontroller, profiling, automatic-ref-counting

我在我的应用程序中使用 ARC。现在我遇到了一个真正的问题。我需要从左到右为两个视图控制器设置动画。所以我只是为按钮动作中的两个视图设置动画，例如，

```
// thanks to stackoverflow for this code

test *control = [[test alloc] initWithNibName: @"test" bundle: nil];
control.view.frame = self.view.frame;
control.view.center = CGPointMake(self.view.center.x + CGRectGetWidth(self.view.frame), self.view.center.y);
[self.view.superview addSubview: control.view];

// Animate the push

[UIView beginAnimations: nil context: NULL];
[UIView setAnimationDelegate: self];

[UIView setAnimationDidStopSelector: @selector(pushAnimationDidStop:finished:context:)];
control.view.center = self.view.center;
self.view.center = CGPointMake(self.view.center.x - CGRectGetWidth(self.view.frame), self.view.center.y);

[UIView commitAnimations];

- (void) pushAnimationDidStop: (NSString *) animationID finished: (NSNumber *) finished context: (void *) context 
{
  [self.view removeFromSuperview];
} 
```

在第二个视图控制器中我做了同样的事情，但改变了动画方向。

我真正的问题是当我运行这段代码时，每次我创建另一个类的对象并且它没有解除分配。通过分析这段代码，发现每次对象还活着并且它没有死亡并且内存分配增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:19:14.000

您可以在启用引用计数记录的情况下运行分配工具。然后根据该数据评估偏移量与您的预期不同的地方。

# powershell - 检查远程计算机中是否存在注册表路径

> ID：10275133
> 
> 赞同：2
> 
> 时间：2012-04-23T05:14:37.913
> 
> 标签：powershell, remote-access

我使用 Power Shell 来检查是否存在使用此命令的路径。**powershell test-path "HKCU:\Software\Microsoft\Windows"**现在如何将其扩展到远程机器。如果我想在远程机器中测试注册表路径，语法是什么，我尝试了 **powershell test-path "\\machinename\HKCU:\Software\Microsoft\Windows"**并且它不起作用。建议一些方法来测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:13:46.030

您可以按照此处所述访问它：http: [//powershell.com/cs/blogs/tips/archive/2011/02/15/accessing-registry-remote.aspx](http://powershell.com/cs/blogs/tips/archive/2011/02/15/accessing-registry-remote.aspx)

```
$reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', 'server123')
$key = $reg.OpenSubKey('SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall')

$key.GetSubKeyNames() | ForEach-Object {
    $subkey = $key.OpenSubKey($_)
    $i = @{}
    $i.Name = $subkey.GetValue('DisplayName')
    $i.Version = $subkey.GetValue('DisplayVersion')
    New-Object PSObject -Property $i
    $subkey.Close()
}

$key.Close()
$reg.Close() 
```

另一种方法是启用 PSRemoting 并`invoke-command`在远程机器上使用，并有效地运行与在本地机器上运行的命令相同的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:51:07.900

您无法连接到远程计算机的当前用户配置单元。这是一个使用 Remote Regitry 模块检查远程服务器的 hklm 配置单元中是否存在远程密钥的示例。该模块可以在 codeplex 上找到：psremoteregistry.codeplex.con

Test-RegKey -ComputerName server1 -Key software\microsoft\winows -Hive LocalNachine

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T21:31:47.743

[这个](http://poshcode.org/615)网站帮助了我。该代码基本上检查一个键，然后如果第一个键不存在，则检查另一个键。它还在尝试从中读取值之前验证子键是否存在。如果两者都不存在，则 try / catch 可以帮助解决这个问题。

```
 $reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', $computerName)
    $regkey = $reg.OpenSubkey("SOFTWARE\\Symantec\\Symantec Endpoint Protection\\AV\\Storages\\Filesystem\\RealTimeScan")

if(-not $regkey) {
$regkey = $reg.OpenSubkey("SOFTWARE\\Wow6432Node\\Symantec\\Symantec Endpoint Protection\\AV\\Storages\\Filesystem\\RealTimeScan")
}

$autoProtectStatus = ""
$null = ""

if ($regkey.GetValue("OnOff", $null) -ne $null) {
    $autoProtectStatus = $regkey.GetValue("OnOff")
}

if ($autoProtectStatus -eq 1) {
    $autoProtectStatus = "Protection On"
} elseif ($autoProtectStatus -eq 0) {
    $autoProtectStatus = "Protection Off"
} else {
    $autoProtectStatus = "Unknown State"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T18:41:16.550

很多问答都是 3 岁或以上。我怀疑新版本的 Powershell 一定已经清理了很多。话虽如此，仍然没有直接命令可以检查远程计算机上的注册表（据我所知）。这有效 - 它检查是否安装了 .NET 4.6.2（虽然它比其他答案更简单吗？）

```
invoke-command -computername <NetBiosName> -scriptblock {test-path -Path
"HKLM:\Software\Microsoft\.NetFramework\v4.0.30319\SKUs\.NetFramework,   
Version=v4.6.2"} 
```

您还可以将脚本块内容放入 *.ps1 文件（{} 内的所有内容，然后使用以下命令调用它：Invoke-Command -ComputerName *NetBiosName* -FilePath " *FQLP* "

# regex - 用九替换所有尾随零的正则表达式

> ID：10275135
> 
> 赞同：4
> 
> 时间：2012-04-23T05:14:51.053
> 
> 标签：regex, biginteger

我正在尝试实现 BigInt 减一，并希望优化我的代码。现在我只是遍历数字字符串，例如“1241241291919191904124142398623500000000000000”，为了减一，所有尾随零都需要替换为九。

我将如何使用正则表达式来做到这一点？

使用正则表达式实现 BigInt SubtractOne(string) 函数的聪明方法是什么？它有几个特殊情况。

这是我到目前为止匹配尾随零的内容：

```
m = re.search('(?<=[1-9])0+$', '91000') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:57:58.673

使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
import re
s =  "1241241291919191904124142398623500000000000000"
r = re.compile("""0       # Match 0
                  (?=     # only if the following can be matched here:
                   0*     # zero or more 0s
                   $      # until the end of the string.
                  )       # End of lookahead assertion""", re.VERBOSE) 
```

现在你可以做

```
>>> r.sub("9", s)
'1241241291919191904124142398623599999999999999' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:05:03.750

另一种可能性是使用返回替换的函数

```
import re

def ReplZeros(matchobj):
    return len(matchobj.group(0)) * "9"

text = '1241241291919191904124142398623500000000000000'
res = re.sub(r'0+$', ReplZeros, text)

print text
print res 
```

输出

> 1241241291919191904124142398623500000000000000 1241241291919191904124142398623599999999999999

# classification - 如何有效地对短文本信息进行分类，不比性能长文本差

> ID：10275140
> 
> 赞同：0
> 
> 时间：2012-04-23T05:16:08.297
> 
> 标签：classification

当我做文本分类时，如果文本很长，那么使用朴素贝叶斯分类可以获得非常令人满意的性能。

但是，当上下文涉及短文本时，例如 Twitter 消息或 Stackoverflow 中的问题内容，​​在几乎所有指标（例如准确率、召回率、ROC...

有没有一些实用的建议可以帮助我对这些短文本内容进行分类？

我会很高兴的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:34:57.943

提高相关性变得更加困难，您需要考虑您的最终目标并从那里开始工作。但更接近的一种方法是添加额外的指标，在​​您的情况下，这将是消息长度、字典大小和文章上下文。

假设您更喜欢较长的文章而不是 twitter，那么长度指标会给文章带来更高的权重。

字典大小大部分时间与文章长度有关，但也与上下文密切相关。也就是说，一篇关于特定事物的文章在该上下文中将具有较高的度量，而不是同时讨论几件事的同一文章。

要构建上下文，您需要构建一个同义词词典，就像一棵树，它们之间有距离。示例：软件与电子相关的计算机相关，但软件与电子相关的松散。

为了提供一个解决方案，快速而肮脏的解决方案是权衡较短文章中的单词。

# c# - 返回一个通用列表

> ID：10275148
> 
> 赞同：3
> 
> 时间：2012-04-23T05:16:45.573
> 
> 标签：c#, generics, collections, generic-method

从文件加载值后，我试图返回一个通用列表。但是，经过大量摆弄类型操作后，我仍然无法同意我的看法。代码如下；我的问题是：

1.  我是否需要像下面开始那样识别每种键类型，还是有更快的方法？我看到 'where T: ...' 在这里可能是相关的，但如果可能的话，我想允许 DateTime、int、string、double 等，我看不出如何用 'where' 来做这些。
2.  为什么我不能将我的 DateTime 项目添加到日期时间的列表中？
3.  当我尝试获取类型（listType）时，这似乎超出了范围。即使我在上面使用它的行中声明了类型，它也表示不存在这样的对象。

非常感谢您的想法

```
public static List<T> FileToGenericList<T>(string FilePath, int ignoreFirstXLines = 0, bool stripQuotes = true)
{
    List<T> output = new List<T>();

    Type listType = output.GetType().GetGenericArguments()[0];

    try
    {
        using (StreamReader stream = new StreamReader(File.Open(FilePath, FileMode.Open)))
        {
            string line;
            int currentLine = 0;

            while ((line = stream.ReadLine()) != null)
            {
                // Skip first x lines
                if (currentLine < ignoreFirstXLines) continue;

                // Remove quotes if needed
                if (stripQuotes == true)
                {
                    line = line.Replace(@"""", @"");
                }

                // Q1 - DO I HAVE TO HAVE THIS FOR EACH TYPE OR IS THERE A QUICKER WAY
                if (listType == typeof(System.DateTime))
                {
                    DateTime val = new System.DateTime();
                    val = DateTime.Parse(line);

                    // Q2 ERROR: 'Argument type is not assignable to parameter type 'T''                    
                    output.Add(val);

                    // For some reason the type 'listType' from above is now out of scope when I try a cast
                    output.Add((listType)val);
                }
                if (listType == typeof(System.String))
                {
                    //DateTime val = new System.DateTime();
                    //val = DateTime.Parse(line);
                    //output.Add(val.ToString());
                }

                // Continue tracking for line skipping purposes
                currentLine++;
            }
        }
    }
    catch (Exception ex)
    {
        throw new Exception("Error - there was a problem reading the file at " + FilePath + ".  Error details: " + ex.Message);
    }    
    return output;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:19:56.250

我认为不是将解析逻辑编码到您的`FileToGenericList`方法中，而是一种更简洁、更灵活的方法是将其重构出来并将其作为 lambda 传递。这是一个演示此方法的快速控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        // second argument is a lambda that describes how to convert the line into the type you require
        var dateList = FileToGenericList<DateTime>("dates.txt", DateTime.Parse);
        var stringList = FileToGenericList<string>("strings.txt", s => s);
        var intList = FileToGenericList<int>("integers.txt", Int32.Parse); 

        Console.ReadLine();
    }

    static List<T> FileToGenericList<T>(string filePath, Func<string, T> parseFunc, int ignoreFirstXLines = 0, bool stripQuotes = true)
    {
        var output = new List<T>();

        try
        {
            using (StreamReader stream = new StreamReader(File.Open(filePath, FileMode.Open)))
            {
                string line;
                int currentLine = 0;

                while ((line = stream.ReadLine()) != null)
                {
                    // Skip first x lines
                    if (currentLine < ignoreFirstXLines)
                        continue;

                    // Remove quotes if needed
                    if (stripQuotes == true)
                        line = line.Replace(@"""", @"");

                    var parsedValue = parseFunc(line);
                    output.Add(parsedValue);
                    currentLine++;
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception("Error - there was a problem reading the file at " + FilePath + ".  Error details: " + ex.Message);
        }    
        return output;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:48:19.910

// Q1 - 我必须为每种类型提供这个还是有更快的方法

这是一些可以帮助您入门的测试代码：

```
using System;
using System.Collections.Generic;

namespace AddGenericToList
{
    class Program
    {
        static void Main(string[] args)
        {
            var tc = new ListClass<string>();

            tc.Add("a value");
            tc.Add(123);
            tc.Add(DateTime.Now);
        }
    }

    internal class ListClass<T>
    {
        private readonly List<T> list = new List<T>();

        public void Add(object value)
        {
            list.Add((T)Convert.ChangeType(value, Nullable.GetUnderlyingType(typeof (T)) ?? typeof (T)));
        }
    }
} 
```

但是，无效的强制转换会引发错误。例如，`DateTime`可以转换为`string`但不能转换为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:46:20.820

对于您的问题 #3：您收到“超出范围”错误的原因是您无法转换为变量。您`output.Add((listType)val);`不是合法的 C# 语句 - 您只能强制转换为显式类型定义。幸运的是，您不需要通过`Type listType`变量进行所有转换，因为您*有*一个明确的类型定义 - 您作为泛型参数获得的 T。您可以在@Pravin Pawar 的答案中看到答案：`output.Add(val as T);`，或者更好地使用显式强制转换语法`output.Add((T)val)`，因为 T 不一定是引用类型。

编辑：

你是对的，它`(T)val`不会编译，因为编译器并没有为我们付出额外的努力并决定 T 是 DateTime，尽管我们之前进行了检查。所以你可以这样做：

```
 (T)Convert.ChangeType(val, typeof(T))); 
```

这会将您的 DateTime val 转换为 T（也是 DateTime），这足以满足编译器的要求。

# python - Python：运行没有错误

> ID：10275159
> 
> 赞同：0
> 
> 时间：2012-04-23T05:17:46.860
> 
> 标签：python

下面是要在 shell 中执行的语句。在它之前编写 Python 语句，以保证该语句将无错误地运行。代码做什么并不重要，只要它运行即可。下面是一个例子。代码：a = p(b % c)

在此之前的声明以保证它将无错误地运行：

```
def p(n):
    return n + 1
b = 45
c = 13 
```

* * *

代码：

```
n = d[x](96) + 7 
```

在此之前的声明以保证它将无错误地运行：

```
def hello(n):
    return n + 5
d = {1:hello}
x = 1 
```

我没有得到代码。怎么会有方括号 [x] 和括号 (96) 一起得到字典 d 中的值？这意味着什么？另外，“你好”为什么没有引号，因为它是一个字符串？我只是没有得到整体的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T05:23:58.173

因为`d`是字典，所以访问其中的任何元素都需要使用一个`index`数字，在显示的代码中，它是`x`. 因此，`d[x]`访问`x`字典索引处的元素。

当 d 的定义完成时，`d = { 1:hello}`这意味着`1th`字典的索引是指`hello`因此命名的预定义函数，在调用期间，以下行中使用了一个括号：

```
n = d[x](96) + 7 
```

因为，我们设置`x = 1`了 ，所以调用实际上会被解析如下：

```
# d[x] calls dictionary element at index x
# x = 1, therefore, d[x] => d[1]
# d[1] is function hello
# d[1](96) will pass number 96 to function hello. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:29:02.427

`a = p(b % c)`

`a`是返回的值的名称`p`。`p`是一个函数名，即`def p(args): pass`，`(b % c)`是提供给`p`函数的参数，该函数从除法中找到余数：`b/c`并将其传递给`p`.

`n = d[x](96) + 7`

`n`是条目的值返回的值的名称。`d`可以是列表或字典。`[x]`是检索到的项目的索引。`(96)`是您传递给从`d`at index中的函数返回的项目的参数`x`。被添加到从带有参数`+7`的函数返回的对象中。`d[x]``96`

希望这将是您了解正在发生的事情的一个很好的起点。

# windows - 如何成为设备驱动程序开发人员

> ID：10275160
> 
> 赞同：0
> 
> 时间：2012-04-23T05:18:12.927
> 
> 标签：windows, device-driver, windows-kernel

我是 C++/MFC/Qt/Win32 开发人员。我想转向设备驱动程序编程。最近我购买了 Ronald D. Reeves 的 Windows 7 设备驱动程序。然后，当我查看亚马逊的评论时，我感到气馁。您能否建议我应该如何进行设备驱动程序编程。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:41:51.360

在深入了解 Windows 驱动程序模型的编程之前，请务必从 Windows Internals（现已发布第 6 版）开始。最后一本可能已经绝版，但您仍然可以找到它作为电子书使用或提供。它较旧，但 WDM 基本相同，它是对理论位以及动手内核模式设备驱动程序开发的精彩介绍。读完这两本书，你就可以轻松搞定windows驱动框架（KMDF和UMDF）。设备驱动程序开发是一个巨大的领域。您想要或需要开发许多类型的驱动程序以及各种框架来帮助您做到这一点，但我肯定会从这两本书开始。

# python - 什么会导致 IOError：错误的消息长度

> ID：10275162
> 
> 赞同：5
> 
> 时间：2012-04-23T05:18:23.543
> 
> 标签：python, multiprocessing

我正在使用 python 脚本从 4D 图像（功能性 MRI 扫描）中操作和提取信息。部分分析设置为使用 multiprocessing 包并行运行（针对每个主题）：

```
pool = Pool(processes=numberCores)
resultList = pool.map(SubjectProcesser, argList) # where arglist is the list of arguments passed to the process 
```

这些适用于不同类型的文件和不同类型的分析。对于一种特定类型的分析，我收到以下错误：

```
Process PoolWorker-1:
Traceback (most recent call last):
File "/home2/user/epd/epd-7.2-2-rh5-x86_64/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
  self.run()
File "/home2/user/epd/epd-7.2-2-rh5-x86_64/lib/python2.7/multiprocessing/process.py", line 114, in run
  self._target(*self._args, **self._kwargs)
File "/home2/surchs/epd/epd-7.2-2-rh5-x86_64/lib/python2.7/multiprocessing/pool.py", line 99, in worker
  put((job, i, result))
File "/home2/user/epd/epd-7.2-2-rh5-x86_64/lib/python2.7/multiprocessing/queues.py", line 392, in put
  return send(obj)
IOError: bad message length 
```

我已将其缩小到失败的程度。并行进程显然执行正常（通过在脚本的不同阶段查看我的各种调试打印输出来确定），但随后在重新映射结果期间发生故障。

我已搜索此错误消息，但尚未找到任何解决方案。由于我的脚本确实适用于所有其他类型的分析，我想知道会发生什么。

## 关于分析的一点，因为我想这会导致问题

不同的分析或多或少是大脑中体素的时间序列提取（将大脑想象为 3D 矩阵，时间为第四维，矩阵元素称为体素）。大脑中的任何一点对于每个时间点都有一个激活值。那么时间序列是给定体素的所有激活值随时间变化的向量。

然后我计算所有体素之间的相关系数（给我一个平方相关矩阵，其维度为体素），并返回所有相关系数的向量（矩阵的下三角形）作为并行处理的输出。

现在对于所有不抛出错误的分析，我平均多个体素（基于区域节点），然后使用该区域的平均时间序列 - 有效地做两件事：

1.  大幅减少体素数量（减少区域数量）
2.  摆脱始终为零的体素（作为平均的结果。没有区域将仅包含零体素）

相比之下，给出上述错误的分析使用了大脑中的所有体素时间序列，从而产生了更大的相关矩阵。

我试图通过屏蔽每个主题文件来消除零体素，而且我没有得到任何“除以零”错误，但这是我能想到的唯一两件事。

此外，如上所述，处理的并行部分毫无问题地进行。运行后会抛出错误，可能是在重新映射结果期间。

任何帮助将不胜感激。另外，如果我应该提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:14:00.443

当我从子进程返回的对象变得太大（在我的情况下为数十千兆字节）时，我遇到了同样的问题。这些巨大的对象需要被腌制并通过进程通信发送回父进程，这可能是问题的原因。当然，即使我没有收到此错误，移动数十 GB 的数据也是一个坏主意。因此，我的解决方案是更改程序的结构，以消除传递如此大的对象的需要。

您可能能够做的一件事是使用[Shared Memory](http://docs.python.org/2/library/multiprocessing.html#shared-ctypes-objects)。我对此不太走运，因为我的对象非常复杂，并且在没有大量代码更改的情况下不容易在共享内存中创建，但您的对象可能更易于管理。

另请参阅另一个线程：[python multiprocessing 中的共享内存对象](https://stackoverflow.com/questions/10721915/shared-memory-objects-in-python-multiprocessing)。

# django - 使用装饰器 login_required 的 Django 通用视图

> ID：10275164
> 
> 赞同：19
> 
> 时间：2012-04-23T05:18:53.727
> 
> 标签：django

我是 django 新手，我完成了 djangoproject.com 上的 4 部分教程

我的问题是我想在我的投票应用程序上进行登录身份验证。我使用了装饰器@login_required，它工作正常，但在我的views.py 下我只有 vote() 方法。

我在“投票文件夹”下的views.py

```
from django.shortcuts import render_to_response, get_object_or_404
from django.http import HttpResponseRedirect, HttpResponse
from django.contrib.auth.decorators import login_required
from django.views.decorators.cache import never_cache
from django.core.urlresolvers import reverse
from django.template import RequestContext
from polls.models import Poll, Choice

@login_required
@never_cache
def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        return render_to_response('polls/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        selected_choice.votes += 1
        selected_choice.save()
        return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))
    return HttpResponse("You're voting on poll %s." % poll_id) 
```

我在“投票文件夹”下的 urls.py

```
from django.conf.urls.defaults import patterns, include, url
from django.views.generic import DetailView, ListView
from polls.models import Poll

urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset = Poll.objects.order_by('-pub_date')[:5],
            context_object_name = 'latest_poll_list',
            template_name = 'polls/index.html'), name='poll_lists'),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            model = Poll,
            template_name = 'polls/detail.html'), name='poll_details'),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            model = Poll,
            template_name = 'polls/results.html'), name = 'poll_results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'polls.views.vote'),
) 
```

在我的 urls.py 下，我使用了通用视图。

问题是：我将如何将登录要求放在民意调查应用程序的“索引”下。以便用户在查看可用投票之前先登录。

当前是：我在views.py和方法vote（）下使用了需要登录，投票后需要登录。

任何人都可以帮助我吗？

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-23T05:22:24.183

**第一种方法**

在 urls.py 中：

```
urlpatterns = patterns('',
    url(r'^$',
        login_required(ListView.as_view(
            queryset = Poll.objects.order_by('-pub_date')[:5],
            context_object_name = 'latest_poll_list',
            template_name = 'polls/index.html'), name='poll_lists')),
) 
```

**第二种方法**

在views.py中：

```
class IndexView(ListView):
    queryset = Poll.objects.order_by('-pub_date')[:5]
    context_object_name = 'latest_poll_list'
    template_name = 'polls/index.html'

    @method_decorator(login_required)
    def dispatch(self, request, *args, **kwargs):        
        return super(IndexView, self).dispatch(request, *args, **kwargs) 
```

然后在 urls.py

```
urlpatterns = patterns('',
        url(r'^$',
            IndexView.as_view(), name='poll_lists'),
    ) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-12-20T09:08:48.850

只是提供一个可能更新的答案，

我会将它们移动到视图文件并使用[LoginRequiredMixin](https://docs.djangoproject.com/en/2.1/topics/auth/default/#django.contrib.auth.mixins.LoginRequiredMixin)，

```
from django.views.generic import (
    ListView,
    DetailView
)
from django.contrib.auth.mixins import LoginRequiredMixin

class PollsListView(LoginRequiredMixin, ListView):
    model = Poll
    template_name = 'polls/index.html' 
```

# android - 在 tabBar 中显示非子视图 ... android

> ID：10275165
> 
> 赞同：0
> 
> 时间：2012-04-23T05:19:13.453
> 
> 标签：android, view, android-tabhost

我在标签栏中有 3 个标签。在点击栏的顶部，我有一个按钮。我希望能够按下按钮并更改视图，而无需删除标签栏。我想设置清除标签栏的当前标签选择，并希望显示另一个活动，而不隐藏标签栏。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:58:51.863

在不知道您的代码到底是什么样子的情况下，除了一些听起来像是它们可能会帮助您的方法的链接之外，我们无法为您提供太多帮助...

看看 ViewGroup 类的这些方法：

1.  [ViewGroup.RemoveView()](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)
2.  [ViewGroup.RemoveViewAt()](http://developer.android.com/reference/android/view/ViewGroup.html#removeViewAt%28int%29)

# javascript - 访问网格数据存储的加载函数内的 sortInfo 属性

> ID：10275167
> 
> 赞同：1
> 
> 时间：2012-04-23T05:19:24.743
> 
> 标签：extjs, javascript, extjs

我在我的一个项目中使用[extjs](/questions/tagged/extjs "显示标记为“extjs”的问题")。我正在使用 Extjs 网格。我必须访问`sortInfo`我`load`的`Ext.data.store`.

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:24:43.737

尝试这个

```
listeners : {
                load : function(store,records,options){
                            console.log(store.sortInfo);
                        }   
           } 
```

参考：[Ext.data.Store.load](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-event-load)

# java - 无法使用 jax ws 在我的 Web 服务客户端上更改肥皂消息前缀

> ID：10275169
> 
> 赞同：0
> 
> 时间：2012-04-23T05:19:44.480
> 
> 标签：java, web-services, wsdl, jax-ws

我刚开始使用 Web 服务，我有一个客户端应用程序连接到另一个 wsdl Web 服务，它使用与我不同的前缀。我用处理程序检查了它以打印出肥皂原始消息。他们使用“S”和我的“env”。我使用了 Netbeans 6.5 中的 JAX WS 2.1。

我不确定，但我认为这种差异会导致失败。这是我的堆栈跟踪：

```
 14:01:56,817 ERROR [CommonClient] Exception caught while (preparing for) performing the invocation: 
javax.xml.ws.soap.SOAPFaultException: Couldn't create SOAP message due to exception: XML reader error: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS.getSOAPFaultException(SOAPFaultHelperJAXWS.java:84)
    at org.jboss.ws.core.jaxws.binding.SOAP11BindingJAXWS.throwFaultException(SOAP11BindingJAXWS.java:107)
    at org.jboss.ws.core.CommonSOAPBinding.unbindResponseMessage(CommonSOAPBinding.java:579)
    at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:381)
    at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:290)
    at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:170)
    at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:150)
    at $Proxy1792.doService(Unknown Source)
    at com.pckg.web.services.MyWebServiceImpl.service(MyWebServiceImpl.java:143)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662) 
```

我试图通过一些我发现的使用处理程序的方法来更改我的前缀肥皂消息。不幸的是，我的肥皂处理程序不工作，或者我可能错过了什么。

这是我的处理程序的样子：

```
public class CustomSOAPHandler implements SOAPHandler<SOAPMessageContext> {
@Override
public Set<QName> getHeaders() {
    return null;
}
@Override
public void close(MessageContext context) {
}
@Override
public boolean handleFault(SOAPMessageContext context) {
    WebUtils.log("CustomSOAPHandler.handleFault");
    try {
        boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (outbound) {
            WebUtils.log("Direction : outbound (handleFault)");
        } else {
            WebUtils.log("Direction : inbound (handleFault)");
        }
        if (!outbound) {
            try {
                SOAPMessage msg = ((SOAPMessageContext) context).getMessage();
                logToSystemOut(context);
                if (context.getMessage().getSOAPBody().getFault() != null) {
                    String detailName = null;
                    try {
                        detailName = context.getMessage().getSOAPBody().getFault().getDetail().getFirstChild().getLocalName();
                        WebUtils.log("detailName : " + detailName);
                    } catch (Exception e) {
                    }
                }
            } catch (SOAPException e) {
            WebUtils.log("SOAP Exception : " + e);
                e.printStackTrace();
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        WebUtils.log("Exception in handler: " + e);
    }
    return true;
}
@Override
public boolean handleMessage(SOAPMessageContext context) {
    WebUtils.log("CustomSOAPHandler.handleMessage");
    try {
        SOAPMessage message = context.getMessage();
        SOAPPart soapPart = message.getSOAPPart();
        SOAPEnvelope envelope = soapPart.getEnvelope();
        SOAPHeader header = message.getSOAPHeader();
        SOAPBody body = message.getSOAPBody();
        WebUtils.log("Configure SOAP Message prefix from [" + envelope.getPrefix() + "] into [S]");
        envelope.setPrefix("S");
        header.setPrefix("S");
        body.setPrefix("S");
        context.setMessage(message);
        Boolean outboundProperty = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (outboundProperty.booleanValue()) {
            // outbound
            WebUtils.log("Direction : outbound (handleMessage)");
            logToSystemOut(context);
        } else {
            // inbound
            WebUtils.log("Direction : inbound (handleMessage)");
            logToSystemOut(context);
        }
    } catch (Exception e) {
        WebUtils.log("Exception in handler: " + e);
    }
    return true;
}
private void logToSystemOut(SOAPMessageContext smc) {
    SOAPMessage msg = smc.getMessage();
    if (msg == null) {
        WebUtils.log("SOAP Message is null");
        return;
    }
    WebUtils.log("");
    WebUtils.log("--------------------");
    WebUtils.log("DUMP OF SOAP MESSAGE");
    WebUtils.log("--------------------");
    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        msg.writeTo(baos);
        WebUtils.log(baos.toString(getMessageEncoding(msg)));
    } catch (Exception e) {
        e.printStackTrace();
    }
}
private String getMessageEncoding(SOAPMessage msg) throws SOAPException {
    String encoding = "utf-8";
    if (msg.getProperty(SOAPMessage.CHARACTER_SET_ENCODING) != null) {
        encoding = msg.getProperty(SOAPMessage.CHARACTER_SET_ENCODING).toString();
    }
    return encoding;
} 
```

}

在我的课堂上，创建服务对象后，我使用以下代码：

```
com.gateway.ws.WebServiceCustomService service = new 
com.gateway.ws.WebServiceCustomService();
    service.setHandlerResolver(new HandlerResolver() {
                    @Override
                    public List<Handler> getHandlerChain(PortInfo portInfo) {
                        List<Handler> handlerChain = new ArrayList<Handler>();
                        Handler soapHandler = new CustomSOAPHandler();
                        handlerChain.add(soapHandler);
                        return handlerChain;
                    }
                });
com.gateway.ws.WebServicePort port = service.getWebServicePort();
            BindingProvider bindingProvider = (BindingProvider) port;
Binding binding = bindingProvider.getBinding();
            List handlerList = binding.getHandlerChain();
            System.out.println("LIST OF HANDLER " + handlerList.size()); 
```

正如我之前所说，我检查了我的日志并且前缀从未更改为“S”

```
11:46:06,145 INFO  [STDOUT] LIST OF HANDLER 1
11:46:06,147 INFO  [STDOUT] SOAPHandler.handleMessage
11:46:06,148 INFO  [STDOUT] Configure SOAP Message prefix from [env] into [S]
11:46:06,149 INFO  [STDOUT] Outgoing message:
11:46:06,149 INFO  [STDOUT] --------------------
11:46:06,149 INFO  [STDOUT] DUMP OF SOAP MESSAGE
11:46:06,149 INFO  [STDOUT] --------------------
11:46:06,155 INFO  [STDOUT] <env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'><env:Header></env:Header><env:Body><ns1:doService xmlns:ns1="http://ws.gateway.xl/"><request>content</request></ns1:doService></env:Body></env:Envelope> 
```

任何建议都会非常有帮助。谢谢你。

# jquery - .html() 中的 Jquery"

> ID：10275172
> 
> 赞同：2
> 
> 时间：2012-04-23T05:20:18.323
> 
> 标签：jquery

我对函数 html() 有问题，来自 JSON 的对象的接收，data.text 类型，其中包含带引号的文本并以这种方式打印：`obj.html(data.text)`

字符串按原样打印，不转换`&quot;`引号`"`，我需要打印引号符号。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:26:09.043

正如你可以通过[这个 fiddle](http://jsfiddle.net/ZUs6c/)看出的那样，`.html('&quot;')`确实会产生双引号。确保您没有`&amp;quot;`从服务器返回类似的东西；你可能在某种程度上过度逃避。

# asp.net - 我们如何才能暂时关闭正在运行的网站并给出消息“此网站暂时不可用”

> ID：10275173
> 
> 赞同：0
> 
> 时间：2012-04-23T05:20:36.730
> 
> 标签：asp.net

我们如何暂时关闭正在运行的网站并给出一条消息“该网站暂时不可用”，实际上我想赋予管理员权力，他可以暂时打开/关闭网站...根据我的需要，我不想添加 web_offline .htm 页面。我只是通过按钮控制来完成，即活动网站和非活动网站（动态方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:36:04.227

我认为根据您的要求执行此操作的最简单方法是创建一个**app_offline.html**，并将一个简单的重命名方法连接到您的管理员开/关按钮。当管理员单击*On*时，将文件重命名为**app_offline_.html**或其他名称，反之亦然。这将是一个简单的实现，出于安全原因，您可以授予 IIS 工作进程访问该文件的权限。

# c# - ASP.Net C# 中的数据网格视图超链接

> ID：10275193
> 
> 赞同：0
> 
> 时间：2012-04-23T05:23:22.257
> 
> 标签：c#, asp.net, datagridview

嗨，我正在使用 DataGridView，通过映射我在 Hyperlinkfield 中给出的数据库中的 URL（例如：datagridview 中将显示 10-20 个链接）如果特定人单击特定链接，则它必须重定向到该链接通过增加该特定 URL 的数据库中的 Count 列来获取特定 URL。

注意：我在模板设计模式下使用 datagridview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:27:29.800

使用 CommandArgument 并在 Gridview onrowcommand 事件中做你的事情。

```
<asp:GridView ID="GridView1" OnRowCommand="GridView1_RowCommand" runat="server">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:LinkButton ID="btnUpdate" runat="server" CommandArgument='<%#Eval("LinkID")%>' CommandName="btnUpdate" Text='<%#Eval("LinkDisplayText")%>'>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>

protected void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="btnUpdate")
    {
      int index = Convert.ToInt32(e.CommandArgument);
      //based on LinkID get the current click count from database.
      int icount;
      //increment the count
      //update the database once again and get the link as well.
      //redirect to the link
      Response.Redirect("");
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:05:07.993

您可以在行命令事件中执行此操作

使用您希望提供的网址创建动态点击

# c# - IOC/DI 违反接口定义

> ID：10275197
> 
> 赞同：0
> 
> 时间：2012-04-23T05:23:43.757
> 
> 标签：c#, interface, inversion-of-control

我已经阅读了有关依赖注入的 IOC/DI。它说为我们希望注入的每个类创建接口。它是否违反了接口的定义（实现我们要在类中强制执行行为的地方）。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:55:31.937

我认为您的主要困惑在于，在 DI/IoC 场景中，我们没有要注入的*类，而是要注入的**服务*。假设我有一`Logger`堂课。`Logger`我要注入的不是类本身，而是`ILogger`接口描述的一组日志服务。如果我不使用 DI 或 IoC，我将在每个课程中都有一个位置`ILogger _logger = new Logger()`，或者也许`ILogger _logger = Logger.Instance`，这两者都将我的代码耦合到`ILogger`接口的特定实例。但是对于 DI/IoC，我把这一步留给了框架，不用在意我的业务逻辑类中的具体实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:54:18.627

> > 它不违反接口的定义（实现我们想要在类中强制行为的地方）吗？

不，它没有。

您正在创建界面这一事实意味着您正在定义行为。您是否要使用 DI 来实现您的实现并不那么重要。

# android - 小部件内的Android LIstview

> ID：10275202
> 
> 赞同：0
> 
> 时间：2012-04-23T05:24:08.560
> 
> 标签：android, listview, widget

我在需要使用列表视图的 android 中创建一个小部件。是否可以在小部件中放置列表视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:17:42.020

不久前我使用了这个[https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget](https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget)

向 commonsGuy 学习的代码 - 非常好的基础！

# android - 有没有办法将 JSONP 格式转换为 JSON？

> ID：10275205
> 
> 赞同：16
> 
> 时间：2012-04-23T05:24:46.363
> 
> 标签：android, jsonp

我正在尝试解析来自服务器的响应，我是这个主题的新手，不幸的是它是 JSONP 格式的。我不知道如何解析 JSONP 格式，当我尝试使用 JSON Parser 时它返回空值。任何人都可以帮我做这件事...

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-23T05:30:46.927

[JSONP](http://en.wikipedia.org/wiki/JSONP)只是封装在 JavaScript 函数调用中的 JSON。例如，类似：

```
callback({"status":"success", "someVar":1}); 
```

所以你有几个选择。如果您使用的是，`WebView`您可以定义一个`callback`在 JavaScript 中调用的函数，然后只调用`eval()`JSONP 数据。这将调用该`callback`函数，将解析后的 JSON 对象传递给它（`eval()`为您进行解析）。

或者，如果您的 Java 代码中有 JSONP 字符串，最简单的选择可能是提取 JSON 子字符串，例如：

```
String json = jsonp.substring(jsonp.indexOf("(") + 1, jsonp.lastIndexOf(")")); 
```

这将去掉`callback(`and `);`，只剩下`{"status":"success", "someVar":1}`，然后应该使用任何标准 JSON 解析器进行解析。

# installshield - 品牌 InstallShield 2010

> ID：10275217
> 
> 赞同：0
> 
> 时间：2012-04-23T05:25:58.420
> 
> 标签：installshield, installscript-msi

我已经使用 InstallShield2010 创建了一个基本的 MSI 项目。现在，我想要相同的项目来建立不同品牌的设置。每个品牌都有一些与其他品牌不同的信息，例如产品名称、guid 等。在构建项目时，我可以提供一个文件路径，InstallShield 可以从中选择这些参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:52:45.100

我认为您想使用 InstallShield 自动化接口：

> 对于高级开发人员，InstallShield 公开了一个 COM 接口，允许您从程序（例如 Visual Basic 可执行文件）或脚本（例如 Windows Scripting Host 中的 VBScript 文件）执行许多相同的任务。通过调用方法、设置属性、访问集合等，通过自动化界面，您可以打开一个项目并以与在 InstallShield 界面中相同的方式修改其功能和组件数据。

使用这个“自动化接口”，您可以编写构建脚本以在构建安装程序的每个版本时动态更改您感兴趣的变量（例如产品名称、guid 等）。

请参阅： [自动化接口](http://kb.flexerasoftware.com/doc/Helpnet/installshield12helplib/IHelpAutomation.htm)

# sql - 存储过程、sysname 和 quotname()

> ID：10275218
> 
> 赞同：0
> 
> 时间：2012-04-23T05:26:06.530
> 
> 标签：sql, sql-server

这方面的新...

提供者（我假设是他们的代码）设置了一个存储过程来修改用户的 SQL 服务器密码。他们使用 sysname 类型来传递信息：OLD、NEW 和 LOGINAME。

当他们执行更改密码的命令时，他们使用 quotename() 将传递给函数的文本括起来。

在此之前，在检查用户名是否存在时，他们通过 LOGINAME 而不进行任何格式控制。

这在过去不是问题，但由于我们最近将用户名策略从名字首字母+姓氏 (FSURNAME) 更改为名字(点)姓氏 (FIRST.SURNAME)，因此例程崩溃了。我认为这是因为在传递给 see-if-they-exist 函数时缺少对用户名的 quotename() 样式控制。

代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER procedure [sys].[sp_password]
  @old sysname = NULL,        -- the old (current) password
  @new sysname,               -- the new password
  @loginame sysname = NULL    -- user to change password on
as
-- SETUP RUNTIME OPTIONS / DECLARE VARIABLES --
set nocount on
declare @exec_stmt nvarchar(4000)

-- RESOLVE LOGIN NAME
if @loginame is null
    select @loginame = suser_sname()

if @new is null
    select @new = ''

-- DISALLOW USER TRANSACTION --
set implicit_transactions off
IF (@@trancount > 0)
begin
    raiserror(15002,-1,-1,'sys.sp_password')
    return (1)
end

-- CHECK IT'S A SQL LOGIN --
if not exists (select * from master.dbo.syslogins where
               loginname = @loginame and isntname = 0)
begin
    raiserror(15007,-1,-1,@loginame)
    return (1)
end

if @old is null
    set @exec_stmt = 'alter login ' + quotename(@loginame) +
        ' with password = ' + quotename(@new, '''')
else
    set @exec_stmt = 'alter login ' + quotename(@loginame) +
        ' with password = ' + quotename(@new, '''') + ' old_password = ' + quotename(@old, '''')

exec (@exec_stmt)   

if @@error <> 0
    return (1)

-- RETURN SUCCESS --
return  (0) -- sp_password 
```

我强烈怀疑这里的代码：

```
if not exists (select * from master.dbo.syslogins where
               loginname = @loginame and isntname = 0) 
```

导致问题，据我了解，代码将 FIRST.LAST 传递给检查例程，然后将其解释为对象而不是文本。

是否可以做同样的事情但强制发送文本？类似于代码中其他地方使用的 quotename() 函数？

* * *

编辑：

执行此存储过程的调用：**sp_password NULL、abcdefgh、FIRST.LAST**

收到错误：**消息 102，级别 15，状态 1，第 1 行 '.' 附近的语法不正确。**

当通过添加括号（**sp_password NULL, abcdefgh, [FIRST.LAST]**）手动执行时，它当然可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T06:14:34.703

这是由于 Sql Server 如何处理 sysname 类型的参数值。考虑一下。

```
create procedure TakeSysname
    @Sysname sysname
as
    --does nothing;
go

--This works.
exec TakeSysname JohnDoe;
print N'Worked';
go

--This works.
exec TakeSysname 'John.Doe';
print N'Worked'
go

--This does not.
exec TakeSysname John.Doe;
print N'Worked';
go 
```

不过，我仍在寻找一些好的解释。

# clojure - Clojure、defn、defn-、公共/私有、默认值

> ID：10275220
> 
> 赞同：22
> 
> 时间：2012-04-23T05:26:16.003
> 
> 标签：clojure

*   `defn`=公开
*   `defn-`=私人

也许我的 Clojure 编码风格不好——但我发现我在 Clojure 中编写的大多数函数都是我不想公开的小型辅助函数。

是否有一些配置选项，其中：

*   `defn`= 默认情况下是私有的，
*   为了公开某些事情，我必须做`defn+`什么？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T05:57:18.110

不，那里没有。

另一种可能对您有用或可能不起作用的方法是声明一个`foo.bar.internal`命名空间，其中包含您的命名空间使用的所有私有助手`foo.bar`。当您想在宏扩展中使用私有函数时，这比私有函数声明具有优势。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-26T10:03:36.470

Clojure 作为 Lisp 的美妙之处在于，您可以构建和调整该语言以满足您的需求。我强烈推荐你阅读[Paul Graham 的 On Lisp](http://www.paulgraham.com/onlisptext.html)。他现在免费赠送他的书。

关于您对 defn+ vs defn vs defn- 的建议。在我看来，这听起来像是编写自己的宏的好案例。 `defn`是一个函数，`defn-`也是一个宏。您可以根据需要简单地重新定义它们，或者将它们包装在您自己的中。

下面是一个实现建议，主要基于 Clojure 自己的实现——包括一个简单的实用程序和一个测试。

```
(defmacro defn+
    "same as Clojure's defn, yielding public def"
    [name & decls]
    (list* `defn (with-meta name (assoc (meta name) :public true)) decls))

(defmacro defn
    "same as Clojure's defn-, yielding non-public def"
    [name & decls]
    (list* `defn (with-meta name (assoc (meta name) :private true)) decls))

(defn mac1
    "same as `macroexpand-1`"
    [form]
    (. clojure.lang.Compiler (macroexpand1 form)))

(let [  ex1 (mac1 '(defn f1 [] (println "Hello me.")))
        ex2 (mac1 '(defn+ f2 [] (println "Hello World!"))) ]
    (defn f1 [] (println "Hello me."))
    (defn+ f2 [] (println "Hello World!"))
    (prn ex1) (prn (meta #'f1)) (f1)
    (prn ex2) (prn (meta #'f2)) (f2) ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T06:02:09.960

如果“辅助函数”很可能只使用一次，您可以选择将它们设为较大函数的本地函数，或者将它们编写为匿名函数。请参阅`letfn`：[http](http://clojuredocs.org/clojure_core/clojure.core/letfn) ://clojuredocs.org/clojure_core/clojure.core/letfn和[http://clojuredocs.org/clojure_core/clojure.core/fn](http://clojuredocs.org/clojure_core/clojure.core/fn)。

我几乎从不使用`letfn`自己。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-06T12:40:51.817

正如@kotarak 所说，没有办法（据我所知）这样做，也不是可取的。

这就是我不喜欢的原因`defn-`：

我发现在使用各种 Clojure 库时，有时我需要稍微修改一个函数以更好地满足我的特定需求。它通常很小，仅在我的特定情况下才有意义。通常这只是一个或两个字符。

但是当这个函数重用内部私有函数时，修改起来就更难了。我必须复制粘贴所有这些私人功能。

我知道这是程序员说“这可能会在没有通知的情况下改变”的一种方式。

无论如何，我想要相反的约定：

*   总是使用`defn`，这让一切都公开
*   使用`defn+`（尚不存在）向程序员指定哪些函数是他应该使用的公共 API 的一部分。`defn+`应该和`defn`其他没有什么不同。

另请注意，无论如何都可以[访问私有函数：](http://christophermaier.name/blog/2011/04/30/not-so-private-clojure-functions)

```
;; in namespace user
user> (defn- secret []
        "TOP SECRET")

;; from another namespace
(#'user/secret) ;;=> "TOP SECRET" 
```

# c++ - STL 映射，使用迭代器和类的指针

> ID：10275222
> 
> 赞同：0
> 
> 时间：2012-04-23T05:26:29.877
> 
> 标签：c++, map, stl, iterator

我无法使用迭代器访问地图内的数据。我想使用迭代器返回所有插入到地图中的值。但是，当我使用迭代器时，它不承认它已经进入的类实例中的任何成员。

```
int main()
{
    ifstream inputFile;
    int numberOfVertices;
    char filename[30];
    string tmp;

    //the class the holds the graph
    map<string, MapVertex*> mapGraph;

    //input the filename
    cout << "Input the filename of the graph: ";
    cin >> filename;
    inputFile.open(filename);

    if (inputFile.good())
    {
        inputFile >> numberOfVertices;
        inputFile.ignore();

        for (int count = 0; count < numberOfVertices; count++)
        {
            getline(inputFile, tmp);
            cout << "COUNT: " << count << "  VALUE: " << tmp << endl;

            MapVertex tmpVert;
            tmpVert.setText(tmp);
            mapGraph[tmp]=&tmpVert;
        }

        string a;
        string connectTo[2];

        while (!inputFile.eof())
        {

            //connectTo[0] and connectTo[1] are two strings that are behaving as keys

            MapVertex* pointTo;
            pointTo = mapGraph[connectTo[0]];
            pointTo->addNeighbor(mapGraph[connectTo[1]]);
            //map.find(connectTo[0]).addNeighbor(map.find(connectTo[1]));
            //cout << connectTo[0] << "," << connectTo[1] << endl;
        }

        map<string,MapVertex*>::iterator it;
        for (it=mapGraph.begin(); it!=mapGraph.end(); it++)
        {
            cout << it->getText() << endl;

        }
    }

    return 0;
} 
```

编译器输出：

```
\lab12\main.cpp||In function `int main()':|
\lab12\main.cpp|69|error: 'struct std::pair<const std::string, MapVertex*>'
                           has no member named 'getText'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

我的 MapVertex 类中有一个名为 getText() 的访问成员，它返回其中的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T05:30:18.780

要修复编译器错误，您需要`it->second->getText()`按照. 但是您的代码中还有其他问题。在插入地图时，您正在将局部变量的地址插入其中。当您尝试使用循环迭代地图时，此地址将无效。我建议您声明地图，以便在将 MyVertex 的*副本*插入地图时插入地图。`*iterator``pair<string, MapVertex*>``for``std::map<string, MyVertex>`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:30:57.187

`tmpVert`是问题所在。看，你在堆栈上创建它。`for`它在每个循环结束时被销毁。

它被摧毁了。

因此，您`mapGraph`持有指向不存在的对象的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T05:32:53.223

```
'struct std::pair' has no member named 'getText' 
```

意味着迭代器返回的是std::pair，而不是你的对象；pair的第一个元素是key，第二个是value，所以需要先获取value，然后调用方法：`it->second->method()`。*

# php - PHP 和简码中的 Wordpress PHP

> ID：10275223
> 
> 赞同：0
> 
> 时间：2012-04-23T05:26:36.797
> 
> 标签：php, wordpress, shortcode

我正在使用 Cart66 插件构建一个 wordpress 电子商务模板。在 php 模板页面中使用 Cart66 简码，我想在简码中生成 Post ID。有人可以帮忙并告诉我这是否可能。这是我正在使用的代码。

`<?php echo do_shortcode("[add_to_cart item=\". the_ID() .\" quantity=\"user:1\"]"); ?>`

此代码将位于 loop-single.php 及以上

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:06:41.803

@silent 几乎拥有它，但它应该是`get_the_ID()`而不是`the_ID()`因为后者呼应了它，所以尝试：

```
<?php echo do_shortcode("[add_to_cart item=\"". get_the_ID() ."\" quantity=\"user:1\"]"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:47:02.763

更简单的正确答案：

```
<?php echo do_shortcode('[add_to_cart item="'. get_the_ID() .'" quantity="user:1"]');?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:29:12.113

正确的行应该是：

```
<?php echo do_shortcode("[add_to_cart item=\"". the_ID() ."\" quantity=\"user:1\"]"); ?> 
```

# android - SurfaceView 在 droidreader 中返回黑屏

> ID：10275225
> 
> 赞同：1
> 
> 时间：2012-04-23T05:26:44.927
> 
> 标签：android, pdf, screenshot

我已经尝试了很多，甚至搜索了很多，但我没有找到通过在**表面视图** 上获取缓存视图得到的**黑屏**解决方案。如果有任何其他方法可以捕获屏幕，那么让我知道这一点..如果我使用另一个控件并获取该控件的可绘制缓存，它也会返回null ..这是我用来获取屏幕图像的代码......

 **```
try {
    // Button btn = new Button(mActivity.getApplicationContext());
    view.buildDrawingCache();
    view.setDrawingCacheEnabled(true);
    Bitmap b = view.getDrawingCache();
    b.compress(CompressFormat.JPEG, 100, new FileOutputStream(
                    "/mnt/sdcard/documents/" + new Date().getTime() + ".JPEG"));
} catch (Exception e) {
    e.printStackTrace();
} 
```

我在表面视图的 touch_up 动作中使用了它.....

**编辑：**

```
public class DroidReaderActivity extends Activity {
private static final boolean LOG = false;

private static final int REQUEST_CODE_PICK_FILE = 1;
private static final int REQUEST_CODE_OPTION_DIALOG = 2;

private static final int DIALOG_GET_PASSWORD = 1;
private static final int DIALOG_ABOUT = 2;
private static final int DIALOG_GOTO_PAGE = 3;
private static final int DIALOG_WELCOME = 4;
private static final int DIALOG_ENTER_ZOOM = 5;

private static final String PREFERENCE_EULA_ACCEPTED = "eula.accepted";
private static final String PREFERENCES_EULA = "eula";

protected DroidReaderView mReaderView = null;
protected DroidReaderDocument mDocument = null;

protected Menu m_ZoomMenu;

FrameLayout fl;

private String mFilename;
private String mTemporaryFilename;
private String mPassword;

private int mPageNo;

private SQLiteDatabase db;

static DatabaseConnectionAPI db_api;

private boolean mDocumentIsOpen = false;
private boolean mLoadedDocument = false;
private boolean mWelcomeShown = false;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case REQUEST_CODE_PICK_FILE:
        if (resultCode == RESULT_OK && data != null) {
            // Theoretically there could be a case where OnCreate() is called
            // again with the intent that was originally used to open the app,
            // which would revert to a previous document. Use setIntent
            // to update the intent that will be supplied back to OnCreate().
            setIntent(data);
            mTemporaryFilename = data.getDataString();
            if (mTemporaryFilename != null) {
                if (mTemporaryFilename.startsWith("file://")) {
                    mTemporaryFilename = mTemporaryFilename.substring(7);
                }
                mPassword = "";
                openDocumentWithDecodeAndLookup();
            }
        }
        break;
    case REQUEST_CODE_OPTION_DIALOG:
        readPreferences();
        tryLoadLastFile();
        break;
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("ONCREATE");

    db_api = new DatabaseConnectionAPI(this);
    try {
        db_api.createDataBase();
        db_api.openDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // first, show the welcome if it hasn't been shown already:
    final SharedPreferences preferences = getSharedPreferences(PREFERENCES_EULA, Context.MODE_PRIVATE);
    if (!preferences.getBoolean(PREFERENCE_EULA_ACCEPTED, false)) {
        mWelcomeShown = true;
        preferences.edit().putBoolean(PREFERENCE_EULA_ACCEPTED, true).commit();
        showDialog(DIALOG_WELCOME);
    }

    if (mDocument == null)
        mDocument = new DroidReaderDocument();

    // Initialize the PdfRender engine
    PdfRender.setFontProvider(new DroidReaderFontProvider(this));

    // then build our layout. it's so simple that we don't use
    // XML for now.
    fl = new FrameLayout(this);

    mReaderView = new DroidReaderView(this, null, mDocument);

    // add the viewing area and the navigation
    fl.addView(mReaderView);
    setContentView(fl);

    readPreferences();
    if (savedInstanceState != null) {
        mFilename = savedInstanceState.getString("filename");
        if ((new File(mFilename)).exists()) {
            mPassword = savedInstanceState.getString("password");
            mDocument.mZoom = savedInstanceState.getFloat("zoom");
            mDocument.mRotation = savedInstanceState.getInt("rotation");
            mPageNo = savedInstanceState.getInt("page");
            mDocument.mMarginOffsetX = savedInstanceState.getInt("marginOffsetX");
            mDocument.mMarginOffsetY = savedInstanceState.getInt("marginOffsetY");
            mDocument.mContentFitMode = savedInstanceState.getInt("contentFitMode");
            openDocument();
            mLoadedDocument = true;
        }
        savedInstanceState.clear();
    }

        Timer mTimer = new Timer();

        mTimer.schedule(new TimerTask() {

            @Override
            public void run() {
                try {
                    Bitmap saveBitmap = Bitmap.createBitmap(fl.getWidth(), fl.getHeight(), Bitmap.Config.ARGB_8888);
                    saveBitmap.compress(CompressFormat.JPEG, 100,
                            new FileOutputStream("/mnt/sdcard/documents/" + new Date().getTime() + ".JPEG"));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }, 4000);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if ((mDocument != null) && mDocument.isPageLoaded()) {
        outState.putFloat("zoom", mDocument.mZoom);
        outState.putInt("rotation", mDocument.mRotation);
        outState.putInt("page", mDocument.mPage.no);
        outState.putInt("offsetX", mDocument.mOffsetX);
        outState.putInt("offsetY", mDocument.mOffsetY);
        outState.putInt("marginOffsetX", mDocument.mMarginOffsetX);
        outState.putInt("marginOffsetY", mDocument.mMarginOffsetY);
        outState.putInt("contentFitMode", mDocument.mContentFitMode);
        outState.putString("password", mPassword);
        outState.putString("filename", mFilename);
        mDocument.closeDocument();
    }
}

public void onTap(float X, float Y) {
    float left, right, top, bottom;
    float width = mDocument.mDisplaySizeX;
    float height = mDocument.mDisplaySizeY;
    boolean prev = false;
    boolean next = false;

    if (mDocumentIsOpen) {
        left = width * (float) 0.25;
        right = width * (float) 0.75;
        top = height * (float) 0.25;
        bottom = height * (float) 0.75;

        if ((X < left) && (Y < top))
            prev = true;
        if ((X < left) && (Y > bottom))
            next = true;
        if ((X > right) && (Y < top))
            prev = true;
        if ((X > right) && (Y > bottom))
            next = true;
        if ((X > left) && (X < right) && (Y > bottom)) {
            Log.d("DroidReaderMetrics", String.format("Zoom = %5.2f%%", mDocument.mZoom * 100.0));
            Log.d("DroidReaderMetrics", String.format("Page size = (%2.0f,%2.0f)", mDocument.mPage.mMediabox[2]
                            - mDocument.mPage.mMediabox[0], mDocument.mPage.mMediabox[3] - mDocument.mPage.mMediabox[1]));
            Log.d("DroidReaderMetrics", String.format(
                    "Display size = (%d,%d)", mDocument.mDisplaySizeX, mDocument.mDisplaySizeY));
            Log.d("DroidReaderMetrics", String.format("DPI = (%d, %d)", mDocument.mDpiX, mDocument.mDpiY));
            Log.d("DroidReaderMetrics", String.format("Content size = (%2.0f,%2.0f)",
                    mDocument.mPage.mContentbox[2] - mDocument.mPage.mContentbox[0],
                    mDocument.mPage.mContentbox[3] - mDocument.mPage.mContentbox[1]));
            Log.d("DroidReaderMetrics", String.format("Content offset = (%2.0f,%2.0f)",
                    mDocument.mPage.mContentbox[0], mDocument.mPage.mContentbox[1]));
            Log.d("DroidReaderMetrics", String.format(
                    "Document offset = (%d,%d)", mDocument.mOffsetX, mDocument.mOffsetY));
        }
        if (next) {
            if (mDocument.havePage(1, true))
                openPage(1, true);
        } else if (prev) {
            if (mDocument.havePage(-1, true))
                openPage(-1, true);
        }
    }
}

protected void openDocument() {
    // Store the view details for the previous document and close it.
    if (mDocumentIsOpen) {
        mDocument.closeDocument();
        mDocumentIsOpen = false;
    }
    try {
        this.setTitle(mFilename);
        mDocument.open(mFilename, mPassword, mPageNo);
        openPage(0, true);
        mDocumentIsOpen = true;
    } catch (PasswordNeededException e) {
        showDialog(DIALOG_GET_PASSWORD);
    } catch (WrongPasswordException e) {
        Toast.makeText(this, R.string.error_wrong_password, Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        Toast.makeText(this, R.string.error_opening_document, Toast.LENGTH_LONG).show();
    }
}

protected void openDocumentWithDecodeAndLookup() {
    try {
        mTemporaryFilename = URLDecoder.decode(mTemporaryFilename, "utf-8");

        // Do some sanity checks on the supplied filename.
        File f = new File(mTemporaryFilename);

        if ((f.exists()) && (f.isFile()) && (f.canRead())) {
            mFilename = mTemporaryFilename;
            openDocumentWithLookup();
        } else {
            Toast.makeText(this, R.string.error_file_open_failed, Toast.LENGTH_LONG).show();
        }
    } catch (Exception e) {
        Toast.makeText(this, R.string.error_opening_document, Toast.LENGTH_LONG).show();
    }
}

protected void openDocumentWithLookup() {
    readOrWriteDB(false);
    openDocument();
}

protected void openPage(int no, boolean isRelative) {
    try {
        if (!(no == 0 && isRelative))
            mDocument.openPage(no, isRelative);
        this.setTitle(new File(mFilename).getName()
                + String.format(" (%d/%d)", mDocument.mPage.no, mDocument.mDocument.pagecount));
        mPageNo = mDocument.mPage.no;
    } catch (PageLoadException e) {
    }
}

private void readPreferences() {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    if (prefs.getString("zoom_type", "0").equals("0")) {
        float zoom = Float.parseFloat(prefs.getString("zoom_percent", "50"));
        if ((1 <= zoom) && (1000 >= zoom)) {
            mDocument.setZoom(zoom / 100, false);
        }
    } else {
        mDocument.setZoom(Float.parseFloat(prefs.getString("zoom_type", "0")), false);
    }

    if (prefs.getBoolean("dpi_auto", true)) {
        // read the display's DPI
        mDocument.setDpi((int) metrics.xdpi, (int) metrics.ydpi);
    } else {
        int dpi = Integer.parseInt(prefs.getString("dpi_manual", "160"));
        if ((dpi < 1) || (dpi > 4096))
            dpi = 160; // sanity check fallback
        mDocument.setDpi(dpi, dpi);
    }

    if (prefs.getBoolean("tilesize_by_factor", true)) {
        // set the tile size for rendering by factor
        Float factor = Float.parseFloat(prefs.getString("tilesize_factor", "1.5"));
        mDocument.setTileMax((int) (metrics.widthPixels * factor), (int) (metrics.heightPixels * factor));
    } else {
        int tilesize_x = Integer.parseInt(prefs.getString("tilesize_x", "640"));
        int tilesize_y = Integer.parseInt(prefs.getString("tilesize_x", "480"));
        if (metrics.widthPixels < metrics.heightPixels) {
            mDocument.setTileMax(tilesize_x, tilesize_y);
        } else {
            mDocument.setTileMax(tilesize_y, tilesize_x);
        }
    }

    boolean invert = prefs.getBoolean("invert_display", false);
    mDocument.setDisplayInvert(invert);
    mReaderView.setDisplayInvert(invert);

    if (prefs.getBoolean("full_screen", false)) {
        this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    } else {
        this.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }

    mDocument.mHorizontalScrollLock = prefs.getBoolean("horizontal_scroll_lock", false);
}

protected void setZoom(float newZoom) {
    newZoom = newZoom / (float) 100.0;
    if (newZoom > 16.0)
        newZoom = (float) 16.0;
    if (newZoom < 0.0625)
        newZoom = (float) 0.0625;
    mDocument.setZoom(newZoom, false);
}

protected void tryLoadLastFile() {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    mFilename = prefs.getString("last_open_file", "");
    if (mFilename != null) {
        if ((mFilename.length() > 0) && ((new File(mFilename)).exists())) {
            // Don't URL-decode the filename, as that's presumably already been done.
            mPassword = "";
            openDocumentWithLookup();
            mLoadedDocument = true;
        }
    }
}

} 
```

**DroidReaderView：**

```
public class DroidReaderView extends SurfaceView implements OnGestureListener,
    SurfaceHolder.Callback, DroidReaderDocument.RenderListener {

public static Path mPath = new Path();
private static StringBuffer sbx = new StringBuffer();
private static StringBuffer sby = new StringBuffer();
public static Paint mPaint = new Paint();
public static Paint nullpaint = new Paint();
private String sx, sy, sbx_str, sby_str;
public static Canvas mCanvas = new Canvas();
private int pid = 1;

/**
 * Debug helper
 */
protected final static String TAG = "DroidReaderView";
protected final static boolean LOG = false;

/**
 * our view thread which does the drawing
 */
public DroidReaderViewThread mThread;

/**
 * our gesture detector
 */
protected final GestureDetector mGestureDetector;

/**
 * our context
 */
protected final DroidReaderActivity mActivity;

/**
 * our SurfaceHolder
 */
protected final SurfaceHolder mSurfaceHolder;

public static DroidReaderDocument mDocument;

protected boolean mDisplayInvert;

/**
 * constructs a new View
 * 
 * @param context
 *            Context for the View
 * @param attrs
 *            attributes (may be null)
 */
public DroidReaderView(final DroidReaderActivity activity, AttributeSet attrs, DroidReaderDocument document) {
    super(activity, attrs);

    mActivity = activity;
    mSurfaceHolder = getHolder();
    mDocument = document;
    mDocument.mRenderListener = this;

    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);

    // tell the SurfaceHolder to inform this thread on
    // changes to the surface
    mSurfaceHolder.addCallback(this);

    mGestureDetector = new GestureDetector(this);
}

/* event listeners: */

@Override
protected void onDraw(Canvas canvas) {

    mThread.c = canvas;
    mThread.c = mSurfaceHolder.lockCanvas();

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);

    mThread.c.drawPath(mPath, mPaint);
    mSurfaceHolder.unlockCanvasAndPost(mThread.c);

}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    if (LOG)
        Log.d(TAG, "onFling(): notifying ViewThread");
    mThread.mScroller.fling(0, 0, -(int) velocityX, -(int) velocityY, -4096, 4096, -4096, 4096);
    mThread.triggerRepaint();
    return true;
}

/* keyboard events: */

@Override
public boolean onKeyDown(int keyCode, KeyEvent msg) {
    if (LOG)
        Log.d(TAG, "onKeyDown(), keycode " + keyCode);
    return false;
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent msg) {
    if (LOG)
        Log.d(TAG, "onKeyUp(), keycode " + keyCode);
    return false;
}

/* interface for the GestureListener: */

@Override
public void onLongPress(MotionEvent e) {
    if (LOG)
        Log.d(TAG, "onLongPress(): ignoring!");
}

@Override
public void onNewRenderedPixmap() {
    if (LOG)
        Log.d(TAG, "new rendered pixmap was signalled");
    mThread.triggerRepaint();
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    if (LOG)
        Log.d(TAG, "onScroll(), distance vector: " + distanceX + "," + distanceY);
    mDocument.offset((int) distanceX, (int) distanceY, true);
    mThread.triggerRepaint();
    return true;
}

@Override
public void onShowPress(MotionEvent e) {
    if (LOG)
        Log.d(TAG, "onShowPress(): ignoring!");
}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    // Pass the tap, and the window dimensions, to the activity to process.
    mActivity.onTap(e.getX(), e.getY());
    return true;
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {

    mPath.moveTo(x, y);
    mX = x;
    sx = Float.toString(mX);
    sbx.append(sx);
    sbx.append(",");

    mY = y;
    sy = Float.toString(mY);
    sby.append(sy);
    sby.append(",");

    sbx_str = sbx.toString();
    sby_str = sby.toString();
}

private void draw_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        sx = Float.toString(mX);
        sbx.append(sx);
        sbx.append(",");
        mY = y;
        sy = Float.toString(mY);
        sby.append(sy);
        sby.append(",");
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    sx = Float.toString(mX);
    sbx.append(sx);
    sbx.append(",");

    sy = Float.toString(mY);
    sby.append(sy);
    sby.append(",");

    mPath.reset();

    sbx_str = sbx.toString().trim();
    sby_str = sby.toString().trim();

    insert(TAGS.presentation_id, mDocument.mPage.no, sbx_str, sby_str);
    sbx = new StringBuffer();
    sby = new StringBuffer();
    System.out.println(sbx_str.trim());
    System.out.println(sby_str.trim());

}

@Override
public boolean onTouchEvent(final MotionEvent event) {

    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        draw_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        try {

            // Button btn = new Button(mActivity.getApplicationContext());
            // buildDrawingCache();
            // setDrawingCacheEnabled(true);
            // Bitmap b = getDrawingCache();
            // b.compress(CompressFormat.JPEG, 100, new FileOutputStream(
            // "/mnt/sdcard/documents/" + new Date().getTime() + ".JPEG"));

        } catch (Exception e) {
            e.printStackTrace();
        }
        break;
    }
    invalidate();

    if (LOG) {
        Log.d(TAG, "onTouchEvent(): notifying mGestureDetector");
        invalidate();
    }
    if (mGestureDetector.onTouchEvent(event)) {
        invalidate();
        return true;
    }

    return true;
}

@Override
public boolean onTrackballEvent(MotionEvent event) {
    if (LOG)
        Log.d(TAG, "onTouchEvent(): notifying ViewThread");
    mDocument
            .offset((int) event.getX() * 20, (int) event.getY() * 20, true);
    mThread.triggerRepaint();
    return true;
}

/* surface events: */

public void setDisplayInvert(boolean invert) {
    if (mThread != null)
        mThread.setPainters(invert);
    mDisplayInvert = invert;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    if (LOG)
        Log.d(TAG, "surfaceChanged(): size " + width + "x" + height);
    mDocument.startRendering(width, height);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    if (LOG)
        Log.d(TAG, "surfaceCreated(): starting ViewThread");
    mThread = new DroidReaderViewThread(holder, mActivity, mDocument);
    mThread.setPainters(mDisplayInvert);
    mThread.start();
}

/* render events */

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    if (LOG)
        Log.d(TAG, "surfaceDestroyed(): dying");
    mDocument.stopRendering();
    boolean retry = true;
    mThread.mRun = false;
    mThread.interrupt();
    while (retry) {
        try {
            mThread.join();
            retry = false;
        } catch (InterruptedException e) {
        }
    }
}

@Override
public boolean onDown(MotionEvent e) {
    return false;
} 
```

**DroidReaderViewThread：**

负责将 Pixmap 传送到 Canvas 并处理滚动的线程

```
class DroidReaderViewThread extends Thread {

public Canvas c = new Canvas();
private Cursor mCursor;
private Path mPath1 = new Path();
private StringBuffer sbx_read, sby_read;
public static Paint mPaint2 = new Paint();
public static Paint mPaint3 = new Paint();
Path old_path = new Path();

/**
 * Debug helper
 */
protected final static String TAG = "DroidReaderViewThread";
protected final static boolean LOG = false;
/**
 * the SurfaceHolder for our Surface
 */
protected final SurfaceHolder mSurfaceHolder;

/**
 * Paint for not (yet) rendered parts of the page
 */
protected final Paint mEmptyPaint;
/**
 * Paint for filling the display when there is no PdfPage (yet)
 */
protected final Paint mNoPagePaint;
/**
 * Paint for the status text
 */
protected final Paint mStatusPaint;

/**
 * Flag that our thread should be running
 */
protected boolean mRun = true;

/**
 * our scroller
 */
protected final Scroller mScroller;

protected final DroidReaderDocument mDocument;

/**
 * Background render thread, using the SurfaceView programming scheme
 * 
 * @param holder
 *            our SurfaceHolder
 * @param context
 *            the Context for our drawing
 */
public DroidReaderViewThread(SurfaceHolder holder, Context context, DroidReaderDocument document) {
    // store a reference to our SurfaceHolder
    mSurfaceHolder = holder;

    mDocument = document;

    // initialize Paints for non-Pixmap areas
    mEmptyPaint = new Paint();
    mNoPagePaint = new Paint();
    mStatusPaint = new Paint();

    setPainters(false);

    // the scroller, i.e. the object that calculates/interpolates
    // positions for scrolling/jumping/flinging
    mScroller = new Scroller(context);
}

/**
 * ll this does the actual drawing to the Canvas for our surface
 */

private void doDraw() {
    if (LOG)
        Log.d(TAG, "drawing...");
    c = null;
    try {
        c = mSurfaceHolder.lockCanvas(null);
        if (!mDocument.isPageLoaded()) {
            // no page/document loaded
            if (LOG)
                Log.d(TAG, "no page loaded.");
            c.drawRect(0, 0, c.getWidth(), c.getHeight(), mNoPagePaint);
        } else if (mDocument.havePixmap()) {
            // we have both page and Pixmap, so draw:
            // background:
            if (LOG)
                Log.d(TAG, "page loaded, rendering pixmap");
            c.drawRect(0, 0, c.getWidth(), c.getHeight(), mEmptyPaint);
            Log.d("CALL", "CALL");
            c.drawBitmap(mDocument.mView.mBuf, 0,
                    mDocument.mView.mViewBox.width(), -mDocument.mOffsetX + mDocument.mView.mViewBox.left,
                    -mDocument.mOffsetY + mDocument.mView.mViewBox.top,
                    mDocument.mView.mViewBox.width(), mDocument.mView.mViewBox.height(), false, null);

            try {
                Log.d("Reading", "Reading");
                mCursor = DroidReaderActivity.db_api
                        .ExecuteQueryGetCursor("SELECT * FROM path WHERE page_no=" + mDocument.mPage.no
                                + " AND presentation_id=" + TAGS.presentation_id + ";");

                if (!mCursor.equals(null)) {

                    mCursor.moveToFirst();
                    float x1 = 0, y1 = 0;
                    int pid = 0;
                    do {

                        sbx_read = new StringBuffer();
                        sbx_read.append(mCursor.getString(mCursor.getColumnIndex("x_path")));
                        sby_read = new StringBuffer();
                        sby_read.append(mCursor.getString(mCursor.getColumnIndex("y_path")));

                        String[] sbx_read_array = sbx_read.toString().trim().split(",");
                        String[] sby_read_array = sby_read.toString().trim().split(",");

                        for (int i = 0; i < sbx_read_array.length; i++) {

                            x1 = Float.parseFloat(sbx_read_array[i].toString());
                            y1 = Float.parseFloat(sby_read_array[i].toString());

                            if (pid != mCursor.getInt(mCursor.getColumnIndex("path_id"))) {

                                pid = mCursor.getInt(mCursor.getColumnIndex("path_id"));

                                Log.d("New Path Id.",
                                        String.valueOf(mCursor.getInt(mCursor.getColumnIndex("path_id"))));

                                mPath1.reset();
                                mPath1.moveTo(x1, y1);
                            } else {
                                Log.d("Path id repeating.",
                                        String.valueOf(mCursor.getInt(mCursor.getColumnIndex("path_id"))));
                            }

                            mPath1.lineTo(x1, y1);
                            c.drawPath(mPath1, DroidReaderView.mPaint);
                        }
                    } while (mCursor.moveToNext());
                    mCursor.close();
                    Log.d("Read mode Complete", "Read mode Complete");
                }
            } catch (Exception e) {
                // Log.d("read Cursor", e.getMessage().toString());
            }

        } else {
            // page loaded, but no Pixmap yet
            if (LOG)
                Log.d(TAG, "page loaded, but no active Pixmap.");
            c.drawRect(0, 0, c.getWidth(), c.getHeight(), mEmptyPaint);
            mPaint3.setAntiAlias(true);
            mPaint3.setDither(true);
            mPaint3.setColor(Color.TRANSPARENT);
            mPaint3.setStyle(Paint.Style.STROKE);
            mPaint3.setStrokeJoin(Paint.Join.ROUND);
            mPaint3.setStrokeCap(Paint.Cap.ROUND);
            mPaint3.setStrokeWidth(12);
            mPaint3.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
            c.drawPath(old_path, mPaint3);
        }
    } finally {
        if (c != null) {

            mPaint2.setAntiAlias(true);
            mPaint2.setDither(true);
            mPaint2.setColor(Color.GREEN);
            mPaint2.setStyle(Paint.Style.STROKE);
            mPaint2.setStrokeJoin(Paint.Join.ROUND);
            mPaint2.setStrokeCap(Paint.Cap.ROUND);
            mPaint2.setStrokeWidth(12);
            c.drawPath(DroidReaderView.mPath, mPaint2);
            // DroidReaderView.mPath.reset();
            // old_path = DroidReaderView.mPath;

        }
        mSurfaceHolder.unlockCanvasAndPost(c);
    }
}

/**
 * Main Thread loop
 */
@SuppressWarnings("static-access")
@Override
public void run() {
    while (mRun) {
        boolean doSleep = true;
        if (!mScroller.isFinished()) {
            if (mScroller.computeScrollOffset()) {
                if (LOG)
                    Log.d(TAG, "new scroll offset");
                doSleep = false;
                int oldX = mDocument.mOffsetX;
                int oldY = mDocument.mOffsetY;
                mDocument.offset(mScroller.getCurrX(), mScroller.getCurrY(), true);
                if ((oldX == mDocument.mOffsetX) && (oldY == mDocument.mOffsetY))
                    mScroller.abortAnimation();
            } else {
                mScroller.abortAnimation();
            }
        }
        doDraw();
        // if we're allowed, we will go to sleep now
        if (doSleep) {
            try {
                // nothing to do, wait for someone waking us up:
                if (LOG)
                    Log.d(TAG, "ViewThread going to sleep");

                // between
                // the check for pending interrupts and the sleep() which
                // could lead to a not-handled repaint request:
                if (!this.interrupted())
                    Thread.sleep(3600000);
            } catch (InterruptedException e) {
                if (LOG)
                    Log.d(TAG, "ViewThread woken up");
            }
        }
    }
    // mRun is now false, so we shut down.
    if (LOG)
        Log.d(TAG, "shutting down");
}

public void setPainters(boolean invert) {
    // initialize Paints for non-Pixmap areas
    mEmptyPaint.setStyle(Paint.Style.FILL);
    mNoPagePaint.setStyle(Paint.Style.FILL);
    mStatusPaint.setStyle(Paint.Style.FILL);

    if (invert)
        mEmptyPaint.setColor(0xff000000); // black
    else
        mEmptyPaint.setColor(0xffc0c0c0); // light gray

    if (invert)
        mNoPagePaint.setColor(0xff000000); // black
    else
        mNoPagePaint.setColor(0xff303030); // dark gray

    if (invert)
        mStatusPaint.setColor(0xff000000); // black
    else
        mStatusPaint.setColor(0xff808080); // medium gray
}

public void triggerRepaint() {
    if (LOG)
        Log.d(TAG, "repaint triggered");
    interrupt();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:30:14.017

我正在使用它，它在我的情况下工作正常，

这里的 imageFrame 是`FrameLayout`我想要保存为位图的视图的根视图。

```
Bitmap saveBitmap = Bitmap.createBitmap(imageFrame.getWidth(), imageFrame.getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(saveBitmap);
imageFrame.draw(c); 
```

尝试用您的视图替换 imageFrame。

**编辑：**

```
 Date date = new Date();
    File filename = new File(file.getAbsoluteFile(), "" + date.getTime() + ".jpg");
    try
    {
        fOut = new FileOutputStream(filename);
        saveBitmap.compress(Bitmap.CompressFormat.JPEG, 50, fOut);
        try
        {
            fOut.flush();
            fOut.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    } 
```

**编辑2：**

```
private void doDraw() {

  int w = WIDTH_PX, h = HEIGHT_PX; 
  BitmapConfig conf = Bitmap.Config.ARGB_8888; // see other conf types 
  Bitmap bmp = Bitmap.createBitmap(w, h, conf); // this creates a MUTABLE bitmap 
  c = new Canvas(bmp); 
```**

# c# - 从 SQL Server 检索所有值作为字符串

> ID：10275233
> 
> 赞同：2
> 
> 时间：2012-04-23T05:27:26.663
> 
> 标签：c#, sql, sql-server, entity-framework, entity-framework-4.1

我目前正在使用 EF Code-First，我想`SELECT`从数据库中的许多表中获取数据。这个查询是一个可定制的查询，因此我无法预测我将检索什么样的数据。

起初，当我尝试运行时`ctx.Database.SqlQuery<string>(sql, param)`，遇到一个`DateTime`值时遇到了异常。我想在不将其投射到服务器端的情况下执行此操作。

有人知道我该怎么做吗？它可以是 LINQ、LINQ-SQL 或纯 SQL——只要它能完成工作！多谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:59:59.793

你不会得到它。Linq-to-entities 不会对字符串列表进行转换。您最好的机会是执行普通查询并转换和转换您的应用程序。

您不知道用户选择哪些列的论点只是意味着您需要更多动态解决方案 - Linq-to-entities 对您来说不是一个好工具（除非您尝试使用 Dynamic Linq 或手动构建表达式树）。直接使用 ESQL 或 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:53:56.027

从多个表中选择数据时，使用[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)将您要从这些表中选择的属性（字段）封装到一个新实体中，例如：

```
var query = _db.Categories.Join(
_db.Products,
c => c.CategoryId,
p => p.CategoryId,
(category, product) =>
   new
   {
       ProductName = product.Name,
       CategoryName = category.Name,
       ExpiryDate = product.ExpiryDate
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:57:08.860

您可以通过以下方式将数据字段转换为字符串来实现字符串值：

```
var query = _db.Categories.Join(
_db.Products,
c => c.CategoryId,
p => p.CategoryId,
(category, product) =>
   new
   {
       ProductName = product.Name.toString(),
       CategoryName = category.Name.toString(),
       ExpiryDate = product.ExpiryDate.toString()
   }); 
```

# php - 如何处理多标签表单（有或没有 jquery）

> ID：10275238
> 
> 赞同：2
> 
> 时间：2012-04-23T05:27:48.623
> 
> 标签：php, jquery, html

我有一个大页面/表单分为选项卡，现在的要求是，每个选项卡都应该有一个保存按钮，它将提交该选项卡中的字段。并且还应该有一个全局保存按钮，用于保存所有选项卡中的数据。

我这样做的想法是，为每个选项卡制作单独的表单，并使用 jquery 序列化来发布它们，但是有些表单有图像上传和 ckeditor 字段，它们不能很好地与 jquery 配合使用。

任何想法，关于解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:27:05.957

使用 jQuery，您可以一个一个地提交每个表单

```
$("#globalsubmit").submit(function(e){

  //simply submit all the forms one by one
  $("#form1").submit();
  $("#form2").submit();

  return false;
}); 
```

或查找所有表格并立即提交

```
$("#globalsubmit").submit(function(e){

  $("form").each(function() { $(this).submit(); });

  return false;
}); 
```

* * *

没有 jQuery。以下是您可能要遵循的几个步骤。

1.  提交表单，不处理数据，而是存储在会话中。
2.  从会话中的所有表单中收集所有数据，并在最后批量提交数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:09:39.913

一个低影响的方法是保留您的 3 份表格。然后将您的“表单合并”附加到全局表单的提交元素：

对于 HTML：

```
<form id="form1"> ... </form>
<form id="form2"> ... </form>
<form id="global"></form> 
```

JS：

```
$("#global").submit(function(e){
  var $ch1 = $("#form1").children();
  var $ch2 = $("#form2").children();

  $(this).append($ch1).append($ch2);
  //Let the form get submitted...
}); 
```

# html - 使用图像解析远程 HTML

> ID：10275246
> 
> 赞同：1
> 
> 时间：2012-04-23T05:29:19.510
> 
> 标签：html, html-parsing

**大家好，**

是否可以查明远程 HTML 页面中的图像是否已更新？

唯一的方法是解析远程HTML页面并找出所有图像，然后将图像完全下载以查看是否根据文件大小更新？

谢谢。

最好的问候， **亨利霍**

# html - 为什么 GIF 的背景颜色是灰色而不是白色/透明？

> ID：10275247
> 
> 赞同：1
> 
> 时间：2012-04-23T05:29:28.003
> 
> 标签：html, css, button

我正在使用来自 PayPal 的 gif 图像

[https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif](https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif)

在 PayPal 的网站上，该按钮周围的区域显示为白色/透明。

当我在 CSS 中使用与 a 相同的图像`background-image`时，对于我自己的“立即购买”按钮，它周围的区域是灰色的。

[http://jsfiddle.net/gGeBp/1/](http://jsfiddle.net/gGeBp/1/)

这是为什么？我正在使用 Safari。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:43:45.923

尝试添加`background-color:transparent`：

```
#buynow_button {
   background-color: transparent;
   ...
} 
```

# html - 如何垂直居中括号标题的项目符号

> ID：10275253
> 
> 赞同：2
> 
> 时间：2012-04-23T05:30:09.010
> 
> 标签：html, css

我正在尝试创建一个`h#`元素被项目符号字符括起来的效果。如果标题跨越多行，则项目符号应位于文本块的左侧和右侧，并垂直居中。

以 HTML5 和 CSS3 为例：

```
<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
</head>

<body>
    <div class="content-container">
        <h1>Short title</h1>
        <h1>Really long title that will hopefully span multiple lines to demonstrate the problem I'm trying to solve here</h1>
    </div>
</body>

</html>

h1 {
    font-weight: bold;
    text-align: center;
}

h1:before {
    content: '— ';
}

h1:after {
    content: ' —';
}
​ 
```

这会渲染项目符号，但是当有换行符时，项目符号最终会与文本本身一起换行。

如何更改 CSS 以使项目符号位于整个文本块的左侧或右侧，并垂直居中？这个[jsFiddle](http://jsfiddle.net/zvufe/)描述的效果比我描述的要好。请注意，在 header 元素上方存在一些容器（它们只是不是它的专有容器）也可以使用。

我不想更改 HTML，因为这是一个太脆弱的解决方案：它需要更改 CMS 模板、内容本身以及对所有未来内容作者的命令——如果主题再次更改，这将是多余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:40:59.097

我看不到使用文本项目符号点的方法，但可以使用背景图像来完成。CSS3 支持多个背景图片和多个图片位置，所以我们可以在任意一端放置一个图片要点，`h1`如下所示：

用这个替换你的CSS：

```
body {text-align:center}

h1 {
    font-weight: bold;
    padding: 0 16px;
    background-image: url(http://www.getyourgame.net/images/BulletPointGreen.png),url(http://www.getyourgame.net/images/BulletPointGreen.png);
    background-position: left center, right center;
    background-repeat: no-repeat;
    display: inline-block;
} 
```

需要填充来为项目符号点腾出空间。我使用了一些随机的要点图像，但**请注意我已经指定了两次**。然后我可以为这两个图像指定不同的位置；一左一右的`h1`。最后`display:inline-block`防止`h1`填充整个宽度，这将导致项目符号点始终位于父元素的边缘而不是标题文本的边缘。

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:25:15.840

我设法通过创造性地使用表格显示样式[非常接近：](http://jsfiddle.net/zvufe/28/)

```
h1 {
    font-weight: bold;
    text-align: center;
    display: table;
    vertical-align: middle;
    margin-left: auto;
    margin-right: auto;
}

h1:before {
    vertical-align: middle;
    content: '—';
    display: table-cell;
    padding-right: '1em';
}

h1:after {
    vertical-align: middle;
    content: '—';
    display: table-cell;
    padding-left: '1em';
} 
```

为什么只是“非常接近”？好吧，首先我还没有验证这是标准规定的行为，而不仅仅是渲染的一些怪癖。其次，它可以在 Chrome 18 和 Firefox 12 中运行，但我没有费心去查看 Internet Explorer 或 Safari ——而且我**知道**它在 Android 浏览器引擎中运行不正确。

# java - 如何将对象从列表两次移动到另一个列表并以不同方式设置对象变量

> ID：10275258
> 
> 赞同：-1
> 
> 时间：2012-04-23T05:30:40.167
> 
> 标签：java, list, arraylist

我有关于将对象分配给具有几乎相同对象的arraylist 的问题，这些对象来自另一个列表，我想将它添加到arraylist 两次，在我将它添加到另一个列表之前，我需要在这些对象中设置一个变量。

这是代码，

```
ArrayList<ClassCourse> courses = new ArrayList<ClassCourse>();
ArrayList<ClassCourse> _courses = new ArrayList<ClassCourse>();

int index = 0;
for( int i = 0; i < courses.size(); i++ )
{
    ClassCourse t = courses.get(i);
    if(t.getSks()==4)      
    {
        i--;
        t.setSks(2);
        t.setIndex(index); // I want to set this one
        index++;
    }
    else
    {
        t.setIndex(index); // I want to set this one
        index++;
    }
    _courses.add(t);
} 
```

问题是当我通过打印检查列表时

```
for( ClassCourse t : _courses )
    System.out.println( t.getIndex() + " " + t.getName() + " " +
            t.getCourseCode() + " " + t.getSks() ); 
```

这就是我得到的

```
1 Visi 电脑 A 2
1 Visi 电脑 A 2
2 Matematika Diskrit C 3
4 Jaringan Nirkabel dan Komputasi Bergerak A 2
4 Jaringan Nirkabel dan Komputasi Bergerak A 2
5 Pemograman 框架 .NET A 3
6 Perancangan dan Analisis 算法 E 3
8 系统 Terdistribusi A 2
8 系统 Terdistribusi A 2
9 Matematika Diskrit D 3
11 Manajemen Proyek Perangkat Lunak A 2
11 Manajemen Proyek Perangkat Lunak A 2

```

我无法让索引的价值以正确的方式增加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:40:30.723

```
 if(t.getSks()==4)      
{
    i--;
    t.setSks(2);
    t.setIndex(index); // I want to set this one
    index++;
} 
```

我猜你正在减少 i 以便对象被添加两次。但请记住，它与添加到列表中的对象相同。因此，当您设置 t.setIndex(index) 时，它将更改上一次迭代的 index 值。这是因为 java 只处理引用。因此，courses.get(0) 和 course.get(1) 返回对同一对象的引用，因此返回了这种行为。如果您希望索引不同，则可能需要克隆对象并将其再次添加到列表中。您需要仔细考虑并决定是否需要该对象的另一个副本。

# r - 在特定时间从 R 自动通过电子邮件发送 pdf 图形输出

> ID：10275265
> 
> 赞同：5
> 
> 时间：2012-04-23T05:32:03.583
> 
> 标签：r, email, pdf

我有一些脚本想在每天早上 6 点运行。这些脚本将一些 pdf 的图形输出生成到一个文件中：`foo.pdf`

一旦系统完成运行脚本，我希望我的系统（比如说`Win 7`，>= ）通过电子邮件向我发送这些 pdf 文件。`R 2.13`

哪个是最好的包 - 也是最强大的设置方式 - 让这些报告通过 R 的附件直接通过电子邮件发送给我？

是否有任何“酷”的扩展（例如 - 将`sink()`报告文本输出到电子邮件正文中）？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:42:29.843

您可以利用[可以处理电子邮件](https://stackoverflow.com/questions/2885660/how-to-send-email-with-attachment-from-r-in-windows)和 chron 作业的软件包的强大功能。在 Windows 7 上，我使用[Windows Task Scheduler](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)实现了类似的功能。基本上，您将其设置为在指定时间运行特定脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:13:28.610

我每天都在运行一个脚本，运行起来遇到了很多问题。先看看 Roman 的链接以获取附件和 R 代码。这是关于 Windows 7 中的非 R 部分。

我直接从 Windows 任务计划程序运行 R 脚本时遇到问题，因此我安排了一个批处理文件每天运行如下：

```
@echo on
"C:\Rpath\R-2.15.1\bin\i386\Rcmd.exe" BATCH "C:\filepath\filetorun.R" 
```

这是你能得到的最简单的方法，但[Quick R](http://www.statmethods.net/interface/batch.html)是一个起点。

根据您计算机的设置，您可能不得不摆弄任务计划程序。如果它是始终开启的服务器类型，那么您应该不会有太多问题（并且您知道自己在做什么）。如果您必须注销并使用密码登录或访问共享驱动器，则必须执行以下一些操作。另外，我不知道管理员权限是否必要。

打开任务计划程序，创建一个新任务，然后打开其属性窗口。

在常规下，检查用户帐户并选择“无论用户是否登录都运行”并取消选中“不存储密码”。如果您已注销，这将允许您的脚本运行（我认为它在锁定时不起作用）。当您单击确定时，它会询问您的密码。

基本设置：触发器为“按计划”，高级已启用。在“操作”下，选择“启动程序”，将程序/脚本作为 .bat 文件。

在条件下，取消选中“仅当 comp 空闲时启动任务”并选中“唤醒计算机以运行此任务”。在设置下，选中“允许按需运行任务”，选中“如果正在运行的任务没有结束..”，然后在底部选择“停止现有实例”。这些选项可能是必要的，尽管我对这些不太确定。

另一个技巧是，如果您的公司让您每隔一段时间更换一次密码。更改后打开和关闭任务，以便它再次要求您输入密码。输入新的，否则它无法登录并且不会运行您的脚本。

# crontab - 设置 cron 作业结束时间

> ID：10275266
> 
> 赞同：1
> 
> 时间：2012-04-23T05:32:09.407
> 
> 标签：crontab

我想设置一个 cron 作业，它将每小时执行一个命令。但是，我希望这个命令应该在上午 10 点开始，并且应该每小时运行一次，直到下午 4 点。这项工作是在这些时间之间每天运行一次。该命令只不过是对 Perl 脚本的调用。以下 crontab 条目运行良好并每小时调用一次脚本

* */1 * * * cd path_to_file; perl file.pl > path_to_logs/log.txt

有没有办法限制这个 cron 作业的时间，使它只在上午 10 点到下午 4 点之间运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T05:36:21.043

`man 5 crontab`是你的朋友。（您的示例没有执行您声称的操作；`/1`是默认跳过，因此是多余的，因此由于领先而不是.，该规范每*分钟*运行一次。）`*``0`

```
0 10-15 * * * your command here 
```

（我使用了 15，因为在我看来“10 到 4 之间”是一个专有范围，所以你不想在 16:00 运行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:35:25.053

如果您希望脚本每小时运行一次，您可以执行以下操作： [code] 00 10,11,12,13,14,15,16 * * * cd path_to_file; perl file.pl > path_to_logs/log.txt [/code]

这意味着当分钟达到 00 并且小时达到 10 11 12 13 14 15 16 中的任何一个时，脚本将运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:36:59.113

在您的 Perl 脚本中（或在 Perl 脚本的包装器中），您可以[`localtime`](http://perldoc.perl.org/functions/localtime.html)用来检查小时数，如果它不在上午 10 点到下午 4 点之间，则可以退出：

```
use strict;
use warnings;

my @lt=localtime;
my $hour=$lt[2];

unless($hour>=10 and $hour<=16)
{
  print "Not between 10am and 4pm.  Exiting.\n";
  exit;
}

#put the rest of your code here. 
```

# assembly - 输入验证（Pep8 汇编器）

> ID：10275267
> 
> 赞同：0
> 
> 时间：2012-04-23T05:32:18.657
> 
> 标签：assembly

我正在尝试为我的其他程序编写输入验证。如果输入小于 -32,768 或大于 32,767，程序必须打印一条错误消息并要求重复输入，直到它得到一个范围内的数字（我必须使用循环）。我知道下面的代码有一些逻辑错误。我试图修复它，但它只会导致其他逻辑错误。这很奇怪，因为超出范围的数字与范围内的数字重叠。例如，-32,770，当添加到累加器时，是 32,766（在范围内）。这是我到目前为止所拥有的：

```
BR       isless 
input:    .BLOCK 2 
hello_ms: .ASCII "Enter a number: \x00"
error_ms: .ASCII "Wrong input, must be in the range -32,768 through 32,767\. Enter a number: \x00"
thanx:    .ASCII "Thank you!\x00"
;
isless:  STRO    hello_ms, d
         DECI    input, d
         LDA     input, d
         CPA     32767, d ;-32769 
         BRLE    whileL
         BR      isgrter
whileL:  STRO    error_ms, d 
         DECI    input, d
         LDA     input, d
         CPA     32767, i
         BRLE    whileL
         BR      isgrter
isgrter: LDA     input, d
         CPA     -32768, i 
         BRGE    whileG
         BR      endwh
whileG:  STRO    error_ms, d 
         DECI    input, d
         LDA     input, d
         CPA     -32768, i 
         BRGE    whileG
         BR      endwh
endwh:   STRO    thanx, d 
         STOP
         .END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:27:54.287

你能得到大于 16 位的十进制/数字输入吗？例如，您可以输入一个 32 位数字吗？如果是这样，您可以轻松检查高 16 位是否被清除。

**编辑**：

DECI 指令设置 NZV 标志。

# iphone - 如何在我自己的项目中创建 iPhone/iPad 库 PTShowcaseViewController 的实例？

> ID：10275275
> 
> 赞同：2
> 
> 时间：2012-04-23T05:33:33.023
> 
> 标签：iphone, ios, xcode, ipad

我发现这个 iOS 演示项目包含许多不同的库和框架。我很想知道如何创建一个新项目并将 PTShowcase 演示项目中包含的所有必要库和框架添加到我自己的项目中。

见： [https ://github.com/exalted/PTShowcaseViewController](https://github.com/exalted/PTShowcaseViewController)

# php - 如何使用 php 将数据从 HTML 表单导出到 csv 文件

> ID：10275276
> 
> 赞同：0
> 
> 时间：2012-04-23T05:33:37.913
> 
> 标签：php, html, forms, csv

我有一个由几个下拉选择字段构成的 HTML 表单。提交按钮生成一个字符串。

我需要帮助将生成的每个字符串导出到 CSV 文件。我的第一个想法是从字段中获取字符串并将其放在 HTML 表中，然后使用脚本将其导出到文件中。

如果您能提供一个工作示例，我将不胜感激。

我在这方面很菜，所以请慢慢写。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:23:36.820

csv 导出不起作用，所以我试图将文本输入（我正在生成的）一一打印到文本区域，它工作正常。

现在的问题是我想在每个链接移动到文本区域后放置一个“br”。有任何想法吗？这是我的代码：

```
<input name="result" size="70" class="result" type="text" ></input>
<input type="button" value="Add The Link" onClick="addtext();"></p>
<textarea style="width:509px;" name="outputtext"></textarea><br><br>
<input value="Clear" type="reset"> 
```

并且在头部是：

```
<script language="javascript" type="text/javascript">
function addtext() {
    var newtext = document.cwm1.result.value;
    document.cwm1.outputtext.value += newtext;
}
</script> 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:41:52.787

CSV 文件只是一个逗号分隔的向量。

因此，每个字符串都可以写入文件，如果您希望将它们放在单独的列中，则用逗号分隔，如果希望将它们放在不同的行中，则使用回车符分隔。

# database - 什么是 DBase？如何在Win98操作系统中使用DBase？

> ID：10275279
> 
> 赞同：-3
> 
> 时间：2012-04-23T05:33:54.733
> 
> 标签：database, dbase

**什么是 DBase？**如何在**Windows 98**中使用 DBase ？如何安装**DBase**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:47:42.297

***什么是 dBase？***

一个非常早期的 PC 非 SQL（不完全是*“NoSQL”*）关系数据库。

***如何在 Windows 98 中使用 DBase？***

dBase 是一个突破性的产品，第一个 μ 处理器 DB，就此而言，它是 Perl 等重要工具的原始前身，但后来被克隆产品和各种 SQL 产品黯然失色。

如果我今天想要类似的东西，我只会使用 Ruby、ActiveRecord 和 MySQL。

***如何安装 DBase？***

但是，如果您想要真实的东西，以及可以在 Win98 上运行的东西（上帝，但为什么？）我会[在 Wikipedia 上查找 dBASE](http://en.wikipedia.org/wiki/DBASE)，看看是否可以使用 FoxPro 和 Clipper 等下游产品。另见[dBase, LLC。](http://www.dbasellc.com/)

另请注意，当今许多功能非常强大的 DBMS 包都可以读取 dbf 文件。

# c++ - 通过 tcp 发送 rsa 密钥

> ID：10275280
> 
> 赞同：-1
> 
> 时间：2012-04-23T05:34:05.470
> 
> 标签：c++, qt, sockets, openssl, rsa

我正在尝试通过 tcp 连接以这种方式发送 rsa 密钥（RSA *myrsa）：

```
send(client, (char *)myrsa, sizeof(RSA), 0); 
```

收件人会：

```
read_bytes = tcpSocket.read(buffer, sizeof(RSA));
RSA *myrsa = RSA_new();
memcpy((void*)myrsa, (void*)buffer, read_bytes); 
```

然后 RSA_check_key(rsa) 返回 -1 或使程序崩溃。我做错了什么？也许它存在更合适的解决方案？也许行消息被任何转换破坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:46:41.083

-1 表示数据中有错误。RSA_check_keys 方法仅验证参数是否一致，而不是数据一定有效。崩溃之类的行为也可能与错误数据一致。

几个可能存在问题的地方：你真的为缓冲区分配空间吗？您是否检查 read_bytes 的长度以确保您收到的数据可能是 RSA 密钥？

# html - 如何将图像和文本垂直对齐到 div 中的中间

> ID：10275285
> 
> 赞同：1
> 
> 时间：2012-04-23T05:34:28.187
> 
> 标签：html, css

例如：http: [//jsfiddle.net/S23ut/1/](http://jsfiddle.net/S23ut/1/)

我希望图像和文本与其容器的中间垂直对齐。我似乎无法为此获得正确的 CSS。有什么想法/技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:39:39.877

我不确定跨浏览器的兼容性，但使用 CSS`display: table-XXX`可能有效：

```
#offer_widget .row {
    display: table-row;
}

#offer_widget .row_image {
    display: table-cell;
    text-align:center;
    vertical-align: middle;
}
#offer_widget .row_text {
    display: table-cell;
    vertical-align: middle;
} 
```

请参阅[您的 jsFiddle 的此更新](http://jsfiddle.net/S23ut/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:40:22.317

嘿，删除浮动并提供显示表属性现场演示[http://jsfiddle.net/rohitazad/S23ut/5/](http://jsfiddle.net/rohitazad/S23ut/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:47:39.010

在 2 个嵌套 div 中使用以下 CSS 样式：

```
display:table
display:table-cell 
```

例如。

```
<html>
<head>
    <style>
        #outer{width:100px; height:60px; border:solid 1px #f00;display:table;}
        #inner{display:table-cell; vertical-align:middle;text-align:center;font-size:16px;}
    </style>
</head>
<body>
    <div id="outer">
        <div id="inner">test</div>
    </div>
</body>
</html> 
```

# javascript - 当div在HTML中加载时如何淡入淡出

> ID：10275288
> 
> 赞同：0
> 
> 时间：2012-04-23T05:34:34.093
> 
> 标签：javascript, html

我有代码在按钮单击时淡入淡出，但我希望在文本加载时它应该淡入或淡出如何执行此操作而不是单击按钮

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Fading JavaScript Example</title>
 <link rel="stylesheet" type="text/css" href="style.css" />
 <script type="text/javascript" src="script.js"></script>
 </head>
 <body>
 <div id="wrapper">
<div id="fade">Fading JavaScript Example</div>
<div id="buttons">
    <div class="button" onclick="fadeEffect.init('fade', 1)">Fade In</div>
    <div class="button floatright" onclick="fadeEffect.init('fade', 0)">Fade Out</div>
</div>
<p>For more information visit <a href="http://www.leigeber.com">leigeber.com</a>.       </p>
  </div>
  </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:43:07.350

### 您可以使用`<body onload="">`：

```
...
</head>
<body onload="fadeEffect.init('fade', 1)">
... 
```

[在这里阅读更多](http://www.w3schools.com/jsref/event_body_onload.asp)

### 或与 jQuery 相同`$(document).ready();`：

```
...
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {

    $('#fademein').fadeIn( 1000 );
});
</script>
</head>
<body>
...
<span id="fademein" style="display: none">Will fade in smoothly</span> 
```

[在这里阅读更多](http://api.jquery.com/ready/)

# php - Facebook 喜欢的消息系统 - 按最后回复排序

> ID：10275297
> 
> 赞同：2
> 
> 时间：2012-04-23T05:35:18.443
> 
> 标签：php, mysql, database, messaging

我正在构建一个类似于 facebook 的消息传递系统（它将消息显示为线程）。

我目前的桌子设计是：

```
CREATE TABLE IF NOT EXISTS messages ( 
  mid int(11) NOT NULL auto_increment,
 subject text NOT NULL,
  message text NOT NULL,
  fromid varchar(255) NOT NULL default '',
  toid varchar(255) NOT NULL default '',
  status varchar(255) NOT NULL default '',
  date varchar(255) NOT NULL default '',
  time varchar(255) NOT NULL,
  PRIMARY KEY  (mid)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2825 ;` 
```

我正在使用此 select 语句检索结果：

```
SELECT 
  IF(messages.toid = '$uid' OR messages.toid = '$uid', messages.fromid, messages.toid) friend1,
messages.message, messages.fromid, messages.toid, messages.date, messages.status, messages.time
FROM messages 
WHERE (messages.toid='$uid' OR messages.fromid='$uid') 
  AND messages.status!='2' 
GROUP BY friend1 ASC 
ORDER BY messages.time DESC, messages.mid DESC 
```

这给了我正确的结果，除了它显示线程中的第一个帖子，我希望它显示线程中的最新帖子。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:56:00.210

这是一篇与您的问题直接相关的好文章：http: [//kristiannielsen.livejournal.com/6745.html](http://kristiannielsen.livejournal.com/6745.html)

对您的具体问题进行猛烈抨击，您的查询可能需要如下所示（未经测试！）：

```
SELECT 
  IF(derived_messages.toid = '$uid', derived_messages.fromid, 
    derived_messages.toid) friend1,
  derived_messages.message, derived_messages.fromid, derived_messages.toid,
  derived_messages.date, derived_messages.status, derived_messages.time
FROM 
  (SELECT * 
  FROM messages
  ORDER BY time desc) derived_messages
WHERE (derived_messages.toid='$uid' OR derived_messages.fromid='$uid') 
  AND derived_messages.status!='2' 
GROUP BY friend1 ASC 
ORDER BY derived_messages.time DESC, derived_messages.mid DESC 
```

顺便说一句，这个条款对我来说看起来很可疑（在你原来的帖子中）：

```
IF(messages.toid = '$uid' OR messages.toid = '$uid',
  messages.fromid, messages.toid) friend1 
```

相同条件之间的“或”在做什么？我认为您可能可以跳过第二个条件。

# c++ - constexpr、static_assert 和内联

> ID：10275300
> 
> 赞同：14
> 
> 时间：2012-04-23T05:35:54.330
> 
> 标签：c++, c++11, inline, constexpr, static-assert

我之前[根据参数是否为`constexpr`](https://stackoverflow.com/questions/8936549/constexpr-overloading). 我正在尝试解决该问题的令人失望的答案，以制作更智能的断言功能。这大致是我想要做的：

```
inline void smart_assert (bool condition) {
    if (is_constexpr (condition))
        static_assert (condition, "Error!!!");
    else
        assert (condition);
} 
```

基本上，这个想法是编译时检查总是比运行时检查更好，如果可以在编译时检查。但是，由于内联和常量折叠之类的原因，我不能总是知道是否可以进行编译时检查。这意味着在某些情况下可能会`assert (condition)`编译到`assert(false)`并且代码只是在等待我运行它并在我发现有错误之前执行该路径。

因此，如果有某种方法可以检查条件是否为 constexpr（由于内联或其他优化），我可以`static_assert`在可能的情况下调用，否则可以使用运行时断言。幸运的是，gcc 有内在函数，如果是 constexpr `__builtin_constant_p (exp)`，它会返回 true 。`exp`我不知道其他编译器是否有这个内在，但我希望这能解决我的问题。这是我想出的代码：

```
#include <cassert>
#undef IS_CONSTEXPR

#if defined __GNUC__
    #define IS_CONSTEXPR(exp) __builtin_constant_p (exp)
#else
    #define IS_CONSTEXPR(exp) false
#endif
// TODO: Add other compilers

inline void smart_assert (bool const condition) { 
    static_assert (!IS_CONSTEXPR(condition) or condition, "Error!!!");
    if (!IS_CONSTEXPR(condition))
        assert (condition);
}

#undef IS_CONSTEXPR 
```

依赖于的`static_assert`短路行为`or`。如果`IS_CONSTEXPR`为真，则`static_assert`可以使用，条件为`!true or condition`，与just 相同`condition`。如果`IS_CONSTEXPR`为假，则`static_assert`不能使用，条件为`!false or condition`，与 相同，`true`忽略`static_assert`。如果`static_assert`由于不是 constexpr 而无法检查`condition`，那么我会在我的代码中添加一个运行时`assert`作为最后的努力。但是，这不起作用，因为[不能在 a 中使用函数参数`static_assert`](https://stackoverflow.com/questions/8626055/c11-static-assert-within-constexpr-function/8626450#8626450)，[即使参数是`constexpr`](https://stackoverflow.com/questions/9789913/how-to-tell-static-assert-that-constexpr-function-arguments-are-const).

特别是，如果我尝试使用 gcc 编译会发生这种情况：

```
// main.cpp
int main () {
    smart_assert (false);
    return 0;
} 
```

`g++ main.cpp -std=c++0x -O0`

一切正常，编译正常。没有没有优化的内联，所以`IS_CONSTEXPR`是 false 并且`static_assert`被忽略，所以我只得到一个运行时`assert`语句（失败）。然而，

```
[david@david-desktop test]$ g++ main.cpp -std=c++0x -O1
In file included from main.cpp:1:0:
smart_assert.hpp: In function ‘void smart_assert(bool)’:
smart_assert.hpp:12:3: error: non-constant condition for static assertion
smart_assert.hpp:12:3: error: ‘condition’ is not a constant expression 
```

一旦我打开任何优化并因此可能`static_assert`被触发，它就会失败，因为我不能在`static_assert`. 有没有办法解决这个问题（即使这意味着实现我自己的`static_assert`）？我觉得我的 C++ 项目理论上可以从一个更智能的断言语句中获得相当多的好处，该语句可以尽早发现错误。

在一般情况下，制作类似函数的宏似乎`smart_assert`并不能解决问题。它显然可以在这个简单的示例中工作，但`condition`可能来自调用图上两级的函数（但`constexpr`由于内联，编译器仍然知道），这遇到了使用函数参数的相同问题在一个`static_assert`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T20:15:09.893

这应该可以帮助您开始

```
template<typename T> 
constexpr typename remove_reference<T>::type makeprval(T && t) {
  return t;
}

#define isprvalconstexpr(e) noexcept(makeprval(e)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T06:26:54.820

一般来说，显式是好的，隐式是坏的。

程序员总是可以尝试`static_assert`.

如果无法在编译时评估条件，则失败，程序员需要更改为`assert`.

您可以通过提供一个通用表单来简化此操作，以便将更改简化为例如`STATIC_ASSERT( x+x == 4 )`→ `DYNAMIC_ASSERT( x+x == 4 )`，只是重命名。

也就是说，因为在您的情况下，*如果该优化可用*，您只需要优化程序员的时间，也就是说，因为您可能不关心始终使用所有编译器获得相同的结果，您总是可以尝试类似...

```
#include <iostream>
using namespace std;

void foo( void const* ) { cout << "compile time constant" << endl; }
void foo( ... ) { cout << "hm, run time,,," << endl; }

#define CHECK( e ) cout << #e << " is "; foo( long((e)-(e)) )

int main()
{
    int x   = 2134;
    int const y     = 2134;

    CHECK( x );
    CHECK( y );
} 
```

如果你这样做，那么请告诉我们它是如何成功的。

注意：上面的代码在 MSVC 10.0 和 g++ 4.6 中确实产生了不同的结果。

* * *

**更新**：我想知道关于上面代码如何工作的评论，得到了如此多的支持。我想也许他在说一些我根本不明白的事情。所以我着手做 OP 的工作，检查这个想法是如何进行的。

在这一点上，我认为*如果*函数的`constexpr`东西可以与 g++ 一起使用，那么对于 g++ 也可以解决问题，否则，仅适用于其他编译器。

以上是我在g++支持下得到的。使用我提出的想法，这对于 Visual C++ 非常有效（解决了 OP 的问题）。但不是 g++：

```
#include <assert.h>
#include <iostream>
using namespace std;

#ifdef __GNUC__
    namespace detail {
        typedef double (&Yes)[1];
        typedef double (&No)[2];

        template< unsigned n >
        Yes foo( char const (&)[n] );

        No foo( ... );
    }  // namespace detail

    #define CASSERT( e )                                        \
        do {                                                    \
            char a[1 + ((e)-(e))];                              \
            enum { isConstExpr = sizeof( detail::foo( a ) ) == sizeof( detail::Yes ) }; \
            cout << "isConstExpr = " << boolalpha << !!isConstExpr << endl; \
            (void)(isConstExpr? 1/!!(e) : (assert( e ), 0));    \
        } while( false )
#else
    namespace detail {
        struct IsConstExpr
        {
            typedef double (&YesType)[1];
            typedef double (&NoType)[2];

            static YesType check( void const* );
            static NoType check( ... );
        };
    }  // namespace detail

    #define CASSERT( e )                                            \
        do {                                                        \
            enum { isConstExpr =                                    \
                (sizeof( detail::IsConstExpr::check( e - e ) ) ==   \
                    sizeof( detail::IsConstExpr::YesType )) };      \
            (void)(isConstExpr? 1/!!(e) : (assert( e ), 0));        \
        } while( false )
#endif

int main()
{
#if defined( STATIC_TRUE )
    enum { x = true };
    CASSERT( x );
    cout << "This should be displayed, OK." << endl;
#elif defined( STATIC_FALSE )
    enum { x = false };
    CASSERT( x );
    cerr << "!This should not even have compiled." << endl;
#elif defined( DYNAMIC_TRUE )
    bool x = true;
    CASSERT( x );
    cout << "This should be displayed, OK." << endl;
#elif defined( DYNAMIC_FALSE )
    bool x = false;
    CASSERT( x );
    cout << "!Should already have asserted." << endl;
#else
    #error "Hey, u must define a test case symbol."
#endif
} 
```

g++ 的问题示例：

```
[D:\开发\测试]
> g++ foo.cpp -Werror=div-by-zero -D DYNAMIC_FALSE

[D:\开发\测试]
> 一个
isConstExpr = true
!应该已经断言了。

[D:\开发\测试]
> _

```

也就是说，g++ 报告（甚至通过其内在函数，甚至是否创建 VLA）它知道其值的非 const` 变量是常量，但是它无法将该知识应用于整数除法，这样它就无法产生警告。

啊。

* * *

**更新2**：好吧，我很愚蠢：当然，宏可以`assert`在任何情况下添加一个普通的。由于 OP 只对获取*可用*的静态断言感兴趣，这在某些极端情况下不适用于 g++。问题解决了，本来就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:13:12.293

另一个问题的答案如何令人失望？它几乎完全实现了您目前描述的内容，除了编译器在诊断消息中打印文本的方式。

需要这样做的原因是在可以在运行时评估的上下文中`throw`的编译时评估`constexpr`是可选的。例如，实现可以选择让您`constexpr`在调试模式下单步执行代码。

`constexpr`是函数的弱属性（声明说明符），**它不能**使用函数更改表达式的结果值。它保证运行时的语义在编译时是固定的，但不允许您指定特殊的编译时快捷方式。

至于标记无效条件，`throw`是作为常量表达式无效的子表达式，除非隐藏在 、 或 的未`?:`计算`&&`侧`||`。该语言保证这将在编译时被标记，即使调试器允许您在运行时单步执行它，并且只有当标记被真正触发时。

语言在这里得到了东西。`static_assert`不幸的是，这与 -ness 的特殊诊断消息功能或分支无法协调`constexpr`。

# java - 在 GPS 上绘制到位置的轨迹

> ID：10275304
> 
> 赞同：1
> 
> 时间：2012-04-23T05:36:09.260
> 
> 标签：java, android, google-maps, geolocation, location

我不擅长使用 gps 功能。我的代码所做的是它允许用户在地图上选择一个点，并放置一个标记。我还希望它绘制一条到所选点的轨迹，以引导用户到达该位置。

我真的不知道该怎么做，如果有人可以帮我找到一个教程，那将不胜感激。

```
 OverlayItem overlayItem = new OverlayItem(
                                            touchedpoint, "AYO", "Whats good yo");
                                    CustomPinpoint custom = new CustomPinpoint(d,
                                            CampusMap.this);
                                    custom.insertPinpoint(overlayItem);
                                    overlayList.add(custom); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:54:52.473

您可以使用`MyLocationOverlay`，它会显示指南针和位置；）

# ios5 - iOS标签栏对象持有者

> ID：10275307
> 
> 赞同：0
> 
> 时间：2012-04-23T05:36:26.737
> 
> 标签：ios5, tabs

我是 Obj-C 的新手，所以我会为任何最佳实践想法或其他东西感到高兴。我有一个包含一些对象的表格视图。选择任何对象时，我想打开带有选项卡的对象详细信息视图。这些选项卡将对象属性划分为一些逻辑组。但它仍然描述了一个对象，我希望用户在创建新对象时有一种体验，他可以在选项卡之间切换并更改值而无需任何保存数据，直到单击保存按钮（导航栏中的所有选项卡通用）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:43:56.993

不太清楚你在问什么。我认为您可以使用 UINavigationController 将用户引导到详细信息屏幕，在详细信息屏幕中使用 UITableView 显示您的对象详细信息。如果要对它们进行分组，可以将 tableView 样式设置为 Grouped。

如果您要求其他内容，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:08:48.433

为了适应 iOS 体验，显示 Tab Bar 应该是一个带有“完成”按钮的模态对话框。

创建一个 UINavigationController 并将 UITTabBarController 作为它的根控制器，然后在根控制器的导航栏中放置“完成”按钮。

请注意，您必须在内存中保留您正在编辑的任何内容的临时模型（我建议子类化 UINavigationController，为对象添加一个属性并将指向该对象的指针传递给所有选项卡控制器），因为视图包含更改的数据可以在不显示时随时释放以节省内存。

# jquery - jQuery ajax 外部回调函数

> ID：10275308
> 
> 赞同：5
> 
> 时间：2012-04-23T05:36:27.907
> 
> 标签：jquery, ajax, json, function, callback

我需要为我的成功回调使用外部函数，但我不知道如何将 json 对象传递给我的函数。

```
$.ajax({
url:"get_box.php",
type:"POST",
data:data,
dataType:"json",
success: myFunction(data);  
    }); 
```

我的函数看起来是这样的：

```
function myFunction(result2){
...
} 
```

错误是：未定义的结果2 ...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T05:40:06.407

试试这个方法

```
 success: function(data){
        myFunction(data);
    }); 
```

或者 ...

```
success: myFunction 
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:07:11.780

您如何同时实现成功和失败回调方法（[jquery 文档](http://api.jquery.com/jQuery.ajax/)）。您还可以链接这些而不是在初始 ajax 设置对象中提供它们，如下所示：

[这是一个小提琴](http://jsfiddle.net/junior87/PQUvh/)

```
jQuery.ajax({
    // basic settings
}).done(function(response) {
    // do something when the request is resolved
    myFunction(response);
}).fail(function(jqXHR, textStatus) {
    // when it fails you might want to set a default value or whatever?
}).always(function() {
    // maybe there is something you always want to do?
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T09:43:57.370

```
<script>
function fun(){
    $.ajax({
        url : "http://cdacmumbai.in/Server.jsp?out=json&callback=?",
        dataType: "json",
        contentType: "application/json;charset=utf-8",
        type: "GET",
        success: function ( output ) {
            var data = eval( output );
            document.getElementById("datetime").innerHTML = "Server Date&Time: "+data.servertime;
            document.getElementById("hostname").innerHTML = "Server Hostname: "+data.hostname;
            document.getElementById("serverip").innerHTML = "Server IP Address: "+data.serverip;
            }
        });
      }
</script> 
```

# jquery-plugins - 带有两个输入的jQuery Mobile SimpleDialog？

> ID：10275319
> 
> 赞同：0
> 
> 时间：2012-04-23T05:37:55.480
> 
> 标签：jquery-plugins, jquery-mobile

我在移动网站上使用 jQuery Mobile SimpleDialog (http://dev.jtsage.com/jQM-SimpleDialog/)，但我不太明白如何使用多个输入来实现它。

目前我有这个：

```
<script type="text/javascript">
        $(function() {
            // $('#createlocation').remove();
        });
        $(document).delegate('#searchdialog', 'click', function() {
          $('<div>').simpledialog2({
            mode: 'button',
            headerText: 'Route Search',
            headerClose: true,
            buttonPrompt: 'Enter your search:',
            buttonInput: true,
            buttons : {
              'OK': {
                click: function () { 
                  alert($.mobile.sdLastInput);
                }
              },
            }
          })
        });
    </script> 
```

只需单击按钮即可调用，如下所示：

```
<a href="#page1" id="searchdialog" data-theme="" data-icon="search">
                            Search Routes
                        </a> 
```

所以不是只有一个输入，我怎么能有两个呢？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:42:58.547

代替**mode:'button'**使用[**mode:'blank'**](http://dev.jtsage.com/jQM-SimpleDialog/demos2/blank.html)

然后，您可以将任何您喜欢的内容放入**空白内容**- 任意数量的输入。

# java - 如何使用 -> (thread) 宏管理 Clojure 迭代器序列？

> ID：10275321
> 
> 赞同：1
> 
> 时间：2012-04-23T05:38:01.493
> 
> 标签：java, clojure, iterator, sequence

我正在尝试将词性函数的输出通过管道传输到 index-words 函数中，并使用 (->) 线程宏打印结果输出：

```
(defn parts-of-speech []
  (seq (. POS values)))

(defn index-words [pos]
  (iterator-seq (. dict getIndexWordIterator pos)))

(-> (parts-of-speech) index-words println) 
```

但是 index-words 函数返回一个迭代器序列，我不确定如何在这种情况下迭代它，因为我是 Clojure 的新手。

编辑：根据建议更新代码。

更新：

感谢@kotarak 和@jayunit100 的回答以及@sw1nn 和@marko-topolnik 的评论，我至少有两种变体：

```
(->> (parts-of-speech) (map index-words) (map println) doall)

(doseq [w (map index-words (parts-of-speech))]
  (println w)) 
```

我来自命令式背景，我对这个问题的目标是理解线程宏以尝试编写更惯用的 Clojure（在尝试线程宏之前，我使用多个`doseq`和`let`s 循环遍历每个序列）。

从评论看来，线程宏可能不是最惯用的方法，但我仍然想看看如何使它工作，以便填补这一理解空白。

此外，`(parts-of-speech)`返回一个由四个项目组成的序列，如果您执行 a`(println (count w))`而不是`(println w)`，您可以看到它打印四个序列的计数，而不是一个连续序列：

```
(doseq [w (map index-words (parts-of-speech))]
  (println (count w)))

;= 117798
;= 11529
;= 21479
;= 4481 
```

您将如何修改上述内容以打印一个连续的单词流而不是打印四个序列的内容？

顺便说一句：上面的代码包装了 MIT Java WordNet 库（[http://projects.csail.mit.edu/jwi/](http://projects.csail.mit.edu/jwi/)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:25:31.580

**seqs 和 iterator-seq 之间的关系如下：一个 iterator-seq 从一个迭代器创建一个 seq。**

原谅这里的冗长，但要回答“如何迭代 iterator-seq 的输出”的问题，我们必须首先明确定义为什么需要调用 iterator-seq 以开头：

在 Clojure 中，您不会发现自己需要太频繁地创建 iterator-seq 对象。由于 clojure 可以非常轻松地处理“Iterable”java 对象的迭代（参见：[http](http://clojuredocs.org/clojure_core/clojure.core/iterator-seq) ://clojuredocs.org/clojure_core/clojure.core/iterator-seq ）。但是，迭代器本身是不可迭代的。
要完全理解这一点，您需要了解 Iterables 和 Iterators 之间的区别，这主要是由于在 Java 世界中保持语义一致和直接：[为什么 Java 的 Iterator 不是 Iterable？](https://stackoverflow.com/questions/839178/why-is-javas-iterator-not-an-iterable).

**那么什么是'seq'？**

在clojure 中有一个比java 的Iterator 接口更高的抽象，即ISeq。iterator-seq 在底层为我们创建了一个 ISeq。这个 ISeq 对象现在可以被许多 Clo​​jure 函数使用，这些函数对项目的顺序列表进行操作。

```
user=> (iterator-seq (.iterator (new java.util.ArrayList ["A" "B"])))
("A" "B")
;Thus, we now have an ISeq implementation derived from an iterator. 
```

因此，您的“iterator-seq”函数正在为您创建一个来自 java 迭代器的 Clojure“序列”。澄清一下——当我们在不可迭代的对象上调用“iterator-seq”时的错误信息是有用的：

```
user=> (iterator-seq "ASDF")                                         
java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Iterator (NO_SOURCE_FILE:0) 
```

这告诉我们“iterator-seq”函数需要一个 java.util.Iterator 作为输入。

您可能遇到的下一个合乎逻辑的问题是：

**为什么我们需要从迭代器创建序列？seq 抽象与 java 中的迭代器抽象有何不同？**

Iterable 接口不像 Clojure 的 ISeq 那样抽象。例如，考虑字符串。显然，字符串是顺序的。然而，它们在 Java 中不可迭代。数组也是如此。

从clojure网站：

“seq 适用于 Java 引用数组、Iterables 和字符串。由于该库的大部分其余部分都是基于这些函数构建的，因此对在 Clojure 算法中使用 Java 对象有很好的支持。”

因此，您的 iterator-seq 的目的是将您的迭代器对象“包装”成一个序列抽象，该抽象将能够利用所有 clojures 功能优势。

**定义 iterator-seq 的作用**

来自[http://clojure.org/sequences](http://clojure.org/sequences)：

“seq 函数产生了适合集合的 ISeq 实现。”

在您的情况下，我们可以这样说：

“iterator-seq 函数为您的 getIndexWordsIterator 生成 ISeq 的实现”。

**最后：我怎样才能迭代一个 seq ？**

这个问题需要根据上下文仔细回答。

迭代当然是可能的 - 但不是 clojure 的主要关注点，它可能不是你真正想要的。由于 iterator-seq 已经为我们创建了一个 SEQ，现在我们可能可以使用 Clojure 的函数运算符之一使用该 seq（即在列表推导、映射函数等中）。这消除了手动迭代的需要。

例如，*我们经常遍历一个列表来查找一个值*。在 clojure 中，我们可以使用 filter 函数找到一个值：

```
user=> (filter #(= \A %) (seq "ABCD"))   
(\A) 
```

而不是过滤，*也许我们想通过迭代将一个函数应用于多个对象，将结果存储在一个新的集合*中。同样，这不需要通过 Clojure 中的显式迭代来完成：

```
user=> (map #(.hashCode %) (seq "ABCZ")) 
(65 66 67 90) 
```

最后，如果您真的需要手动遍历您的集合，您可以使用 Loop-recur 构造手动尾递归遍历您的序列，一次一个元素： http: [//clojure.org/functional_programming#Functional%20Programming --递归%20循环](http://clojure.org/functional_programming#Functional%20Programming--Recursive%20Looping)。或者您可以使用标准递归调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:51:44.870

你实际上必须调用你的函数。目前将*函数* `parts-of-speech`传递给`index-words`.

```
(defn parts-of-speech
  []
  (.values POS))

(defn index-words
  [pos]
  (iterator-seq (.getIndexWordIterator dict pos)))

(-> (parts-of-speech) index-words println) 
```

注意周围的括号`parts-of-speech`。另请注意，您使用的互操作语法非常古老。

# solr - Solr 作为主要搜索引擎，Redis 作为自动完成引擎

> ID：10275322
> 
> 赞同：5
> 
> 时间：2012-04-23T05:38:04.713
> 
> 标签：solr, redis

我有一个包含大约 1+ 百万条记录的应用程序。

*   我计划使用**Solr**来处理所有搜索。
*   我还有一个自动完成功能。

我知道**Redis**的自动完成速度非常快，但是**Solr**也有自己的[自动完成](http://www.sematext.com/products/autocomplete/index.html)功能。

问题：我应该使用**Solr**作为主要搜索引擎（用于非自动完成任务）和一个单独的**Redis**用于自动完成，还是我最好只使用 Solr 来完成这两个任务？

笔记：

*   负载平衡也是一个问题。
*   顺便说一下使用 Rails。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T08:20:57.740

我认为您只会使 Redis 的事情变得不必要地复杂化（我通常是 Redis 的忠实粉丝）。
正如您已经提到的，Solr 有自己的自动完成功能。
我不会说 100 万个文档是生产环境的一个大索引。相反，我会说这是一个相当小的。
所以我不希望 Solr 的自动完成有任何问题。
除了您建议的方法之外，[这里还有一种实现它的不同方法](http://solr.pl/en/2010/10/18/solr-and-autocomplete-part-1/)，以分步教程的形式编写。

你是对的，Redis 非常适合大规模的东西，但是由于你的整个索引会增长，在某些时候你必须扩展 Solr（不仅仅是为了自动完成）。

# parent - 将 div 设置为不是身体的父级的 100% 高度

> ID：10275323
> 
> 赞同：0
> 
> 时间：2012-04-23T05:38:08.983
> 
> 标签：parent, html, css, document-body

经过几天的谷歌搜索后，我希望那里的一些天才能够帮助我解决我遇到的这个棘手问题。总的来说，我想要实现的是一个 1 页的网站，它有一个非常大的 bg 图像，它使用 jquery 在每个 div 之间滚动（这实际上与“页面”相同，设置为 100% 高度）。

我的问题是..

我有一个身体背景图片，大约 5000 像素的高度。

我有 3 个 div，我希望每个 div 都是浏览器窗口的 100% 高度。

因此，当从 div 滚动到 div 时，主体 bg 位于下方。

我无法将 BODY 设置为 100% 高度，因为这只会将我的 bg 图像“切断”到浏览器高度。

我需要保持我的 bg 图像的全长。

有没有可能的方法来实现这一目标？我在某处读到您可以为您的 BODY 元素设置一个 ID，但是我不确定这对于我想要实现的目标是否有效？

我知道有人有答案:)

穆什赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:34:51.357

我现在已经看到你的示例代码了，我想我找到了问题所在。您忘记将 html 标记的高度设置为 100%，这会导致您的问题。尝试这样做：

```
html, body { height: 100%; } 
```

我在这里做了一个 jsFiddle 演示：http: [//jsfiddle.net/Allan/Vx9dC/](http://jsfiddle.net/Allan/Vx9dC/)

# django - 通过Django中的模板在两个视图之间共享数据？

> ID：10275324
> 
> 赞同：1
> 
> 时间：2012-04-23T05:38:14.167
> 
> 标签：django, django-templates, django-views

我可能把事情复杂化了。

我有两种看法。第一个视图根据用户在表单中的输入生成一堆临时数据。每个生成的数据都包含一个名称和其他数据。我只想将名称传递给要呈现为超链接列表的模板。如果用户单击其中一个，则应为第二个视图指定用户单击的特定名称，以便视图可以对其进行操作。唯一的问题是，我不知道如何获取与名称相关的杂项数据。

生成的 misc 数据可能包含不是 URL 中标准字符的随机字符，因此我不能像仅使用名称那样将 misc 转换为超链接。

我有这样的事情：
**意见：**

```
# Displays the temp data names
def display(request):
    return render_to_response('display.html',{},context_instance=RequestContext(request))

# User provides input, generate temp data to be displayed as hyperlinks
def search(request):
    form = SearchForm(request.POST)
    if form.is_valid():
        usr_input = form.cleaned_data['input']
        data = generate_data(usr_input)   # generates a list of (name, misc) data.
        request.session['hyperlinks'] = get_list_names(data)   # returns only names in data
        return HttpResponseRedirect('views.display')

    else:
        ....

# User has clicked on a hyperlink, we must process specific data given its name.
def process_data(request, name):
    # How to get associated misc data created from search()? 
```

我还没有写模板，但想法是：
**模板：**

```
{% for name_link in request.session.hyperlinks %}
    <a href={% url process name_link %}> 
{% endfor %} 
```

一种解决方案可能是创建一堆会话变量：

```
for name in get_list_names(data):
    request.session[name] = // associated misc data 
```

但这似乎是一种浪费。另外，我必须稍后管理删除会话变量，因为这只是基于用户输入生成的临时数据。来自用户的新输入将创建另一个巨大的会话变量群！

另一种解决方案可能是将其临时存储在数据库中，但这似乎也是一个坏主意。

**编辑 - 尝试 christophe31 的建议：** 我不太确定我是否理解你的建议，但它是这样的吗？

```
data_dict = {name1:misc1, name2:misc2, etc...}
encoded = urllib.urlencode(data_dict)   # encoded = 'name1=misc1&name2:misc2...etc'
request.session['hyperlinks'] = encoded 
```

不过有几个问题：
1) 使用 urllib 对其进行编码不会破坏拥有字典的目的吗？它返回一个字符串而不是字典

2) 扩展 (1)，如果 misc 数据中有 '&' 和 '=' 怎么办？它会搞砸解析，这是第二种观点的关键和价值。此外，misc 数据可能包含不寻常的字符，因此允许将其作为要显示的 url 的一部分可能是不好的。

3) Django 是否可以防止用户恶意修改会话杂项数据，以便从第一个视图生成的杂项数据可能与传递给第二个视图的数据不同？那将是一个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:53:24.857

您可能希望将字典作为会话变量、设置 cookie 或通过数据链接作为 get 参数传递。

对我来说，您必须将所有这些数据放在字典中，然后再将其导出为获取参数（使用 urllib2）或将其存储在用户会话中。

问我是否需要有关建议方式的更多信息。

**编辑**：

它们是我看到的两种方式，按会话：

```
data_dict = {name1:misc1, name2:misc2, etc...}
request.session['hyperlinks'] = data_dict 
```

或者如果没有会话后端，则将数据传递给模板：

```
data_dict = {name1:misc1, name2:misc2, etc...}
encoded = urllib.urlencode(data_dict)
return render(request, "my_template.html", {"url_params":encoded,} 
```

和

```
<a href="{% url my_view %}?{{ url_params }}">Go to results</a> 
```

# java - Java：设置类路径

> ID：10275326
> 
> 赞同：1
> 
> 时间：2012-04-23T05:38:42.370
> 
> 标签：java, classpath, javacc

我有一个项目很快就要到期了，一切都很好地结合在一起，但是 java 类路径正在变得严重。我会尽量清楚和彻底地解释情况。

所以我们使用 Javacc 来编写编程语言。javacc 文件编译成几个 java 文件。Parser.java 文件包括对其他生成的 java 文件的引用和调用。因此，在生成之后，我们编译 Parser.java 文件。问题是我们遇到了很多错误，包括无法识别对其他 java 文件以及我们自己的文件的调用。**我们在课堂讨论板上询问了我们的问题，教授回答说“你需要在你的类路径中包含类文件”。好的，很好，所以问题是，我们如何做到这一点？**基本上，我们有一个目录，其中包含生成的 java 文件和我们的其他帮助文件。

**那么，我们尝试了什么？**

我尝试更改我的 .bashrc (Ubuntu) 文件以包含正确的类路径，但这不起作用。IE

```
 CLASSPATH=Home/project 
```

（就像我在文件中的语法一样）

我试过编译执行

```
javac -cp . Parser.java 
```

和

```
javac -cp "." Parser.java 
```

两者都不起作用。

我试图在我们的文件目录中编辑 xml（我认为是 xml）.classpath 文件。还是不行。

不知何故，我能够在我拥有的一个目录中编译 Parser.java（我们最终创建了多个目录，其中包含相同的文件，但徒劳无功）但是当我尝试运行时

```
java -cp . Parser.java 
```

或者

```
java Parser.java 
```

它说它找不到 main 并抛出（我相信，它在我的另一台计算机上）ClassNotFound 或 ClassNotDefined 异常（类似的，它无法在 Parser 文件中找到 main，即使它在那里）。

我们尝试将包减速和导入语句添加到我们的文件中，但似乎没有任何效果。

**基本上：如何成功更改类路径，以便可以在我的机器上编译和运行我的 java 文件（都在一个目录中而不是 jarred）？**

谢谢您的帮助。我非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:54:33.013

我强烈建议您研究[Ant](http://ant.apache.org/)。一个简单的构建文件可以为您解决所有这些问题。

您无需编辑您的`.bashrc`或`CLASSPATH`.

从命令行，您需要一起构建所有 java 文件。我不确定 JavaCC`javacc.jar`在生成 Lexer 和 Parser 后是否需要。但是让我们假设它适用于一些通用的 AST 支持。

`javacc.jar`位于`~/javacc-5.0/lib/javacc.jar`

### 场景一：简单的目录结构，所有Java文件都在没有包的根目录下。

```
root
  | Parser.java
  | Lexer.java
  | Program.java 
```

要编译这些我需要运行：

`javac -cp ~/javacc-5.0/lib/javacc.jar Parser.java Lexer.java Program.java`

那么我可以`Program`像这样执行，如果程序有`main`

`java -cp ~/javacc-5.0/lib/javacc.jar:. Program`

### 场景 2：中等目录结构，根目录中的代码但带有包。

```
root
  | org
     | myproject
          | Parser.java
          | Lexer.java
          | Program.java 
```

那么你需要像这样执行javac：

`javac -cp ~/javacc-5.0/lib/javacc.jar org/myproject/Parser.java org/myproject/Lexer.java org/myproject/Program.java`

并执行

`java -cp ~/javacc-5.0/lib/javacc.jar:. org.myproject.Program`

### 场景 3：复杂的目录结构，包含包的特定源目录。

```
root
   | src
      | org
          | myproject
              | Parser.java
              | Lexer.java
              | Program.java 
```

那么你需要像这样执行javac：

`javac -cp ~/javacc-5.0/lib/javacc.jar -sourcepath src src/org/myproject/Parser.java src/org/myproject/Lexer.java src/org/myproject/Program.java`

并执行

`java -cp ~/javacc-5.0/lib/javacc.jar:src org.myproject.Program`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:59:32.203

`javac`和之间有区别`java`。你试图以错误的方式使用它们。`javac`是生成 *.class 文件的编译器（在您的情况下为 Parser.class）。这个 *.class 文件必须由`java`.

所以如果我有文件 Parser.java

```
class Parser {

  public static void main(String[] args) {
    System.out.println("Hi");
  }

} 
```

我会去这个文件所在的目录并在 shell 中运行：

```
javac Parser.java 
```

比运行编译的文件

```
java Parser 
```

就是这样。注意java文件中的类名必须与文件名相同。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T05:43:28.633

1.  创建所有已编译类的 Jar 文件。有关如何创建 jar 文件的信息，请参阅本[教程。](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

2.  用这个命令开始你的程序

    ```
     java -classpath pathToJarFile com.abc.MainClass 
    ```

# android - 使用 JSON 向服务器发送 GPS 坐标

> ID：10275328
> 
> 赞同：0
> 
> 时间：2012-04-23T05:39:09.440
> 
> 标签：android, json, gps, latitude-longitude

您好，我想将我的 gps 坐标和设备 ID 发送到服务器。我正在我的服务器上工作，但只是想知道下面的代码是否足以发布坐标..？

```
//get device id as following
TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        String deviceid = telephonyManager.getDeviceId();

            //this is JSON part to put your information inside it
            String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"deviceid\":\""+deviceid+"\"}}";

            HttpClient httpClient = new DefaultHttpClient();

            // Post method to send data to server
            HttpPost post = new HttpPost();

            post.setURI(new URI("http://myserver.com/myphppage.php"));

            // set your post data inside post method    
            post.setEntity(new StringEntity(postData));

            // execute post request here 
            HttpResponse response = httpClient.execute(post); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:48:09.003

试试看。

基本上它取决于您访问服务器的架构（`http`或`https`），但如果连接不安全，那就差不多了。

# javascript - 认证后重试的JS回调函数保存在哪里？

> ID：10275338
> 
> 赞同：1
> 
> 时间：2012-04-23T05:40:07.270
> 
> 标签：javascript, jquery, ajax

我有一个只允许经过身份验证的用户的操作。如果尚未登录的用户单击此链接，Web 服务器将返回未登录响应。然后，我将登录表单显示在一个浮动的“灯箱”div 中。如果用户成功登录，我希望浏览器重试该操作。

我很难找到一个存储我想重试的功能的好地方。目前，我将它附加到一个全局对象上，这看起来很 hacky。jQuery“延迟”模式似乎适合这里，但我仍然需要在某处保留对延迟对象的引用，而且我看不到正确的位置。

建议？

下面是一些简化的代码（实际上，Ajax 响应决定了我们是显示登录表单还是确认操作）：

```
$(function() { 
    $('li.secured').find('a').click(function() {
        var link = this;
        var action = function() {               // captures 'link'
            if(RootObj.IsAuthenticated() ) {            // already logged in 
                window.location.assign( link.href );
            } else {
                // pass ourself in as a callback to be repeated after authentication
                // Yes, this seems to work even in the midst of our own definition...
                RootObj.ShowLoginForm( action );  
            }
            return false;           // don't go immediately to the new url
        }
        return action();
    });
});

RootObj.ShowLoginForm = function( callback ) {
    var lb = $('#lightbox');
    if(lb.length == 0) { lb = $('<div id="lightbox" class="lightbox"></div>').appendTo('body'); }
    lb.load('login.html');

    RootObj.callback = callback;    // is there a better place to store this callback function?
} 
```

# maven - 声纳没有拾取通过在詹金斯运行 maven 创建的三叶草测试结果

> ID：10275339
> 
> 赞同：5
> 
> 时间：2012-04-23T05:40:10.023
> 
> 标签：maven, jenkins, sonarqube, clover

我整天都在研究这个问题，但找不到解决方案，所以我想求助于 stackoverflow 社区。

我有一个使用 Jenkins 的服务器设置（版本 1.454）。它被配置为使用 Maven（版本 3.0.4）执行构建。构建命令如下：

```
clean clover2:setup verify clover2:aggregate clover2:clover 
```

Jenkins 安装并配置了声纳插件。我的声纳安装（版本 3）与詹金斯在不同的服务器上。构建完成后，我可以在声纳上看到结果（构建的基础知识）。

我已经手动安装了三叶草插件（sonar-clover-plugin-2.8.jar），将其放入“扩展/插件”文件夹中。它出现在声纳中，我可以对其进行配置。我将许可证、版本 (3.1.4) 和 sonar.clover.reportPath 输入为“target\site\clover\clover.xml”。

当我运行构建时，它像以前一样成功，并且我可以像以前一样在 Sonar 中看到基本结果，但是，我看不到任何测试代码覆盖率结果。当我查看 Maven 构建输出时，我注意到以下内容：

```
[INFO] Writing report to '/opt/jenkins/jobs/foo/workspace/target/site/clover/clover.xml' 
```

然后在输出的底部附近：

```
[INFO] [15:08:36.586] Clover XML report not found 
```

以下内容也在我的 pom 中：

```
 <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
    <sonar.clover.reportPath>target\site\clover\clover.xml</sonar.clover.reportPath>
    <sonar.surefire.reportsPath>target\surefire-reports</sonar.surefire.reportsPath>
    <sonar.core.codeCoveragePlugin>clover</sonar.core.codeCoveragePlugin>
    <sonar.clover.version>${clover.version}</sonar.clover.version> 
```

当我查看 jenkins 框时，我可以看到它已经生成了 clover.xml 文件（事实上，在我的摆弄中，我有 clover 插件在 jenkins 上工作，所以我可以在那里看到结果！）。

我在这个阶段猜测詹金斯和声纳在单独的盒子上存在一些问题。任何帮助，将不胜感激！

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:57:47.107

经过更多的摆弄，看来我需要更改以下内容：

```
<sonar.clover.reportPath>${project.build.directory}/site/clover/clover.xml</sonar.clover.reportPath>
    <sonar.surefire.reportsPath>${project.build.directory}/surefire-reports</sonar.surefire.reportsPath> 
```

以下是一个很好的参考： [所有关于 pom 变量](http://www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-properties.html)

# android - 什么是编辑文本中的 android:ems 属性？

> ID：10275348
> 
> 赞同：179
> 
> 时间：2012-04-23T05:40:39.020
> 
> 标签：android

> **可能重复：**
> [Ems 是什么意思？（Android 文本视图）](https://stackoverflow.com/questions/7053738/what-means-ems-android-textview)

其中`EditText` 有一个名为 的属性`android:ems`。描述是“使之`EditText`正好有这么多 em 宽”

ems 是什么意思？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-04-23T05:44:21.020

取自：[http](http://www.w3.org/Style/Examples/007/units) ://www.w3.org/Style/Examples/007/units ：

> em 只是字体大小。在具有 2in 字体的元素中，1em 因此意味着 2in。用 em 表示大小，例如边距和填充，意味着它们与字体大小有关，如果用户有大字体（例如，在大屏幕上）或小字体（例如，在手持设备上），则大小将成比例。'text-indent: 1.5em' 和 'margin: 1em' 之类的声明在 CSS 中非常常见。

`em`基本上是字体大小的 CSS 属性。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-23T05:44:10.880

> “em”是宽度的印刷单位，宽字母的宽度，如“m”发音为“em”。同样有一个“en”。类似地，“en-dash”和“em-dash”代表 – 和 –</p>

[-蒂姆·布雷](https://groups.google.com/d/msg/android-developers/-idq6Kxx5Jc/AiKN5Fe9PGAJ)

# android - 如何将应用程序从 Intent 设置为全屏，而不是从主 Activity

> ID：10275352
> 
> 赞同：0
> 
> 时间：2012-04-23T05:41:24.900
> 
> 标签：android, android-layout, android-intent

我的应用程序有 4 个选项卡，每个选项卡创建一个子视图（意图）现在我在每个意图中都有一个选项/菜单按钮的处理程序，菜单项是“切换全屏”这不起作用，因为意图不是父项视图，而包含 TabHost 的活动是父视图，现在我需要知道如何设置整个应用程序。到全屏模式或如何参考父活动通过它设置全屏模式。

这是我的代码片段

```
 public class MainActivity extends TabActivity {

    public void toggleFullScreen(){
    // This has the code to set App. to full screen
    }

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        Intent myIntent = new Intent(this, MywebviewActivity.class);
        tabHost.addTab(             
                tabHost.newTabSpec("SomeName")
                .setIndicator("Some Title")
                .setContent( myIntents )); 
```

现在我需要从“MywebviewActivity”而不是我的 MainActivity 设置全屏模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:57:25.360

检查这个

将此添加到您的 webview 活动中

```
 Intent i=getIntent();
    if(i!=null)
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:01:57.603

修改您的代码`MainActivity`如下

```
Intent myIntent = new Intent(this, MywebviewActivity.class);

 intent.putExtra("isFullScreen", true); 
```

现在在编写代码的`onCreate()`方法`MywebviewActivity`如下

**放“setContentView（R.layout.main）；” 此代码下面的方法如下：**

```
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

    Intent intent=getIntent();
    boolean isfullScreen =  intent.getBooleanExtra("isFullScreen", false);

        if(isfullScreen )
        {
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }

setContentView(R.layout.main);

} 
```

不会的

# ruby-on-rails - 如何修剪 HAML 中的所有空格？

> ID：10275353
> 
> 赞同：2
> 
> 时间：2012-04-23T05:41:24.737
> 
> 标签：ruby-on-rails, haml, whitespace

在我的示例中，我想单独标记单词“word”中的字母

```
%span.word
  %span.w W
  %span.o O
  %span.r R
  %span.d D 
```

实际上，这会产生类似 html

```
<span class="word">
  <span class="w">W</span>
  <span class="o">O</span>
  <span class="r">R</span>
  <span class="d">D</span>
</span> 
```

如您所料，这显示为

> 单词

但我希望它显示为

> 单词

如何告诉haml删除`%span.word`块内的所有空格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T05:51:29.363

```
%span.word
  %span.w> W
  %span.o> O
  %span.r> R
  %span.d> D 
```

`>`(用于标签周围的空格) 和`<`(用于标签内的空格) 用于删除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-21T22:11:11.503

[http://haml.info/docs/yardoc/Haml/Options.html#remove_whitespace-instance_method](http://haml.info/docs/yardoc/Haml/Options.html#remove_whitespace-instance_method)

HAML 允许您设置一个 remove_whitespace 选项，该选项将从所有标签中删除空格，如果您不想在任何地方使用 < 和 > 乱扔模板。

# javascript - 我在哪里可以学习如何在 Ruby on Rails 中制作 Javascript 驱动的下拉菜单？

> ID：10275354
> 
> 赞同：0
> 
> 时间：2012-04-23T05:41:31.527
> 
> 标签：javascript, ruby-on-rails

我在顶部有一个导航栏，其中包含：

```
 <%= link_to content_tag(:li, "Watching me"), followers_user_path(current_user) %>

    <%= link_to content_tag(:li, "I'm Watching"), following_user_path(current_user) %> 
```

而且我想创建另一个链接，它有一个带有这些选项的 javascript 下拉菜单作为选择...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:54:10.647

这里有很多选择，但我认为最好的方法是使用 Twitter Bootstrap：http: [//twitter.github.com/bootstrap/javascript.html](http://twitter.github.com/bootstrap/javascript.html)。

您还必须安装 jQuery。

# firefox - 如何验证和获取知名 ssl 证书？

> ID：10275357
> 
> 赞同：0
> 
> 时间：2012-04-23T05:41:47.620
> 
> 标签：firefox, ssl, ssl-certificate

我只是从 mozilla firefox 中删除所有 SSL 证书和证书颁发机构。现在它甚至不让我打开 gmail.com。

如何有选择地在线获取和验证 gmail 证书（以及任何其他证书）？（无需重新安装 Firefox）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:04:24.753

您可以从 Mozilla 获取完整列表：

[https://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt?raw=1](https://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt?raw=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:46:46.143

[Ubuntu 提供了一个`ca-certificates`包](http://packages.ubuntu.com/precise/ca-certificates)，[Debian 提供了一个类似的`ca-certificates`包](http://packages.debian.org/sid/ca-certificates)。如果您希望检查这两个证书并选择您信任的证书，您可以手动将它们包含在您的系统中。虽然 Ubuntu 和 Debian 都不能保证软件包中包含的证书颁发机构，但仍有数百万人依赖它们进行日常使用。如果您使用的是 Debian 或 Ubuntu 系统，只需键入`sudo apt-get install ca-certificates`. 如果您不在 Debian 或 Ubuntu 上，那么您可能希望`.tar.gz`从上述任一链接网页下载源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:00:50.513

这不应该是您删除证书并且您将无法打开您的 gmail 的情况。

当您再次访问 gmail 时，服务器将向您发送证书。您只需要保存它们，它应该可以工作。您也可以尝试使用 https:gmail.com/。我认为您在浏览器中禁用了 cookie 功能。

# java - Java：SourceDataLine.write(...) 是否屏蔽中断？

> ID：10275366
> 
> 赞同：2
> 
> 时间：2012-04-23T05:42:33.067
> 
> 标签：java, audio, interrupt

我有一个循环调用 SourceDataLine.write(...) 的线程，直到所有音频数据都被写入（播放）。我希望能够过早地停止播放（在循环通常会被 EOF 类型的条件终止之前）并且我（尝试）使用中断。当我调用playbackThread.interrupt() 时，它只会偶尔导致线程中断和终止。代码中的微小更改或连续调用会产生不同的（看似随机的）结果。我已经调试并尝试使用 Thread.currentThread.isInterrupted() 而不是 Thread.interrupted()。我已经注意到，如果我用其他东西（例如长计数循环）替换 SourceDataLine.write(...) 调用，线程确实会以可预测且一致的方式终止。

SourceDataLine.write(...) 是否“消耗”中断但不抛出 InterruptedException？意思是，它是否清除中断标志（可能使用 Thread.interrupted()），忽略它，然后继续？这可以解释为什么中断会间歇性地工作：如果它发生在 SDL.write(...) 方法中，它会被丢弃；否则，在我使用 Thread.interrupted() 调用进行测试之前，它会保持“完整”。这将是可怕的，但这是我花了一整天时间后能想出的唯一解释。我找不到 SourceDataLine.write(...) 的任何来源，因为它是一个接口，并且（我想）实现是依赖于机器的。

由于我没有使用 try/catch 并期望在循环中捕获 InterruptedExeption，而是在每次循环的底部调用 Thread.interrupted() （或 Thread.currentThread.isInterrupted()），我可以轻松创建我自己的interruptFlag 并对其进行测试。这正是我几个月前在急于赶上日程时中断 TargetDataLine.read(...) 方法时在其他地方所做的。我周末的大部分时间都在彻底调查这个长期谜团的根源，但没有成功。

使用实际的 Java 中断机制似乎更加一致/优雅——但如果它不起作用，则不然。这个解释靠谱吗？

回放线程代码：

```
public void run() {
    int offset = 0;
    int remaining = cRawAudioBuffer.length;
    int length = WRITE_LENGTH;
    int bytesWritten = 0;
    cOutputLine.start();
    while (remaining>0) {
        length = Math.min(length,remaining);
        bytesWritten = cOutputLine.write(cRawAudioBuffer,offset,length);
        offset += bytesWritten;
        remaining -= bytesWritten;
        if (Thread.currentThread().isInterrupted()) {
            System.out.println("I Was interrupted");
            break;
        }
    }
    cOutputLine.close();
} 
```

**更新：**

仍在调查以更全面地了解这里发生的事情。我通过从写循环本身内部调用 Thread.interrupt() 来强制中断播放线程，并插入对 Thread.currentThread().isInterrupted() 的调用 - 因此没有用测试本身清除中断标志 - 之前和在 write() 调用之后。我发现对于前几个循环，从 write() 方法返回后保留了中断。前 3 次循环后，从 write() 返回后清除中断。此后，它*几乎*总是，但*不是*总是，从 write() 返回后清除。我的猜测是，如果 write() 被阻塞以等待其缓冲区清除，它将检测、忽略并清除中断标志。仍然只是一个猜测，我更愿意确定（以避免传播我做错的事情并让它以后咬我）。关于如何在不访问来源的情况下验证这个假设的任何想法？

```
public void run() {
    ....
    while (remaining>0) {
        length = Math.min(length,remaining);
        Thread.currentThread().interrupt();
        System.out.println("Player interrupt flag is " + (Thread.currentThread().isInterrupted()?"":"not ") + "set before write()");
        bytesWritten = cOutputLine.write(cRawAudioBuffer,offset,length);
        System.out.println("Player interrupt flag is " + (Thread.currentThread().isInterrupted()?"":"not ") + "set after write()");
        offset += bytesWritten;
        remaining -= bytesWritten;
        if (Thread.interrupted()) {
            System.out.println("I Was interrupted");
            //break;
        }
    }
    cOutputLine.close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:36:49.237

事实证明，SourceDataLine.write() 在写入期间阻塞，如果在写入期间发生迭代中断，则忽略它并重置中断标志。没有办法直接检测中断。我想这是使用 Java 音频的人的常识，如果不了解这一点，就无法创建可靠的可中断音频播放。我将（遗憾地）不得不求助于在每次 write() 后读取的同步标志来检测中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:10:09.157

您遇到的问题是，大部分时间都花在了`cOutputLine.write`不会因中断而停止的地方。这意味着您循环需要先写入一些数据，然后才能检查中断。如果此阻塞（由于缓冲区已满），它将永远不会检查中断。

解决此问题的一种方法是关闭将在写入中触发 IOException 的流。或者您可以使用阻塞 NIO（它不必是非阻塞的），它会在线程中断时停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T17:28:47.553

`line.available()`我使用的解决方案是在对象上进行查询，`SourceDataLine`以获取可以在不阻塞的情况下写入的字节数。我观察到，如果在阻塞写入期间执行`write`操作的线程`SourceDataLine`被中断（即写入比`line.available()`调用返回的值更多的字节），则似乎没有设置中断标志并且调用`Thread.interrupted()`返回`false`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-07T00:53:27.930

`SourceDataLine.write()`通过此源数据线将音频数据写入混音器。此方法会阻塞，直到请求的数据量已被写入。如果在写入期间发生中断，它将被忽略并重置中断标志。为了解决这个问题，我们可以使用`ExecutorService`处理`InterruptedException`异常。

```
public void run() {
    int offset = 0;
    int remaining = cRawAudioBuffer.length;
    int length = WRITE_LENGTH;
    int bytesWritten = 0;
    cOutputLine.start();

    ExecutorService executor = Executors.newSingleThreadExecutor();

    while (remaining>0) {
        try {
            executor.submit(() -> {
                length = Math.min(length,remaining);
                bytesWritten = cOutputLine.write(cRawAudioBuffer,offset,length);
                offset += bytesWritten;
                remaining -= bytesWritten;
            }).get();
        } catch (InterruptedException interruptedException) {
            Thread.currentThread().interrupt();
        }
    }
    cOutputLine.close();
} 
```

# php - 是否可以在 javascript 和 php 中进行双重包含？

> ID：10275371
> 
> 赞同：-2
> 
> 时间：2012-04-23T05:43:19.807
> 
> 标签：php, javascript

我正在使用以下代码来检查用户是否喜欢我的 Facebook 页面？

```
 <style>xxxxxxxxxxxxxxxxx</style>
    <script src="http://www.google.com/jsapi"></script><script>google.load("jquery", "1");</script> 
    <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
    <script type="text/javascript">
        Username="gagsallday", 
        Title="Join Our Facebook!", 
        Skin="01", 
        Time="30", 
        Wait="0", 
        Lang="en"
    </script>
    <script type="text/javascript" src="likeboxfbfanpro.js"></script>
    <script type="text/javascript">$(document).ready(function(){$().popupbox({ closeable: false });});</script>

<?
echo'<Center><Font Face="Tahoma"><Font size="10">Your Content Here!'; 
```

最后一段代码是我应该有我的页面内容的地方：

```
 <?
    echo'<Center><Font Face="Tahoma"><Font size="10">Your Content Here!'; 
```

我的问题是如何将此代码添加到我的页面？像这样 ？它没有工作，因为我不能包含一个文件，里面已经有包含函数？我想要的是这样的东西，但我该怎么做呢？

```
<?php include('the-ablve-code-goes-here.php');?>
<html>
<head>
</head>
<body>
stuff goes here...
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:54:54.060

> 像这样 ？

是的。

> 它没有工作，因为我不能包含一个文件，里面已经有包含函数？

不，如果它不起作用，那不是原因。也许您没有打开短标签。不要使用短标签。

# html - CSS3 防止内容溢出 flexbox

> ID：10275372
> 
> 赞同：0
> 
> 时间：2012-04-23T05:43:22.463
> 
> 标签：html, css, webkit

我试图在现有页面周围放置一个边框，以实质上“框架”内容。我一直在尝试使用 webkit 的 flexbox，因为它的 flex 属性似乎最适合这项工作，但是当内容超出窗口大小时，我无法让它工作。理想情况下，我希望它在框架内滚动。到目前为止，我在[http://cssdesk.com/](http://cssdesk.com/)

我只需要它在 Chrome Canary 中工作，所以我不担心兼容性问题，只是让它工作。任何提示，或者这是否在我可以复制的其他地方完成？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:46:30.500

尝试修复一个显式的`width`and`height`和 set`overflow:auto`

# c# - 正则表达式匹配 Asp.Net 中的密码字段

> ID：10275376
> 
> 赞同：0
> 
> 时间：2012-04-23T05:43:40.797
> 
> 标签：c#, asp.net, regex

我正在使用`Asp.Net/C#`，我正在使用`RegularExpressionValidator`来匹配密码字段。我的要求是我需要用户输入一个密码，该密码长度至少为 7 个字符，并且可以包含字母和数字字符的任意组合，但它应该严格包含一个非字母数字字符，任何人都可以建议我如何实现这一点。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:32:15.920

试试这个

```
String[] words = { "Foobaar", "Foobar1", "1234567", "123Fooo", "Fo12!", "Foo12!", "Foobar123!", "!Foobar123", "Foo#bar123" };

foreach (String s in words) {

    Match word = Regex.Match(s, @"
          ^                        # Match the start of the string
            (?=                    # positive look ahead
                [\p{L}\p{Nd}]*     # 0 or more letters or digits at the start
                [^\p{L}\p{Nd}]     # string contains exactly one non-digit, non-letter
                [\p{L}\p{Nd}]*     # 0 or more letters or digits after the special character 
            $)                     # till the end of the string
            .{7,}                  # match 7 or more characters
          $                        # Match the end of the string
        ", RegexOptions.IgnorePatternWhitespace);
    if (word.Success) {
        Console.WriteLine(s + ": valid");
    }
    else {
        Console.WriteLine(s + ": invalid");
    }
}
Console.ReadLine(); 
```

`\p{L}`是具有“字母”属性的 Unicode 代码点

`\p{Nd}`是具有“数字”属性的 unicode 代码点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:48:21.297

```
((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{7,20})

(           # Start of group
  (?=.*\d)      #   must contains one digit from 0-9
  (?=.*[a-z])       #   must contains one lowercase characters
  (?=.*[A-Z])       #   must contains one uppercase characters
  (?=.*[@#$%])      #   must contains one special symbols in the list "@#$%"
              .     #     match anything with previous condition checking
                {7,20}  #        length at least 7 characters and maximum of 20 
) 
```

[从这里](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:32:21.617

我使用以下内容来满足我的需求`^([\w]*[(\W)]{1}[\d]*)$`，这允许密码以字母开头任意次数，然后密码必须包含非字母数字字符仅 1 次，后跟任意次数的数字。

# java - Java swing gui内存分配

> ID：10275381
> 
> 赞同：3
> 
> 时间：2012-04-23T05:44:05.850
> 
> 标签：java, swing, user-interface, memory

嗨，我想知道是否有办法设置 jbutton 来执行与 setdefaultcloseoperation(JFrame.DISPOSE_ON_CLOSE) 等效的操作，因为我不明白如果框架对象在框架设置为不可见时仍然有侦听器，它如何有资格进行收集。如果这没有意义，我可以发送代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:52:58.687

*   顶级容器 ( `JFrame`, `JDialog`...) 错过了 的实现`finalize()`，[那么它们永远不会被 GC](https://stackoverflow.com/questions/6309407/remove-top-level-container-on-runtime)

*   等价于`JFrame.DISPOSE_ON_CLOSE`is only`setVisible(false)`

*   您可以从方法返回所有顶级容器`Window[] wins = Window.getWindows();`

*   您只能`JComponents`从中删除所有`ContentPane`，以返回使用过的内存

编辑

*   只有可见的容器`Focus`可以监听或触发来自[Swing 监听器的事件](http://docs.oracle.com/javase/tutorial/uiswing/events/api.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:51:32.623

```
addActionListener( new ActionListener(){
            public void actionPerformed(ActionEvent e){
                   myframe.dispose();
                   }
            }); 
```

# c# - 在大型文件夹上使用 FindItems 交换 Web 服务

> ID：10275384
> 
> 赞同：0
> 
> 时间：2012-04-23T05:44:15.607
> 
> 标签：c#, outlook, exchangewebservices

我一直在尝试从包含超过 200 万个项目的 Outlook 公用文件夹中检索要删除的项目。然而，即使页面大小为 10，FindItems 也需要永远返回，就好像它正在查询文件夹中的每个项目一样。到现在2小时后还没有回来。有没有办法阻止它这样做？

```
var folder = GetPublicFolder(service);
folder.Load();
var items = folder.FindItems(new ItemView(10)
    {
        Traversal = ItemTraversal.Shallow
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:18:39.263

从这么大的文件夹中检索项目的唯一方法是在查找项目时使用 PropertySet.IdOnly 并相应地调整批量大小。如果没有超时，我也无法对此进行任何过滤。

```
items = folder.FindItems(new ItemView(100)
                {
                    Traversal = ItemTraversal.Shallow,
                    PropertySet = PropertySet.IdOnly
                });

service.LoadPropertiesForItems(items, new PropertySet(ItemSchema.DateTimeReceived, 
                    ItemSchema.Subject)); 
```

然后对批次进行迭代，对项目做你想做的事情，同时将你加载的内容保持在最低限度。由于无法过滤，您只能从顶部抓取项目，因此要执行大多数操作，您需要在批次之间将已处理的项目移动到单独的文件夹中。

# ios - 如何使用我的应用程序文档目录文件夹中的图像创建照片库视图？

> ID：10275393
> 
> 赞同：0
> 
> 时间：2012-04-23T05:45:03.697
> 
> 标签：ios, ios4, three20, photo-gallery

我将照片保存在应用程序文件夹中，现在我需要在我的应用程序的图库视图中显示这些保存的照片，我已经尝试过**Fgallery**，但它不值得，因为它只显示本地（主包）和网络（服务器）图像。我需要在画廊视图中显示我**的应用程序文件夹的图像**，我不知道如何使用**Three20**库。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:56:15.027

您可以使用[ALAsset](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)显示 iPhone 相册中的照片。您可以参考此示例代码[ELCImagePicker](https://github.com/elc/ELCImagePickerController)。

# java - 在 Struts2 拦截器中使用资源包

> ID：10275395
> 
> 赞同：5
> 
> 时间：2012-04-23T05:45:06.270
> 
> 标签：java, jakarta-ee, struts2, web

Struts2 Actions 通常扩展`ActionSupport`实现`TextProvider`接口的类，并使用方法以方便的方式提供对资源包文件的访问`getText()`。

我想在拦截器中使用资源包。我想我必须复制`TextProvider`实现并将其粘贴到我的拦截器中。

我已经定义了全局资源文件`struts.xml`

```
<constant name="struts.custom.i18n.resources" value="resources.global" /> 
```

并放入`global.properties`包装中`resources`。

它在动作类中运行良好

有没有更简单的方法在拦截器中使用资源包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:19:19.947

您可以使用该`java.util.ResourceBundle`课程。

```
ResourceBundle bundle = ResourceBundle.getBundle("my_resource_name", locale);
bundle.getString("resource_key"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-08T08:37:16.903

如果您的操作是类型，`ActionSupport`您可以执行以下操作：

```
ActionSupport actionSupport = (ActionSupport)invocation.getAction();
actionSupport.getText("sample.key"); 
```

# jquery - 如何获取 ID 值

> ID：10275396
> 
> 赞同：0
> 
> 时间：2012-04-23T05:45:17.657
> 
> 标签：jquery

```
$(function ()
{

    $(".tb").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "StudentName.asmx/FetchNameList",
                data: "{ 'FirstName': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function (data) { return data; },
                success: function (data) {
                    response($.map(data.d, function (item) {

                        return {
                            value: item.Name
                        }
                    }))
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 1
    });
}); 
```

我想从上面获取 id 字段，我创建了一个新文本框并插入了 $('.id').val(item.ID); 但它不会返回我从自动完成文本框中选择的相同 id 字段。我怎样才能得到那个ID？

我得到的 JSON 数据是这样的。

{"d":[{"_ *type":"Student","ID":1,"Name":"Sagar Khyaju"},{* "_type":"Student" ,"ID":2,"Name" :"Sagar Khyaju"},{"__type":"Student","ID":4,"Name":"Sagar Lkkk"}]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:23:10.557

我找到了解决方案，以防有人需要。干杯! :)

```
 $(function () {
        $(".tb").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "StudentName.asmx/FetchNameList",
                    data: "{ 'FirstName': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.d, function (item) {
                            return {
                                value: item.Name, ID: item.ID
                            }
                        }))
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            select: function (event, ui) {
                $(this).val(ui.item.value);
                return false;
            },
            change: function (event, ui) {
                $(".student_id").val(ui.item.ID);
                return false;
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:55:29.007

将 jsondata 存储在变量中，您可以从结果变量中进行迭代

```
var result= eval("(" + jsondata + ")"); 
```

我猜你正在使用自动完成

请看下面的链接

[自动完成](http://jqueryui.com/demos/autocomplete/#custom-data)

# windows - 为什么 Windows XP（32 位）的可用内存限制为 3GB？

> ID：10275398
> 
> 赞同：2
> 
> 时间：2012-04-23T05:45:40.760
> 
> 标签：windows, memory, memory-management

有人写道，对于 windows xp 32 位，前 700 mb 或 ram 左右是不可用的。但是也有人说安装超过3gb左右没有意义。所以这让我想到了这个问题。操作系统保留的区域实际上位于该内存中，还是仅使用地址空间。换句话说，内存是物理上填充了 700mb 的信息，还是 700mb 的 cpu' 地址空间被保留和映射。因为如果不是，那么安装 3gbs 仍然是一个问题，因为它仍然会以某种方式带走 700mb？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T05:59:49.017

32 位系统有 4 GB 的可用地址空间，但地址空间的用途不仅仅是系统内存。例如，可以将部分显卡内存映射到地址空间，这样就减少了系统内存的可用空间。[这在 Microsoft 的Windows 内存限制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)页面的“显卡和其他设备如何影响内存限制”部分中进行了介绍。

适用的文本如下，以供后人保留：

> 设备必须将其内存映射到 4 GB 以下才能与不支持 PAE 的 Windows 版本兼容。因此，如果系统有 4GB 的 RAM，其中一些要么被禁用，要么被 BIOS 重新映射到 4GB 以上。如果内存被重新映射，X64 Windows 可以使用这个内存。Windows 的 X86 客户端版本不支持 4GB 以上的物理内存，因此它们无法访问这些重新映射的区域。任何 X64 Windows 或 X86 Server 版本都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:56:15.970

操作系统需要为各种功能保留一些物理地址空间，例如中断处理程序、系统调用等。这些地址对于操作系统上的程序变得不可用。

# core-data - 使用和不使用映射模型的多个版本的核心数据迁移

> ID：10275399
> 
> 赞同：3
> 
> 时间：2012-04-23T05:45:46.047
> 
> 标签：core-data, core-data-migration

在过去的一个小时里，我已经阅读了有关此问题的各种帖子，但没有看到以下问题的准确答案。

我计划为我的应用程序执行另一次数据迁移，如下所示：

版本 1 - 初始数据模型
版本 2 - 具有自定义映射和辅助方法
的新模型 版本 3 - 具有简单映射的新模型（添加了一些属性和关系）

对于版本 2，我使用了 NSMigratePersistentStoresAutomaticallyOption 选项。对于版本 3，我想添加 NSInferMappingModelAutomaticallyOption 选项，因为我不需要映射模型，因为转换是“轻量级迁移”。

但是，由于版本 2 有自定义迁移，应用程序的“内部逻辑”是否会知道版本 2 需要使用自定义映射模型，即使为最新版本（版本 3）添加了 NSInferMappingModelAutomaticallyOption 选项？

我看到有一些方法可以检查版本信息并将其记录下来进行测试。我的应用程序也处于版本控制之下，因此我可以测试运行从版本 1 到 2 到 3 的转换。

但是，我想从设计的角度获得反馈，因为我想 100% 确定我不会把这件事搞砸:-)

我很感激任何反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:06:01.893

你做的一切都是正确的。无论迁移类型如何（轻量级或非轻量级），整个迁移历史对于到达并发数据模型版本都是必要的。此外，您提出的工作流程设计中没有可察觉的缺陷。

# java - Jasper 报表、子报表和编码

> ID：10275400
> 
> 赞同：1
> 
> 时间：2012-04-23T05:45:52.320
> 
> 标签：java, encoding, utf-8, jasper-reports, subreport

我有一份报告和一份子报告，其中包含用于法语国际化的资源包。不会引发错误或警告，但是当我使用此报告创建 pdf 时，会出现奇怪的字符，因为编码错误（é 是一个例子）。

我仍在调查该问题，但我想它与子报告有关。

几个精度：

*   我不知道为什么，但是属性文件是 utf8 编码的，并且资源包的读取器被覆盖（并且我不允许更改它:()。
*   特殊字符在主报告中看起来不错；该问题仅出现在子报表部分。（一切都来自同一个属性文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T01:02:43.903

好的问题解决了：

在 java 文件中，在覆盖资源包上需要的任何内容之后（对我来说：UTF-8 作为输入编码），您执行以下操作：

```
reportParamMap.put(JRParameter.REPORT_RESOURCE_BUNDLE, resourceBundle); 
```

好吧，在 JRXML 文件中，不要忘记将资源包传递给需要它的子报表：

```
<subreport>

    <reportElement />

    <subreportParameter name="REPORT_RESOURCE_BUNDLE">
        <subreportParameterExpression>
            <![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]>
        </subreportParameterExpression>
    </subreportParameter>

    <dataSourceExpression/>

    <subreportExpression/>

</subreport> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:16:30.543

在您的属性文件中，您是否尝试过使用字符/特殊字符的代码？

例如字符“ `é`”必须是`\u00E9`

# ruby-on-rails - 根据父属性验证子级

> ID：10275401
> 
> 赞同：2
> 
> 时间：2012-04-23T05:45:57.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
class Query < ActiveRecord::Base
  #relations
  has_one :r_job
  accepts_nested_attributes_for :r_job
end

class RJob < ActiveRecord::Base
  belongs_to :query
  validates_presence_of :analysis_type, :if => lambda {|job| job.query.process_r_job} 
end 
```

我有一个用于创建查询和 r_job 的嵌套表单。我在查询对象中有一个布尔字段，我必须根据查询对象中的布尔值对 r_job 进行一些验证。我正在尝试使用上面的代码执行此操作，但我得到了一个无方法错误。

```
NoMethodError (undefined method `process_r_job' for nil:NilClass):
   app/models/r_job.rb:3:in `block in <class:RJob>'
   app/controllers/queries_controller.rb:9:in `create' 
```

我挖了一下，我发现，`job.query`内部 lambda 正在返回一个 nil 对象。我有点坚持这一点。需要一些帮助来解决这个问题。下面是我的表单和控制器代码。

```
# app/views/queries/new.html.haml
=form_for @query, {:html => {:class=>"form-horizontal"}}do |f|
  - if @query.errors.any?
    .alert.alert-error
      %h4.alert-heading Error(s)!
      - @query.errors.full_messages.each do |msg|
        %p= msg

  =render "query_form", :f => f

  %fieldset
    =f.fields_for :r_job do |builder|
      =render "r_job_form", :f => builder
  %button.btn.btn-primary.small Go

#app/controller/queries_controller.rb
class QueriesController < ApplicationController
  def new
    @query = Query.new
    @query.build_r_job
  end

  def create
    @query = Query.new(params[:query])
    if @query.save
      redirect_to root_path, :notice => "Yay!! Your query is running. You can download the CSV once the query finishes."
    else
      flash.now[:error] = "Oops, the query cannot be saved!!"
      render :new
    end
  end
end 
```

我发现一个问题正在做类似的事情。但不知何故，我无法得到这项工作。 [在子模型中获取父值](https://stackoverflow.com/questions/6671795/get-parent-values-in-child-model)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T22:44:08.760

条件 lambda 不带参数并在实例上下文中运行，因此应该可以：

```
:if => lambda { query.process_r_job } 
```

并考虑一个更短的符号：

```
if: 'query.process_r_job' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T22:36:18.873

你可以用`:inverse_of`. 这里已经解释/回答[了](https://stackoverflow.com/a/4783112/1325155)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T08:52:30.783

请参阅以下链接中提出的相同问题。

[Rails accept_nested_attributes_for child 在验证时没有设置父级](https://stackoverflow.com/questions/2226747/rails-accepts-nested-attributes-for-child-doesnt-have-parent-set-when-validating)

没有一个答案被接受。因为它不能完成。

# file - rsync 文件从源上的子文件夹到目标文件夹的根目录

> ID：10275402
> 
> 赞同：1
> 
> 时间：2012-04-23T05:45:57.887
> 
> 标签：file, include, rsync

我希望将驻留在各种子文件夹中的一堆 flac 文件同步到目标文件夹的根目录。

源目录结构的示例是：

```
source> tree Music/
Music/
├── R
│   ├── Radiohead
│   │   └── OK Computer
│   │       ├── 01 - Radiohead - Airbag.flac
│   │       ├── 02 - Radiohead - Paranoid Android.flac
│   └── Red Hot Chilli Peppers
│       └── Greatest Hits
│           ├── 01 - Red Hot Chili Peppers - Under the Bridge.flac
│           ├── 02 - Red Hot Chili Peppers - Give It Away.flac 
```

我正在使用此命令，它可以很好地同步，但包含目标上的目录路径：

```
rsync -rltDzvh --delete -e ssh Music/ user@192.168.1.1:/Destination/ --include="*/" --include="*.flac" --exclude="*" 
```

所以在目的地的结构是：

```
destination> tree /Destination/
/Destination/
├── R
│   ├── Radiohead
│   │   └── OK Computer
│   │       ├── 01 - Radiohead - Airbag.flac
│   │       ├── 02 - Radiohead - Paranoid Android.flac
│   └── Red Hot Chilli Peppers
│       └── Greatest Hits
│           ├── 01 - Red Hot Chili Peppers - Under the Bridge.flac
│           ├── 02 - Red Hot Chili Peppers - Give It Away.flac 
```

我想修剪所有目录，以便仅将文件放入 /Destination/ 的根目录中，例如

```
destination> tree /Destination/
/Destination/
├── 01 - Radiohead - Airbag.flac
├── 02 - Radiohead - Paranoid Android.flac
├── 01 - Red Hot Chili Peppers - Under the Bridge.flac
├── 02 - Red Hot Chili Peppers - Give It Away.flac 
```

所有文件都有不同的名称，所以没关系，我已经查看了 rsync 中的各种选项，例如 --no-relative 但无法让它按需要工作。

我还想出了：

```
find ./Music/ -name "*.flac" -exec rsync -ltDzvh {} -e ssh user@192.168.1.1:/Destination/ \; 
```

但这意味着使用 ssh 密钥并且可能效率低下，如果我想使用 --delete 它可能会破坏一切。

那么，当我在源上的音乐库中添加、删除或重命名项目并将这些更改同步到目标时，我将如何实现这一点，同时仍然能够使用 --delete 或 --delete-excluded 呢？

# google-app-engine - 谷歌应用引擎上的 fetch vs get() 数据存储定价

> ID：10275404
> 
> 赞同：0
> 
> 时间：2012-04-23T05:46:06.343
> 
> 标签：google-app-engine, google-cloud-datastore

哪种方法会减少 Google App Engine 数据存储命中：

1.  单个 dataobject.fetch(limit=10) 或
2.  dataobject.get() 重复 10 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:57:21.293

`db.get()`成本低于`query.fetch(limit)`.

[https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T10:02:27.103

对于 (1)：1 x QUERY + 10 x GET（每个条目获取一个）= 11 READ 操作 = 11 x 60 = 660 微便士

对于 (2)：10 x GET = 10 READ 操作 = 10 x 60 = 600 micropennis

您最便宜的最好方法是实际查询并仅获取条目的“密钥”。如果您不一定要访问要获取的每个条目的数据，这将起作用：

最便宜：查询（keys_only=True）：1 x QUERY + 10 x SMALL_GET = 1 READ + 10 SMALL = 60 + 10*10 = 160 微便士。

请注意，如果您遍历收到的键并再次查询每个数据，那么最便宜的会更昂贵。在这种情况下，10x10 = 100 小便士将是开销。

# jquery - Youtube API 删除播放列表 JQuery AJAX 请求作为 OPTIONS 请求发送

> ID：10275405
> 
> 赞同：0
> 
> 时间：2012-04-23T05:46:18.917
> 
> 标签：jquery, youtube-api

这是我正在尝试的请求： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Deleting_a_playlist](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Deleting_a_playlist)

这是失败的请求：

```
$.ajax( {
    dataType : 'json-p', 
    type : 'DELETE', 
    url : 'https://gdata.youtube.com/feeds/api/users/default/playlists/' + playlist_id   + '?access_token=' + hash_values_json.access_token + '&alt=json', 
    headers : {
       'Access-Control-Allow-Origin': '*', 
       'contentType': "application/atom+xml", 
       'GData-Version': '2', 
       'X-GData-Key': 'key=' + dev_Key }, 
   success : function(response) {
             }, 
   error : function() {
       alert("Delete of playlist failed."); }
   }
); 
```

这是来自 Chrome-Tools 的反馈，表明该请求作为 OPTIONS 请求和更多信息发送：http: [//imgur.com/2UvIz,FQW75#0](http://imgur.com/2UvIz,FQW75#0)

在 javascript 控制台中，我收到以下错误： OPTIONS [https://gdata.youtube.com/feeds/api/users/default/playlists/760354511254461C?access_token=ya29.AHES6ZS51Dqs8F8CwkWq23LgevXCD7tWSJLVCLEBxEW22a2zNSY8OCxr](https://gdata.youtube.com/feeds/api/users/default/playlists/760354511254461C?access_token=ya29.AHES6ZS51Dqs8F8CwkWq23LgevXCD7tWSJLVCLEBxEW22a2zNSY8OCxr) 405 (Method Not Allowed) XMLHttpRequest 无法加载[https://gdata.youtube.com/feeds/api/users/default/playlists/760354511254461C?access_token=ya29.AHES6ZS51Dqs8F8CwkWq23LgevXCD7tWSJLVCLEBxEW22a2zNSY8OCxr](https://gdata.youtube.com/feeds/api/users/default/playlists/760354511254461C?access_token=ya29.AHES6ZS51Dqs8F8CwkWq23LgevXCD7tWSJLVCLEBxEW22a2zNSY8OCxr)。Access-Control-Allow-Origin 不允许来源[http://localhost:3000 。](http://localhost:3000)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:04:40.997

`dataType`用`'jsonp'`（`'json-p'`未定义）替换。

=== 更新 ===

也许您必须将 添加`Authorization: AuthSub token="AUTHORIZATION_TOKEN"`到`headers`参数中，或者您应该测试`http://...`而不是`https://...`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:36:40.577

发现还不能使用 JQuery AJAX 进行跨域 POST/DELETE 请求（但是 GET 请求还可以）。我如何解决这个问题是向我的服务器发送请求以执行 Youtube DELETE 请求。

# javascript - 什么会导致浏览器不执行脚本？

> ID：10275411
> 
> 赞同：0
> 
> 时间：2012-04-23T05:47:14.117
> 
> 标签：javascript, html, firefox, google-chrome, browser

出于某种原因，我的浏览器（Firefox 和 Chromium）不会执行此页面上的脚本：savageworkouts.com。然而，控制台中没有报告任何错误。知道为什么吗？

编辑：下面的一些不错的答案指出，某些脚本由于具有`src=""`属性而没有触发。

编辑：我发现脚本正在执行，但是当它到达页面底部的modernizr.foundation.js 时它会窒息。知道为什么 modernizr.foundation.js 无法执行，但在 Inspector 的控制台中没有报告错误吗？

编辑：已解决：我缺少页面上 div 的结束标记（#contentContainer）。有趣的是，缺少结束标记导致 Chromium 和 Firefox 都无法继续执行modernizr.foundation.js。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T05:49:47.243

```
<script src="">
            alert('whyTheF Won\' this fire?');
</script> 
```

因为脚本有一个`src`. 它尝试将 HTML 文档作为脚本加载，失败，然后不执行内联脚本，因为它支持外部脚本并且元素“具有”外部脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:52:31.270

```
<script src="">
            alert('whyTheF Won\' this fire?');
</script>

.....
<script src="">
                var isIE = false,
                    isChrome = false;
                                    isChrome = true;
                            </script> 
```

为什么F不会触发？我会告诉你为什么。您添加了一个`src`属性。现在浏览器正在尝试从引用当前页面的~~未定义URL 加载不存在的脚本。~~`<script src="url.js">doStuff()</script>`将始终加载`url.js`并执行它，但*不会*执行`doStuff()`.

# jquery - 从 SQL 08 获取 System.Byte[] 并使用 jQuery 在 HTML 中将其显示为图像

> ID：10275412
> 
> 赞同：0
> 
> 时间：2012-04-23T05:47:16.107
> 
> 标签：jquery, sql, asp.net-mvc-3, sql-server-2008, image-processing

我在 SQL 08 中有 System.Byte[]。我必须将 System.Byte[] 转换为图像并`<img>`在 html 的标记中显示该图像。我使用 jquery 从 mvc 获取图像并将其显示在 html 中。

我不使用 View(V) 而不是使用 HTML。

**MVC 3 控制器**

```
public ActionResult Get_Leave_IO_Pic(DetailsModel model)  
      {
        TCSServiceReference.MBLServiceSoapClient TCSClient = new TCSServiceReference.MBLServiceSoapClient();
        DataSet ds = new DataSet();
        DataSet resultds = TCSClient.Get_Employee_Details_Srno(ds, model.EMPSRNO);
        Image strJSON = null;
        if (resultds.Tables[0] != null && resultds.Tables[0].Rows != null)
        {
            byte[] byteArrayIn = (byte[])resultds.Tables[0].Rows[0]["EMPPHOT"];
            MemoryStream ms = new MemoryStream(byteArrayIn);
            Image returnImage = Image.FromStream(ms);
            strJSON = returnImage;
        }
        return Json(new { result = strJSON });
    } 
```

**HTML**

```
 <img src="../images/bis_user.png" width="113" height="104" border="0" alt="" id="ImageStaff" /> 
```

**jQuery**

```
function GetLeaveIOPic(empsrno) {
   $.post("http://Details/Get_Leave_IO_Pic",
    {
        EMPSRNO: empsrno
    },
    function (data) {
        $.each(data, function (key, value) {
            $('#ImageStaff').val(); //How to get image here?
        });
    }, 'json' );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:29:05.800

> 我使用 jquery 从 mvc 获取图像并将其显示在 html 中。

你真的不需要 javascript 来实现这一点。您可以让控制器操作直接在响应中返回图像内容并设置正确的内容类型：

```
public ActionResult Get_Leave_IO_Pic(string id)  
{
    var TCSClient = new TCSServiceReference.MBLServiceSoapClient();
    var ds = new DataSet();
    var resultds = TCSClient.Get_Employee_Details_Srno(ds, id);
    if (resultds.Tables[0] != null && resultds.Tables[0].Rows != null)
    {
        byte[] byteArrayIn = (byte[])resultds.Tables[0].Rows[0]["EMPPHOT"];

        // TODO: adjust the image MIME type based on what you have stored
        // in your database
        return File(byteArrayIn, "image/jpeg");
    }

    return HttpNotFound();
} 
```

并在视图中`<img>`通过传递允许从数据库中检索图像的 id 将标签指向此控制器操作：

```
<img src="@Url.Action("Get_Leave_IO_Pic", new { id = "123" })" width="113" height="104" border="0" alt="" id="ImageStaff" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:03:21.910

最后我得到了解决方案。

` ========================================= **MVC 3控制器**

```
public ActionResult Get_Leave_IO_Pic(DetailsModel model)
    {
       TCSServiceReference.MBLServiceSoapClient TCSClient = new TCSServiceReference.MBLServiceSoapClient();
        DataSet ds = new DataSet();
        DataSet resultds = TCSClient.Get_Employee_Details_Srno(ds, model.EMPSRNO);
        string strJSON = "Failed";
        if (resultds.Tables[0] != null && resultds.Tables[0].Rows.Count > 0)
        {
            byte[] byteArrayIn = (byte[])resultds.Tables[0].Rows[0]["EMPPHOT"];
            string EmpName = resultds.Tables[0].Rows[0]["EMPNAME"].ToString();
            MemoryStream ms = new MemoryStream(byteArrayIn);
            Image gotimage = Image.FromStream(ms);
            string filepath = (System.Configuration.ConfigurationManager.AppSettings.Get("ImageUpload")).ToString(); 
            //filepath = E:/Project/project1/Project1 MVC/Images/
            gotimage.Save(filepath + EmpName + " - " + model.EMPSRNO + ".png");
            strJSON = System.Configuration.ConfigurationManager.AppSettings.Get("ImageURL").ToString() + EmpName + " - " + model.EMPSRNO + ".png";
            //ImageURL = http://localhost:8085/Project1MVC/Images/
        }
        return Json(new { result = strJSON });
    } 
```

` ======================================== **HTML**

```
 <img src="../images/bis_user.png" width="113" height="104" border="0" alt="" id="ImageStaff" /> 
```

` ======================================== **jQuery**

```
function GetLeaveIOPic(empsrno) {
        $.post("http://localhost:8085/Project1MVC/Details/Get_Leave_IO_Pic",
    {
        EMPSRNO: empsrno
    },
    function (data) {
        $.each(data, function (key, value) {
            if (!(data.result == 'Failed')) {
                // data.result = http://localhost:8085/Project1MVC/Images/name - 23.png
                $('#ImageStaff').attr('src', data.result.toString());
            }
        });
    },
  'json'
 );
    } 
```

# ruby-on-rails - 使用选择菜单更改内容

> ID：10275413
> 
> 赞同：0
> 
> 时间：2012-04-23T05:47:18.550
> 
> 标签：ruby-on-rails, ruby

我有两个模型：国家和用户

**国家.rb**

```
class Country < ActiveRecord::Base
  has_many :users
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  belongs_to :country
end 
```

users/index.html.erb 页面上显示的所有用户（来自所有国家/地区）。

**users_controller.rb**

```
 def index
    @users = User.all
  end 
```

**用户/index.html.erb**

```
<%= collection_select(:user, :country_id, Country.all, :id, :country_name) %>
<%= render @users %> 
```

users/index.html.erb 上还有所有国家的选择菜单。

我该如何执行以下操作：当有人选择特定国家/地区时，只会显示来自所选国家/地区的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:00:04.823

这只能使用javascript来实现。

典型的方法是使用 AJAX。将一个事件绑定`onchange`到您的选择，以请求所选国家/地区的所有用户的列表。在服务器上，您可以将该查询格式化为一组选择选项，然后将响应插入客户端的第二个下拉列表中。

这看起来像一个很好的教程： http: [//www.falsepositives.com/index.php/2010/05/28/building-a-casscading-drop-down-selection-list-for-ruby-on-rails-with -jquery-ajax/](http://www.falsepositives.com/index.php/2010/05/28/building-a-casscading-drop-down-selection-list-for-ruby-on-rails-with-jquery-ajax/)

尽管您应该尝试找到一种更 RESTful 的方式来做这件事。

# php - 如何使用 .htaccess 工作 php 前端控制器？

> ID：10275414
> 
> 赞同：1
> 
> 时间：2012-04-23T05:47:19.160
> 
> 标签：php, .htaccess, front-controller

我使用查询字符串做了前端控制器。

前任：

*   [http://host/controller.php?display=main](http://host/controller.php?display=main) ,
*   [http://host/controller.php?display=contact_form](http://host/controller.php?display=contact_form)

但我需要在不使用查询字符串的情况下这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T06:44:53.420

在.htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    (.*) controller.php    [L]
 </IfModule> 
```

这会将所有内容重新路由到controller.php；所以你可以像这样访问它：

```
http://host/main
http://host/contact_form 
```

然后在 controller.php 中你必须解析 $_SERVER['REQUEST_URI'] 来提取传递的参数。

希望有帮助..

# titanium - Titanium Linux 桌面应用程序启动错误

> ID：10275421
> 
> 赞同：0
> 
> 时间：2012-04-23T05:47:51.610
> 
> 标签：titanium

每次我尝试运行支持 PHP 的桌面项目时，都会返回以下错误：

```
[05:41:03:608] [Titanium.Host] [Information] Loaded module = tiui
terminate called after throwing an instance of 'Poco::FileNotFoundException'
what():  File not found 
```

您知道解决错误的任何解决方案吗？我尝试了几种方法，但没有奏效。

# java - 我在向数组中添加新元素时遇到问题

> ID：10275423
> 
> 赞同：0
> 
> 时间：2012-04-23T05:47:57.200
> 
> 标签：java, arrays, user-interface

我想获取输入到文本字段中的字符串并将它们转换为数组的新元素，但是每当我尝试将它们打印出来时，它们仍然注册为 null。如果您可以尝试忽略与问题无关的内容，因为我正在尝试它们，但我无法向数组添加新元素。

这是创建和初始化数组的地方。

```
public class AssignSeat {

String[] arrangement = new String[12];

public String[] SeatStart() {

    arrangement[0] = "Collins";
    arrangement[2] = "Faivre";
    arrangement[3] = "Kinnard";
    arrangement[6] = "Morgans";
    arrangement[7] = "Rohan";
    arrangement[8] = "Shatrov";
    arrangement[9] = "Sword";
    arrangement[11] = "Tuckness";

    System.out.format("%-15s%-15s%n", "seat", "passenger");

    for (int i=0; i<arrangement.length; i++) {
        System.out.format("%-15s%-15s%n", i+1, arrangement[i]);

    }
    System.out.println();
    return arrangement;

}

public String[] getArrangement() {
    return arrangement;
}

public void setArrangement(String[] arrangement) {
    this.arrangement = arrangement;
}
} 
```

这是我试图添加数组元素的地方。特别是第二、第五、第六和第十一。

```
public void actionPerformed(ActionEvent event) {
    //String name = null;

    AssignSeat seat = new AssignSeat();
    seat.SeatStart();

    if(event.getSource() instanceof JButton){

        JButton clickedButton = (JButton) event.getSource();
        String buttonText = clickedButton.getText();

        if (buttonText.equals("2")) {
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            inputline.setEditable(true);
            inputline.addKeyListener(new KeyAdapter() {
             public void keyPressed(KeyEvent e) {
                 int key = e.getKeyCode();
                 String name = null;

                 AssignSeat seat = new AssignSeat();
                 seat.SeatStart();

                 if (key == KeyEvent.VK_ENTER) {
                     Toolkit.getDefaultToolkit().beep();
                     name = inputline.getText();
                     seat.arrangement[1] = name;
                     System.out.println(seat.arrangement[1]);
                     inputline.setEditable(false);
                     outputline.setText("2");
                     two.setForeground(Color.black);
                     for( ActionListener al : two.getActionListeners() ) {
                         two.removeActionListener( al );
                     }                           

                 }
             }
        });
        } else if(buttonText.equals("5")) {
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            inputline.setEditable(true);
            inputline.addKeyListener(new KeyAdapter() {
             public void keyPressed(KeyEvent e) {
                 int key = e.getKeyCode();
                 String name = null;

                 AssignSeat seat = new AssignSeat();
                 seat.SeatStart();

                 if (key == KeyEvent.VK_ENTER) {
                     Toolkit.getDefaultToolkit().beep();
                     name = inputline.getText();
                     seat.arrangement[4] = name;
                     System.out.println(seat.arrangement[4]);
                    inputline.setEditable(false);
                    outputline.setText("5");
                    five.setForeground(Color.black);
                    for( ActionListener al : five.getActionListeners() ) {
                        five.removeActionListener( al );
                    }
                 }
             }
        });
        } else if (buttonText.equals("6")) {
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            inputline.setEditable(true);
            inputline.addKeyListener(new KeyAdapter() {
             public void keyPressed(KeyEvent e) {
                 int key = e.getKeyCode();
                 String name = null;

                 AssignSeat seat = new AssignSeat();
                 seat.SeatStart();

                 if (key == KeyEvent.VK_ENTER) {
                     Toolkit.getDefaultToolkit().beep();
                     name = inputline.getText();
                     seat.arrangement[5] = name;
                     System.out.println(seat.arrangement[5]);
                    inputline.setEditable(false);
                    outputline.setText("6");
                    six.setForeground(Color.black);
                    for( ActionListener al : six.getActionListeners() ) {
                         six.removeActionListener( al );
                     }
                 }
             }
        });
        } else if (buttonText.equals("11")) {
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            inputline.setEditable(true);
            inputline.addKeyListener(new KeyAdapter() {
             public void keyPressed(KeyEvent e) {
                 int key = e.getKeyCode();
                 String name = null;

                 AssignSeat seat = new AssignSeat();
                 seat.SeatStart();

                 if (key == KeyEvent.VK_ENTER) {
                     Toolkit.getDefaultToolkit().beep();
                     name = inputline.getText();
                     seat.arrangement[10] = name;
                     System.out.println(seat.arrangement[10]);
                     inputline.setEditable(false);
                     outputline.setText("11");
                     eleven.setForeground(Color.black);
                     for( ActionListener al : eleven.getActionListeners() ) {
                         eleven.removeActionListener( al );
                     }
                 }
             }
        });
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:44:45.687

从你的代码来看，我认为你对 Java 和编程来说是相当新的。

查看[Java 教程 - 数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)以了解数组的工作原理。

现在对于您的代码，正如 Dheeraj 所说，`seat`每次单击按钮然后调用`SeatStart()`. 这意味着您对阵列所做的每一次更改都会浪费掉。您可能看不到这一点，因为在您的 GUI 中，您没有检查数组的值来填充您向您显示座位的任何内容。因此，您只保留您所做的最后一次更改。

将打印代码移动到一个新的私有方法中，`printArray()`这样您就可以在您进行更改时调用它，`SeatStart()`这样您就不必在其他地方再次编写相同的代码。

你有重复的代码做同样的事情。想想把它放在同一个地方，通过改变一个变量，你可以得到同样的效果。这使您的代码更清晰，更易于维护。如果你想要更灵活的东西，你可以用 if 或一段时间来做到这一点。

我会尽力给你一个概述。首先，您不会`seat`在动作侦听器中实例化，而是在框架加载时实例化。动作侦听器与您单击的按钮有关，因此没有意义。

```
public void actionPerformed(ActionEvent event) {
if(event.getSource() instanceof JButton){

    JButton clickedButton = (JButton) event.getSource();
    String buttonText = clickedButton.getText();

    if (buttonText.equals("2") || buttonText.equals("5") || buttonText.equals("6") || buttonText.equals("11")){
        int seatNum = Integer.parseInt(buttonText);     // you get the seat number into an integer.
                                                        //this only works if the text is actually representing a number
        entername.setVisible(true);
        seatnum.setVisible(true);
        confirmed.setVisible(true);
        inputline.setVisible(true);
        outputline.setVisible(true);
        inputline.setEditable(true);
        inputline.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent e) {
                int key = e.getKeyCode();   // don't put code between this and if. 
                                            //No point doing something if the key is not enter

                if (key == KeyEvent.VK_ENTER) {             
                    Toolkit.getDefaultToolkit().beep();
                    String name = inputline.getText();
                    seat.arrangement[seatNum - 1] = name;
                    System.out.println(seat.arrangement[seatNum - 1]);
                    inputline.setEditable(false);
                    outputline.setText(buttonText);
                    clickedButton.setForeground(Color.black); // I'm guessing this is the button that got clicked?
                    for( ActionListener al : clickedButton.getActionListeners() ) {
                         clickedButton.removeActionListener( al );
                    }                           
                }
            }
        });
    }
}
} 
```

当然，这只是一种方法，有很多方法可以做到。试着让员工留在他们所属的地方。例如，那些 setVisible 实际上并不属于按钮的动作监听器。您可以将它们移至其他方法等。您明白了……

希望我有所帮助:)

编辑 1\. 我刚刚再次查看了您的代码。你想用 KeyListener 来实现什么输入？最好将 KeyListener 添加到您要创建所需组件的位置，而不是在另一个 actionListener 中。调试起来会非常糟糕。

# c# - 在 C# 中，如何从透明启动画面中移除光环

> ID：10275424
> 
> 赞同：1
> 
> 时间：2012-04-23T05:48:01.177
> 
> 标签：c#

我有一个黑色的初始屏幕，带有白色文本和石灰绿色背景（用于透明度键）。

启动画面是 ac# 项目的一部分。

图像的形状非常不规则，当我运行启动画面时，虽然透明度有效，但我观察到外部周围有一个浅绿色的光晕（大约 1 像素）。

我能做些什么来阻止光环效应？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:17:36.030

再次创建图像，不要对绿色进行抗锯齿。TransparencyKey 属性通过使具有*精确*颜色的所有像素透明来工作，这意味着如果您有抗锯齿以使形状更平滑，它将无法工作并将那些半绿色/半内容像素保留在那里。

# xslt - 无法识别 XSLT 中的标记

> ID：10275427
> 
> 赞同：2
> 
> 时间：2012-04-23T05:48:19.680
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我正在研究 XSLT。我找不到 xslt。我努力了。

资源：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
 <body>
<selectedComp>bodyParagraphText</selectedComp>
<value>
  <p xmlns="http://www.w3.org/1999/xhtml">abd</p>

  <p xmlns="http://www.w3.org/1999/xhtml"> </p>

  <p xmlns="http://www.w3.org/1999/xhtml">afh</p>

  <p xmlns="http://www.w3.org/1999/xhtml"> </p>

  <p xmlns="http://www.w3.org/1999/xhtml">AAA</p>

  <p xmlns="http://www.w3.org/1999/xhtml"> </p>

  <p xmlns="http://www.w3.org/1999/xhtml">ZZZ</p>
</value>
</body> 
```

XSLT 写道：

```
 <?xml version="1.0" encoding="utf-8"?>
   <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:widget="aaa">
  <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
    <xsl:for-each select="body/value/p">
       <xsl:element name= "widget:bodyParagraphText">
      <xsl:value-of select="."/>
      </xsl:element>
        </xsl:for-each>

      </xsl:template>

       </xsl:stylesheet> 
```

但我没有得到任何东西。最后我得到了空的xml。

但需要输出：

```
 <widget:bodyParagraphText>
   <text>abd</text>
   </widget:bodyParagraphText>

   <widget:bodyParagraphText>
   <text> </text>
   </widget:bodyParagraphText>

   <widget:bodyParagraphText>
   <text>afh</text>
   </widget:bodyParagraphText>

   <widget:bodyParagraphText>
   <text> </text>
   </widget:bodyParagraphText>

   <widget:bodyParagraphText>
   <text>AAA</text>
   </widget:bodyParagraphText>

   <widget:bodyParagraphText>
   <text> </text>
   </widget:bodyParagraphText> 
```

任何人都可以建议如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:07:29.667

该`p`元素的命名空间为`http://www.w3.org/1999/xhtml`，您需要将其包含在 XPath 表达式中：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:widget="aaa"
        xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <xsl:for-each select="body/value/xhtml:p">
            <widget:bodyParagraphText>
                <text>
                    <xsl:value-of select="."/>
                </text>
            </widget:bodyParagraphText>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

请注意根标记上添加的`xmlns:xhtml`属性，以及`xhtml:`XPath 表达式中的前缀。

# google-app-engine - XMPP App Engine 服务不适用于移动 Gtalk 应用程序

> ID：10275430
> 
> 赞同：0
> 
> 时间：2012-04-23T05:48:45.307
> 
> 标签：google-app-engine, xmpp

我制作了一个 XMPP 应用程序引擎应用程序，它可以在桌面上的 Gtalk 客户端上正常工作，但是 Gtalk 的移动版本存在一个问题，即只有存在有效，但聊天消息没有推送到服务器，我尝试了许多移动 gtlak应用程序，仍然遇到同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:16:04.020

首先，确保您的应用程序配置为接收消息，就像这样（听起来您已经有了 xmpp_presence）

如果是 Python，请确保它在 app.yaml 中：

```
inbound_services:
- xmpp_message
- xmpp_presence 
```

如果是 Java，请确保它位于 appengine-web.xml 中：

```
<inbound-services>
  <service>xmpp_message</service>
  <service>xmpp_presence</service>
</inbound-services> 
```

其次，您是否可以尝试仅根据正常请求而不是响应消息向客户端发送（手动订阅您的机器人）？这将使您能够独立于接收消息来测试发送消息。

# eclipse - 我必须在 Eclipse 插件开发中使用什么方法？使用命令还是操作？

> ID：10275433
> 
> 赞同：0
> 
> 时间：2012-04-23T05:49:24.973
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我需要帮助。我需要的是，我想解析出现在 Eclipse Project Explorer 上的 .xml 文件。解析过程将需要很长时间。解析完成后，我想显示我的自定义透视图，以使用 Zest 显示可视图形。目前，有两种方法，通过使用命令或操作，我仍然不明白它们有什么区别。所以，总结一下：

1.  我需要弹出上下文菜单，名为“Parse this xml”，当右键单击 Eclipse 项目资源管理器上的 .xml 文件时可见。也许这是在 popupmenu 扩展上使用 ObjectContribution。
2.  单击“解析此xml”后，它将运行解析过程并显示忙碌进度。
3.  完成后，它将显示我在透视扩展点上定义的自定义透视图。

我只需要知道，它将如何通过使用命令和操作来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:54:57.540

从您的角度来看，这两个界面是相同的！

Command API 是执行 Action API 的新方法。除非您有充分的理由使用“旧”的 Action API，否则始终默认使用 Command API，因为它具有出色的设计和功能。

请参阅[Eclipse RCP 菜单和操作：配置还是编码？](https://stackoverflow.com/q/4737274/796559)有关如何使用 Command API 的完整示例。

# c++ - 错误：不完整类型结构主体的使用无效；错误：结构主体的前向声明

> ID：10275436
> 
> 赞同：4
> 
> 时间：2012-04-23T05:49:51.047
> 
> 标签：c++, forward-declaration

我从模板类继承。当我进入教师班时，我想进入学科班，反之亦然。我收到一个错误 Invalid use of incomplete type struct Subect;

```
void addSubject(Subject *s) {
            this->addReference(s);
            s->addReference(this); when I comment this line the it compiles without errors, but I cannot insert into Subject 

        } 
```

我的整个代码如下

```
#include <iostream>
#include <stdlib.h>
#include <vector>

using namespace std;
class Subject;

template <class T>
class abstractReference {

    vector<T*> list;
    public:
    string code;
        void addReference(  T*);
        void delReference(  T*);
        bool hasReference(  T*);
        T * getReference(int );
};

template <class T>
void abstractReference<T>::addReference(T* ref) {
    list.push_back(ref);
    //ref->addReference(this);
}

template <class T>
void abstractReference<T>::delReference(T* ref) {
    int i;
    for (i=0; i<list.size(); i++) {
        if (list[i]== ref) list.erase(i);
    }

}

template <class T>
bool abstractReference<T>::hasReference( T* ref) {
  if (list.size() == 0) return false;
  int i;
  for (i=0; i<list.size(); i++) {
      if (list[i] == ref) return true;
  }
  return false;
}

template <class T>
T* abstractReference<T>::getReference(int i) {
    if (i < 0 || i > list.size()) return NULL;
    return list[i];
}

class Teacher : public abstractReference<Subject> {

    string fname;
    string lname;
    float  sal;
public:
    Teacher(string c, string fn, string ln, float s): fname(fn), lname(ln), sal(s) {
    }
    Teacher() {sal =0; fname=""; lname="";}
    void setInfo(string c, string fn, string ln, float s=0.00) {
        code=c;
        fname = fn;
        lname = ln;
        sal = s;
    }

    string getName() {
        return fname + " " + lname;
    }

    float getSal() {
        return sal;
    }

    void addSubject(Subject *s) {
        this->addReference(s);
        s->addReference(this);

    }

    void delSubject(Subject *s) {

    }

};

class Subject : public abstractReference<Teacher> {
  string title;
public:
  Subject(string c=NULL, string t=NULL) {
      title = t;

  }
  string getTitle() {
      return title;
  }
};

main() {
    Teacher *t;
    t = new Teacher("J109", "Dexter", "McConnell",15000);
    Subject *s, *s1, *s2;
    s= new Subject("E001", "English");
    s1= new Subject("M001", "Maths");
    s2= new Subject("s001", "Science");

    t->addSubject(s);
    t->addSubject(s1);

    cout << "Has Reference " << t->hasReference(s2) << endl;
    cout << "Done..." << endl;
    cout << t->getReference(1)->getTitle() << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:57:15.993

问题是编译器不理解类型`Subject`，您可能转发声明它或忘记包含定义它的头文件。
结果是编译器`Subject`是一个**不完整的类型**，它不能执行任何需要知道布局的操作`Subject`，调用它的成员函数就是一个这样的例子。

解决方案是：

您应该包含`Subject`在源 cpp 文件中定义的头文件，其中您有以下定义：

```
void addSubject(Subject *s) 
```

如果您没有多个文件，请确保在`Subject`定义函数*之前*`addSubject()`定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:58:49.870

当编译器尝试编译该类`Teacher`时，该类`Subject`尚未*定义*，仅*声明*了. 所以编译器还不知道存在哪些方法`Subject`。

*我的*建议是你将函数体移到`Subject`.

像这样的东西：

```
class Teacher : public abstractReference<Subject> {
    // ...

    void addSubject(Subject *s);

    // ...
};

class Subject : public abstractReference<Teacher> {
    // ...
};

void Teacher::addSubject(Subject *s) {
    // ...
} 
```

# java - 使用 Mysql for Java Applications 进行数据库镜像

> ID：10275437
> 
> 赞同：1
> 
> 时间：2012-04-23T05:49:57.127
> 
> 标签：java, mysql, jdbc, mirroring

谁能解释一下数据库镜像，尤其是mysql。

我有几个问题

1.  我是否必须在 Java 应用程序上创建与这些数据库（主数据库和从数据库）的连接？是否有一个连接字符串或者它只是一个可编程的部分？

2.  我是否还必须复制我的所有 sql 事务以使所有数据库移动对主服务器和从服务器生效？

3.  如果主数据库已关闭，并且唯一的连接是从站，我如何修补主数据库以更新在主数据库关闭期间更改的记录？

4.  从数据库在本地主机上，主数据库在服务器机器上，还是有两台服务器机器，一台是主机，一台是从机？

5.  我将如何使用我的 java 应用程序连接到这两个数据库（从属和主），如果主自动关闭，则将使用从属连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:45:10.077

> 1）我是否必须在 Java 应用程序上创建与这些数据库（主数据库和从数据库）的连接？是否有一个连接字符串或者它只是一个可编程的部分？

是的。通常，只有当您需要写入数据库时​​，您才会创建与主服务器的连接。对于读取作业，您将使用与一个或多个从属设备的连接，这样主控设备就不必处理该负载。这是以编程方式完成的，没有用于此的连接字符串。您还可以查看[此链接](http://forge.mysql.com/wiki/MySQL_Proxy_RW_Splitting)，该链接使用 MySQL 代理为您的应用程序透明地拆分读取和写入。应该注意的是，这只是一个概念证明

> 2) 我是否还必须复制我的所有 sql 事务启用才能使所有数据库移动生效到主服务器和从服务器？

不，mysql 复制会为您执行此操作。

> 3）如果主数据库关闭了，并且唯一的连接是从站，我如何修补主数据库以更新在主数据库关闭期间更改的记录？

简短的回答是你不能。如果您需要高可用性读取，您应该查看 MySQL Cluster。多主配置也可以工作。

> 4）slave db在本地主机上，master在服务器机器上是否可以，或者有2台服务器机器，一台是master，一台是slave？

主从机器可以而且应该驻留在不同的服务器上。如果这就是您所说的“本地主机”的意思，那么您不太可能希望将奴隶放置在最终用户机器上。

> 5）我将如何使用我的java应用程序连接到这两个数据库（从属和主），如果主自动关闭，从属连接将使用哪种类型的连接。

如果您的所有读取都来自从属设备（或多个从属设备），那么失去主设备不会中断您的读取，只会中断您的写入。如果您有一个从属设备并且它出现故障，您可以选择回退到使用主连接进行读取。

# android - Android 和 SAP SOAP Web 服务之间的连接建立

> ID：10275439
> 
> 赞同：1
> 
> 时间：2012-04-23T05:50:00.163
> 
> 标签：android, web-services, soap, sap, android-ksoap2

我想从 android 应用程序连接 SAP SOAP Web 服务，我正在使用以下代码，但出现异常。当我调试代码时，调用方法 id 未执行。我正在使用附加在 URL 中的用户名和密码。

```
package com.veee.pack;
import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import java.io.IOException;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.xmlpull.v1.XmlPullParserException;
import android.app.Activity;
import android.os.Bundle;

public class WeservicesExampleActivity extends Activity {
       @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
             final String METHOD_NAME = "Z_CUSTOMER_LOOKUP1";
         final String SOAP_ACTION = "http://********************:8000/sap/bc/srt/rfc/sap/z_customer_lookup1/800/z_customer_lookup1/z_customer_lookup1_bind/Z_CUSTOMER_LOOKUP1";
         final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
         final String URL = "http://******************:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user=***************&sap-password=************";

//here i made the request

            SoapObject request =new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("Input", "1460");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        AndroidHttpTransport httpTransport=new AndroidHttpTransport(URL);
      httpTransport.debug = true;
      try {
  //here call the services method.
            httpTransport.call(SOAP_ACTION, envelope);

//calling the services 

        SoapPrimitive result = (SoapPrimitive) envelope.getResponse();

        System.out.println("Result" + result.toString());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
       }

       }
 I got the following  Exception

04-23 10:50:04.744: WARN/System.err(442): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <{http://schemas.xmlsoap.org/wsdl/}wsdl:definitions targetNamespace='urn:sap-com:document:sap:soap:functions:mc-style'>@1:686 in java.io.InputStreamReader@40546f50) 
```

请帮助我克服此异常，我尝试使用 i ksop2 获得成功输出的一些示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:23:46.177

嗨，Venkatasubbaiah Atluru，

您在 URL 中传递参数，例如[http://abc.com/xyz/api/sap-client=800&sap-user=](http://abc.com/xyz/api/sap-client=800&sap-user=) ***** ** *** ******&sap-密码=******* *** **** "***

 ***但是在请求中传递参数，例如 request.addProperty("sap-client", "800"); request.addProperty("sap 用户", " *******"); request.addProperty("sap-password", "******** ");***

 ***你的问题会解决的......

如果您有任何疑问，请告诉我......

享受编程...******

# asp.net-mvc - 在 ASP.NET MVC3 中向当前 URL 添加参数的最佳方法

> ID：10275440
> 
> 赞同：3
> 
> 时间：2012-04-23T05:50:18.047
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url, url-parameters, routevalues

[我在这里](https://stackoverflow.com/questions/10259463/add-value-to-routvalues-and-keep-current-values-in-asp-net-mvc-3)问了一个类似的问题，我需要保留当前 URL 并为其添加新参数，唯一的答案（至今）是：

```
RouteValueDictionary rt = new RouteValueDictionary();
foreach(string item in Request.QueryString.AllKeys)
  rt.Add(item,    Request.QueryString.GetValues(item).FirstOrDefault());

rt.Add("RC", RowCount);
return RedirectToAction("Index", rt); 
```

那么有没有其他方法可以避免重复`Request.QueryString`，只需获取当前 url 并添加新参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:18:58.793

您不需要迭代集合...您可以简单地将参数附加到请求的 RawUrl：

```
 public ActionResult TestCurrentUrl(string foo)
    {
        var request = ControllerContext.HttpContext.Request;

        if (foo != "bar")
        {
            var url = request.RawUrl;

            if (request.QueryString.Count == 0)
            {
                url += "?foo=bar";
            }
            else
            {
                url += "&foo=bar";
            }

            return Redirect(url);
        }

        return Content(String.Format("Foo: {0}", foo));
    } 
```

# magento - Magento 将主页重定向到某个内页

> ID：10275446
> 
> 赞同：0
> 
> 时间：2012-04-23T05:51:05.137
> 
> 标签：magento, redirect

目前我正在使用magento开发一个电子商务网站。我想将主页重定向到某个内页。我正在使用机架空间服务器，所以没有 cpanel 访问。如果有 cpanel 访问权限，我们可以使用重定向选项轻松重定向页面。

magento 中是否有任何预构建选项可将主页重定向到任何内页？

指导我magento专家..

问候， 安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:24:01.890

没看清楚你。您可以根据需要以不同的方式重定向

1.  您可以使用 .htaccess 将索引页重定向到内页

2.  要将内页设置为默认主页，请导航至系统>配置 >Web > 默认页面并设置 CMS 主页。

3.  如果您需要创建新的登录页面，请选中此项 - [http://www.magentocommerce.com/magento-connect/Yoast/extension/1915/yoast-landing-pages](http://www.magentocommerce.com/magento-connect/Yoast/extension/1915/yoast-landing-pages)

# java - 休眠。乐观锁。选择版本，即使它生成它

> ID：10275447
> 
> 赞同：3
> 
> 时间：2012-04-23T05:51:06.517
> 
> 标签：java, hibernate, optimistic-locking

我有一个实体：

```
<class name="name.dargiri.model.Entity" table="ENTITY" optimistic-lock="version">
  <version name="version" column="ver" type="long" />
</class 
```

如果实体被保存多少次，在*事务结束时*Hibernate 选择对象的版本。为什么？Hibernate 在存储对象时会生成这个版本，所以它知道它。我发现这个方法调用了这个：

```
EntityVerifyVersionProcess#getCurrentVersion() 
```

Hibernate 在日志中生成：

```
Hibernate: 
    /* update
        name.dargiri.model.Entity */ update
            ENTITY 
        set
            ver=?,
            USERNAME=?,
            lucky_number=? 
        where
            id=? 
            and ver=?
Hibernate: 
    /* get version name.dargiri.model.Entity */ select
        ver 
    from
        ENTITY 
    where
        id =? 
```

我使用 MySQL 和 Session#save()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:16:32.830

由于版本号由数据库管理，Hibernate 会在更新完成后执行额外的 SQL 语句来检索版本号。有关更多详细信息，我建议您看一下这篇[文章](http://www.intertech.com/Blog/post/Versioning-Optimistic-Locking-in-Hibernate.aspx)，它很好地解释了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:43:44.383

好的，所以我没有写的内容似乎是使用 LockMode.OPTIMISTIC 的问题： `session.get(Entity.class, 1L, LockMode.OPTIMISTIC);`

看起来这就是这种锁定模式的工作方式——它在事务结束时检查到目前为止是否没有人更改对象的版本。这不会在刷新时发生，因为 Hibernate 无论如何都会进行检查，而是在事务结束时进行检查，我认为这是在覆盖数据时更加小心的附加选项。

# javascript - 如何将子节点添加到 TreePanel 中的节点？

> ID：10275448
> 
> 赞同：6
> 
> 时间：2012-04-23T05:51:10.377
> 
> 标签：javascript, extjs, extjs4, treepanel

在这样的树结构中

```
var rootNode = { 
              id: 'root',
              text : 'Root Node',
    expanded : true,
    children : [
    {
        id :  'c1',
        text : 'Child 1',
        leaf : true
    },
    {
        id :  'c2',
        text : 'Child 2',
        leaf : true
    },
    {
        id :  'c3',
        text : 'Child 3',
        children : [
        {
            id :  'gc1',
            text : 'Grand Child',
            children : [
            {
                id :  'gc11',
                text : 'Grand Child 1',
                leaf : true
            },
            {
                id :  'gc12',
                text : 'Grand Child 2',
                leaf : true
            }
            ]
        }
        ]
    }
    ]
};

var tree = new Ext.tree.TreePanel({
    id: 'treePanel',
    autoscroll: true,
    root: rootNode
}); 
```

如何添加任何节点的子节点（比如“孙子”）？

我可以通过遍历树形面板的根目录来访问孩子，但是我在 Firebug 中 console.logged 它，它没有任何功能。对不起，未格式化的代码，我无法格式化它。

![树面板](../Images/7678e5aa4a46d69161f73c34af32b9da.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T08:30:10.570

做这样的事情：

```
var treeNode = tree.getRootNode();
treeNode.expandChildren(true); // Optional: To see what happens
treeNode.appendChild({
        id: 'c4',
        text: 'Child 4',
        leaf: true
});
treeNode.getChildAt(2).getChildAt(0).appendChild({
        id: 'gc13',
        text: 'Grand Child 3',
        leaf: true
}); 
```

如果这是您需要的，请查看 NodeInterface 类。它有很多有用的方法： [http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.NodeInterface](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.NodeInterface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T11:36:42.270

它可能是一个较旧的线程，但是，我遇到了一个问题，我向所选节点添加了一个子节点。我想通过展开选定的节点来显示新的孩子，但失败了。

原因：我添加了一个子节点的选定节点的属性“叶子”设置为真。那是正确的。但由于附加，这不再是真的。并且因为它，显然，Ext 拒绝扩展节点......

所以当心：当你将一个节点添加到另一个节点时，确保你将 parentNode 的 'leaf' 属性设置为 'false'：

```
var newNode = Ext.create('some.model.TreeModel', savedNode);
newNode.set('parentId', record.parentLocationId);
selectedNode.set('leaf', false);
selectedNode.appendChild(newNode);
selectedNode.expand();
treeView.getSelectionModel().select(newNode); 
```

# php - TCP连接只发送一种方式不接收数据

> ID：10275451
> 
> 赞同：0
> 
> 时间：2012-04-23T05:51:22.940
> 
> 标签：php, tcp, tcpsocket, ttcpserver

我已经为此奋斗了：我正在尝试编写一个 TCP 客户端代码，并且该代码必须将数据发送到服务器并获得响应。客户端代码如下：

```
<?php
$str3 = "Test Data";
echo $str3;
$fp = stream_socket_client("tcp://192.168.1.26:12000", $errno, $errstr, 30);
if (!$fp) 
{
    echo "$errstr ($errno)<br />\n";
    echo "Some problem! </br>";
} 

else 
{   
    fwrite($fp,$str3);
    $str = "";

    while ($str == "")
    {
       $str = fgets($fp, 1024);
    }

    fclose($fp);
    echo $str;
}
?> 
```

远程主机接收数据并做出响应。不幸的是，我没有得到 $str 中的数据。我不控制远程主机，我只能看到它已经接收到数据并生成了响应。你能建议一下，我到底哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:57:12.563

您可能希望尝试更惯用的读取循环；我从[http://www.php.net/manual/en/function.fgets.php](http://www.php.net/manual/en/function.fgets.php)窃取了这段代码：

```
while (($buffer = fgets($fp, 4096)) !== false) {
    echo $buffer;
}
if (!feof($fp)) {
    echo "Error: unexpected fgets() fail\n";
}
fclose($fp); 
```

# cakephp - CakePHP 图像/文件上传器插件

> ID：10275459
> 
> 赞同：1
> 
> 时间：2012-04-23T05:52:20.107
> 
> 标签：cakephp, cakephp-2.1

我正在为 CakePHP 2.1 寻找一个体面的工作图像/文件上传器。

我正在使用 Meio Uploader，它总是给我奇怪的错误 -> 无效的文件类型，即使我已配置为上传 JPG 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:10:56.047

你可以试试[Cake PHP 媒体插件](https://github.com/bmcclure/CakePHP-Media-Plugin)，它是David Persson流行的[Cake 媒体插件](https://github.com/davidpersson/media/)Cake 2.0 的一个分支。

我在 1.3 安装中使用原始插件，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:39:53.170

使用 jQuery 和 CakePHP 媒体插件上传 Ajax 文件

[http://pixelcone.com/tutorial/ajax-file-upload-using-jquery-and-cakephp-media-plugin/](http://pixelcone.com/tutorial/ajax-file-upload-using-jquery-and-cakephp-media-plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:06:54.267

使用可以[uploadify](http://www.uploadify.com/)，用CakePHP 2.1 很容易实现。

# java - java：从StringBuilder中删除所有空格的最有效方法是什么

> ID：10275461
> 
> 赞同：3
> 
> 时间：2012-04-23T05:52:36.673
> 
> 标签：java

我通过以下代码实现它，但我不知道是否有更有效的方法可以从 StringBuilder 中删除所有空格

```
private static StringBuilder removeBlankSpace(StringBuilder sb){
    for(int i=0;i<sb.length();++i){
        if(Character.isWhitespace(sb.charAt(i))){
            sb.deleteCharAt(i);
                            i--;
        }
    }
    return sb;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T06:13:08.303

您不应`delete`多次调用 - 只需将每个字符向下移动到其最终位置，然后删除最后的范围。

```
static void removeBlankSpace(StringBuilder sb) {
  int j = 0;
  for(int i = 0; i < sb.length; i++) {
    if (!Character.isWhitespace(sb.charAt(i))) {
       sb.setCharAt(j++, sb.charAt(i));
    }
  }
  sb.delete(j, sb.length);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T05:57:01.440

编辑：将这个答案留给后代，[但 Keith Randall 的 O(n) 解决方案](https://stackoverflow.com/a/10275663/194894)要好得多。

您可能会发现从远端开始工作效率更高——因为这样当您删除*早期*字符时，您就不会再从后面复制空格了。

此外，如果您的数据往往同时包含多个空白字符，您可能希望发现它并调用`delete`而不是`deleteCharAt`. 所以像：

```
private static StringBuilder removeBlankSpace(StringBuilder sb) {
    int currentEnd = -1;
    for(int i = sb.length() - 1; i >= 0; i--) {
        if (Character.isWhitespace(sb.charAt(i))) {
            if (currentEnd == -1) {
                currentEnd = i + 1;
            }
        } else {
            // Moved from whitespace to non-whitespace
            if (currentEnd != -1) {
                sb.delete(i + 1, currentEnd);
                currentEnd = -1;
            }
        }
    }
    // All leading whitespace
    if (currentEnd != -1) {
        sb.delete(0, currentEnd);
    }
    return sb;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T05:58:06.697

以下怎么样（假设您已经`StringBuilder sb`初始化）：

```
sb = new StringBuilder(sb.toString().replaceAll("\\s", "")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-29T18:31:33.057

删除字符串的前导和尾随空格的代码

```
 int i = 0;
 int j = 0;

 for (; i < whiteSpcaTest.length();) {
   i = 0;
   if (Character.isWhitespace(whiteSpcaTest.charAt(i))) {
     whiteSpcaTest.deleteCharAt(i);

   } else {
     break;
   }
 }
 for (; j >= 0;) {
   j = whiteSpcaTest.length() - 1;
   if (Character.isWhitespace(whiteSpcaTest.charAt(j))) {
     whiteSpcaTest.deleteCharAt(j);

   } else {
     break;
   }

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-19T11:41:31.177

java string trim() 方法消除了前导和尾随空格。空格字符的 unicode 值为 '\u0020'。java 字符串中的 trim() 方法检查字符串前后的 unicode 值，如果存在则删除空格并返回省略的字符串。例如：

```
public class StringTrimExample{  
public static void main(String args[]){  
String s1="  hello string   ";  
System.out.println(s1+"javatpoint");//without trim()  
System.out.println(s1.trim()+"javatpoint");//with trim()  
}} 
```

结果：

```
 hello string   javatpoint
hello stringjavatpoint 
```

# php - 对 PHP c 扩展中的 POST 或 GET 变量感到困惑？

> ID：10275462
> 
> 赞同：2
> 
> 时间：2012-04-23T05:52:38.350
> 
> 标签：php, php-extension

我现在正在研究用 C 编写的 php 扩展。在扩展中，我需要获取 GET 或 POST 变量并做一些工作。但是出现了问题，如果我像这样在 PHP 脚本中声明一个变量：

```
$_GET['q'] = 'some text on there'; 
```

然后我尝试在 PHP 扩展中获取这个变量，如下所示：

```
HashTable *h;
char * ret_path;
zval * g_arr;
zval ** findarr;
g_arr = PG(http_globals)[TRACK_VARS_GET];
h = Z_ARRVAL_P(g_arr);
if(SUCCESS == zend_hash_find(h, "q", sizeof("q"), (void **)&findarr)) {
    //some code there
}else{

} 
```

它找不到变量。PHP 如何在内部处理脚本中的 GET 或 POST 超全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T09:42:36.867

您可能使用以下代码：

```
zval    **carrier, **ret;
carrier = &PG(http_globals)[TRACK_VARS_GET];

if (!carrier || !(*carrier)) {
    zval *empty;
    MAKE_STD_ZVAL(empty);
    ZVAL_NULL(empty);
    return empty;
}

if (!len) {
    Z_ADDREF_P(*carrier);
    return *carrier;
}

if (zend_hash_find(Z_ARRVAL_PP(carrier), "q", 1 + 1, (void **)&ret) == FAILURE) {
    zval *empty;
    MAKE_STD_ZVAL(empty);
    ZVAL_NULL(empty);
    return empty;
}

return *ret; 
```

# .net - 如何通过REST Web服务中的请求正文传递请求值

> ID：10275463
> 
> 赞同：0
> 
> 时间：2012-04-23T05:52:39.563
> 
> 标签：.net, web-services

我正在.net 中创建简单的演示 rest web 服务，有两种方法可以在 web 服务中发送数据

```
Through Query String
Through Request Body 
```

我编写了以下代码，并且能够通过查询字符串使用 Web 服务

```
 [WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Xml,
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "xml?id={id}")]
    string XMLData(string id);

    public string XMLData(string id)
    {
          return "You  request id is  " + id ;
    } 
```

但我必须通过请求正文而不是通过查询字符串传递 ID 值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:57:45.130

If you have to use the Form Body, then you have to add a parameter to your method :

```
string XMLData(string id, data As IO.Stream); 
```

Then in the method, you can access the body of the Post by :

```
 Dim strData As String = New IO.StreamReader(data).ReadToEnd() 
```

# xml - 在 xslt 1.0 中格式化 DateTime

> ID：10275464
> 
> 赞同：0
> 
> 时间：2012-04-23T05:52:49.753
> 
> 标签：xml, xslt, xslt-1.0

我正在尝试在 XSL 1.0 中格式化我的 DateTime 2005-08-01T12:00:00。我尝试使用子字符串函数，但 'T' 仍然存在。我希望我的输出是这样的 -

```
<YEAR>2005</YEAR>
<MONTH>08</MONTH>
<DAY>01</DAY>
<HOUR>12<HOUR/>
<MINUTE>00<MINUTE/>
<SECOND>00<SECOND/> 
```

如何编写此片段并从传入值中删除“T”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:33:11.373

您可以为此使用**substring**函数。请记住，字符串中每个字符的索引从 1 而不是 0 开始。因此，要获取年份，您将执行此操作（假设您当前位于日期元素上）

```
<YEAR><xsl:value-of select="substring(., 1, 4) " /></YEAR> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes" />

   <xsl:template match="date">
      <date>
         <YEAR><xsl:value-of select="substring(., 1, 4) " /></YEAR>
         <MONTH><xsl:value-of select="substring(., 6, 2) " /></MONTH>
         <DAY><xsl:value-of select="substring(., 9, 2) " /></DAY>
         <HOUR><xsl:value-of select="substring(., 12, 2) " /></HOUR>
         <MINUTE><xsl:value-of select="substring(., 15, 2) " /></MINUTE>
         <SECOND><xsl:value-of select="substring(., 18, 2) " /></SECOND>
      </date>
   </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<dates>
   <date>2005-08-01T12:00:00</date>
</dates> 
```

以下是输出

```
<dates>
   <date>
      <YEAR>2005</YEAR>
      <MONTH>08</MONTH>
      <DAY>01</DAY>
      <HOUR>12</HOUR>
      <MINUTE>00</MINUTE>
      <SECOND>00</SECOND>
   </date>
</dates> 
```

显然，您必须确保日期始终采用相同的格式才能正常工作。

# java - 如何跳过使用 Java 在 PostgreSQL 中插入自动生成的 ID 号？

> ID：10275465
> 
> 赞同：0
> 
> 时间：2012-04-23T05:52:58.197
> 
> 标签：java, postgresql, servlets

我有以下代码使用java将数据输入数据库。但是，第一列实际上是由 postgresql 数据库自动生成的。现在，我将如何更改代码使其不触及第一列？

```
String sql = "insert into members values (?,?,?,?)";
            PreparedStatement pst = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS); // I used RETURN_GENERATED_KEYS, but I don't know how to utilize it.
            pst.setInt(1, memid); // I want this line to be skipped
            pst.setInt(2, birthyear);
            pst.setString(3, familyname);
            pst.setString(4, givenname);
            // Executing the insert
            pst.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:15:12.210

在 SQL 中包含要插入的字段列表：

```
insert into members (birthyear, familyname, givenname) values (?,?,?) 
```

这样，第一列的值将具有其默认（自动生成）值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T08:06:48.277

假设我有两列名为“name”，“email”，那么我可以使用此代码将值插入到包含两列表（std_tb）的数据库中

```
String s_name="ayman";
String s_email="mamstricks"; 
PreparedStatement ps=con.prepareStatement("insert into std_tb(name,mail) values(?,?)");   
ps.setString(1, s_name); 
ps.setString(2, s_email); 
ps.executeUpdate(); 
```

如果我只想插入第二列，那么我可以将此代码用于包含两列的同一张表

```
String s_email="ayman"; 
PreparedStatement ps=con.prepareStatement("insert into std_tb(mail) values(?)");  
ps.setString(1, s_email);
ps.executeUpdate(); 
```

但是不要忘记将第一列设置为空值，如果您使用的是 wamp 或 xampp，那么您可以通过`"http://localhost/phpmyadmin/"`访问您的表格然后在空框上打勾

# php - 在 ANDROID 中使用 JSON 向 PHP Web 服务器发送 HTTP 请求

> ID：10275467
> 
> 赞同：0
> 
> 时间：2012-04-23T05:53:07.350
> 
> 标签：php, android, json, http

我希望一切都好。我正在尝试将 Web 服务添加到 Android 应用程序，为此我创建了 PHP 服务器。请求和响应采用 JSON 格式。请求类型是“post”这是我的请求格式：

```
{"method_name":"checkLogin","body":   {"username":"someone@some.com","password":"password","device_type":"android","lat":"","long":""}} 
```

预期响应：

```
[{"status":"1","message":"Login successfully","data":{"id":"xx","username":"someone@some.com","first_name":"xxx","last_name":"yyy","gender":"xxx","relationship":"xxxx","birthdate":"xxxx","hometown":"","major":null,"class":null,"house":null,"device_type":"iphone","current_location_lat":"0.0","current_location_lon":"0.0","profile_image":"no_male_user.png","is_login":"1","created":"2012","status":"1","tag":[{"id":"x","tag_name":"xxxx"},{"id":"x","tag_name":"xxx xxx"}]}}] 
```

我的安卓代码：

```
userName = userNameField.getText().toString();
passWord = passWordField.getText().toString();

try {
JSONObject json = new JSONObject();
json.put("username", userName);
json.put("password", passWord);
json.put("device_type", "Android");
json.put("lat", "0.0");
json.put("long", "0.0");

JSONObject json1 = new JSONObject();
json1.put("method_name", "checkLogin");
json1.putOpt("body", json);

HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams,
        TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
HttpClient client = new DefaultHttpClient(httpParams);

HttpPost request = new HttpPost(URL);
request.setEntity(new StringEntity(json1.toString()));
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String response = client.execute(request, responseHandler);

Toast.makeText(this, response, Toast.LENGTH_LONG).show();

} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
} catch (Throwable t) {
Toast.makeText(this, "Request failed: " + t.toString(),
        Toast.LENGTH_LONG).show();
}
} 
```

主文件

```
<?php
require_once('configure.php');
require_once('db.php');
require_once("request.php");
require_once("error_msg.php");
require_once("./includes/JSON.php");

$json = $_POST['json'];

$objRequest = new Request($json);
$rows = $objRequest -> main();
echo $rows;
?> 
```

请求.php

```
<?php
require_once("./includes/JSON.php");
require_once("db.php");
require_once('SimpleImage.php');
class Request
{
function __construct($json)
{
    $this -> array1 = @json_decode(stripcslashes(trim($json)));
}
function main()
{
    $objDb = new DB();
    $conn = $objDb -> getConnection();

    if(!$conn)
        return Error :: $DB_CONN_ERROR." ".$DB_CONN_ERROR_DESC;
    else
    {
        if($this -> array1 -> method_name == 'checkLogin')
            return $this -> getLoginFlag($this -> array1 -> body);
    }
}
// For Login Start
function getLoginFlag($body)
{
    $username = trim($body -> username);
    $password = ($body -> password);
    $device_type = trim($body -> device_type);

    $this -> rs_login = DB :: selectLoginRecord($body);
    $arr_resp = array();
    $retArray = array();
    $tagListArray = array();
    if(mysql_num_rows($this -> rs_login) > 0)
    {
        while($rows = mysql_fetch_array($this -> rs_login))
        {
                $arr_resp = array("id"=> $rows['id'],"username"=> $rows['username'],"first_name"=> ucfirst($rows['first_name']),"last_name"=>ucfirst($rows['last_name']),"gender"=>$rows['gender'],"relationship"=>$rows['relationship'],"birthdate"=>date('M d, Y', strtotime($rows['birthdate'])),"hometown"=>$rows['hometown'],"major"=>$rows['major'],"class"=>$rows['class'],"house"=>$rows['house'],"device_type"=>$rows['device_type'],"current_location_lat"=>$rows['current_location_lat'],"current_location_lon"=>$rows['current_location_lon'],"profile_image"=>$rows['profile_image'],"is_login"=>$rows['is_login'],"created"=>date('Y', strtotime($rows['created'])),"status"=>$rows['status']);   
        }
        $this -> rs_tag_list = DB :: selectTagList($arr_resp['id']);
        if(mysql_num_rows($this -> rs_tag_list) > 0)
        {   
            while($rows = mysql_fetch_array($this -> rs_tag_list))
            {
                $tagListArray['tag'][]= array("id"=> $rows['id'],"tag_name"=> $rows['tag_name']);   
            }
        }

        $finalArray = array_merge($arr_resp,$tagListArray);
        $retArray[] = array("status"  => "1","message" => "Login successfully","data" => $finalArray);
    }
    else
    {
        $retArray[] = array("status" => "0","message" => "The username or password you entered is incorrect");  
    }

    return json_encode($retArray);
}
// End Login

}

?> 
```

但是我得到的是空的回复而不是预期的回复，你能帮我怎么做吗，谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:54:29.413

使用此代码

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("json", Json1.toString()));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

代替

```
request.setEntity(new StringEntity(json1.toString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:32:48.300

创建此请求的 JSONObect 并作为请求发送到服务器：

```
HttpPost post = new HttpPost(url);
post.setEntity(new StringEntity(request.toString(), "utf-8"));
// where `request` is a JSONObject 
```

# delphi - Delphi, FindNext return error 18 even there is a folder

> ID：10275469
> 
> 赞同：4
> 
> 时间：2012-04-23T05:53:21.937
> 
> 标签：delphi

greetings from Iceland!

To begin with, I have searched both with google and here with no result.

I'm writing in Delphi and have couple of years experience in Delphi (over 30 years in Pascal)

I have build over these years variety of files utility's programs and used the functions FindFirst and FindNext in almost every such app. Today I was using a old file-utility program I wrote and found out it didn't work 100%

It was ok until the directory name got somehow strange, i.e. name with couple of periods inside. The story is I was installing Wamp and some folders there was named with this strange method.

```
As: "c:\wamp\apps\phpmyadmin3.4.5"
    "c:\wamp\apps\sqlbuddy1.3.3"
    "c:\wamp\apps\webgrind1.0 etc" 
```

When I did debugging, I found out Findnext just returned error 18 which is same error as FindNext return when no more files is to find.

I have tried FindFirstFile and FindNextFile with same result. I'm thinking to try API FindNextFileEx, if this has to do with long file names, but not so optimistic..

Also I notice the attribute in these folders wasn't 16 (hex10) instead it was 8208 (8192+16), but it doesn't have anything to do with this problem as I could for example mask (AND) the attr with $00FF etc.

```
PROCEDURE TForm_Leit.Finna_Dir (Str_InnDir : STRING);
  VAR
    S_Rec1           : TSearchRec;
    Bo_Buid          : BOOLEAN;
BEGIN
  .
  .
  .
  //Find Dir part
  IF (FindFirst (Str_Inndir+'\*.', faDirectory, S_Rec1) = 0) THEN
  REPEAT
    Bo_Buid := FALSE;
    IF ((S_Rec1.Name = '.') OR (S_Rec1.Name = '..')) THEN
    REPEAT
      Bo_Buid := FindNext (S_Rec1) <> 0;
    UNTIL NOT((S_Rec1.Name = '.') OR (S_Rec1.Name = '..')) OR (Bo_BUid);

    IF NOT(Bo_Buid) THEN
      Finna_Dir (Str_Inndir+'\'+S_Rec1.Name); //Recursion

  UNTIL (FindNext (S_Rec1) <> 0);
END; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T11:25:20.687

The pattern you're using (`'\*.'`) only matches with file and directory names without a period in it (which also means no extension for files). Try with:

```
IF (FindFirst (Str_Inndir+'\*', ... 
```

To eloborate a little, VCL's 'Find..' functions are wrappers around the underlying API's 'Find..' functions which does not really care if you want to search for files or folders (the 'Attr' parameter you can pass to `sysutils.FindFirst` is a facility provided by VCL, and the VCL can only effect the search outcome by filtering it). So the result of using a '`*.`' pattern will not be different for a file or a folder. If the pattern cannot return a file name with a period in it, then it also cannot return a folder with a period in it.

The usage of the parameter is the same with the `dir` command. Navigate to your '..\apps' folder from a command prompt, and if you issue a `>dir *.` you won't see the folders in your question listed.

You can have a look at and try with different 'Pattern's in the following sample code ,which only uses the API to enumerate files, to see how different wild cards effect the search outcome.

```
var
  Data: TWIN32FindData;

procedure ListFiles(const Path, Pattern: string; List: TStrings);

  function IsDot: Boolean;
  begin
    Result := (string(Data.cFileName) = '.') or (Data.cFileName = '..');
  end;

  function IsDirectory: Boolean;
  begin
    Result := Bool(Data.dwFileAttributes and FILE_ATTRIBUTE_DIRECTORY);
  end;

  procedure PutFileName;
  begin
    if not IsDot then begin
      if IsDirectory then
        List.Add(Path + '\' + Data.cFileName + ' <dir>')
      else
        List.Add(Path + '\' + Data.cFileName);                                  //'
    end;
  end;

var
  FindHandle: THandle;
begin
  FindHandle := FindFirstFile(PChar(Path + Pattern), Data);
  if FindHandle <> INVALID_HANDLE_VALUE then
    try
      PutFileName;

      while FindNextFile(FindHandle, Data) do begin
        PutFileName;
        if (not IsDot) and IsDirectory then
          ListFiles(Path + '\' + Data.cFileName, Pattern, List);                //'
      end;

    finally
      windows.FindClose(FindHandle);
    end;
end;

procedure TForm1.Button1Click(Sender: TObject);
const
  Pattern = '\*';
begin
  Memo1.Clear;
  ListFiles('..sometestdirectory..', Pattern, Memo1.Lines);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:11:33.363

There are different method to avoid this issue:

1/ Use complete filter (update is for folders)

```
 FA_ALL_FILES_EX = faNormalFile +
    faReadOnly + faHidden + faSysFile + faArchive + faTemporary + faSparseFile
    + faReparsePoint + faCompressed + faOffline + faNotContentIndexed + faEncrypted;  

  // $80 must be added because if the file's archive attribute is not set,
  // then FindFirst return [FindoInfo.Attr = 128]  ... 
```

2/ Use the latest function from Delphi2009+ unit IOUtils : IOUtils.TDirectory.GetDirectories() [http://docwiki.embarcadero.com/VCL/XE2/en/IOUtils.TDirectory.GetDirectories](http://docwiki.embarcadero.com/VCL/XE2/en/IOUtils.TDirectory.GetDirectories)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:14:34.163

Do you use the faAnyFile constant? It is wrong and doesn't contain all necessary values. Define (and use) a new constant with a value of $FFFF.

# gis - 我想创建一个用于地理处理的桌面基础应用程序并将结果存储在 PostgreSQL（postgis）中！

> ID：10275471
> 
> 赞同：0
> 
> 时间：2012-04-23T05:53:27.430
> 
> 标签：gis, postgis

我想知道创建用于地理处理的**桌面应用程序**并将其存储在 postgis 中所需的一切。我需要从卫星图像中提取值并将其存储在 postgresql 中。所以我的基本问题是我需要使用哪些开源软件来开发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:31:29.713

您可以使用 JDBC 附加到 Postgres，因此您可以使用 Java 或任何其他可以连接到 postgres 数据库的东西来构建您的桌面应用程序。Postgres 地理空间功能来自于在 postgres 之上安装 PostGIS 函数，因此可以使用任何可以处理 pg 查询的东西来回传递这些函数。如果您希望它基于 Web，您可以使用 PHP。如果您正在进行传统的空间分析，您也可以使用具有本机 PostGIS 连接器的 QGIS，但您不需要创建它，它已经可以在 postgis 中进行地理处理和存储数据。

# php - 如何将数据从 PHP 服务器插入到另一个正在运行的 PHP/MySql？

> ID：10275474
> 
> 赞同：1
> 
> 时间：2012-04-23T05:53:39.613
> 
> 标签：php, web-services, remote-server

我的英语不好。敬请谅解。

我计划制作一个提供酒店预订 API 的网站？！。

我现在的想法是……

1.  我有一个基于 JAVA 的 Web 服务器和 MySql DB 服务器。
2.  我的客户主要是小型酒店或汽车旅馆的所有者，他们拥有自己的基于 PHP 网络服务器的网站。
3.  最终客户，即酒店客人将访问酒店网站进行预订。
4.  但他们在网站上没有完善的预订系统。
5.  所以，我想免费提供预订系统，方便预订。
6.  但是，所有预订记录都将保存在我的 MySql DB 服务器中。

这是我的问题。远程 PHP 服务器如何在不知道 ID/PW 和允许并为外部用户打开的端口的情况下将预订数据插入我的远程 MySql DB 服务器？而且，我需要哪些技术？

我要研究我需要的东西！！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:58:10.817

有一个简单的方法——webservices。

在数据库服务器上实现带有身份验证的 Web 服务，并在需要连接到该数据库的服务器上实现 Web 服务客户端。您不会向 MySQL 数据库提供登录密码。您将为您实施的网络服务提供登录密码。

所以，看看网络服务技术。它易于理解和实施。

# javascript - Running QUnit tests with Jenkins and Apache Ant?

> ID：10275476
> 
> 赞同：14
> 
> 时间：2012-04-23T05:54:00.160
> 
> 标签：javascript, ant, build, jenkins, qunit

Is it possible to execute my QUnit (javascript) unit tests from Jenkins? My build script is Apache Ant. Would Jenkins execute this as a separate Build Step, or would I need to add something in the config of my Ant build script?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T11:21:21.740

So, I have finally managed to figure this out.

Here's my end-to-end implementation:

1.  Install PhantomJS ([http://phantomjs.org/](http://phantomjs.org/)) - I installed this in my build/tools folder

2.  Install the PhantomJS QUnit Runner script ([https://gist.github.com/1588423](https://gist.github.com/1588423)) - also installed this in my build/tools folder

3.  Added the following target to my build.xml file:

```
 <target name="qunit" description="runs QUnit tests using PhantomJS">
      <!-- QUnit Javascript Unit Tests -->
      <echo message="Executing QUnit Javascript Unit Tests..."/>
      <apply executable="path-to-your-phantomjs-bin-folder/phantomjs" >
        <arg value="-path-to-your-build-tools/qunit-runner.js" />
        <arg line="--qunit path-to-your-qunit-folder/qunit.js --tests path-to-your-test-folder --juni path-where-you-want-to-write-the-JUnit-style-output/qunit-results.xml" />
        <fileset dir="${basedir}/${dir.test}" includes="tests.js" />
        <srcfile/>
      </apply>
    </target> 
```

4.  Under my Jenkins project config, I now invoke Ant with "minify qunit"

5.  I point Jenkins to the JUnit-style output XML file

And, here is the workflow:

1.  Check changes into my repo
2.  Jenkins will poll GitHub for changes
3.  If there are any changes, Jenkins will pull down
4.  Ant will be invoked, doing the build, then running my unit tests
5.  The test results will be published in a JUnit-like XML format
6.  Jenkins will analyse this output file. If no tests failed, the build will be marked as "Success". If any tests failed, the build will be marked as "Unstable"
7.  Jenkins will deploy the web changes
8.  Jenkins will cleanup the work-area

PS: At the moment, you have to manually delete the JUnit-type XML output file. I will fix this later.

PS: Download the customized qunit.js ([https://gist.github.com/2488794](https://gist.github.com/2488794))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T14:48:23.427

I've written an Ant task specifically for this

[https://github.com/philmander/ant-jstestrunner](https://github.com/philmander/ant-jstestrunner)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:46:28.150

If I understand your setup correctly, you can run Ant build step providing it with the location of your `build.xml`, top-level target, and `-D` parameters (if any). [This](http://wiki.mxunit.org/display/default/Continuous+Integration+--+ANT+-+The+Glue+between+Jenkins+and+your+Tests) may be of some help.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T11:07:53.257

Qunit itself now maintains a phantomjs runner:

[https://github.com/jquery/qunit/tree/master/addons/phantomjs](https://github.com/jquery/qunit/tree/master/addons/phantomjs)

So assuming you've already installed phantomjs, grab *runner.js* from the link above (or get it using bower/whatever js package manager), put it somewhere jenkins can find it, and then use:

```
phantomjs path/to/runner.js path/to/your/qunit_tests.html 
```

It gives minimal output like this:

```
$ phantomjs superlists/static/tests/runner.js accounts/static/tests/tests.html 
Took 29ms to run 11 tests. 11 passed, 0 failed. 
```

Or like this if it fails:

```
$ phantomjs superlists/static/tests/runner.js accounts/static/tests/tests.html 
Test failed: sinon tests of navigator.id.watch: watch sees current user
    Failed assertion: check user, expected: current user, but was: baz
    at file:///home/harry/superlists/superlists/static/tests/qunit.js:556
    at file:///home/harry/superlists/accounts/static/tests/tests.html:69
    at file:///home/harry/superlists/superlists/static/tests/qunit.js:203
    at file:///home/harry/superlists/superlists/static/tests/qunit.js:361
    at process (file:///home/superlists/superlists/static/tests/qunit.js:1453)
    at file:///home/harry/superlists/superlists/static/tests/qunit.js:479
Took 29ms to run 11 tests. 10 passed, 1 failed. 
```

No junit-xml integration, but at least it returns an error code if it fails, so it'll fail the build in jenkins...

```
$ echo $?
1 
```

# c++ - C++ 输入全局变量可跨多个类访问

> ID：10275479
> 
> 赞同：6
> 
> 时间：2012-04-23T05:54:14.523
> 
> 标签：c++, global-variables, global

我正在开发一个需要几个命令行参数的项目，并将这些参数用作后续模拟的参数。（我想批量运行大量实验）。

在运行时设置全局变量的最佳方法是什么？就全局而言：变量可能会在运行期间发生变化，但应该可以跨大量类访问。

目前我将它们读入一个包含在其他类中的 Config 对象。如果有人有更好的想法（xml？）我全神贯注。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T06:02:32.710

将所有相关**变量集中在一个屋檐下**，以便于访问。2种方法是可能的：

## (1) 命名空间全局变量

```
namespace Configuration {
  extern int i;
  extern bool b;
  extern std::string s;
} 
```

## (2) 类静态成员

```
class Configuration {  // provide proper access specifier
  static int i;
  static bool b;
  static std::string s;
} 
```

为了很好地跟踪它们，使用 getter()-setter() 方法作为命名空间/类中的包装器。
如果程序需要，您可以使用 getter-setter 以线程安全的方式处理它们。

# c - 程序执行但不是全部，我不知道这个错误是什么意思

> ID：10275484
> 
> 赞同：-1
> 
> 时间：2012-04-23T05:54:38.013
> 
> 标签：c, string, fork, pipe

这个程序将创建一个父亲和 2 个孩子，会有一个链字符，父亲将填充 2 个管道，第一个用数字，第二个用字母，第一个孩子将从第一个管道读取，并返回多少他得到的数字，第二个儿子将从第二个管道中读取，并返回他得到了多少个字母。

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <fcntl.h>

main()
{
    printf("I am the father, I will create 2 sons, the first will read the numbers , the second will read the letters\n");
    char *word="alibas123sam";

    printf("Now 2 pipes will be created\n");
    int fd1[2];
    int fd2[2];
    pipe(fd1); pipe(fd2);
    printf("Now the father will write numbers in the first pipe, and letters in the second\n");
    int i;
    char numbers[20]; int j=0;
    char caracters[20]; int k=0;
    for (i=0;i<20;i++)
    {
        if(word[i]>='0' && word[i]<='9') //if number
        {
            close(fd1[0]); //closing reading
            write(fd1[1],&word[i],1);

        }
        else
        {
            close(fd2[0]);  
            write(fd2[1],&word[i],1);
        }

    }
    printf("The father has wrote in the 2 pipes, now its time for the sons\n");
    int f=fork();
    if(f==0) //first son
    {
        for(i=0;i<20;i++) {         
            close(fd1[1]); //closing writing
            read(fd1[0],&numbers[j],1);
            j++;

        }
        printf("first son read everything, he got %d Numbers\n", j);
    }
    else
    {
        f=fork();
        if(f==0)
        {
            for(i=0;i<20;i++) {         
            close(fd2[1]); //closing writing
            read(fd2[0],&caracters[k],1);
            k++;

        }   
        printf("second son read everything, he got %d caracters\n", k);
    }
}} 
```

错误：

```
Disallowed system call: SYS_pipe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:12:41.363

问题可能源于您在 fork 之前关闭了文件描述符。将您的代码重新排列为

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <fcntl.h>

main()
{
    printf("I am the father, I will create 2 sons, the first will read the numbers , the second will read the letters\n");
    char *word="alibas123sam";

    printf("Now 2 pipes will be created\n");
    int fd1[2];
    int fd2[2];
    pipe(fd1); pipe(fd2);
    printf("Now the father will write numbers in the first pipe, and letters in the second\n");
    int i;
    char numbers[20]; int j=0;
    char caracters[20]; int k=0;
    for (i=0;i<20;i++)
    {
        if(word[i]>='0' && word[i]<='9') //if number
        {
            close(fd1[0]); //closing reading
            write(fd1[1],&word[i],1);

        }
        else
        {
            close(fd2[0]);  
            write(fd2[1],&word[i],1);
        }

    }
    printf("The father has wrote in the 2 pipes, now its time for the sons\n");
    int f=fork();
    if(f==0) //first son
    {
        for(i=0;i<20;i++) {         
            close(fd1[1]); //closing writing
            read(fd1[0],&numbers[j],1);
            j++;

        }
        printf("first son read everything, he got %d Numbers\n", j);
    }
    else
    {
        f=fork();
        if(f==0)
        {
            for(i=0;i<20;i++) {         
            close(fd2[1]); //closing writing
            read(fd2[0],&caracters[k],1);
            k++;

        }   
        printf("second son read everything, he got %d caracters\n", k);
    }
}} 
```

似乎工作。

# android - 不断收到 NullPointerException 错误，找不到在哪里

> ID：10275488
> 
> 赞同：0
> 
> 时间：2012-04-23T05:55:01.830
> 
> 标签：android, string, nullpointerexception, double, android-alertdialog

我确信这确实是一个我没有看到的简单解决方案。但是，我更改了一些功能（这似乎无关），但现在我收到了一个空指针异常错误，而且它并没有让我在哪里可以找到它。如果有人可以查看我的代码并帮助我。我已经能够将其缩小到我的代码的关键部分。此代码触发警报对话框：

```
 tableRowShots = (TableRow)findViewById(R.id.shots_row);
    tableRowShots.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            shotTextDialog().show();
            calculate();
      }

    }); 
```

这是 shotTextDialog() 的代码：

```
private Dialog shotTextDialog() {
    final View layout = View.inflate(this, R.layout.amount_edittext, null);

    final EditText savedText = (EditText) layout.findViewById(R.id.amountEditText);
    textViewShotsAmount = (TextView)findViewById(R.id.shots_amount);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Choose how many shots:");
    builder.setPositiveButton("Save", new Dialog.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            myTextString = savedText.getText().toString().trim();
            TextView sizeText = (TextView)findViewById(R.id.shots_amount);
            sizeText.setText(myTextString);
            Toast.makeText(getApplicationContext(), "You have chosen " + myTextString + " shots for your drink", Toast.LENGTH_SHORT).show();
        }
    });
    builder.setView(layout);
    return builder.create();
 } 
```

这是calculate()的代码：

```
public void calculate() {
    double leftoverLiquid = 0;

    TextView shots = (TextView) this.findViewById(R.id.shots_amount);
    double shotsDouble = 0;
    if(shots != null) {
        shotsDouble = Double.valueOf(shots.getEditableText().toString());           
    }

    TextView powder = (TextView) this.findViewById(R.id.powder_amount);
    double powderDouble = 0;
    if(powder != null) {
        powderDouble = Double.valueOf(powder.getText().toString());
    }

    TextView add1 = (TextView) this.findViewById(R.id.additive_amount_1);
    double add1Double = 0;
    if(add1 != null) {
        add1Double = Double.valueOf(add1.getEditableText().toString());
    }

    TextView add2 = (TextView) this.findViewById(R.id.additive_amount_2);
    double add2Double = 0;
    if(add2 != null) {
        add2Double = Double.valueOf(add2.getEditableText().toString());
    }

    leftoverLiquid = size() - (powderDouble + shotsDouble + add1Double + add2Double);

    TextView liquid = (TextView) findViewById(R.id.liquid_amount);
    textViewLiquidAmount = liquid;
    liquid.setText(Double.toString(leftoverLiquid));

} 
```

NullPointerException 错误似乎落在代码行附近的某个地方：

```
shotsDouble = Double.valueOf(shots.getEditableText().toString()); 
```

谁能看到我遗漏的任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:59:30.170

只需检查您的 TextView`shots.getEditableText().toString()`值，要么不为空，要么包含数字而不是其他字母。

它就像，

```
 shotsDouble = Double.valueOf(shots.getText().toString().trim()); 
```

还有一件事，

```
public Editable getEditableText () 
```

将 TextView 显示为可编辑对象的文本返回。如果文本不可编辑，则返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:58:43.527

我建议您使用`Log`该类来调试您的应用程序。将呼叫添加到

```
Log.v("Activity name", "line number: #"); 
```

在您的 Java 文件中的各个点，运行您的应用程序，并检查 logcat 以查看在`NullPointerException`抛出之前最后一次调用哪个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:04:18.570

似乎`getEditableText()`返回null。

文件说..

```
public Editable getEditableText () 
```

**将 TextView 显示为可编辑对象的文本返回。如果文本不可编辑，则返回 null。**.

因此，只需尝试将其替换为`getText()`.

# android - 为什么 google android 做昂贵的 alpha 混合？

> ID：10275494
> 
> 赞同：1
> 
> 时间：2012-04-23T05:56:03.337
> 
> 标签：android, user-interface, rendering, alpha, hardware-acceleration

在android中，当在视图上使用alpha混合时，视图被渲染为opengl纹理，然后纹理以alpha值在帧缓冲区上渲染......我想知道他们为什么这样做，成本不低直接用 alpha 值将视图渲染到目标缓冲区？？？还是我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:44:25.590

您错过了必须进行混合才能获得最终颜色的东西，为此有 3 个选项：

1.  使用 GPU 与帧缓冲区混合。
2.  在硬件中混合到帧缓冲区。
3.  使用图像合成/处理硬件进行混合。

如果您想知道为什么不直接访问帧缓冲区，渲染到纹理的原因是与目标 alpha 相关，即将存储在纹理中的 alpha 值。如果视图的透明部分下面有东西，这将存在。您建议的优化只能在保证视图不透明的情况下使用。

# extjs - EXTJS 4.0 网格过滤器类型数字符号未出现

> ID：10275498
> 
> 赞同：2
> 
> 时间：2012-04-23T05:56:33.840
> 
> 标签：extjs

我在 EXTJS 4.0 Grid Filter Type = numeric 中有问题。< > 和 = 的符号没有出现。附上屏幕截图。

![图片EXTJS4.0](../Images/76d95465682f2d2ca6bdb45bec7bed36.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T08:26:54.950

检查源代码（萤火虫），有特殊的css文件 RangeMenu Styles 并且图像有背景样式

```
.ux-rangemenu-icon {
    margin-top: 0;
}
.ux-rangemenu-gt {
    background-image: url(../images/greater_than.png) !important;
}
.ux-rangemenu-lt {
    background-image: url(../images/less_than.png) !important;
}
.ux-rangemenu-eq {
    background-image: url(../images/equals.png) !important;
} 
```

检查您是否在图像目录中有它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T13:05:21.250

只需将其添加到您的文件中，

```
<link rel="stylesheet" type="text/css" href="../../extjs/examples/ux/grid/css/RangeMenu.css"/> 
```

# oop - 在我的 OO 设计方面需要帮助

> ID：10275499
> 
> 赞同：0
> 
> 时间：2012-04-23T05:56:44.373
> 
> 标签：oop, class

这是场景。

```
public interface Processor{

    public void create();

    public void setDocuments();

    public abstract void prepareDocuments();

}

public class ProcessorImpl implements Processor{

    public void create(){
        // Do something
    }

    public void setDocuments(){
       // Do something
    }

}

public class ProcessorA implements ProcessorImpl{
    // this class will implement only once abstract 
    // method which is prepareDocuments()

    public void prepareDocuments(){
       // prepare documents..and also 
       // set the Documents list which will be checked by create() 
       // method and then index will be created.

    }

}

public class IndexGenerator{

    public static void main( String[] args){

       ProcessorA a = new ProcessorAImpl();
       a.create();  
    }
} 
```

简要背景......我正在开发一个通用框架来处理所有与 Lucene 索引相关的活动，包括创建索引、从索引中删除文档、更新和添加到索引中。除了创建文档之外，处理索引的所有逻辑都保持不变。每个索引都有不同类型的文档，因此我保留了 prepareDocuments() 方法的抽象，并为每个索引类型实现了它。

现在我想让所有索引生成器类简单地创建其特定索引处理器的实例，如 ProcessorA 并调用 create() 方法。但问题是 create() 方法总是发现文档列表为空/空，尽管 prepareDocuments 通过调用 setDocuments() 方法来设置文档。我知道存在一些设计缺陷，我真的需要向 OO 专家寻求帮助。

谢谢热心

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:11:58.823

我不知道为什么你会得到空/null，因为没有足够的代码可以从中推断出来。但是，对于您的问题，我会使用**模板方法**设计模式，例如在这里描述：[http ://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

我认为这就是你想要做的。

顺便提一句。`implements`关键字仅用于接口。您尝试使用它而不是在`extends`这里：

```
public class ProcessorA implements ProcessorImpl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:32:54.810

为了详细说明先前关于模板的答案（我完全同意），听起来您可能对调用 setDocuments() 的顺序有疑问。模板方法模式的好处之一是强制调用不同方法（抽象或非抽象）的顺序。

您可以考虑像这样重组基类：

```
public interface Processor {
    ...
    // This method orchestrates doc preparation by ensuring the correct
    // ordering of method invocation, and calls the derived class impl
    // method doPrepareDocuments()
    public void prepareDocuments() {
        // do document creation stuff here by calling
        // appropriate methods (abstract or not)

        setDocuments();

        // implemented in derived classes to do specific document preparations
        doPrepareDocuments();
    }

    public abstract void doPrepareDocuments();
    ...
} 
```

这样，每个派生类实现都不必记住要采取的所有步骤，以及按照什么顺序执行，而是专注于它知道的内容。这种方法增加了凝聚力。

# android - SD卡文件加密API

> ID：10275502
> 
> 赞同：2
> 
> 时间：2012-04-23T05:57:04.667
> 
> 标签：android, encryption, filesystems, android-sdcard

当设备连接到 USB 存储模式/设备上的内部文件浏览应用程序时，我想知道是否有人可以告诉我一种使 SD 卡上的文件夹隐藏/不可见/加密的方法。
我还需要能够从我的 android 应用程序访问这些文件（如果有任何不同，只能读取它们..）

我知道一些像 SecretVault pro 这样的文件加密应用程序，但是像这样的应用程序没有用于开发人员的 API，它允许逐步控制加密/破旧状态。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T06:41:53.390

```
 public byte[] keyGen() throws NoSuchAlgorithmException {
    KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");
    keyGenerator.init(192);
    return keyGenerator.generateKey().getEncoded();
 } 
```

你需要在你的应用程序中存储密钥

```
 public byte[] encript(byte[] dataToEncrypt, byte[] key)
            throws NoSuchAlgorithmException, NoSuchPaddingException,
            InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    //I'm using AES encription
    Cipher c = Cipher.getInstance("AES");
    SecretKeySpec k = new SecretKeySpec(key, "AES");
    c.init(Cipher.ENCRYPT_MODE, k);
    return c.doFinal(dataToEncrypt);
    }

    public byte[] decript(byte[] encryptedData, byte[] key)
            throws NoSuchAlgorithmException, NoSuchPaddingException,
            InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    Cipher c = Cipher.getInstance("AES");
    SecretKeySpec k = new SecretKeySpec(key, "AES");
    c.init(Cipher.DECRYPT_MODE, k);
    return c.doFinal(encryptedData);
    } 
```

# c# - 如何通过不同的功能发送文本？

> ID：10275508
> 
> 赞同：0
> 
> 时间：2012-04-23T05:57:25.430
> 
> 标签：c#, .net, delegates

我想用这样的日志函数创建 ac# 库：

```
class MyLogClass
{
    public void log(string format, params object[] args)
    {

        string message = string.Format(format, args);

        // custom function
        log_to_file(message); // or log_to_db() or log_to_txtBox()

    }
} 
```

想法是根据需要更改函数，使用 log_to_file()、log_to_db() 或 log_to_txtBox()。

我正在考虑使用第三个参数（在格式之前）作为代表来表示自定义函数，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:10:16.217

使用委托，您将编写如下内容：

```
class MyLogClass
{
    public static void Log(Action<string> outputAction, string format,
                           params object[] args)
    {
        string message = string.Format(format, args);
        outputAction(message);
    }
} 
```

请注意，参数不能出现*在*参数之后，`args`因为后者是*参数数组*（由`params`关键字表示） - 参数数组只能作为声明中的最后一个参数出现。

或者，您可以在创建类的*实例*时设置一个操作：

```
class MyLogClass
{
    private readonly Action<string> outputAction;

    public MyLogClass(Action<string> outputAction)
    {
        this.outputAction = outputAction;
    }

    public void Log(string format, params object[] args)
    {
        string message = string.Format(format, args);
        outputAction(message);
    }
} 
```

# php - 如何在 PHP 中按字符串处理类

> ID：10275510
> 
> 赞同：0
> 
> 时间：2012-04-23T05:57:45.757
> 
> 标签：php

我有一个电话让我们假设它叫 A

```
public class A{
...
} 
```

当我有班级的名字时，如何访问这个班级的成员

我需要的是这样的

```
{"A"}::x=5; 
```

代替

```
A::x=5; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T06:04:22.457

```
class Foo {
    const BAR = 'bar';
    public static $baz = 'baz';
}

$foo = 'Foo';
echo $foo::BAR;
echo $foo::$baz; 
```

不过，这需要 PHP 5.3+。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T06:02:43.640

您可以使用`ReflectionClass`

```
class A {
        public static $x = 5;
}

$class = new ReflectionClass('A');
echo $class->getStaticPropertyValue('x'); 
```

[http://php.net/manual/en/class.reflectionclass.php](http://php.net/manual/en/class.reflectionclass.php)

# php - ajax jquery XML返回循环

> ID：10275511
> 
> 赞同：0
> 
> 时间：2012-04-23T05:57:52.463
> 
> 标签：php, jquery, xml, ajax

大家好，我目前正在使用下面的代码来收集我返回的 XML 数据：

```
success: function(xml) {
    $(xml).find('members').each(function(){ 
       $(this).find("id").each(function(){        
         var id = $(this).text();
         $("#example").append('<img src="http//www.xxxxxxx.com/' + id + '.jpg">');
       }); 
    }); 
} 
```

但是，我需要它能够一次收集每个部分的**所有**数据，而不必只为一件事循环，然后返回并循环获取第二个，等等。

XML 如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<members>
  <new>YES</new>
  <id>5678994</id>
  <name>Bob Barker</name>
  <rsvp>0</rsvp>
  <new>NO</new>
  <id>94443326</id>
  <name>Bill Gates</name>
  <rsvp>0</rsvp>
  <street1>na</street1>
  <street2>na</street2>
  <city>na</city>
  <state>na</state>
  <zip>0</zip>
  <cellp>0</cellp>
</members> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:38:48.110

您可以像这样简化遍历

```
$divToAppend=$("#example");    
$(xml).find("members id").each(function(){
    $divToAppend.append('<img src="http//www.xxxxxxx.com/' + $(this).text() + '.jpg" />');
 }); 
```

缓存Div / Element`'#example'`以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:58:34.130

知道了：

```
$(xml).find('members').each(function(){ 
    $(this).find("user").each(function(){ 
        var found   = $(this).find("new").text();
        var id      = $(this).find("id").text();
        var name    = $(this).find("name").text();
        var rsvp    = $(this).find("rsvp").text();
        var street1 = $(this).find("street1").text();
        var street2 = $(this).find("street2").text();
        var city    = $(this).find("city").text();
        var state   = $(this).find("state").text();
        var zip     = $(this).find("zip").text();
        var cellp   = $(this).find("cellp").text();

        alert(street1);
        alert(id);
    }); 
}); 
```

使用以下 xml 布局：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<members>
<user>
<new>NO</new>
<id>5000834</id>
<name>bob Barker</name>
<rsvp>0</rsvp>
<street1>na</street1>
<street2>na</street2>
<city>na</city>
<state>na</state>
<zip>0</zip>
<cellp>0</cellp>
</user>
<user>
<new>NO</new>
<id>94323456</id>
<name>Bill Gates</name>
<rsvp>0</rsvp>
<street1>na</street1>
<street2>na</street2>
<city>na</city>
<state>na</state>
<zip>0</zip>
<cellp>0</cellp>
</user>
</members> 
```

# php - 如何使用 php 而不是 url 或附件发送图像并在电子邮件中显示它？

> ID：10275519
> 
> 赞同：1
> 
> 时间：2012-04-23T05:58:38.430
> 
> 标签：php

在编写网络服务时，我如何将图像发送到电子邮件并显示它。我能够发送包含除图像之外的所有内容的电子邮件。我认为图像代码中有一些错误。任何人都可以帮我解决这个问题吗？我的代码是

```
<?php
$title=$_REQUEST['title'];
$location=$_REQUEST['location'];
$contactname=$_REQUEST['contactname'];
$contactnumber=$_REQUEST['contactnumber'];
$description=$_REQUEST['description'];
$image=$_REQUEST['image'];
if($title)
{
$Image=basename($_FILES['file']['name']);
$Image=str_replace(' ','|',$Image);
$date=date('YmdHis');
$date=str_replace('%20',' ',$date);
$Image=$date.".jpg";
$tmppath="images/".$Image;

move_uploaded_file($_FILES['file']['tmp_name'],$tmppath);
$message1 = ?><html><head></head><body>
<? $message1 .= ?><img src="http://www.website.com/appinstaller/ramaraju/images/<?= $Image ?>" /></body></html>
<?php
$headers = "From: support@";
$headers .= "Content-type: text/html";

//mail($to, $subject, $message, $headers);
//$mailimg = '<img src="http://www.myappdemo.com/appinstaller/ramaraju/services/images/$file"</a>';

 $to = "ramaraju.d@stellentsoft.com";
 $subject = "Hi!";
 $message="Title : $title\r\n Location:$location\r\n Contact name:$contactname\r\n Contact:$contactnumber\r\n Description:$description\r\n file:$Image";

  if (mail($to, $subject, $message, $headers))
  {
  $message=array("messsage"=>"Message successfully sent!");
  } else {
  $message=array("message"=>"Message delivery failed.");
  }
  }
  else
  {
  $message=array("message"=>"provide values");
  }
  echo json_encode($message);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:02:47.177

您必须这样做，`<?=$Image ?>`而不是`<? $Image ?>`像在 src 中的代码中那样，您还没有打印`$Image`..

因此最终的 img 标签应该是

```
<img src="http://www.myappdemo.com/appinstaller/ramaraju/images/<?=$Image ?>" /> 
```

`<?`并被`<?=`称为短开放标签，并不总是启用（参见[short_open_tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)指令）

# javascript - 如何从java脚本关闭JSP页面

> ID：10275522
> 
> 赞同：0
> 
> 时间：2012-04-23T05:58:49.273
> 
> 标签：javascript, jsp

我创建了一个jsp页面。在那个 jsp 页面中，我使用 javascript 来显示错误对话框。该错误对话框在单击确定按钮时具有确定按钮我正在使用关闭该对话框`($( this ).dialog( "close" );`但我想关闭调用错误对话框的jsp页面。如何从javascript关闭父jsp页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:30:11.840

你不能关闭一个你没有使用javascript打开的窗口。

# android - 如何将 Android OpenGL ES 2.0 三角形样本转换为点

> ID：10275528
> 
> 赞同：1
> 
> 时间：2012-04-23T05:59:44.873
> 
> 标签：android, opengl-es-2.0

我正在使用本[教程](http://developer.android.com/resources/tutorials/opengl/opengl-es20.html) 并使其正常工作，但我只想绘制三角形的点。当我将 drawArrays 中的模式从 GLES20.GL_TRIANGLES 设置为 GLES20.GL_POINTS 时，没有绘制任何内容。或者，仅在顶点着色器中设置点大小也不会绘制任何内容。我错过了什么？

看着这样的代码，[我](http://code.google.com/p/opengles-book-samples/source/browse/trunk/Android/Ch13_ParticleSystem/src/com/openglesbook/particlesystem/ParticleSystemRenderer.java?r=49) 不确定我需要什么，因为除非必须，否则我不想使用纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:52:24.977

“[简单的 OpenGL 原语](http://www.authenticsociety.com/about/OpenGL_Primitives_glVertex)”说：

> 点可以产生出色的粒子效果，例如火花或灰尘粒子在穿过光线时会闪烁。即使我们正在使用 3D 图形，在屏幕上渲染单个点本身也会***产生 2D 空间的错觉***，因为我们的显示器屏幕是平面的或 2 维的，并且没有任何指示深度的东西。因此，使点看起来具有交互性的一种方法是让它们在屏幕上以有趣的模式移动，例如 ***圆形、螺旋形以及正弦和余弦公式的变化***。

**编辑**：
但如果你只想让**你的点可见**，你可以使用***glPointSize(float size)***或***glPointSize(int size)***像这样：

```
gl.glPointSize(5.0f);
gl.glDrawElements(...); 
```

另一方面，OpenGL ES 2.0 支持点精灵，在顶点着色器中，您可以使用 gl_PointSize 设置大小，如下所示：

```
uniform float uThickness;
...
gl_PointSize = uThickness; 
```

参考：
[stackexchange](https://gamedev.stackexchange.com/questions/11095/opengl-es-2-0-point-sprites-size)
[wikibooks](http://en.wikibooks.org/wiki/OpenGL_Programming/GLStart/Tut3)
Pro Open GL ES for Android

# ruby-on-rails-3 - 带有 Twitter-Bootstrap 和 simple_form 的 Rails：如何以水平形式进行内联输入？

> ID：10275531
> 
> 赞同：2
> 
> 时间：2012-04-23T05:59:56.260
> 
> 标签：ruby-on-rails-3, forms, twitter-bootstrap, simple-form

我正在使用上述内容，并希望在我的水平形式中有一些内联输入。例如：

```
Zip | City 
```

尝试了几件事，比如浮动或自己的 div，但它从来没有为我工作过。此外，我更愿意找到一个 DSL 解决方案而不是 css。

另一方面：您更愿意推荐使用 twitter_bootstrap_form_for 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:48:46.673

我建议你考虑使用 Twitter Bootstrap。它非常易于使用，并使日常任务变得简单。例如，下面是用于实现水平内联表单的代码：

```
<form class="well form-inline">
  <input type="text" class="input-small" placeholder="Email">
  <input type="password" class="input-small" placeholder="Password">
  <label class="checkbox">
    <input type="checkbox"> Remember me
  </label>
  <button type="submit" class="btn">Sign in</button>
</form> 
```

# c# - 打开图表

> ID：10275532
> 
> 赞同：1
> 
> 时间：2012-04-23T05:59:56.457
> 
> 标签：c#, facebook-opengraph

我是新程序员的每个人都想将我的项目与 facebook Open Graph Diagram 集成。

我对是否可以通过编程设置单个对象而不是在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)中一一注册有一些疑问？

例如：如果我是一家拥有超过 500 件商品的零售店，手动注册所有商品将非常耗时。因此，是否有任何替代解决方案？

任何帮助将不胜感激。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:24:08.267

您在 Facebook 设置窗格中注册的对象实际上是对象类型。一旦定义了对象类型，例如“产品”，您可以通过添加元标记来使用“项目”对象下的所有页面

-塔西洛

# javascript - 在 MVC3 中单击链接时动态加载 iframe

> ID：10275533
> 
> 赞同：0
> 
> 时间：2012-04-23T06:00:00.200
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-ajax

嗨我正在开发一个应用程序 inMVc3
我有一个模型包含

```
Hobbyname 
Hobbyurl 
```

我画了一张表格，在第一列中我获取了所有的爱好名称并将其显示为链接。Hobbyurl 包含与 Hobbyname 关联的页面的 url 现在，当我从左侧单击 Hobbyname 时，我希望将内容加载到右侧，我使用 Iframe 来显示内容，因此我需要一次又一次地加载 Iframe点击。

为了获取 Hobbynames，我使用了以下代码：

```
 <td>
 <ul>
  @foreach (var item in Model)
  {
   <li> @Html.ActionLink(item.HobbyName, "Hobbies")</li>
  }
 </ul>
 </td>
 <td>
 <div>
 <iframe id="iframe"></iframe>
 </div>
 </td> 
```

这是脚本：

```
<script type="text/javascript">
$('a').click(function () {
    $('iframe').attr('src', "/HobbyHomes/Test");
}); 
</script> 
```

但我无法在点击链接时加载 iframe。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:07:29.243

你可以试试，

```
$(function(){
   $('a').click(function(){
     $('iframe').attr('src', "/Controller/Action");
   });
}); 
```

虽然没有测试过这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:48:12.677

您可能想在加载 dom 后附加您的 onclick，就像这样

```
<script type="text/javascript">
$(document).ready(function(){
  $('a').click(function (e) {
    e.preventDefault();
    $('iframe').attr('src', "/HobbyHomes/Test");
  }); 
});
</script> 
```

# java - 将 Primitive 值分配给 Wrapper 类的正确方法

> ID：10275535
> 
> 赞同：4
> 
> 时间：2012-04-23T06:00:09.163
> 
> 标签：java, wrapper, variable-assignment

直接将原始值分配给 Wrapper 类型和使用 valueOf API 有什么区别？IE

```
Long val = 91l; 
```

和

```
Long val = Long.valueOf(91l); 
```

这个问题源于我几天来一直在研究的一个错误。到目前为止，我还无法成功地重新创建它，并且会随机出现。我有一些对象是作为处理某些数据的一部分而生成的，这些对象有许多字段，其中一些是 Long 类型（包装器）我确信值被分配给所有变量，但在某些情况下它们只是出现 NULL，即使没有理由这样做。

与此问题相关的方式是，这些 Long 属性的 Set 方法实际上采用 long （原始）类型的参数，并使用第一种方法分配。我不确定这是否会导致它。我已经用第二种方法修改了我的代码，并且正在等待一些好的测试完成，然后我才会高兴地修复它。

我很想知道我提到的上述两种方法是否存在理论上的差异。（我通常大部分时间都使用第一个。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T06:02:47.883

这两行将编译为相同的字节码（至少在我见过的所有编译器中）。目前尚不清楚您的问题出在哪里，但它不存在。（规范不保证*如何*创建值，但保证结果是一个对象，这样该`longValue()`方法将返回原始原始值。）

例如，反编译这个方法：

```
static void foo() {
    Long val1 = 91L;
    Long val2 = Long.valueOf(91L);
} 
```

结束于：

```
static void foo();
  Code:
   0:   ldc2_w  #2; //long 91l
   3:   invokestatic    #4; //Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
   6:   astore_0
   7:   ldc2_w  #2; //long 91l
   10:  invokestatic    #4; //Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
   13:  astore_1
   14:  return    
} 
```

（作为一个小点，我鼓励你使用`L`而不是`l`在源代码中作为后缀 -根据你的字体，`l`它看起来很像。）`1`

# gitweb - 配置 GitWeb - 404 - 未找到项目

> ID：10275536
> 
> 赞同：17
> 
> 时间：2012-04-23T06:00:14.710
> 
> 标签：gitweb

我正在通过 OpenSUSE（非虚拟主机）中的 Apache 在我的系统中配置 gitweb。但是，我收到以下错误：`404 - No projects found`.

/etc/gitweb.conf

```
# path to git projects (<project>.git)
$projectroot = "/home/zhijian/gitweb";

# directory to use for temp files
$git_temp = "/tmp";

# target of the home link on top of all pages
#$home_link = $my_uri || "/";

# html text to include at home page
$home_text = "/gitweb/static/indextext.html";

# file with project list; by default, simply scan the projectroot dir.
$projects_list = $projectroot;

# stylesheet to use
$stylesheet = "/gitweb/static/gitweb.css";

# logo to use
$logo = "/gitweb/static/git-logo.png";

# the 'favicon'
$favicon = "/gitweb/static/git-favicon.png"; 
```

/etc/apache2/conf.d/gitweb.conf

```
Alias /gitweb "/home/zhijian/gitweb"

<Directory "/home/zhijian/gitweb">
    Options +Indexes +ExecCGI +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    AddHandler cgi-script .cgi
    DirectoryIndex gitweb.cgi

</Directory> 
```

我在 gitweb 文件夹中添加了一个软链接来链接 gitweb.cgi 和静态文件夹。Apache 错误日志显示`gitweb.cgi: Can't opendir(/home/zhijian/gitweb): Permission denied`，但 gitweb 文件夹的权限已设置为 755。有人知道可能导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-31T03:35:09.050

我在 OpenSuse 11.4 中也遇到了同样的问题。在我的情况下（我怀疑最初的发帖人就是这种情况，他也是一名 opensuse 用户），问题出在 AppArmor 上，我对此知之甚少。

以下是我注意到导致最终解决方案的一些要点：

*   在 OpenSuse 中，安装了 git-web rpm 包，因此**$projectroot**默认为“ **/srv/git** ”文件夹
*   如果你在这个“ **/srv/git/...** ”子文件夹中添加你的 git 存储库，那么一切正常
*   如果您决定选择其他位置，例如“ **/home/myname/srv/git/** ”，那么尽管按照其他帖子中的建议将所有者设置为**wwwrun:www ，但它会失败。**
*   这里的问题是**AppArmor**，它似乎对允许应用程序执行的操作设置了更严格的政策
*   执行“ **rpm -ql git-web** ”将显示一个名为：“ **/etc/apparmor.d/usr.share.git-web.gitweb.cgi** ”的文件
*   用 su/sudo 打开这个文件，你可以编辑它
*   在这里，您将看到以下几行：

...

```
/srv/git/ r,
/srv/git/** r, 
```

...

*   将这些更改为包含您的 git 存储库的父文件夹的路径，例如，如果您将它们存放在“ **/home/myname/srv/git/** ”中，则使用“” **/home/myname/srv/** “父文件夹，例如：

...

```
/home/myname/srv r,
/home/myname/srv/** r, 
```

...

*   保存对文件的更改
*   我认为您还必须将此父文件夹的所有者更改为 wwwrun:www，例如“ **sudo chown -R wwwrun:www srv/** ”
*   **使用“ sudo rcapparmor restart** ”重新启动 AppArmor

现在一切都应该好了:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T13:18:49.430

gitweb cgi 必须与您正在扫描的 repo 拥有相同的所有者。也就是说，如果你的 $projectroot 是 www-data:www-data 那么 gitweb.cgi 也必须是 www-data:www-data 。

此外，$projectroot 下的目录也必须具有相同的权限。你应该能够做一个`chown -R www-data:www-data .`应该有帮助的事情。您将需要查看权限以及所有权，但这比较棘手，您需要确保自己做对了并且没有打开任何安全漏洞。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T09:31:42.723

我有同样的问题。“404 未找到项目”，但配置很好。Apache 缓存了 404 响应，并没有再次运行 cgi 脚本：

1.  未编辑 gitweb.conf 中的配置（默认 ubuntu 安装）
2.  我使用网络浏览器访问了 URL：得到“未找到项目”
3.  我更新了配置
4.  我按 ctrl-r 但又一次：“找不到项目”（尽管现在配置正确）
5.  我按了**shift-ctrl-r** (Firefox)，得到了正确的结果！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-05T23:29:18.607

编辑您在此处找到的 gitweb 配置文件：/etc/gitweb.conf

并将以“我们的 $projectroot”开头的第 10 行更改为：

我们的 $projectroot = "/path/to/your/git/root"

然后重新启动您的网络服务器，这将告诉您您的网络服务器配置设置 GIT_PROJECT_ROOT 是否确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T11:23:27.693

SELinux 也使存储库文件对 http 服务器不可用。如果您必须使用 SELinux，您必须更改策略。最简单的方法是禁用 SELinux ;-)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-07-14T06:00:39.760

将 gitweb 文件夹的权限设置为 777。它可以工作。

# html - 字幕在其轨迹上产生点

> ID：10275537
> 
> 赞同：0
> 
> 时间：2012-04-23T06:00:49.170
> 
> 标签：html, marquee

好的，我使用选框工具在我的 html 文档中滑动某段文本，但由于某种原因，当文本向左移动时，文本后面会出现一串点。当文本出现在他的右边时，这些点就会消失。这是代码：

```
 <div id="header">

      <p class="style2"><marquee behavior="alternate">New Feature!</marquee></p>

      </div> 
```

标题是这样的：

```
 .pagestyle #header { 
      padding: 10px;  
      background:#FF6600;
      } 
```

# ado.net - 带有参数的 ExecuteScalar() 不起作用

> ID：10275539
> 
> 赞同：1
> 
> 时间：2012-04-23T06:00:51.687
> 
> 标签：ado.net

这总是返回一个错误`cmd.ExecuteScalar()`告诉我`The parameterized query '(@Name nvarchar(4000))select count(*) from Locations where name=' expects the parameter '@Name', which was not supplied.`

我做错了什么？**位置**是一个字符串。

```
 int count = 0;
        using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnection"].ConnectionString))
        {
            SqlCommand cmd = new SqlCommand("select count(*) from Locations where name=@Name", conn);
            cmd.Parameters.AddWithValue("@Name",location);

            conn.Open();
            count = (int)cmd.ExecuteScalar();
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-23T17:53:04.790

您没有指定命令类型。应该是这样的：

```
using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnection"].ConnectionString))
    {
        SqlCommand cmd = new SqlCommand("select count(*) from Locations where name=@Name", conn);
        cmd.Parameters.AddWithValue("@Name",location);
        cmd.CommandType = System.Data.CommandType.Text;
        conn.Open();
        count = (int)cmd.ExecuteScalar();
        conn.Close();
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T07:03:04.587

像这样使用它可以帮助你....

```
int count = 0;
        using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnection"].ConnectionString))
        {
            SqlCommand cmd = new SqlCommand("select count(*) from Locations where name=@Name", conn);

                SqlParameter paramName = new SqlParameter("@Name", SqlDbType.VarChar, 255) { Value = "Avinash" };
                command.Parameters.Add(paramName);

            conn.Open();
            count = (int)cmd.ExecuteScalar();
            conn.Close();
        } 
```

# php - 如何仅更新 Yii 中活动记录的特定字段？

> ID：10275542
> 
> 赞同：10
> 
> 时间：2012-04-23T06:01:05.690
> 
> 标签：php, activerecord, yii, model, sql-update

我有一个模型（ActiveRecord），它有***5 个属性***（数据库列）。
我获取特定记录并填充具有***3 个字段***的表单（不应更新另外两个字段）。
然后我更改特定字段并按保存。

如何更新记录，而不是触及不在表格中的字段？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-26T11:20:34.897

[mazzucci](https://stackoverflow.com/users/1199264/mazzucci)指出的方法比必要的更复杂。尝试这个：

```
YourTable::model()->updateByPk($id, array(
    'field1' => NewVal1,
    'field2' => NewVal2,
    'field3' => NewVal3
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T06:12:38.000

您可以在控制器中创建一个方法，如下所示：

```
public function actionUpdate($id) {
        $model = $this->loadModel($id, 'User');

        if (isset($_POST['User'])) {
            $model->setAttributes($_POST['User']);

            if ($model->save()) {
                $this->redirect(array('view', 'id' => $model->id_user));
            }
        }

        $this->render('update', array(
            'model' => $model,
        ));
} 
```

总而言之，该操作执行以下操作：

*   从数据库加载模型（从数据库中设置所有值）
*   分配表单中的值（这将仅覆盖表单中发送的属性）
*   模型保存在数据库中

因此，您不需要在表单中包含所有模型属性。表格中定义的，将在模型中更改。所有其他字段都不会更改，因为模型是在设置表单更改之前从数据库加载的。

# yii - 绝对搜索 zii.widgets.grid.CGridView

> ID：10275544
> 
> 赞同：0
> 
> 时间：2012-04-23T06:01:11.347
> 
> 标签：yii

我是 YII 和 zii.widgets.grid.CGridView 的新手。我在一个旧项目中几乎没有修改要做。

$model->search() 在数据网格视图中激活搜索，但进行部分搜索。

如何将其更改为绝对搜索？

谢谢抗体

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:19:02.977

在模型中的搜索功能中，您可能有如下行：

```
$criteria->compare('attributename',$this->attributename,true); 
```

将第三个参数更改为`false`，您将不会得到部分匹配：

```
$criteria->compare('attributename',$this->attributename,false); 
```

检查[CDbCriteria 比较功能](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail")。

**编辑：**以搜索开始/开始（即关键字％），您可以再次稍微修改比较功能：

```
$criteria->compare('attributename',$this->attributename.'%',false,'AND',false);
// that translates to keyword%, we need the fifth parameter to be false, otherwise % is escaped 
```

# php - 是否包含以及是否会减慢 PHP 的速度？

> ID：10275549
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:01:27.143
> 
> 标签：php, performance

我正在为评估编写一些代码，并尝试将我的页面保存在我包含在页面中以创建最终版本的各种模块中（如页眉、页脚等）。我有一些表单可以返回到同一页面，如果设置了一些会话变量，我有一些 ifs 要捕获。比如说，加载一个非常简单的页面需要 5-10 秒，这会减慢页面速度吗？

由于学生同时上传文件、测试等，他们是否可以为系里的 PHP 解释器做一些事情来减轻一些负担？

谢谢

编辑 1\. 嗯。我只是通过注释掉不同的东西来调试代码，我才意识到缓慢的部分是教授提供的 PHP 函数，所以还不错......谢谢你的时间......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T06:06:45.203

绝对不可能有几个`include`语句`if`需要 5-10 秒才能运行，除非您的服务器来自石器时代或被*大量*请求淹没。尝试通过检查不同位代码执行多长时间将问题缩小到特定代码位：获取给定代码块之前和之后的时间戳，并比较它们以查看执行时间块拿了。还要与您的系统管理员核实该服务器是否存在任何已知问题。如果您正在写入或读取数据库，问题也可能在于您的 MySQL 服务器无法足够快地处理您的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T06:19:08.610

## 一些测试...：

文件`echo.php`包含：

```
<?php
echo "X";
?> 
```

测试性能`echo`对比`include + echo`

```
1000 times `echo "X";`:             0.00019 secs.
1000 times `include "echo.php"`:    0.03694 secs. 
```

但是包含 1000 次的空`echo.php`文件需要 0.05113 秒...

## 那么如果：

```
1000000 times `if ($x = rand() && rand()) ;`:   0.72409 secs.
1000000 times `$x = rand() && rand();`: 0.76150 secs. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:07:00.383

不，并不是说它会使页面减慢几微秒。

实际上，在每种语言中，if-elses 都会减慢该过程。但是，如果您的代码没有它们就无法工作，为什么要这样想。

随心所欲地使用它们。这是每种编程语言的本质。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T06:07:07.580

如果您注意到一个相当简单的项目的性能下降，我会感到惊讶。

您可以测试您所做的是否存在问题的一种方法可能是创建一个没有这些标题的简单页面并查看加载需要多长时间，然后将其与您的项目进行比较。另一个可能是尝试在家中或远离学校/大学的地方加载您的项目。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-23T06:07:40.333

它不应该引起注意。但它必须做更多的工作，所以它应该更慢。但是 5-10 秒有点多。我在考虑最大 1-2 区域。

# c - 使用自动工具时如何禁用指定文件的指定警告？

> ID：10275554
> 
> 赞同：3
> 
> 时间：2012-04-23T06:02:10.240
> 
> 标签：c, makefile, antlr, autotools

我使用自动工具来管理我的 CPP 项目。编译我的代码时，gcc 具有以下标志：`-Wall -Werror`

因此，当我的代码中有警告时，gcc 会将其视为错误，编译将被中断。

我的项目还包括 antlr3，它会生成几个文件。生成的文件包含几个警告，这些警告会中断编译。

```
error: unused variable ‘index21_49’
in CongerCQLLexer.c, line 20589, column 24
20587>                 ANTLR3_UINT32 LA21_49;
20588> 
20589>                 ANTLR3_MARKER index21_49;
20590> 
20591> 

error: unused variable ‘index21_131’
in CongerCQLLexer.c, line 20622, column 24
20620>                 ANTLR3_UINT32 LA21_131;
20621> 
20622>                 ANTLR3_MARKER index21_131;
20623> 
20624> 
```

我想知道如何禁用生成文件的警告？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:26:27.043

我认为在每个文件的基础上实现你想要的最好方法是让 GCC 编译指示禁用受影响文件中的警告。有关详细信息，请参阅关于 SO 的此问题/答案：

[https://stackoverflow.com/a/3394305/379897](https://stackoverflow.com/a/3394305/379897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:34:27.407

答案很大程度上取决于您如何`-Wall -Werror`进入构建。如果您`CFLAGS`直接在 configure.ac 中分配，解决方案是停止这样做。 `CFLAGS`是用户变量，只能由用户分配。如果您将它们设置在 中`AM_CFLAGS`，则可以改为仅通过将它们添加到特定文件中`foo_CFLAGS`。然而，`-Wall -Werror`由于几个原因，使用 CFLAGS 是一个坏主意，其中一个原因是并非所有编译器都接受这些标志。您是否希望构建因“-Werror -- 未知选项”而死？尽管许多（大多数？）编译器都接受`-Wall -Werror`，但关键是您不知道您的用户正在使用什么编译器，您不知道是否`-Werror`有用甚至被接受，您不知道用户是否想要设置这些标志。让用户决定。

Automake 在配置时为特定翻译单元定义标志方面没有提供太多粒度，但是添加一个用户可以分配的变量将用于所有非构建源，另一个用于构建源将是相当简单的. 用户可以分配 BUILT_CFLAGS，而不是分配 CFLAGS，您可以将它们添加到 foo_CFLAGS 以获得适当的 foo 值。通常对此的解决方案是什么都不做，让用户进行必要的调整（即，用户将在 CFLAGS 中使用 -Werror 进行构建，看到构建失败，然后在没有 -Werror 的情况下进行重建。）

# r - 修改 R ggplot2 图例中线条的颜色？

> ID：10275556
> 
> 赞同：0
> 
> 时间：2012-04-23T06:02:15.107
> 
> 标签：r, ggplot2

我正在绘制等高线图，我使用等高线的大小和颜色来描绘相关信息。这是基于 stat_contour 文档的等效最小示例：

```
require(ggplot2)

volcano3d <- melt(volcano) 
names(volcano3d) <- c("x", "y", "z") 
v <- ggplot(volcano3d, aes(x, y, z = z)) 
TransBinary = Trans$new("TransBinary",f=function(x){ifelse(x>124,1,0)})
# under 2.15: TransBinary = trans_new("TransBinary",transform=function(x){ifelse(x>0,1,0)},inverse=FALSE)

v + 
  stat_contour(aes(colour=..level..,size=..level..)) + 
  scale_colour_gradient(high="black",low="grey",trans=TransBinary,legend=FALSE) + 
  scale_size("size") 
```

这正是我正在寻找的东西：一个等高线图，其中较高的 z 值显示为较大的线，并且在 z 的某个值（这里是中位数）处有一个阈值，低于该阈值的线条为灰色，高于该阈值它们是黑色的。

唯一的皱纹是生成的图例显示了线条大小，但图例中的所有线条都是黑色的（不足为奇）。

有没有办法让 ggplot 在图例中也将线条绘制为灰色/黑色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:28:44.080

您可以使用仲裁调色板，因此您需要的是：

```
th <- rescale(c(124, volcano3d$z))[1]
sc <- continuous_scale("colour", "", palette = function(x) {ifelse(x > th, "black", "grey")})

v + 
 stat_contour(aes(colour=..level..,size=..level..)) + 
 sc+
 scale_size("size") + labs(colour = "size") 
```

![在此处输入图像描述](../Images/4fe34d54d8d1a07829f1804dc1de533f.png)

请注意，这可能仅适用于 ggplot2 0.9。

# css - Chrome CSS 位置：固定

> ID：10275557
> 
> 赞同：1
> 
> 时间：2012-04-23T06:02:17.963
> 
> 标签：css, google-chrome, css-position

我正在为这个脱发！我有一个在 Firefox 中正确显示（即 FIXED）的全屏背景图像，但在 Chrome 中它只有在没有滚动条的情况下才能正确显示？！页面越长，背景图像显示越大，在一个非常长的页面上，背景图像很大......我已经搜索过这个主题并找到了绝对具体的修复，但没有与我的情况直接相关的内容，如何我可以让 Chrome 正常运行吗？

编码：

```
<div id="background">
<img src="../images/37df8ead08594126a7be43e1bdf3cd00.jpg" alt="blah" class="main-bg" />
</div>

#background {
position: fixed;
overflow: hidden;
left: 0px;
top: 0px;
z-index: -1;
}

.main-bg{
position:absolute;
top:0;
left:0;
z-index:1;
width:100%;
} 
```

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:11:47.107

我不完全确定是否是这种情况，但是您是否希望背景图像保持静止（当您向下或向上滚动时，图像似乎随着您的滚动而“移动”，从不拉伸或重复）？

如果是这种情况，`background-attachment:fixed`请尝试查看此 [链接](http://www.w3schools.com/cssref/pr_background-attachment.asp)。

如果不是这种情况，您到底想用背景图像实现什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:13:31.937

这可以帮助您修复 Chrome

例如：Chrome 修复。

```
 @media screen and (-webkit-min-device-pixel-ratio:0){
              .CR_page_TD p { line-height:24px}//sample class
              .cr_Rightimgdiv {float:left}//sample class
               background-attachment:fixed//not tested yet 

} 
```

在此更改您要专门为 chrome 编写的类不要担心它不会影响其他浏览器，您可以在此块中添加任意数量的类，特定于 Webkit 浏览器

# authentication - 从 android 的 AccountManager 获取 gtalk XMPP 身份验证令牌

> ID：10275559
> 
> 赞同：3
> 
> 时间：2012-04-23T06:02:38.440
> 
> 标签：authentication, xmpp, google-talk

我设置了一个 SASL 机制来响应 X-GOOGLE-TOKEN。

我还有我想在设备上使用的 AccountManager 和 Account。

现在我像这样调用 getAuthToken 方法来获取令牌：

```
accountManager.getAuthToken(account, "talk", null, this,
            new AccountManagerCallback<Bundle>() {...}); 
```

它会提示我允许该应用访问 Google Talk。

然后我像这样把它寄回去：

```
"<auth mechanism="X-GOOGLE-TOKEN">" + "\0" + user@gmail.com + "\0" + token + "</auth>" 
```

但是，谷歌随后以身份验证失败响应......所以我必须错误地请求令牌......或者我得到的令牌可能是用于 OAUTH？

如果是用于 OAUTH，是否有为此预先编写的 SASLMechanism？如果是这样，我在哪里可以获得一个谷歌 API 密钥来使用 android 提供给我的令牌，还是我需要一个？

# objective-c - 如何解决仍然为零的委托

> ID：10275562
> 
> 赞同：0
> 
> 时间：2012-04-23T06:02:47.037
> 
> 标签：objective-c, ios, uiviewcontroller, delegates

我关心我的 4 个视图控制器。第一个是 CardWalletViewController，它是一个表格视图，由用户创建的卡片对象填充（卡片创建是可以的，所以我不会发布有关的代码）。现在，鉴于这个表格视图已经填充了卡片对象，一旦用户点击一个单元格，另一个名为 CardDetailsViewController 的视图控制器就会出现。这将显示卡的当前积分以及特权。请注意，当前点通过 UILabel 显示，并且特权是表格视图的单元格。此表视图的单元格值（特权）是静态类型的，来自 NSDictionary，然后存储在 NSArray 中（用于单元格的文本显示目的）。现在，当我点击一个福利时，PerksDetailsViewController 会出现。这包含显示 perk 名称和所需点数的 UILabels。这些 UILabels 值来自以前的 ViewController。此外，PerksDetailsVC 有一个名为兑换的按钮。单击该按钮后，我将进入另一个视图控制器 BarCodeViewController，它负责计算。

现在我关心的是如何通过选定的卡片，以及与选定的特权相对应的点数。我已经使用委托来执行此操作，但似乎我的委托对象没有被设置。

以下是我当前的代码。

CardWalletViewController.h

```
#import <UIKit/UIKit.h>
#import "Card.h"

@class CardWalletViewController;

@protocol CardWalletDelegate <NSObject>

-(void)cardWalletViewController: (CardWalletViewController *)sender
                withCurrentCard: (Card *) currentCard;

@end

@interface CardWalletViewController : UITableViewController 

@property (nonatomic, strong) NSMutableArray *myWallet;

@property (nonatomic, weak) id <CardWalletDelegate> delegate;

@end 
```

CardWalletViewController.m

```
#import "CardWalletViewController.h"
#import "AddCardViewController.h"
#import "Card.h"
#import "CardDetailsViewController.h"

@interface CardWalletViewController ()

@end

@implementation CardWalletViewController

@synthesize delegate = _delegate;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }
    Card *cardDummy = [self.myWallet objectAtIndex:indexPath.row]; //myWallet is an Array where the table cell's values come from
    cell.textLabel.text = cardDummy.name;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%@", cardDummy.points]; 

    return cell;
}

- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //this method is responsible for showing the details of a selected card

    CardDetailsViewController *details = [self.storyboard instantiateViewControllerWithIdentifier:@"cardDetails"];

    Card *selectedCard = [self.myWallet objectAtIndex:indexPath.row]; // I want this selected card to be accessible until the user clicks another card or during end of program.

    details.myPoints = [NSString stringWithFormat:@"%@", selectedCard.points];

    [self.navigationController pushViewController:details animated:YES];

    [self.delegate cardWalletViewController:self withCurrentCard:selectedCard];

    //checking purposes
    if (!self.delegate) {
        NSLog(@"delegate is nil");
    }
} 
```

CardDetailsViewController.m

```
#import "CardDetailsViewController.h"
#import "PerksDetailsViewController.h"
#import "Card.h"

@interface CardDetailsViewController ()

@end

@implementation CardDetailsViewController

@synthesize pointsLabel = _pointsLabel;
@synthesize myPoints  = _myPoints;

@synthesize perks = _perks;
@synthesize datasource = _datasource;
@synthesize datasourcePoints = _datasourcePoints;

-(void)setupArray
{
    self.perks = [[NSMutableDictionary alloc] init];
    [self.perks setObject:@"200" forKey:@"10% Discount"];
    [self.perks setObject:@"100" forKey:@"250Php Off"];

    self.datasource = [self.perks allKeys]; //contains perk's description
    self.datasourcePoints = [self.perks allValues]; //contains perk's required points
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return 2;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

 cell.textLabel.text = [self.datasource objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [self.datasourcePoints objectAtIndex:indexPath.row];

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PerksDetailsViewController *perksDetails = [self.storyboard instantiateViewControllerWithIdentifier:@"detailsOfMyPerks"];

    [self.navigationController pushViewController:perksDetails animated:YES];

    perksDetails.perkDetailsLabel.text = [self.datasource objectAtIndex:indexPath.row];
    perksDetails.pointsLabel.text = [self.perks objectForKey:perksDetails.perkDetailsLabel.text];
}

- (void)viewDidLoad
{

    //show the number of points of the selected Card
    self.pointsLabel.text = self.myPoints;

    [self setupArray];

    [super viewDidLoad];
} 
```

PerksDetailsViewController.m

```
#import "PerksDetailsViewController.h"
#import "Card.h"
#import "CardWalletViewController.h"
#import "BarcodeViewController.h"

@interface PerksDetailsViewController ()

@end

@implementation PerksDetailsViewController

@synthesize pointsLabel = _pointsLabel;
@synthesize perkDetailsLabel = _perkDetailsLabel;
@synthesize perkDetailText = _perkDetailText;
@synthesize pointsText = _pointsText;
@synthesize delegate = _delegate;
@synthesize pointsRequired = _pointsRequired;

- (IBAction)redeemPressed:(id)sender {
    // get required points of a perk selected
    // cast the NSString value to an NSInteger

     NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
     [f setNumberStyle:NSNumberFormatterDecimalStyle];

     self.pointsRequired = [f numberFromString: (self.pointsLabel.text)];

    NSLog(@"points required by the perk %@", self.pointsRequired);

    [self.delegate perksDetailsViewController:self didPassRequiredPoints:self.pointsRequired];

    if (!self.delegate){
        NSLog(@"delegate is nil");
    }
} 
```

PerksDetailsViewController.h

```
#import <UIKit/UIKit.h>
#import "BarcodeViewController.h"

@class PerksDetailsViewController;

@protocol PerksDetailsDelegate <NSObject>

- (void)perksDetailsViewController:(PerksDetailsViewController *)sender
             didPassRequiredPoints: (NSNumber *) requiredPoints;

@end

@interface PerksDetailsViewController : UIViewController
{
    NSString *perkDetailText;
    NSString *pointsText;
    IBOutlet UILabel *perkDetailsLabel;
    IBOutlet UILabel *pointsLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *perkDetailsLabel, *pointsLabel;
@property (nonatomic, retain) NSString *perkDetailText, *pointsText;
@property (nonatomic, weak) NSNumber *pointsRequired;

@property (nonatomic, weak) id <PerksDetailsDelegate> delegate;

@end 
```

现在这个 ViewController 是实现两个委托方法的那个

条码视图控制器.h

```
#import <UIKit/UIKit.h>

@interface BarcodeViewController : UIViewController 

@property (nonatomic, strong) NSNumber *myPoints;

@end 
```

条码视图控制器.m

```
 #import "BarcodeViewController.h"
    #import "CardWalletViewController.h"
    #import "Card.h"
    #import "PerksDetailsViewController.h"

    @interface BarcodeViewController () <CardWalletDelegate, PerksDetailsDelegate>

    @end

    @implementation BarcodeViewController

    @synthesize myPoints = _myPoints;
    - (void)perksDetailsViewController:(PerksDetailsViewController *)sender didPassRequiredPoints:(NSNumber *)requiredPoints 
    {
        self.myPoints = requiredPoints;
    }

    - (void)cardWalletViewController:(CardWalletViewController *)sender withCurrentCard:(Card *)currentCard 
    {
        Card *myCurrentCard = currentCard;
        [myCurrentCard.pointsToDeduct addObject:self.myPoints];

        NSLog(@"contents :%@", [myCurrentCard.pointsToDeduct description]);
    }

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:40:48.943

首先，你的委托对象属性声明

```
@property (nonatomic, strong) id <PerksDetailsDelegate> delegate; 
```

应该从`strong`to更改`weak`，因为您的班级不拥有它。

其次，您永远不会为您的班级设置委托对象。这就是它的原因`nil`。我的猜测是`BarCodeViewController`（您的`PerksDetailsDelegate`协议实现类）应该是 的实例变量，而`CardDetailsViewController`您错过了将其设置为.`perksDetails``didSelectRowAtIndexPath`

编辑。

您应该`BarCodeViewController`在`CardDetailsViewController`类中有一个实例（名为`bcvController`，对于下面的示例代码）：

`CardDetailsViewController.m`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PerksDetailsViewController *perksDetails = [self.storyboard instantiateViewControllerWithIdentifier:@"detailsOfMyPerks"];
    [perksDetails setDelegate:bcvController]; // bcvController should be created before this line
    [self.navigationController pushViewController:perksDetails animated:YES];

    perksDetails.perkDetailsLabel.text = [self.datasource objectAtIndex:indexPath.row];
    perksDetails.pointsLabel.text = [self.perks objectForKey:perksDetails.perkDetailsLabel.text];
} 
```

# 编辑 2

条码视图控制器.h

```
#import <UIKit/UIKit.h>
#import "CardWalletViewController.h"
#import "Card.h"
#import "PerksDetailsViewController.h"

@interface BarcodeViewController : UIViewController <CardWalletDelegate, PerksDetailsDelegate>

@property (nonatomic, strong) NSNumber *myPoints;

@end 
```

条码视图控制器.m

```
#import "BarcodeViewController.h"

//    @interface BarcodeViewController () 
//
//    @end

@implementation BarcodeViewController

@synthesize myPoints = _myPoints;
- (void)perksDetailsViewController:(PerksDetailsViewController *)sender didPassRequiredPoints:(NSNumber *)requiredPoints 
{
    self.myPoints = requiredPoints;
}

- (void)cardWalletViewController:(CardWalletViewController *)sender withCurrentCard:(Card *)currentCard 
{
    Card *myCurrentCard = currentCard;
    [myCurrentCard.pointsToDeduct addObject:self.myPoints];

    NSLog(@"contents :%@", [myCurrentCard.pointsToDeduct description]);
}

@end 
```

# 编辑 3

如果你想显示一个 BarcodeViewController，你应该使用这个对象的 bcvController。

CardDetailsViewController.m

```
#import "CardDetailsViewController.h"
#import "PerksDetailsViewController.h"
#import "Card.h"

@implementation CardDetailsViewController

@synthesize pointsLabel = _pointsLabel;
@synthesize myPoints  = _myPoints;

@synthesize perks = _perks;
@synthesize datasource = _datasource;
@synthesize datasourcePoints = _datasourcePoints;
@synthesize bcvController = _bcvController; // new instance variable

// other functions removed for clarity

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PerksDetailsViewController *perksDetails = [self.storyboard instantiateViewControllerWithIdentifier:@"detailsOfMyPerks"];
    [perksDetails setDelegate:bcvController];
    [self.navigationController pushViewController:perksDetails animated:YES];

    perksDetails.perkDetailsLabel.text = [self.datasource objectAtIndex:indexPath.row];
    perksDetails.pointsLabel.text = [self.perks objectForKey:perksDetails.perkDetailsLabel.text];
}

- (void)viewDidLoad
{

    //show the number of points of the selected Card
    self.pointsLabel.text = self.myPoints;

    [self setupArray];

    [self setBcvController:[self.storyboard instantiateViewControllerWithIdentifier:@"myBarcodeVC"]]; // use setter to retain object properly

    [super viewDidLoad];
} 
```

# actionscript-3 - 列表组件的 Flex 4.6 移动自定义 IconItemRenderer

> ID：10275566
> 
> 赞同：0
> 
> 时间：2012-04-23T06:02:49.923
> 
> 标签：actionscript-3, apache-flex, mobile, flex4.6

我想为 List 创建一个自定义 IconItemRenderer，它看起来与此类似

```
 ---------------------------------------------
  1-179503881                         3/13/2012

  I am interested in downloading and testing 
  your tool for your project
  ---------------------------------------------- 
```

我基本上在寻找的是，在右上角显示一些文字。但是，默认的 IconItemRenderer 不支持在右上角或右下角显示任何标签，这在移动应用中最常见。有谁知道如何修改/创建 IconItemRenderer 来完成此操作。

如果有人可以提供一些示例代码，那将是一个很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T00:18:01.463

查看 Flextras 博客[Building a Mobile ItemRenderer in Flex](https://www.flextras.com/blog/index.cfm/2011/6/24/Building-a-Mobile-ItemRenderer-in-Flex)

# openoffice.org - 便携式开放式办公室可以在我的机器上不安装开放式办公室的情况下执行此文件转换实用程序吗

> ID：10275569
> 
> 赞同：2
> 
> 时间：2012-04-23T06:03:03.833
> 
> 标签：openoffice.org

我想使用 open office 的实用程序将文件从 doc、xls 转换为 pdf。但是，如果我不想安装开放式办公室，并且仍然想在便携式开放式办公室的帮助下使用该实用程序，那么这可以做到吗？怎么做？

问候， Ankit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:01:34.617

当然。您可以使用 OpenOffice.org 的便携式版本打开 doc 或 xls 文件，然后使用“文件 > 导出为 PDF”来获取您的 PDF。

您可能还想尝试将文件上传到 Google Docs 之类的东西，它也可以让您另存为 PDF，或者如果您当前有 Microsoft Office 并且只想将文件另存为 PDF，您可以安装众多 PDF 之一打印机，例如[PDFCreator](http://www.pdfforge.org/)。

# iphone - 如何在 UITableView 中重新加载数据

> ID：10275571
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:03:24.520
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用 UITableView 通过使用 web 服务来显示内容。我需要每分钟重新加载一次数据。任何人都可以帮我做到这一点...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:09:47.400

有两个问题：

1）如何重新加载`UITableView`单元格？

2）如何每60秒自动执行一次？

我的回答：

1）要手动重新加载数据，您应该在`UITableView`实例上有指针。您可以使用`@property`并将`IBOutlet`您的表与此属性连接起来。假设您命名它`tableView`。然后你可以打电话`[tableView reloadData];`重新加载表格的所有单元格和部分。

2）最简单的方法是创建`NSTimer`每60秒触发一次并调用特定方法。例如：

```
[NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(updateTable) userInfo:nil repeats:YES]; 
```

PS您也可以重新加载表格视图的特定单元格或部分。请在 Apple Docs 中搜索它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:40:31.113

```
[NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(TblUpdate) userInfo:nil repeats:YES];

-(void)TblUpdate
{

//Your Webservice

//table reload
    [tbl reloadData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:23:25.960

您需要在 View Controller 的 ViewdidLoad 方法中设置 1 分钟的 NSTimer

```
- (void)viewDidLoad
{
NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(reloadTable) userInfo:nil repeats:YES];
} 
```

// 重新加载表格方法

-

```
(void)reloadTable{
 [self.tableView reloadData];
[myTimer invalidate];

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T06:06:30.753

编写一个方法，其中包含从 Web 服务加载数据并调用的代码`[tableView reloadData]`。然后创建一个[计时器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)并让它每分钟调用一次该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T06:21:57.597

好吧，您每次都需要检查您的数据模型。仅以一定间隔重新加载具有相同数据的表视图并不是一个好主意。正确的 ？

```
timer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(updateData) userInfo:nil repeats:YES];

-(void)updateData {
  //do something with data model
  //and reload table then
  [self.tableView reloadData];
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T06:09:50.117

尝试：

```
 /*****TIMER*****/
timer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(updateTable) userInfo:nil repeats:YES];

/******************************************************************************/
-(void)updateTable{
   [self.tableView reloadData];

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T06:10:01.860

您可以使用 Halley 的答案，或者您可以将计时器调用 reloadData 到 tableview 本身。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:60 target:self.tableView selector:@selector(reloadData) userInfo:nil repeats:YES]; 
```

# spring - 从 spring xml 文件中创建 synchronizedList

> ID：10275573
> 
> 赞同：0
> 
> 时间：2012-04-23T06:03:48.463
> 
> 标签：spring, arraylist, synchronized

集合框架具有帮助创建同步列表的同步包装器。

```
List list = Collections.synchronizedList(new ArrayList()); 
```

我正在尝试从 spring xml 文件创建列表。以下适用于简单列表。

```
<bean id="listt" class="java.util.ArrayList"/> 
```

无论如何我可以直接从 xml 文件中创建一个同步列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:06:52.057

您可以构造 using`Collections.synchronizedList`作为[静态工厂方法](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-class-static-factory-method)：

```
<bean id="list" class="java.util.Collections" factory-method="synchronizedList">
  <constructor-arg><bean class="java.util.ArrayList"/></constructor-arg>
</bean> 
```

# function - 在 Python 中定义一个非类私有函数是否意味着什么？

> ID：10275576
> 
> 赞同：4
> 
> 时间：2012-04-23T06:04:15.300
> 
> 标签：function, python

```
def __f():
  print 1

def _f():
  print 1 
```

我尝试了 import 并且可以访问：

```
>>> import test1
>>> test1._f()
1 
```

这有什么意义吗？我想写一些不是基于类的辅助函数。然后我想隐藏某些低级的具体函数，只留下高级函数（将它们视为 API）供用户使用。

例如：

test1.copy() 将在同一个文件中调用另一个辅助函数，它会进行一些额外的检查，但我不想将它暴露给用户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T06:54:52.963

单个前导下划线是 Python 命名约定。许多工具依赖于该约定。例如*help()*将忽略单个下划线名称。使用`from somemodule import *`也将忽略单个下划线名称。

双前导下划线触发名称修改（在名称前加上类名和单个前导下划线）。它用于创建线程局部引用。这允许不会被子类意外中断的类内调用。[在http://docs.python.org/tutorial/classes.html#private-variables](http://docs.python.org/tutorial/classes.html#private-variables)的教程中有一个很好的例子。

最后，有两个前导下划线*和*两个尾随下划线的特殊方法命名约定。解释器使用这些名称来实现运算符并实现许多标准协议（即迭代器、上下文管理器、酸洗等）。请参阅[http://www.rafekettler.com/magicmethods.html](http://www.rafekettler.com/magicmethods.html)以获得有关特殊方法的精彩文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T06:08:26.870

领先的下划线约定就是这样 -礼貌的程序员尊重的**约定。**

前导下划线是对其他程序员的提示，它`_function()`是内部实现细节，不应在外部使用。没有什么能阻止他们打电话`_function()`- 但这样做他们会忽略你的暗示，即实施`_function()`可能随时改变。如果有什么东西坏了，他们可以保留这两部分。

Python 解释器不**强制执行**任何类型的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T06:07:42.737

嗯，这是一个相当成熟的命名惯例，这不是什么。此外，它会影响`from [module] import *`，它只导入不带下划线前缀的函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T06:10:28.677

如果我没记错的话，实际上没有一种干净的方法可以在 python 中将任何函数设为私有。该语言不打算以这种方式工作。下划线符号只是开发人员之间的一种通用协议，用于表示可能是私有的或隐藏的东西。

然而，可能有一种方法可以模拟私有功能。我脑海中浮现的第一件事是使用回溯模块，然后检查调用实例，看看它是否符合预期。这绝不是我在我的项目中会做的事情，我强烈建议不要这样做，但如果你绝对不能没有它，那可能是一种方法。

# jenkins - Jenkins 在参数上跳过 SCM

> ID：10275582
> 
> 赞同：2
> 
> 时间：2012-04-23T06:04:48.180
> 
> 标签：jenkins, jenkins-plugins

有没有人知道如何让工作跳过命令（参数）上的 SCM 步骤？我希望能够触发作业并使用现有视图（在我的情况下为 ClearCase，但可以是 SVN 工作副本）来运行构建。

这样做的动机是为了节省时间（我的 ClearCase 视图需要大约 20 分钟来准备），因为源没有变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:12:36.623

将您的工作分为两部分：*触发*工作和*工人*工作。*Worker*作业不处理 SCM，并通过参数获取代码树的根（代码不会存在于其工作区中）。 *Trigger*将轮询 SCM，更新本地视图，并通过[Parameterized Trigger Plugin调用](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)*Worker* ，为其提供代码根的位置。

# linked-list - 在单链表中查找循环

> ID：10275587
> 
> 赞同：66
> 
> 时间：2012-04-23T06:05:08.727
> 
> 标签：linked-list

如何检测单链表是否有循环？如果它有循环，那么如何找到循环的起点，即循环开始的节点。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-04-23T06:08:03.910

您可以通过简单地在列表中运行*两个*指针来检测它，这个过程在同名寓言之后被称为龟兔算法：

*   首先，检查列表是否为空（`head`is `null`）。如果是这样，则不存在循环，所以现在停止。
*   否则，在第一个节点上启动第一个指针`tortoise`，在第二个节点上启动第二`head`个指针。`hare``head.next`
*   然后连续循环直到`hare`is `null`（在单元素列表中可能已经是真的），在每次迭代中前进`tortoise`一和二。`hare`保证兔子首先到达终点（如果有*终点*），因为它开始领先并且跑得更快。
*   如果没有尽头（即，如果有一个循环），它们最终将指向同一个节点并且您可以停止，因为您知道您在循环中的*某个位置找到了一个节点。*

考虑以下从 开始的循环`3`：

```
head -> 1 -> 2 -> 3 -> 4 -> 5
                  ^         |
                  |         V
                  8 <- 7 <- 6 
```

从`tortoise`1 和`hare`2 开始，它们具有以下值：

```
(tortoise,hare) = (1,2) (2,4) (3,6) (4,8) (5,4) (6,6) 
```

因为它们在 处相等`(6,6)`，并且由于`hare`应该*始终*`tortoise`在非循环列表中超出，这意味着您已经发现了一个循环。

伪代码将如下所示：

```
def hasLoop (head):
  return false if head = null           # Empty list has no loop.

  tortoise = head                       # tortoise initially first element.
  hare = tortoise.next                  # Set hare to second element.

  while hare != null:                   # Go until hare reaches end.
    return false if hare.next = null    # Check enough left for hare move.
    hare = hare.next.next               # Move hare forward two.

    tortoise = tortoise.next            # Move tortoise forward one.

    return true if hare = tortoise      # Same means loop found.
  endwhile

  return false                          # Loop exit means no loop.
enddef 
```

该算法的时间复杂度是`O(n)`因为访问的节点数（龟兔赛跑）与节点数成正比。

* * *

*一旦你知道循环中*的一个节点，还有一种`O(n)`方法可以保证找到循环的*开始*。

在循环中的某处找到一个元素但不确定循环的开始在哪里之后，让我们返回到原始位置。

```
head -> 1 -> 2 -> 3 -> 4 -> 5
                  ^         |
                  |         V
                  8 <- 7 <- 6
                             \
                              x (where hare and tortoise met). 
```

这是要遵循的过程：

*   前进`hare`并设置`size`为`1`。
*   然后，只要`hare`和`tortoise`不同*，*就不断前进`hare`，`size`每次递增。这最终给出了循环的大小，在这种情况下为六。
*   此时，如果`size`is `1`，则意味着您必须*已经*处于循环的开始（在大小为 1 的循环中，只有一个可能的节点可以*在*循环中，因此它*必须*是第一个）。在这种情况下，您只需`hare`从头返回，然后跳过下面的其余步骤。
*   否则，将`hare`和都设置为列表`tortoise`的*第一个*元素并`hare`准确推进`size`时间（`7`在本例中为 ）。这给出了两个指针，它们*完全*不同的循环大小。
*   然后，只要`hare`和`tortoise`不同，就将它们一起推进（兔子以更平稳的速度奔跑，与乌龟的速度相同 - 我猜它从第一次跑步就累了）。由于它们将始终保持`size`彼此完全分开的元素，`tortoise`因此将与*返回*到循环开始的时间*完全相同地**到达*循环的开始。*`hare`*

 **您可以通过以下演练看到这一点：

```
size  tortoise  hare  comment
----  --------  ----  -------
   6         1     1  initial state
                   7  advance hare by six
             2     8  1/7 different, so advance both together
             3     3  2/8 different, so advance both together
                      3/3 same, so exit loop 
```

因此`3`是循环的起点，并且由于这两个操作（循环检测和循环开始发现）都是`O(n)`按顺序执行的，所以整个事情也都是`O(n)`。

* * *

如果您想要一个更正式的证明这有效，您可以检查以下资源：

*   我们姊妹网站上的一个[问题；](https://math.stackexchange.com/questions/913499/proof-of-floyd-cycle-chasing-tortoise-and-hare)
*   维基[百科循环检测](http://en.wikipedia.org/wiki/Cycle_detection)页面；或者
*   “龟兔赛跑算法”，Peter Gammie，2016 年 4 月 17 日。

如果您只是在支持该方法（不是正式证明）之后，您可以运行以下 Python 3 程序，该程序评估其对大量尺寸（循环中有多少元素）和引入（元素之前的元素）的可操作性循环开始）。

你会发现它总能找到两个指针相交的点：

```
def nextp(p, ld, sz):
    if p == ld + sz:
        return ld
    return p + 1

for size in range(1,1001):
    for lead in range(1001):
        p1 = 0
        p2 = 0
        while True:
            p1 = nextp(p1, lead, size)
            p2 = nextp(nextp(p2, lead, size), lead, size)
            if p1 == p2:
                print("sz = %d, ld = %d, found = %d" % (size, lead, p1))
                break 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-12T02:58:49.483

选择的答案给出了一个 O(n*n) 解决方案来找到循环的开始节点。这是一个 O(n) 的解决方案：

一旦我们发现慢 A 和快 B 在循环中相遇，使它们中的一个静止，而另一个每次继续走一步，以确定循环的周长，例如，P。

然后我们把一个节点放在头部，让它走P步，然后把另一个节点放在头部。我们将这两个节点每次都推进一步，当它们第一次相遇时，它就是循环的起点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-11T09:56:11.040

您也可以使用哈希映射来查找链接列表是否有循环下面的函数使用哈希映射来找出链接列表是否有循环

```
 static bool isListHaveALoopUsingHashMap(Link *headLink) {

        map<Link*, int> tempMap;
        Link * temp;
        temp = headLink;
        while (temp->next != NULL) {
            if (tempMap.find(temp) == tempMap.end()) {
                tempMap[temp] = 1;
            } else {
                return 0;
            }
            temp = temp->next;
        }
        return 1;
    } 
```

两个指针方法是最好的方法，因为时间复杂度是 O(n) Hash Map 需要额外的 O(n) 空间复杂度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-19T10:04:15.757

我在 Narasimha Karamanchi 的数据结构书中读到了这个答案。

我们可以使用**Floyd 循环寻找算法**，也称为**龟兔算法**。在这里，使用了两个指针；一个（比如`slowPtr`）由单个节点推进，另一个（比如`fastPtr`）由两个节点推进。如果单链表中存在任何循环，它们肯定会在某个时候相遇。

```
struct Node{
int data;
struct Node *next;

}

 // program to find the begin of the loop

 int detectLoopandFindBegin(struct Node *head){
      struct Node *slowPtr = head, *fastPtr = head;
      int loopExists = 0;
      // this  while loop will find if  there exists a loop or not.
      while(slowPtr && fastPtr && fastPtr->next){                                                  
        slowPtr = slowPtr->next;                      
        fastPtr = fastPtr->next->next;
        if(slowPtr == fastPtr)
        loopExists = 1;
        break;
      } 
```

如果存在任何循环，那么我们将其中一个指针指向头部，现在将它们都推进一个节点。他们将相遇的节点将是单链表中循环的*开始节点。*

```
 if(loopExists){      
             slowPtr = head;
             while(slowPtr != fastPtr){
               fastPtr = fastPtr->next;
               slowPtr = slowPtr->next;
             }
             return slowPtr;
          }
         return NULL;
        } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-13T04:40:42.860

在大多数情况下，所有先前的答案都是正确的，但这里是带有可视化和代码的逻辑的简化版本（适用于 Python 3.7）

正如其他人解释的那样，逻辑非常简单。我要创建乌龟/慢和野兔/快。如果我们以不同的速度移动两个指针，那么最终快会遇到慢！！您也可以将其视为大头针圆形场地中的两个跑步者。如果快跑者继续绕圈，那么它将遇到/超过慢跑者。

因此，我们将在每次迭代中以 1 的速度移动 Tortoise/slow 指针，同时以 2 的速度继续递增或移动 Hare/fast 指针。一旦它们相遇，我们就知道存在一个循环。这也被称为[弗洛伊德的循环寻找算法](https://en.wikipedia.org/wiki/Cycle_detection) [![在此处输入图像描述](../Images/8eb79f8c731ad3f519d6e324dfab43d6.png)](https://i.stack.imgur.com/ZSUxN.png)

这是执行此操作的 Python 代码（注意 has_cycle 方法是主要部分）：

```
#!/usr/bin/env python3
class Node:
    def __init__(self, data = None):
        self.data = data
        self.next = None
    def strnode (self):
        print(self.data)

class LinkedList:
    def __init__(self):
        self.numnodes = 0
        self.head = None

    def insertLast(self, data):
        newnode = Node(data)
        newnode.next = None
        if self.head == None:
            self.head = newnode
            return

        lnode = self.head
        while lnode.next != None :
            lnode = lnode.next
        lnode.next = newnode # new node is now the last node
        self.numnodes += 1

    def has_cycle(self):    
        slow, fast = self.head ,self.head  
        while fast != None:       
            if fast.next != None:
                 fast = fast.next.next
            else:
                 return False
            slow = slow.next  
            if slow == fast:
                print("--slow",slow.data, "fast",fast.data) 
                return True    
        return False

linkedList = LinkedList()
linkedList.insertLast("1")
linkedList.insertLast("2")
linkedList.insertLast("3")

# Create a loop for testing 
linkedList.head.next.next.next = linkedList.head; 
#let's check and see !
print(linkedList.has_cycle()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-16T16:26:24.367

以下代码将查找 SLL 中是否存在循环，如果存在，将返回然后开始节点。

```
int find_loop(Node *head){

    Node * slow = head;
    Node * fast =  head;
    Node * ptr1;
    Node * ptr2;
    int k =1, loop_found =0, i;

    if(!head) return -1;

    while(slow && fast && fast->next){
            slow = slow->next;
        /*Moving fast pointer two steps at a time */
            fast = fast->next->next;
            if(slow == fast){
                    loop_found = 1;
                    break;
            }

    }

    if(loop_found){
    /* We have detected a loop */
    /*Let's count the number of nodes in this loop node */

            ptr1  = fast;
            while(ptr1 && ptr1->next != slow){
                    ptr1 = ptr1->next;
                    k++;
            }
    /* Now move the other pointer by K nodes */
            ptr2 = head;

            ptr1  = head;
            for(i=0; i<k; i++){
                    ptr2 = ptr2->next;
            }

    /* Now if we move ptr1 and ptr2 with same speed they will meet at start of loop */

            while(ptr1 != ptr2){
                    ptr1  = ptr1->next;
                    ptr2 =  ptr2->next;
            }

    return ptr1->data;

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-04T09:39:12.047

```
boolean hasLoop(Node *head)
    {
      Node *current = head;
      Node *check = null;
      int firstPtr = 0;
      int secondPtr = 2;
      do {
        if (check == current) return true;
        if (firstPtr >= secondPtr){
            check = current;
            firstPtr = 0;
            secondPtr= 2*secondPtr;
        }
        firstPtr ++;
      } while (current = current->next());
      return false;
    } 
```

另一个 O(n) 解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-23T11:35:40.267

在查看所选答案时，我尝试了几个示例并发现：
如果 (A1,B1), (A2,B2) ... (AN, BN) 是指针 A 和 B 的遍历，
其中 A 步骤 1 元素B步2个元素，Ai和Bj为A和B遍历的节点，AN=BN。
然后，循环开始的节点是 Ak，其中 k = floor(N/2)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-19T14:22:32.130

好的 - 我昨天在一次采访中遇到了这个问题 - 没有可用的参考资料，我想出了一个非常不同的答案（当然是在开车回家的时候......）因为链接列表通常是使用 malloc 逻辑分配的（我并不总是承认）那么我们知道分配的粒度是已知的。在大多数系统上，这是 8 个字节 - 这意味着底部 3 位始终为零。考虑 - 如果我们将链表放在一个类中以控制访问并使用 0x0E 的掩码 ored 到下一个地址，那么我们可以使用低 3 位来存储中断面包屑因此我们可以编写一个方法来存储我们的最后一个面包屑- 说 1 或 2 - 并交替使用它们。然后，我们检查循环的方法可以逐步遍历每个节点（使用我们的下一个方法）并检查下一个地址是否包含当前的面包屑 - 如果有，我们有一个循环 - 如果没有，那么我们将屏蔽低 3 位并添加我们当前的面包屑。面包屑检查算法必须是单线程的，因为您不能一次运行其中两个，但它会允许其他线程异步访问列表 - 关于添加/删除节点的常见警告。你怎么看？如果其他人认为这是一个有效的解决方案，我可以编写示例类......只是想想有时一种新的方法是好的，并且总是愿意被告知我刚刚错过了重点......谢谢所有标记 面包屑检查算法必须是单线程的，因为您不能一次运行其中两个，但它会允许其他线程异步访问列表 - 关于添加/删除节点的常见警告。你怎么看？如果其他人认为这是一个有效的解决方案，我可以编写示例类......只是想想有时一种新的方法是好的，并且总是愿意被告知我刚刚错过了重点......谢谢所有标记 面包屑检查算法必须是单线程的，因为您不能一次运行其中两个，但它会允许其他线程异步访问列表 - 关于添加/删除节点的常见警告。你怎么看？如果其他人认为这是一个有效的解决方案，我可以编写示例类......只是想想有时一种新的方法是好的，并且总是愿意被告知我刚刚错过了重点......谢谢所有标记

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-28T07:05:35.507

另一种解决方案

检测循环：

1.  创建一个列表
2.  循环遍历链表并继续将节点添加到列表中。
3.  如果节点已经存在于列表中，我们有一个循环。

去除循环：

1.  在上面的第 2 步中，while 循环遍历链表，我们还跟踪前一个节点。
2.  一旦我们在步骤#3 中检测到循环，将前一个节点的下一个值设置为 NULL

    ＃代码

    def detect_remove_loop（头）

    ```
     cur_node = head
        node_list = []

        while cur_node.next is not None:
            prev_node = cur_node
            cur_node = cur_node.next
            if cur_node not in node_list:
                node_list.append(cur_node)
            else:
                print('Loop Detected')
                prev_node.next = None
                return

        print('No Loop detected') 
    ```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-23T06:33:22.737

首先，创建一个节点

```
struct Node { 
    int data; 
    struct Node* next; 
}; 
```

全局初始化头指针

```
Struct Node* head = NULL; 
```

在链表中插入一些数据

```
void insert(int newdata){

    Node* newNode = new Node();
    newNode->data = newdata;
    newNode->next = head;
    head = newNode;
} 
```

创建一个函数detectLoop()

```
void detectLoop(){
    if (head == NULL || head->next == NULL){
        cout<< "\nNo Lopp Found in Linked List";
    }
    else{
        Node* slow = head;
        Node* fast = head->next;
        while((fast && fast->next) && fast != NULL){
            if(fast == slow){
                cout<<"Loop Found";
                break;
            }
            fast = fast->next->next;
            slow = slow->next;
        }
        if(fast->next == NULL){
            cout<<"Not Found";
        }
    }
} 
```

从 main() 调用函数

```
int main() 
{ 
    insert(4);
    insert(3);
    insert(2);
    insert(1);

    //Created a Loop for Testing, Comment the next line to check the unloop linkedlist
    head->next->next->next->next = head->next;

    detectLoop();
    //If you uncomment the display function and make a loop in linked list and then run the code you will find infinite loop 
    //display();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-18T10:15:37.447

```
 bool FindLoop(struct node *head)
                {
                    struct node *current1,*current2;

                    current1=head;
                    current2=head;

                    while(current1!=NULL && current2!= NULL && current2->next!= NULL)
                    { 
                          current1=current1->next;
                          current2=current2->next->next;

                          if(current1==current2)
                          {
                                return true;
                          }
                    }

                    return false;
                } 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-02-06T05:10:47.200

一种完全不同的方法：- 反转链表。倒车时，如果您再次到达头部，则列表中有一个循环，如果您获得 NULL，则没有循环。总时间复杂度为 O(n)**

# codeigniter - 在代码点火器中实现注释的库

> ID：10275592
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:06:16.363
> 
> 标签：codeigniter, comments

是否有任何好的库来实现 Facebook 之类的评论和代码点火器的 +1 系统。我用谷歌搜索但无法找到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:26:59.997

CodeIgniter有一个[Facebook 帮助函数](http://www.thephpx.com/2010/06/20/codeigniter-facebook-social-plugin-like-button-helper/)。由于 Google +1 代码还包含 JavaScript，它可能需要两个辅助函数，以便您可以将它们放置在适当的区域。不过，使用与 Facebook 帮助函数相同的原理，您应该能够为 Google +1 创建自己的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-23T07:58:40.040

您可以使用[http://disqus.com](http://disqus.com)这是一个很好的评论工具

# vim - 打开多个拆分后，OSX Lion 中的 Vim 段错误

> ID：10275596
> 
> 赞同：2
> 
> 时间：2012-04-23T06:06:39.857
> 
> 标签：vim, osx-lion, segmentation-fault

OSX Lion 中的内置 vim 版本已损坏，有时还会出现段错误，这似乎是一个已知问题。对我来说，当我打开不同文件的垂直和水平拆分组合并尝试保存其中一个时，就会发生这种情况。

我在以下位置找到了说明

[http://www.jprabawa.com/2011/11/segmentation-fault-running-vim-on-os-x.html](http://www.jprabawa.com/2011/11/segmentation-fault-running-vim-on-os-x.html)

它提供了有关如何安装不同版本的 vim 以解决问题的说明，但是当我运行 configure 时，出现以下错误：

```
jeff~/Documents/vim73$ ./configure --enable-gui=no
configure: loading cache auto/config.cache
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/Users/jeffreyhodes/Documents/vim73/src':
configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

我找不到`config.log`文件。

在此期间我一直在使用 MacVim，但是拥有两个单独的应用程序来编辑和运行它们是一件很痛苦的事情。有没有人有任何智慧可以分享这个问题？

编辑：从 X-Code 4.3 安装命令行工具后，./configure 工作，但现在运行`make`给出以下错误：

```
In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:120,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:12,
                 from os_macosx.m:19:
/System/Library/Frameworks/Foundation.framework/Headers/NSTask.h:75: error: syntax error before '^' token
In file included from /System/Library/Frameworks/AppKit.framework/Headers/NSResponder.h:9,
                 from /System/Library/Frameworks/AppKit.framework/Headers/NSView.h:8,
                 from /System/Library/Frameworks/AppKit.framework/Headers/NSText.h:8,
                 from /System/Library/Frameworks/AppKit.framework/Headers/NSCell.h:10,
                 from /System/Library/Frameworks/AppKit.framework/Headers/NSActionCell.h:8,
                 from /System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:15,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:13,
                 from os_macosx.m:19:
/System/Library/Frameworks/AppKit.framework/Headers/NSEvent.h:403: error: syntax error before '^' token
/System/Library/Frameworks/AppKit.framework/Headers/NSEvent.h:403: error: 'type name' declared as function returning a function
In file included from /System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:17,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:13,
                 from os_macosx.m:19:
/System/Library/Frameworks/AppKit.framework/Headers/NSAnimationContext.h:20: error: syntax error before '^' token
/System/Library/Frameworks/AppKit.framework/Headers/NSAnimationContext.h:20: error: 'type name' declared as function returning a function
/System/Library/Frameworks/AppKit.framework/Headers/NSAnimationContext.h:20: error: syntax error before '^' token
/System/Library/Frameworks/AppKit.framework/Headers/NSAnimationContext.h:20: error: 'type name' declared as function returning a function
In file included from /System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:54,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:13,
                 from os_macosx.m:19:
/System/Library/Frameworks/AppKit.framework/Headers/NSDraggingItem.h:52: error: syntax error before '^' token
In file included from /System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:73,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:13,
                 from os_macosx.m:19:
/System/Library/Frameworks/AppKit.framework/Headers/NSSpellChecker.h:168: error: syntax error before '^' token
/System/Library/Frameworks/AppKit.framework/Headers/NSSpellChecker.h:168: error: 'type name' declared as function returning a function
In file included from /System/Library/Frameworks/AppKit.framework/Headers/AppKit.h:194,
                 from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:13,
                 from os_macosx.m:19:
/System/Library/Frameworks/AppKit.framework/Headers/NSWindowRestoration.h:119: error: syntax error before '^' token
/System/Library/Frameworks/AppKit.framework/Headers/NSWindowRestoration.h:119: error: 'type name' declared as function returning a function
make[1]: *** [objects/os_macosx.o] Error 1
make: *** [first] Error 2 
```

我已经通过命令行运行 macvim 暂时修复了这个问题`mvim -v`，但是有人知道如何解决上述问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:59:25.770

rm ~/.viminfo

崩溃会消失

# windows-mobile - 在 windows mobile 上检查 GPRS 可用性

> ID：10275597
> 
> 赞同：0
> 
> 时间：2012-04-23T06:06:41.117
> 
> 标签：windows-mobile, windows-mobile-6

我想检查 windows mobile 中特定时间间隔之间的 GPRS 可用性。我尝试了使用计时器每 30 秒请求 google 一次的代码，但它会挂起系统，并且每 30 秒检查一次似乎很昂贵。还有其他方法可以完成吗？并且不要挂起我的系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:01:04.363

如果您的开发环境是 .NET，则可以使用 SystemState 类来监视以下 SystemProperties 的更改：

```
ConnectionsCellularCount
ConnectionsCellularDescriptions 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.systemstate.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.systemstate.aspx)。

# bash - 倒计时 bash 脚本没有在 while 循环中使用 clear

> ID：10275599
> 
> 赞同：3
> 
> 时间：2012-04-23T06:06:49.913
> 
> 标签：bash

使用 Google 参考倒计时时间 scipt，我正在尝试不同的输出。即显示剩余的秒数：20。每次倒计时达到 10 .. 它倒计时为 90、80、70、60、50、40、30、20、10。在 while 循环中使用 clear 给出了很多示例，但我不想在显示倒计时时间时清除脚本的其他输出。

我想知道我在哪里犯了错误。

```
function countdown () 
    { 
        if (($# != 1)) || [[ $1 = *[![:digit:]]* ]]; then
            echo "Usage: countdown seconds";
            return;
        fi;
        local t=$1 remaining=$1;
        SECONDS=0;
        while sleep .2; do
            printf '\rseconds remaining to proceed: '"$remaining";
            if (( (remaining=t-SECONDS) <=0 )); then
                printf '\rseconds remaining to proceed' 0;
                break;
            fi;
        done
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T06:15:09.340

问题是它实际上是在倒计时 9、8、7、6 等，但是你从来没有从 10 中擦除尾随的 0，所以它会留在屏幕上。轻松修复：

```
printf '\rseconds remaining to proceed: '"$remaining"' '; 
```

添加一个空格以从屏幕上敲击 0，一切都很好。

# javascript - javascript 转义字符串不会被 c# regex.Unescape() 转义

> ID：10275610
> 
> 赞同：1
> 
> 时间：2012-04-23T06:07:59.930
> 
> 标签：javascript, c#, .net, escaping

我正在从 JavaScript 向 c# 控制器发送一个转义字符串，现在我希望它在`c#`.

我用过`regex.Unescape()`但`c#`它不起作用。那么，我将如何避免它`c#`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:14:34.587

使用`Uri.Unescape`or `UnescapeDataString`，请参阅[此页面](http://msdn.microsoft.com/en-us/library/system.uri.unescape.aspx#Y166)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T07:06:51.537

如果您需要`Unicode`支持并且无法使用 中`unescape`实现的功能`System.Web`，则可以使用以下替换语句：

```
string str = "%u0442%u043E%u0432%u0430%20%u0435%20text%20%14%u20AC";

//replace Unicode characters
str = Regex.Replace(str, @"%U([0-9A-F]{4})",  match => ((char)int.Parse( match.Groups[1].Value, NumberStyles.HexNumber ) ).ToString(),RegexOptions.IgnoreCase );
//now replace ASCII character
str = Regex.Replace(str, @"%([0-9A-F]{2})",  match => ((char)int.Parse( match.Groups[1].Value, NumberStyles.HexNumber ) ).ToString(),RegexOptions.IgnoreCase );

Console.WriteLine(str); 
```

# c - C - 带有用户输入的崩溃程序

> ID：10275613
> 
> 赞同：1
> 
> 时间：2012-04-23T06:08:17.090
> 
> 标签：c, text, crash, line

这可能被认为是一个奇怪的问题，但我正在尝试从我提供的输入中找出一种使程序崩溃的方法。就像一个无限循环或分段错误。

该程序非常标准。它使用 get_line 从文本文件中读取行，然后计算它们的长度。

我的问题基本上是：有谁知道放入 txt 文件的任何技巧会导致程序在读取文本行时以某种方式崩溃？

如果没有看到代码的所有细节，这无用，我深表歉意。我不知道如何去问这样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:16:20.867

假设代码是天真的编写的，您可以执行以下操作：

1.  创建一个文本文件，其中的行数大于您在 get_line 中使用的缓冲区。

2.  更改文件的权限并删除从中读取的能力。

3.  在从中读取文件的过程中删除文件。

4.  将数据放入 ASCII 字符范围之外的文件中，以查看程序如何反应。例如，让它从二进制可执行文件而不是文本文件中读取。

5.  在读取文件时向程序发送 SIGINT、SIGHUP。

6.  让你的猫躺在键盘上。

最后，如果您想弄清楚程序崩溃的原因，请使用调试器而不是随机猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:47:46.363

它取决于您使用的操作系统和终端以及程序如何处理您的输入。在少数情况下，*空*输入或*足够长的*输入会导致程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:28:28.067

首先你必须是一个有经验的程序员。其次，您必须了解操作系统和机器是如何工作的（选择码、堆栈等）。然后，您可能会阅读有关漏洞利用和 shellcode 的信息。

# javascript - location.href + 指定搜索参数

> ID：10275616
> 
> 赞同：0
> 
> 时间：2012-04-23T06:08:31.237
> 
> 标签：javascript, html, location-href

我正在尝试通过指定要加载的路径和应附加的搜索参数来加载搜索页面的 url。

例如，我正在加载 /foo/?q=1&a=2 我会尝试在 javascript 中输入如下内容：

```
location.href = /foo/?q=1&a=2 
```

然后，当它运行时，我在“&”字符处得到一个无效的令牌异常。我精通javascript和jquery，所以我愿意接受任何一种语言的答案。

我只需要能够设置 location.href 及其关联的搜索参数，以便我可以正确加载页面。或者，如果您对其他方法有建议，我也愿意接受。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:09:40.560

您需要这样的引号中的字符串：

```
location.href = "/foo/?q=1&a=2"; 
```

Javascript 可能被解释`/foo/`为正则表达式，然后试图将其后面的其他字符理解为正则表达式上的选项。

# google-maps - 如何获取动态谷歌地图网址（有静态地图网址）

> ID：10275618
> 
> 赞同：3
> 
> 时间：2012-04-23T06:08:41.723
> 
> 标签：google-maps, google-maps-api-3

请任何人帮助我获取以下静态地图网址的动态地图网址。

[http://maps.google.com/maps/api/staticmap?center=59.4,43.4&map_type=SATELLITE&markers=color:blue|label:b|59.4,43.4&sensor=false&size=400x300&zoom=10](http://maps.google.com/maps/api/staticmap?center=59.4,43.4&map_type=SATELLITE&markers=color:blue|label:b|59.4,43.4&sensor=false&size=400x300&zoom=10)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:14:59.127

在[http://mapki.com/wiki/Google_Map_Parameters](http://mapki.com/wiki/Google_Map_Parameters)上有一个谷歌地图参数列表——太多了，无法复制出来并在此处列出答案。

您的地图将是[http://maps.google.com/maps?q=59.4,43.4&t=k&z=10](http://maps.google.com/maps?q=59.4,43.4&t=k&z=10)

注意：无法在 Google 地图中指定特定标记，因此没有蓝色标记的参数。你`map_type=SATELLITE`在你的 URL 中应该是`maptype=satellite`：没有下划线和小写。Maps URL 中的`t=k`指定卫星视图。

如果您想将其嵌入您的网站，`<iframe>`所需的代码是

`<iframe width="400" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?q=59.4,43.4&amp;t=k&amp;ie=UTF8&amp;z=10&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?q=59.4,43.4&amp;t=k&amp;ie=UTF8&amp;z=10&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small>`

# javascript - jQuery - 过滤 具有类属性

> ID：10275621
> 
> 赞同：0
> 
> 时间：2012-04-23T06:09:08.447
> 
> 标签：javascript, jquery, css, string, jquery-selectors

我有不同的复选框，onclick 根据 li 的类过滤一组 ~100 li 元素。

过滤器：

```
[ ] Rock Checkbox
[ ] Rap Checkbox
[ ] Punk Checkbox
[ ] Country Checkbox

<li class="rock rap punk">...</li>
<li class="rock country">...</li> 
```

我的 javascript 如下所示：

```
$(document).ready(function(){
        $('.filter').click(function() {
            var attribute = this.name;
            if ($(this).is(':checked')) {
                $('#champion-list li').each(function(index) {
                    if(!$(this).hasClass(attribute))
                        $(this).hide();
                });
            } else {
                $('#champion-list li').each(function(index) {
                    if(!$(this).hasClass(attribute))
                        $(this).show();
                });
            }
        });
    }); 
```

因此，单击任何复选框，它都会根据类获取名称和过滤器。但是，这种方法非常缓慢。有更好的性能想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T06:12:43.300

选择器是一个字符串，因此您可以动态构造它：

```
$("#champion-list li." + attribute).hide(); 
```

要选择*没有类的***li**元素：

 *```
$("#champion-list li :not(." + attribute + ")").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:16:24.150

```
$(function(){

    //cache the list for context
    var list = $('#champion-list')

    //use ".on()" to attach a single handler to the parent
    //onchange, i think, is better since there are keyboard users
    $('filter_parent_container').on('change','.filter',function() {

        var attribute = this.name;

        //directly use the attribute instead of using hasClass()
        if (this.checked) {
            $("li." + attribute,list).hide();
        } else {
            $("li." + attribute,list).show();
        }

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:16:56.427

缓存你的选择器。您也可以使用`filter()`代替`each()`并在那里获得一些性能：

```
var $items = $('#champion-list li');
$('.filter').change(function () {
    var that = this,
        $itemsAtt = $items.filter(function () {
            return !$(this).hasClass(that.name);
        });
    $(this).is(':checked') ? $itemsAtt.hide() : $itemsAtt.show();
}); 
```*

# user-interface - 属性网格：仅当属性值不为空时才显示属性值

> ID：10275627
> 
> 赞同：0
> 
> 时间：2012-04-23T06:09:43.410
> 
> 标签：user-interface, controls, propertygrid, .net

我在其中一个 UI 中使用属性网格 (System.Windows.Forms.PropertyGrid) 来显示类的属性。有时，我要显示的对象的某些属性可能是空值。所以在这里我在 propertygrid 中看到该属性的一行，并且值为空。当它为空时，是否有任何选项可以隐藏此属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:12:41.483

propertydescription中的Browsable属性可以通过反射设置，可以隐藏值。

[http://codinglight.blogspot.de/2008/10/changeing-attribute-parameters-at.html](http://codinglight.blogspot.de/2008/10/changing-attribute-parameters-at.html)

# build - 如何在 intelijidea 中构建一个 java swing 应用程序

> ID：10275628
> 
> 赞同：11
> 
> 时间：2012-04-23T06:09:43.850
> 
> 标签：build, intellij-idea

如何构建一个使用 intelij idea 开发的 java swing 应用程序及其依赖项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T06:25:01.033

1.  新项目
2.  从头开始创建项目
3.  选择类型：Java 模块
4.  文件 -> 新建
5.  图形用户界面表格

您会看到他们的 UI 编辑器弹出。

不过，您需要阅读 javax.swing 以了解如何启动您的应用程序。那篇文章并不特定于 IntelliJ IDEA。

# php - Zend Lucene 搜索 - 更新索引 - 有可能吗？

> ID：10275637
> 
> 赞同：0
> 
> 时间：2012-04-23T06:10:32.873
> 
> 标签：php, zend-framework, lucene, zend-search-lucene

我正在我的网站中实现 Zend Lucene 搜索。现在我正在通过其 id 删除旧索引并重新创建它来更新索引。但我想知道是否可以更新索引而不是删除并重新创建它。如果可能，请提供我的步骤。

希望尽快得到您的查询。

干杯..！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:22:07.010

来自 Zend 框架文档：

> 索引段文件一旦创建，就无法更新。新文档被添加到新段中。已删除的文档仅在可选的 .del 文件中标记为已删除。
> 
> 文档更新作为单独的删除和添加操作执行，即使它是使用 update() API 调用 Zend_Search_Lucene API 完成的。这简化了添加新文档的过程，并允许与搜索操作同时更新。

# c# - 如何在 Web 服务中处理 Windows 消息

> ID：10275639
> 
> 赞同：1
> 
> 时间：2012-04-23T06:10:51.757
> 
> 标签：c#, .net, web-services

在 WinForm 框架中，您可以重写 wndproc 来捕获 windows 消息，但没有针对 web 服务的函数重写。如何在 Web 服务中处理 Windows 消息？（如捕获设备更改事件）

# python - 监护人：我设置了“ANONYMOUS_USER_ID”，但仍然出现配置不当的错误

> ID：10275646
> 
> 赞同：1
> 
> 时间：2012-04-23T06:11:46.163
> 
> 标签：python, django

我在“/projectname/projectname/settings.py”中设置了 ANONYMOUS_USER_ID

ANONYMOUS_USER_ID=-1

但是当我使用 syncdb 时，它的 Guardian.conf.settings 会引发 ImproperlyConfigured。

raise ImproperlyConfigured("为了使用 django-guardian 的 " django.core.exceptions.ImproperlyConfigured: 为了使用 django-guardian 的 ObjectPermissionBackend 授权后端，你必须在你的设置模块中配置 ANONYMOUS_USER_ID

[我也在谷歌群组上发布了这个问题](https://groups.google.com/forum/?hl=zh-CN&fromgroups#!topic/django-users/44T9JhzOXcs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:41:02.580

1.  重新加载服务器
2.  检查可能的错字`ANONYMOUS_USER_ID`
3.  确保设置文件被实际使用并且`ANONYMOUS_USER_ID`是里面的输出`./manage.py diffsettings`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:27:15.027

> “/项目名称/项目名称/setting.py”

使用 settings.py 而不是 setting.py

# file - 在 Lua 中读取文本文件

> ID：10275655
> 
> 赞同：1
> 
> 时间：2012-04-23T06:12:38.417
> 
> 标签：file, lua, extract

对于重复的帖子或其他内容，我感到抱歉。我只是想确认这一点，因为我看过类似的帖子并且做了同样的事情，但我的输出不是我想要的问题是读取 Lua 语言的文本文件。这是我的代码：

```
 function fileExists(filename)
         file = io.open(filename, "r")
         if file == nil then
              return false
         else
              return true
         end
   end

  if fileExists ("myFile.txt") then
            print ("Hello")
  else
            print("not found")
  end 
```

它一直返回 false 并且找不到打印。而且我还试图打开一个 .lrc 文件而不是 .txt。这么简单的小代码行有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:27:29.473

您的代码没问题，除了文件关闭部分：

```
 file = io.open(filename, "r")
     if file == nil then
          return false
     else
          file.close(file)
          return true 
```

你真的有`myFile.txt`当前目录中的文件吗？

```
%ls -l
-rwxr--r--  1 aef  wheel  324 23 апр 10:24 a.lua
-rw-r--r--  1 aef  wheel    0 23 апр 10:16 myFile.txt
%lua-5.1 a.lua
Hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:24:20.257

如果您正在打开`.lrc`文件并提供文件名，因为`.txt`它会出错。我在我的自定义文件上尝试了您的程序`.ps1`，在该文件的父文件夹中`lua`，它运行良好。![自己检查](../Images/00c8637e40b491238e9521429780d445.png)

# c# - 使用 Observable Collection 在 Silverlight 中对数据网格进行排序

> ID：10275656
> 
> 赞同：0
> 
> 时间：2012-04-23T06:12:39.883
> 
> 标签：c#, silverlight-5.0

我有一个绑定到数据网格的可观察集合...我想通过单击标题对数据网格进行排序。这是一个动态数据。这是我的代码

```
namespace SLSortObservableCollection
{
    public partial class MainPage : UserControl
    {
        //ObservableCollection<int> NumData = new ObservableCollection<int>();
       // ObservableCollection<string> StrData = new ObservableCollection<string>();

    public MainPage()
    {
        InitializeComponent();

       ObservableCollection<int> NumData = new ObservableCollection<int>();
    ObservableCollection<string> StrData = new ObservableCollection<string>();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Random ra = new Random();
        for (int i = 0; i < 10; i++)
        {
            int num = ra.Next(1000);
            NumData.Add(num);

        }
        try
        {

            dataGrid1.ItemsSource = null;
            dataGrid1.ItemsSource = NumData;
        }
        catch (Exception ex) { MessageBox.Show(ex.ToString()); }
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            StringBuilder builder = new StringBuilder();
            Random random = new Random();
            char ch;
            for (int i = 0; i < 5; i++)
            {
                ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
                builder.Append(ch);
                StrData.Add(builder.ToString());
            }

            dataGrid1.ItemsSource = StrData;
        }
        catch (Exception ex) { MessageBox.Show(ex.ToString()); }
    }

}  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:18:45.137

ObservableCollection 根本不支持排序。如果这不是silverlight，您也许可以使用CollectionView 做一些事情。

实际上，您可能必须使用 SortableCollection 的自定义扩展。有几个这样飞来飞去，只要搜索“sortable observableCollection”

一些帮助您入门的实现

[http://kiwigis.blogspot.de/2010/03/how-to-sort-obversablecollection.html](http://kiwigis.blogspot.de/2010/03/how-to-sort-obversablecollection.html)

[http://elegantcode.com/2009/05/14/write-a-sortable-observablecollection-for-wpf/](http://elegantcode.com/2009/05/14/write-a-sortable-observablecollection-for-wpf/)

[http://sortablecollection.codeplex.com/](http://sortablecollection.codeplex.com/)

# drupal - 如何添加特定内容类型节点标题和 ID 的下拉列表

> ID：10275660
> 
> 赞同：0
> 
> 时间：2012-04-23T06:12:46.727
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

通常创建两种内容类型：

1）类别。2）段落。

在类别内容中创建了 10 个节点。

如何在下拉“段落”内容类型节点中提供此节点。

请给建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:40:06.233

如果您使用的是 drupal 7，那么您应该安装以下模块：[实体 api](http://drupal.org/project/entity)和[实体引用](http://drupal.org/project/entityreference)。

然后转到段落管理字段页面，在 admin/structure/types/manage/paragraph/fields 下并添加一个新字段。

对于“要存储的数据类型”，选择**Entity Reference**。对于“用于编辑数据的表单元素”，选择**Select list**。

在“字段设置”下，选择“目标类型”->**内容**。并从“目标捆绑包”中选择**类别**（您需要引用的内容类型）

单击“保存字段设置”。你就完成了。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:18:46.887

如果您的“类别内容类型”的唯一目的是用作其他内容类型的下拉菜单，那么最好将其设为词汇/分类而不是内容类型。

否则，在“段落内容类型”中，添加新字段文本/选择并使用 php 代码返回类别标题的键控数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:58:01.003

如果您有 CCK 模块启用“节点参考”，否则安装它。然后执行以下操作：

1.  转到内容类型 -> 编辑段落 -> 管理字段。

2.  添加一个带有“节点引用”的新字段作为要存储的数据类型。

3.  在字段配置设置中选择“类别”内容类型。

4.  节省。

5.  去创建一个新的段落内容，你会看到一个下拉框列出了所有的类别节点供选择。

如果您将类别用于标记目的，请考虑使用 Neelam 提到的分类法。

# directory - 文件夹层次结构中的堆限制

> ID：10275662
> 
> 赞同：1
> 
> 时间：2012-04-23T06:13:02.740
> 
> 标签：directory, io, heap-memory, limit

我有例如 Folder(1) ->Folder(2)->.....Folder(x)

在每个文件夹中有一些文件。

我需要执行加密或解密......我有一个循环/递归函数来遍历所有文件和文件夹，执行加密......还有读/写文件。

所有这些都消耗内存..现在我有一个限制堆 = 20。

我想知道选择我的 HEAP 限制的最佳方式。

我知道这不相关，但以防万一我使用 C#.NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:27:51.917

我使用 try-catch 处理异常......而不是定义一个应该因一台机器到另一台机器不同的堆限制，对我来说工作得很好。

# node.js - Socket.IO 连接用户数

> ID：10275667
> 
> 赞同：54
> 
> 时间：2012-04-23T06:13:19.123
> 
> 标签：node.js, websocket, socket.io

我终于可以正常工作了`Socket.IO`，但是我遇到了一个奇怪的问题。

我不确定这是否是最好的方法，但我正在使用：

```
io.sockets.clients().length 
```

这将返回连接到我的服务器的客户端数量。问题是在几次连接和断开用户之后，这个数字开始保持高于应有的水平。

例如，如果我连接并要求我的朋友连接，数字会上升，这是正确的。但是当我们开始断开连接并重新连接时，数量并没有减少。

我在[VMware](https://en.wikipedia.org/wiki/VMware) [Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)服务器上运行`Node.js`and服务器。`Socket.IO`

为什么会这样或者是否有更好的方法来找出有多少人连接到服务器？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-12-10T18:57:27.203

以防万一有人在使用 socket.io 1.0 版时访问此页面

您可以从中获取连接的客户端计数

```
socketIO.engine.clientsCount 
```

需要一个答案，以上不适用于新版本的 socket.io

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-04-23T07:26:52.590

这有一个[github问题](https://github.com/LearnBoost/socket.io/issues/463)。问题是，每当有人断开 socket.io 的连接时，都不会从数组中删除（ splice ），而只是将值设置为“null”，因此实际上您的数组中有很多 null 值，这会使您的客户（ ).length 比您在现实中拥有的连接更大。

您必须管理一种不同的方式来计算您的客户，例如

```
socket.on('connect', function() { connectCounter++; });
socket.on('disconnect', function() { connectCounter--; }); 
```

这是一个头脑嗡嗡声，为什么 socket.io 背后的人留下了这样的东西，但最好在 github 问题中解释，我作为链接发布！

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-10-08T01:59:07.783

我在 1.3.7 版本中找到了解决方法。有以下三种方法：</p>

1.  `io.engine.clientsCount`
2.  `io.sockets.sockets.length`
3.  `Object.keys(io.sockets.connected).length`

希望这些可以帮助有同样问题的人。:)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-03-21T14:35:39.567

使用 socket.io 2.2.0 更容易：

```
io.on('connection', function (socket) {
    console.log( socket.client.conn.server.clientsCount + " users connected" );
}); 
```

干杯

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-12-27T02:11:32.700

使用命名空间使用 Socket.IO v2.3.0 进行测试，我发现 4 个位置具有 clientCounts 属性（`Server`每次可能都是同一个对象）：

```
const socketio = require('socket.io');
const io = socketio(http_server);

const io_namespace = io.of('/foobar');

io_namespace.on('connection', function(socket)
{
    console.log(socket.conn.server.clientsCount);
    console.log(socket.server.engine.clientsCount);
    console.log(io.engine.clientsCount);
    console.log(io_namespace.server.engine.clientsCount);
}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-09-17T22:21:34.750

当您始终可以过滤数组时，为什么要使用（隐式全局）变量，该数组是通过调用 clients() 方法返回的。

```
io.sockets.clients().filter(c => !!c).length; 
```

编辑使用更短的语法

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-24T11:10:25.417

使用 socket.io 版本 - 1.3.7 的连接用户数

```
const io = require("socket.io");

io.on('connection', (socket) => {
    console.log(io.sockets.server.httpServer._connections);  //output in number
    // or
    console.log(io.sockets.server.engine.clientsCount);  //output in number
}); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-08-07T03:28:09.497

我目前正在使用 Socket.io v1.3.6 并且发现它有效。当用户连接和断开连接时，它会给出准确的数字：

```
io.sockets.sockets.length 
```

像这样：

```
var io = require('socket.io').listen(server);
io.on('connection', function(socket) {
  console.log(io.sockets.sockets.length);
  socket.on('disconnect', function() {
    console.log(io.sockets.sockets.length);
  });
}); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-04-07T21:26:00.207

在花了相当长的时间阅读 Stack Overflow 帖子并多次查看后`io.sockets.sockets`，我发现要获取已连接的套接字数量，您需要执行以下操作：

```
// io is the 'require'd socket.io module

io.on("connection",function(socket){
    console.log("The number of connected sockets: "+socket.adapter.sids.size);
}); 
```

我已经测试了这个非常简单的解决方案`socket.io@4.0.1`。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-09-20T13:50:04.617

我正在使用 socket.io 0.9.10 和以下代码来确定套接字的数量：

```
var socketIO =  require('socket.io').listen( .....
var numberOfSockets = Object.keys(socketIO.connected).length; 
```

不确定这个数字对各种边缘情况的反应有多准确，但直到现在它似乎是准确的：每个连接的浏览器都会增加这个数字，每个关闭的浏览器都会减少它。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-09-28T23:21:15.307

还可以看看：

`io.sockets.manager.connected`

这是一个干净的键值对列表（套接字 id 和连接状态？）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-30T22:13:47.817

我没有看到任何关于多核应用程序的提及，所以我只想补充一点，因为我使用的是多核（集群），所以我无法在客户端始终获得正确数量的套接字，所以我结束了将它们保存到我的 mongo 实例中，它非常一致和准确。使用这种方法，我可以通过浏览器查看我的套接字连接:)。

猫鼬模式：

```
var socketSchema = mongoose.Schema({
        socket : Number
}); 
```

用法：

```
//reset to 0 when the app starts ( just in case )
SocketModel.find({ "socket" : 1 } , function(err, deadSockets ) {
    if (err){
        console.log( err );
    }
    else{
        for( var i = 0 ; i < deadSockets.length ; i++ ){
            deadSockets[i].remove();                
        }
    }
});

io.on('connection', function( socket ) {
    //I found I needed to make sure I had a socket object to get proper counts consistantly
    if( socket ){
        var socketEntry = new SocketModel({ "socket" : 1 });
        socketEntry.save( function(err ){
            if (err){
                console.log( err );
            }
            else{

            }
        });
    }
    //On Disconnect
    socket.on('disconnect', function() {
        SocketModel.findOne({ "socket" : 1} , function(err, deadSocket ) {
            if (err){
                console.log( err );
            }
            else{
                deadSocket.remove();
            }
        }); 
    });
}); 
```

我有几个？

```
SocketModel.count({ "socket" : 1 } , function(err, count ) {
    if (err){
        console.log(err);
    }
    else{
        var term = "sockets";
        if( count == 1 ) term = "socket";
        console.log("Current Load: " , count , term );
    }
}); 
```

**注意**我不喜欢使用空查询对象 ( `{}`) 所以我只是用作`{ "socket" : 1 }`一个虚拟对象

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-30T06:18:43.090

我目前正在使用带有 typeScript 的套接字 v1.4.29，您可以使用此找到连接的客户端数量

```
 io.sockets.on('connection', function(socket) {
 var clients = socket.client.conn.emit.length;
 console.log("clients: " + clients);
 }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-05T18:36:12.797

返回已连接客户端的总数

```
console.log(io.engine.clientsCount) 
```

# android - 如何从 android 中的 CurrentInputConnection 获取单词？

> ID：10275670
> 
> 赞同：0
> 
> 时间：2012-04-23T06:13:32.270
> 
> 标签：android

我正在使用 android 中的自定义 InputConnection。一切正常，但我想在光标的当前位置和特定单词的开始位置之间获取字符。

有什么建议吗？我怎样才能做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:31:12.157

getSelectionStart() 可能是这里的答案。它返回光标的位置。然后将文本从 0 解析到该位置。这来自 TextView。

如果您想从 InputConnection 获取该信息，这很难，因为没有用于获取光标位置的 API。

# java - 在 cookie 上过滤网页

> ID：10275671
> 
> 赞同：1
> 
> 时间：2012-04-23T06:13:32.723
> 
> 标签：java, login, tooltwist

如何使用浏览器中的 cookie 统一更改 ToolTwist 网站上所有网页的外观？

对于每个需要知道用户是否登录的小部件，将样板代码放在生产助手中似乎有些过分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:40:19.973

如果您只希望 cookie 更改单个页面的外观，您可以使用请求处理程序。然而，听起来你想要一个全面的改变，这需要一个拦截器。

从 Eclipse Workbench 中，选择 File->New->Other...，然后选择 ToolTwist 文件夹下的 Interceptor。模板代码和配置文件包含注释和示例。在您的情况下，您可以检查用户是否已登录，如果未登录则重定向到不同的页面（导航点）。如果已登录，请设置 cookie（如果尚未设置）。将它的值存储在会话变量中以供以后使用是个好主意。

在您的生产助手和生成的小部件代码中，您可以使用会话变量来控制样式、布局等。

不过要小心 - 对您网站的每个页面访问都会调用拦截器，因此请保持精简和平均。

# c# - PropertyGrid 在 UITypeEditor 或 TypeConverter 的帮助下编辑后执行操作以更改其他属性

> ID：10275673
> 
> 赞同：3
> 
> 时间：2012-04-23T06:13:41.297
> 
> 标签：c#, .net, properties, propertygrid

我有一个具有一些属性的类。更改其中一个后，我想做出反应并更改其他属性。此操作应由 UITypeEditor 或 TypeConverter 完成，而不是由类本身中的事件完成。

我不想使用 INotifyPropertyChanged 并在类本身中处理它。

未经测试的示例代码

```
public class MyEditor : UITypeEditor
{
    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        // change the other property
    }
}

[Editor(typeof(MyEditor), typeof(UITypeEditor))]
class MyClass
{
    public string String1 { get; set; } 
    public string String2 { get; set; } 
    public string String3 { get; set; } 
} 
```

这个 EditValue 只有一个用一个小按钮显示编辑器模式的功能......但我想要一个带有 AfterChange 左右的普通文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:24:45.367

查看 MSDN 上的[NotifyParentPropertyAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.notifyparentpropertyattribute%28v=vs.90%29)。
引用的示例显示了 BorderAppearance 类中的属性更改如何触发 BorderAppearanceConverter。在您的情况下，您需要一个 MyClassConverter 对事件做出反应并将 NotifyParentPropertyAttribute 添加到您的三个属性中的每一个。

# php - Codeigniter SQL 语句

> ID：10275675
> 
> 赞同：0
> 
> 时间：2012-04-23T06:13:58.653
> 
> 标签：php, sql, codeigniter

我遇到了以下 sql 语句的一些问题：

```
$query= $this->db->get_where('navigation', 'linkname IS NOT NULL 
                             AND parent IS NULL 
                             AND type="main" //this doesn't work!!
                             AND ORDER BY sortnumber ASC'); 
```

如何以合理的方式将 type="main" 添加到此语句中？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T06:17:26.047

我*认为*错误在于你应该只写`ORDER BY`，而不是`AND ORDER BY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T06:26:53.657

我建议将“where”子句分成几个语句。它使调试和维护变得更容易：

```
$this->db->where('linkname !=', null);
$this->db->where('parent =', null);
$this->db->where('type', 'main');
$this->db->order_by('sortnumber', 'ASC');
$this->db->get('navigation'); 
```

# tooltwist - ToolTwist 端口被外部机器阻塞

> ID：10275678
> 
> 赞同：0
> 
> 时间：2012-04-23T06:14:38.800
> 
> 标签：tooltwist

我在 Linux 服务器的 37080 端口上部署了 ToolTwist Designer。

我无法从浏览器访问 Designer，也无法从我的机器 telnet 到端口：

```
$ telnet 11.22.33.44 37080  
Trying 11.22.33.44...  
telnet: connect to address 11.22.33.44: Connection refused  
telnet: Unable to connect to remote host 
```

但是，我可以在登录到服务器时远程登录到该端口：

```
$ telnet localhost 37080  
Trying 127.0.0.1...  
Connected to localhost.  
Escape character is '^]'. 
```

任何想法为什么无法从我的浏览器访问此端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:23:54.340

需要确保 Linux 防火墙 (iptables) 没有阻止任何访问。这里有一些命令可以检查

```
/bin/iptables -L 
```

如果被阻止，则打开对该端口的访问。如果您需要端口 80 转发到端口 37080，那么这些是命令。

```
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 37080 
```

在下面运行以保存配置，以便保存系统电源循环。

```
cd /etc/sysconfig
cp iptables iptables.prechange
iptables-save > iptables
service iptables restart 
```

# ios - 如何将特殊字符 ˚˚¬...ˆøππªˆ¨¥¨Δ˚ˆøø 转换为 ASCII 值

> ID：10275683
> 
> 赞同：1
> 
> 时间：2012-04-23T06:15:09.387
> 
> 标签：ios, ios4, int, nsstringencoding

我如何将特殊字符转换为 ASCII 我正在使用它来转换代码 ，但我无法转换特殊字符，请大家帮忙？？？`int asc = [actualString characterAtIndex:0];
label.text = [NSString stringWithFormat:@"%d", asc];`

# visual-c++ - 如何将 cv::Mat 中的值转换为 *CvMat

> ID：10275689
> 
> 赞同：0
> 
> 时间：2012-04-23T06:16:04.297
> 
> 标签：visual-c++, opencv, computer-vision

很难理解将 cv::Mat 转换为 *CvMat 的概念。你能告诉我如何用一些例子来转换它。我在 win 7 中使用 opencv2.1 和 vs。

在此先感谢， 问候， Arangarajan

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:33:28.873

```
Mat::operator CvMat() 
```

参看。opencv 2.1 文档

# ember.js - Ember 多选的语法

> ID：10275695
> 
> 赞同：2
> 
> 时间：2012-04-23T06:16:27.390
> 
> 标签：ember.js, multi-select

到目前为止为多选尝试的语法如下，即包括 multiple="multiple"

```
{{view Ember.Select multiple="multiple"
    contentBinding="App.viewPersonController"
    selectionBinding="App.selectedPersonController.person"
    optionLabelPath="content.personName"
    optionValuePath="content.id"
    prompt="Select..." }}
{{/view}} 
```

以下是错误：

未捕获的错误：断言失败：选择多个为假，但您已指定数组选择。

如何使多个为**真**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:47:12.780

除了您的 Handlebars 模板的问题 -`{{view}}`不能用结束标签关闭，但`{{#view}}{{/view}}`需要 - 您提供的代码可以正常工作。`multiple`是一个布尔值，因此计算结果为的所有内容都`true`将其设置为`true`. 这就是分配`multiple`工作的原因。我也删除了，`prompt`因为它搞乱了多个选择。我想这是一个错误。见[http://jsfiddle.net/pangratz666/p4QfQ/](http://jsfiddle.net/pangratz666/p4QfQ/)：

**车把**：

```
{{view Ember.Select
    multiple="true"
    contentBinding="App.viewPersonController"
    selectionBinding="App.selectedPersonController.persons"
    optionLabelPath="content.personName"
    optionValuePath="content.id"}} 
```

**JavaScript**：

```
App.viewPersonController = Ember.ArrayProxy.create({
    content: [{personName: 'Alf', id: 1}, {personName: 'Brian', id: 2}]
});

App.selectedPersonController = Ember.Object.create({
    persons: []
});​ 
```

* * *

关于`view`Handlebars 助手的注释：如果您通过指定视图来`{{view ClassName}}`告诉 Handlebars 呈现特定视图`ClassName`，其中模板在视图类中定义`templateName`或预编译`template`。

通过声明视图，`{{#view ClassName}} template instructions {{/view}}`您正在定义应显式呈现的视图的模板。

# javascript - 在 IE9 中使用 JavaScript 创建 GUID？

> ID：10275696
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:16:34.883
> 
> 标签：javascript, windows, internet-explorer-9

> **可能重复：**
> [如何在 Javascript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)
> [JavaScript：如何为 Internet Explorer 9 生成 UUID？](https://stackoverflow.com/questions/8091561/javascript-how-to-generate-uuid-for-internet-explorer-9)

有没有办法，完全依赖于 Windows 平台，在 IE9 的 javascript 中创建 GUID。它不必支持其他浏览器或操作系统。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:32:42.330

在 google 上简单搜索一下，我就会在 StackOverflow 上找到[这个答案。](https://stackoverflow.com/a/105074/851498)第一个结果。

这实际上是@Kooilnc 复制粘贴的内容。然而，他没有粘贴第二部分：

> 但是，请注意在注释中这些值不是真正的 GUID。无法在 Javascript 中生成真正的 GUID，因为它们依赖于浏览器不公开的本地计算机的属性。您需要使用特定于操作系统的服务，例如 ActiveX： http: [//p2p.wrox.com/topicindex/20339.htm](http://p2p.wrox.com/topicindex/20339.htm)

PS：我也建议看看这个库：[node-uuid](https://github.com/broofa/node-uuid)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-23T06:39:14.503

这是一个创建 UUID 的小方法 在这里测试结果 UUID[**之一**](http://guid.us/Test/GUID)

```
var result = document.querySelector("#result");
result.textContent = '10 UUIDs\n---------------------------------------------\n';

for (var i = 0; i < 11; i += 1) {
  result.textContent += createUUID() + '\n';
}

function createUUID() { // RFC 4122-ish
  return Array.from(Array(32))
   .map((e, i) => {
     let someRandomValue = i === 12 ? 4 : (+new Date() + Math.random() * 16) % 16 | 0;
     return `${~[8, 12, 16, 20].indexOf(i) ? "-" : ""}${
       (i === 16 ? someRandomValue & 0x3 | 0x8 : someRandomValue).toString(16)}`;
   }).join("");
}
```

```
<pre id="result"></pre>
```

# html - 如何定位我的弹出窗口？

> ID：10275698
> 
> 赞同：0
> 
> 时间：2012-04-23T06:16:35.857
> 
> 标签：html, css, jsp

我有一个弹出窗口，通过以下方式启用：

`<input type="button" value="S&ouml;k" onClick="getElementById('popupD').style.display=''">`

相关的 DIV 是

```
<div class="popup" id="popupD" 
<% if(!showSearch) { %>
style="display: none;"
<% } %>
>
<%@ include file="handlaggarelist.jsp" %>
</div> 
```

弹出窗口出现但在页面上太高了。弹出窗口的 CSS 是

```
.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
} 
```

你能帮我定位弹出窗口，否则它会出现在页面顶部吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:19:24.380

您可以将弹出窗口绝对定位在页面上，如下所示：

```
.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
    position: absolute;
    top: 200px;
} 
```

这将使弹出窗口出现在距页面顶部 200 像素处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:52:58.957

在弹出窗口中添加 position:absolute, top 设置为距 top 和 z-ndex 可接受的距离。确保 z-index 是一个非常高的数字。像 10000。这会将您的弹出窗口呈现在其他元素之上。

# entity-framework - 实体框架更新多对多关系 - POCO

> ID：10275699
> 
> 赞同：3
> 
> 时间：2012-04-23T06:16:40.250
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

**我有两个实体RelayConfig**和**StandardContact**之间的多对多关系

 ****实体：**

```
public class RelayConfig : EntityBase, IDataErrorInfo {
    ...
    //Associations
    public virtual ICollection<StandardContact> StandardContacts { get; set; }
}

public class StandardContact :EntityBase, IDataErrorInfo {
    ...
    //Associations
    public virtual ICollection<RelayConfig> RelayConfigs { get; set; }
} 
```

现在我正在尝试更新 RelayConfig 及其与 StandardContact 的关系。这是更新 RelayConfig 的代码。

```
public class RelayConfigRepository : GenericRepository<RelayConfig> {
    ....

    public void Update(RelayConfig relayConfig, List<StandardContact> addedContacts, List<StandardContact> deletedContacts) {
        context.RelayConfigs.Add(relayConfig);
        if (relayConfig.Id > 0) {
            context.Entry(relayConfig).State = EntityState.Modified;
        }

        addedContacts.ForEach(ad => relayConfig.StandardContacts.Add(ad));

        foreach (StandardContact standardContact in relayConfig.StandardContacts) {
            if (standardContact.Id > 0) {
                context.Entry(standardContact).State = EntityState.Modified;
            }
        }

        relayConfig.StandardContacts.ToList().ForEach(s => {
            if (deletedContacts.Any(ds => ds.Id == s.Id)) {
                context.Entry(s).State = EntityState.Deleted;
            }
        });
    }
    ...
} 
```

当我运行更新时，我得到了异常，其内部异常如下所示。

```
InnerException: System.Data.SqlClient.SqlException
        Message=Violation of PRIMARY KEY constraint 'PK__Standard__EE33D91D1A14E395'. Cannot insert duplicate key in object 'dbo.StandardContactRelayConfigs'. 
```

dbo.StandardContactRelayConfigs 是链接 RelayConfig 和 StandardContact 的链接表。如您所见，如果 Id > 0，更新代码会将所有实体更改为修改状态（更新方法末尾设置的已删除记录除外）。

我真的不明白为什么实体框架试图在链接表中插入行并且由于上述异常而失败。我已经将现有 RelayConfig.StandardContacts 实体的 EntityState 更改为 Modified。

简而言之，为什么我会在上面粘贴异常。

问候，尼尔文。

**编辑：** 上面更新方法的参数（addedContacts 和 deletedContacts）已经是 Id > 0 的现有实体。

**Edit2：** 根据您的建议，我从更新方法中删除了用于插入新（数据库中不存在）记录的代码。所以现在我的更新方法只将现有的 StandardContact 记录添加到 RelayConfig 集合。但我仍然无法让代码正常工作。首先是我正在使用的代码

```
 public void Update(RelayConfig relayConfig, List<StandardContact> addedContacts, List<StandardContact> deletedContacts) {
        context.RelayConfigs.Add(relayConfig);

        if (relayConfig.Id > 0) {
            context.Entry(relayConfig).State = EntityState.Modified;
        }

        addedContacts.ForEach(contact => {
            context.StandardContacts.Attach(contact);
            relayConfig.StandardContacts.Add(contact);
            objectContext.ObjectStateManager.
                ChangeRelationshipState(relayConfig, contact, rs => rs.StandardContacts, EntityState.Added);
        });
    } 
```

现在我只专注于添加记录。当 StandardContact（联系人变量）与任何其他现有 RelayConfig 对象没有任何关系时，上述代码运行良好。在这种情况下，将为添加到 RelayConfig.StandardContacts 集合的每个联系人在联结表中创建一个新条目。但是，当 StandardContact（联系人变量）已经与其他 RelayConfig 对象有关系时，事情会变得很糟糕（不可预测的行为）。在这种情况下，当 StandardContact 添加到 RelayConfig.StandardContacts 集合时，StandardContact 也会添加到数据库中，从而创建重复条目。不仅如此，还创建了一个新的 RelayConfig 对象（我不知道从哪里开始）并插入到 RelayConfigs 表中。

@Ladislav，如果您有一些适用于多对多关系更新（用于分离实体）的示例代码，那么我可以要求您向我展示相同的代码。

问候， 尼尔文

**Edit3（解决方案）：**

最终我最终使用了一种完全不同的方法。这是更新的代码

```
 public void Update(RelayConfig relayConfig, List<StandardContact> exposedContacts) {

        context.Entry(relayConfig).State = EntityState.Modified;

        relayConfig.StandardContacts.Clear();
        exposedContacts.ForEach(exposedContact => {
            StandardContact exposedContactEntity = null;
            exposedContactEntity = context.StandardContacts.SingleOrDefault(sc => sc.Id == exposedContact.Id);
            if (exposedContactEntity != null) {
                relayConfig.StandardContacts.Add(exposedContactEntity);
            }
        });
    } 
```

问候，尼尔文。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T10:13:55.680

问题是多对多关系有自己的状态。所以如果你这样称呼：

```
addedContacts.ForEach(ad => relayConfig.StandardContacts.Add(ad)); 
```

您告诉 EF 所有添加的联系人都是新的关系，它们将被插入到您的联结表中，用于多对多关系，但称之为：

```
foreach (StandardContact standardContact in relayConfig.StandardContacts) {
    if (standardContact.Id > 0) {
        context.Entry(standardContact).State = EntityState.Modified;
    }
} 
```

将更改联系人实体的状态，但不会更改关系的状态 - 它仍被跟踪为新的（顺便说一句。它不能修改，只能添加、删除或更改）。因此，当您保存所有联系人的更改时，会将所有联系人的关系添加到联结表中，并且如果数据库中已经存在相同的关系，您将得到异常（因为联结表仅包含两个 FK，它们也是 PK，在这种情况下，相同的关系 = PK 违规）。

您还需要使用以下方法设置关系状态：

```
var objectContext = ((IObjectContextAdapter)context).ObjectContext;
objectContext.ObjectStateManager.ChangeRelatioshipState(...); 
```

但是问题来了：您必须区分刚刚与现有或新依赖配置创建新关系的现有联系人以及全新的联系人 - 我建议您单独处理全新的联系人，否则您的代码将非常复杂。**

# .net - 我的 WPF 应用程序中的国际化 + 异常处理

> ID：10275701
> 
> 赞同：0
> 
> 时间：2012-04-23T06:16:44.237
> 
> 标签：.net, wpf, exception, localization, internationalization

我正在开发一个使用 PRISM 的 WPF 应用程序。我需要帮助

1.  如何添加对 3 种不同语言的支持。您能否建议任何文章告诉我们如何将所有资源字符串隔离在不同的文件中，并编译它们以达到所需的结果。

2.  如何处理异常 我正在以一种疯狂的方式处理异常。尽管我对每个服务类/助手类都有例外，但我仍然无法将确切的失败消息传达给最终用户。最终用户必须滚动浏览日志才能找到错误的确切原因。

    你能帮我实现这个功能吗？我可以向用户展示他的操作失败的确切原因，这可能发生在代码的更深层次上。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:25:18.573

这两个问题应该有两个单独的问题。[无论如何，您的第一个问题与此问题](https://stackoverflow.com/questions/795025/localization-in-wpf)重复

第二个问题是[这里](https://stackoverflow.com/questions/1336646/mvvm-exception-handling)和[这里](https://stackoverflow.com/questions/4228483/where-do-i-catch-exceptions-in-mvvm)

# android - 关于andorid4.0的xx-sw600dp

> ID：10275706
> 
> 赞同：-8
> 
> 时间：2012-04-23T06:17:13.000
> 
> 标签：android, launcher

在 android 4.0 资源中有新的可绘制、布局、值文件夹，例如 drawable-sw600dp、layout-sw600dp、value-sw600dp。我想知道对它们有什么影响。我也知道恐惧症如何调用许多布局folder.at 2.x 手机首先匹配 320*240_layout，如果没有这个，那么其他 hdpi 手机称为 layout.but 我发现 at4.x 如果有 320*240_layout，其他 hdpi 手机不使用布局文件夹也使用 320*240，我我对吗？

![在此处输入图像描述](../Images/3fc9edff7784c6f7476e95e89242b23f.png)

![第二张图片](../Images/d60cf2c45efdfb35e91caf3b617bf030.png)

你看两张图，它们是luncher4.0.1，第一个启动器只修改启动器的包，不修改任何代码。第二张图片是默认的launcher2。我不知道为什么会有所不同，它们在同一部手机上运行 samsung galxy one，并且代码相同。首先我认为问题是解决原因，但我认为不是。你能告诉我为什么要显示结果吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:20:11.843

我已经解决了这个问题。在源代码中，我删除了`layout.createHardwareLayer();`. 现在效果看起来像第二张照片。

# jquery - 如何使用jquery每5秒在顶部属性中添加值

> ID：10275711
> 
> 赞同：1
> 
> 时间：2012-04-23T06:17:40.150
> 
> 标签：jquery, html

我制作了一个 jquery 函数，其目的是每 5 秒添加一次填充，但它只工作一次。

```
<script type="text/javascript">

function aniMation(){

    var top=0;
    var left=0;

    $('#frame').css({top:++top,left:++left})

    }

$(function (){

    setInterval(aniMation,5000)

    })

</script>

<body>

<div class="main">
<div id="frame">
text

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:21:23.190

也从 aniMation() 调用 setInterval(aniMation,5000) ，就像这样......

```
function aniMation(){
var top=0;
var left=0;

$('#frame').css({top:++top,left:++left})
  setInterval(aniMation,5000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:22:12.977

```
function aniMation(){
    var top=0;
    var left=0;
    $('#frame').css({top:++top,left:++left});
    setTimeout(aniMation , 5000);
} 
```

*更新您的代码不起作用的原因*：

您正在使用简写`$(document).ready( function() { somecode; });`为：

```
$(function (){
    setInterval(aniMation,5000);
}); 
```

这将在页面正确加载时执行（仅一次）。因此，我对您的`aniMation`函数进行了更改，以递归方式调用自身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:23:45.957

您只需调用一次 setTimeout。如果函数应该继续，我建议在动画结束时调用 setTimeout。我不建议使用 setInterval。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T06:26:47.863

使您的 top 和 left 变量成为全局变量，因为您每次都重新初始化它，并且每次迭代都有 vvalue 1 。如果是全局的，您将增加它：

```
var top=0;
var left=0;

function aniMation(){
    $('#frame').css({top:++top,left:++left})
}

$(function () {
    setInterval(aniMation,5000)
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T06:21:32.383

试试这样：

```
var f   = $('#frame'), 
    top = 0, left = 0;

function aniMation(){
    f.css({top: (++top)+ 'px', left: (++left) + 'px'})    
} 
```

你的例子只工作一次，因为每次你执行函数`top`和`left`属性都会重置为 0。

此外，最好创建对 iframe 元素的外部引用，因此不必在每次函数调用时重新创建一个新引用

# java - 如何使用 XQuery 计算特定属性值？

> ID：10275715
> 
> 赞同：1
> 
> 时间：2012-04-23T06:18:22.353
> 
> 标签：java, xquery

以下是 XML 文件 -

```
<Title t="1">
    <Book sub="Computers"/>
    <Book sub="Engg."/>
</Title>
<Title t="2">
    <Book sub="Computers"/>
</Title>
<Title t="1">
    <Book sub="Computers"/>
    <Book sub="Engg."/>
    <Book sub="Medical"/>
</Title> 
```

计算“计算机”出现次数的 XQuery 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:48:14.677

计算所有具有值的`sub`属性：`'Computers'`

```
count(//@sub[. = 'Computers']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:35:05.303

假设提供的 XML 片段被包装在单个顶部元素中，从而成为格式良好的 XML 文档，那么下面的 XPath 表达式（不使用`//`）：

```
count(/*/*/*/@sub[. = 'Computers']) 
```

产生想要的结果。

# wcf - 将字符串（json 格式）传递给 WCF restful 并取回字符串（json 格式）

> ID：10275717
> 
> 赞同：1
> 
> 时间：2012-04-23T06:18:30.120
> 
> 标签：wcf, wcf-rest

我在将格式为 json 的字符串传递给 wcf restful 服务时遇到问题。

它给了我 Http400 错误。我不知道怎么了。

这是我的代码

IService.cs

```
[OperationContract]
    [WebInvoke(
        Method = "GET",
        UriTemplate = "savesomething/{u}",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    string SaveSomething(string u);

    [DataContract]
    public class UserAccount
    {
        [DataMember(Name = "userid")]
        public string UserId
        {
            get;
            set;
        }

        [DataMember(Name = "password")]
        public string Password
        {
            get;
            set;
        }
    } 
```

服务1.cs

```
public string SaveSomething(string u)
    {
        UserAccount ua = Deserialize<UserAccount>(u);
        StringBuilder sb = new StringBuilder(string.Empty);
        sb.Append(string.Format("UserID : {0}\r\n", ua.UserId));
        sb.Append(string.Format("Password : {0}\r\n", ua.Password));
        File.WriteAllText(@"D:\\temp\data.txt", sb.ToString());
        return "completed!";
    }

    private static UserAccount Deserialize<UserAccount>(string json)
    {
        UserAccount obj = Activator.CreateInstance<UserAccount>();
        MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
        DataContractSerializer serializer = new DataContractSerializer(obj.GetType());
        obj = (UserAccount)serializer.ReadObject(ms);
        ms.Close();
        return obj;
    } 
```

客户端的 default.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    string serviceUrl = "http://localhost:65085/Service1.svc/savesomething";

    MyUser mu = new MyUser();
    mu.UserId = "bob";
    mu.Password = "bobbypassword";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(serviceUrl);
    request.Method = "POST";
    request.ContentType = "application/json; charset:utf-8";
    DataContractJsonSerializer seria = new DataContractJsonSerializer(mu.GetType());
    MemoryStream ms = new MemoryStream();
    seria.WriteObject(ms, mu);
    String js = Encoding.UTF8.GetString(ms.ToArray());
    StreamWriter write = new StreamWriter(request.GetRequestStream());
    write.Write(js);
    write.Close();
    HttpWebResponse resp = request.GetResponse() as HttpWebResponse;
    StreamReader stReader = new StreamReader(resp.GetResponseStream());
    string jsonStr = stReader.ReadToEnd();
    resp.Close();
    Response.Write(jsonStr + "<BR>");
} 
```

客户的 MyUser.cs

```
public class MyUser
{
    public MyUser(){}
    public string UserId { get; set; }
    public string Password { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:51:44.680

我看到两个问题：

*   您没有设置请求的 Content-Length - Web 服务器很可能会使用 HTTP 400 拒绝您的请求
*   即使您为请求设置了 Content-Length，您的服务也将无法处理它，因为它。首先`u`从您的 UriTemplate 中删除 - 您正在发布数据并且这些数据在消息正文中，而不是在 uri 中。Next 方法参数 from `string`to`UserAccount`并让 WCF 自动进行反序列化。

# javascript - 使用 JavaScript 的 HTML5 模式

> ID：10275719
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:19:21.517
> 
> 标签：javascript, forms, html, design-patterns

我遇到的问题是我想在我的表单中创建一个与我的 html5 模式属性一起使用的 javascript 代码。

模式本身说明第一个字母必须是大写字母，最多 12 个字符。这就是我到目前为止所拥有的。感谢 Juhana，我得到了更好的模式代码。

```
^[A-Z][A-Za-z]{0,11}$ 
```

javascript 应该立即在屏幕上告知该人在输入字段时出错，并准确说明错误所在。我根本没有这方面的代码，因为我什至不知道如何使它与模式规则一起工作。

我已经坚持了一个星期了，我无法弄清楚。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:25:11.517

The only opportunity to identify the error in a given string I see at the moment Is the following: You have to break up your regex and loop over the string.

Since your regex is fairly easy, you can start with `^[A-Z]` to check if the first Symbol mathces a letter.

After that you go like this:

```
function check(string){

    var error = false,
        position = -1;

    loop : for(i=1;i<string.length;i++){
        var res = string.substring(i,i+1).match(/[A-Za-z]/);
        if(!res){
             position = i+1;
             error = true;
             break loop;
        }
    }
    return {'error':error,'position':position};
}

var check = check("aasfcd");

if (check.error){
    document.write("Error occured on position: "+check.position);
}else{
    document.write("Your string is okay");
}

​ 
```

See [example fiddle](http://jsfiddle.net/HcNLV/1/)

# iphone - 使用 [UINavigationBar 外观] 更改返回按钮图像

> ID：10275724
> 
> 赞同：2
> 
> 时间：2012-04-23T06:19:54.357
> 
> 标签：iphone, uinavigationbar, back-button, uinavigationitem

我想更改 UINavigationBar 的后退按钮

我可以使用以下代码来做到这一点：

```
 // Set the custom back button
    UIImage *buttonImage = [UIImage imageNamed:@"backag.png"];

    //create the button and assign the image
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"selback.png"] forState:UIControlStateHighlighted]; 
    button.adjustsImageWhenDisabled = NO;

    //set the frame of the button to the size of the image (see note below)
    button.frame = CGRectMake(0, 0, 30, 30);

    [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

    //create a UIBarButtonItem with the button as a custom view
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.leftBarButtonItem = customBarItem;
    self.navigationItem.hidesBackButton = YES;

    // Cleanup
    [customBarItem release]; 
```

但我必须将该代码放在每个 viewDidLoad 方法中。我想为整个程序做一次。

我的尝试是这样的：

```
 UIImage *buttonBack30 = [[UIImage imageNamed:@"backag"] //16 5
                             resizableImageWithCapInsets:UIEdgeInsetsMake(1000, 1000, 1000, 1000)];
    UIImage *buttonBack31 = [[UIImage imageNamed:@"selback"] 
                             resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack30 
                                                      forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    //[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack31 
    //                forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack31 
                                                      forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];

    NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
    [attributes setValue:[UIColor colorWithRed:(163.0f/255.0f) green:(0.0f) blue:(0.0f) alpha:1.0f] forKey:UITextAttributeTextColor];
    [attributes setValue:[UIColor clearColor] forKey:UITextAttributeTextShadowColor];
    // [attributes setValue:[UIFont fontWithName:@"Helvetica" size:15] forKey:UITextAttributeFont];
    [attributes setValue:[NSValue valueWithUIOffset:UIOffsetMake(0.0, 0.0)] forKey:UITextAttributeTextShadowOffset];
    [[UIBarButtonItem appearance] setTitleTextAttributes:attributes forState:UIControlStateHighlighted]; 
```

但它会拉伸图像并在其上绘制文本，这是我不想要的。我只想要每个视图中大小相同的图像。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-15T09:17:16.133

从 iOS 5.0 开始，您可以使用全局**外观修饰符**来更改整个应用程序中的所有后退按钮：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:[UIImage imageNamed:@"back_button_bg"]
                                        forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

背景图像必须是可调整大小的图像才能获得良好的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T06:27:07.373

这可能会奏效。在顶部的您的 appdelegate 中添加以下内容。

```
 @implementation UIViewController (CustomFeatures)
-(void)setNavigationBar{
    // Set the custom back button
    UIImage *buttonImage = [UIImage imageNamed:@"backag.png"];

    //create the button and assign the image
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"selback.png"] forState:UIControlStateHighlighted]; 
    button.adjustsImageWhenDisabled = NO;

    //set the frame of the button to the size of the image (see note below)
    button.frame = CGRectMake(0, 0, 30, 30);

    [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

    //create a UIBarButtonItem with the button as a custom view
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.leftBarButtonItem = customBarItem;
    self.navigationItem.hidesBackButton = YES;

    // Cleanup
    [customBarItem release];
}
@end 
```

并打电话给`[self setNavigationBar];`你`viewDidLoad`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:23:24.417

使用此代码并享受...

```
UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
[leftButton setUserInteractionEnabled:NO];
[leftButton setImage:[UIImage imageNamed:@"backag.png"] forState:UIControlStateNormal];    
leftButton.frame = CGRectMake(0, 0, 30, 30);
[leftButton addTarget:self action:@selector(YourclickeventClick:) forControlEvents:UIControlEventTouchUpInside];        
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton];
[leftbutton release]; 
```

希望对你有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:19:37.263

您可以为 backBarButtonItem 创建一个自定义按钮，然后对其进行自定义。

转到这个问题 -[如何更改默认 backBarButtonItem 的颜色/图像？](https://stackoverflow.com/questions/3297999/how-do-you-change-color-image-on-the-default-backbarbuttonitem)你可以在那里找到你的答案。

要使条形按钮项看起来像 backBarButtonItem，请参阅此答案。[在 UIToolbar 上创建左箭头按钮（如 UINavigationBar 的“后退”样式）](https://stackoverflow.com/questions/227078/creating-a-left-arrow-button-like-uinavigationbars-back-style-on-a-uitoolbar)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-23T10:11:13.457

这是**Swift的工作解决方案**

```
 let backImage = UIImage(named: "back")
    UINavigationBar.appearance().backIndicatorImage = backImage
    UINavigationBar.appearance().backIndicatorTransitionMaskImage = backImage
    UIBarButtonItem.appearance().setTitleTextAttributes([NSAttributedString.Key.foregroundColor:
        UIColor.white], for: .normal)
    UIBarButtonItem.appearance().tintColor = UIColor.green //if you want to change color 
```

# dom - Meteor：如何在不刷新页面的情况下通过 Javascript 更新 DOM？

> ID：10275728
> 
> 赞同：4
> 
> 时间：2012-04-23T06:20:06.560
> 
> 标签：dom, raphael, meteor

更新：

看起来[这个脚本](https://stackoverflow.com/questions/10274679/invoke-a-client-js-function-in-meteor-after-getting-results-from-the-server)可能是我正在寻找的催化剂。如果是这样，将对其进行测试并回答/关闭此问题。

* * *

我相信我最终会找到答案，但我现在把它放在那里，以防其他人马上知道......

我正在使用 RaphaelJS 来操作 DOM（将一堆`SVG`标签添加到已识别的 DOM 中`DIV`），如果 MongoDB 集合有更新，我想重新渲染那些特定的 DOM 部分。

举个例子：-假设我有一个名为`PiePieces`. -当页面第一次渲染/调用时，假设集合中的块数是 4。-我使用控制台以编程方式添加一个饼块：`PiePieces.insert({...})` -我希望页面像标准把手绑定情况一样更新，但问题是，新条目需要通过执行直接 DOM 操作的 Raphael 脚本。

所以，逻辑会是这样的：

MongoDB 集合更新事件 -> 客户端函数调用来操作 DOM -> DOM 修改/页面更新而无需刷新。

我已经尝试通过从 DOM 本身读取值来实现这一点，并且我可以获得更新的 DOM，但是整个页面会刷新和/或我必须手动刷新页面，或者 DOM 树尚未完成，等等在我刷新之前它是空白的。

你能指出我正确的方向吗，也许是一个小代码片段/例子？（如果已经存在类似的东西，请告诉我在哪里，我会去挖掘）

提前致谢！（到目前为止，我很喜欢 Meteor ......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:02:09.237

也许你想要[观察](http://docs.meteor.com/#observe)方法。您可以将回调分配给您所谓的“MongoDB 集合更新事件”，然后调用使用 Raphaël 或其他方式的 DOM 操作函数。

它看起来像这样：

```
PiePieces.find().observe({
    changed: function(piePiece) {
        //call DOM manipulating function
    }
}) 
```

这会将回调附加到所有 PiePieces。如果您不想将回调附加到所有文档，请在观察之前在 find 上查询您想要的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:47:25.473

您可以像这样从模板内部引用 draw 方法：

模板.html

```
<template name="drawing">
  {{#each PiePieces}}
     {{draw piece}} <!-- assuming 'piece' is a property on 'PiePiece' -->
  {{/each}}
</template> 
```

客户端.js

```
Template.drawing.PiePieces = function(){
  PiePieces.find();
}

Template.drawing.draw = function(piece){
  // your drawing method here
} 
```

# google-maps - 谷歌映射无效键

> ID：10275729
> 
> 赞同：0
> 
> 时间：2012-04-23T06:20:40.230
> 
> 标签：google-maps

我有一个谷歌地图页面上传到以下网站： http: [//www.canning.co.nz/Mapping/directions.html](http://www.canning.co.nz/Mapping/directions.html)

我通过谷歌网站获得了一个 API 密钥，并将其粘贴到以下行：

这是放置它的正确位置吗？我收到一条错误消息，提示我需要一个新密钥，即使我是从 Google 站点获得的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:31:54.370

1.  你的钥匙看起来很短。不是剪了吗？

2.  是的，这是为 google maps api v2 指定密钥的正确方法

3.  确保此密钥未绑定到某个域（您必须在注册过程中输入域）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:33:19.507

您还必须在[API 控制台](https://code.google.com/apis/console/)中激活**Google Maps API v2服务**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:08:50.830

在允许的引用中指定以下内容：

```
sitename.com
sitename.com/*
www.sitename.com
www.sitename.com/*
*.sitename.com
*.sitename.com/* 
```

当然，站点名称是您感兴趣的域:)

# php - 在 iPad 上播放 PHP 视频

> ID：10275730
> 
> 赞同：2
> 
> 时间：2012-04-23T06:20:40.310
> 
> 标签：php, video, playback

所以这是我的 PHP 视频代码，它可以在浏览器中运行，但是当我尝试让它在 iPhone 和 iPad 上播放时，它似乎会通过它调出带有 x 的播放按钮。

```
<?php
header('Content-type: video/mp4');
$homepage = file_get_contents('http://cdn.videos.budtraffic.com/sodaradio/J/Jessie%20J%20-%20Laserlight.mp4');
echo $homepage;
exit;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:17:34.410

[Apple 网站上的说明](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html#//apple_ref/doc/uid/TP40006514-SW6)

**简短的回答：**

因为 iOS 设备要求服务器支持视频的字节范围请求，而您的代码不提供该功能。

**长答案：**

当 iOS 设备请求视频时，它们不会下载整个视频。他们一次只下载一小块，以最大限度地减少带宽使用，也因为用户可能希望跳到视频的后面部分而不下载前面的部分。为此，他们提出字节范围请求。基本上，他们告诉服务器“嘿，给我第 100 和第 200 字节之间的文件部分”。字节范围请求使用`Range`标头，如下所示

```
GET /myvideo.mp4 HTTP/1.1
Host: www.example.com
Range: bytes=500-999 
```

在这种情况下，服务器必须回复类似的内容

```
HTTP/1.1 206 Partial Content
Content-Type: video/mp4
Content-Range: bytes 500-999/20000 
```

所以你需要的不仅仅是这四个 php 行来支持 iOS 设备。首先，您将解析`Range`标题。此信息在`$_SERVER['HTTP_RANGE']`全局变量中可用。然后，您只需要获取文件的那一部分并将其发送给客户端。您还需要填充`Content-Range`标题。

请注意，`Content-Range`标头包含完整的文件大小，因此您的代码将需要提供该信息。另请注意，几乎每个服务器都支持这种对静态文件的请求。如果您不需要对文件进行特殊处理，一个可能的选择是将文件复制到公共服务器上并让它为您完成工作。

**非相关评论**

将其视为建设性的批评，但您当前形式的代码将使您的服务器陷入困境。您基本上在发送之前将*整个文件放在内存中*，更糟糕的是，您对*每个请求*都执行此操作。如果 100 个人同时下载 100MB 的视频，则服务器上需要**10GB**的内存来为他们提供服务。这不成比例，一点也不。

更好的解决方案是使用[readfile](http://www.php.net/manual/en/function.readfile.php)函数将文件作为从 CDN 读取的内容发送。这样，您只需要使用一小块内存，就可以处理更多的并发请求。

**编辑**：实际上，您还需要使用特殊的响应代码进行响应，即 206 部分内容。我在这个答案的第一个版本中忘记了这一点。现在已修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:38:21.783

我正在尝试做同样的事情：一个安全的 PHP 脚本来访问 MP4 视频。

iOS（iPad 和 iPhone）无法使用它。

我按照本教程尝试了您所说的内容（字节范围）：

[http://mobiforge.com/developing/story/content-delivery-mobile-devices](http://mobiforge.com/developing/story/content-delivery-mobile-devices)

但是 iPad 永远不会在其请求中发送“HTTP_RANGE”它：因为它是一个 .php 文件，它为什么要这样做？

我制定了重写规则（access.mp4 -> access.php），即使 iOS 尝试访问 access.mp4，对服务器的请求也没有 HTTP_RANGE。

所以，我认为没有办法让安全的 PHP 脚本与 iOS 一起工作......

# php - cakephp适合企业应用吗？

> ID：10275732
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:20:50.097
> 
> 标签：php, cakephp

经过这么多的谷歌搜索，我发现 cakephp 是 php 中一个新兴的 MVC 框架。但仍然缺乏信息可以回答我的问题“cakephp 是否适合企业应用程序？或者是否有任何其他 php MVC 框架比我可以寻找的 cakephp 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:58:23.133

是的，如果使用正确的话。但是与任何其他框架一样，如果您有一些人对编程的了解最少，他们会滥用该框架，最终您会得到一大堆废话。我不得不处理我制造的这种代码废墟……你知道……

根据我所看到的代码，我个人的看法和经验是，其他框架，如 Symfony 和 Code Igniter，没有那么严格，也没有“约定优于配置”，并邀请经验不足的人将他们通常的垃圾分散到整个 MVC 模型中。我并不是说它们不好，而是让有坏习惯的人容易。

当谈到基准测试框架的这种废话时，您应该提前考虑并考虑您或您的程序员将生成的代码库的可维护性以及框架为您提供的其他功能。顺便说一句，只是在控制器中回显某些内容或加载单个博客页面并不是真正的基准。想一想：在构建、维护我的高流量页面时我必须花费多少精力，以及我将在框架 X 上花费多少精力来实现缓存技术？无论您选择什么框架，它都与程序员正确使用它有关。

我的同事刚刚想到编写一个比其他任何框架都快的微框架，只是为了证明这种愚蠢的观点，即性能是你应该关心的一切。

我还建议您不要过早优化，更关心可维护的代码库并明智地选择您的开发人员。如果你有一个内部团队，要么让他们正确学习框架，要么让他们使用他们熟悉的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:54:52.080

你知道[http://www.digg.com](http://www.digg.com)是用 CakePHP 制作的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T06:23:40.917

我不知道，cakephp 是否适合企业应用程序，但 Symfony 是。 [http://symfony.com/](http://symfony.com/)

# python - 如何使用 pypy 安装 Autobahn

> ID：10275739
> 
> 赞同：0
> 
> 时间：2012-04-23T06:21:28.880
> 
> 标签：python, twisted, pypy

我在 Windows 上使用 PyPy 1.8，并尝试安装 Autobahn。我启动了解释器，输入“import autobahn”，它崩溃并显示错误消息：“Fatal Python error: PyThreadState_Get: no current thread pypy ...”

# objective-c - ld：未找到框架 GData

> ID：10275740
> 
> 赞同：2
> 
> 时间：2012-04-23T06:21:30.180
> 
> 标签：objective-c, ios, xcode, gdata

当我尝试构建应用程序时，为什么 Xcode 说它找不到我的 GData 框架？GData.framework 目录与其他 .frameworks（CoreData 等）位于同一目录（在 HD 和项目导航器中），并且它也添加到“链接框架和库”面板中。

这是日志输出：

```
dyld: Library not loaded: @loader_path/../Frameworks/GData.framework/Versions/A/GData
Referenced from: /Users/zak/Library/Application Support/iPhone Simulator/5.1/Applications/897A560D-3AD5-42BE-958B-84DEA45A8F0E/MyApp.app/MyApp
Reason: image not found 
```

这是完整的问题报告：

```
Ld /Users/zak/Library/Developer/Xcode/DerivedData/MyApp-fcvdbuanprmqvjafgwsuxlokvpsd/Build/Products/Debug-iphonesimulator/MyApp.app/MyApp normal i386
cd /Users/zak/Dropbox/xcodeProjects/MyApp
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/zak/Library/Developer/Xcode/DerivedData/MyApp-fcvdbuanprmqvjafgwsuxlokvpsd/Build/Products/Debug-iphonesimulator -F/Users/zak/Library/Developer/Xcode/DerivedData/MyApp-fcvdbuanprmqvjafgwsuxlokvpsd/Build/Products/Debug-iphonesimulator -F/Users/zak/Dropbox/xcodeProjects/MyApp/.. -filelist /Users/zak/Library/Developer/Xcode/DerivedData/MyApp-fcvdbuanprmqvjafgwsuxlokvpsd/Build/Intermediates/MyApp.build/Debug-iphonesimulator/MyApp.build/Objects-normal/i386/MyApp.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework CoreData -framework UIKit -framework GData -framework Foundation -framework CoreGraphics -o /Users/zak/Library/Developer/Xcode/DerivedData/MyApp-fcvdbuanprmqvjafgwsuxlokvpsd/Build/Products/Debug-iphonesimulator/MyApp.app/MyApp

ld: framework not found GData
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

**编辑**得到它的工作，但现在我得到一个 GDataXMLNode.h 文件未找到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:36:47.130

答案是您不能将 GData 框架添加到 iOS 项目中，因为它只是为 Mac OSX 设计的。您必须将 GData 用作链接库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:29:45.067

尝试将所有 GData 框架头文件添加到您的项目中。（尤其是 GDataXMLNode.h 文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:53:10.137

看看这篇文章[http://intridea.com/blog/2010/12/28/a-visual-guide-to-creating-an-embeddable-framework-for-mac-osx](http://intridea.com/blog/2010/12/28/a-visual-guide-to-creating-an-embeddable-framework-for-mac-osx)

它解决了我的问题。

# jquery - jQuery 的 $.load() 方法是否有更有效的替代方法？

> ID：10275744
> 
> 赞同：0
> 
> 时间：2012-04-23T06:21:54.640
> 
> 标签：jquery

我的问题是关于 jQuery`.load()`方法的使用。下面的代码将我网站页面中的一些内容加载到当前页面中。

```
$('a').click(function(event){
    $('#result').load("mywebpage.html #report");
    event.preventDefault();
  }); 
```

这很好用，但据我了解，`.load()`上面使用的方法实际上完全返回*mywebpage.html*，只是为了获取名为 div 的内容`#report`。

如果 mywebpage.html 是一个特别大的文件，并且我有一个繁忙的站点，那么我想优化这个调用，以便它只返回`#report`div 的内容。

jQuery 是否能够在仅包含静态 html 的网站上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:32:12.743

是的，只需创建一个`myreport.html`仅包含您需要的大 HTML 内容的内容并根据需要加载它

```
$('a').click(function(event){
    $('#result').load("myreport.html");
    event.preventDefault();
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:33:06.023

> jQuery 是否能够在仅包含静态 html 的网站上执行此操作？

# 不

毕竟，jQuery 是 javascript。该`.load()`方法将基于 AJAX。而 AJAX 只能获取完整的文件。即使它可以获取部分文件，它仍然需要获取完整文件以首先找出 div 的位置。

如果您有权访问服务器，则*可以*使用执行此操作的 XML 解析器创建 PHP 页面。如果您只想加载该元素，请将其保存在单独的 html 文件中。否则，不行。

# javascript - Selenium：借助链接等属性获取元素的 xpath

> ID：10275748
> 
> 赞同：0
> 
> 时间：2012-04-23T06:22:21.157
> 
> 标签：javascript, selenium, selenium-rc

我想知道是否可以获取元素的 xpath，例如 link="Edit"。

使用硒我可以做到这一点。

解释 ：

我知道页面上有带有文本“编辑”的链接。所以使用 selenium 我可以动态地定位它，`link="Edit"`但是现在我在我的 RC 中有这个链接，并希望使用它循环它，`xpath`以便我可以在存在链接的同一行中获取内容。

我想在不同的场景和不同的元素中实现这些东西。我应该能够使用元素的属性获取元素的 xpath、id、css。

请帮忙，让我知道是否可以使用一些 java 脚本，或者我正在使用 Selenium RC 和 PHP。如果可能的话，我应该能够整合事物。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:07:43.333

我不知道 xpath 的“on the go”创建，但这是`link="Edit"`Selenium 中的 xpath 等价物：

```
//a[包含（文本（），'编辑'）]/..

```

# html - 如何更改在 div html 中按 enter 只返回 div

> ID：10275749
> 
> 赞同：0
> 
> 时间：2012-04-23T06:22:23.580
> 
> 标签：html, keypress, contenteditable

我正在使用“div 内容可编辑”html 我正在使用“div 内容可编辑”html 从输入键盘获取值以使用 ajax jquery 发布并发送到数据库。在我的[最后一个问题中](https://stackoverflow.com/questions/9951615/enter-value-when-doing-ajax-post-with-jquery)

当我提交到数据库时，当我在“div content editable”中按“enter”时出现问题，

当我在“div content editable”中按“enter”时，浏览器返回

```
<div>
  <br>
</div> 
```

我的问题，如何改变按键“输入”不变成`<br>`，只是`<div> </div>`？？？

# regex - Vim 搜索和替换查询

> ID：10275754
> 
> 赞同：4
> 
> 时间：2012-04-23T06:22:44.990
> 
> 标签：regex, vim

我有一个像这样的正则表达式：

```
:%s/pattern/        pattern/gc 
```

正如您在替换文本中看到的那样，我最初需要八个空格字符。我不想每次都输入八个空格。有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:27:19.840

您可以使用`printf('%*s', 8, '')`：

> 字段宽度或精度，或两者都可以用一个`asterisk '*'`代替数字字符串来表示。在这种情况下，Number 参数提供字段宽度。

```
:%s/pattern/\=printf('%*spattern', 8, '')/gc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T06:50:46.480

如果您在保存击键后，您可以使用替换文本初始化命名寄存器：

```
:let @a = repeat(' ', 8) 
```

然后，在构建替换命令时，通过 CTRL-R + {register-name} 插入寄存器内容：

```
:%s/pattern/<C-R>a&/gc 
```

为了进一步简化，我在替换字符串中通过`&`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:29:17.227

您可以通过在命令前输入一个数字来重复一些 vi 命令，例如：8iA 将插入 8 个 A（所以用空格替换它）。

# c# - 是否有事件让我知道是否安装了 SD 卡？必须复制数百张卡片

> ID：10275756
> 
> 赞同：2
> 
> 时间：2012-04-23T06:22:54.520
> 
> 标签：c#, windows, sd-card

是否有 Windows 事件或机制可用于了解 SD 卡是否安装在运行 C# 中的 Windows XP/Vista/7 的 PC 上？

直到今天，我找到了一种使用 WM 消息来了解是否连接了新驱动器的方法，以及一种使用 WQL 的方法，它们适用于 CD/DVD 和 USB，但没有人能够检测到我是否将 SD 卡插入 PC . 这似乎与 USB 驱动器不同，我猜这是因为“阅读器”硬件已经连接到 PC。

但我不敢相信没有办法:(

我的问题的一点背景：

我必须手动复制 800 张 SD 卡，这是一次性的事情，我想制作一个小应用程序，在插入卡后立即启动复制作业，这样您就不必单击任何按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:32:20.453

这不完全是您正在寻找的，但也许是一个替代解决方案：

[有一个指南如何在 codeproject 上将](http://www.codeproject.com/Articles/15626/Implement-an-Autoplay-Handler)您的应用注册为自动播放处理程序。然后，您可以选中告诉 Windows 始终使用此操作的框，然后就可以了。

**编辑：**

另一种方法是使用在 codeproject 上也引入的 DriveDetector[类](http://www.codeproject.com/Articles/18062/Detecting-USB-Drive-Removal-in-a-C-Program)。此类将自动通知您有关已到达或已删除的驱动器，但我不确定这是否适用于闪存卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:45:05.727

IIRC，Windows 7 禁用了除 CD/DVD/BD 之外的所有驱动器的自动播放。

如果我是你，我会这样做：

1.  使用以下命令从目标驱动器获取文件列表（假设它始终是同一个驱动器）：http: [//www.dotnetperls.com/directory-getfiles](http://www.dotnetperls.com/directory-getfiles)
2.  如果列表长度为 0（即没有文件），则假定没有安装任何内容
3.  如果列表不是 0 长度，则复制文件。

# iphone - CoreBluetoothFramework - 它是否在 IOS 应用程序不运行时启动它

> ID：10275765
> 
> 赞同：1
> 
> 时间：2012-04-23T06:24:02.657
> 
> 标签：iphone, ios, ipad, ios5, core-bluetooth

谁能告诉我 CoreBluetooth 框架是否能够启动应用程序（当它检测到使用蓝牙的新设备时通知应用程序）。当应用程序不在后台运行时。另外我想知道应用程序在后台运行时的情况。根据文档，此框架将从挂起状态启动应用程序。任何人都可以分享一些关于这方面的信息，因为我没有 Iphone 4S 来测试这个。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T05:26:33.893

据我所知，在没有用户干预的情况下启动应用程序的唯一方法是当您的应用程序使用 VoIP 服务时。要检测蓝牙 LE (BTLE) 设备，CBCentralManager 实例需要在您设计的应用程序的后台运行。否则，无法检测附近的 BTLE 设备。

如果你正在设计你的应用程序，core-bluetooth 有两种类型的后台启用。Event 和 Session。

**事件背景**
事件后台可能是大多数应用程序在与低功耗蓝牙设备交互时使用的。当应用程序在后台时，此模式不允许与附件直接通信，但当它想与应用程序通信时，它会提供来自附件的通知。当您的应用程序在后台时，iOS 将保持与 BTLE 附件的连接，并将继续监视通知。当连接的 BTLE 配件有通知可用时，iOS 会通知用户该配件想与您的 App 通话，允许用户加载您的 App 并与该配件进行交互。由于许多设备需要节省电量，因此仅在确定的时间提供信息将大大提高配件和 iPhone 4S 的电池寿命。

- 此模式不需要 info.plist 条目。

**会话后台**
有时应用程序必须与附件交互，即使它在后台运行。考虑一个需要实时监测心率的正在运行的应用程序。这个模型有一个明确的开始和停止。用户开始在应用程序中运行。当跑步处于活动状态时，应用程序会读取心率信息，直到跑步完成或停止。会话后台还允许在应用程序处于后台时扫描和连接到 BTLE 配件。即使应用程序在后台，scanForPeripheralsWithServices 或 connectPeripheral 调用仍将继续。CoreBluetooth 将继续监视与您的应用程序正在寻找的服务相匹配的特定外围设备或外围设备，并在找到或连接时调用您的应用程序委托。请注意，每次 BTLE 外围设备或 iPhone 4S 使用其收音机时，它正在耗尽各个设备的可用功率。使用基于会话的后台的应用程序开发人员必须注意电源使用情况。

*   会话后台需要在您的 Apps info.plist 中进入 UIBackgroundModes、bluetooth-central 的后台模式条目。

# java - BigInteger.toString 方法正在删除前导 0

> ID：10275769
> 
> 赞同：31
> 
> 时间：2012-04-23T06:24:47.857
> 
> 标签：java, tostring, biginteger

我正在尝试使用 MessageDigest 生成 MD5 和。我有以下代码。

```
byte[] md5sum = digest.digest();
BigInteger bigInt = new BigInteger(1, md5sum);
output = bigInt.toString(16); 
```

这返回的不是 32 个字符的字符串，而是一个 31 个字符的字符串`8611c0b0832bce5a19ceee626a403a7`

预期的字符串是`08611c0b0832bce5a19ceee626a403a7`

输出中缺少前导 0。

我尝试了另一种方法

```
byte[] md5sum = digest.digest();
output = new String(Hex.encodeHex(md5sum)); 
```

并且输出符合预期。

我检查了文档，Integer.toString 根据它进行了转换

> 使用 Character.forDigit 提供的数字到字符的映射，并在适当的情况下添加减号。

并在 Character.forDigit 方法中

> 如果 0 <=digit < radix，则 digit 参数有效。

有人能告诉我两种方法有何不同以及为什么删除前导 0 吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T06:33:13.757

我个人会*避免*使用`BigInteger`将二进制数据转换为文本。这并不是它的真正用途，即使它*可以*用于此目的。有大量代码可用于将 a 转换`byte[]`为其十六进制表示 - 例如使用[Apache Commons Codec](http://commons.apache.org/codec/)或简单的单一方法：

```
private static final char[] HEX_DIGITS = "0123456789ABCDEF".toCharArray();
public static String toHex(byte[] data) {
    char[] chars = new char[data.length * 2];
    for (int i = 0; i < data.length; i++) {
        chars[i * 2] = HEX_DIGITS[(data[i] >> 4) & 0xf];
        chars[i * 2 + 1] = HEX_DIGITS[data[i] & 0xf];
    }
    return new String(chars);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-12T14:39:24.983

> String.format("%064X", new BigInteger(1, ByteArray);

在哪里

1.  0 - 零前导符号
2.  64 - 字符串长度
3.  X - 大写
4.  ByteArray - 要在其上运行此操作的 ByteArray

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-23T06:33:46.067

它被删除是因为前导零不重要，根据`BigInteger`. `27`和之间没有区别`000000000027`。

如果你想要一个特定的长度，你必须自己强迫它，比如：

```
output = ("00000000000000000000000000000000"+output).substring(output.length()); 
```

（虽然那是笨拙的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T14:54:25.793

使用以下代码替换删除的零：

```
MessageDigest digest = MessageDigest.getInstance("MD5");
digest.reset();
digest.update(output.getBytes());
byte[] outDigest = digest.digest();
BigInteger outBigInt = new BigInteger(1,outDigest);
output = outBigInt.toString(16);
    while (output.length() < 32){
    output = "0"+output;
    } 
```

循环将根据需要考虑尽可能多的前导零

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-02-11T17:33:31.217

```
MessageDigest m=MessageDigest.getInstance("MD5");
m.update(PlainText.getBytes(),0,PlainText.length());
String M1=new BigInteger(1,m.digest()).toString(16);      
return M1; 
```

# c++ - 编程密码功能模板

> ID：10275770
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:24:54.813
> 
> 标签：c++, string, passwords

您好，我正在尝试使用 c++ 创建一个密码函数，该函数最多可处理 12 个字符，并且可以调用三个单独的布尔函数：isUpper、isLower、IsPunctuation。

有什么建议或模板可以开始吗？我想把这部分排除在外，继续我的程序。谢谢你的帮助。

这是我到目前为止所拥有的：

```
#include<iostream.h>
#include<conio.h> 
#include<string.h> 

char enterPass(); 
void passFunc(); 

char enterPass() { 
    char numPass[12]; 
    char ch; 
    int i=0; 

    while((ch!='\r')||(ch!='\n')&&(i!=11)) { 
       cin>>ch; cout<<'*'; numPass[i]=ch; i++; 
    } 
    return numPass[12]; 
} 

void passFunc() { 
    char pass[12];

    cout<<"Enter password :- ";
    pass=enterPass(); 
    if(strcmp(pass,"myworld")==0) { 
        cout<<"Correct Password"; getch(); 
    } else { 
       cout<<"Wrong Password"; 
       exit(0); 
    } 
} 

int main() { 
    passFunc(); 
    getch(); 
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:47:37.927

您可能希望开始对代码进行轻微（教学）修改：

```
#include <iostream> 
using namespace std;

void enterPass(char* numPass) 
{ 
  char ch; 
  int i=0; 

  while ((ch!=10)&&(i!=13)) // ch=10 is "return"
  { 
    ch=(char)getchar(); //input will not be hidden
    numPass[i++]=ch;
  } 
  numPass[--i]='\0';    //need to form a `string`
}; 

void passFunc() 
{ 
  char pass[13]; 
  cout<<"Enter password :- "; 

  enterPass(pass); 
  if(strcmp(pass,"myworld")==0) 
  { 
    cout<<"Correct Password\n"; 
  } 
  else 
  { 
    cout<<"\n|"<<pass<<"|\n";
    cout<<"Wrong Password\n"; 
    exit(0); 
  } 
};

int main() 
{ 
  passFunc(); 
  return 0; 
} 
```

他们正在投票否决您的问题，因为很可能会有很多代码在做类似的事情。您可能想从[这个问题](https://stackoverflow.com/questions/6899025/hide-user-input-on-password-prompt)开始，然后沿着“可能重复的”列表进行挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T18:23:26.560

```
int verify_password()
{
char u_name[10];
char u_pwd[10];
int x=1;
cout<<"\n\n   Enter user name : ";
cin>>u_name;
cout<<"\n\n   Enter Password : ";
for(int i=0;i<=10;++i)
{
u_pwd[i]=getch();
cout<<"*";
if(u_pwd[i]==13)
{
u_pwd[i]='\0';
break;
}
}
x=strcmp(admin.user_name,u_name);
if (x==0)
{
    x=strcmp(admin.password,u_pwd);

}
if(x==0)
      cout<<"correct";
    else 
      cout<<"wrong";
} 
```

# php - 是否有用于 MySQL 模式映射和同步的工具。？

> ID：10275772
> 
> 赞同：1
> 
> 时间：2012-04-23T06:25:16.013
> 
> 标签：php, mysql, command-line-interface

我正在尝试改进处理 MySQL 模式和迁移的工作流程。当我从头开始一个项目时（大多数时候使用 PHP），我发现自己一直在更改我的数据库模式。我的意思是：您在这里和那里忘记了一个字段，或者您想删除一个未使用的字段。

我阅读了很多关于一些 ORM 的内容，但它们似乎添加了很多我并不真正需要的功能。开销不是一种选择。

所以，我对此“做梦”，但我不知道是否存在，或者是否有可能：

*   使用 YAML 编写模式，例如：

    ```
    Table:Posts
      id:int
      title:varchar(500)
      content:text 
    ```

*   运行生成模式的 cli 命令

    ```
    $ schema update 
    ```

*   对您的 yaml 进行更改（例如添加一个字段）：

    ```
    Table:Posts
      id:int
      title:varchar(500)
      content:text
      published:datetime 
    ```

*   再次运行 cli 命令，仅 ADD COLUMN（不会重新生成整个内容）

    ```
    $ schema update 
    ```

可能吗？有没有这样的工具？我可以编写 SQL，我可以编写迁移，但我认为它会是一个很棒的工具，可以“识别我的定义中的更改”，并自动同步数据库。

非常感谢！

# delphi - 在使用包编译的dll和没有它们编译的dll之间处理回调方法是否安全（Delphi）？

> ID：10275773
> 
> 赞同：3
> 
> 时间：2012-04-23T06:25:37.017
> 
> 标签：delphi, dll, callback

我正在使用 Delphi 2007，我有这种情况：

```
{ CommonUnit.pas }
type
  // there is a callback which I want to process
  TFooBar = procedure(Sender: IInterface) of object; stdcall;

  // there is an interface which is used by all modules
  IFoo = interface
  ['{0FAA4B2B-E82A-4A2A-B55F-C75EC53A1318}']
    procedure Bar(Callback: TFooBar); stdcall;
  end;

{ UnitInModuleCompiledWithoutPackages.pas }
type
  // there is a class which implements IFoo
  // and it's defined in Module One compiled without packages
  TFoo = class(TInterfacedObject, IFoo)
  public
    // implementation is ommited
    procedure Bar(Callback: TFooBar); stdcall;
  end;

{ UnitInModuleCompiledWithPackages.pas }
// there is a code in Module Two compiled with packages
type
  TSomeClass = class
  public
    // implementation is ommited
    procedure SomeMethod(Sender: IInterface); stdcall;
  end;

var
  SomeObject: TSomeClass; // assigned by somehow
  Foo: IFoo; // assigned by somehow

begin
  // ...
  Foo.Bar(SomeObject.SomeMethod); // so it is safe?
  // ...
end; 
```

我知道在我的情况下，如果它是这样声明的，当我试图传递一个对象引用时，这将是一个内存损坏`Foo.Bar`：

```
type
  IFoo = interface
  ['{0FAA4B2B-E82A-4A2A-B55F-C75EC53A1318}']
    // TSomeClass now declared in CommonUnit.pas
    procedure Bar(CallbackObject: TSomeClass); stdcall;
  end; 
```

这是因为`TSomeClass`模块一中的实现与模块二中的不同（不同的内存管理器等）。
但是方法引用呢？
我在 Embarcadero 的文档中没有找到任何可以解决这些问题的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T06:36:26.177

你的代码很好。当您传递方法指针 TFooBar 时，您传递了两个指针，一个函数指针和一个实例指针。当您调用该方法时，所有版本的 Delphi 都会执行完全相同的操作来调用该方法，因为调用约定强制执行精确的二进制接口。并且所有版本的 Delphi 都以相同的方式表示方法指针。

您关心的问题是：

1.  不同的内存管理器。这里没有问题，因为我们没有进行堆分配。
2.  不同编译器上的不同对象表示。这里没有问题，因为调用方法指针不依赖于对象表示。它依赖于代码指针和数据指针（在模块之间通过值传递）和调用约定（约定相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:17:40.260

正如 David Heffernan 已经回答的那样，使用方法指针很好。使用任何类型的“回调对象”而不是方法指针的唯一原因是：

*   IFoo 实例可能会在 Bar 返回后保留指针，在这种情况下，最好将回调描述为*event*，并且您应该传入一个*事件接收器*接口，以保证正确的生命周期管理。
*   IFoo.Bar 的实现可能会调用多种替代回调方法，在这种情况下，您还应该考虑传入单个接口（不是类实例，因为您声明自己）而不是多个方法指针。

# java - 我可以将上传的文件存储在 FileInputStream 对象中吗？

> ID：10275775
> 
> 赞同：0
> 
> 时间：2012-04-23T06:25:50.043
> 
> 标签：java, html, servlets

客户端应该上传一个 .ppt 文件，服务器应该保存并显示它。

我确实将 (request.getContent() ) 存储在 DatainputStream 对象中。

```
 DataInputStream pptFile = new DataInputStream(request.getInputStream()); 
```

但是我不能将这种类型的变量（DataInputStream）分配给库（org.apache.poi.hslf.usermodel.SlideShow）中的对象。

```
 DataInputStream pptFile = new DataInputStream(request.getInputStream());
 SlideShow ppt = new SlideShow ( pptFile ); 
```

我需要使用 pptFile 作为 FileInputStream 变量，我知道我可以轻松地从 FileInputStream 转换为 DataInputStream，但是我该如何做相反的事情呢？（从 DataInputStream 转换为 FileInputStream）

或者至少我可以将 (request.getContent) 存储在 FileInputStream 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:24:20.033

`DataInputStream`不是适合您要求的类（更仔细地阅读它的 Javadoc）。

您可以将请求存储在 a 中`ByteArrayInputStream`，然后将其提供给`SlideShow`对象。这可能会占用大量内存（PPT 文件的大小可能会达到数兆字节），但首先要让它发挥作用。然后，调查使用临时文件来保存上传，而不是将其保存在内存中。

# jquery - jQuery自动完成中的JSON解码

> ID：10275776
> 
> 赞同：1
> 
> 时间：2012-04-23T06:25:54.927
> 
> 标签：jquery, cakephp-2.0

我需要在 jQuery 自动完成功能中解析 JSON。我使用了以下代码。

```
jQuery("#name").autocomplete( '<?php echo HTTP_PATH.'/songs/sss'; ?>', {
multiple: true,
mustMatch: true,
matchContains: true,
autoFill: false,
dataType: "json",
}); 
```

我的蛋糕控制器是

```
public function sss(){
$condition = array('Poet.status'=>'3');
$poet_name = $this->Poet->find('list', array('conditions' => $condition));
//pr($poet_name); exit;
echo json_encode($poet_name);
$this->autoRender = false;
} 
```

我以简单数组的形式接收数据。方法

```
Array(
[1]=>Abc,
[15]=>Xyz
[56]=>MNK
[77]=>skl
[85]=>qw5s
) 
```

如何使用 jquery 解析返回的数组后的读取和格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:29:32.707

JQuery 自动完成需要标签和/或值，标签显示在哪里。除非需要在客户端解析 json，否则我会在服务器端进行解析（对我来说更简单）。

因为您可以插入以下内容：

```
$json_output = array();

foreach ($poet_name as $name) {
     $json_output[]['label'] = $name;
}

echo json_encode($json_output); 
```

通过在服务器端格式化，json 被预先格式化为 json 自动完成，使标记更小，从而更快地上传页面并减少混乱。

# unity-container - 需要帮助设置 Unity 拦截

> ID：10275778
> 
> 赞同：1
> 
> 时间：2012-04-23T06:26:46.700
> 
> 标签：unity-container, enterprise-library, enterprise-library-5, unity-interception

首先，我之前从来没有用过Unity...我想通过unity拦截的方式将Tracing/Logging引入我们的项目。
该项目相当大（〜30000个文件）。目标是每次我们尝试调用外部服务时跟踪性能/执行周期。遗憾的是我不能使用任何其他库。
为了熟悉这个概念是如何工作的，我构建了一个我在 MSDN 上找到的小程序；但是我对日志属性的拦截仍然没有触发。我确定我缺少一些配置或/和初始化。我很感激任何帮助。

***这是我的主程序：***

```
namespace calc
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                var t = new calc.Calculator.Calculator().Sub(5, 8);
            }
            catch (Exception ex)
            {
                System.Console.WriteLine(ex.Message);
            }
        }
     }
} 
```

***这是计算器类：***

```
namespace calc.Calculator
{
    public interface ICalculator
    {
        Int32 Sum(Int32 x, Int32 y);        
        Int32 Sub(Int32 x, Int32 y);
    }

    public class Calculator : ICalculator
    {        
        public Int32 Sum(Int32 x, Int32 y)
        {
            return x + y;
        }

        [NonNegativeCallHandler] // Intercept this method and run tracing on it
        public Int32 Sub(Int32 x, Int32 y)
        {
            return x - y;
        }
    }
} 
```

***这是我的呼叫处理程序：***

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Practices.Unity.InterceptionExtension;

namespace calc.Tracing
{
    public class NonNegativeCallHandler : ICallHandler
    {
        public IMethodReturn Invoke(IMethodInvocation input,
                                GetNextHandlerDelegate getNext)
        {
            // Perform the operation
            var methodReturn = getNext().Invoke(input, getNext);

            // Method failed, go ahead
            if (methodReturn.Exception != null)
                return methodReturn;

            // If the result is negative, then throw an exception
            var result = (Int32)methodReturn.ReturnValue;

            if (result < 0)
            {
                var exception = new ArgumentException("...");
                var response = input.CreateExceptionMethodReturn(exception);

                // Return exception instead of original return value
                return response;
            }

            return methodReturn;
        }

        public int Order { get; set; }
    }
} 
```

最后

****这是我的属性定义：***

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Practices.Unity.InterceptionExtension;
using Microsoft.Practices.Unity;

namespace calc.Tracing
{
     public class NonNegativeCallHandlerAttribute : HandlerAttribute
     {
         public override ICallHandler CreateHandler(IUnityContainer container)
         {
             return new NonNegativeCallHandler();
         }
     }
} 
```

我还需要添加什么以及在哪里（配置文件或内部构造函数等）才能使此代码正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:44:28.950

您的代码看起来来自[Dino Esposito 的这篇文章](http://msdn.microsoft.com/en-us/magazine/gg598927.aspx)。看起来您错过了配置部分（使用流畅代码或通过配置添加策略的段落）。

* * *

**更新**

你看过[MSDN 上的这个页面](http://msdn.microsoft.com/en-us/library/ff660932%28PandP.20%29.aspx#_Configuring_Policy_Injection)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:13:18.973

我找到了一种解决方案……我已经修改了我的程序类来注册容器……而且看起来根本不需要额外的配置。这是修改后的程序：

```
namespace calc
{
class Program
{
    static void Main(string[] args)
    {
        ICalculator iCal;
        try
        {

            iCal = ConfigurePolicyInjectionWithUnity();

            var t = iCal.Sub(8, 5);
        }
        catch (Exception ex)
        {
            System.Console.WriteLine(ex.Message);
        }
    }

    static ICalculator ConfigurePolicyInjectionWithUnity()
    {
        IUnityContainer container = new UnityContainer();

        container.AddNewExtension<Interception>();
        container.RegisterType<ICalculator, 
                           calc.Calculator.Calculator>().Configure<Interception>()
            .SetInterceptorFor<ICalculator>(new InterfaceInterceptor());

            // resolve
            return container.Resolve<ICalculator>(); ;
        }
    }
} 
```

现在，问题来了……假设我有大约 20 种不同风格的计算器，每个类都有大约 3-4 种方法可以跟踪。这些方法中的每一个都有***唯一的签名***。所以 3-4 个方法 x 20 个类 = ~80 个具有唯一签名的方法要被追踪。我的意思是我不能有一个接口来描述所有这些方法......从上面的解决方案中，至少在我的情况下，看起来我每个类都必须有一个接口才能实现拦截器。仅仅为了记录日志而引入 20-30 个新接口看起来不太优雅。在这种情况下，使用拦截和只使用一些辅助类来进行日志记录没有区别。我对么？

有没有其他方法可以在不定义接口的情况下使用拦截？我所需要的只是能够记录方法开始运行的时间以及它们完成执行的时间。

任何帮助或想法将不胜感激。

# .net - Webreference 未在 .Net 中返回数据

> ID：10275790
> 
> 赞同：0
> 
> 时间：2012-04-23T06:27:37.017
> 
> 标签：.net, soap, web-reference

第一次尝试使用网络服务。我正在使用 VS2005 并尝试调用 Web 服务功能。我将我的 webreference 添加到 WSDL，得到了我的自动生成代码。

我可以在没有错误/异常的情况下调用它，但我从服务功能中没有得到任何回报。当我运行我的代码并看到网络服务实际上发回了它应该发送的数据时，我对网络流量进行了数据包嗅探，我只是从未在下面的代码中收到它

```
 Dim proxy As New MyServer.MyService
    Dim response As New Object()
    response = proxy.getAllThings(Nothing) 
```

在 WSDL 中它说它需要 Object 作为参数并返回 Object。还尝试过：
Dim response As New Object 和
Dim response As String=""

响应始终为 Nothing/Null

嗅探到的数据显示了一个纯文本 SOAP 信封，这是我期望的“响应”包含的内容。

从 web 服务发送到我的计算机 IP 地址的嗅探数据：

```
 Server: Apache-Coyote/1.1
    Content-Type: text/xml;charset=utf-8
    Transfer-Encoding: chunked
    Date: Mon, 23 Apr 2012 08:26:01 GMT
    321
    <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><cmp:things xmlns:cmp="http://cmp.com"><cmp:thing><cmp:id>10</cmp:id><cmp:name>ASM</cmp:name></cmp:thing><cmp:thing><cmp:id>1</cmp:id><cmp:name>CHP</cmp:name></cmp:thing><cmp:thing><cmp:id>11</cmp:id><cmp:name>UDB</cmp:name></cmp:thing><cmp:thing><cmp:id>8</cmp:id><cmp:name>GKH</cmp:name></cmp:thing><cmp:thing><cmp:id>5</cmp:id><cmp:name>GGW</cmp:name></cmp:thing><cmp:thing><cmp:id>6</cmp:id><cmp:name>LRZ</cmp:name></cmp:thing><cmp:thing><cmp:id>7</cmp:id><cmp:name>MRN</cmp:name></cmp:thing><cmp:thing><cmp:id>2</cmp:id><cmp:name>KBV</cmp:name></cmp:thing><cmp:thing><cmp:id>3</cmp:id><cmp:name>CXE</cmp:name></cmp:thing></cmp:things></soapenv:Body></soapenv:Envelope>
    0 
```

这些嗅探到的数据从未出现在“响应”中

我以[http://msdn.microsoft.com/en-us/library/aa275675%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa275675%28v=sql.80%29.aspx)为例。

任何帮助将不胜感激。

**编辑：** “响应”应该包含来自网络服务调用结果的数据，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:35:12.453

在另一台计算机上安装 VS2010 express 并连接到服务，我收到一条错误消息。基本上，来自服务的响应与 WSDL 不匹配。不知道为什么 VS2005 没有给我任何错误。

它是由 java 客户端使用的生产服务，显然它不关心不匹配。

# shell - 如何在我的 linux 主目录中找到视图位置

> ID：10275794
> 
> 赞同：2
> 
> 时间：2012-04-23T06:27:51.950
> 
> 标签：shell, clearcase, clearcase-ucm, cleartool

我在下面提到的不同文件夹下的 Linux 主目录中有很多视图。

```
Home 
  CCVIEWS
  views
  Development
  testproject
  :
  :
  etc. 
```

现在我想以下面的格式列出我的 linux 目录中的所有 clearcase 视图以处理其他脚本。

```
user_test_Work1.vws
user_test_Work2.vws
user_dev_Work1.vws
user_newproject_Work.vws
user_cqfix.vws 
```

如何搜索我创建的主目录中的所有视图并在 shell 脚本中显示视图列表？

当前一次我可以显示一个文件夹视图，但我需要搜索并以上述格式显示所有视图。

我的视图只是动态视图而不是快照。我的问题是存储在多个目录中的视图。需要搜索我的 unix home dir 中的所有视图。现在我正在使用命令 cd ~/views ViewCount=ls ~/views 来完成这项工作。但这将列出一个目录中的视图。同样，我需要在所有目录中列出我的主目录中的所有视图。有没有办法搜索所有视图并列出视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:34:33.853

如果这些视图不在 下`/view`，则表示存在快照视图。
（不是网络视图，因为`cleartool`提到了，这意味着没有 CCRC）

正如“[在快照视图中查找文件的本地副本](https://stackoverflow.com/questions/7917295/find-local-copy-of-files-in-snapshot-view/7917396#7917396)”中所述，您无法仅从其标签中找到快照视图。
这意味着一个简单[`cleartool lsview -l`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lsview.htm)的 with some`grep`不会只从您的主目录中选择您的视图。
它会选择您的视图，无论您选择加载它们。

`user_cqfix.vws`是一个视图工作区存储。

最简单的解决方案是转到您的每个`HOME`直接子目录，然后执行`cleartool lsview -l -cview`命令。
视图的所有者（行“ `View owner`：...”）和视图存储路径（行“ `Global path`：...”）将在`cleartool`命令的输出中列出。

请注意，假设您的视图直接加载到您的`HOME`.
如果它们比直接子目录更深入，那么您需要对`HOME`.

最后，如果您需要将视图存储路径 ( ) 与加载快照视图的路径相关联，这是有意义`*.vws`的（因为 ClearCase 无法告诉您快照视图的根目录在哪里）。

如果您不需要根目录路径，那么一个简单的 cleartool lsview -l 将列出*所有*视图，您可以选择所需的视图。

另请参阅“[关于快照视图存储目录](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_storage_dirs_ssv.htm)”：如果您的所有视图都使用**相同的视图存储服务器**，那么您可以通过知道其公共根共享路径来简单地推断视图存储路径。

* * *

请注意，关于查找“快照视图”根目录，[该线程](http://www.ibm.com/developerworks/rational/archives/cciug/hypermail/0205/1190.html)提到：

> ClearCase 没有提供一个好的内置方法来识别快照视图的根工作目录。该信息存储在用户配置文件中。
> 在 Windows 上，快照视图只能被创建它们的主机上的 ClearCase 识别。这是因为工作目录信息本地存储在创建视图的机器上的用户配置文件（注册表）中。
> 如果您对特定用户的快照视图感兴趣，请使用以下命令查看注册表：

```
\HKEY_USERS\<SID>\Software\Atria\ClearCase\CurrentVersion\Workspaces 
```

> 其中`<SID>`是给定用户的基于文本的安全标识符。
> 通过适当的管理访问，也可以通过连接到远程注册表来访问此信息。通常，每台 PC 只有一个用户，要查找当前用户的快照视图目录，您只需使用：

```
\HKEY_CURRENT_USER\Software\Atria\ClearCase\CurrentVersion\Workspaces 
```

> 如果您将目录更改为那里列出的目录，您可以使用 ' `cleartool lsview -cview`' 来查找它是哪个视图。
> 
> 在 UNIX 上，**用户配置文件信息存储在 中`~/.ccase_svreg`**，并且由于主目录通常是共享的（在许多客户端上自动挂载），因此快照视图在任何有权访问工作目录的 ClearCase 客户端上都是可用的（在 ClearCase 意义上）。

话虽如此，请记住您可以多次复制快照视图（只需将在`view.dat`快照视图的根目录中找到的隐藏文件复制到任何其他目录中，然后：快照视图现在存在于两个不同的位置！

# c++ - 如何在 Qt 中检查 C++ 中的类型

> ID：10275795
> 
> 赞同：0
> 
> 时间：2012-04-23T06:27:52.320
> 
> 标签：c++, typechecking

我需要检查用户输入的输入类型，如果它不是所需的类型，我应该打印一条错误消息。我的代码是：

```
int ClassInput::inputInt(QString str)
{
    signed int l;
    std::cout << str.toStdString();
    std::cin>>l;

    while(!l)
    {
        eh.handleError(1);
        std::cin>>l;
        cin.clear ();
        cin.ignore (1000, '\n');
    }
    return l;
} 
```

但问题是在输入浮点值时它没有打印错误消息。此外，它将进入下一步并执行计算，就像输入正确的输入一样。

有时它会无限打印错误语句。请问谁能更正我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T15:43:09.197

我认为[typeinfo](http://www.cplusplus.com/reference/typeinfo/type_info/name/)是您正在寻找的。这可能是用户预期输入为 int 的示例代码。

```
std::cin>>l;
QString input = typeid(l).name();
if(input.compare("int")) continue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T16:16:02.993

我认为您的问题不是类型检查，而是值检查。所以`typeid`实际上并不是一个好的选择。

特别是关于您的问题的解决方案。您应该对输入添加更严格的值检查。将用户的输入存储在 int 变量中并不是一个好主意。因为如果用户键入一个float变量，它将被隐式转换为int。这就是为什么您的代码在输入浮点值时不打印错误消息的原因。但不会影响你后续的计算。

另一件事，如果输入不是数字，而是字符，0 将分配给您的输入变量。

为了稳健地检查输入值，您应该将输入变量的类型更改为`std:string`并检查字符串是否是合法输入。执行此操作的可能例程：

1.  检查是否有非数字。

2.  根据您的程序需要检查它是否是合法数字。

因此，不要仅仅编写粗略`!l`检查，而是编写另一个单独的检查函数并在此处调用它。

# administration - Documentum -Dynamic- 用户管理

> ID：10275797
> 
> 赞同：1
> 
> 时间：2012-04-23T06:27:58.897
> 
> 标签：administration, user-management, documentum, profiles

在我们的组织中，根据团队分配为用户分配组成员身份。这导致在我们的文档中称为“配置文件”的组集。

我的问题是：管理员（首选非 IT）如何尽可能高效地将用户分配到一组组？

请记住，由于命名约定，组名称是特定的，但动态取决于当前项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:02:49.123

最简单的方法是授予管理员或经理，创建组权限（用户帐户设置）并让他们管理谁在哪些组中。

假设您的组织已经在使用用户和组管理系统，然后调查 Documentum 是否可以同步用户和组信息。根据您的 Documentum 版本，它可以从 LDAP 或 Active Directory 系统同步到用户和组信息。

# ruby-on-rails - Gem::RemoteFetcher::FetchError 与安装捆绑器 gem

> ID：10275800
> 
> 赞同：1
> 
> 时间：2012-04-23T06:28:26.277
> 
> 标签：ruby-on-rails, rubygems, gem

地狱所有，

从最近几天开始，我在安装一些 gem 时遇到了一个奇怪的问题。我尝试安装捆绑器 gem

```
Fetching: bundler-1.1.3.gem ( 18%)ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    too many connection resets (http://cachefly.mirrors.rubygems.org/gems/bundler-1.1.3.gem) 
```

我检查了我的互联网连接，它与其他下载一起工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:44:52.517

这可能是 ruby​​gems 网站遭到抨击。尝试使用`wget`或直接下载 gem 文件`curl`，然后直接从 gem 文件安装，例如：

```
$ gem install <path_to_gem_file.gem> 
```

# unit-testing - 如何模拟从控制器测试类注入域类的服务？

> ID：10275803
> 
> 赞同：7
> 
> 时间：2012-04-23T06:28:38.350
> 
> 标签：unit-testing, grails, spring-security, mocking

我有一个域类，它扩展了一个抽象类，它注入了[spring 安全核心插件](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)服务。

```
class Extra extends WithOwner {
    String name
}

abstract class WithOwner {
    transient springSecurityService
    User user

    def getCurrentUser() {
        return springSecurityService.currentUser
    }

    def beforeValidate() {
        if(!user) {
             user = getCurrentUser()
        }
    }

    Boolean isLoggedUserTheOwner(){
        return (user?.id == getCurrentUser()?.id)
    }
} 
```

我想实现一个控制器测试。

```
@TestFor(ExtraController)
@Mock([Extra, User, UserRole, Role])
class ExtraControllerTests {

    void testEdit() {
        def utils = new TestUtils()
        def user1 = utils.saveUser1()

        populateValidParams(params)
        def extra = new Extra(params)
        extra.user = user1
        assert extra.save() != null

        params.id = extra.id

        def model = controller.edit() // Line 69
        assert model.extraInstance == extra
    }
} 
```

如果我运行上述测试，我会得到：

test-app ExtraController.testEdit --unit --echoOut | 运行 1 个单元测试... 1 of 1 --testEdit 的输出-- | 失败：testEdit(com.softamo.movi​​lrural.ExtraControllerTests) | java.lang.NullPointerException：无法在 com.softamo.movi​​lrural.WithOwner.getCurrentUser(WithOwner.groovy:8) 的 com.softamo.movi​​lrural.WithOwner.isLoggedUserTheOwner(WithOwner.groovy:18) 的空对象上获取属性“currentUser” com.softamo.movi​​lrural.ExtraController.edit(ExtraController.groovy:39) 在 com.softamo.movi​​lrural.ExtraControllerTests.testEdit(ExtraControllerTests.groovy:69) | 完成 1 个单元测试，1 个在 853 毫秒内失败

我曾尝试像这样模拟安全服务但没有成功：

```
Extra.metaClass.springSecurityService = new MockSpringSecurityService(user1) 
```

甚至嘲笑该方法

```
Extra.metaClass.getCurrentUser = { return user1 } 
```

知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:51:29.233

Grails 2.x 支持使用'defineBeans' 闭包为测试环境定义spring bean。它支持控制器等中的依赖注入，我不确定它是否也适用于域对象。从理论上讲，它应该在域对象/控制器/服务之间保持一致

请参阅[http://grails.org/doc/latest/guide/single.html#testing](http://grails.org/doc/latest/guide/single.html#testing) -“测试 Spring Beans”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T13:55:32.170

我发现了一篇关于这个问题的好文章：[Inject springSecurityService Into Grails Domain Class for Controller Unit Testing](http://www.block-consult.com/blog/2011/08/17/inject-spring-security-service-into-domain-class-for-controller-unit-testing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T07:31:49.857

这应该有效：

```
controller.springSecurityService = new SpringSecurityService() 
```

如果要在此服务中模拟 getCurrentUser 方法：

```
controller.springSecurityService.metaClass.getCurrentUser = { -> return user1 } 
```

我不确定你是否可以`->`在上面的一行中省略，所以测试一下。如果您想在使用后或另一个测试用例之前清除此模拟方法，请使用：

```
controller.springSecutiryService.metaClass = null 
```

# c++ - std::thread 和 std::endl 没有预期的输出

> ID：10275805
> 
> 赞同：1
> 
> 时间：2012-04-23T06:28:51.917
> 
> 标签：c++, c++11

我正在尝试一些例子，`C++11 threads`我看到了一些令人惊讶的结果。使用以下代码

```
#include <iostream>
#include <thread>

void hello() {
    std::cout << "Hello concurrent world " << std::endl;
}
void do_something() {
    std::cout << "[background_task] --> [ do_something ]" << std::endl;
}
void do_something_else() {
    std::cout << "[background_task] --> [ do_something_else ]" << std::endl;
}
class background_task {
public:
    void operator()() const     {       
        do_something();
        do_something_else();
    }
};

int main ( int argc, char **argv) {
    std::thread t(hello);
    background_task bt;
    std::thread fn_obj_th(bt);
    t.join();
    fn_obj_th.join();
} 
```

输出如下

```
Hello concurrent world [background_task] --> [ do_something ]

[background_task] --> [ do_something_else ]
Press any key to continue . . . 
```

如果我替换 `std::cout << "Hello concurrent world " << std::endl;` 为 `std::cout << "Hello concurrent world \n";`

结果是

```
Hello concurrent world
[background_task] --> [ do_something ]
[background_task] --> [ do_something_else ] 
```

为什么`std::endl`我没有得到预期的输出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T06:32:26.943

这：

```
std::cout << "Hello concurrent world " << std::endl; 
```

是两个*独立*的输出。虽然`std::cout`是线程安全的，但这并不意味着它的两次单独调用保证是原子的。单个输出是原子的，但不是两个。

如果您希望保证以原子方式输出特定表达式，则需要在`std::cout`.

# iphone - 有人可以解释下面的符号吗？

> ID：10275809
> 
> 赞同：1
> 
> 时间：2012-04-23T06:29:22.623
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

我一直在尝试使用 CAP(^) 字符和函数来理解目标 C 的符号。

有人可以告诉我这意味着什么以及它的用途。

谢谢杰

例如：`^(void)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T06:30:58.490

此表示法用于 iOS 中的块。您可以查看更多详细信息 - [http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T06:32:44.430

它们被称为“块”，是 Objective C 的闭包。

更多关于一般闭包的信息：[http ://en.wikipedia.org/wiki/Closure_%28computer_science%29](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)

有关客观 C 块的更多信息：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html)

# cocoa-touch - 调用 closeWithCompletionHandler 时出现异常：在 UIDocument 上多次调用

> ID：10275810
> 
> 赞同：1
> 
> 时间：2012-04-23T06:29:34.940
> 
> 标签：cocoa-touch, uidocument

UIDocument 的单个实例不能多次打开和关闭吗？似乎我可以打开、关闭和重新打开一个文档，但是当我再次尝试调用 closeWithCompletionHandler: 时，我得到一个异常：

`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'closeWithCompletionHandler called while document is already closing'`

在调用之前，documentState 是 Normal。

希望我只是忽略了一些明显的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:53:05.520

与其使用 openWithCompletionHandler 重新打开已关闭的文档，不如创建一个新的 UIDocument 子类实例并首先使用 initWithFileURL 对其进行初始化，然后再打开它。

# java - DefaultHTTPClient 抛出未知异常

> ID：10275814
> 
> 赞同：0
> 
> 时间：2012-04-23T06:30:04.917
> 
> 标签：java, android, httprequest

我正在尝试检索 POST 对 Android Java 环境中 URL 的响应：

这是我的代码：

```
 try{
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    ResponseHandler <String> resonseHandler = new BasicResponseHandler();
                    HttpPost postMethod = new HttpPost("http://myurl.com/post.php");
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

                    JSONObject jsonObject = new JSONObject();
                    jsonObject.put("data1", "OK");
                    jsonObject.put("data2", "OK2");

                    nameValuePairs.add(new BasicNameValuePair("jsonString", jsonObject.toString()));
                    postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    String response = httpClient.execute(postMethod,resonseHandler);

                    System.out.println(response);
            }
            catch(Exception e)
            {
                System.out.println("DIED");
            } 
```

果然，它返回“DIED”。如果我更改`System.out.println("DIED");`为：`System.out.println(e.getMessage())` 然后我的应用程序崩溃。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:33:10.360

使用`android.util.Log`Logger 类..

```
catch(Exception e)
  {
     Log.e("Exception:",e.toString());
      // or  
     e.printStackTrace();
  } 
```

# c# - CodeEval 挑战：Grid Walk

> ID：10275817
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:30:36.120
> 
> 标签：c#, java, c++

CodeEval 有一个挑战，称为 Grid Walk。

编程语言并不重要。

我试图破解它，我想我做到了，因为根据纸上的绘图，我的程序给我的较小数字（9 和 10）的答案是正确的。

正如我的程序所说，最终结果应该是 111005，但 CodeEval 似乎并不同意这一点。

谁能指出我正确的方向？正确答案是什么？一个提示？

[挑战](http://www.codeeval.com/open_challenges/60/)：_

> 有一只猴子可以在平面网格上四处走动。猴子可以一次向左、向右、向上或向下移动一个空间。也就是说，猴子可以从 (x, y) 到 (x+1, y)、(x-1, y)、(x, y+1) 和 (x, y-1)。x坐标的绝对值的位数之和加上y坐标的绝对值的位数之和小于或等于19的点对猴子来说是可访问的。例如，点 (59, 79) 不可访问，因为 5 + 9 + 7 + 9 = 30，大于 19。另一个示例：点 (-5, -7) 可访问，因为 abs(-5) + abs(-7) = 5 + 7 = 12，小于19。如果猴子从(0, 0)开始，包括(0, 0)本身，可以访问多少个点？

还有一张我的程序认为猴子可以在哪里行走的图片（绿色区域），X 轴和 Y 轴从 -298 到 298，(0,0) 是中心。

![不是解决方案](../Images/6158edb69fed0b482ec2edfc8b615656.png)

**更新：**

我现在有解决方案。当我通过轴构建点时，我要求之前的 y 或之前的 x 是好的，所以这让我失去了所有额外的无法到达的位置，只剩下这个，正确的数量：102485

![解决方案](../Images/c90d40ea4d435381a004eecd36a8c3e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:57:44.323

在您找到的形状上从 (0,0) 执行泛洪填充，您将获得从 (0,0) 可访问的所有点。

# linux - 提取文件名的一部分

> ID：10275818
> 
> 赞同：0
> 
> 时间：2012-04-23T06:30:37.367
> 
> 标签：linux, replace, sed, extract, filenames

我有多个看起来像的文件名；

com.test. 应用程序**1.deb**

com.heavy.test。应用程序**2.deb**

com.maybe-test。应用程序**3.deb**

com.crazy。**应用程序 4** .deb

我只想得到粗体字符串。到目前为止，我有这个，

```
name=$(echo $file | sed 's!\(*.\)\(.*\).deb!\2!') 
```

编辑：我在同一个目录中有其他文件，它们的名称类似于；

com.公司。**名称**_1.0.2_arm.deb

目前，我的代码看起来像；

```
for file in *.deb; do
 name=$(echo "$file" | sed 's/^.*\.\([^.][^.]*\)\.deb$/\1/')
 echo $name
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:36:30.063

您需要负匹配，以便可以从要捕获的字符串部分中排除点。我还锚定了字符串，这样你就不会对像`com.deboop.foo.deb`.

```
name=$(echo "$file" | sed 's/^.*\.\([^.][^.]*\)\(_[-.0-9][-.0-9]*_arm\)*\.deb$/\1/') 
```

（编辑以反映评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:37:10.007

```
$> cat text
com.test.app1.deb
com.heavy.test.app2.deb
com.maybe-test.app3.deb
com.crazy.app-4.deb

$> sed -r "s/.*\.([^\.]*)\.deb$/\1/" ./text
app1
app2
app3
app-4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T07:16:49.093

```
pearl.238> cat file1
com.test.app1.deb
com.heavy.test.app2.deb
com.maybe-test.app3.deb
com.crazy.app-4.deb
pearl.239> awk -F. '{print $(NF-1)}' file1
app1
app2
app3
app-4
pearl.240> 
```

您应该在脚本中使用以下内容。

```
name=$(echo $file |awk -F. '{print $(NF-1)}') 
```

# c# - 从跟踪中获取 ElapsedTime

> ID：10275820
> 
> 赞同：0
> 
> 时间：2012-04-23T06:30:49.750
> 
> 标签：c#, enterprise-library, logging-application-block

我正在尝试MS Enterprise Library - Logging Application 块[的实验室](http://www.microsoft.com/download/en/details.aspx?id=6932)。

通过添加跟踪，我在“平面文件”侦听器上收到一条“消息”：“***消息：结束跟踪：方法 'EnoughPI.Calc.Calculator.Calculate' 中的活动 '6455494c-0602-45c9-8a10-052cdd39e5cb' 767616631287998 滴答（经过时间：10.292 秒）*** "

我是否也可以从跟踪中“单独”获得经过的时间，或者说经过的抽动。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:35:09.660

API 不会在公共接口上公开计时信息。您可以使用反射来获取信息，但这样做的后果自负（因为它依赖于可能会更改的内部实现）：

```
using (Tracer tracer = new Tracer("General"))
{
    FieldInfo fieldInfo = typeof(Tracer).GetField("stopwatch", BindingFlags.NonPublic | BindingFlags.Instance);
    var sw = fieldInfo.GetValue(tracer) as Stopwatch;
    Console.WriteLine(sw.ElapsedMilliseconds);
} 
```

另一种选择是编写您自己的 Tracer 实现（基于企业库代码），它公开您感兴趣的任何属性。

# sql - 在具有单选和多选问题的在线测试中查找正确回答的问题

> ID：10275826
> 
> 赞同：1
> 
> 时间：2012-04-23T06:31:16.843
> 
> 标签：sql, oracle11g

查看表格：[http ://dl.dropbox.com/u/10356431/Shared/screen.png](http://dl.dropbox.com/u/10356431/Shared/screen.png)

请帮助我构建一个 SQL 以在特定 test_id 的在线测试中找到正确回答的问题。

我已经构建了一个。

```
SELECT COUNT(UNIQUE d.question_id) AS CORRECT
FROM test_response d,
     question_response r
WHERE d.response_id   = r.question_resp_id
AND r.correct_response_flag != 'N'
AND d.test_id = '10113' 
```

但问题是，虽然它会准确地找到单选题，但如果它是多选题，假设 4 个回答中有 2 个是正确的，则选择一个将被视为正确回答的问题，这是不准确的。

逻辑：生成问题集并显示给用户。每个测试都有自己的 ID，使用特定的问题集。用户选择的响应存储在`test_response`表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:25:59.280

**更新：这不适用于 OP 的表格设计，其中为 4-answer 问题创建了 2 行**

我认为您需要首先检查每个问题是否所有答案都正确，然后计算没有错误答案的问题：

```
select
  count(*) - count(incorrect_answers_per_question) correct
from (
  select
    d.test_id,
    d.question_id,
    sum(case when r.correct_response_flag = 'N' then 1 end) incorrect_answers_per_question
  from test_response d
  join question_response r on d.response_id = r.question_resp_id
  where d.test_id = '10113'
  group by d.test_id, d.question_id
) 
```

# symfony1 - 使用 sfGuardDoctrine 插件注册

> ID：10275828
> 
> 赞同：0
> 
> 时间：2012-04-23T06:31:59.030
> 
> 标签：symfony1, doctrine

我正在使用 symfony 建立一个求职网站。该站点将具有注册、登录和用户资料。我找到了 sfGuardDoctrine 插件并尝试将它与我的项目集成。

我在正确的轨道上吗？或者是否有任何其他插件可用于将上述功能与教义集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:21:19.073

是管理用户的最佳选择。

然后你有 2 个其他商品插件来改进 sfGuard：

*   “每次 sfGuardUser 登录时都会提供一个附加表来存储信息。”：[http ://www.symfony-project.org/plugins/sfDoctrineGuardLoginHistoryPlugin](http://www.symfony-project.org/plugins/sfDoctrineGuardLoginHistoryPlugin)
*   “允许受 sfDoctrineGuardPlugin 保护的站点的用户创建新帐户，并通过电子邮件对其进行验证。帐户创建和密码更改都需要电子邮件验证，以减缓垃圾邮件发送者的速度。”：[https ://github.com/fizyk/sfForkedDoctrineApplyPlugin](https://github.com/fizyk/sfForkedDoctrineApplyPlugin)

# .net - 达到最大 WCF 连接数时会发生什么？

> ID：10275836
> 
> 赞同：3
> 
> 时间：2012-04-23T06:32:22.667
> 
> 标签：.net, wcf, concurrency

我们有一个服务 (A)，它调用另一个 WCF 服务 (B)。

服务 B 的默认值为

```
<serviceThrottling 
      maxConcurrentCalls="16"
      maxConcurrentSessions="10" 
      maxConcurrentInstances="26" /> 
```

服务 A 最多可以生成 150 个线程，其中一些线程可以调用服务 B。

如果服务 A 以超过最大并发连接数调用服务 B 会发生什么？

服务 B (WCF) 是否将它们丢弃或将它们存储在队列中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:53:33.700

客户端被阻塞，直到连接可用。

当然，这种行为表明存在另一个队列，持有等待连接请求。我假设队列会有自己的阈值，所以一旦有最大数量的等待连接，就会丢弃更多传入的请求。（这只是我的猜测，我不知道这个理论队列是在哪里配置的。......有人吗？）。

实际上，我在自动化测试中遇到了一个问题，即连接没有被丢弃，这最终导致我的系统挂起，因为达到了阈值。

[https://stackoverflow.com/a/4031284/25216](https://stackoverflow.com/a/4031284/25216)

# java - 如何在我的应用程序的 java fx 2.0 中更改舞台标题栏上的图标

> ID：10275841
> 
> 赞同：14
> 
> 时间：2012-04-23T06:32:51.947
> 
> 标签：java, javafx, javafx-2, javafx-8, stage

我试过了

```
 stage.getIcons().add(new Image("attuncore.jpg")); 
```

但我不知道出了什么问题..

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-04T16:36:02.673

初学者的完整程序:) 这个程序设置了堆栈溢出图标。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class StackoverflowIcon extends Application {

    @Override
    public void start(Stage stage) {
        StackPane root = new StackPane();
        // set icon
        stage.getIcons().add(new Image("/path/to/stackoverflow.jpg"));
        stage.setTitle("Wow!! Stackoverflow Icon");
        stage.setScene(new Scene(root, 300, 250));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

**输出截图**

![JavaFX 截图](../Images/de3ff6b5b5d9401782c42a1d0cca3ece.png)

> 为 JavaFX 8 更新

无需更改代码。它仍然可以正常工作。在 Java 1.8(1.8.0_45) 中测试和验证。路径可以设置为本地或远程两者都支持。

```
stage.getIcons().add(new Image("/path/to/javaicon.png")); 
```

或者

```
stage.getIcons().add(new Image("https://example.com/javaicon.png")); 
```

![在此处输入图像描述](../Images/c2fb0e0b83e3ceb8fb863418aeefcfc6.png)

希望能帮助到你。谢谢！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T20:22:47.240

您可以像这样从类路径加载图像：

```
new Image(XYZ.class.getResourceAsStream("/xyz.png")) 
```

其中 XYZ 是某个类名（可能是您从中加载图像的类名）， xyz.png 是图像文件的名称，放在类路径中包含的目录（或 JAR 文件）中。

如果您想将图像放在源文件旁边，则必须省略 / 字符。然后，您的 IDE 需要配置为将资源（如 *.png）从 src 复制到 bin 目录。但这应该是标准行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-22T13:38:48.860

对于那些有问题的人：

> 无效的 URL：无效的 URL 或找不到资源

最好的解决方案是制作新的包，即 image.icons 并将您的 .png 图像移到那里。然后你只需要写：

```
Image image = new Image("/image/icons/list.png");
primaryStage.getIcons().add(image); 
```

我希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-02T14:09:17.160

不要忘记进行导入

```
import javafx.scene.image.Image;

Image icon = new Image(getClass().getResourceAsStream("myicon.png"));
stage.getIcons().add(icon); 
```

替换`"myicon.png"`为您的图标。在这种情况下，它与您的 java 类位于同一文件夹中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T08:47:16.007

您的图像尺寸正确吗？Javadoc 指出：

> 公共最终 ObservableList getIcons()
> 
> 获取要在窗口装饰和最小化时使用的图标图像。图像应该是同一图像的不同尺寸，并且将选择最佳尺寸，例如。16x16, 32,32。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T09:05:46.960

我通过将独立工作目录的属性设置为放置我的主要和图像的包找到的解决方案。

# javascript - 数据验证javascript

> ID：10275846
> 
> 赞同：0
> 
> 时间：2012-04-23T06:33:20.127
> 
> 标签：javascript, validation

我的表格有一些问题（验证）。当没有给出数据时，它们不会给出任何错误。我该如何解决这个问题？这只是我的代码的一部分。对于字母、数字和电子邮件类型，它可以完美运行。谢谢您的帮助。

```
function onFormSubmit(form_element){
    var checked = 0;
    if (form_element.gender[0].checked == false && form_element.gender[1].checked == false){
        alert("Please choose your Gender:Male of Female");
        return false;
    }

    if (form_element.make.selectedIndex == 0){
        alert("Please select your rating interval.");
        form_element.make.focus();
        return false;
    }

    if (form_element.click.checked == false){
        alert("Please confirm your registration!");
        false;
    }

    return true;
} 
```

html

```
<form class="contact_form" action="" method="post" name="contact_form" onsubmit="return onFormSubmit(this)">
    <ul>
        <li>
            <h2>Sign-Up Form</h2>
        </li>
        <li>
            <label for="Male">Male:</label>
            <input type="radio" name="gender" value="m" /> &nbsp; Female:<input type="radio" name="gender" value="f" />
            <br />
        </li>
        <li>
            <label for="National Rating">National Rating:</label>
            <select name="make">
                  <option selected>-- SELECT --</option>
                  <option> Below 1200 </option>
                  <option> 1200 - 1500 </option>
                  <option> 1500 - 1800 </option>
                  <option> 1800 - 2100 </option>
                  <option> Above 2100 </option>
            </select><br />
        </li>
        <li>
            <input type="checkbox" name="click" value="regist"> I confirm my registration.
            <br />
        </li>
        <li>
            <button class="submit" type="submit">Submit</button>
        </li>
    </ul>
</form>
<div id="error_message" style="color:#ff0000;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:49:11.803

在这个测试中：

```
> if (form_element.click.checked == false){
>           alert("Please confirm your registration!");
>           false; 
```

你遗漏了一个`return`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:36:34.250

根据您的函数名称，我会说您在 onSubmit 期间调用它？大多数浏览器在 onSubmit 期间不显示警报。我建议先进行验证，然后提交数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:53:31.443

只需附加到`onclick`事件中，它就可以工作：

```
<form class="contact_form" action="" method="post" name="contact_form" onclick="onFormSubmit"> 
```

# asp.net - ASP.NET：使用 ContentPlaceHolders 处理身份验证

> ID：10275847
> 
> 赞同：1
> 
> 时间：2012-04-23T06:33:22.060
> 
> 标签：asp.net, authentication, master-pages, contentplaceholder

我在我的 ASP.NET Web 应用程序中设置了自己的身份验证系统，并且我正在使用 ContentPlaceHolders 来确定向用户显示哪些内容，具体取决于他们是否已登录以及他们的查看权限是什么。现在，我的母版页中有 3 个 ContentPlaceHolder，它们都占据相同的位置，最初都设置为 Visible="false"; 一种用于已注销的用户，一种用于已登录但未经管理员验证的用户，一种用于已登录并经过验证的用户。我的母版页代码隐藏中的 OnInit 覆盖调用数据库以确定应使哪个占位符可见。

我的工作假设是因为 ContentPlaceHolder 和 Content （在内容页面中）在页面被获取时被合并，并且任何不可见的占位符都不会与内容页面中它们关联的 Content 控件合并。

我担心这个系统的安全性。如果在页面初始化时相关占位符不可见，我可以安全地假设未经身份验证的用户完全无法访问内容页面中的块吗？

我基本上是用它来模仿 ASP.NET 的内置身份验证系统的功能，它通过使用 AnonymousTemplate 和 LoggedInTemplate 来隐藏和显示内容（在任何人建议之前，我不想使用 ASP.NET 的内置身份验证） .

有没有更好的方法来处理这个问题，或者我的系统应该可以正常工作吗？

# asp.net-mvc-3 - 实体框架 4.1 一个实体对象不能被多个IEntityChangeTracker实例引用

> ID：10275848
> 
> 赞同：0
> 
> 时间：2012-04-23T06:33:22.310
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我已经阅读了许多与此错误相关的答案，我也得到了一些与我的问题相近的答案，但我无法追踪我在这里做错了什么

我有一个类通用存储库

```
public abstract class GenericRepository<TC,T>:IGenericRepository<T> where T:class where TC:ObjectContext , new()
{
    private TC _entities = new TC();
    public TC Context
    {

        get { return _entities; }
        set { _entities = value; }
    }
    public virtual IQueryable<T> GetAll()
    {

        IQueryable<T> query = _entities.CreateObjectSet<T>();
        return query;
    }
    public virtual void Add(T entity)
    {
        _entities.CreateObjectSet<T>().AddObject(entity);
    }
    // save,update,insert etc etc
} 
```

我的存储库类是

```
public class MenuRepository:GenericRepository<mbsEntities,menu>,IMenu
{
    public menu GetMenu(int id)
    {
        return GetAll().FirstOrDefault(x => x.menu_id == id);
    }
    public bool CreateMenu(string menuName, int menuLevel, string menuUrl, int menuParent,int menuPosition,int roleId)
    {
        if(!Profile.IsInRole(Enums.Enumerations.Roles.Admin))
            return false;
        var menu = new menu()
                       {
                           menu_name = menuName,
                           menu_level=menuLevel,
                           menu_url = menuUrl,
                           menu_parent = menuParent,
                           menu_position = menuPosition,

                       };
        var roleRepository = new RoleRepository();
        var role = roleRepository.GetAll().FirstOrDefault(x => x.id == roleId);
        menu.traffic_role.Add(role);
        try
        {
            Add(menu);      // here im getting error “An entity object cannot be referenced by multiple instances of IEntityChangeTracker”
            Save();
        }
        catch (Exception)
        {
            return false;
        }
        return true;
    }
} 
```

我走错路了吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:51:01.530

您的“MenuRepository”和`RoleRepository`存储库使用不同的上下文。在查询之前设置' 的上下文`RoleRepository`以使用' 的上下文。`MenuRepository`

```
public class MenuRepository:GenericRepository<mbsEntities,menu>,IMenu
{
    public menu GetMenu(int id)
    {
        return GetAll().FirstOrDefault(x => x.menu_id == id);
    }
    public bool CreateMenu(string menuName, int menuLevel, string menuUrl, int menuParent,int menuPosition,int roleId)
    {
        if(!Profile.IsInRole(Enums.Enumerations.Roles.Admin))
            return false;
        var menu = new menu()
                       {
                           menu_name = menuName,
                           menu_level=menuLevel,
                           menu_url = menuUrl,
                           menu_parent = menuParent,
                           menu_position = menuPosition,

                       };
        var roleRepository = new RoleRepository();

        roleRepository.Context = Context;

        var role = roleRepository.GetAll().FirstOrDefault(x => x.id == roleId);
        menu.traffic_role.Add(role);
        try
        {
            Add(menu);      // here im getting error “An entity object cannot be referenced by multiple instances of IEntityChangeTracker”
            Save();
        }
        catch (Exception)
        {
            return false;
        }
        return true;
    }
} 
```

该设计存在抽象漏洞。对存储库使用构造函数注入来注入上下文。您可以在一定程度上防止意外创建多个上下文。使用依赖注入框架并使依赖项显式化，而无需在方法内实例化它们。

```
public abstract class GenericRepository<TC,T>:IGenericRepository<T> where T:class where TC:ObjectContext , new()
{
    protected GenericRepository(TC context)
    {
       Context = context;
    }

    public TC Context
    {
        get; protected set;
    }

} 
```

# android - java.lang.NoClassDefFoundError：org.jbox2d.collision.AABB

> ID：10275853
> 
> 赞同：0
> 
> 时间：2012-04-23T06:34:23.267
> 
> 标签：android, eclipse-plugin

我正在尝试运行这个项目但遇到错误，项目源在这里 [http://www.bayninestudios.com/2010/04/box2d-on-android/](http://www.bayninestudios.com/2010/04/box2d-on-android/)

但是这段代码是在我的朋友 pc 中运行的。所以我不知道错误在哪里。

我使用 eclipse 版本：Helios Service Release 2 和我朋友使用的一样。并设置编译器合规级别：1.6。

这不仅是我遇到此类错误的一个项目，而且还有其他一些完全由我朋友的电脑运行但不在我的电脑上运行的项目。

任何伙伴都面临这种类型的错误。

**LogCat 错误如下。**

```
FATAL EXCEPTION: main java.lang.NoClassDefFoundError: org.jbox2d.collision.AABB
at com.bayninestudios.box2ddemo.PhysicsWorld.createWorld(PhysicsWorld.java:28)
at com.bayninestudios.box2ddemo.ClearRenderer.<init>(Box2dDemo.java:224)
at com.bayninestudios.box2ddemo.ClearGLSurfaceView.<init>(Box2dDemo.java:99)
at com.bayninestudios.box2ddemo.Box2dDemo.onCreate(Box2dDemo.java:44)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
at android.app.ActivityThread.access$1500(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4277)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Force finishing activity com.bayninestudios.box2ddemo/.Box2dDemo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:36:56.853

检查您的**jar**文件是否在**lib**文件夹中，如果它创建另一个文件夹作为**libs**并放置所有 jar 文件。

**删除 lib 文件夹并再次从****libs**中添加项目中的所有 jars

构建路径-> 配置构建路径-> 从左窗格中选择 Java 构建路径-> 添加 Jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:40:47.013

步骤1：如果代码来自现有项目，请尝试通过“new-other-Android-android project from existing code”而不是“import-existing projects into workspace”导入项目。第一种方法可以在项目中创建一个目录“Android Dependencies”，但第二种方法可能不会。

步骤2：在项目中创建一个新目录，例如“lib”，将jbox2d.jar文件复制到那里。然后，通过项目的右键菜单“properties-java build path-libraries-add jars”将jar添加到你的项目中（当然是先删除错误）。清理项目并尝试运行。

第3步：如果通过以上两个步骤仍然不行。在项目下创建一个不同于之前的名为“lib”的**新目录，您可以将其命名为“libs”。**然后将jar文件复制到“libs”，删除“lib”并将“libs”下的jar引入项目，就像step2一样。就我而言，它是通过新目录**重新引入jar 来工作的。**

无论如何，应该有“Android Dependencies”目录，jbox2d.jar 和 annotations.jar 应该最终在该目录下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:58:14.620

我认为您的项目未运行的原因是因为在`org.jbox2d.collision.AABB`.Class`AABB`中找不到.所以请检查您是否在项目中正确地为jar提供了构建路径。检查该`jbox2d-2.0.1-full.jar`路径是否在库的java构建路径中给出。

# iphone - 为 UIImage 着色 CGPoint

> ID：10275855
> 
> 赞同：0
> 
> 时间：2012-04-23T06:34:32.340
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

我有一个 UIImage，我想通过设置 RGBA 来更改一些像素颜色。对于我需要更改的所有像素，我都有 CGPoints。如何通过设置 RGBA 值来更改颜色？

如果无法更改 UIImage 像素的颜色，则可以在包含图像的 UIImageView 上进行绘制，但我需要它表现得非常好，因为我将多次这样做。

我怎样才能做到这一点？

**编辑：**

我想出了一个解决我的问题的方法。这会将 CGPoint 着色为红色：

```
-(void)pixelate:(CGPoint)point
{
    CGImageRef inImage = self.drawImage.image.CGImage;
    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
    if (cgctx == nil) { NSAssert(NO,@"Context shouldn't be nil!"); }

    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}}; 

    CGContextDrawImage(cgctx, rect, inImage); 

    unsigned char* data = CGBitmapContextGetData(cgctx);
    if (data != nil)
    {
        int offset = 4*((w*round(point.y))+round(point.x));
        data[offset] = 255; //alpha
        data[offset+1] = 255; //red
        data[offset+2] = 0; //green
        data[offset+3] = 0; //blue
    }

    CGImageRef img = CGBitmapContextCreateImage(cgctx);
    UIGraphicsEndImageContext();

    CGContextRelease(cgctx);

    if (data) { free(data); }

    self.drawImage.image = [UIImage imageWithCGImage:img];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:51:34.060

首先导入以下文件.. **>>>> 已编辑....**

```
#import <QuartzCore/QuartzCore.h> 

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef bitmContext = CGBitmapContextCreate(NULL, width, height, 8,bytesPerRow,             colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);
CGColorSpaceRelease(colorSpace);
CGContextDrawImage(bitmContext, (CGRect){.origin.x = 0.0f, .origin.y = 0.0f, .size.width =     originalWidth, .size.height = originalHeight}, cgImage); 
```

获取对底层像素的引用：

```
UInt8* data = (UInt8*)CGBitmapContextGetData(bitmContext); 
```

像素操作：

```
const size_t bitmapByteCount = bytesPerRow * originalHeight;
for (size_t i = 0; i < bitmapByteCount; i += 4)
{
UInt8 a = data[i];
UInt8 r = data[i + 1];
UInt8 g = data[i + 2];
UInt8 b = data[i + 3];

data[i] = (UInt8)newAlpha
data[i + 1] = (UInt8)newRed;
data[i + 2] = (UInt8)newGreen;
data[i + 3] = (UInt8)newBlue;
}

CGImageRef newImage = CGBitmapContextCreateImage(bitmContext); 
```

或者使用这个参考...

[http://www.markj.net/iphone-uiimage-pixel-color/](http://www.markj.net/iphone-uiimage-pixel-color/)

希望，这会帮助你..享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:08:57.447

我想出了一个解决我的问题的方法。这会将 CGPoint 着色为红色：

```
-(void)pixelate:(CGPoint)point
{
    CGImageRef inImage = self.drawImage.image.CGImage;
    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
    if (cgctx == nil) { NSAssert(NO,@"Context shouldn't be nil!"); }

    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}}; 

    CGContextDrawImage(cgctx, rect, inImage); 

    unsigned char* data = CGBitmapContextGetData(cgctx);
    if (data != nil)
    {
        int offset = 4*((w*round(point.y))+round(point.x));
        data[offset] = 255; //alpha
        data[offset+1] = 255; //red
        data[offset+2] = 0; //green
        data[offset+3] = 0; //blue
    }

    CGImageRef img = CGBitmapContextCreateImage(cgctx);
    UIGraphicsEndImageContext();

    CGContextRelease(cgctx);

    if (data) { free(data); }

    self.drawImage.image = [UIImage imageWithCGImage:img];
} 
```

# linq - Linq orderby 子列表项与主列表项的总和

> ID：10275859
> 
> 赞同：1
> 
> 时间：2012-04-23T06:35:02.123
> 
> 标签：linq, sql-order-by, sublist

我有一个问题，我还没有找到解决方案。为了简化问题：我有两个 SQL 表，并且我正在使用 LinQ to SQL。这两个表代表 Courses，其中 CourseType 包含 CourseName 和 TotalSpots，CourseInstance 包含 CourseDate、AmountSignedUp 和对 CourseType 的引用。CourseType 和 CourseInstance 之间存在一对多的关系。

现在我需要帮助的是 Linq 查询/Lambda 表达式来对 CourseType 和 CourseInstance 进行排序（如果可能的话）。我希望按照总空闲点数（从 CourseType 下的每个 CourseInstance 计算；CourseType.TotalSpots - CourseInstance.SignedUp）对 CourseType 进行排序，其中空闲点最多的 CourseType 首先显示。我希望 CourseInstance 按 CourseInstance 有多少空闲点（CourseType.TotalSpots - CourseInstance.AmountSignedUp）进行排序。

我不知道如何解决这个问题。我已经查看了类似的问题和问题，这是我到目前为止所做的，只是为了给出一个基本的想法：

编辑：到目前为止，我已经完成了这段代码，它将正确地对 CourseType 进行排序。我不确定如何对 CourseInstance 子列表进行排序（CourseType.CourseInstance）。我想当我将其转换为列表时，我将不得不在稍后的代码中执行此操作，除非有人对此有很好的解决方案。我可以按照 Arion 的建议去做，为什么我会标记他的答案。

```
var result= (
        from c in _db.CourseType
        orderby ((c.TotalSpots * c.CourseInstance.Count) - c.CourseInstance.Sum(
                                ci => (ci.AmountSignUp ?? 0))) descending
        select c
     ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:48:31.470

我不确定你想要什么。但听起来你想按`c.TotalSpots - ci.AmountSignedUp`. 所以这还不够吗？

```
var result=(
    from ct in db.CourseType
    join ci in db.CourseInstance
        on ct.SomeCourseTypeKey equals ci.SomeCourseInstanceKey
    orderby c.TotalSpots - ci.AmountSignedUp
    select new {ci,ct}
    ); 
```

其中 db 是 linq 数据上下文。

或者如果`c.TotalSpots`和然后`ci.AmountSignedUp`是`nullable`这样的：

```
var result=(
        from ct in db.CourseType
        join ci in db.CourseInstance
            on ct.SomeCourseTypeKey equals ci.SomeCourseInstanceKey
        orderby (c.TotalSpots??0) - (ci.AmountSignedUp??0)
        select new {ci,ct}
        ); 
```

我仍然不确定你想要但是。你可以这样做：

```
var result=(
    from ct in db.CourseType
    orderby ct.TotalSpots
    select new 
    {
        ci,
        CourseInstances=(
            from ci in db.CourseInstance
            where ct.SomeCourseTypeKey == ci.SomeCourseInstanceKey
            orderby ct.TotalSpots- ci.AmountSignedUp
            select ci
        )
    }
    ); 
```

# inno-setup - Win32 安装程序：有没有办法为每个用户写入 HKU 启动？

> ID：10275861
> 
> 赞同：2
> 
> 时间：2012-04-23T06:35:46.240
> 
> 标签：inno-setup, nsis, advanced-installer

是否有一个 Windows 安装程序可以像
`<user>\Software\Microsoft\Windows\CurrentVersion\Run`
系统上的每个用户一样为每个用户添加启动？我无法写信给 HKLM，因为正在安装的程序是硬编码的，可以`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run`在切换登录时启动首选项时使用。

我也想知道如何处理安装应用程序后创建用户的情况。有没有可以在默认注册表配置文件中放置密钥的地方？

还有你们用的是什么安装程序？国家情报局？创新设置？高级安装程序？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:49:22.997

Windows has a thing called [Active](https://helgeklein.com/blog/2010/04/active-setup-explained/) [Setup](http://blogs.msdn.com/b/aruns_blog/archive/2011/06/20/active-setup-registry-key-what-it-is-and-how-to-create-in-the-package-using-admin-studio-install-shield.aspx), it allows you to "runonce" something for each user on the machine.

NSIS has a helper script called [EnumUsersReg](http://nsis.sourceforge.net/EnumUsersReg), it does its best to give you access to all HKCUs on the local machine as long as you have administrator rights.

To set defaults for a new user, load and edit the [correct ntuser.dat](http://blogs.msdn.com/b/oldnewthing/archive/2007/03/02/1786493.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:23:54.057

设置无法可靠地写入任何其他用户配置文件。

话虽如此，我相信 Windows 安装程序和 Windows 7 引入了一种方法来指定要应用于所有后续用户的设置。

如果没有为从这里到永恒的每个用户登录运行的东西，这将不适用于非基于 MSI 的安装程序。

# java - 如何在java中对属性进行排序？

> ID：10275862
> 
> 赞同：22
> 
> 时间：2012-04-23T06:36:09.610
> 
> 标签：java, sorting, properties

我有一个`Properties`对象，有时我需要添加其他对象`Properties`。

```
Properties myBasicProps = this.getClass.getResourceAsStream(MY_PROPS_PATH);
...
Properties otherProps = new Properties();
otherProps.load(new StringReader(tempPropsString)); //tempPropsString contains my temporary properties
myBasicProps.putAll(otherProps); 
```

我想`myBasicProps`在这之后进行排序。我不想获取所有键和值，对它们进行排序`Collections.sort()`，然后将它们全部放入一个新对象。有没有更好的办法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T06:42:15.233

不，`java.util.Properties`extends`java.util.Hashtable`没有为键或值定义可预测的排序顺序。

您可以尝试将所有值转储到类似的`java.util.TreeMap`内容中，这将对您的键施加自然顺序。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-03T08:55:30.800

您所要做的就是创建扩展属性的类。来源：[java2s.com](http://www.java2s.com/Tutorial/Java/0140__Collections/SortPropertieswhensaving.htm)

```
import java.io.FileOutputStream;
import java.util.Collections;
import java.util.Enumeration;
import java.util.Properties;
import java.util.Vector;

public class Main{
  public static void main(String[] args) throws Exception {
    SortedProperties sp = new SortedProperties();
    sp.put("B", "value B");
    sp.put("C", "value C");
    sp.put("A", "value A");
    sp.put("D", "value D");
    FileOutputStream fos = new FileOutputStream("sp.props");
    sp.store(fos, "sorted props");
  }

}
class SortedProperties extends Properties {
  public Enumeration keys() {
     Enumeration keysEnum = super.keys();
     Vector<String> keyList = new Vector<String>();
     while(keysEnum.hasMoreElements()){
       keyList.add((String)keysEnum.nextElement());
     }
     Collections.sort(keyList);
     return keyList.elements();
  }

} 
```

这个对我有用。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-09-01T10:37:34.267

覆盖在*Java 8*`keys`中运行良好，但从*Java 9*开始，方法的新实现不再调用方法，而是调用方法。**`store``keys``entrySet`**

 **因此，您也必须覆盖`entrySet`以在存储时使用*Java 8/9/10*`Properties`进行排序。

 *这是一个内联覆盖的示例：

```
Properties properties = new Properties() {

    private static final long serialVersionUID = 1L;

    @Override
    public Set<Object> keySet() {
        return Collections.unmodifiableSet(new TreeSet<Object>(super.keySet()));
    }

    @Override
    public Set<Map.Entry<Object, Object>> entrySet() {

        Set<Map.Entry<Object, Object>> set1 = super.entrySet();
        Set<Map.Entry<Object, Object>> set2 = new LinkedHashSet<Map.Entry<Object, Object>>(set1.size());

        Iterator<Map.Entry<Object, Object>> iterator = set1.stream().sorted(new Comparator<Map.Entry<Object, Object>>() {

            @Override
            public int compare(java.util.Map.Entry<Object, Object> o1, java.util.Map.Entry<Object, Object> o2) {
                return o1.getKey().toString().compareTo(o2.getKey().toString());
            }
        }).iterator();

        while (iterator.hasNext())
            set2.add(iterator.next());

        return set2;
    }

    @Override
    public synchronized Enumeration<Object> keys() {
        return Collections.enumeration(new TreeSet<Object>(super.keySet()));
        }
    }; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-02T17:17:38.417

**解决方案也适用于 java > 8**

尽管问题没有明确提及`store(OutputStream out, String comments)`功能，但我发现这（和`load(InputStream inStream)`分别）是`Properties`.

**如果我们对存储/加载属性**不感兴趣，我们可以`Properties`用一些`Map`或`SortedMap`实现来替换。

不同之`Properties`处在于/方法`Map`的存在 提供了一些**特定的序列化规则**。这些规则没有（也不会）在 java 版本之间发生变化。例如`store()``load()`

 ***   存储对像`prop=value`
*   Unicode 和特殊字符的转义规则。
*   在顶部添加可选注释

不幸的是，**上述 3 部分**功能**隐藏**在私有方法中，并且**不能在**希望使用不同内部数据结构的扩展或替代实现中轻松重用（例如，用于保持属性排序）。

所以剩下的就是**保持相同的内部结构并覆盖这两种`store()`方法**。

注意：为了获得排序的属性，前段时间我遵循[了 danisupr4](https://stackoverflow.com/users/2742330/danisupr4)实现，但在**java9 上它坏了。**

### TL;博士

下面的代码通过覆盖 only方法**维护了完整的功能**，并使用**-****的所有版本进行了测试**。 我相信过滤这个公共方法的输出可以使实现对类中未来的代码更改**不那么脆弱**。`Properties``store(OutputStream out, String comments)`**`java5``java12`**
**`java.util.Properties`**

 **```
 class SortedStoreProperties extends Properties {

        @Override
        public void store(OutputStream out, String comments) throws IOException {
            Properties sortedProps = new Properties() {
                @Override
                public Set<Map.Entry<Object, Object>> entrySet() {
                    /*
                     * Using comparator to avoid the following exception on jdk >=9: 
                     * java.lang.ClassCastException: java.base/java.util.concurrent.ConcurrentHashMap$MapEntry cannot be cast to java.base/java.lang.Comparable
                     */
                    Set<Map.Entry<Object, Object>> sortedSet = new TreeSet<Map.Entry<Object, Object>>(new Comparator<Map.Entry<Object, Object>>() {
                        @Override
                        public int compare(Map.Entry<Object, Object> o1, Map.Entry<Object, Object> o2) {
                            return o1.getKey().toString().compareTo(o2.getKey().toString());
                        }
                    }
                    );
                    sortedSet.addAll(super.entrySet());
                    return sortedSet;
                }

                @Override
                public Set<Object> keySet() {
                    return new TreeSet<Object>(super.keySet());
                }

                @Override
                public synchronized Enumeration<Object> keys() {
                    return Collections.enumeration(new TreeSet<Object>(super.keySet()));
                }

            };
            sortedProps.putAll(this);
            sortedProps.store(out, comments);
        }
    } 
```

注意：根据谁调用`store()`，最好不要覆盖现有方法而是创建一个新方法：例如`storeSorted()`.
此外，**为简单起见，我仅覆盖其中一种`store()`方法**，但相同的概念适用于两者。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-31T13:11:01.167

**@danisupr4 有最好的解决方案。**

我会稍微改进一下，这样您的 IDE 中就不会收到任何警告：

```
public static class MyProperties extends Properties {
    private static final long serialVersionUID = 1L;

    public Enumeration<Object> keys() {
        Enumeration<Object> keysEnum = super.keys();
        Vector<Object> keyList = new Vector<Object>();

        while (keysEnum.hasMoreElements()) {
            keyList.add(keysEnum.nextElement());
        }

        Collections.sort(keyList, new Comparator<Object>() {
            @Override
            public int compare(Object o1, Object o2) {
                return o1.toString().compareTo(o2.toString());
            }
        });

        return keyList.elements();
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-30T21:10:04.733

TreeMap 应该是最简单的方法：

```
Properties myProps = this.getClass.getResourceAsStream(MY_PROPS_PATH);

try {
    myProps.load(new FileInputStream(extraPropertiesFilename));
        //you can load more properties from external file

    Map<String, String> sortedMap = new TreeMap(myProps);

    //output sorted properties (key=value)
    for (String key : sortedMap.keySet()) {
        System.out.println(key + "=" + sortedMap.get(key));
    }

} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-21T20:14:02.087

对键进行排序要简单得多：

```
List<String> keys = new ArrayList<String>()
for(String key : properties.stringPropertyNames()) {
  keys.add(key)
}

Collections.sort(keys); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-05T11:51:05.733

您可以覆盖 keys() 方法以将已排序的属性保存在 txt 文件中：

```
//this method downloaded from edu.umd.cs.findbugs.config package
@SuppressWarnings("unchecked")
@Override
public synchronized Enumeration<Object> keys() {
    Set<?> set = keySet();
    return (Enumeration<Object>) sortKeys((Set<String>) set);
}
static public Enumeration<?> sortKeys(Set<String> keySet) {
    List<String> sortedList = new ArrayList<String>();
    sortedList.addAll(keySet);
    Collections.sort(sortedList);
    return Collections.enumeration(sortedList);
} 
```

并覆盖 stringPropertyNames() 方法以将排序的属性保存在 xml 文件中：

```
@Override
public Set<String> stringPropertyNames() {
Set<String> tmpSet = new TreeSet<String>();
for (Object key : keySet())
{
    tmpSet.add(key.toString());
}
    return tmpSet;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-23T00:32:25.697

我通过覆盖*方法*存储来做到这一点，如下所示：

```
@Override
public void store(Writer writer, String comments) throws IOException {

    this.keySet().stream().map(k -> (String)k).sorted().forEach(k -> {
        try {
            writer.append(String.format("%s=%s\n", k, get(k)));
        } catch (IOException e) {
            e.printStackTrace();
        }
    });

} 
```

以前的答案不太适合我。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-18T07:35:00.623

在 Java 8`Properties.keys()`中用于存储 properties ，在 Java 9 中这发生了变化`Properties.entrySet()`并被使用：

**爪哇 8**

```
private void store0(BufferedWriter bw, String comments, boolean escUnicode)
    throws IOException
{
...
        for (Enumeration<?> e = keys(); e.hasMoreElements();) { 
```

**爪哇 9**

```
private void store0(BufferedWriter bw, String comments, boolean escUnicode)
    throws IOException
{
...
        for (Map.Entry<Object, Object> e : entrySet()) { 
```

我使用这个类来处理两个 java 版本：

```
public class SortedProperties extends Properties {

    /**
     * constructor
     *
     * @param unsortedProperties
     */
    public SortedProperties(Properties unsortedProperties) {
        putAll(unsortedProperties);
    }

    @Override
    @SuppressWarnings({ "unchecked", "rawtypes" })
    public synchronized Enumeration keys() {
        Enumeration<Object> keysEnum = super.keys();
        Vector<String> keyList = new Vector<String>();
        while (keysEnum.hasMoreElements()) {
            keyList.add((String) keysEnum.nextElement());
        }
        Collections.sort(keyList);
        return keyList.elements();
    }

    @Override
    public Set<java.util.Map.Entry<Object, Object>> entrySet() {
        // use a TreeMap since in java 9 entrySet() instead of keys() is used in store()
        TreeMap<Object, Object> treeMap = new TreeMap<>();
        Set<Map.Entry<Object, Object>> entrySet = super.entrySet();
        for (Map.Entry<Object, Object> entry : entrySet) {
            treeMap.put(entry.getKey(), entry.getValue());
        }
        return Collections.synchronizedSet(treeMap.entrySet());
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-01T12:31:10.897

我的解决方案受[smillien62 的](https://stackoverflow.com/a/52127284/1166992)启发：

```
final Properties properties = new Properties()
{
  private boolean recurse;

  @Override
  public synchronized Set<Map.Entry<Object, Object>> entrySet()
  {
    if (this.recurse)
    {
      return super.entrySet();
    }
    else
    {
      this.recurse = true;
      final TreeMap<Object, Object> treeMap = new TreeMap<>(this);
      final Set<Map.Entry<Object, Object>> entries = treeMap.entrySet();
      this.recurse = false;
      return entries;
    }
  }
}; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-03T16:01:18.403

怎么样：

```
 System.getProperties().entrySet().stream()
            .sorted((e1, e2) -> e1.getKey().toString().compareToIgnoreCase(e2.getKey().toString())) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-16T06:06:49.307

尝试使用 TreeMap（按自然顺序对键进行排序）和 StringBuilder（我们也可以使用 sysout，但很容易记录（slf4j）返回值）

```
public static String getPrettyPrintProps(Properties properties) {
Map<String, String> map = new TreeMap(properties);
StringBuilder sb = new StringBuilder();
map.forEach((k, v) -> sb.append("\n" + k + ":" + v ) );
return  sb.toString();
} 
```*******

# database - 分析 DB2 的 TCB 索引状态

> ID：10275863
> 
> 赞同：0
> 
> 时间：2012-04-23T06:36:17.983
> 
> 标签：database, db2, indexing, database-indexes

以下是我可以使用我的 DB2 数据库的命令获得的 TCB 索引。我不知道怎么分析。哪些列很重要？他们的意思是什么？我知道这是一个新手问题，但请帮助我。

TCB 指数统计：

```
Address            TableName    IID   EmpPgDel   RootSplits BndrySplts PseuEmptPg Scans      KeyUpdates InclUpdats NonBndSpts PgAllocs   Merges     PseuDels   DelClean   IntNodSpl  
0x07000000EA695040 TAB1         21    2128       0          5          2143       191        1738530    0          7916       6016       0          1805985    1743606    26         
0x07000000EA695040 TAB1         20    357        0          2332       357        1242710    1738530    0          2584       4054       0          1812241    1652843    15         
0x07000000EA695040 TAB1         19    662        1          4293       662        16464      1907107    0          4907       7537       0          2004994    1556457    46         
0x07000000EA695040 TAB1         18    184        0          1689       184        2788625    1738530    0          1044       2235       0          1811998    1709486    6          
0x07000000EA695040 TAB1         17    4705       1          0          4990       1210257    2017860    0          14890      11525      0          2119054    2067832    71         
0x07000000EA695040 TAB1         16    5754       0          422        5923       116        1878324    0          15534      12105      0          1979092    1815142    95         
0x07000000EA695040 TAB1         15    309        0          0          309        59269      1738530    0          5403       4419       0          1809592    1667684    13         
0x07000000EA695040 TAB1         14    1          0          0          1          1964       38286      0          640        556        0          139952     121125     0          
0x07000000EA695040 TAB1         13    0          1          0          0          1025       85         0          599        540        0          16995      15319      1          
0x07000000EA695040 TAB1         12    55         0          549        55         3333550    85         0          404        787        0          103223     102424     0          
0x07000000EA695040 TAB1         11    0          1          0          0          0          85         0          667        583        0          92226      87623      1          
0x07000000EA695040 TAB1         10    0          0          0          0          2311       85         0          664        582        0          102572     88222      0          
0x07000000EA695040 TAB1         9     2119       0          0          2530       92242      1738530    0          7482       5870       0          1810986    1764093    19         
0x07000000EA695040 TAB1         8     42         0          0          46         5140       1401046    0          679        538        0          1468321    1457986    0          
0x07000000EA695040 TAB1         7     770        0          514        959        1040       1738530    0          3460       3294       0          1809636    1758940    10         
0x07000000EA695040 TAB1         6     71         0          0          71         208155     105241     0          1716       1488       0          205678     183839     3          
0x07000000EA695040 TAB1         5     881        0          5          1094       459        1738530    0          4426       3622       0          1809593    1766681    11         
0x07000000EA695040 TAB1         4     176        0          1837       172        2104       3016234    0          1068       2111       0          3119296    1655094    2          
0x07000000EA695040 TAB1         3     2056       0          0          2539       945246     1738530    0          7459       5829       0          1810990    1778688    20         
0x07000000EA695040 TAB1         2     14         0          0          14         1956       827370     0          767        606        0          914780     715791     0          
0x07000000EA695040 TAB1         1     42         0          1120       42         14577342   0          0          640        1436       0          103138     100282     2          
0x07000000E97B80C0 TAB2         22    53         0          804        52         101027     0          0          0          770        0          36098      34766      1          
0x07000000E97B80C0 TAB2         21    0          0          310        0          406873     175642     0          565        849        0          211482     147209     1          
0x07000000E97B80C0 TAB2         20    176        0          0          172        7117       3463       0          4196       4033       0          38044      38154      36         
0x07000000E97B80C0 TAB2         19    244        0          4418       238        2271510    0          2286113    0          4222       0          36098      36680      4          
0x07000000E97B80C0 TAB2         18    431        0          4543       1152       1614       2286113    0          3338       7482       0          2321909    2262963    98         
0x07000000E97B80C0 TAB2         17    46         0          697        46         121        0          0          0          669        0          36098      34754      1          
0x07000000E97B80C0 TAB2         16    23         0          394        23         6600       0          0          0          378        0          36098      30821      0          
0x07000000E97B80C0 TAB2         15    122        0          0          119        1497610    0          0          1729       1659       0          36098      35976      7          
0x07000000E97B80C0 TAB2         14    0          0          293        0          103031     86453      0          109        388        0          122249     78577      0          
0x07000000E97B80C0 TAB2         13    156        0          0          371        26611      2286113    0          3234       3103       0          2321909    2276441    13         
0x07000000E97B80C0 TAB2         12    43         0          680        43         11827      0          0          0          653        0          36098      33917      1          
0x07000000E97B80C0 TAB2         11    1          0          598        1          63852      86453      0          425        986        0          122289     85714      2          
0x07000000E97B80C0 TAB2         10    62         0          918        61         18190      0          0          0          881        0          36098      36052      1          
0x07000000E97B80C0 TAB2         9     32         0          518        32         209418     36098      0          0          496        0          72196      72112      0          
0x07000000E97B80C0 TAB2         8     13         0          0          13         6383       3463       0          222        219        0          37922      33539      1          
0x07000000E97B80C0 TAB2         7     43         0          670        43         23306      0          0          0          642        0          36098      34458      1          
0x07000000E97B80C0 TAB2         6     31         0          518        31         181547     0          0          0          495        0          36098      36044      0          
0x07000000E97B80C0 TAB2         5     32         0          519        32         209546     36098      0          0          498        0          72196      72143      0          
0x07000000E97B80C0 TAB2         4     11         0          1384       9          7003       2286113    0          23         1332       0          2321909    1000172    1          
0x07000000E97B80C0 TAB2         3     0          0          0          0          6328       0          0          211        208        0          18539      13686      0          
0x07000000E97B80C0 TAB2         2     0          0          136        0          59348      175642     0          139        266        0          211426     157453     0          
0x07000000E97B80C0 TAB2         1     31         0          483        31         8304809    0          0          0          462        0          36098      36008      0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:05:00.647

我看到你也在 dba.stackexchange.com 上发帖。我在[那里发布了你的问题的答案](https://dba.stackexchange.com/questions/16882/analyzing-tcb-index-status-for-db2)。

# android - 无法在 cursoradapter 的 bindview 覆盖中获取视图的 ID

> ID：10275864
> 
> 赞同：2
> 
> 时间：2012-04-23T06:36:21.887
> 
> 标签：android, database, android-cursoradapter, custom-adapter

我正在使用扩展`CursorAdapter`以在`listview`. 为了显示特定的电话号码，我想要一个 id，所以我尝试在点击事件中获取它。我在绑定方法中设置了点击监听器如下

```
right.setOnClickListener(new View.OnClickListener() 
   {
        @Override
        public void onClick(View v) 
        {
            a = v1.getId();
            String num=dh.getNumberFromId(a);
        }
   }); 
```

我没有从`getId()`通话中获得正确的视图 ID，因此无法从数据库中获取电话号码。

完整的代码在这里：

```
public class CallSchedulerCustomAdapter2 extends CursorAdapter
{    
  DbHelper dh;

public Context con;
public LayoutInflater inflater;
int nameindex,phoneindex,emailindex,smsindex,msubindex,mbodyindex, column_id;
TextView text1,text2,text3;
int a;   String s1;

@SuppressWarnings("static-access")
public CallSchedulerCustomAdapter2(Context con, Cursor c  )
{
    super(con, c);
    // TODO Auto-generated constructor stub
    this.con = con;
    nameindex = c.getColumnIndex(dh.contactname);
    phoneindex = c.getColumnIndex(dh.contactnumber);
    emailindex = c.getColumnIndex(dh.contactmailid);
    smsindex=c.getColumnIndex(dh.contactsms);
    msubindex=c.getColumnIndex(dh.contactmailsub);
    mbodyindex=c.getColumnIndex(dh.contactmailbody);
    column_id= c.getColumnIndex("_id");
    this.inflater = (LayoutInflater)con.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

    public static Cursor c;
@SuppressWarnings("static-access")
@Override
public void bindView( View view,   Context context, Cursor cursor) 
{     

    // TODO Auto-generated method stub
    v1=view;
     c=cursor;
    text1= (TextView)view.findViewById(R.id.unschedulecontactnametv);
    text2= (TextView)view.findViewById(R.id.unschedulecontactnumbertv);
    text3= (TextView)view.findViewById(R.id.unschedulecontactmailidtv);
     String s = c.getString(cursor.getColumnIndex(dh.contactname));
       text1.setText(s);

    text1.setText(cursor.getString(nameindex));
    text2.setText(cursor.getString(phoneindex));
    text3.setText(cursor.getString(emailindex));
    View right = view.findViewById(R.id.callb1);
    dh = new DbHelper(context); 

    right.setOnClickListener(new View.OnClickListener() 
       {
        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
               a = v1.getId();
             String num=dh.getNumberFromId(a);

        }
       });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T07:42:11.163

不要使用 view.id 来存储数据/参考。使用[view.tag](http://developer.android.com/reference/android/view/View.html#getTag%28%29)你可以存储任何类型的对象。

```
 public void bindView( View view,   Context context, Cursor cursor) 
{     

MyDataHolder data = new MyDataHolder(cursor, "whatever");
 view.setTag(data);

....
}

right.setOnClickListener(new View.OnClickListener() 
     {
      @Override
      public void onClick(View v) 
      {

           int viewId = v.getId();
           MyDataHolder data = (MyDataHolder)v.getTag()
           if (R.id.xxxx == viewId) { // not a good idea
         }
           if (data.whatever == xxx) { // much better !!
         }

    }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:43:41.130

您的 v1 在哪里声明？但是这样想：你在列表视图中点击你的视图。方法 onClick() 被调用，但 v1 具有最后分配给它的值，而不是在为该特定视图执行 bindView() 时分配给它的值。一种解决方案是将 id 放在视图的标记属性中。

# java - 无法正确比较两个字符串

> ID：10275870
> 
> 赞同：0
> 
> 时间：2012-04-23T06:36:40.553
> 
> 标签：java, arrays, list, string-comparison

现在我可以成功地遍历可能的有效浇头循环，我无法在我的程序中添加 0.75 的浇头附加费。我希望你能告诉我为什么会这样。整个程序在底部。我关心的两个部分是

```
public class TestPizza
{
  public static void main(String args[])
  {
    int x;
    String top[] = {"Mushrooms", "Onions", ""};
    Pizza one = new Pizza();
    Pizza two = new Pizza();
    Pizza three = new Pizza();

one.setSize(12);
one.addTopping(top);
one.showValues();

  }
} 
```

和

```
// setPrice() assigns a price to the pie
public void addTopping(String programToppings[])
{
  for(int x = 0; x < 3; x++)
  {
    toppings[x] = programToppings[x];
  }
  for(int x = 0; x < 3; x++)
  {
    toppings[x] = toppings[x].toLowerCase();
  }
  for(int x = 0; x < 3; x++)
  {
    for(int xx = 0; xx < 6; xx++)
    {
      if(toppings[x].equals(validToppings[xx]))
      {price += 0.75;}
    }
  }
} 
```

我不明白为什么 .equals 方法不起作用并将奇数的变化总和分配给最终价格......

```
// This custom class is used to create Pie objects
// It stores the data about the Pie in four variables:
// size, price, type and baked
// It lets the program that creates the Pie object set these values using four methods:
// setSize, setPrice, setType and bake

public class Pizza
{

  // Declare four variables that can store the values for each pie
  // Each Pie object will have their own, separate copy of these variables 12.
    private int size;
    private double price;
    private boolean baked;
    private int x;
    private int xx;
    private String validToppings[] = new String[6];
    private String toppings[] = new String[3];

    // The "constructor" method is called when a new pie
    // object is first created. We use it to set "default" values.
    // Our typical pie is 10 inches, costs $8 and is not baked yet
    // We don't yet know what the pie filling will be
    Pizza()
    {
      size = 8;
      price = 10.0;
      baked = false;
      String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"};
      String toppings[] = new String[3];
    }

    // showValues() is a void method that displays the values of the
    // current Pie
    public void showValues()
    {
      System.out.println("Pie Size: " + size);
      for(int x = 0; x < 3; x++) {System.out.println("With " + toppings[x]);};
      System.out.println("Price of Pie: $" + price);
    }

    // getSize() returns the size of the pie
    public int getSize()
    {
      return size;
    }
    // getPrice() returns the price of the pie
    public double getPrice()
    {
      return price;
    }
    // baked() returns whether or not the pie is baked
    public boolean getBaked()
    {
      return baked;
    }
    // setSize() assigns a size to the pie
    public void setSize(int thisSize)
    {
      size = thisSize;
      switch(size)
      {
        case 8: price = 10.00; break;
        case 12: price = 14.00; break;
        case 16: price = 18.00; break;
        default: System.out.println("Error in Pizza class: Attempt to set invalid Pizza size."); break;
      }
    }

    // setPrice() assigns a price to the pie
    public void addTopping(String programToppings[])
    {
      for(int x = 0; x < 3; x++)
      {
        toppings[x] = programToppings[x];
      }
      for(int x = 0; x < 3; x++)
      {
        toppings[x] = toppings[x].toLowerCase();
      }
      for(int x = 0; x < 3; x++)
      {
        for(int xx = 0; xx < 6; xx++)
        {
          if(toppings[x].equals(validToppings[xx]))
          {price += 0.75;}
        }
      }
    }

  public void bake()
  {
    baked = true;
  };

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:42:21.037

Pizza 中的`validTopics`实例数组永远不会被填充。代替

```
String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"}; 
```

in`Pizza`的构造函数：

```
this.validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"}; 
```

此外，您的代码中有许多奇怪的东西：

*   `addTopping`关于浇头的迭代效率相当低
*   `addTopping``for`在循环中使用 (IMO) 幻数=> 3
*   你初始化数组`Pizza`两次
*   您初始化和验证不同浇头的方式令人困惑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:09:15.533

```
 Pizza()
{
  size = 8;
  price = 10.0;
  baked = false;
  String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"};
  String toppings[] = new String[3];
} 
```

这里，

```
String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"}; 
```

对于构造函数来说是本地的，并且无法连接到全局“validToppings[]”。了解更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:47:32.037

你的`validToppings`数组是空的。您正在将每个字符串与 null 进行比较。

`Pizza`您正在以这种方式声明成员：;

```
private String validToppings[] = new String[6];
private String toppings[] = new String[3]; 
```

并且您正在尝试以这种方式在构造函数中分配一个值

```
String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"};
String toppings[] = new String[3]; 
```

但是上面的代码从构造函数所做的一切都是创建一个新的局部变量，在构造函数执行完成后将被遗忘。

解决方法是为成员分配一个值。例如，一种可能的适当解决方案如下：

*   像这样声明成员： `String[] validToppings;`
*   并在构造函数中分配一个值，如下所示： `validToppings = {"mushroooms", ... };`

从设计的角度来看（您可能是初学者，但仍然值得一提）您应该使用枚举（可以避免比较字符串、打错字……）。

# sencha-touch - minify sencha js 在平板电脑的 webkit 浏览器中不起作用

> ID：10275871
> 
> 赞同：0
> 
> 时间：2012-04-23T06:36:43.790
> 
> 标签：sencha-touch, sencha-touch-2, android, mobile-webkit

我是 sencha 开发的新手，在 js 中遇到问题。

minify sencha 2 js 无法在平板电脑和移动设备的 webkit 浏览器中运行，任何人都可以帮助我。

有什么方法可以在平板电脑的 webkit 浏览器中调试 sencha js。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:48:51.183

更多信息将非常有帮助。:)

第一步是检查 Safari 或 Chrome 中的 Web Inspector。检查控制台是否有任何错误。如果没有，请将浏览器中的用户代理切换到 iOS 以检查它是否是特定于设备的。

有关使用 Web Inspector 调试 Sencha Touch 的更多信息，请访问：[http ://robertdougan.com/posts/how-to-debug-sencha-touch-2-applications-part-1](http://robertdougan.com/posts/how-to-debug-sencha-touch-2-applications-part-1)

如果仍然没有显示问题；您需要切换到远程调试。iOS 的第一步是启用 Safari 调试控制台。设置 > Safari > 高级 > 调试控制台。检查错误是否显示在浏览器中。

如果您使用的是 Android，则有类似的设置。

如果您需要使用远程调试器功能（就像 Safari/Chrome 中的 Web Inspector），您可以使用 Weinre。更多信息在这里：[https ://github.com/apache/incubator-cordova-weinre](https://github.com/apache/incubator-cordova-weinre)

# javascript - 链接无法在谷歌浏览器中输入关键字

> ID：10275872
> 
> 赞同：1
> 
> 时间：2012-04-23T06:36:57.967
> 
> 标签：javascript, jquery, html

我正在使用自动完成器并像这样在 li 中填充结果

```
<ul> 
<a href="/sale123/604/" style="display:block">  
  <li class="suggestedItems">   
    <div class="floatLeft foundImages">
       <img width="45" height="45" src="primary.png"> 
    </div> 
    <div class="foundResult"> <span class="dIB primaryTitle font12">18th century wine bottle - testc </span> <span class="dIB font12 secondaryTitle">Product</span> 
    </div> 
  </li> 
</a> 
</ul> 
```

我担心的是，当结果在 li 中填充时，插件提供了两个选项，我可以使用 enter 关键字单击结果，或者我可以使用鼠标单击它，这两个功能在 firefox 中都可以正常工作，但在 google chrome 中输入关键字不起作用。在输入关键字时，什么都没有发生。任何建议为什么它不起作用。

# php - 如何使用javascript获取未知id的值

> ID：10275875
> 
> 赞同：0
> 
> 时间：2012-04-23T06:37:21.930
> 
> 标签：php, javascript, jquery, html

我曾尝试使用“this”keyqord，但似乎无法获得价值。我需要帮助，谢谢！

这是我的脚本生成动态 id 的片段。

```
<?php
    $i = 0;
    foreach($deviceID as $row){
        echo '<tr><td><div class="drag" id="bus'.$i.'" value="'.$row['description'].'">'.$row['description'].'</div><td></td><td></td><td></td><td></td><td></td><td></td></td></tr>';
        $i++;
    }
?> 
```

这是我在我的 javascript 中尝试做的事情。

```
var redips_init;
redips_init = function (i) {
    var rd = REDIPS.drag;
    rd.init();
    rd.drop_option = 'shift';
    rd.animation_shift = true;

    rd.myhandler_dropped = function () { 
        var pos = rd.get_position();            
        msg.innerHTML = 'Changed: ' + pos[1] + ' ' + pos[2];
        alert($(this).val());
    }        
}; 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-23T06:43:23.877

你应该试试`this.id`

也许你可以先选择你的元素 `$('selector').attr('id')`

看看这个[jsfiddle](http://jsfiddle.net/argiropoulostauros/Yt68B/)

# php - 如何获得3个月后的日期？

> ID：10275878
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:37:54.443
> 
> 标签：php, date

我如何在 php 中获得今天日期之后的 3 个月？

从 PHP 我会得到今天的日期，`date("Y-m-d");`让我们说`2012-02-22`

3个月后我将如何约会....即`2012-05-22`

**编辑：-**

问题是关于不同月份的不同天数，2 月也有 28 天，闰有 29 天……奇数月 31 天，其他月份 30 天……我可以用 php 中的任何预建函数来处理这个问题问题... ？？

**编辑 2**

有了所有的回应，我明白这将是一个问题：-

参考[https://stackoverflow.com/a/10275921/1182021](https://stackoverflow.com/a/10275921/1182021) [+1]

所以我认为为它编写一个手动功能会更好......我会把它放在这里作为答案......谢谢大家的帮助和支持..

**回答这个问题**

我们需要手动检查所有条件以进行准确的计算...... PHP 中没有内置函数...... [https://stackoverflow.com/a/10280441/1182021](https://stackoverflow.com/a/10280441/1182021)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:42:28.990

您可以[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)为此使用：

```
$time = strtotime('+3 months'); 
```

但是，您应该意识到您的问题并没有真正的答案，因为“月”——在通俗意义上——并不是一个明确定义的时间单位。例如，3 月 31 日加三个月是多少？没有像 6 月 31 日这样的日期。

在上面给出的示例中，任何“额外”天数都将滚动到下个月，因此对于 3 月 31 日，[您将获得 7 月 1 日](http://codepad.org/yz4XB5P2)。这种行为是任意的，你认为它“正确”的天气取决于你。如果您编写自己的实现，则必须自己决定如何处理这些情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:41:21.907

```
$date = new DateTime();
$date->add(new DateInterval('P3M')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:21:56.633

这是完成任务的 100% 工作代码

```
<?php
$month = date('n');
$year = date('Y');
$IsLeapYear = date('L');
$NextYear = $year + 1;
$IsNextYearLeap = date('L', mktime(0, 0, 0, 1, 1, $NextYear));
$TodaysDate = date('j');
if (strlen($month+3) < 10)
{
    $UpdateMonth = "0".($month+3);
}
if ($month > 9) {
    if ($month == 10)
    {
        $UpdateMonth = "01";
    }
    else if ($month == 11)
    {
        $UpdateMonth = "02";
    }
    else
    {
        $UpdateMonth = "03";
    }
}

if (($month != 10) && ($month != 11) && ($month != 12))
{
    if(($month&1) && ($TodaysDate != 31))
    {
        $DateAfterThreeMonths = $year."-".$UpdateMonth."-".$TodaysDate;
    }
    else if (($month&1) && ($TodaysDate == 31))
    {
        $DateAfterThreeMonths = $year."-".$UpdateMonth."-30";
    } 
    else {
        $DateAfterThreeMonths = $year."-".$UpdateMonth."-".$TodaysDate;
    }
}
else if ($month == 11)
{
    if (($TodaysDate == 28) || ($TodaysDate == 29) || ($TodaysDate == 30))
    {
        if ($IsLeapYear == 1)
        {
            $DateAfterThreeMonths = ($year+1)."-".$UpdateMonth."-28";
        }
        else if ($IsNextYearLeap == 1)
        {
            $DateAfterThreeMonths = ($year+1)."-".$UpdateMonth."-29";
        }
        else
        {
            $DateAfterThreeMonths = ($year+1)."-".$UpdateMonth."-28";
        }
    }
    else
    {
        $DateAfterThreeMonths = ($year+1)."-".$UpdateMonth."-".$TodaysDate;
    }
}
else
{
    $DateAfterThreeMonths = ($year+1)."-".$UpdateMonth."-".$TodaysDate;
}
echo $DateAfterThreeMonths; 
?> 
```

我们可以使用顶部的这段代码手动检查这些东西：-

```
// Just change the values of $month, $year, $TodaysDate
$month = 11;
$year = 2012;
$IsLeapYear = date('L');
$NextYear = $year + 1;
$IsNextYearLeap = date('L', mktime(0, 0, 0, 1, 1, $NextYear));
$TodaysDate = 31; 
```

**只需复制并粘贴代码，在您的浏览器中查看 :)**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-23T06:40:14.553

[PHP手册中的](http://php.net/manual/en/function.mktime.php)示例：

```
$lastmonth = mktime(0, 0, 0, date("m")-1, date("d"),   date("Y")); 
```

所以试试：

```
$lastmonth = mktime(0, 0, 0, date("m")+3,  date("d"),   date("Y")); 
```

# xml - Oracle 中的 xmltable 或 xmlsequence 在性能方面哪个更好？

> ID：10275892
> 
> 赞同：1
> 
> 时间：2012-04-23T06:39:59.270
> 
> 标签：xml, oracle

在性能方面哪个更好：Oracle 中的 xmltable 或 xmlsequence？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:05:57.490

我认为内部执行计划是相同的。使用“set autotrace on”测试资源使用和执行计划

查看这篇文章： [http ://www.liberidu.com/blog/2007/07/10/about-tablexmlsequence-and-xmltable/](http://www.liberidu.com/blog/2007/07/10/about-tablexmlsequence-and-xmltable/)

# pyqt - PyQt4：使用 QTabWidget，我可以获得“标签移动”信号吗？

> ID：10275893
> 
> 赞同：2
> 
> 时间：2012-04-23T06:39:59.387
> 
> 标签：pyqt, tabwidget

我使用`QTabWidget`, 并设置`setMovable(True)`为自由移动所有选项卡。
它对我来说很好，但我希望还有一件事。
当标签从这里移到那里时，我想让应用程序知道信号。

`currentChanged(int)`信号不适合那个。

如果我重新实现`QTabWidget`，我必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:56:05.060

使用 的[`tabMoved`](http://qt-project.org/doc/qt-4.8/qtabbar.html#tabMoved)信号`QTabBar`。您可以使用该方法获得`QTabBar`使用。`QTabWidget`[`tabBar()`](http://qt-project.org/doc/qt-4.8/qtabwidget.html#tabBar)

# python - 在 django 中有一个单独的 django-admin 数据库

> ID：10275898
> 
> 赞同：11
> 
> 时间：2012-04-23T06:40:32.240
> 
> 标签：python, django, django-admin

我正在尝试为用 rails 编写的应用程序构建用户管理界面，为此我使用 django。我已经拥有来自 rails 应用程序的旧数据库，其中包含我要管理的内容，对于这个新的 django 应用程序的用户管理，我想使用 django-admin。但我不想改变我拥有的遗留数据库的结构。做的时候，syncdb，看到django创建了legacy数据库下的所有表，这不是我想要的。我现在所做的是，我在 settings.py 上定义了多个数据库，旧数据库是非默认数据库。这样做 django 在默认数据库上创建了所有用户/身份验证相关的表，这防止了遗留数据库的结构被改变。但我想知道是否有其他更好的方法，我可以在哪里做类似的事情，

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:27:01.630

您谈论身份验证表。您可以声明 2 个数据库，您的 django 应用程序的主数据库（“默认”）将仅包含 django.contrib.auth.models 模型。

你的其他人将被检查。您将在生成的模型的管理员中设置数据库名称，它应该可以神奇地工作。

这里如何处理多个和配置数据库：[https ://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)

如何指定 ModelAdmin 类来处理多个数据库：[https ://docs.djangoproject.com/en/dev/topics/db/multi-db/#exposing-multiple-databases-in-django-s-admin-interface](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#exposing-multiple-databases-in-django-s-admin-interface)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:11:29.670

您不需要创建第二个数据库。Django 允许您从现有表生成模型。该文档有一个集成现有数据库的方法：[https ://docs.djangoproject.com/en/dev/howto/legacy-databases/](https://docs.djangoproject.com/en/dev/howto/legacy-databases/)

总之，使用`inspectdb`管理命令让 Django 为您提供基于现有数据库的模型。对于特定于 Django 的模型，例如权限和内容类型，您仍然需要同步数据库。

# postgresql - 循环中的 Postgresql plpgsql 存储过程更新语句

> ID：10275904
> 
> 赞同：1
> 
> 时间：2012-04-23T06:41:11.360
> 
> 标签：postgresql, stored-procedures, loops, plpgsql

我需要编写一个在无限循环中执行更新语句的 plpgsql 函数：

```
create function change_type() returns void as $$
begin
  loop  
    update table a set type = 1 where date < now(); 
  end loop;
end;
$$ LANGUAGE plpgsql; 
```

当我调用此函数时，不会执行更新语句，尽管我可以看到循环正在运行。我将更新语句作为单个查询运行，它可以工作。我怎么解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:02:30.480

您遇到的问题是 PostgreSQL 中的存储过程自动在其自己的事务中运行。所以更新*正在*发生，它们在提交之前是不可见的——这发生在存储过程退出时（在这种情况下它永远不会这样做）。

这将产生的实际影响是，一旦活动事务变得太大，您的服务器最终将耗尽磁盘空间或内存，或两者（或其他一些内置安全限制）。

正如@JackManey 建议的那样，解决方案是彻底重新考虑您的策略。如果你能解释你想要完成什么，我敢打赌我的下一张薪水支票，有更好的方法来完成它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T19:07:31.260

我*猜*你正在寻找的是一个在特定时间（重复）安排任务的**cronjob 。**`man crontab`在 UNIX/LINUX 系统上试一试。最好作为系统用户**postgres**。

要每 5 分钟运行一次查询，请在 cron 表中输入这样的一行。我`crontab -e`在 LINUX 下使用来编辑我的 cron 作业：

```
* 5 * * * psql mydb -c 'UPDATE TABLE a SET type = 1 WHERE date < now()' 
```

如果您有更复杂的工作，请创建一个包含多个 SQL 命令的 shell 脚本，并将其命名为：

```
* 5 * * * psql mydb -f '/path/to/my_script.sh' 
```

或者创建一个 plpgsql 函数并调用它：

```
* 5 * * * psql mydb -c 'SELECT myfunc()' 
```

设置您的系统，以便超级用户 postgres 无需密码即可登录（默认设置）。

* * *

或者看看[pgAdmin](http://www.pgadmin.org/)附带的[**pgAgent**](http://www.pgadmin.org/docs/1.4/pgagent.html)。

# php - PHP：序列化 vs 单例 vs 依赖注入 vs 其他？

> ID：10275908
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:41:29.673
> 
> 标签：php, serialization, dependency-injection, singleton

我必须在我的代码中使用我总是想在需要时访问它们的对象。一个数据库对象，它保存与数据库的连接。这是一个静态对象，连接不会改变。我有一个用户对象，它包含用户级别、用户名和 ID。

我读了一些关于如何做到这一点的帖子和文章。我找到了 3 个解决方案 - 使用单例 - 序列化对象并将其存储在会话中 - 使用依赖注入。

单例很糟糕，因为全局变量很糟糕。序列化对象并将其存储在会话中对我来说似乎很难看（不完全知道为什么）使用依赖注入会使您的构造函数充满参数。

现在我有两个问题 - 还有另一种我没有提到的方法吗？- 授予对上述对象的整体访问权限的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:49:39.413

你把一切都搞砸了。

> 授予对上述对象的整体访问权限的最佳方法是什么？

## 不，根本没有这种方法

它们是不同的对象，需要不同的处理。

对于数据库对象，您别无选择。
您可以为每个请求创建它并在整个处理过程中使用它（当然，您需要将其设为全局以在其他类中使用）。
或者将其用作*静态单例对象，*每次需要与数据库交互时都会调用该对象。它将在第一次调用时建立数据库连接并最终使用它直到处理请求结束。有了另一个请求，它将重新开始。

对于用户对象，会话中的*透明序列化和依赖注入都很好。*
但是，在每个请求上创建一个用户对象并不是一个坏主意。在你的位置，我不会以这种方式折磨会议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T21:18:35.120

抱歉，现实很艰难，但您使用了软件开发中的专业词汇，但您没有专有技术……DI 可以使用构造函数或 setter 方法……您也可以使用像 pimple、synfony 这样的 DI 容器或 flow3 ... 或自己写一个。

我们在一个不允许单例的内部框架上工作，直接会话访问是。也很好 -> 可能你必须学习建筑。

有一些好书可供选择。

# c - 我必须在 read_triplet 中释放 doublet 吗？我该怎么做？

> ID：10275909
> 
> 赞同：0
> 
> 时间：2012-04-23T06:41:41.100
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>

static char *ones[] = {
    "",
    "one",
    "two",
    "three",
    "four",
    "five",
    "six",
    "seven",
    "eight",
    "nine"
};

static char *teens[] = {
    "",
    "eleven",
    "twelve",
    "thirteen",
    "forteen",
    "fifteen",
    "sixteen",
    "seventeen",
    "eighteen",
    "nineteen"
};

static char *tens[] = {
    "",
    "ten",
    "twenty",
    "thirty",
    "forty",
    "fifty",
    "sixty",
    "seventy",
    "eighty",
    "ninety"
};

static char *powers[] = {
    "thousand",
    "million",
    "billion",
    "trillion",
    "quadrillion",
    "quintillion",
    "sextillion",
    "septillion",
    "octillion",
    "nonillion",
    "decillion"
};

char** read_doublet(int a, int b) {
    char** doublet = malloc(2 * sizeof (char*));
    if (doublet != NULL) {
        if (a == 0 && b > 0) {
            doublet[0] = ones[0];
            doublet[1] = ones[b];
        } else if (a == 1 && b > 0) {
            doublet[0] = teens[0];
            doublet[1] = teens[b];
        } else if (a > 0 && b == 0) {
            doublet[0] = tens[0];
            doublet[1] = tens[a];
        } else if (a > 0 && b > 0) {
            doublet[0] = tens[a];
            doublet[1] = ones[b];
        } else {
            doublet[0] = ones[0];
            doublet[1] = ones[0];
        }
        return doublet;
    }
    return NULL;
}

char** read_triplet(int a, int b, int c) {
    char** triplet = malloc(3 * sizeof(char*));
    if(triplet != NULL) {
        triplet[0] = ones[0];

        if(a > 0) {
            triplet[0] = ones[a];
        }

        char** doublet = read_doublet(b, c);
        if(doublet != NULL) {
            triplet[1] = doublet[0];
            triplet[2] = doublet[1];
        }

        return triplet;
    }

    return NULL;
}

int main(void) {
    printf("%s %s %s %s\n", teens[1], ones[1], tens[1], powers[1]);

    char** answer = read_triplet(2, 1, 2);
    if (answer != NULL) {
        printf("%s %s %s", answer[0], answer[1], answer[2]);
        free(answer);
    }
    return (EXIT_SUCCESS);
} 
```

在上面的代码中，在 read_triplet 中，我将 doublet 内的指针复制到了 Triplet 中。如何在不使用引用计数或垃圾收集器库的情况下从 main 中释放 doublet 内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:06:43.877

我认为编写代码不是很好的模式。

```
char** read_triplet(int a, int b, int c) {
    char** triplet = malloc(2 * sizeof(char*));
    if(triplet != NULL) {
        triplet[0] = ones[0];

        if(a > 0) {
            triplet[0] = ones[a];
        }

        char** doublet = read_doublet(b, c);
        if(doublet != NULL) {
            triplet[1] = doublet;
        }

        return triplet;
    }

    return NULL;
}

int main(void) {
    printf("%s %s %s %s\n", teens[1], ones[1], tens[1], powers[1]);

    char** answer = read_triplet(2, 1, 2);
    if (answer != NULL) {
        printf("%s %s %s", answer[0], answer[1][0], answer[1][1]);
        free(answer[1])
        free(answer);
    }
    return (EXIT_SUCCESS);
} 
```

# c# - 在 Mono for android 中画一条线

> ID：10275910
> 
> 赞同：1
> 
> 时间：2012-04-23T06:41:41.183
> 
> 标签：c#, android, drawing, xamarin.android

我正在尝试用单声道为 android 绘制一个简单的点 (x,y) 到点 (x2,y2) 线。我试图通过使用 Canvas.drawline() 函数来做到这一点。这是我到目前为止所拥有的：

```
protected override void OnCreate(Bundle bundle)
{        
    base.OnCreate(bundle);
    Paint P = new Paint();
    Canvas C = new Canvas();

    P.Color = Color.Red;
    P.StrokeWidth = 2;           

    C.DrawLine(100, 100, 200, 200, P);
} 
```

这应该在点 100,100 到 200,200 之间画一条线，但由于某种原因，它根本没有画一条线。所以我可以使用一些帮助。这段代码有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:28:20.133

您需要使用`Canvas`连接到屏幕的设备。您可以通过继承[Android.Views.View](http://androidapi.xamarin.com/?link=T%3aAndroid.Views.View)并覆盖[View.OnDraw](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.View.OnDraw(Android.Graphics.Canvas))来做到这一点。

例如，请参阅[ApiDemo 层示例](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/Graphics/Layers.cs#L38)。

# android - 访问列表视图中的自定义对象

> ID：10275911
> 
> 赞同：6
> 
> 时间：2012-04-23T06:41:46.607
> 
> 标签：android, android-listview, listadapter, onclicklistener

我目前正在构建一个应用程序，该应用程序将请求发送到网络，然后将结果解析并放入对象的 ArrayList 中。

然后，此列表填充一个 ListView。我想创建一个`onClickListener`可以让我知道单击了哪个对象，但我找不到正确的方法来实现它。

要么将 onClick 分配给原始活动中的 ListView，要么`getView`在自定义适配器的函数中分配侦听器。

在我看来，分配听众的`getView`开销太大了。

它是如何工作的？什么是更好的？

**主要活动代码：**

```
public class NoPicList extends Activity {
    ListView list;
    NoPicAdapter adapter;
    ProgressDialog mDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.no_pic_list);
        list = (ListView) findViewById(R.id.noPicListView);

        Bundle b = getIntent().getExtras();
        String request = b.getString("REQUEST");
        mDialog = new ProgressDialog(this);
        mDialog.setCancelable(false);
        mDialog.setMessage("Lodaing Data");
        mDialog.show();

        new GetNewsAndCalendar().execute(request);
    }

    @Override
    protected void onPause() {
        mDialog.dismiss();
        super.onPause();
    }

    class GetNewsAndCalendar extends
        AsyncTask<String, Void, ArrayList<Message>> {

        @Override
        protected ArrayList<Message> doInBackground(String... params) {
            String url = params[0];
            DOMFeedParser parser = new DOMFeedParser(url);
            return parser.parse();
        }

        @Override
        protected void onPostExecute(ArrayList<Message> result) {
            adapter = new NoPicAdapter(NoPicList.this, result);
            list.setAdapter(adapter);
            //FIRST OPTION TO INSERT onClickListener
            mDialog.dismiss();
        }
    }    //end of GetNewsAndCalendar
} 
```

**列表适配器的代码：**

```
public class NoPicAdapter extends BaseAdapter {

    private ArrayList<Message> data;
    private Activity mActivity;
    private LayoutInflater inflater = null;

    public NoPicAdapter(Activity a, ArrayList<Message> result) {
        mActivity = a;
        data = result;
        inflater = (LayoutInflater) mActivity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if (convertView == null)
            vi = LayoutInflater.from(mActivity).inflate(R.layout.no_pic_list_item,
                null);

        TextView title = (TextView) vi.findViewById(R.id.noPicTitle);
        TextView subtitle = (TextView) vi.findViewById(R.id.noPicSubtitle);

        title.setText(data.get(position).getTitle());
        subtitle.setText(data.get(position).getDate());
    // SECOND PLACE TO INSERT THE onClickListener
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:46:45.137

根据我的担心，将**onClick 分配给原始活动中的 ListView**是个好主意，而不是将其分配给`getView()`您的自定义适配器。因为在`getView()`您的适配器中，它总是创建一个**新的 View.onClick() 的对象**..

```
list.setOnItemClickListener(new OnItemClickListener()
 {
  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
  {
   adapter.get(position);  
   // Get data from your adapter,   the above code of line give the custom adapter's object of   current position of selected list item     
  }   
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T06:51:38.710

同意**user370305**的回答。

您只需要`OnItemClickListener`在 Activity 类中实现，创建后您将获得 onItemClick 方法，在该方法中您将获得被点击对象的**位置**。

```
 @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {
        // TODO Auto-generated method stub
        MyObject clickedObject = (MyObject) adapter.getItem(position);
        // MyObject is user-defined class

    } 
```

# ruby-on-rails - 奇怪的路由错误虽然在 rake 路由中可用

> ID：10275915
> 
> 赞同：2
> 
> 时间：2012-04-23T06:42:02.430
> 
> 标签：ruby-on-rails, routing, nested-resources

我有

```
<li><%= link_to "Messages", user_messages_path %></li> 
```

在我的 routes.rb 我有

```
 resources :users do
    resources :messages
    member do
      get :following, :followers
    end
  end 
```

当我耙路线时，它说....

```
user_messages GET    /users/:user_id/messages(.:format)      messages#index 
```

该错误很奇怪，因为如果我在布局文件夹中的 _header 部分添加列表项标签，​​即使访问我的根页面也会出现错误

```
No route matches {:controller=>"messages"} 
```

但是，如果我访问网址

```
http://localhost:3000/users/1/messages 
```

我能够看到该页面。我也有一个名为 messages_controller.rb 的控制器。

有谁知道出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:47:49.900

你必须给一个用户`user_messages_path`，比如

```
<li><%= link_to "Messages", user_messages_path(@user) %></li> 
```

# macvim - MacVim 启动错误

> ID：10275916
> 
> 赞同：2
> 
> 时间：2012-04-23T06:42:05.223
> 
> 标签：macvim

每当从终端启动 macvim 时，控制台都会输出一系列错误

```
2012-04-22 23:38:16.622 MacVim[27896:60b] speedup org.vim.MacVim
2012-04-22 23:38:16.623 MacVim[27896:60b] ERROR: Unable to find method [_NSFullScreenTransition _startFullScreenTransitionForCGWindow:targetFrame:duration:].
2012-04-22 23:38:16.624 MacVim[27896:60b] ERROR: Unable to find method [_NSFullScreenTransition _startEnterFullScreenTransitionForCGWindow:targetFrame:duration:].
2012-04-22 23:38:16.624 MacVim[27896:60b] ERROR: Unable to find method [_NSFullScreenTransition startExitFullScreenTransitionForCGWindow:targetFrame:duration:].
git: Permission denied 
```

这是macvim的问题还是我的配置？

# c++ - C++ 在 Xcode 中调用类问题

> ID：10275920
> 
> 赞同：1
> 
> 时间：2012-04-23T06:42:26.733
> 
> 标签：c++, objective-c, ios, xcode, cocos2d-x

我正在为我的一款游戏使用 Cocos2dX，而且我是 C++ 新手。我正在创建一个类 myDelegate.h #include "cocos2d.h"

```
 class myOFDelegate : public cocos2d::CCLayer{
public:
    ~myOFDelegate();
    myOFDelegate();
   void RunME();
};

#endif 
```

和 myDelegate.m

```
include "myOFDelegate.h"

myOFDelegate::myOFDelegate(){    }

myOFDelegate::~myOFDelegate(){    }

void myOFDelegate::RunME(){
    CCLog("call me");
} 
```

我在我的 Hello Scene 中的菜单按钮触摸上调用 RunME 方法，如下所示

```
myOFDelegate *ofDelegate = new myOFDelegate();
    ofDelegate->RunME(); 
```

但我收到此错误消息

* * *

```
> Undefined symbols for architecture i386:  
> "myOFDelegate::myOFDelegate()", referenced from:
>       HelloWorld::CallThis() in HelloWorldScene.o   "myOFDelegate::RunME()", referenced from:
>       HelloWorld::CallThis() in HelloWorldScene.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with
> exit code 1 (use -v to see invocation) 
```

* * *

当然，当我注释掉这两行时

```
myOFDelegate *ofDelegate = new myOFDelegate();
        ofDelegate->RunME(); 
```

游戏编译并完美运行。

你能帮我吗，伙计，我从 2 天开始就一直在拉头发，但一直无法弄清楚

Regads KK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T06:19:44.880

您制作 .cpp 类而不是 .m 类，然后编写该类的实现。如果您不想制作该类的 .cpp 扩展名，则需要制作 .mm 文件，您可以在该文件上编写您的 c++ 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:49:20.100

您使用的是 myOFDelegate.m 还是 myOFDelegate.mm？在 Xcode 中，cpp 文件和 Objective-c 文件使用不同的扩展名。

并在您的 cpp 文件中，使用#include（不包含或#import）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:00:29.050

默认情况下，您在 myDelegate.m 中列出的内容不会编译。您遇到的错误与未在项目中构建 myDelegate.m 一致。Xcode 决定了编译器应该由扩展使用哪种语言：

*   .m 是 Objective-C
*   .cpp 是 C++
*   .mm 是 Objective-C++

您为 myDelegate.m 列出的代码不是有效的 Objective-C，需要某种形式的 C++ 编译。您可以更改用于特定文件的语言/编译器或更改默认值，例如 *.m 表示 Objective-C++。但是，除非您的项目执行这两件事中的一件，否则 myDelegate.m 将不会按书面方式编译。你确定它真的被包含在构建中吗？您可以尝试`#error Test`插入一条线`myOFDelegate::myOFDelegate()`以确保确实将 myOFDelegate 构建到您的项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:00:51.567

如果您上面的代码片段准确地反映了您在程序中的内容，那么您就遇到了 C++ 和 Objective-C 之间的差异。与 Objective-C 不同，在 C++ 中，您必须声明类将实现的所有方法，即使您要覆盖基类实现。因此，如果您实现 void myOFDelegate::RunME()，则需要在相关的头文件中声明该方法。在您声明的地方`void callingMe();`，在声明的下方`void RunMe();`。

您还没有向我们展示 callMe() 方法的实现。请注意，正如您在标题中声明的那样，您也必须实现它；你不能省略实现。

# android - 在活动中打开并显示国际化的 HTML 资源

> ID：10275929
> 
> 赞同：1
> 
> 时间：2012-04-23T06:43:28.723
> 
> 标签：android, resources

我想用 HTML 制作特定语言的帮助文件并使用浏览器查看它们。
作为第一个版本，我将英文版放在 res/raw 中（似乎没有 html 或 doc 目录）。
要启动我发现的浏览器：

```
 String URL = "android.resource://" + getPackageName() + "/" + R.raw.help;
        Uri u = Uri.parse(URL);
        Intent intent = new Intent(Intent.ACTION_VIEW, u);
        startActivity(intent); 
```

但它总是抛出 ApplicationNotFound-Exception。

查看变量，我可以看到 URL 是：

```
 android.resource://[PACKAGE_NAME]/[NUMBER] 
```

这也是你的内容。Uri.parse 只是复制给定的字符串。

我的问题：

我究竟做错了什么？
还有其他方法吗？
系统会在 res/raw-de 中找到文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:13:31.107

您可以使用以下命令从“资产”文件夹中打开一个 html 页面

```
//help_activity.xml
<?xml version="1.0" encoding="utf-8"?>
  <WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/helpwebview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

在资源文件中，例如在strings.xml 中。“file:///android_asset”对应Android项目中的“Assets”文件夹。

```
<string name="help_url">file:///android_asset/help/index_de.html</string> 
```

//HelpActivity的代码

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class HelpActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.help_activity);
        WebView browser = (WebView)findViewById(R.id.helpwebview);

        WebSettings settings = browser.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setBuiltInZoomControls(true);
        browser.loadUrl(getString(R.string.help_url));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:13:50.773

我就是这样做的：

```
String summary = readRawTextFile(this,R.raw.help);
mWebView.loadDataWithBaseURL (null,summary, "text/html","UTF-8" ,null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:50:50.953

另一种方法是直接使用资源文件加载 WebView。

```
WebView wv = (WebView) findViewById(R.id.webView1);
wv.loadUrl("file:///android_asset/your_html_file.html"); 
```

确保将所有文件放在**Assets**文件夹中

# java - heroku 错误..找不到类

> ID：10275930
> 
> 赞同：0
> 
> 时间：2012-04-23T06:43:31.850
> 
> 标签：java, deployment, heroku

先生，这是我的 pom.xml，我已经从 cmd 提示符运行了 mvn package..我已经正确地给出了类路径。但是如果我运行这个命令 D:\UVisitors>java -cp target/classes:"target/dependency/*" TomcatServer 那么我得到类未找到错误..哪里做错了？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.cim</groupId>
    <artifactId>controllers</artifactId>
    <name>abc</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.0.6.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-core</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-logging-juli</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-jasper</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jasper</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jasper-el</artifactId>
            <version>7.0.27</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-jsp-api</artifactId>
            <version>7.0.27</version>
        </dependency>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <assembleDirectory>target</assembleDirectory>
                    <generateRepository>true</generateRepository>
                    <programs>
                                <program>
                                    <mainClass>com.cim.Server</mainClass>
                                    <name>webapp</name>
                                </program>
                            </programs>
                    <warName>abc</warName>
                </configuration>
            </plugin>
            <plugin> 
                <groupId>org.apache.maven.plugins</groupId> 
                <artifactId>maven-war-plugin</artifactId> 
                <configuration> 
                  <failOnMissingWebXml>true</failOnMissingWebXml> 
                  <webXml>src/main/webapp/WEB-INF/web.xml</webXml> 
                </configuration> 
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

错误

```
>java -cp target/classes:"target/dependency/*" TomcatServer
Exception in thread "main" java.lang.NoClassDefFoundError: TomcatServer
Caused by: java.lang.ClassNotFoundException: TomcatServer
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: TomcatServer.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:37:26.300

您需要在课程之前指定包

尝试这个：

`java -cp target/classes:"target/dependency/*" com.cim.Server.TomcatServer`

它期望类文件位于目录`com/cim/Server`中或类路径上的 jar 文件中，具有相同的内部路径

# php - PHP 字符串比较给出错误的输出：

> ID：10275936
> 
> 赞同：0
> 
> 时间：2012-04-23T06:43:54.667
> 
> 标签：php, string, comparison

我正在使用此代码来比较方法中的字符串值，该方法效果很好。但是对于某些值，它给出了错误的值，例如以下值：

代码：

```
$string1 = "65";
$string2 = "5-fold";
$result = strcasecmp($string1, $string2);

switch ($result) {
    case -1: print "65 comes before 5-fold"; break;
    case 0: print "65 and 5-fold are the same"; break;
    case 1: print "65 comes after 5-fold"; break;
} 
```

输出：

```
65 comes after 5-fold 
```

我将此代码用于排序的数组列表，将它们排序为（ 65 位于 5-fold 之前）。可能是因为“ - ”或其他我不知道的输出。你对这个有什么想法吗.....

下面的代码对多维数组进行排序：

```
 foreach($index_terms as $c=>$key) {
            $sort_id[] = $key['id'];
            $sort_term[] = $key['term'];
            $sort_freq[] = $key['freq'];
        }

        array_multisort($sort_term, SORT_ASC, $index_terms); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:49:08.443

你在`65`比较`5-fold`。如果`65`小于则返回 -1 `5-fold`，如果`65`大于则返回 1 `5-fold`。

65 大于 5 倍……我没看出问题？

你想让 65 出现在它之前的 5 倍应该是多少？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:53:59.547

**代码 ：**

```
<?php
    $string1 = "65";
    $string2 = "5-fold";
    $result = strcasecmp($string1, $string2);

    echo $result;
?> 
```

**输出 ：**

> 1

* * *

***提示：**您的输出没有问题。`1`表示第二个操作数较大，`-1`表示第一个操作数较大。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:56:49.980

尝试使用[Intval](http://php.net/manual/en/function.intval.php)

strcasecmp 比较字符串的二进制值

```
$string1 = intVal("65"); 
$string2 = intVal("5-fold");  
$result = strcasecmp($string1, $string2);

switch ($result) {
    case -1: print "65 comes before 5-fold"; break;
    case 0: print "65 and 5-fold are the same"; break;
    case 1: print "65 comes after 5-fold"; break; } 
```

# asp.net - 减少 ItemDataBound 事件时间

> ID：10275938
> 
> 赞同：0
> 
> 时间：2012-04-23T06:44:09.567
> 
> 标签：asp.net, datalist, itemdatabound

我有一个 100 家酒店的列表，我必须在其中显示每家酒店的 10 张图片。我为此使用了 DataList 控件。由于我的图像存储在不同的表中，所以我每次都必须使用 ItemDataBound Event 中的 HotelId 查询图像列表。但是每次调用该存储过程大约需要 6 秒才能完成。所以对于 100 行，它需要 100*6 秒，这是我的代码

```
protected void dlSearchResult_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (ListItemType.Item == e.Item.ItemType || ListItemType.AlternatingItem == e.Item.ItemType)
        {
            HtmlGenericControl ul = (HtmlGenericControl)e.Item.FindControl("ulImages");
            DataSet dsImages = new DataSet();
            string HotelId=dlSearchResult.DataKeys[e.Item.ItemIndex].ToString();
            dsImages = SqlHelper.ExecuteDataset(Connection.ConnectionString, CommandType.StoredProcedure, "GetImage_ByHotelID", new SqlParameter("@HotelId", HotelId));

            StringBuilder  listtext=new StringBuilder ();

            if (dsImages.Tables.Count > 0)
            {
                for (int i = 0; i < dsImages.Tables[0].Rows.Count; i++)
                {
                    listtext.Append("<li class='PX_sri_photos_0'><a href='#'> <img  src='" + dsImages.Tables[0].Rows[i]["URL"].ToString() + "' alt='" + dsImages.Tables[0].Rows[i]["Caption"].ToString() + "' /></a></li>");
                }
            }
            ul.InnerHtml = listtext.ToString();

        }
    } 
```

请给我指导以优化我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T02:01:59.497

为什么不利用 datalist 控件的基本结果，它是一个表。这将避免从头开始构建数据集。通过使用 sql 数据适配器填充数据集来替换循环。创建一个表，其中包含酒店 id 和 100 家酒店中每家酒店的 10 张图像的 id 值之间的关系。加入查询中的 2 个表，生成的数据集应该会缩短图像加载到网页中的等待时间。我不能花时间编写代码，我在我的 Android 手机上。希望建议有所帮助。ADO.Net 的工作速度与任何其他 .Net 数据协议一样快，很多时候它更快。

# php - 使用 PHP 函数将 Flash 代码替换为 HTML5

> ID：10275939
> 
> 赞同：0
> 
> 时间：2012-04-23T06:44:10.303
> 
> 标签：php, flash, wordpress, replace

下面的代码使用 WordPress 帖子中的自定义播放器显示来自 youtube 的 flash 视频，它看起来与下面的代码完全一样：

```
<embed 
id="single2" 
name="single2"
src="http://www.example.com/playerold/flvplayer.swf" 
bgcolor="#ffffff" 
allowscriptaccess="always" 
allowfullscreen="true" 
flashvars="file=http://www.youtube.com/watch?v=********&amp;skin=http://www.example.com/player/modieus.swf&amp;logo=http://www.*****.com/playerold/logosite.png&amp;logo.link=http://www.*****.com&amp;logo.position=bottom-right&amp;logo.hide=false&amp;icons=false&amp;backcolor=000000&amp;frontcolor=0xC0C0C0&amp;lightcolor=0xFFE87C&amp;autostart=false&amp;image=http://i2.ytimg.com/vi/********/default.jpg" 
width="510" 
height="350"> 
```

我想使用 HTML5 代码在 Wordpress 上的 function.php 中使用自定义函数替换上述所有内容，以让视频在 iOS 和其他移动平台上正常播放。为 YouTube VEDIO_ID 保留上面的**** ：**

```
<div class="VideoPlayer">   
<iframe
title="YouTube video player" 
width="275" 
height="220" 
src="http://www.youtube.com/embed/********?rel=0&autoplay=0&showinfo=0" 
frameborder="0" allowfullscreen>
</iframe>
</div> 
```

上面代码 ( ***** *** ) 上的星号应替换为完全相同的 YouTube VEDIO_ID，以便它播放视频。

有谁知道如何做到这一点？

我不是 PHP 专家，但我认为我应该使用如下所示的东西：

```
function replace_custom_word($text){
$replace = array(
'one' => '<embed id="single2" name="single2" src="http://www.example.com/playerold/flvplayer.swf" bgcolor="#ffffff" allowscriptaccess="always" allowfullscreen="true" flashvars="file=http://www.youtube.com/watch?v=',
'two' => '',
'&amp;skin=http://www.example.com/player/modieus.swf&amp;logo=http://www.example.com/playerold/logosite.png&amp;logo.link=http://www.example.com&amp;logo.position=bottom-right&amp;logo.hide=false&amp;icons=false&amp;backcolor=000000&amp;frontcolor=0xC0C0C0&amp;lightcolor=0xFFE87C&amp;autostart=false&amp;image=http://i2.ytimg.com/vi/',
'four' => '',
'five' => '/default.jpg" width="510" height="350">'
);          
$text = str_replace(array_keys($replace), $replace, $text);     
return $text;
}

add_filter('the_content', 'replace_custom_word');
add_filter('the_excerpt', 'replace_custom_word'); 
```

# silverlight - 更改 windows phone 7 silverlight 项目命名空间导致启动失败

> ID：10275941
> 
> 赞同：4
> 
> 时间：2012-04-23T06:44:33.857
> 
> 标签：silverlight, windows-phone-7

我尝试更改重构并更改默认命名空间：

高亮 MainPage.xaml.cs 中的命名空间 -> 右键单击​​ -> 重构 -> 重命名 输入新的命名空间名称并申请所有找到的名称。这也改变了项目首选项中的默认命名空间。

但在那之后我的项目没有开始。

如何正确更改我的命名空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:54:27.123

您需要设置启动对象，如以下博客文章中所述：-

[http://nicksnettravels.builttoroam.com/post/2010/08/04/Windows-Phone-7-Beta-My-Application-Wone28099t-Start-After-Renaming-Project.aspx](http://nicksnettravels.builttoroam.com/post/2010/08/04/Windows-Phone-7-Beta-My-Application-Wone28099t-Start-After-Renaming-Project.aspx)

# google-app-engine - 丢失实体的成本

> ID：10275942
> 
> 赞同：5
> 
> 时间：2012-04-23T06:44:34.740
> 
> 标签：google-app-engine, google-cloud-datastore

我的应用程序可以计算数据存储中通常不存在实体的少量键。例如，我可能会发送 15 个键的批量获取，其中只有 4 个返回实体。

文档只是声明一次获取作为一次读取操作收费。当实体不存在时，这仍然是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:40:57.400

~~您将支付密钥分配费用（每个密钥），并将更改小额费用（目前每 10 万次操作花费 0.01 美元）。~~

~~如果我了解使用密钥获取 10 个实体的[计费页面](https://developers.google.com/appengine/docs/billing)将花费您 10 个小单元 + 读取单元 * 找到的实体。~~

* * *

我决定自己检查一下，**tl;博士**你不会喜欢结果。

我创建了一个简单的模型和一个请求模型 10,000 次的处理程序。

```
class DevNull(db.Model):
    pass

class EmptyHandler(webapp2.RequestHandler):    
    def get(self):
        for i in xrange(10):
            keys = [db.Key.from_path('DevNull', i*j+1) for j in xrange(1000)]
            res = DevNull.get(keys)

            print len(res) 
```

每次读取 10,000 次读取操作都会导致读取配额激增，其中 5 次会杀死免费配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:09:26.587

“不，您只需为存在并返回的实体付费。”

*我祈祷这将是谷歌的官方回应。:D*

# android - 每个开发者都需要自己的 Google Map Api-key 吗？

> ID：10275947
> 
> 赞同：5
> 
> 时间：2012-04-23T06:45:01.380
> 
> 标签：android, google-maps-api-3, google-api, api-key

我刚开始在 Android 中使用 Google 地图 API。我确实在**debug.keystore上生成了我的***MD5 证书指纹*，如 [https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)中 所述，后来使用此链接生成了 Api 密钥： [http ://code.google.com](http://code.google.com/android/maps-api-signup.html) [/android/maps-api-signup.html](http://code.google.com/android/maps-api-signup.html)

 **它按预期运行良好。但问题是我们是几个不同的程序员，他们共享相同的代码库，每个程序员都应该创建自己的密钥并更改 xml 文件以使其工作，这似乎很奇怪。

***有没有办法为谷歌地图 API 创建一个更全局的密钥，可以在开发人员之间共享？***

使用 Google API 控制台[https://code.google.com/apis/console](https://code.google.com/apis/console) ，我还为 Google Map API 创建了一个密钥，并将其他程序员作为团队成员添加到项目中，但该代码似乎不起作用。甚至不适合我！***第一个 API 代码和这段代码有什么区别？应该使用哪一个？***

感谢您的任何解释**

# asp.net - 动态必填字段验证器

> ID：10275949
> 
> 赞同：1
> 
> 时间：2012-04-23T06:45:08.723
> 
> 标签：asp.net

我正在创建动态控件，我想添加必填字段验证器，下面是我的代码，但必填字段验证器没有触发。我在 page_init 中添加控件。任何人都知道为什么这段代码不起作用。当我添加单个控件时，同一段代码正在工作。当我尝试添加多行控件时它不起作用。

```
ctrls.Add(New LiteralControl("<br />"))
                ctrls.Add(CreateRequiredFieldValidatorMR(StrControlID.ToString, "Required field."))

Private Function CreateRequiredFieldValidatorMR(ByVal strControlID As String, ByVal ErrorMessage As String) As RequiredFieldValidator
    Return CreateRequiredFieldValidatorMR(strControlID, ErrorMessage, String.Empty)
End Function

Private Function CreateRequiredFieldValidatorMR(ByVal strControlID As String, ByVal ErrorMessage As String, ByVal InitialValue As String) As RequiredFieldValidator
    Dim rfv As New RequiredFieldValidator
    rfv.ID = "ReqVal_" & strControlID
    rfv.ControlToValidate = strControlID
    rfv.Display = ValidatorDisplay.Dynamic
    rfv.ErrorMessage = ErrorMessage
    rfv.InitialValue = InitialValue
    rfv.ValidationGroup = "ReqGrp_" + strControlID
    rfv.ForeColor = Drawing.Color.Red
    rfv.Font.Bold = True
    Return rfv
End Function 
```

# javascript - 即使显示：无，div 中的 div 仍然占用空间？

> ID：10275952
> 
> 赞同：4
> 
> 时间：2012-04-23T06:45:48.707
> 
> 标签：javascript, html, css

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$("select#choosebook").change(function(){
    $(".title").slideDown("medium");
});
</head>

<body>
<div class="booktitle">
    <p>
    <font color="red">*</font>Book:
    <select id="choosebook">
        <option>Choose a Book...</option>
        <option>Add new Book...</option>
    </select>
    <div class="title" style="display:none">**
        <font color="red">*</font>Title: <input type="text">
    </div>
    <font color="red">*</font>Page: <input type="text" class="page">
</div>
</body>
</html> 
```

带有“title”类的 div 仍然占用“Book:”输入和“Page:”输入之间的空间，即使它是隐藏的！此网页上的其他 div 没有。在激活 javascript 以将其向下滑动之前，如何使其不占用空间？

谢谢！

编辑：根据要求，这是问题的屏幕截图。我正在尝试消除 Book 输入和 Title 输入之间的差距。'title' 输入下滑前： ![“标题”输入之前的愚蠢差距向下滑动。](../Images/27d757f4e9361b9103a48a93a6141ef5.png) 'title' 输入下滑后： ![“标题”输入后的愚蠢差距向下滑动。](../Images/72b6f38f47fb8e3744a2af95f7d1330c.png)

这是我的CSS：

```
<style type="text/css">
    @import url("layout.css");
    .page {
        width: 50px;
    }
    .URL, .booktitle {
        margin-left: 24px;
        display:none;
    }
    .title {
        display: none;
    }
    .newtag {
        display:none;
    }
    .amount, .addtag {
        width: 100px;
    }
    .details {
        width: 275px;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T06:49:15.413

创造空间的不是 div，而是`<br>`你紧随其后的 div。

并且请摆脱`<font>`标签。我的眼睛在流血。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:27:09.990

如果您谈论的是 Book 下拉菜单下的巨大空间，那是因为`p`您在 HTML 中打开了标签但忘记关闭它。该`p`标签正在添加默认边距。因此空间。删除`p`标签，边距应该消失。

另外，正如我在对您的问题的评论中提到的，请始终`doctype`向您的页面添加一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:03:08.333

不推荐使用字体元素，请在此处使用 span。您没有关闭脚本元素。

我清理了一下，现在你得到了这个：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$("select#choosebook").change(function(){
    $(".title").slideDown("medium");
});
</script>
</head>

<body>
<div class="booktitle">
    <span style="color:red">*</span>Book:
    <select id="choosebook">
        <option>Choose a Book...</option>
        <option>Add new Book...</option>
    </select>
    <div class="title" style="display:none">
        <span style="color:red">*</span>
        Title: <input type="text" />
    </div>
    <span style="color:red">*</span>
    Page: <input type="text" class="page">
</div>
</body>
</html> 
```

你可以在这里看到小提琴：http: [//jsfiddle.net/Allan/cJ6Jq/](http://jsfiddle.net/Allan/cJ6Jq/)为我工作。

# linux - 如何将从一个网络接口接收到的数据包重定向到另一个网络接口？

> ID：10275953
> 
> 赞同：3
> 
> 时间：2012-04-23T06:45:59.113
> 
> 标签：linux, networking, ip

我正在使用 ubuntu11.10，并使用以下命令创建了一个 tun/tap 接口

```
openvpn --mktun --dev tun0
ip link set tun0 up
ip addr add 10.10.10.1/24 dev tun0
route add 10.10.10.1/24 dev tun0 
```

我那里有另一个界面

```
eth0 10.80.1.87 
```

我想将从 tun0 收到的数据包重定向到 eth0。如何在 Ubuntu 上做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T17:04:11.027

作为对两个其他很好的答案的补充，请记住：

*   **在链路层（“以太网级别”）进行桥接**工作——因此在两个接口之间配置桥接就像通过（虚拟）*交换机连接它们*
*   **在网络层（“IP 级别”）进行转发**工作——因此配置两个接口之间的转发就像通过（虚拟）*路由器连接它们*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:07:14.433

根据 TCPIP 标准的要求，IP 转发默认关闭。你打开它： echo 1 > /proc/sys/net/ipv4/ip_forward

然后转发将起作用。您似乎在帖子中添加了几行，所以我无法确定您的网络配置。

如果 tun0 上的数据包以 eth0 上的目的地进入，现在将被转发。您的 Ubuntu 机器将用作路由器。它不会盲目地将进入 tun0 的数据包放到以太网上。

因此，如果您在 tun0 上的 IP 地址是 10.10.10.1，那么另一个主机，例如 tun0 上的 10.10.10.45 将必须配置 10.10.10.1 的网关（至少对于 10.80.1.0/24）。然后，如果它有一个 10.80.1.234 的数据包，它将首先将其转发到 10.10.10.1，您的 Ubuntu 机器会将其转发到以太网上的 10.80.1.234。接下来，THAT 机器将回复 10.10.10.45。它必须配置为使用 10.80.1.87 作为该主机/网络的网关。如果所有配置正确，它将起作用。

在 10.80.1.0/24 上的机器上配置正确网关的另一种方法是启用 ip 伪装。然后，您的 ubuntu 机器将伪造 FROM 地址并将 10.80.1.87 替换为 10.10.10.45 曾经的源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T07:02:13.860

听起来你想[在两个网络接口之间配置桥接](http://beginlinux.com/sec_train_m/10-traincat/1310-set-up-the-bridge)[这里](https://help.ubuntu.com/lts/serverguide/network-configuration.html#bridging)还有 ubuntu 特定的手册

```
$ sudo apt-get install bridge-utils
# vim /etc/network/interfaces: 
```

> ```
> auto lo
> iface lo inet loopback
> 
> auto br0
> iface br0 inet static
>         address 192.168.0.10
>         network 192.168.0.0
>         netmask 255.255.255.0
>         broadcast 192.168.0.255
>         gateway 192.168.0.1
>         bridge_ports eth0
>         bridge_fd 9
>         bridge_hello 2
>         bridge_maxage 12
>         bridge_stp off 
> ```

```
$sudo /etc/init.d/networking restart 
```

# php - 无法将数据插入mysql数据库

> ID：10275959
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:46:40.090
> 
> 标签：php

为了保存我的网络爬虫位置，它爬了多少页，我尝试将它们保存在数据库中，以便下次它从停止的位置开始

首先我有 2 列 id 的表检查点并检查

我的第一步是从数据库中获取旧位置并将其存储在 $i

```
$result = mysql_query( "SELECT * FROM checkpoint" ) or die("SELECT Error: ".mysql_error());
while($ch_me = mysql_fetch_assoc($result))
{
    $i=$ch_me["check"];
            echo "<br>i value in loop ".$i;
            break;  // need just first check value in db
} 
```

接下来我必须增加 $i 值并且必须将其更新到数据库中

```
while(1)
{   // doing work 
    $i++;
    // save i value in database
    mysql_query("UPDATE `checkpoint` SET `id`=1,`check`=$i WHERE 1"); 
```

}

现在 ia 面临的问题是更新查询......它无法将 $i 值更新到数据库 ????? 它第一次工作，然后当我下次运行时，不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:01:16.657

在哪里更新丢失

```
$result = mysql_query( "SELECT * FROM checkpoint limit 1" ) or die("SELECT Error: ".mysql_error());
$ch_me = mysql_fetch_array($result);
$i=$ch_me['check'];
$id = $ch_me['id'];
$i+=1;

mysql_query("UPDATE checkpoint SET check=$i WHERE id=$id"); 
```

# git - Git 回滚到之前的结帐

> ID：10275962
> 
> 赞同：1
> 
> 时间：2012-04-23T06:46:59.303
> 
> 标签：git

我已经将一些项目从 github 克隆到我的项目中，一切正常，我很高兴。

但是在一些 git pull 之后，我的项目与上游项目的新提交发生了一些冲突。

我想回滚到以前的结帐，但我不知道我的项目中以前哪个稳定结帐。

我如何知道它并回滚到以前稳定的（对我而言）项目结帐？我理解从长远来看更正确的方法来解决我与上游仓库的冲突，但有时我只需要回滚到以前的版本，以获得解决问题的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:59:44.190

如果您有一个可以执行的命令/脚本，并且可以说明一个“稳定点”（即某些工作，而不是当前不工作的状态），那么您可以考虑一个**`git bisect`**命令。
请参阅“[如何使用 git bisect？](https://stackoverflow.com/questions/4713088/how-to-use-git-bisect) ”。

这将帮助您隔离“它正在工作”的最后一次提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:09:20.500

`git reflog`应该告诉你操作的顺序，最近的在前。查找在您第一次拉取/合并之前操作的提交 ID；`checkout`或`reset --hard`到那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:04:38.213

您是否已经提交了合并？如果没有，就`git reset --hard`和你回到你发出之前的状态`git pull`。否则，`git reset --hard HEAD^`（如果合并是最后一次提交）可以解决问题，因为 git 默认情况下总是选择合并提交的第一个父级，即您的分支。如果有疑问，您可以随时使用 eg`gitk`来检查情况并找到分支上的最后一次提交，复制其 SHA1 哈希并恢复为该状态。

# objective-c - 类似于 AutoScout24 应用程序的可滑动拆分视图

> ID：10275967
> 
> 赞同：0
> 
> 时间：2012-04-23T06:47:13.407
> 
> 标签：objective-c, ipad, draggable, uisplitviewcontroller

我试图重现与 AutoScout24 iPad 应用程序相同的功能。我认为它只是一个带有一些特殊操作的 UIViewController。我会从 RootViewController 将其他 ViewController 添加到 View 并使用我自己的函数处理幻灯片效果。

但是有没有更简单的方法呢？喜欢 GitHub 上的完整解决方案？

以我自己的方式执行此操作是最佳做法吗？我在帖子顶部给出的解决方案是否正确？

如果您想试用该应用程序以了解其工作原理，请在此处查看：http: [//itunes.apple.com/de/app/autoscout24-mobile-autosuche/id311785642 ?mt=8](http://itunes.apple.com/de/app/autoscout24-mobile-autosuche/id311785642?mt=8)

AutoScout24 的截图![在此处输入图像描述](../Images/285d0b3d73109b55797138cfb08cdb2a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:54:22.340

看看 ViewDeck，它应该为您提供所需的功能：

[https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:57:11.427

我已经将 JTReveal 用于相同的目的，并且效果很好。看看[这里](https://github.com/mystcolor/JTRevealSidebarDemo)。

# ajax - ExtJS 4 使用带有组合框和 gridPanel 的存储过滤器 - 未显示过滤的数据

> ID：10275969
> 
> 赞同：0
> 
> 时间：2012-04-23T06:47:21.023
> 
> 标签：ajax, extjs

我真的很难理解或更正确的说法是 - 在我的任何商店上使用过滤器并将信息加载到网格中。我有一个更复杂的任务，但是为了理解事情是如何工作的，我决定尽可能使用最简单的例子来看看事情是如何发生的，然后添加更多的逻辑，这样我就可以磨练我的知识了。但是我仍然没有得到任何令人鼓舞的结果，所以我再次寻求帮助。

我的模型中有一个 gridPanel，它使用他自己的商店，在这种情况下：

> “记录列表存储”

我有

> xtype：组合；

看起来像这样：

```
 xtype: 'combo',
            id: 'records_list_author_id',
            emptyText: 'Филтриране по автор',
            editable: false,
            store: 'Users',
            displayField: 'firstname',
            valueField: 'id',
            lastQuery: '',
                        triggerAction: 'all',
                        queryMode: 'remote',
                        typeAhead: false,
            width: 200,
            listeners: {
                          select: this._filterRecords
                   } 
```

它使用它自己的商店来加载组合框中的数据，这些数据可以从用户那里选择。

第三部分，选择功能是：

```
_filterRecords: function()
    {
        var recStore =  Ext.getStore('FilterRecordsByAuthor');
        var a = Ext.getCmp('records_list_author_id').getValue( );
        var rec = Ext.getStore('FilterRecordsByForm').getAt(a);
        recStore.filters.clear();
            //recStore.load();
        recStore.filter([{
            "property":'form_id',
            "value": 1
                   }]);
        console.log(recStore.load());
    }, 
```

这是我认为用于获取过滤数据的第三个商店。问题是控制台日志显示我发送了过滤器，但每次我得到空结果。但是，如果一切正常，我认为它应该有一些信息，所以有错误或缺少某些东西，但我不知道应该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:17:04.063

`getValue()`组合框将为您提供组合框而不是商店中的索引的价值。所以在你得到这个值之后，你需要用类似的东西实际查找记录，`store.findExact('some_field', value)`并且只有在那之后才能`getAt()`使用你得到的索引。

# python - 如何判断 Django 中的 request.REQUEST 中是否缺少项目

> ID：10275971
> 
> 赞同：0
> 
> 时间：2012-04-23T06:47:36.343
> 
> 标签：python, django

我有五个要检查的键在 request.REQUEST 中。所以我想确保 first_name、last_name、age、gender 和 location 都在 request.REQUEST 中。然后，如果一个或多个不存在，我想告诉哪些属性丢失了。

有没有办法在不使用一堆 if 语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:59:48.507

创建一组您期望的键，以及一组返回的键，并将它们相交：

```
expected = set(['first_name', 'last_name', 'age'])
got = set(request.REQUEST.keys())

if expected.issubset(got):
    # Request contained everything you expected
    # Bonus points: check if field was present but empty
    for field in got:
        if request.REQUEST[field].strip() == "":
            # Field was present but empty
else:
    # Some things were different
    print expected.difference(got) 
```

你也可以`expected`在一开始就使用不同的方法。在这里，我检查了它`expected`是 的子集`got`，因此`got`可能包含超出预期的内容。如果要检查它们是否完全相同，请将其更改为：

```
if len(expected.difference(got)) == 0: 
```

（即，如果两者之间的差异为零）。

但实际上，您应该使用[Django 内置的 Forms](https://docs.djangoproject.com/en/dev/topics/forms/)。做这样的事情要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:32:53.620

```
import sets
missing = sets.Set(request.REQUEST.keys()).difference(['first_name', 'last_name', ...]) 
```

更新，使用内置集：

`set(request.REQUEST.keys()).difference(['first_name', 'last_name', ...])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:57:46.797

```
missing_keys = []
for i in ('item1', 'item2', 'item3'):
  if i not in request.REQUEST:
    missing_keys.append(i) 
```

# c++ - 比较 qsort 与 std::sort

> ID：10275972
> 
> 赞同：0
> 
> 时间：2012-04-23T06:47:41.783
> 
> 标签：c++, dictionary, std, stdmap, qsort

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:34:10.790

The signature of `std::sort()` is:

```
template <class RandomAccessIterator, class StrictWeakOrdering>
void sort(RandomAccessIterator first, RandomAccessIterator last,
          StrictWeakOrdering comp); 
```

So it requires two *iterators* and a *comparator*, not a pointer and a length. To fix your code, call

```
std::sort(pcount, pcount+structs_len, cmp_port_count); 
```

assuming that `cmp_port_count` is your comparator function which takes two `port_count_t` objects by reference and returns `true` when the first argument is to be ordered before the second argument, `false` otherwise.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:30:23.677

Try calling:

```
std::sort(pcount,pcount + 10); 
```

std::sort takes as arguments a begin and an end iterator. So in order to sort an array you pass a pointer to the beginning of the array and a pointer to one element after the end of the array(which is always array_pointer + array_size).

# vb.net - 我可以使用 vb.net 获得 div 高度吗？

> ID：10275974
> 
> 赞同：0
> 
> 时间：2012-04-23T06:47:59.313
> 
> 标签：vb.net

我在 web 应用程序中工作。我的 asp 页面有两个 div 标签。基于第一个 div 高度，我想修复第二个 div 的高度。第一个 div 高度是动态变化的。所以我想获得第一个 div 的高度，以便我可以修复第二个 div 的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:55:56.693

理论上你可以。但问题是关于 Css 和 Html。只需查询

> 具有css的等高列

你可以考虑[这个](http://css-tricks.com/fluid-width-equal-height-columns/)或[这个](http://www.vanseodesign.com/css/equal-height-columns/)来源。

# javascript - 用于测试 Javascript 的 Selenium 替换工具

> ID：10275975
> 
> 赞同：2
> 
> 时间：2012-04-23T06:48:04.343
> 
> 标签：javascript, jquery, testing, selenium

我在使用 Selenium 工具来测试包含一些 jQuery 的 Web 应用程序时遇到问题。（一些基于 javascript 事件的问题，例如[onclick](https://stackoverflow.com/questions/6134708/selenium-click-not-working-on-some-anchor-elements)问题、[onchange](https://stackoverflow.com/questions/2544336/selenium-onchange-not-working)问题）。有时， fireEvent() 无法帮助显示正确的行为。

比如我使用[jquery.facebox](http://defunkt.io/facebox/)插件（插件这样的blockUI），如果我点击，它应该显示淡入，但它不是，它尝试打开新页面，内容在facebox内。

有没有其他免费软件可以用来做硒这样的功能测试？或任何有助于解决javascript问题的硒插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:52:00.280

你可以看看 Phantomjs。它是 Javascript 的无头驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:00:41.793

从未使用过，但我听说[Telerik 的 Test Studio](http://www.telerik.com/automated-testing-tools/)是一个很好的 Selenium 替代品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:01:16.803

我了解您正在寻找替代方案，因此考虑到 WatiN 是一个常见的选择，尽管它仅在 IE 中运行良好（IMO 对 firefox 的支持不是很好）并且您可能会遇到相同的障碍。

但是，在我看来，您（可能）没有正确地与 UI 交互。在完全封装 Selenium 之前，尝试通过 Selenium WebDriver 'Actions' 调用 javascript 可能会受益更多。我发现我在尝试通过 Selenium WebDriver 直接评估 javascript 时遇到问题，但我也没有遇到过“操作”没有为我调用必要的 javascript 的情况。

也许发布一些关于您遇到的问题的代码？

编辑：另外，您使用的是 Selenium IDE 还是 WebDriver？首先，这可能是您的解决方案。

# java - 在 Java WS 中保存会话信息的位置

> ID：10275978
> 
> 赞同：0
> 
> 时间：2012-04-23T06:48:10.370
> 
> 标签：java, web-services, encryption

我正在构建一个安全系统，必须确保发送消息的用户与收到访问密钥的用户相同。例子。

用户 Bob 有一个属性`uniqueCode`，该属性对他来说是唯一的，并且可以让他从服务器接收各种信息。

有一个 Web 服务，它具有用于返回各种敏感数据的各种方法。当用户使用的客户端首次连接到 Web 服务时，它通过身份验证方法进行连接，即

1.  为该用户生成一个伪随机密钥
2.  将该密钥保存在服务器上并将其返回给用户。

从客户端到 WS 的每个后续请求都需要`uniqueCode`和 密钥。如果该对有效，则请求返回所需的信息。如果 x 分钟内没有活动，则密钥无效，客户端要求用户再次登录。

现在我的问题是，如何将密钥存储在服务器上？关键是可以序列化的 Java 对象。

我的选择

*   让他们保持在一个会话中。这是该公司的一位高级程序员所建议的，但这似乎不是要走的路。在我读到的所有地方，都建议 WS 不应该依赖底层的 HTTP 会话。
*   将它们保存在数据库中。一个可能的解决方案，但这需要我创建一个特定的数据库，为问题增加一个整体。
*   将它们保存在二进制加密文件中。这似乎是要走的路，但它是吗？由于我会在登录时生成密钥，因此我可以将密钥+一些信息保存在二进制文件中，自行加密，然后将其传递给用户。如果我收到的密钥可以解密用户文件，并且信息正确，则返回用户请求的信息。

我的想法是正确的，还是我错过了什么？我认为最后一种方法是最安全的方法，因为如果有人可以访问我的系统，闯入 db 会很容易，但在不知道其他用户密钥的情况下破译文件将非常困难。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:41:29.007

您是否需要保留密钥，以便在服务器重新启动后可用？

如果是，那么您必须将密钥保存在数据库、文件系统或其他适合您的机制中。我会使用数据库——这样你就不会依赖文件系统，以防你移动应用程序、更改权限等。

如果不是，为什么不在你的应用程序中使用一些缓存和 Time To Live 呢？只需`uniqueCode`用作密钥，并将加密密钥用作值。流行的选择是：

*   [缓存](http://ehcache.org/)
*   [番石榴缓存](http://code.google.com/p/guava-libraries/wiki/CachesExplained)
*   如果您不介意按时手动清理旧会话，`HashMap`则可以使用普通的旧会话。

# c# - WPF 应用程序在 Windows 8 平板电脑上工作？

> ID：10275981
> 
> 赞同：1
> 
> 时间：2012-04-23T06:48:44.040
> 
> 标签：c#, wpf, windows-8

我是 WPF 的新手。目前我正在 WPF 中开发个人（在家）应用程序。我正在使用 Visual Studio 2010。发布 Windows 8 平板电脑后，我可以在上面安装我的 WPF 应用程序吗？windows phone 8 怎么样？或者我需要在适当的平台上单独创建这些应用程序？

此外，我正在使用窗口编码器 4 进行视频和音频捕获。它可以在上述平台上工作吗？

进一步说明：该程序是用 C# 编写的，是一个全屏应用程序（意味着没有标题栏或关闭/最小化/最大化按钮）。

任何更多的细节或建议将非常完整。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:54:48.260

> 发布 Windows 8 平板电脑后，我也可以在上面安装我的 WPF 应用程序吗？

没有看到任何关于它的信息，但我没有看到任何会被禁止的技术原因。

> windows phone 8 怎么样？

您已经使用 Silverlight for Windows Phone 或 XNA 创建了一个新应用程序（很多 Silverlight 的东西直接映射到 WPF，所以不会很难）。这个适用于WP7和WP7.5。没有关于这个主题的 WP8 的官方信息。

> 此外，我正在使用窗口编码器 4 进行视频和音频捕获。它可以在上述平台上工作吗？

你是什​​么意思？你使用应用程序吗？

# url - url 文件路径直接指向根目录

> ID：10275982
> 
> 赞同：0
> 
> 时间：2012-04-23T06:48:48.230
> 
> 标签：url, url-rewriting, url-routing

我希望我的域的主页指向我正确的网站页面，而不显示所有文件路径。

**目前我的结构设置为：**

根/working_name/site_pages/homepage.php

根/working_name/site_pages/sitepage2.php

根/working_name/site_pages/sitepage3.php

**我希望网址简单地说**

根/homepage.php

根/sitepage2.php

根/sitepage3.php

我想避免更改我的任何实际文件夹和文件位置，因为这意味着我必须更改所有引用并且它可能会变得相当复杂。他们无论如何都要这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:56:47.017

如果您有权访问 .htaccess（在根文件夹中）；你可以这样做

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ working_name/site_pages/$1    [QSA,L]    
 </IfModule> 
```

# windows-phone-7 - 在 Windows Phone 上绘制图表的一些问题

> ID：10275991
> 
> 赞同：0
> 
> 时间：2012-04-23T06:49:55.553
> 
> 标签：windows-phone-7, windows-phone-7.1

我想在我的 Windows Phone 应用程序中可视化一些数据。所以我使用了来自这个命名空间的图表控件：System.Windows.Controls.DataVisualization.Toolkit。一切正常，但我想在 x 轴上显示另一个值，然后是数字。

这是图表控件的 XAML 代码：

```
<charting:Chart x:Name="gluChart">
  <charting:Chart.LegendStyle>
    <Style TargetType="datavis:Legend">
      <Setter Property="Width" Value="0"/>
      <Setter Property="Height" Value="0"/>
    </Style>
  </charting:Chart.LegendStyle>
  <charting:AreaSeries Name="gluLineChart" ItemsSource="{Binding}" IndependentValuePath="X"  dependentValuePath="Y" BorderThickness="0"/>
</charting:Chart> 
```

这是在文件后面的代码中（GlucoseItem 是数据库中的一个项目，它允许保存日期、时间、值和一个简单的注释）：

```
List<Point> points = new List<Point>();
int i = 1;
foreach (GlucoseItem gi in App.GluViewModel.AllGlucoseItems)
{
  points.Add(new Point(i, Convert.ToDouble(gi.GlucoseValue)));
  i++;
}
this.gluChart.DataContext = points; 
```

但现在我想在 x 轴上显示日期而不是数字。我该如何解决这个问题。这个图表控件还有另一个问题：它在图表控件周围显示了一条蓝线，但我无法隐藏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:59:40.160

这篇博文描述了如何在 DateTimeAxis 上格式化日期。

[http://www.diaryofaninja.com/blog/2011/01/10/two-little-tips-for-working-with-silverlight-chart-datetime-axes](http://www.diaryofaninja.com/blog/2011/01/10/two-little-tips-for-working-with-silverlight-chart-datetime-axes)