# StackOverflow 问答 11289000-11289999

# linux - gcc cc1：内存分配不足

> ID：11289002
> 
> 赞同：9
> 
> 时间：2012-07-02T06:55:58.877
> 
> 标签：linux, gcc, stack, ccl

我正在尝试使用 Angstrom Linux 在我的 BeagleBoard 中编译源代码。昨天我能够编译我的代码。但是今天我无法编译代码，它说：

```
ccl: out of memory allocating 268439608 bytes after a total of 405504 bytes
make *** [getimagefromcam1.o] Error 1 
```

我的编译字符串是：

```
gcc getimagefromcam1.c `pkg-config --cflags --libs opencv` -o getimagefromcam1 -lpthread 
```

代码是：

```
#include <cv.h>
#include <highgui.h>
#include <cxcore.h>
#include <stdio.h>

int main(int argc, char* argv[])
{    
  CvCapture* camera = cvCreateCameraCapture(0); // Use the default camera

  IplImage*     frame = 0;
  IplImage      img;

  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,2016) ;
  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,1512); 

  frame = cvQueryFrame(camera); //need to capture at least one extra frame
  frame = cvQueryFrame(camera);

  if (frame != NULL) {
    printf("got frame 1\n\r");
        cvSaveImage("webcam1.jpg", frame,0);
  } else {
      printf("Null frame 1\n\r");
  }

    frame = cvQueryFrame(camera); //need to capture at least one extra frame
  frame = cvQueryFrame(camera);

  if (frame != NULL) {
    printf("got frame 1\n\r");
        cvSaveImage("webcam1.jpg", frame,0);
  } else {
      printf("Null frame 1\n\r");
  }
  cvReleaseCapture(&camera);
  return 0;
} 
```

当我写“免费”时说

```
 total       used       free     shared    buffers     cached
Mem:        241260     221256      20004          0      13748     116184
-/+ buffers/cache:      91324     149936
Swap:            0          0          0 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T07:02:00.633

你显然内存不足（`268439 > 221256`）。现在你有两个选择：

1.  像这样创建一个[临时交换文件](http://www.cyberciti.biz/faq/linux-add-a-swap-file-howto/)。它归结为：

    ```
    su - root
    # for one GB of swap
    dd if=/dev/zero of=tmpswap bs=1024 count=1M
    mkswap tmpswap
    swapon tmpswap 
    ```

    我会选择这种方式作为快速修复，更不用说你真的应该用这么少的内存进行一些交换。

    如果您想永久更改此更改，请阅读该文章，其中包含一些有关权限和 fstab 的有价值的提示。

2.  尝试简化您的代码，以便`cc1`不需要太多内存。不知道该怎么做。

# c# - 用户控件的客户端验证，无需回发

> ID：11289003
> 
> 赞同：1
> 
> 时间：2012-07-02T06:56:03.317
> 
> 标签：c#, asp.net

我在两个不同的 ajax 更新面板中有一个包含两个用户控件的页面。一个控件有文本框，而另一个控件有一个按钮。我为两个用户控件的控件设置了相同的验证组。当我按下按钮时，客户端验证会触发，但验证触发后会有一个回补。

我已经设置了这样的验证组：

```
 public string ValidationGroup
        {
            get
            {
                return txtFirstName.ValidationGroup;
            }
            set
            {
                txtFirstName.ValidationGroup = value;
                txtLastName.ValidationGroup = value;
                txtPhoneNumber.ValidationGroup = value;
                txtEmail.ValidationGroup = value;
                txtFaxNumber.ValidationGroup = value;
                txtCompany.ValidationGroup = value;
                txtAddress1.ValidationGroup = value;
                txtAddress2.ValidationGroup = value;
                txtCity.ValidationGroup = value;
                txtZipPostalCode.ValidationGroup = value;
            }
        }

and here is how first control is user with validation group set to that property:

 <nopCommerce:AddressEdit ID="ctrlBillingAddress" runat="server" IsNew="true" IsBillingAddress="true"
                        ValidationGroup="CheckoutConfirm" />

and here is how the control with button looks like:

 <nopCommerce:CheckoutConfirm ID="ctrlCheckoutConfirm" runat="server" OnePageCheckout="true"
                                        OnCheckoutStepChanged="ctrlCheckoutConfirm_CheckoutStepChanged" />

where as markup for the button is like this:

 <asp:LinkButton runat="server" ID="btnNextStep" 
                    OnClick="btnNextStep_Click" ValidationGroup="CheckoutConfirm" CausesValidation="true"><img src="App_Themes/darkOrange/images/btnPlaceOrder.png" alt="Place Order" /></asp:LinkButton> 
```

请建议如何在没有回发的情况下进行客户端验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:01:19.523

您可以使用 javascript 进行此写入：

```
function check(){
if (Page_ClientValidate('validationgroup')) {
            return true;
        }
        else {

            return false;
        }
} 
```

还尝试在 chrome 中调试您的完整代码，可能您在某些行中也有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:34:14.100

更新面板上的更新模式设置为什么？

请参阅asp.net 论坛上[的此帖子。](http://forums.asp.net/t/1572520.aspx)这可能会对您有所帮助。

# java - Crawler4j 在 url 重定向中将 null 作为 parentURL，将零作为 parentDocID

> ID：11289004
> 
> 赞同：1
> 
> 时间：2012-07-02T06:56:09.250
> 
> 标签：java, web-crawler, crawler4j

我正在使用最新版本的 Crawler4j 来抓取一些提要 URL。我已经传递了一些种子 URL 以及文档 ID，并且我还将深度设置为零，因为我只想要该页面的内容。

问题是我无法获取这些种子 URL 的 parentdocid 和 parent URL。我想知道与原始 URL 关联的重定向 URL。

我`page.getWebURL().getParentUrl();`用来获取父网址。

例如[http://telegraph.feedsportal.com/c/32726/f/568297/s/18b0dd9a/l/0L0Stelegraph0O0Cculture0Cmusic0Cmusic0Enews0C87789850CNeil0EYoung0Eto0Erelease0Eautobiography0Bhtml/story01.htm](http://telegraph.feedsportal.com/c/32726/f/568297/s/18b0dd9a/l/0L0Stelegraph0O0Cculture0Cmusic0Cmusic0Enews0C87789850CNeil0EYoung0Eto0Erelease0Eautobiography0Bhtml/story01.htm)和 doc id 10

有关更详细的说明[http://code.google.com/p/crawler4j/issues/detail?id=163](http://code.google.com/p/crawler4j/issues/detail?id=163)

有人有类似的问题吗？

我再次尝试了不同的 URL，但结果仍然相同。controller.addSeed("feeds.reuters.com/~r/reuters/bankruptcyNews/~3/es0kEUT8gI0/",321);

输出： -

ParentDocId 0 DocID 322 父页面 null

```
UPDATE:-------- 
```

我浏览了 crawler4j 代码并暂时解决了我的问题。

```
-------- PageFetcher.java ---------

if (header != null) {

String movedToUrl = header.getValue();
movedToUrl = URLCanonicalizer.getCanonicalURL(movedToUrl, toFetchURL);
fetchResult.setMovedToUrl(movedToUrl);                                                            
webUrl.setParentUrl(webUrl.getURL()); //My Custom Code to add Parent URL.
/*This won't work due to collision with next            
document ID which needs to be unique.
webUrl.setParentDocid(webUrl.getDocid());*/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T02:48:33.533

我知道这是一个老问题，但我最近正在处理同样的问题，所以我想我会提出我的解决方案，以防其他人一起寻找解决方案。

基本上，在重定向页面上设置的 parentURL 和 parentDocId 不应该是原始页面的 URL 和 DocId，它们被设置为原始页面的 parentURL 和 parentDocId。

这是因为 parentURL 和 parentDocId 应该代表链接当前页面的页面，而不是重定向它的页面。

更改此行为通常会导致一些可能的问题，但在我们的例子中，因为我们只抓取单个页面，而不是通过页面链接执行长深度搜索，所以 parentDocId 和 parentURL 永远不会被使用。

考虑到这些信息，我能够找到解决方案。

只需重写`handlePageStatusCode()`WebCrawler 的方法并添加以下行：

```
if (webUrl.getParentUrl() == null) {
     webUrl.setParentUrl(webUrl.getURL());
} 
```

使用此代码，每当处理新页面时，`parentUrl`最初将设置为`null`，但现在将设置为当前页面的 url。如前所述，当一个重定向页面被添加到队列中时，它`parentUrl`被设置`parentUrl`为被重定向的页面，因此在处理重定向页面时，`parentUrl`它已经被设置，所以它不会被改变。

现在，当您在`visit()`方法或其他任何地方处理页面时，您将能够从`parentUrl`pages中提取原始 url `WebUrl`。

希望这些信息可以帮助某人！

# javascript - 如何在启用 AntiForgeryToken 的情况下允许跨站点请求

> ID：11289008
> 
> 赞同：0
> 
> 时间：2012-07-02T06:56:43.940
> 
> 标签：javascript, asp.net-mvc, antiforgerytoken

我们都知道如何使用 AntiForgeryToken 来避免跨站请求伪造，它已经足够有效了。

我有一个不同的案例（但我认为这很常见），我有两个 asp.net mvc Web 服务器，分别称为 A 和 B。

出于某种原因，鉴于 B 中请求的操作已打开**[ValidateAntiForgeryToken]**属性，我想从网页 A 向 Web 服务器 B 发出发布请求。如何使它成为可能？

我看到 Html.AntiForgery 具有域和虚拟路径的潜力：

```
@Html.AntiForgeryToken(salt, domain, virtualpath) 
```

试过这个，但没有运气。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:31:43.523

> 如何使它成为可能？

不可能的。防伪令牌的整个安全性依赖于 cookie，正如我们在学校都知道的那样，cookie 不能跨域共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:40:08.840

由于 cookie 许可，对于那些遇到相同问题的人，如果我们将这两个站点托管在同一域下，则答案是可能的。

例如：http://site1.com 和 http://site2.com 将不起作用

[http://mainsite.com/site1](http://mainsite.com/site1)和[http://mainsite.com/site2](http://mainsite.com/site2)将工作。

# node.js - 尝试通过nodejs套接字管道代理远程destop（3389），但失败

> ID：11289010
> 
> 赞同：0
> 
> 时间：2012-07-02T06:57:05.317
> 
> 标签：node.js, proxy, reverse-proxy

我正在尝试将远程 destop(3389) 代理到端口 8889。

```
var net = require('net');
var client_port = 8889;
var host = '127.0.0.1';
host = '192.168.7.69'; 

var client = net.createServer(function(c) {
    var loc = net.connect(3389, host, function() {
      console.log('connet to 3389 success.');
      loc.pipe(c);
      c.pipe(loc);
    });
}).listen(client_port, host, function(c) {
  console.log('proxy opened, visit: %j',client.address());
}); 
```

然后使用win7的远程桌面，访问自己，它失败了。

**更新：**

remotedestop connect 长时间显示“连接到 127.0.0.1:8889”，然后超时。

![在此处输入图像描述](../Images/68d64cc1ae64376d3eb79c06e4e78892.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:27:49.850

您正在覆盖`host`变量，首先分配`'127.0.0.1'`并在您 assing 下面的行中`'192.168.7.69'`，也许这就是问题

```
var host = '127.0.0.1',
    host2 = '192.168.7.69' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:33:50.920

解决了，换个顺序。

```
var net = require('net');
var client_port = 8889;
var host = '127.0.0.1';
host = '192.168.7.69'; 

var client;
var loc = net.connect(3389, host, function() {
  console.log('connet to 3389 success.');
  client = net.createServer(function(c) {
    loc.pipe(c);
    c.pipe(loc);
  }).listen(client_port, host, function(c) {
    console.log('proxy opened, visit: %j',client.address());
  });
}); 
```

# ruby - 为什么 instance_exec 和 class_exec 有这种不同的行为？

> ID：11289011
> 
> 赞同：1
> 
> 时间：2012-07-02T06:57:06.430
> 
> 标签：ruby, metaprogramming

我从文档中找到了以下代码摘录`instance_exec`

```
 class KlassWithSecret
    def initialize
      @secret = 99
    end
  end
  k = KlassWithSecret.new
  k.instance_exec(5) {|x| @secret+x }   #=> 104 
```

我对 instance_exec 的理解如下图所示，它在其单例类中添加了 @secret + 5

```
 +-----------------------+
  |   singleton class do  |
  |     def method1       |
  |     ...               |
  |     end               |
  |     ...               |
  |     @secret + 5       |
  |   end                 |
  |                       |
  |                       |
  +-----------+-----------+
              |
    +---------+-------+
    |  instance k     |
    |   @secret       |
    |                 |
    +-----------------+ 
```

所以我想出了使用 class_exec 的代码来获得相同的结果

```
k.singleton_class.class_exec(5) {|x| @secret + x} 
```

它给了我一个@secret is nil 错误，我想知道为什么会这样以及我的理解有什么问题

更新：

我注意到 k.instance_exec {binding} 和 k.singleton_class.class_exec {binding} 具有不同的绑定对象，因此它们必须是不同的。我仍然想知道它们在幕后是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:28:27.537

`instance_exec`是用 C 编写的，c-api 允许您在执行方法时指定 self 的值。

在它进入 ruby​​ 之前，人们通过在单例类上定义一个方法并调用它来实现它，而不仅仅是在单例类的上下文中执行东西（你可以在 activesupport 2.x 或 rspec_core's 中看到这一点`instance_eval_with_args`）

对象的单例类本身就是一个对象，因此具有自己的一组实例变量，这些实例变量不与相应的对象共享

# php - 生成跨平台兼容的 Blowfish 哈希 (PHP/Ruby)

> ID：11289012
> 
> 赞同：1
> 
> 时间：2012-07-02T06:57:07.160
> 
> 标签：php, ruby, blowfish, crypt

在 PHP 中，我们使用内置的[crypt()](http://au.php.net/crypt)函数生成一些密码散列来生成河豚散列。

```
<?php $hash = crypt("secure password", '$2a$10$ ... salt here ... $'); 
```

我看到 ruby​​ 有[String#crypt](http://ruby-doc.org/core-1.9.3/String.html#method-i-crypt)，但我们得到的输出完全不同（更短的哈希）。查看手册页`crypt (3)`，只有一些 Linux 发行版向 glibc 添加了河豚支持，所以我认为 ruby​​ 不支持它。

现在我用谷歌搜索并找到了`crypt`gem，但它似乎被硬编码为 2^16 个周期而不是我们使用的 2^10 个周期。它还在 ruby​​ 1.9.3 中给了我一个例外：

```
Crypt::Blowfish.new("abc").encrypt_block("foo")
TypeError: can't convert String into Integer
from /Users/chris/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/crypt-1.1.4/crypt/blowfish.rb:47:in `|' 
```

有人知道我们如何在 ruby​​ 中生成与在 PHP 中生成的相同的河豚哈希吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:10:58.417

BCrypt gem 可以满足我们的需要：

```
BCrypt::Engine.hash_secret("bob", "$2a$10$ ... salt here ...") 
```

# ios - (null) libc++abi.dylib: 终止调用抛出异常

> ID：11289014
> 
> 赞同：19
> 
> 时间：2012-07-02T06:57:10.217
> 
> 标签：ios, xcode, ipad, objective-c-2.0

我使用 Xcode 4.5PR 和 iOS 6beta 2。

我没有更改任何代码，我的应用程序抛出了标题中提到的异常。

我使用了 Debug Window 哪个函数导致了这个异常，但它显示

```
0x38dda960:  push   {r4, r5, r6, r7, lr} 
```

我怎样才能找到问题？我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T16:35:43.837

在 C++ 异常上设置断点以查找它被抛出的位置。

![在此处输入图像描述](../Images/614f8366c61e71f3f4b52127050a4772.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T01:54:54.167

如果您没有进行任何更改，这可能只是与目前的 iOS 6 测试版有关。

# 但是，对于那些在谷歌上搜索此错误的人，这里有一些一般性建议：

**1）它可能是您选择构建相同代码的模拟器：**

如果您没有更改任何源代码，请检查以确保您的方案仍然指向它上次工作的同一个模拟器。（例如，尝试呈现模态视图控制器 ( `presentModalViewController:`)，但忘记有条件地使用 iPad 的弹出框，可能会导致这种情况。）

**2）如果堆栈跟踪和控制台没有帮助：**

有时，堆栈中唯一的东西是`main`and `UIApplicationMain`，这使得很难追踪您自己的源代码中出了什么问题。这可能表明您正在调用或导致被调用的本机框架方法出现故障。

如果控制台中没有列出任何方法或特定对象，并且堆栈跟踪未指向您自己的类中的任何方法，请尝试将执行范围缩小到尽可能接近引发异常的点。在黑暗中选择断点时，我倾向于使用二进制搜索方法，选择一个枢轴点并上下移动执行顺序，并根据需要选择一个新的“中途”点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T13:57:22.770

当您从项目中手动删除情节提要并重新调整视图控制器以在没有情节提要的情况下使用时，通常会出现此错误。确保您的视图控制器已添加到 AppDelegate 中窗口的根视图控制器中，并且视图控制器 init 没有 nib 名称（因为您在删除情节提要时会删除它） - 最重要的是从您的 pList 中删除行告诉应用程序应该存在故事板文件的文件，例如“主故事板文件基本名称 (iPad)”或“主故事板文件基本名称 (iPhone)”。一旦这些都消失了，您的应用程序将停止寻找故事板，您将像金毛猎犬一样变得金黄！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T15:47:02.460

当我在“其他链接器标志”中设置 -ObjC 时，这发生在我身上并消失了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T07:37:51.107

发生此异常的原因有多种。找到确切根本原因的最佳方法是查看`console`. 在那里你会发现这样的文字：

`*** lorem ipsum lorem ipsum lorem ipsum
*** First throw call stack: (0x1d16012 0x16c3e7e 0xa4ef96 0x607704 0x6079a2 0x606876 0x617cb5 0x618beb 0x60a698 0x2b81df9 0x2b81ad0 0x1c8bbf5 0x1c8b962 0x1cbcbb6 0x1cbbf44 0x1cbbe1b 0x60617a 0x607ffc 0x1d1d 0x1c45) libc++abi.dylib: terminate called throwing an exception`

`lorem ipsum` 此处之前的文本`First throw call stack`将指出引发异常的确切问题。解决这个问题，你就可以开始了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T10:26:29.843

当我在一个对象上设置一个约束并将其分配给超级视图时，就会发生这种情况

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T11:10:11.250

当用户导入任何框架时会出现一些问题，因此还要将该框架导入应用程序资源文件夹中的 .pch 文件中。希望这可以帮助你们中的一些人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-21T19:30:44.403

确保您使用的是 xcode 的开发者预览版 (4.5) 并且没有习惯性地打开发布版 (4.3.3) 并且如果您还没有更新您无法运行的项目设置，那么肯定有 iOS 测试版来匹配将项目设置更新到 iOS 6 后，iOS 6 beta 上的应用程序将不再在 iOS 5.xx 设备上运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-06T09:00:56.183

我把这个卡住了很长一段时间，然后我发现我可以通过[为所有异常设置断点来获取异常的精确跟踪堆栈。](https://stackoverflow.com/questions/7703052/xcode-doesnt-show-the-line-that-causes-a-crash#7703570)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-15T17:16:35.247

出现此错误的原因...

在我的 .h 和 .m 文件中更改了一些 iboutlet 变量的名称后，我遇到了这个错误，但在这些变量的故事板链接中没有。重做链接后，一切都恢复正常了。希望这可以帮助你们中的一些人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-29T03:48:39.390

有时，如果您只是缺少一个库，就会发生这种情况——我正在使用 MKMapView 制作一个快速示例应用程序，并且在我将*MapKit.framework*添加到我的项目之前出现了这个错误。

# objective-c - [NSMutableArray objectAtIndex:]：空数组的索引 0 超出范围'

> ID：11289015
> 
> 赞同：5
> 
> 时间：2012-07-02T06:57:26.083
> 
> 标签：objective-c, nsmutablearray

我收到此错误：`[NSMutableArray objectAtIndex:]: index 0 beyond bounds for empty array`尽管我的数据库中有 75 个项目。为什么它向我显示此错误？我试图从我的数据库中获取项目，但它告诉我索引 0。

```
+(NSMutableArray *)GetAttitudeItems
{
    NSArray *arrDocPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *strDestPath = [NSString stringWithFormat:@"%@/ItemsAndCategory.sqlite",[arrDocPath objectAtIndex:0]];

//sqlite3 *sqlite;

NSMutableArray *arrItemsList;
if(sqlite3_open([strDestPath UTF8String],&database)==SQLITE_OK)
{

    const char *strQuery = "SELECT * FROM Items WHERE CategoryName='ATTITUDE' ORDER BY RANDOM()";
    NSLog(@"The value is %s",strQuery);
    sqlite3_stmt *stmt;
    //char *err;

    arrItemsList  = [[NSMutableArray alloc]init];

    if(sqlite3_prepare_v2(database, strQuery , -1,&stmt, NULL)==SQLITE_OK)
    {
        while (sqlite3_step(stmt)==SQLITE_ROW) 
        {

            NSString *StrCatename = [NSString stringWithUTF8String:(char*)sqlite3_column_text(stmt, 1)];
            NSString *StrItemName = [NSString stringWithUTF8String:(char*)sqlite3_column_text(stmt, 0)];

            Itemslist *itemlist = [[Itemslist alloc]init];
            itemlist.CategoryValue = StrCatename;
            itemlist.ItemValue =StrItemName;
            [arrItemsList addObject:itemlist];

        }

    }

    if (stmt!=nil)
    {
        sqlite3_finalize(stmt);
    }
}

sqlite3_close(database);

return arrItemsList; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:00:41.450

如果您确信您的数据库调用应该返回数据，我会确保您的至少一个 if () else () 语句实际上受到了打击。否则，鉴于您在上面对其进行了初始化，您的数组为空：

`NSMutableArray *arrAlert = [[NSMutableArray alloc]init];`

一个简单的检查自己的方法是在链`else`的底部添加一个语句`if` `else`，并在那里断言一些东西（即，至少打印一些东西，对于初学者。）

# loops - 不等增量循环

> ID：11289027
> 
> 赞同：2
> 
> 时间：2012-07-02T06:57:47.110
> 
> 标签：loops, sas, increment, do-loops

我有很多以“s”开头的 sas 数据集文件，后跟一些数字，如 s1 s7 s13 s32 等（我有很多）。对于每个文件，我运行一组代码，保存我的最后一个结果，然后使用以下数据集文件重新启动。通常，当我的数据集文件编号是连续的，例如 s1 s2 s3 s4 s5...时，它很容易使用，例如 a `%do i=1 %to 120`. 但是如果我想做一个不等增量的循环呢？我怎样才能做到这一点？比如一个`%do i=1 7 13 32...`. 这在 MATLAB 中很容易，但在 SAS 中我不太确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:21:18.027

使您的 %do 从最低的数据集编号变为最高。然后只需检查数据集是否存在。

```
%Let lib=yourlib;
%Macro Process;

 %Do i = 1 %to 1000;
  %if %sysfunc(exist(&lib..s&i)) %then %do;

    <your code>

  %end;

 %end;

%Mend process;
%process 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:47:45.100

下面的示例获取数据集 S1、S3 和 S10 并对其进行处理，输出数据集 NEW1、NEW3 和 NEW10：

```
/* Example data sets */
data s1 s3 s10;
run;

%macro mymac;

  /* Create 'array' of macro variables DSET1, DSET2...up to a max of DSET9999.
     Each DSETx macro variable will contain a data set number. */
  proc sql noprint;
    select compress(memname,"sS") into :dset1-:dset9999
    from sashelp.vtable
    where libname="WORK" and upcase(substr(memname,1,1))="S"
          and input(compress(memname,"sS"),8.) ne .;
  quit;
  %let numdsets=&sqlobs;

  /* Process data sets */    
  %do i=1 %to &numdsets.;
    data new&&dset&i.;
      set s&&dset&i.;
    run;
  %end;
%mend mymac;
%mymac 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:31:53.440

您可以在正常的 do 循环中执行非顺序增量，但不能以相同的方式在宏 do 循环中执行。SAShelp 网站上有一个解决方法。

[http://support.sas.com/kb/26/155.html](http://support.sas.com/kb/26/155.html)

我将首先使用以下代码将数字放在逗号分隔的宏列表中。prxmatch 函数搜索以“S”开头的数据集名称，后跟一个数字。完成后，您可以按照 SAS 网站上的代码进行操作。

```
proc sql noprint;
select compress(upper(memname),'S') into :ds_num separated by ',' from dictionary.tables
where libname='WORK' and prxmatch("/S\d+/",upper(memname));
quit;

%put &ds_num.; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T10:00:39.153

%SCAN 是您的朋友。看看下面的示例代码 -

```
%let nums = 1 2 4 6 13 29 32;

%macro iter();

%let cnt = %sysfunc(countc(&nums," "));
%let cnt = %eval(&cnt + 1);
%put &cnt;

%do i = 1 %to &cnt;
%put I will now process dataset s%scan(&nums,&i," ");
%end;

%mend iter;

%iter() 
```

您可以修改 %put... 部分以编写 DATA 步。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T21:57:01.037

这是 Mozan 以上回答的更新。我不建议使用 CountC 来计算列表中的元素。请改用 CountW。注意以下更新：

```
%let nums = 1 2 4 6 13 29 32;

%macro iter();

%let cnt = %sysfunc(CountW(&nums));
%put &cnt;

%do i = 1 %to &cnt;
  %put I will now process dataset s%scan(&nums,&i);
%end;

%mend iter;

%iter() 
```

# scripting - 安装东西真的有什么作用？

> ID：11289030
> 
> 赞同：1
> 
> 时间：2012-07-02T06:57:58.127
> 
> 标签：scripting, installation

作为一名拥有“很多”计算机编程经验的计算机工程专业的学生，​​我说得轻描淡写，因为我觉得你学得越多，你就会发现你真正知道的东西有多么少。

每当我创建程序时，无论是 Java（游戏引擎/游戏）、C（或任何 C 变体）（应用程序）、PHP（在线脚本/数据库程序）、Javascript（UI）等。我从来没有完全理解“安装”程序的作用，而且我从来不需要这样做。

从之前的研究中，我了解到安装程序会写入注册表，但是为什么需要这个复杂的过程呢？安装程序时实际发生了什么？当您可以创建一个可执行文件（C 中的 .exe / java 中的 .jar 文件）时，为什么要这样做？

谈到脚本语言（我主要知道 php，所以我会坚持这个例子）。我听到“安装脚本”或“安装插件”。实际上，安装脚本不只是将一组带有scripts/html forms/javascript/etc的文件夹复制到服务器中吗？

我将不胜感激任何关于该主题或任何类似主题的解释、任何链接和任何个人知识。我尝试尽可能多地学习，但总是有更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:57:25.920

给出一个非常笼统的答案：安装是确保程序已完全设置好执行的过程。（甚至还有一个使用相同定义的[维基百科页面）。](http://en.wikipedia.org/wiki/Installation_%28computer_programs%29)我不会尝试对所有安装类型进行完整而准确的总结，而只是尝试生成一个总体概述。

最后一切都由cpu命令控制。要到达那里，需要进行翻译。除此之外，在正常情况下，还有一个封装环境（操作系统）。在这些之间，您可能依赖于驱动程序等。

操作系统，无论是 windows / Unix / 等，我们都在那里，所以我们不必担心任何直接的硬件转向（无论如何对于这种情况）所以给一个随机的编程语言或脚本，我们需要让它运行操作系统。直接在操作系统上，或通过诸如 .Net/Java（Apache for PHP）之类的框架

到目前为止已知的摘要，但我们已经为我们在这里讨论的安装类型设置了参数:)

在经典 C 中，语言首先被编译成一组可由操作系统解释的指令。正如你所说，不需要安装，只需要预编译。在 Java/.Net 中，已经安装了一个框架，因此编译的中间语言和所有引用都由框架处理。诸如 Javascript 之类的浏览器语言在浏览器中进行解释。浏览器本身已安装，因此无需安装。PHP 脚本也被解释。大部分时间由 Apache 完成，但不需要单独安装。当然，其他脚本语言，如批处理/vbscript/等都有自己的操作系统解释器。

现在要了解在阅读有关写入注册表时触发我的观点，提到*da da da dum* [DLL Hell](http://en.wikipedia.org/wiki/DLL_Hell)。链接的维基百科页面描述了 dll 遇到的问题，但我主要想提及它作为注册表编写的桥梁。安装需要写入注册表的最常见情况之一是*注册*dll。您不能简单地拥有一组执行 (.exe)，它使用了另一个集合 (.dll) 中的一堆函数，除非操作系统知道另一个集合 (.dll)。为了使 dll 为人所知并可用，需要对其进行注册。这可以通过命令提示符（如果我没记错的话是 regsrv32）来完成，但对于最终用户，安装程序会处理这个问题。

底线是，安装程序准备环境，以便程序可以运行。即使该程序在技术上无需额外准备即可运行，安装程序也可以设置桌面快捷方式、添加菜单选项或链接文件类型（Windows 中的另一个注册表设置）。

# html - 如何设置字段集框的大小以及如何在 HTML 或 HTML5 中编写单选按钮事件？

> ID：11289035
> 
> 赞同：0
> 
> 时间：2012-07-02T06:58:33.433
> 
> 标签：html, html-parsing

嗨，这是我的 HTML 代码::::

```
<form>
      <fieldset >
       <legend><b>TRIP</b></legend>
       <p>
            <input type = "radio"
                 name = "radSize"
                 id = "sizeSmall"
                 value = "Pligrimage"
                 />Pilgrimage</br>

          <input type = "radio"
                 name = "radSize"
                 id = "sizeMed"
                 value = "Vaccation" />Vaccation</br>

        </p>       
      </fieldset>     
    </form> 
```

我有两个问题（1.）在使用时`<fieldset>`我希望该框应仅限于文本长度，而不应扩展到整行。（2.）是否可以写一个`Onclick event for radiobutton`，如果可以，请告诉我如何编写它以便第一个单选按钮调用`pilg.html`和第二个调用`vacc.html`他们的点击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:29:30.863

回答你第二个问题有两种方法

1.  编写一个 javascript 方法来加载新页面，通过为单选按钮指定事件 onclick="MethodName()"` 来调用 javascript 方法。使用 Window .location 方法更改 javascript 中的当前页面，例如： window.location.assign("http://www.w3schools.com")

2.  在锚标记内写入单选按钮，将页面 url 作为 href

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:53:34.483

你的第一个问题是通过给字段集一个固定的宽度来解决的。如果您希望这是动态的，可以在 css 或 javascript 中完成，但我认为在您的情况下固定宽度就足够了。

您的第二个问题可以使用 javascript 解决，但我不确定您为什么需要这些作为无线电输入。这里的链接会好得多。

请看下面的小提琴。 [http://jsfiddle.net/mrfunnel/EUgLt/2/](http://jsfiddle.net/mrfunnel/EUgLt/2/)

# php - 为什么 TinyMVC 不加载控制器？

> ID：11289037
> 
> 赞同：0
> 
> 时间：2012-07-02T06:58:35.820
> 
> 标签：php

我对 TinyMVC 有疑问。我对这个“MVC 框架”真的很陌生。

我在这里下载了 TinyMVC 的最新版本：http: [//www.tinymvc.com/download/](http://www.tinymvc.com/download/)

我只是按照指南，我已经到达控制器文档：[http ://www.tinymvc.com/documentation/index.php/Documentation:Controllers](http://www.tinymvc.com/documentation/index.php/Documentation:Controllers)

我按照说明在**myapp/controllers/hello.php中创建了一个 hello.php 文件**

这是hello.php的代码

```
class Hello_Controller extends TinyMVC_Controller
{
  function index()
  {
    echo "Hello World.";
  }
  function time()
  {
    echo "The time is now.";
  }
} 
```

我也把这个**.htaccess**放在 htdocs 中（index.php 所在的位置）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

现在的问题是 tinyMVC 似乎没有正确加载控制器。

我刚试过：

```
http://localhost/myproject/www (AND I SEE THE DEFAULT CONTROLLER correctly)

http://localhost/myproject/www/hello (I STILL SEE THE DEFAULT CONTROLLER)

http://localhost/myproject/www/hello/time (I get the follow error)

Error: 0
Message: Unknown controller method 'time'
File: C:\xampp\htdocs\myproject\tinymvc\sysfiles\plugins\tinymvc_controller.php
Line: 58 
```

我不认为这是错误的，但我的控制器没有正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:16:24.617

TinyMVC.php 中的第 188 行存在问题。

将 file_exists 更改为 stream_resolve_include_path（文件位于 tinymvc/sysfiles/

# groovy - 简单的 Groovy 控制台解析问题

> ID：11289040
> 
> 赞同：1
> 
> 时间：2012-07-02T06:58:43.803
> 
> 标签：groovy

我只是从 Groovy 开始。我确定我错过了一些愚蠢的东西。有人能告诉我为什么这段代码在 groovy 控制台中失败了吗？它认为输入字符串中只有 14 个单词和 1 行。

```
def input = """
line1: 50 65 42
line2: 123 456 352 753 1825
line3: 10 25 20 48 107
"""

words = input.split(/ /)
lines = input.split(/^/)
assert words.size() == 16
assert lines.size() == 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:56:15.377

在第一个的情况下`assert`，错误消息可以提示问题出在哪里：

```
Assertion failed: 

assert words.size() == 16
       |     |      |
       |     14     false
       [
       line1:, 50, 65, 42
       line2:, 123, 456, 352, 753, 1825
       line3:, 10, 25, 20, 48, 107
       ] 
```

那里缺少一些逗号，并且`words`打印值的方式似乎是错误的。正在发生的事情是`input.split(/ /)`用空格分割输入字符串，但是，因为它还包含换行符，所以有些单词没有被分割，例如，`'42\nline2:'`.

为了更清楚地看到这一点，我们可以使用该[`inspect`](http://groovy.codehaus.org/api/org/codehaus/groovy/runtime/DefaultGroovyMethods.html#inspect%28java.lang.Object%29)方法，它为我们提供了一个具有对象文字形式的字符串：

```
println input.inspect()
// --> '\nline1: 50 65 42\nline2: 123 456 352 753 1825\nline3: 10 25 20 48 107\n'

println input.split(/ /).inspect()
// --> ['\nline1:', '50', '65', '42\nline2:', '123', '456', '352', '753', '1825\nline3:', '10', '25', '20', '48', '107\n'] 
```

用空格分割单词 Groovy 添加了一个方便的非参数化[`split`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#split%28%29)方法：

```
def words = input.split()
assert words.size() == 16
println words.inspect()
// --> ['line1:', '50', '65', '42', 'line2:', '123', '456', '352', '753', '1825', 'line3:', '10', '25', '20', '48', '107'] 
```

要获取字符串的行，您可以使用[`readLines`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#readLines%28%29).

```
def lines = input.readLines()
println lines.inspect()
// --> ['', 'line1: 50 65 42', 'line2: 123 456 352 753 1825', 'line3: 10 25 20 48 107'] 
```

但是请注意，这`readLines`将返回四个元素，因为有第一个空行（我不知道为什么它会忽略最后一个空行），所以`assert lines.size() == 3`仍然会失败。

您可以使用结果列表过滤掉那些空行[`Collection#findAll()`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#findAll%28%29)，或者直接调用[`String#findAll(Pattern)`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#findAll%28java.util.regex.Pattern%29)输入字符串：

```
def lines = input.readLines().findAll()
assert lines.size() == 3

def lines2 = input.findAll(/\S+/)
assert lines2.size() == 3

assert lines == lines2 
```

# android - 安卓屏幕坏了。（彩线，无一例外，黑屏）

> ID：11289043
> 
> 赞同：0
> 
> 时间：2012-07-02T06:58:58.143
> 
> 标签：android, crash

一些用户报告了这个问题（戴尔、三星设备）。我检查了崩溃日志，没有崩溃。我不知道有什么例外，但这是可能的。

有人看到这样的东西吗？还是黑屏？

![在此处输入图像描述](../Images/282300bd9dd75d435807dce3f3c67387.png)

# ruby - Windows 上的 ruby -opengl 错误

> ID：11289044
> 
> 赞同：1
> 
> 时间：2012-07-02T06:58:59.437
> 
> 标签：ruby, windows, opengl

我正在尝试在 Windows 上使用 OpenGL 设置 Ruby。我[为 Windows 安装了预编译的 ruby​​-opengl gem](http://rubyforge.org/frs/download.php/52687/ruby-opengl-0.60.1-x86-mswin32-ruby19.gem)，安装完成没有错误，但是当我尝试运行他们的`nehe_lesson02.rb`示例时，我收到以下错误：

```
c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': 127: The specified procedure could not be found.   - c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-opengl-0.60.1-x86-mswin32/lib/gl.so (LoadError)
from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from c:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from C:/Users/Jonathan/My Documents/Aptana Studio 3 Workspace/barberry/main.rb:8:in `<main>' 
```

任何成功地使用 OpenGL 设置 Ruby 的人愿意提供一些技巧吗？

# php - 将我的网站与谷歌日历集成

> ID：11289050
> 
> 赞同：2
> 
> 时间：2012-07-02T06:59:30.530
> 
> 标签：php, google-api, google-calendar-api

我正在用 PHP 开发一个网站。该站点的用户可以从我提供的日历中进行预约。当用户进行预订时，它应该被添加到我的谷歌日历中。

对于这种情况，我需要什么样的身份验证机制？以下哪一个？1\. Web 应用程序 2\. 服务帐户 3\. 已安装的应用程序

注意：我不想访问我的网站用户的谷歌日历。我只是希望他们的预订显示在我的谷歌日历中。并且，如果可能的话，请发布一个我可以开始编码的来源。我搜索过，但关于这个主题的大多数教程都是基于 .NET 的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:04:45.860

您需要使用[Google Calendar API](https://developers.google.com/google-apps/calendar/)设置 OAuth 接口。但是，您需要将其设置为始终连接到您的 Google 日历，而不是使用 OAuth 连接到用户的 Google 日历。如果您进入日历 API 的 Google 文档，他们有名为[Write your First App 的](https://developers.google.com/google-apps/calendar/firstapp)部分。这有多种语言的示例代码，包括 PHP。这是一个很好的起点。

注意：当我说它将使用您的帐户时，我的意思是您像客户一样设置它并通过 OAuth 连接以获取令牌。然后保存这些令牌并将它们用于对 Google 日历的所有访问。由于令牌已进入您的帐户，因此您将始终连接到您的日历。

# asp.net - 从另一个页面更改用户控件的属性

> ID：11289055
> 
> 赞同：0
> 
> 时间：2012-07-02T06:59:55.890
> 
> 标签：asp.net, user-controls, pagination

我有一个名为“DashboardUserControl.ascx”的用户控件

它有一个功能：

```
public void setPagination(Boolean pagination)
    {
        this.DashboardGridView.AllowPaging = pagination;
    } 
```

我还有另外两个页面，通过拖放插入了该用户控件：

1.  MyDashboard.aspx：我想从此页面将用户控件的分页设置为“true”。

2.  SharedDashboard.aspx：我想将用户控件的分页设置为“false”。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:07:48.650

如果您将用户控件添加到两个页面，则您有两个用户控件实例。这意味着页面上的用户控件未连接。

因此要调用该方法，您可以在页面的 Page_Load 中简单地执行以下操作。以下代码示例适用于 MyDashboard.aspx.cs。*在 SharedDashboard.aspx.cs 中将true*更改为*false*。

```
protected void Page_Load(object sender, EventArgs e) {
    this.DashboardUserControl.setPagination(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:11:25.910

你要么：

*   在 MyDashboard.aspx 和 SharedDashboard.aspx 后面的代码中调用 setPagination，并根据每个页面的要求设置布尔值。

或者（我更喜欢）

*   将方法重写为属性：

    `public bool Pagination { set { this.DashboardGridView.AllowPaging = value; } get { return this.DashboardGridView.AllowPaging; } }`

如果您添加该属性，您可以从后面的代码或 MyDashboard.aspx 和 SharedDashboard.aspx 的标记中为其分配一个*值*。例如`<uc:MyControl id="myControl1" Pagination="true" runat="server" />`

希望这可以帮助

# delphi - 如何在调试时从 Delphi 应用程序步入 C++ DLL 源文件

> ID：11289057
> 
> 赞同：0
> 
> 时间：2012-07-02T07:00:10.960
> 
> 标签：delphi, debugging, visual-c++, delphi-7

我的 Delphi 模块使用 C++ DLL 函数。在 Delphi [IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)中调试时，我需要进入[Visual C++](http://en.wikipedia.org/wiki/Visual_C++#32-bit_versions)中的 C++ 函数。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:20:05.217

你所要求的是不可能的。一次只能将一个调试器附加到进程，因此当 Delphi 单步执行 Delphi 模块时，Visual Studio 无法调试 DLL。

你唯一的希望是如果你安装了[C++Builder](http://en.wikipedia.org/wiki/C++Builder)。然后，您可以让它在单个 IDE 实例中调试 Delphi 模块和 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:42:18.803

如果它是一个没有源代码和符号的第三方 dll，那么你很不走运，它是你自己用 VC 构建的 dll，你可以将 delphi exe 设置为加载 DLL 的进程

# java - 如何使用 sftp 上传目录

> ID：11289059
> 
> 赞同：1
> 
> 时间：2012-07-02T07:00:19.337
> 
> 标签：java, sftp

我正在构建一个基于 Java Web 的应用程序。要将目录和其中的文件从我的用户客户端上传到我的服务器机器，我正在使用仅支持 ftp 的客户端 Java 小程序。

如何使用 sftp 和 java 上传一个充满文件的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:34:22.773

“仅 ftp”与“sftp”无关。您需要一个 sftp-applet 或在您的服务器上启用 ftp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:16:00.063

我正在使用 JSCH aip( [Link](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/package-summary.html) ) 来贡献 sftp 应用程序。Jsch没有帮助上传目录的方法，你可以获取你要下载的目录中的所有文件路径，然后将它们传递给上传方法（ChannelSftp类中的put(....)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:38:04.217

使用 SFTP 是个好主意，因为 FTP 存在一些安全问题。

您将需要找到 SFTP 客户端类以在您将提供给用户的 Java 客户端小程序中使用，以代替您现在使用的 FTP 类。

而且，您将需要在服务器硬件上安装 SFTP 服务器软件包，以便您的客户端小程序可以连接。（您的服务器硬件可能已经有这个包。在这种情况下，您需要激活它并配置它。）

最后，您需要了解 SFTP 和 FTP 并没有真正提供原始操作“上传目录”。您的客户端 Java 软件需要弄清楚如何上传用户机器上目录中的所有文件。

# python - 在解析列表时编写python函数来处理错误情况

> ID：11289063
> 
> 赞同：0
> 
> 时间：2012-07-02T07:00:37.230
> 
> 标签：python, list, typeerror

通过关于 python 列表的教程，我尝试编写一个 python 函数来计算以特定字母开头的单词的出现次数

```
def count_occurrences(p,letter):
    count = 0
    for elem in p:
        if elem[0]==letter:
            count = count+1
    return count

>>>count_occurrences(['damon','jim','dennis'],'d')
2
>>>count_occurrences(['damon','jim'],'d')
1
>>>count_occurrences([],'d')
0 
```

但是，如果我输入一个包含错误类型的列表，比如说`[1,2,3]`，它会抛出一个，`TypeError:'int' object is unsubscriptable`因为代码 `elem[0]`是在一个 int 上调用的。

那么，我该如何处理呢？我应该使用`try : except`块还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:04:07.717

Try ... except 给你很大的灵活性来处理代码，这将是一个好主意，

检查此文档[python 异常处理](http://docs.python.org/utorial/errors.html)

*与“传统”错误管理技术相比，异常处理具有以下优势：*

**将错误处理代码与“常规”代码** 分开提供了一种方法，可以将异常情况发生时的处理细节与程序代码的正常逻辑流程分开； **在调用堆栈中向上传播错误** 允许在更高级别采取纠正措施。这允许在调用发生错误的方法中采取纠正措施； **分组错误类型和错误区分** 允许为异常处理创建类似的层次结构，以便以逻辑方式对它们进行分组。

只是一个例子：

```
def count_occurrences(p,letter):
    count = 0
    for elem in p:
        try:    # Put you code which can throw exception in try Block
            if elem[0]==letter:
                count = count+1
        except Exception, ex: # You can catch specific exceptions if you want over here
              print ex.message  # Handle your exception here
              #raise   # The 'raise' statement with no arguments inside an error
                       # handler tells Python to re-raise the exception with the 
                       # original traceback intact

    return count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:06:12.660

你必须从你的函数中决定你想要什么：

```
def count_occurrences(p,letter):
    count = 0
    for elem in p:
        if isinstance(elem, basestring):
            if elem[0]==letter:
                count = count+1
        else:
            # you could do something else here or just ignore it, but it seems
            # that your function really needs a list of strings as argument 
            # so it would be an error to call it with anything else and it should 
            # not fail silently.
            raise TypeError("String expected")
    return count 
```

*   要么它可以忽略不匹配类型的元素。在这种情况下，您`else`在上面的示例中将 -section 留空。
*   您只想接受字符串列表作为参数。在这种情况下，上面的示例完全属于您，如果传递了无效类型，它甚至会引发错误。

[`isinstance`](http://docs.python.org/library/functions.html#isinstance)有关更多帮助，请参阅 python 文档。

不过，在循环外的旁注`try-except`块上可以带来更多的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:23:34.537

向您的条件添加`isinstance()`条件以`if`检查类型`elem`：

```
def count_occurrences(p,letter):
    count = 0
    for elem in p:
        if isinstance(elem,str) and elem[0]==letter: #if the first condition is true then
                                                     # only it'll check the next condition
            count = count+1
    return count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T07:04:04.627

如果您不使用，`try ... except`您可以执行以下操作：

```
if isinstance(elem[0],int): 
 { ... } 
```

这样，perharps，您可以“跳过”该元素。

更好的解决方案是`isinstance`使用正确的类型进行测试，并且在“测试失败”的情况下跳过该元素。

所以

```
if isinstance(elem,str) and elem[0]==letter:
 {...} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T07:14:26.193

更有效地写为：

```
sum(1 for i in sequence if i.startswith('d')) # or for single char i[0] == 'd' 
```

如果它是无效类型，那么您可以使用 try/except 使操作失败，或者只过滤掉合适的类型，例如：

```
sum(1 for i in sequence if isinstance(i, basestring) and i[0] == 'd') 
```

或者处理失败，因为列表*应该*是同质的：

```
 try:
       return sum(1 for i in sequence if i[0] =='d')
   except TypeError as e:
       pass # type doesn't have subscripting
   except IndexError as e:
       pass # may or may not be a str, but len() == 0 
```

ETC...

附带说明：使用 str.startswith('d') 不会引发，因此`''.startswith('d')`返回 False。

# php - 多个结果集 php

> ID：11289072
> 
> 赞同：0
> 
> 时间：2012-07-02T07:01:16.937
> 
> 标签：php, mysql, resultset, procedure

我有一个过程，它为以下过程返回多个结果集

```
DROP PROCEDURE IF EXISTS Proc1;

CREATE PROCEDURE Proc1()

BEGIN

  SELECT Column1
    FROM Table1

  SELECT Column2
    FROM Table2

END 
```

如何编写从两个选择查询中获取记录的 PHP 代码 - 多个结果集

```
$Conn   = $this->new mysqli('localhost', 'root', '', 'dbName');         

$strSQL = 'CALL Proc1()'; 

$stmt = $Conn->prepare($strSQL);

$stmt->execute();

$stmt->bind_result($Column1);

while($stmt->fetch())
{

  array_push($row, $Column1);

} 
```

现在我应该怎么做才能从过程中的第二个 Mysql 选择查询中获取记录集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:40:33.367

您可以使用 mysqli 扩展来完成。

看看这些功能 -

*   [使用结果](http://www.php.net/manual/en/mysqli.use-result.php)
*   [下一个结果](http://www.php.net/manual/en/mysqli.next-result.php)

# qt - 如何使用 Qt /KDE 将 base64 值转换为十六进制值？

> ID：11289074
> 
> 赞同：3
> 
> 时间：2012-07-02T07:01:23.647
> 
> 标签：qt, cryptography, kde

我正在开发一个使用 Qt 并具有现有方法来加密/解密十六进制校验和值的软件。目前，我遇到了一些以 64 为基数的校验和值。与其重新发明轮子为 base64 校验和做同样的事情，我想知道是否有办法使用 Qt 或 KDE 将 base64 值转换为十六进制值库。这样我就可以避免编写半重复的代码来完成几乎类似的任务。

这是它应该如何工作的：

```
Input: VO2S9pgCq1lqgTFTKssVj6amn0npNdagtjI8ziDtiRQ=
Output: 54ed92f69802ab596a8131532acb158fa6a69f49e935d6a0b6323cce20ed8914 
```

输入包含在 QString 中。此外，如果 Qt/KDE 中没有内置支持，您能否建议我使用 C++ 中的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:19:10.910

这是我现在尝试的：

```
 QString b64("VO2S9pgCq1lqgTFTKssVj6amn0npNdagtjI8ziDtiRQ=");
 QByteArray ba = QByteArray::fromBase64(b64.toAscii());

 QString res(ba.toHex());

 qDebug() << res; 
```

可能有更正确的方法可以做到这一点，但我现在太困了，对不起。

作为一个函数：

```
 /// untested
 QString base64ToHex(const QString& b64){
     QByteArray ba = QByteArray::fromBase64(b64.toAscii());
     QString res(ba.toHex());

     return res;      
 } 
```

或者干脆..

```
 QString base64ToHex(const QString& b64){
     return QString(QByteArray::fromBase64(b64.toAscii()).toHex());
 } 
```

编辑 1：使用 Qt5，您应该使用`QString::toLatin1()`而不是`QString::toAscii()`.

# java - 更改 eclipse 格式化程序如何包装长字符串

> ID：11289076
> 
> 赞同：24
> 
> 时间：2012-07-02T07:01:28.063
> 
> 标签：java, eclipse, formatter

我已将 eclipse java 格式化程序设置为对超过 120 个字符的行进行换行，以符合我们团队的编码标准。但是，当我有一个包裹的长字符串时，我希望加号 (+) 显示为第一行的最后一个字符，例如

```
String s = "Very long line that should be " +
"wrapped across several rows"; 
```

默认行为是将加号放在自己的行上，例如

```
String s = "Very long line that should be "
+
"wrapped across several rows"; 
```

那么是否可以指定加号应该出现在eclipse java格式化程序中的位置？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-02T12:56:13.740

```
Preferences > Java > Code Style > Formatter > Line Wrapping > Binary Expressions > Wrap before Operator 
```

以上控制放置+的位置。（虽然它不应该在自己的线上）

# java - 在 windows 7 pro 中使用批处理文件关闭多个 cmd 窗口。

> ID：11289078
> 
> 赞同：0
> 
> 时间：2012-07-02T07:01:43.257
> 
> 标签：java, windows, batch-file, taskbar

`for /l %%x in (1,1,270) do ( start "" java -cp ... Client)`当我在 cmd 270 中运行批处理文件时，窗口将打开。这些所有窗口都是单独的我只想通过使用另一个批处理文件来关闭所有这些窗口......

我正在使用 Windows 7 教授。

我尝试了任务栏属性组合，它不起作用。我想使用批处理文件关闭这些所有 java 窗口 ![任务栏](../Images/0afe9611d2bfbd27ad140ef454850b2a.png) 谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:15:02.457

您可以使用`taskkill`，前提是所有 java 进程都被命名为相同的东西，让我们`java.exe`说

```
taskkill /im java.exe /f 
```

这将关闭所有名为`java.exe`.

# android - 保持列表视图的第一项固定，并在该项之后从数据库中添加数据

> ID：11289079
> 
> 赞同：3
> 
> 时间：2012-07-02T07:01:53.557
> 
> 标签：android, listview, listviewitem

我试图搜索它，但无法获得任何适当的帮助。我试图保持列表视图中的第一项固定，然后从数据库中添加数据。我成功地显示了这种行为，但问题从我开始在列表视图中单击项目时使用，我单击的项目不正确...片段如下**copyFetchedData**具有来自数据库的数据

```
for(int i = 0;i<copyFetchedData.size();i++){

    recentSearchedList.add(i, copyFetchedData.get(i).getName());
    selectedAdapter.notifyDataSetChanged();
} 
```

最近搜索列表.add(0, "我的位置");

在上面的代码片段中，最后一行覆盖了添加元素的位置并将我的位置放在第一个位置。现在 onitemclick 的代码片段如下。

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

    if (displayList == arg0) {

        if(position == 0){
            editLocation.setText("");
        }
        else{
            String fetchedName = (String) displayList.getItemAtPosition(position);
            Toast.makeText(getApplicationContext(), "Name is "+fetchedName, Toast.LENGTH_LONG).show();
            Constants.searchedLocLat = copyFetchedData.get(position).getLat();
            Constants.searchedLocLon = copyFetchedData.get(position).getLon();
            Constants.searchedLocName = copyFetchedData.get(position).getName();            
            editLocation.setText(Constants.searchedLocName);    
        }

    }

} 
```

我使用它得到的输出获取了错误位置的元素。我知道它是因为我在位置 0 处强行添加元素，这会导致这种行为，有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:11:03.633

您可以使用`addHeaderView()`来做到这一点，

```
 ListView lv = (ListView)findViewById(R.id.listview1); //your listview object
        View hvw = findViewById(R.id.listrow);
        //Suppose you have one textview in that Row
        TextView tv = hvw.findViewById(R.id.tv1); // get textview object
        tv.setText("Your first item value"); // set text
        lv.addHeaderView(hvw); // add header view 
```

# c# - Detect broken stream in VideoMixingRenderer

> ID：11289090
> 
> 赞同：0
> 
> 时间：2012-07-02T07:02:36.943
> 
> 标签：c#, .net, directshow

I have a client application which is using VMR9 to play an online movie streamed over the network. Whenever the stream stops due to a problem, the player freezes displaying the last received frame. Is there any way to detect such a state in client side? I checked the windows messages sent by VMR9 to my ContainerForm.:

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == PlayerMessageValue)
    {
        Program.log.AppendLine(string.Format("msg {0} {1} {2}", m.LParam, m.WParam, Environment.TickCount));
    }
    base.WndProc(ref m);
} 
```

The player is incrementing the time and the player sends messages on expected intervals but nothing is received actually. here is the log:

```
msg 0 0 1316437
msg 0 0 1316515
msg 0 0 1317515
msg 0 0 1318515
msg 0 0 1319515
msg 0 0 1320515
msg 0 0 1321531
msg 0 0 1322531
msg 0 0 1323531
msg 0 0 1324531
msg 0 0 1325531
msg 0 0 1326546
msg 0 0 1327546
msg 0 0 1328546
msg 0 0 1329546 
```

some time passed, from now on the stream is stopped, but nothing changed in behavior of VMR:

```
msg 0 0 1351593
msg 0 0 1352593
msg 0 0 1353593
msg 0 0 1354593
msg 0 0 1355593
msg 0 0 1356609
msg 0 0 1357609
msg 0 0 1358609
msg 0 0 1359609
msg 0 0 1360609
msg 0 0 1361625
msg 0 0 1362625
msg 0 0 1363625
msg 0 0 1364625
msg 0 0 1365625
msg 0 0 1366640
msg 0 0 1367640
msg 0 0 1368640
msg 0 0 1369640
msg 0 0 1370640 
```

closing...1371796

Is there any other part of the graph which I should check for graph activity? (although the graph is running)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:01:54.210

No window messages are expected to indicate unexpected behavior. Instead, there are filter graph events you should be checking with `IMediaEvent::GetEvent`. Additionally, to address specific issues you might be checking media samples (e.g. time stamps) or validate data (such as H.264 bitstream).

# wpf - 所选项目未显示在 WPF 组合框中

> ID：11289094
> 
> 赞同：0
> 
> 时间：2012-07-02T07:02:55.723
> 
> 标签：wpf, combobox

我正在代码中创建我的窗口的一部分。对于组合框，我这样做：

```
ObservableCollection<ParamClassOption> options = new ObservableCollection<ParamClassOption>(
context.ParamClassOptions.Where(x => x.IDParamClass == val.CompTypeParam.IDParamClass));

ComboBox combobox = new ComboBox();
combobox.Name = "combobox" + val.CompTypeParam.ParameterName.Replace(" ", "");
combobox.ItemsSource = options;
combobox.SelectedValuePath = "IDParamClass";
combobox.DisplayMemberPath = "OptionName";
if (val.ParamClassOption != null)
{ 
  combobox.SelectedValue = val.ParamClassOption.IDParamClassOption; 
}
layoutitem.Content = combobox; 
```

我可以从列表中选择一个项目并将其保存到数据库中。我遇到的问题是在从数据库中检索值时再次显示保存的值。知道为什么它不显示吗？上面倒数第二行的 val.ParamClassOption.IDParamClassOption 在检索到要显示的记录时具有正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:51:41.863

我想你忘了绑定你选择的值

```
var binding = new Binding {Path = new PropertyPath("IDParamClassOption"), Mode = BindingMode.TwoWay, Source = val.ParamClassOption};
combobox.SetBinding(ComboBox.SelectedValueProperty, binding); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T05:42:09.500

谢谢您的帮助。我最终使用了一种完全不同的方法，将项目一个一个地添加到组合框中。然后，我将所选项目设置为先前添加的值（使用 Text 属性）。这是我的代码现在的样子：

```
 if (controlType == "Combobox")
            {
                ComboBox combobox = new ComboBox();
                combobox.Name = "combobox" + val.CompTypeParam.ParameterName.Replace(" ", "");

                ObservableCollection<ParamClassOption> options = new ObservableCollection<ParamClassOption>(
                    context.ParamClassOptions.Where(x => x.IDParamClass == val.CompTypeParam.IDParamClass));
                combobox.Items.Clear(); 
                foreach (ParamClassOption option in options)
                {
                    ComboBoxItem item = new ComboBoxItem();
                    item.Content = option.OptionName;
                    combobox.Items.Add(item);
                }
                combobox.Text = val.ParamClassOption.OptionName;

                layoutitem.Content = combobox;
            } 
```

后来从组合框中读取值以保存到数据库时，我这样做了：

```
ObservableCollection<ParamClassOption> option = new ObservableCollection<ParamClassOption>(
    context.ParamClassOptions.Where(o => o.IDParamClass == value.CompTypeParam.IDParamClass).Where(o => o.OptionName == combobox.Text));
value.IDParamClassOption = option[0].IDParamClassOption; 
```

# mysql - 已经有一个打开的 DataReader 与此 Connection 关联

> ID：11289099
> 
> 赞同：1
> 
> 时间：2012-07-02T07:03:24.080
> 
> 标签：mysql, asp.net-mvc-3, entity-framework

我使用 EF+MySql，数据库包含两个 foriegnkey，当我运行我的项目时，它说：已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭，然后我将 MultipleActiveResultSets=true 添加到 web.xml 中的连接字符串。 config，我再试一次，它告诉我：初始化字符串的格式不符合规范，我该如何解决这个问题？代码不同的foriegnkey和错误的初始化代码列表如下：

```
#region EDM 关系源元数据

[assembly: EdmRelationshipAttribute("blogModel", "cid", "cls", System.Data.Metadata.Edm.RelationshipMultiplicity.One, typeof(blog.Models.cls), "news", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(blog.Models.news), true)]
[assembly: EdmRelationshipAttribute("blogModel", "uid", "users", System.Data.Metadata.Edm.RelationshipMultiplicity.One, typeof(blog.Models.users), "news", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(blog.Models.news), true)]

#endregion

#region 导航属性

    /// <summary>
    /// 没有元数据文档可用。
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("blogModel", "cid", "cls")]
    public cls cls
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<cls>("blogModel.cid", "cls").Value;
        }
        set
        {
            ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<cls>("blogModel.cid", "cls").Value = value;
        }
    }
    /// <summary>
    /// 没有元数据文档可用。
    /// </summary>
    [BrowsableAttribute(false)]
    [DataMemberAttribute()]
    public EntityReference<cls> clsReference
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<cls>("blogModel.cid", "cls");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedReference<cls>("blogModel.cid", "cls", value);
            }
        }
    }

    /// <summary>
    /// 没有元数据文档可用。
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("blogModel", "uid", "users")]
    public users users
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<users>("blogModel.uid", "users").Value;
        }
        set
        {
            ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<users>("blogModel.uid", "users").Value = value;
        }
    }
    /// <summary>
    /// 没有元数据文档可用。
    /// </summary>
    [BrowsableAttribute(false)]
    [DataMemberAttribute()]
    public EntityReference<users> usersReference
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<users>("blogModel.uid", "users");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedReference<users>("blogModel.uid", "users", value);
            }
        }
    }

    #endregion

public partial class blogEntities : ObjectContext
{
    #region 构造函数

    /// <summary>
    /// 请使用应用程序配置文件的“blogEntities”部分中的连接字符串初始化新 blogEntities 对象。
    /// </summary>
    public blogEntities() : base("name=blogEntities", "blogEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }

    /// <summary>
    /// 初始化新的 blogEntities 对象。
    /// </summary>
    public blogEntities(string connectionString) : base(connectionString, "blogEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }

    /// <summary>
    /// 初始化新的 blogEntities 对象。
    /// </summary>
    public blogEntities(EntityConnection connection) : base(connection, "blogEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }

    #endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T07:33:33.983

为每个`DataReader`s 使用不同的打开和关闭 SQL 连接名称。这将解决问题。

由于您对多个`DataReader`VB.NET 中的 SQL 服务器不支持使用相同的打开和关闭数据库连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T08:21:23.137

据我所知`MultipleActiveResultSets`，在 MySql 上不可用，因此您无法将其添加到连接字符串（它适用于 MS SQL）。

这个问题的原因很可能是延迟加载。您正在迭代某些查询的结果，同时您访问循环内未加载的导航属性。这需要执行额外的查询，并且该查询需要一个新的数据读取器（第一个仍然没有关闭，因为您只是在迭代它的结果集）。

解决方案：

*   `ToList`要么通过使用或也许也将要迭代的查询的整个结果集具体化`AsEnumerable`
*   或者通过使用急切加载您想在循环内使用的导航属性`Include`

# java - AsyncTask停止工作android

> ID：11289105
> 
> 赞同：0
> 
> 时间：2012-07-02T07:03:51.407
> 
> 标签：java, android, multithreading, asynchronous

我在我的应用程序中使用大量 AsyncTask 进行搜索、解析等。我使用 AsyncTask 是因为我需要在之前和之后更新 ui，而且使用它很容易。

问题是当我使用新线程时，旧线程没有正确死亡，然后线程停止工作。

我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:08:10.503

遵循顺序过程可能是更好的方法吗？像这样的东西

您在第一个的 onPostExecute() 中启动第二个异步任务。同样，您在第二个 onPostexecute 中启动第三个异步任务。这样，您可以更好地控制它，并且内存管理得很好（即使在内存较少的设备中）。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:19:41.260

我认为你可以使用信号。我喜欢使用[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)，您可以在其中初始化一个线程中的锁存器，并在即将完成任务时倒计时。，在其他线程调用`await()`上，它将被阻塞，直到前一个线程不调用`countDown()`。

# android - 点击主页按钮后android应用程序崩溃

> ID：11289107
> 
> 赞同：0
> 
> 时间：2012-07-02T07:03:58.010
> 
> 标签：android, crash, android-lifecycle

如果我按下主页按钮，我有一个应用程序会崩溃，

后退按钮可以很好地进入仪表板，但是如果我按下主页，它会崩溃：

> 07-02 16:50:51.834: E/AndroidRuntime(343): java.lang.RuntimeException: 无法暂停活动 {com.rt.paging/com.rt.paging.MKpagerActivity}: java.lang.NullPointerException

这是我的代码

```
public class MKpagerActivity extends FragmentActivity {

    private PagerAdapter mPagerAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

      //initialsie the pager
            this.initialisePaging(); //crea un metodo! y lo implementa abajo!
    }

    /**
     * Initialise the fragments to be paged
     */
    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Fragmen1.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragmen2.class.getName()));
        this.mPagerAdapter  = new com.orchard.paging.PagerAdapter(super.getSupportFragmentManager(), fragments); //por que hay q decirle el paquete??

        //
        ViewPager pager = (ViewPager)super.findViewById(R.id.viewpager);
        pager.setAdapter(this.mPagerAdapter);

    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        super.onSaveInstanceState(savedInstanceState);
        // your stuff or nothing
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        // your stuff or nothing
    }

} 
```

这是我的 logCat

```
07-02 17:15:11.545: E/AndroidRuntime(327): FATAL EXCEPTION: main
07-02 17:15:11.545: E/AndroidRuntime(327): java.lang.RuntimeException: Unable to pause activity {com.orchard.paging/com.orchard.paging.MKpagerActivity}: java.lang.NullPointerException
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.access$1700(ActivityThread.java:117)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.os.Looper.loop(Looper.java:123)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-02 17:15:11.545: E/AndroidRuntime(327):  at java.lang.reflect.Method.invokeNative(Native Method)
07-02 17:15:11.545: E/AndroidRuntime(327):  at java.lang.reflect.Method.invoke(Method.java:507)
07-02 17:15:11.545: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-02 17:15:11.545: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-02 17:15:11.545: E/AndroidRuntime(327):  at dalvik.system.NativeStart.main(Native Method)
07-02 17:15:11.545: E/AndroidRuntime(327): Caused by: java.lang.NullPointerException
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
07-02 17:15:11.545: E/AndroidRuntime(327):  at com.orchard.paging.MKpagerActivity.onSaveInstanceState(MKpagerActivity.java:50)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.Activity.performSaveInstanceState(Activity.java:1037)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1181)
07-02 17:15:11.545: E/AndroidRuntime(327):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2336)
07-02 17:15:11.545: E/AndroidRuntime(327):  ... 12 more 
```

那么，我错过了什么？为什么会崩溃？

如何阅读违规代码的哪一行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:27:24.583

问题在于 JAR 文件，您需要对其进行更改，或者必须**下载 jar 文件的更新版本**。

您可以查看[此答案](https://stackoverflow.com/questions/8748064/starting-activity-from-fragment-causes-nullpointerexception)以了解更多信息。

# asp.net - 如何使用 LINQ 在 SQL Server 2005 中添加时间戳值

> ID：11289114
> 
> 赞同：0
> 
> 时间：2012-07-02T07:04:48.233
> 
> 标签：asp.net, sql-server-2005, linq-to-sql, timestamp

我的数据库表有一个**名为 inTime 的时间戳列**，我正在使用 LINQ 插入、更新 SQL 服务器中的数据。现在我想在我的数据库中添加时间戳值，但我不知道如何插入？

```
 spaBL.attendance obj = new spaBL.attendance();
            obj.FK_employeeId = 1;
            obj.inTime =[what to write here??] 
```

**inTime 是时间戳类型。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:10:20.153

SQL Server 时间戳数据类型中的时间戳？

;) 如果我每次有人没有阅读文档并认为这是一个时间戳我都能得到一分钱，我会比比尔·盖茨更富有。

时间戳数据时间中没有时间信息。它是一个正在运行的版本号，是 Sybase SQL Server 的遗留版本，Microsoft 的 SQL Server 源自该版本，而且是一个完全无聊的设计。

所以，不，你不能设置那个字段，对不起，它没有可用的价值，除了看看它是否改变了（然后行被更新了）。

即使有些人认为阅读可能是一门失传的艺术，文档也明确说明了这一点：

[http://msdn.microsoft.com/en-us/library/ms182776(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms182776(v=sql.90).aspx)

> 是一种在数据库中公开自动生成的唯一二进制数的数据类型。时间戳通常用作对表行进行版本标记的机制。

你没有办法设置它。更改您的 LINQ 设置以不更新此列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:12:09.590

时间戳值由服务器在插入时自动生成。您应该在不为时间戳列提供值的情况下向表中插入行。然后 Sql server 将生成该列的值。

请注意，时间戳类型的列不包含可以解析为 DateTime 的值。时间戳列背后的想法是，它们可用于在获取行和尝试使用新值更新行之间检查行是否已更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:13:17.127

您不为具有 Timestamp (Rowversion) 数据类型的列提供值。SQL Server 会自动为您提供一个值（它不会是日期时间值）。因此，您无需担心 Linq To SQL 会为您插入时间戳值。事实上，你做不到。SQL Server 将为您完成。但是，您可以检索 Timestamp 列的值。我相信相应的 C# 类型将是 System.Data.Linq.Binary。

[如何使用 LINQ 在 SQL 数据库中添加时间戳值](https://stackoverflow.com/questions/6609295/how-to-add-timestamp-value-in-sql-database-by-using-linq)

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T07:12:40.520

您无法更新时间戳。见[这里](https://stackoverflow.com/questions/4592658/sql-server-updating-a-time-stamp-column)。事实上，正如 TomTom 所指出的，它不包含实际时间信息。

# java - 从静态地图中删除时是否会收集对象垃圾？

> ID：11289116
> 
> 赞同：0
> 
> 时间：2012-07-02T07:05:02.147
> 
> 标签：java, object, memory-management, garbage-collection

我的应用程序中有一个静态地图，当我单击链接时会填充该地图。之后，它会制作很多对象并存储它们。现在我有一个链接可以清除这张地图。

这是我的代码。

```
Hello1 hello1 = new Hello1();
hello1.setHello("Helllollo1");
Hello hello = new Hello();
hello.setHello1(hello1);
hello.setHello("Hellollo");
setMap("1", (Object)hello);

Hello1 hello2 = new Hello1();
hello2.setHello("Helllollo1");
Hello helo = new Hello();
helo.setHello1(hello2);
helo.setHello("Hellollo");
setMap("2", (Object)helo);

Hello1 hello3 = new Hello1();
hello2.setHello("Helllollo1");
Hello helo1 = new Hello();
helo1.setHello1(hello3);
helo1.setHello("Hellollo");
setMap("3", (Object)helo1); 
```

现在我有一个方法 removeMap 它的工作原理如下

```
public static void removeMap(String key){

        if(map.containsKey(key)){

            map.remove(key);
        }   
    } 
```

那么当我在添加上述三个对象后为单个键调用此方法时，该对象是否已被垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:07:30.047

*是的，在地图被清除后，如果*没有其他强引用，从地图中引用的对象将有资格进行垃圾回收。

请注意，从映射中删除条目不会立即*导致*垃圾收集 - 它只是意味着映射将不再*阻止*对象被垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:14:54.147

是的，当您`Map`被清除或从中删除对象时，对象将有资格进行垃圾回收。因为对象没有任何引用，所以它们有资格进行 GC。

任何无法访问或没有引用的对象都有资格被收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:26:26.303

你的问题体现了一个矛盾的术语。如果对象，或者更确切地说是对对象的引用，已从地图中删除，则它根本不再“在地图内”。

# drupal - Drupal 7 新用户以编程方式创建？

> ID：11289118
> 
> 赞同：2
> 
> 时间：2012-07-02T07:05:14.173
> 
> 标签：drupal, module, hook, core

Drupal 7 我需要使用代码创建新用户（而不是手动通过面板）。

当我在 Drupal 中用谷歌搜索的这段示例代码进行测试时：

```
$form_state = array();
$form_state['values']['name'] = 'robo-user';
$form_state['values']['mail'] = 'robouser@example.com';
$form_state['values']['pass']['pass1'] = 'password';
$form_state['values']['pass']['pass2'] = 'password';
$form_state['values']['op'] = t('Create new account');
drupal_execute('user_register', $form_state); 
```

它显示：`Fatal error: Call to undefined function drupal_execute() in ......`

我怎样才能使它工作或像上面的任何其他简单方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:36:28.727

试试这个，它真正以编程方式处理而不是模仿用户注册行为。

```
$account->is_new = TRUE;
$account->status = TRUE;

$edit['name'] = $name;
$edit['mail'] = $mail;
$edit['status'] = 1;
$edit['init'] = $name;

$newuser = user_save($account, $edit);

//send email if you want
_user_mail_notify('register_no_approval_required', $newuser); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:23:11.363

您找到的示例代码适用于 Drupal 6 且已过时。在 Drupal 7`drupal_execute()`中重命名，现在形式为.[`drupal_form_submit()`](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_form_submit/7)`user_register_form`

# android - 单击按钮时启用和禁用广播接收器

> ID：11289119
> 
> 赞同：4
> 
> 时间：2012-07-02T07:05:28.563
> 
> 标签：android, broadcastreceiver

我想启用和禁用广播接收器以在单击按钮时完成启动。在单击按钮一次之前，接收器不应响应。我确实看到了一些类似的问题，但没有一个答案有效..请帮助...

我试过这段代码但没有用..

```
PackageManager pm  = getApplicationContext().getPackageManager();
ComponentName componentName = new ComponentName("mypackage", ".receivername");
pm.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T11:27:38.853

尝试这个

```
b1.setOnClickListener(new View.OnClickListener() {

     @Override
     public void onClick(View v) {
        // TODO Auto-generated method stub

            PackageManager pm  = Re_editActivity.this.getPackageManager();
            ComponentName componentName = new ComponentName(currentActivity.this, name_of_your_receiver.class);
            pm.setComponentEnabledSetting(componentName,PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                            PackageManager.DONT_KILL_APP);
            Toast.makeText(getApplicationContext(), "activated", Toast.LENGTH_LONG).show();

            }
        });

b2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            PackageManager pm  = Re_editActivity.this.getPackageManager();
            ComponentName componentName = new ComponentName(currentActivity.this, name_of_your_receiver.class);
            pm.setComponentEnabledSetting(componentName,PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                            PackageManager.DONT_KILL_APP);
            Toast.makeText(getApplicationContext(), "cancelled", Toast.LENGTH_LONG).show();
        }
    }); 
```

这里 button1 用于激活广播接收器，而 button2 用于停用它您还需要在清单文件中注册您的广播接收器并设置

```
<receiver android:name="name_of_your_receiver" android:enabled="false">
        <intent-filter >                
            <action android:name="android.intent.action.BOOT_COMPLETED"/>                
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:14:01.383

**您可以在onCreate**方法和**onDestroy**方法中**注册**您的接收器的示例代码，您可以**取消注册**它，

 ******```
 private BroadcastReceiver receiver;

    @Overrride
    public void onCreate(Bundle savedInstanceState){

      // your oncreate code

      IntentFilter filter = new IntentFilter();
      filter.addAction("SOME_ACTION");
      filter.addAction("SOME_OTHER_ACTION");

      receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
          //do something based on the intent's action
        }
      }

      registerReceiver(receiver, filter);
} 
```

**请记住**在**onDestroy**方法中运行它：

```
@Override
protected void onDestroy() {
  unregisterReceiver(receiver); //unregisterReceiver can be anywhere based on your requirement
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-07T23:06:06.950

我认为以这种方式使用它更容易：

```
public static void setAppComponentEnabled(@NonNull final Context context, @NonNull final Class<?> componentClass, final boolean enable) {
    final PackageManager pm = context.getPackageManager();
    final int enableFlag = enable ? PackageManager.COMPONENT_ENABLED_STATE_ENABLED : PackageManager.COMPONENT_ENABLED_STATE_DISABLED;
    pm.setComponentEnabledSetting(new ComponentName(context, componentClass), enableFlag, PackageManager.DONT_KILL_APP);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T07:16:01.043

尝试这个：

```
YourBroadcastReceiver mReceiver = new YourBroadcastReceiver();
IntentFilter filter = new IntentFilter();  //Filter for your receiver...
filter.addAction(your action goes here...);
registerReceiver(mReceiver , filter); **// Register**

unregisterReceiver(mReceiver );  **// Unregister** 
```******

# java - opengts 错误 (/gprmc/Data) 不可用

> ID：11289123
> 
> 赞同：0
> 
> 时间：2012-07-02T07:05:41.940
> 
> 标签：java, tomcat, gps, tracking

我正在尝试在 gps2opengts andriod 应用程序和我的 opengts 服务器之间建立测试连接。但是每次都会出现以下错误。我的服务器中有以下参数：

组：演示用户：管理员，没有密码。

可能是文件*gprmc*应该由*webapp.conf*配置。我取消注释 webapp.conf 中的上述字段，但再次出现相同的错误。请帮助解决这个问题。

... gprmc.parm.account=acct

gprmc.parm.device=dev ...

![安卓应用 gps2opengts](../Images/8101eaecace5bde2434fc25bc3bdd86a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:32:01.187

您正在尝试连接到网络应用程序，这就是您收到 HTML 消息作为回复的原因。安装gprmc服务器并将android上的主机名设置为10.100.10.126:8080。它最终会命中`http://10.100.10.126:8080/gprmc/Data?acct=demo&dev=test01...` 这只是一个演示应用程序。它不会让您更改默认设备“test01”。

# git - Git 提交列表

> ID：11289124
> 
> 赞同：1
> 
> 时间：2012-07-02T07:06:06.870
> 
> 标签：git, intellij-idea, commit, phpstorm

我想我只是在 git 中遗漏了一些重要的点。我将 PhpStorm IDE 用于开发过程，并将 GIT 用作 VCS。每次我从一个开发人员分支中提取更改时，我都会得到其他开发人员的提交列表，这是完全正常的。但是当我推送更改时，我不仅推送本地提交的提交，还推送通过拉取检索的提交。

但是为什么会这样呢？为什么其他开发人员提交在我的推送中？我虽然只要 GIT 将这些开发人员的提交存储在远程分支上，它们就已经被推送了。我错过了什么吗？

GIT 命令（根据 IDE 历史记录）：

```
git pull --no-stat -v --progress origin trunk

git push origin trunk:trunk 
```

GIT 版本：1.7.4.4，操作系统：Mac OS X 10.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:16:45.017

正如 Vonc 所说，当你运行时`git pull origin trunk`，git 首先运行一个 fetch( `git fetch origin trunk`)，它从远程“origin”获取分支“trunk”，并将其存储在 FETCH_HEAD 中。

**请注意，这可能是意外行为，并且是不**`git-pull`使用and的“4 参数”形式的一个很好的理由`git-fetch`。

无论如何，在运行 fetch 之后，git 运行`git merge FETCH_HEAD`. 这将获取新获取的远程分支，并将其合并到本地分支中。您刚刚将您的本地分支和来自 'origin' 的 'trunk' 分支合并在一起。

如果您无法对此进行可视化，请尝试运行`gitk`或`git log --graph --oneline --decorate`以图形方式查看历史记录。您应该能够看到两条历史记录（您的和远程的）合并在一起。`git log`，没有`--graph`or`--first-parent`等​​，将显示从当前分支可到达的所有提交，但不会区分它们实际位于哪个分支。

不出所料，当你运行git 时`git push`，git 会获取这个合并的历史，并推送它。

您可能打算运行`git fetch`或`git fetch origin`而不是`git pull origin trunk`. 这将从“origin”获取更新的分支，并将它们存储在您的远程跟踪分支中（例如“origin/trunk”）。然后，您可以使用例如检查它`git log origin/trunk`。如果您想将 'origin/trunk' 合并到您的本地分支中，请使用`git merge origin/trunk`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:19:18.467

如果您真的在拉动更改 ( [`git pull`](http://git-scm.com/docs/git-pull))，您将在当前分支中获取并合并它们。

如果您在 push 时看到所有其他开发人员提交，那可能是因为您的 pull 配置为先执行 rebase ( `git pull --rebase`)。
检查配置设置`branch.autosetuprebase`或`branch.<name>.rebase`.

# wpf - wpf如何创建自定义按钮

> ID：11289126
> 
> 赞同：0
> 
> 时间：2012-07-02T07:06:21.153
> 
> 标签：wpf, c#-4.0, button, controltemplate

在 WPF 中，如何制作一个带有 5 像素半径、深灰色背景和白色文本的白色边框的按钮？如果它仍然有所有的鼠标和被按下的效果，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:14:22.740

您需要了解[控件模板](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.aspx)在 WPF 中的工作原理。这个关于在按钮上应用控制模板的[示例](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.100%29.aspx)`MSDN`应该可以帮助您入门。

还有一个[类似的 SO QA](https://stackoverflow.com/questions/2594065/button-controltemplate-and-rounded-corners)应该可以帮助你。

# linux - /usr/src 目录是否与 Linux 内核的引导有任何关系？如果是，如何？

> ID：11289127
> 
> 赞同：1
> 
> 时间：2012-07-02T07:06:27.130
> 
> 标签：linux, ubuntu, linux-kernel, ubuntu-10.04, boot

具体来说，我正在运行 Ubuntu 10.04 (Lucid Lynx)，并且不小心在 /usr/src 上安装了一个空设备（分区）。我忘记卸载空设备并在重新启动 Ubuntu 时向我打招呼，消息类似于以下内容：

> “Ubuntu 现在将以低图形模式启动，因为它找不到相关驱动程序的配置”

然后它就这样闲置着，黑屏（在我在上面的对话框中单击“确定”之后）。它还为我提供了自己配置选项的选项（我不喜欢这样做）。我怀疑这与 /usr/src 为空有关，因为这是我记得做的唯一愚蠢的事情。有人可以解释这是否真的如此吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:16:02.993

不它不是。此目录默认为空，但您可以在其中包含一些源代码树，例如 linux 内核源代码树。无论如何，在引导过程中不太可能使用该目录中的某些文件。

# php - 我如何使用 php?=

> ID：11289128
> 
> 赞同：1
> 
> 时间：2012-07-02T07:06:31.853
> 
> 标签：php

我对这东西有点菜鸟。

但我一直在浏览，我看到类似这样的网站

```
www.store.com/product.php?id=123 
```

这真的很酷。但我该怎么做呢？

我坚持使用这样的东西

```
www.store.com/product/product123.php 
```

如果你能告诉我我该怎么做，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:08:06.880

你正在看的是一个`$_GET`论点。

在您的 PHP 代码中，尝试编写如下内容：

`$value = $_GET['foo'];`

然后像这样打开你的页面：

`hello.php?foo=123`

这将设置`$value`为`123`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:11:11.027

你需要在`$_GET`这里使用。

如果您使用以下内容：

```
?id=123 
```

那么这将是如何使用它和结果

```
$_GET['id'] (returns the 123) 
```

您可以根据`$_GET`需要使用任意数量的参数，例如：

```
?id=123&foo=bar&type=product 
```

`$_GET`是 url 中包含哪些参数的数组，因此您可以像使用数组一样使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:29:07.317

您可能想查看 www.php.net 上的文档，尤其是这些页面：[http ://www.php.net/manual/en/reserved.variables.php](http://www.php.net/manual/en/reserved.variables.php)

具体来说，看看**$_GET**和**$_POST**，它们是从浏览器向服务器传输信息的两种常用方法。（简而言之，GET参数在URL中指定，就像你的问题一样，而POST参数是“从视图中隐藏的”，但可以包含更多数据 - 通常是表单的内容等，例如你发布的文本框你的问题在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T07:10:52.677

这些称为 URL 参数（其中包含的称为查询字符串），它们不是 PHP 独有的，但可以在 PHP 中使用[`$_GET`superglobal](http://php.net/manual/en/reserved.variables.get.php)访问。

同样，您可以使用超全局获取 POST 参数`$_POST`，但在 POST 请求中，[这些参数不会附加到 URL](http://developers.sun.com/mobility/midp/ttips/HTTPPost/)中。

注意：通常，出于可用性目的（因此也是 SEO 目的），您希望尽可能避免使用查询字符串。如今，标准做法是使用 URL 重写来向用户显示友好的 URL。因此，您的应用程序可能会接受如下 URL：

```
/products.php?id=32 
```

但用户只看到：

```
/product/32 
```

您可以通过使用`mod_rewrite`或类似的 URL 重写功能在内部将友好的 URL 转换为以前的查询字符串 URL 来做到这一点，而无需用户键入查询字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T07:12:11.753

创建一个`product.php`使用以下代码调用的文件：

```
<?php
echo "The argument you passed was: " . $_GET['id'];
?> 
```

现在在浏览器中运行此 URL：

```
http://<yourdomain>/product.php?id=123 
```

你就会明白 $_GET 是如何工作的。

# raphael - 如何使用graphiti在矩形或圆形或任何形状内添加文本？

> ID：11289129
> 
> 赞同：0
> 
> 时间：2012-07-02T07:06:36.380
> 
> 标签：raphael

如果我已经制作了矩形，那么可以在其中/上面添加任何文本，例如如果有一个矩形并且我想为它命名为矩形，像这样：

* * *

| | | 正文 | | | | |

* * *

提前致谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:14:39.700

使用正常的矩形形状并为其添加装饰。装饰可以放置在任何位置。

参见示例：[图形定位器](http://draw2d.org/graphiti/jsdoc/#!/example/figure_locator)

问候

安德烈亚斯

# php - 在api调用php中发送数组数据

> ID：11289131
> 
> 赞同：1
> 
> 时间：2012-07-02T07:06:42.900
> 
> 标签：php, api, curl

我使用以下参数调用 AT&T api 来获取用户信息

```
$a=array( 'Target'=>'UserPermissions',
         'Username'=>'isingh',
         'RightID'=>array("Param" => 1, "Param" => 6, "Param" => 17, "Param" 
 => 16, "Param" => 12,"Param" => 18)); 
```

我将如何在卷曲中传递这个

```
this is simple llok what i am doing
$a=array( 'Target'=>'GetUsers',
         'Origin'=>array('Param' => 1));
 $aa=http_build_query($a);
     $Url = "http://apiee.uc.att.com/apiee/api/api.asp?".$aa;
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $Url);
curl_setopt($ch, CURLOPT_HEADER, 0);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$res = simplexml_load_string(curl_exec($ch));
  curl_close($ch);
 echo "<pre>"; print_r($res); echo "</pre>"; 
```

此代码工作正常，$a 中没有嵌套数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:10:19.370

您应该阅读 PHP.net cURL 参考。

一个简单的谷歌搜索将我[带到 curl_setopt](http://php.net/manual/en/function.curl-setopt.php)。

在此页面上，您将找到`CURLOPT_POST`可与 cURL 一起使用的选项。

您必须递归地遍历每个数组元素并将其设置为带有`curl_setopt`.

# groovy - Gpath 用比较表达式做谓词

> ID：11289133
> 
> 赞同：0
> 
> 时间：2012-07-02T07:06:50.730
> 
> 标签：groovy, predicate, gpath

使用 Groovy 2.0

GPath 属性表达式是否可以使用谓词进行过滤：

```
class HandShaker {
String title
}

class AussieGreeter implements Greeter {
String name
List<HandShaker> handshaker
    ....
}

AussieGreeter greeter = new AussieGreeter()
greeter.setName("hello")
greeter.setHandshaker([new Handshaker().setTitle("butler")].asList()])

println Eval.x(greeter,"x[name=='hello'].handshaker[0].title") 
```

如果 name 属性等于“hello”，则过滤 Greeter？还没有见过这样的例子，Groovy 因 MissingPropertyException 而放弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:27:43.950

我认为你需要这样做：

```
println Eval.x(greeter,"x.find { it.name == 'hello' }.handshaker[0].title") 
```

您可以破解获取闭包的`getAt`方法，并在返回或以其他方式`AussieGreeter`返回时返回元素：`true``null`

```
class HandShaker {
  String title
}

interface Greeter {}

class AussieGreeter implements Greeter {
  String name
  List<HandShaker> handshaker

  def getAt( Closure o ) {
    o.delegate = this
    o.resolveStrategy = Closure.DELEGATE_FIRST
    o() ? this : null
  }
}

AussieGreeter greeter = new AussieGreeter( name:'hello',
                                           handshaker:[new HandShaker( title:'butler' )] )

greeter[ { name == 'hello' } ]?.handshaker[0].title 
```

哪个更接近您的原始要求（但在比较和`?`方括号之后有大括号）

但是`find`更容易阅读恕我直言：-/

# silverlight - 从另一个浏览器中打开一个用于 silverlight

> ID：11289137
> 
> 赞同：0
> 
> 时间：2012-07-02T07:07:10.680
> 
> 标签：silverlight, silverlight-5.0

我有两个完全信任的浏览器应用程序。

我想要的是合二为一，用户单击一个按钮，然后打开第二个 silverlight oob 应用程序。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:54:45.967

pinvoke 和 sllauncher 包含您寻求的答案。

# asp.net-mvc - 我应该映射我的 MVC3 模型和我的实体框架模型吗？如何？

> ID：11289138
> 
> 赞同：1
> 
> 时间：2012-07-02T07:07:11.177
> 
> 标签：asp.net-mvc, entity-framework

我边走边学，所以我不熟悉 EF 和 MVC3 背后的所有概念。我有一个应用程序，其中我的 EF 模型 === MVC3 模型，但我也有一些聚合视图模型。我`Person dude = Person.Get(id);`在 Controllers 中调用类似的东西，其中 Person 是从数据库生成的 EF 模型，我使用自定义方法对其进行扩展，例如`dude.GetSiblings();`

我现在想要做的（如果你不告诉我这是一个坏主意）是将 EF 代码移动到另一个程序集中，使用新的更简单的非实体模型创建另一个程序集，我可以将其提供给我的视图和以某种方式（如果可能）序列化并作为 JSON 移动。

问题是我不知道怎么做。如果我将我的 EF 模型移动到不同的项目（如单独的 DAL），我将如何创建映射到 Ef 模型的第二个模型？如果我`int id {get;set;} string name {get;set}`在 EF 模型和 MVC3 模型上都有类似的代码，那不会导致很多重复吗？在我的 ViewModels 中，我只是直接使用实体`class ViewModelX { Person person; List<Post> posts; int something; }`，但这只是一组打包的实体而不是模型，不是吗？

像 GetSiblings 这样的方法呢？`var list = dude.GetSiblings()`在控制器和`public List<Person> GetSiblings() { return this.EFPerson.GetSiblings(); }`MVC3 模型中？我对去哪里感到非常困惑。在谷歌搜索时，我真的只找到了高级和非常初学者的教程 - 或者我只是不知道要寻找什么，所以我恳请您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:15:03.263

> 如果我将我的 EF 模型移动到不同的项目（如单独的 DAL），我将如何创建映射到 Ef 模型的第二个模型？

视图模型驻留在 ASP.NET MVC 应用程序中。

> 如果我在 EF 模型和 MVC3 模型上都有类似 int id {get;set;} string name {get;set} 的代码，那会不会导致很多重复？

是的，它会导致。这就是视图模型的目的。包含视图需要处理的数据。这些数据来自哪里并不重要。您可以使用[AutoMapper](http://automapper.codeplex.com/)等工具来自动执行域模型和视图模型之间的映射。

> 像 GetSiblings 这样的方法呢？var list = dude.GetSiblings() in Controller 和 public List GetSiblings() { return this.EFPerson.GetSiblings(); 在 MVC3 模型中？

以下是典型的控制器操作的样子：

```
public ActionResult SomeAction(int id)
{
    // fetch an instance of the domain model:
    var domainModel = DomainLayer.GetSiblings(id);

    // map the domain model to a view model (using AutoMapper):
    var viewModel = Mapper.Map<DomainModel, ViewModel>(domainModel);

    // pass the view model back to the view
    return View(viewModel);
} 
```

# ruby-on-rails - Twitter Bootstrap 没有正确对齐

> ID：11289139
> 
> 赞同：0
> 
> 时间：2012-07-02T07:07:28.563
> 
> 标签：ruby-on-rails, twitter-bootstrap

我想知道这是我的错误还是我的错误。在我的 Rails 项目中，twitter 的引导程序没有将容器对齐在中心。

我的代码：

```
<div class="container">
    <div class="span12" style="background-color:blue; color:white;">
        <%= yield %> <!-- This get the sample text "Some test." -->
    </div>
</div> 
```

这是错误的图像。 [http://img543.imageshack.us/img543/3405/screenshot20120702at035.png](http://img543.imageshack.us/img543/3405/screenshot20120702at035.png)

非常感谢大家！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:11:56.707

```
<div class="container">
    <div class="row">
        <div class="span12">
        </div>
    </div>
</div> 
```

[演示](http://jsfiddle.net/oswaldoacauan/kLFSC/1)

# android - Android : 帮助在 android 中编译 SoundTouch 库

> ID：11289145
> 
> 赞同：2
> 
> 时间：2012-07-02T07:07:55.227
> 
> 标签：android, c++, android-ndk

我正在尝试使用 Android NDK编译[SoundTouch库。](http://www.surina.net/soundtouch/)我从[这里](http://www.surina.net/soundtouch/faq.html#compiling)得到了一些指令来在 android 中编译这个库。

但是当我尝试使用`ndk-build`命令编译它时，它会在 SoundTouch lib 的各种源文件中显示错误，如下所示：![在此处输入图像描述](../Images/2b638d233cc847e31094b951986b0768.png)

我尝试按照说明中的说明关闭异常处理，但它似乎不起作用。

我将 SoundTouch 源中的所有文件复制到项目的 JNI 文件夹中。这是我的`android.mk`文件：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_CFLAGS :- -frtti -fexceptions

LOCAL_SRC_FILES := AAFilter.cpp BPMDetect.cpp cpu_detect_x86.cpp FIFOSampleBuffer.cpp FIRFilter.cpp main.cpp mmx_optimized.cpp PeakFinder.cpp RateTransposer.cpp RunParameters.cpp SoundTouch.cpp sse_optimized.cpp TDStretch.cpp WavFile.cpp

LOCAL_LDLIBS := -lpcap

LOCAL_MODULE := libSoundTouch

LOCAL_C_INCLUDES := BPMDetect.h FIFOSampleBuffer.h FIFOSamplePipe.h SoundTouch.h STTypes.h

include $(BUILD_SHARED_LIBRARY) 
```

谁能帮我在android上编译和使用SoundTouch lib？

**更新 ：**

我改变了我的`android.mk`文件如下

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_CPP_FEATURES += -fno-exceptions

LOCAL_SRC_FILES := \
     SoundTouch/AAFilter.cpp \
     SoundTouch/BPMDetect.cpp \
     SoundTouch/cpu_detect_x86.cpp\
      SoundTouch/FIFOSampleBuffer.cpp \
      SoundTouch/FIRFilter.cpp \
      SoundTouch/mmx_optimized.cpp \
      SoundTouch/PeakFinder.cpp \
      SoundTouch/RateTransposer.cpp \
      SoundTouch/SoundTouch.cpp \
      SoundTouch/sse_optimized.cpp \
      SoundTouch/TDStretch.cpp 

LOCAL_MODULE := libSoundTouch

LOCAL_C_INCLUDES := include/BPMDetect.h include/FIFOSampleBuffer.h include/FIFOSamplePipe.h include/SoundTouch.h include/STTypes.h

include $(BUILD_SHARED_LIBRARY) 
```

现在一切正常。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:11:59.473

I have successfully compiled by changing my `android.mk` file :

here is my `android.mk` file

```
include $(CLEAR_VARS)
LOCAL_PATH:= $(call my-dir)

LOCAL_CPP_FEATURES += -fno-exceptions

LOCAL_SRC_FILES := \
     SoundTouch/AAFilter.cpp \
     SoundTouch/BPMDetect.cpp \
     SoundTouch/cpu_detect_x86.cpp\
      SoundTouch/FIFOSampleBuffer.cpp \
      SoundTouch/FIRFilter.cpp \
      SoundTouch/mmx_optimized.cpp \
      SoundTouch/PeakFinder.cpp \
      SoundTouch/RateTransposer.cpp \
      SoundTouch/SoundTouch.cpp \
      SoundTouch/sse_optimized.cpp \
      SoundTouch/TDStretch.cpp 

LOCAL_MODULE := libSoundTouch

LOCAL_C_INCLUDES := include/BPMDetect.h include/FIFOSampleBuffer.h include/FIFOSamplePipe.h include/SoundTouch.h include/STTypes.h

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-03T11:49:18.597

看看[这个](https://github.com/VladimirKulyk/SoundTouch-Android)链接这个家伙已经编译准备使用 SoundTouch Android 包装器。

> *   目前能够进行时间拉伸和音高转换。
> *   目前仅支持带有 FPU (armeabi-v7a) 的 Android。

示例用法：

```
//There are currently 16 track id's you can use (0-15), each one has a separate SoundTouch processor.

    //Set your audio processing requirements: track id, channels, samplingRate, bytesPerSample, 
    //                              tempoChange (1.0 is normal speed), pitchChange (in semi-tones)

    SoundTouch soundTouch = new SoundTouch(0, 2, 44100, 2, 1.0f, 2.0f);

    //byte[] sizes are recommended to be 8192 bytes.

    //put a byte[] of PCM audio in the sound processor:
    soundTouch.putBytes(input);

    //write output to a byte[]:
    int bytesReceived = soundTouch.getBytes(output);

    //after you write the last byte[], call finish().
    soundTouch.finish();

    //now get the remaining bytes from the sound processor.
    int bytesReceived = 0;
    do
    {
        bytesReceived = soundTouch.getBytes(output);
        //do stuff with output.
    } while (bytesReceived != 0)

    //if you stop playing, call clear on the track to clear the pipeline for later use.
    soundTouch.clearBuffer() 
```

> **访问上面的 github 链接了解更多详情。**

# vim - Vim 搜索和删除 (:g/string/d) 但需要权限？

> ID：11289151
> 
> 赞同：3
> 
> 时间：2012-07-02T07:08:23.943
> 
> 标签：vim, full-text-search, replace

基本上我想批量删除字符串，但不要相信我的注意力范围足以不确认每个字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T07:12:55.823

你可以这样做`:%s/.*string.*\n//gc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:12:33.760

`:%s/foo//gc`

但你可以自己去看看... [http://vim.wikia.com/wiki/Search_and_replace](http://vim.wikia.com/wiki/Search_and_replace)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T00:16:59.613

我相信这个命令会删除任何包含“foo”字符串的行：

```
:g/foo/d 
```

# asp.net-mvc - 使用 MvcBuildViews 预编译视图

> ID：11289165
> 
> 赞同：1
> 
> 时间：2012-07-02T07:09:40.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想发布预编译的视图。我看过一些关于指定的问题

在 csproj 中更改以下内容

```
<MvcBuildViews>true</MvcBuildViews>. 
```

和

并修改 web.config（因为我使用的是 entityframework）

```
<compilation debug="true" targetFramework="4.0">
      <buildProviders>
        <remove extension=".edmx"/>
      </buildProviders>
 </compilation> 
```

现在编译我所期望的需要更长的时间但是我不确定它是否工作正常

1.  我可以假设我说的是正确的，如果配置正确，它实际上应该将视图构建到二进制文件中，而不仅仅是进行预编译验证？
2.  如果为真，那么我应该阻止 web 部署发送 cshtml 吗？它们在现场的存在会导致重新编译吗？
3.  如果是这样，这应该会导致部署的 mvc 应用程序的启动时间更快吗？因为他们不需要编译视图？
4.  我也应该在 csproj 中添加 false 吗？我看到一篇文章建议我应该将其从 true 更改为 false，但它不在我的 csproj 中。

干杯蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:21:22.497

> 我可以假设我说的是正确的，如果配置正确，它实际上应该将视图构建到二进制文件中，而不仅仅是进行预编译验证？

不。

> 如果为真，那么我应该阻止 web 部署发送 cshtml 吗？它们在现场的存在会导致重新编译吗？

不，`cshtml`您发货时必须有文件。

> 如果是这样，这应该会导致部署的 mvc 应用程序的启动时间更快吗？因为他们不需要编译视图？

不，在发布模式下，Razor 进行了优化，它会自动缓存视图的位置，一旦解析它们，它就不会在后续请求中重新解析。

因此，故事的寓意是您可以在发布模式下启用 MvcBuildViews 选项，以便您的构建服务器可以在项目的持续集成构建过程中检测到任何潜在的错误。在调试模式下，我将其禁用，因为它会减慢构建速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:24:52.743

[RazorGenerator](https://nuget.org/packages/RazorGenerator.Mvc)似乎是我最初的问题的唯一选择，即将编译的视图作为二进制文件发送。

# android - Android 上的 Chrome 调整字体大小

> ID：11289166
> 
> 赞同：91
> 
> 时间：2012-07-02T07:09:40.793
> 
> 标签：android, html, css, google-chrome, font-size

显然，一旦文本段落达到一定长度，Android 上的 Google Chrome 就会决定调整文本大小并使其变大（引起各种乐趣）。现在我有一个网站，其中大约一半的`p`-tags 遵循我设置的大小，而另一半则随意更改 - 显然取决于段落的长度。

我到底该如何解决这个问题？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-18T23:14:35.193

添加`max-height: 999999px;`到要防止字体增强的元素或其父元素。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-01-03T01:29:50.123

在文档中包含以下`<meta>`标签`<head>`：

`<meta name="viewport" content="width=device-width, initial-scale=1">`

这将正确建立视图框架，从而消除对“FontBoosting”的需要。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-02-01T15:48:38.463

现在可以设置一个 CSS 属性来控制它：

```
-webkit-text-size-adjust: none;
-moz-text-size-adjust: none;
-ms-text-size-adjust: none; 
```

请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/text-size-adjust](https://developer.mozilla.org/en-US/docs/Web/CSS/text-size-adjust)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-11-06T21:58:02.950

把它放在你的重置中。`html * {max-height:1000000px;}`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-22T18:50:52.947

After some tests this rule helped me out. Must be added either to the element containing boosted text or it's parent depending on the div/table structure.

```
element or parent element { 
    /* prevent font boosting on mobile devices */
    width: 100%;
    height: auto;
    min-height: 1px;
    max-height: 999999px;
} 
```

Maybe the width and heigth values must be corrected according your needs.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-12T08:07:06.283

我为我的页面找到了一个解决方案：给父元素一个宽度和高度！字体不会超出这些边界，因此它会保持较小（呃）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T05:53:20.280

这称为“字体增强”，并在此[WebKit 错误](https://bugs.webkit.org/show_bug.cgi?id=84186)中进行了详细描述。目前没有办法禁用它。

# c++ - C++ fstream 总是在 .txt 文件上失败

> ID：11289170
> 
> 赞同：2
> 
> 时间：2012-07-02T07:10:17.327
> 
> 标签：c++, c, stream

我的 .exe 和 addrr.txt 文件位于 D:\ 驱动器

当我试图准备好 .txt 文件时，ifstream 什么都不做

这是我的代码：

```
 ifstream file;
        file.open("addrr.txt", fstream::in | fstream::out);
        if (file.is_open())
        {
            while (file.good())
            {
                cout << "Addrr.txt IsGood" <<endl;
                getline(file, Path);
            }

            file.close();
        } 
```

抱歉这么愚蠢的问题。我是菜鸟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:32:23.567

**更新**

为了确保`addrr.txt`在应用程序运行时可以找到该文件，您需要

*   指定文件的绝对路径，即`D:\addrr.txt`，或
*   指定当前工作目录 (CWD) 的相对路径，这显然是`C:\Program Files\Mozilla FireFox`。（如果文件位于另一个分区上，这是不切实际的。）

CWD 通常是运行应用程序的目录。如果您在其中运行您的应用程序，`D:`它应该可以工作。（您的应用程序可能会在运行时更改 CWD（例如，通过使用`chdir()`、 或`SetCurrentDirectory()`）。但是，通常指定文件的绝对路径或将文件放置在 CWD 的正确相对位置更合适。）

* * *

这对我来说编译并运行良好：

```
#include <fstream>
#include <iostream>
#include <string>
using namespace std;

int main() {
  ifstream file;
  file.open("addrr.txt", fstream::in | fstream::out);
  if (file.is_open())
  {
    while (file.good())
    {
      string Path;
      cout << "Addrr.txt IsGood" <<endl;
      getline(file, Path);
      cout << Path << endl;
    }
    file.close();
  }
}

// output similar to:
/*
Addrr.txt IsGood
addrr.txt
Addrr.txt IsGood
addrr.txt
Addrr.txt IsGood
addrr.txt
Addrr.txt IsGood

Addrr.txt IsGood

*/

// file: addrr.txt
/*
addrr.txt
addrr.txt
addrr.txt

*/ 
```

* * *

您的文件名是否正确（即区分大小写）？您是否从可执行文件所在的路径运行应用程序（文件位于当前工作目录中）？

# html - 多列 css 打破了 ul 内容问题

> ID：11289173
> 
> 赞同：4
> 
> 时间：2012-07-02T07:10:47.993
> 
> 标签：html, css

我有多个 ul 部分并使用多列 css 将它们自动分成三列。问题是 css 破坏了 li 内容并将它们移动到下一列。我需要将整个 ul 移动到下一列而不是单个 li 内容。这是屏幕截图。

![在此处输入图像描述](../Images/b8bfb5e8ee5b7627918e29e8cc24d3c2.png)

结果应该像

![在此处输入图像描述](../Images/e3c319813cdc56c746079535da73c7d6.png)

这是我的html代码

```
<div class="columnsmulti">
<ul>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
<li>Lorem Ipsum</li>
</ul>
<ul>
<li>Lorem Ipsum123</li>
<li>Lorem Ipsum123</li>
</ul>
<ul>
<li>Lorem Ipsum456</li>
<li>Lorem Ipsum456</li>
<li>Lorem Ipsum456</li>
</ul>

</div> 
```

这是我的CSS

```
.columnsmulti {
    -moz-column-count: 3; 
    -moz-column-gap: 10px;
    -moz-column-rule: 3px double #666;
    -webkit-column-count: 3; 
    -webkit-column-gap: 10px;
    -webkit-column-rule: 3px double #666;
    column-count: 3;
    column-gap: 10px;
    column-rule: 3px double #666;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:53:26.357

您应该在 css 中使用分列规则。这是一个适用于 Chrome 的示例：

```
.columnsmulti ul {
    -webkit-column-break-inside: avoid;
    -webkit-column-break-after: always;
} 
```

在您的 css 中添加这些行，它将按您的要求工作。

[参考](http://www.w3.org/TR/css3-multicol/#break-before-break-after-break-inside)

PS：`-moz-column-break`我的 Firefox 似乎无法识别。

# java - 使用 Spring Application 配置日志

> ID：11289176
> 
> 赞同：0
> 
> 时间：2012-07-02T07:11:05.397
> 
> 标签：java, spring, io

我开发了一个spring应用程序，我想用apache log4j配置它，已经下载了它并将jar放在项目的类路径中。下面是我的 log4j.Properties 文件。

```
# Root logger option
log4j.rootLogger=INFO, file
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C\:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

下面是我的主要弹簧应用程序类。

```
import org.apache.log4j.Logger;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.FileSystemResource;

public class DrawingClass {

    public static void main(String args[])
    {
        //without dependency injection 
        /*Triangle t1 = new Triangle();
        t1.draw();*/

        //with dependency injection     
        BeanFactory factory = new XmlBeanFactory(new FileSystemResource("Spring.xml"));
        Triangle t1 =(Triangle) factory.getBean("triangle");
        t1.draw();
    }
} 
```

请告知我是否要将 log.info 放在上面的主类中我需要在我的主类中做哪些修改，还请告知我需要做哪些修改才能在我的主类中调用 log4j？

想出这个解决方案，它可以工作..编辑的 log4j.properties 文件是

```
### direct messages to file or.log ###
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=C:/logs/s.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1} - %m%n
log4j.appender.file.append=true

### set log levels - for more verbose logging change 'info' to 'debug' ##
log4j.rootCategory=ALL, file
log4j.logger.Demo=\=debug
log4j.logger.org.eclipse=debug 
```

从主类调用的方法是

```
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.FileSystemResource;

public class DrawingClass {
     /* Get actual class name to be printed on */
    static final Logger log = Logger.getLogger(DrawingClass.class);
    public static void main(String args[])
    {PropertyConfigurator.configure("log4j.properties");
        //without dependency injection 
        /*Triangle t1 = new Triangle();
        t1.draw();*/

         log.info("Before execution");
        //with dependency injection     
        BeanFactory factory = new XmlBeanFactory(new FileSystemResource("Spring.xml"));
        Triangle t1 =(Triangle) factory.getBean("triangle");
        log.info("Hello this is an info message");
        t1.draw();
         log.info("after object execution");
    }
} 
```

如果还有其他更好的方法，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:22:55.500

为了在我的项目中使用登录，我做了这样的事情：

1）定义的特殊注释应该标记应该注入记录器的字段：

```
@Retention(RUNTIME)  
@Target(FIELD)  
@Documented  
public @interface InjectLogger {  
} 
```

2）然后为注入记录器创建特殊的 BeanPostProcessor 到带注释的字段中：

```
@Component(value="loggerInjector")
public class LoggerInjector implements BeanPostProcessor {

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {

        return bean;
    }

    @Override
    public Object postProcessBeforeInitialization(final Object bean, String beanName)
            throws BeansException {
        ReflectionUtils.doWithFields(bean.getClass(), new FieldCallback() {  
            public void doWith(Field field) throws IllegalArgumentException,  
            IllegalAccessException {  
                // make the field accessible if defined private  
                ReflectionUtils.makeAccessible(field);  
                if (field.getAnnotation(InjectLogger.class) != null) {  
                    Logger log = LoggerFactory.getLogger(bean.getClass()); 
                    field.set(bean, log);  
                }  
            }  
        });  
        return bean;  
    }  

} 
```

3) 在此之后，在必要的 bean 标记属性中，应通过 @InjectLogger 注释注入记录器并在代码中使用此记录器。

```
 @InjectLogger
    private Logger logger;

public void doSomething(...) {
     try{
     ...
     } catch (Exception e) {
        logger.error("bla bla bla", e);
     }
} 
```

在我的项目中，我使用 slf4j 和 log4j 作为具体实现。但是对于 log4j，它会是相似的。

您还需要知道默认情况下所有 Spring 库都使用 common-logging。如果您希望 Spring 库将其日志写入您的文件，您应该使用特殊的附加库。我记得，你可以从 appache 网站获得它们。对于 slf4j，这样的库被命名为 jcl-over-slf4j-1.6.4.jar。

编辑2：

同样在春季，好的做法是使用 AOP 进行日志记录。下面是一个简化的 Aspect 示例：

```
@Component
@Aspect
@Order(value=2)
public class LoggingAspect {

    @Around("execution(* com.blablabla.server..*.*(..))")
    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable{
        final Logger logger = LoggerFactory.getLogger(joinPoint.getTarget().getClass().getName());
        Object retVal = null;

        try {
            StringBuffer startMessageStringBuffer = new StringBuffer();

            startMessageStringBuffer.append("Start method ");
            startMessageStringBuffer.append(joinPoint.getSignature().getName());
            startMessageStringBuffer.append("(");

            Object[] args = joinPoint.getArgs();
            for (int i = 0; i < args.length; i++) {
                startMessageStringBuffer.append(args[i]).append(",");
            }
            if (args.length > 0) {
                startMessageStringBuffer.deleteCharAt(startMessageStringBuffer.length() - 1);
            }

            startMessageStringBuffer.append(")");

            logger.trace(startMessageStringBuffer.toString());

            StopWatch stopWatch = new StopWatch();
            stopWatch.start();

            retVal = joinPoint.proceed();

            stopWatch.stop();

            StringBuffer endMessageStringBuffer = new StringBuffer();
            endMessageStringBuffer.append("Finish method ");
            endMessageStringBuffer.append(joinPoint.getSignature().getName());
            endMessageStringBuffer.append("(..); execution time: ");
            endMessageStringBuffer.append(stopWatch.getTotalTimeMillis());
            endMessageStringBuffer.append(" ms;");

            logger.trace(endMessageStringBuffer.toString());
        } catch (Throwable ex) {
            StringBuffer errorMessageStringBuffer = new StringBuffer();

             // Create error message 
             logger.error(errorMessageStringBuffer.toString(), e)

            throw ex;
        }

        return retVal;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:26:28.550

您可以尝试将此行添加到您的课程中吗？

```
public class DrawingClass {

   static final Logger log = Logger.getLogger(DrawingClass.class);

public static void main(String args[])
{
    //without dependency injection 
    /*Triangle t1 = new Triangle();
    t1.draw();*/

    log.info("Before execution");
    //with dependency injection     
    BeanFactory factory = new XmlBeanFactory(new FileSystemResource("Spring.xml"));
    Triangle t1 =(Triangle) factory.getBean("triangle");
    t1.draw();
}
 } 
```

现在让我知道是否有任何内容添加到日志中。

此链接可能对您有所帮助 - [http://www.dzone.com/tutorials/java/log4j/sample-log4j-properties-file-configuration-1.html](http://www.dzone.com/tutorials/java/log4j/sample-log4j-properties-file-configuration-1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T03:53:31.970

```
# LOG4J configuration
log4j.rootLogger= DEBUG, INFO, Appender1, Appender2

log4j.appender.Appender1=org.apache.log4j.ConsoleAppender
log4j.appender.Appender1.layout=org.apache.log4j.PatternLayout
log4j.appender.Appender1.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n

log4j.appender.Appender2=org.apache.log4j.FileAppender
log4j.appender.Appender2.File=D:/Project Log/Demo/demo.log
log4j.appender.Appender2.layout=org.apache.log4j.PatternLayout
log4j.appender.Appender2.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n
```

将此代码写入 src 文件夹的 Resources 文件夹中的 log4j.properties 中。

```
<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<version>1.2.17</version>
</dependency>
```

将上述代码写入 porm.xml 文件或下载此依赖项的 jar。

```
<context:property-placeholder location="classpath:log4j.properties" />
```

在 spring-config.xml 之间和中编写上面的代码

```
package com.apmc.controller;

import org.apache.log4j.Logger;
import java.text.DateFormat;
import java.util.Date;
import com.apmc.Generic.RandomGenerator;//This my own made class So You need to create //RandomGenerator for use it

@Controller
public class StateController {

	private static Logger logger = Logger.getLogger(StateController.class);
	DateFormat df = new SimpleDateFormat("ddMMyyHHmmss");
	Date dateobj = new Date();
    int randNum = RandomGenerator.randInt(1000, 9999);
    String successMsg = "", errorMsg = "";

    @Autowired
	StateService stateService;

	List<State> newList = new ArrayList();

    @RequestMapping(value = "/Admin/admin/NewState_form")
	public ModelAndView stateForm(@ModelAttribute State state) {

    try {
			logger.info("\n stateForm Started \n errorcode : "+errorcode);
			newList = stateService.loadAll();
			logger.info("\n stateForm Completed");
			errorMsg = "";
	}  catch (Exception e) {
			errorcode = ""+df.format(dateobj)+randNum;
			errorMsg = " New State Form Error \n Please contact Admin and errorcode:"                           +errorcode;
			successMsg = "";
			logger.error("error code for stateForm in StateController"                                            +df.format(dateobj)+" errorcode: "+errorcode);
	}

    return new ModelAndView("state").addObject("editState",                                                                             new State())
                                    .addObject("errorMsg", errorMsg)                                                         .addObject("showStateList",newList)
                                    .addObject("successMsg", successMsg);
    }
}
```

上面关于如何在 Controller 或任何 Java 类中使用日志的示例在这里我为错误跟踪创建错误代码显示使用 RandomGenerator.java 与错误进行通信，如下所示

```
package com.apmc.Generic;

import java.util.Random;

public class RandomGenerator {

	/**
	 * Returns a pseudo-random number between min and max, inclusive.
	 * The difference between min and max can be at most
	 * <code>Integer.MAX_VALUE - 1</code>.
	 *
	 * @param min Minimum value
	 * @param max Maximum value.  Must be greater than min.
	 * @return Integer between min and max, inclusive.
	 * @see java.util.Random#nextInt(int)
	 */
	public static int randInt(int min, int max) {

	    // NOTE: Usually this should be a field rather than a method
	    // variable so that it is not re-seeded every call.
	    Random rand = new Random();

	    // nextInt is normally exclusive of the top value,
	    // so add 1 to make it inclusive
	    int randomNum = rand.nextInt((max - min) + 1) + min;

	    return randomNum;
	}
}
```

# java - 将 exe 移动到 Windows 服务 - 停止创建日志文件

> ID：11289178
> 
> 赞同：0
> 
> 时间：2012-07-02T07:11:11.680
> 
> 标签：java, windows-services, log4j, exe4j

我正在使用 java 1.6 中的 apache log4j。
我正在使用 exe4j 创建 exe 文件，当我将它放在生产文件夹中时 -
正在成功创建日志。

现在，我把它变成了服务 exe
（检查了 exe4j 中的“服务”复选框并使用 SC 命令安装了它）
并且日志文件停止创建。

有解释/解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:13:24.350

您的服务很可能以无权写入日志文件夹的帐户（本地服务？）运行。

要检查该服务下的帐户是否正在运行，请在“服务”面板中右键单击该服务，选择“属性”，然后查看“登录”选项卡（对于 Windows 7...其他 Windows 版本的确切步骤会有所不同，但想法是相同的）。

我建议继续以所需的最低权限运行您的服务，并修改对日志文件夹的访问权限，以允许运行该服务的帐户写入该文件夹（[Principal of Least Privilege](http://en.wikipedia.org/wiki/Principle_of_least_privilege)）。当然，除了该文件夹中的日志*之外，什么都没有。*

# magento - magento1.6.2 无效的包名，允许：[a-zA-Z0-9_-] chars

> ID：11289180
> 
> 赞同：1
> 
> 时间：2012-07-02T07:11:21.190
> 
> 标签：magento

我已经安装了 Magento 1.6.2，我正在尝试使用“直接包文件上传”安装付费扩展。我使用 Magento 连接管理器 1.5.0（我安装了带有扩展密钥的免费扩展，它有效。）

然后我尝试上传我使用“直接包文件上传”购买的付费扩展程序之一，并收到以下错误 CONNECT ERROR: Package file is invalid Invalid package name, allowed: [a-zA-Z0-9_-] chars Invalid version,应该是这样的： xxx 无效的稳定性 无效的日期，应该是 YYYY-DD-MM 无效的频道 URL 空作者部分 空包内容部分

使用另一个插件我得到：文件上传问题或

连接错误：包文件无效 无效的频道 URL

感谢之前是否有人解决过这个问题。

谢谢

# vb.net - 语音识别语法的问题 - VB.NET

> ID：11289188
> 
> 赞同：1
> 
> 时间：2012-07-02T07:11:59.247
> 
> 标签：vb.net, speech-recognition, grammar

当我尝试加载我以编程方式创建的语法时，出现错误： **SAPI 没有实现语音字母选择。**

我的代码：

```
Public Class Form1

Dim engine As New Speech.Recognition.SpeechRecognitionEngine  
Dim gram As new Speech.Recognition.Grammar("C:\Test\Speech\mygrammar.xml")      
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)   Handles MyBase.Load

Dim choices = New Recognition.Choices()

choices.Add("Red")
choices.Add("Blue")
choices.Add("Green")
choices.Add("Yellow")
Dim gb = New GrammarBuilder()

gb.Append(choices)

Dim doc = New Speech.Recognition.SrgsGrammar.SrgsDocument(gb)
IO.Directory.CreateDirectory("C:\Test")
IO.Directory.CreateDirectory("C:\Test\Speech")
Dim xWriter = System.Xml.XmlWriter.Create("C:\Test\Speech\mygrammar.xml")

doc.WriteSrgs(xWriter)
xWriter.Close()

Dim compiledFile = New FileStream("C:\Test\Speech\mycompiledgrammar.cfg", FileMode.OpenOrCreate)

Speech.Recognition.SrgsGrammar.SrgsGrammarCompiler.Compile("C:\Test\Speech\mygrammar.xml", compiledFile)
compiledFile.Close() 
```

结束子

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click  
engine.LoadGrammar(gram) 'There's the error  
engine.SetInputToWaveFile("D:\record.wav")  
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T23:00:11.267

您可能正在使用 Windows Pre-Vista (NT5)...该错误是由于 SAPI 版本不是 5.3 或更高...在 Windows 7 中测试代码，一切都应该运行正常...

您可以在库中看到问题，第 299 到 325 行，我将链接放在下面

[C# 中 .NET 框架的源代码，C# .NET 中的 RecognizerBase.cs 源代码](http://www.dotnetframework.org/default.aspx/DotNET/DotNET/8@0/untmp/WIN_WINDOWS/lh_tools_devdiv_wpf/Windows/wcp/Speech/Src/Recognition/RecognizerBase@cs/1/RecognizerBase@cs)

保持良好...

# ios - RestKit：嵌入在 NSObject 中的 NSManagedObject

> ID：11289193
> 
> 赞同：0
> 
> 时间：2012-07-02T07:12:16.280
> 
> 标签：ios, restkit

`Book`是一个普通的`NSObject`，`Author`而是一个`NSManagedObject`，并且我正在映射`Book#author`到`Author`，`Book.objectMapping`问题是我将一个托管对象嵌入到一个普通对象中，RestKit 是否有可能将嵌入映射`author`到一个 CoreData 对象？

```
//Book.m
+ (RKObjectMapping *)objectMapping {
        RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Book class]];
        mapping.rootKeyPath = @"book";
       [mapping mapKeyPathsToAttributes:@"book_id", @"bookID",
                                        @"author_id", @"authorID", nil];

       [mapping mapKeyPath:@"author"
            toRelationship:@"author"
               withMapping:[Author objectMapping]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:27:37.007

One thing to check is that you associated the class to the entity in your Core Data Model. Pull up the Entity Inspector and make sure you set the Class to Author. If you don't set the class it'll end up loading your objects as NSManagedObjects.

# javascript - 合并 2 个 jQuery ajax 调用的结果

> ID：11289194
> 
> 赞同：0
> 
> 时间：2012-07-02T07:12:22.193
> 
> 标签：javascript, jquery, ajax

我正在摸索如何将 2 个 jQuery ajax 调用的结果组合起来，这些调用将结果返回到同一个 DOM 元素中。这是我的设置：

*   有 2 个调用：一个来自食物列表，第二个来自成分列表
*   两个调用都返回一个成分列表
*   这个想法是根据 2 个来源（食物清单和成分清单）制作购物清单（要购买的成分）
*   用户可以通过选择食物（从数据库中检索成分）来创建购物清单，也可以直接从成分列表中选择成分

**问题：**这 2 个调用各自运行良好。但问题是一次调用的结果总是替换第二次调用的结果，反之亦然。

```
var postUrl = "http://localhost:8000/ingredients/";
var ingrUrl = "http://localhost:8000/ingrs/";
var selectedFoods = [];
var selectedIngrs = [];

$('.foods a').click(function(event){
    clickedLink = $(this).attr('id');

    if (selectedFoods.indexOf(clickedLink) != -1) {
        var index = selectedFoods.indexOf(clickedLink);
        selectedFoods.splice(index, 1);}   
    else {
        selectedFoods.push(clickedLink);
    };

    var jsonFoods = JSON.stringify(selectedFoods);
    $.ajax({
        url: postUrl,
        type: 'POST',
        data: jsonFoods,
        dataType: 'html',
        success: function(result){
            $('.ingredients').html(result);
            }
    });       
});

$('.ingr-list a').click(function(event) {
    clickedIngr = $(this).attr('id');

    if (selectedIngrs.indexOf(clickedIngr) != -1) {
        var index = selectedIngrs.indexOf(clickedIngr);
        selectedIngrs.splice(index, 1);}   
    else {
        selectedIngrs.push(clickedIngr);
    };

    var jsonIngrs = JSON.stringify(selectedIngrs);
    $.ajax({
        url: ingrUrl,
        type: 'POST',
        data: jsonIngrs,
        dataType: 'html',
        success: function(result){
            $('.ingredients').html(result);
            }
    });

}); 
```

我尝试`$('.ingredients').html(result);`使用`append`而不是使用这条线，`html`但这不起作用，因为用户应该能够从列表中删除成分（请参阅两个函数中的 if 条件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:16:13.770

只需为它们使用不同的容器

```
<div class="ingredients">
    <div id="first"></div>
    <div id="second"></diV>
</div> 
```

然后设置`.html()`of`$("#first")`和`$("#second")`而不是`.ingredients`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:14:51.850

使用[.append](http://api.jquery.com/append/)

```
 $('.ingredients').append(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:31:06.223

看看这是否是答案[下划线js模板](http://underscorejs.org/#template)

您需要做的不是传回html，而是传回**json**，并使用js模板在浏览器中呈现它。

一些假代码：

```
var global_ingredients = [];
var list = "<% _.each(ingredients, function(ingredient) \
           { %> <li><%= ingredient.name %></li> <% }); %>;";

$.post('', postdata, function(ingredients){
    global_ingredients.push(ingredients); 
    // here you could also eliminate duplicated ingredients, 
    // sort the ingredients, do whatever you likes
    var new_html = _.template(list,  global_ingredients); 
    $('.ingredients').html(new_html);
}); 
```

# spring-mvc - 使用 Spring MVC 在 Freemarker 模板中读取 RequestParameters

> ID：11289203
> 
> 赞同：1
> 
> 时间：2012-07-02T07:13:09.117
> 
> 标签：spring-mvc, httprequest, freemarker

我在网上搜索了所有的答案，但找不到答案。我希望有人在处理同样的问题。

我正在开发基于 Spring MVC (3.1) 和 Freemarker (2.3.16) 的应用程序。我的 Freemarker 配置如下所示：

```
 <!--  FreeMarker parsing -->
 <bean id="freemarkerConfig"  class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPath"  value="/WEB-INF" />

     <property name="freemarkerSettings"> 
        <props>
             <prop key="default_encoding">UTF-8</prop>
             <prop key="output_encoding">UTF-8</prop>
        </props>
     </property>

 </bean>

 <bean id="viewResolver"
  class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
      <property name="cache" value="true" />
      <property name="prefix" value="/views/" />
      <property name="suffix" value=".ftl" />

      <property name="requestContextAttribute" value="rc"></property>

      <!-- if you want to use the Spring FreeMarker macros, set this property to true -->
      <property name="exposeSpringMacroHelpers" value="true" />

      <property name="contentType" value="text/html;charset=UTF-8"></property>

      <property name="exposeRequestAttributes" value="true" />
          <property name="exposeSessionAttributes" value="true" />

 </bean> 
```

这很简单。我对渲染布局/视图没有问题。问题在于 Spring Controller 并将请求参数写入视图。我最简单的控制器操作是这样的：

```
@RequestMapping(value={"/simplest/action","/simplest"}, method=RequestMethod.GET)
 @Transactional
 public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

     ModelAndView mv = new ModelAndView("/simplest/action");        
     mv.addObject("myCustomIdFromView",  "66666" );
     return mv;
  } 
```

视图渲染成功。在这个视图中，我使用了这样的结构：

```
<input type="hidden" name="myCustomIdFromView" id="myCustomIdFromView" value="${myCustomIdFromView}" /> 
```

但是有了这样的结构，Freemarker 没有任何价值。如果我将输入更改为：

```
<input type="hidden" name="myCustomIdFromView" id="myCustomIdFromView" value="${myCustomIdFromView!'default'}" /> 
```

然后正确呈现“默认”。所以我切换到RequestParameters。还有一件奇怪的事。带结构：

```
{$RequestParameters.myCustomIdFromView}
{$RequestParameters['myCustomIdFromView']} 
```

我收到 Freemarker 'undefined' 的空值。

我终于找到了这样的解决方案。

```
<#assign myCustomIdFromView = '' />
<#list RequestParameters?keys as key>
 <#if key == 'myCustomIdFromView'>
    <#assign myCustomIdFromView = RequestParameters[key] />
    ${myCustomIdFromView}
 </#if>
</#list> 
```

它正在工作！谁能告诉我为什么我在将参数传递给 ModelAndView 并将其呈现在模板中这样简单的事情上遇到问题？这些值（如您所见）在模型/请求参数中，但导致问题的是 Freemarker？任何帮助表示赞赏。

干杯， 克莱比克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:16:32.630

我发现出了什么问题。我正在使用 Spring MVC。因此，有一条默认规则说，默认情况下`-servlet.xml`将加载所有配置文件。

在我的`frontcontroller-servlet.xml`我有**import**声明，其中包括 base `applicationContext.xml`。在这个文件中，我还有另外 3 个导入（以支持配置文件的碎片整理 - 带有用于 DB、控制器等的配置）。

但是**web.xml**中还提供的是：

```
 <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext*</param-value>
</context-param> 
```

这两件事结合在一起的结果是标准 Spring bean 的双重创建。当我开始与 Spring Security 集成时，它就出现了——突然我的应用程序无法部署——并且异常指出存在双 bean（`@Autowire`注释发疯了）。

因此，我假设`Freemarker`Spring（或 Spring 本身）的内部类发生了一些事情，并且存在两个模型（带有请求参数）。现在 - 当我使用我的问题中的代码时，一切都正确呈现。

# ruby-on-rails - 在 Rails 3.1 上提取 Facebook Omniauth 身份验证 uid 的问题

> ID：11289207
> 
> 赞同：0
> 
> 时间：2012-07-02T07:13:38.720
> 
> 标签：ruby-on-rails, facebook, authentication, omniauth, uid

我正在尝试提取Facebook 用户的 Omniauth 身份验证的**uid并将其保存在我的数据库中。**

当我发出命令**user.authentications**时，将显示结果数组：

[<身份验证ID：3，user_id：63，提供者：“facebook”，uid：“123456789”，created_at：“2012-07-02 02:10:48”，updated_at：“2012-07-02 02:10： 48" > ]

但是当我执行**user.authentications.last**时，要从 1 项数组中获取上述身份验证，我会收到：

< 认证：0x007f837d32e288 >

为什么不显示所有参数，**id、user_id、provider、uid**等。我这种方式无法访问和提取uid。我正在尝试运行**user.authentications.last.uid**。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:15:18.560

您在这里看到的只是对象的不同字符串表示形式。 `Array`' 的`to_s`方法给你一个很好的打印输出，但`Authentication`'`to_s`没有。`user.authentications.last.inspect`如果你只是想看看，试试看。

# c# - 使用 ORM 生成的实体作为多态的域对象

> ID：11289211
> 
> 赞同：0
> 
> 时间：2012-07-02T07:13:56.117
> 
> 标签：c#, .net, entity-framework, nhibernate, linq-to-sql

我们需要从下表中生成以下域类模型。是否可以使用 Linq 2 SQL 来实现它。如果不可能，Entity Framework 会有帮助吗？你能解释一下怎么做吗？

注意：域类的代码在[如何实现存储库 FindAll() 方法？](https://stackoverflow.com/questions/11261212/how-to-implement-repository-findall-method). 那里也提供了映射示例。

注意：我试图避免 Linq 2 SQL 生成的实体和域类之间的映射。

**编辑**：“Linq to SQL，作为一种对象关系映射技术，仅支持按类层次结构表策略。这意味着继承层次结构中的所有级别都存储在同一个表中，并且鉴别器列告诉记录代表什么类。 "

```
CREATE TABLE [dbo].[BankAccount](
[BankAccountID] [int] NOT NULL,
[AccountType] [nchar](10) NOT NULL,
[OpenedDate] [datetime] NULL,
[Status] [nchar](10) NULL,
[AccountOwnerID] [int] NULL,
 CONSTRAINT [PK_BankAccount] PRIMARY KEY CLUSTERED 
(
[BankAccountID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
 ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

![在此处输入图像描述](../Images/e5e76f7a4eb3d4db398236663b21c5cd.png)

工厂如下

```
public class MySimpleBankAccountFactory : IBankAccountFactory
{
    public DomainEntitiesForBank.IBankAccount CreateAccount(string accountType, int bankAccountID, string status, System.Nullable<System.DateTime> openedDate, System.Nullable<int> accountOwnerID)
    {
        DomainEntitiesForBank.IBankAccount acc = null;

        if (System.String.Equals(accountType, "Fixed"))
        {
            acc = new DomainEntitiesForBank.FixedBankAccount();
            acc.BankAccountID = bankAccountID;
            acc.AccountStatus = status;
        }

        if (System.String.Equals(accountType, "Savings"))
        {
            acc = new DomainEntitiesForBank.SavingsBankAccount();
            acc.BankAccountID = bankAccountID;
            acc.AccountStatus = status;
        }

        return acc;
    }
} 
```

阅读

2.  [实体类从 LINQ 到 SQL 提供程序分离，以实现存储库模式。如何？](https://stackoverflow.com/questions/229627/entity-classes-decoupled-from-linq-to-sql-provider-for-implementing-the-reposito)

3.  使用 POCO LINQ to SQL 实体 [http://stephenwalther.com/archive/2008/07/22/asp-net-tip-23-use-poco-linq-to-sql-entities.aspx](http://stephenwalther.com/archive/2008/07/22/asp-net-tip-23-use-poco-linq-to-sql-entities.aspx)

4.  使用 LINQ to SQL XML 映射文件 [http://weblogs.asp.net/dwahlin/archive/2008/08/18/using-linq-to-sql-xml-mapping-files-step-by-step.aspx](http://weblogs.asp.net/dwahlin/archive/2008/08/18/using-linq-to-sql-xml-mapping-files-step-by-step.aspx)

5.  如何：创建使用 POCO 定义的实体的域服务 [http://msdn.microsoft.com/en-us/library/gg602754(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/gg602754(v=vs.91).aspx)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:10:16.250

我不确定 Linq-to-Sql 是否支持映射到接口（实体框架不支持，但 NHibernate 支持）。如果你`IBankAccount`用抽象类替换你的，`BankAccount`你应该能够在所有提到的技术中简单地映射 TPH 继承。[这](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/01/linq-to-sql-inheritance.aspx)是 Linq-to-Sql 的示例。

映射继承后，您可以查询基类或特定类（通过`OfType`在 Linq-to-Sql 或实体框架中使用）。当查询一个基类时，ORM 也会在内部遍历所有继承的类。

# javascript - 移动到外部 .js 文件时 JavaScript 无法正常工作

> ID：11289216
> 
> 赞同：0
> 
> 时间：2012-07-02T07:14:15.990
> 
> 标签：javascript, jquery, html, css

我在我的 html 页面中使用了一个 java 脚本。现在我将脚本移动到一个外部 js 文件中。这是脚本（jful.js）

```
<script type="text/javascript">
$(function() {

    // grab the initial top offset of the navigation 
    var sticky_navigation_offset_top = $('#catnav').offset().top;

    // our function that decides weather the navigation bar should have "fixed" css position or not.
    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        // if we've scrolled more than the navigation, change its position to fixed to stick to top,
        // otherwise change it back to relative
        if (scroll_top > sticky_navigation_offset_top) { 
            $('#catnav').css({ 'position': 'fixed', 'top':0, 'left':0 });
        } else {
            $('#catnav').css({ 'position': 'relative' }); 
        }   
    };

    // run our function on load
    sticky_navigation();

    // and run it again every time you scroll
    $(window).scroll(function() {
         sticky_navigation();
    });

});
</script> 
```

现在脚本不工作了。我包括这样的脚本

```
<head><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript"  src="jful.js"></script></head> 
```

当我再次将脚本直接添加到 HTML 文档时，它可以工作！（当我们向下滚动页面时执行此脚本）有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T07:15:34.553

删除这些

```
<script type="text/javascript"> 
```

和

```
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T07:15:35.863

在 jful.js 中不需要`<script type="text/javascript">`和。`</script>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:15:50.270

如果您`<script type="text/javascript">`在 JS 文件中添加了删除标签，您应该只在 .js 文件中包含纯 JS 代码。

# sql - 无法将 nvarchar 转换为浮动

> ID：11289223
> 
> 赞同：1
> 
> 时间：2012-07-02T07:14:47.207
> 
> 标签：sql, sql-server, tsql, exception-handling, casting

我有一个奇怪的问题。

在我的查询中，我选择了 5 列，其中两列是`nvarchar`数字形式（仅包含数字和精度点），其他三列是`uniqueIdentifier`and `nvarchar`。

`Float`我想在我的选择语句中将这两列强制转换，但出现错误

> 无法将 nvarchar 转换为浮动。

我多次检查了所有这些值的格式。相信我，他们很好。

但是当我只选择这两列并将它们转换为浮动时，查询会成功运行。

我感谢任何关于这个主题的帮助。

我也可以在这里粘贴查询。但是整个查询超过 100 行，这将是令人沮丧的写作和阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:29:13.830

在回答之前肯定需要您提供更多信息。您可以发布您的一些代码（或您的问题的小复制）吗？也许你的表定义也是如此？

由于所有值都是数字，为什么要将该列保留为 nvarchar？

最后，您的任何数据中是否包含美元符号 ($)？

这有效：

```
DECLARE @Text nvarchar(100)

SET @Text = '1234.567'

SELECT CONVERT(float, @Text) AS ColumnValue 
```

这样做也是如此：

```
DECLARE @Text nvarchar(100)

SET @Text = '    1234.567    '

SELECT CONVERT(float, @Text) AS ColumnValue 
```

但这不会：

```
DECLARE @Text nvarchar(100)

SET @Text = '$1234.567'

SELECT CONVERT(float, @Text) AS ColumnValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:03:05.527

不确定没有看到您的查询，但我认为这应该有效：

```
SELECT CONVERT(Float(2), LTRIM(RTRIM(<nVarchar Column>))) AS Amount FROM ...... 
```

# php - str_replace 不起作用

> ID：11289225
> 
> 赞同：1
> 
> 时间：2012-07-02T07:14:51.857
> 
> 标签：php, str-replace

这是我的字符串：

```
$a = "RSS
here: 
Your result: 3 points form 50 example."; 
```

如何从此字符串中删除“RSS here：”？

我的尝试：

```
$result = str_replace("RSS
here: 
Your result: 3 points form 50 example.", " " ,$a);
echo $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:21:10.080

用于`\r\n`例如`carriage return + line feed`新行：

```
$a = "RSS
here: 
Your result: 3 points form 50 example.";

$result = str_replace("RSS\r\nhere:", "" ,$a);
echo $result; 
```

**结果：**

```
Your result: 3 points form 50 example. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:17:47.307

如果您在此处的 RSS 中没有特殊字符：应该这样做

```
$result = str_replace("RSS here:", "", $a); 
```

# c# - 类签名中的通用约束推断

> ID：11289227
> 
> 赞同：2
> 
> 时间：2012-07-02T07:14:54.350
> 
> 标签：c#, .net, generic-constraints

在使用 C# 泛型约束时，我对某些要求感到沮丧，我想知道是否有办法解决我的问题。如果没有，我想解释一下为什么事情没有按照我想要的方式工作。

这个例子展示了我目前基本上要做的事情：

```
public abstract class EntityBase<TID>
    where TID : struct, IEquatable<TID>
{ }

public abstract class LogicBase<TEntity, TID>
    where TEntity : EntityBase<TID>
    where TID : struct, IEquatable<TID>
{ }

public abstract class ServiceBase<TLogic, TEntity, TID>
    where TLogic : LogicBase<TEntity, TID>
    where TEntity : EntityBase<TID>
    where TID : struct, IEquatable<TID>
{ }

// Concrete Examples
public class EgEntity : EntityBase<long> {}
public class EgLogic : LogicBase<EgEntity, long> {}
public class EgService : ServiceBase<EgLogic, EgEntity, long> {} 
```

**提案 A**显示了我希望得到的东西（我看不出它不能以这种方式工作的原因）：

```
public abstract class EntityBase<TID>
    where TID : struct, IEquatable<TID>
{ }

public abstract class LogicBase<TEntity>
    where TEntity : EntityBase<?>  // why not allow some kind of a "this could be whatever" syntax here ("?"), then infer the constraints on "?" based on the definition of EntityBase<>
{ }

public abstract class ServiceBase<TLogic>
    where TLogic : LogicBase<?>  // infer the constraints on "?" based on the definition of LogicBase<>
{ }

// Concrete Examples
public class EgEntity : EntityBase<long> {}
public class EgLogic : LogicBase<EgEntity> {}
public class EgService : ServiceBase<EgLogic> {} 
```

**提案 B**展示了另一种可能的选择，尽管不如提案 A 有吸引力：

```
public abstract class EntityBase<TID>
    where TID : struct, IEquatable<TID>
{ }

public abstract class LogicBase<TEntity>
    where TEntity : EntityBase<TID>  // introduce TID here to keep it out of class signature
    where TID : struct, IEquatable<TID>
{ }

public abstract class ServiceBase<TLogic>
    where TLogic : LogicBase<TEntity>  // introduce TEntity here
    where TEntity : EntityBase<TID>  // introduce TID here
    where TID : struct, IEquatable<TID>
{ }

// Concrete Examples
public class EgEntity : EntityBase<long> {}
public class EgLogic : LogicBase<EgEntity> {}
public class EgService : ServiceBase<EgLogic> {} 
```

这两个提案都将最小化我在创建派生类型时必须指定的类型参数的数量，并且提案 A 将消除对一堆冗余约束的需要。

那么 C# 不能/不应该为这些提案之一提供支持是否有原因？（或者我是否忽略了该语言的相关现有功能？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:35:30.513

这就是 C# 的基本方式。就允许您对类型施加的限制而言，在哪里存在一些限制。

一般来说，该`where`子句的大多数选项都与添加此限制将允许您对泛型类中的对象执行某些操作有关，这取决于所使用的泛型类型（例如：通过告诉它`TID`是一个`IEquatable<TID>`，您可以使用 TID好像它后来是一个 IEquatable）。逻辑是，如果您不以任何方式依赖该功能，那么实际上您的班级没有理由需要限制（尽管我承认为了清洁起见它可能很好）。

当涉及到所需`LogicBase<?>`的 时，已经提出了一个非常复杂的难题，就您现在可以用这个对象做什么。当您在`ServiceBase<TLogic>`其中定义了 TLogic `LogicBase<?>`时，LogicBase 的哪些功能实际上可以使用？

如果您希望获得一些不依赖于知道它的泛型类型的功能子集，那么我想说的是，您实际上需要定义一个`Interface`甚至只是`abstract class`定义`ServiceBase<TLogic>`不依赖于数据类型`TLogic`并限制你`ServiceBase<TLogic>`的 's`TLogic`是这种新类型。因为这实际上是您要求应用程序为您推断的内容（表示 a 的组件的接口，其`LogicBase<?>`本质上并不依赖于它的泛型类型）。

因此，尽管理论上编译器可以以这种方式解释这一点，并在不参考对象数据类型的情况下制定出所需的约束强制和对象可用接口，但它在继承设置的复杂性和我的个人的想法是，简单地声明一个接口将是一种更有条理的方式来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:49:12.653

为什么不定义一个接口 IEntityBase 并使 LogicBase 和 ServiceBase 只依赖于这个接口。这将使您能够摆脱 TEntity 类型参数。

# java - Android 的英语到印地语音译

> ID：11289234
> 
> 赞同：1
> 
> 时间：2012-07-02T07:15:49.200
> 
> 标签：java, android, translation, hindi

公共类 AndroidTranslate 扩展 Activity {

```
EditText MyInputText;
Button MyTranslateButton;
TextView MyOutputText;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MyInputText = (EditText)findViewById(R.id.InputText);
    MyTranslateButton = (Button)findViewById(R.id.TranslateButton);
    MyOutputText = (TextView)findViewById(R.id.OutputText);

    MyTranslateButton.setOnClickListener(MyTranslateButtonOnClickListener);
}

private Button.OnClickListener MyTranslateButtonOnClickListener 
  = new Button.OnClickListener(){

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String InputString;
        String OutputString = null;
        InputString = MyInputText.getText().toString();

        try {
            GoogleAPI.setHttpReferrer("http:\\www.google.com");
            GoogleAPI.setKey(" API KEY");
            OutputString = Translate.DEFAULT.execute(InputString,Language.ENGLISH, Language.HINDI);
        } catch (Exception ex) {
            ex.printStackTrace();
            OutputString = "Error";
        }

         Typeface customF = Typeface.createFromAsset(getAssets(), "akshar.ttf");

        //final TextView textV = (TextView) findViewById(...);
        MyOutputText.setTypeface(customF);
        MyOutputText.setText(OutputString);

    }

}; 
```

}

这段代码正在运行，但没有显示正确的输出，例如如果我的输入是“aap kaise ho”，它会给出输出 =“आप कैसे हो”，但是如果我只给出输入“a”或“abc”，那么输出应该是“अ”或“ अबक”，但它没有显示这样的输出。对于“a”，它显示“एक”

有人可以帮忙解决这个问题吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:21:54.630

这似乎不是 Android 或技术问题，而是谷歌翻译“a”的方式： [http ://translate.google.com/?hl=nl&tab=wT#en|hi|a](http://translate.google.com/?hl=nl&tab=wT#en|hi|a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T03:40:52.933

我认为您在尝试在代码中实现音译时正在使用翻译 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T07:16:50.890

它不会为“a”显示“अ”，因为在印地语中，“a”的意思是“एक”。实现这一点的唯一方法是对一个单词进行多次翻译，但目前在 google translate api 中没有对一个单词的多次翻译支持。您可以通过谷歌翻译当前在网络界面中使用的网络服务来实现这一点。

```
http://translate.google.com/translate_a/t?client=t&text=a&hl=en&sl=en&tl=hi&multires=1&otf=2&pc=0&sc=1 
```

您可能不会从中收到所需的输出。

# mysql-workbench - MYSQL 工作台 - 表位置

> ID：11289235
> 
> 赞同：1
> 
> 时间：2012-07-02T07:15:50.370
> 
> 标签：mysql-workbench

这听起来可能很初级，但是我已经通过在 Workbench 中运行查询来创建表。现在，这些表存储在我的计算机上的什么位置？工作台在哪里存储它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:22:27.440

在 Windows 7 上，您的文件应位于`C:\ProgramData\MySQL\<your MySQL version>\Data\`

# scala - 在scala中做一个懒惰的var

> ID：11289243
> 
> 赞同：13
> 
> 时间：2012-07-02T07:16:33.690
> 
> 标签：scala, lazy-evaluation

Scala 不允许创建惰性变量，只允许创建惰性变量。有道理。

但是我遇到了用例，我希望有类似的能力。我需要一个惰性变量持有者。它可能被分配一个应该通过耗时的算法计算的值。但它可能稍后会重新分配给另一个值，我根本不想调用第一个值计算。

假设有一些魔术 var 定义的示例

```
lazy var value : Int = _
val calc1 : () => Int = ... // some calculation
val calc2 : () => Int = ... // other calculation
value = calc1
value = calc2
val result : Int = value + 1 
```

这段代码应该只调用 calc2()，而不是 calc1

我知道如何使用隐式转换和特殊容器类编写这个容器。我很好奇是否有任何不需要我编写不必要代码的嵌入式 scala 功能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T07:58:38.750

这有效：

```
var value: () => Int = _
val calc1: () => Int = () => { println("calc1"); 47 }
val calc2: () => Int = () => { println("calc2"); 11 }
value = calc1
value = calc2
var result = value + 1 /* prints "calc2" */

implicit def invokeUnitToInt(f: () => Int): Int = f() 
```

隐式让我有点担心，因为它适用范围广泛，这可能会导致意外的应用程序或编译器关于模糊隐式的错误。

另一种解决方案是使用带有 setter 和 getter 方法的包装器对象，为您实现惰性行为：

```
lazy val calc3 = { println("calc3"); 3 }
lazy val calc4 = { println("calc4"); 4 }

class LazyVar[A] {
  private var f: () => A = _
  def value: A = f() /* getter */
  def value_=(f: => A) = this.f = () => f /* setter */
}

var lv = new LazyVar[Int]
lv.value = calc3
lv.value = calc4
var result = lv.value + 1 /* prints "calc4 */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:17:38.007

你可以简单地让编译器自己工作，然后像这样做：

```
class Foo {
  private[this] var _field: String = _
  def field = {
    if(_field == null) {
      _field = "foo" // calc here
    }
    _field
  }

  def field_=(str: String) {
    _field = str
  }
}

scala> val x = new Foo
x: Foo = Foo@11ba3c1f

scala> x.field
res2: String = foo

scala> x.field = "bar"
x.field: String = bar

scala> x.field
res3: String = bar 
```

编辑：这不是当前形式的线程安全！

编辑2：

与 mhs 的第二种解决方案的不同之处在于，计算只会发生一次，而在 mhs 的解决方案中，它会被一遍又一遍地调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T21:13:34.287

我总结了所有为构建自定义容器提供的建议：

```
object LazyVar {

  class NotInitialized extends Exception

  case class Update[+T]( update : () => T )
  implicit def impliciţUpdate[T](update: () => T) : Update[T] = Update(update)

  final class LazyVar[T] (initial : Option[Update[T]] = None ){
    private[this] var cache : Option[T] = None
    private[this] var data : Option[Update[T]] = initial

    def put(update : Update[T]) : LazyVar[T] = this.synchronized {
      data = Some(update)
      this
    }
    def set(value : T) : LazyVar[T] = this.synchronized {
      data = None
      cache = Some(value)
      this
    }
    def get : T = this.synchronized { data match {
      case None => cache.getOrElse(throw new NotInitialized)
      case Some(Update(update)) => {
        val res = update()
        cache = Some(res)
        res
      }
    } }

    def := (update : Update[T]) : LazyVar[T] = put(update)
    def := (value : T) : LazyVar[T] = set(value)
    def apply() : T = get
  }
  object LazyVar {
    def apply[T]( initial : Option[Update[T]] = None ) = new LazyVar[T](initial)
    def apply[T]( value : T) = {
      val res = new LazyVar[T]()
      res.set(value)
      res
    }
  }
  implicit def geţLazy[T](lazyvar : LazyVar[T]) : T = lazyvar.get

  object Test {
    val getInt1 : () => Int = () => {
      print("GetInt1")
      1
    }
    val getInt2 : () => Int = () => {
      print("GetInt2")
      2
    }
    val li : LazyVar[Int] = LazyVar()
    li := getInt1
    li := getInt2
    val si : Int = li
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T07:58:11.130

```
var value: () => Int = _
lazy val calc1 = {println("some calculation"); 1}
lazy val calc2 = {println("other calculation"); 2}
value = () => calc1
value = () => calc2

scala> val result : Int = value() + 1
other calculation
result: Int = 3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T15:37:53.517

如果您想继续使用 a `lazy val`（它可以用于依赖路径的类型并且它是线程安全的），您可以在其定义中添加一层间接（以前的解决方案使用`var`s 作为间接）：

```
lazy val value: Int = thunk()
@volatile private var thunk: () => Int = ..

thunk = ...
thunk = ... 
```

当然，如果你想重用它，你可以将它封装在一个类中。

# multithreading - DirectX 在其他线程中绘图

> ID：11289244
> 
> 赞同：1
> 
> 时间：2012-07-02T07:16:42.533
> 
> 标签：multithreading, directx, directx-9

我有一些要在第二个线程中运行的 directx 代码。我阅读了以下[如何在 Direct3D9 中使用多线程设备运行？](http://www.codermind.com/answers/How-do-I-run-with-a-multithreaded-device-in-Direct3D9.html)这表示只要您不从多个线程同时使用，就可以从其他线程使用 directx 设备，而我没有这样做。并且您必须从同一个线程调用 CreateDevice 和 CreateWindow，以及其他一些函数，如 TestCooperativeLevel、Reset 等

我正在做以下事情：

1.  在主线程中创建窗口和directx设备；

2.  启动第二个线程并在那里进行渲染和更新，基本上：

    *   更新，
    *   开始场景，
    *   画，
    *   结束场景，
    *   当下;
3.  我还关心从主线程调用 TestCooperativeLevel、Reset、pDevice->Release 和 pDirect3D->Release()。

### 问题

当我在调试模式下对其进行测试时，该代码正在运行。但它不在释放模式下，即渲染线程似乎一切正常，但我的主线程似乎被阻塞并且不处理消息，或者有时处理它们非常慢。如果只是评论对 Present 的调用，一切都很好（当然它不会在屏幕上绘制），即主线程是响应式的，第二个线程也在运行。Sooo，如果在主线程中创建窗口和设备，从其他线程调用 Present 时是否有问题？当我阅读以下[多线程问题](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147224%28v=vs.85%29.aspx)时，此类限制仅适用于 CreateDevice、TestCooperativeLevel 和 Release。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:28:14.977

当 Present 从与运行消息泵的线程不同的线程中调用时，可能会引入死锁。更多信息： [多线程和 DXGI](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025.aspx#Multithreading_and_DXGI)

# java - Web 应用程序中 hsqldb 文件的相对路径不起作用？

> ID：11289245
> 
> 赞同：2
> 
> 时间：2012-07-02T07:16:45.213
> 
> 标签：java, spring, tomcat, hsqldb

我将 hsqldb 用于基于 Spring 的 java webapp。我将数据库文件（mydb.lck、mydb.properties、..）放在 src\main\java\data 文件夹中，以便将它们发布到 WEB-INF\classes\data 中。

在数据源配置中，我指定了 JVM 工作目录的相对路径。按照 hsqldb 文档中的指导。

`portal.jdbc.url=jdbc:hsqldb:file:/data/mydb`（这个分隔符适用于 Windows 吗？）

但是Spring似乎没有找到这条路并坚持声称

`java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: CUSTOMER org.hsqldb.jdbc.Util.sqlException(Unknown Source)`

但是，如果我指定一个绝对路径，它可以完美地工作

`portal.jdbc.url=jdbc:hsqldb:file:d:\\TomcatServer\\apache-tomcat-7.0.10\\wtpwebapps\\myportal-app\\data\\mydb`

我应该错过了解 Web 应用程序上的 JVM 工作目录吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T04:36:27.043

似乎 Tomcat 没有为我们提供一个属性变量（如“webroot”）来引用我的应用程序上下文。所以我的解决方案是在 Servlet 上下文监听器中注册这样的属性。

我的代码：

```
 public class WebAppPropertiesListener implements ServletContextListener{
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        String rootPath = sce.getServletContext().getRealPath("/");
        System.setProperty("webroot", rootPath);

    }
    ...
 } 
```

并在触发 Spring 上下文之前在 web.xml 中添加监听器

```
<listener>
    <listener-class>com.iportal.util.WebAppPropertiesListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

然后我把属性放在 Hsqldb 设置中。

```
portal.jdbc.url=jdbc:hsqldb:file:${webroot}WEB-INF/classes/data/mydb 
```

希望这对可能遇到同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:32:41.760

HSQLDB 2.2.8 及更高版本允许在连接 URL 中使用变量。该变量可以是任何系统属性，例如 Web 应用程序目录路径。

[http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html#dpc_variables_url](http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html#dpc_variables_url)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:19:38.010

请参阅“连接 URL 中的变量”部分

[http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html](http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html)

例子

jdbc:hsqldb:file:${mydbpath};sql.enforce_types=true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-05T08:24:59.747

感谢 fredt 的回答，在 Tomcat 8 上找到了[答案](https://stackoverflow.com/questions/11289245/relative-path-to-hsqldb-files-in-a-web-app-doesnt-work/11289418#11289418)。

```
url = "jdbc:hsqldb:file:" + mydbpath; 
```

其中 mydbpath 是具有指定数据库的实际路径的变量。这以某种方式有效

# html - 使用 css 更改下划线颜色在 chrome 中不起作用？

> ID：11289248
> 
> 赞同：6
> 
> 时间：2012-07-02T07:16:58.930
> 
> 标签：html, css, underline

我试图在使用 spans 的悬停事件期间更改下划线颜色，它在 IE9 和 Firefox 13.01 中有效，但在 Chrome 中无效（它应该在金色下划线）。

`#menu li:hover span.underline { text-decoration:underline; color: #FAA301; }`

`<ul id="menu"> <li style="z-index: 7;"><span class="underline"><a href="#">link1</a></span></li> </ul>`

这是 js.fiddle：http: [//jsfiddle.net/wuUpL/7/](http://jsfiddle.net/wuUpL/7/)。

我最初是从这篇文章[https://stackoverflow.com/a/1175402/1490248](https://stackoverflow.com/a/1175402/1490248)中得到这个想法的，但那个也不适用于 chrome。

注意：我不想使用边框来解决这个问题，我已经使用边框作为边框

有谁可以帮我离开这里吗？是否有某种 chrome hack/exception 我可以用来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:32:21.867

我知道你说过你不想在这里使用边框，但是你发现了一些在两个浏览器之间不一样的东西。

您可以通过添加*内部跨度*并在其上使用边框来使其在 Chrome 上运行。

[http://jsfiddle.net/wuUpL/10/](http://jsfiddle.net/wuUpL/10/)

抱歉，如果这不是您的想法，但 Gecko 和 WebKit 在这里的某些事情上没有达成一致！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-14T08:04:00.737

也许值得注意的是，即使在 Chrome 中，*通常*设置不同的父子文本颜色以获得不同颜色的下划线也是如此。但是 Chrome 中的*链接*装饰继承存在一些奇怪的错误：

```
u {
  text-decoration: underline;
  color: red;
}
u:hover {
  text-decoration: overline;
  color: green;
}
u * {
  text-decoration: none;
  color: black;
}
u:hover * {
  text-decoration: none;
  color: gold;
}
```

```
<p>
  <u>
    Parent with decoration.
    <span>Child (is a <code>span</code>). This works: <code>text-decoraion</code> has differrent (parents) colour, always.</span>
  </u>
</p>
<p>
<p>
  <u>
    Parent with decoration.
    <a href="#">Child (is a <code>link</code>). This does not work <strong>in Chrome</strong>: <code>text-decoration</code> has always childs colour.</a>
  </u>
</p>
```

奇怪的是，两个最里面的元素在 Chrome 中具有完全相同的计算样式（根据开发工具），所以现在似乎没有什么可解决的。

将来可以使用单个元素和[`text-decoration-color`](https://css-tricks.com/almanac/properties/t/text-decoration-color/)CSS 属性。

# html - Internet Explorer 中的标题元素

> ID：11289251
> 
> 赞同：0
> 
> 时间：2012-07-02T07:17:24.310
> 
> 标签：html, css, html-heading

我有一个在 Mozilla Firefox 和 Google Chrome 上运行良好的网站。但在 Internet Explorer 中，它不会显示段落的标题。我使用 H1、H2 等标题元素。但在 Internet Explorer 中它不会显示。怎么可能？

```
h2 {
margin:8px 0;
margin-top:-10px;
padding:8px 0;
font-size:26px;
font-weight:bold;
line-height:1.2em;
color:#333;
text-transform:none;} 
```

我使用`<h2>Title of Book</h2>` 和以上是我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:30:36.663

您正在指定`margin: 8px 0`--- 这`8px`将从顶部和底部以及`0`从右侧和左侧开始。

再次在下一行你申请`margin-top : -10px.`

也许这导致了问题。不确定，但你仍然可以尝试！

# ios - 为有限的设备部署 ipad 应用程序

> ID：11289252
> 
> 赞同：0
> 
> 时间：2012-07-02T07:17:34.557
> 
> 标签：ios, ipad

我为特定公司的员工开发了一个 iPad 应用程序。我应该如何部署它，以便只有公司员工才能下载此应用程序。如果我使用开发人员的个人资料，他们必须每 3 个月刷新一次个人资料。那么另一种方法是什么？

注意：我有所有设备的设备 ID。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:20:14.080

您的选择是从 Apple 获得企业开发者认证

阅读更多：[https ://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:21:21.280

您需要使用分发证书创建 AdHoc 构建，并将所有设备添加到该证书。你可以在 Xcode 管理器中找到临时构建![在此处输入图像描述](../Images/e196ae8c84ea4490638a2322c114af11.png)

在此处选择 Save for Enterprise 或 Ad-Hoc Deployment

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:23:23.703

如果您使用的是企业帐户，则可以分配特定设备，

如果您没有企业帐户，并且临时帐户没有将其删除[到期日期非常短]，您可以只使用密码吗？目标用户会知道吗？

使用设备的令牌，如果注册的令牌没有被识别，在屏幕上显示错误登录

# magento - Magento 使用 if else 循环调用 body 标签的问题

> ID：11289253
> 
> 赞同：0
> 
> 时间：2012-07-02T07:17:38.917
> 
> 标签：magento

我在我的商店中使用 ajax 登录脚本，所以我使用下面的脚本来显示`Login Dialogue box`用户没有登录

```
<?php
 if (Mage::getSingleton('customer/session')->isLoggedIn())
 { 
  echo '<body>';
  } 
 else {
echo '<body onClick="showSmartRegisterDialog(); return false;">';
}  ?> 
```

而不是默认

`<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>`

现在唯一的问题是我没有使用 php 代码`<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>`来调用类名。所以页面没有正确加载。

所以我修改了上面提到的代码，

```
<?php if (Mage::getSingleton('customer/session')->isLoggedIn())
{ 
echo '<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>'; } else {    echo '<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?> onClick="showSmartRegisterDialog(); return false;">'; }
?> 
```

现在我的前端显示一个空白屏幕。有人知道我哪里出错了吗？请给我你的想法来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:41:49.247

您在 php 中使用 php 标签，请尝试：

```
<?php if (Mage::getSingleton('customer/session')->isLoggedIn()) { ?>
<body <?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php } else { ?>
<body <?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?> onClick="showSmartRegisterDialog(); return false;">
<?php } ?> 
```

# ember.js - 观察整个 ArrayProxy

> ID：11289254
> 
> 赞同：1
> 
> 时间：2012-07-02T07:17:39.930
> 
> 标签：ember.js

示例代码：

```
var Day = Ember.Object.extend({
  date:null,
  activities:null, // is set to an Em.ArrayProxy in instantiation
  historicalSection:function(){
    return this.get('activities').filterProperty('inHistoricalSection', true);
  }.property('activities').cacheable()
}); 
```

当 'activities' 设置为 ArrayProxy 时，会计算 'historicalSection' 计算属性。然而，当 'activities' 的 ArrayProxy 被更新（即它的长度改变）时，'historicalSection' 属性不会更新。

任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:32:19.343

当您将计算属性绑定到 时`activites`，这意味着它将在您为 设置新值时更新`activities`，因此在初始化时，并且仅在调用 时更新`set('activities', newArrayProxy)`。

可以使用`activities.@each`or`activities.length`作为绑定属性来观察长度变化

# email - 我的magento网站无法使用电子邮件功能，可能是关于vps电子邮件设置？任何人都可以帮助我吗？

> ID：11289255
> 
> 赞同：0
> 
> 时间：2012-07-02T07:17:45.577
> 
> 标签：email, vps, magento-1.6

我在 magento 上经营一家新商店，联系我们显示成功向我发送了电子邮件，但我没有收到任何电子邮件。我使用的是谷歌电子邮件地址，但对于 vps 设置，我不知道如何设置它。因为我使用的是 linux vps。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:58:04.683

如果您使用的是个人 VPS 托管，则必须安装电子邮件服务器或请求支持来执行此操作。Linux 上最流行的一种是 Postfix。你可以找到很多关于如何安装 postfix 依赖于 Linux 发行版的信息。我建议你安装 postfix 并使用 mysql 来配置诸如电子邮件转发、用户列表等设置。

# asp.net - 如何使用 Visual Studio 的内置 SQL Server？

> ID：11289259
> 
> 赞同：5
> 
> 时间：2012-07-02T07:18:05.077
> 
> 标签：asp.net, sql-server, database, visual-studio-2010

出于某种原因，我无法在我的电脑上安装单独的 SQL Server 实例，但我确实安装了 Visual Studio 2010。我想使用与 VS2010 捆绑在一起的内置 SQL 服务器，但我不知道该怎么做。是否可以使用内置 SQL 服务器创建数据库和表以在我的 ASP.Net 应用程序中使用，而不是单独安装一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T09:27:00.080

Visual Studio 2010 没有内置的 SQL 服务器。但是，它附带了一个名为“SQL Server Express”的免费版 Microsoft SQL Server，它是安装 Visual Studio 时的一个选项。

因为这个版本对任何人都是免费下载的，所以它有一些限制，比如：express版本只能使用一个CPU，一个数据库的最大大小是4 GB（2008 R2是10GB），它只能使用高达 1GB 的 RAM，并且它没有“SQL Server 代理”服务。

使用 SQL Server Express 与使用完整版 SQL Server 非常相似。您只需在连接字符串中指定数据源（SQL 服务器的名称）和身份验证详细信息即可。[MSDN](http://msdn.microsoft.com/en-us/library/ms247257.aspx)上提供了有关如何使用它的更多信息。

另一个选项是“SQL Server Compact”，它主要用于 Web 数据库（用于 ASP.Net）。您可以使用 Microsoft 的“Web 平台安装程序”安装它。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/gg606540.aspx)找到有关 SQL Server Compact 的更多信息。

# php - 将会话开始代码保留为包含

> ID：11289260
> 
> 赞同：1
> 
> 时间：2012-07-02T07:18:07.960
> 
> 标签：php, include, sessionid

第一次在这里发帖所以要温柔:)

在我的网页上，我有通常的会话开始，并且有很多页面。

有什么理由不能将我的所有会话启动代码放在一个单独的 PHP 文件中，然后首先将其作为包含调用？

这是可行的吗？它被认为是安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:19:49.747

当然——请记住，您的 PHP 文件不能在 之前向客户端输出任何文本`session_start()`，因为 session_start() 通常会输出 HTTP 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:23:46.770

> 为什么我不能将所有会话启动代码放在一个单独的 PHP 文件中，然后首先将其作为包含调用？

为什么不呢，你应该这样做，这没什么不安全的。事实上，大多数php框架都只有`index.php`作为前端入口，只有一个地方可以拥有`session_start()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:04:26.653

通常页面被划分在 main.php 中，其中包括：

header.php // 包含动态设置和元标记和样式以及 footer.php

当您将 session_start 放在标题中时，这是一种常见的方法。

# scala - Playframework scala 如何创建临时变量

> ID：11289261
> 
> 赞同：3
> 
> 时间：2012-07-02T07:18:09.740
> 
> 标签：scala, playframework, playframework-2.0

嗨所以我有一个while循环：

```
@for(i <- 0 until consoles.size) {
    ... Do something
    ... Add records to a column
} 
```

但是我想添加一个变量，并根据发生的情况将它添加到不同的组。例如：

```
@var column = 0;
@for(i <- 0 until consoles.size) {
        @if(consoles[i].groupname != consoles[i - 1].groupname) {
             column = column + 1;
        }
        ... Do something
        ... Add records to a column
    } 
```

这可能吗。我发现的唯一一件事是传入一个变量并使用它，但我不希望这样做，尽管它只是一个 int 所以不要向客户端发送更多信息，如果我可以在斯卡拉模板？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T08:50:28.227

在您的情况下，有更好的解决方案。由于模板在 scala 中，您可以使用 Collections 的 API 中的一些很棒的方法，例如 groupBy ：

```
@myList.groupBy(_.groupname).map {
    case (group, items) => {
        <h2>@group</h2>
        @items.map { item =>
            ...
        }
    }
} 
```

Scala 模板不需要 Scala 技能，但您至少需要了解列表 API，它是真正的救生员！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T07:27:19.753

在播放模板中，您无法定义`var`. 此外，在 Scala 中，鼓励您使用不可变对象而不是可变对象。

你有两种选择来做你想做的事：

1.  正如@Maxime 回答的那样，使用更符合 scala 的惯用方式
2.  处理`val`s

除了@Maxime's answer之外，您还可以`val`使用在模板中创建新的`defining`

从[play 2文档](http://www.playframework.org/documentation/2.0/ScalaTemplates)：

```
@defining(user.firstName + " " + user.lastName) { fullName =>
    <div>Hello @fullName</div>
} 
```

# php - 创建树时出现致命错误

> ID：11289262
> 
> 赞同：0
> 
> 时间：2012-07-02T07:18:11.687
> 
> 标签：php, cakephp, select, drop-down-menu

我以前没有提供有关问题的良好信息。我的问题是，在 cake php .Cake php 中创建下拉树时会抛出此错误。

```
Fatal error: Allowed memory size of 524288000 bytes exhausted (tried to allocate 429982192 bytes) in /home/isteam/public_html/upms/app/controllers/tests_controller.php on line 85 
```

我试图通过 php inin 函数增加运行时间的限制，但没有成功。

```
ini_set('memory_limit','2000M'); 
```

我的代码表结构是这样的

```
|id|parent_id|cat_name| 
```

我的代码如下

```
 function admin_takecat(){
$this->layout=false;
$this->render(false);
Configure::write('debug',2);
 App::import('Model','Category');
$this->cats=new Category();
$firstlevel=$this->cats->find('list',array('fields'=>array('Category.id','Category.cat_name'),'conditions'=>array('Category.parent_id'=>0,'department_id'=>9)));

$dropbox='<select>';
foreach($firstlevel as $id=>$val){
    $dropbox.='<option value='.$id.'>'.$val.'</option>';
    $count=$this->cats->find('count',array('conditions'=>array('Category.parent_id'=>0,'Category.department_id'=>9,'Category.parent_id'=>$id)));
    if($count>0){
    $dropbox=$this->_recursive($id,$dropbox,1);

    }

}
$dropbox.='</select>';
echo $dropbox;

}
    function _recursive($catid,$dropbox,$level){

  App::import('Model','Category');
$this->cats=new Category();
$listcats=$this->cats->find('list',array('fields'=>array('Category.id','Category.cat_name'),'conditions'=>array('Category.parent_id'=>0,'Category.department_id'=>9,'Category.parent_id'=>$catid)));
$mark='';
for($i=1;$i<=1;$i++){
    $mark.='-';

}

foreach($listcats as $id=>$val){
   $dropbox.='<option value='.$id.'>'.$mark.$val.'</option>';
    $count=$this->cats->find('count',array('conditions'=>array('Category.parent_id'=>0,'Category.department_id'=>9,'Category.parent_id'=>$id)));
    if($count>0){
    $dropbox.=$this->_recursive($id,$dropbox,$level+1);

    }

}

return $dropbox;

} 
```

请建议我该怎么做..或任何其他方式来做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:09:12.820

错误消息非常清楚：您正在获取大量数据，因此应用程序内存不足。并且简单地增加可用内存量*并不是*一个解决办法，它是一个非常草率的解决方法，它会破坏下一个服务器上的应用程序，并且配置更严格的内存设置。

正如罗斯已经建议检查[TreeBehavior](http://book.cakephp.org/1.3/view/1339/Tree)或通过限制查找中关联模型记录和字段[的递归级别](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来修复您的代码以返回不多的数据。

此外，您应该真正遵循[CakePHP 编码标准](http://book.cakephp.org/2.0/en/contributing/cakephp-coding-conventions.html)，因为您的代码非常糟糕且难以阅读。我不会接受此代码，不是作为开发人员，也不是作为客户。

您应该[通过模型关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)访问数据，而不是使用 loadModel() 将每个模型加载到控制器中。

对于 dropbox，有 HtmlHelper，具体来说是 HtmlHelper::input() 和 HtmlHelper::select()。

# javafx-2 - javafx 2拖放对象

> ID：11289266
> 
> 赞同：0
> 
> 时间：2012-07-02T07:18:42.920
> 
> 标签：javafx-2

我最近发现了 JavaFX，所以我决定试一试。我正在为 Windows 使用 JavaFX 2.2 beta。

我想要完成的是一个带有 Java 对象的拖放界面，一个带有子节点的整个场景。更具体地说，用户应该能够打开例如登录窗口并将其拖放到主应用程序上。我发现的示例只是使用字符串和图像进行拖放。

我找到了一个很好的教程，但是带有字符串。我无法弄清楚如何在整个场景中做到这一点。[http://docs.oracle.com/javafx/2/drag_drop/jfxpub-drag_drop.htm](http://docs.oracle.com/javafx/2/drag_drop/jfxpub-drag_drop.htm)

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:06:15.610

这是一种方法，尽管我对此并不完全满意。

当源在 setOnDragDropped() 中接收到特定字符串时，源会创建一个新对象并删除/关闭旧对象。字符串是特定的，对于用户来说，它是同一个场景还是一个新场景都没有关系。

# xml - 如何使用 w3c sitemap.xsd 验证 w3c 站点地图和谷歌站点地图？

> ID：11289267
> 
> 赞同：0
> 
> 时间：2012-07-02T07:18:47.467
> 
> 标签：xml, xsd, sitemap, w3c

w3c sitemap.xsd：[http](http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd)
://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd 它看起来像这样：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" targetNamespace="http://www.sitemaps.org/schemas/sitemap/0.9" elementFormDefault="qualified"> 
```

我有两个站点地图文件。
1\. w3c 站点地图文件，像这样：

```
<?xml version="1.0" encoding="UTF-8"?>                                                                                                                                                                                                       
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url><loc>http://t.qq.com/p/t/42509089158929/</loc></url>
</urlset> 
```

2.google-sitemap文件，如下：</p>

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.google.com/schemas/sitemap/0.9"> 
<url>
<loc>http://blog.ifeng.com/article/11487489.html</loc>
<lastmod>2011-05-23T09:33:01+08:00</lastmod>
<changefreq>daily</changefreq>
<priority>1.0</priority>
</url>
</urlset> 
```

我使用 w3c sitemap.xsd 通过 xmllint 验证这两个文件。
1\. w3c 站点地图文件，正常成功
2\. google-sitemap 文件，输出如下

```
$ xmllint --schema sitemap.xsd sitemap_google.xml  --noout 
sitemap_google.xml:2: element urlset: Schemas validity error : Element '{http://www.google.com/schemas/sitemap/0.9}urlset': No matching global declaration available for the validation root.
sitemap_google.xml fails to validate 
```

我认为，问题在于 google-sitemap.xml 和 sitemap.xsd 中的命名空间不同。我应该如何使用 sitemap.xsd 来验证这两个站点地图文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:56:18.397

如果在 google 站点地图实例文档中没有对 sitemaps.org 站点地图架构的引用，那么我看不到您应该如何验证它，甚至看不到您想要验证它的原因。

通过在文件顶部包含命名空间，google 站点地图实例清楚地表明它是 google.com 站点地图架构的实例，而不是 sitemaps.org 站点地图架构的实例。

# grails - grails中像图像这样的二进制文件的最佳数据类型是什么？

> ID：11289268
> 
> 赞同：2
> 
> 时间：2012-07-02T07:18:59.573
> 
> 标签：grails, groovy, binaryfiles

我想知道使用我正在从事的当前 grails 项目为我的二进制文件（可能是图像）选择最佳数据类型的最佳实践。我已经考虑过`byte[]`. 非常感谢您的建议。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:05:46.287

我同意@tim_yates，byte[] 是你的选择，如果你将它持久化到数据库中，你应该添加一个映射：

```
class SomePersistent {
   byte[] image

   static mappings = {
      image type: "blob"
   }
} 
```

（未编译，可能语法略有不同，请查看 Grails 手册）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T08:28:54.653

我相信你是对的，而且`byte[]`是要走的路

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:15:50.563

我正在使用 byte[]，但要确保在数据库中 hibernate/GORM 正在创建正确的数据类型。我正在使用 mySQL，它创建了 tinyblob，而我的图像太大了。我不得不返回数据库并将其更改为大 blob 以使其正常工作。

# c# - c#中php的等效代码是什么

> ID：11289270
> 
> 赞同：1
> 
> 时间：2012-07-02T07:19:14.890
> 
> 标签：c#, php, asp.net, xmlhttprequest, cross-domain

我正在.net 中进行跨域发布，但在 net 中，他们为我提供了 php 示例....我想将 php 代码转换为 .net。请帮忙。

```
 <?php
        header('Content-type: text/html');
        header('Access-Control-Allow-Origin: *');
        $uri = 'http'. ($_SERVER['HTTPS'] ? 's' : null) .'://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
        echo('<p>This information has come from <a href="' . $uri . '">' . $uri . '</a></p>');
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:26:18.350

尝试这样的事情： -

```
System.Net.WebRequest request = base.GetWebRequest(uri);         
request.Headers.Add("Content-type", "text/html");
request.Headers.Add("Access-Control-Allow-Origin", "*"); 
```

`$_SERVER`相当于`Request.ServerVariables[]`

# c# - 从 Collection of Collection 制作一个 Collection

> ID：11289271
> 
> 赞同：0
> 
> 时间：2012-07-02T07:19:17.647
> 
> 标签：c#, linq, loops

我有一个`List<List>`. 我想从中获得一个列表。

```
List<int> from List<List<SomeClass>() 
```

For 循环是一个明显的解决方案，但从性能的角度来看，我想要更好和更优雅的东西。

```
List<List<Employee>> ValueLists;

List<int> Current= ValueLists.SelectMany(u=>u.Select(v=>v.EmployeeID)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:20:17.863

尝试这个：

```
var list = listOfLists.SelectMany(x => x).ToList(); 
```

* * *

我不确定您到底需要什么额外信息。您对问题所做的编辑几乎是完整的代码。

你应该写：

```
List<int> Current =
    ValueLists
        .SelectMany(u => u.Select(v => v.EmployeeID))
        .ToList(); 
```

这可以写成这样：

```
var query =
    from u in ValueLists
    from v in u
    select v.EmployeeID;

List<int> Current = query.ToList(); 
```

也许这会更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:32:36.693

> 仍然没有得到答案，请参阅编辑后的问题以获取更多详细信息和实际情况：

```
List<List<Employee>> ValueLists;
List<int> Current= ValueLists.SelectMany(u=>u.Select(v=>v.EmployeeID)); 
```

您的方法不起作用，因为 an`IEnumerable<int>`不是`List<int>`. 因此你需要`ToList()` 在最后。

这应该有效：

```
List<int> Current = ValueLists.SelectMany(u => u.Select(e => e.EmployeeID)).ToList(); 
```

*   [重新实现 LINQ to Objects：第 9 部分 - SelectMany](http://msmvps.com/blogs/jon_skeet/archive/2010/12/27/reimplementing-linq-to-objects-part-9-selectmany.aspx)
*   [Enumerable.SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:11:15.003

关于什么：

```
var list = listOfLists.SelectMany(x => x.EmployeeID).ToList(); 
```

# asp.net-mvc-3 - 实体框架中的一个事务中的许多更新语句

> ID：11289273
> 
> 赞同：1
> 
> 时间：2012-07-02T07:19:18.863
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4.1

我需要更新多个更新语句，但都应该在自动性上工作，即更新全部或不更新。

在互联网和其他一些 SO Questions 中，我找到了如何使用 Transaction，但我没有发现其中任何一个说要在一个事务中更新多个语句。见下面三个更新语句，目前没有在事务下运行

```
/// this are my update calls.
var report = reportRepository.Update(reportModel);
var book = bookRepository.Update(bookModel);
var mobile = mobileRepository.Update(mobileModel);

// each Update method for all repository will looks like
public returnModel Update(someModel model)
{
    // assign values from model to entity
    Context.ObjectStateManager.ChangeObjectState(entity,System.Data.EntityState.Modified)
    Context.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:27:00.217

您可以将更新包装在[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)中：

```
using (TransactionScope transaction = new TransactionScope())
{
    var report = reportRepository.Update(reportModel);
    var book = bookRepository.Update(bookModel);
    var mobile = mobileRepository.Update(mobileModel);
    ...
    transaction.Complete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:32:08.423

正如 Darin 提到的，使用事务范围或我的首选方法是让您的存储库属于 IUnitOfWork 接口。调用 update 只是将状态设置为已修改，并且 SaveChanges 发生在您的存储库之外以一次保存所有更改。这应该在一个事务中自动发生。

因此，您调用所有更新，然后调用 unitOfWork.SaveChanges，其中您的自定义工作单元类包含对您的上下文的引用并实现在 IUnitOfWork 中定义的称为 Save() 的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:29:56.150

基本上你需要通过 TransactionScope 类来管理它，使用它你可以设置对模型的多个更新，然后使用 Transaction.Complete 将你的东西保存在一个事务中。

请查看[在实体框架中的单个事务中更新多个对象以](https://stackoverflow.com/questions/6395204/updating-multiple-objects-in-single-transaction-in-entity-framework)获取更多详细信息。

# blackberry - 无法通过 BlackBerry Desktop Software 安装 Blackberry 应用程序

> ID：11289274
> 
> 赞同：-1
> 
> 时间：2012-07-02T07:19:22.440
> 
> 标签：blackberry

我想将开发的应用程序安装到 blackberry 8520 v5.0 但它提示我错误`No additional apps can be found ...`。我不确定是什么问题？设备或 .alx 文件问题？我正在使用 SDK 7.0.0 进行开发，但我已经安装了 SDK 5.0。虽然我改到5.0也不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:37:52.090

您能否在以下更改 .alx 文件。

```
<fileset Java="1.49" _blackberryVersion="[5.0.0)">
<directory >
5.0.0
</directory>
<files > 
```

# java - 使用 Eclipse 从 JAXB 生成示例 XML

> ID：11289278
> 
> 赞同：3
> 
> 时间：2012-07-02T07:19:40.447
> 
> 标签：java, xml, jaxb

假设我在 Eclipse 中创建了 JAXB 类。（使用@XmlRootElement、@XmlAttribute 等）

是否有一个插件可以从我的 JAXB 注释类生成示例 XML 预览？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:14:33.797

有 XML 编辑器，可以从 XSD 创建示例 XML，例如我们使用 Altova XMLSpy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:07:50.220

有一个名为“org.jvnet.jaxbw.eclipse_1.0.0”的插件，您需要将其保存在 eclipse lib 文件夹中。

以下是指南链接。

[http://www.xyzws.com/scdjws/studyguide/jaxb_samples2.0.html](http://www.xyzws.com/scdjws/studyguide/jaxb_samples2.0.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:34:51.993

您可以使用**JAXB 编组**器来执行此操作。只需 3 三行代码。

> ```
>  File file = new File("D:\\generatedFile.xml");
>         JAXBContext jaxbContext = JAXBContext.newInstance(Myclass.class);
>         Marshaller jaxbMarshaller = jaxbContext.createMarshaller();  
>         jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);  
>         jaxbMarshaller.marshal(obj, file); 
> ```

generatedFile.xml 将包含您的带注释的 java bean(Myclass) 的 XML 等价物

# eclipse-plugin - 如何使用draw2d设置图像的背景颜色？

> ID：11289299
> 
> 赞同：1
> 
> 时间：2012-07-02T07:22:00.817
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-gef, draw2d

我使用`RectangleFigure`in **draw2d**绘制了一个矩形。我可以通过调用为矩形图形着色`rectangleFigure.setBackgroundColor`。现在我也想以同样的方式为*图像*着色。为此，我`ImageFigure`在 **draw2d**中使用，并通过调用`ImageFigure.setBackgroundColor()`. 但它没有给我任何颜色。那么如何为draw2d中的图像赋予背景颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:55:00.680

RectangleFigure 扩展了 Shape 默认绘制自己的背景。ImageFigure 直接扩展了 Figure ，如果你将它设置为 Opaque，它只会绘制背景：

```
imageFigure.setOpaque(true); 
```

# jquery - 从mysql输出正确的复杂json格式

> ID：11289308
> 
> 赞同：0
> 
> 时间：2012-07-02T07:22:43.077
> 
> 标签：jquery, json

当我尝试从 mysql 输出记录以将复杂的 json 发送回 jquery 时遇到问题...

我的桌子

```
bil    iduser     name      experience
0       001       jacobs    bus driver 
1       002       max       painter
2       001       jacobs    racing driver
3       003       john      engineer
4       001       jacobs    retiree
5       002       max       designer
6       003       john      senior engineer 
```

期望的 json 结果应该是

```
[
    {
        "iduser":001,
        "name":"jacobs", 
        "exprience":[{"exp":"bus driver"},{"exp":"racing driver"},{"exp":"retiree"}]
    },
    {
        "iduser":002,
        "name":"max", 
        "exprience":[{"exp":"painter"},{"exp":"designer"}]
    }
] 
```

有点......我对简单的json格式没问题，但是这种复杂的格式我完全失败了......卡在这里......

希望有人能告诉我如何使用 php 格式化它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:32:35.523

[首先，使用PDO::FETCH_ASSOC](http://www.php.net/manual/en/pdostatement.fetch.php)在数组中获取 mysql 结果的输出

[然后使用json_encode](http://php.net/manual/en/function.json-encode.php)将数组转换为 JSON 格式

# eclipse - eclipse Juno 自定义工作台颜色

> ID：11289312
> 
> 赞同：7
> 
> 时间：2012-07-02T07:23:13.637
> 
> 标签：eclipse, eclipse-juno

谁知道如何在eclipse Juno（4.2）中更改工作台视图（例如Package Explorer）的颜色？如何使用这个漂亮的新 CSS 样式功能？

对于编辑器，它可以在 Preferences - General - Appearance 下使用，但我想要/需要将整个工作台主题更改为较深的颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T08:03:11.830

按照“ [Eclipse 4 CSS Styling-Tutorial](http://www.vogella.com/articles/Eclipse4CSS/article.html) ”，您可以使用[CSS spy](http://www.vogella.com/articles/Eclipse4CSS/article.html#css_spy)来确定应用到包资源管理器的 CSS 样式，以便为它开发[自己的主题](http://www.vogella.com/articles/Eclipse4CSS/article.html#css_thememanager)。

![CSS间谍](../Images/150cde10329465703774af2d88f72f94.png)

# java - Java：如何向通过 java.awt.frame 实现的 GUI 窗口添加滚动条？

> ID：11289318
> 
> 赞同：0
> 
> 时间：2012-07-02T07:23:53.963
> 
> 标签：java, swing, awt, scrollbars, imagej

我一直在做ImageJ，**需要在一个插件中添加滚动条：[Weka_segmentation](http://fiji.sc/cgi-bin/gitweb.cgi?p=fiji.git;a=blob;f=src-plugins/Trainable_Segmentation/trainableSegmentation/Weka_Segmentation.java;h=9196d643cea8ff275107ec26909514958e768453;hb=HEAD)** 它实现了java.awt.Frame到ij.gui.ImageWindow，由stackwindow类实现，而后者又由customwindow类实现。我必须在这个类中添加滚动条。有没有东、短的路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:28:57.673

尝试这个....

```
JScrollPane scroll = new JScrollPane(Component); 
```

**这里的组件将表示需要滚动的组件...**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:10:07.747

我是那个插件的主要开发者。你想要滚动条在哪里？

如果您写信给主要的斐济开发者列表，您可能会得到详细的答案：[https ://groups.google.com/group/fiji-devel](https://groups.google.com/group/fiji-devel)

伊尼亚西奥

# jmeter - JMeter：如何根据情况使referer字段动态化

> ID：11289320
> 
> 赞同：0
> 
> 时间：2012-07-02T07:23:57.923
> 
> 标签：jmeter

除了主页假设有2个页面，即页面A，页面B，第一步用户必须登录，然后如果该用户具有查看页面A，页面B的权限，那么他可以点击这些页面转到其他页面顶部导航栏用户的页面名称将保留在主页中。

1 次登录

2 主页 [如果登录成功]

|

检查是否有权限查看 --------- 注销

|是的

2 页 A

|

检查是否有权限查看Page B --------- 注销

|是的

3 页 B

|

4 登出

假设有 3 个用户，即用户 1、用户 2 和用户 3。现在用户 1 有权查看页面 A、页面 B，但用户 2 有权限仅查看页面 A，用户 3 没有权限查看这两个页面中的任何一个。

我已经在页面 A 采样器、页面 B 采样器下使用断言来检查天气正确的线程是否正在访问此页面，即系统是否只允许授权人员。

在线程组中我选择了如果发生错误然后“停止线程”，这就是为什么如果任何线程未能断言那么它在未来不会被计算在内，这就是为什么在注销采样器中只显示 1 个线程，并且该线程是对于用户 1，因为该用户有权查看页面 A ，B 。用户 2 和 3 不被考虑，因为他们在前面的阶段中断言失败。那么有什么办法可以在注销页面中发送所有已成功清除登录部分的线程，而不管那里的查看页面权限如何。

因此，在用户 1 在引荐人字段的注销页面中注销时，它将显示页面 b 的链接，但对于用户 2 在注销页面引荐人字段的值将显示页面 A 的链接。对于用户 3，它将显示成为主页。

那么任何人都可以告诉我如何根据注销页面中的用户权限动态更改引荐来源字段值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:04:44.083

这是一种可能的情况，因为我不知道您如何检查已登录用户的权限。

```
HTTP Request - Login
    Regular Expression Tester - capture an expected value to validate login
If Controller - If Login OK
    HTTP Request - Home
        Regular Expression Tester - Referrer to Home (Headers option maybe)
    HTTP Request - Page A Permission Verifier
        Regular Expression Tester - extract permission validation value
    If Controller - If user has permission to Page A
        HTTP Request - Page A
            Regular Expression Tester - Referrer to Page A (Headers option maybe)
    HTTP Request - Page B Permission Verifier
        Regular Expression Tester - extract permission validation value
    If Controller - If user has permission to Page B
        HTTP Request - Page B
            Regular Expression Tester - Referrer to Page B (Headers option maybe)
    Http Request - Logout
        HTTP Header Manager - Referrer: ${referrer} 
```

# javascript - 在标签（html）中使用变量

> ID：11289322
> 
> 赞同：-2
> 
> 时间：2012-07-02T07:24:26.753
> 
> 标签：javascript, html, variables, aem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:33:38.330

像这里的其他人一样，我不确定您到底想要什么，但似乎您想使用 Javascript 显示数组中的图像。为此，您可以使用`document.write()`所需的 HTML 内容并将其与 Javascript 变量结合起来。

例如：

```
<script type="text/javascript">

    var ImageArray = ['Image01.png','Image02.png','Image03.png'];
    document.write('<img src="' + ImageArray[0] + '" alt="" />');

</script> 
```

# mysql - mysql NOW() 返回错误值，而全球时区设置为 +00:00

> ID：11289323
> 
> 赞同：5
> 
> 时间：2012-07-02T07:25:02.503
> 
> 标签：mysql, timezone-offset

自从 2 周以来，我对时区问题感到困惑，在我的本地主机上一切正常，但在专用服务器上返回错误值。让我告诉我到目前为止我做了什么。

首先通过以下查询设置全球时区：（本地主机和服务器上的超级权限）

```
 SET GLOBAL time_zone = '+00:00'; 
```

现在在查询下方运行以交叉检查所做的任何事情

```
SELECT NOW(),@@global.time_zone AS gtz,@@session.time_zone AS stz,
       TIMEDIFF(NOW(), CONVERT_TZ( NOW() , @@session.time_zone ,  '+00:00' ) )
       AS OFFSET; 
```

但它在本地和专用服务器上显示不同的结果

### 在 localhost (192.168.xx) mysql 版本：5.5.8

```
+---------------------+--------+--------+----------+
| NOW()               | gtz    | stz    | OFFSET   |
+---------------------+--------+--------+----------+
| 2012-07-02 07:06:55 | +00:00 | +00:00 | 00:00:00 |
+---------------------+--------+--------+----------+
1 row in set (0.00 sec) 
```

### 在专用服务器（182.168.xx）上 mysql 版本：5.1.53-log

```
+---------------------+--------+--------+----------+
| NOW()               | gtz    | stz    | OFFSET   |
+---------------------+--------+--------+----------+
| 2012-07-02 12:37:59 | +00:00 | +00:00 | 00:00:00 |
+---------------------+--------+--------+----------+ 
```

我的问题是

> 为什么**NOW()**给出错误的时间（上面是 IST ）而时区设置为 +00:00 ？

**边注 ：**

我在查询下运行

```
SHOW VARIABLES LIKE '%time%zone%'; 
```

### 在本地主机上

```
+------------------+---------------------+
| Variable_name    | Value               |
+------------------+---------------------+
| system_time_zone | India Standard Time |
| time_zone        | +00:00              |
+------------------+---------------------+ 
```

### 在服务器上

```
+------------------+---------------------+
| Variable_name    | Value               |
+------------------+---------------------+
| system_time_zone | GMT+5               |
| time_zone        | +00:00              |
+------------------+---------------------+ 
```

> 这会影响结果吗？或者
> 
> 早期版本的mysql有什么错误吗？

请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:20:37.130

在调用`NOW()`（和相关函数）时，MySQL 将计算机的系统时钟转换为会话时区：

*   如果系统时钟设置为`12:30+05:30`并且会话时区为`+00:00`，则结果为`07:00`。

*   如果系统时钟设置为`17:30+05:00`并且会话时区为`+00:00`，则结果为`12:30`。

[`--timezone`](http://dev.mysql.com/doc/en/mysqld-safe.html#option_mysqld_safe_timezone)但是，可以通过使用命令行参数来“欺骗”MySQL，使其认为系统时钟与操作系统认为的时区不同[*`mysqld_safe`*](http://dev.mysql.com/doc/en/mysqld-safe.html)：

*   如果系统时钟设置为`17:30+10:30`且会话时区为`+00:00`，但 MySQL 以指定系统时钟应理解为的方式启动`GMT+5`，则结果将与上面的第二个项目符号相同。

因此，您应该检查：

1.  系统时钟的时区与`system_time_zone`系统变量中给定的值一致（如果没有，请确保您没有指定`--timezone`参数，*`mysqld_safe`*并且在调用时没有`TZ`设置环境变量*`mysqld_safe`*）；

2.  系统时钟在其指定的时区报告正确的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-01T04:10:33.463

您只需要在更改系统时区后重新启动 mysqld..

MySQL 的全局时区采用 System 的时区。当您更改系统的任何此类属性时，您只需要重新启动 Mysqld。

而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T06:57:23.143

1) 如有必要，更改您的系统时间和时区。2）打开mysql控制台并输入你的时区，像这样：SET GLOBAL time_zone = "+04:00"; 3）重启mysql。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-21T07:32:38.167

我已经测试过 - SET time_zone='+05:30'; 它正在工作，但我没有全局权限，所以你尝试通过设置服务器时间 +05:30 -> SET GLOBAL time_zone = '+05:30';

# java - m2e如何判断项目是否具有java性质？

> ID：11289328
> 
> 赞同：4
> 
> 时间：2012-07-02T07:25:40.667
> 
> 标签：java, eclipse, maven, m2e

我正在使用一个特殊的 Maven 插件，它提供了一个自定义的包装类型并定义了一个特殊的生命周期映射。但它仍然是一个类似 Java 的项目，所以我希望 Eclipse（带有 m2e 插件）将该项目作为 Java 项目导入（在 .project 文件中具有 java 特性）。但它总是将它作为一个没有java性质的简单项目导入。我总是必须手动将 java 性质添加到 .project 文件中。

我还尝试保留包装类型“jar”并更改插件以提供“jar”的自定义生命周期映射。但是 m2e 仍然不承认它是一个 java 项目。

那么m2e如何决定是否必须在项目中启用Java特性呢？或者是否有一些特殊的 m2e 配置我可以放入 Maven pom.xml 来告诉 m2e 我的项目是一个 java 项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:07:01.970

找到了！无需将包装类型更改为“JAR”。我只需要在生命周期映射中包含 maven-compiler-plugin：

```
<!DOCTYPE component-set>
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>custom</role-hint>
      <implementation>org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping</implementation>
      <configuration>
        <phases>
          <compile>
            org.apache.maven.plugins:maven-compiler-plugin:compile,
            my.custom.plugin:compile
          </compile>
        </phases>
      </configuration>
    </component>
  </components>
</component-set> 
```

现在m2e在导入的时候给项目添加了java性质，仍然执行自定义的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:44:41.507

尝试将 maven eclipse 插件添加到您的 POM 文件中。

> ```
> > <plugin>
> >         <groupId>org.apache.maven.plugins</groupId>
> >         <artifactId>maven-eclipse-plugin</artifactId>
> >         <version>2.9</version>
> > </plugin> 
> ```

# android - 更改代码中进度条的位置

> ID：11289329
> 
> 赞同：0
> 
> 时间：2012-07-02T07:25:59.860
> 
> 标签：android, android-progressbar

我有一个进度条，我在代码中创建了我的活动。这是代码：

```
progressDialog = new ProgressDialog(this); 
// Progress bar message.
String progressBarMessage = "Loading, please wait...";
progressDialog.getWindow().setGravity(Gravity.BOTTOM);

progressDialog.setCancelable(false);
progressDialog.setMessage(progressBarMessage);
// set the progress to be horizontal
progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
// reset the bar to the default value of 0
progressDialog.setProgress(0);
// convert the text value to a integer
int maximum = 100;
// set the maximum value
progressDialog.setMax(maximum);
// display the progressbar
progressDialog.show(); 
```

如您所见，我的进度条位于底部。如何将此进度条的位置更改为页面的 3/4？我想移动那个位置会在中心和底部之间吗？也许我可以设置MarginTop，但是如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:12:35.320

尝试这样的事情：

```
// ...
progressDialog.getWindow().setGravity(Gravity.CENTER);
WindowManager.LayoutParams wmlp = progressDialog.getWindow().getAttributes();
wmlp.y = height / 4;
progressDialog.getWindow().setAttributes(wmlp);
progressDialog.setCancelable(false);
// ... 
```

您在这样的方法中初始化`height`的`int`值（屏幕的高度）在哪里：`onCreate`

```
height = getResources().getDisplayMetrics().heightPixels; 
```

# jquery - mobile.changePage() 在 ajax 中不起作用

> ID：11289335
> 
> 赞同：1
> 
> 时间：2012-07-02T07:26:25.840
> 
> 标签：jquery, jquery-mobile

这是我在 jsfiddle [http://jsfiddle.net/kavin/5xVZQ/中的代码](http://jsfiddle.net/kavin/5xVZQ/)

我想得到的是当我单击图像时，它应该显示选项页面并隐藏图像页面，图像被隐藏但选项页面中的内容不显示，请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:33:55.033

代替

```
$(document).ready(function () {
    $('#option').click(function () {
        $.mobile.changePage($('#options'), 'pop');
        $('#option').hide();

    });
});​ 
```

尝试

```
$(document).ready(function () {
    $('#option').click(function () {
        $.mobile.changePage('#options', {transition:'pop'});
        $('#option').hide();

    });
});​ 
```

另外，如果单击功能无法正常工作，请尝试使用绑定单击。它发生在我身上一次，当我使用 bind 时它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:27:54.033

更简单快捷的修复，无需 javascript 代码。

```
<a href='#options'> 
   <img id="option"  src="icons/options.png" width="80px" height="80px"/>  
</a> 
```

# iphone - 使用 CALayer 时的 UIViewAnimationOptionBeginFromCurrentState 等效项

> ID：11289338
> 
> 赞同：1
> 
> 时间：2012-07-02T07:26:44.227
> 
> 标签：iphone, ios, core-animation

将 CABasicAnimation 直接添加到图层时，UIViewAnimationOptionBeginFromCurrentState 标志的等价物是什么？当我为同一个键添加另一个动画并使其从当前状态开始动画时，我想覆盖我当前的动画。

例如，我正在使用以下代码向我的图层添加动画。

```
CABasicAnimation *moveAnimation = [CABasicAnimation animationWithKeyPath:@"position.y"];
    moveAnimation.fromValue = [NSNumber numberWithInt:layer.position.y];
    moveAnimation.toValue = [NSNumber numberWithInt:0];
    moveAnimation.duration = BUBBLE_DEFAULT_ANIMATION_DURATION;
[layer addAnimation:moveAnimation forKey:key]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:23:46.160

设置`fromValue`为`nil`从当前表示层值开始。

从CABasicAnimation的[文档中：](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004496-CH1-DontLinkElementID_1)

> *   toValue 非零。在目标层的表示层中 keyPath 的当前值和 toValue 之间进行插值。

# git - svn 或 git 或别的什么？

> ID：11289339
> 
> 赞同：2
> 
> 时间：2012-07-02T07:26:54.790
> 
> 标签：git, svn, merge, branch

我们的团队正在开发一款游戏。

我想尝试基于我们的代码的单独原型，但会略有不同。
我们使用 svn 作为代码仓库。

现在对于我自己的原型，我应该如何设置一个 repo，以便我可以保持来自 svn 的更新，但不会让我意外地提交我的更改？

我认为分支（或分叉？）是这里的相关概念，但我自己并没有真正设置它。

如果有人可以设计概念策略会很有帮助。
以下是我的想法，尽管我自己还没有完成分支/合并_back。
我在处理这个问题上是否走在正确的轨道上？

> 1.  分叉项目
> 2.  将我的更改应用于分叉项目并不断从主干获取更新
> 3.  如果需要，将我的更改合并回主（我的团队的 svn 存储库）。

*   任何实用技巧（例如在 svn/git 之间的选择）将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:05:55.287

我认为您只需使用 SVN 就可以做到这一点：“fork the project”==“create a branch”。这是一个常见的过程：创建一个分支，进行更改，可能会定期将主干合并到其中（所谓的同步合并），如果原型成功则将其合并回主干或忘记分支。也许在处理代码库的副本时，您将修复原始代码中的一些错误，因此您可以将修复挑选回原始主干版本（这就是不将项目分叉到单独存储库的原因）。

如果您更喜欢 Git，请查看以下工具：

*   [子Git](http://subgit.com)。您将它安装到您的 SVN 存储库中，它会为 SVN 存储库创建一个 Git 界面（纯 Git 界面，而不是 git-svn），并具有即时合并、忽略和标签翻译。因此，您可以尝试这两个接口并最终关闭接口（如果您的团队决定完全切换到它，则只留下 Git，如果 Git 不适合您，则可能只使用 SVN）。
*   您也可以使用 git-svn，但提供了相当有限的功能：您只能推送线性历史，它不会即时翻译忽略或标签；不支持樱桃采摘
*   您可以将[SmartGit](http://www.syntevo.com/smartgit/index.html)视为 git-svn 的替代品：支持忽略、标签、cherry-pick 甚至 svn:externals

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:19:59.803

我相信答案取决于您的项目计划有多大，以及您计划在开发中走多远。

更大的项目将是，并且就您而言，您会注意到对您个人而言方便的工具比任何人的任何建议都更有价值。

在任何情况下，我都会选择分布式版本控制而不是集中式。git 是市场上最先进的 DVCS 之一。你不会错的。

在我们的项目中，我们在开发人员的工作站上使用 git，集中版本控制在服务器上作为主存储（即 PVCS Serena）。我们没有插件来自动同步 Serena 和 git 并手动执行此操作，并考虑到使用 git 的好处的这种小过度杀伤力。

但在你的情况下*git-svn*和*SubGit*会有所帮助。

但是，如果您需要的不仅仅是版本控制（并且由于任何原因无法使用 github）——问题跟踪、文档 wiki，请考虑使用[化石](http://www.fossil-scm.org/)。它建立在与 git 相同的原则上，但具有问题跟踪、文档 wiki、Web 界面和不需要安装的非常小的可执行文件。

但是，如果变化微不足道，或者您不打算走得太远，为什么不坚持其他人使用的标准选择呢？

# c - C：写一个函数不知道有多少参数

> ID：11289342
> 
> 赞同：4
> 
> 时间：2012-07-02T07:27:03.977
> 
> 标签：c, parameters, variadic-functions

在学习 CI 时，看到它`printf`可以在传递时接收许多参数。

而且我不知道C如何实现这样的功能，用户可以输入任意数量的参数。我也考虑过指针，但仍然没有好主意。如果有人对此类功能有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:29:12.790

您必须`...`在函数声明中使用符号作为最后一个参数。

请参阅本教程以了解更多信息：[http ://www.cprogramming.com/tutorial/c/lesson17.html](http://www.cprogramming.com/tutorial/c/lesson17.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T07:29:20.080

您需要使用 va_args、va_list 等。看看这个教程。 [http://www.cprogramming.com/tutorial/c/lesson17.html](http://www.cprogramming.com/tutorial/c/lesson17.html)

那应该会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T07:31:16.503

您使用 C`varargs`编写*可变参数函数*。您需要包含`stdargs.h`，它为您提供了用于迭代未知大小的参数列表的宏：`va_start`、`va_arg`和`va_end`，使用数据类型：`va_list`。

这是一个几乎没用的函数，它打印出它的可变长度参数列表：

```
void printArgs(const char *arg1, ...)
{
    va_list args;
    char *str;

    if (arg1) We

        va_start(args, arg1);

        printf("%s ", arg1);

        while ((str = va_arg(argp, char *)) != NULL)
            printf("%s ", str);

        va_end(args);
    }
}

...

printArgs("print", "any", "number", "of", "arguments"); 
```

[这是](http://c-faq.com/varargs/varargs1.html)一个更有趣的示例，它演示了您可以多次迭代参数列表。

请注意，使用此功能存在类型安全问题；[wiki 文章](http://en.wikipedia.org/w/index.php?title=Stdarg.h#Type_safety)解决了其中的一些问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T07:35:24.117

```
#include <stdarg.h>
#include <stdio.h>

int add_all(int num,...)
{
    va_list args;
    int sum = 0;
    va_start(args,num);
    int x = 0;
    for(x = 0; x < num;x++)
        sum += va_arg(args,int);
    va_end(args);
    return sum;
}

int main()
{
    printf("Added 2 + 5 + 3: %d\n",add_all(3,2,5,3));
} 
```

# c# - 未找到 DevExpress.XtraEditors.Repository.RepositoryItemSearchLookUpEdit

> ID：11289346
> 
> 赞同：0
> 
> 时间：2012-07-02T07:27:19.750
> 
> 标签：c#, .net, devexpress

是否可以使用 DevExpress.XtraEditors.Repository.RepositoryItemSearchLookUpEdit实现[http://www.devexpress.com/Support/Center/p/Q337799.aspx中讨论的相同内容？](http://www.devexpress.com/Support/Center/p/Q337799.aspx)

我发现在 SearchLookUpEdit 中存在的 RepositoryItemSearchLookUpEdit 的大多数属性和事件都丢失了

我想使用 _TextChanged 事件来动态绑定 RepositoryItemSearchLookUpEdit 数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:53:58.483

你能提供一个属性的例子吗？并检查是否对属性有不同的访问权限，例如 lookupEdit 和 RepositoryItemLookupEdit 中的属性 DataSource ：

查找编辑：

```
myLookup.Properties.DataSource 
```

RepositoryItemLookupEdit ：

```
myRiLookupEdit.DataSource 
```

# android - 错误：没有这样的表

> ID：11289350
> 
> 赞同：0
> 
> 时间：2012-07-02T07:27:31.493
> 
> 标签：android, sqlite

为什么会发生此错误。我已经有一个数据库。然后我添加表并在其中插入一个项目。我控制这个步骤，当我插入项目时没有错误。但是当我想阅读我将项目放在我的新表中时，会发生这个错误。它说我没有找到。我在模拟器中控制它，我将 .db 推到我的桌面并打开它。我在其中看到，是的，没有新表。但它必须是。

当我删除应用程序并重新安装我的应用程序时没有任何问题，表格就在那里。但我不想重新安装我想升级。我能为此做些什么？

```
package xxxxx;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String DB_NAME="xxx.db";
    public static final String TABLE_NAME="already_exist";
    public static final String TABLE_NAME2="already_exist2";
    public static final String TABLE_NAME3="new_table";
    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, 2);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE_NAME + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, s TEXT)");
        db.execSQL("CREATE TABLE " + TABLE_NAME2 + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, a TEXT,v TEXT)");
        db.execSQL("CREATE TABLE " + TABLE_NAME3 + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, x TEXT)");
    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {

       }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:09:26.390

```
@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
arg0.execSQL("CREATE TABLE " + TABLE_NAME3 + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, x TEXT)");
   }

@Override
public void onDowngrade(SQLiteDatabase arg0, int arg1, int arg2) {
arg0.execSQL("CREATE TABLE " + TABLE_NAME3 + "(_id INTEGER PRIMARY KEY AUTOINCREMENT, x TEXT)");
   } 
```

# android - 存储数据以供将来在 Android、首选项或数据库中使用？

> ID：11289351
> 
> 赞同：0
> 
> 时间：2012-07-02T07:27:33.220
> 
> 标签：android, database, sharedpreferences

我正在制作一个保存值的应用程序，`arrays`我有 7 个这样的数组。现在我想保存这些值以备将来使用，尽管应用程序已重新启动。我在 和 之间感到`database`困惑`sharedprefrences`。请告诉我这种方法可以使用什么，为什么？

如果我使用`sharedpreferences`那么有没有办法存储多行数据或者我只能使用 SQLite？请告诉.. 提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:02:22.327

这两种是保存持久数据的两种方法。有利也有弊。我的观点是，如果你想保存大量数据，我会选择数据库。偏好更像是保存需要键值对的状态或有价值的信息。一个简单的示例是保存 EditText 的值或用户登录应用程序的次数。

尽管在您的情况下，数据库似乎更合适，但实施有点耗时，我不知道这是否值得您的情况。如果有可能扩展您希望保存的数据集，请使用数据库。由你决定。

我希望这个答案能给你一个简要的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:40:02.473

这里讨论了一种方法： [StackOverflow - How to Implement Persistent Storage in Android](https://stackoverflow.com/questions/7362093/how-to-implement-persistent-storage-in-android)

这里展示了三种不同类型的存储：[Android 中的数据存储](http://smartandroidians.blogspot.com/2010/05/reading-and-writing-to-file-in-android.html)

# asp.net - 添加服务器端控件时的问题

> ID：11289352
> 
> 赞同：-1
> 
> 时间：2012-07-02T07:27:34.240
> 
> 标签：asp.net, html

我有一个完整的 HTML 项目，带有完整的 .CSS 文件。

问题是我想添加一些 asp.net 控件，例如 TextBox 和按钮等等，但是当我向其中添加服务器端控件并运行页面时，它给了我无法遵循的错误，因为它出现在浏览器的选项卡上。

错误以 TextBox 类型的控件“txt”开头...，然后它给了我导航已取消，浏览器将我定向到

> [http://youtubedownloader.mybrowserbar.com/cgi/errors.cgi?q=http://localhost:55942/Dar%2520Al-Thaqafah/Default2.aspx&type=dns&ISN=A9B31DEE919345BE838EAF628EAFA22F&ccv=149&cnid=937811&cco=US&ct=1&sc=500](http://youtubedownloader.mybrowserbar.com/cgi/errors.cgi?q=http://localhost:55942/Dar%2520Al-Thaqafah/Default2.aspx&type=dns&ISN=A9B31DEE919345BE838EAF628EAFA22F&ccv=149&cnid=937811&cco=US&ct=1&sc=500)

这是default2.aspx页面的代码

```
[%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default2.aspx.vb" Inherits="Default2" %]

   [div class="header"]
        [div class="logo"><a href="Default.aspx"></a></div]            
    [div id="menu"]
        [ul]                                                                       
        [li class="selected"][a href="Default.aspx"]Home[/a][/li]
        [li][a href="Default2.aspx"]Available Books[/a][/li]
        [li][a href="Default3.aspx"]Register[/a][/li]
        [li][a href="Default4.aspx"]Checkout[/a][/li]
        [li][asp:TextBox ID="txt" runat="server"][/asp:TextBox][/li]
        [li][asp:Button ID="btn" Text="hhhhh" runat="server" /][/li]
        [/ul]
    [/div]      
 [/div] 
```

[/div]

我使用的是浏览器 IE 版本 9。Visual Studio 2005。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:44:56.353

好吧，您提供的信息有限，我想问题是您将 ASP.NET 控件添加到 HTML 页面而不是 ASP.NET 页面，这就是您看到错误的原因。ASP.NET 控件由服务器执行并转换为浏览器可读的 HTML 控件。因此，您只能将 ASP.NET 控件添加到 ASP.NET 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:38:29.970

尝试使用下面给出的代码：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default2.aspx.vb" Inherits="Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <div class="logo"><a href="Default.aspx"></a></div>            
        <div id="menu">
            <ul>                                                                       
                <li class="selected"><a href="Default.aspx">Home</a></li>
                <li><a href="Default2.aspx">Available Books</a></li>
                <li><a href="Default3.aspx">Register</a></li>
                <li><a href="Default4.aspx">Checkout</a></li>
                <li><asp:TextBox ID="txt" runat="server"></asp:TextBox></li>
                <li><asp:Button ID="btn" Text="hhhhh" runat="server" /></li>
           </ul>
        </div> 
    </form>
</body>
</html> 
```

# c#-4.0 - 从只读文件系统打开 SQL Server CE 数据库数据

> ID：11289355
> 
> 赞同：4
> 
> 时间：2012-07-02T07:27:43.543
> 
> 标签：c#-4.0, sql-server-ce

我从我的应用程序中使用 SQL Server CE 数据库。我的程序位于 DVD 上。

我无法从 DVD 上的数据库中读取数据，我将 SQL 连接字符串模式设置为只读但它不起作用（我只想从 db 中读取数据）

错误：

> 以只读方式打开数据库需要指定临时路径。[数据库名称 = C:\Users\Ali\AppData\Local\Temp\Rar$EX52.280...]

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T07:55:53.437

为了在只读媒体上打开 SQL Server CE 数据库文件 (SDF)，您还需要向连接字符串添加两个附加参数

*   模式=只读
*   临时路径=[路径]

你可以这样做：

```
connectionString = String.Format(@"Data Source = {0}\{1};Mode = Read Only;Temp Path={2}", 
          dataBaseDirectory,
          dataBaseName, 
          System.IO.Path.GetTempPath()); 
```

如果您从 App.Config 获取连接字符串

见[https://stackoverflow.com/a/10731515/19624](https://stackoverflow.com/a/10731515/19624)

```
string connectionString = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;
connectionString += ";Mode = Read Only;Temp Path=" + System.IO.Path.GetTempPath()); 
```

# html - Firefox 问题 - 如果我滚动然后调整窗口大小，图像会消失

> ID：11289356
> 
> 赞同：1
> 
> 时间：2012-07-02T07:27:45.457
> 
> 标签：html, css, image, firefox, scroll

我有一个我正在设计的页面，它纯粹是带有 CSS 样式表的 html。我设置了带有页眉和页脚的可滚动内容，有点像这里的示例：[http](http://www.cssplay.co.uk/layouts/basics2.html) ://www.cssplay.co.uk/layouts/basics2.html 除了我的页眉和页脚包含多个图像而不是文本。

我遇到的问题是，当我向下滚动页面并将窗口调整为更小的尺寸时，我的页眉和页脚消失了......但仅在 Firefox 中。当我再次最大化窗口时，页脚出现了，但是一些 300-400 多个像素太高了，并且页眉仍然消失了。Safari、Opera 和 Chrome 都可以正常工作；我可以随心所欲地调整浏览器窗口的大小，并且我的页面会做出适当的反应。

这可能是什么原因造成的？奇怪的是，如果我根本不滚动，然后继续调整窗口大小，Firefox 会保留我页面的样式……可能是溢出：滚动问题？

感谢大家

对不起，我忘了包括我的链接： [http ://www.theskycaptain.com/THESKYCAPTAIN.COM/projects/cosmicwomb.html](http://www.theskycaptain.com/THESKYCAPTAIN.COM/projects/cosmicwomb.html)

（我意识到 bandcamp 播放器的行为不正常，我的代码有点乱，但我正在开发中，我刚刚托管它来解决这个问题：只需向下滚动一点，调整窗口大小然后最大化，你会明白我的意思）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:43:19.123

您的网页定义不正确`img`，并且[**到处都有**](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.theskycaptain.com%2FTHESKYCAPTAIN.COM%2Fprojects%2Fcosmicwomb.html&charset=%28detect+automatically%29&doctype=Inline&group=0)`br`标签，包括需要清理的其他错误。[](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.theskycaptain.com%2FTHESKYCAPTAIN.COM%2Fprojects%2Fcosmicwomb.html&charset=%28detect+automatically%29&doctype=Inline&group=0)

 **不正确的例子：

```
<img src="../image/topspace.png"></img> 
```

正确示例：

```
<img src="../image/topspace.png" alt="image" /> 
```

有关 img 标签的更多信息，请阅读[**此处**](http://www.w3.org/wiki/HTML/Elements/img)。

另外，改变：

```
</br> 
```

至：

```
<br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:47:51.163

尝试为绝对定位的元素赋予顶部和底部值。

IE

```
.topspace, .headercon, .scroller { top: 0px; }
.footer { bottom: 0px; } 
```

^(（这些不一定是您想要的确切值，而只是一个示例）)**

# android - 在android中启动应用程序时保存用户名错误

> ID：11289359
> 
> 赞同：0
> 
> 时间：2012-07-02T07:28:06.910
> 
> 标签：android

我正在开发一个 android 应用程序，我必须在其中执行以下操作

在应用程序启动时，它应该做的第一件事是要求用户输入名称，然后通过带有该名称的欢迎屏幕。

然后下次使用该应用程序时，它应该只显示欢迎屏幕（不应再次询问名称）

我已经为上面创建了代码。我已使用已保存的共享首选项

我的代码是

```
private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
       }

       private void LoadPreferences(){
        SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
        String strSavedMem1 = sharedPreferences.getString("MEM1", "");
        String strSavedMem2 = sharedPreferences.getString("MEM2", "");
        textSavedMem1.setText(strSavedMem1);
        textSavedMem2.setText(strSavedMem2);
       }
    } 
```

但是如何检查用户是否已经注册？

谢谢图沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:39:59.773

> 但是如何检查用户是否已经注册？

当用户第一次启动应用程序时，您将检查名称键是否存在任何首选项值。

以下片段将帮助您

```
SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);

String namePrefrence = sharedPreferences.getString("uname", "");

if (namePrefrence.length() == 0) {  

    //User not registered!!  
    Show dialog where user will enter username

} else {

    //User is registered!!  
    just show welcome screen

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:57:19.580

很好用`SharedPrefernces`..使用这个::

先声明...

```
public static final String PREFS_NAME = "PrefernceNAme";
public static final String PREFS_ITEM = "PrefItemStored"; 
```

要从中获取值，请使用:::

```
SharedPreferences preferences = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);    
mode = preferences.getString(PREFS_ITEM, "PrefItemStored"); 
```

并在 中添加值`SharedPrefernces`，请使用::

```
getSharedPreferences(PREFS_NAME, MODE_PRIVATE)
                .edit()
                .putString(PREFS_ITEM, value)
                .commit(); 
```

# php - 使用 php-curl 库在 Apache Solr 中索引文档

> ID：11289361
> 
> 赞同：1
> 
> 时间：2012-07-02T07:28:12.073
> 
> 标签：php, apache, curl, solr

我正在使用 php curl 库索引文件。我被困在这里的代码

```
echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
     $result=move_uploaded_file($_FILES["file"]["tmp_name"],"upload/" . $_FILES["file"]["name"]);
     if ($result == 1) echo "<p>Upload done .</p>";
        $options = getopt("f:");
        $infile = $options['f'];

        $url = "http://localhost:8983/solr/update/";
        $filename = "upload/" . $_FILES["file"]["name"];
        $handle = fopen($filename, "rb");
        $contents = fread($handle, filesize($filename));
        fclose($handle);
        echo $url;
        $post_string = file_get_contents("upload/" . $_FILES["file"]["name"]);
        echo $contents;
        $header = array("Content-type:text/xml; charset=utf-8");

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
        curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
        curl_setopt($ch, CURLINFO_HEADER_OUT, 1);

        $data = curl_exec($ch);

        if (curl_errno($ch)) {
           print "curl_error:" . curl_error($ch);
        } else {
           curl_close($ch);
           print "curl exited okay\n";
           echo "Data returned...\n";
           echo "------------------------------------\n";
           echo $data;
           echo "------------------------------------\n";
        } 
```

结果什么都没有显示。此外，Apache Solr 的事件日志中没有显示任何内容。请帮我写代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:46:45.580

在`$post_string`您从上传的文件中读取的文件中，该文件是否以`<commit />`? 没有它，什么都不会提交给 Solr，因此请确保您的命令集以`<commit />`.

另外，我强烈不推荐这种更新文件的方式。如果有人不择手段地弄清楚您的管道以及如何运行此文件，他们很容易对您的 Solr 索引造成严重破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T17:49:35.437

这对我有用，与您的代码相同，但将 url 更改为以下

```
$url = "http://localhost:8983/solr**/CORE_NAME**/update/**?commit=true**"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T10:33:23.050

以下是它对我的工作方式：

```
$target_url = $config['core']['solr_host'] . "/solr/update/extract?commit=true&literal.id=" . urlencode ( $page ['id'] ) . "&literal.url=" . urlencode ( rtrim(BASE_URL . $page ['path'],"/") );
$file_name_with_full_path = WEBSITE_PATH . $page ['path'];

$post = array (
   'myFile' => '@' . $file_name_with_full_path 
);

$ch = curl_init ();
curl_setopt ( $ch, CURLOPT_URL, $target_url );
curl_setopt ( $ch, CURLOPT_POST, 1 );
curl_setopt ( $ch, CURLOPT_POSTFIELDS, $post );
curl_setopt ( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt ( $ch, CURLOPT_USERPWD, "user:pass" ); // for Apache Basic Auth

$result = curl_exec ( $ch );
$http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close ( $ch );

echo $result; 
```

# android - 如何将 .apk 文件加载到真实设备中？

> ID：11289363
> 
> 赞同：0
> 
> 时间：2012-07-02T07:28:21.707
> 
> 标签：android, android-emulator, apk

嘿朋友们，我试图将我的 .apk 文件加载到设备上，但是当我尝试将它安装在它说的手机中时它显示错误

```
parse error
there is a problem parsing the package 
```

我尝试将项目导出到手机上..

并且还尝试通过在eclipse中右键单击我的项目来通过android工具导出它！

有没有其他替代方法可以将我的 .apk 文件发送到手机以及正确的包！

我该如何克服这个？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:38:30.200

进入终端/命令表单并导航到平台工具目录。

然后`./adb install <path of the .apk file>`在linux机器上输入。

```
adb install <path of the .apk file> 
```

在windows机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:39:07.713

您可以在项目的**bin**文件夹中找到 .apk 文件。**您可以通过adb**命令将该 .apk 文件安装到真实设备中。[在此处](http://developer.android.com/tools/help/adb.html)阅读有关 adb的更多信息。

# ruby-on-rails - 如何从已安装的 ruby gem 中检测 rails 版本

> ID：11289365
> 
> 赞同：1
> 
> 时间：2012-07-02T07:28:35.223
> 
> 标签：ruby-on-rails, rubygems

我想修改现有的 gem 以与新的 rails 版本兼容。我的要求如下

我有一个可以在 2 号和 3 号轨道上运行的 gem。但它有一些样式表复制功能。如您所知，rails 2 在`public/stylesheets`文件夹中有样式表，但在 rails3 中有断言管道。

所以我想做的是，我想检测我的 gem 安装的 rails 应用程序使用的 rails 版本，并根据版本我将处理文件副本。

**我的问题是已安装的 ruby​​ gem 如何读取当前的 rails 应用程序版本？**

还是**有其他方法可以做到这一点？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:47:05.403

我浏览了 Rails 的最新稳定源代码，发现一个`version.rb`文件表明我可以这样做：

```
Rails::VERSION::STRING  #=> "3.2.6" 
```

如果您查看[Rails 2.3](https://github.com/rails/rails/blob/2-3-stable/railties/lib/rails/version.rb)，您会发现同样的方法在那里工作。

# xcode - Xcode关闭而不保存

> ID：11289366
> 
> 赞同：0
> 
> 时间：2012-07-02T07:28:36.533
> 
> 标签：xcode

如果我对 Storyboard 进行更改（例如删除控件）然后关闭 Xcode，则保存前没有提示；如果我然后重新打开该文件，该控件仍会被删除；就好像自动保存在不断发生。这是正常行为还是我应该重新安装 Xcode（4.3.2 版、Lion、Mac Mini）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:34:23.417

自推出 Lion OSX 以来，您的操作系统会不断保存您的文档。

*   当我工作时，我总是使用时间机器！它让我保持安全，就好像我想过去旅行并获得我以前运行的版本一样！

或者

*   你总是可以在本地使用 git 来安全地保存你的源代码。

# c# - 如何使用 C# 从 Windows 7 en-US 上的 Big5 Jet 数据库中查询表？

> ID：11289368
> 
> 赞同：0
> 
> 时间：2012-07-02T07:28:44.810
> 
> 标签：c#, .net, ado.net, jet, big5

我有一个非常旧的 Big5 Jet 数据库，我想将其转换为 Unicode 和 SQLite。

这里的第一步是实际打开 jet 数据库。使用 C# ADO，我可以枚举 Jet DB 中的表。它们都是乱码，这是我在 Windows 7 en-US 上所期望的。

现在，如果我简单地将这些表名放入一个简单的

```
 select * from "[garbled text]" 
```

jet 数据库抱怨它如何找不到表。同样，如果我尝试将 jet 数据库加载到 Microsoft Access 2010 中，它可以看到表但不能从中查询。

经过一段时间的努力，我决定启动数据库的原始主机 Windows XP zh-tw，它支持 Big5/Code Page 950。

我将完全相同的失败二进制文件从 Windows 7 zh-tw 扔到 Windows XP zh-tw 中。我运行exe并繁荣，它能够查询表没问题。

**我真的很想能够在 Windows 7 上做到这一点，而且我也很想在不依赖宿主文化的情况下做到这一点。**

我尝试过但失败的事情：

*   将线程区域性更改为实例化 jet db 对象的线程的 zh-tw。
*   在 ADO 源字符串上指定区域设置：

    ```
    Provider=Microsoft.Jet.OLEDB.4.0;Locale Identifier=950; 
    ```

    jet 数据库也有自己的线程池，但我不知道如何访问这些线程来改变他们的文化。

**我可以在 Windows 7 en-US 上从该数据库中查询表吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:21:05.007

在 Windows 7（任何语言）上，您可以更改系统区域设置：

*   区域和语言 -> 管理 -> 更改系统区域设置 -> 中文（繁体，台湾） -> 好的，重启

我不知道如何在代码中更改 Jet/ADO.NET 语言环境，抱歉。

# apache - 为什么使用 http gzip 压缩后 png 大小不会改变

> ID：11289369
> 
> 赞同：23
> 
> 时间：2012-07-02T07:28:50.517
> 
> 标签：apache, .htaccess, gzip, deflate, http-compression

我使用以下 .htaccess 设置 gzip 压缩：

```
AddOutputFilterByType DEFLATE text/html image/png image/jpeg text/css text/javascript 
```

请查看此网址： http: [//www.coinex.com/cn/silver_panda/proof/china_1984_27_gram_silver_panda_coin/](http://www.coinex.com/cn/silver_panda/proof/china_1984_27_gram_silver_panda_coin/)

gzip 压缩适用于 html、css、js 和 jpg，但不适用于 png（真的很神奇..）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-02T07:44:27.353

PNG 已经是一种压缩数据格式。使用 GZIP 压缩它不太可能减小大小，实际上可以使其更大。

我很惊讶您在对 JPG 进行 GZIP 压缩时看到了好处，因为它们也是经过压缩的。

有关使用 GZIP 的 Google 提示，请参阅[此处](https://developers.google.com/speed/docs/best-practices/payload#GzipCompression)。他们建议不要将其应用于图像。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-02T07:45:24.350

PNG 图像格式已经在内部使用了 deflate 压缩。因此，通过在此之上使用 HTTP 压缩，您通常不会看到传输大小有任何明显减少。因此，您应该从您提到的列表中删除 image/png 以避免在冗余压缩步骤上浪费服务器和客户端的 CPU 周期。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-28T13:05:03.380

如果您想让您的 PNG 更小，请使用[https://tinypng.com/](https://tinypng.com/) 或其他 png 优化器。是的，它也完全支持 Alpha 通道。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-21T14:25:47.543

PNG是一种**无损**图像压缩格式。基本上它使用空间压缩来完全保留原始图像质量。它不能在不损失质量的情况下进一步压缩（您需要使用另一种无损格式来查看它是否效果更好）。

不需要使用 GZIP（或等效的），因为它只会为客户端的图像解压缩添加处理。

对于 JPEG，您可以做的最好的事情是确保使用正确的分辨率和质量设置来满足您的目的。GZIP 最多只能产生混合结果。确保从中删除所有元数据（除非您需要这些信息客户端，但最好将这些数据保存在数据库中）。

# iphone - 使用导航栏中的编辑按钮进行子表视图

> ID：11289376
> 
> 赞同：0
> 
> 时间：2012-07-02T07:29:21.547
> 
> 标签：iphone, objective-c, ios, xcode

嗨，我有`tableView`我的看法。但我希望导航栏中的编辑适用于 tableView。你能告诉我怎么做吗？

我为主视图设置了导航栏，并且也进行了`tableView`设置。

我做了一个创建导航栏的方法：

```
- (UINavigationBar *)createNavigationBar
{
UINavigationItem *title = [[UINavigationItem alloc] initWithTitle:@"Task Manager"];
UINavigationBar *new = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:nil];
title.leftBarButtonItem = addButton;
[new pushNavigationItem:title animated:YES];
UIColor *color = UIColorFromRGB(0xff8c00); // Dark orange
new.tintColor = color;
return new;
} 
```

我有

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

设置为好。

当我点击主导航栏中的编辑按钮时，我基本上需要为 sub-tableView 出现红色圆圈。

如果我不清楚，我很抱歉。如果您需要任何澄清，请询问我。

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:36:08.580

你只需要让你的 tableView 处于编辑模式..你可以这样做

```
[yourTableView setEditing:YES animated:YES]; 
```

你将把这段代码放在你的按钮动作中..所以你需要把你的代码改成这样

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(editPressed)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:37:37.013

您应该有一个 BOOL 变量来存储当前的编辑状态和一个函数 ( `addTarget`) 到编辑按钮，它将基于此变量将表格置于编辑模式，如下所示：

```
-(IBAction) editWasPressed:(id)sender
{
    editMode = ! editMode;

    if(editMode) 
    {
        [table setEditing:YES animated:YES];
    }
    else
    {
        [table setEditing:NO animated:YES];
    }
} 
```

您应该将该变量重命名`new`为其他名称！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:10:20.527

在你的视图中画出这条线*WillApear:* ...

```
[super setEditing:NO animated:yes]; 
```

然后在您的*editWasPressed:*方法中...

```
[my_table setEditing:!my_table.editing animated:YES]; 
```

希望对你有帮助.....

# delphi - Indy TIdFTP - EIdReplyRFCError - “无法打开数据连接”

> ID：11289380
> 
> 赞同：3
> 
> 时间：2012-07-02T07:29:42.977
> 
> 标签：delphi, ftp, delphi-7, indy, indy10

我们将 Indy`TIdFTP`与`FileZilla`0.9.39 beta FTP 服务器一起使用。
*我们的客户经常*（并非总是）收到以下异常：

```
exception class   : EIdReplyRFCError
exception message : Can't open data connection.
main thread ($d38):
006352e6 +03a     IdReplyRFC        258  +1 TIdReplyRFC.RaiseReplyError
0063af39 +005     IdTCPConnection   540  +0 TIdTCPConnection.RaiseExceptionForLastCmdResult
0063b17c +050     IdTCPConnection   644 +10 TIdTCPConnection.CheckResponse
0063aed2 +03a     IdTCPConnection   529  +2 TIdTCPConnection.GetResponse
0065986d +1ad     IdFTP            1460 +29 TIdFTP.InternalGet
006595bb +0f3     IdFTP            1386 +16 TIdFTP.List 
```

这个错误只发生在他的网络内部！并且*不一致*。
我无法在我们的网络上重现此错误。我在网上搜索了整个网络以找到解决方案，但没有找到任何东西。有什么办法可以解决这个吗？？？

编辑：我们正在使用“被动”模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-21T15:48:16.823

如果有人有同样的问题，可能是 TLS 的情况，一些服务器有这个问题。您可以打开/打开：

`void __fastcall TForm1::turnOffTLS(TIdFTP *choosenFTP){ choosenFTP->DataPortProtection=ftpdpsClear; choosenFTP->UseTLS=utNoTLSSupport; }`

`void __fastcall TForm1::turnOnTLS(TIdFTP *choosenFTP){ choosenFTP->UseTLS=utUseExplicitTLS; choosenFTP->DataPortProtection=ftpdpsPrivate; }`

# .net - 从一个文件创建其他文本文件？

> ID：11289383
> 
> 赞同：1
> 
> 时间：2012-07-02T07:29:59.220
> 
> 标签：.net, vb.net, .net-4.0

我希望有人能给我一点帮助吗？我有以下代码更改我的文本文件中的行，它基本上从文本框中读取一个数字并创建另一个文本文件，其行数与文本框中的数字相匹配。编码工作正常。

```
Dim lines() As String = IO.File.ReadAllLines("C:\test1.txt")
IO.File.WriteAllLines("C:\test1.txt", lines.Skip(CInt(TextBox1.Text)).toarray)
IO.File.WriteAllLines("C:\test2.txt", lines.Take(CInt(TextBox1.Text)).toarray) 
```

现在我希望进行一些更改，我想要从文本框中读取数字并创建 5 个单独的文本文件。因此，例如，如果文本文件 1 有 60 行，而文本框 1 的编号为 50，那么在运行编码后我将拥有以下文本文件。

```
textfile 1 - 10 rows remaining
textfile 2 - 10 rows
textfile 3 - 10 rows
textfile 4 - 10 rows
textfile 5 - 10 rows
textfile 6 - 10 rows 
```

如果 textfile1 只有 1 行，那么我想要以下

```
textfile 1 - 0 rows remaining
textfile 2 - 1 rows
textfile 3 - 0 rows
textfile 4 - 0 rows
textfile 5 - 0 rows
textfile 6 - 0 rows 
```

如果 textfile1 有 5 那么它将是

```
textfile 1 - 0 rows remaining
textfile 2 - 1 rows
textfile 3 - 1 rows
textfile 4 - 1 rows
textfile 5 - 1 rows
textfile 6 - 1 rows 
```

如果 textfile1 有 4 那么它将是

```
textfile 1 - 0 rows remaining
textfile 2 - 1 rows
textfile 3 - 1 rows
textfile 4 - 1 rows
textfile 5 - 1 rows
textfile 6 - 0 rows 
```

等这可能吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:57:37.423

好的，我会试一试，尽管您的要求对于 SO 来说过于本地化，而且它不太可能对其他人有帮助。您的评论使问题可以回答。

一种方法是使用 LINQ 按以下方式对行进行分组`Index Mod FileCount`：

```
Dim lineCount = Decimal.ToInt32(NumericUpDown1.Value)
Dim fileCount = Decimal.ToInt32(NumericUpDown2.Value)
Dim file1Lines = IO.File.ReadAllLines("C:\test1.txt")
Dim newFile1Lines = file1Lines.Skip(lineCount)
Dim lineGroups = (
    file1Lines.Take(lineCount).
               Select(Function(l, i) New With {.Line = l, .Index = i}).
               GroupBy(Function(x) x.Index Mod fileCount).
               Select(Function(grp) New With {
                          .FileIndex = grp.Key,
                          .Lines = grp.Select(Function(x) x.Line)
              })) 

IO.File.WriteAllLines("C:\test1.txt", newFile1Lines)
For i = 0 To fileCount - 1
    Dim path = String.Format("C:\test{0}.txt", i + 2)
    Dim lineGroup = lineGroups.FirstOrDefault(Function(lg) lg.FileIndex = i)
    If lineGroup Is Nothing Then
        IO.File.WriteAllLines(path, {""})
    Else
        IO.File.WriteAllLines(path, lineGroup.Lines)
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:30:56.890

更低的内存消耗；一次只有一行存储在 RAM 中：

```
Dim files As Integer = 5
Dim lines As Integer = 50

Using rdr As New IO.StreamReader("C:\test1.txt")

    Dim output(files) As StreamWriter
    For i As Integer = 0 To files
       output(i) = New StreamWriter(String.Format("C:\test{0}.txt",i+1))
    Next i

    Try

        Dim currentStream As Integer = 1
        Dim line As String
        While (line = rdr.ReadLine()) <> Nothing
           If lines > 0 Then
               output(currentStream).WriteLine(line)
               currentStream += 1
               If currentStream > files Then currentStream = 1
               lines -= 1
           Else
               output(0).WriteLine(line)
           End If

        End While

    Finally
        For Each writer As StreamWriter In output
            writer.Close()
        Next writer
    End Try
End Using 
```

# mysql - 在另一个子查询中使用 WHERE IN 中的子查询结果（优化）

> ID：11289385
> 
> 赞同：0
> 
> 时间：2012-07-02T07:30:04.520
> 
> 标签：mysql, optimization

这已经困扰了我一段时间了，作为一个新手，我不确定我到底应该寻找什么。经过几个小时的谷歌搜索，我无法找到令人满意的答案。

我有一个相对复杂的查询，我已将其剥离并简化为：

```
SELECT field_a1,
       field_a2,
       (SELECT Count(*)
        FROM   table_b
        WHERE  field_b1 IN (SELECT field_x1
                            FROM   table_x) AND field_b2 = 1) AS new_field_1,
       (SELECT Count(*)
        FROM   table_c
        WHERE  field_c1 IN (SELECT field_x1
                            FROM   table_x) AND field_c2 = 2) AS new_field_2,
       (SELECT Count(*)
        FROM   table_d
        WHERE  field_d1 IN (SELECT field_x1
                            FROM   table_x) AND field_d2 = 3) AS new_field_3
FROM   table_a
WHERE  field_a1 IN (SELECT field_x1
                    FROM   table_x) 
```

在原始查询中，我有大约 30 个`new_field_*`. 一切似乎都很好，我得到了一些非常令人满意的结果（最终结果和性能）。

我的问题是这个查询：

```
SELECT field_x1
FROM   table_x 
```

被重复了很多次（30 * 返回的行数），并且始终用作将在其中`WHERE IN`查找匹配项的集合。

**我的问题：**

是否可以只执行一次这个小查询并保留该结果并重复使用它？

我能想到的唯一两件（荒谬的）事情是这样的（想象的解决方案）：

```
temp = (SELECT field_x1
        FROM   table_x)
SELECT field_1
FROM   table_1
WHERE  field_1 IN temp 
```

或者在客户端（运行 PHP 的网络服务器）上执行一次此查询，然后使用以下内容将结果附加到将来的查询中：

```
$IN_Condition = implode(',', $stmt->execute()->fetchAll(PDO::FETCH_NUM));
$sql_query = "SELECT field_1
              FROM   table_1
              WHERE  field_1 IN ($IN_Condition)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:48:39.253

有时您不需要对查询进行优化，当引擎看到类似的子查询时，它只会获取一次数据。但是你可以试试这个查询，看看它是否更快：

```
SELECT a.field_a1, a.field_a2,
   (SELECT Count(*)
    FROM x
    WHERE x.field_x1 = b.field_b1
      AND b.field_b2 = 1) AS new_field_1,
   ...
FROM table_a, table_b b, ..., -- Query here the tables you need
     (SELECT field_x1
      FROM table_x) x
WHERE field_a1 IN x 
```

您还可以将表保存在内存中，并与您的 php 引擎比较数据，但它会比使用 db 引擎慢。

编辑：您需要的每个表都将被查询一次

编辑2：颠倒逻辑！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:49:52.783

尝试使用 JOIN 子句，例如 -

**编辑：**

```
SELECT
  field_a1,
  COUNT(b.field_b1) new_field_1,
  COUNT(c.field_c1) new_field_2,
  COUNT(d.field_d1) new_field_3
FROM
  table_a a
JOIN table_x x
  ON x.field_x1 = a.field_a1
LEFT JOIN table_b b
  ON b.field_b1 = x.field_x1
LEFT JOIN table_c c
  ON c.field_c1 = x.field_x1
LEFT JOIN table_d d
  ON d.field_d1 = x.field_x1
GROUP BY
  a.field_a1 
```

# android - 从android中的第一个活动调用第二个活动

> ID：11289387
> 
> 赞同：-5
> 
> 时间：2012-07-02T07:30:10.817
> 
> 标签：android, android-activity

谁能帮助我如何在android中进行另一项活动

我知道以下程序： **启动活动功能。** 什么是意图作为参数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:34:37.300

使用以下代码：-

```
Intent intent = new Intent(CurrentActivity.this, OtherActivity.class);
CurrentActivity.this.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:33:33.107

```
Intent intent = new Intent(FirstActivity.this,SecondActivity.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:33:39.767

Intent 是用于启动活动的参数。

```
startActivity(new Intent(<context>,<class>)); 
```

# linux - 我目前通过绑定接口强制传出数据包作为 gw 设备的方法是否合适？

> ID：11289396
> 
> 赞同：1
> 
> 时间：2012-07-02T07:31:00.203
> 
> 标签：linux, networking

我在 Redhat 6.1 上有两个 NIC 卡，每个都有 4 个端口。

当应用程序启动时，它会创建一个绑定接口，每个 NIC 都有一个端口（例如：`eth1`和`eth4`），并为该接口分配一个虚拟 IP。一旦这个接口启动，来自这台机器的所有数据包都应该通过绑定接口。

为了目前实现这一点，我正在使用以下`ip route`命令将默认 gw 设备名称更改为绑定接口：`ip route replace default via 10.3.2.1 dev INT-BOND`。

停止应用程序时，我们关闭绑定接口并将默认 gw 设备名称更改回`eth0`.

我的方法的问题是，如果有人关闭绑定接口 ( `ifdown`)，那么它会删除默认 gw。

我需要确认我目前的工作方法可以继续前进；否则，我应该对 进行修改`iptables/ip rules`，还是有更好的建议？

# php - 如何将上次查询生成的 Id 存储到 php 中的表中

> ID：11289398
> 
> 赞同：-1
> 
> 时间：2012-07-02T07:31:08.310
> 
> 标签：php, mysql

嗨，如何使用 php 将上次查询中生成的 id 存储到 mysql 中的另一个表中？

这是我的代码（其中似乎有什么问题？

```
$regInfo = "INSERT INTO details (name, age_range_ID, sports) VALUES ('{$clean_name}', {$clean_age_range}, '{$clean_sports_list}')";

    if (!mysql_query($regInfo ,$link))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";
    $regId = mysql_insert_id();

    $modInfo = "INSERT INTO module_info (reg_ID, programme) VALUES ('{$regId }', '{$clean_programme}')";

    if (!mysql_query($modInfo ,$link))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";

    mysql_close($link) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:42:23.163

这真的不是最好的方法，你知道这不是 1999 年......所以试着研究一下[Mysqli](http://php.net/manual/en/book.mysqli.php)。如果你用谷歌搜索这个主题，你会得到一堆关于如何使用它的教程。

只是暂时解决您的问题，请尝试以下操作：

```
<?php

$regInfo = "INSERT INTO details (name, age_range_ID, sports) VALUES (`$clean_name`, `$clean_age_range`, `$clean_sports_list`)";

if (!mysql_query($regInfo ,$link))
{
    die('Error: ' . mysql_error());
}

echo "1 record added";
$regId = mysql_insert_id();

$modInfo = "INSERT INTO module_info (reg_ID, programme) VALUES (`$regId`, `$clean_programme`)";

if (!mysql_query($modInfo ,$link))
{
    die('Error: ' . mysql_error());
}
echo "1 record added";

mysql_close($link); 
```

# asp.net - 如何解决会员资格和 respons.redirect()

> ID：11289399
> 
> 赞同：0
> 
> 时间：2012-07-02T07:31:13.023
> 
> 标签：asp.net

我实现了会员资格，当用户登录时，我调用此代码：

```
 if (Membership.ValidateUser(txtUsern.Text, txtPass.Text))
    {
        string[] rol = Roles.GetRolesForUser(txtUsern.Text);

        string s = rol[0];
        DetectRoll(s);

    } 
```

它是 DetectRoll(); 功能：

```
switch (s)
    {
        case "manager":
            Response.Redirect("~/Manager/Manager.aspx");
            break;
        case "operator":
            Response.Redirect("~/Operator/Operator.aspx");
            break;
        case "user":
            Response.Redirect("~/User/User.aspx");
            break;
        default:
            break;
    } 
```

问题是 Respons.Redirect() 不会将我移动到典型的页面。

主文件夹中的 web.config

```
<?xml version="1.0" encoding="utf-8"?>
 <configuration> 
  <system.web> 
    <authorization> 
     <allow roles="manager" /> 
     <deny users="*" /> 
   </authorization> 
  </system.web> 
</configuration> 
```

请帮忙，谢谢…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:34:44.907

你需要打电话，

```
System.Web.Security
   .FormsAuthentication
   .SetAuthCookie("role_Name",bool_persistentCookie) 
```

调用之前的方法`Response.Redirect()`。

编辑：

修改 web.config 文件的`<deny/>`条目。

`<deny users="?"/>`

匿名用户使用问号 ( `?`) 标识。您可以使用星号 ( `*`) 指定所有经过身份验证的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:58:32.690

你有没有尝试过;

```
Response.Redirect(ResolveURL("~/Manager/Manager.aspx")); 
```

# iphone - 设置 contentURL 时，在 iPhone 4.3 模拟器中再次调用 MPMoviePlayerPlaybackDidFinishNotification

> ID：11289401
> 
> 赞同：5
> 
> 时间：2012-07-02T07:31:25.303
> 
> 标签：iphone, objective-c, ios, mpmediaplayercontroller

*注意：请参阅底部的更新。*

* * *

我有一个应用程序可以从列表中逐个播放视频。所以，为了测试这个功能，我创建了一个只有一个视图控制器的简单应用程序。[在实现这个](http://mobiledevelopertips.com/video/getting-mpmovieplayercontroller-to-cooperate-with-ios4-3-2-ipad-and-earlier-versions-of-iphone-sdk.html)视图控制器之前，我参考了这个博客。视图控制器被命名`TNViewController`，其实现如下：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface TNViewController : UIViewController {
  @private
    NSMutableArray *_videoArray;
    int _currentVideo;

    MPMoviePlayerController *_moviePlayer;
    NSURL *_movieUrl;
}

@end 
```

它的实现是：

```
#import "TNViewController.h"

@implementation TNViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO];
    [self.view setFrame:CGRectMake(0, 0, 480, 320)];

    [self initVideos];
    [self initPlayer];
}

- (void) initVideos {
    _videoArray = [[NSMutableArray alloc] init];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"sintel_trailer" ofType:@"mp4" inDirectory:nil];
    [_videoArray addObject:path];
    path = [[NSBundle mainBundle] pathForResource:@"elephants_dream_trailer" ofType:@"mp4" inDirectory:nil];
    [_videoArray addObject:path];
    path = [[NSBundle mainBundle] pathForResource:@"big_buck_bunny_trailer" ofType:@"mp4" inDirectory:nil];
    [_videoArray addObject:path];

    _currentVideo = -1;
}

- (NSString*) nextVideo {
    _currentVideo++;
    if (_currentVideo >= _videoArray.count) {
        _currentVideo = 0;
    }
    return [_videoArray objectAtIndex:_currentVideo];
}

- (void) initPlayer {
    _moviePlayer = [[MPMoviePlayerController alloc]init];

    [self readyPlayer];
    [self.view addSubview:_moviePlayer.view];

    // Register to receive a notification when the movie has finished playing. 
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackDidFinish:) 
                                                 name:MPMoviePlayerPlaybackDidFinishNotification 
                                               object:_moviePlayer];
}

- (void) readyPlayer {
    _movieUrl    = [NSURL fileURLWithPath:[self nextVideo]];
    [_movieUrl retain];

    _moviePlayer.contentURL = _movieUrl;

    // For 3.2 devices and above
    if ([_moviePlayer respondsToSelector:@selector(loadState)]) {
        // Set movie player layout
        [_moviePlayer setControlStyle:MPMovieControlStyleNone];
        [_moviePlayer setFullscreen:YES];

        // May help to reduce latency
        [_moviePlayer prepareToPlay];

        // Register that the load state changed (movie is ready)
        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(moviePlayerLoadStateChanged:) 
                                                     name:MPMoviePlayerLoadStateDidChangeNotification 
                                                   object:nil];
    } else {
        // Register to receive a notification when the movie is in memory and ready to play.
        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(moviePreloadDidFinish:) 
                                                     name:MPMoviePlayerContentPreloadDidFinishNotification 
                                                   object:nil];
    }
}

/*---------------------------------------------------------------------------
 * For 3.1.x devices
 *--------------------------------------------------------------------------*/
- (void) moviePreloadDidFinish:(NSNotification*)notification {
    // Remove observer
    [[NSNotificationCenter  defaultCenter]  removeObserver:self 
                                                      name:MPMoviePlayerContentPreloadDidFinishNotification 
                                                    object:nil];

    // Play the movie
    [_moviePlayer play];
}

/*---------------------------------------------------------------------------
 * For 3.2 and 4.x devices
 *--------------------------------------------------------------------------*/
- (void) moviePlayerLoadStateChanged:(NSNotification*)notification {
    NSLog(@"moviePlayerLoadStateChanged");
    // Unless state is unknown, start playback
    if ([_moviePlayer loadState] != MPMovieLoadStateUnknown) {
        // Remove observer
        [[NSNotificationCenter defaultCenter]  removeObserver:self
                                                         name:MPMoviePlayerLoadStateDidChangeNotification 
                                                       object:nil];

        // Set frame of movie player
        [[_moviePlayer view] setFrame:CGRectMake(0, 0, 480, 320)];
        // Play the movie
        [_moviePlayer play];
    }
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {    
    NSLog(@"playback finished...");
    NSLog(@"End Playback Time: %f", _moviePlayer.endPlaybackTime);
    int reason = [[[notification userInfo] valueForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] intValue];
    if (reason == MPMovieFinishReasonPlaybackEnded) {
        NSLog(@"Reason: movie finished playing");
    }else if (reason == MPMovieFinishReasonUserExited) {
        NSLog(@"Reason: user hit done button");
    }else if (reason == MPMovieFinishReasonPlaybackError) {
        NSLog(@"Reason: error");
    }

    [self playNextVideo];
}

- (void) playNextVideo {
    NSString *filePath = [self nextVideo];

    [_movieUrl release];
    _movieUrl = [NSURL fileURLWithPath:filePath];    
    [_movieUrl retain];

    _moviePlayer.contentURL = _movieUrl;
    [_moviePlayer play];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (void) dealloc {
    [_moviePlayer release];
    [_movieUrl release];
    [_videoArray release];

    [super dealloc];
}

@end 
```

现在，我的问题是通知`MPMoviePlayerPlaybackDidFinishNotification`被调用了两次。从上面的代码可以看出，我在`viewDidLoad`（in `initPlayer`called from `viewDidLoad`）中只注册了一次。这是日志输出：

```
2012-07-02 12:29:17.661 DemoApp[1191:ef03] moviePlayerLoadStateChanged
2012-07-02 12:30:11.470 DemoApp[1191:ef03] playback finished...
2012-07-02 12:30:11.471 DemoApp[1191:ef03] End Playback Time: -1.000000
2012-07-02 12:30:11.472 DemoApp[1191:ef03] Reason: movie finished playing
2012-07-02 12:30:11.474 DemoApp[1191:ef03] playback finished...
2012-07-02 12:30:11.475 DemoApp[1191:ef03] End Playback Time: -1.000000
2012-07-02 12:30:11.476 DemoApp[1191:ef03] Reason: movie finished playing

2012-07-02 12:31:03.821 DemoApp[1191:ef03] playback finished...
2012-07-02 12:31:03.822 DemoApp[1191:ef03] End Playback Time: -1.000000
2012-07-02 12:31:03.824 DemoApp[1191:ef03] Reason: movie finished playing
2012-07-02 12:31:03.826 DemoApp[1191:ef03] playback finished...
2012-07-02 12:31:03.827 DemoApp[1191:ef03] End Playback Time: -1.000000
2012-07-02 12:31:03.827 DemoApp[1191:ef03] Reason: movie finished playing 
```

如您所见，播放完成被调用了两次。这会导致从队列中跳过一个视频。（*其实在原项目出现问题时，`nextVideo`预先从服务器缓存了一段视频，如果缓存中存在，则返回缓存视频的路径，否则返回`nil`。*）。在这里，首先`sintel_trailer.mp4`播放。在它完成播放后，它会播放 而`elephants_dream_trailer.mp4`不是`big_buck_bunny_trailer.mp4`。也就是说，它会循环播放在其间跳过的视频。那么，是什么导致`MPMoviePlayerPlaybackDidFinishNotification`调用两次呢？我正在为此工作两天，仍然没有运气。任何想法？

**更新 1：**

目前我正在使用`moviePlayBackDidFinish:`如下回调中的开关并且正在工作：

```
if (!_playNextVideo) {
    _playNextVideo = YES;
    return;
}
_playNextVideo = NO;
// code to play video.... 
```

但我仍然想知道是什么导致回调被调用两次。我觉得当前的 switch 解决方案就像一个 hack，并且喜欢删除它。

**更新 2：**

直到现在，我一直在用 iPhone 4.3 模拟器尝试这个。但是，当我用 iPhone 5.0 模拟器和 iPhone 5.1 模拟器尝试相同的程序时，它没有任何问题。也就是说，电影播放完毕后只发送一个回调。这使得我的小技巧（更新 1）变得无用（它解决了 4.3 中的问题，但在 5.0 和 5.1 中产生了问题）。我正在使用在 MacOSX Lion - 10.7.4 上运行的 Xcode 4.3.2。您对如何解决此问题有任何想法吗？为什么在 4.3 上有两个回调？

**更新 3：**

我查明线路导致问题。它在`playNextVideo`方法中。线路原因问题是`_moviePlayer.contentURL = _movieUrl;`。在第一个回调中更改它会导致`MPMoviePlayerPlaybackDidFinishNotification`再次发送。但是，它只发生在 iPhone 4.3 模拟器中。任何想法？

**更新 4：**

不过，我对这种奇怪的行为一无所知。所以，我现在正在使用类似于 UPDATE 1 中的时间技巧，如下所示`moviePlayBackDidFinish:`

```
NSTimeInterval currentCallback = [NSDate timeIntervalSinceReferenceDate];
NSTimeInterval difference      = currentCallback - _lastCallback;
_lastCallback                  = currentCallback;
if (difference < 5.0) {
    return;
}
// code to play video.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:23:09.240

我有同样的问题。并以这种方式解决了它：

我创建了一种跳过视频的新方法

```
- (void) skipVideo {
    [_moviePlayer stop];
} 
```

停止播放器`skipVideo`将导致`MPMovieFinishReasonPlaybackEnded`通知（在模拟器和设备上）。现在设置播放器的contentUrl时，不会`MPMovieFinishReasonPlaybackEnded`引起其他通知，所以`moviePlayBackDidFinish`只调用一次；

在播放下一个视频（在`playNextVideo`）之前，你必须打电话

```
[_moviePlayer prepareToPlay]; 
```

这对我来说很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:38:11.290

您可以为下一首曲目创建新播放器：

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: _movieUrl];
if (player)
{
    [self setMoviePlayer:player];
}
[self.moviePlayer play]; 
```

代替

```
self.moviePlayer.contentURL = _movieUrl; 
```

通知`MPMoviePlayerPlaybackDidFinishNotification`将调用一次。

# java - 将对象转换为反射类和方法

> ID：11289403
> 
> 赞同：-2
> 
> 时间：2012-07-02T07:31:39.097
> 
> 标签：java, jakarta-ee, reflection

我正在尝试的一种正常形式是这样的。

```
MyClassFacadeLocal cls = new MyClassFacadeLocal();
List allMyClass = cls.findAll();
Iterator it = allMyClass.iterator();
while(it.haxNext()) {
    MyClass Obj = (MyClass)it.next();
    out.println(obj.getTitle());
} 
```

现在，我正在创建一个全局方法的问题，它可以处理这种情况的几种情况。为此，我将传递实体类名称、方法名称和方法返回的列表`.findAll()`。如何使用反射解决这个问题。我尝试的非常粗糙，当然没有奏效。

```
List allMyClass; //I will have passed this before
Iterator it = allMyClass.iterator();
while(it.hasNext()) {

    try {
        Class<?> c = Class.forName(this.getEntityClassName());
        c.cast(it.next());
        Method method = c.getDeclaredMethod("getTitle");
        String title = method.invoke(c, null).toString();
    } catch(Exception e) {
    }

} 
```

给出：`"object is not an instance of declaring class"`错误。但我相信这是一个使用缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:43:33.227

我看到的第一眼缺陷是您没有分配

```
c.cast(it.next()); 
```

到新变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:53:03.920

真的，你不应该使用反射来做到这一点。`getTitle()`使您的所有实体都使用一个方法实现一个通用接口：

```
public interface HasTitle {
    public String getTitle();
}

public class MyClass1 implements HasTitle {
    // ...

    @Override
    public String getTitle() {
        return this.title;
    }
}

public class MyClass2 implements HasTitle {
    // ...

    @Override
    public String getTitle() {
        return this.title;
    }
}

...

/**
 * This method can be invoked withg a List<MyClass1> or with a List<MyClass2>
 * as argument, since MyClass1 and MyClass2 both implement HasTitle
 */
public void displayTitles(List<? extends HasTitle> entities) {
    for (HasTitle entity : entities) {
        out.println(entity.getTitle();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:59:05.187

`Class.forName`您的代码通过使用和使用错误的反射方法做了太多工作`getDeclaredMethod`——没有考虑到继承的方法。该`c.cast`行没有做任何事情——它只是断言该对象是它自己的类的一个实例。

使用此代码：

```
public static void printProp(List<?> xs, String methodName) {
  try {
    for (Object x : xs)
      System.out.println(x.getClass().getMethod(methodName).invoke(x));
  } catch (Exception e) { throw new RuntimeException(e); }
} 
```

# ruby-on-rails - Rails：如果它们不存在，则创建系统所需的记录

> ID：11289410
> 
> 赞同：0
> 
> 时间：2012-07-02T07:32:16.850
> 
> 标签：ruby-on-rails, records, legacy-code

我正在开发一个必须与现有数据库和其他遗留应用程序集成的应用程序。在整个遗留应用程序中，隐含假设某些表中的某些记录存在。

例如，遗留代码假定名称为“Valid”的记录存在于表“statuses”中，并且用户名“System”的记录存在于用户表中。

当我深入研究遗留代码时，我正在写下这些隐含的假设以使其明确，以便我能够：

*   设置一个小型开发数据库，​​而不是使用非常非常庞大的生产数据库的转储；

*   设置一个暂存数据库（同样，没有来自生产的无数记录）；

*   在干净、可预测的数据库中运行测试。

*   是幂等的，不要弄乱现有的数据库。

所以问题是：如果系统记录不存在，你会用什么来创建它们？你会选择 Rails 迁移、种子、初始化程序还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:13:22.720

我认为种子将是去这里的方式。

# actionscript-3 - TabNavigator 内容宽度不等于 TabNavigator 本身

> ID：11289421
> 
> 赞同：0
> 
> 时间：2012-07-02T07:33:12.137
> 
> 标签：actionscript-3, apache-flex, flex3

内容（这里是VBox）与Tab不对齐，换一种说法，内容被拉长了一个像素（红色边框比Tab宽），如下图所示： ![在此处输入图像描述](../Images/662c294060b764a0304f31df2fa76c0d.png)
***那么如何解决这个问题?***

代码片段：

```
<mx:Application
        xmlns:mx="http://www.adobe.com/2006/mxml"
        layout="vertical"
        verticalAlign="middle"
        backgroundColor="white"
        >
    <mx:TabNavigator id="tn"
                 width="300"
                 height="300"
                tabWidth="{tn.width/tn.numChildren}"
                borderStyle="solid"
                borderColor="#ff0000"
                backgroundColor="#ffffff"
                paddingTop="0">
            <mx:VBox id="vb1" width="100%" label="Tab 1" backgroundColor="#ffffff">
                <mx:Label text="width:{vb1.width}, height:{vb1.height}" />
            </mx:VBox>
            <mx:VBox id="vb2" width="100%" label="Tab 2" backgroundColor="#00ffff">
                <mx:Label text="width:{vb2.width}, height:{vb2.height}" />
            </mx:VBox>
        </mx:TabNavigator>
    </mx:Application> 
```

# javascript - 使用 :not 选择除具有特定类的框内之外的所有元素

> ID：11289425
> 
> 赞同：1
> 
> 时间：2012-07-02T07:33:31.730
> 
> 标签：javascript, jquery, css, jquery-selectors

我有一个覆盖层，我想隐藏在`mousedown`它外面。

这是我尝试过的，但不幸`:not`的是选择器没有按我预期的那样工作。

```
$('body:not(.overlay)').one('mousedown',function(){
        //hide overlay here
}); 
```

我也试过`$('* :not(.overlay)')`但同样的问题。

即使在覆盖框内单击，覆盖也会隐藏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:36:04.230

```
$(document).on( "mousedown.hideoverlay", function(e){
    if( $(e.target).closest(".overlay").length === 0 ) { //overlay wasn't clicked.
        //hide overlay
        $(document).off("mousedown.hideoverlay");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:05:52.890

如果您的选择器`body:not(.overlay)`没有 class ，则它与 body 元素匹配`overlay`，我假设您的意思是它的后代没有 class `overlay`：

```
$('body :not(.overlay)'); //note the space - descendant selector 
```

这种赋值的问题在于它匹配了太多的元素（特别是选定元素的父元素）。从技术上讲，即使单击任何容器`div`都会匹配选择器[fiddled](http://jsfiddle.net/ovfiddle/eJCZn/2/)。发生这种情况是因为即使单击具有`overlay`类的元素也会继续传播 DOM。

我同意这里的其他建议，即，如果选择器不匹配，则适合听取所有点击并且*不执行任何*操作，但是阻止事件传播可能会干扰页面的其余逻辑。

我宁愿提倡一种方法，其中存在可以单击的“可叠加”项目的明确子集 - 并使用`:not(.overlay)`选择器过滤它们：

```
$('.some-generic-container-name:not(.overlay)')... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:41:42.227

试试 .not() 函数：[http](http://api.jquery.com/not/) ://api.jquery.com/not/ 。它专门从选定的组中删除元素，这可能是您遇到的问题。不必做复杂的 if 等来解决这个问题

```
$('*').not('.overlay').on('mousedown', function(){
    alert("here");
}); 
```

### 编辑

嘿，没有完全阅读问题：

```
$(document).on('mousedown', function(e){
   var target = $(e.target);
   if(!target.parents().hasClass('overlay') && !target.hasClass('overlay')){
      // hide stuff
   }
}); 
```

编辑：我更喜欢使用点击这里（不知道为什么）：

```
$(document).on('click', function(e){
   var target = $(e.target);
   if(!target.parents().hasClass('overlay') && !target.hasClass('overlay')){
      // hide stuff
   }
}); 
```

在我看来它看起来更好，称我为怪...

# objective-c - 可以将soap web 服务转换为xml 格式吗？

> ID：11289431
> 
> 赞同：-6
> 
> 时间：2012-07-02T07:33:53.230
> 
> 标签：objective-c, ios, xcode, web-services, soap

可以将soap web 服务转换为xml 格式吗？

我想在 Iphone 应用程序中使用肥皂网络服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:44:16.637

```
is possible to convert soap web services to xml format? 
```

来自维基百科：

> SOAP，最初定义为简单对象访问协议，是一种协议规范，用于在计算机网络中实现 Web 服务时交换结构化信息。它的消息格式依赖于可扩展标记语言 (XML) (...)

# asp.net-mvc-3 - 从ajax打开保存，保存对话框

> ID：11289438
> 
> 赞同：1
> 
> 时间：2012-07-02T07:34:24.350
> 
> 标签：asp.net-mvc-3, asp.net-ajax

当我使用

window.location = '<%= Url.Action("DownloadFile", "Home") %>?fileId=id,

我完全在不同的屏幕上获取内容

但是如何将它作为弹出窗口打开，例如打开，保存，另存为对话框？

我正在点击返回 File 对象的 ActionResult DownloadFile()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:36:28.027

您可以使用[File](http://msdn.microsoft.com/en-us/library/dd470835.aspx)方法的第三个参数来指定文件名。当用户导航到此操作时，这将具有将`Content-Disposition`HTTP 响应标头设置为`attachment`弹出“另存为”对话框的效果：

```
public ActionResult DownloadFile(string fileId)
{
    byte[] file = ...
    // TODO: adjust the MIME type and filename extension to your case accordingly
    return File(file, "text/plain", "foo.txt");
} 
```

然后：

```
var id = '1234';
window.location.href = '<%= Url.Action("DownloadFile", "Home") %>?fileId=' + id; 
```

会工作得很好。

# perl - 在 bash 命令行上测试日期时间间隔的工具/脚本

> ID：11289445
> 
> 赞同：2
> 
> 时间：2012-07-02T07:34:53.613
> 
> 标签：perl, excel, bash, datetime, command-line

我已经对看起来像这样的数据进行了排序（使用*ssgrep*从 MS Excel 转储到命令行）：

```
2012-06-27T22:55:00
2012-06-27T23:00:00
2012-06-27T23:05:00
2012-06-27T23:10:00
2012-06-27T23:15:00
2012-06-27T23:20:00
2012-06-27T23:25:00
2012-06-27T23:30:00 
```

现在我想将它传送到一个脚本（或任何命令行工具）中，该脚本测试所有值是否确实是有效日期，以及它们之间是否存在任何不是 5 分钟间隔的间隔。（我需要对每隔 1 小时采样的不同数据集做同样的事情）

是否有可用于命令行的工具可以做到这一点？我知道用 R 或 Perl 编写一个小脚本很容易（事实上我已经开始编写这个程序了）。但也许已经在 linux/solaris 上预装了一个我不知道的小实用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:44:51.003

我想没有准备好解决您的任务的工具，但是可以使用 Perl/Python oneliner（或非常小的脚本）。

```
$ cat 1.pl
use Date::Parse;

while(<>) {
    next if /^\s*$/;
    $time = str2time($_);
    if ($time) {
        print $time,"\n";
        if ($last and $time - $last != 300) {
            print "delta is wrong: ".($last-$time)."\n";
        }
        $last = $time;
    }
    else {
        print "not a date","\n";
    }
}

$ cat 1.txt 
2012-06-27T22:55:00
2012-06-27T23:00:00
wrong
2012-06-27T23:05:00
2012-06-27T23:10:00
2012-06-27T23:15:01
2012-06-27T23:20:00
2012-06-27T23:25:00
2012-06-27T23:30:00

$ cat 1.txt | perl 1.pl
1340830500
1340830800
not a date
1340831100
1340831400
1340831701
delta is wrong: -301
1340832000
delta is wrong: -299
1340832300
1340832600 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:30:20.923

如果您已经使用过 Bash，那么从逻辑上讲，您需要在脚本中继续使用 Bash（当然如果可能的话）。

```
(your grep etc commands) | while read date; do
   curDate=$(date +%s -d "$date" 2> /dev/null);
   if [ "$curDate" != "" ]; then
      if [[ "$last" != "" && $((curDate - last)) -ne 300 ]]; then
         echo "wrong delta: " $((curDate - last));
      fi
      last=$curDate;
   else
      echo "not a date";
   fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:44:44.390

编辑：第二次尝试：

```
from datetime import datetime, timedelta
import dateutil.parser

# fake console input
input = "2012-06-27T22:55:00 \
2012-06-27T23:00:00 \
2012-06-27T23:05:00 \
2012-06-27T23:10:00 \
2012-06-27T23:15:00 \
2012-06-27T23:20:00 \
2012-06-27T23:25:00 \
2012-06-27T23:30:00"

def parse(s):
    """Returns datetime if parseable, otherwise None"""
    try:
        return dateutil.parser.parse(s)
    except ValueError:
        return None # not valid date string

# parse the times, remove Nones
dates = filter(None, (parse(i) for i in input.split()))

# pair every second datetime together
dates = zip(dates[0::2], dates[1::2])

# print every datetime pair that has a delta of exactly five minutes
for d in dates:
    if (d[1] - d[0]).seconds == (5*60):
        print d[0]
        print d[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:34:23.017

这是我自己对问题的重量级解决方案（正在进行中）。感谢所有做出贡献的人。

```
#!/usr/bin/env perl
# This script checks if all input date values have a delta of 
# say, 5 minutes to the previous date value.
#
# $Id: test_datetintervals.t 1804 2012-08-07 10:35:48Z knb $
#
#  for f in $(ls -1 *std--ytd--2012-m01*xlsx); do echo ""; echo "$f"; ssgrep 2012- $f | test_datetintervals.t -num 60 -comm "$(basename $f)"; done
#

# ssgrep 2012 Monitoring_DailyAvg.min--2008-01-01--2012-11-01.txt.xlsx | grep -v "2012.15" | ./test_datetintervals.t -num 0 -interval day -pat \'%m/%d/%Y

use Modern::Perl;

use Getopt::Long;
use File::Basename;
use Carp qw (carp croak confess cluck);
use lib '/config';
use lib 'T:';
use lib '/lib/';    # wb3

use Pod::Usage;
use Test::More;
use DateTime;
use DateTime::Format::Strptime;

my $interval = "minute";                                                           # 2012-06-27T23:05:00
my $n        = 5;
my $comment = "";
my $help;
my $man;
my $pat = '%FT%T', #  2012-10-09T17:00:00
#my $pat = "'%m/%d/%Y", #  09/27/2012
my $argcnt = scalar(@ARGV);
GetOptions( 'num=i' => \$n, 'interval:s' => \$interval, 'comment:s' => \$comment,    'help|?'          => \$help,
    man               => \$man, 'pattern:s' => \$pat ) or pod2usage(2);
my $fn = basename($0);

my $msg2 = "This script must be part of a unix pipe. Script checks if all input date values have a delta of $n ${interval}s to the previous date value.";

pod2usage(
    -message    => "$msg2\nCall $fn  --man  to see full documentation",
    -exitstatus => 1
  )
  if $help;

my $msg = <<'MSG';
# Sample calls:
#
#  for f in $(ls -1 *std--ytd--2012.txt.xlsx); do echo ""; echo "$f"; ssgrep 2012- $f | test_datetintervals.t -num 60 -comm "$(basename $f)"; done
#

MSG

pod2usage( -message => "$msg2\n\n$msg", -exitstatus => 0 ) if $man;
pod2usage( -message => "# \n!!!! Script was called with no arguments- but this cannot work.\n\n $msg2\n\n$msg", -exitstatus => 0 ) if $argcnt == 0;

my $Strp = new DateTime::Format::Strptime(
    pattern   => $pat,
    locale    => 'de_DE',
    time_zone => 'floating',
    on_error  => \&my_carp
);

note($msg2);
my $line;
my $prev;
my $okflag = 1;
my $i = 0;
while (<>) {
    $line = $_;
    chomp $line;
    my $dt = $Strp->parse_datetime($line);

    if ( !$dt ) {
        note "Line $.: cannot parse '$line' to datetime object: $!";
    }
    if ( !$prev ) {
        note "Line $.: previous value not found/not applicable!";
        note $dt->datetime();
    } else {
        my $duration = $dt->delta_ms($prev);
        my $diff     = $duration->in_units("${interval}s");
        if ( $diff != $n ) {
            fail( "$.: $n $interval interval between " . $prev->datetime() . " and " . $dt->datetime() );
            note "prev: " . $prev->datetime();
            note "    : " . $dt->datetime();
            note "diff: $diff ${interval}s";
            note "";
            $okflag = 0;
        }
        $i++;

    }

    $prev = $dt;
}
if ($okflag){
    ok(1, "no gaps of $n ${interval}s detected! $comment");
    note "";
}
note("done testing '$comment', about $i lines");
note "";
done_testing();

sub my_carp {

    carp " line $.: Something wrong with " . $_;

    note  $_[1];
    return 1; # 0 for continue

}

=pod

usage: $fn.pl [-?] [long options...]
    -? --usage --help  Prints this usage information.
    --man               
    --num=i    # 5
    --interval # minutes           
    --comment           
    --pattern  #'%FT%T', #  2012-10-09T17:00:00
    --overwrite (or nooverwrite)
=cut 
```

# nhibernate - NHibernate Projections - 如何从关联中投影一个值

> ID：11289446
> 
> 赞同：1
> 
> 时间：2012-07-02T07:34:55.643
> 
> 标签：nhibernate

我试图从一个实体的关联中投射一个单一的价值，但没有运气。在下面的查询中只需要来自 TrainerAddress的**城市名称。**Trainer 地址被映射为 Trainer 的一个组件。

```
session.QueryOver<Trainer>()
   .JoinAlias(x=>x.TrainerAddress.City, ()=> cityAlias, JoinType.LeftOuterJoin)
   .OrderBy(x => x.Name).Asc
   .SelectList(list => list
        .Select(x => x.Id).WithAlias(() => dto.Id)
        .Select(x => x.Name).WithAlias(() => dto.Name)
        .Select(x => x.TrainerAddress.City.Name).WithAlias(() => dto.City))//issue projecting here
  .TransformUsing(Transformers.AliasToBean<TrainerDTO>())
  .List<TrainerDTO>(); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:17:39.513

您正在为 TrainerAddress.City 指定别名，但您没有在任何地方使用该别名？我不是 100% 确定 NHibernate 是否在 QueryOver 中很好地支持组件，我知道使用 Criteria 存在一些问题，但也许这会起作用：

```
session.QueryOver<Trainer>()
   .JoinAlias(x=> x.TrainerAddress.City, ()=> cityAlias, JoinType.LeftOuterJoin)
   .OrderBy(x => x.Name).Asc
   .SelectList(list => list
        .Select(x => x.Id).WithAlias(() => dto.Id)
        .Select(x => x.Name).WithAlias(() => dto.Name)
        .Select(x => cityAlias.Name).WithAlias(() => dto.City))
  .TransformUsing(Transformers.AliasToBean<TrainerDTO>())
  .List<TrainerDTO>(); 
```

# android - Android：使画廊无限循环图像

> ID：11289448
> 
> 赞同：0
> 
> 时间：2012-07-02T07:35:23.207
> 
> 标签：android, android-gallery

我在我的项目中使用了一个画廊，我在其中添加了四个图像，我希望它从右侧和左侧都是无限的。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:45:22.897

主要思想是，在您的`getView`方法中，您必须使用

```
position = position % imagesArray.length;
if (position < 0)
    position = position + imagesArray.length; 
```

**imagesArray**是保存 res 文件夹中图像的数组。例如：

```
public class CircularGallery extends Activity {
/** Called when the activity is first created. */
private Integer[] imagesArray = { R.drawable.picture1, R.drawable.picture2, R.drawable.picture3, R.drawable.picture4, R.drawable.picture5, R.drawable.picture6 , R.drawable.picture7   }; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Gallery g = (Gallery) findViewById(R.id.gallery); 
    g.setAdapter(new ImageAdapter(this)); 

    g.setOnItemClickListener(new OnItemClickListener() { 
        public void onItemClick(AdapterView parent, View v, int position, long id) { 
            if (position >= imagesArray.length) { 
                position = position % imagesArray.length; 
            } 
            Toast.makeText(CircularGallery.this, "" + position, Toast.LENGTH_SHORT).show(); 
        } 
    }); 

}

public class ImageAdapter extends BaseAdapter { 
    int mGalleryItemBackground; 
    private Context mContext; 

    public ImageAdapter(Context c) { 
        mContext = c; 
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1); 
        mGalleryItemBackground = a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 0); 

        a.recycle(); 
    } 

    public int getCount() { 
        return Integer.MAX_VALUE; 
    } 

    public Object getItem(int position) { 
        if (position >= imagesArraylength) { 
            position = position % mImageIds.length; 
        } 
        return position; 
    } 

    public long getItemId(int position) { 
        if (position >= imagesArray.length) { 
            position = position % imagesArray.length; 
        } 
        return position; 
    } 

    public View getView(int position, View convertView, ViewGroup parent) { 
        ImageView i = new ImageView(mContext); 
        if (position >= imagesArray.length) { 
            position = position % imagesArray.length; 
        } 
        i.setImageResource(imagesArray[position]); 
        i.setLayoutParams(new Gallery.LayoutParams(80, 80)); 
        i.setScaleType(ImageView.ScaleType.FIT_XY); 
        i.setBackgroundResource(mGalleryItemBackground); 
        return i; 
    } 

    public int checkPosition(int position) { 
        if (position >= imagesArray.length) { 
            position = position % imagesArray.length; 
        } 
        return position; 
    } 
}} 
```

此外，一些开发人员已经完成了这样的功能，您可以在他们的博客上找到源代码

*   [http://abhinavasblog.blogspot.com/2011/09/android-infinite-looping-gallery.html](http://abhinavasblog.blogspot.com/2011/09/android-infinite-looping-gallery.html)

*   [http://blog.blundellapps.com/infinite-scrolling-gallery/](http://blog.blundellapps.com/infinite-scrolling-gallery/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:49:12.960

如果要设置图像显示在右侧，只需设置`g.setSelection(image)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:41:09.123

我的第一个猜测是更改适配器数据，即如果您检测到您在“右边缘”，然后获取您的第一张图像并将其添加到末尾，然后拍摄第二张图像，依此类推......

# java - 显示标签在 tomcat 中不起作用。有版本问题吗？

> ID：11289453
> 
> 赞同：1
> 
> 时间：2012-07-02T07:35:46.320
> 
> 标签：java, tomcat, displaytag

我创建了带有 EAR 参考的动态 Web 模块，以将其部署在 Websphere 6.1 中。然后我们被要求将它放在 Tomcat 5.5 服务器中。显示标签未从操作类填充数据。

我的java版本指向websphere6.1版本，struts2，displaytag 1.2 tomcat 5.5。

让我知道问题？有兼容性问题吗？

我在 websphere 6.1 中遇到了 struts2 的兼容性问题。Tomcat有类似的东西吗？

# python - 改进机器人正则表达式

> ID：11289455
> 
> 赞同：1
> 
> 时间：2012-07-02T07:35:47.427
> 
> 标签：python, regex

我为提取机器人链接制作了以下正则表达式：

```
re.compile(r"/\S+(?:\/+)") 
```

我得到以下结果：

```
/includes/
/modules/
/search/
/?q=user/password/
/?q=user/register/
/node/add/
/logout/
/?q=admin/
/themes/
/?q=node/add/
/admin/
/?q=comment/reply/
/misc/
//example.com/
//example.com/site/
/profiles/
//www.robotstxt.org/wc/
/?q=search/
/user/password/
/?q=logout/
/comment/reply/
/?q=filter/tips/
/?q=user/login/
/user/register/
/user/login/
/scripts/
/filter/tips/
//www.sxw.org.uk/computing/robots/ 
```

如何排除具有两个斜杠的链接，例如：

```
 //www.sxw.org.uk/computing/robots/
 //www.robotstxt.org/wc/
 //example.com/
 //example.com/site/ 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:38:32.133

我建议只添加一个`if`条件：

```
 if not line.startswith(r'//'):
     #then do something here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:59:48.853

假设要匹配的字符串出现在示例中的每一行上，我们可以锚定正则表达式并使用负前瞻

```
^(?!//)/\S+(?:\/+) 
```

请务必设置使 ^ 匹配行首的正则表达式修饰符。

我的 Python 生锈了，但应该这样做

```
for match in re.finditer(r"(?m)^(?!//)/\S+(?:/+)", subject):
    # match start: match.start()
    # match end (exclusive): match.end()
    # matched text: match.group() 
```

# typo3 - TYPO3 钩子，用于修改数据库中的 TCE 数据

> ID：11289456
> 
> 赞同：0
> 
> 时间：2012-07-02T07:35:47.787
> 
> 标签：typo3

我正在寻找一个钩子，让我在后端编辑我的扩展时修改数据库输出，然后再将其打印到 TCE 字段。

我在 class.t3lib_tceforms.php 中尝试了 getSingleField_preProcess，但它不包含任何与我的扩展相关的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:33:04.843

`getSingleField_preProcess`应该是你想要的正确钩子。我认为问题在于您的函数被调用来记录**每个**表，而不仅仅是您的。您必须根据正在呈现的表来区分何时进行任何处理。表的名称将传递给您的`getSingleField_preProcess()`方法。

你的**ext_localconf.php**应该注册你的钩子：

```
$GLOBALS ['TYPO3_CONF_VARS']['SC_OPTIONS']['t3lib/class.t3lib_tceforms.php']['getSingleFieldClass'][] = 'tx_yourextension_be'; 
```

...其中**tx_yourextension_be**是为后端处理指定的类的名称。然后这个类必须包含`getSingleField_preProcess()`方法：

```
public function getSingleField_preProcess($table, $field, &$row, $altName, $palette, $extra, $pal, &$pObj) {
  // ...processing...
} 
```

如您所见，有几个变量被传递给您的方法。`$table`包含已处理记录所属的表的名称。`$field`是正在呈现的字段的名称。`$row`包含您可以操作的整个记录​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:12:19.767

可能你想使用`TCEmain`钩子

```
function processDatamap_preProcessFieldArray(array &$incomingFieldArray, $table, $id, t3lib_TCEmain &$reference) {
    if ($table == 'tx_yourext_table') {
        $a = $incomingFieldArray['field_a'];
        $b = $incomingFieldArray['field_b'];            
        $incomingFieldArray['field_c'] = $a . ' ' . $b;
    }
} 
```

或/与

```
function processDatamap_afterDatabaseOperations($status, $table, $id, $fieldArray, &$reference) {
    if ($table == 'tx_yourext_table') {
        if ($status == 'update') {
            $this->doSomethingWithRecordAfterUpdate($id);
        }
    }
} 
```

当然你需要注册`ext_localconf.php`你的扩展的钩子，例如：

```
$GLOBALS ['TYPO3_CONF_VARS']['SC_OPTIONS']['t3lib/class.t3lib_tcemain.php']['processDatamapClass']['yourext']
         = 'EXT:yourext/class.tx_yourext_tcemain.php:tx_yourext_tcemain'; 
```

# html - 在 img 标签中显示 HTML 预览

> ID：11289461
> 
> 赞同：-3
> 
> 时间：2012-07-02T07:36:22.493
> 
> 标签：html

如果我将 src 传递给 img 标签，我可以看到 HTML 预览吗？

```
<img src="http://www.abc.com/uploads/reports/test.html" style="max-height:150px; max-width:150px"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:40:39.843

不，你不能用图像来做到这一点。使用[框架](http://www.w3schools.com/tags/tag_frame.asp)可以帮助你

```
<frame src="frame_a.htm" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:39:47.280

最简洁的答案是不。Img 标签仅用于图像。这是他们唯一会展示的东西。

# autohotkey - 如何在某些情况下重新映射键，而在其他情况下不使用 autohotkey 重新映射？

> ID：11289463
> 
> 赞同：1
> 
> 时间：2012-07-02T07:36:25.407
> 
> 标签：autohotkey

我想`alt+e`在 AutoCAD 中打开 caps 时重新映射。

而当`capslock`未开启时，`alt+e`应打开菜单编辑。

我使用这样的脚本

```
<!e::
if(GetKeyState( "CAPSLOCK", "T" ))
{
    SendInput erase{space}wp{space}
}
else
{
    Send !e
} 
```

当我打开时`capslock`，重新映射键就可以了。

当我关闭`capslock`和`alt+e`时，菜单编辑打开，但立即关闭。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:50:56.050

您需要`$`在热键的开头使用 a 来防止`!e`else 块中的 the 触发的无限循环。您还需要`Return`在热键末尾添加一个以防止脚本继续进入此热键下方的内容。

```
$!e::
if GetKeyState( "CapsLock", "T" )
    Sendinput, erase{space}wp{space}
else
    Sendinput, !e
Return 
```

（仅当 if/else 块超过一行时才需要括号。）

除此之外，可能的问题是它是一个也设置为发送 alt 的 alt 热键。
我说这是一个问题，因为如果您按住 alt，它会激活菜单，
然后脚本会发送 alt，这将与此冲突。
正如里卡多所说，编写脚本的理想方法是使用`#IF`命令（仅包含在 AHK_L 中）。

```
#If GetKeyState("CapsLock", "T") and WinActive("AutoCAD")

!e:: SendInput, erase{space}wp{space}

#If 
```

请注意，您可以将[WinActive()](http://l.autohotkey.net/docs/Functions.htm#WinActive)函数添加到`#If`命令的表达式中。首先尝试不使用它，并且还要意识到应用程序的标题必须始终完全是“AutoCAD”才能正常工作。我建议使用 AHK 的窗口间谍找到 AutoCad 的 ahk_class，而不是使用标题。

如果仍然无法正常工作，则 AHK 的发送速度可能比 AutoCAD 想要接收的速度快。
可以在[此处](https://stackoverflow.com/a/10130800/1217270)找到有关如何处理的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:56:35.213

尝试将您的 else 块更改为：

```
Send, {ALTDOWN}e{ALTUP} 
```

我不依赖这些符号在 AutoHotKey 中发送击键。

# linux - 如何模拟伪造的第三方响应进行测试

> ID：11289465
> 
> 赞同：1
> 
> 时间：2012-07-02T07:37:07.593
> 
> 标签：linux, api, unit-testing, testing

有没有办法可以生成假的第三个 API 响应？

为什么我要生成虚假的 API 响应？

1.  一些第三个 API 有调用限制。例如推特。
2.  使用原始第三方 API 进行测试会增加网络延迟。
3.  如果第三方宕机，测试不应该受到影响。
4.  每次编写测试用例时生成相同的响应。

目前我们正在通过手动编写代码为 API 生成相同的响应来解决这个问题。但它是不可行和可扩展的。如果第三方正在更改 API，我们需要重新编写完整的代码，并且随着第三方数量的增加。这将增加编写此代码的大量时间。

我正在寻找什么类型的解决方案？

一段时间的网络嗅探或模拟器，我可以在其中运行我的应用程序一次，我可以保存第三方 API 生成的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:42:06.273

我认为，有适合您的工具。看看[https://github.com/skrill/holoserve](https://github.com/skrill/holoserve)

它是用 Ruby 编写的，但作为独立服务运行可以在 HTTP 级别伪造任何 http 服务。您可以定义请求/响应对及其变体（例如不同的参数）。

我在测试期间使用它来模拟 wbeservices。

# perl - 错误测试 perl 模块 sleepycat dbxml

> ID：11289466
> 
> 赞同：1
> 
> 时间：2012-07-02T07:37:09.097
> 
> 标签：perl, module, berkeley-db-xml

有没有人遇到过并用 sleepycat dbxml 模块解决了这个问题。

我成功构建了模块，但是当我运行“make test”时出现错误

```
t/XmlManager.t ............. UNIVERSAL->import is deprecated and will be removed 
in a future perl at 
~/Downloads/install/dbxml-.5.16/dbxml/src/perl/DbXml/../blib/lib/Sleepycat/DbXml.pm 
line 461

UNIVERSAL->import is deprecated and will be removed in a future perl at
~/Downloads/install/dbxml-2.5.16/dbxml/src/perl/DbXml/../blib/lib/Sleepycat/DbXml.pm
line 519

t/XmlManager.t ............. 1/92 failed
Error: The flags DB_READ_UNCOMMITTED and DB_TXN_NOT_DURABLE cannot be
used directly, you must set these flags using 
XmlContainerConfig.setReadUncommitted and 
XmlContainerConfig.setTransactionNotDurable. in t/XmlManager.t, 
line 367

# Looks like you planned 92 tests but ran 53.
# Looks like your test exited with -1 just after 53.

t/XmlManager.t ............. Dubious, test returned 255 (wstat 65280, 0xff00)
Failed 39/92 subtests 
```

有谁知道这是关于什么的？

# tableview - 添加新行后 EDIT 方法不起作用

> ID：11289468
> 
> 赞同：3
> 
> 时间：2012-07-02T07:37:11.277
> 
> 标签：tableview, javafx-2

我想在将新行添加到 TableView 后开始编辑。

我从 Oracle 网站复制了示例：[Using JavaFX UI Controls - 13 Table View](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJAGDAHE "编辑表格中的数据")。然后我放置了额外的按钮来添加新行并为按钮定义操作。

```
final Button addButton = new Button("Add");
addButton.setOnAction(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent arg0) {
        Person p = new Person("", "", "");
        table.getItems().add(p);                
        table.getSelectionModel().select(p);
        table.edit(table.getSelectionModel().getSelectedIndex(), table.getColumns().get(2));
    }
}); 
```

结果我可以看到选定的新行，但表格没有在第三列开始编辑。

我有类似的方法来编辑现有的行，它工作正常。

```
final Button editButton = new Button("Edit");
editButton.setOnAction(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent arg0) {
        table.edit(table.getSelectionModel().getSelectedIndex(), table.getColumns().get(2));
    }
}); 
```

你能帮我做错什么吗？

# asp.net - 如何处理 url 搜索词中的 web.config

> ID：11289470
> 
> 赞同：4
> 
> 时间：2012-07-02T07:37:13.227
> 
> 标签：asp.net, asp.net-mvc, url-rewriting, url-routing

我正在 ASP.NET MVC3 中创建一个搜索页面。

调用动作的 url 是：

```
http://mydomain/Search?q=searchterm 
```

如果我搜索关键字“web.config”，它工作正常：

```
http://mydomain/Search?q=web.config 
```

但现在，我希望网址是：

```
http://mydomain/Search/searchterm 
```

我已经通过将路由添加到 global.asax 来完成此操作，但是当我搜索“web.config”时，就像`http://mydomain/Search/web.config`服务器将结束我的请求一样，因为它认为我正在请求搜索目录中的物理 web.config 文件。

无论如何让asp.net将url“search/{q}”中的{q}视为搜索操作的参数，而不是文件的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:43:03.780

在您`RegisterRoutes`的文件中，`Global.asax`您可以启用对现有文件的请求以通过路由引擎：

```
routes.RouteExistingFiles = true; 
```

请注意，如果您这样做，所有请求现在都将通过 ASP.NET MVC 路由引擎。因此，如果您不想看到损坏的图像或 javascript 和 CSS 引用，则需要明确排除它们：

```
routes.IgnoreRoute("scripts/{resource}.js");
routes.IgnoreRoute("content/{resource}.css");
routes.IgnoreRoute("iamges/{resource}.png");
routes.IgnoreRoute("iamges/{resource}.jpeg");
... 
```

此外，如果您在 IIS 7+ 中托管应用程序，则需要删除一些通常阻止您提供文件的安全过滤`web.config`器`.config`：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
      <requestFiltering>
        <fileExtensions>
          <remove fileExtension=".config"/>
        </fileExtensions>
        <hiddenSegments>
          <remove segment="web.config"/>
        </hiddenSegments>
      </requestFiltering>
    </security>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:47:24.863

您可以使用 IIS 中的 URL 重写器模块为您执行此操作；它将删除必要的逻辑，`Global.asax`并允许您在整个网站上使用它来简化 URL。

[重写器模块](http://learn.iis.net/page.aspx/460/using-the-url-rewrite-module/)

[添加重写器规则](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)

示例规则：

```
<rewrite>
  <rules>
    <rule name="Rewrite to search">
      <match url="^search/([_0-9a-z-]+)" />
      <action type="Rewrite" url="search.aspx?q={R:1}" />
    </rule>
  </rules>
</rewrite> 
```

# java - 当 ClassLoader 在 EJB jar 中并且属性文件处于战争状态时如何加载属性文件

> ID：11289473
> 
> 赞同：0
> 
> 时间：2012-07-02T07:37:20.650
> 
> 标签：java, classloader, websphere-7

我有这个问题。我想加载一个位于 war 文件中的属性文件，但类加载器在另一个 jar 文件中。但是它们被编译在一个耳朵文件中。当我将属性文件放在 jar 文件项目的 src 文件夹中时，它可以工作，但我想将它放在 Web-INF/Classes 中以备将来更新。

细节。

在 EAR EJB IBM Websphere 中编译

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:42:49.043

您的战争取决于您的 EJB，但 EJB 并不取决于您的战争。

因此，这是不可能的。

如果必须更新配置，则应将其外部化。您将无法在战争中修改文件。

一个好的做法是独立于环境生成 EJB jar 和 WAR。它将使您的开发团队能够在每个环境中部署相同的代码。他们只需要调整外部属性文件（数据库登录名/密码等）。

# javascript - 为什么这个事件跟踪器不起作用？

> ID：11289478
> 
> 赞同：1
> 
> 时间：2012-07-02T07:37:56.250
> 
> 标签：javascript, event-handling, onclick, google-analytics

当用户使用谷歌分析事件跟踪器单击提交按钮时，我正在尝试记录页面的 url。

我找到了一个可以完成这项工作的 javascript 函数，但我无法让它工作。有什么建议么？

我已经放弃了这是谷歌分析snippit下面的内容。

```
function recordOutboundLink(link, category, action) {  
    try {  
        var myTracker=_gat._getTrackerByName();  
        _gaq.push(['myTracker._trackEvent', ' + category + ', ' + action + ']);  
        setTimeout('document.location = "' + link.href + '"', 100)  
    }catch(err){}  
} 
```

并将其添加到 sumbit 按钮。

```
<a href="/confirmation.html" onClick="recordOutboundLink(this, 'Outbound Links', 'example.com'); return false;"> 
```

但谷歌分析没有记录任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:22:50.137

调用的几个问题`_trackEvent`——异步版本的语法应该是

```
`_gaq.push(['_trackEvent', category, action]);` 
```

此外，您似乎将旧式分析代码与异步式代码混合在一起——您不需要`_getTrackerByName`在这种情况下使用。

尝试以下版本：

```
function recordOutboundLink(link, category, action) {  
    try {  
        _gaq.push(['_trackEvent', category, action]);
        setTimeout('document.location = "' + link.href + '"', 100)  
    }catch(err){}  
} 
```

# c# - 代码首先添加具有多对多关系的实体

> ID：11289479
> 
> 赞同：0
> 
> 时间：2012-07-02T07:37:57.807
> 
> 标签：c#, asp.net, entity-framework, entity-framework-4

我有一个对象 Customer，它可以有多个客户类型，每个客户类型可以有多个客户。我是 EF 的新手，但设法添加了一个客户，但似乎也无法获得正确的语法来添加客户的客户类型。

我的客户类别（简化）：

```
public partial class Customer
{
        public virtual int Id { get; set;}
        public virtual string Name { get; set;}

    #region Navigation Properties

        public virtual ICollection<CustomerType> CustomerTypes
        { get; set; }

    #endregion
} 
```

顾客类型：

```
public partial class CustomerType
{

        public virtual int Id
        {
            get;
            set;
        }

        public virtual string Name
        {
            get;
            set;
        }

        #region Navigation Properties

        public virtual ICollection<Customer> Customers
        { get; set; }

        #endregion
} 
```

当我运行这个项目时，会创建一个包含 Customer_Id 和 CustomerType_Id 列的 CustomerTypeCustomer 表，所以这很好。

然后我像这样创建客户：

```
// code behind
var customer = new Customer();
customer.name = txtCustomerName.Text;

using (var context = new MyEntities())
{   
    context.Customers.Add(customer);
    context.SaveChanges();  
} 
```

我在这里查看了[Insert/Update Many to Many Entity Framework 。我该怎么做？](https://stackoverflow.com/questions/4253165/insert-update-many-to-many-entity-framework-how-do-i-do-it)并尝试对客户类型做类似的事情：

```
var customer = new Customer();
customer.name = txtCustomerName.Text;

// only starting with one customer type selected in a check box list
CustomerType customerType = context.CustomerTypes.FirstOrDefault(i => i.Id == 1);

using (var context = new MyEntities())
{
    // IncidentTypes throws Object reference not set to an instance of an object
    customer.CustomerTypes.add(customerType);

    context.Customers.Add(customer);
    context.SaveChanges();  
} 
```

我在这里遗漏了一些明显的东西吗？

提前致谢。

编辑：出于某种原因，我只有 .Add( 没有 AddToObject、AttachTo 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:00:49.207

您必须先初始化`CustomersTypes`集合。

```
customer.CustomerTypes = new List<CustomerType>(); 
```

您还可以将此初始化添加到您`Customer`的构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:07:58.673

这是一种方法：

```
var customer = new Customer();
customer.name = txtCustomerName.Text;

// only starting with one customer type selected in a check box list
//add Include there
CustomerType customerType = context.CustomerTypes.Include("Customers").FirstOrDefault(i => i.Id == 1);

using (var context = new MyEntities())
{
    // IncidentTypes throws Object reference not set to an instance of an object
    //customer.CustomerTypes.add(customerType);

    //context.Customers.Add(customer);
    customerType.Customers.Add(customer);
    context.SaveChanges();  
} 
```

# javascript - 有没有办法同时加载 javascript 脚本？

> ID：11289480
> 
> 赞同：1
> 
> 时间：2012-07-02T07:38:01.790
> 
> 标签：javascript

可能不是。但还是很高兴拥有它。很难相信现代标准不支持它。

**更新**：我想同时加载脚本而不是异步脚本执行。因此，如果要加载 10 个脚本（9 个小脚本，1 个大脚本） - 在这种情况下，大脚本不会“卡住”较小脚本的下载。

**Update2**：我`script`通过 javascript 添加 DOM 元素来加载脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:42:21.630

在 html5 中，你有`async`属性。

[HTML5 的 async Script 属性](http://davidwalsh.name/html5-async)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:41:21.633

如果您通过`<script>`交付的 HTML 中的标签引用它们，则由用户代理决定如何加载此资源，但每个现代浏览器都能够同时获取多个资源。有趣的是，他们可能会选择不一次获取多个*Javascript*文件 -[这个 Google 最佳实践文档](https://developers.google.com/speed/docs/best-practices/rtt#PutStylesBeforeScripts)暗示了原因，尽管具体行为取决于浏览器，

如果您通过其他 Javascript 文件中的逻辑以编程方式加载它们，那么可能不会 - Javascript 本质上是单线程的，因此没有两个脚本可以同时执行以触发请求。

# c++ - 使用设计模式时“指向函数的指针”的优点

> ID：11289481
> 
> 赞同：3
> 
> 时间：2012-07-02T07:38:05.843
> 
> 标签：c++, design-patterns, pointers

在 C++ 中，我们可以创建指向函数的指针。这样我们就可以将“指向函数的指针”作为参数传递给另一个函数。当我们考虑设计模式时，是否有任何特定的设计模式专门利用“指向函数的指针”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T07:43:19.333

任何使用回调的设计模式；例如访问者、策略和观察者。请注意，在 C++ 中，仿函数也可供您使用，并且通常是 STL 首选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:47:53.113

大多数您可以通过指向函数的指针来实现的任何事情，您都可以通过具有更好优化的仿函数来实现，或者通过虚拟方法来实现更好的 OO 设计。但是，对于 C 代码和 C++ 代码相互交互的狭窄用例，需要指向函数的指针。OO 设计模式仍然可以允许 C 代码参与该模式。而且，某些 C 接口只接受函数指针，因此使用这些 API 的 C++ 代码必须传入一个。

函数指针通常用作调用在某种订阅/发布模型（事件通知）中注册的某些代码的方法。例如，它可以用于*状态模式*`handle()`中的方法。

 *但是，它也可以用作一个简单的钩子来让代码在特定框架中运行。例如，`pthread_create`获取一个线程启动后要调用的函数指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:47:59.347

当某个功能的某个部分需要针对某些情况进行定制时，我通常会看到这样做。允许同一个函数有多种用途，这在 C++ 的 for_each 函数中得到了证明，该函数通过一个可迭代对象并将一个函数应用于它。它实际上只是允许更多可重用的代码。

在相关的说明中，C++ 标准库对其容器类使用了类似的设置。

例如：

```
template < class T, class Container = deque<T> > class stack; 
```

是堆栈类的声明。正如你所看到的，它接受一个可配置的参数来表示它的底层数据结构是什么，这类似于函数指针的使用方式。

编辑：或其他海报提到的回调。*

# wordpress - Wordpress：301 从一个子文件夹重定向到另一个同名的子文件夹

> ID：11289482
> 
> 赞同：0
> 
> 时间：2012-07-02T07:38:09.123
> 
> 标签：wordpress, .htaccess, redirect

我刚刚在一个已经活跃的博客上安装了一个 wordpress 多站点网络。它运作良好，但可以预见的是，我的固定链接有些混乱。原来的网址是这样的：

```
www.mydomain.com/blog/category/this-is-my-post/ 
```

多站点安装后，现在是：

```
www.mydomain.com/blog/blog/category/this-is-my-post/ 
```

我已经尝试了很多 htaccess-commands 只是让它们不起作用或陷入无限循环，因为它重复了 /blog/ 部分令人作呕。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:02:14.060

像这样的东西怎么样：

```
RewriteCond $1 !blog/blog
RewriteRule ^(.*)$ blog/$1 [QSA] 
```

# tree - 使用 Thrift 表达树结构

> ID：11289484
> 
> 赞同：2
> 
> 时间：2012-07-02T07:38:22.597
> 
> 标签：tree, thrift

我现在使用 Thrift 作为通信协议。我必须传递一个对象（树数据结构）来映射树数据结构。我想生成java代码。如何通过 Thrift 传输树数据结构，我通过 Tree 定义了一个对象，但 thrift 不允许这种方式，来自我的 thrift 文件：

```
struct MyObject {
1:i32 id,
2:i32 parentid,
3:string name,
4:list<MyObject> children
} 
```

但是，我从 Thrift 收到此错误：尚未定义类型“MyObject”。有什么解决方法吗？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:13:12.220

你可以试试这个。

```
struct TreeNode {
1:i32 id,
2:i32 parentid,
3:string name,
4:list<i32> childrenIds
}

struct Tree {
1:i32 rootId,
2:map<i32,TreeNode> nodes,
} 
```

使用这种方式，您可以获得可以解释为树的简单数据结构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T08:44:52.933

Thrift 不允许递归： [http](http://grokbase.com/t/thrift/user/0984cqwxen/recursive-datatypes) ://grokbase.com/t/thrift/user/0984cqwxen/recursive-datatypes 可能的解决方法由 user537862 编写

# linux - 在Linux中开始枚举之前插入USB设备的预通知？

> ID：11289485
> 
> 赞同：0
> 
> 时间：2012-07-02T07:38:23.660
> 
> 标签：linux, usb, enumeration

请帮助我，在 linux 中开始枚举之前，如何获得插入的 USB 设备的预先通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:47:02.027

您可以使用[libudev](http://www.freedesktop.org/software/systemd/libudev/)获取添加/删除设备的通知。

这是libudev的[教程](http://www.signal11.us/oss/udev/)。您也可以使用[此处](https://stackoverflow.com/questions/10979123/how-to-get-notifications-for-sd-card-events)的代码开始。

还有[libusb](http://www.libusb.org/)可用于 USB 事件/操作。

# android - 谷歌推送通知

> ID：11289487
> 
> 赞同：0
> 
> 时间：2012-07-02T07:38:25.110
> 
> 标签：android, cloud, google-cloud-messaging

刚刚 Google 推出了适用于 Android 的 Google Cloud Messaging。但这里的问题是最终用户必须至少有一个谷歌帐户才能使用这项服务。是否可以跳过 GCM 并发送推送通知最终用户或建议任何其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:56:13.623

**重要提示：** C2DM 已于 2012 年 6 月 26 日正式弃用。当时 C2DM 停止接受新用户和配额请求。C2DM 已被[Google Cloud Messaging for Android](http://developer.android.com/guide/google/gcm/index.html) (GCM) 取代。C2DM服务短期内会继续维持，但开发者必须使用GCM进行新的开发。我们还鼓励开发人员将现有的 C2DM 应用程序迁移到 GCM 以利用 GCM 功能。有关更多信息，请参阅 C2DM 到 GCM[迁移文档](http://developer.android.com/guide/google/gcm/c2dm.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:44:09.153

嗯，这是 C2DM 先决条件的一部分，不能跳过这个伙伴.. 谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T08:10:50.633

要使用 GCM 用户必须在 goggle 服务中注册。如果您仅通过 Google Play 分发您的应用程序，这不是问题。

有替代方案，但它们有很多缺点：发送短信（您必须付费）；实现自己的推送通知（通过轮询您的服务器） - 很容易犯一些错误并耗尽手机电池并且需要大量工作。

# c++ - 计算2模数的大幂的最快方法是什么

> ID：11289495
> 
> 赞同：8
> 
> 时间：2012-07-02T07:39:08.857
> 
> 标签：c++, c, algorithm, optimization, numbers

因为，我需要计算，而且它必须非常快！ 我目前的做法是：`1 <= *N* <= 1000000000``2^(*N*) mod 1000000007`

```
ull power_of_2_mod(ull n) {
    ull result = 1;
    if (n <= 63) {
        result <<= n;
        result = result % 1000000007;
    }
    else {
        ull one = 1;
        one <<= 63;
        while (n > 63) {
            result = ((result % 1000000007) * (one % 1000000007)) % 1000000007;
            n -= 63;
        }

        for (int i = 1; i <= n; ++i) {
            result = (result * 2) % 1000000007;
        }

    }

    return result;
} 
```

但它似乎不够快。任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T07:45:19.807

这会更快（C 中的代码）：

```
typedef unsigned long long uint64;

uint64 PowMod(uint64 x, uint64 e, uint64 mod)
{
  uint64 res;

  if (e == 0)
  {
    res = 1;
  }
  else if (e == 1)
  {
    res = x;
  }
  else
  {
    res = PowMod(x, e / 2, mod);
    res = res * res % mod;
    if (e % 2)
      res = res * x % mod;
  }

  return res;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T07:44:58.610

你可以解决它`O(log n)`。

例如，对于 n = 1234 = 10011010010（以 2 为底），我们有 n = 2 + 16 + 64 + 128 + 1024，因此 2^n = 2^2 * 2^16 * 2^64 * 2^128 * 2 ^ 1024。

请注意，2^1024 = (2^512)^2，因此，如果您知道 2^512，您可以通过几个操作计算 2^1024。

解决方案是这样的（伪代码）：

```
const ulong MODULO = 1000000007;

ulong mul(ulong a, ulong b) {
    return (a * b) % MODULO;
}

ulong add(ulong a, ulong b) {
    return (a + b) % MODULO;
}

int[] decompose(ulong number) {
    //for 1234 it should return [1, 4, 6, 7, 10]
}

//for x it returns 2^(2^x) mod MODULO
// (e.g. for x = 10 it returns 2^1024 mod MODULO)
ulong power_of_power_of_2_mod(int power) {
    ulong result = 1;
    for (int i = 0; i < power; i++) {
        result = mul(result, result);
    }
    return result;
}

//for x it returns 2^x mod MODULO
ulong power_of_2_mod(int power) {
    ulong result = 1;
    foreach (int metapower in decompose(power)) {
        result = mul(result, power_of_power_of_2_mod(metapower));
    }
    return result;
} 
```

请注意`O(log n)`，在实践中，`O(1)`对于`ulong`参数（如 log n < 63）；并且此代码与任何`uint`MODULO (MODULO < 2^32) 兼容，与 MODULO 是否为素数无关。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-26T02:51:01.823

此方法不使用 O(log(n)) 复杂度的递归。看一下这个。

```
#define ull unsigned long long
#define MODULO 1000000007

ull PowMod(ull n)
{
    ull ret = 1;
    ull a = 2;
    while (n > 0) {
        if (n & 1) ret = ret * a % MODULO;
        a = a * a % MODULO;
        n >>= 1;
    }
    return ret;
} 
```

这是来自[维基百科](http://en.wikipedia.org/wiki/Modular_exponentiation)的伪代码（参见*从右到左的二进制方法*部分）

```
function modular_pow(base, exponent, modulus)
Assert :: (modulus - 1) * (base mod modulus) does not overflow base
result := 1
base := base mod modulus
while exponent > 0
    if (exponent mod 2 == 1):
       result := (result * base) mod modulus
    exponent := exponent >> 1
    base := (base * base) mod modulus
return result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-11T06:55:09.023

它可以在 O((log n)^2) 中解决。试试这种方法： -

```
unsigned long long int fastspcexp(unsigned long long int n)
{
    if(n==0)
        return 1;
    if(n%2==0)
        return (((fastspcexp(n/2))*(fastspcexp(n/2)))%1000000007);
    else
        return ( ( ((fastspcexp(n/2)) * (fastspcexp(n/2)) * 2) %1000000007 ) ); 
} 
```

这是一种递归方法，速度非常快，足以满足大多数编程比赛的时间要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-13T15:36:30.413

如果您还想存储该数组，即。(2^i)%mod [i=0 到任何] 比：

```
long mod = 1000000007;
long int pow_mod[ele]; //here 'ele' = maximum power upto which you want to store 2^i
pow_mod[0]=1; //2^0 = 1
for(int i=1;i<ele;++i){
    pow_mod[i] = (pow_mod[i-1]*2)%mod;
} 
```

我希望它对某人有帮助。

# python - 如何使用python中的elementtree处理xml文件中格式不正确的字符

> ID：11289496
> 
> 赞同：3
> 
> 时间：2012-07-02T07:39:15.720
> 
> 标签：python, xml, xml-parsing, elementtree

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:56:37.533

Since `xml.parsers.expat.ParserCreate` supports only four encodings I would try them all. Those encodings are: `UTF-8`, `UTF-16`, `ISO-8859-1` (`Latin1`), and `ASCII` .

You can now run `ElementTree.parse` with the encoding like:

```
from xml.etree.ElementTree import ElementTree
from xml.parsers import expat
tree = ElementTree()
root = tree.parse(xml_file, parser=expat.ParserCreate('UTF-8') )
root = tree.parse(xml_file, parser=expat.ParserCreate('UTF-16') )
root = tree.parse(xml_file, parser=expat.ParserCreate('ISO-8859-1') )
root = tree.parse(xml_file, parser=expat.ParserCreate('ASCII') ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:06:38.147

There are two things you need to establish.

(a) is there an XML declaration and what does it say about the encoding?

(b) what are the actual bytes in the file used to represent these characters?

# maven-2 - Maven构建未运行

> ID：11289501
> 
> 赞同：1
> 
> 时间：2012-07-02T07:39:43.367
> 
> 标签：maven-2

我已经为我的项目创建了一个 Maven 构建。构建成功。但是当我将它部署到服务器（apache tomcat 6）上时，它给出了有关 jar 文件的各种错误。但是这些 jar 文件在类路径上可用。但是当我保留服务器的lib目录中的那些jar文件然后该错误得到解决。所以，任何对此有任何想法的人..我在使用maven构建时做错了什么。

我的 pom.xml

http://maven.apache.org/xsd/maven-4.0.0.xsd"> 4.0.0 Test1 Test1 0.0.1-SNAPSHOT war Test1 http://maven.apache.org

```
<properties>
    <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
</properties>
<repositories>
    <repository>
        <id>central</id>
        <name>Maven Repository Switchboard</name>
        <layout>default</layout>
        <url>http://repo1.maven.org/maven2</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-core</artifactId>
        <version>1.3.10</version>
    </dependency>
    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.8</version>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.jexcelapi</groupId>
        <artifactId>jxl</artifactId>
        <version>2.6.10</version>
    </dependency>
    <dependency>
        <groupId>org.ow2.orchestra.eclipse.birt</groupId>
        <artifactId>org.ow2.orchestra.eclipse.birt.core</artifactId>
        <version>3.7.0</version>
    </dependency>
    <dependency>
        <groupId>org.ow2.orchestra.eclipse.birt</groupId>
        <artifactId>org.ow2.orchestra.eclipse.birt.report.engine</artifactId>
        <version>3.7.0</version>
    </dependency>
    <dependency>
        <groupId>openforecast</groupId>
        <artifactId>openforecast</artifactId>
        <version>1.0.16</version>
        <scope>system</scope>
        <systemPath>D:/testing/WebContent/WEB-INF/lib/OpenForecast-0.5.0.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi</artifactId>
        <version>3.7</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-math</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>net.sf.jsci</groupId>
        <artifactId>jsci</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-taglib</artifactId>
        <version>1.3.10</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>struts</groupId>
        <artifactId>struts-bean</artifactId>
        <version>1.2.7</version>
        <type>tld</type>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.jtds</groupId>
        <artifactId>jtds</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

</dependencies>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <properties>
                    <maven.compiler.target>1.6</maven.compiler.target>
                    <maven.compiler.source>1.6</maven.compiler.source>
                </properties>
                <encoding>ISO-8859-1</encoding>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <packagingExcludes>D:/Test1/src/main/webapp/WEB-INF/web.xml</packagingExcludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:45:53.083

您无需在 Tomcat 上部署 jar：您部署了一个 war 文件。战争包含一个 WEB-INF/lib 文件夹，其中包含您的库。

Tomcat 根目录下的 lib 文件夹仅用于在所有部署的应用程序之间共享的库。例如，数据库驱动程序。

检查您的 Maven 依赖项是否不在提供的范围**内**。它们应该包含在您的*WEB-INF/lib*文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:07:37.877

首先是你对 servlet api 的依赖：

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>servlet-api</artifactId>
  <version>2.5</version>
</dependency> 
```

必须有一个像这样“提供”的范围，这意味着编译需要它们，但在运行时它将由 Tomcat 在这种情况下提供。

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>servlet-api</artifactId>
  <version>2.5</version>
  <scope>provided</scope>
</dependency> 
```

以下：

openforecast openforecast 1.0.16系统D:/testing/WebContent/WEB-INF/lib/OpenForecast-0.5.0.jar

表示您没有使用真正必须的存储库。永远不要在你的构建中使用系统范围的依赖，因为它们会使你构建环境特定。开始使用存储库管理器（Nexus、Artifactory 或 Archive）并在那里安装 openforecast。像你一样在你的 pom 和特别是 Maven Central 中定义存储库是[不好的做法。](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)

如果您已经在 pom 中定义了以下内容：

```
<properties>
    <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
</properties> 
```

不需要像这样配置[maven-compiler-plugin ，因为 encoding 参数默认使用上述属性。](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#encoding)

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <properties>
            <maven.compiler.target>1.6</maven.compiler.target>
            <maven.compiler.source>1.6</maven.compiler.source>
        </properties>
        <encoding>ISO-8859-1</encoding>
    </configuration>
</plugin> 
```

您可以使用以下内容：

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

但是你必须定义你使用的插件的版本：

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

最好的办法是使用 pluginManagement 部分。

我想到的另一件事是，您使用的是旧的 maven-war-plugin，并且您在配置中使用了绝对路径，在任何情况下都应避免使用。

```
<plugin>
   <artifactId>maven-war-plugin</artifactId>
   <version>2.1.1</version>
   <configuration>
     <packagingExcludes>D:/Test1/src/main/webapp/WEB-INF/web.xml</packagingExcludes>
   </configuration>
</plugin> 
```

[正如网站所说](http://maven.apache.org/plugins/maven-war-plugin/)，最新版本是 2.2 。如果您需要排除这样的事情，您应该通过以下方式进行：

```
<plugin>
   <artifactId>maven-war-plugin</artifactId>
   <version>2.2</version>
   <configuration>
     <packagingExcludes>${basedir}/src/main/webapp/WEB-INF/web.xml</packagingExcludes>
   </configuration>
</plugin> 
```

但在这种情况下，我不明白你为什么喜欢排除 web.xml，因为它是战争文件的重要组成部分。也许你可以详细说明一下。

# asp.net-mvc - 如何在 ASP.NET MVC 创建视图中添加一些自己的表单？

> ID：11289503
> 
> 赞同：0
> 
> 时间：2012-07-02T07:39:50.933
> 
> 标签：asp.net-mvc

我有一个问题，我创建了一个控制器和一个视图，用于从特定模型添加新项目。视图看起来像：

```
@modelModels.UserItem

@{
    ViewBag.Title = "New";
}

<h2>New</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)  
    <fieldset>
        <legend>Device</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.name)
            @Html.ValidationMessageFor(model => model.name)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

和控制器：

```
[HttpPost]
public ActionResult New(UserItem useritem)
{
    if (ModelState.IsValid)
    {
        db.UserItems.AddObject(useritem);
        db.SaveChanges();

        return RedirectToAction("Index");
    }

    return View(useritems);
} 
```

我想如何在视图中向表单添加下拉列表，如下所示：

```
<select id="Select1">
    <option>MARS</option>
</select> 
```

在控制器中提交后如何从表单中访问数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T07:49:26.917

为您的页面提供视图模型，此视图模型将在您的视图中使用。因此，仅包含模型中您真正需要的字段。在获取操作中，您应该创建此视图模型并从模型中获取所需的属性并将它们映射到您的视图模型。

```
public class UserItemViewModel
{
    /* Properties you want from your model */
    public string Property1                           { get; set; }
    public string Property2                           { get; set; }
    public string Property3                           { get; set; }

    /* Property to keep selected item */
    public string SelectedItem                        { get; set; }
    /* Set of items to fill dropdown */
    public IEnumerable<SelectListItem> SelectOptions  { get; set; }

    /* Fill the SelectListHere. This will be called from index controller */
    public void FillOptions()
    {
        var items = new[] { "Mars", "Venus" }.
              Select(x => new SelectListItem { Value = x, Text = x });

        SelectOptions= new SelectList(items, "Value", "Text");
    }
} 
```

更改控制器以接收 ViewModel 而不是 Model 本身。

```
[HttpPost]
public ActionResult New(UserItemViewModel useritem)
{
    /* Repopulate the dropdown, since the values are not posted with model. */
    userItem.FillOptions();

    if (ModelState.IsValid)
    {
        /* Create your actual model and add it to db */

        // TODO: Map your properties from model to view model.
        // Let's say you created a model with name userItemModel
        db.UserItems.AddObject(userItemModel);
        db.SaveChanges();

        return RedirectToAction("Index");
    }
    return View(useritem);
} 
```

您可能需要稍微更改索引视图控制器。（填充下拉菜单）

```
[HttpGet]
public ActionResult Index()
{
    /* Create new viewmodel fill the dropdown and pass it to view */
    var viewModel = new UserItemViewModel();
    viewModel.FillOptitons();

    //TODO : From your model fill the required properties in view model as I mention.

    return View(viewModel);
} 
```

而你的看法，

```
/* Strongly typed view with viewmodel instead of model itself */
@modelModels.UserItemViewModel

/* This is the dropdown */
@Html.DropDownListFor(m => m.SelectedItem, Model.SelectOptions) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:45:55.783

1.  将该属性添加到您的模型中
2.  使用内置`EditorFor`（首选）或手写 html 为该属性生成客户端输入。
3.  通过在用户提交表单时检查该属性来访问提交的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:07:17.047

我喜欢 emre 关于拥有 viewModel 的提议，我认为这是解决您问题的最佳方法，但是以防万一您不想那样做（您必须有一个非常好的理由，因为它是最好的）并且仍然想要一种方法直接访问表单的值，您可以随时使用： var x = Request["myFiledName"]; 在控制器内部获取表单传递的值。

# grails - Grails Jasper：显示来自 java.lang.Object 的属性/-ies

> ID：11289504
> 
> 赞同：0
> 
> 时间：2012-07-02T07:39:52.543
> 
> 标签：grails, jasper-reports, ireport

我在 Grails 上的 Jasper 报告中有这个问题，我应该显示具有此属性的特定模型的内容

```
class Schedule {
  Subject subject
  Room room // another class having only a single property [room:String]
  DayOfWeek day //days of the week having only a single property [day:String]
  String timeStart
  String timeEnd
  //constraints
}
class Subject {
   Course course
   String section
   static hasMany = [schedule: Schedule]
   // constraints
} 
```

问题是，当我尝试从`jasperReport`将要获取的控制器中调用操作时`Schedule.list()`，我得到了这个错误作为回报

```
URI     /Portal/jasper/index
Class   org.hibernate.LazyInitializationException
Message could not initialize proxy - no Session 
```

这是控制器和视图代码。

```
// ScheduleController
def report() {
   List scheduleList = Schedule.list()
   chain(controller:'jasper', action:'index', params:params,
         model:[data:scheduleList])
}

//view
<g:jasperReport jasper="schedule_list"
                controller="schedule"
                action="report"
                format="pdf, html"
                name="Schedule List"
                description=" " /> 
```

* * *

为了解决这个问题，我尝试使用下面的这个理论来解析域中的属性。但作为回报，报告会返回报告`null`中具有正确记录数的所有字段。

```
List scheduleList = Schedule.list().collect {
   [cell:
      [it.subject.toString(),
       it.room.toString(),
       it.day.toString(),
       it.timeStart,
       it.timeEnd
      ],id: it.id
   ]    
} as List 
```

这是位于 jasper 报告 [.jrxml] 中的字段名称

```
<field name="subject" class="java.lang.String"/>
<field name="room" class="java.lang.String"/>
<field name="day" class="java.lang.String"/>
<field name="timeStart" class="java.lang.String"/>
<field name="timeEnd" class="java.lang.String"/> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:31:47.223

控制器链接的问题是域对象将不再附加到休眠会话，因此出现异常。

使用 JasperService（来自您的控制器）生成报告，而不是链接，如下所示：http: [//www.grails.org/plugin/jasper](http://www.grails.org/plugin/jasper)

例如：

```
class ScheduleController {

    def jasperService

    ...

    def report() {

        // Get the report data and build the report.
        List scheduleList = Schedule.list()
        JasperReportDef reportDef = jasperService.buildReportDefinition(params, request.getLocale(), [data:sheduleList])

        // Non-inline reports (e.g. PDF)
        if (!reportDef.fileFormat.inline && !reportDef.parameters._inline)
        {
            response.setHeader("Content-disposition", "attachment; filename="+(reportDef.parameters._name ?: reportDef.name) + "." + reportDef.fileFormat.extension);
            response.contentType = reportDef.fileFormat.mimeTyp
            response.characterEncoding = "UTF-8"
            response.outputStream << reportDef.contentStream.toByteArray()
        }
        else
        {
            // Inline report (e.g. HTML)
            render(text: reportDef.contentStream, contentType: reportDef.fileFormat.mimeTyp, encoding: reportDef.parameters.encoding ? reportDef.parameters.encoding : 'UTF-8');
        }

    ...
} 
```

# iphone - 我需要在我的 iOS 应用程序的 Twitter 应用程序页面中设置什么回调 url？

> ID：11289506
> 
> 赞同：4
> 
> 时间：2012-07-02T07:40:00.837
> 
> 标签：iphone, objective-c, ios, twitter

我正在尝试为我的 iOS 应用程序实现 twitter 集成，并且我的应用程序部署目标是 4.0 及更高版本，我正在使用[bengottlieb 示例](https://github.com/bengottlieb/Twitter-OAuth-iPhone)进行 twitter 共享，在回调 URL 中的 twitter 应用程序页面中：文本字段当我不设置回调时应用程序设置中的 url 我的应用程序崩溃了！（authenticatedWithUsername 委托方法被调用，但它正在关闭视图控制器）我必须设置什么回调 url？我想在授权后返回应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-03T12:13:23.887

您只需在 Settings -> Callback Url 中提供任何有效的 URL。我使用了“ [https://www.google.com](https://www.google.com) ”并且我的应用程序开始工作。另外，记得取消选中 Enable Ca Callback Locking

# c# - 使用 C# 选择所有在 XML 中具有命名空间的节点

> ID：11289507
> 
> 赞同：0
> 
> 时间：2012-07-02T07:40:01.473
> 
> 标签：c#, xml

嗨，任何人都可以帮助我。我有一个包含我自己的命名空间 xmlns:NS 的 XML。我需要选择包含命名空间“NS”的所有节点。我们如何使用 C#.net 做到这一点。

我尝试如下：

```
XmlDocument doc=new XmlDocument();
doc.Load(Path);
XmlNodeList oNodeList=doc.GetElementByTagname("NS:Text"); 
```

在这里，我得到了所有具有“NS：Text”命名空间的节点。但我需要选择所有节点，如下所示：

```
XmlDocument doc=new XmlDocument();
doc.Load(Path);
XmlNodeList oNodeList=doc.GetElementByTagname("NS"); 
```

这样我就可以选择包含命名空间“NS”的所有节点。但这不起作用。我们怎样才能做到这一点？

以下是我的 XML 格式。

```
<xml 1.0 ?>
    <Root xmlns:NS="www.yembi.com">
        <NS:Entry Value="User">
            <table>
                <tr>
                    <td>
                        <NS:display type="Label" name="First Name">
                    </td>
                </tr>
                <tr>
                    <td>
                        <NS:Text type="Text">
                    </td>
                </tr>
                <tr>
                    <td>
                        <NS:Button Type="SubmitButton" name="submit">
                    </td>
                </tr>
            </table>
        </NS:Entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:57:32.517

如果您拥有 .net 框架版本 3.5 或更高版本，我建议您使用 LINQ to XML。

```
 XDocument doc = XDocument.Load(Path);

    XNamespace ns = "www.yembi.com";
    var result = doc.Root.Descendants()
                   .Where(p => p.GetPrefixOfNamespace(ns) == "NS"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:49:08.257

您可以将 XPath 表达式与[`SelectNodes`方法](http://msdn.microsoft.com/en-us/library/4bektfx9.aspx)一起使用。

```
XmlDocument doc = new XmlDocument();
doc.Load(Path);

XmlNamespaceManager mgr = new XmlNamespaceManager(doc.NameTable);
mgr.AddNamespace("NS", "www.yembi.com");
XmlNodeList oNodeList = doc.SelectNodes("//NS:*", mgr); 
```

XPath 表达式选择带有前缀`//NS:*`的任何元素。`NS`

关于您的问题的一个注释：`NS`不是您的 Xml 文档中的命名空间，它只是一个命名空间前缀。`www.yembi.com`是你的命名空间。

您可以将前缀视为将命名空间与文档中的标识符连接起来的命名空间的本地（文档内）占位符。您可以轻松地更改 XPath 相关代码中的占位符（例如更改为`x`），并将 保留`NS`在文档中，只要它仍然是 namespace ，一切仍然有效`www.yembi.com`。

# c - 使用“C”执行 API 将 sqlite3 表导出到文件中

> ID：11289510
> 
> 赞同：7
> 
> 时间：2012-07-02T07:40:09.183
> 
> 标签：c, sqlite

我在 Fedora 14 中使用 sqlite3 版本 3.6.23.1。我可以使用这样的命令提示符将表导出到文件中，

```
sqlite3 data.db

sqlite> .output sample.txt;

sqlite> select *from sample; 
```

我想在应用程序级别处理这种情况。

我正在使用 sqlite3 开源“C”API 在应用程序级别执行此命令。

```
execute("delete from sample:);// working fine

execute(".output sample.txt"); //Not working 
```

它的抛出错误称为`"SQL error in sqlite3_exec: near ".": syntax error"`

请建议我如何创建文件以使用此 API 导入数据。

API 的函数定义。

```
int execute(const char* fmt, ...)
{

    char *err_messg;

    int ret = 0, result = 0;

    char sql_string[1024] = ""; //this honestly needs to be more elegant; will do for now

    va_list args;

    va_start(args, fmt);

    ret = vsprintf(sql_string, fmt, args);

    va_end(args);

    printf("sql_string: %s\n", sql_string);

    if (!ret)
        result = 0;
    else
        result = 1;

    if (result != -1)
    {

        if (sqlite3_exec(db_conn, sql_string, NULL, 0, &err_messg) == SQLITE_OK)    //Actual API which will work with database.
        {
            return SUCCESS;
        }
        else
        {
            printf("\n SQL error in sqlite3_exec: %s\n", err_messg);
            return DBEXCE_FAIL;
        }
    }
    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:34:49.363

您使用的 SQLite API 调用仅接受 SQL：
“在作为其第一个参数传入的数据库连接的上下文中，sqlite3_exec() 接口运行零个或多个 UTF-8 编码、分号分隔的 SQL 语句传递到其第二个参数。” [来自 http://www.sqlite.org/c3ref/exec.html]

如果您浏览 SQLite 的源代码，您可以看到 .output 命令打开一个文件，然后使用 sqlite3_snprintf API 将查询结果的内容写入打开的文件句柄。

显示正在发生的事情的最新来源在这里：
[http ://www.sqlite.org/src/artifact/076e1c90d594644f36027c8ecff9a392cf2d3a06](http://www.sqlite.org/src/artifact/076e1c90d594644f36027c8ecff9a392cf2d3a06)

.output 的相关部分是这样的：

```
if( c=='o' && strncmp(azArg[0], "output", n)==0 && nArg==2 ){
    if( p->outfile[0]=='|' ){
      pclose(p->out);
    }else{
      output_file_close(p->out);
    }
    p->outfile[0] = 0;
    if( azArg[1][0]=='|' ){
      p->out = popen(&azArg[1][1], "w");
      if( p->out==0 ){
        fprintf(stderr,"Error: cannot open pipe \"%s\"\n", &azArg[1][1]);
        p->out = stdout;
        rc = 1;
      }else{
        sqlite3_snprintf(sizeof(p->outfile), p->outfile, "%s", azArg[1]);
      }
    }else{
      p->out = output_file_open(azArg[1]);
      if( p->out==0 ){
        if( strcmp(azArg[1],"off")!=0 ){
          fprintf(stderr,"Error: cannot write to \"%s\"\n", azArg[1]);
        }
        p->out = stdout;
        rc = 1;
      } else {
        sqlite3_snprintf(sizeof(p->outfile), p->outfile, "%s", azArg[1]);
      }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T09:09:54.813

SQLite shell的`.output`命令是该 shell 的一个特性*（*以及所有其他以 开头的命令`.`）。如果您正在使用 C 接口，则应该执行查询以获取所需的行，并遍历它们，一次将它们写入文件。

改编自[本教程](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)中的示例代码……</p>

```
static int callback(void *handle, int argc, char **argv, char **azColName) {
     FILE *f = handle;
     int i;
     const char *sep = "";
     for (i=0;i<argc;i++) {
         fprintf(f, "%s\"%s\"", sep, argv[i]);
         sep = ", ";
     }
     fprintf(f, "\n");
     return 0;
} 
```

```
const char *sql = "SELECT * FROM sample;";
sqlite3 *db;
FILE *f = fopen("sample.csv", "w"); // ought to check for errors here; demo code!
char *errs = NULL;

if (sqlite3_open("data.db", &db)) {
    fprintf(stderr, "Can't open database: %s\n", sqlite3_errmsg(db));
    sqlite3_close(db);
    exit(1);
}
if (sqlite3_exec(db, sql, callback, f, &errs) != SQLITE_OK)
    fprintf(stderr, "SQL error: %s\n", errs);
sqlite3_close(db); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T06:06:27.450

该帖子似乎有点旧，但我只想为任何寻找类似信息的访问者更新。有一个用于 SQLite3 数据库导入/导出功能的开源 C/C++ API。

API 可以通过[这里访问](https://github.com/fnoyanisi)

# android - 在Android开发中将日期提前9个月零10天

> ID：11289511
> 
> 赞同：0
> 
> 时间：2012-07-02T07:40:16.927
> 
> 标签：android, date

我想为我的应用程序创建一个妊娠期计算器。我想获取用户在日期时间选择器中选择的日期，并将该日期提前 9 个月零 10 天，然后在 textView 中打印出来。我可以从日期选择器中获取日期并将日期打印到 textView 中，但我现在需要做的是将日期提前 9 个月零 10 天。有任何想法吗？这是我当前从日期选择器获取日期并将其打印到文本视图的代码。

```
public class GestationPeriod extends Activity {
DatePicker date;
TextView gestationperiodView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gestationperiod);
    setupVariables();
}

public void calculate(View v){      
    int gestationPeriodMonth = 9;
    int gestationPeriodDay = 10;
    int year = date.getYear();
    int month = date.getMonth();
    int day = date.getDayOfMonth(); 
    gestationperiodView.setText("" + day + " / " + month + " / " + year);

}
private void setupVariables(){      
    date = (DatePicker) findViewById(R.id.datePicker1);
    gestationperiodView = (TextView) findViewById(R.id.editText1);  
} 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:56:15.153

使用[java.util.Calendar.add(int field, int amount)](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#add%28int,%20int%29)。在得到日、月、年之后，在 之前`gestationperiodView.setText`，插入：

```
Calendar c = new Calendar();
c.set(year, month-1, day);
c.add(Calendar.DAY_OF_MONTH, gestationPeriodDay);
c.add(Calendar.MONTH, gestationPeriodMonth);
day = c.get(Calendar.DAY_OF_MONTH);
month = c.get(Calendar.MONTH) + 1;
year = c.get(Calendar.YEAR); 
```

# c# - c#程序加载c++ COM

> ID：11289512
> 
> 赞同：1
> 
> 时间：2012-07-02T07:40:18.530
> 
> 标签：c#, com

我创建了一个 COM C++ 并在 Windows 系统中注册它。

现在，如果我正在创建一个 C++ 应用程序并想加载它并调用函数对象，我正在使用 CoCreateInstance 函数。

如果我想创建 .NET (C#) 应用程序并加载 COM C++，我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:43:00.073

假设您使用的是 Visual Studio：
右键单击您的项目，然后选择“添加引用”。在以下对话框中，只需选择选项卡“COM”。在那里您可以选择您的 COM 库，Visual Studio 将负责创建一个 Interop 程序集，您可以从 C# 开始使用您的库。

# android - 在 Android 中停止并恢复播放音频/视频文件？

> ID：11289524
> 
> 赞同：1
> 
> 时间：2012-07-02T07:41:34.040
> 
> 标签：android, media-player

我的应用程序中有一个服务。它发送和接收 Web 服务请求和响应。当我收到来自 Web 服务的特定响应时，我需要停止播放音频/视频文件（媒体文件正在从另一个应用程序播放）。当我完成了一些过程，我需要再次恢复。

笔记：

如果有任何 2G 呼叫停止播放媒体文件，则在 Android 设备中，音乐播放器会播放任何音乐，然后当 2G 呼叫断开时，停止播放媒体文件。我只需要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:46:02.647

尝试使用这个：

```
mediaPlayerObject.pause(); //To pause
mediaPlayerObject.start(); //To play 
```

# css - Yii CActiveFormWidget css 样式

> ID：11289526
> 
> 赞同：1
> 
> 时间：2012-07-02T07:41:43.937
> 
> 标签：css, yii, yii-components

我正在使用 Yii 框架开发网站。我需要表单并使用 CActiveFormWidget。如何使用 CSS 设置输入字段和按钮的样式？哪个是按钮或文本字段的 CSS 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:18:02.593

如果不需要修改现有类，您可以通过传递类属性将类分配给每个文本字段和按钮

```
<?php 
echo $form->textField($model,'search',array(
  'size'=>60,
  'maxlength'=>255, '
  class'=>'search'
)); ?> 
```

除此之外，如果您想更改默认表单 css 它是`form.css`并且您需要`div.form input, div.form textarea, div.form select`根据您的需要进行研究

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T04:41:04.620

您可以为您的网站使用自定义主题。Yii 支持主题。您可以在 Themes 文件夹中创建自己的主题，也可以在配置文件 main.php 中定义您的主题。

[Yii 主题](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming)

# ruby-on-rails - 按动态的、用户特定的值对 Mongoid 结果排序

> ID：11289532
> 
> 赞同：0
> 
> 时间：2012-07-02T07:42:04.520
> 
> 标签：ruby-on-rails, mongodb, mongoid, database

我有一个 Mongoid 模型，我想通过在模型和`current_user`实时之间计算的分数对结果进行排序。假设`Thing`有一个实例方法`match_score`：

```
 def match_score(user) #can be user object too
    score = 100
    score -= 5 if user.min_price && !(price < user.min_price)
    score -= 10 if user.max_price && !(price > user.max_price)
    #... bunch of other factors...
    return [score, 0].max
  end 
```

是否可以根据为特定用户返回的值对任何查询的结果进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:33:41.580

MongoDB 不支持排序中的任意表达式。基本上，您只能指定一个字段和一个方向（asc/desc）。

像您这样复杂的排序逻辑，唯一的方法就是在应用程序中进行。或者查看另一个数据存储。

# django - Django 从 Github 部署到像 Capistrano 一样的服务器，使用简单的 Fabric 配方

> ID：11289539
> 
> 赞同：1
> 
> 时间：2012-07-02T07:42:46.093
> 
> 标签：django, deployment, capistrano, fabric

我想使用 Capistrano 在我的 webfaction 服务器上部署我的 django 应用程序，但由于我的纯粹主义倾向，我想以 Capistrano 的方式在 Fabric 中进行部署。我最喜欢 Capistrano 的一点是它会自动检索 repo 的内容并将其推送到服务器。

到目前为止，我看到的面料配方要求我以“git 方式”做事，手动输入 git 命令以使用 repo 等。

有没有办法以“Capistrano”方式在 Fabric（或任何其他 python 包）中部署 Django 应用程序？

Sie 注意：如果我真的必须使用 Capistrano，有没有办法绕过资产预编译任务和 rake db:migrate 任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:10:18.960

我已成功使用[此处](https://github.com/ashwoods/webfaction-django-fabfile)的脚本部署到 webfaction。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T21:23:44.863

如果您想绕过资产编译，请不要在您的配方中写下这一行：

```
load 'deploy/assets' 
```

如果您不想运行迁移，请永远不要输入迁移命令

```
cap deploy:migrate 
```

如果您想删除一些其他行为（符号链接、重新启动、将代码更新到服务器），请从这里写入选定的部分：

```
 namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart do ; end
  task :update_code do ; end #override this task to prevent capistrano to upload on servers
  task :symlink do ; end #don't create the current symlink to the last release
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:44:31.823

对于任何偶然发现这一点的人，这里有一个非常基本的 capistrano 食谱：

[http://ygamretuta.me/2012/07/18/deploy-django-1-4-webfaction-capistrano/](http://ygamretuta.me/2012/07/18/deploy-django-1-4-webfaction-capistrano/)

# vb.net - vb.net httpwebrequest 获取带有 google 链接的 html

> ID：11289540
> 
> 赞同：1
> 
> 时间：2012-07-02T07:42:48.123
> 
> 标签：vb.net, httpwebrequest

```
Imports System.Net
Imports System.IO

Public Class Form1
    Public Function GetHTML(ByVal url As Uri) As String
        Dim HTML As String

        Dim Request As HttpWebRequest
        Dim Response As HttpWebResponse
        Dim Reader As StreamReader

        Try
            Request = HttpWebRequest.Create(url)
            Response = Request.GetResponse
            Reader = New StreamReader(Response.GetResponseStream())

            HTML = Reader.ReadToEnd
        Catch ex As Exception
            HTML = Nothing
        End Try

        Return HTML
    End Function

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim url As Uri = New Uri(TextBox1.Text)

        TextBox2.Text = GetHTML(url)
    End Sub
End Class 
```

以上是我从网页获取 html 的代码。如果我输入类似[http://www.google.com.sg/url?sa=t&rct=j&q=vb.net%20convert%20string%20to%20uri&source=web&cd=1&ved=0CFcQFjAA&url=http% 3A%2F%2Fwww.vbforums.com%2Fshowthread.php%3Fp%3D3434187&ei=R0fxT872Cs2HrAesq4m-DQ&usg=AFQjCNGGedjegaM8osT689qWhbqpf6NI7Q](http://www.google.com.sg/url?sa=t&rct=j&q=vb.net%20convert%20string%20to%20uri&source=web&cd=1&ved=0CFcQFjAA&url=http%3A%2F%2Fwww.vbforums.com%2Fshowthread.php%3Fp%3D3434187&ei=R0fxT872Cs2HrAesq4m-DQ&usg=AFQjCNGGedjegaM8osT689qWhbqpf6NI7Q)

它给了我

```
 <script>window.googleJavaScriptRedirect=1</script>
    <script>
    var f={};
    f.navigateTo=function(b,a,g){
      if(b!=a&&b.google)
      {
        if(b.google.r)
         {
           b.google.r=0;
           b.location.href=g;
           a.location.replace("about:blank");
         }
      }
      else
      {
        a.location.replace(g);
      }
    };

    f.navigateTo(window.parent,window,"http://www.vbforums.com/showthread.php?p\x3d3434187");

    </script>
    <noscript>
    <META http-equiv="refresh" content="0;URL='http://www.vbforums.com/showthread.php?p=3434187'">
    </noscript> 
```

而不是[http://www.vbforums.com/showthread.php?p=3434187的 html](http://www.vbforums.com/showthread.php?p=3434187)

如何让我的代码进行重定向并获取 html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:30:39.780

从元标记中刮出 url，然后发出新请求。对于抓取，我推荐 HtmlAgilityPack，您可以在[http://html-agility-pack.net/](http://html-agility-pack.net/)下载它或使用 NuGet 安装它。

# javascript - 移除上滑效果

> ID：11289546
> 
> 赞同：0
> 
> 时间：2012-07-02T07:43:13.177
> 
> 标签：javascript, jquery, css, menu, drop-down-menu

我正在为下拉菜单使用以下 javascript 代码。它已与模板一起默认。现在我想删除上滑选项，因为它闪烁很多。我希望该菜单在鼠标移出后淡出或简单隐藏。

```
<script type="text/javascript">
var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('.menu-nav li').hover(
        function() {
              $j(this).addClass("active");
              $j(this).find('.ulwrapper').stop(false, true).slideDown();
          $j(this).find('.ulwrapper .ulwrapper').stop(false, true).slideUp();
        },
        function() {
              $j(this).removeClass("active");        
              $j(this).find('div').stop(false, true).slideUp();
        }
          );
        $j('.ulwrapper').hover(function() {
              $j('.parent').addClass("active_tab");
            }, function() {
              $j('.parent').removeClass("active_tab");        
        });
});

</script> 
```

将非常感谢解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:46:34.660

```
function() {

     $j(this).addClass("active");

        $j(this).find('.ulwrapper').stop(false, true).slideDown();

        $j(this).find('.ulwrapper .ulwrapper').stop(false, true).fade();

    },

    function() {

        $j(this).removeClass("active");        

        $j(this).find('div').stop(false, true).fade();

    } 
```

希望这可以帮助 ：-）

# javascript - 为什么 highlight.js 会忽略语言类？

> ID：11289548
> 
> 赞同：5
> 
> 时间：2012-07-02T07:43:21.653
> 
> 标签：javascript, lisp, syntax-highlighting, blogger

我正在使用[Highlight.js](http://softwaremaniacs.org/soft/highlight/)库在 Blogger 中对代码进行语法高亮显示，但它拒绝正确高亮 Lisp 代码。

在博客上的文章中：

```
<pre><code class="lisp">
  (coerce (average 1 2 3 4) 'float)
  > 2.5
</code></pre> 
```

在关闭前的设计模板中`</head>`：

```
<script src='http://yandex.st/highlightjs/7.0/lisp.min.js' ></script>
<script src='http://yandex.st/highlightjs/7.0/highlight.min.js' ></script>
<link href='http://yandex.st/highlightjs/7.0/styles/github.min.css' rel='stylesheet' />
<script type='text/javascript'>
  hljs.initHighlightingOnLoad();
</script> 
```

打开文章后，突出显示被破坏，Firebug 在 HTML 面板中显示：

```
<pre>
  <code class="lisp ruby"> // WTF
  ... stylized RUBY tokens here ...
  </code>
</pre> 
```

在某些代码片段上，荧光笔放置`<code class="lisp undefined">`并拒绝突出显示。由于我在使用 Blogger，我真的不想将任何东西下载到任何地方，尤其是当已经发布了语言包时。我应该做些什么才能让 Lisp 变得可识别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:35:32.793

您正在使用托管版本，其中包含许多通用语言的定义，但 Lisp 不在其中。有关完整列表，请参阅[下载页面](http://softwaremaniacs.org/soft/highlight/en/download/)。在这种情况下，class 属性中的“lisp”单词对于 highlight.js 来说是未知的，它会尝试自动检测语言。

但是，即使 Lisp 包含在包中，它也不会突出显示您的片段，因为它包含`> 2.5`不是 Lisp 的输出 ()，并且 highlight.js 中的 Lisp 定义不允许这样做。

# mysql - SQLAlchemy - 如何连接 MySQL

> ID：11289549
> 
> 赞同：0
> 
> 时间：2012-07-02T07:43:24.333
> 
> 标签：mysql, sql, sqlalchemy, flask, flask-sqlalchemy

我有一个具有以下结构的 MySQL 数据库，希望有人可以帮助我将下面的 SQL 查询转换为 SQLAlchemy。

**数据库结构：**

```
**bottom:**
id
name
middle_id

**middle:**
id
name
top_id

**top:**
id
name 
```

**这是我的模型：**

```
class Bottom(db.Model):
    id        = db.Column(db.Integer, primary_key=True)
    name      = db.Column(db.String(64))
    middle_id = db.Column(db.Integer, db.ForeignKey('middle.id'))
    middle    = db.relationship('Middle',
        backref=db.backref('bottoms', lazy='dynamic'))

class Middle(db.Model):
    id        = db.Column(db.Integer, primary_key=True)
    name      = db.Column(db.String(64))
    top_id    = db.Column(db.Integer, db.ForeignKey('top.id'))
    top       = db.relationship('Top',
        backref=db.backref('middles', lazy='dynamic'))

class Top(db.Model):
    id        = db.Column(db.Integer, primary_key=True)
    name      = db.Column(db.String(64)) 
```

**这是我要转换为 SQLAlchemy 的 SQL：**

```
SELECT
  b.*,
  m.*,
  t.*
FROM bottom AS b
  LEFT JOIN (SELECT id, name, top_id  from middle) AS m  on m.id = b.middle_id
  LEFT JOIN (SELECT id, name FROM top) AS t   on t.id = m.top_id
WHERE b.name LIKE '%query%' OR m.name LIKE '%query%' OR t.name LIKE '%query%' 
```

表格**底部的每个条目都与****中间**相关，**中间**的每个条目都与**顶部**相关。我想查询数据库以查找底部的所有条目，**其名称为 LIKE %query%，****底部**的所有条目的中间名称为 LIKE %query%，以及**底部**所有条目的条目，中间的顶部名称是 LIKE**查询**。

 ********我想将其转换为 SQLAlchemy，如下所示：**

```
 return db.session.query(Bottom).filter( or_(Bottom.name.like('%query%'),
                                     Bottom.middle.name.like('%query%'),
                                     Bottom.middle.top.name.like('%query%'))
                                     )).all() 
```

换句话说，如果我在底部有一个与中间条目相关的条目，并且中间的条目与顶部的条目相关，如果我在顶部搜索适当的名称，它将不会返回中间条目与它相关，但与相关的中间条目相关的底部条目。

这是一个例子：

数据：

```
**bottom**
id        1
name      "Gus Fring"
middle_id 1

**middle**
id        1
name      "Jesse Pinkman"
top_id    1

**top**
id        1
name      "Walter White" 
```

如果我搜索“Walter White”，它不会返回中间关系（Jesse Pinkman），而是返回底部关系到中间关系的结果（Gus Fring）。

先感谢您 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:09:38.280

```
name_filter = '%query%'
qry = (session.query(Bottom).
        outerjoin(Middle).
        outerjoin(Top).
        filter(or_(
            Bottom.name.like(name_filter),
            Middle.name.like(name_filter),
            Top.name.like(name_filter),
            ))
        ) 
```

作为此查询执行的结果，您将仅获得 Bottom 的实例。如果您真的希望将它们中的所有 3 个作为元组（底部、中间、顶部），只需将`query(...)`部分替换为`session.query(Bottom, Middle, Top).`******

# linux - rm、cp、mv 命令的参数列表太长错误

> ID：11289551
> 
> 赞同：777
> 
> 时间：2012-07-02T07:43:34.240
> 
> 标签：linux, unix, command-line-arguments

我在 UNIX 的一个目录下有数百个 PDF。PDF 的名称非常长（大约 60 个字符）。

当我尝试使用以下命令一起删除所有 PDF 时：

```
rm -f *.pdf 
```

我收到以下错误：

```
/bin/rm: cannot execute [Argument list too long] 
```

这个错误的解决方案是什么？`mv`和命令是否也会发生此错误`cp`？如果是，如何解决这些命令？

* * *

## 回答 #1

> 赞同：1086
> 
> 时间：2012-07-02T07:44:39.153

发生这种情况的原因是因为 bash 实际上将星号扩展到每个匹配的文件，从而产生了很长的命令行。

试试这个：

```
find . -name "*.pdf" -print0 | xargs -0 rm 
```

**警告：**这是一个递归搜索，也会在子目录中查找（并删除）文件。`-f`仅当您确定不想确认时才使用 rm 命令。

您可以执行以下操作以使命令非递归：

```
find . -maxdepth 1 -name "*.pdf" -print0 | xargs -0 rm 
```

另一种选择是使用 find 的`-delete`标志：

```
find . -name "*.pdf" -delete 
```

* * *

## 回答 #2

> 赞同：503
> 
> 时间：2013-09-05T23:53:45.553

## tl;博士

这是对命令行参数大小的内核限制。请改用`for`循环。

## 问题的根源

这是一个系统问题，相关`execve`且`ARG_MAX`不变。有很多关于这方面的文档（参见[man execve](http://linux.die.net/man/2/execve)、[debian 的 wiki](https://wiki.debian.org/CommonErrorMessages/ArgumentListTooLong)、[ARG_MAX details](https://www.in-ulm.de/%7Emascheck/various/argmax/)）。

基本上，扩展会产生一个超出限制的*命令（及其参数）。*`ARG_MAX`在内核`2.6.23`上，限制设置为`128 kB`. 此常量已增加，您可以通过执行以下操作来获取其值：

```
getconf ARG_MAX
# 2097152 # on 3.5.0-40-generic 
```

## 解决方案：使用`for`循环

使用[BashFAQ/095](http://mywiki.wooledge.org/BashFAQ/095)`for`上推荐的循环，除了 RAM/内存空间之外没有限制：

试运行以确定它将删除您期望的内容：

```
for f in *.pdf; do echo rm "$f"; done 
```

并执行它：

```
for f in *.pdf; do rm "$f"; done 
```

这也是一种可移植的方法，因为 glob 在 shell 之间具有强大且一致的行为（[POSIX 规范的一部分](http://man7.org/linux/man-pages/man7/glob.7.html)）。

**注意：**正如几条评论所指出的，这确实更慢但更易于维护，因为它可以适应更复杂的场景，*例如*，人们想要做的不仅仅是一个动作。

## 解决方案：使用`find`

如果您坚持，您可以使用`find`但实际上**不要使用 xargs**，因为它*“在读取非 NUL 分隔的输入时很危险（损坏、可利用等）”*：

```
find . -maxdepth 1 -name '*.pdf' -delete 
```

使用`-maxdepth 1 ... -delete`而不是`-exec rm {} +`允许`find`在不使用外部进程的情况下简单地执行所需的系统调用，因此速度更快（感谢[@chepner 评论](https://stackoverflow.com/questions/11289551/argument-list-too-long-error-for-rm-cp-mv-commands/18647755?noredirect=1#comment69166385_11302033)）。

## 参考

*   [我收到“参数列表太长”。如何分块处理大列表？](http://mywiki.wooledge.org/BashFAQ/095)@毛边
*   [execve(2) - Linux 手册页](http://linux.die.net/man/2/execve)（搜索 ARG_MAX）；
*   [错误：参数列表太长](https://wiki.debian.org/CommonErrorMessages/ArgumentListTooLong)@Debian's wiki；
*   [为什么在传递带引号的参数时会得到“/bin/sh: Argument list too long”？](https://superuser.com/questions/240183/how-to-work-around-shell-limitation-of-argument-list-too-long%29)@超级用户

* * *

## 回答 #3

> 赞同：196
> 
> 时间：2012-07-02T22:30:13.847

`find`有一个`-delete`动作：

```
find . -maxdepth 1 -name '*.pdf' -delete 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-03-04T09:45:56.803

另一个答案是强制`xargs`批量处理命令。例如一次到`delete`文件`100`，`cd`进入目录并运行：

`echo *.pdf | xargs -n 100 rm`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-01-22T09:10:47.490

如果您尝试一次删除大量文件（我今天删除了一个有 485,000+ 的目录），您可能会遇到此错误：

```
/bin/rm: Argument list too long. 
```

问题是，当您键入类似的内容时`rm -rf *`，将`*`替换为每个匹配文件的列表，例如“rm -rf file1 file2 file3 file4”等等。分配了一个相对较小的内存缓冲区来存储这个参数列表，如果它被填满，shell 将不会执行程序。

为了解决这个问题，很多人会使用 find 命令查找每个文件，并将它们一个接一个地传递给“rm”命令，如下所示：

```
find . -type f -exec rm -v {} \; 
```

我的问题是我需要删除 500,000 个文件，而且花费的时间太长。

我偶然发现了一种更快的删除文件的方法——“find”命令内置了一个“-delete”标志！这是我最终使用的：

```
find . -type f -delete 
```

使用这种方法，我以大约 2000 个文件/秒的速度删除文件——快得多！

您还可以在删除文件时显示文件名：

```
find . -type f -print -delete 
```

…甚至显示将删除多少文件，然后计算删除它们需要多长时间：

```
root@devel# ls -1 | wc -l && time find . -type f -delete
100000
real    0m3.660s
user    0m0.036s
sys     0m0.552s 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-07-02T07:47:58.953

或者您可以尝试：

```
find . -name '*.pdf' -exec rm -f {} \; 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2012-07-02T07:46:09.233

你可以试试这个：

```
for f in *.pdf
do
  rm "$f"
done 
```

编辑：ThiefMaster 评论建议我不要向年轻 shell 的绝地武士透露这种危险的做法，所以我会添加一个更“更安全”的版本（为了在有人拥有“-rf ..pdf”文件时保存东西）

```
echo "# Whooooo" > /tmp/dummy.sh
for f in '*.pdf'
do
   echo "rm -i \"$f\""
done >> /tmp/dummy.sh 
```

运行上述操作后，只需`/tmp/dummy.sh`在您喜欢的编辑器中打开文件并检查每一行是否存在危险文件名，如果发现则将其注释掉。

然后将脚本复制到`dummy.sh`您的工作目录中并运行它。

所有这些都是出于安全原因。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-03-18T16:36:01.157

您可以使用 bash 数组：

```
files=(*.pdf)
for((I=0;I<${#files[@]};I+=1000)); do
    rm -f "${files[@]:I:1000}"
done 
```

这样，它将每步擦除 1000 个文件。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2018-09-02T04:41:59.370

我很惊讶这里没有`ulimit`答案。每次我遇到这个问题时，我都会在[这里](https://unix.stackexchange.com/questions/128559/solving-mv-argument-list-too-long)或[这里](https://unix.stackexchange.com/questions/45583/argument-list-too-long-how-do-i-deal-with-it-without-changing-my-command)结束。我知道这个解决方案有局限性，但`ulimit -s 65536`似乎经常为我解决问题。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-09-08T06:45:31.220

你可以使用这个推荐

```
find -name "*.pdf"  -delete 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-08-29T16:55:20.823

*rm*命令对可以同时删除的文件有限制。

一种可能是您可以根据文件模式多次使用*rm*命令删除它们，例如：

```
rm -f A*.pdf
rm -f B*.pdf
rm -f C*.pdf
...
rm -f *.pdf 
```

您也可以通过*find*命令删除它们：

```
find . -name "*.pdf" -exec rm {} \; 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-07-02T22:27:13.537

还有一个：

```
cd  /path/to/pdf
printf "%s\0" *.[Pp][Dd][Ff] | xargs -0 rm 
```

`printf`是一个内置的shell，据我所知，它一直都是这样。现在鉴于这`printf`不是一个 shell 命令（而是一个内置命令），它不会受到 " `argument list too long ...`" 致命错误的影响。

所以我们可以安全地将它与 shell `*.[Pp][Dd][Ff]`globbing模式（例如命令。`rm``xargs``rm`

`\0`in`printf`用作文件名的空分隔符，然后由命令处理，`xargs`使用它 ( `-0`) 作为分隔符，因此`rm`当文件名中有空格或其他特殊字符时不会失败。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-03-11T07:40:35.023

我在将表单源目录复制到目标时遇到了同样的问题

源目录有文件〜3 lakcs

我将**cp 与选项 -r**一起使用，它对我有用

**cp -r abc/def/**

它会将所有文件从 abc 复制到 def 而不给出参数列表太长的警告

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-06-09T15:30:35.730

如果它们是带有空格或特殊字符的文件名，请使用：

```
find -name "*.pdf"  -delete 
```

仅适用于当前目录中的文件：

```
find -maxdepth 1 -name '*.pdf' -delete 
```

这句话搜索当前目录（-maxdepth 1）中所有扩展名为pdf（-name '*.pdf'）的文件，然后，删除。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-10-06T08:43:59.863

也试试这个如果你想删除超过 30/90 天 (+) 或低于 30/90(-) 天的文件/文件夹，那么你可以使用下面的 ex 命令

例如：对于 90 天不包括上述 90 天文件/文件夹删除后，这意味着 91,92....100 天

```
find <path> -type f -mtime +90 -exec rm -rf {} \; 
```

例如：仅对于您要删除的最新 30 天文件，然后使用以下命令 (-)

```
find <path> -type f -mtime -30 -exec rm -rf {} \; 
```

如果您想将文件 giz 超过 2 天的文件

```
find <path> -type f -mtime +2 -exec gzip {} \; 
```

如果您只想查看过去一个月的文件/文件夹。前任：

```
find <path> -type f -mtime -30 -exec ls -lrt {} \; 
```

超过 30 天后才列出文件/文件夹 例如：

```
find <path> -type f -mtime +30 -exec ls -lrt {} \;

find /opt/app/logs -type f -mtime +30 -exec ls -lrt {} \; 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-11-30T12:02:21.297

## 参数列表太长

作为这个问题的标题`cp`，`mv`和`rm`，但答案主要代表`rm`。

### Un*x 命令

仔细阅读命令的手册页！

对于`cp`and `mv`，有一个`-t`开关，对于*target*：

```
find . -type f -name '*.pdf' -exec cp -ait "/path to target" {} + 
```

和

```
find . -type f -name '*.pdf' -exec mv -t "/path to target" {} + 
```

### 脚本方式

[bash](/questions/tagged/bash "显示标记为“bash”的问题")脚本中使用了一个整体工作方法：

```
#!/bin/bash

folder=( "/path to folder" "/path to anther folder" )

if [ "$1" != "--run" ] ;then
    exec find "${folder[@]}" -type f -name '*.pdf' -exec $0 --run {} +
    exit 0;
fi

shift

for file ;do
    printf "Doing something with '%s'.\n" "$file"
done 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-03-23T11:35:47.737

我在一个充满临时图像的文件夹中遇到了同样的问题，该文件夹每天都在增长，这个命令帮助我清除了该文件夹

```
find . -name "*.png" -mtime +50 -exec rm {} \; 
```

与其他命令的不同之处在于 mtime 参数将只接受早于 X 天的文件（在示例中为 50 天）

多次使用，减少每次执行的日期范围，我能够删除所有不必要的文件

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-01-15T20:32:41.203

删除`*.pdf`目录中的所有内容`/path/to/dir_with_pdf_files/`

```
mkdir empty_dir        # Create temp empty dir

rsync -avh --delete --include '*.pdf' empty_dir/ /path/to/dir_with_pdf_files/ 
```

* * *

`rsync`如果您有数百万个文件，使用通配符删除特定文件可能是最快的解决方案。它会处理您遇到的错误。

* * *

（可选步骤）：试运行。检查哪些内容将被删除而不删除。`

```
rsync -avhn --delete --include '*.pdf' empty_dir/ /path/to/dir_with_pdf_files/ 
```

. . .

单击[rsync 提示和技巧](https://www.quora.com/What-are-some-rsync-hacks/answer/Raman-Kathpalia?share=68335132&srid=hfE13)以获取更多 rsync hack

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-06-23T22:05:19.510

更短更可靠的呢？

```
for i in **/*.pdf; do rm "$i"; done 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-03-28T14:47:22.550

如果你想同时删除文件和目录，你可以使用类似的东西：

```
echo /path/* | xargs rm -rf 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2022-02-10T06:14:25.227

**对于没有时间的人。** 在终端上运行以下命令。

```
ulimit -S -s unlimited 
```

然后执行 cp/mv/rm 操作。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-11-28T02:46:14.303

我只知道解决这个问题的方法。这个想法是将您拥有的pdf文件列表导出到文件中。然后将该文件分成几个部分。然后删除每个部分中列出的pdf文件。

```
ls | grep .pdf > list.txt
wc -l list.txt 
```

wc -l 是计算 list.txt 包含多少行。当你知道它有多长时，你可以决定把它分成两半，四分之类的。使用 split -l 命令 例如，将其拆分为每行 600 行。

```
split -l 600 list.txt 
```

这将创建一些名为 xaa、xab、xac 等的文件，具体取决于您如何拆分它。现在要将这些文件中的每个列表“导入”到命令 rm 中，请使用以下命令：

```
rm $(<xaa)
rm $(<xab)
rm $(<xac) 
```

对不起，我的英语不好。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-02-04T17:13:54.087

我几次遇到这个问题。许多解决方案将为`rm`需要删除的每个单独文件运行命令。这是非常低效的：

```
find . -name "*.pdf" -print0 | xargs -0 rm -rf 
```

我最终编写了一个 python 脚本来根据文件名中的前 4 个字符删除文件：

```
import os
filedir = '/tmp/' #The directory you wish to run rm on 
filelist = (os.listdir(filedir)) #gets listing of all files in the specified dir
newlist = [] #Makes a blank list named newlist
for i in filelist: 
    if str((i)[:4]) not in newlist: #This makes sure that the elements are unique for newlist
        newlist.append((i)[:4]) #This takes only the first 4 charcters of the folder/filename and appends it to newlist
for i in newlist:
    if 'tmp' in i:  #If statment to look for tmp in the filename/dirname
        print ('Running command rm -rf '+str(filedir)+str(i)+'* : File Count: '+str(len(os.listdir(filedir)))) #Prints the command to be run and a total file count
        os.system('rm -rf '+str(filedir)+str(i)+'*') #Actual shell command
print ('DONE') 
```

这对我来说效果很好。我能够在大约 15 分钟内清除文件夹中超过 200 万个临时文件。我从一小段代码中注释了 tar，因此任何对 Python 了解最少甚至没有的人都可以操作此代码。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-07-25T02:06:19.223

我发现对于非常大的文件列表（> 1e6），这些答案太慢了。这是在 python 中使用并行处理的解决方案。我知道，我知道，这不是 linux ......但这里没有其他工作。

（这节省了我几个小时）

```
# delete files
import os as os
import glob
import multiprocessing as mp

directory = r'your/directory'
os.chdir(directory)

files_names = [i for i in glob.glob('*.{}'.format('pdf'))]

# report errors from pool

def callback_error(result):
    print('error', result)

# delete file using system command
def delete_files(file_name):
     os.system('rm -rf ' + file_name)

pool = mp.Pool(12)  
# or use pool = mp.Pool(mp.cpu_count())

if __name__ == '__main__':
    for file_name in files_names:
        print(file_name)
        pool.apply_async(delete_files,[file_name], error_callback=callback_error) 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-04-19T00:51:57.960

您可以创建一个临时文件夹，将要保留的所有文件和子文件夹移动到临时文件夹中，然后删除旧文件夹并将临时文件夹重命名为旧文件夹尝试此示例，直到您有信心执行此操作：

```
mkdir testit
cd testit
mkdir big_folder tmp_folder
touch big_folder/file1.pdf
touch big_folder/file2.pdf
mv big_folder/file1,pdf tmp_folder/
rm -r big_folder
mv tmp_folder big_folder 
```

无论有多少，`rm -r big_folder`都会删除所有文件。`big_folder`您只需要非常小心，您首先拥有要保留的所有文件/文件夹，在这种情况下是`file1.pdf`

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-07-16T05:39:31.607

当一个应用程序创建了数百万个无用的日志文件并填满了所有 inode 时，我遇到了类似的问题。我求助于“定位”，将所有文件“定位”到一个文本文件中，然后一一删除。花了一段时间，但完成了工作！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-12-23T22:16:53.557

# 我解决了`for`

### 我`macOS`继续`zsh`

#### 我只移动了数千个`jpg`文件。在`mv`一行命令内。

###### 确保您尝试移动的文件的名称中没有空格或特殊字符

```
for i in $(find ~/old -type f -name "*.jpg"); do mv $i ~/new; done 
```

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2016-05-11T09:29:15.577

比使用 xargs 更安全的版本，也不是递归的： `ls -p | grep -v '/$' | grep '\.pdf$' | while read file; do rm "$file"; done`

在这里过滤我们的目录有点不必要，因为'rm'无论如何都不会删除它，并且为了简单起见可以将其删除，但是为什么要运行肯定会返回错误的东西呢？

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2017-08-24T21:54:36.463

使用 GNU 并行 ( `sudo apt install parallel`) 非常简单

它运行多线程命令，其中“{}”是传递的参数

例如

`ls /tmp/myfiles* | parallel 'rm {}'`

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2018-01-30T10:20:58.230

要删除前 100 个文件：

rm -rf 'ls | 头 -100'

* * *

## 回答 #31

> 赞同：-5
> 
> 时间：2017-01-31T23:41:26.970

对于这个问题，下面的选项似乎很简单。我从其他线程中获得了此信息，但它对我有所帮助。

```
for file in /usr/op/data/Software/temp/application/openpages-storage/*; do
    cp "$file" /opt/sw/op-storage/
done 
```

只需运行上述一个命令，它就会完成任务。

# cocoa-touch - 在 UITextView 中显示带有超大首字母的文本块

> ID：11289552
> 
> 赞同：3
> 
> 时间：2012-07-02T07:43:42.360
> 
> 标签：cocoa-touch, uitextview, text-formatting

有没有办法在 a 中提供这种效果`UITextView`？如果没有，那我怎样才能达到这个效果？

![在此处输入图像描述](../Images/fdcdd4c19ef58b40ef46db25851dc51d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:24:10.403

有同样的要求，我创建了一个用`UIView`首字下沉绘制文本的子类。文本是使用核心文本绘制的，正如@CodaFi 建议的那样，首字下沉是在单独的核心文本框架中绘制的。

类的完整实现：[​​https://gist.github.com/4596476](https://gist.github.com/4596476)

它的肉看起来像这样：

```
- (void)drawRect:(CGRect)rect {
    // Create attributed strings
    NSAttributedString *bodyText = [[NSAttributedString alloc] initWithString:[self.text substringWithRange:NSMakeRange(1, self.text.length -1)] attributes:_bodyAttributes];
    NSAttributedString *capText = [[NSAttributedString alloc] initWithString:[[self.text substringWithRange:NSMakeRange(0, 1)] uppercaseString] attributes:_capAttributes];

    CGRect capFrame = CGRectMake(0, 0, [capText size].width, [capText size].height);

    // Set up graphics context
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // Create type frames
    CGMutablePathRef bodyPath = CGPathCreateMutable();
    CGAffineTransform transform = CGAffineTransformTranslate(CGAffineTransformMakeScale(1, -1), 0, -self.bounds.size.height);
    CGPathMoveToPoint(bodyPath, &transform, CGRectGetMaxX(capFrame), 0);
    CGPathAddLineToPoint(bodyPath, &transform, self.bounds.size.width, 0);
    CGPathAddLineToPoint(bodyPath, &transform, self.bounds.size.width, self.bounds.size.height);
    CGPathAddLineToPoint(bodyPath, &transform, 0, self.bounds.size.height);
    CGPathAddLineToPoint(bodyPath, &transform, 0, CGRectGetMaxY(capFrame));
    CGPathAddLineToPoint(bodyPath, &transform, CGRectGetMaxX(capFrame), CGRectGetMaxY(capFrame));
    CGPathCloseSubpath(bodyPath);

    CGMutablePathRef capPath = CGPathCreateMutable();
    CGPathAddRect(capPath, &transform, CGRectMake(0, 0, capFrame.size.width+10, capFrame.size.height+10));

    // Draw text
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef) bodyText);
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), bodyPath, NULL);
    CFRelease(framesetter);
    CTFrameDraw(frame, context);
    CFRelease(frame);
    framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)capText);
    frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), capPath, NULL);
    CFRelease(framesetter);
    CTFrameDraw(frame, context);
    CFRelease(frame);
} 
```

它的要点是您创建两条路径，一个包含首字下沉的矩形，以及一个为其余文本移除凹口的矩形。gist 上的完整实现允许您使用属性控制字体、首字下沉周围的间距以及整个视图的内容插入。

它没有实现 a 的大部分功能`UITextView`（只有我需要的功能），因此它可能不是一个完整的解决方案。

希望有帮助！

# map - 根据温度更改标记

> ID：11289553
> 
> 赞同：0
> 
> 时间：2012-07-02T07:43:51.647
> 
> 标签：map, icons, google-maps-markers, google-fusion-tables, temperature

我在这里有一个示例融合表地图[http://jsfiddle.net/qEGpz/](http://jsfiddle.net/qEGpz/)
我想根据温度 > 75 度将标记设置为 red_stars。但是我的代码不能正常工作。链接到我的融合表在这里[https://www.google.com/fusiontables/DataSource?snapid=S567077W7iF](https://www.google.com/fusiontables/DataSource?snapid=S567077W7iF)任何人请帮忙。先感谢您。

关于，
*Pradeep Shankar M*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:11:16.523

您的示例似乎运行良好。问题是什么？注意：red_stars 图标相当微妙。看起来像标准的谷歌地图红色标记，带有黑色中心星与黑色中心圆。

这是允许的 Fusion Table [iconNames](https://www.google.com/fusiontables/DataSource?dsrcid=308519)列表。选择 Visualize -> Map 以查看它们的外观。也许您需要使用“capital_small_highlight”。

再看一眼，再猜测你的问题是什么。尝试这个：

```
layer8 = new google.maps.FusionTablesLayer({
    query: {
      select: 'Geometry',
      from: '4080901',
      where: "Temp >= 75"
    },
    styles: [ {
      where: "Temp >= '75'",
      markerOptions: {
        iconName: "red_stars",
      }
    }]
  });
  layer8.setMap(map); 
```

# extjs - ExtJS 4.1 事件委托不起作用

> ID：11289555
> 
> 赞同：0
> 
> 时间：2012-07-02T07:43:58.687
> 
> 标签：extjs, extjs4.1

我正在使用 extjs 4.1 并尝试进行事件委托，在我的情况下，它是将模糊事件附加到我表单的所有文本字段，但它不起作用，我在 firebug 中也没有收到任何错误，我不知道我在附加事件时出错的地方是我放置代码的错误位置，而且我注意到根据以下链接的文档：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-method-on](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-method-on)

选项对象的委托属性不再存在。下面是我的代码：

```
Ext.onReady(function () {

    var loadForm = function () {
        Ext.getCmp('TestForm').getForm().setValues({ name: 'some text', email: 'first', dob: '12/12/2009' });
    }

    Ext.define('userForm', {
        extend: 'Ext.form.Panel'
            , alias: 'widget.userform'
            , frame: true
          , initComponent: function () {

              Ext.apply(this, {
                  title: 'User Form'
                , height: 350
                , items: [{
                    xtype: 'textfield'
                   , fieldLabel: 'Name'
                   , name: 'name'
                   , id: 'nameId'
                   , enableKeyEvents: true
                }, {
                    xtype: 'textfield'
                   , fieldLabel: 'Email'
                   , name: 'email'
                   , id: 'emailId'
                }, {
                    xtype: 'datefield',
                    fieldLabel: 'DOB',
                    id: 'dob',
                    name: 'dob',
                    format: 'Y-m-d'
                }, {
                    xtype: 'textfield',
                    fieldLabel: 'Age',
                    id: 'age',
                    name: 'age'
                }, {
                    xtype: 'textfield',
                    fieldLabel: 'Guardian',
                    id: 'guardian',
                    name: 'guardian'
                }]

              });

              this.callParent(arguments);
          } //eoinitComponent

    });

    var userForm = Ext.create('userForm', {
        renderTo: 'loadPanel',
        id: 'TestForm',
        listeners: {
            afterrender: function (formCmp, eOpts) {
                loadForm();
            },
            render: function (formCmp, eOpts) {
                Ext.getCmp("TestForm").on(
                            'blur',
                            function (e, t) {
                                // handle blur
                                console.info(t.id);
                            },
                            this,
                            {
                                // filter the target element to be a descendant with the class '.x-form-field'
                                delegate: '.x-form-field'
                            }
                        );
            }
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:21:23.603

首先，该`on`方法不`delegate`作为参数，因此该行是完全没有必要的。

然后，在您的渲染事件中，您可以只使用`formCmp.on()`而不是`Ext.getCmp().on()`.

最后，您希望在每个字段上都出现模糊事件，而不是在表单本身上。以下代码应该可以工作：

```
render: function (formCmp, eOpts) {
    // For each field.
    formCmp.getForm().getFields().each( function( aField )  {
        // If it's a textfield.
        if ( aField.is('textfield') ) {
            aField.on( 'blur', this.onFieldBlur, this)
        }
    }, this ); // notice the this scope for the each method.
} 
```

# eclipse - eclipse build 自动修改

> ID：11289561
> 
> 赞同：1
> 
> 时间：2012-07-02T07:44:17.237
> 
> 标签：eclipse, build, makefile, build-automation, gnu-make

我希望 eclipse 只`make`在当前文件所属的目录中运行，而不是在整个项目中运行。这变得更加重要，因为该项目非常大，`make`顶层大约需要 20 分钟。大部分是`entering-leaving directories`等等`checking if build is needed`。所以我必须手动打开目录`cmd`并运行`make`. 所以我希望eclipse在它的`build automatically`过程中做到这一点。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:59:35.520

选择您的项目，打开*Properties -> Builders*。取消选中您不想再自动运行的构建器。点击“新建...”并选择“外部程序”。

现在您可以指定**每次构建项目时自动运行的**命令。要将当前选定文件的父目录作为构建命令的参数，您可以使用`${selected_resource_loc}\..`. 有关可以在运行时解析的更多此类占位符，请参见*变量按钮。*

之后，如果您还想在项目资源管理器中查看新创建的文件，您可能需要配置“刷新”选项卡。如果经过反复试验后一切正常，您可能还需要查看“构建选项”选项卡以使其在后台运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:10:47.393

如果您可以将构建步骤添加到外部工具配置中，则可以从中创建手动构建器。

外部工具配置的设置与运行配置类似，但允许执行不同类型的步骤（例如 shell、Ant - 我有理由确定，也可以支持 make-files，但我不使用它们 - 如果不使用，那么您可以添加一个运行 make-file 的 shell 脚本）。

要进行此设置，您必须转到项目属性（右键单击项目，选择属性），然后转到 Builders 页面，并添加一个从外部工具配置创建的新构建器。

我希望我已经足够清楚了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:09:51.033

尝试使用项目属性*-> C/C++ 构建 -> 构建器设置选项卡中的***构建目录**选项。默认值为. 然而 Eclipse 提供了丰富的预定义变量集（请参阅**变量...**按钮下）。对你来说最有趣的可能是这些：*`${workspace_loc:/your_project}`*

 ****   `build_files`

    > 返回其修改导致当前构建的绝对文件系统路径集。可以将字符列表“a”（添加）、“c”（更改）、“r”（删除）、“f”（仅限文件）、“d”（仅限目录）作为参数提供给将文件列表限制为仅这些类型的增量。默认为所有增量。

*   `selected_resource_loc`

    > 返回所选资源的绝对文件系统路径。

您可以尝试使用这些变量的其他地方是“*行为”选项卡中的“生成***构建目标**”选项。***

# android - 在 android 上监控 MMS_RECEIVED 就像 SMS_RECEIVED

> ID：11289568
> 
> 赞同：2
> 
> 时间：2012-07-02T07:44:40.933
> 
> 标签：android, broadcastreceiver, telephony, mms, wap

因此，我正在设置一个程序，该程序播放在您收到消息、彩信或短信时设置的声音。我让它与 SMS 一起使用，但 MMS 没有做任何事情。下面是运行 BroadcastReceiver 的类的代码：

```
/**
 * This class overrides the main BroadcastReceiver to play the tone
 * at the given textSoundPath.
 * @author Jesse Stewart
 *
 */
public class TextMonitor extends BroadcastReceiver {

    public static String textSoundPath;     //this is the sound set to play when
                                            //sms or mms is received.

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        MediaPlayer tonePlayer = new MediaPlayer();

        try {
            tonePlayer.setDataSource(textSoundPath);
        } catch (Exception e) {
            System.out.println("Couldn't set the media player sound!!!!!");
            e.printStackTrace();
        }

        try {
            tonePlayer.prepare();
        } catch (Exception e) {
            System.out.println("Couldn't prepare the tone player!!!!!");
            e.printStackTrace();
        }

        tonePlayer.start();
    }

} 
```

我在清单中这样设置它：

```
<receiver android:name=".TextMonitor">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="android.provider.Telephony.MMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

当然包括：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECEIVE_MMS" /> 
```

我还尝试像这样在清单中执行接收器：

```
<receiver android:name=".TextMonitor">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver>

<receiver android:name=".TextMonitor">
    <intent-filter>
            <action android:name="android.provider.Telephony.MMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

我还尝试放入接收器：

```
<action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" /> 
```

但这只是没有任何效果。

任何帮助，将不胜感激。谢谢。附带说明一下，为什么有时在清单中的类名之前放一个句点而不是其他的？像 android:name=".TextMonitor" 有时是 android:name="TextMonitor"。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T07:49:07.727

**您还需要指定数据方案。**

清单条目应该是

```
<receiver android:name=".PushReceiver">
  <intent-filter>
    <action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" />
    <data android:mimeType="application/vnd.wap.mms-message" />
  </intent-filter>
</receiver> 
```

# django - Django 管理模板：访问模板中的请求对象

> ID：11289571
> 
> 赞同：5
> 
> 时间：2012-07-02T07:44:45.263
> 
> 标签：django, django-admin, django-templates, django-1.2

我需要所有管理模板中的请求对象。在前端模板中，我可以通过渲染模板来实现`RequestContext`：

```
return render_to_response('my_template.html',
    my_data_dictionary,
    context_instance=RequestContext(request)
) 
```

有了它，我可以在前端访问请求对象：

```
{{ request.path }} 
```

如何为 Django 1.2 中的所有管理视图执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:01:38.050

如果您已将请求`'django.core.context_processors.request'`添加到您`TEMPLATE_CONTEXT_PROCESSORS`的`settings.py`

# ruby-on-rails - 如何使用 xpath 从选定节点的子节点中进行选择？i

> ID：11289573
> 
> 赞同：0
> 
> 时间：2012-07-02T07:44:52.460
> 
> 标签：ruby-on-rails, ruby, xpath, nokogiri

我在获取与格式匹配的选定节点的子节点时遇到问题。它以某种方式返回给我格式的全局选择，而不是从选定的格式中选择。

```
 doc = Nokogiri::XML(f)
  group_with_obj_and_unit =  doc.xpath("/x:svg/x:g[x:text[matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$')]][x:text[not(matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$'))]][x:path or x:rect or x:circle or x:ellipse or x:polyline or x:polygon]", FindWithRegex, "x" => "http://www.w3.org/2000/svg")
  group_with_obj_and_unit.each do |matched_group|
    text_object = matched_group.xpath("//x:g/x:text[matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$')]", FindWithRegex, "x" => "http://www.w3.org/2000/svg")
    object = matched_group.xpath("//x:g/x:path | /x:svg/x:g/x:rect | /x:svg/x:g/x:circle | /x:svg/x:g/x:ellipse | /x:svg/x:g/x:polyline | /x:svg/x:g/x:polygon", "x" => "http://www.w3.org/2000/svg")

    #object['id'] = text_object.text
  end 
```

**已编辑**

在@pguardiario 建议之后

```
 def run!
    fileContent = File.new @file_path, "r"
    file = File.open @file_path, "r+"
    doc = Nokogiri::XML(fileContent)

    group_with_obj_and_unit =  doc.xpath("/x:svg/x:g[x:text[matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$')]][x:text[not(matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$'))]][x:path or x:rect or x:circle or x:ellipse or x:polyline or x:polygon]", FindWithRegex, "x" => "http://www.w3.org/2000/svg")
    group_with_obj_and_unit.each do |matched_group|
      #find the text object and the object of the selected node
      text_object = matched_group.at_xpath("./x:text[matches(text(),'^#[0123456789]+\-[0123456789][\/[0123456789]+]*$')]", FindWithRegex, "x" => "http://www.w3.org/2000/svg")
      object = matched_group.at_xpath("./x:path | ./x:rect | ./x:circle | ./x:ellipse | ./x:polyline | ./x:polygon", "x" => "http://www.w3.org/2000/svg")

      object['id'] = text_object.text
    end
    file.write doc.to_xml

    file.close
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:04:37.260

*   // 表示匹配根之后的任何地方
*   .// 表示匹配当前节点之后的任何位置。

# java - 是否可以在休眠春季从 DataAccessException 接收 URL？

> ID：11289578
> 
> 赞同：0
> 
> 时间：2012-07-02T07:45:14.280
> 
> 标签：java, database, spring, hibernate, exception

我使用 spring hibernate 框架并捕获查询更新接收

```
DataAccessException 
```

对于写入错误日志，我想接收数据库的 URL、SQL 错误等。是否可以从 DataAccessException 类型接收？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:27:36.137

DataAccessException 并不总是带来 SQLException。

您无法从异常访问数据库信息。您可以从数据源获得这些信息。

根据您的驱动程序，您可以将 SQLException 包装到 DataAccessException 中。但情况并非总是如此。

不要忘记异常是问题的包装。它不包含有关环境的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:27:57.713

有[DataAccessException 的来源](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-tx/2.5.6/org/springframework/dao/DataAccessException.java)，其中定义了所有方法，它只是 Exception 的一个包装器，所以没什么可看的。考虑到它不是数据库可能抛出的唯一异常，您应该寻找其他异常，例如[JDBCException](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/JDBCException.html)。

您需要的东西仍然可以检索：

1.  通过 ex.getMessage() 获取 SQL 错误；
2.  [从 Hibernate session 获取数据库 URL](https://stackoverflow.com/questions/821466/how-can-i-get-the-database-name-i-am-connected-to-through-hibernate)。
3.  [使用 Hibernate 显示真实的查询 SQL](https://stackoverflow.com/questions/2536829/hibernate-show-real-sql)。

# java - Java InputStreamReader/Reader 抛出 NullPointerException

> ID：11289579
> 
> 赞同：-2
> 
> 时间：2012-07-02T07:45:15.207
> 
> 标签：java, sockets

我有一个简单的套接字服务器示例，用户连接到它并且可能会或可能不会立即发送输入（在这种情况下它不会）。Java 抛出异常，我不明白为什么。

这是代码：

```
public static void main(String[] args) {
    org.apache.log4j.PropertyConfigurator.configure("conf/log4j.properties");
    log.debug("Application started");

    try {
        // Setup socket server
        int port = 9999;
        sv = new ServerSocket(port);

        // Accept incoming sockets or block
        Socket s = sv.accept();
        log.warn("Accepted new client connection!");

        InputStreamReader reader = new InputStreamReader(s.getInputStream(), "UTF-8");

        while(!reader.ready()) {}

        char[] b = null;
        reader.read(b);
        log.warn(new String(b));

    } catch (Exception e) {
        System.out.print(e.getMessage() + "\n");
        e.printStackTrace();
        System.exit(1);
    }
} 
```

和堆栈跟踪：

```
DEBUG [main] (Main.java:38) - Application started
WARN [main] (Main.java:47) - Accepted new client connection!
null
java.lang.NullPointerException
    at java.io.Reader.read(Reader.java:140)
    at com.cinefyapp.Main.main(Main.java:51) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:47:22.370

你的`char[]`为空，数据不能读入`null`数组

> 字符[] b = null;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:06:47.160

初始化你的 char 数组

```
char[] b = new char[256]; 
```

并使用[read(char[] cbuf, int offset, int length)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html#read%28char%5b%5d,%20int,%20int%29)。

# c# - 将参数传递给 SharePoint 计时器作业

> ID：11289584
> 
> 赞同：2
> 
> 时间：2012-07-02T07:45:24.550
> 
> 标签：c#, sharepoint

如何将参数传递给 SharePoint 计时器作业？

顺便说一句，我只是 SharePoint 的初学者。

谢谢。

**更新**

我正在根据外部数据库状态将文档从一个站点移动到另一个站点。所以我想将那些数据库用户名和密码、SharePoint 网站的名称作为参数传递。我不想硬编码那些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:59:35.957

您可以使用[SPWorkItemJobDefinition](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spworkitemjobdefinition.aspx)

可以`TextPayload`用来传递参数`(document url, fromSiteUrl, toSiteUrl etc.)`

这就像使用队列。从 UI 传入一些参数。`Timerjobs`处理队列，读取有效负载并开始处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:41:57.210

当您编写计时器作业时，您将覆盖`Execute(Guid targetInstanceId)`. `SPJobDefinition`不幸的是，在这里您不能传递任何参数。

您可以做的是将值存储在某个地方，您的计时器作业将能够访问它们。正如[这个问题所](https://stackoverflow.com/questions/1637349/sharepoint-timer-job-and-log4net)提到的，一种方法是将其放在`.config`14 Hive 内的文件中。或者一些数据库表。或者`SPPropertyBag`在你的`SPWeb`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T06:13:03.963

您可以将您的用户 ID 和 psw 存储在配置文件中，即 OWSTIMER.EXE.CONFIG。您可以在 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\BIN 中找到此文件。如果不是他们，那么您可以创建一个。请确保文件名必须是大写字母。下面我提到了这个配置文件的示例内容。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
 <appSettings>
      <add key="USERID" value="testUser" />
      <add key="PSW" value="testPSW" />
    </appSettings>
</configuration> 
```

如果您使用的是 C#，那么您可以使用

```
System.Configuration.ConfigurationManager.AppSettings["USERID"]
System.Configuration.ConfigurationManager.AppSettings["PSW"] 
```

一旦您在配置文件中进行了更改，请不要忘记重置您的共享点计时器服务。

# javascript - 如何使用 Javascript 隐藏 Metro searchPane

> ID：11289588
> 
> 赞同：1
> 
> 时间：2012-07-02T07:45:30.583
> 
> 标签：javascript, microsoft-metro

是否可以使用 javascript 从我的应用程序中隐藏 Microsoft searchPane？如果是，那么如何？

据我从文档中可以看出，只能打开（显示）searchPane。但是有一个可见性更改事件和一个布尔（只读..）可见字段。由于我处于严格模式，因此无法更改此选项。

获取 searchPane 的代码：

```
var searchPane = Windows.ApplicationModel.Search.SearchPane.getForCurrentView();
searchPane.show(); ** Opens searchPane, yay! **
// searchPane.hide(); ** Exception, not implemented by Microsoft yet.. :( ** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:56:09.643

Microsoft 不提供以编程方式隐藏搜索窗格的方法。这是设计使然，以确保所有应用程序在搜索方面提供相同的用户体验。

# javascript - 在 node.js 中，模块中的一个文件如何查看模块中另一个文件中的函数？

> ID：11289591
> 
> 赞同：0
> 
> 时间：2012-07-02T07:45:49.690
> 
> 标签：javascript, node.js, module

在包含两个文件的模块中`./modx`：`modx.js`和`helper.js`：

./modx/package.json:

```
{ "name" : "module x",
  "main" : "./modx.js" } 
```

./modx/helper.js：

```
function subFunc() { } 
```

./modx/modx.js：

```
exports.mainFunc = function() {
   var x = subFunc();
} 
```

当两者都在模块中时`subFunc()`，我如何使其`helper.js`可见？`modx.js``modx`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:54:25.757

在 ./modx/helper.js 里面

```
var subFunc = function subFunc() {}
exports.subFunc = subFunc; 
```

内部 .modx/modx.js

```
var helper = require('./helper.js');
exports.mainFunc() {
    var x = helper.subFunc();
} 
```

这里的结果是helper.js中的subFunc函数对外可用，而modx.js中的mainFunc函数对外可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:51:21.623

脚本中唯一`A`可见的脚本对象`B`是`module.exports`. 将对象/函数添加到`module.exports`（就像您使用 一样`mainFunc`）使它们从外部可见。没有其他办法。

# google-chrome - WebDriver：如何为 Chrome 指定首选语言

> ID：11289597
> 
> 赞同：8
> 
> 时间：2012-07-02T07:46:11.867
> 
> 标签：google-chrome, webdriver, selenium-chromedriver

我正在尝试让我的远程 chrome 驱动程序以德语而不是英语请求页面。按照[chromedriver 文档](http://code.google.com/p/chromedriver/wiki/CapabilitiesAndSwitches)和[chrome 首选项列表](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/pref_names.cc?view=markup)，我尝试将其设置为：

```
 capabilities.setCapability(ChromeOptions.CAPABILITY, getChromeOptions());
    Map<String, String> chromePrefs = new HashMap<String,String>();
    chromePrefs.put("settings.language.preferred_languages", "de-DE,de");
    capabilities.setCapability("chrome.prefs", chromePrefs); 
```

我可以看到它从日志文件中到达 chromedriver：

```
[0.453][FINE]:      Initializing session with capabilities {
   "browserName": "chrome",
   "chrome.prefs": {
      "settings.language.preferred_languages": "de-DE,de"
   },
   "chromeOptions": {
      "args": [ "--ignore-certificate-errors" ],
      "extensions": [  ]
   },
   "platform": "ANY",
   "version": null
} 
```

但它仍然请求英文页面，这也可以通过打开首选项中的内容设置来查看。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T13:36:00.477

*（编辑）*长话短说：

1.  **`intl.accept_languages`**是控制页面请求的语言的首选项键。
2.  使用（较新和首选）**`ChromeOptions`**机制设置首选项的功能（否则，如果您或您的语言绑定设置了任何 ChromeOptions，它将不起作用，请参阅问题[104](http://code.google.com/p/chromedriver/issues/detail?id=104)和[95](http://code.google.com/p/chromedriver/issues/detail?id=95)）。

    ChromeOptions 对设置首选项的支持尚未完全实现。因此，不幸的是，您必须使用我的[评论 6 到问题 95中的](http://code.google.com/p/chromedriver/issues/detail?id=95#c6)**肮脏解决方法**

    另一种**方法**可能是创建具有所需语言设置的用户配置文件，并使用 ChromeOption 设置（命令行）选项以使用此配置文件，如[chromedriver 功能 wiki 页面](http://code.google.com/p/chromedriver/wiki/CapabilitiesAndSwitches)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T17:07:35.097

Pyhon 示例

**注意：**我使用“en，en_US”接受的语言对其进行测试，但我不明白为什么只要系统上提供语言环境，它就不能与 de_DE 一起使用。

这项工作与硒

```
from selenium.webdriver import Chrome
from selenium.webdriver.chrome.options import Options
from splinter.driver.webdriver import BaseWebDriver, WebDriverElement

options = Options()
options.add_experimental_option('prefs', {'intl.accept_languages': 'de_DE'})

browser = BaseWebDriver()
browser.driver = Chrome(chrome_options=options)

browser.visit('http://example.com') 
```

使用 splinter 有 2 个选项：

仅分裂 API

```
from splinter import Browser
from splinter.driver.webdriver.chrome import Options

options = Options()
options.add_experimental_option('prefs', {'intl.accept_languages': 'de_DE'})

browser = Browser('chrome', options=options)

browser.visit('http://example.com') 
```

分裂和硒 API

```
from splinter import Browser
from selenium import webdriver

options = webdriver.ChromeOptions()
options.add_experimental_option('prefs', {'intl.accept_languages': 'de_DE'})

browser = Browser('chrome', options=options)

browser.visit('http://example.com') 
```

# jquery - 在动态加载的 tinyMCE 编辑器中设置内容

> ID：11289599
> 
> 赞同：2
> 
> 时间：2012-07-02T07:46:26.377
> 
> 标签：jquery, tinymce

我有网页（index.pl），在它的**div**（id = 'right'）中，我动态加载了一个包含 **textarea**的页面（editor.pl） 。为了将这个 textarea 更改为**TinyMce 编辑器**，我动态加载了一个 js 文件（include_tiny_mce. js) 具有 tinyMce.init() 函数如下：

```
$.ajax({
    type:'POST',
    url:'editor.pl',
    success:function(msg){
    $("#right").html(msg);
    $("head").append("<script src='/include_tiny_mce.js'></script><script src='/scripts.js'></script>");

    }, 
```

现在这一切工作正常，所有文本区域都更改为 tinyMce，但是当我使用
`tinyMCE.activeEditor.setContent("hello world");`
js 文件（script.js，已包含在 index.pl 中）在 tinyMce 中设置内容时，它不显示内容。任何人都可以告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T07:50:59.787

当你第一次“激活/使用”它（比如点击它）时，变量 activeEditor 被设置。如果您只使用一个编辑器，您可以使用`tinymce.editors[0]`：

```
tinymce.editors[0].setContent("hello world"); 
```

在所有其他情况下，以这种方式使用 tinymce 实例对象

```
tinymce.get('right').setContent("hello world"); 
```

# python - 关于 pexpect 模块的新说明

> ID：11289602
> 
> 赞同：2
> 
> 时间：2012-07-02T07:46:38.583
> 
> 标签：python, pexpect

我正在浏览 pexpect 文档，它说您可以调用 run() 函数来执行命令并返回输出

所以我做了以下但它出错了。我在这里错过了什么吗？

```
>>> pexpect.run('pwd')
'/home/vijay\r\n'
>>> pexpect.run('cd /home')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 219, in run
    child = spawn(command, maxread=2000, logfile=logfile, cwd=cwd, env=env)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 429, in __init__
    self._spawn (command, args)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 516, in _spawn
    raise ExceptionPexpect ('The command was not found or was not executable: %s.' % self.command)
pexpect.ExceptionPexpect: The command was not found or was not executable: cd.
>>> 
```

我正在编写一个脚本，在该脚本上我下载了一个 git 存储库并想要执行 cd （到该存储库），然后传递一些命令。所以我决定使用 pexpect 模块，因为它提供了交互式控制台

让我知道我是否在这里遗漏了什么？

谢谢，-维杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:50:47.553

cd 是 shell 的内置函数。`cwd`您可以使用 run() 方法关键字 arg在您想要的任何目录中运行您想要执行的任何命令：

```
pexpect.run("pwd", cwd="/home") 
```

有关更多信息，请查看 API 文档： http: [//pexpect.sourceforge.net/pexpect.html](http://pexpect.sourceforge.net/pexpect.html)

或者，您可以在执行 pexpect方法之前使用 Python 的`os.chdir()`函数来更改当前工作目录：`run`

```
os.chdir("/home")
pexpect.run("pwd") 
```

请参阅：[http ://docs.python.org/library/os.html](http://docs.python.org/library/os.html)

# multithreading - 在 Google App Engine 中，python 模块加载是线程安全的吗

> ID：11289606
> 
> 赞同：1
> 
> 时间：2012-07-02T07:47:03.483
> 
> 标签：multithreading, google-app-engine, python-2.7

Google App Engine 实现了自定义模块加载器。

这个加载器是线程安全的吗？

意味着从一个线程加载模块将锁定从另一个线程加载该模块直到将被加载 - 想要避免在中间重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:42:42.393

[Python 导入是线程安全的](http://docs.python.org/library/threading.html#importing-in-threaded-code)，我没有看到 AppEngine 团队决定破坏它的场景。

# c# - 添加您自己的 Automapper 命名规则

> ID：11289621
> 
> 赞同：1
> 
> 时间：2012-07-02T07:48:06.867
> 
> 标签：c#, asp.net-mvc, automapper

我们使用 Automapper 将我们的实体（来自 EF/数据库）映射到视图模型。我们的项目处理一个与名为 的类有关系的实体，该类`Classification`具有一堆属性，每个属性都有一个`DisplayName`属性。

每当我们有这样的视图模型时：

```
public class PersonViewModel{
  public string Nationality{get;set;}
  public string Gender {get;set;}
  public string HairColour {get;set;}   
} 
```

我们的实体可能是（这不是一个真实的例子）

```
public class Person {
  public Classification Classification {get;set;}
  public string Name {get;set;}
}

public class Classification {
  public Gender Gender {get;set;}
  public HumanHairColour HairColour {get;set;}
  public Nationality Nationality {get;set;}
} 
```

并且里面的每个属性类`Classification`都有一个类似的`DisplayName`属性

```
public class Gender {
  public string DisplayName { get; set; }
  public int Id { get; set; }
}

public class Nationality {
  public string DisplayName { get; set; }
  //...
}

public class HumanHairColour {
  public string DisplayName { get; set; }
  //...
} 
```

现在我们必须手动为 上的每个属性添加映射，`PersonViewModel`除非我想命名它`ClassificationNationalityDisplayName`或类似的愚蠢的东西。

是否可以在我们的设置中添加某种规则`Automapper`，要求它检查`Classification`类是否具有相似名称的属性，然后将其映射到使用它的字符串`DisplayName`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:46:47.307

You could rename the properties in your viewmodel to:

```
public class PersonViewModel {
  public string NationalityDisplayName { get; set; }
  public string GenderDisplayName { get; set; }
  public string HairColourDisplayName { get; set; }   
} 
```

Then Automapper will map everything correctly with:

```
Mapper.CreateMap<Person, PersonViewModel>(); 
```

# ios - IOS restkit错误

> ID：11289623
> 
> 赞同：0
> 
> 时间：2012-07-02T07:48:18.017
> 
> 标签：ios, restkit

我正在发送带有对象加载器的帖子并在输出窗口中收到此错误。仅供参考，我的`didFailWithError:`代表从未受到打击。不知道为什么。

```
`objectLoader:didFailWithError:]:` unrecognized selector `sent to class 0x123608` 
```

我怎么知道什么是 0x123608？

我在 AppDelegate 类中设置了路由器，也在 AppDelegate 中设置了映射。

这是我的类中继承 RKObjectLoaderDelegate 的方法。我正在使用共享单例。

```
[[RKObjectManager sharedManager] postObject:review usingBlock:^(RKObjectLoader *loader){       
//     loader.params=params,
       loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[myclass class]];
       loader.serializationMIMEType = RKMIMETypeJSON; // We want to send this request as JSON
       loader.method = RKRequestMethodPOST;
       loader.serializationMapping = [RKObjectMapping serializationMappingUsingBlock:^(RKObjectMapping* mapping) {
           [mapping mapAttributes:@"field1", @"field2",@"field3",nil];            
       }];
       loader.targetObject = nil;
       loader.delegate = self;
   }];       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:50:59.597

您正在接收消息`didFailWithError:`，而您的班级无法识别它。你在课堂上实现了那个方法吗？至于`didFailWithError:`没有被调用是因为你没有实现或者你没有在正确的类上实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:13:43.437

您正在设置`self`为您的委托 ( `loader.delegate = self;`)，但您似乎没有实现委托方法`objectLoader:didFailWithError:`和/或未声明您符合委托协议`RKObjectLoaderDelegate`。
`– objectLoader:didFailWithError: required method`是在委托中实现的必需方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:25:46.423

如果您查看 RestKit 源代码，在 file 中`RKObjectLoader.m`，您将看到`didFailWithError message`有以下代码：

```
 if (!self.isCancelled)
    {
        [self informDelegateOfError:error];
    } 
```

当我收到超时错误时，它会到达此 if 语句并将`isCancelled`设置为`YES`，因此它会跳过代码以通知委托。这似乎是`RestKit`代码中的错误。`RestKit`这段代码与我使用的以前版本非常不同。我不知道为什么`isCancelled` `boolean`设置为`YES`，但是如果您注释掉 if 语句，它将按预期将错误传递给委托。

# php - Json_encode 返回 Null Php/MYSQL

> ID：11289624
> 
> 赞同：1
> 
> 时间：2012-07-02T07:48:32.567
> 
> 标签：php, mysql, json

我有一个包含多行的表，我想用 json 对所有行进行编码。

我一直在寻找其他问题和解决方案，我尝试了很多不同的方法，但 json_encode 仍然返回 null

```
<?php
    $mysqli = new mysqli('localhost', 'root', 'password', 'testBasParmak');

    /* check connection */
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
    $sth = mysql_query("SELECT * FROM pictures");
    $rows = array();
    while($r = mysql_fetch_assoc($sth)) {
        $rows[] = $r;
    }
    print json_encode($rows); 

    $error = json_last_error();
    print  $error;

$mysqli->close();

?> 
```

终端的输出是

```
[]0 
```

如果我试试这个

```
$sth = mysql_query("SELECT * FROM pictures");
    $rows = array("id" => $id,"name" => $name,"description" => $description,"url" => $url,"users_id" => $users_id,"users_id" => $users_id,"totalvoteup" => $totalvoteup,"totalvotedown" => $totalvotedown,"totalvoteneutral" => $totalvoteneutral);
    while($r = mysql_fetch_assoc($sth)) {
        $row[] = $r;
    }
    print json_encode($rows); 

    $error = json_last_error();
    print  $error; 
```

终端的输出是

```
{"id":null,"name":null,"description":null,"url":null,"users_id":null,"totalvoteup":null,"totalvotedown":null,"totalvoteneutral":null}0 
```

也许它没有发送正确的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:50:20.300

`$row[] = $r;`

应该

`$rows[] = $r;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:28:17.413

最后我找到了答案，我的数据库连接是 mysqli 但我的查询`SELECT *`是 mysql 我需要更改的只是 mysql 命令到 mysqli

```
$sth = $mysqli->query("SELECT * FROM pictures");
    $rows = array();
    while($r = mysqli_fetch_assoc($sth)) {
        $rows[]=$r;
    }
    print json_encode($rows); 
```

给出正确的输出

```
["id":"2","name":"Jess","description":"who","url":"www","users_id":"705735067","totalvoteup":"0","totalvotedown":"0","totalvoteneutral":"0"},{"id":"3","name":"Jess","description":"who","url":"www","users_id":"705735067","totalvoteup":"0","totalvotedown":"0","totalvoteneutral":"0"},{"id":"4","name":"Jess","description":"who","url":"www","users_id":"705735067","totalvoteup":"0","totalvotedown":"0","totalvoteneutral":"0"}] 
```

# java - 两种获取时间的方法

> ID：11289626
> 
> 赞同：0
> 
> 时间：2012-07-02T07:48:53.397
> 
> 标签：java, datetime, time, unix-timestamp

> **可能重复：**
> [System.currentTimeMillis() vs. new Date() vs. Calendar.getInstance().getTime()](https://stackoverflow.com/questions/368094/system-currenttimemillis-vs-new-date-vs-calendar-getinstance-gettime)

到目前为止，我已经看到了两种在 Java 中获得时间的方法：

```
Calendar.getInstance().getTimeInMillis(); 
```

和

```
System.currentTimeMillis(); 
```

我知道后者是 UNIX 时间，即从 1970 年过去的时间……但是，什么时候第一次使用，什么时候第二次使用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:50:41.810

如果您需要第二个的语义（获取当前时间），则不要使用第一个。仅当您要将选择的特定时刻转换为纪元数时才需要第一个。请记住，这`currentTimeMillis`给出了 epoch*1000 时间。

# android - Android sqlite联合表，查找行属于哪个表

> ID：11289627
> 
> 赞同：1
> 
> 时间：2012-07-02T07:49:02.367
> 
> 标签：android, database, sqlite, union

我对数据库和使用 sqlite 数据库有点陌生，我将四个表联合起来，然后得到联合后的表，对于每一行，我想找出它最初属于哪个表。有没有一种天真的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:54:13.767

像这样做：

```
SELECT 'person' AS tablename, * FROM person UNION SELECT 'customer' AS tablename, * FROM customer 
```

# sql-server-2008 - 如何计算语句之间的每个日期值？

> ID：11289628
> 
> 赞同：2
> 
> 时间：2012-07-02T07:49:07.563
> 
> 标签：sql-server-2008

```
SELECT COUNT(VALUE) 
FROM TABLE 
WHERE ID ='ID' 
AND BETWEEN 'DATE1' AND 'DATE2' 
```

*   它将给出指定日期的总计数值

但是我需要每个日期的计数如何做到这一点...例如日期是 2012 年 1 月 1 日到 2012 年 4 月 1 日...我需要每个日期的计数，例如 1、2、3、4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:07:54.243

你添加一个`GROUP BY`子句

```
SELECT CONVERT(VARCHAR(10), YourDate, 101), COUNT(VALUE) 
FROM TABLE 
WHERE ID ='ID' 
AND Yourdate BETWEEN 'DATE1' AND 'DATE2'
GROUP BY CONVERT(VARCHAR(10), YourDate, 101) 
```

使用日期的捕获是摆脱时间部分。使用`CONVERT`样式 101 就是这样做的。

# jpa - 部署错误：... ...使用 jboss 设置 JPA 时没有可用的连接错误

> ID：11289636
> 
> 赞同：0
> 
> 时间：2012-07-02T07:49:32.637
> 
> 标签：jpa, jboss, persistence.xml

我正在将 glassfish jpa 应用程序移植到 jboss 并遇到此错误：

**部署错误：** 部署“persistence.unit:unitName=Avengers.war#AvengersPU”由于以下原因而出错：org.hiberna te.HibernateException：当没有可用连接时必须设置“hibernate.dialect”

可以使用 jboss 管理控制台成功测试连接，我可以手动登录到我的数据库，所以我对这个错误消息感到困惑。有人可以就我错过的配置提出建议吗？

这是我的**mysql-ds.xml**文件：

```
<datasources>
  <local-tx-datasource>
    <jndi-name>jdbc/thor_ds</jndi-name>
    <connection-url>jdbc:mysql://localhost:3306/thor</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>apple</user-name>
    <password>apple</password>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter</exception-sorter-class-name>   
    <metadata>
       <type-mapping>mySQL</type-mapping>
    </metadata>
  </local-tx-datasource>
</datasources> 
```

和我**的persistance.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="AvengersPU" transaction-type="JTA">
    <!--<jta-data-source>jdbc/thor_ds</jta-data-source>-->
    <jta-data-source>java:/jdbc/thor_ds</jta-data-source>
    <class>avenger.Grouptable</class>
    <class>avenger.MyUser</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
    </properties>
  </persistence-unit>
</persistence> 
```

**编辑：**按照 JMelnik 的说明，我的配置属性标签现在有：

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
</properties> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:04:08.370

你应该在你的 persistence.xml 中**设置你的数据库方言：**

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.DIALECT" />
</properties> 
```

将 DIALECT 替换为[hibernate 支持的数据库方言列表中的方言。](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/dialect/package-summary.html)

# php - 我应该使用带有 BuddyPress 的 WordPress 还是自定义脚本？

> ID：11289637
> 
> 赞同：1
> 
> 时间：2012-07-02T07:49:38.637
> 
> 标签：php, wordpress, buddypress

我想开发一个网站，人们可以在其中找到有关其他网站的有用信息。

类似于 DIGG.com

问题是我不知道为 WP 或 BP 编写代码，我需要自定义设计和功能

3 个月前我不知道 StackOverflow，我认为一个告诉你所有有用网站的网站会很有用，特别是对于在 IT 领域工作的人

google 为您提供基于关键字的搜索结果，但大多数人需要额外的

www.linkbook.co 是域名，我希望你明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:51:00.497

Buddypress 非常适合基于社区的网站，但是如果您想要 Digg 之类的东西，您应该查看 Pligg：

```
http://pligg.com/ 
```

它还拥有一个活跃的社区，其中包含大量附加组件。

值得一试。

# math - 如何计算相机位置，让指定的 3D 模型填充视口？

> ID：11289641
> 
> 赞同：1
> 
> 时间：2012-07-02T07:50:15.947
> 
> 标签：math, 3d, xna

如何计算相机位置，让指定的 3D 模型填充视口？应保持相机方向。相机是透视相机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:25:19.607

计算模型周围的边界球。假设半径为r，中心为c。将相机目标点放在球体的中心。如果您的相机具有视野 a，您可以计算从相机到相机目标所需的距离 L。

```
tan(a/2) = r/L 
```

这使

```
L = r/tan(a/2) 
```

如果相机视图方向是 v 以新的相机位置开始

```
p = c - normalize(v)*L 
```

这将保持相机的方向并确保整个模型可见。

请注意，如果您的视口是矩形而不是正方形，则必须使用视口较短边的 FOV。

# c# - 为什么在pictureBox上显示时硬盘上的图像变小并且有些失真？

> ID：11289646
> 
> 赞同：1
> 
> 时间：2012-07-02T07:50:35.397
> 
> 标签：c#

我的pictureBox1 设置为StretchImage，pictureBox1 的大小为：

656,422

现在，当我将图像旋转 270 度后将图像提取到硬盘时，我得到了以下结果：

![在此处输入图像描述](../Images/b439421dfe8a995541b7a183888cd57c.png)

当我将图像加载到 pictureBox1 运行我的应用程序时，图像如下所示：

![在此处输入图像描述](../Images/b7de864112c3ded14ee3a42256c59a01.png)

![在此处输入图像描述](../Images/39153f9790110ca9a23ddf8b558773d4.png)

如果我将pictureBox1 SizeMode 设置为Normal，我只会看到图像的一部分，只有它的顶部。有什么事吗？或者我必须使pictureBox1 尺寸更大或使硬盘上的图像尺寸更小？

使用 PictureBoxSizeMode.Zoom 后，我得到了这个：

最后一个最底部的图像。问题是我是否应该这样保留它，或者以某种方式将图片框的边框切割到左右两侧，这样我就只有它自己的图像了？有什么方法可以让图片框自动剪切所需的内容，以便根据图像大小留下自己的图像？

Sinze im 使用 Zoom 每个图像在图片框中留下不同数量的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:48:46.623

```
pictureBox1.SizeMode = PictureBoxSizeMode.Zoom; 
```

使用 Zoom 值会导致图像被拉伸或缩小以适合 PictureBox；但是，原始的纵横比保持不变。

更多信息： [msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)

***编辑：***

或者你可以试试这个：

```
pictureBox1.SizeMode = PictureBoxSizeMode.AutoSize 
```

PictureBox 的大小等于它包含的图像的大小。

[更多信息](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)

# cocoa - 可可：如何在可可的主应用程序窗口上添加半透明窗口？

> ID：11289648
> 
> 赞同：0
> 
> 时间：2012-07-02T07:50:47.157
> 
> 标签：cocoa

![在此处输入图像描述](../Images/d9e6d750ed47c8a7e7a7788032400dd6.png)![在此处输入图像描述](../Images/f36baf308a7cd0ced6399345ffe4e36e.png)

这里的窗口是一个半透明窗口，我想在应用程序启动时将此窗口添加到主窗口。但是，这个窗口不会在应用程序启动时添加到我的半透明窗口上

当您构建应用程序时，我想在 x-code 中实现类似的东西。

请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:23:50.407

至少您需要一个 的子类，`NSWindow`以便您可以使用`NSBorderlessWindowMask`. 这将完全移除框架。

实现具有非矩形形状的自定义窗口错觉的最简单方法是使默认的“方形”窗口完全不可见，并在`NSView`. 由于`NSColor`有一个 alpha 通道，发送`setBackgroundColor:[NSColor clearColor]`到`NSWindow`就足以擦除它；还调用`setOpaque:NO`以通知窗口服务器该窗口可以显示其后面的像素。

您的`NSView`子类需要 a`drawRect:`来呈现其余部分。可以使用具有 4 条弧线的路径来实现圆角矩形。灰色半透明背景可以通过类似于透明色的方式实现；只需使用（比如说）0.65 的 alpha 以及颜色值。

# python - 如何将图像与python进行比较

> ID：11289652
> 
> 赞同：0
> 
> 时间：2012-07-02T07:50:54.253
> 
> 标签：python, image, compare

我正在寻找一种算法来比较两个图像（我使用 python）。

我找到了 PIL 库、numpy/scipy 和 opencv。我知道如何进行灰度转换、二进制转换、制作直方图……没关系，但我不知道我必须对这两个图像做什么才能说“是的，它们相似//它们可能相似// 他们不匹配”。

你知道正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:57:10.993

一个简单的实现是聚合两个图像之间对应的归一化像素坐标之间的误差/差异。更先进的技术将涉及比较空间特征（使用[特征检测](http://en.wikipedia.org/wiki/Feature_detection_%28computer_vision%29)/计算机视觉技术）和颜色分布/频率技术。您还可以在比较它们之前尝试缩小图像（通过算法，或者在 3D 上下文中使用硬件/mipmapping）以提供更大的容差。出血边缘AFAIK是图像的小波变换/表示。

当然，您也可以搜索执行此操作的现有库，例如[pHash](http://www.phash.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:55:57.060

如果你想检查它们是否二进制相等，你可以计算它们的校验和并进行比较。如果您想检查它们是否以其他方式相似，它将更加复杂，并且绝对不适合在 Stack Overflow 上发布的简单答案。这仅取决于您如何定义相似性，但无论如何这需要良好的编程技能和编写大量代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T23:36:50.507

我放在一起的脚本，用于视觉检查图像的变化。结果是一个白色的图像，除了不同的像素。像素按比例变暗，差异越大；并且它们被“着色”以显示颜色变化，例如，如果旧图像更红，则差异图像将显示青色区域；如果新图像被更多读取，则差异图像将显示红色区域。

唯一的缺陷是速度慢，但我确信可以使用 numpy 或简单地使用处理像素组的理解来改进它。

```
#!/usr/bin/env python

TINT = 1 # exxagerate differences in tone
MINUTE = 5 # less than "x" points of difference
INCREASE_MINUTE = 2 # boost of minute differences

import sys
from PIL import Image

img1 = Image.open(sys.argv[1])
img2 = Image.open(sys.argv[2])

i1 = img1.load()
i2 = img2.load()

if img1.size != img2.size:
    print "Images %s and %s have different sizes, cannot compare" \
        % (sys.argv[1], sys.argv[2])
    sys.exit(1)

imgmap = Image.new( 'RGB', img1.size, "white")
imap = imgmap.load()

row_averages = []
for y in range(img1.size[1]):
    for x in range(img1.size[0]):
            p1 = i1[x, y]
            p2 = i2[x, y]
        diffpixel = [255, 255, 255]

        # color differences
        diffs = [p2[0] - p1[0], p2[1] - p1[1], p2[2] - p1[2]]
        absdiff = reduce(lambda a, b: abs(a) + abs(b), diffs)
        diffsmag = [a * TINT for a in diffs]
        diffplus = [max(0, a) for a in diffs]
        totplus = reduce(lambda a, b: a + b, diffplus)
        diffminus = [min(0, a) for a in diffs]

        # apply negative differences (e.g. less red -> take red)
        diffpixel = [ a + b for a, b in zip(diffpixel, diffminus)]
        # subtract positive differences (e.g. more red -> take from non-red channels)
        diffpixel = [ a - totplus for a in diffpixel ]
        # ... put back what we took from red
        diffpixel = [ a + b for a, b in zip(diffpixel, diffplus)]

        if absdiff > 0 and absdiff < MINUTE:
            # Increase contrast of minute differences
            diffpixel = [a - INCREASE_MINUTE for a in diffpixel]
        diffpixel = [max(0, a) for a in diffpixel]

        imap[x, y] = tuple(diffpixel)

imgmap.save(sys.argv[3]) 
```

# c# - 将字符串转换为 XML

> ID：11289662
> 
> 赞同：0
> 
> 时间：2012-07-02T07:51:26.717
> 
> 标签：c#, linq

我用 Linq 编写了一个查询，在我的代码的一部分中，我尝试将字符串分配给 XML，但发生了错误：

**无法将类型“字符串”隐式转换为“System.Xml.Linq.XElement”**

这是我的代码：

```
public int Save(Route route)
{            
     aspnetdbDataContext aspdb = new aspnetdbDataContext();
     RouteLinq rtlq=new RouteLinq();
     rtlq.UserId = route.UserId;
     rtlq.SourceName = route.Name;

     //I have an error hier
     rtlq.GpxData = route.GpxData;
     //---------------------------
     rtlq.CreationTime = route.Time;
     aspdb.RouteLinqs.InsertOnSubmit(rtlq);
     aspdb.SubmitChanges();
} 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:54:53.613

由于 GpxData 在您的数据库中属于 XML 类型，因此您无法直接为其分配字符串，您需要创建一个 en XElement，然后为其分配值：

```
rtlq.GpxData = new XElement(route.GpxData); 
```

`route.GpxData`字符串类型在哪里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:56:36.120

如果你有一个 XElement，你可以得到这样的文本内容：

```
string content = someXElement.Value 
```

如果你想要完整的节点，你需要使用`XElement.ToString()`.

**更新：**在你最新的编辑之后，你更清楚你实际上想要一个新的 XElement：

```
rtlq.GpxData = new XElement("GpxData", route.GpxData); 
```

第一个参数是节点的名称，第二个是内容。如果`route.GpxData`已经包含一个 Xml 字符串，也可以使用`XElement.Parse(route.GpxData)`

# excel - 使用 VBA 从多个单元格中提取超链接

> ID：11289664
> 
> 赞同：1
> 
> 时间：2012-07-02T07:51:40.260
> 
> 标签：excel, vba

我想遍历一列，并提取要在代码中使用的每个超链接（将其与某些文本进行比较）。

关于如何进行提取部分的任何好的指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:53:54.517

您可以使用`.Hyperlinks(1).Address`获取超链接

例如，这将提取从 A1 到 A5 的超链接

```
Sub Sample()
    Dim i As Long

    For i = 1 To 5
        Debug.Print Range("A" & i).Hyperlinks(1).Address
    Next
End Sub 
```

# c# - 在 WPF 中运行时更新框架的源

> ID：11289667
> 
> 赞同：1
> 
> 时间：2012-07-02T07:52:01.163
> 
> 标签：c#, wpf

我们有一个 WPF 应用程序，它使用框架来显示页面。此页面中有一个名为“myTextBlock”的文本块。我们以编程方式设置框架的来源如下：

```
myFrame.Source = new Uri("sourceOfPage.xaml", UriKind.Relative); 
```

我们想在运行时更改 myTextBlock 的文本。

```
 public partial class Page1 : Page
{
    ......

    public Page1(string textToBeShown)
    {
        InitializeComponent();
        this.myTextBlock.Text = textToBeShown;
    }
} 
```

因为我们没有以编程方式初始化 Page，所以我们不能向 Page 发送任何文本（Page 必须根据条件显示文本）。我们尝试了：

```
Page1 myPage = new Page1("Hello");
myFrame.Source = myPage; // It doesn't work 
```

那么我们如何将参数传递给页面并在框架中显示呢？可能吗？如果是，我们怎样才能做到这一点？

**注意：**我的同事创建了新的静态类。这个静态类具有字符串属性。然后他设置该属性的值并将其显示在页面中。它解决了这个问题。

提前致谢

# javascript - Javascript 中“this”的值

> ID：11289668
> 
> 赞同：5
> 
> 时间：2012-07-02T07:52:03.083
> 
> 标签：javascript, jquery, this

有人可以解释为什么下面的“this”指向 DOM 对象而不是 Window 吗？

```
$("a").click(function() {
    console.log(this);
}); 
```

这产生：

```
<a id="first" href="http://jquery.com"> 
```

考虑以下应该是相同的场景：

```
function Foo() {
    this.click = function(f) {
        f();
    }
}

var obj = new Foo();
obj.click(function() {
    console.log(this);
}); 
```

我们在这里得到的是 Window 对象（我所期望的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T07:56:19.053

在 Javascript 中，OOP 与您在 Java 等语言中所习惯的不同。

基本上，更容易认为没有 OOP，而这`this`只是函数的“隐藏参数”。

例如，当你看到

```
function f(x, y, z) {
    console.log(this, x, y, z);
} 
```

认为在常见的 OOP 语言（例如 Java）中

```
function f(this, x, y, z) {
    console.log(this, x, y, z);
} 
```

当你看到`var a = b.f(x, y, z);`时，想想`var a = f(b, x, y, z)`。

当你看到`var a = f(x, y, z);`think `var a = f(undefined, x, y, z);`（在浏览器环境中，当[严格模式](https://developer.mozilla.org/en/JavaScript/Strict_mode#.22Securing.22_JavaScript)未激活时，它是`f(window, x, y, z);`）

现在应该更容易理解为什么`this`在您的示例中意味着嵌套范围中的不同事物。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T07:56:17.280

这取决于执行函数的上下文。jQuery 显式更改回调函数的上下文，而您的函数在全局上下文中执行函数。

改变上下文：

```
function Foo() {
    this.click = function(f) {
        f.apply(this);
    }
} 
```

或者

```
function Foo() {
    this.click = function(f) {
        this.f = f
        this.f();
    }
} 
```

进一步阅读：

[http://dailyjs.com/2012/06/18/js101-this/](http://dailyjs.com/2012/06/18/js101-this/)

[http://dailyjs.com/2012/06/25/this-binding/](http://dailyjs.com/2012/06/25/this-binding/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T07:55:35.977

`this`将由上下文决定。

如果您将代码更改为以下，`this`则将指向`some_other_object`.

```
function Foo() {
    this.click = function(f) {
        f.call(some_other_object);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T07:57:41.877

jQuery在调用事件处理程序时使用 javascript[应用函数。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)从 mdn 文档中：

> 使用给定的 this 值和作为数组提供的参数调用函数。

# python - .EXE 安装程序在安装 Python 模块时崩溃：IPython、Pandas 和 Matplotlib

> ID：11289670
> 
> 赞同：0
> 
> 时间：2012-07-02T07:52:09.573
> 
> 标签：python, numpy, matplotlib, ipython, pandas

`numpy`由于易于使用 Python 2.7 的 exe 安装程序，我最近安装了它。但是，当我尝试使用 exe 文件安装 IPython、Pandas 或 Matplotlib 时，我总是在安装开始后立即收到以下错误的变体（在以下情况下为 pandas）：

pandas-0.8.0.win32-py2.7[1].exe 已停止工作

该问题导致程序停止正常工作：windows 关闭程序并通知是否有可用的解决方案。

当我安装 NumPy 时，它运行良好。这非常令人沮丧，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:53:34.270

它可能特定于您的机器。如果您一直遇到问题，您可以在[http://github.com/pydata/pandas/issues](http://github.com/pydata/pandas/issues)上发布问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T18:44:20.830

当我尝试从源代码安装 Pandas 时遇到了类似的问题。尝试通过安装它`pip`也不起作用。

但是，通过安装它`easy_install`就像一个魅力！

因此，只需从 Python 安装中删除所有 Pandas 的痕迹并运行：

```
easy_install pandas 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:02:57.757

这也发生在我身上。如果您右键单击并“以管理员身份运行”，它会起作用

# emacs - 如何在 SLIME 中启用彩虹括号？

> ID：11289672
> 
> 赞同：5
> 
> 时间：2012-07-02T07:52:23.613
> 
> 标签：emacs, lisp, common-lisp, slime

我是 Emacs 和 Common Lisp 新手。我已经在我的 Emacs 中成功安装了 SLIME，但我注意到它没有彩虹括号（这令人惊讶）。如何启用此功能？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T11:19:37.770

[emacswiki](http://www.emacswiki.org)上有一个可能适合您的[Rainbow Delimiters](http://www.emacswiki.org/emacs/RainbowDelimiters)模式- 否则那里还有一堆[其他括号外观包](http://www.emacswiki.org/emacs/ParenthesesAppearance)。

* * *

更新：这对我有用。
这可能仍然不像它应该的那样对新手友好。我已经有 20 年的断断续续使用来帮助我忘记作为一个完全的 Emacs 新手是什么样的......

首先，确保`.emacs`您的主目录中有一个文件。`C-x C-f`[visit-buffer] 后跟`~/.emacs`Enter 应该可以解决问题。

您还需要一个目录来保存您的 elisp 文件。
“~/.emacs.d/”通常位于 . `load-path`，因此使用它是最简单的入门方法。
如果它不存在，请创建它。

接下来，下载[rainbow-delimiters.el](http://github.com/jlr/rainbow-delimiters/raw/master/rainbow-delimiters.el)。它应该从上一步进入您的 elisp 文件夹。
键入`M-x byte-compile-file`，然后按 Return，然后是您的 rainbow-delimiters.el 的路径（此步骤仅用于提高效率）。

现在在您的 中输入以下内容`.emacs`：

```
(require 'rainbow-delimiters)
(add-hook 'slime-repl-mode-hook 'rainbow-delimiters-mode) 
```

并保存 ( `C-x C-s`) 并重新启动。

（“模式挂钩”是 Emacs 切换到特定模式时调用的函数（或者更确切地说是函数列表）。）。

如果您不想重新启动 Emacs 只是为了尝试，您可以将光标放在每个表达式的末尾并输入`C-x C-e`[eval-last-sexp]（这也适用于交互式“*scratch*”缓冲区）。

在这之后开始粘液`M-x slime`给了我彩色括号。

配色方案可定制；找到选项的最简单方法是`M-x customize-apropos`（按回车键），输入`rainbow`（按回车键）。

HTH。

`C-h t`哦，如果您还没有，请查看内置教程 ( )。Emacs有一个稍微特殊的词汇，所以不时阅读*文档*`C-h i`（

# html - JSF 使 DataTable 可滚动

> ID：11289673
> 
> 赞同：0
> 
> 时间：2012-07-02T07:52:28.183
> 
> 标签：html, css, jsf, datatable, primefaces

我对使用 PrimeFaces 3.2 的数据表有疑问。

DataTable 内容对于给定的 div 太宽。所以我需要让 div / form 的内容可以滚动。当我使用 style="x-overflow: auto / scroll" 时，什么都没有改变。

生成的 html 如下所示：

```
<div id="content" style="width: 500px;">
  <form id="j_id1241625851_2_2315c4de" class="ui-widget ui-widget-content ui-shadow ui-corner-all" style="x-overflow: scroll;" enctype="application/x-www-form-urlencoded" action="/data.xhtml" method="post" name="j_id1241625851_2_2315c4de">
   <div id="j_id1241625851_2_2315c4de:serverdata" class="ui-datatable ui-widget">
    <table role="grid">
     <thead> ...
     </thead>
     <tfoot>
     <tbody id="j_id1241625851_2_2315c4de:serverdata_data" class="ui-datatable-data ui-widget-content">
      <tbody id="j_id1241625851_2_2315c4de:serverdata_data" class="ui-datatable-data ui-widget-content">
       <tr class="ui-widget-content ui-datatable-even" role="row" data-ri="0">
        <td style="width: 200px;" role="gridcell">
        <td role="gridcell">
        <td role="gridcell">
        <td role="gridcell">
        <td role="gridcell">
        ...
       </tr>
       ...
     </tbody>
    </table>
   </div>
 </form>
</div> 
```

那么如何使表单的内容（例如数据表）可滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:56:09.980

由于您使用的是primefaces

你可以使用`scrollable`和`scrollWidth`属性

例如`scrollable="true" scrollWidth="400"`

看看展示数据表[- 滚动](http://www.primefaces.org/showcase/ui/datatableScrolling.jsf)

# html - 如何处理这个字符串？

> ID：11289676
> 
> 赞同：0
> 
> 时间：2012-07-02T07:52:34.967
> 
> 标签：html, linux, sed

我有包含如下文本的 html 文件：

```
<p>يورونيوز: <br />
&#8220; يقال إن للقمر تأثير كبير على نمو المزروعات، وأزهار الحدائق وخاصة النبيذ . &#8220; </p> 
```

现在我想删除
并将两行连接成一行。我怎样才能做到这一点？不得不提的是，“用于双引号，我在连接后替换它。我使用了这段代码，但它不起作用：

```
sed -i -e '/<br \/>[ \r\t\n]+/d' 1.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:05:12.980

`sed`逐行读取内容，因此您不能只删除 '\n' 字符。默认情况下不可见`sed`。您需要先阅读将下一行附加到模式空间，然后才能删除`\n`字符：

sed -e '/[\s]+$/{N;d}' 1.html

有一件事我不明白：你要删除 line with`<br>`和下一行吗？如果是这样，上面的代码是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T12:32:35.030

rush 正确命名了您的代码不起作用的原因；这个版本做你想要的。

```
sed -i '/<br \/>\s*$/{N;s/<br \/>\s*//}' 1.html 
```

# hadoop - 是否有 SparseVectorsFromSequenceFiles、RowIdJob 和 RowSimilarityJob 作业的内存实现

> ID：11289677
> 
> 赞同：0
> 
> 时间：2012-07-02T07:52:42.100
> 
> 标签：hadoop, mahout, semantic-analysis, lsa, latent-semantic-analysis

我一直在使用Mahout 提供的和Hadoop 作业执行潜在语义分析`SparseVectorsFromSequenceFiles`，这些作业运行 Map/Reduce 作业。我一直在尝试为这些在内存中运行的功能找到一个等效的实现，或者在单个线程中，或者最好在多个线程中。`RowIdJob``RowSimilarityJob`

有这样的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:03:40.300

我不知道，不这么认为，但是写起来很简单。您只需`SequenceFile.Reader`为每条记录打开一个和，`Vector`从值中获取`Writable`并做您想做的事情。这可能是 10 行代码，不值得一个工具。

# php - 当名字和姓氏在不同的字段中时，使用 PHP 在数据库中搜索全名

> ID：11289681
> 
> 赞同：1
> 
> 时间：2012-07-02T07:52:54.397
> 
> 标签：php, mysql, sql, search

我将名字和姓氏存储在数据库的不同字段中。但我必须在数据库中搜索全名。如何使用`SQL`and以有效的方式做到这一点`PHP`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:58:26.873

尝试使用类似的东西..

```
SELECT
       CONCAT_WS(' ', firstName,lastName) AS name
FROM 
       table
WHERE 
       name LIKE '%$keywords%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:00:10.797

```
SELECT * FROM `test` WHERE CONCAT(first_name,' ',last_name)='Steven Dobbelaere'; 
```

或者

```
SELECT * FROM `test` WHERE CONCAT(first_name,' ',last_name) like '%keyword%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:56:36.453

```
SELECT * from names where CONCAT('first','last') = 'FirstLast'; 
```

字段的第一个和最后一个位置。注意 MySQL 中的 CONCAT 函数可以做多个争论，所以你可以说：

```
CONCAT('first',' ','last') 
```

将 'John Doe' 作为您要比较的字符串；此时，您可以使用 = 或 like 进行比较，就像与普通字符串进行比较一样。

# android - 如何使用 ADT 20 创建 PhoneGap 应用程序？

> ID：11289682
> 
> 赞同：0
> 
> 时间：2012-07-02T07:52:57.857
> 
> 标签：android, cordova, adt

我试着按照这个[链接](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

但它不能工作并返回消息`"Unfortunately,appname has stopped"`。

错误[在这里](http://desmond.imageshack.us/Himg10/scaled.php?server=10&filename=phonegap.png&res=landing)。

有人可以帮助我吗？我是初学者。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:14:03.037

你没有提供足够的信息。尝试查看 Dalvik Debug Monitor Server (DDMS)（Eclipse 右上角的按钮）中的日志/错误消息和堆栈跟踪。

# java - 用 Java 解析在线代码库

> ID：11289689
> 
> 赞同：0
> 
> 时间：2012-07-02T07:53:26.737
> 
> 标签：java, parsing, github

我正在尝试找出一种方法来从 Java 程序中解析由 GitHub 托管的 Java 存储库。我看过 GitHub 的 API，但它很混乱。

我将它用于 IRC 机器人；这个想法是让 IRC 用户键入“！docs [class] [methodname]”并让文档通知他们。

我正在寻找的只是一种（希望）轻松找到方法上方的 javadocs 的方法。

例如，在这种情况下，如果我输入“！doc Entity getBounds()”，我希望它找到这个： ![在此处输入图像描述](../Images/f3f3cb632c59ac413b72e71ffc38eeeb.png)

并将 javadoc 标记中的所有内容作为字符串提供给我。

编辑：此外，我不相信 GitHub 的 API 甚至提供这种功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:07:36.247

实际上，我偶然发现了这一点。

Doclet API 提供了我正在寻找的一切。我所要做的就是从 GitHub 下载文件。

一探究竟：

[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/javadoc/doclet/](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/javadoc/doclet/)

# android - 在 AndEngine 中为特定对象着色

> ID：11289692
> 
> 赞同：1
> 
> 时间：2012-07-02T07:53:56.763
> 
> 标签：android, andengine

在我的应用程序中，我有一个背景，并且有一个对象说一张桌子放在背景上。现在我只想给表格上色。AndEngine 有什么方法可以做到这一点吗？如果是，请提供示例代码。应该是怎样的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:04:57.683

您可以在 xml 中执行此操作：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTable"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/darker_gray" >
    <TableRow />
    <TableRow />
</TableLayout> 
```

或者您可以以编程方式执行此操作：

```
 TableLayout table = (TableLayout)findViewById(R.id.myTable);
 table.setBackgroundColor(Color.DKGRAY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:12:23.077

您可以为场景中的任何实体设置颜色。只需使用`entity.setColor()`. 它将使您的颜色和对象本机颜色相乘。

如果您只需要新颜色，请先将您的对象设置为白色。

希望这有帮助。

# python - ZipFile.write() 抛出 CRC 错误

> ID：11289693
> 
> 赞同：0
> 
> 时间：2012-07-02T07:53:57.357
> 
> 标签：python, zipfile

我想使用 python 将文件添加到已经创建的 zip 文件中。

下面是代码：

```
try:
        conn='1.properties'
        fileName='/home/pbnagara/temp/Zip1.zip'
        myZip = zipfile.ZipFile(fileName, mode='a')
        myZip.write(conn)
        myZip.close()
except Exception:
        print 'Exception occurred while writing to Zip file: ' + fileName 
```

当我尝试解压缩它时，存档已损坏并引发以下错误：

> 提取：1.properties bad CRC afe265f4（应该是f998eec6）

你能告诉我这里出了什么问题吗？

使用不同的后缀[存档名称的 .zip 除外] 会导致任何错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:35:08.530

您以附加模式打开的文件很可能已损坏或不是有效的 zip 文件，或者使用了 ZipFile 类不支持的某些 zip 扩展名。

# c# - 使用 SqlConnectionStringBuilder 指定端口？

> ID：11289696
> 
> 赞同：11
> 
> 时间：2012-07-02T07:54:31.487
> 
> 标签：c#, sql-server, sql-server-2008-r2, database-connection, connection-string

我遇到了一个障碍。我需要为本地安装的 SQL Server 2008 R2 指定端口号。到目前为止，我已经尝试使用 SqlConnectionStringBuilder 并将数据源设置为`.\TESTSERVER, 1433`，所有文档都应该将我连接到端口 1433 上的服务器 TESTSERVER （默认值）。

连接字符串如下所示：

`{Data Source=".\TESTSERVER, 1433";Initial Catalog=AdventureWorks;User ID=testuser;Password=MYPASSWORDHERE}`

但是我收到一个错误，如下所示：

> 建立连接 SQL 服务器时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL 服务器是否配置为允许远程连接。（提供者：TCP 提供者，错误：0 - 无法建立连接，因为目标机器主动拒绝了它。

在使用它验证连接字符串`SqlConnectionStringBuilder.ToString()`后，几乎可以得出[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)的建议。由于某种原因，它只在数据源周围加上双引号，没有别的。但是，这可能只是调试器删除了外部引号，因为它存储在`string`数据类型中。我还验证了在不指定端口的情况下可以访问 SQL 服务器，并且确实如此。最后，我验证了允许服务器接受远程连接。考虑到这个 SQL Server 实例是使用默认端口在本地安装的，并且在我的开发计算机上，我无法想象为什么会出现这样的错误。

这是因为 SqlConnectionStringBuilder 用它自己的端口覆盖了我的端口吗？出于某种原因，我是否需要在防火墙上打开端口？知道这是一个完全本地安装，它不应该遇到防火墙问题。我宁愿不必手动构建连接字符串。并不是说这很困难，它只是给我的代码增加了一层复杂性，除非需要，否则我宁愿不要。

任何帮助，将不胜感激。谢谢！

**编辑：**

在对 SqlConnectionStringBuilder 语法进行了长时间的深入研究之后，它似乎通过将 then 传递给用引号括起来的连接字符串来处理无效参数。我想这是因为它破坏了连接字符串。我的问题仍然存在：**有没有办法通过 SqlConnectionStringBuilder 传递端口，还是我必须自己构建它？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T09:24:12.463

## TL;博士

删除数据源字符串中端口号之前的空格：

```
{Data Source=".\TESTSERVER, 1433";Initial Catalog=AdventureWorks;User ID=testuser;Password=MYPASSWORDHERE} 
```

让它看起来像这样

```
{Data Source=".\TESTSERVER,1433";Initial Catalog=AdventureWorks;User ID=testuser;Password=MYPASSWORDHERE} 
```

* * *

## 长答案

在玩了一会儿之后，您可以通过删除逗号和端口号之间的空格来省略额外的引号：

```
var stringBuilder = new SqlConnectionStringBuilder();
var sqlCommand = "select TOP 100 * from MyTable;";

stringBuilder.IntegratedSecurity = true;
stringBuilder.InitialCatalog = "MyCatalog";
stringBuilder.DataSource = @"myServer\InstanceName,1433";

// This will give the connection string:
// "Data Source=myServer\\InstanceName,1433;Initial Catalog=MyCatalog;Integrated Security=True"
using (var connection = new SqlConnection(stringBuilder.ToString()))
using (var command = new SqlCommand(sqlCommand, connection))
using (var adapter = new SqlDataAdapter(command))
{
    var table = new DataTable();
    connection.Open();
    adapter.Fill(table);
} 
```

不幸的是，这仍然会导致与您提供的错误消息相同的错误消息。因此，我深入研究了网络通信并发现，如果您不传递端口号，它首先会尝试与端口 1433 建立 tcp 连接（像往常一样），但它将保持未连接状态。然后，它尝试与端口 1434 建立 udp 连接，并从它们那里接收一个动态端口号，该端口号将用于数据将流向的第二个 tcp 连接。

通过使用 Sysinternals 的 Process Monitor，您可以查看此过程：

```
// The first try by using TCP port 1433
WindowsFormsApplication.vshost.exe  5480    TCP Reconnect   MyMachine:53202 -> SqlServerInstance:1433   SUCCESS
WindowsFormsApplication.vshost.exe  5480    TCP Reconnect   MyMachine:53202 -> SqlServerInstance:1433   SUCCESS
// The second try by using UDP port 1434
WindowsFormsApplication.vshost.exe  7664    UDP Send    MyMachine:50245 -> SqlServerInstance:1434   SUCCESS
WindowsFormsApplication.vshost.exe  7664    UDP Receive MyMachine:50245 -> SqlServerInstance:1434   SUCCESS
// Taking informations out of UDP connection to connect to dynamic assigned port
WindowsFormsApplication.vshost.exe  7664    TCP Connect MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Send    MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Send    MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Send    MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Send    MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Send    MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
WindowsFormsApplication.vshost.exe  7664    TCP Receive MyMachine:53209 -> SqlServerInstance:58904  SUCCESS
// Closing of dynamic assigned port
WindowsFormsApplication.vshost.exe  7664    TCP Disconnect  MyMachine:53209 -> SqlServerInstance:58904  SUCCESS 
```

通过使用显式端口号，我只会看到给定的第一行，然后抛出异常。因此，定义默认端口号会导致另一种行为，而不是不定义任何端口号！

尽管如此，如果您需要为您的服务器定义一个明确的端口号，只需避免逗号后面的空格，您的连接字符串就会看起来很漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T14:34:40.497

对我来说，它的工作是这样的：

```
//read instance
builder.DataSource.Split(new Char[] { ',' })[0]
//read port number
builder.DataSource.Split(new Char[] { ',' })[1]

//write
builder.DataSource = builder.DataSource.Split(new Char[] { ',' })[0] + ",1234"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:27:04.473

[MSDN SqlConnection.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

要连接的 SQL Server 实例的名称或网络地址。可以在服务器名称后指定端口号：

示例：MyDataSource,1433

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:27:31.973

看看[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

SQL Server 2008 连接字符串不包含围绕服务器索引名称的额外引号。您的连接字符串应该是

```
Data Source=.\TESTSERVER, 1433;Initial Catalog=AdventureWorks;User ID=testuser;Password=MYPASSWORDHERE 
```

# backbone.js - 如何将主干关系模型链接到自身

> ID：11289697
> 
> 赞同：0
> 
> 时间：2012-07-02T07:54:35.500
> 
> 标签：backbone.js, backbone-relational

我有简单的嵌套 JSON：

```
{
  "user": {
      "name": "John",

      "related": {
          "name": "Alice",

          "related": {
              "name": "Bob" 
          }
      }
   }
} 
```

我有骨干关系模型“用户”：

```
(function(){
  var User = Backbone.RelationalModel.extend({
     defaults: {
       name: "",
       related: {}
     },
     // Linking this model to itself
     relations: [{
       type: Backbone.HasOne,
       key: "related",
       relatedModel: User // As I've expected it doesn't exist at this time
     }]
  })
})() 
```

所以，问题是：如何将模型链接到自身？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:20:23.997

Backbone.Relational “相关”模型需要在可访问范围内，在早期版本的 Backbone-Rel 中，它通常期望模型在全局范围内可访问。

但是，如果您使用 Require.js，或者将模型定义包装在一个闭包中，它们将不在该全局范围内。

这个[拉取请求](https://github.com/PaulUithol/Backbone-relational/pull/127)处理这种情况。使用 Backbone-Rel 的最新 HEAD，您可以为 Backbone-Rel 添加自定义范围以在以下位置查找相关模型：

```
(function(){
    var models = {};
    Backbone.Relational.store.addModelScope(models);

    models.User = Backbone.RelationalModel.extend({
     defaults: {
       name: ""
     },
     // Linking this model to itself
     relations: [{
       type: Backbone.HasOne,
       key: "related",
       relatedModel: 'User'
     }]
    });

    var u1 = new models.User({
      name: "John",
      related: {
          name: "Alice",
          related: {
              name: "Bob" 
          }
      }
    });

    console.log(u1.toJSON());

})(); 
```

现场 jsFiddle 示例：http: [//jsfiddle.net/edwardmsmith/BRmQF/16/](http://jsfiddle.net/edwardmsmith/BRmQF/16/)

# maven - 在 jdk 1.7 中使用 javah maven-antrun-plugin，classes.jar 变成了 tools.jar

> ID：11289700
> 
> 赞同：1
> 
> 时间：2012-07-02T07:54:56.220
> 
> 标签：maven, maven-antrun-plugin

在适用于 Mac 的 jdk 1.7 中，com.sun.tools.javah.Main 的位置从 classes.jar 移动到 tools.jar。因此，Maven 的 maven-antrun-plugin 找不到运行 javah 任务并抛出 ClassNotFound 异常：

```
Caused by: java.lang.ClassNotFoundException: com.sun.tools.javah.Main
at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java :50)
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at org.apache.tools.ant.taskdefs.optional.javah.SunJavah.compile(SunJavah.java:57)
... 47 more 
```

1.7 位置：/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/lib/tools.jar

1.6 位置：/Library/Java/JavaVirtualMachines/1.6.0_32-b05-420.jdk/Contents/Classes/classes.jar

这似乎是 maven 3.0.4 版的错误或失败。我考虑过让 tools.jar 成为插件依赖项，但这似乎并不正确。我尝试了这些解决方案，但我无法让它们工作：

[JDK tools.jar 作为 Maven 依赖项](https://stackoverflow.com/questions/3080437/jdk-tools-jar-as-maven-dependency)

[maven：如何以独立于操作系统的方式加载 tools.jar/classes.jar？](https://stackoverflow.com/questions/6219533/maven-how-to-load-tools-jar-classes-jar-in-an-os-independent-way)

在 maven 人员在 mac 上使用 jdk-1.7 解决 maven-antrun-plugin 之前有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:30:30.443

答案是将 tools.jar 添加为插件的依赖项。包括以下部分`<dependencies> ... </dependencies>`

```
 <build>   
 <plugins>
   <plugin>
     <artifactId>maven-antrun-plugin</artifactId>
     <version>1.7</version>
     <executions>
       <execution>
         <phase>compile</phase>
         <configuration>
           <target>
             <property name="runtime_classpath" refid="maven.runtime.classpath"/>
             <property name="test_classpath" refid="maven.test.classpath"/>
             <property name="plugin_classpath" refid="maven.plugin.classpath"/>

             <echo message="runtime classpath: ${runtime_classpath}"/>
             <echo message="test classpath:    ${test_classpath}"/>
             <echo message="plugin classpath:  ${plugin_classpath}"/>

           </target>
         </configuration>
         <goals>
           <goal>run</goal>
         </goals>
       </execution>
     </executions>
     <dependencies>
       <dependency>
         <groupId>com.sun</groupId>
         <artifactId>tools</artifactId>
         <version>1.7</version>
         <scope>system</scope>
         <systemPath>${java.home}/../lib/tools.jar</systemPath>
       </dependency>
     </dependencies>
   </plugin>
 </plugins>
 </build> 
```

# javascript - 如何从 $('form')[...] 获取 $('input[name=...]').val();

> ID：11289702
> 
> 赞同：0
> 
> 时间：2012-07-02T07:55:28.997
> 
> 标签：javascript, jquery

这是我的html代码

```
<div id="list_refer_1">
   <form id="refer_1_0">
      <input type="hidden" name="channel" value="1">
      <input type="hidden" name="url" id="input_1_0" value="http://localhost:8000/">
      <input type="button" onclick="pullrefer(1, 0);" value=" -  "> 
      http://localhost:8000/ 
   </form>
   <form id="refer_1_xxxxx">   ///xxxxx is timestamp
      <input type="hidden" name="channel" value="1">
      <input type="hidden" name="url" id="input_1_1" value="http://127.0.0.1:8000/">
      <input type="button" onclick="pullrefer(1, 1);" value=" -  "> 
      http://127.0.0.1:8000/ 
   </form>
   <form id="refer_1_2">
      <input type="hidden" name="channel" value="1">
      <input type="hidden" name="url" id="input_1_2" value="http://localhost*">
      <input type="button" onclick="pullrefer(1, 2);" value=" -  "> 
      http://localhost* 
   </form>
   ... 
```

我可以通过

```
$('#list_refer_1 #refer_1_0 input[name=url]').val(); 
```

但我想得到

```
$('input[name=url]').val() from $('#list_refer_1 **form**')**[1]**; 
```

如何得到它？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:58:09.087

使用[`:eq()`](http://api.jquery.com/eq-selector/)选择器（*它是从零开始的*）

```
$('#list_refer_1 form:eq(1) input[name=url]').val(); 
```

# java - Hadoop 行号

> ID：11289704
> 
> 赞同：1
> 
> 时间：2012-07-02T07:55:39.747
> 
> 标签：java, hadoop, mapreduce

是否有一种输入格式可以为映射器提供行号？我需要获取给定一组单词的所有文件+行出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:59:12.310

使用不同的选项检查此线程。

[http://lucene.472066.n3.nabble.com/current-line-number-as-key-td2958080.html](http://lucene.472066.n3.nabble.com/current-line-number-as-key-td2958080.html)

# php - php中包含函数覆盖的级别是多少？

> ID：11289705
> 
> 赞同：0
> 
> 时间：2012-07-02T07:55:44.030
> 
> 标签：php

我正在使用包含功能。我想知道使用它的水平。说到重点，我有一个名为 hitcounter.php 的页面，我想知道在我的应用程序中对该页面进行了多少次点击。所以我创建了 hitcounter.php

我的问题是我在我的一个页面中包含了这个 hitcounter.php，我想知道那个特定的命中并将它存储在数据库中。在 hitcounter.php 中，我包含 dbconnection.php。当我登录到我的应用程序并点击包含 hitcounter.php 的特定页面时，它给出了错误，没有选择数据库。

在我 2.8 年的所有经验中，我第一次在谷歌上大量搜索时遇到了这个错误，但我没有找到答案。

我的计数器代码：

```
include"dbconnection.php";
//Adds one to the counter 
mysql_query("UPDATE counter SET patient_dashboard = patient_dashboard + 1")or die (mysql_error());

//Retreives the current count 
$count = mysql_fetch_row(mysql_query("SELECT patient_dashboard FROM counter"))or die(mysql_error());

//Displays the count on your site
 print "$count[0]"; 
```

这就是我包含 hit counter.php 的方式

```
<?php include"../includes/subpageheader.php";
      include"../includes/hitcounter.php"; 
?> 
```

我的数据库连接代码：

```
$conn=mysql_connect('localhost','root','');
//echo $conn."<br/>";
$db=mysql_select_db('health'); 
```

我想知道我们在 php 中使用了多少级别的 include 函数。
那么，如何解决这个错误，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:07:12.980

**包括**

来自[此处](https://www.php.net/manual/en/function.include.php)`INCLUDE`找到的 php 文档的解释。

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。如果找不到文件，include 构造将发出警告；这是与 require 不同的行为，后者会发出致命错误。

`root directory`您可以使用[$_SERVER['DOCUMENT_ROOT']](http://php.net/manual/en/reserved.variables.server.php)函数和[file_exists()](https://www.php.net/manual/en/function.file-exists.php)函数来清理包含，然后创建文件的路径。例如...

```
<?php
$my_root = $_SERVER['DOCUMENT_ROOT'];
$subpageheaderphp = $my_root . "/direct/path/to/file/from/root/subpageheader.php";
if(file_exists($subpageheaderphp)){include $subpageheaderphp;}else{echo "subpageheader in directory $subpageheaderphp could not be found <br/>";}
$hitcounterphp = $my_root . "/direct/path/to/file/from/root/hitcounter.php";
if(file_exists($hitcounterphp)){include $hitcounterphp;}else{echo "hitcounterphp in directory $hitcounterphp could not be found <br/>";} 
```

PHP 示例... 下面是我将用于刺激包含另一个文件的文件结构。

[![文件结构](../Images/54c6ead72b3dfa264915dd0eed54b422.png)](https://i.stack.imgur.com/mJVUk.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/0rq4g0tc.e0r.png)）]

**IncludeFrom.php**的内容

 **```
<?php
$DownStructure = "../../../includeTo.php";
echo "Including from the current directory: ".$DownStructure."<br/>";
if(file_exists($DownStructure)){include $DownStructure;}
$UpStructure = $_SERVER['DOCUMENT_ROOT']."/start/includeTo.php";
echo "<Br/>Including from first directory: ".$UpStructure."<br/>";
if(file_exists($DownStructure)){include $UpStructure;} 
```

**includeTo.php**的内容

 **```
<?php echo "<b>IncludeTo.php</b> was included!!"; ?> 
```

PHP 结果

[![结果](../Images/5520f437d483d8523e95701f2c567661.png)](https://i.stack.imgur.com/UsVz7.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/tv4cumnu.xn3.png)）]

这样做的好处是，跟踪和导航到文件夹结构中的文件要容易得多。通过这样做，您将从应用程序的基础中包含在内，这将不需要您*向下导航，*而是通过您的站点文件夹结构*向上导航。*虽然这两种解决方案都很好。`$DownStructure`和之间的区别在于`$UpStructure`，`$DownStructure`是相对路径，`$UpStructure`而是绝对路径。

**数据库未选择错误**

未选择您的数据库的一个非常简单的解决方案是。要更新您`queries`以包含数据库，例如`SELECT * FROM mydatabase.mytable WHERE column = 'value'`或在*php 语法* 中，`SELECT * FROM $database.$table`在哪里存储有关您想去哪里的必要信息。`$database``$table`

在下面的示例中，我在选择`Address`了`SalesLT`数据库的表中插入了几个值。

> INSERT INTO SalesLT.Address (AddressLine1, City, StateProvince, CountryRegion, PostalCode) VALUES ('75 W. 66th Street','New York','NY','United States','10023')

地址表

```
CREATE TABLE IF NOT EXISTS `address` (
`AddressLine1` varchar(200) NOT NULL,
`City` varchar(200) NOT NULL,
`StateProvince` varchar(200) NOT NULL,
`CountryRegion` varchar(200) NOT NULL,
`PostalCode` varchar(200) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

PhpMyAdmin 结果。我尚未选择`primary database`要使用的 a，但我的查询已`database`为`insert query`.

[![phpmyadmin](../Images/a1e06f57e324e8ae2649615f4610885e.png)](https://i.stack.imgur.com/8VhCW.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/emyog4u5.lrd.png)）]

使用以下代码进行 PHP 测试，您会注意到在下面的示例中我从不`database`使用[mysql_select_db](https://www.php.net/manual/en/function.mysql-select-db.php)选择 a 。

```
<?php
$conn = mysql_connect("localhost", "root", "") or die(mysql_error());
echo "Connected to MySQL<br />";
$result = mysql_fetch_array(mysql_query("SELECT * FROM SalesLT.Address"));
echo "<pre>";print_r($result);echo"</pre>";
phpinfo();
?> 
```

结果...

[![php测试](../Images/67f920d5f64c31fd8b88dfd205ed9224.png)](https://i.stack.imgur.com/LcFpf.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/ihnd52op.qf4.png)）]

将 包含在查询中的好处`database`是您可以进行跨服务器查询。只要您连接到`database` *您的查询将转到您指定*的位置。这比在 php.ini 中`primary database`使用[mysql_select_db](https://www.php.net/manual/en/function.mysql-select-db.php)函数选择一个更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:03:11.780

在我看来，你的错误与包含无关，问题是你没有选择数据库，看看这个例子：

```
 <?php

 $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
 if (!$link) {
 die('Not connected : ' . mysql_error());
 }

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
 die ('Can\'t use foo : ' . mysql_error());
}
?> 
```****

# php - 在 kohana 3.2 中读取配置文件

> ID：11289732
> 
> 赞同：1
> 
> 时间：2012-07-02T07:57:23.083
> 
> 标签：php, kohana, kohana-3, kohana-3.2

嗨朋友我知道如何在 kohana 3.0 中读取配置文件我的代码是

```
 $config_file = Kohana::config('ratna');
 $value = $config_file['name']; 
```

这里`ratna`就像`config file`下面

```
 <?php defined('SYSPATH') or die('No direct script access.');
   return array(
     'name' => 'Clarence Ratna',
     'tag_line' => "Let's talk about me!",
       'qualification'=>"MCA"
   ); 
```

我的问题是如何在 kohana 3.2 中读取相同的文件？？？

```
Kohana::config('ratna'); method is not working in 3.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:38:43.397

```
Kohana::$config->load('ratna'); 
```

[您可以在官方文档](http://kohanaframework.org/3.2/guide/kohana/config)中找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T20:51:10.053

您可以通过配置加载功能来完成。

```
$config =     Kohana::$config->load('database');
//To get Specific Value
//$value = $config->get('Your_Variable');
$name  = $config->get('name'); 
```

# ios - 如何在响应用户交互的同时运行重复的 NSTimer 或计划进程

> ID：11289739
> 
> 赞同：2
> 
> 时间：2012-07-02T07:57:58.347
> 
> 标签：ios, nstimer, background-process

当我使用

```
[NSTimer scheduledTimerWithTimeInterval:intervalCountDownTimer target:self selector:@selector(updateCountDownDurationForTimer:) userInfo:nil repeats:YES]; 
```

如果我滚动一个`UITableView`. 它仅在滚动停止后恢复。

我的 tableView 确实用于`dispatch_async & dispatch_sync`异步加载图像，我不确定这是否是主要原因。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            FXDMediaItem *mediaItem = [self mediaItemAtIndexPath:indexPath];

            if (mediaItem) {
                dispatch_sync(dispatch_get_main_queue(), ^{
                    cell.imageviewAlbumArt.image = [mediaItem albumArtImage];
                });
            }
        }); 
```

我一直在寻找在后台模式下运行此计时器的方法，但找不到正确的解决方案。它不一定是`NSTimer`，但我需要使用**预定的重复过程**。

我怀疑答案实际上可能很简单，但找不到

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T08:27:19.827

这里的问题是，通过使用 scheduleTimerWithTimeInterval:target:selector: userInfo:repeats: 创建你的计时器，它会在默认模式下添加到主运行循环中。滚动 UITableView（实际上是 UIScrollView）时，这似乎暂停了。这里的技巧是用不同的模式将你的计时器添加到主运行循环中，如下所示：

```
timer = [NSTimer timerWithTimeInterval:intervalCountDownTimer target:self selector:@selector(updateCountDownDurationForTimer:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:08:35.983

如果您已经在使用 GCD 进行后台工作，请尝试将里面的内容放在`updateCountDownDurationForTimer:`后台线程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:22:09.630

至于你的计时器，你看过[dispatch_source_create()](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_source_create)吗？

我假设您正在更新标签或其他内容，对吗？在表格视图滚动时更新标签，在`-scrollViewDidScroll:`不滚动时保持计时器。

如果我的假设有误，请在计时器中发布一些您正在做什么的代码，我会相应地更新我的答案。

# macos - applescript上代理框的“路径”？

> ID：11289741
> 
> 赞同：0
> 
> 时间：2012-07-02T07:58:04.450
> 
> 标签：macos, proxy, applescript

我正在尝试使用苹果脚本在系统偏好设置中打开 2 个代理（我必须使用它来访问此站点），但我无法让脚本单击复选框。代码如下：

```
tell application "System Preferences" to set current pane to pane "com.apple.preference.network"
tell application "System Events" to tell process "System Preferences" to tell window "Network"
    click button "Advanced…"
    delay 2
    tell TabGroup of sheet 1
        tell radio button "proxies"
            click
        end tell
    end tell
end tell 
```

我希望代码单击代理选项卡中的 http 和 https 代理框，它们是高级向下滑动选项卡的一部分，但我不知道“路径”是什么。有人可以帮我吗？谢谢;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:55:08.910

此示例使用 Web 代理：

```
 tell application "System Preferences"
    activate
    set current pane to pane "com.apple.preference.network"
end tell
tell application "System Events" to tell process "System Preferences" to tell window "Network"
    click button "Advanced…"
    delay 2
    click radio button "Proxies" of tab group 1 of sheet 1
    delay 2

    repeat until focused of table 1 of scroll area 1 of group 1 of tab group 1 of sheet 1
        keystroke tab
    end repeat

    -- Make sure you start from the top of the list
    repeat 20 times
        key code 126 -- up arrow Key
        delay 0.2
    end repeat

    set counter to 0
    repeat until (value of static text of group 1 of group 1 of tab group 1 of sheet 1 as text) contains "Web Proxy Server"
        set counter to counter + 1
        key code 125
        if counter ≥ 100 then
            display dialog "You have not entered a valid protocol name" buttons {"OK"}
            exit repeat
        end if
    end repeat

    delay 1
    click checkbox 1 of row 3 of table 1 of scroll area 1 of group 1 of tab group 1 of sheet 1

end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T14:24:45.593

要决定要检查哪个框，您只需更改行号。现在它设置为切换 SOCKS 代理。

```
tell application "System Preferences" to activate
tell application "System Preferences" to set current pane to pane id "com.apple.preference.network"
tell application "System Events" to tell process "System Preferences" to tell window 1
    click button "Advanced…"
    click radio button "Proxies" of tab group 1 of sheet 1
    set box to checkbox 1 of row 6 of table 1 of scroll area 1 of group 1 of tab group 1 of sheet 1
    set selected of row 6 of table 1 of scroll area 1 of group 1 of tab group 1 of sheet 1 to true
    click box
    set val to the value of box as boolean
    click button "OK" of sheet 1
    click button "Apply"
end tell
tell application "System Preferences" to quit
if val is true then return "Toggled On"
if val is false then return "Toggled Off" 
```

# vba - 如何使用 VBA 日历对象存储和显示日期

> ID：11289744
> 
> 赞同：-1
> 
> 时间：2012-07-02T07:58:10.560
> 
> 标签：vba, calendar

在 Excel 中使用 VBA，我想使用日历对象选择一些日期（并存储它们）

我建立

```
Private Sub Calendar1_Click()
    StartDate = Calendar1.Value
    MsgBox (StartDate)
End Sub 
```

但现在我想存储“StartDate”，以便在单击工作表时在日历上再次显示并进行一些计算。

我不知道该怎么做。欢迎任何提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:03:43.633

我建议使用这个精简有用的日历 [下载](http://allenbrowne.com/binary/calendar2k.zip)，它的[文档](http://allenbrowne.com/ser-51.html)也是开源的。我希望这有帮助

# eclipse - Eclipse 超时中的 Perl EPIC 调试器

> ID：11289747
> 
> 赞同：0
> 
> 时间：2012-07-02T07:58:18.653
> 
> 标签：eclipse, perl, debugging, activeperl, epic

我正在尝试在 Eclipse 中使用 EPIC 调试器，但它一直超时。我正在运行 Windows 7、Eclipse 3.72、EPIC 0.5.46、Padwalker 1.94 和 ActivePerl（64 位）5.14.2。我注意到超时之前的最后一条消息是“启动委托”，然后出现超时对话框。几周前我用过它，它工作得很好，我没有看到我机器上任何可以交互的软件的更新（例如java）。ActivePerl 中是否有 30 天后过期的内容？下面是控制台的输出。我检查了我的防火墙，这不是问题。我进行了广泛搜索，但找不到答案 - 谢谢！

```
Unable to connect to remote host: 192.168.1.79:5000
Compilation failed in require.
 at C:/Users/sedwards/Documents/Eclipse Workspace/Doug/bid_calc.pl line 0
    main::BEGIN() called at C:/Users/sedwards/Documents/Eclipse Workspace/Doug/bid_calc.pl line 0
    eval {...} called at C:/Users/sedwards/Documents/Eclipse Workspace/Doug/bid_calc.pl line 0
BEGIN failed--compilation aborted.
 at C:/Users/sedwards/Documents/Eclipse Workspace/Doug/bid_calc.pl line 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:29:55.473

原来我在启用公司 VPN 时安装了 EPIC，所以我必须重新启用它才能让它再次工作。谢谢，海伦 - 你对 IP 地址的评论让我思考...... :-)

# php - PHP str_replace 绕过

> ID：11289749
> 
> 赞同：0
> 
> 时间：2012-07-02T07:58:22.520
> 
> 标签：php, str-replace

我担心该功能的安全使用`str_replace`。例如

```
$var = "abcdeefghij";
$var = str_replace("ee", "", $var); // Should be "abcdfghij" 
```

例如，是否可以通过多字节字符集或空字符绕过（获取“abcdeefghij” - 带有 2 个“e”字母）？

编辑：我在考虑这样的事情： abcd%6565fghij %6565 将被替换为 ee 但`str_replace`不会工作，因为它是多字节字符串（`mb_str_replace`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:04:46.703

> ¿sıɥʇ ǝʞıן uɐǝɯ no⅄</p>

是的，可以通过输入一个*看起来*像`e`但不同的Unicode字符来“注入”一个“e”字符。这种危险始终存在，您可能永远无法检测到*任何*类似于“e”的字符。

尽管不知道您要做什么，但无法判断这是否是实际问题。通常，这不应该与安全相关。也许提供更多背景？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:06:45.783

实际上，如果`ee`字符串中没有以这种方式出现，这意味着在兼容的编码中并且没有额外的不可见字符，它将不匹配。就兼容编码而言，`ee`您的源代码中可能是 ASCII，因此任何 ASCII 兼容编码都可以（包括 Latin-1、UTF-8 和大多数单字节编码）。如果中间有其他字符/字节，它显然不是同一个字符串并且不会匹配。其他相似的字符显然也不匹配。

# c# - 获取点击的节点

> ID：11289754
> 
> 赞同：-1
> 
> 时间：2012-07-02T07:58:34.140
> 
> 标签：c#, cursor, mouse-position

我在 C# 中有用于单击节点的代码：

```
public Node ChartMouseDownFindNode(Graphics graphics, Font font, Point mousePosition)
{
    this.mousePosition = Cursor.Position;
    Pen pen = new Pen(Color.FromArgb(255, 124, 176, 34), 2);
    foreach (Node node in Nodes)
    {
       Size nodeSize = node.GetNodeSize(graphics, font);
       if (node.Position.X < mousePosition.X + Math.Abs(mousePosition.X) && node.Position.X + nodeSize.Width > mousePosition.X + Math.Abs(mousePosition.X))
            if (node.Position.Y < mousePosition.Y + Math.Abs(mousePosition.Y) && node.Position.Y + nodeSize.Height > mousePosition.Y + Math.Abs(mousePosition.Y))

                return node;
        MessageBox.Show("clicked");

    }
    return null;
} 
```

这没用。我猜光标有问题。我的想法是将节点的位置与鼠标的位置进行比较。多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:25:43.963

我认为你朋友的代码是错误的。这些 if 语句会更好。

```
if (node.Position.X < mousePosition.X && node.Position.X + nodeSize.Width > mousePosition.X)
    if (node.Position.Y < mousePosition.Y && node.Position.Y + nodeSize.Height > mousePosition.Y) 
```

在此语句之前，您可能需要匹配位置坐标。Cursor.Position 在屏幕空间坐标中，但我猜节点可能在客户端空间坐标中。此代码将起作用。

```
mousePosition = PointToClient(mousePosition); 
```

# maven - 从 pom.xml 创建 html 文件

> ID：11289758
> 
> 赞同：1
> 
> 时间：2012-07-02T07:58:46.570
> 
> 标签：maven, pom.xml

我使用 Maven。

我需要创建一个 html 文件并从 xml 文件中填充它。我需要在 pom.xml 中进行。我有 xsl 文件。

任何人都可以请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:07:40.673

您应该看一下支持通过 XSLT 从 XML 转换为任何内容的[xml-maven-plugin 。](http://mojo.codehaus.org/xml-maven-plugin/)

# java - Android：使用 Json 从另一个屏幕中的服务器获取列表视图中的多个数据

> ID：11289760
> 
> 赞同：1
> 
> 时间：2012-07-02T07:58:57.587
> 
> 标签：java, android, json, listview

我试图让 jsonobject 进入下一个屏幕列表视图。我可以在 listview 中获取 1 个值，但我有多个值要获取。我能怎么做。

这是我从服务器获取字符串的代码：-

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("Get_Friend_List", holder
                .toString()));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        StringEntity se = new StringEntity(holder.toString());
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        httppost.setEntity(se);
        HttpResponse response = httpclient.execute(httppost);
        resp = response.toString();
        String t = EntityUtils.toString(response.getEntity());

        try {
            JSONArray get_string1 = new JSONArray(t);
            JSONObject get_string = null;

            // Receive the JSON object from server
            String userid = (String) get_string.get("UserId");
            String totalusers = (String) get_string.get("TotalUsers");
            String SessionID = (String) get_string.get("SessionID");
            for (int i = 0; i < get_string1.length(); i++) {
                get_string = get_string1.getJSONObject(i);
                JSONObject contact = (JSONObject) get_string
                        .get("contacts-" + i);

                String contact_id = (String) contact.get("UserId");

                contact_username = (String) contact.get("UserName");
                contact_status = (String) contact.get("Status");
                Contacts.setStatus(contact_status, i);
                Contacts.setUserName(contact_username, i);
            }

        } catch (JSONException e) {
            e.printStackTrace();
            System.out.println("--error--" + e.getMessage());
        }

    } catch (ClientProtocolException e) {
        Log.e(TAG, e.toString());
    } catch (IOException e) {
        Log.e(TAG, e.toString());
    }  
} 
```

这是我得到的服务器的响应。**但仅在列表视图中存储最后一个值。**

```
 Response from Server----{
"UserId":   "1",
"TotalUsers":   "4",
"contacts-0":   {
        "UserId":   "3",
        "UserName": "kumar",
        "Status":   "1"
},
"contacts-1":   {
    "UserId":   "2",
    "UserName": "rahul",
    "Status":   "1"
},
"contacts-2":   {
"UserId":   "4",
"UserName": "vlk",
    "Status":   "1"
},
"contacts-3":   {
    "UserId":   "5",
    "UserName": "vlk",
    "Status":   "1"
},
"SessionID":    "39355"
} 
```

联系人.java

```
public class Contacts {
public static String[] status = new String[100];

public static String[] usrname = new String[100];

public static String getStatus(int i) {
    return status[i];
}

public static String getUserName(int i) {
    return usrname[i];
}

public static void setStatus(String status, int i) {
    Contacts.status[i] = status;
}

public static void setUserName(String username, int i) {
    Contacts.usrname[i] = username;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:53:48.983

*json* String 没有数组类型。您需要在读取对象`has()`之前调用该方法（以测试 json 属性是否存在） 。`contacts`另一个问题是`Contacts`类型。您应该必须定义`Contact`类型并初始化`List<Contact>`以存储一个或多个联系人。

看看 Contact 类

```
public class Contact
{
    private String userId;
    private String userName;
    private String status;

    public Contact() {
         userId="";
         userName="";
         status="";
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    @Override
    public String toString() {
        return "Contact{" + "userId=" + userId + ", userName=" + userName + ", status=" + status + '}';
    }

} 
```

以及读取/解析`json`字符串的代码。

```
 JSONObject get_string = new JSONObject(t);

 String userid = (String) get_string.get("UserId");
 String totalusers = (String) get_string.get("TotalUsers");
 String SessionID = (String) get_string.get("SessionID");

 int i=0;
 JSONObject obj=null;

 /* Initialize the List<Contact> */
 List<Contact> list=new ArrayList();

 while(get_string.has("contacts-"+i))
  {
   obj=get_string.getJSONObject("contacts-" + i);
   Contact contact=new Contact();
   contact.setUserId(obj.getString("UserId"));
   contact.setUserName(obj.getString("UserName"));
   contact.setStatus(obj.getString("Status"));
   list.add(contact);
   i++;
  } 
```

# c++ - dynamic_cast<> 失败，但 static_cast<> 有效

> ID：11289763
> 
> 赞同：4
> 
> 时间：2012-07-02T07:59:07.660
> 
> 标签：c++, dynamic-cast

在我的项目中，我有一个假设：

*   1) BaseClass 是从父类 IFlow 派生的接口
*   2) ChildClass 派生自它，即从 Base 类
*   3）在childClass Init函数中，我`dynamic_cast`用来将IFlow的对象转换为BaseClass，如下所示：

    ```
    void ChildClass::init()
    {    
        IFlow* pFlow = someMethod(); //it returns the IFlow object pointer

        //this works for static cast but fails for dynamic cast    
        BaseClass *base =  dynamic_cast<BaseClass*>(pFlow) ;
    } 
    ```

在上面的代码中，第二行`dynamic _cast`返回零，但如果`dynamic_cast`更改为，`static_cast`则代码按预期工作。请指教

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:09:19.517

`dynamic_cast`在两种情况下将“不起作用”：

1.  您以某种方式在没有 RTTI 的情况下编译了您的代码。修复编译器设置。

2.  的全部目的`dynamic_cast`是*确保*演员阵容确实有效。从孩子到父母的转换总是有效的，因为保证某种类型的每个孩子都是那种类型（整个“所有的狗都是动物，但并非所有的动物都是狗”的事情）。如果对象实际上不是该子类型，则从父级转换为子级可能会失败。`dynamic_cast`如果`IFlow`你给它的实际上不是一个`BaseClass`.

    此外，你的`static_cast`不起作用。它只是返回一个值。一个值，如果你曾经使用它，会导致*未定义的行为*。因此，它仅在返回一个您可以尝试使用的值的意义上“起作用”。

所以这两件事中的一件发生了。哪一个由您决定，因为您没有向我们提供`someMethod`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:08:21.200

`dynamic_cast<>`如果强制转换不合法，则A返回 null（零）。在这种情况下，它正在做你想做的事：在你的继承树的某个地方有问题。（`static_cast<>`“有效”只是因为它是一把大锤；它在编译时强制强制转换，而不知道指针在运行时实际具有的类型。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:25:44.747

如果是这样？：

```
class A
{
public:
    A(){a = 0;};
    virtual ~A(){};
protected:
    int a;
};
A *GetAInstance();

class B : public A
{
public:
    B() : A() {b = 1;};
    virtual ~B(){};
protected:
    int b;
};

class C: public B
{
public:
    C() : B() {};
    ~C(){};

    void CheckA()
    {
        A *pA = GetAInstance();
        B *pB = dynamic_cast<B*>(pA);  --> Here pB is NULL.
        B *pB2 = static_cast<B*>(pA);
    };
};

A *GetAInstance()
{
    A *pA = new A();
    return pA;
};

int _tmain(int argc, _TCHAR* argv[])
{
    C *pC = new C();
    pC->CheckA();
    return 0;
} 
```

这是因为您试图将父指针设置为其子指针。在dynamic_cast中它认为它不安全，所以将子指针设置为NULL，你可以看到上面的pB是NULL。对于子类可能有更多的函数/成员变量，你调用这些新的函数/成员变量会导致运行时错误。但是 static_cast 并不关心这一点，它只是编译时检查而不是运行时检查。static_cast 只关心他们是否有某种关系。如果他们有， static_cast 转换指针甚至不关心运行时错误。请运行这个小样本并检查 pB2 不为 NULL。:)

希望有用。谢谢！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:03:28.050

someMethod() 返回什么类型？它需要从 BaseClass 派生以允许 dynamic_cast 工作。如果类型不正确，则不能向下投射。

静态转换在编译时起作用，编译器只会翻转指针。

# android - 在 AndEngine 中的场景上绘制带有对象的网格

> ID：11289764
> 
> 赞同：1
> 
> 时间：2012-07-02T07:59:12.627
> 
> 标签：android, andengine

我想在场景中显示一个包含对象的可滚动网格。我想要做的是我有一个正在运行的场景，并且用户单击一个删除按钮说选择形状。当用户单击一个网格时，会打开一个包含 100 种颜色的网格，这意味着用户必须滚动才能查看和选择颜色。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:00:25.037

这是AndEngine 论坛中有关菜单滚动示例的线程[链接。](http://www.andengine.org/forums/tutorials/menu-scroll-example-t5740.html)只需将菜单项更改为 100 种颜色并使其更小。

希望这有帮助。

# linux-kernel - linux内核驱动程序中对中断例程的限制

> ID：11289769
> 
> 赞同：0
> 
> 时间：2012-07-02T07:59:50.520
> 
> 标签：linux-kernel, linux-device-driver

每本设备驱动程序书都谈到不使用在中断例程中休眠的函数。从 ISR 调用这些函数会出现什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:11:46.020

内核的完全锁定是这里的问题。内核在执行中断处理程序时处于中断上下文中，即中断处理程序不与任何进程关联（当前宏无法使用）。

如果你能够睡觉，你将永远无法回到被中断的代码，因为调度程序不知道如何回到它。

在中断处理程序中持有一个锁，然后休眠，允许另一个进程运行，然后再次进入中断处理程序并尝试重新获取锁，这会使内核死锁。

如果您尝试阅读更多有关内核中调度如何工作的信息，您很快就会意识到为什么在某些情况下睡眠是不可行的。

# c++ - 使用向量的 C++ 中的 N 个皇后

> ID：11289770
> 
> 赞同：4
> 
> 时间：2012-07-02T07:59:52.483
> 
> 标签：c++, backtracking, n-queens

我无法理解回溯，我可以从概念上理解我们采取了行动，然后如果无法从中找到解决方案，我们会尝试下一个解决方案。

考虑到这一点，我正在尝试解决 N Queens 问题，我正在找出可以放置在下一行中的所有可能的候选人，然后一个一个地尝试它们，如果候选人没有产生解决方案，我弹出它并与下一个一起去。

这是我提出的代码的核心：

```
void n_queens(int n)
{
  vector<int> queens = vector<int>();
  backtrack(queens,0,n);
}

void backtrack(vector<int>& queens, int current_row, int N)
{
  // check if the configuration is solved
  if(is_solution(queens, N))
  {
    print_solution(queens,N);
  }
  else
  {
    // construct a vector of valid candidates
    vector<int> candidates = vector<int>();
    if(construct_candidates(queens,current_row,N,candidates))
    {
      for(int i=0; i < candidates.size(); ++i)
      {
        // Push this in the partial solution and move further
        queens.push_back(candidates[i]);
        backtrack(queens,current_row + 1,N);
        // If no feasible solution was found then we ought to remove this and try the next one
        queens.pop_back();
      }
    }
  }
}

bool construct_candidates(const vector<int>& queens, int row, int N, vector<int>& candidates)
{
  // Returns false if there are no possible candidates, we must follow a different
  // branch if this so happens
  for(int i=0; i<N; ++i)
  {
    if(is_safe_square(queens,row,i,N))
    {
      // Add a valid candidate, this can be done since we pass candidates by reference
      candidates.push_back(i);
    }
  }
  return candidates.size() > 0;
} 
```

它不会为我提供的任何输入打印任何内容。我尝试运行它`gdb`但没有成功，我认为这是因为我对回溯的基本理解存在问题。

我已经在几本书和一个在线教程中阅读了关于回溯的内容，但我仍然感到朦胧，如果有人能给我一些想法来解决这个问题并帮助我理解这个有点不直观的概念，那就太好了。

整个可编译的源代码是：

```
#include <iostream>
#include <vector>
#include <cmath>

using namespace std;

// The method prototypes
void n_queens(int n);
void backtrack(vector<int>&, int current_row, int N);
bool construct_candidates(const vector<int>&, int row, int N, vector<int>&);
bool is_safe_square(const vector<int>&, int row, int col, int N);
bool is_solution(const vector<int>&, int N);
void print_solution(const vector<int>&, int N);

int main()
{
  int n;
  cin>>n;
  n_queens(n);
  return 0;
}

void n_queens(int n)
{
  vector<int> queens = vector<int>();
  backtrack(queens,0,n);
}

void backtrack(vector<int>& queens, int current_row, int N)
{
  // check if the configuration is solved
  if(is_solution(queens, N))
  {
    print_solution(queens,N);
  }
  else
  {
    // construct a vector of valid candidates
    vector<int> candidates = vector<int>();
    if(construct_candidates(queens,current_row,N,candidates))
    {
      for(int i=0; i < candidates.size(); ++i)
      {
        // Push this in the partial solution and move further
        queens.push_back(candidates[i]);
        backtrack(queens,current_row + 1,N);
        // If no feasible solution was found then we ought to remove this and try the next one
        queens.pop_back();
      }
    }
  }
}

bool construct_candidates(const vector<int>& queens, int row, int N, vector<int>& candidates)
{
  // Returns false if there are no possible candidates, we must follow a different
  // branch if this so happens
  for(int i=0; i<N; ++i)
  {
    if(is_safe_square(queens,row,i,N))
    {
      // Add a valid candidate, this can be done since we pass candidates by reference
      candidates.push_back(i);
    }
  }
  return candidates.size() > 0;
}

bool is_safe_square(const vector<int>& queens, int row, int col, int N)
{
  for(int i=0; i<queens.size(); ++i)
  {
    // case when the queens are already placed in the same row or column
    if(queens[i] == row || queens[i] == col) return false;
    // case when there is a diagonal threat
    // remember! y = mx + c for a diagonal m = 1 therefore |x2 - x1| = |y2 - y1|
    if(abs(i - row) == abs(queens[i] - col)) return false;
  }
  //Returns true when no unsafe square is found
  //handles the case when there are no queens on the board trivially
  return true;
}

bool is_solution(const vector<int>& queens, int N)
{
  return queens.size() == N;
}

void print_solution(const vector<int>& queens, int N)
{
  for(int i=0; i<N; ++i)
  {
    for(int j=0; j<N; ++j)
    {
      if(queens[i] == j){ cout<<'Q'; }
      else { cout<<'_'; }
    }
    cout<<endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:41:12.993

这不是一个根本问题，它只是一个错误。

在`is_safe_square`, 改变

```
queens[i] == row 
```

至

```
i == row 
```

# android - 在android中将屏幕从一个活动翻转到另一个活动

> ID：11289771
> 
> 赞同：4
> 
> 时间：2012-07-02T08:00:06.507
> 
> 标签：android, android-intent

实际上我想通过单击从一个活动到另一个活动的按钮来旋转或翻转屏幕：像[这样](http://lab.smashup.it/flip/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:09:01.303

您可以这样做覆盖活动之间的转换：

```
Button btn = (Button)findViewById(R.id.myBtn);

btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startActivity(new Intent(ActualActivity.this, 
                    TargetActivity.class));
            overridePendingTransition(R.anim.slide_in_up, R.anim.slide_out_up);
        }
    }); 
```

其中 slide_in_up 和 slide_out_up 是您的自定义动画，保存在 res/anim 中。这里有一些代码示例：

滑入向上：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromYDelta="-100%p" android:toYDelta="0" android:duration="300"/>
</set> 
```

slide_out_up：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromYDelta="0" android:toYDelta="100%p" android:duration="300"/>
</set> 
```

此示例将您的活动从上到下移动。您可以修改动画文件以获得不同的动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:13:47.077

@abhy 提供的链接是我们都关注过的链接:)

但是从一个活动更改为另一个活动是行不通的，我为实现该行为所做的工作是为了获取我所在的活动的位图和我要去的活动的位图，进行此转换，并在其完成时使 startactivity 覆盖挂起的过渡没有效果。

我不认为这是一个很好的方法，我很想看看是否有人有更好的主意:)

问候，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:08:45.503

您可以在这里找到答案：[Android 中的活动转换](https://stackoverflow.com/questions/3389501/activity-transition-in-android)

两种选择：

1.  阅读本教程[http://developerlife.com/tutorials/?p=343](http://developerlife.com/tutorials/?p=343)
2.  告诉第二个活动（您使用按钮打开的活动）在创建时要显示什么动画。

像这样：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getWindow().setWindowAnimations(ANIMATION);

        ...

    } 
```

# r - 在R中循环文件

> ID：11289776
> 
> 赞同：1
> 
> 时间：2012-07-02T08:01:00.780
> 
> 标签：r, loops, statistics

我正在使用 R 来计算文件中列的平均值，如下所示：

```
R
file1 = read.table("x01")
mean(file1$V4) 
```

但是，我没有构建涉及 R 的循环的经验，只能使用 bash。我如何将其转换为一个循环，对文件夹中的每个文件执行此操作，并将输出保存到一个文件中，文件名和平均值作为每行的 2 列？例如：

```
x01(or file1 if that is simpler) 23.4
x02 25.4
x03 10.4 
```

ETC

（不介意解决方案是 bash 和 R 还是专门的 R）非常感谢您的帮助！

使用 bash 和 R 的解决方案之一的当前错误：

```
Error in `[.data.frame`(read.table("PercentWindowConservedRanked_Lowest_cleanfor1000genomes_1000regions_x013",  : 
  undefined columns selected
Calls: mean -> [ -> [.data.frame
Execution halted 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:30:11.660

这与@jmsigner 所做的类似，但有细微的变化。例如，写入文件是在最后完成的。该代码尚未经过测试。

```
out <- lapply(list.files(), FUN = function(x) {
    m <- mean(read.table(x, header = TRUE)$V4)
    return(m)
  })
result <- do.call("cbind", out) #merge a list column-wise
# before writing, you can make column names pretty with colnames()
# e.g. colnames(result) <- c("x01", "x02")
write.table(result, file = "means.txt") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T08:04:54.773

假设列的名称始终相同，您可以在 R 中执行以下操作：

```
out.file <- 'means.txt'
for (i in list.files()) {
    tmp.file <- read.table(i, header=TRUE)  # Not sure if you have headers or not
    tmp.mean <- mean(tmp.file1$V4)
    write(paste0(i, "," tmp.mean), out.file, append=TRUE)
} 
```

或者用更多的 bash 做同样的事情：

```
for i in $(ls *)
do
  mean=$(Rscript -e "mean(read.table('$i', header=T)[, 'V4'])")
  echo $i,$mean >> means.txt
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T08:41:58.937

我的解决方案也类似于@jmsinger，但您可以在代码本身中指定文件的路径，然后像这样计算平均值：

```
filename <- system("ls /dir/",intern=TRUE)

for(i in 1:length(filename)){

file <- read.table(filename[i],header=TRUE) ## if you have headers in your files ##
mean <- mean(file$V4)

write.table(mean,file=paste("/dir",paste("mean",filename[i],sep="."),sep="/")) 
##if you wish to write the means of all the files in seperate files rather than one.
} 
```

希望这可以帮助

# excel - 如何在 Excel 中计算不等于通配符？

> ID：11289778
> 
> 赞同：3
> 
> 时间：2012-07-02T08:01:24.583
> 
> 标签：excel, excel-2007, worksheet-function, countif

使用`COUNTIF(range,"<>")`can I count non-empty cells 和 with `COUNTIF(range,"~?")`or `COUNTIF(range,"~*")`can I 计算匹配通配符的单元格数，但我可以用一个 COUNTIF() 来计算吗？

`COUNTIF(range,"<>~?")`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:17:46.223

我的理解是，您想要计算满足两个条件的范围内的单元格 - 1）它们不是空白，2）它们不是“？”

如果您使用 Excel 2007 或更高版本，请尝试使用 COUNTIFS（末尾带有“S”），同时满足以下两个条件

`=COUNTIFS(range,"<>",range,"<>~?")`

或者对于早期版本，使用 SUMPRODUCT

`=SUMPRODUCT((range<>"")*(range<>"?"))`

[注：后者不需要~]

在 Excel 2003 或更早版本中，**范围**不能是一整列。您可以对 * 使用相同的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:52:40.720

> 使用 COUNTIF(range,"<>") 可以计算非空单元格

您可以使用 COUNTA() 来计算非空单元格。

```
=COUNTA(A1:A10) 
```

如果您仍想使用 COUNTIF() 那么是的，您可以像这样使用它

```
=COUNTIF(A1:A10,"<>") 
```

您可以使用通配符来计算具有此类特定单词的单元格

```
=COUNTIF(A1:A10,"Kim*")   '<~~ Starts with "Kim"
=COUNTIF(A1:A10,"*Kim*")  '<~~ Contains "Kim"
=COUNTIF(A1:A10,"*Kim")   '<~~ Ends with "Kim" 
```

要计算 Not Equal to With WildCards，您可以使用此

```
=COUNTIF(A1:A10,"<>Kim*")   '<~~ Doesn't Start with "Kim" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T21:54:05.597

这可能刚刚在 Excel 2010 中修复： =COUNTIF(H:H,"<>~?") 正确计算非？H列中的值（所以？和'？减少计数，但引用“？”，A等都没有）

# c# - 如何添加类似于 Skype 的 Skype 生产力工具的窗口扩展？

> ID：11289784
> 
> 赞同：4
> 
> 时间：2012-07-02T08:01:41.110
> 
> 标签：c#, user-interface, webex

全部，

如果您安装了 Webex 生产力工具并安装了 Skype，它会添加一个窗口装饰，您可以在其中单击一个按钮，它会自动将一个新的 Webex 会议链接粘贴到对话框中。

我想为我的应用程序做类似的事情，但是从哪里开始添加窗口装饰？这种事情有标准的API吗？

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:46:31.953

**您基本上想要做的是在 Windows非客户端**区域中“绘制自定义控件” 。这有时也被称为 Window 的“Chrome”。

如果您想在自己的应用程序中执行此操作，这个 SO 问题回答了许多可用选项：[WinForms 应用程序中的自定义标题栏/铬](https://stackoverflow.com/questions/42460/custom-titlebars-chrome-in-a-winforms-app)

[从http://geekswithblogs.net/kobush/articles/CustomBorderForms.aspx](http://geekswithblogs.net/kobush/articles/CustomBorderForms.aspx)引用的主要文章的代码可在[http://customerborderform.codeplex.com/ 获得](http://customerborderform.codeplex.com/)

如果要将自定义控件添加到其他应用程序，则需要将它们的**WndProc**挂钩到这些应用程序中。为了实现这一点，您需要将 dll 注入该应用程序（请参阅[http://www.codingthewheel.com/archives/how-to-inject-a-managed-assembly-dll](http://www.codingthewheel.com/archives/how-to-inject-a-managed-assembly-dll)和[http://www. codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces#section_1](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces#section_1)），然后再次挂接到 WndProc。

# c# - CreateMutex 与 System.Threading.Mutex（Win32 与 C#）

> ID：11289785
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:01:42.453
> 
> 标签：c#, .net, windows, winapi, mutex

我有一个遗留代码，我试图理解为什么开发人员一直在使用`CreateMutex`kernel32.dll 中的函数而不是`System.Threading.Mutex`.

我想知道它们是否相同，以及将它们从 Windows API 样式更改为 C# 样式是否安全。

这是我正在谈论的互斥锁。

*   [Win32](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)
*   [C＃](http://msdn.microsoft.com/en-us/library/system.threading.mutex%28v=vs.80%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:20:11.550

我认为您找不到有关此主题的任何文档。我认为他们是一样的。我建议将所有调用更改为 .NET。即使您会发现问题（1% 的机会），最好还是修复它们而不是直接调用 kernel32。

# iphone - ios5设备未收到推送通知

> ID：11289786
> 
> 赞同：1
> 
> 时间：2012-07-02T08:02:08.277
> 
> 标签：iphone, ios5, ios4, apple-push-notifications

我在装有 iOS 5.0.1 的设备上发送推送通知，但在 iOS5 设备上未收到通知。

如果我尝试在 iOS4.3.3 设备上发送通知，它会在此设备上收到。

我的服务器是用 c# 开发的，苹果推送通知证书以 .p12 格式使用。

我注册通知的代码是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Set the navigation controller as the window's root view controller and display.
    deviceToken = nil;

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert];

    return YES;
}

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken 
{
    UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"Succeeded in registering for APNS" message:@"Sucess" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alertView show];
    [alertView release];

    deviceToken = [devToken retain];

    NSMutableString *dev = [[NSMutableString alloc] init];

    NSRange r;
    r.length = 1;
    unsigned char c;

    for (int i = 0; i < [deviceToken length]; i++)
    {
        r.location = i;
        [deviceToken getBytes:&c range:r];

        if (c < 10) {
            [dev appendFormat:@"0%x", c];
        }
        else {
            [dev appendFormat:@"%x", c];
        }

    }

    NSUserDefaults *def = [NSUserDefaults standardUserDefaults];

    [def setObject:dev forKey:@"DeviceToken"];

    [def synchronize];

    NSLog(@"Registered for APNS %@\n%@", deviceToken, dev);

    [dev release];

}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
{
    NSLog(@"Failed to register %@", [error localizedDescription]);

    UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"FAILED" message:@"Fail" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alertView show];
    [alertView release];

    deviceToken = nil;
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSLog(@"Recieved Remote Notification %@", userInfo);

    NSDictionary *aps = [userInfo objectForKey:@"aps"];
    NSDictionary *alert = [aps objectForKey:@"alert"];
    //NSString *actionLocKey = [alert objectForKey:@"action-loc-key"];
    NSString *body = [alert objectForKey:@"body"];

//  NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];
//  
//  if ([viewControllers count] > 2) {
//      NSRange r;
//      r.length = [viewControllers count] - 2;
//      r.location = 2;
//      [viewControllers removeObjectsInRange:r];
//      
//      MapViewController *map = (MapViewController*)[viewControllers objectAtIndex:1];
//      [map askDriver];
//  }
//  
//  [self.navigationController setViewControllers:viewControllers];

//  [viewControllers release];

    //NewBooking,"BookingId",Passenger_latitude,Passenger_longitude,Destination_latitude,Destination_longitude,Distance,Time,comments

    NSArray *arr = [body componentsSeparatedByString:@","];
    if ([arr count]>0) {

        MapViewController *map = (MapViewController*)[[self.navigationController viewControllers] objectAtIndex:1];
        [map askDriver:arr];
        [self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:1] animated:YES];
    }

    //NSString *sound = [userInfo objectForKey:@"sound"];

    //UIAlertView *alertV = [[UIAlertView alloc] initWithTitle:actionLocKey 
//                                                  message:body delegate:nil 
//                                        cancelButtonTitle:@"Reject" 
//                                        otherButtonTitles:@"Accept", nil];
//  
//  [alertV show];
//  [alertV release];

} 
```

谁能帮我解决这个问题。为什么在 iOS4.3 设备上收到通知但在 iOS5 上没有？

非常感谢！！！提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:13:22.917

```
-(void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken   
{ 

    NSLog(@"~~~~devToken=%@",deviceToken); 

    NSString *dt = [[deviceToken description] stringByTrimmingCharactersInSet:     
    [NSCharacterSet characterSetWithCharactersInString:@"<>"]]; 
    dt = [dt stringByReplacingOccurrencesOfString:@" " withString:@""]; 

    self.DeviceToken= dt;

    cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0];  
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
    if (theConnection) 
    {
       NSLog(@"connection exists");
    }
    else   
    {
       UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Connection Error" 
                                                   message:@"There was an error contacting the servers. Please try again." 
                                                  delegate:nil 
                                         cancelButtonTitle:@"OK" 
                                        otherButtonTitles:nil];
       [alert show];
       [alert release];
    }  
    [theConnection release]; 

}  

-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo   
{

   NSLog(@"did receive remore notification %@",userInfo);
   if(isForground)
   { 
   // your code 
   }
}  

-(void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err  
{ 
   NSLog(@"Error in registration. Error: %@", err);

   NSString *status = [ NSString stringWithFormat: @"%@\nRegistration failed.\n\nError: %@",[err localizedDescription] ];

   UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:status  delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
   [alert show];
   [alert release];
} 
```

# postgresql - tOra 说没有连接提供商

> ID：11289790
> 
> 赞同：6
> 
> 时间：2012-07-02T08:02:23.777
> 
> 标签：postgresql, ubuntu, connection, qt4, tora

我在ubuntu 12.04上安装了tOra（pl/SQL编辑器），打开软件后说：没有连接提供者

我需要将它连接到 postgres 数据库。

任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T08:04:28.807

MySQL、PostgreSQL、Microsoft SQL、ODBC 提供程序：

```
sudo apt-get install libqt4-sql-mysql libqt4-sql-psql libqt4-sql-sqlite libqt4-sql-odbc libqt4-sql-tds 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T08:44:09.497

安装后`libqt4-sql-psql`（qt4 postgres 适配器）问题解决了。

```
apt-get install libqt4-sql-psql 
```

# javascript - 在 Javascript 逻辑中访问 EJS 变量

> ID：11289793
> 
> 赞同：46
> 
> 时间：2012-07-02T08:02:36.617
> 
> 标签：javascript, node.js, express, ejs

我正在开发一个 Node.js 应用程序（这是一个游戏）。在这种情况下，我设置了一些代码，这样当一个人访问索引并选择一个房间时，他会被重定向到正确的房间。

现在，Express v2.5.8 是这样完成的：

```
server.get("/room/:name/:roomId, function (req, res) {
  game = ~databaseLookup~
  res.render("board", { gameState : game.gameState });
} 
```

在 board.ejs 中，我可以使用如下代码访问 gameState 方式：

```
<% if (gameState) { %>
  <h2>I have a game state!</h2>
<% } %> 
```

有没有办法将它导入到我的 JavaScript 逻辑中？我希望能够做类似的事情`var gs = ~import ejs gameState~`，然后能够用它做任何我想做的事情——访问它的变量，将它打印到控制台进行验证。最终，我想用这个 gameState 做的是正确显示棋盘，为此我需要做一些事情，比如访问棋子的位置，然后在屏幕上正确显示它们。

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-02T17:27:00.363

您可以直接将 gameState 变量注入页面上的 javascript。

```
<% if (gameState) { %>
     <h2>I have a game state!</h2>
     <script>
        var clientGameState = <%= gameState %>            
     </script>
<% } %> 
```

另一个选项可能是在页面已经加载后向服务器进行 AJAX 回调，返回 gameState JSON，并将 clientGameState 设置为 JSON 响应。

您可能还对此感兴趣：[如何在 Node.js 和浏览器之间共享代码？](https://stackoverflow.com/questions/3225251/how-can-i-share-code-between-node-js-and-the-browser)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-12-02T10:21:52.367

我有同样的问题。我需要使用的数据不仅仅是渲染页面，而是在我的 js 脚本中。因为页面在渲染时只是字符串，所以必须将数据转成字符串，然后在js中再次解析。在我的例子中，我的数据是一个 JSON 数组，所以：

```
<script>
  var test = '<%- JSON.stringify(sampleJsonData) %>'; // test is now a valid js object
</script> 
```

单引号不能与 stringify 的双引号混合。同样来自 ejs 文档：

> "<%- 将未转义的值输出到模板中"

对数组也可以这样做。只需连接数组然后再次拆分。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-29T19:26:13.050

我觉得下面的逻辑更好，它对我有用。

假设传递给 ejs 页面的变量是`uid`，你可以有标签的内容`div`或`h`带有变量的标签。您可以访问脚本中 div 或`h`标签的内容并将其分配给变量。

下面的代码示例：（在 ejs 中）

```
<script type="text/javascript">
    $(document).ready(function() {
        var x = $("#uid").html(); 
        alert(x);  // now JS variable 'x' has the uid that's passed from the node backend.
    });
</script>

<h2 style="display:none;" id="uid"><%=uid %></h2> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-05-30T13:56:16.573

在 EJS 模板中：
ex:- testing.ejs

```
<html>
<!-- content -->
<script>
    // stringify the data passed from router to ejs (within the EJS template only)
    var parsed_data = <%- JSON.stringify(data) %>  
</script>
</html> 
```

在服务器端脚本中：
例如：Router.js

```
res.render('/testing', {
    data: data // any data to be passed to ejs template
}); 
```

在链接的 js（或 jquery）脚本文件中：
ex:- script.js 在 JavaScript 中：

```
console.log(parsed_data) 
```

在 JQuery 中：

```
$(document).ready(function(){
    console.log(parsed_data)
 }); 
```

注意： 1\. user - 而不是 <% %> 标签中的 =
2\. 您不能声明或使用从路由器传递的数据直接查看链接的 javascript 或 jquery 脚本文件。
3\. 仅在 EJS 模板中声明 <% %> 并将其用于任何链接的脚本文件。

我不确定，但我发现使用从路由器传递的数据在脚本文件或脚本标签中查看是最佳实践。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-11T13:02:17.773

这对我有用。

```
// bar chart data
    var label = '<%- JSON.stringify(bowlers) %>';
    var dataset = '<%- JSON.stringify(data) %>';

    var barData = {
      labels: JSON.parse(label),
      datasets: JSON.parse(dataset)
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-04-07T13:30:14.273

这应该有效

```
 res.render("board", { gameState : game.gameState }); 
```

在前端 js

```
const gameState = '<%- JSON.stringify(gameState) %>' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-23T14:38:23.390

好吧，在这种情况下，您可以简单地使用输入文本来获取数据。当您在 firebase 中使用它时，它很容易并且经过测试。

```
<input type="text" id="getID" style="display: none" value="<%=id%>"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-29T14:42:30.667

您可以通过将后端 js 设置为字符串来将后端 js 分配给前端 ejs。

```
<script>
     var testVar = '<%= backEnd_Var%>';
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-24T17:03:26.910

我知道这是很久以前回答的，但我想我会添加它，因为我遇到了需要不同解决方案的类似问题。

本质上，我试图通过 javascript 逻辑访问一个 EJS 变量，该变量是 JSON 对象数组，如下所示：

```
<script>
   // obj is the ejs variable that contains JSON objects from the backend
   var data = '<%= obj %>';
</script> 
```

当我尝试使用`forEach()`数据时，我会得到错误，这是因为`'<%= obj %>'`提供了一个字符串，而不是一个对象。

要解决这个问题：

```
<script>
   var data = <%- obj %>;
</script> 
```

删除字符串包装并更改为`<%-`（以免将html转义到缓冲区）后，我可以访问该对象并使用循环遍历它`forEach()`

# c++ - 像素阵列压缩

> ID：11289803
> 
> 赞同：0
> 
> 时间：2012-07-02T08:03:13.117
> 
> 标签：c++, image-processing, comparison, compression

我正在比较 2 张图像并获得一组不匹配的像素，例如

```
rgb(12, 54, 69) 1 4
rgb(19, 54, 98) 4 8
rgb(12, 54, 69) 2 9
rgb(86, 85, 10) 9 7 
```

我需要通过网络传输它。所以压缩我可以做到

```
rgb(12, 54, 69) (1, 4), (2, 9)
rgb(19, 54, 98) (4, 8)
rgb(86, 85, 10) (9, 7) 
```

但是，我怀疑这种简单的压缩在差异很大的情况下不会产生太大的好处。我还没有进行任何测试。

当整个图像被改变时，新图像的正常 JPEG 压缩会在尺寸上小得多。但是，对于任何小的差异，此方法将产生较小的字节开销。如果不从每个图像的上到下循环，就无法知道变化量。

有没有做同样的标准方法？我将在 protobuf 或 boost 序列化和 Qt 之上用 C++ 实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:11:16.160

在开始时将图像压缩为 jpeg，将这个新 jpeg 文件的大小传递给您的函数。当你在你的函数中迭代时，一旦你超过了传入的大小，就返回一个失败并发送 jpeg。这样您就不必到达函数的末尾。

但是，我将首先介绍您当前的代码；在不太可能的情况下，您实际上会受到此代码的瓶颈，通过创建一个本机/C 模块来执行此遍历可能会更好。

当然，这假定您的函数所花费的时间平均超过了 JPEG 创建时间。与往常一样，优化之前的配置文件、配置文件、配置文件。

# python - python django urllib2.request，发布请求，我的代码不起作用。未检测到我发送的数据

> ID：11289807
> 
> 赞同：0
> 
> 时间：2012-07-02T08:03:30.717
> 
> 标签：python, django, urllib2

这是要求：

所有写入 API 都需要 JSON 编码的内容。许多还接受文件上传。因此，我们希望 API 请求具有内容类型 multipart/form-data，并且请求的 JSON 主体应具有名称**data**。

```
$ curl -F file=@/Users/alunny/index.html -u username@gmail.com -F 'data={"title":"API V1 App","package":"com.alunny.apiv1","version":"0.1.0","create_method":"file"}' https://build.phonegap.com/api/v1/apps 
```

**从上面的 url，留下那封电子邮件，因为我已经有了我可以使用的身份验证令牌 **

这是我的代码：

```
url='url?auth_token='+token  //i have token , so no probs

da = {"create_method" : "file","title":"s9fsdf"}
da = {"data" : da}
da = urllib.urlencode(da)
req = urllib2.Request(url)
req.add_data(json.dumps(da))
req.add_header('Content-Type', 'multipart/form-data')
#req.add_header('Accept', 'application/json')  
result = ""

try:
    result = urllib2.urlopen(req)
except urllib2.URLError,e :
    print "Code : "+str(e.code)
    print e.read() 
```

低于错误：

```
Code : 400
{"error":"no create_method specified: file, remote_repo, or hosted_repo"} 
```

我认为我发送数据的方式是错误的，谁能告诉我正确的方式。当我们发送数据时，它应该有名称“数据”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:16:29.913

未经测试，但它可能会比其他方式更好地对 json 数据进行 urlencoding：

```
jsondata = {"create_method" : "file","title":"s9fsdf"}
data = {"data" : json.dumps(jsondata)}
data = urllib.urlencode(data)
req = urllib2.Request(url)
req.add_data(data) 
```

# python - 在 git push hook 上创建的新工作副本

> ID：11289809
> 
> 赞同：0
> 
> 时间：2012-07-02T08:03:42.497
> 
> 标签：python, git, hook, githooks

我试图用 Python 写一个钩子。推送后执行时出现问题。例如，在推送之后，应该重置工作副本。重置已执行，但在错误的文件夹中。推送到“.git”文件夹而不是 repo 文件夹后，我得到了一个新的工作副本。有人可以解释发生了什么吗？

```
process = subprocess.Popen("git reset --hard".split(), stdout=subprocess.PIPE) 
```

我正在使用上面的代码来重置服务器端的 repo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:58:42.263

对于错误文件夹问题：

我的解决方案是使用 Git 挂钩安装程序，它在挂钩脚本中硬编码 Git 存储库路径，因此无论您在哪里运行提交挂钩脚本，提交挂钩脚本本身都知道 git repo 文件夹在哪里：

[https://github.com/miohtama/vvv/blob/master/vvv/hooks/git.py](https://github.com/miohtama/vvv/blob/master/vvv/hooks/git.py)

# asp.net - 使用详细信息视图获取插入行的主键

> ID：11289810
> 
> 赞同：2
> 
> 时间：2012-07-02T08:03:51.670
> 
> 标签：asp.net, detailsview

我使用详细信息视图在我的 sql server 数据库中插入总和数据，它的表有一个名为 ID 的主键，并且此 pk 已启用身份，因此它会自动生成！插入后我需要获取插入行的 pk 并使用此代码

```
protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
{

    int id = Convert.ToInt32(e.Values["ID"]);
    Response.Redirect("BakhshnameAppendix.aspx?ID=" + id.ToString());
} 
```

但它总是返回 0 ！我怎样才能获得插入的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:08:22.227

尝试使用这个：

```
protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
{

   int intKey;
   if (int.TryParse(e.ReturnValue, out intKey))
   {
         Response.Redirect("BakhshnameAppendix.aspx?ID=" + intKey.ToString());
   }
} 
```

# http - 什么是正确的 HTTP 重定向状态代码？

> ID：11289812
> 
> 赞同：3
> 
> 时间：2012-07-02T08:03:54.337
> 
> 标签：http, redirect

我在我的网站上实现了友好的 URL，我可以通过 URL 以两种方式访问​​产品和类别。

1.  [http://www.example.com/home/electronics/tablets](http://www.example.com/home/electronics/tablets)
2.  [http://www.example.com/tablets](http://www.example.com/tablets)

现在，当 URL [http://www.example.com/tablets](http://www.example.com/tablets)被导航到时，它会永久重定向（301）到[http://www.example.com/home/electronics/tablets](http://www.example.com/home/electronics/tablets)但这是正确的重定向代码吗？

我在想也许它应该是303？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:06:04.887

这取决于它是永久（301）还是临时（302）重定向。实际上，它在浏览器中并没有显着差异。

为什么你觉得*303*合适？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:12:50.220

301是正确的。你总是会在那里重定向。

302不合适，你希望结果被缓存。

303，引用规范，“主要是为了允许 POST 激活脚本的输出将用户代理重定向到选定的资源。新的 URI 不是原始请求资源的替代引用。” 所以也不合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:06:02.650

您可以使用[HTTP 302](http://en.wikipedia.org/wiki/HTTP_302)。这是相当标准的。

编辑：301 绝对正确，因为它是永久重定向。我误读了这个问题。

# tridion - 从 .NET 中的 Embeddedschemafield 错误中检索组件

> ID：11289817
> 
> 赞同：4
> 
> 时间：2012-07-02T08:04:15.440
> 
> 标签：tridion

我一直在研究 .NET C# TBB 以从模式中检索字段，而模式又会解析每个嵌入的字段。我在模板中使用 Razor Mediator 来输出 JSON。我对 C# 和 .NET 非常陌生，因此我使用和引用我的同事在其他模板中编写的代码。TBB 的目标是在发布后检索这些嵌入字段之一中图像的确切 url ，并将其作为纯文本推回包中。

这最终似乎奏效了，直到我将嵌入式模式的一个字段更改为多媒体链接。一旦我将 Embeddedschemafields 设置为循环遍历，模板生成器就会提供一个带有 o 描述性的错误

```
Operation is not supported on a new item or on a null URI. 
```

我不知道为什么会这样，因为代码确实*有效*。这就是为什么我认为更改嵌入式模式的一个字段可能是罪魁祸首，但错误甚至在查找此特定字段之前就发生了。我的代码停止从 Embeddedschemafield 检索组件：

```
CM.Schema schema = (engine.GetObject(comp.GetAsSource().GetValue("ID")) as CM.Component).Schema;
ItemFields fields = new ItemFields(schema);
foreach (ItemField field in fields)
{
   _log.Info("top level: " + field.Name);
   if (field is EmbeddedSchemaField)
    {

     CM.Component c = (CM.Component)engine.GetObject(package.GetByName(Package.ComponentName));
      _log.Info(" c = " + c + " content:  " + c.Content + " schema:  " + c.Schema);
      ItemFields content = new ItemFields(c.Content, c.Schema);
      EmbeddedSchemaField embeddedFields = (EmbeddedSchemaField)content[field.Name]; //boom

      MultimediaLinkField mmValue = null;

      ItemFields currentFields = null;

      foreach (ItemFields embeddedField in embeddedFields.Values)
      { 
```

有人有想法吗？

这是我从模板生成器获得的日志：

```
GetComponentImageUrl: top level: name
GetComponentImageUrl: top level: division
GetComponentImageUrl: top level: theme
GetComponentImageUrl: top level: product
GetComponentImageUrl: field.Name = Embeddedschemafield
GetComponentImageUrl:  c = Component tcm:11-1963 content:  System.Xml.XmlElement schema:  Schema tcm:11-1842-8
GetComponentImageUrl:  c. Content = System.Xml.XmlElement
Engine: Error in Engine.Transform
Engine: Error in Engine.Transform
Operation is not supported on a new item or on a null URI.
  at Tridion.ContentManager.Session.GetTcmUri(String uri)
   at Tridion.ContentManager.Session.GetObject(String uri)
   at Tridion.ContentManager.Session.GetObject(XmlElement linkElement) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:20:59.523

我会做以下事情：

```
CM.Schema schema = (engine.GetObject(comp.GetAsSource().GetValue("ID")) as CM.Component).Schema;
ItemFields fields = new ItemFields(schema);
foreach (ItemField field in fields)
{
  _log.Info("top level: " + field.Name);
  if (field is EmbeddedSchemaField)
  {
    CM.Component c = (CM.Component)engine.GetObject(package.GetByName(Package.ComponentName));
    _log.Info(" c = " + c + " content:  " + c.Content + " schema:  " + c.Schema);
    ItemFields content = new ItemFields(c.Content, c.Schema);

    if (content != null && content.Contains(field.Name)) {
      EmbeddedSchemaField embeddedFields = (EmbeddedSchemaField)content[field.Name]; //boom

      MultimediaLinkField mmValue = null;

      ItemFields currentFields = null;

      foreach (ItemFields embeddedField in embeddedFields.Values)
      { 
```

请注意添加的检查 ItemFields 对象是否已创建，并且它包含您要查找的字段。

# django - 管理中的 DjangoUnicodeDecodeError，DEBUG=False

> ID：11289824
> 
> 赞同：3
> 
> 时间：2012-07-02T08:05:00.407
> 
> 标签：django, debugging, administration

我对 Django 管理有一点奇怪的问题。在 settings.py 中使用 DEBUG=True，一切正常。但是当我将其更改为 DEBUG=False 时，我无法进入项目的页面编辑。我收到此错误：

```
Traceback (most recent call last):

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/core/handlers/base.py, line 136, in get_response
    response = response.render()

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/response.py, line 104, in render
    self._set_content(self.rendered_content)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/response.py, line 81, in rendered_content
    content = template.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 140, in render
    return self._render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 134, in _render
    return self.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 123, in render
    return compiled_parent._render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 134, in _render
    return self.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 123, in render
    return compiled_parent._render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 134, in _render
    return self.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 62, in render
    result = block.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 62, in render
    result = block.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/defaulttags.py, line 192, in render
    nodelist.append(node.render(context))

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 155, in render
    return self.render_template(self.template, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/loader_tags.py, line 137, in render_template
    output = template.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 140, in render
    return self._render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 134, in _render
    return self.nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/defaulttags.py, line 192, in render
    nodelist.append(node.render(context))

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/defaulttags.py, line 192, in render
    nodelist.append(node.render(context))

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/defaulttags.py, line 281, in render
    return nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/defaulttags.py, line 281, in render
    return nodelist.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 823, in render
    bit = self.render_node(node, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 837, in render_node
    return node.render(context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 880, in render
    return _render_value_in_context(output, context)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/template/base.py, line 858, in _render_value_in_context
    value = force_unicode(value)

  File /home/yetty/projects/Tchorici/venv/local/lib/python2.7/site-packages/django/utils/encoding.py, line 93, in force_unicode
    raise DjangoUnicodeDecodeError(s, *e.args)

DjangoUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128). You passed in <django.forms.forms.BoundField object at 0x327bd90> (<class 'django.forms.forms.BoundField'>) 
```

我不知道，为什么我只用 DEBUG=False 得到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:34:03.270

我有它；）

在 admin.py 中，我有自己的 MultipleChoiceField 表单：

```
people = forms.ModelMultipleChoiceField(
    Person.objects.all(),
    widget=FilteredSelectMultiple("Účastníci", False, attrs={'rows': '10'})
)

class Meta:
    model = Event 
```

即使我有

```
# -*- coding: utf-8 -*- 
```

在文件的开头，“Účastníci”制造了麻烦。当我将其更改为“Ucastnici”时，一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-11T11:14:05.123

我通过实验发现错误是`debug_toolbar`. 带`DEBUG=True debug_toolbar`残疾人

# node.js - 在 nodejs + emberjs 应用程序中将车把模板放在哪里？

> ID：11289827
> 
> 赞同：2
> 
> 时间：2012-07-02T08:05:03.520
> 
> 标签：node.js, ember.js, handlebars.js

我正在尝试在基于 Node + Express 的项目中使用 Ember。我将客户端代码放在 public/javascript 下，并使用`index.jade`我们在每个`express`项目中默认拥有的文件来提供它。我需要`handlebars`为我的客户视图使用模板，但我不知道该怎么做。我应该把我的模板文件放在哪里以及节点服务器将如何编译和提供它们？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T07:22:09.757

我喜欢将这个库用于带有 node.js + express 的 Handlebars 模板。

[https://github.com/donpark/hbs](https://github.com/donpark/hbs)

以下是在节点 + 快速设置中开始使用 Handlebars 的步骤

安装 hbs npm 模块

```
npm install hbs --save 
```

导入模块并将视图引擎更改为使用 hbs。

```
var hbs = require('hbs')
app.set('view engine', 'hbs'); 
```

（可选）要使用 partials，您需要注册 partials。

```
hbs.registerPartials(__dirname + '/views/partials'); 
```

这些文件应位于扩展名为 .hbs 的 views 文件夹中。如果需要，您可以更改此设置。

```
app.set('views', path.join(__dirname, '<your_folder_name>')); 
```

在这里查看更多部分命名约定[https://github.com/donpark/hbs](https://github.com/donpark/hbs)

# php - 如何计算mysql数据库中的表水平？

> ID：11289828
> 
> 赞同：-3
> 
> 时间：2012-07-02T08:05:10.797
> 
> 标签：php

我在 mysql 数据库中有一个包含 15 列`ID`, `USERNAME`, `PASSWORD`, `EMAIL`, `TELEPHONE`, `FAX`, `ADDRESS`, `COUNTRY`, `CITY`, `NATIONALITY`,等的表。`EDUCATION`

有一些必填字段和可选字段。用户将填写必填字段和一些可选字段。我需要给每个用户的*完整性评分*（例如`Completeness Score 40%`）以增加对填写所有可选字段的关注。

我怎样才能在 PHP 中做到这一点？我试图通过（ SELECT COUNT WHERE ）来做到这一点 - 但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:17:08.173

假设表被称为“用户”，你做

```
SQL: 'select * from users where id=X' 
```

（无需在 WHERE 子句中添加任何可选字段！）

然后稍后在 PHP 中，您可以执行以下操作：

```
if (strlen($row['username'])>1)
    $score += 10;
if (is_valid_email($row['email']))
    $score += 10; 
```

……等等。可能有更好的方法来做到这一点。这只是给你一个想法！这是一个非常基本的问题，您可能想了解更多信息！干杯。

# c++ - 在 C++ 中使用 Windows API“向后”搜索目录

> ID：11289831
> 
> 赞同：0
> 
> 时间：2012-07-02T08:05:29.843
> 
> 标签：c++, windows, directory

> **可能重复：**
> [如何在 C 程序中获取当前文件夹的父目录？](https://stackoverflow.com/questions/5233559/how-to-get-the-parent-directory-of-the-current-folder-in-a-c-program)

我正在使用 C++ Windows API，并在最初给定特定目录路径（即 C:\...\ProjectXX）的情况下查找文件夹和目录。我特别使用了 FindFirstFile() 和 FindNextFile() 函数。但是，我有时想在目录中“向后”移动，即获取给定目录的“父级”（包含给定目录的文件夹）。这在什么方式下是可能的，在使用什么功能下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:11:30.470

与 C 不同，C++ 有一个方法：`.remove_leaf()`. 但是你没有使用 C++ 函数，你使用的是 WinAPI 函数，所以`PathRemoveFileSpec()`会更合适。

# c - 为什么窗口没有正确设置光标？

> ID：11289833
> 
> 赞同：0
> 
> 时间：2012-07-02T08:05:44.400
> 
> 标签：c, winapi, cursor

正如[MSDN 所描述的](http://msdn.microsoft.com/en-us/library/windows/desktop/gg153552.aspx)：

> 当鼠标在窗口上移动时，该窗口会收到一条`WM_SETCURSOR`消息（除非另一个窗口已经捕获了鼠标）。
> 
> 如果应用程序传递`WM_SETCURSOR`到`DefWindowProc`，该`DefWindowProc`函数使用以下算法来设置光标图像：
> 
> 1.  如果窗口有父窗口，则将`WM_SETCURSOR`消息转发给父窗口处理。
> 2.  否则，如果窗口有类光标，则将光标设置为类光标。
> 3.  如果没有类光标，则将光标设置为箭头光标。

这是我的源代码：

```
#include <tchar.h>
#include <Windows.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInsTance, LPTSTR lpCmdLine, int nCmdShow)
{
  WNDCLASSEX wcex = { 0 };
  HWND hWnd;
  BOOL ret;
  MSG msg;

  wcex.cbSize = sizeof(wcex);
  wcex.lpfnWndProc = WndProc;
  wcex.hInstance = hInstance;
  wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION);
  // wcex.hCursor = LoadCursor(NULL, IDC_ARROW);
  wcex.lpszClassName = TEXT("MainWindow");
  wcex.hIconSm = wcex.hIcon;

  RegisterClassEx(&wcex);
  hWnd = CreateWindow(wcex.lpszClassName, TEXT("Test"), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, NULL, hInstance, NULL);

  ShowWindow(hWnd, nCmdShow);
  UpdateWindow(hWnd);

  while (ret = GetMessage(&msg, NULL, 0, 0))
  {
    if (ret == -1)
    {
      return EXIT_FAILURE;
    }
    else
    {
      TranslateMessage(&msg);
      DispatchMessage(&msg);
    }
  }
  return msg.wParam;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch (uMsg)
  {
  case WM_DESTROY:
    PostQuitMessage(EXIT_SUCCESS);
    break;
  default:
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
  }
  return 0;
} 
```

当我在窗口上快速移动光标时，光标不会变成箭头，而是变成了调整大小的箭头；如果我设置`wcex.hCursor`为`LoadCursor(NULL, IDC_ARROW)`，一切都会好起来的。我的问题是：为什么我的代码不像 MSDN 所说的那样工作？

我的意思是，如果我不设置`wcex.hCursor`，并且我不处理`WM_SETCURSOR`消息，则`DefWindowProc`应该“将光标设置为箭头光标”，但似乎没有。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:22:56.813

请参阅`hCursor`成员的描述`WNDCLASSEX`：

> 类游标的句柄。此成员必须是游标资源的句柄。如果此成员为 NULL，则应用程序必须在鼠标移入应用程序窗口时显式设置光标形状。

[WNDCLASSEX 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633577%28v=vs.85%29.aspx)

# ruby-on-rails - default_scope 与 :include 选项 rails 3.2

> ID：11289836
> 
> 赞同：0
> 
> 时间：2012-07-02T08:05:58.433
> 
> 标签：ruby-on-rails, associations, upgrade, default-scope

我正在将 rails3 应用程序升级到 3.2.6 我对已弃用的带有选项的 default_scope 有一些问题。

我有几个模型 Campaigns 和 Sites 通过campaign_sites 建立了多对多的关系。

```
class Campaign < ActiveRecord::Base
  has_many :campaign_sites, :dependent => :destroy
  ....
end

class Site < ActiveRecord::Base
  has_many :campaign_sites, :dependent => :destroy
  has_many :campaigns, :through => :campaign_sites
  ...
end

class CampaignSite < ActiveRecord::Base
  default_scope :include => [:campaign, :site], :order => :'sites.name' 
  belongs_to :campaign, :touch => true
  belongs_to :site, :touch => true
  ...
end 
```

这在 rails 3.0.10 上运行良好，但在升级到 3.2.6 后，我在这一行中收到以下 mysql 错误。

```
default_scope :include => [:campaign, :site], :order => :'sites.name'

Mysql2::Error: Unknown column 'sites.name' in 'order clause': SELECT `campaigns`.* FROM`campaigns` INNER JOIN `campaign_sites` ON `campaigns`.`id` = `campaign_sites`.`campaign_id` WHERE `campaign_sites`.`site_id` = 11377 ORDER BY campaigns.name, sites.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:15:21.920

这可能会改变包含在 3.0.10 和 3.2.6 之间的工作方式。它现在不是进行单个查询，而是进行多个查询来进行预加载。我只想在其中添加一个`joins`选项，以便它明确加入站点表：

```
default_scope :include => [:campaign, :site], :order => :'sites.name', :joins => :sites 
```

# perl - 使用另一个文件重命名文件中的名称而不使用循环

> ID：11289838
> 
> 赞同：1
> 
> 时间：2012-07-02T08:06:01.990
> 
> 标签：perl, matlab, sed, awk, grep

我有两个文件：

(one.txt) 看起来像这样：

```
>ENST001 

(((....)))

(((...)))

>ENST002 

(((((((.......))))))

((((...))) 
```

我还有 10000 个 ENST

(two.txt) 看起来像这样：

```
>ENST001   110

>ENST002  59 
```

对于所有 ENST 的其余部分，依此类推

我基本上想通过（two.txt）中的两个字段的组合替换（one.txt）中的ENST，因此结果将如下所示：

```
>ENST001_110 

(((....)))

(((...)))

>ENST002_59 

(((((((.......))))))

((((...))) 
```

我为此编写了一个 matlab 脚本，但由于它会循环 (two.txt) 中的所有行，因此需要 6 个小时才能完成，所以我认为使用 awk、sed、grep 甚至 perl 我们可以在几分钟内得到结果. 这是我在matlab中所做的：

```
frf = fopen('one.txt', 'r');       
frp = fopen('two.txt', 'r');                                     
fw = fopen('result.txt', 'w');    

while feof(frf) == 0

line = fgetl(frf);
first_char = line(1);

if strcmp(first_char, '>') == 1 % if the line in one.txt start by > it is the ID 

   id_fold = strrep(line, '>', ''); % Reomve the > symbol

   frewind(frp)     % Rewind two.txt file after each loop

    while feof(frp) == 0

        raw = fgetl(frp);
        scan = textscan(raw, '%s%s');
        id_pos = scan{1}{1};
        pos = scan{2}{1};

            if strcmp(id_fold, id_pos) == 1  % if both ids are the same

                id_new = ['>', id_fold, '_', pos];

                fprintf(fw, '%s\n', id_new);

            end    

    end    

else

    fprintf(fw, '%s\n', line);  % if the line doesn't start by > print it to results

end 
```

结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:24:57.573

一种使用方式`awk`。`FNR == NR`处理参数中的第一个文件并保存每个数字。第二个条件处理第二个文件，当第一个字段与数组中的一个键匹配时，修改附加数字的那一行。

```
awk '
    FNR == NR { 
        data[ $1 ] = $2; 
        next 
    } 
    FNR < NR && data[ $1 ] { 
        $0 = $1 "_" data[ $1 ] 
    } 
    { print }
' two.txt one.txt 
```

输出：

```
>ENST001_110

(((....)))

(((...)))

>ENST002_59

(((((((.......))))))

((((...))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T08:19:45.810

您可以在`sed`第一次运行时仅在`two.txt`您可以根据需要创建`sed`命令替换并在以下位置运行它`one.txt`：

**第一种方式**

```
sed "$(sed -n '/>ENST/{s=.*\(ENST[0-9]\+\)\s\+\([0-9]\+\).*=s/\1/\1_\2/;=;p}' two.txt)" one.txt 
```

**第二种方式**

如果文件很大，您将`too many arguments error`使用以前的方式获得。因此，还有另一种方法可以解决此错误。您需要一一执行所有三个命令：

```
sed -n '1i#!/bin/sed -f
/>ENST/{s=.*\(ENST[0-9]\+\)\s\+\([0-9]\+\).*=s/\1/\1_\2/;=;p}' two.txt > script.sed
chmod +x script.sed
./script.sed one.txt 
```

第一个命令将形成 sed 脚本，该脚本将能够根据需要修改 one.txt。`chmod`将使这个新脚本可执行。最后一个命令将执行命令。所以每个文件只读取一次。没有任何循环。请注意，第一个命令由两行组成，但仍然是一个命令。如果您删除换行符，它将破坏脚本。这是`i`因为`sed`. 您可以在 ``sed 手册页中查找详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T10:37:47.833

此 Perl 解决方案将修改后的`one.txt`文件发送到`STDOUT`.

```
use strict;
use warnings;

open my $f2, '<', 'two.txt' or die $!;

my %ids;

while (<$f2>) {
  $ids{$1} = "$1_$2" if /^>(\S+)\s+(\d+)/;
}

open my $f1, '<', 'one.txt' or die $!;

while (<$f1>) {
  s/^>(\S+)\s*$/>$ids{$1}/;
  print;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T08:29:46.477

把问题转过来。在 perl 我会做这样的事情：

```
#!/usr/bin/perl

open(FH1, "one.txt");
open(FH2, "two.txt");
open(RESULT, ">result.txt");

my %data;

while (my $line = <FH2>)
{
    chomp(line);

    # Delete leading angle bracket
    $line =~ s/>//d;

    # split enst and pos
    my ($enst, $post) = split(/\s+/, line);

    # Store POS with ENST as key
    $data{$enst} = $pos;
}

close(FH2);

while (my $line = <FH1>)
{
    # Check line for ENST
    if ($line =~ m/^>(ENST\d+)/)
    {
        my $enst = $1;

            # Get pos for ENST
        my $pos = $data{$enst};

            # make new line
        $line = '>' . $enst . '_' . $pos . '\n';
    }

    print RESULT $line;
}

close(FH1);
close(RESULT); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T09:33:24.167

这可能对您有用（GNU sed）：

```
sed -n '/^$/!s|^\(\S*\)\s*\(\S*\).*|s/^\1.*/\1_\2/|p' two.txt | sed -f - one.txt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T19:27:43.893

试试这个 MATLAB 解决方案（无循环）：

```
%# read files as cell array of lines
fid = fopen('one.txt','rt');
C = textscan(fid, '%s', 'Delimiter','\n');
C1 = C{1};
fclose(fid);
fid = fopen('two.txt','rt');
C = textscan(fid, '%s', 'Delimiter','\n');
C2 = C{1};
fclose(fid);

%# use regexp to extract ENST numbers from both files
num = regexp(C1, '>ENST(\d+)', 'tokens', 'once');
idx1 = find(~cellfun(@isempty, num));       %# location of >ENST line
val1 = str2double([num{:}]);                %# ENST numbers
num = regexp(C2, '>ENST(\d+)', 'tokens', 'once');
idx2 = find(~cellfun(@isempty, num));
val2 = str2double([num{:}]);

%# construct new header lines from file2
C2(idx2) = regexprep(C2(idx2), ' +','_');

%# replace headers lines in file1 with the new headers
[tf,loc] = ismember(val2,val1);
C1( idx1(loc(tf)) ) = C2( idx2(tf) );

%# write result
fid = fopen('three.txt','wt');
fprintf(fid, '%s\n',C1{:});
fclose(fid); 
```

# javascript - 如何在 ASP.NET MVC 中使用 javascript 作为原始 html 插入内容

> ID：11289841
> 
> 赞同：1
> 
> 时间：2012-07-02T08:06:10.663
> 
> 标签：javascript, jquery, asp.net-mvc

```
<p id="selfText-@item.ThreadID">
  <script type="text/javascript">
    $(document).ready(function () { 
      GetSelfText('@item.ThreadID'); 
    });
  </script>
</p>

function GetSelfText(thingId) { 
  $.getJSON("http://www.reddit.com/r/playitforward/comments/" + thingId + "/.json?jsonp=?",
            { id: thingId }, 
            function (data) { 
              $("#selfText-" + thingId).html(data[0].data.children[0].data.selftext_html) 
            }) 
} 
```

现在它正在对 html 进行编码并将 html 用引号括起来。我需要它是原始的html。我也在尝试使用 JQuery Expander，但它不适用于 ajax 插入的内容。

所以我需要解决2个问题。将返回的数据作为原始 html 插入，并使扩展器插件与 ajax 插入的内容一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:25:03.190

编码发生在 reddit api 中。

尝试

```
function (data) { 
    var tempHtml = $('<div/>').html( data[0].data.children[0].data.selftext_html ).text();
    $("#selfText-" + thingId).html( tempHtml ) ;
} 
```

作为回调方法..

# elf - ELF中的字符串表

> ID：11289843
> 
> 赞同：12
> 
> 时间：2012-07-02T08:06:22.197
> 
> 标签：elf, string-table

1.  我得到了一些符号，并且得到了一个 ELF 文件（一个十六进制转储）。我怎么知道这个符号出现在哪个部分？

2.  `.strtab`和 和有什么不一样`.shstrtab`？是否还有另一个符号字符串数组？

当我获得符号名称表的索引时，它是 in`.strtab`还是 in的索引`.shstrtab`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T13:35:58.997

对于第一个问题，我们需要 elf 文件的 hexedit 才能正确理解。

对于第二个问题 - strtab 代表字符串表 shstrtab 代表节标题字符串表。

当我们阅读 ELF 头时，我们看到每个 ElfHeader 结构都包含一个名为 e_shstrndx 的成员。这是 shstrtab 的索引。如果您使用此索引，然后从 shstrtab 中读取，您可以找到该部分的名称。

strtab，是所有其他引用的字符串表。当您从 ELF 对象中读取符号时，每个 SYmbol 结构 (Elf32_Sym) 都有一个名为 st_name 的成员。这是 strtab 的索引，用于获取该符号的字符串名称。

您能否详细说明符号字符串数组？另外，名称表是什么意思？

您可以参考以下链接 - [Reading ELF String Table on Linux from C](https://stackoverflow.com/questions/10626203/reading-elf-string-table-on-linux-from-c)

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-04T16:55:20.077

我将在第一个问题上试一试，因为 Samir 回答了第二个问题。

符号的名称将在其中一个`STRTAB`部分中，然后在符号表（`SYMTAB`或`DYNSYM`部分之一）中将有一个条目，该条目通过包含部分中的偏移量引用该字符串。符号表中的条目可以告诉您该符号所在部分的索引，但不能告诉您使用它的位置。

为此，您需要检查包含在 type 部分中的重定位表`REL`；常用名称包括`.rel.dyn`, `.rel.plt`。重定位表列出了另一个代码段中对符号的所有引用，即代码和重定位段是成对的。表中的每一项都是一个符号的一次“用法”，并且包含用法所在的相应节中的偏移量以及该符号在符号表中的索引。

如果您可以使用该`readelf`实用程序，您可以轻松地使用`readelf -r <binary> | grep <symbol name>`来获取对符号的所有引用。

**如果您设置为使用 hexedit/不能使用 readelf**，那么您需要

1.  找到符号名字符串在二进制中的偏移量，在哪个段，然后得到那个字符串在那个段的偏移量；

2.  查看符号表中的所有条目并找到与该名称匹配的条目（`st_name`== 字符串部分中字符串的偏移量）；

3.  查看每个重定位表中的所有条目，以在该表的相应代码段中查找该符号的符号用法。每个条目的`r_info`字段包含它引用的符号表条目的索引（此索引被位映射到 的一部分`r_info`，并且在 32 位和 64 位的不同位置）。

与该符号表索引匹配的所有重定位条目都是您的字符串在某处的用法。

**更多信息：**

*   符号表：[https ://docs.oracle.com/cd/E23824_01/html/819-0690/chapter6-79797.html](https://docs.oracle.com/cd/E23824_01/html/819-0690/chapter6-79797.html)
*   重定位表：[https ://docs.oracle.com/cd/E19683-01/816-1386/6m7qcoblj/index.html#chapter6-54839](https://docs.oracle.com/cd/E19683-01/816-1386/6m7qcoblj/index.html#chapter6-54839)

# mysql - 高效的 MySQL 数据库设计

> ID：11289844
> 
> 赞同：0
> 
> 时间：2012-07-02T08:06:30.593
> 
> 标签：mysql, database-design

我正在为我的学校开发一个小程序，我对以下数据库设计有疑问。

管理员将通过在线表格将科目分配给教师。

一个主题的例子是这样的：

*   主题字段 1：（5 年级数学：教学 5/1、5/2 和 5/3）[文本字段]
*   学科领域 2：（6 年级数学：教学 6/2 和 6/6）[文本字段]

我根据他们的要求添加了 7 个主题字段，因为不会有任何人超过 7 个主题。

每个学科领域都需要完成一些事情，例如课程计划、课程大纲等......

每个要求将具有以下要求：

*   语言（语言 1、语言 2 或两者）[下拉]
*   类型（打印、文件或两者）[下拉]
*   时间（第一学期，第二学期或两者）[下拉]

![这是一个视觉](../Images/e15d55071dac7f015f52f7d6999deed7.png)

到目前为止，我已经提出了这个数据库设计：

*   ID（主要，自动递增）
*   TID（教师编号）
*   年

*   主题1

*   主题1要求1
*   主题1要求2
*   主题1要求3
*   发送时间
*   时间回顾

*   主题2

*   主题2要求1
*   主题2要求2
*   主题2要求3
*   发送时间
*   时间回顾

*   主题3

*   主题3要求1
*   主题3要求2
*   主题3要求3
*   发送时间
*   时间回顾

继续主题 7。

我觉得有一种更有效的方法可以做到这一点，但就是想不出更好的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:57:25.777

如果老师的科目之间没有关系，你可以设计3个表格，如下所示

```
Teachers    TeacherSubjects SubjectRequirements
----------  --------------- --------------------
ID          SubjectID ----> SubjectID
TID --\     SubjectName     SubjectRequirement
Year   \--> TID             Language
            TimeSent        Type
            TimeReviewed    Time 
```

在这样的设计中

*   每位教师可以有多个科目（不限于7个科目）
*   每个老师的科目有多个要求（不限于5个要求）

**样本数据**

```
INSERT INTO Teachers(ID, TID, Year) VALUES (1,'LiuYan', 2012);
INSERT INTO Teachers(ID, TID, Year) VALUES (2,'Emily',  2012);

INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_1', 'SubjectName1', 'LiuYan');
INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_2', 'SubjectName2', 'LiuYan');
-- ...
INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_N', 'SubjectNameN', 'LiuYan');

INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_N+1', 'SubjectName N+1', 'Emily');
INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_N+2', 'SubjectName N+2', 'Emily');
-- ...
INSERT INTO TeacherSubjects (SubjectID, SubjectName, TID) VALUES ('SubjectID_M', 'SubjectName M', 'Emily');

INSERT INTO SubjectRequirements (SubjectID, SubjectRequirement, Language, Type, Time) VALUES ('SubjectID_1', 'Curriculum', 'Language 1', 'Printed', 'Semester 1');
INSERT INTO SubjectRequirements (SubjectID, SubjectRequirement, Language, Type, Time) VALUES ('SubjectID_1', 'Course Syllabus', 'Language 2', 'File', 'Semester 2');
INSERT INTO SubjectRequirements (SubjectID, SubjectRequirement, Language, Type, Time) VALUES ('SubjectID_1', 'Learning Management', 'Both Language', 'Both Type', 'Both Semester');
--...

INSERT INTO SubjectRequirements (SubjectID, SubjectRequirement, Language, Type, Time) VALUES ('SubjectID_N+1', 'Curriculum', 'Language 2', 'Both Type', 'Semester 2');
--... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:07:38.693

数据库的一个关键方面是在表之间[建立关系](http://en.wikipedia.org/wiki/Relation_%28database%29)（链接）——所以如果一个表（行）需要引用其他不同的东西，那么使用另一个表并与[外键](http://en.wikipedia.org/wiki/Foreign_key)链接在一起——在我们的例子中是这个表TeacherSubject 是一个[联结表](http://en.wikipedia.org/wiki/Junction_table)

为了让您简要了解我将如何实现您的要求，我认为我们需要三个表，下面的 SubjectsTeacher 是连接这两个表的链接表。

您定义每个科目和教师，然后将条目添加到 TeacherSubject 表以将教师与科目相关联。

![在此处输入图像描述](../Images/fa33a229136b6305ee37111bc9b5eee6.png)

创建数据库：

```
CREATE TABLE `Subject` (
`SID` INTEGER NOT NULL AUTO_INCREMENT ,
`Name` VARCHAR(100) NOT NULL ,
`Curriculum` INTEGER NOT NULL ,
`Syllabus` INTEGER NOT NULL ,
`LearnManagement` INTEGER NOT NULL ,
`Individual Analysis` INTEGER NOT NULL ,
PRIMARY KEY (`SID`)
);

CREATE TABLE `Teachers` (
`TID` INTEGER NOT NULL AUTO_INCREMENT ,
`Name` VARCHAR(100) NOT NULL ,
PRIMARY KEY (`TID`)
);

CREATE TABLE `TeacherSubject` (
`id` INTEGER NOT NULL AUTO_INCREMENT ,
`SID_Subject` INTEGER NOT NULL ,
`TID_Teachers` INTEGER NOT NULL ,
PRIMARY KEY (`id`)
); 
```

然后添加外键，告诉数据库您的字段是如何链接的 - 这一步很重要，因为它将确保您保持数据完整性并且不能将错误数据插入到该数据中。

```
ALTER TABLE `TeacherSubject` ADD FOREIGN KEY (SID_Subject) REFERENCES `Subject` (`SID`);
ALTER TABLE `TeacherSubject` ADD FOREIGN KEY (TID_Teachers) REFERENCES `Teachers` (`TID`); 
```

然后设置几行进行测试。

```
 INSERT INTO `Subject` (`SID`, `Name`, `Curriculum`, `Syllabus`, `LearnManagement`, `Individual Analysis`) VALUES
    (1, 'Subject1', 1, 2, 3, 4),
    (2, 'Subject1', 1, 2, 3, 4),
    (3, 'Subject2', 1, 2, 3, 4),
    (4, 'Subject3', 1, 2, 3, 4),
    (5, 'Subject4', 1, 2, 3, 4);
INSERT INTO `Teachers` (`Name`) VALUES ('Teacher 1');
INSERT INTO `Teachers` (`Name`) VALUES ('Teacher 2');

INSERT INTO `TeacherSubject` (`id`, `SID_Subject`, `TID_Teachers`) VALUES
    (1, 1, 1),
    (2, 2, 1),
    (3, 3, 2),
    (4, 4, 2),
    (5, 1, 2); 
```

最后找出哪个学科老师#1有：

```
 select * from TeacherSubject
INNER JOIN Teachers on TID=TID_Teachers
WHERE TID_Teachers=1 
```

# php - 如何在 PHP 中对此类属性求和，以便获得所有类实例的总值？

> ID：11289846
> 
> 赞同：0
> 
> 时间：2012-07-02T08:06:32.083
> 
> 标签：php, arrays, oop, object, yii

我正在使用 PHP MVC 框架 Yii。我有一个名为**Category的模型，它与****Product**模型有`HAS_MANY`关系。两个模型类都扩展[了 CActiveRecord](http://www.yiiframework.com/doc/api/CActiveRecord)。

 **我正在寻求帮助以了解 OOP 在 PHP 中的一些特定工作方式。

在我的类别模型视图中，我试图找到该类别的总库存计数。例如，我可以这样做：

```
<?php
$total_inventory = 0;
foreach($category->products as $product)
  $total_inventory = $total_inventory + $product->inventory;
echo $total_inventory;
?> 
```

为什么我不能这样做？

```
<?php echo array_sum($category->products->inventory); ?> 
```

这会导致错误：`PHP Notice: Trying to get property of non-object`.

然后我想也许以下方法会起作用：

```
<?php echo array_sum($category->products->getAttribute('inventory')); ?> 
```

但是，这会导致：`Fatal error: Call to a member function getAttribute() on a non-object`。

是否可以`array_sum()`通过稍微改变一些东西来以我尝试的方式使用，还是因为`$category->products`实际上是一个对象而不是数组而无法使用？那正确吗？

我很高兴收到有助于解释我所缺少的内容的文章或文档。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:40:02.093

实际上`$category->products`是一个对象数组。这就是为什么你不能`array_sum`在对象属性上使用。您可以通过在模型中添加[STAT](http://www.yiiframework.com/doc/api/1.1/CStatRelation)关系来轻松获得总和`Category`

```
'total_inventory'=>array(self::STAT, 'Product', 'cat_id','select'=>'SUM(inventory)') 
```

你可以`total_inventory`打电话到任何地方`$category->total_inventory`**

# c++ - gss_init_sec_context 返回未找到凭据缓存（Windows、C++）

> ID：11289848
> 
> 赞同：1
> 
> 时间：2012-07-02T08:06:46.483
> 
> 标签：c++, windows, gssapi, negotiate

我尝试在我的应用程序中使用 gssapi32.dll 但在应用程序启动时收到异常

像“HTTP/proxy.domain.com@domain.com”这样的名称我在 Kerberos Ticket Tools 中看到了这个名称

但我收到“未找到凭据缓存”

也许有人已经有类似的问题？并且可以提供帮助

Windows 7 (x64) MSVS C++ 2010 速成版

谢谢你的建议，对不起我的英语

```
char* cHttp::getNegotiateToken(const char *service, const char *server) {
    char *token = 0;
    OM_uint32 major, minor;
    gss_buffer_desc gss_buffer;
    gss_buffer_desc gss_buffer_user;
    gss_name_t gss_name;
    gss_name_t gss_user_name;
    gss_ctx_id_t gss_context = GSS_C_NO_CONTEXT;
    gss_buffer_desc gss_input_token = GSS_C_EMPTY_BUFFER;
    gss_buffer_desc gss_output_token = GSS_C_EMPTY_BUFFER;

    OM_uint32 req_flags = GSS_C_MUTUAL_FLAG | GSS_C_REPLAY_FLAG;

    static gss_OID_desc gss_krb5_mech_oid_desc =
        { 9, (void *) "\x2a\x86\x48\x86\xf7\x12\x01\x02\x02" };

    if(!service || !server) {
        Logger.writeLogHead(llError) << "Service and server values cannot be NULL!" << EndOfLine;
        return 0;
    }

    gss_buffer.length = 28;//strln(service) + strln(server) + 2;
    gss_buffer.value = malloc(gss_buffer.length);

    gss_buffer_user.length = 26;
    gss_buffer_user.value = malloc(gss_buffer_user.length);

    Logger.writeLogHead(llError) << "service \"" << service << "\" server \"" << server << "\" length " <<  (int)gss_buffer.length << EndOfLine;

    if(!gss_buffer.value) {
        Logger.writeLogHead(llError) << "malloc failed" << EndOfLine;
        return 0;
    }

    sprintf((char *)gss_buffer.value, "%s", "HTTP/proxy.domain.com@domain.com");

    major = gss_import_name(&minor, &gss_buffer, GSS_C_NT_HOSTBASED_SERVICE, &gss_name);
    free(gss_buffer.value);

    if (major != GSS_S_COMPLETE) {
        logGssError(major, minor, "gss_import_name");
        return 0;
    }

    gss_buffer_desc out_name;

    major = gss_display_name(&minor, gss_name, &out_name, NULL);
    if (major != GSS_S_COMPLETE) {
        logGssError(major, minor, "gss_display_name");
        return 0;
    }

    Logger.writeLogHead(llWarning) << "Service name : " << (const char*)out_name.value << EndOfLine;

    major = gss_init_sec_context(
        &minor,
        GSS_C_NO_CREDENTIAL, 
        &gss_context,
        gss_name, 
        &gss_krb5_mech_oid_desc,
        req_flags,
        GSS_C_INDEFINITE,
        GSS_C_NO_CHANNEL_BINDINGS,
        &gss_input_token,
        NULL,
        &gss_output_token,
        NULL,
        NULL);

    if (major == GSS_S_NO_CRED) {
        Logger.writeLogHead(llError) << "gss_init_sec_context GSS_S_NO_CRED" << EndOfLine;
    }

    if (major != GSS_S_COMPLETE) {
        logGssError(major, minor, "gss_init_sec_context");
        return 0;
    }

    if (gss_output_token.length == 0) {
        Logger.writeLogHead(llError) << "Token don't need to be send." << EndOfLine;
        return 0;
    } 

    // TODO: Need to make SPNEGO token (spnegohelp)
    token = base64_encode((const char *)gss_output_token.value, gss_output_token.length);

    major = gss_delete_sec_context(&minor, &gss_context, GSS_C_NO_BUFFER);
    if (major != GSS_S_COMPLETE) {
        logGssError(major, minor, "gss_delete_sec_context");
        return 0;
    }

    major = gss_release_name(&minor,&gss_name);
    if (major != GSS_S_COMPLETE) {
        logGssError(major, minor, "gss_release_name");
        return 0;
    }

    return token;
} 
```

-- 编辑谢谢你的朋友 - 我想我会继续建议的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:31:57.033

在我的情况下需要使用 spnego 机制而不是`gss_krb5_mech_oid_desc`

```
static gss_OID_desc gss_spnego_mech_oid_desc =
        { 6, (void *) "\x2b\x06\x01\x05\x05\x02" };
        //{ 9, (void*) "\x06\x06\x2b\x06\x01\x05\x05\x02\xa0" };

gss_OID mMechOID;

mMechOID = &gss_krb5_mech_oid_desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:02:41.550

你真的需要 Windows 下的 GSS-API 吗？您应该使用 SSPI。GSS-API 不能直接访问内存中的票证缓存。[在这里](https://stackoverflow.com/a/8842733/696632)检查我的答案。

# html - HTML：防止选取框区域为空？

> ID：11289851
> 
> 赞同：0
> 
> 时间：2012-07-02T08:07:05.237
> 
> 标签：html, marquee

有一个选框升起。当文本完成滚动时（在它再次出现之前），选取框区域会变空约 2 秒，然后再次出现。

有什么办法可以防止它为空，并使第一行在最后一行上升之前出现？

[http://jsfiddle.net/WARVQ/2/](http://jsfiddle.net/WArVQ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:40:37.910

你可以使用 JavaScript 来做到这一点：

```
<!DOCTYPE html>
<html>
<head>
    <title>Scroll demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <div id="container" style="position: absolute; width: 200px; height: 200px; background-color: grey">
    </div>
    <script type="text/javascript">
        var maxy = 200; // adjust
        var lineHeight = 17; // adjust
        var lines = new Array("line1", "line2", "line3");
        var textDivs = new Array(lines.length);
        for(var i=0;i<lines.length;i++) {
            var divx = document.createElement("div");
            var divxText = document.createTextNode(lines[i]);
            divx.style.top=String(maxy-(lines.length-i)*lineHeight)+"px";
            divx.style.position="absolute";
            divx.appendChild(divxText);
            textDivs[i] = divx;
            document.getElementById("container").appendChild(divx);
        }

        window.setInterval("scroll()", 50);
        function scroll() {
            for(var i=0;i<textDivs.length;i++) {
                var divx = textDivs[i];
                var y = parseInt(divx.style.top);
                y = y-1;
                if(y<0) y = maxy-lineHeight;
                divx.style.top =String(y)+"px";
            }
        }
    </script>
</body>
</html> 
```

# uiview - UIView + Cocos2D 元素

> ID：11289853
> 
> 赞同：0
> 
> 时间：2012-07-02T08:07:14.613
> 
> 标签：uiview, cocos2d-iphone, uikit

我想在我的 UIView 上添加一个 CCSprite，可以这样做吗？我发现的是在 Cocos2D 上添加 UIKit 的方法，但我想要它的相反。我想在 UIKit 上添加 Cocos2D。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:55:34.273

您可以通过在 uiviewcontroller 类中设置以下方法来做到这一点

```
- (void)setupCocos2D {
CCGLView *glView = [CCGLView viewWithFrame:CGRectMake(100, 100, 200, 200)
                               pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                               depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                    ];
glView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view insertSubview:glView atIndex:0];

[[CCDirector sharedDirector] setView:glView];
CCScene *scene = [StarVideoView scene];
[[CCDirector sharedDirector] runWithScene:scene]; 
```

}

并在您的 viewDidLoad 方法中将此方法称为 [self setupCocos2D];

这里 startVideoView 是我的 ccscene 类，当然你必须在你的 uiviewcontroller 类中添加 cocos2d.h 库:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:16:18.173

Cocos2D 在一个类内部进行绘图，`EAGLView`该类只是`CAEAGLLayer`. 因此，您可以尝试创建一个具有关联的 director `EAGLView`，然后执行此操作以将 cocos2d open gl 图层添加到您的视图中：

```
[myView.layer addSublayer:[[CCDirector sharedDirector] openGLView].layer]; 
```

# c++ - _beginthreadex 的参数类型错误

> ID：11289855
> 
> 赞同：1
> 
> 时间：2012-07-02T08:07:28.137
> 
> 标签：c++, multithreading, arguments, beginthreadex

要定义我的头文件中的线程：

```
class HttpClient
{
public:
    ...
    unsigned int __stdcall  PerformLogin(void*);
    ...

}; 
```

然后在我的 cpp 文件中，我有：

```
unsigned int __stdcall PerformLogin(void*){
...
} 
```

并调用这个线程我使用

```
hThread = (HANDLE)_beginthreadex( NULL, 0, &PerformLogin, NULL, 0, &threadID ); 
```

但我有一个错误的`&PerformLogin`说法是：

> unsigned int (__stdcall HttpClient:: *)(void* ) 类型的参数与参数 unsigned int (__stdcall*)(void*) 不兼容。

我理解这个错误，但我真的不知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:09:51.183

解决此问题的一种可能方法是创建成员函数`static`，尽管这意味着`PerformLogin()`没有`this`指针并且无法访问 的非静态成员`HttpClient`。

另一种是完全搬出`PerformLogin()`，`HttpClient`并使其成为免费功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:40:03.743

我通常要做的是将“this”作为 void* 参数添加到静态函数 - 然后您可以在静态函数中调用它的方法，并进行一些转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:22:24.143

成员函数`this`隐式获取指针作为第一个参数。所以如果你想用一个类成员函数启动一个线程，你应该在调用中显式传递一个指向类实例的指针`_beginthreadex`。

因此，删除显式参数：

```
class HttpClient
{
    public:
    ...
    unsigned int __stdcall  PerformLogin();
    ...
}; 
```

并在作为参数`_beginthreadex`传递时调用：`this`

```
hThread = (HANDLE)_beginthreadex( NULL, 0, &PerformLogin, this, 0, &threadID ); 
```

值得一提的是，这有点 hacky。C++ FAQ[建议不要这样做](http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.2)。我还是更喜欢这种方法。当然我只是`boost::thread`平时用。

# c# - 数据绑定到列表并随机选择元素

> ID：11289858
> 
> 赞同：0
> 
> 时间：2012-07-02T08:07:46.290
> 
> 标签：c#, wpf

我有一个列表，其中每个项目都有以下数据模板：

```
<stack Panel>
    <TextBlock Text={Binding SomeText} />
    <stackPanel Tag={Binding SecondText}>
        <TextBlock = {Binding RandomText} />
    </StackPanel>
</StackPanel> 
```

SomeTextClass 在哪里

```
public SomeTextClass
{
    public string SomeText{get; set;}
    public string SecondText{get; set;}
    public string ThirdText{get; set;}
} 
```

我也在解析一个 xml 文件来获取`List<SomeTextClass>`然后将 ListBox 源绑定到`List<SomeTextClass>`

假设`List<SomeTextClass>`具有以下格式：
**Item1 对象**：`SomeText1, SecondText1, ThirdText1`
**Item2 对象**：`SomeText2, SecondText2, ThirdText2`
**Item3 对象**：`SomeText3, SecondText3, ThirdText3`

对于第一个 TextBlock 和第二个 StackPanel 标记，我想分配`SomeText`，`SecondText`这很好并且工作得很好。但是对于内部TextBlock，我想以`ThirdText`随机方式而不是按列表中出现的顺序分配？

当我将列表框绑定到 List 时，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:46:23.287

两种方式之一：

1.  将随机值直接分配给 ThirdText 属性（或为随机值引入第四个属性）。这将使您的绑定保持简单。

2.  将内部 TextBlock 文本绑定到整个列表，并创建一个 IValueConverter 以从列表中返回一个随机值。

# java - Jboss 7中的部署时间错误（java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider）

> ID：11289860
> 
> 赞同：4
> 
> 时间：2012-07-02T08:07:47.267
> 
> 标签：java, jakarta-ee, spring-mvc, jboss, jboss7.x

我们的项目在 Jetty 服务器上并且可以完全运行，然后这个项目部署在 Jboss 7 服务器上，但是有一些错误。

我在 E:\jboss-as-7.1.1.Final\standalone\deployments 文件夹中制作了战争文件并复制并粘贴过去，然后自动部署开始并给出此错误：

```
nested exception is java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider 
```

**我尝试在编辑 jboss_home/modules/sun/jdk/main/module.xml 中添加路径并添加路径 com/sun/net/ssl/internal ，但错误未删除**

那么如何消除这个错误呢？

详细错误：

```
13:33:03,769 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-1) Context initialization failed: org.springframework.beans.factor
y.BeanCreationException: Error creating bean with name 'log4jInitialization' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocati
on of init method failed; nested exception is java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [org.spri
ngframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.spring
framework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [org.springframework.beans-3.1.0.M1.jar:
3.1.0.M1]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [org.springframework.
beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [org.springframework.beans-3.1.0.M1.jar:3.
1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [org.springframework.beans-3.1.0.M1.jar:3.1.
0.M1]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563) [org.springfr
amework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:900) [org.springf
ramework.context-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:455) [org.springframework.context-3.1.0.M
1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:294) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1
]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:215) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [org.springframework.web-3.1.0.M1.jar:3.
1.0.M1]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_01]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_01]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_01]
Caused by: java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider
        at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_01]
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404) [rt.jar:1.7.0_01]
        at java.lang.Class.getConstructor0(Class.java:2714) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance0(Class.java:343) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance(Class.java:325) [rt.jar:1.7.0_01]
        at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:336) [log4j-1.2.16.jar:]
        at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:123) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:752) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:615) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:502) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:415) [log4j-1.2.16.jar:]
        at org.springframework.util.Log4jConfigurer.initLogging(Log4jConfigurer.java:72) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_01]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_01]
        at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_01]
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.doInvoke(MethodInvokingFactoryBean.java:162) [org.springframework.beans-3.1.0
.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.afterPropertiesSet(MethodInvokingFactoryBean.java:152) [org.springframework.b
eans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479) [or
g.springframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        ... 20 more
Caused by: java.lang.ClassNotFoundException: com.sun.net.ssl.internal.ssl.Provider from [Module "deployment.mwp.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 43 more

13:33:03,856 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/mwp]] (MSC service thread 1-1) Exception sending context initialize
d event to listener instance of class org.springframework.web.context.ContextLoaderListener: org.springframework.beans.factory.BeanCreationException: Error
 creating bean with name 'log4jInitialization' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nest
ed exception is java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [org.spri
ngframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.spring
framework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [org.springframework.beans-3.1.0.M1.jar:
3.1.0.M1]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [org.springframework.
beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [org.springframework.beans-3.1.0.M1.jar:3.
1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [org.springframework.beans-3.1.0.M1.jar:3.1.
0.M1]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563) [org.springfr
amework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:900) [org.springf
ramework.context-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:455) [org.springframework.context-3.1.0.M
1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:294) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1
]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:215) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [org.springframework.web-3.1.0.M1.jar:3.
1.0.M1]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_01]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_01]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_01]
Caused by: java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider
        at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_01]
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404) [rt.jar:1.7.0_01]
        at java.lang.Class.getConstructor0(Class.java:2714) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance0(Class.java:343) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance(Class.java:325) [rt.jar:1.7.0_01]
        at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:336) [log4j-1.2.16.jar:]
        at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:123) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:752) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:615) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:502) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:415) [log4j-1.2.16.jar:]
        at org.springframework.util.Log4jConfigurer.initLogging(Log4jConfigurer.java:72) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_01]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_01]
        at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_01]
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.doInvoke(MethodInvokingFactoryBean.java:162) [org.springframework.beans-3.1.0
.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.afterPropertiesSet(MethodInvokingFactoryBean.java:152) [org.springframework.b
eans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479) [or
g.springframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        ... 20 more
Caused by: java.lang.ClassNotFoundException: com.sun.net.ssl.internal.ssl.Provider from [Module "deployment.mwp.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 43 more

13:33:04,076 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Error listenerStart
13:33:04,078 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Context [/mwp] startup failed due to previous errors
13:33:04,094 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/mwp]] (MSC service thread 1-1) Closing Spring root WebApplicationCo
ntext
13:33:04,107 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.web.deployment.default-host./mwp: org.jbos
s.msc.service.StartException in service jboss.web.deployment.default-host./mwp: JBAS018040: Failed to start context
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_01]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_01] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:18:36.903

Jboss 7 在模块文件夹中查找依赖项。如果新模块实际上不存在，您不能只进入 modules.xml 文件并添加新模块。

您需要做的是找出是否存在包含缺少的类的jar，如果存在则需要从项目中添加对该模块的引用，如果不存在，则需要手动下载并将其复制到模块目录，然后引用它。

您可以通过多种方式引用它：

1.  在清单文件中添加一个类路径条目：`Classpath: com.sun.net`
2.  通过添加[Global module](https://community.jboss.org/message/731450)在您的standalone.xml 中添加对该模块的全局引用。

更多详情，请看[这里](https://docs.jboss.org/author/display/MODULES/Home)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:40:16.017

我刚刚在 jboss 7.1.1Final 中遇到了这个问题。我从 jdk 7 中的 rt.jar 的 com.sun.net.ssl 包中为 X509TrustManager.java 获取它。

我通过添加解决了它

```
<module xmlns="urn:jboss:module:1.1" name="sun.jdk">
<resources>
    <!-- currently jboss modules has not way of importing services from
    classes.jar so we duplicate them here -->
    <resource-root path="service-loader-resources"/>
</resources>
<dependencies>
    <system export="true">
        <paths>
            ...
      <path name="com/sun/net/ssl"/>
           ...
        </paths>
        <exports>
            <include-set>
                <path name="META-INF/services"/>
            </include-set>
        </exports>
    </system>
</dependencies> 
```

在 jboss 7 的 modules/sun 下的 module.xml 中。

希望这会帮助任何人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:20:04.750

我看到的问题是`java.lang.NoClassDefFoundError: com/sun/net/ssl/internal/ssl/Provider` 您需要在 Web 应用程序的清单文件中添加依赖项，我的建议是，首先阅读手册中的该部分

```
To import it using jboss-deployment-structure.xml: 
```

```
<dependencies>

  <module name="system" >

     <imports>

        <include-set>

           <path name="com/sun/ssl/internal/ssl"/>

         </include-set>

      </imports>

    </module>

</dependencies> 
```

请参考以下链接。

[https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T12:28:27.740

**1.打开sun.jdk**模块的模块定义。对于最新的 EAP，路径为：JBOSS_HOME\modules\system\layers\base\sun\jdk\main\module.xml

将以下内容添加到路径部分：

```
<path name="com/sun/ssl/internal/ssl"/>
<path name="com/sun/net/ssl"/> 
```

2.将以下内容添加到您的 WEB-INF 文件夹中的 jboss-deployment-structure.xml

```
<dependencies>
    <module name="sun.jdk"/>
</dependencies> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:21:41.393

自 1.4 以来，所有 Oracle/Sun JDK 都提供了该类，即 8-9 年。

任何一个：

1.  您使用的是非 Sun/Oracle JDK
2.  您在代码或配置文件中使用类名 com.sun.net.ssl.internal.ssl.Provider，或者
3.  您的 Java 安装存在严重问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-26T05:29:12.330

将以下代码添加到文件 => WEB_INF/jboss-deployment-structure.xml

```
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="org.jboss.logmanager" />
            <system export="true">
                <paths>
                    <path name="com/sun/net/ssl/internal/ssl"/>
                   </paths>
            </system>
        </dependencies>
     </deployment>
</jboss-deployment-structure> 
```

# android - 如何在 Android 中自定义 Spinner

> ID：11289861
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:07:47.717
> 
> 标签：android, helper

我在我的项目中使用了微调器，但它看起来像

![在此处输入图像描述](../Images/7cd351f00c648e6a7e02033bce8b0e3f.png)

但我希望微调器作为实际的下拉列表。请帮助我。

像这样

![在此处输入图像描述](../Images/5fa1d0f49c6731f487697f276f135b16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:09:53.103

```
city_array = new String[]{city1, city2, city3,....};

ArrayAdapter<String> cityArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,city_array);

cityArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

city_spinner = (Spinner) findViewById(yourSpinner);
city_spinner.setAdapter(cityArrayAdapter); 
```

# asp.net - ASP.Net 中的电子邮件附件问题

> ID：11289862
> 
> 赞同：0
> 
> 时间：2012-07-02T08:07:53.307
> 
> 标签：asp.net, email, attachment

您好我正在尝试通过 ASP.NET 将图片附件发送到某些电子邮件。该程序运行没有任何问题，但我无法在某些电子邮件程序中可视化附件图片，例如 iPhone 的 Yahoo 电子邮件电子邮件程序。我怀疑我没有正确附加图片。它在我的台式电脑上工作正常

加载电子邮件时，我看不到图片。

```
 Dim mail As New MailMessage()
    mail.From = New MailAddress("xxxxxxxx", "xxxxxxx")
    mail.To.Add(DirectCast(RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Email"), TextBox).Text)
    mail.Subject = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    mail.Body = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

    Dim htmlBody As String = "<html><body><DIV style=""background-color:#5B37AE"">"
    htmlBody += "<img height=""70px"" width=""150px"" src=cid:HDIImage /></DIV></body></html>"

    Dim htmlView As System.Net.Mail.AlternateView = System.Net.Mail.AlternateView.CreateAlternateViewFromString(htmlBody, Nothing, "text/html")
    Dim imageResource As New System.Net.Mail.LinkedResource(Server.MapPath("~/Images/Site/background_main2.png"))
    imageResource.ContentId = "HDIImage"
    htmlView.LinkedResources.Add(imageResource)

    mail.AlternateViews.Add(htmlView)

    Dim j As New SmtpClient
    j.Host = "hostingxxxxx"
    j.EnableSsl = False
    j.Credentials = New System.Net.NetworkCredential("usernam", "passw")

    j.Send(mail) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:10:01.270

没有必要通过linkedresoruce附加，`src="http://wwww.mysite.com/myimage.jpg"`在每个（现代）浏览器中添加都可以

# hibernate - 可嵌入自定义 UserType 在实体中使用了两次

> ID：11289865
> 
> 赞同：2
> 
> 时间：2012-07-02T08:08:06.630
> 
> 标签：hibernate, annotations, embeddable

我`@Embeddable` `REmbeddedReference`在我的实体中使用了两次`RTask`。此嵌入包含 QName 属性，其类型定义为`org.hibernate.usertype.UserType`.

```
@Embeddable
public class REmbeddedReference implements Serializable {

    private String targetOid;
    private String description;
    private String filter;
    private RContainerType type;
    private QName relation;

    @Columns(columns = {
            @Column(name = "relation_namespace"),
            @Column(name = "relation_localPart")
    })
    public QName getRelation() {        return relation;    }

    @Column(length = 36, insertable = true, updatable = true, nullable = true)
    public String getTargetOid() {        return targetOid;    }

    @Type(type = "org.hibernate.type.TextType")
    public String getDescription() {        return description;    }

    @Enumerated(EnumType.ORDINAL)
    public RContainerType getType() {        return type;    }

    @Type(type = "org.hibernate.type.TextType")
    public String getFilter() {        return filter;    }

    ...setters...
} 
```

`RTask`看起来像这样：

```
@Entity
@ForeignKey(name = "fk_task")
public class RTask extends RObject {
    private REmbeddedReference objectRef;
    private REmbeddedReference ownerRef;
    ...other fields...

    @Embedded
    public REmbeddedReference getObjectRef() {
        return objectRef;
    }

    @Embedded
    public REmbeddedReference getOwnerRef() {
        return ownerRef;
    }

    ...other methods...
} 
```

在启动期间，我得到： `Caused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.evolveum.midpoint.repo.sql.data.common.RTask column: relation_namespace (should be mapped with insert="false" update="false")`

我试图更新我的 NamingStrategy，生成 objectRef_relation_namespace 和 ownerRef_relation_namespace 的方法logicalColumnName。但后来我得到： `Caused by: org.hibernate.DuplicateMappingException: Table [m_task] contains phyical column name [relation_namespace] represented by different logical column names: [objectRef_relation_namespace], [ownerRef_relation_namespace]`

您知道如何正确映射属性`relation`吗`REmbeddedReference`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:29:11.610

解决方案：

```
@AttributeOverride(name="relation.namespace", column=@Column(name="object_namespace")
@AttributeOverride(name="relation.localPart", column=@Column(name="object_localpart")
@Embedded
public REmbeddedReference getObjectRef() {
    return objectRef;
}

@AttributeOverride(name="relation.namespace", column=@Column(name="owner_namespace")
@AttributeOverride(name="relation.localPart", column=@Column(name="owner_localpart")
@Embedded
public REmbeddedReference getOwnerRef() {
    return ownerRef;
} 
```

没用。我不得不将`QName`类型实现从`CompositeUserType`另一个可嵌入实体更改为可嵌入`RQName`的表示该属性的另一个可嵌入实体`REmbeddedReference`。

# android - Android Video view ceating black window while make it away

> ID：11289871
> 
> 赞同：0
> 
> 时间：2012-07-02T08:08:36.317
> 
> 标签：android, android-layout, android-videoview

我的应用程序有几页书。在某些页面中，我正在使用视频视图播放视频。我正在检查我是否有该页面的视频。如果是，那么我正在使 videoview 可见并通过 Uri。如果没有，我就让它消失了。

现在的问题是，一旦我到达那个屏幕，然后如果我向左/向右滑动，它就会在每个后续屏幕中创建黑色窗口。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:07:46.030

我找到了解决方案。当您想显示视频时，请制作 videoView.setZOrderOnTop(false); 当你想隐藏视频视图时 jusr make videoView.setZOrderOnTop(true);

# android - 如何删除对话框中的行？

> ID：11289877
> 
> 赞同：1
> 
> 时间：2012-07-02T08:08:46.517
> 
> 标签：android, android-dialog, dialog

您好我正在创建一个自定义对话框。它使用列表视图显示一些文件列表。在我的对话框中不适合该行。例如，我在对话框中提到了红色。如何删除这条线或适合这条线。

![在此处输入图像描述](../Images/a1208ef755f6dd1486c83d895c3942e5.png)

谢谢。我的另一个截图是 ![在此处输入图像描述](../Images/f710c5c8c9e5aaa31b19dc7ddebd0646.png)

如何在（红色标记）中删除空间以及如何在（绿色标记，因为它看起来不太好）中添加空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:13:19.840

`android:divider="@android:color/transparent"`在您的`xml ListView`声明中使用。

# android - Fragment onCreateView时无法获取TextView的高度

> ID：11289878
> 
> 赞同：2
> 
> 时间：2012-07-02T08:08:58.567
> 
> 标签：android, fragment

我有一个片段，其中包含作为 mTextView 的 TextView 调用。我想在 Fragment 的 onCreateView 中附加内容后获取 mTextView 的高度，如下所示：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final View view = inflater.inflate(
                R.layout.myfragment, container, false);

        mTextView = (TextView) view.findViewById(R.id.myTextView);
               int mHeight=mTextView.getHeight();

 } 
```

但它总是返回 0 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:18:48.823

如果您尝试在 onCreate 之后获取高度，您将无法获取，因为窗口仍然没有聚焦。试试这样：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // your code here
    int mHeight=mTextView.getHeight();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:12:34.597

你尝试得到它之后

```
setContentView(R.layout.your_layout); 
```

正确的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:44:15.610

视图的尺寸为 0 的原因是因为当您查询它们时，视图还没有执行布局和测量步骤。您只是告诉视图它在布局中的“行为”，但它仍然没有计算每个视图的放置位置。

不过，有一些技巧可以得到这个尺寸。尽管我不太喜欢接受的答案的方法，但您可以将此问题作为起点。

[如何获取 android.widget.ImageView 的宽度和高度？](https://stackoverflow.com/questions/4680499/android-get-height-width-of-imageview/)

# jsf-2 - Java EE 中的动态安全授权

> ID：11289879
> 
> 赞同：2
> 
> 时间：2012-07-02T08:08:59.627
> 
> 标签：jsf-2, spring-security

我想为我的应用程序中可以在 onrRuntime 上修改的每个按钮和功能实现基于角色的访问控制。我在 Glassfish 上实现 JSF 2.0 和 EJB，目前使用 JSecurity 和 JDBCRealm 来限制对页面的访问。但问题是我的客户已请求对角色和访问控制进行运行时修改，如果不修改 web.xml 文件并重新部署应用程序，就无法使用我当前的技术执行此操作。我阅读了许多有关 Spring 安全性的帖子。我想检查一下spring security是否可以做到这一点，以及这种动态控制访问控制（可以在运行时编辑）到页面+（按钮和字段级别访问）的机制在spring中是否可用。

我正在使用 JSF 2.0、glassfish 3.1、EJB 3.0 和 J_Security_check 进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:11:43.387

是的，使用 Spring Security 是可能的。[Spring Security 允许通过MutableAcl](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/acls/model/MutableAcl.html#insertAce%28int,%20org.springframework.security.acls.model.Permission,%20org.springframework.security.acls.model.Sid,%20boolean%29)接口对访问控制列表（ACL）字段进行运行时操作。它允许创建、更新和删除访问控制条目 (ACE)，还提供[JdbcMutableAclService](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/acls/jdbc/JdbcMutableAclService.html)以将这些更改持久保存到 JDBC 数据存储区。

也可以看看：

*   [域-acls-入门](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#domain-acls-getting-started)

您可以在[此处查看可用的示例应用程序](https://github.com/SpringSource/spring-security/tree/master/acl)

[运行 Spring Security 示例应用程序的说明](http://rwinch.blogspot.com/2011/03/running-spring-securitys-tutorial.html)。

在尝试这些示例之前，您需要使用 acl 表准备好数据库。这是[Spring ACL 表的架构](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-schema.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:30:44.017

我认为最好的选择是划分角色。例如，具有“提交者”角色的用户可以单击“提交”按钮，而具有“过滤器”角色的用户可以单击“过滤”按钮等。

# javascript - 等待 AJAX，然后继续通过单独的功能

> ID：11289884
> 
> 赞同：11
> 
> 时间：2012-07-02T08:09:18.003
> 
> 标签：javascript, codeigniter, jquery

好吧...凌晨 2 点，这是我划定界限的地方。帮助... 在我的笔记本电脑最终走出窗外之前。:)

我尝试过使用 setTimer、回调和我能想到的所有其他东西（当然还有其他一些 Stackoverflow 提示）。我已经删除了所有内容，所以我只留下了基本代码。

我要做的是调用 parseRow() 并在它最后保存记录之前，我需要获取相关的类别（通过 AJAX）；但是，它会直接过去，因此类别始终是“未定义的”。

```
function parseRow(row){
    var rowArray     = row.trim().split(",");
    var date         = rowArray[0];
    var checknum     = rowArray[1];
    var payee        = rowArray[2];
    var memo         = rowArray[3];
    var amount       = rowArray[4];

    //ERROR: blows right past this one and sets the category variable BEFORE ajax returns
    var category = autoSelectCategory(payee);

    saveRecord(date, checkNum, payee, memo, category, payment, deposit);
}

function autoSelectCategory(payee) {
    var data;
    $.ajax({
        async: false,
        url: "autoselectcategory",
        dataType: "json",
        data: {
            string: payee
        },
        success: function (returnedData) {
            data = returnedData;
        }
    });
    return data;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T08:11:46.827

AJAX 代表*异步*。这意味着在您的原始代码中，`saveRecord`将在客户端接收来自服务器的响应**之前**执行（并且，根据`$.ajax`实现，它可能在客户端将请求发送到服务器之前）。

此外，您似乎误解了函数在 JS 中的工作方式。`var category = autoSelectCategory(payee);`将类别设置为返回值`autoSelectCategory`；但是`autoSelectCategory`您代码中的函数不返回任何内容。

另一方面，`data`匿名函数的返回值只能由`$.ajax`函数使用（并且`$.ajax`可能会忽略`success`参数返回值）。

这是应该工作的代码：

```
function parseRow(row){
    var rowArray     = row.trim().split(",");
    var date         = rowArray[0];
    var checknum     = rowArray[1];
    var payee        = rowArray[2];
    var memo         = rowArray[3];
    var amount       = rowArray[4];

    autoSelectCategory(payee, function (category) {    
        saveRecord(date, checkNum, payee, memo, category, payment, deposit);
    });
}

function autoSelectCategory(payee, callback) {
    $.ajax({
        async: false,
        url: "autoselectcategory",
        dataType: "json",
        data: {
            string: payee
        },
        success: callback
    });
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T08:14:22.253

不要使用`async: false`选项。这是一个纯粹的邪恶（阻止浏览器甚至其他选项卡中的**所有**脚本！）并且自 jQuery 1.8 以来已被弃用。你应该使用回调，因为它一直都是这样。

```
function parseRow(row) {
    /* the other code */
    autoSelectCategory(payee, function() {
        saveRecord(date, checkNum, payee, memo, category, payment, deposit);
    });
}

function autoSelectCategory(payee, callback) { // <---- note the additional arg
    $.ajax({
        url: "autoselectcategory",
        dataType: "json",
        data: {
            string: payee
        },
        success: function(res) {
            /* the other code */
            callback();
        }
    });
} 
```

# php - 我在哪里可以获得适用于 Windows 的 php 5.4.4 的 OAuth dll？

> ID：11289885
> 
> 赞同：3
> 
> 时间：2012-07-02T08:09:19.547
> 
> 标签：php, windows, oauth

谁能告诉我在哪里可以获得 php_oauth.dll for php 5.4.4 for windows？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:50:16.800

我只是在 WAMP 上进行设置时遇到了一些问题。

1.  在此处下载正确的扩展：http: [//windows.php.net/downloads/pecl/releases/oauth/](http://windows.php.net/downloads/pecl/releases/oauth/)

2.  你需要确保你有一个兼容的 php 版本来使用它。由于 WAMP 仅支持特定版本的 PHP，您可能需要手动安装 PHP。简短的文章在这里：[http ://www.websanova.com/tutorials/php/manually-adding-php-versions-to-wamp](http://www.websanova.com/tutorials/php/manually-adding-php-versions-to-wamp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:17:06.673

你会检查这篇文章，它讨论了如何在 Windows 上安装它。

[http://katieseaborn.com/masters/prototype/installing-oauth-on-windows/](http://katieseaborn.com/masters/prototype/installing-oauth-on-windows/)

以及这个旧的 Stack Overflow 帖子。 [如何在php中安装oauth](https://stackoverflow.com/questions/9819107/how-to-install-the-oauth-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T11:46:34.423

您可以从“ [http://windows.php.net/downloads/pecl/releases/oauth/1.2.3/](http://windows.php.net/downloads/pecl/releases/oauth/1.2.3/) ”下载。哪个适合你

# c++ - OpenCL：指令和地址之间的状态空间不匹配

> ID：11289893
> 
> 赞同：0
> 
> 时间：2012-07-02T08:10:02.070
> 
> 标签：c++, opencl, ptxas

我正在编写一个 OpenCL 程序，并在构建时收到此错误：

```
Build Log:
ptxas application ptx input, line 268; error   : State space mismatch between instruction and address in instruction 'ld'
ptxas application ptx input, line 269; error   : State space mismatch between instruction and address in instruction 'ld'
ptxas application ptx input, line 270; error   : State space mismatch between instruction and address in instruction 'ld'
ptxas application ptx input, line 271; error   : State space mismatch between instruction and address in instruction 'ld'
....(same error on several more lines) 
```

相应的 ptx 行（自动生成）是：

```
ld.local.u32    %r1913, [demands$inst_to_cust+16];
ld.local.u32    %rl10, [demands$inst_to_cust+12];
ld.local.u32    %rl12, [demands$inst_to_cust+8];
ld.local.u32    %rl14, [demands$inst_to_cust+4];
ld.local.u32    %rl16, [demands$inst_to_cust]; 
```

这是我编写的函数：

```
int
demands(cl_ushort ball, cl_ushort bin,
    __global const struct problem *problem,
    __constant const struct demand *demand,
    const cl_ushort soln[BALL_MAXNUM],
    struct demand_op ops[DEMAND_MAXOPS],
    __global cl_ushort debug_data[DEBUG_LEN])
{
int i, k = demand->data[0]; 
int serv_to_rack[] = {0, 1, 1}; 
int inst_to_cust[] = {0, 0, 0, 1, 1}; 
int maxinst_per_rack[] = {2, 1}; 

int cust_num = inst_to_cust[ball];
int max = ball, min = ball, count = 1;
int max_in_rack = maxinst_per_rack[cust_num];
for (i = ball; i < NUM_BALLS; i++) {
    if (inst_to_cust[i] == ball) max = i;
    else break;
}

.....
} 
```

错误的原因是什么？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:16:00.523

编译器对`demand`结构的位置感到困惑。“状态空间”是内存类型的 ptx-talk。`ld.local`期望源在本地内存中，但在您的情况下，它看起来实际上在常量内存中。

我不熟悉 OpenCL，但在 CUDA 中，`__constant__`限定符将变量放在具有特殊缓存语义的常量内存中。它与`const`C++ 无关。编译器可能会因为您将它们一起使用而感到困惑。

尝试从线路`__constant`中删除一个或两个。`const``__constant const struct demand *demand`

# c++ - 带 GDI 的黑色高亮条

> ID：11289896
> 
> 赞同：1
> 
> 时间：2012-07-02T08:10:10.543
> 
> 标签：c++, winapi, gdi

我为我的 GUI 获得了一些不错的拆分器代码，但我无法获得笔/画笔/我需要进行适当突出显示的任何东西。你知道在 Visual Studio 10 中如何拖动分割条，并且有一个漂亮的黑色透明条让你知道当你抬起鼠标按钮时分割会发生在哪里。这是一张图片：[http ://www.freeimgshost.com/fullsize/efmcxyyu1wbyb1r7mz0.png](http://www.freeimgshost.com/fullsize/efmcxyyu1wbyb1r7mz0.png)

如何仅使用 GDI 和 C++ 实现黑色高亮条？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:19:51.013

Visual Studio UI 是在 WPF 中实现的，所以我猜分隔栏只是一个半透明的填充矩形。

然而，GDI 对透明度的支持相当差。

您可以使用半透明、始终位于顶部的分层窗口获得相同的效果。这是一个简单的解决方案，因为您不必担心重新绘制任何东西。你只需移动窗口。

[This answer to another question](https://stackoverflow.com/a/8871206/292432)有一些代码可以创建这样一个窗口（用于不同目的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:39:30.250

这可能是`LockWindowUpdate()`.

在 Mousedown 上，锁定窗口，然后直接开始绘制拖动条。由于鼠标仍被捕获，拖动条仍会收到鼠标通知。在 mouseup 上，解锁窗口，调整大小并让绘图正常进行。

# wpf - 自动刷新 ItemTemplateSelector

> ID：11289898
> 
> 赞同：1
> 
> 时间：2012-07-02T08:10:18.947
> 
> 标签：wpf, itemscontrol, itemtemplateselector

我有`ItemsControl`多重`DataTemplate`和使用`ItemTemplateSelector`来选择合适`DataTemplate`的每个项目`ItemsSource`。我想绑定`ItemTemplateSelector`到项目的 TemplateType 依赖属性。并且每次 TemplateType 属性更改时，都会`DataTemplate`自动更改。我能怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:18:00.867

我搜索自己的问题。并找到以下代码进行刷新`ItemTemplateSelector`：

```
DataTemplateSelector DataTemplateSelector = plan.ItemTemplateSelector;
plan.ItemTemplateSelector = null;
plan.ItemTemplateSelector = DataTemplateSelector; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:14:32.850

如果您想更新数据模板，我会在您的情况下寻求不同的解决方案。我会为您的 ItemsControl 的 ItemTemplate 创建一个绑定。该绑定会分配一个转换器，其中包含当前 ItemTemplateSelector 的逻辑。绑定的来源是您的 TemplateType 属性。

ItemTemplateSelector 仅用于一次性评估。

# php - 从 Jira 中提取 svn 信息

> ID：11289899
> 
> 赞同：1
> 
> 时间：2012-07-02T08:10:20.517
> 
> 标签：php, api, svn, soap, jira

是否可以通过其 api（Soap、Rest）从 Jira 中提取 svn 信息（提交等）。我启用了 Jira Subversion 插件，它显示了有关提交的信息，但我不知道如何调用 api 方法提取这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:37:09.743

This is a very interesting question. I do not know for any API call and the [SubversionPlugin Documentation](https://studio.plugins.atlassian.com/wiki/display/SVN/Subversion+JIRA+plugin) doesn't suggest one. But you could always get direct access to a read-only copy of your JIRA instance's DB or query it using the API.

Your best options is to try posting a question on the [Atlassian answers site](https://answers.atlassian.com/) or better yet creating a [support request](https://support.atlassian.com).

The thing is that if there is no API currently, they could be developing one right now and Atlassian may connect you with the developers so that they can give you further information. They may even provide you with some early-access solution. I know this because we've used this option at the company I currently work at, but with the Tempo plugin. Hope this helped.

# python - 如何使用 Python 在文件中搜索 IP？

> ID：11289901
> 
> 赞同：0
> 
> 时间：2012-07-02T08:10:24.147
> 
> 标签：python, file, search, ip, replace

我正在用 Python 编写脚本，我需要在文件中搜索和替换 IP....

任何想法如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:20:15.527

对于 IPv4 地址，您可以使用[Regular-Expression.info](http://www.regular-expressions.info/examples.html)提供的正则表达式。这将确保您的 IP 地址实际上是有效的。

> 匹配 IP 地址是在正则表达式复杂性和准确性之间进行权衡的另一个很好的例子。\b\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}\b 将匹配任何 IP 地址就好了，但也将匹配 999.999.999.999就好像它是一个有效的 IP 地址一样。这是否是一个问题取决于您打算应用正则表达式的文件或数据。要将 IP 地址中的所有 4 个数字限制为 0..255，您可以使用这个复杂的野兽：\b(25[0-5]|2[0-4][0-9]|[01]?[0 -9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25 [0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][ 0-9]|[01]?[0-9][0-9]?)\b 使用 RegexBuddy 分析这个正则表达式（所有内容都在一行上）。长正则表达式将 IP 地址的 4 个数字中的每一个存储到一个捕获组中。您可以使用这些组来进一步处理 IP 号码。
> 
> 如果您不需要访问单个数字，您可以使用量词将正则表达式缩短为： \b(?:(?:25[0-5]|2[0-4][0-9]|[ 01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9 ][0-9]?)\b 用 RegexBuddy 分析这个正则表达式。同样，您可以将快速正则表达式缩短为 \b(?:\d{1,3}.){3}\d{1,3}\b 使用 RegexBuddy 分析此正则表达式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:13:27.500

正则表达式！

```
re.sub('[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}','CENSORED_IP',data) 
```

值得注意的是，这也匹配 999.999.999.999 之类的东西。如果这是一个问题，你将不得不得到一个更复杂的正则表达式。此外，这仅适用于 IPv4 地址。

仅在有效 IP 上：

```
re.sub('(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)','CENSORED_IP',data) 
```

来源：[正则表达式来源](https://stackoverflow.com/questions/4011855/regexp-to-check-if-an-ip-is-valid)

# iphone - 数组，大小不是预期值

> ID：11289905
> 
> 赞同：1
> 
> 时间：2012-07-02T08:10:56.250
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我无法理解我的代码中发生了什么：

```
 for (NSMutableDictionary *dict in jsonResponse) {

     NSString *days = [dict objectForKey:@"dayOfTheWeek"];

     NSArray *arrayDays = [days componentsSeparatedByString:@" "];

     NSLog(@"la var %@ size %lu", days, sizeof(arrayDays));

     for(int i = 0; i<sizeof(arrayDays); i++){

        NSLog(@"el dia %@",[arrayDays objectAtIndex:i]);

     }
} 
```

我在日志中得到什么：

```
2012-07-02 10:06:57.191 usualBike[1342:f803] var M T W T F size 4
2012-07-02 10:06:57.191 usualBike[1342:f803] day M
2012-07-02 10:06:57.192 usualBike[1342:f803] day T
2012-07-02 10:06:57.192 usualBike[1342:f803] day W
2012-07-02 10:06:57.193 usualBike[1342:f803] day T
2012-07-02 10:06:57.193 usualBike[1342:f803] var S S size 4
2012-07-02 10:06:57.194 usualBike[1342:f803] day S
2012-07-02 10:06:57.194 usualBike[1342:f803] day S 
```

并且崩溃，因为位置 3 不存在。

为什么第二次尺寸不变？它应该是 1。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:14:41.117

你不应该使用 sizeof。它会返回指针大小，它适用于任何指针类型变量，如字符串、字典、数组等。

您应该计算 NSArray 的属性。

更改以下代码行，

```
 NSLog(@"la var %@ size %lu", days, sizeof(arrayDays)); 
```

用这条线：

```
 NSLog(@"la var %@ size %lu", days, arrayDays.count); 
```

在循环语句中也做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:14:57.197

`sizeof(theArray)`计算数据类型的大小，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Sizeof)。
`[theArray count]`并`theArray.Count`返回数组中对象的计数。

替换出现的两个`sizeof(arrayDays)`by `arrayDays.Count`。

注意：您还可以使用以下方法循环数组：

```
for (NSString* theValue in arrayDays) {
    NSLog(@"el dia %@",theValue);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:26:19.360

`Sizeof()`仅适用于固定大小的数组。使用 `[arrayDays count]`

# java - 目标服务器无法使用 htmlunit 和 tor 响应异常

> ID：11289907
> 
> 赞同：2
> 
> 时间：2012-07-02T08:11:05.597
> 
> 标签：java, htmlunit, tor

我正在使用 htmlunit 向网站发送请求并匿名发送请求。但是我得到

目标服务器未能响应异常。我在谷歌上搜索并找到以下代码。

```
HttpMethodRetryHandler myretryhandler = new HttpMethodRetryHandler() {
    public boolean retryMethod(
        final HttpMethod method, 
        final IOException exception, 
        int executionCount) {
        if (executionCount >= 5) {
            // Do not retry if over max retry count
            return false;
        }
        if (exception instanceof NoHttpResponseException) {
            // Retry if the server dropped connection on us
            return true;
        }
        if (!method.isRequestSent()) {
        // Retry if the request has not been sent fully or
        // if it's OK to retry methods that have been sent
        return true;
    }
    // otherwise do not retry
    return false;
    }
};

GetMethod httpget = new GetMethod("http://www.whatever.com/");
httpget.getParams().
setParameter(HttpMethodParams.RETRY_HANDLER, myretryhandler);
try {
    client.executeMethod(httpget);
    System.out.println(httpget.getStatusLine().toString());
} finally {
    httpget.releaseConnection();
} 
```

但是我找不到如何在 htmlunit 中执行此操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:25:29.323

提供的代码是一个 HttpClient 示例，如果您想使用 htmlunit，请访问他们的网站[http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) 并使用这些片段您应该能够发送（发布？）请求

```
WebClient client = new WebClient(BrowserVersion.FIREFOX_3_6);
client.setTimeout(60000);
client.setRedirectEnabled(true);
client.setJavaScriptEnabled(true);
client.setThrowExceptionOnFailingStatusCode(false);
client.setThrowExceptionOnScriptError(false);
client.setCssEnabled(false);
client.setUseInsecureSSL(true);

    HtmlPage page = null;
    try {
        page = client.getPage("http://www.whatever.com");
    } catch (Exception e) {
        // TODO Auto-generated catch block
    }
    if (page.getWebResponse().getStatusCode() == 404) {
        System.out.println("Page not found");
    }

    // Post a request
    WebRequest request = new WebRequest(new URL("http://www.whatever.com/post_url"));
    request.setHttpMethod(HttpMethod.POST);
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new NameValuePair("login", userLogin));
    params.add(new NameValuePair("pass", userPassword));
    request.setRequestParameters(params);

    page = client.getPage(request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-06T13:11:17.607

```
 final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_45);
    webClient.getOptions().setTimeout(20000);
    webClient.getOptions().setThrowExceptionOnScriptError(false);
    webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
    webClient.getOptions().setCssEnabled(false);
    webClient.getOptions().setJavaScriptEnabled(true);
    webClient.getOptions().setUseInsecureSSL(true);
    webClient.getOptions().setRedirectEnabled(true);

    webClient.setConfirmHandler(new ConfirmHandler() {
        public boolean handleConfirm(Page page, String message) {
            return true;
        }
    });

    String binary = DatatypeConverter.printBase64Binary(auth.getBytes());
    webClient.addRequestHeader("Authorization", "Basic " + binary);

    //get General page
    final HtmlPage page = webClient.getPage("http://adress"); 
```

# php - PHPMailer 错误：“无法连接到：25”

> ID：11289912
> 
> 赞同：0
> 
> 时间：2012-07-02T08:11:17.063
> 
> 标签：php, phpmailer

当我尝试使用 PHPMailer 类发送电子邮件时，出现以下错误：

> 警告：fsockopen() [function.fsockopen]: 无法连接到 C:\Users\Testing\Downloads\PHPMailer\phpmailer\class.smtp 中的 :25 （无法连接，因为目标机器主动拒绝它。）。第 105 行的 php

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:13:27.933

`unable to connect to :25`表示您忘记在配置中输入服务器地址。

确保在初始化 PHPMailer 时指定了有效的 SMTP 服务器地址。

# ruby - 存根重复方法调用 rake 测试

> ID：11289913
> 
> 赞同：0
> 
> 时间：2012-07-02T08:11:21.213
> 
> 标签：ruby, rake-test

对于我的项目，我使用 rake test 来测试我的库。例如，我有一个方法，比如`connection.users.add_users(options)`

```
json_response = check_users(options) 
batch = nil
Timeout::timeout(30) do
  begin
    sleep 1            
    batch = connection.batches.find(json_response["batch_id"])
  end while batch.state !="completed"
end
connection.users.add_users(batch.target_id, options) 
```

所以，首先我向我的服务发出 HTTP 请求，然后我得到响应 (batch_id)，循环直到批处理完成，然后发出另一个请求并返回响应。

通常，在我做的规格中

```
let(:connection){setup_test_connection('{"batch_id": 344235}', '202')} 
```

这将 stub`connection`的响应，但在这种方法的情况下，它只存根第一次调用，然后尝试向我的服务发出真正的请求，因此我收到错误（超时，因为当时服务实际上已关闭）。

有什么方法可以存根所有可能`connection`的类方法调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:48:07.447

所以我发现了。

我应该使用存根来伪造内部请求，如下所示：

```
connection.servers.stubs(:schedule_create).returns({"batch_id" => 235234}) 
```

# mysql - MySQL加入，顺序不正确

> ID：11289914
> 
> 赞同：1
> 
> 时间：2012-07-02T08:11:28.183
> 
> 标签：mysql, sql

我有两张桌子：

```
tickets

ticket_id, int(11), NO, PRI, , auto_increment
order_num, varchar(45), NO, , , 
user_id, int(11), YES, , , 
event_id, int(11), YES, , , 
number_of_tickets, varchar(4), YES, , , 
order_placed, timestamp, NO, , CURRENT_TIMESTAMP, 
payment_recd, enum('Yes','No'), YES, , No, 
payment_time, timestamp, YES, , , 

events

event_id, int(11), NO, PRI, , auto_increment
venue_id, int(11), YES, , , 
event_date, date, YES, , , 
event_time, time, YES, , , 
event_price, decimal(4,2), YES, , , 
event_capacity, int(11), YES, , , 
dateadded, timestamp, NO, , CURRENT_TIMESTAMP, 
```

我需要列出用户购买的门票并按活动日期订购，但我正在尝试的以下操作没有正确排序

```
select tickets.order_num as ordnum, tickets.event_id as tickid, tickets.number_of_tickets as numtix 
   from tickets, events
where  ((tickets.user_id = '1') and (tickets.payment_recd = 'Yes'))
  group by tickets.order_num 
order by events.event_date asc 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:17:56.640

您没有加入表格，因此它将列出两个表格中的所有行，请尝试：

```
select tickets.order_num as ordnum, tickets.event_id as tickid, tickets.number_of_tickets as numtix 
from tickets
inner join events on tickets.event_id = events.event_id
where ((tickets.user_id = '1') && (tickets.payment_recd = 'Yes'))
group by tickets.order_num order by events.event_date asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:18:09.440

首先，我建议您使用`JOIN`，因为您的方法太慢且`JOIN`最快，更安全，实际上是您能够使用和数据库正确编写的最有效的解决方案。

```
SELECT t.order_num, t.event_id, t.number_of_tickets 
FROM tickets t
INNER JOIN events e ON (t.event_id = e.event_id)
WHERE ((t.user_id = '1') && (t.payment_recd = 'Yes'))
GROUP BY t.order_num
ORDER BY e.event_date ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:18:09.007

尝试：

```
select tickets.order_num as ordnum, tickets.event_id as tickid, tickets.number_of_tickets as numtix 
   from events
  inner join tickets on events.id = ticket.event_id
where  ((tickets.user_id = '1') and (tickets.payment_recd = 'Yes'))
  group by tickets.order_num 
order by events.event_date asc 
```

你没有显示`events`和`tickets`表之间的关系，得到一个笛卡尔积。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:18:32.720

您需要在 where 子句中使用“AND Tickets.event_id = events.event_id”。

您尚未指定如何连接这两个表，因此目前您正在执行完全连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T08:20:01.240

尝试使用它

```
 select tickets.order_num as ordnum, tickets.event_id as tickid,
 tickets.number_of_tickets as numtix from tickets inner join events on
    tickets.event_id=events.event_id where
 ((tickets.user_id = 1) && (tickets.payment_recd = 'Yes'))
 group by tickets.order_num order by events.event_date asc 
```

请考虑tickets.user_id是一个整数，你不能把它当作一个带有''的字符串......它必须像尝试使用它tickets.user_id = 1

# c# - 渲染文本/ JsonConvert

> ID：11289915
> 
> 赞同：0
> 
> 时间：2012-07-02T08:11:39.637
> 
> 标签：c#, json, extjs

我有一个 DeleteUser 函数，当用户单击 actioncolum 中的删除行图标时会调用该函数。这是该函数的代码：

```
function DeleteUser(id) { 
Ext.Ajax.request ({
url: 'user/delete/castle',
params: {id: id},
success: function (result,request){
Ext.MessageBox.alert('Success', result.responseText);
},
failure: function (result, request){
alert(result.responseText);
}
});
} 
```

现在，当删除用户时，会出现一个标题为“成功”的弹出窗口，但 result.responseText 参数为空。我需要 result.responseText 参数为“用户已成功删除”，但我需要通过在通过 url 调用的删除函数中使用 RenderText 来传递它。这是通过 url 'user/delete/castle' 调用的删除函数的代码：

```
public void Delete (int id){
CancelView();
CancelLayout();
User user = User.FindUser(id);
user.Delete();
RenderText(JsonConvert.SerializeObject(???));
} 
```

有没有人有关于如何做到这一点的任何提示？我是 Ajax 请求和 JSON 的新手。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:51:27.307

您必须返回一个 JSON 对象，例如

```
{ success = true, message = 'Your message'} 
```

给客户。这是执行此操作的方法：

**服务器代码：**

```
var obj = new {success = true, message = "Your success message"}
RenderText(JsonConvert.SerializeObject(obj)); 
```

要通知失败，您可以`success = false`在上面的代码中设置。

**客户端代码：**

```
function DeleteUser(id) { 
Ext.Ajax.request ({
url: 'user/delete/castle',
params: {id: id},
success: function (response) {
                var resp = Ext.decode(response.responseText);
                alert(resp.message); 
                if (success == false)
                {
                   // perform any specific error handling task
                }                    
            },
failure: function (result, request){
     // Usually this function is called on communication failures. Not called if success = false
     alert(result.responseText);

}
});
} 
```

# django - 用代理对象替换部分 Django 模型结构

> ID：11289922
> 
> 赞同：0
> 
> 时间：2012-07-02T08:12:35.190
> 
> 标签：django

我已经用 Django 制作了一个 Web 应用程序的原型。模型结构的某些部分目前是简单的 Django 模型，它们当前模拟我需要集成的遗留数据存储的数据结构。这些所谓的主数据将为应用程序只读。主数据（我认为）通过网络服务向我公开，但我想这有点无关紧要。

本质上，我需要创建某种代理对象，以换取当前模型。我想尽可能多地保留剩余的应用程序代码。我知道这可能会限制我可以用于这些“伪造”模型（没有自动生成的表单，没有管理界面）的 Django 魔法数量，但我可以接受。

有什么我可以使用的吗？

# iphone - 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到 NSManagedObjectModel

> ID：11289929
> 
> 赞同：0
> 
> 时间：2012-07-02T08:13:16.703
> 
> 标签：iphone, ios, core-data, ios4

当我运行我的应用程序时，我得到

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel 
```

但我的应用程序中有我的歌曲课程，我的代表中有以下内容

```
- (void)awakeFromNib {    

    RootViewController *rootViewController = (RootViewController *)[navigationController topViewController];
    rootViewController.managedObjectContext = self.managedObjectContext;
}

- (void)saveContext {

    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}    

#pragma mark -
#pragma mark Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext {

    if (managedObjectContext_ != nil) {
        return managedObjectContext_;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        managedObjectContext_ = [[NSManagedObjectContext alloc] init];
        [managedObjectContext_ setPersistentStoreCoordinator:coordinator];
    }
    return managedObjectContext_;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel {

    if (managedObjectModel_ != nil) {
        return managedObjectModel_;
    }
    NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"PoemSubscription" ofType:@"momd"];
    NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
    managedObjectModel_ = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];    
    return managedObjectModel_;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (persistentStoreCoordinator_ != nil) {
        return persistentStoreCoordinator_;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"PoemSubscription.sqlite"];

    NSError *error = nil;
    persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![persistentStoreCoordinator_ addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return persistentStoreCoordinator_;
}

#pragma mark -
#pragma mark Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory {
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

#pragma mark -
#pragma mark Memory management

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    /*
     Free up as much memory as possible by purging cached data objects that can be recreated (or reloaded from disk) later.
     */
}

- (void)dealloc {

    [managedObjectContext_ release];
    [managedObjectModel_ release];
    [persistentStoreCoordinator_ release];

    [navigationController release];
    [window release];
    [super dealloc];
} 
```

但我仍然收到上述错误（我的应用程序类型是 uitabbarcontroller ）。

请让我知道错误是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:41:35.750

您的初始化方法中可能有些东西是零。您应该通过核心数据初始化行进行调试，看看问题出在哪里……这个更简单的初始化对您不起作用？

`managedObjectModel_ = [[NSManagedObjectModel mergedModelFromBundles:nil] retain];`

# ios - MediaPlayer.framework (MPMoviePlayerController) 从需要访问凭据的 URL 播放电影

> ID：11289932
> 
> 赞同：4
> 
> 时间：2012-07-02T08:13:27.877
> 
> 标签：ios, cocoa-touch, mpmovieplayercontroller, nsurlcredential

我在从具有基本 http 身份验证的 URL 播放电影时遇到问题。

这是代码：

```
NSURLCredential *credential = [[NSURLCredential alloc]
                               initWithUser:@"user"
                               password:@"password"
                               persistence:NSURLCredentialPersistenceForSession];

NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                             initWithHost:@"moze.dyndns.org"
                                             port:80
                                             protocol:@"http"
                                             realm:nil
                                             authenticationMethod:NSURLAuthenticationMethodHTTPBasic];

[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace];

NSURL *videoURL = [NSURL URLWithString:@"http://moze.dyndns.org/test/test.mov"];
moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL];
[moviePlayerController.view setFrame:self.view.bounds];
[self.view addSubview:moviePlayerController.view];
MPMoviePlayerController *mp = [moviePlayerController moviePlayer];
mp.controlStyle = MPMovieControlStyleDefault;
[mp prepareToPlay];
[[moviePlayerController moviePlayer] play]; 
```

我收到错误“无法完成操作。（MediaPlayerErrorDomain 错误 -1013。）”，errorLog 为 NULL，就像 accessLog 一样。

我正在使用具有 AuthType Basic 的 apache 服务器，凭据是正确的，在 Web 浏览器上对其进行了测试。如果禁用身份验证，则播放没有问题。

请帮忙，我找不到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T23:43:46.147

我无法`MPMoviePlayerController`正确地进行身份验证挑战，即使 Apple 文档另有说明。我想出的非常 hacky 的解决方案是使用 Apple`CustomHTTPProtocol`拦截响应并提供身份验证质询响应。我相信这个协议的最初目的是处理`UIWebViews`.

链接到`CustomHTTPProtocol`： [https ://developer.apple.com/library/ios/samplecode/CustomHTTPProtocol/Listings/Read_Me_About_CustomHTTPProtocol_txt.html](https://developer.apple.com/library/ios/samplecode/CustomHTTPProtocol/Listings/Read_Me_About_CustomHTTPProtocol_txt.html)

我的接口声明：

```
@interface SampleViewController() <CustomHTTPProtocolDelegate> 
```

`MPMoviePlayerController`在 my 内实例化`SampleViewController`：

```
NSString *fullURLString = @"http://www.samplesite.com/samplemovie.mp4";
NSURL *fullURL = [NSURL URLWithString:fullURLString];

[CustomHTTPProtocol setDelegate:self];
[CustomHTTPProtocol start];

NSURLCredential *credential = [[NSURLCredential alloc]
                              initWithUser:@"username"
                              password:@"password"
                              persistence:NSURLCredentialPersistenceForSession];
NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                        initWithHost:fullURL.host
                                        port:80
                                        protocol:fullURL.scheme
                                        realm:@"your-realm"
                                        authenticationMethod:NSURLAuthenticationMethodDefault];
[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace];

self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:fullURL];
[self.moviePlayer prepareToPlay];
[self.moviePlayer setShouldAutoplay:NO];
[self.moviePlayer setControlStyle:MPMovieControlStyleEmbedded];
[self.moviePlayer.view setFrame:self.sampleView.bounds];
[self.moviePlayer.backgroundView setBackgroundColor:[UIColor colorWithWhite:0.9 alpha:1.0]];
[self.moviePlayer.view setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
[self.sampleView addSubview:self.moviePlayer.view]; 
```

同样在我的`SampleViewController`，我有几个委托方法。对于基本身份验证，它非常简单：

```
- (BOOL)customHTTPProtocol:(CustomHTTPProtocol *)protocol canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    BOOL canAuth = ([[protectionSpace authenticationMethod] isEqual:NSURLAuthenticationMethodHTTPBasic] &&
                    [[protectionSpace realm] isEqualToString:@"your-realm"]);
    return canAuth;
}

- (void)customHTTPProtocol:(CustomHTTPProtocol *)protocol didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSURLCredential *newCredential = [NSURLCredential credentialWithUser:@"username"
                                               password:@"password"
                                            persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
} 
```

调用后`start`，所有 http 和 https 请求都通过`CustomHTTPProtocol`模块

我没有包括`CustomHTTPProtocol`，因为 Apple 提供了源代码，而且它真的很长。我进行了一些更改以使其与 ARC 一起使用，但它几乎是相同的代码。

希望这对你有用。

# c# - 组合框中的值 C# wpf

> ID：11289934
> 
> 赞同：1
> 
> 时间：2012-07-02T08:13:37.167
> 
> 标签：c#, wpf, combobox

我在数据网格中有组合框（mysql（web）中的源）我如何在选择中获得价值？

```
<ComboBox SelectionChanged="status_SelectionChanged"......... 
```

C＃

```
private void status_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    this here 
} 
```

如何？？？

以及如何在另一列中获取值，但在这一行中？

```
column_one   column_two

   value1      value2 
```

更改为`column two`，如何获得第一列？

**更新：** 我的物品

```
<ComboBox.Items>
    <ComboBoxItem>New</ComboBoxItem>
    <ComboBoxItem>Cancel</ComboBoxItem>
</ComboBox.Items> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:04:29.817

您可以按名称访问组合框。

```
<ComboBox SelectionChanged="status_SelectionChanged" Name="myComboBox" ... />
private void status_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    string value = myComboBox.SelectedItem.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:49:28.733

这个解决方案怎么样？

```
<ComboBox Name="myComboBox"  SelectionChanged="status_SelectionChanged" ... />

private void status_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var value = (sender as ComboBox).SelectedItem;
} 
```

如果您需要在其他列但在同一行中获取值，您可以为 DataGrid 的单元格创建新事件并获取类似的所需值

```
DataGrid.Item[var1,var2] 
```

其中 var1 是行号，var2 是列号。

当我必须将 Datagrid 与复杂单元格一起使用时，我将每个元素的行号和列号（在您的情况下为 ComboBox）保存在 .Tag 属性中，然后将其弹出以确定单元格号。

# tridion - COMException - Tridion 2011 SP1

> ID：11289935
> 
> 赞同：7
> 
> 时间：2012-07-02T08:13:45.877
> 
> 标签：tridion

在度过了一个愉快的周末之后，我今天早上开始上班，打开 Chrome，照常导航到我客户的生产 Tridion - WHAM - COM 异常：

> 由于以下错误，检索具有 CLSID {9926D1CF-F158-418F-A9A2-B653B497D982} 的组件的 COM 类工厂失败：80004005 未指定错误（HRESULT 异常：0x80004005 (E_FAIL)）。

这似乎是 CM_TOM.dll - 问题是我重新启动了 COM 服务器、IIS 等，但似乎没有任何效果。

我正要重新启动机器，但想知道这里是否有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:41:04.217

好的，供将来参考 - 通过以下步骤解决了这个问题：

*   打开全局策略编辑器管理单元。
*   转到计算机配置 > 管理模板 > 系统 > 用户配置文件。
*   双击“不要在用户注销时强制卸载用户注册表”
*   选择cEnabled 并单击确定。
*   重启服务器

# javascript - 如何不使用内联 js 事件？

> ID：11289939
> 
> 赞同：0
> 
> 时间：2012-07-02T08:14:15.907
> 
> 标签：javascript, html, events

例如，我习惯于在我的网站中使用内联事件

```
<head>
<script>
function func() {
alert("test");
}
</script>
</head>
<body>
<div id="mydiv" onclick="func()"></div>
</body> 
```

我注意到现在的网站根本不使用内联事件。我知道您可以务实地设置事件，例如：

```
document.getElementById('mydiv').onclick = function(){ func()} 
```

这是应该怎么做的吗？我是否必须将上述行放在每一页的末尾？

按键、单击和模糊事件如何附加到本网站的输入字段，例如：[https ://twitter.com/signup](https://twitter.com/signup)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:18:14.657

是的，这是向对象添加事件的一种有效方法，但它会阻止一次绑定多个函数。

我建议研究 jQuery（或类似的 javascript 库，如 mootools），这是当今绝大多数网站绑定其 javascript 事件的方式。

例如，在 jQuery 中，您通常会像这样绑定点击：

```
$("#mydiv").click(function(event) {
  // click handling code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:16:46.310

添加事件侦听器的最简洁方法是使用内置方法：

```
var el = document.getElementById('mydiv');
if (el.addEventListener) {
  el.addEventListener('click', modifyText, false); 
} else if (el.attachEvent)  {
  el.attachEvent('onclick', modifyText);
}

function modifyText() {

} 
```

这促进了更清洁、更易读和可重用的代码。（注意`attachEvent`是 IE9 之前的版本）

您可以将此代码放置在`<body>`标记的末尾（或`<body>`标记内的任何位置，但在添加 DOM 元素之后）或在[窗口`onload`](https://developer.mozilla.org/en/DOM/window.onload)函数中 - 在 DOM 完成加载后执行：

```
window.onload = function() {  
  // here
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:18:25.157

首选的方法是使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)，通常与一个库（例如[YUI](http://yuilibrary.com/projects/yui3/)或[jQuery](http://jQuery.com)）结合使用，以平滑浏览器之间的变化（例如，旧的 IE 不支持`addEventListener`）。

> 我是否必须将上述行放在每一页的末尾？

通常你会将 JavaScript 放在它自己的文件中，然后将`src`它放到需要它的每个页面中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:19:02.407

这里的主要思想是应该加载要在其上注册处理程序的 DOM 元素。因此，要么在元素 html 之后进行事件绑定，要么可以在 window.onload 事件处理程序中进行，它可以在实际标记定义之前定义，如下所示：

```
window.onload = function(){
 // your event binding
} 
```

但我的建议是尽可能在文档末尾包含 javascript。

# java - 您如何处理 Java 中的“不可能”异常？

> ID：11289943
> 
> 赞同：19
> 
> 时间：2012-07-02T08:14:26.607
> 
> 标签：java, exception-handling

有时，我最终不得不捕获一个我知道永远不会发生的异常，例如这里

```
URLDecoder.decode("some string", "UTF-8"); //No unknown encoding possible 
```

或在这里：

```
public void methodWithURL(URL url){
    URI uri = new URI(url); //No invalud URI syntax possible
} 
```

你怎么处理这个？我通常会记录一个关于宇宙法则如何变化的有趣错误，然后抛出一个`RuntimeException`. 有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T08:39:23.053

我抓住`Exception`并将它包裹在一个`Error`. 来自以下文档`Error`：

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T08:42:24.193

我会跳过有趣的消息。

顺便说一句：我有一个案例，其中一段代码（在一个小型库中）只是假设编码可用。只有它被部署在有限的设备上并在运行时爆炸。

已检查的异常用于显示我们代码中应该暂停一秒钟的位置并考虑较少经过的路径（如“当网络死亡时我的应用程序会做什么”和其他极端情况）。将它们包装在 IllegalStateException 中并重新抛出是一种已签署的合同，程序员在其中说：“是的，考虑到所有风险，我对这里的现场承担全部责任”。如果不是检查异常，我们将无法从明显缺乏思考中知道一个有意识的决定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T08:31:16.583

好吧，恕我直言，有*一个*比“记录[ging]关于宇宙法则如何变化的有趣错误”更好的方法，因为这样做你是“很可爱”，这在朋友中很好，但不是普遍的（没有双关语预期）接受。你的代码可能会被其他人阅读，如果你的幽默（对他们）平淡无奇，你还没有真正交到任何朋友。

许多风格指南对不可能的例外提出建议。你可以使用一个空的 catch 块，异常参数被命名为`willNeverHappen`; 您可以在空块中放置评论；您可以抛出运行时异常（可能是最好的，因为您可能**拼错**了UTF-8！）

如果你想超级有野心，你可以写一个注解，比如[Lombok 中的 SneakyThrows](http://projectlombok.org/features/SneakyThrows.html)。您是否会认为这“更好”只是一个品味问题。:)

请注意，此问题已在[https://softwareengineering.stackexchange.com/questions/122233/how-to-deal-with-checked-exceptions-that-c​​annot-ever-be-](https://softwareengineering.stackexchange.com/questions/122233/how-to-deal-with-checked-exceptions-that-cannot-ever-be-thrown) throw 上进行了讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T07:10:04.637

这是我的解决方案——为 Android 开发，但可以轻松适应“常规”Java：

```
public class ImpossibleException extends RuntimeException {
    public ImpossibleException(@NonNull String whyNotPossible) {
        this(whyNotPossible, null);
    }

    public ImpossibleException(@NonNull String whyNotPossible, Throwable throwable) {
        super("Impossible exception: " + whyNotPossible, throwable);
        Log.e("Impossible", whyNotPossible, throwable);
    }
} 
```

用法：

```
try {
    byte[] data = "Hello".getBytes("utf-8");
    Log.i("Test", "data.length=" + data.length);
} catch (UnsupportedEncodingException e) {
    throw new ImpossibleException("Android always supports utf-8", e);
} 
```

构造`whyNotPossible`函数意味着不需要在错误发生的地方记录错误，也不需要注释。

我想这应该是一个`ImpossibleException extends RuntimeException`还是一个`ImpossibleError extends Error`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-15T20:58:50.220

如果您在项目中使用[Lombok](https://projectlombok.org/)，您可以注释周围的方法，使用[`@SneakyThrows`](https://projectlombok.org/features/SneakyThrows)哪种隐藏检查的异常`RuntimeException`（因此无需在子句中包围`try-catch`或声明它）。`throws`

例如：

```
@SneakyThrows(URISyntaxException.class)
public void methodWithURL(URL url){ // No throws here
    URI uri = new URI(url); // Assume no invalud URI syntax possible
} 
```

# asp.net - 从缓存中推送数据

> ID：11289945
> 
> 赞同：0
> 
> 时间：2012-07-02T08:14:29.063
> 
> 标签：asp.net, performance, caching, load

我在 asp.net 中有一个网站，有 3 个语言版本。我使用缓存将大部分常用数据缓存在缓存中

HttpRuntime.Cache.Insert(key, obj)

一切正常我用唯一的密钥保存不同的语言数据。我制作了一个页面只是为了查看缓存数据，我可以查看所有 3 语言的缓存中的所有数据。版本。但在网站正常运行 2-3 天后，他的 lang 2。版本开始工作较慢，因为数据不再在缓存中。当我加载 lang. 版本。1 数据在缓存中，但在 2 和 3 中，缓存页面为空。然后我加载lang。版本 2 的数据被缓存，但版本 1 的缓存为空。

出于某种原因，就像每次缓存新数据时都会推送数据。经过几次加载后，它会自行修复，但这是问题..

该站点没有内存限制，它可以消耗它需要的所有内存。在任务管理器中，我可以看到它高达 130 MB 工作集内存和高达 100 MB 内存私有工作集，处理程序永远不会超过 600。应用程序池空闲时间设置为 0..

还有一个问题。当您在地址栏中键入站点并按回车键时，站点甚至需要一些时间才能开始加载。我知道是因为在页面中缓存数据加载时间非常快.. 我的意思是快.. 但有时需要 10 秒。装载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:38:55.997

如果您未指定时间跨度，缓存将决定何时删除项目。这可能并不总是最佳的。尝试使用可用的重载插入并指定较长的时间跨度。

```
public void Insert(
  string key,
  Object value,
  CacheDependency dependencies,
  DateTime absoluteExpiration,
  TimeSpan slidingExpiration) 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/4y13wyk9.aspx](http://msdn.microsoft.com/en-us/library/4y13wyk9.aspx)

# ios - 响应者链将子视图转到超级视图，那么滚动视图呢？

> ID：11289947
> 
> 赞同：0
> 
> 时间：2012-07-02T08:14:33.577
> 
> 标签：ios, uiscrollview, touch, first-responder

从[apple doc](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html) subview（靠近屏幕）开始处理触摸事件而不是他们的superviews。

另一方面，视图作为子视图添加到滚动视图中，但滚动视图处理触摸以首先检测滑动。

我可以将滚动视图案例视为特例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:19:20.877

不要忘记这部分：

> 如果命中测试视图无法处理该事件，则该事件将按照“响应者对象和响应者链”中所述沿响应者链向上传播，直到系统找到可以处理它的视图。

如果您的子视图无法处理它，它将被传递给`UIScrollView`.

# android - 如何在android的内部/外部存储中保存解析的文本文件

> ID：11289949
> 
> 赞同：4
> 
> 时间：2012-07-02T08:14:34.613
> 
> 标签：android, text, storage, external, internal

目前我正在从事需要解析远程文本文件并将其存储在本地存储（内部/外部）中的项目。我能够解析文本文件，但无法将其存储在 SDCARD 中。这是我的代码：

```
package com.exercise.AndroidInternetTxt;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidInternetTxt extends Activity {

    TextView textMsg, textPrompt;
    final String textSource = "http://sites.google.com/site/androidersite"
                                                              + "/text.txt";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textPrompt = (TextView) findViewById(R.id.textprompt);
        textMsg = (TextView) findViewById(R.id.textmsg);
        textPrompt.setText("Wait...");
        URL textUrl;
        try {
            textUrl = new URL(textSource);
            BufferedReader bufferReader = new BufferedReader(
                    new InputStreamReader(textUrl.openStream()));
            String StringBuffer;
            String stringText = "";
            while ((StringBuffer = bufferReader.readLine()) != null) {
                stringText += StringBuffer;
            }
            bufferReader.close();
            textMsg.setText(stringText);
            // Saving the parsed data.........
            File myFile = new File("sdcard/mysdfile.txt");
            if (!myFile.exists()) {
                myFile.mkdirs();
            }
            myFile = new File("sdcard/mysdfile.txt");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
            myOutWriter.append(textMsg.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(), "Done writing SD 'mysdfile.txt'",
                Toast.LENGTH_SHORT).show();
        } catch (MalformedURLException e) {
            e.printStackTrace();
            textMsg.setText(e.toString());
        } catch (IOException e) {
            e.printStackTrace();
            textMsg.setText(e.toString());
        }
        textPrompt.setText("Finished!");
    }
} 
```

这是我的清单文件-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.exercise.AndroidInternetTxt"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application android:label="@string/app_name">
        <activity android:name=".AndroidInternetTxt"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE"/>
</manifest> 
```

但是，我的问题是-

*   如何将解析后的文本数据存储在 SDCARD 或手机内存中的文件中？
*   有什么方法可以使用计时器以预定义的时间间隔检查 URL？

任何代码示例对我来说都很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T09:00:02.047

首先，您的`AndroidManifest.xml`文件是正确的。所以没必要纠正。尽管我建议将您的权限组织在一个地方。

### 将文件写入内部存储

```
FileOutputStream fOut = openFileOutput("myinternalfile.txt",MODE_WORLD_READABLE);
OutputStreamWriter osw = new OutputStreamWriter(fOut);

//---write the contents to the file---
osw.write(strFileData);
osw.flush();
osw.close(); 
```

### 将文件写入外部 SD 卡

```
//This will get the SD Card directory and create a folder named MyFiles in it.
File sdCard = Environment.getExternalStorageDirectory();
File directory = new File (sdCard.getAbsolutePath() + "/MyFiles");
directory.mkdirs();

//Now create the file in the above directory and write the contents into it
File file = new File(directory, "mysdfile.txt");
FileOutputStream fOut = new FileOutputStream(file);
OutputStreamWriter osw = new OutputStreamWriter(fOut);
osw.write(strFileData);
osw.flush();
osw.close(); 
```

**注意：如果在模拟器上运行，请确保您已在 AVD 属性中启用 SD 卡支持并为其分配适当的空间。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:27:10.217

替换此行

```
File myFile = new File("sdcard/mysdfile.txt");
if(!myFile.exists()){
  myFile.mkdirs();
 }
myFile = new File("sdcard/mysdfile.txt"); 
```

和

//保存解析后的数据.........

```
File myFile = new File(Environment.getExternalStorageDirectory()+"/mysdfile.txt");
myFile.createNewFile(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:52:47.540

```
File myFile = new File("sdcard/mysdfile.txt"); 
```

应改为

```
File myFile = new File("/mnt/sdcard/mysdfile.txt"); 
```

# css - 如何在 CSS 中内联使用伪类（如后、前）

> ID：11289954
> 
> 赞同：2
> 
> 时间：2012-07-02T08:15:00.333
> 
> 标签：css, pseudo-class

我正在编写一个电子邮件模板，并被告知仅使用内联 css（由于电子邮件提供商/服务器的限制），但我需要使用`:before`伪类并且不知道如何内联。到目前为止，内联使用它的唯一其他方法是使用 javascript，但不幸的是，这也不是一个选项。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:28:30.490

**我认为这是不可能的。**

伪类是选择器家族的成员，不会出现在属性中。

使用 javascript，类似 ,,,

```
<a href="#" 
   onmouseover = "this.style.color = 'none'"
   onmouseout  = "this.style.color = 'blue'">Hello</a> 
```

这是内联的，但不是 CSS。

# windows - Dropbox 桌面应用程序是如何编程的？

> ID：11289956
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:15:05.237
> 
> 标签：windows, desktop-application, dropbox

我想知道 Dropbox 的桌面应用程序是用什么语言编写的？是 Python 还是 Ruby？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:16:59.253

这是python注意exe旁边bin文件夹中的Python25.dll文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:30:57.197

他们 99.9% 的代码是用 Python 编写的。在服务器后端使用；桌面客户端、网站控制器逻辑、API 后端和分析。由于内存限制，不在 Android 上。使用 Python 在单个代码库上运行。Dropbox 使用 PyObjs、WxPython、types、py2exe、py2app、PyWin32 等工具在 Windows、Mac、Linux 上运行。

来源：[http ://highscalability.com/blog/2011/3/14/6-lessons-from-dropbox-one-million-files-saved-every-15-minu.html](http://highscalability.com/blog/2011/3/14/6-lessons-from-dropbox-one-million-files-saved-every-15-minu.html)

# android - 用于长后台操作的广播接收器或服务？

> ID：11289957
> 
> 赞同：2
> 
> 时间：2012-07-02T08:15:06.967
> 
> 标签：android, android-service

我正在开发一个定期从服务器获取数据的应用程序。现在我使用的是ScheduledThreadPoolExector，但我觉得不够干净，所以我决定使用AlarmManager来创建周期性任务。

哪个更适合此任务：BroadcastReceiver 还是 Service？我读过其中一个有 10 秒的限制，或者两者都有这个限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:22:11.593

事实上，BroadcastReceiver 只能存活 10 秒。服务可以活得更久（取决于 Android 操作系统是否需要资源，它可以杀死你的应用程序）。

您的 Service 可以是“普通”服务或 IntentService（在没有更多 Intent 可用于处理后自动终止）。我会推荐一个 IntentService。

您可以创建一个将由 IntentService 接收的 Intent，并将此 Intent 添加到 AlarmManager。

# zend-framework - 在 Zend Framework 中覆盖上传的文件

> ID：11289958
> 
> 赞同：2
> 
> 时间：2012-07-02T08:15:11.727
> 
> 标签：zend-framework, file-upload

如何上传文件，将其移动到目录并在覆盖任何现有文件时保留文件名？在 Zend 框架中。

这维护了 tmp 文件名（如 php3382.tmp）

```
$adapter = new Zend_File_Transfer_Adapter_Http();
$adapter->setDestination('data/');
$adapter->addFilter('Rename', array(
    'target' => 'data/',
    'overwrite' => true
));

$adapter->receive(); 
```

这不会覆盖

```
$adapter = new Zend_File_Transfer_Adapter_Http();
$adapter->setDestination('data/');
$adapter->receive(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:11:26.477

试试这个：

```
...

$adapter->addFilter('Rename', array('overwrite'=> true,
                                    'target'=> sprintf('data/%s', 
                                                       $adapter->getFileName()),
                                    ));
$adapter->receive();

.... 
```

# ios - 使用 RestKit 和 CoreData 同步修改对象的正确方法

> ID：11289960
> 
> 赞同：3
> 
> 时间：2012-07-02T08:15:18.807
> 
> 标签：ios, web-services, restkit

我需要帮助了解如何管理使用 CoreData 持久化远程对象的 iPhone 应用程序的 API。据我了解，当 iOS 应用程序获取远程对象时，它会加载资源路径中的所有对象。

对于后续请求，我希望通过让 Web 服务器仅返回自上次更新时间以来已更新的对象来减少开销。我通过返回 update_at 比请求的 last_update 时间更新的对象来执行此操作。

RestKit 然后解析修改的对象并将其映射到 CoreData。这个实现是使用 RestKit 和 CoreData 执行同步的正确方法，还是我错过了介于两者之间的层？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T09:04:42.427

通常 RESTful 接口应该尝试“回归基础”。在您的情况下，我建议使用 HTTP Header `If-Modified-Since`。它比传递另一个参数稍微干净一些，因为 RestKit 将在您不做任何事情的情况下处理 HTTP 状态响应。

否则，您的方法似乎很正常。服务器同步是一个巨大的问题，有很多文献和方法处理它。如果你想做更复杂的事情，那么快速的网络搜索会出现一些方法，但你的方法是我通常最终会做的。

如果用户可以在您的应用程序上编辑数据，则存在同步在设备上所做的修改的问题。为此，您通常设置对象范围“已修改”标志，并且仅在对象被修改时才上传对象。

# c# - 使用 Kinect 语音识别运行 Metro GUI 应用程序

> ID：11289961
> 
> 赞同：1
> 
> 时间：2012-07-02T08:15:28.053
> 
> 标签：c#, microsoft-metro, kinect

我想使用 kinect sdk 语音识别从 Metro UI 运行应用程序。例如，当我说出单词：News 时，它会从 Metro UI 运行 News 应用程序。

谢谢大家！

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:58:03.467

首先，您需要与音频流建立连接并开始收听：

```
 private KinectAudioSource source;
    private SpeechRecognitionEngine sre;
    private Stream stream;

private void CaptureAudio()
        {

            this.source = KinectSensor.KinectSensors[0].AudioSource;
            this.source.AutomaticGainControlEnabled = false;
            this.source.EchoCancellationMode = EchoCancellationMode.CancellationOnly;
            this.source.BeamAngleMode = BeamAngleMode.Adaptive;

        RecognizerInfo info = SpeechRecognitionEngine.InstalledRecognizers()
            .Where(r => r.Culture.TwoLetterISOLanguageName.Equals("en"))
            .FirstOrDefault();

        if (info == null) { return; }
        this.sre = new SpeechRecognitionEngine(info.Id);

        if(!isInitialized) CreateDefaultGrammars();

        sre.LoadGrammar(CreateGrammars()); //Important step

        this.sre.SpeechRecognized +=
            new EventHandler<SpeechRecognizedEventArgs>
                (sre_SpeechRecognized);
        this.sre.SpeechHypothesized +=
            new EventHandler<SpeechHypothesizedEventArgs>
                (sre_SpeechHypothesized);
        this.stream = this.source.Start();
        this.sre.SetInputToAudioStream(this.stream, new SpeechAudioFormatInfo(
            EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
        this.sre.RecognizeAsync(RecognizeMode.Multiple);

    } 
```

首先，您可以在示例中看到`sre.LoadGrammar(CreateGrammars());`创建和加载语法的一个重要步骤，因此您必须创建方法`CreateGrammars()`：

```
private Grammar CreateGrammars()
        {

        var KLgb = new GrammarBuilder();
        KLgb.Culture = sre.RecognizerInfo.Culture;
        KLgb.Append("News");
        return Grammar(KLgb);

    } 
```

上面的示例为“News”这个词创建了一个语法监听。一旦被识别（在您的语法中所说的单词的概率高于阈值），语音识别器引擎 (sre) 就会引发 SpeechRecognized 事件。

当然，您需要为这两个事件（Hypothetize、Recognize）添加正确的处理程序：

```
 private void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {

        this.RecognizedWord = e.Result.Text;
        if (e.Result.Confidence > 0.65) InterpretCommand(e);
    } 
```

知道您所要做的就是编写`InterpretCommand`可以执行任何操作的方法（例如运行 Metro 应用程序；））。如果字典中有多个单词，则该方法必须解析识别的文本并验证这是被识别的单词 news。

[在这里](http://www.apress.com/downloadable/download/sample/sample_id/1268/)您可以下载一本关于 Kinect 的好书的示例：[使用 Microsoft Kinect SDK 开始 Kinect 编程](http://www.apress.com/9781430241041)（不幸的是，这本书本身不是免费的）。在 Chapter7\PutThatThereComplete\ 文件夹中，您有一个使用音频的示例，您可以从中获得灵感。

# linux - 通过 ssh2、scp 发送文件

> ID：11289967
> 
> 赞同：0
> 
> 时间：2012-07-02T08:16:26.920
> 
> 标签：linux, ssh, scp

我需要使用 ssh2 将副本从 server1 发送到 server2。两者都在使用 ubuntu，我正在尝试使用 scp 命令发送它：

```
scp test.txt userName@server2_direction:/folder_destination 
```

但我收到一个错误：

```
test.txt: No such file or directory 
```

我尝试输入完整的 url：/users/asd/my_user/folder/test.txt，但它也不起作用。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:24:23.450

您在源计算机上的错误目录中。检查当前目录中是否有`test.txt`。

```
$ ls -l test.txt 
```

# c# - 复杂模型在发布后保持为空

> ID：11289969
> 
> 赞同：0
> 
> 时间：2012-07-02T08:16:39.947
> 
> 标签：c#, asp.net-mvc-3, razor

我的问题与[这个问题和答案有关](https://stackoverflow.com/questions/5197038/complex-models-and-partial-views-model-binding-issue-in-mvc3 "这个")

以下复杂模型：

```
public class EditSubmissionModel
{
    public string foo { get; set; }
    public Submission submission { get; set; }
} 
```

简单的模型

```
[Table(Name = "Submission")]
public class Submission
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int SubmissionId { get; set; }
    [Column]
    public string Title { get; set; }
} 
```

风景：

```
@model Project.WebUI.Models.EditSubmissionModel
@{
  ViewBag.Title = "editSubmission";
}

<h2>editSubmission</h2>
@using (Html.BeginForm())
{
    <legend>SubmissionModel</legend>

    @Html.EditorFor(m => m.foo)
    @Html.EditorFor(m => m.submission)

    <input type="submit" value="Save" />
} 
```

编辑器模板

```
@model Project.Domain.Entities.Submission
@Html.EditorFor(m => m.Title) 
```

控制器

```
 [Authorize]
    [HttpPost]
    public ActionResult editSubmission(string shortName, EditSubmissionModel model)
    {
      shortname = "second" (is ok)
      model.foo = aaa (also ok i edited it on the view)
      model.submission = null (not binded? or i dont know?) 
```

我看不到错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:54:04.450

状态没有复制。脚步：

1.  使用默认模板创建一个新的 ASP.NET MVC 3 应用程序
2.  定义 2 个模型：

    ```
    public class Submission
    {
        public int SubmissionId { get; set; }
        public string Title { get; set; }
    }

    public class EditSubmissionModel
    {
        public string foo { get; set; }
        public Submission submission { get; set; }
    } 
    ```

3.  修改`HomeController`使其看起来像这样：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(string shortName, EditSubmissionModel model)
        {
            return Content(model.submission.Title);
        }
    } 
    ```

4.  更新`~/Views/Home/Index.cshtml`视图，使其看起来像这样：

    ```
    @model EditSubmissionModel
    @using (Html.BeginForm())
    {
        <legend>SubmissionModel</legend>

        @Html.EditorFor(m => m.foo)
        @Html.EditorFor(m => m.submission)

        <input type="submit" value="Save" />
    } 
    ```

5.  `Submission`为类型 ( )添加自定义编辑器模板，`~/Views/Home/EditorTemplates/.cshtml`如下所示：

    ```
    @model Submission
    @Html.EditorFor(m => m.Title) 
    ```

6.  点击`Ctrl+F5`，填写表格并提交。正如完全预期的那样，您在`Title`文本框中输入的值将被正确绑定并显示在屏幕上。

所以我重复我在评论部分已经问过你的问题：你做了什么不同的事情？您回答说这是您的代码的复制粘贴，但正如我向您说明的那样（带有完整的分步指南），情况并非如此。

现在我有一个怀疑。您的实际 POST 操作如下所示：

```
public ActionResult editSubmission(string shortName, EditSubmissionModel submission) 
```

而不是这样：

```
public ActionResult editSubmission(string shortName, EditSubmissionModel model) 
```

注意参数名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:58:10.930

@Darin Dimitrov 你完全正确，我有什么不同。上面的代码完全没问题。问题是 get 命令看起来像：

```
[Authorize]
public ActionResult editSubmission(string confShortName, string submission)
{
  //do stuff
  return View();
} 
```

如果任何地方的 httpPost 与我的案例字符串提交和 Editsubmission.submission 中的 HttpGet 具有相同的名称，Modelbinder 就会出现问题。非常感谢您详细的分步建议！

# codeigniter - 将get变量传递给codeigniter中的索引页

> ID：11289972
> 
> 赞同：2
> 
> 时间：2012-07-02T08:16:44.000
> 
> 标签：codeigniter, url, controller, get

我正在使用 codeigniter 创建一个社交网络 Web 应用程序。Web 应用程序具有类似于 facebook 页面的功能。我需要完成一些似乎不可能的事情。由于 codeigniter 根据 URL 顺序识别控制器和函数，因此我无法直接将参数传递给控制器​​索引函数。我正在尝试以“www.mywebsite.com/page/CodeIgniter”的形式访问页面，其中“CodeIgniter”将是“页面”控制器将其作为参数接受并相应地解析页面的页面名称。由于 codeigniter 将 url 解析为“www.mywebsite.com/{controller}/{function}”，因此我无法像在 facebook 中那样链接到页面。谁能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:26:40.227

使用[路由](http://codeigniter.com/user_guide/general/routing.html)应该可以解决这个问题；

**配置/路由.php**

```
$route['page/(\w+)'] = 'page/index/$1'; 
```

这个例子很简单，但请注意它会“劫持”大多数只有 2 个段的调用。

如果您有一些要通过的值，请考虑以下事项：

```
$route['page/(CodeIgniter|Drupal|Joomla)'] = 'page/index/$1'; 
```

或前缀：

```
$route['page/cms_(\w+)'] = 'page/index/$1'; 
```

并`domain.com/page/cms_CodeIgniter`改为使用网址。

# matlab - 从 2D 坐标中找到真实世界坐标（3D）

> ID：11289974
> 
> 赞同：0
> 
> 时间：2012-07-02T08:16:52.080
> 
> 标签：matlab, 3d, computer-vision, projection

我有一张照片中某个特征的 x、y 坐标。我知道相机参数。我如何获得该特征的 3D 坐标（在 matlab 中）。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:12:29.993

看看这个：[http ://www.cim.mcgill.ca/~langer/558/4-cameramodel.pdf](http://www.cim.mcgill.ca/~langer/558/4-cameramodel.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:27:58.250

我以前见过的此类系统要求您知道相机的位置（纬度和经度）、相机指向的方向（方位角和仰角）以及视野。然后你将它投影到环境的地理数据上，然后你可以从那里做各种各样的事情，比如根据它在照片中的位置找到一个物体的 3D 位置。

# java - 在 Java 中，我想将一个数组拆分为更小的数组，其长度因输入的文本文件而异

> ID：11289975
> 
> 赞同：0
> 
> 时间：2012-07-02T08:16:56.830
> 
> 标签：java, arrays, filesplitting

到目前为止，我有 2 个数组：一个带有股票代码，一个带有文件名列表。我想要做的是从第二个数组的每个文件名中输入 .txt 文件，然后将此输入拆分为： 1\. 每个文件的数组 2\. 每个文件的每个部分的数组。

我有这个：

```
 ImportFiles f1 = new ImportFiles("File"); 
    for (String file : FileArray.filearray) { 
        if (debug) {
            System.out.println(file);
        }
        try { 
            String line;
            String fileext = "C:\\ASCIIpdbSKJ\\"+file+".txt";
            importstart = new BufferedReader(new FileReader(fileext));
            for (line = importstart.readLine(); line != null; line = importstart.readLine()) {
                importarray.add (line);
                if (debug){
                    System.out.println(importarray.size());
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        importarray.add ("End") 
```

这种方法可以创建一个包含所有文件的大数组，更改输入法以在输入时拆分它或拆分我拥有的大数组会更容易吗？

此时，股票代码数组无关紧要。一旦我将数组拆分，我就知道我将从那里去哪里。

谢谢。

编辑：我知道这段代码在 { } 方面是不完整的，但它只是打印流和调试错过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:55:37.960

如果您想从所有文件中获取带有文件名及其所有行的地图，以下是相关的代码部分：

```
Map<String, List<String>> fileLines = new HashMap<String, List<String>>();
for (String file : FileArray.filearray)
    BufferedReader reader = new BufferedReader(new FileReader(fileext));

    List<String> lines = new ArrayList<String>();
    while ((line = reader.readLine()) != null){
        lines.add(line);
    }

    fileLines.put(file, lines);
} 
```

# php - 在哪里放置默认内容？代码还是数据库？

> ID：11289978
> 
> 赞同：0
> 
> 时间：2012-07-02T08:17:09.557
> 
> 标签：php, mysql, database-design, configuration

我有一个设计问题。我们需要将一些默认的、系统定义的内容放入网站，但同时用户可以添加。所以我的问题是存储默认内容的最佳位置在哪里？我们应该遵循这样的原则，即如果它不可更改，那么它的配置应该与代码一起使用，还是应该将所有内容放在数据库中？一个例子：

基于正则表达式的验证规则。

假设我们希望用户能够选择他想在他的字段中使用的验证器 + 他可以创建自己的验证器。但是，某些验证器将是用户“无法触及”的。例如邮政编码正则表达式、电子邮件正则表达式——这些将可供每个用户开箱即用，并且他们不应该能够修改它们。

那么最好的做法是什么？在代码中保留“不可触碰”并与自定义内容的 DB 返回合并，还是将所有内容保留在 DB 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:32:50.233

任何可配置项都可以转到属性文件，因为它不需要在修改时编译，但它纯粹是内部的

如果您将配置公开给用户，数据库将是正确的选择

每个配置都有一个屏幕并更新表值。将来，如果您想删除访问权限，只需隐藏屏幕，但后端仍然可以使用该功能

# javascript - 谷歌浏览器 20 和卸载事件

> ID：11289979
> 
> 赞同：1
> 
> 时间：2012-07-02T08:17:19.057
> 
> 标签：javascript, google-chrome, javascript-events

当用户尝试关闭页面时，我需要执行一些 javascript 代码，而且我知道在 google chrome`unload`事件中并不总是被触发。我尝试了一些解决方法，但从上次更新（chrome 20.0.xxx）开始似乎没有任何效果。

```
window.onbeforeunload = function() {
    ...
}

window.onpagehide = function() {
    ...
} 
```

还有另一种方法（不使用外部库）吗？

# javascript - 在 jQuery 中放置 onload 函数的问题

> ID：11289982
> 
> 赞同：0
> 
> 时间：2012-07-02T08:17:29.120
> 
> 标签：javascript, jquery, javascript-events

我真的很喜欢关于重组以下功能的最佳方法的一些建议。我正在做的是设置文件阅读器并在 for 循环中刷新几个 div 内容。基本上，只要我在底部警报中说“alert(sparespacetofill);”，我的代码就可以完美运行。进行测试，但是当我删除此警报时，我的 div 的内容没有得到应有的刷新。显然，在函数完成运行之前没有调用“reader.onload”函数是一个问题，但我真的很困惑我应该如何以不同的方式构造它。

```
function setup_reader(file,number, sparespacetofill) {

var name = file.name;
var reader = new FileReader();

reader.onload = function(e) { 
$('#' + sparespacetofill).children('img').attr('src',e.target.result); 

if ($('#' + sparespacetofill).find("p").length <= 0 && sparespacetofill !='pic0' ) {
$('#' + sparespacetofill).append('<p id="deleteit">Delete<a></p>');  
}

}

reader.readAsDataURL(file);

//alert(sparespacetofill);///ISSUE IS IN HERE IF I UNCOMMENT THIS OUT

return sparespacetofill;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:14:13.093

你可以试试 Javascript setTimeout() 这样的方法，

```
setTimeout(return sparespacetofill, 3000) ; 
```

// 而不是这行

```
alert(sparespacetofill);///ISSUE IS IN HERE IF I UNCOMMENT THIS OUT

return sparespacetofill; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:10:46.690

当 onload 事件触发时，Ajax 操作是否完全完成？

如果是这样，无论您在函数返回时尝试执行什么功能，都应在 onload 函数结束时执行它。在那里调用一个函数，继续运行您正在运行的任何代码。

根据需要重新组织代码，使其可以分为两部分：在 setup_reader() 之前运行并调用 setup_reader() 的部分，以及在 onload 事件触发之后运行的部分。

# c# - 响应消息的内容类型 text/plain 与绑定的内容类型不匹配 (text/xml; charset=utf-8)

> ID：11289983
> 
> 赞同：1
> 
> 时间：2012-07-02T08:17:35.327
> 
> 标签：c#, web-services

当我连接到用 Apche Axis 编写的 Web 服务时，我收到以下错误：

```
The content type text/plain of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 1024 bytes of the response were: '\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0'. 
```

app.cofig 端点配置是：

```
<system.serviceModel>
        <bindings>
          <basicHttpBinding>
            <binding name="XXXSoapBinding" />
          </basicHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://www.XXX.net/services/XXXConnect"
            binding="basicHttpBinding" bindingConfiguration="XXXSoapBinding"
            contract="XXX.XXXConnect" name="XXXConnect" />
        </client>
      </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:12:01.620

您的 basicHttpBinding 和 wsHttpBinding 不匹配

```
Try with 

<system.serviceModel>
        <bindings>
          <basicHttpBinding>
            <binding name="XXXSoapBinding" />
          </basicHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://www.XXX.net/services/XXXConnect"
            binding="basicHttpBinding" bindingConfiguration="XXXSoapBinding"
            contract="XXX.XXXConnect" name="XXXConnect" />
        </client>
      </system.serviceModel> 
```

# ruby-on-rails - 显示最后修改的表/记录 Rails 3.2

> ID：11289990
> 
> 赞同：0
> 
> 时间：2012-07-02T08:18:06.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, audit, last-modified, acts-as-audited

我仍然无法弄清楚如何实现这一点，因为我是一个新手。有些人帮助我，说我必须使用已审核的，所以确实如此。这是我的控制器：

```
 def show

    add_breadcrumb 'Contract Bekijken', :contracten_path

    @contracten = Contracten.find(params[:id])

    @audits = @contracten.audits.collect { |a| a.created_at }

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @contracten }
    end
  end 
```

这是我的整个控制器的馅饼。[http://pastie.org/4270702](http://pastie.org/4270702)

但我不知道这是否正确或如何根据我的观点实施。

我希望有人真的可以提供帮助，因为我这周真的需要这个来工作。

谢谢。

* * *

我有一个 Rails 应用程序，我可以在其中将合同存储在数据库中，它还有数据库中的人员和工厂表。现在我想要一个最后修改的表。

我希望人们在数据库中更新/添加新记录时，它会在屏幕截图的右侧显示 div 中的修改。

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:14:53.643

从您的问题来看，您似乎只需要一个基于 updated_at 字段的列表。

怎么样 -`@contract_list = Contract.all.order( "updated_at DESC").limit(10)`

然后您可以遍历视图中的列表。

好看的页面！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:25:34.090

您需要的是编辑的审核历史记录。

[您可以通过挂钩到该模型的ActiveRecord 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)来实现自己（如果涉及到您真的想自己编写的自定义业务逻辑，这可能是有意义的）。

示例实现可能如下所示：

```
class Contract < ActiveRecord::Base
  after_save :audit

  def audit
    log = AuditLog.new(:user_id => current_user, :action => :update, ...)
    log.save
  end
end 
```

这将假设您有一个 AuditLog 模型，其中包含您要登录的适当字段，并且在您写入的审计方法中。

或者，更简单的方法是使用为您执行此操作的[Audited gem](https://github.com/collectiveidea/audited)（但可能有一些限制）。

从 Audited 的文档中，您似乎可以简单地获取一条`Contract`记录并使用该`audits`模型上的记录来访问已审核的信息。

样本

```
def show
  @contract = Contract.find(params[:id])
  @audits = @contract.audits.collect { |a| a.created_at }
end 
```

现在，您在变量中拥有了所有审计的时间戳，`@audits`并且可以使用`<% @audits.each do ...`.

# android - 如何使用对话框按钮取消在android中下载的文件？

> ID：11289994
> 
> 赞同：0
> 
> 时间：2012-07-02T08:18:15.423
> 
> 标签：android, dialog, android-asynctask

```
public class ExampleActivity extends Activity {

    public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
    private Button startBtn;
    private ProgressDialog mProgressDialog;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startBtn = (Button)findViewById(R.id.startBtn);
        startBtn.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                startDownload();
            }
        });
    }

    private void startDownload() {
        String url = "http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg";
        new DownloadFileAsync().execute(url);
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS:
            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setMessage("Downloading file..");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(true);
            mProgressDialog.setButton("Cancel", new CancelOnClickListener());

            mProgressDialog.show();
            return mProgressDialog;
        default:
            return null;
        }

    }
    private final class CancelOnClickListener implements DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int which) {
        ExampleActivity.this.finish();
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        new DownloadFileAsync().cancel(true);
    }

    }

class DownloadFileAsync extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

    try 
    {
    URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();

    int lenghtOfFile = conexion.getContentLength();
    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

    InputStream input = new BufferedInputStream(url.openStream());
    OutputStream output = new FileOutputStream("/sdcard/some_photo_from_gdansk_poland.jpg");

    byte data[] = new byte[1024];

    long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    }
    catch (Exception e) {

    }
    return null;

    }
    protected void onProgressUpdate(String... progress) {
         Log.d("ANDRO_ASYNC",progress[0]);
         mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

 }
} 
```

在这里如果我点击开始按钮，它将自动下载文件。但我想取消下载（如果我不喜欢），所以我把 `mProgressDialog.setButton("Cancel", new CancelOnClickListener());`它退出应用程序。但文件正在下载。如何更改功能在 doInBackground() 里面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:30:18.357

您正在使用 2 个不同的`DownloadFileAsync`in`startDownload()`和`CancelOnClickListener`. 试试下面的代码：

```
public class ExampleActivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

DownloadFileAsync dfa = new DownloadFileAsync();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startBtn = (Button)findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            startDownload();
        }
    });
}

private void startDownload() {
    String url = "http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg";
    dfa.execute(url);
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(true);
        mProgressDialog.setButton("Cancel", new CancelOnClickListener());

        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }

}
private final class CancelOnClickListener implements DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {
    ExampleActivity.this.finish();
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    dfa.cancel(true);
}

}

class DownloadFileAsync extends AsyncTask<String, String, String> {

@Override
protected void onPreExecute() {
    super.onPreExecute();
    showDialog(DIALOG_DOWNLOAD_PROGRESS);
}

@Override
protected String doInBackground(String... aurl) {
    int count;

try 
{
URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream("/sdcard/some_photo_from_gdansk_poland.jpg");

byte data[] = new byte[1024];

long total = 0;
if(!isCancelled()){
    while (!isCancelled() && (count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    input.close();
}
}
catch (Exception e) {

}
return null;

}
protected void onProgressUpdate(String... progress) {
     Log.d("ANDRO_ASYNC",progress[0]);
     mProgressDialog.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String unused) {
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
}

}
} 
```

# c# - 动态对象智能感知

> ID：11289995
> 
> 赞同：1
> 
> 时间：2012-07-02T08:18:16.513
> 
> 标签：c#, visual-studio, object, dynamic, intellisense

如果动态在编译时解析为对象，并且所有 .NET 类型都扩展了对象，那么对于 IntelliSense，为什么动态不像对象？每当我使用动态时，我都会收到一条消息“动态表达式。这将在运行时解决”。当然它也应该显示对象成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:19:43.830

Intellisense 不适用于动态类型。它在运行时解决。动态类型适用于静态类型以及匿名类型。

如果智能感知能够奏效，它就会违背动态性的目的。

[我认为你应该在这里](https://stackoverflow.com/questions/3442821/dynamic-vs-object-type)阅读 Jon Skeet 的回答`object vs dynamic`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:21:28.970

我怀疑它没有提供这些成员，因为任何方法都可能有任意数量的重载`object`- 在智能感知时间它显然无法知道。因此，它可能会为特定方法调用显示*错误的智能感知信息。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:22:20.117

最终因为所有动态操作都使用动态分派，即不是编译时链接，因此实际上不能保证*任何*成员都会实际存在 - 甚至`ToString`- 因为对象的动态层甚至可以自由拦截/替换/删除基本的操作`object`。因此，智能感知窗口试图显示*任何内容*都是不诚实的。

是的，它被编译为`object`，但这更多是因为（几乎）所有对象*都是* `object`（或可以这样装箱），因此运行时知道，无论动态对象是什么，它都可以作为对象引用保存。

但是，如果您想使用`object`成员，或者如果您希望智能感知显示它们，则必须先转换为`object`- 这本身也是一个动态操作。

这并不是说不可能为动态语言显示智能感知成员，当然可以（我相信 Iron Python 可以），只是在 C# 中它不是——而且合理地如此。