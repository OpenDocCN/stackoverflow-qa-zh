# StackOverflow 问答 10516000-10516999

# r - zoo/xts - 不能对 1-cell 子集进行数学运算？R 挂起

> ID：10516006
> 
> 赞同：5
> 
> 时间：2012-05-09T12:23:18.113
> 
> 标签：r, xts, zoo

我在 Windows 上使用最新版本的 R/xts/zoo：R 2.15、xts 0.8-6、zoo 1.7-7

我看到以下奇怪的行为，而以前的版本并非如此：

```
library(xts)
data(sample_matrix)
sample.xts <- as.xts(sample_matrix)

sample.xts[1, 2] - sample.xts[2,2]     # results in numeric(0)?!?!?!
(sample.xts[ 1, 2] - sample.xts[2,2])/sample.xts[3,1]  # if I run this twice R locks up 
```

在这里，我将 XTS 对象子集到单个单元格。减法不再起作用。此外，除法会导致 R 完全锁定。

有没有其他人看到这个？这是一个已知的错误还是我错过了什么？我可以在两台机器上重现这个。

会话信息（一些包被删除为机密）：

```
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] parallel  stats     graphics  utils     datasets  grDevices methods   base 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:37:05.670

你永远不能用不重叠的索引减去 xts/zoo 对象。算术运算总是在执行运算之前合并。您需要使用`coredata`您编写的减法来提供您期望的结果。

```
coredata(sample.xts[1,2]) - coredata(sample.xts[2,2]) 
```

我可以复制第二个问题，但我不确定这是否应该是修复的高优先级，因为它不适合 zoo/xts 习语并且会导致完全为空的 xts 对象。如果（某些）索引对齐，一切都很好。

```
(sample.xts[1,2] - sample.xts[1,3]) / sample.xts[1,4]
(sample.xts[2,2] - sample.xts[1:2,3]) / sample.xts[2:3,4] 
```

# python - 运行 nginx + python flask + python-daemon 时：上游发送不支持的 FastCGI 协议版本 91

> ID：10516007
> 
> 赞同：3
> 
> 时间：2012-05-09T12:23:22.483
> 
> 标签：python, nginx, daemon, fastcgi, flask

我正在使用 Python Flask 通过 FCGI 和 nginx 运行 Python for web。我的 fcgi 后端是这样设置的：

```
#!/usr/bin/env python
import argparse, daemon, os
from flup.server.fcgi import WSGIServer
from fwd_msg import app

SOCKET_LOCATION = '/tmp/fingerprinter-fcgi.sock'

if __name__ == '__main__':
    # arg parse (and daemonize)
    arg_parser = argparse.ArgumentParser()
    arg_parser.add_argument('--daemon', action='store_true', default=False, help='Run as daemon')
    arg_parser.add_argument('--cwd', action='store', default='/', 
                            help='Full path of the working directory to which the process should change on daemon start.')
    arg_parser.add_argument('--uid', action='store', type=int, default=os.getuid(),
        help='The user ID ("UID") value and group ID ("GID") value to switch the process to on daemon start.')
    args = vars(arg_parser.parse_args())

    if args['daemon']:
        context = daemon.DaemonContext(working_directory=args['cwd'], uid=args['uid'])
        with context:
            WSGIServer(app, bindAddress=SOCKET_LOCATION).run()
    else:
        WSGIServer(app, bindAddress=SOCKET_LOCATION).run() 
```

如果我在没有 daemon 参数的情况下运行 WSGIServer，它工作正常。

但是，如果我使用 daemon 参数运行它，我会在 nginx 日志中收到此错误，而对服务器的任何请求都以“502 BAD GATEWAY”结尾：

```
2012/05/09 12:16:00 [error] 30895#0: *30 upstream sent unsupported FastCGI protocol version: 91 while reading response header from upstream, client: XXX.XXX.XXX.XXX, server: localhost, request: "POST / HTTP/1.1", upstream: "fastcgi://unix:/tmp/fingerprinter-fcgi.sock:", host: "XXX.XXX.XXX.XXX" 
```

任何想法为什么会发生这种情况以及如何防止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:59:47.657

事实证明，DaemonContext 关闭了所有打开的文件描述符，所以基本上应该有一个函数来实例化 WSGIServer，以及应用程序和所有可以在 DaemonContext 内部打开文件描述符的东西。

还要确保工作目录归用户所有，或者至少具有允许具有给定 UID 的用户在其中写入的权限（不推荐）。

例子：

```
#!/usr/bin/env python
import argparse, daemon, os
from flup.server.fcgi import WSGIServer
from fwd_msg import app

SOCKET_LOCATION = '/tmp/fingerprinter-fcgi.sock'

def main():
    app = flask.Flask(__name__)
    @app.route('/', methods=['GET'])
    def index():
        pass # your actions here

if __name__ == '__main__':
    # arg parse (and daemonize)
    arg_parser = argparse.ArgumentParser()
    arg_parser.add_argument('--daemon', action='store_true', default=False, help='Run as daemon')
    arg_parser.add_argument('--cwd', action='store', default='/', 
                            help='Full path of the working directory to which the process should change on daemon start.')
    arg_parser.add_argument('--uid', action='store', type=int, default=os.getuid(),
        help='The user ID ("UID") value and group ID ("GID") value to switch the process to on daemon start.')
    args = vars(arg_parser.parse_args())

    if args['daemon']:
        context = daemon.DaemonContext(working_directory=args['cwd'], uid=args['uid'])
        with context:
            main()
    else:
        main() 
```

# iphone - 保留 push.php 文件并使用 MAMP 测试 APNS 连接？

> ID：10516015
> 
> 赞同：0
> 
> 时间：2012-05-09T12:24:00.477
> 
> 标签：iphone, ios, mamp, apple-push-notifications

我正在按照这些教程启用 Apple Push Notification Server 将通知发送到设备。

[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

从本教程中，我下载了 MAMP 并“创建了用于存储用户详细信息的数据库”，并且还“从教程中下载了 PushChatServer 文件夹”。我在数据库中存储了 UDID、设备令牌（来自 APNS）、名称、代码。现在我想从我的本地主机发送推送通知。

我将 .pem 文件、push.php、push-confi.php 保存在我的桌面上。从教程这部分我不明白：

> 在 PushChatServer 目录中有一个 push 文件夹，其中包含发送推送请求所需的 PHP 脚本。您应该将这些文件放在服务器上无法从 Web 访问的目录中，即在 DocumentRoot 之外。这很重要，因为您不希望您网站的访问者下载您的私钥！（在我们的 MAMP 设置中，这已经被处理了。）
> 
> push 文件夹中最重要的脚本是 push.php。此脚本应作为服务器上的后台进程运行。每隔几秒钟，它就会检查是否有新的推送通知要发送出去。如果是这样，它将它们发送到 Apple 推送通知服务。
> 
> 首先，我们需要编辑文件 push_config.php，其中包含 push.php 的配置选项。您可能需要更改私钥的密码，可能还需要更改数据库密码。
> 
> 与服务器 API 一样，推送脚本可以在开发模式或生产模式下运行。在开发模式下，它与 APNS 沙箱服务器通信，并使用您的开发 SSL 证书。您应该将开发模式与应用程序的调试版本结合使用。生产模式应该用于您的应用的 Ad Hoc 和 App Store 构建。

我想将我的 Push 文件夹保存在我的 Mac 中的位置。如何检查 APNS 连接？

我将 Push 文件夹（其中包含 Push.php）放在我的目录中以从终端读取。而且我还将应用程序文件夹粘贴到我的目录中。

教程说在终端中使用这个命令

```
$ /Applications/MAMP/bin/php5.2/bin/php push.php development 
```

但是，在 MAMP 我有这条路

```
/Users/creagx/Applications/MAMP/bin/php/php5.5.17/bin/php 
```

我需要放置 Push 文件夹和 MAMP 的位置。

我将 .pem 文件和 push.php 文件保存在此路径中：`/Users/gopi/Desktop/APNSsample/push.php` 然后我尝试使用这样的终端应用程序将我的 .pem (SSL) 连接到 APNS

```
unknownc42c032e8297:~ name$ cd /Users/creagx/Desktop/APNSsample
unknownc42c032e8297:APNSsample name$ telnet gateway.sandbox.push.apple.com 2195
Trying 17.149.34.66...
Connected to gateway.sandbox.push-apple.com.akadns.net.
Escape character is '^]'.
^C
Connection closed by foreign host.
unknownc42c032e8297:APNSsample name$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert NameAPNCert.pem -key NameAPNKey.pem
Enter pass phrase for NameAPNKey.pem:
CONNECTED(00000003)
depth=1 /C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
verify error:num=20:unable to get local issuer certificate
verify return:0
---
Certificate chain
 0 s:/C=US/ST=California/L=Cupertino/O=Apple Inc/OU=Internet Services/CN=gateway.sandbox.push.apple.com
   i:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
 1 s:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
   i:/O=Entrust.net/OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.)/OU=(c) 1999 Entrust.net Limited/CN=Entrust.net Certification Authority (2048)
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIEZTCCA02gAwIBAgIESyDhfjANBgkqhkiG9w0BAQUFADCBsTELMAkGA1UEBhMC
VVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xOTA3BgNVBAsTMHd3dy5lbnRydXN0
Lm5ldC9ycGEgaXMgaW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTEfMB0GA1UECxMW
KGMpIDIwMDkgRW50cnVzdCwgSW5jLjEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZp
Y2F0aW9uIEF1dGhvcml0eSAtIEwxQzAeFw0xMDA0MTMyMzM0MzNaFw0xMjA1MzEw
MDA0MjdaMIGPMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTESMBAG
A1UEBxMJQ3VwZXJ0aW5vMRIwEAYDVQQKEwlBcHBsZSBJbmMxGjAYBgNVBAsTEUlu
dGVybmV0IFNlcnZpY2VzMScwJQYDVQQDEx5nYXRld2F5LnNhbmRib3gucHVzaC5h
cHBsZS5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAM5NngiDMFpGBMmb
8tG2MRhLEdsx553Xjq+5C/c0mtildwhnC1X0LWKUexWdQsMchniac+WnHFSs3YMJ
JJ55kQSB6wqK/WNcxsUn8pMkMsvk3YZFM7TsaKQvFOeieiXCSJVlR3grm3+dilv1
Br+SUqv8JrgU3ijmoQO63vkb8B/hAgMBAAGjggEnMIIBIzALBgNVHQ8EBAMCBaAw
HQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMDMGA1UdHwQsMCowKKAmoCSG
Imh0dHA6Ly9jcmwuZW50cnVzdC5uZXQvbGV2ZWwxYy5jcmwwMwYIKwYBBQUHAQEE
JzAlMCMGCCsGAQUFBzABhhdodHRwOi8vb2NzcC5lbnRydXN0Lm5ldDBABgNVHSAE
OTA3MDUGCSqGSIb2fQdLAjAoMCYGCCsGAQUFBwIBFhpodHRwOi8vd3d3LmVudHJ1
c3QubmV0L3JwYTAfBgNVHSMEGDAWgBQe8auJBvhJDwEzd+4Ueu4ZfJMoTTAdBgNV
HQ4EFgQUNyg/64Sjw/+b4YOwC8E/c+jemRgwCQYDVR0TBAIwADANBgkqhkiG9w0B
AQUFAAOCAQEAk9Ij+NCp+323+4vBqbA0fT9ZCROptPqNIshY5uEvaWUaW5hsoLUm
fsMJMueqzDaoj4yPD8iCCZq1Mp8tM8WB2mG1zIxTLshlhRgDDUF11IbUUBHv/ZhU
RzXewQD6pazQmsBPuR0vP3mmWbKqmZOiv2yWSGlQmWGW4m6RQwjYYj8UqqFEdinV
g1+qY6/muTpaCiygDjJZBlv9P6bwwP9FB8OJf5tGECvvxXad3PK/oiI77aLTYSVr
SA0oisXCiqcgTKQq5BV5M3fQQ4ZS73aBKLI0wPYc0AASD5WdtPTGTvmEbhO4KeaU
0SL85Prf8uSsDOLvn3656awLz/H/yzrf/g==
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Cupertino/O=Apple Inc/OU=Internet Services/CN=gateway.sandbox.push.apple.com
issuer=/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
---
No client certificate CA names sent
---
SSL handshake has read 2549 bytes and written 2017 bytes
---
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID: 
    Session-ID-ctx: 
    Master-Key: 729CC0899B36143DAC78D40B2C31ECB71C81A3BD8DC5CFD6D71AC7885DD2E63DCD47096E97A1B3AF032A8D7D48BF73DA
    Key-Arg   : None
    Start Time: 1336636910
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
---
name
closed
unknownc42c032e8297:APNSsample name$ php push.php
Usage: php push.php development|production
unknownc42c032e8297:APNSsample name$ development
-bash: development: command not found
unknownc42c032e8297:APNSsample name$ php push.php development 
```

我在 push_development.log 中收到了这样的 APNS 连接状态，

```
2012-05-10T13:32:34+05:30 Push script started (development mode)
2012-05-10T13:32:34+05:30 Exiting with fatal error: exception 'PDOException' with message 'SQLSTATE[HY000] [2002] No such file or directory' in /Users/name/Desktop/APNSsample/push.php:82
Stack trace:
#0 /Users/creagx/name/APNSsample/push.php(82): PDO->__construct('mysql:host=loca...', 'pushchat', 'name', Array)
#1 /Users/creagx/name/APNSsample/push.php(36): APNS_Push->__construct(Array)
#2 {main} 
```

我不明白我做错了什么？我正在使用 MAMP 的数据库。我已将 devicetoken、消息（有效负载）存储在 MAMP SQL 数据库中。

终端：

```
unknownc42c032e8297:~ gopi$ cd /Users/gopi/Desktop/APNSsample/
unknownc42c032e8297:APNSsample gopi$ php push.php
Usage: php push.php development|production
unknownc42c032e8297:APNSsample gopi$ php push.php development
unknownc42c032e8297:APNSsample gopi$ 
```

在我的 push_development.log 文件中：

```
2012-05-10T16:08:12+05:30 Push script started (development mode)
2012-05-10T16:08:12+05:30 Exiting with fatal error: exception 'PDOException' with message 'SQLSTATE[HY000] [2002] No such file or directory' in /Users/gopi/Desktop/APNSsample/push.php:82
Stack trace:
#0 /Users/gopi/Desktop/APNSsample/push.php(82): PDO->__construct('mysql:host=loca...', 'pushchat', 'gopi', Array)
#1 /Users/gopi/Desktop/APNSsample/push.php(36): APNS_Push->__construct(Array)
#2 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:33:37.923

将两个 .pem 文件复制到同一目录后（如果是桌面）。在终端中粘贴以下代码：

'cd /Users/gopi/Desktop/APNSSample/'

点击回车，你应该没有错误，只是终端中的一个新行。现在测试连接，粘贴另一个代码后在终端中粘贴以下代码：

' php 你的phpfile.php '

点击回车，你应该得到三行代码，表明 php 文件能够到达 APNS 服务器。如果它工作，你没关系，否则告诉我！

# extjs4 - 子阵列模型与 gridpanel extjs 4 的映射问题

> ID：10516019
> 
> 赞同：0
> 
> 时间：2012-05-09T12:24:12.407
> 
> 标签：extjs4, extjs-mvc

stackoverflow 团队成员我在将 json 子数组数据显示到我的网格面板时遇到问题，我的 json 数据在下面

```
{
    "total": 11,
    "success": true,
    "employeetaskdetdata": [{
        "subject": "Work in progress",
        "employee": {
            "username": "yogen",
            "designation": {
                "department": {
                    "company": {
                        "cmpname": "Kintu Designs Pvt ltd",
                        "cmptitle": "Kintu Designs Pvt ltd",
                        "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                        "cmpfax": "8128812153",
                        "cmpcontact": "8128812153",
                        "cmpwebsite": "www.kintudesigns.com",
                        "cmpemail1": "yaryan997@gmail.com",
                        "cmpemail2": "yaryan997@gmail.com",
                        "cmpcountry": "India",
                        "cmpstate": "Gujarat",
                        "cmpcity": "Surat",
                        "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                        "cmplogo": "calendar.png",
                        "cmplogopath": "upload/images/",
                        "cmpcreatedby": 1,
                        "cmpcreatedon": 1335764510000,
                        "cmpmodifiedon": 1335764510000,
                        "cmpmodifiedby": 0,
                        "id": 1
                    },
                    "departname": "Programmer",
                    "createdby": 1,
                    "createdon": 1335764655000,
                    "modifiedby": 1,
                    "modifiedon": 1335764655000,
                    "departdescr": "<b>?Programmer</b>",
                    "id": 2
                },
                "createdby": 1,
                "createdon": 1335764825000,
                "modifiedby": 1,
                "modifiedon": 1335764825000,
                "designame": "Senior JAVA Programmer",
                "desigdescr": "<b>?Senior JAVA Programmer</b>",
                "id": 6
            },
            "createdby": 1,
            "createdon": 1335765074000,
            "modifiedby": 1,
            "modifiedon": 1335765074000,
            "dateofbirth": 1335810600000,
            "joindate": 1337106600000,
            "firstname": "Yogendra",
            "surname": "Singh",
            "gender": "M",
            "marital": "U",
            "nationality": "",
            "contactno": "",
            "mobileno": "",
            "email": "",
            "otheremail": "",
            "fathername": "",
            "mothername": "",
            "accountno": "",
            "salary": "",
            "bank": {
                "bankname": "ICICI Bank",
                "bankaddress": "ICICI Bank Nanpura",
                "id": 1
            },
            "address": "",
            "id": 6,
            "password": "123"
        },
        "todaysdate": "2012-05-05",
        "createdby": 6,
        "createdon": 1336203851000,
        "modifiedby": 6,
        "modifiedon": 1336203851000,
        "project": {
            "company": {
                "cmpname": "Kintu Designs Pvt ltd",
                "cmptitle": "Kintu Designs Pvt ltd",
                "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                "cmpfax": "8128812153",
                "cmpcontact": "8128812153",
                "cmpwebsite": "www.kintudesigns.com",
                "cmpemail1": "yaryan997@gmail.com",
                "cmpemail2": "yaryan997@gmail.com",
                "cmpcountry": "India",
                "cmpstate": "Gujarat",
                "cmpcity": "Surat",
                "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                "cmplogo": "calendar.png",
                "cmplogopath": "upload/images/",
                "cmpcreatedby": 1,
                "cmpcreatedon": 1335764510000,
                "cmpmodifiedon": 1335764510000,
                "cmpmodifiedby": 0,
                "id": 1
            },
            "createdby": 1,
            "createdon": 1335765435000,
            "modifiedby": 1,
            "modifiedon": 1335765435000,
            "projectname": "Project I",
            "projecttitle": "Project I",
            "projectdesc": "<b>Kintu Design Pvt ltd new Project I</b>",
            "projectstart": 1335810600000,
            "projectend": 1336761000000,
            "id": 1
        },
        "task": {
            "duration": 4.0,
            "employee": [{
                "username": "hiren",
                "designation": {
                    "department": {
                        "company": {
                            "cmpname": "Kintu Designs Pvt ltd",
                            "cmptitle": "Kintu Designs Pvt ltd",
                            "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                            "cmpfax": "8128812153",
                            "cmpcontact": "8128812153",
                            "cmpwebsite": "www.kintudesigns.com",
                            "cmpemail1": "yaryan997@gmail.com",
                            "cmpemail2": "yaryan997@gmail.com",
                            "cmpcountry": "India",
                            "cmpstate": "Gujarat",
                            "cmpcity": "Surat",
                            "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                            "cmplogo": "calendar.png",
                            "cmplogopath": "upload/images/",
                            "cmpcreatedby": 1,
                            "cmpcreatedon": 1335764510000,
                            "cmpmodifiedon": 1335764510000,
                            "cmpmodifiedby": 0,
                            "id": 1
                        },
                        "departname": "Programmer",
                        "createdby": 1,
                        "createdon": 1335764655000,
                        "modifiedby": 1,
                        "modifiedon": 1335764655000,
                        "departdescr": "<b>?Programmer</b>",
                        "id": 2
                    },
                    "createdby": 1,
                    "createdon": 1335764755000,
                    "modifiedby": 1,
                    "modifiedon": 1335764755000,
                    "designame": "Senior PHP Programmer",
                    "desigdescr": "<b>?Senior PHP Programmer</b>",
                    "id": 3
                },
                "createdby": 1,
                "createdon": 1335765018000,
                "modifiedby": 1,
                "modifiedon": 1335765018000,
                "dateofbirth": null,
                "joindate": null,
                "firstname": "Hiren",
                "surname": "Patel",
                "gender": "M",
                "marital": "U",
                "nationality": "",
                "contactno": "",
                "mobileno": "",
                "email": "",
                "otheremail": "",
                "fathername": "",
                "mothername": "",
                "accountno": "",
                "salary": "",
                "bank": {
                    "bankname": "ICICI Bank",
                    "bankaddress": "ICICI Bank Nanpura",
                    "id": 1
                },
                "address": "",
                "id": 4,
                "password": "123"
            }, {
                "username": "yogen",
                "designation": {
                    "department": {
                        "company": {
                            "cmpname": "Kintu Designs Pvt ltd",
                            "cmptitle": "Kintu Designs Pvt ltd",
                            "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                            "cmpfax": "8128812153",
                            "cmpcontact": "8128812153",
                            "cmpwebsite": "www.kintudesigns.com",
                            "cmpemail1": "yaryan997@gmail.com",
                            "cmpemail2": "yaryan997@gmail.com",
                            "cmpcountry": "India",
                            "cmpstate": "Gujarat",
                            "cmpcity": "Surat",
                            "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                            "cmplogo": "calendar.png",
                            "cmplogopath": "upload/images/",
                            "cmpcreatedby": 1,
                            "cmpcreatedon": 1335764510000,
                            "cmpmodifiedon": 1335764510000,
                            "cmpmodifiedby": 0,
                            "id": 1
                        },
                        "departname": "Programmer",
                        "createdby": 1,
                        "createdon": 1335764655000,
                        "modifiedby": 1,
                        "modifiedon": 1335764655000,
                        "departdescr": "<b>?Programmer</b>",
                        "id": 2
                    },
                    "createdby": 1,
                    "createdon": 1335764825000,
                    "modifiedby": 1,
                    "modifiedon": 1335764825000,
                    "designame": "Senior JAVA Programmer",
                    "desigdescr": "<b>?Senior JAVA Programmer</b>",
                    "id": 6
                },
                "createdby": 1,
                "createdon": 1335765074000,
                "modifiedby": 1,
                "modifiedon": 1335765074000,
                "dateofbirth": 1335810600000,
                "joindate": 1337106600000,
                "firstname": "Yogendra",
                "surname": "Singh",
                "gender": "M",
                "marital": "U",
                "nationality": "",
                "contactno": "",
                "mobileno": "",
                "email": "",
                "otheremail": "",
                "fathername": "",
                "mothername": "",
                "accountno": "",
                "salary": "",
                "bank": {
                    "bankname": "ICICI Bank",
                    "bankaddress": "ICICI Bank Nanpura",
                    "id": 1
                },
                "address": "",
                "id": 6,
                "password": "123"
            }],
            "createdby": 1,
            "createdon": 1336460152000,
            "modifiedby": 1,
            "modifiedon": 1336460152000,
            "project": {
                "company": {
                    "cmpname": "Kintu Designs Pvt ltd",
                    "cmptitle": "Kintu Designs Pvt ltd",
                    "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                    "cmpfax": "8128812153",
                    "cmpcontact": "8128812153",
                    "cmpwebsite": "www.kintudesigns.com",
                    "cmpemail1": "yaryan997@gmail.com",
                    "cmpemail2": "yaryan997@gmail.com",
                    "cmpcountry": "India",
                    "cmpstate": "Gujarat",
                    "cmpcity": "Surat",
                    "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                    "cmplogo": "calendar.png",
                    "cmplogopath": "upload/images/",
                    "cmpcreatedby": 1,
                    "cmpcreatedon": 1335764510000,
                    "cmpmodifiedon": 1335764510000,
                    "cmpmodifiedby": 0,
                    "id": 1
                },
                "createdby": 1,
                "createdon": 1335765435000,
                "modifiedby": 1,
                "modifiedon": 1335765435000,
                "projectname": "Project I",
                "projecttitle": "Project I",
                "projectdesc": "<b>Kintu Design Pvt ltd new Project I</b>",
                "projectstart": 1335810600000,
                "projectend": 1336761000000,
                "id": 1
            },
            "percentdone": 55,
            "durationunit": "d",
            "startdate": 1336415400000,
            "parentid": 2,
            "taskindex": 0,
            "taskname": "Sub Task 2 1",
            "enddate": 1336761000000,
            "priority": 2,
            "id": 3,
            "depth": 2
        },
        "percentdone": 20,
        "totalworkedhrs": -9.5,
        "starttime": "09:00:00",
        "finishtime": "00:00:00",
        "id": 1,
        "description": "<b>Work in progress</b>",
        "hours": 0,
        "minutes": 30
    }, {
        "subject": "Work in progresss",
        "employee": {
            "username": "yogen",
            "designation": {
                "department": {
                    "company": {
                        "cmpname": "Kintu Designs Pvt ltd",
                        "cmptitle": "Kintu Designs Pvt ltd",
                        "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                        "cmpfax": "8128812153",
                        "cmpcontact": "8128812153",
                        "cmpwebsite": "www.kintudesigns.com",
                        "cmpemail1": "yaryan997@gmail.com",
                        "cmpemail2": "yaryan997@gmail.com",
                        "cmpcountry": "India",
                        "cmpstate": "Gujarat",
                        "cmpcity": "Surat",
                        "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                        "cmplogo": "calendar.png",
                        "cmplogopath": "upload/images/",
                        "cmpcreatedby": 1,
                        "cmpcreatedon": 1335764510000,
                        "cmpmodifiedon": 1335764510000,
                        "cmpmodifiedby": 0,
                        "id": 1
                    },
                    "departname": "Programmer",
                    "createdby": 1,
                    "createdon": 1335764655000,
                    "modifiedby": 1,
                    "modifiedon": 1335764655000,
                    "departdescr": "<b>?Programmer</b>",
                    "id": 2
                },
                "createdby": 1,
                "createdon": 1335764825000,
                "modifiedby": 1,
                "modifiedon": 1335764825000,
                "designame": "Senior JAVA Programmer",
                "desigdescr": "<b>?Senior JAVA Programmer</b>",
                "id": 6
            },
            "createdby": 1,
            "createdon": 1335765074000,
            "modifiedby": 1,
            "modifiedon": 1335765074000,
            "dateofbirth": 1335810600000,
            "joindate": 1337106600000,
            "firstname": "Yogendra",
            "surname": "Singh",
            "gender": "M",
            "marital": "U",
            "nationality": "",
            "contactno": "",
            "mobileno": "",
            "email": "",
            "otheremail": "",
            "fathername": "",
            "mothername": "",
            "accountno": "",
            "salary": "",
            "bank": {
                "bankname": "ICICI Bank",
                "bankaddress": "ICICI Bank Nanpura",
                "id": 1
            },
            "address": "",
            "id": 6,
            "password": "123"
        },
        "todaysdate": "2012-05-05",
        "createdby": 6,
        "createdon": 1336204557000,
        "modifiedby": 6,
        "modifiedon": 1336204557000,
        "project": {
            "company": {
                "cmpname": "Kintu Designs Pvt ltd",
                "cmptitle": "Kintu Designs Pvt ltd",
                "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                "cmpfax": "8128812153",
                "cmpcontact": "8128812153",
                "cmpwebsite": "www.kintudesigns.com",
                "cmpemail1": "yaryan997@gmail.com",
                "cmpemail2": "yaryan997@gmail.com",
                "cmpcountry": "India",
                "cmpstate": "Gujarat",
                "cmpcity": "Surat",
                "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                "cmplogo": "calendar.png",
                "cmplogopath": "upload/images/",
                "cmpcreatedby": 1,
                "cmpcreatedon": 1335764510000,
                "cmpmodifiedon": 1335764510000,
                "cmpmodifiedby": 0,
                "id": 1
            },
            "createdby": 1,
            "createdon": 1335765435000,
            "modifiedby": 1,
            "modifiedon": 1335765435000,
            "projectname": "Project I",
            "projecttitle": "Project I",
            "projectdesc": "<b>Kintu Design Pvt ltd new Project I</b>",
            "projectstart": 1335810600000,
            "projectend": 1336761000000,
            "id": 1
        },
        "task": {
            "duration": 4.0,
            "employee": [{
                "username": "hiren",
                "designation": {
                    "department": {
                        "company": {
                            "cmpname": "Kintu Designs Pvt ltd",
                            "cmptitle": "Kintu Designs Pvt ltd",
                            "cmpdesc": "<b>D-104 Toral Appartment Surat,<br>Timalyabad.</b>",
                            "cmpfax": "8128812153",
                            "cmpcontact": "8128812153",
                            "cmpwebsite": "www.kintudesigns.com",
                            "cmpemail1": "yaryan997@gmail.com",
                            "cmpemail2": "yaryan997@gmail.com",
                            "cmpcountry": "India",
                            "cmpstate": "Gujarat",
                            "cmpcity": "Surat",
                            "cmpaddress": "D-104 Toral Appartment Surat,\nTimalyabad.",
                            "cmplogo": "calendar.png",
                            "cmplogopath": "upload/images/",
                            "cmpcreatedby": 1,
                            "cmpcreatedon": 1335764510000,
                            "cmpmodifiedon": 1335764510000,
                            "cmpmodifiedby": 0,
                            "id": 1
                        },
                        "departname": "Programmer",
                        "createdby": 1,
                        "createdon": 1335764655000,
                        "modifiedby": 1,
                        "modifiedon": 1335764655000,
                        "departdescr": "<b>?Programmer</b>",
                        "id": 2
                    },
                    "createdby": 1,
                    "createdon": 1335764755000,
                    "modifiedby": 1,
                    "modifiedon": 1335764755000,
                    "designame": "Senior PHP Programmer",
                    "desigdescr": "<b>?Senior PHP Programmer</b>",
                    "id": 3
                },
                "createdby": 1,
                "createdon": 1335765018000,
                "modifiedby": 1,
                "modifiedon": 1335765018000,
                "dateofbirth": null,
                "joindate": null,
                "firstname": "Hiren",
                "surname": "Patel",
                "gender": "M",
                "marital": "U",
                "nationality": "",
                "contactno": "",
                "mobileno": "",
                "email": "",
                "otheremail": "",
                "fathername": "",
                "mothername": "",
                "accountno": "",
                "salary": "",
                "bank": {
                    "bankname": "ICICI Bank",
                    "bankaddress": "ICICI Bank Nanpura",
                    "id": 1
                },
                "address": "",
                "id": 4,
                "password": "123"
            }]
} 
```

我的模型在下面

```
Ext.define('DEV.model.employeetaskdetModel', {
    extend: 'Ext.data.Model',
    fields : [
              { name: 'id'},
              { name: 'taskname', mapping:'task.taskname'},
              { name: 'firstname', mapping: 'employee.firstname'},
              { name: 'employee',type: 'auto'},
              { name: 'percentdone'}
          ]
}); 
```

我的网格面板列在下面

```
columns: [ {
     xtype: 'gridcolumn',
     dataIndex: 'percentdone',
     text: 'Percent Done'
 }, {
     xtype: 'gridcolumn',
     dataIndex: 'firstname',
     text: 'First Name'
 }] 
```

我无法在我的 gridPanel 中显示名字。但是，当我用下面的代码更改名字列时，它会正确显示名字网格面板。

```
{
         xtype: 'gridcolumn',
         dataIndex: 'employee',
         text: 'User Name',
         renderer: function (employee) {
             var result = [];
             employee = employee || [];
             var value = employee.firstname;
             if (value) {
                 result.push(value);
             }
             return result;
             console.log(employee.firstname);
         }
     }, 
```

请告诉我为什么我的网格面板没有直接显示用户的名字。我的代码有什么问题。以及为什么当我添加渲染器函数时它会显示数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:39:42.777

我遇到了类似的问题并解决了。

映射嵌套的 json 数据不需要映射属性。

模型：

```
Ext.define("Model", {
    extend: "Ext.data.Model",
    fields: [
        {name: "id", type: "int"},
        {name: "name.name"},
        {name: "phone", mapping: "name.phone"},
        {name: "descr", type: "string", mapping:'description'}
    ]
}); 
```

存储我们将从 jsfiddle 测试 echo ajax 服务收到的数据：

```
var Store = Ext.create("Ext.data.Store", {
    model: "Model",
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: '/echo/json/',
        //
        actionMethods: {read: 'POST'}, // echo ajax service required
        extraParams: {
            json: Ext.JSON.encode({
                root: [
                    {id: 1, name: {name:"John", phone: "123"}, description:"Fapfapfap"},
                    {id: 2, name: {name:"Danny", phone: "234"}, description:"Boobooboo"},
                    {id: 3, name: {name:"Tom", phone: "345"}, description:"Tralala"},
                    {id: 4, name: {name:"Jane", phone: "456"}, description:"Ololo"},
                ]
                })
        },
        reader: {
            type: 'json',
            root: 'root'
        }
    },
}); 
```

网格：

```
Ext.create("Ext.grid.Panel", {
    store: Store,
    columns: [
        {dataIndex: "id", header:"ID"},
        {dataIndex: "name.name", header:"Name", flex: 1, editor: "textfield"},
        {dataIndex: "phone", header:"Phone", flex: 1, editor: "textfield"},
        {dataIndex: "descr", header: "Description", flex: 2, editor: "htmleditor"}
    ],
    renderTo: Ext.getBody(),
}); 
```

如果没有其他问题，这应该可以工作。

Here you can see work example [http://jsfiddle.net/Fgh7z/1/](http://jsfiddle.net/Fgh7z/1/)

# google-maps - 如何在 Gmap V3 中稍作延迟后加载 InfoWindow？

> ID：10516025
> 
> 赞同：2
> 
> 时间：2012-05-09T12:24:32.900
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, infowindow

我的一个应用程序在 Google 地图上显示了多个位置标记。如何在短暂延迟后显示 InfoWindow？

这是我的脚本：

```
google.maps.event.addListener(marker, 'mouseover', onMarkerClick);

//create a function that will open an InfoWindow for a marker mouseover
var onMarkerClick = function() {
    var marker = this;
    var latLng = marker.getPosition();
    infowindow.setContent(
        '<h3>Marker position is:</h3>' + latLng.lat() + ', ' + latLng.lng());
    infowindow.open(map, marker);
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:00:32.467

`setTimeout`应该做你想做的。该数字是毫秒延迟。

```
setTimeout(function() { infowindow.open(map, marker) }, 500); 
```

# java - Java服务器套接字不重用地址

> ID：10516030
> 
> 赞同：2
> 
> 时间：2012-05-09T12:24:50.880
> 
> 标签：java, serversocket, time-wait

我在 linux 中使用服务器套接字，我需要在 time_wait TCP 状态到期之前关闭它并重新打开。我在绑定之前设置了服务器套接字的重用地址选项，但它仍然抛出 BindException。我也试过这个[http://meteatamel.wordpress.com/2010/12/01/socket-reuseaddress-property-and-linux/](http://meteatamel.wordpress.com/2010/12/01/socket-reuseaddress-property-and-linux/)但它仍然不起作用。

要打开服务器套接字，我使用：

```
ServerSocket ss = new ServerSocket();
ss.setReuseAddress(true);
ss.bind(new InetSocketAddress(12345)); 
```

并关闭：

```
ss.close(); 
```

“地址已在使用中”BindException 在绑定调用中被抛出。

此代码生成异常：

```
for (int i = 0; i < 2; i++) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    final ServerSocket ss = new ServerSocket();
                    ss.setReuseAddress(true);
                    ss.bind(new InetSocketAddress(12345));
                    Socket s = ss.accept();
                    System.out.println((char) s.getInputStream().read());
                    ss.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();
        Thread.sleep(500);
        Socket s = new Socket("localhost", 12345);
        s.getOutputStream().write('c');
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T12:33:57.800

*您在绑定之前*设置重用，而不是在遇到异常之后。

```
ServerSocket ss = new ServerSocket(); // don't bind just yet
ss.setReuseAddress(true);
ss.bind(new InetSocketAddress(12345)); // can bind with reuse= true 
```

这在 Windows 7 和 RHEL 5.x 上运行没有错误

```
for (int i = 0; i < 1000; i++) {
    Thread t = new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                final ServerSocket ss = new ServerSocket();
                ss.setReuseAddress(true);
                ss.bind(new InetSocketAddress(12345));
                Socket s = ss.accept();
                System.out.println((char) s.getInputStream().read());
                ss.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
    t.start();
    Thread.sleep(50);
    Socket s = new Socket("localhost", 12345);
    s.getOutputStream().write('c');
    t.join();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T10:24:55.793

你必须这样做：这意味着提取代码，使其不会不断重复

```
public class....

private ServerSocket socServer;

onCreate
...

try {
    socServer = new ServerSocket();
    socServer.setReuseAddress(true);
    socServer.bind(new InetSocketAddress(SERVER_PORT));
} catch (IOException e) {
 e.printStackTrace();
}

// New thread to listen to incoming connections
new Thread(new Runnable() {
    @Override
    public void run() {
        try 
        {
            // Create server side client socket reference
            Socket socClient = null;

            // Infinite loop will listen for client requests to connect
            while (true) {
                // Accept the client connection and hand over communication 
                // to server side client socket
                   socClient = socServer.accept();

               // For each client new instance of AsyncTask will be created
                  ServerAsyncTask serverAsyncTask = new ServerAsyncTask();

               // Start the AsyncTask execution 
               // Accepted client socket object will pass as the parameter
               serverAsyncTask.execute(new Socket[] {socClient});
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}).start(); 
```

# node.js - Nodejs 和 Coffeescript 安装 (Ubuntu 12.04)

> ID：10516034
> 
> 赞同：2
> 
> 时间：2012-05-09T12:24:56.930
> 
> 标签：node.js, ubuntu, coffeescript

**编辑：我已经添加了一个关于如何解决这个问题的答案，以防有人遇到它。**

我已将笔记本电脑从 Ubuntu 11 升级到 12.04，由于某种原因，coffeescript 编译器停止工作。我将它用于 Web 开发，但我仍然是在 linux 环境中工作的新手。

基本上，当我尝试运行 cake.coffeescript 时，我得到以下信息：

```
path.existsSync is deprecated. It is now called `fs.existsSync`.
Cakefile defines the following tasks:

cake doc                  # generate documentation for *.coffee files
cake doc_copy             # copy documentation to gh-pages branch
cake build                # generate unified JavaScript file for whole Hallo
cake min                  # minify the generated JavaScript file
cake bam                  # build and minify Hallo 
```

所以在某种意义上它可以工作，但是每当我尝试运行 cake.coffeescript build 时，它都会抛出一个错误：

```
path.existsSync is deprecated. It is now called `fs.existsSync`.
Executing coffee -o examples -j hallo.js -c `find src -type f -name '*.coffee'`
{ [Error: Command failed: 
node.js:249
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.<anonymous> (module.js:381:11)
    at Object.<anonymous> (/home/ignas/bin/coffee@1.3.1:4:21)
    at Module._compile (module.js:444:26)
    at Object..js (module.js:462:10)
    at Module.load (module.js:351:32)
    at Function._load (module.js:309:12)
    at module.js:482:10
    at EventEmitter._tickCallback (node.js:238:11)
] killed: false, code: 1, signal: null }

node.js:249
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.<anonymous> (module.js:381:11)
    at Object.<anonymous> (/home/ignas/bin/coffee@1.3.1:4:21)
    at Module._compile (module.js:444:26)
    at Object..js (module.js:462:10)
    at Module.load (module.js:351:32)
    at Function._load (module.js:309:12)
    at module.js:482:10
    at EventEmitter._tickCallback (node.js:238:11) 
```

I guess this is caused by nodejs. I tried to google for a solution, but nothing helped. I think the issue is with the NODE_PATH variable which I have included to the top of ~/.bashrc file (I followed [this](http://www.shaunambrose.com/2011/10/28/how-to-setup-node-js-npm-and-coffeescript-on-ubuntu/) tutorial to install everything). Any help would be really appreciated, because I'm about to finish a part of a project and need to hand it in, but can't do it without compiling the coffeescript files.

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T15:52:44.803

**All sorted now.** I had to delete all the exiting folders as well as everything from the ubuntu repositories containing the npm, coffee-script and node and install everything from git. Step by step installation:

```
1\. clone https://github.com/joyent/node.git
2\. git checkout v0.6.17 //current stable at my time
3\. cd node && ./configure && make && make install
4\. curl http://npmjs.org/install.sh | sudo sh
5\. download coffeescript from git and do sudo bin/cake install
6\. sudo npm install coffee-script -g 
```

This should work

# proxy - 为什么jdk动态代理实现中没有使用参数'proxy'？

> ID：10516038
> 
> 赞同：1
> 
> 时间：2012-05-09T12:25:05.013
> 
> 标签：proxy, java

我在这里阅读了有关代理的示例：http: [//docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)

可以看到，'invoke'方法中的参数'proxy'没有被使用。代理是做什么用的？为什么不在这里使用它：result = m.invoke( **proxy** , args); ?

```
public class DebugProxy implements java.lang.reflect.InvocationHandler {

private Object obj;

public static Object newInstance(Object obj) {
return java.lang.reflect.Proxy.newProxyInstance(
    obj.getClass().getClassLoader(),
    obj.getClass().getInterfaces(),
    new DebugProxy(obj));
}

private DebugProxy(Object obj) {
this.obj = obj;
}

public Object invoke(Object proxy, Method m, Object[] args)
throws Throwable
{
    Object result;
try {
    System.out.println("before method " + m.getName());
    result = m.invoke(obj, args);
    } catch (InvocationTargetException e) {
    throw e.getTargetException();
    } catch (Exception e) {
    throw new RuntimeException("unexpected invocation exception: " +
                   e.getMessage());
} finally {
    System.out.println("after method " + m.getName());
}
return result;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:11:30.407

proxy是JVM“动态代理”类专门构造的。您的代码不能直接调用它的方法。另一种思考方式是代理是“接口”，在其上调用*任何*方法都对应于调用`public Object invoke(Object proxy, Method m, Object[] args)`方法，因此在代理上调用方法将以无限循环结束。

# php - 每月查询结果

> ID：10516040
> 
> 赞同：0
> 
> 时间：2012-05-09T12:25:06.773
> 
> 标签：php, mysql

我有一个查询，以获取基于每个月和国家/地区的购买商品数量。

```
SELECT   COUNT( `country` ) as item,
         `country`,
         MONTH(purchase_date) AS Month,
         YEAR( purchase_date) AS year
FROM     charmy_purchase
WHERE    YEAR(purchase_date)='20112'
GROUP BY country,MONTH(purchase_date)
ORDER BY country ASC 
```

我得到了这个结果。

```
 item   country  Month  year
    2   India       5   2012
    1   India       6   2012
    1   Malasiya    5   2012
    3   Singapure   1   2012
    1   Singapure   4   2012 
```

我不想重复“县”。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:38:23.143

目前尚不清楚您期望什么输出。`MONTH(purchase_date)`但是您可以从中删除`GROUP BY country,MONTH(purchase_date)`：

```
SELECT   COUNT( `country` ) as item,
     `country`,
     MONTH(purchase_date) AS Month,
     YEAR( purchase_date) AS year
FROM     charmy_purchase
WHERE    YEAR(purchase_date)='2012'
GROUP BY country
ORDER BY country ASC 
```

这将为您提供不同的国家/地区。但是，如果一个国家/地区有更多，它也会给你任何月份和年份。

## 编辑

如果您希望月份和年份以逗号分隔的一行列出，请尝试以下操作：

```
SELECT   COUNT( `country` ) as item,
     `country`,
     group_concat(MONTH(purchase_date)) AS Months,
     YEAR( purchase_date) AS year
FROM     charmy_purchase
WHERE    YEAR(purchase_date)='2012'
GROUP BY country
ORDER BY country ASC 
```

请参阅此示例：[SQLFiddle](http://sqlfiddle.com/#!2/2052c/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:58:55.790

试试 group_concat，像这样：

```
SELECT   COUNT( `country` ) as item,
         `country`,
         GROUP_CONCAT(MONTH(purchase_date)) AS Months,
         YEAR( purchase_date) AS year
FROM     charmy_purchase
WHERE    YEAR(purchase_date)='2012'
GROUP BY country
ORDER BY country ASC 
```

# c - 在运行时检查 GCC 版本

> ID：10516041
> 
> 赞同：5
> 
> 时间：2012-05-09T12:25:08.710
> 
> 标签：c, linux, gcc

我需要在执行 ac 程序（运行时）中找出可用的（安装在系统中）GCC 版本（主要和次要）。意思是，以编程方式提取可用 gcc 的版本（就像我在 shell 中并输入 gcc --version，但在 ac 程序中一样）。

和仅在编译时有用`__GNUC__`，`__GNUC_MINOR__`我`gnu_get_libc_version()`从 中找到了该函数`gnu/libc_version.h`，但它只为我提供了 libc 版本，我需要 GCC 版本。如果 GCC 有类似的东西，那就太好了......

我真的很想避免调用 shell 命令来执行此操作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-17T08:28:49.873

有一个简单的方法：

```
$ gcc -dumpversion
4.6 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T12:41:32.413

使用参数调用`gcc`shell 命令`--version`；这是正确的方法。看看`popen()`这样做。

或者你可以调用 GCC 来编译一个打印 和 值的`__GNUC__`程序`__GNUC_MINOR__`。但是，如果有问题的 GCC 配置为交叉编译，那将不起作用。

替代方法是在二进制文件中搜索版本字符串，并希望你得到正确的版本，格式不会改变，版本字符串足够不同，让你有足够的信心识别它。

用1.5个字：不要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T14:42:12.587

> 我需要找出可用的（安装在系统中）GCC 版本（主要和次要）

你打算如何处理这些信息？

你的问题无法得到*有意义的*答案，因为

1.  用户可能没有安装任何 GCC`/usr/bin`
2.  可能在系统的其他地方安装了5 个*不同的版本*
3.  可能有一个`/usr/bin`假装*是*，`gcc-X.Y`但实际上是`gcc-Z.W`，或`Clang`，或`icc`，等等的版本。

但是如果你坚持得到一个毫无意义的答案，`popen("gcc --version")`并解析结果输出。

# javascript - 使用 JSON.stringify 获取特定的值键对

> ID：10516045
> 
> 赞同：0
> 
> 时间：2012-05-09T12:25:27.213
> 
> 标签：javascript, jquery, json

我只想捕获“duration”和“start”的值，所以在下面的示例中分别为 288 和 0。

我如何在这个循环中做到这一点？

```
 onPlaylist: function(event){
                           var arrayTime = jwplayer("container").getPlaylist();
                           var key;
                           for (key in arrayTime){
                               if (!arrayTime.hasOwnProperty(key)){
                                   continue;
                               }
                                   console.log(JSON.stringify(arrayTime[key])); 
                              } 
```

以下是 console.log 结果：

{"provider":"video","file":"videos/Set1_mid.flv","image":"thumbs/set1_mid.jpg","description":"5 分钟有氧运动手举重", "author": "","duration":288,"title":"04:48","date":"","link":"","type":"video","start":0, "mediaid" :"","streamer":"","levels":[{"width":0,"bitrate":0,"url":"videos/Set1_mid.flv"}],"tags":"", “索引”：0}

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:28:02.250

使用您想要的数据创建一个新对象。

```
var item = arrayTime[key];
console.log(JSON.stringify({ duration: item.duration, start: item.start })); 
```

# android - Android小部件中的动画文本

> ID：10516050
> 
> 赞同：2
> 
> 时间：2012-05-09T12:25:48.643
> 
> 标签：android, animation, android-widget

我一直在尝试让文本在 Android 小部件中进行动画处理。具体来说，我希望文本淡入淡出。

我知道这是可能的，因为大多数 Android 手机附带的精灵新闻和天气小部件就是这样做的。但是，我看不到这是如何使用动画师或文本切换器（似乎都不支持）来完成的。

我假设这不是使用警报完成的，因为这对于动画来说似乎完全是矫枉过正。

有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:55:45.437

您可以为此使用 ViewSwitcher 或 TextSwitcher

```
 <TextSwitcher
     android:id="@+id/switcher"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:inAnimation="@android:anim/fade_in"
     android:outAnimation="@android:anim/fade_out" >

     <TextView
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:text="Hello" />

     <TextView
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:text="World" /> 
  </TextSwitcher> 
```

如果您在 textSwitcher 上调用 setText ，它将淡出当前文本并淡入新文本。

* * *

您还可以通过编程方式为任何 View 对象启动动画。

```
Animation fadeIn = AnimationUtils.loadAnimation(getApplicationContext(), android.R.anim.fade_in);
textView.startAnimation(fadeIn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:29:34.760

您可以使用在 xml 文件中定义或以编程方式定义的 Alpha 动画...这是有关动画的文档：http: [//developer.android.com/guide/topics/resources/animation-resource.html#alpha-element](http://developer.android.com/guide/topics/resources/animation-resource.html#alpha-element)

您希望动画何时开始？

# maven - 阻止 Jenkins 构建（从而重新部署）已发布版本的 Maven 项目

> ID：10516052
> 
> 赞同：7
> 
> 时间：2012-05-09T12:25:54.063
> 
> 标签：maven, jenkins

我想阻止 Jenkins 构建（从而重新部署）已发布版本的 Maven 项目。Artifactory（正确）不允许重新部署已发布的版本。

我正在为在 Jenkins 中运行的所有构建使用 Maven 配置文件“jenkins”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:02:02.057

```
<profile>
    <id>jenkins</id>
    <!-- This profile is activated by the "-P jenkins" switch when run on 
        the build server by Jenkins (continuous integration) -->
    <build>
        <plugins>
            <!-- Jenkins should only build -SNAPSHOTs -->
            <plugin>
                <artifactId>maven-enforcer-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <evaluateBeanshell>
                                <condition>"${project.version}".endsWith("-SNAPSHOT")</condition>
                                <message>Jenkins should only build -SNAPSHOT versions</message>
                                </evaluateBeanshell>
                            </rules>
                            <fail>true</fail>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

# coldfusion - 如何在 Coldfusion 中检索 USPS 运费？

> ID：10516053
> 
> 赞同：-2
> 
> 时间：2012-05-09T12:26:00.580
> 
> 标签：coldfusion, shipping, usps

我正在使用 ColdFusion 8，并想从我的网站获取基于重量的 USPS 运费。我怎样才能做到这一点？有 CF/USPS api 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:55:41.253

在 RiaForge 上尝试项目：http: [//uspscfc.riaforge.org/](http://uspscfc.riaforge.org/)

# iphone - 如何在 cocos2d 中找到缩放精灵中的像素完美碰撞？

> ID：10516059
> 
> 赞同：0
> 
> 时间：2012-05-09T12:26:33.133
> 
> 标签：iphone, ios, cocos2d-iphone

我已经实现了一种在 cocos2d 中找到像素完美碰撞的方法。但是，如果我必须缩放对象像素完美碰撞不起作用。

```
 //sprite declaration
    fruit1=[CCSprite spriteWithSpriteFrameName:@"Burger-Cut1.png"]; 
    fruit1.position=ccp(200,100);
    [self addChild:fruit1];

    fruit.scale=0.5;

    //find the collision

   -(bool) isTransparentWithSprite: (CCSprite *)sprite pointInNodeSpace: (CGPoint) point {
NSLog(@"in function");
bool isTransparent = YES;

unsigned int w = 1;
unsigned int h = 1;
unsigned int wh = w * h;
//ccColor4B *buffer = ccColor4B[4];
Byte buffer[4];
// Draw into the RenderTexture
[rt beginWithClear:0 g:0 b:0 a:0];

CGPoint oldPos = sprite.position;
CGPoint oldAnchor = sprite.anchorPoint;
sprite.anchorPoint = ccp(0, 0);
sprite.position = ccp(-point.x, -point.y);

[sprite visit];
sprite.anchorPoint = oldAnchor;
sprite.position = oldPos;

// read the pixels
float x = 0;//local.x;
float y = 0;//local.y;
glReadPixels(x, y, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
//NSLog(@"%d: (%f, %f)", sprite.tag, x, y);
[rt end];
// Read buffer
ccColor4B color;
for(unsigned int i=0; i<wh; i++) {
    //color = buffer[i];
    // if untouched, point will be (0, 0, 0, 0). if the sprite was drawn into this pixel (ie not transparent), one of those values will be altered
    if ( buffer[0] || buffer[1] || buffer[2] || buffer[3]) {
        NSLog(@" ");
        NSLog(@"%d %d %d %d=== > ",buffer[0],buffer[1],buffer[2],buffer[3]);
        NSLog(@" ");
        isTransparent = NO;
    }
}
//delete buffer;
return isTransparent;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:17:32.587

您的代码看起来不错，只需尝试调试它：

*   在您的图像中制作特殊颜色边框（例如粉红色）
*   尝试使用比例 1（或模拟位置 = ccp(0,0)）触摸它，如果颜色是粉红色，则尝试使用比例 0.5 触摸

还有一件事，您可能会遇到设备上纹理大小为 1x1 的问题。我曾经遇到过这样的问题，应该将纹理大小设置为 32x32：[[CCRenderTexture alloc] initWithWidth:32 height:32 pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

# jquery - 如何在客户端处理字典？

> ID：10516067
> 
> 赞同：0
> 
> 时间：2012-05-09T12:26:56.317
> 
> 标签：jquery, dictionary, getjson

看起来这应该很容易，但我似乎无法弄清楚如何访问我的键/值对：

在服务器端：

```
 public JsonResult GetDict(int type)
  {
     Repository repo = new Repository();
     Dictionary<int,string> dict = repo.getDict(type);
     return Json(dict, JsonRequestBehavior.AllowGet);
  } 
```

客户端之一：

```
 var mySelect = $('#mySelect');
  mySelect .empty();
  mySelect .append($('<option/>', { value: "", text: "-- pick one --" }));

  $.getJSON("/controller/GetDict/", { type: 1 }, function (dict, status) {
     // this doesn't work
     $.each(dict, function (index, entry) {
        mySelect .append($('<option/>', {
           value: entry.Key,
           text: entry.Value
        }));
     });
  }); 
```

~~如何从我的 getJSON 调用返回的字典中创建我的选择列表？~~

原来我的 getJSON 调用抛出了一个错误：

字典的序列化/反序列化不支持类型“System.Collections.Generic.Dictionary”，键必须是字符串或对象。

如何返回键为 int 的键/值对？我需要创建自己的包装类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:32:35.493

当您将 dict 传递给`$.each`then`index` *是*一个键并且`entry` *是*一个值，即

```
$.each(dict, function (key, value) {
    var opt = $('<option>', { value:key, text: value });
    mySelect.append(opt);
}); 
```

# sharepoint - 记录中心规则不显示 SharePoint 只读字段

> ID：10516077
> 
> 赞同：0
> 
> 时间：2012-05-09T12:27:32.587
> 
> 标签：sharepoint, sharepoint-2010, content-type, site-column

我正在使用 SharePoint 2010，并且我开发了一个创建新内容类型的 SharePoint 2010 解决方案。该内容类型中的新列之一不应在“*添加新”*和“*编辑*”表单中可见，即：

```
<Field ID="{4E887808-B3CF-421D-AFAF-4E6A60A6890E}"
       Name="DocumentStatus"
       DisplayName="Document Status"
       Type="Text"
       ShowInNewForm="FALSE"
       ShowInEditForm="FALSE"
       Group="Custom Columns" /> 
```

一个记录中心规则使用相同的内容类型。该规则指定一旦`Document Status`字段等于`"Completed"`，文档应移动到特定的记录中心文档库。

但是，由于该`Document Status`字段具有属性`ShowInNewForm`并`ShowInEditForm`设置为 true，因此在定义规则时，我无法从内容类型列列表中查看和选择该字段。

有谁知道如何使该字段不可编辑但仍然能够在记录中心规则中使用它？我的猜测是需要为字段定义设置一些其他字段属性，但我被卡住了。请帮忙！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:08:17.417

[http://msdn.microsoft.com/en-us/library/ee558288.aspx](http://msdn.microsoft.com/en-us/library/ee558288.aspx)引用：“可用列始终受限于规则内容类型上的所有非隐藏列”。我想您不能在规则定义中使用未以新/编辑形式显示的列。

# android - Androidplot：创建时间轴

> ID：10516081
> 
> 赞同：2
> 
> 时间：2012-05-09T12:27:44.967
> 
> 标签：android, graph, charts, androidplot

简短的问题：

如何将 Androidplot 的 X 轴设置为日历（日期和时间）元素？

```
for(int i=1; i<sY.length;i++)
{
    Log.d("Watcher","sY:"+sY[i]);
    nY[i] = (Number)Double.parseDouble(sY[i]);
}
for(int i=1; i<sX.length;i++)
{
    Log.d("Watcher","sX: "+sX[i]);      
    nX[i] = (Number)Double.parseDouble(sX[i]);
}

XYSeries series = new SimpleXYSeries(
                Arrays.asList(nY), 
                SimpleXYSeries.ArrayFormat.Y_VALS_ONLY,
                getTitle);

LineAndPointFormatter seriesFormat = new LineAndPointFormatter(
                Color.rgb(0, 200, 0), // line color
                Color.rgb(0, 100, 0), // point color
                Color.rgb(150, 190, 150)); // fill color (optional)

oneChart.addSeries(series, seriesFormat);           

oneChart.disableAllMarkup(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:19:10.647

```
private class MyDateFormat extends Format { 

    private static final long serialVersionUID = 1L;    
    private SimpleDateFormat dateFormat = new SimpleDateFormat("DDD:kk/mm/ss");

    @Override
    public StringBuffer format(Object obj, StringBuffer toAppendTo, FieldPosition pos) {
        long timestamp = ((Number) obj).longValue();
        Date date = new Date(timestamp);
        return dateFormat.format(date, toAppendTo, pos);
    }

    @Override
    public Object parseObject(String source, ParsePosition pos) {
        return null;    
    }
}

oneChart.setDomainValueFormat(new MyDateFormat()); 
```

# matlab - 对两个多项式求和

> ID：10516083
> 
> 赞同：1
> 
> 时间：2012-05-09T12:27:53.697
> 
> 标签：matlab, sum, polynomial-math, built-in

我正在寻找对两个多项式求和的内置 Matlab 函数。

例子：

![\ p_1(x) = 500x^5 + 400x^4 + 300x^3 + 200x^2 + 100x + 50 \ p_2(x) = \qquad\qquad\qquad\qquad\;\, 3x^3 + \quad 2x ^2 + \quad\;\, x + \;\;  5 \ p_s(x) = 500x^5 + 400x^4 + 303x^3 + 202x^2 + 101x + 55](../Images/7e3260b9dc6ac3d69aca9e54e25ec642.png)

p1(x) 和 p2(x) 用代码标准 Matlab 向量表示：

```
p1 = [500 400 300 200 100 50];
p2 = [3 2 1 5]; 
```

如何使用内置的 Matlab 函数对这两个多项式求和以获得 ps(x)；不写一个显式的 m 文件函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:46:44.187

简单的。写一个小函数，叫它leftpadz。

```
leftpadz = @(p1,p2) [zeros(1,max(0,numel(p2) - numel(p1)))),p1]; 
```

所以如果我们有...

```
p1 = [500 400 300 200 100 50];
p2 = [3 2 1 5];
p3 = leftpadz(p1,p2) + leftpadz(p2,p1)
p3 =
   500   400   303   202   101    55 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:37:12.230

我当然希望有更好的方法（我可能会将其放入辅助函数中），但这似乎工作得很好：

```
[zeros(1, size(p1,2)-size(p2,2)) p2] + [zeros(1, size(p2,2)-size(p1,2)) p1]

ans =

   500   400   303   202   101    55 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-10T07:08:18.440

```
function c = polyadd( a, b)
assert( isrow(a))
assert( isrow(b))

maxL = max( [length(a), length(b)]);
a = [ zeros( 1, maxL - length(a)), a];
b = [ zeros( 1, maxL - length(b)), b];

c = a +b ;
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:32:29.547

你有没有试过这个：

```
p1 = [500 400 300 200 100 50];
p2 = [0 0 3 2 1 5]; # refilling with 0

ps = p1 + p2; 
```

# c# - 无法隐式转换类型'System.Collections.Generic.List ' 到 'System.Linq.IQueryable '

> ID：10516086
> 
> 赞同：11
> 
> 时间：2012-05-09T12:28:05.163
> 
> 标签：c#, visual-studio-2010, linq-to-entities, hierarchical-data, silverlight-5.0

我正在尝试在我的域服务（VS 2010 Silverlight 业务应用程序）中创建一个查询，该查询返回作为特定值出现的检查读数的结果，我的数据库设置为：

```
Locations
  a) Inspections
     b) InspectionItems
        c) InspectionReadings       
  a) Areas
     b) Inspections
        c) InspectionItems
           d) InspectionReadings 
```

因此，如您所见，区域和位置下的位置有检查读数。我有一个名为 StatusList 的 POCO：

```
 public class StatusList
    {
        [Key]
        [Editable(false)]
        public Guid ID { get; set; }

        public string LocationName { get; set; }

        public DateTime LastInspectionDate { get; set; }

        public string Status { get; set; }
    } 
```

我用来返回查询结果的：

```
 public IQueryable<StatusList> GetLocationStatus()
    {
        var status = (from location in this.ObjectContext.Locations
                      where location.InspectionReadings.Status == value
                      orderby a.DateTaken                          
                      select new LocationStatusList()
                      {
                          ID = a.ID,
                          LocationName = d.Name,                              
                      }).ToList<StatusList>();
        return status;              
    } 
```

不幸的是，它返回了标题中的错误，我不知道为什么，因为列表显然是一个列表项，我已经转换了结果

```
.ToList<LocationStatusList> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-09T12:30:30.323

问题正是*因为*您调用了`ToList()`. 你已经声明你正在返回`IQueryable<LocationStatusList>`，并且`List<T>`没有实现`IQueryable<T>`.

选项（选择一个）：

*   移除`ToList`来电
*   将返回类型更改为`IEnumerable<LocationStatusList>`,`IList<LocationStatusList>`或可能`List<LocationStatusList>`
*   调用`AsQueryable()`后`ToList()`：

    ```
    ... as before ...
    .ToList().AsQueryable(); 
    ```

请注意，您不需要`ToList`调用中的类型参数 - 它与编译器无论如何都会推断出的参数相同。

# date - 如何获取网站（不是域）的年龄

> ID：10516088
> 
> 赞同：1
> 
> 时间：2012-05-09T12:28:05.993
> 
> 标签：date, time, web

我想知道如何以稳健和通用的方式确定网站的年龄（而不是主机/域注册的年龄）。

以[本站](http://online.wsj.com/article/SB10001424052970204058404577110380555673036.html)为例：

大多数时候，年龄/日期（在这种情况下为 2011 年 12 月 21 日）出现在网站上，但是 AFAIK 没有从页面获取此信息的通用方法（可能在页面上，在 META 标记中，标题...）

如果你用谷歌搜索标题，谷歌会显示年龄（第一个结果；灰色；所以谷歌以某种方式提取了这个信息）：

[http://i.stack.imgur.com/BcXwo.png](http://i.stack.imgur.com/BcXwo.png) [我没有权限将此嵌入图像]

除此之外，还有其他网站有相同的新闻（我猜它来自新闻机构），谷歌也显示了这些人的年龄，但不是最后一个，尽管它出现在文本中（第一行；*12 月 21 日，星期三, 2011 年*）。

**Q1)**如何以通用方式确定年龄？

**Q2)**谷歌是如何做到的？只是 URL 出现在索引中的时间吗？为什么没有最后结果的日期？

**Q3)**如果没有其他方法可以*从*Google 获得它，那么如何为几个域自动完成？在多次自动请求之后，Google 会阻止/阻止您发送更多请求。我查看了 Google 自定义搜索 API，但数据没有显示在那里的结果中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:40:40.773

如果服务器支持它，您可以使用 HTTP-Request 的 Last-Modified Header 部分。

尝试：`curl -I http://online.wsj.com/article/SB10001424052970204058404577110380555673036.html`

仅获取答复的 HTTP 标头并查看输出

```
HTTP/1.1 200 OK
Date: Wed, 09 May 2012 12:40:10 GMT
Server: Apache/2.2.15 (CentOS)
...
FastDynaPage-ServerInfo: secj2kentwap07 - Wed 05/09/12 - 08:40:10 EDT
Last-Modified: Wed, 09 May 2012 12:40:10 GMT
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:22:30.250

实际上，我还没有找到从 URL 获取日期的正确方法。所以我采取了另一种方法：我尝试找到包含该 URL 作为项目的提要（来自网站本身或通过 Google）。

然后很有可能我会得到一个包含发布日期的*pubDate*或*dc:date 。*然后就可以使用了。

感谢所有的投入。

# c# - 如何从项目文件夹中获取位图？

> ID：10516089
> 
> 赞同：0
> 
> 时间：2012-05-09T12:28:07.040
> 
> 标签：c#, asp.net, bitmap, ihttphandler

我有一个 ImageHandler 类，用于从活动目录中检索照片。但是，如果无法检索到默认图像，我想显示默认图像。我尝试使用，`return Bitmap.FromFile ( "~/images/default_person.jpg" );`但它似乎正在寻找文件系统路径。

我想在“图像”文件夹中指定位于我的解决方案中的图像，而不将系统路径硬编码到代码中。

这是获取图像的一段代码：

```
static Image GetUserPicture ( string userName )
    {
        DirectoryEntry myLdapConnection = SCDirectoryEntry.GetDirectoryEntry ( );

        using ( DirectorySearcher dsSearcher = new DirectorySearcher ( myLdapConnection ) )
        {

            dsSearcher.Filter = String.Format ( "(SAMAccountName={0})", userName );

            SearchResult result = dsSearcher.FindOne ( );
            DirectoryEntry user = result.GetDirectoryEntry ( );

                byte [ ] data = user.Properties [ "jpegPhoto" ].Value as byte [ ];

                if ( data != null )
                {

                        var s = new MemoryStream ( data );

                        return Bitmap.FromStream ( s );

                }

            //return default image here    
            return Bitmap.FromFile ( "~/images/default_person.jpg" );

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:45:52.007

您可以使用`Server.MapPath( "~/images/default_person.jpg" );`

Server.MapPath 会将此相对路径转换为物理路径，如此[处](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)所述，在 MSDN 页面中。

# c# - MvcContrib PortableArea 中的多个内容子文件夹

> ID：10516094
> 
> 赞同：1
> 
> 时间：2012-05-09T12:28:20.863
> 
> 标签：c#, asp.net-mvc, razor, mvccontrib, portable-areas

我正在寻找一个通用的 ASP.MVC（c# 和 razor）基础项目，其中包含通用控制器、_Layout.cshtml、css 和 js，供我们的许多 webapps 扩展。

我认为使用 MvcContrib 和创建 Portable Areas 是我最好的选择

所以文件夹设置大致是这样的

基础项目

*   内容
    *   js
        *   插件
        *   杂项
    *   图片
        *   富
    *   css
*   控制器
*   意见

主项目

*   内容
*   控制器
*   意见

我正在通过扩展 PortableAreaRegistration 类（根据 MvcContrib 文档）注册 BaseProj 区域，所以这个 url 有效......

http://localhost/MainProj/BaseProj/

查看 PortableAreaRegistration 的 MvcContrib 代码，它还在 Content 下注册了 3 个静态路由（图像、样式、脚本）。

因此这个网址也可以正常工作......

http://localhost/MainProj/BaseProj/images/bar.jpg

只有当我使用点而不是斜线时，子文件夹才能正常工作...... htttp://localhost/MainProj/BaseProj/images/foo.bar.jpg

然而，为了组织目的，在图像、css、js 等下有子文件夹真的很有用。这些子文件夹现在将是 404

即这不起作用.... http://localhost/MainProj/BaseProj/images/foo/bar.jpg

所以问题是我如何映射图像下的子文件夹（没有点符号）？即这样可以工作.... htttp://localhost/MainProj/BaseProj/images/foo/bar.jpg

谢谢

**编辑：**

好吧，我想了一下，找到了解决方案。我想知道这种东西是否可能默认包含在 MvcContrib.Portable Areas 中。

首先在 BaseProjRegistration.cs 中创建一个 catch all 路由来捕获 Content 的所有子文件夹

```
public override void RegisterArea(AreaRegistrationContext context, IApplicationBus bus)
{
    ...

        //static controller with catch all for all subfolders of content
        context.MapRoute(
            "BaseProjContent",
            "BaseProj/Content/{*resourceName}",
           new { controller = "Content", action = "LoadContent", resourcePath =    "Content" }
       );
    ...
} 
```

然后在 BaseProj 中创建一个 ContentController 类，该类将扩展 MvcContrib.PortableAreas.EmbeddedResourceController。

这会将斜杠转换为点以从 DLL 加载 BaseProj 内容，即 /BaseProj/Content/images/foo/bar.jpg => /BaseProj/Content/images.foo.bar.jpg

```
public class ContentController : MvcContrib.PortableAreas.EmbeddedResourceController
{

    public ActionResult LoadContent(string resourceName, string resourcePath)
    {
        string actualResourceName = resourceName.Replace("/", ".");
        return base.Index(actualResourceName, resourcePath);
    }
} 
```

这对我有用，但是欢迎任何其他关于如何为许多 webapps 扩展设置通用基础项目的建议

# html - Divs 不会正确定位。

> ID：10516097
> 
> 赞同：1
> 
> 时间：2012-05-09T12:28:23.933
> 
> 标签：html, css, position

对于“菜鸟”的问题，我很抱歉，但这让我发疯了……

```
<div id="footer">
        <div id="footer_wrapper">
            <div id="project_wrapper">
                <div class="footer_image_div project 1">
                    <p>Axance</p>
                    <img src="/axance/img/upload/small/1336465127.jpg" class="footer_image" alt="" />
                    <div class="info_div">
                        <a href="/axance/projects/view/3">Lees meer...</a>
                    </div>
                </div>
                <div class="footer_image_div project 2">
                    <p>Axance</p>
                    <img src="/axance/img/upload/small/1336465159.jpg" class="footer_image" alt="" />
                    <div class="info_div">
                        <a href="/axance/projects/view/4">Lees meer...</a>
                    </div>
                </div>
                <div class="footer_image_div project 3">
                    <p>Dit is een test</p>
                    <img src="/axance/img/upload/small/1336481215.png" class="footer_image" alt="" />
                    <div class="info_div">
                        <a href="/axance/projects/view/5">Lees meer...</a>
                    </div>
                </div>
                <div class="footer_image_div project 4">
                    <p>Test project</p>
                    <img src="/axance/img/upload/small/1336564574.jpg" class="footer_image" alt="" />
                    <div class="info_div">
                        <a href="/axance/projects/view/6">Lees meer...</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

这是样式表：

```
 #footer_wrapper {
      margin-bottom:auto;
      margin-left:auto;
      margin-right:auto;
      margin-top:auto;
      width:1000px;
    }

#footer_wrapper {
  margin-bottom:auto;
  margin-left:auto;
  margin-right:auto;
  margin-top:auto;
  width:1000px;
}
.project {
  height:220px;
  width:270px;
}
style.css (line 105)
.footer_image_div {
  float:left;
  padding-left:21.66666666666667px;
  padding-right:21.66666666666667px;
} 
```

现在我想要的是所有 4 个 DIVS 都在`project_wrapper`（行内）中，并且只显示 3 个，而另一个隐藏在 div 之外。我该如何管理？

我再次为这个菜鸟问题和冗长的信息感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:41:04.663

您的 div 宽度 + 您在它们上的边距加起来超过 1000 像素，并迫使最后一个 div 到下一行（在 div 之外）。

如果将 .project 的宽度更改为：

```
.project {
  height:220px;
  width:200px;
 } 
```

它们都将像这样放在一条线上：http: [//jsfiddle.net/v57n3/](http://jsfiddle.net/v57n3/)

或者，您可以通过添加额外的类来定制第一个和最后一个 div 的边距。或者您可以减少 .footer_image_div 上的边距

```
.first{ margin-left:0px;} 
```

或者

```
.last{ margin-right:0px;} 
```

这解释了盒子模型。[http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:43:23.863

加在一起的所有项目 div 的宽度大于容器的宽度

# android - 行车路线 - 谷歌地图

> ID：10516101
> 
> 赞同：1
> 
> 时间：2012-05-09T12:28:38.740
> 
> 标签：android, google-maps, android-maps, android-mapview

我想绘制从源地理点到目标地理点的行驶方向路线。我用下面的代码尝试了这个，但它在位置之间画了一条直线，而不是正确的最短路线。

```
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    // TODO Auto-generated method stub
    super.draw(canvas, mapView, shadow);

    Projection projection = classMapView.getProjection();

     Paint   mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        GeoPoint gP1 = new GeoPoint(22716221,75896816);
        GeoPoint gP2 = new GeoPoint(22715212, 75895806);

        Point p1 = new Point();
        Point p2 = new Point();

        Path    path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);

        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x,p1.y);

        canvas.drawPath(path, mPaint);
} 
```

请帮助并告诉我是否可以获得谷歌地图提供的方向文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:53:50.890

请通过[Google 政策](https://developers.google.com/android/maps-api-signup)

这表明不允许使用 android MapView 进行转向导航。

相反，您可以使用意图来执行此操作，如下所示

```
 Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
 Uri.parse("http://maps.google.com/maps?saddr=<start lat>,<start lon>&daddr=<dest lat>,<dest lon>"));
 startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:12:24.880

这是[https://github.com/frogermcs/RoutePathExample](https://github.com/frogermcs/RoutePathExample)上的完整源代码，了解如何在两个地理位置之间绘制路径。

# mysql - MySQL左连接，结果较少

> ID：10516102
> 
> 赞同：3
> 
> 时间：2012-05-09T12:28:41.813
> 
> 标签：mysql, join

我有一个小问题，我被困住了。我有两张桌子。第一个包含所有 id，第二个包含一些，但不是全部来自 tableA，一个值和一个相应的标识符。正如我认为我已经理解的那样，如果表B中不存在id，则id的左连接应该给我第一个表中的所有id，第二个表为null。但我不断获得两个表中存在的 id 数量。我理解错了吗？

到目前为止，我的声明是：

```
SELECT tableA.id, tableB.desiredValue
FROM tableA 
LEFT JOIN tableB ON tableA.id=tableB.item_id
WHERE tableB.element_id = 'something'
OR tableB.element_id IS NULL; 
```

任何指针？

谢谢，最好的问候，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:40:27.447

将涉及`tableB`列的条件从`WHERE`移至`ON`：

```
SELECT tableA.id, tableB.desiredValue
FROM tableA 
LEFT JOIN tableB ON  tableA.id=tableB.item_id
                 AND tableB.element_id = 'something'

--- WHERE tableB.element_id IS NULL        --- this is probably not appropriate
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:32:49.690

尝试这个

```
SELECT tableA.id, tableB.desiredValue
FROM tableA 
LEFT JOIN tableB ON tableA.id=tableB.item_id
AND (tableB.element_id = 'something'
OR tableB.element_id IS NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:43:12.330

一般来说，这似乎应该工作。但是，我会在 where 子句中更具体一些：

```
SELECT tableA.id, tableB.desiredValue
FROM tableA 
LEFT JOIN tableB ON tableA.id = tableB.item_id
WHERE tableB.element_id = 'something' OR tableB.item_id IS NULL; 
```

我已经替换`item_id`为我要检查的行`NULL`——尽管它应该有所不同，除非`element_id`它可以`NULL`在连接起作用的行中。

您能否详细说明为什么要使用 where 子句的其他部分 - `tableB.element_id = 'something'`？如果您只想返回所有行，我的一般建议是完全消除 WHERE 子句。

你能解释一下你想要返回的行的标准是什么吗？

# javascript - 脚本在服务器或客户端上运行？

> ID：10516103
> 
> 赞同：0
> 
> 时间：2012-05-09T12:28:51.097
> 
> 标签：javascript, html, browser, webserver, lighttpd

我有一个 thttpd 服务器设置，它具有以下 html 文件。当我在标准 Web 浏览器上提供地址 server-address/file-name.html 时，脚本上的错误会记录在浏览器的错误控制台中。我对脚本实际上在哪里运行感到困惑？它是在客户端还是错误消息只是由服务器传递给浏览器？

我的要求是在服务器上运行脚本以在客户端交互时生成动态网页。

```
<html> 
<head> 
<title>Entitled Document</title> 
<script language="JavaScript" > 
Function Java_Scriptfn()
{
    alert('Test'
}
</script> 
</head> 
<body> 
<input type="button" value="Script_Check" onclick="Java_Scriptfn()"> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:30:18.643

那是纯粹的客户端代码，因此它在客户端上运行。

据我所知， thttpd 仅支持通过[CGI](http://www.acme.com/software/thttpd/thttpd_man.html#CGI)进行服务器端编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:34:31.633

嵌入在 HTML 站点中的 JavaScript（内联或从另一个文件加载）始终在客户端（即在您的浏览器中）执行。

如果你想在服务器端执行它，你需要类似 node.js 的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T12:31:32.543

这是客户端代码；HTML 页面中包含的任何 Javascript 文件都将在客户端运行（尽管它们*可以*与服务器通信，但这是不同的）。

# android - 当我点击按钮时如何设置动画在android中从左到右和从右到左移动图像？

> ID：10516105
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:28:59.347
> 
> 标签：android

我想翻译 2 图像图像当我点击按钮时，当时从左图像从左到右移动，右图像从右到左移动（两个图像都在当时的中心停止动画）在模拟器上使用 android 动画。我是android动画的新手。我怎么能这样做。？非常感谢编码。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:45:44.067

我无法在这里解释一切，但我会帮助你做到这一点。首先您必须为每个图像创建两个新的 XML 文件（旧版本中的动画或新版本中的 Tween 动画），然后使用翻译。例如：

```
<translate android:fromXDelta="10"
    android:toXDelta="100"
    android:duration="2000"    
    /> 
```

对于左图，对于右图，请使用您的数字。然后在java文件中，设置你的按钮和图像。然后定义动画并使用它们。我认为这个例子是可以理解的：

```
 final ImageView iv1 = (ImageView) findViewById(R.id.imageView1);
    final ImageView iv2 = (ImageView) findViewById(R.id.imageView2);
    final Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Animation anim = AnimationUtils.loadAnimation(main.this, R.anim.animation);
            iv1.startAnimation(anim);
            iv2.startAnimation(anim);
        }
    }); 
```

在这个例子中，我为他们两个都使用了一个动画。请记住，在这个站点中，您可以从其他而非绝对代码中获得帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:21:15.050

将两个 xml 文件添加到`res/anim`项目的文件夹中，如下所示：

`lefttoright.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator">
<translate android:fromXDelta="-600%" android:toXDelta="0%"
    android:fromYDelta="0%" android:toYDelta="0%" android:duration="300"
    android:zAdjustment="bottom">
</translate> 
```

`righttoleft.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator">
<translate android:fromXDelta="0%" android:toXDelta="400%"
    android:fromYDelta="0%" android:toYDelta="0%" android:duration="300"
    android:zAdjustment="bottom">
</translate> 
```

在您的布局文件`ImageView`中，在屏幕左侧保留一个，在屏幕右侧保留另一个

在按钮的 onClick 事件中使用以下代码片段：

```
lefttoright = AnimationUtils.loadAnimation(context,
            R.anim.lefttoright);
    righttoleft = AnimationUtils.loadAnimation(context,
            R.anim.righttoleft);
imageView1.startAnimation(lefttoright);
imageView2.startAnimation(righttoleft); 
```

然后实现你的动画监听器：

```
lefttoright.setAnimationListener(new Animation.AnimationListener() {

                    @Override
                    public void onAnimationStart(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        // TODO Auto-generated method stub
                        //update imageView's position (e.g. center)
                    }
                }); 
```

做同样的事情`righttoleft`。

希望能帮助到你。

# kentico - 如何让过滤器与事件日历 web 部件一起使用？

> ID：10516106
> 
> 赞同：1
> 
> 时间：2012-05-09T12:29:02.997
> 
> 标签：kentico

我创建了一个自定义事件文档，它扩展了普通事件文档的字段。我添加了一个字段，可以在管道分隔列表中保留 0 到多个类别 ID。类别存储在自定义表中。

这是我的过滤器代码：

```
public partial class CMSGlobalFiles_EventCategoryFilter : CMSAbstractDataFilterControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected override void OnInit(EventArgs e)
    {
         SetupControl();

        base.OnInit(e);
    }

    protected override void OnPreRender(EventArgs e)
    {
        if (RequestHelper.IsPostBack())
        {
            setFilter();
         }

        base.OnPreRender(e);
    }

    private void SetupControl()
    {
        if (this.StopProcessing)
        {
            this.Visible = false;
        }

        else if (!RequestHelper.IsPostBack())
        {
            InitializeCategory();
        }

    }

    private void InitializeCategory()
    {
        CustomTableItemProvider customTableProvider = ne CustomTableItemProvider(CMSContext.CurrentUser);

        string where = "";

        string tableName = "customtable.EventCategory";

        DataClassInfo customTable = DataClassInfoProvider.GetDataClass(tableName);

        if (customTable != null)
        {

            DataSet dataSet = customTableProvider.GetItems(tableName, where, null);

            if (!DataHelper.DataSourceIsEmpty(dataSet))
            {
                this.drpCategory.DataSource = dataSet;
                this.drpCategory.DataTextField = "CategoryName";
                this.drpCategory.DataValueField = "ItemGUID";

                this.drpCategory.DataBind();

                this.drpCategory.Items.Insert(0, new ListItem("(all)", "##ALL##"));
            }
        }

    } 

    private void setFilter() 
    {
        string where = null;

        if (this.drpCategory.SelectedValue != null)
        {
            Guid itemGUID = ValidationHelper.GetGuid(this.drpCategory.SelectedValue, Guid.Empty );

            if (itemGUID != Guid.Empty)
            {
                where = "EventCategory LIKE \'%" + itemGUID.ToString() + "%\'";
            }

         }

         if (where != null)
         {
             this.WhereCondition = where;
         }

         this.RaiseOnFilterChanged();
     }

} 
```

这个过滤器在使用基本的转发器和文档数据源时效果很好。当我使用事件日历时，它没有。我正在使用 Kentico 版本 6.0.30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:52:15.757

问题在于 EventCalendar 的不同生命周期，基于基于标准 .Net 日历的 CMSCalendar 控件。

首先，我们的开发人员发现了一种解决此问题并允许您的场景默认运行的方法。此修复程序将包含在 6.0.33 修补程序中（计划于 25 日星期五发布）。对于给您带来的不便，我深表歉意。

除了这个即将到来的修复之外，还可以通过修改（克隆）Web 部件、将过滤器控件直接集成到该 Web 部件中并在 DataBind 之前的 OnPreRender 中将日历的 Where 条件设置为来使 EventCalendar 过滤其结果

```
protected override void OnPreRender(EventArgs e)
{
    calItems.WhereCondition = "some filtering condition";
    ... 
```

如果您可以修复您的 CMS 实例，那肯定会更省力。

问候，

Zdenek / Kentico 支持

# perl - 使用Perl为excel中的每一列设置不同的列颜色

> ID：10516111
> 
> 赞同：1
> 
> 时间：2012-05-09T12:29:14.543
> 
> 标签：perl, bash, unix, scripting

我的 Perl 脚本正在生成一个 excel 工作表。

**输出**

```
P   MON #N/A    XML                 xx  ##  c   2   Yes                                         
B   TUE #N/A    TXT                 xx  ##  b   1   No                                          
D   SUN #N/A    EXE                 xx  ##  a   1   No 
```

我希望 excel 工作表的**列**以不同的颜色突出显示

我关注了这个[网站](http://search.cpan.org/%7Ejmcnamara/Spreadsheet-WriteExcel-2.37/lib/Spreadsheet/WriteExcel/Examples.pm)

但我不知道使用 Perl 为不同的列设置不同的颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:21:41.663

您需要将该`set_column()`方法与具有该`bg_color`集合的格式对象一起使用。这是一个小的工作示例。

```
#!/usr/bin/perl

use strict;
use warnings;
use Spreadsheet::WriteExcel;

my $workbook  = Spreadsheet::WriteExcel->new( 'columns.xls' );
my $worksheet = $workbook->add_worksheet();

# Add some formats with background colors.
my $format1   = $workbook->add_format( bg_color => 'yellow' );
my $format2   = $workbook->add_format( bg_color => 0x32 );

# Format column A with a background color of yellow.
$worksheet->set_column('A:A', undef, $format1);

# Format column c with a new width and light green.
$worksheet->set_column('C:C', 30, $format2);

# Add some data to the worksheet.
my $headings = [ 'Column 1', 'Column 2', 'Column 3' ];
my $data = [
    [ 2, 3, 4, 5, 6, 7 ],
    [ 1, 4, 5, 2, 1, 5 ],
    [ 3, 6, 7, 5, 4, 3 ],
];

$worksheet->write( 'A1', $headings );
$worksheet->write( 'A2', $data );

__END__ 
```

这会给你这样的输出：

![在此处输入图像描述](../Images/25ebb4217309dc79774ea1ba21e9ccf1.png)

# zend-framework - Zend_View_Helper_Cycle 高效吗？

> ID：10516113
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:29:26.383
> 
> 标签：zend-framework, helpers, zend-view

在我看来，我正在创建一个带有斑马风格的表格：-

```
$sr_no = 1;
if($sr_no % 2 == 0){
  $style = 'class="even-row"';
    }else{
          $style = 'class="odd-row"';
         }
    <tr <?php echo $style?>>
    $sr_no++; 
```

Zend 框架提供了这个

```
echo $this->cycle(array("class='even-row'","class='odd-row'"))->next(); 
```

但是，我认为，在幕后它和我的代码一样。那么哪个是优化的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:34:28.177

如果不需要对旧版浏览器的支持，可以用 CSS 实现斑马风格

```
#mytable tr:nth-child(odd) { background: red } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:17:13.833

好吧，这取决于您的用例，不是吗？您的代码可以在非常简单的情况下工作，但 Zend_View_Helper_Cycle 可以处理更复杂的需求。请参阅[手册](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.cycle)。

将您的代码与[Zend_View_Helper_Cycle](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/View/Helper/Cycle.php)的代码进行快速比较会告诉您，您正在尝试比较非常不同的动物。

它是否有效取决于您要做什么。

# sql-server - 迁移到 Amazon SQL Server RDS

> ID：10516118
> 
> 赞同：32
> 
> 时间：2012-05-09T12:29:34.933
> 
> 标签：sql-server, amazon-rds

我一直在尝试从 Win2008 服务器上的常规 SQL Server 迁移到 Amazon AWS RDS 上的 SQL Server。

我认为一个简单的备份和恢复就可以了。尽管 AWS RDS 似乎无法访问文件系统，但 sql 脚本似乎都需要源服务器和目标服务器上的本地文件系统。我尝试了以下脚本

```
exec sp_addlinkedserver @server='test.xxxx.us-east-1.rds.amazonaws.com'

-- Verify that the servers were linked (lists linked servers)
exec sp_linkedservers

EXEC ('RESTORE DATABASE [orchard] FROM DISK = ''C:\Temp\orchard.bak'' WITH FILE = 1,  NOUNLOAD, STATS = 10')
AT [test.xxxx.us-east-1.rds.amazonaws.com] 
```

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-25T16:46:44.177

[从CodePlex](http://sqlazuremw.codeplex.com/)下载免费的“SQL Azure 迁移向导” ——我为此做了一个简短的[博客/截屏视频](http://lynnlangit.wordpress.com/2012/05/17/aws-rds-sql-server-vs-sql-azure-smackdown-importing-data/)。确保将向导中的“TO”设置设置为 AWS DNS 名称，然后使用“SQL Server 2008”而**不是**“SQL Azure”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T16:06:09.043

我得到的 AWS 支持使用 .bak 文件迁移 SQL 数据库的官方说法是它不受支持。因此不再需要从 .bak 文件快速恢复。他们在此处为迁移现有数据库提供了官方帮助：

[官方 AWS 数据库迁移指南](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/SQLServer.Procedural.Importing.html)

这也给了我一个非官方的 Azure 数据库迁移工具。只需使用它来生成架构和/或数据的脚本并针对您的 RDS 实例执行它。它是一个很好的工具。您必须先将 .bak 导入非 RDS SQL 服务器才能执行此操作。

[SQL Azure 迁移工具](http://sqlazuremw.codeplex.com/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-12T15:11:14.680

您可能会发现[数据层应用程序](http://msdn.microsoft.com/en-us/library/ee210546.aspx)BACPAC 格式将为您提供最方便的解决方案。您可以使用[Export](http://msdn.microsoft.com/en-us/library/hh213241.aspx)生成一个包含数据库架构和数据的文件。[Import](http://msdn.microsoft.com/en-us/library/hh710052.aspx)将创建一个新数据库，其中填充了基于该文件的数据。

与[备份和恢复](http://msdn.microsoft.com/en-us//library/ms187048.aspx)操作相比，导出和导入不需要访问数据库服务器的文件系统。

您可以使用 SQL Server Management Studio 或通过 .Net、Powershell、MSBuild 等中的 API 处理 BACPAC 文件。

![导出数据层应用程序对话框](../Images/e9352a8bb53bcc0c08522d0bf767d9fe.png)

请注意，使用此方法从 Amazon RDS 导出然后导入到 Amazon RDS 存在问题。在 RDS 上创建新数据库时，会在其中创建以下两个对象。

*   具有 db_owner 角色成员身份的用户。
*   rds_deny_backups_trigger 触发器

![rds_deny_backups_trigger 触发器](../Images/72f49c239e0616e6268f55c1fd3b52e0.png)

在导入过程中，BACPAC 文件中包含的对象与 RDS 自动添加的对象之间会发生冲突。这些对象都存在于 BACPAC 文件中，并在创建新数据库时由 RDS 自动创建。

如果您手边有一个非 RDS 的 SQL Server 实例，那么您可以将 BACPAC 导入该实例，删除上面的对象，然后导出数据库以创建一个新的 BACPAC 文件。这个在还原到RDS实例时不会有任何冲突。

否则，可以使用以下步骤解决此问题。

1.  编辑 BACPAC 文件中的 model.xml 文件（BACPAC 只是 zip 文件）。
2.  删除与上面列出的对象（由 RDS 自动添加的对象）相关的 Type 属性中具有以下值的元素。
    *   SqlRoleMembership
    *   SqlPermission 语句
    *   SqlLogin
    *   SqlUser
    *   SqlDatabaseDdlTrigger
3.  [使用SHA256](http://msdn.microsoft.com/en-us/library/9x979460.aspx)类的 ComputeHash 方法之一为 model.xml 文件的修改版本生成校验和。
4.  使用[BitConverter.ToString()](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)方法将哈希转换为十六进制字符串（您需要删除分隔符）。
5.  将 origin.xml 文件（也包含在 BACPAC 文件中）的 Checksum 元素中的现有哈希替换为新哈希。
6.  通过使用新版本替换的 model.xml 和 origin.xml 文件压缩原始内容来创建新的 BACPAC 文件。不要为此目的使用[System.IO.Compression.ZipFile](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)，因为似乎与生成的 zip 文件存在一些冲突 - 数据不包含在导入中。我使用 7Zip 没有任何问题。
7.  导入新的 BACPAC 文件，您不应与 RDS 自动生成的对象有任何冲突。

**注意：**使用 SQL Server Management Studio 将 BacPac 导入 RDS 还有另一个相关问题，我[在此处](https://forums.aws.amazon.com/thread.jspa?messageID=446092&#446092)进行了解释。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-12T12:57:43.587

我根据 Lynn 的截屏视频编写了一些关于[如何使用 SQL Azure 迁移工具将 .bak 文件还原到 RDS](http://www.somacon.com/p586.php)的分步说明。这是一种比官方说明简单得多的方法，并且对于我迁移的几个数据库都运行良好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-31T20:15:37.760

在源数据库上使用 sql server management studio 中的导出向导。右键单击数据库 > 任务 > 导出数据。有一个向导可以引导您将整个数据库发送到远程 sql 服务器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-26T16:45:55.737

AWS 设计的工具可以回答您的大部分（如果不是全部）兼容性问题 - SQL Server 架构转换工具：[https ://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/CHAP_Source.SQLServer .html](https://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/CHAP_Source.SQLServer.html)

因为并非所有 sql server 数据库对象都受 RDS 支持，甚至因 sql server 版本而异，所以评估报告也非常值得您花时间： [https ://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/ CHAP_AssessmentReport.html](https://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/CHAP_AssessmentReport.html)

最后，一定要利用数据库迁移服务： [https ://aws.amazon.com/dms/](https://aws.amazon.com/dms/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T02:30:29.280

下面的文章讨论了如何使用数据复制数据库——生成用于将数据从一个表插入另一个表的 T-SQL 是我所需要的。

[http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-另一张桌子/](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

# javascript - 如果使用javascript输入为空，如何防止提交

> ID：10516122
> 
> 赞同：1
> 
> 时间：2012-05-09T12:29:48.053
> 
> 标签：javascript, validation

我有一个登录表单，但我想检查这些字段是否为空，然后不要提交。我在提交时做了'return false'，但浏览器仍然加载一个新页面。我怎么能阻止它？

JS：

```
var username = document.getElementById('usernameField');
    var password = document.getElementById('passwordField');
    var loginBtn = document.getElementById('loginBtn');
    var infoBox = document.getElementById('formInfo');

    var isEmpty = /^\s*$/;

    var addEventTo = function(id, type, fn, capture) {
        if (document.addEventListener) {
            id.addEventListener(type, fn, capture);
        } else {
            id.attachEvent('on'+type, fn);
        }
    };

    function checkIfAllEmpty() {
        var loginForm = document.getElementById('loginform'),
            allInputs = loginForm.getElementsByTagName('input'),
            max = allInputs.length,
            i;

            for (i = 0; i < max; i++) {
                if (allInputs[i].type !== 'submit') {

                    if (allInputs[i].match(isEmpty)) {
                        infoBox.innerHTML = 'All your fields are empty';
                        return false;
                    }
            }
        }
    }

    //addEventTo(loginBtn, 'click', checkIfAllEmpty, false);

    if (document.addEventListener) {
            loginBtn.addEventListener('submit', checkIfAllEmpty, false);
    } else {
            loginBtn.attachEvent('onsubmit', checkIfAllEmpty);
    } 
```

HTML：

```
<p id="formInfo"></p>
<form id="loginForm" method="post" action="#">
    <fieldset id="loginFieldset">
        <legend>Sign in</legend>
        <ol>
            <li>
                <label for="usernameField">Username</label><input type="text" placeholder="Enter username" id="usernameField" />
                <span>Please type in your username</span>
            </li>
            <li>
                <label for="passwordField">Password</label><input type="password" placeholder="Enter password" id="passwordField" />
                <span>Please type your password</span>
            </li>
            <li>
                <input type="submit" value="Sign in" id="loginBtn" />
            </li>
        </ol>
    </fieldset>
</form> 
```

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:56:44.927

如果可以使用 html5（适用于较新版本的 Safari、Chrome、Firefox、Opera > 11.00 但没有像往常一样的 IE），您可以在输入字段中添加所需的标签。

```
<p id="formInfo"></p>
  <form id="loginForm" method="post" action="#">
    <fieldset id="loginFieldset">
      <legend>Sign in</legend>
      <ol>
        <li>
         <label for="usernameField">Username</label>
         <input type="text" placeholder="Enter username" id="usernameField" required />
         <span>Please type in your username</span>
        </li>
        <li>
         <label for="passwordField">Password</label>
         <input type="password" placeholder="Enter password" id="passwordField" required />
         <span>Please type your password</span>
        </li>
        <li>
            <input type="submit" value="Sign in" id="loginBtn" />
        </li>
    </ol>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T12:56:10.013

看起来 onsubmit 的事件监听器没有被正确添加，无论如何最简单的方法是在你的表单中添加 onsubmit="return someValidationFuncThatReturnTrueOrFalse()" ：

```
<form id="loginForm" method="post" action="#" onsubmit="return validate()"> 
```

我可以问你为什么在你的 js 代码上使用这种方法吗？如果您的表单是静态的，它可以很容易地完成......

```
function validate() {
    if (document.getElementById("usernameField").value == "" && document.getElementById("usernameField").value == "") {
         alert("all fields are empty");
         return false;
    } else {
        return true;
    }
} 
```

或类似的东西 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:44:30.083

您可以将属性 disabled="disabled" 用于表单输入：

[http://www.w3schools.com/tags/att_input_disabled.asp](http://www.w3schools.com/tags/att_input_disabled.asp)

将提交按钮设置为禁用，然后为每个输入字段添加一个 onchange 侦听器，以便如果每个字段都已填写，则删除禁用属性并且用户可以提交表单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T13:04:50.297

我使用 Prototype（作为 javascript 框架），这段代码应该可以工作：

js：

```
function checkEmpties() {
    var usr = $('username');
    var pass = $('pass');
    var frm = $('formId');

    if (usr.value && pass.value) {
        //frm.submit();
        alert('submit');
    } else {
        alert('failed');
    }
}

Event.observe(window, 'DomReady', function() {
    var btn = $('submitBtn');
    Event.observe('submitBtn', 'click', checkEmpties);
} 
```

html:

```
<form id="formId">
    <input type="text" name="username" id="username" />
    <input type="password" name="pass" id="pass" />
    <input type="button" id="submitBtn" value="Send"  />
</form> 
```

它的作用：一旦加载了文档，就会在按钮上附加一个事件观察器，所以当它被点击时，函数 checkEmpties 会被调用。此函数将检索输入的值，如果它们不为空，则提交表单。

希望能帮助到你

# uac - 如何在运行时更改执行级别授权？

> ID：10516124
> 
> 赞同：1
> 
> 时间：2012-05-09T12:29:55.977
> 
> 标签：uac, nsis, elevated-privileges

我`RequestExecutionLevel user`一开始就有，因为通常我安装在用户级别。

但是，如果检测到某些情况，我想稍后将其更改为管理员。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:42:53.463

Windows 进程的执行级别（[完整性级别](http://en.wikipedia.org/wiki/Mandatory_Integrity_Control)）在进程启动时确定，在进程启动后无法更改。

虽然可以使用[UAC 插件](http://nsis.sourceforge.net/UAC_plug-in)来解决这个问题，但我实际上建议您使用`RequestExecutionLevel highest`任何需要标准用户管理员权限的选项并将其灰显...

# wpf - 当其字段之一发生更改时，在整个对象上触发 OnPropertyChanged

> ID：10516127
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:09.073
> 
> 标签：wpf, vb.net, inotifypropertychanged

让我们承认一段代码：

```
 [...]
    Private _filterContacts As FilterContacts
    Public Property FilterContacts() As FilterContacts
        Get
            Return _filterContacts
        End Get
        Set(ByVal value As FilterContacts)
            _filterContacts = value
            OnPropertyChanged("FilterContacts")                    
        End Set
    End Property

    Private _branchType As Nullable(Of Integer)
    Public Property BranchType As Nullable(Of Integer)
        Get
            Return _branchType
        End Get

        Set(ByVal value As Nullable(Of Integer))
            _branchType = value
            OnPropertyChanged("BranchType")                
        End Set
    End Property
    [...]

    Public Sub SomeSub()
        FilterContacts.BranchType = BranchType
    End Sub 
```

我实际上更改了过滤器的“branchType”，但我希望收到通知，FilterContacts 已更改，而不仅仅是其中一个字段。可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:55:25.273

```
Set(ByVal value As Nullable(Of Integer))
    _branchType = value
    OnPropertyChanged("BranchType")                
    OnPropertyChanged("FilterContacts")      
End Set 
```

或者，如果您想使对象上的所有属性无效，只需执行以下操作：

```
OnPropertyChanged("") 
```

# javascript - 如何在 javascript forloop 中渲染大块 html

> ID：10516128
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:09.113
> 
> 标签：javascript, html, css

我有一个 html 组件，可以在表中生成可变数量的行。在这个组件里面有几个 css 类，例如

```
<div class="row" style="margin-left:0"> 
```

如何将这么大的 html 块嵌入到 javascript forloop 中？我知道如何使用的唯一方法是 document.write("") 但类中的引号会搞砸。

更新：任何想法为什么在使用innerHTML时忽略标签和其中的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:33:18.957

制作一个 id 为`someDiv`（或任何您想要的）的 div 以使其正常工作。

```
document.getElementById("someDiv").innerHTML = '<div class="row" style="margin-left:0">'; 
```

为了避免与 HTML 中的双引号发生冲突，我使用了单引号来包裹字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:33:11.390

您需要在 javascript 中转义引号。

```
alert('Oh, heya, I didn\'t see you, so "Hello"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:39:49.917

JavaScript 不适合表达 HTML，因为它缺少[Heredoc](http://en.wikipedia.org/wiki/Here_document)语法，这导致您必须转义任何字符串文字（如 @DavidYell 所建议的那样）。

可能值得考虑使用诸如[Mustache.js](https://github.com/janl/mustache.js/)或[Underscore.js之类的](https://stackoverflow.com/questions/4778881/how-to-use-underscore-js-as-a-template-engine)[模板引擎](http://www.jonnyreeves.co.uk/2012/using-external-templates-with-mustache-js-and-jquery/)

# encoding - 从 UTF8 缓冲区中检测每个单词的单词边界和语言

> ID：10516130
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:16.620
> 
> 标签：encoding, utf-8, internationalization, icu

我正在开发一个自定义搜索引擎，我需要将每个单词传递给适当的语言特定词干分析器。

我最近发现了紧凑型语言检测器 (CLD) [http://blog.mikemccandless.com/2011/10/language-detection-with-googles-compact.html](http://blog.mikemccandless.com/2011/10/language-detection-with-googles-compact.html)，它为 UTF8 缓冲区提供了令人印象深刻的语言检测。

虽然 CLD 非常适合检测给定缓冲区的语言，但我需要从缓冲区中提取单词边界，并为这些单词检测每个单词的语言。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:13:53.457

祝你好运 ：）

老实说，这是高级 NLP 主题，***很难***可靠地做到这一点。

首先，您无法像这样检测许多语言中的单词边界。尤其是在表意语言（中文、日文……）中，您需要训练有素的学习算法来进行标记化。
有传言说有人这样做了（请参阅基础技术），但这只有在您负担得起支付许可费的情况下才对您有用。

顺便提一句。许多单词可以用几种语言完全一样地写出来，你不会得到可靠的语言检测。更糟糕的是，算法（通常是一些基于 n-gram 的检测器）将需要几个八位字节来检测任何东西（正确或错误）。

正如我所说，祝你好运。如果我是你，我会重新考虑我的策略；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:09:15.457

我使用 ICU 开发了一个语言检测引擎，它基本上执行以下操作：

1.  [使用 ICU BreakIterator](http://icu-project.org/apiref/icu4c/classBreakIterator.html)和英语 ( [Locale::getEnglish()](http://icu-project.org/apiref/icu4c/classLocale.html#a669ca7c4ef168a75879bc2e847f151dd) ) 规则发现基本“单词”
2.  将#1 中的单词输入我的引擎，这反过来又给了我按分数排序的“真实”语言

出于您的目的，因为您的输入是 UTF-8，您可以使用[setText()](http://icu-project.org/apiref/icu4c/classBreakIterator.html#a74d79d97bbc2265753486704111d29eb)方法获取[UText](http://userguide.icu-project.org/strings/utext) * （请注意此处链接的示例，它几乎正是您所需要的——不过，您可能想要使用 C++ API）可以设置遍历UTF-8。

# .net - 远程数据库访问 任何都通过互联网

> ID：10516133
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:25.963
> 
> 标签：.net, sql-server, database, silverlight, connection-string

假设我有**两台 PC**，两者都可以通过互联网连接。我需要通过**PC2访问****PC1**的数据库。下面是我的 IP 版本协议对话框的屏幕截图。

 **![在此处输入图像描述](../Images/c8593905813ba114afedcc0b89e9ba18.png)

**注意：** PC1 是我的 PC，数据库应该驻留在其中，PC2 将是 Internet 上的任何 PC

我正在使用 SilverLight 开发 WebSite\WebPage。对于本地访问数据库（MS SQL Server），我使用以下连接字符串。

```
<connectionStrings>
<add name="SkiResultEntities" connectionString="metadata=res://*/SkiResultModel.csdl|res://*/SkiResultModel.ssdl|res://*/SkiResultModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=PRITESHARYAN-PC\PRITESHB_ARYAN;Initial Catalog=SkiResultData;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
    </connectionStrings> 
```

我必须在连接字符串或 SQL Server 数据库设置中进行哪些修改？因此，我的 PC 中的数据库即**PC1**可以从任何通过 Internet 访问的数据库...请帮助.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:47:49.540

[您可以尝试使用这些说明](http://www.wikihow.com/Set-up-a-Vpn-Between-Two-Computers)在两台计算机之间创建[VPN](http://en.wikipedia.org/wiki/Virtual_Private_Network)。我没有尝试过这个，并且基于几个在线评论和问题，这对于不同版本的 Windows 来说变得很困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:00:42.623

鉴于您使用的是 Silverlight，远程 PC 将不会直接访问数据库，而是通过您在 PC1 上运行的服务器。

这是相当复杂和涉及的。脚步：

*   设置 IIS

*   将您的 Silverlight 应用程序部署到 IIS（您需要更改连接字符串以使用用户名、密码 - 不是集成安全性）。验证它是否有效。

*   修改路由器转发80端口请求到192.168.137.115:80

*   修改您的 PC 防火墙以启用入站端口 80 流量

*   获取路由器的 IP 地址（使用[http://WhatsMyIpAddress.com](http://WhatsMyIpAddress.com)）

*   通过从上一步转到[http://xxx.xxx.xxx.xxx来验证端口转发是否有效。](http://xxx.xxx.xxx.xxx)

*   将上述 URL 提供给 PC2 上的用户（请注意，某些 ISP 可能会更改您的 IP 地址）。**

# java - mapreduce 中是否有索引器的 Java 实现？

> ID：10516137
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:39.253
> 
> 标签：java, mapreduce, information-retrieval

我有一个 URL 列表，我想下载它们以创建 webtrec 格式的索引。我找到了一个名为**MapReduce** (Apache Hadoop) 的有用框架，但我想知道在 java 中是否有我想做的实现。或者可能是一个很好的例子。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:35:46.877

MapReduce 模式是一种在多个步骤中进行可并行的、受 CPU 限制的计算的模式。下载和抓取网页是一项 I/O 密集型操作。因此，您应该区分这两种操作。

因此，当性能真的那么重要时，您应该首先使用队列和异步 I/O 之类的东西来下载网站。在第二步中，您可以使用 MapReduce 构建实际索引。

Hadoop 是一种可能性，但如果您的目标不是大规模，那么 Fork/Join 和 akka 等框架也可能适用。

# cakephp - 加载图像和 CSS 表单插件时出现错误 404 - CakePHP 2.1

> ID：10516138
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:40.410
> 
> 标签：cakephp, cakephp-2.0

我正在创建一个插件网络安装程序来增强数据库的创建。我按照食谱的要求创建了标记：

```
Plugin/
   Install/
      Config/
      Controller/
      Model/
      View/
      webroot/
         css/
         js/
         img/ 
```

我在css文件夹中放置了一个style.css文件，在img文件夹中放置了一个图像/

按照 CookBook 的要求，我使用以下命令加载了图像：

```
<?php echo $this->Html->image("Install.image.jpg"); ?> 
```

当我查看 Chrome 的控制台时，我看到了 404 错误。但是路径很好。css也是同样的问题

```
<?php echo $this->Html->css("Install.style.css"); ?> 
```

当我在浏览器中输入此地址时：

```
http://mywebsite.com/install/css/style.css 
```

我有一个 MissingControllerException。

我应该创建一条路线吗？

感谢您的回答。

# php - EWS 呼叫无法检索电子邮件，但仅限于特定电子邮件

> ID：10516139
> 
> 赞同：0
> 
> 时间：2012-05-09T12:30:42.987
> 
> 标签：php, exchangewebservices

> 发现问题：部分响应（消息正文）包含“” 这是一个无效的 XML 字符。知道如何删除它吗？

我正在使用 Exchange Web 服务从收件箱中提取大量电子邮件。它适用于前 1141 封电子邮件，但在 1142 上失败了（跳到 1143 可以正常工作）。我不知道为什么它无法检索电子邮件，但我得到的错误是：

```
Uncaught SoapFault exception: [Client] looks like we got no XML document 
```

我将响应 XML 输出到 1142 和 1143 的文件，唯一的区别是 ItemId 行（如预期的那样）。

该电子邮件确实存在于收件箱中，尽管它包含一些奇怪的字符（由那些奇怪的方形符号表示）。

我正在使用稍微修改过的 php-ews 库版本。这是我的代码的一部分：

```
<?php
$response = $ews->FindItem($Request);
$items = $response->ResponseMessages->FindItemResponseMessage->RootFolder->Items->Message;

foreach ( $items as $item ) {
    $ItemRequest = new EWSType_FindItemType();

    $ItemRequest->ItemShape = new EWSType_ItemResponseShapeType();
    $ItemRequest->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;
    $ItemRequest->ItemShape->BodyType = EWSType_BodyTypeResponseType::TEXT;
    $ItemRequest->ItemShape->BodyTypeSpecified = true;

    $ItemRequest->ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
    $ItemRequest->ItemIds->ItemId = new EWSType_ItemIdType();
    $ItemRequest->ItemIds->ItemId->Id = $item->ItemId->Id;

    $response = $ews->GetItem( $ItemRequest ); // Code fails here
} 
```

所以我不知道为什么请求会失败。我尝试添加选项“exceptions”=> 0、“trace”=> 1，并且我可以看到 __last_response 确实包含我预期的响应。为什么即使我得到了正确的响应，它还是神秘地失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:19:37.353

我通过扩展我的 SoapClient 类并实现 __doRequest 方法解决了这个问题，该方法从 XML 消息中清除了无效字符。

# c# - 如何替换 RichTextBox 中超链接的链接（Windows 手机）

> ID：10516140
> 
> 赞同：2
> 
> 时间：2012-05-09T12:30:46.767
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

我有一段文字：

```
Download it directly to the <a href="http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&mt=8">iTunes Store</a> or <a href="https://market.android.com/details?id=com.strikersoft.meramal.se">Android Market</a>. The application is launched for Swedish app store. 
```

我知道如何在 RichTextBox 中显示超链接：

[http://msdn.microsoft.com/en-us/library/ee681613%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ee681613%28v=vs.95%29.aspx)

但是我怎样才能让这个代码中的每个人都链接呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T15:20:02.173

您应该使用 RegEx 之类的东西或使用[html agility pack](http://html-agility-pack.net/?z=codeplex)之类的库来解析字符串。这个扩展方法应该可以工作，让你只需调用richTextBlock.SetLinkedText(htmlFragment);

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Net;
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

public static class RichTextBlockExtensions
{
    public static void SetLinkedText(this RichTextBlock richTextBlock, string htmlFragment)
    {
        var regEx = new Regex(
            @"\<a\s(href\=""|[^\>]+?\shref\="")(?<link>[^""]+)"".*?\>(?<text>.*?)(\<\/a\>|$)",
            RegexOptions.IgnoreCase | RegexOptions.Multiline);

        richTextBlock.Blocks.Clear();

        int nextOffset = 0;

        foreach (Match match in regEx.Matches(htmlFragment))
        {
            if (match.Index > nextOffset)
            {
                richTextBlock.AppendText(htmlFragment.Substring(nextOffset, match.Index - nextOffset));
                nextOffset = match.Index + match.Length;
                richTextBlock.AppendLink(match.Groups["text"].Value, new Uri(match.Groups["link"].Value));
            }

            Debug.WriteLine(match.Groups["text"] + ":" + match.Groups["link"]);
        }

        if (nextOffset < htmlFragment.Length)
        {
            richTextBlock.AppendText(htmlFragment.Substring(nextOffset));
        }
    }

    public static void AppendText(this RichTextBlock richTextBlock, string text)
    {
        Paragraph paragraph;

        if (richTextBlock.Blocks.Count == 0 ||
            (paragraph = richTextBlock.Blocks[richTextBlock.Blocks.Count - 1] as Paragraph) == null)
        {
            paragraph = new Paragraph();
            richTextBlock.Blocks.Add(paragraph);
        }

        paragraph.Inlines.Add(new Run { Text = text });
    }

    public static void AppendLink(this RichTextBlock richTextBlock, string text, Uri uri)
    {
        Paragraph paragraph;

        if (richTextBlock.Blocks.Count == 0 ||
            (paragraph = richTextBlock.Blocks[richTextBlock.Blocks.Count - 1] as Paragraph) == null)
        {
            paragraph = new Paragraph();
            richTextBlock.Blocks.Add(paragraph);
        }

        var run = new Run { Text = text };
        var link = new Hyperlink { NavigateUri = uri };

        link.Inlines.Add(run);
        paragraph.Inlines.Add(link);
    }
}

public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        this.richTextBlock.SetLinkedText(
            "Download it directly to the <a href=\"http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&mt=8\">iTunes Store</a> or <a href=\"https://market.android.com/details?id=com.strikersoft.meramal.se\">Android Market</a>. The application is launched for Swedish app store.");
    }
} 
```

# java - 错误：无法在 JSP 中解析日历

> ID：10516145
> 
> 赞同：6
> 
> 时间：2012-05-09T12:31:00.517
> 
> 标签：java, jsp, date, get

我试图像以前搜索的那样在 JSP 中获取日期，但是没有用。这是我的代码。

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.sql.*, java.text.*;" errorPage="" %>
    <%!
        DateFormat tipe = new SimpleDateFormat("EEE, MMM d, ''yy");
        Calendar cal = Calendar.getInstance();
    %>
    <% 
        out.print(tipe.format(cal.getTime()));
    %> 
```

为什么它说“日历无法解决”？哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:32:33.657

`Calendar`在一个`java.util`包中。您缺少导入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:35:41.513

更新后的代码应如下所示：

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.util.*, java.text.*;" errorPage="" %>
    <%!
        DateFormat tipe = new SimpleDateFormat("EEE, MMM d, ''yy");
        Calendar cal = Calendar.getInstance();
    %>
    <% 
        out.print(tipe.format(cal.getTime()));
    %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T12:35:28.330

导入日历类，如下所示

```
<%@ page import="java.util.Calendar" %> 
```

# ios - 转到设备中 iOS 的 applicationDidEnterBackground 中的另一个页面

> ID：10516152
> 
> 赞同：1
> 
> 时间：2012-05-09T12:31:18.863
> 
> 标签：ios, ios5, ios-simulator

在我的应用程序中，当应用程序进入后台时，我正在调用密码页面（进行身份验证的密码页面）。

我的**要求**是当用户从前台启动应用程序时，他会看到密码页面。如果他输入了正确的密码，那么只有他才能看到其余页面。

在**delegate.m 文件中**

```
- (void)applicationDidEnterBackground:(UIApplication *)application
 {
   PasscodeViewController *passcodeController = [[PasscodeViewController alloc]       initWithNibName:@"PasscodeViewController" bundle:nil];

   [navController pushViewController:passcodeController animated:YES];
 } 
```

当我从后台启动应用程序时，它会在几分之一秒内向我显示上一页（从我进入后台的页面），然后在该密码页面出现之后。

但我想对上一页中显示的其他人（不知道密码的人）隐藏我的机密信息。

它在模拟器中正常工作，但在设备中无法正常工作。

你能指导我吗？

**或者**

这是iOS设备的正常行为吗？无论它会做什么页面转换，它都会在应用程序在前台运行时执行。

我不确定。请告诉我哪里出错了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:51:12.637

每当您的应用程序进入后台时，添加一个`UIView`白色背景。每当您的应用程序出现时，将您的 PasscodeViewController 视图推到顶部

请为上述功能添加观察者`UIApplicationDidEnterBackgroundNotification`并`UIApplicationWillEnterForegroundNotification`确保在您的视图消失时删除观察者

当用户输入正确的密码时，删除`UIView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:29:26.557

试试 applicationWillResignActive：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
  PasscodeViewController* passcodeController = [[PasscodeViewController alloc] initWithNibName:@"PasscodeViewController" bundle:nil];

  [navController pushViewController:passcodeController animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:42:06.510

我认为这是 UIKit 何时认为它需要重新渲染的问题......我们有一个类似的带有闪屏的案例，但`applicationDidEnterBackground`用于添加闪屏有帮助。

我的想法是避免动画，使用

```
[navController pushViewController:passcodeController animated:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:58:00.893

当应用程序进入后台时，将密码视图控制器推送到委托 applicationDidEnterBackground 中的导航控制器，因为几乎所有时间都会有部分闪烁，您可以在进入后台之前推送密码控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:20:04.293

我使用过的具有类似功能的每个应用程序都按照您的描述运行，在锁定视图出现之前会出现小数秒闪烁。

# css - 如何垂直对齐浮动图像旁边的文本？

> ID：10516157
> 
> 赞同：21
> 
> 时间：2012-05-09T12:31:29.153
> 
> 标签：css, css-float, vertical-alignment

我想在浮动图像之后垂直对齐跨度。我在堆栈溢出中搜索它并找到[了这篇文章](https://stackoverflow.com/questions/489340/how-do-i-vertically-align-text-next-to-an-image-with-css)。但我的形象是浮动的。

```
<div>
    <img style="width:30px;height:30px; float:left">
    <span style="vertical-align:middle">Doesn't work.</span>
</div> 
```

我给`vertical-align:middle`形象，没有任何改变！

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-07-03T10:19:18.220

即使这是一篇非常古老的帖子，您也可以使用以下方法实现此目的`Flexbox`：

```
div {
 display: flex;
 align-items: center;
}
```

```
<div>
<img style="width:30px;height:30px;" src="http://lorempixel.com/output/abstract-q-c-640-480-8.jpg" />
<span>Doesn't work.</span>
</div>
```

[JsFiddle 示例](https://jsfiddle.net/858fmucq/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-09T12:40:56.987

`float`首先从中删除。像这样写：

```
<img style="width:30px;height:30px;vertical-align:middle" src="http://lorempixel.com/output/abstract-q-c-640-480-8.jpg">
    <span>Doesn't work.</span> 
```

检查这个[http://jsfiddle.net/ws3Uf/](http://jsfiddle.net/ws3Uf/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-09T12:46:04.033

Add `line-height` (equal to picture height):

```
<div>
    <img style="width:30px;height:30px; float:left">
    <span style="vertical-align:middle; line-height: 30px;">Works!</span>
</div> 
```

[See example.](http://jsfiddle.net/FrQJF/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T12:40:16.330

A`<span>`是一个内联元素，尝试添加`display:block`到跨度，给它与图像相同的高度和匹配的行高。让它也向左浮动。那应该工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T12:41:33.633

您也可以手动更改

```
<div>
    <img style="width:30px;height:30px float:left">
    <span style="float:left;padding-top:15px;">Will work.</span>
</div> 
```

[演示](http://jsfiddle.net/uW6QB/2/)

或者你可以使用一张[桌子](http://jsfiddle.net/uW6QB/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-07T18:57:01.520

您可以执行以下操作：

```
 div:after {
        content:"";
        clear:both;
        display:block;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-28T06:32:44.707

*   浮动图片
*   为图片设置高度。
*   在图片后放置一个 div1>div2>text。
*   将 div1 设置为与图片相同的高度。
*   设置 div2 相对位置，顶部 0 并变换 translateY -50。

[https://codepen.io/aungthihaaung/pen/ExXGvGy](https://codepen.io/aungthihaaung/pen/ExXGvGy)

```
.picture {
  height: 300px;
  float: left;
}

.div1 {
  height: 300px;
}

.div2 {
  position: relative;
  top: 50%;
  transform: translateY(-50%);
} 
```

```
 <img src="https://via.placeholder.com/300" class="picture" />
  <div class="div1">
    <div class="div2">
      <h1>Hi There!</h1>
      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Et, deleniti
      perferendis! Ut, eaque iste incidunt atque perferendis odio laborum
      nobis obcaecati exercitationem molestiae nihil est recusandae
      mollitia. Fuga beatae inventore, adipisci ipsa aliquid corporis harum
      ex tenetur iure assumenda optio quod eaque omnis porro ab consequuntur
      unde a totam minima.
    </div>
  </div> 
```

# iphone - 使用 PersistentStoreCoodinator 管理多个 NSPersistentStore

> ID：10516159
> 
> 赞同：1
> 
> 时间：2012-05-09T12:31:33.857
> 
> 标签：iphone, ios, core-data, persistence

我正在尝试让 NSPersistentStoreCoordinator 管理多个持久存储的删除和插入。到目前为止，我已经设法为 PSC 配置了两个商店，并且我已经能够通过指定其索引来删除其中一个商店。

像这样……</p>

```
NSPersistentStore *store = [[self.persistentStoreCoordinator persistentStores] objectAtIndex:0];

        if (![self.persistentStoreCoordinator removePersistentStore:store error:&error]) {

            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

            abort();

        }

        [[NSFileManager defaultManager] removeItemAtURL:store.URL error:&error]; 
```

但是我发现当我将商店重新添加到 PSC 时，索引值不正确，并且无法使用现有的类方法指定。这样做的后果是新数据被下载并添加到错误的存储中。

有人对如何做到这一点有任何建议吗？

**背景**（更新）

使用两个持久存储的原因是我可以为将通过网络下载的两个 xml 文档指定一个唯一的存储。由于这两个文件都比较大，我希望减少网络流量。因此，检查是否有任何文件已被修改。如果有，则删除相应的持久存储并添加新存储。这时候问题就开始了。添加新存储总是将其添加到 Persistent Stores Array 的末尾。当将数据与 MOC 合并时，这似乎会在存储中造成不匹配。

**代码** 这是我迄今为止尝试过的，它删除并添加了持久存储，但新数据被添加到错误的存储中。

```
static NSString * const kLastDateStoreUpdateKey = @"eventLastStoreUpdateKey";

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

NSString *last_modified = [NSString stringWithFormat:@"%@",[[(NSHTTPURLResponse *)response allHeaderFields] objectForKey:@"Last-Modified"]];

NSDateFormatter *dFormatter = [[NSDateFormatter alloc] init];
[dFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzz"];
[dFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"]];
[dFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];

dateModified = [dFormatter dateFromString:last_modified];
NSDate *previousDate = [[NSUserDefaults standardUserDefaults] objectForKey:kLastDateStoreUpdateKey];

if (!previousDate || [previousDate compare:dateModified] != NSOrderedSame) {

    [self.managedObjectContext lock];
    [self.managedObjectContext reset];

    if ([[NSFileManager defaultManager] fileExistsAtPath:self.persistentStorePath]) {
        NSError *error = nil;

        NSArray *stores = [self.persistentStoreCoordinator persistentStores];
        NSURL *storeUrls = [NSURL fileURLWithPath:persistentStorePath];
        for (NSPersistentStore *store in stores){

            if ([[store.URL absoluteURL] isEqual:[storeUrls absoluteURL]]) {
                if (![self.persistentStoreCoordinator removePersistentStore:store error:&error]) {
                    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                    abort();
                }
                [[NSFileManager defaultManager] removeItemAtURL:store.URL error:&error];
                NSLog(@"Check store removed %@", [self.persistentStoreCoordinator persistentStores]);
            }
        }
    }

   NSURL *storeUrl = [NSURL fileURLWithPath:persistentStorePath];
    NSError *error = nil;
    [self.persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&error];
    if (error) {
        NSLog(@"event error %@ %@",error, [[self.persistentStoreCoordinator persistentStores] objectAtIndex:0]);
    }
    NSLog(@"Check store added %@",self.persistentStoreCoordinator.persistentStores);

    [self.managedObjectContext unlock];

}else {
    [self cancelDownload];
    NSLog(@"event cancel %@ %@ %@",previousDate, dateModified, [self.persistentStoreCoordinator persistentStores]);
}
} 
```

**已解决** 正如 Hunter 在下面指出的那样，我的 PSC 配置设置为 nil。所以数据不会被添加到每个单独的持久存储中。当我在核心数据模型中创建配置并针对相关实体时，我将 PSC 设置为具有该配置。然后它按预期工作。见下文。

```
 NSURL *storeUrl = [NSURL fileURLWithPath:persistentStorePath];
NSError *error = nil;
[self.persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:@"ConfigEvent" URL:storeUrl options:nil error:&error];
if (error) {
    NSLog(@"event error %@ %@",error, [[self.persistentStoreCoordinator persistentStores] objectAtIndex:0]);
}
NSLog(@"Check store added %@",self.persistentStoreCoordinator.persistentStores); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:13:46.523

如果您确实需要这两个商店 [我无法从您的解释中判断这是否真的是最好的方法]，您可能希望通过属性或 ivar 引用它们，而不是依赖数组。

或者，您可以遍历 PSC 的 stores 数组并通过检查 URL 来识别每一个。

**更新：**

如果您在将特定数据存储在不同的 NSPersistentStore 中时遇到问题，请查看 Core Data 配置。这允许您告诉 Core Data 将特定实体放在特定的持久存储中。

您在模型中以及添加持久存储时指定配置。更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:26:21.777

您应该能够通过一个持久存储协调器和两个托管对象上下文来实现这一点。如果您遇到影响性能的锁定，您只需要考虑两个持久存储协调器的复杂性。

记住：最简单的事情 (tm)

# jquery - jQuery选择和取消选择图像

> ID：10516161
> 
> 赞同：0
> 
> 时间：2012-05-09T12:31:52.213
> 
> 标签：jquery

我有图像设置 div 标签，如下所示

```
<div style="width: 600px; background: #CCC;padding: 50px;" class="jjj">
<img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg" class="ddd"  width="200"/>
<img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg" class="ddd"  width="200"/>
<img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg" class="ddd"  width="200"/>
</div> 
```

我的 CSS 是

```
<style>
.ddd:hover{
            transform: scale(1.2);
-ms-transform: scale(1.2); /* IE 9 */
-webkit-transform: scale(1.2); /* Safari and Chrome */
-o-transform: scale(1.2); /* Opera */
-moz-transform: scale(1.2); /* Firefox */
        }

        .selectedd{
            transform: scale(1.2);
-ms-transform: scale(1.2); /* IE 9 */
-webkit-transform: scale(1.2); /* Safari and Chrome */
-o-transform: scale(1.2); /* Opera */
-moz-transform: scale(1.2); /* Firefox */
border:2px inset silver;
        }
</style> 
```

当用户单击它时我需要选择图像（更改类），我为此添加了脚本并且它可以工作，但是当用户单击外部时我如何取消选择该图像，我的意思是在 div 标签上。我的 jQuery

```
<script>
$(function(){
    $('.ddd').click(function(){
        ff=this;
        $('.ddd').removeClass('selectedd')
        $(ff).addClass('selectedd')
    }); 
    });
</script> 
```

请帮我。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:36:13.273

当用户单击图像时使用`stopPropagation()`，否则捕获正文（或其他元素）上的单击事件并删除`selectedd`图像上的类（如果有）

```
$(function(){
    var ff;

    $('.ddd').on('click', function(evt) {
        ff = $(this);
        evt.stopPropagation();
        $('.ddd').removeClass('selectedd')
        ff.addClass('selectedd')
    }); 
    $('body').on('click', function() {
        if (ff.length) {
           ff.removeClass('selectedd')
        }
    });
}); 
```

# sql-server-2008 - SQL server 2008 - 从 SP 插入表，使用两个输入参数列表

> ID：10516162
> 
> 赞同：1
> 
> 时间：2012-05-09T12:31:54.510
> 
> 标签：sql-server-2008, stored-procedures

我必须修改一个存储过程，它以 CSV varchar(MAX) 格式插入作为输入参数传递的数据，但现在我必须将两个列表传递给 SP，并且必须将其插入表中

我传递的数据如下

```
lstid = 1,2,3,4,5 etc.
lstvalue = 10,20,22,35,60 etc. 
```

这里 lstid 映射到 lstvalue，意味着 lstid = 1 的值为 10，lstid = 2 的值为 20，依此类推

我应该怎么做才能根据映射插入记录

我正在使用一个函数来分离 CSV 值并将其存储在 temptable 中，但它仅适用于一列

功能和这里一样

[http://www.sqlteam.com/Forums/topic.asp?TOPIC_ID=14185](http://www.sqlteam.com/Forums/topic.asp?TOPIC_ID=14185)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:54:04.810

如果您被迫在存储过程中执行此操作并且您的数组大小相等，您可以加入两个列表，拆分它们，然后加入位置（每个数组中的元素数）以获得您需要的链接集。

下面的示例使用[数字表](https://stackoverflow.com/questions/1393951/what-is-the-best-way-to-create-and-populate-a-numbers-table)，但您可以用任何替换该拆分操作。

```
-- if you dont have a number table:
/*
   create table [dbo].[Number](n int not null primary key clustered);
   insert into dbo.Number
        values  (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),
                (11),(12),(13),(14),(15),(16),(17),(18),(19),(20)

*/

declare @lstid varchar(100) = '1,2,3,4,51',
        @lstvalue varchar(100) = '10,20,22,35,60'

declare @Length tinyint,
        @Input  varchar(8000),
        @Delimiter  char(1)

-- sanity check
if len(@lstid)-len(replace(@lstid, ',', '')) <> len(@lstvalue)-len(replace(@lstvalue, ',', ''))
begin
    raiserror('lists are not equal', 16, 1);
    return;
end

--count the numbers of elements in one of the arrays
select @Length = len(@lstid)-len(replace(@lstid, ',', ''))+1;

--join the two arrays into one
select @Input = @lstid + ',' + @lstvalue;

set @Delimiter = ',';

;with cte (i,s)
as  (   
        select  row_number() over (order by n.n asc) [i],
                substring(@Delimiter + @Input + @Delimiter, n.n + 1, charindex(@Delimiter, @Delimiter + @Input + @Delimiter, n.n + 1) - n.n - 1) [s]
        from    dbo.Number n
        where   n.n = charindex(@Delimiter, @Delimiter + @Input + @Delimiter, n.n) and
                n.n <= len(@Delimiter + @Input)
    )
select  a.s, b.s
from    cte a
join    cte b on
        a.i+@Length = b.i
order
by      a.i;

return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:39:33.180

您可以将参数列表作为 XML 传递。

参数：

```
<lst><id>1</id><value>10</value></lst>
<lst><id>2</id><value>20</value></lst>
<lst><id>3</id><value>22</value></lst>
<lst><id>4</id><value>35</value></lst>
<lst><id>5</id><value>60</value></lst> 
```

和程序

```
create procedure AddXML
  @XML xml
as
insert into YourTable(id, value)
select N.value('id[1]', 'int'),
       N.value('value[1]', 'int')
from @XML.nodes('/lst') as T(N) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:34:34.563

使用 .net 代码中的数据创建一个数据表并将其传递给 SP。

[如何从.net将数据表传递给Sp](https://stackoverflow.com/questions/10295326/should-you-make-multiple-insert-calls-or-pass-xml/10295812#10295812)

# c# - 从由 Windows 服务启动的 Java 应用程序打开新进程

> ID：10516163
> 
> 赞同：0
> 
> 时间：2012-05-09T12:31:54.590
> 
> 标签：c#, java

我有一个 java 应用程序，它使用 Runtime.getRuntime().exec() 打开 notepad.exe。

我想将此应用程序作为 Windows 服务运行。所以我使用 C# 创建了一个 Windows 服务。

我可以使用“installutil”命令成功安装该服务。

但是，尽管我的 java 应用程序由 windows 服务正常启动，但它并没有打开 notepad.exe。

我认为问题在于该服务作为 SYSTEM 进程运行，而不是作为当前登录用户运行。因此，我通过在 installutil 命令中提供用户凭据，在当前用户下安装了该服务。

然后服务和java应用程序在当前用户下正确启动，我可以看到notepad.exe也在同一个用户下创建。但记事本不可见。

任何人都可以指导这里发生的事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:42:18.387

听起来它是在另一个背景下开始的。

在服务选项中尝试选中“本地系统帐户”单选按钮，然后选中“允许服务与桌面交互”复选框。

# spring-security - Spring Security - 如何在 JSP 中呈现剩余的登录尝试

> ID：10516166
> 
> 赞同：0
> 
> 时间：2012-05-09T12:31:57.490
> 
> 标签：spring-security

我试图在每次不成功的登录尝试后向用户显示剩余的登录尝试。因此，在每次登录失败后，我们都会提示用户他可以尝试登录的剩余计数。

任何帮助或指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:05:53.303

通过网络后，我找到了解决方案。我继承了 DaoAuthenticationProvider 类并覆盖了 additionalAuthenticationChecks() 方法并执行了我的工作。现在，它的工作。

我发布它是希望有人会觉得它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:36:53.897

我认为您应该在数据库中有一个条目。如果用户在登录页面中输入的用户名与数据库中的用户名匹配，则将其登录计数增加 1。因此，我们可以保持登录失败计数。对于每次成功登录，将失败计数值设置为零。

# c# - 将文件从 C# windows 窗体中的文件夹填充到列表框中

> ID：10516167
> 
> 赞同：6
> 
> 时间：2012-05-09T12:32:09.980
> 
> 标签：c#, winforms, visual-studio, visual-studio-2010

我是 C# 的新手，我有 2 个列表框 l-->istBox1 和 listBox2，我想将文件夹中的文件加载到这些列表框中。我试过这样： `listBox1:`

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            DirectoryInfo dinfo = new DirectoryInfo(@"C:\TestLoadFiles");
            FileInfo[] Files = dinfo.GetFiles("*.rtdl");
            foreach (FileInfo file in Files)
            {
                listbox1.Items.Add(file.Name);
            }

        } 
```

`listBox2:`

```
private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            DirectoryInfo dinfo = new DirectoryInfo(@"C:\TestLoadFiles");
            FileInfo[] Files = dinfo.GetFiles("*.dlz");
            foreach (FileInfo file in Files)
            {
                listbox2.Items.Add(file.Name);
            }
        } 
```

当我运行表单时，文件夹中的文件没有显示？？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T12:37:01.990

而不是 listBox1_SelectedIndexChanged，更新列表框对一些按钮单击，否则您的代码看起来不错。最初，您的列表框中可能没有任何项目，这就是为什么 SelectedIndexChanged 在您单击它时不会被触发的原因。

编辑：（由于问题已被编辑，我将更新我的答案）
要使用文件填充您的列表框，您应该这样做，在 SelectedIndexChanged 以外的某些情况下。因为在您的应用程序开始时，您的列表框是空的，并且当列表框中有项目并且用户单击它时会触发 SelectedIndexChanged 事件。您可以创建以下功能

```
private void PopulateListBox(ListBox lsb, string Folder, string FileType)
{
    DirectoryInfo dinfo = new DirectoryInfo(Folder);
    FileInfo[] Files = dinfo.GetFiles(FileType);
    foreach (FileInfo file in Files)
    {
        lsb.Items.Add(file.Name);
    }
} 
```

现在，您可以在某些情况下使用您的列表框调用此函数，以对抗按钮单击或表单加载。例如

```
private void Form1_Load(object sender, EventArgs e)
{
    PopulateListBox(listbox1, @"C:\TestLoadFiles", "*.rtld");
    PopulateListBox(listbox2, @"C:\TestLoadFiles", "*.other");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:39:32.820

我想是错误的事件。将该代码移动到窗体/控件的构造函数或将其附加到另一个控件的事件。当列表框的初始状态为空时，在 SelectedIndexChanged 上重新填充列表框没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:37:51.553

这可能有效；）

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    DirectoryInfo dinfo = new DirectoryInfo(@"C:\TestLoadFiles");
    FileInfo[] Files = dinfo.GetFiles("*.rtdl");
    foreach (FileInfo file in Files)
    {
        listbox2.Items.Add(file.Name);
    }
} 
```

# cairo - cairo 可以加载 PDF 吗？

> ID：10516171
> 
> 赞同：3
> 
> 时间：2012-05-09T12:32:14.360
> 
> 标签：cairo, pycairo

这听起来很简单，但我找不到将 PDF 加载到开罗的方法。我希望能够以`cairo.PDFSurface.create_from_pdf`与我相同的方式做`cairo.ImageSurface.create_from_png`（是的，我正在使用 Python 绑定，但这既不是这里也不是那里）。

该[文档](http://www.cairographics.org/manual/cairo-PDF-Surfaces.html)似乎没有给出任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:14:15.897

不，cairo 无法阅读 PDF。但是，poppler 可以加载 PDF 并将它们绘制到 cairo 上下文 - [http://poppler.freedesktop.org/](http://poppler.freedesktop.org/)

（哦，create_from_png() 是 cairo 的玩具 API 的一部分。它可以工作，但建议您使用一些“真正的”API，它可以做更多的事情，而不仅仅是加载 PNG）

# php - 在 PHP 中获取最后一次出现的一天/一个月

> ID：10516174
> 
> 赞同：1
> 
> 时间：2012-05-09T12:32:34.937
> 
> 标签：php, strtotime, unix-timestamp

我想知道是否有一种简单的方法（比如使用 strtotime），我可以获得最后一次出现的日/月组合的 unix 时间。例如，如果我今天（2012 年 5 月 9 日）要求“9 月 1 日”，我会得到 1314835200（2011 年 9 月 1 日），但如果代码在今年 10 月再次运行，我会得到 1346457600（2012 年 9 月 1 日） ，如果我从现在开始运行它 1 年也是一样。

能够向前和向后做到这一点将是一个巨大的好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T12:35:04.243

```
$month = 9;
$day = 1;

$timestamp = mktime(0, 0, 0, $month, $day);
if ($timestamp > time()) {
    $timestamp = mktime(0, 0, 0, $month, $day, date('Y') - 1);
} 
```

# spring-mvc - 如何使用spring mvc在jsp中显示错误

> ID：10516180
> 
> 赞同：0
> 
> 时间：2012-05-09T12:32:52.920
> 
> 标签：spring-mvc

我无法在 jsp 页面中收到错误消息。实际上，我试图检查数据库中的用户名和密码是否正确。我从 dao 抛出数据异常并在控制器处捕获检查以下代码

**简单表单控制器**

```
public ModelAndView onSubmit(HttpServletRequest request, HttpServletResponse response,Object command,BindException errors) throws Exception {

        log.info("onSubmit handleRequest method"+request.getParameter("username"));
        boolean isError=false;
        String username="",password="",errMessage="";
        username=request.getParameter("username");
        password=request.getParameter("password");

        UserBean ubean=null;
        try{
             ubean=userservice.chkUsername(username,password);
        }catch(DataException ex){

            errMessage=ex.getMessage();
            isError=true;
            //throw ex;
        }
        if(isError==true){
            System.out.println("errMessage handleRequest method"+errMessage);
            errors.reject(errMessage);
            return showForm(request, response, errors);
        }
        log.info("After shownform method called");
        HttpSession session=request.getSession(true);
        session.setAttribute("User",ubean);
        return  new ModelAndView("UserPage");
        }

public ModelAndView showForm(HttpServletRequest request, HttpServletResponse response,BindException errors) throws Exception {
                 //Displaying Count size
    log.info("Show form Error Count"+errors.getErrorCount()+getFormView());
    return new ModelAndView(getFormView());
} 
```

我试图在 jsp 页面中以两种方式显示，即

**Jsp页面： -**

```
1)
                <spring:hasBindErrors name="UserBean">
                     <h3>You have errors in your input!</h3>  
    <font color="red">  
                    <c:forEach items="${errors.allErrors}" var="error">  
     <spring:message code="${error.code}" text="${error.defaultMessage}"/>  
    </c:forEach>  
    </font>  
                   </spring:hasBindErrors>
2) <form:form action="userpage.htm" method="post"  onsubmit="javascript:fun()">
                    <tr>
                     <form:errors path="*"/> 
                      --------
                       --------
  </form:form> 
```

我试图在jsp中显示以上两种方式。但最后我没有得到任何东西。上面的代码有什么问题吗。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:25:59.190

您是否尝试过使用 BindingResult.hasError()？并指定要在哪个字段上显示错误。

还要确保您使用的错误代码在您的 proerpty 文件中。

如果您使用 ModelAttribute 将模型绑定到您的视图，那么处理 jsp 中的错误会容易得多。如果你愿意，我可以在这里放一些代码。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:20:13.380

我用来形成验证的方法如下：

将“验证器”属性添加到您的控制器：

```
<bean class="YourController">
    ...
    <!-- Map a validator -->
    <property name="validator">
        <bean class="CustomerValidator" />
    </property>
    ...
 </bean> 
```

创建实现 org.springframework.validation.Validator 的类并实现两个方法：supports 和 validate：

```
public class CustomerValidator implements Validator{

   @Override
   public boolean supports(Class clazz) {

   }

   @Override
   public void validate(Object target, Errors errors) {

   }
} 
```

我会从控制器类的主体中消除验证逻辑。

查看下面的例子，相信你会发现它很有用：[Spring MVC 表单处理示例](http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-example/)

# ruby-on-rails-3 - 在生产中启用完整的回溯日志记录

> ID：10516190
> 
> 赞同：2
> 
> 时间：2012-05-09T12:33:34.663
> 
> 标签：ruby-on-rails-3, debug-backtrace

我只在生产中遇到错误并对其进行调试，我想在生产中启用完全回溯。

我已经有了`config.log_level = :debug`in `config/environments/production.rb`，但这并没有给我回溯，只详细记录查询、请求和服务资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-14T09:30:45.650

要在生产环境中显示回溯，请`config.consider_all_requests_local = true`设置`config/environments/production.rb`. 将其保持打开状态并不是一个好习惯，但是在配置新的生产环境时它会很有用。

# groovy - 如何从没有最后一个元素的列表中获取所有元素？

> ID：10516191
> 
> 赞同：18
> 
> 时间：2012-05-09T12:33:37.440
> 
> 标签：groovy

以下 Groovy 代码

```
 lines = ['0','1','2','3','4','5']
    println lines[1..lines.size()-1]
    println lines[1..-1]
    println lines[1..<lines.size()-1]
    println lines[1..<-1]
    println lines[1..<-2]
    println lines[1..-2] 
```

产生这个输出：

```
[1, 2, 3, 4, 5]
[1, 2, 3, 4, 5]
[1, 2, 3, 4]
[1, 0]
[1, 2, 3, 4, 5]
[1, 2, 3, 4] 
```

因为`-1`是列表中最后一个元素的索引，所以前两个是有意义的（Groovy 中的范围包括结束元素，而不是像 Java 中的其他任何地方一样省略它:-()

第 3 行是所需的输出（没有第一个和最后一个元素的列表）。

我很担心输出#4：为什么我会得到`[1, 0]`for `1..-1`？

同样`[1, 2, 3, 4, 5]`对于范围`1..<-2`似乎是错误的。

为什么会这样？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T13:13:17.230

在我看来，获取除最后一个元素之外的所有元素的最佳方法是使用以下[`take`](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/List.html#take(int))方法：

```
def list = ['a', 'b', 'c']
assert list.take(list.size() - 1) == ['a', 'b'] 
```

它在 size == 1 的极端情况下表现正常：

```
def list = ['one']
assert list.take(list.size() - 1) == [] 
```

虽然我更希望它在 case size == 0 的情况下抛出异常，但行为并没有那么糟糕：

```
def list = []
assert list.take(list.size() - 1) == [] 
```

您也可以使用`list[0..<list.size()-1]`（您的第三个示例），除了空列表外，它的行为相同，在这种情况下它会抛出一个`ArrayIndexOutOfBoundsException`，但我认为它不像`take`对应的那样可读。

* * *

另一个可接受的解决方案是使用`list[0..-2]`（你的最后一个例子），我认为它看起来更优雅，但不幸的是当 size == 1 和`ArrayIndexOutOfBoundsException`.

* * *

在您的示例中（如果您想包含除最后一个以外的所有元素，我假设您打算使用 0 作为起始索引而不是 1）：

`lines[0..lines.size()-1]`等价于，`lines[0..-1]`因为列表的方法会以与访问列表的第 ' 个元素`getAt(Range)`相同的方式处理具有负索引的范围。因此与“从第一个元素到最后一个元素”相同，与复制列表相同；和“从最后到第一个”相同，相当于:)`getAt(Integer)``(list.size() + negativeIndex)``list[0..-1]``list[-1..0]``list.reverse()`

另一个非包含范围示例的问题是，非包含范围在列表访问之前被评估，并且它们评估为不正确的包含范围。例如，`0..<-2`计算结果为`0..-1`，这就是它返回所有元素的原因。`0..<-1`计算结果为`0..0`，它只返回第一个元素。

请注意，空范围是一种特殊情况。它被表示为`0..<0`并且它没有包含的等价物（因此 Groovy 不会在此处进行任何魔术转换）。这就是为什么`list[0..<list.size()-1]`当 size == 1 （范围评估为空范围）时有效，而`list[0..-2]`没有 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T03:17:02.463

自从 Epideman 写下他的答案以来，这可能已经改变了，但是你可以得到整个列表而没有最后一个元素`0..<-1`：

```
assert ["foo"][0..<-1] == []
assert ["foo", "bar"][0..<-1] == ["foo"]
assert ["foo", "bar", "baz"][0..<-1] == ["foo", "bar"]

// blows up if empty, here take is better
assert [][0..<-1] == []  // BOOM

// if you want null safe, use take
assert [].take(-1) == [] 
```

这是 groovy 2.2.1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-30T13:44:12.037

从 Groovy 2.4 开始，您可以使用[init()](http://mrhaki.blogspot.se/2015/01/groovy-goodness-getting-all-but-last.html)方法：

```
lines = ['0','1','2','3','4','5']
assert lines.init() == ['0','1','2','3','4'] 
```

# javascript - 更改 javascript 数组名称、值对

> ID：10516194
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:33:46.023
> 
> 标签：javascript, arrays

简单的javascript问题：

我有一个数组 (50=50; 49=49; 143=143; 4005=4005; ... )
，我想变成 (50; 49; 143; 4005; ...)。

在 name=value 对中，名称将始终与值相同。
它总是一个数字（但长度不同）。

我只是无法使用 .split 解决它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:39:00.810

假设你的意思是你有一个这样的数组：

```
var arr = ['50=50;','49=49;','143=143;','4005=4005;']; 
```

然后，您可以`split`这样使用：

```
var newArr = [], ii;
for (ii = 0; ii < arr.length; ii += 1) {
    newArr.push(parseInt(arr[ii].split('=')[0], 10));
} 
```

这将导致`newArr`等于：

```
var newArr = [50, 49, 143, 4005]; 
```

工作方式`split`是将字符串划分为基于分隔符字符串的数组。在这个例子中，我们使用`'='`了分隔符，所以我们最终得到这样的数组：

```
['50', '50;']
['49', '49;']
// etc. 
```

然后，索引到第一个元素并将其传递给以`parseInt`产生一个数字，然后`push`到一个只有数字元素的新数组上。

这是一个[工作示例](http://jsfiddle.net/d87W7/)。

### 附录

如果你不是从一个实际的 JavaScript 数组开始，而是一个你想转换成数组的字符串，那么在前面的步骤之前添加这个步骤以获得原始数组：

```
var str = '(50=50; 49=49; 143=143; 4005=4005;)';
var arr = str.replace(/\(|\)|;/g, '').split(' '); 
```

# c++ - 将 int 附加到 std::string

> ID：10516196
> 
> 赞同：78
> 
> 时间：2012-05-09T12:33:52.833
> 
> 标签：c++, std

为什么这段代码会给出调试断言失败？

```
 std::string query;
   int ClientID = 666;
   query = "select logged from login where id = ";
   query.append((char *)ClientID); 
```

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-05-09T12:40:35.330

该[`std::string::append()`](http://en.cppreference.com/w/cpp/string/basic_string/append)方法期望其参数是一个以 NULL 结尾的字符串 ( `char*`)。

有几种方法可以生成`string`包含 an `int`：

*   [`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)

    ```
    #include <sstream>

    std::ostringstream s;
    s << "select logged from login where id = " << ClientID;
    std::string query(s.str()); 
    ```

*   [`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)(C++11)

    ```
    std::string query("select logged from login where id = " +
                      std::to_string(ClientID)); 
    ```

*   [`boost::lexical_cast`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)

    ```
    #include <boost/lexical_cast.hpp>

    std::string query("select logged from login where id = " +
                      boost::lexical_cast<std::string>(ClientID)); 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T12:41:24.643

您不能将 int 转换为 char* 以获取字符串。尝试这个：

```
std::ostringstream sstream;
sstream << "select logged from login where id = " << ClientID;
std::string query = sstream.str(); 
```

[字符串流参考](http://www.cplusplus.com/reference/iostream/stringstream/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T12:43:55.440

我有一种感觉，您`ClientID`的不是字符串类型（以零结尾`char*`或`std::string`），而是某种整数类型（例如`int`），因此您需要先将数字转换为字符串：

```
std::stringstream ss;
ss << ClientID;
query.append(ss.str()); 
```

但您也可以使用`operator+`（而不是`append`）：

```
query += ss.str(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T12:39:32.433

您正在转换`ClientID`为 char* 导致函数假定它是一个空终止的 char 数组，但事实并非如此。

来自 cplusplus.com：

> 字符串& 附加 ( const char * s ); 附加由 s 指向的以空字符结尾的字符序列（C 字符串）形成的字符串的副本。此字符序列的长度由第一次出现的空字符确定（由 traits.length(s) 确定）。

# javascript - 不安全的 JavaScript 尝试使用 URL 访问框架（同一个域！）

> ID：10516197
> 
> 赞同：0
> 
> 时间：2012-05-09T12:33:57.590
> 
> 标签：javascript, jquery, security

在页面上`file://localhost/Users/pistacchio/dev/epress/catflow/test_html/index.html`，我有以下（coffeescript）代码试图访问 iframe：

```
$('#ipad-viewport iframe').bind 'load', () ->
    console.log $(this).contents().find('map') 
```

（这转换为以下javascript，但我认为问题不依赖于此）：

```
(function() {

  $('#ipad-viewport iframe').bind('load', function() {
    return console.log($(this).contents().find('map'));
  });

}).call(this); 
```

我等待加载 iframe 页面并尝试访问其正文中的元素。我收到以下错误：

```
Unsafe JavaScript attempt to access frame with URL file://localhost/Users/pistacchio/dev/epress/catflow/test_html/catalogo/catalog/intro.html from frame with URL file://localhost/Users/pistacchio/dev/epress/catflow/test_html/index.html. Domains, protocols and ports must match. 
```

现在，由于 iframe 是这样定义的：

```
<iframe src="file://localhost/Users/pistacchio/dev/epress/catflow/test_html/catalogo/catalog/intro.html" width="1024" height="768"></iframe> 
```

我的页面和 iframe 不是在同一个域中，还是`file://localhost`？为什么我会遇到这个问题？

哦，如果相关的话，我正在使用 Chrome 18 进行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:47:08.787

`file:///`URL 受制于与`same origin policy`适用于托管内容的正常情况略有不同的 javascript 安全策略。为了阻止保存的网页读取磁盘的全部内容，不同的文件被视为不同的来源。只需启动本地服务器并在其上托管您的内容；您将退回到由域/IP 定义来源的“标准”策略。

如果由于某种原因您无法运行 Web 服务器，您可能会从命令行开关中获得一些好处：`--allow-file-access-from-files`. 我相信这会影响将所有`file:///`URL 定义为属于同一来源。

# c - 数组初始化

> ID：10516200
> 
> 赞同：0
> 
> 时间：2012-05-09T12:34:01.777
> 
> 标签：c, arrays, data-structures

我在 Linux 中遇到了这个代码结构并想了解它

```
struct mystruct {
  int x;
  int b[40];
};

/*later */

static struct mystruct e = { .x = 5,
                             .b = {-1},   
                           }; 
```

.b = {-1} 做什么？它是否仅初始化数组 b 的第一个或所有元素？它是如何工作的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:46:48.483

```
static struct mystruct e = {
    .x = 5,
    .b = {-1},   
             }; 
```

在这里它将 b[0] 初始化为 -1。其他元素初始化为0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:35:34.663

这意味着**使用以 -1 开头并后跟 0 的数组初始化结构的成员 b**

*   这`.b =`是一个 GCC 扩展。（正如评论，从 C99 这也是标准的一部分）
*   这`{-1}`是标准数组初始化。

# git - 使用 git 版本控制仅更新和提交文件的权限

> ID：10516201
> 
> 赞同：232
> 
> 时间：2012-05-09T12:34:03.347
> 
> 标签：git

刚刚将`some.sh`文件转换为可执行文件 ( `chmod 755 ...`)，权限已更新，但内容未更新。有没有办法将文件*提交*到 git 中，以便在*clone* / *checkout* / *pull*时恢复/设置可执行位？

**更新：**如何跟踪新权限已提交到`github`？

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2014-01-12T04:39:04.070

@fooMonster 文章对我有用

```
# git ls-tree HEAD
100644 blob 55c0287d4ef21f15b97eb1f107451b88b479bffe    script.sh 
```

如您所见，该文件具有 644 权限（忽略 100）。我们想将其更改为 755：

```
# git update-index --chmod=+x script.sh 
```

提交更改

```
# git commit -m "Changing file permissions"
[master 77b171e] Changing file permissions
0 files changed, 0 insertions(+), 0 deletions(-)
mode change 100644 => 100755 script.sh 
```

* * *

## 回答 #2

> 赞同：224
> 
> 时间：2012-05-09T12:45:31.690

默认情况下，如果您更改它们，git 将更新执行文件权限。它不会更改或跟踪任何其他权限。

如果您在修改执行权限时没有看到任何更改，您可能在 git 中有一个忽略文件模式的配置。

查看您的项目，在文件所在的`.git`文件夹中`config`，您应该会看到如下内容：

```
[core]
    filemode = false 
```

您可以`true`在您喜欢的文本编辑器中将其更改为，或运行：

```
git config core.filemode true 
```

然后，您应该能够正常提交您的文件。它只会提交权限更改。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-06-26T18:38:56.050

不为我工作。

模式为真，文件权限已更改，但 git 说没有工作可做。

```
git init
git add dir/file
chmod 440 dir/file
git commit -a 
```

问题似乎是 git 只识别某些权限更改。

# javascript - 在 IE / FF 中使用 getElementsByTagName 时自定义标签的处理方式不同

> ID：10516202
> 
> 赞同：2
> 
> 时间：2012-05-09T12:34:03.770
> 
> 标签：javascript, html, xml

我有以下页面：

```
<html>
<head>
    <title>Test</title>
    <script type="text/javascript">
        function BuildTree() {
            var total = 0;
            var pages = document.getElementsByTagName('custom:page');
            var questions = pages[0].getElementsByTagName('custom:question');
            for (var i = 0; i < questions.length; ++i) {
                var question = questions[i];
                var val = question.getAttribute('value')
                total += val;
            }
            alert("Total: " + total);
        };
    </script>
</head>
<body>
    <custom:pages>
        <custom:page>
            <custom:question  value="1">aaa</custom:question>
            <custom:question  value="2">bbb</custom:question>
            <custom:question  value="3">ccc</custom:question>
        </custom:page>
        <custom:page>
            <custom:question  value="1">aaa</custom:question>
            <custom:question  value="2">bbb</custom:question>
            <custom:question  value="3">ccc</custom:question>
        </custom:page>
    </custom:pages>
    <input id="btnTest" type="button" value="Test" onclick="BuildTree();" />
</body>
</html> 
```

当我在 IE 中单击 Test 按钮时，结果为 0，当我在 FF 中单击它时，结果为 0123。

如何在两个浏览器中获得相同的结果？即'0123'。

请注意，我已将其精简为尽可能简单的示例。我不能使用 jquery 或任何第三方库，我需要一个纯 JavaScript 解决方案。我也无法更改 custom: 标签。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:51:09.853

```
<html xmlns:custom="http://www.test.com">
<head>
    <title>Test</title>
    <script type="text/javascript">
        // We want to find all the question tags withing a page tag
        // getElementsByTagName works fine when using standard HTML tags within each other
        function BuildTree() {
            var total = 0;
            // These two do not work in IE but do work in FF
            //var pages = document.getElementsByTagName('custom:page');
            //var questions = pages[0].getElementsByTagName('custom:question');

            // These only work in FireFox (and require a namespace)
            //var pages = document.getElementsByTagNameNS('http://www.test.com', 'page'); // FF only
            //var questions = pages[0].getElementsByTagNameNS('http://www.test.com', 'question'); // FF only

            // Adding a namespace ' xmlns:custom="http://www.test.com"' to the document and removing the 'custom:' from the search works correctly
            var pages = document.getElementsByTagName('page');
            var questions = pages[0].getElementsByTagName('question');

            for (var i = 0; i < questions.length; ++i) {
                var question = questions[i];
                var val = question.getAttribute('value')
                total += val;
            }
            alert("Total: " + total);
        };
    </script>
</head>
<body>
    <custom:pages>
        <custom:page>
            <custom:question value="1">aaa</custom:question>
            <custom:question value="2">bbb</custom:question>
            <custom:question value="3">ccc</custom:question>
        </custom:page>
        <custom:page>
            <custom:question value="1">aaa</custom:question>
            <custom:question value="2">bbb</custom:question>
            <custom:question value="3">ccc</custom:question>
        </custom:page>
    </custom:pages>
    <input id="btnTest" type="button" value="Test" onclick="BuildTree();" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:47:00.363

为了使它工作，您需要制作页面 XHTML 并定义您的自定义命名空间，然后使用[getElementsByTagNameNS](https://developer.mozilla.org/en/DOM/element.getElementsByTagNameNS)。也可以使用**XSLT 。**

# android - android，将文件从电脑推送到安卓设备

> ID：10516204
> 
> 赞同：0
> 
> 时间：2012-05-09T12:34:04.493
> 
> 标签：android, push

如何将文档从 PC(windows) 推送到 android 设备/模拟器？您有任何示例源代码或想法吗？请发送您的回复

问候，马拉地语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:41:46.873

[http://www.androidaz.com/development/how-install-application-and-copy-files-android-emulator](http://www.androidaz.com/development/how-install-application-and-copy-files-android-emulator)

如果有帮助，请接受答案

步骤：运行android应用程序

打开文件资源管理器 [eclipse =windows>显示视图>文件资源管理器

你会看到一个窗口 .insert 那里

详细教程

[http://www.apurbadebnath.com/blog/android/android-emulator-tips/](http://www.apurbadebnath.com/blog/android/android-emulator-tips/)

如果您接受答案，请单击右键

# java - JTable 刷新不显示

> ID：10516213
> 
> 赞同：3
> 
> 时间：2012-05-09T12:34:47.640
> 
> 标签：java, swing, jtable

当我更改数据时，我拼命试图说服我`JTable`刷新。数据存储在`TreeSet`我正在使用的全局单例中。每当`TreeSet`更改 s 数据时，都会触发一个事件以刷新`TableModel`. 出于测试目的，我将其替换为简单的`Timer`触发事件。

每次触发事件时，都会从`TreeSet`中删除一个元素以模拟数据的变化。该事件触发并且`TableClass`接收它并按预期处理它，但是在刷新时没有任何反应。`TableModel`每次发生事件时，我都尝试创建一个新的并将其设置为全局表。对单例`TreeSet`进行了更改，但`JTable`.

```
public class TreeTableObj implements ActionListener{
public JTable table ;

public TreeTableObj(){
    MyTableModel myModel = new MyTableModel(getValuesOfTreeSet(), getTreeSetRows());

    table = new JTable( myModel){ //some rendering };

    table.setAutoCreateRowSorter(true);
    }

    class MyTableModel extends AbstractTableModel {
        private String[] columnNames;
        private Object[][] data ;

        public MyTableModel(Object[][] data, String[] columnNames){
            this.data = data;
            this.columnNames = columnNames;
            System.out.println("Model created");
        }

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        public void setData(Object[][] data){
            this.data = data;
            fireTableDataChanged();
        }

        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        public void setValueAt(Object value, int row, int col) {
            if (true) {
                System.out.println("Setting value at " + row + "," + col
                                   + " to " + value
                                   + " (an instance of "
                                   + value.getClass() + ")");
            }

            data[row][col] = value;
            fireTableCellUpdated(row, col);

            if (true) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        private void printDebugData() {
            int numRows = getRowCount();
            int numCols = getColumnCount();

            for (int i=0; i < numRows; i++) {
                System.out.print("    row " + i + ":");
                for (int j=0; j < numCols; j++) {
                    System.out.print("  " + data[i][j]);
                }
                System.out.println();
            }
            System.out.println("--------------------------");
        }
    }

    public void refreshTableModel(){
        FlightsTreeSet.getInstance().remove(FlightsTreeSet.getInstance().first());
        table.setModel(new MyTableModel(getValuesOfTreeSet(), getTreeSetRows()));
        }

    public void actionPerformed(ActionEvent arg0) {
        refreshTableModel();    
    }
} 
```

任何帮助，将不胜感激！

**[编辑1]**

我越来越接近问题核心：我发现显示在 JFrame 中的表包含另一个引用作为我更改的那个。我使所有更改可见，它们适用于模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:43:27.417

您的代码中是否缺少某些内容？您的表模型不应该编译，因为它缺少 JTable 用于访问数据的所有方法（`getColumnCount()`,`getValueAt()`等）

此外，您不必在每次更改时都创建新模型 - 只需拥有 model `fireTableStructureChanged()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:50:00.260

我发现了问题。并将答案留给其他人......在意识到显示的`JTable`和我正在编辑的那个拥有不同的引用之后（参见[EDIT1]），我发现我正在创建两个不同的`JTable`. 一个要显示，另一个`main()`要成为`ActionListener`. 侦听器收到事件并进行更改，但另一个从未注意到发生了任何事情。

# php - CURL 获取外部页面 cookie 并在我的页面中使用它们

> ID：10516219
> 
> 赞同：1
> 
> 时间：2012-05-09T12:34:55.013
> 
> 标签：php, cookies, curl

我试图从外部页面获取所有 cookie 并将它们设置在我的页面中，我有这个脚本：

```
 $url = "http://www.booking.com/hotel/cz/red-blue-design-prague.html?checkin=2012-07-07&interval=1&selected_currency=USD";
 $ckfile = tempnam ("tmp", "CURLCOOKIE");

 $options = array(
    CURLOPT_RETURNTRANSFER => TRUE,     // return web page
    CURLOPT_HEADER         => TRUE,     // do not return headers
    CURLOPT_HEADER         => TRUE,     // do not return headers
    CURLOPT_FOLLOWLOCATION => TRUE,     // follow redirects
    CURLOPT_USERAGENT      => "googlebot", // who am i
    CURLOPT_AUTOREFERER    => TRUE,     // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120,        // timeout on connect
    CURLOPT_TIMEOUT        => 120,        // timeout on response
    CURLOPT_MAXREDIRS      => 3,        // stop after 10 redirects
    CURLOPT_ENCODING       => 'UTF-8',
    CURLOPT_COOKIEJAR      => $ckfile,
    CURLOPT_COOKIEFILE     => $ckfile
  );
  $ch = curl_init();
  curl_setopt_array( $ch, $options );
  curl_setopt($ch, CURLOPT_URL, $url);
  $a = curl_exec($ch); 
```

但是当我检查时它没有得到cookie `$ckfile`，有人可以帮忙吗，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:06:48.273

我找到了解决方案，谢谢：

```
function myCurl($url)
{
    $cookie_file_path = tempnam ("tmp", "CURLCOOKIE");

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_AUTOREFERER, 0);
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 60);
    curl_setopt($curl, CURLOPT_TIMEOUT, 60);
    curl_setopt($curl, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($curl, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookie_file_path);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($curl, CURLOPT_COOKIESESSION, TRUE);
    curl_setopt($curl, CURLOPT_COOKIE, session_name() . '=' . session_id());
    curl_setopt($curl, CURLOPT_URL, $url);

    $a = curl_exec ($curl);

    return $a;
} 
```

# python - 没有路由到主机错误 113

> ID：10516222
> 
> 赞同：2
> 
> 时间：2012-05-09T12:35:05.740
> 
> 标签：python, ftp, routes

如果构建了一个连接到 ftp 服务器的脚本。我已经在我的电脑上对其进行了本地测试并且它的工作，但在服务器上它说：***（113，'没有到主机的路由'）。******如果我用ftp XX.XX.XX.XX***连接每个 shell，它工作正常！这就是我尝试在 python 中连接的方式：

```
 import ftplip
            meinftp = ftplib.FTP(ip)
            meinftp.login(user,password)
            meinftp.cwd(ftpdirectory) 
```

任何想法为什么我没有主机的路线？防火墙没有阻止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:54:06.413

我同意 strace 在这里是一个很好的工具，但如果你不熟悉它，或者至少不熟悉 C，它可能会有点令人生畏。

关于使用 strace 和类似工具进行调试： [http ://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html](http://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:38:37.777

即使 DNS 名称可用，python 也会返回 113 'No route to host'，但服务无法正常工作。

可能特定于 FTP 被动选项。

使用 'strace' 运行你的脚本，这样你就可以检查哪个系统调用失败了。

strace -fo /tmp/log python yourscript.py

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T16:50:59.443

另见[https://stumbles.id.au/python-ftps-and-mis-configured-servers.html](https://stumbles.id.au/python-ftps-and-mis-configured-servers.html)

引用：“我最终在 FileZilla 日志中注意到一条消息，服务器发送了带有不可路由地址的被动回复。使用服务器地址代替。事实证明，FTPS 服务器配置错误，并使用内部 IP 地址回复 PASV 命令无法从公共互联网访问。这似乎是一个足够常见的配置问题，以至于一些 FTP 客户端检测到该问题并使用现有的服务器地址。但 Python 的 FTP 客户端并没有这样做。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:38:17.370

这很可能是防火墙问题，请尝试禁用防火墙。

# android - SOAP 中的类强制转换异常

> ID：10516223
> 
> 赞同：0
> 
> 时间：2012-05-09T12:35:14.037
> 
> 标签：android, ksoap2

我正在使用以下代码：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
   SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
   envelope.setOutputSoapObject(request);
   envelope.dotNet=true;            
   HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);  
   try
   {
        androidHttpTransport.call(SOAP_ACTION, envelope);              
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        Log.i("myApp", response.toString());  
        TextView tv = new TextView(this);
        tv.setText("message="+response.toString());
        setContentView(tv);                              
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

它显示以下错误：

```
I/Process(3977): Sending signal. PID: 3977 SIG: 9
 W/System.err(4059): java.lang.ClassCastException: org.ksoap2.serialization.SoapObject     
 W/System.err(4059):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 W/System.err(4059):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 W/System.err(4059):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 W/System.err(4059):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
 W/System.err(4059):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 W/System.err(4059):    at android.os.Handler.dispatchMessage(Handler.java:99)
 W/System.err(4059):    at android.os.Looper.loop(Looper.java:123)
 W/System.err(4059):    at android.app.ActivityThread.main(ActivityThread.java:4627)
 W/System.err(4059):    at java.lang.reflect.Method.invokeNative(Native Method)
 W/System.err(4059):    at java.lang.reflect.Method.invoke(Method.java:521)
 W/System.err(4059):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 W/System.err(4059):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 W/System.err(4059):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:35:21.070

尝试

```
SoapObject response = (SoapObject)envelope.getResponse(); 
```

代替

```
SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

# node.js - 在 Jade 的行尾添加一个空格

> ID：10516233
> 
> 赞同：40
> 
> 时间：2012-05-09T12:35:53.703
> 
> 标签：node.js, express, pug

我有这个[玉](https://github.com/visionmedia/jade)代码：

```
p
    | Avatar hosted by
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

问题是，它被渲染为

```
<p>Avatar hosted by<a href="http://www.gravatar.com/" target="_blank">Gravatar</a></p> 
```

看起来像：“由[Gravatar](http://www.gravatar.com/)托管的头像”。

不管我在文本行末尾添加了多少空格，它仍然是这样的。文档无法帮助我，我无法想象这是一个如此罕见的问题。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-10-09T15:28:23.097

如果您不想在代码中使用内联 HTML 或 HTML 实体，您可以这样做：

```
p
    | Avatar hosted by
    =  ' '
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

或者这个更短

```
p= 'Avatar hosted by '
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

最干净的大概是这个

```
p Avatar hosted by #{''}
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-09T12:49:14.410

你用的是哪个版本的翡翠？我刚刚在“by”后面用一个空格进行了测试（使用 0.25.0），它工作正常。

其他选项包括：

```
p
    | Avatar hosted by&nbsp;
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

或者

```
p
    | Avatar hosted by
    |  <a href='http://www.gravatar.com/' target='_blank'>Gravatar</a> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-19T19:17:35.537

Jade 现在支持内联标签的插值。

```
p this is #[strong test] of how jade will treat #[i #[u inline tags]]... like #[a(href="/") anchor tags] and #[+a() mixins]. 
```

[http://jade-lang.com/reference/interpolation/](http://jade-lang.com/reference/interpolation/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-28T09:43:47.307

你确定不是你的编辑？我使用 Komodo，它被设置为在保存时去除尾随空格。当我保存文件时，它正在剥离我的文本行末尾的空间。在我弄清楚之前，我的文本和链接之间没有空格让我发疯。我更改了 Komodo 的设置（首选项-> 编辑器-> 保存选项）以取消选中去除尾随空格，问题就消失了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-14T04:49:57.993

我`space`在新行使用变量。这：

```
p
    | You must follow
    =space
    a(href=default_url) this link 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T12:45:35.543

**编辑：**
正如 jmar777 所指出的，最新版本的玉应该尊重尾随空格，[请参见此处](https://github.com/jadejs/jade-parser/blob/28d0aaa8bd8d48115fbfb7a8b28d5be2fb5c2e03/index.js#L783)。太棒了，我可能会在未来的项目中再次尝试使用玉。

**编辑：** 更新了玉解析器的链接。[原始链接](https://github.com/jadejs/jade/blob/b771df53706c6a9835c3b16c5e212194a30638fa/lib/parser.js#L536)适用于玉 1.11。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-17T22:33:58.557

一个快速而干净的解决方案是使用以下语法：

```
p
    | Avatar hosted by
    | 
    a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

注意`|`第二个文本行后面的空格。这将在上一行的文本之后添加一个空格（如果您忘记添加它，还会吐出一个令人讨厌的错误！）。

在我看来，到目前为止，这是最干净的选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-24T20:01:11.497

我正在使用 Harp， Óscar Gómez 的[带有两个管道的解决方案](https://stackoverflow.com/a/40666280/1178021)会引发错误，尽管它看起来非常优雅。

感谢 Даниил Пронин 和 Sean Gravener，我发现这些解决方案对我有用：

```
#{''}
```

```
!{' '}
```

和

```
=“”
```

```
p
  | Avatar hosted by #{' '}
  a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

和

```
p
  | Avatar hosted by
  = ' '
  a(href='http://www.gravatar.com/', target='_blank') Gravatar 
```

另外，如果您遇到相反的情况： span text #{ ref + [' '] }

这里有更多关于 Pug (Jade) 中的语法插值： [https ://pugjs.org/language/interpolation.html](https://pugjs.org/language/interpolation.html)

# sencha-touch - 如何根据sencha中的存储值动态加载按钮中的文本？

> ID：10516239
> 
> 赞同：0
> 
> 时间：2012-05-09T12:36:39.563
> 
> 标签：sencha-touch

我有一个按钮：

```
 {
                    xtype:'button',
                    text:'2',
                    ui: 'orange',
                    style: 'font-size:14px;',
                    height:20

                } 
```

我希望根据商店中优先级值的数量动态加载按钮的文本。如果十个值的优先级值为 0，我希望按钮文本为 10。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:54:58.547

您需要[`setText()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-method-setText)使用`Ext.Button`. 这将为`text`您的按钮动态设置。

首先，`id`在按钮上设置属性

```
{
  xtype:'button',
  text:'2',
  id: 'myBtn',
  ui: 'orange',
  style: 'font-size:14px;',
  height:20
 } 
```

然后像这样，

```
 if(validCondition) {
      Ext.getCmp('myBtn').setText('10');
  } 
```

*`validCondition`是您要在更改文本之前设置的条件。

# java - 无法使用任何调试器连接到 Glassfish

> ID：10516243
> 
> 赞同：5
> 
> 时间：2012-05-09T12:37:01.497
> 
> 标签：java, debugging, glassfish

我正在尝试将我最好的调试器连接到远程 Glassfish 实例（远程我的意思是不在同一台物理机器上运行，不仅不在同一台虚拟机上）。

我的 glassfish 域配置检查了“调试”标志，并且 server.log 在启动期间报告

```
-Xdebug
-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9009 
```

这表明（在我看来）确实启用了调试。

但是，当我尝试连接调试器时，它会失败。以下会话是一个示例（使用 PuTTy 完成）：

```
$ jdb -connect com.sun.jdi.SocketAttach:port=9009
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:385)
    at java.net.Socket.connect(Socket.java:529)
    at com.sun.tools.jdi.SocketTransportService.attach(SocketTransportService.java:204)
    at com.sun.tools.jdi.GenericAttachingConnector.attach(GenericAttachingConnector.java:98)
    at com.sun.tools.jdi.SocketAttachingConnector.attach(SocketAttachingConnector.java:72)
    at com.sun.tools.example.debug.tty.VMConnection.attachTarget(VMConnection.java:358)
    at com.sun.tools.example.debug.tty.VMConnection.open(VMConnection.java:168)
    at com.sun.tools.example.debug.tty.Env.init(Env.java:64)
    at com.sun.tools.example.debug.tty.TTY.main(TTY.java:1010)

Fatal error:
Unable to attach to target VM. 
```

什么可能导致这种行为？

**编辑**

请注意，此 jdb 命令行已作为[Glassfish 网络调试测试的示例](http://docs.oracle.com/cd/E18930_01/html/821-2418/beafd.html)给出，这就是我使用它的原因

另请注意，我正在本地执行此 jdb 调试会话（也就是说，当使用 PuTTy 连接到该机器时，因此在运行 Glassifh 的机器上调用 jdb）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:23:00.707

如果您要调试的 JVM 位于远程机器（具有不同 IP 地址的机器）上，则必须在附加选项中包含主机名或 IP 地址。

```
jdb -attach <hostname-or-address>:<port-number> 
```

jdb 是智能的，但它不会搜索您的网络只是为了找到一个等待 JPDA 客户端的端口。

您可能想查看[有关 jdb 的文档](http://publib.boulder.ibm.com/infocenter/realtime/v1r0/index.jsp?topic=/com.ibm.rt.doc.10/user/jdb.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:58:50.300

由于您在同一台机器上，请尝试`jdb -attach 9009`改用。

如果这不起作用，请查看[jdb 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jdb.html)，因为它使用非常不同的选项来准备 VM 以进行调试。

# java - for 循环不会循环

> ID：10516248
> 
> 赞同：4
> 
> 时间：2012-05-09T12:37:10.357
> 
> 标签：java, for-loop

我有一个 for 循环，我将使用它来计算添加到 ArrayList 的时间间隔。问题是我无法证明 for 循环正在执行。使用 system.out.println() 语句时没有打印任何内容，并且没有任何内容从循环内部添加到数组中......有什么建议吗？

```
// lager tidspunkter og legger disse inn i en Array kalt tider
    tid.setTimer(16);
    tid.setMinutter(0);
    tid.setSekunder(0);
    tider.add(tid.asString());// String "16:00" is added as it should 
    System.out.println("tiden er: "+tid.asString());// gives 16:00 printed
    for(int i=0;i>12;i++){
        System.out.println("er i løkken");// gives nothing printed
        tid.increaseMinutter(30);
        System.out.println(tid.asString());// gives nothing printed
        tider.add(tid.asString());
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T12:38:36.703

你的意思是*小于*，不大于：

```
for(int i=0;i<12;i++){ 
//           ^ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T12:38:29.087

您的条件错误：更改`i>12`为`i<12`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T12:38:43.487

您的 for 循环中有错字：应该是 i<12

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T12:43:17.077

我相信您打算处理从 0 到 11 的元素。因此 for 循环应该是

```
for(int i=0;i<12;i++) 
```

相反，您输入了

```
for(int i=0;i>12;i++) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T10:03:49.487

你在这里写错了`for(int i=0;i>12;i++)`。For 循环首先将值初始化`i`为 0，然后检查条件`i>12`是否为假，这就是为什么您的程序没有进入 for 循环块并且不打印任何内容的原因。如果您希望执行 for 循环块类型 `for(int i=0;i<12;i++)`，那么一切都会顺利进行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-20T06:49:01.123

你的代码 > for(int i=0;i>12;i++) // 大于

变化 >

```
(1) for(int i=0;i<12;i++) // less than 

              OR

(2) for(int i=11;i>=0;i--) // starting from size-1 
```

# vhdl - VHDL：在这种情况下不能有这样的操作数（sobel过滤器）

> ID：10516251
> 
> 赞同：1
> 
> 时间：2012-05-09T12:37:20.007
> 
> 标签：vhdl, fpga, xilinx

```
 library ieee;
    use ieee.std_logic_1164.all;
    use ieee.numeric_std.all;
    use ieee.std_logic_arith.all;
    --use ieee.std_logic_unsigned.all;
    --use ieee.std_logic_signed.all;

    entity sobel is 
         port ( 
              top_left_pixel      : in  std_logic; 
              top_middle_pixel    : in  std_logic; 
              top_right_pixel     : in  std_logic; 
              middle_left_pixel   : in  std_logic; 
              middle_right_pixel  : in  std_logic; 
              bottom_left_pixel   : in  std_logic; 
              bottom_middle_pixel : in  std_logic; 
              bottom_right_pixel  : in  std_logic; 
              sobelx              : out std_logic; 
              sobely              : out std_logic 
         ); 
    end entity sobel; 

    architecture noddy of sobel is 
        signal p1 : std_logic := top_left_pixel;
        signal p2 : std_logic := top_middle_pixel;
        signal p3 : std_logic := top_right_pixel;
        signal p4 : std_logic := middle_left_pixel;
        signal p6 : std_logic := middle_right_pixel;
        signal p7 : std_logic := bottom_left_pixel;
        signal p8 : std_logic := bottom_middle_pixel;
        signal p9 : std_logic := bottom_right_pixel;

        signal sobelx_s : integer;
        signal sobely_s : integer; 

    begin 
        -- Same error on both these lines
         sobelx_s <= (p3 - p1) + ((p6 & '0') - (p4 & '0')) + (p9 - p7); 

         sobely_s <= (bottom_left_pixel - top_left_pixel) + ((bottom_middle_pixel & '0') - (top_middle_pixel & '0')) + (bottom_right_pixel - top_right_pixel); 

    end architecture noddy; 
```

我正在尝试用很少的经验用 VHDL 构建一个 sobel 滤波器。该实体仅用于在测试台上进行尝试，以查看 sobel 算法是否适用于输入数据。

有什么建议么？

非常感谢所有答案，如果您可以将完整的 VHDL 初学者引导到有用的东西，不客气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:52:25.380

那个代码[看起来很熟悉](https://groups.google.com/forum/?hl=en&fromgroups#!topic/comp.arch.fpga/TqAJoQOOaww):) 我觉得`architecture noddy`有点不寻常......

试试这个（来自上面的链接）：

```
entity sobel is

    port (
        top_left_pixel      : in  integer;
        top_middle_pixel    : in  integer;
        top_right_pixel     : in  integer;
        middle_left_pixel   : in  integer;
        middle_right_pixel  : in  integer;
        bottom_left_pixel   : in  integer;
        bottom_middle_pixel : in  integer;
        bottom_right_pixel  : in  integer;
        sobelx              : out integer;
        sobely              : out integer
    );

end entity sobel;
architecture noddy of sobel is

begin  -- architecture noddy

    sobelx <= (-1*top_left_pixel)+(-2*middle_left_pixel)+(-1*bottom_left_pixel)
              +(1*top_right_pixel)+(2*middle_right_pixel)+(1*bottom_right_pixel);
    sobely <= (-1*top_left_pixel)+(-2*top_middle_pixel)+(-1*top_right_pixel)
              +(1*bottom_left_pixel)+(2*bottom_middle_pixel)+(1*bottom_right_pixel);
end architecture noddy; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:02:45.783

首先，Sobel 算子通常应用在使用卷积的灰度图像上。或者，也许你真的想要一个二进制图像。所以 Sobel 矩阵类似于：

```
-1 0 +1
-2 0 +2
-1 0 +1 
```

用于水平变化。您想将其与原始图像进行卷积。首先尝试使用灰度输入，然后您可以尝试使用二进制图像输入。

您收到 VHDL 错误的原因是您无法在or上*添加*( `+`) 或进行任何数学运算。您需要使用重载数学运算符的and类型（可能在这里）。为此使用该库（您的 VHDL 环境应该具有该库；它非常标准）。`std_logic``std_logic_vector``unsigned``signed``signed``numeric_std`

如果你有一个真实的实体，其中的输入是真实的信号，它们应该是`std_logic_vector`. 然后，您需要按照[此图](http://nova.polymtl.ca/~simark/types.html)`signed`将它们转换为/ 。`unsigned`

# python - 克隆 4：损坏的产品。缺少依赖错误

> ID：10516253
> 
> 赞同：2
> 
> 时间：2012-05-09T12:37:24.210
> 
> 标签：python, plone

我正在开发一个产品。但是，当我尝试安装它时，我在控制面板上看到以下错误，因此我无法安装/激活它。

```
Some products were found to have errors when compiling the install file.

my.package

Error Type
    Missing dependency
Error Value
    profile-collective.portlet.explore:default 
```

即使在运行 buildout 并且没有显示任何错误之后也是如此。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:20:37.633

GenericSetup 安装配置文件列出了 GenericSetup 不可用的依赖项。从您的配置文件的 metadata.xml 中删除依赖项或安装[`collective.portlet.explore`](http://pypi.python.org/pypi/collective.portlet.explore)到您的构建中。

# php - 在具有多个用户的 php/mysql 应用程序中实现文件夹共享

> ID：10516256
> 
> 赞同：0
> 
> 时间：2012-05-09T12:37:33.680
> 
> 标签：php, mysql

我有一个 php/mysql 应用程序。有些用户拥有文件夹。文件夹只能是一层深。每个文件夹可以有无限数量的文档。相关表格如下：

**用户表：**

```
user_id(PK), name, password, etc 
```

**文件夹表**：

```
folder_id(PK), name, user_id(FK into user_table) 
```

**文档表**

```
document_id(PK), user_id(FK), folder_id(FK), date, name, etc 
```

对文件夹和文档进行操作的所有查询均采用以下形式

```
select/update/insert <blah, blah, bhah>
where user_id = %d 
```

现在，我希望允许用户与其他用户共享他们的文件夹。我想以破坏性最小的方式做到这一点。我还想最小化生成的 WHERE 子句的运行时间开销。

我一直在绞尽脑汁并在谷歌上搜索，但还没有找到一个足够简单的解决方案。我可以考虑以类似于 unix 的（读取、写入、执行）以及（所有者、组、其他）机制的方式来实现它。但对于我简陋的系统来说，这似乎有点太复杂了。

如果有人能给我指点我可能采取的方法，我将不胜感激。我的目标很简单：

1.  该系统不需要大量的返工
2.  至少用户应该能够与其他用户或组共享文件夹（如果需要，我将添加组的概念）
3.  与现在相比，SQL 语句的 WHERE 子句不应该有太多开销（就像：`WHERE user_id = %d`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:43:08.217

## 与用户共享文件夹

您可以添加带有列的表 *folder_user*`folder_id(FK), user_id (FK)`

*folder_table* 中的`user_id`代表文件夹的所有者。当所有者与另一个用户共享此文件夹时，您将 folder_id 和 user_id（与谁共享文件夹）添加到`folder_user`表中。

稍后，您可以将列添加`access (enum 'READ', 'READ_WRITE')`到同一个表中，以查看是否允许用户编辑文件夹中的文档。

## 与群组共享文件夹

1.  你需要一个表*组*
2.  然后您需要将用户添加到组中，因此添加一个表 *user_group* ：`user_id(FK), group_id(FK)`
3.  然后，要将文件夹的访问权限授予组添加表 *folder_group*: folder_id(FK), group_id(FK) 以授予对组的文件夹访问权限。

# asp.net-web-api - 如何测试异步控制器是否真正运行异步

> ID：10516259
> 
> 赞同：0
> 
> 时间：2012-05-09T12:37:40.037
> 
> 标签：asp.net-web-api

我创建了简单的异步控制器，这些控制器调用异步方法，然后在 HttpClient 上调用 PostAsync 以检索各种 REST 服务端点。一切正常，但是我如何测试以确保控制器确实在调用后台线程并将主线程释放回池中？我想确保我确实让所有异步甜蜜都正常工作，并且我不会无意中运行同步方法，尽管我所做的所有工作都是为了使一切异步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:31:34.263

我发现这`System.Threading.Thread.CurrentThread.IsThreadPoolThread`将提供当前线程是否仍然是线程池线程。

# windows-phone-7 - EQATEC 分析错误 - 已添加具有相同密钥的项目

> ID：10516262
> 
> 赞同：1
> 
> 时间：2012-05-09T12:37:52.923
> 
> 标签：windows-phone-7, profiling, windows-phone, eqatec

当我尝试使用 EQATEC Profiler 分析特定的 WP7 项目时，我似乎遇到了这个错误

> ***错误：无法处理 xap 文件 MusicApp.xap：已添加具有相同密钥的项目。在 System.ThrowHelper.ThrowArgumentException(ExceptionResource 资源) 在 System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add) 在 Ionic.Zip.ZipFile.InternalAddEntry(String name, ZipEntry entry) 在 Ionic。 Zip.ZipFile._InternalAddEntry(ZipEntry ze) 在 Ionic.Zip.ZipFile.AddEntry(String entryName, Stream stream) 在 Ionic.Zip.ZipFile.AddEntry(String entryName, Byte[] byteContent)
> 在 EQATEC.AssemblyInjector.Engine.XAP.XAPPackage.Save(XAPPackage xap) 在 EQATEC.AssemblyInjector.Engine.Assembly.AssemblyScout.VisitDirectory(DirectoryInfo inputdir, DirectoryInfo outputdir, String subpath) EQATECProfilerEngine.ProcessApp：具有相同键的项目已经被添加。

有没有人经历过或者知道为什么会这样？或者也许知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:28:06.137

EQATEC Profiler 的新版本 3.8.20 已修复此问题。查看[发布历史](http://support.eqatec.com/entries/20330046-release-history)。

如果 xap 文件多次包含相同的文件名，甚至可能使用不同的路径分隔符，WP7 或 Silverlight 应用程序就会出现问题。这是另一个用户的 xap 文件中的一个真实示例：

```
Images\Tiles\TileBackground.png
Images/Tiles/TileBackground.png 
```

探查器会尝试将同一文件两次添加到已检测的 xap 文件中并失败。新的 3.8.20 现在将简单地跳过任何进一步的重复文件。当然，您可能不是要向 MusicApp.xap 添加两次相同的文件，因此您应该检查您的项目是否有重复的文件条目。

# video-streaming - mp4 电影无法使用 flowplayer iPad 插件播放

> ID：10516263
> 
> 赞同：0
> 
> 时间：2012-05-09T12:38:02.917
> 
> 标签：video-streaming, mp4, flowplayer

我正在尝试使用 flowplayer 的 iPad 插件运行 mp4 电影。不幸的是，我得到的只是一个空球员，球员按钮有一个罢工。我找不到任何信息这是什么意思？

我尝试的第一件事是将电影的绝对路径放在 href 属性中，但电影在 localhost 上不起作用。

当我将绝对路径放置在 stream.flowplayer.org 上托管的示例电影时，它起作用了。但是同一部电影在本地主机上不起作用。这使我得出结论，需要对 apache 服务器进行一些特殊配置才能让视频运行。

能否请你帮忙？这是我的代码：

```
<a href="movie.mp4" id="flash" style="display:block;width:640px;height:360px;"></a>
    <script>
      $f("flash", "flowplayer/flowplayer-3.2.10.swf", {
        clip:  {
          autoPlay: true,
          autoBuffering: true
        }
      }).ipad();
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:49:31.500

听起来您在 Apache 上托管，这里是如何使用 .htaccess 文件在本地服务器上配置有效的 MP4 mime 类型：http: [//www.htaccess-guide.com/adding-mime-types/](http://www.htaccess-guide.com/adding-mime-types/)

如果这是托管在 Windows 服务器上。您可能需要将 MP4 mime 类型添加到 IIS： [http ://forums.asp.net/t/1470612.aspx/1](http://forums.asp.net/t/1470612.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:42:00.907

```
<a href="movie.mp4" id="flash" style="display:block;width:640px;height:360px;"></a>

<script>
  $f("flash", "flowplayer/flowplayer-3.2.10.swf", {
    clip:  {
      url:"mp4:movie",    // change this
      autoPlay: true,
      autoBuffering: true
    }
  }).ipad();
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-29T07:01:15.080

```
<a id="audio<?=$musicData['audio_id']?>" href="<?=$file?>" class="player" style="display:block;width:100%;height:350px;"></a>
<script type="text/javascript" language="javascript">
                    $f("audio<?=$musicData['audio_id']?>", "http://releases.flowplayer.org/swf/flowplayer-3.2.16.swf", {
                        clip: {
                                autoPlay : false,
                                coverImage: { url: "<?=APPLICATION_URL?>images/icons/images/url.gif"
                                    }
                            }
                    }).ipad();
                       // $f("audio<?=$musicData['audio_id']?>", "http://releases.flowplayer.org/swf/flowplayer-3.2.16.swf").ipad();
</script> 
```

# .net - 将控件映射到视图模型

> ID：10516268
> 
> 赞同：1
> 
> 时间：2012-05-09T12:38:11.880
> 
> 标签：.net, wpf, mvvm

我知道这可能是一个新手问题，但我对 WPF 还是很陌生。现在，我的大多数文本框、标签、文本块等...都根据逻辑隐藏在 xaml.cs 代码后面。我想知道是否有办法将我的控件从我的 xaml 文件映射到视图模型？

```
<TextBlock Name="txtBlockName" Text="Name:" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="15,0,0,0" Visibility="Hidden" />
<TextBox Name="txtName"  Width="auto" HorizontalAlignment="Left" VerticalAlignment="Bottom" Visibility="Hidden" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:24:36.600

确保将视图模型设置为控件的 DataContext。然后你可以使用类似的东西

```
<TextBox Text="{Binding PropertyName, Mode=TwoWay}" Name="txtName"  Width="auto" HorizontalAlignment="Left" VerticalAlignment="Bottom" /> 
```

将 TextBox 的 Text 绑定到视图模型的 PropertyName

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:44:33.350

为此使用绑定（您有单向和双向绑定，在这种情况下，您可能正在寻找双向绑定）。

也看这里：[msdn教程](http://msdn.microsoft.com/en-us/library/aa480224.aspx)，你可以保留一个[xaml绑定备忘单](http://www.nbdtech.com/Blog/archive/2009/02/02/wpf-xaml-data-binding-cheat-sheet.aspx):)。

一些基本的例子。我所做的是设置数据上下文，在这种情况下，我将其设置为 MainWindow 类（本身），但是您可以轻松地将其设置为您的视图模型。然后我将值绑定`MyFoo.MyString`到文本框的文本属性。

按钮和其他文本字段用于说明两种方式绑定的工作方式（在这种情况下，它甚至是默认设置）。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding MyFoo.MyString}" />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="12,41,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="12,70,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" IsEnabled="False" Text="Init" />
    </Grid>
</Window> 
```

创建一个`Foo`具有以下定义的类：

```
public class Foo
{
    public string MyString { get; set; }
} 
```

在你的 MainWindow 代码后面，你有这个：

```
public partial class MainWindow : Window
{
    public Foo MyFoo { get; set; }

    public MainWindow()
    {
        MyFoo = new Foo() { MyString = "Hello" };

        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        textBox2.Text = MyFoo.MyString;
    }
} 
```

这只是一个快速而肮脏的例子。我想你可以弄清楚其余的，否则：看看周围，有**很多**关于 WPF 中数据绑定的信息。

# xslt - 密钥在 muenchian 分组中的工作原理

> ID：10516273
> 
> 赞同：0
> 
> 时间：2012-05-09T12:38:31.713
> 
> 标签：xslt, xslt-1.0, xslt-grouping, muenchian-grouping

我还没有找到关于在 xslt 中进行 muenchian-grouping 时如何生成密钥的答案。我发现的示例都有非常简单的 xml 文件。给定以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<despatch-advice>
<message-id>2012041715435517181</message-id>
<message-creation>2012-04-17T15:43:55.000+02:00</message-creation>
<originatingFlow>DespatchAdvice</originatingFlow>
<shipment>
    <transport-mode>Sea</transport-mode>
    <transport-id>1111</transport-id>
    <order-line>
        <order>123</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>ME</selling-code>
    </order-line>
</shipment>
<shipment>
    <transport-mode>Sea</transport-mode>
    <transport-id>2222</transport-id>
    <order-line>
        <order>456</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>ME</selling-code>
    </order-line>
    <order-line>
        <order>789</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>ME</selling-code>
    </order-line>
    <order-line>
        <order>832</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>XM</selling-code>
    </order-line>
</shipment>
<shipment>
    <transport-mode>Air</transport-mode>
    <transport-id>333</transport-id>
    <order-line>
        <order>781</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>XM</selling-code>
    </order-line>
    <order-line>
        <order>789</order>
        <order-date>2012-01-17+01:00</order-date>
        <selling-code>XM</selling-code>
    </order-line>
</shipment> 
```

我想做的是对每批货物中每个销售代码的订单行进行分组。

在我的 xslt 文件中，我将密钥定义如下：

```
<xsl:key name="groups" match="order-line" use="selling-code"/> 
```

在创建 xml 文件的第一部分后，我执行以下操作：

```
<xsl:for-each select="order-line[generate-id(.)=generate-id(key('groups',selling-code)[1])]"> 
<ns0:order-line-group>                                      
<xsl:for-each select="key('groups',selling-code)">
<ns0:order-line> 
```

我希望 xml 文件将从当前`<shipment`> 节点解析，并且构建的密钥将仅使用`<order-line`> 节点进行该特定装运。但相反，我在文件中得到了三个`<shipment`> 包含所有`<order-line`> 节点的节点。因此，似乎在创建密钥时总是从根目录解析 xml 文件？是这样吗？有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:09:29.237

您需要定义一个键，例如

```
<xsl:key name="groups" match="order-line" use="concat(generate-id(..), '|', selling-code)"/> 
```

然后你需要使用

```
<xsl:for-each select="order-line[generate-id(.)=generate-id(key('groups',concat(generate-id(..), '|', selling-code))[1])]"> 
<ns0:order-line-group>                                      
<xsl:for-each select="key('groups',concat(generate-id(..), '|', selling-code))">
<ns0:order-line> 
```

以确保您只处理每个货件的物品。

在 XSLT 2.0 中，该`key`函数有第三个参数用于在子树中查找项目，但 XSLT 1.0 没有，因此您需要将要限制搜索的节点的 id 放在键值中。当然，XSLT 2.0 具有`for-each-group`这样的分组功能，您根本不需要键。

# javascript - 使用 Javascript SDK 遍历所有用户的提要

> ID：10516274
> 
> 赞同：0
> 
> 时间：2012-05-09T12:38:32.040
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我正在使用以下代码来遍历用户曾经对其提要发布的所有帖子：

```
 FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire

                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                var fbid = response.authResponse.userID;

                console.time('all posts');

                var url = '/me/feed?limit=100';
                var finished = false;
                var c = 0, totalLikes = 0;
                var timer = setInterval(function () {

                    if(url != '') {
                        console.log("Checking: " + url);
                        FB.api(url, function(response) {

                            //console.log("Got " + response.data.length + " items");

                            //c += response.data.length;

                            // calculate total likes
                            for(var k in response.data) {
                                c++;
                                if(response.data[k].from.id == fbid) {
                                    console.log(response.data[k]);

                                }

                            }

                            if(response.paging) {
                                var bits = response.paging.next.split('facebook.com');
                                url = bits[1];
                            } else { 
                                clearInterval(timer); 
                                console.log("Found a total of " + c + " items");
                                console.timeEnd('all posts')
                            }
                        });
                        url = '';
                    } else {
                         //console.log("Skipped iteration");
                    }
                }, 1000);

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app

                FB.login(function(response) {
                    if (response.authResponse) {
                        console.log('Welcome!  Fetching your information.... ');
                        FB.api('/me', function(response) {
                            console.log('Good to see you, ' + response.name + '.');
                        });
                    } else {
                        console.log('User cancelled login or did not fully authorize.');
                    }
                }, { scope: 'user_about_me,read_stream,user_status,user_photos,friends_about_me,user_checkins,friends_likes,user_actions.music' });

            } else {
                // the user isn't logged in to Facebook.
                console.log("not logged in");
            }   
        }); 
```

不幸的是，它似乎在遍历页面时，没有找到粘贴 2011 的更新，然后在最后一页上找到了我在 2007 年对另一个用户的状态发表的两条评论。它实际上缺少我所做的 100 条状态更新。

我花了最后三个小时研究这个，但无济于事。我尝试了 3 个不同的人的帐户（在 2011 年之前，他们都有很多状态更新等）并且他们有同样的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:49:43.153

您指定的 URL， `var url = '/me/feed?limit=100';`因此它只返回前 100 个。您可以尝试增加限制，也可以像这样使用偏移量：

`var url = '/me/feed?limit=100&offset=101`

相关的api文档：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

经过进一步搜索，似乎有一些关于历史记录的错误。

[https://developers.facebook.com/bugs/178108638946497?browse=search_4fabbf595050e1514377846](https://developers.facebook.com/bugs/178108638946497?browse=search_4fabbf595050e1514377846)

# javascript - 渲染 HTML *within* Raphael (SVG/VML) 形状的想法

> ID：10516280
> 
> 赞同：15
> 
> 时间：2012-05-09T12:38:47.613
> 
> 标签：javascript, raphael

我正在开发一个使用[Raphael](http://raphaeljs.com/)绘制原始形状（矩形、椭圆、三角形等）和线条的应用程序，但也允许用户移动/调整这些对象的大小。主要要求之一是形状的表面可以有格式化的文本。实际文本是 Markdown 的子集（简单的东西，如粗体、斜体、列表）并呈现为 HTML。

FWIW - 我正在使用 Backbone.js 视图来模块化形状逻辑。

## 方法一

我最初的想法是使用[`foreignObject`SVG](http://ajaxian.com/archives/foreignobject-hey-youve-got-html-in-my-svg)和直接 HTML 与 IE 的 VML 的组合。但是，[IE9 不支持`foreignObject`](http://schmerg.com/svg-support-in-ie9-close-but-should-try-harde)，因此不得不放弃这种方法。

## 方法二

在 canvas 对象旁边，添加`div`包含实际 HTML 的 s。然后，将它们放置在具有透明背景的实际形状上。我创建了一个形状视图，其中引用了实际的 Raphael 形状和“叠加层” `div`。这种方法有几个问题：

1.  使用不是 SVG/VML 容器子级的叠加层*感觉*不对。拥有此覆盖元素是否会导致其他渲染问题？

2.  通常被 Raphael 捕获的事件（拖动、单击等）需要从叠加层转发到 Raphael 对象。对于支持 的浏览器`pointer-events`，这很容易做到：

    ```
    div.shape-text-overlay {
      位置：绝对；
      背景：无；
      指针事件：无；
    }

    ```

    但是，其他浏览器（如 IE8 及以下）需要转发事件：

    ```
    var forwardedEvents = 'mousemove mousedown mouseup click dblclick mouseover mouseout';
    this.$elText.on(forwardedEvents, function(e) {

      var original = e.originalEvent;

      变种事件；
      如果（document.createEvent）{
        事件 = document.createEvent('HTMLEvents');
        event.initEvent(e.type, true, true);
      }
      别的 {
        事件 = document.createEventObject();
        event.eventType = e.type;
      }

      // 仅供参考 - 这是最简单的事件转发方法。
      // 我真正的实现要大得多，并且分别使用 MouseEvents 和 UIEvents。

      event.eventName = e.type;
      _.extend（事件，原始）；

      如果（document.createEvent）{
        that.el.node.dispatchEvent(event);
      }
      别的 {
        that.el.node.fireEvent('on' + event.eventType, event);
      }

    });

    ```

3.  重叠的形状会导致文本重叠，因为文本/形状位于不同的图层上。虽然重叠的形状并不常见，但这看起来很糟糕：

    ![重叠](../Images/bf2b6ddf7e74f29589bbd9706a048136.png)

这种方法是我目前正在使用的，但*感觉*就像一个巨大的 hack。

## 方法 3

几乎类似于方法 1，但这将涉及直接编写文本节点/VML 节点。最大的问题是所需的手动转换量。打破 Raphael 的 API 似乎*可能会*导致其他 Raphael 对象的稳定性问题。

## 问题

有没有其他人必须做类似的事情（在 SVG/VML 中渲染 HTML）？如果是这样，你是如何解决这个问题的？是否考虑了事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:16:26.130

我使用 Raphael构建~~[了这个项目](http://www.cordblood.com/cord-banking-basics)~~ **（不再存在） 。**我所做的实际上是放弃了在 SVG 中使用 HTML 的想法，因为它太乱了。相反，我在 SVG 层之上绝对放置了一个 HTML 层，并将它们一起移动。当我想要显示 HTML 时，我只是将其淡入并淡出相应的 SVG 对象。如果时间和排列正确，那么未经训练的眼睛就不会真正注意到。

虽然这不一定是您要寻找的东西，但也许它会让您思考解决问题的新方法！随意查看该页面上的 JS，因为它是未缩小的；）

PS，该项目是一个潜在客户收集应用程序。如果您只是想看看它是如何工作的，请在第一个下拉列表中选择“朋友”，您无需提供任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:03:13.023

除非可以提供另一个答案并且胜过我的解决方案，否则我会继续使用额外的 div 层。转发事件是最困难的部分（如果有人需要转发事件代码，我可以在这里发布）。同样，此解决方案的最大缺点是重叠的形状将导致它们的文本重叠在实际绘制的形状*之上。*

# c - 关于linux模块printk

> ID：10516282
> 
> 赞同：0
> 
> 时间：2012-05-09T12:38:57.830
> 
> 标签：c, linux, module

我写了一个模块，想把它添加到内核中。当我安装模块时它会打印一个世界。但它不会......

模块为：

```
#include <linux/module.h>
#include <linux/init.h>

static int __init hello_init()
{
    printk(KERN_EMERG"Hello World!\n");
    return 0;
}

static void __exit hello_exit()
{
    printk("<6>hello exit\n");
}

module_init(hello_init);
module_exit(hello_exit); 
```

为什么加载模块时“Hello World！\n”不打印？有人遇到这个问题吗？想你的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:49:06.577

也许这是一个链接或标题问题。

看来您也没有指定任何许可证，这可能是个问题。

你可以试试这个[网站](http://blog.markloiseau.com/2012/04/hello-world-loadable-kernel-module-tutorial/)，尤其是关于链接和加载部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:54:42.033

由于您没有收到编译/链接错误并且`insmod`/`modprobe`没有抱怨缺少符号，因此发生这种情况的原因有两个：

1.  有人定义了一个宏`printk()`
2.  你看错地方了。文本将打印到系统日志。要看到这一点，请使用`dmesg | tail`

# sql - Oracle 创建带有列注释的表

> ID：10516284
> 
> 赞同：15
> 
> 时间：2012-05-09T12:39:02.323
> 
> 标签：sql, oracle

是否有列注释语法允许我在创建表语句（即内联）中声明列的位置直接指定列注释？[11g 规范](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7002.htm)没有提到任何东西，在[另一页](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-table.html)上提到了一些东西，但我无法让它工作。有一种方法可以[在创建表格后指定注释](http://www.adp-gmbh.ch/ora/sql/comment.html)，但我认为将注释与字段定义分开很烦人。我正在寻找这样的东西（不起作用）：

```
create table whatever (
 field number(15,0) primary key comment 'primary key generated from sequence pkseq',
 ...
) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T12:58:18.440

恐怕“烦人”`COMMENT ON`的语法是这样做的唯一方法。SQL Server、PostgreSQL 和 DB2 使用相同的语法（尽管据我所知，没有用于向数据库对象添加注释的 ANSI 标准语法）。

MySQL 支持您希望它工作的方式。我同意这将是一个更好的机制，但根据我的经验，很少有人使用评论，我怀疑甲骨文会改变它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T12:55:49.693

恐怕只能在创建表后使用`comment on column ... is ''`语法来完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T08:46:14.290

解决这种烦人的语法的方法也是在 Oracles SQLExplorer 中查看和编辑表。它包含一个向导，允许您在列旁边编辑评论。它甚至允许轻松创建更改表脚本。

我在编辑表时的程序是在向导中输入更改而不实际执行它们，然后转到其`DDL`选项卡并从那里检索 SQL（作为更新，而不是完整的创建脚本）并在向导上按取消。然后我把创建好的SQL放到我正在写的SQL脚本中。只有当我完成脚本时，我才会执行所有操作；我从不对向导本身进行任何更改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-08T19:25:38.670

在sqlplus（或类似的）上测试，但语法如下：

```
-- assuming you have privileges
COMMENT ON COLUMN SCHEMA1.TABLE1.COL1 
  IS 'My comment'

-- then you can double check like this
SELECT * FROM all_col_comments WHERE 
  (OWNER, TABLE_NAME, COLUMN_NAME) 
  IN (('SCHEMA1','TABLE1','COL1')); 
```

请注意，注释现在将显示在 SQLDeveloper（或 Toad 或您拥有的任何环境）中，直到您重新打开所述表的属性。

类似的语法可用于注释表、索引和物化视图。[来源：[https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4009.htm]](https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4009.htm])

我知道 MySQL 和其他类似的语法存在，但它不是正确的 ANSI。不过，它非常有用。

# asp.net - 将位图转换为字节

> ID：10516285
> 
> 赞同：2
> 
> 时间：2012-05-09T12:39:03.440
> 
> 标签：asp.net, vb.net, image, image-processing, graphics

我有以下代码：

```
Private Function SizeLogo(ByVal logoBytes As Byte()) As Byte()
        Using originalMemStream As MemoryStream = New MemoryStream(logoBytes),
            originalImage As System.Drawing.Image = System.Drawing.Image.FromStream(originalMemStream)

            Dim width As Integer = originalImage.Width
            Dim height As Integer = originalImage.Height
            Dim targetWidth As Integer = 300
            Dim targetHeight As Integer = 200
            Dim newHeight As Integer = 0
            Dim newWidth As Integer = 0

            Using oBitmap As New Bitmap(300, 200)
                Using oGraphic As Graphics = Graphics.FromImage(oBitmap)

                    Using oBrush As New SolidBrush(Color.White)
                        oGraphic.FillRectangle(oBrush, 0, 0, targetWidth, targetHeight)
                    End Using

                    Using oProduto As System.Drawing.Image = Drawing.Image.FromStream(originalMemStream)

                        Dim targetRatio As Decimal = CDec(targetWidth) / CDec(targetHeight)
                        Dim imageRatio As Decimal = CDec(width) / CDec(height)

                        If targetRatio > imageRatio Then
                            newHeight = targetHeight
                            newWidth = CInt(Math.Floor(imageRatio * CDec(targetHeight)))
                        Else
                            newHeight = CInt(Math.Floor(CDec(targetWidth) / imageRatio))
                            newWidth = targetWidth
                        End If

                        If newWidth > targetWidth Then newWidth = targetWidth
                        If newHeight > targetHeight Then newHeight = targetHeight

                        oGraphic.DrawImage(oProduto, 0, 0, newWidth, newHeight)

                        **Using thumbImage As Drawing.Image = oGraphic.  .GetThumbnailImage(targetWidth, targetHeight, Nothing, IntPtr.Zero),
                         outMemStream As MemoryStream = New MemoryStream()

                            thumbImage.Save(outMemStream, ImageFormat.Jpeg)
                            Return outMemStream.ToArray()
                        End Using**
                    End Using
                End Using
            End Using
        End Using
    End Function 
```

我想做的是

1.  创建 300width 和 200height 白色位图
2.  绘制并居中上传到中心的图像

我的问题是我无法保存创建的图像。这是转换问题吗？我已经突出显示了我认为我失败的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:16:15.903

您将需要保存 oBitmap。此外，如果您想在 300 x 200 位图中居中图像，则需要将计算的 x, y 传递给`oGraphic.DrawImage`而不是传递 0, 0

这是代码（请注意，为了清楚起见，我已将实心**画笔颜色更改为红色**；请确保根据您的情况将其更改为白色）

```
 Private Function SizeLogo(ByVal logoBytes As Byte()) As Byte()
    Using originalMemStream As MemoryStream = New MemoryStream(logoBytes),
        originalImage As System.Drawing.Image = System.Drawing.Image.FromStream(originalMemStream)

        Dim width As Integer = originalImage.Width
        Dim height As Integer = originalImage.Height
        Dim targetWidth As Integer = 300
        Dim targetHeight As Integer = 200
        Dim newHeight As Integer = 0
        Dim newWidth As Integer = 0

        Using oBitmap As New Bitmap(300, 200)
            Using oGraphic As Graphics = Graphics.FromImage(oBitmap)

                Using oBrush As New SolidBrush(Color.Red)
                    oGraphic.FillRectangle(oBrush, 0, 0, targetWidth, targetHeight)
                End Using

                Using oProduto As System.Drawing.Image = Drawing.Image.FromStream(originalMemStream)

                    Dim targetRatio As Decimal = CDec(targetWidth) / CDec(targetHeight)
                    Dim imageRatio As Decimal = CDec(width) / CDec(height)

                    If targetRatio > imageRatio Then
                        newHeight = targetHeight
                        newWidth = CInt(Math.Floor(imageRatio * CDec(targetHeight)))
                    Else
                        newHeight = CInt(Math.Floor(CDec(targetWidth) / imageRatio))
                        newWidth = targetWidth
                    End If

                    If newWidth > targetWidth Then newWidth = targetWidth
                    If newHeight > targetHeight Then newHeight = targetHeight

                    Dim x As Integer = 0
                    Dim y As Integer = 0

                    If (newWidth < targetWidth) Then
                        x = (targetWidth - newWidth) / 2
                    End If

                    If (newHeight < targetHeight) Then
                        y = (targetHeight - newHeight) / 2
                    End If

                    oGraphic.DrawImage(oProduto, x, y, newWidth, newHeight)

                    'uncomment this to save to file (just to test output)
                    'oBitmap.Save("D:\penguins.bmp")

                    Dim outMemStream As MemoryStream = New MemoryStream()
                    oBitmap.Save(outMemStream, ImageFormat.Jpeg)
                    Return outMemStream.GetBuffer()

                End Using
            End Using
        End Using
    End Using
End Function 
```

输出图像看起来像

![在此处输入图像描述](../Images/b15d39f328dd337693cb09bddc6d8111.png)

# java - 在可变数量的双打中找到平均值

> ID：10516287
> 
> 赞同：1
> 
> 时间：2012-05-09T12:39:10.197
> 
> 标签：java, arraylist, double, average

我有一个双精度数的 ArrayList，我需要找到所有数字之间的平均值。数组列表中 Double 实例的数量不是恒定的，可能是 2，可能是 90 我已经尝试了几个小时来自己获得算法，但无论如何都无法让它工作。

你有什么建议吗？或者你可以把我链接到一个现有的图书馆来得到这个平均值？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:44:12.130

创建一个`sum`变量：

```
double sum = 0; 
```

使用 for 循环遍历列表中的元素：

```
for (double d : yourList) 
```

在每次迭代中，添加到`sum`当前值：

```
 sum += d; 
```

在循环之后，要找到平均值，除以`sum`列表中的元素数：

```
double avg = sum / yourList.size(); 
```

* * *

这是**为所有认为这太简单**的人准备的...

上面的解决方案其实并不完美。如果列表中的前几个元素非常大而最后一个元素很小，则`sum += d`由于双精度数的关系，最终可能不会产生影响。

解决方案是在进行平均计算之前对列表进行排序：

```
Collections.sort(doublesList); 
```

现在将首先添加小元素，以确保尽可能准确地计算它们并为最终总和做出贡献:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-09T19:23:26.290

如果你喜欢流：

```
List<Number> list = Arrays.asList(number1, number2, number3, number4);

// calculate the average
double average = list.stream()
                     .mapToDouble(Number::doubleValue)
                     .average()
                     .getAsDouble(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:44:09.667

平均值的定义是所有值的总和除以值的数量。循环遍历这些值，将它们相加，然后将总和除以列表的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:47:39.100

如果您担心将整个列表加在一起时溢出，您可以使用运行平均值。因为它有更多的操作，它会比把所有的东西加在一起然后除一次要慢。

```
for (int x = 0; x < list.size(); x++)
   average = (average / (x+1)) * (x) + list.get(x) / (x+1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T12:44:35.700

如果“所有数字之间的平均值”是指列表中所有双打的平均值，您可以简单地将列表中的所有双打相加（使用循环）并将该总数除以列表中的双打数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T12:45:17.733

你有没有尝试过：

```
List<Double> list = new ArrayList<Double>();
...    
double countTotal = 0;

for (Double number : list)
{
    countTotal += number;
}

double average = countTotal / list.size(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T12:45:35.923

也许我没有得到这个问题......但它不是这样的吗？

```
double sum = 0.0;
for (double element : list) {
    sum += element;
}
double average = sum / list.size(); 
```

# maven - Mule Studio 中的 Maven 支持

> ID：10516288
> 
> 赞同：0
> 
> 时间：2012-05-09T12:39:12.257
> 
> 标签：maven, mule

Mule Studio 是 afaik 应该取代 Mule IDE 作为 Mule ESB 的开发工具。我试图了解我应该如何在 Mule Studio 中获得完整的 Maven 集成。我找到的所有教程都展示了如何在 IDE 中创建和打包项目，但这对我来说不可行，因为我需要 Maven 进行依赖管理、自动构建等。

基本上我想要与 m2eclipse 中的 Mule IDE 相同的 Maven 支持。也许我完全不在基地？有人有想法吗？

谢谢，奥洛夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:24:41.833

~~这是一个非常需要和期望的功能：[STUDIO-1393](http://www.mulesoft.org/jira/browse/STUDIO-1393)。请投票！~~

**更新：**

检查以下说明：[MuleStudio 中的 m2eclipse](http://www.mulesoft.org/documentation/display/MULE3STUDIO/Exporting+Studio+to+Maven)

# java - Scala 解析 RSS/Atom 提要

> ID：10516290
> 
> 赞同：7
> 
> 时间：2012-05-09T12:39:14.487
> 
> 标签：java, scala, rss, feed, atom-feed

有谁知道一个好的库/jar 来解析 RSS/Atom 提要？

我想填充一个 URL，并希望以同质的方式获取新闻项目。（意思是：Source 是否包含 Atom 或 RSS 提要无关紧要。我只想返回“Items”。）

在SO上浏览后，我想出了ROME，但现在看起来很混乱（例如没有下载），并且是一个纯Java的解决方案。Scala 将是首选，但如果不存在特定于 Scala 的内容，Java 也可以。此外，它应该是一个 JAR 库，因为我不使用 Maven 等。

PS：它不适用于 Android，仅适用于一个不错的旧桌面应用程序。

编辑：更清楚地说，我已经知道如何从资源中获取内容作为 XML。我想解析它们！自动检测它是 Atom 还是一些 RSS，然后给我一个统一的项目列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:22:48.517

你检查过[Dispatch](http://dispatch.databinder.net/Dispatch.html)吗？*它本身*没有任何内置的 RSS/Atom 功能，但您应该能够将响应文本作为 a 处理`scala.xml.NodeSeq`并做任何您需要的事情。

# javascript - 在 Netbeans 代码模板中用下划线替换空格

> ID：10516292
> 
> 赞同：0
> 
> 时间：2012-05-09T12:39:31.147
> 
> 标签：javascript, regex, netbeans-7, code-templates

我在 Netbeans 7.1.1 中创建了以下**JavaScript 代码模板**，这是为了在编辑器中自动生成代码，而不是输入代码。

```
do_this('${selection}${cursor}',13) 
```

这将导致以下代码，光标在引号之间

```
do_this('',13) 
```

该模板会自动将我突出显示的文本放在引号之间。

现在，问题是：我想用下划线替换选定/突出显示的代码段中的任何空格。我认为这可能与正则表达式（正则表达式），但我不知道如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:20:56.673

这在 NetBeans 代码模板中是不可能的，因为它们没有任何函数来操作变量中的数据。如果我有解决方法，我会在这里发布。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:41:52.537

不确定 Netbeans 特定的东西，但是一旦你有了选择，你可以做这样的事情：

```
selection = selection.split(" ").join("_"); 
```

# iphone - ios/SecItemDelete 不接受 SecIdentityRef/kSecMatchItemList

> ID：10516295
> 
> 赞同：1
> 
> 时间：2012-05-09T12:39:33.257
> 
> 标签：iphone, ios, x509, pki

在通过 CN 删除证书的简单方法中（证书之前已由 SecItemAdd 从 PKCS12 导入中放在那里）；我收到错误消息：

> 属性列表对格式无效：200（属性列表不能包含“SecIdentity”类型的对象）

基于[https://developer.apple.com/documentation/security/1395547-secitemdelete](https://developer.apple.com/documentation/security/1395547-secitemdelete)我认为我正在遵循说明：

> 要删除由瞬态引用标识的项目，请指定 kSecMatchItemList 搜索关键字，并在之前调用 SecItemCopyMatching 或 SecItemAdd 函数时使用 kSecReturnRef 返回类型关键字返回引用。

信。下面的代码：

```
NSDictionary * attributes;
NSString * cnString = @"/CN=foo";

attributes = [NSDictionary dictionaryWithObjectsAndKeys:
              (__bridge id)(kSecClassIdentity), kSecClass,
              cnString, kSecMatchSubjectContains,
              kSecMatchLimitAll, kSecMatchLimit,
              kCFBooleanTrue, kSecReturnRef,
              nil];

CFArrayRef result;
status = SecItemCopyMatching((__bridge CFDictionaryRef)(attributes), 
      (CFTypeRef *)&result);

if (status == noErr) {

    for(int i = 0; i < CFArrayGetCount(result); i++) {

        SecIdentityRef item = (SecIdentityRef) CFArrayGetValueAtIndex(result, i);
        NSLog(@"Item #%d: %@", i, item);

        attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                      (__bridge id)(kSecClassIdentity), kSecClass,
                      [NSArray arrayWithObject:(__bridge id)item], kSecMatchItemList,
                      kSecMatchLimitOne, kSecMatchLimit,
                      nil];

        status = SecItemDelete((__bridge CFDictionaryRef)(attributes));

        if (status != noErr || status != errSecItemNotFound)
            NSLog(@"Delete %d/%@failed: %ld (ignored)", i,item, status);
    };
}; 
```

控制台上的输出是：

```
 Item #0: <SecIdentityRef: 0xc7359ff0> 
```

直接在找到之后（如果搜索范围扩大，我们会得到一个数组）。

然后从 Security.dylib 的深处：

> 属性列表对格式无效：200（属性列表不能包含“SecIdentity”类型的对象）

最终保释：

```
 Delete 0/<SecIdentityRef: 0xc7359ff0>failed: -50 (ignored) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-01T10:15:54.950

引用头文件中的文档`SecItem.h`，安全框架的一部分：

> 默认情况下，此函数会删除与指定查询匹配的所有项目。您可以通过指定以下键之一来更改此行为：
> 
> *   要删除由临时引用标识的项目，**在 iOS 上，使用项目引用指定 kSecValueRef**。在 OS X 上，给出一个包含项目引用**的 kSecMatchItemList 。**
>     
>     
> *   要删除由持久引用标识的项目，**在 iOS 上，指定 kSecValuePersistentRef**和通过使用 SecItemCopyMatching 或 SecItemAdd 的 kSecReturnPersistentRef 键返回的持久引用。**在 OSX 上，将 kSecMatchItemList**与通过使用带有 SecItemCopyMatching 或 SecItemAdd 的 kSecReturnPersistentRef 键返回的持久引用一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:59:46.007

这已在最新的 GM 掉落中得到修复。现实现在与文档同步。

# python - 管理站点静态信息的最佳方法是什么，同时在其中实现 Search API？

> ID：10516298
> 
> 赞同：1
> 
> 时间：2012-05-09T12:39:39.353
> 
> 标签：python, google-app-engine, django-cms, gae-search

最近，谷歌创建了一个新的[搜索 API](https://developers.google.com/appengine/docs/python/search/)，您可以将其集成到您的谷歌应用引擎应用程序中，以便在您的站点中搜索文档和信息。凉爽的！

我有一个包含大量静态信息的 Django 资源的站点。我想使用新的 Search API 将此信息集成到站点范围的搜索引擎中。

对于拥有现有站点和用于内容的大量文本资源的人，将静态信息（来自平面、HTML 文件）集成到站点 Search API 数据存储区的最佳方式是什么？额外的问题，管理此内容的最佳方法是什么，以便在我向站点添加其他页面时，它们将集成到搜索数据存储中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:55:51.750

搜索 API 要求您将文档添加到搜索后端才能进行搜索。对于您的静态资源，这意味着您必须使用搜索 API 抓取并将它们添加到搜索后端。

您可能希望在每次上传后执行此操作。也许最简单的方法是让一个 cron 作业遍历您的文件并检查它们的时间戳。如果它们比上次遍历时更新（如果有的话），请将它们添加到/更新搜索后端。除了 cron 作业，您还可以定义一个触发遍历并在部署新应用程序版本后触发的处理程序。

# sitecore - Sitecore 计划任务仅每小时运行一次

> ID：10516301
> 
> 赞同：5
> 
> 时间：2012-05-09T12:39:46.923
> 
> 标签：sitecore, sitecore6

我们设置了一个时间表来执行一个命令。计划每 5 分钟运行一次，如下所示：20090201T235900|20190201T235900|127|00:05:00

但是，从日志中我们看到它仅每小时运行一次。

是否有一个原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:49:01.033

检查 sitecore.config 文件中的调度频率

```
<sitecore>
    <scheduling>
        <!-- Time between checking for scheduled tasks waiting to execute -->
        <frequency>00:05:00</frequency>
    </scheduling>
</sitecore> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T09:46:01.763

调度间隔基于*调度程序*间隔和*作业*间隔。每个调度程序间隔期间，都会评估所有配置的作业。这是记录的。在该评估期间，每个作业都会根据上次运行的时间进行检查，如果该间隔大于配置的作业间隔，则启动该作业。

这很简单，但了解机制很重要。您还可以看到它是如何不允许在特定时间固有地运行作业的，只能以近似的时间间隔运行。

您还可以看到，无论作业间隔如何，作业永远不会比调度程序间隔更频繁地运行。将调度程序设置为一分钟间隔以将作业计时的不准确性降低到不超过一分钟并不是不合理的。

在更糟糕的情况下，调度程序间隔为 5 分钟，作业间隔为 5 分钟。作业开始的延迟可能长达 9 分 59 秒。

# css - 如何使用 css 将我的第二个 bg 图像“url(repeat_bg_right_side.png)”重新定位到页面的右侧？

> ID：10516303
> 
> 赞同：1
> 
> 时间：2012-05-09T12:39:50.760
> 
> 标签：css, position, background-image, repeat, background-repeat

```
background-image: url(repeat_bg.png), url(repeat_bg_right_side.png);
background-repeat: repeat-y, repeat-y; " 
```

我将如何重新定位`url(repeat_bg_right_side.png)`到页面的右侧？这些基本上是 2 个小图像文件，我用作列来填充 bg 的左右部分。感谢您抽出时间[在 Windows 窗体中的 BackgroundImage 位置](https://stackoverflow.com/questions/3707562/position-of-backgroundimage-in-windows-form)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:42:41.463

你可以这样做

```
background: url(repeat_bg.png) repeat-y, url(repeat_bg_right_side.png) top right repeat-y; 
```

# c++ - Speedier std::insert，或者，如何优化 Instruments 所说的慢速调用？

> ID：10516305
> 
> 赞同：2
> 
> 时间：2012-05-09T12:40:05.707
> 
> 标签：c++, ios, optimization, std

我正在尝试使用 Xcode 工具来寻找方法来加快我的应用程序的速度，使其足以在旧设备上运行良好。大部分时间都花在了音频回调上，具体来说：

![显示百分比的屏幕截图](../Images/b1275ed8db9ce192624bebee5534bf2a.png)

```
void Analyzer::mergeWithOld(tones_t& tones) const {
    tones.sort();
    tones_t::iterator it = tones.begin();
    // Iterate over old tones
    for (tones_t::const_iterator oldit = m_tones.begin(); oldit != m_tones.end(); ++oldit) {
        // Try to find a matching new tone
        while (it != tones.end() && *it < *oldit) ++it;
        // If match found
        if (it != tones.end() && *it == *oldit) {
            // Merge the old tone into the new tone
            it->age = oldit->age + 1;
            it->stabledb = 0.8 * oldit->stabledb + 0.2 * it->db;
            it->freq = 0.5 * oldit->freq + 0.5 * it->freq;
        } else if (oldit->db > -80.0) {
            // Insert a decayed version of the old tone into new tones
            Tone& t = *tones.insert(it, *oldit);
            t.db -= 5.0;
            t.stabledb -= 0.1;
        }
    }
} 
```

我感觉有点像一条狗，终于抓住了一只松鼠，然后意识到他不知道下一步该做什么。我可以加快速度吗？如果可以，我该怎么做？

编辑：当然——tones_t 是 `typedef std::list<Tone> tones_t;`

Tone 是一个结构：

```
struct Tone {
    static const std::size_t MAXHARM = 48; ///< The maximum number of harmonics tracked
    static const std::size_t MINAGE = TONE_AGE_REQUIRED; // The minimum age required for a tone to be output
    double freq; ///< Frequency (Hz)
    double db; ///< Level (dB)
    double stabledb; ///< Stable level, useful for graphics rendering
    double harmonics[MAXHARM]; ///< Harmonics' levels
    std::size_t age; ///< How many times the tone has been detected in row

  double highestFreq;
  double lowestFreq;
  int function;
  float timeStamp;

    Tone(); 
    void print() const; ///< Prints Tone to std::cout
    bool operator==(double f) const; ///< Compare for rough frequency match
    /// Less-than compare by levels (instead of frequencies like operator< does)
    static bool dbCompare(Tone const& l, Tone const& r) { 
    return l.db < r.db;
  }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:25:47.143

优化是一件复杂的事情。您可能需要尝试几种方法。

1：将m_tones 和tones 合并到一个新列表中，然后将该列表分配回m_tones。请务必预先设置新列表的容量。

这会将两个列表副本添加到混合中，但会消除所有插入。您必须进行测试以查看它是否更快。

2：为不同的结构转储列表。您可以将 m_tones 存储为 std::set 而不是列表吗？

当您需要以有序方式获取 m_tones 时，您将需要调用 std::sort，但如果您不需要有序迭代或仅不经常需要它，那么它可能会更快。

这些只是关于如何以不同方式思考问题的想法，您必须测试测试测试以查看哪个选项具有最佳性能。

# mysql - 插入多个 MySQL 外键时出错

> ID：10516307
> 
> 赞同：1
> 
> 时间：2012-05-09T12:40:15.327
> 
> 标签：mysql

当我尝试在 SQL 中将当前表插入到我的表中时，出现错误（产品表）：

```
CREATE TABLE parent(

    Barcode     INT(9),
    PRIMARY KEY (Barcode)
) ENGINE=INNODB;

CREATE TABLE SuppliedBy(

    Onr         CHAR(10),
    OrgNR       INT(10),
    Date        DATE            NOT NULL,           
    PRIMARY KEY (Onr),
    FOREIGN KEY (OrgNR) REFERENCES Supplier(OrgNR)
                          ON DELETE CASCADE
                          ON UPDATE CASCADE
) ENGINE=INNODB;

CREATE TABLE Products(

    Onr     CHAR(10),
    Barcode     INT(9),
    Quantity    INT(10)         DEFAULT 0
                        CHECK (Quantity >= 0),
    PRIMARY KEY (Onr, Barcode),
    FOREIGN KEY (Onr) REFERENCES SuppliedBy(SSN)
                                ON DELETE CASCADE
                                ON UPDATE CASCADE,
    FOREIGN KEY (Barcode) REFERENCES parent(Barcode)
                                ON DELETE CASCADE
                                ON UPDATE CASCADE
)ENGINE=INNODB; 
```

我收到以下消息：

```
#1005 - Can't create table '.\db_project\#sql-b58_6d.frm' (errno: 150) 
```

我确定它与这种关系中的几个外键有关，我在互联网上搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:51:41.767

没有列`SuppliedBy.SSN`。

```
FOREIGN KEY (Onr) REFERENCES SuppliedBy(SSN) 
```

也许你的意思是

```
FOREIGN KEY (Onr) REFERENCES SuppliedBy(Onr)
                            ON DELETE CASCADE
                            ON UPDATE CASCADE, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:50:07.833

我相信这个问题很可能是您定义 FOREIGN KEYS 指向的表之一*没有*您指向的索引外键字段。

为了使 FOREIGN KEY 起作用，您指向的字段需要有一个索引。

见[Mysql。无法创建表 errno 150](https://stackoverflow.com/questions/1749332/mysql-cant-create-table-errno-150)

此外，请检查您是否满足创建密钥的所有条件。两个表中的列必须：

*   是相同的数据类型
*   大小或长度相同
*   已定义索引。

# javascript - 关于在 Chrome 中使用 Javascript 调用 Chrome API 或 Chrome 扩展

> ID：10516309
> 
> 赞同：0
> 
> 时间：2012-05-09T12:40:19.843
> 
> 标签：javascript, html, google-chrome, text-to-speech

我编写了一个 HTML 页面，我想在我的 HTML 页面中调用一个带有 Javascript 函数的 Chrome API（例如 tts）。

顺便说一句：我不想创建 Chrome 扩展程序，只想作为 Web 应用程序运行。

那可能吗 ？如果可能的话，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:27:40.750

除了极少数例外，`chrome.*`API 只能在 chrome 扩展的上下文中使用。有一些例外，但可能没有您想要的。要查看它们，请按 F12，`chrome`在提示中键入，然后单击以展开返回的对象。

# web-services - 在 Linux 上使用 mono 的不同输出与在 win7 上的 Visual Studio 上调用 Web 服务

> ID：10516317
> 
> 赞同：0
> 
> 时间：2012-05-09T12:40:47.653
> 
> 标签：web-services, f#, mono

我使用 Exchange 网络服务从 Exchange 邮件服务器中提取附件。当我在 linux 上使用 mono 调用代码时，某个文本附件包含一些混合字符串。

像这样

“samwinglin vz”变成“sainglin vz”->所以它缺少“m w”。我在一个 150kb 的文件中看到了大约 3 次。linux 输出与 windows 输出中缺少 3 个字节。

当我从 Visual Studio 中提取它时，文本附件是完美的。

就像这个例子 [从交换收件箱保存附件](http://fssnip.net/aF)

知道我应该在哪个方向上解决这个问题吗？

代码：

```
#r "Microsoft.Exchange.WebServices.dll"

open Microsoft
open Microsoft.Exchange.WebServices.Data
open System
open System.Net

type PgzExchangeService(url,user,password) =
    let service = new ExchangeService(ExchangeVersion.Exchange2007_SP1,
                                      TimeZoneInfo.CreateCustomTimeZone("Central Standard Time",new TimeSpan(-6, 0, 0),"(GMT-06:00) Central Time (US & Canada)","Central Standard Time"))

    do
       ServicePointManager.ServerCertificateValidationCallback <- ( fun _ _ _ _ -> true )
       service.Url <- new Uri(url)
       service.Credentials <- new WebCredentials(user, password, "domain")

    member this.Service with get() = service
    member this.InboxItems = this.Service.FindItems(WellKnownFolderName.Inbox, new ItemView(10))
    member this.GetFileAttachments ( item : Item ) =        
           let emailMessage = 
               EmailMessage.Bind( this.Service, 
                                  item.Id, 
                                  new PropertySet(BasePropertySet.IdOnly,    ItemSchema.Attachments))
           item, emailMessage.Attachments |> Seq.choose (fun attachment -> match box attachment with  
                                                                       | :? FileAttachment as x -> Some(x) | _ -> None)   

let mailAtdomain = new PgzExchangeService("https://xx.xx.XX.XX/EWS/Exchange.asmx", "user", "passw")

let printsave (item : Item ,att : seq<FileAttachment>) =
    if (Seq.length att) > 0 then
        printfn "%A - saving %i attachments" item.Subject (Seq.length att)        
        att |> Seq.iter ( fun attachment -> printfn "%A" attachment.Name 
                                            attachment.Load(@"/tmp/test/" + attachment.Name ) )   

// filter so we only have items with attachements and ...
let itemsWithAttachments = mailAtdomain.InboxItems                            
                           |> Seq.map mailAtdomain.GetFileAttachments 
                           |> Seq.iter printsave 
```

由于 TimeZoneInfo 中的错误，该代码无法在带有单声道的 Windows 上运行

* * *

此示例代码在 linux 上运行，但不能在 windows 上运行。因为 TimeZoneInfo 错误。但是有了这个代码，可以在 linux 上提取附件。尝试 csv 附件，看看结果是否相同。我丢失数据！每行大约 3 个字节

如果您需要给出问题的示例 csv 附件，请给我发邮件

这是我用于测试的 ac# 版本。从 VS2010 运行它可以完美运行，但在带有单声道的 linux 上，附件大小错误，缺少一些字节？！。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Exchange.WebServices.Data;
using System.Net;

namespace Exchange_SDP_Attachment_Extracter
{
    public class PgzExchangeService
    {
        public void Extract()
        {            
            ExchangeService service = new ExchangeService  (ExchangeVersion.Exchange2007_SP1,TimeZoneInfo.Local);
            service.Credentials = new NetworkCredential("user", "pass", "domain");
            service.Url = new Uri("https://xx.xx.xx.xx/EWS/Exchange.asmx");
            ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

            FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, new ItemView(10));
            foreach (Item item in findResults.Items)
            {
                EmailMessage e = EmailMessage.Bind
                                 (service,
                                   item.Id,
                                   new PropertySet(BasePropertySet.IdOnly, ItemSchema.Attachments));
                foreach ( Attachment att in e.Attachments )
                {

                    if (att is FileAttachment)
                    {
                        FileAttachment fileAttachment = (FileAttachment)att;
                        fileAttachment.Load(@"/tmp/testsdp/" + fileAttachment.Name);                        
                    }
                }

            }
        }
    }

    class Program
    {
         static void Main(string[] args)
         {
             PgzExchangeService pgz = new PgzExchangeService();
             pgz.Extract();
         }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:59:45.427

我的建议是尝试使用十六进制编辑器检查文本附件。这三个事件有一些不寻常的地方。在我们向您推荐行动方案之前，您需要找出这三行的共同点。

# android - 如何创建可从不同部分点击的大图像

> ID：10516321
> 
> 赞同：0
> 
> 时间：2012-05-09T12:41:01.213
> 
> 标签：android, android-layout, android-intent

如何使大图像可从不同部分单击，即当我单击任何元素时我有一个像元素周期表这样的大图像然后它根据元素执行操作我们只有一个图像

它是如何实现的

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:46:24.207

Show image on `Canvas` by extending `View` class and then `onTouch()` calculate x,y coordinate.

You can use this:

```
public class MyImageView extends View {

private static final int INVALID_POINTER_ID = -1;

    private Drawable mImage;
    private float mPosX;
    private float mPosY;

    private float mLastTouchX;
    private float mLastTouchY;
    private int mActivePointerId = INVALID_POINTER_ID;

    private ScaleGestureDetector mScaleDetector;
    private float mScaleFactor = 1.f;

    public MyImageView(Context context) {
        this(context, null, 0);
    mImage = getResources().getDrawable(R.drawable.imagename);

        mImage.setBounds(0, 0, mImage.getIntrinsicWidth(), mImage.getIntrinsicHeight());
    }

    public MyImageView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public MyImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Let the ScaleGestureDetector inspect all events.
        mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0);
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            break;
        }
        }

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.save();
        Log.d("DEBUG", "X: "+mPosX+" Y: "+mPosY);
        canvas.translate(mPosX, mPosY);
        canvas.scale(mScaleFactor, mScaleFactor);
        mImage.draw(canvas);
        canvas.restore();
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            mScaleFactor *= detector.getScaleFactor();

            // Don't let the object get too small or too large.
            mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 10.0f));

            invalidate();
            return true;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:47:13.530

您插入单独的图像视图，对于每个图像，它将是一个周期元素。并单击侦听器以分离图像。

如果您使用实时周期表，这将是一个笨拙的代码。

如果您接受答案，请单击右侧。

有任何问题请告诉我。

# visual-studio-2010 - Visual Studio中的Before和AfterBuild目标未触发

> ID：10516336
> 
> 赞同：18
> 
> 时间：2012-05-09T12:41:52.243
> 
> 标签：visual-studio-2010, msbuild

我正在执行以下操作：

*   我创建了一个默认的类文件项目
*   编辑 csproj 文件以包含 Pre 和 Post BuildEvents
*   取消注释默认注释掉的 BeforeBuild 和 AfterBuild 目标

BeforeBuild 和 AfterBuild 目标在 Visual Studio 中没有被称为表单，而是来自 msbuild 命令行，这是为什么呢？

假设它有效，我宁愿使用 msbuild 目标而不是 PostBuildEvent，因为它给了我更多的权力和灵活性。

干杯，

亚当

*我缩短了输出中的一些路径，所以如果它们不一致，这就是为什么*

* * *

ClassLibrary1.csproj 更改

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<Target Name="BeforeBuild">
  <Message Text="### BeforeBuild ###" />
</Target>
<Target Name="AfterBuild">
  <Message Text="### AfterBuild ###" />
</Target>
<PropertyGroup>
  <PreBuildEvent>echo PRE_BUILD</PreBuildEvent>
</PropertyGroup>
<PropertyGroup>
 <PostBuildEvent>echo POST_BUILD</PostBuildEvent>
</PropertyGroup> 
```

我的 VS 2010 的构建输出是

```
------ Rebuild All started: Project: ClassLibrary1, Configuration: Debug Any CPU ------
PRE_BUILD
ClassLibrary1 -> c:\ClassLibrary1\bin\Debug\ClassLibrary1.dll
POST_BUILD
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

并从命令行

```
#>msbuild ClassLibrary1.sln
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.239]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

Build started 09/05/2012 13:27:42.
Project "c:.sln" on node 1 (default targets).
ValidateSolutionConfiguration:
  Building solution configuration "Debug|Any CPU".
Project "c:.sln" (1) is building "c:\ClassLibrary1.csproj" (2) on node 1 (default targets).
    BeforeBuild:
      ### BeforeBuild ###
PreBuildEvent:
  echo PRE_BUILD
  PRE_BUILD
GenerateTargetFrameworkMonikerAttribute:
Skipping target "GenerateTargetFrameworkMonikerAttribute" because all output files are up-to-date with respect to the input files.
CoreCompile:
Skipping target "CoreCompile" because all output files are up-to-date with respect to the input files.
CopyFilesToOutputDirectory:
  ClassLibrary1 -> c:\bin\Debug\ClassLibrary1.dll
PostBuildEvent:
  echo POST_BUILD
  POST_BUILD
AfterBuild:
  ### AfterBuild ###
Done Building Project "c:\ClassLibrary1.csproj" (default targets).

Done Building Project "c:.sln" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.18 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-09T14:56:55.167

您的构建事件正在触发，您只是在 Visual Studio 中看不到它们。

默认情况下，VS 将 msbuild 详细程度设置为`minimal`. 您可以通过将消息重要性更改为来显示您的消息`high`

```
<Target Name="BeforeBuild">
  <Message Text="### BeforeBuild ###"  Importance="high" />
</Target>
<Target Name="AfterBuild">
  <Message Text="### AfterBuild ###" Importance="high" />
</Target> 
```

您还可以在 VS 中的 Tools->Options 下更改详细设置，然后在 Projects and Solutions->Build and Run 下更改。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-31T19:05:22.973

只是为了其他人的帮助，当他们遇到类似的问题但原因可能不同时。如果您在目标之后进行了导入，那么 AfterBuild 也可能无法正常工作。

**确保您拥有的所有导入都应该在目标定义之前，目标定义应该在最后**

# php - LDAP 在 PHP 中搜索多个 DN

> ID：10516339
> 
> 赞同：2
> 
> 时间：2012-05-09T12:42:06.610
> 
> 标签：php, ldap

根据*[php.net 手册](http://www.php.net/manual/en/function.ldap-search.php)*中的[这些](http://www.php.net/manual/en/function.ldap-search.php#94554) [帖子](http://www.php.net/manual/en/function.ldap-search.php#94555)，应该可以为.`ldap_search()`

但是，我无法让以下实现工作：

```
$dn[] = 'ou=Red,ou=Teams,ou=Users,dc=example,dc=org';
$dn[] = 'ou=Green,ou=Teams,ou=Users,dc=example,dc=org';
$dn[] = 'ou=Blue,ou=Teams,ou=Users,dc=example,dc=org';

$query = ldap_search($conn, $dn, $filter, $attrs); 
```

通过任何单独的 DN 字符串时一切都很好，但提供数组将出错并显示消息：'没有这样的对象'。

一个明显的解决方法是遍历我的 DN 数组以触发单独的查询并将所有内容推送到一个数组中。我想避免这样做，因为我在一个 DN *[（分页 - 示例 2）](http://us3.php.net/manual/en/function.ldap-control-paged-result.php)*中带回了 8000 多个对象，在另外两个中带回了大约 300 个对象。

***实际上*是否可以搜索多个 DN？** 可能是单个 DN 字符串中的特殊语法（符号/字符）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:57:24.357

搜索请求必须至少包含以下参数：

*   搜索开始的基础对象（不返回基础对象之上的对象）
*   搜索范围：`base`是基础对象本身，`one`是基础对象和基础对象下一级，`sub`是基础对象和基础对象下面的所有条目。
*   一个过滤器，它将返回的条目限制为与过滤器中的断言匹配的条目

也可以提供属性列表，但如果在搜索请求中没有提供任何用户属性，LDAP API 将请求所有用户属性，但不是全部。

在列出的情况下，将基础对象设置为`ou=users,dc=example,dc=com`并使用适当的过滤器。如果 LDAP 客户端必须将返回的条目限制为从属于 , 的条目`ou=red`，`ou=green`或者`ou=blue`可以使用复合可扩展匹配过滤器，例如`(&(objectClass=inetOrgPerson)(|(ou:dn:=red)(ou:dn:=green)(ou:dn:=blue)))`- 如果数据不使用，则使用正确的对象类`inetOrgPerson`。所有 LDAP 兼容的服务器都支持可扩展的匹配过滤器，但不兼容的服务器可能不支持此标准过滤器。

不能使用多个基础对象，该`scope`参数定义了在基础对象下方检查多少从属级别（如果有）。

### 也可以看看

*   [LDAP：掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)
*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:51:02.117

您在[手册](http://www.php.net/manual/en/function.ldap-search.php)中看到了吗？

> *这些数组的大小必须与链接标识符数组的大小相同，因为数组的第一个条目用于一次搜索，第二个条目用于另一个搜索，依此类推。*

基本上，您的`$conn`变量需要是一个与数组大小相等的连接`$dn`数组。

如果数组中有 3 个元素，则`$dn`数组中需要 3 个元素`$conn`：

```
$ds = ldap_connect($ldapserver);

$dn[] = 'ou=Red,ou=Teams,ou=Users,dc=example,dc=org';
$dn[] = 'ou=Green,ou=Teams,ou=Users,dc=example,dc=org';
$dn[] = 'ou=Blue,ou=Teams,ou=Users,dc=example,dc=org';

// Match connection elements to count of dn elements
for($x=0, $x < count($dn), $x++)
{
    $conn[] = $ds;
}

$query = ldap_search($conn, $dn, $filter, $attrs); 
```

# ldap - 可以在运行时更改 LDAP 架构吗？

> ID：10516340
> 
> 赞同：0
> 
> 时间：2012-05-09T12:42:09.070
> 
> 标签：ldap, jndi, apacheds, opends, opendj

因为模式、对象类定义等`DirContext`在 JNDI 中，所以 API 允许在运行时更改它们（添加新属性、删除它们等）。这是否受支持，或者这取决于存储库实现？特别是，LDAP 存储库是否支持这一点？如果取决于实现，我对 ApacheDS 和 OpenDJ 很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:04:07.020

模式可能是可变的：LDAP 客户端是否可以更改模式取决于目录管理员是否允许更改子模式条目。在某些（但不是全部）服务器中，模式的位置列在根 DSE 中。

通常，模式必须是可读的，因为 LDAP 客户端需要访问匹配规则、排序规则和属性语法来执行属性值的比较（应避免语言本地比较，应首选匹配规则），但模式是否可变取决于管理员是否允许客户端使用它。

### 也可以看看

*   [LDAP: The Root DSE](http://ff1959.wordpress.com/2011/04/11/the-root-dse-is-that-entry-with-zero-rdns-and-contains-information-about-the-directory-server/)了解有关根 DSE 的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:35:35.420

一些服务器，如 OpenDJ、Sun Directory Server...，允许您动态修改服务器的架构（前提是您有适当的权限），但强烈建议您扩展架构并且不要进行不兼容的更改（例如删除 objectClass条目当前使用的定义）。

# jquery - jQuery 用暂停改变 divs html

> ID：10516346
> 
> 赞同：0
> 
> 时间：2012-05-09T12:42:35.407
> 
> 标签：jquery

> **可能重复：**
> [Javascript睡眠](https://stackoverflow.com/questions/951021/javascript-sleep)
> [如何在我的javascript中延迟执行](https://stackoverflow.com/questions/5990725/how-to-delay-execution-in-between-the-following-in-my-javascript)

嗨，我想更改两个 div 的 html。但中间有停顿

```
$(#div1).html('Div1 content');
$(#div2).html('Div2 content');
//wait 5 seconds
$(#div1).html('Div1 new content');
//wait 5 seconds
$(#div2).html('Div2 new content'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:45:34.720

一个快速的方法是链接几个[`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)s。

```
$('#div1').html('Div1 content');
$('#div2').html('Div2 content');

setTimeout(function () {
    $('#div1').html('Div1 new content');

    setTimeout(function () {
        $('#div2').html('Div2 new content');
    }, 5000);

}, 5000); 
```

[不要忘记引用你的`$()`选择器。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:44:22.827

您可以使用该`setTimeOut()`功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:45:08.327

```
$(document).ready(function() {
$('#div1').html('Div1 content');
$('#div2').html('Div2 content');

//wait 5 seconds   
$('#div1').delay(5000)
    .queue(function(n) {
        $(this).html("Div1 new content");       
    });

//wait another 5 seconds
$('#div2').delay(10000)
    .queue(function(n) {
        $(this).html("Div2 new content");       
    });
}); 
```

# c# - 以编程方式比较来自 2 个 CSV 文件的行数据

> ID：10516349
> 
> 赞同：-3
> 
> 时间：2012-05-09T12:42:39.163
> 
> 标签：c#, csv, comparison

我有 2 个 CSV 文件，每个文件有 7 列。CSV 文件 1 存储当前或旧数据。CSV 文件 2 将要更新的新数据存储到 CSV 文件 1 中。

我想以编程方式比较 CSV 文件每列的每一行条目，如果检测到更改，则生成一个 SQL 脚本，可以运行该脚本以自动将此数据更新到 CSV 文件 1 中。

例如，如果 CSV 文件 1 有一个名为“three”的字符串值存储在 ID 值为 1 的“number”列下，并且 CSV 文件 2 有一个名为“zwei”的字符串值存储在具有相同 ID 值的同一列下，则 CSV 文件1 的“三”值应更改为“zwei”，但这必须通过以编程方式生成的 SQL 脚本来完成。

请协助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:46:53.067

我会将这两个文件加载到 SQL 临时表中，逐行处理并在 SQL 中进行更新。然后完全覆盖 CSV 文件 1。

这是快速和容易的。

# java - 如果文件已重命名，如何查找文件扩展名？

> ID：10516354
> 
> 赞同：3
> 
> 时间：2012-05-09T12:43:02.537
> 
> 标签：java

如果文件已重命名，如何查找文件扩展名？有没有可用的工具？

示例：我有一个文件“1.doc”；我希望每个人都知道这是我刚刚重命名为“1.txt”的 Word 文档。但该文件原本是Word文档；如何获得原始文件扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:47:55.737

重命名文件后，不会保留以前的名称。

至于从内容中自动猜测文件的格式，请查看 Unix[`file`](http://unixhelp.ed.ac.uk/CGI/man-cgi?file)实用程序。安装在我的 Ubuntu 机器上的版本将 Microsoft Word 列为它所知道的“神奇”签名之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:45:25.493

您无法取回以前的文件扩展名。您所能做的就是查看文件的内容，并尝试猜测它是什么。

大多数（很多？）文件格式都以用于识别文件格式的“神奇”值开头，但这种方法永远不可能 100% 准确。

正如@AaronDigulla 在评论中提到的那样，那里有一些库可以帮助您完成“猜测”的任务，并且该问题的答案[包含](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)指向一些此类库的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:51:04.447

考虑使用`javax.activation.FileDataSource`JavaBeans 激活框架。特别是使用[getContentType()](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/javabeans/glasgow/javadocs/javax/activation/FileDataSource.html#getContentType%28%29 "获取内容类型（）")方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:44:52.553

你要做的是找出它的 MIME 类型是什么。您可以使用本教程[http://www.roseindia.net/java/java-get-example/get-mime-type.shtml](http://www.roseindia.net/java/java-get-example/get-mime-type.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T12:46:25.330

在重命名之前将其保存在一个名为 originalName 的单独字符串中......因为当您更改字符串的名称时，分配的内存会更改并且没有返回或撤消

# .net - 如何为 windows 的 firebird 数据库创建多个实例（用户）？

> ID：10516359
> 
> 赞同：0
> 
> 时间：2012-05-09T12:43:13.303
> 
> 标签：.net, database, firebird, embedded-database

嗨，我对 firebird 数据库有疑问。我正在使用 dotnet 框架工作。我选择了具有嵌入式数据库和轻量级的 firebird 数据库，最重要的是我们的软件是可移植的。我无法更改默认用户密码，也无法为同一数据库创建新用户。在我的程序中，我必须更改默认用户（sysdba）密码并为同一个数据库创建一个新用户。

请为我的程序提供解决方案。

谢谢并恭祝安康

GVL 苏布拉马尼亚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:23:08.670

如果您使用嵌入式 Firebird，它不使用用户名和密码（尽管大多数驱动程序会要求您设置用户名和密码（任何都可以））。

因此，如果您使用嵌入式 Firebird，则无法更改用户名和密码，因为没有用户名和密码可更改。

# r - 使用熔化/铸造创建百分比而不是总和

> ID：10516362
> 
> 赞同：4
> 
> 时间：2012-05-09T12:43:18.343
> 
> 标签：r

简单的例子。我想使用 cast/melt 而不是总和来创建一个百分比数据框。

例子。

```
eg <- data.frame(
Time = factor(c(1,2,1,2)), 
A1 = c(0, 0, 1, 1), 
A2 = c(1, 1, 1, 1), 
B1 = c(0, 0, 0, 0)
)

eg.m <- melt(eg,id="Time")
eg.c <- cast(eg.m,Time ~ variable, sum, margins="grand_row") 
```

在上面的例子中，我可以产生总和。除了产生总和之外，是否有一种方法可以产生每个单元格中的百分比，即单元格/gran_row 的总和？我知道我可以在这里使用 ddply 和 reshape 做一些事情，但想知道是否有更优雅的解决方案。

这是我正在寻找的示例：

```
 Time  A1  A2  B1
1    1 0.5 0.5   0
2    2 1.0 1.0   0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:13:21.153

对我来说似乎很难避免分两步这样做。问题是您想在 dcast 操作的输出上运行 cumsum/sum 函数，除非我误解了您仍然想要什么。

首先是你所拥有的：

```
eg.c <- dcast(eg.m,Time ~ variable, sum ) 
```

其次是将 cumsum/sum 函数应用于列：

```
japply(eg.c, sapply(eg.c, is.numeric ), function(x) cumsum(x)/sum(x) )

  Time  A1  A2  B1
1    1 0.5 0.5 NaN
2    2 1.0 1.0 NaN 
```

`japply`我的 .RProfile 中的函数在哪里：

```
# Takes a data.frame and returns a data.frame with only the specified columns transformed
japply <- function(df, sel, FUN=function(x) x, ...) {
  df[,sel] <- sapply( df[,sel], FUN, ... )
  df
} 
```

# jquery - 纬度的jQuery十进制掩码

> ID：10516374
> 
> 赞同：0
> 
> 时间：2012-05-09T12:43:56.000
> 
> 标签：jquery, decimal, mask

我想在文本框上放置一个十进制掩码。我希望格式为 999.99999（'.' 左侧的三位数字和右侧的 5 位。

我想在开始时允许负号'-'

所以我们可以输入 -245.45218 例如我尝试使用这个：

```
 $("#latitude").decimalMask("999.99999"); 
```

但这不允许在开头放置“-”符号

我也试过

```
$("#latitude").decimalMask("#999.99999"); 
```

但它不起作用。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:04:26.430

这个插件允许您创建自己的掩码元素.. [https://github.com/digitalBush/jquery.maskedinput](https://github.com/digitalBush/jquery.maskedinput)

```
$.mask.definitions['~']='[-]?';
$("#latitude").mask("~999.99999");​ 
```

jsfiddle：http: [//jsfiddle.net/lucuma/MKKWd/](http://jsfiddle.net/lucuma/MKKWd/)

# c# - 在子窗口中使用响应值

> ID：10516377
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:44:09.337
> 
> 标签：c#, silverlight, xaml, childwindow

我很难理解 Silverlight 如何使用来自 Web 服务的异步响应。我已经宣布——

```
public partial class Users : Page
{
    public string PID; 
```

然后使用-

```
 if
 {
 WebService.Service1SoapClient client = new WebService.Service1SoapClient();
 string profile = System.Convert.ToString(((ListBoxItem)listBox1.SelectedItem).Content);
 client.pidReturnCompleted += new EventHandler<pidReturnCompletedEventArgs>(client_pidReturnCompleted);
 client.pidReturnAsync(USERID, profile);
 }
 Else
 {

 KeyWords keywords = new KeyWords();

 keywords.textBox3.Text = PID;
 keywords.Show(); 
```

其中PID-

```
void client_pidReturnCompleted(object sender, pidReturnCompletedEventArgs e)
    {
        PID = e.Result;
    } 
```

然后我需要在`Initialise Component`“关键字”子窗口的部分中使用此 PID，但是当窗口加载时，它没有及时获取 textBox.Text（PID 值），并说它为空。如何在 Initialise Component 阶段使用 PID？所以在关键字窗口中 -

```
public KeyWords()
    {
        InitializeComponent();

        this.Loaded += new RoutedEventHandler(KeyWords_Loaded);

        WebService.Service1SoapClient client = new WebService.Service1SoapClient();
        client.userKeywordsCompleted += new EventHandler<userKeywordsCompletedEventArgs>(client_userKeywordsCompleted);
        client.userKeywordsAsync(PID);

    } 
```

在哪里-`Public Int PID = textBox3.Text //this is where the value from the previous window is passed in.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:07:00.010

我通过创建一个Keywords_Loaded void 对其进行排序。然后我就可以使用从以前的表单传入的值。

# linux - 如何在 Linux 上的 Bash 中一次删除多个文件？

> ID：10516384
> 
> 赞同：117
> 
> 时间：2012-05-09T12:44:32.740
> 
> 标签：linux, bash, rm

我在 Linux 服务器上有这个文件列表：

```
abc.log.2012-03-14
abc.log.2012-03-27
abc.log.2012-03-28
abc.log.2012-03-29
abc.log.2012-03-30
abc.log.2012-04-02
abc.log.2012-04-04
abc.log.2012-04-05
abc.log.2012-04-09
abc.log.2012-04-10 
```

我一直在删除选定的日志文件，使用如下命令`rm -rf`：

```
rm -rf abc.log.2012-03-14
rm -rf abc.log.2012-03-27
rm -rf abc.log.2012-03-28 
```

还有另一种方法，以便我可以立即删除选定的文件吗？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-05-09T12:46:57.710

Bash 支持各种通配符和扩展。

您的确切情况将由[大括号扩展](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)处理，如下所示：

```
$ rm -rf abc.log.2012-03-{14,27,28} 
```

以上将*扩展为*具有所有三个参数的单个命令，并且等效于键入：

```
$ rm -rf abc.log.2012-03-14 abc.log.2012-03-27 abc.log.2012-03-28 
```

重要的是要注意这个扩展是由 shell 完成的，`rm`甚至在加载之前。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-05-09T12:46:30.197

使用通配符 ( `*`) 匹配多个文件。

例如，下面的命令将删除所有名称以 . 开头的文件`abc.log.2012-03-`。

```
rm -f abc.log.2012-03-* 
```

我建议运行以列出文件，以便在运行命令`ls abc.log.2012-03-*`之前查看要删除的内容。`rm`

[有关更多详细信息，请参阅文件名扩展](http://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)的 Bash 手册页。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-09-04T15:56:16.743

如果要删除名称与特定形式匹配的所有文件，通配符（glob 模式）是最直接的解决方案。一些例子：

```
$ rm -f abc.log.*             # Remove them all
$ rm -f abc.log.2012*         # Remove all logs from 2012
$ rm -f abc.log.2012-0[123]*  # Remove all files from the first quarter of 2012 
```

正则表达式比通配符更强大；您可以将输出提供`grep`给`rm -f`. 例如，如果某些文件名以 开头，`"abc.log"`而另一些以开头`"ABC.log"`，则`grep`可以进行不区分大小写的匹配：

```
$ rm -f $(ls | grep -i '^abc\.log\.') 
```

如果任何文件名包含有趣的字符（包括空格），这将导致问题。当心。

当我这样做时，我`ls | grep ...`首先运行命令并检查它是否产生了我想要的输出 -*特别是*如果我正在使用`rm -f`：

```
$ ls | grep -i '^abc\.log\.'
(check that the list is correct)
$ rm -f $(!!) 
```

where`!!`扩展为上一个命令。或者我可以键入向上箭头或 Ctrl-P 并编辑上一行以添加`rm -f`命令。

这假设您使用的是 bash shell。其他一些 shell，特别是 csh 和 tcsh 以及一些旧的 sh 派生的 shell，可能不支持该`$(...)`语法。您可以使用等效的反引号语法：

```
$ rm -f `ls | grep -i '^abc\.log\.'` 
```

语法更容易阅读，`$(...)`如果你真的有野心，它可以嵌套。

最后，如果您要删除的文件子集不能用正则表达式轻松表达，我经常使用的一个技巧是将文件列出到临时文本文件中，然后对其进行编辑：

```
$ ls > list
$ vi list   # Use your favorite text editor 
```

然后我可以`list`手动编辑文件，只留下我想删除的文件，然后：

```
$ rm -f $(<list) 
```

或者

```
$ rm -f `cat list` 
```

（同样，这假设所有文件名都不包含有趣的字符，尤其是空格。）

或者，在编辑`list`文件时，我可以添加`rm -f` 到每一行的开头，然后：

```
$ . ./list 
```

或者

```
$ source ./list 
```

编辑文件也是在必要时添加引号的机会，例如更改`rm -f foo bar`为`rm -f 'foo bar'`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-07-01T00:26:57.103

只需在 sublime 中使用多行选择将所有文件组合成一行，并在每个文件名之间添加一个空格，然后`rm`在列表的开头添加。当您要删除的文件名中没有模式时，这非常有用。

```
[$]> rm abc.log.2012-03-14 abc.log.2012-03-27 abc.log.2012-03-28 abc.log.2012-03-29 abc.log.2012-03-30 abc.log.2012-04-02 abc.log.2012-04-04 abc.log.2012-04-05 abc.log.2012-04-09 abc.log.2012-04-10 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-09T19:09:28.917

通配符可以很好地解决这个问题，但为了安全起见，最好尽可能少地使用通配符，所以大致如下：

```
rm -rf abc.log.2012-* 
```

虽然从外观上看，这些只是单个文件吗？如果这些项目都不是目录，则不需要递归选项，因此最好不要使用它，只是为了安全。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-09T12:49:05.347

我不是 linux 专家，但我相信您想将输出文件列表通过管道传输到`xargs rm -rf`. 我过去使用过类似的东西，效果很好。首先在示例目录上进行测试！

编辑 - 根据出现的其他答案，我可能误解了。如果您可以使用通配符，那就太好了。我假设您显示的原始列表是由一个程序生成的，以便为您提供“选择”，所以我认为管道`xargs`是要走的路。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-18T11:44:23.537

如果要一次删除属于某个目录的所有文件。例如：您的目录名为“log”，“log”目录包括 abc.log.2012-03-14、abc.log.2012-03-15、...等文件。您必须位于日志目录之上，并且：

```
rm -rf /log/* 
```

# vb.net - 最简洁的 String.Replace 来屏蔽密码

> ID：10516398
> 
> 赞同：1
> 
> 时间：2012-05-09T12:45:16.593
> 
> 标签：vb.net, string

假设我有以下字符串：

```
"/encryption:aes128 /password:<PASSWORDHERE> /log:log.txt" 
```

我需要将其写入日志文件，但需要屏蔽密码（例如替换为星号）。

我可以用几行代码轻松地做到这一点`String.IndexOf`，`String.Replace`但我很想看看其他人如何实现这一点，以便代码尽可能短和简洁。单行替换功能将是最好的。

我的目标是了解/学习一些组合字符串函数的新技术。

**请注意，我对使用 RegEx 不感兴趣。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:12:13.043

我不会向您展示单线，因为正如 Andrew 已经指出的那样，这将是不可理解的。

您坚持使用非正则表达式方法：

```
Dim input As String = "/encryption:aes128 /password:htzrj584372 /log:log.txt"
Dim pwdStart As Integer = input.IndexOf("password:")
If pwdStart <> -1 Then
    Dim pwdEnd As Integer = input.IndexOf(" /log:", pwdStart)
    If pwdEnd <> -1 Then
        pwdStart += "password:".Length
        Dim pwdLength = pwdEnd - pwdStart
        Dim pwd = input.Substring(pwdStart, pwdLength)
        Dim logText = input.Replace("password:" & pwd, "password:*****")
    End If
End If 
```

请注意，如果密码本身包含`/log:`. 只有之前的部分会被屏蔽，因为我不知道密码的实际长度。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-09T19:01:21.533

与 Andrew Barber 的想法相反，这很好用，并且假设具有阅读代码的基本能力是完全可以理解的。你可能想打开一个教科书安迪男孩。

假设：

```
strArgs = "/encryption:aes128 /password:<PASSWORDHERE> /log:log.txt" 
```

然后：

```
strArgs = strArgs.Replace(strArgs.Substring(strArgs.IndexOf("/password:") + 10, strArgs.IndexOf(" /log:log.txt") - strArgs.IndexOf("/password:") - 10), "********") 
```

# android - Facebook API 登录失败，手机上安装了 FB 应用程序

> ID：10516401
> 
> 赞同：10
> 
> 时间：2012-05-09T12:45:18.403
> 
> 标签：android, facebook, facebook-login

我正在构建一个应用程序，它将支持 facebook。我已经从原始 Git 存储库下载了 facebook API 及其名为“Hackbook”的示例。问题在于登录 - 如果手机上未安装原始 FB 应用程序，则登录将通过自定义对话框进行，一切正常，但如果安装了 FB 应用程序，Hackbook 会自动重定向到原始 FB 应用程序，然后什么也没有发生。登录是不可能的。我已经在五款不同的手机上测试过这个，总是同样的问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T12:57:35.050

我有一个类似的问题。就我而言，我没有使用我的签名密钥创建哈希密钥。我刚刚使用**debug.keystore**默认签名密钥创建了一个哈希密钥。

一旦我使用我的应用程序发布签名密钥创建了一个哈希密钥，这个问题就得到了解决。如果您还没有这样做，请使用您的签名密钥（用于在市场上上传）创建一个新的哈希密钥，并将其添加到您应用的 Facebook 控制面板。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T15:44:22.440

我辛苦了两天终于得到了解决方案，这是获取哈希键的错误方法**-**

```
keytool -exportcert -alias *<your _alias_name>* -keystore *<key_store_path>* | [openssl_bin_directory]\openssl sha1 -binary | [openssl_bin_directory]\openssl base64 
```

**正确**的方法是在 cmd 中键入这 3 行，一次一行。在第一行之后，系统会要求您插入密钥库密码。

```
keytool -exportcert -alias *<your _alias_name>* -keystore *<key_store_path>* > [openssl_bin_directory]\debug.txt
[openssl_bin_directory]\openssl sha1 -binary [openssl_bin_directory]\debug.txt > [openssl_bin_directory]\debug_sha.txt
[openssl_bin_directory]\openssl base64 -in [openssl_bin_directory]\debug_sha.txt > [openssl_bin_directory]\debug_base64.txt 
```

如果您想了解详细信息，此处描述了**正确**的方法-

[http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash](http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash)

或在这里

[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T10:41:14.053

使用此功能为您获取哈希键（调试和发布 apk）并将其放入您的应用程序 developer.facebook.com/apps

```
private void calculateHashKey(String yourPackageName) {
    try {
        PackageInfo info = getPackageManager().getPackageInfo(
                yourPackageName,
                PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:",
                    Base64.encodeToString(md.digest(), Base64.DEFAULT));
        }
    } catch (NameNotFoundException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
} 
```

这对我有很大帮助..希望这对你也有帮助..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T12:55:56.263

我已经解决了这个问题。通过使用获取密钥哈希后， `keytool -exportcert -alias <RELEASE_KEY_ALIAS> -keystore <RELEASE_KEY_PATH> | openssl sha1 -binary | openssl base64` 我第一次以发布模式成功登录...然后第二次出现常见错误您的密钥`"*********real*key************"`与应用程序设置中指定的允许密钥不匹配。

只需使用`"*********real*key************"`Facebook 在发布模式下成功登录的错误消息。因此，请确保在输入此密钥时使用完全相同的密钥。我的字母`small(L) i.e (l)`会让你陷入困境。我制作了两个键，在我使用的第一个键和我使用`small(L) i.e (l)`的第二个键中。并将这些键放在开发人员应用程序中。
它现在正在工作....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-22T10:27:23.870

在我的情况下，问题是即使在生成正确的密钥之后，当设备上安装 facebook 应用程序时，用户登录也会被取消。

我在登录前添加了以下行，效果很好。

```
LoginManager.getInstance().logOut(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T11:59:49.050

在我的情况下，问题是即使在 Xamarin Android 中生成正确的密钥后，当设备上安装 facebook 应用程序时，用户登录也会被取消。

我在登录前添加了以下行，效果很好。

LoginManager.Instance.SetLoginBehavior(LoginBehavior.NativeOnly);

# asp.net - 如何在 dnn 中获取 UserController.CreateUser(userinfo) 程序？

> ID：10516403
> 
> 赞同：0
> 
> 时间：2012-05-09T12:45:21.087
> 
> 标签：asp.net, dotnetnuke, dotnetnuke-module

我有 2 个 DNN 站点。我需要在注册用户时同步用户表。IE。如果用户在站点 1 注册，该用户将在站点 2 中可用。所以我需要使用后面的查询

> 用户控制器。创建用户（用户信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:15:46.627

您必须在`UserProtal`表中创建条目，例如，您有两个 id 为 0 和 1 的门户。如果用户注册到门户 0，`UserController.CreateUser`将在`UserPortal`表中创建具有门户 0 和新用户 ID 的条目。创建用户后，您必须在同一个表中为门户 1 和新用户 ID 创建相同类型的条目。

如果您对此有任何其他问题，请告诉我

# java - 如何在 Java ME 中获取设备 IMEI？

> ID：10516405
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:45:29.450
> 
> 标签：java, mobile, java-me

我在 J2me 中获取设备 IMEI 时遇到问题，我已经尝试了这些帖子中的所有字符串，并且区分大小写但我总是得到 null

[获取设备 IMEI](https://stackoverflow.com/questions/680782/getting-device-imei)

[http://qa.java-samples.com/questions/742/how-to-get-the-imei-number-of-the-mobile](http://qa.java-samples.com/questions/742/how-to-get-the-imei-number-of-the-mobile)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:22:18.610

使用类似的东西：

```
Nokia
System.getProperty("phone.imei");
System.getProperty("com.nokia.imei");
System.getProperty("com.nokia.mid.imei"); //especially for S40  devices 
```

注意：需要签名的 MIDlet。S60 第三版设备不需要签名即可获取此信息。在 40 系列手机上，这需要您的 MIDlet 已签名到运营商或制造商域，这仅适用于 40 系列第三版、FP1 设备和更新版本。

```
Sony Ericsson
System.getProperty("com.sonyericsson.imei");

Samsung
System.getProperty("com.samsung.imei");

Motorola
System.getProperty("IMEI");

System.getProperty("com.motorola.IMEI");

Siemens
System.getProperty("com.siemens.IMEI");

LG
System.getProperty("com.lge.imei"); 
```

# javascript - 带有未转义字符的 Javascript JSON 返回错误

> ID：10516412
> 
> 赞同：0
> 
> 时间：2012-05-09T12:45:38.950
> 
> 标签：javascript, json

您好，感谢您抽出宝贵的时间来查看此内容。

我遇到的问题是来自第三方服务的 JSON 返回，因此我无法控制 JSON 的格式。我正在使用以下内容（精简到重要部分）

```
function JSONgrabber(Zip,iplocation)
        {
            var requestBase ="http://www.someCompany.com/api/request";
            var requestData ="iplocate=true&output=json&callback=useJSON";

            var request=requestBase+"&&zip="+Zip+"&"+requestData;
            if(iplocation ==false || iplocation=="false")
            {
                request=request.replace("iplocate=true","iplocate=false");

            }
            if (document.getElementById("JSONDataMaster"))
            {
                var element = document.getElementById("JSONDataMaster");
                element.parentNode.removeChild(element);
            }
            try{
            var head = document.getElementsByTagName("head").item(0);
            var script = document.createElement("script");
            script.setAttribute("type", "text/javascript");
            script.setAttribute("src", request);
            script.setAttribute("id", "JSONDataMaster");
            head.appendChild(script);
            }
            catch(err){console.log("Problem loading JSON Data");}
            }
        function useJSON(JSONDATA){} 
```

这在 99% 的时间里都像预期的那样有效，但有时回报类似于

Joe's Diner 和 ' 导致 Uncaught SyntaxError: Unexpected identifier，这发生在返回期间，因此我无法通过替换等使用它来修复它，因为它永远不会到达回调函数。

非常感谢任何见解。我没有使用任何外部库（jquery 等），所以请任何帮助都必须是纯 JS（也许是 php）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:52:35.063

您需要检查要获取的字符串是否包含特殊字符，如果是，则需要转义它们

这是一个很好的页面，可以帮助理解：

[网络艺术](http://www.the-art-of-web.com/javascript/escape/)

这个问题类似：

[堆栈](https://stackoverflow.com/questions/7283314/special-char-in-json)

如果您检查每个字符串的单引号并将其替换为转义的单引号：

```
mystring.replace("'","\\'"); 
```

# c# - 以编程方式给出元素名称

> ID：10516415
> 
> 赞同：0
> 
> 时间：2012-05-09T12:45:44.877
> 
> 标签：c#, windows-phone-7

我正在尝试为每个元素添加一个从循环中获得的唯一名称。我怎样才能实现它？第 2 行是错误所在。

```
foreach (var station in stations) {
 TextBlock station.name = new TextBlock(); // error !!!                        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:47:53.460

试试这个...

```
TextBlock station = new TextBlock() { Name="Something" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:01:34.430

也许我误解了你想要做什么......你是否试图为集合的每个成员创建控件？如果您正在这样做，请尝试查看 ListBox，或更通用的 ItemsPresenter 控件，以及该元素的 ItemTemplate 属性。

例如，将 ListBox 添加到 XAML，并将工作站分配为 ItemsSource，然后添加 DataTemplate 来表示项目。

```
<ListBox ItemsSource="{Binding stations}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding name}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:48:33.257

您试图在 textblock 实例站的 name 属性上创建一个新的 textblock 实例。

那肯定行不通。

尝试：

`TextBlock station = new TextBlock(); station.name = "Whatever name you want";`

# drupal - 在 Drupal 中绕过节点删除确认表单

> ID：10516417
> 
> 赞同：1
> 
> 时间：2012-05-09T12:45:50.073
> 
> 标签：drupal

寻找允许用户在无需使用确认表单的情况下删除站点上的节点的最佳方式。我尝试使用 form_alter 将人们引导到自定义提交功能，但没有成功。

有人试过这个吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T16:22:57.103

假设 drupal 7，node/%/delete 菜单条目直接连接到 node_delete_confirm 表单。您可以使用 hook_menu_alter 对其进行修改，并将函数从 drupal_get_form 更改为您自己设计的页面回调，该回调只会删除节点。

例子：

在您的模块文件中，您需要：

```
function mymodule_menu_alter(&$items) {
  $items['node/%node/delete']['page callback'] = 'my_node_delete_function';
  $items['node/%node/delete']['page arguments'] = array(1);
  $items['node/%node/delete']['module'] = 'mymodule';
  $items['node/%node/delete']['file'] = 'mymodule.pages.inc';
} 
```

在您的 mymodule.pages.inc 文件中，您需要：

```
function my_node_delete_function($node) {
  // Taken from node modules node_delete_confirm submit handler
  node_delete($node->nid);
  watchdog('content', '@type: deleted %title.', array('@type' => $node->type, '%title' => $node->title));
  drupal_set_message(t('@type %title has been deleted.', array('@type' => node_type_get_name($node), '%title' => $node->title)));

  // Do a drupal goto here to preserver the 'destination' parameter
  drupal_goto();
} 
```

# html - CSS - 防止弹出窗口隐藏在页面上的其他元素后面

> ID：10516418
> 
> 赞同：3
> 
> 时间：2012-05-09T12:45:50.307
> 
> 标签：html, css, popup, hidden

A 有一个弹出 div。但是在弹出窗口时，它会隐藏在页面上的其他元素后面。如何确保弹出 div 始终位于页面上其他元素的顶部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:47:22.257

确保 css`z-index`高于其他 css。

（注意：z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T08:23:06.210

为了让你的弹出窗口出现在另一个元素上，你应该确保前面元素的 z-index 属性必须大于应该在后面的那个

```
//this id element will get at front
#front {
    z-index:2;
}
//this id element will be behind #front element
#back {
    z-index:1;
} 
```

# postgresql - Postgres 触发函数

> ID：10516421
> 
> 赞同：10
> 
> 时间：2012-05-09T12:45:58.497
> 
> 标签：postgresql, triggers

我需要 Postgres 触发器方面的帮助。

我有两列的表：

```
sold boolean;
id_shop int; 
```

它存储是否出售物品，或者它位于哪个商店。

我需要一个触发器，如果​​我将“已售”更改为真，那么它也会更改`id_shop`为`NULL`（如果已售出，则不能在商店...）

我尝试了不同的方法，但它不起作用或在更新 cmd 时出错...

```
create or replace function pardota_masina_veikals() RETURNS trigger AS $pardota_masina$
begin
  IF NEW.sold=true THEN
    update masinas
      SET id_shop=null WHERE id=NEW.id;
  END IF;
  RETURN NEW;
END;
$pardota_masina$ LANGUAGE plpgsql;

CREATE TRIGGER pardota_masina_nevar_but_veikala 
    AFTER INSERT OR UPDATE ON masinas FOR EACH ROW EXECUTE PROCEDURE pardota_masina_veikals(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T12:50:12.500

首先，如果要更改正在更新（或插入）的行的值，则需要一个**before触发器**

其次，您不需要“更新”表，只需将新值分配给 NEW 行：

```
create or replace function pardota_masina_veikals() 
RETURNS trigger 
AS 
$pardota_masina$
begin
  IF NEW.sold=true THEN
    NEW.id_shop = NULL;
 END IF;
RETURN NEW;
END;
$pardota_masina$ 
LANGUAGE plpgsql;

CREATE TRIGGER pardota_masina_nevar_but_veikala 
   BEFORE INSERT OR UPDATE ON masinas 
   FOR EACH ROW EXECUTE PROCEDURE pardota_masina_veikals(); 
```

# sencha-touch - 为 Sencha 项目重用 ExtJs 代码。实际体验？

> ID：10516429
> 
> 赞同：4
> 
> 时间：2012-05-09T12:46:24.107
> 
> 标签：sencha-touch, extjs, code-reuse, extjs-mvc

我们目前正在开发使用 ExtJs 4.0 作为前端框架的大型项目。后端是实体框架+ SQL Server，但这对这个问题并不重要（我希望如此）。

我正在寻找使用 Sencha Touch 添加我们应用程序的移动版本。我已经阅读了几篇文章，指出可以重用 40-50% 的代码。有没有人有这样做**的实际经验？**

如果我使用 ExtJs MVC 架构，我会只重用`models`/`stores`类吗？或者有什么方法可以重用例如内部的一些业务逻辑`controllers`？

实际上项目组织和文件夹结构是什么？我是否需要保留两棵不同的树，或者所有东西都可以组合在一个屋檐下，并且只有在构建不同的项目时我才会得到不同的`app-all.js`文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:52:37.583

这里有一些注释：

在你的项目中结合 Sencha Touch 和 ExtJS [http://lanyrd.com/2012/sourcedevcon/srryz/](http://lanyrd.com/2012/sourcedevcon/srryz/)

视频无疑即将推出，senchaworld.com 是视频的地方。

# javascript - 引用变量，它执行函数，但是将字符串添加到变量中，将函数返回为字符串而不是值

> ID：10516432
> 
> 赞同：0
> 
> 时间：2012-05-09T12:46:26.953
> 
> 标签：javascript, string, function

该程序应该是使用 php 和 javascript 进行的实时搜索...当您键入它时，它会在下面搜索。我最近才开始学习javascript，如果我的知识有限，请见谅......

```
$(document).ready(function () {
    $('#results').append('<p>Started</p>');
    var getText = (function () {
        return document.getElementById('year').value;
    });
    var text = getText;
    var getText1 = (function () {
        return document.getElementById('class').value;
    });
    var text1 = getText1;
    setInterval(function () {
        var newText = getText;
        var newText1 = getText1;
        var loading = "search.php?year=" + newText + "&class=" + newText1;
        $('#results').append(newText1);
        if (text !== newText || text1 !== newText1) {
            $('#results').load(loading);
            $('#results').append('somethinghappened');
        };
        text = newText;
        text1 = newText1;
    }, 100);
}); 
```

所以当我附加newText1时它工作正常，但是如果我尝试附加“加载”它会返回：

> search.php?year=function () { return document.getElementById("year").value; }&class=function () { return document.getElementById("class").value; }

谁能解释这两种情况之间的区别是什么以及为什么会出现区别？以及如何修复它以使其加载正确的 URL

我搜索并发现：[JavaScript：将匿名函数分配给变量时，未传递函数返回值，而是将函数作为字符串传递，](https://stackoverflow.com/questions/2301851/javascript-when-assigning-an-anonymous-function-to-a-variable-function-return)但并不完全理解传递两个参数的含义，当我尝试这样做时类似的东西，它没有按预期工作......

任何帮助表示赞赏并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:50:11.507

简单地尝试

```
var getText = document.getElementById('year').value;
var getText1 = document.getElementById('class').value; 
```

否则您将只有对该函数的引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:50:27.093

你不是在调用函数，你只是在引用它们。

要调用它们，您需要括号，例如`getText()`. 但是为什么在这种情况下让它们起作用呢？它们很短并且不带参数。如果您需要函数，请创建一个接受字符串 ID 的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:02:50.810

```
var newText = getText;
var newText1 = getText1; 
```

您正在分配函数`getText`和`getText1`变量，而不是执行它们并分配它们的返回值。试试这个：

```
var newText = getText();
var newText1 = getText1(); 
```

要不就：

```
var newText = document.getElementById('year').value;
var newText1 = document.getElementById('class').value; 
```

# java - 我可以使用正则表达式匹配特定字符的每三次出现吗？

> ID：10516435
> 
> 赞同：5
> 
> 时间：2012-05-09T12:46:38.787
> 
> 标签：java, regex, split

我有一个包含一些分隔值的字符串：

```
1.95;1.99;1.78;10.9;11.45;10.5;25.95;26;45;21.2 
```

我想要实现的是每出现三次分号就分开一次，所以我的结果`String[]`应该包含这个：

```
result[0] = "1.95;1.99;1.78";
result[1] = "10.9;11.45;10.5";
result[2] = "25.95;26;45";
result[3] = "21.2"; 
```

到目前为止，我已经尝试了几种正则表达式解决方案，但我所能做的就是找到分号之间的任何模式。例如：

```
(?<=^|;)[^;]*;?[^;]*;?[^;]* 
```

哪个符合我想要的值，因此无法使用`split()`或者我错过了什么？

不幸的是，我只能提供使用的模式，并且不可能通过上述模式的结果添加一些循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:31:17.033

```
String re = "(?<=\\G[^;]*;[^;]*;[^;]*);";
String text = "1.95;1.99;1.78;10.9;11.45;10.5;25.95;26;45;21.2";
String[] result = Pattern.compile(re).split(text); 
```

现在结果就是你想要的
提示：java 正则表达式中的 \G 是一个边界匹配器`^`，如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:17:36.937

您可以尝试这样的事情：

```
String s = "1.95;1.99;1.78;10.9;11.45;10.5;25.95;26;45;21.2";
Pattern p = Pattern.compile(".*?;.*?;.*?;");
Matcher m = p.matcher(s);
int lastEnd = -1;
while(m.find()){
    System.out.println(m.group());
    lastEnd = m.end();
}
System.out.println(s.substring(lastEnd)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:50:17.007

你是对的。由于 Java 不支持不定长度的后向断言（如果要检查当前分号之前是否有 3、6、9 或 3*n 值，则需要该断言），因此不能`split()`用于此。您的正则表达式与“查找所有”方法完美配合，但如果您不能在您的情况下应用它，那么您就不走运了。

在其他语言（例如基于 .NET 的语言）中，以下正则表达式可以工作：

```
;(?<=^(?:[^;]*;[^;]*;[^;]*;)*) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:48:42.153

会像：

```
 ([0-9.]*;){3} 
```

不能满足您的需求？需要注意的是会有一个尾随 ; 在小组的最后。但是，您也许可以调整表达式以将其修剪掉。

我刚刚重读了您的问题，虽然这个简单的表达式适用于匹配组，但如果您需要将它提供给该`split()`方法，不幸的是它不会完成这项工作。

# python - 绘图问题

> ID：10516437
> 
> 赞同：-2
> 
> 时间：2012-05-09T12:46:40.993
> 
> 标签：python, graph, plot, matplotlib

我的代码目前如下所示：

```
a = 3
b = 4
c = 0
d = 1
e = 7
f = 6
g = 5

y = (0,1,2,3,4,5,6)
x = (a,b,c,d,e,f,g)
bar(y, x, linewidth = 3)
show() 
```

但我不断收到错误消息：

```
ValueError: setting an array element with a sequence. 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:51:39.320

我的水晶球暗示你正在尝试使用`matplotlib`。在这种情况下，将您的`x`and `y`from更改`tuples`为`lists`：

```
y = [0,1,2,3,4,5,6]
x = [a,b,c,d,e,f,g] 
```

# c# - 在 Windows XP 中使用 SetWindowsHookEx 时出错，但在 Windows 7 中没有

> ID：10516448
> 
> 赞同：5
> 
> 时间：2012-05-09T12:47:02.320
> 
> 标签：c#, winapi, hook, keyboard-hook, setwindowshookex

我开发了一个使用全局键盘/鼠标钩子的应用程序。它在 Windows 7 中完美运行，但在 Windows XP 中不适用。

当我在 Windows XP 中调用 SetWindowsHookEx 时，我收到错误代码 1428

```
int MouseLowLevel   = 14
int code = SetWindowsHookEx(MouseLowLevel,
                 MouseHookProc,
                 IntPtr.Zero,
                 0);

private IntPtr MouseHookProc(int nCode, IntPtr wParam, IntPtr lParam) {} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T12:56:03.047

很好奇这段代码在 Win7 上不会失败，但我当然从未尝试过。但这是正确的行为，看起来他们改进了它。SetWindowsHookEx() 的参数验证需要有效的非零第三或第四参数。错误代码具有高度描述性，来自 WinError.h：

```
//
// MessageId: ERROR_HOOK_NEEDS_HMOD
//
// MessageText:
//
// Cannot set nonlocal hook without a module handle.
//
#define ERROR_HOOK_NEEDS_HMOD            1428L 
```

任何模块句柄都可以，因为它实际上并不用于低级挂钩，不需要注入 DLL 来使它们工作。.NET 4 需要谨慎选择一个，因为它的 CLR 不再为纯托管程序集伪造模块句柄。一个很好的使用方法是你从 pinvoking LoadLibrary("user32.dll") 中得到的那个，因为它总是已经加载了。您不必调用 FreeLibrary()。

你需要这个声明来调用 LoadLibrary：

```
[DllImport("kernel32", SetLastError=true, CharSet = CharSet.Auto)]
private static extern IntPtr LoadLibrary(string fileName); 
```

# c# - 在没有内存泄漏的情况下遍历 specialCells 范围？

> ID：10516451
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:47:14.847
> 
> 标签：c#, excel-interop

我有这样的情况：

```
Range formulaCells = range.SpecialCells(XlCellType.xlCellTypeFormulas); 
```

我想遍历所有这些。但问题是，当我使用 foreach 循环执行此操作时，由于特定单元格的范围对象未释放，因此发生内存泄漏。我正在尝试通过像这样的常规 for 循环来做到这一点：

```
for(int i = 1; i <= formulaCells.Count; i++)
{
  Range cell = null;
  try
  {
    cell = formulaCells.get_Item(i);
    // do some work
  }
  catch(Exception e) {throw e;}
  finally
  {
    If(cell != null)
    {
      Marshal.ReleaseCOMObject(cell);
      cell = null;
    }
  }
} 
```

但是 get_Item() 将行索引作为参数，因此它将通过没有公式的单元格。我无法迭代它。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:09:36.467

不要将 foreach 与 COM 集合一起使用；在内部，它创建一个 COM 对象。请改用 for 循环。

弗拉基米尔，*formulaCells*包含多个区域（Range.Areas），每个区域都是一个Excel.Range类型的矩形。所以你需要走遍所有区域，穿过每个区域的每个单元格。

# javascript - 同一行上的正则表达式多个匹配项

> ID：10516458
> 
> 赞同：12
> 
> 时间：2012-05-09T12:47:39.253
> 
> 标签：javascript, regex

我有以下 JavaScript 正则表达式

在[http://regexpal.com/中使用](http://regexpal.com/)

`\[.*(\.jpg|\.png|\.gif|\.bmp|\.jpeg).*\]`

在 jQuery 代码中使用 -

`post.html().match(/\[.*(\.jpg|\.png|\.gif|\.bmp|\.jpeg).*\]/g);`

这是我正在使用的示例数据

> 1.  [cid:image001.jpg@01CD2DC8.704399C0]
> 2.  s[cid:image001.png@01CD2DC8.704399C0]<
> 3.  图像.jpg
> 4.  [cid:image002.jpg@01CD2DC8.704399C0]
> 5.  [cid:image002.exe@01CD2DC8.704399C0]
> 6.  [cid:image002.gif@01CD2DC8.704399C0]
> 7.  [[cid:image001.jpg@01CD2DE6.9802A2D0]
>     再说一次
>     [cid:image002.png@01CD2DE6.9802A2D0]]
> 8.  测试.gif

我的问题是，在第 7 行，我希望 [] 中包含的两个字符串是分开的，目前它将整行视为匹配项，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T12:51:02.717

你需要修改你的正则表达式来改变贪心（注意`.*?`）：

```
\[.*?(\.jpg|\.png|\.gif|\.bmp|\.jpeg).*?\] 
```

# javascript - 请求带有自定义标头的文件

> ID：10516463
> 
> 赞同：17
> 
> 时间：2012-05-09T12:47:52.220
> 
> 标签：javascript, html, forms, http, header

我有一个不寻常的要求。本质上，我需要一种方法，以便当用户单击链接或按钮时，他们将收到 PDF。这里棘手的部分是服务器根本不会处理请求*，*除非随它一起发送自定义标头（否则它认为该人已注销并将其发送到登录屏幕）。

目前标题的工作方式无法更改，因此请不要纠缠于此；它将来会发生变化，并且是我无法控制的内部应用程序。

我探索过的选项：

*   使用 iframe 或简单地打开一个带有某种路径的新窗口，该路径将返回 PDF。这是行不通的，因为我无法为 PDF 指定所需的标题，并且会在到达 PDF 本身之前被重定向。
*   无法使用表单并提交请求，因为我无法向表单添加任何自定义标题（只有 XHR 和插件可以，AFAIK）。
*   使用 XHR 无法正常工作，因为虽然它可以添加标头并检索文件，但无法将其保存在客户端。

看来我此时唯一的选择基本上是：

*   使用某种插件（例如 Flash 或 Silverlight）来请求文件。
*   比预期更早地强制要求更改，以便不再需要标头。

我在这里有什么遗漏吗？我希望有人可以验证我的发现或指出我错过的东西，因为据我所知，我在这里真的无能为力。

编辑：这似乎很恰当，并证实了我的想法：[XMLHttpRequest to open PDF in browser](https://stackoverflow.com/questions/4750461/xmlhttprequest-to-open-pdf-in-browser)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T14:30:17.057

经测试可在 chrome 中工作：

```
function toBinaryString(data) {
    var ret = [];
    var len = data.length;
    var byte;
    for (var i = 0; i < len; i++) { 
        byte=( data.charCodeAt(i) & 0xFF )>>> 0;
        ret.push( String.fromCharCode(byte) );
    }

    return ret.join('');
}

var xhr = new XMLHttpRequest;

xhr.open( "GET", "/test.pdf" ); //I had test.pdf this on my local server

xhr.addEventListener( "load", function(){
    var data = toBinaryString(this.responseText);
    data = "data:application/pdf;base64,"+btoa(data);
    document.location = data;
}, false);

xhr.setRequestHeader("magic", "header" );
xhr.overrideMimeType( "application/octet-stream; charset=x-user-defined;" );
xhr.send(null); 
```

您可以将 application/pdf 更改为 application/octet-stream 以获得下载提示。但也很容易从 chrome 的阅读器下载。

在 Firefox 中没有任何反应，我想这是因为我没有安装插件来处理`application/pdf`。更改为 application/octet-stream 将提示 dl。

使用 IE，我想你需要某种 VBScript/ActiveX 黑客技术

如果文件很大，使用 data uri 可能会使浏览器崩溃，在这种情况下，您可以使用 BlobBuilder 和 Object URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:57:49.130

而不是链接到 .PDF 文件，而是执行类似的操作

```
<a href="pdf_server.php?file=pdffilename">Download my eBook</a> 
```

它输出自定义标题，打开 PDF（二进制安全）并将数据打印到用户的浏览器，然后他们可以选择保存 PDF，尽管他们的浏览器设置。pdf_server.php 应如下所示：

```
header("Content-Type: application/octet-stream");

$file = $_GET["file"] .".pdf";
header("Content-Disposition: attachment; filename=" . urlencode($file));   
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . filesize($file));
flush(); // this doesn't really matter.
$fp = fopen($file, "r");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp); 
```

**编辑：**从浏览器内部（客户端）向请求添加标头的唯一方法是使用[XmlHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest) setRequestHeader 方法。

```
xhr.setRequestHeader('custom-header', 'value'); 
```

# iphone - 二维码+扫描后执行相应操作

> ID：10516466
> 
> 赞同：0
> 
> 时间：2012-05-09T12:47:56.733
> 
> 标签：iphone, ios, qr-code

在我的应用程序中，我使用 zbar 库实现了 QR 码扫描器。现在我只扫描 QR 码并显示在 textview 上读取的代码，但我想检测代码类型（电话号码、电子邮件、Facebook 之类的页面、Skype 电话、等）并执行相应的操作。请建议我一些简单的方法来做同样的事情..提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:41:19.543

从 zBarSDK 你会得到一些前缀的输出，比如 TEL:+123456789,URL:www.google.com,SMSTO:+123456789,等等.....这里使用带有过滤前缀的 switch case 并给出如下条件

如果前缀是 TEL 则直接使用 UIApplication 调用

```
[[UIApplication sharedApplication] openURL: ouputnumber]; 
```

与 URL 和每个输出相同......

希望，这对你有帮助.. :)

# java - Java 正则表达式。按字母顺序排列，带有空格和撇号 (')

> ID：10516468
> 
> 赞同：1
> 
> 时间：2012-05-09T12:48:11.570
> 
> 标签：java, regex

在java中验证以下正则表达式的模式是什么？仅包含字母、空格和撇号 (') 的字符串

我知道字母是这个`("^[a-zA-Z]+$")` 对于空格是这个`("\\s)` 我不知道撇号是什么。

但最重要的是，我只想要一个表达式。不是3个人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:56:06.080

您可以使用需要匹配的字符创建自己的类，如下所示：

```
Pattern.compile("[a-zA-Z\\s']+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:54:26.367

没有一个类可以匹配如此具体的东西，但您可以从现有的类中构建自己的类

```
(\p{Alpha}|\s|')* 
```

以任意顺序匹配任意数量的字符、空格或撇号。

看看[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# c# - 如何在 C# 中识别和关闭打开的应用程序的实例

> ID：10516469
> 
> 赞同：1
> 
> 时间：2012-05-09T12:48:13.550
> 
> 标签：c#, winforms, acrobat

我只是使用 WebBrowser 控件在 WinForm 中加载 PDF 文件。我有一个 PDF 字节数组，当用户在我的应用程序中单击打印预览时，我曾经将它写在客户端机器的临时文件夹中。

在用户关闭表单时预览后，我需要删除文件。在删除之前，我需要关闭为预览打开的 Adob​​e Reader 实例。

我尝试使用获取进程列表

```
Process[] processes = Process.GetProcessesByName("AcroRd32"); 
```

我可以通过这种方式终止进程并从临时文件夹中删除文件。真正的问题来了。假设用户已经为自己的目的打开了一个 PDF 文件，然后通过找到正在运行的实例并关闭它们，我也会关闭他的阅读器。

> 有什么方法可以找到我的应用程序打开的 Adob​​e Reader 实例。我只需要检查 Adob​​e 阅读器。不是任何其他的。

**更新**

我已经手动打开了 adbobe 阅读器，它首先将文件名或 MainWindowTitle 作为 Magazine.pdf。然后我在我的应用程序中通过 webbrowser 控件打开了 adobe reader。但它的 MainWindowTitle 为 Empty。还应该有两个 adobe reader 实例，但在 taskmanager 中它显示四个实例，其中只有一个具有 MainWindowTitle 作为 Magazine.pdf 请参阅下图以供参考

![阅读器的四个过程](../Images/c351684c2db84e31e033f92bba9267c3.png)

![MainWindowTitle 的最后一个进程](../Images/556bacc9017656c9d4e1f86fa0d087ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:25:07.987

检查每个 Acrobat 进程的 MainWindowTitle - 您想要的将以临时文件的名称开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:35:40.323

如果要删除在 WebBrowser 控件中打开的 PDF 文件，则必须使用以下代码：

```
WebBrowser.Navigate(YourPdfPath)
...
WebBrowser.Navigate("about:blank")
Application.DoEvents()
Dim millisecondsTimeout = 5000
While True
  Try
    File.Delete(YourPdfPath)
    Exit While 
  Catch ex As IOException
    If millisecondsTimeout < 0 Then Exit Sub
    millisecondsTimeout -= 100
    Thread.Sleep(100)
  End Try
End While 
```

更新：

我找到了一个扩展方法来杀死一个进程的子进程：

```
 <Extension>
  Public Sub KillChildren(process As Process, Optional processNameToKill As String = "", Optional recursive As Boolean = False)
      Static ProcessIDStack As List(Of Integer) = New List(Of Integer)
      If ProcessIDStack.Contains(process.Id) Then
          Exit Sub
      Else
          ProcessIDStack.Add(process.Id)
      End If

      Dim searcher = New ManagementObjectSearcher("Select * From Win32_Process Where ParentProcessID=" & process.Id) 'MLHIDE
      Dim moc As ManagementObjectCollection = searcher.Get
      For Each mo As ManagementObject In moc
          Try
              Dim ChildProcess = process.GetProcessById(Convert.ToInt32(mo("ProcessID"))) 'MLHIDE
              If recursive Then
                  ChildProcess.KillChildren(processNameToKill, recursive)
              End If
              If (Not ChildProcess.HasExited) AndAlso (processNameToKill = String.Empty OrElse ChildProcess.ProcessName = processNameToKill) Then
                  ChildProcess.Kill()
                  ChildProcess.WaitForExit(1000)
              End If
          Catch ex As ArgumentException
              ' process already exited 
          Catch ex As InvalidOperationException
              ' process already exited 
          Catch ex As ComponentModel.Win32Exception
              ' process already exited 
          End Try
      Next

      ProcessIDStack.Remove(process.Id)
  End Sub

...
    WebBrowser.Navigate("about:blank")
    Process.GetCurrentProcess.KillChildren("AcroRd32", True)
    Application.DoEvents()
... 
```

我正在寻找一种更好的方法来检查文件是否未被使用，避免在循环中休眠（Andrew Barber 正确地说这不是一个好的代码......）但我没有找到其他任何东西，抱歉...... .

（感谢安德鲁·巴伯）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:51:58.187

您可以查看 Process 的 MainWindowHandle 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:16:14.647

我没有使用 WebBrowser 打开 PDF，但是当我使用`Process.MainWindowTitle()`. 对于上次打开的 Acrobat 实例，它似乎只返回一个不同于 "" 的值。

我用来查找 Acrobat 的所有进程的 C# 代码如下：

```
 Process[] myProcess = Process.GetProcessesByName("AcroRd32");
  for (int i = 0; i < procesoProg.Length; i++)
  {
    if (myProcess[i].MainWindowTitle.Contains("MyTitle"))
    {
      myProcess[i].CloseMainWindow();
      Thread.Sleep(300);
    }
  } 
```

我尝试使用`Process.Kill()`而不是`Process.MainWindow()`，但它会关闭所有 Acrobat 实例，而不仅仅是我想要的。

如果您只想关闭从应用程序打开的文档，您可以在启动 PDF 时存储该过程，并`CloseMainWindow()`在您想要关闭它时使用：

```
 private static Process myProcess = null;

    public void OpenPDF()
    {
        myProcess = new Process();
        myProcess.StartInfo.FileName = "AcroRd32.exe";
        myProcess.StartInfo.Arguments = " /n /A \"pagemode=bookmarks&nameddest=" + strND + "\" \"" + strPath + "\"";
        myProcess.Start();
    }

    public void ClosePDF()
    {
        // If there is 
        if (myProcess!= null)
        {
            myProcess.CloseMainWindow();
            Thread.Sleep(500);
        }
    } 
```

我希望这段代码可以帮助你。

# java - File.createNewFile() 随机失败

> ID：10516472
> 
> 赞同：1
> 
> 时间：2012-05-09T12:48:21.460
> 
> 标签：java, winapi, createfile

我已经构建了一个简单的测试，它在无限循环中创建和删除一个文件（名称不会改变）。测试确实运行了几秒钟（有时超过 77,000 次迭代！）然后失败并出现以下异常：

```
Exception in thread "main" java.io.IOException: Access is denied
        at java.io.WinNTFileSystem.createFileExclusively(Native Method)
        at java.io.File.createNewFile(Unknown Source)
        at DeleteTest.main(DeleteTest.java:11) 
```

测试逻辑如下：

```
final File f = new File(pathname);
while (true) {
    final boolean create = f.createNewFile();
    if (!create) {
        System.out.println("crate failed");
    } else {
        final boolean delete = f.delete();
        if (!delete) {
            System.out.println("delete failed");
        }
    }
} 
```

这怎么可能？删除调用不会失败。它会告诉你的。所以删除总是成功但`createNewFile`失败。这是[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363915%28v=vs.85%29.aspx)关于 win32 api 功能的说法`DeleteFile`：

> DeleteFile 函数将文件标记为在关闭时删除。因此，在文件的最后一个句柄关闭之前，不会发生文件删除。随后调用 CreateFile 以打开文件失败并显示 ERROR_ACCESS_DENIED。

所以`createNewFile`不关闭文件？openjdk 源码告诉我们文件*已*关闭：

```
JNIEXPORT jboolean JNICALL
Java_java_io_Win32FileSystem_createFileExclusively(JNIEnv *env, jclass cls,
                                                   jstring pathname)
{
    jboolean rv = JNI_FALSE;
    DWORD a;

    WITH_PLATFORM_STRING(env, pathname, path) {
        int orv;
        int error;
        JVM_NativePath((char *)path);
        orv = JVM_Open(path, JVM_O_RDWR | JVM_O_CREAT | JVM_O_EXCL, 0666);
        if (orv < 0) {
            if (orv != JVM_EEXIST) {
                error = GetLastError();

                // If a directory by the named path already exists,
                // return false (behavior of solaris and linux) instead of
                // throwing an exception
                a = GetFileAttributes(path);

                if ((a == INVALID_FILE_ATTRIBUTES) ||
                        !(a & FILE_ATTRIBUTE_DIRECTORY)) {
                    SetLastError(error);
                    JNU_ThrowIOExceptionWithLastError(env, path);
                }
            }
        } else {
            JVM_Close(orv);
            rv = JNI_TRUE;
        }
    } END_PLATFORM_STRING(env, path);
    return rv;
} 
```

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:53:50.613

我在写问题时找到了解释。我仍然发布了这个问题，因为我想分享我学到的东西。

我的应用程序不是系统上访问文件的唯一进程。例如，Windows 搜索索引服务可以打开这个文件，因为它想将它添加到它的索引中。或者 Windows Explorer（如果它正在更新视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:41:58.460

这个问题让我想起了我最近在使用 File.renameTo() 方法时遇到的一个问题。这是（是？）由于 jvm 中的这个错误：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6213298](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6213298)

一个奇怪的解决方法是调用 System.gc() 并再次重命名文件（它可以工作......）。

不确定它是否与您的问题有关，但可能值得探索......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:07:24.697

尝试这个：

```
final File f = new File("file");
    while (true) {
        final boolean create = f.createNewFile();
        if (!create) {
            System.out.println("crate failed");
        } else {
            final boolean delete = f.delete();
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                System.out.println("...");
            }
            if (!delete) {
                System.out.println("delete failed");
            }
        }
    } 
```

通过这种方式，我们确保在调用 createNewFile 之前通过 delete 释放文件。

# django - 通过查询字符串传递的条件自定义管理更改列表中的 addlink

> ID：10516473
> 
> 赞同：0
> 
> 时间：2012-05-09T12:48:23.473
> 
> 标签：django, django-admin, django-templates

我更改了管理视图，如下所述： [如何显示外键子项的 Django 管理更改列表视图？](https://stackoverflow.com/questions/5662359/how-do-i-show-django-admin-change-list-view-of-foreign-key-children)

我有客户->项目->操作我通过这种方法获得项目的所有操作：

```
def related_actions(self, obj):
    from django.core import urlresolvers
    url = urlresolvers.reverse("admin:workflow_action_changelist")
    lookup = u"project__exact"
    text = obj.name
    return u"<a href='%s?%s=%d'>%s</a>" % (url, lookup, obj.pk, text) 
```

现在我想自定义 change_list 中的 addlink。管理员 change_list 被 /workflow/templates/admin/workflow/action/change_list.html 中的模板覆盖，但所有三个模型都使用相同的模板。所以我认为必须有一个更好的解决方案作为模板中的 harcode param 当我换行时

```
<a href="add/{% if is_popup %}?_popup=1{% endif %}" class="addlink"> 
```

到

```
<a href="add/?actionstatus=5" class="addlink"> 
```

在新的操作表单中预先选择了操作类别。但是我怎么能覆盖每个模型中的 addlink。

我必须通过项目视图中的参数获取操作状态：

```
/workflow/action/?project__exact=5 
```

有什么建议么？

是否有类似这种伪用于动作模型的东西？

```
 def add(self)
     get param projectid from url 
     return "<a href='/workflow/action/add/%s' target='_blank'>Add Action</a>" % (parent.project id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:56:35.623

AFAIK，没有这样`add`的。
您可以通过扩展自定义**change_list.html**，尤其是它的*object-list-item*块：

```
{% block object-tools-items %}
  <li>
    <a href="{% url cl.opts|admin_urlname:'add' %}{% if is_popup %}?_popup=1{% else %}?{% endif %}{% if "project" in cl.params %}&amp;project={{ cl.params.project }}{% endif %}" class="addlink">
      {% blocktrans with cl.opts.verbose_name as name %}Add {{ name }}{% endblocktrans %}
    </a>
  </li> 
{% endblock %} 
```

这里，`cl`是`ChangeList`实例。`cl.params`被过滤`request.GET`。该代码检查查询字符串中是否存在`project`并将其值附加到生成的 addlink。

当更改列表页面完成加载时，您还可以编写 JS 代码来更新添加链接。就像是

```
(function($){
$(function(){
var m = window.location.search.match(/[?&]project=([^&]*)/);
if (m){
    var link = $('a.addlink').attr('href');
    $('a.addlink').attr('href', link+(link.match(/\?_popup=1$/)?'&':'?')+'project='+m[1]);
}
});
})(django.jQuery); 
```

检查[此](https://stackoverflow.com/questions/1090948/change-url-parameters-with-jquery)以进行一般参数操作。

# c++ - 如何在安装驱动程序之前在 C++ 中获取 GPU 信息

> ID：10516476
> 
> 赞同：3
> 
> 时间：2012-05-09T12:48:42.957
> 
> 标签：c++, windows, drivers

我们有一款软件可以在多种不同的显卡上运行，包括 ATI 和 NVIDIA。在安装驱动程序之前，我需要能够确定显卡的设备 ID 或型号名称，以便我可以创建一个可以使用我们支持的任何显卡启动的硬盘驱动器映像，拥有它首次启动时检测显卡，安装驱动程序然后重新启动。目标平台是 WinXP。

我尝试使用 WMI，但它只能检索有关显示适配器的信息，其中不包括设备 ID，并且在安装驱动程序之前，显示适配器将只有通用数据，如“视频控制器 (VGA)”的名称和很快。

EnumDisplayDevices 在安装驱动程序之前无法检测到该设备。

这一定是可能的，因为当新硬件向导打开时，它知道显卡的名称，但我就是找不到办法。

有任何想法吗？

编辑 - 这是查询

```
ExecQuery(bstr_t("WQL"),bstr_t("SELECT * FROM Win32_PnPEntity WHERE DeviceID LIKE 'PCI\\VEN'"), WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, NULL, &pEnumerator); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:56:44.693

以供其他用户将来参考，我将添加自己的答案。

与我在帖子中所说的相反，WMI 实际上可以检测已卸载的设备，通过查询 Win32_PNPEntity 您可以获得它们的设备 ID。

# c# - 编写 XPATH 表达式

> ID：10516478
> 
> 赞同：0
> 
> 时间：2012-05-09T12:48:52.640
> 
> 标签：c#, xpath

您好，我有一个来自 whihc 的 xml 文件，我想要其中的一部分。所以，这是我的 xml 文件：

```
 <Item Text="Reports" Navigateurl ="Reports/Default.aspx">
  <Group>
    <Item Text="Customers" NavigateUrl="Reports/Customers/Default.aspx" Select="true">
      <Group>
        <Item Text="Customers" NavigateUrl="Reports/Customers/CustomerList.aspx" 
              Select="true"   />
        <Item Text="Customer Products" 
                    NavigateUrl="Reports/Customers/CustomersProducts.aspx" Select="true" />
        <Item Text="Customer Measurements" 
           NavigateUrl="Reports/Customers/CustomerLocationMeasurements.aspx" 
                Select="true"  />
        <Item Text="Customer Groups" NavigateUrl="Reports/Customers/CustomerGroups.aspx" />
        <Item Text="Customer Outages"  
             NavigateUrl="Reports/Customers/CustomerOutages.aspx" Select="true"/>
      </Group>
    </Item> 
```

为了选择这部分，我使用了这个表达式：

```
 XmlDataSource XmlDataSource1 = new XmlDataSource();
        XmlDataSource1.DataFile = "~/Menu.xml";
        XmlDataSource1.XPath = "//Item[@Text ='Customers']/Group";
        XmlDataSource1.DataBind(); 
```

结果将是

```
 Group
       Customers
       CustomerProducts
       .......... 
```

但我只想要那些选择属性为真的。但我一直无法弄清楚如何做到这一点。你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:54:31.910

不确定我是否记得正确 - 但我认为这是这样做的方法。

```
XmlDataSource1.XPath = "//Item[@Text ='Customers']/Group[/Item/@Select='true']"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:08:38.173

由于 XPATH 是 XPATH，我已经在 php 中制定了示例，因为我的 mac atm 上没有方便的 ac# 编译器。

路径语句`"//Item[@Text ='Customers'][@Select='true']"`导致：

```
Reports/Customers/Default.aspx
Reports/Customers/CustomerList.aspx 
```

示例代码：

```
<?php

$xml = <<<XML
<Item Text="Reports" Navigateurl ="Reports/Default.aspx">
    <Group>
        <Item Text="Customers" NavigateUrl="Reports/Customers/Default.aspx" Select="true">
            <Group>
                <Item Text="Customers" NavigateUrl="Reports/Customers/CustomerList.aspx" Select="true"   />
                <Item Text="Customer Products" NavigateUrl="Reports/Customers/CustomersProducts.aspx" Select="true" />
                <Item Text="Customer Measurements" NavigateUrl="Reports/Customers/CustomerLocationMeasurements.aspx" Select="true"  />
                <Item Text="Customer Groups" NavigateUrl="Reports/Customers/CustomerGroups.aspx" />
                <Item Text="Customer Outages" NavigateUrl="Reports/Customers/CustomerOutages.aspx" Select="true"/>
            </Group>
        </Item>
    </Group>
</Item>
XML;

$doc = new DOMDocument();
$doc->loadXML($xml);
$xpath = new DOMXPath($doc);
$list = $xpath->query("//Item[@Text ='Customers'][@Select='true']");
foreach($list as $item)
{
    printf("%s\n", $item->getAttribute('NavigateUrl'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:06:54.057

这是正确的方法：

```
XmlDataSource1.XPath = "//Item[@Text ='Customers']/Group/Item[@Select = 'true']"; 
```

# bash - 在 bash 中循环以准备 awk 的输入语句

> ID：10516483
> 
> 赞同：0
> 
> 时间：2012-05-09T12:49:13.463
> 
> 标签：bash, awk

我正在尝试按日期解析一些 nginx 日志。我写了一个 awk oneliner 来查找一天中所有匹配的日志，例如：

```
awk '/05\/May\/2012/ { print $0;}' /var/log/nginx/access.log 
```

我想要做的是使用 bash 循环几天和几个月。这是我得到的

```
#!/bin/bash

for h in 2012
do
    for i in Apr May
    do
        for j in 01 02 03 04 05
        do
            echo "/${j}\/${i}\/${h}/"
            search_string="'/${j}\/${i}\/${h}/ { print \$0;}'"
            echo $search_string;
            awk $search_string /var/log/nginx/access.log  
            echo "${h} ${i} ${j} done" 
        done
    done
done 
```

但是，这在 awk 行失败：

```
 awk: 1: unexpected character ''' 
```

似乎我需要转义一些变量，但到目前为止我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:09:34.260

最好使用 awk 的变量赋值功能将 shell 变量传递给 awk。然后使用`~`来匹配模式。例如：

```
search_string="$j/$i/$h"
awk -v pattern="${search_string}" '$0 ~ pattern {print $0}' /var/log/nginx/access.log 
```

这是[awk 手册](http://www.gnu.org/software/gawk/manual/html_node/Using-Shell-Variables.html)中指定的推荐方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:07:22.487

这是一个 AWK 脚本中的整个脚本：

```
awk 'BEGIN {
         years = "2012"
         months = "Apr|May"
         days = "01|02|03|04|05"
     }
     $0 ~ days "/" months "/" years {
         print
     }' /var/log/nginx/access.log 
```

如果您需要开始和完成标记，可以添加这些标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:05:07.977

不需要单引号。需要双引号。

```
search_string="/${j}\/${i}\/${h}/ { print \$0;}"
awk "$search_string" /var/log/nginx/access.log 
```

# javascript - 评估 XML 中的 XPath 表达式

> ID：10516487
> 
> 赞同：4
> 
> 时间：2012-05-09T12:49:23.387
> 
> 标签：javascript, xml, firefox-addon, firefox-addon-sdk

使用 Add-on SDK 创建 Firefox 插件时，如何处理 XML 文件？使用 XPath 进行评估会引发错误：

> XPathResult 未定义

我正在尝试使用以下代码处理[此 XML 数据：](http://www.teamliquid.net/video/streams/?filter=live&xml=1)

```
var iterator = xmlDoc.evaluate('//stream', xmlDoc, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:01:13.890

是的，在窗口上下文中可用的许多全局类在作为沙箱的 SDK 模块中不存在。您可以通过[`nsIDOMXPathResult`接口](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIDOMXPathResult)访问此常量：

```
var {Ci} = require("chrome");
var iterator = xmlDoc.evaluate('//stream', xmlDoc, null,
    Ci.nsIDOMXPathResult.ORDERED_NODE_ITERATOR_TYPE, null); 
```

# javascript - 在 JavaScript 中创建计划任务

> ID：10516491
> 
> 赞同：4
> 
> 时间：2012-05-09T12:49:35.160
> 
> 标签：javascript, jquery, scheduled-tasks

我正在创建一个应用程序，`javascript`在每个**星期日上午 12 点发送通知。**
我应该怎么做才能在那个时候调用一个函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T13:00:42.213

## 我不会用 javascript 来做

那说（大喊大叫……）

```
function foo(){
    var day =new Date().getDay();
    var hours =new Date().getHours();

    if (day === 0 && hours >12 && hours < 13)  // day is a 0 index base
                                               // sunday between 12:00 and 13:00
        // Do what you want here:
}

setInterval(foo, 3600000); // one hour check. 
```

[**现场演示**](http://jsfiddle.net/bGSuD/1)
​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T08:52:29.250

另一个解决方案是第 3 方，例如：[cron](https://www.npmjs.com/package/cron)

```
var CronJob = require('cron').CronJob;
var job = new CronJob('0 0 0 * * 0', function() {
  console.log('You will see this message every sunday, 12 am');
}, null, true, 'America/Los_Angeles');
job.start(); 
```

# c++ - 在 C++ 向量的每个元素上调用函数

> ID：10516495
> 
> 赞同：55
> 
> 时间：2012-05-09T12:49:49.663
> 
> 标签：c++, function, vector

在 C++ 中，有没有一种方法可以在向量的每个元素上调用函数，而不使用在所有向量元素上运行的循环？类似于 Python 中的“地图”。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-09T12:51:43.623

是的：[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)。

```
#include <algorithm> //std::for_each

void foo(int a) {
    std::cout << a << "\n";
}

std::vector<int> v;

...

std::for_each(v.begin(), v.end(), &foo); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-05-09T13:24:39.710

您已经得到了几个提到[`std::for_each`](https://en.cppreference.com/w/cpp/algorithm/for_each).

虽然这些回答了您提出的问题，但我要补充一点，至少根据我的经验，`std::for_each`这是标准算法中*最没用的。*

我使用（例如）[`std::transform`](https://en.cppreference.com/w/cpp/algorithm/transform)，它基本上`a[i] = f(b[i]);`或`result[i] = f(a[i], b[i]);`比`std::for_each`. 许多人经常使用`std::for_each`打印集合的元素；为此，[`std::copy`](https://en.cppreference.com/w/cpp/algorithm/copy)使用 a[`std::ostream_iterator`](https://en.cppreference.com/w/cpp/iterator/ostream_iterator)作为目的地会更好。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-09T13:04:48.467

在 C++ 11 上：您可以使用 lambda。例如：

```
std::vector<int> nums{3, 4, 2, 9, 15, 267};

std::for_each(nums.begin(), nums.end(), [](int &n){ n++; }); 
```

参考：[http ://en.cppreference.com/w/cpp/algorithm/for_each](http://en.cppreference.com/w/cpp/algorithm/for_each)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-09T12:58:49.763

如果你有 C++11，还有一个更短的方法：[基于范围的 for](http://www2.research.att.com/~bs/C++0xFAQ.html#for) . 它的目的正是如此。

```
std::vector<int> v {1,2,3,4,5};

for (int element : v)
    std::cout << element; //prints 12345 
```

您还可以在适当的时候对其应用引用和 const，或者在类型较长时使用 auto。

```
std::vector<std::vector<int>> v {{1,2,3},{4,5,6}};

for (const auto &vec : v)
{
    for (int element : vec)
        cout << element;

    cout << '\n';
} 
```

输出：

```
123
456 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-09T12:52:27.490

使用`for_each`：

```
// for_each example
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

void myfunction (int i) {
  cout << " " << i;
}

struct myclass {
  void operator() (int i) {cout << " " << i;}
} myobject;

int main () {
  vector<int> myvector;
  myvector.push_back(10);
  myvector.push_back(20);
  myvector.push_back(30);

  cout << "myvector contains:";
  for_each (myvector.begin(), myvector.end(), myfunction);

  // or:
  cout << "\nmyvector contains:";
  for_each (myvector.begin(), myvector.end(), myobject);

  cout << endl;

  return 0;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-02-21T13:54:47.237

OP 提到了[`map`](https://thepythonguru.com/python-builtin-functions/map/)Python 中的函数。

这个 Python 函数实际上将一个函数应用于列表（或可迭代）的每个元素，并返回一个收集所有结果的列表（或可迭代）。

换句话说，它做了这样的事情：

```
def f( x ) : 
   """ a function that computes something with x"""
   # code here 
   return y 

input = [ x1, x2, x3, ... ]
output = map( func, input )  

# output is  now [ f(x1), f(x2), f(x3), ...] 
```

因此，与 Python 的映射最接近的 C++ 标准库实际上是[`std::transform`](http://www.cplusplus.com/reference/algorithm/transform/)（来自`<algorithm>`标题）。

示例用法如下：

```
#include <vector>
#include <algorithm> 
using namespace std;

double f( int x ) { 
   // a function that computes the square of x divided by 2.0 
   return x * x / 2.0 ;
}

int main( ) {
  vector<int> input{ 1, 5, 10 , 20};
  vector<double> output;
  output.resize( input.size() ); // unfortunately this is necessary

  std::transform( input.begin(), input.end(), output.begin(), f );

  // output now contains  { f(1), f(5), f(10), f(20) }
  //                     = { 0.5, 12.5,  50.0, 200.0 } 
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-09T12:52:25.327

您可以使用带有一对迭代器和一个函数或仿函数的[std::for_each 。](http://en.cppreference.com/w/cpp/algorithm/for_each)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-08T22:14:20.337

以为我会分享and的`std::ranges`等价物，如果有人更喜欢它们：`for_each``transform`

```
std::vector<int> v;

std::ranges::for_each(v,[](const auto& n) {});

const auto squared = v | std::views::transform([](const auto& n) { return n*2; }); 
```

在 Godbolt 上运行：[https ://godbolt.org/z/zYME6b](https://godbolt.org/z/zYME6b)

# c# - 初始化动态对象以用作某个类型的实例

> ID：10516496
> 
> 赞同：0
> 
> 时间：2012-05-09T12:49:53.580
> 
> 标签：c#, dynamic

再生产：

片段1：

```
class A{
   A(int i){}
   A(string s){}
   A(Form b){}
   A(Stream b){}
   //...more constructors but no one accepts object type
} 
```

片段 2：

```
A assign(object obj)
{
    dynamic d=obj;
    //do something with d or obj?
    A a=new A(d);
    return a;
} 
```

如何让线路`A a=new A(d);`正常工作？

编辑：

如何在`A a=new A(d);`没有动态类型机制的情况下使线路工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:55:24.600

添加 A(对象 obj){}

到 A 的构造函数，然后使用 GetType() 来识别它。

```
 public A(object obj)
        {
            if(obj is int)
                //Do something with the int.
            if(obj is string)
                //Do something with the string.
            if(obj is Form)
                //Do something with the Form.

            //etc...        
        } 
```

# git - 如何使 git 存储库的 pip 更新子模块？

> ID：10516497
> 
> 赞同：1
> 
> 时间：2012-05-09T12:49:53.827
> 
> 标签：git, pip, git-submodules

我正在使用 pip 来部署我的包，并且我希望它在我升级包时递归地拉出我的包的子模块，有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:38:21.283

每当 pip 更新我的 repo 时，它会运行 setup.py 并以“develop”作为参数，所以我像这样更改了 setup.py：

```
from distutils.core import setup
from setuptools.command.develop import develop
from subprocess import check_call
from os import path

class update_submodules(develop):
    def run(self):
        print 1
        if path.exists('.git'):
            check_call(['git', 'submodule', 'update', '--init', '--recursive'])
        develop.run(self)

a = setup(cmdclass = {"develop": update_submodules},
      ... 
```

这意味着在运行“setup.py develop”的默认程序之前运行“git submodule update --init --recursive”。

# java - ServletWrapping 控制器 URL 抛出 404

> ID：10516498
> 
> 赞同：0
> 
> 时间：2012-05-09T12:49:55.717
> 
> 标签：java, servlets, spring-mvc, http-status-code-404

我有一个 AJAX 请求发布到`http://localhost:8080/spellchecker/google-spellchecker.do`下面映射的 URL。知道为什么这会引发 404 错误吗？我有一个`System.out.println("==========");`in`GoogleSpellChekerServlet.service()`并且它没有被调用。

```
<!-- Setup Spring ServletWrappers -->
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="/spellchecker/google-spellchecker.do">googleSpellChekerWrappingController</prop>
        </props>
    </property>
</bean>

<bean id="googleSpellChekerWrappingController" class="org.springframework.web.servlet.mvc.ServletWrappingController">
    <property name="servletClass">
        <value>org.tinymce.spellchecker.GoogleSpellChekerServlet</value>
    </property>
</bean> 
```

这是ajax请求的屏幕截图...

![ajax请求截图](../Images/b084d285025bb84d85c0b7ef4a7ac957.png)

**web.xml**

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
    <url-pattern>*.json</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:07:26.563

您的 web.xml 没有将 *.do 映射到 servlet。

# django - 我可以在不使用 RAM 的情况下通过 HTML 表单将大图像上传到我的服务器吗？

> ID：10516507
> 
> 赞同：2
> 
> 时间：2012-05-09T12:50:19.153
> 
> 标签：django, memory, upload, image-uploading

我正在构建一个站点，该站点要求用户将每个大约 70MB 的图像上传到我的服务器。目前我正在运行一个具有 512MB RAM 的 Linode。由于此服务器上有其他站点，因此没有太多额外的内存可用，因此是否可以通过将图像直接转储到文件系统来将这些图像上传到服务器而不占用任何 RAM，或者通过 POST 上传任何文件必须先加载到内存中，然后才能转储到文件系统？此问题的性质是否需要具有大量 RAM 的服务器？

有没有办法以某种方式将 ftp 客户端集成到 html 表单中？如果这有所作为，我正在使用 Django。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:02:11.947

在您的项目设置中，将 FILE_UPLOAD_MAX_MEMORY_SIZE 设置为较小的值（例如 1024 字节）。这将使 Django 假脱机 request.FILES 更快地写入磁盘，而不是用完 RAM

如果您想了解更多详细信息，请查看文档：[https ://docs.djangoproject.com/en/dev/ref/settings/#file-upload-max-memory-size](https://docs.djangoproject.com/en/dev/ref/settings/#file-upload-max-memory-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T12:07:55.060

根据您的要求.... django 文件上传有两种类型的上传。

1 - InMemory 上传 2\. 临时上传

在 InMemoryUpload 的情况下，您上传​​的文件仅通过 request.FILES 在 ram 中，但可以设置该上传以将其从 InMemoryUpload 转换为 TemporaryUpload 最终使用 /tmp 文件夹来存储它.. 节省 RAM ...

在 settings.py 中：-

**FILE_UPLOAD_MAX_MEMORY_SIZE** = #something

将上传到内存中的文件的最大大小（以字节为单位）。大于 FILE_UPLOAD_MAX_MEMORY_SIZE 的文件将被流式传输到磁盘。默认为 2.5 兆字节。

**FILE_UPLOAD_TEMP_DIR** = #到 sme 路径

上传文件大于 FILE_UPLOAD_MAX_MEMORY_SIZE 的目录将被存储。默认为您系统的标准临时目录（即大多数类 Unix 系统上的 /tmp）。

然后，您可以将该文件分块写入所需的目录，因为 /tmp 会在系统关闭后删除所有文件。按照这个链接：

[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#sharing-upload-handler-behavior](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#changing-upload-handler-behavior)

# ios - 当 shouldAutorotateToInterfaceOrientation 总是返回 NO 时会发生什么？

> ID：10516511
> 
> 赞同：0
> 
> 时间：2012-05-09T12:50:39.357
> 
> 标签：ios, xcode, uiviewcontroller, undefined-behavior, autorotate

奇怪的问题，但是当某些 UIViewController 不支持任何方向时会发生什么？:)

```
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
} 
```

将支持哪个方向？该 UIViewController 的行为将是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:56:53.953

默认情况下，方向是纵向，除非您明确将方向更改为横向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:57:24.647

`-shouldAutorotateToInterfaceOrientation:`从所有界面方向返回 NO 。它应该支持至少一个方向。

# java - 如何捕获 RESTEasy Bean 验证错误？

> ID：10516516
> 
> 赞同：5
> 
> 时间：2012-05-09T12:50:48.943
> 
> 标签：java, rest, jax-rs, resteasy, restful-architecture

我正在使用 JBoss-7.1 和 RESTEasy 开发一个简单的 RESTFul 服务。我有一个名为 CustomerService 的 REST 服务，如下所示：

```
@Path(value="/customers")
@ValidateRequest
class CustomerService
{
  @Path(value="/{id}")
  @GET
  @Produces(MediaType.APPLICATION_XML)
  public Customer getCustomer(@PathParam("id") @Min(value=1) Integer id) 
  {
    Customer customer = null;
    try {
        customer = dao.getCustomer(id);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return customer;
    }
} 
```

在这里，当我点击 url [http://localhost:8080/SomeApp/customers/-1](http://localhost:8080/SomeApp/customers/-1)时，@Min 约束将失败并在屏幕上显示堆栈跟踪。

有没有办法捕捉这些验证错误，以便我可以准备带有正确错误消息的 xml 响应并显示给用户？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T21:28:33.857

您应该使用异常映射器。例子：

```
@Provider
public class ValidationExceptionMapper implements ExceptionMapper<javax.validation.ConstraintViolationException> {

    public Response toResponse(javax.validation.ConstraintViolationException cex) {
       Error error = new Error();
       error.setMessage("Whatever message you want to send to user. " + cex);
       return Response.entity(error).status(400).build(); //400 - bad request seems to be good choice
    }
} 
```

其中错误可能类似于：

```
@XmlRootElement
public class Error{
   private String message;
   //getter and setter for message field
} 
```

然后你会得到包装到 XML 中的错误消息。

# php - CSS 通知淡出

> ID：10516520
> 
> 赞同：0
> 
> 时间：2012-05-09T12:50:58.803
> 
> 标签：php, jquery, html, notifications

我正在创建一个小型 Web 应用程序，并且我在一些功能中使用了 AJAX，例如创建和删除某些对象。

为了通知用户，我使用 PHP 将 HTML 通知回显到屏幕上，具体取决于对象是否成功创建的天气。

```
if ($query) {
 //response to ajax call if successful
  echo '<div class="alert alert-success"><a class="close" data-dismiss="alert">×</a><h4 class="alert-heading">Success!</h4>Object Added!</div>'; 
```

}

问题是，随着时间的推移，通知会在屏幕上堆积，因为没有刷新来删除它们。

我有一个 jQuery 函数，可以每 5 秒删除一次警报，如下所示

```
function clearAlerts(){
        setTimeout(function() {
            $('.alert').fadeOut('fast');
        }, 5000);
    } 
```

但是我不知道每次将通知添加到页面时如何调用此函数，无论如何使用 jQuery 来检测通知何时回显到页面上，或者每次添加时运行此 jQuery 函数.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:55:30.677

将此标签直接放在您正在生成的每个 HTML 片段中，您可以以任何您喜欢的方式对其进行样式设置：

```
<span class="close-notification">Close</span> 
```

然后用这块JS在点击的时候把它去掉。

```
$(document).on('click', '.close-notification', function(){
    $(this).parent().fadeOut(); // could use .remove(), .slideUp() etc
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:06:24.227

你想要的都是可能的，通过 jQuery。首先，在通知 div 中添加一个类，例如：

```
<div class="notification">Notification</div> 
```

然后这个jQuery：

```
$(".notification").live("准备好", function(){
                $(".notification").setDelay(5000).fadeOut("slow");
            });
```

# android - 单独线程中的 ProgressDialog 给出 **未捕获的远程异常！**

> ID：10516525
> 
> 赞同：1
> 
> 时间：2012-05-09T12:51:13.107
> 
> 标签：android, android-dialog

我在一个新线程中实现了一个 ProgressDialog。

**onCreate 中的代码**

```
progressDialog = new ProgressDialog(this);
progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
progressDialog.setMessage("Verifying...");
progressDialog.setCancelable(true);
progressDialog.show();

t.start(); 
```

**线程声明**

```
Runnable r = new MyRunnable();
Thread t = new Thread(r); 
```

**可运行**

```
public class MyRunnable implements Runnable {

        @Override
        public void run() {
            Message msg = Message.obtain();
            if (t.isInterrupted()) {
                msg.recycle();
                return;
            }

            long startTime = SystemClock.elapsedRealtime();
            long duration = 5 * 60 * 1000; // 5 min
            long percentageIntervalDuration = 2;
            long interval = (duration * percentageIntervalDuration) / 100; // 6sec
            int i = 0;
            do {
                if (SystemClock.elapsedRealtime() == (startTime + (i * interval))) {
                    msg.arg1 = (int) percentageIntervalDuration * i;
                    mainHandler.sendMessage(msg);
                    i++;

                }
            } while (i != (100 / percentageIntervalDuration) + 1);
        }
    } 
```

**附加到主线程的处理程序**

```
Handler mainHandler = new Handler() {
public void handleMessage(Message msg) {
Log.d(TAG, String.valueOf(msg.arg1));
if (msg.arg1 == 100) {
        progressDialog.dismiss();
        } else {
            progressDialog.setProgress(msg.arg1);
               }
        }
    }; 
```

现在我面临两个问题

**1、ProgressDialog被dismiss时Logcat出现如下错误信息**

> ```
> 05-09 17:57:36.386: E/JavaBinder(9822): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
> 05-09 17:57:36.386: E/JavaBinder(9822): android.util.AndroidRuntimeException: { what=4 when=650507787 arg1=1 } This message is already in use.
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:171)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessageAtTime(Handler.java:457)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessageDelayed(Handler.java:430)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessage(Handler.java:367)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.view.inputmethod.InputMethodManager$1.setActive(InputMethodManager.java:428)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at com.android.internal.view.IInputMethodClient$Stub.onTransact(IInputMethodClient.java:83)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Binder.execTransact(Binder.java:288)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at dalvik.system.NativeStart.run(Native Method)
> 05-09 17:57:36.386: E/JavaBinder(9822): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
> 05-09 17:57:36.386: E/JavaBinder(9822): android.util.AndroidRuntimeException: { what=100 when=650507787 } This message is already in use.
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:171)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessageAtTime(Handler.java:457)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessageDelayed(Handler.java:430)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Handler.sendMessage(Handler.java:367)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at com.android.internal.view.IInputConnectionWrapper.dispatchMessage(IInputConnectionWrapper.java:182)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at com.android.internal.view.IInputConnectionWrapper.reportFullscreenMode(IInputConnectionWrapper.java:159)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at com.android.internal.view.IInputContext$Stub.onTransact(IInputContext.java:211)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at android.os.Binder.execTransact(Binder.java:288)
> 05-09 17:57:36.386: E/JavaBinder(9822):   at dalvik.system.NativeStart.run(Native Method) 
> ```

**2\. ProgressDialog 有时会以特定百分比冻结。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:53:15.187

从上一个问题来看，您可能每次都需要创建一个新的 Message 对象。[Android Handler 消息和 ListView](https://stackoverflow.com/questions/4113704/android-handler-message-and-listview)

此外，这个讨论似乎指向 Message.clearForRecycle() 没有被调用？[http://code.google.com/p/android/issues/detail?id=3318](http://code.google.com/p/android/issues/detail?id=3318)

也就是说，为什么不使用 AsyncTask 呢？它非常适合后台任务 + 发布到 UI 线程，并且与进度对话框配合得非常好。它具有用于在主后台线程工作运行之前和之后执行代码的预构建方法，并且它能够向 UI 发布进度更新，并为您很好地隐藏所有处理程序的内容。

[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

[http://www.android10.org/index.php/forums/43-view-layout-a-resource/908-tutorial-progressbar-running-in-asynctask](http://www.android10.org/index.php/forums/43-view-layout-a-resource/908-tutorial-progressbar-running-in-asynctask)

[http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)

# postgresql - 在postgresql中使用分组随机排序

> ID：10516537
> 
> 赞同：0
> 
> 时间：2012-05-09T12:51:59.197
> 
> 标签：postgresql, sorting, random

我有一个表格，其中的数据可能如下所示：

```
ID | PARENT_ID | several_columns_to_follow
---+-----------+--------------------------
 1 |         1 | some data
 2 |         2 | ...
 3 |         1 | ...
 4 |         4 | ...
 5 |         3 | ...
 6 |         1 | ...
 7 |         2 | ...
 8 |         3 | ... 
```

根据要求，我需要允许以两种方式进行排序（根据用户请求）：

1) ID 在连续父母中的随机顺序 - 这很容易实现

```
SELECT * FROM my_table ORDER BY parent_id, random() 
```

2）随机排序的父母中ID的随机顺序 - 这就是我卡住的地方。显然，仅对整个事物进行排序`random()`不会很有用。

有什么建议么？理想情况下，在一个 SQL 语句中，但如果需要，我愿意使用多个。数据量不大，所以我不担心性能（最终结果不会超过100行左右）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:15:17.547

`random()`在最后的排序中确实是一个令人讨厌的功能。如果几乎随机就足够了，也许你可以对行值的一些散列函数进行排序，比如

```
SELECT * FROM my_table 
ORDER BY parent_id, (id *12345) % 54321
     ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:28:14.810

也许这会做：

```
ORDER BY ((parent_id * date_part('microseconds', NOW()) :: Integer) % 123456),
((id * date_part('microseconds', NOW()) :: Integer) % 123456); 
```

也许素数而不是 123456 会产生“更随机”的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:50:00.853

如果它永远不会超过 100 条记录，那么只需选择所有记录，将其放置在本地表中（或客户端的内存数据结构中）并进行适当的[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:04:17.077

这样的事情应该这样做：

```
WITH r AS (SELECT id, random() as rand FROM my_table ORDER BY rand)
SELECT m.* FROM r JOIN my_table m USING (id)
  ORDER BY r.rand, random(); 
```

# javascript - Google Maps API V3 搜索 KML 文件

> ID：10516539
> 
> 赞同：0
> 
> 时间：2012-05-09T12:52:06.610
> 
> 标签：javascript, google-maps-api-3, kml

我想搜索 KML 文件以查看特定地址是否在覆盖范围内。目前，我将地址转换为地理编码。但是，我不确定添加此功能需要什么代码。

这是当前代码：

```
function initialize() {
    var infowindow = new google.maps.InfoWindow({
        content: '',
        suppressMapPan:true
    });

    var myLatlng = new google.maps.LatLng(35.910200,-84.085100);   
        var myOptions = {
            zoom: 12,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    var map = new google.maps.Map(
        document.getElementById("map_canvas"), myOptions);

    var d = new Date();    
    var n = d.getMilliseconds();
    var nyLayer = new google.maps.KmlLayer(
        'http://www.cspc.net/neighborhoods/groups.kml?rand=' + n,
        {  suppressInfoWindows: true, map: map});

    google.maps.event.addListener(nyLayer, 'click', function(kmlEvent) {    
        var url = kmlEvent.featureData.snippet;
        var groupName = kmlEvent.featureData.name;
        var insideContent = "<div style='width:250px;'><h2>" + groupName +
            "</h1><p>We have a neighborhood contact in your area! </p>" +
            "<p><a href='" + url + "' target='_blank'>Get connected!</a>" +
            " They look forward to hearing from you.</p><p>If you have " +
            "any additional questions, please contact our " +
            "<a href='http://www.cspc.net/communitylife' target='_blank'>" +
            "Community Life</a> staff for more information. Betsy Palk, " +
            "the Administrative Assistant, may be reached at:<br/><br/>" +
            "<b>Email:</b> <a href='mailto:betsypalk@cspc.net'>" +
            "betsypalk@cspc.net</a><br/><b>Phone:</b>  865-291-5268<p></div>";

        var clickPos = kmlEvent.latLng;
        var posX = new google.maps.LatLng(clickPos.lat(), clickPos.lng());
        infowindow.close();
        infowindow.setPosition(posX);
        infowindow.setContent(insideContent);
        infowindow.open(map);
    });

    eventMapClick = google.maps.event.addListener(map, 'click',
        function(event) {
            var marker = new google.maps.Marker({ position: event.latLng }); 
            var outsideContent = "<div style='width:250px;'><h2>Oops!</h1>" +
            "<p> It seems we don't have a neighborhood contact in your " +
            "area.</p><p>Please contact our <a " +
            "href='http://www.cspc.net/communitylife' target= '_blank'>" +
            "Community Life</a> staff for more information. " +
            "Betsy Palk, the Administrative Assistant, may be reached at:" +
            "<br/><br/><b>Email: </b> <a href='mailto:betsypalk@cspc.net'>" +
            "betsypalk@cspc.net</a><br/><b>Phone:</b>  865-291-5268<p></div>";

            infowindow.setContent(outsideContent);
            infowindow.open(map, marker);
        });
    }

    var geocoder = new google.maps.Geocoder();

    function searchAddress(address) {
        geocoder.geocode(
            {'address': address},
            function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var loc = results[0].geometry.location;
                    // use loc.lat(), loc.lng()
                    window.alert(loc);
                }
                else {
                    window.alert("Not found: " + status);
                }
            }
        );
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:28:44.783

如果我理解您的问题，我相信您希望该公式确定点 ( `google.maps.LatLng`) 是否属于您的 KML`Placemark`定义之一（您给出的名称如下：`Neighborhood Group 1`）。在每个`Placemark`中，您定义一个`Polygon`，在每个`Polygon`中，您定义一组`coordinates`，它们代表 的顶点`Polygon`。

使用您通过地理编码检索`coordinates`的inside`Polygon`和 the `LatLng`，您可以从这些公式开始并选择最适合您的公式：

*   [多边形中包含点的快速绕组数](http://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm)
*   [多边形内点算法](http://alienryderflex.com/polygon/)

在 SO 上也提出了一个非常相似的问题：[确定多边形内标记的纬度](https://stackoverflow.com/q/2784807/1314132)。

# datetime - 给定日期如何获得该周的星期日和星期六

> ID：10516540
> 
> 赞同：2
> 
> 时间：2012-05-09T12:52:09.853
> 
> 标签：datetime, calendar, titanium

我想获取提供日期的一周的星期日和星期六。我只能访问以下功能：

*   `getDate()`返回 0-6 之间的数字（0 表示星期日）
*   `getDay()` 返回一个 1-31 的数字
*   `getMonth()` 返回一个 0-11 的数字
*   `getFullYear()` 返回当前年份

我在钛上做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:54:32.793

根据您上面的描述，我想出了：

```
var sat = new Date(input.getFullYear(), input.getMonth(), 6 - input.getDate() + getDay());
var sun = new Date(input.getFullYear(), input.getMonth(), getDay() + (input.getDate() - 6)); 
```

如果我遵循 MDN 文档，我会提出（也适用于 Ti）：

```
var sat = new Date(input.getFullYear(), input.getMonth(), 6 - input.getDay() + input.getDate());
var sun = new Date(input.getFullYear(), input.getMonth(), input.getDate() + (input.getDay() - 6)); 
```

其中 input 是一个 javascript Date 对象。

如有必要，日期对象将处理或更改月份和/或年份。

希望这可以帮助。

# android - 多项选择对话框中的选中项目

> ID：10516541
> 
> 赞同：0
> 
> 时间：2012-05-09T12:52:13.747
> 
> 标签：android

我在 MultipleChoiceDialog 中显示对象列表。另一个列表包含所有已检查的对象。

我的清单：

```
List<Participant> participants = datasourceParticipant.getAllParticipants();
List<Participant> participantsConference = datasourceParticipant.getAllParticipants(conference.getId()); 
```

为了在 MultipleChoiceDialog 中显示它们，我像这样构建我的列表：

```
participantsNames = new ArrayList<String>();

for(int i = 0; i < this.participants.size(); i++) {
                participantsNames.add(i, participants.get(i).getFirstname() + " " + participants.get(i).getLastname());
}

participantConferenceNames = new ArrayList<String>();

for(int i = 0; i < this.participantsConference.size(); i++) {
            participantConferenceNames.add(i, participantsConference.get(i).getFirstname() + " " + participantsConference.get(i).getLastname());
} 
```

之后，我创建了必要的字符串数组......

```
final CharSequence[] items = participantsNames.toArray(new CharSequence[participantsNames.size()]); 
```

在 MultipleChoiceDialog 中显示它

```
builder.setMultiChoiceItems(items, null, null); 
```

如何将checkedItems 添加到MultipleChoiceDialog。还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:08:55.680

`boolean[]`您必须使用要检查的值传入 a而不是 null 。最直接的方法是使用一个集合：

```
 Set<Participant> set = new HashSet();
 set.addAll(datasourceParticipant.getAllParticipants(conference.getId()));
 boolean[] checked = new boolean[participants.size()];
 for (int i =0; i < participants.size(); i ++) {
   checked[i] = set.contains(participants.get(i));
 } 
 ....
 builder.setMultiChoiceItems(items, checked, null); 
```

为此，您的 Participant 类必须实现`hashCode()`；

# perl - 应该为此脚本安装哪些 CPAN 模块？

> ID：10516545
> 
> 赞同：3
> 
> 时间：2012-05-09T12:52:25.140
> 
> 标签：perl

如果 Perl 脚本包含

```
use vars qw($PROGNAME $VERSION);
use lib "/usr/nagios/libexec";
use utils qw(%ERRORS); 
```

然后我应该安装哪些 CPAN 模块？

`cpan utils`什么也没找到。

**更新**

我正试图开始工作的正是[这个脚本。](http://exchange.nagios.org/directory/Plugins/Security/VPN-Software/check_openvpn_pl/details)

**解决方案**

```
yum install nagios-plugins-perl.x86_64 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:59:09.677

Nagios`utils.pm`自带的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:03:28.067

改变

```
use lib "/usr/nagios/libexec"; 
```

至

```
use lib "/usr/nagios/plugins" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T11:10:43.277

想要将我自己的插件与默认插件分开，我使用了以下方法。

```
$ mkdir -p /usr/local/nagios/plugins
$ cd /usr/local/nagios/
$ ln -s /usr/lib/nagios/plugins libexec 
```

现在我可以保留自己的版本控制插件，`/usr/local/nagios/plugins`但它们使用发行版（在我的情况下为 14.04）`utils.pm`。

# android - Android 2.2 与 2.3 - HTTP 标头中的soapaction 与 SOAPAction

> ID：10516552
> 
> 赞同：1
> 
> 时间：2012-05-09T12:52:37.083
> 
> 标签：android, http-headers, ksoap2, android-ksoap2

使用[ksoap2](http://code.google.com/p/ksoap2-android/)库 (v2.6.4)，SOAP 版本 11，我正在通过 2.3.3 仿真器设备执行 Web 服务。服务器识别请求的操作并提供预期的答案。HTTP/1.1 标头（在服务器端调试）包含以下内容：

```
User-Agent: ksoap2-android/2.6.0+
SOAPAction: myAction
Content-Type: text/xml;charset=utf-8
Connection: close
Content-Length: 1481
Host: xxx.xxx.xxx.xxx
Accept-Encoding: gzip 
```

尝试启动相同的应用程序——一切都相同（如果 IT 世界中有这样的东西），相同的源、库、soap 配置、请求、服务器等——但这次是在 2.2 模拟器设备上。服务器拒绝请求，声称请求中缺少 SOAPAction。日志显示此请求带有以下 HTTP 标头：

```
user-agent: ksoap2-android/2.6.0+
soapaction: myAction
content-type: text/xml;charset=utf-8
connection: close
content-length: 1481
Host: xxx.xxx.xxx.xxx 
```

因此 SOAPAction（在标头的其他部分中）作为小写参数到达。服务器无法识别小写的“soapaction”并拒绝我的请求。我需要这个应用程序才能在 Android 2.2+ 上运行

任何想法从哪里开始？

编辑：这就是我发送 SOAP 请求的方式。如果这有任何帮助。

```
 public Object executeMyFunction(SoapObject request) throws Exception {

            SoapSerializationEnvelope envelope = new
 SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.implicitTypes = false;
            envelope.dotNet = true;
            envelope.setAddAdornments(false);

            HttpTransportSE _ht = new HttpTransportSE(Configuration.getWsUrl());
            _ht.call("myFunction", envelope);
            return envelope.getResponse();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:33:15.857

我对 ksoap2 有类似的问题。应用程序在 android 版本 2.2 上运行，但不在 2.3.3 上运行。导致问题的那个东西是大小写，所以我正在寻找响应头参数：

```
set-cookie 
```

安装的

```
Set-Cookie 
```

`IgnoreCase`解决了我的问题。您应该始终尝试使用wireshark从模拟器中捕获http消息，然后比较它们。

# jquery - 停止父事件jquery

> ID：10516553
> 
> 赞同：0
> 
> 时间：2012-05-09T12:52:44.297
> 
> 标签：jquery, jquery-events, stoppropagation

当我单击子链接时，我想停止父事件触发。这是我的代码：

```
$('.list_row_inputtype').on('click',function(event) {

    $(this).find('a.link_to_fire').click();
    event.stopPropagation();

    return false;
});

<div class="list_row_input_type unread"> 
    <a href="#" onclick="toogleRead(); return false;" class="toogleRead"></a>
    <a href="{corePath}/mails" class="link_to_fire">{emailLink}</a>
    <div class="description"></div>
</div> 
```

当我单击`.toogleRead`它时会触发该功能，但也会切换到`{corePath}/mails`页面。我想阻止它改变页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:02:13.713

`.toogleRead`您也应该通过 jQuery在元素上添加事件处理程序。更容易记住处理程序的附加位置，它不会混合两种方式，并在 HTML 和 Javascript 之间添加更好的分离。

这是一个工作演示[http://jsfiddle.net/pomeh/uFV9R/](http://jsfiddle.net/pomeh/uFV9R/)。

HTML 代码

```
<div class="list_row_input_type unread"> 
    <a href="#" class="toogleRead"></a>
    <a href="{corePath}/mails" class="link_to_fire">{emailLink}</a>
    <div class="description"></div>
</div> 
```

Javascript代码

```
$('.list_row_input_type').on('click',function(event) {
    event.stopPropagation();
    // your stuff
});

$('a.toogleRead').on('click',function(event) {
    event.stopPropagation();
}); 
```

还有一点，在大多数情况下，使用 jQuery 从事件处理程序返回 false 被认为是一种不好的做法。它做了太多你通常只想做其中一件的事情。这里有两个链接详细解释了这一点[http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)和[http://css-tricks.com/return-false-and-prevent-default/](http://css-tricks.com/return-false-and-prevent-default/) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:56:40.543

你能把 clent 事件放在上面`a`吗？现在您不必担心事件传播。

```
$('.list_row_input_type.unread a.toggleRead').click(function(e) {
  e.preventDefault();
  toggleRead();
}); 
```

# c++ - 传递对象的地址时，“地址表达式必须是左值或函数指示符”

> ID：10516554
> 
> 赞同：3
> 
> 时间：2012-05-09T12:52:45.950
> 
> 标签：c++

这是我的代码的一部分：

```
class A
{
  public:
  void init(classB& pObject);
  classB& _pObject;
}

void classA::init(classB& pObject)
{
  _pObject = pObject;
}

class B
{
  public:
  void init();
}

void classB::init()
{
  classA* pClassA = new classA;
  pClassA->init(&this);
} 
```

编译后遇到2个问题：

1.  `_pObject = pObject;`：没有可行的重载'='

2.  `pClassA->init(&this);`: 地址表达式必须是左值或函数指示符

我对这些问题感到困惑......我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:30:26.230

首先，问题中有一个错字。我假设`A`并`classA`引用同一个类，对于`B`and 也是如此`classB`。

1) 引用和指针之间的少数区别之一是，一旦引用被初始化，就不能为其分配不同的值。因此，您不能分配给`_pObject`，尽管您可以在类的构造函数的初始化列表中对其进行初始化`A`：

```
classA::classA(classB& object) : _pObject(object) // Correct
{
  // _pObject = object;        on the other hand, this would be incorrect
} 
```

2)`&this`是 的地址`this`，但您实际上想要对 所指向的值的引用`this`。你需要`*this`改用。尽管我们已经看到，没有办法让函数`classA::init`与您当前的类设计一起工作。如果您真的想`_pObject`在构造对象后更改 的值，则需要将其设置为 a`classB*`而不是 a `classB&`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:54:40.420

1）您应该`*this`在这种情况下使用，就像`&this`类型一样`ClassB**`，而不是`ClassB&`；

2）您只能在构造函数中初始化您引用的成员变量：

```
classA::classA(classB& b) : _pObject(b)
{
} 
```

（顺便说一句，我想您`delete`只是为了简洁而省略了声明）

# tridion - 从自定义部署器访问组件的字段

> ID：10516555
> 
> 赞同：17
> 
> 时间：2012-05-09T12:52:50.927
> 
> 标签：tridion

我正在尝试在 Tridion 2011 SP1 中创建一个自定义部署程序，一旦发布就可以将组件索引到 solr 实例。一切正常，但我在索引组件字段的方式上遇到了一些问题。

我可以通过使用 Component.getCustomMeta() 方法并解析 XML 来访问元数据字段。但是，如果不读取正在输出的文件并解析输出，则似乎无法访问普通字段。这并不完全可行，因为标记可能会发生变化，而且做应该（希望）是一件简单的事情似乎还有很长的路要走。

我对文档进行了拖网搜索，似乎没有任何东西可以获取字段值，所以我在这里不知所措，需要解析输出，还是我在某处遗漏了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T13:06:32.747

内容字段不会在交付端如此公开，内容作为“内容”公开也就不足为奇了。

如果您确实需要这些字段，则需要：

1.  为您的组件演示生成“可解析”输出
2.  在组件演示文稿发布时对其进行解析。

查看类似[DD4T](http://code.google.com/p/dynamic-delivery-4-tridion/)的实现以了解类似的方法。

简而言之 - 你不能这样做，因为 Tridion 不会开箱即用地公开它。唯一的方法是通过模板更改内容输出格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:00:24.840

我们已经做了一个替代解决方法来实现类似的要求。实现的一个缺点是额外呈现 XML 中的组件表示和代理中的 xml 存储副本。

这是我们所做的：

1.  创建了一个动态 CT（内容的 XML 表示）GetComponentAsXML 并映射到所有模式
2.  所有页面模板都有一个 C# TBB，用于查找我们需要推送到 SOLR 的内容
3.  C# TBB 使用上面的动态 CT GetComponentAsXML 执行 RenderComponentPresentation，这会推送 XML (engine.RenderComponentPresentation(component.Id, componentTemplateURI)
4.  Deployer 现在获取 xml 格式的内容，以及其他类型的组件表示形式（如 ascx、嵌入页面等）

希望这些信息有所帮助。

# java - 字符方法未捕获元素的所有数据 - SAX 解析器 - Java

> ID：10516557
> 
> 赞同：0
> 
> 时间：2012-05-09T12:52:56.087
> 
> 标签：java, android, xml, xml-parsing, sax

我正在使用 SAX 解析器解析 XML 文档。我正在使用 characters 方法来捕获两个元素标签之间提供的数据，考虑到数据将以块的形式提供：

```
StringBuilder currentText = new StringBuilder();

...

public void characters(char ch[], int start, int length) {
        if (currentText!=null) {
            for (int i=start; i<start+length; i++) {
                currentText.append(ch[i]);
            } 
```

然后在我使用的 endElement 方法中：

```
public void endElement(String namespaceURI, String localName, String qName) throws SAXException {
        System.out.println("Current Text is " + currentText.toString());
        currentText.setLength(0); 
```

}

问题是当我查看日志时，currentText 没有捕获 XML 中一些较大数据字段的全部内容。

有谁知道为什么会发生这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:31:52.950

嗯，总有可能 currentText==null - 你可以消除这种可能性，我们不能。

请注意，执行追加的字符循环非常低效：您可以使用

公共 StringBuilder 附加（char str[]，int offset，int len）

您可能会丢失一些向 ignorableWhitespace 回调报告的空格，但我想如果只是缺少空格，您会告诉我们的。

抱歉，不能再推荐了。遵循我祖母的座右铭：如果您正在寻找某样东西却找不到，那意味着您找错了地方；所以看看别的地方。

# php - 格式错误的访问令牌

> ID：10516559
> 
> 赞同：2
> 
> 时间：2012-05-09T12:53:19.867
> 
> 标签：php, facebook, facebook-graph-api, facebook-authentication, facebook-access-token

在我的应用程序中，我使用 facebook accesstoken 向用户粉丝页面墙发布消息。现在，在发布时出现错误，例如

`Malformed access token`

我能够阅读粉丝页面墙上的帖子。但我不能张贴到墙上。我正在使用“Curl”发布。

这是我的代码：

```
<!-- language: lang-php -->

$post_url       = 'https://graph.facebook.com/pageid/feed';
    $data['access_token']   = 'XYZXYZXYZXYZXYZXYZXYZ ';
    $ch             = curl_init();
    curl_setopt($ch, CURLOPT_URL, $post_url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $return                 = curl_exec($ch);
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:14:06.347

检查您的数据库在保存时是否没有切断 access_token 字符串。我曾经在 facebook 上遇到过这个问题。您使用的是 varchar(xx) 吗？

# javascript - 如何绑定谷歌地图 geocoder.geocode() 回调函数

> ID：10516561
> 
> 赞同：3
> 
> 时间：2012-05-09T12:53:41.140
> 
> 标签：javascript, google-maps, backbone.js

我有一个视图，其中包含可通过视图范围内的*this.map访问的谷歌地图。*世界上一切都很好。

接下来我想通过我视图中的事件来更新地图位置。为此，我接受文本输入，使用 google.maps.Geocoder.geocode()，然后通过以下方式更新位置：

setMapLocation：函数（位置）{

```
 _.bind(this.setMapLocationCallback, this);

    console.log(this);

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({'address': location}, this.setMapLocationCallback);

}, 
```

此处的*console.log(this)*向我展示了视图的范围，并且*this.map*可以正确访问。请注意，我在这里明确地将回调绑定到 this。这是回调：

```
setMapLocationCallback: function (results, status) {

    console.log('this in the callback');
    console.log(this);

    if (status == google.maps.GeocoderStatus.OK) {
        this.map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: this.map,
            position: results[0].geometry.location
        });
        this.mapCanvas.css({visibility: 'visibile'});
    } else {
        this.mapCanvas.css({visibility: 'hidden'});
    }
}, 
```

问题是，在回调*console.log(this)内部，**即使我将它明确地绑定*到视图对象的this 范围，它也显示它*的*范围是Window 对象。

 *我需要在回调中访问 this.map，因为我可能在一个页面上拥有多个地图，并且需要区分我在说哪一个。

如何将此回调绑定到正确的范围？或者，有没有更好的方法来做到这一点？

我正在使用backbonejs 和underscorejs，但这应该是一个相当普遍的问题。

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:56:11.253

尝试改变

```
 geocoder.geocode({'address': location}, this.setMapLocationCallback); 
```

using `call()`，所以你可以改变`this`inside的范围`setMapLocationCallback`

```
 var _this = this;
 geocoder.geocode({'address': location}, function(result, status) {
     _this.setMapLocationCallback.call(_this, result, status);
 }); 
```

[关于 call() 函数的 MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)*

# asp.net-mvc-3 - 如何使用 nhibernate 更新记录

> ID：10516570
> 
> 赞同：0
> 
> 时间：2012-05-09T12:54:09.157
> 
> 标签：asp.net-mvc-3, nhibernate

嗨，我在 MVC3 中工作，对于数据库通信，我正在使用 NHIBERNATE
我在更新记录时遇到问题。

首先 session.SaveorUpdate 不起作用然后我尝试了以下操作，但这也不起作用:(

```
 public bool EditParentStudent(ParentStudent parentstudent)
        {
            log.Debug("Start");
            if (parentstudent == null)
            {
                throw new ArgumentNullException("parentstudent");
            }
            ISession session = DataAccessLayerHelper.OpenWriterSession();
            ITransaction transaction = session.BeginTransaction();
            bool saved = false;
            try
            {
                session.SaveOrUpdate(parentstudent);
                transaction.Commit();
                saved = true;
            }
            catch (SessionException ex)
            {
                if (transaction != null && transaction.IsActive)
                transaction.Rollback();
                log.Error(ex);
            }
            finally
            {
                if (transaction != null)
                    transaction.Dispose();

                if (session != null && session.IsConnected)
                    session.Close();
            }
            log.Debug("End");

            return saved;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:09:55.180

如果您的实体是持久的，则无需显式更新它。

```
using (var session = sessionFactory.OpenSesion())
using (var tx = session.BeginTransaction())
{
    // perform your insert here
    tx.Commit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:01:49.390

假设您的映射没问题，如果您使用的是 mvc3，那么您应该将代码放入控制器中，例如

```
public ActionResult Edit(ParentStudent parentstudent)
{
   //open session
   // open transaction
   //found existing data
   var data = session.Query<ParentStudent>().Where(x=>x.Id == parentstudent.Id).FirstOrDefault();
   session.SaveOrUpdate(data);
   transaction.Commit();
  //close transaction
  //close session

 return View();    
} 
```

也许最好将此代码放在 try catch 块中并捕获可能的异常，但我试图使其尽可能简单。

希望这可以帮助。

# silverlight - 最简单的应用程序需要哪些功能才能在市场上接受它？

> ID：10516577
> 
> 赞同：0
> 
> 时间：2012-05-09T12:54:41.863
> 
> 标签：silverlight, windows-phone-7, capability

就像主题：在最简单的应用程序中需要哪些功能才能在市场上接受它？我有一个简单的应用程序，例如有 1 个按钮和 1 个 textBlock 和 onClick 事件，它显示“Hello World！” 在文本框中。

我已经阅读了 msdn 上每个功能的规范，我这个简单的应用程序不需要它们中的任何一个。但是，如果我提交的申请带有空的 Capabilities 元素，我的申请是否会在市场上被接受？

感谢所有答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:00:45.050

*编辑 - 我阅读了标题和大部分问题，但没有阅读关于该部分的`Capabilities`部分*

由于问题是关于清单的“功能”部分......要记住的一件事是（至少现在），你在功能部分放什么并不重要。当您提交应用程序进行认证时，该过程会自动扫描您的应用程序并确定需要哪些功能，并将它们放入应用程序清单中。

*结束编辑*

我不确定这是问这个问题的最佳地点。您可能想尝试[http://create.msdn.com](http://create.msdn.com) - 不过，根据我的经验，它们不会因功能而失败，除非它违反了使用条款（例如侵犯版权、色情主题）。大多数情况下，他们希望看到：

*   该应用程序有效。
*   它不使用任何未经批准的 API
*   它不会崩溃
*   它正确处理后退按钮

他们还关注其他一些事情，例如：

*   启动时间（少于 5 秒），以及
*   内存使用情况。

还有很多其他的事情你也应该熟悉。

可以在[此处](http://msdn.microsoft.com/en-us/library/hh184843%28v=VS.92%29.aspx)找到的认证要求在他们的期望中非常明确，并且写得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:32.513

运行功能检测器并根据它对您的设置提出建议。

从这个链接[http://compiledexperience.com/blog/posts/windows-phone-7-capabilities](http://compiledexperience.com/blog/posts/windows-phone-7-capabilities)：

“Windows Phone 7 工具的最新更新（2010 年 10 月）提供了一个控制台应用程序，用于检测您的应用程序使用的实际功能，如果以后您想将 WMAppManifest.xml 编辑为此，该工具位于 Program Files\Microsoft SDKs\ Windows Phone\v7.0\Tools\CapDetect。”

Official instruction link for the Capabilities detector here: [http://msdn.microsoft.com/en-us/library/gg180730(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/gg180730(v=vs.92).aspx)

# delphi - 从“对等连接重置”Indy TCP 客户端恢复

> ID：10516579
> 
> 赞同：11
> 
> 时间：2012-05-09T12:54:46.713
> 
> 标签：delphi, tcp, indy

在这种情况下我应该如何恢复？

服务器崩溃，连接异常关闭。对几乎所有内容的调用都会导致“对等连接重置”异常。我似乎已经通过在 except 块内的 TIdTCPClient 对象上调用 Disconnect 来修复它，但它会导致一个具有相同消息的最终异常（我在第二个 try-except 块中捕获）。

这是 Indy10 和 Delphi XE2。

```
 try
      if not EcomSocket.Connected then EcomSocket.Connect();
    except
      on e: Exception do begin
        try
          EcomSocket.Disconnect();
        except
          MessageDlg('Connectivity to the server has been lost.', mtError, [mbOK], 0);
        end;
      end;
    end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T20:14:50.567

试试这个：

```
try 
  if not EcomSocket.Connected then EcomSocket.Connect(); 
except 
  try 
    EcomSocket.Disconnect(False); 
  except 
  end; 
  if EcomSocket.IOHandler <> nil then EcomSocket.IOHandler.InputBuffer.Clear; 
  MessageDlg('Connectivity to the server has been lost.', mtError, [mbOK], 0); 
end; 
```

# javascript - 谷歌地图地理编码器返回未找到

> ID：10516581
> 
> 赞同：0
> 
> 时间：2012-05-09T12:54:54.233
> 
> 标签：javascript, google-maps, google-maps-api-3, google-geocoding-api

我正在尝试使用地理编码器获取以下地址的坐标：

```
1945 Barton Street, Hamilton, ON, L8H2Y7 
```

在谷歌地图上搜索地址本身会找到地址： http: [//g.co/maps/5axb5](http://g.co/maps/5axb5)。使用地理编码网址也可以正常返回。[http://maps.googleapis.com/maps/api/geocode/json?address=1945+BARTON+STREET,+HAMILTON,+ON,+L8H2Y7&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=1945+BARTON+STREET,+HAMILTON,+ON,+L8H2Y7&sensor=false)

但是，当我使用 api（我的代码如下）时，它返回未找到。

![图片](../Images/ce20f3c67e7a0a432b3831556067dcb1.png)

代码：（这适用于我正在搜索的其他几个地址）

```
if (geocoder) {
    geocoder.geocode( {'address': fullAddress }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
        } else {
            alert("Geocoding failed: " + status + "  " + fullAddress);
        }
    });
} 
```

“实际”地址是“1945 Barton Street **East** , Hamilton, ON L8H2Y7, Canada”，但地图和直接 url 仍然可以很好地找到该地点，只有地理编码器没有。

关于为什么会发生这种情况的任何想法？

编辑：我想通了。这是一个合法找不到的不同地址（不是在谷歌地图上或使用地理编码器），但由于在地理编码器意识到找不到地址时请求是异步完成的，所以循环已经改变地址值到它可以找到的另一个地址。看来我还有一些工作要做。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:03:17.397

这很奇怪，因为它在我的现场演示中工作检查这个

[现场演示](http://jsfiddle.net/justelnegro/sVKTF/)

你有更多的代码吗？

**更新**

我用加号测试服务，即使没有加拿大，仍然有效

[这里是例子](http://jsfiddle.net/justelnegro/sVKTF/1/)

# javascript - 当浏览器开始实现 JavaScript 时，如何在支持旧版本一两个版本的浏览器的同时开始使用它们？

> ID：10516584
> 
> 赞同：2
> 
> 时间：2012-05-09T12:55:03.650
> 
> 标签：javascript, ecmascript-5

因此，让我们假设 Chrome 和 Firefox 开始`yield`分别在其 X 和 Y 版本中支持和其他 JavaScript.next 细节。

是否有任何推荐的策略（例如由 W3C 制定的）如何使用它们，同时让我们的 Web 应用程序也可以在 Chrome X-1 和 FF Y-1 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:30:42.847

我建议仅当大多数流行浏览器的所有稳定版本都支持它时才使用 HTML、CSS 或 JS 中的新功能（这些都是 >90%），但会通知没有这些功能的用户，例如“请升级您的浏览器到最新版本”。一些功能可以模拟，其他的 - 不能，所以如果可能的话，做它，但每次都尽量为用户做最好的。

# asp.net-mvc - 我在哪里可以看到 mvc3 中的配置文件

> ID：10516590
> 
> 赞同：0
> 
> 时间：2012-05-09T12:55:28.080
> 
> 标签：asp.net-mvc, asp.net-mvc-3, user-profile, asp.net-profiles

在 ASP.NET MVC 3 中有没有像 ASP.NET Configuration 这样的地方，您可以在其中查看用户的配置文件信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:10:52.290

MVC 没有内置任何东西来查看应用程序或系统用户。你必须自己动手。

另外，请清楚您是指应用程序用户还是系统用户。 [http://ayende.com/blog/121857/system-users-and-application-users](http://ayende.com/blog/121857/system-users-and-application-users)

# php - 如何在网页上加载大量 php 生成的图像

> ID：10516592
> 
> 赞同：1
> 
> 时间：2012-05-09T12:55:39.487
> 
> 标签：php, image, http, http-headers, download

我有一个网站，所有页面里面都有很多图片。每个图像都是由 PHP 动态生成的（我的意思是 img 标签的 src="" 属性类似于 "/image.php?id=4553"）。

我正在正确控制缓存以加快加载相同图像的次数，并且加载单个图像所需的时间非常快。问题是前 5-6 个图像是在页面加载的同时加载的，其他的加载很多秒后（5-10-15 秒后）。Firebug 告诉我问题是由于浏览器为了限制与服务器的同时连接而执行的请求排队。

我在发送页面的 HTML 时尝试发送“Connection: Keep-Alive”标头，但这可能还不够！

有什么帮助吗？

我知道有 jQuery 插件，例如延迟加载，它们仅在图像在视口上可见时才加载图像。那将是一个不错的“解决方法”，但我想知道是否有任何适当的方法来控制这种类型的图像加载。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:05:24.783

Firebug 很好地总结了这个问题。浏览器一次只会`x`从一个域加载大量资源。`x`通常在 8 左右，尽管这可能因浏览器而异，并且可以由用户在其设置中更改。克服这个问题的唯一方法是让浏览器从不同的域（子域算作不同的域）下载资源，这将允许一次下载更多的资源。您可以通过使用 .htaccess 和 mod_rewrite 来让浏览器认为它是从不同域下载的，从而使您的图像从假冒的子域下载，这些子域实际上是从同一域下载的，从而可能实现这一点。这将允许您一次下载比分配的资源更多的资源。

# github - 在 Travis-CI 中重置内部版本号

> ID：10516598
> 
> 赞同：9
> 
> 时间：2012-05-09T12:56:03.860
> 
> 标签：github, continuous-integration, travis-ci

我将**Travis-CI**与**GitHub**一起使用。

我想知道是否可以**重置**内部**版本号**和/或删除相关的 Travis 页面。

我试图在 GitHub 上删除我的存储库，但这不会影响相关的 Travis 页面。即使我创建了一个新的 repo，与以前的名称相同，内部版本号从上一个开始，并且构建链接在 GitHub 上的 404 上。我知道这不是一个大问题，但我想保持我所有解决方案的一致性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-16T13:16:59.877

不幸的是，我们没有办法删除存储库或构建。如果有任何私人数据被泄露，您可以随时给我们发送电子邮件以删除日志。

我们正在研究一种归档存储库的方法，这基本上意味着它们将被隐藏，直到运行新的构建，有关更多信息，请参阅[问题](https://github.com/travis-ci/travis-ci/issues/987)。

# android - 应用程序在 wifi 中运行良好，但在 3g 中无法运行

> ID：10516600
> 
> 赞同：0
> 
> 时间：2012-05-09T12:56:06.817
> 
> 标签：android, wifi, 3g

我是一名新的 Android 开发人员，我正在开发一个显示来自 url 地址的图像的应用程序。它在 wifi 下工作正常，但在 3g 下不工作。这是代码：

```
private void downloadImage(String urlPar, boolean imageSuivant) {

        try {
            URL urlImage = new URL(urlPar);
            HttpURLConnection connection = (HttpURLConnection) urlImage.openConnection();
            InputStream inputStream = connection.getInputStream();
            bitmap = BitmapFactory.decodeStream(inputStream);
            image.setImageBitmap(bitmap);
            connection.disconnect();
            inputStream.close();
        } catch (MalformedURLException e) {
            if(imageSuivant==true)
                imageSuivante();
            else
                imagePrecedente();
            e.printStackTrace();
        } catch (IOException e) {
            if(imageSuivant==true)
                imageSuivante();
            else 
                imagePrecedente();
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:13:47.937

你能用 html 浏览器打开图片吗？如果不是，则无法从 Internet 访问 image-url，而只能从 wlan-intranet 访问。（即[http://192.168.117.18/myImage.jpg](http://192.168.117.18/myImage.jpg)无法从互联网（3G）访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:06:01.767

有几次我发现我的电话运营商不允许访问某些类型的文件。例如，我不可能从 3G 网络中获取存档文件 (.zip)，但它在 Wifi 中运行良好。也许你的问题是相似的。检查您的图像文件类型并尝试使用其他类型的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:19:54.777

尝试

```
 conn.setDoOutput(true);

    connection.setAllowUserInteraction(true); 
```

希望这会有所帮助

# haskell - 表示自动机的数据结构

> ID：10516603
> 
> 赞同：5
> 
> 时间：2012-05-09T12:56:20.537
> 
> 标签：haskell, data-structures, dfa

我目前正在尝试提出一种数据结构，以满足我想在 Haskell 中实现的两种自动机学习算法的需求：[RPNI](http://code.google.com/p/gitoolbox/wiki/RPNIDoc)和[EDSM](http://code.google.com/p/gitoolbox/wiki/EDSMDoc)。

直观地说，接近于 zippers 对树的东西将是完美的：这些算法是状态合并算法，它们保持对状态的某种关注（蓝色边缘），因此将受益于某种 zippers 快速到达有趣的点。但我有点迷失了，因为 DFA（确定性有限自动机）更像是一种图形结构而不是树状结构：转换可以让你回到结构中，这不太可能使拉链正常。

所以我的问题是：你将如何表示一个 DFA（或者至少是它的转换），以便你可以快速地操纵它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T15:00:25.230

让我从 Haskell 中自动机的通常不透明表示开始：

```
newtype Auto a b = Auto (a -> (b, Auto a b)) 
```

这表示一个函数，它接受一些输入并产生一些输出以及自身的新版本。为方便起见，它是一个类别和一个箭头。它也是一个应用函子家族。不幸的是，这种类型是不透明的。没有办法分析这个自动机的内部结构。但是，如果您将 opaque 函数替换为透明表达式类型，您应该得到可以分析和操作的自动机：

```
data Expr :: * -> * -> * where
    -- Stateless
    Id      :: Expr a a

    -- Combinators
    Connect :: Expr a b -> Expr b c -> Expr a c

    -- Stateful
    Counter :: (Enum b) => b -> Expr a b 
```

这使您可以访问计算的结构。它也是一个类别，但不是箭头。一旦它变成一个箭头，你在某处就有了不透明的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T14:57:46.337

您可以使用**图表**开始吗？我认为[fgl](http://hackage.haskell.org/package/fgl)包是 Haskell 平台的一部分。

否则，您可以尝试使用“派生（数据）”定义您自己的结构，并使用[“Scrap Your Zipper”](http://hackage.haskell.org/package/syz-0.2.0.0)库来获取 Zipper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T22:11:23.847

如果您不需要任何花哨的图形算法，您可以将您的 DFA 表示为`Map State State`. 这使您可以快速访问和操作。您还可以通过跟踪当前状态来获得焦点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T23:48:36.163

看看`regex-tdfa`包：[http ://hackage.haskell.org/package/regex-tdfa](http://hackage.haskell.org/package/regex-tdfa)

源代码非常复杂，但它是带有标记 DFA 的正则表达式的实现，针对性能进行了调整，因此它应该说明一些有效表示 DFA 的良好实践。

# c# - 在c#中将新元组插入到sql中

> ID：10516604
> 
> 赞同：0
> 
> 时间：2012-05-09T12:56:20.643
> 
> 标签：c#, asp.net, sql

我无法在我的表中插入一个新元组。它没有给出任何错误，我不知道为什么它不能正常工作。顺便说一句，TextBox3 有类似的东西：C:\Temp\Pic5.jpg。这是我的代码：

```
 protected void Button3_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\MYDB.mdf;Integrated Security=True;User Instance=True");
    byte[] data;

    try
    {
        data = System.IO.File.ReadAllBytes(@"" + TextBox3.Text);
        string val1 = "" + TextBox1.Text;
        string val2 = "" + TextBox2.Text;
        string val3 = "" + TextBox3.Text;
        SqlCommand cmd = new SqlCommand("Insert INTO Books (Book_Name,Author_Name,Image,In_Lib) VALUES (@BN,@AN,@DATA,@LIB)", con);
        cmd.Parameters.AddWithValue("@BN", val1);
        cmd.Parameters.AddWithValue("@AN", val2);
        cmd.Parameters.AddWithValue("@DATA", val3);
        cmd.Parameters.AddWithValue("@LIB", "YES");
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }

    catch (Exception err)
    {
        Console.WriteLine(err.Message);
    }
} 
```

asp部分

```
Book Name:&nbsp;&nbsp;&nbsp;
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<br />
Author Name:&nbsp;
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<br />
Image Name:&nbsp;&nbsp;
<asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
<br />
<asp:Button ID="Button3" runat="server" onclick="Button3_Click" Text="Submit" />
<br /> 
```

我的数据库是这样的：

*   书名 varchar(50)
*   Author_Name varchar(50)
*   图像图像
*   In_Lib varchar(50)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:08:54.383

由于您的`Image`列是 type `Image`，正确的参数值将是一个字节数组，而不是一个字符串。这可能会导致错误。如果您现在不添加图像，请忽略此参数或将其设置为`DBNull.Value`显式。

我假设您来自 Visual Basic 背景（否则没有对奇怪`"" + TextBox1.Text`结构的解释），所以作为旁注：传递给调用的值`AddWithValue`应该与数据库中的列类型匹配。我的意思是：将字符串传递给类型为参数的参数`int`可能会起作用，除非您通过`Hello`. 这样的错误有时很难找到，所以请：确保从一开始就匹配参数类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:11:27.757

您正在读取指定的文件，`TextBox3.Text`而`data`不是在任何地方使用它。此外，您正在将文本传递到`Image`字段中，您可能想要这样做

```
cmd.Parameters.AddWithValue("@DATA", data); 
```

代替

```
cmd.Parameters.AddWithValue("@DATA", val3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:04:42.450

我认为以下应该有效

尝试：

```
cmd.Parameters.Add("parameter_name", System.Data.SqlDbType.BigInt).Value = 1233; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:20:29.247

您的问题在图像中。在数据库中，您有数据类型为 Image 的数据库字段`Image`，并且您正在尝试存储字符串数据。

```
string val3 = "" + TextBox3.Text;
cmd.Parameters.AddWithValue("@DATA", val3); 
```

与`SqlDbType.Image`.

# java - Eclipse 格式化程序设置

> ID：10516606
> 
> 赞同：0
> 
> 时间：2012-05-09T12:56:32.113
> 
> 标签：java, eclipse, formatting, settings

任何人都可以分享他们的 eclipse 格式化程序设置文件或指向这样的文件，这将阻止我的 eclipse 执行以下操作：

当我按 ctrl+shift+F 格式化我的代码时，从这个字符串中 eclipse：

```
dayArrayList.add(new Day(WeekDay.SATURDAY)); 
```

以下字符串：

```
dayArrayList.  
            add(new Day  
                       (WeekDay.SATURDAY)); 
```

所以我只想将真正的 looooooooooong 代码字符串移到下一行（那些不适合 Eclipse 窗口的代码字符串），但 Eclipse 几乎对所有字符串都执行此操作。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:01:07.273

只需将最大线宽增加到 140 个字符？

以下[格式化程序](http://openflexo.org/developers/wp-content/uploads/2011/10/EclipseCodeFormatter.xml)执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:12:22.343

在 Eclipse 中，转到*Window->Preferences->Java->Code Style->Formatter*

然后创建一个新的配置文件，在 Line Weapping 选项卡中你有参数“*最大线宽*”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:12:49.853

您可以通过以下方式在 Eclipse 中设置最大线宽：

窗口 -> 首选项 -> Java -> 代码样式 -> 格式化程序 -> 编辑

在换行选项卡上，将默认值 80 更改为您的偏好。请注意，如果要更改默认配置文件，则必须另存为新配置文件。

# android - 设置视图高度会引发空指针异常

> ID：10516607
> 
> 赞同：0
> 
> 时间：2012-05-09T12:56:32.710
> 
> 标签：android, view, height

您好，我正在尝试设置视图高度，但它在第二行抛出空指针异常。

我实际上试图将标题添加到列表活动中。为此，我的代码是：

```
View header= (View)getLayoutInflater().inflate(R.layout.customheader, null);
getListView.addHeaderView(header);
header.getLayoutParams().height=(int)55; //This line is throwing a null pointer exception
setListAdapter(adapter);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LayoutParams params=new LayoutParams(-1, 55);
    View header= (View)getLayoutInflater().inflate(R.layout.customheader, null);
    getListView().addHeaderView(header);
    getListView().setCacheColorHint(0);
    getListView().setBackgroundResource(R.drawable.patterns);
    setListAdapter(new Settingsadapter(this, menu));
    header.setLayoutParams(params);
} 
```

异常：E/AndroidRuntime(504)：java.lang.ClassCastException：android.view.ViewGroup$LayoutParams

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:00:11.517

您正在夸大您的视图，但没有在任何地方添加它。要设置高度，视图需要在应用程序中。

如果您尝试检索现有布局的一部分，则需要执行以下操作：

```
View header = (View)findViewById(R.layout.customheader); 
header.getLayoutParams().height=55; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:24.920

确保在您的 customheader 中，高度为 0 或某些值不输入 wrapcontent、fillparent、matchparent 值...

```
LayoutParams params = new LayoutParams(urWidth, 55);
    View  header= (View)getLayoutInflater().inflate(R.layout.customheader, null);

    header.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T07:54:52.153

如果要将其作为标题添加到 listView 中，则需要 LayoutParams 为 AbsListView.LayoutParams

```
AbsListView.LayoutParams params = new AbsListView.LayoutParams(urWidth, 55);
View  header= (View)getLayoutInflater().inflate(R.layout.customheader, null);
header.setLayoutParams(params);
listView.addHeader(header); 
```

# scala - 我需要 sbt 0.11.2 来构建用于提升的 mongo auth 应用程序

> ID：10516610
> 
> 赞同：2
> 
> 时间：2012-05-09T12:56:41.543
> 
> 标签：scala, mongodb, lift, sbt

出于某种原因，在使用 mongodb-record auth 项目时，sbt 在 .11.3 上保释，在我看来，这是我可以从 git 站点下载的唯一版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T13:21:18.397

惯用的方法是将 sbt 版本指定`build.properties`为

```
sbt.version=0.11.2 
```

但由于 0.11.3 中的 group id由to[更改](https://github.com/harrah/xsbt/wiki/Changes)，sbt 无法解析旧版本。[但是您仍然可以从typesafe repo](http://repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbt/sbt-launch/)手动下载旧版本的启动器。`org.scala-tools.sbt``org.scala-sbt`

# .net - SendKeys.Send NullReferenceException

> ID：10516613
> 
> 赞同：3
> 
> 时间：2012-05-09T12:56:48.673
> 
> 标签：.net, vb.net, winforms, .net-4.0, sendkeys

我正在尝试将密钥发送到表单上的控件。但我得到一个 NullReferenceException ，我不知道为什么。代码几乎是基本的：

```
Private Sub Button19_Click(sender As System.Object, e As System.EventArgs) Handles Button19.Click
    DateTimePicker2.Focus() 'commenting out this line has no effect
    SendKeys.Send("{F4}") 'error thrown on this line
End Sub 
```

`object reference not set to an instance of an object`报告的错误是`Send`共享方法，因此不需要实例。

奇怪的是，如果我忽略该错误，它可以正常工作，并且 F4 被传递给控件。我知道 sendkeys 和 UAC 存在问题，但我认为这已经解决（我使用的是 4.0 框架）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:50:08.320

该调用没有引发异常，异常在 SendKeys.LoadSendMethodFromConfig() 中引发并在内部处理（因此，如果您在该调用周围放置一个 try/catch，您将看到用户代码中实际上没有捕获到异常） .

您在调试器中看到它是因为您将异常设置为在抛出任何异常时中断，无论它发生在哪里或是否已被处理。

我建议转到工具 > 选项 > 调试并选中“仅启用我的代码”旁边的框。

下面是抛出异常的方法的样子。请注意，它故意吞下所有异常：

```
 private static void LoadSendMethodFromConfig()
    { 
        if (!sendMethod.HasValue) 
        {
            sendMethod = SendMethodTypes.Default; 

            try
            {
                // read SendKeys value from config file, not case sensitive 
                string value = System.Configuration.ConfigurationManager.AppSettings.Get("SendKeys");

                if (value.Equals("JournalHook", StringComparison.OrdinalIgnoreCase)) 
                    sendMethod = SendMethodTypes.JournalHook;
                else if (value.Equals("SendInput", StringComparison.OrdinalIgnoreCase)) 
                    sendMethod = SendMethodTypes.SendInput;
            }
            catch {} // ignore any exceptions to keep existing SendKeys behavior
        } 
    } 
```

# mysql - 一个人如何在数据库中存储多个产品的“包”

> ID：10516614
> 
> 赞同：1
> 
> 时间：2012-05-09T12:56:49.707
> 
> 标签：mysql, database

我有一个提供电子商务服务的网站，基本上允许业内的卖家将他们的产品出售给客户。卖家选择他们希望销售的产品并设定价格。然后他们就放手了。

以简化的形式，我的数据库中有以下相关表用于存储产品和订单信息：

```
Product_Info
--------------------
ID (autonumber)
name
...

Order_Head
--------------------
ID (autonumber)
CustomerID
...

Order_Line
--------------------
ID (autonumber)
OrderHeadID
ProductID
... 
```

这对于客户选择任意数量的产品并将其添加到购物车的简化订单非常有用。但是，我现在面临添加卖家创建和管理的“包裹”的问题，其中卖家可以将多个产品组合成一个项目，并以低于单个项目总成本的价格出售。例如，如果橙子售价 15 美元，苹果售价 20 美元，那么包含 2 个橙子和 1 个苹果的包装可能只需 35 美元。

扭曲，以及现在让我受阻的部分是，我非常希望包能够包含其他包。例如，卖家可以制作包含 3 个橙子的“什锦橙子”包装。然后他们可以制作一个“什锦水果”包装，其中包含 2 个苹果和 1 个“什锦橙子”。

当我可以从产品表或包表中引用 ID 时如何在包中列出产品，以及如何在 order_line 表中记录产品，因为 productID 可以指向产品或包装。而且，当然，这需要以一种有效的方式进行设计，这样我们就不会对数据库服务器造成不必要的负担。

我主要是一名网络开发人员，以前在电子商务方面做得不多。任何人都可以提供一些关于一组适当的表和表修改以应用于数据库的方向吗？我不知道为什么，因为它看起来不应该那么复杂，但是这个让我卡住了。

作为参考，我使用的是 MySQL 5.1，连接到 ColdFusion MX 7（即将成为 9）。

## 编辑：

感谢您到目前为止的回复。我将花一点时间进一步考虑它们。同时，我想澄清订单流程是如何工作的，因为它似乎比我最初假设的更相关。

我的产品与Shutterfly 类似。摄影师张贴照片，客户可以购买照片。摄影师需要工具来设置所有定价，如果是专业拍摄，他们通常会提供套餐。履行由我的产品自动提交订单的实验室完成，但他们不了解定价、包装等。

摄影师还可以选择运行特价商品，为客户提供 x% 折扣或 BOGO 优惠，但我可以单独处理。现在我更关心的是一种有效且简单的方法来存储摄影师定义的包裹、客户购物时为包裹中的每个产品选择的图像（当前存储在 order_line 镜像表中）以及最终的订单详细信息，以便可以快速轻松地查询它们以进行显示和报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:01:38.907

创建一个附加表，其中列出了作为每个包的成员的项目，以及包中包含的数量。

桌子`Package_Items`

```
CREATE TABLE Package_Items (
  package_id INT NOT NULL 
  item_id INT NOT NULL,
  item_quantity INT NOT NULL DEFAULT 1,
  FOREIGN KEY (package_id) REFERENCES Product_Info (ID),
  FOREIGN KEY (item_id) REFERENCES Product_Info (ID)
  PRIMARY KEY (package_id, item_id)
); 
```

该`package_id`列引用了`Product_Info`主要包装项目所在的行。 `item_id`指其他属于包成员的项目。可以有多种`package_id, item_id`组合。

`Product_Info`使用此方法，您可以创建代表包的新行。将项目添加到包中所需要做的就是在`Package_Items`. 如果添加的一行`Package_Items`恰好也是一个包装产品本身，则不需要做额外的工作。

请注意不要将包添加到自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:32:22.433

这是一组棘手的要求，特别是因为您还没有告诉我们关于履行、或任何其他折扣方案，或者当客户从包裹中退回单件商品以获得退款时会发生什么......

Michael 的设计是一种很好的方式来存储您的产品提供的层次结构。

下一个问题是“你在哪里存储包裹的价格”——因为它不是所有产品的总和。我建议将价格存储在“package_items”表中。

然后你如何处理“order_line”表？你有三个选择：

*   添加带有价格的包裹（但不是构成包裹的物品），
*   以零价格添加包裹及其价格和构成包裹的物品，
*   添加具有正常价格的商品，以及包裹的折扣线。

如果完成订单的人知道包裹，您可以选择选项 1。但是，客户将他们的运输单与他们收到的产品进行比较，可能会感到困惑。

如果您想显示每个订单项，但坚持“套餐价格”，选项二允许您显示订单项；如果客户想要退货，您必须以某种离线方式计算出该物品的价值。

大多数超市收银台都使用选项 3——这也是一种向刚刚购买商品的顾客展示他们获得“奖励”折扣的好方法，因为他们的订单与包裹匹配。

如果订单商品有可能不会同时发货，您必须决定在发货单上打印什么 - 这在背面是一个巨大的痛苦，并且通常会影响条款和条件，并且（在欧洲）税收。

如果您计划提供其他类型的折扣（例如“消费 x，免费获得 y”，或“超过 x 的订单 10% 折扣”），您需要非常明确地定义这一点，因为折扣相互叠加的方式经常会令人不安零售商——这就是为什么他们通常在打包交易中提供“最便宜的免费商品”。

# javascript - 使用 Javascript 捕获呈现的 HTML 页面

> ID：10516617
> 
> 赞同：1
> 
> 时间：2012-05-09T12:56:56.193
> 
> 标签：javascript, html, bitmap, capture

是否可以从 Javascript 捕获呈现的 HTML 页面。

*   我希望能够创建 HTML 页面的“小地图”以进行快速导航。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:59:59.293

看看[html2canvas](http://html2canvas.hertzen.com) 它做了一些好事，即使它并不完美

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:59:29.677

您可以使用：

```
document.body.innerHTML 
```

这是整个“渲染”（即实时/DOM 完整）HTML，但我不确定这是否是您想要的。

您最好定义要创建地图的内容，例如标题等，然后您可以使用`getElementsByTagName('h1')`（例如）抓取页面上的所有 H1。

如果您正在谈论由浏览器呈现的实际图像，您可以查看[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)及其`wkhtmltoimage`对应物，它将 HTML（或网址）作为输入并将其转换为文本完整的 PDF，或静态图像。之前在大型项目中使用过这个简洁的应用程序，所以它绝对可靠，还使用 ​​WebKit，因此与 CSS3/JS 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:47:39.687

wkhtmltoimage 仅用于静态 html 页面。如果您有用户选择或带有某些绘图的画布（第一次渲染时的默认值除外），wkhtmltoimage 将无济于事。

# android - BroadcastEvent，报警功能android

> ID：10516619
> 
> 赞同：1
> 
> 时间：2012-05-09T12:56:57.540
> 
> 标签：android, alarm, boot

我遇到了一个障碍，启动后我无法正确设置警报。

```
public void onReceive(Context context, Intent intent) {

    if(Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())){
        if(fm.getAlarmBool()){
            time = fm.getAlarmTimeLong();
            reminder.startAlarm(time);
        }
    } 
```

这是我想在它启动后运行的方法。我在 android 清单中添加了权限，但我无法让它工作。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:17:39.223

你应该这样做

```
public class BootReceiver extends BroadcastReceiver {

Context context;
 @Override
 public void onReceive(Context context, Intent intent) {         
     context.startService(new Intent(context, NotificationService.class));      
 } 
```

}

在清单中

```
<receiver  android:process=":remote" android:name="BootReceiver">    
         <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>    
    </receiver> 
```

因此，在您的服务中收集所有提醒并重新安排它们。为此，您可以将其存储在共享首选项或数据库中以进行持久存储

# jquery-ui - 同一页面上的 jQuery 和 jQuery UI

> ID：10516623
> 
> 赞同：0
> 
> 时间：2012-05-09T12:57:13.667
> 
> 标签：jquery-ui, jquery

我正在开发另一个开发人员开始的项目。他们将 jQuery UI 用于一些效果，我不确定如何将 jQuery 用于我的 AJAX 函数并且仍然具有 jQuery UI 的功能。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:59:46.680

jQuery UI 依赖于 jQuery，因此假设 jQuery UI 小部件/效果确实在工作，您可以继续并开始使用 ajax API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:11:00.607

正如其他人所说，jQuery UI 使用 jQuery，因此 jQuery 是一个依赖项。这也意味着，它需要包含在 jQuery***之后***才能使 jQuery UI 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:00:14.310

jQueryUI 使用 jQuery。换句话说，jQuery 是 jQueryUI 的依赖项。您将需要包含两个 javascript 文件

# c++ - 返回值是部分而不是完整的

> ID：10516630
> 
> 赞同：0
> 
> 时间：2012-05-09T12:57:35.117
> 
> 标签：c++

我有一个`file.txt`我正在阅读每一行的地方，我不想处理这些行。该文件包含 IP、昵称和一些值。我只想将 IP 地址保存到另一个文件中，但在此之前我正在检查我的函数 ( `char* get_ip(char arr[])`) 返回的结果。
问题是返回值，它只向我展示了一部分，例如：

普通IP地址：`66.55.44.33`
我的回报：`66.55.44`

编辑：

有2个功能：`main()`和`get_ip()`

```
//<----------- FUNCTION get_ip() -------------------- ><br />

    char* get_ip(char buff[]){

    char line[32];

    for(int i = 0; i < sizeof(buff); i++){
        if(buff[i] == '.'){
            if(isdigit(buff[i + 1])){
                i = 0;
                while(buff[i] != ' '){
                    line[i] = buff[i];
                    i++;
                }
                break;
            }
        }
    }

    if(isdigit(line[0]))
        return line;
    else
        return 0;
}

//<------------ FUNCTION int main() --------------------->

    int main(){
    // variable, opening folder etc.

    char buff[64], *line;

    while(!feof(fph)){
        fgets(buff, 63, fph);
        line = get_ip(buff);

        if(line)
            cout << line << "\n";
    }

    } // main() func. end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:06:33.667

当前的预期行为未定义，因为`line`是局部变量，您不允许从函数返回。如果您希望它与您的缓冲区分开，`buff`则应使用 malloc 而不是声明`char line[32];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:09:58.173

可能存在一个问题：

```
for(int i = 0; i < sizeof(buff); i++){ 
```

特别是声明

```
sizeof(buff) 
```

虽然您可能期望它返回 64，即缓冲区的大小，但您忘记了 C 数组几乎总是衰减为指针，所以这实际上返回 4（如果 32 位）或 8（如果 64 位），的大小`char *`。

您需要显式传递一个大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:10:01.363

您应该显示更多代码：至少您的功能签名。

您`buff`在堆栈上分配，然后返回它。

但是数组是`never`按值返回的，它们被衰减为指向第一个元素的指针。这意味着，当您像这样使用您的功能时：

```
char[32] myFunction(...);

char ip[32] = myFunction(...); 
```

您的`ip`数组使用指向数组（`line`）的指针进行初始化，该指针在返回时超出范围后被销毁`myFunction`！

这意味着，它包含一个垃圾，您很幸运，您甚至可以从中获得部分结果（尽管如果它是完整的垃圾，您可能会更容易跟踪问题）。

可能的补救措施是使用`std::string`（我推荐）或将指向预分配数组的指针传递给`myFunction`（C 风格的解决方案）：

```
char[32] ip;

myFunction(ip, ...); 
```

# silverlight - Silverlight 5 无法在某些打印机上打印

> ID：10516631
> 
> 赞同：12
> 
> 时间：2012-05-09T12:57:36.947
> 
> 标签：silverlight, printing, silverlight-5.0

我有一个 Silverlight 5 OOB 应用程序（具有提升的权限），它刚刚部署到我们的一些用户。其中一些用户报告说打印出来的是空白或非常模糊。这些打印机确实可以正确打印 Word 文档，但我无法在我自己的打印机上重现该问题。

所有用户都使用 Windows XP SP3 32 位，我正在开发 Win7 64 位。

以前有人见过这个问题吗？或者任何想法可能导致这种情况？

非常感谢帮助。

非常感谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:25:24.183

我应该得到解决方案可能对你有用..................................................

首先，我创建了一个新的 PrintDocument，并为其 PrintPage 事件连接了一些处理程序。

```
mobjPrintDocument = New PrintDocument
RemoveHandler mobjPrintDocument.PrintPage, AddressOf Print_Report
AddHandler mobjPrintDocument.PrintPage, AddressOf Print_Report 
```

然后我们可以在需要打印的任何时候调用 PrintDocument 上的 PrintBitmap 函数。当用户单击“打印”按钮时，我正在执行此操作。

```
Private Sub xbtnPrint_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    mintPageIndex = 0
    mobjPrintDocument.PrintBitmap(FileName)
  End Sub 
```

现在是重要的部分。我们可以通过挂钩 PrintPage 事件来劫持目标内容（如上所述）。我可以将 e.PageVisual 设置为任何可视 xaml 元素，PrintBitmap 将处理它。在这里，我使用 GetPages 函数并循环以确保打印每一页（一个 pdfviewer 元素）。但是，您可以将它指向我所说的任何视觉元素。

```
Private Sub Print_Report(sender As System.Object, e As PrintPageEventArgs)
    e.PageVisual = xobjReportViewer.GetPages(mintPageIndex)
    mintPageIndex += 1
    e.HasMorePages = mintPageIndex < xobjReportViewer.GetPages.Count
  End Sub 
```

e.HasMorePages 允许您强制触发此事件，直到您完成。

希望这对某人有帮助。借助 Silverlight 5 和 Post-Script 打印机支持，许多具有 PostScript 仿真器的打印机可能不兼容，但也不会默认为位图打印。此解决方法解决了该问题，使 LOB 类型应用程序中的打印更加稳定。

# java - 使用 iText 将 jcomponent 导出为 PDF

> ID：10516633
> 
> 赞同：1
> 
> 时间：2012-05-09T12:57:38.063
> 
> 标签：java, swing, pdf, itext, jcomponent

我想将我的 jcomponent（绘制大量文本和线条的自定义 paintcomponent 方法、小图像（一种小单词应用程序））导出到 PDF

我的组件是“账单”

我为此使用的方法（有效，但不推荐使用某些方法）是：

```
 com.itextpdf.text.Rectangle r = new com.itextpdf.text.Rectangle(0,0,bill.getWidth(),bill.getHeight());

       Document document = new Document(r);

       try {
          PdfWriter writer;
          writer = PdfWriter.getInstance(document, new FileOutputStream(f));
          document.open();
          PdfContentByte cb = writer.getDirectContent();
          PdfTemplate tp = cb.createTemplate(bill.getWidth(), bill.getHeight());
          Graphics2D g2d = tp.createGraphics(bill.getWidth(), bill.getHeight(), new DefaultFontMapper());

          bill.addNotify();
          bill.validate();

          bill.paint(g2d);
          g2d.dispose();

          cb.addTemplate(tp, 0, 0);
       }
       catch(Exception e) {
          e.printStackTrace();
       }

       document.close(); 
```

它工作得很好，但有两个大问题：不推荐使用 tp.createGraphics 方法（因此可能有更好的解决方案），如果 swing 组件非常大，它只会打印在 PDF 的一页上。

所以我需要一个“分页器”来帮助我创建 A4 大小的页面以方便打印。当jcomponent非常大时当然没有缓冲区溢出......

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:58:43.540

执行此操作的“官方 Java”方法是让您的 JComponent 实现 Pageable 和/或 Printable，以便它知道如何将自身的一部分绘制到页面上（由图形表示）。通常，`in the Printable.print(Graphics graphics, PageFormat pageFormat, int pageIndex)`方法，您将通过一些常数 Y 因子乘以 pageIndex 来转换图形，考虑到标题、间隔等...

这样它也可以打印到纸上。

PDF 代码与您所拥有的非常接近，您只需每页执行一次。您可以[在我的博客上找到代码](http://flyingspaniel.blogspot.com/2012/04/from-javaawtprintpageable-to-pdf.html)，该代码基于[Gert-Jan Schouten 的早期工作](http://www.zenbi.co.uk/2011/09/04/printable-to-pdf/)

# java - java去除特殊字符的策略建议

> ID：10516634
> 
> 赞同：0
> 
> 时间：2012-05-09T12:57:48.753
> 
> 标签：java, string, special-characters

我创建了一个 Java 应用程序，它解析文本文件以提取正在加载到数据表的字段。我们发现了一些异常处理，其中表不能接受特殊字符，特别是`Â`等等。

当我查看这些字符时，这些字符在输入文件中显示为空格，但 Java 对它们的解释不同。我怀疑这是一个解释不同的字符代码。

我的问题是：为了过滤掉这些字符，有什么方法可以生成 Java 所见内容的列表？我正在考虑打印 CHAR 和字符代码，如果可能的话，打印字符 ~set~（ASCII、ANSI、UTF-8 等）。由此，我可以在结束文件中为字符替换一个空格并解决我的问题。

有没有我没有看到的更简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:05:27.083

试试解码说，UTF8？

```
public static byte[] stringToByteArray(String s)
    throws UnsupportedEncodingException {
    return s.getBytes("UTF-8");
} 
```

或者像“iso-8859-1”之类的其他东西并将该字节数组转换为字符串并尝试打印它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:06:59.877

听起来您正在跨越字符集，或者您的输入文件中有某种控制字符序列。您应该将精力集中在这方面，并确保您使用正确的字符集。我能想到的汇总文件中字符列表的唯一方法是数组并循环文件。

如果您真的想删除所有这些内容，请查看此线程

[排除特殊字符的正则表达式](https://stackoverflow.com/questions/756567/regular-expression-for-excluding-special-characters)

它解释了如何使用正则表达式将字符列入白名单和黑名单。

# c# - c# mvc3 razor - 在模型中匹配列表项时替代 foreach 循环

> ID：10516636
> 
> 赞同：1
> 
> 时间：2012-05-09T12:57:54.390
> 
> 标签：c#, asp.net-mvc-3, razor

我是 MVC / Razor 的新手，我需要一些指导。我正在尝试创建从 MongoDB 数据库中检索日期的培训日历。我在下面的解决方案有效，但是看着它，我知道它可以更有效地完成，并且想要一些指针。

这是我页面上的一个 div 的代码，它是一个月中的一天......我在一个页面上有四个月。`Model.TrainingDays`是一个`List<TrainingEvent> TEvent`。实例具有`TrainingEvent`以下属性：

```
string CssClass
string EventName 
```

这是我的剃刀代码（`_day`我们正在渲染的月份中的哪一天：

```
<div class="day">
    <div class="dayBox">@_dayNumber.ToString("00") <span class="black">@_day.ToString("ddd")</span></div>

    @foreach (var item in Model.TrainingDays)
    {
        if (_day.Date == item.Date.Date)
        {
            string eventCls = "eDay " + item.TEvent.CssClass;
            <div class="@eventCls">@item.TEvent.EventName</div>
            break;
        }
    }
</div> 
```

如果日期与我们`TrainingEvent`所在的当前`_day`div 匹配，则添加 Event。如果我有很多事件，foreach 循环并不是最好的方法。我***应该***怎么做？这也是我的第一篇文章，所以任何关于我如何提出问题的建议都值得赞赏。非常感谢！蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:03:43.483

尝试这样的事情：

```
<div class="day">
    <div class="dayBox">@_dayNumber.ToString("00") <span class="black">@_day.ToString("ddd")</span></div>

    @foreach (var item in Model.TrainingDays.Where( td => td.Date.Date == _day.Date ))
    {
            string eventCls = "eDay " + item.TEvent.CssClass;
            <div class="@eventCls">@item.TEvent.EventName</div>
            break;
    }
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:12:28.167

您可以按日期对 TrainingDays 进行分组，然后如果您真的担心性能下降，则将它们转换为字典。我不确定它的 Razor 语法，但你可以在普通的 C# 中执行此操作：

```
var trainingDaysByDay = Model.TrainingDays
    .GroupBy(td => td.Date.Date)
    .ToDictionary(g => g.Key); 
```

然后，您可以通过以下方式查找当天的项目：

```
foreach(var item in trainingDaysByDay[_day.Date])
{
    //...
} 
```

这样，您只需遍历整个 TrainingDays 集合一次，并且每天您只接触您需要的特定对象。但是，除非您拥有庞大的数据集，否则差异将可以忽略不计。

# delphi - 将 GLScene 安装到 RAD Studio 2010 时，如何解决致命的编译器错误？

> ID：10516638
> 
> 赞同：7
> 
> 时间：2012-05-09T12:58:13.677
> 
> 标签：delphi, c++builder, glscene

我正在尝试**将 GLScene 安装到 RAD Studio 2010**中，目的是从主要是 C++ 项目中使用它。我下载了[最新的快照（5991，2011 年 11 月）](http://sourceforge.net/projects/glscene/files/SVN%20Snapshots/)，并一直在尝试编译和安装两个主要包： `GLScene_DesignTime`和`GLScene_RunTime`. 我什至没有尝试过其他一些库（CUDA 等），我只想让基本包运行。

我遇到了许多问题，其中一个我无法解决，我正在寻求任何**成功安装 GLScene**的 SO 上的人的帮助，或者可能知道**如何解决这些 Delphi 编译器错误。**

## 第一个问题（解决了？）

编译时，一些文件给出了以下错误：

```
[DCC Warning] GLSelection.pas(297): W1025 Unsupported language feature: 'abstract class method' 
```

这是由方法声明引起的，例如：

```
TGLBaseSelectTechnique = class
  public
    class function IsSupported: Boolean; virtual; abstract; 
```

Delphi 2010 似乎不支持虚拟抽象类方法，我已经通过删除 ' `abstract`' 并提供一个虚拟实现来解决它，例如只返回`false`.

## 第二个问题（未解决）——Delphi编译器致命错误

我现在遇到两个更严重的错误。编译时，编译器会失败，如下所示：

```
[DCC Fatal Error] Exception EAccessViolation: Access violation at address 05AE8ED9 in module 'dcc140.dll'. Read of address 00000003
[DCC Error] Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED)) 
```

它没有说是什么文件导致了这个，但我*认为*它是由`Spline.pas`. 偶尔而不是经常，我得到这个：

```
[DCC Fatal Error] Spline.pas(1): F2084 Internal Error: AV062D8ED9-R00000003-0 
```

这表明`Spline.pas`，并且我认为第一个错误也可能与文件有关，因为在获得第一个错误后，如果我再清理项目，清理将失败，说它无法删除`Spline.hpp`。（我必须关闭并重新打开 IDE。）`Spline.hpp`仅包含以下内容：

```
// CodeGear C++Builder
// Copyright (c) 1995, 2009 by Embarcadero Technologies, Inc.
// All rights reserved

// (DO NOT EDIT: machine generated header) 'Spline.pas' rev: 21.00

#ifndef SplineHPP
#define SplineHPP

#pragma delphiheader begin
#pragma option push
#pragma option -w-      // All warnings off
#pragma option -Vx      // Zero-length empty class member functions
#pragma pack(push,8)
#include <System.hpp>   // Pascal unit
#include <Sysinit.hpp>  // Pascal unit 
```

它在那里停止。在我看来，尝试生成 HPP 文件时它失败了。

**我总是遇到这两个失败之一。** 第二个是我可以绑定到特定文件的唯一一个；第一个在项目进行到一半时失败了，但我看不到它失败时的位置。我正在从 IDE 内部编译。

我看过了`Spline.pas`，它看起来很基本的代码 - 我根本看不到任何不寻常的东西。你可以[在这里找到它](http://glscene.svn.sourceforge.net/viewvc/glscene/trunk/Source/Base/Spline.pas?revision=6065&view=markup)，显然该文件[已经七年没有被触及](http://glscene.svn.sourceforge.net/viewvc/glscene/trunk/Source/Base/)......所以我认为它应该编译:)

如果我更改项目设置使其不生成标头，则可以正常编译。（只生成 obj 文件，以及不包含“标题”的任何其他设置，都可以正常工作。）但这对我来说不是一个好的解决方法 - 毕竟，我需要从 C++ Builder 中使用它，所以我的正常设置是“生成所有 C++ Builder 文件”。至少，我需要 HPP 和 OBJ 文件。

这里有人在最新版本的 C++ Builder 中使用过 GLScene 吗？你遇到过类似的问题吗？知道如何解决这个问题吗？

我在用：

*   RAD Studio 2010（完全修补和最新；安装了 DDevExtensions 和 IDEFixPack。）
*   2011 年 11 月快照；我也尝试了 2011 年 3 月的快照，但遇到了同样的问题。 [链接到这里的快照](http://sourceforge.net/projects/glscene/files/SVN%20Snapshots/)。
*   Delphi 2010 软件包*仅*通过更改链接器输出以生成 C++ Builder 文件进行修改；还有 BCB 6 包。两者都给出相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:21:09.977

**编辑：** GLScene 现在兼容 RAD Studio XE3（包括 C++ Builder。）

> 现在 GLScene 与 Embarcadero RAD Studio C++Builder XE3 在设计和运行时模式下完全兼容。
> 
> 您可以从[http://yadi.sk/d/o1QGI2KA10MK1](http://yadi.sk/d/o1QGI2KA10MK1) (95Mb)下载它

- 来自[Pal Wassail 在 Embarcadero 论坛主题上的帖子](https://forums.embarcadero.com/message.jspa?messageID=514233#514233)。

* * *

> {quote:title=David M 写道：}{quote} 嗨，
> 
> 我正在尝试将 GLScene 安装到 RAD Studio... David

这里是 Delphi XE3 标头生成器的 EMB 开发人员更简单的测试 -

1.创建一个VCL Form Application 2.在Unit1.pas界面部分添加

```
type
 TVector3f = array[0..2] of single;
 TVector4f = array[0..3] of single;

 function VectorAdd(const v : TVector3f; const f : Single) : TVector3f; overload;
 function VectorAdd(const v : TVector4f; const f : Single) : TVector4f; overload; 
```

3.添加实现部分

```
function VectorAdd(const v : TVector3f; const f : Single) : TVector3f;
begin
  Result[0]:=v[0]+f;
  Result[1]:=v[1]+f;
  Result[2]:=v[2]+f;
end;

function VectorAdd(const v : TVector4f; const f : Single) : TVector4f;
begin
   Result[0]:=v[0]+f;
   Result[1]:=v[1]+f;
   Result[2]:=v[2]+f;
   Result[3]:=v[3]+f;
end; 
```

1.  设置 Delphi Compiler 选项“Generate C++ .objs, headers, namespaces, export”</li>
2.  构建项目
3.  然后 Delphi XE3 编译器生成错误的头文件 Unit1.hpp，其中包含以下行：

    extern PACKAGE TVector3f __fastcall VectorAdd (float const *v, const float f)/*重载 */; extern PACKAGE TVector4f __fastcall VectorAdd (float const *v, const float f)/*重载 */;

4.  如果现在您尝试在 my.cbproj 中使用此头文件 Unit1.hpp，则会收到致命错误：“E2238 Multiple declarations in ...”</p>

是的，如果您将向量数组类型更改为记录：

```
 TVector3f = record
    case boolean of
      true  : (Coord: array[0..2] of single);
      false : (X,Y,Z: single);
end; 
```

*   那么问题就可以解决了，因为在这种情况下，Delphi 编译器会生成

    extern PACKAGE Vectortypes::TVector3f __fastcall VectorAdd (const Vectortypes::TVector3f &v, const float f)/* 重载 */; extern PACKAGE Vectortypes::TVector4f __fastcall VectorAdd (const Vectortypes::TVector4f &v, const float f)/* 重载 */;

并且您可以构建您的 C++Builder VCL 应用程序而不会出现“多重声明”错误。它是在 2007 年为旧 GLScene 版本完成的，但现在您需要在新库中重写部分代码，从 VectorGeometry.pas 模块开始。

1.  还有第二种方法可以修复这种自动头文件的错误——在生成 C/C++ 头文件、命名空间和包选项中改进 Delphi 编译器。但它掌握在 EMB 开发人员手中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:05:15.850

这是我的做法：

*   [下载并解压此 ZIP 文件](http://www.simonjstuart.com/downloads/GLScenePkg_2007_XE2.zip)（直接进入 GLScene 的根文件夹，允许根据需要覆盖）
*   加载适当的 RAD Studio 版本（2007 到 XE2）并打开文件 *GLScene_Group.groupproj*（其中*= 你的 RAD Studio 版本）*
**   按组顺序构建/安装每个包*

 *我已经仔细组装了这些固定包，以确保它们从 2007 年到 XE2 都能正常安装和运行。一些包（在每组的底部）需要额外的依赖才能运行（例如 Python 包），因此请注意这些。

**我已经测试并确认这些只能在 RAD Studio 2007 到 XE2 上工作**。

不要忘记将*\Source*文件夹（和所有子文件夹）添加到搜索路径（根据需要用于 IDE 本身或单个项目），否则使用 GLScene 组件的项目将无法编译并抱怨缺少单元。

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T13:13:44.037

不是 RAD Studio 2009，而是 BCB6 中的旧 GLScene 安装，她运行良好。但是在 RAD Studio XE/XE2/XE3 中安装后的当前版本根本不起作用。似乎主要问题隐藏在 Vectorgeometry.pas 中过程的重载机制中，因此 Delphi 编译器（使用所有 C++ 文件和包的输出选项）在 Vectorgeometry.hpp 和其他中创建重合字符串。因此，您在 C++Builder 面板中有可视组件，但您的应用程序在构建过程中失败并出现错误。它必须由 GLScene 开发人员在 .pas 文件中修复。

当您尝试在 C++Builder XE3 下使用 GLScene 构建应用程序时，您将在 glcrossplatform.hpp、vectorgeometry.hpp 等中遇到超过 50 个 BCC32 错误。有一种方法可以自行决定修复库。制作 GLScene 目录的新副本。在 GLCrossPlatform.pas 中将程序 RGB 重命名为 GLRGB（它的工作！）。然后在 VectorGeometry.pas 和许多其他源代码文件中更改所有重载过程，参数名称略有不同，因此在 Delphi 选项输出 C++（包含包的最后一个选项）之后，您不应在 .hpp 文件中遇到重合过程。然后重建所有 GLScene 包。在过程结束时，我希望它应该适用于 C++Builder XE3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T15:22:00.893

我有完全相同的错误。

@第二个问题

转到“spline.pas”并更改

`TCubicSplineMatrix = array of array[0..3] of Single;`

至

`TCubicSplineMatrixEx = array[0..3] of Single;`

`TCubicSplineMatrix = array of TCubicSplineMatrixEx;`

现在“Rad Studio 2009”可以为 C++Builder 编译和安装 GLScene。我可以启动一个新的 C++Builder VCL 应用程序并从工具箱中选择 GLScene 组件并放入我的 VCL 表单。

我认为，这是您基本问题的解决方案，但不幸的是我无法成功编译我的 VCL 项目。我在 glcrossplatform.hpp 和 vectorgeometry.hpp 中得到超过 50 个 BCC32 错误。如果有人可以在这里提供帮助，那就太好了。

@你的第一个问题

我也收到了这个警告，但我没有任何改变。直接无视？！*

# objective-c - 删除 Omniture 实例的 pageName 变量

> ID：10516644
> 
> 赞同：0
> 
> 时间：2012-05-09T12:58:27.993
> 
> 标签：objective-c, ios, analytics, adobe-analytics

我正在使用两个`AppMeasurement`用于发送请求的实例，

1.  有`pageName`变量和
2.  没有`pageName`变量。

在我的所有页面的应用程序中，在`viewDidAppear`方法内部，我发送了一个带有变量的**omniture**请求，`pageName`例如follow，

```
AppMeasurement * s1;    
s1 = [appDelegate getAppMeasurementNormalInstance];
s1.pageName = @"Main Page";
s1.products = productsVariable;
s1.events = @"event6";
[s1 track]; 
```

当我点击该页面的一个按钮时，我发送一个没有变量的**omniture**请求，`pageName`如跟随（在发送上述请求之后），

```
AppMeasurement * s2;    
s2 = [appDelegate getAppMeasurementClickthroughInstance];

s2.products = productsVariable;
s2.events=@"event1";
[s2 track]; 
```

但问题是当我通过实例发送**omniture**请求时`s2`，它包含的`pageName`变量等于s1实例的`pageName`变量，如follow，

```
ndh=1
t=9/4/2012 18:14:56 3 -330
vid= 0E5DA96B0F97304E870BB6C123456789
ce=UTF-8
pageName=Main Page
cc=USD
events=event1
products=;;;;;evar3=266801;evar5=12345;evar15=;evar36=1;
s=768x1024
c=24
AQE=1 
```

所以我想在没有`pageName`变量的情况下发送该请求。

我试过了`s2.pageName = nil;`。但在那之后，**omniture 会**为 pageName 变量生成一个值。

所以需要有人帮助解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:14:00.903

自定义链接跟踪图像请求总是在服务器端剥离 pageName 变量。我对代码语法不太熟悉，但根据上面的模式，它看起来像这样：

```
AppMeasurement * s2;    
s2 = [appDelegate getAppMeasurementClickthroughInstance];

s2.products = productsVariable;
s2.events=@"event1";
s2.linkTrackVars=@"productsVariable,events";
s2.linkTrackEvents=@"event1";
[s2 trackLink]; 
```

可以在此处找到有关链接跟踪的更多信息： [http ://microsite.omniture.com/t2/help/en_US/whitepapers/link_tracking/index.html#Link+Tracking+-+File+Downloads,+Exit+Links,+and +自定义+链接](http://microsite.omniture.com/t2/help/en_US/whitepapers/link_tracking/index.html#Link+Tracking+-+File+Downloads,+Exit+Links,+and+Custom+Links)

# css - 在自适应和响应式布局中处理图像

> ID：10516647
> 
> 赞同：4
> 
> 时间：2012-05-09T12:58:39.640
> 
> 标签：css, media-queries, css-sprites, responsive-design

在处理响应式和自适应布局时处理图像（或精灵）的最佳方法是什么？我现在这样做的方式是使用媒体查询，该查询具有基于视口尺寸的条件图像选择。有没有更好的方法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:20:18.617

根据我的经验，响应式设计一半是制作动态/可调整大小的内容（弹性框、矢量/可缩放图像等），另一半是使用媒体查询——所以是的，其中一部分可以使用带有媒体查询的条件图像选择。

至于可缩放图像，您是在谈论需要保留高质量的图标/小图像还是大/用户上传的图像？

对于图标/小图像（例如您将放入 .png 图像精灵），我会尝试无限可扩展的矢量图像：

*   图标字体（仅适用于单色图标，但可以使用 CSS 设置样式，因此非常易于使用）：

[http://css-tricks.com/examples/IconFont/](http://css-tricks.com/examples/IconFont/) http://fortawesome.github.com/Font-Awesome/#base-icons

所需软件：矢量图像编辑器（Adobe Illustrator、Inkscape）和字体编辑器（FontCreator、FontForge）。

*   SVG - 使用起来有点棘手，但可以处理更复杂的图形。

所需软件：矢量图像编辑器（我推荐 Adob​​e Illustrator）这是一个完全可调整大小的 svg 页面示例，没有媒体查询： [http ://emacsformacosx.com/](http://emacsformacosx.com/)

矢量图形的优点是它们可以在任何屏幕尺寸上工作，而且它们通常加载速度更快（文件尺寸更小），所以如果你认真对待“响应式”，我会尝试在矢量中做所有事情。

可以这么说，这只是“冰山一角”——如果您有具体问题，很乐意分享更多信息；我花了一段时间才弄清楚如何设置软件并实现上面的跨浏览器（例如 4.0 以下的 Android 不支持 SVG，所以我仍然必须依赖 .png 精灵，我编写了一个允许调整大小的 javascript 文件sprites - 类似于“stretchy sprites”帖子） - 如果您可以摆脱单色图标，这是图标字体的另一个优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T02:46:34.563

你可以试试这个方法：**[Stretchy Sprites](http://tobyj.net/responsive-sprites)** (instructions & demo) - Pure HTML/CSS with no dependency`background-size`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:03:51.017

如果您还想`images`成为`responsive`（调整大小），那`sprite`不是一个好主意。最好用作单个图像但如果图像不是`responsive`（调整大小），那么您可以用作 sprites 。

永远不要放弃任何响应元素`sprites`。`background`它`height`&`width`应该是固定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T02:08:20.183

我最近回顾了很多关于这个主题的材料。有相当多的方法可用，但都不是绝对的。我对所有静态图像（图像等）使用了背景图像（背景尺寸：包含或背景尺寸：封面）。然而，动态生成的图像很难以优雅的（非脚本）范例进行管理。因此，在审阅了许多脚本之后，我只是编写了自己的脚本。我希望这有帮助：

```
/**
 * Retina image update script. Invoke with Retina.render().
 * Retina.render() may be passed a selector for img selection.
 * The default filter looks for img's with data-scale="retina".
 * @param {string|function} expr    A CSS selector expression or jQuery filter function.
 * @return {boolean|collection}     Returns false or (for Retina displays) the images updated.
 * @author Joe Johnson
 */
(function(ns,$){
    ns.Retina = {
        render: (function(isRetina){
            return isRetina ? function(expr){
                var r1 = /retina/i, r2 = /\d{3}/,
                    filter = expr ? expr : function(){
                        return r1.test($(this).data("scale"));
                    };
                return $("img").filter(filter).each(function(){
                    this.src = this.src.replace(r2,function(m){
                        return (parseInt(m,10)>=640 ? m : 2*m);
                    });
                });
            } : function(){ return false; };
        })(ns.devicePixelRatio && (ns.devicePixelRatio > 1))
    };
})(window,jQuery); 
```

需要注意的是，您仍然需要依赖一些文件名约定（在这种情况下，r2 -- 正则表达式 -- 正在搜索图像 src 属性中的目录，其值基于维度 [img/blah/320/ image.jpg 被更新为 img/blah/640/image.jpg]. 已经有一个 src 目录包含大于 640 的图像将被跳过，因为我假设它们已经足够大，可以用于 Retina 显示器（我使用它的网站在目录 /img/dir/320/、/img/dir/640 和 /img/dir/960 中有图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:13:33.670

Matt Wilcox 的自适应图像可能就是您所追求的。

[http://adaptive-images.com/](http://adaptive-images.com/)

它使用 Javascript 将用户的屏幕大小考虑在内，并根据可用的大小提供缓存的调整大小的图像版本。

它基本上会寻找较小的缓存图像，如果找到则提供它们，如果没有则制作它们。

# ruby-on-rails - 在 Rails 上设置 mongo db

> ID：10516649
> 
> 赞同：0
> 
> 时间：2012-05-09T12:58:42.487
> 
> 标签：ruby-on-rails, windows, mongodb

我正在尝试使用 mongodb 在 Rails 应用程序上设置 ruby​​ 我已完成此链接[http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)中编写的步骤 ，但我仍然无法运行我的 Rails 应用程序。当我尝试生成控制器或迁移时，我收到此错误

```
C:\Users\Abhay\Documents\NetBeansProjects\my_app>rails generate controller demo
C:/Users/Abhay/Documents/NetBeansProjects/my_app/config/initializers/mongo.rb:1:
 uninitialized constant MongoMapper (NameError)
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/engine.r
 b:201
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/engine.r
 b:200:in `each'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/engine.r
 b:200
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/initiali
 zable.rb:25:in `instance_exec'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/initiali
  zable.rb:25:in `run'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/initiali
  zable.rb:50:in `run_initializers'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/initiali
  zable.rb:49:in `each'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/initiali
    zable.rb:49:in `run_initializers'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/applicat
   ion.rb:134:in `initialize!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/applicat
   ion.rb:77:in `send'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/applicat
   ion.rb:77:in `method_missing'
    from C:/Users/Abhay/Documents/NetBeansProjects/my_app/config/environment
     .rb:5
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/applicat
   ion.rb:103:in `require'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/applicat
   ion.rb:103:in `require_environment!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/commands
    .rb:16
    from script/rails:6:in `require'
    from script/rails:6 
```

# c# - 基于 Oracle 的实体因 Invalid Cast C# 而不断失败

> ID：10516655
> 
> 赞同：0
> 
> 时间：2012-05-09T12:58:51.107
> 
> 标签：c#, entity-framework, entity-framework-4.3

我目前正在使用 Entity framework 4.3 来映射旧版 oracle 数据库。在我看来，所有数据类型都与 Oracle 数据类型兼容，但是它总是抛出一个`TargetInvocationException`内部异常为`InvalidCastException`. 有问题的表使用复合键，我不确定这是否与我收到异常的原因直接相关。我当前的代码如下

**配置类：**

```
class NoteConfig : EntityTypeConfiguration<Note>
{
    public NoteConfig()
    {

        Property(m => m.DateChanged).HasColumnName("DATE_CHANGED");
        Property(m => m.ObjectId).HasColumnName("OBJECT_ID");
        Property(m => m.ObjectType).HasColumnName("OBJECT_TYPE");
        Property(m => m.Subject).HasColumnName("SUBJECT");
        Property(m => m.Text).HasColumnName("TEXT");
        Property(m => m.EnteredBy).HasColumnName("ENTERED_BY");
        Property(m => m.LineNo).HasColumnName("LINE_NO");
        Property(m => m.LanguageId).HasColumnName("LANGUAGE_ID");

        //composite key mapping 
        HasKey(m =>
            new { 
                    m.ObjectType,
                    m.ObjectId, 
                    m.LanguageId,
                    m.Subject, 
                    m.LineNo,

            });

        ToTable("TSW_INT_NOTES", Settings.Default.DbSchema);
    }
} 
```

**型号类：**

```
public class Note
{

  //  comp key (languageid, objectid, lineno, object type, subject
    public string Subject { get; set; }
    public string Text { get; set; }
    public string ObjectType { get; set; }
    public string ObjectId { get; set; }
    public DateTime DateChanged { get; set; }
    public string  EnteredBy { get; set; }
    public string LineNo { get; set; }
    public int LanguageId { get; set; }

} 
```

**表布局：**

![表格布局](../Images/b66b5a5e980a060ad2fa9661c647b39c.png)

**断点输出：**

![断点输出](../Images/a249e176cf0e0571e93148f38fc5fa11.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:47:34.337

这是一个数字数据类型问题，但它在 lineno 字段上，如果在小数位设置为 < 0 时尝试映射数字数据类型并且在 c# 中定义为 int 时不会自动截断十进制值，则 ef 似乎会引发异常它会在 c# 中使用浮点或双精度值

# .net - .net 模式：在多行日志文件中捕获字段

> ID：10516658
> 
> 赞同：1
> 
> 时间：2012-05-09T12:59:09.317
> 
> 标签：.net, regex

我有一个看起来像这样的日志文件：

2012-05-04 01:10:35;301383027;00133608663205759673480010256592;103;错误;摘要治疗:119;等等

废话2

废话3

2012-05-02 01:00:22;301382163;00133591322220336011720010256592;103;错误;摘要处理:119;blah4

废话5

废话6

2012-05-02 01:00:23;301382163;00133591322220336011720010256592;103;错误;摘要处理:119;等等

废话8

废话9

**我想要 3 个匹配项，每个匹配项包含 3 个捕获的组：日期、严重性和消息。**

我试过使用这种模式

```
(20[0-9]{2}-[0-2][0-9]-[0-9]{2} [0-2][0-9]:[0-5][0-9]:[0-5][0-9]);[^;]*;[^;]*;[^;]*;([^;]*);(.*) 
```

启用 Singleline 选项后，我有一个匹配项（整个输入），禁用此选项后，消息未完全捕获（仅与日期位于同一行的部分）。

我怎么能有与我想要正确捕获的 3 个值的日志条目一样多的匹配项？

编辑：我试图捕捉这样的比赛：

*日期：* 2012-05-04 01:10:35

*严重性：*错误

*消息：* AbstractTreatment:119;blah1

废话2

废话3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:26:11.293

这里有2个技巧。

1.  **“。” 不包括“\n”**，您不需要设置 RegexOptions.Multiline。

2.  您需要使用另一个日期/时间模式或结束字符 ($) 作为分隔符，它们不应包含在匹配项中。（否则需要在搜索下一个匹配项之前从输入中排除分隔符）。
    这需要使用一个特殊的分组表达式，称为“**零宽度正向预测断言**”，其语法为 (?= subexpression)。

为了测试您的日志，我将其保存在“日志”设置变量中。

```
string log = Settings.Default.Log;
string datePattern = @"20[0-9]{2}-[0-2][0-9]-[0-9]{2} [0-2][0-9]:[0-5][0-9]:[0-5][0-9]";
string pattern = @"(?<date>" + datePattern + @");[^;]*;[^;]*;[^;]*;(?<severity>[^;]*);(?<message>(.|\n)*?)(?=(" + datePattern + @"|$))";
Match mtc = Regex.Match(log, pattern);

while (mtc.Success)
{
    Console.WriteLine("Date: " + mtc.Groups["date"].Value);
    Console.WriteLine("Severity: " + mtc.Groups["severity"].Value);
    Console.WriteLine("Message: " + mtc.Groups["message"].Value);

    mtc = mtc.NextMatch();
} 
```

那么输出如下，

```
Date: 2012-05-04 01:10:35
Severity: ERROR
Message: AbstractTreatment:119;blah1

blah2

blah3

Date: 2012-05-02 01:00:22
Severity: ERROR
Message: AbstractTreatment:119;blah4

blah5

blah6

Date: 2012-05-02 01:00:23
Severity: ERROR
Message: AbstractTreatment:119;blah7

blah8

blah9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T03:50:49.873

```
 Regex r = new Regex(
      @"^(?<date>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2});[^;]*;[^;]*;[^;]*;(?<severity>[^;]*);(?<message>.*(\n+(?!\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2};)[^\n]+)*)",
      RegexOptions.Multiline | RegexOptions.ExplicitCapture); 
```

这个想法是，在`.*`消耗第一行的剩余部分之后，`\n+`消耗一个或多个行分隔符并`[^\n]+`消耗下一个非空行的内容——但前提是前瞻——`(?!\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2};)`未能匹配开头的日期线。（因为，当然，以日期开头的行被假定为下一个日志条目的开始。）

该`Multiline`选项使`^`锚点在换行符之后以及字符串的开头进行匹配。 `ExplicitCapture`意味着只捕获命名组，所以我不必使用`(?:...)`来防止普通组捕获。`ExplicitCapture`每当您使用命名组时，使用它是一个好主意；命名和编号组在 .NET 正则表达式中的交互方式很奇怪。

# postgresql - 我的表是否需要一个主键，它有一个 UNIQUE（复合 4 列），其中一个可以为 NULL？

> ID：10516661
> 
> 赞同：10
> 
> 时间：2012-05-09T12:59:11.977
> 
> 标签：postgresql, database-design, null, indexing, primary-key

我有下表（PostgreSQL 8.3），其中存储了一些产品的价格。价格与另一个数据库同步，基本上下面的大多数字段（除了一个）都不是由我们的客户更新 - 而是每隔一段时间删除和刷新一次以与另一个股票数据库同步：

```
CREATE TABLE product_pricebands (
    template_sku varchar(20) NOT NULL,
    colourid integer REFERENCES colour (colourid) ON DELETE CASCADE,        
    currencyid integer NOT NULL REFERENCES currency (currencyid) ON DELETE CASCADE,
    siteid integer NOT NULL REFERENCES site (siteid) ON DELETE CASCADE,

    master_price numeric(10,2),

    my_custom_field boolean, 

    UNIQUE (template_sku, siteid, currencyid, colourid)
); 
```

在同步时，我基本上删除了上面的大部分数据，除了数据 WHERE my_custom_field 为 TRUE （如果它是 TRUE，这意味着客户端通过他们的 CMS 更新了这个字段，因此这个记录不应该被删除）。然后我在表中插入 100 到 1000 行，并在插入失败的地方更新（即 (template_sku、siteid、currencyid、 colourid) 的组合已经存在的地方）。

我的问题是 - 这里应该应用什么最佳实践来创建主键？甚至需要主键吗？我想让主键 = (template_sku, siteid, currencyid, colourid) - 但是 colourid 字段可以为 NULL，并且在复合主键中使用它是不可能的。

从我在其他论坛帖子上看到的内容来看，我认为我已经正确地完成了上述操作，只需要澄清一下：

1）我是否应该使用“串行”主键以防万一我需要一个？目前我没有，也不认为我会，因为表中的重要数据是价格和我的自定义字段，仅由 (template_sku, siteid, currencyid, colourid) 组合标识。

2) 由于 (template_sku, siteid, currencyid, colourid) 是我将用来查询产品价格的组合，我是否应该在我的列中添加任何进一步的索引，例如“template_sku”，它是一个 varchar？还是 UNIQUE 约束已经是我的 SELECT 的一个很好的索引？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T14:32:37.390

> 我是否应该使用“串行”主键以防万一我需要一个？

如果需要，您可以稍后轻松添加序列列：

```
ALTER TABLE product_pricebands ADD COLUMN id serial; 
```

该列将自动填充唯一值。您甚至可以在同一语句中将其设为主键（如果尚未定义主键）：

```
ALTER TABLE product_pricebands ADD COLUMN id serial PRIMARY KEY; 
```

如果您从其他表中引用该表，我建议您使用这样的**代理主键**，因为通过四列链接起来相当笨拙。在带有 JOIN 的 SELECT 中它也较慢。

无论哪种方式，您**都应该定义一个主键**。包含可为空列的 UNIQUE 索引不是完全替换。它允许包含 NULL 值的组合重复，因为两个 NULL 值永远不会被视为相同。这可能会导致麻烦。

* * *

作为

> colourid 字段可以为 NULL

您可能想要创建**两个唯一索引**。该组合`(template_sku, siteid, currencyid, colourid)`不能是 a `PRIMARY KEY`，因为 nullable ，但是您可以像已经拥有的那样`colourid`创建约束（自动实现索引）：`UNIQUE`

```
ALTER TABLE product_pricebands ADD CONSTRAINT product_pricebands_uni_idx
UNIQUE (template_sku, siteid, currencyid, colourid) 
```

该索引完美地涵盖了您在 2) 中提到的查询。
如果您想避免“重复”，请另外创建一个部分唯一索引`(colourid IS NULL)`：

```
CREATE UNIQUE INDEX product_pricebands_uni_null_idx
ON product_pricebands (template_sku, siteid, currencyid)
WHERE colourid IS NULL; 
```

覆盖所有基地。[我在 dba.SE](https://dba.stackexchange.com/a/9760/3684)的相关答案中写了更多关于该技术的内容。

* * *

上面的简单替代方法是使`colourid`NOT NULL 并创建一个主键而不是上面的`product_pricebands_uni_idx`。

* * *

另外，正如你

> 基本上DELETE大部分数据

**对于您的重新填充操作，删除在重新填充操作期间不需要**的索引并在之后重新创建索引会更快。从头开始构建索引比增量添加所有行要快一个数量级。

您怎么知道使用（需要）哪些索引？

*   使用 测试您的查询`EXPLAIN ANALYZE`。
*   或者使用[内置的统计信息](http://www.postgresql.org/docs/9.1/static/runtime-config-statistics.html#RUNTIME-CONFIG-STATISTICS-COLLECTOR)。[pgAdmin](http://pgadmin.org/)在单独的选项卡中显示所选对象的统计信息。

`my_custom_field = TRUE`将少数行选择到临时表、[`TRUNCATE`](http://www.postgresql.org/docs/current/interactive/sql-truncate.html)基表中并重新插入幸存者也可能更快。取决于您是否定义了外键。看起来像这样：

```
CREATE TEMP TABLE pr_tmp AS
SELECT * FROM product_pricebands WHERE my_custom_field;

TRUNCATE product_pricebands;
INSERT INTO product_pricebands SELECT * FROM pr_tmp; 
```

这避免了很多吸尘。

# unit-testing - 如何在 Go 中测量测试覆盖率

> ID：10516662
> 
> 赞同：157
> 
> 时间：2012-05-09T12:59:15.007
> 
> 标签：unit-testing, testing, go, code-coverage

有没有人成功地为 Go 单元测试生成代码覆盖率？我在网上找不到这样的工具。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-09-20T07:54:44.000

请注意，[Go 1.2（2013 年第四季度，rc1 可用）](http://code.google.com/p/go/downloads/list?can=2)现在将显示**[测试覆盖率结果](http://tip.golang.org/doc/go1.2#cover)**：

> 一个主要的新特性`go test`是**它现在可以计算并在一个新的、单独安装的“ `go tool cover`”程序的帮助下显示测试覆盖率结果**。
> 
> 该`cover`工具是子存储库的[`go.tools`一部分](https://code.google.com/p/go/source/checkout?repo=tools)。它可以通过运行安装
> 
> ```
> $ go get golang.org/x/tools/cmd/cover 
> ```
> 
> 封面工具做了两件事。
> 
> *   首先，当“ `go test`”被赋予`-cover`标志时，它会自动运行以重写包的源代码并插入检测语句。然后像往常一样编译和运行测试，并报告基本的覆盖率统计信息：
>     
>     
>     
>     $ go test -coverprofile fmtcoverage.html fmt ok fmt 0.060s 覆盖率：91.4% 的语句 $
>     
>     
> *   其次，对于更详细的报告，“go test”的不同标志可以创建一个覆盖率配置文件，`go tool cover`然后用“”调用封面程序可以分析该文件。

[Frank Shearar](https://stackoverflow.com/users/10259/frank-shearar) [提到](https://stackoverflow.com/questions/10516662/how-to-measure-test-coverage-in-go/18911602#comment28995405_18911602)：

> 最新版本的 Go (2013/09/19) 使用：
> 
> ```
> go test -coverprofile <filename> <package name> 
> ```
> 
> 可以通过运行命令找到有关如何生成和分析覆盖率统计信息的详细信息
> 
> ```
> $ go help testflag
> $ go tool cover -help 
> ```

* * *

[Ivan Black](https://stackoverflow.com/users/1816872/ivan-black)[在评论](https://stackoverflow.com/questions/10516662/how-to-measure-test-coverage-in-go/18911602#comment46046413_18911602)中提到：

> `go test -coverprofile cover.out`然后在您的默认浏览器中
> `go tool cover -html=cover.out`打开`cover.out`
> 
> 我什至不想等待浏览器打开，所以我定义了这个别名：
> 
> ```
> alias gc=grep -v -e " 1$" cover.out 
> ```
> 
> 我只需键入`gc`，并列出尚未涵盖的所有行*（*此处：`coverage.out`一行*不*以“ `1`”结尾）。

* * *

2022 年更新，可能适用于 Go 1.19

> ## [提议：扩展 Go 的代码覆盖测试以包括应用程序](https://github.com/golang/go/issues/51430)

> 虽然`go test`将继续支持现有的基于 " " 的覆盖工作流，但建议将覆盖添加为 " `go build`" 的新构建模式。
> 
> 就像用户可以使用“”构建一个带有竞争检测器的可执行文件一样`go build -race`，也可以使用“”构建一个带有覆盖率的可执行文件`go build -cover`。
> 
> 将支持合并在不同 GOOS/GOARCH 环境中生成的覆盖配置文件。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-12-04T01:00:52.953

Go 附带了很棒的测试和覆盖工具。尽管所有 Go 工具都有很好的文档记录`go tool cover -help`，但我建议阅读[官方 Go 博客上的封面故事文章](http://blog.golang.org/cover)。它有很多例子，我强烈推荐它！

我的 ~/.bash_profile 中有这个功能。（您可以将其粘贴到终端中尝试一下）。

```
cover () { 
    t="/tmp/go-cover.$$.tmp"
    go test -coverprofile=$t $@ && go tool cover -html=$t && unlink $t
} 
```

然后`cd`进入一个 go 项目/包文件夹并输入`cover`. 这将在浏览器中打开一个可视化工具，向您显示当前包中每个文件的已测试和未测试代码。非常有用的命令！我强烈推荐它来查找尚未 100% 测试的内容！显示的结果是每个文件。从左上角的下拉菜单中，您可以查看所有文件的结果。

使用此命令，您还可以检查任何包的覆盖范围，例如：

`cover fmt`

此命令在终端中的输出将是：

```
ok      fmt 0.031s  coverage: 91.9% of statements 
```

除了在您的浏览器中，您还会看到此工具以红色显示所有未包含在测试中的代码行：

![在此处输入图像描述](../Images/4814a56610f82001cbec1305f19a6b4b.png)

也可以只保存 html 覆盖文件而不是在浏览器中打开它。这在您的测试 + 覆盖率由 Jenkins 等 CI 工具运行的情况下非常有用。这样，您可以从中央服务器提供覆盖文件，整个团队将能够看到每个构建的覆盖结果。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2018-08-01T13:32:07.903

除了上面的好答案之外，我发现这三行是获得它的最简单方法（包括所有包）：

```
go test -v -coverprofile cover.out ./YOUR_CODE_FOLDER/...
go tool cover -html=cover.out -o cover.html
open cover.html 
```

请注意，在 HTML 文件中，您会找到一个下拉按钮，可将您定向到所有文件。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-12-26T07:17:26.933

只需运行

```
go test -cover 
```

或者

```
go test -coverprofile=coverage.out ; 
go tool cover -func=coverage.out 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-09-26T17:19:51.517

覆盖报告：

a) 运行所有测试并启用覆盖率 -->`go test ./... -coverprofile coverage.out`

b) 覆盖单个功能以及整体覆盖 →`go tool cover -func coverage.out`

c) 查看测试覆盖的行和未覆盖的行 → `go tool cover -html=coverage.out -o coverage.html`。在浏览器中打开`coverage.html`特此生成的文件并分析详细的覆盖信息。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-09T13:22:45.157

它就[在这里](http://code.google.com/p/go/source/browse/#hg/src/cmd/cov)，一些文档[在这里](http://code.google.com/p/go/source/browse/src/cmd/cov/doc.go)。

```
$ go tool
6a
6c
6g
6l
addr2line
api
cgo
cov
dist
ebnflint
fix
gotype
nm
objdump
pack
pprof
prof
vet
yacc
$ go tool cov -h
usage: cov [-lsv] [-g substring] [-m minlines] [6.out args...]
-g specifies pattern of interesting functions or files
go tool cov: exit status 1
$ 
```

我没用过，我只知道这些。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-08-20T19:16:49.230

如果您想直接在终端中按功能查看未覆盖的行，我为此目的重写了封面工具。它可在[https://github.com/gregoryv/uncover](https://github.com/gregoryv/uncover)获得。

**用法**

```
go get -u github.com/gregoryv/uncover/...
go test -coverprofile /tmp/c.out
uncover /tmp/c.out 
```

**截屏**

[![在此处输入图像描述](../Images/ccd28fbcedf93dce578740937b860065.png)](https://i.stack.imgur.com/7o0Xo.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-10-31T16:16:32.280

如果您使用的是**VSCode** ，则此功能是开箱即用的（*但默认禁用*）

只需打开保存测试+覆盖报告

[https://github.com/microsoft/vscode-go/wiki/On-Save-features](https://github.com/microsoft/vscode-go/wiki/On-Save-features)

它甚至会在你的编辑器中显示哪些行没有被覆盖，这非常方便。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-22T15:51:35.533

受帮助菜单和此问题的其他答案的启发，只需运行：

```
f=cover.out; if [ -f $f ]; then rm $f; fi; go test ./... -coverprofile $f && \
go tool cover -html $f && \
rm $f 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-08T17:48:43.170

一种快速简便的方法是使用内置 go 附带的覆盖工具：

> **$ go test -coverprofile cp.out** // 以一个线性百分比的方式发射覆盖率

执行上述命令后，如果您希望直观地查看代码覆盖率（如覆盖语句和遗漏等）

> **$ go tool cover -html=cp.out**

注意：您需要在您希望查看覆盖范围的文件夹中执行上述命令

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-03T08:49:56.400

尝试使用**[gaia-docker/base-go-build](https://github.com/gaia-docker/base-go-build)** Docker 镜像。

这是一个 Docker 映像，其中包含构建和测试覆盖率所需的一切。在 Docker 容器中运行测试覆盖会创建包含项目测试覆盖结果的*.cover文件夹。*

```
docker run --rm -v "$PWD":$PROJECT_PATH -w $PROJECT_PATH $BUILDER_IMAGE_NAME /go/script/coverage.sh 
```

[测试覆盖率脚本](https://github.com/gaia-docker/base-go-build/blob/master/script/coverage.sh)在所有项目的文件夹上运行，并在 .cover 文件夹内生成每个*文件*夹的 junit 和覆盖率报告，以及所有项目测试的组合覆盖率报告。

Codecov 还建议了一个收集覆盖结果的脚本：[多个文件](https://github.com/codecov/example-go#caveat-multiple-files)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-11T14:10:24.530

如果要在 中查找测试覆盖率`Windows`，只需转到所需的文件夹`command prompt`并键入以下命令：

```
go test -coverprofile=coverage.out && go tool cover -html=coverage.out 
```

这非常简单并且工作可靠。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-01T06:39:21.173

> Golang 的测试覆盖率

`go get github.com/axw/gocov/gocov go get -u gopkg.in/matm/v1/gocov-html`

检查它是否安装正确并且您可以从终端访问

> 运行测试用例

如果您运行测试用例，它将根据该文件重新生成 .json 文件，您将在 .html 文件中获得代码覆盖率报告

`gocov test >your_Coverage_report.json`

完成测试用例后，使用 .json 在 .html 文件中生成报告

`gocov-html your_Coverage_report.json >your_Coverage_report.html`

参考

[用于 Go 语言的 GoTest 覆盖工具](https://github.com/axw/gocov)

[Go 测试报告工具](https://github.com/matm/gocov-html)

> 替代方法

**Go Native 测试覆盖率**

```
go test -coverprofile=coverage.out
go tool cover -html=coverage.out 
```

# java - 如何正确更新 SQLite？

> ID：10516665
> 
> 赞同：0
> 
> 时间：2012-05-09T12:59:27.283
> 
> 标签：java, android, sqlite

我知道如何读取写入数据到 android SQL 数据库，但是当我尝试附加数据时遇到了一个问题。当我这样做时，它只会附加最后一条记录。

对于数据更新，我正在使用`

```
ContentValues updateKoment = new ContentValues();
            updateKoment.put("comment", text.getText().toString());
             db.update("MyTab",updateKoment, "PhoneNr='"+newn+"'AND Name='"+contact+"'AND comment='"+previuscom+"' AND Answered='"+Yn+"'",null); 
```

如果您能帮助我并指出正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:05:03.363

我相信你正在寻找的是`insert` [android SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

```
insert (String table, String nullColumnHack, ContentValues values) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:49:53.490

也许您正在尝试在任何现有评论的末尾添加新评论？如果是这种情况，您可能应该重新设计您的数据库，以便将任何新注释添加（即`insert`）到单独的表中。然后，所有评论都通过一个公共键（下例中的列）链接到您想要的任何其他项目`post_id`。

例如，您可以在数据库中设置此表：

```
Table Posts:
post_id  title  description
1        'Hey'  'Description'
2        'Ho'   'Another Description'

Table Comments:
comment_id  post_id  comment
1           1        'Nice Salute'
2           1        'Yeah really nice'
3           2        'Ho Ho Ho' 
```

从您当前的代码片段开始，最后一条注释将始终替换任何现有注释，也就是说，添加`'Yeah really nice'`注释将替换`'Nice salute'`注释。

（我不相信我在暗示我将要建议的内容：）

您还可以从数据库中读取任何现有评论并将新评论连接到结果：

```
String columns = { "comment" };
String constraint = "PhoneNr=? AND Name=? AND comment=? AND Answered=?";
String args[] = { newn, contact, previuscom, Yn };

Cursor cursor = db.query("MyTab", columns , constraint, args, null, null, null);
String comments = cursor.getString(cursor.getColumnIndex("comment"));
comments += text.getText().toString(); 
```

然后用您的新评论字符串更新同一行：

```
ContentValues updateKoment = new ContentValues();
updateKoment.put("comment", comments);
db.update("MyTab", updateKoment, constraint, args); 
```

但就我个人而言，这是一个丑陋的解决方案，我内心的数据库架构师会强烈反对你实施它。

# ruby-on-rails - 为 Rails 控制器使用嵌套 Backbone 关系参数

> ID：10516666
> 
> 赞同：0
> 
> 时间：2012-05-09T12:59:28.720
> 
> 标签：ruby-on-rails, backbone.js, backbone-relational

通常，当我使用backbone.js 时，我会按照Rails 期望的方式应用这种补丁来嵌套模型属性：

```
Backbone.Model.prototype.toJSON = function() { 
  var hashWithRoot = {}; 
  hashWithRoot[this.modelName] = this.attributes; 
  return _.clone(hashWithRoot);
};

App.Models.Card = Backbone.Model.extend({
  modelName:  'card'
}); 
```

但是，在我当前的项目中，我使用的是 Backbone Relational，这很棒，但它有自己的 toJSON 覆盖。结果是我在控制台中得到一个循环引用异常：

> 未捕获的 TypeError：将循环结构转换为 JSON

有没有人成功地为使用 Backbone Relational 的 Rails 后端生成用于 PUT/POST 的嵌套 JSON？

编辑2：

我创建了一个 jsfiddle 来显示有问题的集合和模型 - 并包含一些 json 来引导应用程序。出于某种原因（也许是因为我饿了）我无法让[小提琴](http://jsfiddle.net/YWkHD/14/)工作。

希望这可以更好地了解我正在尝试做的事情。我要吃饭了，然后试着修理小提琴......

干杯，斯图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:48:41.510

写一个不回答的答案是不礼貌的吗？因为不能写评论……</p>

您需要向我们提供更多信息。我没有使用过 Backbone Relational，但我做了一个[小提琴](http://jsfiddle.net/jBTex/)，它设法序列化具有`HasMany`关系的模型。有一些无关的和不正确的属性，但没有`circular structure`错误。

你使用什么关系？你能做一个更类似于你的应用程序结构的小提琴吗？

# blackberry - 如何在黑莓上水平滚动图像

> ID：10516669
> 
> 赞同：0
> 
> 时间：2012-05-09T12:59:35.273
> 
> 标签：blackberry

我想用它的标题和描述水平滚动图像，我已经使用图片滚动视图，但它也只在屏幕底部显示标题，但我想在顶部显示它并带有我想要显示的标题它的描述也，请帮助。我曾尝试使用界面 scrollchangelistener 的另一个选项，即我在屏幕顶部显示带有标题和描述的图像，但它在垂直方向滚动，我无法在水平方向滚动。请帮助我自从最近几天以来遇到了很大的困难，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:07:52.780

使用`HorizontalFieldManager`并在其中添加内容它将起作用`Manager.HORIZONTAL_SCROLL`在其中用作参数

例如：

```
HorizontalFieldManager hfm=new HorizontalFieldManager(Manager.HORIZONTAL_SCROLL); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T13:09:24.883

除了[PictureScrollField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/extension/component/PictureScrollField.html)文档之外，此 BlackBerry 支持论坛主题将为您提供帮助。

[如何在blackberr的水平滚动字段中显示图像](http://supportforums.blackberry.com/t5/BlackBerry-Curve/how-to-show-images-in-horizontal-scroll-field-in-blackberr/td-p/1669443)

# android - Android 有没有一种方法可以将几个 wav 声音合并/粘合/粘贴在一起？

> ID：10516672
> 
> 赞同：0
> 
> 时间：2012-05-09T12:59:46.423
> 
> 标签：android, android-mediaplayer

我需要知道下一个例子是否可行：

我在我的 android 应用程序中以 m4a 和 wav 格式保存了声音文件。然后我选择说四个文件，其中三个是 m4a 和一个 wav。我的输出应该是一个混合了所有四个 m4a 格式文件的文件。所以当我播放这个单个文件时，听起来应该是四个文件同时播放。

如果您能提供一些代码，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:33:54.383

here is a code that I'm using to play a video from raw folder

```
Uri uri = Uri.parse("android.resource://" + getPackageName() + "/"+ R.raw.vidfull);

mVideoView.setVideoURI(uri); 
```

Of course you will use audioPlayer class or equivalent .

Note that you don't have to input the extension of the file .

For the audio edition software I use Audacity

# android - ACTION_SCREEN_OFF 的广播接收器是否需要唤醒锁

> ID：10516677
> 
> 赞同：0
> 
> 时间：2012-05-09T13:00:11.750
> 
> 标签：android, broadcastreceiver, wakelock

我正在注册一个将在屏幕关闭时激活的广播接收器。接收器在 OnReceive 中执行一个简短的同步操作。此操作必须在设备休眠之前在我的应用程序中发生。

我的问题：我需要在这里获取唤醒锁，还是保证 Android 会让我的接收器完成 OnReceive 方法？我的代码需要几毫秒才能运行，但为了便于讨论，我们假设它需要 1 秒。

我正在使用此代码来注册接收器：

```
 BroadcastReceiver receiver = new MyReceiver();
 IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
 context.registerReceiver(receiver, filter); 
```

我无法在文档中或通过搜索找到答案，因此我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:18:50.647

是的，设备可能会休眠。纽兹你为什么要冒险？最好获取一个 Partial 唤醒锁并在 onReceive 结束时释放它。

# c++ - 如何在eclipse中调试现有项目

> ID：10516679
> 
> 赞同：0
> 
> 时间：2012-05-09T13:00:13.900
> 
> 标签：c++, eclipse, netbeans, kdevelop

我想在 eclipse 中调试一个现有的项目“ [http://www.gnu.org/software/rx/rx.html](http://www.gnu.org/software/rx/rx.html) ”..我跟着文章

[http://www.ibm.com/developerworks/aix/library/au-unix-eclipse/index.html](http://www.ibm.com/developerworks/aix/library/au-unix-eclipse/index.html)

每当我尝试运行 build.xml ant 文件时...它告诉我

> “make：unix/Makefile：没有这样的文件或目录”

我也尝试遵循以下方法：

[如何从 Google 代码库调试源代码](https://stackoverflow.com/questions/10497636/how-to-debug-source-code-from-google-code-repository)

但是，即使是 VJovic 建议的方法也不适用于我的情况。我还下载了代码，但 VJovic 建议的方法在这种情况下也不起作用。我已经坚持了 100 多个小时..有人请帮忙。我是这方面的新手……请原谅我的无知。

我愿意接受 ide 建议。我喜欢使用的操作系统是 Ubuntu 和 Windows 7。我还尝试了 KDevelop...它能够构建我的项目...但是由于找不到头文件而引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:07:24.120

可能这个链接会对您有所帮助。

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_debug_exes.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_debug_exes.htm)

[http://www.eclipse.org/eclipse/debug/index.php](http://www.eclipse.org/eclipse/debug/index.php)

# r - R：删除一年内出现的重复条目

> ID：10516685
> 
> 赞同：2
> 
> 时间：2012-05-09T13:00:45.237
> 
> 标签：r

我是 R 新手，我有一个包含 500000 个患者 ID、日期和其他变量条目的数据框。

如果他们恰好在他们第一次出现的一年内出现，我想删除任何重复的重复患者 ID（PtID）。例如：

```
 PtID    date**
 1\. 1    01/01/2006
 2\. 2    01/01/2006
 3\. 1    24/02/2006 
 4\. 4    26/03/2006
 5\. 1    04/05/2006
 6\. 1    05/05/2007 
```

在这种情况下，我想删除第 3 和第 5 行并保留第 1 和第 6 行..

有人可以帮我解决这个问题..这是str（我的数据称为final1）

```
str(final1)
'data.frame':   605870 obs. of  70 variables:
...
 $ Date          : Date, format: "2006-03-12" "2006-04-01" ...
$ PtID          : int  11251 11251 11251 11251 11251 11251 11251 30938 30938 11245 ...
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:43:44.133

这是一种使用`ply`和的解决方案`lubridate`。首先加载包：

```
require(plyr)
require(lubridate) 
```

接下来创建一些示例数据（请注意，这比您的示例更简单！）

```
num = 1:6
PtID = c(1,2,1,4,1,1)
date = c("01/01/2006", "01/01/2006","24/02/2006", "26/03/2006", "04/05/2006",
  "05/05/2007")
dd = data.frame(PtID, date) 
```

现在我们将`date`列设为 R 日期对象：

```
dd$date = dmy(date) 
```

以及包含是否应包含行的规则的函数：

```
keepId = function(dates) {
  keep = ((dates - min(dates)) > 365*24*60*60) |
  ((dates == min(dates)))
  return(keep)
} 
```

剩下的就是`ddply`用`PtID`

```
dd_sub = ddply(dd, c("PtID"), transform, keep = keepId(date))
dd_sub[dd_sub$keep,] 
```

# blackberry - 如何以编程方式扫描黑莓中可用的 wifi 网络

> ID：10516686
> 
> 赞同：1
> 
> 时间：2012-05-09T13:00:52.437
> 
> 标签：blackberry

有什么方法可以在第三方应用程序上获取所有可用的 wifi 网络。在做了很多谷歌搜索后，我得到了执行此操作的代码，但在安装应用程序后，用户需要进行手动设置。我不需要这个。

我希望当我安装我的应用程序时它只显示可用的（SSID）网络而没有任何设置。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T06:47:21.147

//使用下面的函数

```
 public boolean isWiFiEnable()
    {
        if( WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED )
        {
            return true;
        }

        return false;
    } 
```

# objective-c - 如何从ios 5中的源图像中检测面部的肤色？

> ID：10516691
> 
> 赞同：1
> 
> 时间：2012-05-09T13:01:22.110
> 
> 标签：objective-c, ios5, face-detection, object-detection, cgcolorspace

我需要给脸部的皮肤上色...我如何找到肤色？

**现在我通过RGB**像素值获取皮肤颜色......我仍然面临问题，我正在匹配颜色坐标以匹配特定颜色范围的皮肤......但脸部的某些区域仍然不在我的颜色范围内那么它不是那个区域的颜色..

除了面部区域可能落在那个区域之外，那个区域也有颜色......

关于我的问题的任何想法...

提前致谢....

我的代码：

```
 -(void)colorImageBySliderValue:(float)value WithImage:(UIImage*)needToModified
{

    CGContextRef ctx;

    CGImageRef imageRef = needToModified.CGImage;
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = malloc(self.sourceImage.image.size.height * self.sourceImage.image.size.width * 10);
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * self.sourceImage.image.size.width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context1 = CGBitmapContextCreate(rawData, self.sourceImage.image.size.width, self.sourceImage.image.size.height,
                                                  bitsPerComponent, bytesPerRow, colorSpace,
                                                  kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context1, CGRectMake(0, 0, self.sourceImage.image.size.width, self.sourceImage.image.size.height), imageRef);

    NSLog(@"%d::%d",width,height);

    for(int ii = 0 ; ii < 768 * 1024 ; ii+=4)
    {

        int  R = rawData[ii];
        int G = rawData[ii+1];
        int B = rawData[ii+2];

        //        NSLog(@"%d   %d   %d", R, G, B);
             if( ( (R>60)&&(R<237) ) || ((G>10)&&(G<120))||((B>4) && (B<120)))
//        if( ( (R>100)&&(R<186) ) || ((G>56)&&(G<130))||((B>30) && (B<120)))
//        if( ( (R>188)&&(R<228) ) || ((G>123)&&(G<163))||((B>85) && (B<125)))
            //        if( ( (R>95)&&(R<220) ) || ((G>40)&&(G<210))||((B>20) && (B<170)))
        {

            rawData[ii+1]=R;//13; 
            rawData[ii+2]=G;//43; 
            rawData[ii+3]=value;//63
            //            NSLog(@"entered");
        }
    }

    ctx = CGBitmapContextCreate(rawData,
                                CGImageGetWidth( imageRef ),
                                CGImageGetHeight( imageRef ),
                                8,
                                CGImageGetBytesPerRow( imageRef ),
                                CGImageGetColorSpace( imageRef ),
                                kCGImageAlphaPremultipliedLast ); 

    imageRef = CGBitmapContextCreateImage(ctx);
    UIImage* rawImage = [UIImage imageWithCGImage:imageRef]; 
    UIImageView *ty=[[UIImageView alloc]initWithFrame:CGRectMake(100, 200, 400, 400)];
    ty.image=rawImage;
    [self.view addSubview:ty];
    CGContextRelease(context1);
    CGContextRelease(ctx);  
    free(rawData);   
} 
```

问候，

间谍网

![我的输出图像...](../Images/e4a4898eafc5d13ebd759e3f61e98014.png)

![另一个样本](../Images/809781c5ffbd0e5c27a3e1aa825cf5da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:47:12.580

您可以创建两个图像，一个是原始图像，另一个是单独修改的图像像素并修复它......并通过首先添加原始图像和单独修改的像素覆盖原始图像......

```
 for (int index=0; index<length; index+=4) 
        {
            if (data2[index]==data1[index])
            {
                data1[index]=data2[index];
                data1[index+1]=data2[index+1];//aRed+value;//aRed;//13; 
                data1[index+2]=data2[index+2];//aGreen;//aGreen;//43; 
                data1[index+3]=data2[index+3];
            } 
```

# sql - SQL 语句有问题

> ID：10516694
> 
> 赞同：0
> 
> 时间：2012-05-09T13:01:30.687
> 
> 标签：sql, ms-access, primary-key, syntax-error

这家伙有点麻烦，我相信这对知道它的人来说很明显，但我在这个语句上遇到了语法错误

```
 sql = "ALTER TABLE " & TableName & " ADD COLUMN Prk COUNTER PRIMARY KEY(" & X & ")"
    Dim PrimarySet As New OleDb.OleDbCommand(sql, con)
    PrimarySet.ExecuteNonQuery() 
```

我使用 OLEDB 成功连接到数据库的一些背景信息，似乎我无法在不输入主键的情况下保存表。我使用此语句输入将具有自动编号列的主键。计划是当我创建新的行和列时，自动编号将随之而来并创建一个数字列表。如果我的棒子的一端弄错了，这不起作用，请告诉我，我一直在努力让我的程序连续工作两天

提前感谢=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:14:09.483

它可能是 MS Access。如果是这样，那么您不需要查询末尾的括号内容。像这样的东西应该工作： -

```
ALTER TABLE table_name ADD COLUMN Prk COUNTER PRIMARY KEY 
```

# c++ - 对 Class::method C++ 的未定义引用

> ID：10516699
> 
> 赞同：-2
> 
> 时间：2012-05-09T13:01:47.490
> 
> 标签：c++, reference

我在编译以下源时遇到问题：

```
 QString code = this->viewManager()->activeView()->document()->text();
    Qualifier qua;
    qua.setQCode(code); 
```

它告诉我

```
error: undefined reference to `Qualifier::setQCode(QString)' 
```

qualifier.h 和 .cpp 的代码如下

```
#ifndef __QUALIFIER_H__
#define __QUALIFIER_H__

#include <iostream>
#include <string>
#include <QString>
#include <queue>
#include "analyser.h"

using namespace std;

class Qualifier
{

private:

    string code;
    queue<method> tokenisedCode;
    //queue<analysis> analysedCode;

void tokeniseCode();

public :

void setCode(string code);

void setQCode(QString code);

void computeLocAnalysis();

void computeCCAnalysis();

void visualiseResults();

};

 #endif /* __QUALIFIER_H__ */ 
```

并且 CPP 是

```
#include "qualifier.h"

using namespace std;

void Qualifier::tokeniseCode()
{

Parser par;
par.setCode(code);
par.parse();
this->tokenisedCode = par.getMethods();

}

void Qualifier::setCode(string code)
{
    this->code = code;
}

void Qualifier::setQCode(QString code)
{
this->code = qPrintable(code);
}

void Qualifier::computeLocAnalysis()
{

std::cout << this->code << std::endl;

/*
locAnalyser ana = new locAnalyser();
ana.setMethodList(tokenisedCode);
ana.computeResult();
this->analysedCode = ana.getResult();
*/
 }

void Qualifier::computeCCAnalysis()
{

// To be implemented;

 }

void Qualifier::visualiseResults()
{
/*
//Need a grapher of the results
while(!analysedCode.empty())
{
    analysis meth = analysedCode.front();
    cout << "LOC: " << meth.result << "\t\t" << meth.name << endl;
    analysedCode.pop();
    cout << "------------------------------------" << endl;
}
*/
} 
```

我不明白为什么没有看到参考！我的意思是，是完全相同的事情，与项目其余部分中的方式相同！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:06:29.033

根据头文件，您有 2 个类似功能的不同实现：

```
void setCode(string code);

void setQCode(QString code); 
```

但是在 .cpp 你只实现第一个：

```
void Qualifier::setCode(string code)
{
    this->code = code;
} 
```

因此编译器抱怨缺少`setQCode()`.

**解决方案**：要么实现它，要么从头文件中删除它的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:52:42.043

这是链接器报告的，不是吗？我看起来像包含“限定符”类定义的特定翻译单元或库不包含在链接过程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:07:37.660

您没有在 .cpp 文件中向我们展示 Qualifier::setQCode(QString) 的实现。

可能实现 cpp 文件中的参数与头文件中原型的参数不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:07:51.997

你有2个功能

```
void setCode(string code);

void setQCode(QString code); 
```

你可能忘记实现 setQCode 了吗？

# teamcity - 如何解决 White 在构建服务器上“卡住”的问题？

> ID：10516701
> 
> 赞同：0
> 
> 时间：2012-05-09T13:01:49.743
> 
> 标签：teamcity, white-framework, build-server

我有一个使用 White 的 GUI (winforms) 测试，它在开发中运行良好，但卡在构建服务器上。

它可以打开应用程序，但是一旦我尝试“做”任何事情：

```
Button Button = Window.Get<Button>("btnCalculate");
Button.Click(); 
```

它卡住了。服务器报告：

```
---- White.Core.UIItems.UIActionException : Window in still wait mode. Cursor: White.Core.InputDevices.MouseCursor, after waiting for 5000 ms
   at Bricks.RuntimeFramework.ReflectedObject.Invoke(MethodInfo methodInfo, Object[] arguments)
   at Bricks.DynamicProxy.DynamicProxyInterceptors.Process(IInvocation invocation, InterceptContext interceptedContext)
   at White.Core.Interceptors.CoreInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ButtonProxy6fcb23ab82174f67960e33c02ddb2259.Click()
   at WinCalc.Gui.Test.AcceptanceTests.WhiteTest() in d:\BuildServer\Agent\work\f00b471a939c7f96\WinCalculator\WinCalc.Gui.Test\AcceptanceTests.cs:line 39
----- Inner Stack Trace -----
   at White.Core.UIItems.Actions.Action.<Handle>b__2()
   at Bricks.Core.Clock.Perform(Do do, Matched matched, Expired expired)
   at White.Core.UIItems.Actions.Action.Handle(Window window)
   at White.Core.UIItems.WindowItems.Window.ActionPerformed(Action action)
   at White.Core.InputDevices.Mouse.ActionPerformed(ActionListener actionListener)
   at White.Core.InputDevices.Mouse.Click(Point point, ActionListener actionListener)
   at White.Core.UIItems.UIItem.PerformClick()
   at White.Core.UIItems.UIItem.Click() 
```

我从哪里开始尝试调试呢？

（我已经让它在另一台服务器上工作，所以我不相信这是我的代码，它是新服务器上的设置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:59:57.510

问题可能是因为构建代理上的服务无法实际创建窗口，因为它没有桌面。

您可以尝试的第一件事是在 teamcity 构建代理服务设置中确保“允许服务与桌面交互”。被检查。然后重新启动服务，并再次尝试运行测试。

过去，尽管我与该解决方案的结果不一致。我真的不知道原因的来龙去脉，但如果这不起作用，您可以尝试在登录到该框时在命令行中运行 Team City 代理。这绝对可以工作，如果您保持桌面正常运行，您可能会看到您的 Windows 已创建并在测试期间执行所需的任何操作。

# javascript - 小胡子模板：如何在主干视图中引用外部文件

> ID：10516703
> 
> 赞同：1
> 
> 时间：2012-05-09T13:02:00.937
> 
> 标签：javascript, backbone.js, mustache

以下代码（*）有效，但我不想使用：

```
$(this.el).html(Mustache.render("<h2>{{title}}</h2>", view)); 
```

我想要做：

```
$(this.el).html(Mustache.render("somePath/myFile.html", view)); 
```

我该怎么做？

(*)

```
render: function () 
{
    var view = {
        response: this.model.title
    };
    $(this.el).html(Mustache.render("<h2>{{{title}}}</h2>", view)); // it works
    $(this.el).html(Mustache.render("myFile.html", view)); // it does not work
}, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:20:49.160

你可以做 ：

```
$.get("myFile.html", function(html) { $(this.el).html(Mustache.render(html, view)) }); 
```

`$.get`是对文件的简写 AJAX 请求，然后使用文件的内容 ( `html`) 作为 HTML 供 Mustache 呈现。

# sql - PostgreSQL 索引性能增益/损失在短时间内生效

> ID：10516709
> 
> 赞同：1
> 
> 时间：2012-05-09T13:02:29.923
> 
> 标签：sql, performance, postgresql, indexing

我注意到，在我的 PostgreSQL 数据库中添加或删除索引时，效果（分别提高和降低性能）在 4-5 分钟后生效。同时我没有做任何服务器重启。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:02:28.953

这很可能是因为自动清理过程启动并更新了这些索引的统计信息（作为“副作用”）。

只有当统计数据是最新的，规划者才能充分利用它们。

尝试`analyze verbose your_table`在下次添加或删除索引时运行 a `your_table`，看看是否会立即“激活”它。如果是这样，那么是更新的统计数据导致了这种“延迟”

# testing - Python - Selenium - 生成鼠标点击

> ID：10516712
> 
> 赞同：0
> 
> 时间：2012-05-09T13:02:42.437
> 
> 标签：testing, automated-tests

我正在尝试硒网络驱动程序。我正在测试 youtube 类的网站，我想点击视频播放器的播放按钮。视频是嵌入到 Flash 中的，所以如何访问播放、暂停按钮。

是否有任何其他库可用于在特定鼠标坐标处生成点击并允许我记录测试用例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:20:33.217

我找到了 pymouse 库，它非常简单。

# iphone - iAds 不加载广告

> ID：10516715
> 
> 赞同：1
> 
> 时间：2012-05-09T13:02:48.373
> 
> 标签：iphone, objective-c, xcode

**iAds 不加载广告当我将应用程序发布到应用商店时，AdsBanner 仅是白色的 这是我放置的 iAds 的代码**

这是第一个方法块

```
-(void)bannerViewDidLoadAd:(ADBannerView *)banner{

if (self.bannerIsVisible) {
    [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
    //banner is invisible row and moved out of the screen on 50 px
    banner.frame = CGRectOffset(banner.frame, 0, 50);
    [UIView commitAnimations];
     self.bannerIsVisible = YES;

}

} 
```

* * *

这是第二个方法块

```
-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error{

if (self.bannerIsVisible) {
    [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
    //banner is invisible row and moved out of the screen on 50 px
    banner.frame = CGRectOffset(banner.frame, 0, -50);
    [UIView commitAnimations];
    self.bannerIsVisible = NO;

}

} 
```

* * *

这是第三个方法块

```
-(BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:   (BOOL)willLeave{

NSLog(@"Banner view is beginning an ad action");
BOOL shouldExecuteAction = YES;
if (!willLeave && shouldExecuteAction) {

    [UIImageView commitAnimations];

}
return shouldExecuteAction;

}

-(void)bannerViewActionDidFinish:(ADBannerView *)banner{

[UIImageView areAnimationsEnabled];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:58:14.633

在 iTunes Connect 中的“管理您的应用程序”部分中单击您的应用程序，然后单击“设置 iAd 网络”

![在此处输入图像描述](../Images/f6642cb1bdba87cb495f7215f82536c8.png)

# graphical-programming - 用于图形查询界面的 Web 应用程序的良好框架？

> ID：10516717
> 
> 赞同：0
> 
> 时间：2012-05-09T13:02:58.073
> 
> 标签：graphical-programming

我想开发一个 Web 应用程序，允许用户以图形方式构建和执行查询。基本上对似乎在外面激增的数百个 Web 应用程序框架一无所知，我求助于您的专家意见和良好的品味。它应该是：

*   装备精良以处理图形对象
*   易于与 DB 互连（可以是 MySQL、DB2 或其他）
*   对于多年前苦心制作一些摇摆 GUI，但现在基本上使用 Python、R 和 MATLAB 的人来说，这很容易学习 :)
*   最好是许可的开源许可

任何关于 Web 应用程序开发的教程和注意事项也非常受欢迎。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:07:39.690

在 php 编码中使用 symfony php 框架。很容易处理。 [http://www.symfony-project.org/](http://www.symfony-project.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:28.790

我更喜欢 Rails，但如果你精通 Python，那么你可以试试 Django。

# php - 表格排序器列宽

> ID：10516718
> 
> 赞同：1
> 
> 时间：2012-05-09T13:02:58.017
> 
> 标签：php, jquery, tablesorter

我想知道是否有人可以帮助我。

我已经使用jQuery整理了[这个](http://www.mapmyfinds.co.uk/development/finds.php)页面。`Tablesorter`该页面工作正常，但我正在尝试找到一种更改列宽的方法。

我已经阅读了文档和几个教程，但到目前为止，我未能成功允许用户更改此设置。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:48:54.610

经过更多研究后，我发现这是 IE css 的常见问题。解决方法是手动设置“td 宽度设置”，然后给出所需的列宽。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:34:54.517

我[在 github 上有一个 tablesorter](http://mottie.github.com/tablesorter/docs/index.html)的分支，其中包括一些额外的小部件。其中之一是可调整大小的列小部件 -[此处为演示](http://mottie.github.com/tablesorter/docs/example-widget-resizable.html)。我在这里只发布了可调整大小的小部件代码，但我认为您可能喜欢额外的存储脚本，它将列宽保存到小部件文件中包含的本地存储/cookies。

在此处获取小部件文件：http: [//mottie.github.com/tablesorter/js/jquery.tablesorter.widgets.js](http://mottie.github.com/tablesorter/js/jquery.tablesorter.widgets.js)

```
// Add Column resizing widget
// this widget saves the column widths if
// $.tablesorter.storage function is included
// **************************
$.tablesorter.addWidget({
    id: "resizable",
    format: function(table) {
        if ($(table).hasClass('hasResizable')) { return; }
        $(table).addClass('hasResizable');
        var i, j, w, s, c = table.config,
            $cols = $(c.headerList).filter(':gt(0)'),
            position = 0,
            $target = null,
            $prev = null,
            len = $cols.length,
            stopResize = function(){
                position = 0;
                $target = $prev = null;
                $(window).trigger('resize'); // will update stickyHeaders, just in case
            };
        s = ($.tablesorter.storage) ? $.tablesorter.storage(table, 'tablesorter-resizable') : '';
        // process only if table ID or url match
        if (s) {
            for (j in s) {
                if (!isNaN(j) && j < c.headerList.length) {
                    $(c.headerList[j]).width(s[j]); // set saved resizable widths
                }
            }
        }
        $cols
            .each(function(){
                $(this)
                    .append('<div class="tablesorter-resizer" style="cursor:w-resize;position:absolute;height:100%;width:20px;left:-20px;top:0;z-index:1;"></div>')
                    .wrapInner('<div style="position:relative;height:100%;width:100%"></div>');
            })
            .bind('mousemove', function(e){
                // ignore mousemove if no mousedown
                if (position === 0 || !$target) { return; }
                var w = e.pageX - position,
                    n = $prev;
                // make sure
                if ( $target.width() < -w || ( $prev && $prev.width() <= w )) { return; }
                // resize current column
                $prev.width( $prev.width() + w );
                position = e.pageX;
            })
            .bind('mouseup', function(){
                if (s && $.tablesorter.storage && $target) {
                    s[$prev.index()] = $prev.width();
                    $.tablesorter.storage(table, 'tablesorter-resizable', s);
                }
                stopResize();
                return false;
            })
            .find('.tablesorter-resizer')
            .bind('mousedown', function(e){
                // save header cell and mouse position
                $target = $(e.target).closest('th');
                $prev = $target.prev();
                position = e.pageX;
            });
        $(table).find('thead').bind('mouseup mouseleave', function(){
            stopResize();
        });
    }
}); 
```

# php - php MySQL获取字符串之间的差异

> ID：10516720
> 
> 赞同：0
> 
> 时间：2012-05-09T13:03:11.733
> 
> 标签：php, mysql

我的脚本满足要求，但出于这个原因会触发数千个查询，因此需要 50-65 秒。我正在寻找替代的、更优雅和快速的解决方案。

```
SELECT GROUP_CONCAT(DISTINCT BatchNo SEPARATOR ', ') AS picklists, web_company_name
FROM PickBatch 
LEFT JOIN customer_master ON customer_master.VC_CUSTOMER_CODE = PickBatch.Customer
GROUP BY Customer 
```

这将返回列选项列表，例如 4334、3443、3341、4543

之后，我必须将它与另一列一一比较

```
while( $row=mysql_fetch_array($res) )
{   
     $picklists = explode(', ', $row['picklists']);
     $pickString = '';
     foreach($picklists as $batch)
     {
         //invoiced
         $sql2 = "SELECT invoice_no FROM invoice_web_order WHERE FIND_IN_SET('$batch', frombatch) LIMIT 1";
         $res2 = mysql_query($sql2) or die(mysql_error());
         if ( mysql_num_rows($res2) > 0 )
         {
             continue;
         }   
        $pickString .= "$batch, ";
    }
    echo $pickString;
} 
```

因此，例如将 4334、3443、3341、4543 与“frombatch”中的 3892、4890、3341、2389 进行比较，将排除 3343。

有没有其他方法可以做到这一点？那么只有 4334、3443、4543 会被返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:21:52.330

似乎您只是想知道 PickBatch 中存在哪些批号，而这些批号在 invoice_web_order 表中任何行的 frombatch 列中的某处尚不存在。

```
Table: PickBatch
BatchNo
4334
3443
3341
5453

Table: invoice_web_order
frombatch
3982, 4890, 3341, 2389
####, ####, ####
####, ####, ####, ####

SELECT DISTINCT batchno FROM PickBatch LEFT JOIN invoice_web_order ON FIND_IN_SET(batchno, frombatch) WHERE invoice_web_order.frombatch IS NULL 
```

您还按客户进行了分组，我不知道为什么。如果您解释，我可以在适当的情况下帮助将其纳入此解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:17:58.710

你能提供表格定义吗？

```
SELECT 
    DISTINCT BatchNo as BN, 
    GROUP_CONCAT(DISTINCT BatchNo SEPARATOR ', ') AS picklists, 
    web_company_name
FROM PickBatch
LEFT JOIN customer_master ON customer_master.VC_CUSTOMER_CODE = PickBatch.Customer
WHERE PickBatch.BN <>      (SELECT frombatch 
                            FROM invoice_web_order 
                            WHERE FIND_IN_SET(PickBatch.BN, frombatch)
                            LIMIT 1)
GROUP BY Customer 
```

# android - 带有按钮的 Android 通知

> ID：10516722
> 
> 赞同：19
> 
> 时间：2012-05-09T13:03:17.573
> 
> 标签：android, android-notifications

我正在尝试使用 2 个按钮发出通知：

*   一个带我回到活动
*   另一个关闭它

有没有人知道如何捕捉按钮点击事件（记住活动已暂停）？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-09T07:49:47.363

我很高兴发布它！工作了一夜之后，我发现了一些东西。所以，我们开始吧！

**1\. 为您的通知创建一个 xml 布局文件。**

**2\. 使用 Notification.Builder 创建通知。添加您想要的所有内容（图标、声音等）后，请执行以下操作：**

```
 //R.layout.notification_layout is from step 1

        RemoteViews contentView=new RemoteViews(ctx.getPackageName(), R.layout.notification_layout);

        setListeners(contentView);//look at step 3

        notification.contentView = contentView; 
```

**3\. 创建方法setListeners。在这个方法中，你必须这样写：**

```
 //HelperActivity will be shown at step 4

    Intent radio=new Intent(ctx, packagename.youractivity.class);  
    radio.putExtra("AN_ACTION", "do");//if necessary

    PendingIntent pRadio = PendingIntent.getActivity(ctx, 0, radio, 0);
    //R.id.radio is a button from the layout which is created at step 2  view.setOnClickPendingIntent(R.id.radio, pRadio); 

    //Follows exactly my code!
    Intent volume=new Intent(ctx, tsapalos11598712.bill3050.shortcuts.helper.HelperActivity.class);
    volume.putExtra("DO", "volume");</p>

    //HERE is the whole trick. Look at pVolume. I used 1 instead of 0.
    PendingIntent pVolume = PendingIntent.getActivity(ctx, 1, volume, 0);
    view.setOnClickPendingIntent(R.id.volume, pVolume); 
```

**4\. 对于我的要求，我使用了一个响应意图的 HelperActivity。但对你来说，我认为没有必要。**

如果你想要完整的源代码，你可以浏览它或从我的 git repo 下载它。该代码是供个人使用的，所以不要期望阅读带有大量注释的华丽代码。[https://github.com/BILLyTheLiTTle/AndroidProject_Shortcuts](https://github.com/BILLyTheLiTTle/AndroidProject_Shortcuts)

以上所有内容，回答了从不同按钮捕获事件的问题。

关于取消通知我将您重定向到这里

[如何在 Android 中清除通知](https://stackoverflow.com/questions/2665634/how-to-clear-a-notification-in-android)

请记住在第一次调用通知时使用您在通知方法中解析的 id

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-02T19:34:29.587

这里有一个完整的例子

```
 //Add this code to onCreate or some onclick Buttton
    NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    NotificationCompat.Builder builder = new NotificationCompat.Builder(getApplicationContext());
    long when = System.currentTimeMillis();
    builder.setSmallIcon(R.drawable.ic_notification);
    Intent notificationIntent = new Intent(getApplicationContext(), notificationActivity.class).putExtra("notification", "1");
    PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 1, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    builder.setContentIntent(contentIntent);
    Notification notification = builder.getNotification();
    notification.when = when;

    RemoteViews remoteViews = new RemoteViews(getApplicationContext().getPackageName(), R.layout.notification_view);
    remoteViews.setTextViewText(R.id.tvName, "New Name");
    listener(remoteViews,getApplicationContext());

    notification.contentView = remoteViews;
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    manager.notify(1, notification); 
```

然后你可以定义监听器方法：

```
 public void listener(RemoteViews remoteViews, Context context) {
    // you have to make intetns for each action (your Buttons)
    Intent intent = new Intent("Accept");
    Intent intent2 = new Intent("Reject");

    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,1,intent,0);
    PendingIntent pendingIntent2 = PendingIntent.getBroadcast(context,1,intent2,0);

    // add actions here !
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction("Accept");
    intentFilter.addAction("Reject");

    BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals("Accept")){
                Toast.makeText(context, "Accepted !!", Toast.LENGTH_SHORT).show();
            } else if(intent.getAction().equals("Reject")) {
                Toast.makeText(context, "Rejected !!", Toast.LENGTH_SHORT).show();
            }
        }
    };

    context.registerReceiver(receiver,intentFilter);
    remoteViews.setOnClickPendingIntent(R.id.ivRequest,pendingIntent);
    remoteViews.setOnClickPendingIntent(R.id.ivReject,pendingIntent2);

} 
```

这是notification_view 布局，用于定制您的通知。

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="16dp">

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:text="Request from "
    />

<TextView
    android:id="@+id/tvName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginStart="15dp"
    android:layout_toRightOf="@id/textView"
    android:text="Amin"
    />

<ImageView
    android:id="@+id/ivRequest"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_alignParentEnd="true"
    android:layout_centerVertical="true"
    android:src="@drawable/notification"
    />

<ImageView
    android:id="@+id/ivReject"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_marginEnd="10dp"
    android:layout_toLeftOf="@id/ivRequest"
    android:layout_centerVertical="true"
    android:src="@drawable/trash"
    />

  </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T13:13:50.253

至于 ICS，这个问题很容易回答，因为所需的行为反映了默认通知：您可以将通知向右滑动以**关闭**通知，并且您可以定义在用户按下它时将其发送到哪个**活动**`PendingIntent`，只需使用：

```
// The PendingIntent to launch our activity if the user selects this
// notification.  Note the use of FLAG_CANCEL_CURRENT so that, if there
// is already an active matching pending intent, cancel it and replace
// it with the new array of Intents.
PendingIntent contentIntent = PendingIntent.getActivities(this, 0,
        makeMessageIntentStack(this, from, message), PendingIntent.FLAG_CANCEL_CURRENT); 
```

代码取自[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T08:16:01.893

如果要将特定意图分配给按钮：

```
views.setOnClickPendingIntent(R.id.your_button_id, pendingIntent); 
```

我想您只需要在单击按钮时发送一个意图，因此您必须避免设置主要通知意图

```
notification.contentIntent = yourPendingIntent; 
```

否则（如果你像往常一样设置“notification.contentIntent = pendingIntent;”）两个意图都将被调用，这可能不是你想要的/用户期望的。

如果您仍想按下通知的其他部分调用该一般意图（或任何其他），您可以使用与上述相同的按视图分配意图的方法。不要忘记设置

```
android:clickable="true" 
```

到您想要跟踪 onClick() 的任何视图。

您可以通过他们调用的活动中的额外内容来跟踪这些意图。**如果**您**调用主/启动器活动**，那么您将在此处跟踪它们（因为它来自此方法的 javadoc）：

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    Bundle data = intent.getExtras();

    if (data != null && data.containsKey(YOUR_INTENT_KEY_SOURCE_CONSTANT)) {
       // process your notification intent
    }

    // go on with smth else
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-19T19:23:16.997

您可以`Notification`通过为您设置操作并为每个操作`Notification.Builder`定义来简单地添加操作按钮`PendingIntent`

下面是示例代码：

```
 NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(this)
                .setSmallIcon(R.drawable.notification_icon)
                .setContentTitle("My notification")
                .setContentText("Hello World!")
       .addAction(R.drawable.action_posetive,"posetive",PendingIntent.getActivity(0,intent,0))
.addAction(R.drawable.action_clear,"clear",PendingIntent.getActivity(0,intent,0));
        NotificationManager mNotificationManager =
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(0, mBuilder.build()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-18T12:18:09.687

对我来说，这很有用..我将写下整个示例.. **这是用于通知创建**

```
public void createNotification2(String aMessage) {
    final int NOTIFY_ID = 11;
    String name = getString(R.string.app_name);
    String id = getString(R.string.app_name); // The user-visible name of the channel.
    String description = getString(R.string.app_name); // The user-visible description of the channel.
    NotificationCompat.Builder builder;
    if (notifManager == null) {
        notifManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    }
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        int importance = NotificationManager.IMPORTANCE_HIGH;
        NotificationChannel mChannel = notifManager.getNotificationChannel(id);
        if (mChannel == null) {
            mChannel = new NotificationChannel(id, name, importance);
            mChannel.setDescription(description);
            mChannel.enableVibration(true);
            mChannel.setLightColor(getColor(R.color.colorPrimaryDark));
            mChannel.setVibrationPattern(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400});
            notifManager.createNotificationChannel(mChannel);
        }
    } else {

    }
    Intent Off_broadcastIntent = new Intent(this, Database_Update.class);
    Off_broadcastIntent.setAction("on");
    Off_broadcastIntent.putExtra("toastMessage", "1");
    PendingIntent Off_actionIntent = PendingIntent.getService(this, 0, Off_broadcastIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    Intent on_broadcastIntent = new Intent(this, Database_Update.class);
    on_broadcastIntent.setAction("off");
    on_broadcastIntent.putExtra("toastMessage", "0");
    PendingIntent on_actionIntent = PendingIntent.getService(this, 0, on_broadcastIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    Intent cancel_broadcastIntent = new Intent(this, Database_Update.class);
    cancel_broadcastIntent.setAction("cancel");
    cancel_broadcastIntent.putExtra("toastMessage", "close");
    PendingIntent cancel_actionIntent = PendingIntent.getService(this, 0, cancel_broadcastIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    Intent content_intent = new Intent(this, Status_Page.class);
    content_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, content_intent, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this, id)
            .setSmallIcon(android.R.drawable.ic_popup_reminder)
            .setContentTitle(name)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setContentIntent(pendingIntent)
            .setAutoCancel(false)
            .setVibrate(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400})
            .addAction(R.drawable.block, "ON", Off_actionIntent)
            .addAction(R.drawable.notification, "OFF", on_actionIntent)
            .addAction(R.drawable.clear, "CLOSE", cancel_actionIntent);
    Notification notification = mBuilder.build();
    notification.flags = Notification.FLAG_NO_CLEAR|Notification.FLAG_ONGOING_EVENT;
    notifManager.notify(11, notification);
} 
```

**在 Android 清单中**

```
<service android:name=".Database_Update"></service> 
```

**这是服务等级**

```
public class Database_Update extends Service {
String result="";

Realm realm;
BlockList blockList;
@Override
public void onCreate() {
    try {
        RealmConfiguration config = new RealmConfiguration.Builder()
                .name("notification.realm")
                .schemaVersion(1)
                .deleteRealmIfMigrationNeeded()
                .build();
        realm = Realm.getInstance(config);

    } catch (Exception e) {

        Log.d("Error Line Number", Log.getStackTraceString(e));
    }
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    //Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();
    Log.d("SERVICE","SERVICE CHECKING");
    result=intent.getStringExtra("toastMessage");
    Log.d("SERVICE",result);
    if (realm!=null){
        Log.d("SERVICE","realm working");
    }else {
        Log.d("SERVICE","Realm not working");
    }
    blockList=realm.where(BlockList.class).equalTo("package_name", "BLOCK_ALL").findFirst();
    try {
        Log.d("SERVICE",blockList.getStatus());
    } catch (Exception e) {
        Log.d("Error Line Number", Log.getStackTraceString(e));
    }
    realm.beginTransaction();
    if (result.equals("1")){
        if (blockList==null){
            BlockList blockList_new=realm.createObject(BlockList.class);
            blockList_new.setPackage_name("BLOCK_ALL");
            blockList_new.setStatus("yes");
        }else {
            blockList.setStatus("yes");
        }
        Log.d("SERVICE","BLOCKING NOTIFICATION");
        Toast.makeText(this, "BLOCKING", Toast.LENGTH_SHORT).show();
    }else if (result.equals("0")){
        if (blockList==null){
            BlockList blockList_new=realm.createObject(BlockList.class);
            blockList_new.setPackage_name("BLOCK_ALL");
            blockList_new.setStatus("no");
        }else {
            blockList.setStatus("no");
        }
        Log.d("SERVICE","ALLOW NOTIFICATION");
        Toast.makeText(this, "ALLOW NOTIFICATION", Toast.LENGTH_SHORT).show();
    }else if (result.equals("close")){
        NotificationManager manager = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);
        manager.cancel(11);
        Log.d("SERVICE","REMOVING");
        Toast.makeText(this, "CLOSED", Toast.LENGTH_SHORT).show();
    }
    realm.commitTransaction();
    return START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    // We don't provide binding, so return null
    return null;
}

@Override
public void onDestroy() {
    if (realm!=null){
        realm.close();
    }
    Toast.makeText(this, "REMOVING", Toast.LENGTH_SHORT).show();
}
} 
```

# javascript - appendChild 不起作用

> ID：10516736
> 
> 赞同：1
> 
> 时间：2012-05-09T13:04:14.427
> 
> 标签：javascript, appendchild

首先：我对javascript的了解不多。所以 appendChild 方法有问题。那是我的代码：

```
var wrapper = document.getElementsByClassName('innerWrap');
var post = document.createElement('input');
post.style.position = "absolute";
post.style.top = "100px";
document.wrapper.appendChild(post); 
```

为什么它不起作用？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:06:24.603

`getElementsByClassName`返回 NodeList，而不是 Node

所以你可以试试`var wrapper = document.getElementsByClassName('innerWrap')[0];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:05:49.200

你有没有尝试过

```
wrapper.appendChild(post); 
```

代替

```
document.wrapper.appendChild(post); 
```

?

# regex - 正则表达式 - 解析 Csv 文本

> ID：10516740
> 
> 赞同：2
> 
> 时间：2012-05-09T13:04:30.827
> 
> 标签：regex, vb.net, parsing, csv

所以这里有很多帖子说明我应该使用 Vb.Net TextFiledParser，而不是滚动我自己的 csv 解析器。

我试过了，但是如果我错了，请告诉我，它会根据单个分隔符进行解析。

因此，如果我有一个地址字段“Flat 1, StackOverflow House, London”，我会得到三个字段。不幸的是，这不是我想要的。我需要给定单元格中的所有内容都保留为数组中的单个项目。

所以我开始编写自己的正则表达式，如下所示：

```
var testString = @"""Test 1st string""" + "," + @"""Flat 1, StackOverflow House, London, England, The Earth""" + "," + "123456";

var matches = Regex.Matches(chars, @"""([^""\\])*?(?:\\.[^""\\]*)*?""");
var numbers = Regex.Matches(chars, @"\d+$");//only numbers
Assert.That(results.Count(), Is.EqualTo(3));
Assert.That(secondMatch.Count, Is.EqualTo(1)); 
```

第一个断言失败，因为没有返回字符串“123456”。该表达式仅返回“Test 1st string”和“Flat 1, StackOverflow House, London, England, The Earth”

我想要的是正则表达式返回所有引用\转义和数字。

我不控制数据，但数字字符串将全部被引用\转义，而数字不会。

我真的很感激一些帮助，因为我绕着圈子尝试第三方库，但没有取得多大成功。

不用说 string.split 在地址的情况下不起作用，而且[http://www.filehelpers.com/](http://www.filehelpers.com/)似乎没有考虑这些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:27:21.950

只是为了让您了解您所面临的问题：这是一个应该可以很好地工作的正则表达式。但是你肯定需要测试一下它，因为 CSV 有很多极端情况，我肯定会错过一些（而且我假设逗号作为分隔符和`"`引号字符（通过加倍转义））：

```
(?:           # Match either
 (?>[^",\n]*) #  0 or more characters except comma, quote or newline
|             # or
 "            #  an opening quote
 (?:          #  followed by either
  (?>[^"]*)   #   0 or more non-quote characters
 |            #  or
  ""          #   an escaped quote ("")
 )*           #  any number of times
 "            #  followed by a closing quote
)             # End of alternation
(?=,|$)       # Assert that the next character is a comma (or end of line) 
```

在 VB.NET 中：

```
Dim ResultList As StringCollection = New StringCollection()
Dim RegexObj As New Regex(
    "(?:            # Match either" & chr(10) & _
    " (?>[^"",\n]*) #  0 or more characters except comma, quote or newline" & chr(10) & _
    "|              # or" & chr(10) & _
    " ""            #  an opening quote" & chr(10) & _
    " (?:           #  followed by either" & chr(10) & _
    "  (?>[^""]*)   #   0 or more non-quote characters" & chr(10) & _
    " |             #  or" & chr(10) & _
    "  """"         #   an escaped quote ("""")" & chr(10) & _
    " )*            #  any number of times" & chr(10) & _
    " ""            #  followed by a closing quote" & chr(10) & _
    ")              # End of alternation" & chr(10) & _
    "(?=,|$)        # Assert that the next character is a comma (or end of line)", 
    RegexOptions.Multiline Or RegexOptions.IgnorePatternWhitespace)
Dim MatchResult As Match = RegexObj.Match(SubjectString)
While MatchResult.Success
    ResultList.Add(MatchResult.Value)
    MatchResult = MatchResult.NextMatch()
End While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:13:32.087

我用来快速绕过它的一种 hacky 方法是首先`Split`使用引号，然后在每个其他索引之间，去掉引号（或用某些东西替换它们）。然后再把`Split`字符串放在逗号上

刚刚发现这个：[解析 CSV 数据的 Javascript 代码](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)- 我很欣赏它是 JavaScript 而不是 vb.net。但是，您应该能够关注它

另外[，如何使用 Javascript 解析 CSV 字符串，其中包含数据中的逗号？](https://stackoverflow.com/questions/8493195/how-can-i-parse-a-csv-string-with-javascript)

# c# - asp.net c# 防止在从服务器端代码更改索引时触发 selectedindexchanged 事件

> ID：10516744
> 
> 赞同：3
> 
> 时间：2012-05-09T13:04:52.623
> 
> 标签：c#, asp.net

我在同一个 aspx 页面上有两个下拉列表控件

```
<asp:DropDownList ID="ddlM" runat="server" Width="123px" AutoPostBack="True" OnSelectedIndexChanged="ddlM_SelectedIndexChanged">
</asp:DropDownList>

<asp:DropDownList ID="ddlC" runat="server" Width="123px" AutoPostBack="True" OnSelectedIndexChanged="ddlC_SelectedIndexChanged">
</asp:DropDownList> 
```

两者的 OnSelectedIndexChanged 的​​ C# 代码如下：

```
protected void ddlC_SelectedIndexChanged(object sender, EventArgs e)
{
   ddlM.SelectedIndex = 0;
   ViewState["ddlC"] = true;
   ViewState["ddlM"] = false;                 
   BindPGrid();            
}

protected void ddlM_SelectedIndexChanged(object sender, EventArgs e)
{
   ddlC.SelectedIndex = 0;                
   ViewState["ddlC"] = false;
   ViewState["ddlM"] = true; 
   BindPGrid();
} 
```

两者都使用一些服务器端代码由数据库记录项填充。现在，“ddlM”的 OnSelectedIndexChanged 事件我想选择“ddlC”的第一个索引，但不触发事件 ddlC_SelectedIndexChanged。对于“ddlC”，与“ddlC”的 OnSelectedIndexChanged 事件相同，我想选择“ddlM”的第一个索引，但不触发事件 ddlM_SelectedIndexChanged。不对，它会触发事件。我该怎么做才能防止它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:11:17.910

或者，您可以从控件中删除并重新添加 SelectedIndexChanged 事件处理程序

```
 ddlM.SelectedIndexChanged -= ddlM_SelectedIndexChanged;

 ddlM.SelectedIndex = 0;
 ViewState["ddlC"] = false;
 ViewState["ddlM"] = true; 
 BindPGrid();

 ddlM.SelectedIndexChanged += ddlM_SelectedIndexChanged; 
```

然后你不必弄乱全局标志

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T13:09:13.027

在这种情况下，我们创建一个全局`bool`标志并将其值设置为`true`before changed `SelectedIndexChanged`。并在另一个控件中`SelectedIndexChanged`检查其值是否为真。如果为真，我们将它返回到事件之外。并在外面时再次更改标志值。确保始终将标志值更改回 false，否则如果该事件由同一控件生成，它将永远不会触发。

```
boool flag = false;

protected void ddlC_SelectedIndexChanged(object sender, EventArgs e)
{
   flag = true;
   ddlM.SelectedIndex = 0;
   flag = false;
   ViewState["ddlC"] = true;
   ViewState["ddlM"] = false;                 
   BindPGrid();            
}

protected void ddlM_SelectedIndexChanged(object sender, EventArgs e)
{
   if(flag)
       return;

   ddlC.SelectedIndex = 0;                
   ViewState["ddlC"] = false;
   ViewState["ddlM"] = true; 
   BindPGrid();
} 
```

或者您可以删除事件处理程序，例如

```
protected void ddlC_SelectedIndexChanged(object sender, EventArgs e)
{
   ddlM.SelectedIndexChanged -= ddlM_SelectedIndexChanged;
   ddlM.SelectedIndex = 0;
   ddlM.SelectedIndexChanged += ddlM_SelectedIndexChanged;
   ViewState["ddlC"] = true;
   ViewState["ddlM"] = false;                 
   BindPGrid();            
} 
```

# cassandra - cassandra-cli 在批处理模式下删除后立即设置，设置迷路

> ID：10516751
> 
> 赞同：3
> 
> 时间：2012-05-09T13:05:13.530
> 
> 标签：cassandra

我们有一个由两个节点组成的 cassandra（简单）集群。

在从定制转储恢复期间，我们发现当我们有类似的行时

```
del column_family['row_1'];
set column_family['row_1']['column1'] = '123';
set column_family['row_1']['column2'] = '456';
set column_family['row_1']['column3'] = '789'; 
```

...通常第一列（column_1）没有设置。

我们用了 ：

```
$ cassandra-cli -h cassandra.host.name -k keyspace_name -f dump_file 
```

我们在 Debian 主机上使用 cassandra 1.0.10。

转储总是丢弃然后重新创建键空间，所以当我们执行它时它实际上是空的。我们知道删除语句实际上是不需要的。

我们删除了它，但我们仍然无法理解为什么会发生这种情况。我想这是由设计上的这种方式引起的，我们只是错过了，但我们无法弄清楚到底是什么“错误”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:58:10.060

我猜这里发生的事情是行墓碑的时间戳（来自行删除）和一个或多个列写入最终具有相同的值。Cassandra-cli 遵循使用毫秒作为时间戳值的通用约定，因此当删除和插入立即相互跟随时，这是很有可能的。

当插入的列和墓碑具有相同的时间戳时，墓碑获胜。因此，您的第一列似乎会消失是有道理的。

在您的情况下，可以通过使用显式时间戳编写删除，然后使用该时间戳加一编写其他列来解决问题。这种事情通常不是必需的，但请记住，这些写入是为了使它们中的每一个都可以转到不同的 Cassandra 节点，而用户仍然能够随时获得正确的结果。时间戳是冲突解决机制。

# magento - Magento UPS 插件

> ID：10516756
> 
> 赞同：0
> 
> 时间：2012-05-09T13:05:44.270
> 
> 标签：magento

我的一个客户喜欢用 UPS 发送他的货物。

此时我尝试了 Magento 的默认 UPS 插件，但不起作用。听说有人说默认插件只能在VS中使用。那正确吗？我的客户住在荷兰。我们是否需要为 Dutch Magento 商店提供特殊插件，还是可以使用默认插件？

非常感谢！

问候， Jelle Pals

# .net - 从二进制下载中读取 db2 clob

> ID：10516759
> 
> 赞同：0
> 
> 时间：2012-05-09T13:05:52.387
> 
> 标签：.net, db2, clob, ebcdic

一年多以前，我询问了如何在 .Net 程序中读取 DB2 EBCDIC 数据。非常有用的[答案](https://stackoverflow.com/questions/5109302/how-to-read-ebcdic-data-with-a-non-standard-codepage-and-not-mess-up-numbers)包括读取 VARCHAR 列的例程。

我现在面临阅读 CLOB 专栏。

它们的内部结构是否相似，第一个单词包含实际大小？或者是整个词，考虑到 CLOB 的可能长度要大得多？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:14:06.627

不是大型机而是 DB2/400（中型）似乎在表本身的外部存储 CLOB 字段：

```
CREATE TABLE QTEMP/T1 (F1 CLOB(512))
INSERT INTO QTEMP/T1 (F1) VALUES ('TEST')

SELECT * FROM QTEMP/T1

F1
*POINTER 
```

**DSPPFM QTEMP/T1**

```
* . . .  + . . .  . 1 . .  . . + .  . . . 2  . . . .  + . . .  . 3 . .
00000000 00000000 00000000 00000000 5CD7D6C9 D5E3C5D9 40404040 40404040

*...+....1....+....2....+....3..
*POINTER 
```

您没有使用[DB/2 驱动程序](http://www-01.ibm.com/software/data/db2/db2connect/)访问数据库来处理所有这些细节是否有任何特殊原因？这就像通过尝试解析 .MDF 文件从 SQL Server 读取。

* * *

请参阅[IBM 红皮书 | 使用 DB2 for z/OS 和 OS/390 的大型对象](http://www.redbooks.ibm.com/Redbooks.nsf/RedbookAbstracts/SG246571.html)第 4.4.1 章*LOB 表空间组织*以获取更多信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T21:35:49.623

这是有关如何执行此操作的更详细说明[http://ripalsoni.wordpress.com/2008/07/24/how-do-i-read-write-oracle-clob-data-in-aspnet-or- VB网/](http://ripalsoni.wordpress.com/2008/07/24/how-do-i-read-write-oracle-clob-data-in-aspnet-or-vbnet/)

第 1 步：添加引用 – Oracle.Dataaccess.dll（在 ODP.NET 中找到）

第 2 步：导入以下命名空间

```
 Imports Oracle.DataAccess.Client
    Imports Oracle.DataAccess.Types 
```

第 3 步：创建连接字符串

```
 Public ReadOnly connectionstring = "data source = oradb;user id = rmsoni;password=rmsoni99" 
```

第 4 步：创建以下公共方法

```
Public Sub ReadLOBData()
Dim con As New OracleConnection(connectionstring)
con.Open()
Dim sql As String = "select CLOBTEXTFIELD from TestCLOB where ID=1"
Dim cmd As OracleCommand = New OracleCommand(sql, con)
Dim dr As OracleDataReader = cmd.ExecuteReader()
dr.Read()
Dim blob As OracleClob = dr.GetOracleClob(0)
txtOutput.Text = blob.Value()
blob.Close()
dr.Close()
con.Close()
End Sub 
```

完整的源代码——</p>

```
Public Sub WriteLOBData()
Dim connection As New OracleConnection(connectionstring)
connection.Open()

Dim strSQL As String = "INSERT INTO TestCLOB (ID,CLOBTEXTFIELD) VALUES (1,:TEXT_DATA) "
Dim paramData As New OracleParameter
paramData.Direction = ParameterDirection.Input
paramData.OracleDbType = OracleDbType.Clob
paramData.ParameterName = "TEXT_DATA"
paramData.Value = txtInput.Text

Dim cmd As New OracleCommand
cmd.Connection = connection
cmd.Parameters.Add(paramData)
cmd.CommandText = strSQL
cmd.ExecuteNonQuery()

paramData = Nothing
cmd = Nothing
connection.Close()
End Sub 
```

# javascript - yii 脚本发布和注册

> ID：10516764
> 
> 赞同：1
> 
> 时间：2012-05-09T13:06:17.967
> 
> 标签：javascript, yii

我有一个 ajax 调用，我将 renderFile 的输出作为 Json 对象返回。在呈现的文件中，我发布并注册了一个脚本文件。但是，当呈现的 html 附加到 body 元素时，不会加载脚本。加载其他静态列出的脚本。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:09:52.017

当您调用 render() 或使用 processOutput 参数 = true 调用 renderPartial() 时，将包含已注册的脚本。

# javascript - 在 Firefox 中禁用 cookie 后访问本地存储会出现安全错误

> ID：10516767
> 
> 赞同：2
> 
> 时间：2012-05-09T13:06:26.053
> 
> 标签：javascript, firefox, local-storage

我在 Firefox 中看到奇怪的行为。我有一个使用本地存储的小型网络应用程序。我禁用 cookie 并运行我的应用程序。访问本地存储时会引发安全错误。应用程序不运行。在 chrome 应用程序上运行但一个`uncaught_error : QUOTA_EXCEEDED_ERROR`来了。这是我访问本地存储的方式

```
_infSt = ((!!window.localStorage) && (!!window.atob));
if(_infSt){ 
    _infLJsV = window.localStorage.getItem( 'infJsV' );
    if(_infLJsV === _infJsV) {
        var strjL = window.localStorage.getItem( 'infJqN' );
        if(strjL != ''){ 
            inFjL = strjL;
        }
    }
} 
```

`_infSt = ((!!window.localStorage) && (!!window.atob));`在 Firefox 8.0 中，我在这条线上运行时出错。在 Firefox 10.00 中，我在尝试`atob(inFjL);`

在这个世界上，禁用 cookie 和本地存储是如何关联的？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T00:01:44.253

它是链接的，因为 localStorage 只是类固醇上的 cookie：它是一种在用户机器上永久保存每个站点数据的方法，具有对一个站点的读写访问权限。

因此，如果用户禁用 cookie（例如出于隐私原因），他们也确实想禁用 localStorage。因此，这就是浏览器所做的。

# perl - Perl - 使用 sed 或 tail 删除内联文件的第一行并将第一行返回给 var

> ID：10516771
> 
> 赞同：0
> 
> 时间：2012-05-09T13:06:33.837
> 
> 标签：perl, sed, tail

这对我来说很新，但是，我正在慢慢地接受它。

我需要打开一个文件，将第一行返回给 var 做一些事情，然后在事情成功后从文件中删除第一行。

在 mt 脚本中，除了第一行之外的所有内容都打印到屏幕上。

```
$file = 'test.txt';

system "tail -n+2 /home/username/public_html/adir/$file"; 
```

现在我在这里做了一些探索，发现：

```
system "sed -i '1d' home/username/public_html/adir/$file"; 
```

这应该删除文件内联的第一行。（我没试过）

如果我也可以将第一行返回到 $variable 来做一些事情，那将是完美的。

如果事情失败了，我可以将该行添加回文件中。

我知道我可以用一堆带有数组的 FILE < 和 > 来做到这一点，但似乎有点多。

文件很小，不到 100 行，每行 6 个字符。

我对为此追求 sed 或 tail 一无所知吗？

如何使用这些系统调用将删除的行作为 $line 返回？

感谢学习经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:15:37.167

我不喜欢将这个想法用于出色`system()`的任务。`perl`

怎么样？

```
use warnings;
use strict;

open my $fh, q[<], $ARGV[0] or die $!; 

## Read from the filehandle in scalar context, so it will read only
## first line.
my $first_line = <$fh>;

# do stuff with first line...

## And if stuff was successful, read left lines (all but the first one) and
## print them elsewhere. 
while ( <$fh> ) { 
    print;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:37:19.580

[听起来像是Tie::File](https://metacpan.org/module/Tie%3a%3aFile)非常适合的那种东西。

```
#!/usr/bin/perl

use strict;
use warnings;
use Tie::File;

my $file = 'test.txt';

tie my @array, 'Tie::File', $file or die "Count not tie file: $file: $!";

my $line = $array[0];

if (do_something_successfully()) {
  shift @array;
} 
```

# wpf - XamlReader.Parse() 的工作方式是否与 BackgroundWorker 线程不同？

> ID：10516774
> 
> 赞同：1
> 
> 时间：2012-05-09T13:06:47.427
> 
> 标签：wpf, xaml

我正在从数据库中检索 xaml 字符串并构建 xaml 画布。

通话

```
 loadedCanvas = (Canvas)System.Windows.Markup.XamlReader.Parse(xamlTemplate); 
```

从 UI 线程工作正常。当我尝试从 BackgroundWorker 线程执行相同的操作时，我得到一个 XamlParseException，其中包含指向第一个 Canvas 标记的消息“无法创建未知类型 Canvas”。

两种情况下的 xaml 都是相同的。

我觉得我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:11:13.817

我不确定您为什么会收到特定的错误消息（这是误导性的），但您无法从非 UI 线程加载 XAML；即使可以，您也将无法从 UI 线程中使用它们，因为 WPF 控件具有线程关联性。

您无法从非 UI 加载的原因（技术上的限制是“非 STA 线程”）是 UI 元素要求当前线程为 STA 以进行编组，如果您当前位于 MTA 中，则会引发异常线。使用的托管线程池`BackgroundWorker`只有 MTA 线程。

TL;DR：您需要在 UI 线程中执行此操作。

# cakephp - Dreamhost 上的 CakePHP 500 内部服务器错误

> ID：10516775
> 
> 赞同：4
> 
> 时间：2012-05-09T13:06:48.190
> 
> 标签：cakephp, hosting, dreamhost, cakephp-2.1

当我尝试在 DreamHost 上的服务器上托管 CakePHP 站点时，出现以下错误

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webmaster@reelstubs.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

链接到 URL

> [http://reelstubs.com/](http://reelstubs.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:23:24.047

我在 MediaTemple (ve) 服务器上遇到了同样的问题。CakePHP 2.1.3 的标准、简单安装在我网站的根目录中。

对我来说，解决方法是在 .htaccess 中添加 RewriteBase 行：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

所以**RewriteBase /**行（包括末尾的斜杠）对我有用。

!important：对所有三个 .htaccess 文件执行此操作，位于：**root**、**/app**和**/app/webroot**文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:08:26.553

在摆弄控制面板中的选项后，我得到了这个工作。

转到域 > 编辑要在其中安装 CakePHP 的域

![在此处输入图像描述](../Images/5d2cbf2a65240a9ded9a58ae1e4ea822.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T10:13:37.527

在我的 htaccess 文件中添加“RewriteBase /”对我有用。我只在root中编辑了文件。

# javascript - 使用 java 脚本获取图像的缩放宽度和高度？

> ID：10516777
> 
> 赞同：0
> 
> 时间：2012-05-09T13:06:53.150
> 
> 标签：javascript, image

我想使用 javascript 获得图像的缩放大小。例如：图像的原始尺寸为 600x600，通过使用 css 我将其设置为宽度 100%

因此，如果浏览器窗口的大小发生变化，图像的高度和宽度将相应地缩放。

我想获得图像的缩放高度和宽度。使用 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:09:41.263

使用 jQuery：

```
$("#myImage").height();
$("#myImage").width(); 
```

纯Javascript：

```
document.getElementById("myImage").style.offsetHeight;
document.getElementById("myImage").style.offsetWidth; 
```

我认为`offsetHeight`并且`offsetWidth`在这里是合适的，如果不是，请随时纠正我。

# android - 删除 TextView 中不需要的行间距

> ID：10516784
> 
> 赞同：4
> 
> 时间：2012-05-09T13:07:29.477
> 
> 标签：android, textview

我有一个使用自定义字体的文本视图。

文本视图是多行的......问题是每行到另一行之间有很大的空间。

有没有办法减少行间距？

android:lineSpacingExtra 对我没有帮助，因为我需要相反的东西

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T13:23:20.973

我认为你可以使用负值`android:lineSpacingExtra`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-06T04:57:24.080

添加负值`android:lineSpacingExtra`对我没有任何作用。

相反，我只是将任何小于 1.0 的值作为`android:lineSpacingMultiplier`ie`android:lineSpacingMultiplier="0.7"`

# java - 在java中按负数移位

> ID：10516786
> 
> 赞同：4
> 
> 时间：2012-05-09T13:07:37.317
> 
> 标签：java, bit-shift

我在 Java 中使用移位运算符有问题。我使用了以下代码，但无法理解该程序如何生成此输出。所以请指导我该程序如何生成此输出。

```
public class Operator {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int s = 8;
        s = s >>-63;
        System.out.println("value of i=" + s);
    }

} 
```

**输出：** i=4 的值

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T13:10:14.893

来自 JLS，[第 15.19 节（移位运算符）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> 如果左侧操作数的提升类型是 int，则只有右侧操作数的五个最低位用作移位距离。就好像右手操作数受到按位逻辑与运算符 & (§15.22.1) 的影响，掩码值为 0x1f (0b11111)。因此，实际使用的移位距离始终在 0 到 31 的范围内，包括 0 到 31。

现在`-63 & 0x1f == 1`，所以这实际上是向右移动 1，因此答案为 4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T13:10:07.877

`s = s >>-63;`就像 `s = s >> 1;`(-63 % 32)

查看 JLS §15.19 中的[移位运算符行为](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T04:22:02.860

```
 int s＝8；        
    Assert.assertEquals(s >>-63, s >>-63 % 32);
    Assert.assertEquals(s >>-63, s >>-31);
    Assert.assertEquals(s >>-31, s >>32 -31);
    Assert.assertEquals(s >>32 -31，s >>1); 
    Assert.assertEquals(s >>1，s ／2); 
    Assert.assertEquals(s/2，4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T09:36:40.553

如果要替换负移位，以下 2 个语句对整数产生相同的结果：

```
r << -shift 
```

和

```
r << ((32 - shift) % 32) 
```

（32 是 Java 中整数的大小）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-28T18:48:56.560

用 -63 移位实际上是用`-63 & 0x1f == 1`for int 或`-63 & 0x3f == 1`for long 移位，因为在 Java 中左移`>>`使用符号扩展，在 8 的情况下，1 将移出任何零位。

# asp.net - 转移到行动？

> ID：10516790
> 
> 赞同：0
> 
> 时间：2012-05-09T13:07:39.830
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, redirect, redirecttoaction

`RedirectoToAction`是客户端操作。它不仅是自愿的，任何要传递的数据都必须进行往返，并在查询字符串中公开。后者在某种程度上违背了“干净”的网址，因为它的优点之一是`ASP.NET MVC.`

有没有等价物`Server.Transfer`？

# iphone - -(BOOL)insertSettings:(设置 *&)pObjSettingsRefPtr; 导致声明错误

> ID：10516791
> 
> 赞同：0
> 
> 时间：2012-05-09T13:07:40.727
> 
> 标签：iphone, method-parameters

```
-(BOOL)insertSettings:(Settings *&)pObjSettingsRefPtr; 
```

导致声明错误，我在方法声明`expecting ")"`中的参数处遇到错误并且是 `Settings*&``definition.parameter``Settings *&`

但`* and &`不幸的是，在问题编辑中它并没有那么好，我发现stackoverflow也没有显示`(Settings *&)`它没有显示`*`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:17:31.023

如果你想使用引用指针，然后像这样传递参数

```
-(BOOL)insertSettings:(Settings **)pObjSettingsRefPtr; 
```

然后在你的函数中随处使用`pObjSettingsRefPtr`as 。`*pObjSettingsRefPtr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:19:30.100

byref 参数传递的`&`声明说明符仅适用于 C++，在 Objective-C 中不起作用。利用

```
- (BOOL)insertSettings:(Settings **)settings 
```

等等。

# windows - 批处理脚本 + 多个变量

> ID：10516794
> 
> 赞同：0
> 
> 时间：2012-05-09T13:07:54.713
> 
> 标签：windows, batch-file

我目前正在尝试编写我的第一个批处理脚本。

它能做什么：

*   它从某个文件夹中获取所有文件并将每个文件放入 rar

*   它为桌面生成一个 URL 快捷方式

到目前为止一切正常，但问题是：我想创建具有唯一 URL 的快捷方式。现在我只是通过这样的脚本传递 URL：

```
script.bat http://example.com 
```

该脚本执行以下操作：

```
SET LINK        =%1

::For each file that is in the dir "Ori"
FOR %%i IN (%BASEPATH%\Ori\*.*) DO (

    echo [InternetShortcut] > "%BASEPATH%\New\%%~ni.URL"
    echo URL=%LINK% >> "%BASEPATH%\New\%%~ni.URL"
    echo IconFile=%LINK%/favicon.ico >> "%BASEPATH%\New\%%~ni.URL"
    echo IconIndex=0 >> "%BASEPATH%\New\%%~ni.URL"

) 
```

当然这样一来，所有的 Shortcuts 都会导致`http://example.com`.

我希望能够为正在创建的每个快捷方式定义一个唯一的 URL。

由于我是一个完全的初学者，我真的不知道从哪里开始......并希望有一个建议！

PS只是为了让您了解我需要什么，但这不起作用：

```
script.bat {http://example.com,http://example1.com,http://example2.com} 
```

并且脚本应该使用 URL 1 作为第一个快捷方式，使用 URL 2 作为第二个快捷方式，依此类推。

**更新：**

现在按照下面的jeb回答，它可以正常工作了。但是，我想知道：是否可以使用另一个变量再次执行相同的工作？所以它看起来有点像这样：

```
script.bat http://example.com http://example1.com http://example2.com NewVar1 NewVar2 NewVar3 
```

并且 NewVar 应该像这样保存：

```
SET NEWVAR=%2 
```

如何让脚本知道 URL 变量何时完成并且 NewVar 变量何时启动？

而不是被称为

```
!NEWVAR! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:53:20.133

使用时应避免使用空格，`SET`否则使用空格创建变量名！

您可以使用 SHIFT 命令枚举所有参数。

然后你可以使用类似的东西

```
script.bat http://example.com http://example1.com http://example2.com

setlocal EnableDelayedExpansion
SET LINK=%1

::For each file that is in the dir "Ori"
FOR %%i IN (%BASEPATH%\Ori\*.*) DO (

    echo [InternetShortcut] > "%BASEPATH%\New\%%~ni.URL"
    echo URL=!LINK! >> "%BASEPATH%\New\%%~ni.URL"
    echo IconFile=!LINK!/favicon.ico >> "%BASEPATH%\New\%%~ni.URL"
    echo IconIndex=0 >> "%BASEPATH%\New\%%~ni.URL"
    shift
    call set link=%%1

) 
```

将`SHIFT`移动所有参数，因此下次访问 %1 时，您将获得下一个参数。
但是由于你在一个块中，你不能直接访问*当前*的%1，所以我在`CALL %%`这里使用了这个技巧。

为了访问块中的当前值，`LINK`我使用了延迟扩展 ( `!Link!`)。

# c# - 客户端如何与具有多个适配器的计算机上的 Windows 服务进行通信？

> ID：10516797
> 
> 赞同：2
> 
> 时间：2012-05-09T13:08:02.933
> 
> 标签：c#, windows-services, dns

我继承了一个用 C# 编写的 Windows 服务 + 客户端应用程序。Windows 服务打开一个 TCP/IP 套接字进行侦听，如下所示：

```
socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPHostEntry iphe = Dns.Resolve(Dns.GetHostName());
socket.Bind(new IPEndPoint(iphe.AddressList[0], ExportServiceRequest.DefaultPort));
socket.Listen(2);
// Wait for incoming connections and Accept them. 
```

而客户端连接如下：

```
using (Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
{
    IPHostEntry iphe = Dns.Resolve(Dns.GetHostName());
    IPEndPoint ep = new IPEndPoint(iphe.AddressList[0], ExportServiceRequest.DefaultPort);
    socket.Connect(ep);
    // Talk to the server
} 
```

问题是在某些具有多个网络适配器的机器上，Dns.Resolve() 选择了“错误”的适配器，并且客户端连接失败。

我知道这段代码已经过时并且发臭了，并且没有编写太多原始套接字代码。是否有最好的方法来实现在套接字上侦听的 Windows 服务，以便至少本地连接（来自同一台机器内）总是成功，而不管机器有多少网络适配器？

编辑：我的问题似乎表述不当。归根结底，我希望客户端可以访问 Windows 服务，该客户端始终在同一台机器上运行，无需配置。为了拟人化，我希望 Windows 客户端只对服务器大喊：“我可以和你交谈什么 IP 地址，哦，服务在 $LOCALHOST$ 上的 TCP 端口 ExportServiceRequest.DefaultPort 上运行？我想和你交谈”，然后随后的 TCP/IP 对话正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:29:57.970

[`Socket.Bind`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.bind.aspx)：

> Before calling `Bind`, you must first create the local `IPEndPoint` from which you intend to communicate data. If you do not care which local address is assigned, you can create an `IPEndPoint` using `IPAddress.Any` as the address parameter, and the underlying service provider will assign the most appropriate network address. *This might help simplify your application if you have multiple network interfaces.*

(emphasis added). So that would be one suggested change.

I'd also suggest switching your `Connect` call to [`Connect(string,int)`](http://msdn.microsoft.com/en-us/library/d7ew360f.aspx):

> Establishes a connection to a remote host. The host is specified by a host name and a port number.

(a `host` value of `'localhost'` should be sufficient there)

That is, get rid of all of this mucking about with DNS, etc, and just rely on the underlying infrastructure to resolve these issues.

# iphone - 通过应用程序的 plist 文件防止 iPhone 自动锁定

> ID：10516799
> 
> 赞同：2
> 
> 时间：2012-05-09T13:08:15.580
> 
> 标签：iphone, ios, cordova

有没有办法通过应用程序的 plist 来防止 iPhone 自动锁定。更具体地说，PhoneGap 应用程序？

我编写了一个使用 Phonegap 框架的应用程序。在其中，我有几个自定义插件，其中包含了代码

```
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

禁用自动锁定。但是，如果存在 plist 选项，那就太好了，这样我就可以通过 plist 而不是通过代码来配置应用程序。

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:19:09.700

不——你只应该在绝对必要时禁用空闲计时器。从文档：

> 仅在必要时才应设置此属性，并且应确保在不再需要时将其重置为 NO。

拥有一个在应用程序的整个生命周期内禁用它的 Info.plist 键将违反此准则。

# java - 为什么我的应用程序没有进入我的 if 语句

> ID：10516802
> 
> 赞同：1
> 
> 时间：2012-05-09T13:08:27.787
> 
> 标签：java, sockets, tcp, client-server

我正在尝试用 Java 编写控制台客户端-服务器应用程序；使用套接字，我目前有一个简单的登录系统和一个简单的命令系统。登录系统似乎工作，尽管它向客户端打印“无效的用户名和密码”行，无论用户是否输入正确的凭据。- 连接肯定有效。

但是，命令系统似乎根本不起作用，当服务器收到命令时，它似乎没有发回任何东西。

所以我的**主要问题**是为什么我的服务器在收到命令时不向客户端发送任何内容？

这是我的服务器：

```
import java.io.*;
import java.net.*;

class TCPServer2
{
public static void main(String argv[]) throws Exception
{

    ServerSocket welcomeSocket = new ServerSocket(6789);
    String[][] Login = {{"MATT","UNCP"},{"JOHN","UNCP"},{"CARL","UNCP"}};
    String Command;
    String username;
    String username1;
    String password;
    String password1;
    String cmd;
    while(true)
    {
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient =
           new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
        username = inFromClient.readLine();
        System.out.println("\nUsername received: " + username);
        password = inFromClient.readLine();
        System.out.println("\nPassword received: " + password);
        username1=username.toUpperCase();
        password1=password.toUpperCase();

        for(int i = 0; i<Login.length; i++)
        {
            if(Login[i][0].equals(username1) && Login[i][1].equals(password1))
            {
                outToClient.writeBytes("Hello " + username1);
                outToClient.writeBytes("\nOther users registered on the server currently include: \n");

                for(int k = 0; k<Login.length; k++)
                {
                    outToClient.writeBytes(Login[k][0]);
                    }
            }
            else {
                outToClient.writeBytes("Invalid Username and/or password.\n");
            }
            }
                        BufferedReader inFromClient2 =
           new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient2 = new DataOutputStream(connectionSocket.getOutputStream());
        Command = inFromClient2.readLine();
        System.out.println("\nCommand received: " + Command);

if(Command.equals("listTranslations"))
{
outToClient2.writeBytes("English,Thai,Geordie,etc.");
}
else
{
if(Command.equals("getCost"))
{
outToClient2.writeBytes("£100\n");
}
else
{
outToClient2.writeBytes("Invalid Command");
}
}

}

    }
} 
```

这是我的客户：

```
import java.io.*;
import java.net.*;

class TCPClient2
{
public static void main(String argv[]) throws Exception
{
     String userName;
     String passWord;
     String loginInfo;
     String loginInfo2;
     String loginInfo3;
     String command;
     String commandInfo;
     String commandInfo2;

     BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
     Socket clientSocket = new Socket("localhost", 6789);
     DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
     BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

     System.out.println("Username: ");
     userName = inFromUser.readLine();
     outToServer.writeBytes(userName + "\n");

     System.out.println("Password: ");
     passWord = inFromUser.readLine();
     outToServer.writeBytes(passWord + "\n");

     loginInfo = inFromServer.readLine();
     System.out.println(loginInfo);
     loginInfo2 = inFromServer.readLine();
     System.out.println(loginInfo2);
     loginInfo3 = inFromServer.readLine();
     System.out.println(loginInfo3);

     System.out.println("Please enter a command: ");
     command = inFromUser.readLine();
     outToServer.writeBytes(command);

     commandInfo = inFromServer.readLine();
     System.out.println(commandInfo);
     commandInfo2 = inFromServer.readLine();
     System.out.println(commandInfo);

     clientSocket.close();
 }
} 
```

这是我第一次在 stackoverflow 上提问，但我过去浏览过很多次。所以我只想对你们提供的伟大社区表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:23:13.330

这是我评论的延续：

我就是这样做的，首先我会用这样`String[][] Login = {{"MATT","UNCP"},{"JOHN","UNCP"},{"CARL","UNCP"}};`的东西替换它：

```
Map<String, String> userDetails = new HashMap<String, String>();
userDetails.put("MAT", "UNCP");
userDetails.put("JOHN","UNCP"); 
userDetails.put("CARL", "UNCP"); 
```

然后，而不是这个：

```
 for(int i = 0; i<Login.length; i++)
        {
            if(Login[i][0].equals(username1) && Login[i][1].equals(password1))
            {
                outToClient.writeBytes("Hello " + username1);
                outToClient.writeBytes("\nOther users registered on the server currently include: \n");

                for(int k = 0; k<Login.length; k++)
                {
                    outToClient.writeBytes(Login[k][0]);
                    }
            }
            else {
                outToClient.writeBytes("Invalid Username and/or password.\n");
            }
        } 
```

我会这样做：

```
if (userDetails.get(username1).equals(password1))
{
    outToClient.writeBytes("Hello " + username1);
                outToClient.writeBytes("\nOther users registered on the server currently include: \n");

    for (String str : userDetails.keySet()
    {
         outToClient.writeBytes(str);
    }

}
else
{
    outToClient.writeBytes("Invalid Username and/or password.\n");
} 
```

我看到它的方式，系统正在工作并打印`Invalid credentials`字符串是因为，假设您提供这些登录详细信息：`CARL`并且`UNCP`，您正在传递第二组凭据，因此您的循环将通过将它们与凭据进行比较来检查凭据第一组，由于它们不匹配，它将打印消息。在第二次迭代中，它将看到凭据匹配并将您登录。

有关更多信息，请查看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)。HashMap 是一个集合，除了通常的`List`和`Set`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:11:53.300

我不确定这是否会对您有所帮助，但请检查您是否不必在每次 writeBytes 调用后刷新以真正将数据输出到客户端。

尝试添加 outToClient.flush();

# c# - EWS - 在 Exchange Web Services 2007 中查找最后的日历修改

> ID：10516807
> 
> 赞同：1
> 
> 时间：2012-05-09T13:08:46.040
> 
> 标签：c#, asp.net, exchange-server, exchangewebservices

我是 EWS Web 服务的新用户，可以处理不同的功能以使其正常工作（FindItem、FindFolder、getItem 等）但我无法解决这个问题：我尝试在日历文件夹。我的第一个想法是创建一个限制 LastModificationDate 扩展字段（PropertyId = 0x3008）的 FindItemType 请求并调用 findItem 方法。

我尝试了以下代码，但结果始终为空（ aorit.Items == null）：

```
_esb = new ExchangeServiceBinding();
_esb.Url = serviceUrl;
_esb.Credentials = new NetworkCredential
{                
    UserName = userName,
    Password = password,
    Domain = domain
};

// snipped...

FindItemType fit = new FindItemType
{
    ItemShape = new ItemResponseShapeType
    {
        BaseShape = DefaultShapeNamesType.IdOnly
    },
    ParentFolderIds = folderTypes,
    Traversal = ItemQueryTraversalType.Shallow,
    Restriction = new RestrictionType
    {
        Item = new IsGreaterThanOrEqualToType
        {
            FieldURIOrConstant = new FieldURIOrConstantType
            {
                Item = new ConstantValueType { Value = lastModifiedDateSearched.ToUniversalTime().ToString("u") }
            },
            Item = new PathToExtendedFieldType
            {
                DistinguishedPropertySetIdSpecified = true,
                DistinguishedPropertySetId = DistinguishedPropertySetType.Appointment,
                PropertyType = MapiPropertyTypeType.SystemTime,
                PropertyId = 0x3008,
                PropertyIdSpecified = true,
            }
        }
    }
};

FindItemResponseType response = _esb.FindItem(fit);

List<ItemIdType> res = new List<ItemIdType>();
foreach (FindItemResponseMessageType firmt in     response.ResponseMessages.Items.Where(c => c.IsNotNull()))
{
    if (firmt.RootFolder.IsNotNull())
    {
        ArrayOfRealItemsType aorit = firmt.RootFolder.Item as ArrayOfRealItemsType;
        if (aorit != null && aorit.Items.IsNotNull())
        {
            foreach (ItemType item in aorit.Items)
            {
                if (item.ItemId.IsNotNull())
                {
                    res.Add(item.ItemId);
                }
            }
        }
    }
} 
```

有人知道我的查询是否正确吗？我是否使用正确的方法来做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:40:57.150

挖了又挖，然后……终于找到了问题所在。PathToExtendedFieldType 未正确声明。应该是简单的：

```
new PathToExtendedFieldType
{
    PropertyType = MapiPropertyTypeType.SystemTime,
    PropertyTag = "0x3008"
} 
```

# java - 在 JSF 中处理部分 URL

> ID：10516816
> 
> 赞同：1
> 
> 时间：2012-05-09T13:09:29.273
> 
> 标签：java, jsf, prettyfaces

我正在使用 JSF 2.0.5、Tomcat 7.0.12 和漂亮的面孔。

我的 web.xml 文件是：

```
<welcome-file-list>
    <welcome-file>/index.jsp</welcome-file>
</welcome-file-list> 
```

我漂亮的文件配置：

```
<url-mapping>
    <pattern>/</pattern>
    <view-id>/jsp/index.jsf</view-id>
</url-mapping> 
```

我的 index.jsp 文件是空的。

我的问题是，当我在 url 'foo.com' 中写入时，他最终会将 (301) 重定向到 [http://www.foo.com/jsp/index.jsf](http://www.foo.com/jsp/index.jsf)。

意味着在我的 Phase 监听器中：

```
HttpServletRequest req = (HttpServletRequest)context.getExternalContext().getRequest(); 
StringBuffer requestUrl = req.getRequestURL(); // i get http://www.foo.com/jsp/index.jsf 
```

有人可以解释他为什么要点击 jsp/index.jsf 吗？

因为我想识别何时有人`foo.com`击中`www.foo.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:40:46.927

如果有人访问`http://foo.com/`或`http://www.foo.com/`使用您的配置，PrettyFaces 会拦截请求并在内部将其转发到`/jsp/index.jsf`. 您 PhaseListener 只会看到这个转发的请求，因此只会看到`/jsp/index.jsf`.

如果要获取原始 URL，可以使用`PrettyContext.getCurrentInstance().getRequestURL().toURL()`.

但是，在您的情况下有点奇怪的一件事是，您写道，当用户访问根路径时，用户会被重定向（301）。这可能会导致我上面的建议不起作用，因为在重定向后，您会丢失原始请求中的所有信息。

也许您可以尝试`welcome-file`从您的条目中删除该条目，`web.xml`并确保您的条目中没有任何其他`pretty-config.xml`可能导致此重定向的重写规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:28:48.217

“/”模式表示应用程序的上下文根，在您的情况下意味着 www.foo.com。由于您有一个从“/”到 /jsp/index.jsf 的映射，因此 Servlet 容器会将您带到那里。

# android - 应用程序未通过 Eclipse 部署在 AVD 中？

> ID：10516820
> 
> 赞同：0
> 
> 时间：2012-05-09T13:09:43.597
> 
> 标签：android, eclipse, avd

首先，感谢任何人在我涉足 Android 应用程序开发时为我提供的任何帮助。我已经做了很多年的 Java 开发人员，尽管我最近几年在管理圈子里有点生疏。

我已经安装了 Eclipse (Indigo)，并且我过去广泛使用过 Eclipse，所以对我来说没有什么太新的东西。我已经通过 SDK 管理器安装了 Android SDK 和所有相关的包。所有图标都出现在 Eclipse 中，我可以启动一个 Android 项目，所以一切看起来都很好。我创建了两个 AVD - 一个 4.0 和另一个 2.1。

我遇到的麻烦是让我的应用程序（任何应用程序）在 AVD 中运行。我已经遵循了许多关于如何做到这一点的教程，它们都非常相似。我创建了一个运行配置，命名我的项目和默认活动（在我创建项目的同时创建）并将其与 AVD 之一相关联（适用于项目版本。）

AVD 启动，最终我得到了完整的 Android 主屏幕，正如预期的那样，但仅此而已。没有其他的。我在 YouTube 上观看了一段视频，显示了应该发生的情况，但我的控制台输出不一样。我对安装apk一无所知。

这是控制台输出：

```
[2012-05-08 11:05:49 - MyFirstDroid] ------------------------------
[2012-05-08 11:05:49 - MyFirstDroid] Android Launch!
[2012-05-08 11:05:49 - MyFirstDroid] adb is running normally.
[2012-05-08 11:05:49 - MyFirstDroid] Performing com.burmania.MyFirstDroidActivity activity launch
[2012-05-08 11:05:50 - MyFirstDroid] Automatic Target Mode: Preferred AVD 'API7_AVD' is not available. Launching new emulator.
[2012-05-08 11:05:50 - MyFirstDroid] Launching a new emulator with Virtual Device 'API7_AVD 
```

我已经离开 AVD 好几个小时了，因为我读到它有时可能需要一段时间才能启动，但五个小时后什么都没有改变。

任何人都可以帮助我或指出正确的方向吗？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:17:20.680

您是否尝试过通过 AVD Manager (AndroidInstallDir/AVD Manager.exe) 运行 AVD？

如果您从那里运行 AVD，然后将 eclpise 与正在运行的 AVD 一起使用，它可能对您有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T15:36:01.133

发现同样的问题，在windows 7上安装eclipse 3.7.2，android adt 21.0.0。可能是选择的AVD还应该有一个与选择的最低SDK版本相对应的API，否则如果AVD的API是高于此，不接受也已启动或已经运行的 AVD，这实际上是合乎逻辑的，但在日志中没有明确提及。照顾这个解决了我遇到的问题。希望这能做到。。

# c++ - 调用 C++ 向量的每个元素的成员函数

> ID：10516823
> 
> 赞同：6
> 
> 时间：2012-05-09T13:09:58.500
> 
> 标签：c++, function, vector

假设有一个类对象向量。

```
vector<Object1> vec; 
```

说，`Object1`有一个成员函数`void foo(Object2*)`。

我想做以下事情：

```
for(int i=0; i<vec.size(); i++) {
    vec[i].foo(obj2);
} 
```

在不使用显式循环的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:12:28.757

使用 TR1/C++11 最简单：

```
#include <vector>
#include <functional>
#include <algorithm>

struct Object2{};

struct Object1 {
  void foo(Object2*) {}
};

int main() {
  std::vector<Object1> vec;
  Object2 obj2;
  std::for_each(vec.begin(), vec.end(), std::bind(&Object1::foo, std::placeholders::_1, &obj2));
} 
```

但是您也可以使用`std::for_each`with `std::bind2nd`，`std::mem_fun_ref`如果这不是一个选项：

```
std::for_each(vec.begin(), vec.end(), std::bind2nd(std::mem_fun_ref(&Object1::foo), &obj2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:17:16.063

一种较旧的风格是手动编写仿函数。对于更复杂的逻辑，这允许您将整个班级专门用于解决问题。

```
class fancyFunctor
{
  Object2* m_data;

public:
  fancyFunctor(Object2 * data) : m_data(data){}

  operator()(Object1 & ref) 
  {
    ref.foo(m_data) 
  }
} 
```

然后迭代：

```
std::for_each(vec.begin(),vec.end(), fancyFunctor(&randomObject2)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T13:28:05.373

此类代码的可读性并不完美，并且不能以任何简单的单行方式完成。这是因为，某个类的成员方法的第一个参数是指向该类的对象的指针，它将在该对象上执行。

或者，您可以使用新 C++11 标准附带的 foreach 循环（但它仍然是循环）。

# c# - GroupBy 基于键的字典

> ID：10516825
> 
> 赞同：6
> 
> 时间：2012-05-09T13:10:02.637
> 
> 标签：c#, group-by

我有一个`Dictionary<string,string>`我想分组的。以下是一些示例键/值对

```
==========================
| Key            | Value |
==========================
| A_FirstValue   | 1     |
| A_SecondValue  | 2     |
| B_FirstValue   | 1     |
| B_SecondValue  | 2     |
========================== 
```

现在，我想根据字符的第一个实例之前的键中的第一个字母或单词对其进行分组`'_'`

因此，最终结果将是`Dictionary<string, Dictionary<string, string>>`。对于上面的示例，结果将是：

```
A -> A_FirstValue, 1
     A_SecondValue, 2

B -> B_FirstValue, 1
     B_SecondValue, 2 
```

这甚至可能吗？任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T13:13:49.383

好吧，你可以使用：

```
var dictionary = dictionary.GroupBy(pair => pair.Key.Substring(0, 1))
       .ToDictionary(group => group.Key,
                     group => group.ToDictionary(pair => pair.Key,
                                                 pair => pair.Value)); 
```

group 部分将为您提供一个`IGrouping<string, KeyValuePair<string, string>>`，随后`ToDictionary`将每组键/值对转换回字典。

编辑：请注意，这将始终使用第一个字母。对于更复杂的事情，我可能会编写一个单独的方法并在lambda 表达式`ExtractFirstWord(string)`中调用它。`GroupBy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:12:40.433

```
yourDictionary
    .GroupBy(g => g.Key.Substring(0, 1))
    .ToDictionary(k => k.Key, v => v.ToDictionary(k1 => k1.Key, v1 => v1.Value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:19:27.780

这是我想出的。应该有一些错误处理以确保`_`密钥中存在一个，但应该让你开始。

```
 var source = new Dictionary<string, int>();

        source.Add("A_FirstValue", 1);
        source.Add("A_SecondValue", 2);
        source.Add("B_FirstValue", 1);
        source.Add("B_SecondValue", 3);

        var dest = new Dictionary<string, Dictionary<string, int>>();

        foreach (KeyValuePair<string, int> entry in source) {
            string prefix = entry.Key.Split('_')[0];
            if (!dest.ContainsKey(prefix)) {
                dest.Add(prefix, new Dictionary<string, int>());
            }

            dest[prefix].Add(entry.Key, entry.Value);

        } 
```

# mysql - 无法将 oracle 日期数据类型列正确导入 MYSQL 日期数据类型列

> ID：10516835
> 
> 赞同：1
> 
> 时间：2012-05-09T13:10:26.753
> 
> 标签：mysql

导出 oracle 表并尝试将其导入 MYSQL 后，我面临日期数据类型的问题。导入 MYSQL 时来自 oracle 的日期显示如下示例：'04-05-12' 正在导入为'0000-00-00'。我尝试了日期时间数据类型，但它给出了相同的结果。使用 var char 解决了这个问题，但这不是理想的解决方案。专家你能建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:04:03.163

您可能最好以 MySQL 期望的方式从 Oracle 导出数据。

```
SELECT TO_CHAR(oracle_date, 'YYYY-MM-DD HH24:MI:SS') FROM ... 
```

但是，如果这不可能，您可以使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)功能；例如：

```
INSERT INTO my_table (mysql_date) VALUES (STR_TO_DATE('04-05-12', '%d-%m-%y')); 
```

# visual-studio-2010 - 在 VisualStudio 中从 T4 生成器的路径中删除程序集

> ID：10516837
> 
> 赞同：1
> 
> 时间：2012-05-09T13:10:30.580
> 
> 标签：visual-studio-2010, t4

在我的项目中，我安装了 Resharper，并且我正在使用 Visual Studio 中的 T4 模板进行设计时模板。

我有

```
<#@ assembly name="$(SolutionDIr)FTest\bin\Debug\FTest.dll" #>
<#@ assembly name="$(SolutionDIr)FTest\bin\Debug\nunit.framework.dll" #> 
```

我也有

```
<#@ import namespace="NUnit.Framework" #> 
```

然后我在这样的代码中有一个演员表

```
 <#
    var someVar = (TestAttribute)typeof(BaseTest).GetMethods()
    .Where(
    x => x.GetCustomAttributes(false).Where(y => y.Name == "CategoryAttribute" && ((CategoryAttribute)y).Name == "Smoke").Any()
     )
    #> 
```

我得到一个无效的演员表异常。它告诉我模板生成器使用的 'nunit.framework' dll 与项目 dll 使用的不同。

```
Error   21  Running transformation: System.InvalidCastException: [A]NUnit.Framework.CategoryAttribute cannot be cast to [B]NUnit.Framework.CategoryAttribute. Type A originates from 'nunit.framework, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' in the context 'LoadFrom' at location 'C:\Users\Chandirasekar Thiaga\AppData\Local\assembly\dl3\ZGE1068O.OD1\ARWGXOXD.EMZ\7407d57d\ff3a4298_6ceccc01\nunit.framework.dll'. Type B originates from 'nunit.framework, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' in the context 'Default' at location 'C:\Program Files (x86)\JetBrains\ReSharper\v6.1\Bin\nunit.framework.dll'. 
```

当使用 <#@ import namespace="NUnit.Framework" #> 导入时，我该如何导入与 FTest.dll 使用的相同的 dll？我不想使用 Resharper 的 nunit 版本！

编辑 ：

像 GarethJ 所说的那样设置注册表项后，消息如下所示：

```
Error   12  Running transformation: System.InvalidCastException: [A]NUnit.Framework.CategoryAttribute cannot be cast to [B]NUnit.Framework.CategoryAttribute. Type A originates from 'nunit.framework, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' in the context 'LoadFrom' at location 'C:\Repos\BSF-Functional-Automation\FunctionalTest\FunctionalTest\bin\Debug\nunit.framework.dll'. Type B originates from 'nunit.framework, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' in the context 'Default' at location 'C:\Program Files (x86)\JetBrains\ReSharper\v6.1\Bin\nunit.framework.dll'.
   at Microsoft.VisualStudio.TextTemplating64EAA000670725A96AF52252D093BE63.GeneratedTextTransformation.<TransformText>b__5(Object x)
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.VisualStudio.TextTemplating64EAA000670725A96AF52252D093BE63.GeneratedTextTransformation.<TransformText>b__4(MethodInfo m)
   at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.VisualStudio.TextTemplating64EAA000670725A96AF52252D093BE63.GeneratedTextTransformation.TransformText()
   at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String& result)        1   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:37:23.203

@import 只是贡献了一个“使用”语句而不是一个引用，所以它在这里并不重要。

在 LoadFrom 上下文中加载的类型 A 是由 T4 中的程序集标记加载的类型。来自 Resharper 目录的类型 B 出现在此错误中，来自对包含“BaseTest”的程序集的反射。

我会尝试查看 BaseTest 的构建，看看 Resharper 是否可以潜入这里。您可以通过在 basetest 的程序集上运行反射器或 ildasm 来验证这个理论。

# android - 如何过滤掉一个文件夹（不从中加载内容），使其内容不显示在我的 ListView 中？

> ID：10516838
> 
> 赞同：1
> 
> 时间：2012-05-09T13:10:41.733
> 
> 标签：android, android-mediaplayer, android-contentprovider

我正在使用 Content Provider 获取设备中的所有音乐文件并将其显示在列表中，但是，我现在不希望特定文件夹“X”中的文件出现在我的列表中。

我目前正在使用它从 SD 卡中获取所有音频文件。

```
private static final String[] EXTERNAL_COLUMNS = new String[] {
            MediaStore.Audio.Media._ID, MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.ALBUM, MediaStore.Audio.Media.IS_RINGTONE,
            MediaStore.Audio.Media.IS_MUSIC,
            "\"" + MediaStore.Audio.Media.EXTERNAL_CONTENT_URI + "\"" };

private Cursor getExternalAudioCursor(String selection,
            String[] selectionArgs) {
        return managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                EXTERNAL_COLUMNS, selection, selectionArgs,
                MediaStore.Audio.Media.DEFAULT_SORT_ORDER);
    }

Cursor c = new MergeCursor(new Cursor[] {
            getExternalAudioCursor(selection, argsArray)}; 
```

同样来自Android docs，我读到了这个......

> 公共静态最终字符串 MEDIA_IGNORE_FILENAME
> 
> 自：API 级别 9 指示媒体扫描器忽略包含目录及其子目录中的媒体的文件名称。开发人员应该使用它来避免应用程序图形出现在画廊中，同样防止应用程序声音和音乐出现在音乐应用程序中。常数值：“.nomedia”

但我不能具体说明文件名，因为我事先并不知道它们。

所以我的问题是我可以对一个文件夹做类似的事情，这样它的所有内容都不会出现在我的列表中吗？

如果没有，那么我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:23:08.573

`.nomedia`通过将文件放入文件夹中，我已成功防止图像文件被系统索引。

根据[此链接](http://androinica.com/2009/08/how-to-hide-non-music-audio-files-from-appearing-in-android-media-players/)，它也应该适用于音乐文件。也许这种技术可以让你朝着正确的方向前进……

（明文链接：[http](http://androinica.com/2009/08/how-to-hide-non-music-audio-files-from-appearing-in-android-media-players/) ://androinica.com/2009/08/how-to-hide-non-music-audio-files-from-appearing-in-android-media-players/ ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:29:10.257

您*可以*将 .nomedia 文件添加到该文件夹​​，但这并不是真正的编程解决方案，您可能只能在 SDCARD 上执行此操作。

不幸的是，这也会阻止其他媒体扫描应用程序从该文件夹中获取任何文件。如果没有别的，你可以添加它，扫描，然后删除它。但这是一个非常丑陋/骇人的解决方案。

[http://lifehacker.com/5793803/disable-media-scanning-in-specific-android-directories-by-creating-a-nomedia-file](http://lifehacker.com/5793803/disable-media-scanning-in-specific-android-directories-by-creating-a-nomedia-file)

**编辑**：显然，以句点开头的文件夹对系统是隐藏的。同样，这似乎不是最好的主意。

临时修改目录/添加 .nomedia 文件，扫描，然后删除它的前提似乎并不那么邪恶，但是如果您的应用程序在您有机会将文件/文件夹重置回其原始文件之前崩溃怎么办状态？如果一个应用程序修改了我的目录，而现在*其他*应用程序无法正常运行（可能），我将是一个相当沮丧的用户。

这些解决方案似乎是面向消费者/用户而不是开发人员的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:03:37.937

**我已经找到了我上面提出的问题的解决方案。**

显然有一种简单的方法可以让特定文件夹中的文件不显示在您的应用程序中......

我之前犯的错误是我曾经`Environment.getExternalStorageDirectory();`将所有应用程序文件直接写入sd卡，它们出现在我的列表中。

我不得不使用`Context.getExternalFilesDir("FolderName");`并且文件现在没有显示在列表中，原因是该文件夹现在是您的应用程序的本地文件夹，媒体无法访问。

请阅读 getExternalFilesDir 的完整 Java 文档以熟悉该类。

**`public File getExternalFilesDir`**（字符串类型）

自：API 8 级

返回外部文件系统上目录的绝对路径（即 Environment.getExternalStorageDirectory() 上的某个位置），应用程序可以在其中放置它拥有的持久文件。**这些文件对于应用程序是私有的，并且通常不作为媒体对用户可见。**

**这就像 getFilesDir() 一样，在卸载应用程序时这些文件将被删除**，但是有一些重要的区别：

外部文件并不总是可用：如果用户在计算机上安装或移除外部存储，它们就会消失。有关存储状态的信息，请参阅环境 API。这些文件没有强制执行安全性。所有应用程序都可以读取和写入放置在此处的文件。以下是在应用程序的私有存储中操作文件的典型代码示例：

```
void createExternalStoragePrivateFile() {
    // Create a path where we will place our private file on external
    // storage.
    File file = new File(getExternalFilesDir(null), "DemoFile.jpg");

try {
    // Very simple code to copy a picture from the application's
    // resource into the external file.  Note that this code does
    // no error checking, and assumes the picture is small (does not
    // try to copy it in chunks).  Note that if external storage is
    // not currently mounted this will silently fail.
    InputStream is = getResources().openRawResource(R.drawable.balloons);
    OutputStream os = new FileOutputStream(file);
    byte[] data = new byte[is.available()];
    is.read(data);
    os.write(data);
    is.close();
    os.close();
} catch (IOException e) {
    // Unable to create file, likely because external storage is
    // not currently mounted.
    Log.w("ExternalStorage", "Error writing " + file, e);
}
}

void deleteExternalStoragePrivateFile() {
    // Get path for the file on external storage.  If external
    // storage is not currently mounted this will fail.
    File file = new File(getExternalFilesDir(null), "DemoFile.jpg");
    if (file != null) {
        file.delete();
    }
}

boolean hasExternalStoragePrivateFile() {
    // Get path for the file on external storage.  If external
    // storage is not currently mounted this will fail.
    File file = new File(getExternalFilesDir(null), "DemoFile.jpg");
    if (file != null) {
        return file.exists();
    }
    return false;
} 
```

如果您为此函数提供非空类型，则返回的文件将是给定类型的子目录的路径。尽管媒体扫描仪不会自动扫描这些文件，但您可以使用`MediaScannerConnection.scanFile`. 请注意，这与`Environment.getExternalStoragePublicDirectory()`提供所有应用程序共享的媒体目录的 不同。此处返回的目录归应用所有，卸载应用时会删除其内容。与 Environment.getExternalStoragePublicDirectory() 不同，此处返回的目录将自动为您创建。

下面是一个典型代码示例，用于操作应用程序私有存储中的图片并将其添加到媒体数据库：

```
void createExternalStoragePrivatePicture() {
    // Create a path where we will place our picture in our own private
    // pictures directory.  Note that we don't really need to place a
    // picture in DIRECTORY_PICTURES, since the media scanner will see
    // all media in these directories; this may be useful with other
    // media types such as DIRECTORY_MUSIC however to help it classify
    // your media for display to the user.
    File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
    File file = new File(path, "DemoPicture.jpg");
try {
    // Very simple code to copy a picture from the application's
    // resource into the external file.  Note that this code does
    // no error checking, and assumes the picture is small (does not
    // try to copy it in chunks).  Note that if external storage is
    // not currently mounted this will silently fail.
    InputStream is = getResources().openRawResource(R.drawable.balloons);
    OutputStream os = new FileOutputStream(file);
    byte[] data = new byte[is.available()];
    is.read(data);
    os.write(data);
    is.close();
    os.close();

    // Tell the media scanner about the new file so that it is
    // immediately available to the user.
    MediaScannerConnection.scanFile(this,
            new String[] { file.toString() }, null,
            new MediaScannerConnection.OnScanCompletedListener() {
        public void onScanCompleted(String path, Uri uri) {
            Log.i("ExternalStorage", "Scanned " + path + ":");
            Log.i("ExternalStorage", "-> uri=" + uri);
        }
    });
} catch (IOException e) {
    // Unable to create file, likely because external storage is
    // not currently mounted.
    Log.w("ExternalStorage", "Error writing " + file, e);
}
}

void deleteExternalStoragePrivatePicture() {
    // Create a path where we will place our picture in the user's
    // public pictures directory and delete the file.  If external
    // storage is not currently mounted this will fail.
    File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
    if (path != null) {
        File file = new File(path, "DemoPicture.jpg");
        file.delete();
    }
}

boolean hasExternalStoragePrivatePicture() {
    // Create a path where we will place our picture in the user's
    // public pictures directory and check if the file exists.  If
    // external storage is not currently mounted this will think the
    // picture doesn't exist.
    File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
    if (path != null) {
        File file = new File(path, "DemoPicture.jpg");
        return file.exists();
    }
    return false;
} 
```

参数 type 要返回的文件目录的类型。对于文件目录的根目录或子目录的以下环境常量之一可能为 null：DIRECTORY_MUSIC、DIRECTORY_PODCASTS、DIRECTORY_RINGTONES、DIRECTORY_ALARMS、DIRECTORY_NOTIFICATIONS、DIRECTORY_PICTURES 或 DIRECTORY_MOVIES。

返回 返回外部存储上保存应用程序文件的目录的路径。如果当前未安装外部存储，则返回 null，因此无法确保路径存在；当它可用时，您将需要再次调用此方法。

# iphone - 每个屏幕的 NavigationController 自定义后退按钮

> ID：10516839
> 
> 赞同：1
> 
> 时间：2012-05-09T13:10:45.753
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uinavigationbar

我一直在尝试继承 UINavigationController 类来修改背景图像、导航栏大小、后退按钮、标题字体等内容。经过几个小时和大量阅读后，我明白我不应该继承 UINavigationController 类......

我想有特定的设计并将该设计转移到使用我的自定义 NavigationController 的所有屏幕......

到目前为止，我还没有找到任何优雅的解决方案，大多数解决方案都基于配置仅在下一个屏幕中显示的内容（下一个视图）。

我怎样才能做到这一点？也许使用类别？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T13:12:33.460

我正在显示自定义 leftbarbutton 的代码`UINavigationcontroller`。您可以在每个视图控制器和按钮（左右）中添加此代码

```
 leftButton = [UIButton buttonWithType:UIButtonTypeCustom];    
    [leftButton setImage:[UIImage imageNamed:@"Yourcutomeimage.png"] forState:UIControlStateNormal];    
    leftButton.frame = CGRectMake(0, 0, 30, 30);
    [leftButton addTarget:self action:@selector(youraction:) forControlEvents:UIControlEventTouchUpInside];  

    self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:leftButton]autorelease]; 
```

//或者

```
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:leftButton]autorelease]; 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:17:07.687

是的@Nit是对的，这是自定义的方式`UINavigationController`，但如果你不想为`UIViewController`你拥有的每个人都这样做，你可以创建一个`UIViewControllerBase`类，它是`UIViewController`方法的子类`viewDidLoad`，设置所有按钮的方式@Nit 已经描述并让`UIViewController`你必须成为你班级的子`UIViewControllerBase`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:25:37.353

如果要向 uinavigationcontroller 添加自定义后退按钮，则应使用 navigationItem.backBarButtonItem 并在初始化 uinavigationcontroller 的类中实现它。样本 ：-

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"btnImage.png" style:UIBarButtonItemStyleBordered target:youtarget action:@sel(your action)];  
self.navigationItem.backBarButtonItem = backButton; [backButton release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T08:38:44.203

我在这个答案中概述了我的解决方案：[https ://stackoverflow.com/a/16831482/171933](https://stackoverflow.com/a/16831482/171933)

`viewWillAppear`基本上，您在 UIViewController 上创建一个类别，并在视图控制器的每个方法中调用一个方法。

# directx - D3D9 应用程序无法使用英特尔高清显卡

> ID：10516840
> 
> 赞同：1
> 
> 时间：2012-05-09T13:10:46.457
> 
> 标签：directx, 3d, direct3d

我继承了一个使用 D3D9 在监视器 #2 上全屏显示图形的应用程序。该应用程序可以在配备 GeForce 9500 GT 的台式机上正常运行。当我尝试让应用程序在配备板载英特尔高清显卡的笔记本电脑上运行时，所有显卡均未显示。顶点缓冲区之一被绘制，但其余为黑色。

我对 D3D 不是很熟悉，所以我不确定从哪里开始调试这个问题。我一直在做一些搜索，但无法打开任何东西。

更新：

仅使用 2 个三角形绘制简单的顶点缓冲区是可行的，但任何更复杂的都不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:49:02.713

我的直觉可能是给定 GPU 支持的着色器模型。通常，最好查询 gfx 卡以查看它可以支持什么。

也有可能是特定的 D3D API 功能——在 GeForce 和 ATI(AMD) 之间切换时你会看到更多，但当然也可能是英特尔作为自己的供应商；但我会从查询支持的着色器开始。

对于 D3D9，您使用 IDirect3D9::GetDeviceCaps 来查询 gfx 设备。

链接：在此处发布：[https ://gamedev.stackexchange.com/questions/22705/how-can-i-check-for-shader-model-3-support](https://gamedev.stackexchange.com/questions/22705/how-can-i-check-for-shader-model-3-support)

[http://msdn.microsoft.com/en-us/library/bb509626%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb509626%28VS.85%29.aspx)

DirectX 还提供为给定设备级别创建功能的功能：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff476876%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:56:38.203

解决方案#1：

检查每个 D3D9 调用的每个错误代码。使用`DXGetErrorString9`and`DXGetErrorDescription9`获取错误代码的可读翻译。有关详细信息，请参阅 DirectX 文档。当您最终遇到一个返回值以外的调用时，`D3D_OK`请查看该调用的 DirectX 文档。

解决方案#2：

安装调试 DirectX 驱动程序（应包含在 DirectX SDK 中），在运行时检查调试消息进程输出（使用 OutputDebugMessage 打印消息，因此您只能在调试器/IDE 中看到）。使用高调试设置，您将看到应用程序中的每一个问题。

# javascript - 为每个 drop 创建隐藏字段元素

> ID：10516843
> 
> 赞同：0
> 
> 时间：2012-05-09T13:11:10.627
> 
> 标签：javascript, jquery, loops, foreach

我知道这与我之前的问题类似，但略有不同。

我有这个脚本将每个“删除”元素添加到列表中。现在我需要将它添加到变量/隐藏字段中，以便我可以通过表单将其传递到下一页。

当我现在运行它时。但是，它会为每个物品发出警报，它不仅会为每个掉落的物品发出警报，而且如果有 10 件物品掉落，它会在每个物品掉落时运行 10 次，而不是每个物品掉落一次。

任何帮助都会很棒。

```
//Record and add dropped items to list
            var txt = $("#listbox");
            var dtstart = copiedEventObject.start + '\n'
            var caltitle = copiedEventObject.title

            var txt = $('#listbox');     
            txt.append("<li class ='listItem'> "+dtstart +"</li>")

            var listItems = $('.listItem'); 

                $('#calendarform').submit(function() {

                        listItems.each(function(){   //For each event do this:

                            alert( listItems.text() );                  

                        });

                    return false;

                });

            // remove the element from the "Draggable Events" list
            $(this).remove(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:15:43.140

问题在于这段代码

```
listItems.each(function(){  //For each event do this:
    alert( listItems.text() );                  
}); 
```

您正在提醒每个列表项的所有列表项的文本。

使用 jQuery(this) 访问每个块中的当前项目

```
listItems.each(function(){   //For each event do this:
    alert( $(this).text() );                  
}); 
```

假设您的代码在放置事件处理程序中，那么您每次放置时也会添加一个提交处理程序。这意味着每次您放弃时，您都会排队*另一个*提交事件。这可能是不希望的。将此 submit(function(){}) 块移到 drop 处理程序之外，以防止它多次触发该函数。

```
$('#calendarform').submit(function(e) {
    var listItems = $('.listItem'); 
    listItems.each(function(){   //For each event do this:
        alert( listItems.text() );                  
    });
    e.preventDefault();//stop normal behavior
    return false;

}); 
```

要即时创建元素，您只需将 jQuery 传递给 html，并将`append`其传递给您的表单。

```
$('<input type="hidden" name="listItem[]"/>').appendTo("#calendarForm").val(listItem.text()) 
```

您可能不得不摆弄 name 元素以使其以服务器端语言的数组形式提交，但您也在一个`each`循环中，该循环为您提供索引，因此您可以执行以下操作。

```
$('#calendarform').submit(function(e) {
        var form = $(this);
        var listItems = $('.listItem'); 
        listItems.each(function(index){   //For each event do this:
            var listItem = $(this);
            $("<input type='hidden'/>").val(listItem.text()).appendTo(form).attr('name', 'listItem[' + index + ']');
        });
        e.preventDefault();//stop normal behavior
        return false;

    }); 
```

# python - 修复 PyMel 导入错误“从空列表中弹出”？

> ID：10516849
> 
> 赞同：0
> 
> 时间：2012-05-09T13:11:22.410
> 
> 标签：python, maya, mel, pymel

我正在使用 PyMel 编写一些工具，但截至昨天我的 PyMel 模块将无法获取，因为我在导入过程中遇到错误：

```
import pymel.core as pm

# pymel.core : Updating pymel with pre-loaded plugins: OpenEXRLoader, DirectConnect, mayaHIK, ikSpringSolver, Mayatomr, decomposeMatrix, tiffFloatReader, VectorRender, studioImport, mayaCharacterization, rotateHelper, MayaCryExport22012-x64, Substance, MayaMuscle, fbxmaya, ik2Bsolver # 
#  pop from empty list
# Traceback (most recent call last):
#   File "<maya console>", line 1, in <module>
#   File "C:\Program Files\Autodesk\Maya2012\Python\lib\site-packages\pymel-1.0.0-py2.6.egg\pymel\core\__init__.py", line 250, in <module>
#     _installCallbacks()
#   File "C:\Program Files\Autodesk\Maya2012\Python\lib\site-packages\pymel-1.0.0-py2.6.egg\pymel\core\__init__.py", line 248, in _installCallbacks
#     _pluginLoaded( plugin )
#   File "C:\Program Files\Autodesk\Maya2012\Python\lib\site-packages\pymel-1.0.0-py2.6.egg\pymel\core\__init__.py", line 79, in _pluginLoaded
#     _factories.cmdlist[funcName] = _factories.cmdcache.getCmdInfoBasic( funcName )
#   File "C:\Program Files\Autodesk\Maya2012\Python\lib\site-packages\pymel-1.0.0-py2.6.egg\pymel\internal\cmdcache.py", line 212, in getCmdInfoBasic
#     synopsis = lines.pop(0)
# IndexError: pop from empty list # 
```

有想法该怎么解决这个吗？我下载了最新版本的 PyMel，检查了安装指南是否遗漏了任何内容（我使用了方法 2），但我仍然不知道问题出在哪里。

谢谢，尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:39:18.493

好吧，所以在尝试重新安装我的大部分程序之后，我只是修复了错误所在的 cdmcash.py - 我最初不想这样做，因为我不确定我可能会破坏什么，但经过 2 多周的尝试我刚刚破产的事情：

如果其他人有这个问题，你需要做的就是打开你的 cmdcache.py 并在第 212 行添加一个 if 测试

```
 if lines: 
```

那只会解决它。是的。就那么简单。想象一下我在这样做之后的 head->desking 会话。

# linux - 使用 bash 从文本文件中删除行

> ID：10516850
> 
> 赞同：2
> 
> 时间：2012-05-09T13:11:26.503
> 
> 标签：linux, bash

我有两组文本文件。第一套在 AA 文件夹中。第二组在 BB 文件夹中。第一组（AA 文件夹）的 ff.txt 文件的内容如下所示。

```
Name        number     marks
john            1         60
maria           2         54
samuel          3         62
ben             4         63 
```

如果标记> 60，我想从这个文件中打印第二列（数字）。输出将是 3,4。接下来，读取 BB 文件夹中的 ff.txt 文件并删除包含数字 3,4 的行。我怎么能用 bash 做到这一点？

BB 文件夹中的文件如下所示。第二列是数字。

```
 marks       1      11.824  24.015  41.220  1.00 13.65 
   marks       1      13.058  24.521  40.718  1.00 11.82
   marks       3      12.120  13.472  46.317  1.00 10.62 
   marks       4      10.343  24.731  47.771  1.00  8.18 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:51:08.157

```
awk 'FNR == NR && $3 > 60 {array[$2] = 1; next} {if ($2 in array) next; print}' AA/ff.txt BB/filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:47:34.967

这有效，但效率不高（有关系吗？）

```
gawk 'BEGIN {getline} $3>60{print $2}' AA/ff.txt | while read number; do gawk -v number=$number '$2 != number' BB/ff.txt > /tmp/ff.txt; mv /tmp/ff.txt BB/ff.txt; done 
```

当然，第二个awk可以换成sed -i

* * *

对于多文件：

```
ls -1 AA/*.txt | while read file
do
    bn=`basename $file`
    gawk 'BEGIN {getline} $3>60{print $2}' AA/$bn | while read number
    do
        gawk -v number=$number '$2 != number' BB/$bn > /tmp/$bn
        mv /tmp/$bn BB/$bn
    done
done 
```

我没有测试，所以如果有问题，请评论。

# php - 存储此信息的最佳方式是什么？

> ID：10516852
> 
> 赞同：0
> 
> 时间：2012-05-09T13:11:28.530
> 
> 标签：php, mysql

我有一个像这样的用户表的数据库：

```
table users:
user_id (int)
user_name (varchar)
etc.. 
```

该用户将能够填写几个要求，例如：

*   最低工资（int）
*   有驾照 (bool)
*   我的其他要求（文字）

的返回值`User->get(user_id);`必须是这样的：

```
user_id: 1,
user_name: 'John Doe',
user_requirements: {
    minimal_salary: 2000,
    drivers_license: true,
    demands: 'These are my demands..'
} 
```

将其存储在数据库中的最佳方法是什么？

我知道你可以使用一对一的关系。（这将花费一个连接或单独的查询）您可以将它全部存储在一个表中。（这将需要对解码代码进行一些调整）您可以将其规范化为与需求表中的类型（int/bool/text）的多对多关系。

**编辑**

注意：我在用户表中已经有 25 列，所以如果我添加 3 到 6 列需求会有什么不同吗？对于眼睛来说，它会在一张表中获得大量信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:21:06.540

仅使用一个表来存储这些数据，因为我看不出是否有任何复杂性：

**选项 1：（**仅使用一张桌子）

```
|--------|-----------|----------------|-----------------|------------------------|
 user_id   user_name   minimal_salary   drivers_license           demands
|--------|-----------|----------------|-----------------|------------------------|
     1     John Doe         2000             true         These are my demands..
|--------|-----------|----------------|-----------------|------------------------| 
```

**选项 2：**如果`parameters`更多，`user requirements`那么您可以制作`two tables`一个 for`users`和另一个 for `requirements`，您可以`user_id as foriegn id`在另一张表中使用。然后可以`use a join`检索记录。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:52.500

由于没有其他用户共有的数据，您可以将其存储在一个表中。

例如，如果从列表中选择需求，那么我建议将可能的列表条目存储在单独的表中。

如果您不是一直都需要每个字段，那么只选择您需要的字段

不要做

```
select * from users where user_id = 123 
```

做

```
select minimal_salary, drivers_license from users where user_id = 123 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:14:30.590

除非您提供让用户指定他们自己的字段的能力，否则我认为没有理由将信息分成单独的表格。所有这些信息字段都适用于单个不同的用户。

# c# - 如何将 Base64 字符串转换为图像，然后将其绑定到 Metro Style 应用程序中的 GridView？

> ID：10516856
> 
> 赞同：3
> 
> 时间：2012-05-09T13:11:47.423
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我收集了来自网络服务的产品，我在网格视图中预览了这个产品，但我将产品的图像作为 Base64 字符串。如何将其转换为图像并将其绑定到网格视图中的图像？

任何可以帮助我解决这个问题的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:25:22.057

这似乎对我有用：

```
 public static BitmapImage Base64StringToBitmap(string source)
    {
        var ims = new InMemoryRandomAccessStream();
        var bytes = Convert.FromBase64String(source);
        var dataWriter = new DataWriter(ims);
        dataWriter.WriteBytes(bytes);
        dataWriter.StoreAsync();
        ims.Seek(0);
        var img = new BitmapImage();
        img.SetSource(ims);
        return img;
    } 
```

注意我什么都不等待，img.SetSource 应该处理延迟加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T10:46:21.400

下面是将 a 绑定`Base64String`到`Image`控件的方法

1.  将字符串转换为 byte[] 如下

    ```
    byte[] bytes = System.Convert.FromBase64String(thebase64string); 
    ```

2.  传递要绑定 Image 的 byte[] 和 Image 控件。

    ```
    public async void SetImageFromByteArray(byte[] data, Windows.UI.Xaml.Controls.Image image)
    {
        InMemoryRandomAccessStream raStream =
            new InMemoryRandomAccessStream();

        DataWriter writer = new DataWriter(raStream);

        // Write the bytes to the stream
        writer.WriteBytes(data);

        // Store the bytes to the MemoryStream
        await writer.StoreAsync();

        await writer.FlushAsync();

        // Detach from the Memory stream so we don't close it
        writer.DetachStream();

        raStream.Seek(0);

        BitmapImage bitMapImage = new BitmapImage();
        bitMapImage.SetSource(raStream);

        image.Source = bitMapImage;
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:43:56.860

在 WPF/Metro/Silverlight 中，Image 是一个 UI 控件。它的源设置为 BitmapSource。BitmapSource 是保存图像数据的数据结构。

以下是从字节数组中检索 BitmapImage 的代码。

```
public BitmapImage ImageFromBuffer(Byte[] bytes)
    {
        MemoryStream stream = new MemoryStream(bytes);
        BitmapImage image = new BitmapImage();
        image.SetSource ( stream.AsRandomAccessStream());
        return image;
    } 
```

注意，API 中没有 stream.AsRandomAccessStream 是一种扩展方法。我从 [IDWMaster](https://stackoverflow.com/users/435224/idwmaster)对这个[SO question的回复中找到了它](https://stackoverflow.com/questions/7669311/is-there-a-way-to-convert-a-system-io-stream-to-a-windows-storage-streams-irando)

以下是扩展方法的代码

```
 public static class MicrosoftStreamExtensions
    {
        public static IRandomAccessStream AsRandomAccessStream(this Stream stream)
        {
            return new RandomStream(stream);
        }
    }
    class RandomStream : IRandomAccessStream
    {
        Stream internstream;
        public RandomStream(Stream underlyingstream)
        {
            internstream = underlyingstream;
        }
        public IInputStream GetInputStreamAt(ulong position)
        {
            internstream.Position = (long)position;
            return internstream.AsInputStream();
        }

        public IOutputStream GetOutputStreamAt(ulong position)
        {
            internstream.Position = (long)position;
            return internstream.AsOutputStream();
        }

        public ulong Size
        {
            get
            {
                return (ulong)internstream.Length;
            }
            set
            {
                internstream.SetLength((long)value);
            }
        }

        public bool CanRead
        {
            get { return internstream.CanRead; }
        }

        public bool CanWrite
        {
            get { return internstream.CanWrite; }
        }

        public IRandomAccessStream CloneStream()
        {
            //HACK, this is not clone, proper implementation is required, returned object will share same internal stream
            return new RandomStream(this.internstream);
        }

        public ulong Position
        {
            get { return (ulong)internstream.Position; }
        }

        public void Seek(ulong position)
        {
            internstream.Seek((long)position, SeekOrigin.Current);
        }

        public void Dispose()
        {
            internstream.Dispose();
        }

        public Windows.Foundation.IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
        {
            throw new NotImplementedException();
        }

        public Windows.Foundation.IAsyncOperation<bool> FlushAsync()
        {
            throw new NotImplementedException();
        }

        public Windows.Foundation.IAsyncOperationWithProgress<uint, uint> WriteAsync(IBuffer buffer)
        {
            throw new NotImplementedException();
        }
    } 
```

最后3个方法未实现

我没有测试过，但上面应该可以正常工作（可能需要经过一些改进）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:20:51.517

尝试这样的事情：

```
byte[] encodedDataAsBytes = System.Convert.FromBase64String(encodedData);
MemoryStream stream = new MemoryStream(encodedDataAsBytes.Length);
stream.Write(encodedDataAsBytes, 0, encodedDataAsBytes.Length);
Image img = Image.FromStream(stream); 
```

我没有与地铁合作过，所以我无法帮助绑定到网格.. 最好的问候。

# html - 悬停在 IE 8 中不起作用

> ID：10516857
> 
> 赞同：0
> 
> 时间：2012-05-09T13:11:52.243
> 
> 标签：html, css, internet-explorer-8

悬停在 IE8 中不起作用，它在悬停时会滑出文本。

这是代码。

**HTML**

```
<div class="divCls">
    <span class="textColor">Contacts</span>
</div> 
```

**CSS**

```
.divCls:hover{
    background-color:#E8F7F9 !important;
    padding-top: 5px;
    padding-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:14:29.420

在 IE8 中，如果您在 quirks 模式下操作，`:hover`则仅支持`<a>`元素（其中 a`<div>`不支持）。

确保您有一个触发标准模式的 Doctype。

请参阅[有关 Quirks 模式的 Wikipedia 文章](http://en.wikipedia.org/wiki/Quirks_mode)以进一步阅读。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T13:15:03.967

尝试使用 LVHA 实现链接特异性。请参阅： http: [//meyerweb.com/eric/css/link-specificity.html](http://meyerweb.com/eric/css/link-specificity.html)

例子：

```
 A:link {color: blue;}    
   A:visited {color: purple;}   
   A:hover {color: magenta;}    
   A:active {color: red;} 
```

# opengl - 这是一个体积渲染结果，如何与其他 3D 对象交互

> ID：10516859
> 
> 赞同：0
> 
> 时间：2012-05-09T13:11:54.247
> 
> 标签：opengl, 3d, cuda, raycasting, volume-rendering

我已经在 CUDA 中使用光线投射实现了体积渲染。现在我需要在场景中添加其他 3D 对象（如我的情况下的 3D 地形），然后使其与体积渲染结果交互。例如，当我移动与地形重叠的体积渲染结果时，我希望对体积渲染结果进行调制，例如裁剪体积渲染结果中的重叠部分。

但是体积渲染的结果来自于光线累积的颜色，所以是没有深度的2D图片。那么如何实现交互让我很困惑。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:39:49.353

首先，您渲染您的 3D 栅格化对象。然后，您将深度缓冲区用作体积光线投射器中的附加数据源，作为对集成限制的附加约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:21:44.807

实际上，我认为光线投射的结果是 2D 图像，它不能像通常的方式那样与其他 3D 对象交互。所以我的解决方案是将光线投射的 2D 图像作为纹理，并将其融合到 3D 场景中。如果我可以控制视图位置和方向，我们可以将光线投射结果映射到 3D 场景中的确切位置。我仍在尝试实现这个解决方案，但我认为这个想法是可以的！

# html - 跨浏览器输入按钮的高度和宽度

> ID：10516860
> 
> 赞同：3
> 
> 时间：2012-05-09T13:12:00.637
> 
> 标签：html, button, css, cross-browser

```
body #wrapper .button {
  background: #00b1ff; /* Old browsers */
  background: -moz-linear-gradient(top,  #00b1ff 0%, #006aff 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00b1ff), color-stop(100%,#006aff)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,  #00b1ff 0%,#006aff 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top,  #00b1ff 0%,#006aff 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top,  #00b1ff 0%,#006aff 100%); /* IE10+ */
  background: linear-gradient(top,  #00b1ff 0%,#006aff 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b1ff', endColorstr='#006aff',GradientType=0 ); /* IE6-9 */
  height: 45px;
  width: 118px;
  color: white;
  font-size: 20px;
  font-weight: bold;
  margin-left: 10px;
  text-align: center;
  text-shadow: 0px -1px 0px #223847;
  cursor: pointer;
} 
```

这似乎在不同浏览器的高度/宽度上产生了一些变化。关于在浏览器中获得像素完美高度/宽度的任何建议？渐变似乎很好，如果它在旧浏览器上退化为纯色，我没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:29:02.393

嘿，首先我建议 eric meyer css 重置[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

第二件事，如果你计划你的按钮是可再分发的，首先删除无意义的父选择器（让 .button 独立，这样你以后可以使用它）。并且为了进一步的开发和良好的实践，尝试制作一个默认按钮，具有核心属性和一些基本颜色，以便您以后可以添加仅具有不同颜色变体的新类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:24:17.817

尝试添加 padding、border-width、box-sizing 和 font-family。所有这些都可能影响整体宽度和高度，并且浏览器可能具有不同的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:20:12.880

浏览器供应商经常添加特定的样式。边框、轮廓、填充和边距等内容因浏览器而异。您可以使用 a`reset css`将所有内容恢复为默认值，或者至少恢复为已知值。

[也可以看看。](https://stackoverflow.com/questions/116754/best-css-reset)

# php - 代码是否符合 Liskov 的替换原则？

> ID：10516864
> 
> 赞同：5
> 
> 时间：2012-05-09T13:12:16.497
> 
> 标签：php, liskov-substitution-principle

在升级之前，我正在 PHP5.4 上测试我现有的代码。我发现以下代码不再有效，因为 PHP 加强了它的继承模型。由于这种收紧，我一直在阅读[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)，特别是[Liskov 的替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)（我是一名自学成才的程序员），这样我就可以改进我的代码，而不会受到未来的“收紧”的影响。

```
interface IComparable {
    public function equals(self $other);
}

class A implements IComparable{
    protected $var;

    public function __construct($v){
        $this->var=$v;
    }

    public function equals(self $other){
        return ($this->var == $other->var) ? 'equal' : 'different';
    }
}

$a1= new A(7);
$a2= new A(5);
$a3= new A(5);

echo $a1->equals($a2),"\n";
echo $a2->equals($a3),"\n"; 
```

## php 5.3 结果：

*   不同的
*   平等的

## php 5.4 结果：

> PHP 致命错误：A::equals() 的声明必须与 IComparable::equals(IComparable $other) 兼容

如果我这样编写代码，我可以避免 php5.4 错误：

```
interface IComparable {
    public function equals($other);
}

class A implements IComparable{
    protected $var;

    public function __construct($v){
        $this->var=$v;
    }

    public function equals($other){
        if(get_class($other) != get_class($this)) return false;
        return ($this->var == $other->var) ? 'equal' : 'different';
    }
} 
```

但是**该修复是否符合 Liskov 的替换原则**，因为该函数显然不接受任何参数类型？如果没有，我如何编写一个可继承的函数来满足我的需要——比较相同类型的 2 个对象——并遵守良好的 OOD 原则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:31:30.843

首先：PHP 5.3 的行为是一个[bug](https://bugs.php.net/bug.php?id=60573)，所以你不能用它作为衡量任何其他方法的标准。

展望未来，您的 5.3 版本代码中已经违反了 LSP。考虑：

```
interface IComparable {
    public function equals(self $other);
} 
```

这表示“任何人`IComparable`都可以将自己与任何其他人进行比较`IComparable`”（比较的*语义*对于讨论并不重要）。然后`class A`继续违反 LSP，因为它不*支持*与任何比较`IComparable`——仅与那些碰巧是`A`实例的比较。

PHP 5.4 版本没有违反 LSP，因为新版本`IComparable`说“我可以将自己与任何其他对象进行比较”，而这正是这样`class A`做的。

如果您的意图是保留 5.3 版本合同，那么`IComparable`应该阅读

```
interface IComparable {
    public function equals(IComparable $other);
} 
```

`class A`当然会使用相同的签名。这不会违反 LSP *，并且*可以在两个版本中正常工作。

如果您的意图是声明“一个`IComparable`实例可以将自己与相同类型的实例进行比较，无论它是什么”，那么您就不走运了，因为该合同无法使用方法签名和类型提示来表达。

**更新：**原来你的意图是声明“这个类的实例可以比较自己”，`IComparable`只是为了强迫你不要忘记这样做。

在这种情况下，解决方案是简单地忘记`IComparable`并`self`在签名中使用`A::compare()`. 您确实失去了编译器强迫您记住定义必需方法的能力，但恕我直言，这是一个小问题（特别是因为接口只声明了一个方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:41:07.263

我相信您的接口和类需要编写如下才能更健壮：

```
interface IComparable
{
    /** 
     *  @return boolean 
     */
    public function equals(IComparable $other);

    /**
     *  @return mixed
     */
    public function getValue();
}

class A implements IComparable{
    protected $var;

    public function __construct($v){
        $this->var=$v;
    }

    /**
     *  @return mixed
     */
    public function getValue()
    {
       return $this->var;
    }

    /** 
     *  @param  IComparable $other
     *  @return boolean 
     */
    public function equals(IComparable $other)
    {
        return ( $this->getValue() === $other->getValue() );
    }
} 
```

php 中的 self 关键字指的是当前类，我建议不要将它用于类型提示参数，因为它不太清楚方法参数是什么。

关于你对 equals 和 Liskov Substitution 的实现，这是你触及的一个有趣的主题。我会[在这里](http://weblog.raganwald.com/2007/04/what-does-barbara-liskov-have-to-say.html)看到关于平等和 Liskov 的有趣讨论。

# mysql - 尝试更新段落后的MYSQL错误

> ID：10516865
> 
> 赞同：0
> 
> 时间：2012-05-09T13:12:20.340
> 
> 标签：mysql, sql, syntax-error

我有一个非常具体的问题，我找不到问题。我尝试更新一些文本，但出现错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“= 科孚岛的复活节被认为是格力最盛大的庆祝活动”附近使用正确的语法

我的代码：

```
$arr = explode("|", $id, 2);
$id = $arr[0];
$part = $arr[1];                                                // in which part of a splited paragraph currently we are
$row = mysql_fetch_array(mysql_query("SELECT * FROM paragraph WHERE id=$id")) or die(mysql_error());    
$search = 'insertphotos';                                       // the string to search for     
$string = $row['text_content'];                                 // the string to search
$repetition = substr_count($string, $search);                   // how many insertphotos exist in paragraph
if ($repetition > $part){   
    if ($part > 1)
        $offset = $part - 1;                                    // how many times to search for word insertphotos
    else
        $offset = $part;
    $start = strposOffset($search, $string, $offset) + 13;      // find position of '$offset' occurance of search string
    $offset++;
    $end = strposOffset($search, $string, $offset) - $start - 1;
    $string = substr_replace($string, $value, $start, $end);
}else if ($repetition == $part){
    $offset = $part;                                        // how many times to search for word insertphotos
    $start = strposOffset($search, $string, $offset) + 13;      // find position of '$offset' occurance of search string
    $string = substr_replace($string, $value, $start, strlen($string)); 
}else
    $string = "<p>".$value."</p>";
//$value = "<p>".$value."</p>";
mysql_query("UPDATE paragraph SET text_content=".$string." WHERE id='$id'") or die(mysql_error());  
//mysql_query("INSERT INTO paragraph (header, text_content, menu_id, sequence) VALUES('<h2>Bella Vista Hotel h2 - Please Change Me</h2>', $string, '15', '2')") or die(mysql_error());
mysql_close($link);     
//echo "INSERT PHOTOS REPEATS " .$repetition ." ID =".$id ." PART = ".$part ." WE SEARCH, START AT " .$start ." FINISH AT " .$end ." SEARCH FOR OFFSET = " .$offset ." FINAL STRING " .$string;
echo $string; 
```

每个变量都有效，我尝试回显，没有任何问题。如果文本中只有一张插入照片（或零张），它可以工作。虽然我有不止一个，但我得到了这个错误。我不知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:16:46.870

您的文本字符串没有被引用。

```
mysql_query("UPDATE paragraph SET text_content='".mysql_real_escape_string($string)."' WHERE id='$id'") or die(mysql_error()); 
```

您还应该转义您的输入： http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:16:37.577

插入的 . 周围没有引号`".$string."`。

此外，我看不到对 的调用[`mysql_real_string_escape()`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)。为什么不？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:29:12.730

```
mysql_query("UPDATE paragraph SET text_content=".$string." WHERE id='$id'")
mysql_query("UPDATE paragraph SET text_content='".$string."' WHERE id='".$id"') 
```

检查您的请求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:16:13.923

`$string`在将其放入查询之前，您需要对其进行转义。

`$string`包含一个`'`使您的查询错误的字符。

# jquery - Jquery - 验证可见字段集中的单选表单字段类型？

> ID：10516874
> 
> 赞同：0
> 
> 时间：2012-05-09T13:12:38.063
> 
> 标签：jquery, validation

下面的代码将验证当前可见字段集中的必填字段，但前提是这些字段是文本框。

如何合并代码以验证作为单选按钮的字段？

**我的 jsfiddle >>** [http://jsfiddle.net/justmelat/zwXRr/](http://jsfiddle.net/justmelat/zwXRr/)

**我的html：>>**

```
<form method="post" action="">
  <div id="holdErrMsg"></div>
  <fieldset id="mainSection" name="mainSection">
    <legend style="color:blue; font-weight:bold">Project Overview Section</legend>
    <table style="width: 100%">
      <tr>
        <td style="height: 33px; width: 178px;">Name</td>
        <td style="height: 33px"><input  id="1125" name="1125" class="1125-required" type="text" /></td>
      </tr>
      <tr>
        <td style="height: 33px; width: 178px;">Email</td>
        <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" /></td>
      </tr>
      <tr>
        <td style="width: 178px">Product Title</td>
        <td><input  id="1089" name="1089" type="text" /></td>
      </tr>
      <tr>
        <td style="width: 178px">Product Type</td>
        <td>
          <select id="1169" name="1169">
            <option value="">Select</option>
            <option value="Cars">Cars</option>
            <option value="Boats">Boats</option>
            <option value="Planes">Planes</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>
          <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
        </td>
      </tr>
    </table>
  </fieldset>
  <fieldset id="section-11" name="section-11">
    <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>
    <table cellpadding="2" style="width: 100%">
      <tr>
        <td style="width: 334px; height: 35px"><label>Size:*</label></td>
        <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" /></td>
      </tr>
      <tr>
        <td style="height: 35px; width: 334px">Color:*</td>
        <td style="height: 35px">
          <select id="1433" class="1433-required" name="1433">
            <option value="Orange">Orange</option>
            <option value="Blank">Blank</option>
            <option value="Green">Green</option>
          </select>
        </td>
      </tr>
      <tr>
        <td style="width: 334px">Description:</td>
        <td>
          <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
        </td>
      </tr>
    </table>
  </fieldset>
  <fieldset id="section-12" name="section-12">
    <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>
    <table cellpadding="2" style="width: 100%">
      <tr>
        <td style="width: 334px; height: 35px"><label>Size:</label></td>
        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
      </tr>
      <tr>
        <td style="height: 35px; width: 334px">Color*:</td>
        <td style="height: 35px">
          <input type="checkbox" name="1433[]" id="1433[]" value"Orange" class="1433[]-required"/>Orange
          <input type="checkbox" name="1433[]" id="1433[]" value"Blue" class="1433[]-required"/>Blue
          <input type="checkbox" name="1433[]" id="1433[]" value"Green" class="1433[]-required"/>Green
        </td>
      </tr>
      <tr>
        <td style="width: 334px">Description:</td>
        <td>
          <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
        </td>
      </tr>
    </table>
  </fieldset>
  <fieldset id="section-13" name="section-13">
    <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>
    <table cellpadding="2" style="width: 100%">
      <tr>
        <td style="width: 334px; height: 35px"><label>Size:</label></td>
        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
      </tr>
      <tr>
        <td style="height: 35px; width: 334px">Color:*</td>
        <td style="height: 35px">
          <input type="radio" name="1834" id="1834" value="None" class="valuetext" class="1834-required">None
          <input type="radio" name="1834" id="1834" value="All" class="valuetext" class="1834-required">All
        </td>
      </tr>
      <tr>
        <td style="width: 334px">Description:</td>
        <td>
          <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea>
        </td>
      </tr>
    </table>
  </fieldset>
  <br>
  <fieldset id="section-1011" name="section-1011">
    <legend style="color:green; font-weight:bold">Misc Info Section</legend>
    <table cellpadding="2" style="width: 100%">
      <tr>
        <td style="width: 334px; height: 35px"><label>Size:</label></td>
        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
      </tr>
      <tr>
        <td style="height: 35px; width: 334px">Color:</td>
        <td style="height: 35px">
          <select id="1302" name="1302">
            <option value="Orange">Orange</option>
            <option value="Blank">Blank</option>
            <option value="Green">Green</option>
          </select>
        </td>
      </tr>
      <tr>
      <td style="width: 334px">Description:</td>
        <td>
          <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea>
        </td>
      </tr>
    </table>
  </fieldset>
</form> 
```

**我的jQuery代码：>>**

```
$("#section-11,#section-12,#section-13,#section-1011").hide();

var projtype = new Array(
  {value : 'Cars', sect_id : 'fieldset#section-11'},
  {value : 'Planes', sect_id : 'fieldset#section-12'},
  {value : 'Boats', sect_id : 'fieldset#section-13'}
);
$("select#1169").on('change',function () {
  var thisVal = $(this).val();
  var sect_id ="";
  //$('fieldset[id!="mainSection"]').hide();
  $(projtype).each(function() {
    $(this.sect_id).hide();
    if(this.value == thisVal) {
      $(this.sect_id).show();
    }
  });
});

$("#btnCatchReqFlds").on('click', function() {
  $("#holdErrMsg").empty();
  var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() {
    return $.trim($(this).val()) === "";
  });

  if (requiredButEmpty.length) {
    requiredButEmpty.each(function () {
      $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
    });
  }

  return !requiredButEmpty.length;
});
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:33:57.503

您不检查单选按钮值是否为*空*，您检查它是否已被用户*检查*。如果已选中任何一个，您还需要检查同一组（具有相同名称）中的所有单选按钮。在这种情况下，我会预先过滤列表以避免每个必需的单选按钮出现重复的错误消息。

[在你的 jsfiddle 的一个分支中实现](http://jsfiddle.net/joelpurra/74uqJ/)。

```
$("#btnCatchReqFlds").on('click', function() {
    $("#holdErrMsg").empty();
    var distinctRadiobuttonGroups = [];
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function(index) {
        // Pre-filter to keep only one radio button per radio button group
        var $this = $(this);

        if ($this.is(":radio")) {
            var name = $this.attr("name");

            if (distinctRadiobuttonGroups[name]) {
                // Non-unique, filter out
                return false;
            }

            distinctRadiobuttonGroups[name] = true;

            return true;
        }

        // Keep all non-radio buttons
        return true;
    }).filter(function() {
        var $this = $(this);

        if ($this.is(":checkbox")) {
            // Required check boxes must be checked
            return !$this.is(":checked");
        } else if ($this.is(":radio")) {
            var foundCheckedRadio = false,
                radioButtonGroupSelector = ":radio[name=" + $this.attr("name") + "]";

            $this.parents("form").find(radioButtonGroupSelector).each(function() {
                // Check if this radio button was checked
                // (could be optimized to return when finding the first checked radio button)
                foundCheckedRadio = foundCheckedRadio || $(this).is(":checked");
            });

            // The result after checking all radio buttons in the same group
            return !foundCheckedRadio;
        } else {
            // Evertything not a checkbox or radio button
            return $.trim($this.val()) === "";
        }
    });
    if (requiredButEmpty.length) {
        requiredButEmpty.each(function() {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !requiredButEmpty.length;
});​ 
```

提供的 HTML 也存在一些问题；例如，不同元素的重复 ID 和输入（不允许）以及`=`复选框值的缺失字符。

普通复选框更容易，除非您有一些逻辑必须*至少*检查其中一个。我的修复没有考虑到这一点，这就是为什么您会收到三个飞机验证错误消息的原因。

# java - 在 Java 中的 short、int、long、double、float 之间进行转换

> ID：10516883
> 
> 赞同：0
> 
> 时间：2012-05-09T13:13:14.440
> 
> 标签：java, types, casting, int, double

据我了解，当您使用 Java 中的算术运算（例如 double + int）在其中两种类型之间进行转换时，结果将是更大的类型（在此示例中，结果将为双精度）。当你对两种大小相同的类型进行算术运算时会发生什么？int + float 和 long + double 会给出什么？因为 int 和 float 分别是 4 个字节，而 long 和 double 是 8 个字节。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T13:15:57.510

这都是由JLS 中的*二进制数字提升规则指定的。*来自[http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)：

> 当运算符将二进制数值提升应用于一对操作数时，每个操作数都必须表示一个可转换为数值类型的值，以下规则按顺序适用：
> 
> 1.  如果任何操作数属于引用类型，则将对其进行拆箱转换（第 5.1.8 节）。
>     
>     
> 2.  加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：
>     
>     
>     *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
>         
>         
>     *   否则，如果任一操作数的类型为浮点型，则另一个将转换为浮点型。
>         
>         
>     *   否则，如果任一操作数是 long 类型，则另一个将转换为 long。
>         
>         
>     *   否则，两个操作数都转换为 int 类型。
>         
>         
> 
> 在类型转换（如果有）之后，值集转换（第 5.1.13 节）将应用于每个操作数。
> 
> 对某些运算符的操作数执行二进制数值提升：
> 
> *   乘法运算符 *、/ 和 %（第 15.17 节）
>     
>     
> *   数字类型 + 和 - 的加法和减法运算符（第 15.18.2 节）
>     
>     
> *   数值比较运算符 <、<=、> 和 >=（第 15.20.1 节）
>     
>     
> *   数值相等运算符 == 和 != (§15.21.1)
>     
>     
> *   整数位运算符 &、^ 和 | （§15.22.1）
>     
>     
> *   在某些情况下，条件运算符 ? : (§15.25)

（“值集转换”是关于浮点表示之间的映射。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:15:45.823

`int`+`float`会给你`float`（请注意，你必须将结果转换为，`float`因为`double`默认情况下使用）。`long`+`double`会给你`double`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:16:54.240

仍然会返回`"bigger"`可以保存完整值的类型。在您的具体问题中

如果你在 int 和 float 之间加上 + ，返回值将是一个 float 而 long + double 返回一个 double，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:18:03.407

加法运算符的行为在[15.18.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)`+`中`-`定义。JLS[数值类型的加法运算符（+ 和 -） 。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)它声明它首先执行二进制数字提升：

> 对操作数执行二进制数字提升。

这又由[5.6.2 定义。二进制数字提升](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)。实质上，对于原语：

*   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
*   否则，如果任一操作数的类型为浮点型，则另一个将转换为浮点型。
*   否则，如果任一操作数是 long 类型，则另一个将转换为 long。
*   否则，两个操作数都转换为 int 类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:25:01.973

有两个关于类型转换的有趣常见问题解答可以在以下位置找到：http: [//www.programmersheaven.com/2/FAQ-JAVA-Type-Conversion-Casting](http://www.programmersheaven.com/2/FAQ-JAVA-Type-Conversion-Casting)

[http://myhowto.org/java/60-understanding-the-primitive-numeric-type-conversions-in-java/](http://myhowto.org/java/60-understanding-the-primitive-numeric-type-conversions-in-java/)

在两种相同大小的类型上回答您的问题，返回值是具有最大精度的类型。

试试下面的代码：

```
public static void main(String[] args) {
    int i=1;
    float f=2.5f;
    long l=10;
    double d=3.74;
    System.out.println(i+f);
    System.out.println(f+i);
    System.out.println(l+d);
    System.out.println(d+l);
} 
```

您将看到结果是 3.5 和 13.74，分别是浮点数和双精度数（在 Netbeans 6.9 和 java 1.6 中测试）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T13:25:07.340

这个“促销”的一个问题是`long`+`float`将“扩大”到使用浮点数。

例如

```
System.out.println(1111111111111111111L + 0.0f);
System.out.println(1111111111111111111L + 0.0); 
```

印刷

```
1.11111113E18
1.11111111111111117E18 
```

在处理 long 和 float 时，您可能无法获得更宽的类型，并且可能会损失比您预期的更多的精度。

# java - 从偏好中获取价值？

> ID：10516888
> 
> 赞同：0
> 
> 时间：2012-05-09T13:13:24.840
> 
> 标签：java, android

我在首选项中有一个复选框，我得到了价值

```
SharedPreferences myPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

默认情况下，我的首选项中的复选框被选中，我正在使用它

```
if(myPreferences.getBoolean("checkbox", false) == true) 
```

检查用户是否更改复选框状态。如果上述条件为真，我将在状态栏中收到通知（我不会提供通知和服务的代码）。所以，我的问题是，在我点击首选项之前，我没有收到通知，最后我的 PreferenceManager 从复选框和我的通知触发器中获取值。我该如何解决？谢谢，狼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:17:41.517

您的复选框可能默认为“true”，但您的设置不是。如果您的设置根本没有设置，您会从您的 中获取默认值`getBoolean`，即`false`. 您可能正在寻找这个：

```
if(myPreferences.getBoolean("checkbox", true) == true) 
```

它说：如果您找不到首选项（还），请使用默认值，即`true`.

# email - 用于检查用户是否存在的 PDO Prepared Select 语句

> ID：10516903
> 
> 赞同：1
> 
> 时间：2012-05-09T13:14:09.193
> 
> 标签：email, select, pdo, prepared-statement, match

我是一个 pdo 新手，需要准备和执行一些 php/pdo 代码：此代码允许我在我的数据库中创建用户：

```
 // Perform Insert / Update
$STH = $dbh->prepare("INSERT INTO users (username, email) values (:username, :email)");
$STH->bindParam(':username', $username);
$STH->bindParam(':email', $email);
    try{
    $STH->execute();
    redirect_to(signupsuccess.php);
    }
catch(PDOException $e) {  
echo "I'm sorry, Dave. I'm afraid I can't do that.";  
file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND); 
}
    } 
```

但在我将该数据放入数据库之前，我需要进行检查以确保数据库中不存在电子邮件。我需要做一个选择，比如：

```
 $STH = $dbh->prepare("SELECT FROM users (email) values (:email)");
$STH->bindParam(':email', $email);
try{
    $STH->execute();
      } 
```

我知道我需要添加

```
 "WHERE something matches '$_POST'email') something.." ... 
```

在这一点上我完全迷失了..我可以在没有 PDO 的情况下做到这一点，但我想开始使用 PDO 的准备好的语句..请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:25:30.950

只需做一个简单的选择。如果您可能有一个空电子邮件，我建议使用绑定值。

```
$STH = $dbh->prepare("SELECT email FROM users WHERE email = :email");
$STH->bindValue(':email', $email);
try{
    $STH->execute();
} 
```

然后只需检查是否返回任何记录。如果是这样，请更新，不要插入。祝你好运。

# android - 从谷歌地图转换为开放的街道地图（osmdroid）

> ID：10516923
> 
> 赞同：3
> 
> 时间：2012-05-09T13:15:51.313
> 
> 标签：android, osmdroid

我使用谷歌地图构建了我的应用程序，它正在使用：

-BalloonItemizedOverlay

-BalloonOverlayView

-ItemizedOverlay

以及它的作用：

- 在地图上显示多个点，每个点都可点击，并且气球会出现相关文字+描述。

- 显示和更新用户位置的标记/点。

我想切换到 Open Street Map 的唯一原因是因为我想使用“缓存地图图块”（预保存地图）功能，据我所知，谷歌地图不允许使用该功能。

有人可以帮我彻底转换我的应用程序以使用 OSMdroid 而不是 GoogleMaps 吗？为我提供一些指南（目前对 OSMdroid 的支持很少......）

我已经查找了很多代码，但与谷歌地图相比，它们大多不同，我似乎无法完全理解。我已经设法在地图上显示用户的位置，但添加 BalloonItemizedOverlays 等很麻烦。

无论如何，只要你能以任何方式帮助我 - 关于如何做的建议，有指南的网站，任何东西:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:30:29.710

[http://code.google.com/p/osmbonuspack/wiki/Tutorial_1](http://code.google.com/p/osmbonuspack/wiki/Tutorial_1)

[http://code.google.com/p/osmbonuspack/wiki/Tutorial_2](http://code.google.com/p/osmbonuspack/wiki/Tutorial_2)

我认为这两个教程应该让你开始使用气球和定制气球

osmdroid 的逐项叠加非常易于使用，您应该试一试，一旦您尝试我们就会感受到它。

# ruby-on-rails - Rails 迁移 - 许多属于同一个表，乘以 FK

> ID：10516925
> 
> 赞同：0
> 
> 时间：2012-05-09T13:16:00.497
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, nosql

我需要一些像这样的表：

```
uid:integer
pid:integer
predesposition:integer
primary_key(uid,pid)
foreign_key(uid, user(id))
foreign_key(pid, user(id)) 
```

所以，有两个问题： 1\. 如何在迁移中声明多个 FK？2\. 如何在迁移中声明两个（或更多）列属于同一个表？

例子：

```
create_table :encounters, :id => false do |t|
  t.belongs_to :user, :polymorphic => true
  t.belongs_to :user, :polymorphic => true
  t.integer :predisposition
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:31:07.163

如果要引用其他表，请遵循外键的概念。并想建议使用完整的表名而不是 uid 和 pid 。

```
create_table :table_name, {:id => false} do |t|
  t.integer :user_id
  t.integer :pid #suppose its procedures table
  t.integer :predesposition
  t.references :user
  t.references :procedure
  t.timestamps
end
execute "ALTER TABLE table_name ADD PRIMARY KEY (user_id,pid);" 
```

希望有所帮助。

# asp.net-mvc - 对多个视图模型使用相同的操作结果方法？

> ID：10516934
> 
> 赞同：2
> 
> 时间：2012-05-09T13:16:51.993
> 
> 标签：asp.net-mvc, viewmodel

我有三个视图模型来编辑同一个域对象。我使用 AutoMapper 从域对象映射到视图模型。

得到

```
if (Roles.IsUserInRole("administrators"))
{
    viewName = "EditAdmin";
    editOrder = Mapper.Map<Order, ViewModels.Order.Admin_ViewModel>(order);
}
else if (Roles.IsUserInRole("administrators"))
{
    viewName = "EditTechnician";
    editOrder = Mapper.Map<Order, ViewModels.Order.Technician_ViewModel>(order);
}
else if (Roles.IsUserInRole("clients"))
{
    viewName = "EditClient";
    editOrder = Mapper.Map<Order, ViewModels.Order.Client_ViewModel>(order);
}

RedirectToRoute(viewName, editOrder); 
```

POST 是否可以对所有视图模型使用相同的方法？可能通过让 ViewModels 从“ViewModelbase”继承？试过这个没有成功:(

提前谢谢了！

编辑：这就是我的方法现在的样子：

```
public ActionResult EditAdmin(ViewModels.Order.Admin_ViewModel model) {...} 
```

有任何想法吗？

**更新：** 我无法理解如何使用组合（尝试了几个小时）。所以我用这个来清理一下。这些是我的三个视图模型的处理程序：

```
[HttpPost]
[Authorize(Roles = "administrators")]
public ActionResult EditAdmin(Admin_ViewModel model)
{
    return SaveViewModel(model);
}

[HttpPost]
[Authorize(Roles = "technicians")]
public ActionResult EditTechnician(Technician_ViewModel model)
{
    return SaveViewModel(model);
}

[HttpPost]
[Authorize(Roles = "clients")]
public ActionResult EditClient(Client_ViewModel model)
{
    return SaveViewModel(model);
} 
```

SaveViewModel 看起来像这样：

```
protected ActionResult SaveViewModel(dynamic model)
{ ... } 
```

我对这个解决方案感觉不太好。你能给我一些指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:26:46.670

恕我直言 - ViewModel 应该简单明了。如果你引入继承，它会变得复杂。

我建议你使用**组合**来构建你想要的 ViewModel。因此，如果用户处于特定角色中，则在发布页面时，与该角色无关的对象将为空。有了它，您可以坚持使用一种 POST 方法而不是多种方法。

**更新：** 如果你真的想在 ViewModel 中继承。自定义模型绑定器是解决方案，如果默认的不工作

# android - 如何使滚动 LinearLayout android:background="@drawable/imagesliding"

> ID：10516937
> 
> 赞同：1
> 
> 时间：2012-05-09T13:17:03.663
> 
> 标签：android

我有带有背景图像的LinearLayout，如下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/imgscrolling"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="bottom"
android:background="@drawable/bg" /> 
```

我的目的是将 LinearLayout 背景从 Image1 滚动到 Image2 ......等请告诉我怎么做，我很感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:30:33.283

您可以在 onFling 方法中更改图像

公共类 SwipeActivity 扩展 Activity 实现 OnClickListener {

```
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;
View.OnTouchListener gestureListener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* ... */

    // Gesture detection
    gestureDetector = new GestureDetector(new MyGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }

} 
```

# asp.net-mvc - 部署 - 对象引用未设置为对象的实例

> ID：10516938
> 
> 赞同：0
> 
> 时间：2012-05-09T13:17:06.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, deployment

我的 ASP.NET MVC 3 应用程序在我的本地机器上运行良好（并且在我部署它时通常运行良好），但在这种情况下我收到以下错误。服务器是带有 IIS7 的 windows 2008 R2

编辑：Bothe ILoggingService 和 IConfigSettings 都被 Ninject 绑定在单例范围内（如果有帮助）

有人对我应该寻找什么有任何指示吗？

```
Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
DataPortal.Models.Repositories.KpiRepository..ctor(ILoggingService ls, IConfigSettings configSettings) +1295
DynamicInjector3f592a0195c345d8a7d555c4c4085e12(Object[] ) +128
Ninject.Activation.Context.Resolve() +279
System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +237
System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +298
System.Linq.WhereSelectArrayIterator`2.MoveNext() +109
System.Linq.Buffer`1..ctor(IEnumerable`1 source) +487
System.Linq.Enumerable.ToArray(IEnumerable`1 source) +103
Ninject.Activation.Providers.StandardProvider.Create(IContext context) +479
Ninject.Activation.Context.Resolve() +279
System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +237
System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +298
System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'DataPortal.Controllers.KpiController'. Make sure that the controller has a parameterless public constructor.]
System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +247
System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +85
System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +280
System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +66
System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +19
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +161
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +405
 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:18:12.150

这最终是一个依赖问题。该项目依赖于另一个尚未部署的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:30:14.873

似乎您的参数之一“LoggingService 或 ConfigSettings”在您的 web.config 中未正确配置。检查您以前的工作版本配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-18T22:14:39.577

在某些情况下，它可能与数据库问题有关，例如：

在没有正确异常处理的情况下返回空值的选择将导致相同的错误。因此，需要检查他的 sql 请求。

# android - 扩展 LinearLayout 时 Textview 的值未更新

> ID：10516943
> 
> 赞同：0
> 
> 时间：2012-05-09T13:17:19.043
> 
> 标签：android

我有我的课程正在扩展`LinearLayout`。

代码片段如下：

```
class MyLinearLayout extends LinearLayout{

static TextView  txt;
static Button btn;
static LayoutInflater inflater;

public MyLinearLayout(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    View.inflate(context, R.layout.displayinfo, this);
    inflater = (LayoutInflater)  getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    // TODO Auto-generated method stub
    super.onLayout(changed, l, t, r, b);
}

public  void change(){

     View view =inflater.inflate(R.layout.displayinfo, null);
     //Button btn = (Button) inflate(context, R.id.btn, null);
     txt = (TextView) view.findViewById(R.id.textView1);
     Handler handler = new Handler() {
         @Override
         public void handleMessage(Message msg) {
             txt.setText("Changed");

         }
     };
     //view.refreshDrawableState();

}

@Override
protected void onDraw(Canvas canvas) {
    change();
}
} 
```

`onDraw()`但是当->`change()`方法被调用时，该值没有改变。我将此视图添加到`WindowManager`.

在这个扩展视图中，我基本上必须从`array`. 但问题是如何连续调用循环？调用 an`invalidate()`可以帮助我连续调用它，但它会增加 CPU 使用率，并且视图刷新得如此之快，以至于用户实际上无法查看`View`.

所以基本上我有两个问题：

1.`TextView`上面的代码片段没有更新？

2.我们如何在不调用`invalidate()`方法的情况下基本持续更新视图值？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:30:21.427

调用 change 不会更改文本，因为在 change() 内部您有一个处理程序，并且您通过告诉它更改文本来覆盖它的 handleMessage()。为了实际进行更改，您需要向处理程序发送信号。

试着把这条线：

```
handler.sendEmptyMessage(0); 
```

代替

```
//view.refreshDrawableState(); 
```

那么 change 方法实际上应该在 TextView 中设置文本。

**编辑：**另外，您可能不应该在每次调用更改时都夸大新视图。事实上，您根本不需要膨胀，因为您已经在构造函数中完成了它（您已经是您试图获取参考的视图）。您应该能够在前面没有任何引用的情况下调用 findViewById() 来获取 TextView 引用。您应该在构造函数中而不是在 change() 中执行此操作。

# jquery - 在从其中删除所有动态数据后，滑动一个 div，jquery

> ID：10516946
> 
> 赞同：0
> 
> 时间：2012-05-09T13:17:27.663
> 
> 标签：jquery, jquery-animate, livequery

我有一个应用程序，用户在其中将关键字添加到 div。他们可以根据需要添加/删除关键字。当他们添加第一个关键字时，一个 div 使用 slideToggle 打开 div 并显示第一个关键字。这些关键字被添加到一个数组中。当他们点击 x 图形时，我使用 livequery 插件删除关键字 div。我遇到的问题是当最后一个关键字被删除（基于数组长度为 0）时，我希望 div 再次使用 slideToggle 来关闭 div。这不适用于我当前的代码。

```
 //Here's my jquery
    $(document).ready(function () {
        //number of keywords
        var numkw = 0;
        //keyword array
        var keywords = [];
        //ouput of array
        var output = "";
        //hide the div that holds the keywords
        $("div#KeywordHolder").hide();

        //When the Add keyword button clicked 
        $("#nihSearch_btnSearch").click(function () {
            //value of textbox
            var currentkeyword = $("#nihSearch_txtSearch").val();
            //if numkw is 0 slide open the keyword holder
            if (keywords.length == 0) {
                keywords.push(currentkeyword);
                //slide open keywordHolder
                $("div#KeywordHolder").slideToggle("slow", function () {
                    $("div#KeywordHolder").delay(2000, function () {
                        //add first tab to keys div and fade it in
                        $("div#keys").append("" + currentkeyword + " ");
                        var lastid = $("div#keys .tab:last").attr("id");
                        $("div#keys").fadeIn(1000);
                    });

                });

            }
            //otherwise add the tab and keyword to the array
            else {
                keywords.push(currentkeyword);
                $("div.tab:last").after("" + currentkeyword + " ", function () {
                    $(this).fadeIn(1000);
                });
                var lastid = $("div#keys .tab:last").attr("id");
            }

        });

        //When get resources button clicked show current array values
        $("#nihSearch_btnResults").click(function () {
            output = "";
            //as a test output all array values into a message box
            $.each(keywords, function (i, l) {
                output += l + " ";
            });

            alert(output);
        });

        //Tab x clicked
        $('#keys', 'body')
            .find('a.xclick')
                .livequery('click', function () {
                    //gets the id of the tab clicked on
                    var getid = $(this).parent().attr("id");
                    //gets the number of the tab from the id value
                    var numid = parseInt(getid.replace(/\D/g, ''), 10);
                    $(this).parent("div").remove();
                    keywords.splice((numid - 1), 1);
                    alert("Length: " + keywords.length);
                    if (keywords.length == 0) {
                        alert("In the if statement");                   
                        $("div#KeywordHolder").slideToggle("slow");
                    }
                    return false;
                });

    });

    //code for autocomplete textbox

    $(function () {
        var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
        $(".homeSearchBox").autocomplete({
            source: availableTags
        });
    });

    // code for drop down

    (function ($) {
        $(function () {
            $('#combolist').combobox();

        });
    })(jQuery); 
```

```
 ```
<!-- Here's my html -->

<div class="ui-widget">
                                <asp:TextBox ID="txtSearch" placeholder="Enter Keywords..." columns="25" CssClass="homeSearchBox" runat="server"></asp:TextBox>

                                 <asp:Button ID="btnSearch" CssClass="searchButton" runat="server" 
                                Text="Add Keyword" UseSubmitBehavior="False" />
                            </div>

                            <div id="KeywordHolder">
                                <div id="keys">
                                    <!-- <div class='tab'><span>test tab</span><a href='#' class='xclick' />Close</a></div> -->
                                </div>
                                <br class="clear" />  
                                <div class="rightdiv">
                                    <asp:Button ID="btnResults" CssClass="searchButton" runat="server" 
                                    Text="Find Resources" UseSubmitBehavior="False" />
                                </div>                         
                            </div> 
``` 
```

# java - 关于静态关键字的困惑

> ID：10516952
> 
> 赞同：1
> 
> 时间：2012-05-09T13:17:40.033
> 
> 标签：java, oop, static

我刚刚在一篇文档中读到“静态方法只能调用其他静态方法，而不能从中调用非静态方法”。但是当我尝试测试它时，我认为看到了一些不同的东西。

我有一个 C 类，如下所述

```
import pckage1.*;

public class C
{

public static void main(String par[])
{       
}
public static void cc() 
{
    A ob = new A();
    ob.accessA(0);      
}   

} 
```

A类在哪里

```
package pckage1;

public class A 
{
public A() 
{
}
public void accessA(int x)
{   
}

} 
```

现在从类 C 中的 cc STATIC 方法，调用了一个非 STATIC 方法 accessA()。如果关于静态方法的陈述是真的，那怎么可能呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:19:12.797

> *静态方法只能调用其他静态方法，不能从中调用非静态方法*

那是**错误**的。

静态方法*可以*调用非静态方法，只要它们有对象可以调用方法（正如您在代码片段中发现的那样）*。**否则*如何调用非静态方法？

您**不能**从静态方法中进行操作`nonStaticFoo()`，因为它被解释为`this.nonStaticFoo()`并且因为静态方法中没有`this`可用的方法。

今天早些时候非常相似的问题：

*   [静态方法访问非静态构造函数？](https://stackoverflow.com/questions/10513633/static-method-access-to-non-static-constructor/10513675#10513675)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:20:13.123

你没有调用你的类的非静态方法。

试试这个：

```
import pckage1.*;

public class C
{

public static void main(String par[])
{       
}
public static void cc() 
{
    A ob = new A();
    ob.accessA(0);  
    print();    
}   

public void print() 
{

}   
} 
```

它不起作用，因为您从静态方法调用非静态方法，并且您没有 C 类的实例可在静态方法中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:20:47.200

由于每个 Java 程序都是从静态方法开始执行的，如果你引用的陈述是真的，那么任何 Java 程序都没有办法执行实例方法！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T13:21:23.287

静态方法在 C 中没有默认上下文，而`this`.

但是，任何方法都可以使用类的实例来调用方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T13:19:35.277

你在一个实例上调用一个实例方法——你不是试图直接调用一个实例方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T13:19:39.707

您正在创建 A 类的一个实例并在其上调用一个方法。所以你调用的方法是实例方法（不是静态方法）。但是你不能调用 C 类的非静态方法。

# html - 包含浮动而不切断特定项目

> ID：10516955
> 
> 赞同：0
> 
> 时间：2012-05-09T13:17:43.377
> 
> 标签：html, css

仅供参考：这是对另一个问题的跟进：[绝对定位元素，但在另一个元素的右侧](https://stackoverflow.com/questions/10505516/position-element-absolutely-but-to-the-right-of-another-element/10505574#10505574)

我有一个表单元素列表，我正在尝试为每个元素添加标注。每个表单条目都具有以下通用形式：

```
<li>
    <input ...>
    <div class='callout'>Helpful description about form item.</div>
</li> 
```

`.callout`has`position:absolute`和`LI`'s have`position:relative`以便标注可以相对于 LI“绝对”定位。

这一切都很好，但问题是其中一个祖先也包含一些浮点数，所以我使用了这个`overflow:hidden`技巧来确保它包含它们。不幸的是，这也意味着它会切断我的标注，因为它们延伸到它之外。

我想后备是在该祖先的末尾放置一个空的 div 并就这样做`clear:both`，但是是否有更好的 CSS 解决方案可以强制祖先包含浮动，但仍然允许绝对定位的标注在外部可见盒子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:21:38.887

而不是`overflow:hidden`你可以使用**clearfix**方法。像这样写：

```
li:after{
 content:'';
 display:block;
 clear:both;
} 
```

# c++ - 标准::设置 ::插入，重复元素

> ID：10516956
> 
> 赞同：2
> 
> 时间：2012-05-09T13:17:47.273
> 
> 标签：c++, data-structures, stl, set

std::set 插入成员函数的有效实现是什么？因为数据结构基于 std::less 对元素进行排序（需要为元素类型定义运算符 <），所以在概念上很容易检测到重复。

它在内部实际上是如何工作的？它是否利用了红背树数据结构（在 Josuttis 的书中提到的实现细节）？

标准数据结构的实现可能会有所不同......

我有一个问题，我被迫拥有一组（一般来说）应该是唯一的整数。集合的长度各不相同，所以我需要动态数据结构（根据我的狭隘知识，这将事情缩小到列表、集合）。元素不一定需要排序，但可能没有重复。由于候选集总是有很多重复项（集很小，最多 64 个元素），与 std::list 和另一种算法相比，尝试使用 insert 成员函数将重复项插入 std::set 会导致大量开销那可能不会诉诸对元素进行排序？

附加：输出集具有 27 个元素的固定大小。抱歉，我忘记了这个......这适用于问题的特殊情况。对于其他情况，长度是任​​意的（小于输入集）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:32:13.633

如果您要一次创建整个集合，您可以尝试使用`std::vector`来保存元素、`std::sort`对它们进行排序并[`std::unique`](http://www.cplusplus.com/reference/algorithm/unique/)删除重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:19:39.850

`std::set::insert`如果您使用“位置”插入并获得正确的位置，则复杂度为 O(log n)，或摊销 O(1)（参见例如[http://cplusplus.com/reference/stl/set/insert/](http://cplusplus.com/reference/stl/set/insert/)）。

底层机制是依赖于实现的。它通常是一棵红黑树，但这不是强制性的。您应该查看您最喜欢的实现的源代码，以了解它在做什么。

对于小集合，由于空间局部性，例如对向量的简单线性搜索可能会更便宜。但是插入本身将需要复制以下所有元素。唯一确定的方法是分析每个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:37:07.457

当您只提前知道 64 个可能的值时，只需取一个位字段并翻转实际看到的元素的位。这在 n+O(1) 步骤中有效，而且你不能得到比这更少的。

插入`std::set`大小为 m 的 a 需要 O(log(m)) 时间和比较，这意味着`std::set`为此目的使用 a 将花费 O(n*log(n)) 并且如果常数大于 for 我不会感到惊讶只需对输入进行排序（这需要额外的空间），然后丢弃重复项。

用 an 做同样的事情`std::list`平均需要 O(n^2) 时间，因为在列表中找到插入位置需要 O(n)。

一次将一个元素插入到 an`std::vector`中也需要 O(n^2) 平均时间——在 O(log(m)) 中找到插入位置是可行的，但元素需要我移动以腾出空间。如果最终结果中的元素数量远小于输入，则下降到 O(n*log(n))，几乎没有空间开销。

如果你有 C++11 编译器或使用 boost，你也可以使用哈希表。我不确定插入特性，但如果结果中的元素数量与输入大小相比很小，那么您只需要 O(n) 时间 - 与位字段不同，您不需要先验地知道潜在的元素或结果的大小（尽管知道大小会有所帮助，因为您可以避免重新散列）。

# php - FPDF 中的 html_entity_decode（使用 tFPDF 扩展）

> ID：10516960
> 
> 赞同：5
> 
> 时间：2012-05-09T13:18:08.413
> 
> 标签：php, pdf, fpdf, html-encode

我正在使用 tFPDF 生成 PDF。php 文件采用 UTF-8 编码。`&copy;`例如，我想在 pdf 中作为版权符号输出。

我试过了`iconv`，，，`html_entity_decode`。`htmlspecialchars_decode`当我尝试将字符串解码并将其硬编码到另一个文件中并对其进行解码时，它会按预期工作。因此，由于某种原因，它没有在 PDF 中输出。我试过输出缓冲。我正在使用`DejaVuSansCondensed.ttf`（真字体）。

链接到 tFPDF： [http ://fpdf.org/en/script/script92.php](http://fpdf.org/en/script/script92.php)

我没主意了。我尝试了双重解码，我到处检查以确保它没有在其他任何地方被编码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-20T10:28:35.923

你需要这个：

```
iconv('UTF-8', 'windows-1252', html_entity_decode($str)); 
```

html_entity_decode解码 html 实体**。**但由于任何原因，您必须使用**iconv**将其转换为 utf8 。我想这是一个 fpdf-secret... 因为在普通浏览器视图中它显示正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T09:45:47.623

实际上，fpdf项目FAQ对此有解释：

[http://www.fpdf.org/~~V/en/FAQ.php#q7](http://www.fpdf.org/~~V/en/FAQ.php#q7)

> 不要使用 UTF-8 编码。标准 FPDF 字体使用 ISO-8859-1 或 Windows-1252。可以使用 utf8_decode() 转换为 ISO-8859-1：

```
$str = utf8_decode($str); 
```

> 但是某些字符（例如 Euro）将无法正确翻译。如果 iconv 扩展可用，正确的方法如下：

```
$str = iconv('UTF-8', 'windows-1252', $str); 
```

因此，正如 emfi 所建议的，iconv() 和 html_entity_decode() PHP 函数的组合是您问题的解决方案：

```
$str = iconv('UTF-8', 'windows-1252', html_entity_decode("&copy;")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T03:38:20.233

我很确定没有从 HTML 实体代码到它们的 UTF-8 等价物的自动转换。在这种情况下，我求助于手动字符串替换，例如：

```
$strOut = str_replace( "&copy;", "\xc2\xa9", $strIn ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T14:31:58.243

我已经解决了这段代码的问题：

```
$str = utf8_decode($str);
$str = html_entity_decode($str);
$str =  iconv('UTF-8', 'windows-1252',$str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T07:38:51.843

您还可以使用`setFont('Symbol')`或`setFont('ZapfDingbats')`选择要打印的特殊字符。

```
define('TICK', chr(214)); # in font 'Symbol' -> print a tick symbol
...
$this->SetFont('Symbol', 'B', 8);
$this->Cell(5, 5, TICK, 0, 'L');    # will output the symbol to PDF 
```

输出：√</p>

这样，您无需转换为 ISO-8859-1 或 Windows-1252 或使用另一个库 tFPDF 来处理特殊字符 :)

请参阅：[http](http://www.fpdf.org/en/script/script4.php) ://www.fpdf.org/en/script/script4.php字体和字符列表

# javascript - 在 div 和 trigger 之间显示一个带有空格的 div

> ID：10516963
> 
> 赞同：0
> 
> 时间：2012-05-09T13:18:30.533
> 
> 标签：javascript, jquery, html

当我将鼠标悬停在触发器上时，我想显示一个 div，但触发器和 div 之间有空格。问题是超时的反弹效果和不显示 div 的触发器不起作用。

您可以查看此链接[http://jsfiddle.net/pGjXs/](http://jsfiddle.net/pGjXs/)

```
<div id="micro-shopping-bag">
    <a href="#todo" class="msb-trigger">Trigger</a>
    <div id="micro-shopping-bag-inner">
        Content
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:35:22.933

您`mouseenter`可能会在超时执行之前发生，即使您的鼠标进入它也会导致 div 消失。要更正此问题，您应该将 保存`setTimeout`到一个变量并`clearTimeout`在您`mouseenter`在淡入之前点击时调用。

我认为这就是你想要的，因为你没有给我们太多的工作，这对我来说只是一种标准行为。

# php - 从表单输入向地址发送电子邮件

> ID：10516965
> 
> 赞同：0
> 
> 时间：2012-05-09T13:18:33.347
> 
> 标签：php, email

我有一个非常标准的联系表格，其中包含姓名、电子邮件地址和电话号码的输入。除了按照标准格式将电子邮件发送到指定的电子邮件地址外，

```
$to      = 'diysoakwells@hotmail.com'; 
```

我还想使用表单中输入的电子邮件地址中的地址向用户发送电子邮件。我正在考虑使用电子邮件输入中的 post 变量，如下所示：

```
$to      = 'diysoakwells@hotmail.com', $email; 
```

但没有运气。有人可以指出我正确的方向吗？使用这种方法是否存在任何安全风险？我最终的目标是为用户提供一个复选框，如果选中该复选框，则会将电子邮件副本发送给他们自己。

这是我的表格的链接

[http://www.diysoakwells.com.au/cart.php](http://www.diysoakwells.com.au/cart.php)

先感谢您 ： ）

```
<?php
include_once("wsp_captcha.php");

if(WSP_CheckImageCode() != "OK") {
header('location:/form-rejected.php');
die();
}
$to      = 'diysoakwells@hotmail.com';
$subject = 'Order Inquiry';
$jcitems = " <p><b>ORDER:</b></p><p> " . $_POST['jcitems']."<p/>" . "<p><b>Total:</b> $" . $_POST['jctotal']."</p>";
$time = date ("h:i A"); 
$date = date ("l, F jS, Y");
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= 'From: inquiry@diysoakwells.com' . "\r\n" .
'Reply-To: noreply@diysoakwells.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();
$name = $_POST['name'];
$phone = $_POST['phone'];
$emaile = $_POST['emaile'];
$textbox = $_POST['textbox'];
$text = "<html><body><p><b>Message:</b>\n$textbox</p><p>This form was submitted on Your Web Site on \n $date at\n $time</p><p><b>Customers Email Address:</b> $emaile</p><p><b>Customers Name:</b> $name </p><p><b>Customers Phone Number:</b> $phone </p></html>    </body>";
$body = $text . $jcitems;
mail($to, $subject, $body, $headers);
Header('Location: ../form-accepted.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:28:45.613

如果您使用 php [mail() 函数](http://php.net/manual/en/function.mail.php "邮件（）函数")，您可以通过指定额外的标头来发送副本：

```
$headers = 'Cc: '.$emaile;
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:23:36.123

你所做的不是你想做的。在 PHP 中连接两个字符串是使用 . 不是，所以正确的语法是：

```
$to      = 'diysoakwells@hotmail.com'.", ".$emaile; 
```

或者干脆

```
$to      = "diysoakwells@hotmail.com, $emaile"; 
```

这是假设负责发送电子邮件的代码使用 php 的`mail()`函数，它允许在 $to 参数中发送多个电子邮件。如果这不起作用，那么如果没有看到实际代码，我将无法发挥更多作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:24:30.023

电子邮件上的“收件人”字段接受字符串，电子邮件地址以逗号分隔。

```
$to = 'diysoakwell@hotmail.com, ' . $emaile; 
```

应该做的伎俩。

您应该检查他们提供的电子邮件地址是否格式化为电子邮件地址，并且最好有一个 CAPTCHA 以防止自动机器人将您的表单用作垃圾邮件工具。

# iphone - Plist 阅读奇怪的行为

> ID：10516966
> 
> 赞同：0
> 
> 时间：2012-05-09T13:18:41.273
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在使用一系列代码在我的应用程序中读取 Plist 文件，但是出现了一个奇怪的行为。这是代码示例。

```
//init loading from PLIST here, and then associate value.
NSString *pathString=[NSString stringWithFormat:@"%@Levels",targetWorld];
NSString *path = [[NSBundle mainBundle] pathForResource:pathString ofType:@"plist"];
NSString *levelNameNumber = [[NSString alloc] initWithFormat:targetLevel];

NSDictionary *levelsList = [[NSDictionary alloc] initWithContentsOfFile:path];
NSDictionary *level = [levelsList objectForKey:levelNameNumber];

NSEnumerator *levelFormations = [level objectEnumerator];

for( NSDictionary *worldSize in levelFormations )
{
    worldWidth = [[worldSize objectForKey:@"width"] intValue];
    worldHeight = [[worldSize objectForKey:@"height"] intValue];

    NSLog(@"height is %d",worldHeight);
    NSLog(@"width is %d",worldWidth);

}

[levelNameNumber release];
[levelsList release]; 
```

正如它所显示的，我已经设置了 NSLog 来监视值。这是日志

```
2012-05-09 21:14:38.313 CapNTail[361:10a03] height is 344
2012-05-09 21:14:38.315 CapNTail[361:10a03] width is 123
2012-05-09 21:14:38.324 CapNTail[361:10a03] height is 0
2012-05-09 21:14:38.326 CapNTail[361:10a03] width is 0 
```

他们似乎将自己重置为零。到目前为止，我能得到的最好的结果可能是 for 循环导致了这种情况，因为两个日志都被打印了两次（似乎它运行了第二个循环并重置它。）知道有什么问题吗？

我的 plist 的示例代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"     "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>level1</key>
<dict>
    <key>worldSize</key>
    <dict>
        <key>width</key>
        <integer>123</integer>
        <key>height</key>
        <integer>344</integer>
    </dict>
    <key>formation</key>
    <dict>
        <key>playerPosX</key>
        <integer>0</integer>
        <key>playerPosY</key>
        <integer>0</integer>

    </dict>
</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:50:48.910

您将快速枚举与`NSEnumerator`.

要么使用 NSEnumerator 并使用 循环遍历它`while ((object = [enumerator nextObject])) {`，要么对对象使用快速枚举`level`（无需创建`NSEnumerator`）。

要尝试后一种策略（推荐），请将其替换为：

```
NSEnumerator *levelFormations = [level objectEnumerator];

for( NSDictionary *worldSize in levelFormations )
{
    worldWidth = [[worldSize objectForKey:@"width"] intValue];
    worldHeight = [[worldSize objectForKey:@"height"] intValue];

    NSLog(@"height is %d",worldHeight);
    NSLog(@"width is %d",worldWidth); 
```

}

和：

```
for( NSDictionary *worldSize in level )
{
    worldWidth = [[worldSize objectForKey:@"width"] intValue];
    worldHeight = [[worldSize objectForKey:@"height"] intValue];

    NSLog(@"height is %d",worldHeight);
    NSLog(@"width is %d",worldWidth);
} 
```

那样有用吗？

另请参阅[此问题。](https://stackoverflow.com/questions/5163169/fast-enumeration-vs-nsenumerator-in-objective-c)

# regex - 双倍的正则表达式

> ID：10516967
> 
> 赞同：21
> 
> 时间：2012-05-09T13:18:42.610
> 
> 标签：regex, c++-cli

我有这个正则表达式`"^[0-9]+\.?[0-9]*$")`来匹配视觉 C++ 中的双数或整数，但它似乎不起作用。有任何想法吗？

这就是我应用代码的方式：

```
if (System::Text::RegularExpressions::Regex::IsMatch(e0, "^[0-9]+\.?[0-9]*$")){
     e0_val = System::Convert::ToDouble(e0);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T13:22:26.120

正则表达式本身没有任何问题，这是您的逃避问题。您需要对该`\`字符进行双重转义，因为这也是 C++ 字符串转义字符。

另外还有一个边缘情况，这个正则表达式会认为这`1.`是一个有效的浮点数。`/^[0-9]+(\\.[0-9]+)?$`因此，消除这种可能性可能会更好。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-15T10:28:08.953

上面的正则表达式并不完美，因为它接受不是有效数字的“09”。更好的表达方式是：

```
"^(-?)(0|([1-9][0-9]*))(\\.[0-9]+)?$" 
```

在哪里：

```
1\. is an optional negative sign;
2\. is zero or a valid non-zero integer;
4\. is the optional fracture part; 
```

理论上，断裂部分应该写成“(\.[0-9]*[1-9])?” 相反，因为数字不能有尾零。在实践中，源字符串可能是使用固定位数创建的，例如：

```
printf("%.1f", x); 
```

所以它可能很容易以零字符结束。当然，这些都是定点表示，而不是双打本身。双精度数也可以写为 -1.23e-4 而不是 -0.000123。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-08T12:11:52.237

**/^[0-9]+.[0-9]+$**：将其用于双打。

接受 123.123 类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-07T23:13:48.460

也许不是直接的答案，只是有用的信息。正则表达式：

```
std::regex rx(R"(^([+-]?(?:[[:d:]]+\.?|[[:d:]]*\.[[:d:]]+))(?:[Ee][+-]?[[:d:]]+)?$)"); 
```

匹配字符串：

```
"1", "0", "10",
"1000.1", "+1",
"+10", "-10", "1.",
".1", "1.1", "+1.",
"-1.", "+.1", "-.1",
"009", "+009", "-009",
"-01e0", "+01E0", "+1e-1",
"+1e+1", "+1.e1", "1E1",
"1E+1", "0.001e-12", "0.111111111111111" 
```

并且不匹配下一个字符串：

```
".", "1a", "++1",
"+-1", "+", "-.",
"-", "--1.", "1.e.1",
"1e.1", "0+.e0" 
```

`double`第一个看起来像是C++中类型的有效值，例如`double test = +009.e+10`是 OK。

在 ideone.com 中播放：[https ://ideone.com/ooF8sG](https://ideone.com/ooF8sG)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-14T20:07:06.553

```
(\d+)?\.(\d+)? 
```

上面的正则表达式适用于**“45.5”**、**“12”等双打。**, **".12"**

# image - Delphi：如何将文本添加到图像并保存新图像？

> ID：10516968
> 
> 赞同：4
> 
> 时间：2012-05-09T13:18:49.200
> 
> 标签：image, delphi

这个想法是从数据库（文本和图片）中检索日期，然后将这些数据添加到另一张图片（如 ID 表单）中，然后保存新图片。

这怎么能在delphi中完成？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T14:03:06.587

尝试以下操作：

```
uses
  PNGImage;

procedure TForm1.Button1Click(Sender: TObject);
var
  PNGImage: TPNGImage;
  BlobStream: TMemoryStream;
begin
  // create the PNG image instance
  PNGImage := TPNGImage.Create;
  try
    // assuming you have in the BlobStream variable the image from a DB loaded
    PNGImage.LoadFromStream(BlobStream);
    // setup the text background to be transparent
    PNGImage.Canvas.Brush.Style := bsClear;
    // optionally configure the font
    PNGImage.Canvas.Font.Size := 11;
    PNGImage.Canvas.Font.Color := clRed;
    PNGImage.Canvas.Font.Style := [fsBold];
    // and render it to the image's canvas
    PNGImage.Canvas.TextOut(5, 5, 'SomeText');
    // save this modified image to the file
    PNGImage.SaveToFile('c:\picture.png');
  finally
    // and finally free the PNG image instance
    PNGImage.Free;
  end;
end; 
```

这是一个如何创建我的访问卡的示例（不要忘记将[`necessary image`](https://i.stack.imgur.com/II7bT.png)文件另存为`d:\llamas.png`）：

```
uses
  GraphUtil, PNGImage;

procedure CreateCard(const AFileFile: string; AImage: TPNGImage;
  const AName, ASurname: string);
begin
  with TPNGImage.CreateBlank(COLOR_RGB, 8, 330, 160) do
  try
    GradientFillCanvas(Canvas, clWhite, $000080FF,
      Canvas.ClipRect, gdVertical);
    Canvas.StretchDraw(Rect(18, 18, 108, 108), AImage);
    Canvas.Pen.Width := 2;
    Canvas.Brush.Style := bsClear;
    Canvas.Rectangle(5, 5, Width - 4, Height - 4);
    Canvas.Font.Size := 12;
    Canvas.Font.Style := [fsBold];
    Canvas.TextOut(110, 30, 'Form:  ' + AName + '  :.');
    Canvas.TextOut(125, 60, 'Genus:  ' + ASurname + '  :.');
    SaveToFile(AFileFile);
  finally
    Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  PNGImage: TPNGImage;
begin
  PNGImage := TPNGImage.Create;
  try
    // here you will load the image blob (by using LoadFromStream)
    // instead of LoadFromFile
    PNGImage.LoadFromFile('d:\llamas.png');
    CreateCard('d:\visit-card.png', PNGImage, 'Alpaca', 'Lama');
  finally
    PNGImage.Free;
  end;
end; 
```

这是它的样子：

![在此处输入图像描述](../Images/25c8c5f6e5b9bf5f95eabc2d36e5d82c.png)

# jquery - jQuery UI 选项卡和 IE8 CSS 崩溃

> ID：10516973
> 
> 赞同：1
> 
> 时间：2012-05-09T13:19:08.543
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我创建了一个简单的网页。它包含一个 jQuery 选项卡，每个选项卡内部都有一个 updatePanel。这看起来像这样： ![在此处输入图像描述](../Images/218d0862d771a9c22d9b6fffc192932f.png)

前 2 个字段是 jQueryUI 日期选择器，然后是下拉列表和自动完成，它们都可以正常工作，但是当我单击提交按钮时，css 会重新加载。这发生在 IE8 中。下面是我点击提交后的屏幕（我的表单被挤压了大约 20px）

如果我删除所有自定义样式并仅保留 jQuery ui css，也会发生这种情况。

看起来 updatepanel 以某种奇怪的方式刷新 css。

![在此处输入图像描述](../Images/0f25c112cbad2cc75e19024e4433681d.png)

下面的视图没有自定义 css： ![在此处输入图像描述](../Images/cb03040c641f3d68ad393cb88ae5a5d6.png)

在我将选项卡更改为第二个并返回后一切看起来都很好： ![在此处输入图像描述](../Images/27385bfd5c0a33c57516392aa46f08bd.png)

如何解决这种奇怪的行为？我可以重写我的自定义 css，这没问题，但是当我写这件事时，这发生在默认的 jquery UI CSS 上。

编辑：这是我的示例 html 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>
     Zrealizowana wysyłka seryjna i zarejestrowane zwroty
  </title>
  <link type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.19/themes/dark-hive/jquery-ui.css" rel="stylesheet" />
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js "> </script>
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.19/jquery-ui.min.js"> </script>
  <script type="text/javascript" src="Skrypty.js"></script>
  <script type="text/javascript">
     function initDatePickerPL() {
         $.datepicker.regional['pl'] = {
             closeText: 'Zamknij',
             prevText: '&#x3c;Poprzedni',
             nextText: 'Następny&#x3e;',
             currentText: 'Dziś',
             monthNames: ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'],
             monthNamesShort: ['Sty', 'Lu', 'Mar', 'Kw', 'Maj', 'Cze', 'Lip', 'Sie', 'Wrz', 'Pa', 'Lis', 'Gru'],
             dayNames: ['Niedziela', 'Poniedziałek', 'Wtorek', 'Środa', 'Czwartek', 'Piątek', 'Sobota'],
             dayNamesShort: ['Nie', 'Pn', 'Wt', 'Śr', 'Czw', 'Pt', 'So'],
             dayNamesMin: ['N', 'Pn', 'Wt', 'Śr', 'Cz', 'Pt', 'So'],
             weekHeader: 'Tydz',
             dateFormat: 'yy-mm-dd',
             firstDay: 1,
             isRTL: false,
             showMonthAfterYear: false,
             yearSuffix: ''
         };
         $.datepicker.setDefaults($.datepicker.regional['pl']);
     }

     function initDatePickers() {
         //daty1
         var dates1 = $("#dataOd1, #dataDo1").datepicker({
             changeMonth: true,
             changeYear: true,
             onSelect: function(selectedDate) {
                 var option = this.id == "dataOd1" ? "minDate" : "maxDate",
                     instance = $(this).data("datepicker"),
                     date = $.datepicker.parseDate(
                         instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);
                 dates1.not(this).datepicker("option", option, date);
             }
         });

         //daty2
         var dates2 = $("#dataOd2, #dataDo2").datepicker({
             changeMonth: true,
             changeYear: true,
             onSelect: function(selectedDate) {
                 var option = this.id == "dataOd2" ? "minDate" : "maxDate",
                     instance = $(this).data("datepicker"),
                     date = $.datepicker.parseDate(
                         instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);
                 dates2.not(this).datepicker("option", option, date);
             }
         });
     }

     $(function() {
         initDatePickerPL();
         $("#tabs").tabs();
         $("#radioset1").buttonset();
         $("#radioset2").buttonset();
         $("input:button, input:submit").button();
         initDatePickers();
     });
  </script>
  </head>
  <body class="myBody">
  <div style="margin: auto; width: 800px">
     <form name="ctl01" method="post" action="Default.aspx" id="ctl01">
        <div></div>
        </script>
        <div id="tabs">
           <ul>
              <li><a href="#tabs-1">Zrealizowana wysyłka</a></li>
              <li><a href="#tabs-2">Zarejestrowane wpłaty</a></li>
           </ul>
           <div id="tabs-1">
              <div id="panel1">
                 <table class="opcje">
                    <tr>
                       <td class="legenda">Data od:</td>
                       <td class="legenda">Dział:</td>
                    </tr>
                    <tr>
                       <td><input name="dataOd1" type="text" id="dataOd1" /></td>
                       <td>
                          <select name="dzial1" id="dzial1">
                             <option value="All">Wszystkie</option>
                             <option selected="selected" value="DOK">DOK</option>
                             <option value="DSD">DSD</option>
                             <option value="DOT">DOT</option>
                             <option value="DOP">DOP</option>
                             <option value="DWE">DWE</option>
                          </select>
                       </td>
                    </tr>
                    <tr>
                       <td class="legenda">Data do:</td>
                       <td class="legenda">Grupa:</td>
                    </tr>
                    <tr>
                       <td><input name="dataDo1" type="text" id="dataDo1" /></td>
                       <td>
                          <select name="grupa1" id="grupa1">
                             <option selected="selected" value="0">Wszystkie</option>
                             <option value="70">Z1</option>
                             <option value="58">Z2</option>
                             <option value="59">Z3</option>
                             <option value="60">Z4</option>
                             <option value="48">Z5</option>
                          </select>
                       </td>
                    </tr>
                    <tr>
                       <td class="legenda">Wierzyciel:</td>
                       <td></td>
                    </tr>
                    <tr>
                       <td>
                          <select name="wierzyciel1" id="wierzyciel1">
                             <option selected="selected" value="0">Wszyscy</option>
                             <option value="1">P.R.E.S.C.O.</option>
                             <option value="2">Fundusz</option>
                          </select>
                       </td>
                       <td></td>
                    </tr>
                    <tr>
                       <td class="legenda">Umowa ramowa:</td>
                       <td class="legenda">Wyświetlanie:</td>
                    </tr>
                    <tr>
                       <td>
                          <input name="umowa1" type="text" id="umowa1" /><input type="hidden" name="umowa_id1" id="umowa_id1" />
                       </td>
                       <td id="radioset1">
                          <input id="RadioButton1" type="radio" name="gr1" value="RadioButton1" checked="checked" /><label for="RadioButton1">Ilościowo</label>
                          <input id="RadioButton2" type="radio" name="gr1" value="RadioButton2" /><label for="RadioButton2">Procentowo</label>
                       </td>
                    </tr>
                    <tr>
                       <td></td>
                       <td class="guziki">
                          <input type="submit" name="odswiez1" value="Od&#347;wie&#380; dane" id="odswiez1" />
                          <input type="submit" name="eksportuj1" value="Eksportuj" id="eksportuj1" />
                       </td>
                    </tr>
                 </table>
              </div>
           </div>
           <div id="tabs-2">
              <div id="panel2">
                 <table class="opcje">
                    <tr>
                       <td class="legenda">Data od:</td>
                       <td class="legenda">Dział:</td>
                    </tr>
                    <tr>
                       <td><input name="dataOd2" type="text" id="dataOd2" /></td>
                       <td>
                          <select name="dzial2" id="dzial2">
                             <option value="All">Wszystkie</option>
                             <option selected="selected" value="DOK">DOK</option>
                             <option value="DSD">DSD</option>
                             <option value="DOT">DOT</option>
                             <option value="DOP">DOP</option>
                             <option value="DWE">DWE</option>
                          </select>
                       </td>
                    </tr>
                    <tr>
                       <td class="legenda">Data do:</td>
                       <td class="legenda">Grupa:</td>
                    </tr>
                    <tr>
                       <td><input name="dataDo2" type="text" id="dataDo2" /></td>
                       <td>
                          <select name="grupa2" id="grupa2">
                             <option selected="selected" value="0">Wszystkie</option>
                             <option value="70">Z1</option>
                             <option value="58">Z2</option>
                             <option value="59">Z3</option>
                             <option value="60">Z4</option>
                             <option value="48">Z5</option>
                          </select>
                       </td>
                    </tr>
                    <tr>
                       <td class="legenda">Wierzyciel:</td>
                       <td class="legenda">Operator (wpisz minimum 3 znaki):</td>
                    </tr>
                    <tr>
                       <td>
                          <select name="wierzyciel2" id="wierzyciel2">
                             <option selected="selected" value="0">Wszyscy</option>
                             <option value="1">P.R.E.S.C.O.</option>
                             <option value="2">Fundusz</option>
                          </select>
                       </td>
                       <td><input name="operator" type="text" id="operator" /><input type="hidden" name="operator_id" id="operator_id" /></td>
                    </tr>
                    <tr>
                       <td class="legenda">Umowa ramowa:</td>
                       <td class="legenda">Wyświetlanie:</td>
                    </tr>
                    <tr>
                       <td>
                          <input name="umowa2" type="text" id="umowa2" /><input type="hidden" name="umowa_id2" id="umowa_id2" />
                       </td>
                       <td id="radioset2">
                          <input id="RadioButton3" type="radio" name="gr2" value="RadioButton3" checked="checked" /><label for="RadioButton3">Ilościowo</label>
                          <input id="RadioButton4" type="radio" name="gr2" value="RadioButton4" /><label for="RadioButton4">Procentowo</label>
                       </td>
                    </tr>
                    <tr>
                       <td></td>
                       <td class="guziki">
                          <input type="submit" name="Button1" value="Od&#347;wie&#380; dane" id="Button1" />
                          <input type="submit" name="Button2" value="Eksportuj" id="Button2" />
                       </td>
                    </tr>
                 </table>
              </div>
           </div>
        </div>
     </form>
  </div>
 </body>
</html> 
```

这里 jsfiddle 链接：http: [//jsfiddle.net/353TE/](http://jsfiddle.net/353TE/)

# matlab - 使用 Matlab FFT 从脑电信号中提取频率

> ID：10516980
> 
> 赞同：5
> 
> 时间：2012-05-09T13:19:32.397
> 
> 标签：matlab, fft, frequency

我是 BCI 的新手。我有一个来自[Neurosky](http://neurosky.com)的 Mindset EEG 设备，我将来自该设备的原始数据值记录在一个 csv 文件中。我可以从 csv 读取数据并将其提取到 Matlab 中，然后应用 FFT。我现在需要从 FFT 中提取某些频率（Alpha、Beta、Theta、Gamma）。

其中 Delta = 1-3 Hz

θ= 4-7 赫兹

阿尔法 = 8-12 赫兹

贝塔 = 13-30 赫兹

伽马 = 31-40 赫兹

这是我到目前为止所做的：

```
f = (0:N-1)*(Fs/N);
plot(rawDouble);
title ('Raw Signal');
p = abs(fft(rawDouble));
figure,plot (f,p);
title('Magnitude of FFT of Raw Signal'); 
```

谁能告诉我如何从信号中提取那些特定的频率范围？非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:37:34.120

为了方便使用 MatLab 分析 EEG 数据，您可以考虑使用 EEGLAB 工具箱 ( [http://sccn.ucsd.edu/eeglab/](http://sccn.ucsd.edu/eeglab/) ) 或实地考察工具箱 ( [http://fieldtrip.fcdonders.nl/start](http://fieldtrip.fcdonders.nl/start) )。

这两个工具箱都带有很好的教程：

[http://sccn.ucsd.edu/eeglab/eeglabtut.html](http://sccn.ucsd.edu/eeglab/eeglabtut.html)

[http://fieldtrip.fcdonders.nl/tutorial](http://fieldtrip.fcdonders.nl/tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:25:14.343

您可能会发现开始使用 MATLAB 的[周期图](http://www.mathworks.co.uk/help/toolbox/signal/ref/periodogram.html)函数比尝试直接使用 FFT 更容易。这负责为您和各种其他实现细节窗口化数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T04:20:02.810

我认为最简单的方法是在加载数据后过滤这些范围内的信号。例如

> 波段=[30 100] eeglocal.lowpass(波段(2)).highpass(波段(1));

然后您可以使用选择要处理的时间。

这应该就是你所需要的。

# php - 如何获取匹配语句的行？

> ID：10516985
> 
> 赞同：0
> 
> 时间：2012-05-09T13:19:48.713
> 
> 标签：php, regex, preg-match

我正在从 API 获取一个提要，在这里我想获取以 ,,[[,2 开头的行。请帮帮我，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:25:00.723

我在 PHP 中提出的 RegExp 是：

```
$s = ',,[[,2thesecretoflife';
$r = preg_match('/^,,\\[\\[,2/', $s);

if ($r) {
  echo 'works';
} 
```

基本上，您必须对 s 进行双重转义`[`才能正确解释它们。我确信您使用的任何语言都会相似。

# objective-c - RestKit 对象映射：使用 setObjectMapping:forResourcePathPattern:withFetchRequestBlock 的困难

> ID：10516987
> 
> 赞同：0
> 
> 时间：2012-05-09T13:19:50.477
> 
> 标签：objective-c, ios, core-data, restkit

**我的设置**

以下一切正常：

```
RKManagedObjectMapping* chanMapping = [RKManagedObjectMapping mappingForClass:[Channel class] inManagedObjectStore:objectStore];
chanMapping.primaryKeyAttribute = @"chanId";
[chanMapping mapKeyPathsToAttributes:
 @"id",@"chanId",
 @"name", @"chanName",
 nil]; 

[objectManager.mappingProvider setMapping:chanMapping forKeyPath:@"Channels.channel"]; 
```

我可以打电话

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/channels" delegate:self]; 
```

我从服务器获取我的频道，它们由 Core Data 本地存储。完美的。

**问题**

但是，我现在不想让 RestKit 自动从核心数据存储中删除通道，这些通道在下次执行 GET 时已从服务器中删除。我了解通过添加以下内容来支持这一点：

```
[objectManager.mappingProvider setObjectMapping:chanMapping forResourcePathPattern:@"/channels" withFetchRequestBlock:^ (NSString *resourcePath) { 
        return [Channel fetchRequest];
    }]; 
```

但是，只要服务器上有任何新内容，所有频道都会被删除。

**我尝试过的事情**[更新]

我已经使用下面答案中的步骤进行了调试。看起来好像映射不起作用/没有找到（即我没有正确地将映射与资源路径相关联）。

在数组中看起来不错，具有上次应该存在的所有对象，但`deleteCachedObjectsMissingFromResult`数组是空的，这显然导致始终存在并且所有对象都被删除。`cachedObjects``results``[results containsObject:object]``NO`

我是否需要更改与资源路径映射有关的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:22:48.587

我看了你更新的描述。试试这个：

1.  切换回`setObjectMapping:forResourcePathPattern:withFetchRequestBlock`
2.  将`rootKeyPath`您注册的对象映射设置为 Channels.channel

然后再试一次。有一些 API 工作正在进行中，以在一行中提供基于 URL 和 keyPath 的映射配置，但尚未合并到开发中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T17:11:53.753

要检查两件事以确定您看到所描述行为的原因：

1.  打开 RKManagedObjectLoader 并在`isResponseMappable`. 此方法检查响应是否从缓存中加载，如果返回 YES，则使用托管对象缓存返回的对象执行对象加载。这可能是您看到缓存对象返回的地方。
2.  至于缓存对象的删除，在里面放一个断点`deleteCachedObjectsMissingFromResult`，看看里面发生了什么（如果你甚至把它变成例程的话）。

期望自动修剪的场景是：

1.  GET /channels 返回带有新负载的 2xx 状态码
2.  RKManagedObjectLoader 执行修剪

# ace-editor - 如何在 Ace Editor 中找到当前加载的模式（语法）？

> ID：10516988
> 
> 赞同：7
> 
> 时间：2012-05-09T13:19:52.677
> 
> 标签：ace-editor

正如标题所说 - 我如何找出 Ace Editor 中当前加载的模式是什么？

editor.getSession().getMode() 并没有真正返回任何我可以使用的东西 - 已经查看了返回的对象 - 但找不到任何东西。

editor.getTheme() 向我返回一个我可以使用的字符串 - 如果他们对模式没有做同样的事情，这似乎很有趣

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T08:10:48.613

要检索您使用的模式的名称：

```
editor.getSession().getMode().$id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-07T16:00:19.107

我尝试了 Hugeen 的回答并遇到了`undefined`lorefnon 报告的错误。这对我有用：

```
// get the editor instance
var editor = ace.edit('editorid');

// get the current mode
var mode = editor.session.$modeId;

// modeid returns the full string (ace/mode/html), cut to the mode name only
mode = mode.substr(mode.lastIndexOf('/') + 1); 
```

希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-06T19:30:10.503

没有任何翻筋斗的干净方法：

```
var mode = editor.session.mode; 
```

# php - 将图像保存在php中的文件中

> ID：10516989
> 
> 赞同：0
> 
> 时间：2012-05-09T13:19:59.400
> 
> 标签：php, graph, download

我通过 php 制作了一个图表并将其保存为 png 文件。代码是这样的：

```
$currentYear = date('M');
      $values=array(
        date("M",strtotime("-5 month")) => $cnt5,
        date("M",strtotime("-4 month")) => $cnt4,
        date("M",strtotime("-3 month")) => $cnt3,
        date("M",strtotime("-2 month")) => $cnt2,
        date("M",strtotime("-1 month")) => $cnt1,
        $currentYear => $cnt0
    ); 

    $img_width=600;
    $img_height=400; 
    $margins=20;

    $graph_width=$img_width - $margins * 2;
    $graph_height=$img_height - $margins * 2; 

    $img=imagecreate($img_width,$img_height);

    $bar_width=20;
    $total_bars=count($values);
    $gap= ($graph_width- $total_bars * $bar_width ) / ($total_bars +1); 

    $bar_color=imagecolorallocate($img,0,64,128);
    $background_color=imagecolorallocate($img,240,240,255);
    $border_color=imagecolorallocate($img,200,200,200);
    $line_color=imagecolorallocate($img,220,220,220); 

    imagefilledrectangle($img,1,1,$img_width-2,$img_height-2,$border_color);
    imagefilledrectangle($img,$margins,$margins,$img_width-1-$margins,$img_height-1-$margins,$background_color); 

    $max_value=max($values);
    $ratio= $graph_height/$max_value; 

    $horizontal_lines=1;
    $horizontal_gap=$graph_height/$horizontal_lines;
     for($i=1;$i<=$horizontal_lines;$i++){
        $y=$img_height - $margins - $horizontal_gap * $i ;
        imageline($img,$margins,$y,$img_width-$margins,$y,$line_color);
        $v=intval($horizontal_gap * $i /$ratio);
        imagestring($img,0,5,$y-5,$v,$bar_color);
     }
     for($i=0;$i< $total_bars; $i++){ 
        # ------ Extract key and value pair from the current pointer position
        list($key,$value)=each($values); 
        $x1= $margins + $gap + $i * ($gap+$bar_width) ;
        $x2= $x1 + $bar_width; 
        $y1=$margins +$graph_height- intval($value * $ratio) ;
        $y2=$img_height-$margins;
        imagestring($img,0,$x1+3,$y1-10,$value,$bar_color);
        imagestring($img,0,$x1+3,$img_height-15,$key,$bar_color);       
        imagefilledrectangle($img,$x1,$y1,$x2,$y2,$bar_color);
    }
    header("Content-type:image/png");

    imagepng($img); 
```

现在我的问题是如何保存该图像？我不想在文件中显示图表，而是想下载图表。请帮助我如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:22:00.680

如果通过保存意味着让用户下载它，则必须发送 content-disposition 标头。例如：

```
header('Content-Type: application/png');
header('Content-disposition: attachment; filename=image.png'); 
```

如果这是您的意思，您可以使用 fwrite 将文件保存到服务器的磁盘。

# excel - Excel 加载项 VSTO 2005SE 是否需要清单文件？

> ID：10516990
> 
> 赞同：1
> 
> 时间：2012-05-09T13:20:02.093
> 
> 标签：excel, add-in, manifest

我们使用 VSTO 2005SE 在 Visual Studio 2005 中开发了应用程序级别的 Excel 插件。该插件在大多数计算机上的 Excel 2003、2007 和 2010（32 位）上都能正常安装和运行。但是，在某些情况下 Excel 不会加载它，尽管在安装过程中注册表 LoadBehaviour (LB) 值设置为 3。当用户卸载加载项时，LB仍然设置为3，所以我假设在初始化和加载过程中没有错误发生，否则LB将是2甚至1。

我们使用 MSI 安装并使用本地计算机注册表项在应用程序级别部署加载项。当我们在 Visual Studio 2005 中构建加载项时，不会生成清单文件，因此我们不会在 MSI 安装中包含这些文件，并且清单中没有注册表项。因此，我们假设清单不是必不可少的部分。

更重要的是，根据[http://msdn.microsoft.com/en-us/a3swb498(v=vs.80](http://msdn.microsoft.com/en-us/a3swb498(v=vs.80) )，应用程序清单提供了 Office 解决方案用来定位和更新其程序集的信息。由于我们只有一个作为解决方案的程序集，因此我们不需要任何清单。

我们的 MSI 文件、插件程序集和 setup.exe 文件使用 COMODO 证书进行签名。

有谁知道我们是否需要应用程序和部署清单，如果需要，我们如何生成？

# android - 列表视图中的 Android 按钮

> ID：10516992
> 
> 赞同：0
> 
> 时间：2012-05-09T13:20:09.230
> 
> 标签：android, listview, button, dynamic

所以我一直在研究这个很长一段时间，没有发现什么？

我想创建一个 listView 用按钮动态添加项目。那可能吗？

如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:27:03.840

使用诸如制作自定义适配器之类的东西。用 arraylist 填充您的列表视图，然后使用。

```
public void onClick(view v){
yourArrylist.add(Object);
adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:21:55.697

为此，您需要创建自定义或动态列表视图...

[看到这个完整的例子](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)

# php - PHP中的绝对字符串

> ID：10516996
> 
> 赞同：0
> 
> 时间：2012-05-09T13:20:14.627
> 
> 标签：php, mysql, html

如何将整体`String`转换为绝对字符串变量，例如将所有特殊字符、HTML 标记、链接、代码以及用户可以插入到文本区域中的任何其他内容。我目前正在制作一个邮件系统，它可以接受来自用户的任何形式的输入，就像`Yahoo Mail`它接受你扔给它的任何东西一样（我认为）。

它将`Contents`字符串插入Mysql数据库，我已经用于`mysql_real_escape_string`特殊字符等，其他标签和链接怎么样？

这是`Content`我复制的`Yahoo Mail`和我的`Mail System`：

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

我试图复制网站的全部内容，因为我只想知道我的邮件系统是否将接受 JS、Jquery、Css、Html、Php 和其他语言作为`String`.

> 我的问题不在于转换特殊字符等，而是在 Mysql 上。包含 Message 的 Field 只有一个 type: `text`，所以它不能像这里的 Link 这样支持 Long Text。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:27:12.200

请参阅[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)，这是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:28:58.163

有点难以理解你在问什么，但我认为你想要一个可以添加富文本的文本区域，类似于基于 Web 的邮件程序。如果我理解您想要正确执行的操作，我会研究一个 javascript 库，它将采用普通的 textarea 并将其变成一个可爱的 WYSIWYG 小编辑器。两种常见的：

*   [TinyMCE](http://tinymce.com)
*   [CK编辑器](http://ckeditor.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:26:22.143

PHP 函数[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)应该有助于您尝试执行的操作。

```
$content = strip_tags($input); 
```

# c# - 在 C# 中的另一个控件值之前添加控件值

> ID：10516997
> 
> 赞同：14
> 
> 时间：2012-05-09T13:20:17.307
> 
> 标签：c#, winforms, panel, flowlayoutpanel

我有一个“FlowLayoutPanel”并想向它添加一系列“UserControl”：

> mainPanel.Controls.Add(fx);

在旧用户控件之后添加的每个新用户控件，我想在添加的前一个用户控件之前添加新用户控件，我该怎么做？我没有找到类似`mainPanel.Controls.AddAt(...)`or `mainPanel.Controls.Add(index i, Control c)`or `mainPanel.Controls.sort(...)`or ... 的任何功能。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-09T13:27:07.887

您可以使用[SetChildIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)方法。类似的东西（也许你需要摆弄那些不雅的东西）：

```
var prevIndex = mainPanel.Controls.IndexOf(previouslyAdded)
mainPanel.Controls.Add(fx);
mainPanel.Controls.SetChildIndex(fx, prevIndex); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T13:23:12.657

通过它的声音，您想要更改 flowdirection 属性，以便将最新添加的控件添加到顶部

```
flowLayoutPanel1.FlowDirection = FlowDirection.BottomUp; 
```

或者你可以

```
 Label label1 = new Label();
 flowLayoutPanel1.Controls.Add(label1);
 label1.BringToFront(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:23:34.373

更正自己：`myPanel.Controls.AddAt(index, myControl)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T00:28:44.227

像这样的东西会按字母顺序添加一个控件。

```
 FlowLayoutPanel flowLayoutPanel = ...; // this is the flow panel
                    Control control = ...; // this is the control you want to add in alpha order.

                    flowLayoutPanel.SuspendLayout();
                    flowLayoutPanel.Controls.Add(control);

                    // sort it alphabetically
                    for (int i = 0; i < flowLayoutPanel.Controls.Count; i++)
                    {
                        var otherControl = flowLayoutPanel.Controls[i];
                        if (otherControl != null && string.Compare(otherControl.Name, control.Name) > 0)
                        {
                            flowLayoutPanel.Controls.SetChildIndex(control, i);
                            break;
                        }
                    }

                    flowLayoutPanel.ResumeLayout(); 
```

# java - 持久化和对象引用单例

> ID：10516998
> 
> 赞同：4
> 
> 时间：2012-05-09T13:20:17.850
> 
> 标签：java, spring, hibernate, jpa

我正在做一个 JPA 项目。我有一个`ExportProfile`对象：

```
@Entity
public class ExportProfile{
    @Id
    @GeneratedValue
    private int id;

    private String name;

    private ExtractionType type;

    //...

} 
```

`ExtractionType`是由几个类实现的接口，每个类都有不同的*提取类型*，这些类是单例。`type`对单例对象的引用也是如此。我的数据库中没有`ExtractionType`表，但我必须保留*导出配置文件*的*提取类型*。

 *如何`ExportProfile`使用 JPA 持久化对象，保存对`type`对象的引用？

**注意：**没有定义实现的数量`ExtractionType`，因为可以随时添加新的实现。我也在使用Spring，这有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:44:58.887

这是一个想法：`ExtractionTypeEnum`为实现 的每个可能的单例创建一个带有一个元素的枚举`ExtractionType`，并将其作为字段存储在您的实体中，而不是`ExtractionType`. 稍后，如果您需要检索与某个`ExtractionTypeEnum`值对应的单例，您可以实现一个工厂，为每种情况返回正确的单例：

```
public ExtractionType getType(ExportProfile profile) {
    switch (profile.getExtractionTypeEnum()) {
        case ExtractionTypeEnum.TYPE1:
            return ConcreteExtractionType1.getInstance();
        case ExtractionTypeEnum.TYPE2:
            return ConcreteExtractionType2.getInstance();
    }
} 
```

在上面，我假设两者`ConcreteExtractionType1`都`ConcreteExtractionType2`实现`ExtractionType`.*

# hibernate-search - 如何让 Hibernate Search 建立索引

> ID：10516999
> 
> 赞同：2
> 
> 时间：2012-05-09T13:20:22.237
> 
> 标签：hibernate-search

我有一个应用程序，我正在尝试将休眠搜索集成到其中。我正在使用休眠搜索 3.4.2。我有一个如下所示的域类：

```
@索引
公共组{

    @Fieldindex (index = Index.TOKENIZED, store = Store.YES)
    私有字符串组名；
}
```

在我的测试用例中，我创建了几个组并将它们保存到数据库中。一旦存储在数据库中，我就会创建索引，然后搜索给定的文本字符串。这似乎有效。

我遇到的问题是在创建索引后创建的任何新组都没有被索引。从我读过的内容来看，我认为一旦创建了索引，任何持久化的新项目都会自动使用新值进行索引，但这似乎不是我得到的行为。我在配置方式上有什么遗漏吗？或者我是否必须手动告诉 Hibernate Search 我添加了一个要索引的新对象？

不用说，我有点困惑......

[编辑] 我正在使用 JPA，所以我的休眠搜索配置包含在我的 persistence.xml 中，如下所示：

```

<property name="hibernate.search.default.directory_provider" value="filesystem"/>
<property name="hibernate.search.default.indexBase" value="D:\var2\lucene\indexes"/>

```

我可以看到索引文件已创建，我可以使用 Luke 查看内容，但当我持久保存新对象时，它们似乎永远不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:52:59.030

如[文档](http://docs.jboss.org/hibernate/search/3.4/reference/en-US/html_single/)中所述“默认情况下，每次通过 Hibernate 插入、更新或删除对象时，Hibernate Search 都会更新相应的 Lucene 索引”。

我要做的是检查我的 persistence.xml 看看我是否不小心设置了**hibernate.search.indexing_strategy = manual**

如果不是这种情况，也许您可​​以尝试强制它，看看是否有效？

**hibernate.search.indexing_strategy = 事件**

您使用的是哪个框架？也许看看这个问题的最后[一篇文章](https://stackoverflow.com/questions/1939540/hibernate-search-spring3-jpa)。

// 雅各布