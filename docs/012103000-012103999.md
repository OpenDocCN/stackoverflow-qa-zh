# StackOverflow 问答 12103000-12103999

# ios - 2条SQL语句只需要转换成一条语句

> ID：12103002
> 
> 赞同：0
> 
> 时间：2012-08-24T04:06:21.477
> 
> 标签：ios, sqlite

我正在尝试从具有一种条件的 2 个表中选择数据。

我的声明：

```
SELECT * from A where date >= ?  AND  date <= ?   UNION ALL SELECT * from B where date >= ?  AND  date <= ? 
```

当我使用这个语句时，我的应用程序需要延迟 2 秒才能正确显示数据，

但是当我使用：

```
SELECT * from A    UNION ALL SELECT * from B 
```

没必要耽误

那么如何以更快的速度获取数据呢？

我也试过：

```
SELECT * from(SELECT * from A   UNION ALL SELECT * from B) where date >= ?  AND  date <= ? " 
```

但它也很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:43:06.330

您是否考虑过创建“准备好的”或“编译的”声明？当您有类似的情况时，这可能特别有效。

[http://www.sqlite.org/c3ref/stmt.html](http://www.sqlite.org/c3ref/stmt.html)

结果集中有多少行？

# pyodbc - 使用 pyobdc 删除 sql server 中的临时表

> ID：12103003
> 
> 赞同：0
> 
> 时间：2012-08-24T04:06:22.700
> 
> 标签：pyodbc

我正在尝试检查临时表是否存在，如果存在，请使用 pyodbc 将其放入 SQL Server 中。该查询在管理工作室中有效，但在 python 中我得到了错误

> 以前的 SQL 不是查询

```
cnxn = pyodbc.connect('APP=MyApp;DRIVER={SQL Server Native Client 10.0};SERVER=powerapp6-WRON;DATABASE=ICP;DSN=myserver;Trusted_Connection=yes')
cursor = cnxn.cursor()
cnxn.commit()

for mc in range(0,3,1):
    speardata =  (""" if object_id('tempdb..#tempCSID') is not null
    begin
        drop table #tempCSID
    end
    create table #tempCSID (csid int)
    insert into #tempCSID (csid)
    select top 500 [CSID]
    from  [ICP].[dbo].[CSID]
    order by newid()
    SELECT [ICP].[dbo].[CSunit_L].[CSID] ,[Nitrogen] ,[Incorp0] ,[Incorp200] ,[yield] ,[xdays] ,[accum_rain] ,[avg_maxt]
          ,[avg_mint] ,[accum_radn] ,[xgdays] ,[accum_g_rain] ,[avg_g_maxt] ,[avg_g_mint] ,[accum_g_radn] ,[effrain_g] ,[xshdays]
          ,[accum_sh_rain] ,[avg_sh_maxt] ,[avg_sh_mint] ,[accum_sh_radn] ,[effrain_sh]
    FROM [ICP].[dbo].[CSunit_L]
    inner join #tempCSID 
    on [ICP].[dbo].[CSunit_L].[CSID] = #tempCSID.csid and [ICP].[dbo].[CSunit_L].[Nitrogen] < 201
    """)
    ndata =  np.array(cursor.execute(speardata).fetchall() ) 
```

我想知道这是否与前两行中的 cnxn 设置有关，因为它们`tempdb`与数据库位于不同的位置`ICP`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:52:53.760

错误`pyodbc.ProgrammingError: No results. Previous SQL was not a query`表示您的 SQL 存在语法问题。在这种情况下，有多个 DDL 和 DML 查询仅由行终止符 ( `\n`) 分隔。

在您的情况下，最好将每个语句拆分为一个单独的`cursor.execute(...)`调用，以确保您`connection.commit()`在插入临时表之后。然后执行`select`以填充您的 numpy 数组，如先前​​尝试的那样。

# python - 将 Python 代码翻译成 Oz

> ID：12103011
> 
> 赞同：2
> 
> 时间：2012-08-24T04:07:15.940
> 
> 标签：python, oz, mozart

有人可以帮我将这段 Python 代码翻译成 Oz 语言吗？

```
def rep_subset_conditional(S, tset, index, t, count):
    for i in xrange(index, len(S)):
        tset += [S[i]]
        tsum = sum(tset)
        if tsum == t:
            print tset
            count += 1
            tset.remove(S[i])
            return count
        elif tsum > t:
            tset.remove(S[i])
            return count
        else:
            count=rep_subset_conditional(S, tset, i, t, count)
            tset.remove(S[i])
    return count 
```

此代码仅计算并打印总和等于 t 的给定集合的所有子集（元素重复）。下面是这段代码的试运行：

```
>>> rep_subset_conditional([1, 5, 10, 25, 50], [], 0, 10, 0)
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
    [1, 1, 1, 1, 1, 5]
    [5, 5]
    [10]
    4 
```

`t`这里是 10 `S`是`[1, 5, 10, 25, 50]` 我想把这个程序翻译成 Oz 的子集。但我无法正确地做到这一点。请帮忙！这就是我所尝试的：

```
declare Rep T1 T2 Sum
fun {Rep L S MainList AuxList C}
   case L of nil then C
   [] H|T then
      {Browse H|AuxList}
      if {Sum H|AuxList} == S then
      T1={Rep MainList S MainList H|AuxList C+1}
      {Rep T S MainList AuxList T1}
      else
      if {Sum H|AuxList} < S then
         T2 = {Rep MainList S MainList AuxList C}
         {Rep T S MainList AuxList T2}
      end
      end      
   end
end
fun {Sum L}
  case L of nil then 0
  [] H|T then
     H + {Sum T}
  end
end 
```

# facebook - Facebook 用户登录时间和会话

> ID：12103012
> 
> 赞同：0
> 
> 时间：2012-08-24T04:07:18.970
> 
> 标签：facebook, session, login

有没有办法检查用户的登录时间和该会话的持续时间？我希望我的应用程序检查用户登录的时间和时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:09:40.027

不，FB API 不提供此类信息。

# html - 在 IE9 中损坏的纯 css 固定头表示例

> ID：12103016
> 
> 赞同：1
> 
> 时间：2012-08-24T04:07:46.297
> 
> 标签：html, css, scroll, internet-explorer-9, css-tables

如果您在 Chrome 或 Firefox 上转到以下示例，然后在 IE9 中，您会看到它在 IE9 中被破坏：

[http://www.imaputz.com/cssStuff/bigFourVersion.html](http://www.imaputz.com/cssStuff/bigFourVersion.html)

我可以通过为表格行指定宽度来固定高度，但是无论如何可以将滚动条带回来？

如果找不到合理的解决方案，我可能会使用 div 重新实现我的表格...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:51:32.620

这似乎是一个常见问题。这个问题与您的问题有关：[IE9 + css : problem with fixed header table](https://stackoverflow.com/questions/6903498/ie9-css-problem-with-fixed-header-table)

# loops - Infinite While that dos not lock up thread

> ID：12103018
> 
> 赞同：0
> 
> 时间：2012-08-24T04:08:52.697
> 
> 标签：loops, while-loop

我怎样才能使一个while循环每秒做一些不冻结应用程序的事情？例如使用 Thread.Sleep() 冻结线程。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:32:50.993

```
public class Test implements Runnable {

@Override
public void run() {
    while(true){
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // Your Statement goes here

    }

}

public static void main(String[] args) {
    Test test= new Test();
    Thread t= new Thread(test);
    t.start();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:10:29.217

你没有指定语言。我将在 C++ 中提供一个示例，该概念在其他语言中应该是相似的。

首先，这将使主线程进入睡眠状态：

```
int main(int, char**)
{
  while(true)
  { 
    sleep(1); // Put current thread to sleep;
    // do some work.

  }
  return 0;
} 
```

另一方面，这将创建一个工作线程。主线程将保持活动状态。

```
#include <iostream>
#include <thread>

void doWork()
{
   while(true) 
   {
      // Do some work;
      sleep(1); // Rest
      std::cout << "hi from worker." << std::endl;
   }
}

int main(int, char**)
{

  std::thread worker(&doWork);
  std::cout << "hello from main thread, the worker thread is busy." << std::endl;
  worker.join();

  return 0;
} 
```

~~代码未经测试。~~刚刚测试了这个，看看它的实际效果：http: [//ideone.com/aEVFi](http://ideone.com/aEVFi)

线程需要 c++11。另外，请注意，在上面的代码中，主线程将无限等待加入，因为工作线程永远不会终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:11:32.657

将循环和 Thread.Sleep() 放入工作线程中。

# alfresco - Alfresco：备份和恢复问题

> ID：12103026
> 
> 赞同：0
> 
> 时间：2012-08-24T04:10:29.677
> 
> 标签：alfresco

我在露天共享中遵循了备份和恢复方法，而不是导入/导出。它现在可以在新的 Alfresco 中按预期工作，我可以查看站点中的内容，可以查看站点文档库中的文件，可以查看事件、工作流、用户、组等。一切都很好，除了存储库没有加载，但是当我在存储库中搜索文件时，它显示“在质量站点中找到 3 个结果。”......但它没有显示这些文件。

在我的旧 Alfresco 中，我为存储库中的文件夹设置了权限……在我的新 alfresco 中加载存储库会导致任何错误吗？

当我关闭我的服务器时，它显示以下错误...

log4j:ERROR LogMananger.repositorySelector 为空，可能是由于使用 NOPLoggerRepository 重新加载类时出错。

请查看我的问题并提出一些建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:11:28.510

该错误意味着 log4j 尝试在 webapp 的日志文件中记录某些内容，但 Tomcat 已经关闭。您对新恢复的露天安装有足够/正确的权限吗？如果您正确地遵循了 wiki 中的备份/恢复过程，则存储库节点上的权限也会合并在一起。但是，如果你想重置和重建所有权限，你可以执行一个完整的重新索引，并将字符串附加到 alfresco.global.properties：

```
index.recovery.mode=FULL 
```

# windows - Sublime Text 2 - 在当前或项目目录中打开 CMD 提示符 (Windows)

> ID：12103028
> 
> 赞同：35
> 
> 时间：2012-08-24T04:10:41.150
> 
> 标签：windows, cmd, sublimetext2

我发现以下 Sublime 命令非常有用，因为它会在当前文件的位置打开一个资源管理器窗口：

```
{ "keys": ["ctrl+alt+o"], "command": "open_dir", "args": {"dir": "$file_path", "file": "$file_name"} }, 
```

我想要的是一个类似的命令，它会打开一个 cmd 窗口。理想情况下在根项目文件夹中，但当前文件目录也可以。

已阅读以下问题，但不太清楚如何在 sublime 插件/命令中使用它： [BAT file to open CMD in current directory](https://stackoverflow.com/questions/4451668/bat-file-to-open-cmd-in-current-directory)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-29T10:01:48.050

1.  在 Sublime Text 2 中单击菜单`preference`> 。`Browser Packages`
2.  在步骤 1 中打开的目录中创建一个文件夹`Cmd`。
3.  在步骤 2 中创建`cmd.py`的文件夹中创建一个使用以下代码命名的 python 文件。`Cmd`

```
import os, sublime_plugin
class CmdCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        file_name=self.view.file_name()
        path=file_name.split("\\")
        current_driver=path[0]
        path.pop()
        current_directory="\\".join(path)
        command= "cd "+current_directory+" & "+current_driver+" & start cmd"
        os.system(command) 
```

4.  在步骤 2 中创建`Context.sublime-menu`的文件夹中创建一个使用以下代码命名的文件。`Cmd`

```
[
     { "command": "cmd" }
] 
```

5.  重新启动崇高文本。

现在您可以在右键单击上下文菜单中的当前目录中打开 Cmd 提示符。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-09T10:23:31.153

[Shell Turtlestein 包](https://github.com/misfo/Shell-Turtlestein)也有一个命令。
安装该软件包后，您可以键入`CTRL`+ `SHIFT`+ `ALT`+ `C`
（或Mac 上的`CMD`+ `SHIFT`+ `ALT`+ `C`）以在当前文件的文件夹中打开 cmd/terminal。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-12T11:55:54.543

只是为了扩展 TomCaps 的答案，您还可以通过将第 3 步更改为：

3.  在步骤 2 中创建的 cmd 文件夹中使用以下代码创建一个名为 cmd.py 的 python 文件。

    ```
    import os, sublime, sublime_plugin
    class CmdCommand(sublime_plugin.TextCommand):
        def run(self, edit):
            file_name=sublime.active_window().project_file_name()
            path=file_name.split("\\")
            current_driver=path[0]
            path.pop()
            current_directory="\\".join(path)
            command= "cd "+current_directory+" & "+current_driver+" & start cmd"
            os.system(command) 
    ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-27T11:08:58.190

我一直在寻找同样的东西，除了在 Mac OS X 上。我也试过

*   [壳牌 Turtlestein](https://github.com/misfo/Shell-Turtlestein)包装

但我最终使用了

*   [Sublime 终端](http://wbond.net/sublime_packages/terminal)包

原因如下：

*   Shell Turtulestein 的主要目的是另一个
*   Sublime Terminal 让我使用 iTerm 而不是内置终端

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-15T20:40:47.703

## 一种非python方法。

1.  转到`Menu`> `Preferences`> `Browser Packages`。
2.  打开`user`目录。
3.  创建一个新文件`cmdRunFromDIR.sublime-build`并在 Sublime Text 中打开。
4.  粘贴以下...

    ```
    {
    "cmd": ["C:\\\\Windows\\System32\\cmd.exe", "/C START &"],
    "working_dir": "$file_path"
    } 
    ```

    上面将打开当前文件夹，但如果你想要项目目录，那么这里有很多不同的方法。 **注意：**之后将传递可以更改为以下任何内容的内容`&`。我看不到任何有关此的文档。这只是代表我的反复试验，如果您考虑一下，这是有道理的。因此，如果您尝试传递to 将得到一个如果路径中有任何空格。`START``$file_path variable``"cmd": ["C:\\\\Windows\\System32\\cmd.exe", "/C START & $file_path"]`**`ERROR`**

    ```
    $file_path  The directory of the current file, e.g., C:\Files.
    $file   The full path to the current file, e.g., C:\Files\Chapter1.txt.
    $file_name  The name portion of the current file, e.g., Chapter1.txt.
    $file_extension The extension portion of the current file, e.g., txt.
    $file_base_name The name-only portion of the current file, e.g., Document.
    $folder The path to the first folder opened in the current project.
    $project    The full path to the current project file.
    $project_path   The directory of the current project file.
    $project_name   The name portion of the current project file.
    $project_extension  The extension portion of the current project file.
    $project_base_name  The name-only portion of the current project file.
    $packages   The full path to the Packages folder. 
    ```

5.  对于键盘快捷键，转到`Menu`> `Preferences`>`Key Bindings`并粘贴以下代码。这个快捷方式是`CTRL+C`, `D`。

    ```
     { "keys": ["alt+c,alt+d"], "command": "build", "args": { "file": "{packages}/User/cmdRunFromDIR.sublime-build" } } 
    ```

6.  `,`如果它不是该文件中的最后一行，则在该行的末尾添加。

7.  不需要重新启动 Sublime Text。

8.  您也可以通过`Menu`> `Tools`> `Build System`>访问它`cmdRunFromDIR`。
    完成此操作后，`CTRL+B`还将运行该命令。

* * *

**有用的链接：** *请参阅下面的第一个链接，了解如何`.bat`直接从 Sublime Text 运行文件。对上面代码的修改很少。*

[构建系统 - Sublime Text 3](https://stackoverflow.com/a/56154142/8262102 "构建系统 - Sublime Text 3")

[在 Sublime Text 3 中，如何像在 Sublime Text 2 中一样分别设置“构建和运行”和“仅构建”的快捷方式](https://stackoverflow.com/questions/35455988/in-sublime-text-3-how-to-have-shortcuts-for-build-and-run-and-build-only-se "在 Sublime Text 3 中，如何像在 Sublime Text 2 中一样分别设置“构建和运行”和“仅构建”的快捷方式")

[如何在 Sublime Text 中为任何命令添加快捷方式](http://brendankemp.com/essays/how-to-add-a-shortcut-for-any-command-in-sublime-text/ "如何在 Sublime Text 中为任何命令添加快捷方式")

[构建系统 - 配置](http://docs.sublimetext.info/en/latest/reference/build_systems/configuration.html#build-system-variables "构建系统 - 配置")

# android - 在从按钮单击启动的对话框中填充 ListView 的 AsyncTask 无法正常工作

> ID：12103029
> 
> 赞同：0
> 
> 时间：2012-08-24T04:10:49.337
> 
> 标签：android, dialog, arraylist, android-listview, android-asynctask

我花了一整天的时间试图解决这个问题，这让我发疯了，希望这里的专家能帮助我解决这个问题，这样我就不再拔头发了。我正在尝试在单击按钮时弹出的对话框窗口中填充 ListView。如果我在活动开始时启动 asynctask 代码，一切正常，但如果我尝试将代码移动到按钮 OnClickListener 的任一位置，它会开始双重填充列表视图。

这是代码：

在我的 OnCreate 中：

```
new LoadAllProducts().execute(); 
```

运行以下代码：

```
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }

    /**
     * getting All products from url
     * */
    @Override
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_get_classes, "GET",
                params);

        // Check your log cat for JSON response
        Log.d("All Classes: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // classes found
                // Getting Array of Classes
                classes = json.getJSONArray(TAG_CLASSES);

                // looping through All Classes
                for (int i = 0; i < classes.length(); i++) {
                    JSONObject c = classes.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_CLASSID);
                    String name = c.getString(TAG_CLASSNAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_CLASSID, id);
                    map.put(TAG_CLASSNAME, name);

                    // adding HashList to ArrayList
                    classesList.add(map);
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String file_url) {

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
            }
        });

    }

} 
```

在我的按钮的 OnClickListener 中，我有以下内容：

```
onCreateDialog().show(); 
```

启动以下对话框：

```
 protected Dialog onCreateDialog() {

    //Set up dialog
    dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.checkindialog);

    Button canceldialog = (Button) dialog.findViewById(R.id.btncancel);

    //Define ListView and set it's empty view in case no results come back
    this.lv = (ListView) dialog.findViewById(R.id.lvCheckin);
    this.lv.setEmptyView(dialog.findViewById(R.id.empty));

    TextView header = (TextView) dialog.findViewById(R.id.lblCheckin);
    Typeface tf = Typeface.createFromAsset(getAssets(),
            "fonts/roboto-light.ttf");

    header.setTypeface(tf);

    //ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
    //      R.layout.checkin_item, R.id.list_content, checkinOptions);
    ListAdapter adapter = new SimpleAdapter(Checkin.this, classesList,
            R.layout.checkin_item, new String[] { TAG_CLASSID,
                    TAG_CLASSNAME }, new int[] { R.id.pid, R.id.name });
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> listAdapter, View arg1,
                int position, long arg3) {
            CheckIn checkin = new CheckIn();
            TextView txt = (TextView) listAdapter.getChildAt(
                    position - lv.getFirstVisiblePosition()).findViewById(
                    R.id.name);
            String CheckinMessage = Utilities.getFacebookCheckinMessage(txt
                    .getText().toString(), context);

            checkin.CheckInToFacebook(CheckinMessage, activity);

        }
    });

    canceldialog.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();

        }
    });
    return dialog;
} 
```

所以就像我说的，这很好用，除了列表视图只在活动启动时获取它的数据，我试图在单击按钮时让它发生。我已经尝试了两件事。移动“onCreateDialog().show();” 到 AsncTask 的“onPostExecute”，但这不起作用，我尝试移动“new LoadAllProducts().execute();” 进入 ondialog 创建事件，以及内联按钮点击监听器。这两者最终只会不断地添加到列表视图中，而不是每次都清除/刷新列表视图。

真的希望有人能提供帮助，因为我敢肯定这可能是愚蠢的，但这今天一直在踢我的屁股。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:37:18.047

Evan 尝试`onCreateDialog(int id)`为 show dialog 覆盖受保护的 Dialog 函数并覆盖`public void onPrepareDialog(int id, Dialog dialog)`。在 onPrepareDialog 函数调用`removeDialog(int id)`函数中，这将有助于每次创建一个新的对话框并删除以前缓存的数据。

# html - 尝试使用 LiveReload，但在 Safari 6.0 中，本地文件的扩展图标显示为灰色

> ID：12103030
> 
> 赞同：0
> 
> 时间：2012-08-24T04:10:56.187
> 
> 标签：html, css

我正在尝试让 LiveReload 与我现在正在编码的本地网站一起工作，但它似乎不起作用。在非本地页面上，扩展图标是可点击的，但对于本地文件，它不是：http: [//i.imgur.com/qrMDo.png](http://i.imgur.com/qrMDo.png)

它不适用于本地文件吗？我在应用程序中添加了它。或者它不适用于 ML？如果我将脚本添加到 HTML 文件中，它会起作用，但我不希望这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:13:56.873

在我看来，这是一个错误。

据报道[，这里](https://andreyvit.lighthouseapp.com/projects/80096-livereload/tickets/232)。我在 Safari 中遇到了完全相同的问题。

如果可以，请使用不同的浏览器。它对我来说在 Firefox 中效果很好。

# c# - 数据绑定后如何在 DDL 中添加项目

> ID：12103033
> 
> 赞同：0
> 
> 时间：2012-08-24T04:11:22.117
> 
> 标签：c#, asp.net

在我的网站中，当用户登录时，他将拥有像 Editmyaccount 这样的选项，他可以在其中编辑详细信息。这里我显示他在 DB 的注册页面中输入的值，我有两个 DDL，我正在显示适当的国家和用户选择的州，但我想显示其他一些国家和州，我该怎么做？

```
 DropDownList1.DataSource = ProfileMasterDAL.bind();
            DropDownList1.DataBind();
            DropDownList1.Items.Insert(0, "--Select country--");
            DropDownList1.SelectedIndex = 0; 
```

实际上我正在使用会话从其他页面获取 DDL

```
 DropDownList1.Items.Add(new ListItem(Session["country"].ToString()));
           DropDownList2.Items.Add(new ListItem(Session["state"].ToString())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:18:35.093

如果您已经将国家/州列表绑定到 DropDownList，则可以将两个列表的选定值绑定到会话中存储的值。例如，如果您所在的国家 DropDownList 看起来像这样：

```
<asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem>Please Select</asp:ListItem>
    <asp:ListItem>Australia</asp:ListItem>
    <asp:ListItem>USA</asp:ListItem>
    <asp:ListItem>United Kingdom</asp:ListItem>
    <asp:ListItem>Spain</asp:ListItem>
</asp:DropDownList> 
```

您可以使用以下代码选择会话中指定的适当国家/地区：

```
 DropDownList1.SelectedValue = Session["country"].ToString() 
```

这样，您就不需要以编程方式添加额外的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:59:09.503

只是一个快速的建议，为什么你不能使用泛型类检索所有内容，然后在将会话绑定到下拉列表之前添加会话中的值，然后你可以执行类似的操作

```
var distinctStatelist
    = list.GroupBy(
        i => i.state,
        (key, group) => group.First()
    ).ToList(); 
```

这将为您提供不同的状态列表，然后您可以确保没有重复项并将其绑定到您的下拉列表。

**或者**

如果您已经在下拉列表中拥有该项目，那么您可以执行此操作

```
DropDownList i = default(DropDownList);
ListItem li = i.Items.FindByText("");
i.Items.Remove(li);
li.Selected = true;
i.Items.Add(li); 
```

# java - MySQL - 加载数据文件 - 如何读取行号并将其插入表中？

> ID：12103034
> 
> 赞同：0
> 
> 时间：2012-08-24T04:11:28.693
> 
> 标签：java, mysql, sql, load-data-infile

我正在使用 MySQL 的 LOAD DATA LOCAL INFILE 功能将记录行从文本文件加载到表中。一切正常，但我想知道如何将文本文件中的行号插入表的 LINE_NUMBER 列？

```
public String getLoadDataSQL() throws Exception {

    StringBuffer sb = new StringBuffer();
    sb.append( "LOAD DATA LOCAL INFILE '"+ filePath +"' INTO TABLE "+ this.tableName );
    sb.append( " LINES TERMINATED BY '\\n'");
    sb.append( " (@line) ");
    sb.append( " SET ROLL_NUMBER = substr(@line,1,9),  ");
    sb.append( " LAST_NAME = substr(@line,10,30),  ");
    ....
    sb.append( " LINE_NUMBER = "+ ????? +",  "); // WHAT TO DO HERE??
    ...
    System.out.println(sb.toString());
    return sb.toString();
} 
```

你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:16:19.677

当您从文件加载数据时，不确定是否可以直接执行此操作。一个技巧是将你的`LINE_NUMBER`作为一个[`AUTO_INCREMENT`专栏](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)。

# android - 在 App Billing 服务中有时会被杀死

> ID：12103040
> 
> 赞同：5
> 
> 时间：2012-08-24T04:12:24.800
> 
> 标签：android, service, in-app-billing, termination

嗨，我们通过 inApp Billing 在市场上发布了这个应用程序，我们的日志显示，BillingService（可能是应用程序本身）在某些客户设备上一直被随机杀死。因此，有时我无法收到购买成功与否的通知。一些客户经常需要购买两次才能成功购买。虽然这发生在一小部分客户身上，但它非常令人不安。知道为什么会发生这种情况，或者可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:30:00.197

I am not sure whether it will help, but I would recommend to make your BillingService foreground service: [http://developer.android.com/guide/components/services.html#Foreground](http://developer.android.com/guide/components/services.html#Foreground)

Here is piece of documentation "API to put the service in a foreground state, where the system considers it to be something the user is actively aware of and thus not a candidate for killing when low on memory. "

It could be that small percentage of your user has low memory condition and it's start killing services/applications (including yours).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:26:30.537

您可以提供用于应用内计费的代码吗？可能是他们的设备不支持应用内计费，或者即使他们在尝试访问 Android Market 广播通知时失去了互联网连接。我在我的应用程序中使用的基本上是这样的：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
if( BillingHelper.isBillingSupported()){
        switch (arg2) {
        case 0:         
            Log.d("Appname", "30 coins");
            BillingHelper.requestPurchase(context, "com.paid.smallcoinbundle"); 
                 break;
        case 1: 
            Log.d("Appname", "85 coins");
            BillingHelper.requestPurchase(context, "com.paid.medcoinbundle"); 
                 break;
        case 2: 
            Log.d("Appname", "175 coins");
            BillingHelper.requestPurchase(context, "com.paid.midcoinbundle"); 
                 break;
        case 3:  
            Log.d("Appname", "500 coins");
            BillingHelper.requestPurchase(context, "com.paid.maxcoinbundle"); 
                 break;
        default: Log.d("Appname", "Something broke");
        break;
        }
    //  BillingHelper.requestPurchase(mContext, "android.test.purchased"); 
        // android.test.purchased or android.test.canceled or android.test.refunded or com.blundell.item.passport
    } else {
        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_layout,(ViewGroup) findViewById(R.id.toast_layout_root));
        TextView text = (TextView) layout.findViewById(R.id.text);
        text.setText("In App Billing isnt supported by your device");
        Toast toast = new Toast(getBaseContext());
        toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.setView(layout);
        toast.show();
        return;
    }
} 
```

然后 ：

```
public Handler mTransactionHandler = new Handler(){
    public void handleMessage(android.os.Message msg) {
        Log.d("Appname", "Transaction complete");
        Log.d("Appname", "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
        Log.d("Appname", "Item purchased is: "+BillingHelper.latestPurchase.productId);

        if(BillingHelper.latestPurchase.isPurchased()){
            Log.d("Appname", "Ispurchased : " + BillingHelper.latestPurchase.productId);
            if(BillingHelper.latestPurchase.productId.equals("com.paid.smallcoinbundle")){
                ConnectToServer.UpdateCoins(context,id,"add","30");
            }
            if(BillingHelper.latestPurchase.productId.equals("com.paid.medcoinbundle")){
                ConnectToServer.UpdateCoins(context,id,"add","85");
            }
            if(BillingHelper.latestPurchase.productId.equals("com..paid.midcoinbundle")){
                ConnectToServer.UpdateCoins(context,id,"add","175");
            }
            if(BillingHelper.latestPurchase.productId.equals("com.paid.maxcoinbundle")){
                ConnectToServer.UpdateCoins(context,id,"add","500");
            }

            finish();
        }
    }; 
```

};

既然您说应用内计费确实有效，尽管有时他们需要两次购买该物品，我假设您的包裹名称是正确的。

如果您要修复它以及问题所在，请告诉我。这是一个非常有趣的话题。

# python - 使用 Python nltk 和 SQL 跟踪疾病的演变

> ID：12103041
> 
> 赞同：4
> 
> 时间：2012-08-24T04:12:25.957
> 
> 标签：python, sql, algorithm, postgresql, twitter

我有很多千兆字节的 Facebook / Twitter / RSS 数据。

我正在使用它以一种非常笼统的方式在一般人群中跟踪甲状旁腺功能亢进的演变，从某人通过他们一直服用的药物、治疗和最终结果被诊断出患有某种疾病的类型开始。

我是 NLTK 的新手，我确实有很好的 Python / SQL 经验。

我所有的数据都`parathyroid`在里面；但是，正如您在下面看到的*（示例 twitter 数据）*，它在语言上是可怕的：

```
omg i think my parathyroid is screwed up!!!
Have been stuck at parathyroid hormone. STOP GETTING ON TWITTER JASMINE.
Cryopreservation of Parathyroid Tissue after Parathyroid Surgery for Renal Hyperparathyroidism
The Parathyroid as a Target for Radiation Damage
it's for the parathyroid hormone la 
```

所有这些数据都存储在数据库中。我们还有海报、帖子 ID、帖子文本等字段。

我想知道是否有人可以为我指出以下正确的方向：

1.  是否已经有有效的算法来帮助我做我需要的事情？
2.  从语言上讲，我们如何在数据中找到相关性？我们正在尝试追踪模式。
3.  我应该将数据放入某种“网格”形式以帮助分析吗？

# css - CSS 悬停和链接

> ID：12103042
> 
> 赞同：0
> 
> 时间：2012-08-24T04:12:45.540
> 
> 标签：css

我正在尝试使用 css 创建悬停链接，但它不起作用。这是创建css悬停链接的正确方法吗？谢谢，

我读过这个但没有运气：[http ://w3schools.com/css/css_link.asp](http://w3schools.com/css/css_link.asp)

这是我的代码：

**CSS**

```
.Footerbullets{
padding:3px 0 3px 25px;
background-image:url(../images/menubar/footer_bullet.jpg);
background-repeat:no-repeat;
}
.Footerbullets a.link {
color:#FFF;
}
.Footerbullets a.hover {
 color:#FF0;
} 
```

**HTML**

```
<div id="footer"><div class="content">
       <ul>
          <li class="Footerbullets"><a href="#">Link with Hover Color Change</a></li>
       </ul>
   <div class="clear"></div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:33:17.460

使用`div#footer ul li.Footerbullets a:hover`而不是`.Footerbullets a:hover`，似乎`div#footer ul li a:hover`覆盖了其他样式。

[http://jsfiddle.net/GFec3/14/](http://jsfiddle.net/GFec3/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:14:39.917

试试这个

```
.Footerbullets a:hover {
 color:#FF0 !important;
} 
```

**我的代码**

```
<style>
.Footerbullets{
padding:3px 0 3px 25px;
background-image:url(../images/menubar/footer_bullet.jpg);
background-repeat:no-repeat;
}
.Footerbullets a.link {
color:#FFF;
}
.Footerbullets a:hover {
 color:#FF0;
}
</style> 
```

**HTML**

```
<div id="footer"><div class="content">
       <ul>
          <li class="Footerbullets"><a href="#">Link with Hover Color Change</a></li>
       </ul>
   <div class="clear"></div>
</div></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:30:14.573

我为每个锚伪类制作了一个带有工作示例的 jsfiddle。我对其进行了测试，它至少可以在最新版本的 Safari 中运行。你可以在这里找到它：

[http://jsfiddle.net/kylewlacy/DqePq/](http://jsfiddle.net/kylewlacy/DqePq/)

[您也可以在这里](http://css-tricks.com/pseudo-class-selectors/)阅读每个伪类以及它们的作用

# google-docs - 将数字粘贴为谷歌文档中的字符串

> ID：12103048
> 
> 赞同：2
> 
> 时间：2012-08-24T04:13:24.487
> 
> 标签：google-docs

我有一个谷歌文档的电子表格，其中包含以下数据：

```
0012
0234
0065 
```

我想粘贴到另一个谷歌文档电子表格中，但使用 ctrl+c ctrl+v 格式的数据，如数字：

```
12
234
65 
```

我想保存字符串格式。右键单击复制粘贴我无法复制。在 Firefox 和 Chromium 中测试。

编辑：我有数百行，手动编辑不是解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:16:01.897

`'`在复制单元格之前，在零之前放置一个单引号 ( )。

如果您需要将此应用于许多单元格，请将一个单元格的内容设置为`'`并使用和单元格内容`CONCAT`填充新列`'`。

如果 A1 是`'`并且您要复制的值从 B1 开始：

将 C1 设置为`=CONCAT($A$1, $B1)`并填写公式。

# jquery - webworka的jQuery TagEdit以编程方式添加项目

> ID：12103051
> 
> 赞同：0
> 
> 时间：2012-08-24T04:13:47.287
> 
> 标签：jquery

[https://github.com/webworka/Tagedit/](https://github.com/webworka/Tagedit/)是参考。

我正在尝试以编程方式简单地添加一个项目。

我不确定该怎么做-那里有我缺少的功能吗？如果没有，我必须自己添加吗？

示例演示在这里：[http](http://tagedit.webwork-albrecht.de/) ://tagedit.webwork-albrecht.de/ 。这个想法与 StackOverflow 处理标签的方式相同 - 当您键入项目时，它会搜索自动完成列表并在下拉列表中为您提供一些默认值。您也可以通过单击伪输入框区域内的空白区域来创建自定义元素。当您按下 Enter（用于完成条目添加的指定按钮）时，TagEdit.js 在将其添加到输入列表之前运行 isNew() 和其他内容。

我想要做的是以编程方式将新元素添加到输入列表（同时仍保留 TagEdit.js 的 isNew() 函数以防止重复条目。所以，基本上， input.tagedit_add('new item'); 将按照课程在输入框中添加一个新标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:52:40.290

我已经设法自己破解它以使其工作。

```
this.addNew = function (value) {
        var oldValue = (typeof value != 'undefined' && value.length > 0);
        var checkAutocomplete = oldValue == true? false : true;
        // check if the Value ist new
        console.log(value);
        var isNewResult = isNew(value, checkAutocomplete);
        if(isNewResult[0] === true || (isNewResult[0] === false && typeof isNewResult[1] == 'string')) {
            console.log('NEW: ' + value);

            if(options.allowAdd == true) {
                // Make a new tag in front the input
                html = '<li class="tagedit-listelement tagedit-listelement-old">';
                html += '<span dir="'+options.direction+'">' + value + '</span>';
                var name = baseName + '[]';
                html += '<input type="hidden" name="'+name+'" value="'+value+'" />';
                html += '<a class="tagedit-close" title="'+options.texts.removeLinkTitle+'">x</a>';
                html += '</li>';

                $('.tagedit-listelement-new').before(html);
            }
        } else { console.log('NOT NEW: ' + value)}
    };
return this; 
```

# c# - 在 C# 中处理非英文字符

> ID：12103052
> 
> 赞同：3
> 
> 时间：2012-08-24T04:13:50.113
> 
> 标签：c#, character-encoding, streamreader, streamwriter

我需要正确理解字符集和编码。有人可以指出我在 C# 中处理不同字符集的好文章吗？

这是我面临的问题之一-

```
 using (StreamReader reader = new StreamReader("input.txt"))
        using (StreamWriter writer = new StreamWriter("output.txt")
        {
            while (!reader.EndOfStream)
            {
                writer.WriteLine(reader.ReadLine());
            }
        } 
```

这个简单的代码片段并不总是保留编码 -

例如 -

输入中的 Aukéna 变成输出中的 Aukï¿½na。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:28:37.880

你只是有一个编码问题。你必须记住，你真正阅读的只是一个比特流。您必须告诉您的程序如何正确解释这些位。

要解决您的问题，只需使用也采用编码的构造函数，并将其设置为您的文本使用的任何编码。

[http://msdn.microsoft.com/en-us/library/ms143456.aspx](http://msdn.microsoft.com/en-us/library/ms143456.aspx)

[http://msdn.microsoft.com/en-us/library/3aadshsx.aspx](http://msdn.microsoft.com/en-us/library/3aadshsx.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:29:31.847

我想在读取文件时，您应该知道文件具有哪种编码。否则你很容易无法正确阅读。

当您知道文件的编码时，您可以执行以下操作：

```
 using (StreamReader reader = new StreamReader("input.txt", Encoding.GetEncoding(1251)))
        using (StreamWriter writer = new StreamWriter("output.txt", false, Encoding.GetEncoding(1251)))
        {
            while (!reader.EndOfStream)
            {
                writer.WriteLine(reader.ReadLine());
            }
        } 
```

如果要更改文件的原始编码，则会出现另一个问题。

以下文章可能会为您提供关于什么是编码的良好基础： [每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

这是一篇链接 msdn 文章，您可以从中开始： [编码类](http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T04:30:24.303

`StreamReader.ReadLine()`尝试使用 UTF 编码读取文件。如果这不是您的文件使用的格式，StreamReader 将无法正确读取字符。

[本文](http://support.microsoft.com/kb/889835)详细介绍了该问题并建议将这种编码传递给构造函数`System.Text.Encoding.Default`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T04:47:04.177

You could always create your own parser. What I use is:

`var ANSI = (Encoding) Encoding.GetEncoding(1252).Clone();

```
ANSI.EncoderFallback = new EncoderReplacementFallback(string.Empty);` 
```

The first line of this creates a clone of the Win-1252 encoding (as the database I deal with works with Win-1252, you'd probably want to use UTF-8 or ASCII). The second line - when parsing characters - returns an empty string if there is no equivalent to the original character.

After this you'd want to preferably filter out all command characters (excluding tabs, spaces, line feeds and carriage returns depending on what you need).

Below is my personal encoding-parser which I set up to correct data entering our database.

```
private string RetainOnlyPrintableCharacters(char c)
{
//even if the character comes from a different codepage altogether, 
//if the character exists in 1252 it will be returned in 1252 format.
    var ansiBytes = _ansiEncoding.GetBytes(new char[] {c});

    if (ansiBytes.Any())
    {
        if (ansiBytes.First().In(_printableCharacters))
        {
            return _ansiEncoding.GetString(ansiBytes);
        }
    }
    return string.Empty;
} 
```

_ansiEncoding comes from the var ANSI = (Encoding) Encoding.GetEncoding(1252).Clone(); with the fallback value set

if ansiBytes is not empty, it means that there is an encoding available for that particular character being passed in, so it is compared with a list of all the printable characters and if it exists - it is an acceptable character so is returned.

# java - jWebSocket java.lang.OutOfMemoryError：无法创建新的本机线程

> ID：12103053
> 
> 赞同：0
> 
> 时间：2012-08-24T04:14:14.517
> 
> 标签：java, websocket, out-of-memory

我正在尝试在（1and1 VPS）上运行`jWebSocket`服务器。`CentOS 5.8`在服务器启动和来自客户端的少量请求（重新加载网页）之后，我收到此错误：

```
Exception in thread "jWebSocket TCP-Connector 01.33719.16" java.lang.OutOfMemoryError: unable to create new native thread
        at java.lang.Thread.start0(Native Method)
        at java.lang.Thread.start(Thread.java:691)
        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:943)
        at java.util.concurrent.ThreadPoolExecutor.ensurePrestart(ThreadPoolExecutor.java:1555)
        at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:333)
        at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:546)
        at java.util.concurrent.ScheduledThreadPoolExecutor.submit(ScheduledThreadPoolExecutor.java:646)
        at org.jwebsocket.tcp.TimeoutOutputStreamNIOWriter.sendPacket(TimeoutOutputStreamNIOWriter.java:215)
        at org.jwebsocket.tcp.TCPConnector.sendPacket(TCPConnector.java:279)
        at org.jwebsocket.server.BaseServer.sendPacket(BaseServer.java:186)
        at org.jwebsocket.server.TokenServer.sendPacketData(TokenServer.java:405)
        at org.jwebsocket.server.TokenServer.sendTokenData(TokenServer.java:388)
        at org.jwebsocket.server.TokenServer.sendToken(TokenServer.java:312)
        at org.jwebsocket.plugins.TokenPlugIn.sendToken(TokenPlugIn.java:174)
        at org.jwebsocket.plugins.system.SystemPlugIn.sendWelcome(SystemPlugIn.java:397)
        at org.jwebsocket.plugins.system.SystemPlugIn.connectorStarted(SystemPlugIn.java:261)
        at org.jwebsocket.plugins.BasePlugInChain.connectorStarted(BasePlugInChain.java:126)
        at org.jwebsocket.server.TokenServer.connectorStarted(TokenServer.java:170)
        at org.jwebsocket.engines.BaseEngine.connectorStarted(BaseEngine.java:93)
        at org.jwebsocket.tcp.TCPEngine.connectorStarted(TCPEngine.java:320)
        at org.jwebsocket.tcp.TCPConnector$ClientProcessor.run(TCPConnector.java:502)
        at java.lang.Thread.run(Thread.java:722) 
```

但是当我`jWebSocket`在我的电脑上运行时，一切正常。我使用全新安装的 CentOS 5.8 制作了自己的虚拟服务器`virtualbox`，它也在那里工作。

我注意到 1and1 VPS 上的 java 使用大量内存 ~1GB（是我的计算机或 virtualbox 上的 10 倍）。在 1and1 VPS 上，我有 2GB 的 RAM（有一个错误），而在 Virtualbox jWebSocket 上运行得很好，只有 512MB 的 RAM。

这种内存不足错误的原因可能是什么？如果您有任何建议，请分享。我不知道该怎么办了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:03:53.007

检查链接：[http](http://devgrok.blogspot.sk/2012/03/resolving-outofmemoryerror-unable-to.html)
://devgrok.blogspot.sk/2012/03/resolving-outofmemoryerror-unable-to.html 听起来他们必须增加每个用户限制的 linux 最大进程。
至少我看到的与你的问题的相似之处是你得到了相同的异常+都运行 linux :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:35:53.537

这是 1and1 ( [http://www.1and1.pl/](http://www.1and1.pl/) ) 虚拟主机问题。他们使用具有所谓用户 Beancounter 或 UBC 参数的 Parallels Virtuozzo Containers。这是一组限制女巫是我的问题的原因。您可以在 /proc/user_beancounters 中看到此限制。当达到称为“numproc”的限制之一时，我的应用程序无法创建新线程。

编辑

当时 jWebSocket 的设计方式是为每个传入的令牌创建一个线程，并且在不再需要该线程时不销毁它。

我不再使用 jWebSocket，我将其替换为用 PHP 编写的 websocket serwer。

# android - 网络摄像头直播安卓

> ID：12103054
> 
> 赞同：3
> 
> 时间：2012-08-24T04:14:21.973
> 
> 标签：android, webcam, broadcasting

昨天，当我在 Google Play 中搜索不同类型的应用程序时，我发现了几个应用程序可以从手机上直播实时摄像头。我做了一些研究，比如这个概念是什么。但是找不到很多细节。谁能简要地给出一些想法？我想在我的一个应用程序中尝试相同的概念。

参考：[https ://play.google.com/store/apps/details?id=com.pas.webcam](https://play.google.com/store/apps/details?id=com.pas.webcam)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:38:55.883

查看这个用于 android ip camera 的 Google 代码项目，它使用 nanoHttpd 服务器在 android 设备中流式传输视频

[http://code.google.com/p/ipcamera-for-android/](http://code.google.com/p/ipcamera-for-android/)

下载源码试试

# objective-c - 让 - (id)init 不返回自己是一个好习惯吗？

> ID：12103055
> 
> 赞同：2
> 
> 时间：2012-08-24T04:14:22.567
> 
> 标签：objective-c, uiviewcontroller, init

我正在考虑以下自定义视图控制器：

```
- (id)init
{
    self = [super init];
    if (self == nil) {
        return self;
    }
    return [[UINavigationController alloc] initWithRootViewController:[self autorelease]];
} 
```

这个可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:26:31.740

这是非常糟糕的做法。初始化方法应返回正在实例化的类的实例。总是。或者`nil`如果有什么问题。

如果你想做一些额外的逻辑并返回一个以当前类视图控制器作为根视图控制器的导航控制器，你应该考虑做一个类方法，比如：

```
+ (UINavigationController*)someThing{
    id IdontKnowWhatIsTheNameOfYourClass = [[[[self class] alloc] init] autorelease];
    return [[[UINavigationController alloc] initWithRootViewController:IdontKnowWhatIsTheNameOfYourClass] autorelease];
} 
```

但即使这样也不是好的做法。您的视图控制器应该不知道它是模式视图控制器、导航控制器内部还是选项卡栏控制器内部。即使你可以争辩说你只会在它应该是任何这些 segues 的根源的情况下使用该方法。

需要明确的是，这将起作用。但这非常糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:48:48.827

如果您有充分的理由这样做，这是一种很好的做法。它由[Class 集群](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)或尝试使用棘手的缓存机制时使用。这样做的理由很少，而且是一件非常先进的事情。如果您有一个非常复杂的超类，这也很危险。

如果你真的必须使用这个技巧（而不仅仅是利用类构造函数），你必须小心引用计数（如果你不使用 ARC）：

*   释放之前的 self 实例

*   确保新返回的 self 具有 +1 保留计数，因为您的客户希望在完成后释放它。

例如，如果你想使用一些实例缓存：

```
- (id)initWithKey:(NSString *)aKey
{
    id cachedInstance = [__myCache objectForKey:aKey];
    if (cachedInstance) {
        // use this instance instead of self
        [self release];
        return [cachedInstance retain];
    }
    self = [super init];
    if (self) {
        // further init the instance here
        ...
        // cache it
        [__myCache setObject:self forKey:aKey];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:29:46.747

这取决于几件事。从技术上讲，init 方法可以重新分配`self`（这就是为什么您总是在同一个分配中配对 alloc/init）。然而，返回不同类的对象（即不从被初始化的类继承的对象）**应该被认为是糟糕的设计。**

所以，除非你的类是 UINavigationController 的*父*类，否则我会说你的 init 方法是一个糟糕的选择。

最好创建一个在语义上更命名并具有适当返回类型的类方法（而不是隐式约定，`init`它会返回一个与调用它的类同族的对象。

# php - 显示当前登录用户的个人资料

> ID：12103061
> 
> 赞同：0
> 
> 时间：2012-08-24T04:15:14.263
> 
> 标签：php, mysql

我一直在研究学生注册的代码。我完成了登录的编码。

我遇到的问题是在文本框中显示用户的个人资料： student 、`fname`、`lname`和`program`level 。我使用 MySQL 作为我的后端。`gender``year`

我的代码是这样的：

```
<?php 

// connects to the database
$mysqli = new mysqli("localhost", "root", "");

$query = 'SELECT fname, lname, program, gender, year FROM students WHERE fname =     '.$_SESSION['myusername'];
$mysqli->query($query);

echo "<div align=\"center\">";
echo "<br />Your <b><i>Profile</i></b> is as follows:<br />";
echo "<b>First name:</b> ". $_POST['fname'];
echo "<br /><b>Last name:</b> ".$_POST['lname'];
echo "<br /><b>Program:</b> ".$_POST['program'];
echo "<br /><b>Year:</b> ".$_POST['year'];
echo "<br /><b>Gender:</b> ".$_POST['gender'];
echo "</div>";
?> 
```

这是我的[mainstudent.php](http://pastebin.com/jEuXtArd)和[checklogin.php](http://pastebin.com/GH2UbGpJ)代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:23:20.533

干得好：

```
<?php 
session_start();

// connects to the database
$mysqli = new mysqli("localhost", "root", "");

$query = "SELECT fname, lname, program, gender, year FROM students WHERE fname = '".$_SESSION['myusername']."'";
if($result = $mysqli->query($query))
{
    while($row = $result->fetch_assoc())
    {
        echo "<div align=\"center\">";
        echo "<br />Your <b><i>Profile</i></b> is as follows:<br />";
        echo "<b>First name:</b> ". $row['fname'];
        echo "<br /><b>Last name:</b> ".$row['lname'];
        echo "<br /><b>Program:</b> ".$row['program'];
        echo "<br /><b>Year:</b> ".$row['year'];
        echo "<br /><b>Gender:</b> ".$row['gender'];
        echo "</div>"   
    }
    $result->free();
}
else
{
    echo "No results found";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:20:01.903

请在会话中添加您的密码

# mootools - Mootools Fx OnComplete 在动画完成之前触发？

> ID：12103065
> 
> 赞同：0
> 
> 时间：2012-08-24T04:15:40.037
> 
> 标签：mootools

我有一个使用 MooTools Fx.Tween 运行 Tween 动画的简单小提琴，我似乎无法在初始动画停止后触发 onComplete 选项。无论出于何种原因，它总是想在中间开火。我究竟做错了什么？

[小提琴](http://jsfiddle.net/nUWsU/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:28:58.857

看来你做对了。

我认为有一个问题（基本上，一个'冲突'..你可以使用 css 过渡或 js 动画，而不是一起使用）与`-webkit-transition: all 1s linear 0`inside `#bar`。通过评论/删除它，它可以正常工作-> [http://jsfiddle.net/vPuAR/](http://jsfiddle.net/vPuAR/)

# c# - 打印 Windbg 中所有数据表的所有 tableName

> ID：12103066
> 
> 赞同：2
> 
> 时间：2012-08-24T04:15:51.933
> 
> 标签：c#, debugging, windbg

我正在使用 Windbg 调试 ASP.NET Web 应用程序。

我正在按照这个过程打印表名：

```
!dumpheap -type System.Data.DataTable
!do 6bd27818 (DataTable MT)
as !ds .printf "%mu \n", c+
!ds 0bb93b44  (TableName) 
```

我还是windbg的新手，有没有列出所有数据表表名的脚本？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:33:34.793

解决了感谢[http://www.infinitec.de/post/2011/08/15/Windbg-Finding-a-specific-instance-of-a-managed-object-in-a-windows-process.aspx](http://www.infinitec.de/post/2011/08/15/Windbg-Finding-a-specific-instance-of-a-managed-object-in-a-windows-process.aspx)

```
.load C:\Program Files\DebugDiag\Exts\psscor2.dll

.foreach(entry {!dumpheap -type System.Data.DataTable -short}){.printf "%p: ", entry; du poi(${entry}+38)+c;.printf "\n"} 
```

38 来自下面：

!do 数据表地址

```
65675184  40007b2       34 ...ropertyCollection  0 instance 00000000 extendedProperties
0daf0b24  40007b3       **38**        System.String  0 instance 6bbd8de4 tableName 
```

# ruby-on-rails - 找不到 ImageMagick 版本 - rmagick 安装失败

> ID：12103078
> 
> 赞同：0
> 
> 时间：2012-08-24T04:17:38.963
> 
> 标签：ruby-on-rails, ruby, rake, redmine, rmagick

超级困惑和第一次 Ruby 用户......我已经安装了 rmagick，如下所示：

```
actionmailer (3.2.6)
actionpack (3.2.6)
activemodel (3.2.6)
activerecord (3.2.6)
activeresource (3.2.6)
activesupport (3.2.6)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.5)
cgi_multipart_eof_fix (2.5.0)
coderay (1.0.7)
erubis (2.7.0)
fastercsv (1.5.5)
gem_plugin (0.2.3)
hike (1.2.1)
i18n (0.6.0, 0.4.2)
journey (1.0.4)
json (1.7.5)
mail (2.4.4)
metaclass (0.0.1)
mime-types (1.19)
mocha (0.12.3)
mongrel (1.1.5 x86-mingw32)
mongrel_service (0.3.4 i386-mswin32)
multi_json (1.3.6)
mysql (2.8.1 x86-mingw32)
net-ldap (0.3.1)
pg (0.14.0 x86-mingw32)
polyglot (0.3.3)
prototype-rails (3.2.1)
rack (1.4.1)
rack-cache (1.2)
rack-openid (1.3.1)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.6)
railties (3.2.6)
rake (0.9.2.2)
rdoc (3.12)
rmagick (2.12.0 mswin32)
ruby-openid (2.1.8)
sprockets (2.1.3)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
win32-service (0.5.2 mswin32) 
```

但是当我运行**bundle install**时。它给了我这个输出。

```
Fetching gem metadata from http://rubygems.org/.......
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.6) 
Using activesupport (3.2.6) 
Using builder (3.0.0) 
Using activemodel (3.2.6) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.6) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.6) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.6) 
Using activeresource (3.2.6) 
Using bundler (1.1.5) 
Using coderay (1.0.7) 
Using fastercsv (1.5.5) 
Using json (1.7.5) 
Using metaclass (0.0.1) 
Using mocha (0.12.3) 
Using mysql (2.8.1) 
Using net-ldap (0.3.1) 
Using pg (0.14.0) 
Using rack-ssl (1.3.2) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.6) 
Using rails (3.2.6) 
Using prototype-rails (3.2.1) 
Using ruby-openid (2.1.8) 
Using rack-openid (1.3.1) 
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

C:/wamp/ruby/bin/ruby.exe extconf.rb 
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/wamp/ruby/bin/ruby

Gem files will remain installed in C:/wamp/ruby/lib/ruby/gems/1.8/gems/rmagick-2.13.1 for inspection.
Results logged to C:/wamp/ruby/lib/ruby/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

请注意，我正在尝试完成 redmine 安装，并且需要 rmagick 才能继续使用 rake。

我的 ruby​​ 版本是 1.8.7，rubygem 版本是 1.3.7。谢谢。

**更新：**

因此，在听说我现有的 rmagick 是旧版本后，我运行了：

```
gem uninstall rmagick 
```

并成功卸载了我现有的 gem。之后我再次尝试进行捆绑安装，但失败与以前完全相同。

然而，这一次我去了我的文件夹 (C:\wamp\ruby\lib\ruby\gems\1.8\gems\rmagick-2.13.1)，它说这些文件仍将被存储。在那里我运行了一个新版本

```
gem build rmagick.gemspec 
```

构建成功了，所以我认为我们正在取得进展。我跑了：

```
gem install rmagick-2.13.1.gem --platform=ruby -- --with-opt-lib=c:\ImageMagick\6.3.5-Q8\lib --with-opt-include=c:\ImageMagick\6.3.5-Q8\include 
```

并得到了这个输出（*请注意，我不再得到 Invalid Drive 但这与之前相同*）：

```
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/wamp/ruby/bin/ruby

Gem files will remain installed in C:/wamp/ruby/lib/ruby/gems/1.8/gems/rmagick-2.13.1 for inspection.
Results logged to C:/wamp/ruby/lib/ruby/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/gem_make.out 
```

所以现在我正在研究为什么它无法确定 ImageMagick 版本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:27:29.390

虽然这可能不能完全回答这个问题......作为一个新手用户，我很可能在某个时候让我的安装失败了。

回溯和卸载我之前安装的所有内容，然后按照[安装说明](http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_in_a_sub-URI_on_Windows_with_Apache#Install-Redmine)再次解决了这个问题。

请注意，这一次，即使在它说“虽然未来的版本也应该工作”的部分，我反而指定了在撰写本文时文章中提到的确切版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:20:54.450

有一个旧版本的 rmagick，虽然 bundler 尝试安装一个新版本。新版本的构建出了点问题。您应该检查日志文件以找出原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:37:44.207

ImageMagick 是一个本地库，RMagick 使用它来操作图像。您的 ImageMagick 安装似乎有问题，并且 RMagick 无法检测到您的环境中安装的 ImageMagick 版本。

在控制台上，当您键入“识别”时，您是否有应用程序的输出或只是找不到文件错误？

# android - 如何使用全局字符串数组变量填充微调器？

> ID：12103079
> 
> 赞同：-1
> 
> 时间：2012-08-24T04:17:41.340
> 
> 标签：android, spinner, arrays

我正在尝试填充一个微调器，但我的字符串数组出现错误，提示“数组常量只能在初始化程序中使用”。当我将字符串数组用作局部变量时，我的代码工作正常，但作为全局变量却不行。我真的需要能够将我的字符串数组用作全局变量。先感谢您。这是我的代码：

```
 deleteselection = (Spinner)view.findViewById(R.id.deletespinner);
    ArrayAdapter<String> adapterdeletetype;
    //createdenominationsarray = getResources().getStringArray(R.array.createdenominations); //<--works
    //String [] createdenominationsarray = {"Select Portfolio", "Two", "Three"}; //<--works
    createdenominationsarray = {"Select Portfolio", "Two", "Three"};// <--doesn'twork
    adapterdeletetype = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,createdenominationsarray){
            @Override
            public View getDropDownView(int position, View convertView, ViewGroup parent)
            {
                View v = null;

                // If this is the initial dummy entry, make it hidden
                if (position == 0) {
                    TextView tv = new TextView(getContext());
                    tv.setHeight(0);
                    tv.setVisibility(View.GONE);
                    v = tv;
                }
                else {
                    // Pass convertView as null to prevent reuse of special case views
                    v = super.getDropDownView(position, null, parent);
                }

                // Hide scroll bar because it appears sometimes unnecessarily, this does not prevent scrolling 
                parent.setVerticalScrollBarEnabled(false);
                return v;
            }
        };      
    adapterdeletetype.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    denominationselection.setAdapter(adapterdeletetype); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:40:31.043

我为我的一个项目做了同样的事情，它对我有用。以下是供您参考的代码片段..

```
ArrayList<String> languages = new ArrayList<String>();
languages.add("English");
languages.add("German");
languages.add("French");
ArrayAdapter<String> langAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,languages);
ListView lv =(ListView)findViewById(R.id.listmain);
lv.setAdapter(langAdapter);
lv.setOnItemClickListener(new listclklisten(MainActivity.this));

public class listclklisten implements OnItemClickListener{
        private Context parent;
        public listclklisten(Context p){
            parent=p;
        }
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TO DO your code here

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:07:30.180

里面`string.xml`写：

```
 <string-array name="spinner_array_environtment">
        <item>Test</item>
        <item>Production</item>
    </string-array> 
```

在你的 MainActivity.java 里面：

```
public class MainActivity extends Activity {
Spinner spinner_environment;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                spinner_environment = (Spinner) findViewById(R.id.spinnerview);
adapter =ArrayAdapter.createFromResource(this,              R.array.spinner_array_environtment,R.layout.spinner_phone);
            adapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
            spinner_environment.setAdapter(adapter);
} 
```

在 spinner_phone.xml 里面：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinnerTarget"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="13dp"
    android:textColor="#4C4646" /> 
```

试试这个。希望它会帮助你。

# ios - 替换 CGBitmapContext 中的特定颜色

> ID：12103083
> 
> 赞同：3
> 
> 时间：2012-08-24T04:18:31.250
> 
> 标签：ios, colors, cgcontext, cgcontextref, cgbitmapcontext

如何替换`CGBitmapContext`已经绘制的特定颜色（RGB 值）？

有什么简单的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T04:58:53.513

您将希望通过执行以下操作获得指向像素的指针和有关其格式的信息：

```
// This assumes the data is RGBA format, 8-bits per channel. 
// You'll need to verify that by calling CGBitmapContextGetBitsPerPixel (), etc.
typedef struct RGBA8 {
    UInt8 red;
    UInt8 green;
    UInt8 blue;
    UInt8 alpha;
} RGBA8;

RGBA8* pixels = CGBitmapContextGetData (context);
UInt32 height = CGBitmapContextGetHeight (context);
UInt32 width = CGBitmapContextGetWidth (context);
UInt32 rowBytes = CGBitmapContextGetBytesPerRow (context);
UInt32 x, y;
for (y = 0; y < height; y++)
{
    RGBA8* currentRow = (RGBA8*)((UInt8*)pixels + y * rowBytes);
    for (x = 0; x < width; x++)
    {
        if ((currentRow->red == replaceRed) && (currentRow->green == replaceGreen) &&
            (currentRow->blue == replaceBlue) && (currentRow->alpha == replaceAlpha))
        {
            currentRow->red = newRed;
            currentRow->green = newGreen;
            currentRow->blue = newBlue;
            currentRow->alpha = newAlpha;
        }
        currentRow++;
    }
} 
```

# asp.net-mvc - 传递值以在 Asp.net MVC3 中查看

> ID：12103086
> 
> 赞同：0
> 
> 时间：2012-08-24T04:19:20.330
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-mvc-viewmodel

我有两张表日期和歌曲。其中 DateId 是 Song 表的外键。

```
 - Date:
   DateId
   Date
 - Song:
   SongId
   DateId
   Title 
```

这是功能：

```
public ActionResult Index()
        {            
            var song = db.TopSongs;
            var model = db.Dates;
            var latestDate = model.OrderByDescending(d => d.Date).FirstOrDefault();
            return View(latestDate);
        } 
```

我需要显示： `Date SongId Title`在视图中。但返回视图只采用一个参数。有没有办法将两个表数据都传递给查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:22:41.920

有两种选择：

1.  使用`ViewBag`

    ```
    ViewBag.song = db.TopSongs;
    ViewBag.model = db.Dates
    ViewBag.latestDate = model.OrderByDescending(d => d.Date).FirstOrDefault(); 
    ```

2.  创建一个包含您需要的信息的新类，并返回它（即 a `view model`）。

请注意，*2*是首选选项，因为它允许您保持强类型（`ViewBag`使用*动态*类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:26:29.380

您需要创建一个“视图模型”；

```
public class ViewModel
{
    public int SongId { get; set; }
    public DateTime Date { get; set; }
    public string Title { get; set; }
    //More properties that are needed in View
} 
```

然后填充这个；

```
var viewModel = new List<ViewModel> { //Populate code here }; 
```

并将这个填充的视图模型传递给视图

```
return (viewModel); 
```

并在视图本身中对此进行引用；

```
@model IEnumerable<ViewModel> 
```

最后，在 View 中显示；

```
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Title)
        </td>
    </tr>
} 
```

请注意，您的视图模型的实际属性会有所不同，上面的代码只是为了展示您如何实现这一点。

# c# - 使用 windows 应用程序在 c#.net 中动态更改字体类型

> ID：12103088
> 
> 赞同：0
> 
> 时间：2012-08-24T04:19:50.217
> 
> 标签：c#, fonts

我有两个单选按钮：`Marathi`和`English`。

在任何一个我想更改文本框的字体的选中事件上。

我尝试了以下代码，但它不起作用：

```
txtPublisherName.font.fontfamily.equals("Elephant") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:25:44.477

`.Equals`是一个比较。它只是返回一个布尔值，并没有设置值。

您需要为您想要的字体创建一个新的 Font 对象（例如`Font font1 = new Font("Arial", 20);`从[这里](http://msdn.microsoft.com/en-us/library/164w6x6z.aspx)）并执行`txtPublisherName.Font = newFont`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:28:59.890

通过这样做，您正在检查 txtPublisherName 文本框当前字体是否为“大象”？

你可以试试这个方法

```
 textBox1.Font = new Font("Calibre", 20); 
```

# sql-server-2008 - SQL Server 代理无法识别隐藏的 Windows 文件共享

> ID：12103093
> 
> 赞同：0
> 
> 时间：2012-08-24T04:20:23.283
> 
> 标签：sql-server-2008, ssis

我正在使用 SSIS 包从安全的 Unix 服务器获取文本文件。ftp 包中的步骤之一是使用平面文件连接将文件发送到 Windows 文件共享。我使用完整路径名指定了连接：\\servername\foldername\filename。

该软件包在我的开发机器上运行良好；但是，当包在 SQL Server 代理下作为服务运行时，我遇到了问题。这就是它必须在测试和生产中运行的方式。该服务已被授予对服务器和文件夹的权限，但由于该文件夹是一个隐藏文件夹，因此它附加了一个 $。

所以平面文件连接的实际连接字符串是：\\servername\foldername$\filename。

美元符号是否会导致 SQL Server 代理出现问题？

我的想法不多了，我几乎用尽了我在互联网上的搜索。Stack Overflow 永远是我最后的选择。我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:03:44.747

这个问题已被解决。没有问题。

该作业的权限不足。网络管理员告诉我们他们已经处理好了，但在我们排除了其他一切之后，他们再次检查。

# magento - 在 Magento 中将静态块显示为弹出窗口

> ID：12103096
> 
> 赞同：3
> 
> 时间：2012-08-24T04:20:38.940
> 
> 标签：magento

我正在尝试在 Magento 中将静态块显示为弹出窗口，但似乎无法使代码正常工作。

我在互联网上的各个地方找到了似乎与我想要的相当接近的代码，但我无法得到任何结果。我已经使用基本代码将“顶部链接”返回到我的网站，所以我知道基本的工作。

我`delpopup.php`在我的 Magento 根文件夹中创建了一个脚本并输入了以下代码：

```
<?php
require_once('app/Mage.php');
umask(0);

$layout = Mage::app()
    ->getLayout();

$layout
    ->getUpdate()
    ->addHandle('default')
    ->load();

$layout
    ->generateXml()
    ->generateBlocks();

echo '<p>before</p>';

echo $layout
    ->createBlock('cms/block')
    ->setBlockId('delivery-info')
    ->toHtml();

echo '<p>after</p>';
?> 
```

不幸的是，代码没有显示静态块。输出的那部分是空白的。

我的想法是我可以在 Magento 的常规页面中放置一个链接，然后弹出我的交付。像这样：

```
<a title="" onclick="popWin('http://www.mysite.com.au/delpopup.php', 'deliveryinfo', 'width=300,height=300,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes'); return false;" href="#">Delivery Info</a> 
```

基本上我希望能够在使用我的 Magento 网站主题的弹出窗口中显示一个静态块。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:06:10.040

正如我所想，问题在于不正确的`Block Id`. 现在可以显示 cms 了。

所以现在的问题是：如何让主题工作？

不太确定主题是什么意思，如果您的意思是`<default>`标签中包含的 css，您可以使用：

`Mage::getDesign()->setTheme('your theme');`

`echo $layout->getBlock('head')->toHtml();`

xml生成完成后，这意味着将代码放在后面：

```
$layout
    ->generateXml()
    ->generateBlocks(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:38:20.327

我首先设置一个控制器和块来呈现您想要在弹出窗口中抛出的布局类型。因此，不要在独立的 php 文件中执行此操作，而是在特定控制器操作中的常规法师框架中执行此操作。

然后，一旦你有这个工作 - 问题是如何将它拉到弹出窗口中。我可能会选择一个不错的 jquery 弹出窗口小部件，它允许您指定要点击的 URL - 然后只需传入您为上面的步骤 1 准备的那个。

您可能想寻找`adminhtml/default/default/template/popup.phtml`灵感。这实际上是管理员的弹出模板，而不是前端，但你可以看到他们做了什么。

他们正在引入一些标准的 magento 块`head`，包括应该引入所有 CSS 和 JS 的块，以便为您提供前端的一般配色方案/外观，但没有所有导航等。

# azure-table-storage - Azure 表存储按行键性能选择

> ID：12103105
> 
> 赞同：2
> 
> 时间：2012-08-24T04:21:56.743
> 
> 标签：azure-table-storage

假设我有 2k 个分区。IE 2k 不同的分区键。所有分区都有 3 个 guid 行键。

为了显示：

分区 1 - Guid 1(rowkey) - Guid 2(rowkey) - Guid 3(rowkey)

分区 2 - Guid 4(rowkey) - Guid 5(rowkey) - Guid 6(rowkey)

……等等等等。

如果我要查询所有分区的确切 guid。我会查看什么样的查询性能？直接检索或表扫描？

更多背景信息。我打算有以下架构：

UserEntity
分区键 - 用户 Guid
行键 - 用户名

OpenIdEntity
分区键 - 用户 Guid（与 UserEntity 相同）
行键 - OpenId

现在，当用户登录时，我需要 1）找到打开的 ID（在此处选择具有 1 个不同行键的记录，无论分区如何） 2）找到用户名。（选择具有 1 个不同分区键的记录。对属性或其他内容进行表扫描。由于分区键已知且分区很小，因此表扫描的影响应该是最小的）

如果 Azure 表存储扫描整个表以找到 1 个不同的行键，我担心第 1 步会很慢。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T03:29:00.263

你的担心是有道理的。“所有具有 RowKey X 的实体”形式的查询将导致全表扫描。

如果您知道您正在使用的分区键集，则可以发出*n 个*并行查询（每个分区一个）。例如，“所有具有 PartitionKey 1 和 RowKey X 的实体”、“所有具有 PartitionKey 2 和 RowKey X 的实体”等。并行发出这些将意味着您正在进行*n*次直接查找，这通常比表扫描快得多.

# php - 在树登录页面中不显示错误消息

> ID：12103107
> 
> 赞同：0
> 
> 时间：2012-08-24T04:22:16.197
> 
> 标签：php

我有一个树登录页面作为我在调查中的第一页。问题是，如果用户没有选择任何节点并单击下一步按钮，他将被重定向到同一页面。问题是他没有收到任何错误信息。

我希望用户收到一条错误消息“请选择一个组”请查看以下执行此操作的代码

（PS 检查 Display() 函数）

纠正我哪里出错了

```
<?php
/**
 *  File:  TreeLoginWidget.php
 *
 *
 *  Purpose: display tree page.
 *
 *  Dependents:   none
 *
 *  Dependencies: SurveyItem
 *
 *  Classes:
 *    1\. PinWidget
 *
 *  Interface/public functions:
 *
 *  Notes: ???
 *
 * Todo: none
 *
**/

class DisplayTreeLoginWidget extends DisplayItem
{

    function DisplayTreeLoginWidget(& $sourceObj)
    {
        // debug
        if( $pDebugTraceFlag == _ID_FLAG_ON ) GDebugTraceFunc( __CLASS__." :: ".__FUNCTION__ );
        $this->node = 0;
        $surveywidget = getDataFromSession("surveywidget");
        DisplayItem::DisplayItem();
        $_SESSION["profile"]["rootNode"]=0;
        if($_GET["nodeId"]) {
            setDataToSession("postVar","");
        }
        $this->sourceObj =& $sourceObj;
    }

    /**
     * Purpose: display pin page label text
     *
     * Input Params:   none
     *
     * Output Params:  none
     *
     * Return Value:   none
     *
     * Notes:
    */

    function display()
    {
        global $skin_path,$skin,$path;
        setDataToSession("skipPage", 0);
        setDataToSession('HideSave&Resume',0);
        $currentPageNumber = currentPageNumber();
        if($currentPageNumber!=1) {
            setDataToSession('HideSave&Resume',1);
        }

        echo "<script type=\"text/javascript\" src=\"".$path."../lib/java/commonFuncs.js\"></script>";

        // include the header
        include_once ("../lib/include/path.inc.php");
        include_once ("../lib/include/jshelper.php");
        include_once("display/tree.inc.php");
        include_once("display/commonTreeLayout.php");
        include_once ("../lib/include/commonTreeCode.php");

        setUpTreeAppProperty();
        $postVar = getDataFromSession("postVar");

        if(is_array($postVar)) {
            $_POST = $postVar;
        }

        if($this->sourceObj->displayType == "expanded") {
            $postVar["Expand_All"] = "Expand All";
            $this->sourceObj->displayType = "";
        }
        if($this->sourceObj->levelShowing != "") {
            setDataToSession("levelShowing",$this->sourceObj->levelShowing);
        }

        setUpElist($postVar, $_GET);
        $verifiedStartingNode = getTreeStartingNode();

        /** $matchedIdArr contains matched nodeIds or empty if no matches found/no search performed */
        $matchedIdArr = doSearch($verifiedStartingNode, $postVar);
        $eList = getEList();

        $Tree = new TreeWithRadioButton($this->sourceObj);

        $Tree->reSetupElist();

        $startingNode = &$Tree->nodesArr[$verifiedStartingNode];
        echo "<div class=\"body2 IE6trans\">";

        displaySearchTable();

        if(!$postVar["searchSubmit"]) {
            $matchedIdArr = array(getDataFromSession("data,node_id"));
        }

        displayTree('Search Organization Structure', '', '', $startingNode, $eList, $matchedIdArr, $maxDepth, get_path_prefix(),$this->sourceObj->_errorMsg,$this->sourceObj->_prompt);

        echo "<script type=\"text/javascript\">";
        echo "$(document).ready(function () { $('input[name=\"wildText\"]').keyup(function(event){  if(event.keyCode == 13){ $('input[name=\"searchSubmit\"]').click(); } }); });";
        echo "</script>";

        echo "</div>";
    }

    /**
     * Purpose:  storing error message to _errorMsg
     *
     * Input Params:   none
     *
     * Output Params:  none
     *
     * Return Value:   Boolean - true or false
     *
     * Notes:
    */

    function validate()
    {
        // debug
        if( $pDebugTraceFlag == _ID_FLAG_ON ) GDebugTraceFunc( __CLASS__." :: ".__FUNCTION__ );     
        $surveywidget = getDataFromSession('surveywidget');
        $this->getPostData();
        $this->sourceObj->_errorMsg = "";
        $lastVisitedWidgetOid_Tree = getDataFromSession("lastVisitedWidgetOid_Tree");       
        setDataToSession("lastVisitedWidgetOid" , $lastVisitedWidgetOid_Tree);

        setLoginUserLanguage($this->node);

      $operations = ((strcmp($this->operation,getText2($surveywidget->saveResumeButtonText)) == 0)||
                                    (strcmp($this->operation,getText2($surveywidget->backButtonText)) == 0)||
                                    (strcmp($this->operation,getText2($surveywidget->nextButtonText)) == 0));

        if(($operations) && ($this->node != ""))    {
            setDataToSession("data,node_id",$this->node);

            // used to track the node id assigned to this pin when more than one login is used
            setDataToSession("tree_login,node_id",$this->node);
            setDataToSession("tree_login_before_saveresume,node_id",$this->node);

            //Custom - 
            $oids = getListOfOidAndNodes(Array($this->node));
            $_SESSION["conditionNodeList"] = $oids;
            //End Custom

            if(!getDataFromSession('multiLoginIndex')) {
                $multiLoginIndex = 1;
            } else {
                $multiLoginIndex = getDataFromSession('multiLoginIndex');
            }
            $multiLoginIndex++;
            setDataToSession("multiLoginIndex",$multiLoginIndex);

            $this->sourceObj->_errorMsg = "";
        } else if(($operations) && ($this->node == "")){
            $this->sourceObj->_errorMsg = "Please select a group";
            return false;
        } else {
            return false;
        }

        if($this->node == "") {
            $this->node = 0;
        }
        // user click save&resume before visiting login page, we are redirecting to login page, That time user enter invalid node_id we are mainting save&resume flag to 1 for displaying submitbutton(it act like as save&resume)
        if(getDataFromSession('save&resumeflag') == 1) {
            setDataToSession('save&resumeloginpage',1);
        }

        return true;
    }

    /**
     * Purpose: get post data
     *
     * Input Params:   none
     *
     * Output Params:  none
     *
     * Return Value:   none
     *
     * Notes:
    */

    function getPostData()
    {
        // debug
        if( $pDebugTraceFlag == _ID_FLAG_ON ) GDebugTraceFunc( __CLASS__." :: ".__FUNCTION__ );
        $postVar["exactText"] =    (empty($_REQUEST["exactText"])==1)    ?""      :stripslashes($_REQUEST["exactText"]);
        $postVar["wildText"] =     (empty($_REQUEST["wildText"])==1)     ?""      :stripslashes($_REQUEST["wildText"]);
        $postVar["searchSubmit"] = (empty($_REQUEST["searchSubmit"])==1) ?""        :$_REQUEST["searchSubmit"];
        $postVar["Collapse_All"] = (empty($_REQUEST["Collapse_All"])==1) ?""        :$_REQUEST["Collapse_All"];
        $postVar["idText"] =       (empty($_REQUEST["idText"])==1)       ?""      :$_REQUEST["idText"];
        $postVar["node"] =         (empty($_REQUEST["node"])==1)         ?""      :$_REQUEST["node"];
        $this->node =              ($_REQUEST["node"] == "")             ?""      :$_REQUEST["node"];
        $this->operation =         (empty($_REQUEST["Operation"])==1)    ?""      :$_REQUEST["Operation"];

        if($postVar["Collapse_All"]) {
            $postVar["wildText"] = "";
        }

        setDataToSession('postVar',$postVar);
        setDataToSession('Operation',$this->operation);
        setDataToSession('node',$this->node);
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:25:58.523

你的代码很长，我没看。

但是执行此操作的典型方法是传递一个 url 参数，如果该参数存在，则将其作为消息打印出来。

# android - Android猴子导致本机库中的应用程序无响应

> ID：12103108
> 
> 赞同：1
> 
> 时间：2012-08-24T04:22:27.540
> 
> 标签：android, android-monkey

我在跑步时得到这个`monkey -v -p package.name --throttle 1 --pct-syskeys 0 100000`。

我想这不是我自己的代码？它似乎是Android的绘图代码。果冻豆 4.1.1。

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0)

"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x41a5b568 self=0x41a4b9f8
  | sysTid=20523 nice=0 sched=0/0 cgrp=apps handle=1074767408
  | schedstat=( 0 0 0 ) utm=1189 stm=194 core=0
  #00  pc 0000dc70  /system/lib/libc.so (__futex_syscall3+8)
  #01  pc 00012bd4  /system/lib/libc.so (__pthread_cond_timedwait_relative+48)
  #02  pc 00012c30  /system/lib/libc.so (__pthread_cond_timedwait+60)
  #03  pc 00052bb5  /system/lib/libdvm.so (dvmChangeStatus(Thread*, ThreadStatus
)+68)
  #04  pc 0004ce7b  /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+398)
  #05  pc 00027260  /system/lib/libdvm.so
  #06  pc 0002bb38  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
  #07  pc 0005f877  /system/lib/libdvm.so (dvmInvokeMethod(Object*, Method const*, ArrayObject*, ArrayObject*, ClassObject*, bool)+374)
  #08  pc 00066d4d  /system/lib/libdvm.so
  #09  pc 00027260  /system/lib/libdvm.so
  #10  pc 0002bb38  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
  #13  pc 0004698d  /system/lib/libandroid_runtime.so
  #14  pc 0004746f  /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, char const*)+390)
  #15  pc 00000dcf  /system/bin/app_process
  #16  pc 00016eab  /system/lib/libc.so (__libc_init+38)
  #17  pc 00000b34  /system/bin/app_process
  at android.view.Surface.unlockCanvasAndPost(Native Method)
  at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2267)
  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2151)
  at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2019)
  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1830)
  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
  at android.view.Choreographer.doFrame(Choreographer.java:525)
  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
  at android.os.Handler.handleCallback(Handler.java:615)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4745)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
  at dalvik.system.NativeStart.main(Native Method) 
```

# ios - 如何检查访问令牌是否仍然有效？

> ID：12103109
> 
> 赞同：1
> 
> 时间：2012-08-24T04:22:30.207
> 
> 标签：ios, asynchronous, afnetworking

我对 ios dev 有点陌生，如果用户已经获得访问令牌的授权，我正在尝试禁用按钮。我只是不知道是否有一种干净的方法。现在我在我的 viewWillAppear 中有一个检查，它调用 api 客户端对象 isAuthorized: 返回一个布尔值并将按钮的启用设置为是/否。在 isAuthorized 中，如果存在访问令牌，我会发出一个测试 http 请求，但由于我必须等待完成块，因此时间已关闭，并且按钮在不应该时被禁用。我应该设置一个 NSNotification 还是应该只在 viewWillAppear 而不是在客户端中发出测试 http 请求？还是有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:35:41.827

首先，您的视图控制器只与“客户端”对象对话并且客户端对象与服务器对话，这很好。这才是正确的布局。现在如何设计 UI 部分：

*   您的客户对象需要一种“我的授权是最新的吗？”的内在感觉。这可能意味着它检查过一次，或者在最后 X 分钟内检查过。取决于你的情况。

*   当您调用 时`isAuthorized`，如果身份验证不是最新的，您会立即返回`NO`并提出请求。

*   当请求进来时，您调用`setAuthorized:`，它将发布 KVO 通知。

*   您的视图控制器 KVO 会根据需要观察`isAuthorized`并更新按钮。（或者，您可以使用委托方法或通知。）

如果您想区分“未授权”和“我不知道”，只需创建一个 3 选项枚举和一个方法`authorizationState`，而不是`isAuthorized`.

# ruby-on-rails - 正确安装后 RVM 无法正常工作？

> ID：12103113
> 
> 赞同：2
> 
> 时间：2012-08-24T04:22:49.967
> 
> 标签：ruby-on-rails, macos, path, rvm, .bash-profile

好的，所以我之前有 RVM 工作，但在升级到 Mountain Lion 之后，它似乎消失了？所以我尝试重新安装它：

```
Ayman$ curl -L https://get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0    200      0 --:--:-- --:--:-- --:--:--   755
100  9979  100  9979    0     0   5911      0  0:00:01  0:00:01 --:--:--  5911  
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100   125  100   125    0     0     67      0  0:00:01  0:00:01 --:--:--   102
100 1047k  100 1047k    0     0   159k      0  0:00:06  0:00:06 --:--:--  245k

Upgrading the RVM installation in /Users/Ayman/.rvm/
RVM PATH line found in /Users/Ayman/.zshrc.
RVM sourcing line found in /Users/Ayman/.zlogin.

Upgrade Notes:

  * No new notes to display.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm/
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues read output of 'rvm requirements' and/or 'rvm notes'

Upgrade of RVM in /Users/Ayman/.rvm/ is complete.

# Ayman ####,
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne

rvm 1.15.5 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis    <mpapis@gmail.com> [https://rvm.io/] 
```

应该安装对吗？应该准备好了，但是...

```
Ayman$ which rvm
Ayman$ rvm requirements
-bash: rvm: command not found
Ayman$ rvm use 1.9.2 --default
-bash: rvm: command not found 
```

现在确定该怎么做？查看了我的 .bash_profile 和 .bashrc 以了解其中的内容：

```
Ayman$ ls -la
total 136
drwxr-xr-x+ 26 Ayman  staff    884 Aug 23 20:44 .
drwxr-xr-x   6 root   admin    204 Aug  8 19:27 ..
-rw-------   1 Ayman  staff      3 Jun 16 15:21 .CFUserTextEncoding
-rw-r--r--@  1 Ayman  staff  21508 Aug 23 08:03 .DS_Store
drwx------  10 Ayman  staff    340 Aug 23 07:57 .Trash
-rw-------   1 Ayman  staff   9089 Aug 23 20:47 .bash_history
-rw-r--r--   1 Ayman  staff    106 Aug 22 21:17 .bash_profile
-rw-r--r--   1 Ayman  staff     24 Aug 23 20:47 .bashrc
drwxr-xr-x   3 Ayman  staff    102 Aug 21 20:41 .bundler
drwxr-xr-x   3 Ayman  staff    102 Jun 24 21:45 .gem
-rw-r--r--   1 root   staff    155 Aug 21 22:52 .gemrc
-rw-r--r--   1 Ayman  staff     61 Aug 21 19:40 .gitconfig
-rw-r--r--   1 Ayman  staff     14 Aug 23 08:14 .irb_history
-rw-------   1 Ayman  staff   2415 Aug 23 20:44 .mysql_history
drwxr-xr-x  29 Ayman  staff    986 Aug 23 20:58 .rvm
-rw-r--r--   1 Ayman  staff    118 Jun 24 21:25 .zlogin
-rw-r--r--   1 Ayman  staff     59 Jun 24 21:25 .zshrc
drwx------+ 18 Ayman  staff    612 Aug 23 08:02 Desktop
drwx------+  5 Ayman  staff    170 Jun 24 23:04 Documents
drwx------+ 19 Ayman  staff    646 Aug 22 21:05 Downloads
drwx------@ 47 Ayman  staff   1598 Aug  9 22:30 Library
drwx------+  3 Ayman  staff    102 Jun 16 15:21 Movies
drwx------+  5 Ayman  staff    170 Jun 24 23:05 Music
drwx------+ 57 Ayman  staff   1938 Aug 19 22:40 Pictures
drwxr-xr-x+  5 Ayman  staff    170 Jun 16 15:21 Public
drwxr-xr-x   5 Ayman  staff    170 Aug 23 07:57 Sites 
```

这是我的纳米 .bashprofile：

```
PS1="\u$ "
alias ll="ls -lahG"

export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:$PATH" 
```

这是我的 nano .bashrc （我根据另一个 stackoverflow 答案中的说明更改了它）：

```
PATH=$PATH:~/.rvm/bin 
```

关于下一步要尝试什么的任何线索？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:08:14.477

强制更新 rc 文件：

```
curl -L https://get.rvm.io | bash -s stable --auto-dotfiles 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T04:44:39.013

Mac OS 在创建新终端时运行 .bash_profile 但不运行 .bash_rc。将那些 PATH 的东西移动到 .bash_profile 并再次运行。

至于你的第二个问题，似乎你在 PATH 中添加了错误的东西。将以下内容添加到 .bash_profile 中：

```
PATH=$PATH:$HOME/.rvm/scripts # Add RVM to PATH for scripting
. rvm > /dev/null 
```

# vim - 是否可以使用 = 使用 VIM 命令？

> ID：12103115
> 
> 赞同：0
> 
> 时间：2012-08-24T04:22:57.453
> 
> 标签：vim

我有以下内容：

```
map  <F6> :SCCompile<cr>
map! <F6> <c-r>=SingleCompile#Compile()<cr> 
```

我也想`:SCCompile`在第二个映射中使用，可以吗？

目前我有另一个我真的不想包含在函数调用中的命令。我`<c-r>=`在插入模式下使用，因为它不会创建撤消点，并且除了这个限制之外它的效果很好。

我试过[执行](https://stackoverflow.com/questions/7597249/vim-script-how-to-execute-a-command-in-a-vim-function)，但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:59:46.757

You can do something like this:

```
map  <F6> :SCCompile<cr>
map! <F6> <c-r>=feedkeys("<c-o>:SCCompile\<lt>cr>")?'':''<cr> 
```

The command isn't the simplest:

*   here we ask Vim to execute some keys after leaving `<c-r>=`
*   use `<lt>` to allow expanding of `<cr>` in command-line mode instead of in `<c-r>=`
*   use `?:` operator to ignore value returned by `feedkeys()` function

See `:help feedkeys()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:28:18.077

您可以基于我对您最近[类似问题](https://stackoverflow.com/questions/11686210/vim-single-compile-command-from-insert-mode)的回答。这是完全相同的问题：就像`:call`，自定义 Vim 命令不返回任何内容，但`<C-R>`需要一个返回内容的表达式：

```
function! SingleCompileWrapper()
    SCCompile
    return ''
endfunction

map! <F6> <C-R>=SingleCompileWrapper()<CR> 
```

# java - JDK 中的命名约定：java.lang.Throwable

> ID：12103124
> 
> 赞同：2
> 
> 时间：2012-08-24T04:24:54.113
> 
> 标签：java

Java 中的所有接口（如`Serializable, Cloneable, Observable`etc）都以“-able”为后缀。但是，`java.lang.Throwable`不是接口而是类。

我理解的用法，`java.lang.Throwable`但我不明白为什么它以这种方式命名。这种异常是否有特定原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:13:24.927

Sun 的前副总裁兼 Java 的主要架构师 James Gosling[对互联网垃圾箱的](http://wayback.archive.org/web/jsp/Interstitial.jsp?seconds=5&date=1192316296000&url=http://java.sun.com/features/2002/03/gosling.html?source=jdc_news&date=20020430&target=http://web.archive.org/web/20071013225816/http://java.sun.com/features/2002/03/gosling.html?source=jdc_news&date=20020430)采访解释了为什么决定让 Throwable 成为一个类而不是一个接口。主要原因是因为 throwables 需要跟踪*状态*：

```
JDC: Why is Throwable not an interface? The name kind of suggests it should have been.  
Being able to catch for types, that is, something like try{}catch (<some interface or 
class>), instead of only classes. That would make [the] Java [programming language] 
much more flexible.

JG: The reason that the Throwable and the rest of those guys are not interfaces is 
because we decided, or I decided fairly early on. I decided that I wanted to have some 
state associated with every exception that gets thrown. And you can't do that with 
interfaces; you can only do that with classes. The state that's there is basically 
standard. There's a message, there's a snapshot, stuff like that — that's always there.    
and also, if you make Throwable an interface the temptation is to assign, to make any 
old object be a Throwable thing. It feels stylistically that throwing general objects 
is probably a bad idea, that the things you want to throw really ought to be things 
that are intended to be exceptions that really capture the nature of the exception and 
what went on. They're not just general data structures. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:29:41.473

> Throwable 类是 Java 语言中所有错误和异常的超类。只有作为此类（或其子类之一）的实例的对象才会被 Java 虚拟机抛出或者可以被 Java throw 语句抛出。同样，只有此类或其子类之一可以是 catch 子句中的参数类型。

它包含所有*可以抛出的东西，*就像接口/抽象类所做的那样。我想这应该是有`-able`后缀背后的逻辑。虽然这不是一个争论点……但一般来说，您不应该假设任何`able`以接口结尾的东西。

**更新**
现实生活中的另一个例子是在我的一个项目中......我必须制作一个（抽象的）超类，它的子类可以被缓存（在 MemcacheD 中）。它抽象了添加、删除、更新缓存所需的所有逻辑。给它取个好听的名字是什么？我命名它`Cacheable`。这个想法是，如果它是`Cacheable`，它将被缓存。

所以，这只是语义——与命名模式无关。这里给出了 Java 唯一的命名模式：[Java Naming Convention](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

# android-layout - android程序没有在eclipse上运行

> ID：12103125
> 
> 赞同：0
> 
> 时间：2012-08-24T04:24:54.140
> 
> 标签：android-layout

我是android的新手，我下载了一个源代码，但它没有运行任何人都可以帮助我。没有我的交叉签名，但我的程序也没有运行，我无法知道 logcat 的错误输出这是我的主要活动代码

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       TextView JsonSrc = (TextView)findViewById(R.id.json_src);
       TextView JsonResult = (TextView)findViewById(R.id.json_result);
       /*
        * JSON:
        * {"id":12,"name":12,"status":"ok","volumes":[{"id":17592,"name":"root","status":"ok"}]}
        */
       final String customJSON = "{\"id\":12,\"name\":12,\"status\":\"ok\",\"volumes\":[{\"id\":17592,\"name\":\"root\",\"status\":\"ok\"}]}";
       JsonSrc.setText(customJSON);
       try {
   JSONObject jsonObject = new JSONObject(customJSON);
   String myId = jsonObject.getString("id");
   String myName = jsonObject.getString("name");
   String myStatus = jsonObject.getString("status");
   String stringJsonResult = "id: " + myId + "\n"
        + "name: " + myName + "\n"
        + "status: " + myStatus;

   JSONArray jsonArray = jsonObject.getJSONArray("volumes");
   JSONObject arrayElement_0 = jsonArray.getJSONObject(0);
   String ele0_id = arrayElement_0.getString("id");
   String ele0_name = arrayElement_0.getString("name");
   String ele0_status = arrayElement_0.getString("status");
   stringJsonResult += "\n\nArray Element 0 - \n"
        + "id: " + ele0_id + "\n"
        + "name: " + ele0_name + "\n"
        + "status: " + ele0_status;

   JsonResult.setText("\n" + stringJsonResult);

  } catch (JSONException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();
  }
   }
} 
```

这是我的 logcat 输出

```
08-24 10:01:56.662: E/AndroidRuntime(798): java.lang.RuntimeException: Unable to start  activityComponentInfo{com.mokshya.androidparse/com.mokshya.androidparse.MainActivity}: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.view.ViewGroup 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:03:32.127

`java.lang.ClassCastException: android.widget.TextView cannot be cast to android.view.ViewGroup`

这应该给你一些开始调查的东西。

此错误意味着某处类型的对象`TextView`被强制转换为 type `ViewGroup`。从您发布的代码中，我看不到任何此类问题。可能是您的`activity_main.xml`. 我希望你的根标签是 *Layout 类型的。

# java - 到底什么是“不允许自我抑制”，为什么 Javac 会生成导致此错误的代码？

> ID：12103126
> 
> 赞同：15
> 
> 时间：2012-08-24T04:24:54.857
> 
> 标签：java, exception, java-7, try-with-resources

这个新的 Java 7 try-with-resources 结构非常好。或者至少，在一个例外出现并毁了我的一天之前，这*很好*。

我终于设法将它归结为一个可重复的测试，它只使用 JUnit+jMock。

```
@Test
public void testAddSuppressedIssue() throws Exception {
    Mockery mockery = new Mockery();
    final Dependency dependency = mockery.mock(Dependency.class);

    mockery.checking(new Expectations() {{
        allowing(dependency).expectedCall();
        allowing(dependency).close();
    }});

    try (DependencyUser user = new DependencyUser(dependency)) {
        user.doStuff();
    }
}

// A class we're testing.
private static class DependencyUser implements Closeable {
    private final Dependency dependency;

    private DependencyUser(Dependency dependency) {
        this.dependency = dependency;
    }

    public void doStuff() {
        dependency.unexpectedCall(); // bug
    }

    @Override
    public void close() throws IOException {
        dependency.close();
    }
}

// Interface for its dependent component.
private static interface Dependency extends Closeable {
    void expectedCall();
    void unexpectedCall();
} 
```

运行这个例子，我得到：

```
java.lang.IllegalArgumentException: Self-suppression not permitted
    at java.lang.Throwable.addSuppressed(Throwable.java:1042)
    at com.acme.Java7FeaturesTest.testTryWithResources(Java7FeaturesTest.java:35) 
```

阅读文档，他们似乎在说，如果您要向自身添加一个抑制的异常，那就是触发此错误的原因。但*我*没有这样做，*我*只是在使用 try-with-resources 块。*Java 编译器*然后生成看似非法的代码，这使得该功能实际上无法使用。

当然，当测试通过时，不会出现问题。而当测试失败时，就会发生异常。所以现在我已经解决了我最初发现的问题，我已经恢复使用 try-with-resources。但是下次发生异常时，我更希望异常是期望失败，而不是一个 Java 本身似乎没有充分的理由发出。

那么......有没有办法在这里得到正确的错误报告，而不放弃尝试资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T05:51:08.490

看起来 jMock 从这两种方法中抛出了相同的异常实例。这就是它可以在没有 jMock 的情况下重现的方式：

```
public class Test implements Closeable {
    private RuntimeException ex = new RuntimeException();

    public void doStuff() {
        throw ex;
    }

    public void close() {
        throw ex;
    }
}

try (Test t = new Test()) {
    t.doStuff();
} 
```

如果是这样，我认为这是 jMock 而不是 Java 编译器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T23:13:36.833

我在*Apache Commons VFS*中遇到了问题（Java 8 上的单元测试失败，请参阅[VFS-521](https://issues.apache.org/jira/browse/VFS-521)）。事实证明，java.io.FilterOutputStream 正在使用 try-with-resource（抑制异常）功能[，](http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/759aa847dcaf)它无法处理抛出相同异常的刷新 + 关闭。

更糟糕的是，在 Java 8 之前它只是默默地从`flush()`调用中吞下异常，请参阅[JDK-6335274](https://bugs.openjdk.java.net/browse/JDK-6335274)）。

我通过完全避免 super.close() 来修复它。目前在 corelibs-dev openjdk mailingl 上讨论这个问题：http: [//openjdk.5641.n7.nabble.com/FilterOutputStream-close-throws-exception-from-flush-td187617.html](http://openjdk.5641.n7.nabble.com/FilterOutputStream-close-throws-exception-from-flush-td187617.html)

# php - 在php中以编程方式循环将char附加到字符串

> ID：12103128
> 
> 赞同：-1
> 
> 时间：2012-08-24T04:25:30.863
> 
> 标签：php, string, loops, char, append

我在这里很困惑。

我怎样才能循环这个：

从 0-9a-zA-Z 开始

对于上述范围内的 foreach 字母数字字符，我必须创建一个字符串

第一根弦将是

```
0000
... ( thousands of string generated between)
0009
... ( thousands of string generated between)
000a
... ( thousands of string generated between)
000z
000A
... ( thousands of string generated between)
000Z
.... ( thousands of string generated between)
ZZZA
... ( thousands of string generated between)
ZZZZ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:49:58.687

这是一种解决方案：

```
$corpus = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
for( $i = 0; $i < strlen($corpus); $i++ )
   for( $j = 0; $j < strlen($corpus); $j++ )
      for( $k = 0; $k < strlen($corpus); $k++ )
         for( $l = 0; $l < strlen($corpus); $l++ )
              print substr($corpus, $i, 1).substr($corpus, $j, 1).substr($corpus, $k, 1).substr($corpus, $l, 1)."\n"; 
```

# actionscript-3 - 如何检测 Adob e Flash 崩溃原因？

> ID：12103133
> 
> 赞同：0
> 
> 时间：2012-08-24T04:25:55.790
> 
> 标签：actionscript-3, debugging, crash, mesh, vertex

Edit02：闪存崩溃的原因是因为错误的距离导致程序将某些内容除以 0 - 我自己发现了错误，但我的问题仍然是，是否有类似崩溃报告的东西可以添加/编辑？

编辑：我发现脚本中的错误位于此处

```
 if(baseVerticies[vertX]-boneObj.x < 0){
                distance = distance*-1;
            } 
```

在某一时刻它会产生错误的距离，但这不是程序导致崩溃的原因，我知道如何解决这个错误，但如何添加功能来检测闪存崩溃原因仍然很有趣

OLD：嘿，我目前正在测试 CS6 Flash 演示，但一个功能总是会杀死 Flash，而且我没有收到任何错误消息，所以我的问题是......我怎样才能找到这个错误？

我唯一知道的事情：当我调用某个函数（我在下面发布的那个）时它会崩溃 - 它不会在第一次调用时崩溃......更像是在第三次或第二次调用

有没有办法添加 debugEvents 或其他有助于跟踪错误的东西？

提前谢谢 =)

```
public function rotateBone(boneObj : Bone, point : Point){
            //rotates the boneGrafik
            boneObj.rotation = (point.x+boneObj.old_rotation)/2;

            if(axis == "horizontal"){
                var firstV : int = selected_bone*(squares+1)*2;
                var lastV : int = selected_bone*(squares+1)*2 + squares*2;
                var radius : Number = Math.sqrt((verticies[lastV]-verticies[firstV])*(verticies[lastV]-verticies[firstV])+
                    (verticies[lastV+1]-verticies[firstV+1])*(verticies[lastV+1]-verticies[firstV+1]));

                //will be exectued for every single vertex
                for(var s = 0; s<=squares; s++){
                    var vertX : int = selected_bone * (squares+1) * 2 + s*2;

                    var distance : Number = Math.sqrt((verticies[vertX]-boneObj.x)*(verticies[vertX]-boneObj.x)+
                        (verticies[vertX+1]-boneObj.y)*(verticies[vertX+1]-boneObj.y));

                    //calculates Vector
                    var rads:Number = boneObj.rotation / 180 * Math.PI;
                    var p:Point = new Point();
                    p.x=Math.cos(rads);
                    p.y=Math.sin(rads);

                    //baseMesh is used in order to check if the vertex pos is positiv / negative
                    if(baseVerticies[vertX]-boneObj.x < 0){
                        distance = distance*-1;
                    }

                    verticies[vertX] =  boneObj.x +  p.x * radius * (distance/radius);
                    verticies[vertX+1] =  boneObj.y +  p.y * radius * (distance/radius);

                }
            }else if (axis == "vertical"){
                for(var r = 0; r<=rows; r++){
                    vertX = r * (squares+1) * 2 + selected_bone * 2;

                }
            }
            updateMesh();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:24:19.917

我不确定你的意思是什么，它毫无例外地崩溃。你是在浏览器中测试吗？如果是这样，那么您可以从此处的列表中下载并安装相应的 Flash 调试器播放器：http: [//www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)

这应该会在 FlashPlayer 崩溃时为您提供一个错误窗口，其中将包含调试信息。它还将崩溃和调试数据写入日志文件。这里有更多信息：http: [//helpx.adobe.com/flash-player/kb/configure-debugger-version-flash-player.html](http://helpx.adobe.com/flash-player/kb/configure-debugger-version-flash-player.html)

最后，如果您想捕获和处理其他未处理的异常，您可以在 FP10.1 及更高版本中执行此操作。以下是有关它的 Adob​​e 文档：http: [//help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/UncaughtErrorEvent.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/UncaughtErrorEvent.html)，这是该页面的示例代码：

```
package
{
import flash.display.Loader;
import flash.display.Sprite;
import flash.events.ErrorEvent;
import flash.events.UncaughtErrorEvent;
import flash.net.URLRequest;

public class LoaderUncaughtErrorEventExample extends Sprite
{
    private var ldr:Loader;

    public function LoaderUncaughtErrorEventExample()
    {
        ldr = new Loader();
        ldr.load(new URLRequest("child.swf"));
        ldr.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR, uncaughtErrorHandler);
    }

    private function uncaughtErrorHandler(event:UncaughtErrorEvent):void
    {
        if (event.error is Error)
        {
            var error:Error = event.error as Error;
            // do something with the error
        }
        else if (event.error is ErrorEvent)
        {
            var errorEvent:ErrorEvent = event.error as ErrorEvent;
            // do something with the error
        }
        else
        {
            // a non-Error, non-ErrorEvent type was thrown and uncaught
        }
    }
}
} 
```

# php - yii 比较模型中的日期和时间

> ID：12103135
> 
> 赞同：1
> 
> 时间：2012-08-24T04:26:03.530
> 
> 标签：php, yii

我有规则的模型

```
public function rules() {
        return array(
            array('user_id, name, start_date, timezones, start_hours, return_date, return_hours, location_start, location_end, trip_activity, trip_mean, status', 'required'),
            array('user_id, return_hours, sign_off, saved, advise, time_notification, status', 'numerical', 'integerOnly'=>true),
            array('name, going_with, start_hours, location_start, location_end, location_return, trip_activity, trip_mean', 'length', 'max'=>255),
            array('created, modified, advise, notify_best_friend, notify_now, notify_returning, send_notification, sign_off', 'safe'),
            array('going_with, location_return, time_notification, created, modified', 'default', 'setOnEmpty' => true, 'value' => null),
            array('id, user_id, name, going_with, start_date, start_hours, return_date, return_hours, location_start, location_end, location_return, trip_activity, trip_mean, saved, advise, time_notification, status, created, modified', 'safe', 'on'=>'search'),
            array(
                  'return_date',
                  'compare',
                  'compareAttribute'=>'start_date',
                  'operator'=>'>=', 
                  'allowEmpty'=>false , 
                  'message'=>'{attribute} must be greater than "{compareValue}".'
                ),

            array(
                  'return_hours',
                  'compare',
                  'compareAttribute'=>'start_hours',
                  'operator'=>'>', 
                  'allowEmpty'=>false , 
                  'message'=>'{attribute} must be greater than "{compareValue}".'
                ),
            );
    } 
```

我想比较日期和时间...
如果：'return_date'>='start_date'...没关系。
如果 'return_date' == 'start_date'，所以 'return_hours > 'start_hours' 但上面的规则我无法比较它们。
有什么解决办法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:35:04.467

您可以使用自定义验证器来实现此目的。

```
public function comparedates($attribute,$params)
        {
            $message=Yii::t('yii','{attribute} must be greater than "{compareValue}".');
            if(CDateTimeParser::parse($this->return_date, "yyyy-MM-dd") < CDateTimeParser::parse($this->start_date, "yyyy-MM-dd"))
            {
                $params=array('{attribute}'=>$this->getAttributeLabel('return_date'),'{compareValue}'=>$this->getAttributeLabel('start_date'));
                $this->addError($attribute,strtr($message,$params));
            }
            else if(CDateTimeParser::parse($this->return_date, "yyyy-MM-dd") === CDateTimeParser::parse($this->start_date, "yyyy-MM-dd"))
            {
                if(CDateTimeParser::parse($this->return_hours, "hh") < CDateTimeParser::parse($this->start_hours, "hh")//change hh according to the format of return_hours and start_hours
                {   
                    $params=array('{attribute}'=>$this->getAttributeLabel('return_hours'),'{compareValue}'=>$this->getAttributeLabel('start_hours'));
                    $this->addError('return_hours',strtr($message,$params));                
                }
            }
        } 
```

在你的规则中

```
public function rules() {
return array(
 //your previous rules 
     array('return_date','comparedates'),
    ); 
```

}

记得根据你的和的格式改变from的`pattern`参数[`CDateTimeParser::parse()`](http://www.yiiframework.com/doc/api/1.1/CDateTimeParser#parse-detail)`hh``return_hours``start_hours`

# android - 无线电组内的组合框和编辑文本

> ID：12103139
> 
> 赞同：1
> 
> 时间：2012-08-24T04:26:55.573
> 
> 标签：android, radio-button

我正在尝试如下布局：

|--r--|---c---|
|--r--|---t---|

“r”位置的小部件是单选按钮，“c”是组合框，“t”是edittext。

我希望：
当第一个“r”被选中时，“c”被启用，“t”被禁用；选择第二个“r”时，禁用“c”，启用“t”；

那可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:44:26.267

```
 <TableLayout 

    <Table row>
    <LinearLayout orientation:horizontal

    <Radiogroup .....
    android:orientation="horizontal"

    />
    <Spinner ...
    />
</LinearLayout>
    </TableRow>

    <TableRow >
<LinearLayout orientation:horizontal
    <Radiogroup .....
    android:orientation="horizontal"

    />
    <EditText ..... />
</LinearLayout>
</TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:32:40.447

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:weightSum="10" >

<RadioGroup
    android:id="@+id/radioSex"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="5" >

    <RadioButton
        android:id="@+id/radioMale"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/radio_male" />

    <RadioButton
        android:id="@+id/radioFemale"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/radio_female" />
</RadioGroup>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="5"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/cmbName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <EditText
        android:id="@+id/etName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="text" />
</LinearLayout>

</LinearLayout> 
```

在代码中：

```
 RadioGroup rgp = (RadioGroup) findViewById(R.id.radioSex);
    final Spinner cmbName = (Spinner) findViewById(R.id.cmbName);
    final EditText etName = (EditText) findViewById(R.id.etName);
    rgp.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if (checkedId == R.id.radioMale) {
                etName.setEnabled(false);
                cmbName.setEnabled(true);
            } else {
                etName.setEnabled(true);
                cmbName.setEnabled(false);
            }
        }
    }); 
```

# ios - CALayer 动画帧变化？

> ID：12103142
> 
> 赞同：24
> 
> 时间：2012-08-24T04:27:40.440
> 
> 标签：ios, calayer

我有一个添加到视图中的 CALayer：

```
myView.myCALayer = [[CALayer alloc] init];
CGSize size = myView.frame.size;
myView.myCALayer.frame = CGRectMake(0, 0, size.width, size.height);
myView.myCALayer.backgroundColor = [[UIColor blackColor] CGColor];
[myView.layer addSublayer:myView.myCALayer]; 
```

当我在更改 myView 的框架后尝试更改 CALayer 的框架时，CALayer 的调整大小会产生动画。我没有向CALayer添加任何动画，所以我不明白这一点。我什至尝试在调整大小之前在图层上调用 removeAllAnimations，它仍然会为调整大小设置动画。

有人知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-29T02:28:44.227

实际上有一个关于为 CALayer 设置一些值的隐式动画。在设置新帧之前，您必须禁用动画。

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

[myView.myCALayer.frame = (CGRect){ { 10, 10 }, { 100, 100 } ];

[CATransaction commit]; 
```

[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW3](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW3)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-03-23T14:43:20.653

在 Swift 4 中：

```
CATransaction.begin()
CATransaction.setDisableActions(true)
/* Your layer / frame changes here */
CATransaction.commit() 
```

# ssis - 使用 .net 和 Job 执行包

> ID：12103143
> 
> 赞同：0
> 
> 时间：2012-08-24T04:27:40.267
> 
> 标签：ssis

是否可以通过作业和.net 执行包？如何更改输入参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:58:33.103

[是的，您可以使用SQL 代理](http://msdn.microsoft.com/en-us/library/ms141701.aspx)和从[.NET](http://www.codeproject.com/Articles/28096/Excecute-SSIS-package-DTSX-from-ASP-Net)应用程序执行 SSIS 包。

如果需要传递输入参数，则需要在通过`DTEXEC`命令行执行时使用 SET 选项

```
/SET "\Package.Variables[User::YourVariable].Properties[Value]";"ValueToBePassed" 
```

如果您有几个参数要传递，那么您可以在文本文件中使用上述查询，然后使用`CommandFile`DTEXEC 中的选项

```
DTEXEC /File "C:\Package.dtsx" /CommandFile "C:\inputOptions.txt" 
```

如果您从 .NET 运行。添加对`Microsoft.SqlServer.Dts.Runtime.Application`

```
using app=Microsoft.SqlServer.Dts.Runtime.Application;
string pkgLocation;
Package pkg;

DTSExecResult pkgResults;
pkgLocation = @"C:\SSISPackage\YourPackage.dtsx";
app = new Microsoft.SqlServer.Dts.Runtime.Application();
pkg = app.LoadPackage(pkgLocation, null);

pkg.Variables["VariableName"].Value = "VariableValue";
results= pkg.Execute(); 
```

[请参考我在SO](https://stackoverflow.com/questions/11695821/dump-ssis-user-variable-name-and-value-in-sql-server-table/11810453#11810453)中的回答。我使用脚本任务来执行包，但您可以在 .NET 应用程序中使用该代码

请参阅[本文](http://blogs.msdn.com/b/michen/archive/2007/03/22/running-ssis-package-programmatically.aspx)以获取更多信息

# c - C中的合并排序和快速排序

> ID：12103144
> 
> 赞同：-3
> 
> 时间：2012-08-24T04:27:46.850
> 
> 标签：c, algorithm, linked-list, quicksort, mergesort

> **可能重复：**
> [对链接列表进行合并排序](https://stackoverflow.com/questions/7685/merge-sort-a-linked-list)

一直在学习 C 和链表，有没有使用链表实现快速排序和合并排序的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:31:31.360

链接列表的合并排序 -> [http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html](http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html)

快速排序-> [http://www.flipcode.com/archives/Quick_Sort_On_Linked_List.shtml](http://www.flipcode.com/archives/Quick_Sort_On_Linked_List.shtml)

你用谷歌搜索东西吗？使用它......它很好......真的...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:16:14.763

合并排序

```
 #include<stdio.h>
struct node {
int number;
struct node *next;
};

/* add a node to the linked list */
struct node *addnode(int number, struct node *next);
/* preform merge sort on the linked list */
struct node *mergesort(struct node *head);
/* merge the lists.. */
struct node *merge(struct node *head_one, struct node *head_two);

int main(void) {
struct node *head;
struct node *current;
struct node *next;
int test[] = {82, 13, 22, 61, 12, 52, 41, 75, 98, 20};
int i;

head = NULL;
/* insert some numbers into the linked list */
for(i = 0; i < 10; i++)
head = addnode(test[i], head);

/* sort the list */
head = mergesort(head);

/* print the list */
printf(" before after\n"), i = 0;
for(current = head; current != NULL; current = current->next)
printf("%4d\t%4d\n", test[i++], current->number);

/* free the list */
for(current = head; current != NULL; current = next)
next = current->next, free(current);

/* done... */
return 0;
}

/* add a node to the linked list */
struct node *addnode(int number, struct node *next) {
struct node *tnode;

tnode = (struct node*)malloc(sizeof(*tnode));

if(tnode != NULL) {
tnode->number = number;
tnode->next = next;
}

return tnode;
}

/* preform merge sort on the linked list */
struct node *mergesort(struct node *head) {
struct node *head_one;
struct node *head_two;

if((head == NULL) || (head->next == NULL))
return head;

head_one = head;
head_two = head->next;
while((head_two != NULL) && (head_two->next != NULL)) {
head = head->next;
head_two = head->next->next;
}
head_two = head->next;
head->next = NULL;

return merge(mergesort(head_one), mergesort(head_two));
}

/* merge the lists.. */
struct node *merge(struct node *head_one, struct node *head_two) {
struct node *head_three;

if(head_one == NULL)
return head_two;

if(head_two == NULL)
return head_one;

if(head_one->number < head_two->number) {
head_three = head_one;
head_three->next = merge(head_one->next, head_two);
} else {
head_three = head_two;
head_three->next = merge(head_one, head_two->next);
}

return head_three;
} 
```

快速排序

```
 #include <iostream.h>
class LinkList{
private:
struct Node 
{
Node* prev;
int value; 
Node *next;
};

Node *first,*t1;
void _display(Node *temp){
if (temp) {
cout<<temp->value<<" , ";
_display(temp->next);
}
}

public :
LinkList(int order){
t1 = new Node();
t1->prev = NULL;
t1->value = order;
t1->next = NULL;
first = t1;
}

~LinkList(){ 
destroy(first);
}

void destroy(Node*current){
Node *temp;
if(current != NULL){
temp = current->next;
delete current;
current = temp;
destroy(current);
}
}

void add(int order){
Node *t2 = new Node();
t2->prev = t1;
t2->value = order;
t2->next = NULL;
t1->next = t2;
t1=t1->next;
}

void operator<<(int order){
add(order);
}

void display(){
_display(first);
}

void sort()
{
Node *current, *cur;

for(current = first; current->next != NULL; current = current->next) {
Node *minimum = current;
for(cur = current ; cur != NULL; cur = cur->next)
{
if(minimum->value > cur->value) 
{
minimum = cur;
}
}
if(minimum != current)
{
Node *current_previous, *current_next, *min_previous, *min_next;

// Initialize them
current_next = current->next;
min_previous = minimum->prev;
min_next = minimum->next;
current_previous = current->prev;

if(current_previous == NULL)
{
// Change the First Node
first = minimum;
}
if(current->next == minimum)
{
// Nodes are Adjacent
minimum->prev = current_previous;
minimum->next = current;

current->prev = minimum;
current->next = min_next;

if(min_next)
{
min_next->prev = current;
}
if(current_previous)
{
current_previous->next = minimum;
}
}
else
{
minimum->prev = current_previous;
minimum->next = current_next;

current->prev = min_previous;
current->next = min_next;

if(current_next)
{
current_next->prev = minimum;
}
if(min_previous)
{
min_previous->next = current;
}
if(min_next)
{
min_next->prev = current;
}
if(current_previous)
{
current_previous->next = minimum;
}
}
current = minimum;
}
}

}
};

void main(){
cout<<"\n\nLinkList =\n";
LinkList *list=new LinkList(4);
*list<<7;
*list<<5;
*list<<3;
*list<<11;
list->display();
list->sort();
cout<<"\n\nSorting\n";
list->display();
delete list;
} 
```

# objective-c - 有条件的 NSLog，不会降低性能

> ID：12103148
> 
> 赞同：2
> 
> 时间：2012-08-24T04:28:06.217
> 
> 标签：objective-c, cocoa, debugging, nslog

```
bool kDebuggingEnabled = NO;
...
for(i=0; i<length; i++){
 ...
 if (kDebuggingEnabled) {
  NSLog (@"Value of variable # %i",$resultingOptions);
 }
} 
```

每当我的应用程序上线时，我的代码每次都会检查有关 NSLog 的条件。有没有更好的方法来提高我的代码性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:37:15.453

您可以使用预处理器宏来打开和关闭登录。一个很好的例子是`DLog`来自 Marcus Zarra 在[Cocoa is My Girlfriend](http://www.cimgf.com/2010/05/02/my-current-prefix-pch-file/)博客上的宏。

```
#ifdef DEBUG
    #define DLog(...) NSLog(@"%s %@", __PRETTY_FUNCTION__, [NSString stringWithFormat:__VA_ARGS__])
#else
    #define DLog(...) do { } while (0)
#endif 
```

您可以将上述内容放在您的 prefix.pch 文件中，然后简单地将`NSLog`语句替换为`DLog`语句。您还需要确保`DEBUG`在调试构建配置中进行了设置。

像这样使用预处理器宏意味着日志代码不会被编译到您的发布版本中，因此不会对日志语句造成性能影响。

该博客文章还包含一些其他有用的宏来处理断言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:25:31.707

您有 3 个选择：

1) 如果您想在构建时启用/禁用日志。预处理器解决方案是最好的：

```
// define MY_ENABLE_LOGS in your build settings for the debug configuration only, for example
#ifdef MY_ENABLE_LOGS
#define MYLog(...) NSLog(__VA_ARGS__)
#else
#define MyLog(...) do { } while(0)
#endif 
```

2) 如果您希望能够在运行时启用/禁用日志（例如，基于一些隐藏的偏好），您的解决方案可能是最好的。不过，您可以尝试提示编译器进行一些优化：

```
// tell the compiler it's unlikely that kDebuggingEnabled will be true
#define MYLog(...) do { if (__builtin_expect(kDebuggingEnabled, 0)) { NSLog(__VA_ARGS__); } } while(0) 
```

3) 最后一个选项稍微复杂一些，但可以提供比日志更丰富的信息，并且仅取决于您希望提供的日志记录类型。这个想法是使用带有 dtrace 的自定义探针（也可以在 Instruments 中使用）。这仅适用于 OS X（不适用于 iOS）。例如，参见[http://www.macresearch.org/tuning-cocoa-applications-using-dtrace-custom-static-probes-and-instruments 。](http://www.macresearch.org/tuning-cocoa-applications-using-dtrace-custom-static-probes-and-instruments)

请注意，您可以根据需要混合 1) 和 2)。3) 意味着在不跟踪探测时几乎为零成本，并且可以提供比简单的日志字符串更丰富的信息。

这些解决方案的一个警告：当未定义 MY_ENABLE_LOGS 时，不会评估日志的参数，这可能会改变您的应用程序行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T04:31:18.140

使用预处理器宏检查您是否正在构建调试：

```
#if DEBUG
// do stuff
#end 
```

如果预处理器（在编译器之前运行的东西）评估 DEBUG 为真，它将保留代码供编译器编译，但如果 DEBUG 不存在或为假，它将删除那段代码。

# sql - 将带有前导零的数字从 excel 导入 SQL Server Management Studio

> ID：12103150
> 
> 赞同：0
> 
> 时间：2012-08-24T04:28:13.000
> 
> 标签：sql, excel, sql-import-wizard

我正在尝试使用 SQL Server 导入和导出向导将数字（邮政编码）导入 SQL DB。该列是 Excel 中的文本，但是当我导入文件时，邮政编码列被映射到浮点类型，这导致任何带有前导零的值的 NULL 结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:28:13.000

我创建了一个新列并使用 excel TEXT 函数重新格式化邮政编码。

```
=TEXT(P2,"0000") 
```

然后我用新列导入了文件，新的邮政编码列有一个到 nvarchar(255) 的默认映射。

# mysql - 数据库架构

> ID：12103153
> 
> 赞同：0
> 
> 时间：2012-08-24T04:28:37.510
> 
> 标签：mysql, database-design, architecture

例如，我有帖子、帖子的答案和答案的评论。

有什么更好的方法：为每个实体（帖子、答案、评论）提供每个表，还是一个带有“post_type”和“parent_id”参数的表？

**UPD：**答案和评论与属性相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:31:53.810

最好的路线是 3 张桌子：

*   帖子
*   答案
    *   Posts_ID（父）
*   评论
    *   Answers_ID（父）

帖子是最终父级，与之相关的答案以及与答案相关的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:47:16.987

您是否有单独的帖子和评论表，部分取决于是否可以使用一个来代替另一个，部分取决于每个处理的相似程度。换句话说，每个人有多少信息是独一无二的？如果每张桌子都没有或几乎没有独特的东西，那么一张桌子很可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:11:47.707

在某些情况下，使用带有微分列（选项 2）的单个表是有意义的，但是任何仅属于一种类型的列都应该进入它自己的表，并且该表将具有一个外键映射回主表。这将形成一个[表继承层次结构](http://c2.com/cgi/wiki?TableInheritance)。

如果这些表所代表的对象共享大量列，这是有道理的；并且它们的共性允许一些处理在不同类型之间进行泛化，而不必知道特定的子类型。

如果您的大多数查询最终都必须按差异列进行过滤，那么将它们存储在同一个位置可以获得什么真正的优势？

*In short:* K.I.S.S. applies; if there is a programming advantage to be had by using the single table approach, use that; otherwise keep it simple and use 3 (counter intuitive I know, but the added cognitive load just to do self-joins all the time should convince you).

# asp-classic - 如果空字符串值的语句错误

> ID：12103155
> 
> 赞同：0
> 
> 时间：2012-08-24T04:28:39.327
> 
> 标签：asp-classic, if-statement

```
<html>
<title>Test</title>
<body bgcolor="FFFFFF">

<%
sort = CStr(Request("sort"))
search = CStr(Request("search"))
Set conn = Server.CreateObject("ADODB.Connection")
conn.open "Provider=SQLOLEDB.1;Password=123;Persist Security Info=True;User   ID=sa;Initial Catalog=asdf;Data Source=WIN-123"

Set rs = Server.CreateObject("ADODB.Recordset")
If sort = "ascending" Then
SQL = "select top 50 * from asdf order by Name"
ElseIf (search Is Not Nothing)
SQL = "select * from asdf WHERE name = '" & search & "'"
Else
SQL = "select top 50 * from asdf"
End If
rs.open SQL, conn
%>
<center><form acion="index.asp">
Search Name:<input name="search" /><input type="submit" value="Submit" />
</form></center> 
```

我收到一个错误

```
Else If (search Is Not Nothing) 
```

线，据我所知，它应该可以工作。当然，由于某种原因，我也不能在我的服务器上浏览我的网站以查看实际错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:13:11.387

在我的 IIS 5 上测试，没有`option explicit`, 当你使用

```
search=CStr(Request("search")) 
```

您的`search`已初始化为`string`( `VarType: 8`)。

所以即使`search`是“空”，你也不能使用`IsEmpty`或类似的函数/语句来查看它是否为空。采用

```
ElseIf search<>"" Then 
```

直接地。

另外，请记住清理您的 SQL 查询...

# php - 多个数据库连接不适用于 new_link=TRUE 和 sql.safe_mode = OFF

> ID：12103156
> 
> 赞同：0
> 
> 时间：2012-08-24T04:28:45.293
> 
> 标签：php, mysql, sql, mysql-connect

我正在尝试从 php 函数连接不同的数据库（假设当前连接到另一个数据库）。我正在使用`mysql_connect()`参数`new_link`设置为 TRUE，如下所示。尽管 mysql_connect() 中为 TRUE，但以下代码如何返回`global_thread_id=16357138 local_thread_id=16357139 current_global=16357139`（意味着本地连接覆盖先前的连接）

同样在 php 设置中，**sql.safe_mode = OFF**

```
// Class static method
static function Query($sql) {
       $global_thread_id = mysql_thread_id();
       if ($link = mysql_connect(FB_DB_HOST, FB_DB_USER, FB_DB_PASS, true)) 
       {
            $local_thread_id = mysql_thread_id($link);                          
            echo 'global_thread_id='.$global_thread_id.' local_thread_id='.$local_thread_id.' current_global='.mysql_thread_id();   
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:26:36.633

mysql_thread_id() 获取最新的线程 id，而不是“全局”

[mysql_thread_id](http://se.php.net/mysql_thread_id)的 php 手册说：

> 检索当前线程 ID

```
// Class static method
static function Query($sql) {

       /* fetch latest thread id = global */
       $global_thread_id = mysql_thread_id();
       if ($link = mysql_connect(FB_DB_HOST, FB_DB_USER, FB_DB_PASS, true)) 
       {
            /* fetch thread id from $link */
            $local_thread_id = mysql_thread_id($link);

            /* echo 2 vars and the latest thread id = same as link */
            echo 'global_thread_id='.$global_thread_id.' local_thread_id='.$local_thread_id.' current_global='.mysql_thread_id();   
       }
} 
```

# php - 将 PHP 查询字符串分隔符更改为“#”以与 $_GET 一起使用？

> ID：12103158
> 
> 赞同：2
> 
> 时间：2012-08-24T04:28:55.073
> 
> 标签：php, query-string

在 PHP 中，如何更改查询字符串分隔符？至 ＃

我有一个基本功能：

```
 <?php
        if ($_GET['var'])
        {echo $_GET['var'] ;}
        else
        {echo "default output";}
        ?> 
```

但在 URL 语法中，我需要查询字符串分隔符为 # （而不是？），如下所示：

[http://example.com/sample.php#var=foo](http://example.com/sample.php#var=foo)

我正在考虑更改 php.ini ？

我在任何地方都找不到这方面的文档。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T04:30:22.530

您需要在客户端处理它。

哈希 ( `#`) 以及除此之外的所有内容都*不会发送*到服务器。

# iphone - Asynchronous Loading in UITable cells

> ID：12103162
> 
> 赞同：1
> 
> 时间：2012-08-24T04:29:07.557
> 
> 标签：iphone, ios, asynchronous, uitableview

I wish to do asynchronous loading in my UITable cell (I'm using custom cells) as the moment I click on UIButton 'Details', it will hang around 7~8 seconds as it is doing some internet connection for the checking of status. The only thing that requires loading is only the '(2) Book Status' as shown below:

![enter image description here](../Images/2fa4951a58a701d6117019dcb0cf3da9.png)

I've done my research but so far I only found solutions such as lazy loading, which is largely meant for loading of images. Would anyone give some advice for how to do asynchronous loading for text, preferably with some examples? Thanks alot in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:45:04.723

Actually u need to do lazy loading for values in uitableviewcell. display value when available.

Refer [LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html) a sample project from apple which loads all values in cell along with image Asynchronously

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:52:39.023

For the Asynchronous load the cell followings are resources where you can get the idea.

1.  [NMPaginator](https://github.com/nmondollot/NMPaginator)
2.  [Source Code](http://www.iphonedevsdk.com/forum/iphone-sdk-development/18876-paging-pagination-load-more-uitableview.html)

# c# - 基于抽象类返回对象的排序列表

> ID：12103168
> 
> 赞同：1
> 
> 时间：2012-08-24T04:29:44.087
> 
> 标签：c#, sorting, inheritance, abstract-class, instantiation

我有一个抽象类，它定义了整个站点中社交使用的对象（社交协作对象）的基本行为。

```
internal abstract class SCO
{
    public double HotScore { get; set; }
    public double UpVotes { get; set; }
    public double DownVotes { get; set; }
    public double VoteTotal { get; set; }
    public DateTime Created { get; set; }

    public SCO(DBItem item, List<Vote> votes )
    {
        var voteMeta = InformationForThisVote(votes, item.ID);
        UpVotes = voteMeta.UpVotes;
        DownVotes = voteMeta.DownVotes;
        VoteTotal = UpVotes - DownVotes;
        HotScore = Calculation.HotScore(Convert.ToInt32(UpVotes), Convert.ToInt32(DownVotes), Convert.ToDateTime(item["Created"]));
        Created = Convert.ToDateTime(item["Created"]);
    }

    private static VoteMeta InformationForThisVote(List<Vote> votes, int itemId)
    {
        // Loop through votes, find matches by id, 
        // and record number of upvotes and downvotes
    }
    private User GetCreatorFromItemValue(DBItem item)
    {
        // Cast User Object from property of DataBase information
    }
} 
```

这是继承对象的示例：

```
class Post : SCO
{
    public string Summary { get; set; }
    public Uri Link { get; set; }
    public Uri ImageUrl { get; set; }

    public Post(DBItem item, List<Vote> votes)
        : base(item, votes)
    {
        Summary = (string) item["Summary"];
        Link = new UriBuilder((string) item["Link"]).Uri;
        ImageUrl = new UriBuilder((string) item["ImageUrl"]).Uri;
    }
} 
```

这些类的其他共同点是大多数时候它们将作为排序集合返回。这里的困难是你不能将集合嵌入到抽象类中，因为没有办法实例化抽象类本身。

到目前为止，我所做的工作是将 Sort 方法作为此处显示的摘要的一部分：

```
 protected static List<ESCO> SortedItems(List<ESCO> escoList, ListSortType sortType)
    {
        switch (sortType)
        {
            case ListSortType.Hot:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.HotScore.CompareTo(p1.HotScore); });
                return escoList;
            case ListSortType.Top:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.VoteTotal.CompareTo(p1.VoteTotal); });
                return escoList;
            case ListSortType.Recent:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.Created.CompareTo(p1.Created); });
                return escoList;
            default:
                throw new ArgumentOutOfRangeException("sortType");
        }
    } 
```

这使我可以在我的继承儿童课程中使用它：

```
 public static List<Post> Posts(SPListItemCollection items, ListSortType sortType, List<Vote> votes)
    {
        var returnlist = new List<ESCO>();
        for (int i = 0; i < items.Count; i++) { returnlist.Add(new Post(items[i], votes)); }
        return SortedItems(returnlist, sortType).Cast<Post>().ToList();
    } 
```

这行得通，但感觉有点笨拙。我仍然在我的子类中重复很多代码，我觉得这种演员表是不必要的性能扣除。

我如何最好地提供一种方法来返回基于抽象类的对象的排序列表，这些抽象类以相同的方式排序，具有相同的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:32:59.927

看起来不需要抽象类，因为没有抽象成员。最好只使用一个具体的基类（必要时添加*虚拟成员）？*

更好的是，使用包含排序所需的所有成员（分数、投票等）的界面；将接口的集合传递给您的排序方法。

**编辑**这是一个简化的例子：

```
internal interface ISCO
{
    double HotScore { get; set; }
}

class SCO : ISCO
{
    public double HotScore { get; set; }

    public static IEnumerable<T> Sort<T>(IEnumerable<T> items) where T : ISCO
    {
        var sorted = items.ToList();
        sorted.Sort();
        return sorted;
    }
} 
```

然后，您可以对每个派生类使用该单一排序方法：

```
List<Post> PostItems = // ...
IEnumerable<Post> sorted = SCO.Sort<Post>(PostItems); 
```

# ios - ./create：终端窗口中没有此类文件或目录错误

> ID：12103176
> 
> 赞同：1
> 
> 时间：2012-08-24T04:30:54.413
> 
> 标签：ios, cordova, iphone-sdk-3.0

我对 iPhone 开发非常陌生，我希望使用 PhoneGap 框架来创建 iPhone 应用程序。我在 Mac OS X Lion 上安装了 Phonegap。我在终端窗口中收到此错误`./create <project_folder_path> <bundle_id> <project_name>`：

```
 ./create: No such file or directory 
```

我已经搜索了谷歌来解决这个错误，但我从那里找不到任何想法。你能帮我解决这个问题并运行这个项目吗？提前致谢。期待您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T04:37:24.010

您可能需要使用命令检查当前目录`pwd`，这就是 的`.`简写。`create`可执行文件位于 Cordova目录中，而`bin`不是您的项目目录中。

例如，[该站点](http://docs.phonegap.com/en/2.0.0/guide_command-line_index.md.html#Command-Line%20Usage_ios)显示了所需的命令行（为了便于阅读，分散在多行中）：

```
./path/to/cordova-ios/bin/create
    /path/to/my_new_cordova_project
    com.example.cordova_project_name
    CordovaProjectName 
```

换句话说，`create`与您的项目是分开的。

解决方案可能是完全指定`create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:33:29.653

```
./path/to/cordova-ios/bin ./create
~/<project_folder_path> <bundle_id> <project_name> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T15:09:09.867

这对我有用：

下载 cordova-3.0.0 并将文件夹放入您的文件夹中。在里面展开cordova-ios.zip。

在您的文档文件夹中创建一个文件夹 CordovaTestProject。

然后，打开终端并尝试：

```
./Documents/cordova-3.0.0/cordova-ios/bin/create /Users/<username>/Documents/CordovaXY/HelloWorld org.apache.cordova.HelloWorld HelloWorld 
```

将 <username> 替换为您的用户名。您可以在终端中使用 pwd 获取它。在终端中，输入“pwd”，您将获得您的用户名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T17:12:30.527

`./create`在输入命令之前，请确保您位于 \phonegap-2.7.0\lib\ios\bin 中。有关在 Mac for iOS 中安装 PhoneGap 和创建新项目的简单直接说明，请参阅[博客教程。](http://mythoughtsandexperiments.blogspot.in/2013/12/how-to-install-phonegap-in-mac-and.html)

# javascript - 现在如何适应我的网站

> ID：12103184
> 
> 赞同：-5
> 
> 时间：2012-08-24T04:31:35.493
> 
> 标签：javascript, jquery, css, html

我设计了一个 Web 应用程序，现在我被要求让它适应不同的屏幕分辨率。前页/索引页在最大化时必须适合浏览器，不允许滚动条。这是可行的还是只是一个奇怪的要求？我想我需要创建我的网站的图像，然后根据浏览器和计算机屏幕尺寸对其进行缩放。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T04:35:43.613

为了使您的网页适合不同的分辨率和设备，您需要使用流畅或响应式布局。您可以在非主题搜索中找到许多链接之一：[http ://webdesignerwall.com/trends/inspiration-fluid-responsive-design](http://webdesignerwall.com/trends/inspiration-fluid-responsive-design)

通常最好从网格开始（例如[http://960.gs/](http://960.gs/)），但您也可以使用[@media-queries](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)调整已有的页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T04:39:52.487

我认为 Jquery 是您现在所需要的：用于可扩展的屏幕。

另外，有一个简单的方法，试试这个： [http ://blog.rajatpandit.com/2008/06/19/making-footer-stick-to-the-bottom-of-the-page/](http://blog.rajatpandit.com/2008/06/19/making-footer-stick-to-the-bottom-of-the-page/)

不要将页脚粘贴到底部，而是尝试粘贴所有内容，包括页眉和容器。

希望能帮助到你。

# jakarta-ee - 以编程方式获取 JAX-WS WebService 实现的 Servlet 实例？

> ID：12103188
> 
> 赞同：0
> 
> 时间：2012-08-24T04:32:03.167
> 
> 标签：jakarta-ee, jax-ws, servlet-3.0, jax-ws-customization

我正在使用自上而下的方法开发 Web 服务，使用 JAX-WS 的 wsimport 从 WSDL 生成服务类型和接口。这提供了一个如下的端口类型接口，我实现了它。

```
/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.4-b01
 * Generated source version: 2.2
 */
@WebService(name = "ExamplePortType", targetNamespace = "http://example.com")
public interface ExamplePortType {

    /**
     * @param example
     * @return java.lang.String
     * @throws ExampleException
     */
    @WebMethod
    @WebResult(name = "exampleResponse", targetNamespace = "http://example.com")
    @RequestWrapper(localName = "sendExample", targetNamespace = "http://example.com", className = "com.example.SendExample")
    @ResponseWrapper(localName = "sendExampleResponse", targetNamespace = "http://example.com", className = "com.example.SendExampleResponse")
    public String sendExample(
        @WebParam(name = "example", targetNamespace = "http://example.com")
        ExampleRequest example)
        throws ExampleException
    ;
} 
```

将此服务添加到应用程序服务器（在我的情况下为 Tomcat）的正常方法似乎是将实现类作为 servlet 添加到 web.xml 并将 WSServletContextListener 添加为侦听器。粗略地说，似乎在初始化上下文时，侦听器构造了 ServletAdapters，它包装了实现 bean 并将它们添加到由瘦 WSServlet 调用的 WSServletDelegate。然后，对您的实现的请求由 WSServlet 处理，并由委托根据您设置的任何 URL 模式传递给您的 bean。

有没有办法以编程方式完成上述操作？我想要一个接受上述接口实例并返回给我一个 Servlet 实例的方法，如果在 ServletContext 中注册，它会将适当的请求路由到包装的实现。就像是：

```
Servlet exampleServlet = new ServletAdapter().wrap(new ExamplePortTypeImpl()); 
```

一项要求是我不能依赖静态配置文件（例如 web.xml 或 sun-jaxws.xml）。JAX-WS 或相关库（即：Axis2 等）是否提供这种功能？

如果有不清楚的地方道歉；这是我第一次来这里:)。任何指针表示赞赏。

目前使用 JAX-WS 2.1、Tomcat 7、Servlet 3.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-01-14T16:10:39.160

根据 Anthop 的回答，这是我想出的适用于我的代码。

```
// Main code:

final ServletContextHandler soapContextHandler = createSoapServletContextHandler();

final HandlerList handlers = new HandlerList();
handlers.setHandlers(new Handler[] { soapContextHandler });

server = createServer(port);
server.setHandler(handlers);
server.start(); 
```

```
// Function:
    private ServletContextHandler createSoapServletContextHandler()
    {
        final ServletContextHandler soapContextHandler =
                new ServletContextHandler(ServletContextHandler.SESSIONS);

        WSEndpoint<SoapServiceImpl> endpoint =
                WSEndpoint.create(SoapServiceImpl.class, false, null, null, null, null,
                        BindingImpl.getDefaultBinding(), null, null, null, false);

        ServletAdapter servletAdapter = new ServletAdapterList().createAdapter("soap", "/soap", endpoint);

        SoapServlet soapServlet = new SoapServlet(
                new WSServletDelegate(Collections.singletonList(servletAdapter), new EmptyServletContext()));

        soapContextHandler.addServlet(new ServletHolder(soapServlet), "/soap");
        return soapContextHandler;
    } 
```

```
// Servlet:
    private static class SoapServlet extends HttpServlet
    {
        private final WSServletDelegate delegate;

        SoapServlet(WSServletDelegate delegate)
        {
            this.delegate = delegate;
        }

        @Override
        protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
        {
            delegate.doGet(req, resp, getServletContext());
        }

        @Override
        protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
        {
            delegate.doPost(req, resp, getServletContext());
        }
    } 
```

`SoapServiceImpl`您的肥皂服务实现在哪里，并且`EmptyServletContext`只是一个完全空的实现，`ServletContext`它只为所有方法返回 null 或默认值。

`/soap`这应该使用 Jetty在路径上提供肥皂请求。您可以将其他上下文处理程序添加到列表中，它们也将与肥皂处理程序一起工作。我已经与 Jersey 上下文处理程序一起对其进行了测试，因此我的服务使用 Jetty 在同一端口上处理 REST 和 SOAP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:06:06.150

好的，经过大量的试验，我已经能够将一些可行的东西放在一起。为了文档，我将其发布在这里。

基本上，我通过模拟或重新实现 JAX-WS 如何从它的 WSServletContextListener 创建它的 WSServlet 来实现这一点。不幸的是，我找不到更简单或更好的支持和直接的方法来做到这一点。

基本上，我的工厂使用它的 WSEndpoint.create() 方法创建了一个 WSEndpoint。create() 将我试图包装的 WebService 实现的类作为输入。大多数其他输入为空，以鼓励 WSEndpoint 使用默认值或尝试从实现类中的注释中提取一些配置。

然后，我使用一个新的 ServletAdapterList() 来创建一个使用先前创建的 WSEndpoint 的 ServletAdapter。为此，由于我为每个实现类创建一个 Servlet，因此适配器的名称无关紧要，并且可以将其配置为将所有流量发送到实现，而不管 URL 是什么。

然后，我使用先前 ServletAdapter 的单例列表创建一个新的 WSServletDelegate()。这里唯一的技巧是 JAX-WS 似乎有一个坏习惯，至少对于这一步和下一步，在 ServletContext 的 init 参数中存储一些值。即使参数不在上下文中，它也没有正确地进行空检查，即使它有默认使用。所以我最后还创建了一个 ServletContext 的虚拟实现，我将它传递给 WSServletDelegate 构造函数，让它感觉像是在查找 init 参数。

最后，我创建了一个 HttpServlet 的实现，它将请求转发到 WSServletDelegate，类似于 WSServlet 的做法。由于 WSServlet 再次将委托对象存储在 ServletContext 初始化参数中，我发现重新实现它的功能比弄乱现有的 WSServlet 更容易。然后，可以将 HttpServlet 的这种实现视为将接受和处理 SOAP Web 服务调用的任何普通 Servlet。

# c - 如何暂停线程之间的执行？

> ID：12103194
> 
> 赞同：0
> 
> 时间：2012-08-24T04:32:51.743
> 
> 标签：c, multithreading, pthreads

我正在学习线程同步，这是演示如何在线程执行时锁定关键数据：

[http://ideone.com/7Do0l](http://ideone.com/7Do0l)`-pthread` （要运行此代码，请在 Linux/MacOS 环境 下使用参数编译它）

该程序按预期工作，但该`sleep()`函数不会暂停线程之间的执行。我的想法是让一个线程一次进行计算，然后 1 秒后另一个线程开始发挥作用。这是我正在使用的代码段：

```
while(1) {
        //sleep(1);     //(1) (Sleep for one second)
        sem_wait(&mutex);
        //sleep(1);     //(2)
                printf("Thread #%d is doing math. %d + 1 = %d.\n", (int) id, s, s+1);
                s++;
        //sleep(1);     //(3)
        sem_post(&mutex);
        //sleep(1);     //(4)
} 
```

我尝试了四个位置`sleep()`。（1）和（4）导致单个线程之间没有暂停，而是在两束十个线程之间。(2) 和 (3) 导致一个线程在另一个线程被调用之前被重复执行很长时间。

有没有办法解决这个问题？

**更新**

有一个技巧可以让程序产生结果：为每个线程随机生成睡眠时间，但这并不一致，因为两个随机数可能偶然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:42:10.650

`printf`将其放在第三位，因为您希望消息之间有一秒钟的延迟。

如果要确保所有线程在进入临界区之前都已初始化，`main`请将链接代码的功能修改为

```
int main() {
    pthread_t thread[10];

    int i;
    sem_init(&mutex, 0, 1);
    sem_wait(&mutex);
    for (i = 0; i<10; ++i)
            pthread_create(&(thread[i]), NULL, job, (void*) i);
    sem_post(&mutex);
    sleep(100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:03:02.717

这并不是线程旨在解决的真正问题。您必须为每个线程有一个单独的信号量，让一个线程循环通过这些信号量，每秒在不同的信号量上调用 sem_post，其余的只调用 sem_wait。也可以只使用一个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:01:39.427

我做了一些研究，发现产生所需输出的唯一方法是我在**更新**部分提到的方法。也就是说，不用硬编码睡眠定时器，只需给每个线程一个随机数：

```
 // Sleep time in microseconds.
    int st = rand() % 500000;
    usleep(st); 
```

实际上，我一直在担心两个线程同时做同样的事情。即使两个相邻的随机计时器可能意外相同，两个线程也不会同时在 CPU 的同一个内核上执行，如果 CPU 是多个内核，则没有两条指令可以同时修改相同的内存内容。

# c# - 使用 LINQ 在范围内查找范围

> ID：12103197
> 
> 赞同：2
> 
> 时间：2012-08-24T04:33:12.730
> 
> 标签：c#, linq, linq-to-entities

我有一个日期列表

开始日期 结束日期

```
1-Nov-2011         31-Jan-2012   
3-Mar-2012          1-Apr-2012  
1-May-2012         31-Dec-2012 
1-Jan-2013          1-Dec-2013 
```

获取该范围内的所有记录

```
1-Jan-2012          31-Dec-2012 
```

答案将是上述列表中的前三个记录

我怎么能用 Linq 做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:06:28.593

这应该有效：

```
var rangeStart = new DateTime(2012, 1, 1);
var rangeEnd = new DateTime(2012, 12, 31);
var res = list
    .Where(item => (item.StartTime < rangeStart ? rangeStart : item.StartTime) < (item.EndTime < rangeEnd ? item.EndTime : rangeEnd) )
    .ToList(); 
```

条件是“两个左端中较大的需要小于两个右端中较小的”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:58:39.807

我建议以下包装

```
public struct DateInterval
    {
        public DateTime StartDate { get; set; }

        public DateTime EndDate { get; set; }

        public bool HasIntersection(DateInterval secondInterval)
        {
            return HasIntersection(this.StartDate, this.EndDate,secondInterval.StartDate,secondInterval.EndDate);
        }
        private bool HasIntersection(DateTime dateStart1, DateTime dateEnd1, DateTime dateStart2, DateTime dateEnd2)
        {
            if (dateEnd1 < dateStart2) return false; 
            if (dateEnd2 < dateStart1) return false; 
            return true;
        }
    } 
```

用法：

```
 var targetInterval = new DateInterval() {StartDate = new DateTime(2012, 1, 1), EndDate = new DateTime(2012, 1, 1)};
        var listOfIntervals =GetIntervals();//retrieve data
        var filteredList = listOfIntervals.Where(targetInterval.HasIntersection).ToList(); 
```

# wpf - RenderTransform 导致无效排列

> ID：12103199
> 
> 赞同：1
> 
> 时间：2012-08-24T04:33:24.903
> 
> 标签：wpf, rendertransform, arrangeoverride

所有文档似乎都表明设置 RenderTransform 不应该影响排列。但这并不是我所看到的行为。

我对控件布局有一个奇怪的要求。我想尽可能多地保留 wpf 的布局系统，所以我创建了一个继承 Decorator 的元素。我有一个附加属性来标记我感兴趣的元素。在排列期间，我调用了基本的 ArrangeOverride 方法，该方法用于布局使用正常过程取出元素。接下来，我浏览带有附加属性的控件，并使用渲染转换，将控件重新定位到我想要它们的位置。

在我使用项目控件之前，所有这些都可以正常工作。分配 RenderTransform 导致排列无效，并且我的排列方法被重复调用。文档似乎建议设置 RenderTransform 对 Arrange 没有影响。

# php - 使用 PHP 枚举 MySQL DB 中的多个单元格

> ID：12103201
> 
> 赞同：1
> 
> 时间：2012-08-24T04:33:36.327
> 
> 标签：php, mysql

**问题：**对于单个调查，我有几行结果。每个调查在“结果”表中可以有任意数量的行。有一个名为 key_value 的列。它是 0 或 -1。在 PHP 中枚举 MySQL 数据库中的几行、访问每个对象并在 PHP 中标记一个布尔值以告诉我这个特定调查是否有任何 key_value 为 0 的行的最快方法是什么？

像这样的东西，除了不蛮力它......

```
for (i = 0; i < mysqlrows.length; i++){
    if (mysqlrow.key_value == 0)
        flag = true;
     else
        flag = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:35:28.683

对所有匹配的（key_value = 0）结果进行操作：

```
$query = <<<EOD
    SELECT result_id
    FROM Results
    WHERE key_value = 0
EOD;

$pdo = new PDO(....);
$stmt = $pdo->prepare($query);
if ($stmt->execute()) {
    while ($result = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $result_id = $result['result_id'];
        //do something with this result?
    }
} 
```

但是，如果您只想要key_value = 0 的结果*数*，请使用一些 SQL，例如：

```
SELECT COUNT(*) as num_with_zero FROM Results WHERE key_value = 0 
```

# azure - 如何管理 Azure 表存储的直通式？（如 AWS）

> ID：12103204
> 
> 赞同：0
> 
> 时间：2012-08-24T04:34:43.647
> 
> 标签：azure, azure-table-storage

AWS dynamo db 有一个您可以设置的吞吐量参数。

Azure 表存储在这方面如何扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:28:30.603

Windows Azure 表存储不提供吞吐量参数，而是已经为 Azure 表存储设置了吞吐量，如[本文所述](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)。

单表分区——表分区是表中具有相同分区键值的所有实体，大多数表都有很多分区。单个分区的吞吐量目标是：

*   每秒最多 500 个实体
*   请注意，这是针对单个分区，而不是单个表。因此，具有良好分区的表每秒最多可以处理几千个请求（最多可达存储帐户目标）。

# swig - 是否可以将“文本”添加到 swig 中的现有类型映射？

> ID：12103206
> 
> 赞同：3
> 
> 时间：2012-08-24T04:34:53.587
> 
> 标签：swig

我找到了这个问题，但一个答案基本上是，你不想这样做：[在使用 Swig 为 C++ 代码构建 C# 包装器时，是否可以向现有方法添加代码？](https://stackoverflow.com/questions/11286913)

在所描述的情况下，我实际上同意它，其中​​ OP 试图以一种可能很脆弱的方式插入代码。就我而言，我正在按照答案的建议进行操作：重命名方法并使用 %typemap(javacode) 来实现包装方法。

但是我把它写成一个宏，我想重写几个方法，所以我最终多次调用 %typecode(javacode) ，只有最后一个包装方法 javacode typemap 是活动的。

宏的细节很复杂，因为它使用变量 args 来表达签名。

但证明了这个问题：

```
%define WRAP(CLASS,METHOD)
%rename(method ## _internal,fullname=1) CLASS::METHOD;
%typemap(javamethodmodifiers) CLASS::METHOD "private";
%typemap(javacode) {
    public void METHOD() {
       METHOD ## _internal();  // delegate to original
       // extra code here
    }
}   // (note: dont use %{ %} -- need macro evaluation)
%enddef

WRAP(Foo,bar)
WRAP(Foo,baz)

class Foo {
   void bar();
   void baz();
} 
```

只有公共 void baz() { baz_internal(); ... } 生成。这里的问题是 %rename 和 %typemap(javamethodmodifiers) 是唯一的，因为 CLASS::METHOD 的范围，但 %typemap(javacode) 适用于整个类。如果语法像

```
 %typemap(javacode,append=true) {   // code   } 
```

得到支持，那么这将解决问题。有没有什么技术可以做到这一点？这对于像 javacode 或 javaimports 这样的类型映射有意义，它们的默认值是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:07:48.130

我可以制作一个 SWIG 宏来生成您正在寻找的代码。这有点麻烦，但它确实有效。诀窍是滥用 javaout（noblock=1）类型映射而不是 javacode，以便每个函数应用一次，而不是每个类应用一次：

```
%module test

%define WRAP(CLASS,METHOD)
%rename(METHOD ## _internal,fullname=1) CLASS::METHOD;
%javamethodmodifiers CLASS::METHOD "private";
%typemap(javaout,noblock=1) void CLASS::METHOD {
  {
    $jnicall;
  }

  public void METHOD() {
    METHOD ## _internal();
    // some other bits
  }
}
%enddef

WRAP(Foo,bar)
WRAP(Foo,baz)

class Foo {
public:
   void bar();
   void baz();
}; 
```

这会生成您正在寻找的代码，但我怀疑您可以`%rename`完全跳过并从 javaout 类型映射中完成所有操作。这种方法适用于 SWIG 1.3 及更高版本。

我确实尝试了另一种方法`$typemap`并复制类型映射，但这最终没有成功。

如果你想支持也返回东西的方法，你需要添加第三个宏参数：

```
%define WRAP(CLASS,METHOD,RETURN)
%rename(METHOD ## _internal,fullname=1) CLASS::METHOD;
%javamethodmodifiers CLASS::METHOD "private";
%typemap(javaout,noblock=1) RETURN CLASS::METHOD {
    $typemap(javaout,RETURN)

  public $typemap(jstype,RETURN) METHOD() {
    RETURN result = METHOD ## _internal();
    // some other bits
    return result;
  }
}
%enddef 
```

`$typemap`用于引用默认的、不太专业的类型映射，以避免为非原始/特殊情况返回重复大量代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-15T18:44:10.287

以下是三个解决方案。将 SOLUTION 的定义更改为 1、2 或 3 以尝试它们中的每一个。

*   SOLUTION 1 使用 SWIG-3.0.12 中添加的 %proxycode 功能，专门解决这个问题。
*   解决方案 2 使用默认类型映射方法的复制/粘贴/修改。这几乎就是类型映射的全部目的，即采用现有的类型映射并对其进行自定义以获得所需的生成代码。
*   解决方案 3 在用户类型映射中重用另一个（默认）类型映射的内容。

```
%module example

#define SOLUTION 1

#if SOLUTION==1
%define WRAP(CLASS,METHOD)
%rename(METHOD ## _internal) CLASS::METHOD;
%typemap(javamethodmodifiers) CLASS::METHOD "private";
//%typemap(javacode) {
%extend CLASS {
%proxycode %{
  public void METHOD() {
     METHOD ## _internal();  // delegate to original
     // extra code here
    System.out.println("extra code in " + #METHOD + " SOLUTION 1");
  }
%}
}
%enddef
#elif SOLUTION==2
%define WRAP(CLASS,METHOD)
%typemap(javaout) void CLASS::METHOD {
    // Next line is copied from java.swg: %typemap(javaout) void
    $jnicall;
    // extra code here
    System.out.println("extra code in " + #METHOD + " SOLUTION 2");
  }
%enddef
#elif SOLUTION==3
%define WRAP(CLASS,METHOD)
%typemap(javaout) void CLASS::METHOD {
    // Next line re-uses/includes the typemap in java.swg: %typemap(javaout) void
    $typemap(javaout, void);
    // extra code here
    System.out.println("extra code in " + #METHOD + " SOLUTION 3");
  }
%enddef
#else
#error "Bad SOLUTION"
#endif

WRAP(Foo,bar)
WRAP(Foo,baz)

%inline %{
class Foo {
public:
   void bar();
   void baz();
};
%}
%{
#include <iostream>
   void Foo::bar() { std::cout << "Foo::bar " << std::endl; }
   void Foo::baz() { std::cout << "Foo::baz " << std::endl; }
%} 
```

# jquery - jquery $(window).height() 正在返回文档高度

> ID：12103208
> 
> 赞同：110
> 
> 时间：2012-08-24T04:35:10.447
> 
> 标签：jquery

我确定我正在犯一个简单的错误，但我只是在发出警报`$(window).height()`，它返回的值与`$(document).height()`.

我在一个 13 英寸的 MBA 上，我的浏览器窗口高度在 780 像素 - 820 像素（大约）之间最大化时，但每次它返回的窗口高度与文档高度相同。在我正在处理的网站上的每种情况下超过 1000 像素。

这里发生了什么？

```
alert($(window).height());
alert($(document).height()); 
```

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-10-15T18:48:57.963

如果没有`doctype`标签，Chrome 会为两个调用报告相同的值。

添加严格的文档类型 like`<!DOCTYPE html>`会导致值按宣传的方式工作。

`doctype`标签必须是文档中的第一件事*。*例如，你不能在它之前有任何文本，即使它没有渲染任何东西。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-09-25T17:54:26.020

我有同样的问题，并使用它解决了它。

```
var w = window.innerWidth;
var h = window.innerHeight; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T05:04:11.060

这是一个问题和答案： [screen.availHeight 和 window.height() 之间的区别](https://stackoverflow.com/questions/3044230/difference-between-screen-availheight-and-window-height)

也有图片，所以你可以实际看到差异。希望这可以帮助。

基本上，`$(window).height()`为您提供浏览器窗口（视口）内的最大高度，并`$(document).height()`为您提供浏览器内文档的高度。大多数情况下，它们将完全相同，即使使用滚动条也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T04:47:35.650

我认为您的文档在窗口中必须有足够的空间来显示其内容。这意味着无需向下滚动即可查看文档的更多部分。在这种情况下，文档高度将等于窗口高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T05:48:58.457

如果我们在我们的网页上使用 Doctype，它确实有效，jquery(window) 将返回视口高度，否则它将返回完整的文档高度。

在您的网页顶部定义以下标签： `<!DOCTYPE html>`

# pyqt - 默认情况下，如何在我的 lineEdit 中选择所有文本？

> ID：12103209
> 
> 赞同：1
> 
> 时间：2012-08-24T04:35:09.590
> 
> 标签：pyqt

我希望能够在我的 lineEdit 中突出显示所有文本。但是，默认的 selectAll() 似乎没有这样做。

```
import sys
from PyQt4 import QtCore, QtGui
from gui import Ui_Form

class MyForm(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_Form()
        self.ui.setupUi(self)
        self.ui.lineEdit.setText("Type something here!")
        self.ui.lineEdit.selectAll()
        QtCore.QObject.connect(self.ui.pushButton, QtCore.SIGNAL("clicked()"), self.ui.textEdit.clear)
        QtCore.QObject.connect(self.ui.lineEdit, QtCore.SIGNAL("returnPressed()"), self.add_entry)

    def add_entry(self):
        self.ui.lineEdit.selectAll()
        self.ui.lineEdit.cut()
        self.ui.textEdit.append("")
        self.ui.textEdit.paste()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MyForm()
    myapp.show()
    sys.exit(app.exec_()) 
```

我想在默认构造函数中选择 lineEdit 上的文本；但是，事实并非如此。这有什么原因吗？我应该怎么做才能做到这一点？

# python - 没有记录失败 Postgres/Psycopg2 copy_from 的错误

> ID：12103218
> 
> 赞同：17
> 
> 时间：2012-08-24T04:36:38.980
> 
> 标签：python, database, postgresql, psycopg2

以下代码不会引发错误。但它也没有在我的数据库中放入任何值。除主键上的索引外，已取消表中的所有约束。这两个字段都是字符串。有任何想法吗？最令人困惑的是没有记录错误。

```
conn = psycopg2.connect("dbname=<mydbname> user=postgres password=<mypassword>")
cur = conn.cursor()
output = StringIO.StringIO()
output.write('Citizen Caine\tMy_API_id\n')
cur.copy_from(output, 'movie', columns=('title','api_id'))
conn.commit() 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T04:45:42.637

我也为此苦苦挣扎。一些隐藏的知识是您必须执行以下操作：

```
output.seek(0) #put the position of the buffer at the beginning 
```

在你之后`write`，或者如果你从一个数据库移动到另一个数据库，在你做一个`copy_to`.

很容易忘记`StringIO`对象具有[文件对象的所有相同方法和属性。](http://docs.python.org/library/stdtypes.html#file-objects)

# objective-c - 升级 XCode 导致十六进制格式说明符的警告

> ID：12103227
> 
> 赞同：1
> 
> 时间：2012-08-24T04:37:31.273
> 
> 标签：objective-c, xcode

以下代码行：

```
[colHeader appendFormat:@"%C", 0x2193]; 
```

抛出这个警告：

格式指定类型“无符号短”，但参数的类型为“int”

当我升级到 Xcode 4.4（升级编译器？）时，这开始出现。警告会让我发疯......关于如何删除它的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:25:02.710

好吧，我猜最简单的事情就是投射它：

```
[colHeader appendFormat:@"%C", (ushort) 0x2193]; 
```

您可以通过附加一个“u”来指定一个值是无符号的，例如，0x2193u。但是，该常量将是一个无符号整数，而不是无符号短整数，因此这对您没有帮助，因为您仍然会收到警告。

# c++ - C中的数值组合

> ID：12103228
> 
> 赞同：2
> 
> 时间：2012-08-24T04:37:45.157
> 
> 标签：c++, algorithm

我想不出一个通用代码来解决像这个例子这样的问题

我在向量中有 1、2 和 3 或 12345.... 取决于输入。

有 6 种可能的组合，无需再次重复相同的数字

123
132
213
231
321
312

任何人都可以帮忙吗？

这是我使用的功能之一。我有另一个用于实际组合

```
void troca(int *a, int *b)
{
    int x;

    x=*a;
    *a=*b;
    *b=x;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:04:28.973

你用的是c++吗？（你提到了矢量）

试试[next_permutation](http://www.cplusplus.com/reference/algorithm/next_permutation/)

# .net - Entity Framework 5.0 基准测试

> ID：12103230
> 
> 赞同：7
> 
> 时间：2012-08-24T04:37:53.257
> 
> 标签：.net, entity-framework, ado.net, linq-to-entities, benchmarking

我正在实习，我被要求评估新 Entity Framework 5.0 的性能变化。我个人从未使用过实体框架，也没有任何类型的大型数据库或查询来进行适当的基准测试。

我一直在使用 LINQ 查询的 for 循环针对 .NET 4.5 进行一些简单的测试，以尝试自动编译查询并查看从我定位到 .NET 4.0 时的某种性能变化，但我没有能够看到任何类型的性能变化。

是否有任何已经完成的实体框架基准测试可以显示新版本的实体框架何时具有更好的性能？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:51:54.397

一些事情：

*   如果您想比较 .NET 4 和 .NET 4.5 之间的性能变化，您必须拥有两台机器，因为 .NET 4.5 是就地升级。在机器上安装 .NET 4.5 将“消除”在旧 .NET 4.0 上运行的可能性（感谢 Microsoft 的这场噩梦）。您可以将项目定位到 .NET 4，但在运行时，如果已安装，您将始终在 .NET 4.5 上运行。
*   找到性能改进可能非常困难，因为查询生成中没有真正变化的列表，但您应该感兴趣的两个领域是：
    *   自动编译查询 - 带有 .NET 4.5 的 EF5 中的自动功能。此功能应该会提高查询的后续执行速度 - 第一次执行仍将比 .NET 4 中的“慢”甚至“慢”
    *   Table-per-hierarchy 查询中的优化。这通常应该改进仅针对继承结构中的单一类型或仅从基本实体投影字段的查询。在 .NET 4 中，这总是会导致连接派生实体的所有表，即使它们不需要。我还没有尝试过这种改进，所以我很乐意在这里阅读您的发现。

# jsp - 后退按钮重定向到登录页面

> ID：12103232
> 
> 赞同：1
> 
> 时间：2012-08-24T04:38:21.637
> 
> 标签：jsp, jstl

在 JSP 中开发代码。

登录后，我正在设置会话并防止“后退按钮”重定向回登录页面，我在登录页面中使用了这个：

```
<c:if test="${not empty user}">
<c:redirect url="home.jsp"></c:redirect></c:if> 
```

user 是正在设置的会话对象。代码不起作用。请指教。

# php - 通过 Web 应用程序的特定文件夹存储图像并检索它的简单功能？

> ID：12103233
> 
> 赞同：-2
> 
> 时间：2012-08-24T04:38:34.383
> 
> 标签：php, mysql, html, pdo

我正在使用 WAMP，并且我的数据库中有一个需要 ID、名称、路径照片等的表。我的 Web 应用程序中有一个文件夹，用于存储用户的所有照片。并且每个用户都可以上传他们的单张照片并将其存储在特定文件夹中，当用户登录时，与用户匹配的照片将显示在用户的主页上我使用 html 作为我的前端和 PHP 作为我的后端-结尾。如果用户决定自动更改照片，新照片将覆盖或删除用户的旧照片。在此使用什么功能？我需要你所有的建议或意见。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:01:29.517

这是你如何做的，一个粗略的代码。您的 html 表单

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

和你的 php 页面 uploader.php

```
<?php

// Where the file is going to be placed 
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 
//a destination path with filename. Make sure your uploads folder have read write permission

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}

//Save user info into database along with a filename that has been uploaded, i.e. basename( $_FILES['uploadedfile']['name']

Now you have uploaded file to a folder, when user edits his profile you can delete image using php's unlink function and upload a new image as you have done above
?> 
```

# c# - 复选框更新语句

> ID：12103234
> 
> 赞同：1
> 
> 时间：2012-08-24T04:38:42.753
> 
> 标签：c#, asp.net, checkbox

我想知道如何使用后面代码中的更新语句来更新复选框。

我正在使用带有订单信息的网格视图，并带有一个复选框来设置订单是否完成。最初它被设置为假。

我有一个下拉列表，其中包含我在更新语句中使用的订单 ID 号（我使用的变量是 OrderID）

我尝试了这个更新语句，但它似乎不起作用：

```
strSQL = "UPDATE Order SET OrderCompleted = true  WHERE OrderID = " + OrderID; 
```

谁能帮忙，我已经研究了一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:46:14.803

试试这个： -

```
strSQL = "UPDATE [Order] SET OrderCompleted = 1 WHERE OrderID = " + OrderID; 
```

在 SQL 中，没有布尔数据类型，但有一种数据类型`bit`接受零 (0) 或一 (1) 但不接受真或假。由于您使用的是复选框，因此您需要在传递给查询之前将布尔值转换为整数。

其次，正如@nunespascal 在 Order 词周围大括号 [] 所提到的，因为 Order 是 SQL 关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T04:41:02.253

order是sql中的保留字。与 order by 子句一起用于对行进行排序。

`[]`如果它们是关键字，请使用它们封装您的表和列名称。

试试这个：

```
strSQL = "UPDATE [Order] SET OrderCompleted = 1 WHERE OrderID = " + OrderID + ""; 
```

# ios - Objective-C/Cocoa-touch 中的变量

> ID：12103236
> 
> 赞同：0
> 
> 时间：2012-08-24T04:39:19.773
> 
> 标签：ios, variables

我在这里有这个等式：

```
gas.text = [[ NSString alloc] initWithFormat:@"$%f", totalDistance  *0.000621371/30  *4.00]; 
```

我想要 30 和 4.00 一个变量，所以用户可以在设置中随时更改数字。谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:45:54.927

将它们创建为 Int 的变量并加倍代替

```
Int varforInt;
double varfordouble;
gas.text = [[ NSString alloc] initWithFormat:@"$%f", totalDistance  *0.000621371/varforInt  *varfordouble]; 
```

您可以获取这些变量中的值，它会动态变化。

**更新：-**获取文本并且有一种方法 intValue 所以使用那个`[text intValue]`

# php - 查找值并调用另一个值 - php数组

> ID：12103240
> 
> 赞同：1
> 
> 时间：2012-08-24T04:40:36.183
> 
> 标签：php, arrays, cakephp

我有下面的数组，理想情况下我正在寻找一种匹配一个值并打印出另一个值的方法。

例如

```
if($randomvalue  == $cards[Card][unit_id]) { echo $cards[SaleDetail][date_pid_signed]; } 
```

我不确定如何使上述内容与当前的数组结构一起使用，如下所示。

有什么想法可以解决这个问题吗？

谢谢

```
$cards = Array
(
[0] => Array
    (
        [Card] => Array
            (
                [id] => 210
                [property_id] => 4
                [unit_id] => 90
            )

        [SaleDetail] => Array
            (
                [property_agent] => 
                [date_pid_signed] => 2012-06-15
                [property_date_listed] => 
            )

    )

[1] => Array
    (
        [Card] => Array
            (
                [id] => 209
                [property_id] => 4
                [unit_id] => 103
            )

        [SaleDetail] => Array
            (
                [property_agent] => 
                [date_pid_signed] => 2011-10-21
                [property_date_listed] => 
            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:51:42.727

使用`$cards[0]['Card']['unit_id']`和`$cards[0]['SaleDetail']['date_pid_signed']`。注意索引`[0]`。然后您可以使用`[1]`.

您可能还想检查`foreach`或`for`循环！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:53:48.683

```
foreach($cards as $card){
    if($randomvalue  == $card[Card][unit_id]) { 
       echo $card[SaleDetail][date_pid_signed]; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:53:08.063

```
if($randomvalue  == $cards[0][Card][unit_id]) { echo $cards[0][SaleDetail][date_pid_signed]; } 
```

你也可以

```
foreach($cards as $card)
{
    if($randomvalue  == $card[Card][unit_id]) 
    { 
       echo $card[SaleDetail][date_pid_signed]; 
     }
} 
```

# c# - 从字符串中删除列及其值

> ID：12103243
> 
> 赞同：0
> 
> 时间：2012-08-24T04:41:04.000
> 
> 标签：c#

我有三个字符串

```
string a = "[ERROR] = any thing And [ID] > 20 And [NAME] like Varun";
string b = "[AGE] < 60 Or [ERROR] like Exception And [ID] > 20 And [NAME] like Varun And [ERROR] = any thing ";
string c = "[ID] > 20 And`enter code here` [NAME] like Varun And [ERROR] = any thing"; 
```

我想删除从 [ERROR] 开始的字符串到下一个运算符，如 And/Or.....

我想要像这样的答案

```
string a = "[ID] > 20 And [NAME] like Varun";
string b = "[AGE] < 60 And [ID] > 20 And [NAME] like Varun";
string c = "[ID] > 20 And [NAME] like Varun"; 
```

我怎样才能删除..???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:48:34.490

如果您对正则表达式不满意（我假设您不满意），您可以使用以下伪代码：

1.  将字符串拆分为单词（以空格分隔）

2.  扫描单词列表，如果相等`[ERROR]`则跳过所有单词直到下一个单词开头`[`和结尾`]`

3.  如果单词以开头`[`和结尾，`]`则将其添加到输出以及所有后续不以 a 开头和以 a`[`结尾的单词`]`。

    ```
    public static String FilterString(string value)
    {
      string[] lsWords = value.Split(' ');
      StringBuilder lsbBuilder = new StringBuilder();

      bool lbIncluding = true;

      foreach(String lsWord in lsWords)
      {
        if (lsWord.StartsWith("[") && lsWord.EndsWith("]"))
           lbIncluding = (lsWord != "[ERROR]");

        if (lbIncluding)
        {
          if (lsbBuilder.Length > 0) lsbBuilder.Append(' ');
          lsbBuilder.Append(lsWord);
        }
      }

      return lsbBuilder.ToString();
    } 
    ```

    ……

    ```
    string a = "[ERROR] = any thing And [ID] > 20 And [NAME] like Varun";
    string b = "[AGE] < 60 Or [ERROR] like Exception And [ID] > 20 And [NAME] like Varun And [ERROR] = any thing ";
    string c = "[ID] > 20 And`enter code here` [NAME] like Varun And [ERROR] = any thing";

    a = FilterString(a);
    b = FilterString(b);
    c = FilterString(c); 
    ```

这是输出：

```
[ID] > 20 And [NAME] like Varun
[AGE] < 60 Or [ID] > 20 And [NAME] like Varun And
[ID] > 20 And`enter code here` [NAME] like Varun And 
```

这并没有摆脱 ANDS / ORS 等，你需要自己做一个，但这应该给你一个很好的起点。

# sqlite - 没有这样的表错误

> ID：12103244
> 
> 赞同：24
> 
> 时间：2012-08-24T04:41:08.793
> 
> 标签：sqlite, xcode4

我不得不搜索有关这些错误的许多帖子，但我仍然无法解决问题。这是我的代码，谁能帮我看看出了什么问题？

```
- (void) copyDatabaseIfNeeded {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
   NSString *path = [documentsDirectory stringByAppendingPathComponent:@"SQL.sqlite"];

    if (sqlite3_open([path UTF8String], &newDBconnection) == SQLITE_OK) 
    {
        NSLog(@"Database opened successfully");

if(updateStmt == nil) {
            NSString *updStmt = [NSString stringWithFormat: @"UPDATE Coffee SET CoffeeName = '500 Plus', Price = '1.40' Where CoffeeID= '3'"];
   const char *mupdate_stmt = [updStmt UTF8String]; 

if(sqlite3_prepare_v2(newDBconnection, mupdate_stmt, -1, &updateStmt, NULL) != SQLITE_OK){
NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(newDBconnection));
            } else {
                NSLog(@"Update successful");
            }

        }
        if(SQLITE_DONE != sqlite3_step(updateStmt))
            NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(newDBconnection));
        else {
            sqlite3_reset(updateStmt);
            NSLog(@"Step successful");

        }
    } 
    else 
    {
        NSLog(@"Error in opening database  ");
    }
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-24T07:15:04.297

中没有表`Coffee`。`SQL.sqlite`

如果数据库文件不存在，SQLite 会静默创建数据库文件。因此，如果您`path`弄错了，您将打开*一个空的数据库文件*，其中当然不包含任何表。确保数据库文件在那里存在并且不为空。

`SELECT * FROM sqlite_master;`您可以通过运行查询来查看数据库中有哪些表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T07:08:29.147

当我遇到数据库问题（在这种情况下为 Oracle）时，我的 DBA 告诉我的一件事是使用命令行工具尝试查询。

这是您诊断 sqlite3 和 iPhone 模拟器问题的方法：

1.  在 iPhone 模拟器中运行应用程序，以便在 Documents 目录中创建/复制数据库。
2.  启动终端
3.  `cd ~/Library/Application Support/iPhone Simulator/<version>/Applications/<your-app-hash>/Documents`. 最好只在模拟器中安装一个 App，这样 App 是什么一目了然。
4.  `sqlite3 SQL.sqlite`并从那里尝试您的查询。您还可以使用该`.schema`命令查看架构的外观。

如果查询在那里工作而不是在你的应用程序中，那么你知道你有一个错误，否则你有一个 sqlite 查询问题或损坏的架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-16T12:41:16.400

尝试重新安装应用程序。这些表是在安装应用程序时创建的。有时它可能会发生，因为没有创建表

# php - 向另一个 URL 发送 PHP 脚本的请求？

> ID：12103245
> 
> 赞同：0
> 
> 时间：2012-08-24T04:41:21.633
> 
> 标签：php, web

所以我在一个网站上有一个联系表，但我想在另一个网站上使用邮件功能。我可以制作表单并获取文本并在 PHP 邮件功能中发送它们就好了，我只是不确定如何在不打开另一个选项卡的情况下为另一个网站执行此操作。

另外，我什至不知道该怎么称呼它。

例如：我在一个网站上有文本字段和提交按钮，我想将该数据发送到另一个 URL，如下所示：

[http://myurl.com?act=phptools&email=example@test.com&subject=Hello&message=](http://myurl.com?act=phptools&email=example@test.com&subject=Hello&message=How)你好吗？

如果不在浏览器中打开另一个选项卡，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:45:02.787

只需将`action`表单的属性设置为其他域上处理脚本的 URL。

但是请确保这是安全的，我的意思是，如果您控制第二个域，那么就可以了。否则，您可能不得不担心与另一个域共享数据。但是，我不知道您的要求是什么:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:48:06.517

将`action`表单的属性设置为其他网站的 url。提交时的用户将被带到那里，并且在成功/失败时，您可以将用户重定向到旧网站 url 或您想要的任何地方。

更好地使用 XHR/Ajax，这样请求是在幕后发出的，您需要做的就是根据您从其他网站 url 发送的 json 响应显示错误消息/成功消息。但是，这种方法存在一些限制，因为浏览器不允许跨源请求。因此，请检查您是否可以启用 COR！

您可以做的另一件事是仅向当前网站 url 发送请求，这将与其他网站 url server-size 交互，希望它有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T04:52:38.343

据我了解您的问题，您可以为此使用 CURL php 函数

```
<?php
    $urltopost = "http://somewebsite.com/script.php";
    $datatopost = array (
                            "firstname" => "ex_name",
                            "lastname" => "ex_lastname",
                            "email" => "my@email.com",
                        );`enter code here`
    <span id="more-40"></span>`enter code here

    $ch = curl_init ($urltopost);
    curl_setopt ($ch, CURLOPT_POST, true);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, $datatopost);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);

    $returndata = curl_exec ($ch);
?> 
```

# c - 需要知道一个数在运算后是否可整除

> ID：12103249
> 
> 赞同：0
> 
> 时间：2012-08-24T04:41:53.220
> 
> 标签：c, virtual-memory, integer-division

我有一个数字，我在其上执行特定操作，我想确保该数字在操作后仍可整除。

假设我有一个整数 x 可以被 PAGE_S 整除

这会产生一个整数，它也可以被 PAGE_S 整除？

```
x^ ~(PAGE_S-1); 
```

所以`(x % PAGE_S) == ( (x^ ~(PAGE_S-1)) % PAGE_S)`？据我测试，它有效，但我需要了解为什么......

ps 这是将虚拟内存地址转换为物理地址的代码的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:57:32.370

是的，但前提`PAGE_S`是 是 2 的幂。

如果`PAGE_S`是 2 的幂（例如 2 ^k），则其二进制表示是 1 后跟 k 0。因此，`PAGE_S-1`将是二进制的 k 1，`~(PAGE_S-1)`所有 1 后跟 k 0 也是如此。

xor 操作 (^) 将翻转第一个操作数中第二个操作数中对应位为 1 的任何位；例如，101101 ^ 111000 是 010101，因为前三位被翻转。

由于`x`可被 整除`PAGE_S`，因此最后 k 位必须为零。由于 的最后 k 位`~(PAGE_S-1)`也为零，因此 的最后 k 位`x^~(PAGE_S-1)`为零，因此可以被 整除`PAGE_S`。这也会反转 的所有其他位`x`。

# delphi - 在 TextFile 中搜索具有特定字符串的 Line

> ID：12103251
> 
> 赞同：1
> 
> 时间：2012-08-24T04:42:24.237
> 
> 标签：delphi

是否可以逐行搜索 TextFile 以查找特定字符串。IE。Hello 它逐行搜索以查找是否有任何行包含 Hello。每行只有一个字符串。这可能吗？如果是这样，我该如何尝试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T06:38:55.943

将整个文件加载到内存中当然是最简单的。如果您的文件足够小，那么您可以这样做：

```
found := false;
sl := TStringList.Create;
try
  sl.LoadFromFile(fileName);
  for line in sl do
    if Pos('Hello', line)<>0 then
    begin
      found := true;
      break;
    end;
finally
  sl.Free;
end; 
```

我假设当你说

> 如果任何行中有 Hello

您正在寻找包含搜索字符串的行而不是等于搜索字符串的行。

* * *

在评论中你问：

> 好的，然后我可以问是否可以询问如何从文件中删除从编辑框中键入的字符串？因此，您在编辑框中输入一个字符串，然后它会在文件中搜索它并删除该行？

这是上面的一个简单的变体：

```
procedure RemoveLinesContaining(const fileName, searchText: string);
var
  sl: TStringList;
  i: Integer;
begin
  sl := TStringList.Create;
  try
    sl.LoadFromFile(fileName);
    for i := sl.Count-1 downto 0 do
      if Pos(searchText, sl[i])<>0 then
        sl.Delete(i);
    sl.SaveToFile(fileName);
  finally
    sl.Free;
  end;
end; 
```

此函数删除**所有**包含搜索字符串的行。如果您只想删除第一行，请在调用 Delete 后跳出 for 循环。

循环变量正在下降以允许循环修改列表。

如果你想使用不同的测试，比如相等而不是包含，那么只需修改 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:05:14.360

一个简单的方法是使用`TStringList.LoadFromFile`加载文件，然后检查`IndexOf('hello')`- 如果它大于`-1`，则字符串在文件中。

```
var
  sl : TStringList;
  ix : Integer;
begin
  sl := TStringList.Create;
  try      
    sl.LoadFromFile('test.txt'); 
    ix := sl.IndexOf('Hello');
    if ix > -1 then ShowMessage('Yup, the file contains a greeting.');
  finally 
    sl.Free;
  end;
end; 
```

# ruby-on-rails - Carrierwave（开发环境）图像中的本地存储设置不能很好地渲染

> ID：12103257
> 
> 赞同：2
> 
> 时间：2012-08-24T04:43:08.797
> 
> 标签：ruby-on-rails, carrierwave

为什么我会看到这样的画面...

[http://i46.tinypic.com/16bn0js.png](http://i46.tinypic.com/16bn0js.png)

图像存储在我的 tmp/uploads 文件夹中：

顺便说一句，我把这个条件放在我的 ads_uploader.rb

```
 if Rails.env.production?
    CarrierWave.configure do |config|
      config.storage :fog
      def store_dir
      "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
      end

      def cache_dir
      "#{Rails.root}/tmp/uploads"
      end
    end
  end

  if Rails.env.development?

    CarrierWave.configure do |config|
      config.root = Rails.root
      config.storage :file

      def
      store_dir
        "#{Rails.root}/tmp/uploads"

      end

      #I am not sure about this one ~SS
      def cache_dir
        "#{Rails.root}/tmp/uploads"
      end
    end

  end 
```

上传过程在开发环境中成功。该文件存储在 tmp/uploads 目录中。

但是在查看它的同时。

ads.html.haml：

图像未显示。（见上面的图片网址）

请帮忙。我错过了诸如 url 之类的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:36:30.853

尝试

```
def store_dir
  "#{Rails.root}/public/uploads"
end 
```

“/tmp”无权直接服务资产，移至公开并查看

# php - 不稳定的 While 循环结果

> ID：12103259
> 
> 赞同：0
> 
> 时间：2012-08-24T04:43:19.380
> 
> 标签：php, while-loop

我创建了一个为用户生成随机图像的 while 循环。每次我加载页面时，while 循环都会生成随机数量的图像。我希望它显示 10 个，但它会产生 3-10 个图像。我检查了数据库，`user_id`每个条目都是唯一的。我不知道它为什么这样做。代码有什么问题？我还将接受一个可以指向一个方向（教程链接）的答案，以便以更好的方式重写此代码。

```
<?php

$query = mysql_query("SELECT `user_id` FROM  `users` ORDER BY RAND() LIMIT 0, 10");

$r = 1;

while ($results_row = mysql_fetch_assoc($query))

    {   

$var_1 = $results_row['user_id']; 

    $getting_essentials = mysql_query("SELECT 

    `band_name`,`donated_money`,`donated_time` FROM `create_project` WHERE `user_id` = 

    $var_1");

    $getting_results = mysql_fetch_assoc($getting_essentials);

$bandsname = $getting_results['band_name'];

if (isset($bandsname) === true) {       

$donatedmoney = $getting_results['donated_money'];

$donated_time = $getting_results['donated_time'];   

$var_2 = username_from_user_id($var_1); 

$image_name = 'images/' . md5($var_2) . '_' . $var_1;       

    echo '<a href="' . $var_2 . '"><img src="' . $image_name . '" class="'.$r.'" 

    width="300" height="185"/></a>';

} 
$r++;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:49:53.287

我看到了几个*潜在*的问题。

首先，什么是`var_2`？它似乎没有设置在任何地方。

其次，看起来您将获得与表中唯一用户 ID 一样多的图像。在我看来，这似乎是一种尝试获取十张图像的奇怪方式。

第三，您用于图像的实际文件名是使用用户 ID 构建的。很可能并非所有文件都存在。

检查最后一点的一种方法是在浏览器中简单地执行“查看源代码”操作。

可能您总是得到 123 张图像（假设您有 123 个不同的用户 ID），但其中一些不存在。

作为一个低级调试练习，您可以插入代码来回显调试语句（以 HTML 格式），这样您就可以看到幕后发生的事情。这通常是确定问题的最快方法。换句话说，在您的代码中添加以下内容：

```
$bandsname = $getting_results['band_name'];     # Existing line
echo 'bandsname is "' . $bandsname . '".<br>';  # new line 
```

通过这样做并检查输出，这将比尝试对代码进行静态分析更明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:51:59.627

以下帖子将为您的答案提供解决方案 [http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-从表/](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)

# mysql - 在 MySQL 中的多个列上有所不同

> ID：12103263
> 
> 赞同：3
> 
> 时间：2012-08-24T04:44:05.820
> 
> 标签：mysql, sql, count, distinct

我希望找出 MySQL DB 中不同行的数量。

```
id | val1 | val2 | val3

1  |  1   |  1   |  1
2  |  1   |  1   |  1
3  |  2   |  2   |  2
4  |  2   |  2   |  2 
```

在上面的表格中，查询将返回

```
val1 | val2 | val3 | count
1    |   1  |  1   |   2 
2    |   2  |  2   |   2 
```

有谁知道在 MySQL 中实现这一目标的合理有效的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:46:01.033

您需要为此使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)子句：

```
SELECT val1, val2, val3, count(*) AS count
FROM mytable GROUP BY val1, val2, val3 
```

# [*看到这个小提琴*](http://sqlfiddle.com/#!2/0807d/4)

# java - AOP的范围

> ID：12103264
> 
> 赞同：3
> 
> 时间：2012-08-24T04:44:25.690
> 
> 标签：java, aop

我想知道人们对应用 AOP 的偏好。

例如。如果在阅读文章时应该增加点击数，我应该应用 AOP 来查看方法吗？或者只是在 view() 中调用 increaseHitCount()？

在我对此事的看法中，我猜 increaseHitCount() 不是 view() 方法的主要目的，而是辅助问题。

```
public DAO dao;

public Article view() {
    dao.increaseHitCount(); //<-- I think this is not for here.

    return dao.getArticle();
} 
```

但是，我只是担心代码越来越难以被整个源代码中应用的 AOP 理解和阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:45:23.270

AOP 将帮助您使您的代码更加正交，并且还有助于防止代码重复。我的经验是方面用于一般系统方面的功能。考虑一下命中计数是否与页面逻辑的其余部分松散耦合，是否足够通用。如果是的话是可以接受的（或可取的）将其用作一个方面。另一方面，AOP 带来了开销，但例如 AspectJ 确实很快。
在这种情况下，如果在项目中使用 AOP，我会考虑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:03:07.100

AOP 旨在更好地分离[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)。在这种情况下，您要处理两个问题：文章视图和点击次数统计。因此，您应该将它们分开。由于您不能仅通过 OOP 构造正确地将它们分开（您的视图方法将始终必须知道在返回视图之前要执行某些操作）AOP 是正确的解决方案。然而，许多人认为代码变得难以理解。这几乎取决于您使用它的程度和使用程度，也可能取决于底层 OO 架构的质量

# android - 我的应用没有在 google play 中显示

> ID：12103273
> 
> 赞同：0
> 
> 时间：2012-08-24T04:45:35.987
> 
> 标签：android, google-play, publishing

大约 18 小时前，我将我的应用程序上传到了 google-play，但它没有显示出来。开发人员控制台显示“已发布”。我想它应该可以在网址[https://play.google.com/store/apps/details?id=com.khasbuu.firstaid](https://play.google.com/store/apps/details?id=com.khasbuu.firstaid)上查看，但它给了我 404 错误。我究竟做错了什么？

我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.khasbuu.firstaid"
android:versionCode="3"
android:versionName="1.1" >

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="9" />

<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:icon="@drawable/app_icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar" >
    <receiver android:name=".mongolcontent.SMSRemover" >
        <intent-filter android:priority="1">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    <activity
        android:name=".FirstAidActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".ShowChapterActivity" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".ShowContactActivity" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".DonationActivity" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".LikeActivity" >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <provider
        android:name=".providers.FirstAidProvider"
        android:authorities="com.khasbuu.firstaid" >
    </provider>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:02:21.547

检查开发者控制台主页；确保它在右侧显示“已**发布”（这在两种设计中都是相同的）。**如果它这样说，并且您的所有字段都有效（例如，如果您编辑它并点击保存，则不会显示任何错误），您可能只需要等待更长时间。我的应用程序通常会在 2 小时内推送，但我听说它需要长达 23 小时。我认为这与谷歌的服务器流量（有多少应用程序正在等待处理）以及其他因素有关。值得注意的是，一旦您点击发布，该过程就会完全自动化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T20:17:47.490

我的应用程序也有类似的问题。我可以通过没有 .apk 的 .apk 文件名找到它，但无法通过标题字段中的名称找到它。这没关系，因为它还没有真正准备好迎接黄金时段。到了 2.0 版，我已经为更多的观众做好了准备，所以这不再是可以接受的了。

解决方案是让某人将其下载到他们的手机上并给予 4 星或更高的评价。然后在一小时内就可以在 Google Play 中按标题进行搜索。

在此之前它没有任何评论，因此较低的评论可能也有效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T04:44:47.363

您是否正在从用户电话中获取联系人？如果您在不知道用户的情况下获取用户联系人，这违反了 Google Play 协议。我认为这是您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T09:18:24.623

正如 Eric 所说，检查您是否已将您的应用程序移至“生产”，在定价和分发中检查您是否选择了国家，注意设备兼容性并检查您是否错误地排除了设备，最后写下与您的应用程序相关的应用程序标题和描述适当地。

# text - CORONA：如何在 CORONA 中隐藏和显示文本

> ID：12103282
> 
> 赞同：0
> 
> 时间：2012-08-24T04:47:05.823
> 
> 标签：text, hide, coronasdk

我有一个函数......

```
local text2 = display.newText("BOOM", 60,20)

function scale( event )
   if(appleCount == 10) then
      if text2.contentWidth < 1.5 * display.contentWidth then
         text2:scale(1.02, 1.02)
      else
         text2:scale(0.1, 0.1)
         Runtime:removeEventListener("enterFrame",scale)
      end
   end
end
Runtime:addEventListener("enterFrame",scale) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:26:35.573

text1.alpha=0--隐藏对象

text1.alpha=1--可见

alpha 范围是 0,0.1,0.2,.,.,1

isVisibile=true 或 false -- 它会发出一些时间警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:09:22.547

text.isVisible = true --可见文本

text.isVisible = false -- 隐藏文本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T10:11:18.793

您可以使用 object.alpha =0 使其不可见，使用 object.alpha=1 使其可见；alpha 值范围从 0 到 1。通过使用它可以控制对象的透明度。

# cocoa - 可可：为什么 for-each 比 for 循环快？

> ID：12103284
> 
> 赞同：3
> 
> 时间：2012-08-24T04:47:23.833
> 
> 标签：cocoa, for-loop

我的应用程序以两种方式读取所有联系人：

for循环：

```
 CFAbsoluteTime startTime = CFAbsoluteTimeGetCurrent ();
    long count = macContact.addressBook.people.count;
    for(int i=0;i<count;++i){
        ABPerson *person = [macContact.addressBook.people objectAtIndex:i];
        NSLog(@"%@",person);
    }
    NSLog(@"%f",CFAbsoluteTimeGetCurrent() - startTime); 
```

对于每个

```
 CFAbsoluteTime startTime = CFAbsoluteTimeGetCurrent ();
    for(ABPerson *person in macContact.addressBook.people){
        NSLog(@"%@",person);
    }
    NSLog(@"%f",CFAbsoluteTimeGetCurrent() - startTime); 
```

for-each 只用了 4 秒就枚举了 addressBook 中的 5000 人，而 for-loop 用了 10 分钟来完成同样的工作。

我想知道为什么性能差异很大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T04:50:35.683

性能上的差异几乎肯定与`macContact.addressBook.people`零件有关。您每次都通过 for 循环调用它，但只有一次使用 for-each 循环。我猜要么 要么`addressBook`属性`people`每次都不会返回缓存数据，而是返回新数据。

尝试使用

```
NSArray *people = macContact.addressBook.people;
for (int i = 0; i < [people count]; i++) {
    NSLog(@"%@", [people objectAtIndex:i];
} 
```

您可能会再次发现性能非常相似。

* * *

也就是说，for-each 通常比 for 更快。原因是 for 循环在每次通过循环`-objectAtIndex:`（

在最新版本的操作系统中，您可以更进一步，使用基于块的枚举方法。这看起来像

```
[macContact.addressBook.people enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL stop){
    NSLog(@"%@", obj);
}]; 
```

对于 NSArrays，这应该具有与 for-each 循环非常相似的性能。对于诸如字典之类的其他数据结构，这种样式可能更快，因为它可以随键一起获取值（而 for-each 只为您提供键并要求您使用消息发送来获取值）。

# java - Java 小程序声音问题，声音继续关闭，我无法签署声音文件

> ID：12103287
> 
> 赞同：2
> 
> 时间：2012-08-24T04:47:45.160
> 
> 标签：java, audio, applet, code-signing

所以我在做一个小游戏，我第一次在我的游戏中添加声音，但我遇到了两个问题，第一个是当我在浏览器中加载小程序时，当我关闭标签时完成后，背景音乐继续播放一会儿。我正在使用它来播放背景：

```
AudioClip audioClip = getAudioClip(getCodeBase(), "bg.wav");
audioClip.loop(); 
```

这在 init() 里面

我的第二个问题是，每当我启动小程序时，它都会显示警告说有签名和未签名代码的混合，并且它可能是不安全的。我以前从来没有得到过，所以我认为是声音文件，我该怎么办？

[http://www.FreeMinecraftHost.com/ParticleDefender](http://www.FreeMinecraftHost.com/ParticleDefender)是托管小程序的地方，如果您想查看它显示的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:17:57.310

我收到的警告没有说明“混合签名和未签名代码”，但我拒绝了“允许受信任代码”对话框来检查小程序是否可以在沙箱中工作。它似乎工作得很好，我可以左右移动，射击，摧毁敌人，被他们摧毁，听到（v。响亮的）音乐曲目，然后重新开始游戏。

由于 applet 元素仅指示一个 Jar，而主类在该 Jar 中，我无法理解您如何获得如您所见的消息。尽管如此，没有得到*任何*提示的解决方案似乎很明显。

**不要在罐子上签名！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:41:23.520

那家伙是个混蛋，弄乱了我的答案（就像我说的已经好几年了）

无论如何，这是我的音频处理程序，经过仔细检查，我发现在我的程序中我正在循环播放背景音乐，大约 1 分钟的音频文件。音频剪辑将在获胜/松散/或退出时被一个单独的非常短的剪辑中断，并且音频将自行终止。你可以通过播放一段没有任何内容或退出声音的短片来扼杀你的音乐。

顺便说一句，我在第一个答案中所说的并不是我们当时确实必须这样做的猜测。

```
private void musicHandler(int musicFunction)
 {
      for( int counter =0; counter < 3; counter++)
      audioClip[counter].stop();
        if(musicFunction == 0)
            audioClip[musicFunction].loop();
        else
             audioClip[musicFunction].play();

  }
 AudioClip audioClip[] = new AudioClip[10]; 
 private void musicLoader()
  {
    try
      {
        URL baseURL = new URL("file:" + System.getProperty("user.dir") + "/");
        URL completeURL = new URL(baseURL, "game.wav");
        audioClip[0] = Applet.newAudioClip(completeURL);
        completeURL = new URL(baseURL, "TAPS.WAV");
        audioClip[1] = Applet.newAudioClip(completeURL);
        completeURL = new URL(baseURL, "YEAH.WAV");
        audioClip[2] = Applet.newAudioClip(completeURL); 
        audioClip[0].loop();
       }
     catch (MalformedURLException exception) {}

     } 
```

# php - 创建 PHP 应用程序 windows 安装程序

> ID：12103294
> 
> 赞同：0
> 
> 时间：2012-08-24T04:49:00.133
> 
> 标签：php, installation

我有 php 项目 Web 应用程序（php、html、js、css、wampserver、mssql 数据库），我希望制作 Windows 安装程序向导，以便当用户想要在他们的 PC 上安装这个项目时，他们只需运行安装程序向导并安装它。

问候， 拉吉

# java - 使用概率估计进行分类的 ML 技术

> ID：12103295
> 
> 赞同：2
> 
> 时间：2012-08-24T04:49:17.080
> 
> 标签：java, python, machine-learning, weka, scikit-learn

我想实现一个 OCR 系统。我需要我的程序在它选择识别的字母上不犯任何错误。如果它不能识别其中很多也没关系（即即使召回率低也可以实现高精度）。

有人可以帮我为此选择合适的 ML 算法吗？我一直在环顾四周，发现一些令人困惑的事情。例如，我发现关于 SVM 的说法自相矛盾。在[scikits learn docs](http://scikit-learn.org/0.11/modules/svm.html)中，提到我们无法获得 SVM 的概率估计。然而，我发现另一个[帖子](http://forums.pentaho.com/showthread.php?59206-SVM-output-classification-as-probability)说可以在 WEKA 中执行此操作。

无论如何，我正在寻找一种最适合此目的的机器学习算法。如果您也可以为该算法推荐一个库，那就太好了。我更喜欢基于 Python 的解决方案，但我也可以使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:13:22.877

scikit-learn 中的 SVM可以通过在构造对象*时*进行简单的设置来获得概率估计。文档仅警告概率估计可能不是很好。`probability=True``SVC`

典型的概率分类器是[逻辑回归](http://scikit-learn.org/0.11/modules/linear_model.html#logisitic-regression)，因此您可以尝试一下。请注意，LR 是一个线性模型，不像 SVM 可以通过使用内核来学习复杂的非线性决策边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:56:51.777

我见过人们使用[神经网络](http://en.wikipedia.org/wiki/Neural_network)取得了很好的效果，但这已经是几年前的事了。我问了一位专家同事，他说现在人们使用[最近邻](http://en.wikipedia.org/wiki/Nearest_neighbor_%28pattern_recognition%29)分类器之类的东西。

我不知道 scikit 或 WEKA，但任何半体面的分类包都应该至少实现 k-最近邻。或者您可以自己实现它，这非常容易。试一试：它的精度可能比您想要的要低，但是您可以稍作修改，而不是进行简单的多数投票（即邻居中最频繁的类别获胜），您需要邻居之间更大的共识才能分配一个类别（例如，至少 50% 的邻居必须属于同一类别）。您需要的共识越大，您的精度就越高，但会以召回为代价。

# javascript - 在jQuery中将元素添加到二维数组

> ID：12103296
> 
> 赞同：3
> 
> 时间：2012-08-24T04:49:24.983
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中创建二维数组？](https://stackoverflow.com/questions/966225/how-to-create-a-two-dimensional-array-in-javascript)

我想将元素推送到二维数组，

我的代码是，

```
 var results = [];
        var resultstemp = [];
        function bindlinks(aamt,id1) {
        resultstemp=results;        
            imagesArray.push($("#image1").mapster("get"));

            if(results.length==0)
            {
            results.push([id1]);    
            }
            else
            {
               var ck=0;
               var lng=results.length;
                for (var i = 0; i < lng; i++) {

                  if(results[i]==id1)
                  {

                    ck=1;
                     results = jQuery.grep(results, function(value) {
                        return value != id1;
                      });

                  }                                     
                }                   
                if(ck==0)
                {
                results.push(id1);                  
                }                   
            } 
```

我想推`id`也`aamt`想排列。在这里，我仅将 id 推送到数组。我不确定如何添加`aamt`到二维数组中的第二个位置。

请帮帮我，

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T05:06:19.590

更改声明如下：

```
var results = new Array(); 
```

并更改`push`如下：

```
results.push([id1,aamt]); 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:40:22.760

将两个单独的值均匀地推送到同一个数组中的方法背后的逻辑是这样的：

```
var array = [];
function push(id1, aamt) {
    for (var i= 0; i < 10; i++) {
        if (i%2 == 0) {
            array.push(id1);
        }
        else {
            array.push(aamt);
        }
    }    
}

push(10, 12);
console.log(array); // 10, 12, 10, 12..... 
```

请注意，我对代码进行了相当多的抽象，因为对我来说代码应该做什么并不太明显，但原理很简单：使用模 ( `%`) 运算符来测试值是奇数还是偶数。如果奇数添加第一个值，如果偶数添加第二个值。

希望能帮助到你。

# debugging - 如何调试 Mono 本身？

> ID：12103297
> 
> 赞同：2
> 
> 时间：2012-08-24T04:49:48.170
> 
> 标签：debugging, mono, gdb, monodevelop

我想修复[Mono](http://en.wikipedia.org/wiki/Mono_%28software%29)的 XML 反序列化器中[的一个错误。](https://bugzilla.xamarin.com/show_bug.cgi?id=2907) 代码相当复杂。

如何在调试模式下运行 Mono 本身？（断点，逐步，变量检查）。

最好以图形方式。
如果可以使用[Monodevelop](http://en.wikipedia.org/wiki/MonoDevelop)来调试 Mono 本身，那就太好了。
我在 Linux Ubuntu 2012.04 上并[启用了调试信息](https://askubuntu.com/questions/41610/how-do-i-rebuild-a-package-to-include-debugging-information)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:11:38.917

在 MonoDevelop 中，加载解决方案后，转到编辑菜单 -> 首选项。选择调试器并取消选中“仅调试项目代码...”。

# sqldataadapter - 重新连接 SqlDataAdapter

> ID：12103302
> 
> 赞同：1
> 
> 时间：2012-08-24T04:49:57.767
> 
> 标签：sqldataadapter

我有这个代码

```
 DataTable dt= new DataTable();
    SqlDataAdapter da;

    private void LoadData()
        {
           using (SqlConnection cnn = new   SqlConnection(ConfigurationManager.ConnectionStrings["cnn"].ConnectionString))
            {

            da = new SqlDataAdapter("Select * from table",cnn);                
            da.Fill(dt);

            }

        } 
```

之后连接会关闭，对吧？如果我想更新 DataTable，如何将 da 重新连接到 cnn？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:55:19.787

是的，using 语句将调用 SqlConnection 上的 Dispose。请参阅[使用语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

要以这种方式重新连接，您需要另一个 using 语句在原始 using 语句中进行更新或更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:56:52.443

Fill 方法使用关联的 SelectCommand 属性指定的 SELECT 语句从数据源中检索行。与 SELECT 语句关联的连接对象必须有效，但不需要打开。如果在调用 Fill 之前关闭连接，则打开它以检索数据，然后关闭。如果在调用 Fill 之前连接已打开，则它保持打开状态。

来源：[看这个](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)

# android - Android 网络使用应用程序，解析 XML 时出错

> ID：12103307
> 
> 赞同：0
> 
> 时间：2012-08-24T04:50:51.970
> 
> 标签：android, xml-parsing

我一直在使用 developer.android.com 的教程我没有修改“NetworkUsage”项目中的任何代码，我的互联网连接（公平）仅限于我的 android 设备，所以我使用它进行调试，但它给了我“解析 XML 时出错”而不是常规的 webview 显示。这是一个一般错误吗？如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:43:48.753

编辑 Manifest 文件并将其设置为“android:name....”中的 .NetworkActivity 而不是 com.example.android.NetworkActivity

# iphone - 如何在 iphone sdk 中监控 pdf 下载过程

> ID：12103308
> 
> 赞同：0
> 
> 时间：2012-08-24T04:50:53.980
> 
> 标签：iphone, ios, ios4, iphone-sdk-3.0

在我的应用程序中，我需要从 url 下载 pdf 文件。我知道如何从 url 下载 pdf 文件并存储在本地文档目录中。但我需要显示下载过程，我想知道下载是否完成。请任何人给出主意..

这里我的代码：

```
 NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.msy.com.au/Parts/PARTS.pdf"]];

//Store the Data locally as PDF File

NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

NSString *filePath = [resourceDocPath stringByAppendingPathComponent:@"myPDF.pdf"];

[pdfData writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:14:55.683

使用 ASIHTTPRequest 下载文件。对于下面的代码，我使用了 ASIHTTPRequest

```
float currentProgress;
UILabel *dwnLbl;
UIProgressView * myProgressIndicator;
UIProgressView *progressBar;
@property (nonatomic, retain) ASIHTTPRequest *rqstForAudio;

-(void)viewDidLoad{
     self.av=[[UIAlertView alloc] initWithTitle:@"Downloading.." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
    [self.actV setFrame:CGRectMake(125, 60, 37, 37)];

    dwnLbl = [[UILabel alloc] initWithFrame:CGRectMake(45, 30, 200, 37)];
    dwnLbl.textAlignment = UITextAlignmentCenter;
    dwnLbl.font = [UIFont boldSystemFontOfSize:20];
    dwnLbl.backgroundColor = [UIColor clearColor];
    dwnLbl.textColor = [UIColor whiteColor];

    progressBar = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
   [progressBar setFrame:CGRectMake(45, 65, 200, 20)];
   progressBar.progress = 0;
   [self.av addSubview:dwnLbl];
   [self.av addSubview:progressBar];
 }
 -(void)downLoadBook{
    NSString *strAudioURL=@"http://www.msy.com.au/Parts/PARTS.pdf"
    // check first locally exists or not
    NSString *strPathToAudioCache=[NSString stringWithFormat:@"%@/%@",
                                   [(NSArray*)NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0],
                                   AudioFolder];

    NSDictionary *dOfAudios=[NSDictionary dictionaryWithContentsOfFile:strPathToAudioCache];
    if([dOfAudios valueForKey:strAudioURL]) {
    } else {
        self.av.title = @"Downloading..";
        [self.av show];
        NSString  *pdf = @"bookTitle.pdf";

        NSURL *audioURL = [NSURL URLWithString:strAudioURL];
        NSString *strPathToDownload=[NSString stringWithFormat:@"%@/%@",[(NSArray*)NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0],pdf];
        [self.rqstForAudio setDownloadProgressDelegate:myProgressIndicator];

        if(!self.rqstForAudio || [self.rqstForAudio isFinished]) {
            self.rqstForAudio=[ASIHTTPRequest requestWithURL:audioURL];
            [self.rqstForAudio setDelegate:self];
            [self.rqstForAudio setDownloadProgressDelegate:self];
            [self.rqstForAudio setAllowResumeForFileDownloads:YES];
            [self.rqstForAudio setCachePolicy:ASIUseDefaultCachePolicy];
            [self.rqstForAudio setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];
            [self.rqstForAudio setDidFailSelector:@selector(failedToLoad:)];
            [self.rqstForAudio setDidFinishSelector:@selector(finishedLoading:)];
            [self.rqstForAudio setDownloadCache:[ASIDownloadCache sharedCache]];
            [self.rqstForAudio setDownloadDestinationPath:strPathToDownload];
            [self.rqstForAudio startAsynchronous];
        }
    }
}

- (void)failedToLoad:(ASIHTTPRequest*)request {
    [self.av dismissWithClickedButtonIndex:0 animated:YES];
    NSLog(@"failed to download");
    UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"MESSAGE" message:@"Failed to Download" delegate:self cancelButtonTitle:RETRY otherButtonTitles:nil, nil];
    av.delegate = self;
    [av show];
}

- (void)finishedLoading:(ASIHTTPRequest*)request {
  NSLog(@"finished loading");
  NSString *strPathToAudioCache=[NSString stringWithFormat:@"%@",
                               [(NSArray*)NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];

 NSMutableDictionary *dOfAudios=[NSMutableDictionary dictionaryWithContentsOfFile:strPathToAudioCache];

 if([dOfAudios allKeys].count>0) {
    [dOfAudios setValue:[request downloadDestinationPath] forKey:[[request url] description]];
 } else {
    dOfAudios=[NSMutableDictionary dictionary];
    [dOfAudios setValue:[request downloadDestinationPath] forKey:[[request url] description]];
 }
  [self.av dismissWithClickedButtonIndex:0 animated:YES];
  [dOfAudios writeToFile:strPathToAudioCache atomically:YES];
}

- (void)request:(ASIHTTPRequest *)request didReceiveBytes:(long long)bytes{
    [self setProgress:[myProgressIndicator progress]];
}
 - (void)setProgress:(float)progress
{
   currentProgress = progress;
   if (!progress == 0.0) {
   }
   if(currentProgress*100 == 100.00){
      self.av.title = @"Finishing..";
   }
   progressBar.progress = currentProgress;
   dwnLbl.text = [NSString stringWithFormat:@"%.2f%%",currentProgress*100];
} 
```

**编辑**

您可以使用该`NSURLSession`方法来实现这样的场景 [NSURLSession](https://stackoverflow.com/questions/23987692/showing-the-file-download-progress-with-nsurlsessiondatatask)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T04:59:43.290

我强烈建议您查看[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)以轻松下载文件。

通过您可以使用下载进度的功能编号。

# haskell - 什么时候变质的组合是变质？

> ID：12103309
> 
> 赞同：17
> 
> 时间：2012-08-24T04:50:59.207
> 
> 标签：haskell, functional-programming, composition, fold, catamorphism

从[http://research.microsoft.com/en-us/um/people/emeijer/Papers/meijer94more.pdf](http://research.microsoft.com/en-us/um/people/emeijer/Papers/meijer94more.pdf)第 3 页：

> 一般来说，变质在合成下是封闭的，这是不正确的

变质在什么条件下构成变质？更具体地说（假设我正确理解了该陈述）：

假设我有两个基本函子`F`，`G`并且每个都有折叠：`foldF :: (F a -> a) -> (μF -> a)`和`foldG :: (G a -> a) -> (μG -> a)`。

现在假设我有两个代数`a :: F μG -> μG`和`b :: G X -> X`.

什么时候构图`(foldG b) . (foldF a) :: μF -> X`是变态？

* * *

**编辑：**我有一个猜测，基于 dblhelix 的扩展答案：那`outG . a :: F μG -> G μG`一定是`μG`一些自然转换的组件`η :: F a -> G a`。我不知道这是否正确。（**编辑 2：**正如 colah 指出的那样，这已经足够但不是必需的。）

**编辑 3：** Haskell-Cafe 上的 Wren Thornton 补充道：“如果你有正确的分配属性（正如 colah 建议的那样），那么事情就会针对特定情况解决。但是，拥有正确的分配属性通常相当于在某个适当相关的类别中进行自然转换；所以这只是将问题推迟到适当相关的类别是否总是存在，以及我们是否可以形式化“适当相关”的含义。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:48:12.897

> 组成 (fold2 g) 是什么时候。(fold1 f) :: μF1 -> A 变质？

当存在一个`F1`- 代数`h :: F1 A -> A`使得`fold1 h = fold2 g . fold1 f`.

要了解变态在复合下通常不是封闭的，请考虑以下类型级不动点、代数和变态的通用定义：

```
newtype Fix f = In {out :: f (Fix f)}

type Algebra f a = f a -> a

cata :: Functor f => Algebra f a -> Fix f -> a
cata phi = phi . fmap (cata phi) . out 
```

为了组成变质，我们需要

```
algcomp ::  Algebra f (Fix g) -> Algebra g a -> Algebra f a 
```

现在尝试编写这个函数。它需要两个函数作为参数（分别是类型`f (Fix g) -> Fix g`和类型`g a -> a`）和一个类型的值`f a`，它需要产生一个类型的值`a`。你会怎么做？要产生一个 type 的值，`a`你唯一的希望是应用 type 的函数`g a -> a`，但是我们被困住了：我们没有办法将 type`f a`的值变成 type 的值`g a`，不是吗？

我不确定这对您的目的是否有用，但是一个可以组合成变态的条件的例子是，如果我们有从第二个 cata 的结果到第二个函子的不动点的态射：

```
algcomp' :: (Functor f, Functor g) =>
            (a -> Fix g) -> Algebra f (Fix g) -> Algebra g a -> Algebra f a
algcomp' h phi phi' = cata phi' . phi . fmap h 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T00:36:22.693

（免责声明：这超出了我的专业领域。我相信我是正确的（在不同的地方提供了警告），但是......请自己验证。）

catamorphism 可以被认为是用其他函数替换数据类型的构造函数的函数。

（在本例中，我将使用以下数据类型：

```
data [a] = [] | a : [a]

data BinTree a = Leaf a | Branch (BinTree a) (BinTree a)

data Nat = Zero | Succ Nat 
```

)

例如：

```
length :: [a] -> Nat
length = catamorphism
     []   -> 0
     (_:) -> (1+) 
```

（遗憾的是，该`catamorphism {..}`语法在 Haskell 中不可用（我在 Pola 中看到过类似的东西）。我一直想为它写一个 quasiquoter。）

那么，什么是`length [1,2,3]`？

```
length [1,2,3]
length (1 : 2 : 3 : [])
length (1:  2:  3:  [])
        1+ (1+ (1+ (0 )))
        3 
```

也就是说，出于稍后将变得明显的原因，最好将其定义为微不足道的等价物：

```
length :: [a] -> Nat
length = catamorphism
     []   -> Zero
     (_:) -> Succ 
```

让我们再考虑几个变态的例子：

```
map :: (a -> b) -> [a] -> b
map f = catamorphism
     []   -> []
     (a:) -> (f a :)

binTreeDepth :: Tree a -> Nat
binTreeDepth = catamorphism
     Leaf _ -> 0
     Branch -> \a b -> 1 + max a b

binTreeRightDepth :: Tree a -> Nat
binTreeRightDepth = catamorphism
     Leaf _ -> 0
     Branch -> \a b -> 1 + b

binTreeLeaves :: Tree a -> Nat
binTreeLeaves = catamorphism
     Leaf _ ->  1
     Branch -> (+)

double :: Nat -> Nat
double = catamorphism
     Succ -> Succ . Succ
     Zero -> Zero 
```

其中许多可以很好地组合形成新的变质。例如：

```
double . length . map f = catamorphism
     []   -> Zero
     (a:) -> Succ . Succ

double . binTreeRightDepth = catamorphism
     Leaf a -> Zero
     Branch -> \a b -> Succ (Succ b) 
```

`double . binTreeDepth`也有效，但从某种意义上说，这几乎是一个奇迹。

```
double . binTreeDepth = catamorphism
     Leaf a -> Zero
     Branch -> \a b -> Succ (Succ (max a b)) 
```

这只有效，因为`double`分布在`max`......这纯粹是巧合。（对于 . 也是如此`double . binTreeLeaves`。）如果我们`max`用加倍效果不佳的东西代替......好吧，让我们给自己定义一个新朋友（与其他人相处得不好）。对于`double`不分布的二元运算符，我们将使用`(*)`.

```
binTreeProdSize :: Tree a -> Nat
binTreeProdSize = catamorphism
     Leaf _ -> 0
     Branch -> \a b -> 1 + a*b 
```

让我们尝试建立两个变质两个组成的充分条件。显然，任何 catamorphism 都会很高兴地由 组成`length`，`double`并且`map f`因为它们在不查看子结果的情况下产生它们的数据结构。例如，在 的情况下`length`，您可以将`Succ`and替换`Zero`为您想要的任何内容，并且您拥有新的 catamorphism。

1.  **如果第一个 catamorphism 产生一个数据结构而不看它的孩子发生了什么，那么两个 catamorphism 将组成一个 catamorphism。**

除此之外，事情变得更加复杂。让我们区分普通的构造函数参数和“递归参数”（我们将用 % 符号标记）。所以`Leaf a`没有递归参数，但是`Branch %a %b`有。让我们使用构造函数的术语“递归固定性”来指代它具有的递归参数的数量。（我已经编造了这两个术语！我不知道合适的术语是什么，如果有的话！小心在其他地方使用它们！）

如果第一个 catamorphism 将某些东西映射到零递归固定构造函数中，那么一切都很好！

```
 a               |            b            |     cata(b.a)
===============================|=========================|================
       F a %b %c .. -> Z       |      Z -> G a b ..      |      True 
```

如果我们将孩子直接映射到一个新的构造函数中，我们也很好。

```
 a               |            b            |     cata(b.a)
===============================|=========================|=================
   F a %b %c .. -> H %c %d ..  |   H %a %b -> G a b ..   |       True 
```

如果我们映射到一个递归固定的构造函数......

```
 a               |            b            |     cata(b.a)
===============================|=========================|=================
 F a %b %c .. -> A (f %b %c..) |     A %a -> B (g %a)    |    Implied by g
                               |                         | distributes over f 
```

但这不是iff。例如，如果存在`g1` `g2`这样的`g (f a b..) = f (g1 a) (g2 b) ..`，那也有效。

我预计，从这里开始，规则会变得更加混乱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T06:42:00.670

Catamorphisms 将数据结构解构为结果值。所以，一般来说，当你应用一个变质时，结果是完全不同的，你不能对它应用另一个变质。

例如，对 的所有元素求和的函数`[Int]`是 catamorphism，但结果是`Int`。没有办法如何在它上面应用另一个变态。

但是，一些特殊的变态会产生与输入相同类型的结果。一个这样的例子是`map f`（对于某些给定的函数`f`）。在解构原始结构的同时，它还创建了一个新列表作为其结果。（实际上，`map f`既可以看作变质，也可以看作[变形](http://en.wikipedia.org/wiki/Anamorphism)。）所以如果你有这样一类特殊的变质，你可以组合它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T07:37:50.663

如果我们考虑语义等价，两个变态的组合是变态，当第一个是变态时：

```
cata1 . hylo1 = cata2 
```

例如（哈斯克尔）：

```
sum . map (^2) = foldl' (\x y -> x + y^2) 0 
```

# java-me - 在 j2me 中存储设置的最佳方法是什么？

> ID：12103313
> 
> 赞同：1
> 
> 时间：2012-08-24T04:51:42.827
> 
> 标签：java-me, text-files, recordstore

我想存储我的 j2me 应用程序的设置。应用程序启动时，将加载设置。我发现的两种方法是

1.  唱片店
2.  在文本文件中读取和写入

我的想法是，

如果用户删除 RMS 数据，则使用记录存储有风险，那么我将丢失设置。文本文件可以存储在 jar 中，因此用户无法删除它们。

考虑到性能和风险，以上两种方法中哪一种是最好的方法，还是有比以上两种方法更好的方法？

[追加]

**关于 RMS 文件**

假设用户从计算机访问移动存储，则 RMS 文件可见。关于文本文件，如果我将 txt 文件存储在应用程序资源中，那么如果 jar 文件和用户无法访问它，它将成为一部分。当应用程序被卸载时，该文件也将被删除，因为它是 jar 的一部分。考虑到这一点，什么是最好的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:35:12.697

RMS 绝对是最好的解决方案。

**用户无法删除应用程序的 RMS 数据，除非您**提供.

此外，如果用户卸载您的应用程序，数据将同时被删除：这是一件好事。

使用文本文件是个坏主意，因为用户可以随时访问和删除它，而当用户卸载时您无法删除它。

# php - 用于测验程序的 MySql 数据库设计

> ID：12103321
> 
> 赞同：3
> 
> 时间：2012-08-24T04:53:09.337
> 
> 标签：php, mysql

我目前正在从事一个项目，我实际上是在创建一个测验应用程序。它将能够进行具有多项选择或简答题的测验，题目介于 10 到 20 个之间。它需要有能力将用户的答案与正确答案进行对比，然后对用户的答案进行评分。

稍后，我可能会实现一个后端功能来在线创建测验，但现在我将把它留给直接使用数据库。

现在我的问题..我很迷茫如何设计我的数据库和表以允许所有功能。这是我目前的设置方式：

**测验表**

*   名称行
*   标识行

**问题表**

*   标识行
*   对应的测验 ID 行
*   实际问题文本行

**答案表**

*   对应的测验 ID 行
*   对应的问题 ID 行
*   实际答案文本行
*   if_correct_answer 行

所以每个测验都有自己的 id，然后每个问题都有自己的 id 以及它的父测验 id，然后答案将有一个父测验 id 和一个父问题 id。

截至目前，我的“正确答案”问题以这种方式运行：如果他们选择正确答案，if_correct_answer 行的值将大于 0，然后最后他们所有答案的值将相加，这就是他们做对了多少。

这是设计我的数据库的好方法吗？我在这里的另一篇文章中看到了基本思想，但我不确定我是否完全理解或正确使用它。我基本上只是对如何协调所有不同的ID感到困惑。（我是 mySQL 和 PHP 的初学者，这可能没有帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:08:20.813

你的表结构对我来说看起来不错。您还需要另一个表来存储用户的答案。

**用户答案表**- 粗略结构

*   ID
*   用户身份
*   quiz_id
*   question_id
*   answer_id
*   回答日期

您还需要另一个表来存储用户的基本信息，例如姓名、用户 ID、电话等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:03:18.813

只是一个想法，您可以为测验的问题制作一个链接表，然后您可以建立一个可用于构建新测验的问题集合。粗略的轮廓：

**测验表**

*   名称行
*   标识行

**测验表的问题**

*   测验编号
*   问题编号

**问题表**

*   标识行
*   实际问题文本行

**答案表**

*   标识行
*   对应的问题 ID 行
*   实际答案文本行

**用户答案表 - 粗略结构**

*   ID
*   用户身份
*   quiz_id
*   question_id
*   answer_id
*   回答日期
*   if_correct_answer 行

# algorithm - 了解二进制补码

> ID：12103322
> 
> 赞同：1
> 
> 时间：2012-08-24T04:53:20.763
> 
> 标签：algorithm, numbers, bit-manipulation

我试图理解二进制补码：

二进制补码是否意味着这个数字无效：

```
1000 
```

二进制补码是否不允许对正数使用最高有效位。IE。可以

```
1000 
```

曾经代表 2^3 吗？还是代表-0？

我也很困惑为什么你需要在一个补码上加 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:07:05.543

2 的补码主要取决于您如何解释该值，大多数数学* 并不关心您是否将数字视为有符号。如果您使用 4 位，则 1000 是 8 以及 -8。这种“奇怪的对称性”出现在这里，因为将它添加到一个数字与将它与一个数字异或相同（因为只设置了高位，所以没有进位到任何位）。它也来自二进制补码的定义 - 否定将这个数字映射到自身。

通常，任何数字都`k`代表一组数字`{ a | a = xk mod n }`，其中`n`2 是您正在使用的位数的幂。这种可能有点奇怪的效果是使用模运算的直接结果，无论您将数字视为有符号还是无符号，都是如此。有符号和无符号解释之间的唯一区别是您将哪个数字作为此类集合的代表。对于无符号，代表是唯一`a`介于 0 和 之间的代表`n`。对于带符号的数字，代表是唯一`a`介于`-(n/2)`和之间的数字`(n/2)-1`。

至于为什么要加一个，否定的目的就是要找一个`x'`这样的`x' + x = 0`。如果您仅对其中的位进行补充`x`但未添加一位，`x' + x`则在任何位置都不会进位，而只是求和为“全1”。“全一”加 1 为零，因此加一修正`x'`，使总和变为零。或者（好吧，这并不是真正的替代方案），您可以采取`~(x - 1)`，它给出的结果与`~x + 1`.

*符号会影响除法、右移和乘法的高半部分（很少使用，并且在许多编程语言中无论如何都不可用）的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:06:43.870

在二进制补码中，MSB（最高有效位）设置为 1 表示负数。将二进制补码数乘以 -1，您可以执行以下操作：

```
在数字上加一。
反转第一个之后的所有位。

```

例如：加一后
的数字`10010`你很好得到：`10011`反转后你得到：`01101`。
这意味着它`10010`是负数 13。

加一后的数字`1000`是：`1001`反转后：`0111`。
这意味着它`1000`是负 7。

现在，你的最后一个问题：不。如果您使用二进制补码，则不能将 MSB 用于正数。但是，您可以定义您不使用二进制补码并使用更高的**正**数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T07:11:14.680

二进制补码基于两个要求：

*   数字由固定位数表示；
*   x + -x = 0。

假设一个四位表示，比如说，我们有

```
0 + -0 = 0000 + -0000 (base 2) = 0000  =>  -0000 = 0000
1 + -1 = 0001 + -0001 (base 2) = 0000  =>  -0001 = 1111 (carry falls off the end) 
```

现在我们有了我们的构建块，一滴归纳将向您展示“翻转位并加 1”算法正是您将正数转换为其二进制补码负表示所需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:08:34.540

这取决于您使用多少位来表示数字。

最左边（最大）位的值为 -1*(2**N-1) 或在本例中为 -8。（N 是位数。）后续位是它们的正常值。

所以

```
1000 
```

是 -8

```
1111 
```

是 -1 0111 是 7。

但是，如果您有 8 位，这些将成为不同的值！0000 1000

是正数 8。只有最左边的位会为答案添加负值。

在任何一种情况下，数字的范围都是从 1000....0

对于具有 N 位的 -2**(N-1)

0111....1 即 2**(N-1) -1。（这只是正常的基数 2，因为最左边的位是 0。）

# spring - tomcat+josso1.8.6+spring

> ID：12103323
> 
> 赞同：0
> 
> 时间：2012-08-24T04:53:32.260
> 
> 标签：spring, tomcat, single-sign-on, josso

我使用 JOSSO 1.8.6。我在Tomcat lib目录文件中配置了JOSSO相关的所有内容，我也在web application[spring] WEB-INF文件中进行了所有配置。我得到了以下网址。

```
http://localhost:8080/TestLogin/?josso_cmd=login_optional
 &josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check
 &josso_partnerapp_id=TestLoginDemo 
```

但我的问题是：

我的父 Web 应用程序是 --TestLogin 表示此应用程序登录页面主要用于显示所有其他 Web 应用程序 [子 Web 应用程序]。

我有 3 个孩子申请

1.  测试登录演示
2.  jossoLogin1
3.  JossoLoginDemo

都是spring应用。

我在浏览器中点击的意思是 URL 是`http://localhost:8080/TestLoginDemo`

所以我看到以下网址

```
http://localhost:8080/TestLogin/?josso_cmd=login_optional
 &josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check
 &josso_partnerapp_id=TestLoginDemo 
```

但是登录成功后我发现`TestLogin`流的意思是没有转移到`TestLoginDemo`.

那么，如果我必须继续进行流程，该`TestLoginDemo`怎么办？

和; 成功后这个网址：

```
http://localhost:8080/TestLogin/?josso_cmd=login_optional
 &josso_back_to=http://localhost:8080/TestLoginDemo/josso_security_check
 &josso_partnerapp_id=TestLoginDemo 
```

登录页面我成功获得以下网址：

```
http://localhost:8080/TestLogin/login.htm 
```

而不是下面的正确 URL：

```
http://localhost:8080/TestLoginDemo/login.htm 
```

有人可以指导我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:32:19.597

*   为什么`josso_cmd=login_optional`，你是这样设置的？默认情况下，无需指定`josso_cmd`参数。
    *   为了返回原始应用程序，您必须使用`josso_partnerapp_ctx`参数（不要忘记对 URL 进行编码），这将被传递到安全检查页面，如果安全检查成功，它将引导您进入该页面

通常，URL 如下所示：

[https://login.domain.com/josso/signon/login.do?josso_back_to=https://site.domain.com/Josso/Check&josso_partnerapp_host=site.domain.com&josso_partnerapp_ctx=https%3a%2f%2site.domain。 com%2fhome.html](https://login.domain.com/josso/signon/login.do?josso_back_to=https://site.domain.com/Josso/Check&josso_partnerapp_host=site.domain.com&josso_partnerapp_ctx=https%3a%2f%2site.domain.com%2fhome.html)

# android - ToggleButton isChecked vs isActivated - Android

> ID：12103330
> 
> 赞同：2
> 
> 时间：2012-08-24T04:55:26.637
> 
> 标签：android, togglebutton

我正在尝试查看 ToggleButton 小部件的什么方法用于检查它是切换到“on”还是“off”，如果它是`isChecked()`或`isActivated()`

两者有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:19:47.593

[`View.setActivated()`](http://developer.android.com/reference/android/view/View.html#setActivated%28boolean%29)`CheckBox`在 JavaDoc 中说，激活状态与or无关`ToggleButton`，但与某种选择状态有关`View`，当在 ListView 中时，泛型可以处于。

开发人员甚至为造成的混乱道歉：

> 嗯，是的，我们对这里的术语深表歉意

`isActivated()`也仅适用于 API 级别 > 11。

`isChecked()`是从`CompoundView`,`ToggleButton`并且`CheckBox`都从 扩展而来。这是您要检查的状态。它适用于所有 API 级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T05:05:37.847

用于`isChecked()`开和关

```
if (isChecked()) {
        // The toggle is enabled  ON state
    } else {
        // The toggle is disabled  OFF state
    } 
```

据我所知，没有`isActivated()`切换按钮的方法，它适用于`view`它是否处于活动状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T05:08:15.473

从文档中可以看出区别：

```
public boolean isActivated () 
```

是 View 方法，负责提供基本的 View 状态。[这](http://developer.android.com/reference/android/view/View.html#isActivated%28%29)是对 Android 术语中*激活*的明确描述。

从另一方面，

```
public boolean isChecked () 
```

是另一个实体的更“高级”属性 - [CompoundButton](http://developer.android.com/reference/android/widget/CompoundButton.html#isChecked%28%29)并提供它的状态 - 它是 ON 还是 OFF。

# iphone - 如何在 CGContext 中用另一个图像剪辑图像？

> ID：12103331
> 
> 赞同：1
> 
> 时间：2012-08-24T04:55:25.927
> 
> 标签：iphone, ios, cgcontext, masking, clipping

我想用两张图片得到以下结果。

![](../Images/d7ebaa4a7b79d89c7f56acf0cbce0e38.png)

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:32:12.990

在@Sumanth 的合并两个图像的代码之后，您需要屏蔽最终图像，例如[how-to-mask-an-image](https://www.innofied.com/implementing-image-masking-in-ios/)链接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T05:04:08.950

要在图像视图上组合两个图像，试试这个

```
UIImage *bottomImage = [UIImage imageNamed:@"bottom.png"]; //background image
UIImage *image       = [UIImage imageNamed:@"top.png"]; //foreground image
CGSize newSize = CGSizeMake(width, height);
UIGraphicsBeginImageContext( newSize );
// Use existing opacity as is
[bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
// Apply supplied opacity if applicable
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.8];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

添加`newImage`到 UIImageView

# ruby-on-rails - Rails 重置种子.rb

> ID：12103333
> 
> 赞同：1
> 
> 时间：2012-08-24T04:55:50.060
> 
> 标签：ruby-on-rails

我在我的seeds.rb 文件中创建了一个类别的下拉菜单数据库，并且不小心再次执行了rake db:seed 以添加重复的类别。作为一个菜鸟，我想知道在开发环境中什么是重置类别下拉列表并放回以下类别的最佳方法......

种子.rb

```
Category.create(name: 'General')
Category.create(name: 'Birthday')
Category.create(name: 'Sports and Recreation')
Category.create(name: 'Music')
Category.create(name: 'Nature')
Category.create(name: 'Education')
Category.create(name: 'Political') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:10:34.353

您可以在您的种子.rb 文件前添加`Category.destroy_all`. 这将实例化并销毁您的所有类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:06:31.493

如果你不想重复，你可以回退到：

```
Category.find_or_create_by_name('General') 
```

这将尝试（按名称）找到它，或者如果它不存在则创建记录。

# exception - 在 Clojure 中使用“应用”函数时出错：“不知道如何从：java.lang.Long 创建 ISeq”

> ID：12103338
> 
> 赞同：5
> 
> 时间：2012-08-24T04:56:59.287
> 
> 标签：exception, clojure, higher-order-functions, first-class-functions

在“Clojure in Action”（第 63 页）中处理以下示例：

```
(defn basic-item-total [price quantity] 
    (* price quantity))

(defn with-line-item-conditions [f price quantity] 
    {:pre [(> price 0) (> quantity 0)]
     :post [(> % 1)]} 
    (apply f price quantity)) 
```

评估 REPL：

```
(with-line-item-conditions basic-item-total 20 1) 
```

导致引发以下异常：

```
Don't know how to create ISeq from: java.lang.Long
  [Thrown class java.lang.IllegalArgumentException] 
```

在评估应用程序之后似乎正在引发异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T05:25:28.723

的最后一个参数`apply`应该是[*一系列*参数](http://clojuredocs.org/clojure_core/clojure.core/apply)。在您的情况下，用法可能看起来更像这样：

```
(defn with-line-item-conditions [f price quantity] 
    {:pre [(> price 0) (> quantity 0)]
     :post [(> % 1)]} 
    (apply f [price quantity])) 
```

`apply`在处理参数列表时很有用。在您的情况下，您可以简单地调用该函数：

```
(defn with-line-item-conditions [f price quantity] 
    {:pre [(> price 0) (> quantity 0)]
     :post [(> % 1)]} 
    (f price quantity)) 
```

# objective-c - Facebook：[FBSession activeSession] 应用程序崩溃

> ID：12103343
> 
> 赞同：3
> 
> 时间：2012-08-24T04:57:33.557
> 
> 标签：objective-c, facebook, facebook-ios-sdk

我正在使用**Facebook iOS SDK 3.0**，并且刚刚升级到新的 Facebook iPhone 应用程序 (5.0)。现在，每当我打电话时`[FBSession activeSession]`，我的应用程序都会因错误而崩溃：

> -[SBJsonParser errorTrace]：无法识别的选择器发送到实例 0x499700

仅当我安装了新的 Facebook 5.0 应用程序时才会发生这种情况。如果我卸载它并稍等片刻，我的应用程序运行良好。此外，这在旧版 Facebook 应用程序中从未发生过。

有没有人遇到过这个？Facebook 开发者页面上似乎有同样问题的错误报告，但尚未处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:50:26.877

这是因为 SBJson 库中的冲突。我们正在努力解决这个问题，应该已经准备好了。

# ruby-on-rails-3 - 我必须在 rake assets:precompile 之前运行 rake assets:clean 吗？

> ID：12103347
> 
> 赞同：11
> 
> 时间：2012-08-24T04:58:13.307
> 
> 标签：ruby-on-rails-3, asset-pipeline

我使用 git 将代码部署到我的生产服务器。这可能包括对 JS 和 CSS 文件的更改。

在我`rake assets:clean`跑之前我必须跑`rake assets:precompile`吗？我担心不清理以前的预编译资产可能会产生副作用。

这有点傻，但我的 google-fu 没有找到任何答案。我的 AWS 实例运行`rake assets:clean`得很慢，我想知道是否需要它。

另外，我可以用简单的替换 clean 命令`rm -r public/assets`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T05:08:45.583

不，您不需要运行 rake assets:clean 之前，只需运行 rake assets:precompile 将重新编译您的资产。它将重新创建您的缓存破坏摘要和 manifest.yml（其中包含将每个资产名称与其 MD5 缓存破坏名称匹配的键/值映射）

是的，你可以运行 rm -r public/assets

# c# - C#在组之间拖放列表视图

> ID：12103348
> 
> 赞同：1
> 
> 时间：2012-08-24T04:58:29.613
> 
> 标签：c#, listview, drag-and-drop

我的列表视图中有几个组和项目，我需要在这些组之间拖动项目。问题是：在我的实现中，每个组都可以是空的。列表视图中的空组不显示，但这可以通过将带有空文本字段的项目放在那里来解决。但是，在这种情况下，只要我使用常见的解决方案，就不可能将项目拖到空组中，例如[this](https://stackoverflow.com/questions/643275/c-sharp-drag-drop-in-listview)。

那么是否有可能使用listview以某种方式解决这个问题？或者也许我应该使用其他控件来提供此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:50:30.883

你能不能让你的代码在用户拖出最后一个项目时添加一个空文本字段，反之亦然，当用户在代码中添加一个新项目时自动删除空文本字段？我知道这是一个小小的工作，但它可以解决您的问题并让您不必更改控件。

# php - 收到通知：使用 jquery 自动完成时数组到字符串的转换

> ID：12103356
> 
> 赞同：1
> 
> 时间：2012-08-24T04:59:23.920
> 
> 标签：php, html, jquery-autocomplete, forms

我在表单上使用 jquery 自动完成功能，并尝试对提交表单条目时选择的内容进行简单回显，以验证我的数据是否被正确读取。我收到以下消息：

注意：第 4 行 C:\xampp\htdocs\New\search.php 中的数组到字符串转换

Search.php 内容：

```
<?php

$dest_name = $_GET["dest_name"];
echo ["dest_name"];

?> 
```

Html 内容：

```
<body>
<form method="GET" action="search.php">
    <div>
    <input type="text" id ="destination" name="dest_name"/>
    </div>
</form
</body> 
```

自动完成脚本

```
var destinations = [
        {value: "49 Degrees North Ski Area",label: "49 Degrees North Ski Area",id: "1"},
        {value: "Afton Alps",label: "Afton Alps",id: "2"},
        {value: "Al Quaal Recreation Ski Area",label: "Al Quaal Recreation Ski Area",id: "3"},
        {value: "Alpental",label: "Alpental",id: "4"},
        {value: "Alpine Meadows",label: "Alpine Meadows",id: "5"},
];

$(document).ready(function() {
    $("#destination").autocomplete({
        source: destinations,
        focus: function(event, ui) {
            $("#destination").val(ui.item.label);
            return false;
        },
        select: function(event, ui) {
            $("#destination").val(ui.item.label);
            $("#dest_id").val(ui.item.id);
            return false;
        }
    });
    $('#button').click(function() {
        alert($("#dest_id").val());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:23:44.347

在第 4 行中，使用显示了数组索引，而不是您必须回显在第 3 行中声明的变量，即，

回声 $dest_name;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:03:57.797

在 PHP 文件的第 4 行，您正在回显一个数组（方括号可用于创建一个数组）：

```
echo ["dest_name"]; 
```

如果要回显括号，则需要将整行括在引号中。

```
echo '["dest_name"]'; 
```

# matlab - 如何从matlab中的文本文件中读取矩阵？

> ID：12103358
> 
> 赞同：1
> 
> 时间：2012-08-24T05:00:35.850
> 
> 标签：matlab, file-io

我在与我的 matlab 代码相同的文件夹中有一个文本文件`matlab.in`，它的内容是

```
training_set = [1 2 3; 4 5 6] 
```

如何将此矩阵读入一个名为的变量`training_set`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:21:27.907

您的文本文件包含一个可执行的 Matlab 语句。您可以，甚至可能应该将其重命名为`training_set.m`（`.m`后缀很重要），然后通过执行它从命令行简单地“读取”它。在我的机器上的“命令”

```
>> training_set 
```

生成响应

```
training_set =

     1     2     3
     4     5     6 
```

而且，嘿，很快，变量`training_set`现在安全地安置在您的工作区中。

现在祝贺自己编写了第一个 (?) Matlab*脚本*，奖励自己访问文档以查看这个重要主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:53:17.433

首先，使用以下命令打开它`fopen(...)`：

```
fid = fopen('matlab.in'); 
```

其次，从文件中读取该行并再次关闭文件，因为您不再需要它：

```
content = fgetl(fid);
fclose(fid); 
```

第三，评估从文件中读取的字符串：

```
eval(content); 
```

如果你想禁止输出，你可能想在文本文件的末尾添加一个分号，或者改用：

```
eval(strcat(content,';')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-06T04:25:38.137

```
file1.txt: 1 2 3 4 5 6 7 8
           10 20 30 40 50 60 70 80

    [fileID,errmsg] = fopen('file1.txt')
    val= textscan(fileID, '%u8')
    z = transpose(cell2mat(val))
    vec = transpose(reshape(z, [8 2]))

...

Gives you 
vec =

  2×8 uint8 matrix

    1    2    3    4    5    6    7    8
   10   20   30   40   50   60   70   80 
```

# sql-server-2008 - 为什么这个查询不能在 SQL Server 2000 中工作？

> ID：12103360
> 
> 赞同：0
> 
> 时间：2012-08-24T05:00:47.360
> 
> 标签：sql-server-2008, sql-server-2000

我在 SQL Server 2008 R2 中自动生成了一个索引创建查询，并在 SQL Server 2000 上进行了尝试。它没有工作并且有错误。有人可以看看这个查询吗？谢谢！

```
USE [DBDBDB]
GO

CREATE NONCLUSTERED INDEX [Index_FullReturn] ON [dbo].[tbl_Ev_Data] 
(
    [OffDateTime] ASC,
    [Type] ASC,
    [Tag] ASC,
    [Name] ASC,
    [Description] ASC,
    [Category] ASC

) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, 
IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, 
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:46:45.557

请检查 MSDN 上的语法，SQL Server 2000 上没有几个**“带选项”**。像在线一样，Allow_Row_Lock ...

[http://msdn.microsoft.com/en-us/library/aa258260%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa258260%28SQL.80%29.aspx)

# mysql - 在MySql中将表列中的双精度值复制到另一个具有固定长度模式的字符串列中

> ID：12103361
> 
> 赞同：0
> 
> 时间：2012-08-24T05:00:55.227
> 
> 标签：mysql, sql

我正在使用 MySql 并遇到了一个问题。

我有一个列名 price(Double)，我想在数据类型 String 的同一个表中创建一个新列，并希望将价格复制到新列中，以用于具有固定长度模式的表中存在的所有行。

例如我想做以下

```
 Price(double)      newcolumn(String)
     12                      00012
      1                      00001
      0                      00000 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:11:14.600

也许这样的事情可以工作：

```
UPDATE YourTable SET newcolumn = LPAD(REPLACE(FORMAT(Price,0),',',''),5,'0') 
```

该`FORMAT`函数将 double 转换为小数点为 0 的字符串，这里是[api](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_format)。
引入了逗号来分隔千位，`FORMAT`因此我们需要使用`REPLACE`它来摆脱这些，这里是[api](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)。函数左垫和
这里是[api](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lpad)`LPAD``'0'`

# c# - 日期控制中的选择

> ID：12103364
> 
> 赞同：0
> 
> 时间：2012-08-24T05:01:14.693
> 
> 标签：c#, asp.net

现在，我正在使用 asp.net、C# 并制作了自定义控件。在我的自定义控件中，尤其是在日期控件中，我只想在 OnFocus 事件中选择月份和日期部分。现在，我写了

```
control.select(); 
```

然后，像往常一样，将选择控件的文本（2012/08/04）。

但现在我只想在月份和日期（08/04）的部分进行选择。我正在寻找很多方法来做到这一点。但是直到现在我还没有任何办法。所以我想知道我可以只选择日期控件的月份和日期部分（08/24）吗？

带着敬意

# excel - 是否需要写 ScreenUpdating True

> ID：12103366
> 
> 赞同：2
> 
> 时间：2012-08-24T05:01:26.417
> 
> 标签：excel, vba

```
Application.ScreenUpdating = False
Application.ScreenUpdating = True 
```

我发现关于第二行的矛盾陈述。
有没有必要？
有人说 Excel 在每个 End Sub 行之后自动打开 ScreenUpdating？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:50:45.200

是的，ScreenUpdating 应始终在宏完成后设置回 True。另外，不要忘记在出错的情况下恢复它，我通常总是在退出 Sub/Function 之前将 Application.ScreenUpdating=True 放在错误挂起代码中。Excel 不会在宏结束后应用此属性的任何自动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-18T13:17:28.707

当它存在子时，屏幕更新会自行恢复为真。

测试一下。具有屏幕更新且未设置回 true 的代码。

```
Sub with_SU2()
    Application.ScreenUpdating = False
    For Each cell In Range("A1:K22").Cells
        cell.Select
        cell.Value = cell.Row & " _ " & cell.Column
    Next cell
End Sub 
```

在前面的代码之后运行它。您将看到屏幕更新已恢复。

```
Sub with_SU()
    For Each cell In Range("A1:K22").Cells
        cell.Select
        cell.Value = cell.Row & " _ " & cell.Column
    Next cell
End Sub 
```

# java - SQLException: 没有为 jdbc:oracle:thin:@//localhost:1521/orcl 找到合适的驱动程序

> ID：12103369
> 
> 赞同：25
> 
> 时间：2012-08-24T05:01:50.930
> 
> 标签：java, oracle, jdbc, jboss, ojdbc

我正在尝试开发一个`Oracle`从 eb 服务类连接到数据库的 Java EE 应用程序，但我遇到了一个

```
SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl 
```

我`ojdbc6.jar`在类路径中有 ，我还在`JBoss`部署文件夹中验证了这一点。

我的应用程序`EAR`由`WAR`. 这有什么问题（根本原因）？请帮忙。

persistence.xml 中的连接 URL：

```
> "jdbc:oracle:thin:@//localhost:1521/orcl" 
```

堆栈跟踪：

```
16:06:32,687 WARN  [com.arjuna.ats.arjuna] (default-workqueue-1) ARJUNA012125: TwoPhaseCoordinator.beforeCompletion - failed for SynchronizationImple< 0:ffffc0a80106:-3e8b2d6f:5037338f:15, org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4d1082 >: javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at 
Caused by: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl
    at java.sql.DriverManager.getConnection(DriverManager.java:602) [rt.jar:1.6.0_26]
    at java.sql.DriverManager.getConnection(DriverManager.java:154) [rt.jar:1.6.0_26]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:276) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 70 more

16:06:32,796 ERROR [org.jboss.ejb3.invocation] (default-workqueue-1) JBAS014134: EJB Invocation failed on component CreditcardFacade for method public abstract void com.peter.ejb.CreditcardFacadeLocal.addCreditCard(com.peter.entity.Creditcard): javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleEndTransactionException(CMTTxInterceptor.java:115) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:95) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:232) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at com.peter.ejb.CreditcardFacadeLocal$$$view2.addCreditCard(Unknown Source) [classes:]
    com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.beforeCompletion(TwoPhaseCoordinator.java:273)
    at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:93)
    at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:164)
    at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1165)
    ... 46 more
Caused by: org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at $Proxy96.prepareStatement(Unknown Source)    at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.buildBatchStatement(AbstractBatchImpl.java:144) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.getBatchStatement(AbstractBatchImpl.java:127) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2827) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3290) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:80) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:264) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:186) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:315) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl.beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:104) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 52 more
Caused by: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl
    at java.sql.DriverManager.getConnection(DriverManager.java:602) [rt.jar:1.6.0_26]
    at java.sql.DriverManager.getConnection(DriverManager.java:154) [rt.jar:1.6.0_26]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:276) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 70 more

16:06:32,953 WARNING [org.apache.cxf.phase.PhaseInterceptorChain] (default-workqueue-1) Application {http://service.peter.com/}CreditCardServiceService#{http://service.peter.com/}addCreditCard has thrown exception, unwinding now: org.apache.cxf.interceptor.Fault: Transaction rolled back
    at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:155) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.createFault(AbstractJAXWSMethodInvoker.java:86) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:121) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:61) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) [cxf-2.4.1.jar:2.4.1]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [rt.jar:1.6.0_26]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_26]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_26]
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:232) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.interceptor.OneWayProcessorInterceptor$1.run(OneWayProcessorInterceptor.java:109) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$2.run(AutomaticWorkQueueImpl.java:332) [cxf-2.4.1.jar:2.4.1]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
Caused by: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleEndTransactionException(CMTTxInterceptor.java:115) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:95) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:232) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at com.peter.ejb.CreditcardFacadeLocal$$$view2.addCreditCard(Unknown Source) [classes:]
    at com.peter.service.CreditCardService.addCreditCard(CreditCardService.java:56) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_26]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_26]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_26]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_26]
    at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:173) [cxf-2.4.1.jar:2.4.1]
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89) [cxf-2.4.1.jar:2.4.1]
    ... 15 more
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
    at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
    at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
    at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:92) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 43 more
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl$CallbackExceptionMapperImpl.mapManagedFlushFailure(AbstractEntityManagerImpl.java:1481) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl.beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:109) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization.beforeCompletion(RegisteredSynchronization.java:53) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.beforeCompletion(SynchronizationImple.java:76)
    at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.beforeCompletion(TwoPhaseCoordinator.java:273)
    at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:93)
    at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:164)
    at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1165)
    ... 46 more
Caused by: org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at $Proxy96.prepareStatement(Unknown Source)    at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.buildBatchStatement(AbstractBatchImpl.java:144) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.getBatchStatement(AbstractBatchImpl.java:127) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2827) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3290) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:80) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:264) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:186) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:315) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl.beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:104) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 52 more
Caused by: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl
    at java.sql.DriverManager.getConnection(DriverManager.java:602) [rt.jar:1.6.0_26]
    at java.sql.DriverManager.getConnection(DriverManager.java:154) [rt.jar:1.6.0_26]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:276) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    ... 70 more 
```

Oracle 数据库版本：11.2.0。

驱动版本需要和数据库版本匹配吗？

编辑：

1.  如何跟踪程序从哪个文件路径加载驱动程序？这增强了我找到根本原因的能力。谢谢。

2.  如何启用 ojdbc6-g 日志记录？我试过按照这个[Oracle_JDBC](http://lokeshtc.blogspot.com/2012/01/enabling-and-using-jdbc-logging.html) 但我不知道如何完成它。如何全局设置java系统属性？我知道环境变量可能不是一个好的选择。还有什么想法吗？我只想在使用这个 java 时将 -Doracle.jdbc.Trace=true 和 -Djava.util.logging.config.file 添加到 jvm 创建中。是在启动过程中设置oracle数据库吗？

3.  如何启用休眠日志记录？

4.  我正在使用 Hibernate-4.1.1 和 JBoss 7.1。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T22:04:41.253

“ojdbc.jar”不在`CLASSPATH`您的应用程序服务器中。

只需告诉我们它是哪个应用程序服务器，我们就会告诉您驱动程序应该放在哪里。

**编辑**：我看到标签[jboss](/questions/tagged/jboss "显示标记为“jboss”的问题")所以它必须放在文件夹中`"$JBOSS_HOME/server/default/lib/"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T07:42:47.957

“没有合适的驱动程序”通常意味着`JDBC`您提供的用于连接的 URL 语法不正确，或者根本没有加载驱动程序。

当调用 getConnection 方法时，`DriverManager`将尝试从初始化时加载的驱动程序和使用与当前小程序或应用程序相同的类加载器显式加载的驱动程序中找到合适的驱动程序。（使用`Class.forName()`）

例如

```
import oracle.jdbc.driver.OracleDriver;

Class.forName("oracle.jdbc.driver.­OracleDriver"); 
```

还要检查你`ojdbc6.jar`的类路径中是否有。我建议将`.jar`物理位置放置在项目的 JBoss`"$JBOSS_HOME/server/default/lib/"`目录中。

编辑：

你`hibernate`最近提到过。

检查您的`hibernate.cfg.xml`文件是否具有如下连接属性：

```
<property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
<property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:orcl</property> 
<property name="hibernate.connection.username">scott</property>
<property name="hibernate.connection.password">tiger</property> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-28T20:04:40.863

有时是简单的事情。就我而言，我的网址无效。我在 at 符号 (@) 之前省略了一个冒号。我有“jdbc:oracle:thin@//localhost”而不是“jdbc:oracle:thin:@//localhost”希望这可以帮助其他人解决这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-18T14:25:32.570

对我来说，我确实输入了一个无效的网址，例如 : `orcl`only 而不是`jdbc:oracle:thin:@//localhost:1521/orcl`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-08T16:49:38.723

这样做

```
set classpath=%classpath%(ur jarfile); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-06T17:35:25.670

首先，如果您在服务器 (JBoss) 中使用 Java EE 6 开发应用程序，则最好使用[DataSource](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)。然后就可以从这个 DataSource 中获取 Connection。最好使用连接池。

然后，从 JBoss AS 7 开始，JDBC 驱动程序必须声明为一个模块。这在[此处](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html-single/Administration_and_Configuration_Guide/index.html#Install_a_JDBC_Driver_as_a_Core_Module1)进行了描述。

对于 OJDBC 6 (11.x)，驱动程序的名称应该是“oracle.jdbc.OracleDriver”。这是在 SPI 模式下注册的名称（参见该文件的内容：*META-INF/services/java.sql.Driver*）。
从 Java 6 和 JDBC 4.0 开始，JDBC 驱动程序是**自动注册的**。

最后，您必须在 JBoss: [DataSource 配置](https://docs.jboss.org/author/display/AS71/DataSource+configuration)中声明一个 DataSource 。

参考 ：

*   **建立连接**（[链接](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)）（JDBC 4.0 <=> Java 6）
*   **Java SE 6 中的 JDBC 4.0 增强 > JDBC 驱动程序的自动加载**（[链接](http://www.onjava.com/pub/a/onjava/2006/08/02/jjdbc-4-enhancements-in-java-se-6.html)）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-05T17:29:42.677

下载 JDBC 驱动程序并添加到库中。下载链接[http://www.oracle.com/technetwork/apps-tech/jdbc-112010-090769.html](http://www.oracle.com/technetwork/apps-tech/jdbc-112010-090769.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-25T02:45:37.293

我也面临同样的问题。我也有所有需要的罐子。

[请参考代码截图以供参考](https://i.stack.imgur.com/VthEK.png)

但添加后

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

它对我有用。

```
package com.jdbc;

import java.sql.Connection;
import java.sql.DriverManager;

public class TestJdbc {

    public static void main(String[] args) {

        String url = "jdbc:oracle:thin:@127.0.0.1:1521:xe";
        String user ="SYSTEM";
        String password = "root";

        try {
            System.out.println("Connecting to DAtabase");
            Class.forName("oracle.jdbc.driver.OracleDriver");  /*added this line*/
            Connection connection = DriverManager.getConnection(url, user, password);
            System.out.println( connection.toString());
            System.out.println("Connection Success");
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

**注意：**如果您使用的是 JDK 8，请尝试使用***OJDBC8***而不是***OJDBC14***，在这种情况下，您也不必添加 Class.forName。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-14T12:03:33.190

我有同样的问题。为了在 Jboss 7 AS 中修复它，我将 oracle 驱动程序 jar 文件复制到 Jboss 模块文件夹。示例：`../jboss-as-7.1.1.Final/modules/org/hibernate/main`。

您还需要更改“module.xml”

```
<module xmlns="urn:jboss:module:1.1" name="org.hibernate">
<resources>
    <resource-root path="hibernate-core-4.0.1.Final.jar"/>
    <resource-root path="hibernate-commons-annotations-4.0.1.Final.jar"/>
    <resource-root path="hibernate-entitymanager-4.0.1.Final.jar"/>
    <resource-root path="hibernate-infinispan-4.0.1.Final.jar"/>
    <resource-root path="ojdbc6.jar"/>
</resources>

<dependencies>
    <module name="asm.asm"/>
    <module name="javax.api"/>
    <module name="javax.persistence.api"/>
    <module name="javax.transaction.api"/>
    <module name="javax.validation.api"/>
    <module name="org.antlr"/>
    <module name="org.apache.commons.collections"/>
    <module name="org.dom4j"/>
    <module name="org.infinispan" optional="true"/>
    <module name="org.javassist"/>
    <module name="org.jboss.as.jpa.hibernate" slot="4" optional="true"/>
    <module name="org.jboss.logging"/>
    <module name="org.hibernate.envers" services="import" optional="true"/>
</dependencies> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-17T07:24:12.020

我改变了我的旧路径：jdbc:odbc:thin:@localhost:1521:orcl

到新的：jdbc:oracle:thin:@//localhost:1521/orcl

它对我有用.....万岁！！ [图片](https://i.stack.imgur.com/be8yL.png)

# python - 用奇怪的文字得到输出，比如☻

> ID：12103370
> 
> 赞同：1
> 
> 时间：2012-08-24T05:01:55.737
> 
> 标签：python, python-2.7

嘿！我的脚本有问题。

我是在阅读[LPTHW 的](http://learnpythonthehardway.org/)书时写的。

我没有收到错误消息，但没有得到正确的输出，我认为我的系统可能存在设置错误。我很困惑。

这是脚本：

```
from sys import argv

script, filename = argv

print "We're going to erase %r." % filename
print "If you don't want that, hit CTRL-C (^C)."
print "If you do want that, hit RETURN."

raw_input("?")

print "Opening the file..."
target = open(filename, 'w+')

print "Truncating the file. Goodbye!"
target.truncate()

print "Now I'm going to ask you for three lines."

line1= raw_input("line1: ")
line2= raw_input("line2: ")
line3= raw_input("line3: ")

print "I'm going to write these to the file."

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n")

print "Now, I am going to read the file"
print target.read()

print "And finally, we close it."
target.close() 
```

这是输出：

```
PS C:\Users\Isaac\lpthw> python ex1.py sample.txt
We're going to erase 'sample.txt'.
If you don't want that, hit CTRL-C (^C).
If you do want that, hit RETURN.
?
Opening the file...
Truncating the file. Goodbye!
Now I'm going to ask you for three lines.
line1: i
line2: love
line3: mo
I'm going to write these to the file.
Now, I am going to read the file
#☻    ` ▬☻    ` ▬☻      .☻ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T05:07:53.310

当您调用`target.write()`时，文件指针就在写入数据之后。你可以打电话`target.tell()`看看它在哪里：

```
>>> target.tell()
0
>>> target.write('hello')
>>> target.tell()
5 
```

在阅读文件之前，您需要先找到文件的开头：

```
target.seek(0)
print target.read() 
```

# java - 如何使用 getClass().getResource() 方法

> ID：12103371
> 
> 赞同：7
> 
> 时间：2012-08-24T05:01:59.217
> 
> 标签：java

**当我创建 ImageIcon 类对象时，我使用以下代码：**

```
iconX = new ImageIcon (getClass().getResource("imageX.png")) 
```

* * *

当 .png 位于类的同一文件夹中时，上述代码在小程序或桌面应用程序中都能正常工作。

问题是：如何避免`NullPointerException`.Png 在另一个文件夹中？或者，当图像位于`ImageIcon`与类不同的位置时，如何将图像加载到对象中？

我不明白这种方法是如何工作的，如果有人可以帮助我，我将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:21:33.970

看看这个 -[`Class#getResource(java.lang.String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)

请单击上面的链接并阅读文档并按照以了解发生了什么。

它说 -

> 如果名称以“/”开头，则资源的绝对名称是名称中“/”后面的部分。

和

> 否则，绝对名称的格式如下：
> 
> ```
>  modified_package_name/name 
> ```
> 
> 其中 modified_pa​​ckage_name 是**此对象**的包名称，其中 '/' 替换为 '.'。

所以，如果**这个对象**（你调用的地方`getResource`）在包中`/pkg1`（`/`意味着 pkg1 就在类路径的根目录下）并且你使用了“imageX.png”，那么结果将`pkg1/imageX.png`是正确的，因为那是图像所在的位置。

但是，如果我们将资源 (imageX.png) 移动到某个其他包`/pkg2`并且您以相同的方式调用该方法，那么结果仍然是`pkg1/imageX.png`，但这次它会不正确，因为资源实际上位于`/pkg2`. 那就是您最终使用NPE的时候。

最好从类路径的根目录开始明确指定资源的完整路径。（例如“/pkg/imageX.png”）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:04:35.643

只需提供资源的路径。

因此，如果您将图像放在 Jar 中的“/resources/images”中，您只需使用

```
iconX = new ImageIcon(getClass().getResource("/resources/images/imageX.png")) 
```

本质上，您要说的是，类加载器，请在您的类路径中搜索以下资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:17:06.287

如果图像是内部的（你想要一个相对于你的项目的位置，或者可能打包到你的 jar 中），按照疯狂的程序员所说的去做：

```
iconX = new ImageIcon(getClass().getResource("/path/imageX.png")) 
```

路径是相对的，因此 path/ 将是与您的项目位于同一文件夹中的文件夹（或打包到您的 jar 中）。

如果您想要外部图像，只需将路径传递给 ImageIcon 构造函数（例如“C:/.../file.png”）。不建议这样做，因为最好将其用作资源。

有关 ImageIcon 构造函数的更多信息，请参见[此处](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/ImageIcon.html)。有关加载类资源的更多信息，请参见[此处](http://docs.oracle.com/html/E18745_01/apidocs/oracle/adf/view/faces/resource/ResourceLoader.html)（Javadoc 链接）

# dynamics-crm - 用于创建电子邮件的 CRM 2011 插件未在预验证时触发

> ID：12103372
> 
> 赞同：3
> 
> 时间：2012-08-24T05:02:02.687
> 
> 标签：dynamics-crm, dynamics-crm-2011

我对 CRM SDK 比较陌生，我正在尝试编写一个插件来更改 Create 上电子邮件的 From/CC 字段。似乎在预操作中注册时，无法修改 ActivityParty 集合（尽管可以修改主题和正文等内容），并且[这篇文章](http://mscrmuk.blogspot.com.au/2011/07/partylist-attributes-and-plugin-event.html)建议将管道阶段设置为预验证。

当我这样做时，插件不再被触发。我知道这一点是因为在远程调试时，只有在选择预操作时才会触发断点。此外，当不进行远程调试时，插件代码中不会实现任何其他更改。

有谁知道是什么阻止了这个插件的执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:37:07.917

当您在创建消息字段 To、CC、BCC 上注册插件时，将为空。尝试注册[DeliverIncoming](http://msdn.microsoft.com/en-us/library/bb959405.aspx) / [DeliverPromote](http://msdn.microsoft.com/en-us/library/bb959406.aspx)消息

# cassandra - 超级列族中的嵌套可以有多深？

> ID：12103376
> 
> 赞同：1
> 
> 时间：2012-08-24T05:02:26.143
> 
> 标签：cassandra

我试图了解 Cassandra 的 DB 模型，但我运气不佳。几乎所有的文档都在解释 Twissandra，一个 twitter 克隆，但它实际上是一个相当简单的案例，并没有真正帮助学习如何有效地使用 Cassandra；或者它是非常基本的低级别的东西，并没有真正显示您在现实世界情况下通常对列/超级列所做的事情。

所以我认为论坛将是一个足够复杂的应用程序来学习。假设一个网络论坛有点像 phpBB；你可以有多个论坛，每个论坛显示多个主题，每个主题都有多个帖子。

我首先想到有单独的帖子、主题和论坛列，但这似乎与我在 RDBMS 上实现它的方式没有什么不同。

所以现在我想知道超级列族中的嵌套有多深。类似下面的伪模型是一种合适的建模方式吗？

```
Forums = {
    forum001: {
        name: "General News",
        topics: {
            topic000001: {
                subject: "This is what I think",
                date: "2012-08-24 10:12:13",
                posts: {
                    post20120824.101213: { username: "tom", content: "Blah blah", datetime: "2012-08-24 10:12:13" }
                    post20120824.101513: { username: "dick", content: "Blah blah blah", datetime: "2012-08-24 10:15:13" }
                    post20120824.103213: { username: "harry", content: "Blah blah", datetime: "2012-08-24 10:32:13" }
                }
            },
            topic000002: {
                subject: "OMG Look at this",
                date: "2012-08-24 10:42:13",
                posts: {
                    post20120824.104213: { username: "tom", content: "Blah blah", datetime: "2012-08-24 10:42:13" }
                    post20120824.104523: { username: "dick", content: "Blah blah blah", datetime: "2012-08-24 10:45:23" }
                    post20120824.104821: { username: "harry", content: "Blah blah", datetime: "2012-08-24 10:48:21" }
                }
            }
        }
    },
    forum002: {
        name: "Specific News",
        topics: {
            topic000003: {
                subject: "Whinge whine",
                date: "2012-08-24 10:12:13",
                posts: {
                    post20120824.101213: { username: "tom", content: "Blah blah", datetime: "2012-08-24 10:12:13" }
                    post20120824.101513: { username: "dick", content: "Blah blah blah", datetime: "2012-08-24 10:15:13" }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:11:24.677

1.  除非您正在编写不打算直接查询的 JSON 文档，否则您无法拥有该级别的嵌套。
2.  您不应该使用超列，因为它们已被弃用。
3.  克里斯对您的问题的评论是绝对正确的：首先要问自己打算如何查询数据，然后像您打算阅读的那样编写。有时这意味着编写不止一种方式（即规范化不是目标）。
4.  您可以通过使用复合键和/或列来获得额外的“嵌套”。
5.  由于您只能通过键和列范围进行查询，或者使用二级索引，因此您通常需要为不适合二级索引的列（即具有高基数）编写自己的索引。

我知道这些规则不会给你一个模型，但你的模型完全依赖于查询。这是一种与 RDBMS 不同的看待世界的方式。如果您真的需要临时查询支持（许多用例确实不需要），Cassandra 不是正确的选择。

# asp.net - 读取 Excel：列名被截断为前 64 个字符

> ID：12103377
> 
> 赞同：2
> 
> 时间：2012-08-24T05:02:46.660
> 
> 标签：asp.net, .net, excel, oledb

我正在尝试通过 .NET (C#) 读取 excel 电子表格

下面是我使用的连接字符串：

`Provider=Microsoft.Jet.OLEDB.4.0; Data Source=C:\Windows\TEMP\96e7a8b720b642388d9dbbca49537678.xls; Extended Properties="Excel 8.0;HDR=Yes;IMEX=1;TypeGuessRows=0;ImportMixedTypes=Text";`

当我使用以下方法查看架构时：

```
using (var conn = new OleDbConnection(connStr))
        {
            conn.Open();
            result[OleDbSchemaGuid.Tables] = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            result[OleDbSchemaGuid.Columns] = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Columns, null);
            result[OleDbSchemaGuid.Tables_Info] = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables_Info, null);
            conn.Close();
        } 
```

In `result[OleDbSchemaGuid.Columns]`- 所有列名都被截断为前 64 个字符。

我需要所有列的全名。

任何想法解决/解决这个问题？

非常感谢您查看此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:59:01.650

Tim is right, as per this [discussion](http://social.msdn.microsoft.com/Forums/en/adodotnetdataproviders/thread/2fb51d81-3d64-445f-806a-519861b561ba) on MSDN. you need to use some third party data access provider as this is the limit for Jet.

**EDIT**:

It can be done without using any third party provider as well. I read this Today on [Microsoft's Support Site](http://support.microsoft.com/kb/281517). According to them its limitation of `Jet 4.0LEDB Source`.

# iphone - 如何获取输入法更改的事件或通知？（IOS5.1）

> ID：12103380
> 
> 赞同：1
> 
> 时间：2012-08-24T05:03:43.133
> 
> 标签：iphone, ios, xcode, uitextfield

（IOS 5.1 Xcode 4.3） 当用户点击按钮切换键盘输入法时，如何获取该事件并判断输入法的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:25:38.373

当输入法发生变化时，虽然键盘已经存在，但 iOS 会发送 UIKeyboardDidShowNotification。您可以为自己注册此通知，例如：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                     selector:@selector(keyboardDidShow:) 
                                         name:UIKeyboardDidShowNotification
                                       object:nil]; 
```

从我的角度来看，这实际上就是你所能做的！不知道能不能直接检测到当前键盘的输入法！或者可以看看下面的讨论：[检测当前 iPhone 输入语言](https://stackoverflow.com/questions/1414876/detecting-current-iphone-input-language)！

# single-sign-on - 当应用程序在 SSO 中由发行者解密令牌时，涉及哪种算法？

> ID：12103387
> 
> 赞同：1
> 
> 时间：2012-08-24T05:04:16.973
> 
> 标签：single-sign-on, claims-based-identity, claims

在使用 SSO 的基于声明的身份验证的情况下，应用程序从颁发者处为特定用户接收令牌，并且该令牌包含声明以及某种数字签名，以便应用程序跟踪颁发者是受信任的一。我想知道，该应用程序是否涉及某种算法来识别发行人？我读过发行者有一个公钥，而所有其他应用程序都有自己的私钥，这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:41:56.200

进行单点登录的协议、格式和方法有很多，例如[安全断言标记语言 (SAML)](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)、[OpenID](http://openid.net/)和[OAuth](http://en.wikipedia.org/wiki/Openauth)。目标是让一个实体（例如网站）识别和验证用户（例如通过用户名和密码），而其他实体（例如其他网站）通过令牌信任该验证的证据。这意味着用户无需记住另一个密码，并且每个网站都维护自己的密码列表。

这种信任通常是通过使用数字签名的密码术来实施的。使用数字签名是因为它允许信任实体验证令牌是 (1) 仅由身份验证实体颁发的和 (2) 在无法冒充（假装是）身份验证实体的情况下未被篡改。

正如您上面所说，这是使用非对称或公钥密码术执行的。对称密码术，例如 AES 或 DES 算法，使用单个密钥来加密和解密数据。非对称加密，例如[RSA](http://www.rsa.com/rsalabs/node.asp?id=2146)算法，使用两个相关的密钥。使用其中一个加密的数据只能由另一个解密，反之亦然。

一个密钥通常是保密的，称为私钥，另一个是广泛分布的，称为公钥。在上面的示例中，身份验证实体拥有私钥，允许它加密任何拥有公钥的人都可以解密的数据。

似乎验证实体只会加密用户详细信息并将其用作令牌。但是，常用的非对称算法（如 RSA）速度非常慢，即使加密少量数据也可能需要很长时间。

因此，身份验证实体不是加密用户详细信息，而是生成“散列”或“摘要”并对其进行加密。散列算法以非常难以逆转的方式将一段数据转换为一个小数（散列）。不同的数据片段也会产生不同的哈希值。常见的散列算法包括[消息摘要 5 (MD5)](http://en.wikipedia.org/wiki/MD5)和[安全散列算法 (SHA)](https://www.rfc-editor.org/rfc/rfc4634)及其衍生算法，如 SHA1、SHA256 和 SHA512。

使用认证实体的私钥加密的散列称为数字签名。当它收到令牌时，信任实体使用身份验证实体的公钥解密令牌，并将其与它自己计算的哈希值进行比较。如果散列相同，则信任实体知道它没有被修改（因为散列匹配）并且它必须来自身份验证实体（因为只有它知道它的私钥）。

如果您想了解有关 SAML 和基于声明的身份验证的更多信息，我发现[此视频](http://channel9.msdn.com/shows/Going+Deep/Vittorio-Bertocci-WS-Trust-Under-the-Hood/)非常有用。它确实很快变得复杂，您可能需要多次观看，但 Vittorio 非常详细地涵盖了大多数这些概念。

# android - android 4.1 中的媒体编解码器示例实现

> ID：12103393
> 
> 赞同：4
> 
> 时间：2012-08-24T05:04:45.633
> 
> 标签：android, gstreamer, android-4.2-jelly-bean, java-gstreamer

我正在尝试在 android 上显示视频缓冲区。我正在使用 Android 4.1 Jelly Bean 中发布的媒体编解码器 API。

示例如下：

```
 MediaCodec codec = MediaCodec.createDecoderByType(type);
 codec.configure(format, ...); 
```

configure 方法接受除 MediaFormat 之外的 3 个其他参数。我已经能够以某种方式弄清楚 MediaFormat，但我不确定其他 3 个参数。（以下）。

```
 MediaSurface, MediaCrypto and Flags. 
```

有什么线索吗？

此外，如果我不加密我的视频缓冲区，我应该如何处理 MediaCrypto 参数。

要求：

```
1) Decode the buffers on the android device, 
2) Display them on the screen. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:14:43.333

您可以从这里查看文章：http: [//dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/](http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:48:19.083

只是为了完整性：

解码 -

**MediaSurface**是将帧渲染到的表面（如果不渲染，则为 null）

**如果没有加密， MediaCrypto**应该为 null

**flags** == 0 如果解码或 MediaCodec.CONFIGURE_FLAG_ENCODE 如果编码

# api - 使用 nServiceBus 和 REST API 进行 API 版本控制和长时间运行的进程

> ID：12103394
> 
> 赞同：0
> 
> 时间：2012-08-24T05:04:48.017
> 
> 标签：api, architecture, versioning, nservicebus

我们正在构建一个 Web API，并使用 nServiceBus 为所有异步和长时间运行的进程在后台进行消息传递。

问题是当我们推出新版本的 API 时，我们应该使用一组新的队列吗？

就像，对于 API 版本 1，

*   blobstore.v1.inbound
*   blobstore.v1.outbound
*   blobstore.v1.timeout
*   blobstore.v1.audit

对于 API 版本 2，

*   blobstore.v2.inbound
*   blobstore.v2.outbound
*   blobstore.v2.timeout
*   blobstore.v2.audit

或者我们应该努力使用具有多种消息格式和处理程序的同一组队列（假设需求变化和不断发展的消息格式）？

我试图从架构的角度来理解长期的利弊。拥有一组单独的队列可以灵活地单独构建、部署和管理不同的 API 版本，而无需担心兼容性和社交性。

我个人倾向于后者，但围绕兼容性和升级的挑战尚不清楚。

如果您过去处理过类似的情况，请分享您的经验、想法、建议和建议。

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:16:50.010

使用不同的队列集还是使用单个队列来支持不同版本的消息之间的决定取决于消息之间差异的程度。在[版本控制示例中](http://nservicebus.com/docs/Samples/Versioning.aspx)V2消息是V1消息的纯扩展，可以用接口继承来表示。V1 消息的订阅者可以接收 V2 消息，它们是 V1 消息的适当超集。在这种情况下，保持相同的队列并仅根据需要更新订阅者是有意义的。如果消息完全不同，则部署第二组队列可能更容易。这具有您描述的好处，即隔离。您不必担心会弄乱依赖组件。但是，这将对您的系统产生更大的影响，因为您必须考虑可能依赖于队列的所有内容。可能您必须同时部署多个端点和服务才能完成 V2 的推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:16:32.507

您的发布越频繁，每个版本的队列策略就越不合适，并且向后兼容性变得越重要（无论是在结构上还是在行为上）。

# android - eclipse android找不到资源文件

> ID：12103398
> 
> 赞同：0
> 
> 时间：2012-08-24T05:05:24.693
> 
> 标签：android, eclipse, resources

我非常需要帮助。我试图在我的 android 应用程序 Project>Clean 中进行清理。这样做之后，我所有的课程都开始出现错误。它无法检测到 R in --> findViewById(R.id.heightVal); 它无法找到其他一些文件，xml ids 和 xmls。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:08:58.090

如果您使用的是 Ganymede 并且在其他一些 Eclipse 版本中遇到类似问题，这可能会对您有所帮助，无论是重新启动还是执行此操作大多数时候都可以清除它，右键单击您的项目，然后单击配置构建路径勾选那里显示的 android 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:09:19.623

我想你`import android.R`在你的活动中。如果是这种情况，则删除该行并再次清理项目。

> R 是一个自动生成的类，其中包含用于标识资源的常量。如果您没有 R.java 文件（在带有 1.5 SDK 的 Eclipse 中将是 gen/eu.mauriziopz.gps/R.java），我建议您关闭并重新打开您的项目或转到 Project > Build all（和选择“自动构建”）。如果这不起作用，不如尝试制作一个新项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:22:21.207

尝试注释 XML 文件中显示错误的所有行。清理项目。如果 R.java 已重新生成，您可以取消注释这些行。如果 id 仍未检测到，请尝试关闭并重新打开项目。这很奇怪，但有时您必须这样做。

# assembly - 如何在汇编中输入 32 位数字？

> ID：12103401
> 
> 赞同：0
> 
> 时间：2012-08-24T05:05:53.850
> 
> 标签：assembly, input, x86, dos, digit

我正在 Tasm 中编程并想输入一个 32 位数字。

我知道我必须逐个数字地输入它（我希望没有一个用于数字输入的呼叫功能）

这是我的代码

```
 .        .486
    .model small
    .code
    start:

    mov ebx, 0

    ; enter again and again untill enter is hit
    again:
    mov ah,01h
    int 21h
    cmp al, 13
    jz next
    mov dl, al
    mov eax, ebx
    mov ebx, 10
    mul ebx
    mov ebx, eax
    mov eax, 0
    mov al, dl
    add ebx, eax
    jmp again

    ; now find the digits back

    next:
    ; just testing to see if i got number
    mov edx, 13
    mov ah, 02h
    int 21h

    mov edx, 10
    mov ah,02h
    int 21h

    mov edx, ebx
    mov ah, 02h
    int 21h

    mov eax, ebx

    mov ebx, eax

    xor edx, edx
    xor cl, cl

    ; find digits and push into stack from last to first so when i pop i get digits back
    finddigit:
    xor edx,edx
    mov ch , 10
    div ch
    push dx ;taking risk dx dl
    inc cl
    cmp eax, 0
    jz print
    jmp finddigit

    ; stored into cl the number of digits

    print:
    cmp cl,0
    jz exit
    dec cl
    pop dx
    mov ah,02h
    int 21h
    jmp print

    exit:
    end start 
```

我在 enter 停止输入。

我收到错误 NTVDM 遇到了一个硬错误。

谢谢

这是我新修改的代码。它对 2 和 123 等数字运行良好，但对 333、4444、555 则失败；（我希望推送和弹出不会修改指定以外的任何寄存器）：

```
.486
.model small
.code
start:

mov ebx, 0

; enter again and again untill enter is hit
again:
mov ah,01h
int 21h
cmp al, 13
jz next
mov cl, al
sub cl, 30h
mov eax, ebx
mov ebx, 10
mul ebx
mov ebx, eax
mov eax, 0
mov al, cl
add ebx, eax
jmp again

; now find the digits back

next:
; just testing to see if i got number
mov edx, 13
mov ah, 02h
int 21h

mov edx, 10
mov ah,02h
int 21h

mov eax, ebx

mov ebx, eax

xor ecx, ecx

mov ebx, ebp
; find digits and push into stack from last to first so when i pop i get digits back
finddigit:
xor edx,edx
mov ebp , 10
div ebp
push edx
inc cl
cmp eax, 0
jz print
jmp finddigit

; stored into cl the number of digits

print:
cmp cl,0
jz exit
dec cl
xor edx,edx
pop edx
add dl,30h
mov ah,02h
int 21h
jmp print

exit:
mov ah,4ch
int 21h               
end start 
```

我正在运行这是 MS-DOS CMD.exe 窗口 弹出错误来了：

![错误](../Images/e2a7dd95f3ee5abddd2190cfe6443a11.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:34:36.677

假设这是针对 DOS 环境（由于`int 21h`）：

您的代码中有一些错误。

`1.`读取字符函数在 中返回其输出`al`，没关系。但是随后您立即使用以下顺序销毁读取字符的值：

```
 mov dl, al    ; the character read now in dl
    mov eax, ebx  ; eax is now 0 in the first loop
    mov ebx, 10   ; ebx is now 10
    mul ebx       ; the result of mul ebx is now in edx:eax,
                  ; the character read (in dl) is lost. 
```

`dl`因此，如果要执行此操作，则无法将字符存储在其中`mul ebx`，因为`mul reg32`将结果输出到`edx:eax`. 你可以存储它，例如。在`cl`或`ch`代替。

`2.`我注意到的其他错误是您试图将 ASCII 值乘以 10（在前面的代码中）。在乘法之前，您应该首先减去每个读取字符的“0”值，即`sub al, 30h`or `sub al, '0'`。

`3.`第三个错误按以下顺序排列：

```
 xor edx,edx
   mov ch , 10
   div ch
   push dx ;taking risk dx dl
   inc cl
   cmp eax, 0
   jz print
   jmp finddigit 
```

**编辑：**在这里你除以`ax`，`ch`这显然不适用于 32 位除法。看起来你想要你的股息，用（就像你做的那样）`eax`清除，然后用 32 位寄存器除以，例如。,或（到目前为止，这些似乎在您的代码中未使用），您将获得商数和余数。`edx``xor edx, edx``edx:eax``ebp``esi``edi``eax``edx`

# android - 如何在缩放时阻止android webview包装内容？

> ID：12103402
> 
> 赞同：0
> 
> 时间：2012-08-24T05:05:56.487
> 
> 标签：android, android-webview

Android webview 在放大和缩小时自动包装内容。例如，在放大时，它会将一行文本换行到下一行，因此布局会发生变化。但我想要实现的只是放大而不改变任何布局。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:50:09.357

最后从[这里](https://stackoverflow.com/questions/9938464/setting-webview-at-the-center-of-relative-layout)找到解决方案。

```
MyView.getSettings().setLoadWithOverviewMode(true);
MyView.getSettings().setUseWideViewPort(true); 
```

# database-design - 为什么列太多的表有异味？

> ID：12103407
> 
> 赞同：0
> 
> 时间：2012-08-24T05:06:30.360
> 
> 标签：database-design, optimization, orm, single-responsibility-principle

最近，我与其他一些开发人员讨论了表格中有多少列，或者模型上有太多属性是代码异味。有人争辩说，拥有太多 Attribute 的 Model 做的事情太多，应该拆分。但是如果模型实际上需要这些属性呢？

让我以一张`users`桌子为例。

一个用户可以有 `first_name`, `last_name`, `street_name`, `city`, `state`, `age`, 等等。根据论证，我假设`street_name`，`city`并且`state`应该被移动到不同的表中。我同意以这种方式将相关数据分组在一起，但如果应用程序也在用他的地址查询用户，那会不会是一个更昂贵的操作，因为它们现在在 2 个表中？

那么对具有很多属性的表进行建模的正确方法是什么？（我们是否还应该考虑这些情况：当 1\. 行数将减少 2\. 行数将很大时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:41:51.190

这不是“一张表中有太多属性”的问题。这是一个“将错误的属性绑定在一个表中”的问题。表的键应该与主题中的某些实体或关系相关。非关键属性应该依赖于（由）关键、整个关键以及除了关键之外什么都没有。

这是对所谓的“数据规范化”的过度简化的看法。数据规范化有助于避免在数据库的多个位置存储相同的事实。这种有害的冗余不仅浪费，而且还可能导致数据库自相矛盾。这是一个真正的痛苦。

将非规范化设计转换为规范化设计通常涉及拆分表。但不要只是随意拆分表格。学习规范化规则。跟随他们，直到你变得足够专业，知道什么时候可以无视他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:19:06.680

这是一个相当学术的问题。在设计数据库模型时，您通常只考虑一件事：**性能**。您不会仅仅因为它看起来更好而拆分表。例如，你会这样做

*   什么时候可以减少冗余
*   或增强并发性。

当不是所有数据库时，大多数记录的大小也有限制。因此，您可以拆分表以使数据库能够有效地存储它。

设计类时完全不同。拆分类不会对性能产生很大影响，但会对维护产生很大影响。可维护性应该是主要关注点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:43:02.747

具体使用您的`address`场景，如果您的设计应该满足每个用户的多个地址或使用同一地址跟踪/捕获多个注册，您会发现它非常有益。

或者，您可以考虑一个更通用的地址表实现，其中您有一个通用`description`字段和一个`type`将行标记为特定类型地址的列（例如`email`，`house`、`office`、`spouse`等）。

这个故事的寓意是这个故事的寓意是如果它可能不止一个，有一个单独的表。过度规范化仅在跳过额外的一两个表格没有任何好处时才会出现：

1.  变化不大，
2.  不超过一次或
3.  每个主键实体都必须拥有它。

# data-structures - 链表和流之间的技术区别是什么？

> ID：12103409
> 
> 赞同：2
> 
> 时间：2012-08-24T05:06:34.670
> 
> 标签：data-structures, language-agnostic

似乎它们都以相同的方式做同样的事情：以特定但非必要索引的顺序进行惰性操作，并且不一定要回溯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:15:45.443

链表是一种表示内存中数据元素序列的特定方式，其中每个元素都与指向序列中下一个元素的排序指针配对。链表允许您对其子序列执行一系列操作：您可以剪切或插入整个元素链，或者以非常低的成本从中间删除元素。

另一方面，流是按顺序访问数据的抽象，对它们在内存中的表示没有任何特定要求。您可以使用链表来实现流，但也可以为此使用其他数据结构，例如普通数组或循环数组缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:16:49.133

我认为这有点像比较苹果和橘子。

链表是一种数据结构，其中每个节点都指向另一个节点。它们是一种有用的结构，因为从链表中插入和删除项目只是重新指向一个节点的问题，而不是使用需要进行更多改组的数组。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Linked_list](http://en.wikipedia.org/wiki/Linked_list)。

流是用于表示一系列字节的抽象对象。在大多数框架（Java、.NET 等）中，有几种具体的流实现（内存流、文件流等）用于从相关源（内存、文件等）读取字节数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:22:44.027

链表是一种数据结构，其中每个元素都有一个指向下一个元素的指针，并且可能在另一个方向上相同。循环链表甚至有一个从最后一个元素到第一个元素的指针，反之亦然。这些指针（或没有指针的语言中的引用）定义了数据结构。它们暗示了某种操作模式，但它们并不强制这样做。例如，Java 中的`LinkedList`类可以像数组一样使用，尽管那时它不会很有效。它也可以用作（双端）队列或堆栈，具体取决于您调用的函数。

另一方面，流不是定义为数据结构，而是定义为元素的源或汇。如果您想到文件流、套接字流或包装流的读取器/写入器类，这些元素可能是字节或字符。流提供的元素也可能更复杂，例如解析器的标记。在这种情况下，流可能在内部使用某种队列，可以使用链表或某种数组构造来实现。

只要确保理解这两件事是在不同的抽象层上定义的。链表是根据它在内部的工作方式来定义的，而流是根据它在外部的工作方式来定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:18:34.780

只读单链表和输入流之间有一个共同的抽象，C++ 将其形式化为`InputIterator`：您可以读取一个值并且可以向前移动。在许多流 API 中，您必须同时执行这两项操作，但鉴于该 API，很容易看出如何使用缓存一个值的包装器将它们分开：C++ 调用此类`istream_iterator`。

但是，单链表具有流并不总是具有的属性，C++ 将其形式化为`ForwardIterator`：您可以复制当前位置，将*副本*向前移动，但仍可以读取原始位置的值。通用流无法做到这一点，因为底层 I/O 只有一个“当前位置”。使用链表，您可以有多个指向列表中不同节点的指针，而不会遇到麻烦。

一些流可以被标记和重置、倒带、寻找（寻找？）等，添加有点像 C++ ForwardIterator 甚至 RandomAccessIterator 的设施。

我使用 C++ 作为示例并不是因为它特别重要，而是因为 C++ 的迭代器概念部分设计用于提供数据结构和流共有的抽象。并非所有语言都有这样一个共同的抽象，但是对于 Python 中的另一个示例，您可以编写`for x in y:`if`y`是容器数据结构或 if`y`是类文件对象，或者一般来说 if`y`是“可迭代的”。

# sql-server-2008 - Azure 模拟器和 SQLLOCALDB 的问题

> ID：12103410
> 
> 赞同：3
> 
> 时间：2012-08-24T05:06:36.270
> 
> 标签：sql-server-2008, azure, azure-compute-emulator

在尝试启动 azure storage emulator 时，出现以下错误。

探测 SQL 端点时捕获异常。建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）报告的 Sql 错误数：1 Sql 错误：System.Data.SqlClient.SqlError：建立连接时发生与网络相关或特定于实例的错误到 SQL Server。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

所有组件均已正确安装。请帮助谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-26T15:18:33.103

我设法通过删除和创建我的 LocalDb 实例来修复它。就我而言，这是因为我在 2.1 版上安装了 Azure SDK 2.2。

逐步修复它：

*   运行`sqllocaldb i`以获取您的实例名称：

```
     C:\Users\myUser>sqllocaldb 我
     v11.0

```

*   停止 LocalDB 实例：

```
    C:\Users\myUser>sqllocaldb p v11.0
    LocalDB 实例“v11.0”已停止。

```

*   删除您的 LocalDB 实例：

```
    C:\Users\myUser>sqllocaldb d v11.0
    LocalDB 实例“v11.0”已删除。

```

*   创建具有相同名称的 LocalDB 实例：

```
    C:\Users\myUser>sqllocaldb c v11.0
    使用版本 11.0 创建的 LocalDB 实例“v11.0”。

```

*   删除数据库文件以允许模拟器重新创建数据库文件

```
   C:\Users\myUser\DevelopmentStorageDb22.mdf
   C:\Users\myUser\DevelopmentStorageDb22_log.ldf

```

那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:18:01.337

看起来您登录的 Windows 帐户不是 sqlexpress 实例中的 sysadmin。通常模拟器使用带有 Windows 身份验证的 sqlexpress 中的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T22:34:53.110

我怀疑的是您使用模拟器的 LocalDB 配置以某种方式损坏或配置错误。

请关注下面的博客，看看您是否可以验证 LocalDB 实例是否已准备好/正在工作并且已被 Emulator 使用：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/07/10/windows-azure-sdk-1-7-storage-emulator-and-localdb.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/07/10/windows-azure-sdk-1-7-storage-emulator-and-localdb.aspx)

如果您仍然有问题，最简单的方法是完全卸载 SDK 1.7 并重新安装，这将解决您的配置的任何问题，而不是发现问题并尝试修复可能需要更长的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:21:18.487

第一次运行 Windows Azure 存储模拟器时，会运行一个初始化过程来配置环境。默认情况下，初始化过程会在 SQL Express LocalDB 中创建一个数据库。因此，请确保您的 SQLExpress 服务正在运行，并且您的登录名有足够的权限使用 SQLExpress 中的数据库。如果您想使用存储模拟器使用的 SQL Server 的本地实例，请按照[http://msdn.microsoft.com/en-us/library/windowsazure/gg433134.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433134.aspx)中列出的步骤操作。

HTH 萨米尔

# android - 调用 getSystemService 的 CallObjectMethod 中的 Android NDK 崩溃

> ID：12103411
> 
> 赞同：3
> 
> 时间：2012-08-24T05:06:42.217
> 
> 标签：android, c, android-ndk, java-native-interface

这是我提出的另一个问题的后续：[Android -- get MEID from JNI](https://stackoverflow.com/questions/11643498/android-get-meid-from-jni)

我正在尝试在 Android 中获取手机的 ID。我有一些 JNI 代码和一个简单的测试应用程序来调用 JNI 代码。这是来自我的简单测试应用程序的工作 Java 代码：

```
TelephonyManager tm = (TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
String id = tm.getDeviceId(); 
```

该字符串`id`设置为我想要的电话 ID 值。但是我需要从 JNI 中获取它，并且仅使用上面的代码并传入 ID 值是不可接受的解决方案。（这是为了让一些 JNI 代码有点防篡改，我不应该相信 Java 层会发送正确的 ID 值。）

这是我编写的 JNI 代码，删除了错误处理，因此更容易理解。它一直工作到指定的行，然后整个应用程序崩溃。

```
// "env" and "obj" are passed to a JNI function and are used unmodified in this code
// JNIEnv *env, jobject obj

jclass cls_context = NULL;
jclass cls_tm = NULL;
jobject tm = NULL;
jmethodID mid;
jfieldID fid;
jstring jstr;
jsize len_jstr;

cls_context = (*env)->FindClass(env, "android/content/Context");
fid = (*env)->GetStaticFieldID(env, cls_context, "TELEPHONY_SERVICE",
        "Ljava/lang/String;");
jstr = (*env)->GetStaticObjectField(env, cls_context, fid);

mid = (*env)->GetMethodID(env, cls_context, "getSystemService",
        "(Ljava/lang/String;)Ljava/lang/Object;");

tm = (*env)->CallObjectMethod(env, obj, mid, jstr);  // THIS LINE CRASHES

cls_tm = (*env)->FindClass(env, "android/telephony/TelephonyManager");

mid = (*env)->GetMethodID(env, cls_tm, "getDeviceId",
        "()Ljava/lang/String;");

jstr = (*env)->CallObjectMethod(env, tm, mid);

len_jstr = (*env)->GetStringUTFLength(env, jstr);

(*env)->GetStringUTFRegion(env, jstr, 0, len_jstr, buf_devid); 
```

我认为问题在于这`obj`不是正确的事情，但如果是这样，我不知道什么是正确的事情。`obj`传递给 JNI 函数的内容与`this`Java 代码中的内容不一样吗？

编辑：好的，我们已经发现，如果我们`jobject`向 JNI 函数添加一个额外的类型参数，并在该参数中显式传递一个副本`this`，然后将其传递给`CallObjectMethod()`（在上述代码中崩溃的那个），一切正常. 我们得到我们的`TelephonyManager`实例，我们可以查询电话 ID 值。

使用日志记录宏，我记录了`obj`指针和传入的`this`指针。它们是相似的数字（地址彼此接近）但不相同。所以我认为`obj`是来自 Java VM 内部的某种对象引用......它实际上与`this`.

在 JNI 函数中，前两个参数是`JNIEnv *env`和`jobject obj`。第二个是干什么用的？我能用它做什么？有什么方法可以使用它来调用`getSystemService`还是必须传递一个额外的参数并传入`this`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:53:31.387

问题似乎与 Java 继承有关：在 Java 中，您可以调用`this.getSystemService()`它并且它可以工作，即使它`this`实际上不是`Context`. 当您进行 JNI 调用时，调用就会失败。

所以我们的解决方案是让我们的 Android 应用程序`.getApplicationContext()`实际上添加一个方法函数作为它自己的类的一部分。这反过来调用实际`getSystemService()`并返回结果。

代码没有改变：我们仍在调用

```
mid = (*env)->GetMethodID(env, cls_context, "getSystemService", "(Ljava/lang/String;)Ljava/lang/Object;"); 
```

但是现在它可以工作了，当`.getSystemService()`类中有一个方法正在调用我们的 JNI 函数时。因此，`env`JNI 调用中的参数确实表示`this`（它不完全相同......我将值打印`this`为指针，然后打印`env`，它们不一样，但它们肯定是相关的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T09:58:43.067

如果你想在对象上调用超类方法，你应该使用`CallNonvirtualObjectMethod()` [How to call an overriden method in JNI](https://stackoverflow.com/a/16928574/4350702)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-06T05:35:44.883

试试这个......它工作......“上下文”来自java :)

```
jclass ctx = env->FindClass("android/content/Context");
jfieldID fid = env->GetStaticFieldID(ctx,"TELEPHONY_SERVICE","Ljava/lang/String;");
jstring str = (jstring) env->GetStaticObjectField(ctx, fid);
jmethodID mid = env->GetMethodID(ctx, "getSystemService","(Ljava/lang/String;)Ljava/lang/Object;");
jobject tm = env->CallObjectMethod(context, mid, str);

jclass ctx_tm = env->FindClass("android/telephony/TelephonyManager");
jmethodID mid_tm = env->GetMethodID(ctx_tm,"getDeviceId","()Ljava/lang/String;");
jstring str_tm = (jstring) env->CallObjectMethod(tm, mid_tm);

strReturn = env->GetStringUTFChars(str_tm, 0); 
```

# c# - 需要正则表达式来按顺序过滤 .SQL 文件

> ID：12103413
> 
> 赞同：-2
> 
> 时间：2012-08-24T05:07:02.187
> 
> 标签：c#, .net, regex

我有一个批处理文件（.bat），其中包含如下文本：

```
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_qsel.sql -o sp_RejectAccounts_qsel.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_sel.sql -o sp_RejectAccounts_sel.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_GetCompanyRecordCardRequest_01Aug2012.sql -o sp_GetCompanyRecordCardRequest_01Aug2012.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i SPGetCreditTransactions.sql -o SPGetCreditTransactions.out 
```

我需要一种方法来获取所有 .sql 文件，比如一个字符串数组。
文本有一些变化。正则表达式应该找到 .sql 然后向左移动直到找到一个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:38:53.613

```
 List<string> sqls = File.ReadAllLines("Utils.txt")
                                .Select(s =>
                                {
                                    string temp = s.Substring(s.IndexOf("<"));
                                    return temp = temp.Substring(1, temp.IndexOf(">") - 1).Trim();
                                })
                                .ToList(); 
```

因此，您可以指定任何算法以在`Select`. 如果您指定了有关文件名如何出现在文件中的更多信息，则可以提供更特殊的代码

**编辑**

这是另一个示例`Regex`：

```
 string regex = @"(?<sql>[\w]{1,}.sql)";
        List<string> sqls = File.ReadAllLines("Utils.txt")
                                .Select(s =>
                                {
                                    Match m = Regex.Match(s, regex);
                                    if (m.Success)
                                        return m.Groups["sql"].Value;
                                    else
                                        return string.Empty;
                                })
                                .ToList(); 
```

**编辑**

```
List<string> sqls = File.ReadAllLines("Utils.txt").Select(s => s.Split(' ').FirstOrDefault(f => f.Contains(".sql"))).ToList(); 
```

**编辑**

AAA您可以将我之前给您的正则表达式更改为

`string regex = @"(?<sql>[\S]{1,}.sql)";`

并获得与通过相同的结果`Split`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:16:36.790

你可以这样做：

```
 string input = @"osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_qsel.sql -o sp_RejectAccounts_qsel.out
                        osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_sel.sql -o sp_RejectAccounts_sel.out
                        osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_GetCompanyRecordCardRequest_01Aug2012.sql -o sp_GetCompanyRecordCardRequest_01Aug2012.out
                        osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i SPGetCreditTransactions.sql -o SPGetCreditTransactions.out";

        List<string> names = Regex.Matches(input, @"[^\s]+\.sql")
                .Cast<Match>()
                .Select(o => o.Groups[0].Value)
                .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:38:55.787

你可以这样做。（我使用 List 作为输入的容器）。我不知道它是否有效，可能需要对索引 + 和 - 进行一些调整。取决于空格。

```
var a = new List<string>{"sqlplus %1/%2 < %ORACLE_CreateScriptsPath%\VersionInsertScript_Or.sql > %ORACLE_CreateScriptsPath%\VersionInsertScript_Or.out",
"sqlplus %1/%2 <  %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnsReportData.sql > %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnsReportData.out",
"sqlplus %1/%2 <  %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnReportDataRD.sql > %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnReportDataRD.out",
"sqlplus %1/%2 <  %ORACLE_CreateScriptsPath%\Create_GT_GenerateTXNInvestigationReport.sql > %ORACLE_CreateScriptsPath%\Create_GT_GenerateTXNInvestigationReport.out",
"sqlplus %1/%2 <  %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnsReportData.sql > %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnsReportData.out",
"sqlplus %1/%2 <  %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnReportDataRD.sql > %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnReportDataRD.out"};

var strings = new List<string>();

foreach(var input in a)
{
var tmpString = input.Substring(input.IndexOf("<")+3);
tmpString = tmpString.Remove(tmpString.IndexOf(">")-1);
strings.Add(tmpString);
}
//Here you have all the SQL files accessible in the strings collection 
```

也可以使用 split 来获取文件名。像这样的东西。

```
var fileNames= input.Split(" ").Where(f => f.Contains(".sql")).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:42:44.490

下面是执行此操作的代码。

```
 var input =
            @" > %ORACLE_CreateScriptsPath%\VersionInsertScript_Or.out 
```

sqlplus %1/%2 < %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnsReportData.sql > %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnsReportData.out sqlplus %1/%2 < %ORACLE_CreateScriptsPath%\Create_GT_GenerateInvoiceTxnReportDataRD.sql > %ORACLE_CreateScriptsPath%\Create_GTnsqlplusGenerateInvoice%1/% < %ORACLE_CreateScriptsPath%\Create_GT_GenerateTXNInvestigationReport.sql > %ORACLE_CreateScriptsPath%\Create_GT_GenerateTXNInvestigationReport.out sqlplus %1/%2 < %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnsReportData.sql > %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnsReportData.out sqlplus %1/%_CreateData\voiceTxLEnScriptsPath%2 <GenerateInvoiceTxnsReportData.out .sql > %ORACLE_CreateScriptsPath%\GenerateInvoiceTxnReportDataRD.out";

```
 var matches = Regex.Matches(input, @"ORACLE_CreateScriptsPath%\\(.*) >");

        // here is your string array.
        var results = matches.Cast<Match>().Select(m => m.Groups[1]);

        // echo results.
        Console.Out.WriteLine(string.Join("\r\n", results)); 
```

# javascript - 如何将“aA1”或“Aa1”或“1aA”与正则表达式匹配？

> ID：12103415
> 
> 赞同：0
> 
> 时间：2012-08-24T05:07:14.240
> 
> 标签：javascript, regex

我有一个文本框，想将模式匹配为 `[a-z]{1}[A-Z]{1}[0-9]{1}`

```
 var x=/^[a-z]{1}[A-Z]{1}[0-9]{1}$/;

    if(!x.test(document.getElementById('name').value))
    {
        alert("enter the correct format");
        return false;
    } 
```

它仅适用于值：`aA1`

如果这些值可以像 aA1, Aa1, 1aA 一样随机输入怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:27:39.023

要以任何顺序匹配一组字符串，您可以使用前瞻。像这样的东西：

`/^(?=.*a)(?=.*b)(?=.*c)[abc]{3}$/.test('cab')`

语法 (?=whatever) 是一个积极的前瞻，这意味着它检查匹配而不推进匹配器的位置。因此，每个组都会在字符串中的任何位置查找您的字符。最后一部分`[abc]{3}`确保字符串中没有其他字符，并且恰好有三个字符。如果倍数没问题，请改用 [abc]+。

有关更详细的参考，请参阅[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:45:48.530

尝试这个

```
/^([a-z]{1}[A-Z]{1}[0-9]{1}|[A-Z]{1}[a-z]{1}[0-9]{1}|[0-9]{1}[a-z]{1}[A-Z]{1})$/ 
```

第一个表达式`[a-z]{1}[A-Z]{1}[0-9]{1}`处理模式：*aA1*

第二个 epression`[A-Z]{1}[a-z]{1}[0-9]{1}`处理模式：*Aa1*

第三个表达式`[0-9]{1}[a-z]{1}[A-Z]{1}`处理模式：*1aA*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:18:48.577

你可以使用怪物表情

```
/$([a-z][A-Z][0-9])|([A-Z][a-z][0-9])|([0-9][a-z][A-Z])|([a-z][0-9][A-Z])|([A-Z][0-9][a-z])|([0-9][A-Z][a-z])^/ 
```

但我不确定这是一个高效或可扩展的解决方案。

# view - Lotus Notes 7 中的网格视图

> ID：12103418
> 
> 赞同：0
> 
> 时间：2012-08-24T05:07:47.543
> 
> 标签：view, grid, lotus-notes

在视图属性中，我设置了 Grid - Dashes and Dots ，颜色为黑色。但网格只是水平的。我想要垂直和水平。

页眉样式为斜面。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:59:48.227

本机 Notes 应用程序无法生成垂直点划线网格来模拟网格。Notes 中的视图是面向记录（或文档）的。视图中的网格设置出现在版本 8+ 中。我测试了点划线，它似乎在那里，如果你增加你的行高，它应该是可见的。点划线似乎是标准的，并且不会随字体大小而变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T13:36:12.370

它取决于视图的第一列，如果未分类，则显示垂直和水平网格。将列更改为分类后，视图仅显示水平网格。

# mysql - mysql分区错误

> ID：12103420
> 
> 赞同：1
> 
> 时间：2012-08-24T05:07:59.333
> 
> 标签：mysql, database, database-partitioning

我需要以以下格式创建表格。但是正在返回分区区域中的错误，即`Error Code: 1659\. Field 'fldassigndate' is of a not allowed type for this type of partitioning`. 如何解决此错误并进行分区？

```
CREATE TABLE tblattendancesetup (
  fldattendanceid int(11) NOT NULL AUTO_INCREMENT,
  flddept varchar(100) DEFAULT NULL,
  fldemployee varchar(100) DEFAULT NULL,
  fldintime varchar(20) DEFAULT NULL,
  fldouttime varchar(20) DEFAULT NULL,
  fldlateafter varchar(20) DEFAULT NULL,
  fldearlybefore varchar(20) DEFAULT NULL,
  fldweekoff varchar(20) DEFAULT NULL,
  fldshiftname varchar(20) DEFAULT NULL,
  fldassigndate varchar(20) DEFAULT NULL,
  fldfromdate varchar(20) DEFAULT NULL,
  fldtodate varchar(20) DEFAULT NULL,
  fldrefid varchar(20) DEFAULT NULL,
  UNIQUE KEY fldattendanceid (fldattendanceid),
  KEY in_attendancesetup (fldemployee,fldintime,fldouttime,fldlateafter,fldearlybefore,fldfromdate,fldtodate,fldattendanceid),
  KEY i_emp_tmp (fldemployee),
  KEY i_emp_attendance (fldemployee)
)
 PARTITION BY RANGE (fldassigndate)
(PARTITION p_Apr VALUES LESS THAN (TO_DAYS('2012-05-01')),
 PARTITION p_May VALUES LESS THAN (TO_DAYS('2012-06-01')),
 PARTITION p_Nov VALUES LESS THAN MAXVALUE ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:28:17.903

从 MySQL 手册（第 18 节）：

> 分区键的数据类型。分区键必须是整数列或解析为整数的表达式。

日期和 varchar 都不能用于分区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T21:06:43.227

虽然这个问题很老，但我认为它会帮助那些搜索，就像我曾经一样。

OP 应该首先通过为日期字段使用正确的结构（如日期时间）来正确设置他的列结构。

完成后，我没有尝试以这种方式设置我的键，但我发现如果我想保持表的结构相同，我需要使用复合主键。在这种情况下，它会

```
PRIMARY KEY(`fldattendanceid`, `fldassigndate`) 
```

然后，在 PARTITION BY RANGE 中指定了一个缺失的 TO_DAYS。最后，我不是 100% 确定，但我认为您不能在空字段上进行分区。即使可以，这样做也是一种糟糕的做法。

```
 CREATE TABLE tblattendancesetup (
    fldattendanceid INT(11) NOT NULL AUTO_INCREMENT,
    flddept VARCHAR(100) DEFAULT NULL,
    fldemployee VARCHAR(100) DEFAULT NULL,
    fldintime DATETIME DEFAULT NULL,
    fldouttime DATETIME DEFAULT NULL,
    fldlateafter DATETIME DEFAULT NULL,
    fldearlybefore DATETIME DEFAULT NULL,
    fldweekoff VARCHAR(20) DEFAULT NULL,
    fldshiftname VARCHAR(20) DEFAULT NULL,
    fldassigndate DATETIME NOT NULL,
    fldfromdate DATETIME DEFAULT NULL,
    fldtodate DATETIME DEFAULT NULL,
    fldrefid VARCHAR(20) DEFAULT NULL,
    PRIMARY KEY(`fldattendanceid`, `fldassigndate`),
    KEY in_attendancesetup     (fldemployee,fldintime,fldouttime,fldlateafter,fldearlybefore,fldfromdate,fldtodate,fldattendanceid),
  KEY i_emp_tmp (fldemployee),
  KEY i_emp_attendance (fldemployee)
)
 PARTITION BY RANGE ( TO_DAYS(fldassigndate))
(PARTITION p_Apr VALUES LESS THAN (TO_DAYS('2012-05-01')),
 PARTITION p_May VALUES LESS THAN (TO_DAYS('2012-06-01')),
 PARTITION p_Nov VALUES LESS THAN MAXVALUE ); 
```

我希望这可以帮助别人！

# html - 如何设置外部小 8 框以调整边框大小？

> ID：12103429
> 
> 赞同：0
> 
> 时间：2012-08-24T05:08:44.223
> 
> 标签：html, css

我做了一个盒子和 8 个边的小盒子来调整大小。只需在主框的边界显示这 8 个小框。请参阅：http: [//jsfiddle.net/kamlesh0606/jrQ7A/1/](http://jsfiddle.net/kamlesh0606/jrQ7A/1/)

但是当我向主框添加边框时，这 8 个小框出现在主框内.. 看到这个：http: [//jsfiddle.net/kamlesh0606/cSvXP/](http://jsfiddle.net/kamlesh0606/cSvXP/)

所以帮我看看 ***如何将这8个小盒子放在带边框的主盒子外面？***

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:42:30.137

很好地实现你想要的我在你的主框（#label1）之外添加了一个 div，它的 id 是#borderbox

**并改变你的CSS如下**

```
#borderbox{
   position: relative; 
    top: 42px; 
    left: 105px; 
    width: 60px; 
    height: 60px; 
    background-color:rgb(165, 165, 165);
    padding:10px;
}

#label1{
    width: 100%; 
    height: 100%; 
    background: none repeat scroll 0px 0px rgb(170, 175, 255);
} 
```

现在你描述你的问题是**你想增加边框宽度** 现在你可以增加它的**填充`#borderbox`**将显示为主框的边框

这是一个工作**[演示](http://jsfiddle.net/uttara/cSvXP/6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:42:40.747

我猜这就是你要找的

[http://jsfiddle.net/kamlesh0606/jrQ7A/1/](http://jsfiddle.net/kamlesh0606/jrQ7A/1/)

```
<div style="position: relative; top: 42px; left: 105px; width: 60px; height: 60px; border: 10px solid rgb(165, 165, 165); background: none repeat scroll 0px 0px rgb(170, 175, 255);" id="label1" class="drag"> 
```

# c++ - 匹配位串

> ID：12103438
> 
> 赞同：7
> 
> 时间：2012-08-24T05:09:51.777
> 
> 标签：c++, string-search

我需要实现一个字符串搜索算法，该算法在位文本中找到位模式（匹配可能不是字节/字对齐的）。首先，我实现了 Boyer-Moore 算法，但比较单个位对我来说太慢了。因此，我尝试实现一个基于阻塞的版本，该版本将比较[本文](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.158.7522&rep=rep1&type=pdf)中描述的整个字节/单词，但它变得复杂且难以管理（部分原因是我不完全理解我在做什么。）

有没有人很好地实现了这种算法？

我的具体用例是将模式长度`N >= 32`、文本窗口`2N`和位打包到`int`s 中。在`N`这种情况下也是 char size 的倍数`N % 8 == 0`。我预处理一次并在更改文本时多次使用，例如 Boyer-Moore。第一场比赛就是我所需要的。性能是关键。

**编辑：**在成功实现 Blocked Boyer-Moore 算法后，我发现没有任何改进（我的一点一点的版本更快！）这可能是我自己的错误，因为我一直在绞尽脑汁优化它没有多行评论就没有意义，但它仍然很慢。[在这里](http://pastebin.com/czGQmv63)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:14:45.700

如果 N 很大（例如，大于 16 位），那么对位模式的 8 个移位副本进行初步搜索将非常容易（截断模式以消除“部分字节”）。然后，您可以通过查看相邻位来优化结果。字节搜索（针对 8 个移位副本）可以使用 Boyer-Moore 或类似有效的算法来完成。

如果您想知道：8 字节搜索可能比一位搜索更快，因为每个字节比较只需要一条指令，而进行位搜索所需的位操作需要更多的指令。但是，您应该始终确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T09:04:40.617

# 概述

我是 SO 社区的新手，但我期待回馈一些东西。

有趣的问题。我整理了一个实现，它只进行基于字节的比较（借助预先计算的位模式和位掩码），而不是在比较时执行昂贵的位操作。因此，它应该相当快。它没有实现为[Boyer-Moore 算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)讨论的任何 Shift 规则（性能优化） ，因此可以进一步改进。

尽管此实现确实取决于 8 位机器上的模式位 % CHAR_BIT == 0 的数量，满足您的标准 N % 8 == 0，但实现将找到非字节对齐的位模式。（它目前还需要 8 位字符（ CHAR_BIT == 8 ），但在不太可能的情况下，您的系统不使用 8 位字符，通过将所有数组/向量从 uint8_t 更改为 char 并调整它们包含的值以反映正确的位数。）

鉴于搜索不进行任何位旋转（除了预先计算的字节掩码），它应该是非常高效的。

# 算法总结

简而言之，指定要搜索的模式，实现将其移动一位并记录移动后的模式。它还计算移位模式的掩码，对于非字节对齐的位模式，比较开始和结束的一些位需要被忽略以确保正确的行为。

对每个移位位置中的所有模式位进行搜索，直到找到匹配项或到达数据缓冲区的末尾。

```
//
//  BitStringMatch.cpp
//

#include "stdafx.h"
#include <iostream>
#include <cstdint>
#include <vector>
#include <memory>
#include <cassert>

int _tmain(int argc, _TCHAR* argv[])
{
    //Enter text and pattern data as appropriate for your application.  This implementation assumes pattern bits % CHAR_BIT == 0
    uint8_t text[] = { 0xcc, 0xcc, 0xcc, 0x5f, 0xe0, 0x1f, 0xe0, 0x0c }; //1010 1010, 1010 1010, 1010 1010, 010*1 1111, 1110 0000, 0001 1111, 1110 0000, 000*0 1010 
    uint8_t pattern[] = { 0xff, 0x00, 0xff, 0x00 }; //Set pattern to 1111 1111, 0000 0000, 1111 1111, 0000 0000

    assert( CHAR_BIT == 8 ); //Sanity check
    assert ( sizeof( text ) >= sizeof( pattern ) ); //Sanity check

    std::vector< std::vector< uint8_t > > shiftedPatterns( CHAR_BIT, std::vector< uint8_t >( sizeof( pattern ) + 1, 0 ) );  //+1 to accomodate bit shifting of CHAR_BIT bits.
    std::vector< std::pair< uint8_t, uint8_t > > compareMasks( CHAR_BIT, std::pair< uint8_t, uint8_t >( 0xff, 0x00 ) );

    //Initialize pattern shifting through all bit positions
    for( size_t i = 0; i < sizeof( pattern ); ++i ) //Start by initializing the unshifted pattern
    {
        shiftedPatterns[ 0 ][ i ] = pattern[ i ];
    }

    for( size_t i = 1; i < CHAR_BIT; ++i )  //Initialize the other patterns, shifting the previous vector pattern to the right by 1 bit position
    {
        compareMasks[ i ].first >>= i;  //Set the bits to consider in the first...
        compareMasks[ i ].second = 0xff << ( CHAR_BIT - i ); //and last bytes of the pattern

        bool underflow = false;
        for( size_t j = 0; j < sizeof( pattern ) + 1; ++j )
        {
            bool thisUnderflow = shiftedPatterns[ i - 1 ][ j ] & 0x01 ? true : false; 
            shiftedPatterns[ i ][ j ] = shiftedPatterns[ i - 1][ j ] >> 1;

            if( underflow ) //Previous byte shifted out a 1; shift in a 1
            {
                shiftedPatterns[ i ][ j ] |= 0x80;  //Set MSb to 1
            }

            underflow = thisUnderflow;
        }
    }

    //Search text for pattern
    size_t maxTextPos = sizeof( text ) - sizeof( pattern );
    size_t byte = 0;
    bool match = false;
    for( size_t byte = 0; byte <= maxTextPos && !match; ++byte )
    {
        for( size_t bit = 0; bit < CHAR_BIT && ( byte < maxTextPos || ( byte == maxTextPos && bit < 1 ) ); ++bit )
        {
            //Compare first byte of pattern
            if( ( shiftedPatterns[ bit ][ 0 ] & compareMasks[ bit ].first ) != ( text[ byte ] & compareMasks[ bit ].first ) )
            {
                continue;
            }

            size_t foo = sizeof( pattern );
            //Compare all middle bytes of pattern
            bool matchInProgress = true;
            for( size_t pos = 1; pos < sizeof( pattern ) && matchInProgress; ++pos )
            {
                matchInProgress = shiftedPatterns[ bit ][ pos ] == text[ byte + pos ];
            }
            if( !matchInProgress )
            {
                continue;
            }

            if( bit != 0 )  //If compare failed or we're comparing the unshifted pattern, there's no need to compare final pattern buffer byte
            {
                if( ( shiftedPatterns[ bit ][ sizeof( pattern ) ] & compareMasks[ bit ].second ) != ( text[ byte + sizeof( pattern ) ] & compareMasks[ bit ].second ) )
                {
                    continue;
                };
            }

            //We found a match!
            match = true;   //Abandon search
            std::cout << "Match found!  Pattern begins at byte index " << byte << ", bit position " << CHAR_BIT - bit - 1 << ".\n";
            break;
        }
    }
    //If no match
    if( !match )
    {
        std::cout << "No match found.\n";
    }

    std::cout << "\nPress a key to exit...";
    std::getchar();

    return 0;
} 
```

我希望这是有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:13:43.710

性能将高度依赖于位模式的类型。例如，如果“key”位序列和“search”位序列有很大不同，那么一些字节移位解决方案，甚至你的逐位解决方案将会非常快。因为在绝大多数位偏移处，第一个比较将失败，您可以继续进行下一个比较。

如果序列高度相似，那么您需要更复杂的算法。想象一下，例如 100 万位都是 10101010101010 ......除了中间的某个地方，一个 1 被翻转为零，例如 ...101000101 ......并且您正在寻找一个以 " 结尾的 10k 位序列...101000" 那么字节移位比较算法将表现不佳，因为它们必须比较大量字节 - 8 次 - 在匹配失败 50 万次之前。

因此，您的数据的统计特征在这里很重要。此外，如果密钥字符串被多次使用，或者您希望有多个匹配项，那么对缓冲区进行预处理可以加快速度。

例如，您可以对缓冲区进行一次转换，以将每对字节和每个字节中的位数相加，然后对每个键字符串执行此操作。然后您可以扫描这两个缓冲区。对于可能匹配的字符串，密钥字符串的每个字节中的位数必须始终小于每个字节对中的位数，并且密钥字符串的每个字节对中的位数必须始终小于搜索字符串的每个字节中的位数。

如果您的密钥字符串很大，那么您可以标记低位和高位“锚”并扫描它们。例如，假设我正在比较一个 10k 密钥字符串，该字符串在偏移量 x、y、z 处有两个 0 字节。然后我可以扫描我的搜索字符串以查找那些偏移量处单个字节中的位数与零匹配的位置。那会非常快。

# matlab - 当输入数量变化且已使用符号时如何使用函数句柄

> ID：12103439
> 
> 赞同：1
> 
> 时间：2012-08-24T05:10:27.627
> 
> 标签：matlab

非常感谢您提供的任何帮助...

我正在使用 Matlab 编写一般案例场景，因此函数的输入数量会有所不同。输入采用输入矩阵中元素数量的形式。

（我在下面提供了一个简单的玩具示例，以使我的问题更清楚）：

```
%# The code generates as many symbolic variables as necessary...

P1 = sym('P1')
P2 = sym('P2')
.
.
.
PN = sym('Pn')

%# I create a symbolic function of all the variables...

this  = (P1^2+P2^3+...+Pn^2)

%# I convert the symbolic function into a function...

that = matlabFunction(this)

%# Now I want to provide values for use in the calculation 
%# (I have a list of starting values for each P1...Pn)

other = that(???) --> 

%# ***Want to provide list of inputs that has as many values as the number 
%# of symbolic values I have created (which varies according to each case)**** 
```

我查看了其他问题，但也许我没有使用正确的搜索词。当我使用句柄时，是否有一种优雅的方式来提供可变数量的输入`that`？

非常感谢你的帮助。我是菜鸟，感激不尽！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:39:48.987

不要使用按升序命名的变量，而是使用[元胞数组](http://www.mathworks.de/help/techdoc/matlab_prog/br04bw6-98.html)：

```
P = { sym('P1'), sym('P2'), ..., sym('Pn') } 
```

然后，您可以使用元胞数组解包将元胞数组中的项目作为参数列表传递：

```
that = matlabFunction(P{:}) 
```

`P(:)`注意和之间的区别`P{:}`（参见[文档](http://www.mathworks.de/help/techdoc/matlab_prog/br04bw6-117.html)）。

# php - 自动记录 PHP 中的所有错误、警告和通知

> ID：12103442
> 
> 赞同：1
> 
> 时间：2012-08-24T05:10:45.070
> 
> 标签：php, error-handling

我正在寻找一种使用一行代码自动记录所有错误的方法。如果您了解 Asp.NET，您可能知道我的意思是喜欢使用`Application_Error`事件处理程序。

我检查了[PHP 日志框架？](https://stackoverflow.com/questions/341154/php-logging-framework)SO中的问题，但它们看起来都一样，您应该手动记录每条日志消息，这意味着我需要在我想记录的任何地方调用日志函数。

我正在寻找的不是这样的（由 KLogger 使用）

```
require_once 'KLogger.php';
...
$log = new KLogger ( "log.txt" , KLogger::DEBUG );

// Do database work that throws an exception
$log-&gt;LogError("An exception was thrown in ThisFunction()");

// Print out some information
$log-&gt;LogInfo("Internal Query Time: $time_ms milliseconds");

// Print out the value of some variables
$log-&gt;LogDebug("User Count: $User_Count"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T05:15:37.623

您可以在 PHP 中创建自己的自定义错误处理函数并将其设置为错误处理程序

就像是：

```
function handle_error($error_level,$error_message)
{
    /*
    here do what you want...typically log it into db/file/send out 
    emails based on error level etc..
    */
} 
```

并将此函数设置为 PHP 的默认错误处理程序，添加以下行：

```
set_error_handler("handle_error"); 
```

现在所有错误都将由 PHP 根据里面写的内容来处理`handle_error`

# windows-7 - Windows 7 用户注销脚本 - 重启后密钥被删除

> ID：12103443
> 
> 赞同：-2
> 
> 时间：2012-08-24T05:10:54.723
> 
> 标签：windows-7, windows-scripting, group-policy

我正在尝试通过在 HKCU\Software\Microsoft\Windows\CyrrentVersion\GroupPolicy\Scripts\Logoff 下添加注册表项来创建用户注销脚本。

安装我构建的 msi 后，注册表项设置正确。安装结束后，系统正在重新启动，我看到密钥已被删除。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:13:20.343

该密钥归组策略所有。您在那里更改的任何内容都将在下次刷新时通过组策略进行更改。您不应该手动或通过您的程序将任何内容存储在组策略中的注册表中。如果您添加密钥 VIA 组策略，它将保留。

# c++ - 在字符串中使用 \ 作为文字而不是转义

> ID：12103445
> 
> 赞同：11
> 
> 时间：2012-08-24T05:11:26.613
> 
> 标签：c++, xcode, string-literals

```
bool stringMatch(const char *expr, const char *str) {   
    // do something to compare *(expr+i) == '\\'  
    // In this case it is comparing against a backslash
    // i is some integer
}

int main() {
    string a = "a\sb";
    string b = "a b";
    cout << stringMatch(a.c_str(), b.c_str()) << endl;
    return 1;
} 
```

所以现在的问题是：Xcode 没有读取'\'，当我在 stringMatch 函数中调试时，expr 似乎只是'asb'而不是文字 a\sb'。

Xcode 在该行发出警告： string a = "a\sb" : Unknown escape sequence

编辑：我已经尝试过使用“a\\sb”，它读作“a\\sb”作为文字。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-24T05:19:21.113

```
bool stringMatch(const char *expr, const char *str) {   
   // do something to compare *(expr+i) == '\\'  
   // In this case it is comparing against a backslash
   // i is some integer
}

int main() {
    string a = "a\\sb";
    string b = "a b";
    cout << stringMatch(a.c_str(), b.c_str()) << endl;
    return 1;
} 
```

默认情况下，C 和 C++ 将反斜杠作为转义序列处理。您必须通过在字符串中添加一个额外的反斜杠来告诉 C 不要使用您的反斜杠作为转义序列。

这些是常见的转义序列：

*   \a - 铃声（哔）
*   \b - 退格
*   \f - 换页
*   \n - 换行
*   \r - 回车
*   \t - 水平制表符
*   \\ - 反斜杠
*   \' - 单引号
*   \" - 双引号
*   \ooo - 八进制表示
*   \xdd - 十六进制表示

**编辑：** Xcode 在您的机器上表现异常。所以我可以建议你这个。

```
bool stringMatch(const char *expr, const char *str) {   
   // do something to compare *(expr+i) == '\\'  
   // In this case it is comparing against a backslash
   // i is some integer
}

int main() {
    string a = "a" "\x5C" "sb";
    string b = "a b";
    cout << stringMatch(a.c_str(), b.c_str()) << endl;
    return 1;
} 
```

不用担心`string a`声明中的空格，Xcode 会连接用空格分隔的字符串。

**编辑 2：**确实 Xcode 正在阅读您的`"a\\b"`字面意思，这就是它处理转义反斜杠的方式。当您输出`string a = "a\\sb"`到控制台时，您会看到`a\sb`. 但是，当您将`string a`方法之间作为参数或私有成员传递时，它会从字面上使用额外的反斜杠。您必须考虑这个事实来设计您的代码，以便它忽略额外的反斜杠。如何处理字符串取决于您。

**编辑 3：** `Edit 1`这是您的最佳答案，但这是另一个。

在您的方法中添加代码以`stringMatch()`用单反斜杠替换双反斜杠。

你只需要在函数的最开始添加这个额外的行：

```
expr=[expr stringByReplacingOccurrencesOfString:@"\\\\" withString:@"\\"]; 
```

这应该解决双反斜杠问题。

**编辑 4：** 有些人认为**编辑 3**是 ObjectiveC，因此不是最佳的，所以 ObjectiveC++ 中的另一个选项。

```
void searchAndReplace(std::string& value, std::string const& search,std::string const& replace)
{
    std::string::size_type  next;

    for(next = value.find(search);        // Try and find the first match
        next != std::string::npos;        // next is npos if nothing was found
        next = value.find(search,next)    // search for the next match starting after
                                          // the last match that was found.
       )
    {
        // Inside the loop. So we found a match.
        value.replace(next,search.length(),replace);   // Do the replacement.
        next += replace.length();                      // Move to just after the replace
                                                       // This is the point were we start
                                                       // the next search from. 
    }
} 
```

**编辑 5：**如果您将`const char *`in更改`stringMatch()`为“字符串”，它对您来说将不那么复杂。

```
expr.replace(/*size_t*/ pos1, /*size_t*/ n1, /*const string&*/ str ); 
```

**编辑 6：**从 C++11 开始，存在类似[`raw string literals`](https://en.cppreference.com/w/cpp/language/string_literal). 这意味着您不必逃避，相反，您可以编写以下内容：

```
string a = R"raw(a\sb)raw"; 
```

请注意，`raw`字符串中的 可以替换为您选择的任何分隔符。这适用于您想要使用`)raw`实际字符串中的子字符串的情况。当您必须大量转义字符时，使用这些原始字符串文字主要是有意义的，例如与`std::regex`.

**PS你现在有了所有的答案，所以由你来决定你实施哪一个能给你带来最好的结果。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T05:14:06.893

Xcode 吐出该警告，因为它`\s`在 "a\sb" 中解释为转义序列，但`\s`不是有效的转义序列。它被替换`s`为字符串变为“asb”。

像这样转义反斜杠`"a\\sb"`是正确的解决方案。如果这对您不起作用，请发布更多详细信息。

这是一个例子。

```
#include <iostream>
#include <string>

int main() {
    std::string a = "a\\sb";
    std::cout << a.size() << ' ' << a << '\n';
} 
```

该程序的输出如下所示：

![4 a\sb](../Images/04e26cdf800519848201a4f5873a63b3.png)

如果您得到不同的输出，请发布。还请准确发布您之前尝试“a\\sb”时观察到的问题。

* * *

正则表达式在 C++ 中可能很痛苦，因为必须以这种方式转义反斜杠。C++11 的原始字符串不允许任何类型的转义，因此不需要转义反斜杠：`R"(a\sb)"`.

# eclipse - 将 web 服务 war 文件部署到 websphere

> ID：12103447
> 
> 赞同：0
> 
> 时间：2012-08-24T05:11:32.870
> 
> 标签：eclipse, web-services, tomcat, websphere

我正在尝试将 Web 服务战争文件部署到 websphere。

我已经使用 Tomcat 在 Eclipse 中测试了 Web 服务并且它工作正常。但是，一旦我将 war 文件部署到 Websphere，服务（在 tomcat 中输出）就不会显示。在部署到 websphere 时，我检查了 SELECT INSTALLATION OPTIONS 下的 DEPLOY WEB SERVICES。

当我从 Eclipse 创建战争文件时，我右键单击应用程序并单击导出文件，选择战争文件，然后就可以了。

在创建战争文件时我错过了什么吗？或者，在部署中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T13:16:40.580

也许为时已晚？...请参阅[此案例](http://mahichir.wordpress.com/2012/04/12/java-ws-webservices-ibm-websphere-and-eclipse/)以获得合理的解释。

# c# - 正则表达式匹配双引号外的左单引号

> ID：12103448
> 
> 赞同：-2
> 
> 时间：2012-08-24T05:11:33.260
> 
> 标签：c#, .net, regex, lookbehind

笔记 ：

左双引号 (") = &ldquo

右双引号 (") = &rdquo

左单引号 (') = &lsquo

我目前的正则表达式是这个

```
(?<!.*&ldquo.*)&lsquo 
```

它与这里的 &lsquo 匹配（这是正确的）：

```
&ldquoThis is a sample&rdquo &lsquosample text 
```

它还与此处的 &lsquo 匹配（我不想发生这种情况，因为单引号在左右双引号内）：

```
&ldquoThis &lsquois a sample&rdquo 
```

如何编写一个正则表达式来匹配不在左右引号内的每个 &lsquo

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:26:10.690

如果我理解你的问题..这可能是你想要的

```
(?<!&ldquo.*?)&lsquo(?!&rdquo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:41:13.440

这是我正在查看的正确正则表达式：

```
(?<!.*&ldquo;)&lsquo;(?!.*&rdquo;) 
```

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:53:04.617

使用 ASCII 转义序列告诉正则表达式您指的是哪些字符。

*   `\x93`——指“
*   `\x94`——指“

所以你需要的正则表达式是：`[\x93]*[^x94]`

或者，如果您知道您的字符串由哪些字符组成，那么：`[A-Za-z0-9\x93]*[^x94]`等等。根据需要添加更多字符。

# android - ICS Force 停止应用程序说超出范围但有时运行得很好

> ID：12103450
> 
> 赞同：0
> 
> 时间：2012-08-24T05:11:46.420
> 
> 标签：android

我在我的应用程序中遇到了一些问题，有时它可以工作并显示我需要的所有数据，但有时它只是强制关闭我的应用程序，并在电话日志中显示出越界异常。顺便说一句，它在我的模拟器中工作得很好。不知道该怎么办了，所以在那里寻求帮助。这是我的电话记录。添加它只发生在 ICS 中，而不是 Gingerbread。

```
V/data content(11074): Data1
V/data id  (11074): 0
V/data name(11074): Data Name
V/data time(11074): Aug 25, 2012 10:00 PM
D/AndroidRuntime(11074): Shutting down VM
W/dalvikvm(11074): threadid=1: thread exiting with uncaught exception (group=0x40c531f8)
E/AndroidRuntime(11074): FATAL EXCEPTION: main
E/AndroidRuntime(11074): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
E/AndroidRuntime(11074):        at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
E/AndroidRuntime(11074):        at java.util.ArrayList.get(ArrayList.java:304)
E/AndroidRuntime(11074):        at com.android.guestlist.DataActivity.showMyRsvp(RsvpActivity.java:167)
E/AndroidRuntime(11074):        at com.android.guestlist.DataActivity$AsyncGetRsvp.onPostExecute(DataActivity.java:92)
E/AndroidRuntime(11074):        at com.android.guestlist.DataActivity$AsyncGetRsvp.onPostExecute(DataActivity.java:1)
E/AndroidRuntime(11074):        at android.os.AsyncTask.finish(AsyncTask.java:602)
E/AndroidRuntime(11074):        at android.os.AsyncTask.access$600(AsyncTask.java:156)
E/AndroidRuntime(11074):        at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
E/AndroidRuntime(11074):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(11074):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(11074):        at android.app.ActivityThread.main(ActivityThread.java:4517)
E/AndroidRuntime(11074):        at java.lang.reflect.Method.invokeNative(NativeMethod)
E/AndroidRuntime(11074):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(11074):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
E/AndroidRuntime(11074):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
E/AndroidRuntime(11074):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager( 2089):   Force finishing activity com.android.guestlist/.CustomTabActivity
E/android.os.Debug( 2089): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error 
```

这是我的活动代码：

```
 public class RsvpActivity extends Activity {

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb=null;

    String fb_id = "";
    String first_name = "";
    String last_name = "";
    String gender = "";

    public static List<String> eId3 = new ArrayList<String>();
    public static List<String> eBar3 = new ArrayList<String>();
    public static List<String> eName3 = new ArrayList<String>();
    public static List<String> eTime3 = new ArrayList<String>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        fb_id =  getIntent().getStringExtra("fb_id");
        first_name =  getIntent().getStringExtra("first_name");
        last_name =  getIntent().getStringExtra("last_name");
        gender =  getIntent().getStringExtra("gender");

        setContentView(R.layout.rsvp);
    }

    protected void onStart(){
        super.onStart();
        new AsyncGetRsvp().execute(fb_id, "MY URL HERE");
    }

    protected void onResume(){
        super.onResume();
        new AsyncGetRsvp().execute(fb_id, "MY URL HERE");
    }

    public class AsyncGetRsvp extends AsyncTask<String, Void, List<String>>{
        private final ProgressDialog dialog = new ProgressDialog(RsvpActivity.this);

        @Override
        protected List<String> doInBackground(String... params) {
            getRsvp(params[0], params[1]);
            return null;
        }

        @Override
        protected void onPreExecute() {
             this.dialog.setMessage("Getting RSVPs");
             this.dialog.show();
        }

        @Override
        protected void onPostExecute(List<String> result) {
            showMyRsvp();
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
             }
        }

    }

    public void showMyRsvp(){
        // Get the TableLayout
        final TableLayout tl = (TableLayout) findViewById(R.id.maintable2);
        tl.removeAllViewsInLayout();

        // Go through each item in the array
        for (int current = 0; current < eId3.size(); current++)
        {
            Log.v("bar content",eBar3.get(current));
            Log.v("bar id",eId3.get(current));
            Log.v("bar name",eName3.get(current));
            Log.v("bar time",eTime3.get(current));

            // Create a TableRow and give it an ID
            TableRow tr = new TableRow(this);
            tr.setId(100+current);
            tr.setLayoutParams(new LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));   

            // Create a TextView to house the name of the province
            final TextView clubName = new TextView(this);
            clubName.setId(200+current);
            clubName.setText(eBar3.get(current));
            clubName.setTextColor(Color.WHITE);
            clubName.setTextSize(12);
            clubName.setTypeface(null, Typeface.BOLD);
            clubName.setTag(eId3.get(current));
            clubName.setGravity(Gravity.CENTER_VERTICAL);
            clubName.setLayoutParams(new LayoutParams(
                    (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 65, getResources().getDisplayMetrics()),
                    LayoutParams.WRAP_CONTENT));
            tr.addView(clubName);

            //CREATE TEXT VIEW FOR EVENT NAME
            TextView eventName = new TextView(this);
            eventName.setId(current);
            eventName.setText(eName3.get(current));
            eventName.setGravity(Gravity.CENTER_VERTICAL);
            eventName.setTextSize(12);
            eventName.setTextColor(Color.WHITE);
            eventName.setLayoutParams(new LayoutParams(
                    (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 120, getResources().getDisplayMetrics()),
                    LayoutParams.WRAP_CONTENT));
            tr.addView(eventName);

          //CREATE TEXT VIEW FOR EVENT TIME
            TextView eventDate = new TextView(this);
            eventDate.setId(current);
            eventDate.setText(eTime3.get(current));
            eventDate.setGravity(Gravity.CENTER_VERTICAL);
            eventDate.setTextSize(12);
            eventDate.setTextColor(Color.WHITE);
            eventDate.setLayoutParams(new LayoutParams(
                    (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 80, getResources().getDisplayMetrics()),
                    LayoutParams.WRAP_CONTENT));
            tr.addView(eventDate);

            // Add the TableRow to the TableLayout
            tl.addView(tr, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            final Intent i = new Intent(RsvpActivity.this, DetailsActivity.class);
            i.putExtra("bar_id",eId3.get(current));
            i.putExtra("fb_id", fb_id);
            i.putExtra("first_name",first_name);
            i.putExtra("last_name",last_name);
            i.putExtra("gender",gender);

            tr.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                     // eId3.get(current)
                    startActivity(i);
                }
            });

        }

    }

    public void getRsvp(String fb_id, String url){
        String result = "";

        eId3.clear();
        eBar3.clear();
        eName3.clear();
        eTime3.clear();

        //the year data to send
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("fb_id",fb_id));

           //http post
             try{
                     HttpClient httpclient = new DefaultHttpClient();
                     HttpPost httppost = new HttpPost(url);
                     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                     HttpResponse response = httpclient.execute(httppost);
                     HttpEntity entity = response.getEntity();
                     is = entity.getContent();
             }catch(Exception e){
                 Log.e("connection","error in http client");
             }

           //convert response to string
             try{
                     BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                     sb = new StringBuilder();
                     String line = "0";

                     while ((line = reader.readLine()) != null) {
                             sb.append(line + "\n");
                     }
                     is.close();
                     result=sb.toString(); 
             }catch(Exception e){
                     Log.e("log_tag", "Error converting result "+e.toString());
             }

             try{
                     JSONArray jArray = new JSONArray(result);
                     JSONObject json_data=null;

                     for(int i=0;i<jArray.length();i++){
                             json_data = jArray.getJSONObject(i);
                             eId3.add(json_data.getString("event_id"));
                             eBar3.add(json_data.getString("bar_name"));
                             eName3.add(json_data.getString("event_name"));
                             eTime3.add(json_data.getString("date"));
                     }
                 }catch(JSONException e){
                     eId3.add("0");
                     eBar3.add("No Data");
                     eName3.add("No Data");
                     eTime3.add("No Data");
                         Log.e("log_tag", "Error parsing data "+e.toString());
                 }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:21:29.470

问题是你开始两个`AsyncTask`做（我认为）同样的事情，一个在`onStart`回调中，一个在`onResume`回调中。因此，您最终将使用相同的列表完成两个任务。这很可能是您的一个列表大小为 的原因`0`，一个任务可能只是清除了列表，而第二个任务尝试访问该空列表。

# java - 如何从jni中的类中检索char数组

> ID：12103454
> 
> 赞同：0
> 
> 时间：2012-08-24T05:12:37.357
> 
> 标签：java, android, java-native-interface, char, jnienv

我将类的对象从 java 传递到`JNI`. 我已经使用`GetObjectClass`.

```
Jclass = (*env)->GetObjectClass(env,Jobj); 
```

我可以通过使用获取类中整数的值

```
fid = (*env)->GetFieldID(env,Jclass, "JValue", "I");
Value = (*env)->GetIntField(env, Jobj, fid); 
```

我可以使用and获得`String`价值。`GetObjectField``GetStringUTFChars`

我如何`Char Array`在`Java`课堂上获得礼物`JNI`？

# ios - iOS：是否可以使表格视图标题部分宽度大于表格视图宽度本身？

> ID：12103455
> 
> 赞同：0
> 
> 时间：2012-08-24T05:12:46.207
> 
> 标签：ios, uitableview

有没有办法让表格视图标题部分具有比实际表格更大的宽度？这是一张简单的图片，说明了我的意思：

![在此处输入图像描述](../Images/39e563407fc78a287b0e4c1f018d5ef4.png)

基本上，我需要使标题部分超出小表格视图。

甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:53:10.690

对我有用的是继承 UITableCell 并覆盖 setFrame 方法。

# git - Git：我需要添加位于 repo 根目录之上的文件

> ID：12103456
> 
> 赞同：2
> 
> 时间：2012-08-24T05:12:50.997
> 
> 标签：git

我有一个不幸的情况。我在 Windows 7 上使用 Git 1.7.9。我有一个位于`foo\bar`. 一切都很好。但是，我刚刚意识到该项目需要位于`foo`. 将它们添加到 repo 而不会弄乱一切的最佳方法是什么？（我是 git 新手。我正在使用 Github for Windows 客户端，值得一试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:23:13.110

[Abhishek Anand](https://stackoverflow.com/a/3247756/1204143)的巧妙回答：

将 .git 目录（和任何其他支持文件，如 .gitignore）移动到父目录。然后，从父目录中，添加旧的存储库根目录；git 检测到重命名并正确处理它。所以，在你的例子中，

```
foo\bar> move .git ..
foo\bar> cd ..
foo> git add bar
foo> git commit -a
foo> git add .
foo> git commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:22:57.790

随心所欲地改变它...... git很聪明！它会自动为您找出文件重命名。每个文件 blob 存储一次，因此您不会膨胀版本历史记录。

我想知道将“.git”文件夹复制一个级别是否可行？

# internet-explorer - IE中的不同颜色背景？

> ID：12103458
> 
> 赞同：1
> 
> 时间：2012-08-24T05:13:09.387
> 
> 标签：internet-explorer, background, png

[http://goo.gl/PMvYn](http://goo.gl/PMvYn) 通过从 LI 项目继承颜色，幻灯片图像似乎仅在 IE 8 及更低版本中呈现灰色背景。知道为什么会这样吗？

这是一张并排比较 Chrome 和 IE 的图片。 [http://img32.imageshack.us/img32/200/screenshot20120823at554.png](http://img32.imageshack.us/img32/200/screenshot20120823at554.png)

# java - Android 和 ArrayLIst Size 返回 0

> ID：12103460
> 
> 赞同：0
> 
> 时间：2012-08-24T05:13:14.443
> 
> 标签：java, android, arraylist

我在这里遇到了奇怪的问题。当用户单击视图时，我添加到数组列表中。我得到了位置并将其添加到坐标的 ArrayList 中。然后我在画布上画一个圆圈，坐标表示要这样做。onDraw 中的 Size 检查总是返回 0。

```
private static ArrayList<Coordinate> coords = new ArrayList<Coordinate>(); 
```

触摸事件

```
...
case MotionEvent.ACTION_POINTER_UP: {
    mLastTouchX = event.getX();
    mLastTouchY = event.getY();
    this.coords.add(new Coordinate(mLastTouchX, mLastTouchY));
    break;
... 
```

OnDraw

```
protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);
    for(int i = 0; i < this.coords.size(); i++) {
        canvas.drawCircle(coords.get(i).x, coords.get(i).y, 30.0f, mPaint);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:20:40.220

您期望如何获得静态字段`this`？但假设这只是一些错字，请尝试添加一些日志记录：

```
case MotionEvent.ACTION_POINTER_UP: {
    mLastTouchX = event.getX();
    mLastTouchY = event.getY();
    this.coords.add(new Coordinate(mLastTouchX, mLastTouchY));
    System.out.println("Added a coordinate; new size: " + coords.size());//to see if we are adding it
    break; 
```

在你的 onDraw 中：

```
System.out.println(coords);//Just to see what all is in it
for(int i = 0; i < this.coords.size(); i++) {
    canvas.drawCircle(coords.get(i).x, coords.get(i).y, 30.0f, mPaint);
} 
```

# iphone - AdMob 横向广告

> ID：12103466
> 
> 赞同：2
> 
> 时间：2012-08-24T05:14:38.383
> 
> 标签：iphone, admob, landscape-portrait

我的应用在横向和纵向两种模式下都有 AdMob。当我的应用在横向模式下启动时，它会提供

在调用 loadRequest 之前必须设置 GADBannerView 的 rootViewController 属性：

并且广告不会出现在任何模式下

当应用程序以纵向模式启动并在旋转横向模式下出现广告时，它工作正常。

# sql - 使用 RowNumber 从数据库中获取特定数量的行；结果不一致

> ID：12103467
> 
> 赞同：1
> 
> 时间：2012-08-24T05:14:39.373
> 
> 标签：sql, sybase

这是我的 SQL 查询：

```
select * from TABLE T where ROWNUM<=100 
```

如果我执行这个然后重新执行这个，我不会得到相同的结果。为什么？

另外，在 sybase 系统上，如果我执行

```
set rowcount 100
select * from TABLE 
```

即使重新执行，我也会得到相同的结果？

有人可以解释为什么吗？并为 RowNum 提供可能的解决方案

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:18:48.883

如果您不在`ORDER BY`查询中使用，您将按*自然顺序*获得结果。

自然顺序是目前数据库最快的。

一个可能的解决方案是`ORDER BY`你的主键，如果它是`INT`

```
SELECT TOP 100 START AT 0 * FROM TABLE
ORDER BY TABLE.ID; 
```

如果您的主键不是按顺序递增的整数，并且您没有要排序的另一列（例如 a `timestamp`），您可能需要创建一个额外的列`SORT_ORDER INT`并在插入时使用 Autoincrement 列或序列和插入触发器，取决于数据库。

确保在该列上创建索引以加快查询速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:17:27.260

您需要指定一个`ORDER BY`. 没有显式子句的查询`ORDER BY`不能保证返回行的顺序。并从这个结果集中取前 100 行。由于每次行的顺序都可以不同，所以前 100 行也可以是不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T09:59:28.453

您需要先使用 ORDER BY，然后再使用 ROWNUM。如果您不遵循此顺序，您将得到不一致的结果。

```
select * from
(
   select * from TABLE T ORDER BY rowid
) where ROWNUM<=100 
```

# jquery - ajax 调用的返回值不正确

> ID：12103474
> 
> 赞同：0
> 
> 时间：2012-08-24T05:15:00.853
> 
> 标签：jquery, ajax

下面的`ajax`调用片段从服务器返回 'found' 或 'no' 作为 a `string`。第一行`callback` `alert(d)`显示返回的结果。但是，该行`if (d == "found")`永远不会为真，即使返回 'found' 也是如此。请问我错过了什么？谢谢您的帮助。

```
$.get('includes/reg_fns.php', {
    'op': 'availability',
    'field': $(this).attr('name'),
    'val': val
}, function(d) {
    alert(d);
    if (d == "found") {
        alert("<br /><span style='font-size:83%;color:red; margin-left:117px'>&nbsp;[ <b>*</b> " + val + " is already taken.</span><br />");
    } else {
        alert('false here');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:17:18.553

可能是你带着额外的空间回来了。

尝试在其上使用 trim()。

```
if( d.trim()=='found') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:17:51.987

尝试

```
($.trim(d) == "found") 
```

代替

```
if (d == "found") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:21:19.070

您不能使用简单的 d。你必须使用 dd 试试这个

```
alert(d.d);
    if (d.d == "found") {
        alert("<br /><span style='font-size:83%;color:red; margin-left:117px'>&nbsp;[ <b>*</b> " + val + " is already taken.</span><br />");
    } else {
        alert('false here');
    } 
```

# iphone - 适用于 iOS 注销按钮图像的 Facebook SDK 3.0

> ID：12103476
> 
> 赞同：0
> 
> 时间：2012-08-24T05:15:10.857
> 
> 标签：iphone, ios, facebook, sdk, logout

我已经为 iOS 安装了[Facebook SDK 3.0](https://developers.facebook.com/ios/)，我需要实现注销流程。

带有注销按钮图像的资源包在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:22:53.387

如果你有 FBConnect.bundle 文件，那么你可以看到他们的 fb 的图像内容。只需右键单击 FBConnect.bundle 并单击显示包内容，它会显示该包中的所有数据，您可以在其中获得可在代码中使用的“LogoutNormal.png”、“LogoutPressed.png”

# php - 如何使用 php 抓取网站

> ID：12103481
> 
> 赞同：0
> 
> 时间：2012-08-24T05:16:04.950
> 
> 标签：php, web-scraping

我正在使用以下代码获取网站的内容

```
function get_content($url){
    $content = @file_get_contents($url);
    if( empty($content) ){
      $content = get_url_contents($url);
    }
    return $content;
}

function get_url_contents($url){
    $crl = curl_init();
    $timeout = 90;
    curl_setopt ($crl, CURLOPT_URL,$url);
    curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
    $ret = curl_exec($crl);
    curl_close($crl);
    return $ret;
}

$url = "http://www.site.com";
$html = get_content($url);
echo $html; 
```

一切都很好，但我需要获取例如我所有的 div 元素或页面的标题或我的所有图像。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T05:18:27.493

使用 HTML 解析库。虽然其中有很多，但我个人使用过[SimpleHTMLDom](http://simplehtmldom.sourceforge.net/)并且有很好的体验。它使用 JQuery 样式选择器，使其易于学习。

一些代码示例：

获取页面标题：

```
$html = str_get_html($html);
$title = $html->find('title',0);
echo $title->plaintext; 
```

对于所有 div 元素：

```
$html = str_get_html($html);
$divs = $html->find('div');

foreach($divs as $div) {
   // do something;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:23:24.933

您可以使用[DOMDocument](http://php.net/domdocument)

例如：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$divs = $dom->getElementsByTagName('div');
foreach ($divs as $div) {
    echo $div->nodeValue. PHP_EOL;
} 
```

# java - CustomListview 中的 NullPointer 原因

> ID：12103483
> 
> 赞同：0
> 
> 时间：2012-08-24T05:16:13.297
> 
> 标签：java, android

我正在开发一个应用程序，我在其中`CustomListview`使用一个图标、raitingbar、复选框来实现。现在一切正常，但是当我插入一个按钮时，它让我出现 nullpointer 错误。我知道 nullpointer 错误会导致在未初始化控件的情况下......但到目前为止我已经尝试过，但不明白这里有什么问题。 ...

我采取了一个 viewHold 来声明所有 Row 项目..

```
package com.AppFavorits;

import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.RatingBar;
import android.widget.TextView;

class ViewHolder {

    public ImageView imgvFavrowiconappicon;
    public TextView txvxFavrowiconappname;
    public RatingBar ratingBar1;
    public CheckBox chkbxFavrowsel;
    public Button btnFavrowOpen;

  ViewHolder(View base) {
    this.ratingBar1=(RatingBar)base.findViewById(R.id.ratingBar1);
    this.ratingBar1.setFocusable(false);
    this.txvxFavrowiconappname=(TextView)base.findViewById(R.id.txvxFavrowiconappname);
    this.imgvFavrowiconappicon=(ImageView)base.findViewById(R.id.imgvFavrowiconappicon);
    this.chkbxFavrowsel = (CheckBox)base.findViewById(R.id.chkbxFavrowsel);
    this.btnFavrowOpen= (Button)base.findViewWithTag(R.id.btnFavrowOpen); 
    this.chkbxFavrowsel.setFocusable(false);

  }
} 
```

**自定义适配器**

```
class RatingAdapter extends ArrayAdapter<RowModel> implements OnClickListener {
        private ArrayList<Model> mlist;
        boolean[] checkBoxState;

        RatingAdapter(ArrayList<RowModel> list, ArrayList<Model> mlist) {
            super(Favorites.this, R.layout.rowfavorites,
                    R.id.txvxFavrowiconappname, list);
            checkBoxState = new boolean[list.size()];
            this.mlist = mlist;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View row = super.getView(position, convertView, parent);

            holder = (ViewHolder) row.getTag();
            if (convertView == null) {
                holder = new ViewHolder(row);
                row.setTag(holder);

            } else {
                row = convertView;
                ((ViewHolder) row.getTag()).chkbxFavrowsel.setTag(mlist
                        .get(position));
            }

            RatingBar.OnRatingBarChangeListener l = new RatingBar.OnRatingBarChangeListener() {
                public void onRatingChanged(RatingBar ratingBar, float rating,
                        boolean fromTouch) {
                    Integer myPosition = (Integer) ratingBar.getTag();
                    RowModel model = getModel(myPosition);
                    model.rating = rating;
                    flFavRate[position] = rating;
                    // stored listitem rating in array
                    datasource.open();
                    datasource.UpdateRating(String.valueOf(rating), String.valueOf(position+1));
                    datasource.close();

                }
            };
            holder.ratingBar1.setOnRatingBarChangeListener(l);

             holder.chkbxFavrowsel
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model element = (Model) holder.chkbxFavrowsel
                                    .getTag();
                            element.setSelected(buttonView.isChecked());
                            bSelected[position] = isChecked;
                            element.setsizeInc(sizeincrement);
                            // if (holder.chkbxFavrowsel.isChecked() ==
                            // isChecked) {
                            boolean bAlreadyfav = false;
                            String prefixlink = "https://play.google.com/store/apps/details?id=";
                            ShrdDatasource.open();
                            ArrayList<Comment> alDSPackagenm = ShrdDatasource.getAllPackage();
                            ArrayList<Comment> alDSRating = ShrdDatasource.getAllRating();
                            ArrayList<Comment> alDSID = ShrdDatasource.getID();
                            Log.i(TAG, "First Package cmp"+  alDSPackagenm);
                            ShrdDatasource.close();
                            int i = 0 ;
                            if (alDSPackagenm != null) {
                                for (i = 0; i < alDSPackagenm.size(); i++) {
                                    if(alDSPackagenm.get(i).toString().equalsIgnoreCase(prefixlink + alPackagenm.get(position).toString() + "1x2optrue") || alDSPackagenm.get(i).toString().equalsIgnoreCase(prefixlink + alPackagenm.get(position).toString() + "1x2opfalse"))
                                    {
                                        bAlreadyfav = true;
                                        break;
                                    }
                                }

                            }
                            GolbPosition = position;
                            if (bAlreadyfav == true) {
                                Log.i(TAG, "Share positionis "+i);
                                Log.i(TAG, "Current positionis "+position);
                                Log.i(TAG,"ShrdDatasource Rating" + alDSRating.get(i).toString());
                                Log.i(TAG,"Favorite Rating" + String.valueOf(flFavRate[GolbPosition]));

                                if(alDSRating.get(i).toString().equalsIgnoreCase(String.valueOf(flFavRate[GolbPosition])))
                                {
                                    Toast.makeText(getBaseContext(), " App already in Share list ",
                                        Toast.LENGTH_LONG).show();
                                }
                                else
                                {
                                    //alid
                                    /*GolbPosition = position;
                                    new GETFavTask().execute();*/

                                    //UpdateRating
                                    ShrdDatasource.open();
                                    ShrdDatasource.UpdateRating(String.valueOf(flFavRate[GolbPosition]), alDSID.get(i).toString());
                                    ShrdDatasource.close();

                                    //Update Query fire
                                }
                            } else {
                                //Log.i(TAG, "First Package cmp"+ alDSPackagenm.get(position).toString());
                                Log.i(TAG, "Second Package cmp"+  alPackagenm.get(position).toString());
                                GolbPosition = position;
                                new GETFavTask().execute();

                                // add item in Database when user get select
                            }

                        }
                    });
                RowModel model = getModel(position);
                ViewHolder holder = (ViewHolder) row.getTag();
                holder.ratingBar1.setTag(new Integer(position));
                //holder.btnFavrowOpen.setTag(mlist.get(position));
                holder.ratingBar1.setRating(model.rating);
                holder.imgvFavrowiconappicon.setImageDrawable(drblAlIcon[position]);
                holder.txvxFavrowiconappname.setText(alAppName.get(position)
                    .toString());
                holder.chkbxFavrowsel.setChecked(mlist.get(position).isSelected());
                holder.chkbxFavrowsel.setTag(mlist.get(position));

                holder.btnFavrowOpen.setOnClickListener(new View.OnClickListener() {
                     public void onClick(View v) {
                        // OpenApp(alPackagenm.get(position).toString());
                     }
                 });
                try
                {
                if (alAppRating.get(position) == null | alAppRating.get(position).toString().equalsIgnoreCase("null")) {
                        holder.ratingBar1.setRating(0.0f);
                } else {
                    holder.ratingBar1.setRating(Float.parseFloat(alAppRating
                            .get(position).toString()));
                }
                }catch (Exception e) {
                    e.printStackTrace();
                }
                //holder.ratingBar1.setRating(Float.parseFloat(alAppRating.get(position).toString()));

            return (row);
        } 
```

在这里，您可以看到`holder.btnFavrowOpen`带有 onclicklistner 的按钮，我在该行得到了空指针，这与此处发生的情况非常相关....如果我在适配器中删除按钮代码，它会正常工作...但是当我再次编写按钮代码时，它会出现错误空指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:29:51.327

利用

```
base.findViewById 
```

并不是

```
base.findViewWithTag 
```

# mysql - crontab 没有运行 mysql 命令

> ID：12103485
> 
> 赞同：0
> 
> 时间：2012-08-24T05:16:18.843
> 
> 标签：mysql, cron, mysqldump, crontab, cronexpression

`crontab -e`我已经使用如下方式设置了一个 cronjob ：

```
12 22 * * * /usr/bin/mysql >> < FILE PATH > 
```

这不会运行 mysql 命令。它只会创建一个空白文件。而 mysqldump 命令是通过 cron 运行的。问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:18:11.947

当然`mysql`是 MySQL 的交互界面。

假设您只是在运行`mysql`并将输出附加到您的文件中`>>`，第一次尝试从标准输入读取时，它可能会得到一个文件结尾并退出。

也许您可能想考虑为其提供处理命令，例如：

```
12 22 * * * /usr/bin/mysql
                -u me
                -p never_you_mind
                -e "select * from my_table"
                -D my_database
                >>/home/me/output_file 
```

（为了便于阅读，分成多行，但应该在一行上）。

顺便说一句，这并不太安全，因为您的密码可能`ps`在进程运行时可见。由于这只是一个示例，我并不太担心，但是`my.cnf`如果您沿着这条路走，您应该考虑将密码存储在一个适当保护的文件中。

就运行一个 shell 脚本而言，`cron`它反过来执行 MySQL 命令，这也应该可以工作。一种选择是使用 here-doc：

```
/usr/bin/mysql -u me -p never_you_mind -D my_database <<EOF
    select * from my_table
    select * from my_other_table where id = 74
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T16:08:39.087

```
12 22 * * * /usr/bin/mysql >> < FILE PATH > 2>&1 
```

将您的错误消息重定向到同一文件，以便您可以调试它。

还有一篇关于如何调试 cron 作业 的好[文章：](https://www.turnkeylinux.org/blog/debug-cron)[如何调试损坏的 cron 作业](https://www.turnkeylinux.org/blog/debug-cron)

# javascript - 使用 Ajax 刷新页面属性

> ID：12103489
> 
> 赞同：0
> 
> 时间：2012-08-24T05:16:48.353
> 
> 标签：javascript, ajax, jsp, struts, reload

我有一个场景，我需要调用 Java 方法并检查调用是否完成。如果它完成了，我需要显示一条消息。这可以使用 ajax 函数轻松完成。但问题是，我将在这个方法中设置一些请求参数，它们会在 ajax 之后得到反映。

还有一个疑问是，我怎样才能控制这个轮询间隔

```
 <script type="text/javascript">
    setTimeout(function () { 
      location.reload();
    }, 60 * 1000);
 </script> 
```

我只想在以下情况下执行此刷新脚本

```
<s:if test="#request['Isam2Asam'] != null"> 
```

否则页面不应该被重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:40:06.970

Ajax 可以轻松发送请求参数。

您正在寻找 setInterval - jQuery 版本：

```
var tId = setInterval(function() {
  $.get("somejsp?parm="+someParm,function(data) {
    if (data=="done") { 
      clearInterval(tId); // stop polling
      $("#message").html("Done"); // update a div id="message"
    }
  });
},60000); 
```

# knockout.js - 受保护的 Observable 重新渲染整个视图模型

> ID：12103493
> 
> 赞同：0
> 
> 时间：2012-08-24T05:17:24.643
> 
> 标签：knockout.js

我在使用以下链接中的 protectedObservable 自定义绑定时遇到问题。

[http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html](http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html)

受保护的 observable 嵌套在 3 个子模板中。

```
<select class="select-teams bracket-select" data-bind="value: divisionTeamId, options: $root.teams, optionsText: 'Name', optionsValue: 'Id', optionsCaption: ' - Teams - '"></select> 
```

当这不是受保护的可观察对象时，视图模型不会重新呈现自己。当它受到保护时，模板会重新呈现并失去其初始值。任何线索为什么会这样？

```
self.divisionTeamId = ko.protectedObservable(undefined); 
```

自定义绑定

```
ko.protectedObservable = function (initialValue) {

        var _actualValue = ko.observable(initialValue),
        _tempValue = initialValue;

        var result = ko.computed({
            read: function () {
                return _actualValue();
            },
            write: function (newValue) {
                _tempValue = newValue;
            }
        });

        result.commit = function () {
            if (_tempValue !== _actualValue()) {
                _actualValue(_tempValue);
            }
        };

        result.reset = function () {
            _actualValue.valueHasMutated();
            _tempValue = _actualValue();
        };

        return result;
    }; 
```

![在此处输入图像描述](../Images/9566e85a01763d1dd608e886a5a92b49.png)

**更新**

我发现删除 stopBinding 解决了这个问题。

```
<div data-bind="stopBinding: true">
    <div id="bracket-namespace">
          .....
    </div>
</div>

    app.members.bracket.init = function (options) {
        viewModel = new ViewModel(options);

        ko.applyBindings(viewModel, document.getElementById("bracket-namespace"));
    };

ko.bindingHandlers.stopBinding = {
    init: function () {
        return { controlsDescendantBindings: true };
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:31:15.750

我删除了 stopBinding:true 并修复了它。所以我采取了不同的方法来填充动态 HTML，因为我仍然想使用 stopBinding:true。我显式地填充了在 ajax 调用期间填充的动态 HTML 容器。因此，我没有使用容器元素的“html”绑定来设置它，而是使用 jQuery $(container).html(...) 来填充它。我的最终实现如下。stopBinding 使用父虚拟机或新虚拟机，具体取决于 ajax 页面 stopBinding 属性。

```
<div id="container" class="clearfix" data-bind="stopBinding: members.stopBinding, container: {}">  
     @RenderBody()
</div> 
```

# php - WordPress 页面作为内容节点

> ID：12103497
> 
> 赞同：0
> 
> 时间：2012-08-24T05:17:43.790
> 
> 标签：php, wordpress, wordpress-theming

我正在创建一个包含内容块的主页，通过从多个页面中抓取内容以便在后端更好地组织，可以更轻松地处理这些内容。问题是我不想创建实际页面，只使用内容（类似于 Private page stutus，但对所有人可见）。

有没有办法设置自定义状态或帖子类型，以便我可以创建可用于在主页上聚合的内容节点？（基本上就像一个页面作为一个大部件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:25:13.390

是的，创建自定义帖子类型。

[http://codex.wordpress.org/Post_Types#Custom_Types](http://codex.wordpress.org/Post_Types#Custom_Types)

自定义帖子类型可以有自己的属性，可以在管理端编辑自己的 UI，但可以使用与检索普通帖子和页面相同的功能进行检索，以便您可以轻松地将它们插入到主题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:35:03.907

如果您只需要内容块，为什么不添加一个[选项页面](http://codex.wordpress.org/Creating_Options_Pages)并使用[the_editor](http://codex.wordpress.org/Function_Reference/the_editor)来处理 html 内容。然后，您可以通过抓取选项来检索内容，而无需创建额外的单个、存档或提要内容。

如果你不熟悉[设置 API](http://codex.wordpress.org/Settings_API)，[Otto 写](http://ottopress.com/2009/wordpress-settings-api-tutorial/)了一篇很好的文章。

# android - android：如何在当前布局中访问新使用的布局的视图

> ID：12103507
> 
> 赞同：0
> 
> 时间：2012-08-24T05:18:44.700
> 
> 标签：android, android-layout, android-actionbar

我无法应对这种熟悉的情况。

在我的项目中，我使用的是 ActionBarSherlock，`Search icon`点击后我将 ActionBar 替换为自定义布局。问题是如何从这个新布局中获取 onClickListener 的视图和所有视图？

```
public boolean onCreateOptionsMenu(Menu menu) {
menu.add("Search")
        .setIcon(R.drawable.ic_search)
        .setActionView(R.layout.on_search_icon_clicked)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS |MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
        return true;
}

my on_search_icon_clicked.xml is:

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/search_image"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_search" />

    <EditText
        android:id="@+id/search_editText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/search_image"
        android:hint="@string/search"
        android:singleLine="true" />

</RelativeLayout> 
```

现在如何得到这个`search_image.setOnClickListener`和所有？

它说`NullPointerException`如果我在我的 onCreate 中使用它。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:57:26.827

我的意思是膨胀布局，比如

```
LayoutInflater  inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.on_search_icon_clicked, null, false);
view.findViewById(R.id.search_image).setOnClickListener(...);
menu.setActionView(view); 
```

我认为您也可以通过调用 getLayoutInflater(); 来获得充气机。

# iphone - 在 iPhone 设备中打开已安装的应用程序

> ID：12103510
> 
> 赞同：0
> 
> 时间：2012-08-24T05:19:00.223
> 
> 标签：iphone, objective-c, launching-application, openurl

是否可以通过只知道如下应用程序名称来打开 iPhone 应用程序？

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"AppName://"]]; 
```

还是我应该使用其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:27:45.033

只有当目标应用程序在自定义 URL 方案中提到它时，您才能打开它。见[链接](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

# python - 如何从父方法引用子类？

> ID：12103513
> 
> 赞同：4
> 
> 时间：2012-08-24T05:19:33.267
> 
> 标签：python

在下面的示例中，我可以用一个神奇的词来代替`<ChildClass>`它，就像 super 的反义词一样吗？

```
class Parent(object):

    def __init__(self):
        print <ChildClass>.x

class someChild(Parent):
    x = 10 
```

这是一个愚蠢的例子，但它表明了我的意图。顺便说一句， using`someChild`是行不通的，因为有很多子类。

我能想到的唯一解决方案是在每个子类中都有一个构造函数，它调用 Parent 的构造函数并引用自身（甚至传递 x），但我想避免在每个子类中都有一个构造函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T05:24:37.713

仅使用有什么问题`self.x`？

```
class Parent(object):
    x = None  # default value
    def __init__(self):
        print self.x

class someChild(Parent):
    x = 10
    def __init__(self):
        Parent.__init__(self)

class otherChild(Parent):
    x = 20
    def __init__(self):
        Parent.__init__(self)

a = someChild()
# output: 10
b = otherChild()
# output: 20 
```

请注意，即使`Parent`也具有类属性`x`（`None`在上面的示例中），它也是如何工作的——孩子的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:36:18.940

`self.x`如果实例没有`x`属性，它将起作用。

`type(self).x`如果实例具有`x`属性并且您想要类的值，则基本上跳过实例。

# c++ - 你如何在 C++ 中舍入小数位？

> ID：12103514
> 
> 赞同：5
> 
> 时间：2012-08-24T05:19:33.970
> 
> 标签：c++, floating-point, precision

我需要帮助将浮点值四舍五入到小数点后一位。

我知道`setprecision(x)`和`cout << precision(x)`。如果我想对整个浮点数进行四舍五入，这两种方法都有效，但我只对将小数四舍五入到十分位感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T05:30:23.510

还有另一个不需要强制转换为 int 的解决方案：

```
#include <cmath>

y = floor(x * 10d) / 10d 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T05:33:55.287

```
#include <cmath>

int main() {
    float f1 = 3.14159f;
    float f2 = 3.49321f;
    std::cout << std::floor(f1 * 10 + 0.5) / 10 << std::endl; 
    std::cout << std::floor(f2 * 10 + 0.5) / 10 << std::endl;
    std::cout << std::round(f1 * 10) / 10 << std::endl; // C++11
    std::cout << std::round(f2 * 10) / 10 << std::endl; // C++11
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:28:42.380

你可以这样做：

```
int main()
{

    float a = 4212.12345f;
    float b = a * 10.0f;
    float c = ((int)b) / 10.0f;

    cout << c << endl;
    return 0;
} 
```

# android - 负高度值

> ID：12103516
> 
> 赞同：3
> 
> 时间：2012-08-24T05:19:51.500
> 
> 标签：android, gps, altitude

查找纬度、经度和高度时，我得到负高度值。谁能帮我找出原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T05:48:51.260

没有看到产生这些值的代码，除了常识之外，我能提供的东西不多。

GPS 高度通常使用理想化海平面（零高度）的大地测量模型，基本上将椭球体映射到形状不太完美的行星（无论如何都会随着月球潮汐力等因素而变化）。有关详细信息，请参阅[此处](http://en.wikipedia.org/wiki/World_Geodetic_System)的WGS84 。

正常误差约为 +/- 15m，这仅适用于大约 95% 的时间。根据我记得的规格，另外 5% 的时间可以有任何值的高度。

当然，如果您的 GPS 与卫星之间没有畅通无阻的路径，则误差范围会更大。

这些潜在的错误无疑是飞机更多地依赖高度计或 ILS 进行近地活动的原因。

正如一个网站所说：

> 这意味着，如果您在海边行走，并且看到您的海拔高度为 -15 米，则不必担心。

当然，如果你呼吸困难，你可能想更仔细地看看你有多湿 :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T05:26:59.293

好吧，GPS坐标上下文中的高度代表您根据海平面的高度。所以我假设你当前的位置刚好低于海平面。是的，这是可能的；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T07:02:43.340

GPS 高度是 GPS WGS84 参考椭球体上方的高度（与海平面不同，不考虑山丘！）。负高度意味着（如果不是由于信号不良）您低于参考椭球体。

以下是有关如何获得更准确高度的更多信息：[https ://stackoverflow.com/a/9432382/1127492](https://stackoverflow.com/a/9432382/1127492)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-05T19:35:34.627

切换定位设置以使用大地水准面模型。

# mysql - 如何使用 sql-query 检索存储在 mysql 中的分层数据

> ID：12103517
> 
> 赞同：2
> 
> 时间：2012-08-24T05:19:52.133
> 
> 标签：mysql

我的数据库结构如下

```
id category    parent
-------------------------
1  Programming 
2  Database    Programming
3  MySQL       Database 
```

现在，当我查询 MySQL 时，我应该得到的结果为

```
MySQL -> Database -> Programming 
```

我收到了一些建议，我可以使用存储过程来做到这一点。但这会使我的查询变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:23:41.287

这正是`JOIN`s 的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:33:45.090

表示你想显示输出

数据库 -> 编程

这种格式。

我尝试了一个查询

```
 select category,"->",parent from table where id =2; 
```

它给出了输出

```
category ->  parent
Database -> Programming 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:12:03.240

检查这个查询，让我知道它是否有效（testtube 是我的表名）---

```
SELECT a.category,  "->", a.parent,  "->", b.parent
FROM testtube AS a
INNER JOIN testtube AS b
WHERE a.parent = b.category
AND a.category =  "MySql"
LIMIT 0 , 30 
```

# java - 将数据从文件打印到数组

> ID：12103518
> 
> 赞同：0
> 
> 时间：2012-08-24T05:20:24.540
> 
> 标签：java, arrays, file, io

我需要将此文件打印到一个数组，而不是屏幕上。是的，我必须使用一个数组 - 学校项目 - 我对 java 很陌生，所以感谢任何帮助。有任何想法吗？谢谢

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

public class HangmanProject
{
    public static void main(String[] args) throws FileNotFoundException
    {

        String scoreKeeper;     // to keep track of score
        int guessesLeft;        // to keep track of guesses remaining
        String wordList[];    // array to store words

        Scanner keyboard = new Scanner(System.in);    // to read user's input

        System.out.println("Welcome to Hangman Project!");

        // Create a scanner to read the secret words file
        Scanner wordScan = null;

        try {
            wordScan = new Scanner(new BufferedReader(new FileReader("words.txt")));
            while (wordScan.hasNext()) {
                System.out.println(wordScan.next());
            }
        } finally {
            if (wordScan != null) {
                wordScan.close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:23:47.070

您是否需要更多帮助来读取文件或将字符串放入已解析的数组？如果您可以将文件读入字符串，只需执行以下操作：

```
String[] words = readString.split("\n"); 
```

这将在每个换行符处拆分字符串，因此假设这是您的文本文件：

字1

字2

字3

单词将是：{word1，word2，word3}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:31:29.117

如果您正在阅读的单词存储在文件的每一行中，您可以使用[`hasNextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextLine%28%29)and[`nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)一次读取一行文本。使用[`next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)will 也可以，因为您只需要在数组中输入一个单词，但`nextLine()`通常总是首选。

至于仅使用数组，您有两种选择：

*   你要么声明一个大数组，你确定它的大小永远不会小于总字数；
*   您浏览文件两次，第一次读取元素的数量，然后根据该值初始化数组，然后在添加字符串的同时再次浏览它。

通常建议使用动态集合，例如[ArrayList()](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。然后，您可以使用[toArray()](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)方法将列表转换为数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T23:22:57.987

尼克，你刚刚给了我们最后一块拼图。如果您知道要读取的行数，则可以在读取文件之前简单地定义一个该长度的数组

就像是...

```
String[] wordArray = new String[10];
int index = 0;
String word = null; // word to be read from file...
// Use buffered reader to read each line...
    wordArray[index] = word;
    index++; 
```

说实话，这个例子没什么意义，所以我做了这两个例子

第一个使用 Alex 建议的概念，它允许您从文件中读取未知数量的行。

唯一的问题是，如果行被多个换行符分隔（即单词之间有额外的行）

```
public static void readUnknownWords() {

    // Reference to the words file
    File words = new File("Words.txt");
    // Use a StringBuilder to buffer the content as it's read from the file
    StringBuilder sb = new StringBuilder(128);

    BufferedReader reader = null;
    try {

        // Create the reader.  A File reader would be just as fine in this
        // example, but hay ;)
        reader = new BufferedReader(new FileReader(words));
        // The read buffer to use to read data into
        char[] buffer = new char[1024];
        int bytesRead = -1;
        // Read the file to we get to the end
        while ((bytesRead = reader.read(buffer)) != -1) {

            // Append the results to the string builder
            sb.append(buffer, 0, bytesRead);

        }

        // Split the string builder into individal words by the line break
        String[] wordArray = sb.toString().split("\n");

        System.out.println("Read " + wordArray.length + " words");

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            reader.close();
        } catch (Exception e) {
        }
    }

} 
```

第二个演示如何将单词读入已知长度的数组中。这可能更接近你真正想要的

```
public static void readKnownWords() 

    // This is just the same as the previous example, except we
    // know in advance the number of lines we will be reading    
    File words = new File("Words.txt");

    BufferedReader reader = null;
    try {

        // Create the word array of a known quantity
        // The quantity value could be defined as a constant
        // ie public static final int WORD_COUNT = 10;
        String[] wordArray = new String[10];

        reader = new BufferedReader(new FileReader(words));
        // Instead of reading to a char buffer, we are
        // going to take the easy route and read each line
        // straight into a String
        String text = null;
        // The current array index
        int index = 0;
        // Read the file till we reach the end
        // ps- my file had lots more words, so I put a limit
        // in the loop to prevent index out of bounds exceptions
        while ((text = reader.readLine()) != null && index < 10) {

            wordArray[index] = text;
            index++;

        }

        System.out.println("Read " + wordArray.length + " words");

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            reader.close();
        } catch (Exception e) {
        }
    }

} 
```

如果您发现其中任何一个有用，我会适当地使用它，您会给我一个小小的赞成票并检查亚历克斯的答案是否正确，因为我已经适应了他的想法。

现在，如果您对使用哪个换行符非常偏执，您可以通过 value 找到系统使用的`System.getProperties().getProperty("line.separator")`值。

# android - Android isodep.isConnected() 返回 false 和最大收发长度：0 字节，对于 B 类卡。？

> ID：12103521
> 
> 赞同：1
> 
> 时间：2012-08-24T05:20:37.727
> 
> 标签：android, nfc

我正在开发一个 android 应用程序，需要从 B 型卡读取和显示数据。卡连接良好，但是当**isodep.isConnected()**被调用时，它返回 false。

我使用**TagInfo**应用程序（由 NXP 提供，可在 Play 商店中获得）扫描了这张卡，它显示了这张卡的**最大收发长度：0 字节**。这张卡有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:31:45.443

最大收发长度是指 Android 设备中 NFC 的能力。设备似乎无法通过 IsoDep 发送数据。它是什么类型的设备？您是否正在运行自定义 ROM？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T00:09:19.167

标签信息应用程序可以从 MBLI 属性中导出最大收发长度。
MBLI = 最大值。缓冲区长度索引。它是 ATTRIB 响应的第一个字节的高半字节。一些 B 类标签在这个半字节中有 0，这意味着“未提供信息”。

对于您要查找的内容的一些指示，您可以使用标签的 ATQB 响应的“协议信息”部分给出的“最大帧大小”。[请参阅本](http://www.taptrack.com/nfc-technology/datasheets/doc2056.pdf)参考资料的第 19 页。您的选项（以字节为单位）是 16,24,32,40,48,64,96,128,256

# mfc - MFC：单击 CListCtrl 中的第一列时不想突出显示整行

> ID：12103523
> 
> 赞同：0
> 
> 时间：2012-08-24T05:20:57.040
> 
> 标签：mfc, highlight, clistctrl

我的对话框中有一个没有 LVS_EX_FULLROWSELECT 的报表样式的 CListCtrl，当我单击第一列时，它会突出显示整行。我不想要这个，我怎么能禁用这个行为？

# android - 如何在单个背景图像上获得多个 onclick 事件？

> ID：12103528
> 
> 赞同：0
> 
> 时间：2012-08-24T05:21:25.730
> 
> 标签：android, image, android-layout

![在此处输入图像描述](../Images/01d8a3b92ac0ea2a47595a80e94b4758.png)你好大家好，我有一个问题，我想找到一个解决方案......

我开发了一个背景图像，因此它适合所有类型的手机或平板电脑类型。

我的图像看起来像一个多关节按钮

现在我希望该按钮上的多个 onclick 事件（这是图像的一部分）在该图像上查看

有谁能够帮我？？

提前致谢.....

在这张图片中，我想在 about/stats/offers/help 以及中间标签中点击事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:23:52.920

将按钮布局或任何您想要的图像集放在不可见（可见性.不可见）上点击不可见的obj

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:14:51.670

在一个屏幕中使用多个布局并使用来自

[http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

# ruby - ruby-1.9.2.p290 或 ruby -1.9.3 中 ActiveRecord 对象的克隆更改

> ID：12103532
> 
> 赞同：2
> 
> 时间：2012-08-24T05:22:15.307
> 
> 标签：ruby, ruby-on-rails-3, activerecord, clone

当我在 ruby​​-1.9.2-p290 中克隆一个简单对象时，一切正常

```
class Klass
    attr_accessor :str
end
s1 = Klass.new         #=> #<Klass:0x401b3a38>
s1.str = "Hello"       #=> "Hello"
s2 = s1.clone          #=> #<Klass:0x401b3998 @str="Hello">
s2.str = "Hello world" #=> "Hello world"
s2                     #=> #<Klass:0x00000100977c40 @str="Hello world">
s1                     #=> #<Klass:0x00000100993fa8 @str="Hello"> 
```

但是当我克隆一个 ActiveRecord 对象时，会发生一些奇怪的事情：

我正在使用导轨 3.1.8。加载开发环境（Rails 3.1.8）。当我启动“rails 控制台”时。

```
ruby-1.9.2-p290 :001 > chair = Chair.new(:code => 'code', :description => 'The Description')
#=> #<Chair id: nil, code: "code", description: "The Description", user_id: nil, created_at: nil, updated_at: nil> 
ruby-1.9.2-p290 :002 > chair_clone = chair.clone
#=> #<Chair id: nil, code: "code", description: "The Description", user_id: nil, created_at: nil, updated_at: nil> 
ruby-1.9.2-p290 :003 > chair_clone.description = "Update description"
#=> "Update description" 
ruby-1.9.2-p290 :004 > chair_clone
#=> #<Chair id: nil, code: "code", description: "Update description", user_id: nil, created_at: nil, updated_at: nil>     
ruby-1.9.2-p290 :005 > chair
#=> #<Chair id: nil, code: "code", description: "Update description", user_id: nil, created_at: nil, updated_at: nil> 
```

原来对象“椅子”的描述属性也更新了，这不是很奇怪吗。[我在http://apidock.com/ruby/Object/clone](http://apidock.com/ruby/Object/clone)文档
中发现了以下警告

ruby-1.9.3 中 ActiveRecord 对象的克隆更改

我注意到在 ruby​​-1.9.3 中克隆一个活动记录对象，然后更改原始对象的属性实际上也会更改克隆的对象。在 ruby​​-1.9.2 中情况并非如此。

是否已经有针对此问题的解决方案？

提前感谢您的任何反馈。

约斯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:48:30.960

而不是`clone`使用`dup`类似：
...
`chair_clone = chair.dup`
...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:58:13.683

```
u = User.last
u.duplicable? # => true
u2 = u.dup
u2.email = 'wwwww'
u.email # => 'megacoder@rambler.ru'
u2.email # => 'wwwww' 
```

# javascript - ToString 将 Javascript 对象更改为未定义

> ID：12103535
> 
> 赞同：1
> 
> 时间：2012-08-24T05:22:34.017
> 
> 标签：javascript, object, undefined, tostring

```
mysqlconnection.query("SELECT userID FROM users_session WHERE userSessionID = '" + SESSION_ID_ESCAPED + "'", function SelectCb (err, rows) {
if (err) {
    throw err;
}
else {
    console.log(rows[0]);
} 
```

怎么`row[0]`变成a`string`让浏览器可以查看？

控制台告诉我`rows[0] = {userID: 2}`// 这是`[object Object]`在任何类型的传输中。

我用过， `var TheID = rows[0].toString //`当 console.log'd 或发送出去时，TheID 现在是未定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T05:26:35.683

尝试：

```
var TheID = rows[0]['userID'].toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:32:35.477

试试这个..

```
console.log(rows[0].userID); 
```

您将获得用户 ID。

# c - 此字符串比较函数中 (const char*) cast C 的剖析与解释

> ID：12103538
> 
> 赞同：2
> 
> 时间：2012-08-24T05:22:46.333
> 
> 标签：c, casting

通过反复试验，我设法使以下字符串比较函数按预期与 qsort() 一起使用，但我真的不明白为什么在 (const char*) 强制转换表达式中需要星号。有人可以剖析和解释：-

```
int strCompare(const void *a, const void *b) {
    return strcmp((const char*)a, (const char*)b);
} 
```

附录：-

```
void findStrings(int * optionStats, char strings[][MAX_STRING_SIZE + 1], int numStrings)
{
    qsort(strings, numStrings, 21*sizeof(char), strCompare);
} 
```

有没有办法通过 strCompare() 消除对 strcmp() 的调用，而只使用 strcmp() 作为 qsort() 的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:31:02.033

您需要一个星号，因为您想将一个*指针*转换`const void`为一个*指针*，`const char`而一个星号表示它们是指针类型。

事实上，您并不需要转换，因为`pointer to void`类型可以隐式转换为`pointer to T`C 语言中的类型，而 C++ 并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:17:32.393

正如其他人在这里提到的那样，您不需要定义新函数，只需转换*指针*类型即可。以下是在将函数传递给时如何强制转换*函数*`qsort`，以防止任何警告/错误：

```
qsort(arr,
      sizeof(arr)/sizeof(char*),
      sizeof(char*),
      (int(*)(const void *, const void *))strcmp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:28:41.020

的签名`strcmp`是（还有一个，但这是您正在使用的）：

```
int strcmp(const char *s1, const char *s2); 
```

因此，由于您的函数 (`a`和`b`) 的参数是`const void`，您必须执行这些强制转换。

只要您在调用时用作参数的变量`qsort`将传递给`strCompare`as ，这将是正确的`char *`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:36:38.293

因为

```
int strcmp(
   const char *string1,
   const char *string2 
); 
```

是这样定义的。如果您不将其转换为“ const char* ”，则变量“ a ”应该是指向 void 的类型指针。如果你打字更好理解

`const void *a as const void* a`

> 星号与数据类型相关联。

因此，要将整个变量“a”转换为指向“const char”数据类型的指针，您也必须使用星号。

# linux - 无法使用 PF_PACKET 将原始数据包发送到本地 mac？

> ID：12103541
> 
> 赞同：1
> 
> 时间：2012-08-24T05:22:59.767
> 
> 标签：linux, sockets, raw-sockets

我一直在玩使用构建的以太网协议（不是 IP）

套接字（PF_PACKET，SOCK_RAW，ether_type）

我有一个小问题。我已经构建了一个数据包，其中源和目标 mac 设置为我的本地卡 mac，我还使用 bind 绑定了套接字。

我可以很好地从网络接收数据包。我能够将数据包发送到我看到它们出现在wireshark中的程度。

但是，我的监听应用看不到这些数据包。但是，它能够看到来自网络上其他来源的数据包。

我应该指出，我的 mac 地址似乎是以正确的字节顺序发送的。

你可以给自己发送数据包吗？

网卡不回环吗？linux内核是否在IP级别为环回做了一些特殊的事情，因为我低于这个，忽略我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:28:55.663

是的，正如您所说，IP“环回”数据包受到特殊处理。它们在内部环回，而不是通过接口发送出去。因此，从这个意义上说，以太网级环回是一种通常不需要支持的特殊情况。一些旧的 10Mbit 以太网卡甚至是半双工的，所以它不能在那个硬件上工作:)。

另一方面，您可以购买/制作环回适配器电缆来测试网卡。所以它必须在（希望是所有的）现代硬件上成为可能。人们已经在 linux 下通过 AF_PACKET 使用它们（证据，虽然没有更多细节，[here](http://www.linuxquestions.org/questions/linux-kernel-70/problem-with-ethernet-loopback-test-using-loopback-plug-stub-receiving-socket-not-se-826922/)）。

我想下一个问题是你的*交换机*是否支持这个。一个愚蠢的集线器必须支持它，但现代交换机有混淆的空间。或者可能因为害怕数据包无限循环而不允许它。

# button - TableViewerColumn 中的 JFace 按钮

> ID：12103547
> 
> 赞同：1
> 
> 时间：2012-08-24T05:23:43.380
> 
> 标签：button, jface, tableviewer

是否可以在 TableViewerColumn 中有一个按钮？有几篇文章证实了这一点，但我发现没有实际工作的代码。我也读过一个 DialogCellEditor，这是要研究的吗？

问候， 马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:19:14.647

由于这似乎是一个常见问题，因此我尝试了一种解决方法。我使用图像作为标签并添加编辑支持，如下所示：

```
 col = createTableViewerColumn(titles[10], bounds[10], 10);
    col.setEditingSupport(new DeleteSupport(viewer));
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public Image getImage(Object element) {
            return new Image(ApplicationRunner.getApp().getShell()
                    .getDisplay(), "ressources/images/delete.png");
        }

        @Override
        public String getText(Object element) {
            return "";
        }
    }); 
```

在 DeleteSupport 类（扩展 EditingSupport）中，您必须让 canEdit() 返回 false，因此无法选择图像。但是，您不能使用 getValue()。所以，在返回 false 之前，我会在 canEdit() 中做任何我必须做的事情。这与简单按钮的行为相同。

DeleteSupport 如下所示：

```
public class DeleteSupport extends EditingSupport {

private final TableViewer viewer;

public DeleteSupport(TableViewer viewer) {
    super(viewer);
    this.viewer = viewer;
}

@Override
protected CellEditor getCellEditor(Object element) {
    return new TextCellEditor(viewer.getTable());
}

@Override
protected boolean canEdit(Object element) {

            // if confirmed, try to delete the customer
    if (MessageDialog.openConfirm(  ApplicationRunner.getApp().getShell(),
                    "Confirm delete",
                    "Soll " + ((Customer) element).getFirstname()
                    + " " + ((Customer) element).getLastname()
                    + " be deleted? Cannot be undone!")) {

        try {
            CustomerDAO.getInstance().delete(((Customer) element).getId());
        } catch (SQLException e) {
            // TODO something
        }
    }

            // reload anyways
    try {
        viewer.setInput(CustomerDAO.getInstance().getAll());
    } catch (SQLException e) {
        // TODO something else
    }
    viewer.refresh();

    return false;
}

@Override
protected Object getValue(Object element) {
    return "";
}

@Override
protected void setValue(Object element, Object value) {
} 
```

}

# tsql - 将 SQL 插入语句组合成另一个插入语句

> ID：12103565
> 
> 赞同：0
> 
> 时间：2012-08-24T05:25:58.230
> 
> 标签：tsql, sql-server-2008-r2

我知道在 T-SQL (Server 2008 R2) 中，我可以使用“输出”关键字来获取我刚刚插入的行的 ID。例如，我可以做

```
insert into [Membership].[dbo].[User] (EmailAddress) 
output Inserted.UserId 
values('testUser1@test.com') 
```

有没有办法将它组合成另一个插入？例如，假设我想添加一个新用户并立即将该用户添加到一个`UserRole`映射`UserId`到`RoleId`.

基本上，我想做类似下面的事情。

```
insert into UserRole (RoleId, UserId) 
values 
(
    1, 
    insert into [Membership].[dbo].[User] (EmailAddress) 
    output Inserted.UserId values('testUser1@test.com')
) 
```

但我似乎无法让它发挥作用。我尝试将内部插入包裹在括号 () 中或使用 select * from () 等。

我错过了什么？这种组合甚至可能吗？

谢谢您的帮助。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:31:54.930

您必须将输出捕获到表变量中：

```
DECLARE @TempVar TABLE (UserID INT)

insert into [Membership].[dbo].[User] (EmailAddress) 
output Inserted.UserId INTO @TempVar(UserID)
values('testUser1@test.com') 
```

然后在第二步中从该临时表插入目标表：

```
INSERT INTO dbo.UserRole (RoleId, UserId) 
   SELECT 
      (yourRoleId), tv.UserID
   FROM @TempVar tv 
```

您还可以将`OUTPUT`子句直接导入目标表 - 如果您可以为您的 使用固定值，这将起作用`RoleID`：

```
DECLARE @FixedRoleID INT = 42

INSERT INTO [Membership].[dbo].[User] (EmailAddress) 
OUTPUT @FixedRoleID, Inserted.UserId INTO dbo.UserRole(RoleId, UserId)
VALUES ('testUser1@test.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:09:03.417

另一种解决方案是使用触发器：

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

并注意“之后”插入触发器：

> 为 | AFTER AFTER 指定仅当触发 SQL 语句中指定的所有操作都已成功执行时才触发 DML 触发器。在触发此触发器之前，所有引用级联操作和约束检查也必须成功。
> 
> 当 FOR 是唯一指定的关键字时，AFTER 是默认值。
> 
> 不能在视图上定义 AFTER 触发器。

# php - 在 jquery JSON php 中获取 {object Object}

> ID：12103567
> 
> 赞同：0
> 
> 时间：2012-08-24T05:26:11.953
> 
> 标签：php, jquery, json, object

我正在尝试根据上一个下拉列表中的选择来获取两个日期。

从功能上讲，该过程正在运行。但是，我得到的是 {object Object} 而不是日期的结果。

PHP

```
$data=array();

while($row=mysql_fetch_array($result)) {

    $data[]=array('start_date'=>date("m/d/Y",strtotime($row['start_date'])));
    //log_msg(print_r($data, true));
}

echo (json_encode($data)); 
```

jQuery

```
 .ajax({
        type: 'POST',
        url: 'admin_workshop_update_retrieve.php',
        dataType: 'json',
        data: 'value=' + choice,
        success: function(data) {
            $.each(data, function(k, v) {
            $("#workshop_dates").append($('<option value ="' + v + '" >' + v + '</option><br>'));
            });
        }
    }); 
```

似乎我缺少将 JSON 对象转换为字符串或文本的简单方法。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:28:41.887

您应该将它们视为对象：

```
$("#workshop_dates").append($('<option value ="' + v.start_date + '" >' + v.start_date + '</option><br>')); 
```

# python - 在python中创建一个字符串

> ID：12103570
> 
> 赞同：-2
> 
> 时间：2012-08-24T05:26:24.293
> 
> 标签：python, python-3.x

我知道这很简单，但是将结果变成 1 个单字符串而不是元组的最佳方法是什么？

```
def lower_case(a):
    x=a.lower()
    y = ("This is now Lowercase:",x)
    return (y,x)

results = lower_case("LOWER CASE")
results

'This is now Lowercase:', 'lower case' 
```

感谢您对如此愚蠢的问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:56:40.920

之前提出的每个解决方案都以某种方式过于复杂：

```
def lower_case(a):
    return "This is now lowercase: " + a.lower() 
```

以最简单和最明显的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:29:27.427

似乎您只想连接字符串。

```
def lower_case(a):
    x=str(a).lower()
    y = "This is now Lowercase:" + x;
    return y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:50:06.827

简单地：

```
def lower_case(a):
    return "This is now Lowercase: %s"%a.lower() 
```

或者：

```
def lower_case(a):
    return "This is now lowercase: " + a.lower() 
```

或者：

```
def lower_case(a):
    return "".join(["This is now Lowercase: ", a.lower()]) 
```

如果您不想要元组，请不要使用元组。您也可以使用[其他方法进行连接](http://www.skymind.com/~ocrow/python_string/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:52:29.283

```
def lower_case(a):
    return "".join(["This is now Lowercase: ", a.lower()]) 
```

# c# - XSLT 字符转义

> ID：12103574
> 
> 赞同：1
> 
> 时间：2012-08-24T05:26:44.750
> 
> 标签：c#, xslt, escaping

我的 xml 中有以下项目名称要转换

```
<title>abc \" &gt; &lt; script &gt; alert(1) &lt; /script &gt;</title> 
```

我在我的 XSL 文件中使用以下内容进行转换：

```
<xsl:attribute name="itemTitle"><xsl:value-of select="title"/></xsl:attribute> 
```

我正在使用 C# 的 XSLCompiledTransform 的 Transform 函数。我的代码是：

```
XPathDocument xpTemplate = new XPathDocument("articlesLookupTemplate.xsl");
XslCompiledTransform xsl = new XslCompiledTransform();
XsltArgumentList xslArg = new XsltArgumentList();
xsl.Load(xpTemplate);

using (StringReader reader = new StringReader(xmlData))
{
    xsl.Transform(XmlReader.Create(reader), xslArg, output);
} 
```

其中输出是一个 HtmlTextWriter。通过 XSLT 对其进行转换后，我希望它保持转义，即输出应该保持

```
itemTitle="abc&quot; &gt; &lt; script &gt; alert(1) &lt; /script &gt;" 
```

但是我得到的是：

```
itemTitle="abc&quot;><script>alert(1)</script>" 
```

我在我的 xsl 文件中使用 html 输出方法并且没有禁用输出转义。如果我尝试使用文本输出方法，我会得到一个截断的输出。如何确保文本保持原样。

--- 更新 --- 我在 www.xmlper.com 上尝试了我的 xsl 和 xml

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0">
<xsl:output method="html" />
<xsl:template match="/articles">
<table id="TemplateTable">
     <xsl:for-each select="articletemplate">
        <li class="Dialog-ListItem">
           <xsl:attribute name="itemTitle"><xsl:value-of select="title"/></xsl:attribute>
           <xsl:value-of select="title"/>
        </li>
      </xsl:for-each>  
</table>
</xsl:template>
</xsl:stylesheet> 
```

和 XML 文件是：

```
<articles >
  <articletemplate>  
  <title>abc " &gt; &lt; script &gt; alert(1) &lt; /script &gt;</title>
  </articletemplate>
</articles> 
```

对于 xmlattribute 中的那个我得到

```
itemTitle="abc &quot; > < script > alert(1) < /script >" 
```

对于没有它的我得到

```
abc " &gt; &lt; script &gt; alert(1) &lt; /script &gt; 
```

我希望 xmlattribute 中的那个也被编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:01:02.963

首先，让我评论一下您的输出；您正在使用以下内容：

```
<table id="TemplateTable">
     <xsl:for-each select="articletemplate">
        <li class="Dialog-ListItem">
           <xsl:attribute name="itemTitle"><xsl:value-of select="title"/></xsl:attribute>
           <xsl:value-of select="title"/>
        </li>
      </xsl:for-each>  
</table> 
```

这将产生一个`li`作为孩子的`table`- 这不是好的 HTML（当我在 w3c.org 上尝试它时肯定不会验证）。`<li>`真的应该是`<ul>`或的孩子`<ol>`

顺便说一句，这实际上是一个非常有趣的问题。我认为其原因是由于与规范不一致：

> html 输出方法不应转义出现在属性值中的 < 字符。

（来源：[http](http://www.xm.co.nz/ShoXS/xsloutput.htm) ://www.xm.co.nz/ShoXS/xsloutput.htm ）

这是我认为正在发生的事情：

解析器中的 xsl:value-of 会看到`abc \&quot; &amp;gt; &amp;lt; script &amp;gt; alert(1) &amp;lt; /script &amp;gt;`它立即转换为`abc \&quot; > < script > alert(1) < /script >`. 然后，根据上面的规则，这应该逐字放入属性值中（这也是我观察到的）。

这几乎可以肯定是由于 html 输出声明。如果我将输出更改为 XML，则这些值将逐字放入属性中。

所以你有两个选择：

1.  直接转换为 XML（通过将输出更改为`xml`）并尝试将其写入客户端。它可能是 XML，但如果您将其作为 HTML 发送（通过省略 XML 声明并为 HTTP 使用正确的内容类型），那么它应该按预期编写。

2.  将您的文本作为 CDATA：`<![CDATA[abc " &gt; &lt; script &gt; alert(1) &lt; /script &gt;]]>`- 这似乎强制 .Net Xml 解析器不将文本视为 HTML（因此当输出方法为 时，它不会在输出之前被翻译`html`），结果如您所愿

值得注意的是，`disable-output-escaping`这里没有效果。这几乎可以肯定是由于输出方法为`html`

使用 XmlDocument、XSLTransform、.Net 3.5 进行测试

这是我写的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">
  <xsl:output method="html" />
  <xsl:template match="/">
    <html>
      <head></head>
      <body>
        <ul>
          <xsl:apply-templates select="/articles/articletemplate" />
        </ul>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="articletemplate">
    <li class="Dialog-ListItem" itemTitle="{title}">
      <xsl:value-of select="title"/>
    </li>
  </xsl:template>  
</xsl:stylesheet> 
```

我使用的示例 XML（注意 CDATA 与非 CDATA）：

```
<?xml version="1.0" encoding="utf-8" ?>
<articles>
  <articletemplate>
    <title><![CDATA[abc \" &gt; &lt; script &gt; alert(1) &lt; /script &gt;]]></title>
  </articletemplate>
  <articletemplate>
    <title>abc " &gt; &lt; script &gt; alert(1) &lt; /script &gt;</title>
  </articletemplate>
  <articletemplate>
    <title>test</title>
  </articletemplate>
</articles> 
```

和输出：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
    <ul>
      <li class="Dialog-ListItem" itemTitle="abc \&quot; &amp;gt; &amp;lt; script &amp;gt; alert(1) &amp;lt; /script &amp;gt;">abc \" &amp;gt; &amp;lt; script &amp;gt; alert(1) &amp;lt; /script &amp;gt;</li>
      <li class="Dialog-ListItem" itemTitle="abc &quot; > < script > alert(1) < /script >">abc " &gt; &lt; script &gt; alert(1) &lt; /script &gt;</li>
      <li class="Dialog-ListItem" itemTitle="test">test</li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:19:47.927

没有办法保留属性值的原始形式，因为 XSLT 处理器不知道原始形式是什么；属性值中的实体引用由 XML 解析器扩展，并以它们的“扩展”形式（即`&lt;`转换为`<`等等）传递给 XSLT 处理器。那么 xsl:value-of 的最终结果取决于 HTML 序列化方法，该方法可以在属性值内自由输出 '"' 作为`&quot;`或`&#34;`或以其他各种等效方式。我没有仔细研究是否输出 '<'并且 HTML 中未转义形式的 '>' 是否合法 - 我的第一个要求是它不合法，这是您的处理器中的一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:32:03.863

我无法重现您的问题。

在 www.xmlper.com 上，我得到了输出：

```
<t itemTitle="abc \&quot; &gt; &lt; script &gt; alert(1) &lt; /script &gt;" /> 
```

对于撒克逊人，我得到了输出：

```
<t itemTitle="abc \&#34; &gt; &lt; script &gt; alert(1) &lt; /script &gt;"/> 
```

我不明白怎么可能得到你声称你拥有的东西。您的 XSLT 处理器不符合标准，或者您将某些 DOM 解析器报告的输出属性的值与输出属性的词法呈现混淆了。

# objective-c - 如何传递类实例的 id？

> ID：12103584
> 
> 赞同：0
> 
> 时间：2012-08-24T05:28:07.777
> 
> 标签：objective-c, nsthread

我的用例是我试图启动一个目标目标对象是类实例的线程。当我尝试执行以下操作时，编译器给了我一个错误（Unexpected interface name '': expected expression）：

```
[NSThread detachNewThreadSelector:@selector(thing:) toTarget:AClass withObject:nil];

@implementation AClass
+(void)thing:(id)arg {
// etc....
}
@end 
```

如何设置此场景？或者更确切地说，我如何获取类实例的 id？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:31:11.687

您可以使用`[AClass class]`. 每个类都响应`+class`方法并返回自己。

# asp.net - 使用 asp.net 优化框架在 Web 应用程序中捆绑脚本文件

> ID：12103597
> 
> 赞同：0
> 
> 时间：2012-08-24T05:29:31.753
> 
> 标签：asp.net, bundling-and-minification, asp.net-optimization

我正在使用以下代码来捆绑我的 Web 应用程序脚本，但它不会生成捆绑脚本

```
 Bundle bundle = new Bundle("~/miniscripts/");
        bundle.Include(
          "~"+  Paths.Scripts.AdminSkin.js.old_browsers_js,
          "~"+  Paths.Scripts.AdminSkin.js.site_js,
          "~"+  Paths.Scripts.AdminSkin.js.list_js,
          "~"+  Paths.Scripts.AdminSkin.js.jquery_accessibleList_js,
          "~"+  Paths.Scripts.AdminSkin.js.jquery_tip_js,
          "~"+  Paths.Scripts.highchart.highstock_src_js,
          "~"+  Paths.Scripts.highchart.modules.exporting_js,
          "~"+  Paths.Scripts.calendar.calendar_js,
          "~"+  Paths.Scripts.calendar.calendar_setup_js,
          "~"+  Paths.Scripts.AdminSkin.js.live_control_js,
          "~"+  Paths.Scripts.linq_js_ver_3_0_1_beta2.linq_js,
          "~"+  Paths.Scripts.moment.moment_min_js
            );

        BundleTable.Bundles.Add(bundle); 
```

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:24:33.783

因此，假设您使用的是 1.0.0 包，您可能希望使用

```
new ScriptBundle("~/miniscripts/"); 
```

否则，您的 Bundle 不会进行任何缩小，它只是将所有脚本文件捆绑在一起。然后在您的页面中，您需要添加：

```
Scripts.Render("~/miniscripts"); 
```

用于渲染包引用。您还应该在此处查看教程：[优化教程](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:19:53.340

我想您正在使用在线捆绑包和缩小版。

首先，您必须在创建捆绑包时添加 JsMinify，以便 asp.net 知道如何缩小文件

```
Bundle bundle = new Bundle("~/miniscript", typeof(JsMinify)); 
```

然后你必须向你的页面添加一个脚本引用

```
<script src="<%: Url.Content("~/miniscript") %>" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:36:56.767

我找到了解决方案，我不知道为什么`Scripts.Render("~/miniscripts/")`不渲染脚本。我已经用 Response.Write 包装了它，问题就解决了。

```
 Response.Write(Scripts.Render("~/miniscripts/")); 
```

# android - 是否有任何分辨率为 640x960 的 Android 设备？

> ID：12103603
> 
> 赞同：5
> 
> 时间：2012-08-23T20:23:19.957
> 
> 标签：android, screen, screen-resolution

我不确定这是否是这个问题的最佳地点，如果不是，请指出正确的地方！

我正在为多种分辨率缩放我的应用程序，我遇到了这两页

查看[屏幕尺寸和密度](http://developer.android.com/about/dashboards/index.html)，图表显示 17% 的设备是正常/xhdpi，同样[在这里](http://developer.android.com/guide/practices/screens_support.html#testing)，在表 3 中显示正常/xhdpi 为 640x960。

我知道这是 Iphone 分辨率，在 google 和 gsmarena 上运行搜索，我只能找到 iPhone 和一些尚未发布的 android 设备。

所以我的问题是在市场上已经上市的平板电脑和手机中，是否有任何具有这种分辨率的安卓设备？如果不是，为什么该表中有该决议？

谢谢！

**编辑**

因此，根据答案，没有具有该分辨率的设备，但是如果没有具有该分辨率的 android 设备，哪些设备适合具有正常大小和 xhdpi 的 17%？为什么它甚至在图表上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:11:18.617

Normal/xhdpi 是 Galaxy Nexus 和所有其他 720p (1280x720) 正常尺寸的手机落入的桶。720p 已成为高端 Android 手机的流行分辨率，这就是为什么您在该桶中看到 17% 的原因。您看到的 960x640 分辨率只是被视为具有正常尺寸屏幕的 xhdpi 的最低分辨率。这并不一定意味着有具有该分辨率的手机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T23:38:54.030

Arc/Neo/Pro/Play 和 S2 中的当前分辨率很好……更高的分辨率肯定会增加图像的清晰度和更高的 ppi 的整个 UI，但它也会产生负面影响 1- 电池寿命的微小差异。 ..这足够小，可以忽略 2- 3D 游戏和 UI 渲染中的性能下降...

iPhone 4 GPU（SGX 535）比 Adreno 205 慢，而且它还使用更高的分辨率，这就是 3D 游戏开发的原因。必须牺牲质量才能获得可玩的fps...

目前最快的 GPU 是 SGX 540（例如在 OMAP 4430 中使用，在 Optimus 3D 的核心）......和 ​​Tegra 2，它比 SGX 540 慢一点......顺便说一下，Tegra 2 本身就是一个完整的 SoC不仅是 GPU .. 而且它使用 nV 自己的 GPU 并且没有其他人在使用它.. 而且它们的成本高于基于 Adreno 205 的 SoC（这使得 Adreno 205 在高端成为主流）......但两者都这些 GPU 中的一些仍然不够强大，无法在 960x640 等高分辨率下提供 30 - 40 fps

所以明年当新的或更新的 GPU 成为主流并且成本与今天的 Adreno 205、SGX 540 成本相同时，我们可能会看到更高的分辨率，可以在不牺牲性能的情况下使用......但不要指望在 854x480 到960x640，那里有很多像素需要计算，屏幕面板制造商也倾向于在这里拥有控制手……最接近的是**Atrix**，它的尺寸为**960x540**（宽度比 iPhone 4 小 100px），它使用 Tegra 2。

*编辑：*刚刚发现这个！**夏普 IS03**的分辨率为**960x640**。但是，不幸的是它只在日本发行。检查这些链接以获取更多信息：[link1](http://phandroid.com/2010/10/04/retina-display-comes-to-android-with-sharp-iso3/)、[link2](http://androidmixer.com/sharp-iso3-android-phone-release-date-and-specs/)、[link3](http://pdadb.net/index.php?m=specs&id=2631&c=sharp_is03)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T23:39:03.890

这有点晦涩，但这似乎很重要：

[http://en.wikipedia.org/wiki/Meizu_M9](http://en.wikipedia.org/wiki/Meizu_M9)

...除非您正在寻找*西方*手机。不过，在现实生活中从未见过。我自己的古怪 Android 设备大列表没有显示任何 640x960 屏幕，但我遇到了 540x960 的。

# java - 获取mybatis中最后插入记录的id

> ID：12103606
> 
> 赞同：12
> 
> 时间：2012-08-24T05:30:32.210
> 
> 标签：java, mysql, ibatis, mybatis

我是mybatis的新手。我正在尝试获取最后插入的记录的 id。我的数据库是 mysql，我的映射器 xml 是

```
 <insert id="insertSelective"  parameterType="com.mycom.myproject.db.mybatis.model.FileAttachment" >
  <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER" >
  SELECT LAST_INSERT_ID() as id
</selectKey>
 insert into fileAttachment
<trim prefix="(" suffix=")" suffixOverrides="," >
  <if test="name != null" >
    name,
  </if>
  <if test="attachmentFileSize != null" >
    size,
  </if>      
</trim>
<trim prefix="values (" suffix=")" suffixOverrides="," >
  <if test="name != null" >
    #{name,jdbcType=VARCHAR},
  </if>
 <if test="attachmentFileSize != null" >
    #{attachmentFileSize,jdbcType=INTEGER},
  </if>
 </trim>
 </insert> 
```

我认为这里写的语句'SELECT LAST_INSERT_ID() as id'应该返回最后插入记录的id，但插入记录后我总是得到1。

我的 mapper.java 类我有方法

```
 int insertSelective(FileAttachment record); 
```

在我正在使用的 dao 课程中

int id = fileAttachmentMapper.insertSelective(fileAttachment);

插入新记录时，我得到的 Id 值始终为 1。我的 Id 字段自动递增，并且记录正确插入。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T09:03:33.227

id 被注入到对象中：

```
int num_of_record_inserted = fileAttachmentMapper.insertSelective(fileAttachment);

int id = fileAttachment.getId(); 
```

所做的是在您`selectKey`要插入的对象中设置 id，在这种情况下，`fileAttachment`在其属性中`id`并插入 AFTER 记录。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-23T13:57:06.653

你只需要使用

```
 <insert id="insert" parameterType="com.mycom.myproject.db.mybatis.model.FileAttachment" useGeneratedKeys="true" keyProperty="id" keyColumn="id"> 
```

MyBatis 中的插入标签内无需执行选择查询。它为您提供了插入操作的新参数。这里定义 useGeneratedKeys="true", keyProperty="id", keyColumn="id"。您可以通过以下方式检索 id 的值

```
 FileAttachment fileAttachment=fileAttachmentMapper.insertSelective(fileAttachment);
  Integer id=fileAttachment.getId(); 
```

使用 fileAttachment.getId() 是因为在插入标签中定义了 keyColumn="id"，您将在 FileAttachment 的 fileAttachment 引用中获得所有返回值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-11T10:54:29.523

其实MyBatis已经提供了这个功能。你可以使用选项：“useGeneratedKeys”来获取最后插入的id。

这是MyBatis的解释。（如果你想了解更详细的信息，你可以去MyBatis官方页面）。

> useGeneratedKeys (insert and update only) 这告诉 MyBatis 使用 JDBC getGeneratedKeys 方法来检索由数据库内部生成的键（例如，像 MySQL 或 SQL Server 这样的 RDBMS 中的自动增量字段）。默认值：假

如果您使用的是 xml：

```
<insert id="" parameterType="" useGeneratedKeys="true"> 
```

如果您使用注释：

```
@Insert("your sql goes here")
@Options(useGeneratedKeys = true, keyProperty = "id", keyColumn = "id")
int insert(FileAttachment fileAttachment) throws Exception; 
```

完成插入操作后，将调用 fileAttachment 的**setId() 方法，并将其设置为最后插入记录的 id**。您可以使用 fileAttachment 的**getId()**来获取最后一个插入 ID。

我希望这会对你有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T08:04:28.587

我认为返回的 1 是指更新/插入的记录数。我认为 id 是在您传递给 insertSelective 调用的 fileAttachment 参数上设置的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-19T15:59:33.107

我希望在编写器中，您可以拥有一个自定义复合编写器，并且在那里您可以获得插入的 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-03T19:53:54.427

（1）添加到Ruju的答案，在插入语句中，您需要定义属性useGeneratedKeys = true，parameterType =“object”，keyProperty =“objectId”和keyColumn =“objectId”应该设置为相同的主键列名称（objectId ) 来自存储对象记录的表。主键列 (objectId) 应在数据库表中设置为 AUTO_INCREMENT。

(2) 当insert语句被触发时，新生成的主键(objectId)会存储在object中，你可以通过objectId(object.getObjectId()或object.objectId)这个方法访问objectId属性来获取它。现在这应该给出准确的和新生成的主节点。它对我有用....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-19T11:31:25.310

需要使用 codeGenerator 进行配置：

```
 <table schema="catalogue" tableName="my_table" >
        <generatedKey column="my_table_id" sqlStatement="JDBC" identity="true" />
        <columnOverride column="my_table_id" isGeneratedAlways="true"/>
    </table> 
```

[http://www.mybatis.org/generator/configreference/generatedKey.html](http://www.mybatis.org/generator/configreference/generatedKey.html)

代码生成后，插入包括 id 字段的自动更新

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-10T06:31:44.553

```
After struggling alot, I got the following solution:
Use Case: if you are using sequence for generating primary key. and you want the id inserted to db

in xml:

<insert id="createEmployee"
        parameterType="com.test.EmployeeModel">
        <selectKey keyProperty="employeeId" keyColumn="EMPLOYEE_ID"
            resultType="Long" order="BEFORE">
            select EMPLOYEE_SEQ.NEXTVAL FROM DUAL
        </selectKey>
        INSERT INTO EMPLOYEE(EMPLOYEE_ID,EMPLOYEE_NAME)
        VALUES
        (#{employeeId,jdbcType=NUMERIC},#{EMPLOYEE_NAME,jdbcType=VARCHAR})
    </insert>

in java side:
interface
public void createEmployee(EmployeeModel request);

in dao   
        getMapper().createEmployee(model);
        getClient().commit();
        Long employeeId= model.getEmployeeId();
        System.out.println("Recent Employee Id: "+employeeId) 
```

# javascript - 使用 HTML/Javascript 表单使用 ActiveXObject 创建带有嵌入图像的 Outlook 电子邮件

> ID：12103607
> 
> 赞同：1
> 
> 时间：2012-08-24T05:30:34.003
> 
> 标签：javascript, html, outlook-2007, activexobject

下午所有，

我需要能够通过在工作站桌面上本地运行的 html 表单将图像嵌入到 Outlook 电子邮件中。没有互联网接入。所有机器都是带有 Outlook 2007 的 Windows。下面的代码非常适合创建带有 HTML 正文的电子邮件，但我还需要将图像嵌入到存储在用户本地文档文件夹中的电子邮件中。

有没有办法找出用户文档文件夹的目录路径？以及如何嵌入图像以便它们显示在正文内容中而不是作为附件？

```
<script type="text/javascript">
function OpenOutlookDoc()
{
try
{

var outlookApp = new ActiveXObject("Outlook.Application");
var nameSpace = outlookApp.getNameSpace("MAPI");
mailFolder = nameSpace.getDefaultFolder(6);
mailItem = mailFolder.Items.add('IPM.Note.FormA');
mailItem.Subject="a subject test";
mailItem.To = document.getElementById("name").value;
mailItem.HTMLBody = document.getElementById("name").value + " " + "<b>bold</b>";
mailItem.display (0); 
}
catch(e)
{
alert(e);
// act on any error that you get
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-26T14:32:19.467

```
var outlookApp = new ActiveXObject("Outlook.Application");
var nameSpace = outlookApp.getNameSpace("MAPI");
mailFolder = nameSpace.getDefaultFolder(6);
mailItem = mailFolder.Items.add('IPM.Note.FormA');
mailItem.Subject="a subject test";
mailItem.To = document.getElementById("name").value;
mailItem.Attachments.Add("C:\pictest.jpg");
 mailItem.HTMLBody = "<html><p>This is a picture.</p><img src='cid:pictest.jpg' height=480 width=360>";
mailItem.display (0); 
```

# ios - 在自定义容器控制器中旋转后视图未调整大小

> ID：12103610
> 
> 赞同：5
> 
> 时间：2012-08-24T05:30:38.570
> 
> 标签：ios, uiviewcontroller

我制作了一个测试应用程序来熟悉制作自定义容器视图控制器。如果我在应用程序首次启动时或切换到不同的视图控制器后旋转设备，新视图会按照我的意图调整大小以占据整个屏幕。但是，如果我在应用程序启动后旋转，然后切换到新的视图控制器，视图将保持其纵向大小，而不是变得更短和更宽（实际上它略有不同——它从 320,460 变为 300,480）。主视图控制器在应用程序委托（无 xib）中分配初始化并设置为窗口的根视图控制器。这是我在 MasterViewController（自定义容器控制器）中的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    WelcomeController *welcome = [[WelcomeController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.currentController = welcome;
    [self addChildViewController:welcome];
    [self.view addSubview:welcome.view];

    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeft:)];
    swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.view addGestureRecognizer:swipeLeft];
}

- (void)swipeLeft:(UISwipeGestureRecognizer *)gesture {
    if (gesture.state == UIGestureRecognizerStateRecognized) {
        UIActionSheet *sheet =[[UIActionSheet alloc] initWithTitle:@"Select A Destination" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"welcome",@"Play",@"Scores", nil];
        [sheet showInView:self.view];
    }
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    switch (buttonIndex) {
        case 0:{
            if ([self.currentController class] != [WelcomeController class] ) {
                WelcomeController *welcome = [[WelcomeController alloc] initWithNibName:@"ViewController" bundle:nil];
                [self addChildViewController:welcome];
                [self moveToNewController:welcome];
            }
            break;
        }
        case 1:{
            if ([self.currentController class] != [PlayViewController class] ) {
                PlayViewController *player = [[PlayViewController alloc] initWithNibName:@"PlayViewController" bundle:nil];
                [self addChildViewController:player];
                [self moveToNewController:player];
            }
            break;
        }
        case 2:{
            if ([self.currentController class] != [HighScores class] ) {
                HighScores *scorer = [[HighScores alloc] initWithNibName:@"HighScores" bundle:nil];
                [self addChildViewController:scorer];
                [self moveToNewController:scorer];
            }
            break;
        }
        case 3:
            NSLog(@"Cancelled");
            break;

        default:
            break;
    }
}

-(void)moveToNewController:(id) newController {
    [self.currentController willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentController toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{}
     completion:^(BOOL finished) {
         [self.currentController removeFromParentViewController];
         [newController didMoveToParentViewController:self];
         self.currentController = newController;
     }];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;//(interfaceOrientation == (UIInterfaceOrientationPortrait | UIInterfaceOrientationLandscapeLeft));
} 
```

发生这种情况的任何想法（我不知道这是否意味着主视图控制器的视图没有调整大小，但是当我得到这种非调整大小的行为时，手势识别器仅在窄视图中响应，而不是在整个屏幕上响应)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:27:59.963

您没有向您的子视图控制器发送旋转消息。至少不在您发布的代码中。切换子控制器后，您甚至可以使用 [self.currentController removeFromParentViewController] 从 ChildViewControllers 数组中删除前一个子控制器，因此即使您实现**- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers**，您的 ParentViewController 中始终只有一个 ChildViewController。

我已经完成了这项工作，所以我将向您粘贴我是如何做到的。首先，我创建了所有的 ViewController，将它们作为子视图控制器添加到 ParentViewController。然后调用 didMoveToParentViewController: 方法。

```
//Controller1
Controller1 *c1 = [[Controller1 alloc] init];
c1.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[self addChildViewController:c1];
[c1 didMoveToParentViewController:self];

//Controller2
Controller2 *c2 = [storyboard instantiateViewControllerWithIdentifier:@"c2"]; 
index.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[self addChildViewController:c2];
[c2 didMoveToParentViewController:self];
c2.view.frame = m_contentView.frame;
[self.view addSubview:c2.view];   //It is in initial screen so set it right away
m_selectedViewController = c2;

//Controller3
Controller3 *c3 = [storyboard instantiateViewControllerWithIdentifier:@"c3"];
compare.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[self addChildViewController:c3];
[c3 didMoveToParentViewController:self];

m_controllers = [NSArray arrayWithObjects:c1, c2, c3, nil];  //Hmm now i think this is not needed, I can access viewController directly from self.childViewControllers array 
```

然后我实施

```
- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers
{
    return YES;
} 
```

使用此代码切换到子视图控制器

```
if (value < m_controllers.count)
{
    UIViewController *contentViewController = [m_controllers objectAtIndex:value];

    contentViewController.view.frame = m_contentView.frame;

    [self transitionFromViewController:m_selectedViewController toViewController:contentViewController duration:0 options:UIViewAnimationOptionTransitionNone animations:nil completion:^(BOOL finished) {
        m_selectedViewController = contentViewController;
        }
     ];
} 
```

这应该足够了。但是我对此有一些问题，所以我自己向不活跃的 Childs 发送轮换消息。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    for (UIViewController *vc in m_controllers) 
    {
        if(vc != m_selectedViewController)
            [vc willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    }
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    for (UIViewController *vc in m_controllers) 
    {
        if(vc != m_selectedViewController)
            [vc willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
    }
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    for (UIViewController *vc in m_controllers) 
    {
        if(vc != m_selectedViewController)
            [vc didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T16:39:16.653

手动添加

`self.view.autoresizesSubviews = YES;`

里面

```
- (void)viewDidLoad 
```

它解决了问题，

出于某种原因，我猜没有使用故事板中的值

# scala - 为什么在 Salat 中 grater[BigThing].asDBObject(v) 的值将嵌套字段变成了数组？

> ID：12103611
> 
> 赞同：4
> 
> 时间：2012-08-24T05:30:53.017
> 
> 标签：scala, mongodb, casbah, salat

这是我正在使用的导入：

```
import com.novus.salat._
import com.novus.salat.global.ctx
import net.liftweb.json._
import com.mongodb.casbah.Imports._ 
```

我有两个案例类：

```
case class BigThing (thing: Thing  )
case class Thing(x:Int, y:Int) 
```

我的刨丝器在单独刨丝时正确地生成了一个带有字段名称的 DBObject：

```
implicit val formats = DefaultFormats

val t = parse("""{"x":5, "y":6}""").extract[Thing]
println("t " + t)
val dboT = grater[Thing].asDBObject(t)
println("dboT " + dboT) 
```

这打印：

```
 t Thing(5,6)
 dboT { "_typeHint" : "Thing" , "x" : 5 , "y" : 6} 
```

但是当对 BigThing 进行光栅化时，Thing 的字段名称会变成一个数组：

```
 val bt = parse(""" { "thing": {"x":5, "y":6} } """).extract[BigThing]
  println("bt " + bt)
  val dboBt = grater[BigThing].asDBObject(bt)
  println("dboBt " + dboBt) 
```

这打印：

```
bt BigThing(Thing(5,6))
dboBt { "_typeHint" : "BigThing" , "thing" : [ 5 , 6]} 
```

这是一个错误吗？我做错了什么？

* * *

我的 build.sbt 字段是这样的：

```
name := "hello"

resolvers ++= Seq(
  "ScalaNLP Maven2" at "http://repo.scalanlp.org/repo",
  "Spray repo" at "http://repo.spray.cc/",
  "Typesafe repo" at "http://repo.typesafe.com/typesafe/releases/",
  "Sonatype OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots")

libraryDependencies ++= Seq(
  "com.novus"                  %% "salat-core"      % "1.9.1-SNAPSHOT",
  "cc.spray"                   %% "spray-json"      % "1.1.1",
  "com.mongodb.casbah"         %  "casbah_2.9.1"    % "2.1.5-1",
  "net.liftweb"                %% "lift-json"       % "2.5-SNAPSHOT"
) 
```

# javascript - jquery my else if part 不工作...有什么问题？

> ID：12103619
> 
> 赞同：0
> 
> 时间：2012-08-24T05:32:01.537
> 
> 标签：javascript, jquery

我正在使用 jQuery 的`map`函数进行 DOM 操作。使用这个我试图将一个元素附加到一个表单中。

它只能正常工作一次；这意味着我只在`if` 部分中获得结果，我无法从该`else if`部分中获得任何价值。我的功能有什么问题，或者我的方法有什么问题？

我的数据：

```
"fields":[
            {
               "id":"firstname",
               "label":"First Name",
               "name":"fname",
               "type":"text",
               "value":""
            },
            {
               "id":"email",
               "label":"Email",
               "name":"email",
               "type":"text",
               "value":""
            },
            {
               "id":"countries",
               "label":"Country",
               "name":"countries",
               "type":"select",
               "options":[
                  {
                     "value":"",
                     "text":"Select Country"
                  },
                  {
                     "value":"in",
                     "text":"India",
                      "selected":"true"
                  },
                  {
                     "value":"us",
                     "text":"United Stated"

                  },
                  {
                     "value":"uk",
                     "text":"United Kingdom"
                  },
                  {
                     "value":"cn",
                     "text":"Canada"
                  }
               ]
            },
            {
               "id":"submit",
               "name":"submit",
               "type":"submit",
               "value":"Submit"
            }
         ] 
```

我的功能：

```
 var processModules = function (mData) {
        $.map(mData, function (val,i) {
            $(val.container).append(
                $(val.type === 'content' || val.type === 'navigation' ?
                $('<div />',{
                    'class':val.attributes['class'],
                    id:val.attributes.id})
                .append(val.title ? $('<h2 />',{text:val.title}) : "")
                .append(val.subtitle ? $('<h3>',{text:val.subtitle}) : "")
                :
                val.type === 'form' ? $('<form />',{
                    id:val.attributes.id,
                    'class':val.attributes['class'],
                    action:val.action,
                    name:val.name
                })
                .append($('<legend />',{text:val.title}))
                .append(
                    $.map(val.fields, function (val,i) {
var element;
                        if(val.id) {
                            console.log(val.id); // getting values and appending elements
                        }
                        if (val.label) {
                            element = $('<label />',{text:val.label}); //  am not getting any value here..
                        }
                        if (val.type) {
                            element = $('<input />',{id:val.id}) // I am only getting value here..
                        }
                    } )
                )
                : ""));
        } )
    } 
```

问题是什么？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:36:57.257

`else if`只有在前面的 if/else if 语句不是时才会被调用。例如：

```
if (true) {
    // This code gets run
}

else if (true) {
    // This code never will
} 
```

考虑到这一点，将您的 if 语句更改为如下所示：

```
if(val.id) {
    console.log(val.id);
}

if (val.label) {
    console.log(val.label);
}

if (val.type) {
    console.log(val.type);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:37:59.127

您的代码按预期工作，如果第一个 if 评估为 true，您将无法进入 else 部分。一旦`if(val.id)`返回 true，其余的都将被跳过

# java - 使用jlayer更改音量java？

> ID：12103624
> 
> 赞同：0
> 
> 时间：2012-08-24T05:32:30.567
> 
> 标签：java, volume, jlayer

我已经搜索并阅读了其他主题，但我仍然无法解决我的问题。我有一个 java 主类和一个 java jframe。我想添加 jslider 来改变我的 mp3 播放器的音量。我应该怎么办？

**my_player2_func**

class my_player2_func{ 静态播放器播放器；

```
static void play() {
    try {
        FileInputStream fe = new FileInputStream(my_player2_main.str);
        player = new Player(fe);
    } catch (Exception ex) {
        System.out.println(ex);
    }

    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                player.play();
            } catch (Exception ex) {
                System.out.println(ex);
            }
        }
    }).start();
}     

static void stop() {
    if (player != null)
        player.close();
}    } 
```

**my_player2_main**

```
public my_player2_main() {
    initComponents();     
}
static String str;                              

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    my_player2_func.play();
}                                        

private void jSlider1StateChanged(javax.swing.event.ChangeEvent evt) {//what should i do here?} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:40:27.357

JLayer 是一个*解码器*。根据其定义，它对音量一无所知，那是播放声音的音频硬件的工作。

您的问题源于您使用 Player 和默认 JavaSoundAudioDevice 类的事实，这些类是*如何*播放 MP3 的简短示例，而不是完整音频播放器的构建块。

您必须复制或修改 JavaSoundAudioDevice 的源（JLayer 源的一部分）并破解它以支持音量控制。瞧，您可以控制音量。

# java - 如何在 js 中使用 websocket 协议？

> ID：12103626
> 
> 赞同：1
> 
> 时间：2012-08-24T05:32:38.943
> 
> 标签：java, javascript, http, websocket, tomcat7

```
ws = new MozWebSocket("ws://localhost:8080/html5WebSocket/mywebsocket.do"); 
```

我使用上面的代码执行 websocket 请求，但发现连接立即关闭，调用方法 onclose。

```
ws.onclose = function(evt) {
        alert("close");
    }; 
```

firebug 的 net 选项卡显示从浏览器到 tomcat 的请求 url 是**http** ://localhost:8080/html5WebSocket/mywebsocket.do。我希望 url 是**ws** ://localhost:8080/html5WebSocket/mywebsocket.do。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:57:58.767

MozWebSocket 在 Firefox 6-10 中使用，如果您使用较新的版本，请使用 WebSocket 作为构造方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:23:13.043

使用 Web 套接字时看到连接是正常的`http://...`，因为 Web 套接字握手与 HTTP“升级”请求无法区分。

问题可能出在服务器端，而不是客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:19:06.160

我在 javascript 中使用“WebSocket”类。它适用于 Safari、Firefox 和 Chrome。这是一个例子：

```
var ws = new WebSocket(wsUrl);
ws.onopen = function() {
    ...
};
ws.onmessage = function(evt) {
   ...
};
ws.onclose = function() {
   ...
}; 
```

在服务器端，我使用 Tomcat & Jetty-Websocket (http://wiki.eclipse.org/Jetty/Feature/WebSockets)

# websocket - SPDY 作为 Websockets 的替代品？

> ID：12103628
> 
> 赞同：25
> 
> 时间：2012-08-24T05:33:09.253
> 
> 标签：websocket, spdy

首先 - 我知道 SPDY 和 Websockets 不是一回事，你可以像使用 HTTP 等一样在 SPDY 上运行 Websockets。

但是 - 我想知道如果我试图提供一个也支持服务器推送（通过同一连接的双向调用）的 REST（类似）API，SPDY 是否会成为 websockets 的可行替代品。

我当前的原型使用 websockets (node+socket.io)，并且工作正常。但是，我对 websockets 的问题是我必须想出自己的 JSON 协议来路由进出服务器的请求。我更愿意在请求中使用 REST 样式的 URI 和标头，这更适合基于 REST 的架构。SPDY 似乎会更好地支持这一点。

另外，由于缺少标头，我担心 websocket 不能很好地适应我们的部署网络，并且认为 SPDY 会再次更适合。

但是，除了将文件推送到浏览器之外，我还没有看到很多双向 SPDY 请求的示例。我想将事件和数据推送到浏览器，例如：

```
Content-Type: application/json
{
   "id": "ca823f3e233233",
   "name": "Greg Brady"
} 
```

但我不清楚浏览器/Javascript 会如何“监听”这些内容并对它们做出反应，就像我对 WebSocket 和 socket.io API 所做的那样。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-24T06:08:19.177

让我们从头开始：为什么要在 SPDY 上运行 WebSockets，而不是进行 HTTP 升级？如果您将 HTTP 连接升级到 WS，那么其他任何东西都无法使用该 TCP 流 - WS 连接可能是空闲的，但连接仍然被阻止。使用 SPDY，您可以在同一个底层 TCP 流上复用多个请求/响应，以及一个 websocket 连接（甚至多个）。实际上，截至 2012 年 7 月，WS over SPDY 仍在进行中，因此您将不得不等待将 SPDY 用于 WebSockets - 但希望不会太久！

但是让我们假设支持存在......不清楚如何从 JavaScript 中监听“SPDY Push”的原因是因为没有办法做到这一点！推送的资源会进入您的浏览器缓存 - 不多也不少。如果您需要将数据流式传输到您的 javascript 回调，那么 WebSockets 或服务器发送事件 (SSE) 就是答案。

所以，把它们放在一起：

*   HTTP 为单个小请求（标头等）增加了很多开销
*   WebSockets 为您提供了一个低开销的通道，但需要您实现自己的路由
*   SPDY 将显着降低小型 HTTP 请求的开销和成本（赢）
*   SSE 是将数据推送到客户端的一个很好、简单的替代方案（现在可以通过 SPDY 工作）

您可以使用 SPDY+SSE 来实现您的目标，并且所有这些通信都可以在同一个 TCP 通道上运行。SPDY 向服务器请求，SSE 从服务器推送。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T14:41:36.343

首先澄清一下：

*   基本 WebSocket 协议 (IETF 6455) 不是分层`onto`HTTP。WebSocket 连接的初始握手是 HTTP 兼容的，但是一旦握手完成，该协议就是一个帧的双向全双工连接，开销非常低（通常每帧标头只有 2 个字节）。

*   基于 SPDY 的 WebSocket 想法是一个可能会或可能不会看到曙光的[提议。](https://docs.google.com/document/d/1zUEFzz7NCls3Yms8hXxY4wGXJ3EEvoZc3GihrqPQcM0/edit)在这种情况下，WebSocket 实际上是在 SPDY 上分层的。由于 SPDY 与 HTTP 相比，初始连接/握手可能发生得更快，但是，由于 WebSocket 标头字段映射到 SPDY 标头字段，因此数据帧将具有更多开销。

SPDY 旨在成为 HTTP 的更有效替代品。WebSocket 是一种完全不同的野兽，它可以在客户端和服务器之间实现极低延迟的双向/全双工消息传递。

如果您对使用简单 API 的 server-push 感兴趣并且不需要超低延迟，那么您可能会考虑具有简单且类似于 WebSocket API 的 API 的服务器发送事件。或者您可以查看许多优秀的 Comet 库之一，这些库支持服务器推送，但与上述任何解决方案不同，它会更好地支持旧浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T14:48:31.760

> 但是，我对 websockets 的问题是我必须想出自己的 JSON 协议来路由进出服务器的请求。

出于这个原因，我在 socket.io 上编写了一个瘦 RPC 层，将网络调用包装在 Promise 中。你可以看看[这里](https://github.com/capaj/socket.io-rpc)。

# mysql - RubyOnRails 和 MySQL2 偶尔返回错误 500

> ID：12103629
> 
> 赞同：3
> 
> 时间：2012-08-24T05:33:09.487
> 
> 标签：mysql, ruby-on-rails, activerecord, amazon-web-services, mysql2

我有一个托管在 Amazon EC2 服务器（带有弹性负载均衡器）上的 RubyOnRails 应用程序，该服务器与托管在 Amazon RDS 上的数据库进行通信。

我无法修复应用程序偶尔返回的错误 500：

```
NoMethodError (undefined method `fields' for nil:NilClass):
 activerecord (3.2.8) lib/active_record/connection_adapters/mysql2_adapter.rb:216:in `exec_query' 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:54:40.780

很可能您正在尝试调用返回 nil 的活动记录对象上的方法。

例如，如果您有一个名为 page 的模型并试图获取该页面的字段，即 Page.find(params[:id]).fields 但是在数据库中没有针对具有该 id 的页面的记录，所以您正在尝试调用页面模型的该实例不存在的方法字段。

尝试将方法调用包装在内部，并且 if/else 语句仅在页面（或您尝试调用它的任何类）不为零时才调用方法字段。

# android - 如何在 Android 中创建搜索栏

> ID：12103631
> 
> 赞同：1
> 
> 时间：2012-08-24T05:33:18.800
> 
> 标签：android, android-widget

如果可能的话，谁能指导我如何在android中制作一个简单的搜索栏？我有点迷失了[这个](http://developer.android.com/guide/topics/search/search-dialog.html#SearchableConfiguration)链接，我希望有人可以帮助我。是否有人可以帮助我解释如何创建搜索栏或让我更好地理解教程实现这一切？就像我不确定将他们给你的所有代码放在什么文件中，什么不是。谢谢！

# ruby-on-rails-3 - 如何为用户提供重新发送验证电子邮件的选项？

> ID：12103632
> 
> 赞同：1
> 
> 时间：2012-08-24T05:33:27.443
> 
> 标签：ruby-on-rails-3, email-verification

我正在研究 rails3 应用程序。在我的应用程序中，当用户第一次注册时，已向用户发送了一封带有验证链接的电子邮件，单击该链接后，我更新了 status_id 并将用户重定向到登录页面。这是我的代码：

令牌生成代码：

```
require 'digest/sha2'
class Subscription < ActiveRecord::Base

  validate :ids_must_be_present, :on => :create 

 def ids_must_be_present
    if status_id==0 
      generate_token
    else
      errors.add('Something gone wrong')
    end
  end

  def generate_token
    self.token = encrypt_string(id, generate_salt)
  end

  def encrypt_string(id, salt)
    Digest::SHA2.hexdigest(id.to_s + "prftnxt" + salt)
  end

  private

  def generate_salt
    self.object_id.to_s + rand.to_s + company_id.to_s  + Time.now.to_i.to_s
  end
end 
```

使用链接发送电子邮件的代码：

```
def email_verify
   if subscription = Subscription.find_by_id_and_token(params[:id], params[:token])
      subscription.update_attribute(:status_id, 1)
      redirect_to("/login/index", :notice => "Thanks, email successfully verified")
   else
     flash.now[:notice] = "Your email has not verified yet. Please verify your email by clicking the link we have sent you."
   end
  end 
```

带有验证链接的电子邮件模板：

```
Hello <b><%= @user.username %></b>,
<br/>
<br/>
Thank you for signing up .
<b> Please Verify your email</b>

    <%= link_to "verify", "http://localhost:3000/login/email_verify?token=#{@subscription.token}&id=#{@subscription.id}"%>

</br></br>
</br> 
```

现在一切都很好，现在我的客户想要如果用户没有收到验证电子邮件，那么我们在某些地方提供选项或链接以请求重新发送验证邮件。

我正在考虑在登录尝试时显示 flash msg，并带有请求电子邮件的链接。但我很困惑我该如何做到这一点，任何示例或帮助都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:23:13.160

嗨朋友们，我有一个解决方案，我在登录控制器中使用了一种方法来检查电子邮件是否已验证，如果未验证，则会显示一条消息。该消息包含链接。当用户单击该链接时，我会重新发送验证邮件。这是我的代码：

```
subscription = Subscription.find_by_company_id_and_plan_id(current_company.id, current_company.plan.id)
      link = "<a href= '/login/resend_verification_email'>Click</a>"
      if subscription.status_id == 0
         flash[:error] = "Your email is not verified. Please verify before login. <br/> #{link} here to resend verification email.".html_safe 
         redirect_to :back
      end 
```

在登录控制器中：

```
def resend_verification_email
    subscription = Subscription.find_by_company_id_and_plan_id(current_company.id, current_company.plan.id)
    Email.verify_email(current_user, subscription).deliver
    redirect_to :back
    flash[:success] = 'Verification email has been resend successfully, please check your inbox.' 
  end 
```

# asp.net - 在 ASP.NET 母版页中使用多个 contentPlaceHolders

> ID：12103635
> 
> 赞同：0
> 
> 时间：2012-08-24T05:33:47.337
> 
> 标签：asp.net, master-pages, contentplaceholder

我正在创建一个在不同页面中有不同菜单的网站。所以我正在创建一个母版页，其中包含 3 个内容占位符，分别用于页面标题、菜单和内容。我无法为此母版页创建内容页。任何帮助，将不胜感激。如果我是新手，如果我没有遵循正确的指导方针，请原谅我。

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="PTS.Master.cs" Inherits="PTS.UI.Site1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Patient Tracker System</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="screen" />
    <style type="text/css">
        .style1
        {
            font-size: small;
        }
    </style>
</head>
<body>
<section id = "main>
 <asp:ContentPlaceHolder ID="ContentPlaceHolderMain" runat="server">
    <form id="form1" runat="server">
    <div id="wrapper">
    <div id="page">
        <div id="page-bgtop">
            <div id="page-bgbtm">
                <div id="content">
                   <!-- Enter Your Contents Here-->
                    <asp:ContentPlaceHolder ID="ContentPlaceHolderContent" runat="server">
                    </asp:ContentPlaceHolder>
                </div>
                <!-- end #content -->
                <div id="logo">
                    <h1 class="style1"><a href="#">Patient Tracker System</a></h1>
                    <br />
                    <br />
                     <asp:ContentPlaceHolder ID="ContentPlaceHolderPageHead" runat="server">
                    </asp:ContentPlaceHolder>

                </div>
                <div id="sidebar">

                    <%--Paste your Customized Menus--%> 
                    <asp:ContentPlaceHolder ID="ContentPlaceHolderMenu" runat="server">
                    </asp:ContentPlaceHolder>
                </div>
                <!-- end #sidebar -->
                <div style="clear: both;">&nbsp;</div>
            </div>
        </div>
    </div>
    <!-- end #page -->
</div>
<div id="footer">
    <p>Copyright (c) 2012 Patient Tracker System.</p>
</div>
<!-- end #footer -->
    </form>
     </asp:ContentPlaceHolder>
    </section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:36:57.190

`ContentPlaceHolder`母版页上的a 内的任何内容都是默认内容。“默认内容”的意思是，如果您未`ContentPlaceHolder`在子页面上指定内容，则将呈现默认内容。在某些情况下，这对于减少代码重复很有用。

但是，您将整个`<form>`包裹在里面`ContentPlaceHolderMain`，这不是一个好的模式。

**您的母版页看起来基本正确，但您可能希望删除`ContentPlaceHolderMain`开始和结束标记。**

然后，您将留下`ContentPlaceHolder`您在问题中提到的 3 s。

此外，您的评论块中有一个错字：

```
<%--Paste your Customized Menus--%> 
```

应该是这样的：

```
<!-- Paste your Customized Menus --> 
```

# java - java - 如何在java中12小时后触发/安排一个事件

> ID：12103636
> 
> 赞同：2
> 
> 时间：2012-08-24T05:33:48.050
> 
> 标签：java, hibernate, struts2

我们正在开发用于预订机票、巴士票等的旅行应用程序。对于机票，最初将生成 PNR（乘客姓名记录），通过该 PNR 确认机票。

问题是，如果在生成 PNR 后 12 小时内未确认客票，则必须取消 PNR。否则，我们将面临 Air GDS 供应商的处罚。

到目前为止，我们已经编写了每 15 分钟执行一次此操作的 Cron 调度程序。我们这样做有问题，也面临处罚。我不能每分钟都运行调度程序。

如果未预订，在生成 12 小时后如何取消 PNR。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T05:36:06.497

由于这被标记为 Java，我建议您查看以下内容之一

*   [API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html) _[`java.util.Timer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)
*   [石英库](http://quartz-scheduler.org/)。

这些是调度将来要执行的任务的标准解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T05:40:45.513

除了 aioobe 建议之外，我还会查看[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)和[Canceling scheduled executor](https://stackoverflow.com/questions/7178205/cancelling-scheduled-executor)，因为我很确定这将是下一个问题；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:43:25.940

您可以通过使用`Timer`和来做到这一点`TimerTask`。

```
 1\. Write the code to fire an event in Timertask. 
 2\. Schedule the TimerTask after 12 hours using schedule() method. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T05:47:26.140

您可以使用[Quartz 调度程序](http://quartz-scheduler.org/)

你检查过异步作业调度吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T05:49:42.163

aioobe 为解决此类问题提供了一些很好的参考。但是，如果您想解决问题而不必担心如果 JVM 需要关闭和重新启动时可能会消失的计时器或其他瞬态事物，我建议您还考虑一种简单的方法：

```
public class PNRExpirationThread extends Thread {
    @Override
    public void run() {
        while (true) {  //or while !stop, or while Server.isRunning(), you get the idea
            try {
                Thread.sleep(30000);  //wait 30 seconds; adjust this to your liking
                //it's pseudo-SQL, but you get the idea; I'm assuming your data model has the required fields for this to work
                Database.executeTxn("DELETE FROM pnrRecords WHERE NOW() - createDate > 12h AND confirmed = 0");  
            }
            catch (Throwable ignored) {
            }
        }
    }
} 
```

然后，将一些代码添加到服务器的启动/初始化例程中，例如：

```
//keep a reference to this if you want to terminate the thread gracefully at shutdown time
new PNRExpirationThread().start(); 
```

然后您的平台将每隔 30 秒自动查询并删除任何超过 12 小时的记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T05:40:54.863

[Timer.schedule(TimerTask, long)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long%29)允许您安排任务在延迟一段时间后执行（在您的情况下为 12 小时）。但是，不能保证在所需的时间点执行。从文档：

> 此类不提供实时保证：它使用 Object.wait(long) 方法安排任务。

它可能会也可能不会如你所愿。

# ajax - a4j:poll - 重新加载数据模型

> ID：12103641
> 
> 赞同：2
> 
> 时间：2012-08-24T05:34:17.560
> 
> 标签：ajax, jsf, jsf-2, richfaces

我正在尝试使用`a4j:poll`组件进行 ajax 在一段时间后重新加载数据表。它工作正常，但是当表自动重新加载并且我在最后一列中使用工具（编辑/删除行）时，数据表（所有行）消失了，我必须手动加载它（使用`h:commandButton`）..

这是我的代码的一部分：

```
<h:form>
  <a4j:poll id="poll" interval="30000" action="#{bean.load}" enabled="#{bean.pollEnabled}" render="list" />
</h:form>

<h:form id="list" ...>
 <rich:dataTable id="table" var="item" value="#{bean.model}">
 ... 
```

调用相同加载方法的按钮：

```
 <h:commandButton id="btn" action="#{bean.load}" ... /> 
```

当我使用按钮重新加载它时，我可以使用最后一列中的工具。你不知道为什么？

![在此处输入图像描述](../Images/52bb3a788127289e75cc2c2e5be075bb.png)

**更新：**

*   似乎在第一种情况下（`a4j:poll`），当使用编辑/删除时，bean的构造函数被调用........
*   豆是`@ViewScoped`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:47:50.853

> *似乎在第一种情况下（a4j：poll），当使用编辑/删除时，bean的构造函数被调用*

我不做 RichFaces，但我*猜*这个问题在某种程度上与[JSF 问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)相关，这会导致其他表单的视图状态在由单独表单发起的 ajax 请求期间丢失（并且实际上也会导致支持 bean 的重建与其他形式相关联）。这也被描述为[commandButton/commandLink/ajax action/listener method not invoked or input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)的第 7 点。

在您的特定情况下，`<a4j:poll>`以与表格相同的形式放置应该可以解决问题。我不确定为什么首先将其放在单独的表格中，但这似乎没有必要。

# c++ - QRCodeSignature 类不允许记录语句

> ID：12103645
> 
> 赞同：0
> 
> 时间：2012-08-24T05:34:36.273
> 
> 标签：c++, compiler-errors, linker-errors, qr-code

我有一个 QRCode 签名类，我希望放置日志记录语句，我从构造函数部分开始：

```
QRCodeSignature::QRCodeSignature(std::vector<WacomType::PEN>* theSigpoints, int theInterval, int theVersion) : sigpoints(theSigpoints), interval(theInterval), version(theVersion) {
Logging::log(QRCodeSignature::logger, Logging::Entry, QRCodeSignature::CLASSNAME, "QRCodeSignature"); 
```

我在 QRCodeSignature.cpp 中有以下内容

```
 #include "QRCodeSignature.h"
  #include <iostream>
  #include <cstdlib>
  #include <stdio.h>
  #include <stdlib.h>
  #include <math.h> 
```

在 QRCodeSignature.hi 中有以下类作为 QRCodeSignature

```
 a constructor
  a virtual destructor
  private:
  static const std::string CLASSNAME;
  static Logging::Logger* logger; 
```

在 QRCodeSignature.cpp 我有

```
 const std::string CLASSNAME = "QRCodeSignature";
 Logging::logger* QRCodeSignature::logger = NULL; 
```

我构建这个项目时的错误[发布]

```
 build/Release/MinGW_1-Windows/QRCodeSignature.o: In function `QRCodeSignature':
 C:\repos\impression\trunk\ProsenseSign/QRCodeSignature.cpp:13: undefined reference to `QRCodeSignature::CLASSNAME'
 collect2: ld returned 1 exit status
 make[2]: *** [dist/Release/MinGW_1-Windows/impression.api] Error 1
 make[1]: *** [.build-conf] Error 2
 make: *** [.build-impl] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:37:23.143

你应该使用

```
const std::string QRCodeSignature::CLASSNAME = "QRCodeSignature"; 
```

代替

```
const std::string CLASSNAME = "QRCodeSignature"; 
```

因为第二个不是`static-member`类的初始化。

# scala - 如何在 Play 中创建自定义操作！2.0 框架？

> ID：12103647
> 
> 赞同：1
> 
> 时间：2012-08-24T05:34:54.240
> 
> 标签：scala, playframework-2.0

我想 `play.api.mvc.Action`在游戏中定制一个：

1.  将解析并返回请求中的一些自定义数据（例如访问令牌或协议缓冲区）
2.  可以与其他动作链接

例如：

```
def something = DecodeAccessToken { token: AccessToken => 
  Action {
    // do something with token
    Ok
  }
} 
```

如果令牌不存在，则`DecodeAccessToken`操作应使用`Unauthorized`或提前返回`BadRequest`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:38:52.943

这不是[Play 中推荐的方法！文档](http://www.playframework.org/documentation/2.0/ScalaActionsComposition)，但我会这样写：

```
def DecodeAccessToken(body: AccessToken => Result)(implicit request: Request[_]): Result = {
  val token: AccessToken = // deserialize token from request
  body(token)
}

def something = Action { implicit request =>
  DecodeAccessToken { token: AccessToken =>
    Ok
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:34:54.240

您可以按如下方式使用基本模板：

```
trait DecodeAccessToken[A] extends Action[A]
object DecodeAccessToken {
  def apply[A](bodyParser: BodyParser[A])(block: AccessToken=>Request[A] => Result) = new DecodeAccessToken[A] {
    def parser = bodyParser
    def apply(req: Request[A]) = {
      val token: AccessToken = //deserialize token from request

      // If there is a problem with the token, do not call `block` below
      // Instead just return Results.BadRequest

      block(token)(req)
    }
  }
  def apply(block: AccessToken => Request[AnyContent] => Result): Action[AnyContent] = {
    DecodeAccessToken(BodyParsers.parse.anyContent)(block)
  }
} 
```

# ruby-on-rails - 如何获取任何网站的所有社交书签？

> ID：12103653
> 
> 赞同：1
> 
> 时间：2012-08-24T05:35:25.070
> 
> 标签：ruby-on-rails, reddit, digg, delicious-api, stumbleupon

我目前正在 Ruby on Rails 中制作一个应用程序，它需要计算任何给定域的所有书签。我考虑过 Stumbles、Diggs、Delicious 和 Reddit 来查找所有书签。有什么办法可以做到这一点？

我已经研究了它们每个的 API，但在那里没有得到任何有用的东西。无论使用哪种营销工具，有没有其他方法可以直接获取网站的所有书签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:28:39.210

使用美味 api 获取与美味相关的社交书签。对于其他人，我不太确定。

# android - 屏幕旋转时Android按钮位置发生变化

> ID：12103657
> 
> 赞同：0
> 
> 时间：2012-08-24T05:36:07.100
> 
> 标签：android

嗨，我是android编程的新手.....

对于我的应用程序，我正在使用图像按钮，它已成功安装在设备上。但是当我旋转屏幕时，所有按钮的位置都会改变......我需要将所有按钮放在屏幕中心......这是我的代码......

```
 android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/testText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FFCC99"
        android:textSize="24dp" />

    <ImageButton
        android:id="@+id/up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="124dp"
        android:layout_marginTop="80dp"
        android:src="@drawable/up" />

    <ImageButton
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/up"
        android:layout_marginRight="200dp"
        android:layout_marginTop="150dp"

        android:src="@drawable/left" />

please help.......

    <ImageButton
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/up"
        android:layout_marginRight="50dp"
        android:layout_marginTop="150dp"
        android:src="@drawable/right" />

    <ImageButton
        android:id="@+id/down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/up"
        android:layout_alignParentRight="true"
        android:layout_marginRight="124dp"
        android:layout_marginTop="80dp"
        android:src="@drawable/down" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:45:42.833

好吧，如果您要为 potrait 和横向模式创建应用程序，那么您必须制作两种不同的布局，否则您可以通过在**清单**文件中添加**screenOrientation**属性来限制您的应用程序仅在 potrait 模式下显示您的应用程序

 **```
android:name=".ListViewImagesActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:40:24.520

将您的布​​局更改为相对布局 - 您还可以为横向和纵向设置不同的布局，由 android 开发人员参考支持多个屏幕，您会以更好的方式理解[http://developer.android.com/guide/practices/screens_support。 html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:42:48.407

为横向和纵向模式创建布局 xml 文件是一种很好的做法。您也可以通过布局更改来操作它，但建议使用两个布局文件。

然后将横向布局文件放在 layout-land 文件夹中，其他放在 layout-port 文件夹中。

更多信息：[点击这里从安卓开发者网站获取更多信息](http://developer.android.com/guide/practices/screens_support.html)**

# python - 仅返回有效条目的递归函数

> ID：12103666
> 
> 赞同：-2
> 
> 时间：2012-08-24T05:37:02.680
> 
> 标签：python

仅返回有效条目的函数。

代码：

```
def test():
    x = input('1' or '0')
    if x == '1'
        x = 'yes'
    elif x == '0'
        x = 'no'
    else:
        print('Error!')
        test()
    return x

x = test()
print(x) 
```

如何确保返回 x 仅返回有效条目（1 或 0）？

目前，如果我输入除 1 或 0 以外的数字，测试函数会调用自身，这将是返回的值，无论在此之后输入什么输入...

为什么会发生这种情况，我该如何纠正这个问题，所以它只返回 1，这将是“是”或“0”，对于函数调用者来说，这将是“否”？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:40:34.693

您没有将递归调用的结果存储在任何地方。你需要改变：

```
else:
    print('Error!')
    test()
return x 
```

至：

```
else:
    print('Error!')
    x = test()
return x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:42:05.207

这将使用循环更直接地编写，并且如果用户犯了超过 1000 个错误，则作为奖励不会失败，但是既然您要问：您的递归调用`test()`正在丢弃递归调用的返回值。你应该这样做`x = test()`。

# java - xalan 验证 java.lang.NoSuchMethodException：对于扩展功能

> ID：12103670
> 
> 赞同：0
> 
> 时间：2012-08-24T05:37:22.880
> 
> 标签：java, validation, xslt, xalan

我尝试验证页面中的数据。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:item="http://www.myspace.com/item"
    xmlns:shop="xalan://my.app.xslt.model.Shop" xmlns:valid="xalan://my.app.xslt.validation.ShopValidator"
    xmlns:exsl="http://exslt.org/common"> 
```

我有一个带有字段的模型，以及带有检查每个字段的方法的类验证器。

并排成一排

```
<xsl:if test="valid:isNotEmptyData(shop:getOwner($item)) != true()">
            <error message="The field OWNER is empty." />
        </xsl:if> 
```

我得到 NoSuchMethodExtension 虽然我有模型

```
public class Shop{
  private String owner;
  public String getOwner(){
    return owner;
  }
} 
```

在验证器类中

```
public static boolean isNotEmptyData(String model){
  retutn model.isEmpty();
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:00:49.310

您的方法`Shop.getOwner()`没有参数，而在 XSLT 中您调用它时就像`shop:getOwner($item))`使用一个参数一样 - XSLT 处理器查找具有一个参数的方法但找不到它，因此会出现错误。

我不确定`getOwner()`应该做什么 - 可能从它的论点中提取一些价值..？在这种情况下，您应该修改它以接受参数并处理它。

顺便一提，

```
valid:isNotEmptyData(shop:getOwner($item)) != true() 
```

可以使用标准 XPath 函数编写为

```
 not(string(shop:getOwner($item))) 
```

（如果字符串非空，则认为字符串为真），或者

```
string-length(shop:getOwner($item)) = 0 
```

# javascript - 文件 API 中的 Javascript 变量范围

> ID：12103672
> 
> 赞同：2
> 
> 时间：2012-08-24T05:37:26.097
> 
> 标签：javascript, scope, fileapi

我有一个带有两个参数的函数：*entry*，一个文件条目（来自拖放源）和*fileName*，所述文件的名称。

我不确定这是否有帮助，但*条目*被声明为：

```
var entry = evt.dataTransfer.items[i].webkitGetAsEntry(); 
```

我想创建一个描述有关此条目的信息的数组，该数组包括文件名、文件大小、以不同单位表示的文件大小以及用于表示所述文件的单位。我在两个不同的点将数组打印到控制台，一次是在 .file 方法内部（如果我使用了不正确的术语，我深表歉意），一次是在外部。当数组在 .file 方法之外时，控制台不会打印数组的值。

我能否就如何解决这个问题以及为什么会发生这种情况寻求帮助？我在 .file 方法之外声明了我的变量，所以我认为我的变量范围是正确的，但显然事实并非如此。

这是我的功能：

```
function getFileSize(entry,fileName)
{
    var fileData = [];
    var i = 0;
    var byteSize = ['B','kB','MB','GB','TB'];

    fileData.push(fileName);

    entry.file(function(file)
    {
        var fsize = file.size;
        var i = 0;
        fileData.push(fsize);

        while(fsize > 1024)
        {
            fsize = (fsize / 1024);
            i++;
        }

        fileData.push(fsize.toFixed(2));
        fileData.push(byteSize[i]);

        console.log(fileData);
    });

    console.log(fileData);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:36:37.237

调用`.file()`是异步的。调用最后`fileData`一个时，尚未填充`console.log(fileData)`。如果你想返回`fileData`给调用者，你还需要进行`getFileSize()`异步：

```
function getFileSize(entry, fileName, callback) {
  ...
  var fileData = [];

  entry.file(function(f) {
    ...
    callback(fileData);
  });
} 
```

# c++ - 附加二进制文件

> ID：12103674
> 
> 赞同：1
> 
> 时间：2012-08-24T05:37:43.250
> 
> 标签：c++, file-io

我必须将数值数据写入二进制文件。由于我处理的一些数据向量的大小可能是几千兆，因此我学会了不使用 C++ iostream。相反，我想使用 C File*。我马上就遇到了一个问题，我需要将一些元数据写入二进制文件的前面。由于最初不知道某些元数据，因此我需要将元数据附加到文件中的适当偏移量。

例如，假设我必须为年、月和日输入一个 uint16_t 表示，但首先我需要跳过第一个条目（用于精度的 uint32_t 值）；

我不知道我做错了什么，但我似乎无法在文件中附加“ab”。这是我写的一个例子：

```
#include<cstdio>

uint16_t year = 2001;
uint16_t month = 8;
uint16_t day = 23;

uint16_t dateArray[]={year , month, day};

File * fileStream;
fileStream = fopen("/Users/mmmmmm/Desktop/test.bin" , "wb");

if(fileStream){

// skip the first 4 bytes
fseek ( fileStream , 4 , SEEK_SET );

fwrite(dateArray, sizeof(dateArray[0]) ,( sizeof(dateArray) / sizeof(dateArray[0]) ), filestream);

fclose(filestream);

}
 // loops and other code to prepare and gather other parameters 
```

// 现在以精度追加文件的前面。

```
uint32_t precision = 32;

File *fileStream2;
fileStream2 = fopen("/Users/mmmmmm/Desktop/test.bin" , "ab"); 

if(fileStream2){

// Get to the top of the file
rewind(fileStream2);

fwrite(&precision, sizeof(precision) , 1 , fileStream2);

fclose(fileStream2);

} 
```

附加数据不写入。如果我将其更改为“wb”，则文件将覆盖。我能够让它与“r+b”一起工作，但我不明白为什么。我认为“ab”是合适的。另外，我应该使用缓冲区还是足够的方法？

感谢您的建议

顺便说一句，这是在 MacOSX 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:42:41.073

由于硬盘驱动器和文件系统的工作方式，在文件中间插入字节非常慢，应该避免，尤其是在处理数 GB 的文件时。如果您的元数据存储在固定大小的标题中，只需确保在开始使用其他数据之前有足够的空间。如果标头的大小可变，则将标头分块。将 1k 的标头空间放在开头，并保留 8 个字节来包含下一个标头块的偏移值，或者为 EOF 保留 0。然后当该块被填满时，只需在文件末尾添加另一个块并将其偏移量写入前一个标题。

至于技术 IO，根据需要使用、、 或的`fopen()`模式。它们的行为都相同，只是略有不同。打开文件进行读写，从第一个字节开始。如果文件不存在会出错。会做同样的事情，但如果文件不存在则创建文件。与 相同，但它以文件末尾的文件指针开头。`r+b``w+b``a+b``r+b``w+b``a+b``r+b`

`fseek()`您可以使用和导航文件`rewind()`。`rewind()`将文件指针移回文件的开头。`fseek()`将文件指针移动到指定位置。你可以在这里阅读更多关于它[的信息。](http://www.cplusplus.com/reference/clibrary/cstdio/fseek/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:02:43.233

“r+b”表示您可以读取和写入文件中的任何位置。在您的第二个代码块中， rewind() 调用将当前位置设置为字节 0，并在此位置完成写入。

如果你使用“a+b”，这也意味着读写访问，但写入都在文件的末尾，所以你不能定位在字节 0，除非创建一个新的空文件。

要以特定字节重新访问文件，只需使用 fseek()。

fseek ( 文件流 , 0 , SEEK_SET ); - 定位到精度值

fseek ( 文件流 , 4 , SEEK_SET ); - 位置到年份值

fseek ( 文件流 , 8 , SEEK_SET ); - 月值的位置

fseek ( 文件流 , 12 , SEEK_SET ); - 持仓日值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T20:04:42.153

对于如此大的文件，重写 gigs 只是为了预先添加几个字节是非常低效的。

最好为每个文件创建一个您需要的元数据的小伴随文件，并且仅当它们作为编辑的一部分被重写时才将元数据字段添加到文件的开头。

这是因为在大多数文件系统上，预先添加到文件非常昂贵。NTFS 为大多数文件提供了第二个数据通道，除了文件管理器和安全扫描程序等 MS 内部程序之外，几乎所有程序都看不到这些文件。您可以轻松编写程序以将元数据添加到该频道，而无需每次都覆盖磁盘上的演出。

# ios - 在 UIScrollView 中并排定位 UIViewControllers

> ID：12103677
> 
> 赞同：3
> 
> 时间：2012-08-24T05:38:01.473
> 
> 标签：ios, xcode, uiviewcontroller, uiscrollview

我有一个主视图控制器，它有一个 UIScrollView 的子视图和另外 2 个 UIViewControllers（每个都有 nibs UIView 和按钮）。使用 addSubView 方法将 UIViewControllers 的 UIView 添加到 UIScrollView 中。而且我想将两个 UIViewController 并排放置。

我有以下代码，但它似乎不起作用。

```
[self scrollView].pagingEnabled = YES;
[self scrollView].contentSize = CGSizeMake(768 * 2, 1024);
[[self scrollView] setDelegate:self];

CGRect frame1;
frame1.origin.x = 0;
frame1.origin.y = 0;
frame1.size = CGSizeMake(768, 1024);

// Model one
oneView = [[OneViewController alloc] initWithNibName:@"OneViewController" bundle:nil];
//oneView.view.frame = frame1;
[self.scrollView addSubview:oneView.view];
oneView.view.frame = frame1;

// Model two

CGRect frame2;
frame2.origin.x = 768;
frame2.origin.y = 0;
frame2.size = CGSizeMake(768, 1024);

twoView = [[TwoViewController alloc] initWithNibName:@"TwoViewController" bundle:nil];
//twoView.view.frame = frame2;
[self.scrollView addSubview:twoView.view];
twoView.view.frame = frame2; 
```

为什么我设置了frame.origin.x后，UIScrollView里面的oneView和twoView在同一个地方？twoView 似乎在 oneView 的顶部，它应该并排放置？知道我在哪里做错了吗？谢谢！

**更新**：这是我在 github 上的完整项目代码：http: [//bit.ly/PLe1Le](http://bit.ly/PLe1Le)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:56:20.587

这种情况开始发生的原因是，任何作为a属性`UIView`值的实例有时都会收到一条消息，将其视图调整为其父视图的大小。`UIViewController``view`

具体来说，`viewDidMoveToWindow:shouldAppearOrDisappear:`当视图控制器添加到窗口时，将调用未记录的方法`view`，就像在此实例中启动应用程序时发生的那样。这时，如果视图控制器的`view`实例是主窗口的大小或更大，它会被调整为其父视图的大小。

原始代码采用从 .xib 加载的两个视图，并将它们的大小调整为 768 * 1024，即窗口大小。这发生**在窗口上调用之前** `-makeKeyAndVisible`，最终触发调整大小。我在应用程序委托中使用 KVO 来观察框架的大小调整；这是调整大小时的堆栈跟踪：

```
* thread #1: tid = 0x1f03, 0x000030f9 scroller`-[ViewController observeValueForKeyPath:ofObject:change:context:] + 105 at ViewController.m:71, stop reason = breakpoint 1.1
    frame #0: 0x000030f9 scroller`-[ViewController observeValueForKeyPath:ofObject:change:context:] + 105 at ViewController.m:71
    frame #1: 0x0093ad91 Foundation`NSKeyValueNotifyObserver + 345
    frame #2: 0x0093a895 Foundation`NSKeyValueDidChange + 438
    frame #3: 0x0092033e Foundation`-[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 131
    frame #4: 0x009cdcb4 Foundation`_NSSetRectValueAndNotify + 187
    frame #5: 0x000e1786 UIKit`-[UIViewController viewDidMoveToWindow:shouldAppearOrDisappear:] + 657
    frame #6: 0x0005310c UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 1040
    frame #7: 0x00052edb UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 479
    frame #8: 0x0005d5ab UIKit`-[UIScrollView _didMoveFromWindow:toWindow:] + 65
    frame #9: 0x00052edb UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 479
    frame #10: 0x0004f692 UIKit`-[UIView(Hierarchy) _postMovedFromSuperview:] + 158
    frame #11: 0x0005446f UIKit`-[UIView(Internal) _addSubview:positioned:relativeTo:] + 1633
    frame #12: 0x0004e14b UIKit`-[UIView(Hierarchy) addSubview:] + 56
    frame #13: 0x0003d550 UIKit`-[UIWindow addRootViewControllerViewIfPossible] + 380
    frame #14: 0x0003d670 UIKit`-[UIWindow _setHidden:forced:] + 280
    frame #15: 0x0003d836 UIKit`-[UIWindow _orderFrontWithoutMakingKey] + 49
    frame #16: 0x0004472a UIKit`-[UIWindow makeKeyAndVisible] + 35
    frame #17: 0x00002575 scroller`-[AppDelegate application:didFinishLaunchingWithOptions:] + 661 at AppDelegate.m:21
    frame #18: 0x00015386 UIKit`-[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1292
    frame #19: 0x00016274 UIKit`-[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 524
    frame #20: 0x00025183 UIKit`-[UIApplication handleEvent:withNewEvent:] + 1027
    frame #21: 0x00025c38 UIKit`-[UIApplication sendEvent:] + 68
    frame #22: 0x00019634 UIKit`_UIApplicationHandleEvent + 8196
    frame #23: 0x0139eef5 GraphicsServices`PurpleEventCallback + 1274
    frame #24: 0x01488195 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    frame #25: 0x013ecff2 CoreFoundation`__CFRunLoopDoSource1 + 146
    frame #26: 0x013eb8da CoreFoundation`__CFRunLoopRun + 2218
    frame #27: 0x013ead84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #28: 0x013eac9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #29: 0x00015c65 UIKit`-[UIApplication _run] + 576
    frame #30: 0x00017626 UIKit`UIApplicationMain + 1163
    frame #31: 0x000022ad scroller`main + 141 at main.m:16 
```

`UIViewController`我们可以通过实例化视图并同时将其添加到滚动视图来验证是否发生这种情况，因为内容视图是的视图实例。`ViewController`我在's实现的末尾添加了以下代码`viewDidLoad`：

```
CGRect frame3 = frame2;
frame3.origin.x = 768.0f * 2.0f;
UIView *thirdView = [[UIView alloc] initWithFrame:frame3];
[thirdView setBackgroundColor:[UIColor redColor]];
[self.scrollView addSubview:thirdView]; 
```

以及将分配内容大小的行更改为：

```
[self scrollView].contentSize = CGSizeMake(768 * 3, 1024); 
```

此视图在期间未设置其框架，`makeKeyAndVisible`并且位于正确的位置。

要解决此问题，我建议在窗口`-makeKeyAndVisible`调用后设置视图层次结构，可能在 viewWillAppear 中（不确定是否会出现相同的问题）或通过其他方式构建代码以延迟滚动的布局看法。或者，稍后重新设置框架以明确撤消此错误。

我希望这有助于解释正在发生的事情，并且我提供的证据清晰可信；似乎您已经针对您的特定情况进行了修复，但希望这个答案可以作为框架不当行为的通用解决方案，当`UIViewController`他们的视图布局在滚动视图中时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:46:09.743

您是否尝试过先将子视图添加到滚动视图，然后设置它们的位置？我发现在另一种情况下，我试图在滚动视图中显示之前向视图添加信息，只是为了让文本字段为空白。视图有一个奇怪的怪癖，即在显示时值可能会返回到它们的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:02:53.387

*我怀疑您的问题是您的两个视图在垂直方向*上太大而无法适应滚动视图的内容大小。您的滚动视图的内容仅为 (768 * 2) x 900。您将两个子视图的大小调整为 768 x 1024。由于它们无论如何都不适合，滚动视图可能只是给我们并将它们都放在原点。将您的第二行更改为：

```
[self scrollView].contentSize = CGSizeMake(768 * 2, 1024); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:28:18.000

从这篇文章中借用一些代码：[UIScrollView added UIViewController as a sub view? 使用 UIPageControl](https://stackoverflow.com/questions/6333784/uiscrollview-adding-uiviewcontroller-as-a-sub-view-with-uipagecontrol?rq=1)，我想我通过使用 self.scrollView.frame.size.width 而不是使用固定值 768 来修复它。

```
[self scrollView].pagingEnabled = YES;
[self scrollView].contentSize = CGSizeMake(self.scrollView.frame.size.width * 2, self.scrollView.frame.size.height);
[[self scrollView] setDelegate:self];

CGRect frame1;
frame1.origin.x = self.scrollView.frame.size.width * 0;
frame1.origin.y = 0;
frame1.size = self.scrollView.frame.size;

// Model one
oneView = [[OneViewController alloc] initWithNibName:@"OneViewController" bundle:nil];
[self.scrollView addSubview:oneView.view];
oneView.view.frame = frame1;

// Model two
CGRect frame2;
frame2.origin.x = self.scrollView.frame.size.width * 1;
frame2.origin.y = 0;
frame2.size = self.scrollView.frame.size;

twoView = [[TwoViewController alloc] initWithNibName:@"TwoViewController" bundle:nil];
[self.scrollView addSubview:twoView.view];
twoView.view.frame = frame2; 
```

此外，我还更新了我的存储库，以便您可以对整个项目进行测试。这里的链接再次：[http](http://bit.ly/PLe1Le) ://bit.ly/PLe1Le :)

# android - 使用类的 AsyncTask/ProgressDialog 调用静态方法

> ID：12103678
> 
> 赞同：0
> 
> 时间：2012-08-24T05:38:23.727
> 
> 标签：android, static, android-asynctask, progressdialog, static-methods

所以我对 Android（和 Java）比较陌生。我已经创建了一个类，它`AsyncTask`在方法中使用 ProgressDialog，`static`因为我想从多个活动中调用它。

```
public class SomeClass {

    // Some other methods, etc.

    public static void SomeFunction(final Context context, String FilePath) {
        new AsyncTask<Void, Void, Void>() {
            private ProgressDialog dialog;

            protected void onPreExecute() {
                dialog = ProgressDialog.show(context, "", "Loading...", true); 
            }

            protected Void doInBackground(Void... unused) { 
                for (int i=0; i<15000; i++) 
                    System.out.println("Gatorade me, Bitch: " + i);

            return null;
            }

            protected void onPostExecute(Void unused) { 
                dialog.dismiss();
            }

        }.execute();  
    }

} 
```

`dialog = ProgressDialog.show(context, "", "Loading...", true);` 问题是该`onPreExecute()`部分中的语句 `AsyncTask`给出了错误。没有它，代码运行良好。

那么在不为 AsyncTask 创建新的 java 类文件的情况下，我能做些什么来解决这个问题。我知道这可行，但我只想为整个班级制作一个文件，以便可以在多个程序中使用它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:06:13.107

检查您在调用函数时是否传递了应用程序上下文或活动上下文。

使用应用程序上下文，您无法显示进度条。如果是这样，请尝试传递活动上下文。

```
SomeFunction(ActivityName.this,"path"); 
```

# javascript - JQuery Timeline 会破坏页面上的所有其他 javascript

> ID：12103686
> 
> 赞同：0
> 
> 时间：2012-08-24T05:39:11.290
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试实现 JS[时间线](http://timeline.verite.co/)，但是当我将代码粘贴到我的网站时，时间线可以正常工作，但会破坏我所有的其他 JQuery 脚本。

我添加的时间线代码是：

```
<div id="timeline-embed"></div>
<script type="text/javascript">

   var timeline_config = {
   width:  "100%",
   height: "100%",
   //source: eventdata,
   source: 'js/timeline/test.json', 
   css:  'js/timeline/compiled/css/timeline.css', 
   js:  'js/timeline/compiled/js/timeline-min.js' 
  };

</script>
<script type="text/javascript" src="js/timeline/compiled/js/timeline-embed.js"></script> 
```

如果我删除它，一切都会再次运行良好。

以前有人遇到过这样的问题吗？

编辑：如果有人感兴趣，我的网站上有代码：http: [//www.clavecontraclave.com](http://www.clavecontraclave.com)

# python - 安全地使用 raw_input 生成的字符串（Python）

> ID：12103687
> 
> 赞同：1
> 
> 时间：2012-08-24T05:39:23.880
> 
> 标签：python, user-input, raw-input

我想知道如何安全地使用 raw_input 中的字符串，以便我可以创建一个函数来将其替换为易于安全使用的脚本。

原因是我正在尝试使用 python 制作一个生成字符表的应用程序，并且需要能够使用一个名称作为字符串传递一个字符的全名以便于访问（Charname_NLB）

但是，由于我希望将其用于更多应用程序，因此我需要使用此备用命令将其用于作为原始输入输入的任何字符串。

为了简单起见，我已经有一个类似的用于整数输入的部分，并且希望将其集成到同一个类中。我会把它贴在这里，感谢：Mgilson 和 BlueKitties（分别来自这里和 www.python-forum.org）

```
 def safeinput(get_num):
            num = float(raw_input(get_num))
            return num 
```

但是，如果这不能安全地返回与基本输入命令相同的结果，我能否获得一份工作副本，因为我目前只有一个概念证明可以使用，而且对于截断的数字来说它是不准确的。

**编辑：“任何字符串”是指结果将存储为字符串，而不是用作命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:07:06.227

不确定这是否是您要求的。`literal_eval`是安全的，但仅适用于文字。`eval()`如果您必须清理输入，则很难安全使用

```
>>> from ast import literal_eval
>>> def safeinput(s):
...     try:
...         return literal_eval(s)
...     except:
...         return s
... 
>>> repr(safeinput("1"))
'1'                                            # converted to an int
>>> repr(safeinput("1.1"))
'1.1'                                          # converted to a float
>>> repr(safeinput("'some string in quotes'"))
"'some string in quotes'"                      # converted to a string
>>> repr(safeinput("some string without quotes"))
"'some string without quotes'"                 # no conversion necessary 
```

# c# - 在 Devexpress ASPxGridView 中查找控件

> ID：12103688
> 
> 赞同：1
> 
> 时间：2012-08-24T05:39:38.580
> 
> 标签：c#, devexpress

我有一个代码，其中包含一个 ASPxGridView 和一个 ASPxCheckBox 和标签，如下所示：

* * *

```
 <dx:ASPxGridView ID="gvTableSearchHomes" runat="server" DataSourceID="XmlHomes" Width="341px"
CssClass="tableViewSearchGrid" ClientInstanceName="gvTableSearchHomes"
AutoGenerateColumns="False" EnableRowsCache="false" KeyFieldName="ID">
<%--<Columns>--%>
    <%-- DXCOMMENT: Within ASPxGridView, add a column whose values will participate in filtering --%>
    <%--<dx:GridViewDataTextColumn FieldName="Address">
        <PropertiesTextEdit NullText="Search your home"></PropertiesTextEdit>
        <Settings AllowAutoFilterTextInputTimer="True" AutoFilterCondition="Contains" />
    </dx:GridViewDataTextColumn>
</Columns>--%>
    <Templates>
     <%--DXCOMMENT: Configure the grid's DataRow template in accordance with data source fields --%>
    <DataRow>
        <div class="gvItem">
            <dx:ASPxCheckBox ID="ChkBookList" runat="server"></dx:ASPxCheckBox>
            <dx:ASPxLabel ID="Address" runat="server" CssClass="address" Text='<%# Utils.ExtractFirstRow(Eval("Address")) %>' />
            <%--<p><dx:ASPxLabel ID="Address2" runat="server" CssClass="address2" Text='<%# Utils.ExtractSecondRow(Eval("Address")) %>' /></p>
            <p><dx:ASPxLabel ID="Price" runat="server" CssClass="price" Text='<%# Utils.GetPrice(Eval("Price")) %>' /></p>--%>
        </div>
    </DataRow>
</Templates>
<SettingsPager Visible="false" PageSize="1000" />
<Settings ShowVerticalScrollBar="True" ShowFilterRow="true" ShowColumnHeaders="false"/>
<SettingsBehavior AutoExpandAllGroups="true" AllowSelectSingleRowOnly="true" AllowSelectByRowClick="true"/>
<ClientSideEvents 
    Init="function(){ hr.TableViewLandscape_Adjust(); }" 
    EndCallback="function(){ hr.TableViewLandscape_Adjust(); }"
    SelectionChanged="OnGvTableSearchHomesSelectedChanged" />
<Styles>
    <SelectedRow ForeColor="White"></SelectedRow>
</Styles> 
```

* * *

我无法通过 C# 代码访问这些控制。有谁能够帮我。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:05:20.903

Check the [documentation methods](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridViewClassMethodsTopic) to find controls in different gridview templates. e.g. [ASPxGridView.FindRowTemplateControl Method](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FindRowTemplateControltopic)

Source: [http://developmentsolutionsjunction.blogspot.in/2011/11/find-controls-in-dataitemtemplate-of.html](http://developmentsolutionsjunction.blogspot.in/2011/11/find-controls-in-dataitemtemplate-of.html)

//markup

```
 <dx:ASPxGridView ID="grvTest" AutoGenerateColumns="False" runat="server" DataSourceID="SqlDataSource1"
          OnHtmlRowPrepared="grvTest_HtmlRowPrepared" OnHtmlRowCreated="grvTest_HtmlRowCreated">
          <Columns>
              <dx:GridViewDataTextColumn Caption="RowID" Name="colRowID" VisibleIndex="0" Width="20px">
                  <DataItemTemplate>
                       <dx:ASPxLabel ID="lblRowID" runat="server" Text='Label'>
                      </dx:ASPxLabel>
                 </DataItemTemplate>
</dx:GridViewDataTextColumn> 
```

//accessing template control in code-behind

```
protected void grvTest_HtmlRowCreated(object sender, ASPxGridViewTableRowEventArgs e)
        {
            if (e.RowType != GridViewRowType.Data) return;

            ASPxLabel label = grvTest.FindRowCellTemplateControl(e.VisibleIndex, null,
            "lblRowID") as ASPxLabel;
            label.Text = (e.VisibleIndex + 1).ToString();
        } 
```

example code:

```
ASPxGridView grid = (ASPxGridView)sender;

ASPxPageControl myPages = grid.FindEditFormTemplateControl("CityEditTabs") 
                                                              as ASPxPageControl; 
```

References:
[How can I write events for the controls used in my Grid templates](http://www.devexpress.com/Support/Center/kb/p/A1140.aspx)
[Some GridView code snippets to understand gridview concepts](http://developmentsolutionsjunction.blogspot.in/search/label/DevExpress)

Identify the VisibleIndex or RowHandle to get the control in particular template that you have created in your markup.

Hope above example will help you to solve your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T19:50:26.713

谢谢我解决了我的问题。我把这个

```
Protected Sub GvEncuesta_HtmlRowCreated(sender As Object, e As ASPxGridViewTableRowEventArgs)
    If (e.RowType <> GridViewRowType.Data) Then Return

    Try
        Dim cmbRespuesas As ASPxComboBox = GvEncuesta.FindRowCellTemplateControl(e.VisibleIndex, Nothing, "ASPxCmbRespuestas")

        cmbRespuesas.IncrementalFilteringMode = IncrementalFilteringMode.Contains
        cmbRespuesas.Visible = True
        cmbRespuesas.DataSource = wcfCap.RetrieveRespuestaEncuestaxEstado(1)
        cmbRespuesas.ValueField = "Cod_Respuesta"
        cmbRespuesas.TextField = "Nombre_Respuesta"
        cmbRespuesas.DataBindItems()
    Catch ex As Exception
    End Try
End Sub 
```

# jboss - 将 jBoss 中使用的 .sar 文件部署到 weblogic

> ID：12103693
> 
> 赞同：0
> 
> 时间：2012-08-24T05:40:07.967
> 
> 标签：jboss, weblogic, managed-bean, mbeans

我们在 jboss 中使用了“.sar”（服务存档文件）。目前我们正计划将代码迁移到 Weblogic。

有没有办法将 .sar 文件部署到 weblogic 中。

如果不能直接实现，是否有一种解决方法，我们可以在 Web 逻辑上部署服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:49:29.377

为了获得 .sar 中的自定义 mbean，您需要将内容重新打包为 .ear，因为 .sar 不是标准的 Java EE 部署机制——这是一个 JBoss 专有存档。

以下是有关如何创建、打包和部署您自己的服务 MBean（JMX Bean）的一些说明以及如何使用它的示例。

[https://blogs.oracle.com/WebLogicServer/entry/developing_custom_mbeans_to_ma](https://blogs.oracle.com/WebLogicServer/entry/developing_custom_mbeans_to_ma)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:51:02.593

您可以做的一件事是通过创建、配置和注册 MBean 来“替代”或“模拟”SAR Deployer。那，AFAIK，可以通过两种方式完成：

1) 使用标准 Java EE 组件：这意味着在 Web 层上，您可以使用 servlet 的 init() 方法（确保它在启动时预加载），或者更好的是 ServletContextListener

2) 使用WebLogic 特定组件。我说的是启动类。只需注册一个创建、配置和注册 MBean 的启动类。

如果您使用的是 Web 模块，那么第一种方法的明显优势在于您使用的是纯 Java EE 组件。尽管您没有使用它，但您可以添加一个“虚拟”网络模块，仅用于执行此操作

关于你必须在这些类中做什么，你可以选择一种“从头开始”的方法，通过解析描述服务的 xml 文件，因此手动创建、配置和注册 MBean，或者，如果我没记错的话，来自 JBoss 的 XMBean 是什么可以在 JBoss 之外重用，但你需要检查，因为我不确定

# sql - PL/pgSQL 函数 + 客户端 lo_import

> ID：12103695
> 
> 赞同：0
> 
> 时间：2012-08-24T05:40:24.577
> 
> 标签：sql, postgresql, plpgsql, psql

我在将文档导入 postgres db 时遇到问题。我有 plpgsql 函数，更简单的版本可能如下所示：

```
create function add_file(flag integer, sth varchar) returns void as
begin
   if flag = 1 then 
      insert into tab_one values (my_file_oid, sth);
   else
      insert into tab_two values (my_file_oid, sth);
   end if;
end; 
```

和 psql 命令：

```
\lo_import('path/to/file'); 
```

两个代码在一个文件中。我不能将 lo_import() 放入插入语句，因为我需要客户端 lo_import。有变量 LASTOID，但在 add_file 函数中不可用。并且它不会在每次调用 add_file() 时更新。
那么，在我们的示例中，如何通过 insert 语句将 oid 放入数据库，并在函数中使用参数？文件在客户端计算机中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:14:58.437

[psql`\lo_import`](http://www.postgresql.org/docs/current/interactive/app-psql.html)返回导入产生的 OID。您需要将其作为参数传递给函数，如下所示：

```
CREATE FUNCTION add_file(_flag integer, _sth varchar, _oid oid)
  RETURNS void LANGUAGE plpgsql AS
BEGIN
   IF _flag = 1 THEN
      INSERT INTO tab_one(file_oid, sth) VALUES (_oid, _sth);
   ELSE
      INSERT INTO tab_two(file_oid, sth) VALUES (_oid, _sth);
   END IF;
END; 
```

顺便说一句：*始终*使用命令将列列表添加到表中`INSERT`（可能除了临时调用）。

* * *

在 plpgsql 函数中，您可以使用还提供的[服务器端函数](http://www.postgresql.org/docs/current/interactive/lo-funcs.html)。可能看起来像这样：

```
INSERT INTO tab_one(file_oid, sth) VALUES (lo_import('/etc/motd'), _sth); 
```

请注意，这在数据库*服务器*的文件系统中以所有者（通常是系统用户`postgres`）的权限运行。因此，使用仅限于超级用户。

# java - 如何使用jsp在java（struts）中上传多个图像？

> ID：12103702
> 
> 赞同：3
> 
> 时间：2012-08-24T05:41:06.443
> 
> 标签：java, jsp, struts

我有jsp代码

学院.jsp 页面

```
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %>

<html>
<head>
</head>
<body>
<html:form action ="/college.do">
<fieldset>
<legend>COLLEGE INFORMATION :</legend>
<pre>
Gallery Images: <input type="file" name="file[]" multiple/>
<html:submit value = "S U B M I T"/>
</fieldset>
</html:form>
</body>
</html> 
```

如何在struts中上传多张图片

项目中的总图像存储文件夹

使用这个jsp，但我想CollegeAction类和CollegeForm类怎么做请帮我写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:37:15.140

你可能想做这样的事情。在你的jsp文件中

```
<html:file property="image1"/>
<html:file property="image2"/>
<html:file property="image3"/> 
```

不要忘记设置您的 html 表单的属性`enctype="multipart/form-data"`

然后在您的`Form`文件中，创建您的图像变量：

```
private FormFile image1;
private FormFile image2;
private FormFile image3; 
```

..以及他们的吸气剂和二传手。

然后，您可以使用变量在服务器端创建图像：

```
OutputStream bos = null;
InputStream stream = null;
try {
  String fileName = form.getImage().getFileName();
  String directory = "C:/your_folder";
  File f = new File(directory);
   if (!f.exists()) {
    f.mkdir();

   if (!"".equals(fileName)) {
    stream = form.getImage1().getInputStream();
    bos = new FileOutputStream(directory + fileName);
    int bytesRead = 0;
     byte[] buffer = new byte[8192];

     while ((bytesRead = stream.read(buffer, 0, 8192)) != -1) {
      bos.write(buffer, 0, bytesRead);
     }
    }
   }
} catch (Exception e) {
 e.printStackTrace();
} 
```

# cocoa - NSWorkspace 通知 - 应用程序关闭

> ID：12103706
> 
> 赞同：1
> 
> 时间：2012-08-24T05:41:32.987
> 
> 标签：cocoa, nsworkspace

> **可能重复：**
> [使用 NSWorkspace 关闭文件](https://stackoverflow.com/questions/7232540/close-file-using-nsworkspace)

我`NSWorkspace`用来打开一个文件。例如，我使用 TextEdit 打开了一个文本文件。现在我想在 TextEdit 关闭文本文件时获取事件。

我注意到`NSWorkspace`有一个通知中心。但我尝试了所有通知，但没有一个是我想要的。

谁能帮助我如何捕捉这种事件？

谢谢！

# java - jar文件制作

> ID：12103711
> 
> 赞同：1
> 
> 时间：2012-08-24T05:42:07.223
> 
> 标签：java

我正在尝试创建一个包含许多类的 jar 文件。使用以下命令

```
C:\Users\use\Desktop\SDE_7_SSH\eclipse\new\charge\src\jar> jar cf charge.jar *.class 
```

但它抛出一个错误**“jar”不是内部或外部命令、可运行程序或批处理文件。**

在我的 jar 文件夹（C:\Users\use\Desktop\SDE_7_SSH\eclipse\new\charge\src\jar）中，我有另外两个名为“f1”、“f2”的文件夹，它们又包含类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:53:59.420

您需要从 bin 目录运行 jar 命令。例如在 linux 系统上，我要么去我的目录

> cd /usr/local/java/jdk1.6.0_01/bin/

然后运行

> jar cfcharge.jar *.class

或者使用 java 二进制文件的完整路径运行它

> /usr/local/java/jdk1.6.0_01/bin/jar cf charge.jar *.class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:42:33.877

使用'java -jar'不仅仅是'jar'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:48:12.493

使用 jar 程序的完整路径，该路径位于 Java 的 bin 目录中。像

> jdk_with_version\bin\jar cvf *.class

# ruby-on-rails - 我是否需要在每个控制器操作中验证会话变量？（导轨）

> ID：12103717
> 
> 赞同：0
> 
> 时间：2012-08-24T05:42:35.173
> 
> 标签：ruby-on-rails, rest, redirect, controller

[这个问题](https://stackoverflow.com/questions/2139996/ruby-on-rails-redirect-toback)的后续内容。

在我的应用程序中，我有一个任务模型。多个页面可以链接到单个任务的“编辑”网址。例如，`/tasks/1/edit`链接到 from`/tasks/1`和`user/1/`（用户是另一个模型）。

在我的控制器中，我希望能够在通过“更新”操作提交“编辑”后重定向回任何一个引用页面。例如，如果我去`/tasks/1/edit`from `user/1/`，在“更新”操作之后我想重定向回`user/1/`. 如果我去`/tasks/1/edit`from ，同样的交易`/tasks/1`。

在我的 GET“编辑”操作中，我正在做：

```
@task = Task.find(params[:id])

if request.referer and (request.referer == task_url(@task) or request.referer == user_url(@task.user))
  session[:return_to] = request.referer
else
  session.delete(:return_to)
end 
```

在相应的 PUT“更新”操作中，我执行以下操作：

```
@task = Task.find(params[:id])

respond_to do |format|
  if @task.update_attributes(params[:task])
    format.html { redirect_to session.has_key?(:return_to) ? session[:return_to] : @task #return to task if no return_to specified
  else
    ...
  end
end 
```

这可行，但我担心客户端可能会`session[:return_to]`在“更新”中欺骗/伪造他们，从而允许他们重定向到他们想要的任何页面。

这有关系吗？这是一个有效的担忧吗？我需要`session[:return_to]`在“更新”中验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:32:47.457

简而言之，是的……

request.referrer 存储将用户带到您的站点的 URL。如果您执行了以下操作：

1.  创建静态 HTML 页面
2.  嵌入指向 /task/1/edit 的链接
3.  在更新结束时，它将重定向回静态网页。

为了解决这个问题，你应该做的是存储一个表示位置的会话变量（例如在你的用户控制器中，做一个 before_filter 并设置 session[:return_task_update_to] = :users）

然后，在更新结束时，您重定向回来，并清除会话中的 :return_task_update_to 变量。如果没有会话变量，您显然也会处理这种情况（在这种情况下，您将重定向到任何有意义的默认值）。

这样，您无需验证 URL 或做一些疯狂的事情。只需在会话中设置状态，如果存在则重定向。

# java - GlassFish 3.1.2.2 战争在耳内找不到罐子

> ID：12103724
> 
> 赞同：0
> 
> 时间：2012-08-24T05:42:54.863
> 
> 标签：java, jakarta-ee, glassfish, java-ee-6, glassfish-3

我已经用这种结构建立了一个耳朵（不是这里显示的所有文件）：

```
myapp.ear/
    myapp-ejb.jar
    myapp-web.war
    META-INF/
        application.xml
    lib
        myapp-common.jar 
```

问题是，当战争中的代码试图引用 myapp-common.jar 中的类时，它会抛出`java.lang.ClassNotFoundException`.

注意 的内容`META-INF/application.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                                 http://java.sun.com/xml/ns/javaee/application_6.xsd"
             version="6">
  <display-name>pncr-portal-ear</display-name>
  <module>
    <web>
      <web-uri>myapp-web.war</web-uri>
      <context-root>/</context-root>
    </web>
  </module>
  <module>
    <ejb>myapp-ejb.jar</ejb>
  </module>
  <library-directory>/lib</library-directory>
</application> 
```

库目录在此处定义为`/lib`相对于耳朵根目录的目录，这正是它所在的位置，但它并未加载到类路径中，尽管 Java EE 5（可能是 6）规范说它应该是加载到类路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:25:50.183

事实证明，我在一个与我想象的略有不同的包中引用了一个类。该包不再存在，但 Maven 正在编译它而没有抱怨。所以我吹走了我的本地存储库并再次尝试。我仍然得到错误。然后我发现了问题：在 myapp.taglib.xml 中，我仍在引用 myapp-common.jar 中的旧版本的类，该类现在位于不同的包中。

所以教训是：如果你看到`ClassNotFoundException`，还要查看你的 taglib.xml 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T05:55:02.627

验证`META-INF/manifest.mf`您的 war 文件中是否包含（类似于）：

```
Manifest-Version: 1.0
Class-Path: lib/myapp-common.jar 
```

# javascript - 调用带参数和不带参数的 javascript 函数有什么区别

> ID：12103726
> 
> 赞同：2
> 
> 时间：2012-08-24T05:43:10.553
> 
> 标签：javascript, jquery

我试图从 ajax 调用中取回数据，并且正在使用代码

```
jQuery.ajax({
        type: 'POST',
        url: '/chatlog',
        success: exoticlangAjaxCompleted,
        data:'messageLog=' + privateMessageLogJson,
        dataType: 'json'
    }); 
```

数据在 JSON 数组中（key = "messageLog"）

为什么打电话有用

```
 success: exoticlangAjaxCompleted, 
```

但不是

```
 success: exoticlangAjaxCompleted(), 
```

或者

```
 success: exoticlangAjaxCompleted(messageLog) ?? 
```

JS函数是：

```
function exoticlangAjaxCompleted(messageLog){
    console.log('exoticlangAjaxCompleted!');
    console.log('chat log is: ' + messageLog);
    console.log('chat log is: ' + dump(messageLog));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:47:19.963

该`success`参数需要一个对 AJAX 请求完成时将调用的函数的引用。

具有以下内容：

```
success: exoticlangAjaxCompleted, 
```

您正在根据需要传递对函数的引用。

而在这种情况下：

```
success: exoticlangAjaxCompleted(), 
```

您正在调用您的`exoticlangAjaxCompleted`函数并将结果传递给`success`参数。除非你的函数返回一个函数，否则这是行不通的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:53:02.180

前一种语法起作用的原因是因为`success`需要一个函数对象（为了使用参数调用它，如果它愿意的话），其中只调用一个函数不会返回一个函数对象。当您使用表单调用函数时`function()`，它会产生*一个输出*（即使该输出未定义）这也是此表单有效的原因：

```
...
success: function() {
    // Some callback code
}
... 
```

那么，它们有什么不同呢？为了展示如何，让我们看一下 WebKit 控制台：

![Image showing the WebKit console, myFunc vs myFunc()](../Images/e9a408053059bed164806c7f4d76a0d5.png)

如您所见，执行`myFunc`返回**函数本身**，而返回**一个对*`myFunc()`无用的对象`select:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:45:52.393

我的理解是你不能以这种方式传递论点。

如果您尝试这样做：

```
success: function(){exoticlangAjaxCompleted(messageLog);}, 
```

那么这可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:53:55.400

从 Jquery 文档中，这里有一个关于成功回调的部分：

> "A function to be called if the request succeeds. The function gets passed three arguments: The data returned from the server, formatted according to the dataType parameter; a string describing the status; and the jqXHR (in jQuery 1.4.x, XMLHttpRequest) object."

[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

So you have to make a trick, like here: [Pattern of additional parameters](https://stackoverflow.com/questions/1194104/jquery-ajax-ajax-passing-parameters-to-callback-good-pattern-to-use)

```
success: function(..){
...
} 
```

# c - 如何在C中按类型获取目录下所有文件的列表

> ID：12103733
> 
> 赞同：1
> 
> 时间：2012-08-24T05:44:05.117
> 
> 标签：c, unix

我必须模拟in的`ls`功能。`unix``C`

我必须创建一个程序来“按 C 类型获取任何目录下的所有文件”。

我用谷歌搜索并找到了获取文件列表的程序，但它们是按字母顺序排序的；我想按文件类型排序。请问，谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:20:20.457

您*必须*将文件存储在内存中的某个位置。由于这看起来像一个学校项目，我建议将文件名加载到链表中，并使用其中一种算法对链表进行排序。这很可能是练习本身的目的。

让我们假设“扩展名”，即.MP3 类型为`file type`“Fraunhofer MPEG Layer 3”，即使有人可能重命名了.WMA 文件并将其命名为.MP3。要检测“真实”文件类型，您需要使用一种称为“魔术文件”的东西，并且那里有一个 libmagic，但值得吗？（如果是博士论文或商业项目，答案是肯定的。如果项目由普通教授评分，那么你判断是否有被认为“太聪明”的风险）。

链表条目应该是`struct`包含文件名和指向其扩展名的指针；通过考虑扩展名是“文件名中最后一个点之后的任何内容”，您可以找到最后一个，因此您可以利用该`strrchr`功能。请记住，有些文件没有扩展名。

您判断是否使用节省内存的技巧，例如存储指向扩展名的指针，或使用`strdup`. 前者更快更精简，但你必须记住第一个结构指针（文件名）必须被释放，而第二个绝对不能。有两个指针行为不同可能被认为是不好的编码实践（它是）或聪明的 hack（它是），这取决于您是否重视维护时间或速度/内存。

至于文件名本身的检索，并没有全可移植的方式，所以这就导致了 Boost 等库的开发。但是对于学校项目，也许您可​​以限制为 POSIX 系统并使用`opendir`,`readdir`和.`closedir``stat`

一个好的做法和明智的做法是将操作（目录检索、列表排序、列表显示）分离到不同的功能中，以便您可以单独和增量地测试它们（例如：文件夹检索确实检索所有内容，您可以以未排序的顺序显示文件等）。

# javascript - 从 javascript 强制服务器 TextChanged 事件

> ID：12103740
> 
> 赞同：4
> 
> 时间：2012-08-24T05:45:09.343
> 
> 标签：javascript, asp.net, events

我有一个从 javascript 函数填充的 asp:TextBox，但是当发生这种情况时，服务器端 TextChanged 事件不会被触发，只有当我用键盘更改文本时。

有解决方案吗？为什么在 asp.net 中客户端/服务器集成如此痛苦？

（AutoPostBack 设置为 true）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T05:53:49.650

**方式一：**

```
function DoPostBack()
{
   __doPostBack("txt_sssn_dt", "TextChanged");
} 
```

[使用 JavaScript 调用 ASP.NET 服务器端事件](http://www.codeproject.com/Articles/25180/Calling-ASP-NET-server-side-events-using-JavaScrip)

**方式二：**

[从客户端脚本调用服务器端函数](http://pranayamr.blogspot.ca/2012/01/calling-server-side-function-from.html)

**方式3：**

像这样设置焦点的方法之一

```
function texboxchange() {
        var txtBox = document.getElementById('<%= TextBox4.ClientID %>');
        var count = txtBox.value.length;
        if (count == 2) 
        {
           document.getElementById('<%= TextBox12.ClientID %>').focus();
           return true; // this will call textbox changed event.
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T05:46:57.530

你可以 `__doPostBack('footxtBox','TextChanged');`在你的`JS`函数中强制它触发。

# mysql - 在 mySql 中更新日期

> ID：12103742
> 
> 赞同：0
> 
> 时间：2012-08-24T05:45:24.673
> 
> 标签：mysql, date

我有一个日期列，日期为 2012-02-25 格式。我需要将其更新到 12-02-25 但不知道该怎么做？

谢谢！

编辑：在查看了所有答案之后，似乎我还不够清楚。我不想改变我的类型，也不想玩输出。我想将现有的日期列从 2012 年更新到 12 年。如果有的话，它应该是一个 UPDATE 查询，我只是不确定如何编写它。感谢到目前为止的所有评论。

编辑 2：看来我的问题没有意义，我不知道您不能将 DATE 存储为 xx-xx-xx。无论如何谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:01:17.293

无法以这种格式将日期存储`'12-02-25'`在具有`DATE`as 数据类型的列中。您可以将其存储在具有数据类型的列中`CHAR(8)`，然后使用以下`UPDATE`查询：

```
UPDATE table_name
SET date_column = DATE_FORMAT(date_column, '%y-%m-%d'); 
```

但更好的方法是`DATE`仅以格式存储它并`DATE_FORMAT`在从表中检索数据时使用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:53:08.327

使用 mysql [date_format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数根据需要显示它：

```
SELECT DATE_FORMAT(youdatecolumn, '%y-%m-%d') FROM yourtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T05:48:28.267

您应该使用日期时间类型。否则你会遇到一些问题（排序，与日期相关等）

您可以更改日期的显示作为输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:49:59.427

从我的[MySQL 参考](http://dev.mysql.com/doc/refman/5.1/en/two-digit-years.html)：

> 两位数年份的日期值不明确，因为世纪是未知的。这样的值必须解释为四位数的形式，因为 MySQL 在内部使用四位数存储年份。
> 
> 对于 DATETIME、DATE 和 TIMESTAMP 类型，MySQL 使用以下规则解释使用模糊年份值指定的日期：
> 
> 00-69 范围内的年份值将转换为 2000-2069。
> 
> 70-99 范围内的年份值将转换为 1970-1999。
> 
> 对于 YEAR，规则相同，但有以下例外：将数字 00 插入 YEAR(4) 会产生 0000 而不是 2000。要为 YEAR(4) 指定零并将其解释为 2000，请将其指定为字符串“0”或“00”。
> 
> 请记住，这些规则只是对您的数据值的含义提供合理猜测的启发式方法。如果 MySQL 使用的规则没有产生您需要的值，您必须提供包含四位数年份值的明确输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T05:58:15.937

示例代码尝试代码

```
public class MyDateParser {

public static void main(String args[]) throws ParseException {
    String s = "2011-03-27";// or 3/27/2011

    SimpleDateFormat dateFormatter = s.length() == 9 ? new SimpleDateFormat(
            "yyyy-MM-dd") : new SimpleDateFormat("yyyy-MM-dd");
    Calendar calendar = Calendar.getInstance();
    Date date = dateFormatter.parse(s);
    calendar.setTime(date);

    SimpleDateFormat simpleDateFormat2 = new SimpleDateFormat("yy-MM-dd");

    String strss = simpleDateFormat2.format(date);
    System.out.println(strss);

} 
```

}

# cmusphinx - pocketsphinx 如何判断不合语法的单词

> ID：12103747
> 
> 赞同：5
> 
> 时间：2012-08-24T05:45:59.437
> 
> 标签：cmusphinx

我目前正在使用pocketsphix演示（android和visual studio 2010），我已经配置了一个这样的jsgf语法

```
 #JSGF V1.0;
 grammar Names;
 public <popular> = muhammad | ahmed | maria | john | kelley | peter | jacob | jason; 
```

每当我说正确的名称时，它在大多数情况下都能正确检测到它，但是当我说一个不在列表中的名称时，它仍然匹配某些内容，我不希望那个或至少能够检测到是否说了一些不在语法中的内容（可能是通过pocketsphinx的一些分数或api）

我确信pocketsphinx 在我不知道的某个地方有它。请指教。

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:44:37.303

不，此功能未实现。有关更多详细信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/faq#qcan_pocketsphinx_reject_out-of-grammar_words_and_noises](http://cmusphinx.sourceforge.net/wiki/faq#qcan_pocketsphinx_reject_out-of-grammar_words_and_noises)

您可以改用关键字定位模式来查找关键字列表。您可以为每个短语配置激活阈值。

# c++ - C++：创建指针的副本

> ID：12103749
> 
> 赞同：3
> 
> 时间：2012-08-24T05:46:12.003
> 
> 标签：c++, pointers, copy

我需要制作一个副本，`GameMaster* thisMaster`这样我就可以在保持“干净”副本的同时进行操作。但是，我现在的做法是，当我对 进行更改时`copy`，它也会发生变化`thisMaster`。

```
void Move::possibleMoves(GameMaster* thisMaster)
{
     GameMaster* copy = new GameMaster(*thisMaster);
} 
```

我怎样才能解决这个问题？

编辑：我创建了一个复制构造函数，但仍然遇到同样的问题。

```
GameMaster::GameMaster(const GameMaster& gm)
{
    for(int i=0;i<GAMETILES;i++)
    {
        gameTiles[i]=gm.gameTiles[i];
    }
    players=gm.players;
    vertLines=gm.vertLines;
    horLines=gm.horLines;
    turn = gm.turn;
    masterBoard=gm.masterBoard;
    lastLegal=gm.lastLegal;
    lastScore=gm.lastScore;
} 
```

下面是 GameMaster 的完整类定义：

```
Class GameMaster
{
public:
    GameMaster(void);
    GameMaster(const GameMaster& gm);
    ~GameMaster(void);
    //functions

private:
    std::vector <Player*> players;
    std::vector <Line> vertLines;
    std::vector <Line> horLines;
    Tile gameTiles [GAMETILES];
    std::vector <std::string>colors;
    std::vector <std::string>shapes;
    int turn;
    Board masterBoard;
    bool lastLegal;
    int lastScore;
}; 
```

使用复制构造函数，我仍然遇到 Board 更改值的问题。它也需要复制构造函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:44:22.223

```
Class GameMaster
{
public:
    GameMaster(void);
    GameMaster(const GameMaster& gm);
    ~GameMaster(void);
    //functions

private:
    std::vector <Player*> players; // You should make a deep copy because of pointers
    std::vector <Line> vertLines; // Shallow copy is OK if Line doesn't have pointers in it
    std::vector <Line> horLines; // see above
    Tile gameTiles [GAMETILES]; // One by one assignment is OK
    std::vector <std::string>colors; // Shallow copy is OK
    std::vector <std::string>shapes; // Shallow copy is OK
    int turn; // assignment is OK
    Board masterBoard; // same questions for GameMaster still exists for copying this
    bool lastLegal; // assignment is OK
    int lastScore; // assignment is OK
}; 
```

这是[浅拷贝与深拷贝的链接](http://www.fredosaurus.com/notes-cpp/oop-condestructors/shallowdeepcopy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:41:15.443

玩家=gm.players；

只是复制指针集合..您需要对新向量中的玩家进行深度复制。

**编辑**

```
for( auto iter = gm.players.begin(); iter != gm.players.end(); ++iter) 
{
   players.push_back(new Players(*iter))
} 
```

您还需要为 Players 提供一个副本 const。

干杯

# javascript - 想要点击按钮

> ID：12103752
> 
> 赞同：2
> 
> 时间：2012-08-24T05:46:50.860
> 
> 标签：javascript, events, dom, mapquest

嗨，我正在尝试查找 MapQuest 上 2 个位置之间的距离。我有一个功能

```
MQA.EventUtil.observe(window, 'load', function() 
```

此功能在页面加载时加载，但我希望它在按钮单击时加载。任何人都可以建议我需要更改哪些内容才能单击按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-30T12:33:53.903

`MQA.EventUtil.observe(window, 'load', function () {`用常规函数替换。

```
 function drawMap() {
            var options = {
                elt: document.getElementById('map'),            // ID of map element on page
                zoom: 7,                                        // initial zoom level of the map
                latLng: { lat: 36.1866405, lng: -86.7852455 }     // center of map in latitude/longitude
            }; 
```

. . .

然后在体内： `<input id="Button1" type="button" value="GO" onclick="drawMap()" />`

不要忘记删除 MQA.EventUtil.observe(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:53:00.773

或许

```
MQA.EventUtil.observe(document.getElementById('button_id'), 'click', function () {}); 
```

# c++ - c ++如何防止函数参数评估

> ID：12103763
> 
> 赞同：1
> 
> 时间：2012-08-24T05:48:28.273
> 
> 标签：c++

是否可以防止功能参数评估？因为我不想在某些情况下评估函数参数。

例如，要记录调试消息，

```
void log(int severity, ...); 
```

我想记录一条消息

```
log(DEBUG, "%s", getErrorMsg().c_str()); 
```

如果严重性为 DEBUG，则日志功能只是以发布二进制文件的形式返回。因此，没有必要评估 getErrorMsg();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:50:54.083

您传递给函数的任何参数将始终在进入函数之前进行评估。

您可能想要传递类似指针的东西，因此指针本身就是被评估的内容，并且您仅在必要时/如果需要时通过该指针调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:37:34.070

您可以使用宏：

```
#define log(severity, ...) if (severity!=DEBUG) log_impl(severity,__VA_ARGS__); 
```

# matlab - MATLAB 中的蒙特卡罗

> ID：12103766
> 
> 赞同：-1
> 
> 时间：2012-08-24T05:48:44.547
> 
> 标签：matlab, montecarlo, variance

当我尝试运行这个程序时：

```
n = 10000;

Constant = 5.0;
A = 10; 
B = 5;
C = 1.335;
Drand = (0.02*randn(1,n)) + 0.242*ones(1,n);
Erand = (0.005*randn(1,n)) + 0.536*ones(1,n); 
P = (Constant*A*B*(1.0/C))*(Drand.*(1.0-Erand.));
plot(P); 
```

我收到此错误：

> 错误：应为“标识符”，找到“）”。

其中方差分别为`0.02`和`0.005`，均值分别为`0.242`和`0.536`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:59:59.657

你`.`在倒数第二行写的太多了。它应该是：

```
 P = (Constant*A*B*(1.0/C))*(Drand.*(1.0-Erand)); 
```

此外，您的方差实际上不是`0.02`and `0.005`。想想看;-)

# ruby-on-rails - Rails3 使用 ID 播种数据

> ID：12103773
> 
> 赞同：1
> 
> 时间：2012-08-24T05:49:04.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

美好的一天可爱的人们，

我想对我的种子数据执行以下操作，但我遇到了批量分配错误，这很好。

```
#Seeds.rb

Category.create(name: 'Top hats', category_id: '44')

#Mass-assignment error
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: category_id 
```

但是，如果我在 CSV 文件中设置种子数据，我可以使用以下命令成功导入：

```
#Seeds.rb

require 'csv'

  CSV.foreach(Rails.root.join("category.csv"), headers: true) do |row|
    BusinessCategory.create! do |category|
      category.id = row[0]
      category.name = row[1]
    end
  end 
```

此外，这适用于 Rails 控制台：

```
#Rails console

category = Category.new
category.name = 'Top hat'
category.id = 42 
```

我知道可以通过`attr_accessible :category_id`在 Category 模型中设置一个来轻松修复它，但是 1）我想更多地了解为什么会发生这种情况，以及 2）我认为没有必要将其设置为可访问，因为我只是在导入数据和不需要改变吗？

提前致谢。

快乐的时光 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:59:37.727

为什么不直接更新代码`seeds.rb`以不进行批量分配（也就是传递哈希或属性）

所以而不是

```
Category.create(name: 'Top hats', category_id: '44') 
```

做

```
category = Category.new (name: 'Top hat')
category.category_id = 42 # the irb code said 'id' but in your example its category_id
category.save 
```

希望有帮助。

# java - 谷歌应用引擎上传的版本问题

> ID：12103783
> 
> 赞同：0
> 
> 时间：2012-08-24T05:50:12.987
> 
> 标签：java, google-app-engine

我将我的应用程序上传到 GAE for java，它映射到我们的域 www.sakshum.org

默认版本是 [http://3.sakshumweb.appspot.com/](http://3.sakshumweb.appspot.com/)

问题是当我们使用域名访问时，它似乎有一些旧版本，但如果我们访问直接 url，它似乎工作正常。

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:47:19.447

GAE 上的静态文件缓存大约 10 分钟。您应该尝试禁用 GWT 相关文件的缓存。把它放进你的`appengine-web.xml`：

```
<!-- Configure serving/caching of GWT files -->
<static-files>
  <include path="**" />

  <!-- The following line requires App Engine 1.3.2 SDK -->
  <include path="**.nocache.*" expiration="0s" />

  <include path="**.cache.*" expiration="365d" />
  <exclude path="**.gwt.rpc" />
</static-files> 
```

# c# - 在 Windows 8 应用程序中使用 Thread

> ID：12103788
> 
> 赞同：1
> 
> 时间：2012-08-24T05:50:48.390
> 
> 标签：c#, windows-runtime

有没有办法在***No-Longer-Named-Metro***应用程序中使用 Thread 类？

我正在尝试编写具有“TimeLeft”属性的计时器类，但无法理解如何使用 Tasks 来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:03:08.867

我建议使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dispatchertimer.aspx)类来完成定时器。

```
var timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromSeconds(1);
timer.Tick += OnTimerTick;

...
private void OnTimerTick(object sender, object e)
{
    // do somthing
} 
```

# perl - 驼鹿角色推导

> ID：12103791
> 
> 赞同：1
> 
> 时间：2012-08-24T05:51:06.940
> 
> 标签：perl, moose

我现在想知道什么是做我需要的更好的模式。我试图将问题减少到最低限度，让我一步一步地解释它。

我有一个界面角色，例如：

```
{
    package Likeable;
    use Moose::Role;

    requires 'likers';
    requires 'do_like';
} 
```

在此之后，我需要 2 个抽象角色来半实现前一个接口（在这种情况下，它们实现了全部）：

```
{
    package Likeable::OnSelf;
    use Moose::Role;

    with 'Likeable';

    has 'likers' => ( is => 'rw', isa => 'ArrayRef' );
    sub do_like { }
}

{
    package Likeable::OnParent;
    use Moose::Role;

    with 'Likeable';

    requires 'parent';

    sub likers { shift->parent->likers(@_) }
    sub do_like { shift->parent->do_like(@_) }
} 
```

后来我需要这段代码来编译

```
{
    package OBJ::OnSelf;
    use Moose;
    with 'Likeable::OnSelf';
}

{
    package OBJ::OnParent;
    use Moose;
    with 'Likeable::OnParent';
    has 'parent' => ( is => 'rw', isa => 'Obj' );
}

foreach my $obj (OBJ::OnSelf->new, OBJ::OnParent->new(parent => OBJ::OnSelf->new)) {
    if ( $obj->does('Likeable') ) {
        $obj->do_like
    }
} 
```

在我看来，问题在于我正在尝试对 Moose::Role 进行推导，但我不知道如何正确解决问题。

我可以有你的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:49:37.410

您的整体角色构成确实没有问题，但我假设您遇到了这样的错误：

```
'Likeable::OnParent' requires the method 'parent' to be implemented by 'OBJ::OnParent' at .../Moose/Meta/Role/Application.pm line 51 
```

问题是在调用检查`has`方法之后调用创建属性访问器方法。`with`（这些只是被调用的子程序，而不是实际的语言结构。）

我知道有几个很好的解决方案。我更喜欢这个：

```
package OBJ::OnParent;
use Moose;
has 'parent' => ( is => 'rw', isa => 'Obj' );
with 'Likeable::OnParent'; 
```

`with`在定义属性后做你的陈述。我知道的另一个选择是：

```
package OBJ::OnParent;
use Moose;
with 'Likeable::OnParent';

BEGIN {
    has 'parent' => ( is => 'rw', isa => 'Obj' );
} 
```

通过将您的`has`调用放在一个块中，属性会在运行之后和之前`BEGIN`添加到包中。我不喜欢像这样坚持积木，但这主要是个人喜好。`use Moose``with``BEGIN`

不过，在这种特殊情况下，我可能建议`Likeable::OnParent`您更改为更好地指定该`parent`方法返回 a `Likeable`，这也将绕过更改对象定义的需要：

```
package Likeable::OnParent;
use Moose::Role;

with 'Likeable';

has parent => (
    is => 'rw',
    does => 'Likeable',
    required => 1,
);

sub likers { shift->parent->likers(@_) }
sub do_like { shift->parent->do_like(@_) } 
```

这样，您就有信心调用`likers`并将`do_like`成功，因为必须设置属性并且它必须实现需要这些方法和文档化合同的角色。

# zend-framework - zend 表单元素显示隐藏字段值

> ID：12103796
> 
> 赞同：0
> 
> 时间：2012-08-24T05:51:26.193
> 
> 标签：zend-framework

$emailmessage = new Zend_Form_Element_Hidden('emailmessage');

隐藏字段值，即“emailmessage”检索数据库内相同字段名称的值。然而，在加载页面时，无法看到“emailmessage”的值，因为该元素是隐藏的。有没有办法在不使用任何其他表单元素的情况下显示它。我想要它而不使用文本、文本区域等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:11:25.023

在控制器中，您需要将其分配给视图，并且在视图中，您可以随心所欲地回显它：

**控制器**

```
$form = new Your_Form();
$this->view->emailmessage = $emailmessage; 
```

**看法**

```
echo $this->escape($this->emailmessage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:54:14.730

您需要为元素设置**formNote**装饰器。您可以通过扩展隐藏元素或在表单中设置装饰器来实现。

**形式**

```
public function init()
{
    // ...
    $emailMessage = new Zend_Form_Element_Hidden();
    $emailMessage->setDecorators(
        array(
            array('ViewHelper', array('helper' => 'formNote'))
        )
    );
    $this->addElement($emailMessage, 'emailMessage');
    // ...
} 
```

# java - Google Analytics API V3 - 授权 API 密钥 (JAVA)

> ID：12103798
> 
> 赞同：0
> 
> 时间：2012-08-24T05:52:03.117
> 
> 标签：java, oauth-2.0, google-analytics-api

我需要以编程方式从 Google Analytics 检索数据以生成一些报告，因此 OAuth 2.0 不是一个选项，因为它要求用户授权。有没有办法使用 API KEY 从 GA API v3 检索数据？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:40:07.750

用户必须经过身份验证才能授予您的应用程序对其数据的访问权限。这适用于任何用例。

您当然可以使用 OAuth 2.0。Google 提供了获取访问令牌的可能性，您的应用程序可以使用该令牌访问用户数据。在这种情况下，用户只需要被授权一次。

有关使用 OAuth 2.0 的应用程序访问 Google API 的更多信息，请参阅[https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi 。](https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi)

# ios - 设计包含大量信息的应用程序，包括指向页面不同部分的链接

> ID：12103799
> 
> 赞同：0
> 
> 时间：2012-08-24T05:52:04.560
> 
> 标签：ios, uiviewcontroller

我想设计一个包含大量信息的应用程序，并且我想将信息分成可以轻弹到的部分。请参阅下图了解我想要做什么：

[Skyscape 医疗资源应用程序 http://a2.mzstatic.com/us/r1000/103/Purple/v4/34/6d/1e/346d1e3d-ad60-1197-ee65-de8b7ed00f84/mzl.nrrlmqlx.480x480-75.jpg](http://a2.mzstatic.com/us/r1000/103/Purple/v4/34/6d/1e/346d1e3d-ad60-1197-ee65-de8b7ed00f84/mzl.nrrlmqlx.480x480-75.jpg)

我怎样才能设计这样的东西？我无法弄清楚使用了什么样的视图。我看到了表格视图的元素（灰色水平线），但随后我在表格单元格中看到了不同的字体和颜色（如果它是表格视图）。顶部还有一些链接，这些链接向下滑动到下面与其对应的部分。他们也有蓝色下划线文本的链接，你是怎么做到的？

所以本质上，有两个问题：

1) 他们可能如何设计所显示图片的主视图？（它是一个表格视图，还是只是一个大的视图控制器。如果它是一个表格视图，你如何在文本单元格中获得不同的字体样式） 2）你如何创建那些蓝色文本链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:45:06.243

好的，环顾四周，发现可能的设计是 UIWebView，因为它可以包含超链接和不同的字体。

# google-maps-api-3 - 如何取回提升请求的值

> ID：12103803
> 
> 赞同：0
> 
> 时间：2012-08-24T05:52:30.007
> 
> 标签：google-maps-api-3

从函数中取回高程值时，我遇到了一些问题。我无法获得该值。如果有人对此有解决方案，那就太好了。
这是我的代码：

```
function getElevation(latLng) {
  seaLevel = 'Error';
  var locations = [];
  locations.push(latLng);
  //Create a LocationElevationRequest object using the array[0] value
  var positionalRequest = {
    'locations': locations
  }
  //Initiate the location request
  elevationService.getElevationForLocations(positionalRequest, function(results, status) {
    if (status == google.maps.ElevationStatus.OK) {
      // Retrieve the first result
      if (results[0]) {
        var seaLvl = parseFloat(results[0].elevation.toFixed(1));
      }
      dropElevation(seaLvl);
    }
      document.getElementById("response").innerHTML = seaLevel;
  });
  function dropElevation(tmpLevel) {
    //alert(tmpLevel); at this point the value is correct
    seaLevel = tmpLevel;
  }
  return seaLevel; //at this point the value is always as defined above
} //End function (getElevation) 
```

它的调用如下所示：

```
var seaLvl = getElevation(latLng); 
```

提前感谢告诉我我做错了什么
Guido

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:04:09.893

海拔服务是异步的。您必须在回调例程中使用该值。像这样的东西：

```
elevationService.getElevationForLocations(positionalRequest, function(results, status)  
{
  if (status == google.maps.ElevationStatus.OK) {
    // Retrieve the first result
    if (results[0]) {
      var seaLvl = parseFloat(results[0].elevation.toFixed(1));
      dropElevation(seaLvl);
      document.getElementById("response").innerHTML = seaLevel;
    } else {
      alert("no result");
    }
   }
 }); 
```

像这样的东西：

```
var seaLvl = getElevation(latLng); 
```

将不起作用（在消息从服务器返回之前，该值不可用）。

# php - PHP time() 不诚实

> ID：12103804
> 
> 赞同：0
> 
> 时间：2012-08-24T05:52:29.870
> 
> 标签：php, datetime

我正在使用这个功能

php中的时间（）我在做

> 回显日期（“c”，时间（））；

但是它并没有返回我诚实的时间，因为我可以看到我的系统时间是 12:20 但输出是

> 2012-08-24T08:48:42+02:00

似乎是什么问题，我试着做：

> 回声日期（“r”，时间（））；

但观察到相同的结果

*只是对于可能会提出后者问题的人：您不需要设置任何时区，您只需要更改本地主机上的 php.ini 文件，您有一个字段“date.timezone”，您必须将其设置为相同的时区作为你的操作系统就是这样*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:53:26.473

您可能必须先设置时区。我想这将是问题所在。检查[date_default_timezone_set](http://php.net/manual/en/function.date-default-timezone-set.php)。要检查您当前的时区，请使用[date_default_timezone_get](http://php.net/manual/en/function.date-default-timezone-get.php)。从 PHP5.4 开始，如果不设置任何内容，PHP 默认使用 UTC。（查看手册页）。

# android - Vimeo 无法在 Android 中播放

> ID：12103805
> 
> 赞同：1
> 
> 时间：2012-08-24T05:52:38.397
> 
> 标签：android, vimeo

我正在开发一个 android 应用程序，我必须在其中播放 vimeo 视频。视频以 URL 的形式给出。我想将它加载到`webview`. 我试过了，但视频无法播放。我得到了视频的静止图像，但它没有播放，

```
videoPlayer = (WebView) findViewById(R.id.videoPlayer);   

    WebSettings webViewSettings = videoPlayer.getSettings();
    webViewSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webViewSettings.setJavaScriptEnabled(true);
    webViewSettings.setPluginsEnabled(true);
    webViewSettings.setBuiltInZoomControls(true);
    webViewSettings.setPluginState(PluginState.ON); 
    videoPlayer.loadData("<iframe src=\</**HERE COMES VIDEO LINK*/>width=\"1280\" 
                           height=\"720\" frameborder=\"0\" 
                           webkitAllowFullScreen mozallowfullscreen 
                           allowFullScreen></iframe>", "text/html", "utf-8"); 
```

谁能告诉我哪里出错了？或 Vimeo 视频无法在 Android 上播放。是否有任何 vimeo 播放器插件或类似 Android 的 Flash 播放器之类的东西，或者任何人都可以建议我解决这个问题的任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:14:29.260

尝试为 youtube 普通视频链接做这样的事情。它对我有用：

```
 String videoPoP = "http://www.youtube.com/v/A6kCkkLo6Rw?";
        webview.getSettings().setJavaScriptEnabled(true);
        String widthAndHeight = "width=\"" + widthdp + "\" height=\"" + heightdp + "\"";            

        String temp = "<object "
                + widthAndHeight
                + ">"
                + "<body style='margin:0;padding:0;'>"
                + "<param name='allowFullScreen' value='false'>"
                + "</param><param name='allowscriptaccess' value='always'>"
                + "</param><embed src='"
                + videoPoP
                + "'"
                + " type='application/x-shockwave-flash' allowscriptaccess='always' allowfullscreen='true'"
                + widthAndHeight + "></embed></object>";

        webview.loadData(temp, "text/html", "utf-8"); 
```

以下代码也适用于 vimeo 视频。所以试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:53:10.550

我遇到了同样的问题。如文档中所述：

> 为了在您的应用程序中支持内联 HTML5 视频，您需要打开硬件加速，并设置 WebChromeClient。

更多信息在这里：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

但是，它不适用于所有设备，尤其是那些使用 Froyo 的设备。我仍在尝试寻找解决方法（至少对于 Dailymotion 和 Vimeo 视频）

# nginx - 如何/不能使用 ini_set() 方法在运行时设置 php.ini 值？

> ID：12103807
> 
> 赞同：1
> 
> 时间：2012-08-24T05:52:50.143
> 
> 标签：nginx, php, ini

我使用 nginx 作为网络服务器，当我做 phpinfo(); 它使用 /etc/php5/fpm/php.ini

现在在我的 php 代码中，我正在尝试使用以下代码设置文件上传大小和最大文件上传。

```
ini_set('max_file_uploads', "50");     
ini_set('upload_max_filesize', '250M'); 
```

但是当我执行 ini_get('max_file_uploads') 并回显该值时，它将默认值显示为 20，实际上我无法使用 ini_set() 在运行时更改任何 ini 值。

关于如何在运行时使用 php 代码更改这些值的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:02:54.417

并非所有 PHP ini 指令都可以在运行时更改（通过 ini_set）。请参阅PHP 手册[的文件上传部分和](http://www.php.net/manual/en/ini.core.php#ini.sect.file-uploads)[可变性值的定义](http://www.php.net/manual/en/configuration.changes.modes.php)，它们是 PHP_INI_SYSTEM 和 PHP_INI_PERDIR 以获得所需的设置，两者都不能在运行时设置。

要仅在应用程序的一部分中获取这些设置，您可能需要妥协并在 php.ini 文件中全局设置 max_file_uploads 设置（因为它是 PHP_INI_SYSTEM），然后使用您最喜欢的每个目录配置机制（.htaccess , [.user.ini (in >5.3)](http://www.php.net/manual/en/configuration.file.per-user.php)等) 为应用程序的特定部分设置upload_max_filesize。[请参阅此处](http://www.php.net/manual/en/configuration.changes.php)以获取良好的说明。

# c++ - C++ 从格式化的 .txt 文件中读取

> ID：12103813
> 
> 赞同：0
> 
> 时间：2012-08-24T05:53:08.917
> 
> 标签：c++, stream

我需要从逗号分隔的 .txt 文件中读取，其中每一行看起来像这样：

> 1234,0987,鲍勃,23.45

（即 int、int、string、double）

使用以下设置代码：

```
fstream myFile;
myFile.open("textfile.txt" , ios::in);
if (myFile.is_open()) {
    //read in characters as appropriate type until ','
} 
```

我试过使用

```
myFile >> int1 ...... 
```

但我不确定应该如何处理逗号；在读取整数时它们可能会被过滤掉，但是当我到达字符串时这会起作用吗？

我的一位同学建议使用 stringstream，但我发现 cplusplus.com 上的文档超出了我的想象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:57:08.617

您可能想尝试该`std::getline`功能：

```
istream& getline ( istream& is, string& str, char delim );
istream& getline ( istream& is, string& str ); 
```

（来自[http://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)）

# c# - C#：C# 中的日期格式，用于插入到 sql server

> ID：12103822
> 
> 赞同：2
> 
> 时间：2012-08-24T05:54:06.557
> 
> 标签：c#

我有一个日期格式的文本框`dd/MM/yyyy`，我想将其转换为`yyyy-MM-dd`将其插入数据库的格式。

我试过

```
Convert.DateTime/DateTime.ParseExact 
```

但它总是给我系统的默认日期格式。

我不知道在 C# 中转换它的任何其他方法...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T05:58:04.287

您根本不应该将其转换为字符串*以*将其插入数据库。（我对推荐这种方法的所有其他答案感到惊讶。）

相反，您应该使用参数化 SQL，并将参数的值设置为`DateTime`您获得的值。*无论如何*，您都应该使用参数化 SQL以避免 SQL 注入攻击，并保持代码和数据分离。它避免了不必要的字符串转换（每一个都是潜在的痛点）这一事实是另一个好处。

您问题的这一部分表明您有一个基本的误解：

> 我使用 Convert.DateTime/DateTime.ParseExact 它总是给我系统日期格式。

这些方法会给你一个`DateTime`. A`DateTime`没有*格式*。当您打电话时，`ToString`您只会获得当前文化的默认格式，但这*不是*价值的一部分。就像数字一样 - 16 和 0x10 是同一个数字，并且`int`不“知道”它是十进制还是十六进制；这是一个毫无意义的概念。

所有这一切都超出了您当前的问题，试图保持您的代码库在类型方面保持清洁。您应该尽可能多地以最合适的形式保存数据*，*并确保您在所有方面都准确理解这些数据的含义。转换为其他类型的通信（如字符串）应仅在 API/系统边界处进行，并且尽可能避免（例如，在这种情况下使用参数化 SQL）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:17:04.373

**有许多方法，但没有一个比使用参数化 SQL 更有用和合乎逻辑。**这是[维基百科页面](http://en.wikipedia.org/wiki/SQL_injection#Parameterized_statements)！有关参数化 SQL 语句的更多信息，请访问此[编码恐怖](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)页面！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T05:57:14.170

实际上没有必要改变它。这只是显示格式，但里面的“日期时间”对象保持不变。根据您要插入的方式，您可以使用：

```
string dateValue = DateTime.Now.ToString("yyyy-MM-dd"); 
```

并将其插入到您的查询字符串中。

**编辑**

但正如 Jon Skeet 评论的那样，永远不应该像这样手动构建查询字符串。像参数化 SQL 或使用 NHibernate 这样更简洁的方法应该是您的首要关注点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-09T07:50:19.523

希望这有效！

DateTime 变量= Convert.ToDateTime(*你的日期*);

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-24T05:57:29.330

你可以像这样格式化它：

```
string sDateTime = Convert.ToDateTime(txtTextBox.Text).ToString("yyyy-MM-dd"); 
```

**编辑**

在准备信息以输入数据库时​​，有很多方法可以给猫剥皮。我在这里的解决方案直接回答了 OP，但是我非常承认有更好的方法来做到这一点。

我建议也阅读 Jon Skeet 在此页面上的帖子，因为他提出了一些关于 OP 方法的非常有效的观点。

希望有帮助。

# linux - PCI-DSS 1.3.3/1.3.5，限制从 DMZ 到 Internet 的出站访问

> ID：12103826
> 
> 赞同：1
> 
> 时间：2012-08-24T05:54:40.620
> 
> 标签：linux, centos, sysadmin, pci-dss

我们正在获得 PCI 1 级，如果有人能帮助阐明 PCI-DSS 1.3.3 和 1.3.5 要求，我将非常感激，其中规定：

1.3.3 - “不允许任何直接路由入站或出站用于 Internet 和持卡人数据环境之间的流量” 1.3.5 - “限制从持卡人数据环境到 Internet 的出站流量，使得出站流量只能访问 IP 地址在非军事区内。”

现在，我们正在使用瞻博网络 SRX 防火墙，并且在 DMZ 中有网络服务器，在 Trusted 中有 mysql 数据库服务器。对于 Trusted，我们刚刚完成了对公开的所有出口的锁定，并且必须在 DMZ 中设置一个代理服务器来获取更新（yum、clamav、waf-rules 等）以从中获取更新。

但我们并没有真正期望 DMZ 也需要像我们在 Trusted 上所做的那样完全锁定出口。而且我确实发现在 DMZ 上进行出口锁定有点挑战（除非我弄错了），因为我们的代理也住在那里，需要对公众进行出站访问以获取更新等等。通过 IP 将它们列入白名单具有挑战性，因为第 3 方供应商拥有不断变化的 IP。

所以我的问题是，究竟需要多少“限制”？对于我们的 Trusted，我们有一个“拒绝所有”出口和一个它可以访问的选定 IP 地址的白名单。DMZ 也需要这个吗？或者 DMZ 是否可以仅基于端口进行“全部拒绝”，这会使事情变得容易得多，因为我们不必担心镜像和 3rd 方服务的不断变化的 IP 地址。

我发现了一些基于“主机名”进行智能过滤的代理设备（换句话说，动态 IP 白名单），但它们似乎确实要花很多钱。

如您所见，我正在寻找一些答案，我们的审计员帮不上什么忙，他只是说需要锁定它。如果这里有人有 PCI 审计经验，我很想听听您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:23:14.473

如果您限制了对 DMZ 的入站和出站访问，并且没有从 DMZ 直接访问 Internet，那么您已满足要求。

通过使用代理，大多数 QSA 将同意您已删除直接访问。如果某些服务的代理不可用，那么您可以将它们从与持卡人数据环境相同的 DMZ 中删除（例如，如果它们不属于即时服务的一部分），或者与您的 QSA 进行讨论。您可能需要实施补偿控制或查看其他创造性解决方案。

您需要让您的 QSA 相信这些是对限制的合法放宽。这确实是他们应该能够查看您的文档和实施并给您直接是或否的地方。

与许多 PCI 要求一样，解释具有灵活性。您可以在本文档中找到有关每个要求的意图的更多信息：[https ://www.pcisecuritystandards.org/documents/navigating_dss_v20.pdf](https://www.pcisecuritystandards.org/documents/navigating_dss_v20.pdf)

# jquery - 获取html5的值 用jQuery

> ID：12103827
> 
> 赞同：12
> 
> 时间：2012-08-24T05:54:41.980
> 
> 标签：jquery, html

前几天我在 stackoverflow 中阅读了答案，我读到“jquery 可以获取 html5 的值`<data-something='value'>`”，我在寻找其他内容时读到了这个，所以我只是阅读而不分析这个。而现在我真的需要完成这个任务。

问题是：这是可能的还是我只是误解了阅读内容？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-24T05:59:00.780

```
<div id="test" data-key="abcd">hahahah</div>

<script type="text/javascript">
var value = $("#test").data("key");
alert(value); //This will show you "abcd"
</script> 
```

我认为数据不仅适用于 HTML5，而且适用于 HTML4

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T05:57:45.287

您可以使用`data()`并让 jQuery 尝试解码类型并返回类型化的值。

如果您想要原始字符串，请使用`attr("data-x")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T07:19:16.693

```
<div class="ch-content" data-type=plant></div> 
```

从属性“数据类型”中获取值

```
var type = $(".ch-content").attr('data-type');
Console.log(type); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T17:38:59.590

您可以使用本机 JavaScript：

```
<div id="test" data-key="abcd">hahahah</div>
<script type="text/javascript">
var test= document.getElementById('test');
var keyCount = test.getAttribute('data-key');
</script> 
```

# php - getting content of variables

> ID：12103833
> 
> 赞同：-1
> 
> 时间：2012-08-24T05:55:12.600
> 
> 标签：php

I am trying to learn PHP and stumbled across this problem of having bad keys in my array i have this function

```
public function pdf_read_root()
{   
    $this->root = $this->pdf_resolve_object( $this->c, $this->pdf_find_root());

} 
```

but `$this->root` is returning the wrong values, how do i get the individual contents, `$this->c & $this->pdf_find_root` to see what is being used in `pdf_resolve_object`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:59:54.013

```
public function pdf_read_root()
{   

    $this->root = $this->pdf_resolve_object( $this->c, $this->pdf_find_root());
    echo "<pre>";
    echo "<br> Value of member variable c is: ". print_r($this->c, true);
    echo "<br> Value of method pdf_find_root() is: ". print_r($this->pdf_find_root(),true);
    echo "<br> Value of member variable root is: ". print_r($this->root, true);
    echo "</pre>";

} 
```

# git - How to run 'git gui' on windows7?

> ID：12103834
> 
> 赞同：0
> 
> 时间：2012-08-24T05:55:12.310
> 
> 标签：git

I have install Git for Windows from 'http://msysgit.github.com/' I am running Windows 7\.

I checkout android source code using their tool 'repo'. and I use the 'Git Gui' to open the repository. I get this error:

Can you please tell why it is complaining the '.git/config'?

```
fatal: bad config file line 1 in .git/config
fatal: bad config file line 1 in .git/config
    while executing
"exec C:/Programs/Git/libexec/git-core/git-config.exe --global --add gui.recentrepo C:/Programs/cygwin/home/mike/Src/android-jb/packages/a..."
    ("eval" body line 1)
    invoked from within
"eval exec $opt $cmdp $args"
    (procedure "git" line 23)
    invoked from within
"git config --global --add gui.recentrepo $path"
    (procedure "_append_recentrepos" line 16)
    invoked from within
"_append_recentrepos [pwd]"
    (procedure "choose_repository::_do_open2" line 12)
    invoked from within
"choose_repository::_do_open2 ::choose_repository::__o1::__d"
    invoked from within
".buttons.next invoke "
    invoked from within
".buttons.next instate !disabled { .buttons.next invoke } "
    invoked from within
".buttons.next instate pressed { .buttons.next state !pressed; .buttons.next instate !disabled { .buttons.next invoke } } "
    (command bound to event) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:16:38.500

尝试自己创建一个简单的 git 存储库并创建一些提交。调用 gitk 看看 gitk 和 git-gui 是否有效

# javascript - 选择器不要全选

> ID：12103835
> 
> 赞同：0
> 
> 时间：2012-08-24T05:55:14.993
> 
> 标签：javascript, jquery, html, jquery-selectors

`data-id="mbus"`例如，我有很多带有属性的div 。当我尝试使用`$('tbody[data-id="mbus"]')`它来选择所有这些时，总是没有选择其中之一。

这是 jsfiddle 示例：http: [//jsfiddle.net/tumoxep/D9QbM/1/](http://jsfiddle.net/tumoxep/D9QbM/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:58:14.610

它工作正常，但你有 2`tbody`和`data-id`1 `table`。

# jquery - 通过知道 Jquery 中的字段值从 Json 数组中检索值

> ID：12103837
> 
> 赞同：0
> 
> 时间：2012-08-24T05:55:46.497
> 
> 标签：jquery, json

我有一个看起来像的 json 数组，

```
0: {NodeID:1, Node_Location:30,0,60,30, Node_CurrentURL:http://google.com, Node_Title:google,Node_Amount: 10}
1: {NodeID:2, Node_Location:90,90,160,30, Node_CurrentURL:http://gmail.com, Node_Title:gmail,Node_Amount: 30}
2: {NodeID:3, Node_Location:180,160,260,30, Node_CurrentURL:http://asp.net, Node_Title:asp,Node_Amount: 40} 
```

我的 json 数组是从 webapi 接收的，并希望在客户端显示。

我如何通过知道 NodeID 来检索 Node_Amount？请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:02:19.430

你可以这样做：

```
$.each(jsonarray, function(index, value)
{
    if (value.NodeID == specificnodeid)
    {
        //store it some place safe
        return;
        //or alternatively you can return the value as
        // return value;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:16:50.530

假设这是解析后的 json 数组的输出模型：

```
var json = {
  0: {
    NodeID: 1,
    Node_Location: [],
    Node_CurrentURL: '',
    Node_Title: '',
    Node_Amount: 10
  },
  1: {
    NodeID: 2,
    Node_Location: [],
    Node_CurrentURL: '',
    Node_Title: '',
    Node_Amount: 30
  }
}; 
```

如果你知道`NodeID`它与根对象加一相同，并且你想`Node_Amount`知道 id 号，它可能就像这样简单：

```
var id = 1;
var amount = json[String(id-1)].Node_Amount; // 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:19:03.160

如果你预处理数组，我们称之为`NodeArray`，

```
var NodeArray = [{
  NodeID: 1,
  Node_Location: [30, 0, 60, 30],
  Node_CurrentURL: "http://google.com",
  Node_Title: "google", 
  Node_Amount: 10
}]; 
```

进入一个关联数组`Nodes`，键绑定到`NodeID`

```
var Nodes = {};
for (var i = 0; i < NodeArray.length; i++) {
  Nodes[NodeArray[i].NodeID] = NodeArray[i];
} 
```

`Nodes`然后您可以通过`NodeID`( `Nodes[NodeID]`.)轻松访问任何元素

```
console.log(Nodes[1]);
// {NodeID:1, Node_Location:[30,0,60,30], Node_CurrentURL:"http://google.com", Node_Title:"google", Node_Amount:10} 
```

`NodeID`这仅依赖于独特且存在的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:23:39.163

你的对象不是真的有效，我猜字符串被引用等等，它真的看起来像：

```
var obj = {
    0: {NodeID:1, Node_Location:'30,0,60,30', Node_CurrentURL:'http://google.com', Node_Title:'google',Node_Amount: 10},
    1: {NodeID:2, Node_Location:'90,90,160,30', Node_CurrentURL:'http://gmail.com', Node_Title:'gmail',Node_Amount: 30},
    2: {NodeID:3, Node_Location:'180,160,260,30', Node_CurrentURL:'http://asp.net', Node_Title:'asp',Node_Amount: 40}
       }; 
```

您可以通过以下方式访问值：

```
var URL = obj[0].Node_CurrentURL; 
```

[**小提琴**](http://jsfiddle.net/jCsyC/)

# c# - Executing SQL scripts via Ado.NET with the results like in SSMS

> ID：12103842
> 
> 赞同：0
> 
> 时间：2012-08-24T05:56:24.813
> 
> 标签：c#, sql-server, tsql, ado.net, ssms

I have one batch file with contents like:

```
@Echo Off    
goto skipcomments
rem  
:skipcomments

call setup-CIpatch-db.bat
if not "%UserName%"=="" goto ok

echo You must edit setup-CIpatch-db.bat to set variables.  
echo This script no longer takes command line arguments.
goto end
:ok

if exist *.out  del *.out

echo CoreIssue FleetOne Maintenance Release
echo working... DO NOT CLOSE
REM ************************************************
REM Script in which Print Statement has been removed
REM ************************************************

REM ************************************************
REM Create Scripts for Tables
REM ************************************************

REM ************************************************
REM Alter Scripts for Tables
REM ************************************************
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i AlterTablecardBacktable07312012.sql -o AlterTablecardBacktable07312012.out

REM ************************************************
REM Data Updates
REM ************************************************

osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i AlterDrpandCrePrimKeyCardback.sql -o AlterDrpandCrePrimKeyCardback.out

REM ************************************************
REM Performance Updates
REM ************************************************

REM ************************************************
REM Security Update Scripts
REM ************************************************

REM ************************************************
REM Reports scripts
REM ************************************************

REM ************************************************
REM New or Altered Stored Procedures
REM ************************************************
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_qsel.sql -o sp_RejectAccounts_qsel.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_RejectAccounts_sel.sql -o sp_RejectAccounts_sel.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i sp_GetCompanyRecordCardRequest_01Aug2012.sql -o sp_GetCompanyRecordCardRequest_01Aug2012.out
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i SPGetCreditTransactions.sql -o SPGetCreditTransactions.out

REM ************************************************
REM Grant.sql for new or altered SP
REM ************************************************

REM ************************************************
REM Platform TranID Change Scripts
REM ************************************************

REM ************************************************
REM Version number update
REM ************************************************
osql -S %ServerName% -d %DBName% -U %sql_login% -P %sql_passwd% -n -i version.sql -o version.out

echo All Scripts have been started 
:end
pause 
```

The script executes SQL files in the same folder and generates files with the extension of '.out'. These just contain the result; the same as when we execute any query in SSMS messages window, like 1 row affected etc. After the batch file has finished executing all scripts (via ADO.net/C#), we have to check the out files for keywords like "error" etc.

Now I have been given task to automate this and here is what I am doing:
Fetch the .SQL file name in tha batch file and execute them using SqlConnection, SqlCommand etc. The problem is that when the query has any error in it, an exception is thrown. What I need is that the query should execute whatsoever and I should be able to get the results. (like 1 row affected etc). Like in SSMS, when we execute any bad query, it executes and show the error in the Messages Pane.

Can anyone guide me ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:27:20.120

[查看MSDN](http://msdn.microsoft.com/en-us/library/aa214012.aspx)上的文档，*oSql*支持 2 个参数`-m`，`-r`这应该可以让您更好地处理错误输出。

此外，作为批处理脚本的一部分，您可以检查错误级别，如下所示

*注意：我使用标签创建了一个函数来执行我的脚本，而无需重复所有错误代码*

```
REM run list of scripts
call :UpgradeDatabase AlterTablecardBacktable07312012.sql
call :UpgradeDatabase version.sql

goto :eof

:UpgradeDatabase

set upgradeScript=%~1

echo Running script %upgradeScript% on database %databaseName%...
sqlcmd -S %serverName% -d %databaseName% -U %userName% -P %password% -i %upgradeScript% -o %logPath%\%upgradeScript%.log
if %errorlevel% == 0 (
    echo Script %upgradeScript% on database %databaseName% successful
) ELSE (
    echo Script %upgradeScript% on database %databaseName% FAILED
    echo. > %logPath%\ERROR_%upgradeScript%.log
)
echo.
echo.

goto :eof 
```

# ruby-on-rails - error: "Missing these required gems: hobo" while hobo is already installed

> ID：12103843
> 
> 赞同：0
> 
> 时间：2012-08-24T05:56:29.380
> 
> 标签：ruby-on-rails, ubuntu

I have been trying to get this solved for 10 straight hours but still has no clue. I am trying to get this rails app running but it gives me some strange gem missing error messages:

```
$ ~/Projcets/AndroidServer2# script/server
=> Booting WEBrick
=> Rails 2.3.8 application starting on http://0.0.0.0:3000
no such file to load -- hobo_support
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:34:in `gem_original_require'
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:34:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/hobo-1.4.0.pre8/lib/hobo.rb:1
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/rails/gem_dependency.rb:215:in `load'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:307:in `load_gems'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:307:in `each'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:307:in `load_gems'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:169:in `process'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:113:in `send'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/initializer.rb:113:in `run'
/home/edward/Projcets/AndroidServer2/config/environment.rb:11
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/gems/rails-2.3.8/lib/commands/server.rb:84
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
script/server:3
Missing these required gems:
  hobo  

You're running:
  ruby 1.8.7.334 at /usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/bin/ruby
  rubygems 1.4.2 at /usr/share/ruby-rvm/gems/ruby-1.8.7-p334, /usr/share/ruby-rvm/gems/ruby-1.8.7-p334@global 
```

when the gem is already installed:

```
$ ~/Projcets/AndroidServer2# gem list

...

hobo (1.4.0.pre8, 1.3.0, 1.0.3)
hobo_fields (1.4.0.pre8, 1.3.0)
hobo_support (1.4.0.pre8, 1.3.0)
hobofields (1.0.3)
hobosupport (1.0.3)

... 
```

I am running Rails 2.3.8 with Ruby 1.8.7\. Any idea what is happening?

Edit: Re: Blue Fish,

Here is the rvm info:

```
$~/Projcets/AndroidServer2/script# rvm info

ruby-1.8.7-p334:

  system:
    uname:       "Linux edward-VirtualBox 3.2.0-23-generic-pae #36-Ubuntu SMP Tue Apr 10 22:19:09 UTC 2012 i686 i686 i386 GNU/Linux"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.6.9 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/]"

  ruby:
    interpreter:  "ruby"
    version:      "1.8.7"
    date:         "2011-02-18"
    platform:     "i686-linux"
    patchlevel:   "2011-02-18 patchlevel 334"
    full_version: "ruby 1.8.7 (2011-02-18 patchlevel 334) [i686-linux]"

  homes:
    gem:          "/usr/share/ruby-rvm/gems/ruby-1.8.7-p334"
    ruby:         "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334"

  binaries:
    ruby:         "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/bin/ruby"
    irb:          "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/bin/irb"
    gem:          "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/bin/gem"
    rake:         "/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/bin/rake"

  environment:
    PATH:         "/usr/share/ruby-rvm/gems/ruby-1.8.7-p334/bin:/usr/share/ruby-rvm/gems/ruby-1.8.7-p334@global/bin:/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/bin:/usr/share/ruby-rvm/bin:/home/edward/perl5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/edward/.rvm/bin"
    GEM_HOME:     "/usr/share/ruby-rvm/gems/ruby-1.8.7-p334"
    GEM_PATH:     "/usr/share/ruby-rvm/gems/ruby-1.8.7-p334:/usr/share/ruby-rvm/gems/ruby-1.8.7-p334@global"
    MY_RUBY_HOME: "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334"
    IRBRC:        "/usr/share/ruby-rvm/rubies/ruby-1.8.7-p334/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

and bundle list:

```
bundle list
Gems included by the bundle:
  * RubyInline (3.11.3)
  * ZenTest (4.8.2)
  * abstract (1.0.0)
  * actionmailer (3.0.17)
  * actionpack (3.0.17)
  * activemodel (3.0.17)
  * activerecord (3.0.17)
  * activeresource (3.0.17)
  * activesupport (3.0.17)
  * arel (2.0.10)
  * builder (2.1.2)
  * bundler (1.1.5)
  * dryml (1.3.0)
  * erubis (2.6.6)
  * hobo (1.3.0)
  * hobo_fields (1.3.0)
  * hobo_support (1.3.0)
  * i18n (0.5.0)
  * image_science (1.3.2.1.Asynchrony dc36dda)
  * json (1.7.5)
  * mail (2.2.19)
  * mime-types (1.19)
  * polyglot (0.3.3)
  * rack (1.2.5)
  * rack-mount (0.6.14)
  * rack-test (0.5.7)
  * rails (3.0.17)
  * railties (3.0.17)
  * rake (0.9.2.2)
  * rdoc (3.12)
  * thor (0.14.6)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * will_paginate (3.0.3) 
```

# android - ICS taste for apps on SDK less than 11

> ID：12103849
> 
> 赞同：0
> 
> 时间：2012-08-24T05:57:18.443
> 
> 标签：android, themes, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

Recently i have seen some android apps that runs on SDK < 3.0 but they have the same look of ICS applications.

Here is an example: [https://play.google.com/store/apps/details?id=net.hubalek.android.reborn.beta](https://play.google.com/store/apps/details?id=net.hubalek.android.reborn.beta)

If you run this app on an old platform (2.x) you still get the feel of ICS.

So, Does any body know how to do this ?

Also, I have seen a related link on android.com but i couldn't make good use of it. Here is the link: [http://developer.android.com/design/downloads/index.html](http://developer.android.com/design/downloads/index.html)

Thanks very much :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:36:03.380

对于功能，使用片段和加载器的[V4 支持库](http://developer.android.com/tools/extras/support-library.html)。ActionBar 不支持，但可以伪造。对于外观，下载 Holo 主题资源，在您的应用样式/drawables 中导入和使用它们。

# objective-c - Core-Plot，是否有一种自动方法来管理轴上的数字数量？

> ID：12103855
> 
> 赞同：0
> 
> 时间：2012-08-24T05:57:58.223
> 
> 标签：objective-c, ios, core-plot

如下图所示，此示例中的 x 轴非常拥挤。我知道可以通过以下方式在 Core-Plotr 中更改比例：

```
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(1.0f); 
```

...所以它会更容易阅读。

我的问题是，是否有一种方法可以自动缩放轴，所以当它变得太拥挤时，轴标签会更改以继续可读？

我想一种方法是检查数据点的数量并通过代码进行更改，但如果可以通过 Core-Plot 获得它会很方便。

这是一张显示我的测试图的图片：

![在此处输入图像描述](../Images/2525bc1b8772e921147378743e030ba5.png)

在这个阶段什么时候得到我想改变它，所以它显示每 5 个数字，然后每 10 个等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:34:23.103

尝试`CPTAxisLabelingPolicyAutomatic`标签政策。Plot Gallery 示例应用程序中有一个演示，它显示了所有可用的标签策略。

# python - Calculating nth fibonacci number using the formulae in python

> ID：12103861
> 
> 赞同：5
> 
> 时间：2012-08-24T05:58:16.507
> 
> 标签：python, algorithm, fibonacci

I am calculating the n-th fibonacci number using (a) a linear approach, and (b) [this](http://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression) expression

Python code:

```
'Different implementations for computing the n-th fibonacci number'

def lfib(n):
    'Find the n-th fibonacci number iteratively'
    a, b = 0, 1
    for i in range(n):
        a, b = b, a + b
    return a

def efib(n):
    'Compute the n-th fibonacci number using the formulae'
    from math import sqrt, floor
    x = (1 + sqrt(5))/2
    return long(floor((x**n)/sqrt(5) + 0.5))

if __name__ == '__main__':
  for i in range(60,80):
    if lfib(i) != efib(i):
      print i, "lfib:", lfib(i)
      print "   efib:", efib(i) 
```

For n > 71 I see that the two functions return different values.

Is this due to floating point arithmetic involved in efib()? If so, is it then advisable to calculate the number using the [matrix form](http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T06:01:22.040

您确实看到了舍入错误。

矩阵形式是更准确*和*更快的算法。[Literateprograms.org](http://en.literateprograms.org/Fibonacci_numbers_%28Python%29)列出了一个很好的实现，但它也列出了以下基于卢卡斯数的算法：

```
def powLF(n):
    if n == 1:     return (1, 1)
    L, F = powLF(n//2)
    L, F = (L**2 + 5*F**2) >> 1, L*F
    if n & 1:
        return ((L + 5*F)>>1, (L + F) >>1)
    else:
        return (L, F)

def fib(n):
    if n & 1:
        return powLF(n)[1]
    else:
        L, F = powLF(n // 2)
        return L * F 
```

看看[关于算法的 MIT 开放课件课程的第 3 讲，以](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-3-divide-and-conquer-strassen-fibonacci-polynomial-multiplication/)对矩阵方法进行很好的分析。

上述算法和矩阵方法都具有 Θ(lg n) 复杂度，就像您使用的朴素递归平方方法一样，但没有舍入问题。卢卡斯数字方法具有最低的常数成本，使其成为更快的算法（大约是矩阵方法的两倍）：

```
>>> timeit.timeit('fib(1000)', 'from __main__ import fibM as fib', number=10000)
0.40711593627929688
>>> timeit.timeit('fib(1000)', 'from __main__ import fibL as fib', number=10000)
0.20211100578308105 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:05:13.197

> 这是由于 efib() 中涉及的浮点运算吗？

是的。你里面`efib`有

```
>>> log(x**72)/log(2)
49.98541778140445 
```

并且[Python 浮点数](http://docs.python.org/tutorial/floatingpoint.html)在 x86-64 硬件上具有大约 53 位的精度，因此您正在接近边缘运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-04T07:14:48.367

我有一个非常简单的纯 python 代码......

```
def fibonum(n):   # Give the nth fibonacci number
    x=[0,1]
    for i in range(2,n):
        x.append(x[i-2]+x[i-1])
    print(x[n-1]) 
```

# c++ - Debugging a TCP-Server

> ID：12103862
> 
> 赞同：0
> 
> 时间：2012-08-24T05:58:18.783
> 
> 标签：c++, sockets, tcp

I have a C++ application that accepts TCP connections from client applications.

After a seemingly random time of running fine (days), it stops receiving followup messages from the clients and only sees the first message on each TCP connection. After a re-start all is fine again.

The trouble is, this only happens on the production server where I have to restart is as soon as it gets stuck and I have been uanble to reproduce this on a lab machine. None of the socket operations seems to return an error, that I would see in my logfile and the application is huge so I can't just post the relevant part here.

First messages keep coming through all the time, only subsequent messages aren't received after a while. Even when my application stops receiving the followup-messages, I can see them comming in with Wireshark.

Any ideas how I might find out what is happening ? What should I be looking for ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:22:08.700

这里使用了任何配置设置？过去，我在服务器上设置了一个条件，即在处理 50,000 条消息后忽略消息。这是为了防止开发中的失控情况。此代码有一次上线，但未将配置设置更改为“允许无限消息”。结果与您描述的完全一样，2-3 天正常，然后消息发送正常，但只是被忽略，没有任何错误。

这可能不是这里的情况，但我提到它作为您可能需要查看的示例。

# android - 在android中以pdf格式显示sqlite数据库内容

> ID：12103863
> 
> 赞同：5
> 
> 时间：2012-08-24T05:58:28.780
> 
> 标签：android, sqlite, pdf

我在 Android 中有一个 Sqlite 数据库，我想在 PDF 文件中显示它的内容，方法是在按下按钮时在 Android 中动态构建它。

我知道[iText](http://sourceforge.net/projects/itext/)，但我想使用更简单的解决方案。任何人都可以帮我解决这个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:24:42.297

查看[droidtext](http://code.google.com/p/droidtext/)，它是适用于 Android 的 iText 库版本 2.1.7 的一个端口。

也有很多例子。开始使用[Helloworld](http://code.google.com/p/droidtext/source/browse/trunk/droidTextTest/src/examples/com/lowagie/examples/general/HelloWorld.java)。

```
public class HelloWorld {

        /**
         * Generates a PDF file with the text 'Hello World'
         * 
         * @param args
         *            no arguments needed here
         */
        public static void main(String[] args) {

                System.out.println("Hello World");

                // step 1: creation of a document-object
                Document document = new Document();
                try {
                        // step 2:
                        // we create a writer that listens to the document
                        // and directs a PDF-stream to a file
                        PdfWriter.getInstance(document, new FileOutputStream(android.os.Environment.getExternalStorageDirectory() + java.io.File.separator + "droidtext" + java.io.File.separator + "HelloWorld.pdf"));

                        // step 3: we open the document
                        document.open();
                        // step 4: we add a paragraph to the document
                        document.add(new Paragraph("Hello World"));
                } catch (DocumentException de) {
                        System.err.println(de.getMessage());
                } catch (IOException ioe) {
                        System.err.println(ioe.getMessage());
                }

                // step 5: we close the document
                document.close();
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T07:09:14.417

要将 Sqlite 数据库的内容显示为 pdf，您必须使用 itextpdf-5.2.1.jar。您可以从[此处下载](http://mvnrepository.com/artifact/com.itextpdf/itextpdf/5.2.1)

示例代码：

```
DatabaseHandlerofdatabase   dbHandler = new DatabaseHandlerofdatabase(this);

    SQLiteDatabase db = dbHandler.getWritableDatabase();

    Cursor c1 = db.rawQuery("SELECT * FROM tablename", null);

    String filename="nameoffile.pdf";

     Document document=new Document();  // create the document
     File root = new File(Environment.getExternalStorageDirectory(), "Notes"); 
     if (!root.exists()) {
         root.mkdirs();   // create root directory in sdcard
     }
     File gpxfile = new File(root,filename);  // generate pdf file in that directory
     PdfWriter.getInstance(document,new FileOutputStream(gpxfile));
     document.open();  // open the directory

     Paragraph p3=new Paragraph();  // to enter value you have to create paragraph  and add value in it then paragraph is added into document
     p3.add("Username : ");
     document.add(p3);

    // now for ad table in pdf use below code

     PdfPTable table = new PdfPTable(3); // Code 1

    // Code 2
     table.addCell("CATEGORY");
     table.addCell("BUDGET");
     table.addCell("USED BUDGET");

   // now fetch data from database and display it in pdf

    while (c1.moveToNext()) {

    // get the value from database

        String ex_bdgt = c1.getString(3);
        String used_bdgt = c1.getString(5);

         table.addCell(type);
         table.addCell(ex_bdgt);
         table.addCell(used_bdgt);

        int temp_ex=Integer.parseInt(ex_bdgt);
        ttlbud=ttlbud+temp_ex;
        int temp_used=Integer.parseInt(used_bdgt);
        usdbud=usdbud+temp_used;

    }

    // add table into document

    document.add(table);    
    document.addCreationDate();
      document.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T13:05:34.560

我尝试过 Ketul Patel 解决方案，该解决方案原则上很好，但我需要更改其中的一些内容。我改变了在目录中创建文件的方式，我从[这里](https://stackoverflow.com/questions/5625315/how-to-create-a-file-in-an-sdcard-directory)得到了这个想法，并且效果很好。我的最终代码是：

DatabaseHelper 是我在项目中创建的一个类，它扩展了 SQLiteOpenHelper。[阅读更多](http://developer.android.com/guide/topics/data/data-storage.html#db)

```
public void createPdf() throws FileNotFoundException, DocumentException {

    String dir = Environment.getExternalStorageDirectory()+File.separator+"myLogs";
    File folder = new File(dir);
    folder.mkdirs();

    File file = new File(dir, "LogHistory.pdf");

    Cursor c1 = database.rawQuery("SELECT * FROM " + DatabaseHelper.TABLE_LOG, null);
    Document document = new Document();  // create the document
    PdfWriter.getInstance(document, new FileOutputStream(file));
    document.open();

    Paragraph p3 = new Paragraph();
    p3.add("Your Log History for \n");
    document.add(p3);

    PdfPTable table = new PdfPTable(4);
    table.addCell("Date");
    table.addCell("Start");
    table.addCell("End");
    table.addCell("Total");

    while (c1.moveToNext()) {
        String date = c1.getString(3);
        String start = c1.getString(1);
        String end = c1.getString(2);
        String total = c1.getString(4);

        table.addCell(date);
        table.addCell(start);
        table.addCell(end);
        table.addCell(total);
    }

    document.add(table);
    document.addCreationDate();
    document.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:22:31.913

我在[fpdf Tutorials](http://www.fpdf.org/)的帮助下完成了 php 中的 PDF 实现。有了这个，我还获得了饼图和条形图的帮助，以在我的 pdf 中进行图形表示。这种格式还简化了将我们的 pdf 文件作为附件邮寄的过程，因为它可以以各种方式存储。

# .htaccess - Internel Sever Error and .htaccess file

> ID：12103875
> 
> 赞同：0
> 
> 时间：2012-08-24T05:59:47.893
> 
> 标签：.htaccess, zend-framework, tortoisesvn

I import a project via tortoise-svn to inside my wamp server's www folder.

but I got

> **Internel Sever Error**

in apache error log>

> [Fri Aug 24 11:04:45 2012] [alert] [client 127.0.0.1] C:/wamp/www/Myproject/.htaccess: Invalid command 'Header', perhaps misspelled or defined by a module not included in the server configuration, referer:http://localhost/

**this may not affect to that:** that project use zend, i set include_path in php.ini file like this

> include_path = ".;c:\php\includes;C:\wamp\www\ZendFramework-1.11.12\library\Zend"

but that project already have zend inside library folder.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:16:51.330

确保这在您的 apache 配置中未注释：

```
LoadModule headers_module modules/mod_headers.so 
```

该`Header`指令是 mod_headers 的一部分。如果没有加载该模块，它将引发错误。

# javascript - 控制 window.onbeforeunload 事件

> ID：12103876
> 
> 赞同：1
> 
> 时间：2012-08-24T05:59:51.903
> 
> 标签：javascript, jquery

出于好奇，我可以控制 window.onbeforeunload 事件，例如检查用户是决定离开页面还是留在页面中，如果是，我可以根据他的决定发出警报或某些功能，请告诉我

```
<script type="text/javascript">
$(window).bind("beforeunload",function(){
if(//stay on page)
alert("i want to stay on the page");
else //leave page
 alert("i want to leave the page");
});
</script> 
```

我知道 window.onbeforeunload 是一个事件，它给用户一个消息，告诉他也许你在离开之前忘记做某事，但这个任务只是出于好奇，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:15:16.047

您只能返回一个字符串，该字符串将显示一个对话框确认，显示您返回的字符串（但带有额外的确定/取消按钮来确认操作）。

```
<script type="text/javascript">
$(window).bind("beforeunload",function(){
return 'Are you sure you want to leave this page?';
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:07:31.053

你不能得到 的结果`onbeforeunload`。此外，即使您设法以某种方式设法获得结果，您也无法发出警报。您可能可以运行另一个功能。

> [现在允许 , 和 方法在`showModalDialog()`,和`alert()`事件期间不做任何事情。`confirm()``prompt()``pagehide`**`beforeunload`**`unload`](http://www.w3.org/TR/html5-diff/#changes-2011-05-25)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T01:53:26.790

放一个一秒的计时器。卸载时清除。应该可以，但没有测试。

```
window.addEventListener('beforeunload', function (event) {

  var timeId = setTimeout(yourFunctionIfTheUserStays, 1000);

  window.addEventListener('unload', function (event) {
    clearTimeout(timeId);
  })
  return 'Are you sure you want to leave this page?';
}); 
```

# shell - shell中的${}是什么意思？

> ID：12103883
> 
> 赞同：-2
> 
> 时间：2012-08-24T06:00:08.333
> 
> 标签：shell

大家，我在 bash 编程中有一个问题，就是我不知道 bash 脚本是什么意思：

```
${parameter:-word}
${parameter:=word}
${parameter:?word}
${parameter:+word}
${parameter:offset}
${parameter:offset:length}
${!prefix*}
${#parameter}
${parameter#word}
${parameter##word}
${parameter%word}
${parameter%%word}
${parameter/pattern/string}
${parameter//pattern/string} 
```

这个用法，谢谢你回答我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:04:54.000

如果您只是打开一个终端窗口并输入`man bash`，您将能够在 下找到所有这些`Parameter Expansion`。

事实上，由于这些*正是*手册页包含它们的形式（使用`parameter`and `word`）并且按照您拥有它们的相同顺序，我很惊讶您还不知道这一点。

一个例子是`${parameter:-word}`：

> 使用默认值。如果`parameter`未设置或为空，`word`则替换 的扩展。否则，`parameter`替换 的值。

所以，对于这种情况，如果它被设置，`${xyzzy:-plugh}`会给你一个值`${xyzzy}`，否则你会得到文字`"plugh"`。

我不会全部介绍，`bash`手册页会详细解释。“教人钓鱼……”等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:07:50.647

**参数扩展**

参数扩展格式如下：

```
${expression} 
```

其中表达式由匹配“}”之前的所有字符组成。在确定匹配的“}”时，不应检查由反斜杠或带引号的字符串转义的任何“}”以及嵌入式算术扩展、命令替换和变量扩展中的字符。

参数扩展的最简单形式是：

```
${parameter} 
```

详情见： http:
[//pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)

# c# - 加载图像停止问题

> ID：12103884
> 
> 赞同：4
> 
> 时间：2012-08-24T06:00:08.970
> 
> 标签：c#, winforms, loading

我有窗口形式。我放了一张加载图片`PictureBox`

当我加载表格时，我已经设置

```
PictureBox1.Visible = false; 
```

当我触发我设置的按钮的点击事件时

```
PictureBox1.Visible = true; 
```

但在那种情况下，有一些代码可以通过存储过程从数据库中检索数据。

当它将跳转到用于从加载图像停止加载的存储过程中检索数据的代码。

它不应该发生。它应该显示为正在加载。我使用了 .gif 加载图像。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:30:42.797

每次您在 eventHandler 中进行长时间的调用时，您都应该使用**BackgroundWorker**！BackgroundWorker*可以异步运行代码*，因此您的 button_click eventHandler 将在启动 worker 后立即结束。

```
// add a BackGroundWorker bwLoadData to your form

private void YOURBUTTON_Click(object sender, EventArgs e)
{
     PictureBox1.Visible = true;
     bwLoadData.RunWorkerAsync();
}
private void bwLoadData_DoWork(object sender, DoWorkEventArgs e)
{
     // access your db, execute storedProcedue and store result to
     e.Result = YOUR_DATASET_RECORDS_OR_ANYTHING_ELSE;
}
private void bwLoadData_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
     if (e.Result != null)
     {
          // e.g. show data on form
     } else {
          // e.g. error message
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:15:03.673

最有可能的是，当您运行存储过程时，UI 线程被阻塞了。您可以使用 a`BackGroundWorker`来从数据库中获取数据，这会创建另一个线程并且不会阻塞您的主线程。

或者您可以手动创建一个线程并使用它从数据库中检索数据。在 Windows 窗体中，作为最佳实践，最好使用另一个线程来运行外部系统调用，以免阻塞 UI 线程。

[后台工作者使用](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:06:30.060

造成这种情况的可能原因可能是通过加载图像和数据检索来共享同一线程。因此，您可以尝试使用多线程或异步调用来获取数据。很抱歉之前关于 ajax / javascipt web worker 的回答，我完全忽略了你提到的 windows 窗体。

# web-scraping - 整页无法访问

> ID：12103885
> 
> 赞同：0
> 
> 时间：2012-08-24T06:00:20.267
> 
> 标签：web-scraping

我已经刮掉了以下页面，我的问题是我想将我的代码重定向到所需的页面。我得到了页面，但它没有完全加载包含许多缺失的信息，这是为什么？

这是代码

```
 include("admin/LIB_http.php");
    include("admin/LIB_parse.php");
    include("admin/LIB_resolve_addresses.php");
    include("admin/LIB_http_codes.php");
    include("admin/database.php");

$action = "http://domestic-air-tickets.expedia.co.in/flights/initiate-booking";
$method="GET";                                    // GET method
$ref = "http://domestic-air-tickets.expedia.co.in/flights/results?from=DEL&to=HYD&depart_date=25/08/2012&adults=2&childs=0&infants=0&dep_time=0&class=Economy&airline=&carrier=&x=57&y=16&flexi_search=no ";   
                                    // Referer variable
$data_array['rnd_one'] = "O";  
$data_array['from'] = "DEL";  
$data_array['to'] = "HYD";  
$data_array['depart_date'] = "25/08/2012";  
$data_array['adults'] = "2";  
$data_array['childs'] = "0";
$data_array['dep_time'] = "0";    
$data_array['class'] = "Economy";    
$data_array['airline'] ="";    
$data_array['carrier'] = "";    
$data_array['timestamp'] = "1345783916448";    
$data_array['companyid'] = "110342";  
$data_array['source'] = "WL";  
$data_array['BIZ_ACTION_MODE'] = "VIEW_ORDER_CAPTURE";  
$data_array['topLevelRateRules'] = '{"cc":{"df":{"pg":{"f":250.0}}},"dc":{"df":{"pg":{"f":250.0}}},"nb":{"df":{"pg":{"f":250.0}}},"kc":{"df":{"pg":{"f":250.0}}},"ca":{"df":{"pg":{"f":250.0}}},"tax":{"CC":0.0, "DC":0.0, "NB":0.0, "KC":0.0, "CA":0.0}}';  
$data_array['emiJson'] = "{}";  
$data_array['out_no_legs'] = "1";  
$data_array['out_base_price'] = "8860";  
$data_array['out_adult_base'] = "8860";  
$data_array['out_taxes'] = "7678";  
$data_array['out_disc'] = "0";  
$data_array['out_price'] = "16538";  
$data_array['out_fare_key'] = "supp_INDIGO|si-90efea02-d16b-4cec-808a-3d79792ea2b2|fk_6E_311_1345859400000_E0DELHYD_true_";  
$data_array['out_leg_aircode_1'] = "6E";  
$data_array['out_leg_from_1'] = "DEL";  
$data_array['out_leg_fromCityName_1'] = "New Delhi";  
$data_array['out_leg_fromAirportName_1'] = "Indira Gandhi Airport";  
$data_array['out_leg_to_1'] = "HYD";  
$data_array['out_leg_toCityName_1'] = "Hyderabad";  
$data_array['out_leg_toAirportName_1'] = "Rajiv Gandhi International";  
$data_array['out_leg_via_1'] = "n";   
$data_array['out_leg_departs_date_1'] = "25/08/2012";   
$data_array['out_leg_flt_num_1'] = "311";   
$data_array['out_leg_arrives_date_1'] = "25/08/2012";   
$data_array['out_leg_fare_basis_1'] = "E0DELHYD";   
$data_array['out_leg_fare_class_1'] = "supp_INDIGO|si-90efea02-d16b-4cec-808a-3d79792ea2b2|";   
$data_array['out_leg_cabin_type_1'] = "E";   
$data_array['out_leg_refundable_1'] = "R";   
$data_array['out_leg_oa_1'] = "";   

$data_array['out_leg_arrives_1'] = "09:20"; 
$data_array['out_leg_departs_1'] = "07:20"; 
$data_array['out_leg_stops_1'] = "0"; 
$data_array['out_leg_departure_terminal_1'] = "Terminal 1D"; 
$data_array['ts'] = "10135741"; 
$data_array['fromCityName'] = "New Delhi"; 
$data_array['toCityName'] = "Hyderabad"; 
$response = http($target=$action, $ref, $method, $data_array, EXCL_HEAD);   

print_r($response); 
```

我无法上传图片，否则你可以看到页面与原始网站页面有何不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:02:51.103

我通过 var_dump $response 解决了它，然后分解以获取所需的 URL

# java - 同时上传文件和字符串

> ID：12103887
> 
> 赞同：0
> 
> 时间：2012-08-24T06:00:58.657
> 
> 标签：java, android, http

我已经成功地将文件从 Android 上传到我的服务器。我按照本[教程](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)进行操作，没有问题。现在我还需要发送一个字符串以及上传后将添加到文件名中的文件。例如：

上传我的文件 - myFile.mp3

上传我的字符串 = "|myString"

该文件需要以“myFile.mp3|myString”的形式存储在我的服务器上。

任何帮助将不胜感激。我只是不太确定在哪里放置要上传的字符串以及如何在 PHP 代码中检索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:04:56.427

我不相信这是可能的；您只能在标题、文件或基本文本中拥有一种内容类型（或一堆其他东西，但您正在谈论的有两种）。但是，您可以发布两篇单独的帖子，或者发布一篇包含文件字节和字符串的帖子（参数帖子，应用程序 www-x-form-urlencoded）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:10:14.530

尝试使用**multipart/form-data** POST 请求上传，您可以在标头中包含其他数据。

检查这篇文章：[Android发送图像并保存网址](https://stackoverflow.com/questions/7632737/android-send-a-image-and-save-url/7632849#7632849)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:23:54.993

如果绝对无法避免，可以将字符串放在请求头中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T23:10:14.897

在环顾四周并尝试不同的东西之后，它终于奏效了。我将此添加到我的 java 代码中：

```
dos.writeBytes(twoHyphens + boundary + lineEnd); 
dos.writeBytes("Content-Disposition: form-data; name=\"mystring\"" + lineEnd + lineEnd);
dos.writeBytes("myString" + lineEnd); 
```

这是我的PHP代码来获取字符串：

```
$myString="";       

if(isset($_POST['mystring'])) {
    $attachToFile = $_POST['myString']; 
} 
```

# php - 获取一行的id

> ID：12103888
> 
> 赞同：0
> 
> 时间：2012-08-24T06:00:59.197
> 
> 标签：php, mysql

```
<?php
session_start();
include("configdb.php");
if(!session_is_registered(username)){
header("location:index.php");
}
?>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Projects</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<link href="modalPopLite.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="modalPopLite.min.js"></script>
<script type="text/javascript">
$(function () {
   $('#popup-wrapper').modalPopLite({ openButton: '#clicker', closeButton: '#close-btn' });
});
function validateForm()
{
var x=document.forms["f1"]["project"].value;
  if (x==null || x=="")
  {
  alert("all fileds are required");
  return false;
}
}

function Confirm(form){
alert("Project has been activated!"); 
form.submit();
}
function unConfirm(form){
alert("Project has been Deactivated!"); 
form.submit();
}
</script>
</head>

<body>
<div id="costDiv">
<div id="divErc"></div>
<div id="costBack">

<?php

$sql="SELECT * FROM projects ";
$result=mysql_query($sql);

?>
<?php include("hor_menu.php");?>

<div id="container"><br/><div id="clicker" style="cursor:pointer; width:120px;margin-left:15px;color:#20358c; font-weight:bold"">Add New Project</div>
<div id="popup-wrapper" style="background-color: #ccc; height:150px">
<form action="addnewproject.php" method="post" name="f1" onSubmit="return validateForm();">
<table>
<tr>
<td><label><h4>Project :</h4></label></td>
<td><input type="text" name="new_project" id="project" class="text-input-pop" /></td>
<tr>
<td><label><h4>Country :</h4></label></td>
<td><select name="country" id="country" style="width:190px ; height:31px"> 
    <option value="Lebanon">Lebanon</option>
    <option value="Syria">Syria</option>
    <option value="UAE">UAE</option>
</select> </td>
</tr>
</tr>
<tr>
<td></td>
<td><input type="submit" value="Submit" class="styled-button-4" style="margin-left:130px;"/></td>
</tr>
</table>
</form> 
<a id="close-btn" href="#">Close</a></div><table border="0" cellpadding="5" cellspacing="1" align="center" style="text-align:center">

<form name="frmactive" method="post" action="">

<table width="350" border="0" cellspacing="1" cellpadding="5" align="center" style="margin-left:150px ; margin-right:auto ; margin-top:20px ; margin-bottom:auto ; position:absolute ; width:400px">
<tr>
<td align="left"><strong>Project</strong></td>
<td align="left"><strong>Country</strong></td>
<td align="center"><strong>Staus</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td><?php echo"<input type=\"hidden\" name=\"id\" value=" . $rows['p_id'] . " />"; echo $id;?></td>
<td><?php echo $rows['p_name']; ?></td>
<td><?php echo $rows['p_country']; ?></td>
<td><?php if ($rows['p_isActive'] == '1'){  ?>
<input name="activate" type="submit" value="Activate" disabled="disabled"/>
<input name="deactivate" type="submit" value="Deactivate" />

<?php
} else{
?>  
<input name="activate" type="submit" id="activate" value="Activate" />
<input name="deactivate" type="submit" id="deactivate" value="Deactivate" disabled="disabled"/>
<?php
    }

    if(isset($_POST['activate'])){

    echo $rows['p_id'];

    $sql="UPDATE projects SET p_isActive = '1' WHERE p_id = '".$rows['p_id']."'";
    $result = mysql_query($sql) or die(mysql_error());
    }

     ?>

</td>
</tr>
<?php
}
?>
</table>
</td>
</tr>
</table>
</form>
</body>
</html> 
```

如果我有这个代码。我想在单击激活时激活该行，而对于 deactivate 也是如此。我如何获取每行的 ID 以便根据 ID 进行更新。谢谢。我尝试使用隐藏字段，但它是不和我一起工作。我是新手。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:22:07.260

我认为您只需要使用 $rows['p_id'] 值设置一个变量。尝试这个：

```
 $activate = $rows['p_id'];

    $sql="UPDATE projects SET p_isActive = '1' WHERE p_id = '$activate'"; 
```

# java - Java，硒；编译代码时抛出异常

> ID：12103889
> 
> 赞同：1
> 
> 时间：2012-08-24T06:01:05.980
> 
> 标签：java, selenium, command-prompt, using

```
public class MainClass {

    public static void main(String [] args) throws ClassNotFoundException{
            //String[] xyz = {"Client1"};
            List<XmlSuite> suites = new ArrayList<XmlSuite>(); 
            XmlSuite suite=new XmlSuite();

            suite.setName("Demo");

            XmlTest test=new XmlTest(suite);
            List<String> groups=new ArrayList<String>();
            for(String arg:args){
                groups.add(arg);
            }
            List<XmlClass> classes =new ArrayList<XmlClass>();
            System.out.println(Class.forName("TrailAndTest.TestClass"));
            classes.add(new XmlClass(Class.forName("TrailAndTest.TestClass")));

            test.setXmlClasses(classes);
            test.setIncludedGroups(groups);

            suites.add(suite);  

            TestNG tng = new TestNG();
            tng.setXmlSuites(suites);

            tng.run();

        }

} 
```

在我的代码中，我编写的公共类被定义为“公共类 Mainclass”，并且文件以名称 MainClass.java 保存当我尝试从命令提示符执行此代码时出现错误：

> 1.  C:\Selenium\Code\Test\src\TrailAndTest\Mainclass.java:13: 类 MainClass 是公共的，应该在名为 MainClass.java 的文件中声明公共类 MainClass ^ 1 错误

我执行的操作：

> C:\Selenium\Code\Test>set path=%path%;"C:\Program Files\Java\jdk1.5.0_22\bin"
> 
> ```
> C:\Selenium\Code\Test>set
> CLASSPATh="C:\Selenium\Code\Test\bin;C:\Selenium\Code\
> Test\Jars\selenium-2.25.0\libs\commons-logging-1.1.1.jar;C:\Selenium\Eclipse\ecl
> ipse-jee-indigo-win32-x86_64\eclipse\plugins\org.testng.eclipse_6.7.0.20120808_0
> 858\libtesting.jar;C:\Selenium\Eclipse\eclipse-jee-indigo-win32-x86_64\eclipse\p
> lugins\org.eclipse.wb.runtime.lib_1.5.0.r37x201206111201\lib\cglib-nodep-2.2.jar
> ;C:\Selenium\ExternalJar\selenium-server-standalone-2.21.0.jar;"
> 
> C:\Selenium\Code\Test>javac -sourcepath "C:\Selenium\Code\Test\src" 
> "C:\Seleniu m\Code\Test\src\TrailAndTest\Mainclass.java" -d
> "C:\Selenium\Code\Test\bin"
> C:\Selenium\Code\Test\src\TrailAndTest\Mainclass.java:13: class
> MainClass is pub lic, should be declared in a file named
> MainClass.java public class MainClass 
>              ^ 1 error
> 
> C:\Selenium\Code\Test> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:58:23.887

类名和文件名区分大小写。将文件重命名为“MainClass.java”，使用大写 C 匹配类名。

# java - 如何让 join() 或 wait() 在这里工作？Java线程和并发

> ID：12103894
> 
> 赞同：0
> 
> 时间：2012-08-24T06:01:21.870
> 
> 标签：java, concurrency, thread-safety, wait

这个问题中的代码显然太长了，所以我写了一个示例，您可以复制和粘贴我认为包含我遇到的概念问题的示例。感谢那些一直阅读之前版本的人！

两个文件

一个调用另一个并传递一个 ArrayList。

第二个文件改变了 ArrayList 并为第一个文件提供了一个 getter 来访问改变的文件。

在调用 getter 之前，如何让第一个文件等待第二个文件中的处理。目前这段代码给你一个 NullPointerException 因为第一个文件没有等待。

执行线程上的join（）似乎不起作用，如果我使用wait（），我如何从第二个文件通知（）到第一个文件？

这是代码：

```
public class Launcher implements Runnable {

private ArrayList al = new ArrayList();
private ArrayProcessor ap;

public Launcher(ArrayList al){
    this.al = al;
    ArrayProcessor ap = new ArrayProcessor(al);
}
public static void main(String[] args){
    ArrayList anArray = new ArrayList();
    anArray.add(new Integer(1));
    anArray.add(new Integer(13));
    anArray.add(new Integer(19));
    Launcher l = new Launcher(anArray);
    l.liftOff();
}

public void liftOff(){
    Thread t = new Thread(new Launcher(al));
    synchronized(t){
        t.start();
        try {
            t.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    this.ap = new ArrayProcessor(al);
    System.out.println("the array: " + ap.getArray());
}
public void run() {
    ap.doProcess(al);
}

} 
```

和被调用的文件：

```
public class ArrayProcessor extends Thread{

private ArrayList al;

public ArrayProcessor(ArrayList al){
    this.al = al; 
}

public void doProcess(ArrayList myAL){
    this.start();
}

public void run() {
            // this should increment the ArrayList elements by one
    for (int i=0; i<al.size(); i++){
        int num = ((Integer)al.get(i)).intValue();
        al.set(i, new Integer(++num));
    }
}

public ArrayList getArray(){
    return al;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:07:59.653

如果您希望一个线程等待另一个线程完成，您可以使用**CountDownLatch**。由于您的示例中有很多代码，这里有一个小的 POC：

```
 public static void main(String[] args) throws Exception {

    final CountDownLatch latch = new CountDownLatch(1);

    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("Thread doing some work...");
                Thread.sleep(10 * 1000);
                System.out.println("Thread done!");
                latch.countDown();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start();

    System.out.println("Main Thread waiting...");
    latch.await();
    System.out.println("Main Thread can continue");
} 
```

# mysql - MySQL：选择 2 个具有不同列名称和数量的表

> ID：12103897
> 
> 赞同：1
> 
> 时间：2012-08-24T06:01:36.880
> 
> 标签：mysql, sql, join

我需要帮助。我有 2 张桌子。

> 表 1 有 4 列（电子邮件、名字、姓氏、状态）
> 
> 表 2 有 1 列（地址）

我想用这样的结果查询 2 个表：

> 包含 5 列的新表（电子邮件、名字、姓氏、状态、地址）

我已经尝试过这样的 JOIN 语句

```
SELECT email, firstname, lastname, status FROM table1 LEFT JOIN table2 ON (0) 
```

结果将只是 table1 中的 4 列。

如果我使用 RIGHT JOIN，结果将是来自 table1 的相同 4 列，但所有 NULL 值。

并且使用 INNER JOIN，结果来自 table1 的 4 列并且没有值。

然后我像这样使用 UNION

```
SELECT email, firstname, lastname, status FROM table1
UNION
SELECT address, '', '', '' FROM table2 
```

结果将与 LEFT JOIN RESULT 相同。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:20:10.373

如果您在两个表之间没有关系，我不明白需要制作两个单独的表。我建议你在表格之间建立关系

一个例子是

```
 table1(email, firstname, lastname, addressID), table2(addressID,Address) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:36:50.170

如果你有这两张表，你可以像狒狒说的那样做，或者你可以再制作一张有两个外键的表，一个来自 table1，另一个来自 table2。

例子：`table3(id, id_table1, id_table2)`

# android - 如何通过编程方式在同一网络上获取其他启用 Wifi 的设备的 IP 地址？

> ID：12103898
> 
> 赞同：1
> 
> 时间：2012-08-24T06:01:37.053
> 
> 标签：android, ip, ip-address, android-wifi

在我的 Android 手机中，我点击手机并看到设置-> 无线控制-> Wifi 设置，然后点击我连接的网络。它弹出一个对话框，包含网络状态、级别、速度、信号强度、IP 地址和安全类型。所以我得到了一个网络的IP地址。

如何通过提供（从我的手机获得的已知 IP 地址）作为输入来获取其他启用 wifi 的设备的 IP 地址？

实际上要清楚，如何将特定的已知 IP 地址作为输入，并且必须能够在 Android 2.3 中以编程方式获取连接在同一网络上的 Wifi 启用设备的其他未知 IP 地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:45:18.993

要获取 IP 地址，您可以签[`getIpAddress()`](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getIpAddress%28%29)入[`WifiInfo`](http://developer.android.com/reference/android/net/wifi/WifiInfo.html)

伪代码，

```
 WifiManager mWifiManager = (WifiManager) 
                                     getSystemService(Context.WIFI_SERVICE);
 WifiInfo mWifiInfo = mWifiManager.getConnectionInfo();
 Log.e("IP in Mask Integer", mWifiInfo.getIpAddress()+"");
 Log.e("IP Address", intToIP(mWifiInfo.getIpAddress())+"");

public String intToIP(int i) {
       return (( i & 0xFF)+ "."+((i >> 8 ) & 0xFF)+
                          "."+((i >> 16 ) & 0xFF)+"."+((i >> 24 ) & 0xFF));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T16:39:39.357

要查找同一网络中的其他设备，您需要**扫描**该网络。

扫描意味着在您的子网中找到可能的 IP（使用您的 IP 地址和子网掩码，您可以找到可能的范围，通常对于家庭路由器，它在 xxx1 ~ xxx254 之间）然后遍历这些 IP，并为每个 IP 执行 PING 或尝试使用 TCP/UDP 连接到某些/所有端口，直到您收到响应，这意味着有一个活动设备使用该 IP。但是，如果您根本没有收到任何响应，则可能是没有设备使用该 IP，或者设备正在过滤这些请求（防火墙丢弃您的包），或者只是该设备没有任何侦听服务。

要了解有关此的更多信息，请查看一些众所周知的工具，例如 nmap

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T13:42:22.573

```
 WifiManager myWifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);

       WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();
       int myIp = myWifiInfo.getIpAddress();

textWifiManager.setText(myWifiManager.toString());
       textWifiInfo.setText(myWifiInfo.toString());

       int intMyIp3 = myIp/0x1000000;
       int intMyIp3mod = myIp%0x1000000;

       int intMyIp2 = intMyIp3mod/0x10000;
       int intMyIp2mod = intMyIp3mod%0x10000;

       int intMyIp1 = intMyIp2mod/0x100;
       int intMyIp0 = intMyIp2mod%0x100;

       textVIewIp.setText(String.valueOf(intMyIp0)
         + "." + String.valueOf(intMyIp1)
         + "." + String.valueOf(intMyIp2)
         + "." + String.valueOf(intMyIp3)
         ); 
```

还必须修改 AndroidManifest.xml 以授予 android.permission.ACCESS_WIFI_STATE 的权限。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-07-31T14:45:47.670

单击设置，>无线和网络>然后wlan>单击手机上的选项按钮（它应该在您的主页按钮旁边）然后单击高级:)

# php - 具有某些值的 cURL 反馈（真/假）

> ID：12103900
> 
> 赞同：1
> 
> 时间：2012-08-24T06:01:56.697
> 
> 标签：php, curl, feedback

所以我想知道是否有可能在发送 cURL 请求后得到一个值作为反馈。我有一个正在进行的项目，我将 XML 数据发送到新闻办公室，在那里他们检查数据是否有效并且可以开始新闻流程。现在我需要一些反馈。我知道当我这样做时我可以收到一条消息-

> echo '纸不够'
> 
> 或 echo '我们可以开始'

在那个页面上（我的意思是如果他们这样做的话）。但是我需要一个值来喜欢真或假，所以我可以在我这边设置一个状态。我会继续谷歌搜索，把这个问题留在这里，也许有人有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:05:23.530

如果您要向外部服务或 URL 发送一些数据，则只有他们可以决定在响应中放入状态消息。

我假设您收到一个 HTTP 200 代码，表明请求成功，但另一方对请求的处理完全取决于他们。您可能必须要求他们在响应中添加一些额外的参数。

根据您要求他们做什么，您将解析他们在执行 cURL 命令时得到的响应 -

```
$retValue = curl_exec($request);

// if they return XML data 
$retXML = new SimpleXMLElement($retValue);

// if they return JSON data 
$retJSON = json_decode($retValue); 
```

你应该使用任何你觉得更舒服的方法。如果您已经在代码中处理 XML 数据，那么只需请求它们返回一些带有状态消息的 XML 数据。

* * *

示例返回数据 -

### XML

```
<response>
  <status value="true" />
  <message value="We can start!" />
</response> 
```

### JSON

```
{ 'status':'false','message':'not enough paper!' } 
```

# c++ - 我想使用 C++ 地图，目的是针对一个矩形 id 存储 4 个坐标，有人可以举个例子吗？

> ID：12103904
> 
> 赞同：0
> 
> 时间：2012-08-24T06:02:25.870
> 
> 标签：c++, map

假设我有一个 id:1 和坐标 1.0,2.0,3.0,4.0 的矩形。我可以为此使用 C++ Map 数据结构吗？或任何其他出路。我还需要找到给定坐标的键（或 id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:12:07.793

```
struct rectangle
{
    int x;
    int y;
    int w;
    int h;
};

std::map< int, rectangle >myMap;
           |
          the ID 
```

按 ID 访问，按值查找。尽管只有提供了所有坐标，您才能按值搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:27:43.687

如果您想通过 ID 查找坐标，可以使用 SingerOfTheFall 的答案。如果您发现通过坐标查找 ID，则需要覆盖操作符等于矩形。

# mysql - MySQL - 将引用表与连接字符串匹配

> ID：12103905
> 
> 赞同：1
> 
> 时间：2012-08-24T06:02:34.780
> 
> 标签：mysql, sql-like, matching

我在实现以下目标时遇到问题：

*   我有一个只包含字符串的“参考表”
*   我有一个“数据表”，它确实有一个包含一个字符串的字段，该字符串由参考表中可能出现的几个字符串连接而成。分隔字符串的语法各不相同 - 因此它们不能轻易拆分。

我需要的是一个贯穿引用表的查询，并搜索数据表中是否包含此连接字符串包含引用表中的值的行。

此外，如果查询将返回数据行的 PK 以及从参考表中找到的字符串，那将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:15:10.850

试试这个查询。如果它包含来自 reference_table 的多个字符串，它可以从 data_tables 输出重复项：

```
select * from data_table
join reference_table 
on (data_table.concatenated_field 
               like CONCAT('%',reference_table.string_field,'%')); 
```

您还可以将 data_tables 中的这些重复行组合为一个：

```
select data_table.id, max(data_table.concatenated_field),
GROUP_CONCAT(reference_table.string_field) 
from data_table
join reference_table 
on (data_table.concatenated_field 
               like CONCAT('%',reference_table.string_field,'%'))
group by data_table.id 
```

# swing - 如何在java中将html文件直接发送到打印机

> ID：12103907
> 
> 赞同：3
> 
> 时间：2012-08-24T06:02:52.550
> 
> 标签：swing

我正在使用它直接向打印机发送一个 htlm 文件，它说无效的味道，这意味着打印机不支持这些格式。任何人都有这样做的想法..

```
/**
 * @param args
 */
public static void main(String[] args) {
    // Input the file
    FileInputStream textStream = null; 
    try { 
        textStream = new FileInputStream("./some.html"); 
    } catch (FileNotFoundException ffne) { 
    } 
    if (textStream == null) { 
        return; 
    } 
    // Set the document type
    DocFlavor myFormat  = DocFlavor.INPUT_STREAM.TEXT_HTML_HOST;

    // Create a Doc
    Doc myDoc = new SimpleDoc(textStream, myFormat , null);         
    // Build a set of attributes
    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet(); 
    aset.add(new Copies(1)); 
    //aset.add(MediaSize.NA.LEGAL);
    aset.add(Sides.ONE_SIDED); 
    // discover the printers that can print the format according to the
    // instructions in the attribute set
    PrintService services = PrintServiceLookup.lookupDefaultPrintService();
        //PrintServiceLookup.lookupPrintServices(myFormat, aset);
    // Create a print job from one of the print services
    //System.out.println("====5======="+service.get);
    //if (services.length > 0) { 
    for (int i = 0; i < services.getSupportedDocFlavors().length; i++) {
        System.out.println("====getSupportedDocFlavors======="+services.getSupportedDocFlavors()[i]);
    }

        DocPrintJob job = services.createPrintJob(); 
        try { 
            job.print(myDoc, aset); 
        } catch (PrintException pe) {
            System.out.println("====PrintException======="+pe);
        } 
    //} 

} 
```

* * *

它说

```
sun.print.PrintJobFlavorException: invalid flavor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:01:34.397

您正在尝试强制打印机将 HTML 文档处理（呈现）到纸上。它永远不会那样工作。当然，不支持您发送的风味。

首先，您需要将 HTML 呈现为一些图形表示，然后将其发送到打印机。没有可以渲染现代 HTML 页面的 Java 跨平台工具。但是JavaFX中有一个，我想你可以用它来处理任务。

关于打印最终图像，您可以在此处阅读：http:
[//www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html)
或在此处查看代码：
[http://www。 java2s.com/Code/Java/2D-Graphics-GUI/PrintanImagetoprintdirectly.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/PrintanImagetoprintdirectly.htm)
或者只是找到任何其他资源 - 有很多关于打印的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:19:55.990

公共类 POSPrinter {

```
private static final Log LOG = LogFactory.getLog(POSPrinter.class);

public POSPrinter(Long billID, String printMode) {
}

/**
 * 
 * This method prints the specified PDF to specified printer under specified
 * 
 * job name
 * 
 * 
 * 
 * @param filePath
 *            Path of PDF file
 * 
 * @param printerName
 *            Printer name
 * 
 * @param jobName
 *            Print job name
 * 
 * @throws IOException
 * 
 * @throws PrinterException
 */

public void printPDF(String filePath, String printerName, String jobName,
        Integer height, Integer width) throws IOException, PrinterException {

    FileInputStream fileInputStream = new FileInputStream(filePath);

    byte[] pdfContent = new byte[fileInputStream.available()];

    fileInputStream.read(pdfContent, 0, fileInputStream.available());

    ByteBuffer buffer = ByteBuffer.wrap(pdfContent);

    final PDFFile pdfFile = new PDFFile(buffer);

    Printable printable = new Printable() {

        public int print(Graphics graphics, PageFormat pageFormat,
                int pageIndex) throws PrinterException {

            int pagenum = pageIndex + 1;

            if ((pagenum >= 1) && (pagenum <= pdfFile.getNumPages())) {

                Graphics2D graphics2D = (Graphics2D) graphics;

                PDFPage page = pdfFile.getPage(pagenum);

                Rectangle imageArea = new Rectangle(

                (int) pageFormat.getImageableX(),

                (int) pageFormat.getImageableY(),

                (int) pageFormat.getImageableWidth(),

                (int) pageFormat.getImageableHeight());

                graphics2D.translate(0, 0);

                PDFRenderer pdfRenderer = new PDFRenderer(page, graphics2D,
                        imageArea, null, null);

                try {
                    page.waitForFinish();

                    pdfRenderer.run();

                } catch (InterruptedException exception) {
                    exception.printStackTrace();
                }

                return PAGE_EXISTS;

            } else {

                return NO_SUCH_PAGE;

            }

        }

    };

    PrinterJob printJob = PrinterJob.getPrinterJob();

    PageFormat pageFormat = PrinterJob.getPrinterJob().defaultPage();

    printJob.setJobName(jobName);

    Book book = new Book();

    book.append(printable, pageFormat, pdfFile.getNumPages());

    printJob.setPageable(book);

    Paper paper = new Paper();

    paper.setSize(width, height);
    paper.setImageableArea(0, 0, paper.getWidth(), paper.getHeight());

    // pageFormat
    pageFormat.setPaper(paper);

    // PrintService[] printServices = PrinterJob.lookupPrintServices();
    //
    // for (int count = 0; count < printServices.length; ++count) {
    //
    // if (printerName.equalsIgnoreCase(printServices[count].getName())) {
    //
    // printJob.setPrintService(printServices[count]);
    //
    // break;
    //
    // }
    //
    // }

    PrintService printService = PrintServiceLookup
            .lookupDefaultPrintService();
    printJob.setPrintService(printService);

    printJob.print();

} 
```

# jquery - #link 缓动，这怎么叫？是否有一个插件可以用 jquery 为它设置动画？

> ID：12103909
> 
> 赞同：0
> 
> 时间：2012-08-24T06:02:58.913
> 
> 标签：jquery

我不确定这个链接是如何被称为 something.com/#link 我想为这个浏览器操作设置动画。但是由于我不知道它们是如何被调用的，所以找不到正确的 jquery 插件或 wiki。

泰，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:25:39.070

#link 是一个散列（或锚点），通常是页面的 id。浏览器会自动滚动到锚点，但是如果你想自定义这个滚动，是这样的：

```
if(location.hash) {
  _hash = location.hash; // Stores hash
  location.hash = ''; // Removes the native scroll of browser
  var anchor = "#el_"+_hash;
  var el = $(anchor); // Gets target element
  $('html,body').animate({scrollTop: el.offset().top}, 'slow', function(){
    location.hash = _hash; // Inserts the hash in url again
  });
} 
```

# java - PSQLException: ResultSet 没有正确定位，也许你需要调用 next

> ID：12103915
> 
> 赞同：9
> 
> 时间：2012-08-24T06:03:22.657
> 
> 标签：java, postgresql, postgresql-9.1

```
public UserBean authenticate(String username,String password){
    PostGresDAO pg=new PostGresDAO();   //creates new connection
    Connection conn=pg.getConnecion();  //return connection object
    PreparedStatement ps;
    ResultSet rs;
    String query="select password,name from scg_users where username=?";
    UserBean ub=null;
    boolean authenticated=false;
    try{
        ps=conn.prepareStatement(query);
        ps.setString(1, username);
        rs=ps.executeQuery();

        if(rs!=null){

            authenticated=password.equals(rs.getString(1));  //exception raised here
            if(authenticated){
                ub=new UserBean();
                ub.setUser(rs.getString(2));
                ub.setUsername(username);
            }
        }
    }
    catch(SQLException e){
        e.printStackTrace();
    }
    return ub;
} 
```

我正在使用此代码对用户进行身份验证。从请求参数中提取用户名和密码并传递给此方法进行身份验证。但它抛出一个：

```
org.postgresql.util.PSQLException: ResultSet not positioned properly, perhaps you need to call next. 
```

请指教。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T06:06:58.843

*该错误准确地*告诉您出了什么问题-您没有调用`next()`ResultSet 来获取结果的第一行。

这一行：

```
if(rs!=null) 
```

据我所知是没有意义的；我不相信`executeQuery`会返回null。如果您的查询有问题，则会抛出异常。如果没有结果，它将返回一个空的结果集。要查看是否有一行，您应该调用`next()`并检查返回值：

```
if (rs.next()) 
```

此外：

*   捕获异常并仅打印堆栈跟踪而不重新抛出*几乎*总是错误的方法
*   您的代码建议您以纯文本形式存储密码。请不要。真的，真的不要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T14:25:26.013

因为即使我打电话`next()`给我也收到了消息，`resultSet`我会告诉我我的解决方案。

如果它是空的，解决方案是不要打电话`resultSet.get*`给你。`resultSet`所以做个检查`if(resultSet.next()){ ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:14:42.590

代替

```
if(rs!=null) 
```

你需要检查

```
if(rs.next()) 
```

如果有任何匹配的行，这将返回第一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T15:11:24.813

也许你`resultSet.next()`在调试器中有 Inline Watches :)

对我来说就是这样。所以我的检查`if (resultSet.next())`返回 true 但是当我进入 if 块时，再次调用 next() 然后没有数据所以我得到了相同的错误消息

# android - 安卓应用中的谷歌加

> ID：12103916
> 
> 赞同：0
> 
> 时间：2012-08-24T06:03:31.200
> 
> 标签：android, google-plus

我正在开发一个集成了 facebook、twitter、flicker 和 Google plus 的应用程序。除了 Google plus，我已经完成了所有的事情。

有没有人在他自己的应用程序中使用过 Google plus API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:56:34.000

适用于 Android 的 Google+ 平台现已推出。

使用该平台，您可以：

*   允许用户使用 Google+ 登录。
*   集成原生 +1 按钮。
*   将时刻写入用户的 Google+ 历史记录（开发者预览版）

有关详细信息，请参阅： [https ://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:30:04.163

目前还没有适用于 Android 版 Google Plus 的官方 API。[在此处](https://developers.google.com/+/mobile/android/)查看官方文档。引用：

> 适用于 Android 的 Google+ 平台将在未来几周内推出——本文档让您快速了解预期内容。

# arrays - 指向指针数组的指针声明

> ID：12103918
> 
> 赞同：0
> 
> 时间：2012-08-24T06:03:38.187
> 
> 标签：arrays, pointers

怎么申报20次

```
int p[] = { 1,2,3,4,5};
int p[] = { 6,7,8,9,10};
.
.
. 
```

假设我有一个 20x20 的矩阵。每一行都是上面的一个指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:05:20.673

您可以使用 20X20 二维数组来执行此操作。

```
int p[][]={{1,2,3,4,5},
           {6,7,8,9,10},
           {11,12,13,14,15},
           .....
           .....
          } 
```

**编辑：** 您可以使用以下方法参考第五行：

```
for(int i=0; i<5; i++)
{
   printf(" %d",p[4][i]);
} 
```

# android - 哪种媒体格式更适合所有移动开发？

> ID：12103921
> 
> 赞同：0
> 
> 时间：2012-08-24T06:04:14.713
> 
> 标签：android, ios, windows-phone-7

我正在为所有平台（iPhone、Android 和 Windows）开发一个应用程序。它涉及通过服务器在这些平台之间传输文件。我怀疑我应该为图像、视频和音频使用哪种格式，这在各个方面都更好，比如尺寸，性能。它应该可以在所有 3 部手机上播放。？任何人都可以提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:18:40.057

对于音频或图像，有许多选项，但对于视频，图片要模糊得多。对于视频来说，目前只有两个主要的竞争者：

*   [来自 WebM 项目的 VP8](http://www.webmproject.org)
*   [H.264/MPEG-4](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)

它们在您列出的所有移动平台（iOS、Android 和 Windows Phone 7）上都可用。根据您的应用程序的确切用途（流式视频、实时视频会议等），它们各有优缺点。两者的性能通常足够接近，以至于您的实现质量和您使用的设置比标准更重要。在它们之间进行选择时的一些考虑因素的快速总结是：

*   **VP8：**这是一种开放的、免版税的格式，其参考实现在 BSD 风格的许可下开源。它作为第三方库在所有三个操作系统上构建和运行良好。每个操作系统的本机支持各不相同。由于 WebM 是 Google 的创意，Android 原生支持 VP8。苹果尚未宣布在 iOS 中支持 VP8 的计划，微软采取了中间立场。但是，将库包含在您分发的任何应用程序中都很容易且免费。
*   **H.264：**这是一个包含在 HTML5 标准中的行业标准，因此它几乎被现代浏览器普遍支持。（Goggle 已宣布他们将从 Chrome 中撤消对它的支持，但截至今年早些时候，这还没有发生。） H.264 受到多项专利的保护，这些专利由[MPEG LA](http://www.mpegla.com/main/default.aspx)出于许可目的而保存在一个池中。H.264 的商业用户需要支付许可费，但也有例外情况，包括对最终用户免费的互联网视频。Android、iOS 和 Windows Phone 7 都原生支持 H.264 流式视频播放。但是，至少在 iOS 上不支持实时视频会议。还有一个很好的第三方实现（[x264](http://www.videolan.org/developers/x264.html)) 的 H.264 在所有平台上都可用，以应对本机实现不足的情况。x264 是一个免费的开源库，但它在 GNU GPL 下获得许可，这在商业开发或 iOS 部署方面存在问题。您可能需要购买商业许可证才能在您的产品中使用它。

以下是各种供应商关于 A/V 格式兼容性的页面：

*   [iOS](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)
*   [安卓](http://developer.android.com/guide/appendix/media-formats.html)
*   [视窗电话](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087%28v=vs.92%29.aspx)

我的建议是，如果您正在流式传输视频，请使用 H.264，但如果您正在实时编码/解码视频，请使用 VP8。Apple 在使用 H.264 的 FaceTime 方面做得很好，但接口不公开。

# asp.net-mvc - Azure 网站中的 ASP.NET MVC4 + Ninject + NLog = 问题

> ID：12103926
> 
> 赞同：1
> 
> 时间：2012-08-24T06:04:38.060
> 
> 标签：asp.net-mvc, azure, ninject, asp.net-mvc-4, nlog

有什么方法可以在 Azure 网站下运行 Ninject + NLog，而不使用性能较差的基于反射的注入？

```
var options = new NinjectSettings() { UseReflectionBasedInjection = true }; 
```

问题是否源于部分信任问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:53:19.623

如果您只拥有部分信任，那么动态编译是不可能的，所以根本没有其他方法。（显然，如果您使用的是 Azure PaaS 模式，则可以切换到完全信任，但我想这不是您所在的位置）

请记住，您应该在整个解决方案的上下文中衡量 DI 的开销——例如，如果您对每个请求进行 2 次数据库往返，那么反射的任何影响都会相形见绌。

# ruby-on-rails - 如何将 rake 文件导入到表中？

> ID：12103927
> 
> 赞同：0
> 
> 时间：2012-08-24T06:04:43.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

嗨，我是 ROR 的新手，我需要如何将以下数据导入数据库中的表 City 此文件位于 libs>>tasks>>

```
desc "Import City to  ActiveRecord table"
task :city_import, [:argument] => :environment do

 puts "Importing City ***"

        City.create(:name=>'Balaghat',:state_id=>State.find_by_name('Madhya Pradesh'));
        City.create(:name=>'Belgaum',:state_id=>State.find_by_name('Karnataka'));
end 
```

我尝试在终端中使用 rake 但不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:55:49.060

在终端中转到您的应用并输入

```
 rake city_import 
```

# .htaccess - 使用 mod_rewrite 代理 url

> ID：12103931
> 
> 赞同：4
> 
> 时间：2012-08-24T06:04:56.413
> 
> 标签：.htaccess, mod-rewrite, apache

例如，我有一个域

```
http://example.com 
```

和另一个域

```
http://reallylargerdomain name.com 
```

我想如果 sombody 访问[http://example.com/projects](http://example.com/projects)那么服务器应该代理来自其他 url 的数据。为此，我创建了以下 .htaccess 文件

```
Rewrite on
RewriteRule ^projects/$ http://reallylargedomainname.com [P] 
```

这不起作用，但是当我将其更改为遵循它时

```
Rewrite on
RewriteRule ^projects/$ http://reallylargedomainname.com [R=301,L] 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:19:54.107

您需要确保 mod_proxy 已加载到您的 apache 配置中。没有它，`P`标志会发送代理请求，但没有任何东西可以处理目标。它看起来像这样：

```
LoadModule  proxy_module modules/mod_proxy.so 
```

如果目录不同，显然会根据您的路径进行调整。

此外，请注意，如果`L`您的规则中没有该标志，则在重写引擎完成之前，代理请求不会被发送回处理管道。因此，如果您在代理规则之后还有其他规则，它们将在代理发生之前应用。

# java - 在 Java 中使用 OO 设计报表

> ID：12103937
> 
> 赞同：0
> 
> 时间：2012-08-24T06:05:20.410
> 
> 标签：java, oop

我想用 OO 实现 2 个报告。报告都像（但有不同的列和数据）：

```
name age gender phone_number
A    10  male   1234
B    20  female 5678
C    30  n/a    9012 
```

如您所见，在报告中，每一列都有自己的标题和解析器（用于解析数据）。我设计了一个对象列：

```
class Column<T extends Object>
{
    private String header;
    private ColumnParser parser;

    public Column(String header)
    {
        this.header = header;
        this.parser = new ColumnParser<T>()
        {
            public String parse(T t)
            {
                return t.toString();
            }
        }
    }

    public Column(String header, ColumnParser parser)
    {
        this.header = header;
        this.parser = parser;
    }

    public interface ColumnParser<T>
    {
        public String parse(T t);
    }
} 
```

这样每一列都有自己的解析器来解析该列中的数据。但是在这之后，我不知道如何存储数据，以便它们可以映射到每一列并可以被解析。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:52:11.190

首先，了解您的原始数据（在内存中）的格式会很有帮助——例如它是一个 Object[][]？

其次，您需要的输出看起来像是制表符分隔的。那是对的吗？

第三，要写入文本文件，您必须逐行追加。您当前的代码似乎建议您要逐列附加 - 这将更难以实现。

如果您可以将数据转换为 String[][] - 这应该很简单 - 然后您可以使用以下内容写入文件。如果您想要制表符分隔，您可以使用“\t”作为分隔符（虽然，这适用于 Windows - 不确定它是否特定于操作系统，如换行）。

```
public static void writeToFile(File file, String[][] data, String delimiter){
  PrintWriter out = new PrintWriter(new FileWriter(file));
  for (String[] row : data){
    out.write(makeLine(row, delimiter));
  }
  out.close();
}

private static String makeLine(String[] row, String delimiter) {
  StringBuilder str = new StringBuilder();
  for (String cell : row){
    str.append("\""+cell+"\"").append(delimiter);
  }
  str.deleteCharAt(str.length()-1);
  str.append("\n");
  return str.toString();
} 
```

# java - Java Swing：将 JLabel 添加到 JPanel

> ID：12103940
> 
> 赞同：3
> 
> 时间：2012-08-24T06:05:33.043
> 
> 标签：java, swing

我只是想将 JLabel 添加到现有的 JPanel。这看起来很简单，我已经到处搜索了。我认为这是正确的，但标签没有出现在我的面板上。有人看到我错过了什么吗？谢谢！

```
ResultsPanel myPanel = new ResultsPanel(pnlResults);  //pnlResults is an existing JPanel
myPanel.addLabel(pnlResults);

public class ResultsPanel extends JPanel {

    JPanel myPanel;

    public ResultsPanel(JPanel thisPanel) {
        myPanel = thisPanel;
    }

    public void addLabel(JPanel myResults) {
        JLabel myLabel = new JLabel("test", JLabel.LEFT);
        myPanel.setLayout(new FlowLayout());
        add(myLabel);        
    }

} 
```

编辑：针对下面的即时回复，我同意这似乎完全是矫枉过正。我走这条路是因为以下代码也不会导致将 JLabel 添加到我的 JPanel 中：

```
JLabel myLabel = new JLabel("test"); 
pnlResults.add(myLabel); 
```

我更愿意使用这段代码，所以如果你认为它更有可能工作，请随时评论它（当然，有一些修改）。再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T06:07:33.323

这似乎只是为了做一件基本的事情。只需调用

```
JLabel label = new JLabel("Test text");//initialize the label
//do some stuff with label here maybe...
panel.add(label);//now add it 
```

不需要让一个类扩展JPanel，并包含一个JPanel；如果一个类扩展了 JPanel，要获取 JPanel 实例，只需使用 this（因此 addLabel 将改为执行 this.setLayout(blah)）。但是当然，甚至不需要为像添加 JLabel 这样简单的东西子类化 JPanel

总的来说，这几乎是最简单的摇摆应用程序：

```
 JFrame frame = new JFrame("Basic Swing");//Make a frame
    frame.setSize(300, 300);//Give it a size
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);//Make it go away on close
    JPanel panel = new JPanel();//Make a panel
    frame.add(panel);//Add it to your frame

    JLabel label = new JLabel("Hello StackOverflow!");//Make a label
    panel.add(label);//Add it to the panel (which is on the frame)

    frame.setVisible(true);//Show the frame 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T06:08:05.490

首先，你已经从`JPanel`

其次，你已经提供了你自己的`JPanel`

现在，从您的代码片段中，无法确定是否已添加`ResultsPane`或`myPanel`已添加到`Container`任何类型中，但根据您所说的，我建议这将是您的主要问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T07:25:04.173

尝试这个

```
JLabel myLabel = new JLabel("test text");
myLabel.setSize(myLabel.getPreferredSize());
panel.add(myLabel);
panel.revalidate();
panel.repaint(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T22:02:58.940

你真的想要/需要有一个实际的 JLabel 对象吗？如果没有，您可以按如下方式标记您的面板：

```
public void addLabel() {
    myPanel.setBorder(new TitledBorder("test"));
} 
```

# mysql - 在 Group by 子句中使用正则表达式

> ID：12103941
> 
> 赞同：4
> 
> 时间：2012-08-24T06:05:39.047
> 
> 标签：mysql, sql, regex, group-by

我有一个表“项目”

```
Item_Code             |Rate  |Quantity
--------------------------------------
JOGGER-POWER-BLACK    |699   |5
JOGGER-POWER-WHITE    |599   |8    
JOGGER-PLAZA-WHITE    |1199  |2
SLEEPER-PLAZA-BLACK   |699   |6
SLEEPER-POWER-BLACK   |499   |5 
```

我想按 Item_Code 的 Part1-%-Part3 分组，如下所示

```
select (part1 and part3 of Item_Code) as 'Category-Color',sum(Quantity)
as Quantity group by (part1 and part3 of Item_Code) 
```

通过零件，我的意思是用连字符来查看 Item_Code

**期望的输出**

```
Category-Color|Quantity
-------------------
JOGGER-BLACK  |5
JOGGER-WHITE  |10
SLEEPER-BLACK |11 
```

“group by 子句中的正则表达式”，“group by 正则表达式”。谷歌/必应不提供任何相关信息

我无法理解数据库开发人员是否不需要提供此功能或他们是如何做到的。商店所有者要求我进行此类分组。例如类别（第 1 部分）明智的数量总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:11:26.100

```
SELECT CONCAT(SUBSTRING_INDEX(Item_Code, '-', 1), '-', 
              SUBSTRING_INDEX(Item_Code, '-', -1)) AS Category_Color,
       SUM(Quantity) AS Quantity
FROM items
GROUP BY 1; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/c0fc7/2)

# android - android术语之间的区别？

> ID：12103942
> 
> 赞同：6
> 
> 时间：2012-08-24T06:05:40.003
> 
> 标签：android, contact, contactscontract

`"ContactsContract.CommonDataKinds.Phone.CONTENT_URI"`我只是坚持一个问题，和之间有什么区别`"ContactsContract.Contacts.CONTENT_URI"`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T06:18:32.527

**`ContactsContract.CommonDataKinds.Phone.CONTENT_URI`**

*   表示电话号码的数据类型

* * *

**`ContactsContract.Contacts.CONTENT_URI`**

*   联系人表的常量，其中包含代表同一个人的每个原始联系人聚合的记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T06:21:36.060

```
android.provider.ContactsContract.CommonDataKinds.Phone 
```

一种表示电话号码的数据类型。

```
 ContactsContract.CommonDataKinds.Phone.CONTENT_URI 
```

content:// 可用于访问所有数据记录 CONTENT_ITEM_TYPE MIME 类型，结合相关的原始联系人和聚合联系人数据。

```
ContactsContract.Contacts.CONTENT_URI 
```

联系人表的常量，其中包含代表同一个人的每个原始联系人聚合的记录。您可以在此使用更新删除等

# c# - HttpClient 不报告从 Web API 返回的异常

> ID：12103946
> 
> 赞同：6
> 
> 时间：2012-08-24T06:06:19.830
> 
> 标签：c#, asp.net-web-api, dotnet-httpclient

我`HttpClient`用来调用我的 MVC 4 web api。在我的 Web API 调用中，它返回一个域对象。如果出现任何问题，`HttpResponseException`将在服务器上抛出一个自定义消息。

```
 [System.Web.Http.HttpGet]
  public Person Person(string loginName)
    {
        Person person = _profileRepository.GetPersonByEmail(loginName);
        if (person == null)
            throw new HttpResponseException(
      Request.CreateResponse(HttpStatusCode.NotFound, 
                "Person not found by this id: " + id.ToString()));

        return person;
    } 
```

我可以使用 IE F12 在响应正文中看到自定义的错误消息。但是，当我使用 调用它时`HttpClient`，我没有收到自定义的错误消息，只有 http 代码。对于 404，“ReasonPhrase”始终是“未找到”，对于 500 代码，始终是“内部服务器错误”。

有任何想法吗？如何从 Web API 发回自定义错误消息，同时保持正常返回类型作为我的域对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T16:17:04.790

（将我的答案放在这里以获得更好的格式）

是的，我看到了，但是 HttpResponseMessage 没有 body 属性。我自己想通了： `response.Content.ReadAsStringAsync().Result;`。示例代码：

```
public T GetService<T>( string requestUri)
{
    HttpResponseMessage response =  _client.GetAsync(requestUri).Result;
    if( response.IsSuccessStatusCode)
    {
        return response.Content.ReadAsAsync<T>().Result;
    }
    else
    {
        string msg = response.Content.ReadAsStringAsync().Result;
            throw new Exception(msg);
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T23:41:50.527

从响应中获取异常时，我考虑了一些逻辑。

这使得提取异常、内部异常、内部异常 :) 等变得非常容易

```
public static class HttpResponseMessageExtension
{
    public static async Task<ExceptionResponse> ExceptionResponse(this HttpResponseMessage httpResponseMessage)
    {
        string responseContent = await httpResponseMessage.Content.ReadAsStringAsync();
        ExceptionResponse exceptionResponse = JsonConvert.DeserializeObject<ExceptionResponse>(responseContent);
        return exceptionResponse;
    }
}

public class ExceptionResponse
{
    public string Message { get; set; }
    public string ExceptionMessage { get; set; }
    public string ExceptionType { get; set; }
    public string StackTrace { get; set; }
    public ExceptionResponse InnerException { get; set; }
} 
```

有关完整的讨论，请参阅[此博客文章](http://nodogmablog.bryanhogan.net/2016/07/getting-web-api-exception-details-from-a-httpresponsemessage/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:13:15.013

自定义错误消息将位于响应的“正文”中。

# asp.net-mvc-3 - 对于默认路由以外的 WebApi 调用失败

> ID：12103947
> 
> 赞同：0
> 
> 时间：2012-08-24T06:06:25.743
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-web-api

我有一个包含 Mvc 和 Api 控制器的 Mvc3 项目。当我在没有指定“*控制器/动作*”的情况下运行应用程序时，会选择“*默认*”路由并呈现“*主页/索引”页面。*当该页面运行时，使用 url:“ *api/controller* ”进行 Ajax 调用，返回 json，然后用于填充页面上的表。

```
 <script type="text/javascript">
     $(function () {
         var $products = $("#products");
         $.ajax({
             url: "api/products",
             contentType: "json",
             success: function (data) {
                 $.each(data, function (index, item) {
                     $products.append("<tr><td>" + item.ProductCode + "</td>" +
                                         "<td>" + item.Description + "</td>");
                 });
             }
         });
     });
 </script> 
```

但是，当向指定“controller/action”的同一页面发出请求时，如“ *localhost/home/index* ”，Ajax 调用被转换为“ */home/api/controller* ”，当然请求无法完成或返回任何结果，因为找不到 ApiController。

```
 public static void RegisterRoutes(RouteCollection routes) {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
           "DefaultApi",
           "api/{controller}/{id}",
           new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
        );
    } 
```

考虑到它一定是路由问题，我继续通过添加路由来解决这个问题：

```
 routes.MapHttpRoute(
           "HomeApi",
           "home/api/{controller}/{id}",
           new { id = RouteParameter.Optional }
        ); 
```

这是成功的。我的下一个更改是：

```
 routes.MapHttpRoute(
           "AnyApi",
           "{folder}/api/{controller}/{id}",
           new { id = RouteParameter.Optional }
        ); 
```

这也有效，但让我有点怀疑它是否是处理将 WebApi 与 Mvc 结合的正确方法。

这是处理这个问题的正确方法吗？还是有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:11:34.207

> 考虑到它一定是路由问题，我继续通过添加路由来解决这个问题：

不，这根本不是路由问题。您的路线非常好：

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
       "DefaultApi",
       "api/{controller}/{id}",
       new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
    );
} 
```

您的问题源于您在 javascript 中对 url 进行了硬编码，而不是使用 url helpers 来生成它。您绝对**不**应该在 ASP.NET MVC 应用程序中对 url 进行硬编码。您应该**始终**使用 url 助手。

所以：

```
<script type="text/javascript">
    $(function () {
        var $products = $("#products");
        var url = '@Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" })';
        $.ajax({
            url: url,
            success: function (data) {
                $.each(data, function (index, item) {
                    $products.append("<tr><td>" + item.ProductCode + "</td>" +
                                         "<td>" + item.Description + "</td>");
                });
            }
        });
    });
</script> 
```

另请注意，我已从`contentType: 'json'`您的 AJAX 调用中删除了 ，因为首先正确的内容类型是`contentType: 'application/json'`，其次在这种情况下您没有在请求中发送任何数据，因此您不应该将其设置为`application/json`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:10:08.237

无需在此处添加路由 - 您可以指定 API URL，以便它始终有效：

```
/api/controller 
```

在某些情况下，您可能需要使用`Url.RouteUrl`帮助程序根据路由（通过路由名称和/或路由值）显式创建 URL。例如，这将使用*controller=products*指定名为“DefaultApi”的路由：

```
@Url.RouteUrl("DefaultApi", new { controller = "products" }) 
```

# xml - 使用密钥和证书签署 XML

> ID：12103948
> 
> 赞同：2
> 
> 时间：2012-08-24T06:06:25.880
> 
> 标签：xml, certificate, sign, xmlseclibs

我想签署我的 xml 文件，以便我提供给他们的人可以确定他们没有被篡改，并且我保证这些是我的 XML 文件。我正在使用 xmlseclib（似乎可以工作的 php）。我有一些问题希望你能帮我回答：

1.  在库中，我发送了一个私有 RSA 密钥和一个证书。我应该如何处理证书？如果我使用为我的 https 服务器购买的证书，它的有效期仅为 1 年？我希望我签署的文件永远有效。我应该生成自己的证书吗？我如何在openssl中做到这一点？

2.  有人可以给我概述一下 ds:SignatureValue、ds:DigestValue 和 ds:X509Certificate 的内容以及它们的使用方式吗？

我的自动添加标签：

```
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-  exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference>
<ds:Transforms>
<ds:TransformAlgorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>  
</ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/> 
<ds:DigestValue>WHAT_GOES_HERE</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>WHAT_GOES_HERE</ds:SignatureValue>
<ds:KeyInfo>
<ds:X509Data>
<ds:X509Certificate>WHAT_GOES_HERE</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo>
</ds:Signature> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T22:39:17.013

证书应包含在字段#3 中。它可以帮助建立一个可信的证书链，以便接收者可以确定签名是有效的。

如果签名仍然有效，则取决于进行验证的人。通常，您不会使用 SSL 证书来签署数据。建立另一个信任关系基本上是 PKI，超出了 Stackoverflow 的范围。

字段 #1 仅包含对已签名数据采用 base64 编码的安全散列。可能存在多个哈希。

字段 #2 是`SignedInfo`零件上的签名。签名由另一个安全散列`SignedInfo`和一个非对称函数（如 RSA 的模幂运算）组成。它是二进制的，因此也将采用 base 64 编码。

# php - 联系表格下载文件并将信息保存在数据库中

> ID：12103951
> 
> 赞同：0
> 
> 时间：2012-08-24T06:06:33.883
> 
> 标签：php, mysql, sql, forms, contact

为了简单起见，这就是我试图实现的目标。

1.  用户填写表格
2.  如果填写正确，则验证字段
3.  提交表单时，检查所有验证，如果没有则显示错误，如果是
4.  电子邮件表格详细信息到我的电子邮件
5.  将相同的详细信息存储到 mysql 数据库中
6.  显示感谢信息
7.  从文件夹中下载pdf文件

我已经设法做到了所有这些，但我面临一个问题。当用户在不填写任何内容的情况下单击下载按钮时，他们会收到错误消息，但会在数据库中添加一个空行。如果他们填写不正确的表格，他们仍然会看到错误，但现在数据库中有 2 行。并且如果他们正确填写所有内容，他们会看到感谢您的消息并且还可以下载文件，但它仍会在表中添加 2 行。
我该如何解决？:(

这是 index.html 的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="./js/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="./js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="./js/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
    <script type="text/javascript">
        $(document).ready(function() {
            $("#download").fancybox({
                'titlePosition'     : 'inside',
                'transitionIn'      : 'none',
                'transitionOut'     : 'none'
            });         
        });
    </script>
</head>

<body>

<div id="banner" class="clearfix">
    <div class="center">
        <a id="download" class="download" href="#FormLightBox"><img src="img/button-download.png" width="218" height="49" alt="Download" /></a>
        <p>(Your contact details will be required)</p>
    </div>
</div>

<div style="display: none;">
    <div id="FormLightBox">
        <div class="inner">

            <h3 id="status" style="color:#F00; display:none;">Your Errors Here</h3>
            <h3>Leave your details below to download your free Guide pdf file</h3>        
            <p><input type="text" id="name" class="input-text" placeholder="Name"/></p>
            <p><input type="text" id="email" class="input-text" placeholder="E-mail"/></p>
            <p><input type="text" id="postcode" class="input-text" placeholder="Postcode"/></p>
            <p><input type="text" id="phone" class="input-text" placeholder="Telephone" onkeypress="return validnum(event)" /></p>
            <p><input type="image" id="i" class="input-button" src="img/button-download-lager.png" onclick="getResponse()"/></p>

        </div>
    </div>
</div>
<script type="text/javascript">
    function get(y){
        return document.getElementById(y).value;
    }
    function getResponse(){
        $.get("process.php", { name: get('name'), email: get('email'), postcode: get('postcode'), phone: get('phone') },
           function(data){
             if(data.status === false || data.status === 'false'){
                 return errorMsg(data.message);
             }else{
                errorMsg(data.message);
                setTimeout(" offerDownloadAndClose()", 4000); 
             }
           }, "json");
    }
    function errorMsg(msg){
        $('#status').html(msg);
        $('#status').slideDown('slow');
        setTimeout("doHide('#status')", 3000);
    }
    function doHide(t){
        $(t).slideUp('slow');   
    }
    function offerDownloadAndClose(){
        doHide('#fancybox-wrap, #fancybox-overlay');
        window.location = 'process.php?file=true';
    }
    function validnum(evt){
        var charCode;
        charCode = (evt.which) ? evt.which : event.keyCode;
        if ((charCode >= 48 && charCode <= 57) || charCode == 46 || charCode == 127 || charCode == 8)
        {
            return true;
        }
        else{
            return false;
        }
    }
</script>
</body>
</html> 
```

在我的 process.php 中

```
 <?php error_reporting(0);

if(empty($_GET)){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the complete form'));    
    exit;
}
//database insertion
$con = mysql_connect("localhost","mysql_user","mysql_pwd");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("mysql_database", $con);
$sql="INSERT INTO formdata (name, email, postcode, phone) VALUES ('$_GET[name]','$_GET[email]','$_GET[postcode]','$_GET[phone]')";
if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
mysql_close($con);

// download function
if(isset($_GET['file'])){
$filename = 'Guide.pdf'; // set absolute relative path to this file
$path = $_SERVER['DOCUMENT_ROOT']."/download/";
$fullpath = $path.$filename;
// required for IE, otherwise Content-disposition is ignored
if(ini_get('zlib.output_compression'))
ini_set('zlib.output_compression', 'Off');
header("Pragma: public"); // required
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers
header("Content-Transfer-Encoding: binary");
header("Content-Type: application/pdf");
header('Content-Disposition: attachment; filename="'.$filename.'"');
header("Content-Length: ".filesize($fullpath));
readfile($fullpath);
}

if(!isset($_GET['name']) || empty($_GET['name'])){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the name'));
    exit;
}elseif(strlen($_GET['name']) < 3){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the valid name (minimum 3 cherecters)'));
    exit;
}
if(!isset($_GET['email']) || empty($_GET['email'])){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the email'));
    exit;
}elseif(!ereg('[A-Za-z0-9_-]+\@[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+', $_GET['email'])){
    echo json_encode(array('status'=> false, 'message' => 'Invalid email address'));
    exit;
}
if(!isset($_GET['postcode']) || empty($_GET['postcode']) || strlen($_GET['postcode']) < 3){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the postcode'));
    exit;
}
if(!isset($_GET['phone']) || empty($_GET['phone']) || strlen($_GET['phone']) < 11){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the phone'));
    exit;
}elseif(strlen(str_replace(' ', '',$_GET['phone'])) > 11){
    echo json_encode(array('status'=> false, 'message' => 'Please Fill with valid (max)11 digit phone number excluding spaces'));
    exit;
}

$to      = 'name@domain.com';
$subject = 'Guide has been downloaded';
$message = "Some one at your website just downloaded the guide with following details. \r\n \r\n";
$message .= 'Name: '.$_GET['name']." \r\n";
$message .= 'Email: '.$_GET['email']." \r\n";
$message .= 'PostCode: '.$_GET['postcode']." \r\n";
$message .= 'Phone: '.$_GET['phone']." \r\n";

$headers = 'From: '.$_GET['email']. "\r\n" .
    'Reply-To: '.$_GET['email']. "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
    echo json_encode(array('status'=> true, 'message' => 'Thank You'));
    exit;
?> 
```

请如果有人可以指出问题并帮助我解决它.. 将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:09:30.627

在您的代码中：您告诉它将数据输入到与检查无关的数据库中。除了数据库插入的位置之外，我没有更改您的任何代码。任何其他错误尚未解决

```
<?php error_reporting(0); 

if(empty($_GET)){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the complete form'));     
    exit; 
} 

// download function 
if(isset($_GET['file'])){ 
$filename = 'Guide.pdf'; // set absolute relative path to this file 
$path = $_SERVER['DOCUMENT_ROOT']."/download/"; 
$fullpath = $path.$filename; 
// required for IE, otherwise Content-disposition is ignored 
if(ini_get('zlib.output_compression')) 
ini_set('zlib.output_compression', 'Off'); 
header("Pragma: public"); // required 
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Transfer-Encoding: binary"); 
header("Content-Type: application/pdf"); 
header('Content-Disposition: attachment; filename="'.$filename.'"'); 
header("Content-Length: ".filesize($fullpath)); 
readfile($fullpath); 
} 

if(!isset($_GET['name']) || empty($_GET['name'])){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the name')); 
    exit; 
}elseif(strlen($_GET['name']) < 3){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the valid name (minimum 3 cherecters)')); 
    exit; 
} 
if(!isset($_GET['email']) || empty($_GET['email'])){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the email')); 
    exit; 
}elseif(!ereg('[A-Za-z0-9_-]+\@[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+', $_GET['email'])){ 
    echo json_encode(array('status'=> false, 'message' => 'Invalid email address')); 
    exit; 
} 
if(!isset($_GET['postcode']) || empty($_GET['postcode']) || strlen($_GET['postcode']) < 3){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the postcode')); 
    exit; 
} 
if(!isset($_GET['phone']) || empty($_GET['phone']) || strlen($_GET['phone']) < 11){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill the phone')); 
    exit; 
}elseif(strlen(str_replace(' ', '',$_GET['phone'])) > 11){ 
    echo json_encode(array('status'=> false, 'message' => 'Please Fill with valid (max)11 digit phone number excluding spaces')); 
    exit; 
} 

$to      = 'name@domain.com'; 
$subject = 'Guide has been downloaded'; 
$message = "Some one at your website just downloaded the guide with following details. \r\n \r\n"; 
$message .= 'Name: '.$_GET['name']." \r\n"; 
$message .= 'Email: '.$_GET['email']." \r\n"; 
$message .= 'PostCode: '.$_GET['postcode']." \r\n"; 
$message .= 'Phone: '.$_GET['phone']." \r\n"; 

$headers = 'From: '.$_GET['email']. "\r\n" . 
    'Reply-To: '.$_GET['email']. "\r\n" . 
    'X-Mailer: PHP/' . phpversion(); 

mail($to, $subject, $message, $headers); 
    echo json_encode(array('status'=> true, 'message' => 'Thank You')); 
//database insertion 
$con = mysql_connect("localhost","mysql_user","mysql_pwd"); 
if (!$con) 
{ 
die('Could not connect: ' . mysql_error()); 
} 
mysql_select_db("mysql_database", $con); 
$sql="INSERT INTO formdata (name, email, postcode, phone) VALUES ('$_GET[name]','$_GET[email]','$_GET[postcode]','$_GET[phone]')"; 
if (!mysql_query($sql,$con)) 
{ 
die('Error: ' . mysql_error()); 
} 
mysql_close($con); 

?> 
```

# android - 如何将结果从第二个片段传递到第一个片段

> ID：12103953
> 
> 赞同：24
> 
> 时间：2012-08-24T06:06:42.250
> 
> 标签：android, android-fragments

在我的应用程序中，我有两个片段，分别是**fragmentA**和**FragmentB**。当我单击**fragmetA中的按钮时，会在****fragmentB**中打开一个列表。现在，当我从**fragmentB**的列表中选择一个项目时，我希望将结果传递给**fragmentA**。我对所有片段只使用一个 TabActivity。**当在fragmentB**中选择列表项时，我从堆栈中弹出**fragmentB**以便我可以直接返回到**fragmentA**。

有谁知道如何将结果传递给前一个片段。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T08:20:54.733

**更新**

Activity 是父[控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，应该负责处理由其片段/视图引发的那些事件，这些事件涉及片段/视图本身范围之外的事情。

片段将充当其托管的视图的[子控制器](http://en.wikipedia.org/wiki/Hierarchical_model%E2%80%93view%E2%80%93controller)。所有的事件和它自己的视图之间的通信，片段应该自己处理。当有一个片段的范围和职责之外的事件（比如向另一个片段发送数据）时，该事件应该升级到它的父控制器，即 Activity。

[![在此处输入图像描述](../Images/75b6e760d9819ebfc33ad56dc6b5e73a.png)](https://i.stack.imgur.com/c3Sir.png)

**老的**

从本教程：http: [//developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

让活动对其片段应用更改比直接在片段之间传递值更好。让您的 Activity使用和方法实现`FragmentListener`接口。`onQuery(Bundle data)``onResult(Bundle data)`

在每个片段中创建一个`FragmentListener`变量，然后`onAttach()` 将每个片段覆盖为：

```
 public void onAttach(Activity activity) {
    super.onAttach(activity);

    //---register parent activity for events---
    try{
        fragmentListener = (FragmentListener) activity;
    }catch (ClassCastException e)
    {
        throw new ClassCastException("Parent activity must implement interface FragmentListener.");
    }
  } 
```

这将强制您的子片段自动注册到父 Activity。

另外，请记住`fragmentListener`在`onDetach()`.

现在您可以从片段中调用您的活动。

另一方面，您的 Activity 始终可以使用`getFragmentManager().findFragmentByTag("fragmentA")`或搜索片段`findFragmentById("FragmentA")`。如果它可以找到你的 Fragment，那么它可以将它转换到你的`FragmentA`类中并调用它的方法。同样可以用`FragmentB`或任何其他片段完成..

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T07:47:18.950

可能的解决方案之一：

```
public class DetachableResultReceiver extends ResultReceiver {

private Receiver mReceiver;

public DetachableResultReceiver(Handler handler) {
    super(handler);
}

public void clearReceiver() {
    mReceiver = null;
}

public void setReceiver(Receiver receiver) {
    mReceiver = receiver;
}

public interface Receiver {
    public void onReceiveResult(int resultCode, Bundle resultData);
}

@Override
protected void onReceiveResult(int resultCode, Bundle resultData) {
    if (mReceiver != null) {
        mReceiver.onReceiveResult(resultCode, resultData);
    }
}
} 
```

第一个片段实现 DetachableResultReceiver.Receiver 并创建 DetachableResultReceiver 对象：

```
mReceiver = new DetachableResultReceiver(new Handler());
mReceiver.setReceiver(this); 
```

然后你可以将它传递给第二个片段参数：

```
Bundle bundle = new Bundle();
bundle.putParcelable(Consts.EXTRA_RECEIVER, receiver);
fragment.setArguments(bundle); 
```

并在第二个片段中使用它：

```
receiver = getArguments().getParcelable(Consts.EXTRA_RECEIVER);
receiver.send(Consts.SOME_MESSAGE, someData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:12:29.213

在 fragmentB.java 中设置一个 OnClickListener 来执行主类中的方法。将 fragmentB.java 中的参数传递给作为变量的主类，并在主类中处理其余部分。尽管片段根本不应该真正依赖于活动。片段可以在任何地方即插即用。

**此示例显示 EditTextListener：**

myAwesomeActivity.java

片段A.java

片段B.java

**片段B.java：**

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
            int x = 3;

        EditText ed1 = (EditText) getView().findViewById(R.id.editText1);
        ed1.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (MotionEvent.ACTION_UP == event.getAction()) {

                    ((myAwesomeActivity) getActivity()).myMethod(x);
                }
                return false;
            }
        });
    } 
```

**myAwesomeActivity.java：**

```
publiv void myMethod (int x){
//Do whatever you want with variable
} 
```

您所要做的就是实现正确类型的侦听器，但重点已显示。在一个片段活动中，调用一个方法并将一个变量传递给主活动。如果您愿意，您可以从主要活动将其发送到您的其他片段活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T15:24:53.390

您还可以使用`SharedPreferences`保存一些字符串并在返回到第一个片段后将其加载并清除。

# qt - 如何使用 Qt 将视频分割成帧？

> ID：12103955
> 
> 赞同：1
> 
> 时间：2012-08-24T06:06:48.117
> 
> 标签：qt, video, h.264, phonon, mpeg-4

例如，我想加载视频文件（H.264 和 MPEG-4）并将其分成两部分。我希望它在第 30 秒拆分 - 但我想完全保存帧。那么，有什么方法可以做到吗？我查看了声子，但没有看到任何对这个问题有用的东西。

# php - PHP Word 文件行计数器

> ID：12103958
> 
> 赞同：0
> 
> 时间：2012-08-24T06:06:58.220
> 
> 标签：php, html, file, count

我需要制作一个 PHP 函数来计算 Word 文件（.doc、docx）中的行数

这段代码对我来说似乎无法正常工作：

```
 $name = 'test.doc';                
 $line_count = count(file($name));
 echo $line_count 
```

我的猜测是该脚本不适用于 .doc 或 .docx，但适用于 .txt 文件。那里有替代品吗？天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:32:21.007

只能`.docx`用 simple 打开，`PHP`因为它是一个`zip`文件：

```
$zip = new ZipArchive;
if ($zip->open('test.docx') === TRUE) {
    $xml = $zip->getFromName('docProps/app.xml');
    $zip->close();
} else {
    $xml = false;
}

if($xml){
    $xml = simplexml_load_string($xml);
    echo $xml->Lines;
} 
```

# iphone - 更改选定段控件的颜色

> ID：12103961
> 
> 赞同：5
> 
> 时间：2012-08-24T06:07:20.263
> 
> 标签：iphone, objective-c, ios, xcode, uisegmentedcontrol

在我的应用程序中，我能够更改所选段控件的颜色。但是颜色会更改为另一个索引而不是所选索引。我可以在索引中找到任何错误。

帮我！

我的代码如下：

```
if([SegmentRound selectedSegmentIndex] == 0)
    {

        UIColor *newSelectedTintColor2 = [UIColor colorWithRed: 98/255.0 green:156/255.0 blue:247/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:0] setTintColor:newSelectedTintColor2];

        UIColor *newSelectedTintColor1 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:1] setTintColor:newSelectedTintColor1];

        UIColor *newSelectedTintColor0 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:2] setTintColor:newSelectedTintColor0];

        FLAGROUND=1;
    }

    if([SegmentRound selectedSegmentIndex] == 1)
    {
        UIColor *newSelectedTintColor1 = [UIColor colorWithRed: 98/255.0 green:156/255.0 blue:247/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:1] setTintColor:newSelectedTintColor1];

        UIColor *newSelectedTintColor0 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:0] setTintColor:newSelectedTintColor0];

        UIColor *newSelectedTintColor2 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:2] setTintColor:newSelectedTintColor2];

        FLAGROUND=2;
    }
    if([SegmentRound selectedSegmentIndex] == 2)
    {
        UIColor *newSelectedTintColor0 = [UIColor colorWithRed: 98/255.0 green:156/255.0 blue:247/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:2] setTintColor:newSelectedTintColor0];

        UIColor *newSelectedTintColor2 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:0] setTintColor:newSelectedTintColor2];

        UIColor *newSelectedTintColor1 = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];
        [[[SegmentRound subviews] objectAtIndex:1] setTintColor:newSelectedTintColor1];
        FLAGROUND=3;
    } 
```

viewwill出现：

```
[SegmentRound setSelectedSegmentIndex:0]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T06:37:05.360

我建议在您的条件之外创建两种颜色，使您的代码更小一些。然后，您可以使用 foreach 迭代您的细分：

```
UIColor *selectedColor = [UIColor colorWithRed: 98/255.0 green:156/255.0 blue:247/255.0 alpha:1.0];
UIColor *deselectedColor = [UIColor colorWithRed: 54/255.0 green:52/255.0 blue:48/255.0 alpha:1.0];

for (UIControl *subview in [SegmentRound subviews]) {
    if ([subview isSelected]) 
       [subview setTintColor:selectedColor]; 
    else
       [subview setTintColor:deselectedColor]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:35:30.747

看看这个

```
-(IBAction)segmentBtnPressed:(UISegmentedControl*)sender{
for (int i=0; i<[sender.subviews count]; i++) 
{
    if ([[sender.subviews objectAtIndex:i]isSelected] ) 
    {               
    UIColor *tintcolor=[UIColor colorWithRed: 98/255.0 green:156/255.0 blue:247/255.0 alpha:1.0];
    [[sender.subviews objectAtIndex:i] setTintColor:tintcolor];
    }
    else{
     UIColor *tintcolor=[UIColor colorWithRed:127.0/255.0 green:161.0/255.0 blue:183.0/255.0 alpha:1.0];
    [[sender.subviews objectAtIndex:i] setTintColor:tintcolor];

    }
}
} 
```

您也可以在这里查看更多答案[UISegmentedControl 选定的段颜色](https://stackoverflow.com/questions/2270526/uisegmentedcontrol-selected-segment-color/5932524#5932524)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T19:50:25.737

我希望您可以简单地更改 Segment Control 的 TintColor。它非常适合我。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T06:34:28.203

我尝试在控制台上打印段控制的子视图，我检测到索引顺序相反，这意味着如果 selectedSegment 为 0，那么您的子视图应该是 2 而不是 0。尝试在控制台上打印段控制，您将在段上看到如下相同的结果行动。：

```
NSArray *theArr = [mSegmentedControl subviews];
            DEBUGLOG(@"controls arr: %@",theArr); 
```

控制台上的日志：

```
controls arr: (
    "<UISegment: 0x8598ad0; frame = (77 0; 76 34); opaque = NO; layer = <CALayer: 0x8598b30>>",
    "<UISegment: 0x85986e0; frame = (0 0; 76 34); opaque = NO; layer = <CALayer: 0x8598740>>"
) 
```

# php - 如何序列化 Zend_Mail_Message？

> ID：12103962
> 
> 赞同：2
> 
> 时间：2012-08-24T06:07:21.703
> 
> 标签：php, zend-framework, zend-mail

我有几个`Zend_Mail_Message`从 IMAP 查询中获得的对象。现在我想单独序列化每条消息。

但是，似乎很简单：

```
serialize($message); 
```

不起作用，因为消息有附件（多部分），并且这些部分没有被序列化。

那么，如何序列化一个完整的`Zend_Mail_Message`对象，包括部分（附件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:22:22.987

我想到了。基本上 Zend_Mail_Message 具有缓存机制，因此当您从消息中获取一部分时，它不会再次向 IMAP 服务器询问该部分。

所以关键是在序列化之前预热缓存：

```
$i=0;
while ($part = $message->getPart($i) {
  $i++;
}

$serialization=serialize($message); //now it saves the whole message. 
```

# ios - ASIHTTPRequest 是否支持 ios 中的 https 摘要认证？

> ID：12103968
> 
> 赞同：0
> 
> 时间：2012-08-24T06:07:34.680
> 
> 标签：ios, xml, webserver, asihttprequest

实际上我想从服务器获取数据。当我使用 ASIHTTPRequest 进行基本身份验证时，我没有收到任何错误。当我使用 ASIHTTPRequest 进行摘要身份验证时，我遇到了问题。

我的代码是：

```
 ASIHTTPRequest *requestASI = [[[ASIHTTPRequest alloc] initWithURL:url] autorelease];//url is in https
     [requestASI setValidatesSecureCertificate:NO];
    //[requestASI setDelegate:self];
    [requestASI setUsername:self.user_name];
    [requestASI setPassword:self.pass_word];
     [requestASI setAuthenticationScheme:(NSString *)kCFHTTPAuthenticationSchemeDigest];
     [requestASI addRequestHeader:@"User-Agent" value:@"ASIHTTPRequest"];
     [requestASI setRequestMethod:@"GET"];
   // [requestASI startAsynchronous];
    [requestASI startSynchronous]; 
```

我有如下......

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
Request header field is missing ':' separator.<br />
<pre>
hone OS 5.0; en_US)</pre>
</p>
<hr>
<address>Apache/2.2.16 (Fedora) Server at www.example.com Port 443</address>
</body></html> 
```

实际上我必须得到如下......

```
<?xml version="1.0" encoding="UTF-8" ?>
<resource-lists xmlns="urn:ietf:params:xml:ns:resource-lists">
    <list name="friends">
        <entry uri="venkat">
            <display-name>My name is Prasad</display-name>
        </entry>
    </list>
</resource-lists> 
```

我已经使用 RESTClient 获得了它，它是 RESTful Web 服务的调试器。但我没有使用我的代码。请任何人帮助我解决问题所在。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:23:52.443

I used the following to perform successful Digest Auth using ASIHTTPRequest. Can be modified to make it Async.

```
NSString* urlString = @"http://yourURL"; 
NSURL* url = [NSURL URLWithString:urlString]; 
ASIHTTPRequest* request = [ASIHTTPRequest requestWithURL:url]; 

[request setDelegate:self]; 
request.shouldPresentCredentialsBeforeChallenge = YES; 
[request setUsername:@"yourusername"]; 
[request setPassword:@"yourpassword"]; 

request.timeOutSeconds = 30; 
request.validatesSecureCertificate = NO; 

[request setRequestMethod:@"GET"]; 
[request setDidFinishSelector:@selector(sendRequestResponse:)]; 
[request setDidFailSelector:@selector(sendRequestResponse:)]; 

[request startSynchronous]; 
NSError *error = [request error];
if (!error) {
    NSString *response = [request responseString];
} 
```

# php - 将年份和/或月份添加到 Wordpress“事件日历”中的单个事件永久链接？

> ID：12103975
> 
> 赞同：0
> 
> 时间：2012-08-24T06:07:57.273
> 
> 标签：php, wordpress

我正在使用 wordpress 和“事件日历”插件，它为每个“事件”提供了一个永久链接 URL，例如 /event/

那行得通，我可以将 /event/ 更改为我想要的任何单词，但是当我有像“开学第一天”这样的事件时，它让我意识到我真正想要的是向 slug 添加更多信息像'/event/2012/'或'/event/2012/09/'......但在'The Events Calendar'插件中我无法弄清楚我将如何做到这一点，或者它是否可能。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:49:30.010

不使用插件，你可以修改你的永久链接结构吗`Settings > Permalinks`

也许您可以使用的自定义结构是：

```
/%year%/%monthnum%/%day%/%postname% 
```

不确定事件管理器是如何注册的，您可能需要在结构前面放置一些东西

```
/%category%/%year%/%monthnum%/%day%/%postname% 
```

# objective-c - 选择具有受支持架构的目标以便在此设备上运行

> ID：12103976
> 
> 赞同：56
> 
> 时间：2012-08-24T06:07:58.177
> 
> 标签：objective-c, cocos2d-iphone, xcodebuild

![在此处输入图像描述](../Images/6c4ab27a147c570478760644693c6f46.png)

我的 Xcode 是版本 4.4.1

该项目在更新到此新版本之前运行良好，但现在停止运行

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-06-18T05:44:45.377

制作多个目标时，我遇到了同样的问题。我的问题是我必须在包装下更改我的产品名称。

在每个目标项目中 > 构建设置 > 打包 -> 产品名称

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-27T12:22:03.593

我想在 iPad 上安装我的旧应用程序。我将我的 XCode 从 4.3.2 更新到 XCode 4.5 并遇到了这个问题。我尝试了很多搜索终于得到了这个解决方案。

在您的**目标**设置（不是项目设置）中，请检查以下设置

> 有效架构：armv7

就我而言，我从中删除了 arm6 并且它可以工作。希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-27T13:34:42.750

今天有同样的问题。如果您添加了任何文件，请检查您是否还添加了带有文件的 info.plist。删除它，它会工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T03:07:59.100

在您的 Info.plist 中删除字符串“所需的设备功能 armv7”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T19:31:30.843

我刚刚遇到了这个问题，我已将 Facebook SDK 3.5 中的 Info.plist 添加到我的 Xcode 项目中。一旦我删除了 facebook Into.plist 文件，一切正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-30T04:52:26.193

在您的 Info.plist 中删除字符串“所需的设备功能 opengles-1”

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-28T20:51:33.047

我今天收到了同样的错误消息。

我在一个有几个 iOS App 项目和一个框架项目的工作区工作（使用[https://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)）。我刚刚添加了那个框架项目并在 iPhone 模拟器中进行了测试，但是当我去启动我的 iPhone 上的任何应用程序时，它们都抛出了这个错误（上面提到过）。

原来我只是通过从工作区中删除框架项目来解决问题。我可以在 iOS 应用程序中毫无问题地使用该框架，但由于某种原因，该框架项目可能存在于同一个工作区中。

希望这对我这种情况的任何人都有帮助！

# android - 获取已安装的应用程序缓存文件夹路径

> ID：12103980
> 
> 赞同：1
> 
> 时间：2012-08-24T06:08:15.840
> 
> 标签：android, caching, path

出于某种目的，我想要已安装的应用程序缓存文件夹路径。是否可以获得此路径（所有安装在内部存储器和外部存储器应用程序中）。现在在我的应用程序中，我能够获取所有已安装应用程序的列表以及何时我单击它，然后我可以获得该应用程序的应用程序名称和包名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:22:09.783

应用程序缓存文件夹的路径通常看起来像

```
SD_CACHE_PATH = "/Android/data/app.package.name/cache/"; 
```

其中 app.package.name 是应用程序的包。至少在 SD 卡上是这样的。所以要到达 SD 上的这个文件夹，我使用：

```
Environment.getExternalStorageDirectory() + SD_CACHE_PATH 
```

在那里创建一些文件，我使用：

```
File file = new File(Environment.getExternalStorageDirectory() + SD_CACHE_PATH, filename); 
```

# android - 位图大小超出 VM 预算 java.lang.OutOfMemoryError：位图大小超出 VM 预算

> ID：12103983
> 
> 赞同：1
> 
> 时间：2012-08-24T06:08:59.573
> 
> 标签：android

我知道这个问题已经在这个论坛上被问过很多次了，但我仍然无法得到完美的答案来解决这个问题。

在我的应用程序中，我使用 3 种不同尺寸的相同图像：小、中、大。

当我多次使用这些图像时，我得到了这个错误。

```
08-24 11:08:55.994: E/ImageLoader(636): bitmap size exceeds VM budget
08-24 11:08:55.994: E/ImageLoader(636): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-24 11:08:55.994: E/ImageLoader(636):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
08-24 11:08:55.994: E/ImageLoader(636):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:459)
08-24 11:08:55.994: E/ImageLoader(636):     at com.nostra13.universalimageloader.core.ImageDecoder.decode(ImageDecoder.java:75)
08-24 11:08:55.994: E/ImageLoader(636):     at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.decodeWithOOMHandling(LoadAndDisplayImageTask.java:161)
08-24 11:08:55.994: E/ImageLoader(636):     at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.decodeImage(LoadAndDisplayImageTask.java:148)
08-24 11:08:55.994: E/ImageLoader(636):     at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:104)
08-24 11:08:55.994: E/ImageLoader(636):     at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:58)
08-24 11:08:55.994: E/ImageLoader(636):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
08-24 11:08:55.994: E/ImageLoader(636):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-24 11:08:55.994: E/ImageLoader(636):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-24 11:08:55.994: E/ImageLoader(636):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-24 11:08:55.994: E/ImageLoader(636):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-24 11:08:55.994: E/ImageLoader(636):     at java.lang.Thread.run(Thread.java:1096) 
```

任何人都可以帮助解决它..我已经搜索了很多相同的问题，但我仍然没有得到这样的解决方案..

这就是为什么我必须在凌晨四点写下这个问题。

我正在等待积极的答复..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:14:29.377

这是图像的常见问题。Android 为每个应用程序提供了一定数量的空间。在没有缩小尺寸的情况下拍摄的图像往往会导致这个问题。最好的解决办法是

`BitmapFactory.Options options = new BitmapFactory.Options();`

`options.inSampleSize = 8;`（此处使用值作为 2 的幂以获得最佳解决方案）

并在您解码时将它们传递给位图

`Bitmap bm = BitmapFactory.decodeStream(<input image file>, null, options);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:18:33.200

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

这意味着设备内存不足并被强制关闭。

现在，既然您说多次使用图像时会出现错误，我相信您并没有释放资源。位图有时会占用大量空间，如果您将它们保存在内存中，如果设备出现 OOM，我不会感到惊讶。不同的设备有不同的内存规格，经过几次运行，它就会填满内存。

因此，我的建议是清除位图和您用于临时目的的其他存储。

如果这仍然不能解决您的问题，请将代码发布到您处理图像的位置，我们将尝试查看是否有更高效的内存方式来处理您正在做的事情。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:21:04.673

我认为您可以使用失败重试机制来解决此问题。

喜欢：尝试正常加载图像，如果失败，从 catch 块，尝试使用 BitmapConfig (Bitmap.Config.ARGB_4444) 以降低的质量加载它，如果再次失败，尝试以更低的质量加载它 (Bitmap.配置.ALPHA_8)。我也有同样的问题，现在这个方法对我有用。

```
Bitmap imageBitmap = null;
BitmapFactory.Options options = new BitmapFactory.Options();
options.inDither = false; 
options.inPurgeable = true;
options.inInputShareable = true; 
options.inTempStorage = new byte[32 * 1024];
options.inPreferredConfig = config;//Bitmap.Config.ARGB_4444 or Bitmap.Config.ALPHA_8 when failed  
options.inSampleSize = 1;
imageBitmap = BitmapFactory.decodeFile(bitmapPath, options); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T00:52:06.223

这是一个老问题，但我最终浪费了一整天时间尝试使用出色的 UIL 修复旧设备上的图像内存问题。这些答案都不是 UIL 特有的，我的解决方案最终来自于偶然发现 Nostra 自己回答的这个问题：

[如何在使用 Android 通用图像加载器在视图中显示图片之前调整其大小？](https://stackoverflow.com/questions/15741947/android-universal-image-loader-resize-picture-before-displaing-it-in-a-view)

对我来说，这里的**maxImageWidthForMemoryCache**和高度值非常重要。我正在下载并显示大约屏幕大小的图像，并将其放置在屏幕宽度和高度的图像视图中，因此实际上没有发生任何缩放。这对于我的 2.3 手机来说太大了，将尺寸减半对图像质量几乎没有明显的影响有很大帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T06:35:25.410

您可以使用此方法来解码位图：

```
public static Bitmap loadBitmap() {
    FileInputStream fis = null;
    Bitmap bitmap = null;

    BitmapFactory.Options option = new BitmapFactory.Options();
    option.inDither = false;
    option.inPurgeable = true;
    option.inInputShareable = true;
    option.inTempStorage = new byte[32 * 1024];
    option.inPreferredConfig = Bitmap.Config.RGB_565;

    try {
        fis = IOHelper.openInputStream(); //get the picture's FileInputStream
        FileDescriptor fd = fis.getFD();
        bitmap = BitmapFactory.decodeFileDescriptor(fd, null, option);
    } catch (IOException e) {

    } finally {
        IOHelper.closeQuietly(fis);
    }
    return bitmap;
} 
```

# windows - NSIS DELETE 命令不起作用

> ID：12103992
> 
> 赞同：0
> 
> 时间：2012-08-24T06:10:01.410
> 
> 标签：windows, installation, nsis

我正在与应用程序一起部署 gstreamer winbuilds。主要问题是 gstreamer winbuilds 安装损坏。python 绑定不起作用，每次你用烦人的弹出窗口初始化 gstreamer 时它都会抱怨。所以，我发现我可以从 lib 文件夹中删除“libgstpython-v2.6.dll”来解决问题。但是，NSIS 不会删除该文件。请注意，我确定路径是正确的。

这是代码：

```
ReadRegStr $0 HKLM 'SOFTWARE\OSSBUILD\GStreamer' InstallDir
ReadRegStr $3 HKLM 'SOFTWARE\Wow6432Node\OSSBUILD\Gstreamer' InstallDir

${If} $0 == '' 
 ${AndIf} $3 == ''
    DetailPrint 'The HHPVideoServer plugin depends on Gstreamer, we will need to install the core Gstreamer Components.'
    DetailPrint 'Installing Gstreamer.'
    ExecWait '"msiexec" /i "$INSTDIR\GStreamer-WinBuilds-GPL-x86-Beta04-0.10.7.msi" /q /norestart' $1
    DetailPrint 'Finished installing Gstreamer with error code $1' 

    ReadRegStr $0 HKLM 'SOFTWARE\OSSBUILD\GStreamer' InstallDir
    ReadRegStr $3 HKLM 'SOFTWARE\Wow6432Node\OSSBUILD\Gstreamer' InstallDir

    ${If} $0 != ''
        DetailPrint 'Gstreamer Plugins installed to $0'
        DetailPrint 'Deleting $0lib\gstreamer-0.10\libgstpython-v2.6.dll'
        DELETE '$0lib\gstreamer-0.10\libgstpython-v2.6.dll''
    ${ElseIF} $3 != ''
        DetailPrint 'Gstreamer Plugins installed to $3'
        DetailPrint 'Deleting $3lib\gstreamer-0.10\libgstpython-v2.6.dll'
       DELETE '$3lib\gstreamer-0.10\libgstpython-v2.6.dll'
    ${EndIf}

${Else}
    DetailPrint 'Gstreamer already installed.'
${EndIf} 
```

删除调用永远不会起作用。如果我手动删除该文件，它会修复 gstreamer 的错误消息。此外，安装程序以管理员权限运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:23:27.847

嗨，你能做一个快速测试吗？

在两个地方进行删除调用后添加以下行：

```
IfErrors 0 +2
DetailPrint 'There was an error trying to delete the file!' 
```

这将让我们知道它是否正在尝试删除文件并且它不能或者它是否没有找到该文件。删除仅在找到文件并且无法删除时才会引发错误。

如果您最终得到一个错误，那么下一步是在您尝试删除它时尝试找出正在使用该 DLL 的程序或服务。

# php - why strpos doesn't work with ">" and other chracters

> ID：12103995
> 
> 赞同：2
> 
> 时间：2012-08-24T06:10:11.400
> 
> 标签：php, strpos

I want to check whether special characters such as "<" ">" or the double quote itself is found in a string. But my function always return true.

Thank you

This is the code:

```
$name = "<h1><dfdafdfds";

function correctName($name){
    if (strlen($name) < 5 || (strpos($name, "<")===true) || 
    (strpos($name, ">")===true) || (strpos($name, "\"")===true)){

        return false;
    }else{
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:12:45.657

Strpos either returns `false` or an integer value such as `5`. It does NOT return `true`.

Therefore `(strpos($name, "<")===true` always returns false.

your code evaluates as:

```
if (strlen($name) < 5 || false) || 
(false) || (false)){

    return false;
}else{
    return true;
} 
```

**You need to use this format:**

```
strpos($name, '<') !== false 
```

so your code should look like:

```
if (strlen($name) < 5 || strpos($name, "<") !== false || strpos($name, ">") !== false || strpos($name, "\"") !== false) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:15:28.223

`strpos` never returns `TRUE`. It might return `FALSE`. Solution: change your comparisons to `!== FALSE`

# iphone - 用于实时 iPhone 应用程序的服务器框架

> ID：12103999
> 
> 赞同：0
> 
> 时间：2012-08-24T06:10:41.637
> 
> 标签：iphone, real-time

我目前正在编写一个 iPhone 应用程序，它从远程服务器发送和接收 JSON 数据，以显示实时信息。我和我的合作伙伴开始使用 Google App Engine (Python) 进行服务器端实现的项目主要是因为它很容易上手并且似乎适合我们当时的需求。然而，我们现在才刚刚开始看到实时 iPhone 应用程序框架的缺点——根本不支持 APNS，GAE Channels API 也不支持。所以我们在我们的应用程序上显示实时服务器数据的唯一选择是不断地轮询服务器，这看起来确实是个糟糕的设计。

我们必须将我们的服务器端代码移植到一个新框架。我的问题是，我们使用哪一个？经过无数次的搜索，我仍然没有找到满意的答案。

我应该提一下，我不一定希望服务器发送推送通知。我只是希望能够将数据实时推送到客户端，然后在 iPhone 客户端代码上操作该数据。如果必须，我们可以在本地服务器上设置框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:12:47.970

由于您不想在后台提取数据（更不用说，如果可能的话）将不得不使用 APNS。

但是为什么要从谷歌应用 angine 切换，你可以使用像[Urban Airship](http://urbanairship.com/)这样的 APNS 提供商，它在 API 上提供了连接。

你甚至不是遇到这个问题的拳头：[Google Appengine 上的 Apple Push Notifications](http://dlinsin.blogspot.nl/2010/07/apple-push-notifications-on-google.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:12:17.220

[PubNub ( http://www.pubnub.com](http://www.pubnub.com) )可能是您可以用来向 iOS 客户端实时发送数据的最简单的实时框架。它价格合理，并且可以扩展到您可以扔给它的任何东西。以我的经验，在不到 0.25 毫秒的时间内将消息传递给最终客户端没有问题（无论它被发送到多少个客户端）。

当您的应用程序不在前台时，他们的最新版本还支持 APNS 功能。

[https://github.com/pubnub/objective-c/blob/master/iOS/README_FOR_APNS.md](https://github.com/pubnub/objective-c/blob/master/iOS/README_FOR_APNS.md)

如果您想创建自己的 APNS 服务器（因为无论如何您都在 App Engine 上运行），这里有一些示例说明如何使用 App Engine 的新 Socket API 来做到这一点。我编写了一个演示 python AppEngine 应用程序，人们可能会发现它在这方面很有帮助。

[https://github.com/GaretRogers/appengine-apns-gcm](https://github.com/GarettRogers/appengine-apns-gcm)