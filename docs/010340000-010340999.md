# StackOverflow 问答 10340000-10340999

# java - Linux更改java程序的工作目录

> ID：10340000
> 
> 赞同：0
> 
> 时间：2012-04-26T19:23:37.200
> 
> 标签：java, linux, working-directory

我想在 Linux 中运行一个 java 程序并将其工作目录更改为特定位置。我对 Linux 有点陌生，所以我需要很多帮助。我设法弄清楚了这一点：

```
java -jar program.jar 
```

这将在它选择的工作目录中运行程序。现在我需要找到一种方法来更改工作目录。我认为这台计算机正在运行 UBuntu（或者你拼写它），但我不确定。我还在一个权限受到严格限制的帐户上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:27:47.553

**编辑（基于下面提问者评论中给出的信息）：**

所以，看起来你只需要一个批处理脚本在启动 java 之前`cd`进入它*自己的目录。*

像这个脚本这样的东西应该可以做到。

```
#!/bin/bash
DIR=`dirname "$BASH_SOURCE[0]"`
cd "$DIR"
echo "Current dir: $DIR"
javaw -jar program.jar & 
```

因此，请确保它是可执行的（`chmod +x minecraft.sh`），然后当您双击它或从任何文件夹运行脚本时，它会将脚本的文件夹视为其工作目录。更多信息可以在[SO questions like this one](https://stackoverflow.com/questions/59895/can-a-bash-script-tell-what-directory-its-stored-in)中找到。

我不打算安装 Minecraft，否则我的生活将消失在一个黑暗的游戏洞中；）

*原答案：*

说想要的工作目录/x/y/z，并且program.jar在目录/a/b/c中

```
cd /x/y/z
java -jar /a/b/c/program.jar 
```

# php - 使用 OAuth2.0 和 PHP 的 C2DM（ClientLogin 已弃用！）

> ID：10340005
> 
> 赞同：11
> 
> 时间：2012-04-26T19:24:04.720
> 
> 标签：php, android, push-notification, oauth-2.0, android-c2dm

*注意：在您花时间阅读之前，请知道 C2DM 本身现在已被弃用并被 GCM 取代（http://developer.android.com/guide/google/gcm/c2dm.html）*

-- 原始问题 --

我们是否有示例代码用于实现 PHP 服务器端代码以使用 C2DM 将消息推送到 Android 设备？

我搜索了许多代码示例，它们使用已弃用的旧身份验证方法 ClientLogin。参考：[https](https://developers.google.com/accounts/docs/AuthForInstalledApps) ://developers.google.com/accounts/docs/AuthForInstalledApps （重要提示：ClientLogin 已于 2012 年 4 月 20 日正式弃用。它将根据我们的弃用政策继续工作，但我们鼓励您迁移到OAuth 2.0 尽快。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:51:52.633

这不适用于 C2DM，因为它是一个托管帐户，如果您看到它说的[https://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

> ClientLogin 可用于授权访问 Google 常规帐户和托管帐户。托管帐户是属于 Google Apps 服务一部分的用户帐户。

此外，如果您看到图形是用户之间的清晰交互作为 UI 界面，因为涉及验证码。

![在此处输入图像描述](../Images/92ba52645d434c49f51c71cb060fefcb.png)

**编辑**

顺便说一句，您可以从这篇文章中看到 C2DM 机制仍将使用 ClientLogin，但 2011 年 10 月之前的密钥将过期，因此您需要重新创建它们。这是 ClientLogin 被弃用前 8 天的最新帖子。[C2DM 客户端登录密钥](http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:17:31.723

我还不知道如何将 C2DM 与 oAuth 2.0 一起使用，但这是我尝试过的。希望这可以帮助某人解决类似的问题

[我在http://aleksmaus.blogspot.com/2012/01/oauth2-with-google-c2dm-push.html](http://aleksmaus.blogspot.com/2012/01/oauth2-with-google-c2dm-push.html)找到了一个有用的资源 但是当我尝试通过 OAuth 2.0 使用 C2DM 发送消息时它没有在使用 ClientLogin 做得很好的同时工作。

这就是我使用控制台和 Web 浏览器的方式（我知道，您已经询问过 PHP 实现。但我希望这对您也有帮助）

* * *

# 客户登录：（成功）

从以下位置获取身份验证令牌：

```
$ curl -k -d "accountType=HOSTED_OR_GOOGLE&service=ac2dm&source=test-1.0&Email=[email account with @gmail.com without brace]&Passwd=[Google account password without brace]" https://www.google.com/accounts/ClientLogin 
```

并像这样发送 C2DM 消息：

```
$ curl -k --header "Authorization: GoogleLogin auth=[my ClientLogin auth key without brace]" -d "registration_id=[can be acquired from Android application]" --trace c2dm_trace.txt -d collapse_key=0 https://android.apis.google.com/c2dm/send 
```

然后我的应用程序成功收到了 C2DM 消息

* * *

# oAuth 2.0：（失败）

通过访问 url 从 Web 浏览器获取 oAuth 2.0 身份验证凭据：

```
https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=[can be acquired from API Access menu in your API Console]&redirect_uri=urn:ietf:wg:oauth:2.0:oob&scope=https%3A%2F%2Fandroid.apis.google.com%2Fc2dm&access_type=offline 
```

（谷歌 API 控制台：[https](https://code.google.com/apis/console/) ://code.google.com/apis/console/ ）

并像这样发送：

```
$ curl -k -H "Authorization: Bearer [my auth key from oAuth]" --trace curl_trace.txt -d "registration_id=[an be acquired from Android application]" -d "data.message=something to talk" -d collapse_key=0 https://android.apis.google.com/c2dm/send 
```

然后得到**401错误响应**:(

* * *

有没有人可以指出我做错了什么？

**编辑**

我在您注册 C2DM 时可能从 Google 收到的邮件中发现了**“AC2DM 目前是实验室中的 API”这句话。**[ClientLogin 弃用政策不适用于标记为“实验性”的版本、特性和功能](https://developers.google.com/accounts/terms "谷歌帐户政策")。 我不确定，但我认为这就是我们的代码不起作用的原因。

当然，我希望 ClientLogin 也很快被弃用并被 OAuth 2.0 取代

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:05:22.337

[这里](https://github.com/lytsing/c2dm-php#readme)

你可以看看，它对我有用。

您需要获取您的设备注册ID，并在post.php 中输入您的c2dm 帐户电子邮件地址和密码。

您需要了解的另一件事是关于 c2dm.php，当它尝试将服务器响应检出为“200 OK”时会发生错误。因为它试图从身体中得到这种反应。只需简单地注释其中的行，然后运行。

# windows - 将 powershell 输出导出到文本文件

> ID：10340007
> 
> 赞同：6
> 
> 时间：2012-04-26T19:24:07.543
> 
> 标签：windows, powershell, command-line, scripting, batch-file

我的 powershell 脚本中有一个 foreach 循环，每次迭代期间都会在 shell 上打印 $output 。有很多输出，shell 可以显示的条目数量是有限的。我希望将输出导出到文本文件。我知道如何在命令行中做到这一点。但是在powershell中怎么可能呢？

仅供参考，我正在使用命令行中的批处理脚本来运行 powershell 脚本

```
powershell c:\test.ps1 c:\log.log 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T19:41:44.390

您始终可以将输出的 exe 重定向到这样的文件（即使来自 cmd.exe）：

```
powershell c:\test.ps1 > c:\test.log 
```

在 PowerShell 中，您还可以将单个命令重定向到文件，但在这些情况下，您可能希望附加到日志文件而不是覆盖它，例如：

```
$logFile = 'c:\temp\test.log'
"Executing script $($MyInvocation.MyCommand.Path)" > $logFile
foreach ($proc in Get-Process) {
    $proc.Name >> $logFile
}
"Another log message here" >> $logFile 
```

如您所见，在脚本中进行重定向有点麻烦，因为您必须对文件进行大量重定向。OTOH，如果您只想将部分输出重定向到文件，那么您可以通过这种方式进行更多控制。另一种选择是用于`Write-Host`将信息输出到控制台，以供观察脚本执行结果的人使用。请注意，`Write-Host`输出不能重定向到文件。

这是从 CMD.exe 执行的示例

```
C:\Temp>type test.ps1
$OFS = ', '
"Output from $($MyInvocation.MyCommand.Path). Args are: $args"

C:\Temp>powershell.exe -file test.ps1 1 2 a b > test.log

C:\Temp>type test.log
Setting environment for using Microsoft Visual Studio 2008 Beta2 x64 tools.
Output from C:\Temp\test.ps1\. Args are: 1, 2, a, b 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-21T23:56:40.777

使用 'tee' 命令怎么样

```
C:\ipconfig | tee C:\log.txt 
```

# python - 如何获取变量的字符串文字

> ID：10340011
> 
> 赞同：0
> 
> 时间：2012-04-26T19:24:35.500
> 
> 标签：python

我有一堆变量，我需要获取要设置的变量的名称以进行验证。例如：

```
studio = 'Warner Brothers'
movie = ''
validation = [studio, movie]

validation_errors = []
for item in validation:
    if not item:
        validation_errors.append(name of variable) 
```

在上述情况下，我希望结果是：

```
validation_errors = ['movie'] 
```

有没有一种简单的方法可以在不构建字典的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:27:44.183

不要伤害自己。使用字典。简单胜于复杂。

```
validation = {'studio': studio, 'movie': movie}
validation_errors = []
for key in validation:
    if not validation[key]:
        validation_errors.append(key) 
```

如果你发现自己想像字典一样使用本地命名空间，99% 的时间你只需要字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:40:19.437

作为一个如何不做的例子**（**或者作为一个为什么不做的示范），试试这个代码：

```
def nameof(thing):
    i = id(thing)
    names = [n for n in globals().keys() if id(globals()[n]) == i]
    for name in names:
        if name[0] != '_':
            return name, names
    return names[0], names 
```

它有点工作，尽管只有当你传递它的东西是全局的，或者在全局中有一些看起来像它的东西。由于字符串实习等，它还将返回各种奇怪的匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:42:48.733

如果 Python 为您构建 dict，它是否算数？

```
studio = 'Warner Brothers'
movie = ''
validation = ['studio', 'movie']

validation_errors = []
for item in validation:
    if not locals()[item]:
        validation_errors.append(item) 
```

但是，自己构建字典是更好的主意。

```
studio = 'Warner Brothers'
movie = ''
validation = dict(studio=studio, movie=movie)

validation_errors = []
for var, value in validation.items():
    if not value:
        validation_errors.append(var) 
```

如果你想用它做一个功能：

```
def validate(**vars):
    errors = []
    for var, value in vars.items():
        if not value:
            errors.append(var)
    return errors

-->studio = 'Warner Brothers'
-->movie = ''
-->print validate(studio=studio, movie=movie)
['movie'] 
```

# javascript - Javascript 数组和循环

> ID：10340013
> 
> 赞同：0
> 
> 时间：2012-04-26T19:24:41.830
> 
> 标签：javascript

我正在为历史课制作一个模拟审查谷歌。应该发生的是用户输入一个术语，脚本将检查它是“被阻止”的术语还是可搜索的术语。如果该词被阻止，它将指向另一个页面，如果它是可搜索的，它将指向实际页面。但是，使用我的代码，脚本没有选择被阻止的术语。有任何想法吗？

Javascript：

```
function searchCensor() 
{
    var keyTerms = document.getElementById("search").value; 
    var blockedTerms = new Array("censorship", "democracy");
    var counter, blocked;
    for(counter = 0; counter < blockedTerms.length; counter++) {
        if(keyTerms == blockedTerms[counter])
            blocked = 1;
        else
            blocked = 0;   
}
    switch(blocked)
    {
    case 1: window.location = "http://andrewgu12.kodingen.com/history/censor.php";
    case 0: window.location = "https://www.google.com/search?q="+keyTerms;
    }   
} 
```

网站：[http ://andrewgu12.kodingen.com/history/](http://andrewgu12.kodingen.com/history/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:29:43.490

仔细考虑你的循环：

```
for(counter = 0; counter < blockedTerms.length; counter++) {
    if(keyTerms == blockedTerms[counter])
        blocked = 1;
    else
        blocked = 0;
} 
```

如果搜索词是“censorship”，那么第一次循环会设置blocked为1。但是第二次循环，它会查看“censorship”并检查它是否与“民主”，然后将blocked设置为0\. 如果最后一个被阻止的词与查询匹配，这实际上将阻塞设置为 1。

如果*任何*被阻止的术语与查询匹配，您真正想要的是设置为 1：

```
var blocked = 0;
for (var counter = 0; counter < blockedTerms.length; counter++) {
    if(keyTerms == blockedTerms[counter]) {
        blocked = 1;
        break;    // Don't need to continue checking, we know it's blocked
    }
} 
```

请注意，一般来说，如果您使用`true`and`false`来表示这种标志，而不是数字（如果阻塞 = 3 意味着什么？什么都没有），它会更有意义（因此更容易阅读）。代码将变为：

```
var blocked = false;
for (var counter = 0; counter < blockedTerms.length; counter++) {
    if(keyTerms == blockedTerms[counter]) {
        blocked = true;
        break;    // Don't need to continue checking, we know it's blocked
    }
}

if (blocked) {
    // ...
}
else {
    // ...
} 
```

最后，如果您打算在由多个单词组成的查询中提取被审查的术语，您可以通过拆分搜索查询然后检查是否有任何这些术语被阻止（使用嵌套循环）来实现。或者，您可以使用正则表达式并完全消除循环：

```
var blocked =
    new RegExp('\\b' + blockedTerms.join('\\b|\\b') + '\\b', 'i')
    .test(keyTerms); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:29:16.470

这仅在您的最后一个被阻止的术语匹配时才有效。

您需要修改 for 循环以在找到匹配项时中断：

```
for(counter = 0; counter < blockedTerms.length; counter++) {
    if(keyTerms == blockedTerms[counter])
    {
        blocked = 1;
        break;
    }
    else
        blocked = 0;   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:29:06.483

试试这个 ：

你应该：如果你发现障碍就停下来，或者只是举起一面旗帜，*再也不碰它*（就像你一样）

起初我假设：**阻塞=0；**//未阻塞

如果循环发现它被阻塞 - 所以阻塞得到'1'。并保持“1”。

```
function searchCensor() 
{
    var keyTerms = document.getElementById("search").value; 
    var blockedTerms = new Array("censorship", "democracy");
    var counter, blocked=0;
    for(counter = 0; counter < blockedTerms.length; counter++) {
        if(keyTerms == blockedTerms[counter])
            blocked = 1;

}
    switch(blocked)
    {
    case 1: window.location = "http://andrewgu12.kodingen.com/history/censor.php";
    case 0: window.location = "https://www.google.com/search?q="+keyTerms;
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:31:17.927

这看起来像是一个开关失败的案例。您的 switch 语句应如下所示（注意中断）：

```
switch(blocked)
    {
    case 1: window.location = "http://andrewgu12.kodingen.com/history/censor.php"; break;
    case 0: window.location = "https://www.google.com/search?q="+keyTerms;
    } 
```

此外，如上所述，循环逻辑很奇怪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:31:42.747

问题是，即使您设法检测到正确的条件，由于您没有中断您的 switch 语句，这两种情况都会运行，您将被重定向到 window.location 的最后一个设置。

奇怪的是，window.location 不是即时的。你可以在这个小提琴中看到这个：

[http://jsfiddle.net/BFmLU/](http://jsfiddle.net/BFmLU/)

# jquery - jquery淡出内容

> ID：10340016
> 
> 赞同：0
> 
> 时间：2012-04-26T19:24:47.790
> 
> 标签：jquery

我正在尝试淡出用户表单的一部分以加载下一个表单步骤（通过淡入）。但是当我点击提交时，它会提交表单，并且不会淡出。

```
<script type="text/javascript">
    function validate(input, name) {
        if( form['register'] = true ) {
            $("#step1").fadeOut("slow");
        }
    }

<form id="register" name="register" method="post" action="">
    <div id="step1" class="step1">
        form here...
        ...
        <input type="submit" 
               name="next" 
               id="next" 
               value="Continue" 
               disabled="disabled" />
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:31:46.070

您需要阻止您的表单提交以允许您的淡入淡出：

**查询：**

```
$(document).ready(function() {
  $("form").submit(function(e) {
    e.preventDefault();
    $("#step1").fadeOut("slow");
  });
}); 
```

*但作为建议，您应该使用按钮来允许用户在步骤之间来回导航，并且仅在最后一步使用提交按钮。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:33:27.513

> “但是当我点击提交时，它会提交表单，并且不会淡出。”

该行让我相信您希望在提交表单时隐藏 div。以下是你将如何去做：

```
//Select #register, bind a 'submit'-event.
$('#register').on('submit', function(e){

  //This next line will prevent the form from being submitted.
  e.preventDefault();

  //Fade out the #step1.
  $('#step1').fadeOut('slow');

}); 
```

# javascript - JS 自动完成。AJAX 与 JS 对象/数组

> ID：10340018
> 
> 赞同：0
> 
> 时间：2012-04-26T19:24:55.597
> 
> 标签：javascript, mysql, jquery

我想知道对于在每个 keyup() 上搜索表的字段，您认为什么是更好的解决方案。

1.  AJAX查询搜索数据库表，返回结果
2.  AJAX 查询以搜索数据库表，然后将结果存储在会话中，在后续请求中搜索会话
3.  AJAX查询搜索数据库表，然后将结果存储在JS对象/数组中，在后续请求中搜索对象/数组

我应该注意，该表可以轻松达到 1000 行，但不会增长到超过几千行。什么是有效的、性能驱动的方法来解决这个问题？

这会是一个好的解决方案吗？

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:32:29.420

我认为您最好的选择（根据您的评论做出一些假设）是将结果缓存在服务器上（不是会话，缓存），然后考虑该缓存对象的生命周期。如果您大量使用客户端，并且客户端是浏览器，则可以将其发送给客户端以供之后使用。考虑到 1000 X 100 将是 100,000 - 不是很大，但仍然不是试用版。

如果它是一个不太理想的客户端，例如移动设备，您可能会考虑更适合该设备集的东西。

然而，这都是相当主观的。

编辑：您应该能够构建这样的结构，以便您的缓存将被多个客户端使用（如果它们都是相同的数据集），而会话将是每个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:53:23.083

延迟查询请求，直到您至少有 3 个字符。结果数字非常低，但如果你想优化你的网页，你必须考虑有多少用户会向服务器、移动设备或桌面发起请求？您需要处理器和内存来处理对象。

# javascript - 使用 AJAX POST 到 Node 服务器

> ID：10340022
> 
> 赞同：0
> 
> 时间：2012-04-26T19:25:19.153
> 
> 标签：javascript, ajax, node.js, xmlhttprequest

我今天才真正发现了 Node.js，而且我读了这么多书，让我头疼。我已经启动并运行了节点服务器。我在节点服务器上也有一个 .JS 文件，它写入一个文本文件。我希望看到只有一个变量（名称）从我的 Javascript 应用程序传递到运行 Node.js 的服务器，以便更新日志文件。从我读过的内容来看，AJAX 是做到这一点的最佳方式。有人可以通过一个关于如何执行此操作的小代码示例让我朝着正确的方向前进吗？

服务器运行节点上的 File.js 代码

```
var fs = require('fs'), str = 'some text';
fs.open('H://log.txt', 'a', 666, function( e, id ) 
{
  fs.write( id, str + ',', null, 'utf8', function(){
  fs.close(id, function(){
  console.log('file is updated');
}); 
```

}); });

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:37:21.990

这就是我将如何做你提到的：

创建一个快速的 http 服务器，查看任何连接的请求变量，并获取传入的参数，并将其写入文件。

```
var http = require('http');
http.createServer(function (req, res) {
    var inputText = req.url.substring(1);
    processInput ( inputText );
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Completed.');
}).listen(1337, '127.0.0.1'); 
```

**在此处编辑：**当然，您仍然需要定义是什么`processInput`。

```
function processInput ( text )
{
    // What you had before
    var fs = require('fs');
    fs.open ('H://log.txt', 'a', 666, function (e, id )
    {
        fs.write ( id, text + ',', null, 'utf8', function() {
            fs.close(id, function() {
               console.log('file is updated');
            }
        }
    });
} 
```

这样，当您向

127.0.0.1:1337/写

它会将单词“write”写入文件（如果 processInput 写入输入）。

另一种处理方法是在 URI 中使用参数。有关如何执行此操作的更多信息，请[在 nodejs api](http://nodejs.org/api/http.html#http_class_http_serverrequest)中找到。

祝你好运！

# java - RESTFUL GlassFish XML XSLT 样式表 Java 转换产生 EMPTY 输出

> ID：10340023
> 
> 赞同：0
> 
> 时间：2012-04-26T19:25:22.517
> 
> 标签：java, xml, xslt, transformation

我正在用 Java 编写一个 RESTFUL Web 服务。这个想法是“削减”一个 XML 文档，去掉所有不需要的内容（~98%），只留下我们感兴趣的标签，同时保持文档的结构，如下所示（我无法提供出于保密原因的实际 XML 内容）：

```
<sear:SEGMENTS xmlns="http://www.exlibrisgroup.com/xsd/primo/primo_nm_bib" xmlns:sear="http://www.exlibrisgroup.com/xsd/jaguar/search">
   <sear:JAGROOT>
      <sear:RESULT>
         <sear:DOCSET IS_LOCAL="true" TOTAL_TIME="176" LASTHIT="9" FIRSTHIT="0" TOTALHITS="262" HIT_TIME="11">
            <sear:DOC SEARCH_ENGINE_TYPE="Local Search Engine" SEARCH_ENGINE="Local Search Engine" NO="1" RANK="0.086826384" ID="2347460">
               [
               <PrimoNMBib>
                  <record>
                     <display>
                        <title></title>
                     </display>
                     <sort>
                        <author></author>
                     </sort>
                  </record>
               </PrimoNMBib>
               ]
            </sear:DOC>
         </sear:DOCSET>
      </sear:RESULT>
   </sear:JAGROOT>
</sear:SEGMENTS> 
```

当然，这只是我们感兴趣的标签的结构——还有数百个标签，但它们无关紧要。

方括号 ([]) 不是 XML 的一部分，它表示该元素是子列表的元素并且出现多次 - 每次匹配来自 RESTFUL 服务的搜索。

话虽如此，我的包含 XSLT 样式表的 Java 代码如下：

```
 import java.io.StringReader;
    import java.io.StringWriter;

    import javax.xml.transform.Transformer;
    import javax.xml.transform.TransformerException;
    import javax.xml.transform.TransformerFactory;
    import javax.xml.transform.TransformerFactoryConfigurationError;
    import javax.xml.transform.stream.StreamResult;
    import javax.xml.transform.stream.StreamSource;

    public String cutXML() throws TransformerFactoryConfigurationError, TransformerException
    {

       String xmlSourceResource = this.xml; // where this.xml is the full XML string of structure as presented above

       String xsltResource =
       "<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:sear=\"http://www.exlibrisgroup.com/xsd/jaguar/search\">" +

       "    <xsl:output method=\"xml\" version=\"1.0\" omit-xml-declaration=\"no\" encoding=\"UTF-8\" indent=\"yes\"/>" +
       "    <xsl:strip-space elements=\"*\"/>" +

       "    <sear:WhiteList>" +
       "        <name>title</name>" +
       "        <name>author</name>" +                
       "    </sear:WhiteList>" +

       "    <xsl:template match=\"node()|@*\">" +
       "        <xsl:copy>" +
       "            <xsl:apply-templates select=\"node()|@*\"/>" +
       "        </xsl:copy>" +
       "    </xsl:template>" +

       "    <xsl:template match=\"*[not(descendant-or-self::*[name()=document('')/*/sear:WhiteList/*])]\"/>" +

       "</xsl:stylesheet>";

       StringWriter xmlResultResource = new StringWriter(); // where the transformed/stripped-down XML will be written

       Transformer xmlTransformer = TransformerFactory.newInstance().newTransformer(new StreamSource(new StringReader(xsltResource))); // create transformer object with XSLT given

       xmlTransformer.transform(new StreamSource(new StringReader(xmlSourceResource)), new StreamResult(xmlResultResource)); // transform XML with transformer and write into result StringWriter

       return xmlResultResource.getBuffer().toString(); // return transformed XML string

    } 
```

不幸的是，当我在服务器上运行它时，我得到的只是一个带有空源的空页面，好像转换的结果是一个空字符串。

服务器的日志文件首先给出了以下信息：

```
 [#|2012-04-26T18:26:24.967+0000|INFO|glassfish3.1.2|com.sun.jersey.api.core.PackagesResourceConfig|_ThreadID=23;_ThreadName=Thread-2;|Scanning for root resource and provider classes in the packages: dk.kb.mobileservice|#]

    [#|2012-04-26T18:26:24.969+0000|INFO|glassfish3.1.2|com.sun.jersey.api.core.ScanningResourceConfig|_ThreadID=23;_ThreadName=Thread-2;|Root resource classes found: class dk.kb.mobileservice.Middle|#]

    [#|2012-04-26T18:26:24.970+0000|INFO|glassfish3.1.2|com.sun.jersey.api.core.ScanningResourceConfig|_ThreadID=23;_ThreadName=Thread-2;|No provider classes found.|#]

    [#|2012-04-26T18:26:24.978+0000|INFO|glassfish3.1.2|com.sun.jersey.server.impl.application.WebApplicationImpl|_ThreadID=23;_ThreadName=Thread-2;|Initiating Jersey application, version 'Jersey: 1.11 12/09/2011 10:27 AM'|#]

    [#|2012-04-26T18:26:25.192+0000|INFO|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=23;_ThreadName=Thread-2;|WEB0671: Loading application [kb2] at [/kb2]|#]

    [#|2012-04-26T18:26:25.200+0000|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=23;_ThreadName=Thread-2;|kb2 was successfully deployed in 2,293 milliseconds.|#]

    [#|2012-04-26T18:26:46.263+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=20;_ThreadName=Thread-2;|SystemId Unknown; Line #0; Column #0; java.lang.NullPointerException |#]

    [#|2012-04-26T18:31:09.772+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=21;_ThreadName=Thread-2;|SystemId Unknown; Line #0; Column #0; java.lang.NullPointerException |#] 
```

现在它返回以下问题：

```
 [#|2012-04-27T00:05:07.731+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=21;_ThreadName=Thread-2;|Error on line 1 column 1 of file:/root/webglassfish3/glassfish/domains/domain1/config/: SXXP0003: Error reported by XML parser: Content is not allowed in prolog.|#]

    [#|2012-04-27T00:05:07.732+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=21;_ThreadName=Thread-2;|Recoverable error on line 1 SXXP0003: org.xml.sax.SAXParseException: Content is not allowed in prolog.|#] 
```

我已经测试了 XML 文件并通过浏览器对其进行了转换，并且它工作正常，所以我认为这不是 XML 也不是 XSLT 样式表的错……这似乎是一个 Java 问题。

当我在 GlassFish 之外的整个 XML 上运行上述 Java 代码时，我收到以下错误：

```
 Exception in thread "main" java.lang.VerifyError: (class: GregorSamsa$0, method: test signature:         (IIIILcom/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet;Lcom/sun/org/apache/xml/internal/dtm/DTMAxisIterator;)Z) Incompatible type for getting or setting field
        at GregorSamsa.applyTemplates()
        at GregorSamsa.applyTemplates()
        at GregorSamsa.transform()
        at         com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet.transform(AbstractTranslet.java:609)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:729)
        at         com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:340)
        at XML2JSON.cutXML(XML2JSON.java:105)
        at XML2JSON.main(XML2JSON.java:31) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:50:58.503

`Content is not allowed in prolog.`通常意味着您在 XML 开始之前有内容。XML 解析器希望看到 XML 声明: `<?xml version="1.0"?>`，或者如果省略，则只是文档元素的开头（即`<sear:SEGMENTS>`）

打印/记录`this.xml`XML 声明或文档元素之前的内容并验证没有前导空白字符或其他内容。

# java - 为位于系统托盘中的 Java 程序创建键盘挂钩

> ID：10340024
> 
> 赞同：4
> 
> 时间：2012-04-26T19:25:24.030
> 
> 标签：java, keyboard, system, handle, system-tray

基本上我有一个在系统托盘中运行的 java 程序，并且想添加它，所以如果用户按下 CTRL+SHIFT+1，它会选择托盘中的 java 程序的右键单击选项之一。

我想我正在寻找的是关于这样做的教程，或者最简单的方法是什么。我以前从未做过这样的事情，所以可能是某种noobie教程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:48:29.593

所以，创建一个键盘钩子并不像看起来那么容易，java 没有提供直接的方式来与系统事件进行交互以保证安全；因为它可能会导致有关 JVM 、系统内存和 Java 框架的可移植性的严重问题。

你有 4 种方法来制作全局键盘钩子：

1- 学习[JNI](http://en.wikipedia.org/wiki/JNI) / [JNA](http://en.wikipedia.org/wiki/Java_Native_Access)，我更喜欢 JNA ，因为它比 JNI 容易得多，在这两种情况下你都应该处理 .dll 文件。

2 - 使用 JIntellitype ，正如你所说 - 会产生一些问题。

3- Sergei Biletnikov 的优雅解决[方案](http://biletnikov-dev.blogspot.com/2009/09/global-hotkeys-for-java-applications_25.html)。

4-忽略Java，并尝试Autoit V3（我不确定100％，但我认为您可以将信号/事件从Autoit发送到您的Java应用程序，因此Autoit可以作为捕捉全局按键的桥梁)

# python - 在 Python 中解析人类格式的日期范围

> ID：10340029
> 
> 赞同：10
> 
> 时间：2012-04-26T19:25:46.030
> 
> 标签：python, parsing, datetime, date

我有一些人类风格的日期范围，在字符串中，如下所示：

```
22-24th April 2012
14-23 July
20th June - 5th July 
```

我想在 Python 中解析这些，以便最终得到两个日期时间对象：一个用于开始，一个用于结束。

是否有任何模块可以让我这样做？我试过`parsedatetime`了，看起来里面的`evalRange`函数可以做到（参见[http://code-bear.com/code/parsedatetime/docs/index.html](http://code-bear.com/code/parsedatetime/docs/index.html)的文档），但它似乎没有解析任何东西根本没有，只返回当前日期/时间两次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-14T12:31:33.877

我最终编写了一个 Python 模块来做到这一点，我现在已经开源了。它可以在[Github](https://github.com/robintw/daterangeparser)上下载，有[文档](http://daterangeparser.readthedocs.org/en/latest/)，并且可以使用以下方式从 PyPI 安装：

```
pip install daterangeparser 
```

对于那些感兴趣的人，该模块通过使用 PyParsing 创建一个完整的解析器来工作， [PyParsing](http://pyparsing.wikispaces.com/)是一个很棒（并且非常易于使用）的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:36:16.080

你可以使用`dateutil.parser`. 但它不处理日期范围。您之前可能需要应用正则表达式。

```
import dateutil.parser
dateutil.parser.parse("20th June") 
```

返回`datetime.datetime(2012, 6, 20, 0, 0)`

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-14T12:49:28.783

根据以前的答案，您可以做的是：

1.  预处理您的输入，以便获得开始和结束日期（例如：`20th June`和`5th July`）。在您的第一个示例 ( `date_range == 22-24th July 2012`) 中，您可以使用`date_range.split(' ')[0].split('-')`: 这将返回`['22', '24th']`（只需删除`th`和类似的）
2.  `datetime`使用以下日期获取对象`dateutil.parser`：`dateutil.parser.parse('22 July 2012')`

这是之前所说的实现：

```
import dateutil.parser
date_range = '20-22th July 2013'
date_range = date_range.lower()
for suffix in {'th', 'rd', 'st'}:
    date_range.replace(suffix, '')
days = date_range.split(' ')[0].split('-')
month_year = date_range.split(' ')[1]
begin, end = days[0] + ' ' + month_year, days[1] + ' ' + month_year
begin_date = dateutil.parser.parse(begin)
end_date = dateutil.parser.parse(end) 
```

# c# - 在 C# 中创建一个 equals 函数，其中包含许多要比较的变量

> ID：10340034
> 
> 赞同：2
> 
> 时间：2012-04-26T19:26:12.483
> 
> 标签：c#, loops, equals

我在 C# 中有一个类的函数，可以将一个对象与另一个对象进行比较。或多或少是一个 Equals 函数，但添加了一些代码。我的对象有很多变量，我想比较每个变量，如果有不同，请将它们添加到数据表中。现在我的函数看起来像：

```
 public bool compareSysInfo(SystemInfo expected, SystemInfo comp)
    {
        ComparePopup popup = new ComparePopup();
        bool finalResult = true;//initial assumption that they are equal
        //compares branding
        if (expected.branding != comp.branding)
        {
            finalResult = false;
            popup.addDataToTable("Branding", comp.getBranding() + "", expected.getBranding() + "");
        }
        //compares pro #
        if (expected.getPro() != comp.getPro())
        {
            finalResult = false;
            popup.addDataToTable("Pro Number", comp.getPro() + "", expected.getPro() + "");
        } 
```

对于所有变量，它都会继续这样。我想避免过多的 if 语句，有没有办法创建抽象方法并使用循环？我调查了代表，但我不确定如何在这种情况下使用它们。也许我正在解决这个错误，应该做一些完全不同的事情，比如将它们添加到集合中，然后只使用 for 循环来比较对象。我觉得我错过了一些明显的东西。我知道任何有这样重复代码的地方你都可以更好地实现，只是我不知道怎么做。这里的任何建议都会很棒。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:36:18.077

您可以从一个类中获取所有属性，并通过它们循环获取值并比较它们

```
Type type = expected.GetType();
PropertyInfo[] info = type.GetProperties();
foreach(PropertyInfo inf in info)
{
   if (info == null)
      return null; // or you can move on, based on what you need
   obj = info.GetValue(obj, null);
   //obj has the value, then you can compare them
 } 
```

我认为这将帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:44:21.913

比较所有字段和属性

```
public static bool MyCompare<T>(T obj1, T obj2)
{
    bool bp = obj1.GetType()
        .GetProperties()
        .All(p=>p.GetValue(obj1).Equals(obj2.GetType().GetProperty(p.Name).GetValue(obj2)));

    bool bf = obj1.GetType()
        .GetFields()
        .All(f => f.GetValue(obj1).Equals(obj2.GetType().GetField(f.Name).GetValue(obj2)));

    return bp && bf;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:50:00.960

创建一个策略类，为每个规则从它继承，并为您的类提供一个包含以下内容的列表：

```
public MyClass {
 readonly IEnumerable<Rule> _rules;
 public MyClass(IEnumerable<Rule> rules) {
    _rules
 }

 public bool CompareSysInfo(SystemInfo expected, SystemInfo comp) {
   // i prefer linq over loops
   var result = from r in _rules
                where !r.CheckRule(expected, comp)
                select false;
   return result.Count() > 0; // only returns true if no rule checks return false
 }
} 
```

然后对于每个规则检查，您实现 Rule 类（或接口）的实例：

```
public abstract class Rule {
   protected ComparePopup Popup { get; private set; }
   protected Rule(ComparePopup popup) {
     Popup = popup;
   }
   public abstract bool CheckRule(SystemInfo expected, SystemInfo comp);
}

public class BrandingRule : Rule {

   public BrandingRule(ComparePopup popup) : base(popup) { }

   public override bool CheckRule(SystemInfo expected, SystemInfo comp) {
     var result = expected.branding == comp.branding;
     if(!result)
       Popup.addDataToTable("Branding", comp.getBranding() + "", expected.getBranding() + "");
   }
} 
```

此策略使您能够添加、删除或修改规则以及它们独立于需要使用它们的代码所做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:35:26.973

```
private bool compareValue<T1, T2>(T1 first, T2 second, Func<T1, T2> selector)
{
  if(selector(first) != selector(second))
    ;//do stuff
} 
```

然后你可以做类似的事情：

```
public bool compareSysInfo(SystemInfo expected, SystemInfo comp)
{
  return compareValue(expected, comp, info => info.branding) &&
  compareValue(expected, comp, info => info.getPro());
} 
```

这只是一个开始，不确定你是否喜欢这个前提并且想要使用它。

# css - TextBox Widget和android主题中的dojox移动问题

> ID：10340037
> 
> 赞同：1
> 
> 时间：2012-04-26T19:26:25.310
> 
> 标签：css, cordova, dojo

我使用 phonegap 开发了一个包含 dojox.mobile.TextBox 的表单 我遇到了一个问题 我使用了 dojo.require("dojox.mobile.TextBox");

> 04-26 20:55:42.196：D/PhoneGapLog(446)：file:///android_asset/www/dojo/dojo.js：第 15 行：错误：声明 dojox.mobile.TextBox：mixin #1 未知。您是否使用 dojo.require 将其拉入？
> 
> 04-26 15:35:04.916：E/Web 控制台（446）：错误：声明 dojox.mobile.TextBox：mixin #1 未知。您是否使用 dojo.require 将其拉入？在文件：///android_asset/www/dojo/dojo.js:15

我也没有在我的设备中看到 android 的 css 主题，但我可以在桌面上的 Firefox 上看到它。有什么问题，请您帮忙，并在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:58:36.920

它可能与android 构建工具中[的错误有关](http://code.google.com/p/android/issues/detail?id=5343)

检查[https://stackoverflow.com/a/9212288/239408](https://stackoverflow.com/a/9212288/239408)以了解解决方法。

# php - 如何使用此脚本向多个人发送电子邮件而不在 to 字段中显示所有电子邮件？

> ID：10340039
> 
> 赞同：1
> 
> 时间：2012-04-26T19:26:28.583
> 
> 标签：php, email, sharing, verification

我在下面有这个脚本，我想对其进行调整，以便它可以做两件事：

1.  向多个地址发送电子邮件（现在它仅在向一个电子邮件地址发送电子邮件时才有效。
2.  在“收件人”字段中，不应显示收到相同通知的所有其他人。因此，每封电子邮件都应该是个人的。

代码：

```
 //Query to get emails
         //$share_to comes from a drop down selection of users.  
         //it could be 1 person or multiple people.
         //The way its stored in the field is this way user1,user2,user3,user4 or if one person then just user1\.  

         $sql = "SELECT email_address from accounts 
         WHERE person_id='$share_to'";
         $result = mysql_query($sql);

         $query = mysql_query($sql) or die 
         ("Error: ".mysql_error());

         if ($result == "")
         {
         echo "";
         }
         echo "";

         $rows = mysql_num_rows($result); 

         if($rows == 0)
         {
         print("");

         }
         elseif($rows > 0)
         {
         while($row = mysql_fetch_array($query))

         {

         $email = htmlspecialchars($row['email_address']);

         print("");
         }

         }

         $headers = "MIME-Version: 1.0\r\n";
         $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
         $headers .= "From: $usermail\r\n";
         $headers .= "BCC: $email\r\n";
         $to = "support@domain.com"; //the mail in the "TO", visible to all. 
         there has to be 1.
         $subject = "$fullname Asked you something";
         $message = "<html><body>";
         $message .= "Hi!, <br><br>$fullname asked you something.<br><br>";
         $message .= "<a href=www.domain.com/login.php>Click here to login.</a><br><br>";
         $message .= "Please reply to this email if you have any questions.<br><br>Thanks,    
         <br><br>Abe<br>";
         $message .= "<img src=www.domain.com/images/logohop.png /><br><br>";

         $message .= "</body></html>";
         mail($to, "Subject: $subject",
         $message, "$headers" );
         echo ""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:36:46.407

使用其中任何一种，您可以向多个用户发送电子邮件

```
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n"; 
```

或者

```
$headers .= 'Cc: birthdayarchive@example.com,birthdayarchive2@example.com ' . "\r\n"; 
```

请参阅[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)获取帮助

用于`$headers .= 'BCc: birthdayarchive@example.com,birthdayarchive2@example.com ' . "\r\n";`从您的联系人中隐藏其他用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:56:24.383

```
//Query to get emails
         //$share_to comes from a drop down selection 
         of users.  it could be 1 person or multiple 
         people.The way its stored in the field is 
         this way user1,user2,user3,user4 
         or if one person then just user1\.  

         $sql = "SELECT email_address from accounts 
         WHERE person_id='$share_to'";
         $result = mysql_query($sql);

         $query = mysql_query($sql) or die 
         ("Error: ".mysql_error());

         if ($result == "")
         {
         echo "";
         }
         echo "";

         $rows = mysql_num_rows($result); 

         if($rows == 0)
         {
         print("");

         }
         elseif($rows > 0)
         {
         $email='';
         while($row = mysql_fetch_array($query))

         {

         $email. = htmlspecialchars($row['email_address']).',';

         print("");
         }

         }

         $headers = "MIME-Version: 1.0\r\n";
         $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
         $headers .= "From: $usermail\r\n";
         $headers .= "BCC: ".rtrim($email,",")."\r\n";
         $to = "support@domain.com"; //the mail in the "TO", visible to all. 
         there has to be 1.
         $subject = "$fullname Asked you something";
         $message = "<html><body>";
         $message .= "Hi!, <br><br>$fullname asked you something.<br><br>";
         $message .= "<a href=www.domain.com/login.php>Click here to login.</a><br><br>";
         $message .= "Please reply to this email if you have any questions.<br><br>Thanks,    
         <br><br>Abe<br>";
         $message .= "<img src=www.domain.com/images/logohop.png /><br><br>";

         $message .= "</body></html>";
         mail($to, "Subject: $subject",
         $message, "$headers" );
         echo ""; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T19:45:37.300

如果您不希望收件人看到完整列表，您可以发送多封电子邮件，每个收件人一封 - 正如 Dagon 上面提到的，只需将邮件代码移动到循环内 - 或者您可以使用密件抄送字段。

要将一封电子邮件发送给多个收件人，您需要添加一个逗号分隔的地址列表 -

```
$emails = array();
while($row = mysql_fetch_array($query)) {
    $emails[] = htmlspecialchars($row['email_address']);
} 
```

进而：

`$headers .= "BCC: " . implode(",", $emails) . "\r\n";`

应该这样做。

# javascript - 将文本元素与弧 RaphaelJS 一起移动

> ID：10340040
> 
> 赞同：1
> 
> 时间：2012-04-26T19:26:30.567
> 
> 标签：javascript, svg, raphael

我正在使用以下代码使用 RaphaelJS 绘制（和动画）弧形路径；

```
 self.paper = Raphael(domElement, width, height);

    self.paper.customAttributes.arc = function (xloc, yloc, value, total, R) {
        var alpha = 360 / total * value,
            a = (90 - alpha) * Math.PI / 180,
            x = xloc + R * Math.cos(a),
            y = yloc - R * Math.sin(a),
            path;
        if (total == value) {
            path = [
                ["M", xloc, yloc - R],
                ["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
            ];
        }
        else {
            path = [
                ["M", xloc, yloc - R],
                ["A", R, R, 0, +(alpha > 180), 1, x, y]
            ];
        }
        return { path: path };
    };

    self.arc = self.paper.path().attr({
        'fill':             'none',
        'stroke':           self.color,
        'stroke-opacity':   1,
        'stroke-width':     self.barWidth,
        'arc':              [self.centerX, self.centerY, 0, 100, position]
    };

    self.arc.animate({
        'arc': [self.centerX, self.centerY, domein.kennis, 100, position]
    }, self.duration, 'backOut'); 
```

现在文本标签需要随着圆弧移动。我在弄清楚如何沿圆弧路径移动文本元素时遇到问题。任何帮助，将不胜感激。

编辑：问题是正确定位文本元素；

[看到这个问题/jsfiddle](https://stackoverflow.com/questions/10479232/transforming-a-text-elements-position-relative-to-path-in-raphael-js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:37:50.647

使用 Raphaël's[`animateWith()`](http://raphaeljs.com/reference.html#Element.animateWith)将文本元素动画与弧的动画联系起来。

# actionscript-3 - AS3 从位图中动态更改/交换位图数据

> ID：10340043
> 
> 赞同：0
> 
> 时间：2012-04-26T19:26:38.337
> 
> 标签：actionscript-3, flash, bitmapdata

问题：

我有一个动态加载的图像。这是一个网站的背景。10 秒后，我想用新图像换掉那个图像！

想法：

我原以为这将是一个足够简单的过程。

```
var BGbmd:BitmapData = new backgroundBitmapData(); // from library
var BG:Bitmap = new Bitmap( BBbmd );
    BG.width = stage.stageWidth; //save portrait vs landscape for later...
    BG.scaleY = BG.scaleX;
    BG.smoothing = true;
addChild( BG ); 
```

我想我可以将 BGbmd 更改为其他内容，它会更新：

```
function changeBackground() {
    BGbmd = new secondBackgroundBitmapData(); // from Library
} 
```

或某种程度的东西-但没有！没有什么变化！看来我必须删除孩子并重新添加它，这让我很头疼，因为我必须跟踪 childIndex...</p>

外展：我真的很希望有一些我无法找到的神奇功能或方法可以让我轻松找到交换位图数据......也许你会知道！

非常感谢大家！-乔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:29:22.610

更改位图中的位图数据。

```
BG.bitmapData = new secondBackgroundBitmapData(); 
```

The`Bitmap`是舞台上的东西，它持有对`BitmapData`自身的引用——而不是分配给它的变量。所以你需要改变`Bitmaps`内部状态来切换图像。

# c# - 输入字符串的格式不正确

> ID：10340047
> 
> 赞同：0
> 
> 时间：2012-04-26T19:26:45.327
> 
> 标签：c#, winforms, constructor

我收到错误消息

> 输入字符串的格式不正确。

```
 public partial class Fiche_Ordre : DevExpress.XtraEditors.XtraForm
    {
        public string ClientID = "", OderId = "", TempId = "";
       .....

        public Fiche_Ordre()
        {
            InitializeComponent();

            Constuct_Page();

        }

        public Fiche_Ordre(string OrderID)
        {
            InitializeComponent();
            Constuct_Page();

            Pers_Ordre oPersOrdr = oOrder_BL.Get_OrdreOne_BL(ClientID, Convert.ToInt32(OderId), false);
            textEdit_RaisonSoc.Text = oPersOrdr.RaisonSoc;
        } 
```

当我从其他形式调用构造函数时：

```
 private void GoToFiche(object sender, EventArgs e)
        {
            try
            {                              
                Fiche_Ordre f_Fiche = new Fiche_Ordre("1");
               // Fiche_Ordre f_Fiche = new Fiche_Ordre(gridView_Liste_Ordres.GetRowCellValue(0, "NO_ORDRE").ToString());
                f_Fiche.Show();
            }
            catch (Exception excThrown)
            {
                MessageBox.Show(excThrown.Message);          
            } 
```

我有构造函数： `public Fiche_Ordre(string OrderID)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:29:37.820

```
 public Fiche_Ordre(string OrderID)
        {
            InitializeComponent();
            Constuct_Page();

            Pers_Ordre oPersOrdr = oOrder_BL.Get_OrdreOne_BL(ClientID, Convert.ToInt32(OderId), false);
            textEdit_RaisonSoc.Text = oPersOrdr.RaisonSoc;
        } 
```

您正在传递`OrderID`和使用`OderId`.

注意你的案例和拼写。

# php - xPath 查询未按预期工作。节点列表为空

> ID：10340048
> 
> 赞同：0
> 
> 时间：2012-04-26T19:26:45.697
> 
> 标签：php, html, xml, xpath, domdocument

我有以下 HTML 段，

![HTML 部分的屏幕截图，其中 xPath 查询未返回锚 <a> 标记列表](../Images/25e8007ab48b03b137310da43d3eb1cf.png)

我在 PHP 中使用 xPath 和 DOM 使用以下 xPath 查询获取 DIV 中的所有锚标记：

```
//div[@id="breadcrumbs"]/a 
```

我希望上面的查询应该返回所有锚标记的 NodeList，在上面的 HTML 的情况下应该是 3。我什么也没得到，我的以下 PHP 代码正在跳过

```
 $breadCrumb = $xpath->query('//div[@id="breadcrumbs"]/a');      

    if($breadCrumb->length){
        $ctr = 0;
        $sections = "";
        foreach($breadCrumb as $section){
            //$productBreadCrumb['section_'.$ctr] =  $section->nodeValue;
            $sections .=  $section->nodeValue."|";
            $ctr++;
        }
        $productData['sections'] = $sections;
    } 
```

我需要这里的指导。非常感谢。

编辑：在上述 Div id="breadcumbs"> aaa 段上添加了我试图基于 xPath 查询从 DOM 获取的页面

[http://www.5starhookah.com/Apex-Black-NEW-A342.htm](http://www.5starhookah.com/Apex-Black-NEW-A342.htm)

谢谢

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T23:00:08.023

xpath 的常见问题：命名空间。

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
```

意味着每个标签实际上都在[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)命名空间中。

查找文档以查看您是否可以设置默认命名空间，或者是否可以为其设置别名（例如，如果别名名称为“x”，则查询将类似于 //x:div[@id="breadcrumbs"]/x ：一个 。

或者，您可以通过在解析 xml 之前删除字符串 « xmlns="http://www.w3.org/1999/xhtml" » 来作弊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:17:46.073

您的 XPath 是正确的，您可以看到您是否使用示例 XHTML，例如：

```
<div id="breadcrumbs">
<a class='breadcrumb'>Our Products</a>
</div> 
```

使用如下工具： [http ://www.xpathtester.com/](http://www.xpathtester.com/)

因此，您的问题一定出在 DOM 上。如果您可以在运行 XPath 之前粘贴 DOM 的 XHTML 的打印输出，我们可以确认这一点，但似乎很清楚，除非真的很奇怪，否则您的问题出在 DOM 上。

# javascript - 如何通过使用jquery并避免跨站点限制来获取变量中远程文件的内容？

> ID：10340055
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:27:25.667
> 
> 标签：javascript, jquery, ajax

我想`text file`在 JavaScript 变量中加载 a 的内容，但无需修改任何有关网络服务器配置的内容。

我无法控制两个网站上的 http 标头。

该文件存储在完全不同的网络服务器上。

目前我尝试了 .ajax 和 .get ，但我`Access-Control-Allow-Origin`都遇到了错误。

文件内容类似于：

```
 term1|wow!
  term2|bleah,...! 
```

我确实可以控制文件的格式，但我不想将其转换为过于复杂而无法手动编辑的内容，并且无法按行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:41:18.680

如果没有返回正确的标头或允许跨域的数据类型（如 javascript/jsonp、css 或图像），则无法从外部域请求数据。

唯一的解决方法是使用服务器端脚本来获取页面的数据，或者在这种情况下使用公共代理服务，例如 YQL。

# opengl - 如何从“gluUnProject”中获取射线

> ID：10340058
> 
> 赞同：0
> 
> 时间：2012-04-26T19:27:41.203
> 
> 标签：opengl, matrix, camera, projection, glu

我的基本问题是 - 使用“gluUnProject”从我的鼠标/光标位置获取射线或法线向量的正确方法是什么。

我已将 mesa glu C 代码中的“gluUnProject”代码转换为 C#。

```
public Vector3 UnProject(Matrix4 projectionMatrix, Matrix4 viewMatrix, int viewX, int viewY, int viewWidth, int viewHeight)
{
    var finalMatrix = viewMatrix.Multiply(projectionMatrix).Invert();

    var vec = new Vector4(this, 1);
    vec.X = (vec.X - viewX) / viewWidth;
    vec.Y = (vec.Y - viewY) / viewHeight;
    vec = (vec * 2) - 1;
    vec.Y = -vec.Y;

    var outVec = vec.Transform(finalMatrix);
    outVec.X /= outVec.W;
    outVec.Y /= outVec.W;
    outVec.Z /= outVec.W;

    return outVec.ToVector3();
} 
```

然后我从我的 Camera 对象中调用此方法：

```
public Vector3 UnProject(Vector3 screenPosition)
{
    return screenPosition.UnProject(ProjectionMatrix, ViewMatrix, ViewPort.Location.X, ViewPort.Location.Y, ViewPort.Size.X, ViewPort.Size.Y);
} 
```

为了从射线中获取我的法线向量，我这样做：

```
var rayLoc = camera.UnProject(new Vector3(Game.Mouse.Location, 0));
var rayLoc2 = camera.UnProject(new Vector3(Game.Mouse.Location, 1));
var rayDirection = (rayLoc2 - rayLoc).Normalize(); 
```

一切正常，直到我将我的 LookAt 点移到 X 中的 1 上并在 X 和 Y 轴上稍微旋转相机。之后，向量不再正确。我不知道我做错了什么？？

**编辑：仔细观察后，我认为我的 Matrix4.Invert 方法可能是原因。我正在尝试使用 Row Major，有什么想法吗？**

```
public Matrix4 Invert()
{
    var mat = new Matrix4(
        new Vector4(
            Y.Y*Z.Z*W.W - Y.Y*Z.W*W.Z - Z.Y*Y.Z*W.W + Z.Y*Y.W*W.Z + W.Y*Y.Z*Z.W - W.Y*Y.W*Z.Z,
            -Y.X*Z.Z*W.W + Y.X*Z.W*W.Z + Z.X*Y.Z*W.W - Z.X*Y.W*W.Z - W.X*Y.Z*Z.W + W.X*Y.W*Z.Z,
            Y.X*Z.Y*W.W - Y.X*Z.W*W.Y - Z.X*Y.Y*W.W + Z.X*Y.Y*W.Y + W.X*Y.Y*Z.W - W.X*Y.W*Z.Y,
            -Y.X*Z.Y*W.Z + Y.X*Z.Z*W.Y + Z.X*Y.Y*W.Z - Z.X*Y.Z*W.Y - W.X*Y.Y*Z.Z + W.X*Y.Z*W.Y),
        new Vector4(
            -X.Y*Z.Z*W.W + X.Y*Z.W*W.Z + Z.Y*X.Z*W.W - Z.Y*X.W*W.Z - W.Y*X.Z*Z.W + W.Y*X.W*Z.Z,
            X.X*Z.Z*W.W - X.X*Z.W*W.Z - Z.X*X.Z*W.W + Z.X*X.W*W.Z + W.X*X.Z*Z.W - W.X*X.W*Z.Z,
            -X.X*Z.Y*W.W + X.X*Z.W*W.Y + Z.X*X.Y*W.W - Z.X*X.W*W.Y - W.X*X.Y*Z.W + W.X*X.W*Z.Y,
            X.X*Z.Y*W.Z - X.X*Z.Z*W.Y - Z.X*X.Y*W.Z + Z.X*X.Z*W.Y + W.X*X.Y*Z.Z - W.X*X.Z*Z.Y),
        new Vector4(
            X.Y*Y.Z*W.W - X.Y*Y.W*W.Z - Y.Y*X.Z*W.W + Y.Y*X.W*W.Z + W.Y*X.Z*Y.W - W.Y*X.W*Y.Z,
            -X.X*Y.Z*W.W + X.X*Y.W*W.Z + Y.X*X.Z*W.W - Y.X*X.W*W.Z - W.X*X.Z*Y.W + W.X*X.W*Y.Z,
            X.X*Y.Y*W.W - X.X*Y.W*W.Y - Y.X*X.Y*W.W + Y.X*X.W*W.Y + W.X*X.Y*Y.W - W.X*X.W*Y.Y,
            -X.X*Y.Y*W.Z + X.X*Y.Z*W.Y + Y.X*X.Y*W.Z - Y.X*X.Z*W.Y - W.X*X.Y*Y.Z + W.X*X.Z*Y.Y),
        new Vector4(
            -X.Y*Y.Z*Z.W + X.Y*Y.W*Z.Z + Y.Y*X.Z*Z.W - Y.Y*X.W*Z.Z - Z.Y*X.Z*Y.W + Z.Y*X.W*Y.Z,
            X.X*Y.Z*Z.W - X.X*Y.W*Z.Z - Y.X*X.Z*Z.W + Y.X*X.W*Z.Z + Z.X*X.Z*Y.W - Z.X*X.Z*Y.Z,
            -X.X*Y.Y*Z.W + X.X*Y.W*Z.Y + Y.X*X.Y*Z.W - Y.X*X.W*Z.Y - Z.X*X.Y*Y.W + Z.X*X.W*Y.Y,
            X.X*Y.Y*Z.Z - X.X*Y.Z*Z.Y - Y.X*X.Y*Z.Z + Y.X*X.Z*Z.Y + Z.X*X.Y*Y.Z - Z.X*X.Z*Y.Y));

    Num delta = X.X*mat.X.X + X.Y*mat.Y.X + X.Z*mat.Z.X + X.W*mat.W.X;
    delta = 1 / delta;
    return mat * delta;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:35:11.083

我通常这样做：

```
GLint m_viewport[4];
GLdouble m_modelview[16];
GLdouble m_projection[16];

glGetIntegerv(GL_VIEWPORT, m_viewport);
glGetDoublev(GL_MODELVIEW_MATRIX, m_modelview);
glGetDoublev(GL_PROJECTION_MATRIX, m_projection);

GLdouble rx, ry, rz;
gluUnProject(x, y, depth, m_modelview, m_projection, m_viewport, &rx, &ry, &rz); 
```

其中 x 和 y 是鼠标坐标，深度是 (0, 1] 中的某个值 - 我通常取 0.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:16:33.627

原来我的 Matrix4.Invert 方法是错误的。在制作 Row-Major Invert 方法时，我使用 OpenTK 作为参考。

**编辑：**实际上“https://github.com/Dav1dde/gl3n”有更好的方法。

# asp.net - 如何嵌套 HtmlHelpers

> ID：10340060
> 
> 赞同：0
> 
> 时间：2012-04-26T19:27:45.887
> 
> 标签：asp.net, html, asp.net-mvc

我想从 Html.ActionLink 向我的控制器操作传递一个值。

```
<%= Html.ActionLink("Click to open/download", "DownloadResource", "Admin", new { URL = <%= Model.TargetResource %> }, null)%> 
```

但是，如果我使用**<%= Model.TargetResource %>**，则会出现语法错误。这样做的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:29:41.923

只需使用：

```
<%= Html.ActionLink("Click to open/download", "DownloadResource", "Admin", new { URL = Model.TargetResource }, null)%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:29:56.103

您已经在代码块中，因此您不需要`<% %>`在代码块中使用。

```
<%= Html.ActionLink("Click to open/download", 
                    "DownloadResource", 
                    "Admin", 
                    new { URL = Model.TargetResource }, 
                    null)%> 
```

# java - Java替换字符串中的unicode字符

> ID：10340063
> 
> 赞同：0
> 
> 时间：2012-04-26T19:27:52.797
> 
> 标签：java, regex, file

我有一个读取文件的程序。在这个文件中有一些我以前从未见过的疯狂字符。该文件的目的是将某些信息解析为 SQL 语句。

当我到达文件“read “Details for ...（the name of the title”）中的这一行时（注意水平省略号和右/左引号），它会输出到：

“详细信息”（标题名称）</p>

我只想用我定义的字符替换正确的字符。我试过了：

```
st = st.replaceAll("…","...");
st = st.replaceAll("\u2026","..."); 
```

这就是我读取文件的方式：

```
 FileInputStream file = new FileInputStream(filePath);
 DataInputStream in = new DataInputStream(file); 
 BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

还有其他一些我什至不记得的事情。我怎样才能完成这个看似简单的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:52:05.927

您需要在替换特殊字符之前指定读取文件的编码...

```
FileInputStream inputStream = new FileInputStream("input.txt");
// Specify the enconding
InputStreamReader streamReader = new InputStreamReader(inputStream, "UTF-8");
BufferedReader in = new BufferedReader(streamReader); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:38:16.470

除非绝对必要，否则您实际上不必删除那些奇怪（但仍然有意义）的字符...

查看[InputStreamReader](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)的文档并在读取文件时指定正确的编码。

# c++ - 如何使用 RAII 对套接字进行建模

> ID：10340064
> 
> 赞同：1
> 
> 时间：2012-04-26T19:27:56.323
> 
> 标签：c++, sockets, raii

我是 C++ 的新手（来自 C）。我从概念上理解 RAII 应该如何工作，但我无法在其中安装一个简单的套接字连接处理程序。

当前代码：

```
void accept_ev(event_handler::token &t, int listenfd)
{
    int newfd = accept(listenfd, NULL, NULL);

    if (newfd < 0)
        throw api_server_accept_failed(*this, errno);

    connections.insert(api_server_connection(newfd));
} 
```

这显然是不安全的，因为 api_server_connection 构造函数可能会在将 fd 分配给其成员变量之前引发异常。

所以我的下一个想法是将接受移动到构造函数中。问题是我真的希望 api_server_connection 不知道 fd 的来源。例如，如果我想在将来支持 inetd，它也可以像 fd 0 一样传递到程序中。

那么我该怎么做。我应该为每种获取 fd 的方式使用不同的构造函数吗？我应该做子类吗？另一种选择可能是有一个 lambda 函数？

或者在这种情况下我应该抓住任何错误并关闭调用者中的 fd 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:00:37.820

暂时忽略套接字，您通常想要做的是将事情分为两个阶段。

在第一阶段，您会做一些可能会抛出的事情，但如果他们这样做了，您可以将系统恢复到正常状态（最好是好像什么都没发生过的状态）。

在第二阶段，你做一些你可能无法撤消，但你知道肯定永远不会扔掉的事情。

为此，您需要对可以/将要抛出的内容有一些保证，并且（特别是）对至少一些根本不会抛出的相当具体的操作（例如，交换两个项目）有一些保证。

为了促进这一点，您通常希望在 dtor 中恢复到正常状态，因此如果抛出异常，析构函数将自动清理。

不幸的是，很难说更多关于您的特定代码/情况的信息，因为我们对您正在使用的类知之甚少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:40:43.867

首先，为了使用 RAII，您必须以面向对象的方式进行思考。所以我看到您尝试使用 C++ 实现服务器类。在这种情况下，您将仅将 RAII 用于服务器初始化，这意味着您将编写代码并在服务器开始侦听端口时完成它。构造函数中的最后一个函数调用必须是监听或启动连接线程。之后，您必须实现将处理客户端连接的第二个线程。第二个线程将调用 accept 以接受客户端，并将在服务器工作时进行迭代。在您的析构函数中，您只需将侦听标志设置为 false 并等待接受线程终止，然后关闭所有套接字。

# asp.net - vb.net 选择单选按钮

> ID：10340065
> 
> 赞同：1
> 
> 时间：2012-04-26T19:28:02.627
> 
> 标签：asp.net, vb.net, webforms

我在 VB.NET 中有以下单选按钮

```
 <asp:RadioButtonList ID="rbedit" runat="server"  RepeatDirection="horizontal" >
        <asp:ListItem Value="1" >Yes</asp:ListItem>
        <asp:ListItem Value="0" >No</asp:ListItem>
   </asp:RadioButtonList></td> 
```

我需要弄清楚用户单击了哪个按钮，然后使用该值设置一个变量。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:10:16.563

您可以使用 rbedit.SelectedIndex 来获取用户单击了哪个按钮，然后相应地设置变量。

如果您想在客户端获取它，请使用以下代码：

```
function getRadVal(radlist)
{
 if (document.forms['Form1'].elements[radlist])
 {  var radGrp = document.forms['Form1'].elements[radlist];
  var radGrpValue = '0';
  for (var i = 0; i < radGrp.length; i++) 
      if (radGrp[i].checked) {
          radGrpValue = radGrp[i].value;
                break;
      } 
  return radGrpValue;
 }
 else
  return '';
} 
```

调用这个用法：//获取 RadioButtonList 的值

var myValue=getRadVal('rbedit');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:34:45.537

`rbedit.selectedvalue`在按钮事件处理程序中使用。

# php - 如何构造一个包含 6 个整数的日期时间对象？

> ID：10340066
> 
> 赞同：1
> 
> 时间：2012-04-26T19:28:04.527
> 
> 标签：php, datetime, date, datetime-format

我有问题

```
new Datetime($year."-".$month."-".$day." ".$hour.":".$minute.":"."00") 
```

你将如何用整数构造一个日期时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:43:00.277

一种方法，按照要求使用**6 个整数**`DateTime`是使用's[`setDate()`](http://php.net/datetime.setdate)和[`setTime()`](http://php.net/datetime.settime)方法。

```
$date = date_create()->setDate($year, $month, $day)
                     ->setTime($hour, $minute, $second); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:30:12.287

您的语法不正确，您在 $month 之前缺少一个点 (.)。试试这个：

```
new Datetime($year."-".$month."-".$day." ".$hour.":".$minute) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:30:15.437

[http://us.php.net/manual/en/function.mktime.php](http://us.php.net/manual/en/function.mktime.php)

这几乎就是 mktime 的用途。然后，当然，转换为 DateTime，假设 PHP 5.3+。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:36:21.477

这个作品

```
$year =2012 ; $month =4 ;$day = 26 ; $hour = 6 ; $minute =30 ; $sec = 3;
$date = sprintf("%d-%d-%d %d:%d:%d",$year,$month,$day,$hour,$minute,$sec);
$dateTime = new Datetime($date);
var_dump($dateTime); 
```

输出

```
object(DateTime)[1]
  public 'date' => string '2012-04-26 06:30:03' (length=19)
  public 'timezone_type' => int 3
  public 'timezone' => string 'Europe/Berlin' (length=13) 
```

# jquery - Jquery Bind Keyup 问题

> ID：10340070
> 
> 赞同：0
> 
> 时间：2012-04-26T19:28:25.810
> 
> 标签：jquery

我有一个文本框，将输入一个以 % 为单位的数字。我想要做的是，当用户输入他的数字时，应该在末尾附加一个“%”符号。因此，如果 1.23 中的某些类型，他应该看到的是：- 1% -> 1.% -> 1.2% -> 1.23%。这是我写的

```
$('#price').bind('keyup',function(){
    val1 = $(this).val();
    val2 = val1.substr(0,val1.length-1);
    $(this).val(val2+'%');
}); 
```

问题是光标在附加的 % 符号之后出现，所以如果我输入 '.'，则在 1% 之后。val1 = "1%"。最终结果为 1%%。请帮忙？如果您能告诉我如何将光标放在 % 或其他解决原始问题的方法之前。谢谢一堆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:31:00.087

在文本字段中添加百分号会提供糟糕的用户体验。

*您最好使用背景图片，或在文本框后*添加百分号，可选择将其*放置*在文本框内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:37:34.477

是的，将内容放入用户输入中是非常难看的。你最好给这个领域贴上标签。如果您觉得必须，请查看处理设置光标位置的问题。

[在输入文本字段中设置光标位置](https://stackoverflow.com/questions/5755826/set-cursor-position-in-an-input-text-filed)

# java - 更改 Nimbus LaF 处理 JTree 节点突出显示的方式

> ID：10340071
> 
> 赞同：8
> 
> 时间：2012-04-26T19:28:28.397
> 
> 标签：java, swing, jtree, renderer, nimbus

我一直在努力将 Java 应用程序从 WindowsLookAndFeel 转换到 Nimbus，尽管 Nimbus 存在缺陷，但基本上是成功的。我的用户总体上喜欢 Nimbus LaF，但不喜欢一些细节，其中一些我通过咨询该网站上的先前问题进行了更改。示例：我从 Windows LaF（他们喜欢）复制了 LeafIcon、ClosedIcon 和 OpenIcon，并在 Nimbus 版本中使用它们，以获得 LaF 的完美组合。

卡在最后一个（？）问题上。

我有一个带有子类 DefaultCellRenderer 的 JTree 来创建适当的节点显示。这在 WindowsLookAndFeel 下运行良好。

问题：在WindowsLaF下，当一个节点被选中时，节点的文本被高亮显示，效果在视觉上很容易理解。在 Nimbus 下，当一个节点被选中时，突出显示是用一个（相当暗的）颜色条完成的，它运行树窗口的宽度（不仅仅是文本的宽度），效果令人不安。

所以：我只是希望在 Nimbus LaF 中突出显示 JTree 节点的 WindowsLaF 处理（即，仅对文本的宽度着色背景，最好是我可以选择的更好的颜色）。我怀疑这意味着我需要将正确的排序 Painter 分配给“Tree:TreeCell[Focused+Selected].backgroundPainter”，但我不知道如何编写它。

欢迎提出建议。

* * *

**编辑**

使用 Java 7 查看奇怪的选定节点突出显示！

![在此处输入图像描述](../Images/df8c5ad069b3607025af009140a05252.png)

```
public class TreeBorder {
    public static void main( String[] args ) {
        try{
            for( UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels() ) {
                if( "Nimbus".equals( info.getName() ) ) {
                    UIManager.setLookAndFeel( info.getClassName() );
                    break;
                }
            }
        } catch( Exception e ) {
            e.printStackTrace();
        }
        SwingUtilities.invokeLater( new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setLocationRelativeTo( null );
                f.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                f.getContentPane().add( getJTree() );
                f.pack();
                f.setVisible( true );
            }
            private JTree getJTree() {
                JTree jTree = new JTree();
                jTree.setCellRenderer( new LocalRenderer() );
                return jTree;
            }
        } );
    }

    private static class LocalRenderer extends DefaultTreeCellRenderer {
        @Override
        public Component getTreeCellRendererComponent( JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasfocus ) {
            DefaultTreeCellRenderer result = (DefaultTreeCellRenderer)super.getTreeCellRendererComponent( tree, value, sel, expanded, leaf, row, hasfocus );
                if( true ) {
                    result.setFont( new JLabel().getFont() );
                    Icon icon = UIManager.getIcon("FileView.floppyDriveIcon");
                    result.setIcon( icon );
                }
            return(result);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:31:01.820

**编辑**

“Tree.selectionBackground”键控制 JTree 上的突出显示 - 它是在树级别完成的，而不是在 TreeCellRenderer 级别（这就是为什么管理起来有点混乱）。此代码将为您提供一棵树，您可以在其中控制突出显示：

```
private JTree getJTree() {

    JTree jTree = new JTree();
    jTree.setOpaque(true);
    jTree.setBackground(Color.white);
    UIDefaults paneDefaults = new UIDefaults();
    paneDefaults.put("Tree.selectionBackground",null);

    JTextPane pane = new JTextPane();
    jTree.putClientProperty("Nimbus.Overrides",paneDefaults);
    jTree.putClientProperty("Nimbus.Overrides.InheritDefaults",false);

    jTree.setCellRenderer( new LocalRenderer() );
    return jTree;
} 
```

这是一个将突出显示更改为红色的示例。请注意，图标的背景也会突出显示 - 这也是非 nimbus L&F 的默认行为。如果您不想突出显示图标，您将不得不使用比默认 JLabel 更高级的东西来呈现 TreeCell：

```
 public Component getTreeCellRendererComponent( JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasfocus ) {
        DefaultTreeCellRenderer result = (DefaultTreeCellRenderer)super.getTreeCellRendererComponent( tree, value, sel, expanded, leaf, row, hasfocus );
        result.setOpaque(true);
            if( true ) {
                result.setFont( new JLabel().getFont() );
                Icon icon = UIManager.getIcon("FileView.floppyDriveIcon");
                result.setIcon( icon );
            }
            if(sel){
                result.setBackground(Color.red);
            } else{
                result.setBackground(Color.white);
            }
        return(result);
    } 
```

**原始答案**

解决此问题的最简单方法之一是将选定的背景颜色设置为透明。问题是它试图绘制标签的背景——它没有 JTree 选择使用的酷 Nimbus 画家。所以将此行添加到`getTreeCellRendererComponent`方法中：

```
result.setBackgroundSelectionColor(new Color(0,0,0,0)); 
```

另一种选择是使用 Nimbus Painter 作为 TreeCellRenderer 的背景 - 但在这种情况下这似乎有点过头了。

# java - 泛型通配符正确使用

> ID：10340072
> 
> 赞同：1
> 
> 时间：2012-04-26T19:28:32.143
> 
> 标签：java, generics, bounded-wildcard

我有一个对象定义如下：

```
protected Map<String, ? extends List<? extends LightGeometry>> geoms=new HashMap<String,List<LightGeometry>>(); 
```

我尝试插入一个看起来符合通配符的对象

```
ArrayList<LightGeometry> points=new ArrayList<LightGeometry>();
points.add((LightGeometry)new LightPoint(pt));
geoms.put("point", points); 
```

编译器抛出一个错误，上面写着：

> 类型中的方法`put(String, capture#18-of ? extends List<? extends LightGeometry>`)`Map<String,capture#18-of ? extends List<? extends LightGeometry>>`不适用于参数`(String, ArrayList<LightGeometry>)`

我错过了什么？

**编辑：为什么我将通配符与泛型类型一起使用** 它基本上归结为能够将列表（我通过服务获得）分配给`geoms`另一个类中的对象，而不必筛选列表进行转换.

```
public void onSuccess(Map<String, ArrayList<LightPolygon>> result) {
    // TODO Auto-generated method stub
    GWT.log("" + result.size());
    Log.debug("" + result.size());
    long startTime = System.currentTimeMillis();
    if (overlay != null) {
        overlay.setData(result);
        overlay.update();
        Log.debug("time to add features: "
                + (System.currentTimeMillis() - startTime));
    }
} 
```

如果我要使`geoms`变量 a`Map<String, List<LightGeometry>>`那么我得到一个转换错误，说我不能将 a 分配`Map<String,ArrayList<LightPolygon>>`给一个 'Map>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:36:55.570

通用通配符并不意味着“任何扩展 List 的东西”它的意思是“扩展 List 的一些特定的东西，但我不知道那个特定的东西是什么”。

因此，在集合中添加任何东西都是非法的，因为您不知道具体的东西是什么！它可能是 LinkedLists 的映射，在这里您将 ArrayList 放入其中，这会导致其他人在假设它是 LinkedList 时获得类转换异常。

如果您想要一个包含任何类型列表的 Map，只需将其声明为 List 的 Map，而不是 ? 扩展列表。

--

tl; dr - 它可以在没有通配符的情况下执行您想要的操作。通配符通常用于指定方法签名，如果您知道类型是什么并不重要。如果您只想要一个包含子类的集合，您只需指定超类型。

例子：

```
Map<String, List<Number>> map = new HashMap<String,List<Number>>();

List<Number> integers =new ArrayList<Number>();
integers.add(Integer.valueOf(1));
map.put("integers", integers);

List<Number> floats = new LinkedList<Number>(); 
floats.add(Float.valueOf(5.2f));
map.put("floats", floats); 
```

没有铸造！

# javascript - 从 Dropbox 中选择许多项目并让它们出现在文本框中

> ID：10340074
> 
> 赞同：2
> 
> 时间：2012-04-26T19:28:35.403
> 
> 标签：javascript, html, drop-down-menu

我想在下拉框中添加所选项目并将它们放在文本框中。我现在可以只选择一项并将其放入文本框中：

html代码：

```
 <select name="ncontacts" id = "contacts" multiple="yes" onclick="ChooseContact(this)"> </select> 
```

JS代码：

```
 function ChooseContact(data)
    {
      document.getElementById ("friendName").value = data.value;
    } 
```

但是当我选择 2 个项目时，只有第一个项目会写在文本框中。那么，你知道我该如何解决它，让它们都出现在文本框中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T22:50:47.780

另一种可能的解决方案是：

```
function ChooseContact(list) {
    var selected = [];
    Array.prototype.forEach.call(list.options, function(option) {
        if( option.selected ) {
            selected.push(option.value);
        }     
    });
    document.getElementById('friends').value = selected.join(', ');
}​ 
```

[演示在这里](http://jsfiddle.net/rlemon/AR7b8/)

编辑：记录在案 -
`Array.prototype`比`[]`执行速度略快。但是他们做同样的事情 :) 性能损失并不多（我`[]`在我的代码中使用。但我不妨向您展示稍微更快更详细的方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:33:17.100

一种可能的（基本）解决方案是这样的：

```
function ChooseContacts(selectElem) {
    var txtBox = document.getElementById ("friendName");
    txtBox.value = '';
    for (var i=0; i<selectElem.options.length; i++) {
        if (selectElem.options[i].selected) {
            txtBox.value += selectElem.options[i].value;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T22:51:56.897

```
function chooseContact(fromElem, appendToElem, separator){
    separator = separator|| " ";
    var result = [];
    [].forEach.call(fromElem.options, functon(option){
            if(option.checked){
                    result.push(option.value);
            }
    });
    appendToElem.value = result.join(separator);
} 
```

# r - 从大文件中提取数据并将这些数据导出到 excel 中

> ID：10340075
> 
> 赞同：0
> 
> 时间：2012-04-26T19:28:44.970
> 
> 标签：r, memory, export, limit

我有一个包含基因型数据的巨大数据文件。我想提取某些数据并立即将这些数据导出到 excel 中。当我运行用于抽象数据的代码时，R 想要将此数据放在控制台窗口中，然后我会收到内存空间不足的错误消息。有没有办法告诉 R，不要将提取的数据放在控制台窗口中，而是将其导出到 excel 文件中？

抽象所需数据的代码是

```
subset(project, grepl("^UEBB018.*", pedigree_dhl) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:12:25.710

这是@joran 评论的后续行动：

```
 subfile <- subset(project, grepl("^UEBB018.*", pedigree_dhl) )
 write.csv(subfile, file="outUEBB018.csv") 
```

~~我的记忆是您需要分两步执行此操作，因为未评估 write.csv 的第一个参数，~~但我对这些细节的记忆不是很好。（我经常使用帮助文件。）Ben 下面的评论是正确的。您可以一步完成。

# jaxb - 绑定 JAXB 的最终属性

> ID：10340076
> 
> 赞同：2
> 
> 时间：2012-04-26T19:28:46.917
> 
> 标签：jaxb

我想为`Test`该类实现 JAXB，我发现如果变量是`final`，是否无法注入 JAXB？`XmlAdapter`在这种情况下会有所帮助吗？

```
public class Test implements Serializable {
    private final int limit;
    private Map<String, Object> results;
    private final Sub sub;

    @XmlElementWrapper(name = "item") //tried with this also,but not successfull
    @XmlAnyElement
    private final List<Item> item; 

    public Test(final Sub sub, final List<Item> item, final int limit) {
            this(pattern, results, 0, limit, offset);
    }
}

public class Item implements Serializable {
    private Base base;// Interface

    public Item(final Base base) {
        this.base = base;
    }
} 
```

`private final List<Item> item;`是迭代`Item`类，它也有一个接口，`Base`如果我想实现`xmlAdapter`我需要这样做吗？`Item``Test`

# javascript - iphone无法点击输入框

> ID：10340077
> 
> 赞同：1
> 
> 时间：2012-04-26T19:28:49.963
> 
> 标签：javascript, jquery, iphone

聊天系统在所有浏览器（桌面）上运行良好，但在手机上出现故障，原因有两个：

我正在使用位置：固定，当单击按钮时，一个 div 向上滑动并打开聊天框。

*   固定位置在手机中的工作非常不可预测。我为此经历了许多解决方法，但似乎没有什么适合我的目的。我需要的是一个 div 在单击按钮时向上滑动。

*   我无法单击聊天框上的输入按钮，而其他表情符号和提交按钮工作正常。

这是我正在使用的 css 和 js 代码：

originaly（并点击关闭按钮）：

```
$("#chatarea").animate({"bottom":"-600px"}); 
```

点击：

```
$("#chatarea").animate({"bottom":"0px"}); 
```

我已将文本框 CSS 设置为：

```
z-index:101; 
```

即使没有指定 z-index，所有其他表情符号仍然可以正常工作。

我无法发布完整的代码，因为它混合在 php echo 中。输入自动对焦工作正常，但我需要能够单击以输入文本。提前致谢。

# c# - 可以更改悬停间隔吗？

> ID：10340093
> 
> 赞同：6
> 
> 时间：2012-04-26T19:30:02.630
> 
> 标签：c#, winforms, hover

我有允许用户将鼠标悬停在控件上的代码，它会响应。但是，我希望悬停更快地开火。有没有办法加快悬停反应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-12T02:30:41.043

`SystemInformation.MouseHoverTime`在生成事件之前有一个故意的毫秒时间延迟`MouseHover`，作为一个简单的替代方案，您可以使用`MouseEnter`事件来代替，它将立即触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-08T03:35:30.190

是的你可以。Windows 窗体中的悬停不遵循全局系统设置，并且已在字段中设置[`NativeMethods.TRACKMOUSEEVENT`](https://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/NativeMethods.cs,63eece627fb00887)为 100 毫秒。`dwHoverTime`

然后在`WndProc`控件的本机窗口的方法中，`WM_MOUSEMOVE`被困到调用`TrackMouseEvent`这反过来又导致了一个`WM_MOUSEHOVER`. [您可以在此处](https://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Control.cs,14496)查看源代码。

因此，您可以通过将鼠标悬停所需的超时`WM_MOUSEMOVE`设置为. 还可以处理和引发自定义事件，例如.[`TrackMouseEvent`](https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-trackmouseevent)`dwHoverTime`[`TRACKMOUSEEVENT`](https://docs.microsoft.com/en-us/windows/desktop/api/winuser/ns-winuser-tagtrackmouseevent)`WM_MOUSEHOVER``MyMouseHover`

然后您可以轻松处理此自定义`MyMouseHover`事件。

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;
public class SampleControl : Control
{
    [DllImport("user32.dll")]
    private static extern int TrackMouseEvent(ref TRACKMOUSEEVENT lpEventTrack);
    [StructLayout(LayoutKind.Sequential)]
    private struct TRACKMOUSEEVENT
    {
        public uint cbSize;
        public uint dwFlags;
        public IntPtr hwndTrack;
        public uint dwHoverTime;
        public static readonly TRACKMOUSEEVENT Empty;
    }
    private TRACKMOUSEEVENT track = TRACKMOUSEEVENT.Empty;
    const int WM_MOUSEMOVE = 0x0200;
    const int WM_MOUSEHOVER = 0x02A1;
    const int TME_HOVER = 0x1;
    const int TME_LEAVE = 0x2;
    public event EventHandler MyMouseHover;
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_MOUSEMOVE)
        {
            track.hwndTrack = this.Handle;
            track.cbSize = (uint)Marshal.SizeOf(track);
            track.dwFlags = TME_HOVER | TME_LEAVE;
            track.dwHoverTime = 500;
            TrackMouseEvent(ref track);
        }
        if(m.Msg == WM_MOUSEHOVER)
        {
            MyMouseHover?.Invoke(this, EventArgs.Empty);
        }
        base.WndProc(ref m);
    }
} 
```

**笔记**

*   系统范围的`SystemInformation.MouseHoverTime`设置用于`ToolTip`. 但该`MouseHover`事件遵循设置为 100 毫秒的`dwHoverTime`字段值。[`NativeMethods.TRACKMOUSEEVENT`](https://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/NativeMethods.cs,63eece627fb00887)

*   您可以在我的帖子中找到类似的实现，用于处理表单标题栏上的悬停事件：[Handle Mouse Hover on Titlebar of Form](https://stackoverflow.com/a/40683532/3110834)。

*   作为另一种选择，我还尝试设置控件`dwHoverTime`私有`trackMouseEvent`字段的字段值，并且该解决方案似乎也有效。

*   [你可以在这里](https://stackoverflow.com/a/54582106/3110834)找到 VB 版本的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T19:49:12.307

如果将此`ToolTip`组件用于此目的，则可以将其`InitialDelay`属性设置为小于默认值 500（半秒）的值。

顺便说一句，`AutoPopDelay`和`ReshowDelay`属性也很有用，分别确定鼠标重新进入控件客户区时的显示时间和延迟。

# css - CSS 位置：固定 - 仅在本地运行时位置正确

> ID：10340096
> 
> 赞同：1
> 
> 时间：2012-04-26T19:30:08.240
> 
> 标签：css, css-position

我正在使用以下 CSS 来定位链接：

```
position:fixed;
top:381;
right:265; 
```

它可以工作，当我使用 file:/// url 查看 HTML 文件时，链接被正确放置，但是当我把它放在服务器上并从那里查看时，链接出现在屏幕的左上角反而。我已经确认 HTML 页面正确地加载了 CSS 文件，因为它加载了其他样式信息就好了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:32:10.533

你忘了`px`

```
position: fixed;
top: 381px;
right: 265px; 
```

# javascript - 如何验证并将正斜杠转换为 url 的开头

> ID：10340098
> 
> 赞同：1
> 
> 时间：2012-04-26T19:30:13.737
> 
> 标签：javascript

```
var path1 = 'catalog/view/theme/default/image/flags/usa.png';

var path2 = '../catalog/view/theme/default/image/flags/usa.png';

var path3 =  '/catalog/view/theme/default/image/flags/usa.png';

var path4 =  '__catalog/view/theme/default/image/flags/usa.png';

var path5 =  '@catalog/view/theme/default/image/flags/usa.png';

var path6 =  '%catalog/view/theme/default/image/flags/usa.png';

var path7 =  '?catalog/view/theme/default/image/flags/usa.png'; 
```

什么是正则表达式来确保和前缀 / 到一个 url 字符串的开头结果应该是 /catalog/view/theme/default/image/flags/usa.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:35:38.723

尝试以下操作：

```
 '/' + path2.match(/catalog.*/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:36:57.433

正则表达式

```
/^\/.*$/ 
```

将匹配一个开始的斜线。

```
/^[^\/].*$/ 
```

将匹配一个没有斜杠的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:37:26.770

简短的回答：

```
var patern =/[a-z].+$/gi;
var use = '/'+'__catalog/view/theme/default/image/flags/usa.png'.match(/[a-z].+$/gi)[0];
//use === "/catalog/view/theme/default/image/flags/usa.png" 
```

给你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:40:17.410

您可以使用

```
var url='/'+path2.match(/[a-z].*/gi); // use path1 to path7
console.log(url);​​ // Result is: /catalog/view/theme/default/image/flags/usa.png 
```

# android - 从另一个类设置 ImageView 的可绘制资源 - ANDROID

> ID：10340102
> 
> 赞同：0
> 
> 时间：2012-04-26T19:30:18.897
> 
> 标签：android, class, android-activity, imageview

情况如下：我有 2 个类：“Main.java”和“Control.java”...Main，是我构建应用程序的活动，而“Control”只是一个 java 类，我在其中分配了一些变量我可能会在其他课程上使用。

好的，在“Main”类中，我得到了一个带有资源的 ImageView：

```
final ImageView myImg = (ImageView) findViewById(R.id.imageView1);
myImg.setBackgroundResource(R.drawable.img1); 
```

然后，我在“Control”类上创建一个静态 ImageView，就像这样：

```
static ImageView image; 
```

我想做的是：在“Main”类上，我想在“Control”类的 ImageView 上设置一个可绘制资源......比如：

```
control.image.setBackgroundResource(R.drawable.img1); 
```

但是我不断收到没有有用日志的异常错误......拜托，这真的把我的项目搞砸了。谢谢！

# matlab - 在 MATLAB 中使用 fsolve 命令

> ID：10340103
> 
> 赞同：0
> 
> 时间：2012-04-26T19:30:22.460
> 
> 标签：matlab, equation-solving

我怎样才能解决这些方程？

```
(-1.5/w)*sin(w*t) + 1.5*t - 0.45 = 0 
```

知道：

```
w = sqrt(10) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:13:58.227

您可以通过以下方式求解这个由 2 个方程组成的方程组：

```
solution = solve('w = sqrt(10)', '(-1.5/w)*sin(w*t) + 1.5*t - 0.45 = 0') 
```

检查解决方案：

```
solution.t
ans =
0.59963230021859138687907507892006

solution.w
ans =
3.1622776601683793319988935444327 
```

要确认解决方案有效：

```
(-1.5/solution.w)*sin(solution.w*solution.t) + 1.5*solution.t - 0.45
ans =
0.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:13:45.680

编辑：nrz 的解决方案是正确的。

一种方法是显式评估函数并绘制图表。在 Matlab 中尝试以下代码。

`w = sqrt(10);` `t=(-100:0.01:100);` 让， `R=(-1.5/w)*sin(w*t) + 1.5*t - 0.45;`

然后，

```
plot(t,R,'k')
 axis square;
 grid on; 
```

你会得到Figure-1；

![图1](../Images/e2d50dd4bb0a3142f3e8471b529c19c6.png)

`在 (0,0) 附近放大后，您将看到图形的以下结构（图 2）。

![图 2](../Images/0d5097105cc3477a9d66f40bb69af647.png)

上面，我已经为这个问题提供了一个数值解。虽然，在 Matlab 中有另一种方法可用（符号代数）。但是matlab主要是为数值计算和数值求解问题而设计的。Matlab 对于符号问题的解决非常不合适而且速度很慢。虽然目前的问题是一个非常小的问题，并且在 Matlab 中使用符号计算也不会有任何问题，但在 matlab 中以数字方式和在mathematica/maple 等中以符号方式解决问题仍然是一个好习惯。

# php - 使用页面访问令牌和 fb_exchange_token 在页面上发布

> ID：10340104
> 
> 赞同：1
> 
> 时间：2012-04-26T19:30:28.320
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

我正在尝试在用户拥有的页面上为发布者设置一个应用程序。

1）我请求具有 manage_pages,publish_stream 范围的 js 的许可

2) $fb->api('/'.$fb->getUser().'/accounts', 'GET', array('access_token' => $token)

3）我通过线程中的 MarcusJoe 方法[获取令牌 How to extend access token validation since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation)

4）将页面access_token存储在数据库中

5) 在页面上发布 $fb->api('/'.$pageId.'/feed','POST',array_merge(array('access_token'=>$row->token),$params));

因此，当我登录时，如果我确实注销了大约两个小时就可以很好地摆脱所有cookie，它会起作用而不是停止处理消息

使访问令牌无效时出错：会话与当前存储的会话不匹配。这可能是因为用户在创建会话后更改了密码，或者 Facebook 出于安全原因更改了会话。

所以我很想知道我是否做错了什么:(

你能帮我吗 ？

再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:30:41.030

每次 facebook 以您的方式发送令牌时，他们还会添加*“过期”*字段。令牌结果具有以下格式：

```
access_token=XXXXXX&expires=0000 
```

（应用程序令牌除外）

因此，当您提取访问令牌时，也要获得过期时间并确保它有多长时间。您可能想尝试服务器端身份验证，因为它会产生长期存在的令牌。

当用户注销时，会话无效，您的令牌变得无用。除了让用户重新使用您的应用程序之外，您无法获得新的令牌。还有其他一些会话失效的情况，例如替换密码、删除您的应用程序。

# django - Django：使用动态字段名称进行 OR 查询

> ID：10340106
> 
> 赞同：3
> 
> 时间：2012-04-26T19:30:36.437
> 
> 标签：django, django-models, django-queryset

我有一个值，并希望在一个或多个列中获取具有该值的所有实例。为了使这更复杂一点，字段列表是动态的。

所以，我所拥有的是：`['field1', 'field2', 'field3', ...]`

我需要的是：`Q(field1='value') | Q(field2='value') | Q(field3='value') | ...`

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:32:50.557

使用`**`字典到 kw-args 扩展：

```
q = Q()
for field in fields:
    q = q | Q(**{field: "value"}) 
```

（据我所知，作为`Q()`yield a `Q`“什么都不做”）

# html - 如何隐藏html div

> ID：10340108
> 
> 赞同：6
> 
> 时间：2012-04-26T19:30:42.640
> 
> 标签：html, ruby-on-rails, css, ruby-on-rails-3, ruby-on-rails-3.1

我正在用 Ruby-On-Rails 开发一个小型应用程序。我想在 html.erb 文件中隐藏一个 div，直到单击链接。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T19:37:41.200

在您的 html 文件中：

```
<a href="#" id="show_whatever">Show Whatever</a>
<div id="whatever" class="hidden">...</div> 
```

在您的 CSS 文件中：

```
div.hidden { display: none; } 
```

在包含的 javascript 文件中或`<script>`标签内：

```
$(function() {
  $('a#show_whatever').click(function(event){
    event.preventDefault();
    $('div#whatever').toggle();
  });
}); 
```

该类`hidden`隐藏了 div。jQuery 函数正在列出对链接的点击，然后阻止链接被跟踪（`event.preventDefault()`阻止它浏览到`#`）`，最后切换 div 的可见性。

[请参阅关于click()](http://api.jquery.com/click/)和[toggle()](http://api.jquery.com/toggle/)的 jQuery API 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:38:35.063

这很容易使用 javascript。例如，使用 jQuery javascript 库，您可以轻松切换是否基于链接显示 div，如下所示。 [http://jsfiddle.net/Yvdnx/](http://jsfiddle.net/Yvdnx/)

HTML：

```
<a href="#">Click Me To Display Div</a>
<div>Foo</div>​ 
```

Javascript：

```
$(function() {
    $("div").hide();
    $("a").click(function(event) {
        event.preventDefault();
        $("div").toggle();
    });
});​ 
```

jQuery 是可靠的，并且可以在许多浏览器上运行，这与使用 CSS3 选择器（如`:target`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:33:30.310

您可以应用样式`display:none`或`opacity:0`. 第一个将使 div 不会在您的页面上占据任何位置，而第二个将使其不可见，但仍将保留其位置。你可以说第一个隐藏了它，而第二个几乎没有掩盖它。可能还有其他解决方案，但这是我所知道的两个。

# selenium - Selenium 未与 Firefox 12.0 一起运行

> ID：10340111
> 
> 赞同：8
> 
> 时间：2012-04-26T19:31:05.760
> 
> 标签：selenium, testng

Firefox 升级到最新版本 12.0 后，Selenium 无法正常工作。它失败并显示以下消息。请告知，如果我使用旧版本的 Firefox，它仍然可以正常工作。

```
org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: C:\Users\Abdul\AppData\Local\Temp\anonymous869859993705622974webdriver-profile\extensions\webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found

    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:95)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:157)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:93)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:136)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:78)
    at Google.Open_Google_Firefox.Test_Google_FireFox(Open_Google_Firefox.java:13)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:702)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:768)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1185)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1110)
    at org.testng.TestNG.run(TestNG.java:1022)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:109)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:202)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173)
FAILED CONFIGURATION: @AfterMethod tearDown 
```

.. .. .. ..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:04:41.160

我在 2.16 中遇到了同样的错误。升级到 2.21.2 允许我使用 Firefox 12。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:58:55.487

卸载当前版本并重新安装以前版本的 Firefox 可以解决此问题。

这是因为，最新版本的 Firefox 没有与当前的 Selenium 版本集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:52:25.833

如果您恢复到 Firefox 11？（或更低？）

如果您恢复它仍然是一个问题，请查看 Selenium 的网站并将其报告为错误。如果它确实是一个错误，如果其他人也报告了它，我不会太惊讶。

# actionscript-3 - 在 Spark List 中启用拖动移动，同时不允许使用 ctrl+click 复制元素

> ID：10340112
> 
> 赞同：1
> 
> 时间：2012-04-26T19:31:07.507
> 
> 标签：actionscript-3, apache-flex, air, flex-spark, flex4.6

我在 Flex 4.6 AIR 应用程序中遇到火花列表控件问题。这是一个带有单个列表的屏幕，我们希望用户能够对列表中的项目进行重新排序。我能够让重新排序正常工作。问题是您可以通过按住 CTRL 拖放项目在列表中创建新项目。我试图对这个问题进行一些谷歌搜索，但还没有找到解决这个问题的方法。有人有什么想法吗？任何帮助是极大的赞赏！

这是我用于列表的代码：

```
 <s:List id="sampleList" left="10" top="10"
                alternatingItemColors="[0xEFF3FA, 0xFFFFFF]" dataProvider="@{sampleItems.list}"
                dragEnabled="true" dragMoveEnabled="true" dropEnabled="true"
                labelField="name"
                right="10" bottom="72"
                width="300" height="350"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:28:25.613

我能找到的唯一方法是在其中一个拖动事件上放置一个处理程序并检查用户是否正在移动该项目。

```
 private function dragHandler(event:DragEvent):void
 {
      if (event.action != 'move')
      {
           event.preventDefault();
      }
 }

 <s:List id="sampleList" left="10" top="10" dragDrop="dragHandler(event);"
            alternatingItemColors="[0xEFF3FA, 0xFFFFFF]" dataProvider="@{sampleItems.list}"
            dragEnabled="true" dragMoveEnabled="true" dropEnabled="true"
            labelField="name"
            right="10" bottom="72"
            width="300" height="350"/> 
```

# c++ - QToolBar 扩展按钮

> ID：10340114
> 
> 赞同：1
> 
> 时间：2012-04-26T19:31:20.327
> 
> 标签：c++, qt

我在a(b `QToolBar`)里面有一个`QToolbar`(a)，后面是(a)里面的几个`QWidgets`(x) 看起来有点像这样：

> |xxxxxxxxxxxxxxx|b-----------------|xxxxxxx|

(b) 是一个工具栏，里面装满了书签 ( `QToolButton`'s)。当主工具栏 (a) 完全填满书签时，我将看到一个无法点击的 >> 扩展按钮，并且新书签正在消失，尽管我可以测试并看到它们正在创建中。

关于如何让这个扩展按钮正常工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:17:05.480

不要使用嵌套工具栏，这不是一个好主意。而是使用`QMainWindow`, 并向窗口添加多个工具栏。这将允许用户移动它们，这与将工具栏直接添加到小部件不同。

带有硬编码书签的示例网络浏览器：（注意，不要在生产代码中做这样的书签）

![在此处输入图像描述](../Images/5a50d8bb97eb1b53fe3c03b96d1553ee.png)

**赢.h**

```
#ifndef _WIN_H_
#define _WIN_H_

#include <QtGui>
#include <QtWebKit>

class TestWindow : public QMainWindow
{
    Q_OBJECT
    public:
        TestWindow();

    private slots:
        void loadUrl(const QString& url);

    private:
        QWebView* mView;
        QSignalMapper* mUrlMap;
        Q_DISABLE_COPY(TestWindow)
};

#endif 
```

**赢.cpp**

```
#include "win.h"

TestWindow::TestWindow() :
    QMainWindow(),
    mView(new QWebView()),
    mUrlMap(new QSignalMapper(this))
{
    setCentralWidget(mView); // Takes ownership

    mView->load(QUrl::fromUserInput("http://qt-project.org/doc/"));

    connect(mUrlMap, SIGNAL(mapped(const QString&)), this, SLOT(loadUrl(const QString&)));

    QToolBar* tools = addToolBar("Tools");
    tools->addAction(mView->pageAction(QWebPage::Back));
    tools->addAction(mView->pageAction(QWebPage::Forward));
    tools->addAction(mView->pageAction(QWebPage::Stop));
    tools->addAction(mView->pageAction(QWebPage::Reload));

    QToolBar* bookmarks = addToolBar("Bookmarks");
    QAction* bkmkQtDoc = bookmarks->addAction(tr("Qt Documentation"));
    QAction* bkmkBbc = bookmarks->addAction(tr("BBC News"));

    connect(bkmkQtDoc, SIGNAL(triggered(bool)), mUrlMap, SLOT(map()));
    connect(bkmkBbc, SIGNAL(triggered(bool)), mUrlMap, SLOT(map()));

    mUrlMap->setMapping(bkmkQtDoc, "http://qt-project.org/doc/");
    mUrlMap->setMapping(bkmkBbc, "http://www.bbc.co.uk/");

}

void TestWindow::loadUrl(const QString& url)
{
    mView->load(QUrl::fromUserInput(url));
} 
```

**测试.cpp**

```
#include <QtGui>
#include "win.h"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    TestWindow win;

    win.show();

    return app.exec();
} 
```

**test.pro**

```
QT += core gui webkit
SOURCES=test.cpp win.cpp
HEADERS=win.h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:53:59.803

这是我正在寻找的答案，来自 QToolBar 类参考：“当 QToolBar 不是 QMainWindow 的子级时，它失去了使用 addWidget() 添加到工具栏的小部件来填充扩展弹出窗口的能力。请使用通过继承 QWidgetAction 并实现 QWidgetAction::createWidget() 而创建的小部件操作。”

# rabbitmq - RabbitMQ：当某些东西从队列中弹出时的回调函数

> ID：10340116
> 
> 赞同：0
> 
> 时间：2012-04-26T19:31:25.887
> 
> 标签：rabbitmq

不知道如何做到这一点，或者即使它可以做到。我需要编写一个函数来侦听队列并在从队列中弹出某些内容时触发。

所以基本上：将对象推送到队列消费者从队列中弹出对象**一些函数然后说，“'对象'已从队列中弹出”

这是可以用兔子做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:40:57.073

在回顾了我的计划后，我意识到我想出了错误的方法。我让我的消费者向我的程序发回一条消息，说这条特定的消息已被阅读。这遵循了更多的队列概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:20:48.420

我假设你的意思是你想通知生产者消费者已经从队列中消费了一条消息。我要补充一点，我认为你可能误解了这里的 MQ 概念，要么你需要使用 RPC 方法，这可以通过 RabbitMQ 完成，要么你需要重新设计你的系统。但是，您需要的是可能的。

我会在生产者的线程中循环使用：

```
`GetResponse gr = channel.basicGet(queueName, false);` 
```

使用 false 以便下一条消息不会从队列中弹出。然后

```
`int msgCount = gr.getMessageCount();` 
```

会给你队列中的消息数量。之后睡一小会儿，然后再次检查。如果生产者向队列发送大量消息，这将非常困难。但是，如果您增加发送到队列的消息总数并删除您知道已被消费的消息，这将使您了解消息是否已被消费。

我不是 100% 认为这不会有问题，我会重申，我认为通过尝试这个方法你的设计有问题。

# sql - 从 sql 2005 中的同一个表中声明集合

> ID：10340118
> 
> 赞同：-2
> 
> 时间：2012-04-26T19:31:36.477
> 
> 标签：sql

对于表 SalesRep_Info 中的每一行，我都有一个列 ManagerID。ManagerID 是为每个销售代表保存 ManagerID 的同一表的主键。所以我需要将 Manager 的 FirstName 作为新列。我想知道这是否是通过声明和设置在 sql server 2005 中执行此操作的正确方法？！

先感谢您！

```
declare @RepID int

set @RepID = (Select Manager from SalesRep_Info)

Select *, (Select FirstName from SalesRep_Info where RepID=@RepID) as ManagerFname from SalesRep_Info 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:44:12.663

你想加入：

```
SELECT
    a.*,
    b.FirstName AS ManagerFirstName
FROM
    SalesRep_Info a
    LEFT JOIN SalesRep_Info b ON a.ManagerID = b.RepID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:37:31.430

```
declare @RepID int //ok

set @RepID = (Select Manager from SalesRep_Info)   // error - it must have 1 value. you should use top 1. 
```

*从 SalesRep_Info 中选择前 1 位经理*

这是什么意思`Select top 1 Manager from SalesRep_Info`？

条款在哪里`where`？每个人的经理都是一样的吗？

最后 ：

```
Select *, (Select FirstName from SalesRep_Info where RepID=@RepID) as ManagerFname from SalesRep_Info 
```

这也会抛出错误。第二个参数也必须返回 1 个值。

# java - org.xml.sax.SAXParseException：文档无效：未找到语法。

> ID：10340126
> 
> 赞同：14
> 
> 时间：2012-04-26T19:32:21.273
> 
> 标签：java, exception, struts, struts-config

我在我的开发机器上的 Struts 应用程序中遇到错误，显然我的配置文件有错误（我已经检查过并且看起来没问题）：

```
org.apache.commons.digester.Digester error
    SEVERE: Parse Error at line 3 column 15: Document is invalid: no grammar found.
    org.xml.sax.SAXParseException: Document is invalid: no grammar found.

org.apache.commons.digester.Digester error
    SEVERE: Parse Error at line 3 column 15: Document root element "struts-config", must match DOCTYPE root "null".
    org.xml.sax.SAXParseException: Document root element "struts-config", must match DOCTYPE root "null". 
```

显然，在开发机器上，应用程序设法运行。但是，在部署服务器上，我收到以下错误，我不知道是否可能相关：

```
 org.apache.struts.action.ActionServlet handleConfigException 
SEVERE: Parsing error processing resource path /WEB-INF/struts-config.xml java.net.ConnectException: Connection refused at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351) at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213) 
```

我的 struts-config.xml 文件： http: [//pastebin.com/i0XanZZt](http://pastebin.com/i0XanZZt) 我的 web.xml 文件： http: [//pastebin.com/jMPAdSUm](http://pastebin.com/jMPAdSUm)

这里可能有什么问题？缺少一些库？不正确的库版本（使用最新的 Struts 1 版本）？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-02T15:33:10.260

刚刚经历了非常相似的事情的挣扎。还收到 org.xml.sax.SAXParseException: Document is invalid: no syntax found。原始开发人员为 Digester 设置了 setValidation(true)，然后尝试使用模式进行验证。当验证设置为 true 时，它​​期望 XML 的 DOCTYPE 声明中有一个 DTD。因此，当找不到一个时，就会发生异常。

解决方案：在使用模式进行验证时，不要在 Digester 上将验证设置为 true。

下面是一个很好的链接，它显示了如何设置 Digester，它定义了 Digester 使用的模式。当然，如果在 xml 中定义了模式，则无需为 Digester 定义模式，验证将自动进行。

[http://alvinalexander.com/java/jwarehouse/commons-digester/src/test/java/org/apache/commons/digester/XMLSchemaTestCase.java.shtml](http://alvinalexander.com/java/jwarehouse/commons-digester/src/test/java/org/apache/commons/digester/XMLSchemaTestCase.java.shtml)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-07T17:42:37.407

只需检查`struts.xml`，更正以下内容并运行您的程序。

```
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-17T07:12:23.370

对于那些这样做的人`JPOS`，将这两行添加到`xml`文件中

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE isopackager SYSTEM "genericpackager.dtd"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-29T18:40:45.777

得到这个尝试使用 SAX 进行 XSD 验证：

```
Caused by: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 30; Document is invalid: no grammar found.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) 
```

修复似乎是添加这个：

```
 saxParser.setProperty(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA); 
```

参考：[https ://docs.oracle.com/javase/tutorial/jaxp/sax/validation.html](https://docs.oracle.com/javase/tutorial/jaxp/sax/validation.html)

# android - Android - 为什么 GC 突然删除我的对象？

> ID：10340128
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:32:23.687
> 
> 标签：android, garbage-collection

当我创建对象以写入输出流（大小低于 150KB）时，它可能会立即被销毁，因为：

```
System.out.println("Sending object..");
Packet p = new Packet(mJpegData); // here exists
System.out.println(p); // reference exists
oos.writeObject(p); // null exception error 
```

完整错误：

```
04-26 21:37:01.414: W/System.err(12888): java.lang.NullPointerException
04-26 21:37:01.414: W/System.err(12888):    at pl.aadamczyk.webcamera.Preview$PreCallback.onPreviewFrame(Preview.java:148)
04-26 21:37:01.417: W/System.err(12888):    at android.hardware.Camera$EventHandler.handleMessage(Camera.java:583)
04-26 21:37:01.417: W/System.err(12888):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 21:37:01.417: W/System.err(12888):    at android.os.Looper.loop(Looper.java:130)
04-26 21:37:01.417: W/System.err(12888):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-26 21:37:01.417: W/System.err(12888):    at java.lang.reflect.Method.invokeNative(Native Method)
04-26 21:37:01.417: W/System.err(12888):    at java.lang.reflect.Method.invoke(Method.java:507)
04-26 21:37:01.417: W/System.err(12888):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-26 21:37:01.417: W/System.err(12888):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-26 21:37:01.417: W/System.err(12888):    at dalvik.system.NativeStart.main(Native Method)
04-26 21:37:01.472: D/dalvikvm(12888): GC_FOR_MALLOC freed 1152K, 57% free 2820K/6535K, external 1596K/2108K, paused 17ms
04-26 21:37:01.472: I/System.out(12888): My Object has been GC'd. Packet@4063d908
04-26 21:37:01.523: D/dalvikvm(12888): GC_CONCURRENT freed 28K, 50% free 3311K/6535K, external 1596K/2108K, paused 3ms+10ms 
```

“My Object has been GC'd.”由 Packet 的终结器打印。

整个代码： http: [//pastebin.com/zc5TcSgY](http://pastebin.com/zc5TcSgY)

为什么 GS 正在移除我的对象？我有大约 120 MB 的可用内存。

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:40:15.410

我认为问题出在`oos`因为它可能是导致**NullPointerException**的原因。

稍微改变你的代码如下：

```
System.out.println("Sending object..");
Packet p = new Packet(mJpegData); // here exists
System.out.println(p); // reference exists 

if(oos != null)
    oos.writeObject(p);
else
    Log.w("oos", "its null"); 
```

# xml - 使用 XSLT 选择另一个节点中不存在的所有元素

> ID：10340129
> 
> 赞同：1
> 
> 时间：2012-04-26T19:32:32.280
> 
> 标签：xml, xslt, xpath

我想选择另一个节点中不存在的所有元素。

```
<root>
  <users>
    <array>
      <name>John</name>
      <age>30</age>
    </array>
    <array>
      <name>Joe</name>
      <age>30</age>
    </array>
    <array>
      <name>Lou</name>
      <age>30</age>
    </array>
  </users>
  <selected_users>
    <name>Joe</name>
    <age>30</age>
  </selected_users>
</root> 
```

所以我从这个列表中想要的是 John 和 Lou，因为他们没有在选定的用户节点下列出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:34:48.550

**这是一个简短的方法来做到这一点：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="text"/>

    <xsl:template match="users/array/name[not(.=/*/selected_users/name)]">
        <xsl:value-of select="concat(., ' ')"/>
    </xsl:template>
    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <users>
        <array>
            <name>John</name>
            <age>30</age>
        </array>
        <array>
            <name>Joe</name>
            <age>30</age>
        </array>
        <array>
            <name>Lou</name>
            <age>30</age>
        </array>
    </users>
    <selected_users>
        <name>Joe</name>
        <age>30</age>
    </selected_users>
</root> 
```

**产生了想要的正确结果：**

```
John Lou 
```

**注意**：

如果要`name`在变量中获取所需元素，请使用：

```
 <xsl:variable name="vSomeName" select=
"/*/users/array/name[not(.=/*/selected_users/name)]"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:36:59.200

您可以使用此 xpath：

`/*/users/array/name[not(.=/*/selected_users/name)]`

得到“John”和“Lou”。如果您指定要获得的输出类型，我可以添加一个 XSLT 示例。

# coffeescript - 理解coffeescript语法

> ID：10340131
> 
> 赞同：0
> 
> 时间：2012-04-26T19:32:40.940
> 
> 标签：coffeescript

我是 CoffeeScript 的新手，我无法理解它的某些语法。

例如，在这个函数调用中：

```
e('')
    .color('rgb(255,0,0)')
    .attr( x: 20,
           y: 100,
           w: 10,
           h: 100 ) 
```

我希望这能够编译 JS 代码，该代码将带有键 x、y、w、h 的对象传递给`attr`方法。但是这段代码实际上编译成这样：

```
e('').color('rgb(255,0,0)').attr({
  x: 20
}, {
  y: 100,
  w: 10,
  h: 100
}); 
```

它将两个对象传递给`attr`，第一个是 key `x`，第二个是 keys `y`、`w`和`h`。我无法理解为什么 x 与其他键分开，但其他键没有彼此分开？

由于我想传递`attr`方法一个对象，我尝试了这个：

```
e('')
    .color('rgb(255,0,0)')
    .attr({x: 20,
           y: 100,
           w: 10,
           h: 100}) 
```

但这给了我在发生的行中的编译错误`y: 100`：`Error: Parse error on line 4: Unexpected '{'`. 奇怪的是，第 4 行没有`{`。我也尝试删除括号，`attr`但仍然出现相同的错误。

我可以用这个解决它：

```
e('')
    .color('rgb(255,0,0)')
    .attr(
           x: 20,
           y: 100,
           w: 10,
           h: 100) 
```

如果我在 之后删除换行符`.attr(`，那么我在第一个示例中会得到相同的代码，这不是我想要的。

现在我想知道我是否误解了 CoffeeScript 语法中的一些要点，或者其中确实有一些奇怪的东西。还是我在 CoffeeScript 中发现了一个错误？有任何想法吗？

我正在使用 CoffeeScript 1.3.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:44:31.743

在 coffeescript 中，空格很重要。你不能把事情排在你认为应该去的地方。尝试这样的事情：

```
e('')
  .color('rgb(255,0,0)')
  .attr(
    x: 20
    y: 100
    w: 10
    h: 100
  ) 
```

编辑：如果你想让 x 与方法调用在同一行，你只需要正确缩进：

```
e('')
    .color('rgb(255,0,0)')
    .attr(x: 20,
    y: 100,
    w: 10,
    h: 100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:08:27.170

这就是你要找的：

```
e('')
  .color('rgb(255,0,0)')
  .attr
    x:20
    y:100
    w:10
    h:100 
```

编译为：

```
e('').color('rgb(255,0,0)').attr({
  x: 20,
  y: 100,
  w: 10,
  h: 100
}); 
```

请记住，CoffeeScript 是关于简单性和避免花括号和逗号...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:37:38.717

显而易见的解决方案是将您的对象放在一行上，如`.attr({x: 20, y: 100, w: 10, h: 100})`. （虽然没有测试过，但我不明白为什么它不起作用）。

虽然有时您不能使用方括号，但我更喜欢在函数调用中使用它们，因为我发现它更具可读性。

# javascript - 将循环计数传递给ajax成功匿名函数

> ID：10340134
> 
> 赞同：1
> 
> 时间：2012-04-26T19:33:11.493
> 
> 标签：javascript, jquery, ajax

在下面的示例中`key`，等于`d1.periods`每次的长度。除了作为变量传递`key`给匿名函数之外，它们是更好的方法吗？`data``post``key``successes`

```
$.ajax({
  url: 'api/dates.json',
  dataType: 'json',
  success: function(d1){
    $('#scan-interactive').removeClass('disabled');
    for(var key in d1.periods){

      var html = "";
      html += '<tr id="'+d1.periods[key].id+'">';
      html += '<td class="month">'+d1.periods[key].month+'</td>';
      html += '<td class="week">'+d1.periods[key].week+'</td>';
      html += '<td class="days">'+d1.periods[key].days+'</td>';
      html += '<td class="dates">'+d1.periods[key].dates+'</td>';
      html += '<td class="open"></td>';
      html += '<td class="refunded"></td>';
      html += '<td class="closed"></td>';
      html += "</tr>";
      $('#scan-interactive table tbody').append(html);

      $.ajax({
        type: 'POST',
        url: 'api/count.json',
        dataType: 'json',
        data:{'created_at_min':d1.periods[key].created_at_min,'created_at_max':d1.periods[key].created_at_max},
        success: function(d2){
          $('#'+d1.periods[key].id+" .open").html(d2.open);
          $('#'+d1.periods[key].id+" .closed").html(d2.closed);
          $('#'+d1.periods[key].id+" .returns").html(d2.returns);                  
        }
      });

    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:39:45.740

将其包裹在一个闭包中：

```
(function(key){

  $.ajax({
    type: 'POST',
    url: 'api/count.json',
    dataType: 'json',
    data:{'created_at_min':d1.periods[key].created_at_min,'created_at_max':d1.periods[key].created_at_max},
    success: function(d2){
      $('#'+d1.periods[key].id+" .open").html(d2.open);
      $('#'+d1.periods[key].id+" .closed").html(d2.closed);
      $('#'+d1.periods[key].id+" .returns").html(d2.returns);                  
    }
  });

})(key); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:39:25.377

将密钥作为选项传递给 ajax 请求，然后使用 this.nameofoption 访问它。

```
for (var i = 0; i < 5; i++) {
    $.ajax({
        url: "/echo/html",
        method: "post",
        data: {
            html: "foo",
            delay: 1
        },
        context: {key: i},
        success: function(){
            console.log(this.key);
        }
    });
} 
```

**演示：http:** [//jsfiddle.net/R9Ldd/2/](http://jsfiddle.net/R9Ldd/2/)

*更新为使用 firebuglite*

# php - JavaScript 返回“不是函数”错误，但该方法在 Firebug 中作为响应列出

> ID：10340137
> 
> 赞同：2
> 
> 时间：2012-04-26T19:33:22.427
> 
> 标签：php, javascript, json, zend-framework, json-rpc

加载网页时，我在 Firebug 中收到以下错误：

```
redirect.processBrowser is not a function
[Break On This Error]   
url = redirect.processBrowser(JSON.stringify(browserInfo)); 
```

在 Firebug 中看到的响应如下：

```
{"transport":"POST","envelope":"JSON-RPC-2.0","contentType":"application\/json","SMDVersion":"2.0","target":"\/json-rpc.php","services":{"processBrowser":{"envelope":"JSON-RPC-2.0","transport":"POST","parameters":[{"type":"object","name":"json","optional":false}],"returns":"string"}},"methods":{"processBrowser":{"envelope":"JSON-RPC-2.0","transport":"POST","parameters":[{"type":"object","name":"json","optional":false}],"returns":"string"}}}{"error":{"code":-32600,"message":"Invalid Request","data":null},"id":null} 
```

代码的javascript如下：

```
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/json2.js" type="text/javascript"></script>
<script src="js/jquery.zend.jsonrpc.js" type="text/javascript"></script>
<script src="js/browserDetect.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function()
        {
            browserInfo = {
                "screen_width": screen.width,
                "screen_height": screen.height,
                "color_depth": screen.colorDepth,
                "url": document.URL,
                "user_agent": navigator.userAgent,
                "browser_name": BrowserDetect.browser,
                "browser_version": BrowserDetect.version,
                "platform": BrowserDetect.OS
            };

            redirect = jQuery.Zend.jsonrpc({url: '/json-rpc.php'});

            url = redirect.processBrowser(JSON.stringify(browserInfo));

            window.location.replace(url);
        });
    </script> 
```

jsonrpc.php 代码如下：

```
<?php
// Define path to the application directory
defined('REFERRAL_SYSTEM_ROOT') || define('REFERRAL_SYSTEM_ROOT', realpath('/system'));
defined('REFERRAL_PUBLIC_ROOT') || define('REFERRAL_PUBLIC_ROOT', realpath('/public'));

require_once REFERRAL_SYSTEM_ROOT . '/some_file.php';

/**
 * Zend Application
 **/
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application($_ENV["REFERRAL_ENVIRONMENT"], REFERRAL_SYSTEM_ROOT . '/config/application.ini');

$application->getBootstrap();

require_once 'Browser.php';

// Instantiate server, etc.
$server = new Zend_Json_Server();
$server->setClass('Browser');

if('GET' == $_SERVER['REQUEST_METHOD'])
{
    // Indicate the URL endpoint, and the JSON-RPC version used:
    $server->setTarget('/jsonrpc.php')
           ->setEnvelope(Zend_Json_Server_Smd::ENV_JSONRPC_2);

    // Grab the SMD
    $smd = $server->getServiceMap();

    // Return the SMD to the client
    header('Content-Type: application/json');
    echo $smd;
}

$server->handle(); 
```

正如您从响应中看到的，ZEND_JSON_RPC 服务器看到了 processBrowser，但我得到了“不是函数”响应。我不知道为什么会这样。

有什么想法吗？

**编辑**-> 2012 年 4 月 26 日 @ 美国东部时间下午 4:25

虽然函数*processBrowser()*确实存在，但它是*Browser.php*中定义的*Browser*类的一部分，调用*jQuery.Zend.jsonrpc({url: '/json-rpc.php'})*显然没有收到正确的回复。我仍然不知道为什么。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:50:37.410

我把你说的来自萤火虫控制台的 json 和 jsonlint 拿走了。

结果如下： Parse error on line 35: ...g" ​​} }}{ "error": {
--------------------^ Expecting 'EOF' , '}', ',', ']'

在错误部分之前，您有整个响应的右括号。我不确定是什么产生了响应，但需要将其从那里移除并将其放在最后。

这是更正的json：

{ “传输”：“POST”，“信封”：“JSON-RPC-2.0”，“contentType”：“application/json”，“SMDVersion”：“2.0”，“target”：“/json-rpc.php ”，“服务”：{“processBrowser”：{“信封”：“JSON-RPC-2.0”，“传输”：“POST”，“参数”：[{“类型”：“对象”，“名称”： "json", "optional": false}], "returns": "string" } }, "methods": { "processBrowser": { "envelope": "JSON-RPC-2.0", "transport": "POST", "参数": [{ "type": "object", "name": "json", "optional": false}], "returns": "string" } } { "error": { "code ": -32600, "message": "无效请求", "data": null }, "id": null } };“数据”：空}，“ID”：空}}；“数据”：空}，“ID”：空}}；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:13:06.820

我有同样的问题。尝试删除行“ `header('Content-Type: application/json');`”。它对我有用:)**

# html - 为 rails 中的某些路线去除 newrelic rum.js 脚本

> ID：10340138
> 
> 赞同：3
> 
> 时间：2012-04-26T19:33:26.913
> 
> 标签：html, http, attachment, instrumentation, newrelic

我正在使用 newrelic ruby​​ 代理，它正在向我的应用程序的每个 hmtl 响应插入一些 js 代码，例如在 head: var NREUMQ=[];NREUMQ.push(["mark","firstbyte",new Date().获取时间（）]）；

问题是，我们允许用户托管内容，有时他们托管 html 文件。然后当他们点击下载时，newrelic 会将这些行插入到他们的 html 中......

通过站点下载的示例 html 并添加了 newrelic。任何建议如何仅针对某些路线或我们仅可用于特定代码路径的任何其他方法剥离新遗物？

```
HTTP/1.1 200 OK
Server: nginx/1.1.8
Date: Thu, 26 Apr 2012 19:25:54 GMT
Content-Type: text/html; charset=utf-8
Content-Length: 1176
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.11
X-UA-Compatible: IE=Edge,chrome=1
Content-Transfer-Encoding: binary
X-Runtime: 0.340155
Progma: cache
Content-Disposition: attachment; filename="404.html"
Expires: 0
Cache-Control: private
Set-Cookie: ;)
Status: 200

<!DOCTYPE html>
<html>
<head><script>var NREUMQ=[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
  <title>The page you were looking for doesn't exist (404)</title>
  <style type="text/css">
    body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
    div.dialog {
      width: 25em;
      padding: 0 4em;
      margin: 4em auto 0 auto;
      border: 1px solid #ccc;
      border-right-color: #999;
      border-bottom-color: #999;
    }
    h1 { font-size: 100%; color: #f00; line-height: 1.5em; }
  </style>
</head>

<body>
  <!-- This file lives in public/404.html -->
  <div class="dialog">
    <h1>The page you were looking for doesn't exist.</h1>
    <p>You may have mistyped the address or the page may have moved.</p>
  </div>
<script>(function(){var d=document;var e=d.createElement("script");e.async=true;e.src="https://d1ros97qkrwjf5.cloudfront.net/30/eum/rum.js";var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(e,s);})();NREUMQ.push(["nrf2","beacon-1.newrelic.com","9dfe439095",309309,"blablabla==",0,336,new Date().getTime()])</script></body>
</html> 
```

我试过使用： include NewRelic::Agent::Instrumentation::ControllerInstrumentation newrelic_ignore :only => "download" 在我的控制器中，但它似乎没有任何效果。

当我重新启动乘客时，代码不会在短时间内附加到任何页面，之后，它会附加到所有页面，即使是那些有 newrelic_ignore 的页面

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T05:12:38.410

您可以关闭 New Relic RUM 的自动检测——这就是在您的页面中自动插入 JS 的原因。有一个设置`newrelic.yml`可以打开和关闭自动 RUM。有关详细信息，请参阅[Ruby 中的 RUM 文档](https://newrelic.com/docs/ruby/real-user-monitoring-in-ruby)。

完成此操作后，您可以为要测量最终用户页面加载时间的操作手动添加回仪表。文档中还描述了如何执行此操作——您调用 Ruby 代理 API 方法在页面中插入页眉和页脚。

# python - 为 mac os x 编辑 emacs 配置时，我在哪里可以找到“python 模式”的来源？

> ID：10340141
> 
> 赞同：1
> 
> 时间：2012-04-26T19:33:36.910
> 
> 标签：python, macos, emacs

我正在寻找在 mac os x 上使用 emacs 的 python 模式，但我似乎找不到该模式的源文件。

在 Mac OS X 上安装时，默认安装的 emacs 可能会将其模式放置在哪些标准位置？

（我使用的是 GNU Emacs 24.0.95.1（i386-apple-darwin11.3.0，NS apple-appkit-1138.32））

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:44:25.527

一般来说，我会做`M-x describe-function RET python-mode`-- 默认情况下绑定到`C-h f`-- 并且信息窗口中的第一行是：`python-mode is an interactive compiled Lisp function in ``python.el'`.

这`python.el`对我来说是可点击的，并将我带到定义它的文件，此时`M-x pwd`工作。

# c - 在 Linux 上获取 NIC/以太网卡链接状态的事件

> ID：10340145
> 
> 赞同：2
> 
> 时间：2012-04-26T19:33:46.287
> 
> 标签：c, linux

Linux 上是否有任何 API（或特殊文件）提供有关以太网卡链接状态变化的事件而无需轮询？即当您插入/拔出电缆时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:30:41.877

您可以通过 netlink 获取链接打开/关闭事件。您将创建一个`PF_NETLINK`套接字，绑定到该`RTMGRP_LINK`组，然后等待`RTM_NEWLINK`/`RTM_DELLINK`消息。链接事件有`IFF_RUNNING`并`IFF_LOWER_UP`设置在`ifinfomsg.flags`，而链接断开事件的两个标志都被清除（有趣的是，我收到`RTM_NEWLINK`了两种类型的事件的消息）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T20:46:43.407

如果这个文件的内容`/sys/class/net/eth0/carrier`是1，那么接口`eth0`有载体。

# ajax - jquery ajax表单提交插件不发布文件输入

> ID：10340148
> 
> 赞同：2
> 
> 时间：2012-04-26T19:33:55.990
> 
> 标签：ajax, jquery, jquery-forms-plugin

我有这个表格：

```
<form id="imageinputpopup" class=suggestionsubmit style="display: none">
    <span>Add a thing!</span><br/>
    <label>url: </label><input name="imageurl" type="url"><br/>
    <label>file: </label><input name="imagefile" type="file"><br/>
    <input type='hidden' name='schoolid' class="schoolid">
    <input type="submit" value="Submit">
</form> 
```

而这个文件。准备好了：

```
<script type="text/javascript">
$(document).ready(function() {

    $('.schoolid').val(get_gmap_value('school_id'));

    $(".allow-submission").live('click', function(){
        if($(this).attr('inputtype')=="colorpicker"){
            .....
        } else if($(this).attr('inputtype')=="image"){
            remove_hidden("#imageinputpopup");
            add_fieldname($(this), $("#imageinputpopup"));
            $("#imageinputpopup").dialog();
        } else if($(this).attr('inputtype')=="text"){
            ....
        } else {
            //nothing
        }
    });

    $(".suggestionsubmit").submit(function(){
        event.preventDefault();
        alert($(this).html());
        $(this).ajaxSubmit({
            url: '/save-school-suggestion/',
            type: 'post',
            success: function(response){
                response = jQuery.parseJSON(response);
                // Check for login redirect.
//                if ( response.requireLogin ) {
//                    alert('Sign up or log in to save your answer');
//                } else {
                    $('.suggestionsubmit').dialog('close');
//                }
            }
        });
    });
});

    function add_fieldname(element, addto){
        var elementname = document.createElement('input');
        elementname.type = 'hidden';
        elementname.name = 'fieldname';
        elementname.value = element.attr('fieldname').replace(' ', '_');
        $(elementname).addClass('fieldname');
        addto.append(elementname);
    }

    function remove_hidden(element){
        $(element+' .fieldname').remove();
    } 
```

但是文件字段没有显示在服务器端。

为什么？

我在文档中找到了这个：

为什么没有发布我的所有输入值？jQuery 表单序列化与 HTML 规范密切相关。只有成功的控件才能提交。

但我不明白为什么我的文件控制无效。我在我的网站的不同位置有另一个提交表单，几乎相同并且运行良好......

编辑：这是另一种有效的表单（它有一些额外的东西，但表单标签只有一个 id，就像问题一样，输入标签是相同的）。

```
<form id="photos-submission-form6">

    <input type="hidden" name="section" value="photos">
    <input type="hidden" name="school" id="photos-submit-school6">

    <div style="margin-bottom: .5em">
            <p style="position: relative; width:80%; font-size: 14px; display: inline" id="photos-anonymity-header6">Post as: null</p>
            <img id="helpicon6" src="/static/img/help-icon.png" style="float: right; cursor: pointer; padding-left:1em;">
            <div id="explanation6" style="display: none; padding:1em; background-color:white; border:2px solid gray; position: absolute;z-index:30; right:5px; top:5px">For more posting options, <a id="profilelink6" href="/profile/">fill out your profile</a></div>
        </div>
    <div id="photos-anonymity-select6" style="margin-bottom: .75em; width:412px" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%; "></a></div>
    <input type="hidden" id="photos-anonymity-level6" name="anonymity-level" value="username">
        <span style="line-height: 40px;">
        <label class="photouploadlabel">URL</label><input type="text" name="image-url" style="width: 335px"><br>
        <label class="photouploadlabel">File</label><input type="file" name="image-file" style="width: 335px"><br>
        <label class="photouploadlabel">Caption</label><input type="text" id="image-caption6" name="image-caption" style="width: 335px; color: rgb(128, 128, 128); ">
        </span>

    <div style="height: 30px; margin-top: 1em; width: 413px;">
            <label id="photos-tagsbutton6" style="margin-right: .5em; cursor: pointer; vertical-align: bottom; float:left; line-height: 1.8em;">Tags</label>
        <input id="photos-tagsinput6" style="display: none;" type="text" name="tags">
        <button id="send-photos-suggestion6" disabled="" style="float:right; position: relative; bottom: 7px; right: -4px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-disabled ui-state-disabled ui-button-text-only" role="button" aria-disabled="true"><span class="ui-button-text">Post</span></button>
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:34:41.280

嘿，您刚刚忘记在表单标签中添加 ---> enctype="multipart/form-data" 。这将帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:48:39.980

我认为您的 javascript 绑定有问题，无法识别您的文件。

尝试将您的提交触发事件与另一个 live() 函数绑定

即改变

```
$(".suggestionsubmit").submit(mooFar(e)); 
```

至

```
$(".suggestionsubmit").live('submit', mooFar(e)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:07:07.520

这可能不是这种情况，但确定服务器端没有拼写错误？就像你会使用 $_FILE 而不是 $_FILES？你能发布相关的php吗？

此外，绝对不是问题，但建议关闭您的输入标签，现在像这样：

```
<input ... /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:09:11.620

尝试将输入的类型`imageurl`从更改`url`为`text`：

从：

```
<label>url: </label><input name="imageurl" type="url"><br/> 
```

至：

```
<label>url: </label><input name="imageurl" type="text"><br/> 
```

我不确定，但是 jquery 插件可能由于`image_url`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T00:40:13.657

......我在文件请求中查找错误的位置。

服务器端应该是：

```
if not s.url_field and 'imagefile' in request.FILES:
    s.image_field = request.FILES['imagefile'] 
```

代替

```
s.image_field = request.POST.get('imagefile', None) 
```

我完全失败了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T19:36:43.013

将 enctype="multipart/form-data" 属性添加到您的表单中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-07T04:28:50.263

确保您正在测试的文件不超出最大文件大小，值得在您的 HTML 中进行设置。

```
<input type="hidden" name="MAX_FILE_SIZE" value="500" /> 
```

此外，在表单正常工作之前，不使用 display:none 进行测试可能是值得的；您在哪个浏览器中测试？

# c - 有没有更干净的方法来可靠地使用 write() 函数？

> ID：10340154
> 
> 赞同：6
> 
> 时间：2012-04-26T19:34:24.573
> 
> 标签：c, linux, sockets, gcc

我阅读了这些`man`页面，我的理解是，如果`write()`失败并将 to 设置`errno`为`EAGAIN`or `EINTR`，我可能会`write()`再次执行，所以我想出了以下代码：

```
 ret = 0;
  while(ret != count) {
    write_count = write(connFD, (char *)buf + ret,  count);
    while (write_count < 0) {
      switch(errno) {
        case EINTR:
        case EAGAIN:
          write_count = write(connFD, (char *)buf + ret,  count -ret);
          break;
        default:
          printf("\n The value of ret is : %d\n", ret);
          printf("\n The error number is : %d\n", errno);      
          ASSERT(0);
      }
    }
    ret += write_count;
  } 
```

我正在执行`read()`和`write()`处理套接字并处理与`read()`上述类似的事情。我正在使用带有`gcc`编译器的 Linux。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:45:05.567

你有一点“不要重复自己”的问题——不需要两个单独的调用`write`，也不需要两个嵌套循环。

我的正常循环看起来像这样：

```
for (int n = 0; n < count; ) {
    int ret = write(fd, (char *)buf + n, count - n);
    if (ret < 0) {
         if (errno == EINTR || errno == EAGAIN) continue; // try again
         perror("write");
         break;
    } else {
        n += ret;
    }
}

// if (n < count) here some error occurred 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:59:07.787

`EINTR`和`EAGAIN`处理通常应该略有不同。`EAGAIN`总是某种表示套接字缓冲区状态的瞬时错误（或者，更准确地说，您的操作可能会阻塞）。

一旦你击中了一个，`EAGAIN`你可能想睡一会儿或将控制权返回给一个事件循环（假设你正在使用一个）。

跟`EINTR`情况有点不同。如果您的应用程序不停地接收信号，那么这可能是您的应用程序或环境中的问题，因此我倾向于使用某种内部`eintr_max`计数器，因此我不会陷入我只是继续无限循环的理论情况上`EINTR`。

Alnitak 的答案（对于大多数情况来说足够了）也应该保存在`errno`某个地方，因为它可能会被破坏`perror()`（尽管为简洁起见，它可能被省略了）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T04:05:15.607

我宁愿`poll`使用描述符，`EAGAIN`而不是无缘无故地忙于循环和烧毁 CPU。`write`对于我使用的非阻塞，这是一种“阻塞包装器” ：

```
ssize_t written = 0;

while (written < to_write) {
    ssize_t result;
    if ((result = write(fd, buffer, to_write - written)) < 0) {
        if (errno == EAGAIN) {
            struct pollfd pfd = { .fd = fd, .events = POLLOUT };
            if (poll(&pfd, 1, -1) <= 0 && errno != EAGAIN) {
                break;
            }
            continue;
        }
        return written ? written : result;
    }
    written += result;
    buffer += result;
}
return written; 
```

请注意，我实际上并没有检查`poll`返回值以外的结果；`write`如果描述符上存在永久性错误，我认为以下操作将失败。

您可能希望`EINTR`通过简单地将其添加到条件中来将其包含为可重试错误`EAGAIN`，但我更喜欢它来实际中断 I/O。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T10:34:51.057

是的，有更简洁的使用方法：以 a作为参数`write()`的 write 函数类。`FILE*`也就是说，最重要的是，`fprintf()`和`fwrite()`。在内部，这些库函数使用`write()`系统调用来完成它们的工作，并且它们处理类似`EAGAIN`和`EINTR`.

如果你只有一个文件描述符，你总是可以`FILE*`通过将它包装成 a `fdopen()`，这样你就可以将它与上面的函数一起使用。

但是，有一个陷阱：`FILE*`流通常是缓冲的。如果您正在与其他程序通信并等待它的响应，这可能是一个问题。即使没有逻辑错误，这也可能使两个程序都死锁，只是因为`fprintf()`决定推迟相应`write()`的位。`fflush()`您可以在实际需要执行`write()`调用时关闭缓冲或输出流。

# c# - 检查列表项 ID

> ID：10340156
> 
> 赞同：0
> 
> 时间：2012-04-26T19:34:29.480
> 
> 标签：c#, asp.net-mvc

目前我正在尝试检查选定的项目 ID 并显示在编辑页面的下拉列表中，该页面将显示上一个选定的项目。项目根据其活动状态显示。所有活动项目都显示在下拉列表中，如果用户先前的选择选项当前处于非活动状态，它仍应默认为下拉列表中的该项目，因为它是先前所做的选择。我的问题是我无法在编辑页面上显示用户选择的非活动项目。我将发布我的所有代码，这是在另一个链接中提出的问题的延续：[传递空参数](https://stackoverflow.com/questions/10334582/passing-null-parameters)

我在控制器中的代码：

```
private IEnumerable<SearchItems> GetItems(ItemDescriptionFormViewModel viewModel = null)
{
    if(viewModel == null)
      viewModel = new AppointmentViewModel();
    IOrderedQueryable<ItemDescription> items= _itemDescriptionRepository.FindAll().OrderBy(
        c => c.Sort == null).ThenBy(
            c => c.Sort).ThenBy(c => c.Description);

    if(items.Count()==0)
        ModelState.AddModelError("", string.Format("No active {0} entered.", Kids.Resources.Entities.ItemDescription.EntityNamePlural));
   return
        _itemDescriptionRepository.FindAll().OrderBy(c => c.Description).Where(a=>a.IsActive == true || a.ItemDescriptionId == viewModel.ItemDescriptionId).Select(
            c => new SearchItems {Text = c.Description, Value = c.ItemDescriptionId.ToString()});
} 
```

我在 CONTROLLER 中的编辑方法：

```
[HttpGet]
    [AppointmentAuthorization]
    public ActionResult Edit(Guid appointmentId)
    {
        Appointment appointment = _appointmentService.Get(appointmentId);
        if (appointment == null) return View("NotFound");

        var viewModel = new AppointmentViewModel
                            {
                                AppointmentId = appointment.AppointmentId,

                            };
        viewModel.Items= GetItems();

        return this.RazorView("Edit", viewModel);
    } 
```

似乎缺少某些东西，并且在 viewModel.Items= GetItems() 中将 viewModel 作为参数传递并没有多大作用。我还有另一个用于 Edit 的 Post 方法和一个 Create 方法，它们都调用 GetItems() 方法。任何帮助都会很棒。感谢：D

这就是我在 ViewModel 类中的内容：

```
public IEnumberable<SearchItems> Items {get; set;}
public Guid ItemDescriptionid {get; set;} 
```

创建方法：

```
[HttpGet]
    [AppointmentAuthorization]
    public ActionResult Create(Guid caseId)
    {
        var viewModel = new AppointmentViewModel
                            {
                               Items= GetItems()
                            };

        return this.RazorView("Create", viewModel);
    } 
```

*****解决方案*****

```
private IEnumerable<SearchItems> GetItems(Appointment appointment)
    {
        IEnumerable<short?> itemDescriptionIds =
            appointment.AppointmentItems.Where(c => c.ItemDescriptionId.HasValue).Select(
                c => c.ItemDescriptionId).Distinct();

        IOrderedQueryable<ItemDescription> itemDescription =
            _itemDescriptionRepository.FindAll().Where(
                a => a.IsActive == true || itemDescriptionIds.Contains(a.ItemDescriptionId)).OrderBy(
                    d => d.Description);

        return itemDescription.Select(c=> new SearchItems{Text = c.Description, Value = c.ItemDescriptionId.ToString()});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:02:41.703

您的初始代码未查询先前选择的值的原因是因为您的查询`a.ItemDescriptionId == viewModel.ItemDescriptionId`比较了项目描述 ID，但在您的视图模型中您只设置了约会 ID。如果您需要项目描述 ID，请确保将其初始化。

```
var viewModel = new AppointmentViewModel
{
     AppointmentId = appointment.AppointmentId,
     ItemDescriptionId = appointment.ItemDescriptionId
}; 
```

建议重构：

```
private IEnumerable<SearchItems> GetItems(Guid lastId = new Guid())
{
    IOrderedQueryable<ItemDescription> items= _itemDescriptionRepository.FindAll();

    if(!items.Any())
        ModelState.AddModelError("", string.Format("No active {0} entered.", Kids.Resources.Entities.ItemDescription.EntityNamePlural));

    return items
        .OrderBy(c => c.Description).Where(a=>a.IsActive == true || a.ItemDescriptionId == lastId)
        .Select(c => new SearchItems {Text = c.Description, Value = c.ItemDescriptionId.ToString()});
} 
```

当您使用 ViewModel 的所有目的都是获取必要的 Guid 时，传入 ViewModel 是很愚蠢的。然后像这样称呼它

```
viewModel.Items= GetItems(appointment.ItemDescriptionId); 
```

如果您查询仍然没有添加正确的项目，请尝试调试它。

```
var testExists = itemDescriptionRepository.FindAll().FirstOrDefault(a.ItemDescriptionId == lastId); 
```

如果您没有找到它，并且您确定 lastId 设置正确，则可能是数据库问题。

# r - 使用 R 生成向量

> ID：10340159
> 
> 赞同：0
> 
> 时间：2012-04-26T19:34:39.900
> 
> 标签：r, vector

我想问一下，如果你们中的一些人不知道解决此类问题的任何简单方法：我需要生成从集合 B (0,1,2...B) 中提取的 A 数字的所有组合，它们的总和 = C。

即如果`A=2`, `B=3`, `C=2`:

这种情况下的解决方案：

```
(1,1);(0,2);(2,0) 
```

因此向量的长度为 2 (A)，其所有项的总和为 2 (C)，每个向量元素的可能值来自集合 {0,1,2,3}（最大值为 B）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:50:03.583

```
z <- expand.grid(0:3,0:3)
z[rowSums(z)==2, ]
  Var1 Var2
3    2    0
5    1    1
7    0    2 
```

如果您想以编程方式进行扩展网格，这将起作用：

```
z <- expand.grid( rep( list(C), A) ) 
```

您需要扩展为列表，以便项目保持独立。`rep(0:3, 3)`不会返回 3 个单独的序列。所以对于 A=3：

```
> z <- expand.grid(rep(list(0:3), 3))
> z[rowSums(z)==2, ]
   Var1 Var2 Var3
3     2    0    0
6     1    1    0
9     0    2    0
18    1    0    1
21    0    1    1
33    0    0    2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:58:46.700

一个功能版本，因为我在 SO 更新之前就已经开始了：

```
A=2
B=3
C=2

myfun <- function(a=A, b=B, c=C) {
  out <- do.call(expand.grid, lapply(1:a, function(x) 0:b))
  return(out[rowSums(out)==c,])
}

> out[rowSums(out)==c,]
  Var1 Var2
3    2    0
6    1    1
9    0    2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:05:14.977

使用漂亮的`partitions()`包和更有趣的`A`、`B`和值`C`：

```
library(partitions)

A <- 2
B <- 5
C <- 7

comps <- t(compositions(C, A))
ii <- apply(comps, 1, FUN=function(X) all(X %in% 0:B))
comps[ii, ]
#      [,1] [,2]
# [1,]    5    2
# [2,]    4    3
# [3,]    3    4
# [4,]    2    5 
```

# php - 使用jquery php自动注销空闲超时

> ID：10340160
> 
> 赞同：1
> 
> 时间：2012-04-26T19:34:42.057
> 
> 标签：php, jquery, idle-timer

我搜索并找到了一些使用 jquery 设置空闲超时的示例。

1 - [Eric Hynds 演示的空闲超时](http://www.erichynds.com/examples/jquery-idle-timeout/example-mint.htm)

2 -[空闲计时器 由 paulirish](http://paulirish.com/demo/idle-timer)

3 -[用户空闲时触发事件](http://css-tricks.com/snippets/jquery/fire-event-when-user-is-idle/)/ [DEMO HERE](http://jsbin.com/uxoya)

4 -[检测用户在网页上处于活动状态还是空闲状态](http://www.maheshchari.com/detect-user-is-active-or-idle-on-web-page/)

5 -[使用 PHP 和 jQuery 进行彗星长轮询](http://www.nolithius.com/game-development/comet-long-polling-with-php-and-jquery)

6 -[检测空闲超时 javascript](http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts-javascript)

...以及其他几个类似的例子

在这些示例之间，数字 1 更适合我需要，因为我需要在 X 分钟后使用任何确认警报（logout.php 或任何 url）自动注销用户。但是这种方法不适合服务器。问题是：此 jquery 代码将 ping 发送到任何 url：keepAlive.php 在循环/池中请求 OK 文本。看萤火虫屏幕：

![在此处输入图像描述](../Images/0e0443132582ba16593e01e541e92a5b.png)

如何解决这个问题？因此，其他示例仅打印 Idle/No Idle 而不能使用警报确认和自动注销（logout.php 或任何 url）现在真的更好的方法来选择使用 jquery/Php 的空闲超时？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:45:59.513

我在 head 部分使用元刷新元素在 X 秒后将用户自动引导到注销页面。以下将在用户停留在同一页面 20 分钟后自动将用户发送到注销页面：

```
<meta http-equiv="refresh" content = "1200; url=http://www.site.com/user/logout"> 
```

这很有效，（大部分）支持跨浏览器，不依赖于启用的 JavaScript，并且很容易实现。

如果您的网站的用户长时间停留在同一页面上（例如，通过 JS 进行交互），则此解决方案将不适合您。它也不允许在重定向发生之前运行任何 JS 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-29T19:15:39.533

这是我使用 JavaScript 和 jQuery 构建简单的自动注销功能的方法。此脚本用于在 25 分钟内未检测到鼠标移动时自动转到注销页面的网页。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script type="text/javascript" language="javascript">
  var idleMax = 25; // Logout after 25 minutes of IDLE
  var idleTime = 0;

  var idleInterval = setInterval("timerIncrement()", 60000);  // 1 minute interval    
  $( "body" ).mousemove(function( event ) {
      idleTime = 0; // reset to zero
});

// count minutes
function timerIncrement() {
    idleTime = idleTime + 1;
    if (idleTime > idleMax) { 
        window.location="LogOut.php";
    }
}       
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-20T02:36:46.647

简单而简单

```
 var autoLogoutTimer;
        resetTimer();
        $(document).on('mouseover mousedown touchstart click keydown mousewheel DDMouseScroll wheel scroll',document,function(e){
            // console.log(e.type); // Uncomment this line to check which event is occured
            resetTimer();
        });
        // resetTimer is used to reset logout (redirect to logout) time 
        function resetTimer(){ 
            clearTimeout(autoLogoutTimer)
            autoLogoutTimer = setTimeout(idleLogout,5000) // 1000 = 1 second
        } 
        // idleLogout is used to Actual navigate to logout
        function idleLogout(){
            window.location.href = ''; // Here goes to your logout url 
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-11T05:26:41.900

```
<script>    
var idleMax = 5;  (5 min)
var idleTime = 0;
(function ($) {

    $(document).ready(function () {

        $('*').bind('mousemove keydown scroll', function () {
            idleTime = 0; 
            var idleInterval = setInterval("timerIncrement()", 60000); 
       });
        $("body").trigger("mousemove");

    });
}) (jQuery)
function timerIncrement() {
     idleTime = idleTime + 1;
     if (idleTime > idleMax) { 
         window.location="Your LOGOUT or Riderct page url here";
     }
 }
</script> 
```

# android - 安卓。异常处理

> ID：10340164
> 
> 赞同：1
> 
> 时间：2012-04-26T19:34:51.543
> 
> 标签：android, exception, exception-handling, stack-trace, printstacktrace

如果用户在使用我的应用程序时发生异常，我希望能够确定异常发生的确切位置。我想做一些类似的 ti printStackTrace() 方法。（所以这是在构建模式，而不是调试模式）

目前，我已经将所有类中的几乎所有方法都放在了 try-catch 语句中（每个方法都有一个包含所有指令的 try-catch 语句），此时我可以显示“树”或堆栈发生异常时的方法。但是有没有办法确定某事物的行号以更准确地指示异常发生在方法内部的哪个位置？类似于使用 printStackTrace() 时显示的内容。

我并没有真正使用异常处理，这样做的最佳实践是什么并且可以做到？

**编辑**

还有一件事。当我在构建模式下使用 printStackTrace() 时，它在哪里显示内容，因为 Logcat 不可用？我可以检索该信息并对其进行处理吗？ **或者** 更好的是，我可以在构建模式下使用 getStackTrace() 并将那里的内容转换为 String 并可能将其输出到某个地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:39:28.603

所有未由您的代码处理并导致您的应用程序在发布模式下崩溃的异常都将出现在您的应用程序附近的 android 开发者控制台中。

为此，您需要[回溯混淆的堆栈跟踪。](http://developer.android.com/guide/developing/tools/proguard.html#decoding)

关于异常处理：例如，我建议您阅读[此](http://tutorials.jenkov.com/java-exception-handling/index.html)内容。如果你用 try/catch 块包围你的所有代码，那么你在异常处理方面犯了一个错误。

异常处理比这更微妙，并且经常受到设计考虑的影响（无论是在本地处理异常还是将它们返回给调用者）。

**总结一下**：在你的应用程序的核心：不要处理异常，而是抛出它们或让它们被抛出，使用你的方法签名的 throws 子句。在上层，更靠近 UI，使用 try/catch 处理异常，如果发生错误，请确保您的应用处于稳定状态并向用户显示一些有用的消息。

**更多细节（但不是那么多）**：

*   在数据库层：抛出异常。您仍然可以捕获它们以记录它们，但抛出或重新抛出它们以告诉调用者出了点问题。
*   在业务层：捕获它们，确保您的业务/域模型处于稳定状态并从错误中恢复，然后将它们返回给调用者。
*   在 UI 层：捕获异常并向用户显示一些消息。

# tfs-sdk - 如何在 WinForms 应用程序中“托管”工作项？

> ID：10340166
> 
> 赞同：1
> 
> 时间：2012-04-26T19:35:04.043
> 
> 标签：tfs-sdk, tfs-workitem

过去我遇到过几个在 VS2010（或 MTM）之外运行但在 VS2010 中显示的 TFS 工作项 100% 的应用程序，好像有一种方法可以让 WorkItem 包括其所有控件作为一个完整的'控制'并将其放在我自己的应用程序中。

有谁知道这是怎么做到的吗？我目前正试图记住我在哪里看到的，但也许有人知道我在说什么，并且可以为我指出正确的方向 TFS 客户端 api 明智！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:55:34.237

使用`Microsoft.TeamFoundation.WorkItemTracking.Controls.WorkItemFormControl`类。[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.controls.workitemformcontrol%28v=vs.90%29.aspx)上的文档。

这个类有一个`Item`type的属性`WorkItem`，设置对象就可以了。如果你想要一个使用它的应用程序，我做了[这个](http://wicreator.codeplex.com/)，去获取[源代码](http://wicreator.codeplex.com/SourceControl/changeset/changes/71408)，它位于 MainForm.cs 文件的 CegWICreator 项目中。如果我没记错的话（这个应用程序很旧），这个控件在一些不同的地方使用得很好。

# mysql - DBVisualizer 不显示 SP 源代码

> ID：10340170
> 
> 赞同：0
> 
> 时间：2012-04-26T19:35:09.830
> 
> 标签：mysql, stored-procedures, hosting, ip, dbvisualizer

我正在对我的共享托管数据库使用 DBVisualizer。

如果我从不同的 IP 地址登录，我无法看到实际的 SP 代码，而不是我创建的 SP 的那个。

有任何想法吗？我无法在 CPanel 中找到任何可能改变此行为的选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:57:37.947

存储过程的“定义者”是什么？您的用户帐户可能没有来自第二个 IP 地址的权限。如果您没有“SUPER”权限，则不能为“DEFINER”指定任何其他值，而不是您当前的用户帐户，如果您从另一个 IP 地址登录，则无法保证它使用的是同一个帐户.

所以尝试授予存储过程更多的权限。

此外，您可能希望查看 MySQL 的“SQL SECURITY INVOKER”选项。 [http://dev.mysql.com/doc/refman/5.0/en/stored-programs-security.html](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-security.html)

# c - RPC 函数返回结构；客户端中的垃圾值

> ID：10340172
> 
> 赞同：1
> 
> 时间：2012-04-26T19:35:12.950
> 
> 标签：c, rpc

问题：在 Solaris RPC 中，我从服务器返回一个结构。我已经宣布它是静态的。

但是在客户端中，一些值是 00 而不是值。我正在打印之前的值

服务器返回调用，它的罚款。但是相同的打印语句在客户端中给出了垃圾值。

```
 struct enc_request{
            int enc_len;
            unsigned char enc_msg[700];
    };

    in server proc:
    static enc_reply reply_e;
    return (&reply_e); 
```

任何人都可以请给出一些关于什么是错的想法。

output: original reply send 114 105 107 104 051 089 076 069 097 083 051 100 053 078 066 054 054 109 106 106 077 055 102 056 114 043 121 103 068 103 073 115 109 043 087 108 111 080 118 052 110 080 114 047 065 104 097 097 051 084 068 080 102 065 054 054 080 080 114 073 116 106 106 106 106 106 084 084 084 110 109 088 076 116 110 070 070 070 087 087 104 104 104 10431043 111 104 074 074 074 074 066 052 0666666666666666666666666666666666666666666666666666666666666666666666666666666666666666661999999ENEMON 043

reply received 114 105 107 104 051 089 076 069 097 083 051 100 053 078 066 054 054 109 106 106 077 055 102 056 114 043 121 103 068 103 073 115 109 043 087 108 111 080 118 052 110 080 114 047 065 104 097 097 051 084 068 080 102 065 054 080 114 073 116 106 084 084 110 109 088 076 116 110 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:51:32.370

我不知道整个情况，但是在发出和接收 RPC 请求时，数据的大小可能不正确，产生零。服务器和客户端上是否存在标准化大小的机制`struct enc_reply`？我见过类似的情况，其中 32 位系统将数据发送到 64 位并用于`sizeof()`确定结构的大小，这会在不同的架构中产生不可预测的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:26:29.417

与其自己编写服务器和客户端代码，不如使用 rpcgen 的优势。- 使用选项 -a 编译 .x 文件：

```
 ~$ rpcgen -a filename.x 
```

. - 客户端和服务器文件将自动生成。- 在服务器文件中，生成名称为“result”的类型的静态变量 - 将结构成员分配给结果的成员。- 在客户端，提取它们。

问题将得到解决。试试这个！

# database-design - 多对多的亲子关系

> ID：10340174
> 
> 赞同：1
> 
> 时间：2012-04-26T19:35:35.177
> 
> 标签：database-design, many-to-many, parent-child

我正在尝试在 SQL Server 2008 中构建父子关系，但无法使其正常工作。

1.  有 Presets（根级节点），然后有 PresetItems（子节点）。

2.  一个 Preset 只能包含 PresetItems，但 PresetItems 可以包含其他 PresetItems 作为子节点。

3.  可以构建许多 Presets，它们包含的 PresetItems 不同。

4.  PresetItems 可以在许多不同的 Preset 中重复使用，以构建不同的 Preset 配置。

其使用方式是动态创建报告。预设是报告的名称。PresetItems 是报告的各个部分。这些部分（PresetItem）就像报告的一部分，例如“Year to Date Graph”。此 PresetItem 将包含文本说明，然后可以添加另一个包含图形的 PresetItem 作为此 PresetItem 部分的子项。

这个过程一直持续到报告的所有部分都组装完毕。

这是一个插图：

```
Client "A" Report (Preset 1)
   -- Overview (PresetItem 1) - contains boilerplate and maybe some dynamic data
   -- YTD Report (PresetItem 2) - contains boilerplate
      -- YTD Graph (PresetItem 3) - contains a graph created dynamically from SQL Server data
   -- Core References (PresetItem 4) - contains a table of dynamic data
   -- Summary (PresetItem 5) - contains boilerplate

Client "B" Report (Preset 2)
   -- Overview (PresetItem 1) - contains boilerplate and maybe some dynamic data
   -- Monthly Balance Sheet (PresetItem 8) - contains dynamic data
   -- YTD Report (PresetItem 2) - contains boilerplate
      -- YTD Graph (PresetItem 3) - contains a graph created dynamically from SQL Server data
   -- Summary (PresetItem 5) - contains boilerplate 
```

... ETC ...

您会注意到一些 PresetItem 可以组合成许多不同的报告或预设。

这是我构建数据库表的方式，但我无法创建父子关系，因为多对多表中有两个主键。

```
Preset Table
-- Id (key)
-- Name

PresetItem Table
-- Id (key)
-- Name
-- Description
-- DataResource
-- (other columns)

PresetPresetItem (many-to-many table)
-- PresetId (key)
-- PresetItemId (key)
-- ParentId
-- SortOrder 
```

我是否在正确的轨道上获得我正在寻找的结果？我无法在 PresetPresetItem 表中创建 PresetItemId 和 ParentId 之间的父子关系，因为它抱怨我遗漏了另一个主键 (PresetId)。

我确实明白它为什么会这样，但我现在不知道如何解决它。如果我对这一切都错了，请告诉我。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:13:02.680

有几种方法可以解决这个问题。

可能最简单的一种是将每种“类型”的连接拆分为单独的表：

![在此处输入图像描述](../Images/8bcdfd88fe54480b792808316d8901d8.png)

* * *

或者，您也可以考虑从公用表继承`Preset`and ，然后在*该*`Item`表的顶部实现图形边缘。但是，这对于您的需求可能过于灵活：可能是另一个甚至的孩子，这可能不是您想要的。*`Preset``Preset``Item`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:49:42.463

我没有使用 SQL Server 的经验，所以我将这里的讨论限制在数据库设计上。

在我看来，这就是你需要去的地方：

*如果 PresetItems 可以以严格的分层方式*引用自己，则第三个表是不必要的。在这种情况下，只需给 PresetItems 一个外键返回给它自己。如果不是这样，我将不得不考虑如何实现多对多自我关系。

但是，如果这个假设是错误的，那么你可能是在正确的轨道上！

像这样的东西：

```
Presets
-------
presetId (PK)

PresetItems
-----------
presetItemId (PK)
presetIdFk (FK to Presets)
presetItemIdFk (FK to PresetItems (self)) 
```

这允许一个 Preset 到多个 PresetItems，并且 PresetItems 将被组织为一棵树。

如果 PresetItems 不代表分层数据，你应该这样做：

[多对多自引用表](https://stackoverflow.com/questions/1133104/many-to-many-self-referential-table)*

# c# - 存储库/服务模式和数据一致性

> ID：10340175
> 
> 赞同：0
> 
> 时间：2012-04-26T19:35:37.827
> 
> 标签：c#, model-view-controller, oop, repository-pattern

**在使用存储库和服务模式的应用程序中，如何确保始终调用服务层而不是直接调用存储库？**

例子 ：

```
class OrderRepository
{
    void CreateOrder(Order o)
    ...
}

class OrderService
{
    void CreateOrder(Order o)
    {
        //make some business logic tests
        ... 

        //call repository
        _orderRepository.CreateOrder(o);
    }
} 
```

我看到两个问题：

*   程序员可能会直接调用存储库，因为它不知道服务的存在（有时它不像本示例中那样简单（1 个服务 = 1 个具有相同方法名称的存储库）。某些应用程序没有很好的文档记录。或者有人赶时间可以忘记检查对应的服务是否存在（错误）。

*   完全不同：很久以前有人创建了一些直接使用订单存储库的视图+控制器。那时不需要做一些业务逻辑检查或额外的操作，只有订单库存在（因为那里根本不需要）。如果稍后在创建订单时需要一些额外的操作，则会创建一个服务。问题是所有调用旧存储库的控制器都需要更改。存储库原则/想法（以及分层代码）是否应该使各个部分相互独立？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:38:34.230

[静态分析](http://en.wikipedia.org/wiki/Static_program_analysis)工具可以在这方面提供帮助。

[nDepend](http://www.ndepend.com/)是一个商业工具，可以集成到您的构建过程中，并在这种情况下出错（任何非服务类直接调用存储库类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:47:30.263

您可以构建您的解决方案，以便所有存储库和服务都在各自的项目中，例如。`Repositories`和`Services`。

唯一应该参考的项目`Repositories`是`Services`. 这样，其他项目将无法访问存储库。当然，没有什么可以阻止开发人员将存储库项目包含到控制器项目中，但希望此时他们会问自己为什么不首先包含它。

# java - 为 ImageView 赋值

> ID：10340178
> 
> 赞同：0
> 
> 时间：2012-04-26T19:35:52.447
> 
> 标签：java, android, imageview

我是android开发的新手。我一直在为我的学校项目开发这个应用程序。该应用程序基本上是一个计算器，用于计算家用电器的能源消耗成本。在我的屏幕上，我的 viewFlipper 中有一堆家用电器的图像视图，因此用户可以浏览图像以选择他想要计算的电器。我的问题是，如何以有效的方式为这些 imageViews 分配整数值（例如设备的瓦特或其规格），以便应用程序可以根据所选图像计算能耗？我使用条件语句，但它似乎编码太多并且浪费内存，因为我有超过 40 个图像视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:42:50.160

考虑创建一个扩展 ImageView 的类。然后，您可以将对象传递给您的自定义类，例如，将一个对象（存储所有与能量相关的数据）传递给您的自定义 ImageView 类的构造函数。例如，

```
// The CustomView "IS-A" ImageView, so you can perform ImageView operations
// on your custom object. You can even choose to override ImageView methods.
public class CustomView extends ImageView {
    Object myObj;

    public CustomView(Context context, Object myObj) {
        super(context);
        this.myObj = myObj;
    }
} 
```

或者你可以在 ImageView 上设置标签。

使用 40 个 ImageView？如果没有正确处理内存管理，我预见到 OutOfMemoryError 问题。当心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:41:10.060

您可以为自己的目的将对象分配给视图

```
Double energy = Double.valueOf(123.44);
imageView.setTag(energy);
...
Double energy = (Double) imageView.getTag(); 
```

这类似于ViewGroups 用于存储对子视图的引用的[ViewHolder模式。](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/)

# jquery - 使用 Jquery 获取文本框 HTML 和值

> ID：10340180
> 
> 赞同：0
> 
> 时间：2012-04-26T19:35:58.733
> 
> 标签：jquery, html

我在 div 中有一个文本框：

```
<div id="divTest">
    <input type="text" id="txtText">
</div> 
```

假设用户在文本框中输入了一个单词，我想要一个 jquery 方法来获取**带有用户输入的值**的文本框 HTML 。我尝试了以下代码：

```
$('#btnTest').click(function(){
    alert($('#divTest').html());
    e.preventDefault();
});​ 
```

但这只会给我文本框的 HTML，而不是 HTML + 文本框中文本的值。

[这](http://jsfiddle.net/GYwf3/)是问题的jsFiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:45:53.663

```
var html_input = $("#divTest").html();
var val = $("#txtText").val();
var input = html_input.slice(0,-1) + " value='" + val + "'>";
alert(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:38:24.767

```
var html = $('#divTest').html();
var value = $('#divTest').val();
var message = html + value; 
```

# php - AJAX 返回数据淡入现有元素

> ID：10340183
> 
> 赞同：2
> 
> 时间：2012-04-26T19:36:15.353
> 
> 标签：php, jquery, ajax

在我的网站上，我有一个更新表单，提交时会更改我的数据库。然而，我想做的是拥有所有包含旧值的元素，

***AJAX***

```
// UPDATE 
     $(".bill-upd-submit").click(function() {
          var elem = $(this);
          $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {
             //INSERT INTO OLD VALUES
          });
    }); 
```

***PHP***

在我的 PHP 中，我尝试了以下方法，但没有成功，以前有没有人这样做过，或者可以就我可能出错的地方给我建议？

```
 echo "elem.closest('li').find('.cost').html('');"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:39:06.777

您不需要让服务器提供 jQuery 代码。您可以将它输入到回调函数中，您可以在其中`//INSERT INTO OLD VALUES`添加 -comment。

```
$.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {
  //We will use the "data"-variable that was passed to this function by jQuery.
  elem.closest('li').find('.cost').html(data);
}); 
```

在上面的代码中，“数据”变量包含服务器返回的内容。因此，对于该解决方案，请确保`"update_bill.php"`它将返回您要插入的 HTML `'li .cost'`。

# php - 非万维网。网站版本不显示

> ID：10340186
> 
> 赞同：2
> 
> 时间：2012-04-26T19:36:19.167
> 
> 标签：php, dns

我目前在 ssaib.uk.com 上有一个网站，但是当您尝试访问 www.ssaib.uk.com 上的网站时，您什么也得不到。这不取决于域传播，我不知道为什么要这样做。我读过提到它可能是 xcache 和 eaccelerator 之间的冲突，但是我已经关闭了 eaccelerator 没有结果。任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:59:41.987

如果 DNS 正在解析但网站未显示，则可能是 Web 服务器配置为仅响应某些主机名 - 例如 Apache 具有具有不同文档根目录的“虚拟主机”，例如可以响应“ example.com”和另一个到“somesite.com”，即使它们解析为相同的 IP。

查看您的网络服务器设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:38:32.670

这是由于 DNS 设置。您需要不带 www. 的域的记录，通常在域管理面板中以 @ 或空白或 * 表示。

# symfony1 - symfony：永久链接（在 url 中隐藏 id）

> ID：10340188
> 
> 赞同：0
> 
> 时间：2012-04-26T19:36:21.867
> 
> 标签：symfony1, doctrine, permalinks

我已经阅读了有关永久链接的段落（隐藏主键并用重要的字符串替换它们），但我不明白这段代码是如何工作的：

```
public function executePermalink($request)
  {
    $article = ArticlePeer::retrieveBySlug($request->getParameter('slug');
    $this->forward404Unless($article);  // Display 404 if no article matches slug
    $this->article = $article;          // Pass the object to the template
  } 
```

这段代码是典型的推进，对吗？教义有类似的东西吗？我必须编写retrieveBySlug() 函数吗？你有一个我可以理解如何写的例子吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:51:22.090

在 Doctrine 中，您可以使用一个名为“Sluggable”的扩展程序。

要使其工作，您必须更改您的 schema.yml 并添加“Sluggable”扩展名：

```
# config/doctrine/schema.yml
Article:
  actAs:
    Timestampable: ~
    Sluggable:
      fields: [name]
  columns:
    name:
      type: string(255)
      notnull:  true 
```

在你的 routing.yml 中设置一个 DoctrineRoute

```
# apps/frontend/config/routing.yml
category:
  url:      /article/:slug
  class:    sfDoctrineRoute
  param:    { module: article, action: show }
  options:  { model: Article, type: object } 
```

然后在您的操作代码中，您可以执行以下操作：

```
public function executeShow(sfWebRequest $request)
{
    $this->article = $this->getRoute()->getObject();
    $this->forward404Unless($article);  // Display 404 if no article matches slug
    $this->article = $article;          // Pass the object to the template
} 
```

更改架构后，不要忘记运行学说：构建以重新创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:31:43.517

现在工作正常！

```
# apps/frontend/config/routing.yml
opera_slug:
  url:   /:sf_culture/opere/:operaslug.html
  class:    sfDoctrineRoute
  param: { module: opera, action: permalink }
  options:  { model: Opera, type: object }
  requirements:
    sf_culture: (?:it|en|es|fr)

  public function executePermalink(sfWebRequest $request)
  {  
    $this->opera = $this->getRoute()->getObject();
    $this->forward404Unless($this->opera);  // Display 404 if no article matches slug
    //$this->opera = $opera;          // Pass the object to the template  
  } 
```

如您所见，我修改了最后两行 executePermalink()，因为我在使用您的函数时出错

# maven - 如何创建空目录作为 distribution.xml 的一部分？

> ID：10340190
> 
> 赞同：2
> 
> 时间：2012-04-26T19:36:38.957
> 
> 标签：maven

如何创建一个空目录以与我的项目打包？

说如果我要移动东西，我可以通过

```
 <fileSet>
        <directory>target</directory>
        <outputDirectory>bin</outputDirectory>
        <includes>
            <include>${project.artifactId}*.jar</include>
        </includes>
        <filtered>true</filtered>
    </fileSet> 
```

但是，如果我想要的只是创建一个具有某些权限的空目录怎么办？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:59:13.313

如果有人想知道，以下技巧将起作用。

选择一个现有目录`cfg`和..

```
 <fileSet>
        <directory>src/main/resources/cfg</directory>
        <outputDirectory>log</outputDirectory>
        <directoryMode>0755</directoryMode>
        <excludes>
            <exclude>*</exclude>
        </excludes>
        <filtered>false</filtered>
    </fileSet>

    <fileSet>
        <directory>src/main/resources/cfg</directory>
        <outputDirectory>output</outputDirectory>
        <directoryMode>0755</directoryMode>
        <excludes>
            <exclude>*</exclude>
        </excludes>
        <filtered>false</filtered>
    </fileSet> 
```

# java - Hibernate：获取脏实体的持久状态

> ID：10340191
> 
> 赞同：0
> 
> 时间：2012-04-26T19:36:40.610
> 
> 标签：java, hibernate

采用以下代码：

```
MyEntity e = dao.getEntity(1);
e.setProp1(someVal);
e.setProp2(otherVal);

MyEntity eOld = dao.getEntity(1); 
```

如果我这样做，那么 e 将得到更新（因为 Hibernate 检测到它是脏的）并且 eOld 将具有相同的属性值（prop1，prop2）a e。有没有办法获得这个脏实体的持久状态（因为它在数据库中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:39:30.850

尝试：

```
<property name="defaultAutoCommit" value="false" /> 
```

或替代使用`detach`并在准备好坚持时重新连接。

```
dao.detach(e);
...
e.setProp1("AnotherVal"); //not propatated to the database
dao.merge(cat);  // update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:55:15.063

其实我自己可能已经找到了解决方案......

我已经尝试过驱逐 eOld 但这并没有这样做，因为我需要在检索 eOld 之前驱逐 e 并且在比较（用于审计）之后重新将 e 重新附加（合并）到会话。它似乎在任何情况下都有效。

# wpf - WPF 中的 Windows 关闭按钮

> ID：10340195
> 
> 赞同：1
> 
> 时间：2012-04-26T19:36:46.333
> 
> 标签：wpf

我目前正在使用 Caliburn 框架开发 WPF 应用程序。在应用程序窗口的右上角，有一个窗口关闭（X）按钮。我想捕捉 Windows CLOSE 按钮的事件。但是，当应用程序窗口关闭时，无论有什么按钮关闭应用程序窗口，都会开始淡出。此外，当应用程序关闭时，如果有任何更改，应用程序将询问用户是否要保存更改。但是，我只能设法让我的应用程序中的 EXIT 按钮弹出 SAVE CHANGES 消息，然后开始淡出，但 Windows CLOSE(X) 按钮不会发生这种情况。当我按下 windows CLOSE(X) 按钮时，淡出将首先开始*（理论上，这不应该发生，它应该先显示 SAVE CHANGES 消息，然后再显示）*。在淡出期间，会出现 SAVE CHANGES 消息。最后，应用程序崩溃，因为应用程序无法关闭，因为消息仍然显示在应用程序中。有谁知道解决这个问题的任何方法？以下是我用于该问题的代码。

wpf 视图的代码隐藏 - 我用它来捕捉 WINDOWS CLOSE 按钮的事件：

```
 protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
        {
            if (!closed)
            {
                e.Cancel = true;
                FormFadeOut.Begin();
                closed = true;
            }
            base.OnClosing(e);
        }

This code is used to close the application when the fadeout ends: 
```

私人无效FormFadeOutAnimation_Completed（对象发送者，EventArgs e）{

```
 this.Close();

} 
```

在我的 xaml 中，我使用此代码来调用函数以在关闭时弹出 SAVE CHANGES 消息：

```
cal:Message.Attach="[Event Closing] = [Action CloseApp2()]" 
```

在我的视图模型中，上面的 xaml 代码调用了以下函数：

```
 public void CloseApp2()
        {

          //  isClosing = true;
            events.Publish(new IsClosingEvent());
          //  events.Publish(new ClearItemsEvent());
          //  events.Publish(new SwitchTimerOffEvent());
          //  Thread.Sleep(2000);

        } 
```

当发送“IsClosingEvent”事件时，如果用户进行了任何更改，将出现 SAVE CHANGES 消息。

有谁知道如何解决这个问题？

感谢您提前提供任何帮助。

查尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:12:22.167

使用 Window.Closing 事件而不是

```
protected override void OnClosing(System.ComponentModel.CancelEventArgs e) 
```

# ruby-on-rails - Rails as_json 问题 - 如何有效地包含嵌套对象？

> ID：10340199
> 
> 赞同：10
> 
> 时间：2012-04-26T19:36:55.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我遇到了一个问题，我正在使用 as_json 方法，以及如何有效地返回 JSON 中*的*对象以及它的 belongs_to 对象作为 JSON，其中 belongs_to 对象有它自己的 belongs_to 对象。代码可能会更好地解释它。

不工作的方式

**警报类**

```
class Alert < ActiveRecord::Base
    belongs_to :message
    # for json rendering
    def as_json(options={})
        super(:include => :message)
    end
end 
```

**消息类**

```
 def as_json(options={})
    super( methods: [:timestamp, :num_photos, :first_photo_url, :tag_names],
           include: { camera: { only: [:id, :name] },
                      position: { only: [:id, :name, :address, :default_threat_level ]},
                      images: { only: [:id, :photo_url, :is_hidden]} })
  end 
```

第一次设置的问题是当我有一个 Alert 对象并调用

```
alert.as_json() 
```

我从 Alert 中获取所有属性，从 Message 中获取所有属性，但没有从 Message 中获取我想要的其他属性，例如 Camera、Position 等。

这是“它正在工作，但可能不是正确的设计方式”

**警报类**

```
class Alert < ActiveRecord::Base

    belongs_to :message

    # for json rendering
    def as_json(options={})
        super().merge(:message => message.as_json)
    end
end 
```

**消息类**

```
 # for json rendering
  def as_json(options={})
    super( methods: [:timestamp, :num_photos, :first_photo_url, :tag_names])
          .merge(:camera => camera.as_json)
          .merge(:position => position.as_json)
          .merge(:images => images.as_json)
  end 
```

在第二个设置中，我得到了我想要的所有消息的嵌套属性。

我的问题是，我是否缺少一些 Rails 约定来正确执行此操作？似乎会有/应该有更简单的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-25T02:22:58.137

对我来说最好的答案是使用`serializable_hash`. @kikito 在他的评论中谈到了这一点，但有一个错字导致它无法正常工作。不是`serialized_hash`，是`serializable_hash`。

从字面上看，只需 find + replace `as_json`with `serializable_hash`，这个错误就消失了。（它在今天的 Rails 4.0.2 中仍未修复）。您还可以在以后更轻松地实现 XML API 中获益（有些人仍在使用这些！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:11:46.550

您使用的是哪个版本的 Rails？这是旧版本 Rails 中的一个已知错误，据说已通过[此 pull request](https://github.com/rails/rails/pull/2200)修复。你的语法对我来说是正确的，所以也许这是你的问题？

顺便说一句，您可能还想查看 Jose Valim（Rails 核心成员）提供的新的[active_model_serializers](https://github.com/josevalim/active_model_serializers)。它至少可以让您以更优雅的方式解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:54:38.187

我建议您看一下 RABL（代表 Ruby API Builder 语言）gem（[railscast](http://railscasts.com/episodes/322-rabl)，[github](https://github.com/nesquena/rabl/)）。它为您提供了一个 DSL，用于在模板中定义 JSON（以及 XML）响应的结构（就像 Haml 或 CoffeeScript 一样）。它还支持部分。

# apache - Apache 重写规则 - 防止重写的 URL 出现在浏览器 URL 栏中

> ID：10340205
> 
> 赞同：2
> 
> 时间：2012-04-26T19:37:21.217
> 
> 标签：apache, mod-rewrite, url-rewriting

我有一个正在寻找特定 URI 的重写规则。当它匹配特定的 URL 时，它会使用正确的文件路径重写它，以便可以找到所需的内容。然后它将协议更改为 HTTPS 并允许请求通过。

我有两个问题；

1.  我不希望重写的路径出现在用户浏览器中 - 我想维护虚名 url
2.  我确实希望 HTTPS 协议向用户表明他们正在通过安全连接访问该站点。

我尝试了几个选项，但没有成功。如果我包含 [R] 标志，则 URL 和协议保持不变，但这不是预期的效果

关于我如何实现这一目标的任何建议？

这是我的规则；

```
RewriteMap redirectsIfSecure txt:/myserver/content/secure_urls.txt
RewriteCond ${lowercase:%{REQUEST_URI}} ^/(.+)$
RewriteCond ${redirectsIfSecure:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^(.*)$ https://myserver.com${redirectsIfSecure:%1} [PT] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:44:18.023

从 mod_rewrite 文档：

> 如果指定了绝对 URL，则`mod_rewrite`检查主机名是否与当前主机匹配。如果是这样，则方案和主机名将被删除，并且生成的路径将被视为 URL 路径。否则，将对给定 URL 执行外部重定向。要强制将外部重定向回当前主机，请参见下面的 [R] 标志。

如果您将请求重写为与您的 不匹配的完全限定 URL（即以 , 等开头的任何内容），`http://`则会发出HTTP重定向，这将导致客户端浏览器从新位置请求资源。`https://``ServerName``mod_rewrite`

如果您不想在 http 和 https 之间切换，则可以使用代理规则（`P`标志）让 Apache 代表客户端发出请求并返回结果，从而屏蔽重写的 URL。

但是，如果您尝试从 http 升级到 https（或相反），这将*始终*需要客户端重定向。

# c# - 使用 HttpContext 下载文件时打开文件

> ID：10340213
> 
> 赞同：0
> 
> 时间：2012-04-26T19:37:58.503
> 
> 标签：c#, asp.net, httpcontext

我有一个处理程序，当链接被点击时我会调用它。此处理程序从数据库中获取文件内容并将内容写入 context.Response。我想打开这个文件以及下载它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:39:47.720

不。它不是。

如果它是一个位图文件 - 那么可能是因为它不必完全下载......

但忘了它。这不是正确的方法。

您在下载文件时无法打开文件 - 它是一个文件系统 - 限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:55:07.833

您无法控制浏览器的行为。它将在浏览器中打开或显示打开/保存对话框。

您可以尝试使用文件的 HTML 视图呈现自定义页面，并自动触发从该 HTML 页面进行的第二次下载以强制打开/保存对话框。

# asp.net - 如何将 MVC3 WebApp 部署到 Windows Azure

> ID：10340214
> 
> 赞同：6
> 
> 时间：2012-04-26T19:38:06.507
> 
> 标签：asp.net, asp.net-mvc-3, razor, azure

如何将 MVC3 Web 角色部署到 Windows Azure？大多数教程似乎都是关于部署 ASP.NET Web 角色而不是 MVC3 的。

谁能给我一个链接/提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:48:45.683

回到过去，MVC3 不支持开箱即用，因为需要您手动添加适当的 DLL（或作为启动任务安装）。这些天来，MVC dll 都使用 MVC3 模板，因此在 asp.net 和 asp.net mvc 部署之间，您需要做什么没有区别。基本的 Web Roles 和 Worker 角色只是 Windows 2008 Server VM，部署过程相同。开始时，最重要的部分是确保您的存储连接字符串指向“真实”存储而不是开发存储（例如您的诊断连接字符串）。此外，会话状态默认使用 SQLExpress，它不在 Windows Azure 中运行，因此您需要在 web.config 中使用 SQL Azure 数据库（加上适当的连接字符串），

# javascript - 将数组附加到 jquery 模板

> ID：10340216
> 
> 赞同：0
> 
> 时间：2012-04-26T19:38:11.047
> 
> 标签：javascript, jquery, jquery-templates

我正在尝试使用 jquery 模板在我的网页中附加一个数组 items[]。

```
items=[{'name' => 'test',
        'values' => 
           [
            {
            'ver' => 2,
            'count' => 469,
           },
           {
            'ver' => 2,
            'count' => 445,
            }]},

        {'name' => 'test2',
        'values' => 
           [
           {
            'ver' => 4,
            'count' => 604,
            },
           {
            'ver' => 5,
            'count' => 469,
            }]}] 
```

使用的附加代码是`$("#div").tmpl(items).appendTo("#divTable");`

我已经指定 ${name} 来获取打印的输出水果和蔬菜，因为 name 是另一个数组，我如何打印它？我用过 ${values.ver}，它不工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:59:13.297

要遍历 a 中的数组`jQuery.tmpl`，可以使用[`{{each}}`](http://api.jquery.com/template-tag-each/)-template-language-construct 或[`{{tmpl}}`](http://api.jquery.com/template-tag-tmpl/).

"Each" 只会遍历每个项目，自动将其放入`$index`and中`$value`。一个例子：

```
${name} <br />
{{each values}}
  ver: ${$value.ver} <br />
  count: ${$value.count} <br />
{{/each}} 
```

或者，“tmpl”将允许您创建一个新模板，专门用于子阵列。

# python - 如何在 Python 中为高分表排序这些行

> ID：10340225
> 
> 赞同：4
> 
> 时间：2012-04-26T19:38:33.633
> 
> 标签：python

我在文本文件中有以下内容：

```
('bob', '10')
('Ben', '10')
('Ben', '9')
('Ben', '8')
('Ben', '2')
('Ben', '6')
('Ben', '5')
('Ben', '5')
('Ben', '3')
('Ben', '2') 
```

我想重新排序它，以便按数字向下排序，以便我可以在高分表中打印它们，但是我不知道如何做到这一点。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:40:31.280

您可以使用[`ast.literal_eval`](http://docs.python.org/library/ast.html#ast.literal_eval)来解析元组，然后将它们传递给`sorted`：

```
import ast
from operator import itemgetter

def parse_item(s):
  name, score = ast.literal_eval(s)
  return name, int(score)

with open("infile", "r") as infile:
  items = [parse_item(line.strip()) for line in infile]

for item in sorted(items, key=itemgetter(1), reverse=True):
  print item 
```

或者简洁但令人困惑的方式：

```
print ''.join(sorted(open('infile'), key=lambda l: -int(ast.literal_eval(l)[1]))), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:40:21.933

如果`l`是元组列表，以下将进行排序：

```
sorted(l, key=lambda(name,score):int(score), reverse=True) 
```

阅读文件留给读者作为练习:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:45:54.767

如果您甚至怀疑您的高分列表在将来的某个时候会变得更加复杂，您可能应该停止使用元组列表，而改用专门制作的类实例列表。

无论如何，如果你坚持使用元组，只需将 str 数字转换为 int，并反转元组的两个字段的顺序以获得可以排序的东西。

一个类可能看起来像：

```
class Highscore:
   def __init__(self, name, score):
      self.name = name
      self.score = score

   def __cmp__(self, other):
      return -cmp(self.score, other.score) 
```

# ruby-on-rails - Rails远程表单通过javascript提交

> ID：10340229
> 
> 赞同：2
> 
> 时间：2012-04-26T19:38:36.877
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3

我正在尝试创建一个非常小的简单表单来编辑单个复选框，并在修改复选框时使用 AJAX 自动提交。这是代码，[其他 SO 问题](https://stackoverflow.com/questions/8570824/submit-a-rails-remote-form-with-javascript)暗示应该有效：

```
 <%= form_for(workitem, :remote => true) do |f| %>
      <%= f.check_box :is_complete, :onchange => 'this.form.submit()' %>
    <% end %> 
```

问题是这会导致整个页面的 HTML 提交，而不是 AJAX 提交。如何触发 AJAX 提交？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T22:58:12.643

这似乎有效：

```
$(this.form).submit(); 
```

好'ol jquery来救援。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-21T05:20:15.763

这只是在 Rails 方式中：

```
 $("#myform").trigger('submit.rails'); 
```

在这里找到它：[同样的问题](https://stackoverflow.com/questions/8570824/submit-a-rails-remote-form-with-javascript/)

# javascript - 即使提供了 Pingdom 凭据也丢失

> ID：10340230
> 
> 赞同：1
> 
> 时间：2012-04-26T19:38:41.497
> 
> 标签：javascript, http, node.js, http-authentication, pingdom

我正在编写一个向 pingdom 发出 get 请求的 node.js 应用程序；但即使我试图把它放在任何地方，也会不断收到“用户凭据丢失错误”。请看下面的代码。

```
function get_checks() {
    var options = {
        "hostname" : "api.pingdom.com",
        "path" : "/api/2.0/checks?"+"userpwd=user@example.com"+":"+"password",
        "method" : "GET",
        "headers" : {
            "userpwd" : "user@example.com"+":"+"password",
            "App-Key" : "key"
        },
        "userpwd" : "user@example.com"+":"+"password"
    };

    var req = https.request(options, function(response){
        response.on('data', function(response_data) {
            console.log("Response: " + response_data);
        });
    });

    req.end();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:07:32.347

只是自己回答这个问题，这样它就不会作为一个悬而未决的问题挂起......

pingdom 使用 http 基本身份验证，因此它必须在身份验证标头中

# c# - 在 C# 中将字节数组转换为 int 数组时出错

> ID：10340232
> 
> 赞同：6
> 
> 时间：2012-04-26T19:38:56.287
> 
> 标签：c#, byte

我正在尝试将字节数组转换为 int 数组广告，然后将字节数组转换回 int 数组。

为了从字节数组转换为整数数组，我使用了以下代码：

```
int[] iArray = new int[someSize];
byte[] bArray = new byte[iArray.Length * sizeof(int)];
Buffer.BlockCopy(iArray, 0,bArray, 0, bArray.Length); // This code works correctly. 
```

但是当从字节数组转换为int数组时，当数组中的值大于256`iArray2`时，数组中的值变为false （可能是溢出，我不知道。）`iArray`

```
// What is the error in this code?.
int iArray2 = new int[someSize];
Buffer.BlockCopy(bArray, 0, iArray2, 0, iArray2.Length); 
```

如何正确地将字节数组转换为整数数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:47:00.220

`Buffer.BlockCopy`总是以*字节*为单位，而不是数组单位。

因此，当您传入`iArray2.Length`第二个`BlockCopy()`调用时，您将复制那么多*字节*，这是实际数组的四分之一。

# actionscript-3 - Actionscript3：鸭子的倒计时

> ID：10340243
> 
> 赞同：0
> 
> 时间：2012-04-26T19:39:48.093
> 
> 标签：actionscript-3

> 云、鸭子、分数显示和波浪都应该有一个类来管理它们的运动和行为。
> 
> 当鸭子被点击时，它们会被“射击”，鸭子会从数组和舞台上移除（为此使用 arrayName.splice()）。发生这种情况时，分数显示应该倒计时。
> 
> 剩下的鸭子数量应该是 Score Display 类中的一个属性，并在射击鸭子时由 Main 调整。
> 
> 当所有的鸭子都被“射中”时，游戏应该以动画形式显示“你赢了”的信息。这可以通过添加和删除将 ENTER FRAME 事件与动画函数相关联的事件侦听器来完成。（这只是值得的，所以留到最后）。
> 
> 当鸭子被“射击”时，波浪和云也应该从视图和它们各自的阵列中移除。
> 
> 玩家多次获胜或失败后，游戏应该重置。（不止一次）

我已经完成了大部分工作，我只是在记分牌上遇到了麻烦。任何有关如何重置所有内容以及编写您获胜标志的提示也会有所帮助。

```
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.text.TextField;

[SWF(width="800", height="600", backgroundColor="#E6FCFF")]

public class Main extends Sprite
{
    private var _sittingDucks:Array = []; //always set your arrays with [] at the top
    public var _scoreDisplay:TextField

    public function Main()
    {
        //adding the background, and positioning it
        var background:Background = new Background();
        this.addChild(background);
        background.x = 30;
        background.y = 100;

        for(var i:uint = 0; i < 5; i++)
        {
            //adding the first cloud, and positioning it
            var clouds:Clouds = new Clouds();
            this.addChild(clouds);
            clouds.x = 130 + Math.random() * 600; //130 to 730
            clouds.y = 230;
            clouds.speedX = Math.random() * 3;
            clouds.width = clouds.height = 200 * Math.random()//randomly changes the clouds demensions
        }   

        var waves:Waves = new Waves();
        this.addChild(waves);
        waves.x = 0;
        waves.y = 510;
        waves.speedX = Math.random() * 3;

        for(var j:uint = 0; j < 8; j++)
        {
            var ducks:Ducks = new Ducks();
            this.addChild(ducks);
            ducks.x = 100 + j * 100;
            ducks.y = 475;
            _sittingDucks.push(ducks);
            ducks.addEventListener(MouseEvent.CLICK, ducksDestroy);
        }

        var waves2:Waves = new Waves();
        this.addChild(waves2);
        waves2.x = 0;
        waves2.y = 520;
        waves2.speedX = Math.random() * 3;

        var setting:ForeGround = new ForeGround();
        this.addChild(setting);
        setting.x = 0;
        setting.y = 50;
        setting.width = 920;

        var board:ScoreDisplay = new ScoreDisplay();
        this.addChild(board);
        board.x = 570;
        board.y = 35;

    }
    private function ducksDestroy(event:MouseEvent):void
    {
        //store the crow we clicked on in a new array
        var clickedDuck:Ducks = Ducks(event.currentTarget);

        //remove it from the crows array
        //find the address of the crow we are removing
        var index:uint = _sittingDucks.indexOf(clickedDuck);

        //remove it from the array with splice
        _sittingDucks.splice(index, 1);

        //remove it from my document's display list
        this.removeChild(clickedDuck);
    }
}

import flash.events.Event;
import flash.events.MouseEvent;
import flash.text.TextField;
import ScoreDisplayBase; // always import the classes you are using

public class ScoreDisplay extends ScoreDisplayBase
{
    private var txt:TextField; // where is it initialized?
    private var score:uint = 0;

    public function ScoreDisplay()
    {
        super(); // do you init txt here?
    }

    public function scoreUpdate():void
    {
        score += 10; // ok, so I suppose that your score does not represent the remaining ducks as you said, just only a score
        txt.text = score.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:24:58.183

好吧：

1.  您确实想在 ScoreDisplay 的构造函数中创建 TextField txt。实例化它，将其文本设置为初始分数 (0)，然后`addChild(txt)`.

2.  为了稍后设置分数，我们需要一种引用显示的方法。

    ```
    //you want a reference to the ScoreDisplay, not this
    public var _scoreDisplay:TextField //no
    public var _scoreDisplay:ScoreDisplay //yes 
    ```

    当您在 Main 构造函数中创建它时，我们需要保留一个引用。

    ```
    _scoreDisplay = :ScoreDisplay = new ScoreDisplay();
    this.addChild(_scoreDisplay );
    _scoreDisplay .x = 570;
    _scoreDisplay .y = 35; 
    ```

3.  如果您希望能够重置游戏，我建议您创建鸭子并将其放置在 Main 类的构造函数之外的方法中。您还应该创建一个“重置”函数，在 ScoreDisplay 中将分数（和显示）设置为 0。

    ```
    private function spawnDucks() {
        for(var j:uint = 0; j < 8; j++)
        {
            var ducks:Ducks = new Ducks();
            this.addChild(ducks);
            ducks.x = 100 + j * 100;
            ducks.y = 475;
            _sittingDucks.push(ducks);
            ducks.addEventListener(MouseEvent.CLICK, ducksDestroy);
        }
    } 
    ```

    然后你在构造函数中调用它，当你需要重置游戏时可以再次调用它。

4.  `ducksDestroy(event:MouseEvent)`将是您要重新计算分数、检查您是否赢了、显示消息并重置游戏的地方。您将需要某种弹出窗口来显示，如果您不知道从哪里开始，[这是一个不错的弹出窗口。](http://activeden.net/item/dynamic-as3-popup-class/98559)

    ```
    private function ducksDestroy(event:MouseEvent):void
    {
        //store the crow we clicked on in a new array
        var clickedDuck:Ducks = Ducks(event.currentTarget);

        //remove it from the crows array
        //find the address of the crow we are removing
        var index:uint = _sittingDucks.indexOf(clickedDuck);

        //remove it from the array with splice
        _sittingDucks.splice(index, 1);

        //remove it from my document's display list
        this.removeChild(clickedDuck);

        //update the score
        _scoreDisplay.scoreUpdate();

        //Check if all the ducks are gone
        if (_sittingDucks.length == 0) {
            //All the ducks are dead, we've won the game!

            //create some kind of popup to display.
            //add it to the screen, have some form
            //of button (or a timer) take it away

            //whatever takes the popup away, have it call 'reset'

        }
    }

    private function reset():void
    {
        //write a reset method to clear the score
        _scoreDisplay.reset(); 

        //create some ducks and you're ready to go!
        spawnDucks();
    } 
    ```

# nullpointerexception - 如何处理elasticsearch中的空指针异常

> ID：10340244
> 
> 赞同：3
> 
> 时间：2012-04-26T19:40:01.263
> 
> 标签：nullpointerexception, elasticsearch

我正在使用elasticsearch，我试图处理数据库为空的情况

```
@SuppressWarnings("unchecked")
public <M extends Model> SearchResults<M> findPage(int page, String search, String searchFields, String orderBy, String order, String where) {
    BoolQueryBuilder qb = buildQueryBuilder(search, searchFields, where);           
    Query<M> query = (Query<M>) ElasticSearch.query(qb, entityClass);
    // FIXME Currently we ignore the orderBy and order fields
    query.from((page - 1) * getPageSize()).size(getPageSize());
    query.hydrate(true);
    return query.fetch();   
} 
```

return query.fetch() 处的错误；

我正在尝试实现一个 try and catch 语句，但它不起作用，任何人都可以帮助解决这个问题吗？

# .htaccess - .htaccess 不带文件扩展名的重定向 URL

> ID：10340245
> 
> 赞同：0
> 
> 时间：2012-04-26T19:40:10.110
> 
> 标签：.htaccess, mod-rewrite, web

麻省理工学院`.htaccess`看起来像这样。

```
RewriteEngine on
RewriteRule !\.(js|gif|css|jpg|png|ico|txt|html)$ index.php [L] 
```

它允许正常访问具有所列文件扩展名的 URL。所有其他请求都发送到 index.php。

**如何简化我的 .htaccess 以便它允许所有文件请求并仅将没有文件扩展名的请求重定向到 index.php？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:02:02.720

我会这样做：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

我假设您的 .htaccess 位于您的文档根目录中。否则尝试：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这两个示例都会将所有流量发送到 index.php，但物理现有文件除外。

# c# - 读取树形菜单 Xml C#

> ID：10340253
> 
> 赞同：0
> 
> 时间：2012-04-26T19:40:33.787
> 
> 标签：c#, xml

您好，我需要在控制台应用程序中使用 C# 解析这个 xml，有什么帮助吗？

```
 <TREE_MENU_NESTED>
 <TREE>Category I
     <TREE ACTION="URL" LINK="c1/p1.html" TARGET="_self" ICON="icon_slide" >Product 1</TREE> 
     <TREE ACTION="URL" LINK="c2/p2.html" TARGET="_self" ICON="icon_slide" >Product 2</TREE> 
 </TREE>
 <TREE>Category II
     <TREE ACTION="URL" LINK="c2/p1.html" TARGET="_self" ICON="icon_slide" >Product 1</TREE> 
     <TREE ACTION="URL" LINK="c2/p2.html" TARGET="_self" ICON="icon_slide" >Product 2</TREE> 
 </TREE>
 </TREE_MENU_NESTED> 
```

需要在控制台中显示：--
category 1: product1, product 2
--category 2: product1, product 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:45:34.380

使用 linq2xml ：

```
XElement xmlTree = XElement.Parse("<TREE_MENU_NESTED>... ");
Console.WriteLine(xmlTree); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:50:32.167

您可以使用 Linq to Xml

```
XElement doc = XElement.Parse("You XML text");

foreach (XElement treeNode in doc.Elements())
    Console.WriteLine(treeNode.Value); 
```

# c++ - 检查是否在地图 c++ 中找到一个键并获取它

> ID：10340256
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:40:51.730
> 
> 标签：c++, map

我想检查是否在地图中找到了某个键，如果是，我想将它放在一个变量中以供其他用途，但问题是我不想使用迭代器。我在map类中找到了find函数，但是它返回一个迭代器，我想检查是否在map中找到了一个键，如果它返回true来获取它

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:47:01.377

[`std::map::count()`](http://en.cppreference.com/w/cpp/container/map/count)如果地图包含特定的键，将通知您。如果键在地图中，那么您可以使用`operator[]`来获取该值，因为知道不会添加默认值（尽管正如 ildjarn 指出的那样，需要两次搜索地图）：

```
std::map<int, int> m;

m[0] = 1;
m[1] = 2;

if (m.count(0))
{
    std::cout << "value=" << m[0] << "\n";
} 
```

为什么`find()`没有吸引力，我不清楚：

```
std::map<int, int>::iterator i = m.find(0);
if (i != m.end())
{
    std::cout << "value=" << i->second << "\n";
} 
```

# javascript - 谷歌地图：覆盖点未显示

> ID：10340257
> 
> 赞同：1
> 
> 时间：2012-04-26T19:40:56.423
> 
> 标签：javascript, html, google-maps, google-api

嘿伙计们希望在这里得到一点帮助。

**首先我在这里创建了一个工作地图：http:** [//leongaban.com/_stack/googlemaps/firstmap.html](http://leongaban.com/_stack/googlemaps/firstmap.html) 指针在现场显示，但是我需要删除地图 | 卫星 | 地形按钮。

再深入一点，我在这里找到了一个示例[disablingDefaults](https://developers.google.com/maps/documentation/javascript/controls#DisablingDefaults)。但是，我无法使用我的 google.map.js 文件和我的 API 密钥使地图工作。所以我只是使用了[谷歌示例页面](https://google-developers.appspot.com/maps/documentation/javascript/examples/control-disableUI)中的脚本。

**现在我的第二张地图**我删除了地图视图选项，但无法显示叠加层:( [http://leongaban.com/_stack/googlemaps/](http://leongaban.com/_stack/googlemaps/)

*请帮忙！*

**目标：**

*   使用我的 Google 地图 API 密钥
*   删除地图视图选项按钮
*   将覆盖指针放在该位置上。

* * *

使用我的 google API 2 密钥制作我的第一张地图的代码：

```
<head>
    <title>Test Google Maps</title>

    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyAXsNu2EwRNqKJn9OmC19WPkEJFM0r6ALk&sensor=true"
        type="text/javascript"></script>

    <script type="text/javascript">

        function initialize() {

            // var myOptions = {
            //     zoom: 16,
            //     center: new google.maps.LatLng(40.750159, -73.976473),
            //     disableDefaultUI: true,
            //     mapTypeId: google.maps.MapTypeId.ROADMAP
            //   }

            // var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            // var point = new GLatLng(40.750159, -73.976473);
            // map.addOverlay(new GMarker(point));

            var map = new GMap2(document.getElementById("map_canvas"));
            map.setCenter(new GLatLng(40.750159, -73.976473), 13);
            map.setUIToDefault();

            var myGeographicCoordinates = new GLatLng(40.750159, -73.976473)
            map.addOverlay(new GMarker(myGeographicCoordinates));

            // map.addOverlay(new GMarker(40.750159, -73.976473));

        }

    </script>

</head>

<body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 450px; height: 370px"></div>
</body> 
```

更新的
**工作代码！感谢堆栈！**

```
<head>
    <title>Test Google Maps</title>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">

        function initialize() {

            var myOptions = {
                zoom: 16,
                center: new google.maps.LatLng(40.750159, -73.976473),
                disableDefaultUI: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              }

            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var myGeographicCoordinates = new google.maps.LatLng(40.750159, -73.976473);

            var marker = new google.maps.Marker({
                map:        map,
                position:   myGeographicCoordinates,
                title:      "My First Test Marker",
                visible:    true
            }); 
            }

    </script>

</head>

<body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 450px; height: 370px"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:47:41.807

您如何定义 latLng 对象存在问题。

```
new GLatLng(40.750159, -73.976473); 
```

这与 Google Maps Api v2 一起使用。现在您使用的是最新的 api(v3)，在新的 api 中，您应该这样做：

```
new google.maps.LatLng(40.750159, -73.976473); 
```

编辑：编辑后，我发现标记存在一些问题。在 API v3 中，这是制作新标记的方式：

```
var marker = new google.maps.Marker({
    map:        map,
    position:   latLng
}); 
```

以下代码设置地图，禁用默认 UI，设置标记并将其放在地图上；

```
function initialize() {
 var myOptions = {
  zoom: 16,
  center: new google.maps.LatLng(40.750159, -73.976473),
  disableDefaultUI: true,
  mapTypeId: google.maps.MapTypeId.ROADMAP
 }

 var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
 var myGeographicCoordinates = new GLatLng(40.750159, -73.976473);
 var marker = new google.maps.Marker({
  map:        map,
  position:   myGeographicCoordinates
 });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:25:30.927

现在您已迁移到 v3 API，您希望将标记创建代码从以下位置更改：

```
map.addOverlay(new GMarker(myGeographicCoordinates)); 
```

至：

```
var marker = new google.maps.Marker({
    map:        map,
    position:   myGeographicCoordinates,
    title:      "My First Test Marker",
    visible:    true
}); 
```

如果需要，您还可以在传递给标记构造函数`icon`的s 中定义自定义标记，并将值设置为图像文件的路径和名称：`MarkerOption`

```
var marker = new google.maps.Marker({
    map:        map,
    icon:       "images/my-nice-marker.png",
    position:   myGeographicCoordinates,
    title:      "My First Test Marker",
    visible:    true
}); 
```

# javascript - 单击复选框获取下一个 td 的内容

> ID：10340258
> 
> 赞同：0
> 
> 时间：2012-04-26T19:40:58.547
> 
> 标签：javascript

`td`单击复选框时如何获取下一个的内容

```
<table>
    <tr>
        <td>
            <input type=checkbox name=t>
        </td>
        <td width=25%>
            FOOBAR
        </td>
        <td width=73%>
            BAZ
        </td>
    </tr>
    <tr>
        <td>
            <input type=checkbox name=t>
        </td>
        <td width=25%>
            FOO
        </td>
        <td width=73%>
            BAR
        </td>
    </tr>
</table> 
```

我的 JavaScript 代码：

```
var c=new Array();
c=window.document.getElementsByTagName('input');
for(var i=0;i<c.length;i++)
{
    if(c[i].type=='checkbox')
    {
        alert(c[i].parentNode.parentNode.rows[0].innerHTML);
    }
} 
```

单击复选框时，我正在尝试获取下一个 td 的内容。对于第一行，`FOOBAR`应该获取等等。

**编辑**

> **注意事项：**我很确定我用于这个问题的标签。请不要发布任何指向某些 JS 库的答案，例如。jQuery 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:53:24.383

这似乎有效，尽管它*非常*依赖于 HTML（当然，许多涉及 DOM 遍历的 JavaScript 也是如此）：

```
var c = [];

c = window.document.getElementsByTagName('input');

for (var i = 0; i < c.length; i++) {
    if (c[i].type == 'checkbox') {
        c[i].onchange = function() {
            if (this.checked){
                console.log(this.parentNode.nextElementSibling.firstChild.nodeValue.trim());
            }
        };
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/z88HH/9/)。

参考：

*   [`firstChild`](https://developer.mozilla.org/en/DOM/Node.firstChild).
*   [`下一个元素兄弟姐妹](https://developer.mozilla.org/en/DOM/Element.nextElementSibling)。
*   [`nodeValue`](https://developer.mozilla.org/En/DOM/Node.nodeValue).
*   [`parentNode`](https://developer.mozilla.org/en/DOM/Node.parentNode).
*   [`trim()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:46:58.780

我用过 jQuery。我猜这样可以吗？

```
 ​$('input:checkbox').live('click', function() {
       alert($(this).parent().next('td').text());
    });​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/6Mwqz/](http://jsfiddle.net/6Mwqz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:58:04.487

使用jQuery，会更好，这里是你的解决方案：

```
$('[type=checkbox]').on('click', function(){
  var html;
  if($(this).is(':checked')) {
    html = $(this).parent().next('td').html();
    alert(html);
  }
});
​ 
```

**演示：http:** [//jsfiddle.net/oscarj24/yYuzS/](http://jsfiddle.net/oscarj24/yYuzS/)

# .net - 使用 POST 与 GET 时 .NET ScriptService 序列化的区别？

> ID：10340260
> 
> 赞同：1
> 
> 时间：2012-04-26T19:41:09.967
> 
> 标签：.net, post, get, scriptservice

我正在从客户端（JS）调用 [ScripService] 中的方法。当我使用 POST 拨打电话时，一切正常。但是当我使用 GET 时会抛出这个错误：

反映类型时出现错误...无法序列化 System.Collections.Generic.IList`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral] 类型的成员 xxx，因为它是一个接口。

我使用 fiddler 发送相同的 POST 请求，这很有效。然后我编辑了使用 GET 的请求（在提琴手中），其他一切都是一样的；我得到和以前一样的错误。

为什么会这样？在执行的那一刻，成员 xxx 是一个具体的类型，当请求是 POST 时，它会序列化 OK。我错过了什么？

# salesforce - 如何捕获绑定到 VisualForce 输入的 setter 中引发的异常？

> ID：10340263
> 
> 赞同：0
> 
> 时间：2012-04-26T19:41:16.970
> 
> 标签：salesforce, apex-code, visualforce

我有一个与 SObject 相关联的属性，如下所示：

```
public Decimal latitude {
  get {
    return (Decimal)self.get('latitude__c');
  }
  set {
    self.put('latitude__c', value);
  }
} 
```

在 VisualForce 页面中，我有一个绑定到此属性的输入字段。

```
<apex:inputtext value="{!latitude}" /> 
```

如果我在这个字段中输入一个字符串，就像`abc`setter 中有一个异常一样，但我似乎无法捕捉到它。表单已提交，它的操作不成功，但没有错误消息。我如何捕捉到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:31:56.790

您能否在表单提交时添加一些错误检查，以验证所有输入，然后在页面上显示错误？

就像是

```
try{
   latitude = Decimal.valueOf(latitude);
}catch (exception e){
   ApexPages.addMessage(new ApexPages.Message(ApexPages.severity.Error, 'Invalid latitude entered!'));  
} 
```

甚至可以将此代码放在纬度的设置器中。

# wordpress - Buddypress - 组导航/重定向到论坛（再次）

> ID：10340267
> 
> 赞同：1
> 
> 时间：2012-04-26T19:41:30.857
> 
> 标签：wordpress, navigation, customization, buddypress

如果您以前自定义过 BP 站点，您会知道组 nav bp_get_options_nav(); 完全按照您想要的方式获得网站可能是一个真正的障碍。

有一个较旧的解决方案涉及从家庭/到论坛/...的永久重定向（不适合 SEM 目的）。

`

```
function redirect_to_forum() {
        global $bp;

        $path = clean_url( $_SERVER['REQUEST_URI'] );

        $path = apply_filters( 'bp_uri', $path );

        if ( bp_is_group_home() && strpos( $path, $bp->bp_options_nav['groups']['home']['slug'] ) === false )
                bp_core_redirect( $path . $bp->bp_options_nav['groups']['forum']['slug'] . '/' );
}
add_action( 'wp', 'redirect_to_forum' ); 
```

`

这个适用于BP 1.5

`

```
function redirect_to_forum() {
    global $bp;

    $path = clean_url( $_SERVER['REQUEST_URI'] );

    $path = apply_filters( 'bp_uri', $path );

    if ( bp_is_group_home() && strpos( $path, $bp->bp_options_nav['groups']['home']['slug'] ) === false )
                bp_core_redirect( $path . $bp->bp_options_nav['groups']['forum']['slug'] . 'forum/' );
}
add_action( 'bp_init', 'redirect_to_forum' ); 
```

`

有没有其他方法可以在不引起爆炸的情况下在 Buddypress 组中移动功能？如果能够更改 /groups/single/home.php 中的包含文件引用以获取您想要的功能，那就太好了。例如...

`

```
elseif ( bp_group_is_visible() ) :
locate_template( array( 'groups/single/** change this to any file within /single/ **' ), true ); 
```

`

如果您将home.php包含文件引用更改为forumn的，论坛的显示就好了，但是添加新主题功能和支持似乎没有拨入...创建一个新主题并没有任何反应...所以按顺序要利用论坛功能，您实际上需要在“论坛”slug 即 /forum/... 有什么办法可以解决这个问题？

总而言之......我试图让论坛的功能在组根目录下工作，即“sitename.com/groups/group-name/”而不重定向到“sitename.com/groups/group-name/forumn/”

有什么想法吗？建议？类似的经历？

# compiler-construction - 流水线处理器如何保证原子性？

> ID：10340268
> 
> 赞同：0
> 
> 时间：2012-04-26T19:41:39.513
> 
> 标签：compiler-construction, atomic, processor

当处理器执行一条指令时，可以假设这是一个原子操作。但是当处理器使用流水线时，它是如何工作的呢？该指令在多个步骤中执行，与许多其他指令并行，都在不同的步骤中。但是，如果其他指令之一干扰了我们的指令怎么办？处理器如何“回滚”指令的效果，或完全避免干扰？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:04:15.207

我敢肯定，各种处理器采用了许多策略。我曾经有一个项目，我将流水线添加到模拟处理器中。我采用的技术是

1.  冒泡。对于某些可能会干扰后续指令的操作，我知道干扰可能会发生多远。例如，如果在以下指令已经通过管道的一个阶段之前条件跳转评估尚未完成，我可能会将有效的 NOP 直接放在条件跳转后面的管道中。

2.  转发。在几种情况下，我能够看到我需要指令中的一个值，该值比当前指令高一两个阶段，但尚未复制到它通常从中访问它的寄存器/门中。在这种情况下，它直接从后期访问它。

3.  分支预测和校正。预测部分不是关于如何避免碰撞，但重要的是要注意。在条件跳转的情况下，您希望预测会发生什么并尽早将下一条指令加载到管道中。我总是假设条件会评估为不进行跳转，因为这样我可以立即将下一条指令加载到管道中而无需先评估跳转地址，从而避免了对气泡的需要。

当预言成真时，是的，我很高兴。如果预测没有实现，那么我需要否定我们乐观地早早启动的下一条指令的影响。我通过在前几个流水线级中将信号切换到与非门来实现这一点，以有效地 NOP 出当前正在那里执行的指令。

这是我从我唯一的个人经历中记得的。我查看了指令管道的维基百科页面，并看到了一些相同的想法，我确信有更好的解释：) [http://en.wikipedia.org/wiki/Instruction_pipeline](http://en.wikipedia.org/wiki/Instruction_pipeline)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:45:47.453

这是由处理器的设计者定义的，并且对于每个特定的处理器来说可能是不同的。例如，如果我们采用典型的 Intel/AMD x86/x64 处理器系列，**单指令并不总是原子**的。

您必须始终说出您所谈论的处理器类型。如果它是与 x86/x64 不同的平台，您可能会在[Electronics forum](http://electronics.stackexchange.com)获得更好的答案，而不是在这里。

# mysql - 如何将 CSV 导入到列名中有空格的 MySQL？

> ID：10340271
> 
> 赞同：0
> 
> 时间：2012-04-26T19:41:52.603
> 
> 标签：mysql, database, csv, import

我收到了一个非常大的 CSV 文件，需要导入到数据库中。

我以前做过这个并且知道一般语法，但是，我失败了并且在列名上出现错误，因为它们包含一个空格。

我没有运气尝试过不同类型的报价，并且在过去的一个小时里一直在互联网上搜索。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:43:03.000

反引号：`，在 1 键的左侧。

# javascript - Google Maps API -> 在页面中嵌入地图时，我们是否可以选择使用“这里有什么”？

> ID：10340273
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:41:55.100
> 
> 标签：javascript, google-maps, google-maps-api-3

我刚刚收到一个创建页面的请求，这个请求的创建者希望能够使用当您在访问 www.maps.google 时右键单击地图上某处时看到的“这里有什么”功能。 com。

我在任何地方都没有看到这样的例子。我只是想确保在说可以做到这一点之前，它确实可以做到。

如果可能的话，我真的很感激一个例子的链接，等等。

感谢您对此提供任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:51:26.483

好吧，您实际上并没有获得包含一个选项的内置右键单击菜单：**这里有什么？**，但您可以使用[Places Service/Library](https://developers.google.com/maps/documentation/javascript/places)来实现非常相似的功能。

# html - 如何使用 CSS 自动添加节号（1.2、3.4.1）？

> ID：10340276
> 
> 赞同：10
> 
> 时间：2012-04-26T19:42:25.140
> 
> 标签：html, css, formatting

如何使用 CSS 自动添加节号（1.2、3.4.1）？

我目前有

```
h1, h2, h3, h4 {
  font-weight: normal;
}
h1 { font-size: 140%; }
h2 { font-size: 120%; color:#049;}
h3 { font-size: 110%; color:#06C;}
h4 { font-size: 105%; color:#09C;} 
```

如何修改它们，以便根据节标题的嵌套级别和出现顺序自动构造 1.3、2.4.5 等节号？

```
...

<h2>heading21</h2>
...

<h3>heading31</h3>
...

<h2>heading22</h2> 
```

应该显示

1.  标题21

    1.1 标题31

2.  标题22

或类似的规定。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-27T05:49:09.913

嘿，现在你可以使用**CSS counter-increment 属性**

像这样的 **Css**

```
 body {counter-reset:section;}
    h1 {counter-reset:subsection;}
    h1:before
    {
    counter-increment:section;
    content:"Section " counter(section) ". ";
        font-weight:bold;
    }
    h2:before
    {
    counter-increment:subsection;
    content:counter(section) "." counter(subsection) " ";
    } 
```

**HTML** **

```
<p><b>Note:</b> IE8 supports these properties only if a !DOCTYPE is specified.</p>
<h1>HTML tutorials</h1>
<h2>HTML Tutorial</h2>
<h2>XHTML Tutorial</h2>
<h2>CSS Tutorial</h2>
<h1>Scripting tutorials</h1>
<h2>JavaScript</h2>
<h2>VBScript</h2>
<h1>Heading </h1>
<h2>One </h2>
<h2>Two</h2> 
```

**

现场演示[http://jsfiddle.net/PfcX2/1/](http://jsfiddle.net/PfcX2/1/)

更多信息点击这里[https://developer.mozilla.org/en-US/docs/Web/CSS/counter-increment](https://developer.mozilla.org/en-US/docs/Web/CSS/counter-increment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-06T14:29:58.180

要回答“如果我只有一个`h2`，我如何抑制前导`1`？”的问题：更改`h2::before`样式选择器，因此`h2`必须遵循`h1`：

```
h1::before ~ h2::before {
  // your h2 attributes go here
} 
```

# javascript - 返回0的多维数组的函数

> ID：10340277
> 
> 赞同：1
> 
> 时间：2012-04-26T19:42:26.883
> 
> 标签：javascript, arrays, recursion, multidimensional-array

想象一下，我有一个被调用的函数`multi0(Array)`，我希望它接受一个数组作为参数。

如果我这样做了`multi0([5])`，它将返回一个看起来像的数组

```
[0,0,0,0,0] 
```

如果我这样做了`multi0([5,3])`，它将返回一个看起来像的数组

```
[
    [0,0,0],
    [0,0,0],
    [0,0,0],
    [0,0,0],
    [0,0,0]
] 
```

我用递归尝试了这个，但它没有用。你如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:48:04.160

像这样：

```
function multi0(arr) {
  if (arr.length == 0) {
    return 0;
  } else {
    var children = arr.slice(1);
    var result = [];
    for (var i = 0; i < arr[0]; i++) {
      result.push(multi0(children));
    }
    return result;
  }
} 
```

[http://jsfiddle.net/ffuH4/](http://jsfiddle.net/ffuH4/)

或者稍长但更有效的：

```
function multi0(arr) {
  var result = [];
  if (arr.length == 1) {
    for (var i = 0; i < arr[0]; i++) {
      result.push(0);
    }
  } else {
    var children = arr.slice(1);
    for (var i = 0; i < arr[0]; i++) {
      result.push(multi0(children));
    }
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:00:38.003

尝试这个：

```
function multi0(a,b) {
    x = new Array;
    for(var i=0;i<a;i++) {
        x[i] = new Array;
        for(var s=0;s<b;s++) {
            x[i][s] = 0;
        }
    }
    return x;
} 
```

在这里看看[小提琴](http://jsfiddle.net/tTwUG/)

# ubuntu - Ubuntu 在哪里存储已安装的程序？

> ID：10340281
> 
> 赞同：50
> 
> 时间：2012-04-26T19:42:36.643
> 
> 标签：ubuntu, ubuntu-10.04, ubuntu-11.04

我正在使用 Ubuntu，当我单击程序下载时，Firefox 会问我“firefox 应该如何处理这个文件？” 在“打开方式”中，我想找到一个程序“包安装程序”。问题是 - 我不知道在哪里寻找。程序存储在哪里（我使用 Ubuntu 软件中心安装它）

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-26T19:46:57.953

它们通常存储在以下文件夹中：

```
/bin/
/usr/bin/
/sbin/
/usr/sbin/ 
```

如果不确定，请使用以下`which`命令：

```
~$ which firefox
/usr/bin/firefox 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-26T19:49:40.870

如果您使用 Ubuntu 软件包管理器（apt、synaptic、dpkg 或类似工具）安装了该软件包，您可以使用以下命令获取有关已安装软件包的信息

```
dpkg -L <package_name> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-04-28T12:24:27.280

只需键入以下命令：

`~$ whereis "program name"`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-01T21:57:48.173

对于某些应用程序，例如 google chrome，它们将其存储在 /opt 下。您可以按照上述说明使用 dpkg -l 获得正确的命名，然后使用 dpkg -L 获得详细信息。

希望能帮助到你

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-21T09:03:21.977

仅作为对上述答案的补充参考。我无法使用`dpkg -L`找到 cuda 的正确路径。查看我得到的结果`dpkg -L`

```
$ dpkg -L cuda
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/cuda
/usr/share/doc/cuda/copyright
/usr/share/doc/cuda/changelog.Debian.gz 
```

正确的路径是`/usr/local/cuda`

```
$ ll /usr/local | grep cuda

lrwxrwxrwx  1 root root    8 Oct 20 18:45 cuda -> cuda-9.0/

drwxr-xr-x 15 root root 4096 Oct 20 18:44 cuda-9.0/ 
```

顺便说一句，我确实通过以下命令安装了 cuda

```
dpkg -i xx_cuda_xxx.deb 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-26T19:46:03.943

要找到你想要的程序，你可以在终端运行这个命令：

```
find / usr-name "your_program" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-17T07:49:26.753

如果您正在寻找诸如**画笔**、**曲线**等文件夹，您可以尝试：

`/home/<username>/.gimp-2.8`

该文件夹将包含所有`gimp folders`.

祝你好运。

# ruby-on-rails - 我该如何调试呢？

> ID：10340283
> 
> 赞同：0
> 
> 时间：2012-04-26T19:42:48.033
> 
> 标签：ruby-on-rails, ruby, debugging, localhost

我最近刚刚开始这个 ruby​​ on rails 教程，以开始我对新语言的新冒险，并按照教程我被卡住了。在我将 index.html.erb 文件编辑为教程正在执行的操作后，我的 localhost 服务器给了我一个错误

```
**Routing Error**
No route matches [GET] "/" 
```

老实说，我不知道如何调试这个

这是索引文件中的内容

```
<% @snippet.each do |snippet| %>
<h2><%= snippet.title %></h2>
<%end%> 
```

对于我的路线：

```
Josegomez::Application.routes.draw do
resources :snippets 
```

这是我一直关注的视频，虽然它要求你成为会员，但我想大多数人都会问这个问题[http://tutsplus.com/tutorial/how-to-deploy-your-first-rails-app/](http://tutsplus.com/tutorial/how-to-deploy-your-first-rails-app/)

这是我输入 rake routes 时得到的结果

```
Jose-Gomezs-MacBook-Pro:josegomez josegomez$ rake routes
    snippets GET    /snippets(.:format)          snippets#index
             POST   /snippets(.:format)          snippets#create
 new_snippet GET    /snippets/new(.:format)      snippets#new
edit_snippet GET    /snippets/:id/edit(.:format) snippets#edit
     snippet GET    /snippets/:id(.:format)      snippets#show
             PUT    /snippets/:id(.:format)      snippets#update
             DELETE /snippets/:id(.:format)      snippets#destroy 
```

嘿，可能是使用旧版本...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:44:21.527

你需要路由到根

将此添加到 routes.rb

```
root :to => 'snippets#index' 
```

# python - Python BeautifulSoup - 循环浏览多个页面

> ID：10340290
> 
> 赞同：2
> 
> 时间：2012-04-26T19:43:03.820
> 
> 标签：python, web-scraping, beautifulsoup

我试图首先从页面中获取所有链接，当获取“下一步”按钮的 URL 并继续循环直到没有更多页面为止。一直试图获得一个嵌套循环来实现这一点，但由于某种原因，BeautifulSoup 从不解析第二页..只有第一页然后停止..

很难解释，但这里的代码应该更容易理解我要解释的内容:)

```
#this site holds the first page that it should start looping on.. from this page i want to reach page 2, 3, etc.
   webpage = urlopen('www.first-page-with-urls-and-next-button.com').read()

soup = BeautifulSoup(webpage)

for tag in soup.findAll('a', { "class" : "next" }):

    print tag['href']
    print "\n--------------------\n"

#next button is relative url so append it to main-url.com
    soup = BeautifulSoup('http://www.main-url.com/'+ re.sub(r'\s', '', tag['href']))

#for some reason this variable only holds the tag['href']
    print soup

    for taggen in soup.findAll('a', { "class" : "homepage target-blank" }):
        print tag['href']

        # Read page found
        sidan = urlopen(taggen['href']).read()

# get title
        Titeln = re.findall(patFinderTitle, sidan)

        print Titeln 
```

有任何想法吗？很抱歉英语不好，我希望我不会受到打击 :) 请询问我是否解释得不好，我会尽力解释更多。哦，我是 Python 的新手——从今天开始（你可能已经想到了：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:05:32.730

如果你调用`urlopen`新的 url 并将生成的文件对象传递给 BeatifulSoup，我想你会准备好的。那是：

```
wepage = urlopen(http://www.main-url.com/'+ re.sub(r'\s', '', tag['href']))
soup = BeautifulSoup(webpage) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:05:42.793

对于线路：

`soup = BeautifulSoup('http://www.main-url.com/'+ re.sub(r'\s', '', tag['href']))`

尝试：

`webpage = urlopen('http://www.main-url.com/'+re.sub(r'\s','',tag['href'])).read()`

`soup = BeautifulSoup(webpage)`

# arrays - CUDA中的并行化，为每一列分配线程

> ID：10340296
> 
> 赞同：1
> 
> 时间：2012-04-26T19:43:20.863
> 
> 标签：arrays, cuda

假设我有一个从 MxN 2D 矩阵转换的 1D 数组，我想并行化每一列并执行一些操作。如何为每一列分配一个线程？

例如，如果我有一个 3x3 矩阵：

```
1  2  3

4  5  6

7  8  9 
```

我想根据列 # 在列中添加每个数字（因此第一列将添加 1，第二列将添加 2....），然后变为：

```
1+1   2+1   3+1

4+2   5+2   6+2

7+3   8+3   9+3 
```

我如何在 CUDA 中做到这一点？我知道如何将线程分配给数组中的所有元素，但我不知道如何将线程分配给每一列。所以，我想要的是发送每一列 (1 , 2 ,3 ) ( 4 , 5 ,6 ) (7 , 8 ,9) 并进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:54:16.047

在您的示例中，您正在根据行添加数字。不过，您知道矩阵的行/列长度（您知道它是 MxN）。你可以做的是这样的：

```
__global__ void MyAddingKernel(int* matrix, int M, int N)
{

    int gid = threadIdx.x + blockDim.x*blockIdx.x;
    //Let's add the row number to each element
    matrix[ gid ] += gid % M;
    //Let's add the column number to each element
    matrix[ gid ] += gid % N;

} 
```

如果您想添加不同的号码，您可以执行以下操作：

```
matrix[ gid ] += my_col_number_function(gid%N); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:40:35.837

使用更好的网格布局来避免那些模运算。

对最新 Cuda 上 64 位范围的行使用唯一块索引。

让线程循环遍历所有元素并添加唯一的线程索引！

如果计算的数据在一个块（行）中是唯一的，则平铺输入数据是一种通用方法，尤其是对于更复杂的计算。

```
/*
 * @param tileCount 
 */
__global__ void addRowNumberToCells(int* inOutMat_g, 
    const unsigned long long int inColumnCount_s, 
    const int inTileCount_s)
{

    //get unique block index
    const unsigned long long int blockId = blockIdx.x //1D
        + blockIdx.y * gridDim.x //2D
        + gridDim.x * gridDim.y * blockIdx.z; //3D

    /* 
     * check column ranges in case kernel is called 
     * with more blocks then columns 
     * (since its block wide following syncthreads are safe)
     */
    if(blockId >= inColumnCount_s)
        return;

    //get unique thread index
    const unsigned long long int threadId = blockId * blockDim.x + threadIdx.x; 

    /*
     * calculate unique and 1 blockId
     * maybe shared memory is overhead 
     * but it shows concept if calculation is more complex
     */
    __shared__ unsigned long long int blockIdAnd1_s;
    if(threadIdx.x == 0)
        blockIdAnd1_s = blockId + 1;
    __sycnthreads();

    unsigned long long int idx;

    //loop over tiles
    for(int i = 0; i < inTileCount_s)
    {
        //calculate new offset for sequence thread writes
        idx = i * blockDim.x + threadIdx.x;
        //check new index range in case column count is no multiple of blockDim.x
        if(idx >= inColumnCount_s)
            break;
        inOutMat_g[idx] = blockIdAnd1_s;
    }

} 
```

**示例 Cuda 2.0：**

垫子[131000][1000]

blockDim.y 的必要 blockCount = 131000 / 65535 = 2 向上取整！

inTileCount_s = 1000 / 192 = 6 向上取整！

（每个块 192 个线程 = Cuda 2.0 上 100 个占用）

<<(65535, 2, 1), (192, 1, 1)>>addRowNumberToCells(mat, 1000, 6)

# java - 在 Android 3.1 上通过 USB 端口读取和写入数据

> ID：10340300
> 
> 赞同：6
> 
> 时间：2012-04-26T19:43:56.057
> 
> 标签：java, android, usb, tablet

我正在尝试编写一个 android 应用程序来从 android 平板电脑读取数据并将其写入我们的嵌入式设备。平板电脑和嵌入式设备通过 USB 转串口转换器连接。是否可以将嵌入式设备中的数据读取到我们的安卓平板电脑中？我可以看一下任何示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T09:12:43.120

我建议使用移植的 usb-for-android 库，它已经实现了 PL2303 驱动程序： [https ://code.google.com/r/felixhaedicke-usb-serial-for-android](https://code.google.com/r/felixhaedicke-usb-serial-for-android)

我已经成功使用它了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:35:26.837

由于串口转换器是 USB**设备**，Android 平板电脑必须充当 USB**主机**。此功能自 Android 3.1 起可用。API 文档可在[android 开发者页面上找到](http://developer.android.com/guide/topics/usb/index.html)，其中包含代码示例。

要与转换器进行实际通信，您必须更多地了解它的内部结构：市场上有许多不同的设备，有些使用 USB HID，有些使用 USB CDC 设备类，甚至不符合任何类。linux *lsusb*命令可能有助于获取设备/接口描述符。

在典型的 CDC 设备上，您必须与两个批量端点交互，并且可能使用一些与接口相关的请求来设置波特率等。请参阅[USB 实现者论坛上的通信设备类规范。](http://www.usb.org/developers/devclass_docs#approved)

如果您的设备只有一个 IN 和一个 OUT 批量端点（在控制端点旁边），您可以尝试使用 OUT 端点上的 UsbDeviceConnection.bulkTransfer() 方法将一些字节写入串行线路。这很有可能会起作用，但是对于干净的实现，您应该坚持类规范。

# windows - 如何在 Windows 中创建 Chrome 风格的程序自更新？

> ID：10340301
> 
> 赞同：3
> 
> 时间：2012-04-26T19:43:59.333
> 
> 标签：windows, google-chrome, auto-update, updating, self-updating

谷歌的 Chrome 浏览器在 Windows 上有一个超级流畅的更新系统。它不需要管理权限，并且不需要用户交互就可以更新。

我正在尝试创建与此类似的东西，并希望获得有关如何做到这一点的任何建议。

他们技巧的第一部分是它们`Program Files`不像大多数 Windows 程序那样安装到，而是安装到`C:\Users\USER_NAME\AppData\Local\Google\Chrome\Application`. 这使他们的程序文件能够在没有管理权限的情况下自行修改。

查看该目录内部，我看到不仅有一个`chrome.exe`，而且还有一个`old_chrome.exe`. 在网上搜索，我发现 chrome 将自己备份为 old_chrome 以防更新出错，它仍然可以运行某些东西。

那么这样做的方法是创建一个作为安装包的一部分提供的帮助应用程序，您将执行转移到（我认为这在某种程度上是可行的），并且该帮助应用程序执行文件重命名并`chrome.exe`在完成后重新启动？（如果是这样，假设这个帮助应用程序在启动时又被删除`chrome.exe`，解释了为什么我没有看到它坐在那里。）没有办法简单地`chrome.exe`重命名`old_chrome.exe`并复制并启动新`chrome.exe`的存在吗？

如果这是完成类似工作的最佳方式，是否有任何预先构建的解决方案可以做到这一点，我可以将其加入到我的项目中，因为这似乎是相当通用的功能，或者我是否必须推出这样的东西我？

或者，如果有更好的方法，它是什么？（值得一提的是，Chrome 的方法比 Mozilla 使用服务的新方法更优雅、更直接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:07:07.587

好的，得到这个工作，这是它的工作原理。

不需要辅助应用程序。至少在 Windows 上，程序可以就地重命名，只是不能删除。因此，我在我的程序中添加了一个更新程序，它会下载新文件。下载完成后，它会重命名旧的可执行文件，并将新的可执行文件移动到它的位置。

然后，您可以简单地从旧的运行进程中执行新的可执行文件，然后退出旧的。

瞧，不升级旧版本的新版本交换。

# java - MouseClick 上的交替图像

> ID：10340316
> 
> 赞同：-1
> 
> 时间：2012-04-26T19:44:25.590
> 
> 标签：java, image, swing, mouselistener

我正在使用 MouseListener，特别是 MouseClick 和一个图像。图像在面板周围移动。

如何使当我在其当前位置的 30 像素范围内单击时，图像会交替显示？

这是我的框架。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Rebound
{

public static void main (String[] args)
{
   JFrame frame = new JFrame ("Rebound");
   frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

  frame.getContentPane().add(new ReboundPanel());
  frame.pack();
  frame.setVisible(true);
}
} 
```

这是我的小组。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

 public class ReboundPanel extends JPanel
 {
   private final int WIDTH = 300, HEIGHT = 100;
   private final int DELAY = 20, IMAGE_SIZE = 35;

   private ImageIcon image;
   private Timer timer;
   private int x, y, moveX, moveY;
   private ImageIcon image2;

public ReboundPanel()
{
  timer = new Timer(DELAY, new ReboundListener());

  image = new ImageIcon("C:\\happyFace.gif");
  image2 = new ImageIcon("C:\\red smiley.gif");

  x = 0;
  y = 40;
  moveX = moveY = 3;      

  setPreferredSize (new Dimension(WIDTH, HEIGHT));
  setBackground (Color.black);
  addMouseListener(new MousePressListener());
  timer.start();
}

public void paintComponent (Graphics page)
{
   super.paintComponent (page);
   image.paintIcon (this, page, x, y);
}

   class MousePressListener implements MouseListener 
   { 
      public void mousePressed(MouseEvent event) {}
      public void mouseReleased(MouseEvent event) {} 
      public void mouseClicked(MouseEvent event) {

          image = image2;

  } 
  public void mouseEntered(MouseEvent event) {} 
  public void mouseExited(MouseEvent event) {} 
 } 

 private class ReboundListener implements ActionListener
 {
  //--------------------------------------------------------------
  //  Updates the position of the image and possibly the direction
  //  of movement whenever the timer fires an action event.
  //--------------------------------------------------------------
  public void actionPerformed (ActionEvent event)
  {
     x += moveX;
     y += moveY;

     if (x <= 0 || x >= WIDTH-IMAGE_SIZE)
        moveX = moveX * -1;

     if (y <= 0 || y >= HEIGHT-IMAGE_SIZE)
        moveY = moveY * -1;

     repaint();
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:23:44.877

试试这个示例代码并提出任何可能出现的问题：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class LocateMouseExample {   
    /*
     * This is just JFrame, that we be 
     * using as the Base for our Application.
     * Though here we are calling our
     * JPanel (CustomPanel), whose
     * paintComponent(...) method, we had
     * override.
     */
    private void createAndDisplayGUI() {
        JFrame frame = new JFrame("Locate Mouse Position");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        CustomPanel contentPane = new CustomPanel();
        frame.setContentPane(contentPane);  
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String\u005B\u005D args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new LocateMouseExample().createAndDisplayGUI();
            }
        });
    }
}

class CustomPanel extends JComponent {

    private final int SIZE = 50;
    private int imageX = 100;
    private int imageY = 100;
    private int imageIndex;

    private ImageIcon image;
    private ImageIcon firstImage;
    private ImageIcon secondImage;
    private java.net.URL url;

    private Rectangle boundsForMouse;

    public CustomPanel() {
        image = new ImageIcon();
        try {
            url = new java.net.URL("http://gagandeepbali.uk.to/gaganisonline/images/eclipse/caIcon.png");
            firstImage = new ImageIcon(url);
            url = new java.net.URL("http://gagandeepbali.uk.to/gaganisonline/images/swing/share/Keyboard.png");
            secondImage = new ImageIcon(url);
        } catch(Exception e) {
            e.printStackTrace();
        }
        imageIndex = 1;
        image.setImage(firstImage.getImage());

        boundsForMouse = new Rectangle(imageX - 30,
                                        imageY - 30,
                                        firstImage.getIconWidth() + 60,
                                        firstImage.getIconHeight() + 60);       
        setOpaque(true);        
        addMouseListener(new MouseController());         
    }

    private int setImage(int counter) {
        System.out.println("Image Index : " + counter);
        if (counter == 1) {
            image = new ImageIcon();
            image.setImage(secondImage.getImage());
            boundsForMouse = new Rectangle(imageX - 30,
                                        imageY - 30,
                                        secondImage.getIconWidth() + 60,
                                        secondImage.getIconHeight() + 60);
            repaint();
            counter++;
            return (counter);
        } else if (counter == 2) {   
            image = new ImageIcon();    
            image.setImage(firstImage.getImage());
            boundsForMouse = new Rectangle(imageX - 30,
                                        imageY - 30,
                                        firstImage.getIconWidth() + 60,
                                        firstImage.getIconHeight() + 60);
            repaint();
            return (--counter);
        }
        return 1;
    }

    @Override
    public Dimension getPreferredSize() {
        return (new Dimension(500, 500));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.clearRect(0, 0, getWidth(), getHeight());
        g.drawImage(image.getImage(), imageX, imageY, null);
    }

    private class MouseController extends MouseAdapter {
        public void mouseClicked(MouseEvent me) {           
            int xHitOnPanel = me.getX();
            int yHitOnPanel = me.getY();
            System.out.println("X HIT : " + xHitOnPanel);
            System.out.println("Y HIT : " + yHitOnPanel);
            System.out.println("RECTANGLE BOUNDS X : " + boundsForMouse.x);
            System.out.println("RECTANGLE BOUNDS Y : " + boundsForMouse.y);

            if (boundsForMouse.contains(xHitOnPanel, yHitOnPanel))
                imageIndex = setImage(imageIndex);
        }
    }
} 
```

# javascript - JavaScript 代码很慢（JQuery）。有没有办法优化它？

> ID：10340321
> 
> 赞同：-2
> 
> 时间：2012-04-26T19:44:42.587
> 
> 标签：javascript, jquery

我正在做的是在 div ("#gd_graphics_grid") 中绘制矩形，其中 div 充当像素。问题是它有点慢。在 Chrome 上它可能没问题（有点慢），但在 IE 上它是一场噩梦（我知道这很正常，因为 IE JavaScript 引擎很慢）。我想知道是否有办法优化这段代码（尝试过，但没有成功）：

这是生成 div 的 html/php：

```
<div id="gd_graphics">
    <p id="gd_loader">Veuillez patienter!</p>
    <div id="gd_graphics_grid">
         <?php for($row = 0; $row < 73; $row++) : ?>
         <div class="gd_grid_row">
             <?php for($block = 0; $block < 130; $block++) : ?>
             <div class="gd_grid_block"><div class="gd_grid_block_wrap"></div></div>
            <?php endfor; ?>
            <div class="gd_hidden"></div>
         </div>
         <?php endfor; ?>
    </div>
</div> 
```

这是javascript（只有刷新的部分（这会减慢我的代码）：

```
function RefreshDrag()
{
    $(".gd_selected_block").removeClass("gd_selected_block");

    if(startX <= endingX)
    {
        var minX = startX;
        var maxX = endingX;
    }
    else
    {
        var minX = endingX;
        var maxX = startX;
    }

    if(startY <= endingY)
    {
        var minY = startY;
        var maxY = endingY;
    }
    else
    {
        var minY = endingY;
        var maxY = startY;
    }

    var $row = null;
    var $block = null;
    var $left = null;
    var $right = null;
    var $this = null;
    var rowIndex = null;

    $(".gd_grid_row").slice(minY, maxY+1).each(function() {
        $row = $(this);
        rowIndex = $row.index();

        if(rowIndex == minY || rowIndex == maxY)
        {
            $row.children(".gd_grid_block").slice(minX, maxX+1).find(".gd_grid_block_wrap").each(function() {
                $this = $(this);

                $this.addClass("gd_selected_block");
            });
        }
        else
        {
            $left  = $row.children(".gd_grid_block").eq(minX).find(".gd_grid_block_wrap");
            $right = $row.children(".gd_grid_block").eq(maxX).find(".gd_grid_block_wrap");

            $left.addClass("gd_selected_block");

            $right.addClass("gd_selected_block");
        }
    });

} 
```

.gd_selected_block 是一个改变 div 的背景颜色的类（作为一条线）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:53:59.507

你为什么在 2012 年这样做？

使用一些 SVG 库，如[Raphael](http://raphaeljs.com/)或使用[HTML 画布](https://developer.mozilla.org/en/HTML/Canvas)元素。

如果您想坚持自己的风格，请尝试使用 div 边框作为线条，或使用 img 作为线条并重新定位它们，尽管我不确定您到底想要实现什么

# php - SQL 查询不返回任何结果来填充 ComboBox

> ID：10340323
> 
> 赞同：0
> 
> 时间：2012-04-26T19:44:47.767
> 
> 标签：php, mysql

我们有一个使用普通旧 php 5 的艺术家数据库。数据库是 Mysql。我想让选择查询工作，但没有调试方法（print_r 或 var_dump）对我有帮助。也许 mysql_query 和 mysql_num_rows 由于某种原因没有返回任何结果？请查看下面的代码以了解我们正在使用什么。提前感谢您的关注。

```
<!-- BUSCA ARTISTAS 
 -->
<!DOCTYPE html>
<?php
session_start();
include_once 'pessoa/pessoa.php';
include_once 'pessoa/artista.php';
include_once 'pessoa/pessoafisica.php';
include_once 'pessoa/endereco.php';
include_once 'pessoa/email.php';
include_once 'pessoa/telefone.php';
include_once 'banco/banco.php';
include_once 'pessoa/especialidade.php';

?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Busca</title>
        <style type="text/css" media="all">

            table {
                width:800px;
                border-collapse: collapse;
                border: 2px solid #999;
                margin:0 auto;
                font-size: small;
            }
            caption { 
                text-align: right;
                margin-bottom: 0.8em;
                border-bottom: 1px solid #333;
                padding-right: 0.1em;
            }
            thead tr th {
                text-align:center;
                border-bottom: 2px solid #999;
                border-left: 1px solid #999;
            }
            tr td, tr th {
                padding: 2px 1px;
                text-align:left;
                font-size: 1em;
                border: 1px dotted #333;
            } 
            tfoot tr td {
                text-align:center;
                border-top: 2px solid #999;
            }
            /* CSS para efeitos jQuery */
            .impar {background:#add6ef;}
            .par {background:#d6e2e5;}
            /* Fim CSS para efeitos jQuery */
        </style>
        <link rel="stylesheet" type="text/css" href="estiloformulario.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery.maskedinput.js"></script>
        <script type="text/javascript" >
            $(document).ready(function() {
                $('table#horario tbody tr:odd').addClass('impar');          
                $('table#horario tbody tr:even').addClass('par');           
            });  
        </script>
    </head>

    <body>
        <?php
            if (!isset($_SESSION['funcionario'])){
                $user = unserialize($_SESSION['funcionario']);
                echo "<p>Você não esta autorizado para acessar essa area do sistema</p>";
            }  // verificação para o login
        ?> 
        <div class="global-div">

            <form method="post" action="buscahabilidade.php" > 
                <fieldset>

                    <legend>Busca Habilidade</legend></br>
                        <label  for="descricao" accesskey="">Habilidade:</label>
                            <select name="descricao" id="descricao">
                            <option value="descricao"> >> Selecione </option>
                                <?php
                                Banco::conecta();

                                //clausula sql
                                $sql = "SELECT especialidade.cod_especialidade,especialidade.descricao FROM especialidade ORDER BY especialidade.descricao";

                                //executa a clausula sql
                                $executar = mysql_query($sql)or die("Falha na execução da instrução SQL! ");

                                //Verifica se a busca retornou resultado!
                                while($row = mysql_fetch_array($executar))
                                {
                                    echo "<option value='".$row['cod_especialidade']."'>".$row['descricao']."</option>";
                                }
                                ?>

                            </select> 
                            <button name="cadastrar" type="submit">Buscar</button>
                        </label>

                </fieldset>
            </form>

            <?php
            if (isset($_POST['cadastrar'])) {
                $sql1 = "SELECT pessoa.nome,pessoa.cod_pessoa,pessoa.ativo,pessoa.data_cadastro,especialidade.descricao
                FROM pessoa INNER JOIN artista ON pessoa.cod_pessoa=artista.pessoa_cod_pessoa INNER JOIN artista_has_especialidade
                ON artista.cod_artista=artista_has_especialidade.artista_cod_artista INNER JOIN especialidade ON artista_has_especialidade.especialidade_cod_especialidade=especialidade.cod_especialidade
                WHERE especialidade.descricao LIKE '%".$_POST['descricao']."%'order by 1";

                // executa a query no banco de dados
                $executar = mysql_query($sql1)or die ("Query failed: " . mysql_error() . " Actual query: " . $sql1);;
                var_dump(mysql_query($sql1));
                var_dump(mysql_num_rows($executar));

                // conta o total de resultados encontrados
                $total = mysql_num_rows($executar) or die(mysql_error()); 

                // mensagem se o resultado for vazio
                // define valores se o resultado não for vazio

                echo $total;

                // gera o loop com os resultados
                echo"<table id=\"horario\">";
                echo"<caption>";
                    echo"Resultados da busca.";
                echo"</caption>";
                echo"<thead>";
                    echo"<tr id=\"horizontal\">";
                        echo"<th>Nome</th>";
                        echo"<th scope=\"col\">Código</th>";
                        echo"<th scope=\"col\">Detalhes</th>";
                        echo"</tr>";
                echo" </thead>";
                echo" <tfoot>";
                  echo"<tr>";
                       echo" <td colspan=\"6\">Resultados da busca.</td>";
                   echo" </tr>";
                echo"</tfoot>";
                echo"<tbody>"; // provavelmente o while começa aqui 
                $i=0;
                $codigocarregaartista=array();
                while ($linha = mysql_fetch_array($executar)) {
                var_dump($linha);
                echo $linha['nome']." ".$linha['cod_pessoa'];
                       $i++;
                       echo" <tr>";
                       echo" <th scope=\"row\">".$linha['nome']."</th>";
                       echo" <td>".$linha['cod_pessoa']."</td>";
                       $codigocarregaartista[$i]=$linha['cod_pessoa'];                 
                       echo"  <td><a href=\"layoutartista.php?cod=".$codigocarregaartista[$i]."\">Detalhes/Altera</a></td>";
                       // link dinamico para alteracliente.php
                       echo" </tr>";
                       }
                 echo" </tbody>";
            echo"</table>";
            }
            ?>
        </div>

        <!-- ListBox stuff == .js + SpryValidationSelect.css(integrated estiloformulario.css)-->
        <script type="text/javascript">
            var spryselect1 = new Spry.Widget.ValidationSelect("spryselect1");
        </script>

    </body>
</html> 
```

# asp.net - 如果日期值小于当前日期，如何隐藏它？

> ID：10340327
> 
> 赞同：0
> 
> 时间：2012-04-26T19:45:08.343
> 
> 标签：asp.net

我有以下日期下拉列表选项：

```
<asp:DropDownList id="eventsDate" runat="server">
   <asp:ListItem Value="04/31/2012">Apr 31, 2012</asp:ListItem>
   <asp:ListItem Value="05/21/2012">May 21, 2012</asp:ListItem>
   <asp:ListItem Value="07/22/2012">Jul 22, 2012</asp:ListItem>
   <asp:ListItem Value="10/16/2012">Oct 16, 2012</asp:ListItem>
   <asp:ListItem Value="11/12/2012">Nov 12, 2012</asp:ListItem>
   <asp:ListItem Value="12/18/2012">Dec 18, 2012</asp:ListItem>
</asp:DropDownList> 
```

如果下拉列表中的任何日期小于今天的日期，请将其隐藏。

例如，今天是 2012 年 4 月 26 日。假设下拉列表中的第一个日期是 2012 年 4 月 25 日，它不应该出现在下拉列表中。

我正在画空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:49:56.723

您应该在数据源本身中停止它 - 因为它没有任何用于预绑定的事件方法（就像中继器一样 - ItemCreated 事件）...

因此，如果您的 dataTable 具有所有值，则应将其过滤为：

```
var myNewData = (from  a in dt.AsEnumerAble() where DateTime.Parse(a["time"])<DateTime.Now.Date.AddDays(1) select a).CopyToDataTable() 
```

## 编辑

DropDownlist 控件没有任何方法可以告诉您：“好的，我要添加一个新项目，您可以检查他并告诉我是否添加它”

你在 DropDownlist 中没有这个功能。

唯一的选择（我看到）是在获得结果时对其进行过滤。

假设您在数据表中获得它 - 您应该创建一个仅包含相关项目的新数据表。

我写的代码是在 Linq2XML 中。

你只需要添加：

使用 system.linq；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:37:57.397

如果您可以从最好的选择的数据源中过滤它，但如果不能尝试这样的事情：

```
eventsDate.Items.Cast<ListItem>().Select(
    i => i.Attributes["display"] = DateTime.Parse(i.Value) >= DateTime.Today ? "block" : "none"); 
```

# java - 在 restful post 中使用 XML

> ID：10340333
> 
> 赞同：2
> 
> 时间：2012-04-26T19:45:32.773
> 
> 标签：java, xml, web-services, jax-rs

我最近一直在做很多谷歌搜索，试图找到一个体面的文档/教程来在 Web 服务的 JAVA RestFUL 实现中使用 XML。我的要求很简单

*   我想使用 XML

这意味着我需要原始的 XML。我不需要任何 JAXB 绑定或任何异议对话。有人可以指点我一些不错的教程或在这里发布一些东西吗

```
@POST
@Consumes(MediaType.APPLICATION_XML)
public void consumeXML (/*something here- duno what*/){
    //something here as well
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:04:47.163

我建议将 an 指定`InputStream`为方法参数。

```
@POST
@Consumes(MediaType.APPLICATION_XML)
public void consumeXML ( InputStream xml ){
    //do something with the XML string
} 
```

然后`InputStream`可以使用任意数量的技术进行处理：DOM、SAX、StAX、JAXB 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:50:04.377

```
public void consumeXML ( String xml ){
    //do something with the XML string
} 
```

# regex - 为什么另一个涉及电话号码 REGEX 的 StackOverflow 帖子中的感叹号？

> ID：10340336
> 
> 赞同：8
> 
> 时间：2012-04-26T19:45:40.323
> 
> 标签：regex

在[电话号码验证的综合正则表达式中](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)，接受的答案有许多评论。@jcmcbeth 的其中一条评论建议使用以下简单的正则表达式来获取用户提交的电话号码的数字：

```
string.replace("[^\d+!x]", "") 
```

在使用这个建议的正则表达式的评论之后，另一个提问者立即提出`why the !x part?`，然后在下一条评论中回答：`The !x is there to keep any "x" character from getting stripped`。

这对我来说很有意义，除了感叹号`!`。查看正则表达式中字符类的文档，我没有看到感叹号是一个特殊字符，而且在我看来，它`x`前面不需要一个特殊字符。此外，从链接问题的讨论中，我没有看到任何评论表明感叹号可能是电话号码的一部分（这将解释它包含在否定字符类中）。

有人可以向我解释为什么会出现感叹号吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T21:01:30.460

你完全正确，`x`这就足够了。 `!`只匹配文字`!`，在字符类内部或外部。它具有任何特殊含义的唯一地方是它是负前瞻或负后瞻的一部分。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-06T19:11:33.827

肯定 的`[^\d+!x]` 意思是“NOT `'\'`, NOT `'d'`, NOT `'+'`, NOT`'!'`和 NOT `'x'`”。

`[ ]`是一个字符组。

`[^ ]`否定字符列表。

# android - 在 GridView 中水平和垂直居中视图组

> ID：10340339
> 
> 赞同：0
> 
> 时间：2012-04-26T19:45:50.393
> 
> 标签：android, android-layout, gridview

我目前正在实现一个 GridView，它连接到一个包含任意数量元素的自定义适配器。

然后，这些元素中的每一个都显示在一个自定义 ViewGroup 中，该 ViewGroup 由一个带有 ImageView 和两个 TextView 的垂直 LinearLayout 组成。我正在根据可用的屏幕空间计算 ViewGroup 的宽度，并希望将其在网格内水平和垂直居中。问题是项目显示在屏幕的最左边（没有任何填充）和屏幕的最右边（也没有任何填充）。如果我为整个 GridView 设置填充或边距，滚动条将位于项目的侧面，而不是看起来很糟糕的屏幕边框。这就是为什么我不想为 GridView 设置填充但将其中的元素居中。

这是我的 GridView 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
   android:id="@+id/launchLayout"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <LinearLayout 
      android:orientation="vertical"
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent">

      <com.markupartist.android.widget.ActionBar
          android:id="@+id/actionbar"
          style="@style/ActionBar"
        />

     <GridView
           android:id="@+id/grid"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
        android:verticalSpacing="@dimen/launch_grid_padding"
        android:horizontalSpacing="@dimen/launch_grid_padding"
           android:numColumns="auto_fit"
           android:stretchMode="columnWidth"
           android:gravity="center"
           android:listSelector="#00000000"
           android:layout_marginTop="@dimen/launch_grid_padding"
           android:layout_marginBottom="@dimen/launch_grid_padding"
     />
   </LinearLayout>

</RelativeLayout> 
```

@dimen/launch_grid_padding 的值为 20dp。

这是我的自定义 ViewGroup 的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/rounded_box"
    android:layout_gravity="center"
>
  <ImageView 
      android:id="@+id/img"
      android:layout_width="120dp"
      android:layout_height="84dp"
      android:scaleType="centerInside"
  />
  <TextView
       android:id="@+id/identifier1"
       android:layout_width="120dp"
       android:layout_height="wrap_content"
       android:background="@android:color/white"
       android:gravity="left|center_vertical"
       android:typeface="sans"
       android:textStyle="bold" 
       android:textColor="#333333"
       android:textSize="12dp"
       android:lines="1"
       android:ellipsize="marquee"
  />
  <TextView
       android:id="@+id/identifier2"
       android:layout_width="120dp"
       android:layout_height="wrap_content"
       android:textColor="#333333"
       android:background="@android:color/white"
       android:gravity="left|center_vertical"
       android:textSize="10dp"
       android:lines="1"
  />
</LinearLayout> 
```

这或多或少是我想要完成的（使用可变数量的项目）：

[http://www.appdesignvault.com/wp-content/uploads/2012/04/iphone-app-design-bizapp-5.jpg](http://www.appdesignvault.com/wp-content/uploads/2012/04/iphone-app-design-bizapp-5.jpg)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:23:07.240

指定`android:columnWidth`和设置`android:stretchMode="spacingWidthUniform"`并摆脱`android:horizontalSpacing`和`android:verticalSpacing`。我希望这能解决问题。

# wpf - 使用 xaml 基于单选按钮选择加载不同的用户控件

> ID：10340342
> 
> 赞同：0
> 
> 时间：2012-04-26T19:46:02.570
> 
> 标签：wpf, xaml

我有 N 个单选按钮，并且基于单选按钮选择，我想在 wpf 应用程序中显示 N 个用户控件中的一个用户控件。我想使用更少的代码和更多的 xaml 任何人都可以为此提出好的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:27:21.067

首先，将要显示的所有控件放入 XAML。（如果您愿意，可以放在彼此之上...）然后，将以下代码放入每个控件中，以打开和关闭控件的可见性。

```
Visibility="{Binding Path=IsMyControlVisible, Converter={StaticResource BooleanToVisibilityConverter}}" 
```

在后面的代码中，为要显示/隐藏的每个控件实现一个属性（对于上述控件，请调用属性“IsMyControlVisible”。

然后，将您的单选按钮 IsChecked 绑定到您的 IsMyControlVisible 属性。

```
IsChecked="{Binding IsMyControlVisible, Mode=OneWayToSource, FallbackValue=false }" 
```

最后，如果您只是对 IsMyControlVisible 属性使用代码隐藏，则应将以下内容放入您的 xaml 中，以便您的控件将数据上下文设置为代码隐藏：

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:47:28.827

你所拥有的是一个列表（描述行为的标题；用户控制）。
所以定义 MyUserOptions ：一个具有 ControlCaption 和 UserControl 作为公共属性的类。
建立一个这样的'MyUserOptions'列表

在 ListView 中显示该列表，具有所选项目所需的外观，MyUserOptions 的 dataTemplate 仅显示标题。在该列表视图下方，放置一个 ContentControl，它具有 listView SelectedItem 作为 DataContext，并绑定到 UserControl 属性。

# javascript - 使用 Javascript 命名空间/单例将不接受传递给成员方法的参数

> ID：10340352
> 
> 赞同：1
> 
> 时间：2012-04-26T19:46:51.173
> 
> 标签：javascript, function, namespaces, singleton, arguments

恐怖代码：

```
var namespace = new function ()
{
    this.saySomething = new function( something )
    {
        console.log( something );
    };
}

namespace.saySomething( "whatever" ); 
```

当我期望它输出“任何”时，它会输出“未定义”。怎么会？解决办法是什么？我的目标无非是拥有一个命名空间，我可以在其中放置一些辅助函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:51:23.150

[`new function`通常是不稳定的。](https://stackoverflow.com/questions/2274695/new-function-with-lower-case-f-in-javascript)Rob W 的回答是绝对正确的（+1'd），但我个人会更进一步并[删除所有`new`ing](http://jsfiddle.net/mattball/hEVPH/)：

```
var namespace = 
{
    saySomething: function( something )
    {
        console.log( something );
    }
}

namespace.saySomething( "whatever" ); 
```

如果您希望能够创建不同的实例，[请以正确的方式进行](http://jsfiddle.net/mattball/KXgvL/)：

```
function Namespace() {}
Namespace.prototype.saySomething = function (something)
{
    console.log(something);
}

// Usage:
var foo = new Namespace();
foo.saySomething("Hallllooooo!"); 
```

...尽管您确实说过“单身”，所以我猜这与您的目标无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:48:34.153

删除`new`之前`function(something){...}`。目前，`saySomething`是匿名构造函数的一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T19:52:36.957

您不需要`new`在函数之前使用。`new`仅在已定义构造函数时用于实例化对象。

您的代码应如下所示：

```
var namespace = {
    saySomething: function(something) {
        console.log(something);
    }
}

namespace.saySomething("whatever"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T21:08:57.213

我会使用类似以下的内容，因为您还想确保命名空间不会被其他代码覆盖。

```
var namespace = (function() {
      return {
          saySomething: function(something) {
               console.log(something);
          }
      };
})();

namespace.saySomething("whatever"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:51:14.020

应该这样做，示例[http://jsfiddle.net/Jssxy/](http://jsfiddle.net/Jssxy/)

```
var namespace = {
    saySomething : function(something) {
        console.log(something);
    }
}

namespace.saySomething( "whatever" );​ 
```

# android - 在 Android 上将 Phonegap 应用程序作为服务运行

> ID：10340357
> 
> 赞同：1
> 
> 时间：2012-04-26T19:46:59.183
> 
> 标签：android, service, cordova

我正在尝试使用 phonegap/cordova 开发一个包含音乐播放器的应用程序。我希望在应用程序失去焦点后继续在后台播放音乐。从我所做的研究看来，在 Android 平台上完成此任务的唯一方法是从服务运行媒体操作。

不幸的是，Phonegap 没有提供任何 javascript 挂钩来执行此操作（这是有道理的，因为这将是设备特定的功能）。我正在寻找利用 phonegap API 的方法，但允许音乐在 Android 的后台播放。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:56:26.870

您可能需要提供一个 Android 服务（即 java 和/或 ndk）来处理后台播放，并从 phonegap 下使用的 javascript/html 触发它。

您可以通过多种方式进行交互 - 我将概述它们，实际实施可能需要一些额外的步骤。

*   您可以注册自定义 java 方法，使其可供 javascript 程序访问，这些可以是普通 android 活动服务交互的包装器。

*   您可以设置一个自定义意图 URL，您的播放器（或它的前面的东西）在平台上注册，以使用文档中的超链接处理和触发它

*   您可以拥有一个监听本地套接字并通过 javascript 联系它的 android 服务（您可能需要对 phonegap 进行扩展才能这样做）

# php - Zend gdata Framework Google Docs - 过时的文件类型需要修复

> ID：10340360
> 
> 赞同：0
> 
> 时间：2012-04-26T19:47:05.880
> 
> 标签：php, zend-framework, google-docs-api, google-drive-api

这个框架已经**过时**并且不支持**所有类型的文件**上传，所以我决定修复这个框架。

在**Zend_Gdata_Docs 类中**

我通过添加条目 JPG/JPEG/PPTX 来做到这一点

```
private static $SUPPORTED_FILETYPES = array(
      'JPG'=>'image/jpeg',
      'JPEG'=>'image/jpeg',
      'TXT'=>'text/plain',
      'CSV'=>'text/csv',
      'TSV'=>'text/tab-separated-values',
      'TAB'=>'text/tab-separated-values',
      'HTML'=>'text/html',
      'HTM'=>'text/html',
      'DOC'=>'application/msword',
      'ODS'=>'application/vnd.oasis.opendocument.spreadsheet',
      'ODT'=>'application/vnd.oasis.opendocument.text',
      'RTF'=>'application/rtf',
      'SXW'=>'application/vnd.sun.xml.writer',
      'XLS'=>'application/vnd.ms-excel',
      'XLSX'=>'application/vnd.ms-excel',
      'PPT'=>'application/vnd.ms-powerpoint',
      'PPTX'=>'application/vnd.ms-powerpoint',
      'PPS'=>'application/vnd.ms-powerpoint'); 
```

它对 .pptx 和 jpeg/jpg 工作正常，上传工作完全正常，但一旦在 Google Docs 中，它就会像文档一样显示......

那里：

![图片谷歌文档](../Images/a38107d814b907dcc8f090713acbf34d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:37:50.757

您的图片正在转换为 Google Docs 原生格式，要将它们作为文件上传，您必须将 ?convert=false 附加到上传 uri：

[https://developers.google.com/google-apps/documents-list/#creating_or_uploading_drawings](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_drawings)

# javascript - jQuery FullCalendar 不呈现

> ID：10340362
> 
> 赞同：14
> 
> 时间：2012-04-26T19:47:10.060
> 
> 标签：javascript, json, fullcalendar, render

我的网站上有一个可用的完整日历，但是，在您更改月份/年份或选择“今天”之前，实际的日历表不会显示。

如果我查看渲染的源代码，我会看到桌子周围的 div 是空的，直到我按下按钮。

```
<div style="position: absolute; -moz-user-select: none;" class="fc-view fc-view-month fc-grid" unselectable="on"></div> 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-27T04:22:35.623

您是否在选项卡或对话框中有此日历，最初是隐藏在视图中的？

如果是这样，您需要在该控件处于活动状态时显式呈现 fullCalendar。

假设您正在使用 jQuery UI 选项卡小部件，并且在第二个选项卡中有 FullCalendar（在选择第二个选项卡之前它是隐藏的）。在这种情况下，您可以执行以下操作：

```
$('#tabs').tabs({
    show: function(event, ui) {
        $('#calendar').fullCalendar('render');
    }
}); 
```

这可确保在显示选项卡时呈现日历。希望这可以帮助！

# apache-flex - 需要 SSL 用户证书的 Flex UrlLoader 请求

> ID：10340363
> 
> 赞同：4
> 
> 时间：2012-04-26T19:47:23.867
> 
> 标签：apache-flex, ssl, ssl-certificate

我有一个 Flex 应用程序，它访问需要 SSL 客户端身份验证的 URL。这些请求在 Firefox 和 Chrome 中运行良好。Chrome 和 Firefox 显示选择用户证书的提示，然后请求成功完成。在 Internet Explorer 中没有提示。请求返回：

> 错误 #2032：流错误。网址：[https://MyServer/Path/test.txt](https://MyServer/Path/test.txt)

我通过在我的 index.html 文件中创建一个标签来解决这个问题，该标签将安全端点连接到一个空白 JavaScript 文件，提示输入证书。加载空白 JavaScript 文件后，一切都在 Flex 应用程序中运行。这样做的问题是应用程序将访问多个需要用户证书的端点；一些我不知道的。他们没有我可以加载的已知空白端点（由于 JS 异常，我不想将他们尝试加载的 URL 放入脚本标签中）。

关于如何让 Internet Explorer 在对安全端点的初始请求时提示我输入用户证书的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T18:18:21.800

我没有对此进行测试，但是您可以尝试以下方法：

*   使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)从您的 Flex 应用程序中调用一些 JS。此 JS 将向您希望验证证书的网站发出请求。例如，您可以在隐藏的 iframe 中加载网站的主页。

*   监听 iframe 的 'load' 事件以在 iframe 内容加载时通知 flex 应用程序 ( `iframe.addEventListener('load', someFunction, false);`)。同样，使用 ExternalInterface 通知 Flex 应用程序。

我希望它有所帮助。

# rest - $.ajax 不适用于 GET

> ID：10340367
> 
> 赞同：1
> 
> 时间：2012-04-26T19:48:00.760
> 
> 标签：rest, jquery

我有 XML 和 JSON 格式的 REST 服务：

[http://localhost:5050/rest/rest/report/check/](http://localhost:5050/rest/rest/report/check/) {id}/{checksum}.xml [http://localhost:5050/rest/rest/report/check/](http://localhost:5050/rest/rest/report/check/) {id}/{checksum}.json

示例：调用[http://localhost:5050/rest/rest/report/check/420/339d9146ddd3d6646a1fe93ddf4d7ab8c4a51c61.xml](http://localhost:5050/rest/rest/report/check/420/339d9146ddd3d6646a1fe93ddf4d7ab8c4a51c61.xml)将返回结果：

```
<report>
  <id>420</id>
  <checksum>339d9146ddd3d6646a1fe93ddf4d7ab8c4a51c61</checksum>
  <checksumValid>true</checksumValid>
  <reportName>sprawozdanie 1</reportName>
  <userName>John Smith</userName>
  <state>robocze</state>
</report> 
```

现在我想从 JQuery 调用那个 REST 服务（xml 或 json，我不在乎）。

我要做的是：

```
$.ajax({
    type:"GET",
    url:"http://127.0.0.1:5050/rest/rest/report/check/" + obj.id + "/" + obj.checksum + ".xml",
    success:function (data, textStatus) {
        alert('success...');
    },
    error:function (xhr, ajaxOptions, thrownError) {
        alert("thrown: '" + thrownError + "', status: '" 
        + xhr.status + "', status text: '"
         + xhr.statusText + "'");
    }
}); 
```

最后我调用了错误函数，结果是：

**抛出：''，状态：'0'，状态文本：'错误'**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:49:44.833

您需要使用`localhost`而不是`127.0.0.1`由于同源策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:58:04.797

同意同源政策。这是测试是否是这种情况的快速方法：

1.  通过命令行启动 chrome，使用“--user-data-dir=C:\deleteAfterwards --disable-web-security”
2.  尝试相同的查询

如果它有效，那么您的问题是同源政策。这个策略对于在开发环境中工作来说是一种痛苦，因为您必须将 Web 服务托管在与托管 JavaScript 的站点相同的主机上（不允许使用别名）和端口。

您可以使用代理通过同一服务器托管服务和网站。这篇文章是 Apache (WAMP) 的一个很好的参考，如果你碰巧使用的是：

*   [WAMP 中的 Apache 代理设置](http://java-wisdom.blogspot.com/2010/11/apache-proxy-configuration-and-load.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:55:04.047

好的，所以这个问题是微不足道的，显然我前段时间曾经使用过它并忘记了它（该死的我需要一个 wiki :) ）。

无论如何，问题都是所谓的“跨域”，这在我的 spring-mvc 休息项目中被 deafult 禁止。

我所做的是创建一个新的过滤器

```
public class OptionsHeadersFilter implements Filter {

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)
            throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;

        response.setHeader("Access-Control-Allow-Origin", "*");
        response.setHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE");
        response.setHeader("Access-Control-Max-Age", "360");
        response.setHeader("Access-Control-Allow-Headers", "x-requested-with");

        chain.doFilter(req, res);
    }

    public void init(FilterConfig filterConfig) {
    }

    public void destroy() {
    }
} 
```

并将其添加到我的 web.xml

```
<filter>
    <filter-name>OptionsHeadersFilter</filter-name>
    <filter-class>poi.rest.OptionsHeadersFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>OptionsHeadersFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# jquery - 如何使 Uploadify 队列可滚动

> ID：10340368
> 
> 赞同：0
> 
> 时间：2012-04-26T19:48:02.257
> 
> 标签：jquery, html, css, uploadify

只是一个快速的问题，我找不到答案。如何使上传队列 div 可滚动。我注意到排队的文件被保存到一个名为`uploadify-queue`. 我尝试`uploadify.css`通过添加来修改`width`，但不起作用。我认为队列文件是浮动的。`height``overflow`

我的 HTML 结构：

```
<div id="Uploader">
  <div id="UploaderSpot">
    <div id="UploaderField">
      // this content is replaced by Uploadify
    </div>
  </div>
</div> 
```

我的问题是 div`UploaderSpot`有一个固定的高度和高度，如果我选择上传 100 个文件，这些文件会在外面排队`UploaderField`...

例子： ![在此处输入图像描述](../Images/ea10944f05ae8e0d30e1aa4da96527fd.png)

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:00:50.397

问题是 Uploadify 在里面创建了一个子容器 DIV。试试这个样式：

```
<style type="text/css">
.uploadifyQueue {
     height: 200px;
     overflow: scroll;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:45:17.237

最好的方法是使用 queueID 选项并创建您自己的队列容器。

```
<input type="file" name="file_upload" id="file_upload" />
<div id="my_queue"></div> 
```

然后在您的 Uploadify 呼叫中：

```
$('#file_upload').uploadify({
    ...
    queueID : 'my_queue'
}); 
```

并使用以下样式对其进行样式设置：

```
#my_queue {
    height: 200px;
    overflow: auto;
} 
```

只有当它通过`overflow: auto;`队列的边界时，滚动条才会出现。

# android - 在 Android 上使用 onClick() 事件时出错

> ID：10340370
> 
> 赞同：0
> 
> 时间：2012-04-26T19:48:06.783
> 
> 标签：android, android-activity

我是 Android 新手，我已经启动了一个新手应用程序来玩事件侦听器，当我点击它时它会更改按钮的文本......遵循开发人员指南（[http://developer.android.com /guide/topics/ui/ui-events.html#EventListeners](http://developer.android.com/guide/topics/ui/ui-events.html#EventListeners)），我创建了带有视图（ TextView 和 Button ）和主 Activity 的布局。但是当我编译 de 代码时，将 .apk ( Eclipse ) 发送到 ADV 并启动应用程序时，我得到了错误列表：

```
04-26 21:37:22.615: D/dalvikvm(637): Not late-enabling CheckJNI (already on)
04-26 21:37:23.845: I/dalvikvm(637): threadid=3: reacting to signal 3
04-26 21:37:24.205: I/dalvikvm(637): Wrote stack traces to '/data/anr/traces.txt'
04-26 21:37:24.805: D/AndroidRuntime(637): Shutting down VM
04-26 21:37:24.805: W/dalvikvm(637): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-26 21:37:24.906: E/AndroidRuntime(637): FATAL EXCEPTION: main
04-26 21:37:24.906: E/AndroidRuntime(637): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.examples.fragmentos/com.examples.fragmentos.TestFragmentosActivity}: java.lang.NullPointerException
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.os.Looper.loop(Looper.java:137)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-26 21:37:24.906: E/AndroidRuntime(637):  at java.lang.reflect.Method.invokeNative(Native Method)
04-26 21:37:24.906: E/AndroidRuntime(637):  at java.lang.reflect.Method.invoke(Method.java:511)
04-26 21:37:24.906: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-26 21:37:24.906: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-26 21:37:24.906: E/AndroidRuntime(637):  at dalvik.system.NativeStart.main(Native Method)
04-26 21:37:24.906: E/AndroidRuntime(637): Caused by: java.lang.NullPointerException
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.Activity.findViewById(Activity.java:1794)
04-26 21:37:24.906: E/AndroidRuntime(637):  at com.examples.fragmentos.TestFragmentosActivity.<init>(TestFragmentosActivity.java:12)
04-26 21:37:24.906: E/AndroidRuntime(637):  at java.lang.Class.newInstanceImpl(Native Method)
04-26 21:37:24.906: E/AndroidRuntime(637):  at java.lang.Class.newInstance(Class.java:1319)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-26 21:37:24.906: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
04-26 21:37:24.906: E/AndroidRuntime(637):  ... 11 more
04-26 21:37:25.415: I/dalvikvm(637): threadid=3: reacting to signal 3
04-26 21:37:25.485: I/dalvikvm(637): Wrote stack traces to '/data/anr/traces.txt'
04-26 21:37:26.325: I/dalvikvm(637): threadid=3: reacting to signal 3
04-26 21:37:26.375: I/dalvikvm(637): Wrote stack traces to '/data/anr/traces.txt'
04-26 21:37:26.535: I/dalvikvm(637): threadid=3: reacting to signal 3
04-26 21:37:26.655: I/dalvikvm(637): Wrote stack traces to '/data/anr/traces.txt'
04-26 21:42:26.155: I/Process(637): Sending signal. PID: 637 SIG: 9 
```

这是代码：

```
package com.examples.fragmentos;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class TestFragmentosActivity extends Activity {

    Button b = ( Button )findViewById( R.id.buttonInfo );

    /** Called when the activity is first created. */
    @Override
    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );

        b.setOnClickListener( mbuttonInfoListener );

        setContentView(R.layout.main);
    }

    // Create an anonymous implementation of OnClickListener
    private OnClickListener mbuttonInfoListener = new OnClickListener() {

        public void onClick( View v ) {
          b.setText("Ey, don't touch me!");
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:52:38.920

问题是初始化`b`：

```
Button b = ( Button )findViewById( R.id.buttonInfo ); 
```

只有在设置好activity的内容后，即调用**后**才能找到views `setContentView()`。

尝试这个：

```
private Button b;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    b = (Button)findViewById(R.id.buttonInfo);
    b.setOnClickListener(mbuttonInfoListener);
} 
```

另外，请确保您`buttonInfo`的布局中有一个 id 设置为的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:51:27.130

您在新活动中有 NullPointerException。它已正确启动但崩溃。错误显示在这里：

```
04-26 21:37:24.906: E/AndroidRuntime(637): Caused by: java.lang.NullPointerException
04-26 21:37:24.906: E/AndroidRuntime(637):  at ndroid.app.Activity.findViewById(Activity.java:1794)
04-26 21:37:24.906: E/AndroidRuntime(637):  at com.examples.fragmentos.TestFragmentosActivity.init>(TestFragmentosActivity.java:12) 
```

检查 TestFragmentosActivity 第 12 行中的代码，因为问题在那里。

编辑 -

我猜第 12 行是这样的：

```
Button b = ( Button )findViewById( R.id.buttonInfo ); 
```

您正在尝试在创建视图之前获取视图。这应该在您使用 setContentView 设置视图后调用。一种简单的解决方案是像这样声明对象：

```
Button b; 
```

并在 onCreate 函数的末尾添加：

```
b = ( Button )findViewById( R.id.buttonInfo ); 
```

# java - 如何使用 selenium webdriver 发送 cookie？

> ID：10340373
> 
> 赞同：37
> 
> 时间：2012-04-26T19:48:22.460
> 
> 标签：java, selenium, webdriver

每次我运行测试时，第一步都是登录，然后我就会进入想要的页面。如果运行这个测试经常登录操作需要很多时间。

我怎样才能通过登录操作？

使用 Chrome 和 Firefox 驱动程序，java 语言。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-27T14:01:39.537

[使用Java API](https://selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.Options.html#addCookie%28org.openqa.selenium.Cookie%29)创建 cookie ，如下所示：

```
Cookie ck = new Cookie("name", "value");
driver.manage().addCookie(ck); 
```

[使用Python API](http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.add_cookie)创建 cookie ，如下所示：

```
driver.add_cookie({'name': 'foo', 'value': 'bar'}) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-10-28T20:52:01.007

对于那些需要设置更详细信息的人`Cookie`，`name`您`value`可以使用：

```
Cookie cookie = new Cookie.Builder("name", "value")
    .domain(".mydomain.com")
    .expiresOn(new Date(2015, 10, 28))
    .isHttpOnly(true)
    .isSecure(false)
    .path("/mypath")
    .build();

driver.manage().addCookie(cookie); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-28T12:12:36.050

```
driver.manage().addCookie(); 
```

[管理（）](https://selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.html#manage%28%29)

[带有 Cookie 的选项接口](https://selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.Options.html)

以及 Selenium 对[Cookie的实现](https://selenium.dev/selenium/docs/api/java/org/openqa/selenium/Cookie.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T04:48:58.043

就我而言，以下代码运行良好-

```
String token = tokenValue.substring(7);
    Cookie name = new Cookie("Token", token);
    driver.manage().addCookie(name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T06:40:08.207

Cookie 无法加载到某些网站上，因此，我处理此问题的方法是创建一个用户配置文件/数据文件夹。然后，我的浏览器就像普通浏览器一样运行，您不必自己手动存储 cookie。

爪哇

```
ChromeOptions options = new ChromeOptions();
options.addArguments("user-data-dir=USER_DATA_PATH");
driver = new ChromeDriver(options); 
```

Python

```
chrome_options = Options()
chrome_options.add_argument(f"user-data-dir={USER_DATA_PATH}") 
driver = webdriver.Chrome(options=chrome_options) 
```

# dependency-injection - 这是通过使用构造函数注入来避免 ServiceLocator 模式的正确方法吗？

> ID：10340375
> 
> 赞同：0
> 
> 时间：2012-04-26T19:48:26.737
> 
> 标签：dependency-injection, mef, service-locator, common-service-locator

这是通过使用构造函数注入来避免 ServiceLocator 模式的正确方法吗？

```
public interface IEntitySomethingBase<TEntity>
{
    //Stuff
}

public class AccountEntitySomething : IEntitySomethingBase<Account>
{
    //Stuff
}

public class CustomerEntitySomething : IEntitySomethingBase<Customer>
{
    //Stuff
}

public class OrderEntitySomething : IEntitySomethingBase<Order>
{
    //Stuff
}
//Ditto, any number 
```

使用我想避免的 ServiceLocator 消费类。

```
public class MyConsumingClass
{
    public object DoSomething<TEntity>(TEntity entity)
        where TEntity : class
    {
        var thing = ServiceLocator.Current.GetInstance<IEntitySomethingBase<TEntity>>();
    }
} 
```

使用 MEF 的解决方案。修改上面的 *EntitySomething's 以导出，并且

```
public class MyConsumingClass
{
    private List<Lazy<IEntitySomethingBase<Object>>> _things;

    [ImportingConstructor]
    public MyConsumingClass([ImportMany] List<Lazy<IEntitySomethingBase<Object>>> things)
    {
        _things = things;
    }

    public object DoSomething<TEntity>(TEntity entity)
        where TEntity : class
    {
        var thing = _things.Cast<IEntityInformationExtractor<TEntity>>().Where(t => t.GetType().FullName == entity.GetType().FullName).FirstOrDefault();
    }
} 
```

实际上还没有尝试过，但想知道是否还有其他方法可以实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:41:14.560

如果我的理解是正确的，你需要一个工厂

您试图实现的目标实际上已经变得非常普遍，这是因为 IoC 容器在应用程序启动时解析依赖项，并且在大多数应用程序中，需要根据某些约束注入所需的依赖项。

现代 IoC 容器试图解决这个问题，比如 Guice for Java

阅读本文以获取有关工厂的更多信息：

[https://github.com/ninject/ninject.extensions.factory/wiki](https://github.com/ninject/ninject.extensions.factory/wiki)

您需要一个工厂来根据参数创建正确的类型，并且您可以在工厂内部调用您的服务定位器（我知道您正在使用服务定位器反模式，但您正在将其从您的域中移出对于工厂而言，工厂仅用于连接对象，因此在工厂内部调用 IoC 很常见）。

以供参考：

[http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded](http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded)

# ios - UITableView 中的占位符单元格

> ID：10340376
> 
> 赞同：1
> 
> 时间：2012-04-26T19:48:30.120
> 
> 标签：ios, ios5, uitableview

假设我有`UITableView`两个部分。如果该部分的数据源为空，我想显示一个带有文本“*部分名称*为空”的占位符单元格。

我怎样才能做到这一点？

代码

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if(section == 1)
    {
        return @"Section One";
    }
    if(section == 0)
    {
        return @"Section Two";
    }
    return @"";
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    if (section == 1) 
    {
        return self.sectionOne.count;
    }
    else
    {
        return self.sectionTwo.count;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    NSArray *theSource =[[NSArray alloc] init];

    if(indexPath.section == 1)
    {
        theSource = self.sectionOne;
    }
    else
    {
        theSource = self.sectionTwo;
    }

    // See if there's an existing cell we can reuse
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier"];
if (cell == nil) 
    {
        // No cell to reuse => create a new one
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier"];
        cell.backgroundView = [[UIImageView alloc] init];
        // Continue creating cell
        }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:59:46.447

在你的 UITableViewDataSource 中实现以下函数（伪代码）：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (datasource == empty)
        return 1;
    else
        return [datasource count];
} 
```

和：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (datasource == empty)
         return stub cell;
    else
         return regular cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:18:53.340

而是在表格视图中做任何事情；我会检查数据模型，并可能相应地更新数据模型。

您正在显示节标题数组中的节标题（我假设）；

您可以检查该部分的行/记录是否存在；如果没有，则相应地更新您的部分标题数组；

```
sectionTitleArray = [@"First Section", @"Second Section", @"Third Section"] 
```

> rowValueArray = [[NSArray arrayWithObjects:@"First1",@"First2"],[NSArray array],[NSArray arrayWithObjects:@"Third1",@"Third3"]
> 
> if([[rowValueArray objectAtIndex:1]count]<0){
> 
> ****//第二部分的行为空；******
> 
>  ****然后更新 sectionTitleArray**
> 
> sectionTitleArray = [@“第一节”，@“节为空”，@“第三节”]
> 
> }**

 ****它只是一个场景，而不是实际代码。****

# flask - 带烧瓶的 pymongo

> ID：10340378
> 
> 赞同：12
> 
> 时间：2012-04-26T19:48:32.913
> 
> 标签：flask, pymongo

我正在尝试返回我的帖子，但我得到了

> TypeError：'Cursor' 对象不可调用。

我该如何纠正？这是我的代码：

```
from flask import Flask  
from flask.ext.pymongo import PyMongo  
app = Flask(__name__)  
mongo = PyMongo(app)  
from pymongo import Connection  
connection = Connection()  
db = connection.test_database  
collection = db.test_collection  

@app.route('/')  
def home_page():  
   post = {"author":"mike","text":"jiii"}  
   posts = db.posts  
   posts.insert(post)  
   return posts.find()

if __name__=='__main__':  
   app.run(debug=True) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T00:34:33.487

find() 返回一个[Cursor](http://api.mongodb.org/python/2.0/api/pymongo/cursor.html#pymongo.cursor.Cursor)对象，您必须对其进行迭代才能访问查询返回的文档。如：

```
for post in posts.find():
    # do something with post 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T20:20:09.257

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T20:29:46.587

上面的答案都是正确的。Flask 视图应该返回某种 HTTP 响应。所以你需要处理数据并做出响应，可能会使用 Flask 的实用函数。此外，该`find()`方法返回一个游标，您需要在某些时候对其进行迭代。

您只需要更改视图的最后一行：

```
@app.route('/')  
def home_page():  
   post = {"author":"mike","text":"jiii"}  
   posts = db.posts  
   posts.insert(post)  
   return render_template(posts.find(), "index.html") 
```

并提供一个`index.html`包含以下内容的内容：

```
{% for post in posts %}
<h2>Post by {{ post.author}}</h2>
<p>{{ post.text }}</p>
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-20T22:30:46.140

利用：

```
from flask_pymongo import Pymongo 
```

代替：

```
from flask.ext.pymongo import PyMongo 
```

# c# - Windows 窗体 C# 中的甘特图

> ID：10340380
> 
> 赞同：0
> 
> 时间：2012-04-26T19:48:35.473
> 
> 标签：c#, dll, charts

我正在尝试在 windows 窗体 c# 中创建甘特图，我试图找到任何库但没有运气，我找到了 ms 图表控件，但我不知道如何使用它

有来自 msdn 的示例，但是当我把它放在我的代码上时，它没有显示任何图表

```
using System.Windows.Forms.DataVisualization.Charting;
...

// Populate series data
DateTime    currentData = DateTime.Now.Date;
chart1.Series["Tasks"].Points.AddXY(1, currentData, currentData.AddDays(5));
chart1.Series["Tasks"].Points.AddXY(2, currentData.AddDays(5), currentData.AddDays(7));
chart1.Series["Tasks"].Points.AddXY(3, currentData.AddDays(7),         currentData.AddDays(10));
chart1.Series["Tasks"].Points.AddXY(1, currentData.AddDays(10), currentData.AddDays(15));
chart1.Series["Tasks"].Points.AddXY(4, currentData.AddDays(15), currentData.AddDays(20));
chart1.Series["Tasks"].Points.AddXY(2, currentData.AddDays(20), currentData.AddDays(27));

chart1.Series["Progress"].Points.AddXY(1, currentData, currentData.AddDays(5));
chart1.Series["Progress"].Points.AddXY(2, currentData.AddDays(5), currentData.AddDays(7));
chart1.Series["Progress"].Points.AddXY(3, currentData.AddDays(7), currentData.AddDays(10));
chart1.Series["Progress"].Points.AddXY(1, currentData.AddDays(10), currentData.AddDays(13)); 
```

有没有我可以使用的图书馆？或者如果没有，是否有任何教程可以创建它？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:18:42.473

你可以在 WPF 中做到这一点

[http://wpfgantt.codeplex.com/](http://wpfgantt.codeplex.com/)

# wcf - protobuf-net 是否支持 [DataMember(Order=0)]？

> ID：10340381
> 
> 赞同：3
> 
> 时间：2012-04-26T19:48:36.833
> 
> 标签：wcf, protobuf-net

我将 protobuf-net 与 WCF 一起使用，并发现 Order = 0 的数据成员未显示在客户端上。这是我的数据合同 - ObjectId 在客户端始终是 Guid.Empty。

```
<DataContract()> _
Public Class ProtocolBufferDataContract

    <DataMember(Order:=0)> _
    Public Property ObjectId() As Guid

    <DataMember(Order:=1)> _
    Public Property Title() As String

End Class 
```

我正在使用共享程序集机制，因此服务器和客户端都是针对此类编译的。如果我将订单更改为 1 和 2，一切正常。为什么它不适用于 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:11:33.860

奇怪 - 我本以为它会出错。protobuf 键号始终为正数，因此 0 确实对 protobuf-net 无效。因此，我希望它会抛出！为此，它。也可以指定偏移量以应用于 WCF 键（主要用于代理类型）。这可以通过 ProtoContractAttribute 完成（直接，或者如果使用代理生成，则在“部分类”中），或者可能（我尚未检查）在运行时通过 RuntimeTypeModel 应用。

# iphone - 清除 NSXMLParser 缓存

> ID：10340382
> 
> 赞同：1
> 
> 时间：2012-04-26T19:48:41.600
> 
> 标签：iphone, caching, sdk, nsxmlparser

我正在使用 NSXMLParser 解析托管的 XML 文件，当我单击刷新按钮时，虽然 XML 内容已更改，但 NSXMLParser 内容并未更新，我猜 NSXMLParser 有我的 XML 文件的缓存，如何清除 NSXMLParser 缓存？

添加到列表后，我应该在 didEndElement 中释放 currentTitle 、 currentLink 和 item 吗？

代码：

```
NSMutableDictionary *item;
NSString * currentElement;
NSMutableString * currentTitle, * currentLink;
NSMutableArray *list;

- (void)parseXMLFileAtURL:(NSString *)URL { 

    NSURL *xmlURL = [NSURL URLWithString:URL];
    NSXMLParser *rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    [rssParser setShouldProcessNamespaces:NO];
    [rssParser setShouldReportNamespacePrefixes:NO];
    [rssParser setShouldResolveExternalEntities:NO];
    [rssParser parse];
    [rssParser release];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"item"]) {
        item = [[NSMutableDictionary alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentLink = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"url"]) {
        [currentLink appendString:string];
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{ 

    if ([elementName isEqualToString:@"item"]) { 

        [item setObject:currentLink forKey:@"link"];
        [item setObject:currentTitle forKey:@"title"];
        [list addObject:[item copy]];

    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

    [tableView reloadData];
} 
```

# sql-server - 连接 MS SQL 数据库和 ExtJS 前端的最简单/最好的后端层

> ID：10340386
> 
> 赞同：1
> 
> 时间：2012-04-26T19:48:57.170
> 
> 标签：sql-server, wcf, iis, extjs, ria

我们目前有一个大项目，由以下几层组成：

*   MS SQL Server 数据库
*   Microsoft RIA WCF 服务层
*   IIS 和
*   ExtJS 网络应用程序

一切都或多或少地起作用。我唯一担心的是，我认为第二层对于我们在前端拥有的东西来说有点过度杀戮和过于复杂 - 它的整个任务是使用来自数据库的数据生成 JSON 消息。选择这种结构是因为最初我们计划使用 Silverlight 作为前端（谢天谢地！我们决定放弃它以支持 ExtJs 顺便说一句）。

现在我有几个其他的 web 项目即将推出，我想知道放弃第二层 (RIA WCF) 是否是正确的选择。如果我决定坚持使用 MSSQL/IIS/ExtJs，我还有哪些其他选择？如果有人有其他方面的经验，我将不胜感激任何反馈。任何链接也会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:14:42.443

您应该查看[Entity Framework](http://msdn.microsoft.com/en-us/data/aa937723)和[MVC](http://www.asp.net/mvc)。实体框架对于将您的 SQL 数据库映射到可以通过 MVC 处理并使用 ExtJs 和[Razor 视图引擎](http://www.asp.net/mvc/videos/mvc-3/mvc-3-razor-view-engine)显示的业务对象非常有用。

# language-agnostic - 一般 - 函数如何在内存中表示？

> ID：10340391
> 
> 赞同：2
> 
> 时间：2012-04-26T19:49:24.003
> 
> 标签：language-agnostic

我试过在 SO 周围搜索一下，但我找不到这个问题的答案。也许是因为我不能用适当的术语来形容。我想知道的是函数在内存中是如何表示的？指令必须有一些存储要求，我们可以使用函数指针来捕获它们在内存中的位置......有人可以详细说明一下吗？

最一般的概念，具体的实现并不重要。为什么 sizeof 不适用于函数？我对此非常好奇，如果我的概念从一开始就有缺陷（换句话说，如果我以错误的方式思考它），我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:08:51.323

这取决于语言。对于编译语言，函数在内存中表示为机器代码；您通常可以从其制造商处获得[广泛使用的处理器的文档。](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

对于C/C++，函数指针可以简单到函数入口点的地址，可以直接用单条指令调用。我相信这对于 C/C++ 实现来说是典型的，但规范并不能保证这一点。一般来说，函数指针的类型决定了函数的调用约定：它期望找到什么参数，以及它如何返回结果。

函数的实际代码大小与调用它无关——`sizeof(my_function_pointer)`表示函数指针的大小，而不是函数的大小。请注意，即使是原始函数地址的表示方式也可能与数据指针不同（qv，针对早期[Wintel](http://en.wikipedia.org/wiki/Microsoft_Windows)分段架构的编译器，或可能具有完全不同的代码和数据地址空间的嵌入式处理器）。

对于（与 C 不同）函数参数可能引用闭包的语言，这样的“指针”需要包含或引用闭包上下文以及函数的入口点。

# javascript - 带有 Spring MVC 的 JavaScript 不起作用

> ID：10340392
> 
> 赞同：3
> 
> 时间：2012-04-26T19:49:24.930
> 
> 标签：javascript, web-applications, spring-mvc, tiles2

我下载了使用 css 和 JavaScript 的登录模板。当我以默认的 html 格式启动它时，它显示正常，但是当我将相同的代码放入我的 Spring MVC 3 应用程序并将格式更改为 jsp 时，javascript 部分被禁用。我可以通过我的网络浏览器访问外部 js 文件，所以我不知道问题出在哪里。

这是正确的外观： ![正确的](../Images/8bebe775a4822d7c38dcc5018f508353.png)

但这就是我得到的： ![错误的](../Images/d45d20f27ea0ae960aed948ef9d8b25c.png)

```
<script language="javascript" type="text/javascript" src="js/niceforms.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="css/niceforms-default.css" /> 
```

我只更改了外部 js 和 css 资源的位置，但正如我所说，这些文件是可以访问的。

这是我的结构：

![在此处输入图像描述](../Images/90a18a248e6ce8c161b42bbb30e2cf48.png)

在我的`web.xml`我有这些行：

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/root-context.xml,
        /WEB-INF/spring/security-context.xml,
    </param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.gif</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.txt</url-pattern>
</servlet-mapping> 
```

我也使用 Apache tiles2

```
<tiles-definitions>
<definition name="base.definition" template="/WEB-INF/views/layout/layout.jsp">
    <put-attribute name="body" value="" />
</definition>

<definition name="contact" extends="base.definition">
    <put-attribute name="body" value="/WEB-INF/views/contact.jsp" />
</definition>

<definition name="login" template="/WEB-INF/views/login/login.jsp">
</definition> 
```

谢谢。

编辑：

我现在知道问题出在哪里，但仍然不知道如何解决...问题出在外部 css 文件的路径中。我有这样的事情：`body {background-image:url('images/bg.jpg');}`但是我在firebug中找不到错误，因为它试图在*localhost：8080/sheedo/css/images/bg.jpg*中找到资源，并且当我设置资源的绝对路径时，`body {background-image:url('/images/bg.jpg');}`我也得到了同样的错误但它试图在*localhost:8080/images/bg.jpg*中找到它。当我使用`./images/bg.jpg`它时没问题，但是否存在任何其他解决方案而不是重写 css 文件中的所有路径？我的意思`<mvc:resources ... >`是有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T05:56:52.867

```
<script type="text/javascript" src="${pageContext.request.contextPath}/js/niceforms.js"></script>
<link href="${pageContext.request.contextPath}/css/niceforms-default.css" rel="stylesheet" /> 
```

使用上面的代码..您需要动态指定它，而不是静态..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:38:31.427

我在这里看到两件事

1.  默认 servlet 没有任何 servlet 映射。tomcat 文档这样说[http://tomcat.apache.org/tomcat-5.5-doc/default-servlet.html](http://tomcat.apache.org/tomcat-5.5-doc/default-servlet.html)（我相信你正在使用 tomcat）。
2.  如果 jsp 中存在路径问题，请尝试使用`<c:url/>`更干净的 jstl 核心库。[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:04:41.197

在 jsps 中为 javascript 和 css 使用绝对路径

在你的jsp中添加这个

```
<%
    String path = request.getContextPath();
%> 
```

改变这两行

```
<script language="javascript" type="text/javascript" src="<%=path%>/js/niceforms.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="<%=path%>/css/niceforms-default.css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-28T20:49:11.970

`${pageContext.request.contextPath}`如果你在模板中使用它，而不是那个丑陋的：

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%> 
```

然后你可以这样做：

```
<spring:url value="/resources/jquery-2.1.4.js" var="jqueryJS" />
<script type="text/javascript">
if (typeof jQuery == 'undefined') {
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.src = "${jqueryJS}";
    document.getElementsByTagName('head')[0].appendChild(script);
}
</script> 
```

# django - 每个输入的 ModelMultipleChoiceField 标签的 django 复选框表单

> ID：10340394
> 
> 赞同：6
> 
> 时间：2012-04-26T19:49:32.730
> 
> 标签：django, checkbox, django-templates, label

我有以下表格：

```
from models import MyModel

class MultProgresemosReferenciasForm(forms.Form):
    selected = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple,
                    queryset=MyModel.objects.filter(active=True)) 
```

我又在以下模板中使用它：

```
 <form action="" method="post">                                                                                             
      {% for field in form %}                                                                                                
        {{ field }}
      {% endfor %}                                                                                                           
      {% csrf_token %}                                                                                                       
      <input type="submit" value="Submit Selected" />
  </form> 
```

呈现以下html：

```
 <form action="" method="post">
    <ul>
<li><label for="id_selected_1"><input type="checkbox" name="selected" value="9" id="id_selected_8" /> prog 1420000930 - pp 0.0078125</label></li>
<li><label for="id_selected_2"><input type="checkbox" name="selected" value="10" id="id_selected_9" /> prog 1420001041 - pp 0.00390625</label></li>
    </ul>
      <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='csrf_token_hash_string...' /></div>
      <input type="submit" value="Submit Selected" />
  </form> 
```

如您所见，模板为每个复选框获取了一些标签（来自模型，该模型有两个字符串字段，其中包含您可以在那里看到的值）。

问题是，我怎样才能进入复选框的标签并自定义它们？我正在尝试使用相同型号的名称，但进行了一些调整。有没有一种简单的方法可以在 django 中实现这一点？

我尝试使用 field.label，但我得到的只是整个 ChoiceField 的“选定”标签。这不是我想要的，我需要进入每个生成的复选框的标签......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T19:56:38.817

我想你想在你的表格中覆盖`label_from_instance`

> 将调用模型的**unicode**方法来生成对象的字符串表示形式，以用于字段的选择；提供自定义表示，子类 ModelChoiceField 并覆盖 label_from_instance。此方法将接收模型对象，并应返回适合表示它的字符串。例如：

```
def label_from_instance(self, obj):
    #custom logic here...
    return smart_unicode(obj) 
```

# c# - 为什么不能声明 System.Drawing.Color 类型的常量？

> ID：10340396
> 
> 赞同：5
> 
> 时间：2012-04-26T19:49:35.553
> 
> 标签：c#, winforms, colors, constants

由于我在我的应用程序的多个位置使用“System.Drawing.Color.Gainsboro”：

```
if (tb.BackColor.Equals(System.Drawing.Color.Gainsboro)) { 
```

...我想让它成为一个常数。但是当我尝试时：

```
const System.Drawing.Color PSEUDO_HIGHLIGHT_COLOR = System.Drawing.Color.Gainsboro; 
```

...我得到了，“不能将类型 'System.Drawing.Color' 声明为 const”

？？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T19:54:36.750

唯一可以是`const`在 C# 中具有文字表示的类型，因为对常量的引用在编译时被替换为文字值。没有文字的方式来表示颜色（您只能通过工厂方法获得颜色，或者像您一样，使用`static`预先存在的颜色之一）。

但是，您可以使用`static readonly`变量来实现相同的效果。

```
static readonly Color PSEUDO_HIGHLIGHT_COLOR = Color.Gainsboro; 
```

有关详细信息，请参阅 C# 语言规范的第 10.4 节

> 常量声明中指定的类型必须是`sbyte`, `byte`, `short`, `ushort`, `int`, `uint`, `long`, `ulong`, `char`, `float`, `double`, `decimal`, `bool`, `string`, 枚举类型或引用类型。

对于引用类型，唯一有效的值是字符串文字或`null`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T19:51:35.000

> 用户定义的类型，包括类、结构和数组，不能是 const

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms173119.aspx)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-26T19:53:58.697

[System.Drawing.Color](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx)是一个[结构](http://msdn.microsoft.com/en-us/library/ah19swz4(v=vs.71).aspx)，[不能声明为常量](https://stackoverflow.com/questions/4590796/why-cant-structs-be-declared-as-const)。尝试`static readonly`改用，或使用[KnownColor](https://stackoverflow.com/questions/8309947/declare-color-as-constant)枚举。

# android - 在 Android 上的文本字段中显示数据

> ID：10340397
> 
> 赞同：0
> 
> 时间：2012-04-26T19:49:39.973
> 
> 标签：android, android-layout, sensormanager

如何在`EditText`文本框中显示加速度计获得的数据？它只使用`TextView`

```
public void onSensorChanged(SensorEvent event) {
    float x,y,z;
    x=event.values[0];
    y=event.values[1];
    z=event.values[2];
    axex =(EditText)findViewById(R.id.editText1);
    axex.setText(X+x+ms^2);
    axey=(EditText)findViewById(R.id.editText2);
    axey.setText(Y+y+ms^2);
    axez=(EditText)findViewById(R.id.editText3);
    axez.setText(Z+z+ms^2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:59:23.267

```
EditText text = (EditText) findViewById(R.id.your_text);
text.setText("Display this text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:23:22.220

```
axex.setText(Float.toString(X+x+ms^2)); 
```

试试看。

# android - MediaRecorder 在启动时崩溃

> ID：10340400
> 
> 赞同：9
> 
> 时间：2012-04-26T19:49:41.577
> 
> 标签：android, android-emulator, mediarecorder, android-mediarecorder

我搜索了很多主题，但没有直接的答案。

我有这个代码：

```
 recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);

    recorder.setOutputFile(mFileName);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    if(!mStartRecording)
    {
        btn.setText("Stop Recording");
        try {
            recorder.prepare();

        }  catch (IOException e) {
            e.printStackTrace();
        }
        recorder.start();
        mStartRecording = true;
    }
    else
    {
        btn.setText("Start Recording");
        mStartRecording = false;
        recorder.stop();
        recorder.reset();
        recorder.release();

        recorder = null;
    } 
```

我补充说：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.STORAGE" /> 
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

（在某处看到添加存储解决了它，对我没有好处）

我正在 API Level 7 (Android 2.1) 上开发

堆栈跟踪说“启动失败”堆栈跟踪：

```
 04-26 19:27:41.955: D/dalvikvm(890): GC freed 809 objects / 58272 bytes in 433ms
04-26 19:27:44.772: D/dalvikvm(890): GC freed 95 objects / 3936 bytes in 371ms
04-26 19:28:54.973: E/MediaRecorder(890): start failed: -1
04-26 19:28:54.993: D/AndroidRuntime(890): Shutting down VM
04-26 19:28:54.993: W/dalvikvm(890): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-26 19:28:54.993: E/AndroidRuntime(890): Uncaught handler: thread main exiting due to uncaught exception
04-26 19:28:55.105: E/AndroidRuntime(890): java.lang.IllegalStateException: Could not execute method of the activity
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.View$1.onClick(View.java:2031)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.View.performClick(View.java:2364)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.View.onTouchEvent(View.java:4179)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.View.dispatchTouchEvent(View.java:3709)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-26 19:28:55.105: E/AndroidRuntime(890):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
04-26 19:28:55.105: E/AndroidRuntime(890):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
04-26 19:28:55.105: E/AndroidRuntime(890):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.os.Looper.loop(Looper.java:123)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-26 19:28:55.105: E/AndroidRuntime(890):  at java.lang.reflect.Method.invokeNative(Native Method)
04-26 19:28:55.105: E/AndroidRuntime(890):  at java.lang.reflect.Method.invoke(Method.java:521)
04-26 19:28:55.105: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-26 19:28:55.105: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-26 19:28:55.105: E/AndroidRuntime(890):  at dalvik.system.NativeStart.main(Native Method)
04-26 19:28:55.105: E/AndroidRuntime(890): Caused by: java.lang.reflect.InvocationTargetException
04-26 19:28:55.105: E/AndroidRuntime(890):  at shibby.whisper.WhisperGameActivity.recordAudio(WhisperGameActivity.java:94)
04-26 19:28:55.105: E/AndroidRuntime(890):  at java.lang.reflect.Method.invokeNative(Native Method)
04-26 19:28:55.105: E/AndroidRuntime(890):  at java.lang.reflect.Method.invoke(Method.java:521)
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.view.View$1.onClick(View.java:2026)
04-26 19:28:55.105: E/AndroidRuntime(890):  ... 21 more
04-26 19:28:55.105: E/AndroidRuntime(890): Caused by: java.lang.RuntimeException: start failed.
04-26 19:28:55.105: E/AndroidRuntime(890):  at android.media.MediaRecorder.start(Native Method)
04-26 19:28:55.105: E/AndroidRuntime(890):  ... 25 more
04-26 19:28:55.223: I/dalvikvm(890): threadid=7: reacting to signal 3
04-26 19:28:55.335: I/dalvikvm(890): Wrote stack trace to '/data/anr/traces.txt'
04-26 19:28:57.123: I/Process(890): Sending signal. PID: 890 SIG: 9 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:07:10.037

好，我知道了。我猜你将 mStartRecording 初始化为 true。

因此，您`if`将进入`else`街区。在其中，您停止了一个全新的 MediaRecorder 实例，而状态图不允许这样做。

让您的媒体记录器成为您班级的一个领域。并将您的 mStartRecording 布尔变量正确初始化为 false。仅当您的字段为空时才重新实例化您的媒体记录器。

```
if( recorder == null ) {
   recorder = new MediaRecorder();
   recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
   recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);

   recorder.setOutputFile(mFileName);
   recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
}//if
if(!mStartRecording) {
    btn.setText("Stop Recording");
    try {
        recorder.prepare();
        recorder.start();
        mStartRecording = true;
    }  catch (IOException e) {
        e.printStackTrace();
    }//catch
} else {
    btn.setText("Start Recording");
    mStartRecording = false;
    recorder.stop();
    recorder.reset();
    recorder.release();
    recorder = null;
}//else 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T19:57:57.273

尝试将`start`函数放在与函数相同的块中`prepare`。也许有一个异常阻止执行准备并直接开始，从而导致`IllegalStateException`.

```
 recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(output_formats[currentFormat]);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(getFilename());

    try {
        recorder.prepare();
        recorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T05:04:45.917

我正在使用以下代码，非常适合我..

```
protected void startRecording() {
    // TODO Auto-generated method stub
    i++;
     mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
     mFileName += "/audiorecordtest"+i+".3gp";
    recorder = new MediaRecorder();

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setOutputFile(mFileName);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

      try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "IllegalStateException called", Toast.LENGTH_LONG).show();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "prepare() failed", Toast.LENGTH_LONG).show();

    }

      recorder.start();
}

 private void stopRecording() {
     recorder.stop();
     recorder.release();
     recorder = null;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-24T15:46:05.497

这些方法必须安排它将运行的顺序。这里：

```
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setOutputFile(mFileName);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:58:18.700

仅在准备好后尝试启动录音机：

```
 try {
        recorder.prepare();
        recorder.start();
        mStartRecording = true;
    }  catch (IOException e) {
        Log.e( LOG_TAG, "Error when preparing or starting recorder", e);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-11T09:50:42.767

我有同样的问题。这是因为我在为录制的音频设置文件名时错过了一个斜线。

改变

```
this.fileName = Environment.getExternalStorageDirectory().getAbsolutePath();
this.fileName += "yourfilename.3gp"; 
```

到

```
this.fileName = Environment.getExternalStorageDirectory().getAbsolutePath();
this.fileName += "/yourfilename.3gp"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-24T11:19:51.380

我遇到了同样的问题，因为我的 SurfaceView 已变得不可见。所以让它可见

```
 mSurfaceView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-07T08:06:13.357

必须先调用`setOutputFile()`，再调用其他方法。

你必须先创建文件。

# c++ - 我真的必须取消移动构造函数/移动分配中的所有成员还是只是指针？

> ID：10340403
> 
> 赞同：1
> 
> 时间：2012-04-26T19:49:47.160
> 
> 标签：c++, move-constructor

我真的很难学习使“其他”对象无效，我刚刚在[这里](http://blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx)阅读了有关移动语义的整篇大文章，我很失望，因为它不包括**无效。**

请解释一下，我们真的需要取消“其他”的所有成员还是只是指向动态分配内存的指针？

为什么我们要关心使不在堆上的（其他对象的）成员无效？有什么好的理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:03:02.110

从对象移出后，它的析构函数在清理后仍会被调用。这意味着它需要知道它是否应该释放它拥有的资源，因此它们需要被取消（或者你怎么称呼它！）所以指针不会被双重删除等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:53:24.957

您需要使已被移动的对象保持*有效状态*。我认为这意味着不使用该对象会导致未定义的行为。实际上，这意味着不要留下指向已释放内存的指针。我可以想象可能存在其他情况，例如对象是否持有任何其他资源（打开的套接字、文件等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:06:28.210

我不知道您是否真的是指仅在构造函数的情况下，甚至在动态分配的普通指针的情况下。

但是将指针归零可以避免将其称为空指针，`Dangling pointer`因为它在为其分配的内存空闲后指向空值。进一步使用这些指针并取消引用这些指针将导致比不这样做时更容易定位的核心转储。不这样做会产生意想不到的结果，并导致难以找到核心转储，甚至导致数据损坏。

简而言之，您应该只注意使指针无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:16:43.207

像往常一样，“这取决于”。

移出的对象仍然必须被销毁，或者可能分配一个新值。您必须将其置于这些操作将起作用的状态。

如果您有“被盗”的指向动态数据的指针，您可能必须将 null 分配给原始指针，以便将它们删除。如果整数成员之一持有指向的对象的大小，则可能必须将其归零（与空指针一致）。其他值可能保持原样。

# php - 从 php 模块读取文件失败并显示 errno 13

> ID：10340407
> 
> 赞同：0
> 
> 时间：2012-04-26T19:49:56.707
> 
> 标签：php, linux, apache, module

再会。
PHP 中加载了一个 PHP 模块 (.so)。在 MINIT 阶段，它尝试读取文件。
文件是/tmp/aaa.txt 目录/tmp 属于root，权限设置为777。
文件/tmp/aaa.txt 属于apache 用户，权限也设置为777。

模块使用 VCWD_FOPEN() 打开文件，该文件最终定义为
`#define VCWD_FOPEN(path, mode) virtual_fopen(path, mode TSRMLS_CC)`fopen()。

失败并出现`VCWD_FOPEN`错误 13（权限被拒绝）。
奇怪的是，如果我手动调用模块 `( #php -r 'echo "hi";' )`- 它可以工作。但是当它从 apache 运行时 - 它没有。
有人知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:52:55.687

发现了问题。用户权限策略由 SELinux 强制执行。要禁用它，我输入 `#setenforce 0`
`#service httpd restart`

现在工作

# c++ - 具有 1 个函数的 C++/CLI 库与本机 C++ 静态链接

> ID：10340414
> 
> 赞同：0
> 
> 时间：2012-04-26T19:50:12.660
> 
> 标签：c++, .net, interop, c++-cli

我想完成一个简单的任务：我想生成一个调用一些 .NET 例程的 C++/CLI 库，并公开一个我可以从纯本机 C++ 应用程序调用的静态方法。我想从我的本机应用程序静态链接到该库。本机 C++ 应用程序将调用的方法的签名应该是

```
void (unsigned char* data, int length, _TCHAR* args[]) 
```

一般来说，我对 C++/CLI 和 C++ 还是很陌生。所以，你能帮我回答这些问题吗：

1.  对于我的小型 C++/CLI 项目，我假设类型需要是以 lib 作为输出的类库，以 vc9 运行时为目标（以便我可以确定它在最终用户 PC 上可用）。我在这个假设中正确吗？

2.  您能否提供一个带有该签名的方法大纲示例，我需要在我的 C++/CLI 项目中编写该签名。特别是我应该如何正确转换为 CLR 类型（即 byte[]、int32 和 string）？以及如何使用“extern "C" __declspec(dllexport)" 之类的东西来装饰该方法，以使该方法可从我的本机 C++ 应用程序调用？

3.  如何正确分离 C++/CLI 中 cpp 和 h 文件之间的代码？

4.  最后，一旦我添加了 lib 引用，我将如何从我的本机应用程序中调用它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:55:08.933

1.  类库：正确，但您还需要将项目的配置类型从动态库更改为静态库。我不确定“以 vc9 运行时为目标”是什么意思——您需要以与将使用静态库的本机代码相同的运行时为目标。

2.  由于这是一个静态库，`__declspec(dllexport)`因此不需要。如果您想知道如何转换为 .NET 类型，则需要发布您的代码实际执行的操作。通常，您希望[`Marshal::Copy`](http://msdn.microsoft.com/en-us/library/ms146631.aspx)将 C 数组复制到 .NET 数组中，[`marshal_as<>`](http://msdn.microsoft.com/en-us/library/bb384865.aspx)并将 C 字符串复制到 .NET 字符串中，但仍然存在该数据是否旨在可变且需要编组的问题在返回之前返回本机类型...

3.  与 C++ 中的完全相同——在头文件中声明，在源文件中定义。

4.  与任何其他函数完全相同——`#include`包含声明和调用函数的标头。

# matlab - 无法在 matlab 中读取固定宽度 (6E12) 数字。

> ID：10340415
> 
> 赞同：0
> 
> 时间：2012-04-26T19:50:19.063
> 
> 标签：matlab, text, io

我无法从文本文件中读取一些固定宽度 (6E12) 数据。请注意，文件中有前导空格。

第一行不是那么重要。但是，从第 2 行开始，我想读取 59 个值。

## 文件.txt

```
 PleaseAnswer    3 ,   ThisQuestion    40
 0.00000E+00 4.78181E+01-4.76356E+01 3.76280E-01 0.00000E+00 1.59238E+00
 1.88171E+00 1.73928E-06 0.00000E+00 3.57826E+01 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 3.75261E-07 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 3.28103E+01 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00 0.00000E+00
 ... 
```

## 结束文件.txt

正如您将在下面看到的，由于负号，我遇到了第二个和第三个值的问题。我不明白为什么没有领先的空间。几乎我所有的数字都应该有一个前导空格，除了负数。

## 我试图阅读这个文件

```
fid = fopen(filename);
dontcare = textscan(fid, '%s %d %s %s %n', 1);
fixme = textscan(fid, '%12s', 59, 'Delimiter', '', 'Whitespace', '');
fixme{1}

ans = 

    ' 0.00000E+00'
    '4.78181E+01-'
    '4.76356E+01 '
    '3.76280E-01 '
    '0.00000E+00 '
    '1.59238E+00'
    ' 1.88171E+00'
    '1.73928E-06 '
    '0.00000E+00 '
    '3.57826E+01 '
    '0.00000E+00 '
    '0.00000E+00'
    ' 0.00000E+00'
    '0.00000E+00 '
    '0.00000E+00 '
    '0.00000E+00 '
    '0.00000E+00 '
    '0.00000E+00'
    ' 0.00000E+00'
    ... 
```

## 结束我尝试读取文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:19:19.357

您可以使用正则表达式进行标记。该解决方案使用动态数组，因此如果您读入一个大文件，您需要先验地获取行数以进行预分配。不是最优雅的，但它有效。

```
fid = fopen('file.txt','r');

line = fgetl(fid); % ignore first line
l=1;
done = false;
 while ~done
    line = fgetl(fid); 
    if line ~= -1 %empty line is returned
       [s,e] = regexp(line, '-?[0-9]+\.[0-9]+E[+-][0-9]+','start','end'); %not sure why tokens aren't working
       for i=1:numel(s)
          data(l,i) = str2double(line(s(i):e(i))); %grab the ith match between start and end
       end
        l=l+1;
    else
        done = true;
    end
 end

 data 
```

**输出：**

```
>> test

data =

         0   47.8181  -47.6356    0.3763         0    1.5924
    1.8817    0.0000         0   35.7826         0         0
         0         0         0         0         0         0
         0    0.0000         0         0         0         0
         0         0         0         0         0         0
         0         0         0         0         0         0
         0         0         0   32.8103         0         0
         0         0         0         0         0         0
         0         0         0         0         0         0
         0         0         0         0         0         0 
```

# iis-7 - IIS 7 动态压缩截断下载的文件

> ID：10340417
> 
> 赞同：3
> 
> 时间：2012-04-26T19:50:23.460
> 
> 标签：iis-7, http-compression

我在最近迁移到运行 IIS7 而不是 IIS6 的新服务器上的 ASP.NET 应用程序上有一个问题。该应用程序已升级到 .NET4，但大部分代码仍与最初用 .NET 1.1 编写的一样。该应用程序管理公司的静态表，用户可以从网页下载任何 CSV 或 XML 格式的静态表数据。

问题 - 如果打开 IIS7 功能“启用动态内容压缩”，则文件已损坏（文件末尾被修剪）。损坏似乎不是随机的，即只要输入数据相等，我总是得到相同的结果。对于不同的输入数据集，效果的大小（修剪的字符数）也不同。当我关闭动态压缩时，问题就完全消失了。

下载示例（我总是只发布整个 CSV 文件的最后一行）：

1.  静态表 A

    *   动态压缩关闭（完整文件长度 720 字节）：

        ```
        2010-10-21 00:00:00;;"P ";"registrované partnerství";"REGISTERED PARNTERSHIP";"registrované partnerstvo";0 
        ```

    *   动态压缩关闭（最后 1 个字节被修剪 - 即最后一个换行符丢失了它的“LF”字符），文件长度 = 719 字节）：
2.  静态表 B

    *   动态压缩关闭（无损坏，文件长度 = 593349 字节）：

        ```
        2012-04-16 00:00:00;;"800650";"Finanční centrum Třebíč";"PSB FC Třebíč";"PSB FC Třebíč";"PSB FC Třebíč";9;2;61;"67401";"Třebíč";"Karlovo náměstí 32/26";5057;2518;852;;;2012-05-02 00:00:00;0 
        ```

    *   动态压缩（最后 2 个字节被修剪（即最后一个 CRLF 丢失），文件长度 = 593347 字节）：
3.  静态表 C

    *   动态压缩关闭（无损坏，文件长度 = 282 字节）：

        ```
        2012-04-16 00:00:00;;"3";"Zaslat do vlastních rukou";0 
        ```

    *   动态压缩（最后 5 个字符被修剪，文件长度 = 275 字节）：

        ```
        2012-04-16 00:00:00;;"3";"Zaslat do vlastních ruk 
        ```

4.  静态表 D

    *   动态压缩关闭（无损坏，文件长度 = 6506 字节）：

        ```
        2010-02-20 00:00:00;2010-03-20 00:00:00;390;"879001";2;0 
        ```

    *   动态压缩（最后 13 个字符被修剪，文件长度 = 6491 字节）：

        ```
        2010-02-20 00:00:00;2010-03-20 00:00:00;390 
        ```

XML 输出格式也是如此——但在这种情况下，效果总是相同的——XML 总是被修剪 1 个字符。结果是根元素的结束标签没有关闭：

```
</Export> 
```

相对

```
</Export 
```

作为一种解决方法，我建议关闭动态压缩。但我想了解导致这种行为的原因。我在网上搜索了相同问题的解决方案，但我只发现了[这个问题](http://www.experts-exchange.com/Software/Server_Software/Web_Servers/Microsoft_IIS/Q_25076595.html)，这可能不相关，因为输入数据是纯未压缩的 CSV 或 XML：

# powershell - 从 Exchange Server 2010 中的 Exchange-ID/Name 获取 Host-Guid

> ID：10340427
> 
> 赞同：0
> 
> 时间：2012-04-26T19:50:59.763
> 
> 标签：powershell, exchange-server, powershell-2.0, exchange-server-2010

我正在从 command 获取所有交换服务器的列表`'Get-ExchangeServer'`。我想从这个服务器名称获取 Host-Guid（不是 exchange-guid）。知道如何获取此信息吗？

Exchange-Server-Name 和 Host Name 是始终相同还是可以不同？

# asp.net-mvc - 如何绕过实体框架的 System.Data.Entity.Internal.InternalPropertyEntry.ValidateNotDetachedAndInModel(String method) 验证？

> ID：10340428
> 
> 赞同：1
> 
> 时间：2012-04-26T19:51:02.480
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, ninject.web.mvc, odac

我正在使用自定义方法来跟踪 n 层断开连接的实体类的各个修改属性。我从

> 实体框架编程：Julia Lerman 和 Rowan Miller (O'Reilly) 的 DbContext。版权所有 2012 Julia Lerman 和 Rowan Miller，978-1-449-31296-1。

代码是：

```
public void ApplyChanges<TEntity>(TEntity root) where TEntity : class, IObjectWithState {
        // bind the entity back into the context
        dbContext.Set<TEntity>().Add(root);
        // throw exception if entity does not implement IObjectWithState
        CheckForEntitiesWithoutStateInterface(dbContext);

        foreach (var entry in dbContext.ChangeTracker.Entries<IObjectWithState>()) {
            IObjectWithState stateInfo = entry.Entity;
            if (stateInfo.State == RecordState.Modified) {
                // revert the Modified state of the entity
                entry.State = EntityState.Unchanged;
                foreach (var property in stateInfo.ModifiedProperties) {
                    // mark only the desired fields as modified
                    entry.Property(property).IsModified = true;
                }
            } else {
                entry.State = ConvertState(stateInfo.State);
            }
        }
        dbContext.SaveChanges();
    } 
```

此方法的目的是让 EF 知道只有一组预定义的实体字段已准备好在下次调用 SaveChanges() 时进行更新。这是为了解决实体在 ASP.NET MVC 3 中工作的问题，如下所示：

*   在初始页面加载时：控制器的 Get 操作正在加载实体对象并将其作为参数传递给视图。

*   视图生成用于编辑实体的 2 个字段的控件，并将记录的 ID 保存在隐藏字段中。

*   当点击 [save] 并将实体发布回控制器时，除了视图中保留的 3 个字段之外，所有字段都带有一个空值。这是 MVC 绑定管理器的默认行为。

如果我将更改保存回数据库，更新查询当然会用如下语句覆盖非映射字段：

```
UPDATE non_mapped_field_1 = NULL, ..., mapped_field_1 = 'mapped_value_1', mapped_field_2 = 'mapped_value_2', ... non_mapped_field_n = NULL WHERE ID = mapped_field_3 
```

这就是我尝试单独跟踪字段并仅更新我感兴趣的那些字段的原因。在使用 ApplyChanges() 调用自定义方法之前，我正在添加要包含在更新中的字段列表IObjectWithState.ModifiedProperties 列表，以获取 SQL 语句如下：

```
UPDATE mapped_field_1 = 'mapped_value_1', mapped_field_2 = 'mapped_value_2' WHERE id = mapped_value_3 
```

问题是，在 ApplyChanges 中将其中一个字段标记为已修改时，即：

```
entry.Property(property).IsModified = true; 
```

系统抛出以下**异常**：

```
{System.InvalidOperationException: Member 'IsModified' cannot be called for property 'NotifyCEDeadline' on entity of type 'User' because the property is not part of the Entity Data Model.

at System.Data.Entity.Internal.InternalPropertyEntry.ValidateNotDetachedAndInModel(String method)

at System.Data.Entity.Internal.InternalPropertyEntry.set_IsModified(Boolean value)

at System.Data.Entity.Infrastructure.DbPropertyEntry.set_IsModified(Boolean value)

... 
```

所以问题是。有一种方法可以绕过这个 EF 验证，或者让上下文知道我正在尝试更改的这个系统属性 (IsModified) 的存在吗？

架构总结：

*   EF 代码优先（注解 + Fluent API）
*   Oracle .NET EF 数据提供程序 (ODAC)
*   使用 nInject.MVC 将上下文注入到自定义业务上下文 => 这就是我自定义 ApplyChanges() 方法的原因

    使用 (var context = new BreakAwayContext()){ context.Set().Add(root);

    对已经初始化的 dbcontext 的简单调用

    dbContext.Set().Add(root);

*   Oracle 数据库是手动创建的，即没有 EF 的帮助，因此不使用 EF 元数据表。

谢谢，伊万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:52:03.597

很好的描述，但是我找不到任何关于为什么您需要在对象中使用名为“IsModified”的瞬态属性和/或为什么需要告诉 EF 它正在被修改的任何信息（EF 无论如何都无法持久保存它）。

如果属性包含在视图中，则 IsModified 属性的值应由模型绑定器设置。

您可以在 ApplyChanges 方法中添加代码以跳过名为“IsModified”的属性，或者更好的是，使用 entry.CurrentValues.PropertyNames 仅过滤已知属性，例如：

```
foreach (var property in stateInfo.ModifiedProperties) { 
    // mark only the desired fields as modified 
    if (entry.CurrentValues.PropertyNames.Contains(property)) {
        entry.Property(property).IsModified = true; 
    }
} 
```

**更新**：伊万，很抱歉，当您几个月前发布该问题时，我没有更好地理解该问题，并且在您添加这些澄清评论后我没有跟进。我想我现在理解得更好了。也就是说，我认为我提供的代码片段可以成为解决方案的一部分。通过查看您再次遇到的异常，我现在了解到 EF 检测到的问题是 NotifyCEDDealine 不是持久属性（即它没有在 Code First 模型中映射到数据库中的列）。IsModified 只能用于映射属性，因此您有两个选择：更改实体中 IObjectWithState 的实现代码，以便未在 ModifiedProperties 中记录非映射属性，或者使用我的代码片段来防止调用 IsModified那些。

顺便说一句，执行所有这些操作的替代方法是使用 Controller.TryUpdateModel API 仅设置实体中修改后的属性。

希望这会有所帮助（尽管我知道已经很晚了）。

# c# - 将对象引用传递给方法，它必须是静态的吗？

> ID：10340429
> 
> 赞同：1
> 
> 时间：2012-04-26T19:51:02.677
> 
> 标签：c#

当我尝试一些代码来了解如何将对象的引用传递给方法时，当我尝试删除方法头中的静态时出现错误。错误信息说：非静态字段、方法或属性需要对象引用……但是参数中不是已经有引用了吗？我见过不使用静态的代码，为什么这不起作用？我知道当从不是对象的类中使用方法时会使用静态。一些解释是赞赏理解。谢谢！

```
 // Method
    internal static string ChangeName(Box obj)
    {
        return obj.BoxName;
    } 
```

编辑：我添加了整个代码。我从主要方法内部调用的问题是静态的吗？

```
class Program
{
    static void Main(string[] args)
    {

        Box box1, box2;
        box1 = new Box("Nick","R90",1);
        box2 = new Box("Hanna","B27",2);

        Console.WriteLine(ChangeName(box2));
        Console.Read();

    }

    // Methods
    private static string ChangeName(Box obj)
    {
        return obj.BoxName;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T19:54:14.220

静态方法是这样调用的：

```
MyClass.Method(arg); 
```

实例方法是这样调用的：

```
MyClass myInstance = new MyClass();
myInstance.Method(arg); 
```

两者不兼容。

如果要更改方法签名，还需要更改调用方法的每个地方。

编辑：您正在使用不合格的电话。以下是使用不合格呼叫的规则。

*   静态方法可以调用静态方法。
*   静态方法不能调用实例方法。（这是你的问题。）
*   实例方法可以调用静态方法。
*   实例方法可以调用实例方法。

这个方法实际上应该作为 Box 类中的实例方法来实现。然后你会说：

```
Console.WriteLine(box2.ChangeName()); 
```

如果您无权访问 Box 代码，那么您可以编写扩展方法，或者根据您的示例保持方法静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:55:33.897

错误可能是您调用此方法的位置；如果从静态方法调用，则必须显式调用对象实例或调用静态方法。

# r - 问题旁边的条形图

> ID：10340431
> 
> 赞同：1
> 
> 时间：2012-04-26T19:51:10.260
> 
> 标签：r, plot

我设法将一些数据汇总到以下内容中：

```
 Month Year Number
1     1  2011   3885
2     2  2011   3713
3     3  2011   6189
4     4  2011   3812
5     5  2011    916
6     6  2011   3813
7     7  2011   1324
8     8  2011   1905
9     9  2011   5078
10   10  2011   1587
11   11  2011   3739
12   12  2011   3560
13    1  2012   1790
14    2  2012   1489
15    3  2012   1907
16    4  2012   1615 
```

我正在尝试创建一个条形图，其中月份的条形图彼此相邻，因此对于上面的示例，1 月到 4 月将有两个条形图（一个用于 2011 年，一个用于 2012 年），其余月份只有一个条形图代表2011 年。

我知道我必须使用`beside=T`，但我想我需要创建某种矩阵才能让条形图正确显示。我在弄清楚该步骤是什么时遇到了问题。我有一种感觉，它可能涉及`matrix`，但由于某种原因，我完全被一个看似非常简单的解决方案所困扰。

另外，我有这些数据：`y=c('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec')`我想在我的 names.arg 中使用它。当我尝试将它与上述数据一起使用时，它告诉我选择了未定义的列，这意味着我需要 16 个变量`y`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T20:02:22.547

要使用`barplot`您需要重新排列数据：

```
dat <- read.table(text = "   Month Year Number
1     1  2011   3885
2     2  2011   3713
3     3  2011   6189
4     4  2011   3812
5     5  2011    916
6     6  2011   3813
7     7  2011   1324
8     8  2011   1905
9     9  2011   5078
10   10  2011   1587
11   11  2011   3739
12   12  2011   3560
13    1  2012   1790
14    2  2012   1489
15    3  2012   1907
16    4  2012   1615",sep = "",header = TRUE)

y <- c('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec')

barplot(rbind(dat$Number[1:12],c(dat$Number[13:16],rep(NA,8))),
        beside = TRUE,names.arg = y) 
```

![在此处输入图像描述](../Images/b26183a69f335751adcd7227f8f11a4f.png)

或者您可以将**ggplot2**与数据几乎一样使用：

```
dat$Year <- factor(dat$Year)
dat$Month <- factor(dat$Month)
ggplot(dat,aes(x = Month,y = Number,fill = Year)) + 
    geom_bar(position = "dodge") + 
    scale_x_discrete(labels = y) 
```

![在此处输入图像描述](../Images/f880e0284f45b8e7f5b2116b8a0ebea2.png)

# vba - 当单元格中的值更改时，更改数据透视表上的过滤器

> ID：10340434
> 
> 赞同：2
> 
> 时间：2012-04-26T19:51:20.057
> 
> 标签：vba, excel, excel-2007

我已经阅读了一段时间，并达到了询问 SO 点。我在 excel 中有一个下拉选择器，可让我更改名称，当名称更改时，“C3”中的值会更改（如果重要，c3 引用另一张纸上的另一个单元格）并且当“C3”中的值更改时我想要在另一个工作表（现在是工作表 6）上的数据透视表来更新其在区域 id 上的过滤器以反映“C3”的新值。

这对我来说听起来像是一个事件，所以我四处寻找，发现 VBA 有事件（耶！），但我无法让我的事件真正做任何事情。当我将它作为宏运行时，我在那里的代码可以工作，但我真的希望它在每次单元格“C3”中的值发生变化时自动运行。

这是我目前正在尝试的：

```
 Sub Worksheet_Change(ByVal Target As Range)
 If Not Application.Intersect(Target, Sheets("Current Status").Range("C3")) Is Nothing Then
Sheets("Sheet6").PivotTables("PivotTable5").PivotFields("territory_id"). _
    ClearAllFilters
Sheets("Sheet6").PivotTables("PivotTable5").PivotFields("territory_id").CurrentPage _
    = Sheets("Current Status").Range("C3").Value
 End If
 End Sub 
```

更新：我发现如果我将上述代码放在工作表部分（工作表 2）而不是新模块中，如果我实际输入代码然后按回车键，我可以让它运行。现在我想知道是否有办法让它做到这一点，而无需手动输入值并按回车键。我只想能够使用我的下拉菜单来选择一个新名称，并且当 c3 中的值由于下拉选择器而更改时更新数据透视表。

一如既往地谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:58:45.053

问题是 C3 实际上并没有改变，因为它只是在更新公式引用。“下拉选择器”是在表单上还是基于数据验证和单元格中？

如果它基于一个单元格，请将您的目标设置为目标单元格，而不是 C3 -> 因为 C3 只是一个公式引用，而您的下拉单元格是实际更改的单元格。

If it's based on a form, but code in the on_change event of the form control.

# python - 在 html 模板中打印 appengine 模型实体 id

> ID：10340439
> 
> 赞同：5
> 
> 时间：2012-04-26T19:51:25.937
> 
> 标签：python, google-app-engine, jinja2, webapp2

以下是我拥有的简单数据库模型：

```
class Notes(db.Model):
  text = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True) 
```

现在在 url 处理程序中，我将所有注释发送到模板，如下所示：

```
class MainPage(webapp2.RequestHandler):
  def get(self):
    notes = Notes.all()
    self.render_template("index.html", {'notes':notes}) 
```

在我使用[jinja2](http://jinja.pocoo.org/docs/)模板引擎的模板中，我希望`id`打印每个注释，以便我可以嵌入一个编辑链接，有点像这样：

```
{% for note in notes %}
<p>  
 {{ note.text }} <br>
 {{ note.date }} <br>
 (<a href ="edit/{{note.key.id}}">edit </a>)
{% endfor %} 
```

但问题是，我没有看到任何打印的东西，而不是根据[这里](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_id)`note.key.id` 的文档，类代表数据库实体的唯一键，它有一个方法，它是一个数值。对于我想要的笔记集合中的单个笔记。 `key``id``id`

如果我使用 django 模板引擎，我会`{{ notes.key.id }}`打印出值，但`jinja2`我看不到它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T20:48:02.390

用以下内容替换该`href`行：

```
(<a href ="edit/{{note.key().id()}}">edit </a>) 
```

这应该足够了。

# python - 如何找到 msbuild 的位置而不在我的脚本中对其进行硬编码？

> ID：10340444
> 
> 赞同：4
> 
> 时间：2012-04-26T19:51:40.633
> 
> 标签：python, msbuild

我正在用 python 编写脚本来构建解决方案文件并自动报告所有配置和平台的错误和警告数量。目前，我依赖于用户提供我可以用来构建项目的 msbuild 的位置这一事实。是否有一种自动方法可以在运行脚本的机器中找到最新的 msbuild.exe 的位置？

请注意，测试机器不断变化，最新的 msbuild.exe 的位置可能（大多数情况下没有）不同。此外，在测试机器中通常不会为 msbuild.exe 设置 PATH 变量。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T13:44:44.793

有一个保留的属性 - $(MSBuildBinPath)。

请参阅[http://msdn.microsoft.com/en-us/library/ms164309.aspx](http://msdn.microsoft.com/en-us/library/ms164309.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T06:20:23.663

你有没有考虑过类似...

```
%FrameworkDir%%FrameworkVersion%\MSBuild.exe 
```

# c - 字符的工具函数

> ID：10340447
> 
> 赞同：-2
> 
> 时间：2012-04-26T19:51:56.147
> 
> 标签：c, char

我想处理一些 char 变量，并想获得一些函数列表，这些函数在处理 char 时可以完成这些任务。

*   获取 char 的第一个字符（var_name[1] 似乎不起作用）
*   获取char的最后一个字符
*   检查 char1 是否与 char2 匹配（例如，如果“unicorn”与“bicycle”匹配的话

我很确定其中一些方法存在于 stdio.h 等库中，但谷歌不是我的朋友。

编辑：我的第三个问题意味着不是与 strcmp 直接匹配，而是单个字符匹配（例如，如果“hey”和“hello”）将 e 作为普通字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:54:28.747

*   用于`var_name[0]`获取第一个字符（数组索引从`0`到`N - 1`，其中`N`是数组中的元素数）。
*   用于`var_name[strlen(var_name) - 1]`获取最后一个字符。
*   用于[`strcmp()`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)比较两个`char`字符串。

编辑：

要搜索字符串中的字符，您可以使用[`strchr`()](http://www.cplusplus.com/reference/clibrary/cstring/strchr/)：

```
if (strchr("hello", 'e') && strchr("hey", 'e'))
{
} 
```

还有一个[`strpbrk()`](http://www.cplusplus.com/reference/clibrary/cstring/strpbrk/)函数可以指示两个字符串是否有任何共同字符：

```
if (strpbrk("hello", "hey"))
{
} 
```

[假设您的意思是 a `char[]`，而不是`char`单个字符的 a 。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:57:03.110

1.  C 使用基于 0 的索引，var_name[0] 为您提供第一个字符。
2.  strlen() 为您提供字符串的长度，连同我对 1 的回答。表示
    char lastchar = var_name[strlen(var_name)-1]; [http://www.cplusplus.com/reference/clibrary/cstring/strlen/](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)

3.  strcmp(var_name1, var_name2) == 0\. [http://www.cplusplus.com/reference/clibrary/cstring/strcmp/](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:58:58.917

您正在寻找的是[C 运行时库](http://en.wikipedia.org/wiki/C_string_handling)中的字符串函数。这些是在 string.h 中定义的，而不是在 stdio.h 中。

但是您的问题清单很简单：

var_name[0] 非常适合访问数组中的第一个字符。var_name[1] 不起作用，因为 C 中的数组是从零开始的。

数组中的最后一个字符是：

```
char c;
c = var_name[strlen(var_name)-1]; 
```

相等性测试很简单：

```
if (var_name[0] == var_name[1])
   ; // they match 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:00:17.937

> 我很确定其中一些方法存在于 stdio.h 等库中，但谷歌不是我的朋友。

C 标准库 (libc) 中的字符串函数在头文件中进行了描述。如果您使用的是 unix-ish 机器，请尝试`man 3 string`在命令行输入。然后，您可以再次使用该`man`程序来获取有关特定功能的更多信息，例如`man 3 strlen`. （“3”只是告诉`man`您查看“第 3 节”，它描述了 C 标准库函数。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T20:12:09.117

C 和 C++ 字符串是零索引的。保存特定长度字符串所需的内存必须至少是字符串长度和字符串终止符 \0 的一个字符。所以，第一个字符是数组[0]。

正如@Carey Gregory 所说，基本的字符串处理函数在string.h 中。但这些只是处理字符串的原语。C 是一种足够低级的语言，您有机会根据 string.h 中的函数构建自己的字符串处理库。

例如，您可能希望将字符串指针传递给函数，以及保存该健全字符串的缓冲区的长度，而不仅仅是字符串长度本身。

# pattern-matching - 测试 Oz 中的统一性

> ID：10340449
> 
> 赞同：1
> 
> 时间：2012-04-26T19:52:02.770
> 
> 标签：pattern-matching, unification, oz, mozart

我想做的是，测试某个表达式是否与 Oz 中的另一个表达式统一。

例如，我想做这样的事情：

```
fun {UnifyP A B}
  ...
end 
```

that can return `true`when `A`can be unity to `B`and false else.

我想用它来进行特定的模式匹配（即按特定模式过滤列表）。

谢谢您的回答。

# python - 在 Jython 中导入非标准 python 模块

> ID：10340453
> 
> 赞同：2
> 
> 时间：2012-04-26T19:52:18.560
> 
> 标签：python, class, jython

一个简单的问题...我正在使用 Jython 执行一些任务，并且我需要访问一些 MySQL 数据库...我找到了 Python2.5 的 MySQL 数据库连接器；它不附带 jython/python 安装（它是第 3 方）。我已将模块的文件夹与 main.py 放在同一目录中，但是当我启动它时，它告诉我它找不到模块。我之前在 Python3.2 中为导入做过这个，我认为它会起作用。

**Jython 可以导入非标准的 python 模块吗？-- 注意我可以很好地导入 Java 类。**

这是错误（是的，这是针对 Minecraft 的）：

```
20:50:44 [SEVERE] org.bukkit.plugin.InvalidPluginException: Traceback (most recent call last):
  File "<iostream>", line 10, in <module>
ImportError: No module named PyDbLite

20:50:44 [SEVERE]   at net.lahwran.bukkit.jython.PythonPluginLoader.loadPlugin(PythonPluginLoader.java:280)
20:50:44 [SEVERE]   at net.lahwran.bukkit.jython.PythonPluginLoader.loadPlugin(PythonPluginLoader.java:113)
20:50:44 [SEVERE]   at net.lahwran.bukkit.jython.PythonPluginLoader.loadPlugin(PythonPluginLoader.java:83)
20:50:44 [SEVERE]   at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:305)
20:50:44 [SEVERE]   at com.master.bukkit.python.PythonLoader.onLoad(PythonLoader.java:58)
20:50:44 [SEVERE]   at org.bukkit.craftbukkit.CraftServer.loadPlugins(CraftServer.java:212)
20:50:44 [SEVERE]   at org.bukkit.craftbukkit.CraftServer.<init>(CraftServer.java:183)
20:50:44 [SEVERE]   at net.minecraft.server.ServerConfigurationManager.<init>(ServerConfigurationManager.java:53)
20:50:44 [SEVERE]   at net.minecraft.server.MinecraftServer.init(MinecraftServer.java:156)
20:50:44 [SEVERE]   at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:422)
20:50:44 [SEVERE]   at net.minecraft.server.ThreadServerApplication.run(SourceFile:492)
20:50:44 [SEVERE] Caused by: Traceback (most recent call last):
  File "<iostream>", line 10, in <module>
ImportError: No module named PyDbLite

20:50:44 [SEVERE]   at org.python.core.PyException.fillInStackTrace(PyException.java:70)
20:50:44 [SEVERE]   at java.lang.Throwable.<init>(Throwable.java:181)
20:50:44 [SEVERE]   at java.lang.Exception.<init>(Exception.java:29)
20:50:44 [SEVERE]   at java.lang.RuntimeException.<init>(RuntimeException.java:32)
20:50:44 [SEVERE]   at org.python.core.PyException.<init>(PyException.java:46)
20:50:44 [SEVERE]   at org.python.core.PyException.<init>(PyException.java:43)
20:50:44 [SEVERE]   at org.python.core.PyException.<init>(PyException.java:61)
20:50:44 [SEVERE]   at org.python.core.Py.ImportError(Py.java:290)
20:50:44 [SEVERE]   at org.python.core.imp.import_first(imp.java:750)
20:50:44 [SEVERE]   at org.python.core.imp.import_name(imp.java:834)
20:50:44 [SEVERE]   at org.python.core.imp.importName(imp.java:884)
20:50:44 [SEVERE]   at org.python.core.ImportFunction.__call__(__builtin__.java:1220)
20:50:44 [SEVERE]   at org.python.core.PyObject.__call__(PyObject.java:357)
20:50:44 [SEVERE]   at org.python.core.__builtin__.__import__(__builtin__.java:1173)
20:50:44 [SEVERE]   at org.python.core.imp.importOne(imp.java:903)
20:50:44 [SEVERE]   at org.python.pycode._pyx5.f$0(<iostream>:52)
20:50:44 [SEVERE]   at org.python.pycode._pyx5.call_function(<iostream>)
20:50:44 [SEVERE]   at org.python.core.PyTableCode.call(PyTableCode.java:165)
20:50:44 [SEVERE]   at org.python.core.PyCode.call(PyCode.java:18)
20:50:44 [SEVERE]   at org.python.core.Py.runCode(Py.java:1261)
20:50:44 [SEVERE]   at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235)
20:50:44 [SEVERE]   at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:230)
20:50:44 [SEVERE]   at net.lahwran.bukkit.jython.PythonPluginLoader.loadPlugin(PythonPluginLoader.java:239)
20:50:44 [SEVERE]   ... 10 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:35:51.417

如果它们是纯 python，jython 可以导入非标准 python 模块。数据库连接通常是 cpython 模块。对于数据库连接，请参阅[zxJDBC](http://www.jython.org/jythonbook/en/1.0/DatabasesAndJython.html) 它使任何可用于 java 的 jdbc 连接以标准 python DBI 2.0 的方式运行。

两全其美！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T19:55:36.387

由于您使用的是 jython，因此请使用[mysql 连接器/J](http://dev.mysql.com/downloads/connector/j/3.1.html) jar。下载它，将其添加到您的`CLASSPATH`. 文件中，并确保执行代码的用户对 jar 所在位置具有读取权限。

获得 jar 后，请按照[文档](http://www.jython.org/archive/21/docs/zxjdbc.html)获取示例代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T20:40:10.980

PyDbLite 表面上是纯 python，所以它应该导入 jython OK。我没有尝试将 setup.py 与 Jython 一起使用，但我从 Jython 导入了几个 Jython 未附带的纯 python .py。我有一个使用常用导入机制在 CPython 2.x、CPython 3.x、Pypy 和 Jython 上运行的项目。

想到的主要问题是：PyDbLite 是否在 sys.path 上的目录中？

# java - Javamail 发送带附件的邮件适用于 Windows 但不适用于 Linux

> ID：10340456
> 
> 赞同：1
> 
> 时间：2012-04-26T19:52:42.380
> 
> 标签：java, jakarta-ee, tomcat6, jakarta-mail

我在 Tomcat 6.0 上使用 Javamail 通过 linux 发送带有附件的电子邮件时遇到问题。

在我的机器（Windows 7 64）上使用 Tomcat 服务器发送邮件时，它工作正常。我已经使用本地 smtp 服务器和 gmail 帐户作为中继对其进行了测试。但是当我的远程 Tomcat 服务器运行 linux 发送邮件时，收到的邮件是一团糟，没有主题，附件显示为文本（原始是 pdf 文件），并且一些邮件标题与邮件混合在一起。我尝试使用在 Windows 上进行测试时使用的相同方法：尝试本地 smtp 服务器，然后使用 gmail 作为中继。它在这两种情况下都不起作用。

我还尝试更改我的本地 JavaMail 库，并使用我们在远程服务器上的相同库（从服务器复制到我的机器），但在本地运行的结果总是相同的。电子邮件以预期的方式收到。

当我发送电子邮件时，它会发送另一个副本给我，这样我就可以跟踪正在发生的事情。下面的日志显示了使用我的 j2ee.jar 中嵌入的 Javamail 运行本地测试时两个邮件（原始邮件和副本）的 Javamail 输出（有关详细信息，请参见下文）：

```
DEBUG: setDebug: JavaMail version 1.3.1
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587

220 mx.google.com ESMTP jz16sm6498879vdb.9
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO Felipe-HP
250-mx.google.com at your service, [177.17.162.156]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250-ENHANCEDSTATUSCODES
250 STARTTLS
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Attempt to authenticate
AUTH LOGIN
334 xxxxxxxxx
334 xxxxxxxxx
235 2.7.0 Accepted
DEBUG SMTP: use8bit false
MAIL FROM:< xxxxx@xxxxx.xxxx.xxxx>
250 2.1.0 OK jz16sm6498879vdb.9
RCPT TO:< xxxxx@xxxxx.xxxx.xxxx>
250 2.1.5 OK jz16sm6498879vdb.9
DEBUG SMTP: Verified Addresses
DEBUG SMTP:    xxxxx@xxxxx.xxxx.xxxx
DATA
354  Go ahead jz16sm6498879vdb.9
Message-ID: <38047647.1335464129114.JavaMail.Felipe@Felipe-HP>
From:  xxxxx@xxxxx.xxxx.xxxx
To:  xxxxx@xxxxx.xxxx.xxxx
Subject: Boleto Amaua - 06/05/2012
Mime-Version: 1.0
Content-Type: multipart/mixed; 
    boundary="----=_Part_0_1451495453.1335464128994"

------=_Part_0_1451495453.1335464128994
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

------=_Part_0_1451495453.1335464128994
Content-Type: application/octet-stream; 
    name=boleto-158-255-1335464128903.pdf
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=boleto-158-255-1335464128903.pdf
Content-Description: Attached file: boleto-158-255-1335464128903.pdf

------=_Part_0_1451495453.1335464128994--

.
250 2.0.0 OK 1335464133 jz16sm6498879vdb.9
QUIT

DEBUG: setDebug: JavaMail version 1.3.1
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587

220 mx.google.com ESMTP jz16sm6499184vdb.9
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO Felipe-HP
250-mx.google.com at your service, [177.17.162.156]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250-ENHANCEDSTATUSCODES
250 STARTTLS
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Attempt to authenticate
AUTH LOGIN
334 xxxxxxxxxx
334 xxxxxxxxxx
235 2.7.0 Accepted
DEBUG SMTP: use8bit false
MAIL FROM:< xxxxx@xxxxx.xxxx.xxxx>
250 2.1.0 OK jz16sm6499184vdb.9
RCPT TO:< xxxxx@xxxxx.xxxx.xxxx>
250 2.1.5 OK jz16sm6499184vdb.9
DEBUG SMTP:  xxxxx@xxxxx.xxxx.xxxx
DEBUG SMTP:    xxxxx@xxxxx.xxxx.xxxx
DATA
354  Go ahead jz16sm6499184vdb.9
Message-ID: <895165784.1335464133437.JavaMail.Felipe@Felipe-HP>
From:  xxxxx@xxxxx.xxxx.xxxx
To:  xxxxx@xxxxx.xxxx.xxxx
Subject: =?ISO-8859-1?Q?C=F3pia_Boleto_Amaua_-_06/05/2012?=
Mime-Version: 1.0
Content-Type: multipart/mixed; 
    boundary="----=_Part_1_1973765399.1335464133435"

------=_Part_1_1973765399.1335464133435
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

###################################################################
Mail Content
###################################################################

------=_Part_1_1973765399.1335464133435
Content-Type: application/octet-stream; 
    name=boleto-158-255-1335464128903.pdf
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=boleto-158-255-1335464128903.pdf
Content-Description: Attached file: boleto-158-255-1335464128903.pdf

##################################################################
Attachment content
##################################################################

------=_Part_1_1973765399.1335464133435--

.
250 2.0.0 OK 1335464137 jz16sm6499184vdb.9
QUIT 
```

下面显示了我的服务器生成的日志：

```
Loading javamail.default.providers from jar:file:/opt/tomcat60/lib/mail.jar!/META-INF/javamail.default.providers
DEBUG: loading new provider protocol=imap, className=com.sun.mail.imap.IMAPStore, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=imaps, className=com.sun.mail.imap.IMAPSSLStore, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=smtp, className=com.sun.mail.smtp.SMTPTransport, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=smtps, className=com.sun.mail.smtp.SMTPSSLTransport, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=pop3, className=com.sun.mail.pop3.POP3Store, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=pop3s, className=com.sun.mail.pop3.POP3SSLStore, vendor=Sun Microsystems, Inc, version=null

Loading javamail.default.providers from jar:file:/home/xxxxxxx/public_html/WEB-INF/lib/mail.jar!/META-INF/javamail.default.providers
DEBUG: loading new provider protocol=imap, className=com.sun.mail.imap.IMAPStore, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=imaps, className=com.sun.mail.imap.IMAPSSLStore, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=smtp, className=com.sun.mail.smtp.SMTPTransport, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=smtps, className=com.sun.mail.smtp.SMTPSSLTransport, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=pop3, className=com.sun.mail.pop3.POP3Store, vendor=Sun Microsystems, Inc, version=null
DEBUG: loading new provider protocol=pop3s, className=com.sun.mail.pop3.POP3SSLStore, vendor=Sun Microsystems, Inc, version=null
DEBUG: getProvider() returning provider protocol=smtp; type=javax.mail.Provider$Type@67aece; class=com.sun.mail.smtp.SMTPTransport; vendor=Sun Microsystems, Inc

DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP dc7sm2927045vdc.6
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO l50dnn0358.locaweb.com.br
250-mx.google.com at your service, [187.45.198.10]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250-ENHANCEDSTATUSCODES
250 PIPELINING
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "PIPELINING", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO l50dnn0358.locaweb.com.br
250-mx.google.com at your service, [187.45.198.10]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250-ENHANCEDSTATUSCODES
250 PIPELINING
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "PIPELINING", arg ""
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 
DEBUG SMTP: AUTH LOGIN command trace suppressed
DEBUG SMTP: AUTH LOGIN succeeded
DEBUG SMTP: use8bit false
MAIL FROM:<xxxxx@xxxxx.xxxx.xxxx>
250 2.1.0 OK dc7sm2927045vdc.6
RCPT TO:<xxxxx@xxxxx.xxxx.xxxx>
250 2.1.5 OK dc7sm2927045vdc.6
DEBUG SMTP: Verified Addresses
DEBUG SMTP:   xxxxx@xxxxx.xxxx.xxxx
DATA
354  Go ahead dc7sm2927045vdc.6

------=_Part_0_16475596.1335412817148
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

###################################################################
Mail Content
###################################################################

------=_Part_0_16475596.1335412817148
Content-Type: application/octet-stream; name=boleto-1436-1707-1335412817075.pdf
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=boleto-1436-1707-1335412817075.pdf
Content-Description: Attached file: boleto-1436-1707-1335412817075.pdf

##################################################################
Attachment content
##################################################################

------=_Part_0_16475596.1335412817148--
.
250 2.0.0 OK 1335412824 dc7sm2927045vdc.6
QUIT
221 2.0.0 closing connection dc7sm2927045vdc.6

DEBUG: getProvider() returning provider protocol=smtp; type=javax.mail.Provider$Type@67aece; class=com.sun.mail.smtp.SMTPTransport; vendor=Sun Microsystems, Inc
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP c17sm2919516vdj.12
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO l50dnn0358.locaweb.com.br
250-mx.google.com at your service, [187.45.198.10]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250-ENHANCEDSTATUSCODES
250 PIPELINING
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "PIPELINING", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO l50dnn0358.locaweb.com.br
250-mx.google.com at your service, [187.45.198.10]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250-ENHANCEDSTATUSCODES
250 PIPELINING
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Found extension "PIPELINING", arg ""
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 
DEBUG SMTP: AUTH LOGIN command trace suppressed
DEBUG SMTP: AUTH LOGIN succeeded
DEBUG SMTP: use8bit false
MAIL FROM:<xxxxxxx@xxxxx.xxxx.xxxx>
250 2.1.0 OK c17sm2919516vdj.12
RCPT TO:<xxxxx@xxxxx.xxxx.xxxx>
250 2.1.5 OK c17sm2919516vdj.12
DEBUG SMTP: Verified Addresses
DEBUG SMTP:   xxxxx@xxxxx.xxxx.xxxx
DATA
354  Go ahead c17sm2919516vdj.12

------=_Part_1_22662950.1335412824767
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

###################################################################
Mail Content
###################################################################

------=_Part_1_22662950.1335412824767
Content-Type: application/octet-stream; name=boleto-1436-1707-1335412817075.pdf
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=boleto-1436-1707-1335412817075.pdf
Content-Description: Attached file: boleto-1436-1707-1335412817075.pdf

##################################################################
Attachment content
##################################################################

------=_Part_1_22662950.1335412824767--
.
250 2.0.0 OK 1335412828 c17sm2919516vdj.12
QUIT
221 2.0.0 closing connection c17sm2919516vdj.12 
```

在我的远程服务器中，我们在 context/WEB-INF/lib 上有 JavaMail 库。我们有一个 mail.jar 和一个 j2ee.jar，其中还包含 JavaMail。此外，在 tomcat 文件夹中还有另一个 mail.jar（可以在日志中看到）和另一个包含 Javamail 的 j2ee.jar。

我尝试用最近的替换服务器的 /WEB-INF/lib/mail.jar，但日志甚至没有改变。在我的本地测试中使用来自服务器的 .jars 会产生正确的结果。

请注意，我的服务器没有显示一些应该存在的调试行。

以下是用于发送电子邮件的代码：

```
Properties props = new Properties();
props.put("mail.smtp.debug", "true");
props.put("mail.smtp.auth", "true");
props.put("mail.mime.charset", "ISO-8859-1"); 
props.put("mail.smtp.starttls.enable", "true");
props.put("mail.smtp.starttls.required", "true");
props.put("mail.smtp.host", smtpHost);
props.put("mail.smtp.port", Integer.toString(port));
this.session = Session.getInstance(props,
    new javax.mail.Authenticator() {
      protected PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(usr, pass);
      }
});

MimeMultipart mp = new MimeMultipart("mixed");
MimeBodyPart txtPart = new MimeBodyPart();

if(this.message == null){
    if(this.session != null){
       this.message = new MimeMessage(this.session);
    } else {
       throw new Exception("");
    }
}

this.session.setDebug(true);
this.message.setFrom(new InternetAddress(this.from));
this.message.setRecipient(Message.RecipientType.TO, new InternetAddress(this.to));
this.message.setSubject(this.subject);

txtPart.setDisposition(Part.INLINE);
txtPart.setText(text);
mp.addBodyPart(txtPart);

for (int i = 0; i < this.attach.size(); i++) {
    MimeBodyPart filePart = new MimeBodyPart();
    File file = (File) this.attach.elementAt(i);
    FileDataSource fds = new FileDataSource(file);
    DataHandler dh = new DataHandler(fds);
    filePart.setFileName(file.getName());
    filePart.setDisposition(Part.ATTACHMENT);
    filePart.setDescription("Attached file: " + file.getName());
    filePart.setDataHandler(dh);
    mp.addBodyPart(filePart);
}

this.message.setContent(mp);

Transport.send(this.message); 
```

需要任何进一步的细节，请询问。

感谢您的考虑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:52:37.310

尝试从您的应用程序中删除 j2ee.jar；其中包含一些 JavaMail 类的非常旧版本，可能与 mail.jar 中的较新版本冲突。

（j2ee.jar 只打算在编译时使用；它不应该在运行时使用。）

# php - Safecracker 和 if:else 问题

> ID：10340457
> 
> 赞同：1
> 
> 时间：2012-04-26T19:52:51.670
> 
> 标签：php, expressionengine, safecracker

我在 group.group 中有一个名为 post.html 的模板。该模板包括一个安全破解器表单。我在里面有 safecracker 表单和 if/else 语句，因此如果 url 是 /group/post/title 那么 safecracker 表单会加载现有条目以进行编辑。如果没有标题段（url 只是 /group/post），那么它会加载一个空白的安全破解器表单来创建一个新帖子。这是我的代码：

```
{if segment_3 != ""}
      {exp:safecracker channel="trophy_gallery"
       require_entry="yes" url_title="{segment_3}" author_only="yes"}

            // edit entry form code

        {/exp:safecracker}
{if:else}
        {exp:safecracker channel="trophy_gallery"}

           // create entry form code

        {/exp:safecracker}
{/if} 
```

出于某种原因，诸如 require_entry、url_title 和 author_only 之类的安全破解器设置会影响代码“else”块中的安全破解器设置。因此，当我加载没有第三段的 url 时，它告诉我没有提供任何条目。

我格式化它的方式有什么问题（一种更好的方法），或者这可能是如何解析安全破解器标签的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:22:32.990

以下是来自表达式引擎论坛的[答案：](http://expressionengine.com/forums/viewthread/216023/)

Safecracker 标签已经内置了解析功能，可以根据`url_title`or的值处理编辑/新情况`entry_id`。所以我可以将我的代码重写为：

```
{exp:safecracker channel="trophy_gallery"
 url_title="{segment_3}" author_only="yes"}

    // edit entry form code

{/exp:safecracker} 
```

# sql-server-2008 - SQL Server ：将用户设置为仅 SEE 1 数据库，并且只有一些视图。（不只是拒绝访问，所以他们根本看不到）

> ID：10340459
> 
> 赞同：2
> 
> 时间：2012-04-26T19:53:05.710
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在尝试在 SQL Server 2008 R2 中设置一个用户，因此当他们登录时，他们只能看到一个数据库，因此他们只能看到具有 1 个架构的视图。

他们应该看不到其他数据库的存在，他们可以看到的数据库中存在的任何表，或者除了属于一个模式的表之外存在的任何视图。

我该怎么做呢？

先感谢您

编辑：更多信息。通过拒绝查看所有数据库并使用户成为数据库的所有者，我过去设法让用户只能看到 1 个数据库而没有其他数据库。在这种情况下，用户不能是数据库的所有者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:21:15.550

您可以将数据库移动到新实例。

# vb.net - 动态地将行添加到 dataGridView

> ID：10340461
> 
> 赞同：0
> 
> 时间：2012-04-26T19:53:15.537
> 
> 标签：vb.net, winforms, datagridview

VB.NET 4.0 框架 Windows 窗体应用程序。所以我有一个 DataGridView，我在设计器中的表单上放置了一个，将所有列设置为 readOnly, `AllowUserToAddRows = False`, `AllowUserToDeleteRows = False`。现在对于代码不好的部分。

我的功能看起来像这样：

```
 Private Sub fill_items()
    Dim prop As List(Of property_info) = db.property_info.ToList
    Dim units As List(Of unit) = db.units.ToList
    Dim _year As Integer = System.DateTime.Now.Year
    Dim fin As List(Of financial) = db.financials.Where(Function(f) f.Year_start.Value.Year = _year).OrderBy(Function(f) f.transaction_date).ToList

    Dim x As Integer = 0

    For Each _i In prop

        x += 1
        Dim _typeName As String = String.Empty
        Dim i As property_info = _i
        Select Case i.property_type
            Case Is = 0
                _typeName = "Storage"
            Case Is = 1
                _typeName = "House/Apartment"
            Case Is = 2
                _typeName = "Office Space"
        End Select

        reports1GridView.Rows.Add(_typeName, i.property_Name, " ", " ", " ", " ")

        For Each _t In units.Where(Function(f) f.propertyId = i.idProperties)
            Dim t As unit = _t
            x += 1
            For Each trans In fin.Where(Function(F) F.Unit_finId = t.UnitId)
                x += 1
                Dim _ttype As String = String.Empty
                Dim _typeCheck As Integer = 0
                Select Case trans.transaction_type
                    Case Is = 0
                        _ttype = "Payment Recieved"
                        _typeCheck = 0
                    Case Is = 2
                        _ttype = "Rent Charged"
                        _typeCheck = 1
                    Case Is = 3
                        _ttype = "Deposit"
                        _typeCheck = 1
                    Case Is = 20
                        _ttype = "Late Fee"
                        _typeCheck = 0
                    Case Is = 4
                        _ttype = "Auction Collection"
                        _typeCheck = 0
                    Case Is = 5
                        _ttype = "Auction Fee"
                        _typeCheck = 2
                    Case Is = 6
                        _ttype = "City Tax"
                        _typeCheck = 0
                    Case Is = 7
                        _ttype = "County Tax"
                        _typeCheck = 0
                    Case Is = 8
                        _ttype = "State Tax"
                        _typeCheck = 0
                    Case Is = 9
                        _ttype = "Maintenance"
                        _typeCheck = 2
                End Select

                Dim _TypeValue As Decimal = Nothing
                Select Case _typeCheck
                    Case Is = 0
                        _TypeValue = trans.Amount_Paid
                    Case Is = 1
                        _TypeValue = trans.amount_due
                    Case Is = 2
                End Select
                Dim _tDate As Date = trans.transaction_date
                Dim _tDateString As String = _tDate.ToShortDateString.ToString
                reports1GridView.Rows.Add(" ", " ", t.UnitId, _ttype, _tDateString, _TypeValue)

                Dim xl As String = String.Empty
            Next
        Next
    Next
End Sub 
```

我的问题是 datagridview 只显示 gridview 的 0、1、2、3 列中的值。Gridview 看起来是正确的，直到它到达事务类型所在的第 3 列。出于某种原因，应该在第 5 列中显示的数量正在该列中显示，第 4 列和第 5 列完全留空。我查看了函数的最后一个报告中的变量中包含的值 1GridView.Rows.Add 和所有变量不仅正确，而且顺序正确。所以我的问题是为什么这会失败......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:14:55.943

假设您的 DataGridView 未绑定（意味着没有自动定义列），您需要创建代码所需的适当列。然后 Row.Add(item, ....) 将起作用

例如：

```
Private Sub SetupGrid()
    reports1GridView.ColumnCount = 5
    reports1GridView.Columns(0).Name = "Type"
    .... ' other columns
End Sub 
```

在进入你的主循环之前调用这个方法来定义你的列的名称和类型

# javascript - 对 html 选择框外观相似但具有额外功能的专业修补

> ID：10340465
> 
> 赞同：1
> 
> 时间：2012-04-26T19:53:34.447
> 
> 标签：javascript, jquery, jquery-ui, user-interface

这可能是一个有趣的问题。我打算先做一个看起来像普通 html 的选择框，但是当你打开它时，会有两件令人兴奋的事情：

1.  该框将包含 2 个不同的文本对齐方式，形成两个整齐的行。（见图）
2.  在框中包含的列表项的每一行末尾，都会有一个喜欢/不喜欢的按钮系统。（见图）

![*图片*](../Images/038a31dcde87aa8f28b1db4ede62fef6.png)

你们中的一些人已经知道这是怎么回事，我需要像在 GUI 编程中制作任何这样的菜单一样制作东西。我假设一些面向对象的 Javascript 编程？

（我正在寻找技术细节，因为我是 Javascript 和 jQuery 的新手（但不是编程），我基本上对有关将这种伪代码构造转换为 Javascript/jQuery 或其他更有用的框架的信息感兴趣，如果真的需要的话. 我也很清楚我通常不会在这个 GUI 中使用任何实际的 html。）

所以我的问题是，我应该如何着手按照你的方式来做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:09:47.913

您将无法修改普通`select`元素来实现此目的，您必须

*   创建一个proxy-pro-select-element 并隐藏原始元素。
*   复制选项元素并在您的代理中创建等效元素
*   您还必须使两个选择保持同步。

一旦你有了它，你就可以在你的代理专业选择元素中做任何事情，最简单的方法是点击显示一个带有可选行的表格，使用表格很容易对齐所有列。

技术细节：

*   阅读如何实现一个[jQuery 插件](http://docs.jquery.com/Plugins/Authoring)
*   在您的插件`init`循环通过目标中的选项`select`并在 div 中创建相应的行说`dropdown`，隐藏原始选择并将其替换为您的控件，这将是`select-div`
*   onclick on select-div，正确重新定位后显示下拉div

看到这样的代码[并](https://github.com/sparkbox/Custom-Selectbox/blob/master/js/jquery.sparkbox-select.js)修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:09:41.373

您应该能够使用 jQuery 和 jQuery UI 组合框来完成类似的操作，[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

然后修改 _renderItem 以更改下拉列表中结果的布局。您可以在查看源代码中搜索以下内容：

```
input.data( "autocomplete" )._renderItem 
```

但是，我会尽量避免在组合框中使用喜欢/不喜欢按钮，因为它违反了正常的 Web 约定。

# dialog - Facebook 请求对话框响应不包含 request_ids？这是怎么回事？

> ID：10340466
> 
> 赞同：3
> 
> 时间：2012-04-26T19:53:34.723
> 
> 标签：dialog, facebook-ios-sdk

我们正在使用适用于 iOS 的 Facebook SDK。一切正常（包括身份验证和提要对话框等），除了请求对话框；回调函数“dialogCompleteWithUrl”正在获取根本不包含 request_ids 的响应 URL！如果您对 URL 编码进行解码，我们会得到类似“fbconnect://success?request=177205945735026&to%5B0%5D=559849340”的信息，它有效地转换为“fbconnect://success?request=177205945735026&to[0]=559849340”。我们检查了朋友的账户；通知部分没有请求。有人可以帮忙吗？

此外，我们使用“发送邀请”菜单测试了 Hackbook 样本；它也不起作用——它生成了类似的 URL，其中没有 request_ids。

顺便说一句，我们在使用 iOS 5.1 和 5.0 的最新 XCode 4.3.2 上使用最新的 Facebook iOS SDK（上周于 2012 年 4 月 20 日下载）；在模拟器和新 iPad 以及 iPhone 4 上都进行了测试。使用[http://demo.vatlab.net/RequestDialog.aspx](http://demo.vatlab.net/RequestDialog.aspx)的测试适用于上述 iOS sdk 测试中使用的用户帐户。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T23:54:48.897

文档指出：

> 请求只会出现在应用仪表板中已将游戏定义为存在的平台上。因此，例如，如果一个应用程序存在于 iOS 和 Android 上，但没有 Canvas 存在，则收件人将不会看到通过该应用程序收到的请求出现在 Facebook.com 的桌面网络版本上。

[脸书文件](https://developers.facebook.com/docs/games/requests/v2.0)

# indexing - robots.txt 文件可能无效

> ID：10340469
> 
> 赞同：1
> 
> 时间：2012-04-26T19:53:45.517
> 
> 标签：indexing, web-crawler, robots.txt

这是我的`robots.txt`。我只想允许基本 url`domain.com`用于索引，并禁止所有子 url，如`domain.com/foo`和`domain.com/bar.html`。

```
User-agent: *
Disallow: /*/ 
```

因为我不确定这是否是有效的语法，所以我使用 Google Webmaster Tools 对其进行了测试。它向我显示了这条消息。

```
robots.txt file is probably invalid. 
```

**我的文件有效吗？有没有更好的方法只允许基本 url 进行索引？**

更新：谷歌`robots.txt`4 小时前下载了我的。我认为这就是为什么它不起作用。我将等待一段时间，如果问题仍然存在，我将再次更新我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:16:38.543

这是一个验证器的链接。它可能会帮助您解决文件中的任何错误。

[Robots.txt 检查器](http://tool.motoricerca.info/robots-checker.phtml)

我检查了另一个验证器[robots.txt Checker](http://www.searchenginepromotionhelp.com/m/robots-text-tester/robots-checker.php)，这就是我在第二行得到的：

> 此处不允许使用通配符（如“*”） 下面的行必须是允许、禁止、注释或空行语句

这可能是您正在寻找的：

```
User-Agent: *
Allow: /index.html
Disallow: / 
```

这假设您的主页是 index.html。

如果 index.php 是您的主页，您应该能够将 index.html 换成 index.php。

```
User-Agent: *
Allow: /index.php
Disallow: / 
```

在我通过 index.php 运行的动态网站上，转到 mydomain.com/index.php 仍然会将我带到主页，所以上面应该可以工作。

# coffeescript - 在 vim 中映射 shift 键

> ID：10340470
> 
> 赞同：4
> 
> 时间：2012-04-26T19:53:47.550
> 
> 标签：coffeescript, vim

`Shift`在 VIM 中映射密钥时遇到问题。我希望`Ctrl`+`L`的行为与`Ctrl`+ `Shift`+不同`L`

所以我有这个

```
" for insert mode remap <c-l> to:
" Insert a hash rocket  for ruby
" Insert a -> for php
" for coffee the shift key decides

function! SmartHash(...)
  let shift = a:0 > 0
  let ruby = &ft == 'ruby'
  let php = &ft == 'php'
  let coffee = &ft == 'coffee'

  if php
    return "\->"
  end

  if coffee
    return shift ? "\ =>\n" : "\ ->\n"
  end

  if ruby
    return "\ => "
  end

  return ""

endfunction

imap <c-l> <c-r>=SmartHash()<cr>
imap <C-S-L> <c-r>=SmartHash(1)<cr> 
```

...但是无论我是否`Shift`按下了键，它都只是触发了第二个映射。

### 根据[接受的答案更新](https://stackoverflow.com/a/10345866/80559)

```
" for insert mode remap <c-l> to:
" Insert a hash rocket  for ruby
" Insert a -> for php and coffeescript
" double tapping does alternate symbol for php and coffescript
function! SmartHash(...)
  let alt = a:0 > 0
  let ruby = &ft == 'ruby'
  let php = &ft == 'php'
  let coffee = &ft == 'coffee'

  if php || coffee
    return alt ? "\ =>\n" : "\ ->\n"
  end

  if ruby
    return "\ => "
  end

  return ""

endfunction

imap <c-l> <c-r>=SmartHash()<cr>
imap <c-l><c-l> <c-r>=SmartHash(1)<cr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T06:34:26.517

由于键盘输入在内部处理的方式，不幸的是，这在今天是不可能的，即使在 GVIM 中也是如此。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

有些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

我通常通过使用 开始我的备用映射来解决这个问题`g`，例如`<C-l>`and `g<C-l>`，但这在插入模式下不起作用。在您的情况下，通过一些额外的逻辑，您可以`<C-l>`在同一位置进行第二次更改，将先前插入的内容更改`->`为`=>`，以便获得第一个替代 via`<C-l>`和第二个 via `<C-l><C-l>`。

# php - 130 万次查询/小时。您将如何构建查询？

> ID：10340471
> 
> 赞同：7
> 
> 时间：2012-04-26T19:53:57.393
> 
> 标签：php, iphone, mysql, phpmyadmin

我有一个在线 iphone 回合制游戏，同时运行很多游戏。我正在优化代码，因为我和服务器今天都崩溃了。

这是设置：

现在我有一个表，“匹配”（每行 70 个数据字段。结构），它跟踪所有活动的匹配。每隔 7 秒，iphone 将连接，下载他/她活动的“matches”表中的所有匹配项，并更新 iphone 中的 UI。

在大约 1,000 人下载并玩这款游戏之前，这种方法效果很好。服务器崩溃了。

所以为了优化，我想我可以创建一个名为“matches_needs_update”的新表。该表有 2 行；姓名和身份证。“id”与“matches”表中的匹配项相同。更新匹配时，会将其放入此表中。

现在，为了搜索整个“matches”表，查询只是检查玩家是否有任何需要更新的匹配项，然后从“matches”表中获取这些匹配项。

我的问题是双重的：

1.  这是最佳解决方案吗？
2.  如果玩家活跃，比如说 10 场比赛，有没有一种好方法可以同时从“比赛”表中获取这 10 场比赛，或者我是否需要一个 for 循环进行 10 次查询，每场比赛一个：

    “SELECT * FROM 匹配 WHERE id = ？”

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T19:57:18.667

你需要离开数据库。查看 memcache 或 redis。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T19:58:54.020

**我建议[APC](http://php.net/manual/en/book.apc.php) ...**

...当您使用 PHP 时，我假设您是从单个 mysql 数据库中执行此操作的，

它很容易安装，并且从 PHP 6 开始是默认的。

将此 1 表保存在内存中，它会飞起来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:05:13.777

您的数据库看起来非常小。一个有 70 行的表应该在几毫秒内返回，甚至每秒数百个查询应该可以正常工作。

几个传统的指针

*   确保您汇集您的连接。当客户需要数据时，您永远不必进行连接。
*   确保“用户匹配”上有一个索引，以便从索引中获取结果。
*   我确定您有足够的内存来将整个结构保存在缓存中，并且使用这些小表不需要额外的配置。
*   确保您的架构已标准化。每个用户一张桌子。每场比赛一个。并且为匹配中的每个用户提供一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T20:13:39.363

是时候开始缓存东西了，例如memcache 和apc。

至于循环比赛……这是错误的做法。

用户如何通过外部参照表连接到匹配项？还是比赛表有类似player1，player2的东西。

循环查询并不是正确索引表并执行联接以通过 userId 提取所有活动匹配项的方法，这样我会更有效率。给出您可能还希望（如果您还没有）将表拆分为活动和非活动游戏的用户数量。

如果有 6000 个活动游戏和 3,000,000 个不活动游戏，则对这些表进行分区非常有利。

# windows-phone-7 - Windows Phone 7.5 - 当应用程序被删除时推送通知

> ID：10340474
> 
> 赞同：6
> 
> 时间：2012-04-26T19:54:03.723
> 
> 标签：windows-phone-7, push-notification, mpns

我编写了一个 Windows 7.5 手机应用程序，它使用 MPNS 注册磁贴和 toast 推送通知。我的所有基础设施都在工作，并且电话在 MPNS 中注册。我将 ChannelUri 本地保存在手机上，然后将 ChannelUri 发布到我的网站上记录设备 / ChannelUri 的休息服务端点。我能够从网络服务发送 toast 和平铺消息，并在手机上接收它们，没有任何问题。如果应用程序正在运行，我可以捕获 ShellToastNotificationReceived 事件并读取推送通知详细信息，并将消息保存到应用程序的本地数据库中，并且消息也会在列表框中显示给用户。除了必须注册 ChannelUri 之外，系统已与我的网站断开连接，并且我需要的所有数据都包含在通知中。

我的问题是当应用程序被墓碑化并且我发送推送通知时，我看到手机操作系统显示的 toast 消息，如果我点击 toast，我已经在我的应用程序中放置了一个指向页面的 URI，这会重新启动应用程序，我可以捕获消息中的所有数据，并可以再次将其保存到数据库中。但是，如果应用程序被墓碑化并且用户错过了祝酒词，那么我无法保存该消息，除非我编写一些逻辑返回到我的服务器并检查我在本地拥有的消息是否与它发送的消息相匹配，否则它就会丢失。我是否遗漏了什么，或者当应用程序重新启动并与我的服务器重新同步用户可能错过的任何 toast 推送通知时，我是否必须对我的服务器进行检查。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:01:49.653

当应用程序未运行或被墓碑删除时收到推送通知时，如果未对丢失的 toast 进行任何操作，则无法处理数据。您可能需要服务器上的确认逻辑来检查是否收到消息。

# javascript - Chrome扩展程序中的弹出窗口

> ID：10340481
> 
> 赞同：43
> 
> 时间：2012-04-26T19:54:23.353
> 
> 标签：javascript, google-chrome-extension, popup

我正在编写一个 Chrome 扩展程序，我希望在用户单击上下文菜单时弹出一个登录窗口，以便用户输入用户名和密码。在 Chrome 扩展中，我只发现`chrome.pageAction.setPopup`并且`chrome.browserAction.setPopup`可以用来显示弹出窗口，但它们仅在单击页面操作的图标或浏览器操作的图标时才显示弹出窗口，而不是上下文菜单。当然，我可以使用javascript提示框来做到这一点，但问题是提示框中的密码不能被屏蔽。所以我想知道是否还有其他方法可以在 Chrome 扩展中创建弹出窗口。

谢谢！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-26T20:39:20.630

挑选：

*   ^(~~[`showModalDialog(<String url> [, <object arguments>])`](https://developer.mozilla.org/en/DOM/window.showModalDialog)
    打开一个类似对话框的窗口，您可以在其中加载 chrome 扩展中的页面。可以使用 HTML。~~)
    不要**使用**showModalDialog，[它将从 Chrome 中删除](https://code.google.com/p/chromium/issues/detail?id=345831)。
*   [`window.open(<String url> [, <String window_name>[, <String windowFeatures>]])`](https://code.google.com/p/chromium/issues/detail?id=345831)
    打开一个窗口，与之前的方法不同，该窗口不显示为对话框。用户可以最小化窗口，然后继续做其他事情。
*   [`chrome.windows.create(<object createData [, <function callback>]>)`](https://developer.chrome.com/extensions/windows.html#method-create)
    （特定于 Chrome 扩展）使用给定的参数（大小、url、位置……）创建一个新窗口。

所有这些方法都允许您（您的扩展程序）打开一个新窗口/对话框，并处理该页面的逻辑。此页面应与您的扩展程序一起打包。
请参阅[消息传递](https://developer.chrome.com/extensions/messaging.html)以将输入的数据传递给您的扩展程序。

## 演示

扩展程序中的选项卡可以使用[`chrome.runtime.getBackgroundPage`](https://developer.chrome.com/extensions/runtime.html#method-getBackgroundPage). 我将在此演示中演示此功能，以及传统的消息传递方式：

## `manifest.json`

```
{
  "name": "Dialog tester",
  "version": "1.0",
  "manifest_version": 2,
  "background": {
      "scripts": ["background.js"],
      "persistent": false
  },
  "content_scripts": [{
      "matches": ["<all_urls>"],
      "js": ["open-dialog.js"]
  }]
} 
```

## `background.js`

```
// Handle requests for passwords
chrome.runtime.onMessage.addListener(function(request) {
    if (request.type === 'request_password') {
        chrome.tabs.create({
            url: chrome.extension.getURL('dialog.html'),
            active: false
        }, function(tab) {
            // After the tab has been created, open a window to inject the tab
            chrome.windows.create({
                tabId: tab.id,
                type: 'popup',
                focused: true
                // incognito, top, left, ...
            });
        });
    }
});
function setPassword(password) {
    // Do something, eg..:
    console.log(password);
}; 
```

## `open-dialog.js`

```
if (confirm('Open dialog for testing?'))
    chrome.runtime.sendMessage({type:'request_password'}); 
```

## `dialog.html`

```
<!DOCTYPE html><html><head><title>Dialog test</title></head><body>
<form>
    <input id="pass" type="password">
    <input type="submit" value="OK">
</form>
<script src="dialog.js"></script>
</body></html> 
```

## `dialog.js`

```
document.forms[0].onsubmit = function(e) {
    e.preventDefault(); // Prevent submission
    var password = document.getElementById('pass').value;
    chrome.runtime.getBackgroundPage(function(bgWindow) {
        bgWindow.setPassword(password);
        window.close();     // Close dialog
    });
}; 
```

# 使用方法的文档

*   [`chrome.runtime.sendMessage(<request>, <function callback>)`](https://developer.chrome.com/extensions/runtime.html#method-sendMessage)和[`chrome.runtime.onMessage`](https://developer.chrome.com/extensions/runtime.html#event-onMessage)`.addListener(<function listener>)`
*   [`chrome.extension.getURL(<String path>)`](https://developer.chrome.com/extensions/extension.html#method-getURL)
*   [`chrome.runtime.getBackgroundPage(<function callback>)`](https://developer.chrome.com/extensions/runtime.html#method-getBackgroundPage)
*   [`chrome.tabs.create(<object createData> [, <function callback>])`](https://developer.chrome.com/extensions/tabs.html#method-create)
*   [`chrome.windows.create(<object createProperties> [, <function callback>])`](https://developer.chrome.com/extensions/windows.html#method-create)

# sql - SQL、Android SQLITE 加入

> ID：10340483
> 
> 赞同：3
> 
> 时间：2012-04-26T19:54:25.447
> 
> 标签：sql

我有 2 张桌子，看起来像：

```
Table A
key1 key2 key3
1    a    a
2    a    a
3    a    a

Table B
key1 key2 key3
1    xxx  zzz
2    yyy  www 
```

现在我想在 A 和 B 中有一个大表，其中 A.key1 匹配 B.key1 粘贴 B 的内容，否则如果没有 key1 匹配粘贴默认值

例如

```
Key1 Key2 Key3 Key5 Key6
1    a    a    xxx  zzz            
2    a    a    yyy  www               
3    a    a    0    0 
```

什么是查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:59:11.897

你需要左连接：

```
select
  a.key1,
  a.key2,
  a.key3,
  ifnull(b.key2, 0) as key4,
  ifnull(b.key3, 3) as key5
from
  tableA a
left join
  tableB b on b.key1=a.key1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:59:03.550

```
select * from a left outer join b on a.key1 = b.key1 
```

（这将为没有来自 b 的匹配行的 b 列提供空值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:02:16.773

```
select key1, key2, key3, 
    case key5 when null then default(key5) else key5 as key5,  
    case key6 when null then default(key6) else key6 as key6
from a
left outer join b on a.key1 = b.key1 
```

## 编辑

[SQLFiddle 示例](http://sqlfiddle.com/#!5/d7b4b/4)

```
select a.key1, a.key2, a.key3, 
       ifnull(b.key2, 0) as key5,  
       ifnull(b.key2, 3) as key6
from a
left outer join b on a.key1 = b.key1 
```

# jquery - jQuery中window.location更改后文档准备就绪

> ID：10340487
> 
> 赞同：1
> 
> 时间：2012-04-26T19:54:55.177
> 
> 标签：jquery

我正在使用`window.location.replace()`重定向到新页面（与原始页面相同的域）。但是，重定向完成后，我需要运行一些 jquery 代码。我不能简单地将我想在目标页面上运行的代码嵌入，因为它需要我在当前上下文中拥有的数据。

有没有办法在新页面上设置类似于 document.ready 的触发器？

我的第一个想法是

```
window.location.replace(data.redirect);
$(document).ready(
  function() {
   (use data variable from outer context)
  }
); 
```

但这不起作用，因为该函数将在当前文档上运行。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:57:28.037

您应该在 URL 上附加一个#datayouneed，并通过新页面上的 javascript 读取 URL 的哈希部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:57:19.133

如果您无法将代码放到目标页面上，则无法在目标页面上执行代码。不过，有几种方法可以让您在那里获取数据：

1.  发布到新页面
2.  通过查询字符串传递它
3.  将其加载到 cookie 中
4.  将其存储在会话变量中

除了这几种方法之外，您将没有很多其他选项可以将您的数据从 A 转移到 B。最后两个选项只有在用户留在您的域/服务器上时才真正可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:58:57.257

不，不可能，但是如果您在同一个域中，您是否考虑过将该信息放入 cookie 中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:01:49.037

您可以在当前 url 上设置 has 并且可以在第二页上阅读它。

在第一页；

```
window.location.href = "http://second.page#param1=val1&param2=val2" 
```

在第二页中，您可以使用 ;

```
if(window.location.hash) {//Something like param1=val1&param2=val2
  //Do your action
} else {
  // Another action
} 
```

您可以参考[此处](http://www.w3schools.com/jsref/prop_loc_hash.asp)以获取有关哈希的更多信息

# linux - 优化 Ghostscript 的方法？

> ID：10340494
> 
> 赞同：4
> 
> 时间：2012-04-26T19:55:18.480
> 
> 标签：linux, pdf, pdf-generation, ghostscript

我在 linux 服务器上使用 ghostscript 来组合 PDF。我正在使用最新版本，9.05。我通常必须合并 5 个或更多 PDF。目前，合并 3 个 PDF 大约需要 20 秒……这对我来说似乎真的很慢。这是我正在使用的线路：

gs -dBATCH -dNOPAUSE -dNOGC -q -sDEVICE=pdfwrite -sOutputFile=output.pdf -c 3000000 setvmthreshold -f a.pdf b.pdf c.pdf

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:09:51.647

Ghostscript 将每个 PDF 文件完全解释为标记操作，然后从组合内容构建一个新文件。显然，这比简单地复制内容流要慢得多。这就是为什么你正在做的事情看起来很慢。

如上所述，使用仅复制内容流和对象的工具，根据需要重新编号，这样会快得多。除了`pdfjam`（我对此一无所知）之外，您还可以查看`pdftk`. 肯定还有其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:50:32.707

如果您只需要连接一些 pdf，您可以查看 pdfjam。我从来没有发现它在连接过程中很慢，但它有时会产生打印相当慢的输出 pdf。

[关联](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic-research/firth/software/pdfjam/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:26:20.883

使用`pdfconcat`，它会在瞬间完成。Ghostscript 做任何事情都很慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T12:30:17.023

在追踪导致超时的原因后，我注意到 Ghostscript 在处理 pdf v1.4（acrobat 5 兼容性）文件时比 v1.7 快得多。当 Ghostscript 稍后使用文件时，只需将 PDF 文件保存为 v1.4 即可加快速度。

这可能不适用于所有情况。根据速度，可能值得使用 Ghostscript 将 pdf 转换为比其他操作更低的版本。仅通过更改 pdf 版本，我就看到了从 30+ 秒到 ~1 秒的时差。

# sql-server - 动态 TSQL 到 PSQL 转换 SDK？

> ID：10340510
> 
> 赞同：0
> 
> 时间：2012-04-26T19:56:32.517
> 
> 标签：sql-server, oracle, tsql, postgresql

我有一套针对 MSSQL 设计的应用程序。我们有一个新的供应商，它将在那里安装我们的应用程序，但我们绝对必须在该安装中使用 Oracle。其他客户不受影响，我们希望在其他任何地方保留 MSSQL。

问题 1：与这种情况相关的最佳实践是什么？

问题 2：有没有办法（SDK 等）将 TSQL 查询动态转换为 PSQL（无需手动将它们输入 UI 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:04:10.563

只转换 SQL 查询是没有意义的，因为您必须转换所有数据库。在这种情况下，有一个非常有用的解决方案 - 可移植数据对象。该技术允许从特定的数据库实现级别抽象出来。但不幸的是，这不是您的情况，因为您为 MSSQL 设计了专门的应用程序。

# c++ - -Wunused-变量警告

> ID：10340515
> 
> 赞同：0
> 
> 时间：2012-04-26T19:56:55.080
> 
> 标签：c++, warnings

我在学校作业中实现单例设计模式，这是我的班级头文件：

```
class Scheduler {
public:
    static Scheduler * instance();
    ~Scheduler();

private:
    Scheduler();
};

static Scheduler * _singleton = 0; // WARNING HERE 
```

我的问题是我不断收到此错误：

```
../Scheduler.h:60:20: warning: ‘_singleton’ defined but not used [-Wunused-variable] 
```

我们必须提交没有编译警告的作业。我如何摆脱这个警告？我不需要`_singleton`在头文件本身中使用，所以我不确定该怎么做。我知道这很愚蠢，但仍然...

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:59:44.253

您的静态单例实例指针应该是类成员。目前它只是一个自由指针。

```
class Scheduler {
// as before
private:
    Scheduler();
    static Scheduler* _singleton; // declare it in the class
}; 
```

并在实现文件中：

```
Scheduler * Scheduler::_singleton = 0; 
```

# json - 使用 Jersey 的 WADL 中的 JSON 描述

> ID：10340516
> 
> 赞同：0
> 
> 时间：2012-04-26T19:56:55.970
> 
> 标签：json, rest, jersey, wadl

我有一个产生 JSON 输出的 REST 服务。我正在使用泽西岛。当我键入时，我可以看到 XML 格式的 WADL `<server>/<rest>application.wadl`，例如，我得到以下键：

```
<response>
    <ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02" xmlns="" element="script" mediaType="application/json"/>
</response> 
```

现在我需要描述服务返回的 json。我怎样才能做到这一点？

编辑：这里似乎有一个解决方案：http: [//java.net/jira/browse/JERSEY-638](http://java.net/jira/browse/JERSEY-638) 有一个可用的补丁，但我不知道如何使用这个补丁。我该如何处理“.patch”文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:12:08.843

.patch 文件可以使用 SVN`Apply Patch`命令应用。可以在[此处](http://java.net/projects/jersey/sources/svn/show/trunk/jersey?rev=5697)找到 Jersey 源代码 1.x 版。指定了结帐 URL。我认为该补丁未被正式接受，您可以在本地使用它，可能会接受所有风险。

# python - 稀疏矩阵模式上的 Scipy 边界条件

> ID：10340517
> 
> 赞同：4
> 
> 时间：2012-04-26T19:56:57.280
> 
> 标签：python, numpy, scipy, sparse-matrix, boundary

我的系统最好用对角稀疏矩阵（泊松）来描述。我有我的对角稀疏矩阵，但是，我想将边界条件（即矩阵的“边缘”）更改为零。建模者想要在具有不同边界条件的稀疏对角矩阵中描述系统一定是一种常见情况，是否有这样做的最佳实践？

```
[[0,0,0,0,..0],
 [0,2,1,0,..0],
 [0,1,2,1,..0],
 ...
 [0,0,0,0,..0]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:30:56.993

这取决于您使用哪种稀疏矩阵格式。显然[`lil_matrix`并且`dok_matrix`](http://docs.scipy.org/doc/scipy/reference/sparse.html)可以使用切片分配。

> 要有效地构造矩阵，请使用 lil_matrix（推荐）或 dok_matrix。lil_matrix 类支持基本的切片和花式索引，其语法与 NumPy 数组类似。

这使得这很容易：

```
In : x = scipy.sparse.lil_matrix(np.ones((6,6)))

In : x.todense()
Out:
matrix([[ 1.,  1.,  1.,  1.,  1.,  1.],
        [ 1.,  1.,  1.,  1.,  1.,  1.],
        [ 1.,  1.,  1.,  1.,  1.,  1.],
        [ 1.,  1.,  1.,  1.,  1.,  1.],
        [ 1.,  1.,  1.,  1.,  1.,  1.],
        [ 1.,  1.,  1.,  1.,  1.,  1.]])

In : x[:, 0] = 0

In : x[:, -1] = 0

In : x[0, :] = 0

In : x[-1, :] = 0

In : x.todense()
Out:
matrix([[ 0.,  0.,  0.,  0.,  0.,  0.],
        [ 0.,  1.,  1.,  1.,  1.,  0.],
        [ 0.,  1.,  1.,  1.,  1.,  0.],
        [ 0.,  1.,  1.,  1.,  1.,  0.],
        [ 0.,  1.,  1.,  1.,  1.,  0.],
        [ 0.,  0.,  0.,  0.,  0.,  0.]]) 
```

PS：仅供参考，您的矩阵称为[tridiagonal](http://en.wikipedia.org/wiki/Tridiagonal)，而不是对角线。

# c# - 将字符串格式化为带有负数的货币，例如 $(10.00)

> ID：10340518
> 
> 赞同：7
> 
> 时间：2012-04-26T19:57:00.983
> 
> 标签：c#, .net, string-formatting, currency-formatting

我需要按如下方式格式化负货币：`$(10.00)`

我尝试使用`string.Format("{0:C}", itemprice)`，但这给了我这个结果`($10.00)`（括号内的 $

我也试过

```
string fmt = "##;(##)";
itemprice.ToString(fmt); 
```

但它给了我和以前一样的东西`($10.00)`

关于如何获得这样的结果的任何想法：`$(10.00)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:05:35.643

```
itemPrice.ToString(@"$#,##0.00;$\(#,##0.00\)"); 
```

应该管用。我刚刚在 PowerShell 上对其进行了测试：

```
PS C:\Users\Jcl> $teststring = "{0:$#,##0.00;$\(#,##0.00\)}"
PS C:\Users\Jcl> $teststring -f 2 
$2,00
PS C:\Users\Jcl> $teststring -f -2
$(2,00) 
```

那是你要的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:41:59.117

使用 Jcl 的解决方案并使其成为一个不错的扩展：

```
public static string ToMoney(this object o)
{
    return o.toString("$#,##0.00;$\(#,##0.00\)");
} 
```

然后调用它：

```
string x = itemPrice.ToMoney(); 
```

或者另一个非常简单的实现：

```
public static string ToMoney(this object o)
{
    // note: this is obviously only good for USD
    return string.Forma("{0:C}", o).Replace("($","$(");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:05:44.060

您必须手动将其拆分，因为它是非标准格式。

```
string.Format("{0}{1:n2}", System.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol, itemprice); 
```

# c - 转换错误和无效转换错误

> ID：10340526
> 
> 赞同：0
> 
> 时间：2012-04-26T19:57:34.000
> 
> 标签：c

> 错误：从 'void*' 转换为 'unsigned int' 失去精度
> 
> 错误：从 'unsigned int' 到 'unsigned int**' 的无效转换

你能告诉我如何正确地转换这个吗，我在这条线上遇到了错误：

> 颜色 = (unsigned int)malloc(height*sizeof(unsigned int));

在主函数里面。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

unsigned int width;
unsigned int height;
unsigned int **color = NULL;

bool file_write()
{
     FILE *fractal = fopen("mandelbrot_imageSequential.ppm","w+");
    if(fractal != NULL)
    {
            fprintf(fractal,"P6\n");
            fprintf(fractal,"# %s\n", "Mandelbrot_imageSequential.ppm");
            fprintf(fractal,"%d %d\n", height, width);
            fprintf(fractal,"40\n");
            int x = 0, y = 0;
            unsigned int R = 0, G = 0, B = 0;
            for(x = 0; x < width; ++x)
            {
                    for(y = 0; y < height; ++y)
                    {
                            R = (color[y][x]*10);
                            G = 255-((color[y][x]*10));
                            B = ((color[y][x]*10)-150);
                            if(R == 10) R = 11;
                            if(G == 10) G = 11;
                            if(B == 10) B = 11;
                            putc(R, fractal);
                            putc(G, fractal);
                            putc(B, fractal);
                    }
            }
            fclose(fractal);
    }
    return true;
}
int method(int x, int y, double min_re, double max_re, double min_im, double max_im, int max_iterations)
{
    double threshold = 4;
    double x_factor = (max_re-min_re)/(width-1);
    double y_factor = (max_im-min_im)/(height-1);
    double c_im = max_im - y*y_factor;
    double c_re = min_re + x*x_factor;
    double Z_re = c_re, Z_im = c_im;
    unsigned int col = 0;
    for(unsigned n = 0; n < max_iterations; ++n)
    {
        double Z_re2 = Z_re*Z_re, Z_im2 = Z_im*Z_im;
            if(Z_re2 + Z_im2 > threshold)
            {
                    col = n;
                    break;
            }
            Z_im = 2 * Z_re * Z_im + c_im; 
            Z_re = Z_re2 - Z_im2 + c_re;
    }
    return col;
}

void method1(double min_re, double max_re, double min_im, double max_im, int max_iterations)
{  
    for(int x = 0; x < width; x++)
    {
            for(int y = 0; y < height; ++y)
            {
                    int m1 = method(x,y,min_re,max_re,min_im,max_im,max_iterations);
                    if(m1)
                    {
                            color[x][y] = m1*50;
                    }
            }
    }
}
int main(int argc, char *argv[])
{
     unsigned int max_iterations;
     int x,y;
     double threshold;
     double min_re;
     double max_re;
     double min_im;
     double max_im;
     unsigned int NUM_OF_THREADS;
if(argc != 10)
{
    printf("There is an error in the input given.\n");
    return 0;
}
else
{
    height = atoi(argv[1]);
    width = atoi(argv[2]);
    max_iterations = atoi(argv[3]);
    min_re = atof(argv[4]);
    max_re = atof(argv[5]);
    min_im = atof(argv[6]);
    max_im = atof(argv[7]);
    threshold = atoi(argv[8]);
    NUM_OF_THREADS = atoi(argv[9]);
    }
color = (unsigned int)malloc(height*sizeof(unsigned int));
printf("height = %d\twidth = %d\tmaximum_iterations = %d\tminimum_x-value = %.2f\tmaximum_x-value = %.2f\tminimum_y-value = %.2f\tmaximum_y-value = %.2f\tthreshold_value = %.2f\tno. of threads = %d\t\n",height,width,max_iterations,min_re,max_re,min_im,max_im,threshold,NUM_OF_THREADS);
for(x = 0; x < height; x++)
{
    color[x] = (unsigned int*)malloc(width*sizeof(unsigned int));
}
time_t ts,te;
time(&ts);
method1(min_re, max_re, min_im, max_im, max_iterations);
time(&te);
double diff = difftime(te,ts);
file_write();
printf("Total Time elapsed: %f\n",diff);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:03:28.723

为什么要将 malloc 的返回值转换为 an `unsigned int`？

首先，不要在 C 中强制转换 malloc 的返回值。这是没有意义的，实际上可以隐藏您忘记包含的事实。在这方面，C 不是 C++。void* 可以隐式转换为 C 中的任何指针类型。

其次，`malloc`返回一个指针，并且您已定义`color`为`unsigned int**`... 但您尝试将 an`unsigned int`和 an分配`unsigned int*`给它。显然这些是不相容的。只需放下演员表并正确使用/声明类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:59:08.847

```
color = (unsigned int**)malloc(height*sizeof(unsigned int*)); 
```

不应该是这个吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T05:59:51.537

您正在尝试动态分配指针数组。所以你需要做的是以下几点：

```
color = (unsigned int**)malloc(height*sizeof(unsigned int)); 
```

其余的都很好...

# c++ - SFINAE - 尝试确定模板类型是否具有“变量”返回类型的成员函数

> ID：10340527
> 
> 赞同：5
> 
> 时间：2012-04-26T19:57:34.900
> 
> 标签：c++, templates, visual-c++, c++11, sfinae

SFINAE 遇到问题。我需要能够确定类型是否定义了成员函数 operator-> 而不管其返回类型如何。示例如下。

这个类在测试器中。它定义了返回类型为 X* 的 operator->()。因此，我不知道在任何地方硬编码它是什么“X”。

```
template <class X>
class PointerX
{
    ...

    X* operator->() const;
    ...
} 
```

此类尝试确定传入的 T 是否定义了方法 operator->；不管 operator-> 返回类型是什么。

```
template<typename T>
struct HasOperatorMemberAccessor
{
    template <typename R, typename C> static R GetReturnType( R ( C::*)()const);

    template<typename U, typename R, R(U::*)()const> struct SFINAE{};
    template<typename U> static char Test(SFINAE<U,     decltype( GetReturnType(&U::operator->)),   &U::operator-> >*);
    template<typename U> static uint Test(...);
    static const bool value = sizeof(Test<T>(0)) == sizeof(char);
}; 
```

除了 operator-> return type 必须是 'Object' 之外，这个类与上面的完全相同。

```
template<typename T>
struct HasOperatorMemberAccessorOBJECT
{
    template <typename R, typename C> static R GetReturnType( R ( C::*)()const);

    template<typename U, typename R, R(U::*)()const> struct SFINAE{};
    template<typename U> static char Test(SFINAE<U,     Object*,                &U::operator-> >*); // only change is we hardcoded Object as return type.
    template<typename U> static uint Test(...);
    static const bool value = sizeof(Test<T>(0)) == sizeof(char);
}; 
```

结果：

```
void main()
{
    HasOperatorMemberAccessor<PointerX<Object>>::Test<PointerX<Object>>(0);         // fails  ::value is false;  Test => Test(...)

    HasOperatorMemberAccessorOBJECT<PointerX<Object>>::Test<PointerX<Object>>(0);       // works! ::value is true;   Test => Test(SFINAE<>*)  
} 
```

HasOperatorMemberAccessor 无法找到 PointX 的成员函数“Object operator->() const”。所以它使用Test的通用版本Test(...)。

但是，HasOperatorMemberAccessorOBJECT 能够找到 PointX 的“Object operator->() const”。因此它使用Test 专用版本Test(SFINAE*)。

两者都应该能够找到“Object operator->() const”方法；因此两者都应该使用Test的专用版本Test(SFINAE*)；因此 HasOperatorMemberAccessor>::value 对两者都应该为真。

HasOperatorMemberAccessor 和 HasOperatorMemberAccessorOBJECT 之间的唯一区别是 HasOperatorMemberAccessorOBJECT 的类型名 R 硬编码为对象，

所以问题是“decltype(GetReturnType(&U::operator->))”没有正确返回对象。我尝试了许多不同的发现返回类型的许可。他们如下：

```
 decltype( GetReturnType(&U::operator->) )
    typename decltype( GetReturnType(&U::operator->))
    decltype( ((U*)nullptr)->operator->() )
    typename decltype( ((U*)nullptr)->operator->() ) 
```

没有工作，为什么？我正在使用 MSVC++ 10.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:30:05.287

您是在问如何实现这样的特征，或者为什么`decltype`没有按照您的预期行事？如果是前者，这是一种方法：

```
#include <type_traits>

template<typename T, bool DisableB = std::is_fundamental<T>::value>
struct HasOperatorMemberAccessor
{ 
private:
    typedef char no;
    struct yes { no m[2]; };

    struct ambiguator { char* operator ->() { return nullptr; } };
    struct combined : T, ambiguator { };
    static combined* make();

    template<typename U, U> struct check_impl;
    template<typename U>
    static no check(
        U*,
        check_impl<char* (ambiguator::*)(), &U::operator ->>* = nullptr
    );
    static yes check(...);

public:
    static bool const value=std::is_same<decltype(check(make())), yes>::value;
};

// false for fundamental types, else the definition of combined will fail
template<typename T>
struct HasOperatorMemberAccessor<T, true> : std::false_type { };

// true for non-void pointers
template<typename T>
struct HasOperatorMemberAccessor<T*, false> :
    std::integral_constant<
        bool,
        !std::is_same<typename std::remove_cv<T>::type, void>::value
    >
{ };

template<typename X>
struct PointerX
{
    X* operator ->() const { return nullptr; }
};

struct X { };

int main()
{
    static_assert(
        HasOperatorMemberAccessor<PointerX<bool>>::value,
        "PointerX<> has operator->"
    );
    static_assert(
        !HasOperatorMemberAccessor<X>::value,
        "X has no operator->"
    );
    static_assert(
        HasOperatorMemberAccessor<int*>::value,
        "int* is dereferencable"
    );
    static_assert(
        !HasOperatorMemberAccessor<int>::value,
        "int is not dereferencable"
    );
    static_assert(
        !HasOperatorMemberAccessor<void*>::value,
        "void* is not dereferencable"
    );
} 
```

VC++ 2010 缺少必要的 C++11 工具（例如表达式 SFINAE）来使这个更干净。

# jquery - SlickGrid JQuery 插件 - 将数据从一个电子表格复制到同一网页上的第二个电子表格

> ID：10340533
> 
> 赞同：2
> 
> 时间：2012-04-26T19:58:06.683
> 
> 标签：jquery, jquery-ui, jquery-plugins, spreadsheet, slickgrid

我正在创建一个 Web 应用程序，该应用程序在同一页面上包含两个 SlickGrid 插件（采用类似格式的电子表格），由 Slider 插件划分。有没有办法将数据从第一个电子表格的单元格复制到同一页面上的第二个电子表格？这是我们客户的要求。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:42:27.727

如果您需要用另一个网格中的数据替换一个网格中的所有数据，那么这将起作用：

```
grid2.setData(grid1.getData());
grid2.invalidate(); 
```

如果您需要将一个网格中的数据附加到另一个网格中的数据，保留网格中已经存在的数据，这应该可以：

```
var grid1Data = grid1.getData();
var grid2Data = grid2.getData();

for(var i = 0; i < grid1Data.length; i++) {
    grid2Data.push(grid1Data[i]);
}
grid2.setData(grid2Data);
grid2.invalidate(); 
```

# javascript - Javascript getElementsByTagName 在 IE8 中未正确提取

> ID：10340536
> 
> 赞同：0
> 
> 时间：2012-04-26T19:58:21.007
> 
> 标签：javascript, xml

我正在解决同事在将表单发布到 API 的页面上留下的错误，并在 iframe 中接收 XML 响应，然后使用 XML 解析子项。该页面适用于 IE9、Chrome 和 Firefox，但不适用于 IE 8。

表格：

```
<form action="../../includes/functions/ADapi.php" method="POST" target="response" id="addForm" >
<fields galore></fields galore>
</form

<iframe name="response" id="response" style="display:none;" ></iframe> 
```

响应：

```
<?xml version="1.0" encoding="utf-8" ?> 
- <xmlresponse>
  <DateTime>2012-04-26 15:36:47</DateTime> 
  <confirmationcode>success</confirmationcode> 
  </xmlresponse> 
```

的JavaScript：

```
function getResponse()
    {
        var myIFrame = document.getElementById("response");
        var content = myIFrame.contentWindow.document.getElementsByTagName('confirmationcode');
        var insertID = myIFrame.contentWindow.document.getElementsByTagName('id');
        //var sql = myIFrame.contentWindow.document.getElementsByTagName('SQL');
        var response = $(content).text();
        var responseID = $(insertID).text();
        //alert($(sql).text());

        if(response == "Success" || response == 'success')
        {
            if(mode == 'edit')
            {
                post_to_url("/edit-contact", {type: 'edit', cust: id, mod: 'update',field : '<?php if(isset($_POST['field'])){ echo $_POST['field']; }?>',operator : '<?php if(isset($_POST['operator'])){ echo $_POST['operator']; }?>',criteria : '<?php if(isset($_POST['criteria'])){ echo $_POST['criteria']; }?>'});
            }
            else
            {
                post_to_url("/edit-contact", {type: 'edit', cust: responseID, mod: 'insert',field : '<?php if(isset($_POST['field'])){ echo $_POST['field']; }?>',operator : '<?php if(isset($_POST['operator'])){ echo $_POST['operator']; }?>',criteria : '<?php if(isset($_POST['criteria'])){ echo $_POST['criteria']; }?>'});
            }

        }
        else
        {
            alert("Error!");
        }

    } 
```

每次运行时，它都会弹出“错误！”的警报

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:12:37.167

如果您从 HTML 文档 ( `window.document`) 查询，IE8 仅识别 HTML 中有效的元素。如果您正在查询 XML 文档（如 . 返回的内容`XmlHttpRequest`），它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:38:46.260

我去重建页面以使用 AJAX。它花了比需要的时间更长的时间，但我把它转移了。[正如此处](https://stackoverflow.com/a/10340750/709941)所指出的，它无法按照设置的方式工作，需要做其他事情才能正常工作。

# c - 图像修复 / cvRectangle()

> ID：10340537
> 
> 赞同：-2
> 
> 时间：2012-04-26T19:58:23.473
> 
> 标签：c, image-processing, opencv

我正在做一个图像修复项目。我得到了我必须通过用户选择（正方形）来修复的区域，这将是一个将被修复的蒙版图像。现在我正在使用这段代码

```
cvRectangle(add_img,cvPoint(x,y),cvPoint(x1, y1),CV_RGB(255, 225, 225),CV_FILLED, 8,0); 
```

创建蒙版图像。但是当我试图访问这些像素时，我没有得到`(255,255,255)`白色的值。

所以我的问题是，当我添加一个`cvRectangle`on 时`add_img`，它会改变像素值`add_image`并使其`(255,255,255)`在给定区域中，还是只会在图像上和正方形下方添加白色方块，而原始值保持不变？

我不想使用`for`循环将 RGB 值设置为`(255,255,255)`. 还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:18:45.830

您正在创建`cvRectangle`一种颜色（不是白色），并期望它是白色的：

```
// can you spot the difference between these 2 calls?
CV_RGB(255, 225, 225) 
CV_RGB(255, 255, 255) 
```

# java - 在其边界之外编辑数组

> ID：10340539
> 
> 赞同：0
> 
> 时间：2012-04-26T19:58:39.553
> 
> 标签：java, android, arrays

我有一个带有默认“Cat”、“Dog”、“Simon”、“Smith”的数组，因此长度为 3。

如果我想编辑 smith 我输入 array[3] = "JR Smith"

但是如果用户想向我尝试的数组添加另一件事：array[4] = "Car" 但它让我超出了界限。

如何在初始化之外扩展数组？

//西蒙

编辑*

是的，我知道有列表。但是数组没有办法。因为我花了很长时间才写出像 200 长度的数组...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:01:01.283

您不能在其初始化之外扩展数组。为此，建议使用[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)。它具有超出其预定义大小的属性。

可以在[此处找到使用 ArrayList 的简单示例](http://www.java-samples.com/showtutorial.php?tutorialid=234)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:01:31.247

你应该使用一个列表。数组在 java 中不是动态的：

```
 import java.util.*;

 List<String> list = new ArrayList<String>();
 list.add( "cat" ); 
 list.add( "dog" ); 
 list.add( "bird" ); 
 //later
 list.add( "car" ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:01:48.540

我建议使用 ArrayList。您始终可以使用 toArray() 方法将 ArrayList 转换为数组。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#toArray%28%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#toArray%28%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T20:05:55.010

有一种方法可以扩大数组：

```
int[] array = { 1, 2, 3 };
int[] newArray = new int[5];
System.arraycopy(array, 0, newArray, 0, array.length);
array = newArray;
array[4] = 5; 
```

`array`就是现在`{ 1, 2, 3, 0, 5 }`

您创建一个更大的，将旧的复制到新的并使用新的。这也是`ArrayList`内部所做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T20:04:42.087

尝试`ArrayList`改用。一旦你初始化了一个数组，你就不能改变它的大小，当然除非你重新初始化它。

在这里看到[Java 动态数组大小？](https://stackoverflow.com/questions/1647260/java-dynamic-array-sizes)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-24T05:02:17.737

我个人最喜欢的方法是导入 java.util.Arrays 然后使用类似的东西：

```
List tempList = Arrays.asList(yourArray)
tempList.add(whateverYouWant)
yourArray = tempList.toArray(); 
```

第一行将您的数组转换为列表，第二行添加到列表中，第三行将其更改回来。

# nltk - 使用 nltk 将日期识别为命名实体？

> ID：10340540
> 
> 赞同：4
> 
> 时间：2012-04-26T19:58:43.430
> 
> 标签：nltk, named-entity-recognition

我正在尝试使用 NLTK 命名实体标记器来识别各种命名实体。在《*Natural Language Processing with Python* 》一书中，他们提供了常用命名实体的列表（表 7.4，如果有人好奇的话），其中包括：DATE June, 2008-06-29 和 TIME 25 am, 1:30 pm 所以我得到的印象是这可以用 NLTK 的命名实体标记器来完成。

但是，当我运行标记器时，它似乎根本没有选择日期或时间，就像人或组织一样。NLTK 命名实体标记器是否不处理这些日期/时间情况，还是只选择特定的日期/时间格式？如果它不处理这些情况，是否有人知道可以处理的系统？还是创建我自己的唯一解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T02:12:22.680

您应该查看 NLTK 的 contrib 存储库 - 包含一个名为 timex.py 的模块或在此处下载： [https ://github.com/nltk/nltk_contrib/blob/master/nltk_contrib/timex.py](https://github.com/nltk/nltk_contrib/blob/master/nltk_contrib/timex.py)

从模块的第一行开始：

```
# 在文本中标记时间表达式的代码

```

# java - 对象数组 - 从数组中删除一个对象

> ID：10340543
> 
> 赞同：0
> 
> 时间：2012-04-26T19:58:45.313
> 
> 标签：java, arrays, object

我被分配了创建臭名昭著的“UNO”游戏的任务。我在使用其中一种方法时遇到了麻烦，如果他们选择玩它，它应该会“删除”玩家手中的一张卡片对象。我想你必须玩过UNO才能理解。无论如何，这里是该方法应该是什么的描述：

> 创建一个名为 removeCardFromHand 的方法，该方法将整数索引作为参数，并在玩家手的该位置移除并返回卡片。如果指定的索引与手中的一张牌不对应，则该方法应抛出 IndexOutOfBoundsException。取出卡片后，应根据需要重新排列剩余卡片，使其占据阵列的最左侧位置。一种方法是将最右边的卡片移动到要移除的卡片的位置。例如，如果手牌当前是四张牌{蓝色 3，红色 2，黄色 7，绿色 1}，而您要移除位置 1 的牌（红色 2），您可以用最后一张牌（绿色1)，因此得到的手牌是：{蓝 3，绿 1，黄 7}。

不幸的是，我不允许使用数组列表或向量，只能使用简单的旧数组

到目前为止，这是我的代码：

```
public Card removeCardFromHand(int n)
{
    Card c = cards[n];
    for(int i = n; i < cards.length; i--)
    {
        cards[n] = cards[n + 1];
    }
    c = cards[cards.length - 1];
    return c;
} 
```

显然这是不对的，但我只是不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:05:50.793

假设数组是使用静态大小创建的。您将无法通过重新分配数组的长度来更改数组大小。可能会给您尝试这样做的错误。

在课堂里

```
Add a new variable in the Class, ie. int numberOfCardsInHand. 
```

在方法 removeCardFromHand

```
Make a copy of the card to discard, i.e. discardCard.

Iterate from i = n to i < numberOfCardsInHand
  Left shift the remaining cards to the right of the discarded card.

Decrement numberOfCardsInHand by 1.

Return discardCard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:04:13.747

你几乎明白了，除了你将数组中的所有卡片向左移动一个位置，所以你正在丢弃最左边的卡片，并且你将“移除”的卡片留在数组中，除非它恰好是最左边的一。您只想从已移除卡片右侧（较高索引）的卡片开始移动。既然我认为这是作业，我会让你找出你需要改变的一种表达方式 ;-)

# git - 如果您仍然必须执行相同的步骤，那么 git merge 比 svn merge 更好吗？

> ID：10340544
> 
> 赞同：2
> 
> 时间：2012-04-26T19:58:46.770
> 
> 标签：git, svn, merge, gerrit

在阅读[如何和/或为什么在 Git 中合并比在 SVN 中更好？](https://stackoverflow.com/questions/2471606/how-and-or-why-is-merging-in-git-better-than-in-svn) 我还是不明白。假设我要维护多个版本（我需要全部维护它们，全部在生产中）：

*   v1.0
*   v1.1
*   v1.2
*   v1.3
*   v1.4

现在我向 v1.0 提交了一个错误修复（并且我需要在所有下一个版本中修复这个错误）。

现在在 git 和 svn 中我**必须**执行以下逻辑操作

1.  x=1
2.  合并到下一个分支 v1.(x)
3.  检查 v1.(x) 的一切是否正常（测试、构建）
4.  x++ goto (2) 直到最后一个分支

为此（或 gerrit）使用 git 的主要好处是什么？*merge into next branch* , *commit* , *test*的逻辑操作是一样的！那么有什么不同呢？（如果只是轻微的合并算法改进，那对我来说没关系。我在 Subversion 中有一个相当不错的自动合并解决冲突。我也不介意检查分支 v1.1 以在 subversion 中进行合并，因为我有一些实用程序可以为我做这件事，所以我没有花时间在它上面）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T20:22:03.230

因为 git 不像其他版本控制系统那样存储增量，它在每次提交中存储每个文件的全部内容（以一种非常压缩和高效的方式，但为了保持简单，请记住**它不store deltas**，抱歉重复一遍，但这就是为什么大多数刚接触 git 的专业人士会如此困惑）。

并且当它必须合并时，在每个分支的最后状态/快照和公共基础祖先之间进行三向合并，而不是尝试将一个分支的最后 100 次提交的增量/差异（具有更改的上下文）应用到另一个分支。

方法更简单，而且更有效，它不会给用户留下 100 个冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:54:15.070

我认为在比较 SVN 和 Git 的责备功能时可以证明这一点。我的公司使用 SVN（我对此很不满）。我们的开发人员不会自己进行合并，因此代码总是由不同的人合并。我经常被问到“谁改变了那条线，为什么？”。所以我执行了一个svn责备。如果该行来自另一个分支的合并，则显示的提交是合并的提交，而不是编辑该行的人。所以我必须找到那个分支并试图指责它。在上面的示例中，如果您从 v1.4 开始跟踪，您可能会浪费半天时间回到 v1.0 来查找更改。

Git blame 总是给你做出改变的人的承诺，因为这就是我们想要找出的。这对于问责制要好得多。

我认为这就是“svn 没有合并和分支的概念”的意思。它只看到合并发生时所做的提交，并且不能更进一步地追溯历史以进行适当的责备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:14:20.523

尽管您所做的看起来相同，但不同之处在于 git 能够在所有此类步骤中本地跟踪您要合并的内容。因此，当您更新“v1.4”时，您可以看到错误修复最初是针对 v1.0 完成的，然后合并到 v1.1（以及由谁和如何），然后到 v1.2、v1.3，最后v1.4。

svn 本身没有合并和分支的概念，v1.4 中的最终产品将只是另一个恰好更改内容“branches/v1.4”目录的树修订。最近的 svn 版本试图通过某种方式跟踪给定的修订版实际上合并了来自另一个分支的更改来解决这个问题，但这是后来内置的东西，它不能很好地工作。

另一个重要的区别是，当我测量你提到的过程需要多长时间时，我们在两个分支中进行了一个简单的更改（那时它们已经完全不同了），使用 svn/svnmerge 需要半小时，使用 git 需要 11 分钟*。这可能与 svn 需要从远程服务器获取所有历史信息这一事实有关，而 git 在本地和本机（=高效）数据结构中拥有一切。

[（*这是带有运行测试等的整个工作流程。就其本身而言，svn merge 和 git merge 命令的时间差为 1.5 分钟与 <1 秒。）]

# python - Pygame 简单评分系统

> ID：10340550
> 
> 赞同：0
> 
> 时间：2012-04-26T19:59:02.963
> 
> 标签：python, pygame

我为我的 pygame 创建了一个简单的评分系统。但它正在暂停游戏。我知道这是因为 time.sleep 但我不知道如何解决。

当 start 为真时，分数系统是每 5 秒 +100，代码：

```
while start == True:
   time.sleep(5)
   score = score + 100 
```

带缩进的完整代码：[http](http://pastebin.com/QLd3YTdJ) ://pastebin.com/QLd3YTdJ 代码行：156-158

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:44:05.873

而不是使用`sleep`，它会停止游戏直到时间过去，你想用一个内部计时器来计算已经过去的秒数。当您达到 5 秒时，增加分数，然后重置计时器。

像这样的东西：

```
scoreIncrementTimer = 0
lastFrameTicks = pygame.time.get_ticks()
while start == True:
    thisFrameTicks = pygame.time.get_ticks()
    ticksSinceLastFrame = thisFrameTicks - lastFrameTicks
    lastFrameTicks = thisFrameTicks

    scoreIncrementTimer = scoreIncrementTimer + ticksSinceLastFrame
    if scoreIncrementTimer > 5000:
        score = score + 100
        scoreIncrementTimer = 0 
```

这可以很容易地改进（如果您的帧速率如此之低，帧之间的间隔超过 5 秒怎么办？）但这是一般的想法。这通常称为“增量时间”游戏计时器实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:48:13.007

如果我对您的理解正确，您不希望`while True: score += 100`循环阻止您的整个程序吗？

您应该通过将分数添加到单独的函数来解决它，并使用 APScheduler [http://packages.python.org/APScheduler/intervalschedule.html的间隔函数](http://packages.python.org/APScheduler/intervalschedule.html)

```
from apscheduler.scheduler import Scheduler

# Start the scheduler
sched = Scheduler()
sched.start()

# Schedule job_function to be called every 5 seconds
@sched.interval_schedule(seconds=5)
def incr_score():
    score += 100 
```

这将导致 APScheduler 每 5 秒为您创建一个运行该函数的线程。

您可能需要对该功能进行一些更改以使其工作，但它至少应该让您开始:)。

# c++ - 如何将包装的 C++ 对象传递给 Javascript 回调？

> ID：10340552
> 
> 赞同：10
> 
> 时间：2012-04-26T19:59:07.010
> 
> 标签：c++, node.js, v8

我正在尝试使用 C++ 编写一个 Node.js 模块，该模块包装并公开了一些来自[libhdf5](http://www.hdfgroup.org/HDF5/doc/cpplus_RM/index.html)的类。

我目前对 libhdf5 中的两个类感兴趣。第一个是`File`，它会打开一个 hdf5 文件。第二个是`Group`，它代表该文件中的组。您从 File 对象中获取 Group 对象。

我编写了一些代码，在其中创建了一个`File`对象并尝试从中获取一个对象`Group`。我正在尝试使我的 Node.js 模块尽可能 JavaScripty，因此我想使用回调返回该组。所以，我正在尝试对我的模块进行编码，以便像这样使用它：

```
var hdf5 = require('hdf5');
var file = new hdf5.File('/tmp/example.h5');
file.getGroup('foobar', function (err, group) { console.log(group); }); 
```

所以，在我的包装器的 C++ 代码中`File`，我有一个映射到`getGroup`这里的函数的函数，它会调用给定的匿名函数，传入任何错误以及新的`Group`对象包装器。

鉴于这对我来说听起来像是 Node.js 文档显示[的包装对象工厂](http://nodejs.org/api/addons.html#addons_factory_of_wrapped_objects)，我已经`Group`按照那里的示例对我的代码进行了建模。

所以，我已经`Group`编写了我的包装器，但我一直试图实例化它。我还不够了解如何避免使用 v8`Arguments`类作为函数参数。因此，我似乎无法传递我的 v8 持久构造函数所需的一些参数（因为我是从 C++ 实例化它，而不是从 JS-land 实例化它）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T05:32:02.397

你快到了。你不需要传递`Arguments`给`Group::Instantiate`. 只需传递您需要的内容并使用构造函数创建`Group`. 例如：

```
Handle<Value> Group::Instantiate(const std::string& name) {
    HandleScope scope;

    Local<v8::Value> argv[1] = {
        Local<v8::Value>::New(String::New(name.c_str()))
    };

    return scope.Close(Constructor->NewInstance(1, argv));
} 
```

该方法`Group::New`完成了其余的构建工作。

```
Handle<Value> Group::New(const Arguments& args) {
    HandleScope scope;

    if (!args[0]->IsString()) {
        return ThrowException(Exception::TypeError(String::New("First argument must be a string")));
    }
    const std::string name(*(String::Utf8Value(args[0]->ToString())));
    Group * const group = new Group(name);
    bar->Wrap(args.This());

    return args.This();
} 
```

在`File::OpenGroup`你可以这样做：

```
Handle<Value> File::OpenGroup (const Arguments& args) {
    HandleScope scope;

    if (args.Length() != 2 || !args[0]->IsString() || !args[1]->IsFunction()) {
        ThrowException(Exception::SyntaxError(String::New("expected name, callback")));
        return scope.Close(Undefined());
    }
    const std::string name(*(String::Utf8Value(args[0]->ToString())));
    Local<Function> callback = Local<Function>::Cast(args[1]);

    const unsigned argc = 2;
    Local<Value> argv[argc] = {
        Local<Value>::New(Null()),
        Local<Value>::New(Group::Instantiate(name))
    };
    callback->Call(Context::GetCurrent()->Global(), argc, argv);

    return scope.Close(Undefined());
} 
```

# android - 使按钮从 SurfaceView 可见？

> ID：10340555
> 
> 赞同：0
> 
> 时间：2012-04-26T19:59:11.517
> 
> 标签：android, user-interface, android-edittext

所以基本上我有一个布局，显示我的自定义 SurfaceView 和不可见的 EditText。

如何在该对象上调用 setVisibility(VISIBLE)？我确实在我的 SurfaceView 对象上使用了 post(Runnable...)，但问题是 findViewById(my EditText id) 返回 null？

我找到[了原因](https://stackoverflow.com/a/3897466/585137)，但我该如何解决呢？

另外，如何从 EditText 上的“完成”按钮接收回调？和回车键一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:29:37.483

您需要在将其作为子项的视图上搜索 id.content 。所以使用以下内容：

```
TextView t = (TextView) getParent().findViewById(R.id.contents); 
```

要回答您的其他问题，要查找用户何时按下回车键，请使用

```
t.setOnEditorActionListener(...) 
```

# zend-framework - Zend 框架 - Zend 导航和面包屑未显示在第三级

> ID：10340557
> 
> 赞同：0
> 
> 时间：2012-04-26T19:59:11.783
> 
> 标签：zend-framework

我正在开发我的第一个 Zend 框架项目，并与 Zend Navigation 和创建面包屑导航作斗争。我的导航实际上是类别和子类别，仅此而已。

我确实显示了我的类别和子类别，并且面包屑也有效，但仅在我进入帖子详细信息页面时，因为面包屑不再显示并且不再显示。

所以它会显示“你在这里：Maincategory1 > Subcategory2 on this page 它会向我显示 Subcategory2 的所有帖子。当我点击帖子并看到详细帖子时，面包屑消失了。我相信这是一个知道问题。有人可以指出我可能出错的方向以及我应该阅读什么或应该寻找什么吗？

# objective-c - 如何保存变量并从两个不同的类中使用它Objective C

> ID：10340559
> 
> 赞同：1
> 
> 时间：2012-04-26T19:59:12.173
> 
> 标签：objective-c, variables

我有一个名为“系统”的类，它包含一些变量和两个数组，我需要从其他两个类访问它，这两个类应该能够读取和写入这些变量我是一个完全的初学者，所以很可能我已经犯了一些错误。

系统.h

```
@interface System : UIViewController{

float length_of_one_hour; 
float length_of_first_break;
float length_of_second_break;
float length_of_lunch_break;
float length_of_shortned_hour;
float school_begin;

int school_end[5];
float school_length[5]; 

} 
```

About_now.m

```
- (void)read_school_end_monday{

school_end_label.text=[NSString stringWithFormat:@"%i", school_end[0]];

} 
```

设置.m

```
- (IBAction)set_school_end_monday{

school_end[0]= [school_end_on_mondays_textfield.text intValue];

} 
```

但我不知道在 System.h 和 About_now.m 中写什么，变量保存在 System 类中，可以从任何地方访问。是的，我已经尝试过@public 和 extern。顺便说一句，我需要为 school_end 设置一个数组，因为我将使用一个已经有效的函数来计算它（使用一个小时的长度以及学校实际开始的时间等），但我需要在之后访问 About_now 类中的变量.

希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:05:32.797

你有很多设计选项可以做到这一点：

1.  创建一个全局`System`对象；

2.  使`System`课程成为[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)；

3.  定义`System`类接口，以便它在类级别（相对于对象级别）为其“属性”提供访问器方法。

4.  `System`像现在一样实例化并将其作为初始化参数传递给其他两个类。

现在，更详细地说：

(1) 声明：

```
 extern System* globalSystemObject; 
```

在`System.h`; 然后定义：

```
static System* globalSystemObject = nil; 
```

在`System.m`. 不要忘记`globalSystemObject`在代码中的某处进行初始化：

```
globalSystemObject = [[System alloc] init]; 
```

这样做，您可以`globalSystemObject`从任何导入的文件中使用`System.h`.

(2) 在[这里](https://stackoverflow.com/questions/6912703/objective-c-static-field-and-implementing-singleton-pattern/6913036#6913036)查看有关实现单例类的详细信息。请记住，许多人建议不要使用 Singleton（如果它只是“隐藏”全局变量的一种方式）。在这种特定情况下，考虑到名为 System 的类的语义，我会说 Singleton 是您的最佳选择。

(3) 您的班级可能如下所示：

```
 @interface System : UIViewController{
    }
    +(float)length_of_one_hour;
    +(void)set_length_of_one_hour:(float)length;

    +(float)length_of_first_break;
    +(void)length_of_first_break:(float)length;

    ...
    @end 
```

您可以通过 1 中的静态变量在 .m 文件中实现这些变量。

(4) 这很简单。唯一的事情是您必须`System`在同一范围内创建实例和其他两个类的实例：

```
System* system = [[System alloc] init];
about_now* anow = [[about_now alloc] initWithSystemInstance:system];
... 
```

该`system`参数将存储在`about_now`.

这样做可以完全避免使用全局变量（即使是那些隐藏在 Singleton 掩码后面的变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:06:33.587

您需要一个指向 System.Instance 实例的指针。所以要访问成员变量：

```
System* system = GetSystem();
system->school_end[0] = whatever(); 
```

这与通过结构指针访问成员完全相同。

但话说回来，通过方法隐藏访问是一个好习惯：

```
- (int)getSchoolEndAtIndex:(int)index
{
    return school_end[index];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:10:22.837

在 iOS 应用程序中跨类共享数据的常用方法是遵循[*单例*](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)模式。

系统模型.h

```
#import <Foundation/Foundation.h>

@interface SystemModel : NSObject {
    @public
    float length_of_one_hour; 
    float length_of_first_break;
    float length_of_second_break;
    float length_of_lunch_break;
    float length_of_shortned_hour;
    float school_begin;

    int school_end[5];
    float school_length[5]; 
}
+(SystemModel*)instance;
@end 
```

系统模型.m

```
@implementation SystemModel
static SystemModel* _instance= nil;

+(SystemModel*)instance {
    @synchronized([SystemModel class]) {
        if (!_instance)
            [[self alloc] init];
        return _instance;
    }
    return nil;
}

+(id)alloc {
    @synchronized([SystemModel class]) {
        return (_instance = [super alloc]);
}
    return nil;
}

-(id)init {
    self = [super init];
    if (self != nil) {
        // your init code
    }
    return self;
}

@end 
```

现在您可以像这样使用您的实例：

```
 float tmp = [SystemModel instance]->length_of_one_hour; 
```

您还可以将实例变量转换为*属性*，并使用点语法。浮点数和数组无关紧要，但对于`id`使用属性的基于对象是首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:04:30.270

您可以通过 getters/setters (@property / @synthesize) 公开系统实例变量，并将引用传递给其他类实例。

@接口系统：UIViewController{

浮动长度_of_one_hour；//... @property (nonatomic,assign); .. @结尾

OtherClass other = [[OtherClass alloc] initWithSystem:sys]; 或使用 setter [其他 setSystem:sys]；

# vim - vim 重复查找下一个字符 'x'

> ID：10340562
> 
> 赞同：143
> 
> 时间：2012-04-26T19:59:23.187
> 
> 标签：vim, repeat

我经常在 vim 中导航`f x`以查找字符“x”的下一个出现，但忽略了在我要编辑的单词和开始光标位置之间有一个包含“x”的单词（或多个单词）。

所以我不得不`f x`再次这样做，这有点烦人，因为有一个不错的按钮`.`，它确实重复了最后一个命令。那么有没有一种方法可以`f x`通过按下一个按钮来重复。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-04-26T20:00:55.730

重复一个的命令`f`是`;`（分号）；`,`（逗号）反转搜索方向。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-04-26T16:15:10.623

自从我问这个问题以来，时间已经过去了 - 现在我使用[vim-easymotion](https://github.com/easymotion/vim-easymotion)，这使得`;`几乎没有必要。

这个插件允许直接跳转到某个字母 - 触发插件使所有字母变为灰色，除了屏幕上的所有“x” - 并且这些被替换为红色字母，您可以按这些字母直接跳转到它。

[![使用中的easymotion](../Images/9ba64b4161fdc930116db2e73bbc6520.png)](https://i.stack.imgur.com/eZNE4.gif)

# sockets - 引擎盖下的 Netty setRadable()

> ID：10340571
> 
> 赞同：0
> 
> 时间：2012-04-26T20:00:01.377
> 
> 标签：sockets, netty

netty javadoc 解释说 setReadable 暂停/恢复 I/O 线程的读取操作。我的问题是同时数据发生了什么。假设我在服务器的一个通道上运行 setReadable(false)，而另一端的客户端正在向套接字写入数据，数据去哪里了？它会填充一些缓冲区吗？有没有办法可以控制这个缓冲区或在它溢出时得到任何通知？

> 异步挂起或恢复 I/O 线程的读取操作。此方法是以下代码的快捷方式：
> 
> int interestOps = getInterestOps(); 如果（可读）{ setInterestOps（interestOps | OP_READ）；} else { setInterestOps(interestOps & ~OP_READ); }

值得一提的是，如果您在已经有一些数据要调度的通道上调用 setReadable(false)，您将获得数据。因此，如果您在其中一个处理程序中的 channelOpen 内调用 setReadable(false)，如果客户端在连接时写入，您仍然会在该隧道上收到 messageReceived。 [正如在这个问题上所解释的](https://github.com/netty/netty/issues/214)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:31:34.787

它删除了从 Channel 中读取的感兴趣的操作。这意味着操作系统将需要缓冲网络堆栈中的所有内容。一旦这个缓冲区满了，新的数据包就会被丢弃。

调整此缓冲区的方式因操作系统而异。在 linux 上，您可以通过 /proc fs 来完成。

# android - 图库优化 (Android)

> ID：10340575
> 
> 赞同：0
> 
> 时间：2012-04-26T20:00:24.323
> 
> 标签：android, galleryview

我将如何优化厨房视图，因为它使用大量内存导致它滞后。我不知道用什么来帮助防止滞后？无论如何，我会发布与它相关的所有代码。（我的图片每张大约 200kb 并且是 .jpg 格式）非常感谢任何帮助。

画廊活动：

```
package kevin.erica.box;
import kevin.erica.box.R.string;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
import android.os.Bundle;   
import android.util.DisplayMetrics;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.Gallery;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;
public class App2Activity extends Activity {
/** Called when the activity is first created. */
Context context = this; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    final Button ibgb = (Button) findViewById(R.id.backgallery);
    Gallery g = (Gallery) findViewById(R.id.gallery1);
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    MarginLayoutParams mlp = (MarginLayoutParams) g.getLayoutParams();
    mlp.setMargins((int) -(metrics.widthPixels/2), 
                   mlp.topMargin, 
                   mlp.rightMargin, 
                   mlp.bottomMargin);
    g.setAdapter(new ImageAdapter(this));
    ibgb.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish(); 
        }
        });

    g.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(@SuppressWarnings("rawtypes") AdapterView parent, View v, int position, long id) {
            ImageView imageview = (ImageView) findViewById(R.id.ImageView01);
            imageview.setImageResource(mImageIds[position]);

        }

    });
}

public Integer[] mImageIds = {
        R.drawable.alexbox,
        R.drawable.arm,
        R.drawable.mirror,
        R.drawable.penstache,
        R.drawable.penstache1,
        R.drawable.glasses,
        R.drawable.hatface,
        R.drawable.rubber,
        R.drawable.scarfballs,
        R.drawable.drawing,
        R.drawable.eastercardalex,
        R.drawable.extralifenote,
        R.drawable.mug1

};

public class ImageAdapter extends BaseAdapter {
int mGalleryItemBackground;
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
    TypedArray a = obtainStyledAttributes(R.styleable.HelloGallery);
    mGalleryItemBackground = a.getResourceId(
            R.styleable.HelloGallery_android_galleryItemBackground, 0);
    a.recycle();
}
public int getCount() {
    return mImageIds.length;
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
} 
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView i = new ImageView(mContext);
    i.setImageResource(mImageIds[position]);
    i.setLayoutParams(new Gallery.LayoutParams(170, 150));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);

    return i;

}
}
} 
```

.XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Gallery
    android:id="@+id/gallery1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" android:gravity="left"/>

<ImageView
    android:id="@+id/ImageView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/backgallery"
    android:layout_below="@+id/gallery1"
    android:layout_centerHorizontal="true" />

<Button
    android:id="@+id/backgallery"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:text="Back" 
    android:clickable= "true"
    android:onClick="gallerybackbutton"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:12:49.280

尝试改进`getView()`适配器的方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView v;
    if (convertView == null) {
         v = new ImageView(mContext);
    } else {
         v = (ImageView) convertView;
    }
    v.setImageResource(mImageIds[position]);
    v.setLayoutParams(new Gallery.LayoutParams(170, 150));
    v.setScaleType(ImageView.ScaleType.FIT_XY);
    v.setBackgroundResource(mGalleryItemBackground);
    return v;
} 
```

# git - 使用我的 GitHub 帐户设置 Tower 时出现问题 - 错误：无法锁定配置文件

> ID：10340581
> 
> 赞同：9
> 
> 时间：2012-04-26T20:00:39.330
> 
> 标签：git, github, github-api, github-for-mac, git-tower

我一直在使用 GitHub for Mac 应用程序，但在朋友的建议下，决定试一试 Tower，因为它也可以处理 Beanstalk 帐户。

安装试用版并输入我的 GitHub 用户名和密码后，我收到此错误：

```
error: could not lock config file /Users/joshferrara/.gitconfig: Permission denied 
```

我只是好奇是否有人知道是什么原因造成的，或者它是否与我使用 Tower 有任何关系。任何帮助是极大的赞赏！

* * *

文件权限：

```
-rw-rw-rw- 1 joshferrara staff 130 Nov 22 17:14 /Users/joshferrara/.gitconfig 
```

对父目录的权限：

```
drwxr-xr-x 74 501 staff 2516 Apr 26 14:46 /Users/joshferrara 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-01T20:53:54.240

我面临着同样的问题。我将我的 .gitconfig 文件重命名为“xyz.gitconfig”，我发现 git 创建了一个新的 .gitconfig 文件。我不再面临错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:59:49.540

事实证明`.gitconfig`，Github for Mac 使用 root 权限创建的文件与 Tower 无法访问之间存在奇怪的权限问题。

所有权特权的简单更改解决了这个问题。所有权可以这样改变：

```
sudo chown -R username [file|directory] 
```

解释：

*   `sudo`- 授予root权限
*   `chown`- 改变所有权
*   `-R`- 用于递归更改文件
*   `username`- 新所有者的用户名
*   `[file|directory]`- 发生更改的文件或目录（如果指定了目录，它将递归地更改里面的所有文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T00:13:47.407

您提到了 .gitconfig 文件的全局读/写权限，这些足以编辑它。但是这些还不足以在该目录中创建一个新文件，这就是我猜你正在使用的 git config 工具试图做的事情。

现在更改主目录中的权限可能不是一个选项。例如，我现在不适合搜索这个问题，因为我正在使用网络服务器。所以我在自己的电脑上进入我的家庭帐户，从那里的 gitinfo 文件中复制我的东西，然后将其粘贴到锁定帐户中的 .gitinfo 文件中。

为节省您一步，大多数时候我们使用 git config，我们这样做是为了在需要使用 git 的系统上设置我们的姓名和电子邮件。因此，如果这就是您要尝试的，这里是 .gitinfo 文件的内容。用你最喜欢的编辑器编辑你的 .gitconfig 文件，粘贴这些东西，改变它以反映你，你就可以使用 git 而不会再抱怨了：

```
 [user]
    email = nobody@nowhere.com
    name = Joe Schmoe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T10:04:09.207

在你的主目录中寻找 .gitconfig.lock 文件，如果你发现任何删除它。问题为我解决了。

# python - 在 Python 中调用用户 def R 函数

> ID：10340590
> 
> 赞同：-1
> 
> 时间：2012-04-26T20:01:07.960
> 
> 标签：python, r, rpy2

我简要地浏览了[rpy2](http://rpy.sourceforge.net/rpy2/doc-2.3/html/high-level.html)。只是想检查是否可以直接从 Python 调用我的 R 函数（存在于 RScript 中），传入元组列表并从函数或某些数据结构中获取元组列表。

一个例子会有很大帮助。

谢谢！-阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:26:29.917

您是否查看了[rpy2 简介](http://rpy.sourceforge.net/rpy2/doc-2.3/html/introduction.html)？

# dynamics-crm-4 - 当您收到通用 SoapException：服务器无法处理请求时，如何缩小实际问题的范围。从 MS-CRM 4.0

> ID：10340591
> 
> 赞同：2
> 
> 时间：2012-04-26T20:01:10.143
> 
> 标签：dynamics-crm-4, soapexception

我最近开始针对 CRM 4.0 进行编程，并使用 CrmService 发出这些请求。当我发送请求时，我经常在我使用的动态实体的某些属性中得到错误的值。当然请求失败，我正在拦截异常并记录它。问题是这就是我得到的：

```
System.Web.Services.Protocols.SoapException: Server was unable to process request.
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at Microsoft.Crm.SdkTypeProxy.CrmService.Execute(Request Request)
   at MyEntity.Employee.ExecuteCreateRequest(CrmService service, DynamicEntity entity) in c:\Workspaces\One\...\Employee.vb:line 351\nSystem.Xml.XmlElement 
```

这没什么好说的。

到目前为止，我一直在凭直觉消除一些属性并再次对其进行测试，然后试图猜测该属性的值可能有什么问题。是否有另一种方法可以获取有关导致错误的原因的更详细信息，以便我可以更快地查明真正的罪魁祸首。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:41:35.687

您需要`catch`捕获块`SoapException`，然后您可以根据需要显示详细信息或消息属性。该`Details`属性可能包含您正在寻找的提示...

```
...
catch(SoapExcetion soapEx){
    console.writeLine("SoapException: " + soapEx.Detail);
//    console.writeLine("SoapException: " + soapEx.Message);
}
catch(Exception ex){
    console.writeLine("Exception: " + ex.Detail);
} 
```

您还可以考虑在 CRM 服务器上启用跟踪并查看日志文件。

# css - 保证金问题

> ID：10340593
> 
> 赞同：0
> 
> 时间：2012-04-26T20:01:23.127
> 
> 标签：css

我试图摆脱我的 nivoSlider 和我在它下面的标题栏之间的一些空白。我尝试在标题栏顶部和滑块底部添加负边距，两者都不会缩小差距。( `margin-top:-30px;`)

滑块 -`<div id="slider-wrapper">` 标题栏（“热卖”栏） -`<div class="hotdealsbar>`

[http://www.cheaperfirearms.com](http://www.cheaperfirearms.com) 我也刚刚注意到我没有在 hotsdealsbar 类样式中指定高度，这可能是问题吗？（我现在不在家，所以我无法检查它是否解决了问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:02:04.450

问题是由`<div id="ticker">`设置高度为 300px 引起的。

# jquery - jQuery - 将字符从一个列表传输到另一个列表

> ID：10340595
> 
> 赞同：0
> 
> 时间：2012-04-26T20:01:23.750
> 
> 标签：jquery, foreach, each

我有 2 个字符列表。我正在尝试根据数据属性值使用 li 和 html 中的新字符名称更新旧字符列表。单击更改列表时，最终结果如下所示：

```
//BEFORE
<ul id="new_characters">
<li id="peter"><div data="character1" class="character">Peter Griffin</div></li>
<li id="joe"><div data="character2" class="character">Joe Swanson</div></li>
</ul>

<ul id="old_characters">
<li id="glenn"><span data="character1" class="character">Glenn Quagmire</span></li>
<li id="louis"><span data="character2" class="character">Loius Griffin</span></li>
</ul>

<span id="change">Change List</span>

//AFTER
<ul id="old_characters"> //only this list should change on #change click
<li id="peter"><span data="character1" class="character">Peter Griffin</span></li>
<li id="joe"><span data="character2" class="character">Joe Swanson</span></li>
</ul> 
```

这是一个小提琴：http: [//jsfiddle.net/wXnSZ/](http://jsfiddle.net/wXnSZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:14:42.133

```
$('#change').click(function(){
    $('.character', '#new_characters').each(function(index, item){
        $(".character[data='"+$(item).attr('data')+"']", "#old_characters").text($(item).text());
    });    
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/wXnSZ/1/)

要替换 ID，但保留跨度：

```
$('#change').click(function(){
    $('.character', '#new_characters').each(function(index, item){
        $(".character[data='"+$(item).attr('data')+"']", "#old_characters").text($(item).text()).parent().attr('id', $(item).parent().attr('id'));
    });    
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/wXnSZ/6/)

或根据 data 属性更改 old_characters 中每个 li 的完整 html：

```
$('#change').click(function(){
    $('.character', '#new_characters').each(function(index, item){
        $(".character[data='"+$(item).attr('data')+"']", "#old_characters").replaceWith($(item).clone());
    });    
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/wXnSZ/3/)

或者只是将 new_characters 的 HTML 放入 old_characters：

```
$('#change').click(function(){
   $("#old_characters").html($('#new_characters').html());
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/wXnSZ/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:16:14.453

这里有两种可能性：

1）将新字符附加到旧字符列表中：

```
$('#change').click(function() {
    $('#old_characters').append($('#new_characters').contents());
    $('#new_characters').remove();
});​ 
```

2）用新字符替换旧字符：

```
$('#change').click(function() {
    $('#old_characters').contents().replaceWith($('#new_characters').contents());
});​ 
```

解决方案 #2 的**[jsFiddle 示例。](http://jsfiddle.net/j08691/wXnSZ/2/)**

# java - 如何在 Spring MVC 中处理 RESTful 删除

> ID：10340599
> 
> 赞同：11
> 
> 时间：2012-04-26T20:01:44.077
> 
> 标签：java, spring, rest, spring-mvc

如何在 Spring MVC 控制器中正确使用 RESTful 删除？我有 DAO 在尝试删除某些项目时返回布尔值。

我正在尝试删除项目。如果一切正常，只需显示项目列表（已删除的项目将不再存在）。如果无法删除项目，请重定向到详细信息页面并说明无法删除的原因。

我需要一些特殊的响应状态或类似的东西吗？我的方法是 RESTful 的吗？

```
@RequestMapping(value = "items/{id}", method = RequestMethod.DELETE)
public String delete(@PathVariable("id") int itemId, Model model) {
    Item item = itemDao.get(id);

    // true -> can delete
    // false -> cannot delete, f.e. is FK reference somewhere
    boolean wasOk = itemDao.delete(item); 

    if (wasOk) {
        return "redirect:/items";
    }

    // will write to user which item couldn't be deleted
    model.addAttribute("item", item);
    return "items/error";
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T20:12:54.113

您应该考虑使用[HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)来指示删除操作是否成功，而不是重定向。例如`HTTP 200 OK`（或`HTTP 204 No Content`）表示操作成功，`HTTP 404 Not Found`如果您尝试访问的资源不存在，`HTTP 405 Method Not Allowed`如果不允许删除操作等。根据响应状态，客户端可以决定是否保留引用的资源（在您的情况下是由 引用的对象`item/{id}`）。

由于您使用的是 Spring，因此您可以使用适当的[@ResponseStatus](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ResponseStatus.html)注释您的控制器方法，例如 `@ResponseStatus(value = HttpStatus.NO_CONTENT)`

另外，Spring[默认](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)`HandlerExceptionResolver`已经提供了一些状态码。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-26T20:25:11.767

如果您可以由用户修复删除问题，那么这似乎没问题。如果用户无能为力，那么错误代码状态可能会更正确。我可以想象的唯一删除失败是授权失败，这将是 401。这可以通过向您的方法“HttpServletResponse response”添加一个参数来设置。你的代码会变成这样：

```
@RequestMapping(value = "items/{id}", method = RequestMethod.DELETE)
public String delete(@PathVariable("id") int itemId, Model model, HttpServletReponse response) {
    Item item = itemDao.get(id);

    // true -> can delete
    // false -> cannot delete, f.e. is FK reference somewhere
    boolean wasOk = itemDao.delete(item); 

    if (!wasOk) {
        // will write to user which item couldn't be deleted
        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
        model.addAttribute("item", item);
        return "items/error";   
    }

    return "redirect:/items";
} 
```

您可以根据需要替换其他状态代码，但这是一般的想法。

您还可以执行以下操作：

```
 if (!wasOk) {
        throw new DataAccessException("Unable to delete item: " + item);
    } 
```

然后在同一个类中有一个带注释的错误处理程序

```
@ExceptionHandler(DataAccessException.class)
@ResponseStatus(HttpStatus.BAD_REQUEST)
public String handleDataAccessException(DataAccessException ex) {
    // Do some stuff
    return "errorView";
} 
```

# expressionengine - 表达式引擎：在模板中调用时，频道字段中的内容不会显示在网页上

> ID：10340607
> 
> 赞同：1
> 
> 时间：2012-04-26T20:02:03.283
> 
> 标签：expressionengine

我有一个名为侧边栏的片段，其中包含以下代码。

```
<div id="ebook_offer">
{exp:channel:entries channel="test"}
<h3>Ebook</h3>
{/exp:channel:entries}
</div>

<div id="about_blog">
{exp:channel:entries channel="blog_sidebar"}
        <h3>About Obsia's Blog</h3>
{/exp:channel:entries}
</div>

<div id="testimonials">
</div>

<div id="demo" dynamic="no" limit="1">
</div>

<div id="recent posts">
{exp:channel:entries channel="blog" limit=5 offset=1}
        <h3>Recent Posts</h3>
                <li>{title}</li>
{/exp:channel:entries}
</div>

<div "connect">
</div>

<div = "subscribe">
{exp:mailinglist:form list="blog_list" form_id="blog_subscribe"}
        <h3>Subscribe</h3>
        <p>First Name <input type="text" name="first_name"="{first_name}"></p>
        <p>Email <input type="text" name="email" value="{email}"></p>
        <p><input type="submit" value="submit"></p>
{/exp:mailinglist:form}
</div> 
```

这个片段在博客模板组的 index.php 模板中被调用，代码如下：

```
<div id="blog_display">
{exp:channel:entries channel="blog" limit="5"}
  <h2>{title}</h2>
  {author}
  {if blog_images} <img src="{blog_images}" alt="blog image {title}" class="some_class" />
  {/if}
  {teaser}
  <p>comments {comment_total} </p>
{/exp:channel:entries} 
</div>

{sidebar} 
```

我还有一个名为侧边栏的频道，其中包含 ebook_offer、about_blog、重铸帖子、推荐、订阅等字段。我可以让订阅表格显示出来。我可以在我的网页上看到最近的帖子，但看不到 about_blog 字段中填写的任何内容。

任何人都知道为什么博客频道有效，但不知道我的侧边栏频道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:17:35.567

如果没有你所有的代码在我面前，我不太确定问题到底是什么，但这可能是一些事情。对于初学者，如果您的博客主页模板中有一个`{exp:channel:entries}`标签，并且您在该标签中包含了代码片段*，*那么您会遇到问题。你不能将一个嵌套`{exp:channel:entries}`在另一个内部。

此外，频道条目标签默认设置为*动态*。他们将查看 URL 以获取有关从数据库中提取哪些条目的提示。尝试将参数添加到您的侧边栏条目标签中，您可以[在此处](http://expressionengine.com/user_guide/modules/channel/channel_entries.html#dynamic)`dynamic="no"`了解更多信息。这应该使标记忽略页面的 URL，这是您想要的。您可能还希望将参数添加到该标记，以确保仅呈现一个侧边栏条目。`limit="1"`

如果这些答案都没有帮助，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:49:54.663

最好的策略是将代码段中的内容移动到单独的模板文件中，同时尝试解决这个问题。在您的侧边栏代码段中，我注意到一些对我来说似乎不对的事情。

```
<div id="ebook_offer">
{exp:channel:entries channel="test"}
<h3>Ebook</h3>
{/exp:channel:entries}
</div>

<div id="about_blog">
{exp:channel:entries channel="blog_sidebar"}
        <h3>About Obsia's Blog</h3>
{/exp:channel:entries}
</div> 
```

这似乎不是使用 {exp:channel:entries} 标签的正确方法。您提到“ebook_offer”是一个频道字段。但是在这里，您将它用作 HTML div 的静态 id。如果“ebook_offer”是一个字段，我希望是这样的：

```
<h3>Ebook</h3>
{exp:channel:entries channel="test"}
    {ebook_offer}
{/exp:channel:entries} 
```

与“about_blog”相同

```
<h3>About Obsia's Blog</h3>
{exp:channel:entries channel="blog_sidebar"}
    {about_blog}
{/exp:channel:entries} 
```

我还注意到您说频道名为“sidebar”，但在您的 {exp:channel:entries} 标签中您使用的是“blog_sidebar”。哪个不是一回事，您频道的短代码是“sidebar”还是“blog_sidebar”？

最后，这对我来说有点离谱

```
<div id="demo" dynamic="no" limit="1">
</div> 
```

“动态”和“限制”仅适用于 ExpressionEngine {exp:channel:entries} 标记，不适用于常规 HTML 元素（如 DIV）。我会尝试再次使用 Bitmanic 和 Peter 的建议，但将其应用于 {exp:channel:entries} 如下所示：

```
{exp:channel:entries channel="blog_sidebar" dynamic="off"}
...
{/exp:channel:entries} 
```

如果您是 ExpressionEngine 的新手，我强烈推荐 Ryan Ireland 的视频和教程[http://eeinsider.com/videos](http://eeinsider.com/videos)

# asp.net - 在页面代码后面的 Page_Load 上引用 ASP.NET 用户控件实例时为空

> ID：10340610
> 
> 赞同：6
> 
> 时间：2012-04-26T20:02:11.393
> 
> 标签：asp.net, user-controls, pageload

我有一个我已经编写并添加到 ASP.NET 页面的用户控件，并且功能很好。但是，我试图在 Page_Load 上从后面的代码中引用该自定义控件中的一个属性，但不能，因为该实例的可访问变量为空。

这对于用户控件和 Page_Load 是否正常？如果是这样，我怎样才能引用控件的实例以访问其公共属性？这是我在呈现页面之前需要做的事情，以便初始化一些变量。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T10:43:15.287

我遇到了同样的问题，结果证明我错误地注册了我的自定义控件。

正确定义：

```
<%@ Register Src="PeriodControl.ascx" TagName="PeriodControl" TagPrefix="ucs" %> 
```

不正确的定义：

```
<%@ Register TagPrefix="ucs" Namespace="MyWebsite" Assembly="MyWebsite" %> 
```

唯一的区别是直接引用 ascx 文件而不是程序集中的控件。去搞清楚！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:05:01.783

您可能可以从`Page_PreRender`事件中访问您的用户控件。

您可以[在此处找到有关 asp.net 中页面生命周期的](http://msdn.microsoft.com/en-us/library/ms178472.aspx)更多文档。

# python - 使用正则表达式匹配多种日期/时间戳

> ID：10340615
> 
> 赞同：1
> 
> 时间：2012-04-26T20:02:30.563
> 
> 标签：python, regex, datetime, timestamp

我有一个包含两种不同类型的日期/时间戳的文件。首先，我的日期/时间戳格式如下：

```
DATE    : Fri, 20 Apr 2012 09:15:17 -0700 (PDT) 
```

其次，我的时间戳格式如下：

```
12:24 PM 
```

我写了两个正则表达式模式来处理这个问题：

```
full_pattern = re.compile('\w{3,4}\W\s\w{3}\s\d{4}\s\d\d:\d\d:\d\d')
time_pattern = re.compile(' \d:\d\d\s[\w]{2}') 
```

这些是对话，所以我正在寻找一个输出，其中包含对话开始的日期和时间，然后是对话中每个项目的时间戳。其最终应用是在每次日期和时间匹配时使用 Arduino 微控制器启动某些东西（即：是 4 月 30 日和下午 1:01 吗？当时有消息吗？是的？好的，启动）。

我有两个问题：

1.  第一个模式（“full_pattern”）没有返回任何东西，我不知道为什么。我需要解决完整的问题吗？（包括“日期”位）？

2.  我如何一起使用这些？所以正则表达式找到第一个日期/时间戳，然后打印出时间戳，找到下一个日期/时间戳，然后打印出时间戳。像这样：

    2012 年 4 月 20 日星期五 11:01:17 上午 11:01 上午 11:03

    2012 年 4 月 20 日星期五 09:15:17 晚上 9:15 晚上 9:17

请注意：日期/时间戳为军用时间，其他为 AM/PM

我试过像这样管道它：

```
 re.findall(pattern1 | pattern2, string) 
```

但它不喜欢那样。我还尝试在 for 循环中同时运行它们，如下所示：

```
 for line in string:
         pattern1 = re.compile('\w{3,4}\W\s\w{3}\s\d{4}\s\d\d:\d\d:\d\d')
         pattern2 = re.compile(' \d:\d\d\s[\w]{2}')
         re.findall(pattern1, string)
         re.findall(pattern2, string) 
```

但这导致了所有 pattern2 的无限循环（可能不是无限的，绝对比我需要的要多）。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:23:00.597

在线测试正则表达式有助于解决您的正则表达式不起作用的问题。我用过[这个](http://gskinner.com/RegExr/)。

这是我用来解决您的问题的 Python：

```
import re

full_pattern = r'\w{3,4}\W\s\d{1,2}\s\w{3}\s\d{4}\s\d{2}:\d{2}:\d{2}'
time_pattern = r'\d{1,2}:\d{2}(\s(A|P)M)?'
combo_regex = '(%s)' % ('|'.join([full_pattern, time_pattern]),)

with open(r'C:\Users\spikem\file_with_two_different_types_of_dates.txt','r') as f:
    for line in f:
        p = re.search(combo_regex, line, re.IGNORECASE)
        if p:
            print p.group() # Assumes a max of one match per line 
```

这是一些示例输出：

```
Fri, 20 Apr 2012 09:15:17
12:24 PM
Tue, 10 Jan 2012 00:00:00
Fri, 20 Jan 2012 00:00:00
Mon, 30 Jan 2012 00:00:00
Thu, 09 Feb 2012 00:00:00
Sun, 19 Feb 2012 00:00:00
Wed, 29 Feb 2012 00:00:00
Sat, 10 Mar 2012 00:00:00
Tue, 20 Mar 2012 00:00:00
Fri, 30 Mar 2012 00:00:00
Mon, 09 Apr 2012 00:00:00
Thu, 19 Apr 2012 00:00:00
Sun, 29 Apr 2012 00:00:00
Wed, 09 May 2012 00:00:00
Sat, 19 May 2012 00:00:00
Tue, 29 May 2012 00:00:00
Fri, 08 Jun 2012 00:00:00
Mon, 18 Jun 2012 00:00:00
Thu, 28 Jun 2012 00:00:00
Sun, 08 Jul 2012 00:00:00
Wed, 18 Jul 2012 00:00:00
Sat, 28 Jul 2012 00:00:00
Tue, 07 Aug 2012 00:00:00
Fri, 17 Aug 2012 00:00:00
Mon, 27 Aug 2012 00:00:00
Thu, 06 Sep 2012 00:00:00
Sun, 16 Sep 2012 00:00:00
Wed, 26 Sep 2012 00:00:00
Sat, 06 Oct 2012 00:00:00
Tue, 16 Oct 2012 00:00:00
Fri, 26 Oct 2012 00:00:00 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:04:35.347

我将其发布为答案，因为我没有代表发表评论。

[http://www.txt2re.com/](http://www.txt2re.com/)

只需粘贴您想要进行正则表达式搜索的文本并开始选择要捕获的内容，您就会获得不同语言的代码示例：)

这个工具简直太棒了。

这对你有用吗？ [http://www.txt2re.com/index-python.php3?s=DATE%20%20%20%20:%20Fri,%2020%20Apr%202012%2009:15:17%20-0700%20% 28PDT%29%20&28&6&3&2&8&13&29&12](http://www.txt2re.com/index-python.php3?s=DATE%20%20%20%20:%20Fri,%2020%20Apr%202012%2009:15:17%20-0700%20%28PDT%29%20&28&6&3&2&8&13&29&12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:23:52.843

对您的第一个模式进行了一些修复：

```
\w{3,4},\s\d{1,2}\s\w{3}\s\d{4}\s\d\d:\d\d:\d\d 
```

(1) 如果您希望在日期名称后使用逗号，请继续明确说明。

(2) 您缺少检测月份日期的模式部分。

我相信您的模式与您的输入相对应，也就是说，日期名称将恰好是 3 或 4 个字符，并且每个元素都由 1 个空格分隔。

我想你想要这个作为你的第二个模式：

```
\s\d{1,2}:\d\d\s(AM|PM) 
```

我不确定您的输入是否具有领先空间。你可能想要

```
\d{1,2}:\d\d\s(AM|PM) 
```

反而。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T21:58:53.200

不确定您的格式，所以这只是一个示例。
如果该行仅按时间格式更改，则可以使用单个正则表达式一次获取所有信息。

```
\b  ([a-z])+,      # (1) # Fri,
\s+ (\d+)          # (2) # 20
\s+ ([a-z]+)       # (3) # Apr
\s+ (\d+)          # (4) # 2012
\s+ (\d+:\d+:\d+)  # (5) # 11:01:17

(?:                 # Time Zone
    \s+ (-\d+)           # (6) # -0700
    \s+ \( ([a-z]) \)    # (7) # (PDT)

  |                # OR,

                     # Local time 1
   \s+ (\d+:\d+)        # (8) # 11:01
   \s+ ([a-z]+)         # (9) # AM
   (?:               # Local time 2 (optional)
      \s+ (\d+:\d+)     # (10) # 11:03
      \s+ ([a-z]+)      # (11) # AM
   )?
) 
```

# mysql - 获取与邮政编码相关的所有城市

> ID：10340616
> 
> 赞同：0
> 
> 时间：2012-04-26T20:02:40.120
> 
> 标签：mysql, sql, geolocation

我目前有一个名为 civic_zip_code 的数据库表，其中包含 zip、city、state、latitude、longitude 列。

我一直在努力让它工作一段时间，但我不太明白。基本上，由于某些城市有多个邮政编码，我正在尝试创建一个表格，允许我将所有邮政编码与该城市相关联。因为我想让它随时可用，所以我想把它转储到一个表中，所以我试图想出一个 SELECT INTO 语句来为我完成这一切。

我目前有这个：

```
select distinct concat(city, ', ', state) as location, city, state, group_concat(zip SEPARATOR '|') as zip_codes 
from civic_zip_code 
group by city 
```

我所拥有的似乎很接近，但我似乎有一个问题，它似乎只在城市上使用 distinct。我在结果中只得到了明尼苏达州罗切斯特市，我确信至少也应该有一个纽约州罗切斯特市。此外，它结合了邮政编码，所以虽然我只得到了明尼苏达州罗切斯特市，但它在明​​尼苏达州罗切斯特市的 zip_codes 列中包含了纽约州罗切斯特市的邮政编码。

下面正是我在罗切斯特看到的。

```
location       city          state          zip_codes
-------------- ------------- -------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Rochester, MN  Rochester     MN             55903|55904|55905|55906|48309|55902|55901|46975|48308|53167|48307|48306|62563|79544|42273|05767|14664|14683|14653|14660|14673|02770|03839|14694|14652|14651|14650|14649|14692|03868|15074|03866|03867|14647|14607|14606|14639|14642|14064|14601|14611|14608|14610|14602|14621|14622|14626|14603|14624|14609|14627|14604|14605|14623|14643|14619|14612|14625|14644|14613|14645|14646|14617|14618|14614|14616|14620|14615|14638|98579 
```

我知道至少 146xx 邮政编码应该是纽约州罗切斯特的一部分，而不是明尼苏达州罗切斯特的一部分。

即使我把它拿出来，它似乎也遇到了同样的问题。

我尝试了其他一些查询，但似乎都没有得到我想要的东西。

是否有我遗漏的东西或一种简单的方法来实现我正在寻找的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:06:41.483

听起来您想按城市和位置进行分组。像这样：

```
select distinct concat(city, ', ', state) as location, city, state, group_concat(zip SEPARATOR '|') as zip_codes 
from civic_zip_code 
group by concat(city, ', ', state),city 
```

# perl - perl - 遍历目录以查找 file.mdb 并在未找到 file.ldb 时执行代码

> ID：10340617
> 
> 赞同：1
> 
> 时间：2012-04-26T20:02:41.207
> 
> 标签：perl

我是一个初学者 PERL 程序员，我遇到了一个我无法克服的障碍。我整天都在阅读和重新阅读 perl.org 上的网络帖子和 Simon Cozens 的书，但似乎无法解决问题。

我使用下面的代码的目的是遍历目录中的文件，当文件具有特定字符串时，使用名称来验证相同的文件名是否不存在具有不同的扩展名，如果不存在，则打印给我文件名（稍后我将实现文件的删除，但现在我想确保它能够正常工作。）具体来说，我正在查找 .mdb 文件，并在检查没有关联的 .ldb 文件后，删除 .mdb 文件。

现在我的代码返回这个：

```
RRED_Database_KHOVIS.ldb
RRED_Database_KHOVIS.mdb
I will kill RRED_Database_KHOVIS.mdb

RRED_Database_mkuttler.mdb
I will kill RRED_Database_mkuttler.mdb

RRED_Database_SBreslow.ldb
RRED_Database_SBreslow.mdb
I will kill RRED_Database_SBreslow.mdb 
```

我希望它只在没有关联 .ldb 文件的 .mdb 文件之后返回“我会杀了……”。

我当前的代码如下。我感谢提供的任何帮助...

```
use strict;
use warnings;
use File::Find;
use diagnostics;

my $dir = "//vfg1msfs01ab/vfgcfs01\$/Regulatory Reporting/Access Database/";
my $filename = "RRED_Database";
my $fullname, my $ext;

opendir DH, $dir or die "Couldn't open the directory: $!";
while ($_ = readdir(DH)) {
my $ext = ".mdb";
if ((/$filename/) && ($_ ne $filename . $ext)) {
    print "$_ \n";
    unless (-e $dir . s/.mdb/.ldb/) {
        s/.ldb/.mdb/;
        print "I will kill $_ \n\n" ;
        #unlink $_ or print "oops, couldn't delete $_: $!\n";
    }
    s/.ldb/.mdb/;
}   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:30:34.187

在循环文件时，我喜欢反复使用“下一个”语句来确保我只查看我想要的内容。试试这个：

```
use strict;
use warnings;
use File::Find;
use diagnostics;

my $dir = "//vfg1msfs01ab/vfgcfs01\$/Regulatory Reporting/Access Database/";
my $filename = "RRED_Database";
my $fullname, my $ext;

opendir DH, $dir or die "Couldn't open the directory: $!";
while ($_ = readdir(DH)) {
  my $ext = ".mdb";

  # Jump to next while() iteration unless the file begins 
  # with $filename and ends with $ext, 
  # and capture the basename in $1
  next unless $_ =~ m|($filename.*)$ext|;

  # Jump to next while() iteration if if the file basename.ldb is found
  next if -f $1 . ".ldb";

  # At this point, we have an mdb file with no matching ldb file
  print "$_ \n";
  print "I will kill $_ \n\n" ;
  #unlink $_ or print "oops, couldn't delete $_: $!\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:00:48.267

虽然 stuart 的 anwser 使它更精简......我也能够让它与下面的代码一起工作......（我将 .mdb 更改为 .accdb 因为我现在正在处理不同的文件类型）

```
use strict;
use warnings;
use File::Spec;
use diagnostics;

my $dir = "//vfg1msfs01ab/vfgcfs01\$/Regulatory Reporting/Access Database/";
my $filename = "RRED_Database";
my $ext;

opendir DH, $dir or die "Couldn't open the directory: $!";
while ($_ = readdir(DH)) {
    my $ext = ".accdb";
    if ((/$filename/)  && ($_ ne $filename . $ext)  && ($_ !~ /.laccdb/)) {
        # if file contains database name, is not the main database and is not a  locked version of db
        s/$ext/.laccdb/;
        unless (-e File::Spec->join($dir,$_)) { 
            s/.laccdb/$ext/;
            #print "I will kill $_ \n\n";
            unlink $_ or print "oops, couldn't delete $_: $!\n";
        }
        s/.laccdb/$ext/;
    }   
} 
```

# nservicebus - nservicebus 可以支持多种传输机制吗？

> ID：10340619
> 
> 赞同：4
> 
> 时间：2012-04-26T20:02:45.870
> 
> 标签：nservicebus

我有一个使用 AzureQueue 配置的本地主机，该配置从 azure 队列中提取。我还有另一个使用 MSMQ 进行传输的本地主机。我需要从第一台主机向第二台主机发送消息（同样两者都在本地，但一个配置为使用 azure 队列进行传输）。

实现这一目标的最佳方法是什么？网关是解决这个问题还是我错过了一些明显的东西？

# macos - 从应用程序内的链接下载 mp3

> ID：10340621
> 
> 赞同：-1
> 
> 时间：2012-04-26T20:02:47.260
> 
> 标签：macos, cocoa, download, mp3, hyperlink

我正在制作一个从链接下载 mp3 的 mac 应用程序。
比如这个链接：[http](http://media.soundcloud.com/stream/VGGUdzU69Ng5?stream_token=2U9W2)
://media.soundcloud.com/stream/VGGUdzU69Ng5?stream_token=2U9W2 可以看到，是一个mp3文件。如何将其下载到特定路径？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:14:59.700

最简单的方法是使用`NSURLDownload`：

```
NSURL* url = [NSURL URLWithString:@"http://media.soundcloud.com/stream/VGGUdzU69Ng5?stream_token=2U9W2"];
NSString* destinationPath = [NSHomeDirectory() stringByAppendingPathComponent:@"someFile.mp3"];

NSURLRequest* request = [NSURLRequest requestWithURL:url];
NSURLDownload* download = [[NSURLDownload alloc] initWithRequest:request delegate:nil];
[download setDestination:destinationPath allowOverwrite:NO]; 
```

理想情况下，您会将一个对象设置为委托，以便您可以接收进度通知，然后`NSURLDownload`在完成后释放该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:26:34.660

可能最简单的方法是[为您的 Web 视图设置一个策略委托](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/instm/WebView/setPolicyDelegate%3a)，并让该委托通过[告诉侦听器下载](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDecisionListener_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/WebPolicyDecisionListener/download)[来响应如何处理该链接的问题](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView%3adecidePolicyForNavigationAction%3arequest%3aframe%3adecisionListener%3a)。

编辑：哦，错过了关于“特定路径”的部分。我对此一无所知；对不起。我希望其他人可以填补这方面的空白。

# android - 通过手机扬声器Android api静音

> ID：10340622
> 
> 赞同：1
> 
> 时间：2012-04-26T20:02:51.760
> 
> 标签：android

我希望静音通过手机扬声器发出的所有声音，但保持声音通过耳机。这可能吗？

我在看： setMicrophoneMute(true); 和 setSpeakerphoneOn(false);

但似乎都没有任何影响。这甚至可能吗？我的清单中有这个权限：

我在音频管理器中看不到任何可以完成我想要的方法，但也许我只是不理解 api。

# ruby-on-rails - Texticle 和 ActsAsTaggableOn

> ID：10340624
> 
> 赞同：1
> 
> 时间：2012-04-26T20:02:53.513
> 
> 标签：ruby-on-rails, acts-as-taggable-on, texticle

我正在尝试将标签搜索作为 Texticle 搜索的一部分。由于 texticle 不会从同一模型中搜索多个表，因此我最终创建了一个名为 PostSearch 的新模型，遵循 Texticle 关于 System-Wide Searching 的建议

```
class PostSearch < ActiveRecord::Base

  # We want to reference various models
  belongs_to :searchable, :polymorphic => true
  # Wish we could eliminate n + 1 query problems,
  # but we can't include polymorphic models when
  # using scopes to search in Rails 3
  # default_scope :include => :searchable

  # Search.new('query') to search for 'query'
  # across searchable models
  def self.new(query)
    debugger
    query = query.to_s
    return [] if query.empty?
    self.search(query).map!(&:searchable)
    #self.search(query) <-- this works, not sure why I shouldn't use it.
  end

  # Search records are never modified
  def readonly?; true; end

  # Our view doesn't have primary keys, so we need
  # to be explicit about how to tell different search
  # results apart; without this, we can't use :include
  # to avoid n + 1 query problems
  def hash
   id.hash
  end

  def eql?(result)
    id == result.id
  end

end 
```

在我的 Postgres DB 中，我创建了一个这样的视图：

```
 CREATE VIEW post_searches AS
  SELECT posts.id, posts.name, string_agg(tags.name, ', ') AS tags
    FROM posts
      LEFT JOIN taggings ON taggings.taggable_id = posts.id 
        LEFT JOIN tags ON taggings.tag_id = tags.id 
  GROUP BY posts.id; 
```

这使我可以得到这样的帖子：

```
SELECT * FROM post_searches
id | name | tags
1    Intro  introduction, funny, nice 
```

所以看起来一切都应该没问题。不幸的是，调用 PostSearch.new("funny") 返回 [nil] (NOT [])。翻阅 Texticle 源代码，好像 PostSearch.new 中的这一行

```
self.search(query).map!(&:searchable) 
```

使用某种 searchable_columns 方法映射字段，它是否正确？结果为零。

另一方面，除非我将其从文本类型转换为 varchar 类型，否则不会在 texticle SQL 查询中搜索标签字段。

所以，总而言之：为什么找到对象时它会被映射到 nil ？

和

为什么 texticle 会忽略我的标签字段，除非它是 varchar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:19:47.670

Texticle 将对象映射到`nil`而不是什么都没有，以便您可以检查`nil?`- 它是防止错误检查不存在的项目的保护措施。或许值得问问[嫩爱](https://github.com/tenderlove)本人，他究竟为什么要那样做。

对于 Texticle 忽略非 varchars 的原因，我并不完全肯定，但[它看起来像是](https://github.com/tenderlove/texticle)一种性能保障，因此 Postgres 不会进行全表扫描（在**为 Super Speed 创建索引**部分下）：

> 您需要为查询的每个文本/字符串列添加索引，否则 Postgresql 将恢复为全表扫描而不是使用索引。

# c# - 快速创建 32 位哈希码，唯一标识由（大部分）原始值组成的结构

> ID：10340628
> 
> 赞同：1
> 
> 时间：2012-04-26T20:03:31.253
> 
> 标签：c#, .net, hash, bitarray, bitvector

**编辑：64 位或 128 位也可以。由于某种原因，我的大脑刚刚跳到 32 位，以为这就足够了。**

我有一个结构，主要由数值（int、decimal）和 3 个字符串组成，每个字符串不超过 12 个字母字符。我正在尝试创建一个可以用作哈希码的整数值，并尝试快速创建它。一些数值也可以为空。

似乎 BitVector32 或 BitArray 将是用于此努力的有用实体，但我只是不确定如何在此任务中使它们符合我的意愿。我的结构包含 3 个字符串、12 个小数（其中 7 个可以为空）和 4 个整数。

为了简化我的用例，假设您有以下结构：

```
public struct Foo
{
    public decimal MyDecimal;
    public int? MyInt;
    public string Text;
} 
```

我知道我可以获得每个值的数字标识符。从数值的角度来看，MyDecimal 和 MyInt 当然是独一无二的。该字符串有一个 GetHashCode() 函数，该函数将返回一个通常唯一的值。

那么，每个都有一个数字标识符，是否可以生成一个唯一标识该结构的哈希码？例如，我可以每次比较 2 个包含相同值的不同 Foo，并获得相同的哈希码（无论应用程序域、重新启动应用程序、一天中的时间、木星卫星的对齐方式等）。

哈希将是稀疏的，因此我预计我的用例不会发生冲突。

有任何想法吗？我第一次运行它时，我将所有内容都转换为字符串表示形式，将其连接起来，并使用内置的 GetHashCode() 但这似乎非常……低效。

编辑：更多背景信息。结构数据被传递到 web 客户端，客户端对包含的值、字符串构造等进行大量计算以重新渲染页面。前面提到的 19 个字段结构代表一个信息单元，每个页面可以有多个单元。我想对渲染结果进行一些客户端缓存，因此如果我从服务器看到相同的哈希标识符，我可以快速重新渲染一个单元，而无需在客户端重新计算。JavaScript 数值都是 64 位的，所以我想我的 32 位约束是人为的和限制性的。64 位可以工作，或者如果我可以在服务器上将它分成两个 64 位值，我想甚至是 128 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:42:51.210

好吧，即使在稀疏表中，也应该更好地为冲突做好准备，具体取决于“稀疏”的含义。

![哈希冲突概率（均匀分布）](../Images/88e5c6883b12e857cf6bd7c22fcf767c.png)

您需要能够对您将同时散列的数据做出*非常具体的假设，才能用 32 位击败该图。*

使用 SHA256。您的哈希值将不依赖于 CLR 版本，并且不会发生冲突。好吧，你仍然会有一些，但比陨石撞击的频率要低，所以你可以承受不去预料的后果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:06:35.680

我建议你看看[这里](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)和[这里](http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx)的两件事。我认为您无法保证仅使用 32 位就不会发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:22:17.140

散列函数定义的散列码并不意味着是唯一的。它们只是为了尽可能均匀地分布在所有结果值中。获取对象的哈希码是一种**快速**检查两个对象是否**不同**的方法。如果两个对象的哈希码不同，那么这些对象就不同。但是，如果哈希码相同，则必须深入比较对象才能确定。哈希码的主要用途是在所有基于哈希的集合中，它们可以实现接近 O(1) 的检索速度。

所以从这个角度来看，你`GetHashCode`不必很复杂，事实上它不应该。它必须在非常快速和产生均匀分布的值之间取得平衡。如果获取哈希码的时间太长，那么它就变得毫无意义，因为深度比较的优势已经消失。如果在另一个极端，哈希码总是`1`例如（快速点亮）它会在每种情况下导致深度比较，这使得这个哈希码也毫无意义。

所以要保持平衡，不要试图想出一个完美的哈希码。调用`GetHashCode`您的所有（或大多数）成员，并使用`Xor`运算符将​​结果与按位移运算符`<<`或`>>`. 框架类型已经`GetHashCode`相当优化，尽管它们不能保证在每个应用程序运行中都是相同的。不能保证，但它们也不必改变，而且很多都不需要。使用反射器来确保或根据反射代码创建自己的版本。

在您的特定情况下，仅通过查看其哈希码来确定您是否已经处理了一个结构有点冒险。哈希值越好，风险越小，但仍然如此。最终且唯一唯一的哈希码是……数据本身。使用哈希码时，您还必须重写`Object.Equals`以使您的代码真正可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:11:01.320

我相信 .NET 中的常用方法是对结构的每个成员调用 GetHashCode 并对结果进行异或运算。

但是，我不认为 GetHashCode 声称在不同的应用程序域中为相同的值生成相同的哈希值。

您能否在您的问题中提供更多信息，说明您为什么需要此哈希值以及为什么它需要随着时间的推移保持稳定、不同的应用程序域等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T21:13:33.533

你追求什么目标？如果它是性能，那么您应该使用一个类，因为每当您将结构作为函数参数传递时，它都会按值复制。

> 3 个字符串，12 个小数（其中 7 个可以为空）和 4 个整数。

在 64 位机器上，指针大小为 8 个字节，十进制占用 16 个字节，int 占用 4 个字节。忽略填充结构将使用**每个实例 232 字节**。与建议的最大 16 字节相比，这要大得多，这在性能方面是有意义的（由于其对象标头，类占用至少 16 字节，...）

如果您需要该值的指纹，您可以使用像 SHA256 这样的加密级哈希算法，它将产生一个 16 字节的指纹。这仍然不是唯一的，但至少足够独特。但这也会花费相当多的性能。

**Edit1：** 在您明确需要哈希码来识别 Java Script Web 客户端缓存中的对象后，我感到很困惑。为什么服务器再次发送相同的数据？让服务器更智能地只发送客户端尚未收到的数据不是更简单吗？

在您的情况下，可以使用 SHA 哈希算法来创建一些对象实例标签。

* * *

为什么你需要一个哈希码？如果您的目标是以内存有效的方式存储值，您可以创建一个 FooList ，它使用字典仅存储一次相同的值，并使用和 int 作为查找键。

```
using System;
using System.Collections.Generic;

namespace MemoryEfficientFoo
{
    class Foo // This is our data structure 
    {
        public int A;
        public string B;
        public Decimal C;
    }

    /// <summary>
    /// List which does store Foos with much less memory if many values are equal. You can cut memory consumption by factor 3 or if all values 
    /// are different you consume 5 times as much memory as if you would store them in a plain list! So beware that this trick
    /// might not help in your case. Only if many values are repeated it will save memory.
    /// </summary>
    class FooList : IEnumerable<Foo> 
    {
        Dictionary<int, string> Index2B = new Dictionary<int, string>();
        Dictionary<string, int> B2Index = new Dictionary<string, int>();

        Dictionary<int, Decimal> Index2C = new Dictionary<int, decimal>();
        Dictionary<Decimal,int> C2Index = new Dictionary<decimal,int>();

        struct FooIndex
        {
            public int A;
            public int BIndex;
            public int CIndex;
        }

        // List of foos which do contain only the index values to the dictionaries to lookup the data later.
        List<FooIndex> FooValues = new List<FooIndex>();

        public void Add(Foo foo)
        {
            int bIndex;
            if(!B2Index.TryGetValue(foo.B, out bIndex))
            {
                bIndex = B2Index.Count;
                B2Index[foo.B] = bIndex;
                Index2B[bIndex] = foo.B;
            }

            int cIndex;
            if (!C2Index.TryGetValue(foo.C, out cIndex))
            {
                cIndex = C2Index.Count;
                C2Index[foo.C] = cIndex;
                Index2C[cIndex] = cIndex;
            }

            FooIndex idx = new FooIndex
            {
                A = foo.A,
                BIndex = bIndex,
                CIndex = cIndex
            };

            FooValues.Add(idx);
        }

        public Foo GetAt(int pos)
        {
            var idx = FooValues[pos];
            return new Foo
            {
                A = idx.A,
                B = Index2B[idx.BIndex],
                C = Index2C[idx.CIndex]
            };
        }

        public IEnumerator<Foo> GetEnumerator()
        {
            for (int i = 0; i < FooValues.Count; i++)
            {
                yield return GetAt(i);
            }
        }
        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            FooList list = new FooList();
            List<Foo> fooList = new List<Foo>();
            long before = GC.GetTotalMemory(true);
            for (int i = 0; i < 1000 * 1000; i++)
            {
                list
                //fooList
                    .Add(new Foo
                    {
                        A = i,
                        B = "Hi",
                        C = i
                    });

            }
            long after = GC.GetTotalMemory(true);
            Console.WriteLine("Did consume {0:N0}bytes", after - before);
        }
    }
} 
```

可以在[此处找到类似的内存节省列表](http://geekswithblogs.net/akraus1/archive/2011/08/18/146588.aspx)

# scorm - 在 Desire2Learn 中通过 SCORM 持久化数据

> ID：10340629
> 
> 赞同：0
> 
> 时间：2012-04-26T20:03:38.653
> 
> 标签：scorm, desire2learn

我正在尝试在 Desire2Learn SCO 中使用可共享状态持久性。但是，它似乎不受支持。当我尝试将“ssp.*”之一与 SetValue（例如：ssp.allocate 或 ssp.data）一起使用时，我收到错误 401（未定义的数据模型元素）。

有人知道如何在 Desire2Learn 中的 SCO 之间共享自定义数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:27:48.607

我相当肯定 Desire2Learn 不支持 SSP。在 SCORM 2004 第 4 版中，有共享数据桶允许您在 SCO 之间共享自定义数据，但是（据我所知）我认为 Desire2Learn 也没有更新他们的系统以支持第 4 版。

SCORM Cloud 支持第 4 版和 SSP。您可以考虑使用其[SCORM Dispatch](http://scorm.com/scorm-cloud/dispatch/)功能在云中运行您的内容，然后将结果报告给您的 Desire2Learn 实例。

# desire2learn - 使用 Desire2Learn 的 REST API 时的时间戳范围

> ID：10340634
> 
> 赞同：1
> 
> 时间：2012-04-26T20:04:02.933
> 
> 标签：desire2learn

调用 Desire2Learn 的 Valence REST API 时，调用者的时间戳值与后端服务时间之间的差异允许范围是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:24:20.640

时间戳阈值很窄，但是，如果您超出范围，服务器会将服务器的时间戳发回给您。（参见[http://docs.valence.desire2learn.com/basic/apicall.html#disposition-and-error-handling](http://docs.valence.desire2learn.com/basic/apicall.html#disposition-and-error-handling)）。但是，最简单的方法是使用价位点上的一个库，因为它们已经处理了解析结果条件并在发生时间戳超出范围错误时保留偏移量。

# c++ - 如何检查指针是否指向 NULL？

> ID：10340635
> 
> 赞同：10
> 
> 时间：2012-04-26T20:04:10.280
> 
> 标签：c++, c, null

标题可能有点用词不当......只是因为我不确定我的 char 指针是否指向 NULL，或者它是否只是指向大小为 0 的 char 数组。

所以我有

```
char* data = getenv("QUERY_STRING"); 
```

我想检查数据是否为空（或者长度<1）。我试过了：

```
if(strlen(data)<1) 
```

但我收到一个错误：

```
==24945== Invalid read of size 1
==24945==    at 0x8048BF9: main (in /cpp.cgi)
==24945==  Address 0x1 is not stack'd, malloc'd or (recently) free'd 
```

我也试过

```
if(data == NULL) 
```

但结果相同。

这里发生了什么？我已经用数据尝试过 cout，效果很好。我似乎无法检查它是空的还是空的。

我意识到这是两个不同的东西（空和空）。我想知道哪一个数据会在这里，以及如何检查它是否为空/空。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-26T20:06:29.893

使用 getenv，您必须同时处理这两种情况！（耶！）如果未设置环境变量，则该函数返回 NULL。如果它被设置，那么你会得到一个指向它设置的值的指针，它可能是空的。所以：

```
const char* data = getenv("QUERY_STRING");
if (data != NULL && data[0] != '\0') {
    // Variable is set to value with length > 0
    // ...
} 
```

显然，在尝试确定它的长度或读取它指向的任何字符*之前*，您需要检查它是否为 NULL ——这就是为什么上面的两个条件按`if`它们的顺序排列的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T20:09:53.107

通常你会检查这样的东西。第一部分检查指针是否为空，第二部分通过检查每个字符串末尾的空终止符的第一个字符来检查空字符串。

```
if (data == NULL || data[0] == 0) 
```

您的问题看起来像是之间的一些特定交互`getenv`，`strlen`这不是标准的。

# asp.net - 使 GridView 看起来像一个文本框/保存按钮

> ID：10340640
> 
> 赞同：0
> 
> 时间：2012-04-26T20:04:15.853
> 
> 标签：asp.net, gridview

```
using Visual.Web.Developer.2010.Express;
using SQL.Server.Management.Studio.2008.R2; 
```

N00b 这里，

我有一个 GridView，但我想让它看起来像一个文本框/保存按钮，而不是一个旁边带有编辑/更新标签的表格。我并不是真的在寻找“teh codez”，但这可能吗？有没有更实用的方法来做到这一点？请帮忙！

![在此处输入图像描述](../Images/4a02cf549327f45de39576f494fa760c.png)
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:13:51.190

> 我有一个 GridView，但我想让它看起来像一个文本框/保存按钮，而不是一个旁边带有编辑/更新标签的表格。我并不是真的在寻找“teh codez”，但这可能吗？有没有更实用的方法来做到这一点？请帮忙！

好吧，既然您不是在寻找代码，那么让我向您指出 and 的`TemplateColumn`方向`EditItemTemplate`。他们应该把你送到那里。

您可以将所需的任何控件放在模板列中。

# ruby-on-rails - capistrano：之前工作正常之后的 sudo 错误

> ID：10340642
> 
> 赞同：5
> 
> 时间：2012-04-26T20:04:24.293
> 
> 标签：ruby-on-rails, centos, capistrano

我最近开始在我的 Rails 应用程序部署中使用 capistrano。它对我来说工作正常，然后突然之间，我开始收到此错误

```
sorry, you must have a tty to run sudo 
```

在它尝试安装的每个 gem 之后。我知道这个问题通常可以通过在`:use_sudo, false`deploy.rb 文件中放入 set 来解决，但我已经在那里了。最奇怪的是，当我确定 capistrano 正在工作并且它仍然给我同样的错误时，我将我的整个目录恢复到了。

我的服务器正在运行 CentOS

那么问题可能是由什么引起的呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:38:41.293

您可以通过添加以下行告诉 cap 为每个进程创建一个 pty：

`default_run_options[:pty] = true`

至`Capfile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T11:17:19.413

对于 Capistrano 3，您需要添加：

`set :pty, true`

到文件`config/deploy.rb`

# c# - 任务和 TAP 异步模式：bwteewn factory.StartNew 和 TaskEx.Run 的区别

> ID：10340643
> 
> 赞同：1
> 
> 时间：2012-04-26T20:04:26.627
> 
> 标签：c#, asynchronous, task

我正在使用新的 TAP 模式进行探测，使用 Task 和 CTP 来实现异步方法。

我有以下代码：

```
private async void btnAsync01_Click(object sender, RoutedEventArgs e)
        {
            UpdateTxtLog("Enter in button Async01: " + System.DateTime.Now);
            double result = await method01Async();
            UpdateTxtLog("exit in button Async01: " + System.DateTime.Now);
            UpdateTxtLog("result: " + result.ToString());
        } 
```

是让我测试异步方法的 GUI 按钮。

我可以有 method01Aync 的以下实现。

第一的：

```
private async Task<double> method01Async()
        {
              return await Task.Factory.StartNew<double>(slowMethod);
        }

private double slowMethod()
{
            double doubleDummy = 0;
            for (double i = 0; i < 1000000000; i++)
            {
                doubleDummy++;
            }
            return doubleDummy;
} 
```

第二

```
private Task<double> method01Aync()
{
return Task.Factory.StartNew<double>(() =>
            {
                //O métodos auxiliares lentos... etc.
                double doubleDummy = 0;
                for (double i = 0; i < 1000000000; i++)
                {
                    doubleDummy++;
                }
                return doubleDummy;
            });
} 
```

第三

```
private Task<double> method01Aync()
{
            return TaskEx.Run<double>(() =>
            {
                double doubleDummy = 0;
                for (double i = 0; i < 1000000000; i++)
                {
                    doubleDummy++;
                }
                return doubleDummy;
            });
} 
```

第四个私有任务 method01Async() { return TaskEx.Run(slowMethod); }

菲思

```
private Task<double> method01Async
{
return TaskEx.Run<double>(() =>
            {
                return metodoLento();
            });
} 
```

我的结果是实施 1 和 4 大约需要 22 秒。同时完成另外两个需要5s。为什么会存在这种差异？在实现 1 和 4 中，仅使用与循环相同代码的辅助方法。

我注意到如果我使用 slowMethod() 作为 Task 的构造函数的参数会非常慢，如果我在 TaskEx 或任务 Factory 中使用委托会很快。为什么会这样？有什么区别？

使用 Task.Factory 或 TaskEx.Run 有什么区别？

将异步与任务与 TAP 模式一起使用的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:10:52.583

运行方法的顺序也很重要。尝试运行它们 2 次，并且只计算第二次运行的时间。无论如何，如果您想了解两者之间的区别，这里是最好的文章：http: [//blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:32:36.277

性能测试是一个棘手的主题。

当您只使用循环和计数器时，试图“欺骗”编译器认为有工作要做，这可能会导致不一致的行为。

这是在提到计时前没有预热的事实之前，这可能是在调试模式打开的情况下完成的，并且计时代码本身没有显示。

总而言之 - 假设您编写*在现实世界中*调用长期运行过程的方式的微小变化不会**对**您的性能产​​生实质性影响。

# java - 检查字符串是否已经在 LinkedHashMap 中（作为值）

> ID：10340646
> 
> 赞同：-1
> 
> 时间：2012-04-26T20:04:38.727
> 
> 标签：java, string, duplicates, treemap

我想检查 a 的值是否`LinkedHashmap`已经包含一个字符串，如果没有，将它添加到 ArrayList。 `windowSize`介于 1 和 7 之间（预定义）

```
String wholeString = "HausA HausB";

final Map<String, ArrayList<String>> generateMap = new LinkedHashMap<String, ArrayList<String>>();
final int limit = wholeString.length() - windowSize;
    for (int i = 0; i < limit; i++) {
        String first = wholeString.substring(i, i + windowSize);
        String second = wholeString.substring(i + windowSize, i
                + windowSize + 1);

        int endKey = i + windowSize;
        if (!generateMap.containsKey(first)) {
            generateMap.put(wholeString.substring(i, endKey),
                    new ArrayList<String>());
        }
                    //check here if the String 'second' is already mapped to the key'
                    if (i < limit && !generateMap.get(first).equals(second)) {
            generateMap.get(first).add(second);
        } else {
            generateMap.get(first).add(null);
        }
    }

   for (Entry<String, ArrayList<String>> e : generateMap.entrySet()) {
        System.out.println(e.getKey() + " -> " + e.getValue()+ "\n");
   } 
```

现在的输出：

```
HausA -> [ ]
ausA  -> [H]
usA H -> [a]
sA Ha -> [u]
A Hau -> [s]
Haus  -> [B]
HausB -> [ ] 
```

应该如何：

```
HausA -> [ ]
ausA  -> [H]
usA H -> [a]
sA Ha -> [u]
A Hau -> [s]
Haus  -> [A,B] //<---
HausB -> [ ] 
```

感谢您的赞赏帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:25:11.160

看看这个怎么搭配...

```
final String wholeString = " HausA HausB";
final Map<String, Set<String>> generateMap = new LinkedHashMap<String, Set<String>>();
final int windowSize = 5;

final int limit = wholeString.length() - windowSize;
for (int i = 0; i < limit; i++) {
  final int endKey = i + windowSize;
  final String
      first = wholeString.substring(i, endKey),
      second = wholeString.substring(endKey, endKey + 1);
  if (!generateMap.containsKey(first))
    generateMap.put(first, new HashSet<String>());
  generateMap.get(first).add(second);
}

for (Entry<String, Set<String>> e : generateMap.entrySet()) {
  System.out.println(e.getKey() + " -> " + e.getValue());
} 
```

# binary-data - 混合 ASCII 和二进制作为记录分隔符

> ID：10340649
> 
> 赞同：0
> 
> 时间：2012-04-26T20:04:49.597
> 
> 标签：binary-data

我的要求是在文件中写入二进制记录。二进制记录可以被认为是内存中的原始字节。我需要一种方法来分隔每条记录，以便我可以对文件执行类似于二进制搜索的操作。例如从文件中间开始，找到下一个分隔的记录并开始搜索。

我的问题是，可以使用诸如“START-RECORD”之类的 ASCII 来分隔二进制记录吗？START-RECORD，数据长度，.......二进制数据............ START-RECORD，数据长度，.......二进制数据...... ……

从文件中的任意位置开始时，我可以简单地搜索 ASCII 字符串“START-DATA”。这种方法可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:08:01.580

不是一次通过，因为您是否以二进制模式阅读。如果您插入一些字符串或其他模式作为“分隔符”，则需要在读取文件时搜索它的二进制表示。

# iphone - 当我尝试从最近的应用程序栏中终止我的应用程序时，我的模拟器崩溃了

> ID：10340654
> 
> 赞同：2
> 
> 时间：2012-04-26T20:05:19.753
> 
> 标签：iphone, ios-simulator, home-button

当我尝试从最近的应用程序栏中终止我的应用程序时，我的模拟器崩溃了。

当我点击主页按钮然后我的应用程序时，应用程序会回到原来的位置，就像它应该的那样。

但是当我按下主页按钮，然后按下主页按钮两次，然后按住我的应用程序并按下（-）。模拟器进入后台，xcode 说它崩溃了。当我现在在模拟器上点击我的应用程序时，模拟器屏幕变黑并且不会加载任何内容，并且 xcode 再次出现崩溃消息......并且模拟器被冻结在黑屏上......

你觉得哪里不对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:23:01.503

没什么好担心的。这是 XCode 调试会话的正常*功能*。

确保在 XCode 中停止调试会话（点击停止 - 黑色方形 - 按钮）并直接从模拟器（而不是 XCode）再次运行您的应用程序。它现在应该可以工作了。

# ruby - 基于 mime 类型仅获取 X/HTML 链接（不是图像）

> ID：10340655
> 
> 赞同：2
> 
> 时间：2012-04-26T20:05:29.690
> 
> 标签：ruby, web-crawler, web-scraping

我正在使用 Ruby + OpenURI + Nokogiri 抓取一个网站。抓取一个页面，找到所有的`a[href]`并且（如果它们在同一个域和正确的协议中）跟随它们再次抓取。

有时会有大型二进制文件的链接（例如 jpeg、exe），我不想抓取这些文件。

我尝试使用[HTTP“Accept”标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)为错误的 mime 类型获取错误或空响应，如下所示：

```
require 'open-uri'
page = open(url, 'Accept'=>'text/html,application/xhtml+xml,application/xml') 
```

...但 OpenURI 仍会下载使用另一种 mime 类型发送的二进制文件。

除了在 url 中查看*可能*的文件类型的文件扩展名之外，**如何防止下载（或检测冲突的响应类型）任意 URL**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:54:19.980

您可以先发送`HEAD`请求，然后检查`Content-type`响应的标头，只有在可接受的情况下才发出真正的请求：

```
ACCEPTABLE_TYPES = %w{text/html application/xhtml+xml application/xml}

uri = URI(url)

type = Net::HTTP.start(uri.host, uri.port) do |http|
  http.head(uri.path).content_type
end

if ACCEPTABLE_TYPES.include? type
  # fetch the url
else
  # do whatever
end 
```

这将需要对每个页面进行额外的请求，但我看不到避免它的方法。它还依赖于服务器为`HEAD`请求发送与 a 相同的标头`GET`，我认为这是一个合理的假设，但需要注意。

# android - 安卓模拟器无法上网

> ID：10340668
> 
> 赞同：2
> 
> 时间：2012-04-26T20:06:27.263
> 
> 标签：android, emulation

我一直在研究这里找到的所有可能的解决方案，不幸的是，它们都不适合我。我的清单设置正确；我有 3 个不同的 AVD，它们都在右上角显示 3G 标志。我正在开发一个需要 Internet 连接的应用程序；我尝试使用浏览器简单地上网，但它不起作用。我没有代理；我连接到路由器；我在 Windows Vista 上。我尝试在运行配置中添加我的 PC 的 DNS。我能看到的唯一问题可能把事情搞砸了（尽管我记得它以前没有用过）当 Eclipse 要求更新到 SDK 19 时，我不得不手动更新 Tools 文件夹。我一直得到一个Eclipse 无法覆盖 Tools 文件夹的错误。这就是我在 Google 上找到的解决方案；当然，

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-01T09:22:44.790

来自[developer.android.com](https://developer.android.com/studio/run/emulator-networking.html)：

> 启动时，模拟器会读取系统当前使用的 DNS 服务器列表。然后，它将最多四个服务器的 IP 地址存储在此列表中，并根据需要在模拟地址 10.0.2.3、10.0.2.4、10.0.2.5 和 10.0.2.6 上为它们设置别名。
> 
> 在 Linux 和 OS X 上，模拟器通过解析文件 /etc/resolv.conf 来获取 DNS 服务器地址。在 Windows 上，模拟器通过调用 GetNetworkParams() API 来获取地址。**请注意，这通常意味着模拟器会忽略“主机”文件的内容**（Linux/OS X 上的 /etc/hosts，Windows 上的 %WINDOWS%/system32/HOSTS）。
> 
> 在命令行启动模拟器时，您还可以使用 -dns-server 选项**手动指定要使用的 DNS 服务器的地址**，其中是逗号分隔的服务器名称或 IP 地址列表。如果您在模拟网络中遇到 DNS 解析问题（例如，使用 Web 浏览器时出现“未知主机错误”消息），您可能会发现此选项很有用。

所以，我真的尝试从命令行运行模拟器：

```
$ emulator @Name_of_my_avd -dns-server 192.168.0.1 
```

其中 192.168.0.1 - 是我家路由器的 IP。我在系统设置中发现 192.168.0.1 也是我的 DNS 服务器。

一切正常！

**UPD**：对于 MacOS：转到系统偏好设置 -> 网络 -> 高级（在您的活动连接的选项卡中）-> DNS。您将看到系统使用的 DNS 服务器列表（[图片](https://i.stack.imgur.com/b5pPz.png)）。当您编辑此列表并单击应用时，您的 /etc/resolv.conf 将更新，因此模拟器（**不带选项 --dns-server**）将使用它！**但是**：在我的情况下，模拟器只使用列表中的第一个 DNS 服务器！因此，如果您希望您的模拟器使用某个 DNS 服务器，只需**将其设为列表中的第一个 DNS**即可。

# android - Eclipse 不编译额外的 jar 文件

> ID：10340678
> 
> 赞同：2
> 
> 时间：2012-04-26T20:06:56.850
> 
> 标签：android, eclipse, exception, compilation

Eclipse 已停止将 jar 文件编译到我的 android 项目中，当我将其部署到设备或创建构建时，找不到正确的引用

找不到从方法 com.xyz.trySomthing() 引用的类 'org.apache.http.entity.mime.MultipartEntity'

我有 httpClient、httpCore、httpMime 等所需的 jar。它以前可以正常工作，但并非所有 jar 文件或外部库都没有被正确引用。

Twitter Jar 也会发生同样的事情

* * *

```
 java.lang.NoClassDefFoundError: oauth.signpost.commonshttp.CommonsHttpOAuthConsumer
E/AndroidRuntime( 2175):    at com.xyz.abc.abcd.askOAuth(BestOf.java:564)
E/AndroidRuntime( 2175):    at com.xyz.abc.abcd.access$0(BestOf.java:556)
E/AndroidRuntime( 2175):    at com.xyz.abc.abcd$3$1.onClick(BestOf.java:230)
E/AndroidRuntime( 2175):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:873)
E/AndroidRuntime( 2175):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
E/AndroidRuntime( 2175):    at android.widget.ListView.performItemClick(ListView.java:3513)
E/AndroidRuntime( 2175):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
E/AndroidRuntime( 2175):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime( 2175):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 2175):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 2175):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 2175):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2175):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 2175):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:889)
E/AndroidRuntime( 2175):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:647)
E/AndroidRuntime( 2175):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T20:11:41.990

如果您在项目中创建文件夹“libs”，ADT 将自动使用它们。我遇到了同样的问题，在旧版本的 ADT 中，它在外部项目中运行良好，但现在它给了我 NoClassDefFoundError。解决方案是创建一个 jar 并将其放在“libs”文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T10:45:35.133

将 .jars 添加到构建路径应该会有所帮助，而无需移动到 Libs 文件夹。

只需打开“项目属性”->“Java 构建路径”并检查是否在“订购和导出选项卡”中勾选了所有需要的 .jar。

# python - FreeBSD - 在不同的处理器中运行 Python 代码

> ID：10340679
> 
> 赞同：0
> 
> 时间：2012-04-26T20:07:03.620
> 
> 标签：python, multicore, freebsd

我想运行两个 python 脚本。每一个都需要很长时间才能完成。我正在使用双核 FreeBSD 机器，并希望确保我使用这两个内核。当我运行这两个脚本时，我发现它们最终都在同一个 CPU 中运行。如何控制两个脚本被不同的 CPU 占用？我知道在 Linux 中我们可以指定 taskset -c X python foo.py 其中 X 是 CPU 编号，如 0、1、2。我怎样才能在 FreeBSD 系统中做类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:12:09.637

您正在寻找的术语是“CPU 亲和力”。

`cpuset -c -l X python foo.py`

有关详细信息，请参阅[如何在 FreeBSD](http://segfault.in/2010/09/how-to-set-cpu-affinity-for-a-process-in-freebsd/)中为进程设置 CPU 亲和性。

# mysql - Django 中的 GROUP_CONCAT 等效项

> ID：10340684
> 
> 赞同：24
> 
> 时间：2012-04-26T20:07:18.120
> 
> 标签：mysql, django, group-concat

假设我有下表`fruits`：

```
id | type   | name
-----------------
 0 | apple  | fuji
 1 | apple  | mac
 2 | orange | navel 
```

我的目标是最终计算出不同的`types`和以逗号分隔的列表`names`：

```
apple, 2, "fuji,mac"
orange, 1, "navel" 
```

这可以`GROUP_CONCAT`在 MySQL 中轻松完成，但我在使用 Django 等效项时遇到了麻烦。这是我到目前为止所拥有的，但我错过了`GROUP_CONCAT`这些东西：

```
query_set = Fruits.objects.values('type').annotate(count=Count('type')).order_by('-count') 
```

如果可能，我想避免使用原始 SQL 查询。

任何帮助将不胜感激！

谢谢！=)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-07-10T09:43:39.450

您可以创建自己的聚合函数 ( [doc](https://docs.djangoproject.com/en/dev/ref/models/expressions#django.db.models.Aggregate) )

```
from django.db.models import Aggregate

class Concat(Aggregate):
    function = 'GROUP_CONCAT'
    template = '%(function)s(%(distinct)s%(expressions)s)'

    def __init__(self, expression, distinct=False, **extra):
        super(Concat, self).__init__(
            expression,
            distinct='DISTINCT ' if distinct else '',
            output_field=CharField(),
            **extra) 
```

并将其简单地用作：

```
query_set = Fruits.objects.values('type').annotate(count=Count('type'),
                       name = Concat('name')).order_by('-count') 
```

我正在使用 django 1.8 和 mysql 4.0.3

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-08T03:57:23.510

注意 Django (>=1.8) 提供[`Database functions`](https://docs.djangoproject.com/en/dev/ref/models/database-functions/)支持。 [https://docs.djangoproject.com/en/dev/ref/models/database-functions/#concat](https://docs.djangoproject.com/en/dev/ref/models/database-functions/#concat)

这里是增强版`Shashank Singla`

```
from django.db.models import Aggregate, CharField

class GroupConcat(Aggregate):
    function = 'GROUP_CONCAT'
    template = '%(function)s(%(distinct)s%(expressions)s%(ordering)s%(separator)s)'

    def __init__(self, expression, distinct=False, ordering=None, separator=',', **extra):
        super(GroupConcat, self).__init__(
            expression,
            distinct='DISTINCT ' if distinct else '',
            ordering=' ORDER BY %s' % ordering if ordering is not None else '',
            separator=' SEPARATOR "%s"' % separator,
            output_field=CharField(),
            **extra
        ) 
```

用法：

```
LogModel.objects.values('level', 'info').annotate(
    count=Count(1), time=GroupConcat('time', ordering='time DESC', separator=' | ')
).order_by('-time', '-count') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-05T16:22:44.053

从我维护`GroupConcat`的 Django-MySQL 包（ [https://django-mysql.readthedocs.org/en/latest/aggregates.html#django_mysql.models.GroupConcat](https://django-mysql.readthedocs.org/en/latest/aggregates.html#django_mysql.models.GroupConcat) ）中使用。有了它，您可以像这样简单地做到这一点：

```
>>> from django_mysql.models import GroupConcat
>>> Fruits.objects.annotate(
...     count=Count('type'),
...     name_list=GroupConcat('name'),
... ).order_by('-count').values('type', 'count', 'name_list')
[{'type': 'apple', 'count': 2, 'name_list': 'fuji,mac'},
 {'type': 'orange', 'count': 1, 'name_list': 'navel'}] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-22T16:22:25.137

如果您使用的是 PostgreSQL，则可以使用`ArrayAgg`将所有值聚合到一个数组中。

[https://www.postgresql.org/docs/9.5/static/functions-aggregate.html](https://www.postgresql.org/docs/9.5/static/functions-aggregate.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-04T16:05:50.187

如果您不介意在模板中执行此操作，则 Django 模板标记[重新组合](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup)可以完成此操作

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-01T17:08:55.260

从 Django 1.8 开始，您可以使用[Func() 表达式](https://docs.djangoproject.com/en/1.8/ref/models/expressions/#func-expressions)。

```
query_set = Fruits.objects.values('type').annotate(
    count=Count('type'),
    name=Func(F('name'), 'GROUP_BY')
).order_by('-count') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-26T20:33:59.850

Django ORM 不支持这个；如果您不想使用原始 SQL，那么您需要[group 和 join](http://docs.python.org/library/itertools.html#itertools.groupby)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-08T23:31:45.777

Django ORM 不支持，但您可以构建自己的聚合器。

它实际上非常简单，这里是一个链接到一个如何做到这一点，`GROUP_CONCAT`对于 SQLite：[http ://harkablog.com/inside-the-django-orm-aggregates.html](http://harkablog.com/inside-the-django-orm-aggregates.html)

但是请注意，可能需要分别处理不同的 SQL 方言。例如，[SQLite 文档说关于`group_concat`](http://sqlite.org/lang_aggfunc.html)：

> 连接元素的顺序是任意的

而[MySQL 允许您指定顺序](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

`GROUP_CONCAT`我想这可能是它目前没有在 Django 中实现的原因。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-18T07:47:05.483

为了完成@WeizhongTu的回答，请注意您不能将关键字*SEPARATOR*与SQLITE一起使用。如果您使用 MySQL 和 SQLite 进行测试，您可以编写：

```
class GroupConcat(Aggregate):
    function = 'GROUP_CONCAT'
    separator = ','

    def __init__(self, expression, distinct=False, ordering=None, **extra):
        super(GroupConcat, self).__init__(expression,
                                          distinct='DISTINCT ' if distinct else '',
                                          ordering=' ORDER BY %s' % ordering if ordering is not None else '',
                                          output_field=CharField(),
                                          **extra)

    def as_mysql(self, compiler, connection, separator=separator):
        return super().as_sql(compiler,
                              connection,
                              template='%(function)s(%(distinct)s%(expressions)s%(ordering)s%(separator)s)',
                              separator=' SEPARATOR \'%s\'' % separator)

    def as_sql(self, compiler, connection, **extra):
        return super().as_sql(compiler,
                              connection,
                              template='%(function)s(%(distinct)s%(expressions)s%(ordering)s)',
                              **extra) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-08-24T20:22:32.450

如果您使用任何建议的 MySQL 解决方案，我只想说一句警告：默认情况下，MySQL 会将 GROUP_CONCAT 结果截断为 1024 个字符。我花了一些时间弄清楚为什么我得到了不存在的 id（它们被截断了存在的 id）。

您可以通过在 Django 设置中设置 group_concat_max_len 来避免限制。一个例子在这里：[在 Django 的原始查询中包含多个语句](https://stackoverflow.com/questions/36475140/include-multiple-statements-in-djangos-raw-queries)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-10T13:58:45.113

这是在 Django ORM 中工作的最佳方式

```
f1 = Fruits.objects.values('type').annotate(count = Count('type'),namelist= GroupConcat('namelist')).distinct() 
```

# javascript - 从邮政编码谷歌地理编码获取城市名称

> ID：10340685
> 
> 赞同：9
> 
> 时间：2012-04-26T20:07:37.160
> 
> 标签：javascript, jquery, google-maps-api-3, google-geocoding-api

我在这个网站上找到了从邮政编码获取状态的代码，但我还需要获取城市名称。

这是我获取状态的代码：（注意我也使用 jQuery）

```
var geocoder = new google.maps.Geocoder();

    $('.zip').bind('change focusout', function () {
        var $this = $(this);
        if ($this.val().length == 5) {
            geocoder.geocode({ 'address': $this.val() }, function (result, status) {
                var state = "N/A";
                //start loop to get state from zip
                for (var component in result[0]['address_components']) {
                    for (var i in result[0]['address_components'][component]['types']) {
                        if (result[0]['address_components'][component]['types'][i] == "administrative_area_level_1") {
                            state = result[0]['address_components'][component]['short_name'];
                            // do stuff with the state here!
                            $this.closest('tr').find('select').val(state);
                        }
                    }
                }
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T20:21:55.663

只需添加 `result[0]['address_components'][1]['long_name']`

所以它会是

```
var geocoder = new google.maps.Geocoder();

$('.zip').bind('change focusout', function () {
    var $this = $(this);
    if ($this.val().length == 5) {
        geocoder.geocode({ 'address': $this.val() }, function (result, status) {
            var state = "N/A";
            var city = "N/A";
            //start loop to get state from zip
            for (var component in result[0]['address_components']) {
                for (var i in result[0]['address_components'][component]['types']) {
                    if (result[0]['address_components'][component]['types'][i] == "administrative_area_level_1") {
                        state = result[0]['address_components'][component]['short_name'];
                        // do stuff with the state here!
                        $this.closest('tr').find('select').val(state);
                        // get city name
                        city = result[0]['address_components'][1]['long_name'];
                        // Insert city name into some input box
                        $this.closest('tr').find('.city').val(city);
                    }
                }
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T12:09:30.500

我已经重写了上面的解决方案，看起来更优雅：

```
var zipCode = '48201';
var country = 'United States';               

var geocoder = new google.maps.Geocoder();

geocoder.geocode({ 'address': zipCode + ',' + country }, function (result, status) {

    var stateName = '';
    var cityName = '';

    var addressComponent = result[0]['address_components'];

    // find state data
    var stateQueryable = $.grep(addressComponent, function (x) {
        return $.inArray('administrative_area_level_1', x.types) != -1;
    });

    if (stateQueryable.length) {
        stateName = stateQueryable[0]['long_name'];

        var cityQueryable = $.grep(addressComponent, function (x) {
            return $.inArray('locality', x.types) != -1;
        });

        // find city data
        if (cityQueryable.length) {
            cityName = cityQueryable[0]['long_name'];
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-18T06:06:40.687

**下面是使用 googleapis 从邮政编码检查城市名称的代码。**

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Geocoding service</title>    
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>      
<script>    
        var geocoder;
        var map;        
        function codeAddress() {
            geocoder = new google.maps.Geocoder();
            var address = document.getElementById('address').value;
            geocoder.geocode({ 'address': address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {                       

                    for (var component in results[0]['address_components']) {
                        for (var i in results[0]['address_components'][component]['types']) {
                            if (results[0]['address_components'][component]['types'][i] == "administrative_area_level_1") {
                                state = results[0]['address_components'][component]['long_name'];
                                alert(results[0]['address_components'][1]['long_name'] + ' , '  + state);
                            }
                        }
                    }                                           
                } else {
                    alert('Invalid Zipcode');
                }
            });
        }         

    </script>
  </head>
  <body>
    <div id="panel">
      <input id="address" type="textbox" value="Sydney, NSW">
      <input type="button" value="Geocode" onclick="codeAddress()">
    </div>
    <div id="map-canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-05-18T08:52:23.877

我很慷慨地提供了我为我们做这件事的确切模块。它返回一个对象，例如：

```
{ 
  country : { long_name : "someString", short_name : "someStrong" },
  city : { long_name : "someString", short_name : "someString" },
  state : { long_name : "someString", short_name : "someString" }
} 
```

并且可以使用代码调用：`let test = new ZipCodeDeconstructor().deconstruct('20009');`

这是写在`TypeScript`（上那列火车）并用在`node.js`（你应该已经在那列火车上。

如果您还`request-promise`没有，请运行`npm i request-promise --save`并确保您的 TypeScript 配置允许使用`async/await`关键字。

这基本上使用了截至本文编写时的所有“新”内容，因此它应该在未来一段时间内非常有用。

```
let rp = require('request-promise');
enum IGoogleMapResultType {
  COUNTRY = <any>'country',
  LOCALITY = <any>'locality',
  SUBLOCALITY_LEVEL_1 = <any>'sublocality_level_1',
  ADMINISTRATIVE_AREA_LEVEL_1 = <any>'administrative_area_level_1',
    // These may be used later, don't delete them, they're for reference
  POSTAL_CODE = <any>'postal_code',
  NEIGHBORHOOD = <any>'neighborhood',
  POLITICAL = <any>'political',
  ADMINISTRATIVE_AREA_LEVEL_2 = <any>'administrative_area_level_2',
  ADMINISTRATIVE_AREA_LEVEL_3 = <any>'administrative_area_level_3'
}
interface IGoogleMapResult {
  address_components : {
    long_name? : string
    short_name? : string
    types : IGoogleMapResultType[]
  }[],
  formatted_address : string,
  geometry: any,
  place_id: string,
  types: IGoogleMapResultType[]
}
type IGoogleMapResults = any[];
type ZipCodeDeconstructorProperty = {
  long_name: string,
  short_name: string
}
// What we return from this component
export type ZipCodeDeconstructorResponse = {
  city: ZipCodeDeconstructorProperty,
  state: ZipCodeDeconstructorProperty,
  country: ZipCodeDeconstructorProperty
}
export class ZipCodeDeconstructor {
  static apiUrl = "http://maps.googleapis.com/maps/api/geocode/json?address=";
  constructor() {}
  // main entry point, deconstruct a 5 digit zip into city, state, zip into the corresponding properties
  async deconstruct(zip):Promise<ZipCodeDeconstructorResponse> {
    let response:any = await this._makeCall(zip);
    let firstResult = response.results[0];
    let returnObject = {
      city :  this._extractCity(firstResult),
      state : this._extractState(firstResult),
      country : this._extractCountry(firstResult)
    };
    console.log("[Zip Code Deconstructor] returning: ", returnObject);
    return returnObject;
  }
  private _createZipcodeUrl(zip) {
    return ZipCodeDeconstructor.apiUrl + zip + '&sensor=true';
  }
  private async _makeCall(zip) {
    return await rp({uri : this._createZipcodeUrl(zip), json : true });
  }
  private _extractOfTypeFromResult(typesArray:IGoogleMapResultType[], result:IGoogleMapResult) {
    for(let i = 0; i < result.address_components.length; i++) {
      let addressComponentAtIndex = result.address_components[i];
      let type:IGoogleMapResultType = addressComponentAtIndex.types[0];
      if(typesArray.indexOf(type) !== -1) {
        return {
          long_name : addressComponentAtIndex.long_name,
          short_name : addressComponentAtIndex.short_name
        }
      }
    }
  }
  private _extractCity(result:IGoogleMapResult) {
    return this._extractOfTypeFromResult([IGoogleMapResultType.SUBLOCALITY_LEVEL_1, 
      IGoogleMapResultType.LOCALITY], result)
  }
  private _extractState(result:IGoogleMapResult) {
    return this._extractOfTypeFromResult([IGoogleMapResultType.ADMINISTRATIVE_AREA_LEVEL_1], result);
  }
  private _extractCountry(result:IGoogleMapResult) {
    return this._extractOfTypeFromResult([IGoogleMapResultType.COUNTRY], result);
  }
}
// let test = new ZipCodeDeconstructor().deconstruct('20009'); 
```

顶部的接口应该可以帮助您了解返回的内容和应该传入的内容。

# perl - Perl open() 和 grep

> ID：10340686
> 
> 赞同：1
> 
> 时间：2012-04-26T20:07:37.377
> 
> 标签：perl

好的，所以我注意到 perl 中 grep 的一些反直觉行为，具体取决于我打开文件的方式。如果我打开一个只读文件，（<）它可以工作。如果我以读写方式打开它，（+<），它可以工作，但如果我以追加方式打开它，它不会。(+>>)

我确信这可以解决，但我很好奇它为什么会这样工作。任何人都有一个很好的解释？

给定一个`test.txt`文件：

```
a
b
c 
```

和一个`greptest.pl`文件：

```
#!/usr/bin/perl

use strict;
use warnings;

open(RFILE, '<', "test.txt")
    or die "Read failed: $!";
if(grep /b/, <RFILE>) {print "Found when opened read\n";}
    else {print "Not found when opened read\n";}
close RFILE;

open(RWFILE, '+<', "test.txt")
    or die "Write-read failed: $!";
if(grep /b/, <RWFILE>) {print "Found when opened write-read\n";}
    else {print "Not found when opened write-read\n";}
close RWFILE;

open(AFILE, '+>>', "test.txt")
    or die "Append-read failed: $!";
if(grep /b/, <AFILE>) {print "Found when opened append-read\n";}
    else {print "Not found when opened append-read\n";}
close AFILE; 
```

运行它返回以下内容：

```
$ ./greptest.pl 
Found when opened read
Found when opened write-read
Not found when opened append-read 
```

而我原以为它会在所有三个测试中找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:17:04.433

文件句柄将位于附加模式的文件末尾。

# sql-server-2005 - SQL Server 代理作业运行存储过程非常缓慢

> ID：10340692
> 
> 赞同：1
> 
> 时间：2012-04-26T20:08:09.957
> 
> 标签：sql-server-2005, stored-procedures, sql-agent-job

我有一个基本上重建数据透视表的存储过程。它在临时表中构建新数据，然后截断永久表并插入新数据，最后删除临时表。

当我在 Management Studio 中执行存储过程（或直接 T-SQL 代码）时，大约需要一分钟。虽然我知道这不是最有效的流程，但我可以接受。

当我尝试将此任务安排为每 20 分钟左右运行一次时，我的问题就出现了。当我设置一个 SQL Server 代理作业来执行存储过程时，它现在需要将近一个半小时......没错，慢了 90 倍！

我发现了这篇文章：[SQL Server Agent Job Running Slow](https://stackoverflow.com/questions/7084333/sql-server-agent-job-running-slow)，这似乎是一个类似的问题，但无论我在存储过程的开头还是在 SQL Agent Job 中`set nocount on`的命令之前调用它似乎都没有任何影响。`exec`我的查询不使用任何游标，尽管我正在`cross apply`对表值函数（也不使用任何游标）执行操作。

我显然错过了一些东西，但我什至不知道从哪里开始。我认为通过创建存储过程可以避免这些类型的问题。

作为参考，存储的过程如下所示：

```
create table #temp
(
  ID    int,
  data1 float,
  data2 float
)
insert into #temp(ID, data1, data2)
select t.ID, d.data1, d.data2
from tbl1 t
  cross apply dbo.getInterestingData(t.ID, t.param1) d
where d.useMe = 1

truncate table dataPivot

insert into dataPivot(ID, data1, data2)
select ID, data1, data2
from #temp

drop table #temp 
```

# ruby-on-rails - RoR 范围问题

> ID：10340703
> 
> 赞同：0
> 
> 时间：2012-04-26T20:09:14.830
> 
> 标签：ruby-on-rails, activerecord

我有一个用户表。它包含一个字段“user_type”。我将以下范围 stmts 添加到 user.rb 文件中：

```
scope :uemployee, where(:user_type => 'employee')
scope :uclient, where(:user_type => 'client')
scope :ucontractor, where(:user_type => 'contractor') 
```

我创建了一个视图，我希望它列出他的员工。这是我尝试使用的代码：

```
 <% @users.uemployee.each do |user| %> 
```

但是，我得到“nil:NilClass 的未定义方法‘uemployee’”

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:12:13.193

你的`@users`收藏是零

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:16:19.293

看起来你想这样做：

```
<% User.uemployee.each do |user| %> 
```

但这被认为是一种不好的做法。您必须在控制器中准备数据，并且视图只是循环通过它：

```
# in a controller's action
@users = User.uemployee

#in a view
<% @users.uemployee.each do |user| %> 
```

但即使这也不是最好的方法。如果您创建`views/users/_user.html.erb`显示有关特定用户的信息的文件（当前用户将作为简单`user`变量提供，没有`@`），那么您可以简单地编写：

```
# in a view
<%= render @users %>
# remember, @users variable was set in your controller 
```

然后 Rails 将循环遍历`@users`变量“内部”的所有用户并一一显示。

# objective-c - 如何“弹出”到不在堆栈上的视图控制器

> ID：10340706
> 
> 赞同：1
> 
> 时间：2012-04-26T20:09:29.113
> 
> 标签：objective-c, ios, xcode4

我有一个导航控制器（带有 Storyboard 和 ARC 的 XCode4），其中一个 segue 连接到每个单独的 ViewController（其中 7 个）。通常，我点击导航控制器中的一行，将我带到正确的场景。但是，有时我想使用 segues 从场景“A”到场景“C”，然后从“C”到“B”，这还没有通过导航控制器放置在堆栈上。

这是否可能（从场景“C”到场景“B”）？

更新：这是将控制器放入堆栈的代码：

```
EnterDataViewController *edvc = [[EnterDataViewController alloc]init];

NSMutableArray *ma = self.navigationController.viewControllers;
[ma insertObject:edvc atIndex:1];
self.navigationController.viewControllers = ma;
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex: 1] animated:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:17:10.217

将新的视图控制器插入到层次结构顶部的下方，并关闭动画。然后，弹出。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:38:22.987

`UINavigationController's` `viewControllers`堆栈是存储在属性中的数组。使用它来创建一个新的（可变）数组，您可以在其中`insertObject:atIndex:1`将其分配回`UINavigationController.viewControllers`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T17:57:42.023

将新控制器插入 self.navigationController.viewControllers 并不总是按预期工作，因此我建议从数组中获取您需要的控制器，从头开始构建一个新数组，然后将该数组分配给导航控制器。

```
UIViewController *mainScreenController = [[self.navigationController viewControllers]objectAtIndex:0];  
SecondScreenController *secondScreenController = [[SecondScreenController alloc]init];     
NSMutableArray *controllers = [[NSMutableArray alloc]initWithObjects:mainScreenController, secondScreenController, nil];    
[self.navigationController setViewControllers:controllers animated:YES]; 
```

# java - 如何处理从模态窗口 Selenium WebDriver Java 上传文件

> ID：10340709
> 
> 赞同：2
> 
> 时间：2012-04-26T20:09:41.793
> 
> 标签：java, selenium, webdriver

我需要上传文件。步骤是： 1\. 点击哪个校准模态窗口的按钮。（Linux 窗口没有位置栏） 2\. 选择正确的文件并上传。

非常感谢任何帮助。使用 Chrome Firefox 驱动程序和 Java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T12:31:03.873

这已被多次询问[，](https://www.google.com/search?q=webdriver%20upload%20file)并且也在一些 Selenium 常见问题解答中。

```
// assuming driver is a well instantiated WebDriver
WebElement fileInput = driver.findElement(By.xpath("//input[@type='file']"));
fileInput.sendKeys("C:/path/to/file.jpg"); 
```

这个想法是将文件的路径直接发送到您通常单击以获取模式窗口的元素 - 即`<input type='file' />`element.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:50:37.717

我找到了[机器人类的解决方法](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

这是代码：

```
try {
    Robot robot = new Robot();

    robot.delay(3000);
    robot.keyPress(KeyEvent.VK_P);      
    robot.keyRelease(KeyEvent.VK_P);
    robot.keyPress(KeyEvent.VK_ENTER);
    robot.keyRelease(KeyEvent.VK_ENTER);
    } catch (AWTException e) {
    e.printStackTrace();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T08:27:36.237

对于模态窗口，我更喜欢将 autoit 与 selenium 一起使用，autoit 是一个非常轻量级的应用程序，可以创建脚本并编译生成 exe 文件并在 selenium 中运行 exe 文件，

有关详细信息，请参见[此处](http://www.toolsqa.com/selenium-webdriver/autoit-selenium-webdriver/)。

# ios - UIBarButtonItem 图像的颜色/不透明度

> ID：10340713
> 
> 赞同：1
> 
> 时间：2012-04-26T20:09:44.730
> 
> 标签：ios, cocoa-touch, uiimageview, uibutton, uibarbuttonitem

我在工具栏中添加了两个 UIBarButtonItems。

我添加的第一个使用

```
initWithImage:style:target:action: 
```

对于第二个，我创建了一个 UIButton，其中包含一个 UIImageView，其图像设置为与第一个示例中使用的相同。我还使图像视图比按钮略小，以便为标签留出空间。然后我创建了 BarButtonItem

```
initWithCustomView: 
```

我得到了非常不同的图像渲染：

![在此处输入图像描述](../Images/0dc686d866f8b0eab7b4e59b7ed9d486.png)

这里发生了什么，如何让图像在第二个示例中按预期显示？

注意：我实际上以相反的顺序添加了按钮 -​​ 在上图中，第一个按钮使用的是 initWithCustomView：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:33:07.260

根据[initWithImage:style:target:action 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)

> 条形图上显示的图像来自该图像 [...] 源图像中的 alpha 值用于创建图像 - 不透明值被忽略。

因此，图像被用作蒙版。这是您通常在工具栏中看到的行为，但也可以在此处使用。如果您希望在栏上使用图像像素，我想您需要使用自定义视图。

# google-app-engine - 如何提高 Google App Engine 的隐藏“file.Open”配额

> ID：10340717
> 
> 赞同：4
> 
> 时间：2012-04-26T20:09:58.403
> 
> 标签：google-app-engine, mapreduce, blobstore, quota, quotas

具体来说，这个问题是关于如何提高或取消指定配额，而不是如何在现有配额限制内提高效率。

在 GAE 上运行 MapReduce 作业时，我达到了下面列出的配额限制。限制是每天 100GB 的“收到的文件字节数”，据我所知，这是从 Blobstore 收到的文件字节数。增加我的预算对 100Gb/天的配额限制没有影响。我希望完全取消限制，并有能力为我使用的东西付费。

日志中的输出：

```
The API call file.Open() required more quota than is available.
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/base_handler.py", line 68, in post
    self.handle()
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/handlers.py", line 168, in handle
    for entity in input_reader:
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/mapreduce_pipeline.py", line 109, in __iter__
    for binary_record in super(_ReducerReader, self).__iter__():
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/input_readers.py", line 1615, in __iter__
    record = self._reader.read()
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/records.py", line 335, in read
    (chunk, record_type) = self.__try_read_record()
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/records.py", line 292, in __try_read_record
    header = self.__reader.read(HEADER_LENGTH)
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 569, in read
    with open(self._filename, 'r') as f:
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 436, in open
    exclusive_lock=exclusive_lock)
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 269, in __init__
    self._open()
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 393, in _open
    self._make_rpc_call_with_retry('Open', request, response)
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 397, in _make_rpc_call_with_retry
    _make_call(method, request, response)
  File "/base/data/home/apps/s~utest-appgraph/69.358421800203055451/mapreduce/lib/files/file.py", line 243, in _make_call
    rpc.check_success()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 558, in check_success
    self.__rpc.CheckSuccess()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_rpc.py", line 133, in CheckSuccess
    raise self.exception
OverQuotaError: The API call file.Open() required more quota than is available. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:26:48.853

看来您需要直接与 Google 交谈：在[配额](https://developers.google.com/appengine/docs/quotas)页面上有一个请求增加配额的表单链接：http: [//support.google.com/code/bin/request.py ?&contact_type=AppEngineCPURequest](http://support.google.com/code/bin/request.py?&contact_type=AppEngineCPURequest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T12:26:37.543

我也遇到了这个错误。我们正在使用 appengine 的“实验备份”功能。这又会运行一个 map reduce 来将所有 appengine 数据备份到 google-cloud-storage。但是，当前备份失败并出现以下错误：

OverQuotaError：API 调用 file.Open() 需要的配额超过了可用配额。

在配额仪表板中，我们看到：

```
Other Quotas With Warnings
These quotas are only shown when they have warnings
File Bytes Sent 100%    107,374,182,400 of 107,374,182,400  Limited 
```

所以显然我们已经达到了一个隐藏的配额“发送的文件字节”。但它没有记录在任何地方，我们可能永远不会知道我们会击中它......现在我们被困住了

# authentication - Desire2Learn 的 REST API 身份验证中使用的令牌 ID 的大小？

> ID：10340721
> 
> 赞同：1
> 
> 时间：2012-04-26T20:10:15.967
> 
> 标签：authentication, desire2learn

REST API 身份验证方案的文档将用于身份验证的令牌密钥描述为 22 个字符的长度。但是，令牌 ID 有多长——它们也是 22 个字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:29:52.243

从学习套件返回的 ID 也是 22 个字符串。

# arrays - 为 actionscript 中的数组重置/重新排序 KEYS

> ID：10340725
> 
> 赞同：0
> 
> 时间：2012-04-26T20:10:23.190
> 
> 标签：arrays, actionscript, flex4

我正在使用 Flex 我已经创建了一个数组来输入数据网格，这里是一小块。我已经删除了数组的某些元素，现在它在数据网格上的未删除元素之间显示为空格。我只是想重新排序数组的键（不是元素本身），所以它会在数据网格上显示没有空格。

```
 [Bindable]  
        public var initDG:ArrayCollection;
        public function loaderComplete(event: Event):void {
                var fileString:String = event.target.data;
                var dataArray:Array = fileString.split("\n");
                var gridArray:Array = new Array();
                    for(var i:int = 0; i < dataArray.length; i++) {

                        var valueArray:Array = dataArray[i].split(",");
                        gridArray.push({PON:valueArray[0], VER:valueArray[1], DATE:valueArray[2], XML:valueArray[3], 
                              DOC:valueArray[4], SENT:valueArray[5]});

                    }

            var verizonArray:Array = gridArray;

            for(i = 0; i < verizonArray.length; i++) {
                var myPattern:RegExp = /^6006/;   
                var result:Object = myPattern.exec(verizonArray[i]["PON"].toString());
                if(result == null) {
                    delete verizonArray[i];
                }
            }

            // here I need to reorder the keys

            gridArray.shift();
            initDG=new ArrayCollection(verizonArray);

        } 
```

**TL;DR：如何在动作脚本中重置数组的键，看起来像 [0] => 'value'，[3] => 'value'，[6] => 'value' 到 [0] => 'value ', [1] => 'value', [2] => 'value' 不重新排序数组本身**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:19:39.110

如果您不需要保留关键位置编号，您可能会发现它更易于使用：

```
array.splice(itemNumToRemove, numOfElementsToRemoveFromThatPosition) 
```

在您的代码中，它将是：

```
if(result == null) {
     verizonArray.splice(i, 1)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:51:58.233

是的，想通了。在我用 RegExp 过滤数组的地方，我添加了这个：

```
 if(result == null) {
                    delete verizonArray[i];
                } else {
                    countVerizonPons++;
                } 
```

因此我有数组中实际元素的数量，然后我对其进行排序以将所有空元素放在底部：

```
verizonArray.sortOn("DATE"); 
```

然后我将长度设置为实际元素的数量：

```
verizonArray.length = countVerizonPons; 
```

结束

# java - 如何从线程触发 PropertyChange 事件？

> ID：10340727
> 
> 赞同：2
> 
> 时间：2012-04-26T20:10:57.723
> 
> 标签：java, android, multithreading, propertychangelistener

我正在制作一个 android 应用程序，我想`maxDbRecorded`在类的属性`Measure`更改时更新标签。所以我在我的活动中实现了一个 PropertyChangeListener。

```
public class AndroidCalibrationTestActivity extends Activity implements PropertyChangeListener {
   private Recorder recorder;
   private Thread recorderThread;
   private Measure measures;
   private TextView numberOfMaxDecibels;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       numberOfMaxDecibels = (TextView)findViewById(R.id.txtNumberOfMaxDecibels); 

       measures = new Measure();
       measures.addPropertyChangeListener(this);

       recorderThread = new Thread((Runnable) Recorder.getInstance().runRecorder); 
       recorderThread.start();
   }

   public void propertyChange(PropertyChangeEvent event) {
        numberOfMaxDecibels.setText(event.getNewValue() + "");  
   }          
} 
```

现在我想`maxDbRecorded`在我的线程中设置 from 的值。以便 textview numberOfMaxDecibels 更新。

```
public class Measure {
    private double maxDbRecorded;   

    private PropertyChangeSupport pcs = new PropertyChangeSupport(this);

    public Measure() {  
    }

    //Getters and setters       
    public double getMaxDbRecorded() {  
        return maxDbRecorded;
    }
    public void setMaxDbRecorded(double maxDbRecorded) {
            double oldValue = this.maxDbRecorded;
            this.maxDbRecorded = maxDbRecorded;
            //Fires a property change event
            pcs.firePropertyChange("maxDbRecorded", oldValue, maxDbRecorded);           
    }

    //To let classes subscribe for property changed listener
    public void addPropertyChangeListener(PropertyChangeListener listener){
        pcs.addPropertyChangeListener("maxDbRecorded", listener);
    }
} 
```

在类 Recorder 中，我有我设置的线程`maxDbRecorded`，但 PropertyChanged 事件没有被触发。如果我`maxDbRecorded`直接从 Activity 设置它确实有效。

```
public class Recorder {
    protected Measure m;

    private Recorder() {
        m = new Measure();
    }

    public static Recorder getInstance() {
        if(instance == null){
            instance = new Recorder();
        }
        return instance;
    }

    Runnable runRecorder = new Runnable() { 
        public void run() {
             startRecording();  
        }
    };

    public void startRecording() {
        //Here happens some recording stuff
        double maxDB;
        m.setMaxDbRecorded(maxDB);
    }     
} 
```

我还尝试在我的 Activity 中创建一个 Measure 对象并将此实例提供给 Recorder 线程。这给出了一个错误： $CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触及它的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:06:42.777

您应该使用 android 处理程序类通过它向 ui 线程发布您的调用。

检查：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# objective-c - 为什么我的 NSMutableArray 在 Objective-C 中的 if 语句中更改时不会更改其值？

> ID：10340730
> 
> 赞同：0
> 
> 时间：2012-04-26T20:11:08.500
> 
> 标签：objective-c, nsmutablearray, nsarray, boolean

我试图在一个连续运行的函数中创建一个 NSMutableArray ，并且只初始化一次它的值，这样它就不会在重复调用函数时继续初始化值（从而替换更改的值）。我的问题是，当我尝试在 if 语句中初始化值时，数组中的值不会改变，当我期望它打印“值为 1”时，它会继续打印“值为 0”

这是我的相关代码：

```
 @property (nonatomic, strong) NSMutableArray * shapeMarked;
 @synthesize shapeMarked;

 //locationManager is the function that's continuously called

 -(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
 {

 //event count is an integer that continuously increases by one each time the 
 //parent function is called, this if statement is used so that it only happens 
 //once

 if(eventcount == 1){

    for (int i = 0; i < 5; i++){

        BOOL b = YES;

        [shapeMarked addObject:[NSNumber numberWithBool:b]];

        NSLog(@"value is %d", [[shapeMarked objectAtIndex:i] boolValue] );

    }

  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:20:45.197

在某处分配并初始化数组！你是否？

```
self.shapeMarked = [NSMutableArray array]; 
```

例如，在您的 init 方法中应该这样做。没有它，你的 shapeMarked 就为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:30:58.360

你的数组显然不是一个有效的`NSMutableArray`实例——或者换句话说，它只是`nil`.

那是你的代码的问题。

在`nil`对象上调用选择器时，返回值始终是`nil`（对于对象）或`0`（对于标量类型）。调用`objectAtIndex:`将导致返回`nil`. 你期待一个`NSNumber`实例，如前所述，那将是`nil`. 现在您正在调用`boolValue`该`nil`实例，它将返回`0`您期望的标量数据类型。请参阅 Apple 出色的[Objective-C 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW7)。

您很可能忘记`shapeMarked`使用有效`NSMutableArray`实例进行初始化。

# facebook - Facebook Like + Send 按钮坏了？

> ID：10340731
> 
> 赞同：-2
> 
> 时间：2012-04-26T20:11:16.430
> 
> 标签：facebook, facebook-like

在[facebook 文档页面上](http://developers.facebook.com/docs/reference/plugins/like/)，如果您单击默认示例中的“发送”按钮，它会弹出一个新窗口，看起来就像重复的喜欢/发送按钮。

我认为这是因为它在某种程度上被破坏了，无论是那个还是我的浏览器（而我的同事的浏览器被严重破坏）

有没有人遭受同样的命运？有没有人有修复？

旁注 - 在我们的网站上，昨天运行良好，这似乎是一个新问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:33:25.403

有一个错误报告：[Send button opens new tab](http://developers.facebook.com/bugs/177102442412197?browse=search_4f99aff6361807b29945219)。此外，该按钮似乎存在一些问题，您可以在[标记为“发送按钮”的错误中看到](http://developers.facebook.com/bugs?search_view=search&search_ids%5B0%5D=119344624828659&&search_statuses%5B0%5D=open)

我没有投票给你（我很少这样做），我不知道这是什么原因，但最好先研究一下，然后再在这里提问，因为你可以看到很容易找到错误（ s) 在官方的 facebook 窃听报告系统中，如果你在这里搜索，你会发现更多关于这个问题的问题（以及今天的一些问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T17:15:22.293

是的，我发现 Facebook 为组合发送/按钮发布的代码在 2013 年 9 月 27 日之前不起作用。发送按钮会弹出一个空白屏幕，而不是 Facebook 电子邮件对话框。来自这里的代码[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)不起作用。请注意，这适用于 JavaScript 代码，而不是已弃用的旧 IFRAME 代码。

要查看带有图像的完整描述，请查看下面的链接以获取解决方案

[http://metadataconsulting.blogspot.ca/2013/09/facebook-likesend-button-not-working.html](http://metadataconsulting.blogspot.ca/2013/09/facebook-likesend-button-not-working.html)

# perl - Perl：有没有办法将 hashref 用作 for 循环迭代变量？

> ID：10340735
> 
> 赞同：0
> 
> 时间：2012-04-26T20:11:26.880
> 
> 标签：perl, loops

您可以执行以下操作：

```
my $hr = {start=>3, end=>20};
for my $i ($hr->{start}..$hr->{end}){
   ... 
} 
```

但是，如果您不想`$i`而是想要使用和增加`$hr->{start}`值怎么办？以下将不起作用：

```
for $hr->{start} ($hr->{start}..$hr->{end}){
   ... 
} 
```

* * *

### 备择方案：

1.  以下是处理它的一种方法，但是有没有办法将增量与迭代变量一起包含在内？

    ```
    for ($hr->{start}..$hr->{end}){
       ... 
       $hr->{start}++;
    } 
    ```

2.  使用 c-for-loop 的另一种方法：

    ```
    for ( ; $hr->{start} <= $hr->{end} ; $hr->{start}++){
       ... 
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:41:19.477

Perl 风格的`for/foreach VAR (LIST)`构造不会做你想要的。索引变量必须是一个简单的标量。更重要的是，索引变量总是被本地化并为 中的项目起别名，并且它的含义在循环`LIST`之外丢失了。`foreach`

```
my $foo = 42;
for $foo (1..10) {
   ...
}
print $foo;      # 42 
```

但是在 C 风格的`for`循环中，你可以对表达式做任何你想做的事情。

```
$hr = { start => 1 , end => 10 };
for ( ; $hr->{start} <= $hr->{end} ; $hr->{start}++ ) {
    ...
}
print $hr->{start};       # now it is 11 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:42:19.163

循环结束时递增：

```
for (; $hr->{start} <= $hr->{end}; ++$hr->{start}) {
   ... 
} 
```

循环开始时的增量：

```
while ($hr->{start}++ <= $hr->{end}) {
   ... 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:48:53.663

好吧，你总是可以：

```
for ($hr->{start}..$hr->{end}){
  $hr->{start} = $_;
  ...
} 
```

基本上，如果你不在变量前面加上一个“my”，perl 就会在循环变量前面加上一个隐式的“local”。而且由于您无法本地化引用（如果您考虑一下，那将没有任何意义），因此您不能将引用用作迭代器。

# java - 表示球体的 3 维网格

> ID：10340747
> 
> 赞同：0
> 
> 时间：2012-04-26T20:12:23.517
> 
> 标签：java, data-structures

总体目标：给定 3 维空间中的点列表，我需要在给定点半径的情况下围绕该点生成一个球体，然后以编程方式检查给定某个点的两个或多个球体之间是否存在空间。

问题：我无法考虑用数据结构来表示点网格（表示球体的中心）和周围的球体，这些可能并不总是孔数。

示例数据：
A 点：(-3, .25, 4) 半径：1.35
B 点：(5, 6.35, 1) 半径：2
C 点：(1, 0, -1) 半径：0.5

我最初的想法是有一个整数的 3 维数组，其大小是轴的最大值和最小值的绝对值相加除以您想要的最小精度。然后，您将使用转换因子将数组位置（整数）转换为您要查找的点的小数位置。然后我会用一些数据填充数组，以表示球体中心周围存在一个球体。

我正在寻找的是我应该用来表示这个非整数的 3d 网格的数据结构。我觉得我的技术不对。

这是在 Java 中。

非常感谢任何和所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:18:15.963

为什么不只用 3 个坐标 x、y、z（3d 点）和半径来表示它们，就像您列出它们并使用（3 维）距离来评估点是否在球体内一样？还是我错过了这里的用例？这听起来像：“检查给定某个点的两个或多个球体之间是否有空间”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T14:07:43.510

本周早些时候我实际上做了一些非常相似的事情。我所做的是决定两个点允许的最小距离（如果我理解正确，可以通过添加两个球体的半径在这里找到）。使用它，我使用 (0, 0, 0) 处的起始球体创建了一个随机的球体场，然后在远离该位置的随机距离处逐渐添加额外的球体。因为在我的情况下（不确定你是否也需要这个）我也有一个最大距离，我只是移动了一个已经接受的球体的坐标并检查距离是否匹配。

所以，总结一下：

1.  有一个起点
2.  将一个点（在特定范围内）随机放置到您现有的点之一
3.  检查它是否符合您的间距限制
4.  重复 2-3 直到你有足够的球体。

希望这对任何人都有帮助。

# makefile - 尽管构造了适当的包含路径，但在没有 QMake 的情况下构建 Qt 项目时出现“没有此类文件或目录”错误

> ID：10340752
> 
> 赞同：0
> 
> 时间：2012-04-26T20:12:45.597
> 
> 标签：makefile, gnu-make, qmake

我正在尝试使用 Qt 但不使用 QMake 编译一个小型应用程序，但是每当我尝试运行它时，都会收到以下错误消息：

```
g++ -c -g -pg -Wall -Wextra -pipe   -c -o ../../MOCFiles/moc_projectModel.o ../../MOCFiles/moc_projectModel.cpp
In file included from ../../MOCFiles/moc_projectModel.cpp:10:0:
../../MOCFiles/../Src/ProjectStructure/projectModel.h:4:30: fatal error: QAbstractItemModel: No such file or directory
compilation terminated.
make: *** [../../MOCFiles/moc_projectModel.o] Error 1 
```

这似乎表明我没有`$(INCLUDE)`正确构造我的变量，但它如下：

```
INCLUDE   = -I/usr/include/qt4 \
            -I/usr/include/qt4/QtGui \
            -I/usr/include/qt4/QtCore \
            -I/usr/include/qt4/QtXml \
            -I/usr/share/qt4/mkspecs/linux-g++ \
            -I../../Src/ProjectStructure 
```

并且我能够在 QAbstractItemModel 文件中找到该文件`/usr/include/qt4/QtCore/`，该目录是我的包含变量的一部分。这是我第一次编写 GNU Makefile，我不确定我做错了什么。作为参考，整个文件包含在这里：

```
CXX       = g++
CXXFLAGS  = -c -g -pg -Wall -Wextra -pipe
LINK      = g++

LIBS      = -L/usr/lib \
            -L/usr/lib/i386-linux-gnu \
            -lgtest \
            -lQtGui \
            -lQtCore \
            -lQtXml \
            -lpthread

INCLUDE   = -I/usr/include/qt4 \
            -I/usr/include/qt4/QtGui \
            -I/usr/include/qt4/QtCore \
            -I/usr/include/qt4/QtXml \
            -I/usr/share/qt4/mkspecs/linux-g++ \
            -I../../Src/ProjectStructure

OBJECTS = ../Objects/main.o \
          ../Objects/test_projectEntity.o \
          ../Objects/moc_test_projectModel.o \
          ../../Objects/projectEntity.o \
          ../../Objects/projectModel.o \
          ../../MOCFiles/moc_projectModel.o

../../Binaries/tests: $(OBJECTS)
  $(LINK) $^ $(LIBS) -o $@

../Objects/main.o : ../Src/main.cpp
  $(CXX) $(CXXFLAGS) $(INCLUDE) ../Src/main.cpp -o ../Objects/main.o

../Objects/moc_test_projectModel.o : ../MOCFiles/moc_test_projectModel.cpp
  $(CXX) $(CXXFLAGS) $(INCLUDE) ../MOCFiles/moc_test_projectModel.cpp -o ../Objects/moc_test_projectModel.o

../../MOCFiles/moc_test_projectModel.cpp :  ../Src/test_projectModel.cpp
  moc ../Src/test_projectModel.cpp -o ../MOCFiles/moc_test_projectModel.cpp

../Objects/test_projectEntity.o : ../Src/test_projectEntity.cpp
  $(CXX) $(CXXFLAGS) $(INCLUDE) ../Src/test_projectEntity.cpp -o ../Objects/test_projectEntity.o

clean:
  rm -f ../Objects/main.o ../Objects/test_projectEntity.o ../Objects/test_projectModel.o 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:03:21.137

看起来好像您正在尝试构建`../../Binaries/tests`. 先决条件之一是`../../MOCFiles/moc_projectModel.o`，但没有明确的规则来构建它，所以 Make 使用隐式规则并尝试这样做：

```
g++ -c -g -pg -Wall -Wextra -pipe   -c -o ../../MOCFiles/moc_projectModel.o ../../MOCFiles/moc_projectModel.cpp 
```

请注意，没有提到`INCLUDE`那里。所以 g++ 不知道查看 `/usr/include/qt4/QtCore/`. 简单的解决方案是添加一条规则：

```
../../MOCFiles/moc_projectModel.o : ../../MOCFiles/moc_projectModel.cpp
    $(CXX) $(CXXFLAGS) $(INCLUDE) $< -o $@ 
```

请注意，我在那里使用了[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables) `$<`，`$@`以减少冗余和混乱。我们也可以把它变成一个模式规则：

```
../../MOCFiles/%.o : ../../MOCFiles/%.cpp
    $(CXX) $(CXXFLAGS) $(INCLUDE) $< -o $@ 
```

这会处理`moc_projectModel.o`任何其他具有相同模式的东西（源和对象都在 中`MOCFiles/`）。我们可以进行其他改进，但这应该足以让您启动并运行。

# sql - SQL Server - 使用加入仅显示第二个表中的条目

> ID：10340754
> 
> 赞同：2
> 
> 时间：2012-04-26T20:12:53.307
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server

我拥有的数据是：

```
table1:

R_Time      ID   Q1
2012-02-26  14   8
2012-02-27  14   7
2012-02-27  15   8
2012-02-27  16   9
2012-02-27  11   10
2012-02-28  11   6
2012-02-28  14   10
2012-02-28  15   9 
```

和

```
table2:

ID  Supervisor
11  2
14  2
15  3
16  3 
```

我要到期的只是显示 table1 中的 R_Time 和 Q1 条目，其中 table2 主管为 3

我知道我将不得不以某种方式加入，但我不太确定如何去做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:15:02.457

### 描述

您可以使用内部连接来完成此操作。

> **T-SQL INNER JOIN**运算符可用于任何 FROM 子句以组合来自两个表的记录。

### 样本

```
Select tbl1.R_Time, tbl1.Q1 from table1 tbl1
inner join table2 tbl2 on tbl2.Id = tbl1.Id
where tbl2.Supervisor = 3 
```

### 更多信息

*   [T-SQL - 内连接](http://www.devguru.com/technologies/t-sql/7114.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:14:36.420

希望能帮助到你！

```
select t2.time 
from table1 t1 
 inner join table2 t2 
   on t1.Id = t2.Id
where t2.Supervisor = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:15:29.247

是的，您需要进行内部连接：

```
select 
    a.r_time, a.q1
from
    table1 a (nolock)
    inner join table2 b (nolock) on b.id = a.id
where 
    b.supervisor = 3 
```

# c# - SQLite WHERE 子句比较无法返回预期的结果集

> ID：10340759
> 
> 赞同：0
> 
> 时间：2012-04-26T20:13:07.473
> 
> 标签：c#, sqlite, compare, where-clause

我目前正在处理以下代码：

```
 for (double i = 0.00; i < 5; i += 0.01)
        {
            cmd.CommandText = "SELECT " +
            "COUNT(DISTINCT(ActualAFR)) " +
            "FROM tblBaseLog AS tBL " +
            "INNER JOIN tblSettings AS tSET " +
            "ON tBL.RPM = tSET.RPM " +
            "WHERE MAFVoltage = " + i + " AND " +
            "(tBL.AccelPedalPos > tSET.APPTransition OR " + 
            "tBL.CalculatedLoad > tSET.LoadTransition)";

            int trimCount = Convert.ToInt32(cmd.ExecuteScalar().ToString()); 
```

我遇到的问题特定于查询最后一行的 WHERE 子句比较（特别是 tBL.CalculatedLoad > tSET.LoadTransition）。

1.  这个查询从我现有的数据集中返回一个结果；这个结果是正确的，但不是预期的完整数据集。

2.  如果我翻转操作数（从大于到小于），我会得到预期但未经验证的结果（基本上是很多数据点）。

3.  最奇怪的是，如果我以更高的值开始 for 循环（对于 double i = 4.00;...等），我会得到比以前更多的结果。

现在我已经澄清了正在发生的事情，以下是与正在使用的数据库的结构/内容有关的相关信息：

1.  所有的表数据类型都设置为 REAL，除了 RPM，它只是一个普通的 INTEGER。

2.  tBL.AccelPedalPos > tSET.APPTransition 的结果将永远不会返回为真（不要问，此时没关系，是的，我已将其从查询中删除但无济于事）所以它不是一个因素

3.  tSET.LoadTransition 的值几乎总是 1，除了在日志的早期它是 1.1

4.  tBL.Calculated Load 的值在 0.2 和 2 之间变化，有数百次迭代的十进制值大于它应该与之比较的平坦 1.0。

我想念的东西可能非常简单，但是在重写了几十次查询之后，我崩溃了，在这里寻求帮助。

还可能值得注意的是，我的计算机具有“固定”的 AMD TLB 错误处理器之一；但是，我已经在运行 Core 2 Duo 的笔记本电脑上测试了该应用程序的编译版本，结果完全相同。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:40:19.610

浮点值的行为与整数值不同；从 0.00 到 5 的循环永远不会产生`4.0`for i 的值。

您可能想要指定 MAFVoltage 的范围 (> last_value_of_i AND <= current_value_of_i) 或`decimal`用于类似整数的精度。

要验证我正在谈论的问题是在您的情况下发生的情况，请记录该`CommandText`属性第一次`i`大于 4 - 它应该报告类似`WHERE MAFVoltage = 4.0099999999999589`.

# c# - 在将剃刀视图呈现为字符串时修改控制器上下文

> ID：10340760
> 
> 赞同：1
> 
> 时间：2012-04-26T20:13:09.737
> 
> 标签：c#, razor

已多次询问将视图渲染到字符串，但是我的问题有所不同。

有`ViewEngineResult.View`一个方法叫做`Render(ViewContext, TextWriter)`

如果我传入包含我的电子邮件视图的控制器，我的代码可以正常工作，但是如果操作方法源自另一个控制器，那么我需要能够修改 ViewContext 以查看 EmailControllers 视图。

我无法确切地弄清楚该`Render`方法使用什么属性来确定要查看的视图文件夹。本质上，我希望弄清楚这一点，以便我可以告诉它查看电子邮件视图文件夹。

这是我的代码供参考：

```
public static string RenderPartialViewToString(Controller controller, string viewName, object model)
    {
        var oldModel = controller.ViewData.Model;
        controller.ViewData.Model = model;
        try
        {
            using (var sw = new StringWriter())
            {
                var viewResult = ViewEngines.Engines.FindView(controller.ControllerContext, viewName,
                                                                           null);

                var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
                viewResult.View.Render(viewContext, sw);

                controller.ViewData.Model = oldModel;
                return sw.GetStringBuilder().ToString();
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

回顾一下，如果我在 Orders 控制器中传递在`FindView`Orders 视图文件夹中查找我的视图，我需要告诉它在电子邮件视图文件夹中查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:57:45.373

ViewEngine 查看`RouteData`以确定`.cshtml`要加载的文件。特别是`controller`和`action`属性。您可以（并且可能推荐）传递您希望使用的控制器名称，但您可以`Email`在下面的代码中看到我已经对其进行了硬编码。

```
public static string RenderPartialViewToString(Controller controller, string viewName, object model)
{
    var oldModel = controller.ViewData.Model;
    controller.ViewData.Model = model;
    try
    {
        using (var sw = new StringWriter())
        {

            controller.RouteData.Values["controller"] = "Email";

            var viewResult = ViewEngines.Engines.FindView(controller.ControllerContext, viewName, null);

            var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);

            viewResult.View.Render(viewContext, sw);

            controller.ViewData.Model = oldModel;
            return sw.GetStringBuilder().ToString();
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

## 如果你真的想知道更多的东西

Razor 在尝试确定要使用的视图时会查找多个位置。`{0}`这是动作（或传入视图名称）并且`{1}`是控制器。

```
 ViewLocationFormats = new[] { 
            "~/Views/{1}/{0}.cshtml",
            "~/Views/{1}/{0}.vbhtml", 
            "~/Views/Shared/{0}.cshtml", 
            "~/Views/Shared/{0}.vbhtml"
        }; 
```

和这里一样，除了我们也有`{2}`哪个是区域。

```
 AreaViewLocationFormats = new[] {
            "~/Areas/{2}/Views/{1}/{0}.cshtml", 
            "~/Areas/{2}/Views/{1}/{0}.vbhtml",
            "~/Areas/{2}/Views/Shared/{0}.cshtml", 
            "~/Areas/{2}/Views/Shared/{0}.vbhtml" 
        }; 
```

所有这些参数都来自 RouteData （除非通过参数特别覆盖，例如`View("viewname")`。它们特别是`action`,`controller`和`area`。通过修改这些值，您可以更改 MVC 的几种工作方式。包括在选择一个控制器之前确定要使用的控制器。与操作相同和地区。

希望这可以帮助。

# c# - 使用双重分组后如何展平 Linq 查询？

> ID：10340761
> 
> 赞同：6
> 
> 时间：2012-04-26T20:13:18.917
> 
> 标签：c#, linq

假设我有一个代表订单行的类，例如

```
public class Line
{
    public string Code ;
    public string No ; // Invoice Number
    public DateTime Date ;
    public string Product ;
    public decimal Quantity ;
} 
```

和行列表，例如

```
List<Line> myList = new List<Line>();
myList.Add(new Line() { Code = "ABC001", No = "1001" ,Date = new DateTime(2012,4,1) ,  Product = "X", Quantity= 1m});
myList.Add(new Line() { Code = "ABC001", No = "1001" ,Date = new DateTime(2012,4,1) ,  Product = "Y", Quantity= 1m});

myList.Add(new Line() { Code = "ABC002", No = "1002" ,Date = new DateTime(2012,4,2) ,  Product = "X", Quantity= 1m});
myList.Add(new Line() { Code = "ABC002", No = "1002" ,Date = new DateTime(2012,4,2) ,  Product = "Y", Quantity= 1m});
myList.Add(new Line() { Code = "ABC002", No = "1003" ,Date = new DateTime(2012,4,3) ,  Product = "Z", Quantity= 1m});
myList.Add(new Line() { Code = "ABC002", No = "1004" ,Date = new DateTime(2012,4,4) ,  Product = "X", Quantity= 1m});

myList.Add(new Line() { Code = "ABC003", No = "1005" ,Date = new DateTime(2012,4,4) ,  Product = "X", Quantity= 1m});
myList.Add(new Line() { Code = "ABC003", No = "1006" ,Date = new DateTime(2012,4,4) ,  Product = "X", Quantity= 1m});
myList.Add(new Line() { Code = "ABC003", No = "1006" ,Date = new DateTime(2012,4,4) ,  Product = "Y", Quantity= 1m}); 
```

我希望检索客户代码包含多张发票的所有行。为此，我首先按代码、编号和日期分组，然后按客户代码分组，对于有两条或更多记录的任何客户，我选择除第一条记录之外的所有记录。

像这样：

```
var query1 = 
    (from r in myList
        group r by new { r.Code ,  r.No , r.Date } into results
        group results by new { results.Key.Code } into results2 
        where results2.Count() > 1
        select new 
        {   
            results2.Key.Code , 
            Count = results2.Count(), 
            Results = results2.OrderBy(i=>i.Key.Date).Skip(1).ToList() 
          // Skip the first invoice
        } 
     ).ToList(); 
```

query1 现在包含正确的记录，但包含在 IGrouping 中，我无法将结果作为`List<Line>`

我试过 query1.SelectMany(r=>r.Results).ToList();

但这仍然给我留下了 IGrouping ，这就是我卡住的地方。

我可以使用嵌套的 for 循环，如

```
List<Line> output = new List<Line>();
foreach (var r1 in query1)
{
    foreach(var r2 in r1.Results)
        foreach(var r3 in r2)
            output.Add(r3);     
} 
```

但有更好的/Linq 方式吗？

实际输出应该是四行，如

```
// Code    No    Date              Product Quantity 
// ABC002 1003 03/04/2012 00:00:00 Z 1 
// ABC002 1004 04/04/2012 00:00:00 X 1 
// ABC003 1006 04/04/2012 00:00:00 X 1 
// ABC003 1006 04/04/2012 00:00:00 Y 1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T20:58:14.813

你会踢自己：

```
query1.SelectMany(q => q);

ABC002 1003 3/04/2012 12:00:00 AM Z 1 
ABC002 1004 4/04/2012 12:00:00 AM X 1 
ABC003 1006 4/04/2012 12:00:00 AM X 1 
ABC003 1006 4/04/2012 12:00:00 AM Y 1 
```

return from`query1`是一个可枚举的（我删除了你的列表），`IGrouping`并且`IGrouping`它本身就是一个可枚举的，所以我们可以直接将其展平。

见这里： http: [//mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2007/09/28/9836.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2007/09/28/9836.aspx)

**编辑：**记得我还简化了你的代码：

```
var query1 = 
(from r in myList
    group r by new { r.Code ,  r.No , r.Date } into results
    group results by new { results.Key.Code } into results2 
    where results2.Count() > 1
    from result in results2.OrderBy(i=>i.Key.Date).Skip(1)
    select result
 ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T20:59:27.783

这段代码：

```
List<Line> output = new List<Line>(); 
foreach (var r1 in query1) 
  foreach(var r2 in r1.Results)         
    foreach(var r3 in r2)
      output.Add(r3); 
```

与以下内容相同：

```
var q2 = from r1 in query1
         from r2 in r1.Results
         from r3 in r2
         select r3;
var output = q2.ToList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T20:59:19.690

尝试这个：

```
var flattenedLines = from outerGroup in query1
                     from innerGroup in outerGroup.Results
                     from line in innerGroup
                     select line; 
```

或者

```
var flattenedLines = query1
    .SelectMany(outerGroup => outerGroup.Results, (outerGroup, innerGroup) => innerGroup)
    .SelectMany(x => x); 
```

# objective-c - 使用 NSXMLParser 设置 NSString 变量

> ID：10340762
> 
> 赞同：0
> 
> 时间：2012-04-26T20:13:27.647
> 
> 标签：objective-c, cocoa, nsstring, nsxmlparser

我正在使用 NSXMLParser 从在线 XML 文件中获取信息。我的目标是让一个类进行 XML 解析，另一个类来实现变量。以下是我的项目的代码：

Current.h 和 Current.m

```
#import <Foundation/Foundation.h>

@interface Current : NSObject {
    NSString *curTempF;
    IBOutlet NSTextField *textField;
}

@property (nonatomic, copy) NSString *curTempF;

- (void)displayOutlets:(id)sender;

@end 
```

和

```
#import "Current.h"

@implementation Current

@synthesize curTempF;

- (void)awakeFromNib {
    [self displayOutlets:self];
}

- (void)displayOutlets:(id)sender {
    [textField setStringValue:curTempF];
}

@end 
```

XmlParser.h & XmlParser.m

```
#import <Foundation/Foundation.h>

@interface XmlParser : NSObject <NSXMLParserDelegate> {
    NSString *urlString;
    NSURL *url;
    NSMutableString *xmlString;
}

- (IBAction)fetchXML:(id)sender;

@end 
```

和

```
#import "XmlParser.h"
#import "Current.h"

@implementation XmlParser

- (void)awakeFromNib {
    [self fetchXML:self];
}

- (IBAction)fetchXML:(id)sender {
    urlString = @"http://api.wunderground.com/api/***/conditions/q/28173.xml";
    url = [NSURL URLWithString:urlString];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    [parser setDelegate:self];
    [parser parse];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqual:@"temp_f"]) {
        xmlString = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ([elementName isEqual:@"temp_f"]) {        
        Current *cTempF = [[Current alloc] init];
        [cTempF setCurTempF:xmlString];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    [xmlString appendString:string];
}

@end 
```

当我运行程序时，我收到有关“无效参数不满足：aString”的错误。看起来 IBOutlet 的 setStringValue 不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:12:33.193

我怀疑当您使用 初始化 Current 类时`[[Current alloc] init]`，它会尝试使用 curTempF 字符串填充 textField。但是，此时 curTempF 字符串尚未初始化，直到您调用`[cTempF setCurTempF:xmlString]`.

一种方法是不在 Current 类中显示网点：

```
- (void)awakeFromNib {
    //[self displayOutlets:self];
} 
```

然后，在解析器中调用 displayOutlets 函数：

```
if ([elementName isEqual:@"temp_f"]) {        
    Current *cTempF = [[Current alloc] init];
    [cTempF setCurTempF:xmlString];
    [cTempF displayOutlets:cTempF]; 
} 
```

或者，您可以保持 awakeFromNib 代码相同，但在 Current 类中创建一个 initWith 方法，这可能更简洁：

```
- (id) initWithCurTemp:(NSString *)curTemp {
    self = [super init]; 

    if (self) { 
        self.curTempF = curTemp; 
    }

    return self; 
}

- (void)awakeFromNib {
    [self displayOutlets:self];
} 
```

然后，您的解析器代码将如下所示：

```
if ([elementName isEqual:@"temp_f"]) {        
    Current *cTempF = [[Current alloc] initWithCurTemp:xmlString];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:16:14.713

您应该像以前一样在笔尖中创建 Current，而不是在代码中。

至于让解析器（我假设它在同一个 nib 中）与 Current 对话，请在解析器中创建一个指向 Current 的插座，并将该插座连接到 nib 中。

# c# - 序列化/反序列化两个列表后，List.Remove 不会删除任何项目

> ID：10340763
> 
> 赞同：4
> 
> 时间：2012-04-26T20:13:30.197
> 
> 标签：c#, windows-phone-7, serialization

当我的 Windows Phone 7 游戏在游戏过程中被墓碑化时，我会序列化必要的元素，这样当它们返回游戏时，它可以反序列化保存的数据，并且用户可以从中断的地方继续。我有一个问题列表（questionList）和一个板件列表（boardPieces）。当离开我的游戏时，它们都会被序列化/反序列化，这一切似乎都很好。当您回答问题时，该问题将从列表中删除：

```
questionList.Remove(boardPiece.Question); 
```

这工作得很好，直到我墓碑我的游戏并导航回它（在列表被序列化/反序列化之后）。然后我的 questionList.Remove... 无法正常工作。我通过断点检查了数据，并且 questionList 似乎有一个匹配的项目，但试图通过 List.Remove 删除它只是默默地失败并且不会删除该项目。

我找到了一种解决方法，方法是遍历 questionList，搜索匹配的 boardPiece，然后通过索引 (RemoveAt) 将其删除，而不仅仅是使用 Remove。它似乎对性能影响不大，因为我最多只有 16 个问题，但我想知道为什么在我反序列化数据后 Remove 失败，所以我至少学到了一些东西。哈希不匹配还是什么？我不知道... ：（

这是我序列化 questionList 的方式（它对 boardPieces 的工作方式相同）：

```
XmlSerializer questionListSerializer = new XmlSerializer(typeof(QuestionHelper));
writer.WriteStartElement("QuestionList");
writer.WriteAttributeString("Count", questionList.Count.ToString());
foreach (QuestionHelper question in questionList)
    questionListSerializer.Serialize(writer, question);
writer.WriteEndElement(); 
```

以下是它如何被反序列化（同样的想法同样适用于 boardPieces）：

```
XmlSerializer questionListSerializer = new XmlSerializer(typeof(QuestionHelper));
int questionListCount = int.Parse(reader.GetAttribute("Count"));
reader.Read();
for (int i = 0; i < questionListCount; i++)
    questionList.Add(questionListSerializer.Deserialize(reader) as QuestionHelper);
if (questionListCount > 0)
    reader.Read(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:16:52.827

`XmlSerializer`是一个树序列化器；如果在图中两次找到相同的对象，它将被序列化两次。反序列化时，这是**两个**看起来相似的独立对象。由于`Remove`etc 使用相等，默认为引用相等，这可能是问题所在，即对于反序列化的对象，两次出现**不再**是相同的引用。因此没有找到。

选项：

*   除了在声明实际数据时，只序列化 id/key - 而不是对象；反序列化后的修复
*   使用可以支持对象引用的序列化程序（不是`XmlSerializer`）

# asp.net-mvc-3 - 如何显示哪些 cshtml 文件正在构建我的页面？

> ID：10340765
> 
> 赞同：2
> 
> 时间：2012-04-26T20:13:38.333
> 
> 标签：asp.net-mvc-3, debugging, razor, rendering-engine

## 场景

我的团队正在构建一个相当复杂的 MVC3/C# 站点。最近有一些重构，许多视图、部分视图和模板已经移动。当我查看我们的一个页面时，很难判断哪个 cshtml 文件负责页面的哪个部分。我想要一种更快的方法来查看我应该处理哪个文件。

## 为什么这是一个问题

*   我们的表现层文件很多，文件夹结构复杂。
*   一些 cshtml 文件具有相同的名称，但不同的文件路径。
*   我们的路由表同样复杂。
*   我们大量使用了布局、共享视图、部分视图和模板。一个页面可能有超过 10 个构建它的 cshtml 文件。
*   大多数客户端文本来自资源字符串，所以我不能只 Ctrl-F 用于页面上的文本。
*   单步调试调试器并没有为我节省太多时间。

这些东西都不是一个炫耀的东西，但它们使这很耗时。

## 我想要的是

当我（仅）在 localhost 上运行它时，我希望呈现的 HTML 显示如下：

```
<!-- From: ~/shared/_layout.cshtml -->
<html>
<body>
    <!-- From: ~/admin/view.cshtml -->
    <h1>Here comes a list of widgets:</h1>

     <!-- From: ~/widgets/list.cshtml -->
     <ul>
         <!-- From: ~/widgets/view.cshtml -->
         <li>Widget 1</li>
         ...etc. 
```

我愿意接受其他获取所需信息的方式，包括第三方工具。

## 到目前为止的想法

我的想法是调整我们用于`pageBaseType`. 我不确定要覆盖哪种方法，或者如何获取和呈现视图的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:38:12.987

有一些 nuget 包可用于这种调试：

[http://nuget.org/packages/Glimpse.Mvc3](http://nuget.org/packages/Glimpse.Mvc3)

[http://nuget.org/packages/routedebugger](http://nuget.org/packages/routedebugger)

[https://preview.nuget.org/packages/RouteMagic](https://preview.nuget.org/packages/RouteMagic)

# android - 在 ListView 中使用 SeekBar

> ID：10340771
> 
> 赞同：0
> 
> 时间：2012-04-26T20:14:03.320
> 
> 标签：android, android-listview, seekbar

我在列表视图中有一个搜索栏，它被禁用以阻止用户在滚动列表时更改值。如果长时间单击列表项，我希望启用它，允许用户更改它然后再次禁用它。

有什么建议么。

我似乎无法从活动中访问搜索栏，因为它是在 ArrayAdapter 中设置的以显示数据库中的值

我可以触发列表项的单击事件和长单击事件，因为搜索栏当前被禁用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T08:15:44.307

# 解决方案

在 ArrayAdapter 中，我将 enabled 和 focusable 都设置为 false 并添加了 SeekBar 侦听器，将属性设置为 false 允许我使用列表项 onItemClicked 侦听器。在 onItemCLickListener 中，我检索了搜索栏，将属性设置为 true，这意味着它可以向上或向下滑动。然后我在调整后禁用它。下面的代码

## ArrayAdapter 片段

此代码在列表项的创建中，其中包含搜索栏

```
 seekBar.setClickable(false);
    seekBar.setFocusable(false);
    seekBar.setEnabled(false);

    /* attach listener */
    attachProgressUpdatedListener(seekBar, positionOfItemInList); 
```

## AttachProgressUpdatedListener

此方法将侦听器附加到数组适配器类中的搜索栏

```
private void attachProgressUpdatedListener(SeekBar seekBar,
    final int position) {

seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

    public void onStopTrackingTouch(SeekBar seekBar) {
    int progress = seekBar.getProgress();
    int task_id = (Integer) seekBar.getTag();

    TaskHandler taskHandler = new TaskHandler(DBAdapter
        .getDBAdapterInstance(getContext()));

    taskHandler.updateTaskProgress(task_id, progress);

    mList.get(position).setProgress(progress);

    //need to fire an update to the activity
    notifyDataSetChanged();
    seekBar.setEnabled(false);

    }

    public void onStartTrackingTouch(SeekBar seekBar) {
    // empty as onStartTrackingTouch listener not being used in
    // current implementation

    }

    public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {
    // empty as onProgressChanged listener not being used in
    // current implementation

    }
});

} 
```

## OnItemCLickListener

此片段来自包含列表视图的活动。

```
taskListView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
    SeekBar sb = (SeekBar) view.findViewById(R.id.seek);
    sb.setFocusable(true);
    sb.setEnabled(true);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T13:45:50.313

通过将以下属性设置为项目布局文件，我已经克服了这个`seekbar`问题`listview`。然后我有`click`事件`listitem`和`seekbar`工作。

```
 android:focusable="false"
        android:focusableInTouchMode="false"

<SeekBar
        android:id="@+id/playback_icon"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:progress="0"
        android:progressDrawable="@drawable/red_scrubber_progress"
        android:thumb="@drawable/red_scrubber_control"
        android:focusable="false"
        android:focusableInTouchMode="false"/> 
```

# php - MySQL - 仅获取 CVCV 值的最佳方法？

> ID：10340776
> 
> 赞同：3
> 
> 时间：2012-04-26T20:14:32.437
> 
> 标签：php, mysql, pattern-matching

我有一个包含大量单词和字符串的数据库表。（现在它有超过 300K 条目，但它还在增长。）什么是只获得那些符合**模式**的值的最佳方法？假设表格是：

```
apples
oranges
abba
car
real
tipi
riot
tidy 
```

现在如何只检索模式 CVCV (ConsonantVowelConsonantVowel)？还是CVVC、LLLL（字母*4）等？我可以制作一个具有不同模式的列，如下所示：

```
word: real
patterns: LLLL,CVVC,LVVC,LVVL,LVLC,LLVC,LLLC,LVLL,CLLC,... 
```

并使用“SELECT * FROM table WHERE word LIKE $pattern”搜索数据库，但我在想是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:26:51.987

**简历：**

```
SELECT 'cara' REGEXP '[bcdfghjklmnpqrstvwxz][aeiouy][bcdfghjklmnpqrstvwxz][aeiouy]'; 
```

真的

```
SELECT 'abba' REGEXP '[bcdfghjklmnpqrstvwxz][aeiouy][bcdfghjklmnpqrstvwxz][aeiouy]'; 
```

错误的

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T21:41:47.373

如果您只寻找 4 个字母的单词，那么使用正则表达式条件应该相当简单。例如，如果您不关心元音和辅音的顺序，那么它就像这样简单：

```
SELECT * 
FROM yourTable
WHERE yourField REGEXP '^[a-z]{4}$' 
```

这就是说找到一个以 4 个字母 az 开头和结尾的单词。

**********注意**** 这仅适用于使用此模式的小写字母，如果您担心大写字母，您可以这样做：**

 **```
1) LOWER(yourField) REGEXP '^[a-z]{4}$'

OR

2) yourField REGEXP '^[a-zA-Z]{4}$' 
```

* * *

如果您想要与此类似但不完全是我给您的东西，请阅读正则表达式。这是一个很好的入门参考：[http ://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

无论如何，我建议您稍微阅读一下正则表达式，因为它们在许多字符串操作实例中非常强大且相当有用。**

# iphone - 设置工具栏项目

> ID：10340777
> 
> 赞同：0
> 
> 时间：2012-04-26T20:14:32.960
> 
> 标签：iphone

我尝试在 navigationcontrollers 顶视图中设置工具栏项。似乎在子视图中工作......但为什么不在顶视图中......任何想法？我得到了添加按钮......但不是我的自定义按钮。

```
- (void)configureToolbarItems {
UIBarButtonItem *addButtonItem = [[UIBarButtonItem alloc]
                                  initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                                  target:self action:@selector(addNewTaskButtonPressed)];   

//Green button
greenButton=[app makeGreenButton:self];
UIBarButtonItem *greenBarButton = [[UIBarButtonItem alloc] initWithCustomView:greenButton];

UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

// Set our toolbar items    
[self setToolbarItems:[NSArray arrayWithObjects:
                       addButtonItem,flexibleSpace, greenBarButton, nil] animated:YES]; } 
```

这是 makeButton 过程......在其他视图中工作正常：

```
-(UIButton*)makeGreenButton:(UIViewController*)caller {
UIButton *greenButton;
//load the image for yellow button
UIImage *greenButtonImage = [UIImage imageNamed:@"greenButton.png"];    
//create the button and assign the image
greenButton = [UIButton buttonWithType:UIButtonTypeCustom];
[greenButton setImage:greenButtonImage forState:UIControlStateNormal];
greenButton.showsTouchWhenHighlighted=TRUE; 
//set the frame of the button to the size of the image (see note below)
greenButton.frame = CGRectMake(0, 0, greenButtonImage.size.width*2, greenButtonImage.size.height*2);
//Add target
[greenButton addTarget:caller action:@selector(greenButtonReleased:) forControlEvents:UIControlEventTouchUpInside];
return greenButton; } 
```

# database - 如何检测哪个用户点击了链接 MVC3 成员资格

> ID：10340784
> 
> 赞同：1
> 
> 时间：2012-04-26T20:14:47.677
> 
> 标签：database, string, asp.net-mvc-3, lambda

当用户单击链接时，此方法获取用户 ID 和其他数据并将其写入数据库。由于 id 是自动生成的，我似乎无法找到一种方法来跟踪用户 ID 是什么。

我将会员基础与我的基础分开使用。为了找到用户 ID，我试图比较用户名字符串。**我收到此错误：“在执行当前 Web 请求期间生成了未处理的异常。” 还有“无法创建抽象类”。** 有没有更好的方法来比较两个数据库中的两个字符串？或者，还有更好的方法？这是我第一次使用 lambda 表达式。

我尝试使用 Single() 和 First() 而不是 Where()，但我仍然得到同样的错误。

```
[HttpPost]
public ActionResult AddToList(Review review, int id, HttpContextBase context)
    {
        try
        {
            if (ModelState.IsValid)
            {
                //User user = new User();
                //user.UserID = db.Users.Where(c => c.UserName == context.User.Identity.Name);
                User user = new User();
                Movie movie = db.Movies.Find(id);
                review.MovieID = movie.MovieID;

                string username = context.User.Identity.Name;
                user = (User)db.Users.Where(p => p.UserName.Equals(username));

                review.UserID = user.UserID;
                db.Reviews.Add(review);
                db.SaveChanges();
                return RedirectToAction("Index");
             };

        }
        catch (DataException)
        { 
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists see your system administrator.");
        }
        return View(review);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:21:03.597

你的问题很可能是这一行：

```
user = (User)db.Users.Where(p => p.UserName.Equals(username)); 
```

扩展方法返回一个 IEnumerable，而`Where()`不是单个实例，因此您的隐式转换每次都会失败。你要找的是要么`First()`要么`FirstOrDefault()`。 `First()`如果没有匹配，将抛出异常，如果没有`FirstOrDefault()`找到匹配，则返回 null。该行应该是：

```
user = db.Users.First(p => p.UserName.Equals(username)); 
```

你可能有比这更大的问题，但这是你当前错误的原因。

## 编辑

进一步查看您的代码后，您会在操作结果调用中要求一个 HttpContextBase 。你从不使用它，这可能是`Cannot create an abstract class`异常的原因。删除该参数，看看你是否得到任何不同的结果。

# java - 如何从 Java 编辑控制台上的文件？

> ID：10340788
> 
> 赞同：0
> 
> 时间：2012-04-26T20:15:09.450
> 
> 标签：java

我正在尝试从 CLI 编辑文件。我正在执行`nano`命令（我知道该命令将始终可用）；当我执行它时，我可以看到 nano 的输出，但我无法与之交互。如何将用户输入传递给命令？您有更好的主意来轻松地从我的 Java 应用程序中编辑文件吗？

这是我的代码：

```
String command = "nano /tmp/163377867.txt ";
try {
    Process process = Runtime.getRuntime().exec(command);
    InputStream inputStream = process.getInputStream();
    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

    String line;
    while ((line = bufferedReader.readLine()) != null) {
        System.out.println(line);
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:24:33.203

Java 的问题`Runtime.exec`在于它将标准输入和标准输出连接到“管道”，而许多控制台程序需要 TTY 设备。

解决此问题的一种方法是使 Java 程序的[控制终端](http://jonisalonen.com/2012/runtime-exec-with-unix-console-programs/)可用于您执行的程序：

```
Process proc = Runtime.getRuntime().exec(new String[]{
                           "sh", "-c", command+" </dev/tty >/dev/tty"});
proc.waitFor(); // wait for user to finish editing the file 
```

# jsf - 我想要一个丰富的：modalPanel，它不会挡住它后面的窗户

> ID：10340789
> 
> 赞同：1
> 
> 时间：2012-04-26T20:15:14.183
> 
> 标签：jsf, richfaces

我想要一个丰富的：modalPanel，它不会挡住它后面的窗户。

我没有找到任何地方，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:32:22.890

只需将 modal="false" 设置为

```
<rich:popupPanel id="nonModal" modal="false">
...
</rich:popupPanel> 
```

MAG，米洛·范德泽

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:48:17.060

我通过创建样式解决了这个问题：

```
<style>
.noMaskClass .rich-mpnl-mask-div{
  display:none;
}
</style>
<rich:modalPanel  styleClass="noMaskClass" ... > 
```

# asp.net-mvc-3 - 上传图像/文件并将其转换为 mssql 数据库

> ID：10340793
> 
> 赞同：1
> 
> 时间：2012-04-26T20:15:35.210
> 
> 标签：asp.net-mvc-3, image, entity-framework-4.1, sql-server-2008-r2, bytearray

我想将图像/文件保存到 asp.net mvc3 项目中的 sql 数据库中。我发现了一些示例，他们必须将图像保存到数据库中而没有别的。当我想使用控制器中的“创建”方法在我的数据库中添加一个“Inzending”实例时，我还需要将文件放入一个字节数组中。我必须同时将所有信息插入到我的数据库中，因为没有字段可能为空。我希望有人可以帮助我，我刚从学校开始，这是我必须解决的第一个真正的大问题（我觉得很难解决）。我已经写过的一些代码：

控制器：

```
[HttpPost]
    public ActionResult Create(INZENDING inzending)
    {

        string user = User.Identity.Name;
        var users = db.aspnet_Users.Single(p => p.UserName == user).UserId;
        inzending.Userid = users;

        int id = db.INZENDINGs.Count() + 1;
        inzending.InzendingNr = id;
        if (ModelState.IsValid)
        {

            db.INZENDINGs.Add(inzending);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
        ViewBag.ErfgoedNr = new SelectList(db.ERFGOEDFICHEs, "ErfgoedNr", "Naam", inzending.ErfgoedNr);
        ViewBag.Aard = new SelectList(db.INPUT_AARD, "Aard", "Aard", inzending.Aard);
        ViewBag.Type = new SelectList(db.INPUTTYPEs, "type", "type", inzending.Type);
        ViewBag.Status = new SelectList(db.STATUS, "Waarde", "Waarde", inzending.Status);
        return View(inzending);
    } 
```

看法 ：

```
 @model Erfgoed.Models.INZENDING

 @{
ViewBag.Title = "Create";
 }

<h2>Create</h2>

  <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>INZENDING</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Titel)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Titel)
        @Html.ValidationMessageFor(model => model.Titel)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Auteur)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Auteur)
        @Html.ValidationMessageFor(model => model.Auteur)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Datum)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Datum)
        @Html.ValidationMessageFor(model => model.Datum)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.bestandsgrootte)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.bestandsgrootte)
        @Html.ValidationMessageFor(model => model.bestandsgrootte)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Type, "INPUTTYPE")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Type", String.Empty)
        @Html.ValidationMessageFor(model => model.Type)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Aard, "INPUT_AARD")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Aard", String.Empty)
        @Html.ValidationMessageFor(model => model.Aard)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ErfgoedNr, "ERFGOEDFICHE")
    </div>
    <div class="editor-field">
        @Html.DropDownList("ErfgoedNr", String.Empty)
        @Html.ValidationMessageFor(model => model.ErfgoedNr)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.bestand, "Bestand");
     </div>

</fieldset>

 }
 <div>
     @Html.ActionLink("Back to List", "Index")
 </div> 
```

模型：

```
namespace Erfgoed.Models
{
using System;
using System.Collections.Generic;

public partial class INZENDING
{
    public int InzendingNr { get; set; }
    public string Titel { get; set; }
    public string Auteur { get; set; }
    public System.DateTime Datum { get; set; }
    public string bestandsgrootte { get; set; }
    public string Type { get; set; }
    public string Aard { get; set; }
    public byte[] bestand { get; set; }
    public System.Guid Userid { get; set; }
    public int ErfgoedNr { get; set; }
    public string Status { get; set; }

    public virtual aspnet_Membership aspnet_Membership { get; set; }
    public virtual ERFGOEDFICHE ERFGOEDFICHE { get; set; }
    public virtual INPUT_AARD INPUT_AARD { get; set; }
    public virtual INPUTTYPE INPUTTYPE { get; set; }
    public virtual STATUS STATUS1 { get; set; }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:04:20.793

```
 [HttpPost]
    public ActionResult Create(HttpPostedFileBase file, FormCollection collection)
    {
        var attachment = new Attachment();
        if(TryUpdateModel(attachment))
        {
            long length =
                file.InputStream.Length;
            attachment.Data = new byte[length];
            file.InputStream.Read(attachment.Data, 0, (int)length);
            attachmentRepository.Add(attachment);
            attachmentRepository.Save();

            return RedirectToAction("Index");
        }

        return null;
    } 
```

这是我在 ms sql 数据库中保存文件的方式。对不起，如果我错误地理解了你的问题

# java - 如何在 Eclipse 的默认代码编辑器中添加监听器？

> ID：10340798
> 
> 赞同：2
> 
> 时间：2012-04-26T20:16:08.617
> 
> 标签：java, eclipse, eclipse-plugin

我想在 Eclipse 的默认代码编辑器中添加一个侦听器。每当打开或关闭新的代码文件时都应该触发它。有没有类似的东西？我做了几个小时的谷歌搜索，但可以找到一个可行的解决方案。

我特别关注默认的 Java 代码编辑器。但是一旦我知道如何连接到这样的编辑器，添加其他编辑器应该不是什么大问题。到目前为止，我遇到的主要问题是，我不知道应该如何处理我可以获得的 IEditorDescriptor。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T02:19:59.363

您可以使用 PartService 注册 IPartListener2，例如：

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getPartService().addPartListener(aListener) 
```

还有其他注册 IPartListener 的方法，例如，如果您有对`IWorkbenchPage`.

当编辑器打开或关闭时，部件侦听器会收到通知。对于`IPartListener2`，您将获得一个`IWorkbenchPartReference`可用于检查所涉及的编辑器类型的工具。例如，要检测标准 Java 编辑器，您可以检查 ID `org.eclipse.jdt.ui.CompilationUnitEditor`。

# jboss - 有谁知道我如何在 JBOSS 7.1 小服务程序中直接使用 sun.awt 命名空间下的类？

> ID：10340799
> 
> 赞同：0
> 
> 时间：2012-04-26T20:16:10.860
> 
> 标签：jboss, noclassdeffounderror

我们有一个客户创建了一个 serverlet，要在 Windows 7 64 位的 JBOSS 7.1 中托管，并且该 serverlet 使用我们开发的 jar 文件中的 java 类。我们的一个类使用了 sun.awt.DisplayChangedListener 接口。问题是我们在调用servelet 时从使用DisplayChangedListener 的类中得到NoClassDefFoundError 异常，而DisplayChangedListener 是根本原因。与 DisplayChangedListener 所在的同一个 rt.jar 文件中的许多其他类没有问题。我使用进程资源管理器查看 JBOSS 进程加载的 jar 文件，那里只有一个 rt.jar 文件。如果我直接使用 java 运行相同的代码，我没有问题。如果我将 rt.jar 文件的副本放在 JBOSS 中已部署的 serverlet 应用程序的本地存储库中，也没有问题。我知道阳光下的课程。awt 命名空间不应该由开发人员在内部使用，而且 JBOSS 类加载器似乎加强了对其使用的限制。有没有什么办法可以让它在没有 rt.jar 的本地副本并且不放弃使用 DisplayChangedListener 接口的情况下工作（例如通过配置文件中的一些设置）？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:20:09.440

我推荐的步骤是：

1.  创建一个新模块
2.  添加以下依赖项（对您需要的包进行编辑）

```
    ...
       <依赖项>
       <系统出口=“真”>
         <路径>
           <path name="com/sun"/>
           <path name="com/sun/net/ssl/internal/ssl"/>
         </路径>
       </系统>
       <模块名称="javax.api"/>
       <module name="org.apache.log4j"/>
       <module name="sun.jdk" export="true"/>
     </依赖>

```

1.  使您的应用程序依赖于模块。

# html - 如何在标签中包含 jsp 代码？查看示例

> ID：10340805
> 
> 赞同：1
> 
> 时间：2012-04-26T20:16:27.160
> 
> 标签：html, jsp, tags, liferay

就像话题说的那样；如何在标签中包含普通的jsp代码？（在我的例子中是 liferay 标签，但它也可以是 html-tags）

例子：

```
<liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
extended="<% if (noService==false) {
                  out.print("false");
                  }
               %>">
Test panel
</liferay-ui:panel> 
```

在示例中，我只想插入“false”，因此表达式如下所示：

```
<liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
extended="false">
Test panel
</liferay-ui:panel> 
```

这给了我一个 jasperException.. 我已经习惯了 PHP，这种代码包含是日常的肉。

有人可以指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:49:31.020

```
<liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
    extended="${noService}">
    Test panel
</liferay-ui:panel> 
```

`noService`必须在请求中设置，例如：

爪哇：

```
...

    request.setAttribute("noService", false);

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:41:49.947

您可以拥有（我正在使用 EL，因为它们更干净）：

1.  如果变量 noService 是布尔值：

    ```
    <c:set var="isExtended"><%=noService ? "true" : "false" %></c:set>;

    <liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
            extended="${isExtended}">
        Test panel
    </liferay-ui:panel> 
    ```

2.  如果变量 noService 是一个字符串：

    ```
    <c:set var="isExtended"><%="false".equals(noService) ? "false" : "true" %></c:set>

    <liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
            extended="${isExtended}">
        Test panel
    </liferay-ui:panel> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T06:46:03.550

你也可以这样做。

```
<liferay-ui:panel id="panel-c4" title="Service Bulletins" collapsible="true"
extended="<%=String.valueOf(noService)%>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:42:44.003

您需要使用 Bean
阅读以下内容：
[http ://www.exampledepot.com/egs/javax.servlet.jsp/usebean.jsp.html](http://www.exampledepot.com/egs/javax.servlet.jsp/usebean.jsp.html)

# c++ - 运行时错误：程序已停止响应

> ID：10340808
> 
> 赞同：0
> 
> 时间：2012-04-26T20:16:31.830
> 
> 标签：c++, iostream, runtime-error

我的程序是根据邻居拥有的资源来计算资源的价格。

它编译，但在运行时，它中断并说程序已停止响应。

任何帮助是极大的赞赏！

```
#include <iostream>
#include <fstream>

using namespace std;

class Resource{
    string resName;
    int amount;
    int price;
    public:
        void set_values(string resName, int amount, int price){resName=resName; amount=amount; price=price;};
        string get_name(){return resName;};
        int get_amount(){return amount;};
        int get_price(){return price;}; 
};

class State{
    string stName;
    Resource resources[5];
    public:
        void set_values(string stName){
            stName=stName;
            Resource r; 
            r.set_values(" ", 0, 0);
            for (int i=0; i<5; i++){
                resources[i] = r;
            }
        };
        string get_name(){return stName;};
        void addResource(string name, int amount, int price){
            Resource r;
            r.set_values(name, amount, price);
            for (int i=0; i<5; i++){
                if(resources[i].get_name() == " "){
                    resources[i] = r;
                }
            }
        };
        Resource get_resource(string resource){
            for(int i=0; i<5; i++){
                if (resources[i].get_name() == resource){
                    return resources[i];
                }
            }
        };
        bool checkForResource(string resource){
            for(int i=0; i<5; i++){
                if (resources[i].get_name() == resource){
                    return true;
                }
            }
        }

};

class Area{
    State allStates[10][10];
    public:
        void initialize(){
            for (int i=0; i<10; i++){
                for (int j=0; j<10; j++){
                    allStates[i][j].set_values(" ");    
                }
            }   
        };
        void addState(string stateName){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == " ")
                        allStates[row][col].set_values(stateName);
                }   
            }   
        };
        State get_state(string name){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == name)
                        return allStates[row][col];
                }   
            }
        };
        void deleteState(string name){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == name)
                        allStates[row][col].set_values(" ");
                }   
            }
        };
        void moveRowsSouth(){
            for(int z=0; z<10; z++){
                for(int y=10; y>=1; y--){
                    allStates[y][z] = allStates[y-1][z];
                }
                allStates[0][z].set_values(" ");
            }
        };
        void moveColsEast(){
            for(int z=0; z<10; z++){
                for(int y=10; y>=1; y--){
                    allStates[z][y] = allStates[z][y-1];
                }
                allStates[z][0].set_values(" ");
            }
        };
        void addNeighbor(string s1, string s2, string direction){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == s1)
                        if (direction == "North"){
                            if (row-1 < 0){
                                moveRowsSouth();
                            }
                            else {
                                if (allStates[row-1][col].get_name() == " "){
                                    allStates[row-1][col] = get_state(s2);
                                    deleteState(s2);
                                }
                                else
                                    cout << "Unable to add this neighbor. North is occupied.";
                            }
                        }
                        else if (direction == "South"){
                            if (allStates[row+1][col].get_name() == " "){
                                allStates[row+1][col] = get_state(s2);
                                deleteState(s2);
                            }
                            else
                                cout << "Unable to add this neighbor. South is occupied.";

                        }
                        else if (direction == "East"){
                            if (allStates[row][col+1].get_name() == " "){
                                allStates[row][col+1] = get_state(s2);
                                deleteState(s2);
                            }
                            else
                                cout << "Unable to add this neighbor. East is occupied.";
                        }
                        else if (direction == "West"){
                            if (col-1 < 0){
                                moveColsEast();
                            }
                            else {
                                if (allStates[row][col-1].get_name() == " "){
                                    allStates[row][col-1] = get_state(s2);
                                    deleteState(s2);
                                }
                                else
                                    cout << "Unable to add this neighbor. West is occupied.";
                            }
                        }
                }   
            }
        };
        State getNeighborN(string s1){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == s1)
                        return allStates[row-1][col];
                }   
            }
        };
        State getNeighborS(string s1){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == s1)
                        return allStates[row+1][col];
                }   
            }
        };
        State getNeighborE(string s1){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == s1)
                        return allStates[row][col+1];
                }   
            }
        };
        State getNeighborW(string s1){
            for (int row=0; row<10; row++){
                for (int col=0; col<10; col++){
                    if (allStates[row][col].get_name() == s1)
                        return allStates[row][col-1];
                }   
            }
        };  
};

int main()
{
    Area a;
    a.initialize();
    ifstream infile;
    string command;
    infile.open ("proj2.txt", ifstream::in);
    while(!infile.eof()){
        infile >> command;
        if (command == "addState"){
            string stateName;
            infile >> stateName;
            a.addState(stateName);
        }
        else if (command == "addNeighbor"){
            string state1;
            string state2;
            string direction;
            infile >> state1;
            infile >> state2;
            infile >> direction;
            a.addNeighbor(state1, state2, direction);
        }
        else if (command == "addResource"){
            string state;
            string name;
            int amount;
            int price;
            infile >> state;
            infile >> name;
            infile >> amount;
            infile >> price;
            a.get_state(state).addResource(name, amount, price);
        }
        else if (command == "getPrice"){
            string state;
            string resource;
            int amount;
            infile >> state;
            infile >> resource;
            infile >> amount;
            State N = a.getNeighborN(state);
            State S = a.getNeighborS(state);
            State E = a.getNeighborE(state);
            State W = a.getNeighborW(state);
            int countOfNeigh = 0;
            bool stateHas = false;
            if (N.checkForResource(resource) == true) {
                countOfNeigh++;
            }
            if (S.checkForResource(resource) == true) {
                countOfNeigh++;
            }
            if (E.checkForResource(resource) == true) {
                countOfNeigh++;
            }
            if (W.checkForResource(resource) == true) {
                countOfNeigh++;
            }
            if (a.get_state(state).checkForResource(resource) == true) {
                stateHas = true;
            }
            int price = 0;
            if ((stateHas = false && countOfNeigh == 1) ||
                 (stateHas = true && countOfNeigh == 0)){
                price = a.get_state(state).get_resource(resource).get_price();
                price = price+(price*.25);
            }
            else if (stateHas = true && (countOfNeigh == 2 || countOfNeigh == 3)){
                price = a.get_state(state).get_resource(resource).get_price();
            }
            else if (stateHas = true && countOfNeigh == 4){
                price = a.get_state(state).get_resource(resource).get_price();
                price = price-(price*.1);
            }
            else if (stateHas = false && countOfNeigh > 1){
                price = a.get_state(state).get_resource(resource).get_price();
                price = price+(price*.1);
            }
            cout << "The price for " << amount << " units of " << resource << " is " << price << ".";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:19:33.623

您没有检查文件打开是否成功 - [http://www.cplusplus.com/reference/iostream/ifstream/open/](http://www.cplusplus.com/reference/iostream/ifstream/open/)

如果是这样，您的程序将进入无限循环。

也没有其他类型的错误检查。在处理读取文件时，尤其是您希望以某种方式格式化的数据时，这是一条通往灾难的捷径。

# c# - 让 Caliburn.Micro 将我的视图和虚拟机与 Windsor 绑定在一个单独的程序集中

> ID：10340809
> 
> 赞同：4
> 
> 时间：2012-04-26T20:16:36.837
> 
> 标签：c#, wpf, mvvm, castle-windsor, caliburn.micro

我在这里使用 Caliburn.Micro 引导程序：

[https://gist.github.com/1127914](https://gist.github.com/1127914)

如果我将所有视图和视图模型与引导程序保持在同一个项目中，那么一切正常。

但是我想将 Views 和 ViewModels 文件夹推送到另一个程序集/项目，我这样做了，更改命名空间，更新引导程序以找到该视图模型。现在，当我运行时，我得到了关于

“找不到支持服务 MVVMBook.ViewModules.ViewModels.MainViewModel 的组件”

在引导程序的这一部分：

```
return string.IsNullOrWhiteSpace(key)
               ? _container.Resolve(service)
               : _container.Resolve(key, service); 
```

显然它无法连接 ViewModel，即使 VM 被设置为 Bootstrapper 的通用参数：

```
 public class CastleBootstrapper : Bootstrapper<MainViewModel> 
```

我使用的命名约定是一个名为 Views 的文件夹和一个名为 ViewModels 的文件夹，文件是 MainView.xaml 和 MainViewModel.cs

我在哪里可以告诉它在这个程序集中查看？

当视图和视图模型位于单独的程序集中但未解决问题时，建议将此部分添加到引导程序中：

```
// needed if views and viewmodels are in a seperate assembly
  protected override IEnumerable<Assembly> SelectAssemblies()
  {
     return new[]
               {
                  Assembly.GetExecutingAssembly()
               };
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T20:45:06.013

未找到您的 ViewModel，因为它没有注册。引导程序附带的 ApplicationContainer 类有一个 RegisterViewModels 方法，如下所示：

```
private void RegisterViewModels()
{
    Register(AllTypes.FromAssembly(GetType().Assembly)
                    .Where(x => x.Name.EndsWith("ViewModel"))
                    .Configure(x => x.LifeStyle.Is(LifestyleType.Transient)));
} 
```

这只会在 ApplicationContainer 所在的程序集中注册 ViewModel。

我想您将这些类粘贴到您的项目中，以便您可以修改它们。如果是这种情况，您可以修改应用程序容器 RegisterViewModels 或修改 CastleBootstrapper 并覆盖 Configure() 方法，如下所示：

```
protected override void Configure()
{
     _container = new ApplicationContainer();
     _container.AddFacility<TypedFactoryFacility>();
     _container.Register(AllTypes.FromAssembly(typeof(MainViewModel).Assembly)
         .Where(x => x.Name.EndsWith("ViewModel") || x.Name.EndsWith("View"))
         .Configure(x => x.LifeStyle.Is(LifestyleType.Transient)));
} 
```

以上将注册所有视图模型和视图。要使 Caliburn 正确定位视图，请更新 SelectAssemblies() 方法：

```
protected override IEnumerable<Assembly> SelectAssemblies()
{
   return new[]
   {
       Assembly.GetExecutingAssembly(),
       typeof(MainViewModel).Assembly
   };
} 
```

有关 Castle.Windsor 的更多信息，请访问 [http://stw.castleproject.org/Windsor.MainPage.ashx](http://stw.castleproject.org/Windsor.MainPage.ashx)

# sql - Perl SQL 文件写入延迟

> ID：10340810
> 
> 赞同：0
> 
> 时间：2012-04-26T20:16:38.553
> 
> 标签：sql, perl, fetch

这是从 SQL 获取数据的简单 perl 脚本。读取数据并写入文件 OUTFILE，每 10000 行在屏幕上打印数据。

我很好奇的一件事是，在屏幕上打印数据非常快（在 30 秒内）终止，但是，在文件上获取和写入数据的速度非常慢（30 分钟后）。

数据量不大。输出文件大小小于 100Mbyte。

```
while ( my ($a,$b) = $curSqlEid->fetchrow_array() ) 
{
    printf OUTFILE ("%s,%d\n", $a,$b);
    $counter ++;
    if($counter % 10000 == 0){
        printf ("%s,%d\n", $a,$b);
    }
}  
$curSqlEid->finish();
$dbh->disconnect();
close(OUTFILE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:57:03.400

你正在遭受缓冲。

STDERR 以外的句柄默认情况下会被缓冲，并且大多数句柄都使用块缓冲。这意味着 Perl 将等到有 8KB* 的数据要写入，然后再向系统发送任何内容。

STDOUT 是特殊的。当连接到终端时（并且仅在那时），它使用不同类型的缓冲：行缓冲。使用行缓冲时，每次在要写入的数据中遇到换行符时都会刷新数据。

您可以通过运行看到这一点

```
$ perl -e'print "abc"; print "def"; sleep 5; print "\n"; sleep 5;'
[ 5 seconds pass ]
abcdef
[ 5 seconds pass ]

$ perl -e'print "abc"; print "def"; sleep 5; print "\n"; sleep 5;' | cat
[ 10 seconds pass ]
abcdef 
```

解决方案是关闭缓冲。

```
use IO::Handle qw( );  # Not needed on Perl 5.14 or later
OUTFILE->autoflush(1); 
```

* — 8KB 是默认值。它可以在[编译 Perl 时进行配置](http://p3rl.org/perl5140delta#Configuration-and-Compilation)。在 5.14 之前，它曾经是不可配置的 4KB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:25:52.920

I think you are seeing the output file size as 0 while the script is running and displaying on the console. Do not go by that. The file size will show up only once the script has finished. This is due to output buffering.

Anyways, the delay cannot be as large as 30 min. Once the script is done, you should see the output file data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T05:58:00.150

我尝试了各种方法，但最终的结论是 python 和 perl 与 DB 的处理数据流基本不同。看起来在 perl 中，可以在从 DB 传输数据的同时逐行处理数据。但是，在 Python 中，它需要等到从服务器下载整个数据才能处理它。

# nhibernate - Web 服务 nHibernate 配置问题

> ID：10340815
> 
> 赞同：0
> 
> 时间：2012-04-26T20:16:52.193
> 
> 标签：nhibernate, service, configuration, web

我有一个 C# .Net Web 服务。我正在尝试使用 nHibernate 访问我的数据库。我还有一个使用 nHibernate 访问数据库的 C# .Net Web 应用程序。该网络应用程序运行良好。但是，Web 服务没有。这是我的错误信息

```
The ProxyFactoryFactory was not configured.Initialize 'proxyfactory.factory_class' property of the session-factory configuration section with one of the available NHibernate.ByteCode providers.
Example:
<property name='proxyfactory.factory_class'>NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu</property>
Example:
<property name='proxyfactory.factory_class'>NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:02:37.450

两个应用程序的 hibernate.cfg.xml 文件是否相同？似乎服务配置文件缺少错误消息中提到的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:33:46.133

我在另一个 Stackoverflow 帖子中找到了答案。我的错，我没有保存链接。但是，答案是添加对 NHibernate.ByteCode.Castle 的引用。我会尝试找到教育我的帖子

# php - MOD_REWRITE 但不在子目录中

> ID：10340817
> 
> 赞同：0
> 
> 时间：2012-04-26T20:17:00.097
> 
> 标签：php, .htaccess, mod-rewrite

我有以下 HTACCESS 代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase   /

#RewriteCond %{REQUEST_URI} !(/cms/|/js/|/mobile/)* [NC]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /page.php [L] 
```

就目前而言，它可以在站点根目录中按我的需要工作，但访问管理页面 ( `/cms/`)，我可以通过 PhpConsole 告诉它仍在访问 page.php。我认为这是因为管理员由查询字符串控制：URI 看起来像`/cms/?view=pages&action=edit&id=4`

如果我取消注释第一个条件，则不再出现此问题，但我的前端返回不存在的文件的 404，而不是重定向到 page.php

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:23:59.773

用这个改变你的代码：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^(cms|js|mobile)(/.*|)$)^.*$ page.php [L,NC] 
```

# php - 在 CakePHP 应用程序中没有获得关联所需的所有数据

> ID：10340824
> 
> 赞同：1
> 
> 时间：2012-04-26T20:17:49.200
> 
> 标签：php, cakephp

我在 CakePHP 中构建了一个应用程序，用户可以在其中与其他用户成为朋友。用户有个人资料，并且友谊在朋友表中的用户 ID 之间链接（模型进一步向下）

在我的 FriendsController 中，我传递了一个用户名，然后使用以下方法为用户获取好友：**请注意，此方法在我的用户模型中，调用方式如下：`$this->User->getFriends($username);`在我的 FriendsController 中！**

```
function getFriends($username) {
        //Start by getting User's ID
        $user = $this->find(
            'first',
            array(
                'conditions' => array(
                    'User.username' => $username
                )
            )
        );

        $profileAndFriends = $this->Profile->find(
            'first',  //Because User hasOne Profile, so we'll fetch this one profile.
            array(
                'conditions' => array(
                    'Profile.user_id' => $user['User']['id']
                ),
                'contain' => array(
                    'UserFrom' => array(
                        'conditions' => array(
                            'status' => 1
                        )
                    ),
                    'UserTo' => array(
                        'conditions' => array(
                            'status' => 1
                        )
                    )
                )             
            )
        );
        return $profileAndFriends;
    } 
```

我的用户模型：

类用户扩展 AppModel { public $name = 'User';

```
public $hasOne = 'Profile';

public $hasMany = array(
    'UserFrom'=>array(
        'className'=>'Friend',
        'foreignKey'=>'user_from'
    ),
    'UserTo'=>array(
        'className'=>'Friend',
        'foreignKey'=>'user_to'
    )
); 
```

}

和我的个人资料模型：

```
class Profile extends AppModel
{
    public $name = 'Profile';

    public $belongsTo = 'User';
} 
```

和朋友模型：

```
class Friend extends AppModel
{
    var $name = 'Friend';

    public $belongsTo = array(
        'UserFrom'=>array(
            'className'=>'User',
            'foreignKey'=>'user_from'
        ),
        'UserTo'=>array(
            'className'=>'User',
            'foreignKey'=>'user_to'
        )
    );
} 
```

所以在我看来，我有：

```
<?php foreach ($friends as $friend) : ?>

        <?php echo $friend['UserTo']['firstname']; ?>

    <?php endforeach; ?> 
```

但是它无法理解名字部分！所以...

如果我在视图中对 $friend 进行调试，我会得到：

```
array(
    'Friend' => array(
        'id' => '1',
        'user_from' => '6',
        'user_to' => '8',
        'created' => '0000-00-00 00:00:00',
        'status' => '1'
    ),
    'UserFrom' => array(
        'password' => '*****',
        'id' => '6',
        'username' => 'driz',
        'email' => 'cameron@driz.co.uk',
        'status' => '1',
        'code' => '6d446abefc2f1214e561da6f93470621',
        'lastlogin' => '2012-04-23 15:22:04',
        'created' => '0000-00-00 00:00:00'
    ),
    'UserTo' => array(
        'password' => '*****',
        'id' => '8',
        'username' => 'testperson',
        'email' => 'test@testperson.com',
        'status' => '1',
        'code' => '7a794859b3a16dfc005dd7f80b9ac030',
        'lastlogin' => '2012-03-18 09:28:24',
        'created' => '0000-00-00 00:00:00'
    )
) 
```

所以这显然是链接用户的问题，我还需要包含配置文件......但是我该怎么做，因为如果我在 UserTo 和 UserFrom 中放置一个包含它会抛出一个错误，说它们没有关联......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:54:59.647

```
class User extends AppModel {
    public $name = 'User';

    public $hasOne = 'Profile';
    public $belongsTo = array(
      'Friend'=>array(
        'foreignKey' => 'user_to'
      )
    );
}

class Profile extends AppModel {
    public $name = 'Profile';
    public $belongsTo = 'User';
}

class Friend extends AppModel {
    public $name = 'Friend';
    public $hasOne = 'User';
} 
```

现在可以通过以下方式获取用户朋友：

```
$this->Friend->find("all", array(
  'conditions'=>array(
    'Friend.user_from'=>$user_id,
  )
  'contain'=>array(
    'User'=>array(
      'contain'=>'Profile'
    )
  )
)); 
```

# ios - 是否可以从 UIWebView 页面中下载 appstore 应用程序？

> ID：10340829
> 
> 赞同：0
> 
> 时间：2012-04-26T20:17:56.147
> 
> 标签：ios, uiwebview

我尝试将以下链接放入 UIWebView 加载的一些 html

```
<A href="itms-apps://itunes.apple.com/us/app/angry-birds/id343200656?mt=8">The download</A> 
```

但它会生成 WebKitErrorDomain/code 101 的错误。

是否可以从 UIWebView 中下载应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:19:56.547

不可以。你可以让应用程序打开应用程序商店来下载应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:21:58.480

使用`OpenURL`：

```
NSString* url = @"itms-apps://itunes.apple.com/us/app/angry-birds/id343200656?mt=8";
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

App Store 应用程序将打开。

# c# - 将 Ajax.Actionlink OnSuccess 上的模型 id 传递给另一个 Javascript 函数

> ID：10340832
> 
> 赞同：0
> 
> 时间：2012-04-26T20:18:04.273
> 
> 标签：c#, javascript, jquery, ajax, model-view-controller

我似乎无法找出正确的语法。似乎已经尝试了一切：

```
@model User

...

@Ajax.ActionLink("Add", "AddUser",new {id = Model.Id }, new AjaxOptions
{
HttpMethod = "post",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "dialog-add-user",
OnSuccess = **"function(){ AddUserShow(" + @Model.Id + ");}",**
OnFailure = "userFailure"
} 
```

成功后，我只需将我的 userId 传递给另一个 Javascript 方法。似乎没有任何效果。我环顾四周，找到了一些建议，但仍然没有运气。我试过：

```
 "new Function('AddUserShow(" + @Model.Id + ")')",
 "function(){ AddUserShow(" + @Model.Id + ");}",
 "function(){ AddUserShow(this," + @Model.Id + ");}",

 Also tried sticking the user ID in a hidden field to try and pass it later from functions above instead of accessing @Model:
 "AddUserShow($('#Id').val()))", 
```

接收端代码：

```
function AddUserShow(id)
{
 alert(id);
} 
```

如果重要的话，正在传递的 ID 是一个 Guid。

有任何想法吗 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:29:57.867

您需要在其中使用引号，否则 javascript 会尝试将您的 Id 解释为变量。

```
"AddUserShow(" + @Model.Id + ");" // bad. becomes AddUserShow(123abc);
"AddUserShow('" + @Model.Id + "');" // good! becomes AddUserShow('123abc'); 
```

# c# - ODBC 命令不提供插入记录的计数

> ID：10340835
> 
> 赞同：4
> 
> 时间：2012-04-26T20:18:19.823
> 
> 标签：c#, mysql, .net, odbc

我正在使用 ODBC 连接来连接到数据库。当我`OdbcCommand.ExecuteNonQuery`使用插入语句执行时，记录被插入到表中，但该方法返回 0。

`ExecuteNonQuery`返回受影响的记录数。它在删除和更新的情况下工作正常，但在插入的情况下不工作。

```
query = "Insert into table1 (field1, field2) values (1,2)";

OdbcConnection = _remoteconn = new OdbcConnection(constring);
OdbcCommand cmd = new OdbcCommand(query, _remoteconn);
recordsAffected = cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T14:07:58.930

ODBC 不是驱动程序 - 它是驱动程序的包装器。这个问题的答案将取决于您使用的底层 ODBC 驱动程序，通常在连接字符串中指定。

MSDN 文档实际上更多的是一种期望或建议，但 ODBC 接口并不能强制驱动程序返回特定的结果。可能是驱动程序有一些优化或设置会干扰您的结果，这与 SQL Server 的 NO COUNT 设置不同（这将覆盖驱动程序报告受影响行的尝试等）。

有关 ODBC 工作原理的更详尽说明，请参见维基百科：
[http ://en.wikipedia.org/wiki/ODBC](http://en.wikipedia.org/wiki/ODBC)

> *“由于不同的技术具有不同的功能，大多数 ODBC 驱动程序并未实现 ODBC 标准中定义的所有功能。有些驱动程序提供了标准未定义的额外功能。”*

如果您告诉我们您使用的是哪个驱动程序，可能有助于找到解决方案。

* * *

**编辑**

据我所知，有问题的 ODBC API 函数是 SQLRowCount 函数，定义如下：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/ms711835(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711835(v=vs.85).aspx)

根据 ODBC 标准，必须实现此功能才能使驱动程序被视为兼容 ODBC。（这并不是说该函数将返回预期或正确的结果，只是它就在那里）。

根据[Transoft 文档（第 67 页）](http://pz.southware.com/nlhtml/USQL_User_Guide.pdf)，我已经能够挖掘出实现了 SQLRowCount 函数。没有以任何方式禁用此功能或任何所需的配置。

鉴于上述情况，我会直接联系供应商。似乎它们的实现存在错误或未记录的“功能”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T16:09:07.150

我遇到了类似的问题，这是因为相关数据库的 ODBC 驱动程序与数据库的版本不同。

检查数据库中的版本：

```
select @@version 
```

并在 ODBC（至少对于 windows xp）中：

> 控制面板 -> 管理工具 -> Microsoft ODBC 源管理器 -> 驱动程序 -> 在此处检查数据库的列版本

* * *

如果它们不同，那可能就是问题所在！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:24:55.500

[OdbcCommand](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbccommand.executenonquery.aspx "用于 OdbcCommand 的 MSDN")的 MSDN 声明如下：

```
For UPDATE, INSERT, and DELETE statements, the return value is the number of rows affected by the command. 
```

您可以发布更多代码吗？你肯定会忘记你得到的数字，*或者*没有插入记录（！！）

**更新**

或者，正如评论中正确指出的那样，ODBC 驱动程序本身要么存在错误，要么根本不提供此功能（您没有得到您期望的记录数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T11:03:11.177

尝试

```
ExecuteReader 
```

代替

```
ExecuteNonQuery 
```

并在 SQL 语句中通过 select 获取值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T13:27:51.747

```
using System;
using System.Data;
using System.Data.Odbc;

   class myOdbc
   {
      static void Main()
      {

      OdbcConnection myOdbcCommandConnection = new OdbcConnection("..."); 

      myOdbcCommandConnection.Open();

      OdbcCommand myOdbcCommand = myOdbcCommandConnection.CreateCommand();

      myOdbcCommand.CommandText = "INSERT INTO table1 (field1, field2) VALUES (?, ?)";

      myOdbcCommand.Parameters.Add("@field1", OdbcType.Int);
      myOdbcCommand.Parameters.Add("@field2", OdbcType.Int);

      myOdbcCommand.Parameters["@field1"].Value = 1;
      myOdbcCommand.Parameters["@field2"].Value = 2;

      Console.WriteLine("Number of Rows Affected is: {0}", myOdbcCommand.ExecuteNonQuery());

      myOdbcCommandConnection.Close();

      Console.ReadKey();

      }
   } 
```

# operating-system - 为什么发出陷阱不是一项特权任务？

> ID：10340836
> 
> 赞同：2
> 
> 时间：2012-04-26T20:18:30.537
> 
> 标签：operating-system, assembly-trap

在对“操作系统概念”一书的问题的解决方案中，它表明发出陷阱不是特权任务。为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:26:14.027

有些指令需要特殊权限才能运行，这在大多数情况下意味着只有操作系统才能执行它们。

大多数用户进程（程序）需要发出一个陷阱/异常来让操作系统运行这些指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:20:16.487

如果它是特权操作，则进程不可能发出系统调用。

# collections - 安心使用 Backbone.Collection.get(id)

> ID：10340839
> 
> 赞同：1
> 
> 时间：2012-04-26T20:18:45.690
> 
> 标签：collections, backbone.js

似乎当我在backbone.js 集合上调用get 时，它通过cookie 传递id，而不是平静地传递到我的GET 方法中。在请求标头中，它的出现是这样的：

> 饼干：posts=ag5kZXZ-c29jcmVuY2h1c3IOCxIIUG9zdExpc3QYAQw；dev_appserver_login="test100@example.com:False:114323764255192059842"

这就是我所拥有的：

接听电话：

```
postCollection.get(id) 
```

和get方法：

```
def get(self, id): 
```

我想在 get 方法中使用 id 而不必使用 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:08:22.317

完成此操作的最佳方法可能类似于以下内容。

```
var model = collection.get(id);
// If the model is not present locally..
if (!model) {
  // Add empty model with id.
  model = collection.add([{id: id}]);
  // Populate model attributes from server.
  model.fetch({success: successCallback, error: errorCallback });
} 
```

`collection.get(id)`不应该向后端发出请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:11:01.000

这是另一种看法。与其创建一个大部分为空的模型，然后在获取后从服务器向其添加属性，不如执行我在下面粘贴的操作。在上面的例子中要考虑的一件事是，如果您创建一个模型，然后尝试从服务器获取该 ID 并且它不存在，您将不得不清理它。下面的代码将为您节省这一步。

```
myModel = Backbone.Model.extend({
  url : function() {
     /*
     create _ POST   /model
     read _ GET   /model[/id]
     update _ PUT   /model/id
     delete _ DELETE   /model/id
     */
     return this.id ? '/model/' + this.id : '/model';
   },
});

myCollection = Backbone.Collection.extend({
  model: myModel,
  url: function() {
    return '/model';
  },
  comparator: function(model) {
    return model.get("foo");
  },
  getOrFetch: function(id) {
    var model = this.get(id) || this.getByCid(id);
    if (model) return model;
      var url = this.url() +"/"+ id
      return new this.model().fetch({url:url});
  }
});

var mc = new myCollection(new myModel({foo:"bar"}));
mc.getOrFetch(1) 
```

# vb.net - VB08从文本文件中删除一行

> ID：10340844
> 
> 赞同：-1
> 
> 时间：2012-04-26T20:19:11.193
> 
> 标签：vb.net

我正在开发一个带有列表框的程序，该列表框显示选定文本文件中的文本。我已经从列表框中删除了该项目，但我不知道如何让它从文本文件中删除同一行，因此当您重新打开对话框时它不会再次显示它。有什么帮助吗？我正在使用streamwriter 和streamreader。如果需要，我也可以使用 TeamView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:48:54.237

最简单且在大多数情况下最好的方法是覆盖整个文件。所以你想删除所有不再在`ListBox`?

```
Dim resultLines = From line In IO.File.ReadAllLines(path)
             Join item In lb.Items On item.ToString Equals line
             Select line
IO.File.WriteAllLines(path, resultLines) 
```

这将从文件中读取所有行并将它们与`ListBox`. 结果行被写回文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:33:22.263

最简单的方法是使用列表框的内容重写文件。您没有指定从文本文件到列表框的任何映射，因此我无法提供更多详细信息。

# php - MySQL内部连接一列上的两列

> ID：10340845
> 
> 赞同：1
> 
> 时间：2012-04-26T20:19:29.003
> 
> 标签：php, mysql, inner-join

我被困在我的表的内部连接方案中。你能帮我么？我在这里做错了什么？

这是我正在尝试做的场景：

我有计费和运输国家/州列，我试图用内部连接填充它们，但不知何故它不起作用。非常感谢你的帮助：

```
 $sql = $this->connection->query("SELECT * FROM ".TBL_USERS." 
    INNER JOIN ".TBL_USER_LEVEL." ON ".TBL_USERS.".userlevel = ".TBL_USER_LEVEL.".user_level_id 
    INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".country OR ".TBL_USERS.".bcountry = ".TBL_COUNTRIES.".country_id
    INNER JOIN ".TBL_STATES." ON ".TBL_USERS.".states OR ".TBL_USERS.".bstates  = ".TBL_STATES.".states_id
    WHERE ".TBL_USERS.".username = '$username'"); 
```

我将查询更改为；我刚开始的错误是

PHP 致命错误：未捕获的异常 'PDOException' 带有消息'SQLSTATE [42000]：语法错误或访问冲突：1066 不是唯一的表/别名：'国家''

```
 $sql = $this->connection->query("SELECT * FROM ".TBL_USERS." 
    INNER JOIN ".TBL_USER_LEVEL." ON ".TBL_USERS.".userlevel = ".TBL_USER_LEVEL.".user_level_id 
    INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".country = ".TBL_COUNTRIES.".country_id
    INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".bcountry = ".TBL_COUNTRIES.".country_id
    INNER JOIN ".TBL_STATES." ON ".TBL_USERS.".states = ".TBL_STATES.".states_id

    INNER JOIN ".TBL_STATES." ON ".TBL_USERS.".bstates = ".TBL_STATES.".states_id

    WHERE ".TBL_USERS.".username = '$username'"); 
```

好的，这里的语法是正确的，非常感谢@Tiberiu-Ionuț Stan

```
$sql = $this->connection->query("SELECT * FROM ".TBL_USERS." 
    LEFT JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".country = ".TBL_COUNTRIES.".country_id 

   LEFT JOIN ".TBL_COUNTRIES." AS ".TBL_COUNTRIES."_b ON ".TBL_USERS.".bcountry=".TBL_COUNTRIES."_b.country_id

    INNER JOIN ".TBL_USER_LEVEL." ON ".TBL_USERS.".userlevel = ".TBL_USER_LEVEL.".user_level_id 
    LEFT JOIN ".TBL_STATES." ON ".TBL_USERS.".states = ".TBL_STATES.".states_id 

    LEFT JOIN ".TBL_STATES." AS ".TBL_STATES."_b ON ".TBL_USERS.".bstates=".TBL_STATES."_b.states_id

    WHERE ".TBL_USERS.".username = '$username'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:33:34.027

`JOIN table ON field OR another_field = expression`除非引用`field`的是布尔类型，否则不能使用类似的构造。

您应该使用将返回布尔结果的构造，在您的情况下是这样的：

```
$sql = $this->connection->query("SELECT * FROM $TBL_USERS 
    JOIN $TBL_USER_LEVEL ON $TBL_USERS.userlevel = $TBL_USER_LEVEL.user_level_id 
    JOIN $TBL_COUNTRIES ON $TBL_USERS.country = $TBL_COUNTRIES.country_id
      OR $TBL_USERS.bcountry = $TBL_COUNTRIES.country_id
    JOIN $TBL_STATES ON $TBL_USERS.states = $TBL_STATES.states_id
      OR $TBL_USERS.bstates  = $TBL_STATES.states_id
    WHERE $TBL_USERS.username = '$username'"); 
```

我也直接使用了变量，否则很多字符串连接看起来很乱。您现在的查询对[SQLi](http://xkcd.com/327/)开放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:50:10.867

您可以在连接语句中使用 OR 和 AND。我一直都这样做。这是一个有效的方法：

```
 LEFT JOIN `currencies` ON (
   `currency_foreign`=`invoice_entry_amount_currency`
   AND
   `currency_reference`='".$strTransformToCurrency."'
   AND
   `currency_date`=FLOOR(`invoice_paid_timestamp`/86400)*86400
  ) 
```

问题在这里：

```
 INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".country = ".TBL_COUNTRIES.".country_id
   INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".bcountry = ".TBL_COUNTRIES.".country_id 
```

MySQL 无法决定加入国家表的关系（因为 MySQL 认为 .country 和 .countryb 可能不同 - 所以加入后它不知道哪些列将被返回或用于条件和排序）。

试试这样：

```
 INNER JOIN ".TBL_COUNTRIES." ON ".TBL_USERS.".country = ".TBL_COUNTRIES.".country_id
  INNER JOIN ".TBL_COUNTRIES." AS ".TBL_COUNTRIES."_b ON ".TBL_USERS.".bcountry=".TBL_COUNTRIES."_b.country_id 
```

如果您有非常大的表，请使用包含条件和排序的完整最终查询执行 EXPLAIN，以了解 MySQL 是否由于“TBL_USERS AS TBL_USERS_B”而进行表复制。

# javascript - 使用 jQuery 抑制默认下拉功能

> ID：10340853
> 
> 赞同：1
> 
> 时间：2012-04-26T20:20:21.343
> 
> 标签：javascript, jquery, drop-down-menu

我认为这会起作用，但它没有，我错过了什么？

html

```
<select id="TaskId">
 <option>A list of options</option>
</select> 
```

jQuery

```
<script type="text/javascript">
 $("#TaskId").click( function(e){
    e.preventDefault();
 });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:27:27.043

e.preventDefault 在下拉菜单的点击上下文中不起作用，请使用：

**代码 1：**

```
$("#TaskId").mousedown(function(){
   return false;
}); 
```

你也可以使用这个：

**代码 2：**

```
$("#TaskId").mousedown(function(e){
   e.preventDefault();
}); 
```

**警告：e.preventDefault() 在 Firefox 和 Opera 中存在事件处理错误。**

这可能是您尝试实现的一种解决方案：

**代码 3：** 随便玩：

```
$("#TaskId").prop('disabled', true);
$("#TaskId").prop('disabled', false); 
```

**代码 4：** 如果您不想禁用所有事件处理，请查看此示例，它可能会有所帮助：

**代码 4 的演示：http:** [//jsfiddle.net/AHEex/](http://jsfiddle.net/AHEex/)

**代码 1 和 2 的演示：http:** [//jsfiddle.net/oscarj24/JcpPU/](http://jsfiddle.net/oscarj24/JcpPU/)

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:07:21.947

为什么不简单地禁用选择字段？它既会产生所需的行为，也会向用户展示发生了什么。而不是安装点击监听器，只是

```
$("#TaskId").prop("disabled", true); 
```

# php - PHP 感谢您仅在成功提交

> ID：10340858
> 
> 赞同：1
> 
> 时间：2012-04-26T20:20:38.433
> 
> 标签：php, jquery, forms

所以我有一个表单，其中包含 javascript 验证来检查每个字段是否已归档，还有一个 jquery ajax 脚本来停止页面重新加载。

PHP 脚本非常简单，只通过电子邮件发送表单的字段。问题是，如果每个字段都已填写，我只需要显示感谢消息，而目前当我输入名称字段时它似乎正在显示它。如果我只是输入电子邮件或消息字段并且我不知道为什么（我不擅长 PHP），它不会显示它。

```
<?php 

$name = $_POST['name'];
$email = $_POST['email'];
$priority = $_POST['priority'];
$message = $_POST['message'];
$telephone = $_POST['telephone'];
$formcontent="From: $name \n Email: $email \n Telephone Number: $telephone \n Priority: $priority \n Message: $message";
$recipient = "myemail@address.co.uk";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

if(mail($name,$email,$message,$headers)){
    echo "<p>Thanks for your mail...</p>";
}

?> 
```

停止页面重新加载的 Javascript。

```
<script type="text/javascript">

        $(document).ready(function() {

            $(".contactus").submit(function() {

                $.post("mail.php", $(".contactus").serialize(),

                    function(data) {
                        $("#formResponse").html(data);
                    }
                );
                return false;
            });
        });
    </script> 
```

表单验证。

```
<script type="text/javascript" language="JavaScript">

var FormName = "contactus";

var RequiredFields = "name,email,priority,message";

function ValidateRequiredFields()
{
var FieldList = RequiredFields.split(",")
var BadList = new Array();
for(var i = 0; i < FieldList.length; i++) {
    var s = eval('document.' + FormName + '.' + FieldList[i] + '.value');
    s = StripSpacesFromEnds(s);
    if(s.length < 1) { BadList.push(FieldList[i]); }
    }
if(BadList.length < 1) { return true; }
var ess = new String();
if(BadList.length > 1) { ess = 's'; }
var message = new String('\n\nThe following field' + ess + ' are required:\n');
for(var i = 0; i < BadList.length; i++) { message += '\n' + BadList[i]; }
alert(message);
return false;
}

function StripSpacesFromEnds(s)
{
while((s.indexOf(' ',0) == 0) && (s.length> 1)) {
    s = s.substring(1,s.length);
    }
while((s.lastIndexOf(' ') == (s.length - 1)) && (s.length> 1)) {
    s = s.substring(0,(s.length - 1));
    }
if((s.indexOf(' ',0) == 0) && (s.length == 1)) { s = ''; }
return s;
}
// -->
</script> 
```

和形式

```
<form action="mail.php" id="myform" class="contactus" onsubmit="return ValidateRequiredFields(); this.submit(); this.reset(); return false;"   name="contactus" method="POST">
<p class="floatleft" style="width:200px; background-color:#FF0000; height:50px; line-height:50px; margin:0; padding:0;">Nameeeeee</p> <input class="sizetext" type="text" maxlength="10" name="name">
<div style="clear:both"></div>
<p class="floatleft" style="width:200px;">Email</p> <input class="sizetext" type="text" maxlength="10" name="email">
<div style="clear:both"></div>
<p class="floatleft" style="width:200px;">Telephone</p> <input class="sizetext" type="text" maxlength="10" name="telephone">

<p>Priority</p>
<select name="priority" size="1">
<option value="Low">Low</option>
<option value="Normal">Normal</option>
<option value="High">High</option>
<option value="Emergency">Emergency</option>
</select>

</select>
<p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />

<br />
<input class="buttonstyle" type="submit" value="Send">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:28:01.253

```
<?php

$name = $_POST['name'];
$email = $_POST['email'];
$priority = $_POST['priority'];
$message = $_POST['message'];
$telephone = $_POST['telephone'];

$check = array('name', 'email', 'priority', 'message', 'telephone');
$send = true;

foreach($check as $key => $value){
    if(empty($_POST[$value])){
        $send = false;
    }
}

$formcontent="From: $name \n Email: $email \n Telephone Number: $telephone \n Priority: $priority \n Message: $message";
$recipient = "myemail@address.co.uk";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";

if($send && mail($recipient, $subject, $formcontent, $mailheader)){
    echo "<p>Thanks for your mail...</p>";
}
else{
    die('Error!');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:28:13.093

好吧，最简单的方法是检查您的 POST 字段是否存在且不为空。如果您想单独检查每个字段，可能有一个更优雅的解决方案，但这里是：

```
 if (isset($_POST['name']) && !empty($_POST['name']) && isset($_POST['email']) && !empty($_POST['email']) && isset($_POST['message']) && !empty($_POST['message'])) {
    if(mail($name,$email,$message,$headers)){
echo "<p>Thanks for your mail...</p>";
     }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:25:21.297

你需要包装你的代码

```
if(isset($_POST['submit']))
{
    $name = $_POST['name'];
    $email = $_POST['email'];
    $priority = $_POST['priority'];
    $message = $_POST['message'];
    $telephone = $_POST['telephone'];
    $formcontent="From: $name \n Email: $email \n Telephone Number: $telephone \n Priority: $priority \n Message: $message";
    $recipient = "myemail@address.co.uk";
    $subject = "Contact Form";
    $mailheader = "From: $email \r\n";
    $mail = @mail($recipient, $subject, $formcontent, $mailheader);

    if($mail){
        echo "<p>Thanks for your mail...</p>";
    }
    else
    {
        echo "Error Sending Mail " ;
    }

} 
```

# c# - 作为静态类的一部分与 [理论上] 命名空间的一部分，扩展方法是否以任何实际的方式受益？

> ID：10340860
> 
> 赞同：6
> 
> 时间：2012-04-26T20:20:44.853
> 
> 标签：c#, extension-methods

当涉及到扩展方法时，类名似乎什么都不做，但提供了一个分组，这就是命名空间所做的。一旦我包含命名空间，我就会在命名空间中获得所有扩展方法。所以我的问题归结为：我可以从静态类中的扩展方法中获得一些价值吗？

我意识到将它们放入静态类是编译器的要求，但从组织的角度来看，允许在没有围绕它们的类的名称空间中定义扩展方法是合法的。以另一种方式重新表述上述问题：在某些情况下，作为开发人员，我从将扩展方法附加到类而不是附加到命名空间中获得任何实际好处或帮助？

我基本上只是想获得一些直觉、确认或洞察力——我怀疑以这种方式实现扩展方法可能是最容易的，而且不值得花时间让扩展方法以自己的名义存在——空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:25:54.573

[或许您会在 Eric Lippert 的博客文章为什么 C# 不实现“顶级”方法](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)中找到满意的答案？（反过来由 SO 问题[为什么 C# 不允许像 C++ 这样的非成员函数](https://stackoverflow.com/q/1024171/71059)提示），从哪里来（我的重点）：

> 我被问到“为什么 C# 不实现功能 X？” 每时每刻。答案总是一样的：因为从来没有人设计、指定、实施、测试、记录和发布该功能。所有这六件事都是使功能发生所必需的。所有这些都花费了大量的时间、精力和金钱。功能并不便宜，鉴于我们有限的时间、精力和金钱预算，我们非常努力地确保我们只发布那些能够为我们的用户带来最大利益的功能。
> 
> 我知道这样一个笼统的答案可能无法解决具体问题。
> 
> 在这种特殊情况下，过去明显的用户利益不足以证明随之而来的语言复杂性是合理的。通过限制不同语言实体相互嵌套的方式，我们 (1) 将法律程序限制为通用、易于理解的样式，以及 (2) 可以定义可理解、可指定、可实现、可测试的“标识符查找”规则并且有据可查。
> 
> **通过将方法体限制为始终位于结构或类中，我们可以更容易地推断调用上下文中使用的非限定标识符的含义；这样的东西始终是当前类型（或基本类型）的可调用成员。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:45:18.747

对我来说，将它们放在课堂上就是将相关功能分组到一个类中。您可能在同一个命名空间中有许多扩展方法。如果我想为 DirectoryInfo 和 FileInfo 类编写一些扩展方法，我将在 IO 命名空间中创建两个类，称为 DirectoryInfoExtensions 和 FileInfoExtensions。

您仍然可以像调用任何其他静态方法一样调用扩展方法。我不知道编译器是如何工作的，但是如果为 .net 2 编译的输出程序集可能仍然可以由旧的 .net 框架使用。这也意味着现有的反射库可以工作并用于运行扩展方法而无需任何更改。同样，我不是编译器专家，但我认为扩展方法上下文中的“this”关键字是允许语法糖允许我们使用方法，就好像它们属于对象一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T20:33:00.127

.NET Framework 要求每个方法都存在于程序集中的类中。一种语言可以允许在没有明确指定的封闭类的情况下声明方法或字段，将所有这些方法放在汇编中`Fnord`的一个名为的类中`Fnord_TopLevelDefault`，然后`Fnord_TopLevelDefault`在执行方法查找时搜索所有汇编的类；但是，必须扩展 CLS 规范才能使此功能在混合语言项目中顺利运行。与扩展方法一样，如果 CLS 不承认，这种行为可能是符合 CLS 的，因为不使用这种特性的语言中的代码可以通过拼写`Foo`在汇编中使用“自由浮动”方法，但是会有点难看。`Fnord``Fnord_TopLevelDefault.Foo`

A more interesting question is the extent to which allowing an extension method `Foo` to be invoked from an arbitrary class without requiring a clearly visible reference to that class is less evil than would be allowing a non-extension static methods to be likewise invoked. I don't think `Math.Sqrt(x)` is really more readable than `Sqrt`; even if one didn't want to import `Math` everywhere, being able to do so at least locally could in some cases improve code legibility considerably.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:39:51.327

他们可以在内部引用其他静态类成员。

您不仅应该考虑消费者方面，还应该考虑代码维护方面。

尽管智能感知不区分所有者类，但通过工具提示和您添加到 IDE 的任何生产力工具，信息仍然存在。这可以很容易地用于为方法提供一些上下文，否则会是一个扁平（有时很长）的列表。

消费者明智的，底线，我认为这并不重要。

# c++ - c++中对class::function的未定义引用

> ID：10340862
> 
> 赞同：0
> 
> 时间：2012-04-26T20:20:51.867
> 
> 标签：c++, class, function, linker-errors

当我尝试调用 OnLoop 时，我得到它无法识别的错误。

///Ins_App.h

```
#ifndef INS_APP_H
#define INS_APP_H

#include <SDL/SDL.h>

class Ins_App
{
    private:
        /*   Variables   */
        bool Running;
        SDL_Surface* Surf_Display;

    public:
        /*  inMain  */
        Ins_App();
        int OnExecute();

    public:
        /*  Other   */

        bool OnInit();
        void OnEvent(SDL_Event* Event);
        void OnLoop();
        void OnRender();
        void OnCleanup();

    protected:
};

#endif // INS_APP_H 
```

///Ins_App.cpp

```
#include "Ins_App.h"

Ins_App::Ins_App()
{
    Running = true;
    Surf_Display = NULL;
}

int Ins_App::OnExecute(){

    if(OnInit() == false){
        return -1;
    }
    SDL_Event Event;
    while(Running){
        while(SDL_PollEvent(&Event)){
            OnEvent(&Event);
        }
        OnLoop();
        OnRender();
    }
    return 0;
}

int main(int argc, char* argv[]){

    Ins_App iApp;
    return iApp.OnExecute();

} 
```

///OnLoop.cpp

```
#include "Ins_App.h"

void OnLoop(){

} 
```

这是错误：

obj\Debug\src\Ins_App.o:C:\Users\Al\Documents\Ins \src\Ins_App.cpp|19|未定义对“Ins_App::OnLoop()”的引用|

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T20:21:59.487

您没有定义您的成员：

```
void OnLoop(){

} 
```

应该

```
void Ins_App::OnLoop(){

} 
```

您基本上只是定义了一个名为 的自由函数`OnLoop`，而不是您的成员。

# java - 将变量初始化为类或构造函数？

> ID：10340863
> 
> 赞同：1
> 
> 时间：2012-04-26T20:20:52.333
> 
> 标签：java, android

哪个更好或哪个是正确的方法，您能否也给出解释（我不知道在 Google 上使用什么搜索词）。

第一种方式：

```
Public Class A()
{
    Paint _paint _test;

    public void running()
    {
        _test = new Paint();
       //use paint
    }
} 
```

或者

```
Public Class B()
{
    Paint _paint _test = new Paint();

    public void running()
    {
        //use paint
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:25:33.807

当您可能（可能在将来）可能想要将参数传递给成员的构造函数时，第一种方法会更好，例如：

```
class Foo{
    private Bar bar;

    public Foo(){
        bar = new Bar();
    }

    public Foo( String s ){
        bar = new Bar( s );
    }
} 
```

当您知道您永远不想将参数传递给成员的构造函数并且您有多个构造函数都需要初始化此成员时，第二种方法会更好，例如：

```
class Foo {
    private Bar bar = new Bar();

    public Foo( String s ){ ... }
    public Foo( int i ){ ... }
    public Foo( double d ){ ... }
    public Foo( String s, int i ){ ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:26:03.033

答案是“视情况而定”。在您已经说明的情况下，使用第二个选项可能更优雅。但是，如果一个值需要知道构造函数参数的值，或者以任何方式被类的构造改变，它可能应该在构造函数中初始化。如果一个成员可以在其声明中初始化，它应该是。这将避免在分配类时将它们初始化为 0 或 Null。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T20:25:02.433

最好在使用前进行初始化。仅初始化构造函数中始终需要/使用的变量。

# entity-framework-4 - 我可以在我的 DataGridView 中总结一个 EntityFramework 导航列吗

> ID：10340867
> 
> 赞同：0
> 
> 时间：2012-04-26T20:21:24.820
> 
> 标签：entity-framework-4, datagridview, asp.net-4.0

我有两个表/实体，事件和事件注册。我有一个显示事件的网格视图，但我希望它有一个汇总 eventRegistrations.SomeNumber 的列。

我可以使用导航对象获取 eventRegistrations 的计数。

我怎样才能得到总和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:00:54.857

如果您可以计算事件注册，`event.EventRegistrations.Count()`您应该能够使用以下 LINQ`Sum`扩展方法获得总和`IEnumerable<T>`：

```
var sum = event.EventRegistrations.Sum(er => er.SomeNumber); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:34:54.633

像这样处理它：

`public string GetRegSum(object _eventReg)
{
System.Collections.Generic.List<FormRouterData.family_fishing_reg> theseRegs = (System.Collections.Generic.List<FormRouterData.family_fishing_reg>)_eventReg;
var sum = theseRegs.Sum(er => int.Parse(er.num_group));
if (sum == 0) { return string.Empty; }
else { return sum.ToString(); }
}`

# c# - delegate.BeginInvoke 和在 C# 中使用 ThreadPool 线程之间的区别

> ID：10340871
> 
> 赞同：32
> 
> 时间：2012-04-26T20:21:54.027
> 
> 标签：c#, multithreading, threadpool

在 C# 中，使用委托异步执行某些工作（调用 BeginInvoke()）和使用 ThreadPool 线程之间有什么区别，如下所示

```
public void asynchronousWork(object num)
    {
        //asynchronous work to be done
        Console.WriteLine(num);
    }

 public void test()
    {
        Action<object> myCustomDelegate = this.asynchronousWork;
        int x = 7;

        //Using Delegate
        myCustomDelegate.BeginInvoke(7, null, null);

        //Using Threadpool
        ThreadPool.QueueUserWorkItem(new WaitCallback(asynchronousWork), 7);
        Thread.Sleep(2000);
    } 
```

**编辑：**
BeginInvoke 确保线程池中的一个线程用于执行异步代码，那么有什么区别吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-26T20:47:35.730

乔·达菲（ Joe Duffy）在他的`Concurrent Programming on Windows`书中（第 418 页）这样说`Delegate.BeginInvoke`：

> 按照惯例，所有委托类型都提供 BeginInvoke 和`EndInvoke`方法以及普通同步`Invoke`方法。虽然这是一个很好的编程模型功能，但您应该尽可能远离它们。该实现使用远程处理基础设施，这给异步调用带来了相当大的开销。将工作直接排队到线程池通常是一种更好的方法，尽管这意味着您必须自己协调集合逻辑。

编辑：我创建了以下相对开销的简单测试：

```
int counter = 0;
int iterations = 1000000;
Action d = () => { Interlocked.Increment(ref counter); };

var stopwatch = new System.Diagnostics.Stopwatch();
stopwatch.Start();
for (int i = 0; i < iterations; i++)
{
    var asyncResult = d.BeginInvoke(null, null);
}

do { } while(counter < iterations);
stopwatch.Stop();

Console.WriteLine("Took {0}ms", stopwatch.ElapsedMilliseconds);
Console.ReadLine(); 
```

在我的机器上，上述测试运行大约 20 秒。`BeginInvoke`将呼叫替换为

```
System.Threading.ThreadPool.QueueUserWorkItem(state =>
{
    Interlocked.Increment(ref counter);
}); 
```

将运行时间更改为 864 毫秒。

# algorithm - 瞬间疯狂（4 个方块拼图）算法

> ID：10340883
> 
> 赞同：1
> 
> 时间：2012-04-26T20:22:27.403
> 
> 标签：algorithm, puzzle, graph-algorithm

我正在尝试找到一种算法来解决即时精神错乱之谜。这是该问题的 wiki 链接。[http://en.wikipedia.org/wiki/Instant_Insanity](http://en.wikipedia.org/wiki/Instant_Insanity)

从维基百科我找到了一个图论算法来解决这个难题。另一种解决方案是尝试所有可能性的蛮力方法。我不确定使用图论算法进行编码会有多复杂。我必须在一天内完成编码。如果有人能说出更好的方法来解决这个问题，那将很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:48:43.723

既然您提到了蛮力解决方案，这是否意味着它是一个可以接受的解决方案？或者你真的需要想出一个算法吗？

蛮力方法只需要大约 30K 次试验，这意味着您的程序将在您编写后几秒钟完成；-)

蛮力算法大纲可能如下所示：

```
for o1 in OrientationOptions {
 for o2 in OrientationOptions {
  for o3 in OrientationOptions {
   for o4 in OrientationOptions {
    if (isValidChoice (c1.o1, c2.o2, c3.o3, c4.4o)) {
     outputChoice();
     return;
    }
   }
  }
 }
} 
```

# c++ - 如何在 Arduino 中读取 AT 命令的输出？

> ID：10340884
> 
> 赞同：3
> 
> 时间：2012-04-26T20:23:01.967
> 
> 标签：c++, arduino, at-command

如何在 Arduino 上捕获 AT 命令的输出？

我正在使用带有 GSM 屏蔽的 Arduino Uno R3。我有所有的 AT 命令（[可以在这里看到](http://garden.seeedstudio.com/images/a/a0/SIM900_ATC_V1_00.pdf)），如果我使用终端并获得输出，我可以很好地输入它们。但是如何通过代码捕获结果输出？下面的代码显示了我尝试过的内容，但它不起作用。特别是在我尝试获取模拟输入然后打印出结果的地方。

```
#include <SoftwareSerial.h>

SoftwareSerial mySerial(7, 8);

void setup()
{
  char sensorValue[32] ="";
  Serial.begin(9600); 
  mySerial.begin(9600); 
  Serial.println("\r");

  //Wait for a second while the modem sends an "OK"
  delay(1000);                    

  //Because we want to send the SMS in text mode
  Serial.println("AT+CMGF=1\r");    
  delay(1000);

  mySerial.println("AT+CADC?");     //Query the analog input for data
  Serial.println(Serial.available());    
  Serial.println(Serial.read());    //Print out result???

  //Start accepting the text for the message
  //to be sent to the number specified.
  //Replace this number with the target mobile number.
  Serial.println("AT+CMGS=\"+MSISDN\"\r");    

  delay(1000);
  Serial.println("!");   //The text for the message
  delay(1000);
  Serial.write(26);  //Equivalent to sending Ctrl+Z 
}

void loop()
{
  /*
    if (mySerial.available())
    Serial.write(mySerial.read());
  if (Serial.available())
    mySerial.write(Serial.read());  
    */
} 
```

我得到输出：

> AT+CMGF=1
> 
> AT+CADC？21 13

或者

> AT+CMGF=1
> 
> AT+CADC？18 65

不管我的模拟信号源有什么变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:47:03.623

[在此处查看](http://arduino.cc/en/Reference/SoftwareSerialRead)SoftwareSerial`read`函数的文档。

当您从 GSM 设备串行接口读取数据时，您不能想当然地认为缓冲区中有要读取的字节。

很有可能`mySerial.read()`返回`-1`（没有可用的字节），因为 Arduino 在 GSM 设备可以在串行端口上提供某些东西之前运行该代码。

您应该使用该`available`函数（[此处](http://arduino.cc/en/Reference/SoftwareSerialAvailable)的文档）来测试串行接口的传入字节。您可以将其与超时一起使用以避免无限等待。

您可以尝试的最好的事情是编写一个单独`class`的来处理串行操作（读取、写入、超时、延迟等）。

另外，我曾经为 Arduino 编写了一个 GPRS 驱动程序。我遇到了电源问题，需要我在 GPRS 设备上安装一个额外的电容器，并使用输出电流超过 2A 的电源。

# c - c中的免费二维数组

> ID：10340886
> 
> 赞同：3
> 
> 时间：2012-04-26T20:23:07.530
> 
> 标签：c, memory-management, multidimensional-array

当我遇到以下示例时，我正在解决一些简单的指针练习：

```
void deallocate2D(int** array, int nrows) {     
 /*  deallocate each row  */
 int i;
 for(i = 0; i < nrows; i++) {
      free(array[i]);
 }

 /*  deallocate array of pointers  */
 free(array);     
} 
```

数组在 main 中定义为 int** array1;

这是释放二维数组内存的正确方法还是应该在函数中传递一个 int*** 数组？有没有办法检查内存是否已成功释放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:27:00.603

对，那是正确的。`int***`仅当您打算更改不需要的指针的值时才需要。

确实存在可以检查您的内存分配/释放的工具 - Valgrind 应该能够做到这一点。

# jquery - AJAX 成功后更改视图中的元素

> ID：10340888
> 
> 赞同：1
> 
> 时间：2012-04-26T20:23:32.277
> 
> 标签：jquery, ruby-on-rails, ajax, forms

我是 AJAX 的新手，需要一点帮助。我有一个posts_controller 和一个likes_controller：

用户可以“喜欢”或“不喜欢”帖子。现在，我正在尝试实现 AJAX，以便在用户“喜欢”帖子或“不喜欢”帖子时切换喜欢/不喜欢。

在 AJAX 之前，页面会刷新，视图中的代码将确定当前用户是否喜欢给定的帖子。我在视图中运行了一个 if 语句，根据结果，显示了两种不同的表单——如果帖子还没有被点赞，有一个表单可以“喜欢”帖子（创建操作），如果帖子已经被点赞了喜欢，有一种“不喜欢”帖子的形式（破坏动作）。

现在我已经使用 AJAX 实现了创建部分，类似动态发生但视图没有改变（我可以看到类似是通过终端/rails 控制台创建的，但链接上的文本保持不变）。我想知道在不刷新页面的情况下更新视图的最佳方法是什么？一旦通过 AJAX 发生类似事件，我需要使用“不喜欢”链接和表单更新“喜欢”链接和表单。是通过jquery做到这一点的唯一方法吗？

这是我的代码：likes_controller

```
class LikesController < ApplicationController

  def create
    @post = Project.find(params[:like][:likee_id])

    respond_to do |format|
      format.html{
        current_profile.like!(@post)
        redirect_to :back
      }
      format.js {
        current_profile.like!(@post)
      }
    end  

  end
  def destroy
    @post = Like.find(params[:id]).likee
    current_profile.unlike!(@post)
    redirect_to :back
  end
end 
```

视图的片段：

```
%ul.dropdown-menu
  %li
    - if current_profile.like?(post)
      = form_for current_profile.likes.find_by_likee_id(post), :html => { :method => :delete } do |f|
        %a{:href => "javascript:void(0)", :onclick=>"$(this).closest('form').submit()"}
          %i.icon-heart.icon-large{:style => "color: #fedc73;"}
          Unlike this Post
      - else
        = form_for current_profile.likes.build(:likee_id => post.id), :remote => true do |f|
          = f.hidden_field :likee_id
          %a{:href => "javascript:void(0)", :onclick=>"$(this).closest('form').submit()"}
            %i.icon-heart-empty.icon-large
            Like this Post 
```

创建.js.haml 文件：

```
:plain
  $(this).closest('form').submit() 
```

任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:10:37.663

你可以使用

```
$.post('url', data, function(returned_data){ $.('like_div').html(returned_data) }) 
```

但是，您可以使用 rails 生成一个链接，而不是手动创建链接：

```
= link_to url_for(...), :remote => true 
```

这将起作用，即使 js 被禁用，并且您不需要任何形式。

```
- if current_profile.like?(post)
  = link_to url_for(:controller => :posts, :action => :unlike, :id => post.id), :remote => true
- else
  = link_to url_for(:controller => :posts, :action => :like, :id => post.id), :remote => true 
```

当然，这个动作应该响应 .js 和 .html。在后一个中，您可以渲染整个视图，并且在 .js 中，您可以插入一段 js，它将链接 div 更改为这个刷新的视图。你还需要解释吗？

# css - 排队定时 jquery 事件无法正常工作

> ID：10340889
> 
> 赞同：1
> 
> 时间：2012-04-26T20:23:32.637
> 
> 标签：css, jquery, jquery-effects

所以我有一个空的 div 设置为 display:none，称为 id="c1"。

我正在尝试对其进行排队，以便它会淡入并会说：2秒

然后 1 秒后它会说： 1 秒

然后将淡出并且页面重定向。

```
$('#c1').html('2 seconds').fadeIn('fast').delay(800).html('1 second').delay(800).fadeOut('fast'); 
```

但是，当我运行它时，我只看到“1 秒”并且它消失了。我根本看不到 2 秒的消息。就像 jquery 只监听最后一个“html”事件一样。

我还尝试在 div 中输入“2 秒”作为 html 中的默认文本。那也行不通。页面加载后仍然显示“1 秒”。

**编辑解决方案**

你可以这样做：

```
$('#c1').html('2').fadeIn('fast').delay(800).queue(function () {$(this).html('1');$(this).dequeue();}).delay(800).fadeOut('fast'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:29:00.163

您只能延迟（）动画，而不是像 html（）这样的其他函数，它们会立即执行。

对 html() 函数使用超时，或者将它们放在动画回调中。

```
$('#c1').html('2 seconds').fadeIn(1000, function() {
   $(this).html('1 second').fadeOut(1000);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:26:57.853

尝试

```
 $('#c1').html('2 seconds')fadeIn('fast');
    setTimeout($('#c1').html('1     second'), 800);
    setTimeout($('#c1').fadeOut('fast'), 800); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:33:24.187

对，文档声明：“它可以与标准效果队列或自定义队列一起使用”，但是像 .html() 这样的操作没有使用效果队列......

# python - 在python中执行图像的球面投影

> ID：10340893
> 
> 赞同：1
> 
> 时间：2012-04-26T20:23:47.410
> 
> 标签：python, pygtk, python-imaging-library, polar-coordinates

我正在使用显示 gtk.Image 的 PyGTK 编写程序。桌面投影到球形圆顶的内部。如果屏幕上显示的图像是矩形的，一旦投影到球体上，它就会变形。

为了帮助描绘这一点：桌面本身是方形的。桌面的中心像素投影到天顶，方形桌面内的圆圈变成地平线（极坐标中的 0 度仰角）。不显示除此之外的所有内容（在桌面的角落）。

我想以某种方式修改 gtk.Image ，使其在球面上仍然显示为矩形。我确信如何完成这个投影有很多细节，但非常简单地说，我必须将矩形图像转换为弯曲的梯形。转换为一系列极坐标（例如，将此矩形映射到两个方位角和两个仰角之间的区域）将是一个很好的初步近似值，尽管您可以想象如果仰角为 0 和 90，则生成的图像将是球体的楔形，看起来根本不是矩形。

如何将这样的转换应用于 gtk.Image（或其底层 Pixbuf）？是否已经有可以做到这一点的软件包？如果没有，我应该如何从头开始编写它？大概我必须提取像素值，将它们映射到一些新网格，然后替换原始图像。我只是不想重新发明已经完成的事情。

# python - 在 WikidPad、reStructuredText 和 HTML 之间转换

> ID：10340894
> 
> 赞同：2
> 
> 时间：2012-04-26T20:23:49.197
> 
> 标签：python, html, wiki, converter, restructuredtext

我有大量以[WikidPad](http://wikidpad.sourceforge.net/)笔记本格式存储的信息，现在我需要一种方法将其转换为[reStructuredText](http://docutils.sourceforge.net/rst.html)（用于另一个 wiki）。
同时，我需要在网络上发布此信息的可能性（但是，正如我现在所看到的，我可以使用 WikidPad 的“导出到 HTML”选项来获取它）。
那么，主要问题是如何在 WikidPad 和 reStructuredText 之间进行转换，反之亦然（自动且快速）？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:53:32.247

pandoc程序将在多种标记格式之间进行转换，包括 reStructuredText 和 HTML [。](http://johnmacfarlane.net/pandoc/)我不知道它是否原生支持 WikiPad，但您当然可以使用 HTML 作为中间表示。

也就是说，您可以将 WikiPad 翻译成 HTML，然后将 HTML 翻译成 reStructuredText。

# excel - 使 vba-excel 插件保持同步并使用正确的路径

> ID：10340897
> 
> 赞同：3
> 
> 时间：2012-04-26T20:24:04.133
> 
> 标签：excel, vba

> 一个模糊相关的问题似乎是：[Remove AddIn path from UDF in Excel formula](https://stackoverflow.com/questions/6414719/remove-addin-path-from-udf-in-excel-formula)

您好，我无法在两台计算机之间保持 excel vba 加载项同步。

计算机 A Windows 7 - Excel 2007

加载项的路径：%APPDATA%\Microsoft\AddIns

%APPDATA% = z:.windows\应用程序数据\

计算机 B Windows 7 - Excel 2010

加载项的路径 = %APPDATA%\Roaming\Microsoft\AddIns

%APPDATA% = c:\用户\用户名\漫游\

在每个目录中，我都有相同的 plugin.xlam 加载项文件。该插件包含以下形式的简单功能：

```
Public Function avog()
avog = 6.02214129E+23
End Function 
```

当我在计算机 A 中使用 avog 保存工作簿并在计算机 B 中打开它时，使用 avog 函数的每个地方都被 'pathname to addin file'!avog() 替换。由于每台计算机上的路径名称不同，因此我必须搜索并替换路径字符串以将其在工作簿中的任何位置删除。从 B 到 A 也是如此。

如何告诉excel停止添加路径？或者是否可以让excel知道该功能将在另一台计算机的不同位置可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:29:40.687

一种简单的方法是将其存储在相同的绝对路径中，例如 c:\program files\addins\xxxx.xlam。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-26T14:58:13.797

从以下位置获取绝对路径：

```
? Application.UserLibraryPath 
```

# uipageviewcontroller - UIPageViewController 从头开始

> ID：10340898
> 
> 赞同：0
> 
> 时间：2012-04-26T20:24:04.750
> 
> 标签：uipageviewcontroller

我想使用不使用 XIB 或 WYSIWYG Interface Builder 模板故事板样式方法从头开始实现 UIPageViewController 的处理。任何书籍或链接参考将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:40:38.190

[“查看IOS的控制器目录](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html)”中的描述如何？

# jquery - 我的 Internet Explorer 网站上的随机白框？

> ID：10340908
> 
> 赞同：0
> 
> 时间：2012-04-26T20:25:11.297
> 
> 标签：jquery, internet-explorer, web

我正在开发一个房屋销售网站，并且在使用（Gallerific）的jquery脚本上，仅在INTERNET EXPLORER中页面右侧出现一个随机白框。对于所有其他浏览器，它可以完美运行。如果您尝试选择应该在主房屋图像下方的文本，您可以看到它。

现在，我想知道为什么会出现这样的事情以及如何解决它。

你可以看看我有什么结果：http: [//img252.imageshack.us/img252/5921/wierdbox.jpg](http://img252.imageshack.us/img252/5921/wierdbox.jpg)

这是页面的链接：http: [//www.constructionneuvegatineau.com/maisons.html](http://www.constructionneuvegatineau.com/maisons.html)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:30:12.883

C'est 容易。

为该文本块设置 CSS：

```
background-color:transparent; 
```

# javascript - Javascript中对象和闭包的有趣和奇怪的行为

> ID：10340911
> 
> 赞同：3
> 
> 时间：2012-04-26T20:25:24.713
> 
> 标签：javascript, object, closures, prototype

查看代码

```
<script type = 'text/javascript'>
function a()
{
    ;
}
a.prototype.hello = function()
{
    alert('hello');
}
(function()
    {
        var b = 8;
    }
());
</script>​ 
```

我没有创建 a 的对象，也没有调用 hello()。但是我正在调用 hello()。

当我删除闭包时，不会自动调用该函数。IE。为了

```
<script type = 'text/javascript'>
function a()
{
    ;
}
a.prototype.hello = function()
{
    alert('hello');
}
</script> 
```

这种奇怪行为的原因是什么？

[http://jsfiddle.net/6yc9r/](http://jsfiddle.net/6yc9r/)

和
[http://jsfiddle.net/6yc9r/1/](http://jsfiddle.net/6yc9r/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:28:43.997

通过省略分号，您会意外调用 hello() 函数。这就是为什么要使用分号的原因，尽管 JS 引擎的自动分号插入功能使它们**看起来**没有必要！尝试这个：

```
<script type = 'text/javascript'>
function a()
{
    ;
}
a.prototype.hello = function()
{
    alert('hello');
};
(function()
    {
        var b = 8;
    }
());
</script>​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:28:41.637

原因是您缺少一个`;`.

因为函数表达式和下一行的之间没有分号`(`，所以第二个函数成为第一个函数的参数，如下所示：

```
a.prototype.hello = function()
{
    alert('hello');
}(function() { ... }()); 
```

# c# - Linq Join Multiple Criteria（数量未知）

> ID：10340915
> 
> 赞同：0
> 
> 时间：2012-04-26T20:25:34.043
> 
> 标签：c#, linq, entity-framework, lambda

我需要在 linq 查询中加入多个条件，我有一个条件框，如下所示：

![在此处输入图像描述](../Images/445b06770387819b60bcac05b79555ab.png)

目前我使用的查询比只能处理一个标签：

```
var c = *text after the t:*
var r = rs.Returns.Where(x => x.Lines.Any(y => y.Tags.Any(z => z.Name.Contains(c)))); 
```

我需要类似的东西（这可能不正确）：

```
var r = rs.Returns.Where(x => x.Lines.Any(y => y.Tags.Any(z => z.Name.Contains(*1st Tag*)) && y.Tags.Any(z.Name.Contains(*2nd Tag*)))); .. etc 
```

这样所有的`tags`已经`Line`被搜索并被`AND`应用。有没有简单的方法来实现这样的事情？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:30:18.907

```
var r = rs.Returns.Where(x => x.Lines.Any(y => searchTags.All(stag => y.Tags.Any(z => z.Name.Contains(stag))))); 
```

searchTags 应该包含所有要搜索的标签。无需使用循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:29:34.787

我想你正在寻找这样的东西：

```
List<string> tags = new List<string>() { "tag1", "tag2" };

var query = rs.Returns.AsEnumerable();
foreach(string tag in tags)
{
  string tmp = tag;
  query = query.Where(x => x.Lines.Any(y => y.Tags.Any(z => z.Name.Contains(tmp))));
} 
```

# iphone - Objective C 编码错误

> ID：10340917
> 
> 赞同：-4
> 
> 时间：2012-04-26T20:25:46.513
> 
> 标签：iphone

我收到一个错误并使用未清除的标识符“照片”使用未清除的标识符“图片”

这是我的代码

```
#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    photos = [[NSMutableArray alloc] init];
                               Use of undecleared idenifier 'photos'

    Photo *pic = [[Photo alloc] init];
    [pic setName:@"Aston Martin"];   Use of undecleared idenifier 'pic'
    [pic setFilename:@"Aston Martin DB6.jpg"]; Use of undecleared idenifier 'pic'
    [pic setNotes:@"Red is my favorite color."]; Use of undecleared idenifier 'pic'

    [photos addObject:pic];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:28:14.957

你需要让操作系统知道什么样的可变照片是这样的：

```
NSMutableArray *photos = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:28:07.347

您没有显示正在声明的照片，这就是您抱怨的第一条错误消息。

# objective-c - 使用objective c计算xml中的元素

> ID：10340919
> 
> 赞同：1
> 
> 时间：2012-04-26T20:26:07.773
> 
> 标签：objective-c, ios, xml, count

我有一个 XML 文件，我需要使用 Objective-C 计算元素在其中出现的次数。我该怎么做？

```
 <?xml version="1.0" encoding="ISO-8859-1"?>

<residents>
    <resident id="1">
        <name>
            <first>David</first>
            <last>Dollar</last>
        </name>
    </resident>

    <resident id="2">
        <name>
            <first>Michael</first>
            <last>Nipp</last>
        </name>
    </resident> 
```

ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:54:06.650

我会将您的类设置为解析器的委托，然后该类将接收解析事件，例如`parser:didStartElement:`,`parser:foundCharacters:`和`parser:didEndElement:`.

```
self.parser = [[NSXMLParser alloc] initWithData:xmlData];
[self.parser setDelegate:self]; 
[self.parser parse]; 
```

我会在您的解析器委托中创建一个计数变量。每当找到一个元素时，`didStartElement:`都会在解析器委托上调用该函数。检查它是否是“驻留”元素，如果是则增加计数。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"resident"]) {

        self.count += 1; 

    }
} 
```

# php - 图像密集型网页的加载速度

> ID：10340923
> 
> 赞同：1
> 
> 时间：2012-04-26T20:26:16.043
> 
> 标签：php, performance, image, load, web

我目前正在一个投资组合网站上工作，我必须在同一页面上加载大量照片。

这些图像是通过 PHP 动态加载的，目前我选择预先保存这些图像的缩略图版本并加载它们。

然而，我担心的是，如果网站有大量用户，这可能不是最佳解决方案：我基本上会将每张图片的副本乘以用户上传的图片数量。

我的问题是这个问题是否有更好的解决方案？一种在不占用太多空间的情况下尽可能快地加载页面的方法？

万分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:37:20.767

加载一个包含大量图像的网页会很慢。原因是传输这些图像所需的带宽。

你有几个选择

1.  以平铺模式加载完整图像。这些图像将是完整的图像，只是调整大小以适应“缩略图”视图。这样做的好处是您只保存了 1 张图像，但该图像是全尺寸的，并且需要很长时间才能加载。

2.  按照您所说的加载缩略图。这样做的好处是性能，但您需要存储每个图像的两个副本。此外，根据您处理缩略图创建的方式，您可能需要用户上传图像的两个副本以提供他们自己的缩略图......这可能会很糟糕。

3.  加载缩略图，但在上传时动态生成它们。您实际上是在磁盘上保留了两个图像副本，但您是通过一些 php 图像修改 API 动态创建它。这将加载更快，但仍会占用磁盘空间。它还最大限度地减少了提供缩略图的用户/管理要求。

4.  在请求页面时按需加载缩略图。这种方法需要一些测试，因为我从未尝试过。基本上，您将调用 php 图像修改 API（或者更好地外包到本机解决方案！）来创建一次性使用（或缓存）的缩略图以供使用。你可能会说“天啊，那会花很长时间！”。我认为如果您应用适当的缓存机制，这种方法实际上可能是可用的，这样您就不会不断地重新创建相同的缩略图。它将降低带宽，并且由于这里的限制因素是网络连接，因此它可能比仅发送完整图像更快（因为创建缩略图的限制因素现在是 CPU/内存/硬盘）。

我认为#4 是一个有趣的概念，可能值得探索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:30:17.093

1.  即时生成大图像的缩略图。（[一些提示](https://github.com/iambibhas/peperoni/blob/master/thumbget.php)）
2.  异步加载图像（尝试[JAIL](https://github.com/sebarmeli/JAIL)）
3.  分页
4.  缓存也是一种选择，但从第二次加载站点时开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:31:45.507

我的想法是：

A. 利用缓存（系统缓存，头中缓存，HTTP缓存..所有缓存）

B. 不要一直生成 Thumb

C. 使用作业排队系统（例如`Gearman`或`beanstalkd`来生成拇指，这样您就不必立即进行操作）

D. 使用`Imagick`更有效

E. 分页

F. 示例仅在原始文件已修改时生成拇指

```
$file = "a.jpg" ;
$thumbFile = "a.thumb.jpg" ;
$createThumb = true;
if(is_file($thumbFile))
{
    if((filemtime($file) - 10) < filemtime($thumbFile));
    {
        $createThumb = false;
    }
}

if($createThumb === true)
{
    $thumb = new Imagick();
    $thumb->readImage($file);
    $thumb->thumbnailImage(50, null);
    $thumb->writeImage($thumbFile);
    $thumb->destroy();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T20:33:33.883

考虑使用所有图像的精灵或拼贴，以便只加载一个较大的图像，从而节省带宽并减少页面加载时间。

此外，正如已经建议的那样，分页和异步加载可以对其进行一些改进。

参考：

*   [http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)
*   [http://en.wikipedia.org/wiki/Sprite_(computer_graphics)#Sprites_by_CSS](http://en.wikipedia.org/wiki/Sprite_(computer_graphics)#Sprites_by_CSS)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T20:33:36.840

**是**的，缓存缩略图是个好主意，如果做得好，效果会很好。这种东西是[横向缩放](http://en.wikipedia.org/wiki/Horizontal_scaling#Scale_horizontally_.28scale_out.29)的好地方。

1.  您应该考虑使用 [CDN](http://en.wikipedia.org/wiki/Content_delivery_network)。（或者可能实现类似的东西。）缓存系统将生成通常请求大小的图像，并在以后不经常请求它们时将它们清理掉。
2.  您还可以水平扩展并将此服务移植到网络或云中的另一台服务器或虚拟服务器。

这是一个磁盘密集型和带宽密集型的东西，图像传输。没有视频那么差！

# iphone - 核心数据：编辑许多属性滞后性能

> ID：10340925
> 
> 赞同：2
> 
> 时间：2012-04-26T20:26:26.073
> 
> 标签：iphone, objective-c, core-data, nsarray

我有一个从 CoreData 获取的 36 行数组。每行具有三个属性：podNumber、pieceNumber 和 colorNumber。

我想要做的是将结果分成六人一组。这样每个豆荚有六块，这些将被洗牌。

我能够有效地做到这一点；但是，当我使用随机值更新 CoreData 时，性能明显变慢。我想说完成循环需要 1-1.5 秒。

我尝试了两种方法：1）从 CoreData 中删除旧数组并添加一个新数组 2）在 CD 中搜索唯一行并更新

我发现第一种方法稍微快一点。有人对我如何加快速度有任何见解吗？有没有更有效的方法来更新大批量的核心数据。我是否需要将其设为后台进程以及如何工作。

谢谢。乔丹

这里是方法一：

```
//Fetch them all and then delete them all
NSFetchRequest * fetchPieceColors = [[NSFetchRequest alloc] init];
[fetchPieceColors setEntity:[NSEntityDescription entityForName:@"PieceColors" inManagedObjectContext:managedObjectContext]];
[fetchPieceColors setPredicate:[NSPredicate predicateWithFormat:@"(game = %@)",games]];
[fetchPieceColors setIncludesPropertyValues:NO]; 

NSError * error = nil;
NSArray * pieceColor = [managedObjectContext executeFetchRequest:fetchPieceColors error:&error];
[fetchPieceColors release];
for (NSManagedObject * piece in pieceColor) {
    [managedObjectContext deleteObject:piece];
}
NSError *saveError = nil;
[managedObjectContext save:&saveError];

//Add back
for (int b=0;b<6;b++) {
    for (int j=0;j<6;j++) {
        NSError *error;
        NSManagedObject *fetchPieceColors = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"PieceColors" 
                                   inManagedObjectContext:managedObjectContext];
        [fetchPieceColors setValue:[NSNumber numberWithInt:b] forKey:@"podNumber"];
        [fetchPieceColors setValue:[NSNumber numberWithInt:j] forKey:@"pieceNumber"];
        [fetchPieceColors setValue:[shuffledArray objectAtIndex:(b*6)+j] forKey:@"colorNumber"];
        [fetchPieceColors setValue:games forKey:@"game"];

        if (![managedObjectContext save:&error])
        {
            NSLog(@"Problem saving: %@", [error localizedDescription]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:44:34.517

正如 timthetoolman 指出的那样，击中磁盘的 IO 才是杀手。您需要做的是获取内存中的所有数据，进行编辑，然后一次保存所有数据。

的[Efficiently Importing Data](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html)提供了`Core Data Programming Guide`一些有用的提示，说明您可以采取哪些措施来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:33:42.493

对于您尝试的任何一种方法，请在运行完嵌套循环后保存 managedobjectContext。是 MOC 保存击中磁盘并导致速度变慢。除非您正在操作 100 或 1000 的对象，在这种情况下，您会想要跨过 MOC 保存。

MOC 是一个便笺簿，它保存您的所有编辑，直到您保存它们。因此，您可以在完成操作后等待保存它们。

我不会删除对象并重新创建它们。这只是不必要的磁盘抖动。

祝你好运

# c# - 通信协议的可维护性 - 重叠或单独的请求？

> ID：10340937
> 
> 赞同：2
> 
> 时间：2012-04-26T20:27:28.880
> 
> 标签：c#, network-programming

我目前正在将一个有点广泛的通信协议改造成更容易使用的东西，这是一个固执己见的问题，但根据您的经验，随着代码变得越来越大，这两个想法中的哪一个更容易维护。

有一个客户端和一个服务器。服务器具有客户端可能想要的信息，A、B、C、D 等。信息不是单个数据集，如名称，而是名称列表。一般是一列的全部内容。客户通常会希望这些东西分组，如 ABC、DEF、ABD 等。没有大量重叠（这意味着，通常 80% 的 A 请求也是 B 和 C 的请求）。

随着系统变得越来越大，维护通信协议工作的系统变得更容易，如下所示：

```
Request 1: Server returns ABC
Request 2: Server returns ABD 
```

或者

```
Request 1: A
Request 2: B
Request 3: C 
```

ETC

我倾向于使用第一个，因为它似乎使代码更易于阅读和使用，并且对组有特殊请求，例如 ABC，通常可以让服务器在其数据库上运行更少的查询来获得需要的信息。但是代码库将比现在大得多，而且由于我已经花时间彻底检查客户端和服务器的通信方式，所以我想听听这里的人们使用非此即彼方法的一些经验.

编辑：请注意，我不仅在谈论网络流量，还包括服务器将如何处理这些请求之类的事情。如果客户端发出三个单独的请求，服务器将不得不发出三个数据库查询，因为分组请求很可能作为单个查询运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:35:22.467

我认为这是一个“过早优化”的案例。

1.  你不知道是否真的会出现性能问题。
2.  您正在寻找您所说的更复杂的代码来解决*感知的*性能问题。
3.  实际上，第二个选项可能性能*更差*（考虑哪个更重 - 接受连接并处理请求，或发送稍长的响应）？

现在，您更有可能发现任何瓶颈或性能问题都可能与您查找此信息的位置（例如，在数据库中）有关。在这种情况下，您可以在不影响协议的情况下调整该端的性能（例如，您可以缓存 DB 返回的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:33:52.170

(2) 将更简单，但 (1) 效率更高且不那么复杂。我会选择（1）。它为您提供最佳的长期策略。

仔细想想，请求输入要么是 (2) 中的 T，要么是 (1) 中的 T[]。使用数组并不复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:33:26.217

好吧，如果性能不是问题，您应该保留更简单的协议，该协议将提供您需要的一切，并保持代码更小更整洁。

如果性能是一个问题 - 它有多大？是否足以保证增加的复杂性？

# jquery - css和jquery问题

> ID：10340938
> 
> 赞同：0
> 
> 时间：2012-04-26T20:27:31.947
> 
> 标签：jquery, css

我正在为我父亲的公司设计一个布局，现在我需要在他们最近的合同之间制作一个滑块......旁边有他们专业知识的按钮等。如果你按下其中一个按钮，它应该滑动到列出他们的专业知识。

但是专业幻灯片效果不佳，我刚刚发现不应该显示的幻灯片就在文本的其余部分之后 混淆（当您刚刚打开页面时检查页脚下方）可以有人帮我吗？

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>IDIS | International Development Innovation Service</title>
    <link href="css.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
    var step = 1;
    var slide = "";
    var interval;
    $(document).ready(function(){
      interval = setInterval("change()", 5000);
    });
    /*if(slide !== "")
    {
     $("#" + slide).mouseleave(function(){
        $("#" + step).slideDown("slow");
        $("#" + slide).slideUp("slow");
        interval = setInterval("change()", 15000);
     });
    }*/
   expertise = function()
    {
       clearInterval(interval);
       $("#4").slideDown("slow");
       $("#" + step).slideUp("slow");
       slide = "4";
    };
    change = function()
    {
       var oldstep = step;
       step++;
       if(step === 4)
       {
        step = 1;
       }
       $("#" + step).slideDown("slow");
       $("#" + oldstep).slideUp("slow");
    };
</script>
  </head>
  <body>
   <div class="content">
   <!-- HEADER -->
      <div class="textchoice"><a href="#">Fran&ccedil;ais</a> - <a href="#">English</a></div>
      <div class="headertekst">
        <div class="logo"></div>
        <div id="slogan">Challenging Changes</div>
        <div id="name">International Development Innovation Services</div>
      </div>
      <!--  MENU BAR-->
      <div class="bar">
        <div class="menubar">
          <ul>
            <li><a href="#" onclick="expertise()">EXPERTISE</a></li>
            <li><a href="#">GEOGRAPHIC AREAS</a></li>
            <li><a href="#">VIEW ALL</a></li>
          </ul>
        </div>
        <!-- SLIDER 1 -->
        <div class="slider" id="1">
          <div class="img">
            <img src="images/Tawaz (1).jpg" width="85" height="64"/><br />
            2012
          </div>
          <div class="contractstekst" id="1">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed malesuada arcu laoreet est luctus luctus. Proin pharetra ullamcorper ullamcorper. Sed pretium interdum massa vitae eleifend. Integer tincidunt bibendum convallis. Ut.
          </div>
          <div class="title">
            CONTRACTS
          </div>
         </div>

          <!-- SLIDER 2 -->
        <div class="slider" id="2">
          <div class="img">
            <img src="images/Tawaz (1).jpg" width="85" height="64"/><br />
            2011
          </div>
          <div class="contractstekst">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed malesuada arcu laoreet est luctus luctus. Proin pharetra ullamcorper ullamcorper. Sed pretium interdum massa vitae eleifend. Integer tincidunt bibendum convallis. Ut.
          </div>
          <div class="title">
            CONTRACTS
          </div>
         </div>

          <!-- SLIDER 3 -->
        <div class="slider" id="3">
          <div class="img">
            <img src="images/Tawaz (1).jpg" width="85" height="64"/><br />
            2010
          </div>
          <div class="contractstekst">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed malesuada arcu laoreet est luctus luctus. Proin pharetra ullamcorper ullamcorper. Sed pretium interdum massa vitae eleifend. Integer tincidunt bibendum convallis. Ut.
          </div>
          <div class="title">
            CONTRACTS
          </div>
         </div>

          <!-- EXPERTISE -->
        <div class="img">
            <img src="images/Tawaz (1).jpg" width="85" height="64"/><br />
            2010
          </div>
          <div class="contractstekst">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed malesuada arcu laoreet est luctus luctus. Proin pharetra ullamcorper ullamcorper. Sed pretium interdum massa vitae eleifend. Integer tincidunt bibendum convallis. Ut.
          </div>
          <div class="title">
            EXPERTISE
          </div>
         </div>
        <!-- HIER BEGINT DE TEKST IN HET WITTE VAK -->
      <div class="witvak">
        <div class="witvakmenu">
          <ul>
            <li><a href="#">HOME</a></li>
            <li><a href="#">PEOPLE</a></li>
            <li><a href="#">PARTNERS</a></li>
            <li><a href="#">CONTACT</a></li>
          </ul>
        </div>
        <!-- HIER KOMT DE CONTENT -->
        <div class="witvakcontent">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut at sapien arcu, condimentum pulvinar elit. Suspendisse sed lacus at sapien sollicitudin vulputate. Phasellus sem nunc, venenatis at egestas nec, egestas vitae nisi. Etiam eu ante mauris, sed vulputate felis. Duis euismod eros in tortor gravida ut scelerisque ante condimentum. Vivamus id orci quis elit convallis tempor. Suspendisse elit nulla, posuere vel ullamcorper vel, accumsan a sapien. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam vestibulum, elit quis feugiat posuere, sem urna laoreet nisi, rutrum fermentum leo nunc a ligula. Curabitur tristique neque nec arcu pulvinar aliquet. Sed non commodo metus. Phasellus fermentum vestibulum interdum. Donec id nulla elit, at pharetra lacus. Proin ac neque quis velit commodo venenatis sed quis nunc. Sed nec diam augue. Duis at lectus nunc.
        </div>
      </div>
      <!-- DE FOOTER-->
      <div class="footer">
        Krombrakenstraat 19  B-2460 Kasterlee  Belgium  |  info@idis.be  |  tel.: (+32) 478/644 609
      </div>
   </div>
  </body>
</html> 
```

和CSS

```
body {
background-color:#eef6e9;
background-image:url('images/background.png');
background-position:center top;
background-repeat: no-repeat;
}
.content {
width: 1240px;
margin: 0px auto;
}
a {
text-decoration: none;
}
a:link {
color:#000000;
}
a:hover {
color:#82c225;
}
a:visited {
color:#000000;
}

/* HEADER */
.headertekst {
font-family: bimini;
width: 1240px;
margin: 0px auto;
}

#slogan {
display: inline-block;
margin-left: 377px;
margin-top: 10px;
font-size: 44px;
}
#name {
display: inline-block;
margin-top: 7px;
margin-left: 270px;
font-size: 25px;
}

.textchoice {
font-family: Trebuchet MS;
margin-top: 3px;
margin-right: 164px;
float:right;
}
.logo {
margin-top: 9px;
margin-left: 188px;
background-image:url('images/logo.png');
width: 158px;
height: 145px;
float: left;
}

/*CONTRACTS BAR*/
.bar {
width: 1002px;
height: 124px;
margin: 18px 124px 0px 124px;
float: left;
background-image:url('images/contracts_bar.png');
background-repeat:y-repeat;
}
.menubar {
float: left;
width: 270px;
height: 124px;
font-family: bimini;
text-align: right;
color: white;
margin-left: -50px;
margin-top: -17px;
font-size: 21px;
line-height: 40px;
}
.menubar ul {
list-style-type: none;
}
.menubar a {
text-decoration: none;
}
.menubar a:link {
color:#FFFFFF;
}
.menubar a:hover {
color:#82c225;
}
.menubar a:visited {
color:#FFFFFF;
}
.slider {
float: left;
height: 124px;
width: 675px;
margin-left: 64px;
}
/* IDS VAN SLIDERS */

#2 {
display:none;
}
#3 {
display:none;
}
#4 {
display:none;
}
.img {
float: left;
margin-top: 21px;
height: 124px;
width: 89px;
text-align:right;
font-family: bimini;
color:white;
font-size: 21px;
}
.img img{
border-style: solid;
border-color: white;
border-width: 2px;
}
.contractstekst {
color: white;
float: left;
font-family: Trebuchet MS;
font-size: 13px;
margin-left: 31px;
margin-top: 15px;
width: 400px;
height: 100px;
}
.title {
color: white;
float: left;
font-family: bimini;
font-size: 29px;
margin-left: 20px;
margin-top: 23px;
text-align: right;
width: 40px;
}

/*WITVAK*/
.witvak {
width: 1002px;
background-color:#FFFFFF;
float: left;
margin-left: 124px;
}
.witvakmenu {
width: 220px;
float: left;
text-align: right;
font-family: bimini;
font-color: black;
font-size: 21px;
line-height: 40px;
}
.witvakmenu ul {
list-style-type: none;
}
.witvakmenu a {
text-decoration: none;
}
.witvakmenu a:link {
color:#000000;
}
.witvakmenu a:hover {
color:#82c225;
}
.witvakmenu a:visited {
color:#000000;
}
.witvakcontent {
font-family: Trebuchet MS;
margin-top: 27px;
font-size: 15px;
float: left;
width: 675px;
margin-left: 64px;
padding-bottom: 20px;
}

/*FOOTER*/
.footer {
background-color:#0c651a;
text-align: center;
font-family: Trebuchet MS;
width: 1002px;
height: 24px;
margin-left: 124px;
color: white;
font-size: 14px;
float: left;
} 
```

这是一个演示： [http](http://legendofthesamurai.gamecoll.com/idis/) ://legendofthesamurai.gamecoll.com/idis/ 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:29:52.733

我相信我已经找到了错误：p 这只是因为脚本找不到 CSS id（我认为这就是原因）。

# cocos2d-iphone - 花栗鼠/空间管理员

> ID：10340939
> 
> 赞同：0
> 
> 时间：2012-04-26T20:27:40.670
> 
> 标签：cocos2d-iphone, chipmunk

我已经在一个项目上工作了几个月，并决定更新到 cocos2d 1.0.0，现在我的程序一直在这个方法上崩溃

```
[smgr morphShapeToActive:self.currentFootball.shape mass:25]; 
```

一位朋友告诉我，这种方法在较新的花栗鼠版本中已被弃用。这是真的吗？如果是这样，如果它不再存在，我将如何去做。现在还有人可以找出哪些方法被弃用了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:36:26.510

我对 SpaceManager 不是很熟悉，但该功能几乎可以肯定会添加和删除形状。你是从回调中调用它吗？你不能这样做，它可能有也可能没有断言来确保你没有。

至于检查它是否已被弃用，它在标题中说了什么？

# django - 使用左连接填充 Django 表单集

> ID：10340942
> 
> 赞同：0
> 
> 时间：2012-04-26T20:28:01.720
> 
> 标签：django, formset

我有以下模型：Topic、UserProfile、UserSubscribedToTopic

最后一个看起来像这样：

```
class UserSubscribedToTopic(models.Model):
    topic = models.ForeignKey(Topic)
    user_profile = models.ForeignKey(UserProfile)
    start_date = models.DateField(null=True, blank=True) 
```

我想向用户显示一个主题列表，每个主题都有一个复选框。如果用户选中一个复选框，那么我将使用 JavaScript 来显示“开始日期”文本字段（因此出于这个问题的目的，我只需要在复选框旁边显示一个文本字段）。如果用户已经保存了他们的选择并且正在重新访问页面，我想在表单首次呈现时相应地填充表单。

我尝试使用表单集来做到这一点：

```
class SubscribeToTopicForm(ModelForm):
class Meta:
    model = UserSubscribedToTopic
    fields = ('topic','start_date')
    widgets = {'topic': CheckboxInput(attrs={'class': 'topic-checkbox'}),
               'start_date': TextInput(attrs={'class': 'date','placeholder': 'Start date'})}

SubscribeToTopicFormSetBase = modelformset_factory(
    UserSubscribedToTopic,
    form=SubscribeToTopicForm,
    extra = 0)

class SubscribeToTopicFormSet(SubscribeToTopicFormSetBase):
def add_fields(self, form, index):
    super(SubscribeToTopicFormSet, self).add_fields(form, index) 
```

如果我将以下内容添加到我的视图中，我几乎得到了我想要的东西：

```
topics_formset = SubscribeToTopicFormSet(queryset=UserSubscribedToTopic.objects.filter(user_profile=user.get_profile())) 
```

但是，显然这只会显示用户已经订阅的主题。要显示我真正需要做的所有主题是在主题表上的左连接。如果不求助于 raw，我看不到如何在 Django 中执行此操作。

我的问题：

*   我是否认为不可能为从左连接生成的表单集指定查询集？
*   放弃 ModelForm 并使用我手动填充的表单集会更好吗？
*   有更好的方法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:48:56.437

您应该在模型上创建表单`Topic`，然后使用`user_set`管理器查看当前用户是否订阅了该主题。

提交表单后，如果选中了任何字段，则可以`UserSubscribedToTopic`在视图中创建单个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:57:41.067

我最终将复选框与日期字段分开，因此我可以在表单中使用 forms.ModelMultipleChoiceField 和手动创建的表单集来处理日期字段。

这是代码：

形式：

```
class SubscribedToTopicForm(ModelForm):
    subscribed_to_topic = forms.ModelMultipleChoiceField(required=False,queryset=Topic.available_topics, widget=forms.CheckboxSelectMultiple(attrs={'class': 'topic-checkbox'}))
    class Meta:
    model = UserProfile
    fields = ("subscribed_to_topic",)

    def get_checked_topics(self):
        return self.cleaned_data['subscribed_to_topic']

class StartDateForm(forms.Form):
    topic_id = forms.CharField(widget=forms.HiddenInput,required=False)
    start_date = forms.DateField(required=False,label='')

StartDateFormSetBase = formset_factory(form=StartDateForm,extra = 0)

class StartDateFormSet(StartDateFormSetBase):
    def get_start_date(self, topic_id):
        for i in range(0, self.total_form_count()):
            form = self.forms[i]
            form_topic_id=long(form.cleaned_data['topic_id'])
            if topic_id == form_topic_id:
                return form.cleaned_data['start_date']
        return '' 
```

看法：

得到：

```
topics_form = SubscribedToTopicForm()
subscribed_to_topic=None
if request.user.is_authenticated():
    subscribed_to_topics = SubscribedToTopic.objects.filter(user_profile=request.user.get_profile())
initial_data = []
for topic in Topic.available_topics.all():
    start_date=''
    if subscribed_to_topics:
        for subscribed_to_topic in subscribed_to_topics:
            if subscribed_to_topic.topic.id==topic.id:
                start_date=subscribed_to_topic.start_date
    initial_data.append({'topic_id':topic.id, 'start_date': start_date})
start_date_formset = StartDateFormSet(initial=initial_data) 
```

邮政：

```
start_date_formset = StartDateFormSet(request.POST)
topics_form = SubscribedToTopicForm(request.POST)
start_date_formset.is_valid()
topics_form.is_valid()
for topic in topics_form.get_checked_topics():
    start_date = start_date_formset.get_start_date(topic.id)
    subscribed_to_topic = SubscribedToTopic()
    subscribed_to_topic.topic=topic
    subscribed_to_topic.start_date=start_date
    subscribed_to_topic.save() 
```

# c# - 更好的算法性能

> ID：10340946
> 
> 赞同：0
> 
> 时间：2012-04-26T20:28:07.313
> 
> 标签：c#

我有这样的事情：

```
using (SqlDataAdapter a = new SqlDataAdapter(query, c))
            {
                // 3
                // Use DataAdapter to fill DataTable
                DataTable t = new DataTable();
                a.Fill(t);

                string txt = "";
                for (int i = 0; i < t.Rows.Count; i++)
                {
                    txt += "\n" + t.Rows[i][0] + "\t" + t.Rows[i][1] + "\t" + t.Rows[i][2] + "\t" + t.Rows[i][3] + "\t" + t.Rows[i][4] + "\t" + t.Rows[i][5] + "\t" + t.Rows[i][6] + "\t" + t.Rows[i][7] + "\t" + t.Rows[i][8] + "\t" + t.Rows[i][9] + "\t" + t.Rows[i][10] + "\t" + t.Rows[i][11] + "\t" + t.Rows[i][12] + "\t" + t.Rows[i][13] + "\t" + t.Rows[i][14] + "\t" + t.Rows[i][15] + "\t" + t.Rows[i][16] + "\t" + t.Rows[i][17] + "\t" + t.Rows[i][18] + "\t" + t.Rows[i][19];
                }

            } 
```

我需要列之间的这个选项卡稍后生成 txt 文件。问题是 t.Rows.Count = 600000 并且这个循环工作 9 小时。任何想法如何使这更快？

问候卡兹克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:28:53.587

使用 a`StringBuilder`而不是连接你的字符串。

```
 string txt = "";
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < t.Rows.Count; i++)
            {
                sb.Append(t.Rows[i][0]); 
                sb.Append("\t");
                sb.Append(t.Rows[i][1]);
                //and so on...
           }
           string txt = sb.ToString(); 
```

将一个字符串添加到另一个字符串（通过再次分配它）相对于*组合字符串*的长度需要付出努力- 这对于大字符串来说非常昂贵 - 这是一个[Schlemiel the Painter 的算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)。使用 a`StringBuilder`可以避免这种情况，因为每次向其内容添加新字符串时都不必创建新字符串。

我不得不质疑为什么您将所有这些数据保存在内存中只是为了将其写入文件 - 您应该切换到允许您逐行生成文本内容的模型，我建议改用数据阅读器和产生文本行的方法，例如：

```
public IEnumerable<string> GenerateTextOutput()
{
   //...
   //using SqlDataReader instead
   while(reader.Read())
   {
     //assemble string for next row
     string txt = "...";
     yield return txt;
   }
} 
```

然后您可以将此输出写入磁盘：

```
File.WriteAllLines("foo.txt", GenerateTextOutput()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T20:28:59.873

使用字符串生成器。您可以在网络上随处找到示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:37:15.093

其他人提到`StringBuilder`，他们是正确的。但是，请注意，在 .NET 4 中，StringBuilder 变得更加高效，完全避免了重新分配和内存复制。如果您使用的是 .NET 的早期版本，您将获得更差的性能。它仍然会打败你正在做的事情。

我想知道你`txt`准备好之后在做什么。您可能希望避免将字符串完全存储在内存中，并将其直接写入文件（我不相信您正在向用户展示 600,000 行......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:33:43.210

`StringBuilder`其他人已经提到过，应该会带来显着的好处。

您*真的*需要将整个文本保存在 600K 行的内存中吗？您可以通过直接写入文件来加快速度。

对于这么多的迭代，将 Rows[i] 分配给一个变量也可能会提供一些额外的加速。

# java - 我如何将 Android 与 Java 和使用 Scala 的核心一起使用？

> ID：10340951
> 
> 赞同：4
> 
> 时间：2012-04-26T20:28:18.923
> 
> 标签：java, android, scala, intellij-idea, sbt

我使用 Scala (SBT + IntellijIDEA) 做了一个小项目，它为我提供了一组我想在 Android 中使用的类和其他功能。我将把这个项目称为$core。

所以，记住这一点，我首先尝试只使用 scala。我尝试使用 android-plugin 创建一个 Android 项目，我得到了它。

但我真正想要的是在 Android 项目中使用我的 $core 并使用 Java 扩展 $core 类。$core 提供了一个我希望更多人使用的 API，而且他们可能不了解 Scala，因此 Java 将是完美的。此外，我需要使用 Android 进入安全路线。我看到一些信息表明 scala 需要花费大量时间才能编译到 Android 中并且有一些限制（例如使用 parceblles）。

我已经尝试通过导入类文件夹选项在 eclipse 中使用这些类。我什至尝试生成一个 jar，所以至少我有办法运行它但没有成功。当我尝试使用 $core 中的一个类时，总是出现 NoClassDef 错误。我也尝试导入 scala 编译器库，但也没有成功......

核心还没有完成，我想在一个允许我在 android 设备上调试的单一环境上进行开发。我该如何设置所有这些？

PS：现在改成eclipse可能会更好？从未在 intellijIDEA 和 scala 上尝试过 android 我无法在那里调试，至少使用 ScalaCheck ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:21:52.067

在使用 java 中的 Scala 代码时，是否有可能出现 noclassdeffound 错误，因为您没有将 Scala 库添加到 java 项目中，或者至少包含了它在 jar 中的 Scala 代码中使用的部分？

你能发布其余的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T16:34:28.320

您可以将核心与 Scala 库一起打包到 .jar 中，使用 Proguard 从中删除所有未使用的 Scala 库类，然后将该 jar 用作常规库。

# javascript - 为什么脚本在评估同一脚本中的“element.checked”时会有所不同，作用于具有相同结构的不同表行？

> ID：10340958
> 
> 赞同：0
> 
> 时间：2012-04-26T20:28:53.233
> 
> 标签：javascript

我写了这个问题的答案：[Fetch content of next td on checkbox click](https://stackoverflow.com/questions/10340258/fetch-content-of-next-td-on-checkbox-click/10340463)，答案被接受（在写这个问题时）。

目的是在包含输入复选框的当前单元格之后找到表格单元格的文本值；对于第二行，这是可行的（在 Chrome 18/WinXP 中），但在第一行中，评估的`console.log(that.checked);`评估结果为 false（据我所知，不管它是否被检查）。

提供的 HTML：

```
<table>
    <tr>
        <td>
            <input type=checkbox name=t>
        </td>
        <td width=25%>
            FOOBAR
        </td>
        <td width=73%>
            BAZ
        </td>
    </tr>
    <tr>
        <td>
            <input type=checkbox name=t>
        </td>
        <td width=25%>
            FOO
        </td>
        <td width=73%>
            BAR
        </td>
    </tr>
</table> 
```

还有我的 JavaScript：

```
var c = [];

c = window.document.getElementsByTagName('input');

for (var i = 0; i < c.length; i++) {
    var that = c[i];
    if (that.type == 'checkbox') {
        that.onchange = function() {
            console.log(that.checked);
            if (that.checked){
                console.log(that.parentNode.nextElementSibling.firstChild.nodeValue.trim());
            }
        };
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/z88HH/2/)。

请注意，它*似乎*对第二行（并记录`FOO`到控制台）可靠地工作，但在第一行中，控制台仅记录`false`. 我犯了一个明显的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:37:18.917

您实际上遇到了与`checked`. 您的`that`变量超出了事件处理程序的范围，因此它始终解析为`c[1]`. 您需要将事物包装在闭包中（也`function () { ... }();` 就是更改`that`为`this`事件处理程序内部，如下所示：http: [//jsfiddle.net/z88HH/3/](http://jsfiddle.net/z88HH/3/)

```
for (var i = 0; i < c.length; i++) {
    var that = c[i];
    if (that.type == 'checkbox') {
        that.onchange = function() {
            console.log(this.checked);
            if (this.checked){
                console.log(this.parentNode.nextElementSibling.firstChild.nodeValue.trim());
            }
        };
    }
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:39:32.710

并不`that`总是最后一行，例如 try `console.log(that, that.checked)`，将其包装在闭包中，请参阅您编辑的[jsFiddle](http://jsfiddle.net/z88HH/8/)

```
for (var i = 0; i < c.length; i++) {

    if (c[i].type == 'checkbox') {
        c[i].onchange = function(){ 
            var that = c[i];                    
            return function() {
            console.log(that, that.checked);
            if (that.checked){
                console.log(that.parentNode.nextElementSibling.firstChild.nodeValue.trim());
            }
    }}();
    }
}​ 
```

# ios - DocInteraction 与 iOS5

> ID：10340969
> 
> 赞同：1
> 
> 时间：2012-04-26T20:29:48.117
> 
> 标签：ios, quicklook, qlpreviewcontroller

我在 Apple 网站上找到了 DocInteraction 项目的示例代码——我现在正在关注 QuickLook 部分。

该代码是为比 5.1 更旧的版本编写的，这没问题，但是当我想实现该代码时它给了我很多错误。

有谁知道我在哪里可以找到该代码的 iOS 5.0 版本？或解释它的教程？

干杯杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:21:03.007

我在这里找到了一个教程：

[http://ios.biomsoft.com/2012/02/17/load-a-pdf-file-in-the-iphone-app-smoothly/](http://ios.biomsoft.com/2012/02/17/load-a-pdf-file-in-the-iphone-app-smoothly/)

# php - 循环多个上传表单字段

> ID：10340978
> 
> 赞同：1
> 
> 时间：2012-04-26T20:30:28.693
> 
> 标签：php, file, loops, upload

我在 PHP 中有一个多文件上传表单。我像这样遍历文件输入框：

while(list($key,$value) = each($_FILES['images']['name']))

我添加了一个描述框，所以现在我将 description[] 作为另一个字段。

如何遍历文件和描述框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:35:22.453

您可以尝试同时处理两者

```
foreach ( $_FILES ['image'] ['tmp_name'] as $key => $val ) {
    $fileName = $_FILES ['image'] ['name'] [$key]; // FileName
    $fileDesc = $_POST['description'][$key]; // Work on Description
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:40:23.207

你应该迭代：`foreach( $_FILES as $file ) { ... }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:35:52.847

很可能两者都具有相应的相同键。所以

```
foreach($_FILES['images']['name']) as $k=>$v)
{
    echo $v."<br>";
    echo $description[$k]."<br>";
} 
```

# asp.net-mvc-3 - 连接拒绝在 MVC3 上执行 [RequestHttps] 操作

> ID：10340979
> 
> 赞同：0
> 
> 时间：2012-04-26T20:30:31.947
> 
> 标签：asp.net-mvc-3

我正在尝试保护我网站的一部分并希望使用 HTTPS 以便对包进行加密，但是当我这样做时，我得到了

错误 102 (net::ERR_CONNECTION_REFUSED)：服务器拒绝连接 <- 已翻译

```
[HttpGet]
[RequireHttps]
public ActionResult Login()
{
    return View();
} 
```

如果我删除了 RequireHttps 并且不在我的浏览器中执行 Https 我没有问题到达它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:31:59.983

您是否在 IIS 下正确设置了 HTTPS？如果您使用的是 Cassini，我相信 HTTPS 不可用。

见这里 - [http://learn.iis.net/page.aspx/144/how-to-set-up-ssl-on-iis/](http://learn.iis.net/page.aspx/144/how-to-set-up-ssl-on-iis/)

# php - 升级的 Drupal - 现在数据库中有序列化数据

> ID：10340984
> 
> 赞同：2
> 
> 时间：2012-04-26T20:30:53.907
> 
> 标签：php, serialization, drupal-6

我刚刚升级到 Drupal 6.25 并将一些模块升级到最新版本：profile_checkboxes、views、devel 和 date。现在，当我进入之前设置为显示站点注册人的视图时，我看到了几个值，例如名字（存储在 profile_values 表中），作为序列化数组在视图中返回 - 如下所示：

```
a:1:{i:0;s:11:"First Name";} 
```

如果我进入前端的配置文件编辑器，它也会作为数组返回。如果我从前端更新名字并提交，它会在没有数组的情况下在数据库中更新。

任何人都可以帮我解释为什么会发生这种情况以及我能做些什么来解决它吗？啊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:59:37.440

**恢复升级前的备份。**

如果做不到这一点，只需将 Drupal 文件替换为以前版本的文件即可恢复工作状态。

从那里调试。

# c++ - 重载赋值运算符 C++

> ID：10340985
> 
> 赞同：0
> 
> 时间：2012-04-26T20:30:54.700
> 
> 标签：c++, arrays, templates, operator-overloading

作业分配要求重载 Heap 类的寄售运算符，该类用于在每个节点存储指向队列的指针，以尝试模拟急诊室优先级队列。

到目前为止，这是我想出的代码：

```
 template <typename T>
    Heap<T>& Heap<T>::operator=(const Heap<T> & rhs)
    {
        //check for self-assignment
        if(this != &rhs)
        {
            //delete memory
            for(int i = 0; i < MAX_HEAP; i++)
            {
                //delete queue at position i, set pointer to NULL
                delete items[i];
                items[i] = NULL;
            }//end for
            delete * items;

            //create new memory to hold copy of rhs

                        //error occurs here
            items = new queue<T> *[MAX_HEAP] ;

            for(int i = 0; i < MAX_HEAP; i++)
                items[i] = rhs.items[i];

            //assigns new stuff to this heap
            size = rhs.size;
            nodes = rhs.nodes;

        }//end if
        return *this;
    }//end = 
```

items 在头文件中声明如下：

```
 queue<T>* items[MAX_HEAP]; 
```

并且是标准库队列的一个实例。

我不太确定我是否使用正确的语法来创建一个新的动态队列指针数组。

我收到一条错误消息：

```
 error C2440: '=' : cannot convert from 'std::queue<_Ty> **' to 'std::queue<_Ty> *[50]' 
```

关于可能导致它的原因以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:35:55.467

你已经被`items`宣布为`std::queue<T> *items[50];`. 使用`std::queue<T> ** items;`，或者，更好，`std::vector<std::queue<T>> items;`

此外，`delete * items;`应该是`delete[] items;`

编辑 - 我忘了添加`<T>`之后`std::queue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:38:22.910

`new`返回一个指向传入类型的指针，所以它现在不匹配。我不知道您的项目声明或传递给 new 的类型是否是您的意思，但传递给 new 的声明比项目多一级间接性。

# apache - mod_rewrite - Apache 是否缓存 .htaccess 规则？（即使删除 .htaccess 文件后仍然遵守规则）

> ID：10340989
> 
> 赞同：8
> 
> 时间：2012-04-26T20:31:16.463
> 
> 标签：apache, mod-rewrite

我在我的 wamp 环境中使用 mod_rewrite 进行了一些测试。

我测试了一个简单的规则，我把它放在我的一个网站的根目录，并要求它将任何以 index.php 结尾的请求重定向到本地主机（这没有意义，只是想检查规则）

它起作用了，但是之后，我对 .htaccess 文件规则所做的任何更改都没有反映出来。过了一会儿，我决定删除 .htaccess ......好吧，它仍在进行重定向！我只是不明白。Apache是​​否缓存了规则或其他东西（通过wamp菜单重新启动服务没有改变任何东西）

（不要问我使用的确切规则，因为我删除了文件，我认为它无论如何都不相关）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:35:26.170

[每次请求通过时都会处理](http://en.wikipedia.org/wiki/Htaccess#Advantages).htaccess 文件。您的浏览器可能缓存了正在转发的请求。您是否尝试使用[httpfox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/)或其他任何东西来查看标题所说的内容？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T20:39:47.433

您是否尝试过删除浏览器缓存？