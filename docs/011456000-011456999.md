# StackOverflow 问答 11456000-11456999

# html - Mobile Web App: vs . What is the difference?

> ID：11456000
> 
> 赞同：5
> 
> 时间：2012-07-12T16:07:09.363
> 
> 标签：html, jquery-mobile, mobile-application

I'm doing mobile web application with HTML5 and jQuery mobile. [HTML5 Mobile Boilerplate](http://html5boilerplate.com/mobile) suggests this:

```
<body>
  <div id="container">
    <header>

    </header>
    <div id="main" role="main">

    </div>

    <footer>

    </footer>
  </div> <!--! end of #container -->
</body> 
```

On [jQuery mobile (Section "Putting it together: Basic single page template")](http://jquerymobile.com/test/docs/pages/page-anatomy.html) it is suggested

```
<body> 
    <div data-role="page">

        <div data-role="header"></div>

        <div data-role="content"></div>

        <div data-role="footer"></div>

    </div>
</body> 
```

Which way is more preferable? What is the difference between `<header>` and `data-role="header"`?

I did try googling for that, but no answer so far.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:47:18.323

这些[`data-*`属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)用于为您网站上的脚本提供信息。除了向您的脚本提供该数据之外，它们没有更广泛的语义目的，它仅意味着您网站页面中的某些内容。

该元素是一个 HTML5 元素，[在 HTML5 规范](http://www.w3.org/TR/html5/sections.html#the-header-element)`<header>`中被定义为“一组介绍性或导航性帮助” 。它在所有 HTML 文档中都意味着同样的事情。

您应该使用`header`，前提是您的目标受众拥有支持 HTML5 的浏览器，并且您标记的是标题。您还可以使用`data-*`如下属性：

```
<header data-role="header"></header> 
```

它不应该对 jQuery mobile 使用什么元素产生任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:55:44.953

属性不包含[`data-*`](http://developers.whatwg.org/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)语义值；它只允许脚本访问标记中的数据。因此，`data-role`属性（不要与属性混淆[`role`](http://www.w3.org/TR/role-attribute/)）仅与 jQuery Mobile 相关。

该[`header`](https://developer.mozilla.org/en/HTML/Element/header)元素具有语义含义，但如果您要在 jQuery Mobile 应用程序中使用它，您还需要使用`data-role="header"`.

# java - Drools - 使用一条规则插入相同类型的多个事实

> ID：11456011
> 
> 赞同：1
> 
> 时间：2012-07-12T16:07:38.387
> 
> 标签：java, drools

我对 Drools 很陌生，我已经完成了一些在线找到的教程并阅读了文档。我确信我将要解释的内容有一个我错过的微不足道的解决方案，但无论如何我都会列出来。

我的 drools 文件中有一条规则，并且有一个从文本文件中读取其信息的对象。

代码与此类似：

```
 public static final void main(String[] args) {
        try {
            ObjectArchive arch = ArchiveFactory.openArchive(new File("dwc.txt"));
            Iterator<Object> iter = arch.iteratorDwc();

            // load up the knowledge base
            KnowledgeBase kbase = readKnowledgeBase();
            StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
            KnowledgeRuntimeLogger logger =  KnowledgeRuntimeLoggerFactory.newFileLogger(ksession, "test");
            while(iter.hasNext()) {
                Object dwcRecord = iter.next();
                ksession.insert(dwcRecord);
            }
            System.out.println(ksession.getFactCount());
            ksession.fireAllRules();
            logger.close();
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }

    private static KnowledgeBase readKnowledgeBase() throws Exception {
        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
        kbuilder.add(ResourceFactory.newClassPathResource("dwcrules.drl"), ResourceType.DRL);
        KnowledgeBuilderErrors errors = kbuilder.getErrors();
        if (errors.size() > 0) {
            for (KnowledgeBuilderError error: errors) {
                System.err.println(error);
            }
            throw new IllegalArgumentException("Could not parse knowledge.");
        }
        KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();
        kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
        return kbase;
    } 
```

我有一个简单的规则文件，它检查所述对象的属性是否不为空，如果为真则打印出该对象。

现在，问题。

如果我添加一个对象（没有 while 循环），则触发规则并且一切正常。但是，如果我将多个对象添加到会话中，然后触发规则，它往往只会抓取最后一个，或者触发但打印出一个空值。

那么，为什么我无法添加多个相同类型的事实呢？或者我错过了什么阻止我对多个事实执行相同的规则？

提前致谢。

编辑：对不起，这是规则：

```
rule "Scientific Name"
when 
    dwc : Object(dwc.getScientificName != null)
then
    System.out.println(dwc);
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:24:52.417

我不知道到底发生了什么，因为我没有你的目标文件来运行测试，但只需在 eclipse 审计视图中打开你的日志文件，你就会立即看到插入的对象以及哪些激活了规则。

该规则将为每个具有 scienceName != null 的对象触发一次。

此外，如果您有一个定义 getScientificName() 方法的更专业的类/接口，则您的规则不应尝试匹配 Object。例如，如果您有一个名为“MyDwcClass”的类，您应该编写如下规则：

```
rule "Scientific Name"
when 
    dwc : MyDwcClass( scientificName != null )
then
    System.out.println(dwc);
end 
```

# c# - .NET Windows 窗体应用程序中的 OpenNI 人脸检测

> ID：11456014
> 
> 赞同：1
> 
> 时间：2012-07-12T16:07:48.023
> 
> 标签：c#, .net, winforms, visual-studio-2010, openni

我正在用 C# 开发一个 Windows 窗体应用程序。我必须添加人脸识别功能。为此，我正在使用 OpenNI 库。用于视频捕获的硬件是`Xtion PRO LIVE`. 我已成功安装它，并且能够运行示例代码。此代码连续录制视频，仅此而已。我已经修改了它，按下`Capture`按钮后，它将当前图片保存到硬盘驱动器（很好！）。
**现在我想要完成的是通过面部标志检测面部，以便我可以使用数据库中保存的图像来验证一个人的图像。如何使用 OpenNI 做到这一点？**

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using OpenNI;
using System.Threading;
using System.Drawing.Imaging;

namespace CameraApp
    {
        public partial class MainWindow : Form

    {
    public MainWindow()
    {
    InitializeComponent();

    this.context = Context.CreateFromXmlFile(SAMPLE_XML_FILE, out scriptNode);
    this.depth = context.FindExistingNode(NodeType.Depth) as DepthGenerator;
    if (this.depth == null)
    {
    throw new Exception("Viewer must have a depth node!");
    }

    this.histogram = new int[this.depth.DeviceMaxDepth];

    MapOutputMode mapMode = this.depth.MapOutputMode;

    this.bitmap = new Bitmap((int)mapMode.XRes, (int)mapMode.YRes, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
    this.shouldRun = true;
    this.readerThread = new Thread(ReaderThread);
    this.readerThread.Start();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
    base.OnPaint(e);

    lock (this)
    {
    e.Graphics.DrawImage(this.bitmap,
    this.panelView.Location.X,
    this.panelView.Location.Y,
    this.panelView.Size.Width,
    this.panelView.Size.Height);
    }
    }

    protected override void OnPaintBackground(PaintEventArgs pevent)
    {
    //Don't allow the background to paint
    }

    protected override void OnClosing(CancelEventArgs e)
    {
    this.shouldRun = false;
    this.readerThread.Join();
    base.OnClosing(e);
    }

    protected override void OnKeyPress(KeyPressEventArgs e)
    {
    if (e.KeyChar == 27)
    {
    Close();
    }
    base.OnKeyPress(e);
    }

    private unsafe void CalcHist(DepthMetaData depthMD)
    {
    // reset
    for (int i = 0; i < this.histogram.Length; ++i)
    this.histogram[i] = 0;

    ushort* pDepth = (ushort*)depthMD.DepthMapPtr.ToPointer();

    int points = 0;
    for (int y = 0; y < depthMD.YRes; ++y)
    {
    for (int x = 0; x < depthMD.XRes; ++x, ++pDepth)
    {
    ushort depthVal = *pDepth;
    if (depthVal != 0)
    {
    this.histogram[depthVal]++;
    points++;
    }
    }
    }

    for (int i = 1; i < this.histogram.Length; i++)
    {
    this.histogram[i] += this.histogram[i - 1];
    }

    if (points > 0)
    {
    for (int i = 1; i < this.histogram.Length; i++)
    {
    this.histogram[i] = (int)(256 * (1.0f - (this.histogram[i] / (float)points)));
    }
    }
    }

    private unsafe void ReaderThread()
    {
    DepthMetaData depthMD = new DepthMetaData();

    while (this.shouldRun)
    {
    try
    {
    this.context.WaitOneUpdateAll(this.depth);
    }
    catch (Exception)
    {
    }

    this.depth.GetMetaData(depthMD);

    CalcHist(depthMD);

    lock (this)
    {
    Rectangle rect = new Rectangle(0, 0, this.bitmap.Width, this.bitmap.Height);
    BitmapData data = this.bitmap.LockBits(rect, ImageLockMode.WriteOnly, System.Drawing.Imaging.PixelFormat.Format24bppRgb);

    //ushort* pDepth = (ushort*)this.depth.DepthMapPtr.ToPointer();

    //// set pixels
    //for (int y = 0; y < depthMD.YRes; ++y)
    //{
    // byte* pDest = (byte*)data.Scan0.ToPointer() + y * data.Stride;
    // for (int x = 0; x < depthMD.XRes; ++x, ++pDepth, pDest += 3)
    // {
    // byte pixel = (byte)this.histogram[*pDepth];
    // pDest[0] = 0;
    // pDest[1] = pixel;
    // pDest[2] = pixel;
    // }
    //}

    // This will point to the depth image.
    ushort* pDepth = (ushort*)this.depth.DepthMapPtr.ToPointer();

    // This will point to the RGB image.
    RGB24Pixel* pRGB =
    (RGB24Pixel*)this.depth.DepthMapPtr.ToPointer();

    // Go over the depth and RGB image and set the bitmaps
    // we're copying to based on our depth & RGB values.
    for (int y = 0; y < depthMD.YRes; ++y)
    {
    // Assuming that the size of each data frame is
    // 640x480.
    // Scan line by line (480 lines), each line
    // consists of 640 pointers.
    byte* pDest_Depth =
    (byte*)data.Scan0.ToPointer() + y *
    data.Stride;
    byte* pDest_Rgb = (byte*)data.Scan0.ToPointer()
    + y * data.Stride;

    for (int x = 0; x < depthMD.XRes; ++x,
    ++pDepth, pDest_Depth += 3,
    ++pRGB, pDest_Rgb += 3)
    {
    // Change the color of the bitmap
    // based on depth value.
    byte pixel = (byte)this.histogram[*pDepth];
    pDest_Depth[0] = 0;
    pDest_Depth[1] = pixel;
    pDest_Depth[2] = pixel;

    // Get the RGB values to generate
    // a whole RGB image.
    byte red = pRGB->Red;
    byte green = pRGB->Green;
    byte blue = pRGB->Blue;

    // Get depth information.
    ushort depthVal = *pDepth;
    }
    }

    this.bitmap.UnlockBits(data);
    }

    this.Invalidate();
    }
    }

    private readonly string SAMPLE_XML_FILE = @"C:/Program Files/Microsoft Visual Studio 10.0/Microsoft Visual Studio 2010 Ultimate - ENU/OpenNI/Data/SamplesConfig.xml";

    private Context context;
    private ScriptNode scriptNode;
    private DepthGenerator depth;
    private Thread readerThread;
    private bool shouldRun;
    private Bitmap bitmap;
    private int[] histogram;

    private void button1_Click(object sender, EventArgs e)
    {
    this.readerThread.Abort();
    this.bitmap.Save("D:\\Screenshot.jpeg", System.Drawing.Imaging.ImageFormat.Jpeg);
    this.readerThread = new Thread(ReaderThread);
    this.readerThread.Start();
    }
    }
    } 
```

任何形式的帮助将不胜感激。任何教程/链接任何东西！！！

# filter - couchdb - 检索发出非唯一两个数组键的视图的唯一文档

> ID：11456015
> 
> 赞同：1
> 
> 时间：2012-07-12T16:07:49.060
> 
> 标签：filter, pagination, couchdb, mapreduce

我在 CouchDB 的视图中有一个 map 函数，它为 type 的文档发出非唯一的两个数组键`message`，例如

![2个数组键](../Images/2e3e1d34fc7868f71b4bf3083216dbd6.png)

数组键中的第一个位置是user_id，第二个位置表示用户是否已阅读该消息。

这很好用，因为我可以设置`include_docs=true`和检索实际文档。但是，在这种情况下，我正在检索重复的文档，正如您在上面的视图结果中看到的那样。我需要能够编写一个可以查询的视图，以返回给定用户已阅读的唯一消息。此外，我需要能够有效地对结果集进行分页。

1.  请注意上图中的 [66, true] 为 doc id *26a9a271de3aac494d37b17334aaf7f3*发出了两次。据我所知，使用 map 函数中的键，我无法减少返回唯一文档的方式。

2.  我的下一个想法是`doc._id`也在 map 函数中发出并减少，`group_level=exact`结果是：

    ![3 个数组键](../Images/308609dd6eeefad887e00b107aa74c72.png)

    现在我可以获得唯一的文档 ID，但是如果不进行第二次查询，我就无法获取这些文档。即使在第二个查询的情况下，像这样进行分页也需要很多复杂性（至少我是这么认为的）。

3.  我想出的最后一个想法是在数组键的第三个位置发出整个文档而不是 doc._id，然后我可以访问整个文档并可能分页。这看起来真的很野蛮。

## 所以我的问题是：

**上面的＃3**是一个糟糕的主意吗？有什么我想念的吗？有更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:06:10.640

请参阅@WickedGrey 对该问题的评论。解决方案是确保我不会为一个文档两次发出相同的密钥。我在**map**函数中通过在数组中发出键时跟踪键来执行此操作，然后如果键存在于数组中则跳过发出。

# grammar - 如何证明乔姆斯基范式中的推导需要 2n - 1 个步骤？

> ID：11456018
> 
> 赞同：13
> 
> 时间：2012-07-12T16:07:53.723
> 
> 标签：grammar, theory, context-free-grammar, chomsky-normal-form

我试图证明以下几点：

> 如果 G 是乔姆斯基范式中的上下文无关文法，那么对于任何字符串 w 属于长度为 n ≥ 1 的 L(G)，它恰好需要 2n-1 步来对 w 进行任何推导。

我将如何证明这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T19:13:11.510

作为提示-因为乔姆斯基范式中的每个产品都具有以下形式

> S → AB，对于非终结符 A 和 B，或形式
> 
> S → x，对于终端 x，

然后派生一个字符串将按以下方式工作：

*   创建一个正好有 n 个非终结符的字符串，然后
*   将每个非终结符展开为单个终结符。

应用第一种形式的产生式会将非终结符的数量从 k 增加到 k + 1，因为您将一个非终结符 (-1) 替换为两个非终结符 (+2) 以获得 +1 个非终结符的净增益。由于您从一个非终结符开始，这意味着您需要执行第一种形式的 n - 1 个产品。然后，您需要 n 多个第二种形式来将非终结符转换为终结符，总共得到 n + (n - 1) = 2n - 1 个产品。

为了证明你确实需要这么多，我建议*做*一个矛盾的证明，并表明你不能用更多或更少来做到这一点。作为提示，请尝试计算每种类型的产生式的数量，并显示如果不是 2n - 1，则字符串太短，或者您仍将保留非终结符。

希望这可以帮助！

# android - 运行项目时出现异常

> ID：11456022
> 
> 赞同：-4
> 
> 时间：2012-07-12T16:08:01.520
> 
> 标签：android, android-emulator, android-tabhost

我在运行项目时遇到了这个异常

```
2012-07-12 21:29:43 - android.tabcontrol.MainActivity] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lorg/ksoap2/serialization/MarshalFloat;
    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
    at com.android.dx.command.dexer.Main.run(Main.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-07-12 21:29:43 - android.tabcontrol.MainActivity] Dx 1 error; aborting
[2012-07-12 21:29:43 - android.tabcontrol.MainActivity] Conversion to Dalvik format failed with error 1 
```

现在该怎么办。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:10:13.123

看起来你包含一个类两次，要么将它放在多个`jar`文件中，要么将它放在一个`jar`文件和你的`src`目录中（或任何其他组合）。

查找类`MarshalFloat`或库`ksoap2`并确保只出现一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:36:43.353

此外，您不允许使用具有不同名称的相同库。

# wcf - 关于设计 WCF 合同以公开桌面应用程序功能的架构建议

> ID：11456023
> 
> 赞同：0
> 
> 时间：2012-07-12T16:08:03.550
> 
> 标签：wcf, web-services, datacontract

我们目前正致力于通过 WCF 服务公开 Windows 窗体应用程序的功能。

例如，桌面应用程序中有一个包含多个下拉列表的表单。我们想设计一种服务，允许客户端提交具有所有必需值的请求，就好像该客户端在桌面应用程序中填写了信息一样。

我的问题是：

为 WCF 服务合同中的下拉菜单公开允许值的最佳方式是什么？

*   合同[中的枚举（DataCountract](http://msdn.microsoft.com/en-us/library/aa347875.aspx "DataContracts 中的枚举")中的枚举）
*   共享装配
*   接受来自客户端的字符串，在服务器上查找 id 或返回错误

请注意，某些字段有很多允许值（桌面应用程序使用预输入搜索）。

您是如何在项目中处理此类问题的？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:19:40.433

`DataContract`IMO，最好的方法是在（您列出的第一个选项）中使用枚举。

它比 .Net 程序集更具互操作性（如果您通过 WCF 公开 SOAP Web 服务，您将能够从其他技术中使用它）。

而且您不需要手动解析字符串，如果客户端尝试使用无效值，则会自动发送异常。

# javascript - 在 Galleria 全屏模式下隐藏 iOS/移动地址栏

> ID：11456026
> 
> 赞同：1
> 
> 时间：2012-07-12T16:08:11.557
> 
> 标签：javascript, jquery, drupal, galleria

我正在使用[omega](https://drupal.org/project/omega/)作为我的 drupal 基础主题，在 drupal 站点上使用[Galleria](https://drupal.org/project/galleria)模块和 Galleria '12' 主题制作响应式 Galleria 幻灯片。一切都运行良好，除了当我在 iPod 上进入全屏模式时，我无法摆脱地址栏。如果可能的话，我还想让底部工具栏消失。它们一起占用了相当多的空间。

有什么建议么？我已经看到了一些使用 javascript 来完成此任务的方法（以更通用的方式，而不是特定于 Galleria），但这不是我的强项，我不知道如何实现这些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:37:17.357

要在 iOS 上隐藏地址栏，您只需稍微滚动页面

```
window.onload = function() {
    // x/y coordinates, "1" will cause the address bar to hide
    window.scrollTo(0, 1);
}; 
```

在浏览器中不能隐藏底栏。但是，您可以将网站添加到主屏幕，这样可以通过添加元标记来隐藏地址栏和底部工具栏：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

# javascript - 它会在不破坏旧对象的情况下创建 100 个对象吗？

> ID：11456030
> 
> 赞同：0
> 
> 时间：2012-07-12T16:08:29.480
> 
> 标签：javascript, node.js

我正在尝试使用 node.js 对象生命周期并得到一个快速的问题。**如果b()**将创建 100 个对象而不破坏它们，你认为看看下面的代码会怎样？

```
function a() {
    this.init = function() {
        console.log('this is me!');
    };
}

function b() {
    (new a()).init();
}

for (var i = 0; i < 100; i++) {
   b();
} 
```

# maven - maven rpm插件需要多模块项目中源位置的完整路径

> ID：11456034
> 
> 赞同：0
> 
> 时间：2012-07-12T16:08:41.177
> 
> 标签：maven, plugins, rpm

我有一个多模块 Maven 项目。我从父 pom 调用 RPM 插件，但与 maven 程序集插件不同，我需要提供我希望打包到 RPM 指定目录的源的完整路径。

例如，除非我指定完整路径，否则以下位置路径将不起作用：

```
<sources>
  <source>
    <location>/src/main/config</location>
  </source>
</sources> 
```

正则表达式和通配符也不起作用。

请问有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:46:50.430

源参数的[文档说：](http://mojo.codehaus.org/rpm-maven-plugin/source-params.html)

> 如果路径不**以**/ 开头，则将其视为相对于项目的基本目录。

`/`因此，如果您从 location 参数中删除前导，它应该可以工作。

- 更新 -

我用这个简单的多模块项目做了一个小测试：

```
rpm-test
|-- module1
|   |-- pom.xml
|   |-- src
|       |-- main
|       |   |-- config
|       |   |   |-- mod1-file1.conf
|       |   |   |-- mod1-file2.conf
|-- module2
|   |-- pom.xml
|   |-- src
|       |-- main
|       |   |-- config
|       |   |   |-- mod2-file1.conf
|       |   |   |-- mod2-file2.conf
|-- pom.xml 
```

**父 POM**中 rpm-maven-plugin 的配置如下所示：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>rpm-maven-plugin</artifactId>
  <version>2.1-alpha-1</version>
  <inherited>false</inherited>
  <configuration>
    <copyright>2012, Me</copyright>
    <group>mygroup</group>
    <mappings>
      <!-- Option 1: Use the base directory and includes -->
      <mapping>
        <directory>/usr/local</directory>
        <sources>
          <source>
            <location>${project.basedir}</location>
            <includes>
              <include>**/src/main/config/**</include>
            </includes>
          </source>
        </sources>
      </mapping>

      <!-- Option 2: List each module separatly -->
      <mapping>
        <directory>/tmp</directory>
        <sources>
          <source>
            <location>${project.basedir}/module1/src/main/config</location>
          </source>
          <source>
            <location>${project.basedir}/module2/src/main/config</location>
          </source>
        </sources>
      </mapping>
    </mappings>
  </configuration>
  <executions>
    <execution>
      <goals>
        <goal>rpm</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

当我使用 查询生成的 RPM 的内容时`rpm -qpl`，我得到以下结果：

```
/tmp
/tmp/mod1-file1.conf
/tmp/mod1-file2.conf
/tmp/mod2-file1.conf
/tmp/mod2-file2.conf
/usr/local/module1/src/main/config/mod1-file1.conf
/usr/local/module1/src/main/config/mod1-file2.conf
/usr/local/module2/src/main/config/mod2-file1.conf
/usr/local/module2/src/main/config/mod2-file2.conf 
```

# javascript - 如何实现动态 HTML 画布/帧大小？

> ID：11456037
> 
> 赞同：1
> 
> 时间：2012-07-12T16:08:45.513
> 
> 标签：javascript, html, css, flash

我有一个简单的问题，我有一个具有静态帧大小的 html 文件，例如，如果我在 14 英寸大小的显示器上打开它，屏幕自动滚动将启用，我正在寻找基于屏幕大小的功能，它将自动重新调整框架大小以及自动居中对齐它。我真的很感激，如果我能找到一些关于这方面的信息，我是新手。谢谢

```
<HTML>
<HEAD>
<TITLE>testviewdemo4.swf</TITLE>
</HEAD>
<BODY>
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
codebase="http://fpdownload.adobe.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" 
WIDTH="1538" HEIGHT="843" id="myMovieName">
<PARAM NAME="movie" VALUE="test.swf"> 
<PARAM NAME="quality" VALUE="high">
<PARAM NAME="bgcolor" VALUE="#FFFFFF">
<PARAM NAME="play" VALUE="true">
<PARAM NAME="loop" VALUE="true">
<PARAM NAME=bgcolor VALUE="#FFFFFF">
<EMBED src="test.swf" quality=high bgcolor=#FFFFFF WIDTH="1538" HEIGHT="843" 
NAME="myMovieName" ALIGN="" TYPE="application/x-shockwave-flash" 
play="true" loop="true" 
PLUGINSPAGE="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
</EMBED>
</OBJECT>
</BODY>
</HTML> 
```

# rspec - 使用 capybara、rspec、mongoid、database-cleaner 在登录页面上进行集成测试

> ID：11456038
> 
> 赞同：2
> 
> 时间：2012-07-12T16:08:46.727
> 
> 标签：rspec, webkit, mongoid, integration-testing, capybara

我正在尝试为我的网络应用程序设置登录测试。成功登录后，用户应重定向到仪表板。但是，在仪表板规范中，工厂女孩创建的用户无法登录。

但是如果我使用

```
attr = Factory.attributes_for(:user)
user = User.create(attr) 
```

代替

```
user = Factory.create(:user) 
```

有用。在这两种情况下，User.count 返回 1

## 宝石文件

```
group :development, :test do
  gem 'selenium-webdriver', "~> 2.16.0"
  gem "capybara-webkit", "0.12.1"
  gem "capybara", "1.1.2"
  gem "database_cleaner", "0.8.0"
  gem "rspec-rails", " 2.11.0"
  gem 'capybara-screenshot', "0.2.1"
  gem "factory_girl_rails", "1.2"
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
end 
```

## 仪表板规格.rb

```
it "should return 200 and redirect to dashboard if user is already signed in" do
  user = FactoryGirl.create(:user, :password => "password", :password_confirmation => "password")

  puts user.count  # 1

  visit "/users/sign_in"

  # log in user
  fill_in "user_email", :with => user.email
  fill_in "user_password", :with => "password"
  click_on "Sign in"

  page.status_code.should == 200
  current_path.should eq("/u/dashboard")
end 
```

## rspec_helper.rb

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)

  require 'rspec/rails'
  require 'capybara/rspec'
  require 'capybara/rails'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|

    config.mock_with :rspec

    # Cleaner
    DatabaseCleaner[:mongoid].strategy = :truncation
    config.before(:each) { DatabaseCleaner[:mongoid].clean }
    config.after(:each) { DatabaseCleaner[:mongoid].clean }

  end

  Capybara.javascript_driver = :webkit

end

Spork.each_run {} 
```

# javascript - 为什么无法在opera 12中的后台脚本和注入脚本之间发布消息？

> ID：11456040
> 
> 赞同：2
> 
> 时间：2012-07-12T16:08:52.023
> 
> 标签：javascript, opera, postmessage, opera-extension

由于注入的脚本不能执行跨域 xmlhttp 请求，因此我尝试过，因为手册中建议将消息​​从注入的脚本发送到后台脚本以完成这项工作。但我无法让这些消息正常工作。

这是我的代码，它只有三个文件，尽可能简单的扩展。

`config.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" id="http://www.example.org/helloworld">
  <name>postMessage-testcase</name>
  <description>check if opera's postMessage fails</description>
</widget> 
```

`index.html`

```
<!doctype html>
<html lang="en">
<head>
<script>
  opera.extension.onmessage = function(event) {
    alert("get the message!");
    opera.extension.postMessage("posting reply");
  };
</script>
</head>
<body></body>
</html> 
```

`includes/user.js`

```
// ==UserScript==
// @include     *apod.nasa.gov*
// ==/UserScript==

opera.extension.onmessage = function(event) {
  alert("got reply !");
};

alert("yep, I'm on apod, proceeding with messages");
opera.extension.postMessage("message body"); 
```

当用户打开 apod.nasa.gov 时，脚本应该来回发送消息，但这里只发送一条消息，没有消息发生，控制台也没有错误显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:48:55.380

`opera.extension.postMessage()`无法从后台进程调用该方法，因为它不知道将消息发布到哪个页面/选项卡。相反，`opera.extension.broadcastMessage()`可用于向所有选项卡发送消息（参见：[http](http://dev.opera.com/articles/view/extensions-api-messaging-broadcastmessage/) ://dev.opera.com/articles/view/extensions-api-messaging-broadcastmessage/ ）

或者，要向特定选项卡中的注入脚本发送消息：

1.  `opera.extension.onconnect`在后台进程中监听连接事件（ ）
2.  `postMessage()`从事件的`source`对象运行

请参阅：[http ://dev.opera.com/articles/view/opera-extensions-messaging/#backgroundscript_injectedscript](http://dev.opera.com/articles/view/opera-extensions-messaging/#backgroundscript_injectedscript)

顺便说一句，不要忘记你在后台进程中使用跨域 XHR，你需要在你的 config.xml 文件中允许访问目标域，例如：

```
<access origin="http://apod.nasa.gov" subdomains="true"/> 
```

# c - 如何在c中包含头文件

> ID：11456041
> 
> 赞同：-2
> 
> 时间：2012-07-12T16:08:52.253
> 
> 标签：c, include, include-path

我有一些文件，例如：~/code/include/test.h、~/code/src/test.c。我在 test.c 中使用了 include "test.h" 但编译器找不到 test.h。除了包含“../include/test.h”之外，有什么方法可以解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T16:10:04.000

您的编译器、IDE 或构建系统应该提供一个命令行开关或一个属性，用于指定*额外*的编译包含目录。

带有`cc`和变体的开关是`-I`.

您如何使用它取决于您如何组织构建，但鉴于您问题中的目录结构，如果您正在运行`gcc`，`~/code/src/`那么命令行可能如下所示：

```
gcc -I../include -o test test.c 
```

Visual Studio在*Configuration Properties->C/C++->General*下的 Properties 对话框中使用*Additional Include Directories*。

# html - CSS Vertical Align Top 不起作用 - 我可以使用其他在编码中正确的方法吗？

> ID：11456051
> 
> 赞同：1
> 
> 时间：2012-07-12T16:09:19.117
> 
> 标签：html, css

我已经整理了一个示例代码，因为我试图让 2 个不同大小的图像在顶部对齐，如下所示：

HTML

```
<div id="test">
    <div class="social-media">
        <img src="http://www.ok.gov/ltgovernor/images/Facebook-icon.png" width="120"/>
        <img src="http://semanticweb.com/files/2012/01/twitter_logo.jpg" width="50" />
    </div>
</div> 
```

CSS

```
test {
width:980px;
margin-left:auto;
margin-right:auto;
position:relative;
}

.social-media {
position:absolute;
background-color:#000;
right:0;
top:0;
vertical-align:top !important;
} 
```

* * *

我现在在网上阅读了几篇文章后意识到，垂直对齐在 div 中不起作用，解决方案是使用绝对定位。唯一的问题是我已经对图像父 div 使用绝对定位。

在也是绝对值的父 div 中做绝对值是否是一种好习惯。

但是，如果我要在 img 上放置一个绝对位置，那么所有 img 将相互堆叠，除非我要为每个 img 指定一个类。

所以我的下一个想法是在 div 中的 img 上放置一个浮点数。我只是想知道这是否是一种好习惯，或者是否有人可以告诉我一种更清洁的方法？

* * *

此外，如果我希望图像居中对齐，这将如何完成，因为 float 方法的工作原理是让图像在顶部对齐，但我不确定如何居中对齐或可能在底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:13:21.373

将 overflow:auto 放在社交媒体 div 上，然后将 float:left 添加到您的图像中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:35:26.117

请记住，您也可以使用负整数，例如`vertical-align: -1px;`向上`-1px`

有关更多详细信息，请参阅[CSS vertical-align 属性并](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)[在此处](http://www.w3schools.com/cssref/playit.asp?filename=playcss_vertical-align&preval=25px)试用。

# mapreduce - RavenDB 中空间索引的多地图索引失败

> ID：11456055
> 
> 赞同：3
> 
> 时间：2012-07-12T16:09:38.787
> 
> 标签：mapreduce, ravendb

我想搜索属于用户（我附近）的东西。我定义了以下索引，但没有得到合并的结果集：

```
public class Things_ByLocation : AbstractMultiMapIndexCreationTask<Things_ByLocation.ThingsByLocationResult>
{
    public class ThingsByLocationResult
    {
        public string ThingId { get; set; }
        public string UserId { get; set; }
        public double Latitude { get; set; }
        public double Longitude { get; set; }
    }

    public Things_ByLocation()
    {
        AddMap<Thing>(things => from t in things
                                select new
                                {
                                    ThingId = t.Id,
                                    UserId = (string)null,
                                    Latitude = 0,
                                    Longitude = 0,
                                    _ = (object)null,
                                });
        AddMap<User>(users => from u in users
                                select new
                                {
                                    ThingId = (string)null,
                                    UserId = u.Id,
                                    Latitude = u.Latitude,
                                    Longitude = u.Longitude,
                                    _ = SpatialIndex.Generate(u.Latitude, u.Longitude)
                                });

        Reduce = results => from result in results
                            group result by result.ThingId into g
                            let userId = g.Select(x => x.UserId).Where(t => !string.IsNullOrWhiteSpace(t)).FirstOrDefault()
                            let lat = g.Select(x => x.Latitude).Where(t => t != 0).FirstOrDefault()
                            let lng = g.Select(x => x.Longitude).Where(t => t != 0).FirstOrDefault()
                            select new
                            {
                                ThingId = g.Key,
                                UserId = userId,
                                Latitude = lat,
                                Longitude = lng,
                                _ = SpatialIndex.Generate(lat, lng)
                            };

        Store(x => x.ThingId, FieldStorage.Yes);
        Store(x => x.UserId, FieldStorage.Yes);
    }
} 
```

结果如下所示：

```
{
  "ThingId": "Thing/Id26",
  "UserId": null,
  "Longitude": "0",
  "__spatialShape": "0.000000 0.000000"
} 
```

我的模型：

```
public class User
{
    public string Id { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
}

public class Thing
{
    public string Id { get; set; }
    public double Name { get; set; }
    public double Description { get; set; }
    public string UserId { get; set; }
} 
```

关于我做错了什么的任何想法？如果我将组切换到用户，用户部分将被填充并且 ThingId 为空。因此，合并过程似乎失败了。我只是不确定为什么。

也很奇怪，为什么结果显示的是经度，而不是纬度属性。

在 RAM 中使用 RavenDB Build 960。

我意识到我可以将位置非规范化为事物，但这意味着如果用户位置发生变化，我可能必须更新数百个事物。这是首选的 NoSql 方法吗？

**更新**

根据 Ayende 的建议，我现在有以下内容：

```
public class Things_ByLocation : AbstractMultiMapIndexCreationTask<Things_ByLocation.ThingsByLocationResult>
{
    public class ThingsByLocationResult
    {
        public string ThingId { get; set; }
        public string UserId { get; set; }
        public double Latitude { get; set; }
        public double Longitude { get; set; }
    }

    public Things_ByLocation()
    {
        AddMap<Thing>(things => from t in things
                                select new
                                {
                                    ThingId = t.Id,
                                    UserId = (string)null,
                                    Latitude = 0,
                                    Longitude = 0
                                });
        AddMap<User>(users => from u in users
                                select new
                                {
                                    ThingId = (string)null,
                                    UserId = u.Id,
                                    Latitude = u.Latitude,
                                    Longitude = u.Longitude
                                });

        Reduce = results => from result in results
                            group result by result.ThingId into g
                            select new
                            {
                                ThingId = g.Key,
                                UserId = g.Select(x => x.UserId).Where(x => x != null).FirstOrDefault(),
                                Latitude = g.Select(x => x.Latitude).Where(t => t != 0).FirstOrDefault(),
                                Longitude = g.Select(x => x.Longitude).Where(t => t != 0).FirstOrDefault()
                            };

        Store(x => x.ThingId, FieldStorage.Yes);
        Store(x => x.UserId, FieldStorage.Yes);
    }
} 
```

索引本身：

```
Map:
docs.Things
    .Select(t => new {ThingId = t.__document_id, UserId = (String)null, Latitude = 0, Longitude = 0})

Map:
docs.Users
    .Select(u => new {ThingId = (String)null, UserId = u.__document_id, Latitude = ((double)u.Latitude), Longitude = ((double)u.Longitude)})

Reduce:
results
    .GroupBy(result => result.ThingId)
    .Select(g => new {ThingId = g.Key, UserId = g
    .Select(x => x.UserId)
    .Where(x => x != null).FirstOrDefault(), Latitude = g
    .Select(x => ((double)x.Latitude))
    .Where(t => t != 0).FirstOrDefault(), Longitude = g
    .Select(x => ((double)x.Longitude))
    .Where(t => t != 0).FirstOrDefault()}) 
```

生成的投影如下所示：

```
{
  "ThingId": "Thing/Id26",
  "UserId": null,
  "Latitude": null,
  "Longitude": null
} 
```

我似乎在这里做一些学术上的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:56:55.563

尝试：

*   从地图中删除 SpatialIndex.Generate，它应该只在 reduce 上。
*   从 reduce 中删除 SpatialIndex.Generate 并查看为什么您没有按照应有的纬度和经度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:00:57.677

通过反复试验（以及 Ayende 的建议），我得出了以下结论。它有效，但我不知道为什么！

我怀疑我最好更改数据模型并将地理位置数据非规范化为事物。

```
public class Things_ByLocation : AbstractMultiMapIndexCreationTask<Things_ByLocation.ThingsByLocationResult>
{
    public class ThingsByLocationResult
    {
        public string Id { get; set; }
        public string UserId { get; set; }
        public double Latitude { get; set; }
        public double Longitude { get; set; }
        public string SKU { get; set; }
        public string Name { get; set; }
    }

    public Things_ByLocation()
    {
        AddMap<Thing>(things => from t in things
                                select new
                                {
                                    Id = t.Id,
                                    UserId = t.UserId,
                                    Latitude = 0,
                                    Longitude = 0,
                                    Name = t.Name,
                                    SKU = t.SKU,
                                    _ = (object)null,
                                });
        AddMap<User>(users => from u in users
                                select new
                                {
                                    Id = (string)null,
                                    UserId = u.Id,
                                    Latitude = u.Latitude,
                                    Longitude = u.Longitude,
                                    Name = (string)null,
                                    SKU = (string)null,
                                    _ = (object)null, 
                                });

        Reduce = results => from result in results
                            group result by result.Id into g
                            let lat = g.Select(x => x.Latitude).Where(x => x != 0).FirstOrDefault()
                            let lng = g.Select(x => x.Longitude).Where(x => x != 0).FirstOrDefault()
                            let userId = g.Select(x => x.UserId).Where(x => x != null).FirstOrDefault()
                            let name = g.Select(x => x.Name).Where(x => x != null).FirstOrDefault()
                            let sku = g.Select(x => x.SKU).Where(x => x != null).FirstOrDefault()
                            select new
                            {
                                Id = g.Key,
                                UserId = userId,
                                Latitude = lat,
                                Longitude = lng,
                                Name = name,
                                SKU = sku,
                                _ = SpatialIndex.Generate(lat, lng)
                            };

        Store(x => x.Id, FieldStorage.Yes);
        Store(x => x.UserId, FieldStorage.Yes);

        TransformResults = (database, results) => from result in results
                                                    let user = database.Load<User>(result.UserId)
                                                    select new
                                                    {
                                                        Id = result.Id,
                                                        UserId = result.UserId,
                                                        Latitude = user.Latitude,
                                                        Longitude = user.Longitude,
                                                        Name = result.Name,
                                                        SKU = result.SKU,
                                                    };
    }
} 
```

# javascript - 在 CanJS 中使用 can.Control.route 定义两个独立的路由器

> ID：11456060
> 
> 赞同：3
> 
> 时间：2012-07-12T16:09:47.483
> 
> 标签：javascript, canjs, canjs-routing

我在不同的 JS 文档中定义了两条路由，尽管它们都包含在同一个 HTML 文件中。路线 1 如下所示：

```
Router = can.Control({
   "invoices/:id route": function(data){
    //load an invoice by id
   }
 }); 
```

另一个是这样的：

```
Router = can.Control({
   "receipts/:id route": function(data){
    //load a receipt by id
   }
 }); 
```

当我浏览到 #!receipts/1 时，Receipts 和 Invoices 都被实例化了。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:26:19.880

你不会在 CanJS 文档中找到它，因为它是一个基本的 javascript 问题。

请注意，即使变量在不同的脚本中声明，它们包含在同一个页面中的事实意味着它们都存在于同一个全局命名空间中，因此第二个 Control 对象声明会覆盖第一个。

最简单的答案是将每个 Control 对象分配给不同的变量（例如，Router1、Router2）。

您最好将两个声明组合在一个文件中以提高性能。

# java - Maven + Robolectric，找不到资源？

> ID：11456063
> 
> 赞同：3
> 
> 时间：2012-07-12T16:09:58.960
> 
> 标签：java, maven, robolectric

这些天我正在为 android 编写一个演示应用程序，使用 robolectric for TA。我可以运行该项目，但是当我添加测试时，它会显示如下错误：

```
error message="java.lang.RuntimeException: no such directory /Users/majie/Downloads/android-sdk-macosx/platforms/android-9/data/res/values" type="java.lang.RuntimeException">java.lang.RuntimeException: java.lang.RuntimeException: no such directory /Users/majie/Downloads/android-sdk-macosx/platforms/android-9/data/res/values
at com.xtremelabs.robolectric.res.ResourceLoader.init(ResourceLoader.java:93)
at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:261)
at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
at android.view.LayoutInflater.inflate(LayoutInflater.java)
at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:73)
at android.app.Activity.setContentView(Activity.java)
at com.cisco.jabberim.ui.WelcomeActivity.onCreate(WelcomeActivity.java:21)
at Test.FTE.WelcomeActivityTest.setUp(WelcomeActivityTest.java:28) 
```

测试文件如下：

```
@RunWith(RobolectricTestRunner.class)
public class WelcomeActivityTest {
private WelcomeActivity mActivity;
private TextView text;

@Before
public void setUp(){
    mActivity = new WelcomeActivity();
    mActivity.onCreate(null);
    text = (TextView) mActivity.findViewById(R.id.welcome);
}

@Test
public void textIsNotNull(){
    String str = text.getText().toString();
    assertNotNull(str);
}
} 
```

pom.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-    v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>im</groupId>
<artifactId>Im</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>apk</packaging>
<name>IM demo</name>

<dependencies>
    <dependency>
        <groupId>android</groupId>
        <artifactId>android</artifactId>
        <version>3.0_r2</version>
        <scope>provided</scope>
    </dependency>

    <!-- Make sure this is below the android dependencies -->
    <dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <version>1.0-RC1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <finalName>${project.artifactId}</finalName>

    <plugins>
        <plugin>
            <!-- See http://code.google.com/p/maven-android-plugin/ -->
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <configuration>
                <sdk>
                    <!-- platform or api level (api level 8 = platform 2.2)-->
                    <platform>11</platform>
                </sdk>        
            </configuration>
            <extensions>true</extensions>
        </plugin>
    </plugins>
</build> 
```

我真的不知道如何解决它。我不知道为什么奇怪的路径是“/Users/majie/Downloads/android-sdk-macosx/platforms/android-9/data/res/values”。我不知道在哪里设置它或如何使它正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:11:02.530

使用 1.0 版的 robolectric jar（而不是 RC1）为我解决了这个问题

```
 <dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <version>1.0</version>
        <scope>test</scope>
 </dependency> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-14T02:55:47.513

这是 Robolectric 需要 /Users/majie/Downloads/android-sdk-macosx/platforms/android-9/data/res/values 但实际上在您的计算机中不存在。

这很容易解决只需下载android-9 sdk或复制其他sdk如android-8，并用android-9重命名

然后就可以了。

# ios - 将 kAudioUnitProperty_StreamFormat 设置为 AAC 时，AudioUnitSetProperty 失败并显示 -10868

> ID：11456068
> 
> 赞同：0
> 
> 时间：2012-07-12T16:10:07.230
> 
> 标签：ios, core-audio, audiounit, aac

我想使用 将 AUGraph 的输出编码为 AAC（在 iOS 5.1 上）。图的基本拓扑如下所示：

```
inputs --> MixerUnit --> pcm2aac --> aac2pcm --> RemoteIO 
```

我想在通过 PostRenderCallback 播放时获取 AAC 编码的数据，`pcm2aac`然后通过 UDP 将其发送到我们的服务器应用程序。

据我了解，此用例的首选 AudioUnit 是`kAudioUnitType_FormatConverter`，但是当我想为 aac2pcm 设置 ASBD 输入属性时，AudioUnitSetProperty 失败并显示 -10868（当我设置 pcm2acc 的输出时它也会失败，并出现相同的错误）。

```
AudioComponentDescription converterUnitDescription;
converterUnitDescription.componentType          = kAudioUnitType_FormatConverter;
converterUnitDescription.componentSubType       = kAudioUnitSubType_AUConverter;
converterUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
converterUnitDescription.componentFlags         = 0;
converterUnitDescription.componentFlagsMask     = 0;
//...
AUNode   pcm2aacNode;
AUNode   aac2pcmNode;
//...
result =    AUGraphAddNode (
                            processingGraph,
                            &converterUnitDescription,
                            &aac2pcmNode
                            );

if (noErr != result) {[self printErrorMessage: @"AUGraphNewNode failed for Converter unit" withStatus: result]; return;}
//...
result = AUGraphOpen (processingGraph);

if (noErr != result) {[self printErrorMessage: @"AUGraphOpen" withStatus: result]; return;}

//...
AudioUnit aac2pcmUnit;
AudioUnit pcm2aacUnit;
//...
result =    AUGraphNodeInfo (
                             processingGraph,
                             aac2pcmNode,
                             NULL,
                             &aac2pcmUnit
                             );

if (noErr != result) {[self printErrorMessage: @"AUGraphNodeInfo (aac2pcm)" withStatus: result]; return;}

//...
NSLog (@"Setting stream format for input aac2pcm  bus");
result = AudioUnitSetProperty (aac2pcmUnit,
                               kAudioUnitProperty_StreamFormat,
                               kAudioUnitScope_Input,
                               0,
                               &aacStreamFormat,
                               sizeof (aacStreamFormat)
                               );

if (noErr != result) {[self printErrorMessage: @"AudioUnitSetProperty (input aac2pcm stream format)" withStatus: result];return;}
// returns -10868 
```

`aacStreamFormat`在哪里

```
memset(&aacStreamFormat, 0, sizeof(aacStreamFormat));/
UInt32 size = sizeof(aacStreamFormat);
aacStreamFormat.mFormatID          = kAudioFormatMPEG4AAC;
aacStreamFormat.mChannelsPerFrame  = 2;   
aacStreamFormat.mFormatFlags       = kMPEG4Object_AAC_Main;
aacStreamFormat.mSampleRate        = graphSampleRate; //44100
AudioFormatGetProperty(kAudioFormatProperty_FormatInfo, 0, NULL, &size, &aacStreamFormat); 
```

AUGraph 甚至可以进行这种转换，还是我必须使用其他方法进行实时转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:36:47.007

我认为您不需要 pcm2aac 和 aac2pcm 节点。您可以在混音器节点上安装渲染回调并使用 ExtAudioFileWriteAsync 将输出保存为 AAC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T10:09:45.410

参考 AUComponent.h

```
kAudioUnitSubType_AUConverter
An audio unit that uses an AudioConverter to do Linear PCM conversions 
(sample rate, bit depth, interleaving). 
```

所以你不能通过 kAudioUnitSubType_AUConverter 将 pcm 转码为 aac。

您应该改用 AudioConverter，这里是参考 URL [https://developer.apple.com/library/ios/samplecode/iPhoneACFileConvertTest/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/iPhoneACFileConvertTest/Introduction/Intro.html)

# java - 如何只生成一个包的javadoc

> ID：11456069
> 
> 赞同：4
> 
> 时间：2012-07-12T16:10:08.433
> 
> 标签：java, netbeans, package, javadoc

我将通过 Netbeans javadoc 仅生成一个特定包。如果我按下面板“生成 Javadocs”，我将获得所有项目的 Javadoc。相反，我只会生成一个包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:11:51.550

您可以`packagenames`为此使用参数。句法：

```
javadoc [ options ] [ packagenames ] [ sourcefilenames ] [ -subpackages pkg1:pkg2:... ] [ @argfiles ] 
```

[文档](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html)：

> **packagenames** - 一系列包的名称，以空格分隔，例如 java.lang java.lang.reflect java.awt。您必须单独指定要记录的每个包。不允许使用通配符；使用 -subpackages 进行递归。Javadoc 工具使用 -sourcepath 来查找这些包名称。查看示例 - 记录一个或多个包

您可以将此参数应用于 [右键单击项目] > 属性 > 构建 > 记录您可以提供其他参数，但是当我需要它时，我只是手动（命令行）完成，我得出结论 netbeans 提供了源包作为 javadoc 的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T11:05:34.540

使用 Netbeans 8.1 时：

*   [右键单击项目] > 属性 > 操作
*   选择操作“生成 JavaDoc”
*   在“设置属性：”中，指定：`subpackages=<your package(s)>`
*   点击“确定”

*现在要为此项目*生成 JavaDoc ，请执行 maven`javadoc:javadoc`目标或直接从 Netbeans 运行此目标：

*   [右键单击项目] > 生成 JavaDoc

# javascript - 使用带有 javascript 变量的 popupWindow = window.open

> ID：11456070
> 
> 赞同：0
> 
> 时间：2012-07-12T16:10:11.860
> 
> 标签：javascript, jquery, variables, popupwindow, window.open

我有以下脚本：

```
<script type="text/javascript">
        function train(roww){
        $.post ('getpeopleinjobs.php',{ 
        postvarposition: form["position"+roww].value,
        postvarjob: form["job"+roww].value,
        postvarperson: form["person"+roww].value, 
        postrow: roww},
            function(output){ 
                popupWindow = window.open('trainingneeded.php?position=postvarposition&amp;job=postvarjob&amp;person=postvarperson','popUpWindow','height=400,width=1000,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')
                    });
                }
</script> 
```

我已经测试了脚本，它可以 100% 运行。我的问题是我的变量 postvarposition、postvarjob 和 postvarperson 作为 URL 字符串中的文本而不是实际变量传递。

如何格式化行

```
popupWindow = window.open('trainingneeded.php?position=postvarposition&amp;job=postvarjob&amp;person=postvarperson','popUpWindow','height=400,width=1000,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes') 
```

以便变量作为变量而不是文本传递。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:14:29.397

您需要将变量连接到字符串中：

```
'trainingneeded.php?position=' + postvarposition + '&amp;job=' + postvarjob + '&amp;person=' + postvarperson 
```

**编辑：**

使用您的代码，您可以看到`.post`调用由 3 部分组成：url (getpeopleinjobs.php)、要传递的参数（包含在 {} 中）和您的成功处理程序（函数）。它们中的每一个在范围上都是独立的，因此它们都无法访问其他任何一个。基本上，您的成功处理程序不知道什么是“postvarposition”。为了使其可见，您必须将变量带到其容器范围之外。在这种情况下，您必须从 {} 中移除这些项目的分配，并将它们放在方法`.post`调用之外。

```
<script type="text/javascript">
    function train(roww){
    $.post ('getpeopleinjobs.php',{ 
    // Because this is inside a {} these variables
    // can be considered "trapped" inside this scope
    postvarposition: form["position"+roww].value,
    postvarjob: form["job"+roww].value,
    postvarperson: form["person"+roww].value, 
    postrow: roww},
        function(output){ 
            popupWindow = window.open('trainingneeded.php?position=postvarposition&amp;job=postvarjob&amp;person=postvarperson','popUpWindow','height=400,width=1000,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')
                });
            }
</script> 
```

一个可能的解决方案是：

```
<script type="text/javascript">
    function train(roww){

        // declare them and assign them out here
        var position = form["position"+roww].value;
        var job = form["job"+roww].value;
        var person = form["person"+roww].value;

        $.post ('getpeopleinjobs.php',{ 
            postvarposition: position,
            postvarjob: job,
            postvarperson: person, 
            postrow: roww },
        function(output){ 
            popupWindow = window.open('trainingneeded.php?position=' + position + '&amp;job=' + job + '&amp;person=' + person,'popUpWindow','height=400,width=1000,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes');
                });
            }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T12:44:07.337

我能够让这个工作，它确实是一个需要的字符串连接。

```
//some data taken from the google maps api.
resstring=results[0].geometry.location;

var new_window = 'http://www.trystingtrees.com/coordsc.php?coords='+resstring+'&listing_id=".$listing_id."';

popupWindow=window.open(new_window,'_SELF'); 
```

# postgresql - 将具有依赖关系的列的数据类型从整数更改为数字

> ID：11456073
> 
> 赞同：0
> 
> 时间：2012-07-12T16:10:18.943
> 
> 标签：postgresql, types, alter-table, catalog, dml

我需要更改表中的数据类型，但遇到依赖错误。是否可以直接在 pg_attribute 中将`INTEGER`列的数据类型更改为？`NUMERIC`

我试过了`ALTER TABLE`，但它不起作用：

```
CREATE TABLE documento (
  iddocumento SERIAL, 
  idtipodocumento INTEGER NOT NULL, 
  folio INTEGER NOT NULL, 
  CONSTRAINT pk_documento PRIMARY KEY(iddocumento)
);

ALTER TABLE documento ALTER COLUMN folio TYPE NUMERIC(10,0); 
```

错误：

```
ERROR:  cannot alter type of a column used by a view or rule
DETAIL:  rule _RETURN on view vw_xxx depends on column "folio" 
```

该列具有许多依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:42:51.627

要回答您的问题：

> 是否可以直接在 pg_attribute 中将 INTEGER 列的数据类型更改为 NUMERIC？

**不**，不是。数据类型`integer`和`numeric`二进制不兼容。尝试弄乱系统目录通常是一个非常糟糕的主意。你肯定会破坏你的数据库。[SQL DML](http://en.wikipedia.org/wiki/Data_Manipulation_Language)语句是您想要更改数据库设计时使用的工具。

* * *

@a_horse 已经评论了 PostgreSQL 中的限制。

有像@a_horse 描述的解决方法 - 我使用[pgAdmin](http://www.pgadmin.org/)收集 DDL 脚本以删除和重新创建视图。`psql`也有效。

还有另一种更简单的方法——如果你负担得起的话：转储数据库，破解转储并恢复它。这样，您只需更改转储中的**一行**`documento.folio`，即（整数值适合数字列就好了）的列定义。

但是您需要在操作期间对数据库进行独占访问，即在此期间阻止所有其他访问。所以，这基本上只适用于小型数据库或正在开发的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T21:50:40.383

试试这个：

```
DROP DROP DROP

ALTER TABLE documento ALTER COLUMN folio TYPE NUMERIC(10,0);

CREATE CREATE CREATE... 
```

当然工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:40:39.037

这是 PostgreSQL 中一个非常烦人的限制：您不能更改在视图中使用该列的表的列定义。

不幸的是，唯一的解决方法是首先删除引用该列的所有视图，然后执行更改表，然后重新创建视图。

# c# - 将 gridviews 导出到 3 个工作表中

> ID：11456074
> 
> 赞同：0
> 
> 时间：2012-07-12T16:10:20.847
> 
> 标签：c#, asp.net, gridview, export, excel-interop

在我的网站上，我有一个按钮，它调用一个方法，然后生成 Excel 报告。代码有效。问题是代码在同一个选项卡上显示所有网格视图（有 3 个）。我可以添加什么代码，以便当我单击按钮时，它将下载文档，但每个 gridview 显示在其单独的选项卡上。选项卡名称将是顶部 1、顶部 2 和顶部 3。因此，为了澄清，现在所有的网格视图都显示在顶部 1 选项卡上，我需要再制作 2 个选项卡（顶部 2 和顶部 3）并放置 gridview2在顶部 2 选项卡上，以及在顶部 3 选项卡上的 gridview3。只有 1 个数据集。我可以使用什么代码来循环它，以便将每个表显示到不同的工作表中？

```
public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    DataSet dataSet = new DataSet();

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ISALog1ConnectionString"].ToString());

    SqlCommand cmd = new SqlCommand("exec ProxyReport", conn);
    cmd.CommandTimeout = 200;

    SqlDataAdapter ad = new SqlDataAdapter(cmd);
    ad.Fill(dataSet);

    GridView1.DataSource = dataSet.Tables[0];
    GridView1.DataBind();
    GridView2.DataSource = dataSet.Tables[1];
    GridView2.DataBind();
    GridView3.DataSource = dataSet.Tables[2];
    GridView3.DataBind();

}
protected void Button1_Click(object sender, EventArgs e)
{
    string attachment = "attachment; filename=Top 1.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    GridView1.RenderControl(htw);
    GridView2.RenderControl(htw);
    GridView3.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
}
public override void VerifyRenderingInServerForm(Control control)
{

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:39:08.833

[看起来像是Export GridView to multiple Excel sheet](https://stackoverflow.com/questions/7632782/export-gridview-to-multiple-excel-sheet)的副本。不过，您似乎会研究互操作性。

祝你好运。

# automapper - 如何使用 AutoMapper 填充空对象？

> ID：11456075
> 
> 赞同：2
> 
> 时间：2012-07-12T16:10:21.660
> 
> 标签：automapper

如果发表评论的人是客人，那么 CommentUserViewModel 为空，这是正确的，因为 UserName 是从 User 表中填充的，但是如何填充 CommentUserViewModel 来宾姓名存储在 Comment 表中？

```
public class CommentViewModel
{
  public int Id { get; set; }
  public CommentUserViewModel User { get; set; }
}

public class CommentUserViewModel
{
    public string UserName { get; set; }
    public string GuestName { get; set; }
} 
```

我的映射是：

```
Mapper.CreateMap<Comment, CommentViewModel>();
Mapper.CreateMap<User, CommentUserViewModel>(); 
```

如果没有来宾帖子，这将起作用（因为在检查用户属性时我没有遇到空异常）。

我认为下面的映射会为客人填充用户对象，但它没有影响。客人姓名甚至可以是空白的，所以我也有一个空替代品。

```
Mapper.CreateMap<Comment, CommentUserViewModel>()
.ForMember(c => c.GuestName, m => m.MapFrom(s => s.GuestName))
.ForMember(c => c.UserName, m => m.NullSubstitute("Guest")); 
```

如何更正映射以填充 User.GuestName？

**编辑**

```
var comments = _repository.GetComment();
return Mapper.Map<IEnumerable<Comment>, IEnumerable<CommentViewModel>>(comments); 
```

我正在使用实体框架：

```
public partial class Comment
{
    public int Id { get; set; }
    public string GuestName { get; set; }

    public virtual User User { get; set; }
}

public partial class User
{
    public string UserName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:06:28.563

这篇文章有帮助： [AutoMapper Map Child Property that also has a map defined](https://stackoverflow.com/questions/8944577/automapper-map-child-property-that-also-has-a-map-defined)

```
Mapper.CreateMap<Comment, CommentUserViewModel>()
            .ForMember(c => c.UserName, m => m.MapFrom(s => s.User.UserName));

Mapper.CreateMap<Comment, CommentViewModel>()
            .ForMember(c => c.User,
            opt => opt.MapFrom(s => Mapper.Map<Comment, CommentUserViewModel>(s))); 
```

# wcf - WCF 吞吐量低于预期

> ID：11456076
> 
> 赞同：3
> 
> 时间：2012-07-12T16:10:42.300
> 
> 标签：wcf, iis, throughput, throttling

对于帖子的长度，我深表歉意，但是有很多事情会导致我的情况，我已经尝试包括我根据其他帖子所做的所有设置更改。简而言之，我的 WCF 服务似乎一次被限制为 3 或 4 个并发客户端请求。如果我将应用程序池 Maximum Worker Processes 设置得更高（大约 10 个）或将服务行为 ConcurrencyMode 设置为 Multiple，我会获得更好的吞吐量（快几倍）。然而，这些似乎是解决实际问题的方法，带来了他们自己的问题。我错了，还是 IIS 应该能够在一个工作进程中启动我的 WCF 服务的许多实例（数十个或更多）来处理负载？我只知道我在某处缺少一个设置，但我找不到它。

**编辑：**到目前为止，在尝试这些建议时，我意识到我的数学与吞吐量无关。使用 ForEach 循环，我可以在 20 秒的时间内在服务器上获得估计的并发处理（每个任务持续时间 * 任务数 / 总运行时间）。对于正在完成的实际工作（睡眠 10 秒），这似乎仍然很低，但不再低得离谱。

**第二次编辑：**我将@Pablo 的评论标记为答案，因为他的答案加上他的链接为我提供了显着提高性能的信息（我认为是 3 倍）。但是，我想提出后续问题-在 WCF / IIS 中处理并发请求的合理期望是什么？假设 CPU、内存和 IO 不是瓶颈，处理请求的实际限制/期望（每个 CPU）是多少？我正在寻找的是一个经验法则，它告诉我，如果不添加 CPU（或工作进程），我可能不会获得任何更大的提升。再次感谢。

（在 Windows 2008 Server 上，由 IIS 托管，1 个处理器）
WCF 服务配置（缩写）：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="FMHIRWCFSvc.IRService" behaviorConfiguration="IRServiceBehavior">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="Binding1" contract="FMHIRWCFSvc.IIRService" />
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="Binding1" maxReceivedMessageSize="104857600">
          <readerQuotas maxArrayLength="104857600"/>
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="IRServiceBehavior">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling
              maxConcurrentCalls = "500"
              maxConcurrentSessions = "500"
              maxConcurrentInstances = "500"
            />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <applicationSettings>
    <FMHIRWCFSvc.Properties.Settings>
      <setting name="FMHIRWCFSvc_ir_dev_websvc_IRWebService40" serializeAs="String">
        <value>http://ir-dev-websvc/imageright.webservice/IRWebService40.asmx</value>
      </setting>
    </FMHIRWCFSvc.Properties.Settings>
  </applicationSettings>
  <system.net>
    <connectionManagement>
      <add address="*" maxconnection="500"/>
    </connectionManagement>
  </system.net>
</configuration> 
```

客户端配置（缩写）：

```
<?xml version="1.0"?>
<configuration>
  <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IIRService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://{myserveraddress}/FMHIRWCFSvc/IRService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IIRService"
        contract="wcf_local.IIRService" name="BasicHttpBinding_IIRService" />
    </client>
  </system.serviceModel>
  <system.net>
    <connectionManagement>
      <add address="*" maxconnection="500"/>
    </connectionManagement>
  </system.net>
</configuration> 
```

客户端方法调用：

```
static void WCFTesting()
{
    ConcurrentQueue<Exception> exceptionList = new ConcurrentQueue<Exception>();
    int[] taskList = new int[250];
    Parallel.ForEach(taskList, theTask => 
    {
        try
        {
            // Create the WCF client
            BasicHttpBinding binding = new BasicHttpBinding {
                Security = { Mode = BasicHttpSecurityMode.Transport },
                SendTimeout = TimeSpan.FromSeconds(20)
            };
            EndpointAddress endpointAddress = new EndpointAddress("https://{myserveraddress}/FMHIRWCFSvc/IRService.svc");
            IRServiceClient wcfClient = new IRServiceClient(binding, endpointAddress);

            // Call wcf service method that sleeps 10 seconds and returns
            wcfClient.TestCall();
        }
        catch (Exception exception) {
            // Store off exceptions for later processing
            exceptionList.Enqueue(exception);
        }
    });
} 
```

WCF 服务代码：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
...
public string TestCall()
{
    Thread.Sleep(10000);
    return null;
} 
```

感谢您的任何见解或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:31:56.147

您使用的测试机制可能并不完全正确。

使用`Parallel.For()`并不意味着它将并行创建 250 个工作人员。在这种情况下，您似乎将基准测试限制在最适合您的客户端处理器配置的范围内，而不是实际测试服务器可以处理的内容。

如果您真的想调用 250 个并行线程并查看它的反应，您可以手动创建所有线程。如：

```
 var exceptionList = new ConcurrentQueue<Exception>();
        const int max = 250;
        int numberOfTasks = max;
        var signal = new ManualResetEvent(false);
        for (var i = 0; i < max; i++)
        {
            var thread = new Thread(() =>
            {
                try
                {
                    // Create the WCF client
                    BasicHttpBinding binding = new BasicHttpBinding
                    {
                        Security = { Mode = BasicHttpSecurityMode.Transport },
                        SendTimeout = TimeSpan.FromSeconds(20)
                    };
                    EndpointAddress endpointAddress = new EndpointAddress("https://{myserveraddress}/FMHIRWCFSvc/IRService.svc");
                    IRServiceClient wcfClient = new IRServiceClient(binding, endpointAddress);

                    // Call wcf service method that sleeps 10 seconds and returns
                    wcfClient.TestCall();
                }
                catch (Exception exception)
                {
                    // Store off exceptions for later processing
                    exceptionList.Enqueue(exception);
                }

                if (Interlocked.Decrement(ref numberOfTasks) == 0) signal.Set();
            });
            thread.Start();
        }
        signal.WaitOne(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:42:09.703

`Parallel.ForEach`并`Task.Start`以大致相同的代码结束。不能保证任务同时运行。

[最好使用对 WCF 服务链接](http://msdn.microsoft.com/en-us/library/ms730059.aspx)的异步调用进行测试。

# bdd - 如何在 Emberjs 上对视图绑定和模板进行单元测试？

> ID：11456078
> 
> 赞同：7
> 
> 时间：2012-07-12T16:10:43.193
> 
> 标签：bdd, ember.js

我正在尝试以 TDD/BDD 方式进入 ember，我想知道您如何对模板绑定或视图绑定进行单元测试？

如果应该对其进行测试，那么测试车把模板的最佳做法是什么……？

谢谢， 夏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T17:06:23.423

我没有找到任何人直接谈论这个话题，所以我写[了一篇关于我的发现的帖子](http://shairez.com/2012/07/ember-js-tdd-how-to-test-your-ember-views/)。

我还开辟了一个新的开源项目，专门用于对 emberjs 应用程序进行单元测试，名为[emberjs-tdd](https://github.com/shairez/emberjs-tdd)

基本上我所做的是使用 View.$() 函数来测试我的模板元素是否连接到我的视图，对于绑定我使用模拟数据注入，然后将我的输入值与模拟数据进行比较。

就像是：

```
 describe("Given a login view it", function(){
    var loginView = null;

    beforeEach(function(){
        loginView = LoginView.create();

        Ember.run(function(){
            loginView.append();
        }); 
    });

    afterEach(function(){
        Ember.run(function(){
            loginView.remove();
        });
        loginView = null;
    });

    it("Should be defined", function(){
        expect(loginView).toBeDefined();
    });

    it ("Should have a user property", function(){
        expect(loginView.get("user")).toBeDefined();
    });

    describe("Should have a template and it", function(){

        it("Should have an user input", function(){
            expect(loginView.$("input.userInput").length).toEqual(1);
        });

        it("Should bind the username input value to the user.name property", function(){
            Ember.run(function(){
                loginView.set("user", Em.Object.create({name:"mockValue"}));
            });
            expect(loginView.$("input.userInput").val()).toEqual("mockValue");  
        });

        it("Should have a login button", function(){
            expect(loginView.$("button.loginButton").length).toEqual(1);
        });

    });

}); 
```

我的视图代码是：

```
define(["text!templates/LoginView.handlebars","ember"],function(LoginTemplate){
 var loginView = Em.View.extend({
    template: Em.Handlebars.compile(LoginTemplate),
    user: null
 });
 return loginView;
}); 
```

还有我的模板：

```
{{view Ember.TextField class="userInput" valueBinding="user.name"}}
<button class="loginButton">Login</button> 
```

同样，完整的项目可以在[emberjs-tdd](https://github.com/shairez/emberjs-tdd)项目中找到，所以请填写免费信息，将您的发现贡献给这个项目，以便我们更好地了解如何有效地完成这些工作。

# java - 代码覆盖所需的插件

> ID：11456080
> 
> 赞同：-2
> 
> 时间：2012-07-12T16:10:53.590
> 
> 标签：java, eclipse, eclipse-plugin

我一直在寻找 eclipse 插件以进行代码覆盖，它具有一些功能，例如它可以捕获我的类中的重复代码，它可以提醒我我错过的任何空检查，空检查很重要，它应该在我错过的任何地方提醒我，此外，它还应该检查我的几个 if else 条件，因为我使用的 if else 条件最多，所以它可以提前提醒我，如果我提出的额外 if 条件不需要，请告知带有这些功能主义者的 Eclipse 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:15:00.173

就个人而言，我使用[声纳](http://www.sonarsource.org/)。分析基于所有著名的插件，如 PMD、Checkstyle、FindBugs 等。

要在 Eclipse 中直接报警，有一个插件：[Eclipse sonar plugin](http://www.sonarsource.org/eclipse-sonar-plugin-0-1-in-screenshots/)。

也许是截图？

![在此处输入图像描述](../Images/fc9c06f2c6609604cd4dadd4c106f4c2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:15:09.773

代码覆盖率——测试覆盖代码的程度

[http://ecbertura.johoop.de/](http://ecobertura.johoop.de/)

[http://kennethxu.blogspot.com/2012/01/cobertura-and-eclipse-ecobertura.html](http://kennethxu.blogspot.com/2012/01/cobertura-and-eclipse-ecobertura.html)

您要的是 Findbugs ( [Demo](http://findbugs.cs.umd.edu/demo/jdk7/index.html) )

[http://findbugs.sourceforge.net/downloads.html](http://findbugs.sourceforge.net/downloads.html)

[http://findbugs.sourceforge.net/manual/eclipse.html](http://findbugs.sourceforge.net/manual/eclipse.html)

示例消息：

> 方法调用低效的 Number 构造函数；改用静态 valueOf (3)

# .net - 错误 9 运行线程的应用程序域已被卸载。

> ID：11456081
> 
> 赞同：20
> 
> 时间：2012-07-12T16:10:58.407
> 
> 标签：.net, visual-studio-2012

今天早上何时构建我的网站项目并收到此错误：

`Error 9 The application domain in which the thread was running has been unloaded.`

不显示其他行号、项目或文件信息，仅显示错误消息。我尝试清理解决方案并打开和关闭视觉工作室（运行 2012 测试版）。有人对我如何构建我的项目有任何建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-29T11:28:34.417

通常，只需选择重建选项就足以解决此问题。但是，您可能还需要：

1.  调整您的虚拟内存设置以提供更多的虚拟内存。
2.  退出消耗大量虚拟内存的其他应用程序。
3.  微软似乎也试图在 Visual Studio 的 Service Pack 1 中对此进行修复，尽管这并没有解决所有人的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-30T11:26:08.197

派对迟到了，但对于 googlers：我每次构建时都有这个，必须构建 3 或 4 次才能启动应用程序。我的解决方案在 Dropbox 文件夹中，结果发现 Dropbox 锁定了已编译的 dll。

一旦我排除了 bin 目录（是否 obj 目录也可以很好地衡量），问题就消失了。防病毒/反恶意软件程序也可能是这种情况。

# .htaccess - htaccess 正确重定向到锚点，但不重命名

> ID：11456085
> 
> 赞同：1
> 
> 时间：2012-07-12T16:11:12.890
> 
> 标签：.htaccess

目前我有这个：

```
RewriteRule ^Skills$ http://mypage/resume.php#Skills [NE,NC,L] 
```

当我有 url 时，哪个正确重定向到锚链接：`http://mypage/Skills.` 但是浏览器中的 URL 显示实际的锚链接：`http://mysite/resume.php#Skills` 而不是显示我`http://mysite.com/Skills`

如何重定向和重写 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:01:05.567

它正在重定向浏览器，因为您的目标`http://mypage`前面有一个。`RewriteRule`这会自动告诉重写引擎您想要一个 302 重定向，因此您的浏览器的地址栏将被更改。但是，这里的问题是，如果您将其删除以便它只是`/resume.php#Skills`，它将在内部重写请求（保留浏览器地址栏中的内容）但片段（#Skills）将无用。

客户端使用片段来告诉它以某种方式处理它请求的内容，通常是分页到有命名锚点的位置。如果浏览器没有看到`#Skills`，它不会跳转到名为“技能”的锚点。如果您不重定向，浏览器将看不到该片段，因为它正在由服务器内部处理并且服务器将忽略该片段。

可能有某种 javascript 解决方案告诉浏览器它刚刚加载的内容`http://mypage/resume.php`需要分页到某个命名的锚点。它可以通过查看浏览器的地址栏来做到这一点，看到它正在请求`/Skills`，然后 onload() 将它分页到`Skills`锚点。

# c++ - 通过数字和冒号验证字符串

> ID：11456086
> 
> 赞同：3
> 
> 时间：2012-07-12T16:11:14.050
> 
> 标签：c++, string

我需要验证字符串。该字符串的格式类似于“V02:01:02:03:04”。
**我正在尝试做的事情**：
1）我想检查是否提供了正确的长度
2）第一个字符是“V”
3）所有其他字符都是 2 个字母数字，并用冒号分隔并位于正确的位置。
4）没有空格标签等。c
4）想不出更多的验证。

**到目前为止我所做的**
1) 函数很容易检查 len 和 first char，而不是验证 first 之后的后续字符不包含 alpha 或空格。但是我对如何检查冒号位置和每个冒号后的 2 个字母字符有点卡住了。

下面是我的尝试。

```
 int firmwareVerLen = 15;
const std::string input = "V02:01:02:03:04"; // this is the format string user will input  with changes only in digits.
bool validateInput( const std::string& input )
{
    typedef std::string::size_type stringSize;
    bool result = true ;
    if( firmwareVerLen != (int)input.size() )
    {       
      std::cout <<" len failed" << std::endl;
      result = false ;
    }

    if( true == result )
   {

        if( input.find_first_of('V', 0 ) )
        {
             std::cout <<" The First Character is not 'V' " << std::endl;
             result = false ;
         }
   }

   if( true == result )
   {
        for( stringSize i = 1 ; i!= input.size(); ++ i )
       {
            if( isspace( input[i] ) )
           {
               result = false;
               break;
           }
           if( isalpha(input[i] ) )
            {
               cout<<" alpha found ";
               result = false;
               break;
            }

             //how to check further that characters are digits and are correctly  separated by colon
        }
    }

   return result;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:15:39.693

如果是这么严格的验证，为什么不逐个字符地检查呢？例如（假设你已经完成了尺寸）

```
 if (input[0] != 'V')
    return false;
  if (!std::isdigit(input[1]) || !std::isdigit(input[2]))
    return false;
  if (input[3] != ':')
    return false;
  // etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:17:26.867

从第一个数字开始，所有字符都必须是数字，除非位置模 3 为 0，否则它必须是冒号。

HTH 托斯滕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:01:51.390

对于这么短的输入和严格的格式，我可能会做这样的事情：

```
bool validateInput( const std::string& input )
{
    static const size_t digit_indices[10] = {1, 2, 4, 5, 7, 8, 10, 11, 13, 14};
    static const size_t colon_indices[4] = {3, 6, 9, 12};
    static const size_t firmwareVerLen = 15;

    static const size_t n_digits = sizeof(digit_indices) / sizeof(size_t);
    static const size_t n_colons = sizeof(colon_indices) / sizeof(size_t);

    if (input.size() != firmwareVerLen) return false;     // check 1)
    if (input[0] != 'V') return false;                    // check 2)

    for (size_t i = 0; i < n_digits; ++i)                       // check 3)
        if (!is_digit(input[digit_indices[i]]) return false;

    for (size_t i = 0; i < n_colons; ++i)                        // check 3)
        if (input[colon_indices[i]] != ':') return false;

    // check 4) isn't needed

    return true;
} 
```

如果输入格式发生变化，IMO 相当容易维护。

# php - jQuery + PHP 多文件拖放上传无法创建缩略图 - 奇怪

> ID：11456091
> 
> 赞同：2
> 
> 时间：2012-07-12T16:11:43.667
> 
> 标签：php, jquery, upload, drag-and-drop

3 天来一直在研究这个令人讨厌的枪的儿子。希望有人能够提供一些帮助。基本上，我使用[http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)来允许多个文件上传以及常规文件上传输入。这段代码的第一部分是复制上传的原始图像。这对双方都很好。第二部分是缩略图，在使用拖放脚本时它不起作用，但是使用标准上传时它可以完美地工作。我假设我的问题不在于这段代码，但我包含它只是为了向您展示。我还将包括几乎所有其他代码，以防您发现它相关且有助于诊断。

```
 // copying original image to new location with new name
    $prev = file_get_contents($pic['tmp_name']);
    $new = fopen($file, "w");
    fwrite($new, $prev);
    fclose($new);

    //create image for thumbnail
    switch(strtolower($pic['type']))
    {
        case 'image/jpeg':
            $image = imagecreatefromjpeg($pic['tmp_name']);
            break;
        case 'image/png':
            $image = imagecreatefrompng($pic['tmp_name']);
            imagealphablending($image, true); // setting alpha blending on
            imagesavealpha($image, true);
            break;
        case 'image/gif':
            $image = imagecreatefromgif($pic['tmp_name']);
            break;
        default:
            exit('Unsupported type: '.$pic['type']);
    }

    // Target dimensions
    $max_width = 150;
    $max_height = 150;

    // Get current dimensions
    $old_width  = imagesx($image);
    $old_height = imagesy($image);

    // Calculate the scaling we need to do to fit the image inside our frame
    $scale = min($max_width/$old_width, $max_height/$old_height);

    // Get the new dimensions
    $new_width  = ceil($scale*$old_width);
    $new_height = ceil($scale*$old_height);

    // Create new empty image
    $new = imagecreatetruecolor($new_width, $new_height);

    // Resize old image into new
    imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);

    // Catch the imagedata
    ob_start();
    //create image for thumbnail
    switch(strtolower($pic['type']))
    {
        case 'image/jpeg':
            imagejpeg($new, $_SERVER['DOCUMENT_ROOT']."/".$thumbnail, 90);
            break;
        case 'image/png';
            imagepng($new, $_SERVER['DOCUMENT_ROOT']."/".$thumbnail, 9);
            break;
        case 'image/gif':
            imagegif($new, $_SERVER['DOCUMENT_ROOT']."/".$thumbnail, 9);
            break;
        default:
            exit('Unsupported type: '.$pic['type']);
    }

    chmod($_SERVER['DOCUMENT_ROOT']."/".$thumbnail,0755);

    $data = ob_get_clean();

    // Destroy resources
    imagedestroy($image);
    imagedestroy($new); 
```

的HTML

```
<h1>Upload Image(s)</h1>
<form action='ajax/post_file.php' method='post' enctype="multipart/form-data">
    <input type='file' name='file'><input type='hidden' name='drag_drop' value='yes'><input type='submit' value='go'>
    </form>
        <!-- Our CSS stylesheet file -->
    <link rel="stylesheet" href="ajax/drag_drop_uploads/css/styles.css" />
        <div id="dropbox" style='height: 400px; overflow: auto;'>
        <span class="message">Drop images here to upload. <br /><i>(they will be automatically uploaded to your account)</i></span>
    </div> 
```

处理拖放上传的 JQuery 插件

```
 (function(jQuery){

jQuery.event.props.push("dataTransfer");
var opts = {},
    default_opts = {
        url: '',
        refresh: 1000,
        paramname: 'userfile',
        maxfiles: 25,
        maxfilesize: 5, // MBs
        data: {},
        drop: empty,
        dragEnter: empty,
        dragOver: empty,
        dragLeave: empty,
        docEnter: empty,
        docOver: empty,
        docLeave: empty,
        beforeEach: empty,
        afterAll: empty,
        rename: empty,
        error: function(err, file, i){alert(err);},
        uploadStarted: empty,
        uploadFinished: empty,
        progressUpdated: empty,
        speedUpdated: empty
    },
    errors = ["BrowserNotSupported", "TooManyFiles", "FileTooLarge"],
    doc_leave_timer,
    stop_loop = false,
    files_count = 0,
    files;

jQuery.fn.filedrop = function(options) {
    opts = jQuery.extend( {}, default_opts, options );

    this.bind('drop', drop).bind('dragenter', dragEnter).bind('dragover', dragOver).bind('dragleave', dragLeave);
    jQuery(document).bind('drop', docDrop).bind('dragenter', docEnter).bind('dragover', docOver).bind('dragleave', docLeave);
};

function drop(e) {
    opts.drop(e);
    files = e.dataTransfer.files;
    if (files === null || files === undefined) {
        opts.error(errors[0]);
        return false;
    }

    files_count = files.length;
    upload();
    e.preventDefault();
    return false;
}

function getBuilder(filename, filedata, boundary) {
    var dashdash = '--',
        crlf = '\r\n',
        builder = '';

    jQuery.each(opts.data, function(i, val) {
        if (typeof val === 'function') val = val();
        builder += dashdash;
        builder += boundary;
        builder += crlf;
        builder += 'Content-Disposition: form-data; name="'+i+'"';
        builder += crlf;
        builder += crlf;
        builder += val;
        builder += crlf;
    });

    builder += dashdash;
    builder += boundary;
    builder += crlf;
    builder += 'Content-Disposition: form-data; name="'+opts.paramname+'"';
    builder += '; filename="' + filename + '"';
    builder += crlf;

    builder += 'Content-Type: application/octet-stream';
    builder += crlf;
    builder += crlf; 

    builder += filedata;
    builder += crlf;

    builder += dashdash;
    builder += boundary;
    builder += dashdash;
    builder += crlf;
    return builder;
}

function progress(e) {
    if (e.lengthComputable) {
        var percentage = Math.round((e.loaded * 100) / e.total);
        if (this.currentProgress != percentage) {

            this.currentProgress = percentage;
            opts.progressUpdated(this.index, this.file, this.currentProgress);

            var elapsed = new Date().getTime();
            var diffTime = elapsed - this.currentStart;
            if (diffTime >= opts.refresh) {
                var diffData = e.loaded - this.startData;
                var speed = diffData / diffTime; // KB per second
                opts.speedUpdated(this.index, this.file, speed);
                this.startData = e.loaded;
                this.currentStart = elapsed;
            }
        }
    }
}

function upload() {
    stop_loop = false;
    if (!files) {
        opts.error(errors[0]);
        return false;
    }
    var filesDone = 0,
        filesRejected = 0;

    if (files_count > opts.maxfiles) {
        opts.error(errors[1]);
        return false;
    }

    for (var i=0; i<files_count; i++) {
        if (stop_loop) return false;
        try {
            if (beforeEach(files[i]) != false) {
                if (i === files_count) return;
                var reader = new FileReader(),
                    max_file_size = 1048576 * opts.maxfilesize;

                reader.index = i;
                if (files[i].size > max_file_size) {
                    opts.error(errors[2], files[i], i);
                    filesRejected++;
                    continue;
                }

                reader.onloadend = send;
                reader.readAsBinaryString(files[i]);
            } else {
                filesRejected++;
            }
        } catch(err) {
            opts.error(errors[0]);
            return false;
        }
    }

    function send(e) {
        // Sometimes the index is not attached to the
        // event object. Find it by size. Hack for sure.
        if (e.target.index == undefined) {
            e.target.index = getIndexBySize(e.total);
        }

        var xhr = new XMLHttpRequest(),
            upload = xhr.upload,
            file = files[e.target.index],
            index = e.target.index,
            start_time = new Date().getTime(),
            boundary = '------multipartformboundary' + (new Date).getTime(),
            builder;

        newName = rename(file.name);
        if (typeof newName === "string") {
            builder = getBuilder(newName, e.target.result, boundary);
        } else {
            builder = getBuilder(file.name, e.target.result, boundary);
        }

        upload.index = index;
        upload.file = file;
        upload.downloadStartTime = start_time;
        upload.currentStart = start_time;
        upload.currentProgress = 0;
        upload.startData = 0;
        upload.addEventListener("progress", progress, false);

        xhr.open("POST", opts.url, true);
        xhr.setRequestHeader('content-type', 'multipart/form-data; boundary=' 
            + boundary);

        xhr.sendAsBinary(builder);  

        opts.uploadStarted(index, file, files_count);  

        xhr.onload = function() { 
            if (xhr.responseText) {
            var now = new Date().getTime(),
                timeDiff = now - start_time,
                result = opts.uploadFinished(index, file, jQuery.parseJSON(xhr.responseText), timeDiff);
                filesDone++;
                if (filesDone == files_count - filesRejected) {
                    afterAll();
                }
            if (result === false) stop_loop = true;
            }
        };
    }
}

function getIndexBySize(size) {
    for (var i=0; i < files_count; i++) {
        if (files[i].size == size) {
            return i;
        }
    }

    return undefined;
}

function rename(name) {
    return opts.rename(name);
}

function beforeEach(file) {
    return opts.beforeEach(file);
}

function afterAll() {
    return opts.afterAll();
}

function dragEnter(e) {
    clearTimeout(doc_leave_timer);
    e.preventDefault();
    opts.dragEnter(e);
}

function dragOver(e) {
    clearTimeout(doc_leave_timer);
    e.preventDefault();
    opts.docOver(e);
    opts.dragOver(e);
}

function dragLeave(e) {
    clearTimeout(doc_leave_timer);
    opts.dragLeave(e);
    e.stopPropagation();
}

function docDrop(e) {
    e.preventDefault();
    opts.docLeave(e);
    return false;
}

function docEnter(e) {
    clearTimeout(doc_leave_timer);
    e.preventDefault();
    opts.docEnter(e);
    return false;
}

function docOver(e) {
    clearTimeout(doc_leave_timer);
    e.preventDefault();
    opts.docOver(e);
    return false;
}

function docLeave(e) {
    doc_leave_timer = setTimeout(function(){
        opts.docLeave(e);
    }, 200);
}

function empty(){}

try {
    if (XMLHttpRequest.prototype.sendAsBinary) return;
    XMLHttpRequest.prototype.sendAsBinary = function(datastr) {
        function byteValue(x) {
            return x.charCodeAt(0) & 0xff;
        }
        var ords = Array.prototype.map.call(datastr, byteValue);
        var ui8a = new Uint8Array(ords);
        this.send(ui8a.buffer);
    }
} catch(e) {}

    })(jQuery); 
```

从插件调用和从插件调用的 JQuery

```
 jQuery(function(){

var dropbox = jQuery('#dropbox'),
    message = jQuery('.message', dropbox);

dropbox.filedrop({
    // The name of the jQuery_FILES entry:
    paramname:'file',

    maxfiles: 25,
    maxfilesize: 5,
    url: 'ajax/post_file.php',

    uploadFinished:function(i,file,response){
        jQuery.data(file).addClass('done');
        // response is the JSON object that post_file.php returns
    },

    error: function(err, file) {
        switch(err) {
            case 'BrowserNotSupported':
                showMessage('Your browser does not support HTML5 file uploads!');
                break;
            case 'TooManyFiles':
                alert('Too many files! Please select 5 at most! (configurable)');
                break;
            case 'FileTooLarge':
                alert(file.name+' is too large! Please upload files up to 2mb (configurable).');
                break;
            default:
                break;
        }
    },

    // Called before each upload is started
    beforeEach: function(file){
        if(!file.type.match(/^image\//)){
            alert('Only images are allowed!');

            // Returning false will cause the
            // file to be rejected
            return false;
        }
    },

    uploadStarted:function(i, file, len){
        createImage(file);
    },

    progressUpdated: function(i, file, progress) {
        jQuery.data(file).find('.progress').width(progress);
    }

});

var template = '<div class="preview">'+
                    '<span class="imageHolder">'+
                        '<img />'+
                        '<span class="uploaded"></span>'+
                    '</span>'+
                    '<div class="progressHolder">'+
                        '<div class="progress"></div>'+
                    '</div>'+
                '</div>'; 

function createImage(file){

    var preview = jQuery(template), 
        image = jQuery('img', preview);

    var reader = new FileReader();

    image.width = 100;
    image.height = 100;

    reader.onload = function(e){

        // e.target.result holds the DataURL which
        // can be used as a source of the image:

        image.attr('src',e.target.result);
    };

    // Reading the file as a DataURL. When finished,
    // this will trigger the onload function above:
    reader.readAsDataURL(file);

    message.hide();
    preview.appendTo(dropbox);

    // Associating a preview container
    // with the file, using jQuery's jQuery.data():

    jQuery.data(file,preview);
}

function showMessage(msg){
    message.html(msg);
}

    }); 
```

他们给我的示例 PHP

```
 $demo_mode = false;
       $upload_dir = 'ajax/uploads/';
       $allowed_ext = array('jpg','jpeg','png','gif');

      if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
  exit_status('Error! Wrong HTTP method!');
      }

    if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

$pic = $_FILES['pic'];

if(!in_array(get_extension($pic['name']),$allowed_ext)){
    exit_status('Only '.implode(',',$allowed_ext).' files are allowed!');
}   

if($demo_mode){

    // File uploads are ignored. We only log them.

    $line = implode('       ', array( date('r'), $_SERVER['REMOTE_ADDR'],          
            $pic['size'], $pic['name']));
    file_put_contents('log.txt', $line.PHP_EOL, FILE_APPEND);

    exit_status('Uploads are ignored in demo mode.');
        }

// Move the uploaded file from the temporary 
// directory to the uploads folder:

if(move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name'])){
    exit_status('File was uploaded successfuly!');
}

    }

    exit_status('Something went wrong with your upload!');

     // Helper functions

     function exit_status($str){
 echo json_encode(array('status'=>$str));
 exit;
     }

    function get_extension($file_name){
$ext = explode('.', $file_name);
$ext = array_pop($ext);
return strtolower($ext);
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:02:14.450

正如 OP 评论中所讨论的那样；

似乎文件上传示例没有正确填充文件类型，导致点击开关的`default`块（一个`exit`）

顺便说一句，您可能希望将其交换为抛出异常，以便将来在日志中看到有用的内容

# objective-c - Wrapped Monotouch 类的 ClassHandle 返回 null

> ID：11456092
> 
> 赞同：2
> 
> 时间：2012-07-12T16:11:44.133
> 
> 标签：objective-c, binding, xamarin.ios

我在 Monotouch 中包装了一个 Objective-c 库。问题是，在使用 btouch 生成 DLL 后，当我尝试在示例应用程序中使用 DLL 中的一些类时，大多数类的***classHandle***返回**0x0**。我调试了这个问题，发现Messaging 类使用的**class_ptr也返回 0x0。**

我检查了构建输出（在 MonoDevelop 中构建项目之后），它看起来链接了我的本机库，但我仍然得到同样的错误。构建输出包括在下面。问题是我有一个协议 GDiOSDelegate 定义如下

```
@protocol GDiOSDelegate
@required

- (void)handleEvent:(GDAppEvent*)anEvent;
@end 
```

该协议由 GDiOS 类（我也包括在内）使用，但它还需要与 UIApplicationDelegate 交互，因为 HandleEvent 方法需要与 UIApplicationDelegate 中的某些对象进行通信（在 Objective-C 中使用该库的等效示例代码有一个类答：NSObject）。

我的方法是在 GDiOSDelegate 的绑定中，我将 typeof 属性设置为 UIApplicationDelegate 而不是 NSObject

```
[BaseType(typeof(UIApplicationDelegate))] 
```

所以，回到我在使用 Monotouch 绑定 DLL 中的一些方法后遇到的错误，它抛出了一个异常，说 AppDelegate 没有实现 UIApplicationDelegate。

```
[Register ("AppDelegate")]
public partial class AppDelegate : GDiOSDelegate
{...} 
```

即使我将 UIApplicationDelegate 而不是 GDiOSDelegate 作为基类，也会发生这种情况。

构建输出：

```
Building: GDBinding (Debug)

Build started 7/16/2012 9:03:46 AM.
__________________________________________________
Project "/Users/thabetkacem/Projects/GDBinding/GDBinding/GDBinding.csproj" (Build   target(s)):

Target CreateGeneratedSourcesDir:
    Created directory "obj/Debug/ios/"

Target PrepareForBuild:
    Configuration: Debug Platform: AnyCPU

Target CopyFilesMarkedCopyLocal:
    Copying file from '/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll' to '/Users/thabetkacem/Projects/GDBinding/GDBinding/bin/Debug/GDBinding.dll'

Target GenerateSatelliteAssemblies:
No input files were specified for target GenerateSatelliteAssemblies, skipping.

Target GenerateBindings:
    Tool /Developer/MonoTouch/usr/bin/btouch execution started with arguments: /d:DEBUG GDBinding.cs /s:StructsAndEnums.cs /tmpdir:obj/Debug/ios/  /sourceonly:obj/Debug/ios//sources.list 
GDBinding.cs(642,22): warning CS0465: Introducing `Finalize' method can interfere with destructor invocation. Did you intend to declare a destructor?

Target CoreCompile:
    Tool /Developer/MonoTouch/usr/bin/smcs execution started with arguments: /noconfig /debug:full /debug+ /optimize- /out:obj/Debug/GDBinding.dll /resource:libGD.a libGD.linkwith.cs Extra.cs AssemblyInfo.cs StructsAndEnums.cs obj/Debug/ios/ObjCRuntime/Messaging.g.cs obj/Debug/ios/GDBinding/GDCReadStream.g.cs obj/Debug/ios/GDBinding/GDCWriteStream.g.cs obj/Debug/ios/GDBinding/GDPersistentStoreCoordinator.g.cs obj/Debug/ios/GDBinding/GDFileSystem.g.cs obj/Debug/ios/GDBinding/GDDirectByteBuffer.g.cs obj/Debug/ios/GDBinding/GDSocketDelegate.g.cs obj/Debug/ios/GDBinding/GDSocket.g.cs obj/Debug/ios/GDBinding/GDHttpRequestDelegate.g.cs obj/Debug/ios/GDBinding/GDHttpRequest.g.cs obj/Debug/ios/GDBinding/NSURLCache.g.cs obj/Debug/ios/GDBinding/GDURLLoadingSystem.g.cs obj/Debug/ios/GDBinding/GDCacheController.g.cs obj/Debug/ios/GDBinding/GDPushConnectionDelegate.g.cs obj/Debug/ios/GDBinding/GDPushConnection.g.cs obj/Debug/ios/GDBinding/GDPushChannelDelegate.g.cs obj/Debug/ios/GDBinding/GDPushChannel.g.cs obj/Debug/ios/GDBinding/GDSecureDocs.g.cs obj/Debug/ios/GDBinding/GDAppEvent.g.cs obj/Debug/ios/GDBinding/GDiOSDelegate.g.cs obj/Debug/ios/GDBinding/GDiOS.g.cs obj/Debug/ios/GDBinding/NSMutableURLRequest.g.cs /target:library /unsafe+ /define:DEBUG /reference:/Developer/MonoTouch/usr/lib/mono/2.1/System.dll /reference:/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll /reference:../../../Desktop/GDExtended/GDBinding.dll /reference:/Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll /reference:/Developer/MonoTouch/usr/lib/mono/2.1/mscorlib.dll /warn:4
obj/Debug/ios/GDBinding/GDSocket.g.cs(273,53): warning CS0436: The type   `GDBinding.GDSocketDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(541,58): warning CS0436: The type `GDBinding.GDHttpRequestDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDPushConnection.g.cs(180,61): warning CS0436: The type `GDBinding.GDPushConnectionDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition 
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDPushChannel.g.cs(175,58): warning CS0436: The type `GDBinding.GDPushChannelDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDiOS.g.cs(393,50): warning CS0436: The type `GDBinding.GDiOSDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/ObjCRuntime/Messaging.g.cs(53,134): warning CS0436: The type `GDBinding.GDFileStat' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDFileSystem.g.cs(159,31): warning CS0436: The type `GDBinding.GDCReadStream' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDFileSystem.g.cs(181,31): warning CS0436: The type `GDBinding.GDCWriteStream' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDDirectByteBuffer.g.cs(139,46): warning CS0108: `GDBinding.GDDirectByteBuffer.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDSocket.g.cs(177,32): warning CS0436: The type `GDBinding.GDDirectByteBuffer' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(377,46): warning CS0108: `GDBinding.GDHttpRequest.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(449,32): warning CS0436: The type `GDBinding.GDHttpRequest_state_t' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/NSURLCache.g.cs(79,57): warning CS0436: The type `GDBinding.NSURLCache' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDPushConnection.g.cs(84,31): warning CS0436: The type `GDBinding.GDPushConnection' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDPushChannel.g.cs(148,46): warning CS0108: `GDBinding.GDPushChannel.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDSecureDocs.g.cs(101,85): warning CS0436: The type `GDBinding.SendFileSuccessBlock' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDAppEvent.g.cs(82,32): warning CS0436: The type `GDBinding.GDAppResultCode' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDAppEvent.g.cs(102,32): warning CS0436: The type `GDBinding.GDAppEventType' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDiOSDelegate.g.cs(76,51): warning CS0436: The type `GDBinding.GDAppEvent' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDiOS.g.cs(139,36): warning CS0465: Introducing `Finalize' method can interfere with destructor invocation. Did you intend to declare a destructor?
obj/Debug/ios/GDBinding/GDiOS.g.cs(163,31): warning CS0436: The type `GDBinding.GDiOS' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/GDiOS.g.cs(281,94): warning CS0436: The type `GDBinding.GDUIColorTheme' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/GDBinding/NSMutableURLRequest.g.cs(83,67): warning CS0436: The type `GDBinding.NSMutableURLRequest' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)
obj/Debug/ios/ObjCRuntime/Messaging.g.cs(44,84): warning CS0436: The type `GDBinding.Messaging' conflicts with the imported type of same name'. Ignoring the imported type definition
/Users/thabetkacem/Desktop/GDExtended/GDBinding.dll (Location of the symbol related to previous warning)

Target DeployOutputFiles:
    Copying file from '/Users/thabetkacem/Projects/GDBinding/GDBinding/obj/Debug/GDBinding.dll.mdb' to '/Users/thabetkacem/Projects/GDBinding/GDBinding/bin/Debug/GDBinding.dll.mdb'
    Copying file from '/Users/thabetkacem/Projects/GDBinding/GDBinding/obj/Debug/GDBinding.dll' to '/Users/thabetkacem/Projects/GDBinding/GDBinding/bin/Debug/GDBinding.dll'
Done building project "/Users/thabetkacem/Projects/GDBinding/GDBinding/GDBinding.csproj".

Build succeeded.

Warnings:

/Users/thabetkacem/Projects/GDBinding/GDBinding/GDBinding.csproj (Build) ->    /Library/Frameworks/Mono.framework/External/xbuild/Xamarin/Xamarin.ObjcBinding.CSharp.targets 
(GenerateBindings target) ->

GDBinding.cs(642,22): warning CS0465: Introducing `Finalize' method can interfere with destructor invocation. Did you intend to declare a destructor?

/Users/thabetkacem/Projects/GDBinding/GDBinding/GDBinding.csproj (Build) ->
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Microsoft.CSharp.Targets  (CoreCompile target) ->

obj/Debug/ios/GDBinding/GDSocket.g.cs(273,53): warning CS0436: The type `GDBinding.GDSocketDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(541,58): warning CS0436: The type `GDBinding.GDHttpRequestDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDPushConnection.g.cs(180,61): warning CS0436: The type `GDBinding.GDPushConnectionDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDPushChannel.g.cs(175,58): warning CS0436: The type `GDBinding.GDPushChannelDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDiOS.g.cs(393,50): warning CS0436: The type `GDBinding.GDiOSDelegate' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/ObjCRuntime/Messaging.g.cs(53,134): warning CS0436: The type `GDBinding.GDFileStat' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDFileSystem.g.cs(159,31): warning CS0436: The type `GDBinding.GDCReadStream' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDFileSystem.g.cs(181,31): warning CS0436: The type `GDBinding.GDCWriteStream' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDDirectByteBuffer.g.cs(139,46): warning CS0108: `GDBinding.GDDirectByteBuffer.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
obj/Debug/ios/GDBinding/GDSocket.g.cs(177,32): warning CS0436: The type `GDBinding.GDDirectByteBuffer' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(377,46): warning CS0108: `GDBinding.GDHttpRequest.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
obj/Debug/ios/GDBinding/GDHttpRequest.g.cs(449,32): warning CS0436: The type `GDBinding.GDHttpRequest_state_t' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/NSURLCache.g.cs(79,57): warning CS0436: The type `GDBinding.NSURLCache' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDPushConnection.g.cs(84,31): warning CS0436: The type `GDBinding.GDPushConnection' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDPushChannel.g.cs(148,46): warning CS0108: `GDBinding.GDPushChannel.Init' hides inherited member `MonoTouch.Foundation.NSObject.Init()'. Use the new keyword if hiding was intended
obj/Debug/ios/GDBinding/GDSecureDocs.g.cs(101,85): warning CS0436: The type `GDBinding.SendFileSuccessBlock' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDAppEvent.g.cs(82,32): warning CS0436: The type `GDBinding.GDAppResultCode' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDAppEvent.g.cs(102,32): warning CS0436: The type `GDBinding.GDAppEventType' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDiOSDelegate.g.cs(76,51): warning CS0436: The type `GDBinding.GDAppEvent' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDiOS.g.cs(139,36): warning CS0465: Introducing `Finalize' method can interfere with destructor invocation. Did you intend to declare a destructor?
obj/Debug/ios/GDBinding/GDiOS.g.cs(163,31): warning CS0436: The type `GDBinding.GDiOS' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/GDiOS.g.cs(281,94): warning CS0436: The type `GDBinding.GDUIColorTheme' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/GDBinding/NSMutableURLRequest.g.cs(83,67): warning CS0436: The type `GDBinding.NSMutableURLRequest' conflicts with the imported type of same name'. Ignoring the imported type definition
obj/Debug/ios/ObjCRuntime/Messaging.g.cs(44,84): warning CS0436: The type `GDBinding.Messaging' conflicts with the imported type of same name'. Ignoring the imported type definition

 25 Warning(s)
 0 Error(s)

Time Elapsed 00:00:05.0845450

---------------------- Done ----------------------

Build: 0 errors, 25 warnings

Any help would be greatly appreciated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:15:05.283

如果您不**手动**或（更好地）使用`[LinkWith]`属性将本机库（您绑定的）与您的应用程序链接，则可能会发生这种情况。

在这种情况下，选择器消息将不会到达本*机*代码并将返回`null`（这将显示句柄（实例或类）为`0x0`.

要确认这一点，请查看您的*构建输出*（在 MonoDevelop 内）并查看您`libX.a`是否链接到您的应用程序。

还可以在模拟器（i386）和设备（armv6 和/或 armv7）上尝试此操作，因为您的本机库架构可能不可用（在您的`.a`.

# jquery - img 文件名上的 dataTables fnFilter 列

> ID：11456095
> 
> 赞同：6
> 
> 时间：2012-07-12T16:11:51.053
> 
> 标签：jquery, regex, datatables

我正在尝试根据标记的 src 属性中的图像文件名过滤列。

我的行看起来像这样：

```
<tr class="unread odd">
    <td class=" "><input type="checkbox" name="r28416" value="1"></td>
    <td class=" "><img src="img/icons/bullet_yellow.png" alt="A" title="A"></td>
    <td class="nw ">Non-Lu</td>
    <td class=" "><a class="fancybox" href="tpl/laboratoires/details.php?id=28416">J9121702</a></td>
    <td class=" ">Data</td>
    <td class=" ">378192</td>
    <td class=" ">John Doe</td>
    <td class=" ">DOEJ54161235</td>
    <td class="nw  sorting_1">2012-07-12 12:02</td>
    <td class=" ">0</td>
    <td class=" ">40</td> 
```

我使用这条线作为过滤器：

```
table.fnFilter( "bullet_yellow", 1 ); 
```

每个其他列都有效，我对其他列有不同的过滤器。只是不适用于这个。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T10:41:08.503

对我来说，当我在 with 中添加要过滤的文本时，它就起作用`span`了`display:none`。

```
 <td class=" ">
  <img src="img/icons/bullet_yellow.png" alt="A" title="A">
  <span style="display:none;">bullet_yellow</span>`
 </td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:49:57.730

也许尝试将 src 放入隐藏列，然后使用该列进行排序/过滤。我不得不在不同的列上进行排序，因为我的第二列已转换为图像。

```
aoColumns: [
{"sType": "html", "bSortable": true},
{"iDataSort": 2, "bSortable": true, "bUseRendered":false},
{"bVisible": true, "sType": "numeric"}
] 
```

# java - 在性能方面，线程（例如摆动线程）是否会“干扰”我的线程？

> ID：11456098
> 
> 赞同：0
> 
> 时间：2012-07-12T16:11:55.487
> 
> 标签：java, multithreading, swing

我正在开发一个小型多线程应用程序（在 java 中）来帮助我理解它。当我对此进行研究时，我了解到您希望处理器支持的理想线程数量（我认为，英特尔 i3 中为 4 个，英特尔 i7 中为 8 个）。但是单独的 swing 已经有 3 个线程 + 1 个线程（在这种情况下是主线程）。这是否意味着我在支持 4 线程的处理器上不会有任何重大改进？摆动线程会只消耗所有处理器线程，而其他一切都将只在同一个处理器上运行吗？即使使用那些摆动线程，是否值得多线程（性能方面）？

OBS：可能需要做的一个重要观察是，我将使用 JFrame 并进行主动渲染。这可能是我会用挥杆去的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:15:00.173

大多数线程做的第一件事就是*等待*。他们就在那里，所以他们准备好在系统需要他们的服务的那一刻开始。

关于理想线程数的评论适用于 100% 工作负载下的线程数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:15:54.203

> 我了解到您希望处理器支持的理想线程数量

`Thread`仅当您的 s 占用整个 CPU时，该声明才成立。例如 Swing 线程（Event Dispatch Thread）大部分时间只是在等待用户输入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T16:18:55.260

Swing 的线程花费大量时间处于空闲状态。理想的线程数是以或接近 100% 处理器时间执行的线程。由于其他因素，您可能仍然看不到显着的改进，但摆动中固有的线程不应该是一个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T16:14:47.900

是的，他们这样做，但只是最低限度。还有其他线程，例如 GC 和终结器线程，它们也在后台运行。这些都是 JVM 运行所必需的，就像 Swing 线程是 Swing 工作所必需的一样。

除非您在一个资源或 CPU 容量极少的非常小的系统上，否则您不必担心它们。

对于现代系统，其中许多具有多个处理器和/或多个内核，JVM 和操作系统将在其他处理器上运行这些其他线程，并且仍然为您的用户线程提供您需要的所有处理器能力。

此外，大多数后台 Swing 线程都处于等待循环中，等待处理事件并进行显示更改。除非您做错了什么，否则它们应该构成您的应用程序处理器需求的一小部分。

> 我了解到您希望处理器支持的理想线程数量

正如@Robin 提到的，这仅在您尝试优化具有许多 CPU 绑定操作的程序时才有必要。例如，我们的应用程序通常有 1000 多个线程，但有 8 个处理器，并且仍然非常敏感，因为线程都在等待 IO 或事件。唯一需要担心 CPU 数量的情况是在执行处理器密集型操作并尝试最大化吞吐量时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T16:25:03.000

理想的线程数不一定由您拥有的 CPU（核心）数决定。根据您正在执行的实际代码，涉及很多调整。

例如，让我们以 Runnable 为例，它执行一些数据库查询（不管是什么）。大部分线程时间将被阻塞等待来自数据库的响应。因此，如果您有 4 个内核，并执行 4 个线程。很可能在任何给定时间，它们中的许多都在 db 调用中被阻塞。您可以轻松地生成更多线程，而不会对您的 cpu 产生不良影响。在这种情况下，您不受机器规格的限制，而是受到数据库将处理的并发程度的限制。

另一个例子是文件 I/O，它花费大部分时间等待 I/O 子系统响应数据。

唯一真正的方法是评估您的多线程代码，以及针对给定环境的反复试验。

# java - 谷歌搜索api问题

> ID：11456101
> 
> 赞同：0
> 
> 时间：2012-07-12T16:12:01.503
> 
> 标签：java, google-api, google-api-java-client, google-search-api

我在我的项目中实现了用于购物的谷歌搜索 API，但就目前而言，请求返回带有响应代码 200（OK）的 json obect 并且不返回任何项目（甚至没有“项目”字段）。当我在浏览器中输入我的请求，但将 GAN 更改为公共时，它会返回许多项目。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:58:58.417

问题解决了。我不得不检查我的谷歌帐户中的附属公司。

# sparql - Sparql 查询删除所有语句

> ID：11456102
> 
> 赞同：2
> 
> 时间：2012-07-12T16:12:06.147
> 
> 标签：sparql

我想删除与标签中包含某些字符的对象相关的所有语句。我正在使用查询：

```
DELETE
{?term ?p ?o}
WHERE
{
?term rdfs:label ?label.
FILTER(regex(?label, "xx", "i"))
?term ?p ?o.
} 
```

但是，此查询似乎无法删除包含此语句的主题作为对象的所有语句。然后我似乎需要另一个查询。

```
DELETE
{?s ?p ?term}
WHERE
{
?term rdfs:label ?label.
FILTER(regex(?label, "xx", "i"))
?s ?p ?term.
} 
```

SELECT * 似乎不适用于 DELETE，我也尝试在 DELETE 中建模 UNION，但没有成功。你能指出我的解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:10:07.883

尝试这个。它适用于我的插入和删除

```
DELETE
{?term ?p ?o}
WHERE
{
 SELECT ?term ?p ?o
 WHERE{
   ?term rdfs:label ?label.
   FILTER(regex(?label, "xx", "i"))
 }
} 
```

# c++ - GCC 中 cmath 的 pow() 的正确性

> ID：11456104
> 
> 赞同：4
> 
> 时间：2012-07-12T16:12:15.243
> 
> 标签：c++, math, gcc, g++

**代码**[GCC，使用 -O2 标志编译]

```
int main()
{
    vector< vector<int> > matrixa(8);
    int ff = 5;
    int s = pow(ff, matrixa.size());
    int ss = pow(double(ff), int(matrixa.size()));
    vector< vector<int> > comb(s);
    cout << ff << "^" << matrixa.size() << " = " << s << endl;
    cout << ss << endl;
    return 0;
} 
```

**输出**

```
5^8 = 390624
390625 
```

我想知道为什么`s = 390624`它应该是什么时候`390625`。如果我编译没有 -O2 标志的代码，那么`s = 390625`. 此外，铸造`ss`似乎纠正了这个问题。

这是怎么回事？

我的操作系统是 Windows 7 Ultimate x64。不确定 GCC 版本，它带有 Code::Blocks 10.05。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:18:07.007

因为浮点运算并不完美，当你这样做时

```
int s = pow(ff, matrixa.size()); 
```

的结果`pow`实际上更像是`390624.99999`，当您`int`有效地将其截断为 390624 `pow`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T16:18:48.157

尝试将结果分配给 a`double`并输出它（可能更大`std::setprecision`）设置。您会看到由于舍入错误，该值将类似于`390624.99999999999`（或类似）。

转换为 int 会截断小数部分，从而为您留下`390624`. 用于`std::round`获得所需的结果。

# iphone - 如何将值 NSLabel 从一种表示形式传递到另一种表示形式。带故事板

> ID：11456106
> 
> 赞同：1
> 
> 时间：2012-07-12T16:12:20.613
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, storyboard

如何将值从一个控制器传递到另一个？我使用故事板。

```
-(void) prepareForSegue:(UIStoryboardPopoverSegue *)segue sender:(id)sender
{
    if ([segue.identifier hasPrefix:@"FinishController"]) {
        FinishController *asker = (FinishController *) segue.destinationViewController;
        asker.FinishDesc = @"What do you want your label to say?";
        asker.FinishTitle = @"Label text";
        asker.FinishPoint = @"asdas";
    }
} 
```

![故事板](../Images/8c27e4506c3ba35426dd44b2528b2157.png)

我想出现在第一个视图的突出显示的文本视图上。

调用代码的下一个视图，我认为应该是这样的： UIStoryboard *finish = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

```
 UIViewController *viewController = [finish instantiateViewControllerWithIdentifier:@"FinishController"];

     viewController.modalPresentationStyle = UIModalPresentationPageSheet;
     [self presentModalViewController:viewController animated:YES]; 
```

完成控制器：

```
- (void)viewDidLoad
{
    self.lblFinishTitle.text=self.FinishTitle;
    self.lblFinishDesc.text = self.FinishDesc;
    self.lblFinishPoint.text=self.FinishPoint;
    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:59:32.363

可以使用全局变量吗？如果是这样，请看一下名为“extern”的东西。希望这能给你一个方向=]

# algorithm - 将集合划分为“k”个接近相等的部分（Scala，但与语言无关）

> ID：11456107
> 
> 赞同：19
> 
> 时间：2012-07-12T16:12:24.533
> 
> 标签：algorithm, scala, slice

在这段代码之前定义：

*   `dataset`可以是`Vector`或`List`
*   `numberOfSlices`表示`Int`对数据集进行切片的次数

我想将数据集分成多个`numberOfSlices`切片，尽可能均匀地分布。“分裂”我想我的意思是“分区”（所有的交集应该是空的，所有的联合应该是原始的）使用集合论术语，虽然这不一定是一个集合，只是一个任意集合。

例如

```
dataset = List(1, 2, 3, 4, 5, 6, 7)
numberOfSlices = 3
slices == ListBuffer(Vector(1, 2), Vector(3, 4), Vector(5, 6, 7)) 
```

有没有比我下面的更好的方法？（我什至不确定这是最优的......）或者这可能不是算法上可行的努力，在这种情况下，任何已知的好的启发式方法？

```
val slices = new ListBuffer[Vector[Int]]
val stepSize = dataset.length / numberOfSlices
var currentStep = 0
var looper = 0
while (looper != numberOfSlices) {
  if (looper != numberOfSlices - 1) {
    slices += dataset.slice(currentStep, currentStep + stepSize)
    currentStep += stepSize
  } else {
    slices += dataset.slice(currentStep, dataset.length)
  }
  looper += 1
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T16:55:57.933

如果 的行为`xs.grouped(xs.size / n)`对您不起作用，那么很容易准确地定义您想要的内容。商是小块的大小，余数是大块的数量：

```
def cut[A](xs: Seq[A], n: Int) = {
  val (quot, rem) = (xs.size / n, xs.size % n)
  val (smaller, bigger) = xs.splitAt(xs.size - rem * (quot + 1))
  smaller.grouped(quot) ++ bigger.grouped(quot + 1)
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T18:27:43.187

典型的“最佳”分区在切割后计算精确的小数长度，然后四舍五入以找到要取的实际数字：

```
def cut[A](xs: Seq[A], n: Int):Vector[Seq[A]] = {
  val m = xs.length
  val targets = (0 to n).map{x => math.round((x.toDouble*m)/n).toInt}
  def snip(xs: Seq[A], ns: Seq[Int], got: Vector[Seq[A]]): Vector[Seq[A]] = {
    if (ns.length<2) got
    else {
      val (i,j) = (ns.head, ns.tail.head)
      snip(xs.drop(j-i), ns.tail, got :+ xs.take(j-i))
    }
  }
  snip(xs, targets, Vector.empty)
} 
```

这样，您的更长和更短的块将被穿插，这通常更适合均匀性：

```
scala> cut(List(1,2,3,4,5,6,7,8,9,10),4)
res5: Vector[Seq[Int]] = 
  Vector(List(1, 2, 3), List(4, 5), List(6, 7, 8), List(9, 10)) 
```

您甚至可以剪切比您拥有的元素更多的次数：

```
scala> cut(List(1,2,3),5)
res6: Vector[Seq[Int]] = 
  Vector(List(1), List(), List(2), List(), List(3)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-14T21:53:00.827

这是一个为我完成这项工作的单线器，它使用了熟悉的 Scala 技巧，即递归函数返回一个`Stream`. 注意使用`(x+k/2)/k`来舍入块大小，在最终列表中插入更小和更大的块，所有块的大小都最多有一个差异元素。如果您使用 向上取整，`(x+k-1)/k`则将较小的块移动到末尾，然后`x/k`将它们移动到开头。

```
def k_folds(k: Int, vv: Seq[Int]): Stream[Seq[Int]] =
    if (k > 1)
        vv.take((vv.size+k/2)/k) +: k_folds(k-1, vv.drop((vv.size+k/2)/k))
    else
        Stream(vv) 
```

演示：

```
scala> val indices = scala.util.Random.shuffle(1 to 39)

scala> for (ff <- k_folds(7, indices)) println(ff)
Vector(29, 8, 24, 14, 22, 2)
Vector(28, 36, 27, 7, 25, 4)
Vector(6, 26, 17, 13, 23)
Vector(3, 35, 34, 9, 37, 32)
Vector(33, 20, 31, 11, 16)
Vector(19, 30, 21, 39, 5, 15)
Vector(1, 38, 18, 10, 12)

scala> for (ff <- k_folds(7, indices)) println(ff.size)
6
6
5
6
5
6
5

scala> for (ff <- indices.grouped((indices.size+7-1)/7)) println(ff)
Vector(29, 8, 24, 14, 22, 2)
Vector(28, 36, 27, 7, 25, 4)
Vector(6, 26, 17, 13, 23, 3)
Vector(35, 34, 9, 37, 32, 33)
Vector(20, 31, 11, 16, 19, 30)
Vector(21, 39, 5, 15, 1, 38)
Vector(18, 10, 12)

scala> for (ff <- indices.grouped((indices.size+7-1)/7)) println(ff.size)
6
6
6
6
6
6
3 
```

请注意如何`grouped`不尝试平衡所有子列表的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-04T13:58:02.130

这是我对这个问题的看法：

```
 def partition[T](items: Seq[T], partitionsCount: Int): List[Seq[T]] = {
    val minPartitionSize = items.size / partitionsCount
    val extraItemsCount = items.size % partitionsCount

    def loop(unpartitioned: Seq[T], acc: List[Seq[T]], extra: Int): List[Seq[T]] =
      if (unpartitioned.nonEmpty) {
        val (splitIndex, newExtra) = if (extra > 0) (minPartitionSize + 1, extra - 1) else (minPartitionSize, extra)
        val (newPartition, remaining) = unpartitioned.splitAt(splitIndex)
        loop(remaining, newPartition :: acc, newExtra)
      } else acc

    loop(items, List.empty, extraItemsCount).reverse
  } 
```

它比其他一些解决方案更冗长，但也希望更清晰。仅当您希望保留订单时才需要**反向。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:52:24.353

正如 Kaito 所提到`grouped`的，这正是您正在寻找的。但是如果你只是想知道如何实现这样的方法，有很多方法;-)。例如，您可以这样做：

```
def grouped[A](xs: List[A], size: Int) = {
  def grouped[A](xs: List[A], size: Int, result: List[List[A]]): List[List[A]] = {
    if(xs.isEmpty) {
      result
    } else {
      val (slice, rest) = xs.splitAt(size)
      grouped(rest, size, result :+ slice)
    }
  }
  grouped(xs, size, Nil)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T17:02:43.627

我会这样处理：给定`n`元素和`m`分区 (n>m)，n mod m == 0 在这种情况下，每个分区将有 n/m 个元素，或者 n mod m = y，在这种情况下你'每个分区都有`n/m`元素，你必须分布`y`在一些`m`.

您将拥有`y`带有`n/m+1`元素的插槽和带有 n/m 的（我的）插槽。你如何分配它们是你的选择。

# java - 如何使用具有可变正弦波大小和整数而不是短裤的 FFT 代码？

> ID：11456108
> 
> 赞同：1
> 
> 时间：2012-07-12T16:12:26.620
> 
> 标签：java, integer, transform, fft

[http://www.koders.com/java/fid168F68D8D019CF9A4F17CA8AFEE102F8BE3B2C28.aspx?s=FFT#L21](http://www.koders.com/java/fid168F68D8D019CF9A4F17CA8AFEE102F8BE3B2C28.aspx?s=FFT#L21)

2部分的问题，真的。我对 FFT 的理解很笼统。

1）代码看起来很简单。但是我正在寻找的解决方案需要可变数据数组大小（仍然是 2 的幂）。那么我应该如何改变这里使用的正弦波呢？我看到这是一个明确定义的静态 1024 大小的正弦波。如何使用真实数据数组的动态大小来生成适当的正弦波？

2）此外，我正在寻找的解决方案需要使用整数而不是像链接的示例那样的短裤。由于输入数据数组将是一个整数数组。需要对此代码进行哪些修改？

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:17:26.833

1.  如果您需要一个可变大小的数组，只需使用 an`ArrayList`来插入您的值。代码应该很容易调整以适应这一点。

2.  要从 short 更改为 int，只需将它们全部更改为 int。short 只是一个 2 字节的整数，而不是 4 字节的 int。

# c# - 如何使空的 TextBox 垂直拉伸？

> ID：11456110
> 
> 赞同：3
> 
> 时间：2012-07-12T16:12:33.937
> 
> 标签：c#, wpf

我想制作一个水平排列项目的 ListBox。每个项目都应该是一个文本框，并且无论有多少文本，它都应该垂直填充列表框。如果您使用过 Tweetdeck，我的目标是获得类似的效果。这是我所拥有的：

```
 <ListBox 
        Background ="DarkGray"
        ScrollViewer.HorizontalScrollBarVisibility="Auto" 
        ScrollViewer.VerticalScrollBarVisibility="Disabled"
        ItemsSource="{Binding Path=Items}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <DockPanel IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Border BorderBrush="Gray" BorderThickness="2" CornerRadius="5" Margin="2,0,2,0">
                    <Grid Width="250">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBox 
                            Grid.Row="0"
                            Grid.Column="0"
                            VerticalAlignment="Stretch"
                            Text="{Binding Path=Messages, Mode=OneWay}"  />
                    </Grid>
                </Border>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

发生的情况是 TextBox 顽固地适合其中的文本，而不是垂直拉伸。我尝试将网格切换为 DockPanel，但没有帮助。我可以绑定 TextBox 的 Height 属性，但这似乎令人不快。

我错过了这个技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:17:39.490

您需要`VerticalContentAlignment="Stretch"`在您的 ListBox 上进行设置。

# python - Python 2.5.4 ImportError：没有名为集合的模块

> ID：11456111
> 
> 赞同：3
> 
> 时间：2012-07-12T16:12:40.533
> 
> 标签：python

我对 Python 很陌生，我不明白这里发生了什么。

```
C:\Users\Mike\Desktop>storytext testGui.py
Traceback (most recent call last):
  File "C:\Python25\Scripts\storytext.py", line 19, in <module>
    from storytext.cmdline import main
  File "C:\Python25\lib\site-packages\storytext-3.7-py2.5.egg\storytext\cmdline.py", line 3, in <module>
    import scriptengine, definitions
  File "C:\Python25\lib\site-packages\storytext-3.7-py2.5.egg\storytext\scriptengine.py", line 4, in
 <module>
    import recorder, replayer
  File "C:\Python25\lib\site-packages\storytext-3.7-py2.5.egg\storytext\recorder.py", line 6, in <module>
    from replayer import ReplayScript
  File "C:\Python25\lib\site-packages\storytext-3.7-py2.5.egg\storytext\replayer.py", line 5, in <module>
    from threading import Thread, Timer
  File "C:\Python25\lib\threading.py", line 13, in <module>
    from collections import deque
ImportError: No module named collections 
```

好的，没有模块命名的集合。事实上，当我在我的`python25`文件夹中搜索收藏时，它并不存在。我读过它位于`Modules/_collectionsmodule.c`，我也找不到。

整个事情的关键是我可以从解释器中导入集合，我可以`from threading import Time, Timer`在解释器中。

我在这台机器上确实有 python 2.5 和 2.6，它运行的是 Windows 7。

谁能指出我正确的方向？

# jquery - Zepto 更好的条件负载测试

> ID：11456114
> 
> 赞同：2
> 
> 时间：2012-07-12T16:12:52.910
> 
> 标签：jquery, mobile, zepto

对于不受支持的浏览器使用 Zepto 并回退到 jQuery 是一种将移动设备的 JS 大小减少几 Kbs 的好方法。但是，当前的“推荐”条件负载测试：

```
<script>document.write('<script src=' + ('__proto__' in {} ? 'zepto' : 'jquery') + '.js <\/script>')</script> 
```

是一种非常不可靠的方式来决定是否加载 Zepto 或 jQuery。许多不受支持的浏览器（包括较旧的移动浏览器）将通过此测试，但在运行 Zepto 时会出现问题。

是否有更可靠的方法（最好使用特征检测而不是设备/浏览器嗅探）可以准确覆盖更大比例的浏览器？误报（即加载 jQuery 而不是 Zepto，即使 Zepto 确实可以工作）肯定比误报好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:50:44.837

这是一个棘手的问题。如果我们知道 Zepto 使用的每个特殊功能，白名单才会起作用。`Array.prototype.forEach`您可以为、`document.getElementsByClassName`、等添加嗅探器，`window.JSON`但您必须在代码中搜索您怀疑会导致缺陷或您已经看到导致缺陷的任何内容。一些不受支持的浏览器，如 Opera Mobile 可能会通过，但即使它们不在官方支持的列表中，这些浏览器也可能会实际工作。

最可靠的方法是*尝试*加载 Zepto 和后记检查以查看是否`window.Zepto`存在并查看类似的东西是否`$('#test')`有效。如果没有，请加载 jQuery。当然，这将是疯狂的。

不过，让我向你提出一个问题。如果移动浏览器不支持 Zepto，那么您可能正在寻找一个较旧或不太健壮的浏览器（IE9 除外，这是一种特殊情况）。假设尝试加载像 jQuery 这样的大型复杂库会进一步降低用户体验，难道不是合理的吗？加载时间会很糟糕。如果你在做动画，重绘率将是难以忍受的。

更好的方法是*尽可能*将您的设计基于渐进增强的原则。构建一个无需 JavaScript 即可运行的网站，然后在支持的情况下使用 Zepto 对其进行修饰。如果不可能，请考虑这些浏览器变得越来越不常见，实际上可能只代表一小部分用户。虽然我们使用这些浏览器至少有 2 年的时间，但这比我们使用 IE6 的时间要少得多。

# c# - 当包含它的列调整大小时动态设置文本块大小

> ID：11456118
> 
> 赞同：0
> 
> 时间：2012-07-12T16:13:05.657
> 
> 标签：c#, wpf, xceed-datagrid

我有一个 xceed 网格（不确定这是否重要），其中一列有一个具有 TextBlock 的 CellContentTemplate。我希望它不是自动设置为文本大小的文本块宽度，而是列的大小。我允许调整大小，所以这会使事情变得有点复杂。有没有办法在调整列大小时在后面的代码中动态更改 TextBlock 宽度？

编辑：细胞内容模板

```
 <DataTemplate x:Key="CellTemplate.TaskName">
        <StackPanel Orientation="Horizontal">
            <TextBlock Tag="{Binding Path=DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}">
                   <TextBlock Text="{Binding Path=Name}" >
                       <ui:DragDropBinding.DragSource>
                           <Binding Mode="TwoWay" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type XceedProviders:DataGridControlWithSelectedItems}}" Path="BindableSelectedItems" PresentationTraceSources.TraceLevel="High"/>
                       </ui:DragDropBinding.DragSource>
                   </TextBlock>
               </TextBlock>
        </StackPanel>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:30:03.243

您好，这是因为您将 TextBlock 包含在 StackPanel 中。一种简单的解决方法是使用两个 Run 来绑定两个属性，而不是两个 TextBlock

```
<DataGridTemplateColumn Header="Name" Width="*" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                            <TextBlock Background="Green">
                                <Run Text="{Binding Name}"/>
                                <Run Text="{Binding Rollno}"/>
                            </TextBlock>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

现在文本块将随着列的宽度而扩展。我希望这会有所帮助。

# perl - Perl - 从外部进程直接输出到标准输出（避免缓冲）

> ID：11456121
> 
> 赞同：2
> 
> 时间：2012-07-12T16:13:06.740
> 
> 标签：perl

我有一个 Perl 脚本，它必须包装一个产生大量输出的 PHP 脚本，并且运行大约需要半小时。

目前我正在炮轰：

```
print `$command`; 
```

这在调用 PHP 脚本的意义上是有效的，并且它完成了它的工作，但是，直到 PHP 脚本在半小时后完成，Perl 才会呈现输出。

有没有一种方法可以让 perl 在收到 PHP 的输出后立即打印它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T16:17:05.840

问题是 Perl 在 PHP 脚本终止之前不会完成读取，只有当它完成读取时才会写入。反引号运算符会阻塞，直到子进程退出，并且隐式地进行读/写循环没有什么魔力。

所以你需要写一个。尝试管道打开：

```
open my $fh, '-|', $command or die 'Unable to open';
while (<$fh>) {
    print;
}
close $fh; 
```

这应该在 PHP 脚本写入时读取每一行，并立即输出。如果 PHP 脚本没有在方便的行中输出并且您想使用单个字符来执行此操作，则需要考虑使用`read`从文件句柄中获取数据，并禁用`$| = 1`stdout 上的输出缓冲 ( ) 以进行写入。

另见[http://perldoc.perl.org/perlipc.html#Using-open()-for-IPC](http://perldoc.perl.org/perlipc.html#Using-open()-for-IPC)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:00:17.880

你真的在做`print `$command``吗？

如果您只运行命令而不捕获其任何输出，只需使用`system $command`. 它将直接写入标准输出而不通过 Perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:22:05.113

您可能想要调查[`Capture::Tiny`](http://p3rl.org/Capture%3a%3aTiny). IIRC 像这样的东西应该可以工作：

```
use strict;
use warnings;

use Capture::Tiny qw/tee/;

my ($stdout, $stderr, @result) = tee { system $command }; 
```

实际上，仅使用`system`可能就足够了，YMMV。

# bandwidth - 你将如何进行从服务器 A 到客户端 B 的速度测试。编写一个程序

> ID：11456123
> 
> 赞同：0
> 
> 时间：2012-07-12T16:13:13.780
> 
> 标签：bandwidth

这是我被问到的一个大型设计问题的后续问题。目的是找到并报告网络中两个端点（服务器和客户端）之间的速度测试结果。

# java - JSTL表单相对路径

> ID：11456124
> 
> 赞同：1
> 
> 时间：2012-07-12T16:13:18.397
> 
> 标签：java, struts, jstl, tomcat7

我在服务器上安装了 tomcat，可以在 server.com/app/ 上找到它。这意味着 tomcat 的根应用程序托管在该 url 上。

现在我正在尝试部署新应用程序（old.war），服务器将其部署在 server.com/app/old/ 上。到现在为止还好。

当我在页面上创建一些具有这样定义的表单时，问题就开始了：

```
<html:form name="LoginForm" type="some.form" action="/LoginFormAction" method="post">... 
```

并在输出中收到操作的值“/old/LoginFormAction.do”。这是错误的值，因为它在一开始就错过了“应用程序”。我尝试了不同的动作值，例如

```
<html:form name="LoginForm" type="some.form" action="/app/old/LoginFormAction" method="post">...
<html:form name="LoginForm" type="some.form" action="/app/LoginFormAction" method="post">... 
```

但它仍然在操作的值中添加“/old”前缀。我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:29:12.643

根据[这个问题](https://issues.apache.org/jira/browse/STR-768)， Struts 1 不支持表单的 action 属性中的相对路径。所以没有办法解决。即使有像[这里](https://stackoverflow.com/questions/3103213/can-struts-1-1-post-to-a-relative-path)描述的黑客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:27:37.943

如果 tomcat 的根是 app ，那么它对你不可用，（把它想象成 '/' 映射到 'app/'），你应该使用相对路径，试试

```
`action="LoginFormAction"` and it should work fine. 
```

# jquery - Jquery 包含列表

> ID：11456131
> 
> 赞同：0
> 
> 时间：2012-07-12T16:13:54.827
> 
> 标签：jquery, django

我正在使用 Jquery 来选择包含某个 href 链接的列表中的单个成员。

到目前为止，这是我的代码：

```
<script type="text/javascript" 
 src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    var page = jQuery(location).attr('href'); 
    if(page $= "home"){
        $("'li':contains('index')").addClass("active")};
    if(page $= "features"){
        $("'li':contains('features')").addClass("active")};
    if(page $= "people"){
        $("'li':contains('people')").addClass("active") };
    if(page $= "accounts"){
        $("'li':contains('accounts')").addClass("active")};
    if(page $= "blog"){
        $("'li':contains('blog')").addClass("active")};  
    if(page $= "faq"){
        $("'li':contains('faq')").addClass("active")};                      
});
</script> 
```

HTML 代码如下所示：

```
<ul id="navigation">
  <li><a href="/index" title="Home">Home</a></li>
  <li><a href="/features" title="Features">Features</a></li>
  <li><a href="/people" title="People">People</a></li>
  <li><a href="/accounts" title="account">accounts</a></li>
  <li><a href="/blog" title="Blog">Blog</a></li>
  <li><a href="/faq" title="FAQ">FAQ</a></li>
</ul> 
```

我似乎无法让它工作？我是否正确使用了包含功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:17:43.753

[`:contains`](http://api.jquery.com/contains-selector/)搜索`innerText`元素的。你想要[`:has`](http://api.jquery.com/has-selector/)，它会扫描`innerHTML`。

此外，对于 href 属性，您需要使用[属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/): `[href="index"]`。

```
$("li:has(a[href*='index'])") 
```

这将选择`<li>`包含`<a>`带有 href 的标签的`"index"`.

更新：

```
if(page $= "home") 
```

你实际上不能那样做。如果您想查看一个字符串是否以另一个结尾，请使用正则表达式（或子字符串）。

```
jQuery(location).attr('href'); 
```

为什么要为此使用 jQuery？做吧`location.href`。更好的是，使用`location.pathname`. 然后，您可以丢失`if`块，只需执行以下操作：

```
var page = location.pathname;
$("li:has(a[href*='"+page+"'])").addClass("active"); 
```

（你可能需要做`page.replace('home', 'index')`）

# java - 无法在android中检索Web方法的响应

> ID：11456135
> 
> 赞同：2
> 
> 时间：2012-07-12T16:14:14.830
> 
> 标签：java, android, eclipse, web-services, ksoap2

我正在使用 KSOAP 调用 Web 服务。Web 方法运行良好，它将字符串返回为“无效”或“有效”。我正在尝试传入从文本字段中获取的用户名和密码，并在有效或无效时获得响应。我没有收到任何错误。我已经注释了代码，显示了在 log cat 中打印的内容和没有打印的内容。我从网络方法获取响应的方式有问题。我究竟做错了什么？请帮忙

```
 public class Login extends Activity{

private static final String SOAP_ACTION = "http://tempuri.org/checkLogin";
private static final String OPERATION_NAME = "checkLogin";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";
public static final String PREFS_NAME = "MyPrefsFile";
private static final String PREF_USERNAME = "username";
private static final String PREF_PASSWORD = "password";
Button sqllogin;
EditText sqlusername, sqlpassword;
TextView tvData1;
CheckBox cb;

 @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    sqlusername = (EditText) findViewById(R.id.etuname1);
    sqlpassword = (EditText) findViewById(R.id.etpass);
    tvData1 = (TextView)findViewById(R.id.textView1); 
    sqllogin = (Button) findViewById(R.id.bLogin);
    cb = (CheckBox) findViewById(R.id.cbrememberme);

    sqllogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            switch (v.getId()){
            case R.id.bLogin:
                new LongOperation().execute("");
            break;
          } 
        }
    });
}

 private class LongOperation extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            String username = sqlusername.getText().toString();
            String password = sqlpassword.getText().toString();

            SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
            Request.addProperty("uname", String.valueOf(username));
            Request.addProperty("pwd", String.valueOf(password));

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(Request);
            HttpTransportSE httpTransport  = new HttpTransportSE(SOAP_ADDRESS);
                    Log.d("work","work");//Only this Log message is displayed in log cat

                   try  {                    
                         httpTransport.call(SOAP_ACTION, envelope);                       
                         Object response = envelope.getResponse();
                         String result =  response.toString();
                         Log.d("res",result);//This is not displayed in log cat

                    if(result.equals("valid"))
                        {
                        Log.d("yes","yes");//This is not displayed in log cat
                        return "valid";
                        }
                    else if(result.equals("invalid"))
                        {
                        Log.d("no","no");//This is not displayed in log cat
                        return "invalid";
                        }
                    }
                   catch(Exception e){
                    e.printStackTrace();                           
                    }
                   return null;
        }

 @Override
 protected void onPostExecute(String result) {
    Log.d("tag","onpost");//This is not displayed in log cat
    if(result!=null)
    {
        if(result.equals("valid"))
            {

            tvData1.setText("You have logged in successfully");
            Intent openhomepage = new Intent("com.android.disasterAlertApp.HOME");
            startActivity(openhomepage);
            }
        else if(result.equals("invalid"))
            {
            tvData1.setText("Invalid Username or password");
            }
    }
    else
    {
        Toast.makeText(Login.this, "Somethings wrong", Toast.LENGTH_LONG).show();
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:13:18.467

我发现出了什么问题

代替

```
httpTransport.call(SOAP_ACTION, envelope);                       
                     Object response = envelope.getResponse();
                     String result =  response.toString(); 
```

我应该使用

```
 httptransport.call(SOAP_ACTION, envelope);
        SoapPrimitive resultstring = (SoapPrimitive) soapenvelope
                        .getResponse(); 
```

# java - 导入java项目时的问题

> ID：11456140
> 
> 赞同：0
> 
> 时间：2012-07-12T16:14:42.943
> 
> 标签：java, eclipse

当我尝试将 java 项目导入 Eclipse 时遇到问题。

Eclipse 不构建我的包，他构建了一个目录结构，如

```
com
   Test
       Test2
            Test3
                 -- and then my .java files 
```

如何用我的包导入这个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:24:36.280

我认为您需要在项目中添加一个源文件夹。

# javascript - 为什么 jQuery 的 one 在添加到元素时会立即触发？

> ID：11456142
> 
> 赞同：0
> 
> 时间：2012-07-12T16:14:43.967
> 
> 标签：javascript, jquery, javascript-events

[这是](http://jsfiddle.net/ypKkr/)一个说明问题的小提琴。我在单击一个元素到“html”元素时添加了一个 jQuery one 绑定。我不希望“一个”事件处理程序在下一次单击之前触发，但它会在添加绑定的单击时触发。如果它是添加了“one”事件处理程序的更具体的元素，这似乎不是问题，但是当我使用“html”或“body”作为元素时会发生这种情况，这就是我想要做的。

这对我来说没有意义，我认为第一次点击会为下一次点击添加一个点击，它不会在点击链接时触发。

顺便说一句，我的实际问题可能会以更好的方式解决，但我遇到了这个问题，很好奇为什么它没有按我的预期工作。

* * *

代码：

html:

```
<div id='hello'>hello</div>
<a class="title" href="#">this example</a> is a test​ 
```

js：

```
$(function() {
    $('a.title').click(function() {
        var htmlClickBind = function (e) {
            console.log('clicked on html, e.target = ' + e.target);
            console.log(e.target == '');
            if (!$(e.target).is('a') ) {
                console.log('cleared click event');
            }
            else {
                $('html').one('click', htmlClickBind);
            }
        };

        $('html').one('click', htmlClickBind);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:18:20.610

元素上的`click`事件会`a.target`冒泡到`html`元素，您的（刚刚添加的）处理程序会在其中看到它。

为防止这种情况，`event.stopPropgation`请在您的`a.target` `click`处理程序中使用（或`return false`,`stopPropagation`和`preventDefault`）。

更新代码（见评论）：[Live copy](http://jsfiddle.net/ypKkr/2/)

```
$(function() {
    // Accept the event arg ----v
    $('a.title').click(function(e) {
        // Stop propagation
        e.stopPropagation();
        var htmlClickBind = function (e) {
            console.log('clicked on html, e.target = ' + e.target);
            console.log(e.target == '');
            if (!$(e.target).is('a') ) {
                console.log('cleared click event');
            }
            else {
                $('html').one('click', htmlClickBind);
            }
        };

        $('html').one('click', htmlClickBind);
    });
});​ 
```

# html - 如何在 div 中自动分隔列表元素

> ID：11456143
> 
> 赞同：0
> 
> 时间：2012-07-12T16:14:44.440
> 
> 标签：html, css

我正在开发一个顶部有这些选项卡的网站，我需要在`div`. 原因是它下面的 div 有一个边框，需要与选项卡上的边框对齐。请参阅下面的 jsfiddle 了解我在说什么。我目前将它们全部正确间隔，但是该站点的性质是选项卡中的单词会改变，从而使我的间距不正确。如何自动将它们分隔在我的 div 中，这样我就不必修改所有单独的填充以使它们与下面的 div 对齐？

[http://jsfiddle.net/g7c5X/](http://jsfiddle.net/g7c5X/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:06:04.333

应该能够通过向您的 CSS 添加如下内容来实现它：

```
 #navMenu ul {display:table; width:100%}
    #navMenu li {display:table-cell} 
```

我认为旧版本的 IE 可能会忽略显示类型，不记得是哪个。另一种选择是一些 javascript 来计算边距。

# ios - 如何处理phonegap cordova上的iOS通知回调？

> ID：11456145
> 
> 赞同：3
> 
> 时间：2012-07-12T16:14:53.323
> 
> 标签：ios, cordova, callback, notifications

我不知道标题是否正确，但是..

我有一个使用[PushNotification 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)和 UrbanAirship 的带有推送通知的 cordova 1.9 应用程序。一切正常。

现在，当我从通知中启动/恢复我的应用程序时，我想打开我的应用程序的特定页面。

这可能使用 Javascript 吗？阅读objective-c时我完全迷失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:42:06.300

通知导致难以理解 JSON 结构。

它不是：

```
if(notifications.length > 0){ 
```

但：

```
if(notifications.notifications.length > 0){ 
```

数组打开：`notifications.notifications[]`结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:59:47.937

我不确定您是如何尝试加载页面的，但最简单的方法是调用 javascript 中的待处理通知，然后用于`window.location.href`加载要求页面。

当我在应用程序启动时有待处理的通知时，我正在使用此过程执行某些任务：

```
function registerAirship() {
    console.log("ready to register for airship");
    window.plugins.pushNotification.registerDevice({alert:true, badge:true, sound:true},function(status) {
       if (status.deviceToken) {
           window.token = status.deviceToken;
           if (status) {
               registerUAPush(token, "https://go.urbanairship.com/", key, key1, function(){
                    window.plugins.pushNotification.getPendingNotifications(function(notifications) {
                        if(notifications.length > 0){
                            var note = notifications[0];
                            if(note.applicationLaunchNotification == "1"){
                                // use the note.aps and redirect to required page
                            }
                        }
                    });
               });
           } else {
             alert("Registration Error: " + status);
           }
       }
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:08:44.060

几天前我在你的位置。我认为破解objective-c是最容易的。

所以。

1）我找到了处理我的推送通知（AppDelegate.m）的函数，并在objective-c启动执行以处理通知后调用了一个js函数。在那一行之后，我这样做了：

```
[viewController.webView stringByEvaluatingJavaScriptFromString:@"opensometab()"]; 
```

2) 在我的网络应用程序的根目录中，我将它添加到 pushnotification.js 文件中（你应该可以将它放在任何地方，但我想要它在这里）。** 我的 JS 功能是激活视口中的选项卡，因此您的可能会有所不同。

```
function opensometab(){
    var tabPanel = Ext.Viewport.down('tabpanelname');
    tabPanel.setActiveItem(3); //index number 3 
} 
```

# javascript - 快速访问javascript数组中的分类元素？

> ID：11456149
> 
> 赞同：0
> 
> 时间：2012-07-12T16:15:09.580
> 
> 标签：javascript

假设我有以下 javascript

```
var myobj = {
   name: "Julia",
   birthdate: "xxxx",
   movies: [{title: "movie1", rating: 5, genre: "Horror"}, {title: "movie2", rating 3, genre: "Comedy"},{title: "movie3", rating 3, genre: "Comedy"}, {title: "movie4", rating 3, genre: "Comedy"}, {title: "movie5", rating 3, genre: "Horror"}]
} 
```

我正在寻找检索所有“恐怖”电影（可能是喜剧）的最佳方式，而无需遍历数组中的所有内容。我知道我可以创建一个 for 循环来使用 if 条件遍历电影数组，但这需要我浏览每一部电影。如果有什么办法我可以做到：

```
horrorMovies = [//array containing all horror movies without iterating through everything to iterate through all moves to look at their genre attribute] 
```

或者在 myobj 中有一些附加字段作为某种查找表是一种好的做法：

```
myobj.genreindexes = []; 
```

并跟踪所有类型，例如：genreindexes['Horror'] = '//Array index where element is Horror'？

或者有什么简单的方法可以做：myobj.movi​​es['-insertgenrehere-'] 并获取电影列表？任何建议和样品将不胜感激。

如果没有理想的解决方案，使用任何库的样本也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:34:04.973

分离，

在不遍历所有对象的情况下访问一组具有相同特征的对象的唯一方法是在插入它们时将它们全部放入一个框中。当然，当我说盒子时，我的意思是把它们放在一起的数据结构中。

也就是说，这里有一些不同的场景需要考虑：

1.  您为一大桶项目编写了一个迭代器，并告诉迭代器提取您想要的内容。实际上，您正在迭代所有项目，但它允许您在查询所需内容时变得“懒惰”。这可能不是你想要的。

2.  你真的想用一些共同的财产把它们分开。在这种情况下，您为每个公共属性（哈希表）创建单独的存储桶。

我会推荐选项 2，因为它可以快速访问您想要的内容。

这是一个解释如何在 Javascript 中使用哈希表的链接： [http ://www.mojavelinux.com/articles/javascript_hashes.html](http://www.mojavelinux.com/articles/javascript_hashes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:24:25.307

正如您所提到的，基于流派存储标题索引可能是保证性能改进的最佳方式（或者您可以使用排序存储和二进制搜索等，但我认为这将是一种矫枉过正）。一种干净的方法是添加一个名为`pushMovie(_name, _genre, ...)`Array 原型的函数并将其用于填充您的电影。在里面`pushMovie(..)`你也可以编写代码来填充索引..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:52:20.713

好吧，我认为使用 jLinq 来做你需要的一个可能的好方法。

**库：** [https ://raw.github.com/hugoware/jlinq-beta/master/jlinq.js](https://raw.github.com/hugoware/jlinq-beta/master/jlinq.js)

这是我的代码，但我也给你做了一个 jsfiddle：

**演示：http:** [//jsfiddle.net/oscarj24/anMDt/](http://jsfiddle.net/oscarj24/anMDt/)

```
//Your json obj array
var myobj = {
   name: "Julia",
   birthdate: "xxxx",
   movies: [{title: "movie1", rating: 5, genre: "Horror"}, {title: "movie2", rating: 3, genre: "Comedy"},{title: "movie3", rating: 3, genre: "Comedy"}, {title: "movie4", rating: 3, genre: "Comedy"}, {title: "movie5", rating: 3, genre: "Horror"}]
}

//Just horror movies in object
var horrorMovies = jlinq.from(myobj.movies).starts('genre', 'Horror').select();

// See the console with your horror movies
console.log(horrorMovies); 
```

**结果：**

![在此处输入图像描述](../Images/7367cc4c368146dd5aff1d7bbcfae4a3.png)

希望这可以帮助 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:57:49.410

执行一次线性传递，并为所有字段生成索引。是的，这不是零成本；但话又说回来，没有免费的午餐。

一般而言，

```
function index(array) {
    var fields = {}
    for (var i=0; i<array.length; i++) {
        var o = array[i]
        for (var f in o) {
            if ( ! o.hasOwnProperty(f)) {
               continue;
            } else if (fields[f] === undefined) {
                fields[f] = {};
                fields[f][o[f]] = [o];
            } else if (fields[f][o[f]] === undefined) {
                fields[f][o[f]] = [o];
            } else {
                fields[f][o[f]].push(o);
            }
        }
    }
    return fields;
} 
```

这允许你写

```
var db = index(myobj.movies); // takes O(C), where C = number of rows x cols 
db["genre"]["Comedy"];         // returns an array w/ movies 2, 3, 4 - in O(1)
db["genre"]["Horror"];         // returns an array w/ movies 1, 5
... 
```

经典的空间换时间权衡。另外，[看看它的工作原理（JsFiddle）](http://jsfiddle.net/8gNNf/)

# vba - 在 Excel 中将工作表添加到工作簿末尾（正常方法不起作用？）

> ID：11456157
> 
> 赞同：26
> 
> 时间：2012-07-12T16:15:49.097
> 
> 标签：vba, excel

这是我用来尝试将新工作表添加到工作簿最后一个位置的 VBA 代码

```
mainWB.Sheets.Add(After:=Sheets(Sheets.Count)).Name = new_sheet_name 
```

我在这个网站上的一个类似问题中看到了这一点。它不工作。

我在一个循环中执行此操作，并且每张纸都被添加到图纸中的第二个位置。有 2 张表格永久存在（信息和摘要），然后我再添加 5 个称为“测试”1 到 5 的表格。我总是按以下顺序完成表格：

```
Info, sheet5, sheet4, sheet3, sheet2, sheet1, Summary 
```

但我想要/期待的是：

```
Info, Summary, sheet1, sheet2, sheet3, sheet4, sheet5 
```

（循环确实以预期的顺序产生它们，所以问题不存在。）

如果我在开始之前交换摘要和信息表，那么当我完成时它们会在相反的位置。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-12T16:17:25.890

试试这个

```
mainWB.Sheets.Add(After:=mainWB.Sheets(mainWB.Sheets.Count)).Name = new_sheet_name 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T16:18:37.277

```
mainWB.Sheets.Add(After:=Sheets(Sheets.Count)).Name = new_sheet_name 
```

应该是

```
mainWB.Sheets.Add(After:=mainWB.Sheets(mainWB.Sheets.Count)).Name = new_sheet_name 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-15T21:11:25.217

一个常见的错误是

```
mainWB.Sheets.Add(After:=Sheets.Count) 
```

这导致错误1004。虽然从官方文档中根本不清楚，但事实证明'After'参数不能是整数，它必须是对同一工作簿中工作表的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:20:28.787

确保完全限定您的工作表与他们引用的工作簿！

```
 mainWB.Sheets.Add(After:=mainWB.Sheets(mainWB.Sheets.Count)).Name = new_sheet_name 
```

# c++ - LNK 2005 链接错误的函数，但不是 Visual Studio 2010 中的类

> ID：11456159
> 
> 赞同：1
> 
> 时间：2012-07-12T16:15:58.923
> 
> 标签：c++, visual-c++

我现在正在构建一个 C++ DLL 库。今天我遇到了一个令人困惑的问题：在这个库中我可以定义类但不能定义函数。更具体地说，我给出以下代码来说明我的问题：

```
namespace fundamental
{

    class Tree
    {
    public:
        Tree() {};
        ~Tree() {};
        int x;
    };

     /*int anyfunction()
    {
        return 1;
    }*/

} 
```

上面的定义在头文件中，这个文件会被其他文件调用。我的问题是，如果我注释了函数部分（int anyfunction()）一切都很好，但是如果我添加了这个函数，我会得到以下错误：

```
page_analysis.obj : error LNK2005: "int __cdecl fundamental::anyfunction(void)" (?anyfunction@fundamental@@YAHXZ) already defined in geo_box.obj
1>pa_region_properties.obj : error LNK2005: "int __cdecl fundamental::anyfunction(void)" (?anyfunction@fundamental@@YAHXZ) already defined in geo_box.obj 
```

我的问题是为什么我只会为函数而不是类得到 LNK2005 错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:30:06.520

如果您在头文件中定义某些内容，则该定义将在包含该头文件的任何翻译单元（粗略地说，每个源文件）中重复。有时，多个定义是错误的。

类可以在多个翻译单元中定义，只要定义相同即可；事实上，它们必须在任何使用它们的翻译单元中定义。

函数通常不能，但您可以通过声明它来允许它`inline`：

```
inline int anyfunction() {return 1;} 
```

或者您可以将定义移动到单个源文件中，并且只在标题中声明它：

```
// header
namespace fundamental {
    int anyfunction();
}

// source file
int fundamental::anyfunction() {return 1;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:22:43.277

您很可能已通过标头将该功能包含到不同的翻译单元（又名 cpp 文件）中。如果您确实需要内联该函数，请使用“内联”：

```
inline int anyfunction()
{
    return 1;
} 
```

HTH 托斯滕

# c++ - 如何通过析构方法删除对象（类）

> ID：11456161
> 
> 赞同：7
> 
> 时间：2012-07-12T16:16:11.177
> 
> 标签：c++, class, destructor

我想知道是否可以通过析构函数方法删除对象？

我的班级的构造函数和析构函数：

```
class cal
{
    public:
        cal()
        {
            days = 0;
            day = 1;
            month = 1;
            year = 1300;
            leap = true;
        };
        ~cal()
        {
            delete this;
        }
}*calendar = new cal; 
```

如何通过类删除此指针？

**附言**

我忘了写下面的代码

```
cal *calandar = new cal[]; 
```

我想在堆而不是堆栈中使用它

我想经常使用这个类（对象）（很多那个对象）想象我应该写多少次 delete 并且它很难理解，故障排除和跟踪代码我希望它们被自动销毁（在堆中）

当我执行“删除 [] 日历”时，我在课堂上使用了以下代码，它减少了我占用的内存（使用的内存量）它是否通过退出程序正常工作（销毁所有对象）？因为我使用 GNU/Linus，它会破坏所有有或没有这些行的对象，我担心在 Windows 中泄漏

```
void DisposeObject() { delete this; } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T16:20:54.027

不。在调用析构函数时，对象已经被销毁，因此`delete this`无效。

该行为是未定义的，但很可能它会递归调用析构函数，从而导致堆栈溢出。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T16:21:31.357

你可以这样写代码：

```
class cal
{
    public:
        cal()
        {
        };
        ~cal()
        {
        }
        void DisposeObject()
        {
           delete this;
        }
} 
```

它会调用你的析构函数。

你不应该`delete this`从你的析构函数调用，因为它会递归调用析构函数，可能导致堆栈溢出。无论如何，您编写的代码存在**未定义行为**。

请参阅此问题进行深入讨论：[是否允许删除？](https://stackoverflow.com/questions/3150942/c-delete-this)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T16:20:22.983

> 我想知道是否可以通过析构函数方法删除对象

即使假设这是有效的 - 问题是没有任何东西会*调用*析构函数，所以这永远不会产生影响。当调用代码删除对象时调用析构函数，这反过来又可以根据需要删除任何内部对象。

在您的情况下，您似乎不需要在析构函数中执行任何操作，但是，因为您没有分配任何需要显式删除的资源（至少在您显示的内容中）。

# python - Python循环超时

> ID：11456163
> 
> 赞同：1
> 
> 时间：2012-07-12T16:16:14.157
> 
> 标签：python, timeout

我有一个看起来像这样的 Python 脚本：

```
for x in range(1000,40000):
    try:
       some_function(x)
       some_other_function(x)
    except Exception, e:
       print e
       pass 
```

我知道这不是处理此类错误的好习惯，但这是一个我只会使用一次的脚本。无论如何，我注意到循环有时会卡在一个特定的 id (x) 上并冻结几个小时。

所以我的问题是：我将如何在循环中实现超时功能，以便如果它需要超过 20 秒然后跳到下一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:25:00.813

您可以将其定义为 TimeoutException

```
except TimeoutException, e:
print e
pass 
```

如果您希望它只运行 20 秒，我建议您查找在 python 中创建信号处理程序。这是一个示例和指向它的 python 文档的链接。 [https://docs.python.org/library/signal.html](https://docs.python.org/library/signal.html)

[https://web.archive.org/web/20130511171949/http://pguides.net/python-tutorial/python-timeout-a-function/](https://web.archive.org/web/20130511171949/http://pguides.net/python-tutorial/python-timeout-a-function/)

由于您使用的是 Windows，因此您可能想查看这个较旧的线程 [python: windows 等价于 SIGALRM](https://stackoverflow.com/questions/8420422/python-windows-equivalent-of-sigalrm)

# ios - 添加 UIImageView 作为子视图

> ID：11456164
> 
> 赞同：0
> 
> 时间：2012-07-12T16:16:15.230
> 
> 标签：ios, imageview, subview

我正在尝试创建具有某些图像约束的动画 UIImageView。

我希望 UIImageView 的动画尺寸为 141x262，而不是整个屏幕。目前我有这个代码：

```
CJ = [[UIImageView alloc] initWithFrame:self.view.frame];

CJ.animationImages = [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"CJ_1.png"],
                                [UIImage imageNamed:@"CJ_2.png"],
                                [UIImage imageNamed:@"CJ_3.png"], nil];

CJ.animationDuration = 1;
CJ.animationRepeatCount = 0;
[CJ startAnimating];
[self.view addSubview:CJ]; 
```

任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:19:53.027

如果您希望视图具有不同的大小，请将其框架设置为该大小：

```
CJ = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 141, 162)]; 
```

如果您的图像很大，您可能还想在视图上设置 contentMode。例如：

```
CJ.contentMode = UIViewContentModeScaleAspectFit; 
```

# javascript - 如何使用 javascript 访问查询字符串？

> ID：11456165
> 
> 赞同：0
> 
> 时间：2012-07-12T16:16:16.230
> 
> 标签：javascript, html

我有一个看起来像这样的查询字符串，`page3.html?redesigndata=value`如果它从**page1.html**重定向或从**page2.html**`page3.html?new=yes`重定向时出现。这是我用来找出查询字符串是什么并在**page3.html上执行一些功能的代码**`no`

 ****```
var locurl = window.location.search;
if (locurl.substring(0, 13) === '?redesigndata') {
  alert("redesign!");
} else if (locurl.substring(0, 4) === '?new') {
  visit = locurl.substring(5);
  alert("somthing!");
  if (visit === 'yes') {
     alert("first!");
  } else if (visit === 'no') {
    alert("again!");
  }
} 
```

但是当我尝试这个脚本时没有收到任何警报，我无法找出它有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:22:10.617

尝试使用此功能

```
function getQueryString() {
  var result = {}, queryString = location.search.substring(1),
      re = /([^&=]+)=([^&]*)/g, m;

  while (m = re.exec(queryString)) {
    result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
  }

  return result;
}

// ...
var myParam = getQueryString()["myParam"]; 
```

像这样检查

```
if(getQueryString()["redesigndata"] != "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:19:45.447

您发布的代码没有任何问题。如果警报从未触发，那是因为条件从未满足。一旦将查询字符串添加到与您在代码中列出的其中一个匹配的 URL，就会触发警报。

另外，请注意您正在（看似）创建全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:23:29.930

该脚本适用于我的盒子。请将此脚本放在脚本标签中****

# python - python中的双重不等式（>>）符号是什么？

> ID：11456170
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:16:56.090
> 
> 标签：python

> **可能重复：**
> [Python - '>>' 运算符](https://stackoverflow.com/questions/3411749/python-operator)

有一些代码可以做到这一点：

```
x = n - 1 >> 1 
```

我不知道是否必须提供更多语法，但是 >> 是什么意思？我一直在寻找，但找不到任何解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:18:32.140

它是一个右移逻辑，它是一个按位运算，告诉数字按该量移位。在这种情况下，您将移动 1，这相当于除以 2。

如果您不了解按位运算，那么您要记住的简单转换就是这样。

x >> n

相当于

x // (2**n)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:18:49.220

它是[按位右移运算符](http://docs.python.org/library/stdtypes.html#bitwise-operations-on-integer-types)。

它将整数参数的位向右移动表达式右侧的数字：

```
>>> 8 >> 2
2 
```

或以二进制说明：

```
>>> bin(0b1000 >> 2)
'0b10' 
```

您的代码示例实际上是双重混淆，因为它混合了算术和按位运算。它应该使用['//' 整数除法运算](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)来代替：

```
x = (n - 1) // 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:27:18.130

```
x >> y 
```

相当于

```
x.__rshift__(y) 
```

正如其他人所说，这意味着位移。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:30:09.547

>> 是按位右移运算符。此运算符将第一个操作数中的所有位向右移动第二个操作数。

所以：a >> b = a // 2**b

例子：

*   36 二进制是 0b100100
*   36 >> 1 是 0b10010 （最后一个二进制数字或“位”被删除），即 18
*   36 >> 2 是 0b1001（删除 2 位），即 9

请注意，运算符在添加之后进行。因此代码首先执行 n-1，然后将其右移 1 位（即除以 2）。

# windows-xp - 如何让本地主机在并行桌面上的 xp 上工作

> ID：11456172
> 
> 赞同：4
> 
> 时间：2012-07-12T16:17:02.443
> 
> 标签：windows-xp, osx-lion, parallels

我在我的 macbook（lion os）上使用并行桌面，我想让 xampp/localhost 在我安装的 XP 版本上工作，这样我就可以在 Internet Explorer 中测试我的网站。

显然我不想在我的并行桌面上安装两个不同版本的 xampp，因为这意味着复制 sql 数据库等。

有人知道怎么做吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T18:14:48.157

经过进一步研究，我发现如果您进入终端并输入命令“ifconfig”并查找“vnic1”部分，这是要打印的最后一个部分，它有一个名为“inet”的 IP 地址，例如“10.37\. 129.2" 这将直接将您带到本地主机。

如果它不起作用，您必须确保您的并行设置为首选项网络部分下的共享网络。希望这可以帮助其他遇到困难的人。

# syntax - F# - 什么匹配...与 | :? X as x 是什么意思？

> ID：11456175
> 
> 赞同：6
> 
> 时间：2012-07-12T16:17:06.057
> 
> 标签：syntax, f#

超级简单的问题我敢肯定，但我通常不做 F#，所以对语法有点陌生。

如何阅读以下代码片段：

```
 match shape.Fill with
          | :? PictureBrush as pb ->
              //.... 
```

具体来说，我不确定`PictureBrush`指的是什么。在这个文件的其他任何地方都没有真正提到它

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T16:19:34.367

这是[类型测试模式](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/pattern-matching#type-test-pattern)。

`PictureBrush`是一种类型。当属性可分配给该类型时`shape.Fill`匹配。`:? PictureBrush``Fill`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T23:45:45.273

另请注意，`as`允许将变量绑定为该类型。所以`pb`将是 type ，但将具有与解析到`PictureBrush`的完全相同的值。`shape.Fill`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:20:41.640

它的类型比较。就像 C# 中的 typeof(xx) 一样。所以要匹配画笔的类型。

# python - 我可以在 python 中集成多个列表吗？

> ID：11456186
> 
> 赞同：2
> 
> 时间：2012-07-12T16:17:45.990
> 
> 标签：python, list

> **可能重复：**
> [如何在 Python 中并行遍历两个列表？](https://stackoverflow.com/questions/1663807/how-can-i-iterate-through-two-lists-in-parallel-in-python)

我有 3 个这样的列表：

```
name = ['sam', 'john', 'napoleon', 'tanaka', 'ming']
country = ['USA', 'England', 'France', 'Japan', 'China']
age = [23, 41, 19, 16, 55] 
```

我想要一个像这样的输出：

```
sam; USA; 23
john; England; 41
napoleon; France; 19
tanaka; Japan; 16
ming; China; 55 
```

任何帮助都会很棒。提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T16:21:22.267

你可以使用`zip()`：

```
name = ['sam', 'john', 'napoleon', 'tanaka', 'ming']
country = ['USA', 'England', 'France', 'Japan', 'China']
age = [23, 41, 19, 16, 55]
for x,y,z in zip(name,country,age):
    print("{0}; {1}; {2}".format(x,y,z)) 
```

或使用`map()`：

```
mapp=map(lambda x,y,z:"; ".join((x,y,str(z))),name,country,age)
for x in mapp:
    print(x) 
```

**输出：**

```
sam; USA; 23
john; England; 41
napoleon; France; 19
tanaka; Japan; 16
ming; China; 55 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:25:08.580

```
name = "sam john napoleon tanaka ming".split()
country = "USA England France Japan China".split()
age = [23, 41, 19, 16, 55]

print "\n".join(["%s; %s %d" % (x) for x in zip(name,country,age)]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:24:37.217

假设列表长度相同：

```
for i in range(len(name)):
    print '%s; %s; %s' %(name[i], country[i], age[i]) 
```

更新：这假设您使用的是 Python 3.x。对于 2.x，使用 xrange 进行一般性能改进。或者：

```
for i in range(len(name)):
    print '{0}; {1}; {2}'.format{name[i], country[i], age[i]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:27:11.780

如果你知道它们都有相同的长度，那么你可以这样做：

```
name = ['sam', 'john', 'napoleon', 'tanaka', 'ming']
country = ['USA', 'England', 'France', 'Japan', 'China']
age = [23, 41, 19, 16, 55]

i = 0

for n in name:
    print name[i] + '; ' + country[i] + '; ' + str(age[i])
    i++ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:30:41.853

我的 2 美分 ;-)

使用来自 itertools 模块的生成器：

```
from itertools import izip

nlist = ['%s; %s; %s' %t for t in izip(name, country, age)] 
```

# java - 检查设备/清单时的 GCM NoClassDefFoundError

> ID：11456190
> 
> 赞同：0
> 
> 时间：2012-07-12T16:18:00.417
> 
> 标签：java, android, google-cloud-messaging

我正在尝试将 Google Cloud Messaging 集成到我的应用程序中。我的 onCreate 方法中有以下代码。

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    if (GCMRegistrar.getRegistrationId(this).equals(""))
        GCMRegistrar.register(this, "xxxxxxxxxxxx"); 
```

我已正确导入 GCMRegistarar，已将 GCM.jar 添加到构建路径并设置了清单。我正在安装到 2.2 机器人 1 上。每当应用程序启动时，我都会遇到以下崩溃。

![在此处输入图像描述](../Images/3259e28854df905904e3e9e7c635a9b7.png)

我的清单如下

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.my.project"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<permission
    android:name="com.my.project.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.my.project.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.my.project" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />

    <activity
        android:name=".Index"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:05:40.110

我最终将 gcm.jar 复制到 libs 文件夹中，然后将该 gcm.jar 引用到我的构建路径中。它现在正在工作。

# sql-server - 经典 ASP/SQL Server 站点间歇性连接

> ID：11456196
> 
> 赞同：0
> 
> 时间：2012-07-12T16:18:15.823
> 
> 标签：sql-server, asp-classic, connection

我们有一个 Windows 2003 服务器，我们最近开始升级一些非常古老的经典 ASP 站点，这些站点使用 MS 访问现在使用 SQL Server 2005。但是这些站点正在随机 SQL Server 超时，这导致所有经典的 ASP / SQL服务器站点要关闭。

虽然这些站点已关闭，但这些站点的关联 CMS（内置在 ASP.NET 中，但连接到同一个 SQL Server 数据库）很好。同一台服务器上的经典 ASP / MS Access 站点也很好，并且可以访问该站点。

似乎使这些站点重新联机的唯一方法是重新启动 IIS 或重新启动各个应用程序池。

windows日志中没有任何内容，

有什么想法可能导致这种情况吗？

更多信息...

这些站点没有移动服务器，我们只是将数据库从 MS Access 更改为 SQL Server ...

我们像这样连接到 SQL Server 数据库...

```
connStr = "Provider=SQLOLEDB.1;Password=xxxx;Persist Security Info=True;User ID=hallgarthmanorUser;Initial Catalog=xxxx;Data Source=xxxx" 
```

那么大多数代码都是这样的......

```
Set dbMain = Server.CreateObject("ADODB.Connection")
dbMain.Open connStr
Set rsPage = Server.CreateObject("ADODB.Recordset")
rsPage.Open "SELECT * FROM Pages WHERE PageID = " & PageID,dbMain,0,1
....
rsPage.close
set rsPage= nothing 
```

谢谢kb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:34:23.417

旧网站的代码可能没有自行清理，例如：[https ://stackoverflow.com/a/11288637/297808](https://stackoverflow.com/a/11288637/297808)

这在移动服务器之前有效吗？

您是否使用 ODBC 数据源来连接经典 ASP 站点到 MS Access DB？

如果是这样，属性是否与旧服务器相同？

确保您的服务器上有最新的“Jet”服务包：http: [//support.microsoft.com/kb/239114](http://support.microsoft.com/kb/239114)

有几件事要尝试...

# android - 写/系统权限

> ID：11456197
> 
> 赞同：0
> 
> 时间：2012-07-12T16:18:17.877
> 
> 标签：android, permissions, system-setting

我正在编写一个需要编写 /system 的应用程序。我一直在通过busybox（使用命令）进行操作，但现在我正在使用固件密钥进行构建，因此我可以访问所有系统权限（通过android:sharedUserId="android.uid.system"）

我已经成功添加了像这样的权限

```
 <uses-permission android:name="android.permission.FORCE_STOP_PACKAGES"/>
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

但我似乎无法在 SDK 上找到，甚至在 AndroidManifest.xml 上都找不到 frameworks/base/core/res，这是一个允许这样做的权限。我在 SDK 15 上，从源代码构建 Android 4.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:19:35.847

似乎SDK上没有为此定义权限，框架上也没有。我发现最好的方法是使用 Settings.System 与提供者一起存储值

# regex - 如何从 Linux 'find' 命令的输出中排除与某些模式匹配的目录？

> ID：11456200
> 
> 赞同：4
> 
> 时间：2012-07-12T16:18:26.317
> 
> 标签：regex, linux, bash, grep

我想将正则表达式与 Linux 的`find`命令一起使用，以递归地进入一个庞大的目录树，向我显示所有 .c、.cpp 和 .h 文件，但忽略包含某些子字符串的匹配项。最终，我想将输出发送到一个`xargs`命令，以便对所有匹配的文件进行某些处理。我可以`find`通过 grep 管道输出以删除包含这些子字符串的匹配项，但该解决方案不适用于包含空格的文件名。所以我尝试使用`find`'s -print0 选项，它以 nul 字符而不是换行符（空格）来终止每个文件名，并使用`xargs -0`期望以 nul 分隔的输入而不是以空格分隔的输入，但我不知道如何通过 nul 分隔`find`成功通过管道 grep 过滤器；grep -Z 在这方面似乎没有帮助。

所以我想我会写一个更好的正则表达式`find`并取消中间`grep`过滤器......也许`sed`会是一个替代方案？

无论如何，对于以下目录的小样本...

```
./barney/generated/bam bam.h
./barney/src/bam bam.cpp
./barney/deploy/bam bam.h
./barney/inc/bam bam.h
./fred/generated/dino.h
./fred/src/dino.cpp
./fred/deploy/dino.h
./fred/inc/dino.h 
```

...我希望输出包括所有 .h、.c 和 .cpp 文件，但不包括那些出现在“生成”和“部署”目录中的文件。

顺便说一句，您可以创建一个完整的测试目录（名为 fredbarney），通过将整行剪切并粘贴到您的 bash shell 中来测试该问题的解决方案：

```
mkdir fredbarney; cd fredbarney; mkdir fred; cd fred; mkdir inc; mkdir docs; mkdir generated; mkdir deploy; mkdir src; echo x > inc/dino.h; echo x > docs/info.docx; echo x > generated/dino.h; echo x > deploy/dino.h; echo x > src/dino.cpp; cd ..; mkdir barney; cd barney; mkdir inc; mkdir docs; mkdir generated; mkdir deploy; mkdir src; echo x > 'inc/bam bam.h'; echo x > 'docs/info info.docx'; echo x > 'generated/bam bam.h'; echo x > 'deploy/bam bam.h'; echo x > 'src/bam bam.cpp'; cd ..; 
```

此命令查找所有 .h、.c 和 .cpp 文件...

```
find . -regextype posix-egrep -regex ".+\.(c|cpp|h)$" 
```

...但是如果我通过 xargs 管道输出其输出，则每个“bam bam”文件都会被视为两个单独的（不存在的）文件名（请注意，这里我只是`ls`用作我实际想要做的事情的替身输出）：

```
$ find . -regextype posix-egrep -regex ".+\.(c|cpp|h)$" | xargs -n 1 ls
ls: ./barney/generated/bam: No such file or directory
ls: bam.h: No such file or directory
ls: ./barney/src/bam: No such file or directory
ls: bam.cpp: No such file or directory
ls: ./barney/deploy/bam: No such file or directory
ls: bam.h: No such file or directory
ls: ./barney/inc/bam: No such file or directory
ls: bam.h: No such file or directory
./fred/generated/dino.h
./fred/src/dino.cpp
./fred/deploy/dino.h
./fred/inc/dino.h 
```

所以我可以使用 -print0 和 -0 参数来增强它`find`和`xargs`：

```
$ find . -regextype posix-egrep -regex ".+\.(c|cpp|h)$" -print0 | xargs -0 -n 1 ls
./barney/generated/bam bam.h
./barney/src/bam bam.cpp
./barney/deploy/bam bam.h
./barney/inc/bam bam.h
./fred/generated/dino.h
./fred/src/dino.cpp
./fred/deploy/dino.h
./fred/inc/dino.h 
```

...这很好，除了我不希望输出中出现“生成”和“部署”目录。所以我试试这个：

```
$ find . -regextype posix-egrep -regex ".+\.(c|cpp|h)$" -print0 | grep -v generated | grep -v deploy | xargs -0 -n 1 ls
barney  fred 
```

...这显然不起作用。所以我尝试将 -Z 选项与 grep 一起使用（不确切知道 -Z 选项的真正作用），但这也不起作用。所以我想我会写一个更好的正则表达式`find`，这是我能想到的最好的：

```
find . -regextype posix-egrep -regex "(?!.*(generated|deploy).*$)(.+\.(c|cpp|h)$)" -print0 | xargs -0 -n 1 ls 
```

...但是 bash 不喜欢那样（！。*：未找到事件，无论这意味着什么），即使这不是问题，我的正则表达式似乎也不能在我通常的正则表达式测试器网页上工作采用。

有什么想法可以让我完成这项工作吗？这是我想要的输出：

```
$ find . [----options here----] | [----maybe grep or sed----] | xargs -0 -n 1 ls
./barney/src/bam bam.cpp
./barney/inc/bam bam.h
./fred/src/dino.cpp
./fred/inc/dino.h 
```

...而且我想避免使用脚本和临时文件，我想这可能是我唯一的选择。

提前致谢！-标记

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T16:34:48.567

这对我有用：

```
find . -regextype posix-egrep -regex '.+\.(c|cpp|h)$' -not -path '*/generated/*' \
       -not -path '*/deploy/*' -print0 | xargs -0 ls -L1d 
```

您的版本的更改很小：我分别添加了某些路径模式的排除项，因为这更容易，并且我单引号将它们隐藏在 shell 插值中。

未找到事件是因为`!`被 解释为历史扩展请求`bash`。解决方法是使用单引号而不是双引号。

小测验：单引号中的字符串中有哪些特殊字符`sh`？

答案：***唯一*** `'`是特殊的（它结束字符串）。这才是终极安全。

`grep`with `-Z`（有时称为`--null`）使`grep` **输出**以空字符而不是换行符终止。您想要的是`-z`（有时称为`--null-data`），这会导致将其**输入**`grep`中的空字符解释为行尾而不是换行符。这使它与 的输出按预期工作，它在每个文件名后添加一个空字符而不是换行符。**`find ... -print0`**

 **如果你这样做了：

```
find . -regextype posix-egrep -regex '.+\.(c|cpp|h)$' -print0 | \
    grep -vzZ generated | grep -vzZ deploy | xargs -0 ls -1Ld 
```

然后，输入*和*输出`grep`将以空值分隔，并且可以正常工作……直到您的源文件之一开始被命名`deployment.cpp`并开始被脚本“神秘地”排除。

顺便说一句，这是生成测试用例文件集的更好方法。

```
while read -r file ; do
    mkdir -p "${file%/*}"
    touch "$file"
done <<'DATA'
./barney/generated/bam bam.h
./barney/src/bam bam.cpp
./barney/deploy/bam bam.h
./barney/inc/bam bam.h
./fred/generated/dino.h
./fred/src/dino.cpp
./fred/deploy/dino.h
./fred/inc/dino.h
DATA 
```

因为无论如何我都这样做是为了验证我想我会分享它并让你免于重复。什么都不要做两次！这就是计算机的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T17:29:13.697

你的命令：

```
find . -regextype posix-egrep -regex "(?!.*(generated|deploy).*$)(.+\.(c|cpp|h)$)" -print0 | xargs -0 -n 1 ls 
```

失败，因为您尝试使用`Posix extended regular expressions`不支持环视/后视等[https://superuser.com/a/596499/658319](https://superuser.com/a/596499/658319)

`find`确实支持`pcre`，所以如果你转换为`pcre`，这应该可以工作。**

# mysql - SQL：仅查询在与之关联的第二个表中有两行的结果

> ID：11456202
> 
> 赞同：2
> 
> 时间：2012-07-12T16:18:30.513
> 
> 标签：mysql, sql

我对 SQL 比较陌生，所以以下可能是一个简单的问题。我一直在尝试编写一个查询，它只返回具有两种特定类型的地址与之关联的名称。有一个名字表和一个地址表。它位于 MYSQL 服务器中。

```
 customer
| id |  name       |
|  1 | john smith  |
|  2 | bob vance   |
|  3 | jane doe    |
|  4 | doug smith  |

                           address
| id |    type   |      street      |   state   |  name_id  |
|  1 |    home   | 123 main street  |     NJ    |     3     |
|  2 |  business | 100 south lane   |     NY    |     3     |
|  3 |    home   | 75 boardwalk way |     CT    |     1     |
|  4 |    home   |  3 cherry lane   |     NY    |     2     |
|  5 |    home   |   15 south way   |     NY    |     4     |
|  6 |  business |   90 west end    |     NY    |     4     | 
```

我想返回既有家庭地址又有公司地址的姓名，如下面的结果所示。

```
| name     |  type        |    street       |   state   |
| jane doe |    home      | 123 main street |     NJ    |
| jane doe |   business   | 100 south lane  |     NY    |
|doug smith|   home       |  15 south way   |     NY    |
|doug smith|  business    |  90 west end    |     NY    | 
```

我可以将表格连接在一起，但是我很难以这种方式过滤。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:21:32.977

```
SELECT ...
FROM ...
WHERE name_id IN (SELECT name_id
                  FROM address
                  WHERE type IN ('home', 'business')
                  GROUP BY name_id
                  HAVING COUNT(DISTINCT(type)) = 2) 
```

[http://sqlfiddle.com/#!2/be63a/1](http://sqlfiddle.com/#!2/be63a/1)

# tridion - 是否可以在工作流程过程中更新组件？

> ID：11456204
> 
> 赞同：1
> 
> 时间：2012-07-12T16:18:32.267
> 
> 标签：tridion, tridion-2011

我想在组件处于使用核心服务的工作流程过程中更新组件的元数据。那可能吗？

我了解当该项目处于工作流程中时，该项目被锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:25:12.450

当项目在工作流中时，该活动可以由该活动所属的组的成员启动。然后只有项目被分配到的用户才能更新内容。这意味着如果您的代码以启动活动的用户身份运行，您可以从代码中更新项目。

* * *

**编辑**以反映 Nuno 关于只有指定用户才能更新内容的评论。

# ruby - pack 和 unpack 在与 utf8 之间转换时如何猜测字符编码？

> ID：11456213
> 
> 赞同：1
> 
> 时间：2012-07-12T16:19:03.517
> 
> 标签：ruby, utf-8, character-encoding, pack, ruby-1.8.7

假设我想转换`"\xBD"`为 UTF-8。

如果我使用`pack`& `unpack`，我会得到`½`：

```
puts "\xBD".unpack('C*').pack('U*')    #=> ½ 
```

与ISO-8859-1 中的`"\xBD"`一样。`½`

但是`"\xBD"`在`œ`ISO-8859-9 中。

我的问题是：为什么`pack`使用 ISO-8859-1 而不是 ISO-8859-9 将 char 转换为 UTF-8？有没有办法配置那个字符编码？

我知道我可以`Iconv`在 Ruby 1.8.7 和`String#encode`1.9.2 中使用，但我很好奇，`pack`因为我在某些代码中使用了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:54:19.190

`\xBD`这实际上与ISO-8859-x 中的表示方式无关。关键部分是`pack`转入 UTF-8。

`pack`收到`[189]`。_ 代码点 189 在 UTF-8（更准确地说，Unicode）中定义为`½`. 不要认为这是 Unicode 规范编写者“优先” ISO-8859-1 而不是 ISO-8859-9。他们必须选择代表什么代码点`½`，他们只选择了 189。

由于您想了解更多关于`pack`/的信息`unpack`，让我解释一下：

当您`unpack`使用该`C`指令时，ruby 将字符串解释为 ascii-8bit，并提取 ascii 代码。在这种情况下`\xBD`转换为`0xBD`aka `189`。这是一个非常基本的转换。

当您`pack`使用该`U`指令时，ruby 将在其 UTF-8 转换表中查找，以查看哪些代码点映射到数组中的每个整数。

`pack`/`unpack`具有非常具体的行为，具体取决于您提供的指令。我建议阅读 ruby​​-doc.org。有些指令对我来说仍然没有意义，所以不要气馁。

# java - Java HttpSession 对象的生命周期是什么？

> ID：11456214
> 
> 赞同：6
> 
> 时间：2012-07-12T16:19:25.837
> 
> 标签：java, garbage-collection

显然，在某些时候，一个对象被创建并销毁/返回到池中。我对这些垃圾是如何收集的特别感兴趣。有没有办法控制这种行为？具体来说，是否会调用来`invalidate()`标记这些对象以供收集？他们何时释放存储在其中的任何引用？

越详细越好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T16:48:30.067

[`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)基本上是从字符串键到某个任意值的映射。每次创建会话时（通过访问 JSP 或调用`getSession()`/ `getSession(true)`），容器将生成唯一的字符串会话 ID 并保存对该`HttpSession`对象的引用。同样，它将使用从会话 ID 到`HttpSession`对象的映射。

一旦你在会话中放了一些东西，容器就会持有对该会话的引用，而会话会持有对你的对象的引用。它会在那里停留一段时间。您的项目将从会话中删除的三种情况：

1.  当您明确删除它时（`removeAttribute()`或`setAttribute(null)`）

2.  当你`invalidate()`整个会话。这基本上删除了所有属性并从容器管理的会话映射中删除了整个会话

3.  当会话过期时（与 2 的行为相同。）当在可配置的时间量（例如 10 分钟）内没有 servlet/JSP 访问会话时会发生这种情况

当一个对象从会话中移除（上述任何一点）并且没有其他代码持有对该对象的引用时，它就有资格进行垃圾回收，并将在下一次 GC 运行期间被移除。

* * *

您可以将实现*HttpSessionBindingListener*的对象添加到*HttpSession*以观察上述某些行为。例如，实现此接口的对象可以在与会话解除绑定时打印日志消息。

您可以在此处查看[文档](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpSessionBindingListener.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:25:22.903

我认为这取决于您使用的容器，实施问题。

# groovy - 在 groovy 中拦截 LOCAL 属性访问

> ID：11456215
> 
> 赞同：1
> 
> 时间：2012-07-12T16:19:25.917
> 
> 标签：groovy

我在尝试在 Groovy 中使用属性访问时遇到了问题。参加以下课程：

```
class Foo {
  Map m = [:]
  String bar

  void getProperty(String name) {
    m.get name
  }

  def setProperty(String name, value) {
    m.set name, value
  }

  String getBarString() {
    return bar // local access, does not go through getProperty()
  }
} 
```

它覆盖了 getter 和 setter 以简单地将值放入 M​​ap 而不是放入对象的普通属性空间。抽象地说，这有点傻，但是想象一下，我们没有将数据放入映射中，而是将其持久化到数据库或其他有用的东西中。

不幸的是，下面的代码现在不起作用：

```
foo = new Foo()
foo.bar = "blerg" // using foo.bar invokes the setProperty interceptor
assert foo.bar == "blerg" // this will work fine as foo.bar here uses the getProperty interceptor
assert foo.getBarString() == "blerg" // explosion and fire!  getBarString accesses bar locally without going through the getProperty interceptor so null will actually be returned. 
```

当然有解决方法，setProperty 可以同时设置 MetaProperty 和 Map 值等。但是，我想到的所有策略都需要程序员格外小心，以确保他们正在访问类中的属性他们的意思的确切方式。

此外，Groovy 中的一些内置很棒的东西（例如@Delegate）使用直接的 MetaProperty 访问而不是通过 getProperty，因此以下内容永远不会起作用：

```
class Meep {
  String getMyMeep() {
    return "MEEP!!!"
  }
}

class Foo {
  Map m = [:]
  String bar
  @Delegate Meep meep

  void getProperty(String name) {
    m.get name
  }

  def setProperty(String name, value) {
    m.set name, value
  }

  String getBarString() {
    return bar
  }
}

foo = new Foo()
foo.meep = new Meep() // uses setProperty and so does not place the Meep in the Map m
foo.getMyMeep() 
```

由于@Delegate 使用 MetaProperty 直接访问（实际上是 this.meep.getMyMeep() 而不是 getProperty 拦截器，因此在最后一行抛出空指针异常。不幸的是，'meep' 为空，但 getProperty('meep') 不会。

简而言之，我正在寻找一种解决以下标准的策略：

*   拦截属性读/写以启用自动替代数据存储
*   为其他开发人员提供透明或近乎透明的界面（我不想让其他人的生活变得更加艰难）
*   允许使用 MetaProperty/this/etc 对变量进行本地访问。访问方法

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:14:44.897

通过使用 AST 转换，我可以执行以下操作：

*   遍历一个类的结构并将所有本地字段重命名为 x -> **x**。
*   像这样为每个重命名的字段添加一个 getter/setter

    def get_ *x* _() { **x** }

...为了将**x**作为字段而不是作为 Groovy 属性访问 - 现在将转换应用于以下类

```
class Foo {

  def x
  def y
  Map m = [:]
  @Delegate Date date // for testing if non-local fields work

  def getProperty(String name) {
    if (this.respondsTo("get__${name}__")) // if this is one of our custom fields
      return "get__${name}__"()
    "get${Verifier.capitalize(name)}"() // pass to specific getter method
  }

  void setProperty {
    if (this.respondsTo("set__${name}__")) {
      "set__${name}__"(value)
      m[name] = value
      if (name == "x") y = x + 1
      return
    }
    "set${Verifier.capitalize(name)}"(value)
  }
} 
```

*   现在运行这样的测试方法：

    public void testAST() { def file = new File('./src/groovy/TestExample.groovy') GroovyClassLoader invoker = new GroovyClassLoader() def clazz = invoker.parseClass(file) def out = clazz.newInstance()

    out.x = 10 断言 out.y == 11 out.y = 5 断言 out.y == 5 out.x = 2 断言 out.m.containsKey('x') 断言 out.mx == 2 断言。我的 == 3

    out.date = new Date() 断言 out.time && out.time > 0 }

一切都应该解决，包括 m 得到更新，日期委托方法时间得到正确访问等。

-格伦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:45:32.303

你可以使用

```
foo.@meep = new Meep() 
```

为了直接访问属性绕过`setProperty`方法。`foo.meep`尽管仍然触发，但这并不能完全解决您的问题`set/getProperty`。

您可以采取的另一种方法是直接使用 getter 和 setter ，即

```
foo.setMeep(new Meep()) 
```

因此，一种统一的方法是将所有变量定义为私有并使用 get/set*PropertyName*

# java - 正则表达式不匹配

> ID：11456218
> 
> 赞同：2
> 
> 时间：2012-07-12T16:19:33.797
> 
> 标签：java, regex, liferay

我正在尝试创建一个正则表达式来匹配新密码（有效），但我只需要最后一步即可使其 100% 工作。

这是 RegExp 及其用途：

```
((?=.*(\\d|[\\(\\)\\{\\}\\?!\\$&\\*%\\=\\+_\\-\\.]))(?=.*[a-z])(?=.*[A-Z]).{8,}) 
```

正则表达式说：必须使用数字**或**符号*- 这就是不起作用的，OR 运算符，因为****我可以插入数字和符号****-*，至少一个小写字母，至少一个大写字母和至少 8 个字符的长度.`(){}?!$&%*=+-.`

 **我尝试以`|`多种方式使用 OR 运算符，但我无法使其工作。

我错过了什么？非常感谢您提前。

注意：我在 liferay 配置文件中使用这个正则表达式来设置密码策略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:23:37.543

您需要 XOR 逻辑运算，而不是 OR。

```
OR is true:
A |  B |  o/p
T |  T |   T
F |  T |   T
T |  F |   T
F |  F |   F

XOR is true:
A |  B | o/p
T |  T |  F
F |  T |  T
T |  F |  T
F |  F |  F 
```

[正则表达式中的异或](https://stackoverflow.com/questions/247167/exclusive-or-in-regular-expression)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:54:42.967

好的，我已经稍微改写了你的表达，这就是我想出的：

```
String pattern = "^(?=.*[\\d().{}?!$&*%=+_-])(?=.*[a-z])(?=.*[A-Z]).{8,}$"; 
```

这匹配任何字符串

*   至少一个数字*或*特殊字符
*   至少一个小写字母
*   至少有一个大写字母
*   至少有 8 个字符长

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T19:20:41.503

我不得不说，虽然正则表达式可能可以做到这一点，但我认为使用多个正则表达式测试更简单、更安全，例如：

```
boolean containsDigit = Pattern.matches("[0-9]", testString);
boolean containsSymbol = Pattern.matches("[(){}?!$&%*=+.-]", testString);
boolean containsLowercase = Pattern.matches("[a-z]", testString);
boolean containsUppercase = Pattern.matches("[A-Z]", testString);

if(testString.length() >= 8
        && containsLowercase
        && containsUppercase
        && (containsDigit || containsSymbol)
        && !(containsDigit && containsSymbol)) {
    //valid
} else {
    //invalid
} 
```

几个月前，我使用了一种 Java 正则表达式模式，它并不复杂，但它导致了一个 Java 错误的暴露。太多的括号子句似乎造成了麻烦，我不得不将模式拆分成更简单的东西。

以上内容比多子句正则表达式模式更具可读性，因此更易于维护和调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:24:58.393

你说，

> 我可以插入数字和符号

这对于逻辑 OR 操作来说是正常的。听起来您想要的是异或（XOR）。恐怕我不知道您如何在正则表达式中做到这一点，但希望这会为您指明正确的方向。**

# python - 基于 Python 的 Web 开发的 Django 替代品？

> ID：11456220
> 
> 赞同：15
> 
> 时间：2012-07-12T16:19:37.973
> 
> 标签：python, django, openid

我即将开始一个新的个人 web / iphone 应用程序项目，它需要以下内容：

*   在后端存储数据
*   通过 openid 对用户进行身份验证
*   生成基于 JSON 的 API 用于读取和写入数据

我通常在我的所有项目中使用 Django，但我想我会借此机会学习一些新东西。那么，他们的任何基于 Python 的 Web 开发框架是 Django 的良好替代品吗？理想情况下，那些在上面列出的要点上很强大？

如果框架是加分项：

*   轻的
*   易于安装、部署和开发

有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T16:24:04.113

我只用过 Django，我喜欢它，但这里有几个其他的（我认为 Flask 是你最好的选择）

## 烧瓶

“Flask 是基于 Werkzeug、Jinja 2 和良好意图的 Python 微框架。” - [http://flask.pocoo.org/](http://flask.pocoo.org/)

## 塔架

“Pylons 项目不会专注于单一的 Web 框架，而是会开发一系列相关技术。Pylons 项目的第一个包是 Pyramid Web 框架。随着时间的推移，其他包已经添加到集合中，包括更高级别的组件“ - [http://www.pylonsproject.org/](http://www.pylonsproject.org/)

## 格罗克

“Grok 是一个面向 Python 开发人员的 Web 应用程序框架。它面向初学者和非常有经验的 Web 开发人员。Grok 强调敏捷开发。Grok 简单而强大。” - [http://grok.zope.org/](http://grok.zope.org/)

## 涡轮齿轮

“TurboGears 将帮助您在几分钟内创建一个数据库驱动的、可随时扩展的应用程序。所有这些都包含像编写函数一样自然的代码、设计人员友好的模板、浏览器端和服务器端的简单 AJAX 以及一个非常强大和灵活的对象关系映射器（ORM）。” - [http://www.turbogears.org/](http://www.turbogears.org/)

## 更多 Python 框架资源

经过多一点挖掘，我发现了这个资源：[http ://wiki.python.org/moin/WebFrameworks/](http://wiki.python.org/moin/WebFrameworks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:31:24.133

我在几个小项目中使用了[web2py ，并且非常喜欢它。](http://www.web2py.com/)

它非常轻量级，有很好的文档，并且根据我的经验，部署起来非常简单。我从未使用过 Django，所以我不确定它的比较。

几个你好世界：

```
def hello1():
    return "Hello World"

def hello5():
    return HTML(BODY(H1(T('Hello World'),_style="color: red;"))).xml() # .xml to serialize

def hello3():
    return dict(message=T("Hello World")) 
```

的对应视图`hello3`：

```
{{extend 'layout.html'}}
<h1>{{=message}}</h1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:23:23.403

使用 web.py 可以在[http://webpy.org/](http://webpy.org/)找到非常简单的 URL 处理和许多内置功能但仍然很轻

# sql - SQL：如何删除子表的子表？

> ID：11456224
> 
> 赞同：0
> 
> 时间：2012-07-12T16:19:48.020
> 
> 标签：sql

我有 3 张桌子，用户、聊天框、图像板。一个用户可以有 (0,N) 个聊天框，一个聊天框可以有 (0,1) 个图像板。我需要删除一个用户。所以我需要在聊天框之前删除图像板，在用户之前删除聊天框。什么要求？！

这是我的架构的图像：

[![表架构](../Images/d5f17f98ea8ac6b6c681edbefc295a44.png)](http://mrvincent.chickenkiller.com/images/yoyo.png "点击放大")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:24:20.300

我会使用这样的模式：

```
BEGIN TRANSACTION

BEGIN TRY
  -- delete statements here.
END TRY

COMMIT TRANSACTION;

BEGIN CATCH
  ROLLBACK TRANSACTION;
END CATCH 
```

删除语句看起来像这样：（我不怎么做 mysql，所以请原谅小错误）

```
CREATE TEMPORARY TABLE IMAGELIST (
-> ID INT NOT NULL
)

SELECT C.FK_IMAGEBOARD AS ID
FROM CHATBOX C
INTO IMAGELIST
WHERE C.FK_USERNAME = @USERNAME

DELETE FROM CHATBOX WHERE FK_USERNAME = @USERNAME;

DELETE FROM IMAGEBOARD WHERE ID IN
  (SELECT ID FROM IMAGELIST)

DELETE FROM USERS WHERE USERNAME = @USERNAME; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:37:09.493

由于您的聊天框引用了图像板，因此您无法删除聊天框，因为到图像板的链接丢失（在所有剩余的图像板中，您不知道哪个属于已删除的聊天框。

但是您不能从 imageboard 表中删除，因为它是从 chatbox 表中引用的。如果 imagebox 表包含对 chatbox 表的引用，事情会更容易。

如果任何不再使用的图像板也可以删除，那么以下应该可以工作：

```
delete from chatbox
where fk_username = 'foobar';

delete from imageboard
where not exists (select 1 from chatbox where imageboard.id = chatbox.fk_imagebox);

delete from users 
where username = 'foobar';

commit; 
```

另一种选择是使外键延迟，然后您可以在从聊天框表中删除之前从图像板表中删除，因为延迟约束是在提交时评估的，而不是在运行实际删除语句时。延迟约束在 PostgreSQL 和 Oracle 中可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:22:44.057

向您的和表中添加`on delete cascade`条件。这样你就不用做任何事情了。如果您删除用户，数据库将为您删除条目。`users``chatbox`

[您可以在此处](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)找到 MySQL 的示例

# delphi - 如何在运行时正确初始化编解码器（Turbo Power Lock Box 3）？

> ID：11456230
> 
> 赞同：1
> 
> 时间：2012-07-12T16:20:01.177
> 
> 标签：delphi, encryption, turbopower

我使用以下过程对流进行编码。

```
procedure SaveEncodedStream(Strm:TStream; LicFileName:String);
var
   C:TCodec;
    CL:TCryptographicLibrary;
    Sg:TSignatory;
    KFS,DFS:TFileStream;
    Dir:String;
begin
   CL:=TCryptographicLibrary.Create(nil);
   C:=TCodec.Create(nil);
  SG:=TSignatory.Create(nil);

   Dir :=  ExtractFilePath(ParamStr(0));
   KFS:=TFileStream.Create(Dir+PublicKeyFile,fmOpenRead);
   DFS:=TFileStream.Create(LicFileName,fmCreate);

  try
  C.CryptoLibrary:=CL;
  C.BlockCipherId := 'native.RSA';
  C.ChainModeId := 'native.CBC';
  C.AsymetricKeySizeInBits := 1024;
  SG.Codec:=C;
  SG.LoadKeysFromStream(KFS,[partPublic]);
  C.EncryptStream(Strm,DFS);
 finally
  CL.Free;
  C.Free;
  SG.Free;
  KFS.Free;
  DFS.Free;
 end;
end; 
```

并收到“错误模式”错误

`C.EncryptStream(Strm,DFS);`称呼

进入代码我发现它甚至没有尝试加载密钥，因为 Codec 没有初始化。当我在表单上放置组件时 - 一切正常。但我不需要 Form 或 DataModule。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:31:39.550

还没有找到摆脱 DataModule 的解决方案。看起来组件需要一个来正确初始化自己。因此，作为解决方法，我创建了全局 DataModule，并在设计模式下配置了所有组件。我在 SaveEncodedStream 中使用该模块，如下所示：

```
uses 
  ... EncryptDataModule;
 ...
var 
   BeenHere:Boolean = false;
 ...
procedure SaveEncodedStream(Strm:TStream; LicFileName:String);
 var
   KFS,DFS:TFileStream;
   Dir:String;
begin

   Dir :=  ExtractFilePath(ParamStr(0));
   KFS:=TFileStream.Create(Dir+PublicKeyFile,fmOpenRead);
   DFS:=TFileStream.Create(LicFileName,fmCreate);

   try
    DataModule.SG.LoadKeysFromStream(KFS,[partPublic]);
    if BeenHere then DataModule.C.Reset;  
    DataModule.C.EncryptStream(Strm,DFS);
    BeenHere:=true; 
  finally
   KFS.Free;
   DFS.Free;
  end;
end; 
```

# symfony - Symfony http_digest 键是什么？

> ID：11456232
> 
> 赞同：2
> 
> 时间：2012-07-12T16:20:07.680
> 
> 标签：symfony, http-digest

在 Symfony 中使用 http 摘要认证需要指定一个 'key' 属性：

```
firewalls:
    main:         
        pattern: ^/
        anonymous: ~
        form_login: false            
        provider: fos_user_bundle
        http_digest:
            realm: "Example"
            key: "key_value_here" 
```

我找不到密钥的任何文档。

这把钥匙是什么？这是以什么方式使用的？在选择值时我应该考虑什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:15:04.990

它只是许多加密机制通用的密钥。

您可以重复使用应用程序的秘密（来自 parameters.ini），这就是我要做的

```
key: "%secret%" 
```

# c++ - C ++（使用libpng）中的变量赋值不起作用？

> ID：11456233
> 
> 赞同：1
> 
> 时间：2012-07-12T16:20:09.987
> 
> 标签：c++, png, variable-assignment, libpng

我正在编写一个纹理加载器，试图将它与 libpng 一起使用。我目前被一小部分难住了，这没有任何意义。我正在尝试获取图像的宽度和高度，并且发现返回的值没有保存。

```
unsigned int width;
unsigned int height;

...

width = png_get_image_width(png_ptr, info_ptr);
height = png_get_image_height(png_ptr, info_ptr);

printf("Width: %d\nHeight: %d\n\n", width, height);
printf("Width: %d\nHeight: %d\n\n", png_get_image_width(png_ptr, info_ptr), png_get_image_height(png_ptr, info_ptr)); 
```

这将返回以下内容：

```
Width: 0
Height: 0

Width: 1024
Height: 2048 
```

那么有什么关系呢？这**应该**有效，但很明显不是。

所有相关代码的 Pastbin：http: [//pastebin.com/9RP1iqqU](http://pastebin.com/9RP1iqqU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:35:27.427

从您在[此处](http://pastebin.com/9RP1iqqU)发布的代码中，我可能会假设您在类中的成员数据名称与成员函数`TextureAtlas`中的参数名称冲突。`loadAtlas`

```
class TextureAtlas {
    protected:
        unsigned int width;
        unsigned int height;

    public:

        TextureAtlas();
        virtual ~TextureAtlas();

        void loadAtlas(std::string loc, unsigned char tileWidth, unsigned char tileHeight);
};

void TextureAtlas::loadAtlas(std::string loc, unsigned char width, unsigned char height) {
    ...
    width = png_get_image_width(png_ptr, info_ptr);
    height = png_get_image_height(png_ptr, info_ptr);
    color_type = png_get_color_type(png_ptr, info_ptr);
    bit_depth = png_get_bit_depth(png_ptr, info_ptr);

    printf("Width: %d\nHeight: %d\n\n", width, height);
    printf("Width: %d\nHeight: %d\n\n", png_get_image_width(png_ptr, info_ptr), png_get_image_height(png_ptr, info_ptr));
    ... 
```

要么重命名

```
unsigned int width;
unsigned int height; 
```

或最后两个参数

```
void TextureAtlas::loadAtlas(std::string loc, unsigned char width, unsigned char height) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:26:52.307

看起来你使用了错误的类型。 `width`并且不`height`应该`png_uint_32``unsigned int`

更新：

在看到你的 pastebin 之后，看起来你正在传入`width`和传递`height`给函数，因为`unsigned char`它有效地隐藏了类成员`width`，`height`并且可能不是你想要的，特别是因为`unsigned char`只能保存高达 255 的值，宽度和高度是 1024和 2048。

只需重命名函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:36:25.553

我假设您正在尝试类成员调用的集合`width`and `height`; 但是，您已经使用具有相同名称的函数参数隐藏了这些。它们有 type `unsigned char`，它（几乎可以肯定）不能保存大于 256 的值，这就是打印它们时看到零的原因。

您可以通过以下方式修复它：

*   重命名参数或成员变量，以免它们发生冲突；或者
*   `this->width`作为和访问成员`this->height`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:25:25.100

我认为您的问题可能在于您`unsigned int`用来存储返回类型的事实，而实际上返回类型是`png_uint_32`.

您是否尝试过这样做：

```
 png_uint_32 width = 0;
 png_uint_32 height = 0;

 width = png_get_image_width(png_ptr, info_ptr);
 height = png_get_image_height(png_ptr, info_ptr); 
```

我还没有尝试过，但我怀疑这就是问题所在。

# macros - Notepad++ 在宏中使用“运行”命令

> ID：11456242
> 
> 赞同：7
> 
> 时间：2012-07-12T16:20:53.747
> 
> 标签：macros, notepad++

是否可以在 Notepad++ 中创建一个能够利用“运行”命令的宏，以便我可以调用外部 .exe 来操作指定的文件？我可以手动完成，但是当我创建一个包含运行 (F5) 的宏并给它一个指定的命令时，它无法执行。这是因为创建宏时不支持运行命令吗？如果是这样，是否有解决方法？

谢谢

编辑：添加上下文——我编写了几个 ruby​​ 脚本来促进使用 notepad++ 完成的数据输入，并希望将它们集成到编辑器中。让它们通过录制宏创建的快捷方式运行似乎是最好的方法，除非无法使用运行命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:27:04.880

FWIW [Zeus](http://www.zeusedit.com)和[Zeus Lite](http://www.zeusedit.com/lite)编辑器可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:17:48.817

您可以使用 NppExec 插件（可在[Notepad++ wiki](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central#N)中获得）来完成此操作。它允许您使用执行命令的关键字创建迷你脚本。

您还可以在上下文（右键单击）菜单中添加脚本，或为其分配快捷方式。

我个人使用它来保存一个 sql 文件，将自己放在当前目录中，然后在该文件上执行 isql.exe（外部可执行文件）。这个简单的脚本将我的 Notepad++ 转换为一个相当方便的 SQL IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:29:04.883

我不认为你只使用 Notepad++ 来做到这一点。

请看这个帖子：http: [//sourceforge.net/projects/notepad-plus/forums/forum/331754/topic/4805532](http://sourceforge.net/projects/notepad-plus/forums/forum/331754/topic/4805532)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:12:16.573

如果我理解正确，你已经设置好了，但是在通过 Notepad++ 的运行命令运行它时遇到问题？如果是这样，试试我在**[这里](https://stackoverflow.com/a/8007057/261332)**提到的。

我在运行 php 编译器时遇到了类似的问题，并通过在上述示例中添加的“cmd /c”解决了它。最后还有一个“& pause”，让我看看发生了什么。

# ruby-on-rails - 构建自动嵌套对象

> ID：11456244
> 
> 赞同：0
> 
> 时间：2012-07-12T16:20:54.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

在我的**client_controller.rb**

```
def edit
  @client = Client.find(params[:id])
  @client.build_address unless @client.address
  ...
end 
```

...地址是嵌套的多态属性 (1:1)

我不喜欢在控制器中调用 build 属性

### 我的问题：

如果还没有构建嵌套对象，自动构建嵌套对象是个好主意吗？

例子：

```
class Client
  has_one :address, :as => :addressable             #polymorphic
  #...

  def address
    super || build_address
  end
end 
```

### 问题2：

有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:30:07.523

以项目形式实施了6个多星期，仍然没有问题，

所以在我看来是个好主意，请参阅问题评论

# android - Android 活动和服务关系

> ID：11456245
> 
> 赞同：2
> 
> 时间：2012-07-12T16:20:57.367
> 
> 标签：android, .net, multithreading, sqlite, mono

我想知道 Android 服务和启动它的活动之间的关系是什么（在这种情况下，通过 StartService() 方法发生）？

服务只是在活动所属的同一进程中运行的另一个线程，还是拥有自己的？

我问的原因是 b/c 我正在使用一个 SQLite 数据库，该数据库将从一个活动和它启动的服务中访问，因此需要确定在它们之间同步数据库访问的正确方法（利用SQLite 的内置多线程支持，或实现一些自主开发的进程间 snycronization 方法）。

注意：我不是在问如何同步访问，我是想弄清楚我从两个单独的进程或单独的线程访问数据库的天气，这将决定我如何去做。

注意：我使用 Mono.Data.Sqlite 在 .net/mono 中编写，而不是在原始 Android/Java 中编写。

欢迎和赞赏任何见解，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:24:13.060

[android 开发者](http://developer.android.com/guide/components/services.html)网站不包含您的答案吗？它详细介绍了`Service`and `Activity`。

> 注意：服务在其宿主进程的主线程中运行——该服务不会创建自己的线程，也不会在单独的进程中运行（除非您另外指定）。这意味着，如果您的服务要执行任何 CPU 密集型工作或阻塞操作（例如 MP3 播放或网络），您应该在服务中创建一个新线程来完成这项工作。通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险，并且应用程序的主线程可以保持专用于用户与您的活动的交互。

# android - Android 应用内计费 - 按购买时出现异常，然后从购买屏幕按返回

> ID：11456246
> 
> 赞同：5
> 
> 时间：2012-07-12T16:21:07.193
> 
> 标签：android, android-billing

当用户按下购买按钮时，他们会被带到安卓播放屏幕以购买应用内商品。但是当他们回击时，他们得到了关于无法启动计费服务的异常：

```
java.lang.RuntimeException: Unable to start service com.problemio.BillingService@405704f0 with Intent { act=com.android.vending.billing.RESPONSE_CODE cmp=com.problemio/.BillingService (has extras) }: java.lang.NullPointerException
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2387)
at android.app.ActivityThread.access$2800(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1111)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4293)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.problemio.ExtraHelpActivity.prependLogEntry(ExtraHelpActivity.java:561)
at com.problemio.ExtraHelpActivity.logProductActivity(ExtraHelpActivity.java:569)
at com.problemio.ExtraHelpActivity.access$4(ExtraHelpActivity.java:565)
at com.problemio.ExtraHelpActivity$ExtraHelpPurchaseObserver.onRequestPurchaseResponse(ExtraHelpActivity.java:187)
at com.problemio.ResponseHandler.responseCodeReceived(ResponseHandler.java:137)
at com.problemio.BillingService$RequestPurchase.responseCodeReceived(BillingService.java:285)
at com.problemio.BillingService.checkResponseCode(BillingService.java:582)
at com.problemio.BillingService.handleCommand(BillingService.java:427)
at com.problemio.BillingService.onStart(BillingService.java:398)
at android.app.Service.onStartCommand(Service.java:428)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2370)
... 10 more
java.lang.NullPointerException
at com.problemio.ExtraHelpActivity.prependLogEntry(ExtraHelpActivity.java:561)
at com.problemio.ExtraHelpActivity.logProductActivity(ExtraHelpActivity.java:569)
at com.problemio.ExtraHelpActivity.access$4(ExtraHelpActivity.java:565)
at com.problemio.ExtraHelpActivity$ExtraHelpPurchaseObserver.onRequestPurchaseResponse(ExtraHelpActivity.java:187)
at com.problemio.ResponseHandler.responseCodeReceived(ResponseHandler.java:137)
at com.problemio.BillingService$RequestPurchase.responseCodeReceived(BillingService.java:285)
at com.problemio.BillingService.checkResponseCode(BillingService.java:582)
at com.problemio.BillingService.handleCommand(BillingService.java:427)
at com.problemio.BillingService.onStart(BillingService.java:398)
at android.app.Service.onStartCommand(Service.java:428)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2370)
at android.app.ActivityThread.access$2800(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1111)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4293)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

它在我的课堂上特别提到了这些行：

造成的：

```
java.lang.NullPointerException
at com.problemio.ExtraHelpActivity.prependLogEntry(ExtraHelpActivity.java:561)
at com.problemio.ExtraHelpActivity.logProductActivity(ExtraHelpActivity.java:569)
at com.problemio.ExtraHelpActivity.access$4(ExtraHelpActivity.java:565)
at com.problemio.ExtraHelpActivity$ExtraHelpPurchaseObserver.onRequestPurchaseResponse(ExtraHelpActivity.java:187) 
```

在第 561 行我有这个代码：

```
private void prependLogEntry(CharSequence cs) {
    SpannableStringBuilder contents = new SpannableStringBuilder(cs);
    contents.append('\n');
    contents.append(mLogTextView.getText());   // Line 561
    mLogTextView.setText(contents);
} 
```

在第 569 行，我有以下代码：

```
private void logProductActivity(String product, String activity) {
    SpannableStringBuilder contents = new SpannableStringBuilder();
    contents.append(Html.fromHtml("<b>" + product + "</b>: "));
    contents.append(activity);
    prependLogEntry(contents); // Line 569
} 
```

顺便问一下，这是哪个日志？真的需要吗？也许值得注释掉这些方法？

在任何情况下，错误指向的另一行是 187，这里是代码：

```
@Override
public void onRequestPurchaseResponse(RequestPurchase request,
        ResponseCode responseCode) {
    if (Consts.DEBUG) {
        Log.d(TAG, request.mProductId + ": " + responseCode);
    }
    if (responseCode == ResponseCode.RESULT_OK) {
        if (Consts.DEBUG) {
            Log.i(TAG, "purchase was successfully sent to server");
        }
        logProductActivity(request.mProductId, "sending purchase request");
    } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
        if (Consts.DEBUG) {
            Log.i(TAG, "user canceled purchase");
        }
        logProductActivity(request.mProductId, "dismissed purchase dialog");  
        // This is line 187 right above this comment.
    } else {
        if (Consts.DEBUG) {
            Log.i(TAG, "purchase failed");
        }
        logProductActivity(request.mProductId, "request purchase returned " + responseCode);
    }
} 
```

所以你看，它在这个日志记录的事情上一直有问题。这是什么日志？我在哪里可以看到它？我怎样才能修复它以使其不会出错？

我不确定，但也许更大的问题是请求为空。为什么这里的请求可能为空？

这是整个 ExtraHelpActivity 类：

```
public class ExtraHelpActivity extends BaseActivity implements ServiceConnection 
{
    // , OnClickListener 
    private static final String TAG = "Pay";

    String issueProductIdWebMarketing = "1";    
    String issueProductIdDonate = "2";  
    String issueProductIdPsych = "3";   

    /**
    * The developer payload that is sent with subsequent
    * purchase requests.
    */
    private String payloadContents = null;

    /**
     * Used for storing the log text.
     */
    private static final String LOG_TEXT_KEY = "DUNGEONS_LOG_TEXT";

    /**
     * The SharedPreferences key for recording whether we initialized the
     * database.  If false, then we perform a RestoreTransactions request
     * to get all the purchases for this user.
     */
    private static final String DB_INITIALIZED = "db_initialized";

    private ExtraHelpPurchaseObserver mExtraHelpPurchaseObserver;
    private Handler mHandler;
    private Handler handler;

    private BillingService mBillingService;
    private Button mBuyButton;
    private Button mEditPayloadButton;
    private Button mEditSubscriptionsButton;
    private TextView mLogTextView;
    private Spinner mSelectItemSpinner;
    private ListView mOwnedItemsTable;
    private SimpleCursorAdapter mOwnedItemsAdapter;
    private PurchaseDatabase mPurchaseDatabase;
    private Cursor mOwnedItemsCursor;
    private Set<String> mOwnedItems = new HashSet<String>();

    /**
     * The developer payload that is sent with subsequent
     * purchase requests.
     */
    private String mPayloadContents = null;

    private static final int DIALOG_CANNOT_CONNECT_ID = 1;
    private static final int DIALOG_BILLING_NOT_SUPPORTED_ID = 2;
    private static final int DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID = 3;

    /**
     * Each product in the catalog can be MANAGED, UNMANAGED, or SUBSCRIPTION.  MANAGED
     * means that the product can be purchased only once per user (such as a new
     * level in a game). The purchase is remembered by Android Market and
     * can be restored if this application is uninstalled and then
     * re-installed. UNMANAGED is used for products that can be used up and
     * purchased multiple times (such as poker chips). It is up to the
     * application to keep track of UNMANAGED products for the user.
     * SUBSCRIPTION is just like MANAGED except that the user gets charged monthly
     * or yearly.
     */
    private enum Managed { MANAGED, UNMANAGED, SUBSCRIPTION }

    /**
     * A {@link PurchaseObserver} is used to get callbacks when Android Market sends
     * messages to this application so that we can update the UI.
     */
    private class ExtraHelpPurchaseObserver extends PurchaseObserver {
        public ExtraHelpPurchaseObserver(Handler handler) {
            super(ExtraHelpActivity.this, handler);
        }

        @Override
        public void onBillingSupported(boolean supported, String type) {
            if (Consts.DEBUG) {
                Log.i(TAG, "supported: " + supported);
            }
            if (type == null || type.equals(Consts.ITEM_TYPE_INAPP)) {
                if (supported) {
                    restoreDatabase();
                    mBuyButton.setEnabled(true);
                    mEditPayloadButton.setEnabled(true);
                } else {
                    showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                }
            } else if (type.equals(Consts.ITEM_TYPE_SUBSCRIPTION)) {
                mCatalogAdapter.setSubscriptionsSupported(supported);
            } else {
                showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
            }
        }

        @Override
        public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
                int quantity, long purchaseTime, String developerPayload) {
            if (Consts.DEBUG) {
                Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
            }

            if (developerPayload == null) {
                logProductActivity(itemId, purchaseState.toString());
            } else {
                logProductActivity(itemId, purchaseState + "\n\t" + developerPayload);
            }

            if (purchaseState == PurchaseState.PURCHASED) {
                mOwnedItems.add(itemId);

                // If this is a subscription, then enable the "Edit
                // Subscriptions" button.
                for (CatalogEntry e : CATALOG) {
                    if (e.sku.equals(itemId) &&
                            e.managed.equals(Managed.SUBSCRIPTION)) {
                        mEditSubscriptionsButton.setVisibility(View.VISIBLE);
                    }
                }
            }
            mCatalogAdapter.setOwnedItems(mOwnedItems);
            mOwnedItemsCursor.requery();
        }

        @Override
        public void onRequestPurchaseResponse(RequestPurchase request,
                ResponseCode responseCode) {
            if (Consts.DEBUG) {
                Log.d(TAG, request.mProductId + ": " + responseCode);
            }
            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.i(TAG, "purchase was successfully sent to server");
                }
                logProductActivity(request.mProductId, "sending purchase request");
            } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
                if (Consts.DEBUG) {
                    Log.i(TAG, "user canceled purchase");
                }
                logProductActivity(request.mProductId, "dismissed purchase dialog");
            } else {
                if (Consts.DEBUG) {
                    Log.i(TAG, "purchase failed");
                }
                logProductActivity(request.mProductId, "request purchase returned " + responseCode);
            }
        }

        @Override
        public void onRestoreTransactionsResponse(RestoreTransactions request,
                ResponseCode responseCode) {
            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.d(TAG, "completed RestoreTransactions request");
                }
                // Update the shared preferences so that we don't perform
                // a RestoreTransactions again.
                SharedPreferences prefs = getPreferences(Context.MODE_PRIVATE);
                SharedPreferences.Editor edit = prefs.edit();
                edit.putBoolean(DB_INITIALIZED, true);
                edit.commit();
            } else {
                if (Consts.DEBUG) {
                    Log.d(TAG, "RestoreTransactions error: " + responseCode);
                }
            }
        }
    }

    private static class CatalogEntry {
        public String sku;
        public int nameId;
        public Managed managed;

        public CatalogEntry(String sku, int nameId, Managed managed) {
            this.sku = sku;
            this.nameId = nameId;
            this.managed = managed;
        }
    }

    /** An array of product list entries for the products that can be purchased. */
    private static final CatalogEntry[] CATALOG = new CatalogEntry[] {
        new CatalogEntry("marketing_001", 1 , Managed.MANAGED),
        new CatalogEntry("potion_001", 2 , Managed.UNMANAGED),
        new CatalogEntry("subscription_monthly", 3,
                Managed.SUBSCRIPTION),
        new CatalogEntry("subscription_yearly", 4 ,
                Managed.SUBSCRIPTION)
    };  

    private String mItemName;
    private String mSku;
    private Managed mManagedType;
    private CatalogAdapter mCatalogAdapter; 

  //outside onCreate() Within class
//    public Handler mTransactionHandler = new Handler(){
//       public void handleMessage(android.os.Message msg) {
//           Log.i(TAG, "Transaction complete");
//           Log.i(TAG, "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
//           Log.i(TAG, "Item purchased is: "+BillingHelper.latestPurchase.productId);
//
//           if(BillingHelper.latestPurchase.isPurchased()){
//               //code here which is to be performed after successful purchase
//           }
//       };
//
//    };    

    // TODO: 
    // TODO: 
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.extra_help);

            //Now setup the in-app billing</pre>
            handler = new Handler();            

            mExtraHelpPurchaseObserver = new ExtraHelpPurchaseObserver(handler); 

            mBillingService = new BillingService();

            mBillingService.setContext(this);
            mPurchaseDatabase = new PurchaseDatabase(this);

            ResponseHandler.register(mExtraHelpPurchaseObserver);

            //Check if billing is supported. (Optional)
            //boolean check = mBillingService.checkBillingSupported();

//              startService(new Intent(mContext, BillingService.class));
//              BillingHelper.setCompletedHandler(mTransactionHandler);             

            // Make sure the user is logged in
            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( ExtraHelpActivity.this);
            final String user_id = prefs.getString( "user_id" , null );        

            Button donate = (Button)findViewById(R.id.donate); 
            donate.setOnClickListener(new Button.OnClickListener() 
            {  
               public void onClick(View v) 
               {

                   // Send me an email that a comment was submitted on a question. 

//                    boolean val = mBillingService.requestPurchase(
//                            "android.test.purchased", payloadContents);
                  //Replace "android.test.purchased" with your product ID that you added to Google Play or make it a variable that is populated from a list.
                  //Place this code in a button event or where ever it fits in your process flow.

                  if (mBillingService.requestPurchase(issueProductIdDonate, Consts.ITEM_TYPE_INAPP ,  null)) 
                  {

                  } 
                  else 
                  {

                        Log.i("tag", "Can't purchase on this device");

                  }
               }
            });                 

            try 
            {
                  boolean bindResult = bindService(
                    new Intent("com.android.vending.billing.MarketBillingService.BIND"), 
                    this,
                    Context.BIND_AUTO_CREATE);
                  if (bindResult) 
                  {
                    Log.i( "Err" , "Service bind successful.");
                  } 
                  else 
                  {
                    Log.e( "Err", "Could not bind to the MarketBillingService.");
                  }
            } 
            catch (SecurityException e) 
            {
                  Log.e( "Err" , "Security exception: " + e);
            }           

    }

    /**
     * Save the context of the log so simple things like rotation will not
     * result in the log being cleared.
     */
    @Override
    protected void onSaveInstanceState(Bundle outState) 
    {
        super.onSaveInstanceState(outState);
        //outState.putString(LOG_TEXT_KEY, Html.toHtml((Spanned) mLogTextView.getText()));
    }

    /**
     * Restore the contents of the log if it has previously been saved.
     */
    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) 
    {
        super.onRestoreInstanceState(savedInstanceState);
        if (savedInstanceState != null) 
        {
            //mLogTextView.setText(Html.fromHtml(savedInstanceState.getString(LOG_TEXT_KEY)));
        }
    }

    @Override
    protected Dialog onCreateDialog(int id) 
    {
        switch (id) 
        {
            case DIALOG_CANNOT_CONNECT_ID:
            return createDialog(1,1);
        case DIALOG_BILLING_NOT_SUPPORTED_ID:
            return createDialog(2,2);
            case DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID:
                return createDialog(3,3);

        //          case DIALOG_CANNOT_CONNECT_ID:
//              return createDialog(R.string.cannot_connect_title,
//                      R.string.cannot_connect_message);
//          case DIALOG_BILLING_NOT_SUPPORTED_ID:
//              return createDialog(R.string.billing_not_supported_title,
//                      R.string.billing_not_supported_message);
//              case DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID:
//                  return createDialog(R.string.subscriptions_not_supported_title,
//                          R.string.subscriptions_not_supported_message);
            default:
                return null;
        }
    }

    private Dialog createDialog(int titleId, int messageId) {
        String helpUrl = replaceLanguageAndRegion("help_url");
        if (Consts.DEBUG) {
            Log.i(TAG, helpUrl);
        }
        final Uri helpUri = Uri.parse(helpUrl);

        // TODO: replace 1 with the thing its supposed to be - I think learn more url :)
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(titleId)
            .setIcon(android.R.drawable.stat_sys_warning)
            .setMessage(messageId)
            .setCancelable(false)
            .setPositiveButton(android.R.string.ok, null)
            .setNegativeButton(1, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(Intent.ACTION_VIEW, helpUri);
                    startActivity(intent);
                }
            });
        return builder.create();
    }

    /**
     * Replaces the language and/or country of the device into the given string.
     * The pattern "%lang%" will be replaced by the device's language code and
     * the pattern "%region%" will be replaced with the device's country code.
     *
     * @param str the string to replace the language/country within
     * @return a string containing the local language and region codes
     */
    private String replaceLanguageAndRegion(String str) {
        // Substitute language and or region if present in string
        if (str.contains("%lang%") || str.contains("%region%")) {
            Locale locale = Locale.getDefault();
            str = str.replace("%lang%", locale.getLanguage().toLowerCase());
            str = str.replace("%region%", locale.getCountry().toLowerCase());
        }
        return str;
    }

    /**
     * Sets up the UI.
     */
    private void setupWidgets() 
    {
        mOwnedItemsCursor = mPurchaseDatabase.queryAllPurchasedItems();
        startManagingCursor(mOwnedItemsCursor);
        String[] from = new String[] { PurchaseDatabase.PURCHASED_PRODUCT_ID_COL,
                PurchaseDatabase.PURCHASED_QUANTITY_COL
        };
//        int[] to = new int[] { R.id.item_name, R.id.item_quantity };
//        mOwnedItemsAdapter = new SimpleCursorAdapter(this, R.layout.item_row,
//                mOwnedItemsCursor, from, to);
//        mOwnedItemsTable = (ListView) findViewById(R.id.owned_items);
//        mOwnedItemsTable.setAdapter(mOwnedItemsAdapter);
    }

    private void prependLogEntry(CharSequence cs) {
        SpannableStringBuilder contents = new SpannableStringBuilder(cs);
        contents.append('\n');
        contents.append(mLogTextView.getText());
        mLogTextView.setText(contents);
    }

    private void logProductActivity(String product, String activity) {
        SpannableStringBuilder contents = new SpannableStringBuilder();
        contents.append(Html.fromHtml("<b>" + product + "</b>: "));
        contents.append(activity);
        prependLogEntry(contents);
    }

    /**
     * If the database has not been initialized, we send a
     * RESTORE_TRANSACTIONS request to Android Market to get the list of purchased items
     * for this user. This happens if the application has just been installed
     * or the user wiped data. We do not want to do this on every startup, rather, we want to do
     * only when the database needs to be initialized.
     */
    private void restoreDatabase() {
        SharedPreferences prefs = getPreferences(MODE_PRIVATE);
        boolean initialized = prefs.getBoolean(DB_INITIALIZED, false);
        if (!initialized) {
            mBillingService.restoreTransactions();
            Toast.makeText(this, 3, Toast.LENGTH_LONG).show(); 
            // Used to be R.string.restoring_transactions instead of 3
        }
    }

    /**
     * Creates a background thread that reads the database and initializes the
     * set of owned items.
     */
    private void initializeOwnedItems() {
        new Thread(new Runnable() {
            public void run() {
                doInitializeOwnedItems();
            }
        }).start();
    }

    /**
     * Reads the set of purchased items from the database in a background thread
     * and then adds those items to the set of owned items in the main UI
     * thread.
     */
    private void doInitializeOwnedItems() {
        Cursor cursor = mPurchaseDatabase.queryAllPurchasedItems();
        if (cursor == null) {
            return;
        }

        final Set<String> ownedItems = new HashSet<String>();
        try {
            int productIdCol = cursor.getColumnIndexOrThrow(
                    PurchaseDatabase.PURCHASED_PRODUCT_ID_COL);
            while (cursor.moveToNext()) {
                String productId = cursor.getString(productIdCol);
                ownedItems.add(productId);
            }
        } finally {
            cursor.close();
        }

        // We will add the set of owned items in a new Runnable that runs on
        // the UI thread so that we don't need to synchronize access to
        // mOwnedItems.
        mHandler.post(new Runnable() {
            public void run() {
                mOwnedItems.addAll(ownedItems);
                mCatalogAdapter.setOwnedItems(mOwnedItems);
            }
        });
    }

    /**
     * Called when a button is pressed.
     */
    public void onClick(View v) {
        if (v == mBuyButton) {
            if (Consts.DEBUG) {
                Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
            }

            if (mManagedType != Managed.SUBSCRIPTION &&
                    !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
            } else if (!mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) {
                // Note: mManagedType == Managed.SUBSCRIPTION
                showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
            }
        } else if (v == mEditPayloadButton) {
            showPayloadEditDialog();
        } else if (v == mEditSubscriptionsButton) {
            editSubscriptions();
        }
    }

    /** List subscriptions for this package in Google Play
     *
     * This allows users to unsubscribe from this apps subscriptions.
     *
     * Subscriptions are listed on the Google Play app detail page, so this
     * should only be called if subscriptions are known to be present.
     */
    private void editSubscriptions() {
        // Get current package name
        String packageName = getPackageName();
        // Open app detail in Google Play
        Intent i = new Intent(Intent.ACTION_VIEW,
                             Uri.parse("market://details?id=" + packageName));
        startActivity(i);
    }

    /**
     * Displays the dialog used to edit the payload dialog.
     */
    private void showPayloadEditDialog() 
    {
        AlertDialog.Builder dialog = new AlertDialog.Builder(this);
        final View view = View.inflate(this, R.layout.edit_payload, null);
        final TextView payloadText = (TextView) view.findViewById(R.id.payload_text);
        if (mPayloadContents != null) {
            payloadText.setText(mPayloadContents);
        }

        dialog.setView(view);
        dialog.setPositiveButton(
                R.string.edit_payload_accept,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        mPayloadContents = payloadText.getText().toString();
                    }
                });
        dialog.setNegativeButton(
                R.string.edit_payload_clear,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        if (dialog != null) {
                            mPayloadContents = null;
                            dialog.cancel();
                        }
                    }
                });
        dialog.setOnCancelListener(new DialogInterface.OnCancelListener( 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:35:44.897

您是否在清单文件中授予权限？

`<uses-permission android:name="com.android.vending.BILLING" />`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T05:44:21.290

哎呀。

`mLogTextView`从未初始化。

添加`mLogTextView = findViewById(R.id.blaaa);`

我相信你已经知道了

如果我错了，请告诉我，以便我删除这个答案（：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:15:56.263

我添加了一个答案，因为我的课太长了，所以我达到了原始问题中的字符数限制。

这是 extra_help.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >        

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>

<ScrollView
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" 
      android:padding="5px">    

<LinearLayout 

        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5px"
        >  

<TextView
    android:id="@+id/heading_1"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:text="THE APP IS FREE TO HELP AS MANY PEOPLE AS POSSIBLE, PLEASE GIVE BACK"
    />

    <Button
    android:id="@+id/donate"
    android:layout_marginTop ="10dp"        
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Donate $1.99 Since the App is Free"
    /> 

</LinearLayout>

</ScrollView>

</LinearLayout> 
```

# python - Python - Heroku urllib2.HTTPError

> ID：11456247
> 
> 赞同：0
> 
> 时间：2012-07-12T16:21:08.437
> 
> 标签：python, heroku, urllib2, http-error

过去一天左右，我与一个小组一起创建了一个 facebook 应用程序，该应用程序计算用户的集群系数（衡量他们朋友的相互联系的指标）
。为了做到这一点，我需要获得共同朋友的数量用户和他们的每个朋友。不幸的是，我不断收到 urllib2.HTTPError，我不知道发生了什么。[您可以在https://gentle-stream-3754.herokuapp.com/](https://gentle-stream-3754.herokuapp.com/)访问应用程序（以及错误消息 + 回溯）。

特别是第 168 行是回溯的一部分。我知道如果没有上下文，下面的代码很可能不会有帮助，所以这就是为什么我包含了应用程序的链接。

会不会是用户权限的问题？运行？

任何帮助，将不胜感激！提前致谢！

**编辑： access_token 似乎是一个 NoneType 对象，但我不完全确定为什么。这会导致 urllib2.HTTPError 吗？**

```
164 def clustering_coefficient():
165 
166     access_token = get_token()
167     g = Graph(access_token)
168     requests = [{'method': 'GET', 'relative_url': 'me/mutualfriends/%s' % x['id']} for x in g.me.friends()['data']]
169     k_v = len(requests)
170     if k_v < 2:
171         return 0.0
172 
173     n_v = 0
174     REQS_PER_POST = 50 
175     for i in range((k_v // REQS_PER_POST)+1):
176         result = g.post(batch=json.dumps(requests[i*REQS_PER_POST:(i+1)*REQS_PER_POST]))
177         for r in result:
178             body = json.loads(r['body'])
179             n_v += len(body['data'])
180 
181     return 1.0 * n_v / k_v/ (k_v-1) 
```

异常：HTTPError：HTTP 错误 400：错误请求

追溯：

```
Traceback (most recent call last)
File "/app/lib/python2.7/site-packages/flask/app.py", line 1306, in __call__
return self.wsgi_app(environ, start_response)
File "/app/lib/python2.7/site-packages/flask/app.py", line 1294, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/app/lib/python2.7/site-packages/flask/app.py", line 1292, in wsgi_app
response = self.full_dispatch_request()
File "/app/lib/python2.7/site-packages/flask/app.py", line 1062, in full_dispatch_request
rv = self.handle_user_exception(e)
File "/app/lib/python2.7/site-packages/flask/app.py", line 1060, in full_dispatch_request
rv = self.dispatch_request()
File "/app/lib/python2.7/site-packages/flask/app.py", line 1047, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "/app/exampleapp.py", line 168, in clustering_coefficient
requests = [{'method': 'GET', 'relative_url': 'me/mutualfriends/%s' % x['id']} for x in g.me.friends()['data']]
File "/app/lib/python2.7/site-packages/facegraph/graph.py", line 157, in __call__
data = json.loads(self.fetch(self.url | params))
File "/app/lib/python2.7/site-packages/facegraph/graph.py", line 203, in fetch
conn = urllib2.urlopen(url, data=data)
File "/usr/local/lib/python2.7/urllib2.py", line 126, in urlopen
return _opener.open(url, data, timeout)
File "/usr/local/lib/python2.7/urllib2.py", line 400, in open
response = meth(req, response)
File "/usr/local/lib/python2.7/urllib2.py", line 513, in http_response
'http', request, response, code, msg, hdrs)
File "/usr/local/lib/python2.7/urllib2.py", line 438, in error
return self._call_chain(*args)
File "/usr/local/lib/python2.7/urllib2.py", line 372, in _call_chain
result = func(*args)
File "/usr/local/lib/python2.7/urllib2.py", line 521, in http_error_default
raise HTTPError(req.get_full_url(), code, msg, hdrs, fp) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:52:25.297

It looks like this is a problem with the facegraph library - it's sending a request that's receiving a 400 status code. Are you using the latest version? Is it possible something in the Facebook API changed that's causing facegraph to have problems now?

# javascript - 禁用 HTML 字段

> ID：11456249
> 
> 赞同：0
> 
> 时间：2012-07-12T16:21:17.733
> 
> 标签：javascript, dojo

所以我有两个相互排斥的表单输入字段（用户只能输入两个字段中的任何一个）。我`onKeyUp`在这些字段上使用事件来相互禁用。
一旦用户输入数据并点击提交按钮，我就会进行 Ajax 调用以刷新屏幕内容，此时**键入的字段**仍包含在 Ajax 调用之前键入的数据，但其他输入字段不再被禁用（如 onKeyUp 事件从未触发）。
我尝试使用 Dojo 的`addOnLoad`事件，然后检查输入字段的长度，但这会在输入字段上引发未定义的错误。
任何建议如何解决这种情况？
**PS：此页面没有正文标记，我也无法添加一个以使用正文 onLoad 事件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:30:02.673

我假设在 Dojo 中你有类似的东西来处理你的 Ajax 调用

```
dojo.xhrPost({
    // The URL of the request
    url: "submit.php",
    // No content property -- just send the entire form
    form: dojo.byId("form"),
    // The success handler
    load: function(response) {
        messageNode.innerHTML = response;
    },
    // The error handler
    error: function() {
        messageNode.innerHTML = "Your ERROR message."
    },
    // The complete handler
    handle: function() {
        hasBeenSent = true;
    }
}); 
```

然后在完成处理程序 - 上`handle`，它将在成功或错误时触发，您可以重新禁用输入

# android - Android XML 错误 - 第一个应用程序 - NetBeans

> ID：11456250
> 
> 赞同：0
> 
> 时间：2012-07-12T16:21:18.930
> 
> 标签：android, compiler-errors, xml-validation

我今晚刚开始开发我的第一个 Android 应用程序，遇到了一个错误，我一生都看不到来自哪里

当我在模拟器中启动我的测试应用程序时，它会强制关闭并显示错误“应用程序测试应用程序（psprocess Test.App）已意外停止。请重试。”

到目前为止，我已经检查过：
Android 开发输出 - 没有任何问题，可以正常启动并定位活动和意图
模拟器输出 - 根本没有报告
TestApp 调试 - 报告 BUILD SUCCESSFUL

然后我继续检查用于布局的 main.xml，并在 NetBeans 中进行验证时报告“cvc-elt.1：找不到元素'LinearLayout'的声明”

我的 main.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="vertical" >
<Button
android:id="@+id/used_cars"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/used_cars" />
<Button
android:id="@+id/used_vans"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/used_vans" />
<Button
android:id="@+id/dealers"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/dealers" />
</LinearLayout> 
```

我已经搜寻了有关如何解决此问题的信息，但找不到答案
如果我缺少基本的东西，有人可以请教吗？

在此先感谢
巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:39:08.050

我浏览了 logcat 信息，但一无所获，所以我决定从头开始创建一个新应用程序并复制信息，它运行良好如果我确实找到任何其他有关导致问题的信息，我一定会发布它up我只能把它归结为一个配置错误atm

亲切的问候

巴里

# asp.net - 如何在水平菜单中设置项目间距？

> ID：11456252
> 
> 赞同：1
> 
> 时间：2012-07-12T16:21:30.113
> 
> 标签：asp.net, menu

水平菜单项：

```
 <asp:MenuItem Text="Registration" Value="Registration"></asp:MenuItem>
        <asp:MenuItem Text="Log In" Value="Log In"></asp:MenuItem>
        <asp:MenuItem Text="About Us" Value="About Us"></asp:MenuItem> 
```

问题：项目之间的空格与项目中单词之间的空格相同（登录，关于我们）。
我正在寻找一个名为“itemspace”或类似名称的属性，但是，似乎没有这样的属性。或者，也许，有？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T17:01:49.930

```
<staticmenuitemstyle horizontalpadding="10"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T11:00:43.170

或者，我使用了这种方法：

```
<StaticMenuItemStyle ItemSpacing="10px"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T07:26:20.797

添加边框宽度作为替代

```
<staticmenuitemstyle BorderWidth="20px" BackColor="Green" BorderColor="#ededed" forecolor="Black"/> 
```

# excel - 编写 Excel 公式以检查所有行是否具有相同的 ID 但不同的文件名

> ID：11456255
> 
> 赞同：3
> 
> 时间：2012-07-12T16:21:33.953
> 
> 标签：excel, excel-formula

我在 Excel 工作表中有一长串数据，我将把文件 ID 更改为名称。问题是我需要先检查同一个文件名是否有不同的ID，因为这会产生问题。

因此，对于列 file_id 和列 File_name，我需要帮助编写一个公式来比较同一个文件名是否有两个或多个 ID。

这可能吗？

谢谢

![在此处输入图像描述](../Images/b86d65713a598c475a9d6523ac2c19bd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:45:28.507

假设 A 列是 ID，B 列是名称 下面将检查每个名称是否有多个 ID。粘贴到单元格 C1 中并向下拖动。

```
=IF(COUNTIFS(B:B,"<>"&B1,A:A,A1)>0,"MORE THAN ONE ID FOR THIS NAME","OK") 
```

请注意，'COUNTIFS()' 函数仅适用于 excel 2007、2010。

如果您有旧版本的 Excel，则需要使用如下所示的数组公式：

```
=IF(SUM(IF(A:A=A1,IF(B:B<>B1,1,0),0))>0,"MORE THAN ONE ID FOR THIS NAME","OK") 
```

要使其工作，您必须在输入公式时按 Ctrl+Shift+Enter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:45:35.187

如果您有多个 file_id 列，而 File_name 只有一列，并且 File_name 列中的条目是唯一的，那么这很简单：假设 A、B 和 C 列包含 file_id 信息，而 D 列包含 File_name。在 E 列中，您可以输入以下公式： `=COUNTA(A2:C2)`

这将计算 File_name 列左侧列中的 file_id 条目数。如果结果大于 1，则您知道存在多个 file_id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:55:46.467

这是我的尝试。这段代码要做的是标记那些 id 与以前的 ID 不匹配的文件名。看下面的图片：

![快照](../Images/c7a22843aa2872231da7baee79071eda.png)

我已经尝试使用 VBA

按 ALT + F11 进入 VBA，在左侧栏中，您将看到“Project -VBA Project”，在此双击 Sheet1 下，或者您正在处理的工作表的名称。

![VBA模式](../Images/32ec7fbaffe9204a7ab22ebe6a431d12.png)

![粘贴代码](../Images/ea0348493fb2e49cde232d8c949a683a.png)

将以下代码粘贴到那里：

```
Sub mark()

    Dim rng As Range
    Dim row As Integer
    Dim id As Integer
    Dim name As String

    Set rng = Sheets("Sheet1").Range("$A$2")
    row = 0

    Do Until rng.Offset(row, 0) = ""

        id = rng.Offset(row, 0)
        name = rng.Offset(row, 1)

        Do While rng.Offset(row, 1) = name
            If rng.Offset(row, 0) <> id Then
                rng.Offset(row, 0).Interior.Color = 255
                rng.Offset(row, 1).Interior.Color = 255
            End If
            row = row + 1
        Loop

    Loop

End Sub 
```

# 请记住以下几点

1.  在我的代码中，工作表的名称是“ **Sheet1** ”，如果工作表的名称是其他名称，则在代码中编辑以下行，如下所示

    ```
    Set rng = Sheets("Your sheet name").Range("$A$2") 
    ```

2.  在我的代码中，起始 Range(Cell) 已指定为**A2**，如果起始单元格是其他东西，例如**D2**，则编辑代码中的行如下

    ```
    Set rng = Sheets("Your sheet name").Range("$D$2") 
    ```

如果您想对这些单元格做其他事情而不是标记它们，请随时发表评论。

# zend-framework - Google OAuth 和 Zend 使用我的应用程序凭据进行连接

> ID：11456257
> 
> 赞同：2
> 
> 时间：2012-07-12T16:21:46.667
> 
> 标签：zend-framework, google-api, youtube-api, oauth-2.0, zend-gdata

我的网站允许用户将视频上传到我的 youtube 帐户。要将我的应用程序连接到 Google (youtube)，我使用了组件 ClientLogin，如下所示：

```
//my credentials
$user = 'mymail@gmail.com';
$pass = 'mypass';
$service = 'youtube';
$developerKey = 'mydevkey';

//create the http client
$httpClient = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
                Zend_Gdata_ClientLogin::DEFAULT_SOURCE,null,null,
                Zend_Gdata_ClientLogin::CLIENTLOGIN_URI,'GOOGLE');
$httpClient->setHeaders('X-GData-Key', 'key='. $developerKey);

//create the instances
$youTubeService = new Zend_Gdata_YouTube($httpClient);
$newVideoEntry = new Zend_Gdata_YouTube_VideoEntry();
$newVideoEntry->setVideoTitle("test video");
$newVideoEntry->setVideoDescription("just testing");
$newVideoEntry->setVideoCategory("Music");
$newVideoEntry->setVideoTags('test, api');

//call the API to get the upload url and token
$tokenHandlerUrl = 'https://gdata.youtube.com/action/GetUploadToken';
try {
    $tokenArray = $youTubeService->getFormUploadToken($newVideoEntry, $tokenHandlerUrl);
} catch (Exception $e) {

}
$tokenValue = $tokenArray['token'];
$postUrl = $tokenArray['url']; 
```

但是现在 ClientLogin 已被弃用：S，我需要使用 oAuth 2 ......但一直在阅读文档，它没有说明使用我的应用程序凭据（而不是用户的凭据）进行连接。有没有办法重现此代码但使用 oAuth？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:18:48.563

从理论上讲，使用 OAuth2 执行此操作的方法是使用服务帐户：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

在您的 API 控制台中设置帐户后，它就允许服务器到服务器的交互。不幸的是，Youtube API 还不支持服务帐户：

[https://code.google.com/p/google-api-php-client/wiki/OAuth2#Service_Accounts](https://code.google.com/p/google-api-php-client/wiki/OAuth2#Service_Accounts)

希望这种支持很快就会到来（至少在 ClientLogin 消失之前！）

# matlab - 使用数组作为下标索引来访问矩阵中的元素

> ID：11456258
> 
> 赞同：2
> 
> 时间：2012-07-12T16:21:47.917
> 
> 标签：matlab

我想使用存储在另一个数组中的 z 坐标从 3D 矩阵中的元素创建一个数组。最简单的方法是：

```
X=2;
Y=3;
lastZ=10000000
for i=1:lastZ
    new_array=matrix(X,Y,Z(i));
end 
```

但我正在寻找一种仅使用矩阵而不是*for-loop*的“矢量化”方式。我尝试了以下代码，但收到错误消息“下*标索引必须是真正的正整数或逻辑*”：

```
new_array=matrix(X,Y,Z); 
```

我知道 Z 是一个数组，不能与整数 X 和 Y 放在一起。有没有更好的方法在单行代码中创建这样的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:24:13.430

你可以试试：

```
new_array=squeeze(matrix(X,Y,1:Z)); 
```

# c# - XmlWriter 停止写入 StringBuilder

> ID：11456259
> 
> 赞同：1
> 
> 时间：2012-07-12T16:21:49.117
> 
> 标签：c#, stringbuilder, xmlwriter

我有一个奇怪的问题。当遍历数组并使用 XMLWriter 和 StringBuilder 创建 XML 时，字符串将停止添加到字符串构建器中。在收到此错误时调用 XmlDoc.LoadXml 方法之前，我没有收到任何错误：

文件意外结束。以下元素未关闭：ID、端口、端口。第 1256 行，第 39 位。

当我逐步执行代码时，循环继续并且没有抛出任何错误，但没有任何内容添加到字符串生成器中。

有任何想法吗？谢谢

```
public XmlElement LclExportGetPorts()
    {
        DAL.DALSoapClient soapy = new DAL.DALSoapClient();
        DAL.DALStringString[] ports = soapy.EnumPortsWeb(false);
        XmlDocument XmlDoc = new XmlDocument();
        StringBuilder SB = new StringBuilder();
        XmlWriterSettings XmlSettings = new XmlWriterSettings();
        XmlSettings.Indent = true;
        using (XmlWriter writer = XmlWriter.Create(SB, XmlSettings))
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("Ports");
            foreach (var p in ports)
            {
                writer.WriteStartElement("Port");
                writer.WriteElementString("ID", p.Key);
                writer.WriteElementString("Name", p.Value);
                writer.WriteEndElement();
            }
            writer.WriteEndElement();
            writer.WriteEndDocument();
            string temp = writer.ToString();
            XmlDoc.LoadXml(SB.ToString());
        }
        XmlElement Result = XmlDoc.DocumentElement;
        return Result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:24:04.057

你需要`Flush()`作家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:46:36.543

我认为使用 Linq2Xml 更容易。（也不需要先形成一个xml字符串然后按照`Wug`建议解析它）

```
public XElement LclExportGetPorts()
{
    ......
    XElement xDoc = new XElement("Ports");
    foreach (var p in ports)
    {
        xDoc.Add(new XElement("Port", new XElement("ID", p.ID), 
                                      new XElement("Name", p.Name)));
    }
    return xDoc;
} 
```

# html - Firefox：以 % 为单位的宽度问题

> ID：11456261
> 
> 赞同：0
> 
> 时间：2012-07-12T16:21:58.460
> 
> 标签：html, css, firefox, styles

我无法弄清楚为什么以下内容适用于 Internet Explorer 和 Chrome，但不适用于 Firefox。它基本上对Firefox没有影响：

```
<fieldset style="width:30%;"> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:58:38.947

虽然这几天我一直专注于这个问题，但我发现问题不在于`<fieldset>`标签，而在于其中的`<label>`标签。

基本上，我`styled`是`<label>`这样标记的，问题就消失了。

```
<fieldset style="width:29%;float:left">         
    <label style="width:96%">Imagem</label>
    <?php echo $this->Form->input('main_image', array('type' => 'file','label'=>FALSE,'style'=>'120px')); ?>
</fieldset> 
```

![在此处输入图像描述](../Images/f5799e3315d3bee268cfc638426e8aa5.png)

现在对于这种特定情况，`<label>`标签及其内容被迫适应大小的 96%，`<fieldset>`无论它是什么，并且由于`<fieldset>`是向左浮动，因此不再`<fieldset>`向左浮动并且其宽度小于 this 和 100 的差异% 将适合同一水平，这是我的目标。

显然，Firefox 并没有强制`<label>`标签服从其父`<fieldset>`标签。相反，它被迫`<fieldset>`适应`<label>`。也许`<label>`是`css`我不知道的风格。

感谢所有试图提供帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:08:11.477

> 当您在 CSS 中为元素指定 100% 的宽度时，您基本上是在说“使该元素的内容区域与其父元素的显式宽度完全相等，但前提是其父元素具有显式宽度。”</p>

这意味着如果您的父容器的宽度没有明确设置，即`width:400px`它不应该按预期工作（不同的浏览器表现不同），因为`values set in Percentage`子元素首先计算父容器的尺寸，然后子元素应用它的尺寸，说宽度。

[**你可以阅读这个**](http://www.impressivewebs.com/width-100-percent-css/)。

您也可以使用[**css reset**](http://meyerweb.com/eric/tools/css/reset/)使所有浏览器的 css 保持一致。

# php - 如何使用 PHP 代码从 mongodb 中名为 group 的集合中获取数据

> ID：11456267
> 
> 赞同：2
> 
> 时间：2012-07-12T16:22:19.267
> 
> 标签：php, mongodb, drupal-7

这是我从 mongodb 中的集合中获取数据的 PHP 代码：

```
$m = new Mongo('localhost');
$m->connect();
$db = $m->mydb;
$collection = $db->fields_current;
$cursor = $collection->find();
foreach ($cursor as $obj) {
    echo $obj["title"] . "\n";
} 
```

该代码适用于集合`fields_current`。但是，我有一个这样的集合，集合的命名组在`fields_current.node`哪里。`node`如何从命名组中获取数据。

**编辑：**

在遵循 PeterM 的回答后，我得到了一个空的 MongoCursor 对象。这是我的新代码：

```
$m = new Mongo('localhost');
$m->connect();
$db = $m->mydb;
$collection = $db->fields_current;
$query = array(array('group_name' => 'node', 'type' => 'content-type'), array('title' => 1)); // SELECT title FROM fields_current WHERE group_name = 'node' AND type = 'content-type'
$cursor = $collection->find($query);
foreach ($cursor as $obj) {
    echo $obj["title"] . "\n";
} 
```

*更多细节*：我正在使用 Drupal 并`node`指的是“节点”表，`type`是“节点类型”。集合名称是`fields_current.node`，记录结构是这样的：

```
array (
  '_id' => new MongoInt32(37),
  '_type' => 'node',
  '_bundle' => 'content-type',
  '_revision_id' => new MongoInt32(37),
  'nid' => new MongoInt32(37),
  'vid' => new MongoInt32(37),
  'type' => 'content-type',
  'language' => 'und',
  'title' => 'title',
  'uid' => new MongoInt32(1),
  'status' => new MongoInt32(1),
  'created' => new MongoInt32(1342065549),
  'changed' => new MongoInt32(1342065549),
  'comment' => new MongoInt32(1),
  'promote' => new MongoInt32(0),
  'sticky' => new MongoInt32(0),
  'tnid' => new MongoInt32(0),
  'translate' => new MongoInt32(0),
  'field_cutom_field' => 
  array (
    'value' => 'foobar',
  ),
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:50:16.010

```
$cursor = $collection->find(array('node' => 'group_name')); 
```

有关更多示例，请参见[http://www.php.net/manual/en/mongo.sqltomongo.php](http://www.php.net/manual/en/mongo.sqltomongo.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:10:27.677

由于它是 Drupal，因此您不必指定数据库名称，就像为 MySql 编写查询一样。还有一个不同的函数来获取一个集合对象。

```
// Suppose you have a collection called 'collection_name', then you can get its object using this code.
$collection = mongodb_collection('collection_name');

// Suppose you have a collection called 'collection_name.group', where 'group' is the named group of this collection, then you can get its object using this code.
$collection = mongodb_collection('collection_name', 'group');

// Rest of the operations will be same.
$cursor = $collection->find(array('type' => 'content-type'));
foreach ($cursor as $obj) {
  ....
  // Do your work...
  ....
} 
```

# neo4j - 从不同机器迁移neo4j

> ID：11456268
> 
> 赞同：0
> 
> 时间：2012-07-12T16:22:23.210
> 
> 标签：neo4j

我在 Windows 机器上有 neo4j 1.8.M05。我已经在 linux 机器（ubuntu）上安装了相同的版本，并且想将数据迁移到 linux。我应该 xcopy /data 文件夹吗？只是/data/graph.db？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:56:19.397

[正如迈克尔](https://groups.google.com/forum/#!topic/neo4j/6Cu7MYi_Sk4)提到的那样，只是 /data/graph.db 工作正常

# c# - 每当对表单内的文本框、组合框等进行任何更改时都会触发事件

> ID：11456272
> 
> 赞同：5
> 
> 时间：2012-07-12T16:22:41.140
> 
> 标签：c#, winforms, events

我正在使用 C# WinForm。它有十几个文本框、组合框和复选框。winform 显示从数据库中检索到的信息。表单上有一个已禁用的保存按钮。我希望能够在更改任何文本框/组合框/复选框时启用它。

有没有一种简单的方法可以做到这一点，而无需为每个项目添加单独的事件处理程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:30:35.863

这里足以让你目瞪口呆。您可能需要根据需要为其他类型添加额外的`foreach`循环。好处是，使用这种方法，您只需要为每种类型而不是每个实例`control`编写几行代码。`Control`

```
private void addHandlers()
{
    foreach (TextBox control in Controls.OfType<TextBox>())
    {
        control.TextChanged += new EventHandler(OnContentChanged);
    }
    foreach (ComboBox control in Controls.OfType<ComboBox>())
    {
        control.SelectedIndexChanged += new EventHandler(OnContentChanged);
    }
    foreach (CheckBox control in Controls.OfType<CheckBox>())
    {
        control.CheckedChanged += new EventHandler(OnContentChanged);
    }
}

protected void OnContentChanged(object sender, EventArgs e)
{
    if (ContentChanged != null)
        ContentChanged(this, new EventArgs());
}

public event EventHandler ContentChanged; 
```

在修改`addHandlers`方法以支持所有控件并在将所有控件添加到表单后调用它之后，您可以简单地订阅`ContentChanged`事件，以便在表单上的某些内容发生更改时执行任何可能需要发生的事情（即启用/禁用保存按钮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:31:51.653

您必须通过控件并将更改事件附加到每个控件。本文[**讨论**](http://www.codeproject.com/Articles/38756/Two-Simple-Approaches-to-WinForms-Dirty-Tracking)了类似的情况。

```
private void AssignHandlersForControlCollection(
       Control.ControlCollection coll)
  {
      foreach (Control c in coll)
      {
          if (c is TextBox)
              (c as TextBox).TextChanged 
                += new EventHandler(SimpleDirtyTracker_TextChanged);

          if (c is CheckBox)
              (c as CheckBox).CheckedChanged 
                += new EventHandler(SimpleDirtyTracker_CheckedChanged);

          // ... apply for other desired input types similarly ...

          // recurively apply to inner collections
          if (c.HasChildren)
              AssignHandlersForControlCollection(c.Controls);
      }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:28:04.227

您可以编写一个通用的事件处理程序来处理所有事件的事件，但是唉，不，没有办法在 Visual Studio 中自动生成事件处理程序（也不应该有）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:28:25.040

您可以将所有事件连接到一个处理程序，只需让它们都调用相同的函数，您有一个布尔标志 mbSomethingChanged = true 并启用保存按钮。如果要提醒用户保存，请检查表单关闭上的标志。

# eclipse - Eclipse 远程搜索已取消

> ID：11456277
> 
> 赞同：0
> 
> 时间：2012-07-12T16:22:59.337
> 
> 标签：eclipse

我对 Eclipse 很陌生。我正在尝试使用 CTRL+H 在我的 C:/SomeFolder 驱动器中进行基本的远程搜索，但是每当我执行搜索时，搜索会在 2 秒左右后自动取消。您知道为什么会发生这种情况以及我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:35:55.633

我选择了“搜索存档文件”。一旦我取消选中它，一切正常。

# iphone - 如何在 WebView 完成加载后运行代码。

> ID：11456279
> 
> 赞同：0
> 
> 时间：2012-07-12T16:23:15.677
> 
> 标签：iphone, ios, xcode, uiwebview

我的应用程序中有 2 个 WebView。一个是加载 youtube 视频，另一个是加载活动日历。我想显示一个自定义的“正在加载”图像，直到 Web 视图中的数据完成加载。

我在尝试

```
while([youtubeView isLoading]){
        NSLog(@"youtubeVideo is loading");
        [loadingImage setHidden:NO];
    }
    [loadingImage setHidden:YES]; 
```

在 viewDidLoad 但它不起作用。

实现我想要实现的目标的最佳方法是什么？

干杯，我的啤酒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:28:24.993

使用下面的 UIWebViewDelegate 方法。一旦 webView 完成加载，它就会被调用。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
    {
        if(youtubeView isEqual:webView)
        {
           loadingImage.hidden = YES;
        }
    } 
```

另请注意，您的类需要符合 UIWebViewDelegate 并且您的两个 webview 都应将委托设置为该类的对象。

```
@interface YourViewController : UIViewController <UIWebViewDelegate>
{
    UIWebView *youtubeView;
}
@end 
```

在您创建 UIWebView youtubeView 的内部方法

```
youtubeView.delegate = self; 
```

啤酒 ？

# java - 标准、独立子查询、分组依据和更多

> ID：11456286
> 
> 赞同：1
> 
> 时间：2012-07-12T16:23:29.110
> 
> 标签：java, hibernate

我有一个与颜色表有关系的产品表

一个产品可以有多种颜色... exp: 产品A：有红色、绿色、蓝色、黄色。

```
Product
-----------
ProductID
Name

Color
-----------
ProjectID
Color 
```

我希望找到至少包含红色和绿色的产品

对于动态大小，我还希望添加 name = "doggy"

SQL 语句是

```
select * from product pd where pd.ProductID = (select cr.productID from color cr where cr.color="RED" or cr.color="GREEN" group by  cr.productID having rowcount=2)
and name like '%doggy' 
```

如何在没有依赖子查询的情况下创建条件。

问题链接到

1)[标准、子查询、分组依据和更多](https://stackoverflow.com/questions/11426562/criteria-subqueries-group-by-and-having-more/11427513#comment15074949_11427513)

2)[使用 AND 条件进行一对多搜索](https://stackoverflow.com/questions/11409302/one-to-many-search-using-and-condition/11411560#comment15076601_11411560)

如您所见，这个问题没有好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:18:22.643

```
DetachedCriteria colorCrit = DetachedCriteria.For(Product.class)
    .createAlias("colors","color")
    .add(Restriction.eq("color.color", "RED")
    .add(Restriction.eq("color.color", "GREEN")
    .SetProjection(new GroupByHavingProjection("id", Projections.count("id"), "=", 2));

Criteria criteria = createCriteria()
    .add(Subqueries.in("id", colorCrit)
    .list(); 
```

使用[此处](https://hibernate.onjira.com/browse/HHH-1043?focusedCommentId=35459&page=com.atlassian.jira.plugin.system.issuetabpanels%253Acomment-tabpanel#action_35459)的 groupbyhave 实现，如下所示：

```
// (c) 2008-2010 FURTHeR Project, Health Sciences IT, University of Utah<br>
import org.hibernate.Criteria;
import org.hibernate.HibernateException;
import org.hibernate.criterion.CriteriaQuery;
import org.hibernate.criterion.Projection;
import org.hibernate.criterion.PropertyProjection;

public class GroupByHavingProjection extends PropertyProjection
{
    private static final long serialVersionUID = -3316795021430206470L;

    private final Projection havingProjection;
    private final String groupByProperty;
    private String op;
    private Object value;

    public GroupByHavingProjection(final String groupByProperty, final Projection projection, final String op, final Object value)
    {
        super(groupByProperty, true);
        this.projection = projection;
        this.groupByProperty = groupByProperty;
        this.op = op;
        this.value = value;
    }
} 
```

# java - 如何从 glassfish 服务器发送邮件？

> ID：11456295
> 
> 赞同：1
> 
> 时间：2012-07-12T16:23:54.113
> 
> 标签：java, email, glassfish

如何使用始终在 glassfish 服务器上运行的 java 邮件 API 编写邮件应用程序，并在数据库中搜索特定时间并在该时间发送邮件。我有用 JSF 编写的 Web 应用程序，需要在数据库中给定的特定时间发送邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:32:30.573

对于 gmail，请使用以下代码

```
import org.apache.commons.mail.*;

public class GmailEmailWorking {

    public static void main(String[] args) {
        String myEmailId = "xyz@gmail.com";
        String myPassword = "password";
        String senderId = "xyz@yahoo.com";
        try {
            MultiPartEmail email = new MultiPartEmail();
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(myEmailId, myPassword));
            email.setDebug(true);
            email.setHostName("smtp.gmail.com");
            email.setFrom(myEmailId);
            email.setSubject("Hi");
            email.setMsg("This is a test mail ... :-)\n\nPlease check attachements that I have sent.\n\nThanks,\nFahim");
            email.addTo(senderId);
            email.setTLS(true);

            EmailAttachment attachment = new EmailAttachment();
            attachment.setPath("/Users/fahadparkar/Desktop/Fahim/tables.xlsx");
            attachment.setDisposition(EmailAttachment.ATTACHMENT);
            attachment.setDescription("Excel");
            attachment.setName("tables.xlsx");
            email.attach(attachment);

            email.send();
            System.out.println("Mail sent!");
        } catch (Exception e) {
            System.out.println("Exception :: " + e);
        }
    }
} 
```

以下是您需要的 jar 文件列表

*   [commons-email-1.2.jar](http://www.java2s.com/Code/Jar/c/Downloadcommonsemail12jar.htm)
*   [激活.jar](http://www.java2s.com/Code/Jar/a/Downloadactivationjar.htm)
*   [邮件.jar](http://www.java2s.com/Code/Jar/m/Downloadmailjar.htm)

***要从其他服务器发送，您需要在以下行进行更改***

```
email.setSmtpPort(587);
email.setHostName("smtp.gmail.com"); 
```

# android - 如何将GPS系统服务放在本地服务中，以便可以将其杀死以关闭GPS

> ID：11456296
> 
> 赞同：1
> 
> 时间：2012-07-12T16:23:59.853
> 
> 标签：android, gps

像许多其他人一样，我想要一个退出按钮，当用户离开应用程序时它会关闭 GPS 以节省电池寿命。基本上发布了许多讨论，说这无法完成，但我有一个应用程序可以这样做，因此继续尝试寻找方法。该应用程序的开发人员告诉我，他在他编写的服务中运行内部 GPS，并且他的退出键杀死了该服务和 vola，GPS 指示灯立即熄灭。

我的应用程序对时间非常敏感，我想使用我现在在使用系统服务的 LocationListener 部分时使用的 onLocationChanged 等价物，但将系统服务放在我编写的服务中，以便我可以杀死它。

然后我的问题是，我能否将系统 GPS 服务放入本地服务中而不会增加任何明显的延迟，而无需轮询本地服务以获取更新。任何有关我如何做到这一点的帮助将不胜感激，因为这是我的第一个 Android 应用程序，虽然我编写了大量的 C 和 PHP 代码，但这是一个新领域，有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:03:47.697

> 像许多其他人一样，我想要一个可以关闭 GPS 的退出按钮

您不能“关闭 GPS”。您可以告诉 Android*您的应用*不再需要 GPS（例如，您不再需要 GPS 更新）。*然后， Android*将确定是否关闭 GPS 无线电，这取决于目前可能尝试使用 GPS 的其他设备。

> 当用户离开应用程序以节省电池寿命时。

您不需要为此使用按钮。只有一项活动需要 GPS 访问的简单应用程序可以简单地请求位置更新`onResume()`并将其删除`onPause()`。更复杂的应用程序可能会在第一个`onResume()`需要它们时请求位置更新，然后在 中删除这些更新`onUserLeaveHint()`，或者对恢复/暂停操作进行引用计数以确定何时删除更新。

在某些情况下，您确实希望用户必须通过单击按钮明确地说“停止使用 GPS”，但如果可以避免，请这样做。

> 该应用程序的开发人员告诉我，他在他编写的服务中运行内部 GPS，并且他的退出键杀死了该服务和 vola，GPS 指示灯立即熄灭。

开发人员需要以某种方式确定何时启动和停止此服务。他们可以请求和删除位置更新，而不是启动和停止服务，并具有相同的效果，同时消耗更少的堆空间，并降低用户使用任务杀手和强制停止按钮攻击您的可能性。

恕我直言，使用具有位置更新的服务的唯一原因是因为您特别希望在后台使用位置信息而周围没有活动。

# stored-procedures - 如何使用 openJPA 调用存储过程并映射到现有实体

> ID：11456299
> 
> 赞同：0
> 
> 时间：2012-07-12T16:24:09.907
> 
> 标签：stored-procedures, openjpa

我想弄清楚如何使用 openJPA 调用存储过程

我怎么做？我认为这与调用 namedQuery 相同，但我无法在网上找到可以执行此操作的任何地方。我找不到一个教程。

另外，如何将其映射到现有实体？只要有一个`("nameOfStoredProc", NameOfEntity.class)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:36:59.693

来自 OpenJPA 用户手册....[创建 SQL 查询](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#jpa_overview_sqlquery_create)

> 除了 SELECT 语句之外，OpenJPA 还支持将存储过程调用作为 SQL 查询。OpenJPA 将假定任何不以 SELECT 关键字（忽略大小写）开头的 SQL 都是存储过程调用，并在 JDBC 级别调用它。

```
EntityManager em = ...;
Query query = em.createNativeQuery("StoredProcName", Magazine.class);
processMagazines(query.getResultList()); 
```

# javascript - Flask、html 和 javascript 桌面应用程序

> ID：11456302
> 
> 赞同：3
> 
> 时间：2012-07-12T16:24:17.630
> 
> 标签：javascript, python, html, flask

我想使用 python、html 和 javascript 构建一个桌面应用程序。到目前为止，我已经按照烧瓶上的 tuts 并有一个 hello world 工作示例。我现在应该怎么做才能让它工作？html 文件如何与它们下面的 python 脚本“对话”？

到目前为止，这是我的代码：

```
from flask import Flask, url_for, render_template, redirect
app = Flask(__name__)

@app.route('/hello/')
@app.route('/hello/<name>')
def hello(name=None):
    return render_template('hello.html', name=name)

@app.route('/')
def index():
    return redirect(url_for('init'))

@app.route('/init/')
def init():
    css = url_for('static', filename='zaab.css')
    return render_template('init.html', csse=css)

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:44:16.890

您可以像在 Jinja 模板中一样使用 HTML 表单 - 然后在您的处理程序中使用以下内容：

```
from flask import Flask, url_for, render_template, redirect
from flask import request # <-- add this

# ... snip setup code ...

# We need to specify the methods that we accept
@app.route("/test-post", methods=["GET","POST"])
def test_post():
    # method tells us if the user submitted the form
    if request.method == "POST":
        name = request.form.name
        email = request.form.email
    return render_template("form_page.html", name=name, email=email) 
```

如果您想使用`GET`instaed of`POST`提交表单，您只需检查`request.args`而不是`request.form`（有关更多信息，请参阅[`flask.Request`的文档](http://flask.pocoo.org/docs/api/#flask.Request)）。但是，如果您打算对表单做很多事情，我建议您查看优秀的[WTForms](http://wtforms.simplecodes.com/)项目和[Flask-WTForms 扩展](http://packages.python.org/Flask-WTF/)。

# jsp - 在jsp中的特定条件下自动执行Bean方法

> ID：11456311
> 
> 赞同：0
> 
> 时间：2012-07-12T16:24:43.840
> 
> 标签：jsp, jsf

我需要检查以下情况，

```
if (request.getParameter("onumber") != null && request.getParameter("onumber") != "" && request.getParameter("ocode") != null && request.getParameter("ocode") != "") { 
```

如果为真，我需要自动调用 StatusBean 的 submit() 方法。

我在没有测试 onnumber 和 ocode 条件的情况下尝试如下，但它不起作用。我错过了什么吗？

```
<script type="text/javascript">

function test() {
alert("Called test"); //This is not even called
document.getElementById('LoginForm:submitButton1').click();
}

</script>

<body onload="test();">

<f:view>

<h:form id="LoginForm" onsubmit="return validateLoginForm();">
<h:commandButton style="display:none" action="#{StatusBean.submit}" id="submitButton1"/>
...
...
</h:form>

</f:view>

</body> 
```

另外请让我知道如何使用 onnumber 和 ocode 条件进行测试。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:52:57.337

抱歉，上面的代码不起作用，但是这段代码可以。它和你的几乎一模一样。不知道为什么你的不是。

```
<!DOCTYPE html>
<html xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
 <h:head>
  <link rel="stylesheet" type="text/css" href="themes/local/tinstyle.css"/>
 </h:head>
 <script type="text/javascript">
 function doSubmit() {
  document.getElementById('mmTestForm:delBtn').click();
 }
 </script>
 <h:body onload="doSubmit()">
 <h:form id="mmTestForm" action="#{mmTestBean.delete}">
 <p:commandButton id="delBtn" value="" action="#{mmTestBean.delete}" ajax="false" />  
 </h:form>
 </h:body>
  </html>

package gov.irs.eservices.tin.mbeans;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name="mmTestBean")
@SessionScoped
public class MMTestBean {

 public String delete() {
      System.out.println("here");
      return "mainmenu";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:49:47.793

您可以获取查询参数并将它们存储在支持 bean 中，并且仅当它们都像这样传递时才启用按钮：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
  <f:metadata>
    <f:viewParam name="onumber" value="#{userBean.onumber}"/>
    <f:viewParam name="ocode" value="#{userBean.ocode}"/>
  </f:metadata>
<h:head>
  <title>Welcome</title>
</h:head>
<h:body>
  <h:form prependId="false">
      <h:commandButton  value="Submit" disabled="#{ empty userBean.onumber or empty userBean.ocode}" />
  </h:form>
</h:body> 
```

并为支持 bean 中的参数创建 setter/getter：

```
public class UserBean implements Serializable {
private static final long serialVersionUID = 1L;
private String ocode;
private String onumber;
    public String getOcode() {
    return ocode;
}
public void setOcode(String ocode) {
    this.ocode = ocode;
}
public String getOnumber() {
    return onumber;
}
public void setOnumber(String onumber) {
    this.onumber = onumber;
}
} 
```

# ios - Xcode突然停止在硬件上运行项目：“无法启动xxx.app：..没有这样的文件..”

> ID：11456312
> 
> 赞同：139
> 
> 时间：2012-07-12T16:24:51.280
> 
> 标签：ios, xcode

Xcode 已经停止运行我的应用程序，它在我从设备中删除它并尝试通过在 Xcode 中重新运行它来重新安装后直接启动（我以前做过数百次）。

它说

> “无法启动 XXX.app”
> 
> “没有这样的文件或目录（/Users/Mylaptop/Library/Developer/Xcode/DerivedData/MyApp-ekxcbebfpzkahtfkujyqkcwprzia/Build/Products/Debug-iphoneos/MyApps.app/MyApp）。”

我重新启动了手机，重新启动了 Xcode，清理了一切，重建了一切。此错误消息不会消失。

这是我自推出以来一直在使用的 Xcode 4.5，如果我恢复到 4.3.2，那么 Xcode 会显示“已完成运行应用程序”，但它实际上并没有做任何事情——该应用程序既没有安装也没有运行。

我完全陷入困境 - 无法再在设备上运行任何东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-09-26T05:58:47.223

这真的很烦人。此错误发生在许多不同的情况下。有时重新启动 Xcode 可以解决问题。如果没有，请按照下列步骤操作：

断开您的设备。

从您的设备中删除该应用程序。

退出 Xcode（不要只是简单地关闭窗口，退出它）

删除派生数据文件夹（`~/Library/Developer/Xcode/DerivedData/-gbrvhlvwmpiobxdujegtghggrffp`- 或类似的东西）

现在再次启动 Xcode，连接设备并运行项目。它应该可以正常工作。

来自 DhilipSiva[博客](http://dhilipsiva.com/2012/07/24/xcode-could-not-launch-app-no-such-file-or-directory-error.html)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-09-02T15:39:26.673

尝试删除 -Info.plist 文件中的“所需设备功能”。

您不能在 3G 上要求 armv7，也不能在任何较新的设备上要求 armv6，因此只需完全删除此属性。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-08-28T02:42:03.343

我找到了答案。iOS 部署目标的版本与我设备的操作系统版本不同。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-16T08:50:29.370

首先使用 info.plists 尝试上述一些方法并删除派生数据、清理等。

我的解决方案：退出 XCode，重新打开项目。转到 Finder 中的派生数据。已删除所有项目的数据（都是可回收的，但我会先尝试删除您有问题的项目数据）。然后它又起作用了。从 XCode 中删除派生数据不起作用。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-01T13:26:46.837

以下解决了我的问题......我的应用程序在调试/发布中为我工作，然后我构建了一些临时存档并且调试/发布版本停止工作。

症状：

*   从 Xcode 启动到设备时出现无效权利错误（使用权利播放...）
*   运行模拟器时立即中止且没有错误（已完成运行）
*   无法启动...目录blabla.../build/product/debug-iphoneos/...从Xcode 启动到设备时找不到。

最终在尝试从其他人的痛苦中受益之后，我在 Targets [AppName] 中发现：

```
Build Settings
Build Locations
Build Products Path build 
```

应该

```
Build Products Path build/Products 
```

不知道这是如何设置错误的。这必须在 Xcode/Springboard 中的某个地方进行硬编码，因为“产品”同时出现在 Xcode 和设备控制台中。这是 Xcode 4.5.1。

![在哪里设置构建/产品的屏幕截图](../Images/070e7ad180a11c3865addf1429a3cc33.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-10-18T13:44:31.990

我解决了这个问题

> 重命名我的 XCode 项目上方的目录

更改项目的名称`XCode`为我修复了它。

> 在`XCode`中，在 Project Navigator 下，单击项目名称，它应该可以让您重命名它，就像 Finder 中的文件一样。删除派生数据没有帮助。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-31T15:45:29.300

我用 CMake 构建了我的 XCode 项目，并以某种方式（或我愚蠢的自己）删除或清空了 info.plist 中的属性“可执行文件”。我将它设置回 ${EXECUTABLE_NAME} 并且它再次工作。

花了我很多时间处理所有建议和修复，直到我最终发现这个问题。

希望这会帮助一些在同样问题上苦苦挣扎的人

**编辑：**

CMake 在某种程度上弄乱了我的 plist 文件。我创建了自己的 Info.plist 并按以下方式使用它：

```
SET_TARGET_PROPERTIES( MyApp PROPERTIES MACOSX_BUNDLE_INFO_PLIST ${CMAKE_CURRENT_LIST_DIR}/MyApp.plist ) 
```

在我的 plist 中，我有这个条目：

```
<key>CFBundleExecutable</key> <string>${EXECUTABLE_NAME}</string> 
```

不幸的是，CMake 似乎仍然解析该文件并将 ${EXECUTABLE_NAME} 替换为空字符串，因为它是 CMake 变量语法。我的快速解决方法如下：

```
SET( EXECUTABLE_NAME "\${EXECUTABLE_NAME}" ) 
```

现在它就像一个魅力。

我可能只有这个问题，但谁知道呢。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-07-31T18:28:55.103

我有同样的问题，但在我的情况下，我的 info.plist 中有错误的要求（iPhone 3Gs 需要陀螺仪）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-11-09T20:29:49.300

对我来说，解决方案就是使用正确的（非分发）配置文件。

我默认始终使用我的临时配置文件，但后来我改为使用我的开发人员配置文件（团队配置文件）并且解决了问题。为了安全起见，我继续清理了派生数据目录，但我不确定是否需要它。

XCode 曾经有一个警告，告诉您使用正确的配置文件，但该错误消息似乎在 XCode 4.5 中消失了。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-01-30T10:58:07.507

我通过一个非常奇怪的解决方案遇到了这个问题。

我的问题略有不同，因为我在钥匙串中有 2 个开发人员证书。我们有两个开发者帐户（比如说 AD 和 BD）。

1）我确实将捆绑标识符从 com.BD.game 更改为 com.AD.game 2）我遇到问题的设备仅在 AD 配置文件中登录。3) 我无法在 iPad 上调试游戏——尽管设备有有效的配置文件，我有有效的证书，我重新启动了 Mac、设备、重新安装了 Xcode……没有任何帮助。

我今天所做的是检查 project.pbxproj 文件中是否有任何奇怪的条目。

我发现 Xcode 使用了正确的配置文件，但使用错误的证书签署了 ipa/app。

```
"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer: **BD** (XX******)"; 
```

在我手动更正名称和 ID 后；一切都像魅力一样。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-08-14T06:49:50.777

我得到了同样的错误。在我的情况下，我将部署目标设置为 6.1 并尝试运行 iOS 5.1 iPad。当我将部署目标更改为 4.3 时，问题解决了。

* * *

仍然有问题。试试这个断开您的设备。从您的设备中删除该应用程序。退出 xcode。现在启动 Xcode，连接设备并运行项目。它应该可以正常工作。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-09-26T19:03:19.500

对我来说（使用 IOS 7 和 Xcode 5），当我在 Organizer 中使用我的设备“添加到会员中心”后，错误就消失了。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-10-29T06:52:17.113

您需要将部署目标设置为低于您设备的版本

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2012-09-27T10:00:53.003

我试图在与开发项目不同的系统上运行我的项目。我收到“无法启动 xxx.app：.. 没有这样的文件..”。

从设备中删除了应用程序，然后从应用程序的 xcode 中的管理器中删除了派生数据。组织者-->项目-->派生数据-->删除

我的问题解决了。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-09-17T20:41:14.897

我想提一下，在 Finder 中打开 DerivedData 文件夹的最简单方法如下：

1.  打开管理器。
2.  点击“项目”。
3.  选择有问题的项目。
4.  在 DerivedData 的路径旁边，单击小右箭头按钮。

删除 DerivedData 文件夹的内容对我有用。而不是使用“删除...”按钮，您应该更成功地通过 Finder 手动删除文件。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-10-08T17:23:11.317

转到：您的项目目标 - > 信息，然后从自定义 iOS 目标属性中删除所需的设备功能。在我的情况下，是 armv7 和 armv7s。

之后，该应用程序在我的 iPhone 4 上成功构建。

[这就是我删除这两个要求后的样子](http://i.stack.imgur.com/TJOYh.png)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-06-09T07:22:47.397

我尝试了以上所有方法，但它仍然无法运行。我通过更改派生的构建位置解决了这个问题。文件>项目设置>“派生数据位置”更改为项目相关。或者您可以确保默认路径具有读/写权限。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2013-01-28T08:04:00.390

对我来说重新启动 Xcode，在大多数情况下清理 DerivedData 和重新启动设备是不够的，直到我发现 iTunes 也在运行，并且在退出 iTunes 后一切正常！

所以我现在的步骤很简单：

**1\. 退出 Xcode。**
**2\. 如果 iTunes 正在运行，请退出 iTunes。**
**3\. 重新打开项目。**

无需从设备中删除应用程序、清理项目或重新启动/断开设备。我认为这是因为 Xcode 和 iTunes 使用了一些通用库（如您所知，Xcode Installer 在安装 iOS SDK 时总是要求退出 iTunes）。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-01-11T00:27:37.807

对我来说，我忘记了 info.plist 的“所需设备功能”中有“电话”。删除了它，它终于在我的 iPad 上运行了。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2013-03-26T21:42:54.050

我遇到了这个问题并尝试了一些对我不起作用的建议 - 然后我找到了关于删除 -Info.plist 文件中的“所需设备功能”的建议（对我来说包括位置服务和 gps）那行得通！然后我重新添加了它们，它仍然有效..去图。这是 xCode 4.6.1，我的应用是 Phonegap/Cordova 的开发人员

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2012-12-24T20:03:07.423

删除派生数据文件夹对我没有帮助。使用 Xcode 4.4.2*唯一*的解决方案是打开 Organizer 并删除 iDevice 上旧的过期和无关的配置文件。然后一切都再次完美运行。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-01-06T16:11:33.713

这可能是一个红鲱鱼，但我在删除默认图像之前添加自定义启动图像时遇到了这些问题。删除默认启动和自定义图像，然后重新添加自定义图像为我修复了它。我正在使用 iOS 6 和 Xcode 4.5.2

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-01-13T18:10:14.023

似乎有一些不同的事情会导致这个非常有用的错误消息。

对我来说，这归结为 Info.plist 中的“所需设备功能”不正确。我错误地添加了一个空白数组项（在架构之上，armv7）。删除了空白数组项，现在一切正常！

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2012-10-09T19:41:22.967

这似乎很明显，但您还必须将部署目标设置为设备运行的操作系统。

因此，如果您升级到 iOS 6，它会将您的部署目标设置为 iOS 6。如果您正在测试的设备仍运行 5.1，则您需要部署到 5.1。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2013-05-21T23:35:09.663

就我而言，我只是将 777 权限直接设置为 xxx.app 文件夹以访问所有文件并工作！

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2013-05-15T13:35:36.483

面临同样的问题，但现在问题解决了，我删除了`Executable file` info.plist。我将它设置回 ${EXECUTABLE_NAME} 并且它再次工作.. :)

![在此处输入图像描述](../Images/8938493e2c83ad4d04853738b34b859c.png)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2012-09-21T19:21:00.623

我的问题似乎是在我的 plist 中选择“支持的界面方向”中的“人像”（顶部主页按钮）作为第 0 项。删除它或将其向下移动似乎可以解决我的问题。去搞清楚。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2012-11-06T22:26:08.317

通过检查以确保我的文件部分中的`productName`属性与属性匹配，我的问题终于得到了解决。`/* Begin PBXNativeTarget section */``project.pbxproj``name`

一旦编辑它以使它们相同，Xcode 终于可以在我的设备上正确运行该应用程序了！

感谢 Max Weisel 帮助我！:D

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2012-09-24T15:29:22.940

对于仅在我的 iPhone 上使用 Xcode 4.5 的通用应用程序，我也遇到了这个问题，我有两个调试设备：

```
iPhone 4 iOS 5.1.1
iPad 1   iOS 5.1.1 
```

Info.plist 在“所需设备功能”下有一个空条目我知道我没有输入这个空的“项目 0”。自从我删除了空项目后，该应用程序在 iPhone 上加载。我在几个早期版本的 Xcode 中都没有遇到这个问题，这意味着 Xcode 4.5 对我使用的两个设备处理这个“插入”项目的方式不同。我以前错了，但这似乎是 Xcode 4.5 中的一个错误。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2013-05-11T05:57:50.027

我遇到了这个问题，除了：我的问题在更改 info.plist 的内容后开始出现，并且没有任何恢复有帮助。

为我解决的问题是：

1.  在一个全新的项目中创建一个 vanilla info.plist
2.  用新的替换旧的 info.plist
3.  重命名它（如 app_info.plist）
4.  将 Build Settings/Packaging/INFOPLIST_FILE 设置为新的。
5.  进行项目所需的所有更改

希望有帮助。我尝试了这里建议的所有其他方法，这对我来说是唯一的解决方案。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2012-07-26T11:01:30.600

我正在使用工作区。主项目与一些图书馆项目相关联。最初项目运行良好。突然，它跑到了顶峰。一段时间后，我注意到构建项目的目标以某种方式从主项目更改为禁用运行选项的库项目。将 taret 更改为 Main 项目已修复它。我仍然想知道它是如何改变的。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2012-07-24T23:05:40.663

我通过在构建设置中选择“无”作为我的可执行文件、关闭 xcode 并从 ~/Library/Developer/Xcode/DerivedData 手动删除所有派生数据，然后在重新启动 xcode 后选择默认可执行文件来解决了这个问题。不过，不太确定是什么原因造成的。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2012-07-29T22:06:45.390

我遇到了同样的问题，只是该项目在其中一个测试 iPhone 上运行，而不是在另一个上运行。该错误与您发布的错误完全相同。问题在于，在 Build Settings > iOS Deployment Target 中，它被设置为 5.1，并且只有一台设备具有该操作系统。在我将其更改为 5.0 后，两个设备都运行良好。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-04-12T06:00:03.947

没有任何！以上答案对我有用。我刚刚做了->转到您的主项目目标->“构建阶段”->“目标依赖项”添加您的项目依赖项（如果有）。

项目确实像魅力一样运行:)

# iphone - 视图未正确旋转

> ID：11456313
> 
> 赞同：0
> 
> 时间：2012-07-12T16:24:53.133
> 
> 标签：iphone, objective-c, ios, uiview, rotation

我在子类中有这段代码`UIViewController`：

```
- (id)init {
    self = [super init];

    if (self) {            
        self.view.frame = [PDToolbox screenFrame];
        self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        self.view.backgroundColor = [UIColor redColor];
    }

    return self;
} 
```

就任何旋转方法而言，我唯一拥有的是：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

然而，在屏幕旋转到横向后，在视图上执行 NSLog 会显示：

```
<UIView: 0x10061640; frame = (0 0; 320 480); transform = [0, -1, 1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0x10061670>> 
```

我不明白它为什么要进行这种转换，而不是像平常一样旋转？这意味着我在旋转后放置在其顶部并设置为视图大小的任何视图最终都位于 320x480 位置。

编辑：

人们不理解。所以我在它上面放了一个视图，与 UIView 大小相同，使用：

```
UIView *anotherView = [UIView alloc] initWithFrame:controller.view.bounds];
[controller.view addSubview:anotherView]; 
```

如果我以纵向添加另一个视图，则另一个视图以纵向显示，框架为 320x480。

如果我在横向添加anotherView，anotherView 出现在横向中，但仍然具有320x480 的框架，因为出于某种未知原因，controller.view 的框架仍然是这样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:42:45.127

您的视图/控制器层次结构是什么样的？在我看来，某些东西正在您的视图上设置 90° 旋转变换，而不是更改视图的框架。如果您自己不这样做，则可能是父视图或视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:56:46.930

框架和边界是非常不同的东西。您应该阅读 Apple 的[View Geometry](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Coordinates/Coordinates.html)指南- 它包含许多对我来说非常宝贵的信息。

您的界限始终为 320x480，因为有人在设置您的`transform`（影响`frame`，但不影响`bounds`）。

确保您的视图控制器的视图的超级视图已`autoresizesSubviews`设置为`YES`，并且添加的任何子视图都具有适当`autoresizingMask`的 s。

# resharper - 在 64 位调试和使用 SMO API 时出现 Resharper 内部错误

> ID：11456314
> 
> 赞同：1
> 
> 时间：2012-07-12T16:24:57.717
> 
> 标签：resharper, smo, resharper-6.0

如果我使用 Resharper 调试一些单元测试，并且这些单元测试使用 SMO SDK，我会收到以下错误：

![在此处输入图像描述](../Images/d3189626798db16e8a702a41eed3900c.png)

知道如何避免它吗？我正在运行 ReSharper 6.1.37.86（完整版）

**更新**：升级到 Resharper 6.1.1000.82 后，我得到一个稍微不同的错误： ![在此处输入图像描述](../Images/8f5508ead4e19cd3b3a40d48122b7ac1.png)

归档在 JetBrain 的问题跟踪器中：http: [//youtrack.jetbrains.com/issue/RSRP-326369](http://youtrack.jetbrains.com/issue/RSRP-326369)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:28:57.760

我设法找到了一个两步解决方法：

*   使用 .NET 3.5，而不是 .NET 4.0。

进行此更改后，调试器停止崩溃。但是，它仍然很慢，有时我的断点没有命中。要使您的调试器完全工作，需要为此解决方法执行的第二步是：

*   转到 .NET 项目的“属性”，“调试”选项卡，禁用“启用 Visual Studio 托管进程”选项

这两个更改对您的项目文件的影响的一个例子是这个差异： [https ://github.com/7digital/DatabaseMigraine/commit/badfebce8​​3a1c4e39ddfce8a707b0e0ca62ad5a0](https://github.com/7digital/DatabaseMigraine/commit/badfebce83a1c4e39ddfce8a707b0e0ca62ad5a0)

# php - 在 Zend 框架中设置 JSON 的输出样式以使 jQuery DataTables 工作

> ID：11456319
> 
> 赞同：1
> 
> 时间：2012-07-12T16:25:05.320
> 
> 标签：php, json, zend-framework, frameworks, datatables

我正在尝试使用 Zend Framework 将 jQuery DataTables 实现为“新”表单，我在控制器中设置了以下操作：

```
public function ajaxFindQuotesAction()
{
    $this        -> setNoRender();
    $quoteTable  =  new Model_QuotesTable();
    $select      =  $quoteTable->select();
    $select      -> from($quoteTable, array('qte_id', 'qte_description'));
    $rows        =  $quoteTable->fetchAll($select);
    $json        =  Zend_Json::encode($rows->toArray());
    echo($json);
} 
```

我还在视图中设置了以下代码：

```
<?php $this->inlineScript()->captureStart(); ?>
    $(document).ready(function() {
        $('#example').dataTable( {
            "bProcessing": true,
            "sAjaxSource": '/jobs/ajax-find-quotes'
        } );
    } );
<?php $this->inlineScript()->captureEnd(); ?>

<table class="display dataTable" id="example" >
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
            </tr>
         </thead>
</table> 
```

问题是，当前的 JSON 输出如下：

```
[
    {
        "column_1":"value 1",
        "column_2":"value 2"
    },
    {
        "qte_id":"3",
        "qte_description":"go to the zoo"
    }
] 
```

虽然 DataTables 需要这种格式（从示例文件复制）：

```
{
  "aaData": [
    [
      "value 1",
      "value 2"
    ],
    [
      "Trident",
      "Internet Explorer 5.0"
    ]
  ]
} 
```

有任何想法吗？非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:19:31.370

尝试：

```
$data = array_values(array_map('array_values', $rows->toArray()));
$json = Zend_Json::encode(array_combine(
            array('aaData'),
            array($data)
        )); 
```

您需要编码一个对象，该对象由作为数组的行和字段组成。问题是 PHP 的所谓数组实际上是有序映射，因此您需要摆脱关联键以在生成的 JSON 中包含数组。

# wordpress - WordPress wpAlchemy 对重复字段值进行排序

> ID：11456325
> 
> 赞同：0
> 
> 时间：2012-07-12T16:25:21.303
> 
> 标签：wordpress, sql-order-by, sorting

我什至不知道从哪里开始，所以我只想把它扔在那里。假设有一个自定义帖子类型，并且其中有一个带有重复字段的 wpAlchemy 支持的元框，一个人可以在其中添加多个附件。假设您不期望或不信任用户自己对附件进行排序，因此您想返回按值标题按字母顺序排列的附件数组。您将如何使用以下代码执行此操作？（此代码在单个页面的循环中）

```
<?php
global $attachment_repeat;
$meta = $attachment_repeat->the_meta();                                 
?>

<?php if($attachment_repeat->have_value('docs')):?>

      <ul class="attachments">                                  
<?php while( $attachment_repeat->have_fields('docs') ) : ?>

<li>
    <!--url --><a href="<?php $attachment_repeat->the_value('attachurl'); ?>" title="<?php $attachment_repeat->the_value('title'); ?>" target="_blank"><!--title --><?php $attachment_repeat->the_value('title'); ?></a>

</li>    

<?php endwhile; ?>
</ul>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:50:53.100

`$arr = $attachment_repeat->the_value('docs');`首先，如果您会看到一个关联数组，您应该获得“文档”的主数组...`var_dump($arr)`然后您可以使用 PHP 数组排序函数进行排序.. 可能是这样的：

```
usort( $arr, "custom_sort" );
function custom_sort($a,$b) {
    return strcmp( $a['title'], $b['title'] );
} 
```

# c# - 在对象初始化程序中使用变量后清除变量也会清除对象的属性吗？

> ID：11456334
> 
> 赞同：3
> 
> 时间：2012-07-12T16:25:41.980
> 
> 标签：c#, object

为什么这段代码运行后`Tags`属性为`Book`空？

```
class Program
{
    static void Main(string[] args)
    {
        List<Book> books = new List<Book>();
        List<String> tags = new List<String> {"tag1", "tag2", "tag3"};
        String title = "a title";
        books.Add(new Book
        {
            Title = title,
            Author = "an author",
            Tags = tags
        });
        Console.WriteLine("(" + title + ")");
        Console.WriteLine((books[0]).Tags.Count());

        title = String.Empty;
        tags.Clear();

        Console.WriteLine("(" + title + ")");
        Console.WriteLine((books[0]).Tags.Count());
    }
} 
```

代码`Book`：

```
public class Book
{
    public String Title { get; set; }
    public String Author { get; set; }
    public List<String> Tags { get; set; }
} 
```

运行此代码输出

```
("a title")
3
()
0 
```

是否在`tags`这里`title`通过引用传递？重命名相应的属性会产生相同的输出。

### 编辑：

我刚刚意识到我的意思是让每个`Console.WriteLine`语句都引用对象，而不仅仅是标签。我的意思是：

```
Book aBook = books[0];
Console.WriteLine("(" + aBook.Title + ")");
Console.WriteLine(aBook.Tags.Count());

title = String.Empty;
tags.Clear();

Console.WriteLine("(" + aBook.Title + ")");
Console.WriteLine(aBook.Tags.Count()); 
```

正如预期的那样，输出：

```
("a title")
3
("a title")
0 
```

但是由于我在最初的问题中犯了一个错误，因此我将其保留原样，因为所引用的答案部分`title`引用了原始代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:27:23.790

[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)是一个引用类型，所以是的，你在这里得到引用语义。

如果您希望它们独立，则需要为该属性分配一份*副本。*`tags`

```
Tags = new List<string>(tags); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:29:40.573

`Tags`您的`Book`对象的属性引用与您在第二行代码 ( )中创建的列表**相同的对象实例。**`List<String> tags = new List<String> {"tag1", "tag2", "tag3"};`

当你写的时候`Tags = tags`，你实际上是在说 that`Tags` *指向*同一个实例`tags`。

这就是为什么当你清除时`tags`，`Tags`也被清除，因为它是**同一个对象引用**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:31:28.717

> 标签和标题是否在这里通过引用传递？

是的。

但是，混淆（基于注释）似乎是由于代码中的方式`Tags`和`Title`行为不同造成的。

`Tags`执行时和执行时的行为差异`Title`：

```
title = String.Empty;
tags.Clear(); 
```

是因为在第一种情况下，您正在为标题分配一个全新的实例。但是，当您调用`tags.Clear()`时，您正在*改变现有的 instance*，它与`Tags`内部的属性“共享” `book[0]`（因为`List<string>`它是一个类并且具有引用类型语义）。

# jquery - hoverPause 永远停止滑块

> ID：11456336
> 
> 赞同：3
> 
> 时间：2012-07-12T16:25:56.497
> 
> 标签：jquery, slidesjs

我正在使用 SlidesJS (sliedejs.com)，当我将鼠标悬停在幻灯片上时，我希望幻灯片停止。为此，我设置`hoverPause: true;`并且它有效。唯一的问题是，当我停止将光标悬停在幻灯片上时，它不再移动。我必须重新加载页面才能使其再次工作。我显然想要的是在光标不在幻灯片上之后幻灯片继续工作。我一直在检查选项，但似乎没有任何效果。也许有人对此有技巧或类似的东西（或推荐的另一个幻灯片插件）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:34:36.850

[按照此处的建议](https://groups.google.com/forum/?fromgroups#!topic/slidesjs/3tgTAFh7exg)设置暂停属性的值

```
hoverPause: true,
pause: 4000 
```

# c - C 隐式声明不同于内部函数声明

> ID：11456338
> 
> 赞同：-6
> 
> 时间：2012-07-12T16:26:02.957
> 
> 标签：c, function, declaration, implicit, implicit-declaration

我在使用 C 标准函数时遇到了一些问题。例如，我在 memcpy 函数中遇到了该错误，甚至向它传递了正确的参数。我已经包含了一个标头作为#include“header.h”，并且我已经包含了，所以在“header.h”文件中。（我在 strcpy、strtok 和其他一些标准函数中也遇到了这个错误，所有相应的头文件都包含在“header.h”中）

谁能帮我解决这个问题？我没有时间来部署这项工作......提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:58:45.513

似乎在日食中遇到了一些麻烦。我右键单击其中一个功能，选择 Source->Add include 并解决了问题（但没有添加任何标题）。我希望这对其他人有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:46:22.753

由于您尚未发布代码，我假设您未在文件顶部包含以下代码行：

```
#include <string.h> 
```

如果您使用的是 C++ 编译器（即 g++），那么：

```
#include <cstring> 
```

# css - 具有相同 css 文件的不同屏幕方向

> ID：11456339
> 
> 赞同：0
> 
> 时间：2012-07-12T16:26:05.420
> 
> 标签：css, mobile

我在我的移动 HTML 中放置了以下元标记

```
 <meta name = "viewport" content = "initial-scale = 1.0"> 
```

在为移动版本编写 css 文件后，我意识到它在横向模式下看起来不太好，因为它具有不同的宽度大小。我在右侧得到一个 160 像素的空区域。

除了为横向模式编写单独的 css 文件之外，还有什么办法摆脱这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:39:30.620

您还需要绑定方向更改事件。您可以使用此示例脚本来执行此操作：

```
<script>
$(function(){

  function orient() {  
    if (window.orientation == 0 || window.orientation == 180) {
      $('.featured').css('display','none');
    orientation = 'portrait';
        return false;
    }
    else if (window.orientation == 90 || window.orientation == -90) {
      $('.featured').css('display','block');
        orientation = 'landscape';
        return false;
    }
  }

  $(window).bind( 'orientationchange', function(e){
    orient();
  });

})();

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:28:39.937

如果您的 css 布局基于屏幕百分比而不是绝对值，它应该允许您调整到任何屏幕布局而无需多个 css 文件就好了。

查看百分比选项：[http ://www.w3schools.com/cssref/pr_dim_width.asp](http://www.w3schools.com/cssref/pr_dim_width.asp)

或者，如果您有一个想要保持不变的布局，您可以将其居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:28:51.717

中心对齐外包装。

```
body{
    max-width:786;/*target size of page*/
    margin:0 auto auto auto;
} 
```

是最简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:30:22.383

您可以使用媒体查询来检测方向变化，并在同一个样式表中为每个都运行不同的样式。

同样对于移动设备，您最好使用 % 而不是 px 作为宽度 -[对于移动 Web 应用程序的 css，您使用什么单位？](https://stackoverflow.com/questions/4978776/what-units-do-you-use-for-css-for-mobile-web-apps)

```
/* Portrait */
@media screen and (orientation:portrait) {
    /* Portrait styles */
}
/* Landscape */
@media screen and (orientation:landscape) {
    /* Landscape styles */
} 
```

# dns - Micro Cloud Foundry - 无法创建新用户

> ID：11456340
> 
> 赞同：0
> 
> 时间：2012-07-12T16:26:08.407
> 
> 标签：dns, vmware, cloud-foundry

我在这里关注 Micro cloud Foundry 快速入门指南：http: [//support.cloudfoundry.com/entries/20316811-micro-cloud-foundry-getting-started-guide](http://support.cloudfoundry.com/entries/20316811-micro-cloud-foundry-getting-started-guide)

我在第 10 步：注册一个新用户，但我无法连接：

> $ vmc target api.lsmith.cloudfoundry.me
> 主机不可用或无效：'http://api.lsmith.cloudfoundry.me'
> 您想查看响应吗？[yN]: y
> HTTP 异常：Errno::ECONNREFUSED:Connection denied - connect(2)

我的虚拟机处于 NAT 模式。我的 VM 中的当前配置列出为：

> 当前配置：
> 身份：lsmith.cloudfoundry.me（ok）
> IP地址：172.16.xx（网络启动）

当我在控制台中运行主机命令时，我得到：

> $ host api.lsmith.cloudfoundry.me
> api.lsmith.cloudfoundry.me 是 lsmith.cloudfoundry.me 的别名。
> lsmith.cloudfoundry.me 的地址为 127.0.0.1

我无法在浏览器中访问 vmc 目标，但是当我访问[http://172.16.xx/info](http://172.16.x.x/info)时，我得到：

> VCAP 路由器：404 - 未找到目标

我认为这是一个 DNS 问题，但不知道我需要做什么来修复它。我尝试将我的 /etc/resolv.conf 中的名称服务器 IP 从 127.0.0.1 更改为 172.16.xx ，但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:00:42.983

我能够通过在[https://micro.cloudfoundry.com/dns使用新生成的域令牌重新配置我的域（VM 中的选项 4）来解决此问题](https://micro.cloudfoundry.com/dns)

# html - Drupal - 将文本字段（例如）显示为纯文本不会删除字段标签

> ID：11456341
> 
> 赞同：0
> 
> 时间：2012-07-12T16:26:19.140
> 
> 标签：html, drupal, drupal-7, markup

我正在使用出色的 Mothership 在 Drupal 站点上尝试清理 Drupal 通常输出的混乱代码。如果有人有兴趣尝试清理他们的标记，这是一个很棒的主题。

现在我有一个子标题，我想在 h2 标签中输出，目前看起来像这样：

```
<h2>    
<div class="field field-name-field-sub-heading field-type-text-long field-label-hidden">  
    We have, as a company, over 28 years of electrical installation experience. We have carried out electrical and associated systems installation in a vast variety of buildings and locations throughout the British Isles ranging in size up to £1,000,000.
</div>
</h2> 
```

我认为将显示设置为纯文本会给我一个很好的清洁`<h2>Content</h2>`，但它是一样的。

有没有一种很好的 Drupal 方法来清理它？添加`strip_tags()`可以解决问题，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T06:49:05.920

在渲染字段之前使用它。

```
$content['field_name']['#theme'] = "nomarkup"; 
```

这将告诉 drupal 不要在字段内容周围呈现任何包装 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:52:34.320

检查您的主题或基本主题中的 node.tpl.php 文件。在那里你会找到你需要修改的所有标记。此外，如果您想继续清理代码，请检查 page.tpl.php 文件。

基本上，所有 tpl 文件都是 Drupal 用于主题的。您会发现它包含所有带有变量的标记，例如 $title_attributes、类、链接、变量等。如果您可以更具体地说明您正在尝试做什么，也许我可以为您提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:30:13.807

你在哪里插入`<h2></h2>`标签？您可能希望通过创建和编辑`field-name-field-sub-heading.tpl.php`基于`field.tpl.php`主母舰主题副本的文件来为您的字段的输出设置主题。在那里，您可以`<div>`用`<h2>`.

# javascript - easyXDM 表单发布

> ID：11456342
> 
> 赞同：1
> 
> 时间：2012-07-12T16:26:34.010
> 
> 标签：javascript, jquery, ajax, cross-domain

我正在将我的 jquery ajax 调用转换为使用 easyXDM。我怎么能做这样的事情：

```
xhr.request({
    url: "someurl",
    method: "POST",
    data: $("#formid").serialize(), // serializes the form's elements      
}, function(rpcdata){
    // do stuff
}); 
```

我的问题是序列化表单的内容。看来easyXDM期待json。有没有一种简单的方法可以将我的表单转换为 json？或者有没有办法告诉 easyXDM 使用标准查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:02:08.067

这是一个解决方案：

[http://css-tricks.com/snippets/jquery/serialize-form-to-json/](http://css-tricks.com/snippets/jquery/serialize-form-to-json/)

# java - 将 JLabel 拖到 JFrame 之外

> ID：11456343
> 
> 赞同：2
> 
> 时间：2012-07-12T16:26:51.150
> 
> 标签：java, swing, drag-and-drop, jframe, jlabel

所以我一直在看这个： [在屏幕上拖动一个 jlabel](https://stackoverflow.com/questions/4893265/dragging-a-jlabel-around-the-screen)

有没有办法将 JLabel（或一个表示）拖到 JFrame 之外？

例如在 JFrame 之间拖动 JLabel，同时实际“显示”被拖动的 JLabel（使用[http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:32:59.487

使用 JWindow 测试：

```
//http://stackoverflow.com/questions/4893265/dragging-a-jlabel-around-the-screen
private final JWindow window = new JWindow();
@Override
public void mouseDragged(MouseEvent me) {
  if (dragLabel == null) {
      return;
  }
  int x = me.getPoint().x - dragLabelWidthDiv2;
  int y = me.getPoint().y - dragLabelHeightDiv2;
  //dragLabel.setLocation(x, y);
  window.add(dragLabel);
  window.pack();
  Point pt = new Point(x, y);
  Component c = (Component)me.getSource();
  SwingUtilities.convertPointToScreen(pt, c);
  window.setLocation(pt);
  window.setVisible(true);
  repaint();
}
@Override public void mouseReleased(MouseEvent me) {
  window.setVisible(false);
  //...
} 
```

* * *

下面是未经测试的代码：（可能需要一些按摩才能工作，但这是它的要点）

```
@Override public int getSourceActions(JComponent src) {
  JLabel label = (JLabel)src;
  window.add(label);
  window.pack();
  window.setVisible(true);
  return MOVE;
}
//...
DragSource.getDefaultDragSource().addDragSourceMotionListener(new DragSourceMotionListener() {
  @Override public void dragMouseMoved(DragSourceDragEvent dsde) {
    Point pt = dsde.getLocation();
    pt.translate(5, 5); // offset
    window.setLocation(pt);
  }
}); 
```

# asp.net-mvc-3 - 没有 SelectList 的强类型 ASP.NET MVC DropDownList

> ID：11456356
> 
> 赞同：1
> 
> 时间：2012-07-12T16:27:25.357
> 
> 标签：asp.net-mvc-3, knockout.js

有没有办法删除下面的 selectlist 参数并仍然使用 HTML Helper？我喜欢强类型选项，但使用了相当多的 knockout.js。

```
@Html.DropDownListFor(m => m.ProgramId, new SelectList(Enumerable.Empty<ProgramModel>()), new { data_bind = "enable: programs().length > 0, value: programId, options: programs, optionsText: 'Name', optionsValue: 'Id', optionsCaption: ' -- Choose Program -- ', event: { change: function(_,event) { getLicenseProductsForProgram() } }" }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:58:49.690

由于下拉列表实际上需要有选项列表，因此它需要 selectlist 参数。不过，您始终可以将空列表传递给它：

```
@Html.DropDownListFor(m => m.ProgramId, new List<SelectListItem>(), new { [the rest of your stuff] }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:28:49.513

不，那是不可能的。标准的 DropDownList/DropDownListFor 助手期望`IEnumerable<SelectListItem>`作为第二个参数。显然，应该没有什么可以阻止您编写自定义帮助程序或自定义编辑器模板。

# java - 制作谷歌电子表格的副本

> ID：11456357
> 
> 赞同：1
> 
> 时间：2012-07-12T16:27:26.997
> 
> 标签：java, google-docs, google-docs-api, google-sheets

我正在尝试按照[文档页面](https://developers.google.com/google-apps/documents-list/#copying_documents)上的示例复制现有的电子表格文档。我使用`ClientLogin`方法进行身份验证。我的第一步是获取模板文档：

```
SpreadsheetService service =
    new SpreadsheetService("MySpreadsheetIntegration-v1");
service.setUserCredentials(USERNAME, PASSWORD);

DocumentQuery query = new DocumentQuery(new URL(
    "https://spreadsheets.google.com/feeds/spreadsheets/private/full")); 
query.setTitleQuery("template"); 
query.setTitleExact(true); 

SpreadsheetFeed feed = service.getFeed(query, SpreadsheetFeed.class);
List<SpreadsheetEntry> spreadsheets = feed.getEntries();

SpreadsheetEntry template = spreadsheets.get(0); 
```

一切皆好。在`template`我有文件。然后我尝试创建一个新的：

```
SpreadsheetEntry newDoc = new SpreadsheetEntry();
newDoc.setTitle(new PlainTextConstruct("new copy"));
newDoc.setId(template.getId());
service.insert(new URL("https://docs.google.com/feeds/default/private/full"), newDoc); 
```

我明白了`AuthenticationException: Token invalid`。如果我`https://docs.google.com/feeds/default/private/full`用来检索文档，它会在那里失败。所以我想`docs.google.com/...`需要某种更高的特权，但是如何获得它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:37:23.970

我猜您无法使用`ClientLogin`身份验证模型创建文档。使用 Oauth。

# php - 仅当某些条件不成立时才执行代码

> ID：11456359
> 
> 赞同：0
> 
> 时间：2012-07-12T16:27:38.583
> 
> 标签：php, logic

在 PHP 中，如果三个条件为真，我怎么能**不**执行即将出现的代码（例如不显示在 div 中），另一方面，当***且***仅当这三个条件中的任何一个为假时才执行它？

例如，与我想要做的相反的是，如果三个条件确实为真，为了执行代码，我做这样的事情***：***

```
<?php
$var1 = 'true';
$var2 = 'true';
$var3 = 'false';
?>

<?php if ( $var1 == 'true' and $var2 == 'true' and $var3 == 'true' ) : ?>
    <?php echo 'All 3 are true, will execute code.'; ?>
<?php else : ?>
    <?php echo 'Not all 3 are true, will not execute code.'; ?>
<?php endif; ?> 
```

结果：并非所有三个都为真，因此代码不会被执行。

希望我被理解，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:31:14.853

您可以使用德摩根定律来反转整个`if`条款的真相：

```
if( $var1 != true or $var2 != true or $var3 != true ){
    //execute code
} 
```

或者您可以使用运算符来执行此`!`操作，这在逻辑上是完全等效的：

```
if( !( $var1 == true and $var2 == true and $var3 == true ) ){
    //execute code
} 
```

或者您可以反转您检查的值，这在逻辑上也是等效的：

```
if( $var1 == false or $var2 == false or $var3 == false ){
    //execute code
} 
```

所有这些都将以相同的方式工作。如果您仔细研究它们，您可能还会理解为什么它们都以相同的方式工作，这将有助于您将来设计这些子句！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:32:02.167

```
if (!($x=='x' && $y=='y' && $z=='z')){
// do if matches
}else {
//do otherwise
} 
```

你只要放一个！像 if(!()) 一样签名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:32:25.397

最简单的事情可能是使用`!`（非）运算符，如下所示：

```
<?php if (!( $var1 == 'true' and $var2 == 'true' and $var3 == 'true' ))  ?>
    <?php echo 'Not all 3 are true, will execute code.'; ?>
<?php else : ?>
    <?php echo 'All 3 are true, will execute code.'; ?>
<?php endif; ?> 
```

或者“打开” `!`（非）运算符：

```
<?php if $var1 != 'true' or $var2 != 'true' or $var3 != 'true'   ?>
    <?php echo 'Not all 3 are true, will execute code.'; ?>
<?php else : ?>
    <?php echo 'All 3 are true, will execute code.'; ?>
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:30:53.163

有一个`!=`与运算符相反的`==`运算符，如果两者不相等，则返回 false。还有一个`!`运算符返回它正在修改的事物的相反布尔值，例如

```
!($var1 == 'true' or $var2 == 'true') 
```

`$var1`如果两者都是，`$var2`则返回 false `'true'`。

此外，您不需要`<?php ?>`为每一行 php.ini 打开和关闭标签。事实上，不要这样做，它会使阅读您的代码非常烦人。只需做一个`<?php`你开始你的php和`?>`你结束的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:34:42.667

```
<?php
$var1 = true;  // IF these are really BOOLEAN values
$var2 = true; 
$var3 = false;
?>

<?php if ( $var1 && $var2 && $var3 ) : ?>
    <?php echo 'All 3 are true, will execute code.'; ?>
<?php else : ?>
    <?php echo 'Not all 3 are true, will not execute code.'; ?>
<?php endif; ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T16:40:31.010

试试这个：

```
<?php if($var1 == 'true' and $var2 == 'true' and $var3 == 'true'): ?>
   <?php echo 'All 3 are true, will execute code.'; ?>
<?php elseif($var1 != 'true' and $var2 != 'true' and $var3 != 'true'): ?>
   <?php echo 'Not all 3 are true, will not execute code.'; ?>
<?php endif; ?> 
```

# database - 为什么您不想整合关键任务数据库？

> ID：11456362
> 
> 赞同：0
> 
> 时间：2012-07-12T16:27:54.343
> 
> 标签：database, database-design

假设您想将所有关键任务数据库整合到一个实例中，这样您就可以节省一些许可费用，那么潜在的风险是什么？是否有任何好的文章或案例研究？我意识到这是一个糟糕的主意，但我有人想要这样做，并且愿意在需要时最大限度地利用硬件资源。我试图向他展示一些可以量化的东西或一些可以引导他远离这样做的文章。

有三个大型任务关键数据库，包括计费、动态 CRM 和内部构建的应用程序来跟踪交易。这些是面向中小型公司的大容量数据库。我需要可量化的或良好的案例研究支持，以说服某人这是错误的道路。关于我如何说服这个人的任何其他建议也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:02:50.790

Oded、Catcall 和 Gilbert 的评论很到位。

我学习 IT 行业的那家银行在单个 MVS（后来的 Z/OS）大型机上运行其整个核心业务，该大型机运行单个 DBMS 和单个事务处理器（除非您将 TSO 算作事务处理器）。

事务处理器定期停机（例如，每天一次）。它从未导致银行破产，因为它总是在不到一分钟的时间内重新启动并运行。里程可能会有所不同，但在整个工作日（480 分钟，或 < 0.25%）中损失一分钟的工作时间确实不会造成危险的破坏。

有时，单个 DBMS 也会下降（例如，每月两次）。我仍然可以听到 sysprogs 隔着栅栏对服务台人员大喊“DBMS 已关闭”，意思是“预计会接到用户电话”。它从未导致银行破产，因为它总是在几分钟内重新启动并运行。里程可能会有所不同，但每个月失去几分钟的工作时间确实不应该造成危险的破坏。

我记得有一次银行真的濒临破产是当开发团队把银行绝对核心业务的一个新项目弄得一团糟，银行完全倒闭了（它的真正业务) 连续三四天。这不是 0.25% 的业务时间损失，而是几乎 100 倍以上。

我的故事的道德？他们两个人。(a) 这完全是关于风险评估（=概率评估）和风险加权（=概率加权）成本估算。(b) 如果您提出关于 SO 的问题（这意味着一种认可/期望回答者在该主题上比您拥有更多专业知识），并且像 Oded 和 Catcall 这样的人会为您提供准确且准确的答案重点，然后不要要求论文或案例研究来支持他们的答案。如果您不想接受专家的专业知识，那为什么还要一开始就问什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:27:56.200

答案取决于。乍一看，这可能看起来是个坏主意。另一方面，如果目标是将所有内容整合到一台服务器上，然后在远程环境中复制该服务器，那么您正在走向更可靠的系统。IT 可能更喜欢将所有东西都放在一个地方，而不是处理分布在整个地形上的关键任务服务器。

一个主要问题是需要一台更大的机器。因此，如果任何系统使用许可证与机器大小无关的软件，您最终可能会花费*更多*的钱，因为您需要更大的服务器。例如，我已经看到 SAS 许可会发生这种情况。

不过，也许最大的问题是不同的应用程序可能处于不同的开发周期——无论是内部开发还是外部供应商开发的。因此，更新硬件/操作系统/软件可能会成为一场噩梦。A 中的修复或增强功能可能需要一个 OS 补丁，而 B 没有经过测试。这个维护问题是我强烈主张单独的服务器的原因。

也就是说，关键任务应用程序正是如此，关键任务。驱动因素不应该是硬件上的几美元。驱动因素应该是可靠性、维护、性能、可持续性和恢复。

# php - 删除文档并更新数据库

> ID：11456365
> 
> 赞同：1
> 
> 时间：2012-07-12T16:28:17.527
> 
> 标签：php, javascript, sqlite

我有 2 个文件可以帮助我删除文档和更新数据库。我的第一个文件包含一个带有删除按钮的表单和一个名为 remove() 的 javascript 函数。第二个 php 页面将删除它不返回任何结果的文件。

Remove.php 的代码（调用 remove() 函数时）：

```
$Doc=$_GET['Doc']; //Value get from remove() function
$ID= intval($_POST['ID']);
$FirstReport= $_POST['FirstReport'];
$SecReport = $_POST['SecReport'];

$FirstReportPath= $_POST['FirstReportPath'];
$SecReportPath = $_POST['SecReportPath '];

$DB = new PDO('sqlite:/database/Student.db');
//If i click remove firstreport button, i'll check it to see if it's the same
if(($Doc) == ($FirstReport))
{
   $result= $DB->query("Update Student set FirstReport='No' WHERE ID=".$ID);    
//This unlink should remove the document file from the path.
    unlink($FirstReportPath);
echo "success";
 }
 else
 {
    //same code repeated as if statement
 } 
```

Javascript函数

```
 function RemoveDoc(Doc)
 {
 xmlhttp=new XMLHttpRequest();
 xmlhttp.open("GET","functions/Resubmit.php?Doc="+Doc,true);
 xmlhttp.send();
 document.getElementById("RemoveMsg").innerHTML=xmlhttp.responseText;
 return false;
 } 
```

我确实尝试过警告（Doc）并且文档名称确实显示但在第二个 remove.php 上，它没有运行任何编码。尝试“GET”/“POST”也得到相同的结果。好心提醒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:34:55.680

看起来您发送了一个发布请求，但在 url 中发送了您的文档名称，一个 $GET 变量。

要么切换到获取请求：

```
function RemoveDoc(Doc)
 {
 xmlhttp=new XMLHttpRequest();
 xmlhttp.open("GET","functions/Resubmit.php?Doc="+Doc,true);
 xmlhttp.send();
 document.getElementById("RemoveMsg").innerHTML=xmlhttp.responseText;
 return false;
 } 
```

或将文档名称作为 post 参数发送：

```
function RemoveDoc(Doc)
 {
 xmlhttp=new XMLHttpRequest();
 xmlhttp.open("POST","functions/Resubmit.php",true);
 xmlhttp.send("Doc="+Doc);
 document.getElementById("RemoveMsg").innerHTML=xmlhttp.responseText;
 return false;
 } 
```

另外，您不等待服务器的响应。

```
function RemoveDoc(Doc)
{
xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","functions/Resubmit.php",true);
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("RemoveMsg").innerHTML=xmlhttp.responseText;
    }
  }
 xmlhttp.send('Doc='+Doc);
return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:10:12.710

您必须发送价值广告帖子才能从 $_POST superglobal 访问。只需修改Javascript代码

```
function RemoveDoc(Doc,FirstReport,SecReport,FirstReportPath,SecReportPath)
{
 xmlhttp=new XMLHttpRequest();
 xmlhttp.open("POST","functions/Resubmit.php",true);
 xmlhttp.onreadystatechange=function(){
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
      document.getElementById("RemoveMsg").innerHTML=xmlhttp.responseText;
 }
 xmlhttp.send("Doc="+Doc+"&FirstReport="+FirstReport+"&SecReport="+SecReport);
 //do for others also in the same way
 return false;
} 
```

# .net - IBM DB2 Data Provider - 如何在运行时更改用户名和密码？

> ID：11456370
> 
> 赞同：1
> 
> 时间：2012-07-12T16:28:38.237
> 
> 标签：.net, visual-studio-2010, dataset, informix

当我在 Visual Studio 中使用 DB2 数据提供程序创建设计器生成的数据集时，我被问到是否要在我的 ConnectionString 对象中存储敏感信息。

碰巧我没有，因为我想强制用户输入他们自己的用户名和密码，以评估他们运行程序的权限。

此时 Visual Studio 生成的 ConnectionString 为 ReadOnly。

*如果 ConnectionString 是只读的，*如何设置 ConnectionString 提供的用户名和密码？**

 *我显然遗漏*了一些东西*，但是我在网上找到的所有解决方案都失败了，包括找不到连接 DLL，连接突然不匹配其连接类型 (TCP/IP) 及其通信 API (SOCKETS ）。出于怀疑，此处包含错误：

```
ERROR [08001] [IBM] SQL30081N  A communication error has been 
detected. Communication protocol being used: "TCP/IP".
Communication API being used: "SOCKETS".  Location where 
the error was detected: "192.168.101.243".
Communication function detecting the error: "connect".
Protocol specific error code(s): "10061", "*", "*".  SQLSTATE=08001 
```

Stackoverflow，我放弃了。我究竟做错了什么？

**编辑：**抱歉我的问题很糟糕。我在软件中有一个可用的连接字符串。这是以下形式：

“数据库=dbName；用户ID=**管理员**；密码=**管理员**密码；服务器=192.168.101.111:1111”

这个connectionString工作正常，没有问题，一切都很好。

当我尝试在运行时将 connectionString 更改为：

“数据库=dbName；用户ID=**用户**；密码=用户**密码**；服务器=192.168.101.111:1111”

我正在寻找的是对以下问题的回答：“如何在运行时更改设计器生成的连接字符串？” 因为到目前为止我所尝试的一切显然都是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:59:32.077

我建议您验证您尝试访问的 Informix IDS 服务器上的 NETTYPE=onsoctcp 是否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:21:05.730

阅读了 Frank Computer 提供的链接后，我相信我发现了以下内容：

通过尝试更改设计器生成的 ConnectionString 对象，我做错了事。

我正在寻找的实际答案是连接字符串应该以每个 tableAdapter 的形式设置：

```
Dim x As New DataSet1_TableAdapters.myTableAdapter
x.Connection.ConnectionString = newConnectionString 
```

Designer 生成的 connectionString 在 Designer 生成的 TableAdapters 构造函数中使用，它的存在避免了 NullReferenceException。正确的过程（据我现在发现）是允许使用这个*不正确*的连接字符串，然后在实际尝试使用连接之前将其更改为*正确的连接字符串。*

公平地说，有这个 ConnectionString 的目的是为了不破坏设计器生成的代码，但是，正如我所说，基本上是一个陷阱，如果你需要对连接字符串进行更改，它可以让你开始解决*错误的问题*.*

# ios - 在没有 App Store ID 的情况下测试 iOS“深度链接”

> ID：11456372
> 
> 赞同：2
> 
> 时间：2012-07-12T16:28:44.943
> 
> 标签：ios, facebook, facebook-ios-sdk, deep-linking, app-id

所以，我一直在寻找这个问题的答案，但真的找不到任何东西......

我想测试 Facebook 深度链接到我的 iOS 应用程序。我想尝试在请求的“数据”参数中传递 JSON，例如

```
 NSMutableDictionary* defaultParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                          JSONString, @"data",                       
                                          @"Check out my app",  @"message",
                                          nil];

    [facebook dialog:@"apprequests"
           andParams:defaultParams
         andDelegate:nil]; 
```

为了将此通知显示给接收用户（在移动设备上），我必须在 Facebook 应用程序设置页面中输入移动网站 URL 或深度链接和 App Store ID。这花了我很长时间才解决，但我已经走到了这一步......

现在，如果我输入我现有已发布应用程序之一的 App Store ID，这可以工作，但会重定向到错误的应用程序（或 iTunes/AppStore，如果未安装）。

我真的很想测试*我的*应用程序将如何处理被相应的 Facebook 应用程序唤醒，而不将其提交到 App Store。

有没有人有解决方法或方法来实现这一目标？我可以只在 iTunes 连接中创建一个应用程序而不提交它吗？如果 Facebook/我的设备不在线，如何知道两者已连接？

谢谢

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:44:09.470

您可以在 iTunes Connect 中设置您的应用程序。确保您一直走到显示准备上传二进制文件的位置。如果您随后在 iTunes Connect 中查看您的应用程序的详细信息，它将为您提供您的 iTunes id。您可以将其与 Facebook 一起使用。

# html - 元素宽度的 IE 可计算性问题

> ID：11456376
> 
> 赞同：0
> 
> 时间：2012-07-12T16:28:57.343
> 
> 标签：html, css, internet-explorer, cross-browser

此页面在 IE 中的加载方式不同于 Chrome 或 FF [http://www.s-maof.com/PRO/index.php?fkapp=9](http://www.s-maof.com/PRO/index.php?fkapp=9)

我没有使用任何条件 CSS，除了一个没有相关性的小 CSS

```
<!--[if !IE]>
    .box{border: 0px solid gray;}
<![endif]--> 
```

这会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:56:27.943

*不需要*为每个浏览器专门设置特殊的 CSS 以使页面行为一致……这就是 W3C*编程标准*的用途。

修复[无效的 HTML](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.s-maof.com%2FPRO%2Findex.php%3Ffkapp%3D9&charset=%28detect+automatically%29&doctype=Inline&group=0)。你有很多未闭合和不匹配的标签。IE 不能很好地处理无效的 HTML。

[http://validator.w3.org](http://validator.w3.org/check?uri=http://www.s-maof.com/PRO/index.php?fkapp=9&charset=%28detect%20automatically%29&doctype=Inline&group=0)

另外，删除上面的空行`<!DOCTYPE HTML>`。Explorer**不**喜欢在. *_* `doctype`否则，它会进入 Quirks 模式。

# c# - 在 C#/.Net 中实现 SSH 服务器

> ID：11456377
> 
> 赞同：13
> 
> 时间：2012-07-12T16:29:01.140
> 
> 标签：c#, .net, ssh

我们正在进行的一个项目刚刚添加了一个新要求：它必须能够使用密钥/对身份验证通过 SFTP (SSH) 接收文件。我们已经能够找到一组有趣的 SSH**客户端**库（例如 SSH.Net），但没有找到服务器库。到目前为止，我们发现的最接近的是一个 Python 库，我们正在讨论通过 IronPython 实现它。

我们应该怎么做呢？我们是否缺少任何库，或者我们应该自己实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-11T14:40:11.107

此外，FxSsh 是一个纯 C# 实现 SSH 服务器端。在这个阶段，支持 EXEC 方法和返回流。

欢迎您在[https://github.com/Aimeast/FxSsh上分叉和贡献](https://github.com/Aimeast/FxSsh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:37:49.917

在谷歌上快速搜索“.NET SSH 服务器”会发现我们的[SecureBlackbox](http://www.eldos.com/sbb/net-ssh.php)位于第 4 位。在众多其他功能中，SecureBlackbox 为 .NET 提供 SSH/SFTP 服务器组件。

# matlab - 在matlab中为多个单元格赋值

> ID：11456381
> 
> 赞同：14
> 
> 时间：2012-07-12T16:29:23.743
> 
> 标签：matlab, cell

我有一个一维逻辑向量、一个元胞数组和一个要分配的字符串值。

我尝试了“cell{logical} = string”，但出现以下错误：

```
The right hand side of this assignment has too few values to satisfy
the left hand side. 
```

你有解决办法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-22T14:56:58.493

您实际上不需要使用`deal`.

```
a = cell(10,1); % cell array
b = rand(1,10)>0.5; % vector with logicals
myString = 'hello'; % string

a(b) = {myString}; 
```

看最后一行：在左侧，我们从中选择一个单元格子集，`a`并说它们应该都等于右侧的单元格，这是一个包含字符串的单元格。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-12T16:41:21.017

你可以试试这个

```
a = cell(10,1); % cell array
b = rand(1,10)>0.5; % vector with logicals
myString = 'hello'; % string

[a{b}] = deal(myString); 
```

结果是：

```
a = 

    'hello'
         []
         []
    'hello'
    'hello'
         []
    'hello'
    'hello'
         []
         [] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-13T02:46:25.490

正如 H.Muster 所说，`deal`是走这里的路。括号的原因是（按照 H.Muster 的设置）`a{b}`返回一个逗号分隔的列表；需要在此列表周围放置方括号以将其连接成一个向量。`help lists`在 Matlab 中运行可能会进一步澄清，[逗号分隔列表上的文档可能会进一步澄清](http://www.mathworks.com/help/techdoc/matlab_prog/br2js35-1.html#br2js35-12)

**编辑：** user2000747 提供的答案似乎比[使用](https://stackoverflow.com/a/14461462/1415355)`deal`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-09T13:57:30.033

另一种解决方案可以是

```
a = cell(10,1);
a([1,3]) = {[1,3,6,10]} 
```

这似乎是一个不必要的添加，但假设您想将一个向量分配给长度为 1e8 的一维元胞数组中的 3 个元胞。如果使用逻辑，这将需要创建大小接近 100Mb 的逻辑数组。

# php - 在 php 中跟踪文件内的计数器时可能出现并发问题

> ID：11456385
> 
> 赞同：0
> 
> 时间：2012-07-12T16:29:42.513
> 
> 标签：php

每次调用我的 php 脚本时，我都会执行以下操作来跟踪 no。调用脚本的次数：
1\. 打开一个纯文本文件
2\. 从中读取整数
3\. 增加该值
4\. 写回该值并关闭文件。

当对该脚本有 1000 个并发请求时，我觉得这种方法应该存在并发问题。一些读/写应该失败。但我无法重现任何问题（它似乎适用于许多请求）。

我需要使用任何并发机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:52:40.603

您可以使用数据库表。每次调用脚本时，您都会插入一个值。您会知道在 PHP 中使用 mysql_num_rows() 调用了多少次脚本，或者您可以创建一个每天更新一次文本文件的 cronjob。

使用表可确保存储所有脚本调用。如果同时获得并更新相同的文本文件，则不会发生这种情况（您将失去一击）。

# matlab - matlab中的线框和YZ视图

> ID：11456387
> 
> 赞同：1
> 
> 时间：2012-07-12T16:29:53.197
> 
> 标签：matlab, 3d, plot, wireframe

在 matlab 中绘制数据时，我注意到我必须经常使用旋转按钮才能转到 YZ 视图。我想知道我是否可以自动化这个，所以它首先出现在那个视图中？

我目前使用的方法：

```
%% plot data+clusters
figure, hold on
scatter3(data(:,1),data(:,2),data(:,3), 5, clustIDX, 'filled')
scatter3(clusters(:,1),clusters(:,2),clusters(:,3), 100, (1:K)', 'filled')
hold off, xlabel('x'), ylabel('y'), zlabel('z') 
```

我还想知道您如何在后台设置线框，查看文档我不确定它是否刚刚被调用`mesh`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:05:08.017

对于第一项，手动旋转一次并运行此行以找出所需的方位角和仰角：

```
[az, el] = view; 
```

对于你想要的数字。然后记下您获得的值并在代码中调用

```
view([-90 15]); 
```

假设 -90 和 15 是你得到的值。

对于第二项，只需键入`grid on`以查看背景中的“线框”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:33:44.460

看这里，它讲的是图形对象在 3 个空间中的旋转！！！

[http://www.mathworks.com/help/techdoc/ref/rotate.html](http://www.mathworks.com/help/techdoc/ref/rotate.html)

# java - 用 Java 清理 Html5 页面：有可能吗？

> ID：11456389
> 
> 赞同：0
> 
> 时间：2012-07-12T16:29:59.467
> 
> 标签：java, html, java-7, jtidy

我需要清理我的 Java 项目中的 Html5 页面。

所以我需要一个 Java 库，或者一个在 Linux 和 Windows 上都可以运行的命令行程序。

JTidy 不能很好地工作（我测试过）。HTML5 的 HTML Tidy 是一个 C++ 库，它的命令行版本仅适用于 Linux。

你知道 Validator.nu HTML Parser 是否也清理了（我没有找到任何关于它的信息）？

你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:33:23.570

使用[JSoup](http://jsoup.org/)。得到很好的支持，没有本地组件（应该在 Java 运行的任何地方运行），免费但非常自由的许可证。另外，支持 HTML5

# c# - for 循环日期不想包括当前日期

> ID：11456391
> 
> 赞同：0
> 
> 时间：2012-07-12T16:30:05.617
> 
> 标签：c#, datetime, for-loop

这是我的场景：

1.  给定`startDate = 1/7/2012`和`endDate = 9/7/2012`
2.  数据库包含：`4/7/2012`和`5/7/2012`
3.  读取并返回不包含在数据库中的时间间隔的日期

预期结果（日/月/年）：

```
1/7/2012
2/7/2012
3/7/2012
6/7/2012
7/7/2012
8/7/2012
9/7/2012 
```

以下是我正在使用的代码：

```
DateTime startDate = new DateTime(2012, 7, 1, 0, 0, 0);
DateTime endDate = new DateTime(2012, 7, 9, 0, 0, 0);
int interval = 1;

MySqlConnection connDate = new MySqlConnection(connectionString);
MySqlCommand cmdDate = connDate.CreateCommand();

cmdDate.Parameters.Add("username", MySqlDbType.VarChar);
cmdDate.Parameters["username"].Value = Session["username"].ToString();

cmdDate.CommandText = "SELECT * FROM report WHERE username = @username";

connDate.Open();

MySqlDataReader drDate = cmdDate.ExecuteReader();
this.Label1.Text = "";

for (DateTime dateTime = startDate; dateTime < endDate; dateTime += TimeSpan.FromDays(interval))
{
    //start from here, i don't know exactly what i am doing.
    DateTime reportDate = Convert.ToDateTime(null);
    while (drDate.Read())
    {
        reportDate = Convert.ToDateTime(drDate["reportDate"].ToString());
    }

    if (Convert.ToDateTime(drDate["reportDate"].ToString()).ToShortDateString() != reportDate.ToShortDateString())
    {
        this.Label1.Text += dateTime.ToString() + "</br>";
    }
}
connDate.Close(); 
```

问题是，上面的代码显示了 2012 年 7 月 1 日至 9 日的所有日期。相反，我希望它显示除数据库中已包含的 7 月 4 日和 5 日之外的所有日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:37:23.223

给定`startDate`, `endDate`, 和每日间隔：

```
// Assumes IEnumerable<DateTime> dbDates;
var remaining =
    Enumerable.Range(0, Int32.MaxValue)
              .Select(day => startDate.AddDays(day))
              .Where(d => d <= endDate)
              .Except(dbDates); 
```

或者也许是更熟悉的迭代方法：

```
// Given: HashSet<DateTime> except = new HashSet<DateTime>(dbDates);
for (DateTime date = startDate;
     date <= endDate;
     date = date.AddDays(1))
{
    if (except.Contains(date)) continue;

    // We now have 'date' which is unused in the db
} 
```

为了帮助从数据库中检索，您可以使用`GetDateTime`重载：

```
// List<DateTime> is another option if you care about order
var dbDates = new HashSet<DateTime>();
while (drDate.Read())
{
    dbDates.Add(drDate.GetDateTime("reportDate"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:54:06.807

首先，创建要排除的可枚举或日期列表（数据库中的日期）。然后，您将需要执行循环以获取指定范围内的所有日期。在该循环中，您需要将所有未包含在可枚举中的日期添加到标签中。

```
IList<DateTime> exclusionDates = new List<DateTime>();

while (drDates.read())
{
    exclusionDates.Add(Convert.ToDateTime(drDates["reportDate"].ToString()));
}

for (DateTime dateTime = startDate; dateTime < endDate; dateTime += TimeSpan.FromDays(interval))
{
    if (!exclusionDates.Contains(dateTime))
    {
        this.Label1.Text += dateTime.ToString() + "</br>";
    }
} 
```

# mysql - 从相关表中选择最大值

> ID：11456394
> 
> 赞同：1
> 
> 时间：2012-07-12T16:30:10.187
> 
> 标签：mysql, sql

在我的应用程序中，我想从 table1 中选择所有数据以及相关 table2 的最大 id。问题是，如果 table2 中有实体，则 SQL 可以正常工作。但如果不是，则 restulset 填充为 NULL：

```
SELECT table1.*, CONCAT(table1.number, '-', table1.item_id) AS IdNumber, MAX(table2.id) AS Table2Id
  FROM table1
  LEFT JOIN table2 ON (table1.ID = table2.EQUIP_ITEM_ID)
WHERE table1.GROUP_ID > 0
  AND table2.IN_PROGRESS = 1
ORDER BY table1.ID ASC
LIMIT 15 
```

我需要更改什么才能检索正确的结果集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:35:43.707

问题在于第二个 WHERE 条件`table2.IN_PROGRESS = 1`

如果您仍希望 table1 数据显示，则将 SQL 修改为

`(table2.IN_PROGRESS = 1 OR table2.IN_PROGRESS IS NULL)`

如果您想将 0 显示为值，请更改`MAX(table2.id)`为`COALESCE(MAX(table2.id),0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:51:08.147

SELECT table1.*, CONCAT(table1.number, '-', table1.item_id) AS IdNumber, MAX(table2.id) AS Table2Id

从表 1

LEFT JOIN table2 ON (table1.ID = table2.EQUIP_ITEM_ID)

WHERE table1.GROUP_ID > 0

AND table2.IN_PROGRESS = 1

AND 不为 NULL (table2.IN_PROGRESS)

ORDER BY table1.ID ASC

限制 15

应该没问题；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:38:58.593

尝试这个：：

```
SELECT table1.*, CONCAT(table1.number, '-', table1.item_id) AS IdNumber, MAX(IFNULL(table2.id),0) AS Table2Id
  FROM table1
  LEFT JOIN table2 ON (table1.ID = table2.EQUIP_ITEM_ID)
WHERE table1.GROUP_ID > 0
  AND table2.IN_PROGRESS = 1
ORDER BY table1.ID ASC
LIMIT 15 
```

# c++ - 在 Qt Creator 中创建相同 GUI 对象的多个实例

> ID：11456397
> 
> 赞同：0
> 
> 时间：2012-07-12T16:30:27.240
> 
> 标签：c++, qt, user-interface, qt-creator, qt-designer

我正在 Qt 中构建一个 GUI，这将需要复制多个部分，而不是物理复制和粘贴每个部分，我更喜欢使用对象/子类的方法，这样我只需要设计一次就可以了制作它的多个实例。它将简化开发过程，因为我只需要进行一次更改。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:35:02.620

我曾经创建了一个应用程序，它可以打开带有相当多控件的文件的选项卡。我发现 QT 相当贪婪地吃掉内存。我终于重写了它，因为当时只有一个选项卡小部件可见，我发现伪造它要好得多，只有一个并更改该小部件中的数据（控件的状态），从而产生切换小部件的错觉。

我不知道这是否有帮助。至于子类化，你可以像任何其他 c++ 类一样子类化和实例化你的 qt 类。

您能否更具体地说明什么不起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:40:48.340

我会继承 QWidget 或 QFrame 并让它显示所有需要重复的控件。这样你就可以只创建几个子类而不是复制和粘贴。

```
 class MyWidget : public QWidget
{
     Q_OBJECT
     public: 
     explicit MyWidget( QWidget* parent = 0)
     //Member functions
     private:
     QLablel* label;
     QTextField* text;
     //More ui components        
}

MyWidget::MyWidget( QWidget* parent) : QWidget(parent)
{
   label = new QLabel(this);
   text = new QTextField(this)
} 
```

如果您选择从 QWidget 而不是 QMainWindow 开始，则从设计器开始，则可以将小部件添加到其他小部件或表单中。这可以通过将小部件重新导入设计器来完成，但我从来没有让它工作。我通常有一个与我用于设计模式的大小相同的占位符，然后在填充表单时将其换成我的自定义占位符。

# knockout.js - 淘汰赛数组的长度始终为 0

> ID：11456400
> 
> 赞同：1
> 
> 时间：2012-07-12T16:30:41.327
> 
> 标签：knockout.js

```
var viewModel = {
    foos: ko.observableArray([]);
}

var foo = function () {
    this.Prop1 = ko.observable,
    this.Prop2 = ko.observable
};

$.get("/someroute/", "", function(data) {
    for(var i = 0; i< data.length; i++) {
        var f = new foo();
        f.Prop1 = data.Prop1;
        f.Prop2 = data.Prop2;
        viewModel.foos.push(f);
    }
    ko.applyBindings(viewModel);
}); 
```

数据从 get 请求加载并循环遍历数据，但 viewModel.foos 保持为 [0]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:38:23.087

您的代码存在一些问题：

**0)**的不正确定义`viewModel`。应该：

```
foos: ko.observableArray([]) 
```

没有分号`;`。

**1）**您没有在`foo`. 它应该是：

```
this.Prop1 = ko.observable() 
```

所以括号`()`不见了。

**2)**请记住前面的一点，这是您将值应用于字段的方式：

```
var f = new foo();
f.Prop1(data.Prop1); 
```

**3)** JavaScript 不缓存数组的长度，因此每当您在循环中使用`.length`(`length`不是属性，它实际上是一个 getter ) 时，都会在每次迭代中评估长度。你应该使用：

```
var l = data.length;
for(var i = 0; i< l; i++) { 
```

**4)** `ko.applyBindings`用于将视图模型绑定到文档。我不确定你为什么在`get`请求结束时使用它，但是如果你想`get`多次使用，那么这肯定会抛出异常。特别是因为您`get`没有修改 DOM。我认为你应该`ko.applyBindings`在`$(document).ready(...)`节的某个地方运行。

**5)**最后，即使有所有这些错误，您的代码也应该可以工作。我的意思是看相关部分：

```
for(var i = 0; i< data.length; i++) {
    // some other code
    viewModel.foos.push(f);
} 
```

不管是什么`f`，它仍然被推送到 viewModel 的`foos`数组中。如果在那之后你得到`foos`0 的长度，那么这意味着它`data.length`是 0 （或者我可能不明白`[0]`你的问题是什么意思）。没有其他解释。看到[这个 jsFiddle](http://jsfiddle.net/TAg7S/)。

**6)**请记住，您可以使用`viewModel.foos()`. 因此`viewModel.foos.length`是不正确的。正确的长度是`viewModel.foos().length`。

# bash - 停止 shell 通配符扩展？

> ID：11456403
> 
> 赞同：108
> 
> 时间：2012-07-12T16:30:47.453
> 
> 标签：bash, wildcard

编译后的命令行程序有什么方法可以告诉 bash 或 csh 它不希望扩展其参数中的任何通配符？

例如，可能需要一个 shell 命令，例如：

```
foo * 
```

简单地返回该字符的数字 ASCII 值。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-07-12T16:36:22.253

不会。扩展发生在命令实际运行之前。
您只能在运行命令之前或通过引用星号来禁用 glob。

```
$ # quote it
$ foo '*'

$ # or escape it
$ foo \*

$ # or disable the glob (noglob)
$ set -f
$ foo *

$ # alternative to set -f
$ set -o noglob
$ # undo it by 
$ set +o noglob 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-04-08T18:13:43.627

虽然命令本身确实不能关闭通配，但用户可以告诉 Unix shell 不要通配特定命令。这通常通过编辑 shell 的配置文件来完成。假设`foo`可以在命令路径中找到该命令，则需要将以下内容添加到相应的配置文件中：

对于 sh、bash 和 ksh shell：

```
alias foo='set -f;foo';foo(){ command foo "$@";set +f;} 
```

对于 csh 和 tcsh shell：

```
alias foo 'set noglob;\foo \!*;unset noglob' 
```

对于 zsh 外壳：

```
alias foo='noglob foo' 
```

不必使用命令路径。假设命令 foo 存储在目录 ~/bin 中，那么上面的内容将变为：

对于 sh、bash 和 ksh shell：

```
alias foo='set -f;foo';foo(){ ~/bin/foo "$@";set +f;} 
```

对于 csh 和 tcsh shell：

```
alias foo 'set noglob;$home/bin/foo \!*;unset noglob' 
```

对于 zsh 外壳：

```
alias foo='noglob ~/bin/foo' 
```

以上所有内容均使用 Apple 的 OSX 10.9.2 进行了测试。注意：复制上述代码时，请注意删除任何空格。它们可能很重要。

## 更新：

用户[geira](https://stackoverflow.com/users/563995/geira)指出，在 bash shell 的情况下

```
alias foo='set -f;foo';foo(){ ~/bin/foo "$@";set +f;} 
```

可以替换为

```
reset_expansion(){ CMD="$1";shift;$CMD "$@";set +f;}
alias foo='set -f;reset_expansion ~/bin/foo' 
```

这消除了对函数 foo 的需要。

用于创建此文档的一些网站：

*   [Unix 外壳](http://en.wikipedia.org/wiki/Unix_shell)

*   [将命令行参数传递给 Bash 别名命令](http://www.cyberciti.biz/faq/linux-unix-pass-argument-to-alias-command/)

*   [Csh - C Shell](http://www.grymoire.com/unix/Csh.html)

*   [Bash 内置命令](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-alias)

*   [与 Bourne shell 和 csh 启动序列的比较](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29#Comparison_with_the_Bourne_shell_and_csh_startup_sequences)

*   [csh 中的别名循环](https://unix.stackexchange.com/questions/28704/alias-loop-in-csh)

*   [如何将命令行参数传递给 shell 别名？](https://stackoverflow.com/questions/941338/shell-script-how-to-pass-command-line-arguments-to-a-unix-alias)

*   [当 bash 函数具有相同名称时调用程序](https://stackoverflow.com/questions/6365795/invoking-program-when-a-bash-function-has-the-same-name)

*   [特殊外壳变量](http://www.tcsh.org/tcsh.html/Special_shell_variables.html)

*   [带有命令行参数的 C Shell 别名](http://docstore.mik.ua/orelly/unix/upt/ch10_03.htm)

*   [防止 Shell 脚本中的通配符扩展/通配符](http://blog.edwards-research.com/2011/05/preventing-globbing/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-12T16:33:51.680

扩展是在程序运行之前由 shell 执行的。您的程序不知道是否发生了扩展。

```
 set -o noglob 
```

将关闭调用 shell 中的扩展，但您必须在调用程序*之前*执行此操作。

另一种方法是引用您的论点，例如

```
foo "*" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-24T11:52:15.387

注意：如果没有匹配掩码的名称，bash 会按原样传递参数，而不进行扩展！

证明（pa.py 是一个非常简单的脚本，它只打印它的参数）：

```
 $ ls
f1.cc  f2.cc  pa.py
 $ ./pa.py *.cc
['./pa.py', 'f1.cc', 'f2.cc']
 $ ./pa.py *.cpp
['./pa.py', '*.cpp'] 
```

# java - 如何删除标题视图？或修复此异常：“无法将标题视图添加到列表 - 已调用 setAdapter”

> ID：11456405
> 
> 赞同：2
> 
> 时间：2012-07-12T16:30:58.843
> 
> 标签：java, android, header, adapter

我正在制作一个搜索应用程序，您可以在其中输入一个术语，然后出现一个结果列表（ListView），并带有一个标记列表的标题。您可以进行另一次搜索并获得一组不同的结果。或者，您可以选择其中一个结果，然后它会将您带到另一个 Activity，其中包含该选择的详细信息的 ListView。这一切都很好。

但是，当您从详细信息活动返回到搜索活动并输入另一个搜索词时，我收到以下错误。

```
Cannot add header view to list -- setAdapter has already been called. 
```

我的两个活动课程都有一行

```
adapter.setAdapter(results); 
```

据我了解，这是不允许的。我解决此问题的方法是在详细信息活动的 onDestroy() 中删除/清除有问题的数据（那会是视图吗？列表？适配器？）。但我不知道该怎么做，或者这是否是正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:44:31.880

正如异常明确指出的那样，您已经为 设置了适配器`ListView`，现在尝试将标题视图添加到`ListView`.

据我了解，您只需要添加一次标题视图，但只需更改每个搜索结果的标题视图显示的文本/数据（通过更改适配器中的数据）。您可以相应地重新构建您的代码。

# icalendar - iCalendar 中的 RECURRENCE-ID (RFC 5545)

> ID：11456406
> 
> 赞同：4
> 
> 时间：2012-07-12T16:31:03.493
> 
> 标签：icalendar, recurrence, rfc2445, rrule, rfc5545

我对 iCalendar 规范 RFC 5545 中的 Property RECURRENCE-ID 和此属性中的 RANGE 参数有点困惑。

假设日历组件包含一个称为“会议”的重复事件，该事件应安排在 2012 年 8 月 6 日开始的每个星期一的 10 点至 12 点。重复结束应为 2012 年 10 月 29 日。“会议”重新安排为 12 至 15 日2012 年 9 月 3 日之前的每个星期一，将 RANGE 设置为 THISANDFUTURE 以表明所有后续活动也将安排在 12 点到 15 点之间。到 2012 年 10 月 1 日，“会议”将重新安排在每个星期二（而不是星期一）的 10 点到 13 点，范围也设置为 THISANDFUTURE。此外，2012 年 9 月 17 日的单项赛事将重新安排在 8 点至 10 点。

iCalendar 格式的事件将如下所示：

```
BEGIN:VCALENDAR
...
BEGIN:VEVENT
DTSTART:20120806T100000Z
DTEND:20120806T120000Z
UID:atgbutj8md5v35fuguni1of4b9o@google.com
SEQUENCE:1
SUMMARY:Meeting
RRULE:FREQ=WEEKLY;UNTIL=20121029T100000Z
END:VEVENT
BEGIN:VEVENT
DTSTART:20120903T120000Z
DTEND:20120903T150000Z
UID:atgbutj8md5v35fuguni1of4b9o@google.com
SEQUENCE:1
SUMMARY:Meeting
RRULE:FREQ=WEEKLY;UNTIL=20121029T100000Z
RECURRENCE-ID;RANGE=THISANDFUTURE:20120903T100000Z
END:VEVENT
BEGIN:VEVENT
DTSTART:20121002T100000Z
DTEND:20121002T130000Z
UID:atgbutj8md5v35fuguni1of4b9o@google.com
SEQUENCE:1
SUMMARY:Meeting
RRULE:FREQ=WEEKLY;UNTIL=20121029T100000Z
RECURRENCE-ID;RANGE=THISANDFUTURE:20121001T100000Z or 20121002T120000Z???????????
END:VEVENT
BEGIN:VEVENT
DTSTART:20120917T080000Z
DTEND:20120917T100000Z
UID:atgbutj8md5v35fuguni1of4b9o@google.com
SEQUENCE:1
SUMMARY:Meeting
RRULE:FREQ=WEEKLY;UNTIL=20121029T100000Z
RECURRENCE-ID:20120917T100000Z or 20120917T120000Z?????????
END:VEVENT
END:VCALENDAR 
```

我不确定的值是 RECURRENCE-ID 和 RRULES 的值。

-) 第三个和第四个事件应该使用哪个日期？他们应该参考主要事件（第一个事件）还是第二个事件，因为这是重新安排的“最近”事件？

-) 如果我对 RFC5545 的解释是正确的，则 RRULE 可能不会更改或重新安排。这意味着规则在子事件中也是相同的。最后一场活动会发生什么，原定于 2012 年 10 月 29 日 10 点至 12 点举行，但第三场活动改期至次日 10 点。这是日历组件的重复集中的最后一个事件，还是在所有事件中都更改 UNTIL 值以便包括 10 月 30 日 10 点？

提前致谢！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:47:33.907

使用 THISANDFUTURE 和互操作性重新安排的困难已在[calconnect interop oct 2010](http://www.calconnect.org/pubdocs/CD1014%20October%202010%20CalConnect%20Interoperability%20Test%20Event%20Report.pdf)中记录。

如果可以的话，interop 可能更容易/更安全地遵循 RFC5545 § 3.8.4.4 中的注释。

> “RANGE”参数可能不适合重新安排特定的后续实例 [...]。在这种情况下，日历应用程序可以简单地截断无限循环日历组件（即，使用“COUNT”或“UNTIL”规则部分），并为未来实例创建两个新的无限循环日历组件。

# asp.net - 验证码/数字签名部署

> ID：11456408
> 
> 赞同：1
> 
> 时间：2012-07-12T16:31:11.873
> 
> 标签：asp.net, security, iis, digital-signature, public-key-encryption

在将（ASP.NET）网站部署到国外服务器的情况下，对程序集进行数字签名可以带来哪些安全优势？我不是在问数字签名的作用，因为我已经知道了。

如果供应商不是我的公司，我很好奇网站主机操作系统是否可以检查发布者并拒绝加载网站。换句话说，如果攻击者替换了我在服务器上的一个或多个程序集，我希望该站点拒绝加载。

当然，Authenticode 本质上提供了这种功能，但我只知道它在 IE 中的使用……这不是我要解决的场景。有没有办法将 Authenticode 或类似的东西（可能通过 API 或操作系统配置）合并到站点/IIS/WAS 引导过程中？

# django - 删除具有 ImageField 字段的对象时未删除图像文件

> ID：11456410
> 
> 赞同：14
> 
> 时间：2012-07-12T16:31:14.293
> 
> 标签：django, imagefield

我有一个`Picture`带有`ImageField`. 删除 的实例时，不会删除`Picture`中设置的文件。`ImageField`

它是一个错误吗？我该怎么做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T16:47:25.560

在 Django 1.3中*有意*`FileField`删除了与s 和`ImageField`s关联的文件。见[票 #6456](https://code.djangoproject.com/ticket/6456)。如果请求出现问题，Django 广泛使用事务来防止数据损坏。如果删除事务被回滚，则在文件从文件系统中删除后，您现在有一条指向不存在文件的记录。所有要求自动删除返回的票已被简要标记为“不会修复”，因此这不会改变。

 *有关解决方法，请参阅[之前的 StackOverflow 问题](https://stackoverflow.com/questions/5372934/how-do-i-get-django-admin-to-delete-files-when-i-remove-an-object-from-the-datab)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:52:07.720

假设？

```
class Picture(models.Model):
    image = ImageField(blank=True, null=True, upload_to="pics")

    def delete(self, *args, **kwargs):
        self.image.delete()
        super(Picture, self).delete(*args, **kwargs) 
```

然后让我们手动创建和删除这个..

```
image = "./image.jpg"
picture = Picture.objects.create(image=File(open(image, "r"))
picture.save() 
```

然后删掉？

`picture.delete()`

高温高压*

# c# - 可以使此方法通用（采用 Crystal Report 对象）

> ID：11456414
> 
> 赞同：2
> 
> 时间：2012-07-12T16:31:24.973
> 
> 标签：c#, generics, crystal-reports, .net-2.0

我有一个看起来像这样的代码块

```
CrystalReport2 report1 = new CrystalReport2();
                    report1.SetParameterValue("@StartDate", startDate);
                    report1.SetParameterValue("@EndDate", endDate);
                    report1.SetParameterValue("@show", 1);
                    report1.SetParameterValue("@name", name);

                    string fullFileName = //filename;
                    report1.ExportToDisk(ExportFormatType.Excel, fullFileName);
                    report1.Close();
                    report1.Dispose(); 
```

我有几个这样的报告，每个报告的代码块几乎相同。它们都使用相同的参数集并以相同的方式导出。

它们都生成不同的数据集（因此我有一些报告）。

所以我只能看到一个喜欢改变一个

```
CrystalReport2 report1 = new CrystalReport2();
CrystalReport3 report2 = new CrystalReport3(); 
```

那么我可以使上面的代码成为可以接受任何报告的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:51:02.190

您可以使用这样的助手：

```
 public static void MyReportsCommonTasks(
        CrystalDecisions.CrystalReports.Engine.ReportClass report,
        DateTime startDate,
        DateTime endDate,
        String name,
        String fullFileName)
    {
        report.SetParameterValue("@StartDate", startDate);
        report.SetParameterValue("@EndDate", endDate);
        report.SetParameterValue("@show", 1);
        report.SetParameterValue("@name", name);
        report.ExportToDisk(ExportFormatType.Excel, fullFileName);
        report.Close();
        report.Dispose();
    } 
```

请注意，这是可能的，因为报告从`CrystalDecisions.CrystalReports.Engine.ReportClass`

按照如何在方法中实例化报告的示例：

```
 public static void MyReportsCommonTasks<R>(
        DateTime startDate,
        DateTime endDate,
        String name,
        String fullFileName) 
        where R : CrystalDecisions.CrystalReports.Engine.ReportClass, new()
    {
        ReportClass report = new R();
        report.SetParameterValue("@StartDate", startDate);
        report.SetParameterValue("@EndDate", endDate);
        report.SetParameterValue("@show", 1);
        report.SetParameterValue("@name", name);
        report.ExportToDisk(CrystalDecisions.Shared.ExportFormatType.Excel, fullFileName);
        report.Close();
        report.Dispose();
    } 
```

# c# - Selenium WebDriver - 没有驱动程序为我工作

> ID：11456416
> 
> 赞同：3
> 
> 时间：2012-07-12T16:31:28.893
> 
> 标签：c#, selenium, webdriver

我正在尝试运行 Selenium 测试。我正在使用 C#。我尝试过的每个驱动程序都有问题。

## 铬合金

```
var options = new OpenQA.Selenium.Chrome.ChromeOptions();
options.BinaryLocation = @"C:\Users\Vilem\AppData\Local\Google\Chrome\Application\";

using (IWebDriver driver = new OpenQA.Selenium.Chrome.ChromeDriver(options))
{
... 
```

似乎找到了 chromedriver.exe，但它可以找到 Chrome 二进制文件。自动搜索失败后，我明确设置了 chrome.exe 的路径。我什至在最后尝试了“chrome.exe”。我总是得到相同的结果：

**在以下位置找不到 Chrome 二进制文件：**

**C:\Users\Vilem\AppData\Local\Google\Chrome\Application**

## 火狐

```
new OpenQA.Selenium.Firefox.FirefoxDriver(); 
```

我还尝试了一个配置文件集：

```
FirefoxProfile profile = new FirefoxProfile(@"E:\...\FirefoxProfile"); 
new OpenQA.Selenium.Firefox.FirefoxDriver(); 
```

我得到的错误：

**无法在 45000 毫秒内绑定到锁定端口 7054**

## IE

```
var ieOptions = new InternetExplorerOptions();
ieOptions.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
new InternetExplorerDriver(@"C:\Program Files (x86)\IEDriver\", ieOptions); 
```

包含驱动程序的文件夹也在 PATH 中设置。

我得到的错误：

```
No response from server for url http://localhost:6955/session 
```

有什么我想念的吗？如果他们中的任何一个开始工作，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:19:33.787

我通过将 ChromeDriver 和 IE_driver 的 .exe 放在项目 /bin/ 文件夹中来让 Chrome 和 IE 正常工作

前任。

```
VisualStudio2010/Projects/ProjName/ProjName/bin/chromedriver.exe 
```

然后在设置我的测试时，我做了：

```
using OpenQA.Selenium.Chrome;
...
private IWebDriver chrome;
...
[SetUp]
public void SetupTest()
    {
        chrome= new ChromeDriver();
        baseURL = "url-goes-here";
        verificationErrors = new StringBuilder();
    }
... 
```

如果您还没有，可以从[这里](http://code.google.com/p/selenium/downloads/list)下载 .exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:39:25.907

## 铬合金

> 在以下位置找不到 Chrome 二进制文件：
> C:\Users\Vilem\AppData\Local\Google\Chrome\Application

我认为您必须指定包括可执行文件在内的整个路径。喜欢 `C:\Users\Vilem\AppData\Local\Google\Chrome\Application\chrome.exe`（只是猜测，目前无法访问 Windows 机器）

## 火狐

> 无法在 45000 毫秒内绑定到锁定端口 7054

你不应该永远得到那个。告诉您而不问很多问题的最快解决方案：重新启动（或注销-登录）。如果您在重新启动后仍然得到它，请查看有关它的问题，并可能发布您自己的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:17:05.107

您应该指定包含 .exe 的路径。因此，您的代码如下所示：

```
options.BinaryLocation = @"C:\Users\Vilem\AppData\Local\Google\Chrome\Application\chrome.exe";
new InternetExplorerDriver(@"C:\Program Files (x86)\IEDriver\iexplore.exe", ieOptions); 
```

# c++ - 运算符重载和复制构造函数 - c++

> ID：11456418
> 
> 赞同：0
> 
> 时间：2012-07-12T16:31:31.167
> 
> 标签：c++, operator-overloading, copy-constructor

请花点时间查看下面的代码并回答我的问题

```
class Vector
{
public:
    int x, y;
    /* Constructor / destructor / Other methods */
    Vector operator + (Vector & OtherVector);
    Vector & operator += (Vector & OtherVector);
};

Vector Vector::operator + (Vector & OtherVector)  // LINE 6
{
    Vector TempVector;
    TempVector.x = x + OtherVector.x;
    TempVector.y = y + OtherVector.y;
    return TempVector;
}

Vector & Vector::operator += (Vector & OtherVector)
{
    x += OtherVector.x;
    y += OtherVector.y;
    return * this;
}

Vector VectorOne;
Vector VectorTwo;
Vector VectorThree;

/* Do something with vectors */
VectorOne = VectorTwo + VectorThree;
VectorThree += VectorOne; 
```

该代码是从一本书中摘录的，但其中没有很好地解释。具体来说，我无法理解第 6 行的程序。构造函数和运算符都没有重载。请解释操作符重载和复制构造函数在这个程序中是如何工作的。

编辑：为什么我们使用引用运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:16:03.990

此代码不包含复制构造函数，但是复制构造函数用于动态分配类成员的场景，因此一旦实例或对象超出范围，程序不应崩溃，因为析构函数将释放动态分配的如果您分别为 new 或 malloc 包含 delete 或 free ，则内存。

现在来到第 6 行的运算符重载：当您添加到对象时

VectorOne = VectorTwo + VectorThree；

调用第 6 行函数，它创建临时对象以对 VectorTwo 和 VectorThree 的成员进行加法，然后将临时对象返回给 VectorOne，因此 VectorOne 接收 TempVector 的按位**副本**。. 请记住，VectorTwo 被隐式传递给此函数，因为它位于重载运算符的左侧当您添加对象时`VectorThree += VectorOne;`，会调用函数 operator+=() 并将 VectorThree 隐式传递给该函数，然后该函数返回按位副本隐式传递给函数的对象。关键字**this**指向在本例中为 VectorThree 调用函数的对象。然后返回的副本再次保存在 VectorThree 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:50:02.390

第 6 行重载了“+”运算符，而第 14 行重载了“+=”运算符。例如：

```
Vector v1,v2,v3;

v1 += v2; // Line 14 takes care of this one

v3 = v1 + v2; // Line 6 takes care of this one 
```

这里最大的区别是“+=”重载修改了调用该运算符的实例中的值（上例中的v1），而“+”运算符采用两个实例并使用修改后的值生成第三个实例. 希望这很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:41:11.220

```
6:   Vector operator + (Vector & OtherVector);
7:   Vector & operator += (Vector & OtherVector); 
```

那些声明运算符重载。它们对于表明您确实想要重载运算符是必要的。更多关于下面的返回值：

```
10: Vector Vector::operator + (Vector & OtherVector)
11: {
12:  Vector TempVector;
13:  TempVector.x = x + OtherVector.x;
14:  TempVector.y = y + OtherVector.y;
15:  return TempVector;
16: } 
```

返回 TempVector 的副本，它添加了向量的 x 和 y 分量。这允许以下用法（前提是还定义了赋值运算符：

```
24: Vector VectorOne;
25: Vector VectorTwo;
26: Vector VectorThree;
27: /* Do something with vectors */
28: VectorOne = VectorTwo + VectorThree;

17: Vector & Vector::operator += (Vector & OtherVector)
18: {
19:  x += OtherVector.x;
20:  y += OtherVector.y;
21:  return * this;
22: } 
```

这与上面的相同，只是我们添加到调用实例而不是临时变量的细微差别。这导致返回`*this`。`this`是指向该类的当前实例的指针，因此为了获得它的值，您需要使用星号取消引用运算符（如果我对运算符的名称有误，请纠正我）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:41:21.630

创建 Vector 类的`operator+`新实例，将两个输入的 x 和 y 元素之和放入该新实例，然后返回新实例。至少国际海事组织（我无法想象有很多人不同意）最好写成这样的：

```
Vector Vector::operator+(Vector const &otherVector) const {
    // ...
} 
```

...将函数本身及其正确输入限定为`const`，因为它不打算修改任何一个。函数的限定条件基本上是指左操作数，所以这基本上是说当我们执行类似 的操作时`a = b + c;`，既`b`不会也`c`不会被修改（即，正是您通常所期望的）。这允许（除其他外）将类型的临时对象`Vector`用作操作数，并确保您不会无意中修改输入。

`operator+=`修改它的左操作数，所以它只是将另一个向量中的 x 和 y 元素添加到自身。然后它返回对作为左操作数提供的操作数（修改版本）的引用。这允许运算符链接，例如：

```
Vector a, b, c;

// code to initialize a, b and c here

a += (b += c); 
```

同样，它会受益于通过引用 const 来获取输入：

```
Vector &Vector::operator+=(Vector const &other) {
    // ...
} 
```

在这种情况下，我们*不能*（也不想）`const`限定函数本身，因为它*确实*修改了它的左操作数（再次，正是你所期望的：在 中`a += b`，我们期望`a`改变并`b`保持不变）。

至少正如您所展示的，类定义不包含显式复制构造函数，这意味着如果您复制此类的对象，编译器将为您合成一个复制构造函数。在应该没问题的情况下——类中唯一的数据是两个整数，这通常可以用于成员副本（这是编译器将生成的）。显式复制构造函数的最常见原因是一个类包含一个或多个指向它所拥有的对象的指针（在这种情况下，您还希望看到三/五的规则）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:42:01.967

第 6 行和第 7 行是重载运算符的原型。

```
Vector & operator += (Vector & OtherVector); 
```

返回类型是向量引用，参数是向量引用。运营商就是`+=`运营商。该函数将在以下行调用：

```
VectorThree += VectorOne; 
```

定义在第 17 行。您可以看到它们的行为与典型的成员函数相同（它们有一个`this`常量，隐式用于定位 x 和 y）。作为典型的 += 运算符，该函数的工作方式是参数的内容`VectorOne`保持不变，并将 的内容`VectorThree`设置为其原始值 plus `VectorOne`，并返回新的值 of `VectorThree`。您可以自己验证整数类型的 += 运算符是否以与以下代码段相同的方式工作：

```
int a = 1, b = 2, c;
c = (a += b);
cout << "a: " << a << " b: " << b << " c: " << c << endl; 
```

重要的是要注意，类的运算符的实现可以遵循他们想要的任何模型。例如，字符串的 += 运算符是就地追加运算符。一般来说，如果一个类定义了一个 + 运算符和一个 += 运算符，+ 运算符将接受 2 个参数，执行一些操作，并返回第三个值，而 += 运算符将接受 2 个参数，执行一些操作，修改其参数之一，并返回该值。

同样重要的是要注意，由于两个运算符的参数值都没有改变，您可以将它们设为 const，如下所示：

```
Vector operator + (const Vector & OtherVector);
Vector & operator += (const Vector & OtherVector); 
```

这样做的原因是，如果你想将一个 const 变量传递给一个没有声明其参数 const 的运算符，你将无法做到，即使它没有更改它们。如果没有为 += 的参数指定 const，则以下内容是非法的，如果是，则合法：

```
Vector value1;
const Vector value2;

value1 += value2; 
```

# javascript - 如何在 Safari/Chrome 中不重新加载页面的情况下修改页面 URL 的锚点？

> ID：11456419
> 
> 赞同：0
> 
> 时间：2012-07-12T16:31:33.617
> 
> 标签：javascript, google-chrome, safari, anchor

我正在尝试在 javascript 中修改页面的 URL（实际上是父框架集），如下所示：

```
function b(str) {
  window.top.location.hash = str // originally was "#"+str
  return true
} 
```

这是从 gen.php 中的锚点调用的，如下所示：

```
<a onclick="b('Page29.html')" href="Page29.html" target="content"> 
```

顶级页面如下所示：

```
<!doctype html> 
<html>
<head>
<title>Test</title>
</head>
<frameset cols="320,*" frameborder="0" border="0" framespacing="0">
<frame name="menu" src="gen.php">
<frame name="content" src="about:blank">
</frameset>
</html> 
```

这在 Firefox 中运行良好，但在 Safari 中（更新：AND）Chrome 只需更改锚点就会重新加载整个页面！这是一个问题，因为我的页面中有状态正在丢失。我怎样才能抑制这种行为？

这是我根据以下建议尝试的更新代码：

```
function b(str) {
  top.location.href = "#"+str
  return true
} 
```

在这种情况下，当我单击链接时，顶层框架会下降，并且页面会替换为 gen.php#Page29.html。

更新：看起来 location.hash 在框架中不起作用是 WebKit 中的一个错误，自 2009 年以来出现： [https ://bugs.webkit.org/show_bug.cgi?id=24578](https://bugs.webkit.org/show_bug.cgi?id=24578)

这是我根据以下答案提出的解决方法：

```
function b(str) {
    if(history.pushState) {
        top.history.replaceState(null, top.document.title, '#'+str);
    } else {
        top.location.hash = hash;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:42:35.090

试试这些

```
function getLocationHash() {  
        alert(window.location.hash);  
    }  

function setLocationHash(hash) {  
        window.location.hash = hash;  
} 
```

打电话喜欢

```
setLocationHash("#your-hash-string"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:33:53.480

你应该在“pushState” [http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:33:14.087

简单地

```
location.href = '#newHash'; 
```

或者，如果您的意思是要从内部框架的页面内对框架集父级执行此操作，请使用

```
top.location.href = '#newHash'; 
```

# java - 检索两个文件之间的差异 - Perforce Java API

> ID：11456425
> 
> 赞同：2
> 
> 时间：2012-07-12T16:32:05.397
> 
> 标签：java, api, diff, perforce

我刚刚编写了一个获取两个 IFileSpec 对象之间差异列表的方法，但是，我不知道如何从 IFileDiff 对象中实际检索差异。

这是我到目前为止写的方法，

```
public void getFileDiff(String file1, String file2){

        List<IFileSpec> fileList1 = null;
        List<IFileSpec> fileList2 = null;
        List<IFileDiff> fileDiff = null;
        try{

            fileList1 = getIFileSpecList(file1);
            fileList2 = getIFileSpecList(file2);

            fileDiff = iServer.getFileDiffs(fileList1.get(0), fileList2.get(0), null, DiffType.IGNORE_LINE_ENDINGS,false,true,false);

            for(IFileDiff iFileDiff : fileDiff) {

                System.out.println(iFileDiff.getRevision1() + " ::: " + iFileDiff.getRevision2());

            }

        }
        catch(Exception e){e.printStackTrace();}
    } 
```

这段代码愉快地打印了文件的正确修订，但获得实际的字符串差异是我尚未遇到的。如果有人知道该怎么做，我真的很想听听你的消息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:37:23.450

我忘了回答这个问题，据我所知，没有办法使用 Perforce Java API 来获得两个文件的差异。唯一的方法是，将文件同步到一个临时位置并调用操作系统内置的“diff”命令。捕获输出并通过管道传输到您的应用程序。

# lotus-notes - Lotus Notes SELECT 公式使用 @IsMember 和 @UserRoles 获取视图

> ID：11456428
> 
> 赞同：0
> 
> 时间：2012-07-12T16:32:13.230
> 
> 标签：lotus-notes, lotus-formula

我有一个视图，我想在其中隐藏文档（稍后您会看到，导致我的问题的不是文档，而是分类视图）只能由特定角色访问。

我会尽量做到具体，所以如果有不清楚的地方，请随时问我问题。

*请注意英语不是我的第一语言;-)*

我有 4 种不同类型的文档，3 种（TypeA、TypeB 和 TypeC）对所有人可见，1 种（TypeD）需要特定角色（例如 [RoleD]）。

该视图按文档类型分类，并且每个文档上都有安全字段，如果您没有适当的角色，它们会阻止它们被看到。因此，当您查看视图而不是 [RoleD] 的成员时，您会得到以下结果：

```
TypeA
    Doc1
    Doc2
    Doc3
TypeB
    Doc4
    Doc5
TypeC
    Doc6
    Doc7
TypeD
    {Empty} 
```

我的问题是即使TypeD的所有文档都被隐藏了，我也希望隐藏“类别”。

我在视图选择中尝试了一些条件，仅当用户是角色 [RoleD] 的成员时才选择 TypeD 文档，但使用@If、@IsMember（和@IsNotMember）和@UserRoles 没有任何成功。结果很奇怪，即使我是角色的成员，类别和文档也是隐藏的（？！？！？）。

这是我到目前为止所尝试的：

```
Try #1
    @If(@IsNotMember("[RoleD]";@UserRoles) ; DocTypeField != "TypeD" ; 1=1)
Try #2
    @IsNotMember("[RoleD]";@UserRoles) & DocTypeField != "TypeD"
    |
    @IsMember("[RoleD]";@UserRoles) & 1=1 
```

我希望它不会太混乱。

感谢您急需的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:08:30.620

有一个名为“不显示空类别”的视图属性。你的观点是这样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:37:32.527

肯的​​回答是正确的。不过我想指出两点。

首先，“不要显示空类别”可能会导致用户性能下降。在有大量文档（数以万计）并且个人用户只能访问其中很小一部分的情况下尤其如此。

其次，您不能在视图中可靠地使用 @UserRoles 的原因是，对于*常规视图*，视图索引不是由客户端构建的。应用选择公式的是服务器上的索引器任务，因此@UserRoles 将返回适用于服务器 ID 的角色。如果您使用由客户端索引的*私有视图*，则 @UserRoles 将返回您期望的内容。还有比这更多的细节需要考虑，但经验法则是视图选择公式通常不应使用为不同用户返回不同结果或在不同日期/时间返回不同结果的函数。

# jquery - 如果浏览器不支持 jQuery 则重定向

> ID：11456429
> 
> 赞同：0
> 
> 时间：2012-07-12T16:32:13.527
> 
> 标签：jquery, redirect, browser

如果用户的浏览器不支持 jQuery，我该如何重定向用户？

如果浏览器不支持特定版本的 jQuery（例如 1.3），是否可以重定向？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T16:34:21.200

没有“不支持 jQuery 的浏览器”之类的东西——如果浏览器支持 JavaScript，那么它也“支持 jQuery”。

但是，用户可能禁用了 JavaScript。在这种情况下，您可以使用`<noscript>`并放置一个元重定向来重定向。

也有可能 jQuery 不支持用户的旧浏览器。但是，除非您有客户使用像 IE4 或 NS4 这样的遗留物，这在目前是极不可能的（在 jQuery 2.0 推出后更可能会放弃旧的 IE 支持）。为了确保您的基于 jQuery 的代码在现代浏览器中工作，您还需要使用**jQuery 的现代版本**，例如 1.7.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:35:06.927

好奇您的意思，因为 jQuery（至少目前）甚至支持 IE6，那么您希望使用哪些浏览器？正如 TheifMaster 在他的回答中所说（我不会在这里劫持和重复），您可能实际上想要查看`<noscript`> 标签。

无论如何，对于您的问题：您需要以某种方式确保您的脚本在任何可能的 jQuery 之后加载，否则它会给出不可靠的读数。或者坚持超时，或者其他什么。

检测 jQuery：

```
if (!window.jQuery) //no jQuery... 
```

检测 jQuery 版本

```
alert(jQuery.fn.jquery); //e.g. 1.7.2 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-12T16:34:07.037

```
top.location.href = 'url'; 
```

如果 JavaScript 还是不行，可以使用 PHP：

```
<?php 
  header('Location: url');
?> 
```

# c# - 如何在不混合或过滤的情况下在 C# 中调整位图图像的大小？

> ID：11456440
> 
> 赞同：7
> 
> 时间：2012-07-12T16:33:01.197
> 
> 标签：c#, bitmap, resize, interpolation, smoothing

我有一张想要放大的灰度图像，以便更好地查看各个像素。我尝试将平滑模式设置为无和一些不同的插值模式（如此处其他问题所建议的那样），但在我看来，图像在显示在屏幕上之前仍然在进行某种混合。

基本上如果我有一个图像

```
(White, White,
 White, Black) 
```

我想当我放大它说 6x6 时，它看起来像

```
 (White, White, White, White, White, White
  White, White, White, White, White, White
  White, White, White, White, White, White
  White, White, White, Black, Black, Black
  White, White, White, Black, Black, Black
  White, White, White, Black, Black, Black) 
```

黑白区域之间没有褪色，应该看起来像一个正方形。图像应该看起来更“像素化”而不是“模糊”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T16:41:47.693

尝试设置插值模式：

```
g.InterpolationMode = InterpolationMode.NearestNeighbor; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T00:27:59.180

我也想做类似的事情。当我发现这个问题时，两个答案都不是我想要的，但它们结合在一起。这就是让我到达我想去的地方的原因，并且从你的问题中我可以看出你想要什么。

```
private Bitmap ResizeBitmap(Bitmap sourceBMP, int width, int height)
{
    Bitmap result = new Bitmap(width, height);
    using (Graphics g = Graphics.FromImage(result))
    {
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
        g.DrawImage(sourceBMP, 0, 0, width, height);
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:38:58.280

可能这会有所帮助！

[http://www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET](http://www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET)

否则你能否实现这个方法，看看它是否适合你？

```
private static Bitmap ResizeBitmap(Bitmap sourceBMP, int width, int height )
{
            Bitmap result = new Bitmap(width, height);
            using (Graphics g = Graphics.FromImage(result))
                g.DrawImage(sourceBMP, 0, 0, width, height);
            return result;
 } 
```

# c++ - 在 C++ 中始终使用后缀“f”作为浮点数有什么好处？

> ID：11456441
> 
> 赞同：1
> 
> 时间：2012-07-12T16:33:10.127
> 
> 标签：c++

在 C++ 中始终使用后缀“f”作为浮点数有什么好处？

一方面我的代码变得一团糟，我的意思是我有很多数学公式，想象一下，而不是简单地写 1，而是写 1.0f。它会使代码混乱。

但我想知道这方面是否有优化或其他方面？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:41:28.263

有时它变得*必要*。

考虑这个函数模板：

```
template<typename T>
void f(T a, T b);

float get_value(); //consider this too! 
```

现在看到这个：

```
f(get_value(), 1);   //compilation error
f(get_value(), 1.0); //compilation error
f(get_value(), 1.0f); //okay 
```

在前两个调用中，模板参数推导失败，因此它们无法编译。[在ideone](http://ideone.com/ISxwI)自己查看错误。

请注意 的 类型`1`是`int`和`1.0`是`double`而`1.0f`是`float`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:37:21.140

编译器几乎可以肯定地计算出来，因此没有运行时性能损失。

明确的原因是避免编译器警告有关隐式转换，避免可能出现意外行为的转换，以及在类型推导上下文中推导特定类型或强制调用特定重载。

这是一个示例，其中源想要将值表示为分数，但由于文字类型错误而得到错误的值：

```
float a = 3/4; // produces 0.0f instead of 0.75f 
```

这是由隐式转换引起的警告：

```
tmp.cpp:4:15: warning: implicit conversion loses floating-point precision:
      'double' to 'float' [-Wconversion]
    float a = 0.1;
          ~   ^~~ 
```

这是由于不具体而导致的模棱两可的过载错误的情况：

```
tmp.cpp:6:5: error: call to 'foo' is ambiguous
    foo(1);
    ^~~
tmp.cpp:2:6: note: candidate function
void foo(unsigned char a);
     ^
tmp.cpp:3:6: note: candidate function
void foo(float b);
     ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:36:32.170

`1.0`或者`1.`是一个`double`常数

`1.0f`是一个`float`常数

它们是有区别的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:36:43.073

它可以消除警告。

顺便说一句，根据您的编译器，幕后浮点数被提升为 double 以进行计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:46:53.393

指定 double 与 float 的另一种用途是 FORTRAN 的遗留问题，它可能会或可能不会困扰您的编译器。在过去的日子里，FORTRAN 仅以您指定的精度存储数据，将垃圾留在最后一位数字之外的未指定字节中。编码 x = 1.0 并让 x 实际上等于 1.0987659987623 是很可能的，这取决于“x”的类型（在 FORTRAN 中它是一个单精度浮点数）。

# ms-access - 同时在访问表单上应用过滤器和 OrderBy

> ID：11456443
> 
> 赞同：1
> 
> 时间：2012-07-12T16:33:14.587
> 
> 标签：ms-access, ms-access-2007

### 背景

我正在寻找一种方法来提高 Access 2007 表单的速度/性能。用户有两种不同的数据视图，每种视图都有不同的过滤和排序标准。我有一个复选框可以切换此选项，并有处理切换事件的代码：

```
Private Sub FilterOpenJobs_Click()
    If (FilterOpenJobs.Value) Then
        Me.Filter = "Status='Open'"
        Me.OrderBy = "EndDate"
        Me.FilterOn = True
        Me.OrderByOn = True
    Else
        Me.Filter = ""
        Me.OrderBy = "JOB_NO"
        Me.FilterOn = False
        Me.OrderByOn = False
    End If
End Sub 
```

我遇到的问题是表单记录源相当大，应用过滤器和排序需要一些时间。（另请注意，记录来自混合来源：一些 Access 表，一些 dBase 表。）它运行得足够慢，以至于我能够看到`FilterOn`调用和`OrderByOn`调用之间的中间结果。

### 问题

反正有没有同时应用过滤器和排序？是否有某种方法可以锁定表单以防止更新，以便两者都可以同时发生？我最好为表单`RecordSource`属性分配一个新值吗？如果在行源 SQL 中完成过滤和排序，表单会运行得更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:41:53.670

“*反正有没有同时应用过滤器和排序？* ”

是的，你在第三个问题中提到了它。将修改后的 SQL SELECT 语句替换为表单的`RecordSource`. 然后，不是在`Filter`分配之后有一个停顿，而在 之后是`OrderBy`另一个停顿，您将有一个停顿，其持续时间比其他 2 个的总和短。

至少我希望它会更短。不应该花费太多精力来找出答案。

更改`RecordSource`自动触发 a `Requery`，因此请确保此时不要编写附加代码`Requery`，否则潜在的速度增益将消失。

### 代码（由提问者添加）

假设表单记录源属性是一个没有任何 where 子句或 order by 子句的 SQL SELECT 语句（不是查询名称）：

```
Private Sub Form_Open(Cancel As Integer)
    Me.Tag = Me.RecordSource
    FilterOpenJobs_Click
End Sub

Private Sub FilterOpenJobs_Click()
    If (FilterOpenJobs.Value) Then
        Me.RecordSource = Replace(Me.Tag, ";", " WHERE Status='Open' ORDER BY EndDate;")
    Else
        Me.RecordSource = Replace(Me.Tag, ";", " ORDER BY JOB_NO DESC;")
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:49:02.017

一种解决方案可能是使用 Application objects [Echo](http://msdn.microsoft.com/en-us/library/ff834500.aspx)属性。它可以防止在此类操作期间重新绘制 ms 访问屏幕。不过需要注意的一点是，您必须确保在出现错误时重新启用它。否则应用程序屏幕将不会响应任何内容。

```
Private Sub FilterOpenJobs_Click()

On Error GoTo handler:

    Application.Echo False, "Processing...."

    If (FilterOpenJobs.Value) Then
        Me.Filter = "Status='Open'"
        Me.OrderBy = "EndDate"
        Me.FilterOn = True
        Me.OrderByOn = True
    Else
        Me.Filter = ""
        Me.OrderBy = "JOB_NO"
        Me.FilterOn = False
        Me.OrderByOn = False
    End If

    Application.Echo True, ""
Exit Sub
handler:

    Application.Echo True, ""

    MsgBox Err.Description
End Sub 
```

或者，您可以`RecordSource`按照 HansUp 的建议直接修改。

# date - xquery 1.0 上的日期操作

> ID：11456448
> 
> 赞同：0
> 
> 时间：2012-07-12T16:33:26.863
> 
> 标签：date, datetime, xquery

我这里有一个旧版本的 xquery，用于从后端服务器获取数据。我如何获得当前日期和即将到来的星期日。看起来我看到的所有样本都是最新版本的，我只是无法用它来解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:14:39.200

[FunctX XQuery 函数库](http://www.xqueryfunctions.com/xq/c0002.html)列出了很多日期/时间函数并添加了一些其他有用的函数。它们都适用于 XQuery 1.0，但您可以使用哪些功能取决于您的实现。如果您的实现支持完整的 XQuery 1.0，那么以下内容应该适合您。

看看[`fn:current-date`](http://www.xqueryfunctions.com/xq/fn_current-date.html)。

为了获得下个星期日的日期，使用[`functx:functx:day-of-week`](http://www.xqueryfunctions.com/xq/functx_day-of-week.html)将有很大帮助。您所要做的就是将星期几添加到日期（以及一些转换）。

```
declare namespace functx = "http://www.functx.com"; 
declare function functx:day-of-week 
  ( $date as xs:anyAtomicType? )  as xs:integer? {

  if (empty($date))
  then ()
  else xs:integer((xs:date($date) - xs:date('1901-01-06'))
          div xs:dayTimeDuration('P1D')) mod 7
 } ;

let $today := fn:current-date()
return
    $today + xs:dayTimeDuration(concat('P', functx:day-of-week($today), 'D')) 
```

# php - 使用php将数据从excel文件导入mysql表

> ID：11456450
> 
> 赞同：1
> 
> 时间：2012-07-12T16:33:38.470
> 
> 标签：php, mysql, excel, csv

大家好...我想使用 php 将数据从 excel 文件导入 mysql 表。我用谷歌搜索，但没有找到任何解释，因此我可以理解制作方式。目前我可以导入一个 csv 文件，但我想要一个 xls 文件。你能举个例子或一个开始的想法或一些教程......如果不是你能告诉我：在我的 csv 文件中，我只能在用逗号分隔的情况下插入数据。你能告诉我是否可以插入数据而不必在数据之间放置逗号？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:37:15.170

这是一个基本概述：

1.  [使用phpexcellreader 之](http://sourceforge.net/projects/phpexcelreader/)类的工具从输入流中读取文件

2.  打印出物体，看看它长什么样

3.  根据您想要的字段构建查询字符串

4.  建立一个mysql连接

5.  插入字符串

您还可以将文件保存为 csv，并且有大量关于如何使用这些文件的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:35:15.970

您必须将其转换为 CSV 文件，或使用工具直接执行此操作，如果您想在此处使用代码执行此操作，我会为您提供 3 个不同的选项来执行此操作。

[在 PHP 中从 Excel 导入数据](https://stackoverflow.com/questions/2066961/import-data-from-excel-in-php)

[http://de77.com/php/import-excel-xls-document-into-mysql-database](http://de77.com/php/import-excel-xls-document-into-mysql-database)

[http://rackerhacker.com/2008/11/07/importing-excel-files-into-mysql-with-php/](http://rackerhacker.com/2008/11/07/importing-excel-files-into-mysql-with-php/)

我认为这些教程非常好，会帮助你

# php - PHPExcel - 我的 CSV 自动检测器：我可以在解析之前访问 orig 上传的文件吗？

> ID：11456456
> 
> 赞同：1
> 
> 时间：2012-07-12T16:33:59.393
> 
> 标签：php, csv, phpexcel

我希望在这里找到一些 PHPExcel 用户，因为他们的讨论组中的活动似乎有点悠闲:)。（我的原始帖子[**可以在这里看到**](http://phpexcel.codeplex.com/discussions/362816)）

我拼凑了一个用于自动检测 CSV 文件的分隔符和/或附件的功能。
现在它正在运行，我想将它插入 PHPExcel（通过扩展 CSV 类）。
我唯一的问题是我的 OOP 技能还很年轻，而且我很难找到如何/在哪里集成它。

我的函数目前采用通过 创建的数组`file()`，但如果需要，我可以轻松更改它。

```
function autoDetect(array $file, array $toDetect=array(true,false), $sampleSize=5){  

    $detectDelim = $toDetect[0]? true: false;
    $detectEncl = $toDetect[1]? true: false; 
    $sampleSize = ( count($file) < $sampleSize)? count($file): $sampleSize;  // set sample-size to the lesser value    
    array_splice($file, $sampleSize);  // trim down the array to only first X rows

    $delimiters = array(',','^','.',';',':',"\t"); // first elem will be the dflt
    $delimRegex = implode('',$delimiters);

    $enclosures = array('"',"'",'^'); // first elem will be the dflt
    $enclRegex = implode('',$enclosures);

    foreach ($file as $row) {
        $row=preg_replace( '/\r\n/', '', trim($row) );  // clean up .. strip new line and line return chars

        if($detectDelim){
            $stripped=preg_replace( "/[^$delimRegex]/", '', $row);  // clean up .. strip evthg x'ept dilim's
            $delimRowChars = str_split($stripped);  // get each char so we can inspect individually
            $delimCount = _count_instances($delimRowChars, $delimiters);  // TODO : fix how this overwrites itself
            // TODO : set delim
        }

        if($detectEncl){
            $stripped=preg_replace( "/[^$enclRegex]/", '', $row);  // clean up .. strip evthg x'ept dilim's
            $enclRowChars = str_split($stripped);  // get each char so we can inspect individually
            $enclCount = _count_instances($enclRowChars, $enclosures);  // TODO : fix how this overwrites itself
            // TODO : set encl
        }
    }

    echo'<pre>delims found in sample set: ', print_r($delimCount), '</pre>';  // For Testing ---->
    echo'<pre>encls found in sample set: ', print_r($enclCount), '</pre>';  // For Testing ---->
    echo "<pre>Suggested Delimiter: '",_array_max($delimCount),"' </pre>";  // For Testing ---->    
    echo "<pre>Suggested Enclosure: '",_array_max($enclCount),"' </pre>";  // For Testing ---->

    //return TODO ;        
}

/**
 * 
 */
function _count_instances(array $haystacks, array $needles, $maxOnly = false){
    $basket = array();  // instantiate
    foreach ($haystacks as $haystack) {
        foreach ($needles as $needle) {  // this throws an undef'd index err and adds an element to the array
            if( strpos($haystack, $needle) !== false) {  // if the needle is in the haystack ...
                if($needle == "\t") $needle = '\t';  // TODO : decouple this from "\t" so it can work for other chars too
                $basket[$needle]++;  // ... increment
            }
        }
    }
    if($maxOnly) $basket = _array_max($basket);
    return $basket;
}

/**
 * 
 */
function _array_max(array $target){
    $target = array_keys($target, max($target));
    $target = $target[0];
    return $target;
} 
```

我只需要在文件被解析之前运行我的自动检测器，我没有看到对象中的信息。
何时/何地/如何插入？是否可以访问原始文件，或者???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:43:48.230

PHPExcel 社区最终确实提供了响应，所以我想为了后代的缘故我会在这里分享它:)
也可以通过 OP 顶部提供的链接看到它。

> “您需要在 PHPExcel/Reader/CSV.php 文件的 loadIntoExisting 方法中调用此自动检测器；但脚本一次读取 CSV 行，而不是将每一行都加载到内存中（我们有足够的内存问题而不刻意尝试创建它们）。从逻辑上讲，您可能希望在检查 BOM 后立即加载几行，设置 $this->_delimiter 值，然后记得在之后回退文件。

希望它可以帮助别人。

# c# - 调整 ScrollViewer.ComputedVerticalScrollBarVisibility 上的列表视图列的大小更改

> ID：11456469
> 
> 赞同：3
> 
> 时间：2012-07-12T16:34:51.010
> 
> 标签：c#, wpf, .net-3.5

我正在使用[星形转换器来获得相对大小的列表视图列](https://stackoverflow.com/questions/6338930/how-to-resize-wpf-listview-proportionally/11421253#11421253)，但我目前的问题是这没有考虑滚动条是否可见。我试图在代码中添加如下内容：

```
 var scroll = FindVisualChild<ScrollViewer>(listView);
  var offset = 0.0;
  if (scroll.ComputedVerticalScrollBarVisibility == Visibility.Visible)
    offset = SystemParameters.ScrollWidth + 5; 
```

但是，大小是在滚动条可见性之前完成的，并且滚动始终显示为`Collapsed`.

所以，我的问题是，如何适当调整列的大小。我试图在 上添加一个触发器`ScrollViewer.ComputedVerticalScrollBarVisibility`，但在那里没有任何成功。我尝试使用[基于此链接的自定义代码](http://blog.vascooliveira.com/wpf-listview-styling-tutorial-part-ii/)，但当前总是以空白列表视图结束（可能是由于列表视图使用了 ItemsPresenter，但我目前不确定）。

这是我尝试过的列表视图设置：

```
<Style x:Key="{x:Type ListView}" TargetType="ListView">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListView">
                <Border Name="Border" BorderThickness="0" BorderBrush="#999999" >
                    <ScrollViewer x:Name="blah" >
                        <ItemsPresenter />
                    </ScrollViewer>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="blah" Property="ComputedVerticalScrollBarVisibility" Value="Hidden">
                        <Setter Property="BorderBrush" Value="Aqua"/>
                        <Setter Property="BorderThickness" Value="10"/>
                    </Trigger>
                    <Trigger  SourceName="blah" Property="ComputedVerticalScrollBarVisibility" Value="Collapsed">
                        <Setter Property="BorderBrush" Value="Orange"/>
                        <Setter Property="BorderThickness" Value="10"/>
                    </Trigger>
                    <Trigger SourceName="blah"  Property="ComputedVerticalScrollBarVisibility" Value="Visible">
                        <Setter Property="BorderBrush" Value="Red"/>
                        <Setter Property="BorderThickness" Value="10"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter TargetName="Border" Property="Background" Value="#BBBBBB"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

设置者只是看看它是否有效......但他们根本没有设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:12:30.100

我最终创造了一种黑客。[这是我最初的博客文章](http://justin-pihony.blogspot.com/2012/07/wpf-resize-listview-columns-on.html)，因为它可能会很长。我仍然需要清理代码，但希望它可以帮助其他人

# .htaccess - .htaccess 子域中的 500 内部服务器错误

> ID：11456472
> 
> 赞同：1
> 
> 时间：2012-07-12T16:34:56.677
> 
> 标签：.htaccess, zend-framework, subdomain

我在这里遇到了一个情况。我有这个网站[http://liuitt.com](http://liuitt.com)使用以下 .htaccess 文件运行 Zend：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteRule !\.(js|gif|jpg|png|css|txt|eot|svg|ttf|woff|ico|pdf)$ public/index.php [L]
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ public/$1 [NC,L] 
```

我正在尝试在子域[http://crm.liuitt.com上安装 FengOffice](http://crm.liuitt.com)

但问题是我得到 500 Internal Server Error。

然后...如果我通过 liuitt.com 在我的根文件夹中禁用 .htaccess，它就可以工作。

我怎么解决这个问题？

如何让子域使用它自己的 .htaccess 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:08:46.300

我找到了解决方案。有必要在 .htaccess 文件中为每个在主域中具有根 .htaccess 的子域添加 RewriteEngine，从而将请求重写到其他任何地方。

```
RewriteEngine On
;or Off 
```

上面的命令解决了我的问题！

[http://liuitt.com](http://liuitt.com)和[http://crm.liuitt.com](http://crm.liuitt.com)完全没有错误。

我已经创建了其他子域来一起测试它，这也没关系。

# java - 尝试访问备注字段时出错（EclipseLink、JdbcOdbc、Clob）

> ID：11456473
> 
> 赞同：0
> 
> 时间：2012-07-12T16:34:59.300
> 
> 标签：java, entity, eclipselink, clob

我一直在阅读[此搜索](https://stackoverflow.com/search?page=2&tab=relevance&q=java%20entity%20clob)中的许多主题，所以我真的诚实地尝试了 3 天。此时，我有了一个TaskListTopComponent（Window），以及一个名为Todo.java 的实体类。在 Todo 实体类中，我有一个列 TDDETAILS，它是 DBF 中的一个备注字段。我正在尝试使用以下代码从中获取数据：

```
@Column(name = "TDDETAILS")
@Lob
private String details;

public String getDetails() {
    return details;
}

public void setDetails(String details) {
    this.details = details;
} 
```

如果我删除上面的代码，我的应用程序可以完美运行，并且可以检索、修改、添加和删除所有其他 10 多列。

但是，我需要 TDDETAILS 字段，并且在使用上面的代码时出现以下错误：

```
Internal Exception: java.sql.SQLException: [Microsoft][ODBC Visual FoxPro Driver]Feature is not available.
Error Code: 0
Call: SELECT TDTDKEY, TDBILLABLE, TDEMAILED, TDFLATRATE, TDADD_DATE, TDADD_TERM, TDADD_TIME, TDADD_USER, TDCHG_DATE, TDCHG_NUMB, TDCHG_TERM, TDCHG_TIME, TDCHG_USER, TDDETAILS, TDDATEDONE, TDFOLLOWUP, TDINTERNAL, TDPRIVATE, TDREQUIRED, TDSRED, TDTAKEN, TDDESCRIP, TDPRIORITY, TDCMKEY, TDCNKEY, TDJTKEY, TDPYKEY, TDURKEYAS, TDURKEYTB FROM TODO
Query: ReadAllQuery(name="Todo.findAll" referenceClass=Todo sql="SELECT TDTDKEY, TDBILLABLE, TDEMAILED, TDFLATRATE, TDADD_DATE, TDADD_TERM, TDADD_TIME, TDADD_USER, TDCHG_DATE, TDCHG_NUMB, TDCHG_TERM, TDCHG_TIME, TDCHG_USER, TDDETAILS, TDDATEDONE, TDFOLLOWUP, TDINTERNAL, TDPRIVATE, TDREQUIRED, TDSRED, TDTAKEN, TDDESCRIP, TDPRIORITY, TDCMKEY, TDCNKEY, TDJTKEY, TDPYKEY, TDURKEYAS, TDURKEYTB FROM TODO")
INFO [org.netbeans.core.windows.persistence]: [PersistenceManager.getTopComponentForID] Problem when deserializing TopComponent for tcID:'TaskListTopComponent'. Reason: Cannot create instance of com.waudware.viewer.TaskListTopComponent 
```

我的 persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="MogEntityLivedataPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>entity.Todo</class>
    <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:odbc:MogDev_livedata_ODBC"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="javax.persistence.jdbc.driver" value="sun.jdbc.odbc.JdbcOdbcDriver"/>
            <property name="javax.persistence.jdbc.user" value=""/>
        <property name="javax.persistence.jdbc.user" value=""/>
</properties>
  </persistence-unit>
</persistence> 
```

对于如何解决此问题，我们将不胜感激。谢谢你！

**编辑：**

好吧，我尝试创建一个由两个文件组成的新项目 - 实体（我将其制作成一个 jar）和一个主类：

todo.java

```
package entity;

import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "TODO")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Todo.findAll", query = "SELECT c FROM Todo c")})
public class Todo implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "TDTDKEY")
    private String id;
    @Lob
    @Column(name = "TDDETAILS")
    private byte[] details;

    public byte[] getDetails() {
        return details;
    }

    public void setDetails(byte[] details) {
        this.details = details;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Todo)) {
            return false;
        }
        Todo other = (Todo) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity.Todo[ id=" + id + " ]";
    }
} 
```

检索备忘录.java

```
package retrievememo;

import entity.Todo;
import java.util.List;
import javax.persistence.Query;
import javax.persistence.EntityManager;
import javax.persistence.Persistence;

public class RetrieveMemo {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        EntityManager entityManager = Persistence.createEntityManagerFactory("MemoEntityPU").createEntityManager();
        Query query = entityManager.createNamedQuery("Todo.findAll");
        List<Todo> resultList = query.getResultList();
        System.out.println("Memo1:>" + resultList.get(1).getDetails() + "<");

    }
} 
```

这是完整的堆栈跟踪：

```
[EL Info]: 2012-07-16 09:10:14.382--ServerSession(20248218)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-07-16 09:10:14.491--Not able to detect platform for vendor name [Visual FoxPro]. Defaulting to [org.eclipse.persistence.platform.database.DatabasePlatform]. The database dialect used may not match with the database you are using. Please explicitly provide a platform using property eclipselink.platform.class.name.
[EL Info]: 2012-07-16 09:10:15.851--ServerSession(20248218)--file:/Y:/NetBeansProjects/MemoEntity/build/classes/_MemoEntityPU login successful
[EL Warning]: 2012-07-16 09:10:16.899--UnitOfWork(6597453)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: [Microsoft][ODBC Visual FoxPro Driver]Feature is not available.
Error Code: 0
Call: SELECT TDTDKEY, TDDETAILS FROM TODO
Query: ReadAllQuery(name="Todo.findAll" referenceClass=Todo sql="SELECT TDTDKEY, TDDETAILS FROM TODO")
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: [Microsoft][ODBC Visual FoxPro Driver]Feature is not available.
Error Code: 0
Call: SELECT TDTDKEY, TDDETAILS FROM TODO
Query: ReadAllQuery(name="Todo.findAll" referenceClass=Todo sql="SELECT TDTDKEY, TDDETAILS FROM TODO")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.getObject(DatabaseAccessor.java:1237)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.fetchRow(DatabaseAccessor.java:999)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processResultSet(DatabaseAccessor.java:723)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:621)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1702)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2592)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2551)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:418)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1097)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:829)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1056)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:390)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1144)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2863)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1501)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1483)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1457)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
    at retrievememo.RetrieveMemo.main(RetrieveMemo.java:26)
Caused by: java.sql.SQLException: [Microsoft][ODBC Visual FoxPro Driver]Feature is not available.
    at sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java:318)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getObject(JdbcOdbcResultSet.java:1678)
    at org.eclipse.persistence.internal.databaseaccess.DatabasePlatform.getObjectFromResultSet(DatabasePlatform.java:1216)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.getObject(DatabaseAccessor.java:1206)
    ... 25 more
Java Result: 1
BUILD SUCCESSFUL (total time: 11 seconds) 
```

**Edit2：**如果我确实不使用实体，它似乎完美无缺。我想我的问题是——我怎样才能让它与实体一起工作？问题一定出在 EclipseLink 上？

以下方法有效：

```
package retrievememo;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;

public class RetrieveMemo {

    public static void main(String[] args) {
        try {
            //        EntityManager entityManager = Persistence.createEntityManagerFactory("MemoEntityPU").createEntityManager();
            //        Query query = entityManager.createNamedQuery("Todo.findAll");
            //        List<Todo> resultList = query.getResultList();
            //        System.out.println("Memo1:>" + resultList.get(1).getDetails() + "<");

                    Connection conn = getConnection();
                    Statement st = conn.createStatement();
                    ResultSet rs = st.executeQuery("SELECT TDDETAILS FROM todo");
                    while (rs.next())
                    {
                        System.out.println(rs.getString("TDDETAILS"));
                    }

                    st.close();
                    conn.close();
        } catch (Exception ex) {
            Logger.getLogger(RetrieveMemo.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private static Connection getConnection() throws Exception {
        String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
        String url = "jdbc:odbc:MogDev_livedata_ODBC";
        String username = "";
        String password = "";
        Class.forName(driver);
        return DriverManager.getConnection(url, username, password);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:36:20.040

我没有足够的知识来具体提供帮助，除了声明当类型为“备忘录”时驱动程序无法处理调用 getObject，从而导致您看到的异常。您在其他地方发布过 create-tables 不起作用 - 这可能是因为通用 DatabasePlatform 上使用的类型与 foxPro 类型不匹配 - 您可能需要为 FoxPro 创建一个 DatabasePlatform 子类以使用“逻辑”处理类型为布尔值等，如果驱动程序上有一个允许检索值的不同方法，则覆盖 getObjectFromResultSet 方法以读取“备忘录”类型。或者在下面使用驱动程序可以使用的不同类型。

# windows-7-x64 - C++ 的 ARtoolkit 设置，一切都很好，除了相机驱动程序

> ID：11456476
> 
> 赞同：0
> 
> 时间：2012-07-12T16:35:06.520
> 
> 标签：windows-7-x64, artoolkit

无法管理如何为我的内置网络摄像头安装 VFW 或 WDM 驱动程序，我有一个运行 Windows 7 64 位的 acer 5920g。

按照指南，最后一步是：

> ...您还需要测试视频输入是否有效并且可以显示视频。您需要`videoTest`在 bin 目录上运行。如果工作正常（无错误），将显示窗口视频（见下图）。此测试确认您的相机支持 ARToolKit 视频模块和 ARToolKit 图形模块。

videoTest 是一个 .exe，当我执行它时，它会显示一个错误窗口，告诉您：

> “无法启动程序，因为 PC 中不存在 MSVCP71D.dll。要解决此问题，请尝试重新安装程序”

我认为这与 VFW 或 WDM 驱动程序有关……不是吗？有什么想法可以让 ARtoolkit 与我的内置网络摄像头一起使用吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T18:45:25.293

[试试这个链接](http://www.addictivetips.com/windows-tips/fix-msvcp71-dll-and-msvcr71-dll-missing-error-in-windows-7/)。这些 DLL 不附带 Windows 的默认安装（您需要 Visual Studio 2003 才能获得它们）。

# sql - 如何在sql中计算oracle apex表单中的字段

> ID：11456478
> 
> 赞同：0
> 
> 时间：2012-07-12T16:35:09.373
> 
> 标签：sql, oracle, oracle-xe

我正在使用带有 IR 报告和标准表格的 Oracle XE 11g。到目前为止，我已经在报告区域中管理了以下内容，QUANTITY - SOLD IN_STOCK 这在报告中有效，但在输入表单中没有得到任何结果。在 IN_STOCK 的源字段中尝试了相同的 SQL 但不起作用。还尝试将计算字段写入表中，但没有运气，我发现的示例不起作用。任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:57:51.960

您在交互式报表上创建的计算仅适用于报表本身。如果您需要此字段作为输入表单中的值或在报表之外使用，您可能需要在数据库表级别定义此派生列。

该参考文献可能对以下方面有所帮助`virtual columns`： http: [//docs.oracle.com/cd/E11882_01/server.112/e17118/statements_7002.htm](http://docs.oracle.com/cd/E11882_01/server.112/e17118/statements_7002.htm)

在此文档中搜索“虚拟列”。虚拟列的工作方式类似于 IR 计算字段，但它在数据库级别被识别。如果您在设置虚拟列时遇到任何问题，请参阅限制部分。

现在，使用虚拟列，当您查询数据库以在表单或查询结果中显示计算值时，它将根据您在其定义中指定的两列动态显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-11T16:45:28.987

准备一个函数，根据制造商推荐的两次拍摄之间的天数计算第二次拍摄日期

```
SHOT DATE 27 DAYS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T23:57:58.687

你需要动态动作

这是一个例子：

**当** 事件：更改选择类型：项目项目：页面中的字段以逗号分隔，参与计算

示例：P5_CORRELATIVO_DESDE,P5_NO_CAJAS,P5_DOCUMENTOS_X_CAJA

**真正的行动** 行动：设定值 [行动做设定值](http://i.stack.imgur.com/SVo0J.png)

**设置** 集类型：PL/SQL 函数体 PL/SQL 代码：

声明 ln_value NUMBER(12) := 0; BEGIN IF :P5_CORRELATIVO_DESDE != 0 AND :P5_NO_CAJAS != 0 AND :P5_DOCUMENTOS_X_CAJA != 0 THEN ln_value := ((:P5_CORRELATIVO_DESDE - 1) + ( :P5_NO_CAJAS * :P5_DOCUMENTOS_X_CAJA)); 万一;

返回ln_value；结尾;

Page Items to Submit：参与计算的页面中以逗号分隔的字段

示例：P5_CORRELATIVO_DESDE,P5_NO_CAJAS,P5_DOCUMENTOS_X_CAJA

抑制更改事件：是

**受影响的元素** 选择类型：项目 项目：计算值命运的页面项目 示例：P5_CORRELATIVO_HASTA

[设置](http://i.stack.imgur.com/ZFrfj.png)

最佳

# jquery - 如何在 asp.net 按钮单击事件上使用 eventargs 参数

> ID：11456479
> 
> 赞同：1
> 
> 时间：2012-07-12T16:35:11.873
> 
> 标签：jquery, asp.net, eventargs

这有点像 hack，但我在 jquery 对话框的关闭事件上强制回发。

```
close: function (event, ui) {
    __doPostBack('<%=btnChange.UniqueID %>', 'refreshMe');
} 
```

它按应有的方式工作，并引发了服务器端的点击事件（由于我试图传入“refreshMe”，因此不得不关闭 EnableEventValidation 的小麻烦）。

我想要的是能够在点击事件期间看到第二个参数（'refreshMe'），这样我就可以知道回发是由 jquery 对话框关闭事件引起的。所以也许像下面这样的东西或多或少是我所希望的（但它显然不起作用）。

```
protected void btnChange_Click(object sender, EventArgs e) {
    if (e == "refreshMe")
    {
        // do whatever
    }
    else
    {
        // do whatever
    }
} 
```

有什么方法可以让我做到这一点，还是我离基地很远？

谢谢您的帮助。

**编辑** 为了让这个场景正常工作，我必须：1）将 EnableEventValidation 设置为 false（如果它是真的，那么 ASP.NET 将抛出一个错误并基本上告诉你它无法验证请求）2）我尝试设置值使用 jquery 隐藏的 __EVENTARGUMENT，但无论出于何种原因，值“refreshMe”从未在参数中发送到服务器。我最终做的是把'refreshMe'放在_doPostBack的第二个参数中*，然后它出现在*服务器端的Request[“_EVENTARGUMENT”]中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:53:47.487

ASP.Net 在页面上存储一个隐藏字段，该字段应包含您在回发时的“refreshMe”值。

```
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" /> 
```

您应该能够在 Page_Load 中获得 __EVENTARGUMENT 值：

```
protected void Page_Load(object sender, EventArgs e) {
   if(Page.IsPostBack) {
      string eventArg = Request("__EVENTARGUMENT");
      if (eventArg == "refreshMe") {
         // ...
      }
   }
} 
```

# maven - 将多个 3rd 方 JAR 部署到全局（内部）Maven 关系

> ID：11456480
> 
> 赞同：6
> 
> 时间：2012-07-12T16:35:12.863
> 
> 标签：maven, deployment, jar, dependencies, nexus

我的硬盘驱动器上的一个文件夹中有大量 3rd 方 JAR 文件（来自我正在使用的各种 SDK 的大约 40 个不同的 JAR）。我想在我未来的 Maven 项目中将这些 JAR 声明为依赖项。

我无法像使用 Log4J、JUnit、Velocity 等那样从全球全球 maven 存储库中获取这些 JAR，因为它们在那里不可用。

如何将这些 JAR 文件从我的本地文件夹中获取到我公司的全局（但内部）maven 存储库 (Nexus)？什么是必要的步骤？如果可能的话，最好的解决方案是程序化的。

我很困惑，我无法使用 Google 找到任何解决问题的方法，因为我认为这是一个非常普遍的问题。所以也许我在想一个错误的方向。

非常感谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T19:38:21.793

[您可以使用maven-install-plugin](http://maven.apache.org/plugins/maven-install-plugin/)将库安装到本地存储库（[`install-file`](http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html)目标 - 参见[示例](http://maven.apache.org/plugins/maven-install-plugin/examples/installing-secondary-artifacts.html)）。

[您可以使用maven-deploy-plugin](http://maven.apache.org/plugins/maven-deploy-plugin/)（[`deploy-file`](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)目标 - 参见[示例](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html#The_deploy:deploy-file_Mojo)）将库部署到远程存储库 (Nexus )。

您还可以使用 Nexus Web 应用程序将库上传到 nexus（请参阅[Nexus Book](http://www.sonatype.com/books/nexus-book/reference/) - [Uploading Artifacts](http://www.sonatype.com/books/nexus-book/reference/using-sect-uploading.html)）。

# django - 无法将浮点数转换为十进制：Django DecimalField 的美味呈现

> ID：11456481
> 
> 赞同：0
> 
> 时间：2012-07-12T16:35:14.897
> 
> 标签：django, decimal, tastypie

我有一个包含 DecimalField 的 Django 模型，我试图通过一个美味的 ModelResource 公开它。当我请求美味的 URL 时，我似乎无法克服这个错误：

无法将浮点数转换为十进制。首先将浮点数转换为字符串

堆栈跟踪指的是 packages/tastypie/fields.py"，第 250 行，在此处附近

```
def convert(self, value):
    if value is None:
        return None

    return Decimal(value) 
```

如果我在 ModelResource 定义中排除了这个字段，错误就会消失并且请求会正常返回（并不奇怪）。

我想知道我是否应该在tastepie 中明确定义一个DecimalField，但这对我来说并不清楚。

在其他情况下的较低级别的python中，我通过执行 Decimal(str(value)) 解决了此类问题。所以我在这个名为 value 的字段上尝试了类似的 dehydrate_FOO：

```
def dehydrate_value(self, bundle):
    "for massaging data before it is returned to the client"
    return Decimal(str(bundle.data['value'])) 
```

但错误仍然存​​在。我在 Stack Overflow 和其他地方搜索过，但没有找到很多线索。这个问题有点相关： [https ://github.com/toastdriven/django-tastypie/issues/281](https://github.com/toastdriven/django-tastypie/issues/281)

但我确实有一个更新版本的美味派（v0.9.11）。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:52:59.170

升级你的 Python。

你的 Python 版本是 < 2.7，不是吗？

升级到python 2.7！

# android - 如何锁定 NFC 标签的写入权限？有什么工具吗？

> ID：11456482
> 
> 赞同：3
> 
> 时间：2012-07-12T16:35:21.677
> 
> 标签：android, nfc

我刚刚完成了构建读取 NFC 标签的 Android 应用程序。我一直在使用 Nfc-Eclipse-Plugin 编写标签。该插件效果很好，但是一旦编写了标签，就无法锁定标签。

他们是否有任何工具可以让我在标签上自定义我想要的记录，然后在我写完标签时锁定标签？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:19:55.997

我已经更新了[NFC Eclipes 插件的](http://code.google.com/p/nfc-eclipse-plugin/)[NFC Developer](https://play.google.com/store/apps/details?id=com.antares.nfc)应用程序以包含“刻录模式”——一旦加载了 NDEF 有效负载，就可以从选项菜单中启用它。请试一试（1.3版）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:44:49.053

你可以试试[TagWriter](https://play.google.com/store/apps/details?id=com.nxp.nfc.tagwriter)。在首选项中切换到“专业”模式（选项“切换 UI 模式”），然后您将获得一个额外的菜单选项“工具”，其中包含诸如将标签上的 NDEF 消息标记为只读和锁定标签等功能。

能否上锁取决于标签的种类。请注意，根据标签的类型，有时无法撤消将 NDEF 消息标记为只读的操作（NFC Forum Type 2 标签就是这种情况，例如 MIFARE Ultralight）。锁定标签通常也无法撤消（例如 Type 2 Tag 或 ICODE 标签）。

# python - 带有嵌套列表的 Python 3 程序，编译时提示“元组”类错误

> ID：11456486
> 
> 赞同：0
> 
> 时间：2012-07-12T16:35:39.280
> 
> 标签：python, list, compiler-errors, tuples

在函数中发现问题`HerusticSort`，我会检查一下。

* * *

我使用嵌套列表编写了一段python代码，例如：

```
opentab = [[start], [0], [None]]

node = opentab[0].pop(0) 
```

但是执行代码的时候提示

> HerusticSearchA 中的文件“\Herustic Search.py​​”，第 97 行
> 
> 节点 = opentab[0].pop(0)
> 
> **AttributeError: 'tuple' 对象没有属性 'pop'**

这很奇怪，因为我没有更改它的类，并且我已经将它定义为嵌套列表。

* * *

出现问题后，我设置了一个断言以确保它是正确的。

```
assert isinstance(opentab[0], list) 
```

当然现在我得到了一个**AssertionError**

我也在IDLE中一一试了，没问题。

我只是把完整的代码片段放在这里，我不知道为什么会这样......

* * *

```
def HerusticSearchA(start, end):
    '''

    '''

    def H_Function(state, depth):
        '''
        state is a 3 x 3 list, stands for the puzzle state.
        returns the herustic assessment value
        g for the depth of the node, h for the incorrect tile number
        '''
        crit = copy.deepcopy(end)
        count = 0
        for i in range(len(state)):
            for j in range(len(state[0])):
                if state[i][j] - crit[i][j] != 0:
                    count += 1
        return depth + count

    #1\. Variables
    #[[state], [value], [father]]
    opentab = [[start], [0], [None]]
    close = [[], [], []]

    depth = 0
    done = False

    print(start, end)
    while len(opentab[0]) > 0:
    #2\. Nothing to continue
        if opentab == [[], [], []]:
            return None
    #3\. remove n from OPEN
        assert isinstance(opentab[0], list)

        node = opentab[0].pop(0)
        nodevalue = opentab[1].pop(0)
        father = opentab[2].pop(0)
        close[0].append(node)
        close[1].append(nodevalue)
        close[2].append(father)
    #4\. Got result
        if node == target:
            close[0].append(node)
            close[1].append(nodevalue)
            close[2].append(father)
            done = True
            break
    #5\. Extract followers
        else:
            nexts = NextStep(node)
            for subnode in nexts:
                newvalue = H_Function(subnode, depth)
                #conditions:
                #6.
                if subnode not in opentab[0] and subnode not in close[0]:
                    opentab[0].append(subnode)
                    opentab[1].append(newvalue)
                    opentab[2].append(node)
                #7.
                if subnode in opentab[0]:
                    idx = opentab[0].index(subnode)
                    if newvalue < opentab[1][idx]:
                        opentab[1][idx] = newvalue
                        opentab[2][idx] = node
                #8.
                if subnode in close[0]:
                    idx = close[0].index(subnode)
                    if newvalue < close[1][idx]:
                        close[1][idx] = newvalue
                        close[2][idx] = node
        #9\. sort opentab
        HerusticSort(opentab, 1)
        depth += 1

    return close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:44:57.360

该程序中唯一可能更改`opentab[0]`为元组的行（在正常情况下）是`HeuristicSort`. 不幸的是，来源`HeuristicSort`不在这里，所以我不能确定这是问题所在。不过，我是按要求发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:07:43.553

将第 58 行更改`opentab[0].append(subnode)`为`opentab[0].append(list(subnode))`应该修复它。

问题是那`subnode`不是`tuple`a `list`。

# asp.net-mvc - 对于名称不同的函数，Web api 路由是否可行？

> ID：11456490
> 
> 赞同：2
> 
> 时间：2012-07-12T16:35:55.227
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

我有一个路由问题，我不知道如何解决它。

有一个名为“UsersController”的控制器，它包含 2 个 Post 操作函数：

```
public int PostFBLogin(User userObject){}
public void PostUpdateImgUrl(User userObject){} 
```

当我发出 POST 请求时，我在请求正文中传递了“用户”的 JSON 表示。如果我注释掉这些功能之一，那么它工作正常。但是当这两个函数都存在时，每当我尝试向它们中的每一个发出请求时，都会出现以下错误：

```
"Multiple actions were found that match the request:
Int32 PostFBLogin(MestoryServer.Models.User) on type MestoryServer.Controllers.UsersController
Void PostUpdateImgUrl(MestoryServer.Models.User) on type MestoryServer.Controllers.UsersController" 
```

我试图通过将以下路由放入路由表中来解决它：

```
 RouteTable.Routes.MapHttpRoute(
                name: "UserPostUpdateImgUrlAction",
                routeTemplate: "api/users/PostUpdateImgUrl/",
                defaults: new
                {
                    controller = "users",
                    action = "PostUpdateImgUrl"
                }
            );

            RouteTable.Routes.MapHttpRoute(
                name: "UserPostFBLoginAction",
                routeTemplate: "api/users/PostFBLogin/",
                defaults: new
                {
                    controller = "users",
                    action = "PostFBLogin"
                }
            ); 
```

但这没有帮助。

在网上看了很多关于路由表的帖子后，我不确定是否有可能有两个具有相同签名但名称不同的操作。

任何人都可以帮忙吗？

谢谢，艾迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:23:11.817

当您使用 Web API 发出 HTTP 请求时，HTTP 方法用于标识要调用的操作。HTTP Post 请求将调用 ApiController 中以“POST”开头的方法。按照惯例，Web API 期望（最多）每个 HTTP 方法一个方法。这是您收到错误的原因。

Web API 的默认路由不指定操作：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

您可以更改以上内容以包含操作，例如，`routeTemplate: "api/{controller}/{action}/{id}"`但您必须`[HttpPost]`在方法之上添加。

或者您可以考虑将您的 Web Api 控制器一分为二。PostFBLogin 方法可以移动到 LoginController 中，而 PostUpdateImgUrl 方法可以保留在 UsersController 中。

# jquery - 使用 div 进行 Jquery 输入验证

> ID：11456492
> 
> 赞同：0
> 
> 时间：2012-07-12T16:35:58.737
> 
> 标签：jquery

我希望在 div 而不是警报中显示我的输入验证。我目前有

```
//check for COGs to be a number
        if (isNaN($("#txtCOGs").val())) {
            alert("The Cost of Goods Sold must be a number");
            $("#txtCOGs").focus();
            return false;
        } 
```

我正在尝试将其放在 div 中

```
<div id="divError"> 
```

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:37:17.287

```
$('#divError').text("The Cost of Goods Sold must be a number"); 
```

或包含 html：

```
$('#divError').html('<span style="font-style:italic">The Cost of Goods Sold</span> must be a number'); 
```

或者如果你想在同一个 div 中附加多个错误消息：

```
$('#divError').append("The Cost of Goods Sold must be a number<br />");
$('#divError').append("Another error message...<br />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:39:36.517

```
//check for COGs to be a number
        if (isNaN($("#txtCOGs").val())) {
            $("#divError").text("The Cost of Goods Sold must be a number");
            $("#txtCOGs").focus();
            return false;
 } 
```

使用此 HTML 代码：

```
<div id="divError"></div> 
```

# python - PLY yacc 解析 IF-ELSE IF-ELSE 嵌套语句

> ID：11456495
> 
> 赞同：4
> 
> 时间：2012-07-12T16:35:59.090
> 
> 标签：python, parsing, yacc, ply

有人可以帮助我为嵌套 if 语句编写正确的语法规则吗？用我的语言，我可以写出这样的结构：

```
(IF CONDITION)
    some statements
    (IF CONDITION)
        some statements 
    (ELSE IF CONDITION) 
        some statements
    (ELSE IF CONDITION) 
        some statements
    (ELSE IF CONDITION) 
        some statements 
    (ELSE) 
        some statements
    (END) 
    some statements 
(ELSE IF CONDITION) 
    some statements 
(ELSE) 
    some statements 
(END) 
```

我写了词法分析器，所以左右括号是`RULE_OPEN`和`RULE_CLOSE`标记，“IF”是`IF`标记，“END”是`END`标记，“ELSE”是`ELSE`标记，“CONDITION”是`CONDITION`标记。

假设“某些语句”可能是我的语言中允许的任何内容（如通用编程语言）。重要的是可以无限嵌套 IF 语句。

希望这很清楚，如果我解释得不好，请告诉我。

不管我怎么努力。我总是遇到移位/减少冲突，解析器不接受正确的输入。

尽管如此，我已经成功地编写了没有 else-if 的规则。当我为 else-if 添加规则时，代码对我来说开始变得非常复杂。

以下是我没有 else-if 部分的成功方法（我只列出了相关规则）：

```
statements: statement

statements: statements statement

statement: code
| data_out
| rule

rule: inline_if_statement
| block_if_statement

block_if_statement: RULE_OPEN IF CONDITION RULE_CLOSE statements RULE_OPEN END RULE_CLOSE

block_if_statement: RULE_OPEN IF CONDITION  RULE_CLOSE statements block_else_statement

block_else_statement: RULE_OPEN ELSE RULE_CLOSE statements RULE_OPEN END RULE_CLOSE 

block_else_statement: empty

empty : 
```

我认为这是解析中非常常见的问题，我希望这里有人已经解决了它:-) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:24:38.767

通常，对于具有可选 ELSE 子句的语言，可以容忍单个 shift-reduce 冲突。Pete Jinks 提供了一些[可以解决冲突的替代方案](http://www.cs.man.ac.uk/~pjj/cs212/ho/node7.html#SECTION00074000000000000000)。

指定 ELSE-IF 结构的策略：将其视为任何其他递归定义的重复块：

```
running_else_if_statement : RULE_OPEN IF CONDITION RULE_CLOSE statements else_if_blocks
    RULE_OPEN ELSE RULE_CLOSE statements RULE_OPEN END RULE_CLOSE
                          ;

else_if_blocks : else_if_block
               | else_if_blocks else_if_block
               ;

else_if_block : RULE_OPEN ELSE_IF CONDITION RULE_CLOSE statements 
              ; 
```

作为风格的旁注：大多数从业者始终将所有替代品与管道结合起来，就像你所做的那样

```
statement : code
          | data_out
          | rule
          ; 
```

读起来很迷惑：

```
statements : statement
           ;

statements : statements statement
           ; 
```

最喜欢：

```
statements : statement
           | statements statement
           ; 
```

# ruby-on-rails - Authlogic - “会话”表有什么意义？

> ID：11456498
> 
> 赞同：3
> 
> 时间：2012-07-12T16:36:26.393
> 
> 标签：ruby-on-rails, authentication, authlogic

我已经在我的应用程序中实现了 Authlogic，但我对 table 的感觉感到困惑`sessions`。

对于两种控制器型号，我都有`UsersController`, 。`UserSessionsController`在数据库中——表`users`和表`sessions`。

桌子`sessions`一直是空的。我尝试将此表重命名为`user_sessions`，但情况相同 - 仍然是空表（如果我登录到我的应用程序，则表`session`/中没有添加一行`user_session`）。

但是我的应用程序运行良好，登录和注销运行良好，相同的注册，如果我测试`logged_in_timeout`- 这运行良好。

那么，我对会议缺少什么？这让我有点困惑，这个表有什么意义，如果在我的情况下没有保存行并且一切似乎都工作正常。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:58:18.703

您实际上并不需要用于会话的数据库表，除非您希望将它们持久化以处理故障转移和应用程序重新启动等问题。UserSession模型可以如下声明，不需要扩展AR。

```
class UserSession < Authlogic::Session::Base
  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T14:41:25.717

Steakchaser 关于不需要在数据库中存储会话是正确的。但是，为了更直接地回答您的问题，它不起作用的原因是`config.session_store`in`config/initializers/session_store.rb`默认为`:cookie_store`; 如果将其设置为`:active_record_store`，您的会话表将按预期填充。

可以在[此处](https://github.com/rails/activerecord-session_store)找到有关如何为会话实施 ActiveRecord 的更多说明。

# c# - 如何将文本添加到文本框并将其视为文本块？

> ID：11456503
> 
> 赞同：2
> 
> 时间：2012-07-12T16:36:52.737
> 
> 标签：c#, winforms

我想要一个可以向其中添加“文本块”的文本框。“文本块”的定义是：

*   删除文本框中的字符，该字符是块的一部分，导致整个块被删除。
*   将文本框中的胡萝卜位置设置为块的一部分，导致整个块被选中。
*   用户在块中间写入字符的任何尝试都将失败，随后会出现相应的消息框。

我有一个附加了 CellClick 事件的 DataGridView。我希望当 CellClick 事件发生时，单元格的内容将被放置在一个文本框中，并将被视为一个文本块。添加块的位置将在文本框的胡萝卜位置或文本框的末尾，如果文本框没有聚焦，因此胡萝卜不闪烁。

我还希望文本框可以用作普通文本框，这意味着用户可以添加或删除他想要的任何字符/文本，除了必须按照上面定义的完全添加/删除的文本块。

也许我需要使用除文本框之外的其他 GUI 控件来完成此任务，我不知道。

我考虑了一些解决方案，但我不知道哪个是最好的（可能没有一个）：（**备注**：以下每个解决方案都假定附加了一个 KeyPress 事件）

1.  在每个块之前和之后添加隐藏字符（如果可能）以标记它。
2.  创建代表所有文本块的对象列表，每个对象包含两个字段：startIndex、endIndex。不太好，因为从文本框中添加或删除字符需要将位于添加/删除的字符之后的块的所有索引更新为每个字符的 +1 或 -1。
3.  创建代表文本框中所有文本的对象列表，每个对象包含两个字段：文本、标志。每次手动添加一个字符或事件添加一个单词时，都会将一个对象添加到列表中，并将对象的文本字段设置为添加的字符，如果字符是单词，则将对象的标志字段设置为 true由事件添加，否则为 false。
4.  将文本框分成两部分，并为事件添加的每个文本块在它们之间创建一个小文本框，并对小文本框进行不同的处理。当小文本框中的文本被删除时，整个文本框控件被删除，分割的文本框被合并。听起来我不太好。

实现这一点的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:40:59.130

我从未见过具有这种行为的控件。我并不是说有人没有写过，只是不太可能。这意味着您将不得不构建它。

如果您从未创建过自定义控件，请在网络上搜索“创建自定义 winforms 控件”或类似内容。您首先需要了解基本技术。

然后你会想知道如何存储底层文本以供编辑。您可以从学习标准文本编辑控件常用的一些技术开始。选择一个您可以针对您的自定义场景进行修改的选项。以下是我的一些想法：

[间隙缓冲器](http://en.wikipedia.org/wiki/Gap_buffer)

[绳索](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)

[链条](http://www.catch22.net/tuts/piece-chains)

祝你好运！

# iphone - IOS开发：翻转水平模态时的奇怪效果

> ID：11456504
> 
> 赞同：2
> 
> 时间：2012-07-12T16:36:57.600
> 
> 标签：iphone

我遇到了一个奇怪的情况，即在视图之间的翻转过渡（UIModalTransitionStyleFlipHorizo​​ntal）期间，iphone 桌面显示为背景。当视图翻转到另一个视图时，我什至可以在我的 iphone 上看到应用程序和图标。

是因为内存管理不当还是自定义设置不正确？

# asp.net - 从 Aspx 传递参数

> ID：11456505
> 
> 赞同：0
> 
> 时间：2012-07-12T16:37:01.787
> 
> 标签：asp.net

所以我有一个填充数据的表，但我想知道如何从一行中传递两位数据，具体取决于`link`单击了行尾的哪一个。

```
<%WebReceiptSummary[] receipts = GetReceipts();
          if (receipts != null)
          {
              for (int i = 0; i < receipts.Length; i++)
              {%>
        <tr>
            <td><%= receipts[i].Type%></td>
            <td><%= receipts[i].PolicyNo%></td>
            <td><%= receipts[i].Date%></td>
            <td class="c"><%= receipts[i].Amount%></td>
            <td class="r"><asp:LinkButton OnCommand="PDFLinkClick" 
CommandArgument="<%= receipts[i].PDF %>&<% receipts[i].PolicyNo %>" runat="server">View PDF</asp:LinkButton></td>
        </tr>
        <% }
        }
        %> 
```

显然我`CommandArgument`只是传回字符串`<%= receipts[i].PDF %>&<% receipts[i].PolicyNo %>`而不是值。这样做的最佳方法是什么？我也在考虑使用；

```
<asp:HiddenField ID="hiddenIsCaptchaReadyValidate" runat="server" Value=false/> 
```

但是我在这里遇到了同样的问题，它`value`被放在引号内，这也意味着我需要`hiddenfields`永远创建两个行，这不是最有效的方法。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:40:34.860

*通过标记添加时*，不能将`<%= %>`命令作为属性的一部分。

 *我可以建议`for`您不要使用 ASPX 中的循环，而是使用`<asp:Repeater>`控件吗？这也将允许您`CommandAttribute`从代码隐藏中设置值。

一个例子...

```
<asp:Repeater runat="server" id="receipts" OnItemDataBound="receipts_ItemDataBound">
  <ItemTemplate>
    <tr>
        <td><%#((WebReceiptSummary)Container.DataItem).Type%></td>
        <td><%#((WebReceiptSummary)Container.DataItem).PolicyNo%></td>
        <td><%#((WebReceiptSummary)Container.DataItem).Date%></td>
        <td class="c"><%#((WebReceiptSummary)Container.DataItem).Amount%></td>
        <td class="r"><asp:LinkButton ID="pdfLink" OnCommand="PDFLinkClick" runat="server">View PDF</asp:LinkButton></td>
    </tr>
  </ItemTemplate>
</asp:Repeater> 
```

在您的初始化或加载代码中...

```
receipts.DataSource = GetReceipts();
receipts.DataBind(); 
```

然后...

```
protected void receipts_ItemDataBound(Object sender, RepeaterItemEventArgs e)
{
  ((LinkButton)e.Item.FindControl("pdfLink")).CommandArgument = 
    ((WebReceiptSummary)e.DataItem).PDF + ((WebReceiptSummary)e.DataItem).PolicyNo;
} 
```

**更新**

考虑一下，而不是使用 的代码隐藏设置`CommandArgument`，我*认为*（我还没有测试过）你实际上可以在不需要`receipts_ItemDataBound`函数的情况下执行以下操作......

```
 <td class="r"><asp:LinkButton ID="pdfLink" OnCommand="PDFLinkClick" runat="server"
   CommandArgument="<%#((WebReceiptSummary)Container.DataItem).PDF + ((WebReceiptSummary)Container.DataItem).PolicyNo%>"
   >View PDF</asp:LinkButton></td> 
```

**更新 2**

上述示例中的所有实例`Container.DataItem`，都已更改为紧绑定`((WebReceiptSummary)Container.DataItem)`*

# objective-c - XCode 中的数组管理帮助？

> ID：11456507
> 
> 赞同：0
> 
> 时间：2012-07-12T16:37:11.057
> 
> 标签：objective-c, ios, xcode, arrays, button

我正在 iOS SDK 中创建一个程序，其中有一组按钮。单击按钮时，其标题将添加到数组中，并且数组显示在分配的标签中。

当我尝试创建删除和清除按钮时，会出现错误消息。它们出现在 function_builder = function_builder.removeLastObject; 和 function_builder = function_builder.removeAllObjects; .m 文件的行。错误消息是相同的：从不兼容的类型“void”分配给“NSMutableArray *_strong”。我该如何解决？感谢您的任何帮助

这是.h文件：

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
@property (nonatomic,strong) IBOutlet UILabel *equation_field;
@property (nonatomic) NSMutableArray *function_builder;//declare array//
@property(nonatomic, readonly, retain) NSString *currentTitle;//declare button titles//
@end 
```

这是 .m 文件：

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController
@synthesize equation_field;
@synthesize currentTitle;
@synthesize function_builder;
NSMutableArray *function_builder;//create the array name//

- (IBAction)functionButtonPress:(UIButton *)sender {//code for all buttons except delete    and clear//
[function_builder addObject: sender.currentTitle];//when button is pressed, its title is added to the array//
self.equation_field.text = function_builder.description;//the contents of the array appear in the assigned label//
}
- (IBAction)delete:(UIButton *)sender {//create delete button//
function_builder = function_builder.removeLastObject; //ERROR OCCURRING HERE: Assigning to 'NSMutableArray *_strong' from incompatible type 'void'//
}

- (IBAction)clear:(UIButton *)sender{//create clear button//
function_builder = function_builder.removeAllObjects;//ERROR OCCURRING HERE: Assigning to 'NSMutableArray *_strong' from incompatible type 'void'//
}

- (void)viewDidLoad {

function_builder = [[NSMutableArray alloc] init];//initialize array//

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:42:06.343

我认为这就是 xCode/objective-c 将数组转换为字符串的方式（如果我错了，请纠正我），所以如果你想以不同的方式格式化它，你将不得不遍历字符串并删除括号和逗号，老实说，这不应该太难。

我这样做的方式是读取字符串并复制内容，除非它们是 ( ) 或 ，这样你的间距仍然是正确的，你会得到你想要的过滤效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:47:12.797

那里有很多错误..

您已将此方法 (void*) 的结果分配给类型为 NSMutableArray 的 function_builder。这是没有意义的。

为了操作一个对象，只需向它发送一条消息：

```
[function_builder removeLastObject]; // this will remove the last object of the array
[function_builder removeAllObjects]; // guess what ;) 
```

对于另一件事：

```
self.equation_field.text = [function_builder componentsJoinedByString:@", "] 
```

这将创建一个字符串，其中数组中的所有对象由 ", " => 分隔`A, B, C, D`

# objective-c - 核心图：更新 y 轴的位置

> ID：11456515
> 
> 赞同：2
> 
> 时间：2012-07-12T16:37:24.990
> 
> 标签：objective-c, ios, xcode, core-plot

我目前正在做一个实时绘图，我每秒都会生成数据。我遇到的问题是，大约 15 秒左右后，由于我设置了 xRange，我的绘图开始自动移动/滚动，这是一种有意的效果，但是我的 y 轴似乎植根于起源并迅速从屏幕上掉下来。如何将位置设置为始终植根于视图的中心，或者我需要更新哪些属性才能使 Y 轴也移动？

我已经浏览了所有这些，但我没有看到任何明显的东西，或者任何基于包含的定义/帮助似乎适用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:28:30.427

我碰巧在一个旧的谷歌群组线程中找到了答案，所以我将它发布在这里作为它在 Core Plot 1.0 中工作的确认，因为这是一个更有条理/可搜索的地方。

初始化绘图时，您希望按如下方式设置轴约束。

```
axisSet.yAxis.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# oracle - 什么是 oracle 的最佳 IDE？

> ID：11456516
> 
> 赞同：5
> 
> 时间：2012-07-12T16:37:26.253
> 
> 标签：oracle, ide, sqlplus, oracle8

我在 ORACLE 8.0 上工作。我知道如何在 SQLPLUS 中运行 oracle SQL 命令。
我搜索了一个 IDE，例如 SQL Server Management Studio，但找不到。
ORACLE 的最佳 IDE 是什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:47:57.627

“最佳”是一个见仁见智的问题 - 可用的环境包括：

*   [甲骨文 SQL 开发人员](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)
*   [Toad for Oracle](http://toadfororacle.com/index.jspa?product=toadfororacle)
*   [全能自动化 PL/SQL 开发人员](http://www.allroundautomations.com/plsqldev.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:51:40.703

哇。Oracle 8.0 已经过时了将近 15 年。那是数据库的一个古老版本。你确定你真的在使用那么旧的东西吗？这肯定会使事情复杂化，因为这意味着任何最新版本的 Oracle 客户端都将无法连接到数据库，因此您正在消除绝大多数工具。

如果您真的沉迷于旧版本的 Oracle，作为 Oracle 客户端的一部分提供的基于 Java 的旧企业管理器应用程序是最接近 SQL Server Management Studio 的东西。我不知道这在 Oracle 8.0 中是否可用，但 8.1.7 Oracle 客户端附带的版本应该连接到 Oracle 8.0 数据库。当然，Oracle 不再提供 8.0 或 8.1.7 Oracle 客户端可供下载，您需要拥有相当旧版本的操作系统才能安装旧版本。如果您仍然有支持协议（尽管这似乎不太可能，因为您在我的工作生涯中没有升级 Oracle），您可能可以打开支持请求并让 Oracle 向您发送一张 CD，以获取不支持的数据库或客户端版本。

# c# - Microsoft JScript 运行时错误：自动化服务器无法创建对象

> ID：11456522
> 
> 赞同：0
> 
> 时间：2012-07-12T16:37:46.147
> 
> 标签：c#, javascript, asp.net

尝试获取用户名并使用下面的代码来获取此信息。请注意，如果我从按钮调用该函数，它会在 pupup 窗口中显示正确的用户名。

```
<body onload = "GetUserName();">
    <script language="javascript" type="text/javascript">
    function GetUserName() {
         var WinNetwork = new ActiveXObject("WScript.Network");
        //alert(WinNetwork.UserName);
         var userName = WinNetwork.UserName;
        //var userName = 'test';
        document.getElementById('label1').innerHTML = userName;
    }
    </script>
    <form runat="server">    
    <asp:HiddenField ID="hfUserName" runat="server" value="a"/>
    <asp:PlaceHolder ID="phLabelUser" runat="server"></asp:PlaceHolder> 
```

在后面的代码中我创建标签来显示它，但意图是使用隐藏的控制器

```
 Label label= new Label();
    label.ID = "lbl1";
    label.Text = "test -> " + hfUserName.Value;
    phLabelUser.Controls.Add(label); 
```

我在 IE 中启用了以下设置，因此该站点在 Intranet 上没有安全问题。

```
Run ActiveX controls and plug-ins
Initialize and script ActiveX controls not marked as safe. 
```

为什么这会在调试器中产生错误？

“Microsoft JScript 运行时错误：自动化服务器无法创建对象”

# tsql - 一次更改多个表

> ID：11456523
> 
> 赞同：2
> 
> 时间：2012-07-12T16:37:48.857
> 
> 标签：tsql, sql-server-2008-r2, dynamic-sql

我正在尝试一次更改多个 SQL Server 2008 R2 表。

这是我的代码：

```
use DatabaseName
go

Declare @SchemaUsed varchar(20) = 'dbo'

create table #Tables
(
  TableName varchar(100), Processed int
)

insert into #Tables 
  select top 1 table_name, 0  
  from INFORMATION_SCHEMA.TABLES 
  where TABLE_SCHEMA = @SchemaUsed
  and table_type = 'Base Table'
  and (TABLE_NAME like 'PM%' )
  ORDER BY TABLE_NAME

DECLARE @TableName varchar(max)
DECLARE @SQL varchar(max)

WHILE EXISTS (select top 1 'x' from #Tables where Processed = 0)
BEGIN
    SET @TableName = (select top 1 TableName from #Tables where Processed = 0)

  Set @SQL = 'ALTER TABLE ' + @SchemaUsed + '.' + @TableName + ' ADD [identityID]  bigint IDENTITY(1, 1) NOT NULL '
 -- Set @SQL =     '''' + @SQL + ''''
  Print @SQL
 EXEC  @SQL;

    update #Tables
    set Processed = 1
    where TableName = @TableName
END

drop table #Tables 
```

我无法让它发挥作用来挽救我的生命并出现以下错误：

> 查找错误 - SQL Server 数据库错误：名称“ALTER TABLE dbo.PM1GTVLV ADD [identityID] bigint IDENTITY(1, 1) NOT NULL”不是有效标识符。

我也尝试过多种字符串变体并使用`sp_executesql`。

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:39:42.403

尝试

```
DECLARE @SQL NVARCHAR(MAX);

EXEC sp_executesql @SQL; 
```

而不是 EXEC @sql。

顺便说一句，这是同一代码恕我直言的更有用的版本：

```
DECLARE @SchemaUsed VARCHAR(20) = 'dbo';

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += CHAR(13) + CHAR(10) + N'ALTER TABLE ' 
 + QUOTENAME(@SchemaUsed) + '.'
 + QUOTENAME(name) + ' ADD [identityID]
   BIGINT IDENTITY(1,1) NOT NULL;'
FROM sys.tables
WHERE SCHEMA_NAME([schema_id]) = @SchemaUsed
AND name LIKE 'PM%';

PRINT @sql;

--EXEC sp_executesql @sql; 
```

甚至更好：

```
DECLARE @SchemaUsed VARCHAR(20) = 'dbo';

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += CHAR(13) + CHAR(10) + N'ALTER TABLE ' 
 + QUOTENAME(@SchemaUsed) + '.'
 + QUOTENAME(name) + ' ADD [identityID]
   BIGINT IDENTITY(1,1) NOT NULL;'
FROM sys.tables AS t
WHERE SCHEMA_NAME([schema_id]) = @SchemaUsed
AND name LIKE 'PM%'
AND NOT EXISTS (SELECT 1 FROM sys.columns AS c
 WHERE [object_id] = t.[object_id]
 AND c.is_identity = 1);

PRINT @sql;

--EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:42:01.210

要执行字符串，`EXEC`需要在字符串（或字符变量）周围加上括号，如[BOL 语法](http://msdn.microsoft.com/en-us/library/ms188332.aspx)所示：

```
EXEC (@SQL); 
```

# eclipse - 未找到 CLOCK_MONOTONIC

> ID：11456527
> 
> 赞同：5
> 
> 时间：2012-07-12T16:38:04.943
> 
> 标签：eclipse, g++

我正在尝试使用clock_gettime（CLOCK_MONOTONIC，ts）。我已经包含了 time.h，并链接到 librt（我认为）。我仍然收到 CLOCK_MONOTONIC 未定义的错误。（编辑：添加了错误文本）

```
Symbol 'CLOCK_MONOTONIC' could not be resolved  ...   Semantic Error 
```

日食中的c++。在 myrojname->properties->C/C++ Build->GCC C++ Linker->libraries 我添加了“rt”。生成的命令行包括 -lrt。

我尝试了一个更简单的临时程序，并使用**g++ -o mytest mytest.cpp -lrt 从命令行编译**，效果很好。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T07:58:18.400

我认为这实际上是来自 CDT 静态分析器的错误消息，*而不是*来自编译器本身的错误消息。

而且我认为它抱怨的是代码本身，而不是链接对象中缺少的东西，所以无论你是否链接`rt`都无关紧要（无论如何对于这个特定问题）。

您应该进入 C++ 设置，特别是包含路径，并确保那里列出了所有需要的目录。

# django - django - 查询最接近给定值的数值

> ID：11456531
> 
> 赞同：1
> 
> 时间：2012-07-12T16:38:34.217
> 
> 标签：django, absolute

我有一个游戏的 django 模型级别。

```
class Level(models.Model):

key = models.CharField(max_length=100)
description = models.CharField(max_length=500)
requiredPoints = models.IntegerField()
badgeurl = models.CharField(max_length=100)
challenge = models.ForeignKey(Challenge) 
```

我现在想查询 pointsRequired 值小于给定值的最高级别。

如果我有：

级别 1: requiredPoints: 200 Level 2: requiredPoints: 800 Level 3: requiredPoints: 2000

当我输入例如 900 或 1999 作为查询参数时，我希望返回级别 2，当输入 10000 时它应该是级别 3。

在 sql 它看起来像

```
select   pointsRequired,
abs(pointsRequired - parameter) as closest
from     the_table
order by closest
limit 1 
```

有小费吗？我必须使用[额外的 Query-Set](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)吗？它会是什么样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:48:31.907

我不认为你的 SQL 是正确的。如果参数是 1999，它应该返回“级别 3”。根据您的描述，SQL 可能是：

```
SELECT pointsRequired FROM the_table WHERE pointsRequired < parameter ORDER BY pointsRequired DESC LIMIT 1; 
```

或者在 Django 中：

```
try:
    Level.objects.filter(requiredPoints__lt=parameter).order_by('-requiredPoints')[0]
except IndexError: 
    # Do something 
```

# delphi - Synapse SMTP 身份验证 - 不断收到错误 530

> ID：11456532
> 
> 赞同：0
> 
> 时间：2012-07-12T16:38:36.127
> 
> 标签：delphi, smtp, synapse

只需按照 Synapse [HowTo上的简单示例](http://www.synapse.ararat.cz/doku.php/public%3ahowto)

但是在 smtp.MailTo(sTo) 或 smtp.MailFrom(sFrom) 我得到一个 530 错误

我在哪里可以设置传出身份验证？

更新： - - -

我正在使用 GMail 进行此测试，包括 To 和 FROM 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:26:23.377

如果您更仔细地查看[该示例](http://www.synapse.ararat.cz/doku.php/public%3ahowto%3asmtpsend)，您会发现`TSMTPSend`该类具有属性和`UserName`方法。`Password``Login()`

# c - fprintf() 打印 0 而不是完整的浮点值（转换问题？）

> ID：11456540
> 
> 赞同：0
> 
> 时间：2012-07-12T16:39:11.380
> 
> 标签：c, double, precision, flags, printf

我从 Boulanger 和 Lazzarini 的“The Audio Programming Book”获得的一些示例代码遇到了问题。它应该为正弦波生成值，但是当我运行它时，我只得到 -0.0000000 和 0.0000000 的值，而不是 -1.0 和 +1.0 之间的预期值。我在使用断点运行时观察了这些值，看起来一切都很好，但是当它运行时（在调试或发布模式下）它给了我不好的值。

我在 MacOSX 10.6.8 上使用 Xcode 3.2.6。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#ifndef M_PI
#define M_PI (3.141592654)
#endif

int main(int argc, char** argv) { 

  int i, nsamps;
  double samp;
  double twopi = 2.0 * M_PI;
  double angleincr;

  nsamps = 50;
  angleincr = twopi * nsamps;

  for (i=0; i < nsamps; i++) {
    samp = sin(angleincr*i);
    fprintf(stdout, "%lf\n", samp);
  }

  fprintf(stderr, "done\n");
  return 0;
} 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:42:01.237

> ```
> samp = sin(angleincr*i); 
> ```

在您的代码`angleincr*i`中始终是 2π 的倍数，因此结果确实为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:56:26.047

`"%lf"`不是 的有效格式说明符`printf`。可能是在您的系统上，这试图将双重参数解释为 a`long double`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T16:08:52.617

它应该是

```
angleincr = twopi / nsamps; 
```

according to page 159 of the Audio Programming Book.

# exception - jGit push 产生异常

> ID：11456544
> 
> 赞同：0
> 
> 时间：2012-07-12T16:39:26.197
> 
> 标签：exception, push, jgit

我正在尝试在我的 java 项目中使用 jGit。我使用的版本是“2.0.0.201206130900-r”，我的操作系统是 Windows。一切正常，直到我尝试推动：

```
public static void main(String[] args) {

    File gitDir = new File("c:\\new-repo\\");

try {

      String localPath = "c:\\new-repo\\";
      Repository localRepo = new FileRepository(localPath + ".git");
      localRepo.create();
      Git git = new Git(localRepo);

      git.add().addFilepattern("c:\\test.txt").call();

      git.commit().setMessage("testcommit").call();

      git.push().call();

  localRepo.close();
} catch (IllegalStateException ise) {
        System.out.println("The repository already exists!");
} catch (IOException ioe) {
        System.out.println("Failed to create the repository!");
} catch (NoFilepatternException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (GitAPIException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
  } 
```

我得到的是以下内容：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/jcraft/jsch/JSchException
at org.eclipse.jgit.transport.Transport.<clinit>(Transport.java:111)
at org.eclipse.jgit.api.PushCommand.call(PushCommand.java:141)
at Application.main(Application.java:76)
Caused by: java.lang.ClassNotFoundException: com.jcraft.jsch.JSchException
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
... 3 more 
```

有人可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:47:28.583

看来您缺少推送 SSH 所需的[jsch库。](http://www.jcraft.com/jsch/)将它添加到您的类路径中（如果您使用 Maven，请将其添加到您的 pom 中，或者将 jar 添加到您的类路径中）。

# asp.net - 均衡/标准化 Web api 调用的响应时间

> ID：11456545
> 
> 赞同：0
> 
> 时间：2012-07-12T16:39:27.487
> 
> 标签：asp.net, asp.net-web-api

我想将我的 api 响应均衡到每次调用 2 秒。您认为这是正确的方法吗（vb.net 代码）...

* * *

Dim timeToSleep = 2000 - Date.Now.Subtract(start).TotalMilliseconds

''在这里执行的代码...

如果 timeToSleep > 0 则 Threading.Thread.Sleep(timeToSleep)

* * *

Threading.Thread.Sleep 功能是否仅阻止此 api 请求？如果其他人在 Sleep 函数执行时点击了 api 请求怎么办？

我应该这样做有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:43:31.937

> Threading.Thread.Sleep 功能是否仅阻止此 api 请求？如果其他人在 Sleep 函数执行时点击了 api 请求怎么办？

请记住，虽然您可能会尝试通过使用睡眠来调整 api 调用的相对输出时间，但在考虑延迟、处理、其他导致慢/快响应时间的原因等因素时，它不会可靠地在*该时间间隔内。*

> 我应该这样做有更好的方法吗？

如果有的话，我会说微调您的 api 调用，使其尽可能快速和轻量级，然后在调用它时在客户端执行间隔。（除非我误解你为什么这样做。）

此外，您可能想研究一个长轮询解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:03:18.317

虽然我认为这仅在测试场景（负载测试/用户接受测试）中有用，以模拟自然延迟，并且此代码永远不会接触生产，但这将起作用，您的呼叫将被延迟，而其他呼叫可以跑。**问题是您阻塞了哪个线程：**

如果您返回一个普通对象 或`HttpResponseMessage`，您的调用将阻塞 ASP.NET 的线程池，我认为在 IIS 7 中该线程池为 1000。任何更多请求，您的服务器都会返回 503 错误。

如果您返回 a `Task<T>`，那么您将阻塞 .NET 的 ThreadPool 线程 - 除非您指定使用另一个线程池的调度程序。此池中的线程数将在可以使用静态方法设置的[最小值](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getminthreads)和[最大值](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getmaxthreads)之间波动`ThreadPool`。

我的[博客](http://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-3-async-deep.html)上有几篇关于这个主题的文章。

# java - 关于 Eclipse 中的空值检查插件

> ID：11456551
> 
> 赞同：0
> 
> 时间：2012-07-12T16:39:41.823
> 
> 标签：java, eclipse-plugin

请告知这样的插件可以在我的代码中帮助我忘记实现空检查的地方，是否存在这样的插件，以便我可以在我的 Eclipse 中安装

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:48:10.503

您可以尝试先更改 eclipse 配置，而不是使用插件。尝试将*Windows > Preferences > Java > Compiler > Errors/Warnings >Potential Programming Problems >Potential Null Pointer Access*设置为除了忽略之外的任何内容。

作为旁注，如果您觉得您正在编写的代码有许多潜在的异常/错误课程，请始终尝试使用防御性编程方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:47:32.593

[http://findbugs.sourceforge.net/](http://findbugs.sourceforge.net/)是您正在寻找的。FindBugs 是一个静态源代码分析工具，可以发现许多常见的编程错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:48:04.423

在我看来，空指针异常是最好的空检查。您应该始终使用 jUnit 测试每个方法/函数，然后您会看到是否有一些空错误。

# html - 对齐嵌套表格宽度

> ID：11456553
> 
> 赞同：1
> 
> 时间：2012-07-12T16:39:45.207
> 
> 标签：html, css, html-table

我有一些嵌套表。有主表，外部表，它必须为左右列嵌套表，并且在每一列中，一些表相互堆叠。我似乎无法弄清楚如何让列中的表格都跨越相同的宽度（主要在右列中）。这是 HTML，为了便于阅读而缩小：

```
<table class="outer">
        <tr>
            <td>
                <table class="column" id="left_column">
                    <tr>
                        <td>
                            <table class="cell" id="t1">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t2" style="margin-top:20px; margin-left:86px">
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
            <td>
                <table class="column" id="rightColumn">
                    <tr>
                        <td>
                            <table class="cell" id="t3">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t4">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t5">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t6">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t7">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="cell" id="t8">
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table class="messages" id="t9">
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table> 
```

这是相关的CSS：

```
.outer
{
margin: auto;
}
.column
{
border: none;
margin-left: auto;
margin-right: auto;
}
table.cell
{
border-collapse: collapse;
}
#rightColumn table
{
padding: 10px;
width: 100%;
} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:37:04.043

所以我的 CSS 是有效的。Firefox 实际上已经为这个页面缓存了一个旧的 CSS。清除缓存后，宽度立即变为 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:46:07.753

如果您真的想确定表格列宽，请使用`table-layout: fixed`CSS 属性`table`并为第一行中的所有单元格指定宽度（`col`如果您从没有第一行开始，则使用元素）。

# powershell - 关于从 2007 年到 2010 年共享点迁移的建议

> ID：11456556
> 
> 赞同：0
> 
> 时间：2012-07-12T16:39:58.357
> 
> 标签：powershell, sharepoint-2010

我必须迁移表单库上的默认和自定义元数据。我需要迁移的是：

```
70 columns
15 linked lists (master data)
750 records

and from tasks lists I have to migrate the following:
- 35 columns
- 15 content types
- 2000 records 
```

有人告诉我我应该编写 powershell 脚本，这就是他们对我的期望。现在，谁能帮助我如何通过 powershell 提取这些信息并导出到 sharepoint 2010？我从来没有使用过powershell，但它似乎并不难，因为它类似于c#。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:44:26.697

如果您查看提取列，我会查看 gary le-points stsadm extensions，我认为他有一些可以帮助您。

例如，我认为 gl-exportsitecolumns 和 gl-exportsitecontenttypes <- 这些可能不准确，但它们会很接近

一旦有了这些，就不必担心列和内容类型就位，您可以使用数据表来复制数据。

Powershell 帮助列 [http://get-spscripts.com/2011/01/export-and-importcreate-site-columns-in.html](http://get-spscripts.com/2011/01/export-and-importcreate-site-columns-in.html)

内容类型的 Powershell [http://secretsofsharepoint.com/cs/blogs/tips/archive/2011/08/24/adding-content-types-using-powershell.aspx](http://secretsofsharepoint.com/cs/blogs/tips/archive/2011/08/24/adding-content-types-using-powershell.aspx) 希望这可以为您提供您正在寻找的大部分内容:)

# github - Markdown 未在嵌入式 gist 中呈现

> ID：11456558
> 
> 赞同：8
> 
> 时间：2012-07-12T16:40:04.177
> 
> 标签：github, gist

当我嵌入它时，我的 gist markdown 没有呈现。这是 GitHub 问题，还是我做错了？

要旨：

[https://gist.github.com/3094145](https://gist.github.com/3094145)

非渲染嵌入式要点：

[http://jsfiddle.net/dJnBg/](http://jsfiddle.net/dJnBg/)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T19:08:15.297

* *2012-12-11 更新：今天 github 推出了[对 gist.github.com 的完全重写](https://github.com/blog/1276-welcome-to-a-new-gist)，这已经不是问题了。证明见[截图](https://github.com/dergachev/redmine_gist/issues/3#issuecomment-11266685)。**

看起来是故意的。值得注意的是，语法高亮仍然适用于嵌入，但不是（唉）markdown 渲染。

一个潜在的解决方法可能是添加额外的 JS 代码（在 gist 嵌入 JS 之后）呈现 Markdown 客户端，可能通过[http://www.showdown.im/](http://www.showdown.im/)

我为自己编写的 redmine gist 嵌入插件做了一个问题。 [https://github.com/dergachev/redmine_gist/issues/3](https://github.com/dergachev/redmine_gist/issues/3)

也许当你读到这篇文章时，我已经开始解决这个问题了；）

# ruby-on-rails - rspec - 如何测试不是数据库列的模型属性

> ID：11456559
> 
> 赞同：3
> 
> 时间：2012-07-12T16:40:10.690
> 
> 标签：ruby-on-rails, ruby, rspec, rspec-rails, expectations

我有一个基于 Active Record 的模型：- House

它有各种属性，但没有`formal_name`属性。但是它确实有一个方法`formal_name`，即

```
def formal_name
    "Formal #{self.other_model.name}"
end 
```

如何测试此方法是否存在？

我有：

```
describe "check the name " do

    @report_set = FactoryGirl.create :report_set
    subject  { @report_set }
    its(:formal_name) { should == "this_should_fail"  }
end 
```

但我明白了`undefined method 'formal_name' for nil:NilClass`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:01:24.647

首先，您可能想确保您的工厂在创建 report_set 方面做得很好——也许将 factory_girl 放在 Gemfile 中的开发组和测试组下，启动 irb 以确保它`FactoryGirl.create :report_set`不会返回 nil。

然后尝试

```
describe "#formal_name" do
  let(:report_set) { FactoryGirl.create :report_set }

  it 'responses to formal_name' do
    report_set.should respond_to(:formal_name)
  end

  it 'checks the name' do
    report_set.formal_name.should == 'whatever it should be'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:50:23.303

就个人而言，我不喜欢您使用的快捷方式 rspec 语法。我会这样做

```
describe '#formal_name' do
  it 'responds to formal_name' do
    report_set = FactoryGirl.create :report_set
    report_set.formal_name.should == 'formal_name'
  end
end 
```

我认为这种方式更容易理解。

* * *

编辑：在 Rails 3.2 项目中使用 FactoryGirl 2.5 的完整工作示例。这是**经过测试的代码**

```
# model - make sure migration is run so it's in your database
class Video < ActiveRecord::Base
  # virtual attribute - no table in db corresponding to this
  def embed_url
    'embedded'
  end
end

# factory
FactoryGirl.define do
  factory :video do
  end
end

# rspec
require 'spec_helper'

describe Video do
  describe '#embed_url' do
    it 'responds' do
      v = FactoryGirl.create(:video)
      v.embed_url.should == 'embedded'
    end
  end
end

$ rspec spec/models/video_spec.rb  # -> passing test 
```

# asp.net - 创建类的新实例时出现 NullReferenceException

> ID：11456560
> 
> 赞同：0
> 
> 时间：2012-07-12T16:40:12.550
> 
> 标签：asp.net, visual-studio-2010, nuget, nullreferenceexception, webdeploy

长期读者，第一次海报。

所以我有一个 VisualStudio2010 asp.net 项目（.net 4.0）。当我通过 Visual Studio 运行该项目时，它可以完美运行。如果手动将文件复制到我的测试服务器，它也可以完美运行。

问题是当我通过 Web Deploy 发布站点时，每当我的代码尝试实例化由 nuget 包提供的新类时，我都会收到 NullReferenceException。

在这个例子中，MySql.* 是一个通过 nuget 安装的包。包目录包含在项目中。

```
Imports MySql.Data
Imports MySql.Data.MySqlClient
Public Class TestClass

    Public Sub Load()
        Dim da As MySqlDataAdapter = New MySqlDataAdapter() ' NullReferenceException thrown here.
    End Sub
End Class 
```

说真的，任何帮助都会很棒！谢谢。

## 更新：问题已解决

所以我通过更改以下设置解决了我的问题：项目属性-> 打包/发布 Web > 要部署的项目从“仅运行此项目所需的文件”更改为“此项目中的所有文件”

这有效地完成了与我之前的手动推送相同的事情。

我收集到的情况是我编译的程序集正在传输，但从未加载到 IIS 服务器上的 .net 虚拟机中。诡异的。请纠正我，我想知道更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T15:11:12.363

所以我通过更改以下设置解决了我的问题：项目属性-> 打包/发布 Web > 要部署的项目从“仅运行此项目所需的文件”更改为“此项目中的所有文件”

这有效地完成了与我之前的手动推送相同的事情。

我收集到的情况是我编译的程序集正在传输，但从未加载到 IIS 服务器上的 .net 虚拟机中。诡异的。请纠正我，我想知道更多。

# opencv - OpenCV 均值/SD 滤波器

> ID：11456565
> 
> 赞同：16
> 
> 时间：2012-07-12T16:40:31.993
> 
> 标签：opencv, filter, image-segmentation, standard-deviation

我把它扔在那里，希望有人以前尝试过这种荒谬的事情。我的目标是接收输入图像，并根据每个像素周围的小窗口的标准偏差对其进行分割。基本上，这在数学上应该类似于高斯或箱形滤波器，因为它将应用于编译时（甚至运行时）用户指定的每个像素周围的窗口大小，并且目标数组将包含每个像素的 SD 信息，在与原始大小相同的图像中。

这个想法是在 HSV 空间中的图像上执行此操作，以便我可以轻松找到颜色均匀的区域（即在 Hue 和 Sat 平面中具有小的局部 SD 的区域）并从图像中提取它们以进行更深入的处理。

所以问题是，以前有没有人构建过这样的自定义过滤器？我不知道如何在一个简单的盒型过滤器内核中进行 SD，例如用于高斯和模糊的过滤器内核，所以我猜我将不得不使用 FilterEngine 构造。另外，我忘了提到我是用 C++ 做的。

非常感谢您的建议和思考。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-12T20:16:04.343

[维基百科对标准偏差](http://en.wikipedia.org/wiki/Standard_deviation#Definition_of_population_values)有一个很好的解释，您可以将其用于标准偏差过滤器。

基本上，它归结为使用盒式过滤器模糊图像，使用盒式过滤器模糊图像的正方形，并取它们差异的平方根。

**更新：**这可能用维基百科的等式更好地显示...... ![在此处输入图像描述](../Images/499d2d28eabf0ef985cf60d7de4899a3.png)

您可以将 OpenCV`blur`函数视为表示感兴趣邻域的[期望值](http://en.wikipedia.org/wiki/Expected_value)（即 E[X]，即样本均值）。在这种情况下，随机样本 X 由局部邻域中的图像像素表示。因此，通过使用上面的等价，我们有类似`sqrt(blur(img^2) - blur(img)^2)`OpenCV 的东西。这样做可以让您计算局部均值和标准差。

另外，以防万一您对数学证明感到好奇。这种等价性称为[方差的计算公式](http://en.wikipedia.org/wiki/Computational_formula_for_the_variance)。

以下是如何在 OpenCV 中执行此操作：

```
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace std;
using namespace cv;

Mat mat2gray(const Mat& src)
{
    Mat dst;
    normalize(src, dst, 0.0, 1.0, NORM_MINMAX);
    return dst;
}

int main()
{
    Mat image = imread("coke-can.jpg", 0);

    Mat image32f;
    image.convertTo(image32f, CV_32F);

    Mat mu;
    blur(image32f, mu, Size(3, 3));

    Mat mu2;
    blur(image32f.mul(image32f), mu2, Size(3, 3));

    Mat sigma;
    cv::sqrt(mu2 - mu.mul(mu), sigma);

    imshow("coke", mat2gray(image32f));
    imshow("mu", mat2gray(mu));
    imshow("sigma",mat2gray(sigma));
    waitKey();
    return 0;
} 
```

这会产生以下图像：

## 原来的

![在此处输入图像描述](../Images/a2ae77079b28dbbc647a08db7e8e9343.png)

## 意思是

![在此处输入图像描述](../Images/0b1a8392fe0f4d711272b3c0c740e8e1.png)

## 标准差

![在此处输入图像描述](../Images/2006a99f4f70d113d508204e608c45cf.png)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-10T20:38:45.030

如果您想以更一般的方式使用它，这可以产生 nan 值

接近零的值有时可能是“负数”。

```
Mat sigma;
cv::sqrt(mu2 - mu.mul(mu), sigma); 
```

正确的方法应该是

```
Mat sigma;
cv::sqrt(cv::abs(mu2 - mu.mul(mu)), sigma); 
```

# opengl - 在openGL显示列表中如何投影/取消投影

> ID：11456574
> 
> 赞同：0
> 
> 时间：2012-07-12T16:40:51.357
> 
> 标签：opengl

我有渲染一些对象并为其中一些显示文本标签的openGL代码。显示标签是通过使用 gluProject 将适当的顶点投影到屏幕上来完成的，然后添加一个小的偏移量，使标签位于顶点旁边。这样，每个标签与屏幕上的顶点的距离相同。

我最初并没有为此使用显示列表（除了字形的显示列表），它工作正常（如果有点慢）。现在我为整个场景构建了一个显示列表，发现标签放置不正确。

我花了一段时间，但我想我基本上找到了问题：gluProject 将投影矩阵、模型视图矩阵和视口作为参数。除了调用 glGetDoublev(GL_MODELVIEW_MATRIX, ...) 等之外，我认为没有其他方法可以提供它们。但是 glGet 函数在显示列表中是“不允许的”，从经验上看，这似乎意味着它们不会导致错误，而是立即执行。所以被编译到显示列表中的矩阵数据是来自列表编译时间而不是列表执行时间（这是一个问题，因为我需要预编译列表，而不是立即执行它）。至少这是我目前的理论。

1.  任何人都可以确认或否认这会导致问题吗？
2.  如何解决这个问题？我只想做 gluProject 所做的，但使用*列表的*当前矩阵。

注意：我知道在最新版本的 openGL 中不推荐使用各种功能/方法；请按照“你不应该那样做”的方式回答我;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:51:24.510

# android - 尝试在 Asynctask Android 中使用 Jsoup 时出错

> ID：11456578
> 
> 赞同：0
> 
> 时间：2012-07-12T16:41:13.747
> 
> 标签：android, android-asynctask, jsoup

我正在尝试使用 Jsoup.connect 访问网站并获取数据，当我将代码作为 java 应用程序运行时，它工作正常，但是当我在 android 项目的 Asynctask 中运行它时，它崩溃并给我和错误. 我不确定为什么。这是我的代码：

```
 public class loadSomeStuff extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... arg0) {
        Log.v("jsoup", "running");
         try {
             Log.v("jsoup", "running1");
                Document doc = (Document) Jsoup.connect("http://en.wikipedia.org/wiki/Boston").get();
                Log.v("jsoup", "running2");
                Element contentDiv = ((Element) doc).select("div[id=content]").first();
                Log.v("jsoup", "running3");
                String output= contentDiv.toString();
                Log.v("jsoup", output);

            }catch (IOException e) {
            }
            return null;
    } 
```

当它到达使用 Jsoup.connect 的行时，我收到一个错误。这是我得到的错误的前 3 行：

```
07-12 12:30:42.296: E/AndroidRuntime(686): FATAL EXCEPTION: AsyncTask #1
07-12 12:30:42.296: E/AndroidRuntime(686): java.lang.RuntimeException: An error occured while executing doInBackground()
07-12 12:30:42.296: E/AndroidRuntime(686):  at android.os.AsyncTask$3.done(AsyncTask.java:299) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:50:36.143

我看到了同样的错误，尽管只有通过 Proguard 运行的代码。

通过将 JSoup 从 1.6.3 降级到 1.6.2 解决了这个问题

# android - Arduino + Android：如何切换活动

> ID：11456587
> 
> 赞同：2
> 
> 时间：2012-07-12T16:41:36.900
> 
> 标签：android, android-activity, arduino, adk

我正在开发一个与 Arduino 交互的 Android 应用程序。我正在尝试管理多个活动，每个活动都负责控制 Arduino 板的特定部分。

不幸的是，网络上的教程只使用一项活动。所以我不知道如何继续保持与 Arduino 的连接，同时导航到一个新的 Activity 或正确关闭它，然后在新的 Activity 上重新打开它。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:23:58.637

您可以使用[服务](http://developer.android.com/reference/android/app/Service.html)连接到 Arduino 并保持该连接打开。然后，您的活动可以与服务对话，开始、停止、切换等。

**编辑**：如何做到这一点已经由另一个问题/答案处理：

[长时间运行的 ADK 附件（服务？）](https://stackoverflow.com/questions/9873261/long-running-adk-accessory-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:05:24.150

我以前没有在 Java 中使用过 Arduino，但您可能想要遵循[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式。使用单例模式，您用来连接到它的任何对象都可以从多个活动和多个线程中访问。

不过，使用 Singleton 只会缓解您的问题。您仍然需要弄清楚如何关闭/重新打开它。

此外，了解[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)的工作原理也很重要。如果用户接到电话，屏幕关闭，或者屏幕方向发生变化，它会破坏您的活动并重新创建它。您将不得不处理如何保存和恢复原来的位置。这很可能意味着您必须关闭/重新打开连接。

# linux - 有没有一种简单的方法来批量重命名符号链接目标？

> ID：11456588
> 
> 赞同：5
> 
> 时间：2012-07-12T16:41:37.917
> 
> 标签：linux, shell

[重命名](http://linux.about.com/library/cmd/blcmdl1_rename.htm)之类的东西适用于文件，但适用于符号链接目标。

所以如果我有

```
link1 -> /usr/share/lib-1.2.2/file1
link2 -> /usr/share/lib-1.2.2/file2 
```

我可以做

```
rename 1.2.2 2.0.3 link* 
```

并且有

```
link1 -> /usr/share/lib-2.0.3/file1
link2 -> /usr/share/lib-2.0.3/file2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:52:30.037

使用这个脚本：

```
#!/bin/sh
from="$1"
to="$2"
shift 2
for i
do
  a=$(readlink "$i") && ln -sf "$(echo $a | sed "s@$from@$to@")" "$i"
done 
```

使用示例：

```
$ ls -l
total 0
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 1 -> /bin/1
lrwxrwxrwx 1 igor igor 7 Jul 12 18:56 10 -> /bin/10
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 2 -> /bin/2
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 3 -> /bin/3
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 4 -> /bin/4
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 5 -> /bin/5
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 6 -> /bin/6
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 7 -> /bin/7
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 8 -> /bin/8
lrwxrwxrwx 1 igor igor 6 Jul 12 18:56 9 -> /bin/9
<links>$ bash ../rename-links /bin/ /usr/bin/ *
<links>$ ls -l
total 0
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 1 -> /usr/bin/1
lrwxrwxrwx 1 igor igor 11 Jul 12 18:57 10 -> /usr/bin/10
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 2 -> /usr/bin/2
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 3 -> /usr/bin/3
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 4 -> /usr/bin/4
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 5 -> /usr/bin/5
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 6 -> /usr/bin/6
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 7 -> /usr/bin/7
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 8 -> /usr/bin/8
lrwxrwxrwx 1 igor igor 10 Jul 12 18:57 9 -> /usr/bin/9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T12:53:36.857

[实用程序-linux-2.23](https://kernel.org/pub/linux/utils/util-linux/v2.23/v2.23-ReleaseNotes)

> ```
> 重命名（1）：
>   - 支持新的命令行选项 --symlink 重命名符号链接目标
> 
> ```

# javascript - 为什么这两种编写 jQuery 插件的方法是等效的？

> ID：11456591
> 
> 赞同：3
> 
> 时间：2012-07-12T16:41:45.877
> 
> 标签：javascript, jquery, jquery-plugins

为什么这两种编写 jQuery 插件的方法是等效的？

* * *

第一种方式：

```
$.fn.myplugin = function () {
    return $(this).each(function() {
        return $(this).bind('click', function () {
            console.log('Hi');
        });
    });
}; 
```

* * *

第二种方式：

```
$.fn.myplugin = function () {
    return this.bind('click', function () {
        console.log('Hi2');
    });
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:51:25.133

Let's reduce from one to the other:

```
$.fn.myplugin = function () {
    return $(this).each(function() {
        return $(this).bind('click', function () {
            console.log('Hi');
        });
    });
}; 
```

When you start your function `this` is a jQuery object, so `$(this)` doesn't buy you anything, it could easily become:

```
$.fn.myplugin = function () {
    return this.each(function() {
        return $(this).bind('click', function () {
            console.log('Hi');
        });
    });
}; 
```

So you are saying "For each element in the jQuery object, create a jQuery object and bind an event to that object."

If you look in `bind`, it calls `on`, which performs some logic and finally does this line:

```
return this.each( function() {
    jQuery.event.add( this, types, fn, data, selector );
}); 
```

That means it is going to apply the event to every element in that jQuery object, so you are actually saying:

So you are saying "For each element in the jQuery object, create a jQuery object, and **for every element in that jQuery object** bind an event to that element."

You are now looping twice, once in a list of `N` elements and then `N` times in lists of 1 element. You can actually just all bind directly:

```
$.fn.myplugin = function () {
    return this.bind('click', function () {
        console.log('Hi2');
    });
}; 
```

And that of course, is the final code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:45:54.313

在您的情况下，除了您在第一个片段中无缘无故地创建一个新的 jQuery 对象（`this`是一个 jQuery 对象，因此无需使用`$(this)`）之外，没有真正的区别。

一般来说，`return this.each(...);`在你的插件函数中使用它是一个好主意，以保持一切可链接并让你的代码工作，不管你的插件函数被调用的 jQuery 对象中有多少元素。

Returning`this.bind(...)`也保持可链接性，但对于一个不仅绑定事件的更复杂的插件，`each`循环通常更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:43:20.850

两者之间根本没有区别。

只是出于某种原因，您在其中一个中进行了循环，但最终，它们具有相同的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:47:00.420

它们是等价的，因为在 jQuery 插件中，`this`是 jQuery 对象，所以什么都不做`$(this)`。

`.bind`将对 jQuery 对象中的所有元素起作用，并且当您这样做时，`.each`您将单独调用`.bind`每个元素。

因此，它们是等价的，因为它们都循环遍历元素并将事件绑定到它们。

我建议使用第二个，它更干净，更快。

# java-me - 播放文件 wav j2me - Manager.createPlayer() 处的 IllegalArgumentException

> ID：11456600
> 
> 赞同：1
> 
> 时间：2012-07-12T16:42:06.813
> 
> 标签：java-me, midp, mmapi

我在我的应用程序中播放 wav 文件时遇到问题。

这是我的错误：

```
java.lang.IllegalArgumentException
 at javax.microedition.media.Manager.createPlayer(), bci=8
 at Tajwid.Tajwid.run(Tajwid.java:649)
 at Tajwid.Tajwid.actionPerformed(Tajwid.java:186)
 at com.sun.lwuit.util.EventDispatcher.fireActionSync(), bci=19
 at com.sun.lwuit.util.EventDispatcher.fireActionEvent(EventDispatcher.java:257) 
```

这是我的代码：

> ```
> public void run() {
>     try {
>         InputStream is = getClass().getResourceAsStream("/tes.wav");
>         player = Manager.createPlayer(is, "audio/x-wav");
> 
>         player.realize();
>         // get volume control for player and set volume to max
>         vc = (VolumeControl) player.getControl("VolumeControl");
>         if (vc != null) {
>             vc.setLevel(100);
>         }
>         player.prefetch();
>         player.start();
>     } catch (Exception e) {
>         e.printStackTrace();
>     } 
> ```

设备配置：CLDC-1.1
设备配置文件 MIDP 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:37:26.430

您收到的错误消息有足够的信息来确定代码中出了什么问题。

再仔细看看：

```
 java.lang.IllegalArgumentException
     at javax.microedition.media.Manager.createPlayer()... 
```

它说出现了问题`Manager.createPlayer()`。从您的代码中，很明显您使用了 method `Manager.createPlayer(java.io.InputStream stream, java.lang.String type)`。

如果您查看您使用的方法的**API 文档（**[可在线获取](http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/mm/jsr135/javax/microedition/media/Manager.html#createPlayer%28java.io.InputStream,%20java.lang.String%29 "API 文档")），您会发现发生此异常时的解释：

```
 Throws:
        java.lang.IllegalArgumentException - Thrown if stream is null. 
```

以上意味着传递给该方法的`stream`参数（在您的代码中）为空。`is`

您可以在初始化后立即添加一些日志记录`is`以更轻松地调试此问题：

```
InputStream is = getClass().getResourceAsStream("/tes.wav");
// add some logging to see if initialization was OK or not:
System.out.println("input stream is null: [" + (is == null) + "]"); 
```

这样，在模拟器中运行 MIDlet 时，您将看到是否`is`按预期初始化。

实际上，查看代码我猜您在传递给 getResourceAsStream 的文件名中打错了：**"/tes.wav"**看起来像是输入错误的**"/test.wav"**。

# pic - PIC16：自修改代码

> ID：11456601
> 
> 赞同：0
> 
> 时间：2012-07-12T16:42:25.330
> 
> 标签：pic, self-modifying

在微芯片 PIC16 微控制器上，我有一个程序：

```
off    = 2;
period = 10;

while (1) {
  if (counter == 1) {
    switch something on;
  }elseif (counter == off) {
    switch something off;
  }elseif (counter == period) {
    counter = 1;
  }
  counter++;
  pause;
} 
```

在我的代码的通信模块（未显示）中，我想实现修改程序代码的可能性：更改分配给“off”和“period”的值。

注意：我不想进行变量分配（重置时会丢失），但想对存储在设备上的程序进行永久更改。

有人可以指出我正确的方向吗？理想情况下，我想在 C 中实现它。最简单的方法是什么？“off”和“period”应该是变量、指针还是常量以便于实现？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:47:24.193

这通常是你会在数据 EEPROM 中做的事情，如果 micro 有它（大多数 16F 做）。通常你会在启动时从 EEPROM 中读取数据，并用读取的值填充 RAM 变量，然后使用代码中的变量。Microchip 为数据 EEPROM 的读写序列预先构建了代码。此外，如果该部分没有 EEPROM，您可以将程序 FLASH 的特定页面专用于数据存储，但是您必须一次缓冲和擦除整个页面，编辑链接描述文件等，这是一个完整的“另一个主题” .

# google-maps-api-3 - 使用 Googlemaps 地理编码器和存储数据

> ID：11456609
> 
> 赞同：4
> 
> 时间：2012-07-12T16:42:54.517
> 
> 标签：google-maps-api-3, geocoding, google-geocoder, google-geocoding-api

我正在构建一个活动站点，其中将存储给定活动的地址以在页面上的地图中使用。在查看个人事件页面时，我想在页面的一侧提供类似事件的列表。我还想按距离对这个列表进行排名，并为列表中的每个项目显示一个带有标记的小地图。

我正在考虑在内容输入时对事件地址进行地理编码，然后将这些数据存储在站点数据库中。这样做可以让我计算服务器上事件的距离，然后提供一个有序列表来显示。

我的问题是：这会违反 Googlemaps 服务条款吗？

这些条款：

*“地理编码器用于获取将使用 Google Maps API 显示的位置以外的任何目的都违反了服务条款。您可以使用 HTTP 地理编码器对您的 Google Maps API 应用程序之外的地址进行地理编码，以便它们可以被缓存并随后使用其中一个 Google Maps API 显示，但使用地理编码网络服务获得的位置不得被任何其他应用程序使用、以其他方式分发或转售。”*

建议存储数据不是问题，但我不确定按 long lat 排序列表的过程不会导致违规。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:18:03.857

只要您在问题中引用的地图是谷歌地图，并且您使用地理编码数据在谷歌地图上显示功能，就可以了。客户端`google.maps.Geocoder`[^(开发指南)](https://developers.google.com/maps/documentation/javascript/geocoding)适用于基于实时用户交互的动态请求，这些交互驱动需要执行动态地理编码。但是，当您希望在使用 Google 地图上的响应值之前对静态地址或坐标进行预地理编码时，Google 鼓励您考虑在服务器端使用`Geocoding Web Service`[^(开发指南。)](https://developers.google.com/maps/documentation/javascript/geocoding)假设存储这些值。

通常对这些值执行某种形式的响应后/存储后处理，就像您描述的按距离排序一样，以适应使用适当数据填充地图所需的任何用例。我知道你想小心留在 TOS 内，但你所描述的听起来很标准。

# google-search - 谷歌搜索结果显示过时的网站内容？

> ID：11456610
> 
> 赞同：3
> 
> 时间：2012-07-12T16:42:55.830
> 
> 标签：google-search

Google 搜索结果显示我的网站的旧版本过时，其中一些不再存在或页面网址不同。

他们会自动更新他们的搜索索引还是我必须做些什么来更新它？

另外，如果是自动的，通常需要多长时间？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:48:57.043

您应该能够要求谷歌重新索引您的网站。

[http://www.google.com/webmasters/](http://www.google.com/webmasters/)

1.  登入
2.  点击您的网站（如果未添加，则完成添加您的网站的过程）
3.  点击“添加/测试站点地图”
4.  给出新站点地图的网址
5.  点击提交站点地图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:49:10.363

> 他们会自动更新他们的搜索索引还是我必须做些什么来更新它？...另外，如果是自动的，通常需要多长时间？

从历史上看，谷歌每隔几天就会使用他们自制的 mapReduce 功能来重建他们的搜索引擎，这导致了这种行为。它是/是自动的，这意味着您不必做任何特别的事情来*使*谷歌更新他们的网站索引，特别是。

然而，根据[一篇关于他们的“Colossus”产品的新连线文章](http://www.wired.com/wiredenterprise/2012/07/google-colossus/)，他们不再使用间隔的 mapReduce，而现在更倾向于使用更实时的索引重建算法。

话虽如此，陪审团仍然无法确定人们能够以多快的速度*可靠地*期望他们的网站被*重新索引*。一旦谷歌确实更新了您的内容，您可能只是拭目以待，并对其进行基准测试。然后发表一篇关于它的文章......你会出名的。;)

# xslt - 转到父级并计算 XSLT 中的子级数

> ID：11456611
> 
> 赞同：0
> 
> 时间：2012-07-12T16:43:04.580
> 
> 标签：xslt, xpath, xslt-2.0

我喜欢

```
<Father>
<child1/>
<child2/>
<child3/>
<child4/>
</Father> 
```

我在`<child1>`节点。（或任何其他子节点。）现在我需要计算父亲拥有的孩子的数量。这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:01:17.153

有`count(../*)`帮助吗？它计算上下文节点的父节点的子元素。

# mysql - 关于提高Mysql并发插入和读取数据性能的问题

> ID：11456616
> 
> 赞同：0
> 
> 时间：2012-07-12T16:43:44.533
> 
> 标签：mysql, tokudb

基本信息：Mysql 数据库使用 TokuDB、InnoDB、MyIsam 表。

服务器信息：16 核，64GB RAM，CentOS 6.2，MySQL v 5.5

流程： 1\. 将大量数据从一个文本文件导入到一张 TokuDB 表中。2.通过加入不同的表来选择数据。

当进程1和进程2同时运行时，整个运行速度会慢很多。

有谁知道具体原因吗？

有什么改进的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T14:49:53.630

在 tokudb 中，在空表上导入时加载数据 infile 工作得更快（尤其是当您有非增量主键或唯一索引时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:12:27.267

将 IO 分离到不同的磁盘/阵列。将所有 IO 放在单个分区/阵列上会导致糟糕的性能。如果可能，请购买专用驱动器阵列，例如 IBM 的 DS3524 或 HP Smart Array。通过光纤通道（或更好的 SAS2）连接数据库服务器将为您带来令人难以置信的性能提升。几年前，我停止将大量磁盘放入服务器本身。我在驱动器阵列上使用 MySQL 的性能是服务器中磁盘的 5 倍。

# php - 如何在图像上叠加一个忙碌的图标？

> ID：11456619
> 
> 赞同：0
> 
> 时间：2012-07-12T16:44:02.093
> 
> 标签：php, javascript, jquery

我一直在寻找 SO 和 Google 试图找到一种简单的方法来在现有图像上覆盖一个忙碌的图标。在对图像应用滤镜和效果时，我想通过在当前图像顶部显示一个忙碌图标来让用户知道它正在被处理。

我是否需要创建某种覆盖图像，在流程开始时显示并在使用 jquery 完成后隐藏？

只是从可能已经这样做的人那里寻找一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:51:11.030

通常，您将图像绝对定位在内容上，在这种情况下是您的图像。您应该使用这样的包装元素来使定位起作用：

```
<div class="hasLoader">
    <img src="...your image..." />
    <img class="loading" src="...your LOADING image..." /> 
</div> 
```

CSS：

```
.hasLoader {
    position:relative;
}

.loading {
    position:absolute;
    top:0;
    left:0;
} 
```

如果您需要一个好的加载图像，[AjaxLoad](http://ajaxload.info/)有一个很好的生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:55:31.113

看看这个：http: [//jsfiddle.net/dystroy/M3AnJ/](http://jsfiddle.net/dystroy/M3AnJ/)

2 秒后，会出现一个叠加层，完全覆盖图像，中间有一个微调器。

这是我的做法：

**javascript：**

```
setTimeout(function(){
var o = $('<div id=overlay></div>');
o.prependTo('body');
var img = $('#test');
var pos = img.offset();
o.css({left:pos.left, top:pos.top, width:img.width(), height:img.height()});
}, 2000);​ 
```

**CSS：**

```
#overlay {
    position: fixed;
    background-color:rgba(100,100,100,0.5);
    background-image: url("http://dystroy.org/loading.gif");
    background-position:center;
    background-repeat:no-repeat;
};​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:58:07.247

正如@Diodeus 所说，理想情况下你会在图像周围有一个包装器，因此定位加载图像的问题相对于图像来说是微不足道的。

如果包装器不是一个选项（即，您正在使用现有的、不可更改的标记，或者包装器会破坏您的 CSS 整体，这不是世界末日。您只需将图标放在图像上，采取jQuery 可以很容易地获取元素相对于主体的坐标这一事实的优势，而不仅仅是它的相对父/祖先。

**HTML**（直接放在正文中，不嵌套）

```
<img src='loading.png' id='loading' /> 
```

**CSS**

```
#loading { position: absolute; display: none; /* other styles, BG img etc */ } 
```

**JavaScript**（`el`是相关的页面元素）

```
var loading_img = $('#loading');
function func_called_when_stuff_happening(el) {
    var el_coords = $(el).offset();
    loading_img.show().css({
        left: el_coords.left + (($(el).width() / 2) - (loading_img.width() / 2)),
        top: el_coords.top + (($(el).height() / 2) - (loading_img.height() / 2)),
    });
} 
```

这会将图标放在元素的中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:57:29.003

我会创建一个透明的 GIF 并将其绝对定位在带有 JavaScript 的目标图像上：

```
var targetImage = document.getElementById("targImgID");
var ovrlay = document.createElement("IMG");
ovrlay.src = "\my\image\url\overlay.gif";
ovrlay.style.position = "absolute";
ovrlay.style.left = targetImage.offsetLeft + "px";
ovrlay.style.top = targetImage.offsetTop + "px";
document.body.appendChild(ovrlay); 
```

这是尚未调试的原型代码，并遗漏了一些东西，例如获取目标图像的绝对位置，居中并设置覆盖的 z-index，以及使用 removeChild 删除东西，但这是我的地方d 开始。

# javascript - 使用 jQuery 和 MVC 进行客户端-服务器搜索

> ID：11456620
> 
> 赞同：0
> 
> 时间：2012-07-12T16:44:07.247
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3, razor

我有一个带有两个下拉列表的视图，用于搜索描述。结果列表现在显示在另一个视图中。我希望在同一个搜索视图中生成结果。我假设一些`AJAX`或`Jquery`可以用来解决这个问题，但不知道如何。那么，在这种情况下，如何将搜索结果显示在同一个视图页面中呢？

此外，我对`Search controller`. 我希望至少选择一个下拉列表（两个下拉列表都不应为空）。我怎样才能验证那部分？

**看法**

```
@using (Html.BeginForm("Search","Work",FormMethod.Get))
{

    <fieldset>
        <legend>Search</legend>
    <div class="editor-label">
            @Html.LabelFor(model => model.JobTypeID, "Job Type")
        </div>
        <div class="editor-field">
            @Html.DropDownList("JobTypeID", "Select Job Type")
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.JobPriorityID, "Job Priority")
        </div>
        <div class="editor-field">
            @Html.DropDownList("JobPriorityID", "Select Job Priority")
        </div>
         <p>
            <input type="submit" value="Search" />
        </p>
        </fieldset>
} 
```

**控制器：**

```
 [HttpGet]
        public ActionResult Search(int? jobtypeid, int? jobpriorityid)
        {
            var vJobDescriptions = new List<JobDescription>();

            if (jobtypeid != null && jobpriorityid != null )
            {
                 vJobDescriptions = (from description in db.JobDescriptions
                                        where (description.JobTypeID == jobtypeid && description.JobPriorityID == jobpriorityid)
                                        select description).ToList();
            }
            else if (jobtypeid == null && jobpriorityid != null)
            {
                 vJobDescriptions = (from description in db.JobDescriptions
                                        where (description.JobPriorityID == jobpriorityid)
                                        select description).ToList();

            }
            else if (jobtypeid != null && jobpriorityid == null)
            {
                vJobDescriptions = (from description in db.JobDescriptions
                                    where (description.JobTypeID == jobtypeid)
                                    select description).ToList();
            }
            else
            {
                vJobDescriptions = (from description in db.JobDescriptions
                                    select description).ToList();
            }

            return View(vJobDescriptions);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:49:18.257

一种可能性是使用 an`Ajax.BeginForm`而不是普通形式（不要忘记在您的页面中包含`jquery.js`和`jquery.unobtrusive-ajax.js`脚本）：

```
@using (Ajax.BeginForm("Search", "Work", new AjaxOptions { UpdateTargetId = "results" })) 
```

那么您可以为我们在以下内容中指定的结果设置一个占位符`UpdateTargetId`：

```
<div id="results"></div> 
```

现在剩下的就是让您的 Search 控制器操作返回一个 PartialView 并将包含搜索结果的模型传递给它：

```
public ActionResult Search(int? jobtypeid, int? jobpriorityid)
{
    var model = ...
    return PartialView("_Result", model);
} 
```

当然还有相应的`_Result.cshtml`部分：

```
@model IEnumerable<MyViewModel>
... 
```

> 此外，我对搜索控制器有一些疑问。我希望至少选择一个下拉列表（两个下拉列表都不应为空）。我怎样才能验证那部分？

我建议您使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)，但如果您不想使用第三方库，您可以编写一个自定义验证属性来执行此验证，然后用它装饰绑定到您的下拉列表的 2 个视图模型属性之一.

不幸的是，如果您决定采用 AJAX 路由，则必须能够显示来自服务器的验证错误，以防出现问题。因此，必须将整个表单放入部分中。

您可以使用的另一种方法是使用没有 AJAX 的标准表单简单地重新加载整个页面。结果将作为初始视图模型的一部分作为集合属性，该属性最初为 null，执行搜索后，您将使用结果填充它。然后在视图中，您将测试该属性是否不为空，以及它是否不包含负责呈现结果的 Partial：

```
@using (Html.BeginForm("Search", "Work", FormMethod.Get))
{
    ...
}

<div id="results">
    @if (Model.Results != null)
    {
        @Html.Partial("_Results", Model.Results)
    }
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:56:07.523

一个基本的方法是把你的搜索结果的标记放到一个局部视图中，然后从你的`Search`ActionMethod 中返回它。这将要求您将搜索方法的最后一行更改为

`return Partial(vJobDescriptions)`

在您的客户端脚本中，您将执行以下操作：

```
var data = $("form").serialize();
$.get("/Search", data)
 .complete(function(results) { 
     $("form").replace(results) }; 
```

关于您正在寻找的验证方面，我会考虑将您的读取模型与搜索命令参数分开。

```
public ActionResult Search(SearchModel search)
{
     if (!ModelState.IsValid) // return view w/ invalid model
} 
```

您的搜索参数模型将遵循以下原则：

```
[CustomValidation(typeof(SearchModel), 
                  "OneNotNullValidator", 
                  "One option must be selected"]
public class SearchModel 
{

     public int? JobTypeID { get; set;}
     public int? JobPriorityID { get; set;}

     public bool OneNotNullValidator()
     {
          return JobTypeID.HasValue || JobPriorityID.HasValue;
     }
} 
```

`CustomValidation`我应用于该类的属性在特定语法和名称上可能不是 100% 正确，但我希望它的要点能够得到理解。

# java - Java (JavaSound)：“clip.play()”是一个昂贵的调用吗？

> ID：11456622
> 
> 赞同：1
> 
> 时间：2012-07-12T16:44:09.277
> 
> 标签：java, multithreading, performance, jvm, javasound

我在 StackOverflow 上读到[，](https://stackoverflow.com/questions/6870816/why-this-code-doesnt-play-the-sound-file)每次在 JavaSound 中播放剪辑时，它都会在幕后创建一个线程来播放它。如果这是真的（如果不是，请告诉我，因为我没有找到任何文档/源代码），这是否会被视为一个昂贵的调用，因为在任何 OS/JVM 中创建线程都是一项昂贵的任务？我还不确定，但我可能需要同时播放 10 到 20 个剪辑，所以我想知道这是否会成为问题。

PS：如果是创建线程之外的其他原因造成的过度调用，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:04:48.990

线程并不昂贵，尤其是。我亲自制作了一个运行超过 500 次的程序。服务器程序可以产生的数量远不止于此。

声音处理并不便宜，但我不知道它比许多图形效果（如 3D 照明）更占用 CPU 资源。我制作了一个程序，它既可以播放声音，又可以制作一个“发光球”，在播放声音时会逐渐变大和变暗。“发光球”不断更新 RadialGradientPaint 以实现此效果。我遇到了大约 10 个球和声音的天花板，而图形球是更大的处理负载。

不过，播放 17 Clips 时，您可能无法做很多其他事情。您必须对其进行测试，如果 cpu 跟不上，您会听到辍学的声音。

您的 17 个剪辑可能会占用大量 RAM。你知道它们都被加载到内存中，是吗？每秒 44100 个样本，通常每个样本 4 个字节（立体声，16 位 PCM），开始快速加起来。

因此，可能有理由考虑使用 SourceDataLine，尤其是对于较长的声音。

此外，某些操作系统似乎不能很好地处理多种声音。我在这里遇到了特别是 Linux 的问题。我最终编写了一个程序，将所有播放的声音混合到一个输出 SourceDataLine 中，作为一种处理方式。

另一种提高效率的方法是加载我自己定制的剪辑。我给这个 Clip 提供了多个光标（指针），它们可以独立地在音频数据中移动。这样，我可以多次（并且以不同的速度）重叠播放剪辑。要使用 Java Clip 执行此操作，您必须多次将其加载到 RAM 中。所以，你可以考虑写这样的东西。多个光标的输出可以通过 SourceDataLine 进行汇总和播放。

# python - 使用启用了 WAL 的 sqlite3 数据库 -Python

> ID：11456623
> 
> 赞同：3
> 
> 时间：2012-07-12T16:44:15.070
> 
> 标签：python, sqlite, google-drive-api

我正在尝试修改 Google Drive 使用的两个数据库文件，以通过脚本（snapshot.db 和 sync_conf.db）重定向我的同步文件夹。虽然我可以在某些 sqlite 浏览器（不是全部）中打开文件，但我无法让 python 执行查询。我刚收到消息：`sqlite3.DatabaseError: file is encrypted or is not a database`

显然谷歌正在数据库上使用预写日志（WAL）配置，可以通过对数据库运行`PRAGMA journal_mode=DELETE;`（根据 sqlite.org）来关闭它，但我不知道如何对数据库运行它如果python无法读取它。

这是我所拥有的（我尝试执行 PRAGMA 命令并提交然后重新打开，但它没有用）：

```
import sqlite3

snapShot = 'C:\Documents and Settings\user\Local Settings\Application Data\Google\Drive\snapshot.db'
sync_conf = 'C:\Documents and Settings\user\Local Settings\Application Data\Google\Drive\sync_config.db'
sync_folder_path = 'H:\Google Drive'

conn = sqlite3.connect(snapShot)

cursor = conn.cursor()
#cursor.execute('PRAGMA journal_mode=DELETE;')
#conn.commit()
#conn= sqlite3.connect(snapShot)
#cursor = conn.cursor()
query = "UPDATE local_entry SET filename = '\\?\\" + sync_folder_path +"' WHERE filename ='\\?\C:Users\\admin\Google Drive'"
print query
cursor.execute(query) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:41:01.583

问题解决了。[我刚刚从http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)下载了最新版本的 sqlite，并覆盖了我的 python27/DLL 目录中的旧 .dll。现在工作正常。

真讨厌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:02:50.903

我不认为 journal_mode 杂注应该让 sqlite3 根本无法打开数据库。也许您使用的是过旧版本的 sqlite3 库？您使用的是什么版本的 Python，以及什么版本的 sqlite3 库？

```
import sqlite3
print sqlite3.version 
```

# php - 坐标 2 foreach 循环

> ID：11456626
> 
> 赞同：1
> 
> 时间：2012-07-12T16:44:35.210
> 
> 标签：php, foreach

我有 2 个 foreach 循环，它们都循环通过同一个数组；然而，一个在使用 str_replace 后循环遍历数组，而另一个不使用 str_replace；

我的问题; 我如何协调这两个循环，以便它们同时循环通过同一个数组？

抱歉，如果我的问题没有描述性；

```
$contents = ftp_nlist($conn_id, $dir);
$unalteredcontents = ftp_nlist($conn_id, $dir);
foreach ($unalteredcontents as $fname2)
{
    if (($fname2 != '.') && ($fname2 != '..'))
    {
        $url = "http://mywebsite.com/folder/" . $userid . "/" . $fname2 . "";
        next($fname2);
    }
}
$contents = str_replace("-", '', $contents);
$contents = str_replace(".pdf", '', $contents);

foreach ($contents as $fname)
{
    if (($fname != '.') && ($fname != '..'))
    {
        $sql_select = "INSERT INTO `database`.`column` (`data`, `fileurl`) VALUES ('" . $fname . "', '" . $url . "') ";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:58:58.137

从你的问题不清楚。但我试一试：

```
$unalteredcontents = ftp_nlist($conn_id, $dir);
foreach ($unalteredcontents as $fname2)
{
    if (($fname2 != '.') && ($fname2 != '..'))
    {
        $url = "http://mywebsite.com/folder/" . $userid . "/" . $fname2 . "";

        $contents = str_replace("-", '', $fname2);
        $contents = str_replace(".pdf", '', $contents);

        $sql_select = "INSERT INTO `database`.`column` (`data`, `fileurl`) VALUES ('" . $contents. "', '" . $url . "') ";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:59:02.040

像这样的东西：

```
$unalteredcontents = ftp_nlist($conn_id, $dir);
$contents = str_replace("-", '', $unalteredcontents);
$contents = str_replace(".pdf", '', $contents);

foreach ($contents as $key => $fname)
{
    if (($fname != '.') && ($fname != '..'))
    {
        $url = "http://mywebsite.com/folder/" . $userid . "/" . $unalteredcontents[$key];
        $sql_select = "INSERT INTO `database`.`column` (`data`, `fileurl`) VALUES ('" . $fname . "', '" . $url . "') ";
    }
} 
```

# visual-studio-2010 - 在 Visual Studio 2010 Express Edition 中将设置更改为 C#

> ID：11456629
> 
> 赞同：0
> 
> 时间：2012-07-12T16:44:44.533
> 
> 标签：visual-studio-2010

如何从 Visual Studio 2010 Express 中的默认设置（我想支持 VB）更改为支持 C# 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:10:31.303

Microsoft Visual Studio Express 2010 版有多个版本。

C# C++ 基础 Web 开发人员

下载 C# 版本

[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express)

# python - 如何捕获 tkinter 子小部件上的事件？

> ID：11456631
> 
> 赞同：9
> 
> 时间：2012-07-12T16:44:53.400
> 
> 标签：python, events, tkinter

在下面的块中，单击`a_frame`会触发事件处理程序`on_frame_click`，但单击不会触发事件处理程序`a_label`的子级。`a_frame`有没有办法强制`a_frame`捕获和处理源自其子级的事件（最好不必直接向子级添加处理程序）？我正在使用 Python 3.2.3。

```
import tkinter

def on_frame_click(e):
    print("frame clicked")

tk = tkinter.Tk()
a_frame = tkinter.Frame(tk, bg="red", padx=20, pady=20)
a_label = tkinter.Label(a_frame, text="A Label")
a_frame.pack()
a_label.pack()
tk.protocol("WM_DELETE_WINDOW", tk.destroy)
a_frame.bind("<Button>", on_frame_click)
tk.mainloop() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T19:14:32.217

是的，你可以做你想做的，但这需要一些工作。并不是不支持它，只是实际上很少需要这样的东西，所以它不是默认行为。

**TL;DR - 研究“tkinter 绑定标签”**

Tkinter 事件模型包括“**绑定标签**”的概念。这是与每个小部件关联的标签列表。当在小部件上接收到事件时，将检查每个绑定标记以查看它是否具有该事件的绑定。如果是这样，则调用处理程序。如果没有，它会继续。如果处理程序返回“break”，则链被破坏并且不再考虑标签。

默认情况下，小部件的绑定标签是小部件本身、小部件类、小部件所在的顶层窗口的标签，最后是特殊标签“all”。但是，您可以在其中放置任何您想要的标签，并且您可以更改顺序。

这一切的实际结果是什么？您可以将自己的唯一标签添加到每个小部件，然后将单个绑定添加到将由所有小部件处理的标签。这是一个示例，使用您的代码作为起点（我添加了一个按钮小部件，以表明这不仅仅是框架和标签的特殊内容）：

```
import Tkinter as tkinter

def on_frame_click(e):
    print("frame clicked")

def retag(tag, *args):
    '''Add the given tag as the first bindtag for every widget passed in'''
    for widget in args:
        widget.bindtags((tag,) + widget.bindtags())

tk = tkinter.Tk()
a_frame = tkinter.Frame(tk, bg="red", padx=20, pady=20)
a_label = tkinter.Label(a_frame, text="A Label")
a_button = tkinter.Button(a_frame, text="click me!")
a_frame.pack()
a_label.pack()
a_button.pack()
tk.protocol("WM_DELETE_WINDOW", tk.destroy)
retag("special", a_frame, a_label, a_button)
tk.bind_class("special", "<Button>", on_frame_click)
tk.mainloop() 
```

有关绑定标签的更多信息，您可能会对我对如何在 Tkinter Text 小部件中绑定自身事件的问题[的回答感兴趣，](https://stackoverflow.com/a/3513906/7432)[之后它将被 Text 小部件绑定？](https://stackoverflow.com/q/3501849/7432). 答案解决了与此处不同的问题，但它显示了使用绑定标签解决现实世界问题的另一个示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T17:57:28.317

我似乎找不到自动绑定到子小部件的直接方法（尽管有绑定到整个小部件类和应用程序中所有小部件的方法），但是这样的事情就很容易了。

```
def bind_tree(widget, event, callback, add=''):
    "Binds an event to a widget and all its descendants."

    widget.bind(event, callback, add)

    for child in widget.children.values():
        bind_tree(child, event, callback, replace_callback) 
```

* * *

只是想到了这一点，但是您也可以将大小为 的透明小部件`a_frame`作为子级放在所有内容之上`a_frame`并将`<Button>`事件绑定到该小部件，然后您可以在回调中引用`a_frame`as`e.widget.master`以使其在必要时可重用。那可能会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:04:10.877

[根据此在线 Tkinter 参考的](http://infohost.nmt.edu/tcc/help/pubs/tkinter/)[Levels of Binding](http://infohost.nmt.edu/tcc/help/pubs/tkinter/events.html#binding-levels)部分中所说的内容，这听起来是可能的，因为您可以将处理程序绑定到三个不同的级别。 总结一下：

1.  实例级别：将事件绑定到特定的小部件。
2.  类级别：将事件绑定到特定类的所有小部件。
3.  应用程序级别：独立于小部件——某些事件总是调用特定的处理程序。

详情请参考第一个链接。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-06T21:17:05.477

根据您要执行的操作，您可以绑定所有内容

```
print(a_label.bindtags())  # ('.!frame.!label', 'Label', '.', 'all')

tk.bind_class('.', "<Button>", on_frame_click) 
```

# c# - 使用 XmlWriterSettings 和 XmlSerializer 编写 XML 片段会提供额外的字符

> ID：11456632
> 
> 赞同：6
> 
> 时间：2012-07-12T16:44:59.197
> 
> 标签：c#, xml-serialization

我需要编写一个 XML 片段以供 Web 服务使用。任何 xml 声明都会导致 Web 服务拒绝请求。为了支持这一点，我有以下课程：

```
public class ContentQueryCriteria
{
    public int Type { get; set; }
    public string Value { get; set; }
    public int Condition { get; set; }
} 
```

这允许我设置请求标准，然后得到结果。

代码是这样使用的：

```
ContentQueryCriteria content = new ContentQueryCriteria();
            content.Type = 1;
            content.Value = "NAVS500";
            content.Condition = 1;

            string requestBody = SerializeToString(content);
            Console.WriteLine(requestBody); 
```

当我将其序列化为 XML 文件时，我得到了正确的响应，没有 XML 声明或任何命名空间。但是，我宁愿在内存流中捕获数据，而不是在文件中。

使用以下方法（取自[http://www.codeproject.com/Articles/58287/XML-Serialization-Tips-Tricks](http://www.codeproject.com/Articles/58287/XML-Serialization-Tips-Tricks)）我能够取得结果，但由于某种原因我有一个？列为字符串的一部分。

```
public static string SerializeToString(object obj)
{
    XmlSerializer serializer = new XmlSerializer(obj.GetType());
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
    ns.Add("", "");

    MemoryStream ms = new MemoryStream();

    XmlWriterSettings settings = new XmlWriterSettings();
    settings.OmitXmlDeclaration = true;
    settings.Encoding = Encoding.Unicode;
    XmlWriter writer = XmlWriter.Create(ms, settings);
    serializer.Serialize(writer, obj, ns);

    return Encoding.Unicode.GetString(ms.ToArray());

} 
```

结果字符串是：

```
?<ContentQueryCriteria><Type>1</Type><Value>NAVS500</Value><Condition>1</Condition></ContentQueryCriteria> 
```

如果我设置 OmitXmlDeclaration = false 我得到以下字符串：

```
?<?xml version="1.0" encoding="utf-16"?><ContentQueryCriteria><Type>1</Type><Value>NAVS500</Value><Condition>1</Condition></ContentQueryCriteria> 
```

谁能帮我确定为什么额外的？有吗？我怎样才能删除它？

**没有 BOM 的工作 SerializeToString 方法**

```
public static string SerializeToString(object obj)
{
    XmlSerializer serializer = new XmlSerializer(obj.GetType());
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
    ns.Add("", "");
    MemoryStream ms = new MemoryStream();
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.OmitXmlDeclaration = true;
    settings.Encoding = new UnicodeEncoding(bigEndian: false, byteOrderMark: false);
    XmlWriter writer = XmlWriter.Create(ms, settings);
    serializer.Serialize(writer, obj, ns);

    return Encoding.Unicode.GetString(ms.ToArray());

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:52:05.543

您将 BOM（字节顺序掩码）视为从流的字节数组转换而来的字符串中的第一个字符。

关闭输出BOM，你会没事的。

使用不生成 BOM 的编码对象：[UnicodeEncoding](http://msdn.microsoft.com/en-us/library/984ebfcy)

```
settings.Encoding = new UnicodeEncoding(bigEndian:false,byteOrderMark:true) 
```

# c# - DropDownList 返回一个对象，而不仅仅是一个 ID 值

> ID：11456633
> 
> 赞同：1
> 
> 时间：2012-07-12T16:45:03.690
> 
> 标签：c#, asp.net, drop-down-menu

我想要一个解决方案来实现一个属性（或方法）来返回选定的对象。

例子：

```
DropDownListUser.DataSource = UserList;
User user = (User)DropDownListUser.SelectedObject; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:51:32.353

The `DropDownList` doesn't actually store the entire object during the binding, only the Text and Value as defined by `DataTextField` and `DataValueField`. In order to get a selected object back, you are going to have to store the *entire* list of objects locally in the page (such as in `ViewState`). You'll also have to come up with your own `DropDownList` implementation to handle marshalling the list to and from local storage.

I think it would be simpler to cache the list locally (to save yourself a trip back to the database) and just do the lookup using the `SelectedValue`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:50:14.077

帕特里克，看着这段历史，看起来如果不创建自定义下拉列表就无法做到这一点

*   [从下拉列表中获取选定对象的问题](https://stackoverflow.com/questions/3646625/problem-with-getting-selected-object-from-dropdownlist)
*   [DropDownList 获取底层对象](https://stackoverflow.com/questions/1032853/dropdownlist-get-underlying-object)

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:50:32.767

Web`dropdownlist`是将其与类绑定`not like`的窗口形式。`combo`它有集合，`ListItems`其中有`Value`和`Text`。所以你只能从中获取 Text 或 Value 。更多关于[下拉列表](http://msdn.microsoft.com/en-us/library/0dzka5sf%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:05:19.577

您可以扩展 DropDownList 并使其保留会话中的对象列表。

像这样：

DropDownListKeepRef：

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Collections;
using System.ComponentModel;
using System.Collections.Generic;

namespace Q11456633WebApp
{
    /// <summary>
    /// Extension of <see cref="DropDownList"/> supporting reference to the 
    /// object related to the selected line.
    /// </summary>
    [ValidationProperty("SelectedItem")]
    [SupportsEventValidation]
    [ToolboxData(
      "<{0}:DropDownListKeepRef runat=\"server\"></{0}:DropDownListKeepRef>")]
    public class DropDownListKeepRef : DropDownList
    {
        protected override void PerformDataBinding(System.Collections.IEnumerable dataSource)
        {
            if (!String.IsNullOrEmpty(this.DataValueField))
            {
                throw new InvalidOperationException(
                    "'DataValueField' cant be define in this implementation. This Control use the index of list");
            }

            this.Items.Clear();
            ArrayList list = new ArrayList();
            int valueInt = 0;
            if (this.FirstNull)
            {
                list.Add(null);
                this.Items.Add(new ListItem(this.FirstNullText, valueInt.ToString()));
                valueInt++;
            }
            foreach (object item in dataSource)
            {
                String textStr = null;
                if (item != null)
                {
                    Object textObj = item.GetType().GetProperty(this.DataTextField).GetValue(item, null);
                    textStr = textObj != null ? textObj.ToString() : "";
                }
                else
                {
                    textStr = "";
                }

                //montando a listagem
                list.Add(item);
                this.Items.Add(new ListItem(textStr, valueInt.ToString()));
                valueInt++;
            }
            this.listOnSession = list;
        }

        private bool firstNull = false;
        /// <summary>
        /// If <c>true</ c> include a first line that will make reference to <c>null</c>,
        /// otherwise there will be only the line from the DataSource.
        /// </summary>
        [DefaultValue(false)]
        [Themeable(false)]
        public bool FirstNull
        {
            get
            {
                return firstNull;
            }
            set
            {
                firstNull = value;
            }
        }

        private string firstNullText = "";
        /// <summary>
        /// Text used if you want a first-line reference to <c>null</c>.
        /// </summary>
        [DefaultValue("")]
        [Themeable(false)]
        public virtual string FirstNullText
        {
            get
            {
                return firstNullText;
            }
            set
            {
                firstNullText = value;
            }
        }

        /// <summary>
        /// List that keeps the object instances.
        /// </summary>
        private IList listOnSession
        {
            get
            {
                return this.listOfListsOnSession[this.UniqueID + "_listOnSession"];
            }
            set
            {
                this.listOfListsOnSession[this.UniqueID + "_listOnSession"] = value;
            }
        }

        #region to avoid memory overload
        private string currentPage
        {
            get
            {
                return (string)HttpContext.Current.Session["DdlkrCurrentPage"];
            }
            set
            {
                HttpContext.Current.Session["DdlkrCurrentPage"] = value;
            }
        }

        /// <summary>
        /// Every time you change page, lists for the previous page will be 
        /// discarded from memory.
        /// </summary>
        private IDictionary<String, IList> listOfListsOnSession
        {
            get
            {
                if (currentPage != this.Page.Request.ApplicationPath)
                {
                    currentPage = this.Page.Request.ApplicationPath;
                    HttpContext.Current.Session["DdlkrListOfListsOnSession"] = new Dictionary<String, IList>();
                }
                if (HttpContext.Current.Session["DdlkrListOfListsOnSession"] == null)
                {
                    HttpContext.Current.Session["DdlkrListOfListsOnSession"] = new Dictionary<String, IList>();
                }

                return (IDictionary<String, IList>)HttpContext.Current.Session["DdlkrListOfListsOnSession"];
            }
        } 
        #endregion

        public Object SelectedObject
        {
            get
            {
                if (this.SelectedIndex > 0 && this.listOnSession.Count > this.SelectedIndex)
                    return this.listOnSession[this.SelectedIndex];
                else
                    return null;
            }
            set
            {
                if (!this.listOnSession.Contains(value))
                {
                    throw new IndexOutOfRangeException(
                        "Objeto nao contido neste 'DropDownListKeepRef': " +
                        value != null ? value.ToString() : "<null>");
                }
                else
                {
                    this.SelectedIndex = this.listOnSession.IndexOf(value);
                }
            }
        }

        /// <summary>
        /// List of related objects.
        /// </summary>
        public IList Objects
        {
            get
            {
                return new ArrayList(this.listOnSession);
            }
        }

        [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
        protected override void LoadViewState(object savedState)
        {
            object[] totalState = null;
            if (savedState != null)
            {
                totalState = (object[])savedState;
                if (totalState.Length != 3)
                {
                    throw new InvalidOperationException("View State Invalida!");
                }
                // Load base state.
                int i = 0;
                base.LoadViewState(totalState[i++]);
                // Load extra information specific to this control.
                this.firstNull = (bool)totalState[i++];
                this.firstNullText = (String)totalState[i++];
            }
        }

        [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
        protected override object SaveViewState()
        {
            object baseState = base.SaveViewState();
            object[] totalState = new object[3];
            int i = 0;
            totalState[i++] = baseState;
            totalState[i++] = this.firstNull;
            totalState[i++] = this.firstNullText;
            return totalState;
        }
    }
} 
```

默认.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Q11456633WebApp._Default" %>

<%@ Register Assembly="Q11456633WebApp" Namespace="Q11456633WebApp" TagPrefix="cc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <cc1:DropDownListKeepRef ID="ListofDatesDdlkr" runat="server" AutoPostBack="True" DataTextField="Date" OnSelectedIndexChanged="ListofDatesDdlkr_SelectedIndexChanged">
        </cc1:DropDownListKeepRef>&nbsp;</div>
    </form>
</body>
</html> 
```

默认.aspx.cs：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace Q11456633WebApp
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!this.IsPostBack)
            {
                this.ListofDatesDdlkr.DataSource = this.ListOfDate;
                this.ListofDatesDdlkr.DataBind();
            }
        }

        private DateTime[] ListOfDate
        {
            get
            {
                return new DateTime[]
                {
                    new DateTime(2012, 7, 1),
                    new DateTime(2012, 7, 2),
                    new DateTime(2012, 7, 3),
                    new DateTime(2012, 7, 4),
                    new DateTime(2012, 7, 5),
                };
            }
        }

        protected void ListofDatesDdlkr_SelectedIndexChanged(object sender, EventArgs e)
        {
            this.ClientScript.RegisterStartupScript(
                this.GetType(), 
                "show_type", 
                String.Format(
                    "alert('Type of SelectedObject:{0}')", 
                    this
                        .ListofDatesDdlkr
                            .SelectedObject
                                .GetType()
                                    .FullName), 
                    true);
        }
    }
} 
```

带有完整示例代码的解决方案：[Q11456633WebApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11456633WebApp.7z)

# android - ExpandableListView 中按钮的 onClick 方法

> ID：11456635
> 
> 赞同：2
> 
> 时间：2012-07-12T16:45:07.543
> 
> 标签：android, eclipse, button, expandablelistview

我的 ExpandableListView 有一些 EditText 框和按钮（这是一个登录/注册屏幕）。我想使用带有开关盒的 onClick 函数来选择已单击的按钮并对其进行处理。

对于按钮，我无法设置 onClickListener。

所有这些都在自定义可扩展列表适配器类中，而不是我写的。

我知道还有另一种方法可以解决自定义可扩展列表适配器中的正常功能，但我不知道如何。

这是 CustomExpandableAdapter 类中的相关代码片段：

```
 public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
   v = null;
   position = 0;
   position=getChildId(groupPosition, childPosition);

   * - - unrelated code - *

   if(position==2)  //Draws Forgot Button
   {
       v = inflater.inflate(R.layout.forgot, parent, false);
       View forgot = v.findViewById(R.id.fpb);
       //What goes here to setOnClickListener?   
   }
   return v;
}

public void onClick(View w) {

    PopupWindow pw= new PopupWindow(inflater.inflate(R.layout.popup_layout, null, false),220,160, true);;
    switch(w.getId())
    {
    case R.id.fpb:

        {       
            pw.showAtLocation(v, Gravity.CENTER, 0, 0);
        }

} 
```

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:27:23.320

我希望你已经`OnClickListner`在你的适配器中实现了。如果是，那么您在使用时遇到了什么错误`forgot.setOnClickListener(this);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:48:37.670

好吧...您需要在视图上而不是在特定按钮上设置 OnClickListener。因此，您需要在其中找到 ViewByID（找到 EditBox、Buttons 或其他内容），`View forgot`然后在它们上设置 onClickListener。

如...

```
Button b = forgot.findViewByID("myButton");
b.setOnClickListener(new OnClickListener {
    etc... 
```

一定要使用正确的 OnClickListener，API 中有两个！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T15:43:44.617

可能存在更好的解决方案，但这就是我所做的：

**1\. 接口**

```
import android.view.View;

public interface RecyclerViewClickListener {
    public void recyclerViewListClicked(View v);
} 
```

**2.在您的活动/片段中**

```
public class MyFragment(or Activity) Fragment implements RecyclerViewClickListener { 
```

它将显示方法未实现的错误。添加它们

```
@Override public void recyclerViewListClicked(View v) {
    YourObject mObject = (YourObject) v.getTag();
    Log.i("My Object with >>> ", String.valueOf(mObject.getId()));
} 
```

**3.在您的适配器中的构造函数中添加最后**

public ExpandListViewAdapter(FragmentActivity上下文等，RecyclerViewClickListener clickListener)

**4\. 在你的适配器中 getChildView()**

```
 button1.setOnClickListener(new View.OnClickListener() {
            @Override public void onClick(View v) {
               v.setTag(YourObject);
               clickListener.recyclerViewListClicked(v);
            }
   }); 
```

# python - 删除python列表中的对象实例

> ID：11456637
> 
> 赞同：17
> 
> 时间：2012-07-12T16:45:15.447
> 
> 标签：python, list, compare

我认为这应该可行，但它给了我一个错误。我有一个包含 class 对象的列表`node`。我有两个不同的列表

1.  开放列表
2.  node_list.（它们在纵向上不一样，排序方式）

当我在 中找到特定节点时，`open_list`我需要将其从`node_list`. 我知道这些列表具有存储在其中的对象的地址

所以当我尝试做

```
removed = open_list.pop(min_index) 
node_list.remove(removed) 
```

它给了我一个错误说

```
node_list.remove(removed)
ValueError: list.remove(x): x not in list 
```

但是列表只包含像指针一样的地址，对吗？它应该匹配相同的地址。我打印出地址`removed`和整个`node_list`（现在只有 10 项不要害怕）打印出：（node_list 中的最后一项与删除的地址匹配：

```
removed: <__main__.node instance at 0x0124A440>
node_list: [<__main__.node instance at 0x01246E90>, <__main__.node instance at 0x01246EE0>, <__main__.node instance at 0x0124A300>, <__main__.node instance at 0x0124A328>, <__main__.node instance at 0x0124A350>, <__main__.node instance at 0x0124A378>, <__main__.node instance at 0x0124A3A0>, <__main__.node instance at 0x0124A3C8>, <__main__.node instance at 0x0124A3F0>, <__main__.node instance at 0x0124A418>, <__main__.node instance at 0x0124A440>] 
```

谢谢

### **后续问**

所以我想检查我要删除的节点是否存在于 node_list 中。[当我在http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)上查找一些简单的列表函数时

`list.index(x)``remove.index(x)`如果元素不在列表中，两者都会出错。这导致我的程序停止运行。为了绕过这个，我可以在以下语句之前使用这个语句`.remove()`：`node in node_list`我认为`in`检查一个元素是否是列表的一部分并返回一个布尔值。只是仔细检查谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T16:57:13.327

发生这种情况是因为您理解为识别`Node`类的两个实例的特征，而不是 python 理解它的方式。

问题就在这里。假设你问 python `5==5`，python 会返回`True`。这是因为 python 知道`int`s。但是，`Node`是您定义的自定义类，因此您需要告诉 python 两个`Node`对象何时相同。由于您（可能）没有，python 默认比较它们在内存中的位置。由于两个单独的实例将位于两个不同的内存位置，python 将返回`False`. 如果您完全熟悉 Java，这就像 和 之间的`==`区别`.equals(...)`

为此，请进入您的`Node`类并定义`__eq__(self, other)`方法，其中`other`应该是`Node`.

例如，如果您的节点有一个名为的属性`name`，并且两个具有相同名称的节点被认为是相同的，那么您`__eq__`可能看起来像这样：

```
def __eq__(self, other):
    myName = self.name
    hisName = other.name
    if myName == hisName:
        return True
    else:
        return False 
```

当然，编写相同函数的更优雅的方式是：

```
def __eq__(self, other):
    return self.name == other.name 
```

完成后，您的错误应该消失

**编辑 1**：回应[帝斯曼](https://stackoverflow.com/users/487339/dsm)的评论

```
class Node: pass
a = [Node(), Node()]
b = a[:]
b.remove(a.pop(0)) 
```

这将起作用。但仔细观察后，很明显 a[0] 和 b[0] 实际上是同一个对象。这可以通过调用`id(a[0])`和比较`id(b[[0])`来确认它们确实是相同的

**编辑 2**：响应 OP 的后续问题（作为编辑添加到原始问题）

是的，列表中不存在的对象将导致通常会停止程序流的错误。这可以通过以下两种方式之一解决：

```
if x in my_list:
    my_list.remove(x) 
```

或者

```
try:
    my_list.remove(x)
except:
    pass 
```

第二种方法尝试从中删除`x`，`my_list`如果导致错误，则忽略该错误

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T18:36:45.837

作为对您的跟进的回应，yes`in`将检查列表中的成员资格，因此：

```
if removed in node_list: node_list.remove(removed) 
```

不会给你错误。或者，您可以捕获错误：

```
try:
    node_list.remove(removed)
except ValueError:
    pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:15:46.400

如果我没看错问题，python 比较内存位置的默认行为是他正在寻找的行为，但没有得到。这是一个定义自定义类的工作示例`Node`，它表明不需要`__eq__(self, other)`.

```
class Node(object):
    pass

open_node_list = []
node_list = []

for i in range(10):
    a_node = Node()
    open_node_list.append(a_node)
    node_list.append(a_node)

removed = open_node_list.pop()
node_list.remove(removed) 
```

我不能确定，因为您没有显示您的`open_node_list`和`node_list`定义的位置，但我怀疑列表本身引用了相同的列表对象。如果是这种情况，弹出 from`open_node_list`也会弹出 from `node_list`，因此当您调用`remove`. 这是一个示例，其中`node_list`和`open_node_list`实际上是相同的列表，因此对一个列表的更改会影响另一个：

```
class Node(object):
  pass

open_node_list = []
node_list = open_node_list # <-- This is a reference, not a copy.

open_node_list.append(Node())
print(node_list) 
```

复制列表的一种方法是：

```
node_list = open_node_list[:] 
```

# c# - 使用 C# 在 Excel 中创建 X x Y 图表

> ID：11456638
> 
> 赞同：5
> 
> 时间：2012-07-12T16:45:18.487
> 
> 标签：c#

我正在尝试使用 C# 在 Excel 中创建图表。到目前为止，我所做的是用我需要绘制的数据填充 Excel 电子表格。我的电子表格上有如下数据：

```
T    U
10  10
20  5
30  3,333333333
40  2,5
50  2
60  1,666666667
70  1,428571429
80  1,25
90  1,111111111
100 1
110 0,909090909
120 0,833333333
130 0,769230769
140 0,714285714
150 0,666666667
160 0,625 
```

我有从第 1 行到第 40 行的数据。我想在 Excel 中创建一个图表，如下所示：

![在此处输入图像描述](../Images/a6e597ff3402117e1ee4d92669e6d33c.png)

请注意，在 X 轴上，我想放置 T 列中的值（或某些值），在 Y 轴上放置 U 列中的值。

我制作了以下代码来创建图表：

```
object misValue = System.Reflection.Missing.Value;

Microsoft.Office.Interop.Excel.Application xla = new Microsoft.Office.Interop.Excel.Application();
Workbook wb = xla.Workbooks.Add(XlSheetType.xlWorksheet);
Worksheet ws = (Worksheet)xla.ActiveSheet;

Microsoft.Office.Interop.Excel.Range chartRange;
Microsoft.Office.Interop.Excel.ChartObjects xlCharts = (Microsoft.Office.Interop.Excel.ChartObjects)ws.ChartObjects(Type.Missing);
Microsoft.Office.Interop.Excel.ChartObject myChart = (Microsoft.Office.Interop.Excel.ChartObject)xlCharts.Add(240, 90, 468, 315);
Microsoft.Office.Interop.Excel.Chart chartPage = myChart.Chart;
chartRange = ws.get_Range("U1", "U40");
chartPage.SetSourceData(chartRange, misValue);
chartPage.ChartType = Microsoft.Office.Interop.Excel.XlChartType.xlLine; 
```

这让我得到了以下结果：

![在此处输入图像描述](../Images/7ac5e306ec31f33b55584863356eb960.png)

这非常接近我的需要，但我无法设置 X 轴的值。有人可以告诉我如何将 T1 到 T40 范围内的值分配给 X 轴吗？如果可能的话，我怎样才能从图表中删除标签“Série 1”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:19:01.860

这是六个月大，所以我想你已经继续前进了，但是：

您已经获得了对图表 ( `chartPage`) 的引用，因此设置 x 轴值和删除图例应该很简单。您只需要参考该系列本身。

```
Excel.Series ser = (Excel.Series)chartPage.SeriesCollection(1);

ser.xValues = ws.Range[ws.cells[row,col],ws.cells[row,col]];
chartPage.hasLegend = false; 
```

这是假设您已`Microsoft.Office.Interop.Excel`像这样使用别名的情况下编写的：

```
using Excel = Microsoft.Office.Interop.Excel; 
```

你正在制作的系列实际上是第一个系列。您也可以以相同的方式设置 y 值，而不是设置源数据。

```
ser.Values = ws.Range[etc...]; 
```

# android - Android 应用程序上的 GPS 位置信息冲突

> ID：11456642
> 
> 赞同：4
> 
> 时间：2012-07-12T16:45:30.560
> 
> 标签：android, google-maps-api-3, gps, android-webview

我正在通过 WebView 使用 Javascript API 获取 gps 位置信息并将其显示在谷歌地图上。我注意到位置信息不是很准确，尽管我使用 EnableHighAccuracy 作为 true。我还注意到，android 中的谷歌地图应用程序能够比我的应用程序更快地获取位置，并且能够更准确地显示位置。

这怎么可能？这两个应用程序都在使用 Android 上可用的 A-GPS 信息并显示在同一张地图上。

对此有任何想法。还有任何建议如何提高准确性。

更新：在 Android 上通过 Javascript 和 WebView 使用位置信息将我当前的位置显示为距离我当前所在的位置至少 2-5 英里。然而，android 中的谷歌地图应用程序能够识别我目前所在的建筑物。此外，谷歌地图应用程序会在 2-5 秒内获取此位置，而 webview 需要一分钟多的时间并且仍然给出不准确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:20:00.253

我想您可能会发现`WebView`“最佳”位置算法不如 Google 地图算法复杂。您看到的问题可能与`WebView`选择“最佳”位置提供商并陷入该选择有关，即使后来另一个提供商成为“最佳”。

`LocationManager`如果它满足您的要求，您自己编写代码并将结果发送到您的 WebView可能会有更好的结果。通过这种方式，您可以监控多个提供程序，并可以根据哪个为您的应用程序提供最佳的新近度/准确性权衡在它们之间进行切换。

这是一个关于开始使用复杂的位置算法的好指南：http: [//developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

# entity-framework-4 - 将实体框架与使用两个外键定义的一对多关系一起使用

> ID：11456645
> 
> 赞同：0
> 
> 时间：2012-07-12T16:45:41.803
> 
> 标签：entity-framework-4, ef-code-first, database-relations

我正在使用现有数据库，因此更改架构不是一种选择。这是我正在使用的表格...

```
Product
-------------------------------------
ID               - GUID         [PK]
Name             - varchar(100) 
ModelId          - GUID         [FK1, FK2]
SoftWareVersion  - varchar(10)  [FK2]

[FK1] Foreign Key to Model table
[FK2] Foreign Composite key to SoftwareVersion table

ProductModel
-------------------------------------
ID               - GUID         [PK]
ModelName        - varchar(100)

SoftwareVersion
-------------------------------------
ID               - GUID         [PK]
Version          - varchar(10)
ModelId          - GUID         [FK1]

[FK1] Foreign Key to Model table 
```

每个单独的产品都安装了软件。我们有几个产品模型，每个产品显然都与一个模型（产品[FK1]）相关联。

在每个产品型号的生命周期中，它可能有多个软件更新/版本。同样，该软件可能安装在许多型号上。

我需要能够获取 ProductID 并返回安装在该特定产品上的软件版本。通常，我会获得与我正在查找的产品型号相关的软件版本，但该型号可能有几个更新。我无法单独查找 Product.SoftwareVersion 字段，因为这将返回安装该软件的所有不同型号。

所以最终我需要从 SoftwareVersion 返回记录，其中 ModelId 和版本与我正在查找的产品相匹配。

我想将 SoftwareVersion 作为产品的属性返回...

```
Product.SoftwareVersion 
```

在我的 ProductEntity 定义中，我有以下...

```
[Table("Product")]
public class ProductEntity
{
    [ForeignKey("Model")]
    public Guid ModelID { get; set; }
    public virtual ProductModelEntity Model { get; set; }

    [ForeignKey("SoftwareVersion")]
    public String SoftwareVersionNumber { get; set; }
    public virtual SoftwareVersionEntity SoftwareVersion { get; set; }
} 
```

因此，“ModelID”扮演了模型的外键角色，并作为 SoftwareVersion 的复合外键的一部分。但是，我不能将多个 ForeignKey 属性分配给同一个属性...

```
[ForeignKey("Model"),ForeignKey("SoftwareVersion")]
public Guid ModelID { get; set; }
public virtual ProductModelEntity Model { get; set; } 
```

如果可能的话，我更喜欢使用属性，但也对其他技术持开放态度。（属性直接在相关代码中描述类，而不是在库中传播定义。很高兴了解您正在查看的内容，而不是花时间寻找定义......但我离题了！）

非常感谢一如既往的任何帮助。

谢谢你

-G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:47:07.750

我认为以下注释都可以使用：

```
[Table("Product")]
public class ProductEntity
{
    public Guid ModelID { get; set; }
    public String SoftwareVersionNumber { get; set; }

    [ForeignKey("ModelID, SoftwareVersionNumber")]
    public virtual ProductModelEntity Model { get; set; }

    [ForeignKey("SoftwareVersionNumber")]
    public virtual SoftwareVersionEntity SoftwareVersion { get; set; }
} 
```

或者：

```
[Table("Product")]
public class ProductEntity
{
    [ForeignKey("Model"), Column(Order = 1)]
    public Guid ModelID { get; set; }

    [ForeignKey("Model"), ForeignKey("SoftwareVersion"), Column(Order = 2)]
    public String SoftwareVersionNumber { get; set; }

    public virtual ProductModelEntity Model { get; set; }
    public virtual SoftwareVersionEntity SoftwareVersion { get; set; }
} 
```

# jquery - Flexslider - 根据锚点从特定幻灯片开始？

> ID：11456653
> 
> 赞同：4
> 
> 时间：2012-07-12T16:46:15.450
> 
> 标签：jquery, slider, flexslider

有没有办法让[flexslider](http://flexslider.woothemes.com/)根据锚链接从特定幻灯片开始？

例如。

[http://site.com/index.html#slide1](http://site.com/index.html#slide1) - 从幻灯片 1 开始

[http://site.com/index.html#slide3](http://site.com/index.html#slide3) - 从幻灯片 3 开始

我想将它设置为**startAt**选项上的变量，它会说类似

如果 window.location.hash 是**number**，则从**number**开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:32:56.897

flexslider 有一个选项**startAt**，它接受幻灯片索引的整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:21:19.927

这可以用一点 Coffeescript（或者 JS，如果你更喜欢的话）来完成，但目前只适用于桌面设备

```
# Add support for hashtags
$(window).load ->
  # Get your hash tag
  loc = $(location).attr('href')
  idx = 1
  if(loc.lastIndexOf('#') != -1)
    idx = loc.substr(loc.lastIndexOf('#')+1).replace('slide', '')
  # verify that idx is really a number
  if(isNaN(idx-0))
    idx = 1
  # Click on your nav (idx starts at 0)
  $('.flex-control-nav li:eq('+(idx-1)+') a').trigger('click') 
```

# oop - 为什么在接口中为什么不在抽象类中

> ID：11456655
> 
> 赞同：1
> 
> 时间：2012-07-12T16:46:44.217
> 
> 标签：oop, c#-4.0, interface, abstract-class

我知道被覆盖的方法/属性的访问说明符可见性必须与基本方法/属性的访问说明符的可见性相同或更高，并且我还知道接口成员的可见性默认情况下是公共的。那么当我们在类中显式实现接口时，成员的可见性如何以及为什么可以是私有的，尽管可以通过将类对象转换为实现的接口来访问这些私有方法？

```
 public interface IRocker
{
    string RockOff(string str);
}
public abstract class AmAbstract
{
    public abstract string SomeMethod(string str);
}
class Program : AmAbstract, IRocker
{
    static void Main(string[] args)
    {
        new Hello().RockU();
        Console.ReadKey();
    }

    string IRocker.RockOff(string str)
    {
        return str;
    }

    public override string SomeMethod(string str)
    {
        return str;
    }
}

public class Hello
{
    public void RockU()
    {
        Console.WriteLine(((IRocker)(new Program())).RockOff("Damn"));
        Console.WriteLine(((AmAbstract)(new Program())).SomeMethod("lalalalala"));

    }
} 
```

'Console.WriteLine(((IRocker)(new Program())).RockOff("Damn"));' 语句向我们展示了最终访问类“程序”的私有方法。我的问题是为什么我们不能像使用接口方法那样隐藏抽象方法的可见性？为什么我们能够通过接口访问私有方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:27:08.130

您在实现时使用*显式接口*`IRocker.RockOff()`实现。C# 中有单独的规则，实际上这些规则同时是私有的和公共的。

[C# 4.0 规范](http://go.microsoft.com/fwlink/?LinkId=199552)第 13.4.1 段的引用：

> 显式接口成员实现具有与其他成员不同的可访问性特征。因为在方法调用或属性访问中，显式接口成员实现永远不能通过它们的完全限定名称访问，所以它们在某种意义上是私有的。但是，由于可以通过接口实例访问它们，因此它们在某种意义上也是公共的。
> 
> 显式接口成员实现有两个主要目的：
> 
> *   因为显式接口成员实现不能通过类或结构实例访问，所以它们允许将接口实现从类或结构的公共接口中排除。当一个类或结构实现一个对该类或结构的使用者不感兴趣的内部接口时，这特别有用。
> *   显式接口成员实现允许消除具有相同签名的接口成员的歧义。如果没有显式的接口成员实现，一个类或结构不可能有具有相同签名和返回类型的接口成员的不同实现，就像一个类或结构不可能在所有接口成员上都有任何实现一样相同的签名但具有不同的返回类型。

抽象类没有此类例外，因此仅适用[常规修饰符规则](http://msdn.microsoft.com/en-us/library/ms173121.aspx)。

# ruby - 使用 Net::SSH (Ruby) 进行多个 SSH 跃点

> ID：11456657
> 
> 赞同：1
> 
> 时间：2012-07-12T16:46:53.807
> 
> 标签：ruby, ssh, portforwarding, net-ssh

所以这是我的设置：

笔记本电脑 -> 主机 1 -> 主机 2 -> 主机 3

笔记本电脑可以访问主机 1，但不能访问主机 2 或主机 3
主机 1 可以访问主机 2，但不能访问主机 3
主机 3 可以访问主机 2，但不能访问主机 1

我要做的是设置远程转发，以便将在主机 3 上运行的进程路由到笔记本电脑上正在运行的服务。我已使用以下代码成功完成此操作：

从笔记本电脑运行：

```
require 'rubygems'
require 'net/ssh'

threads = []
config = {:user => "user", :remote_port => 3333, :service_port => 2222}

threads << Thread.new{
Net::SSH.start("host1", config[:user]) do |ssh|
  puts "Forwarding port #{config[:remote_port]} on host1 to #{config[:service_port]} on localhost"
  ssh.forward.remote(config[:service_port], "localhost", config[:remote_port], "127.0.0.1")
  ssh.exec! "ssh #{config[:user]}@host2 -R #{config[:remote_port]}:localhost:#{config[:remote_port]}"
  ssh.loop {true}
end
}

threads << Thread.new{
Net::SSH.start("host3", config[:user]) do |ssh|
  puts "Creating local forward for port #{config[:service_port]} on host3 to port #{config[:remote_port]} on host2"
  ssh.exec! "ssh #{config[:user]}@host2 -L #{config[:service_port]}:localhost:#{config[:remote_port]}"
  ssh.loop {true}
end
}

threads.each {|t| t.join} 
```

在一个线程中，我正在设置从笔记本电脑到主机 1 的远程转发，然后从主机 1 到主机 2 的另一个远程转发。在一个单独的线程中，我正在启动从笔记本电脑到主机 3 的另一个连接，然后运行本地从主机 3 转发到主机 2。

我可以从笔记本电脑连接到主机 3 的唯一方法是因为我的 .ssh/config 文件，当我尝试从笔记本电脑连接到主机 3 时，它会自动路由我通过主机 1 和主机 2。

我想要做的是切断我从笔记本电脑连接到主机 3 的第二个线程，以便我可以删除对 .ssh/config 文件的依赖。我想从第一个线程中完成所有连接。

所以基本上我需要做来自笔记本电脑的多个跃点。我可以启动从笔记本电脑到主机 1 的第一个连接，然后在主机 1 上执行命令，但之后我无法再进一步。我需要做的是启动从笔记本电脑到主机 1 的连接，在主机 1 上设置转发，从主机 1 连接到主机 2，然后在主机 2 上设置第二个转发。

这可能与net / ssh有关吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:24:00.613

我通过写出一个 SSH 配置文件来解决这个问题，然后在启动连接时指定配置文件。配置文件包含代理命令，这些命令将自动通过必要的主机路由到我的目的地。

例子：

```
def write_config_file

    File.open('confi_file', 'w') { |f|
      f << "host host1\n"
      f << "HostName host1.something.net\n"
      f << "user user_name\n"
      f << "\n"
      f << "host host2\n"
      f << "HostName host2.something.net\n"
      f << "ProxyCommand ssh host1 nc %h %p 2> /dev/null\n"
      f << "user user_name\n"
      f << "\n"
      f << "host host3\n"
      f << "HostName host3.something.net\n"
      f << "ProxyCommand ssh host2 nc %h %p 2> /dev/null\n"
      f << "user user_name\n"
    } 

end

write_config_file

Net::SSH.start("host3", "user_name", :config => './config_file') do |ssh|
  #whatever you need to do...
end 
```

我将连接包装在开始/救援阻塞和捕获的 ctrl+c 输入中，并在陷阱块中删除配置文件并关闭连接。

# javascript - 使用 JavaScript 更改名称值

> ID：11456658
> 
> 赞同：1
> 
> 时间：2012-07-12T16:46:53.623
> 
> 标签：javascript, radio-button

已经做了很长时间了，它看起来很简单，但我无法让它做我想做的事。

每本书都有一个使用单选按钮选择的“getOrRequest”值。每次复制一个 div 时，都需要更改名称值，以便一本书有自己的 getOrRequest 值。我终于完成了复制，但现在重命名正确的输入不合作。

真正困扰我的是它可以工作，但它并没有改变我试图获取的名称值。它与更改数组的哪些部分有关，但我无法获得我想要的值，即最后两个 getOrRequest 名称。

我在[这里](http://ithacabooktrade.com/createPost.php)苦苦挣扎的一个工作示例。

我的 JS 函数：

```
function addAnotherPost(){

var bookInfo = document.getElementById('bookInformation');
var copyDiv = document.getElementById('addListing').cloneNode(true);

copyDiv.id = 'addListing' + idNumber;
bookInfo.appendChild(copyDiv);

var divID = 'addListing' + idNumber;
var newDiv = document.getElementById(divID);
var postType = document.getElementsByName("getOrRequest[]");

alert(postType[0].name + postType[1].name + postType[2].name + postType[3].name);

for(var i = 2; i < postType.length; i++){
   postType[i].name = 'getOrRequest' + idNumber + '[]';
}

alert("got this far" + postType.length);

idNumber++;
} 
```

相关的 HTML 块：

```
<div id='addListing'>
<table class='aListing'>
<tr>
<td>
                <label>
                <input type='radio' name='getOrRequest[]' value='1' />
                Request</label>
                <label>
                <input type='radio' name='getOrRequest[]' value='0' />
                Offer</label>
</td>
[...]
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:18:53.010

您正在获取特定名称标识符的对象列表：

```
var postType = document.getElementsByName("getOrRequest[]"); 
```

所以一旦你重命名了一个元素，postType就会改变（是的，那东西很智能）

```
 console.log(postType.length); // = 4
    postType[i].name = 'getOrRequest' + idNumber + '[]';
    console.log(postType.length); // = 3 
```

所以基本上 for 循环会发生变化，因为 postType.length 会发生变化。

我想你想做的是这样的：

```
postType[0].name = 'getOrRequest' + idNumber + '[]'; //ref changed.
postType[0].name = 'getOrRequest' + idNumber + '[]'; 
```

但是无论如何，那是不好的风格，您应该从标记的源中克隆并在附加到某些内容之前按名称重命名，例如（[http://jsfiddle.net/bHLZA/2/](http://jsfiddle.net/bHLZA/2/)）：

```
var bookInfo = document.getElementById('bookInformation');
var copyDiv = document.getElementById('addListing').cloneNode(true);

copyDiv.id = 'addListing' + idNumber;
postType = copyDiv.getElementsByTagName('input');
postType[0].name = 'getOrRequest' + idNumber + '[]';
postType[1].name = 'getOrRequest' + idNumber + '[]';
bookInfo.appendChild(copyDiv); 
```

见[http://jsfiddle.net/bHLZA/](http://jsfiddle.net/bHLZA/)

# php - 如何在此 javascript 中添加指向图像的链接？

> ID：11456659
> 
> 赞同：-4
> 
> 时间：2012-07-12T16:46:59.520
> 
> 标签：php, javascript, jquery

我需要帮助。如何在下面的代码中添加指向图像的链接。这是一个脚本，允许访问者单击表单中下拉菜单上的选项，每个选项都会更改呈现的图像。我正在尝试为每个图像添加一个链接，允许访问者将鼠标悬停在图像上并打开一个更大的图像。

我只需要知道在哪里添加链接。每次我在 var sel_imgs=[ 中添加它时，它都会在访问者在下拉菜单中选择一个选项时禁用更改图像的功能。

```
function diva_imgBySel(objId,theValue) { //v0.1 divaHTML.com

    var sel_imgs=["images/md01.jpeg","images/md01.jpeg","images/md02.jpeg","images/md03.jpeg","images/md04.jpeg","images/md06.jpeg","images/md05.jpeg","images/pic07.jpeg","images/pic08.jpeg"];

    var d=document;
    theValue=sel_imgs[theValue];
    if (!theValue || !d.getElementById ) return;
    var obj = d.getElementById(objId);
    if (obj) obj.src=theValue;    
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
</script> 
```

这是页面下方的表单代码：

```
<img src="images/md01.jpeg" alt="" name="theImg" width="147" height="161" id="theImg" style="border: 1px solid #ffffff;" align="LEFT" /><strong>Add a vase:</strong>
<input type="checkbox" name="anniv" id="anniv" value="6.95" onclick="priceUpdate('anniv');"/>
             &pound;6.95
            </td>
          <td width="71%" align="left" valign="top"> <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td align="left"></br>&nbsp;&nbsp;&nbsp;&nbsp;<select name="productColors" id="productColors" style="width:270px; margin-bottom:5px; margin-top:5px" onchange="diva_imgBySel('theImg',this.selectedIndex)">
                <option value="MD1004">Select Flower Arrangement</option>
                <option value="MD1004">Bloom</option>
                <option value="MD1001">Majestic</option>
                <option value="MD1007">Mothers Day Premium</option>
                <option value="MD1002">Mum's the Word</option>
                <option value="NF1011">Joyful Orchids</option>
                <option value="NF1010">Lily and Rose Hand Tied</option>
                <option value="NF1013">Sunflower Sensation</option>
                <option value="SF002-free-vase">Tranquililty</option>
                </select></td> 
```

这是附加了鼠标悬停效果的节点。它工作正常，但为用户所做的每个选择重复相同的大图像。我需要知道如何为每个图像复制这种效果，而不仅仅是“md01.jpeg”。

```
<a href="#" rel="imgtip[1]"><img src="images/md01.jpeg" alt="" name="theImg" width="147" height="161" id="theImg" style="border: 1px solid #ffffff;" align="LEFT" /><a/>

<link rel="stylesheet" type="text/css" href="ddimgtooltip.css" />

<script type="text/javascript" src="ddimgtooltip.js">

/***********************************************
* Image w/ description tooltip v2.0- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
***********************************************/

</script> 
```

这是图像鼠标悬停的代码。它是一个 .js 文件

```
/* Image w/ description tooltip v2.0
* Created: April 23rd, 2010\. This notice must stay intact for usage 
* Author: Dynamic Drive at http://www.dynamicdrive.com/
* Visit http://www.dynamicdrive.com/ for full source code
*/

var ddimgtooltip={

    tiparray:function(){
        var tooltips=[]
        //define each tooltip below: tooltip[inc]=['path_to_image', 'optional desc', optional_CSS_object]
        //For desc parameter, backslash any special characters inside your text such as apotrophes ('). Example: "I\'m the king of the world"
        //For CSS object, follow the syntax: {property1:"cssvalue1", property2:"cssvalue2", etc}

        tooltips[0]=["images/pic01.jpg"]
        tooltips[1]=["images/pic02.jpg"]
        tooltips[2]=["images/pic03.jpg"]
        tooltips[3]=["images/pic04.jpeg"]
        tooltips[4]=["images/pic05.jpeg"]
        tooltips[5]=["images/pic06.jpeg"]

        return tooltips //do not remove/change this line
    }(),

    tooltipoffsets: [20, -30], //additional x and y offset from mouse cursor for tooltips

    //***** NO NEED TO EDIT BEYOND HERE

    tipprefix: 'imgtip', //tooltip ID prefixes

    createtip:function($, tipid, tipinfo){
        if ($('#'+tipid).length==0){ //if this tooltip doesn't exist yet
            return $('<div id="' + tipid + '" class="ddimgtooltip" />').html(
                '<div style="text-align:center"><img src="' + tipinfo[0] + '" /></div>'
                + ((tipinfo[1])? '<div style="text-align:left; margin-top:5px">'+tipinfo[1]+'</div>' : '')
                )
            .css(tipinfo[2] || {})
            .appendTo(document.body)
        }
        return null
    },

    positiontooltip:function($, $tooltip, e){
        var x=e.pageX+this.tooltipoffsets[0], y=e.pageY+this.tooltipoffsets[1]
        var tipw=$tooltip.outerWidth(), tiph=$tooltip.outerHeight(), 
        x=(x+tipw>$(document).scrollLeft()+$(window).width())? x-tipw-(ddimgtooltip.tooltipoffsets[0]*2) : x
        y=(y+tiph>$(document).scrollTop()+$(window).height())? $(document).scrollTop()+$(window).height()-tiph-10 : y
        $tooltip.css({left:x, top:y})
    },

    showbox:function($, $tooltip, e){
        $tooltip.show()
        this.positiontooltip($, $tooltip, e)
    },

    hidebox:function($, $tooltip){
        $tooltip.hide()
    },

    init:function(targetselector){
        jQuery(document).ready(function($){
            var tiparray=ddimgtooltip.tiparray
            var $targets=$(targetselector)
            if ($targets.length==0)
                return
            var tipids=[]
            $targets.each(function(){
                var $target=$(this)
                $target.attr('rel').match(/\[(\d+)\]/) //match d of attribute rel="imgtip[d]"
                var tipsuffix=parseInt(RegExp.$1) //get d as integer
                var tipid=this._tipid=ddimgtooltip.tipprefix+tipsuffix //construct this tip's ID value and remember it
                var $tooltip=ddimgtooltip.createtip($, tipid, tiparray[tipsuffix])
                $target.mouseenter(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.showbox($, $tooltip, e)
                })
                $target.mouseleave(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.hidebox($, $tooltip)
                })
                $target.mousemove(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.positiontooltip($, $tooltip, e)
                })
                if ($tooltip){ //add mouseenter to this tooltip (only if event hasn't already been added)
                    $tooltip.mouseenter(function(){
                        ddimgtooltip.hidebox($, $(this))
                    })
                }
            })

        }) //end dom ready
    }
}

//ddimgtooltip.init("targetElementSelector")
ddimgtooltip.init("*[rel^=imgtip]") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:54:40.927

此代码示例实际上并未引用您要关注的标记。您在这里得到的是逻辑和表单元素将更改 id 为“theImg”的 img 标签的 src。您需要查看的是具有 'theImg' id 的元素，并在那里添加一个侦听器以触发您想要的任何大图像效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:00:37.030

```
<option value="MD1001"><a href="your_link"><img src="your_image_path"/></a>Your non-Link Text</option> 
```

我就是这样布置的。我不确定你到底要什么。但这会将图像放在那里。只需将 "your_link" 、 "your_image_path" 替换为您的数据。

# sql - 在 sql 和 subas 中计数

> ID：11456664
> 
> 赞同：1
> 
> 时间：2012-07-12T16:47:13.390
> 
> 标签：sql, count, subquery

我有以下代码

```
select ID, count(*) from 
( select ID, service type from database
group by 1,2) suba 
group by 1 
having count (*) > 1 
```

我得到一个表格，我可以在其中看到 ID 和更改计数。与此类似

```
身份证 | 数数（*）
5675 | 2
5695 | 3
5855 | 2
5625 | 4
5725 | 3

```

有人可以向我解释如何将所有计数（*）分组，以便我得到一个类似于...的表格

```
计数 (*) | 数字
2 | 2
3 | 2
4 | 1

```

等等。有人也可以向我解释一下 suba 是什么意思吗？

我的最新代码：

```
选择 suba.id, count(*) from
（从 table_name 中选择 id、service_type
按 1,2 分组）作为 suba
按 1 分组
计数 (*) > 1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:08:20.387

没试过，但我觉得应该可以

```
 select NoOfChanges, count (*) from
 ( 
     select suba.id, count(*) as NoOfChanges from 
      ( select id, service_type from table_name
       group by 1,2) as  suba
       group by 1 
       having count (*) > 1 
    )
 subtableb
 group by NoOfChanges 
```

你可以把它想象成

```
select NoOfChanges, count (*) from subtableb
group by NoOfChanges 
```

但是 subtableb 不是真正的表，而是您之前查询的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:50:48.457

`suba`是子查询的别名。每个表或子查询都需要一个唯一的名称或别名，以便您可以在查询的其他部分引用它（并消除歧义）。`AS`请注意，右括号和“suba”之间缺少隐含。

# regex - 地址字段验证的正则表达式

> ID：11456670
> 
> 赞同：22
> 
> 时间：2012-07-12T16:47:40.560
> 
> 标签：regex

我正在尝试编写一个有助于地址的正则表达式，例如 21-big walk way 或 21 St.Elizabeth's drive 我想出了以下正则表达式，但我不太热衷于如何合并所有字符（字母数字、空格破折号、句号、撇号）

```
"regexp=^[A-Za-z-0-99999999' 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T17:49:03.847

请参阅有关使用正则表达式进行地址验证的问题的答案： [正则表达式街道地址匹配](https://stackoverflow.com/questions/9397485/regex-street-address-match)

问题是，街道地址的格式差异很大，很难针对它们进行编码。如果您正在尝试验证地址，则很难根据其格式查找地址是否无效。这将返回以下地址（253 N. Cherry St.），任何具有相同格式的内容：

```
\d{1,5}\s\w.\s(\b\w*\b\s){1,2}\w*\. 
```

这允许 1-5 位数字用于门牌号、一个空格、一个字符后跟一个句点（用于 N. 或 S.）、1-2 个单词用于街道名称，以缩写结尾（如 st. 或 rd.） .

因为正则表达式用于查看事物是否符合标准或协议（您定义），所以您可能不想允许上面提供的地址，尤其是第一个带有破折号的地址，因为它们不是很标准。如果你愿意，你可以修改我上面的代码以允许它们——你可以添加

```
(-?) 
```

允许破折号但不需要破折号。

此外，[http://rubular.com/](http://rubular.com/)是一种学习正则表达式的快速互动方式。试试上面的地址。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-17T15:26:57.580

如果您没有上述地址的固定格式，我会使用正则表达式来消除地址中未使用的符号（如专门的 sybmols - &(%#$^)。结果会是：

```
[A-Za-z0-9'\.\-\s\,] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-02-03T10:00:39.600

只是为了补充[Serzas](https://stackoverflow.com/users/2362688/serzas)的答案（因为没有足够的代表发表评论）。字母和数字可以有效地用 \w 代替单词。此外，撇号、逗号、句号和连字符不一定需要反斜杠。我的要求还涉及正斜杠和反斜杠，因此 \/ 以及最后带有 \s 的空格。对我来说工作的正则表达式是：

```
pattern: "[\w',-\\/.\s]" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-06T11:13:34.780

**用于简单地址验证的正则表达式**

```
^[#.0-9a-zA-Z\s,-]+$ 
```

例如地址匹配案例

```
#1, North Street, Chennai - 11 
```

例如地址不匹配大小写

```
$1, North Street, Chennai @ 11 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-18T12:12:40.687

我已经成功使用了；

```
Dim regexString = New stringbuilder
    With regexString
       .Append("(?<h>^[\d]+[ ])(?<s>.+$)|")                'find the 2013 1st ambonstreet 
       .Append("(?<s>^.*?)(?<h>[ ][\d]+[ ])(?<e>[\D]+$)|") 'find the 1-7-4 Dual Ampstreet 130 A
       .Append("(?<s>^[\D]+[ ])(?<h>[\d]+)(?<e>.*?$)|")    'find the Terheydenlaan 320 B3 
       .Append("(?<s>^.*?)(?<h>\d*?$)")                    'find the 245e oosterkade 9
    End With

    Dim Address As Match = Regex.Match(DataRow("customerAddressLine1"), regexString.ToString(), RegexOptions.Multiline)

    If Not String.IsNullOrEmpty(Address.Groups("s").Value) Then StreetName = Address.Groups("s").Value
    If Not String.IsNullOrEmpty(Address.Groups("h").Value) Then HouseNumber = Address.Groups("h").Value
    If Not String.IsNullOrEmpty(Address.Groups("e").Value) Then Extension = Address.Groups("e").Value 
```

正则表达式将尝试查找结果，如果没有，则移至下一个替代项。如果没有找到结果，则 4 种格式都不存在。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-08T19:02:43.080

这个对我有用：

```
\d+[ ](?:[A-Za-z0-9.-]+[ ]?)+(?:Avenue|Lane|Road|Boulevard|Drive|Street|Ave|Dr|Rd|Blvd|Ln|St)\.? 
```

来源：[https ://www.codeproject.com/Tips/989012/Validate-and-Find-Addresses-with-RegEx](https://www.codeproject.com/Tips/989012/Validate-and-Find-Addresses-with-RegEx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-03T09:20:49.133

对于此类任务，Regex 是一个非常糟糕的选择。尝试寻找可以清理地址数据的 Web 服务或地址数据库或产品。

有关的：

*   [使用 Google Maps API 进行地址验证](https://stackoverflow.com/questions/682093/address-validation-using-google-maps-api)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-17T05:29:00.330

作为一个简单的单行表达式推荐这里，

`^([a-zA-z0-9/\\''(),-\s]{2,255})$`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-11T18:55:30.853

这是我使用正则表达式查找地址的方法：

一组模式对于查找我们可能期望从一个地址开始的许多形式很有用，该地址仅以数字开头，后跟一组字符串（例如 1 Basic Road），然后变得更具体，例如查找“PO Box”、“c /o"、"attn:" 等。

下面是一个简单的python测试。测试将找到所有地址，但不会找到最后 4 项公司名称。此示例并不全面，但可以根据您的需要进行更改并捕获您在数据中找到的示例。

```
import re
strings = [
    '701 FIFTH AVE',
    '2157 Henderson Highway',
    'Attn: Patent Docketing',
    'HOLLYWOOD, FL 33022-2480',
    '1940 DUKE STREET',
    '111 MONUMENT CIRCLE, SUITE 3700',
    'c/o Armstrong Teasdale LLP',
    '1 Almaden Boulevard',
    '999 Peachtree Street NE',
    'P.O. BOX 2903',
    '2040 MAIN STREET',
    '300 North Meridian Street',
    '465 Columbus Avenue',
    '1441 SEAMIST DR.',
    '2000 PENNSYLVANIA AVENUE, N.W.',
    '465 Columbus Avenue',
    '28 STATE STREET',
    'P.O, Drawer 800889.',
    '2200 CLARENDON BLVD.',
    '840 NORTH PLANKINTON AVENUE',
    '1025 Connecticut Avenue, NW',
    '340 Commercial Street',
    '799 Ninth Street, NW',
    '11318 Lazarro Ln',
    'P.O, Box 65745',
    'c/o Ballard Spahr LLP',
    '8210 SOUTHPARK TERRACE',
    '1130 Connecticut Ave., NW, Suite 420',
    '465 Columbus Avenue',
    "BANNER & WITCOFF , LTD",
    "CHIP LAW GROUP",
    "HAMMER & ASSOCIATES, P.C.",
    "MH2 TECHNOLOGY LAW GROUP, LLP",
]

patterns = [
    "c\/o [\w ]{2,}",
    "C\/O [\w ]{2,}",
    "P.O\. [\w ]{2,}",
    "P.O\, [\w ]{2,}",
    "[\w\.]{2,5} BOX [\d]{2,8}",
    "^[#\d]{1,7} [\w ]{2,}",
    "[A-Z]{2,2} [\d]{5,5}",
    "Attn: [\w]{2,}",
    "ATTN: [\w]{2,}",
    "Attention: [\w]{2,}",
    "ATTENTION: [\w]{2,}"
]
contact_list = []
total_count = len(strings)
found_count = 0
for string in strings:
    pat_no = 1
    for pattern in patterns:
        match = re.search(pattern, string.strip())
        if match:
            print("Item found: " + match.group(0) + " | Pattern no: " + str(pat_no))
            found_count += 1
        pat_no += 1

print("-- Total: " + str(total_count) + " Found: " + str(found_count)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-26T14:42:01.867

UiPath Academy 培训视频列出了这个适用于美国地址的 RegEx（它对我来说很好用）：

```
\b\d{1,8}(-)?[a-z]?\W[a-z|\W|\.]{1,}\W(road|drive|avenue|boulevard|circle|street|lane|waylrd\.|st\.|dr\.|ave\.|blvd\.|cir\.|In\.|rd|dr|ave|blvd|cir|ln) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-31T05:15:01.920

我有一个不同的用例 - 在日志中查找任何地址并责骂应用程序开发人员（devops 工作中最喜欢的部分）。我的优势是在模式中有“地址”这个词，但如果你有特定的字段要扫描，应该可以不用它

```
\baddress.[0-9\\\/# ,a-zA-Z]+[ ,]+[0-9\\\/#, a-zA-Z]{1,} 
```

1.  寻找“地址”这个词 - 如果不适用，请跳过这个
2.  查找第一个部件号、字母、#、空格 - 单元号/门牌号/套房号/门号
3.  用空格或逗号分隔
4.  查找其余地址数字、字母、#、空格中的一项或多项

测试：

*   1 Sleepy Boulevard 邮政信箱，65745 箱
*   套房 #100 /98,North St,Snoozepura
*   新泽西州大道，
*   420 套房 1130 Connect Ave., NW,
*   420 套房 19 / 21 旧大街，
*   套房 12，斯普林菲尔德，维多利亚州 3001
*   套房#100/98 North St Snoozepura

当街道地址带有单元/套房号，邮政编码，只有街道时，这对我有用。它也与 IP 地址或 MAC 地址不匹配。使用额外的空间。这假设用户是普通人，用逗号、井号或空格分隔街道地址的元素，而不是使用“|”等字符的精神病患者 或者 ”：”！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-20T13:56:30.577

对于法国地址和一些国际地址，我也使用它。

```
[\\D+ || \\d]+\\d+[ ||,||[A-Za-z0-9.-]]+(?:[Rue|Avenue|Lane|... etcd|Ln|St]+[ ]?)+(?:[A-Za-z0-9.-](.*)]?) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-05T23:59:04.583

我从这里给出的回复中受到启发，并带来了这两个解决方案

*   支持可选大写
*   也支持法语

### 正则表达式结构

1.  数字（必填）
2.  字母、字符和空格
3.  至少一个常用地址关键字（必填）
4.  在换行之前你想要多少个字符

## 定义：

#### 准确性

检测地址的能力，而不是看起来像地址的东西。

#### 范围

检测不常见地址的能力。

## 正则表达式 1：

*   高准确率
*   低量程

```
/[0-9]+[ |[a-zà-ú.,-]* ((highway)|(autoroute)|(north)|(nord)|(south)|(sud)|(east)|(est)|(west)|(ouest)|(avenue)|(lane)|(voie)|(ruelle)|(road)|(rue)|(route)|(drive)|(boulevard)|(circle)|(cercle)|(street)|(cer\.)|(cir\.)|(blvd\.)|(hway\.)|(st\.)|(aut\.)|(ave\.)|(ln\.)|(rd\.)|(hw\.)|(dr\.)|(a\.))([ .,-]*[a-zà-ú0-9]*)*/i 
```

[![在此处输入图像描述](../Images/b0066244a9560252ae4a07427e390386.png)](https://i.stack.imgur.com/c5hix.png)

## 正则表达式 2：

*   精度低
*   高范围

```
/[0-9]*[ |[a-zà-ú.,-]* ((highway)|(autoroute)|(north)|(nord)|(south)|(sud)|(east)|(est)|(west)|(ouest)|(avenue)|(lane)|(voie)|(ruelle)|(road)|(rue)|(route)|(drive)|(boulevard)|(circle)|(cercle)|(street)|(cer\.?)|(cir\.?)|(blvd\.?)|(hway\.?)|(st\.?)|(aut\.?)|(ave\.?)|(ln\.?)|(rd\.?)|(hw\.?)|(dr\.?)|(a\.))([ .,-]*[a-zà-ú0-9]*)*/i 
```

[![在此处输入图像描述](../Images/6dff4c92d1a7def85b909a42956dfde5.png)](https://i.stack.imgur.com/JEj4L.png)

# xna - 确定一个点是否在从原点创建无限延伸线的其他两个点的范围内

> ID：11456671
> 
> 赞同：1
> 
> 时间：2012-07-12T16:47:51.127
> 
> 标签：xna, geometry, formula, angle

如果我有三个点可以创建一个角度，那么确定第四个点是否位于前三个点创建的角度内的最佳方法是什么？

目前，我确定了从原点到所有三个点的线的角度，然后检查测试角度是否在其他两个角度之间，但我正在尝试找出是否有更好的方法来做到这一点. 该功能每次更新都会运行数万次，我希望有更好的方法来实现我想要做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T02:52:44.833

假设您有角度`DEF`（`E`是“尖”部分），`ED`是左光线，`EF`是右光线。

```
 * D (Dx, Dy)
     /
    /          * P (Px, Py)
   /
  /
 *---------------*
E (Ex, Ey)       F (Fx, Fy) 
```

**步骤 1**。`ED`以经典的**Al** * x + **Bl** * y + **Cl** = 0 形式为线建立线方程，即简单地计算

```
 Al = Dy - Ey                    // l - for "left"
    Bl = -(Dx - Ex)
    Cl = -(Al * Ex + Bl * Ey) 
```

（注意减法顺序。）

**步骤 2**。**以经典的Ar** * x + **Br** * y + **Cr**`FE` = 0 形式为线（反向）建立线方程，即简单地计算

 ******```
 Ar = Ey - Fy                    // r - for "right"
    Br = -(Ex - Fx)
    Cr = -(Ar * Ex + Br * Ey) 
```

（注意减法顺序。）

**步骤 3**。为您的测试点`P`计算表达式

```
 Sl = Al * Px + Bl * Py + Cl
    Sr = Ar * Px + Br * Py + Cr 
```

*当且仅当两者`Sl`和`Sr`均为正*时，您的点位于角度内。如果其中一个为正而另一个为零，则您的点位于相应的侧射线上。

就是这样。

**注意 1：**要使此方法正常工作，重要的是要确保角度的左右光线确实是*左右**光线*。即，如果您考虑和作为时钟指针，从到的方向应该是*顺时针方向*。如果不能保证您的输入是这种情况，则需要进行一些调整。例如，它可以作为算法的附加步骤，插入到步骤 2 和 3 之间*`ED``EF``D``F`*

 ****步骤 2.5。**计算 的值`Al * Fx + Bl * Fy + Cl`。如果该值为负，则反转所有 ABC 系数的符号：

```
Al = -Al, Bl = -Bl, Cl = -Cl
Ar = -Ar, Br = -Br, Cr = -Cr 
```

**注 2：**上述计算是在假设我们在 X 轴指向右侧、Y 轴指向顶部的坐标系中工作的情况下进行的。如果您的坐标轴之一被翻转，您必须反转所有六个 ABC 系数的符号。请注意，顺便说一句，如果您执行上述步骤 2.5 中描述的测试，它将自动处理所有事情。如果您不执行步骤 2.5，那么您必须从一开始就考虑轴方向。

* * *

如您所见，这是一种精确的整数方法（没有浮点计算，没有除法）。其代价是溢出的危险。使用适当大小的类型进行乘法运算。

这种方法对于直线方向或实际非反射角的值没有特殊情况：它对锐角、钝角、零角和直角立即起作用。它可以很容易地与反射角一起使用（只需执行补充测试）。

**PS**`+/-`符号的四种可能组合`Sl`和`Sr`对应于四个扇区，平面由线`ED`和分割成`EF`。

```
 * D
           / 
   (-,+)  /    (+,+)
         /
 -------*------------* F
       / E
(-,-) /     (+,-)
     / 
```

通过使用这种方法，您可以执行完整的“点落入哪个扇区”测试。对于小于 180 的角度，您碰巧只对这些扇区中的一个感兴趣：`(+, +)`. 如果在某些时候您还需要将此方法调整为反射角（角度大于 180），则必须测试三个扇区而不是一个扇区：`(+,+)`、`(-,+)`、`(+,-)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:19:14.240

描述您的原点 O，以及其他 2 个点 A 和 B，然后您的角度为 AOB。现在考虑您的测试点并将其称为 C，如图所示。

![在此处输入图像描述](../Images/e3f436032a009b0195ff13e27c9fa261.png)

现在考虑我们可以通过取向量 OA 的某个倍数和 OB 的某个倍数来得到 C 的向量方程。明确地

```
 C = K1 x OA + K2 OB 
```

对于我们需要计算的一些 K1,K2。通过从所有其他点中减去它（矢量地）将 O 设置为原点。如果 A 的坐标是 (a1,a2), B = (b1,b2) 和 C = (c1,c2) 我们有矩阵项

```
 [ a1 b1 ] [ K1 ] = [ c1 ]
 [ a2 b2 ] [ K2 ] = [ c2 ] 
```

所以我们可以使用矩阵的逆来求解 K1 和 K2

```
 1 / (a1b2 - b1a2)  [ b2 -b1 ] [ c1 ] = [ K1 ]
                     [ -a2 a1 ] [ c2 ] = [ K2 ] 
```

这减少到

```
 K1 = (b2c1 - b1c2)/(a1b2 - b1a2)
 K2 = (-a2c1 + a1c2)/(a1b2 - b1a2) 
```

现在如果点 C 在你的角度内，向量 OA 和 OB 的倍数都将为正。如果 C 位于 OB 下方，那么我们需要负量的 OA 才能以类似的方式到达另一个方向。**因此，当K1 和 K2 都大于（或等于） zero**时，您的条件得到满足。您必须小心，`a1b2 = b1a2`因为这对应于奇异矩阵并被零除。在几何上，这意味着 OA 和 OB 是平行的，因此没有解决方案。上面的代数可能需要验证任何轻微的拼写错误，但方法是正确的。可能很啰嗦，但您可以简单地从点坐标中获取所有信息，并节省您计算逆三角函数来获取角度的时间。

以上适用于角度 < 180 度，因此如果您的角度大于 180 度，则应改为检查

```
 !(K1 >= 0 && K2 >= 0) 
```

因为这是在小于 180 度的段的外部。请记住，对于 0 度和 180 度，您将出现除以零的错误，必须检查（确保`a1b2 - b1a2 != 0`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:17:31.557

是的，我的意思是我上面评论中的最小角度。查看[此](https://stackoverflow.com/questions/1427422/cheap-algorithm-to-find-measure-of-angle-between-vectors)线程以广泛讨论找到两个向量之间角度的度量的廉价方法。我在很多场合都使用了查找表方法并取得了巨大的成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:19:30.197

三角形 OBC 必须是正向的，三角形 OC A 也是如此。要计算方向，只需使用鞋带公式。两个值都必须是正的。********

# objective-c - 根据日期在特定页面上打开 UIPageViewController

> ID：11456672
> 
> 赞同：1
> 
> 时间：2012-07-12T16:47:51.673
> 
> 标签：objective-c, ios, xcode, uipageviewcontroller

我正在从 Apple 提供的 UIPageViewController 模板开始开发一个块日历应用程序。现在我有一个包含 365 个图像的数组，每个图像用于填充一页。打开应用程序时，第一页自然会显示数组中的第一张图像。现在我的愿望是每张图片对应一个特定的日期（比如 12-06-2012），并且当应用程序在该日期打开时，应用程序会打开与该日期对应的页面。由于我对 Objective-C 和 UIPageViewController 还比较陌生，所以最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:07:08.343

`UIPageViewController`不知道当前页码的概念。就它而言，只有它当前显示的视图控制器。您负责为页面视图控制器提供正确配置的视图控制器（并在用户翻页时准备另一个为下一页或上一页配置的视图控制器）。

关于确定当年特定天数，请看`NSCalendar`and `NSDateComponents`，尤其是`ordinalityOfUnit:inUnit:forDate:`方法。另请注意，并非所有用户都使用我们大多数人可能认为理所当然的“西方”公历。

# asp.net - 日志文件与主文件不匹配。_log.ldf 和 .ldf 文件

> ID：11456675
> 
> 赞同：1
> 
> 时间：2012-07-12T16:48:02.823
> 
> 标签：asp.net, sql-server-2008, ef-code-first, asp.net-mvc-4

我目前正在尝试将其他用户信息与 MVC4 中的成员资格提供程序一起存储在单个 .mdf 文件中。我一直在研究一个简单的测试 Mvc4 应用程序，它首先使用 Code 和 System.Web.Providers。数据库有一个初始化器，它会在模型​​更改时删除并创建数据库。但是，每当我这样做时，我都会收到一条错误消息：

一个或多个文件与数据库的主文件不匹配。如果您尝试附加数据库，请使用正确的文件重试该操作。如果这是现有数据库，则文件可能已损坏，应从备份中恢复。无法打开登录请求的数据库“MyNewTest”。登录失败。日志文件 ~\MvcTest.ldf' 与主文件不匹配。它可能来自不同的数据库，或者之前可能已重建日志。

如果我查看 App_Data 文件夹，我现在有两个 .ldf 文件。一个 MvcTest.ldf 和一个 MvcTest_log.ldf。如果我将 MvcTest_log.ldf 重命名为 MvcTest.ldf 文件，一切都会再次运行。

在我的 Web.Config 文件中，我有这个

```
<add name="DefaultConnection" 
providerName="System.Data.SqlClient" 
connectionString="Data source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MvcTest.mdf;Initial Catalog=MvcTest;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True" /> 
```

我的 Context.cs 文件：

```
public class Context : DbContext
{
    public Context()
        : base("DefaultConnection")
    {
    }
    public DbSet<UserInformation> UserInformation { get; set; }
} 
```

我的 Initializer.cs 文件：

```
public class Initializer : DropCreateDatabaseIfModelChanges<Context>
{
    protected override void  Seed(Context context)
    {
        base.Seed(context);
    }

} 
```

还有一个模型文件：

```
public class UserInformation
{
    public int UserInformationId { get; set; }

    public Guid UserId { get; set; }
    public string callsign { get; set; }
} 
```

我也想知道我是否以错误的方式解决这个问题。我希望将表放在一起的原因是强制执行一致性约束。

# c# - 按缓冲区查询无法通过代理页面工作

> ID：11456686
> 
> 赞同：0
> 
> 时间：2012-07-12T16:48:32.660
> 
> 标签：c#, javascript, arcgis

我有网络地图应用程序，它具有大部分 GIS 功能，包括缓冲。我的问题是当字符数量从 2000 增加时，缓冲区查询不起作用（即给出所需的结果）。

我已按照 ArcGIS 帮助中心提供的所有说明安装代理页面，但不知何故无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:49:46.813

尝试使用 Firefox-> Firebug 工具找出查询执行。

用于`console.log(<some text >);`确定哪些行正在执行。

# java - 如果@NotFound 则休眠，插入数据库

> ID：11456688
> 
> 赞同：0
> 
> 时间：2012-07-12T16:48:44.193
> 
> 标签：java, php, sql, database, hibernate

我的客户为我正在使用 PHP 构建的应用程序编写了后端。然而，他没有把数据库写得太好。例如，有两张表，一张是“users”，一张是“user_settings”。然而，一旦用户决定修改他们的设置，他的脚本只会在“user_settings”中创建行。否则，他的整个脚本都使用默认值，用他的话来说是“试图节省数据库空间”。

但是，在 Hibernate 中，我不得不尝试为某些用户获取那些“user_settings”，并为那些没有任何设置的用户带来问题。如果该客户端的数据库中不存在任何内容，那么在调用 getClientSettings() 之后，休眠中有没有一种方法可以将一些默认设置插入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:15:25.413

我不知道您究竟是如何实现检索功能的，但我可以建议的一种方法是您应该尝试将 user_settings 作为对象检索，如果该对象为空，那么您可以创建映射类的新实例（比如 user_settings） ，设置常用的键（类似于userId），然后设置其他默认值，然后将对象存储在数据库中，这样您的应用程序就可以正常工作，并且默认值也将被填充。

# php - 如何在同一页面上显示多个成员 ID 的多个成员变量？

> ID：11456693
> 
> 赞同：0
> 
> 时间：2012-07-12T16:48:57.507
> 
> 标签：php, mysql, variables

我正在尝试在一个公共网页中使用 PHP 为同一 mysql 数据库中的不同成员显示来自同一组变量的值。例如，一个网页将为不同的成员显示以下数据，每个成员都有不同的 ID：

```
id //unique identifier
city
state
price
description 
```

只需使用 URL 中的 GET 变量，我就可以为一个成员的数据显示这些值。但我需要为多个成员显示来自这些变量的数据，每个成员都有不同的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:53:15.933

这实际上更简单，除非我遗漏了什么。您需要使用以下内容进行查询：

```
SELECT id, city, state, price, description FROM Members 
```

我们需要有关您的数据库的更多信息才能更有帮助。例如，我严重怀疑“价格”是否是“成员”表的有效字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:53:20.380

```
SELECT id, city, state, price, description FROM users WHERE id IN ({ids}) 
```

只需用逗号分隔的用户 ID 数组替换 {ids}。我不知道您是如何通过 $_GET 获取 id，但如果是通过数组，只需执行`implode(",", $_GET["ids"])`.

# ios - NSString 与 NSArray 中字符的位置 - 性能/效率

> ID：11456698
> 
> 赞同：0
> 
> 时间：2012-07-12T16:49:10.237
> 
> 标签：ios, performance, nsstring, nsarray, alphabet

有谁知道在 NSString 或相同字符的 NSArray 中查找字符的速度更有效？

我想知道哪个算法有最好和最有效的算法来找到正确的值。

我实际上想在字母表中找到一个字符的位置。例如`E`在字母表中找到“”的位置`@"ABCDE....XYZ"`或`[NSArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",...,@"X",@"Y",@"Z"];`

哪个是更好的搜索？NSString 还是 NSArray？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:54:05.107

如果只是 AZ：

```
NSString *string = @"A";
int position = (int)[string characterAtIndex:0]-64;
NSLog(@"%d", position); 
```

只是出于好奇：

```
NSString *alphabetString = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
NSMutableArray *alphabetArray = [NSMutableArray array];
for(int pos = 0; pos < [alphabetString length]; pos++) {

    [alphabetArray addObject:[alphabetString substringWithRange:NSMakeRange(pos, 1)]];
}

NSString *check = @"A";

// check with rangeOfString
NSDate *start = [NSDate date];
for(int i = 0; i < 1000000; i++) {

    int position = [alphabetString rangeOfString:check].location + 1;
}
NSDate *end = [NSDate date];
NSLog(@"STRING | time needed: %f", [end timeIntervalSinceDate:start]);

// check with indexOfObject
start = [NSDate date];
for(int i = 0; i < 1000000; i++) {

    int position = [alphabetArray indexOfObject:check] + 1;
}
end = [NSDate date];
NSLog(@"ARRAY | time needed: %f", [end timeIntervalSinceDate:start]);

// check with ASCII position
start = [NSDate date];
for(int i = 0; i < 1000000; i++) {

    int position = (int)[check characterAtIndex:0]-64;
}
end = [NSDate date];
NSLog(@"ASCII | time needed: %f", [end timeIntervalSinceDate:start]); 
```

安慰：

```
STRING | time needed: 0.156067
ARRAY | time needed: 0.213297
ASCII | time needed: 0.017055 
```

# sql - 使用 where 子句的慢查询

> ID：11456702
> 
> 赞同：14
> 
> 时间：2012-07-12T16:49:35.967
> 
> 标签：sql, sql-server

我有以下 sql 查询，只需 1 秒即可执行：

```
select a.date, b.rate, c.type, a.value from

a inner join b on a.id = b.aid
c inner join b.id = c.bid
where a.name = 'xxx' 
```

但是我需要一个结果集来获得比率大于 0 的结果。因此，当我将查询更改为此时，需要 7 分钟才能执行：

```
select a.date, b.rate, c.type, a.value from

a inner join b on a.id = b.aid
c inner join b.id = c.bid
where a.name = 'xxx' and b.rate>0 
```

为什么这会使查询时间从 1 秒增加到 7 分钟？由于 b 表很大，我什至尝试使用 CTE，但这也没有提高性能。我认为使用 CTE 会有更小的一组值可供过滤，因此它应该更快，但这并没有帮助：

```
;with x as
(select a.date, b.rate, c.type, a.value from

a inner join b on a.id = b.aid
c inner join b.id = c.bid
where a.name = 'xxx')
select * from x where rate>0 
```

我不能包含执行计划，因为除了查询之外我没有对 db 的权限。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T17:32:50.860

我的猜测是，缓慢的执行计划正在`rate>0`以一种不幸的方式进行过滤，例如作为循环连接内部扫描的一部分或其他东西。

如果归根结底，一种解决方案是存储中间结果集并在单独的语句中对其进行过滤。

我建议这样做，因为您无法更改供应商的数据库并且您基本上被卡住了。这实质上是从优化器中剥夺了一些控制权——这是您通常不想做的事情——并且还通过创建临时表增加了相对少量的开销。但它应该缓解这种情况下的缓慢。如果可能，我将继续与您的供应商合作制定索引策略。

```
select a.date, b.rate, c.type, a.value 
into #t
from a inner join b on a.id = b.aid
c inner join b.id = c.bid
where a.name = 'xxx' 

select * from #t where rate>0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:02:00.973

首先让我解释一下为什么你有一个糟糕的计划。一件事是我现在能想到的。当没有 rate.The table a 是第一个并且基于 sarg 和 index 说它估计有 10000 行。这可能使用了合并连接。现在与表 b 连接（截至目前，假设存在 1 到 n 映射，并且在 avg 上，每行表格 a 有 2 行）。然后连接后的估计行数为 20000，然后它与表 C 连接。现在基于表 C 的大小，它可以使用说合并连接。假设实际行数为 100

但是当您添加 SARG rate > 0。然后优化器在 A 和 B 连接后没有估计 20K 行而是估计 6667 行（当没有 auto_create_statistics 时，默认为 30% > 0）然后它可能选择了说与表 C 的嵌套循环连接而不是合并连接。但实际行可能更多，因此嵌套循环连接可能已用于 100 的数千个，因此最终的嵌套循环连接可能会花费这么多时间。

总之，我想说的是，由于额外的 sarg，优化器的估计不正确，因此是一个糟糕的计划。

您根本不在这里创建索引。索引不是每件事的解决方案，拥有它们的开销太多了，特别是在您的情况下，限制较少的查询运行得更好，所以问题与索引无关，而是它更多地与统计数据有关。检查以下

> 您的数据库的 auto_create_statistics 是打开还是关闭？或者表 b 具有列速率的统计信息？何时为这些表更新/创建统计信息？如果不是首先为该列创建统计信息，我相信您的计划将是正常的。如果您无法创建统计信息，那么请尝试强制执行与您获得的相同计划，但 rate > 0 CTE 不会提高代码性能，因此可能会出现异常。这些是为了使代码更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:03:08.343

在**rate**和**name**列上创建**索引**& 你会看到很大的不同。

 ******编辑：**

由于列属于两个不同的表，因此需要两个单独的索引

**编辑：**

[索引指南](https://dba.stackexchange.com/questions/8040/are-these-good-indexing-guidelines)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:09:49.970

如果您试图告诉服务器如何使用 CTE 优化您的查询，我认为您是在自欺欺人。使用索引您将获得更好的结果。但无论如何，您似乎已经将 CTE 部分放在了头上。您想要求服务器首先执行 CTE，然后评估外部查询。或许像这样...

```
;with x as (Select a.id, a.date, a.value from a where a.name='xxx')
Select x.date, b.rate, c.type, x.value
From x
  Inner join b on x.id=b.aid
  Inner Join c on b.id=c.bid
where b.rate>0 
```

或者

```
;with x as (
   Select b.id, b.rate, c.type 
   From b 
     Inner Join c on b.id=c.bid
   where b.rate>0)
Select a.date, x.rate, x.type, a.value
From a
  Inner join x on a.id=b.id
Where a.name='xxx' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-04T18:56:47.793

您可以通过强制合并连接将优化器发送到正确的路径：

select ... from TableA left merge join TableB on ...

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-12T16:54:43.123

该部分`b>0`彻底改变了它，因为服务器无法再使用聚集索引和其他方法优化查询。当您添加时`b>0`，将此查询转换为范围查询，这将需要更多时间，因为它确实必须检查更多值。我相信有一些优化已经到位，例如针对此类查询的 B-tree 组织，但它不会对其进行太大改进。****

# firefox - Firefox 扩展生成的事件是否“可信”？

> ID：11456705
> 
> 赞同：7
> 
> 时间：2012-07-12T16:49:40.393
> 
> 标签：firefox, firefox-addon, dom-events

我的 Firefox 扩展生成事件，例如点击。作为响应，Web 应用程序尝试打开一个新窗口。但是，当弹出窗口阻止程序启动时，它会被 Firefox 阻止。但是，如果我手动单击一个按钮并在网络应用程序尝试打开窗口时对此做出响应，它就会通过。

我的问题是为什么我的扩展程序生成的事件不被视为“受信任”，并且在用户点击时以同样的方式对待？是否有一些后门来实现这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T22:08:38.093

**编辑**：这个答案已经过时了。它指的是自 Firefox 57 起不再支持的经典扩展。基于 Web 扩展 API 的扩展[无法生成可信事件](https://bugzilla.mozilla.org/show_bug.cgi?id=1348213)。

是的，扩展生成的事件始终是可信的。这意味着事件`event.isTrusted`将`true`能够触发需要受信任事件的操作（例如 Ctrl-Tab`keypress`事件来切换浏览器选项卡）。但是，它们仍然是合成事件，这意味着没有与它们关联的本机（操作系统级别）事件。而且由于弹出窗口阻止程序适用于本机事件，因此它不会看到您的扩展程序生成的事件。

您可以使用[nsIDOMWindowUtils.sendMouseEventToWindow()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIDOMWindowUtils#sendMouseEventToWindow%28%29)而不是`document.createEvent()`. 此方法用于测试，也将生成本机事件。这对于弹出窗口拦截器来说应该足够好了。

```
var utils = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                  .getInterface(Components.interfaces.nsIDOMWindowUtils);
utils.sendMouseEventToWindow("click", 10, 20, 0, 1, 0); 
```

# php - 单值 Mysqli

> ID：11456707
> 
> 赞同：35
> 
> 时间：2012-07-12T16:49:58.897
> 
> 标签：php, mysqli

我正在尝试编写一个函数，该函数将使用 mysqli 检查数据库中的单个值，而无需将其放入数组中。除了我已经在这里做的事情，我还能做什么？

```
function getval($query){
    $mysqli = new mysqli();
    $mysqli->connect(HOST, USER, PASS, DB);
    $result = $mysqli->query($query);
    $value = $mysqli->fetch_array;
    $mysqli->close();
    return $value;
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-06-03T10:08:12.973

怎么样

```
$name = $mysqli->query("SELECT name FROM contacts WHERE id = 5")->fetch_object()->name; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-17T23:55:35.240

mysql 扩展可以使用 mysql_result 来做到这一点，但是 mysqli 到目前为止还没有等效的功能，afaik。它总是返回一个数组。

如果我不只是创建记录，我会这样做：

```
$getID = mysqli_fetch_assoc(mysqli_query($link, "SELECT userID FROM users WHERE something = 'unique'"));
$userID = $getID['userID']; 
```

或者，如果我只是创建了记录并且 userID 列是 AI，我会这样做：

```
$userID = mysqli_insert_id($link); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-13T22:37:09.583

始终最好在开始时创建一次连接并在结束时关闭。以下是我将如何实现您的功能。

```
$mysqli = new mysqli();
$mysqli->connect(HOSTNAME, USERNAME, PASSWORD, DATABASE);

$value_1 = get_value($mysqli,"SELECT ID FROM Table1 LIMIT 1");
$value_2 = get_value($mysqli,"SELECT ID FROM Table2 LIMIT 1");

$mysqli->close();

function get_value($mysqli, $sql) {
    $result = $mysqli->query($sql);
    $value = $result->fetch_array(MYSQLI_NUM);
    return is_array($value) ? $value[0] : "";
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-24T23:51:47.827

这就是我最终得到的结果：

```
function get_col($sql){
  global $db;
  if(strpos(strtoupper($sql), 'LIMIT') === false) {
    $sql .= " LIMIT 1";
  }
  $query = mysqli_query($db, $sql);
  $row = mysqli_fetch_array($query);
  return $row[0];
} 
```

这样，如果您忘记`LIMIT 1`在查询中包含（我们都已经完成了），该函数将附加它。

示例用法：

```
$first_name = get_col("SELECT `first_name` FROM `people` WHERE `id`='123'"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-23T21:53:58.187

即使这是一个古老的话题，我在这里也看不到我曾经用于此类分配的非常简单的方法：

```
list($value) = $mysqli->fetch_array; 
```

您可以直接分配更多变量，而不仅仅是一个，因此您可以完全避免使用数组。有关详细信息，请参阅 php 函数[list()](http://php.net/manual/en/function.list.php "列表（）")。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-25T05:55:57.957

首先也是最重要的，

### 这样的函数应该支持准备好的语句

否则会[非常不安全](https://stackoverflow.com/q/60174/285587)。

此外，这样的函数不应该单独连接，而是接受**现有的连接变量**作为参数。

鉴于以上所有情况，调用此类函数的唯一可接受的方式是

```
$name = getVal($mysqli, $query, [$param1, $param2]); 
```

允许`$query`仅包含占位符，而实际数据必须单独添加。绝不应使用任何其他变体，包括此处发布的所有其他答案。

```
function getVal($mysqli, $sql, $values = array())
{
    $stm = $mysqli->prepare($sql);
    if ($values)
    {
        $types = str_repeat("s", count($values));
        $stm->bind_param($types, ...$values);
    }
    $stm->execute();
    $stm->bind_result($ret);
    $stm->fetch();
    return $ret;
} 
```

像这样使用哪个

```
$name = getVal("SELECT name FROM users WHERE id = ?", [$id]); 
```

这是调用此类函数的唯一正确且安全的方法，而所有其他变体都缺乏安全性，而且通常缺乏可读性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-21T00:20:30.687

这并没有完全避免阵列，而是在一行中省去了它。

```
function getval($query) {
    $mysqli = new mysqli();
    $mysqli->connect(HOST, USER, PASS, DB);
    return $mysqli->query($query)->fetch_row()[0];
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-11-08T10:16:12.277

尝试这样的事情：

```
$last = $mysqli->query("SELECT max(id) as last FROM table")->fetch_object()->last; 
```

干杯

# java - 将图像添加到 JPanel

> ID：11456709
> 
> 赞同：1
> 
> 时间：2012-07-12T16:50:06.197
> 
> 标签：java, image, swing, background, jpanel

我想使用不使用paint()/init() 和此类applet 方法的swing 将图像添加到我的JPanel。在 JPanel 上还有一些我想保持可见的其他组件。

简而言之，我想将背景图像添加到我的 JPanel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:22:59.313

`JPanel`您可以像此[链接](http://www.java2s.com/Code/Java/Swing-JFC/Panelwithbackgroundimage.htm)中所示进行扩展。

引用上述链接

```
public class ImageTest {

  public static void main(String[] args) {
    ImagePanel panel = new ImagePanel(new ImageIcon("images/background.png").getImage());

    JFrame frame = new JFrame();
    frame.getContentPane().add(panel);
    frame.pack();
    frame.setVisible(true);
  }
}

class ImagePanel extends JPanel {

  private Image img;

  public ImagePanel(String img) {
    this(new ImageIcon(img).getImage());
  }

  public ImagePanel(Image img) {
    this.img = img;
    Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
    setPreferredSize(size);
    setMinimumSize(size);
    setMaximumSize(size);
    setSize(size);
    setLayout(null);
  }

  public void paintComponent(Graphics g) {
    g.drawImage(img, 0, 0, null);
  }

} 
```

# datetime - Solr 日期时间查询异常

> ID：11456711
> 
> 赞同：0
> 
> 时间：2012-07-12T16:50:09.240
> 
> 标签：datetime, solr

我是 solr 的新手，所以我可能会遗漏一些非常明显的东西。似乎我的日期时间查询没有得到正确解析。例如，这样的查询：

```
        solr/select?q=last_updated:1995-12-31T23:59:59Z
```

结果如下：

```
        org.apache.solr.common.SolrException：无效的日期字符串：'1995-12-31T23'
        在 org.apache.solr.schema.DateField.parseMath(DateField.java:161)
        在 org.apache.solr.schema.DateField.toInternal(DateField.java:131)
        在 org.apache.solr.schema.FieldType.getFieldQuery(FieldType.java:580)
        在 org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:201)
        在 org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
```

似乎 solr 用冒号分隔查询，而日期的其余部分丢失了。我试图玩弄日期格式，这正是我观察到的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:58:36.940

您需要将日期放在双引号中。例如。最后更新：“1995-12-31T23:59:59Z”。
否则，此日期字符串将被标记/分析。

# javascript - 动态生成id时获取link的id

> ID：11456716
> 
> 赞同：0
> 
> 时间：2012-07-12T16:50:24.027
> 
> 标签：javascript, jquery, html

我有一个 div 里面有一堆东西。我在那个 div 里面也有一个链接，它有一个动态生成的 id。没有办法告诉 id 将是什么。

当我单击该链接时，如何将该链接的 id 获取到变量 jQuery 中？在 *.js 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:52:07.930

试试这个，

**带标签名称**

```
$('a').click(function(){
 //alert($(this).attr('id');  
 alert(this.id); //Better then the statement above as it is javascript with jQuery wrapper
}); 
```

**有课**

```
$('.classOfAnchor').click(function(){
 alert($(this).attr('id');
 alert(this.id);  //Better then the statement above as it is javascript with jQuery wrapper
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:52:13.563

```
$("a").click(function() {
    //alert( $(this).attr('id') );
     alert(this.id); //Better then above
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:54:23.547

除非某些东西给元素一个 id，否则不会有一个。

但是，为了解释起见，可以说该链接上肯定有一个 ID..

如果您使用的是 jQuery，您可以简单地选择其容器 div，然后向下遍历链接：`var myID = $('div#theContainingDiv').children('a').attr('id');`

或者，你可以按照别人说的去做——这也行。

# php - 如何使用锚标记将信息从一个页面发送到另一个页面并从php中的数据库中获取数据

> ID：11456718
> 
> 赞同：0
> 
> 时间：2012-07-12T16:50:25.713
> 
> 标签：php

第 1 页

```
<?php 
                            mysql_connect("localhost","root","");
mysql_select_db("mydatabase");
$sql="SELECT * FROM user";
$result=mysql_query($sql);
                            while($row=mysql_fetch_array($result))                          {

echo '<a  href="user_profile.php?variableName="'.&row['userid'].' style="text-decoration:none">'.$row['username'].'</a></form>';
}
?> 
```

user_profile 页面

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("mydatabase");
$sql="SELECT * FROM user where userid=".$_GET['variableName'];
$result=mysql_query($sql);
                            while($row=mysql_fetch_array($result))                          {
echo 'username:'.$row['name'];

}
?> 
```

如果它正确，它是否正确，为什么它不工作，我面临将信息发送到另一个页面的问题。如果这不是正确的方法，请建议我..我需要你的帮助。

***我不是在谈论语法错误***请查看我的代码并尝试知道我想要什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:56:00.473

看起来 href 属性可能没有以双引号终止......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:56:26.590

“ - 位置不好

```
<a  href="user_profile.php?variableName='.&row['userid'].'"... 
```

# php - 检查表单日期是否是今天以及服务器时间是否在美国东部标准时间下午 3:00 之后

> ID：11456725
> 
> 赞同：1
> 
> 时间：2012-07-12T16:50:46.557
> 
> 标签：php, validation, date, time

我想在 PHP 中执行以下操作（我使用的是 5.2 版）：

```
IF form_date = current_date AND server_time >= 3:00pm EST
GIVE ERROR 
```

form_date：用户输入表单的日期。

current_date：今天的日期。

server_time：主机服务器提供的当前时间。

这是我到目前为止所拥有的：

```
//time validation
if (date("Gi") > '1500') {
    $process_result['custom_error'] = "You not able to register after 3 PM";
} 
```

我不确定如何完成这件事，因为 PHP 根本不是我的事。此外，服务器是否只返回它设置的任何时区，还是可以将其更改为特定时区，例如东部标准 (EST)？

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:00:30.867

要设置默认时区，请使用： [http ://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)

```
date_default_timezone_set('America/New_York'); 
```

为了完成代码，我将重定向到另一个页面，该页面告诉用户它完全失败了：

```
<?php
date_default_timezone_set('America/New_York');
if (date("Gi") > '1500') {
    header("Location: http://example.com/failed_registration.php");
}else{
 //how are you going to register them?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:50:09.513

我最终使用了以下效果很好。

```
//time validation for day-of reservations
date_default_timezone_set('America/New_York');
if (date("Gi") >= '1500'){
    if (date("m.d.y") == date("m.d.y",strtotime($table_data['element_' . $date_element_id]))){
    $error_elements[$date_element_id] = 'You are not able to make an online reservation for today, after 3:00pm EST.  Please call us at xxx-xxx-xxxx to make your reservation.';
    }
} 
```

# javascript - 正则表达式：数字匹配是作为字符串还是数字返回？

> ID：11456736
> 
> 赞同：1
> 
> 时间：2012-07-12T16:51:31.003
> 
> 标签：javascript, regex, arrays, object-type

昨天我在stackoverflow上回答一个问题，我自己的回答中有一些我不明白的......

参考：[有问题的线程](https://stackoverflow.com/questions/11446105/simple-javascript-replace-with-a-loop)和[我的小提琴](http://jsfiddle.net/bdy6G/)

这是我的答案中的代码：

```
var rx = /{([0-9]+)}/g;
str=str.replace(rx,function($0,$1){return params[parseInt($1)];}); 
```

现在，让我吃惊的是下面的代码也可以工作：

```
var rx = /{([0-9]+)}/g;
str=str.replace(rx,function($0,$1){return params[$1];}); 
```

我的问题：为什么不需要 parseInt ？JavaScript 在什么时候将 $1 转换为数字？它在正则表达式中还是在数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:56:24.903

那是因为 javascript 将索引读取为字符串

`array[1]`, 将`array['1']`在被读取之前转换为

同样的方法`object['first']`将起作用

# jquery - jquery在表中查找最大的TD

> ID：11456740
> 
> 赞同：0
> 
> 时间：2012-07-12T16:51:53.810
> 
> 标签：jquery

我有一个看起来类似于以下的表

```
<table id="mytable">
    <tr><td>1</td><td>Data here</td></tr>
    <tr><td>3</td><td>Data here</td></tr>
    <tr><td>2</td><td>Data here</td></tr>
</table> 
```

我如何使用 jquery 来检索数字 3，因为它是 3 行中最高的？我不能使用 last 或 first ，因为不能保证这些行会被排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:59:20.793

尝试这样的事情：

```
var max = Math.max.apply(Math, $('td:first-child').map(function(i,elem){ 
    return Number($(elem).text()); 
})); 
```

[现场演示](http://jsfiddle.net/FLwfP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:02:31.367

```
var max = 0;
$('#mytable tr').find('td:first').each(function(){
    max = Math.max($(this).html(),max);
});​​​​​​​​​​​​​​​​​​​​​​​​​​
    alert(max); 
```

[jsfiddle中的代码](http://jsfiddle.net/JY77G/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:58:44.677

我猜 jQuery 不能直接做，但你可以自己做。

```
var max = -1;
$("tr > td").each(function(index, element) {
    var n = Number($(element).html());
    if (n != NaN && max < n) {
        max = n;
    }
});

//console.log("your max value is " + max); 
```

[http://jsfiddle.net/N6MaJ/](http://jsfiddle.net/N6MaJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:11:40.667

您可以将它们读入数组，然后使用 JavaScript 的 max 函数：

```
Math.max.apply(Math,$('#mytable td:nth-child(1)').map(function() {
  return $(this).text();
}).get()); 
```

# jquery - 悬停div上的简单淡入淡出淡出

> ID：11456742
> 
> 赞同：0
> 
> 时间：2012-07-12T16:52:02.533
> 
> 标签：jquery, parent, fadein, fadeout

我是 jQuery 的新手，我真的在努力解决这个问题。我已经阅读了一些过去的帖子并试图自己弄清楚但仍然卡住了。

基本上，我希望在进入父 div 时对孩子产生淡入效果，并在离开父母时对孩子产生淡出效果。目前，它淡入淡出，但是当我进入突然淡出的子 div 时。

有关更多信息，请参阅我的小提琴。

非常感谢发送的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:28:34.333

替换脚本标记中的以下代码。

```
$(function() {
    $('#ms8container').hover(function() {
        $('#videoButtonContainer').fadeIn('slow');
      },
      function(){
        $('#videoButtonContainer').fadeOut('slow');
      }
   );
}); 
```

# java - 如何打乱字符串？

> ID：11456750
> 
> 赞同：0
> 
> 时间：2012-07-12T16:52:25.527
> 
> 标签：java, cryptography

比较密码时，总是存在将密码保存在内存中的问题。相反，在引入密码的那一刻，我想用它的 md5 快照（或任何其他哈希生成函数）替换它

假设您有一个键值对`String password = "Secret";`，将“秘密”打乱到独特的东西的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:55:56.667

一旦您在 a 中获得密码`String`，您就已经失败了，因为您无法将其归零。它会在堆上逗留，直到另一个对象偶然覆盖它。您必须确保的第一件事是您只将密码保存在 a 中`char[]`并尽快将其手动归零。至于哈希，JDK 提供了对它们的支持。退房[`java.security.MessageDigest`](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:01:56.037

使用 MessageDigest。像这样的东西：

```
MessageDigest algorithm = MessageDigest.getInstance("MD5");
algorithm.reset();
algorithm.update(password.getBytes());
byte bytes[] = algorithm.digest();
StringBuffer sb = new StringBuffer();
for (byte b : bytes) {
    String hex = Integer.toHexString(0xff & b);
    if(hex.length() == 1)
        sb.append('0');
    sb.append(hex);
}
result = sb.toString(); 
```

此外，如果 MD5 算法不可用，请注意 getInstance 方法可能引发的 NoSuchAlgorithmException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:57:04.640

您可以使用 Messagedigest 类来生成哈希

但是我认为重要的是不要在内存中获取整个密码-如果您是通过某种字节流读取它，则将其直接逐字节读取到消息摘要中-使用消息摘要类的更新方法，然后在您完成阅读呼叫摘要以获得结果。

# jsf - 在rich:uploadFile中启用控制按钮

> ID：11456752
> 
> 赞同：0
> 
> 时间：2012-07-12T16:52:31.310
> 
> 标签：jsf, richfaces

我正在尝试在上传文件后重新启用丰富的控制按钮：uploadFile。

我有：

```
<rich:panel id="fileuploader">
    <script type="text/javascript">alert("rendering");</script>
<rich:fileUpload fileUploadListener="#{fileUploadBean.listener}"
            maxFilesQuantity="1"   id="upload" autoclear="true"
            acceptedTypes="jpg, gif, png, bmp" >
            <a4j:support event="onuploadcomplete" reRender="fileuploader" />
    </rich:fileUpload>
    <a4j:commandButton value="reRender" reRender="fileuploader"/>
</rich:panel> 
```

我放了一个脚本来确保面板正在重新渲染。我读到您可以重新渲染 uploadFile 控件，或刷新整个页面。上传文件后，controlButton 被禁用，虽然我使用 commandButton 进行了重新渲染，但控制按钮仍然被禁用。但是当我做一个完整的刷新页面时，控件就可以了。

我使用丰富的面孔 3.3.3

有什么帮助吗？

谢谢

[编辑]

我找到了问题，但还没有解决方案！我有一个多行表，所以我有多个丰富的：fileUpload。如果我只显示一行并且它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:35:34.710

我遇到了同样的问题，为了解决它，我重新渲染了控件，而不是保存它的面板，我不知道这种方法是否有效（但它对我有用）：

编辑：为我的代码更改了您的代码，也许有我看不到的差异。

```
<rich:fileUpload id="fuArchivoExcel" maxFilesQuantity="1"
    listHeight="60px" listWidth="350px" immediateUpload="false"
    fileUploadListener="#{cargaDocumentoRequerido.subeArchivo}"
    addControlLabel="Seleccionar archivo" uploadControlLabel="Subir"
    clearAllControlLabel="Borrar archivos"
    clearControlLabel="Borrar archivo" stopControlLabel="Detener" autoclear="true">
    <f:facet name="label">
        <h:outputText value="Se han subido {_KB}KB de {KB}KB" />
    </f:facet>
    <a4j:support event="onuploadcomplete" reRender="fuArchivoExcel,pnlMensajesError"
        oncomplete="finCargaArchivo('#{cargaDocumentoRequerido.mensaje.idMensaje}', '#{cargaDocumentoRequerido.mensaje.descMensaje}')" />
</rich:fileUpload> 
```

* * *

编辑（基于评论）

当您使用`<rich:fileUpload>`内部的中继器`<rich:dataTable>`时，您应该重新渲染中继器组件而不是单个组件。这将解决您的问题。

# c# - 开关 + 时间跨度

> ID：11456753
> 
> 赞同：-2
> 
> 时间：2012-07-12T16:52:37.573
> 
> 标签：c#

我如何将`Switch`语句与`TimeSpan`?

```
switch (myTimeSpan)
{
    case TimeSpan.Minutes:
        Console.WriteLine("Case 1");
        break;
    case TimeSpan.Hours:
        Console.WriteLine("Case 2");
        break;
    case TimeSpan.Seconds:
        Console.WriteLine("Case 2");
        break;
} 
```

**编辑 - 添加答案**

C#7 可以处理`Switch`带有模式匹配的语句

```
 switch(DateTime.Now-lastDate) {
        case var t when t.Days>720:
            changefreq="never";
            break;
        case var t when t.Days>365:
            changefreq="yearly";
            break;
        case var t when t.Days>180:
            changefreq="monthly";
            break;
        case var t when t.Days>30:
            changefreq="weekly";
            break;
        default:
            changefreq="daily";
            break;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T16:58:39.107

我猜你想要做的是这样的

```
if (span.TotalSeconds >= 60 * 60)
{
    Console.WriteLine("hours");
}
else if (span.TotalSeconds >= 60)
{
    Console.WriteLine("minutes");
}
else
{
    Console.WriteLine("seconds");
} 
```

# three.js - 是否有两个 JS 对应于三个 JS

> ID：11456758
> 
> 赞同：32
> 
> 时间：2012-07-12T16:53:12.813
> 
> 标签：three.js

我正在学习 ThreeJS 作为 WebGL 的接口。谢谢大家之前的帮助。

我正在开发一种新的 3D 动力学方法，并希望在教科书中添加 3D 组件。示例可在此处找到：[http ://eon.sdsu.edu/~impellus/DMF/](http://eon.sdsu.edu/~impellus/DMF/)

他们不是最好的，但我正在学习。

同时，我想研究 2D Statics 和 2D INTERACTIVE Free Body Diagrams 中的一些动画。目标是呈现一个对象，切掉它的各个方面并用力替换丢弃的部分（基本上：通过删除接触来交互式地构建自由体图）。通常，我会考虑使用 Flash，但有人建议我不要这样做。

你可以在这里看到我使用threejs创建了一个关于流线、条纹、路径的2D教程：

[http://eon.sdsu.edu/~impellus/FLOW/](http://eon.sdsu.edu/~impellus/FLOW/)

但是我的感觉是使用threeJS的强大功能来制作2D交互动画并不自然。

那么请问三JS是否有二JS版本？我认为只是问这个问题应该是我正在寻找的证据，但让我更清楚。我正在寻找一个专门用于 2D 动画的 webGL 接口。是的，我可以使用threeJS，但我认为那将是一个错误。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-24T02:48:26.597

[pixi.js](https://github.com/GoodBoyDigital/pixi.js)刚刚发布 - 它是一个由 WebGL 支持的 2D 引擎以提高性能，但具有 2D 画布后备以实现兼容性。我自己没有使用过，但值得一试。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-17T22:22:42.850

查看 Jono Brandel 的 two.js！

[https://github.com/jonobr1/two.js](https://github.com/jonobr1/two.js)

很好的演示：http: [//jonobr1.github.io/two.js/](http://jonobr1.github.io/two.js/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-13T11:28:24.897

我还探索了 2D 引擎的使用，但最终只使用了 Three.js。如果您将相机设置为从不沿 Z 方向移动，并将所有视觉元素放在同一个 z = 恒定平面上，那么它就是一个 2D 引擎。

您唯一需要解决的是平面上元素的 z 顺序。一种方法是为每个元素分配一个稍微不同的 Z 值：

例如，如果您在 Z = 0 平面上绘制，则可以将元素 1 设置为在 Z = 0 处绘制，将元素 2 设置为在 Z = 0.0001 处绘制，因此元素 2 将始终绘制在元素 1 的顶部。

实现 z 顺序的更好方法是破解引擎并为每个元素设置绘制顺序，以强制一个元素在另一个元素之前绘制。

使用 three.js 的另一个问题是（在撰写本文时）它不能很好地处理 2D 精灵。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-26T17:59:03.907

我发现 IvanK 速度非常快并且功能齐全，它比 Pixijs 有更多的功能。

检查一下（它有带有自动回退支持的 webgl、canvas、svg 渲染器）。

[http://lib.ivank.net/?p=demos](http://lib.ivank.net/?p=demos)

我找到了另一个库，fabricjs.com，非常强大但速度很慢。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T21:17:17.090

试试这个 Javascript 游戏引擎列表：

[https://github.com/bebraw/jswiki/wiki/Game-Engines](https://github.com/bebraw/jswiki/wiki/Game-Engines)

其中一些专门用于带有精灵或 Box2d 物理的​​ 2D 动画。

还有用于绘制 2D HTML5 动画的商业产品，例如[http://www.sencha.com/products/animator/](http://www.sencha.com/products/animator/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-22T18:07:57.440

如果您正在寻找 2D 可视化，最好的选择是 D3 或 Two.js：

[https://d3js.org](https://d3js.org)

[https://two.js.org](https://two.js.org)

有时，您需要一把简单的刀来涂黄油。Three.js 在实现平滑图形方面非常像电锯。它更适合 3 维。

# python - Django - 连续的转储数据调用失败，即使单独运行时正常工作

> ID：11456760
> 
> 赞同：2
> 
> 时间：2012-07-12T16:53:19.913
> 
> 标签：python, django, backup

我在尝试在我的网站上设置自动备份时遇到了问题。问题归结为以下几点。

我打开 Python shell 并调用了两次 dumpdata 命令。它第一次**工作**，第二次返回**空列表**。之后，所有进一步的 dumpdata 调用都返回空列表：

```
>>> python manage.py shell
>>> from django.core.management import call_command
>>> call_command("dumpdata")
[{"pk": 1, (...) // lots of data //
>>> call_command("dumpdata")
>>> [] 
```

为了让它再次工作，我需要重新启动 python shell。

编辑：我使用 Django 1.4 和 Python 2.6

Edit2：我目前的假设是问题与此问题有关：[https](https://code.djangoproject.com/ticket/5423) ://code.djangoproject.com/ticket/5423 - 5 年前确定，根据 Django 1.5 发行说明，将在下一个版本中解决。有没有人知道如何在不改变机器上运行的 1.4 框架代码的情况下解决这个问题？

Edit3：但是整个数据库的 sql 转储只有 0.5 MB，这使得序列化内存不足的可能性不大。无论如何，在这种情况下我不会得到一个明确的错误吗？

Edit4：谜团解开了。正如 Tomasz Gandor 正确确定的那样，问题在于 shell 在一个事务中执行命令，并且在其中一个命令导致 DBError 之后，将忽略进一步的 DB 调用，如下所述：[https](https://code.djangoproject.com/ticket/10813) ://code.djangoproject.com/ticket/10813 . 为什么没有明确报告第一次转储数据期间的数据库错误对我来说仍然是个谜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:33:49.157

我看到 django 正在处理事务。

我在调试器下执行了一个简单的例子：

```
# test.py
from django.core.management import call_command
call_command("dumpdata")
print "\n---"
call_command("dumpdata")
print 
```

并称它为：

```
DJANGO_SETTINGS_MODULE=settings python test.py > log.txt 
```

我的 log.txt 以“---\n[]\n”结尾

在我发现的调试器中运行它之后 `django.core.management.commands.dumpdata.handle()` ，model.objects.all() 的深处一直返回 []。

我调用了model.objects.iterator()，得到了异常：

```
(Pdb) list(model.objects.iterator())
*** Error in argument: '(model.objects.iterator())'
(Pdb) p list(model.objects.iterator())
*** DatabaseError: DatabaseError('current transaction is aborted, commands ignored    until end of transaction block\n',)
(Pdb) 
```

因此，我编写了与交易本身有关的代码：

```
# test.py version 2.0!

#!/usr/bin/env python
# from django.core.management import call_command
import django.core.management as mgmt
from django.db import transaction

''' 
try:
    import settings # Assumed to be in the same directory.
except ImportError:
    import sys
    sys.stderr.write("Error: Can't find the file 'settings.py' in the directory containing %r. It appears you've customized things.\nYou'll have to run django-admin.py, passing it your settings module.\n(If the file settings.py does indeed exist, it's causing an ImportError somehow.)\n" % __file__)
    sys.exit(1)
'''

@transaction.commit_manually
def main():
    # mgmt.call_command('dumpdata', use_base_manager=True)
    mgmt.call_command('dumpdata')
    transaction.rollback()
    print
    print '---'
    print
    """ 
    mgmt._commands = None
    import sys
    reload(sys.modules['django.core.management.commands.dumpdata'])
    """
    mgmt.call_command('dumpdata')
    transaction.rollback()
    print

if __name__ == "__main__":
    main() 
```

这会吐出整个数据库 - 每次！

# html - IE7 将内容下推到浮动

> ID：11456763
> 
> 赞同：0
> 
> 时间：2012-07-12T16:53:38.340
> 
> 标签：html, css, internet-explorer, css-float

我有一个带有左侧垂直导航和主要内容区域的布局。主要内容区域有一些信息向右浮动，其内容可能比浏览器窗口宽。这适用于 Firefox/Chrome/IE8，但对于 IE7，宽内容会被推到导航菜单下方。

这里演示的问题：http: [//jsfiddle.net/UX2ac/](http://jsfiddle.net/UX2ac/)

带测试页

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style type="text/css">
.nav {
   float: left;
   width: 5em;
   background: lightgreen;
}
.content {
   background: lightyellow;
   margin-left: 5em;
}
.extraInfo {
   background: lightblue;
   float: right;
}
</style>
</head>
<body>
   <div class="nav">
      left<br/>
      nav<br/>
      menu<br/>
      items
   </div>
   <div class="content">
      <div class="extraInfo">
         Right info!
      </div>
      <p>Page Desc</p>
      <!-- <h3>Content</h3> -->
      <div style="white-space: nowrap">
         stuff stuff stuff stuff stuff stuff stuff stuff stuff 
      </div>
   </div>
</body>
</html> 
```

这在 IE8 中正确呈现为：
![在此处输入图像描述](../Images/6ed250eccebaf8168741cbbade4ef3e6.png)

但在 IE7 中，它显示为：
![IE7坏了](../Images/96c616d0683de731f82657778ef93ff4.png)

我知道我可以让“并排”的 div 与`display: inline-block`父级一起使用`white-space: nowrap`，但随后内容 div 的宽度会扩展为包含其内容的完整大小，从而将正确的 extraInfo div 推离屏幕。如果我用 2 单元格表替换 nav & content 也是一样。

我怎样才能让 IE7 将其渲染为与其他所有内容相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:57:38.423

添加`"display: inline-block;"`到内容元素的样式中，它将强制 IE7 呈现与其他浏览器相同的内容。

这是一个[更新的 jsfiddle](http://jsfiddle.net/UX2ac/2/)。

# c# - 如何等待 WCF 代理客户端准备好？

> ID：11456764
> 
> 赞同：3
> 
> 时间：2012-07-12T16:53:43.447
> 
> 标签：c#, .net, wcf

我试图弄清楚如何让我的 WCF 代理类在继续之前等待准备好，或者允许调用服务。

我试过这样的事情：

```
 _proxy = new WCFBlackjack(new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/blackjack/IWCFBlackjack"));

    while(!_proxy.State.Equals(CommunicationState.Opened)) {
        if(!_proxy.State.Equals(CommunicationState.Opening)) {
            try {
                _proxy.Open();
            } catch(EndpointNotFoundException enfe) {
                /* ... */
            }
        }
        System.Threading.Thread.Sleep(1);
    } 
```

但显然这不起作用，否则我不会在这里。起初它似乎可以工作，但 ChannelFactory 在 open 语句上抛出了 InvalidOperationException。

我是 WCF 的新手，也许我想太多关于 Sockets-esque 的东西，但我希望我的客户继续重试，直到端点可用或可以找到，并以某种方式触发 -相关事件或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:50:59.227

对于 EndpointNotFoundException，您可能会看到类似于“没有端点正在侦听...”的消息。发生的情况是，在您的 while 循环中，您在第一次通过时打开代理，处理错误，然后在第二次通过时您会收到 InvalidOperationException，它说：“通信对象 System.ServiceModel.Channels.ServiceChannel 不能处于打开状态时进行修改。”

如果您中止现有代理上的连接，您将无法使用它进行通信。关闭连接后，代理对象将被丢弃。解决方案是关闭现有代理并创建一个新代理。我在下面更新了您的代码：

```
_proxy = new WCFBlackjack(new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/blackjack/IWCFBlackjack"));

while(!_proxy.State.Equals(CommunicationState.Opened)) {
    if(!_proxy.State.Equals(CommunicationState.Opening)) {
        try {
            _proxy.Open();
        } catch(EndpointNotFoundException enfe) {
            /* ... */
            _proxy.Abort();
            _proxy = new WCFBlackjack(new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/blackjack/IWCFBlackjack"));
        }
    }
    System.Threading.Thread.Sleep(1);
} 
```

# gwt - ui.xml 中的弹性表格样式

> ID：11456767
> 
> 赞同：1
> 
> 时间：2012-07-12T16:53:56.537
> 
> 标签：gwt, flextable

我通过 Gwt UI binder 创建了一个 flextable。

我想要一个灰色的背景，行之间的水平白色边框，并且没有更多的边框。

我的最新尝试如下所示，但不显示白色水平

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
   xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:my='urn:import:mywidgets.client.ui.widgets'>
<ui:with field='res' type='myconstants' />

<ui:style>
   .table-style {
   background-color: silver;
   td { border-bottom: 1px solid #000 }
   }
</ui:style>  

<g:HTMLPanel>
    <g:FlexTable ui:field="table" borderWidth="0" styleName="{style.table-style}" />
</g:HTMLPanel>
</ui:UiBinder> 
```

我必须承认我对 css 的能力很弱，所以这个例子很可能是无效的。

编辑：JankiPanwala 回答了这个问题。

我只是在下面添加了我的最终样式表以供将来参考。

```
 .table-style{
  background-color: silver;
  border-collapse: collapse;
  }
  .table-style td{
  border-bottom:2px solid white;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T05:16:48.383

您可以尝试以下样式：

```
.table-style td{
  border-bottom:1px solid #000;
  background-color: silver;
} 
```

将**表格样式**应用于您的弹性表格

# javascript - 使用 JSON POST 请求

> ID：11456771
> 
> 赞同：13
> 
> 时间：2012-07-12T16:54:13.967
> 
> 标签：javascript, json, api, post

我正在尝试使用 JSON 向 API 发起 POST 请求。

我找到了一些示例代码，在我走得太远之前，我想让它工作，但我被卡住了......

```
<html>
<head>
<script type="text/javascript">
function JSONTest()
{
requestNumber = JSONRequest.post(
    "https://example.com/api/",
    {
        apikey: "23462",
        method: "example",
        ip: "208.74.35.5"
    },
    function (requestNumber, value, exception) {
        if (value) {
            processResponse(value);
        } else {
            processError(exception);
        }
    }
); 
}
</script>
</head>
<body>

<h1>My JSON Web Page</h1>

<button type="button" onclick="JSONTest()">JSON</button>

</body>
</html> 
```

这是一个 .html 文件，我在 chrome 中运行。当我点击按钮时没有任何反应...

我想我错过了一段解释 JSON 响应并可以显示的 javascript？否则还有其他建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-12T17:11:51.997

下面是一个使用 jQuery 的示例。希望这可以帮助

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<title>My jQuery JSON Web Page</title>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

JSONTest = function() {

    var resultDiv = $("#resultDivContainer");

    $.ajax({
        url: "https://example.com/api/",
        type: "POST",
        data: { apiKey: "23462", method: "example", ip: "208.74.35.5" },
        dataType: "json",
        success: function (result) {
            switch (result) {
                case true:
                    processResponse(result);
                    break;
                default:
                    resultDiv.html(result);
            }
        },
        error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
        }
    });
};

</script>
</head>
<body>

<h1>My jQuery JSON Web Page</h1>

<div id="resultDivContainer"></div>

<button type="button" onclick="JSONTest()">JSON</button>

</body>
</html> 
```

Firebug 调试过程

![Firebug XHR 调试过程](../Images/f47266854240ea62fcc0a99410cbd95d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:07:57.267

现代浏览器目前没有实现 JSONRequest（据我所知），因为它现在只是一个草案。我发现有人将它实现为可以包含在页面中的库：http: [//devpro.it/JSON/files/JSONRequest-js.html](http://devpro.it/JSON/files/JSONRequest-js.html)（请注意它有一些依赖项）。

否则，您可能想要使用另一个 JS 库，例如 jQuery 或 Mootools。

# python - 限制 Django Tastypie 中嵌套资源的数量？

> ID：11456772
> 
> 赞同：2
> 
> 时间：2012-07-12T16:54:14.197
> 
> 标签：python, django, tastypie

我正在尝试制定以下[示例](http://obroll.com/django-tastypie-one-to-many-fields-related-models-reverse-backward/)。我只想问，你如何限制嵌套资源中的结果数量？在给定示例中，我将如何仅获得前 10 个策略。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:39:21.643

唔，

您可以传递一个返回查询集的方法，而不是传递属性：

**学校资源**：

```
class SchoolResource(ModelResource):
    # fields.ToManyField('APP.api.RelatedResource', 'related name')
    policies = fields.ToManyField('places.api.PolicyResource', 
        attribute=lambda bundle: Policy.objects.filter(school=bundle.obj)[:10]
    )

    class Meta:
        resource_name = 'school'
        queryset = School.objects.all()
        allowed_methods = ['get']
        authorization = DjangoAuthorization()
        authentication = BasicAuthentication() 
```

看到这个： [http ://django-tastypie.readthedocs.org/en/latest/fields.html#tomanyfield](http://django-tastypie.readthedocs.org/en/latest/fields.html#tomanyfield)

我希望我有帮助=]

# jpa - 从 SequenceGenerator 获取下一个值

> ID：11456773
> 
> 赞同：3
> 
> 时间：2012-07-12T16:54:15.620
> 
> 标签：jpa, sequence-generators

我想利用 SequenceGenerator 并从序列生成器中获取下一个值。我想避免去数据库，并依靠序列生成器给我一个独特的价值。此外，我正在使用该值在显示字段中显示唯一 ID，而不保留对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-13T15:17:33.867

它适用于甲骨文：

```
Query q = em.createNativeQuery("SELECT nombreSecuencia.NEXTVAL FROM DUAL");

return (java.math.BigDecimal)q.getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T14:24:59.367

要仅获取下一个序列值，您可以使用以下命令：

```
Query q = em.createNativeQuery("select nextval('schema.sequence_name')");
return (Long)q.getSingleResult(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T10:49:46.443

如果我们忽略[JPA 价值生成策略](http://www.objectdb.com/java/jpa/entity/generated)，那么[SEQUENCE 策略](http://www.objectdb.com/java/jpa/entity/generated#The_Sequence_Strategy_)是您的最佳选择。

> 与 AUTO 和 IDENTITY 不同，SEQUENCE 策略会在新实体对象被持久化后立即生成一个自动值（即**在 commit 之前**）。当更早需要主键值时，这可能很有用。为了**尽量减少到数据库服务器的往返次数**，ID 被分组分配。
> 
> 每个分配中的 ID 数量由 allocationSize 属性指定。

如果您需要之前从序列中生成的 ID，只需持久化对象并检索其 ID。稍后您可以将其从持久性上下文中删除。

* * *

我不确定为什么在坚持之前需要身份证。而且我认为从序列生成器中获取价值是没有意义的。我不建议您弄乱生成的值，也不建议您对 id 使用手动值。使用开箱即用的功能。

# spring - Spring Security 身份验证日志记录

> ID：11456774
> 
> 赞同：5
> 
> 时间：2012-07-12T16:54:19.607
> 
> 标签：spring, logging, spring-security, log4j

我正在使用 Spring Security 3.1 对网站的用户进行身份验证。当由于 Spring Security 无法连接到数据库而导致登录失败时，我的日志中会出现以下语句：

```
2012-07-12 11:42:45,419 [ajp-bio-8009-exec-1] DEBUG      org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Authentication request failed: org.springframework.security.authentication.AuthenticationServiceException: Could not get JDBC Connection; nested exception is java.sql.SQLException: Connections could not be acquired from the underlying database! 
```

我的问题是，为什么这是 DEBUG 语句而不是 ERROR？为了找到实际的错误，我必须翻阅大量的调试语句。

编辑

这是我的身份验证管理器：

```
<bean id="securityDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/securityDS"/>
    <property name="resourceRef" value="true"/>
</bean>

<bean id="encoder" class="org.springframework.security.crypto.password.StandardPasswordEncoder" />

<security:authentication-manager>
    <security:authentication-provider>
        <security:password-encoder ref="encoder" />
        <security:jdbc-user-service 
            data-source-ref="securityDataSource"
            authorities-by-username-query="SELECT username, authority FROM login WHERE username = ?"
            users-by-username-query="SELECT username, password, enabled FROM login WHERE username = ?"
        />        
    </security:authentication-provider>
</security:authentication-manager> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-17T10:00:32.107

我的解决方案：

```
@Component
public class AuthenticationEventListener implements ApplicationListener<AbstractAuthenticationEvent> {

   private static Logger logger = Logger.getLogger(AuthenticationEventListener.class);

   @Override
   public void onApplicationEvent(AbstractAuthenticationEvent authenticationEvent) {
      if (authenticationEvent instanceof InteractiveAuthenticationSuccessEvent) {
         // ignores to prevent duplicate logging with AuthenticationSuccessEvent
         return;
      }
      Authentication authentication = authenticationEvent.getAuthentication();
      String auditMessage = "Login attempt with username: " + authentication.getName() + "\t\tSuccess: " + authentication.isAuthenticated();
      logger.info(auditMessage);
   }

} 
```

不需要其他配置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T00:54:22.550

该消息打印在`AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication`：

```
protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,
        AuthenticationException failed) throws IOException, ServletException {
    SecurityContextHolder.clearContext();

    if (logger.isDebugEnabled()) {
        logger.debug("Authentication request failed: " + failed.toString()); 
```

身份验证失败的方式有很多种，包括基于用户输入。例如，在 中`AbstractUserDetailsAuthenticationProvider.authenticate`，`BadCredentialsException`如果未找到用户名，则可能会抛出 a：

```
 try {
            user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);
        } catch (UsernameNotFoundException notFound) {
            logger.debug("User '" + username + "' not found");

            if (hideUserNotFoundExceptions) {
                throw new BadCredentialsException(messages.getMessage(
                        "AbstractUserDetailsAuthenticationProvider.badCredentials", "Bad credentials"));
            } else {
                throw notFound;
            }
        } 
```

`AbstractAuthenticationProcessingFilter`由于身份验证失败可能有合理的原因，因此记录错误是没有意义的。如果存在系统错误，则应该在下游记录该错误。

我怀疑问题出在`DaoAuthenticationProvider`（请参阅我的内联评论）：

```
protected final UserDetails retrieveUser(String username, UsernamePasswordAuthenticationToken authentication)
        throws AuthenticationException {
    UserDetails loadedUser;

    try {
        loadedUser = this.getUserDetailsService().loadUserByUsername(username);
    }
    catch (DataAccessException repositoryProblem) {
        // *** ERROR SHOULD BE LOGGED HERE ***
        throw new AuthenticationServiceException(repositoryProblem.getMessage(), repositoryProblem);
    } 
```

也许应该在这里记录一个错误——你可以用 Spring 记录一个 JIRA 来请求它。尽管他们可能假设每个人都将提供自定义`UserDetailsService`并会在那里捕获/记录他们自己的异常。如果你正在使用`JdbcDaoImpl`它不会。我认为`JdbcDaoImpl`旨在作为一个例子，并不强大。根据文档：

> 好消息是我们提供了许多 UserDetailsS​​ervice 实现，包括一个使用内存映射 (InMemoryDaoImpl) 和另一个使用 JDBC (JdbcDaoImpl)。然而，大多数用户倾向于编写自己的实现，他们的实现通常只是位于代表其员工、客户或应用程序其他用户的现有数据访问对象 (DAO) 之上。

# ms-access - ComboBox 不允许我选择一个项目

> ID：11456782
> 
> 赞同：10
> 
> 时间：2012-07-12T16:54:45.700
> 
> 标签：ms-access

对于您访问兽医来说，这应该是一个快速的方法，但是通过尝试不同的属性和谷歌搜索，我无法解决它：

我的表单上的组合框不允许我选择项目/值。我单击它，它已正确填充，但我无法选择任何项目。此组合框的控制源设置为来自查询（表单所基于）的表中的字段。此组合框的行源设置为定义允许选择的表（例如“1”、“2”、“3”、“4”或“5”）。因此，我想将数据限制为仅在组合框的行源中指定的那些项目 - 这是我的解决方案。

表单设置为允许编辑、添加等。组合框控件未设置为“锁定”。

想到任何解释/解决方案吗？

编辑：如果控件是文本框，这也适用 - 控件源一定有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:20:31.717

在 Form_Load() 事件中调用了一个方法，该方法遍历控件的表单并默认锁定它们，除非满足特定条件。这对那些开发数据库的人来说是一个教训，这些数据库将来会被继承来评论你的代码，以免新人很头疼！

# c# - .net Winform 的应用程序的 app.config 文件驻留在哪里......？

> ID：11456784
> 
> 赞同：0
> 
> 时间：2012-07-12T16:54:52.373
> 
> 标签：c#, winforms, app-config

根据此链接，我们可以在 app.confi 文件中添加节点。

[http://msdn.microsoft.com/en-us/library/ff602939.aspx](http://msdn.microsoft.com/en-us/library/ff602939.aspx)

那么，该文件存在于哪里？如果我给了某人一些 exe，我以后可以给他一个 app.config 并要求他们放置在正确的位置 - 所以，该应用程序相应地运行..？

我的应用程序是 C# .net 2.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:56:27.953

在与exe相同的文件夹中。请注意，app.config 文件应与 exe 同名，并在末尾添加 .config。也就是说，如果你有一个程序`fooBar.exe`，配置文件应该命名为`fooBar.exe.config`.

# liferay - 启动服务器时出现lucene FileNotFoundException

> ID：11456785
> 
> 赞同：1
> 
> 时间：2012-07-12T16:55:02.013
> 
> 标签：liferay, vaadin

我在启动 Liferay 时不断收到 FileNotFoundExceptions。

有没有人遇到过这个问题，我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:02:11.153

好的，找到解决方案：

在重建之前删除索引。（或者无效段将用于下一次索引更改，您将看到上面的错误）

它们位于以下目录下：*YourinstalledDirectory* \liferay-portal-6.0.6\data\lucene 并删除所有目录和文件。在执行此操作之前，请确保服务器已停止。

# android - 在android中更新日期状态栏图标

> ID：11456786
> 
> 赞同：0
> 
> 时间：2012-07-12T16:55:07.167
> 
> 标签：android, date, notifications, statusbar

我开发了一个应用程序，将状态栏中的日期显示为图标（每天的图像，1,2,3，...），现在我的问题是当日期更改时我感觉不到它。有什么方法可以捕捉日期的变化并更新状态栏图标。

```
 mNM  =(NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    int resId = getResources().getIdentifier("p_"+Day_Num, "drawable", getPackageName());
    Notification notification = new Notification(resId, "", System.currentTimeMillis());
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
    contentView.setImageViewResource(R.id.image, resId);
    contentView.setTextViewText(R.id.title, Day);
    contentView.setTextViewText(R.id.text, Date);
    contentView.setOnClickPendingIntent(R.id.imageView1, PendingIntent.getActivity(this, 0, new Intent(this, Option.class),0));
    notification.contentView = contentView;
    Intent notificationIntent = new Intent(this, Option.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.contentIntent = contentIntent;
    notification.defaults = Notification.FLAG_NO_CLEAR;
    mNM.notify(NOTIFICATION, notification); 
```

当我使用服务 Calservice.java 时：

```
 public void onCreate() {
      //code to execute when the service is first created
       alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        Intent intent = new Intent(ALARM_REFRESH_ACTION);
        pendingIntent = PendingIntent.getBroadcast(this, 0, intent,
                PendingIntent.FLAG_CANCEL_CURRENT);
        alarmReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                alarmCounted++;
                Message msg = myHandler.obtainMessage(ALARM_CODE, intent);
                myHandler.sendMessage(msg);
            }
        };
        IntentFilter filter = new IntentFilter(ALARM_REFRESH_ACTION);
        registerReceiver(alarmReceiver, filter);
        mNM  =(NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        utils.getCurrentShamsidate();
        startRepeating();
   }

       public void startRepeating() {
        // We get value for repeating alarm
        int startTime =1000;
        long intervals =1000;
        // We have to register to AlarmManager
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.MILLISECOND, startTime);
        // We set a repeating alarm
        alarmManager.setRepeating(AlarmManager.RTC, calendar
                .getTimeInMillis(), intervals, pendingIntent);
    }
            private void showNotification() {

    mNM.cancelAll();
    utils.getCurrentShamsidate();
    int resId = getResources().getIdentifier("p_"+Day_Num, "drawable", getPackageName());
    Notification notification = new Notification(resId, "", System.currentTimeMillis());
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
    contentView.setImageViewResource(R.id.image, resId);
    contentView.setTextViewText(R.id.title, Day);
    contentView.setTextViewText(R.id.text, Date);
    contentView.setOnClickPendingIntent(R.id.imageView1, PendingIntent.getActivity(this, 0, new Intent(this, Option.class),0));
    notification.contentView = contentView;
    Intent notificationIntent = new Intent(this, Option.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.contentIntent = contentIntent;
    mNM.notify(NOTIFICATION, notification);
  }
    public void doscan() {
            String Day = Day_Num;
            utils.getCurrentShamsidate();
            if(!Day_Num.equals(Day))
                showNotification();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:23:21.587

@hamhame，你为什么不试试AlarmManager，在每天早上12:00 设置闹钟。通过这种方式，您可以设置您的操作并很容易地做事..

此[链接](https://stackoverflow.com/a/11085675/519718)可以帮助您更多地了解如何为 24 小时的时间间隔设置重复警报。

要收听**用户更改时间/日期，** [请参阅此答案](https://stackoverflow.com/a/6230951/519718)。

您需要通过清单（如果想一直收听）注册一个接收器（上面链接中给出了所需的操作）或根据您的需要在活动/服务中注册。在接收器中，您将通过获取当前时间了解已设置的时间，并且也可以修改您的 AlarmReceiver。

# freebsd - waf 在 freeBSD 上失败 - 回溯（最近一次通话最后一次）

> ID：11456790
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:55:32.223
> 
> 标签：freebsd, waf, traceback

我正在尝试在 freeBSD 7.1 上运行 waf 但它失败了：-

```
junos-olive# ./waf
Traceback (most recent call last): 
  File "./waf", line 148, in <<module>module>
junos-olive# 
```

第 148 行是：-

```
 147:import Scripting
    148:Scripting.prepare(t, cwd, VERSION, wafdir)
    149:sys.exit(0) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:54:15.097

感谢回复，问题是python版本。我已经通过 macports 安装了 python，但我不知道为什么，它安装了一个非常旧的 python。当我更新它时，一切都开始工作了。

# zend-framework - Zend Framework 2 中的通用模块路由

> ID：11456795
> 
> 赞同：1
> 
> 时间：2012-07-12T16:55:53.697
> 
> 标签：zend-framework, routing, zend-framework2

我们将 ZF2 用于具有两个模块（前端和后端）的网站项目。我们希望为这两个具有以下规范形式的模块生成 URL：

`/module/controller/action`

到目前为止，我们尝试了这个解决方案，但我们无法让它发挥作用

```
'router' => array(
    'routes' => array(
        'application' => array(
            'type'    => 'Segment',
            'options' => array(
                'route' => '/[:module[/:controller[/:action]]]',
                'constraints' => array(
                    'module'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'controller' => '[a-zA-Z][a-zA-Z0-9_-]*', 
                    'action'     => '[a-zA-Z][a-zA-Z0-9_-]*'
                ),
                'defaults' => array(
                    'module'     => 'Front',
                    'controller' => 'Front\Controller\Index',
                    'action'     => 'index'
                )
            )
        ),
    ),
), 
```

我们希望 URL 看起来像这样`/modulename/controllername`，而不需要为每个模块创建特定的路由，类似于 ZF1 的旧默认路由。有可能这样做还是有特定于zf2的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:51:11.873

在新的 ZF2 Beta5 中，有一个新的侦听器 Zend\Mvc\ModuleRouteListener，因此您必须在路由中添加一个 __NAMESPACE ***__*****键****，***这会将命名空间添加到控制器，因此，您将拥有一个通用路由.*

# swt - 自定义复选框

> ID：11456802
> 
> 赞同：1
> 
> 时间：2012-07-12T16:56:11.483
> 
> 标签：swt, eclipse-rcp, jface

我在想是否有办法将这样的样式应用于[swt](http://awardwinningfjords.com/2009/06/16/iphone-style-checkboxes.html)复选框。
我寻找自定义组件，但没有找到任何东西。
谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:17:01.773

您可以使用以下内容： [使用 SWT 创建自定义按钮](https://stackoverflow.com/questions/1779727/create-a-custom-button-with-swt)

作为起点。在其中，`PaintListener`您可以按照您希望的方式绘制按钮。

这是我刚刚尝试过的一个小例子：

```
import org.eclipse.swt.events.MouseAdapter;
import org.eclipse.swt.events.MouseAdapter;
import org.eclipse.swt.events.MouseEvent;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Composite;

public class ImageButton extends Canvas {
    private boolean checked = false;
    private final ImageButton button = this;

    public ImageButton(Composite parent, int style) {
        super(parent, style);

        this.addPaintListener(new PaintListener() {
            @Override
            public void paintControl(PaintEvent e) {
                if(checked)
                {
                    e.gc.drawImage(Icons.ON, 0, 0);
                }
                else
                {
                    e.gc.drawImage(Icons.OFF, 0, 0);
                }
                button.setSize(WIDTH_OF_IMAGE, HEIGHT_OF_IMAGE);
            }
        });
        this.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseUp(MouseEvent e) {
                checked = !checked;
                redraw();
            }
        });
    }
} 
```

其中`Icons.ON`和`Icons.OFF`是两个图像，WIDTH_OF_IMAGE 和 HEIGHT_OF_IMAGE 是您使用的图像的宽度和高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:08:20.467

OPAL 小部件库具有这种按钮。

[http://code.google.com/a/eclipselabs.org/p/opal/wiki/SwitchButton](http://code.google.com/a/eclipselabs.org/p/opal/wiki/SwitchButton)

# javascript - 有没有办法撤消目标上的功能？

> ID：11456809
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:56:45.113
> 
> 标签：javascript, jquery

我正在尝试对页面上的所有链接执行一个功能，然后在满足条件时撤消该功能。

```
$('a').click(function(){
    //some function
  if ( /*some condition*/ ) {
    $(this).//undo above function
  }
}); 
```

注意：我没有尝试使用`unbind()`，我试图让功能撤消本身。如果这有点不清楚，我提前道歉 - 如果您不确定，请询问我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:59:41.653

你有没有尝试过：

```
$('a').click(function(){
    //some function
  if ( /*some condition*/ ) {
    $(this).click(function() { return false; });
  }
}); 
```

**编辑：**还有另一种相当普遍的方式，起初我并没有真正想到。由于您正在对所有`<a>`标签执行此操作，因此您可以使用`delegate`和`undelegate`函数来注册事件。在更现代的 jquery 版本中，这是通过`.on`and`.off`方法完成的：

```
$("body").on("click", "a", function() {
    //some function
    if ( /*some condition*/ ) {
        $(this).off("click");
    }
}); 
```

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)
[http://api.jquery.com/undelegate/](http://api.jquery.com/undelegate/)
[http://api.jquery.com/on/](http://api.jquery.com/on/)
[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:13:22.867

是的，有办法。然而，它并不像调用一个`undo`能逆转你刚才所做的事情的魔法函数那么简单。您需要自己编写代码，并执行与刚刚执行的步骤相反的步骤。

所以，如果代替`// some function`，你实际上有：

```
$(this).addClass('blue'); // add the class 'blue' to the link 
```

然后为了撤消你必须打电话

```
$(this).removeClass('blue'); 
```

将类`blue`添加到链接中。

显然，你对元素做的事情越复杂，对`undo`他们来说就越难。例如，如果您将元素移动到新位置，那么您需要在这样做之前存储其当前位置，这样您就知道在需要时将其移回何处。

在某些情况下，如果您只是在元素本身上操作类、属性、事件处理程序等，那么在进行任何更改之前克隆元素可能会更容易。这样，“撤消”该功能就像用您在更改之前获取的克隆替换当前元素一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:42:02.627

对于像“addClass”这样的简单情况，您可以轻松找到相反的功能。对于更复杂的交互，建议编写一个 do-function 和一个 undo-function。要管理这一切，您可以使用撤消控制器。看看我的撤消管理器，它可能会给你一个如何处理这个的方向。或者您可以将其插入您的代码中。

[https://github.com/ArthurClemens/Javascript-Undo-Manager](https://github.com/ArthurClemens/Javascript-Undo-Manager)

# c# - 发送电子邮件列表而无需转至垃圾邮件且不会对服务器性能产生影响

> ID：11456813
> 
> 赞同：-1
> 
> 时间：2012-07-12T16:56:56.387
> 
> 标签：c#, performance, email, design-patterns, spam

我们正在用 C# 实现营销应用程序，在这个应用程序中，我们需要向用户发送至少 1000 封电子邮件，我有一个电子邮件发件人类。我有两个重要问题：

1.  如何在不进入用户的垃圾邮件文件夹的情况下发送这些电子邮件？
2.  有没有实现这种类的设计模式，我不喜欢为每个用户实例化电子邮件类，我想一个一个地发送电子邮件，线程安全并且对服务器没有性能影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:23:35.637

正如 Beska 所说，您可以自行决定是否将电子邮件内容视为垃圾邮件。不要只设置密件抄送字段（即收件人字段不应为空），也不要只发送图像作为内容（也添加一些纯文本）。有关更多提示，请参见此处：http: [//kb.mailchimp.com/article/how-spam-filters-think/](http://kb.mailchimp.com/article/how-spam-filters-think/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:27:12.730

除了我的评论（我说让电子邮件不显示为垃圾邮件不是编程问题，而是营销问题），一般来说，您必须正确设置一些东西才能让您的电子邮件有一个很好的机会无论您如何发送它们，都无法通过。

杰夫（是的，杰夫）有一篇关于这个的[博客文章，为你提供了一个很好的清单。](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)其中大部分不是编程，而是服务器设置，但根据您的情况，它可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:43:39.740

我确实发现单音设计模式最常用于通过应用程序发送电子邮件。它可以防止对本书“ASP.NET 3.5 应用程序架构和设计”第 134 页进行类的多实例化。防止将电子邮件发送到垃圾邮件还有一些其他的做法，重要的是我们应该在电子邮件中有退订链接，并且电子邮件正文应该有动态内容。这里还有一些其他技术：[如何发送电子邮件并避免它们被归类为垃圾邮件](https://serverfault.com/questions/48428/how-to-send-emails-and-avoid-them-being-classified-as-spam)

# magento - Magento - 可配置的产品选项图像

> ID：11456819
> 
> 赞同：4
> 
> 时间：2012-07-12T16:57:18.537
> 
> 标签：magento, option

我目前正在为我的第一个 magento 构建中显示的产品选项获取图像。我已经为捆绑产品找到了[这个，如下所示：](https://stackoverflow.com/q/11318915/653929)

![截屏](../Images/e3bbb61f0b6487277bad5d403d06678e.png)

当构建选择的选项时，我正在获取相关图像（例如样本）的 url。现在我正在尝试对可配置产品做同样的事情，但它似乎并不那么简单。

可配置产品由代表可用选项的每次迭代的简单产品构建而成。伟大的。我显然可以为每个简单的产品上传图片，这将是解决此问题的良好开端。

例如：椅子有 3 种内饰和 2 种扶手选择（6 种简单产品）。对于椅子 2/b，我上传了内饰样本 2 和扶手样本 b，并相应地标记它们。构建选项后，我会通过标签获取与每个简单产品相关联的图像 url（可能会获取该标签的所有图像并删除重复项或其他内容？）...

在 Magento 中，我看到：

在**主题/目录/产品/视图/类型/选项/configurable.phtml**

```
<?php foreach($_attributes as $_attribute): ?>
    ..// 
    <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select">
        <option><?php echo $this->__('Choose an Option...') ?></option>
    </select>
    ..//
</div>
<?php endforeach; ?>
<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
</script> 
```

`js/varien/configurable.js`与捆绑包不同，可配置的产品选择/选项通过 javascript (in )注入页面。然后依赖这个类`getJsonConfig()`来提供之后的所有信息。

此时，似乎我应该能够从该对象获取一个简单的产品图片 url 信息。尽管我在configurable.js 中根本看不到处理图像的逻辑。 **我将如何获取这些 url 并将它们与相关选项相关联？**

任何关于我应该如何进行的建议都会很棒。

干杯

* * *

......还有：这看起来真的是绝对必要的功能。为什么 magento 不支持开箱即用的东西？

* * *

## 更新

对于那些对类似事物感兴趣的人，我终于弄清楚了。

我处理此问题的第一种方法 - 从子产品中获取图像在一定程度上起作用，但在尝试获取多组属性的唯一图像 url 时变得令人费解。这也意味着必须为简单产品中的每个选项提供图像，因此 - 大量不必要的劳动力。

我最终使用了@Greg Demetrick 建议的[免费插件（进行了一些修改）。](http://www.johannreinke.com/en/2012/02/05/magento-add-images-to-product-attribute-options/)它是一个非常可靠的小模块，它允许将图像 url 与任何属性选项 / 以及一些获取它们的方法相关联。

我的最终解决方案看起来有点像这样：

**目录/产品/视图/类型/选项/configurable.phtml**：

```
<?php foreach($_attributes as $_attribute): ?>

  // markup for the attribute

    <script type="text/javascript">
        //<![CDATA[
        var attribute_data_<?php echo $_attribute->getAttributeId() ?> = {};
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.id = '<?php echo $_attribute->getAttributeId() ?>';
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.title = '<?php echo $_attribute->getLabel() ?>';
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.data = {};
        <?php 
        $a = Mage::getModel('eav/config')->getAttribute('catalog_product', $_attribute->getAttributeId() );
        $helper = Mage::helper('attributeoptionimage');
        foreach ( $a->getSource()->getAllOptions(true) as $option): ?>
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.data.option_<?php echo $option['value'] ?> = {};
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.data.option_<?php echo $option['value'] ?>.val = '<?php echo $option['value'] ?>';
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.data.option_<?php echo $option['value'] ?>.imageurl = '<?php echo $helper->getAttributeOptionImage($option['value']); ?>';
            attribute_data_<?php echo $_attribute->getAttributeId() ?>.data.option_<?php echo $option['value'] ?>.imgtitle = '<?php echo $option['label']; ?>';
        <?php endforeach; ?>
        //]]>
    </script>

    <?php endforeach; ?> 
```

这将打印在标记中，每个属性一组。效果很好，但返回属性的所有选项，而不仅仅是为产品选择的选项（`getJsonConfig()`对象已存储的数据）。所以，然后我只是`attribute_data_xxx`针对 测试我的对象`spConfig`，并将唯一的匹配选项发送到我的控制器脚本。

扩展`getJsonConfig`以获取属性 url 可能也可以工作......

无论如何 - 这里的关键点是将图像 url 与属性选项本身（而不是产品）相关联。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T16:38:44.910

[`getUsedProducts()`使用方法](http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Model_Product_Type_Configurable.html#getUsedProducts)可以得到可配置中使用的简单产品数组。此方法不是标准产品模型的一部分，但可以在 中找到`app/code/core/Mage/Catalog/Model/Product/Type/Configurable.php`，因此您需要首先使用 获取可配置产品模型`getTypeInstance()`。该方法接受一个参数，说明您是否希望将类型模型作为单例返回（我做过）。

```
foreach ($_product->getTypeInstance(true)->getUsedProducts() as $simpleProduct) {
    // From this you should be able to get the image url
} 
```

**更新**

在`spConfig`由创建的数组中，`Mage_Catalog_Block_Product_View_Type_Configurable::getJsonConfig()`有一个`options`包含特定于该可配置选项的 product_ids 的数组。

```
spConfig :
  attributes : {
    603 : {
      id      : 603,
      code    : part_state,
      label   : "Part State",
      options : [
        {
          id       : 648,
          label    : Harvested,
          price    : 0,
          products : [204379]   // <-- Simple Product ID
        },
        {
          id       : 647,
          label    : New,
          price    : 0,
          products : [224333]
        }]
    },
  ... 
```

此时，您可以：

1.  扩展`getJsonConfig`为包含一个简单的产品图片 URL，或者
2.  创建简单产品 ID 到图像 URL 的映射

我会给你一个#2的例子，这样你就可以看到你可能会使用什么功能。

```
$spImages = array();
foreach ($this->getAllowProducts() as $_sp) {
    $spImages[$_sp->getId()] = 
        (string)$this->helper('catalog/image')
            ->init($_sp, 'small_image')
            ->resize(40,40);
}
// It is necessary to cast the URL to a `string` because the actual work done by
// Mage_Catalog_Helper_Image happens in the `__toString()` method... weird!

<script type="text/javascript">
    var spImages = <?php echo json_encode($spImages); ?>;
</script> 
```

现在您可以将图像 URL 与简单的产品 ID 关联起来，您需要根据当前选择的选项更新图像。Magento`Product.Config`有一个`configureElement()`在更改时触发的方法`<select class="super-attribute-select">`，所以我会利用它。如果您不喜欢这样做，那么您已经获得了`spConfig.config`可以`spImages`编写自己的`onChange`事件处理程序的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:05:41.087

我认为您将在这里遇到的最终问题是属性中的选项没有与之关联的图像。您可能需要安装诸如 GoMage 的高级导航之类的东西，它将为您添加该功能。在基本 Magento 中，图像仅与产品相关联，这就是为什么您可以将它们提取为捆绑产品的原因。

一旦有了图像选项，您应该能够从 Magento 中添加的表格中按产品提取选项图像，在加载时显示每个选项的基本图像，然后在选择时为其他图像放入 JS 交换. 我的建议是下载下面的免费“带有选项的图像”模块并安装它。这将添加一个新的帮助类来显示图像，并且可能还会为您提供交换所需的代码。

GoMage 模块：[http ://www.gomage.com/extensions/searching-optimization/gomage-advanced-navigation.html/](http://www.gomage.com/extensions/searching-optimization/gomage-advanced-navigation.html/)

类似功能的免费版本：http: [//www.johannreinke.com/en/2012/02/05/magento-add-images-to-product-attribute-options/](http://www.johannreinke.com/en/2012/02/05/magento-add-images-to-product-attribute-options/)

# sql - 我不想在输出中显示重复的行

> ID：11456820
> 
> 赞同：0
> 
> 时间：2012-07-12T16:57:19.950
> 
> 标签：sql

更新：

以下是我的查询：

```
 $questionquery = "
SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
       q.QuestionMarks 
  FROM Answer an 
  INNER JOIN Question q ON q.AnswerId = an.AnswerId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 
      WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
      GROUP BY q.QuestionId, q.SessionId, q.QuestionContent, o.OptionType, q.NoofAnswers, Answer, r.ReplyType, q.QuestionMarks
      ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
    "; 
```

上述查询将提供对字符串的搜索，并在“问题”列下输出包含该字符串的行。

我有一个您可以在我的应用程序上访问的[URL](http://helios.hud.ac.uk/u0867587/Mobile_app/Text15.php)，请按照以下步骤使用该应用程序：

*   步骤 1：当您打开应用程序时，您会在页面上看到一个绿色的加号按钮，单击它会显示一个模态窗口。
*   第2步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。

现在，您可以看到，如果您仔细阅读，有些行是完全重复的，例如每列中的内容完全相同（相同的问题、答案、标记、回复数等）

这就是我想要摆脱的。我不希望它显示重复的行，而只是显示其中一个行，这样它就不会输出重复的行。我需要改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:05:32.870

***编辑：***根据您的问题的更改

根据您的示例数据，它只是这个..

```
SELECT
  `Question`,
  `Answer`,
  `Number of Marks`
FROM
  yourQuery
GROUP BY
  `Question`,
  `Answer`,
  `Number of Marks` 
```

但这让我怀疑还有什么你没有告诉我们的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:02:05.697

为了不显示重复的行，除非我遗漏了什么，您只需要添加 DISTINCT 子句，如下所示：

```
$questionquery = "
SELECT DISTINCT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers,
    GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
    q.QuestionMarks 
FROM Answer an 
INNER JOIN Question q ON q.AnswerId = an.AnswerId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
GROUP BY q.QuestionId, q.SessionId, q.QuestionContent, o.OptionType, q.NoofAnswers, Answer, r.ReplyType, q.QuestionMarks
ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:14:29.460

按 q.SessionId 和 Answer 分组的任何特殊原因？如果您按未选择的字段 (q.SessionID) 分组并且按 Answer 分组听起来是错误的，因为它是聚合函数的结果，我希望您的结果集中会有重复的行。

# android - 定时器线程刷新android上的片段

> ID：11456821
> 
> 赞同：1
> 
> 时间：2012-07-12T16:57:25.427
> 
> 标签：android, fragment

我在 android 中实现了一个线程，它每 1 秒刷新一次片段（一些文本列表）。

它在线程调用片段方法时给出运行时错误，。这是我的代码

```
public class RunThreadExtended extends Activity implements Runnable
{
public void run() {

 while(true)
 {  try {
    Thread.sleep(1000);
    AndroidListFragmentActivity.strup++;
    MyListFragment1 fragmentB = (MyListFragment1)getFragmentManager().findFragmentById(R.id.fragment1);
    fragmentB.updatefrag();
} catch (InterruptedException e) {
    e.printStackTrace();
}
  }}} 
```

如果我从 Mainactivity 调用片段方法，一切正常，因为我需要在后台每 5 秒刷新一次线程，我已经像这样实现了，但它不起作用..请建议解决方案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:05:42.773

我认为你必须在

```
yourActivity.runOnUiThread(new Runnable() {
public void run()   { /* here */ }); 
```

或通过 a`Handler`或通过 a`post()`或在 an`AsyncTask`中`onProgress()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:07:50.717

您遇到错误是因为您在非 UI 线程中执行 UI 操作。如果您将代码更改为这样的内容，则不会出现该错误：

```
public class RunThreadExtended extends Activity implements Runnable
{
   public void run() {

   while(true)
   {  try {
       Thread.sleep(1000);
       AndroidListFragmentActivity.strup++;
       RunThreadExtended.this.runOnUiThread(new Runnable() { //Use the runOnUIThread method to do your UI hanlding in the UI Thread
           public void run()   {
               MyListFragment1 fragmentB = (MyListFragment1)getFragmentManager().findFragmentById(R.id.fragment1);
               fragmentB.updatefrag();
           }
       });
   } catch (InterruptedException e) {
        e.printStackTrace();
   }
   }}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:08:15.143

除了 UI 线程，您不能在任何线程上更新 UI。如果要更新线程，可以使用每秒发送一条消息的处理程序（处理程序处理主 UI 线程上的所有消息）。

看

[从 Thread 更新 UI](https://stackoverflow.com/questions/4369537/update-ui-from-thread)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T23:21:52.990

您还可以在线程中广播 Intent (context.sendBroadcast(intent)) 并在 Activity 中接收它：[Broadcast Receiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T20:35:20.393

也许您可以在片段中完成所有工作。这是步骤。

1.  在片段中定义 Handler 和 Runnable。
2.  在 onCreate() 和 onAttach() 中创建 Handler 和 Runnable
3.  在 onStart() 中的 Handler 中发布 Runnable 作业。
4.  在 onStop() 中将 Runnable 作业从 Handler 中移除。

下面是代码片段。

```
public class JobDetailFragment {

private Handler m_Handler;
private Runnable m_Runnable;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    m_Runnable = new Runnable() {

        @Override
        public void run() {

            updateJobStatus();
        }
    };
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    m_Handler = new Handler();
}

@Override
public void onStart() {
    super.onStart();

    if (m_Handler != null) {
        m_Handler.postDelayed(m_Runnable, PrinterOnUIConstants.PRINT_JOB_AUTO_UPDATE_INTERVAL);
    };
}

@Override
public void onStop() {
    super.onStop();

    // cancel the potential enqueued callback.
    if (m_Handler != null) {
        m_Handler.removeCallbacks(m_Runnable);
    }
} 
```

# r - 如何从使用内联 C++ 过渡到制作自己的 R 包？

> ID：11456824
> 
> 赞同：9
> 
> 时间：2012-07-12T16:57:30.260
> 
> 标签：r, package, inline, rcpp

这里发生了两件事：（1）我只是在学习如何使用 Rcpp 和朋友让我的 R 代码更快，（2）我以前从未构建过 R 包。

我已经使用了`inline`下来。很棒的包裹。爱它。但是，我似乎无法使用使用`inline`with开发的任何代码`package.skeleton`来制作 R 包。

这是一个最小的例子：

## 第 1 步：制作 R 脚本

```
#############################
# File : build-R-pacakge.R  #
#############################
require(inline)
require(Rcpp)
require(RcppArmadillo)

# Define a simple cxxfunction
plus.two.cpp.src <- '
    arma::mat U = Rcpp::as<arma::mat>(UmatrixR);
    return(Rcpp::wrap(U+2));
'
plus.two.cpp <- cxxfunction(
             signature(UmatrixR="numeric"),
             body=plus.two.cpp.src,
             plugin="RcppArmadillo")

# Define the analogous R function
plus.two.r <- function( x ) {
  return( x + 2 )
} 
```

## 第 2 步：将其构建为 R 包

在新的 R 会话中运行：

```
source('build-R-package.R')
RcppArmadillo.package.skeleton(name='inlineExample',
                 list=c('plus.two.cpp', 'plus.two.r'),
                 code_files='build-R-package.R') 
```

然后删除`man/*.Rd`文件，因为 R 没有设置“正常工作”的默认值。

```
$ rm inlineExample/man/*.Rd 
```

并运行：

```
$ R CMD build inlineExample/
<< snip >> 
$ R CMD check inlineExample_1.0.tar.gz 
<< snip >>
$ R CMD INSTALL inlineExample_1.0.tar.gz 
<< snip >> 
```

除了一些抱怨缺少文档外，所有这些都成功完成。

## 第 3 步：尝试一下

然后在新的 R 会话中尝试一下：

```
> require(inlineExample)
Loading required package: inlineExample
Loading required package: Rcpp
Loading required package: RcppArmadillo
Loading required package: inline
>
> plus.two.cpp( matrix(1:12, ncol=3))
Error in .Primitive(".Call")(<pointer: (nil)>, UmatrixR) : 
  NULL value passed as symbol address
>
> plus.two.cpp
An object of class "CFunc"
function (UmatrixR) 
.Primitive(".Call")(<pointer: (nil)>, UmatrixR)
<environment: 0x2f28370>
Slot "code":
[1] "\n// includes from the plugin\n#include <RcppArmadillo.h>\n#include <Rcpp.h>\n\n\n#ifndef BEGIN_RCPP\n#define BEGIN_RCPP\n#endif\n\n#ifndef END_RCPP\n#define END_RCPP\n#endif\n\nusing namespace Rcpp;\n\n\n// user includes\n\n\n// declarations\nextern \"C\" {\nSEXP file2f8c4cc10657( SEXP UmatrixR) ;\n}\n\n// definition\n\nSEXP file2f8c4cc10657( SEXP UmatrixR ){\nBEGIN_RCPP\n\n  arma::mat U = Rcpp::as<arma::mat>(UmatrixR);\n  return(Rcpp::wrap(U+2));\n\nEND_RCPP\n}\n\n\n" 
```

它失败。在我未经训练的眼睛看来：

1.  编译的代码`inline`从未被 *.package.skeleton 复制到目录骨架的“右侧”部分，以供 R 构建过程稍后编译，并且
2.  如果 'code_files' 参数不会导致 R 在加载包时获取这些 *.R 文件，则失败。

进一步考虑这一点，似乎（2）将是一个非常糟糕的主意，因为它会强制用户每次加载他们的包时编译代码。这将排除所有只需要二进制包的用户，而且效率很低。

并且 (1) 在技术上似乎是可行的，但正如[Rcpp 邮件列表中所讨论的那样](http://lists.r-forge.r-project.org/pipermail/rcpp-devel/2012-July/004026.html)，不值得实现一组自动魔术转换器功能。

所以，问题：

**有人可以介绍一下获取提供的示例代码并将其转换为 R 包的正确方法吗？**

对我来说，理解现有文档有点新鲜。FWIW，我相信这对未来的人们会有帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T17:16:10.990

第 1 步：编写一个没有 Rcpp 的虚拟包，只是为了[感受一下事情是如何工作的](http://cran.r-project.org/doc/manuals/R-exts.html)。

第 2 步：阅读 Dirk[关于如何制作使用 Rcpp 的包](http://dirk.eddelbuettel.com/code/rcpp/Rcpp-package.pdf)的说明。

从我读过的内容`inline`来看，似乎使包中的 Rcpp 变得更难而不是更容易。

# android - 如何异步设置 TextView 的文本？

> ID：11456828
> 
> 赞同：3
> 
> 时间：2012-07-12T16:57:48.953
> 
> 标签：android, android-asynctask

我必须填写`ListView`需要时间收集的文本信息。我的方法是使用 AsyncTask 来做后台工作，但是当结果到达时将文本设置为 TextView 会减慢列表的速度：每次`getView()`调用列表都会滞后。

这是我的`AsyncTask`课

```
private class BreadcrumbTask extends AsyncTask<FFile, Void, String>{
    private WeakReference<TextView> mTextView; 
    public BreadcrumbTask(TextView textView){
        mTextView = new WeakReference<TextView>(textView);
    }

    @Override
    protected String doInBackground(FFile... params) {
           // text processing
    }

    @Override
    protected void onPostExecute(String result) {
        if (mTextView != null){
            TextView tv = mTextView.get();
            if (tv != null)
                //this line blocks the UI. if I comment it the lag is gone
                tv.setText(result); 
        } 
```

// mTextView.setText(结果); }

我在 getView() 中创建了一个新任务并执行它。问题显然来自`tv.setText(result)`于`onPostExecute()`. 当我发表评论时，列表很流畅。那么如何在`TextView`不减慢 UI 的情况下更新呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:17:05.470

使用[ViewHolder](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)模式。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

**将视图对象保留在视图持有者中**

您的代码可能会在 ListView 滚动期间频繁调用 findViewById()，这会降低性能。即使适配器返回一个膨胀的视图进行回收，您仍然需要查找元素并更新它们。重复使用 findViewById() 的一种方法是使用“视图持有者”设计模式。

> ViewHolder 对象将每个组件视图存储在 Layout 的 tag 字段中，因此您可以立即访问它们而无需重复查找它们。首先，您需要创建一个类来保存您的确切视图集。例如：

```
static class ViewHolder {
  TextView text;
  TextView timestamp;
  ImageView icon;
  ProgressBar progress;
  int position;
} 
```

> 然后填充 ViewHolder 并将其存储在布局中。

```
ViewHolder holder = new ViewHolder();
holder.icon = (ImageView) convertView.findViewById(R.id.listitem_image);
holder.text = (TextView) convertView.findViewById(R.id.listitem_text);
holder.timestamp = (TextView) convertView.findViewById(R.id.listitem_timestamp);
holder.progress = (ProgressBar) convertView.findViewById(R.id.progress_spinner);
convertView.setTag(holder); 
```

其他一些例子：

[http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/) [http://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:25:21.533

```
 @Override
protected void onPostExecute(String result) {

 if (mTextView != null){
        TextView tv = mTextView.get();
        if (tv != null)
            //this line blocks the UI. if I comment it the lag is gone
            tv.setText(result); 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:16:11.567

您不能从另一个线程更新 UI。但是你可以使用[Handler](http://developer.android.com/reference/android/os/Handler.html)来动态更新 UI。在您的类中定义一个处理程序并按如下方式使用它：

**宣言：**

```
String result = "";
Handler regularHandler = new Handler(new Handler.Callback() {
    public boolean handleMessage(Message msg) {
        // Update UI
   if(msg.what==3){
    if (mTextView != null){
            TextView tv = mTextView.get();
            if (tv != null){
                //this line blocks the UI. if I comment it the lag is gone
                tv.setText(result); 
            }
        }
     }
        return true;
    }
}); 
```

**您在 onPostExecute 中的代码**

```
@Override
    protected void onPostExecute(String result) {
                //store the value in class variable result
                this.result = result;
                handler.sendEmptyMessage(3);
        } 
```

# javascript - 函数创建后如何编辑

> ID：11456830
> 
> 赞同：0
> 
> 时间：2012-07-12T16:57:57.890
> 
> 标签：javascript

函数创建后如何编辑？

```
function foo(a, b) {
  this.c = a+b;
}

var bar = new foo(2,3); //result: {'c':5}

//now I would like to create a new function, which is a bit different from the first
foo2 = foo;
foo2.d = a*b;  //here I get an error: a is not defined

bar2 = new foo2(3,4); 
```

* * *

不，我的意思是结果应该是这样的：

```
function foo2(a, b) {
  this.c = a+b;
  this.d = a*b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:08:01.163

你不能完全按照自己的意愿去做，但是还有其他方法可以做你想做的事。

```
function builder(fn, propertyName) {
  return function () {
    var args = arguments;
    this[propertyName] = fn.apply(this, arguments);
    this.change = function (otherFn, otherPropertyName) { 
       return builder(otherFn, otherPropertyName || propertyName);
    }
  }
}

var Foo = builder(function (a, b) { return a + b; }, "c");

var foo = new Foo(3, 4)

var Foo2 = foo.change(function (a, b) { return a * b; }, "d");

var foo2 = new Foo2(3, 4)

console.log(foo.c, foo2.d)   // => 7 12 
```

这样做的更好方法是这样的......

```
function Foo(a, b) {
  var self = this;
  this.add = function (name, fn) {
    self[name] = fn.call(self, a, b);
  }
}

var foo = new Foo(3, 4);
foo.add("c", function (a, b) { return a + b; });
foo.add("d", function (a, b) { return a * b; });

console.log(foo.c, foo2.d)   // => 7 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:08:14.363

无法编辑函数，您可以通过在当前上下文中将其他函数分配给相同的名称来替换它，或者您可以从外部轻松修改它：

```
function foo(a, b) {
    this.c = this.op !== undefined ? this.op(a, b) : (a + b);
}

var bar = new foo(2, 3); // bar.c === 5

foo.prototype.op = function(a, b) {
   return a * b;
}

var bar2 = new foo(3, 4); // bar.c === 12 
```

这样，您的函数要么使用默认代码 (a + b)，要么可以随时通过在原型中定义 op 函数来覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:12:42.370

我认为您正在尝试的是javascript中的继承？

```
// base class contains only "sum" method
function foo(a, b) {
  this.a = a;
  this.b = b;
}

foo.prototype.sum = function(){
  return this.a + this.b;
}

// derived class contains new "multiply" method
function foo2(a, b){
   foo.call(this, a, b);
}

foo2.prototype = new foo();

foo2.prototype.multiply = new function(){
  return this.a * this.b;
}

// test drive!
var foo2Obj = new foo2(5, 4);
console.log(foo2Obj.sum()); // 9
console.log(foo2Obj.multiply()); // 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:10:43.460

当您编写 foo2 = foo 时，您只是为 foo 创建了一个*别名*，称为 foo2；没有进行复制或覆盖。当您编写 foo2.d 时，您指的是 foo.d 的另一个名称；和 foo.d === 未定义。此外， a 和 b 仅在 foo 的内部范围内有意义（因此也是未定义的）。

但是，您可以为 foo 编写一个新定义：

```
function foo(a, b) {
   this.d = a*b;
   this.c = a+b;
} 
```

以前的 foo 对象当然不受影响；并且您的“foo2”将继续指向以前版本的 foo。

# python - Python 等价于 R 数据帧

> ID：11456844
> 
> 赞同：3
> 
> 时间：2012-07-12T16:58:53.487
> 
> 标签：python, arrays, r

什么是 Python 等价于 R 的`read.csv()`函数，`data.frame`它返回？

Python中有类似的数据结构吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T17:11:13.617

您的问题中有两个元素，(1) 读取/写入 CSV 和 (2) 与 R 等效的数据结构，该结构是`data.frame`通过读取 CSV 文件产生的。

对于第一部分，标准库中有[`csv`模块](http://docs.python.org/library/csv.html)。

对于第二部分，标准库缺少具有 R 灵活性的等效表格数据结构`data.frame`。您有两种选择，具体取决于您之后将要执行的操作的复杂性：

*   一个更轻量级的选项是[tablib](http://docs.python-tablib.org/en/latest/index.html)。它包含读取/写入 CSV 和基本操作、子设置等功能。
*   一个更全面（也许是矫枉过正）的解决方案是[pandas](http://pandas.pydata.org/)包中的[`DataFrame`数据结构。](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)它对表格文件格式具有类似的[读/写功能，但具有与 R 类似的](http://pandas.pydata.org/pandas-docs/stable/io.html#csv-text-files)[索引/切片](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#indexing-selection)、[操作](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#column-selection-addition-deletion)、[内置汇总操作](http://pandas.pydata.org/pandas-docs/stable/basics.html)等。`data.frame`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:09:58.077

这还不足以满足你的饥饿感吗？

```
import StringIO
import csv

f = StringIO.StringIO("""a,b,c
1,2,3
4,5,6""")

r = csv.reader(f, delimiter=',')
print [x for x in r] 
```

给出：

```
[['a', 'b', 'c'], ['1', '2', '3'], ['4', '5', '6']] 
```

# javascript - 用逗号分割字符串，但使用 Javascript 忽略双引号内的逗号

> ID：11456850
> 
> 赞同：73
> 
> 时间：2012-07-12T16:59:26.483
> 
> 标签：javascript, regex

我正在寻找`[a, b, c, "d, e, f", g, h]`变成一个包含 6 个元素的数组：a、b、c、“d、e、f”、g、h。我正在尝试通过 Javascript 来做到这一点。这是我到目前为止所拥有的：

```
str = str.split(/,+|"[^"]+"/g); 
```

但是现在它正在拆分双引号中的所有内容，这是不正确的。

编辑：好的，对不起，我对这个问题的措辞非常糟糕。我得到的是一个字符串而不是一个数组。

```
var str = 'a, b, c, "d, e, f", g, h'; 
```

我想用类似“split”函数的东西把*它*变成一个数组。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-12T18:09:05.903

这就是我要做的。

```
var str = 'a, b, c, "d, e, f", g, h';
var arr = str.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g); 
```

[![在此处输入图像描述](../Images/aa9b5cb1ca90179c663ebd8be776d5c8.png)](https://i.stack.imgur.com/E0Tbw.png) /* 将匹配：

```
 (
        ".*?"       double quotes + anything but double quotes + double quotes
        |           OR
        [^",\s]+    1 or more characters excl. double quotes, comma or spaces of any kind
    )
    (?=             FOLLOWED BY
        \s*,        0 or more empty spaces and a comma
        |           OR
        \s*$        0 or more empty spaces and nothing else (end of string)
    )

*/
arr = arr || [];
// this will prevent JS from throwing an error in
// the below loop when there are no matches
for (var i = 0; i < arr.length; i++) console.log('arr['+i+'] =',arr[i]); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-12-14T06:39:52.307

正则表达式： `/,(?=(?:(?:[^"]*"){2})*[^"]*$)/`

[![在此处输入图像描述](../Images/2494d87d1d585ad1a360fa1f21e1b2bc.png)](https://i.stack.imgur.com/2t7YP.png)

```
const input_line = '"2C95699FFC68","201 S BOULEVARDRICHMOND, VA 23220","8299600062754882","2018-09-23"'

let my_split = input_line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)[4]

Output: 
my_split[0]: "2C95699FFC68", 
my_split[1]: "201 S BOULEVARDRICHMOND, VA 23220", 
my_split[2]: "8299600062754882", 
my_split[3]: "2018-09-23" 
```

参考以下链接进行解释：[regexr.com/44u6o](https://regexr.com/44u6o)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-12T03:34:06.600

这是一个 JavaScript 函数：

```
function splitCSVButIgnoreCommasInDoublequotes(str) {  
    //split the str first  
    //then merge the elments between two double quotes  
    var delimiter = ',';  
    var quotes = '"';  
    var elements = str.split(delimiter);  
    var newElements = [];  
    for (var i = 0; i < elements.length; ++i) {  
        if (elements[i].indexOf(quotes) >= 0) {//the left double quotes is found  
            var indexOfRightQuotes = -1;  
            var tmp = elements[i];  
            //find the right double quotes  
            for (var j = i + 1; j < elements.length; ++j) {  
                if (elements[j].indexOf(quotes) >= 0) {  
                    indexOfRightQuotes = j; 
                    break;
                }  
            }  
            //found the right double quotes  
            //merge all the elements between double quotes  
            if (-1 != indexOfRightQuotes) {   
                for (var j = i + 1; j <= indexOfRightQuotes; ++j) {  
                    tmp = tmp + delimiter + elements[j];  
                }  
                newElements.push(tmp);  
                i = indexOfRightQuotes;  
            }  
            else { //right double quotes is not found  
                newElements.push(elements[i]);  
            }  
        }  
        else {//no left double quotes is found  
            newElements.push(elements[i]);  
        }  
    }  

    return newElements;  
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-27T21:46:55.983

这是一个假设双引号成对出现的非正则表达式：

```
function splitCsv(str) {
  return str.split(',').reduce((accum,curr)=>{
    if(accum.isConcatting) {
      accum.soFar[accum.soFar.length-1] += ','+curr
    } else {
      accum.soFar.push(curr)
    }
    if(curr.split('"').length % 2 == 0) {
      accum.isConcatting= !accum.isConcatting
    }
    return accum;
  },{soFar:[],isConcatting:false}).soFar
}

console.log(splitCsv('asdf,"a,d",fdsa'),' should be ',['asdf','"a,d"','fdsa'])
console.log(splitCsv(',asdf,,fds,'),' should be ',['','asdf','','fds',''])
console.log(splitCsv('asdf,"a,,,d",fdsa'),' should be ',['asdf','"a,,,d"','fdsa'])
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-12T18:48:02.410

这对我很有效。（我使用了分号，因此警报消息会显示将数组转换为字符串时添加的逗号与实际捕获的值之间的差异。）

**正则表达式**

```
/("[^"]*")|[^;]+/ 
```

[![在此处输入图像描述](../Images/a8970291472989b2446d11e159720889.png)](https://i.stack.imgur.com/6mSqy.png)

```
var str = 'a; b; c; "d; e; f"; g; h; "i"';
var array = str.match(/("[^"]*")|[^;]+/g); 
alert(array); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-07-20T02:01:10.877

这是[我们](https://github.com/c-hive/guides/blob/62e49f6cdfb77cf86e3b735a7759346b14f5a8d3/etc/regex.md#argument-list)用来从逗号分隔的参数列表中提取有效参数的正则表达式，支持双引号参数。它适用于概述的边缘情况。例如

*   在匹配项中不包含引号
*   在匹配中使用空格
*   适用于空字段

`(?<=")[^"]+?(?="(?:\s*?,|\s*?$))|(?<=(?:^|,)\s*?)(?:[^,"\s][^,"]*[^,"\s])|(?:[^,"\s])(?![^"]*?"(?:\s*?,|\s*?$))(?=\s*?(?:,|$))`

证明：[https](https://regex101.com/r/UL8kyy/3/tests) ://regex101.com/r/UL8kyy/3/tests （*注意：目前仅适用于 Chrome，因为正则表达式使用仅在 ECMA2018 中支持的后视*）

根据[我们的指南](https://github.com/c-hive/guides/blob/62e49f6cdfb77cf86e3b735a7759346b14f5a8d3/etc/regex.md)，它避免了非捕获组和贪婪匹配。

我确信它可以简化，我愿意接受建议/额外的测试用例。

对于任何感兴趣的人，第一部分匹配双引号，逗号分隔的参数：

`(?<=")[^"]+?(?="(?:\s*?,|\s*?$))`

第二部分自己匹配逗号分隔的参数：

`(?<=(?:^|,)\s*?)(?:[^,"\s][^,"]*[^,"\s])|(?:[^,"\s])(?![^"]*?"(?:\s*?,|\s*?$))(?=\s*?(?:,|$))`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-04-06T06:57:50.523

我几乎喜欢接受的答案，但它没有正确解析空间，和/或它没有修剪双引号，所以这是我的功能：

```
 /**
     * Splits the given string into components, and returns the components array.
     * Each component must be separated by a comma.
     * If the component contains one or more comma(s), it must be wrapped with double quotes.
     * The double quote must not be used inside components (replace it with a special string like __double__quotes__ for instance, then transform it again into double quotes later...).
     *
     * https://stackoverflow.com/questions/11456850/split-a-string-by-commas-but-ignore-commas-within-double-quotes-using-javascript
     */
    function splitComponentsByComma(str){
        var ret = [];
        var arr = str.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g);
        for (let i in arr) {
            let element = arr[i];
            if ('"' === element[0]) {
                element = element.substr(1, element.length - 2);
            } else {
                element = arr[i].trim();
            }
            ret.push(element);
        }
        return ret;
    }
    console.log(splitComponentsByComma('Hello World, b, c, "d, e, f", c')); // [ 'Hello World', 'b', 'c', 'd, e, f', 'c' ] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-12T17:42:15.843

我知道它有点长，但这是我的看法：

```
var sample="[a, b, c, \"d, e, f\", g, h]";

var inQuotes = false, items = [], currentItem = '';

for(var i = 0; i < sample.length; i++) {
  if (sample[i] == '"') { 
    inQuotes = !inQuotes; 

    if (!inQuotes) {
      if (currentItem.length) items.push(currentItem);
      currentItem = '';
    }

    continue; 
  }

  if ((/^[\"\[\]\,\s]$/gi).test(sample[i]) && !inQuotes) {
    if (currentItem.length) items.push(currentItem);
    currentItem = '';
    continue;
  }

  currentItem += sample[i];
}

if (currentItem.length) items.push(currentItem);

console.log(items); 
```

作为旁注，它可以在开始和结束时使用和不使用大括号。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-07T09:02:57.300

这一次需要一个 csv 文件，然后返回一个数组，其中包含完整的语音标记内的逗号。如果没有检测到语音标记，它只是 .split(",")s 正常...可能会用某些东西替换第二个循环，但它可以按原样完成工作

```
function parseCSVLine(str){
    if(str.indexOf("\"")>-1){
        var aInputSplit = str.split(",");
        var aOutput = [];
        var iMatch = 0;
        //var adding = 0;
        for(var i=0;i<aInputSplit.length;i++){
            if(aInputSplit[i].indexOf("\"")>-1){
                var sWithCommas = aInputSplit[i];
                for(var z=i;z<aInputSplit.length;z++){
                    if(z !== i && aInputSplit[z].indexOf("\"") === -1){
                        sWithCommas+= ","+aInputSplit[z];
                    }else if(z !== i && aInputSplit[z].indexOf("\"") > -1){
                        sWithCommas+= ","+aInputSplit[z];
                        sWithCommas.replace(new RegExp("\"", 'g'), "");
                        aOutput.push(sWithCommas);
                        i=z;
                        z=aInputSplit.length+1;
                        iMatch++;
                    }
                    if(z === aInputSplit.length-1){
                        if(iMatch === 0){
                            aOutput.push(aInputSplit[z]);
                        }                  
                        iMatch = 0;
                    }
                }
            }else{
                aOutput.push(aInputSplit[i]);
            }
        }
        return aOutput
    }else{
        return str.split(",")
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-04T18:26:36.360

根据 TYPESCRIPT 解析任何 CSV 或 CSV-String 代码

```
public parseCSV(content:string):any[string]{
        return content.split("\n").map(ar=>ar.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(refi=>refi.replace(/[\x00-\x08\x0E-\x1F\x7F-\uFFFF]/g, "").trim()));
    }

var str='"abc",jkl,1000,qwerty6000';

parseCSV(str); 
```

输出 ：

```
[
"abc","jkl","1000","qwerty6000"
] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-08-05T18:49:30.160

使用 npm 库 csv-string 来解析字符串而不是拆分：[https ://www.npmjs.com/package/csv-string](https://www.npmjs.com/package/csv-string)

这将处理空条目

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-26T20:10:15.320

像堆栈这样的东西应该可以解决问题。在这里，我模糊地使用标记布尔值作为堆栈（只是为了达到我的目的）。

```
var str = "a,b,c,blah\"d,=,f\"blah,\"g,h,";
var getAttributes = function(str){
  var result = [];
  var strBuf = '';
  var start = 0 ;
  var marker = false;
  for (var i = 0; i< str.length; i++){

    if (str[i] === '"'){
      marker = !marker;
    }
    if (str[i] === ',' && !marker){
      result.push(str.substr(start, i - start));
      start = i+1;
    }
  }
  if (start <= str.length){
    result.push(str.substr(start, i - start));
  }
  return result;
};

console.log(getAttributes(str)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-30T09:44:39.603

[jsfiddle设置图片](https://i.stack.imgur.com/sem0P.png) [代码输出图片](https://i.stack.imgur.com/mgVnb.png)

如果您的输入字符串采用 stringTocompare 格式，则该代码有效。[在https://jsfiddle.net/](https://jsfiddle.net/)上运行代码以查看 fiddlejs 设置的输出。请参考截图。您可以对其下面的代码使用相同的拆分功能，并根据需要调整代码。如果您不想在 split attach=attach**+","**+actualString[t+1] 之后使用逗号，请从代码中删除粗体或带有 ** 的单词。

```
var stringTocompare='"Manufacturer","12345","6001","00",,"Calfe,eto,lin","Calfe,edin","4","20","10","07/01/2018","01/01/2006",,,,,,,,"03/31/2004"';

console.log(stringTocompare);

var actualString=stringTocompare.split(',');
console.log("Before");
for(var i=0;i<actualString.length;i++){
console.log(actualString[i]);
}
//var actualString=stringTocompare.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
for(var i=0;i<actualString.length;i++){
var flag=0;
var x=actualString[i];
if(x!==null)
{
if(x[0]=='"' && x[x.length-1]!=='"'){
   var p=0;
   var t=i;
   var b=i;
   for(var k=i;k<actualString.length;k++){
   var y=actualString[k];
        if(y[y.length-1]!=='"'){        
        p++;
        }
        if(y[y.length-1]=='"'){

                flag=1;
        }
        if(flag==1)
        break;
   }
   var attach=actualString[t];
for(var s=p;s>0;s--){

  attach=attach+","+actualString[t+1];
  t++;
}
actualString[i]=attach;
actualString.splice(b+1,p);
}
}

}
console.log("After");
for(var i=0;i<actualString.length;i++){
console.log(actualString[i]);
}

  [1]: https://i.stack.imgur.com/3FcxM.png 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-10T17:57:20.717

我用一个简单的解析器解决了这个问题。

它只是逐个字符地遍历字符串，在找到 split_char 时拆分一个段（例如逗号），但也有一个通过查找 encapsulator_char （例如引号）来切换的开/关标志。它不需要封装器位于字段/段的开头（a,b","c,d 将产生 3 个段，第二个为 'b","c'），但它应该适用于带有转义封装字符的格式良好的 CSV。

```
function split_except_within(text, split_char, encapsulator_char, escape_char) {
    var start = 0
    var encapsulated = false
    var fields = []
    for (var c = 0; c < text.length; c++) {
        var char = text[c]
        if (char === split_char && ! encapsulated) {
            fields.push(text.substring(start, c))
            start = c+1
        }
        if (char === encapsulator_char && (c === 0 || text[c-1] !== escape_char) )             
            encapsulated = ! encapsulated
    }
    fields.push(text.substring(start))
    return fields
} 
```

[https://jsfiddle.net/7hty8Lvr/1/](https://jsfiddle.net/7hty8Lvr/1/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-31T23:01:04.263

```
const csvSplit = (line) => {
    let splitLine = [];

    var quotesplit = line.split('"');
    var lastindex = quotesplit.length - 1;
    // split evens removing outside quotes, push odds
    quotesplit.forEach((val, index) => {
        if (index % 2 === 0) {
            var firstchar = (index == 0) ? 0 : 1;
            var trimmed = (index == lastindex) 
                ? val.substring(firstchar)
                : val.slice(firstchar, -1);
            trimmed.split(",").forEach(v => splitLine.push(v));
        } else {
            splitLine.push(val);
        }
    });
    return splitLine;
} 
```

只要引号总是出现在包含需要排除的逗号的值的外部（即 csv 文件），这将起作用。

如果你有像 '1,2,4"2,6",8' 这样的东西，它就行不通了。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-05-06T16:04:58.007

我也遇到过类似的问题，而且我没有找到好的 .net 解决方案，所以就自己动手做了。注意：这也用于回复

[拆分逗号分隔的字符串，忽略引号中的逗号，但允许字符串带有一个双引号](https://stackoverflow.com/questions/5968720/splitting-comma-separated-string-ignore-commas-in-quotes-but-allow-strings-wit/30081694#30081694)

但在这里似乎更适用（但在那里有用）

在我的应用程序中，我正在解析一个 csv，所以我的拆分凭证是“，”。我想这种方法只适用于你有一个 char split 参数的地方。

因此，我编写了一个忽略双引号内逗号的函数。它通过将输入字符串转换为字符数组并逐字符解析字符来实现

```
public static string[] Splitter_IgnoreQuotes(string stringToSplit)
    {   
        char[] CharsOfData = stringToSplit.ToCharArray();
        //enter your expected array size here or alloc.
        string[] dataArray = new string[37];
        int arrayIndex = 0;
        bool DoubleQuotesJustSeen = false;          
        foreach (char theChar in CharsOfData)
        {
            //did we just see double quotes, and no command? dont split then. you could make ',' a variable for your split parameters I'm working with a csv.
            if ((theChar != ',' || DoubleQuotesJustSeen) && theChar != '"')
            {
                dataArray[arrayIndex] = dataArray[arrayIndex] + theChar;
            }
            else if (theChar == '"')
            {
                if (DoubleQuotesJustSeen)
                {
                    DoubleQuotesJustSeen = false;
                }
                else
                {
                    DoubleQuotesJustSeen = true;
                }
            }
            else if (theChar == ',' && !DoubleQuotesJustSeen)
            {
                arrayIndex++;
            }
        }
        return dataArray;
    } 
```

根据我的应用程序的口味，此功能也会忽略任何输入中的 ("")，因为这些都是不需要的并且存在于我的输入中。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-07-12T17:02:28.763

假设你的字符串真的看起来像`'[a, b, c, "d, e, f", g, h]'`，我相信这将是一个可接受的用例`eval()`：

```
myString = 'var myArr ' + myString;
eval(myString);

console.log(myArr); // will now be an array of elements: a, b, c, "d, e, f", g, h 
```

* * *

**编辑**：正如 Rocket 所指出的，`strict`mode 移除`eval`了将变量注入本地范围的能力，这意味着你想要这样做：

```
var myArr = eval(myString); 
```

# iphone - ios如何在添加或删除文本时自动调整uilabel的高度（并且numberOfLines = 0）

> ID：11456853
> 
> 赞同：0
> 
> 时间：2012-07-12T16:59:41.660
> 
> 标签：iphone, ios, resize, height, uilabel

我有一个显示用户“简历”的 UILabel。我还让用户能够通过在用户点击时弹出 uitextview 来编辑此文本，然后一旦用户完成从该 uitextview 添加或删除文本，我说 label.text = textview.text，因此它会更新 bio标签的文本。
*但是，我想要一种方法来告诉标签根据添加或删除的文本量来修复它的高度。*有没有办法做到这一点？先感谢您！

内森F

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:03:25.220

```
CGRect labelFrame = label.frame;
labelFrame.size = [textview.text sizeWithFont:label.font
                            constrainedToSize:CGSizeMake(label.frame.size.width, CGFLOAT_MAX)
                                lineBreakMode:label.lineBreakMode];
label.frame = labelFrame; 
```

这将根据新文本调整标签（高度）的大小（同时考虑字体和换行模式）。

注意： UILineBreakMode 自 6.0 起已被弃用。请改用 NSLineBreak。

[来源](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/c/tdef/UILineBreakMode)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T17:12:53.987

称呼

```
[labelName sizeToFit]; 
```

设置新文本后。还要确保像这样设置自动换行或字符换行：

```
[labelName setLineBreakMode:UILineBreakModeWordWrap]; 
```

或者

```
[labelName setLineBreakMode:UILineBreakModeCharacterWrap]; 
```

如果您还有其他问题，请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T07:51:41.343

此方法“ **sizeWithFont** ”在 iOS 7 中已弃用，您可以使用以下方法：

```
CGRect rect = [YourText boundingRectWithSize:CGSizeMake(labelWidth, CGFLOAT_MAX)
                                       options:NSStringDrawingUsesLineFragmentOrigin
                                       context:nil];
 NSLog(@"Height: %f",rect.size.height); 
```

欲了解更多信息，请查看：[Apple 的文档](https://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/boundingRectWithSize%3aoptions%3aattributes%3acontext%3a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:02:23.213

您可以使用 [NSString sizeWithFont:...] 来测量用于标签的文本。

另请参阅：[如何获取 NSString 的大小](https://stackoverflow.com/questions/2669063/how-to-get-the-size-of-a-nsstring)

# xcode - 重复符号 _jk_collectionClassLoadTimeInitialization 中

> ID：11456855
> 
> 赞同：0
> 
> 时间：2012-07-12T16:59:43.733
> 
> 标签：xcode

2012-07-12 19:12:09.962 Tunecast[1982:907] (null) libc++abi.dylib: 终止调用抛出异常

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:07:38.390

首先找出它在代码中的定义位置。实现这一点的最常见方法之一是在 .h 文件中定义一个变量（而不仅仅是声明它），然后在项目中多次包含/导入 .h。

# c# - LINQ 连接、分组和求和（或任何聚合）

> ID：11456856
> 
> 赞同：4
> 
> 时间：2012-07-12T16:59:48.907
> 
> 标签：c#, linq, group-by, aggregate

有订单标题和详细信息表，想要获取所有标题列并从详细信息中附加一个总订单数量。

我正在尝试做的事情（伪sql）：

```
select Header.*, sum(Details.Quantity)
from Header
join Details on Details.HeaderID = Header.ID
group by HeaderID 
```

为了避免重写所有标题列（有很多），我创建了一个新对象，如下所示：

```
public class OrderView 
{
    public Header Header { get; set; }
    public int? TotalQuantity { get; set; }
} 
```

我悲伤的尝试填补它：

```
var results = from oh in db.Header
              join od in db.Details on oh.ID equals od.HeaderID                          
              where oh.Store == params.Store
                 // && ...  a bunch more search filters on Header ...
              group od by od.PID into odg
              select new OrderView() { Header = oh, TotalQuantity = odg.Sum(x => x.QTY) }; 
```

我当前尝试的第一个问题是，`select`在行中，`oh`未定义，在我对 LINQ 的无知中，这使我相信来自 Header 的所有结果都已发送到其他地方。

如果我在搜索中没有看到这种类型的查询的最佳实践，我完全可以放弃整个查询并以不同的方式进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:04:54.983

你的意思是这样的？我假设在您的“*我*正在尝试做的事情”中`od.PID`确实来自您的 pesudo-sql `od.HeaderID`（= ），*并且*对于每一行来说这是唯一的（可能的 PK？），因此您可以按行本身分组。`oh.ID`*`oh.ID``db.Header`*

 *```
var results = from oh in db.Header
              join od in db.Details on oh.ID equals od.HeaderID                          
              where oh.Store == params.Store
                 // && ...  a bunch more search filters on Header ...
              group od by oh into odg
              select new OrderView() 
              {
                  Header = odg.Key, 
                  TotalQuantity = odg.Sum(x => x.QTY) 
              }; 
```*

# c# - 如何在 C# 控制台应用程序中使用 WebKitBrowser

> ID：11456857
> 
> 赞同：1
> 
> 时间：2012-07-12T16:59:50.080
> 
> 标签：c#

我使用 WebKitBrowser ( [http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/) )。当我通过工具箱中的样式拖放添加到应用程序时，控件在我的 winform 应用程序中运行良好。

如果我在 consol 应用程序中尝试过，它没有用。如果我输入 URL 网页，它从未被上传。

在构造函数中，我创建了实例 WebKitBrowser，然后调用了方法 Navigate()。我认为加载页面从未开始。

我的代码如下所示：

```
private readonly WebKit.WebKitBrowser _webKitBrowser;

public DemoApplication()
{           
_webKitBrowser = new WebKit.WebKitBrowser();
_webKitBrowser.DocumentCompleted += WebKitBrowserDocumentCompleted;
_webKitBrowser.Navigate("http://www.google.com");
}

void WebKitBrowserDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // it never gets here.
var sourceCode = _webKitBrowser.DocumentText;
} 
```

有谁知道问题出在哪里？您可以在这种情况下使用此 WebKitBrowser 吗？

# ruby - ruby configatron foreach，如何显示配置的名称？

> ID：11456860
> 
> 赞同：0
> 
> 时间：2012-07-12T17:00:09.317
> 
> 标签：ruby, configatron

我想看到`test`和`test2`

```
configatron.providers.test.remote_dir = '/incoming/test/current'
configatron.providers.test.local_dir = 'data/test'
configatron.providers.test2.remote_dir = '/incoming/test2/current'
configatron.providers.test2.local_dir = 'data/test2'

configatron.providers.foreach do |p| 
    p.name() #<--- how to display test/test2
end 
```

尝试阅读手册？我在某个地方错过了这个吗？谷歌没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:19:59.073

我想这就是你要找的：

```
configatron.providers.configatron_keys.map { |key| configatron.providers.send(key).local_dir } 
```

# javascript - 从 URL 获取 JSON 文件并显示

> ID：11456862
> 
> 赞同：14
> 
> 时间：2012-07-12T17:00:29.760
> 
> 标签：javascript, json, parsing, url, getjson

代码很简单，我不知道为什么它不起作用。

这是 JSON 文件的链接，[http://webapp.armadealo.com/home.json](http://webapp.armadealo.com/home.json)

这是使用 getJSON 的代码

```
$.getJSON("http://webapp.armadealo.com/home.json", function(data){
alert(data);
}); 
```

我只想让代码显示整个 JSON 内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T21:33:30.420

经过这么多月的搜索，我找到了解决方案。因此，我正在回答我自己的问题。

当不支持 JSON 并且我们被同源策略卡住时，我们必须用填充包裹我们的 JSON 并使其成为 JSONP。

为此，我们有一个救生网站[http://anyorigin.com/](http://anyorigin.com/)

您可以粘贴您的 URL 并获取相应的 JQuery 代码，如下所示，

```
$.getJSON('http://anyorigin.com/get?url=http%3A//webapp.armadealo.com/home.json&callback=?', function(data){
$('#output').html(data.contents);
}); 
```

如果您想使用自己的代码，则只需使用上面代码中的 URL，即

```
http://anyorigin.com/get?url=http%3A//webapp.armadealo.com/home.json&callback=? 
```

上述 URL 将为您提供与 JSONP 相同的 JSON 数据并解决所有问题。

我使用了以下代码，成功调用 displayAll 函数

```
$.ajax({
        url: 'http://anyorigin.com/get?url=http%3A//webapp.armadealo.com/home.json&callback=?',
        type: 'GET',
        dataType: "json",
        success: displayAll
    });

function displayAll(data){
    alert(data);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T17:08:19.753

如果您查看 Chrome 检查器，您可能会看到以下错误：

> XMLHttpRequest 无法加载[http://webapp.armadealo.com/home.json](http://webapp.armadealo.com/home.json)。Access-Control-Allow-Origin 不允许来源[http://stackoverflow.com 。](http://stackoverflow.com)

这意味着服务器不希望客户端网页读取文件。客户端不受信任。这是 XMLHttpRequest 的一项基本安全功能，以防止 mybank.evil.com 之类的网站从 mybank.com 下载数据。不幸的是，这使得从本地文件进行测试具有挑战性。

如果您信任*任何*具有您的数据或选定数量的站点的站点，您可以配置您的服务器脚本以发送`Access-Control-Allow-Origin`允许某些站点通过。

有关详细信息，请参阅[https://developer.mozilla.org/en/http_access_control 。](https://developer.mozilla.org/en/http_access_control)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:07:02.587

它应该工作。

1.  您是否在 firebug 或其他调试控制台中查看过请求，会发生什么以及返回的响应是什么？

2.  请考虑**same-origin-policy**，因此发出此请求的脚本也应从 webapp.armadealo.com 加载。如果没有，您需要一个 jsonp 请求。看：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:32:29.643

据我所知，您的服务器不支持 JSONP 的请求。例如

```
var getUrl = 'http://webapp.armadealo.com/home.json';
                $.ajax({
                    url : getUrl,
                    type : 'GET',
                    dataType : 'jsonp text',
                    jsonp: 'jsonp',
                    crossDomain : true,
                    success: function() { console.log('Success!'); },
                    error: function() { console.log('Uh Oh!'); },
                }); 
```

这会说`SyntaxError: invalid label`。您所拥有的返回的 JSONP 格式不正确。由于 jQuery 需要它，因此必须将其包装为 JSONP。

所以你得到的东西是正确的，但这不是你需要的。JSONP 调用所需的内容如下所示：

```
functionName({
  "mall": {
  "name": "South Shore Plaza",
  "city": "Braintree",
  "directory": "/assets/directory/0000/0094/show_floorplan.aspx",
  "postal_code": "02184",
  "street": "250 Granite St",
  "lng": -71.023692,
  "id": 147,
  "phone": "(781) 843-8200",
  "lat": 42.218688,
  "state": "MA"
}
}); 
```

...由于当前返回的不是有效的 JavaScript（本身就是这样），这就是 JSONP 的工作方式，因此响应实际上需要是可执行的 JavaScript。

只需将该代码直接放在页面中的一个`<script>`块中，您就会得到相同的错误。

如果您只是在嵌入数据之后，我推荐使用[jQuery-oembed 之](http://code.google.com/p/jquery-oembed/)类的插件来执行此操作。如果您需要数据，则需要在服务器上处理 JSON，然后从服务器获取数据。

例如

所以假设我们想使用 jQuery 创建一个跨域。下面是 jQuery`$.ajax`调用的样子：

```
$.ajax({
  dataType: 'jsonp',
  data: 'id=test',
  jsonp: 'jsonp_callback',
  url: 'http://www.differentdomain.com/get_data.php',
  success: function () {
    // do something
  },
}); 
```

现在在服务器端（在**get_data.php**文件中），我们必须获取回调名称并以 JSON 格式发送包含在回调函数中的数据。像这样的东西：

```
<?php
$jsonp_callback = $_GET['jsonp_callback'];
$data = array('1','2','3');
echo $jsonp_callback . '('.json_encode($data).');';
?> 
```

只有当服务器正确地将响应嵌入到 JavaScript 函数调用中时，才能使用 JSONP。

# ms-access - 使用查找表协助组合框 - MS Access

> ID：11456864
> 
> 赞同：1
> 
> 时间：2012-07-12T17:00:33.807
> 
> 标签：ms-access, combobox, lookup-tables

基本上我所拥有的是一张`Customer`包含我们客户信息的表格。此表中的字段之一是`Customer.CustomerTypeID`。
我也有一个`CustomerType`表，它基本上是一个查找表。
我希望该`CustomerType.CustomerTypeName`字段填充我的组合框，然后当我去保存我的记录时，我希望在`CustomerType.CustomerTypeID`该字段`CustomerType.CustomerTypeName`中更新我选择的。`Customer.CustomerTypeID`

我是否过于复杂了？我是否应该更改它以便将其存储`CustomerName`在`Customer`表中而不是 ID 中？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:04:30.137

不，存储ID。

像这样设置你的组合：

```
Row Source: SELECT CustomerTypeID, CustomerTypeName FROM CustomerType 
Control Source : CustomerTypeID
Bound Column : 1
Column Count : 2
Column widthes : 0, 2 
```

控制源+绑定列表示数据将存储到表单所基于的表中名为CustomerTypeID的字段中，列宽表示隐藏ID列并显示描述。

# firebird - 拆分火鸟数据库文件

> ID：11456876
> 
> 赞同：3
> 
> 时间：2012-07-12T17:01:26.287
> 
> 标签：firebird, firebird2.1

我有一个接近 4GB 文件系统限制大小的 firebird 数据库。如何将单个数据库文件拆分为多个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:59:18.593

对于单个文件数据库，Firebird 数据库可以跨越数 TB。InterBase 6.0 手册中提到了 4GB 的限制，但该限制仅适用于不支持更大文件的文件系统。据我所知，几乎所有文件系统都支持比这更大的文件（一个值得注意的例外当然是 FAT(32)）。另请参阅[Firebird 数据库限制](http://www.firebirdsql.org/en/firebird-technical-specifications/)。

如果确实需要拆分文件，则需要添加辅助文件。有两种方法可以解决这个问题：

1）`ALTER DATABASE`用于添加附加文件：

```
ALTER DATABASE ADD FILE '<path-to-file>' LENGTH <number> PAGES 
   STARTING AT PAGE <number> 
```

请注意，指定`STARTING AT PAGE`已创建的数字只会在分配下一页时创建文件。所以它不会从指定的页面开始，而是从`<current page count>`+1开始。另见*InterBase 6.0语言参考*中的第22页（可从[http://www.firebirdsql.org/en/reference-manuals/](http://www.firebirdsql.org/en/reference-manuals/)获得）或页面海伦·博里 (Helen Borrie ) 的*《火鸟书》第*238 - 240页。

2）（如果需要拆分现有数据库）：备份数据库并恢复，同时指定多个文件和每个文件的大小：

```
gbak -C <backupfile> <file1> <maxsize of file1> 
    <file2> <maxsize of file2> .... <fileN> 
```

对于您未指定大小的最后一个文件，它将增长直到达到文件系统限制（如果有），在这种情况下，您将需要添加额外的辅助文件，如上所述。*另请参阅Interbase 6.0 Operations Guide*的第 162 页（也可从[http://www.firebirdsql.org/en/reference-manuals/](http://www.firebirdsql.org/en/reference-manuals/)获得）或*The Firebird Book*的第 825-827 页。

但正如我所说：在几乎任何（现代）文件系统上，4 GB 限制都不适用。

# jquery - 如何为多个主页使用相同的子页面

> ID：11456879
> 
> 赞同：0
> 
> 时间：2012-07-12T17:01:38.567
> 
> 标签：jquery, html, css

```
- Have 5 pages
- Each page has a link for "Sign-in/Log-in" on the topbar
- Lets say user is on "HomePage" and he clicks "Log-in" button on the topbar
- I want "Homepage" to go in background (opacity=0.2) and put the "Log-in" pop-up in front (z-index: 100)
- Same behavior is expected for all 5 pages - 
```

我所做的是这样的：

```
-----------------Page 1----------
div.HomePage
  div.accountPage
-----------------Page 2----------
div.BrowsePage
  div.accountPage
-----------------Page 3----------

... 
```

然后我在运行时使用 javascript 设置 opaqueness 和 z-index 属性。我在每个主页的 HTML/jade 中重复 accountPage 的代码 5 次，而且对于这种方法，javascript 代码看起来也不干净。

```
- What I want is to create a TOTALLY SEPARATE "accountPage",
- Display on it click of "Login" button.
- Find out which of the 5 main pages user was on **/* This I dont know how to do */**
- Set that main page to background with opacity = 0.2
- Popup the accountPage for Login in front.
- After Login or cancel, bring the main page (user was on), back to focus 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:20:50.683

这听起来像是 iframe 或基于 ajax 的模态弹出窗口的完美候选者。jQuery 有很多可用的... [colorbox](http://www.jacklmoore.com/colorbox)恰好是我目前最喜欢的。

以下是它与颜色框的工作方式：

1.  通过以 CSS 类为目标来初始化登录链接上的颜色框。
2.  将颜色框设置为使用“iframe”，这将在弹出窗口中加载您的登录页面
3.  如果需要，您可以将查询字符串中的当前页面传递给模式弹出窗口，然后检索它并在登录页面上处理它。例如：（`<a href="/Sign-in/Log-in?returnUrl=[INSERT CURRENT URL HERE]" class="modal">Sign-in</a>`注意：这可以通过编程方式完成，`window.location.href`这样您就不必将当前 URL 硬编码到每个链接中）。
4.  您可以使用 CSS 调整底层页面的“不透明度”。它实际上是位于页面顶部的 100% 高度/宽度 div，但是，它会产生页面“变暗”或淡出的错觉。
5.  关闭弹出窗口后，原始页面将重新出现在焦点中，但是，您也可以执行回调函数来刷新页面（因为用户现在已登录）。

# arrays - Excel 宏数组

> ID：11456881
> 
> 赞同：2
> 
> 时间：2012-07-12T17:01:43.370
> 
> 标签：arrays, vba, excel

目前我有一个贯穿列表并删除重复值（在一列中）的宏，但事实证明它的效率非常低。对于它检查重复的每个条目，它必须遍历整个列；我的文件目前有 50,000 个条目，这不是一项小任务。

我认为宏工作的一种更简单的方法是让宏检查这个值是否在数组中。如果是，则删除条目所在的行。如果不是，则将值添加到数组中。

有人可以为宏的基本轮廓提供一些帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:20:53.477

下面的代码将遍历您的源数据并将其存储在一个数组中，同时检查重复项。收集完成后，它使用数组作为键来知道要删除哪些列。

由于删除后大量的电位屏幕更新，请务必关闭屏幕更新。（包括）

```
Sub Example()
    Application.ScreenUpdating = false
    Dim i As Long
    Dim k As Long
    Dim StorageArray() As String
    Dim iLastRow As Long
    iLastRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, "A").End(xlUp).Row

    ReDim StorageArray(1 To iLastRow, 0 To 1)

    'loop through column from row 1 to the last row
    For i = 1 To iLastRow
        'add each sheet value to the first column of the array
        StorageArray(i, 0) = ActiveSheet.Range("A" & i).Value
        '- keep the second column as 0 by default
        StorageArray(i, 1) = 0
        '- as each item is added, loop through previously added items to see if its a duplicate
        For k = 1 To i-1
            If StorageArray(k, 0) = StorageArray(i, 0) Then
                'if it is a duplicate set the second column of the srray to 1
                StorageArray(i, 1) = 1
                Exit For
            End If
        Next k
    Next i

    'loop through sheet backwords and delete rows that were maked for deletion
    For i = iLastRow To 1 Step -1
        If StorageArray(i, 1) = 1 Then
            ActiveSheet.Range("A" & i).EntireRow.Delete
        End If
    Next i

    Application.ScreenUpdating = true
End Sub 
```

* * *

根据要求，这是一种类似的方法，使用集合而不是数组进行键索引：（RBarryYoung）

```
Public Sub RemovecolumnDuplicates()
    Dim prev as Boolean
    prev = Application.ScreenUpdating
    Application.ScreenUpdating = false
    Dim i As Long, k As Long

    Dim v as Variant, sv as String
    Dim cl as Range, ws As Worksheet
    Set ws = ActiveWorksheet    'NOTE: This really should be a parameter ...

    Dim StorageArray As New Collection
    Dim iLastRow As Long
    iLastRow = ws.Cells(ActiveSheet.Rows.Count, "A").End(xlUp).Row

    'loop through column from row 1 to the last row
    i = 1
    For k = 1 To iLastRow
        'add each sheet value to the collection
        Set cl = ws.Cells(i, 1)
        v = cl.Value
        sv = Cstr(v)

        On Error Resume Next
            StorageArray.Add v, sv
        If Err.Number <> 0 Then
            'must be a duplicate, remove it
            cl.EntireRow.Delete
            'Note: our index doesn't change here, since all of the rows moved
        Else
            'not a duplicate, so go to the next row
            i = i + 1
        End If
    Next k

    Application.ScreenUpdating = prev
End Sub 
```

请注意，此方法不需要为列中单元格的值假定任何数据类型或整数限制。

（Mea Culpa：我不得不在记事本中手动输入，因为我的 Excel 现在正忙于运行项目测试。所以可能存在一些拼写/语法错误......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:01:12.583

这是我的评论的后续行动。**对于这样一个简单的操作，循环 50k 记录**+**循环数组**将是一个过度杀戮。

就像我在评论中提到的那样，将数组中的值复制到新工作表中。然后在 50k 条目旁边插入一个空白列并执行`Vlookup`or `CountIf`。完成后，执行自动筛选，然后一次性删除重复的条目。让我们举个例子，看看它是如何工作的。

假设我们有一个包含 1000 个项目的数组？在一张纸中，我们有 50k 个数据。下面的代码将被测试`1000 items in Array`并`50k Data`查看快照

![在此处输入图像描述](../Images/1efb17c742e3590fff0c737a0497ab98.png)

将此代码粘贴到模块中（**代码完成时间少于 5 秒**）

![在此处输入图像描述](../Images/c11ccd1142b5d0432133afdebe9b18ec.png)

```
Sub Sample()
    Dim ws As Worksheet, wstemp As Worksheet
    Dim LRow As Long
    Dim Ar(1 To 1000) As Long
    Dim startTime As String, EndTime As String

    startTime = Format(Now, "hh:mm:ss")

    Set ws = Sheets("Sheet1")
    Set wstemp = Sheets.Add

    '~~> Creating a dummy array
    For i = 1 To 1000
        Ar(i) = i
    Next i

    '~~> Copy it to the new sheet
    wstemp.Range("A1:A1000").Value = Application.Transpose(Ar)

    With ws
        LRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Columns(2).Insert Shift:=xlToRight
        .Range("B1").Value = "For Deletion"
        .Range("B2:B" & LRow).FormulaR1C1 = "=COUNTIF(" & wstemp.Name & "!C[-1],RC[-1])"
        .Columns(2).Value = .Columns(2).Value

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Filter, offset(to exclude headers) and delete visible rows
        With .Range("B1:B" & LRow)
            .AutoFilter Field:=1, Criteria1:="<>0"
            .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
        End With

        '~~> Remove any filters
        .AutoFilterMode = False

        .Columns(2).Delete
    End With

    EndTime = Format(Now, "hh:mm:ss")

    MsgBox "The process started at " & startTime & " and finished at" & EndTime
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:48:13.467

对于 Excel 2007 及更高版本：将数组复制到工作表并使用 removeduplicates 方法：

```
set ws = worksheets.add
ws.[A1].resize(ubound(yourarray,1),ubound(yourarray,2)).value = yourarray
ws.usedrange.removeduplicates columns:=1, header:=no 
```

这假设您的数组的下限是 1，您要删除重复的列是第 1 列，并且您的列表没有标题。然后，您可以找到新范围的边界并将其读回您的数组（首先擦除当前数组）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:18:58.433

我建议填充您的列，然后使用公式查找重复项并删除它们。我没有你的实际代码（你没有给我们任何代码）

```
dim a as range
dim b as range
set a = Range ("A1")

Do while Not isEmpty(A)
Set b = a.offset(1,0)

If b = a then
b= ""
else a.offset (1,0)

Loop 
```

我相信您可以在运行宏之前将过滤器放入代码中，或者只是记住过滤器。

# performance - 运行嵌套for循环而不重复变量？

> ID：11456882
> 
> 赞同：2
> 
> 时间：2012-07-12T17:01:44.143
> 
> 标签：performance, for-loop, nested-loops

是否有一种有效的方法来运行嵌套的 for 循环，避免任何具有相同值的计数器。显然，我可以运行一些 if 语句，如下所示，但是有没有更有效的方法？

```
for i = 1 to 20:
    for j = 1 to 20:
        if (i == j):
            continue
        else:            
            for k = 1 to 20:
                if (i == k) or (j == k):
                    continue
                else:
                    do something useful with these different numbers 
```

编辑：变量不可互换，因此 [2, 1, 0] 与 [0, 1, 2] 不同。“做一些有用的事情”将是对数字进行大约 6 次数字检查，包括对它们进行加法、平方和平方根。

谢谢，对可能不寻常的伪代码（和不断的编辑）感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:04:13.617

这看起来是你能做到的最有效的方法。你怎么拥有它有什么问题？

我将忽略我想不出任何理由需要这样做的部分......所以如果你有一个具体的案例，请分享？除非您尝试将某个项目与列表中的所有其他项目进行比较，否则我猜是不是？

可以这样做

```
list = {1,2,3,4,1,2,3,4} \\where list[0] will return 1, and list.size() will return 8
for(int i = 0; i < list.size()-1; i++){
    for(int j = i + 1; j < list.size(); j++){
        System.out.println(list[i] + "," + list[j]);
    }
} 
```

这样你就不会在你已经比较过的东西之间重复比较。

对于三个巢

```
list = {1,2,3,4,1,2,3,4} \\where list[0] will return 1, and list.size() will return 8
for(int i = 0; i < list.size()-2; i++){
    for(int j = i + 1; j < list.size()-1; j++){
        for(int k = j + 1; j < list.size(); k++){
            System.out.println(list[i] + "," + list[j] + "," + list[k]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:22:40.253

您唯一可以在这里节省效率的是您的循环逻辑。假设你正确地实现它，总会有 20*19*18 的操作要做。

您将无法找到您提供的有限详细信息的解决方案。什么是“有用的东西”？

如果事实证明对于该操作，i、j 和 k 的各个值无关紧要，只需 3 个数字的组合，那么是的，您可以显着节省效率。使用当前设置，您将传入 (i,j,k) 值 (1, 2, 3) (1,3,2) (2,1,3) (2,3,1) 等。 .

因此，如果您正在寻找组合，而不是排列，您可以通过在每个内部循环中开始 j 比 i 大一和 k 比 j 大一来修改它以很容易地减少 6 的工作量。

# java - UiBinder：可以覆盖 UiFactory 方法吗？

> ID：11456883
> 
> 赞同：1
> 
> 时间：2012-07-12T17:01:44.320
> 
> 标签：java, gwt, uibinder

在提出问题之前，我将简要介绍一下上下文。我有一个 Widget 类，它将 ui 实现“外包”到一个单独的类（如下所示）：

```
public class SimpleFilmWidget extends Composite implements FilmActivityControl {

    public static interface Ui {

        Panel getMainPanel();

        VoteWidget getVotePanel();

        InlineLabel getHaveNotSeenLabel();

        //...
    } 
```

实际的小部件类可以使用 Ui 类实例获取对特定子字段小部件/元素的引用：

```
 Ui ui;

    public SimpleFilmWidget() {
        this(new DefaultUi());
    }

    public SimpleFilmWidget(Ui customUi) {

        assert customUi != null : "UI should not be null!!!";

        ui = customUi;

        initWidget(ui.getMainPanel());
    } 
```

我用 UiBinder 提供了实际的 UI 实现，它使用 UiFactory 创建另一个复杂的子小部件

```
class DefaultUi implements Ui {

    //...

    @UiFactory
    protected VoteWidget createVoteWidget(){

        return new VoteWidget(msg){

            @Override
            protected SetVoteEvent onSetVote(Star star, boolean fireEvents) {
                return clientWidget.onSetVote(super.onSetVote(star, fireEvents));
            }
        };
    } 
```

问题是：当我提供 DefaultUi 的子类时，是否可以在子类中重写 UiFactory 方法而不混淆 UiBinder 解析器？

**编辑：**

**UiFactory 方法不应被覆盖**，因为 uibinder 会同时看到这两种方法（被覆盖和覆盖）并与同一类型的两个 uifactories 混淆：`[ERROR] Duplicate factory in class SimpleFilmWidget.DefaultUi for type VoteWidget`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:54:28.677

I see no reason it wouldn't be possible: UiBinder looks at the exposed API, and calls the method on the actual instance passed to `createAndBindUi`, this is just standard polymorphism.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:21:06.513

结论：

**UiFactory 方法不应被覆盖**，因为 uibinder 会同时看到这两种方法（被覆盖和覆盖）并与同一类型的两个 uifactories 混淆：`[ERROR] Duplicate factory in class SimpleFilmWidget.DefaultUi for type VoteWidget.`

*从评论到@Thomas Broyer：* 我怀疑，它然后调用超类的 UiFactory 注释方法，这不是我想要的。我离开了这个问题，因为在这种情况下解决方法对我来说已经足够了。

无论如何，感谢您的关注。

# android - Android 简单应用无法启动不知道为什么

> ID：11456888
> 
> 赞同：0
> 
> 时间：2012-07-12T17:02:04.960
> 
> 标签：android, button, save, volume, seekbar

我对这个简单的程序有疑问（实际上这是单个活动/类）。这不会返回任何错误，它只是在运行它时不会在模拟器/设备中启动。它包含一个 seekBar(Ringer Volume Bar) 和一个 OK 按钮（在搜索 Bar 后保存更改）。我不想要实时的 seekBar（我的意思是在 seekBar 中搜索时，会自动改变音量）

这是代码

```
public class Vol extends Activity {

public static final String TYPE = "TYPE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras  = getIntent().getExtras();
    final int volumeType = extras != null ? extras.getInt(TYPE) : -1;
    final AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    String title = "Unknown Volume";

    if (volumeType != -1) {
        switch(volumeType) {
        case AudioManager.STREAM_RING:

            break;
        }

        setContentView(R.layout.main);
        setTitle(title);
        final SeekBar systemSeek = (SeekBar) findViewById(R.id.volume_bar);
        systemSeek.setMax(audio.getStreamMaxVolume(volumeType));
        systemSeek.setProgress(audio.getStreamVolume(volumeType));
        systemSeek.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            public void onStopTrackingTouch(SeekBar seekBar) {
                final int setVolFlags = AudioManager.FLAG_PLAY_SOUND | AudioManager.FLAG_SHOW_UI;
                audio.setStreamVolume(volumeType,seekBar.getProgress(), setVolFlags);

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub

            }
        });

        Button ok  = (Button) findViewById(R.id.ok_button);
        ok.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if (volumeType == AudioManager.STREAM_RING){
                    audio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                }
                finish();

            }
        });

    } else {
        finish();

    }

} 
```

}

请你帮助我好吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:11:34.757

切 -

```
setContentView(R.layout.main); 
```

并粘贴在下面 -

```
super.onCreate(savedInstanceState); 
```

# android - 使用继承或片段之间的设计选择

> ID：11456893
> 
> 赞同：1
> 
> 时间：2012-07-12T17:02:26.830
> 
> 标签：android

我正在使用我们的 mCruiseOn 平台开发拼车应用程序。我有 2 个需要编码的活动，这两个活动都有 90% 的相同代码/流程和功能。我可以创建一个布局 xml 并将其包含在我的两个布局中，但我如何管理它的代码部分。目的是不重复代码，但要保持干净和可管理。

我需要通用代码来管理 findViewById、setOnClickListener 和 onClick 方法。例如，这两个活动都采用 GPS 中的开始和结束位置。这两个活动都有一个时间/日期对话框按钮。

一些想法

1.  所以 GetGPSAndTimeActivity 在这里我做了所有的 findViewById、onClickListener、onCreateDialog。那么我应该从 GetGPSAndTimeActivity 扩展吗？
2.  [在 Android 2.3.3 及更低版本中](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFEQFjAA&url=https://stackoverflow.com/questions/6528691/fragments-in-android-2-2-1-2-3-2-0-is-this-possible&ei=jwL_T6mKOoyJrAeV_NkC&usg=AFQjCNHtMciuk9mFr6IE9vJcPm_rZQlRdw)使用 Fragment 等Fragment

我更喜欢选项1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:59:03.810

这取决于你的情况。假设您有一个 Activity A 可以做一些事情，还有一个 Activity B 可以做与 A 完全相同的事情，但更多一点（比如添加一些按钮）。

在这种情况下，您可以让 Activity B 扩展您的 Activity A。B 只是添加缺少的内容。

如果活动 A 和 B 有很多共同点，但如果也有细微差别，准确地说：如果活动 A 包含 B 不需要的代码，您应该为活动 A 和 B 创建一个抽象基类 C，其中包含只有公共的代码子集。让 A 和 B 扩展 C 并将它们各自的额外代码添加到 A 和 B。

至于是否使用 Fragments：我会去的。从长远来看，您在支持平板电脑/多种屏幕尺寸方面的麻烦会更少，并且您可以在不同的环境中轻松地重复使用它们。

假设您的老板/客户突然想要我们从 Google Play 知道的精美 ViewPager 功能（左右滑动屏幕以切换类别）。如果您首先使用 Fragments，则可以非常轻松快速地完成此更改。如果您使用的是活动，则需要重新安排大量代码。

# php - 显示非粉丝的 Facebook 应用程序粉丝门

> ID：11456897
> 
> 赞同：0
> 
> 时间：2012-07-12T17:02:36.593
> 
> 标签：php, facebook, facebook-apps

我已经表演了以下，但即使作为粉丝，它也只是说“非粉丝”。
我已经上传了 facebook.php 文件并添加了我认为正确的应用程序设置。我做错了什么？

我的应用设置如下：

```
Canvas URL: http://www.mysite.com/myapp/  
Secure Canvas URL: https://www.mysite.com/myapp/  
Page Tab URL: http://www.mysite.com/myapp/index.php  
Secure Page Tab URL: https://www.mysite.com/myapp/index.php 
```

我在我的服务器上编写了 index.php 文件，如下所示：

```
<?php
require 'facebook.php';
//uploaded into same directory as index.php

$app_id = "myappid";
$app_secret = "myappsecret";
$facebook = new Facebook(array(
'appId' => $app_id,
'secret' => $app_secret,
'cookie' => true
));

$signed_request = $facebook->getSignedRequest();
$like_status = $signed_request["page"]["liked"];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>my app</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />

<script type="text/javascript">
window.fbAsyncInit = function() {
FB.Canvas.setSize();
}
// Do things that will sometimes call sizeChangeCallback()
function sizeChangeCallback() {
FB.Canvas.setSize();
}
</script>

<base target='_blank' />
</head>

<body>

<div id="container">

<?php if ($like_status) { ?>
FAN
<?php } else { ?>
NON-FAN
<?php } ?>

</div>

<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({
appId : 'myappid',
status : true, // check login status
cookie : true, // enable cookies to allow the server to access the session
xfbml : true // parse XFBML
});

window.fbAsyncInit = function() {
FB.Canvas.setAutoResize();
}
</script>
<script>
FB.Event.subscribe('edge.create',
function(response){
top.location.href = 'myappurl';
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:51:21.077

[这里](https://stackoverflow.com/questions/5093398/check-if-user-liked-page/5100287#5100287)描述的方法，通常可以找出用户是否是页面的粉丝。

如果您想按照自己的方式进行操作，请`var_dump($like_status)`在分配了一些价值后提供吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:06:42.307

请记住，signed_request 参数仅在第一页加载到 iframe 时可用——一旦您开始*在*应用程序中导航，将不再有 signed_request。（所以一旦你得到它，你必须将 signed_request 或类似的状态保存到会话 fe 中。）

如果您在第一次加载时没有获得任何数据，则 var_dump 变量 $_REQUEST 的内容，以查看该值是否存在。如果是，那么您的应用程序密码很可能是错误的——因为如果 Facebook::getSignedRequest 无法通过使用应用程序密码计算正确的哈希来验证签名请求，它将返回 null。请仔细*检查*您的应用程序密码是否真的正确。

# ruby - 如何“比较并找到最佳”最佳实践

> ID：11456900
> 
> 赞同：0
> 
> 时间：2012-07-12T17:02:46.413
> 
> 标签：ruby, algorithm

假设我有这样的事情：

```
def find_the_best(array)
  temp = 15435435435 # sufficiently large number
  value = 0
  array.each do |element|
    some_var = function_does_something_complex_and_returns_value(element)
    some_var < temp ? value = element[0]
  end
end 
```

这个足够大的数字解决方案有效，但它似乎有点 hacky。处理这个问题的最佳方法是什么，特别是在红宝石中，但通常也是如此。问题是它确实应该设置为 0，然后分配第一个值，然后只有当它更小时才应该采用之后的每个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:14:32.370

```
array.min_by{|e| function_does_something_complex_and_returns_value(e) } 
```

或者

```
array.inject {|m,e| [m, function_does_something_complex_and_returns_value(e)].min } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:10:18.487

您正在寻找的是`sort_by`通过一些任意标准对对象列表进行排序的例程：

```
best = array.sort_by do |element|
  function_does_something_complex_and_returns_value(element)
end.first 
```

您可能需要使用`first`or ，`last`具体取决于您想要从最高到最低还是从最低到最高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:46:33.190

这看起来不像是一个排序问题，而是基于标准的最佳拟合。

您正在寻找最小值，不需要有 temp 值（除非您没有告诉我们某些事情）。

只需假设第一个值将是最好的，然后继续检查。

```
best_value = array[0];
foreach( element in array )
{
    if( best_value > element )
        best_value = element;
} 
```

# php - 服务器不会创建 DOMDocument 的实例

> ID：11456902
> 
> 赞同：2
> 
> 时间：2012-07-12T17:02:52.603
> 
> 标签：php, upgrade, domdocument

我对php很陌生，我无法让它工作，我不明白为什么我不能..

我在本地使用 NetBeans 和 XAMPP，但我在学校有一个服务器“插槽”，我上传我的网页以供公众使用。

基本上，给定这段代码

```
<?php
echo "1";
$dom = new DOMDocument();
echo "2";
?> 
```

当我在本地通过 XAMPP 运行此文件时，它会按原样打印出“12”。但是，当我将 .php 文件复制到与其他所有文件一起使用的服务器时，它只打印出“1”。它在到达“2”之前失败。我的结论是它不会实例化 DOMDocument。怎么可能？在本地我有 php 版本 5.3.8，而在服务器上，它只有 5.1.6。这是问题吗？

在我看来，从 5.0 开始就支持 DOMDocument，但我可能错了。无论如何，我无权更新此版本来测试这一点，而且我找不到任何有关在早期版本中支持 DOM 的信息。

还是我忘记了什么？我在使用 5.1.6 中不支持的 JSON 时遇到了同样的问题，然后我可以在 index.php 旁边包含一些（“upgrade.php”）文件，并且它起作用了。有这样的建议吗？或者有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:20:58.163

请注意，您*应该*升级 PHP，但这不是问题。您的服务器上没有 libxml 或没有安装 php-xml。在基于 Fedora 的 linux 中，它不附带 PHP 的默认安装。跑去`yum install php-xml`拿。这将自动安装它的主要依赖项 libxml。

# processor - 分支预测器如何知道它做出了错误的猜测？

> ID：11456903
> 
> 赞同：2
> 
> 时间：2012-07-12T17:02:56.973
> 
> 标签：processor, branch-prediction

我的问题来自[神秘的回答](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)。据我了解，您有一个分支指令，它可以转到另一条指令，比如，`0x123344`或者它可以继续执行。

如果分支预测器根据过去的模式从其中任何一个中进行猜测，它如何意识到自己犯了错误并恢复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:24:51.687

这一切都来自分阶段的处理器，过去部分 CPU 保持空闲，现在我们尽可能地利用每一小块。如果没有分支或条件事件，这将是顺利的，但有时我们需要改变正在发生的事情。

因此，正如 Mystical 所提到的，预测器会做出猜测，以便大多数时间空闲的计算能力不会等待。处理器继续猜测猜测的内容，并在等待的前一条指令完成时与预测器进行比较。如果它猜对了，则不会发生任何事情，如果它猜错了，则会发送一个信号，并且预测点之后的阶段将被抛出并以正确的值再次运行。

在技​​术层面如何做到这一点因架构而异。它与其说是一种还原动作，不如说是它使在错误预测之后计算的所有内容无效，并且这些过程被重做。

# django - 模型上的自定义保存方法 - django

> ID：11456913
> 
> 赞同：13
> 
> 时间：2012-07-12T17:03:35.723
> 
> 标签：django, django-1.4

我在我的一个模型上覆盖了 save 方法：

```
def save(self, *args, **kwargs):
    self.set_coords()
    super(Post, self).save(*args, **kwargs)

def __unicode__(self):
    return self.address

# set coordinates
def set_coords(self):
    toFind = self.address + ', ' + self.city + ', ' + \
        self.province + ', ' + self.postal

    (place, location) = g.geocode(toFind)

    self.lat = location[0]
    self.lng = location[1] 
```

但是，我只想`set_coords()`在创建帖子时运行一次。更新模型时不应运行此函数。

我怎样才能做到这一点？有什么方法可以检测模型是否正在创建或更新？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-12T17:05:40.513

```
def save(self, *args, **kwargs):
    if not self.pk:
        self.set_coords()
    super(Post, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:36:13.680

我认为正确的方法是使用 post_save 信号：

```
def set_coords(sender, **kw):
    model_instance = kw["instance"]
    if kw["created"]:
        toFind = model_instance.address + ', ' + model_instance.city + ', ' + \
        model_instance.province + ', ' + model_instance.postal
        (place, location) = g.geocode(toFind)
        model_instance.lat = location[0]
        model_instance.lng = location[1]
        model_instance.save()
post_save.connect(set_coords, sender=MyModel) 
```

# ruby - 使用 ruby -pg 插入数据库转储

> ID：11456916
> 
> 赞同：2
> 
> 时间：2012-07-12T17:03:44.367
> 
> 标签：ruby, postgresql, dump, psql

我有一个包含各种插入语句和偶尔的“\connect”命令的数据库转储文件

问题是它`PG::Connection.exec()`不接受 psql 的`\`-command 之类的`\i`or`\c`等​​。

有没有办法使用 ruby​​-pg（或者可能是另一个 pg-gem）来完成这项工作？

由于数据库位于不同的主机上，我无法使用 Unix 套接字，因此无法以`postgres`没有密码的用户身份连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:38:10.190

只使用[pg_restore](http://www.postgresql.org/docs/9.1/static/app-pgrestore.html)之类的 psql 命令行工具可能更容易：

```
pg_restore -d newdb db.dump 
```

如果您对托管原始数据库的框具有 ssh 访问权限并且知道需要转储哪个表，则可以 ssh 进入该框并将[pg_dump](http://www.postgresql.org/docs/9.1/static/app-pgdump.html)输出直接通过管道传输到本地数据库。就像是：

```
ssh user@original_database pg_dump -U remote_user_name -T schema_name.table_name mydb | psql -U local_user_name -d local_database 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:13:01.547

答案是“否”，因为反斜杠命令不是 Postgres 命令。它们是*psql*命令，这是默认的命令行客户端。没有第三方工具会复制这些命令，因为它们不是*libpq* API 的一部分。

现在，也就是说，是 \connect 文件中唯一的反斜杠命令吗？如果是这样，那么您应该能够通过从 \connect 语句中解析出数据库名称来实现这一点，然后从每个 \connect 语句之后的第一行开始将转储文件拆分为块。此时，只需针对该块的 \connect 语句中给定的数据库连接正常运行每个块。

据我所知，如果不创建新连接，就无法重新连接到不同的数据库，因为必须重新验证用户的凭据。这就是 psql 在幕后的工作方式。

还有另一种想法，如果只有一个 \connect 语句，并且它紧跟在 CREATE DATABASE 语句之后，即紧随 CREATE ROLE 之类的语句之后，那么如果您将数据库创建为一个单独的步骤并从中删除 CREATE DATABASE 和 \connect 语句该文件，您可以在不分块的情况下执行此操作。请记住，您仍然需要两个连接，因为在创建数据库之前您无法连接到数据库，并且在连接到新数据库的过程中仍然无法更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:52:14.083

在尝试了很多东西之后，包括在 \connect 行拆分文件等，我最终暂时将其使用了“老式的 shell 脚本方式”......这是我想要避免的方式。但我必须去某个地方

我现在正在做的事情如下：

```
 insert_command = "cat #{dump_file_path} | " +
        "ssh -p #{port} -i #{key} #{ssh_user}@#{db_host} " +
        "\"su - postgres -c 'cat > /tmp/rb_dump.sql && psql -f /tmp/rb_dump.sql ; rm /tmp/rb_dump.sql'\""

    Open3.popen3 insert_command do |stdin, stdout, stderr, t|
      unless t.value.to_s.include? "exit 0"
        <handle error>
      end
    end 
```

在我看来，这完全是 hacky，但它确实有效 ^^

我的另一个解决方案是下一个代码，它有一个大问题（如下所述）

```
 def insert_database_dump(dump_file_handle, host, user, password, database = nil)
    begin
      pg = PG.connect(host: host, user: user, password: password, dbname: database)
      until dump_file_handle.eof?
        line = dump_file_handle.readline(";")
        if line =~ /connect\s(\w*)/
          line.gsub!("\\connect", "").strip!
          insert_database_dump(dump_file_handle, host, user, password, line)
        else
          pg.exec(line)
        end
      end
    ensure
      pg.finish unless pg.finished?
    end
  end 
```

该代码执行以下操作（仅重要部分）：

*   从 sql 中读取一行，直到 ";" （查询被分成几行，所以在换行之前阅读是行不通的
*   执行查询
*   如果该行看起来像“连接单词”，则选择“单词”作为数据库名称，并使用“单词”作为数据库名称再次调用该方法，并且当前文件句柄指向我想要的正确行继续。

尽管方法可能有更优雅的方式来调用自身，但除非 sql 转储中有注释，否则这种方法是有效的。问题是评论看起来像这样：

```
-- foo: bar; bam: baz; 
```

因此，当使用“;”进行拆分时，它会执行“-- foo: bar;”，因为它是一个注释，但由于“bam: baz;”而失败。

我目前没有简单的解决方案来即时删除评论行。所以 Open3 解决方案将不得不做，直到我发现。

干杯，斯特凡

# xcode - 更改 xcrun 开发者路径

> ID：11456918
> 
> 赞同：65
> 
> 时间：2012-07-12T17:03:48.480
> 
> 标签：xcode

如何更改 xcrun 指向的目录？目前指向

> xcrun：错误：无法统计活动 Xcode 路径“/Volumes/Xcode/Xcode44-DP7.app/Contents/Developer”。（没有相应的文件和目录）

我需要改变位置。谢谢你。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-10-01T12:32:36.683

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-12T17:11:52.537

用于`xcode-select -switch`选择默认使用的 Xcode 版本。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-11-05T03:01:25.603

```
sudo xcode-select --switch /Library/Developer/CommandLineTools 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-17T10:00:15.613

就我而言，我必须：

1.  安装 Xcode 的命令行工具，转到*preferences* -> *Locations并为**Command Line Tools*设置正确的值。
2.  在“*下载*” -> “*组件”选项卡*中，我单击了名为“*命令行工具*”的行上的安装。
3.  Marmalade 开始使用 Xcode 正常工作。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-06-17T04:50:47.247

如果您运行此命令：

```
$ xcode-select -p 
```

它将打印到屏幕如下：

*/Volumes/Xcode/Xcode44-DP7.app/Contents/Developer*（在你的情况下）

要将其更改为默认值，您可以执行以下操作：

```
$ sudo xcode-select -r
Password: 
```

再检查一遍：

```
$ xcode-select -p
/Applications/Xcode.app/Contents/Developer 
```

从以下位置获取更多信息：

```
$ xcode-select

Usage: xcode-select [options]

Print or change the path to the active developer directory. This directory
controls which tools are used for the Xcode command line tools (for example,
xcodebuild) as well as the BSD development commands (such as cc and make).

Options:
  -h, --help                  print this help message and exit
  -p, --print-path            print the path of the active developer directory
  -s <path>, --switch <path>  set the path for the active developer directory
  -v, --version               print the xcode-select version
  -r, --reset                 reset to the default command line tools path 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-08-02T03:53:43.727

**打开 xcode 并导航到首选项...**

[![在此处输入图像描述](../Images/033111d62e3551257f1d37497f204552.png)](https://i.stack.imgur.com/Y2Xlx.png)

**从命令行工具中选择 xcode 的位置。**

[![在此处输入图像描述](../Images/1ae17f86954b00161f167354040440ae.png)](https://i.stack.imgur.com/GhlfM.png) **之后从终端执行命令。**

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-03-17T00:22:24.643

或者，改写 DEVELOPER_DIR 环境变量：

```
export DEVELOPER_DIR="/Applications/Xcode.app/Contents/Developer" 
```

此设置对每个用户帐户都是唯一的。如果存在，它将覆盖`xcode-select`选择。

可选：您可以通过编辑您的 .bash_profile 文件来使其在登录会话之间持续存在。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-05-19T04:17:29.770

您无需安装 xcode 即可使用 xcrun。

只需安装 xcode 命令行工具并切换到它。

安装 x code 命令行工具

```
xcode-select --install 
```

切换到命令行工具

```
sudo xcode-select --switch /Library/Developer/CommandLineTools 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-29T14:49:53.627

卸载xcode后？

在控制台中运行它

```
sudo xcode-select --reset 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-19T12:20:25.600

我试图通过终端获取 Git 克隆。

1.  User-Mac-mini:~ user_name$ cd /Users/yser_name/Documents/Developer/Xcode_Projects/Xcode_Proj/AAG/EJ

2.  user-Mac-mini:EJ user_name$ git clone [https://smaplebitbucket.org/projectname/sample.git](https://smaplebitbucket.org/projectname/sample.git)

我收到以下错误：

```
xcrun: error: active developer path ("/Applications/Xcode 8.app/Contents/Developer") does not exist, use `xcode-select --switch path/to/Xcode.app` to specify the Xcode that you wish to use for command line developer tools (or see `man xcode-select`) 
```

最初我有两个 xcode 7.3 和 8.0。我 为 7.0保留了**xcode的名称，为 8.0 保留了****xcode 8**的名称。

我从 Applications 中删除了7.0 的**xcode**并将**xcode 8**重命名为**xcode**。
在 Xcode 偏好中，它指向**xcode 8**的位置，但它不存在。

我使用命令更改了位置：

```
 sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

Git 命令工作，我能够从 GIT 下载项目。

您也可以从 Xcode 偏好中执行此操作。

[![在此处输入图像描述](../Images/687adcbb88bb1809262793689344f59c.png)](https://i.stack.imgur.com/g6fQv.png)

有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-23T15:59:45.200

sudo xcode-select --switch /Library/Developer/CommandLineTools 对我有用。

为了您的信息，我用这个搞砸了我的配置：

```
 sw_vers -productVersion | grep -E '^10\.([89]|10)' >/dev/null && bash -c "[ -d /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain ] && sudo -u $(ls -ld /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain | awk '{print $3}') bash -c 'ln -vs XcodeDefault.xctoolchain /Applications/Xcode.app/Contents/Developer/Toolchains/OSX$(sw_vers -productVersion).xctoolchain' || sudo bash -c 'mkdir -vp /Applications/Xcode.app/Contents/Developer/Toolchains/OSX$(sw_vers -productVersion).xctoolchain/usr && for i in bin include lib libexec share; do ln -s /usr/${i} /Applications/Xcode.app/Contents/Developer/Toolchains/OSX$(sw_vers -productVersion).xctoolchain/usr/${i}; done'" 
```

# iphone - UIImageView 3D失真

> ID：11456919
> 
> 赞同：0
> 
> 时间：2012-07-12T17:03:52.020
> 
> 标签：iphone, objective-c, uiview, uiimageview, distortion

我一直在寻找 stackoverflow 和互联网很长一段时间，但似乎找不到任何可用的东西。

我想实现这一点： ![UIImage失真](../Images/bfe0430fef7f6f8851a0ead3d8377f55.png)

重要的是我可以改变四个角的原点。像这样的东西：

```
imageView.layer.somethingMagic.imageRightTop = (CGPoint){ 230, 30 };
imageView.layer.somethingMagic.imageRightBottom = (CGPoint){ 300, 150 }; 
```

它会导致变形的“3D”图像。

我不需要实际工作的代码，只需要一些在哪里/寻找什么的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:18:47.933

您需要使用`CGAffineTransformConcat`/ `CGAffineTransformDistort`。这里有一个教程展示了如何做到这一点：

[http://b2cloud.com.au/how-to-guides/ios-distort-transform](http://b2cloud.com.au/how-to-guides/ios-distort-transform)

> ```
> #define CGAffineTransformDistort(t, x, y) (CGAffineTransformConcat(t, CGAffineTransformMake(1, y, x, 1, 0, 0)))
> #define CGAffineTransformMakeDistort(x, y) (CGAffineTransformDistort(CGAffineTransformIdentity, x, y)) 
> ```

`UIViewAnimation`如上页示例所示，显然不要在 a 中使用它。

# objective-c - Objective-C 运行时错误“使用未声明的标识符 'objc_property_t'”

> ID：11456924
> 
> 赞同：30
> 
> 时间：2012-07-12T17:04:14.040
> 
> 标签：objective-c, objective-c-runtime

我正在尝试使用我在此处的答案中找到的 obj-c 运行时方法从我的类中获取属性，但是我在编码时收到很多警告/错误，我需要导入库还是在为了使 obj-c 运行时函数可用？

objc_property_t *properties = class_copyPropertyList([self class], &outCount);

警告：“函数 'class_copyPropertyList' 的隐式声明在 C99 中无效错误：使用未声明的标识符 'objc_property_t'

这是我复制的整个块：

```
unsigned int outCount, i;
objc_property_t *properties = class_copyPropertyList([self class], &outCount);
for (i = 0; i < outCount; i++) {
    objc_property_t property = properties[i];
    NSString *propertyName = [[NSString alloc] initWithCString:property_getName(property)];
    id propertyValue = [self valueForKey:(NSString *)propertyName];
    if (propertyValue) [props setObject:propertyValue forKey:propertyName];
}
free(properties); 
```

提前致谢！。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-12T17:08:06.517

您必须导入运行时

```
#import <objc/runtime.h> 
```

# javascript - if (function() === false){ 这样做}

> ID：11456929
> 
> 赞同：3
> 
> 时间：2012-07-12T17:04:36.113
> 
> 标签：javascript, jquery, if-statement

我正在尝试解决这个问题，我对 javascript 比较陌生，所以：

函数 termos() 给出真或假结果；

可能对此的解决方案很简单，但无法解决。是否有可能做到这一点？我写这段代码只是为了说明我的疑问

```
function termos() {
  if($('.terms').is(':checked')) {
    return true;
  } else {
    return false;
  }
} 
```

我可以用吗

```
} else if(termos() === false) {
  alert('please agree with terms');
  return false;
} 
```

这不起作用

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T17:09:24.350

据我了解，您想查看 termos() 是返回 true 还是 false ，在这种情况下，当它返回 false 时，您想查看一段代码。

您可以使用**虚假/真实评估**（[http://11heavens.com/falsy-and-truthy-in-javascript](http://11heavens.com/falsy-and-truthy-in-javascript)）

所以你可以说：

```
if ( termos() ) {
  // when its true
} else {
 // when its false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:24:26.037

由于您正在使用一个类来设置 jQuery 对象，因此**如果该类有多个项目**，您将得到相互冲突的结果。我假设您的问题缺乏细节，这可能是这种情况。

设置`id`复选框，以便您可以正确选择元素。另外，最好设置父容器，这样 jQuery 就不会搜索整个 DOM。

此外，您可以像这样减少代码：

```
function termos(){
  return $('#Agree',"#ParentContainer").is(':checked');
}

if(!termos()){
  alert('please agree with terms');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:47:22.063

这解决了我的问题。感谢谁试图提供帮助。

```
function termos(){
        if ($('.checky3').is(':checked')){
            return 1;
        }
    }

if (termos() !== 1){
        $('.checky3').css('border','solid 1px red');
        return false;
} 
```

# plone - 自定义视图的遍历错误

> ID：11456930
> 
> 赞同：2
> 
> 时间：2012-07-12T17:04:39.437
> 
> 标签：plone, traversal

使用应显示 flv 类型视频的自定义产品处理 Plone 3.3.6 实例。我试图弄清楚从哪里开始解决这个遍历错误。我确定这适用于 Plone 3.1.x（尽管我确实有很好的想象力）。

```
TraversalError: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents') 
```

我在下面包含了回溯：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 119, in publish
  Module ZPublisher.mapply, line 88, in mapply
  Module ZPublisher.Publish, line 42, in call_object
  Module zope.formlib.form, line 770, in __call__
  Module zope.formlib.form, line 764, in render
  Module Shared.DC.Scripts.Bindings, line 313, in __call__
  Module Shared.DC.Scripts.Bindings, line 350, in _bindAndExec
  Module Products.PageTemplates.PageTemplateFile, line 129, in _exec
  Module Products.CacheSetup.patch_cmf, line 77, in PT_pt_render
  Module Products.CacheSetup.patch_utils, line 9, in call_pattern
  Module Products.PageTemplates.PageTemplate, line 98, in pt_render
  Module zope.pagetemplate.pagetemplate, line 117, in pt_render
   - Warning: Macro expansion failed
   - Warning: exceptions.AttributeError: @@tag_macros
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 891, in do_useMacro
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 536, in do_optTag_tal
  Module zope.tal.talinterpreter, line 521, in do_optTag
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 957, in do_defineSlot
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 536, in do_optTag_tal
  Module zope.tal.talinterpreter, line 521, in do_optTag
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 861, in do_defineMacro
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 957, in do_defineSlot
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 536, in do_optTag_tal
  Module zope.tal.talinterpreter, line 521, in do_optTag
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 949, in do_defineSlot
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 861, in do_defineMacro
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 536, in do_optTag_tal
  Module zope.tal.talinterpreter, line 521, in do_optTag
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 855, in do_condition
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 534, in do_optTag_tal
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 745, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 223, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: index
   - Line 128, Column 8
   - Expression: <StringExpr 'plone.belowcontentbody'>
   - Names:
      {'container': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'context': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'default': <object object at 0xb7f33528>,
       'here': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xe3c866c>,
       'request': <HTTPRequest, URL=http://videoserver/Members/johndoe/sample-video.flv/file_view>,
       'root': <Application at >,
       'template': <ImplicitAcquirerWrapper object at 0xe34dcec>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'admin'>,
       'view': <Products.Five.metaclass.SimpleViewClass from /data/Plone/buildout/eggs/p4a.video-1.3-py2.4.egg/p4a/video/browser/video.pt object at 0xe4ce36c>,
       'views': <zope.app.pagetemplate.viewpagetemplatefile.ViewMapper object at 0xe2fa86c>}
  Module Products.Five.browser.providerexpression, line 37, in __call__
  Module plone.app.viewletmanager.manager, line 154, in render
  Module plone.app.viewletmanager.manager, line 83, in render
  Module plone.app.layout.viewlets.common, line 44, in render
  Module alteroo.assesscontent.browser.viewlet, line 95, in index
  Module Shared.DC.Scripts.Bindings, line 313, in __call__
  Module Shared.DC.Scripts.Bindings, line 350, in _bindAndExec
  Module Products.PageTemplates.PageTemplateFile, line 129, in _exec
  Module Products.CacheSetup.patch_cmf, line 77, in PT_pt_render
  Module Products.CacheSetup.patch_utils, line 9, in call_pattern
  Module Products.PageTemplates.PageTemplate, line 98, in pt_render
  Module zope.pagetemplate.pagetemplate, line 117, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 855, in do_condition
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 536, in do_optTag_tal
  Module zope.tal.talinterpreter, line 521, in do_optTag
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 534, in do_optTag_tal
  Module zope.tal.talinterpreter, line 516, in no_tag
  Module zope.tal.talinterpreter, line 346, in interpret
  Module zope.tal.talinterpreter, line 745, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 223, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: assessment_input
   - Line 12, Column 4
   - Expression: <PathExpr standard:'view/contents'>
   - Names:
      {'container': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'context': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'default': <object object at 0xb7f33528>,
       'here': <ATFile at /sites/videoserver/plone/Members/johndoe/sample-video.flv>,
       'loop': {},
       'nothing': None,
       'options': {'args': (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>,)},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xe15590c>,
       'request': <HTTPRequest, URL=http://videoserver/Members/johndoe/sample-video.flv/file_view>,
       'root': <Application at >,
       'template': <ImplicitAcquirerWrapper object at 0xe0dacec>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'admin'>,
       'view': <Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>,
       'views': <zope.app.pagetemplate.viewpagetemplatefile.ViewMapper object at 0xe4bb78c>}
  Module zope.tales.expressions, line 217, in __call__
  Module Products.PageTemplates.Expressions, line 155, in _eval
  Module zope.tales.expressions, line 124, in _eval
  Module Products.PageTemplates.Expressions, line 105, in trustedBoboAwareZopeTraverse
  Module zope.traversing.adapters, line 164, in traversePathElement
   - __traceback_info__: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents')
  Module zope.traversing.adapters, line 52, in traverse
   - __traceback_info__: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents', [])
TraversalError: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents') 
```

更多信息：我将 p4a.video 固定到 1.1 版，该扩展正在拉入 1.3。p4a.video 与旧版本的 hach​​oir 包不兼容，我至少需要 1.2.1 包，然后我的实例才能正常启动。我的构建配置的版本部分现在包括以下内容。

**但这似乎与plone.app.z3cform有关**

```
extends =
        ...
        http://good-py.appspot.com/release/plone.app.z3cform/0.4.9?plone=3.3.6

[versions]
p4a.plonevideoembed = 1.1
p4a.video = 1.1
hachoir-core = 1.2.1
hachoir-metadata = 1.2.1
hachoir-parser = 1.2.1 
```

我是怎么做的：

1.  一般来说，在前台模式下启动我的实例以进行故障排除（bin/instance fg）非常有用。
2.  [http://good-py.appspot.com](http://good-py.appspot.com)绝对是固定版本的救星（没有选择固定 plone.app.z3cform 0.4.3，但 0.4.9 已经足够接近了。结果我仍然必须在我的构建的 [versions] 部分中明确固定 0.4.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:32:21.890

回答我自己的问题。

该问题与一个 viewlet 相关，与我试图访问的视图相关联。

viewlet 在名为“assessment_input”的模板中引用了自定义 z3c.form，因此这部分回溯：

```
- URL: assessment_input
- Line 12, Column 4 
```

我肯定知道这一点，因为当我通过在我的自定义产品的 browser/configure.zcml 中将其注释掉来暂时禁用有问题的 viewlet 时，视图开始工作（当然不显示 viewlet）。

在 plone 中呈现基于 z3c.form 的表单的方式在 plone.z3cform 的 0.5.8 版及更高版本中发生了变化（此处记录：[https](https://dev.plone.org/ticket/10022) ://dev.plone.org/ticket/10022 ），在 plone 版本中.z3cform 在 0.5.8 之前，它曾经可以通过在 viewlet 模板中调用“view/contents”来呈现表单。回溯意味着较新的 ​​plone.z3cform（不支持“视图/内容”约定）导致错误。

```
 - Expression: <PathExpr standard:'view/contents'>

    <snip> ...

      - __traceback_info__: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents', [])
   TraversalError: (<Products.Five.viewlet.metaconfigure.MyFormWrapper object at 0xe4c36cc>, 'contents') 
```

修复要求我在构建中将我的 plone.z3cform 版本固定到 0.5.7

```
[versions]
plone.z3cform = 0.5.7 
```

正如问题中提到的，我使用 good-py known good set (KGS) 固定了 plone.app.z3cform 0.4.9 的版本，我认为这是必要的，但还没有绝对测试过。

现在这是一个*足够好的*解决方案，继续前进，我需要为我的产品的更新版本重写我的 viewlet，以便当我升级到 Plone 4.x 时，viewlet 支持 plone.z3cform 的更新，并且可以说是更好的渲染方法形式。

# regex - 需要正则表达式模式来匹配 MS Project 前任列表

> ID：11456932
> 
> 赞同：2
> 
> 时间：2012-07-12T17:04:52.963
> 
> 标签：regex, ms-project

在 MS Project 中，任务可以链接到多个其他任务，这些任务可以驻留在单独的（外部）项目文件中。获得对这些外部链接任务的引用的唯一方法是解析出“Predecessors”字段，它是一个逗号分隔的链接列表。不幸的是，这些外部链接的路径中可能有逗号，因此简单的拆分不起作用。

这是一个带有 3 个链接的示例，第二个是外部链接：

> 123FS+5d,\\server\文件夹，带逗号\project1.mpp\456,789

对于内部链接，格式可以是以下任何一种：

*   #tk
*   #tk+#d
*   #tk-#d

其中第一个数字是 ID，占位符 tk 可以是 FS、FF、SS 或 SF，可选的最后一部分（滞后）是 +/- # 天。

对于外部链接，链接信息前面是包含路径的文件名，后跟反斜杠。路径可以是 UNC（例如 \\）或映射的驱动器号（例如 L:\）。

一个字段中可以有一个或多个链接，并且所有链接、部分链接或没有链接都可以是外部链接。

**我需要一个正则表达式模式来匹配这些链接列表。**

感谢您的帮助！

**编辑**

为了后代的缘故，这是最有效的模式，因为它也匹配来自 Project Server ("<>\file name\123") 的路径

```
(((<>\\[^\\]+\\)+)|([A-Z]:|\\)\\([^\\]+\\)+)?\d+([FS]{2}([+-]\d+d)?)?(?=,|$) 
```

另请参阅[如何获取外部依赖任务的唯一 ID？](https://stackoverflow.com/questions/68943247/ms-project-how-can-i-get-the-unique-id-of-an-external-dependency-task/68943829#68943829)进一步增强此正则表达式模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:03:29.943

## 初步答案：

使用您提供的示例的修改版本并放入一堆其他东西，我想出了这个表达式：

```
,(?=(([A-Z]:|\\)\\([^\\]+\\)+)?\d+([FS]{2}([+-]\d+d)?)?(?=,|$)) 
```

它标识了一个逗号，后面跟着你的一种可能的模式，你应该能够用它来分割你的东西（我认为）——如果你有问题，请告诉我，我会尽力帮助——跑去现在开会:-D

## 编辑：

要匹配链接本身，而不是拆分，请从表达式中删除初始逗号和前瞻，如下所示（将拆分表达式转换为匹配表达式通常是这种情况，但并非总是如此......）：

```
(([A-Z]:|\\)\\([^\\]+\\)+)?\d+([FS]{2}([+-]\d+d)?)?(?=,|$) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:47:52.020

您要求拆分，但匹配更容易，并且需要的正则表达式库中的功能更少：

```
((?:(?:\\\\|[A-Z]:).*\\)?\d+(?:(?:FS|FF|SS|SF)(?:\+|-)?(?:\d+d)?)?) 
```

# asp.net - 如何初始化 jQuery UI 选项卡？

> ID：11456941
> 
> 赞同：0
> 
> 时间：2012-07-12T17:05:21.617
> 
> 标签：asp.net, asp.net-mvc, jquery-ui, jquery

我正在查看以下 SO 答案，它说：

> 在 init 之后获取或设置微调器选项。
> 
> ```
> //getter 
> var spinner = $( ".selector" ).tabs( "option", "spinner" ); 
> //setter 
> $( ".selector" ).tabs( "option", "spinner", 'Retrieving data...' ); 
> ```

初始化在哪里？如何设置 getter 和 setter？谢谢你的帮助！

[将加载图形添加到 JQuery UI Ajax 选项卡？](https://stackoverflow.com/questions/3944482/add-loading-graphic-to-jquery-ui-ajax-tabs)

这是我的脚本：

```
 $(function () {
        $("#tabs").tabs({
            ajaxOptions: {
                error: function (xhr, status, index, anchor) {
                    $(anchor.hash).html("I tried to load this, but couldn't. Try one of the other links?");
                },
                spinner: '<img src="http://i.stack.imgur.com/Pi5r5.gif" />'
            }
        });
    }); 
```

我的 HTML/Razor 代码：

```
<div id="tabs">

    <ul>
       <li><a href="#tabs-1"><span>News-1</span></a></li>
       <li><a href="@Url.Action("GetNews", "Home")"><span>Headline News</span></a></li>
    </ul>
    <div id="tabs-1">
        <fieldset>
            <legend>News-2</legend>
            <p>My News.</p>
        </fieldset>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:09:04.317

您可能想查看“选项”**选项**卡下的文档：http : [//jqueryui.com/demos/tabs/#option-spinner](http://jqueryui.com/demos/tabs/#option-spinner)

# ajax - 与 JQuery 一起使用时，Ajax 响应具有不同的格式

> ID：11456946
> 
> 赞同：1
> 
> 时间：2012-07-12T17:05:45.340
> 
> 标签：ajax, json, jquery

我正在使用 JQuery .when() 函数进行练习，当我将 .when 与 2 个执行 ajax 调用的函数一起使用时，我收到了意想不到的结果。

例如，对于单个功能

```
$.when(getFolders(id)).then(function(folders) {
     /* return value is as expected */
}); 
```

以下是本例中文件夹的内容，

![在此处输入图像描述](../Images/cd6f49ffbf950f33fc79454dfcdfa887.png)

但是，在以下情况下，

```
$.when(getFolders(idOfClickedFolder), getFiles(idOfClickedFolder))
   .then(function( folders, files ) {
      /* results formats are not similar here with above one */
}); 
```

文件夹的内容如下所示，实际的文件夹对象位于响应的第一个对象内。我的意思是我可以通过文件夹 [0] 访问返回的 JSON 对象。

![在此处输入图像描述](../Images/0811ba8b47c52e6a4fdac9b04831dc08.png)

以下是 getFolders 函数，getFiles 与 getFolders 相同，但 ajax 具有不同的 url。

```
function getFolders(rootId) {
    return $.ajax({
        url: '/FileManager/GetFolders/' + rootId,
        async: true,
        dataType: 'json'
    });
} 
```

我想知道为什么我会以两种不同的格式获得结果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:48:15.460

jQuery AJAX Deferred 总是返回 3 个参数：data、textStatus、jqXHR。服务端返回的数据，根据dataType参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。（来自 $.ajax 文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）

当您将 $.when 与 2 个 AJAX 延迟一起使用时，这 3 个参数位于一个数组中。

来自 $.when() 文档：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

```
$.when( $.ajax("test.aspx") ).then(function(ajaxArgs){ 
     alert(ajaxArgs[1]); /* ajaxArgs is [ "success", statusText, jqXHR ] */
}); 
```

如果你想创建一个只返回第一个参数的自定义 AJAX Deferred，你可以这样做：

```
// creating a new deferred
var myDfd = $.Deferred();

// execute AJAX query, and when the query is okay, resolve my deferred with only the res of the AJAX query
$.ajax({
   url: '/FileManager/GetFolders/' + rootId,
   async: true,
   dataType: 'json'
}).then(function(folders) {
   myDfd.resolve(folders);
});

// I can use my own Deferred
$.when(myDfd).then(function(folders) {
  // folders contains ajax response only
}); 
```

# c# - 如何高效地多线程 HttpWebRequests？

> ID：11456948
> 
> 赞同：1
> 
> 时间：2012-07-12T17:05:52.150
> 
> 标签：c#, .net, multithreading, httpwebrequest

我正在尝试对 httpwebrequest 进行多线程处理。它不需要返回响应，我只需要尽快将它们发送出去。目前我正在使用任务，但显然这不是最有效的做事方式，因为它使用您的系统规格来确定线程而不是连接速度。

所以我想我想问的是基于连接速度而不是你的电脑拥有的核心数量使用线程的最有效方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:08:16.780

您可以使用`BeginGetResponse()`方法，它`async`是`WebRequest`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-08T04:17:48.043

默认情况下，.Net 应用程序允许打开 2 个到 Web 服务器的连接。您可以通过设置此变量来增加数量

```
//Set the connection limit of HTTP
System.Net.ServicePointManager.DefaultConnectionLimit = 20; 
```

使用常规调用或异步方法，使用 HttpWebRequest/HttpWebResponse，**您必须正确处理/关闭来自 GetReponseStream() 的流**。通过从 GetResponseStream() 关闭 Stream，您的应用程序将在完成后终止 HTTP 连接。

例如，在下面的代码中，我从网络返回 StreamReader

```
public static StreamReader LoadWeb(string URL)
    {
        if (!URL.StartsWith("http"))
        {
            URL = "http://" + URL;
        }

        HttpWebResponse myResponse = null;
        HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(new Uri(URL));

        System.IO.Stream myStream = null;
        StreamReader myStreamReader = null;
        myRequest.Method = "GET";
        myRequest.Proxy = null;
        myRequest.Timeout = 60000;
        myRequest.KeepAlive = false;
        try
        {
            myResponse = (HttpWebResponse)myRequest.GetResponse();
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show("Error : " + ex.Message);
            return null;
        }

        if (myResponse != null)
        {
            if (myResponse.StatusCode == System.Net.HttpStatusCode.OK)
            {
                myStream = myResponse.GetResponseStream();
                myStreamReader = new StreamReader(myStream);
            }
        }

        return myStreamReader;

    } 
```

之后，我得到了 LoadWeb 函数的返回值

```
StreamReader reader = LoadWeb("http://www.google.com");
//...process the reader
//Finally, close the reader
if (reader != null)
     reader.Close(); //This line will terminate the HTTP connection 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:37:53.873

我建议你建立一个工人队列并在字典中跟踪正在运行的工人，在运行的工人完成时启动新的工人。这使您可以调整活跃工作人员的数量。它还为您提供了一组活跃的工作人员，以防您需要向他们发送停止消息。

您需要将此添加到您的 app.config 以超过两个的默认连接限制：

```
<system.net>
<connectionManagement>
  <remove address="*"/>
  <add address="*" maxconnection="10" />
</connectionManagement>
</system.net> 
```

在下面的示例中，我使用回调从队列中删除一个工作人员，并使用 a`Monitor`来控制等待工作人员队列的清空。

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace Demo
{
    class Program
    {
        static Queue<Worker> waitingWorkers = new Queue<Worker>();
        static Dictionary<int, Worker> activeWorkers = new Dictionary<int, Worker>();
        static int maxThreads = 10;
        static object waitLock = new object();

        static void Main(string[] args)
        {
            for (int i = 0; i < 100; i++)
            {
                waitingWorkers.Enqueue(new Worker(new WorkerDoneDelegate(WorkerDone)));
            }

            lock (waitLock)
            {
                while (waitingWorkers.Count > 0)
                {
                    if (activeWorkers.Count > maxThreads)
                    {
                        Monitor.Wait(waitLock);
                    }
                    Worker worker = waitingWorkers.Dequeue();
                    Thread thread = new Thread(worker.SendSomething);
                    thread.IsBackground = true;
                    activeWorkers[thread.ManagedThreadId] = worker;
                    thread.Start();
                }
            }
            Console.WriteLine("Queue empty");
            Console.ReadKey();
        }

        static void WorkerDone()
        {
            lock (waitLock)
            {
                activeWorkers.Remove(Thread.CurrentThread.ManagedThreadId);
                Console.WriteLine("Worker done - id=" + Thread.CurrentThread.ManagedThreadId.ToString());
                Monitor.Pulse(waitLock);
            }
        }

        public delegate void WorkerDoneDelegate();
        public class Worker
        {
            static Random rnd = new Random();

            WorkerDoneDelegate Done;

            public Worker(WorkerDoneDelegate workerDoneArg)
            {
                Done = workerDoneArg;
            }

            public void SendSomething()
            {
                Console.WriteLine("Worker send - id=" + Thread.CurrentThread.ManagedThreadId.ToString());
                Thread.Sleep(rnd.Next(1, 1000));
                Done();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:02:13.760

或者简单地使用 Parallel.For/ForEach 它将为您进行线程优化（选择池大小、线程数等）:)

# extjs - Telerik KendoUI vs Sencha ExtJS？

> ID：11456951
> 
> 赞同：34
> 
> 时间：2012-07-12T17:06:02.710
> 
> 标签：extjs, extjs4, javascript-framework, kendo-ui

我们将在 Web 上构建企业级应用程序，为此我们将选择过滤到 ExtJS 和 KendoUI。

两者都很不错，并且具有丰富的功能/控件，KendoUI 的性能比 ExtJS 更快，但是 ExtJS 就像更完整的包，其中包括构建桌面所需的每个组件，如 web 应用程序和 Grid 似乎更强大。

另一方面，使用 KendoUI，我们拥有 jQuery 的强大功能，感觉就像家一样熟悉，学习曲线几乎为零，因为团队已经在使用 jQuery。

有没有人有使用其中任何一个构建大型企业级应用程序的经验？如果是，你的经验是什么？请分享它的好坏，以便在我最终与他们中的任何一个人长期相处之前，我可以有一些基础。

我更倾向于 ExtJS，因为我们将使用来自 CubeDrive (myCalendar) 的调度程序控件，该控件再次出现在 ExtJS 中。

因此，欢迎您的想法和经验帮助我做出正确的决定。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T07:13:06.390

这不是我们可以回答的问题。您已经为您的团队提供了一个可靠的概述（这很重要）：

## 相同的

*   丰富的控件

## ExtJS 优点

*   更多小部件组件
*   调度程序控制

## ExtJS 缺点

*   Sencha[不会在 GitHub 上为 pull request 提供其源代码](http://www.sencha.com/forum/showthread.php?274293-Kendo-UI-Vs-Sencha-js&p=1020935&viewfull=1#post1020935)
*   没有[公共问题跟踪器](http://www.sencha.com/forum/showthread.php?274293-Kendo-UI-Vs-Sencha-js/page3)

## KendoUI 专业人士

*   更快（*我不太确定*）
*   没有学习曲线
*   jQuery 社区支持
*   材料设计主题

## KendoUI 缺点

*   开源 Kendo UI Core 中的一组较小的小部件（网格，图表在专业版中）
*   没有建筑师

我确信可以使用这两种框架构建应用程序。什么对你更重要？快速交付（您说您的开发人员可以直接使用 KendoUI），还是未来的战略方向？

话虽如此，我们正在使用 ExtJS 进行开发。我们总体上是满意的，但有一些注意事项：

*   文档通常已过时或不完整（最近引入的社区评论正在改进）
*   扩展一些内置小部件的功能并非易事

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T01:09:58.407

我只有 ExtJS 没有 Kendo 的经验。所以我想分享一下我对 ExtJS 的看法。

我们正在构建一个在 Azure 云上运行的基于 Web 的数据分析解决方案。我们已经将 1.0 版部署到生产环境中，并得到了用户的所有积极反馈。

**优点**

*   ExtJS 为我们提供了丰富的 UI 控件和良好的数据操作框架。
*   我们选择 ExtJS 的主要原因是它有一个很棒的绘图和图表框架。
*   与 ASP.NET/MVC3/WCF 服务器端的集成完美无缺。所有组件 UI 或其他方式都以一致的方式工作。

**缺点**

*   ExtJS 在一些新添加的组件（如图表和绘图包）中仍然存在重大错误。当他们修复错误时，他们还会引入新的错误，这真的很烦人。
*   文档有些过时，您必须更频繁地深入研究框架源代码。
*   ExtJS 不支持触​​摸输入，UI 控件看起来像 Of​​fice 2003/7，有点过时。
*   很难引入新主题。
*   使用 JSB3 创建部署确实令人头疼，尤其是当您想将构建过程与 Visual Studio 或 TeamCity 之类的构建环境集成时。
*   ... ;-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T06:02:40.700

我们正在进行调查，例如过去 6 个月的申请。我对 extjs 的性能不满意。

优点

*   丰富的小部件控件（树和网格控件看起来非常有用）
*   它提供开箱即用的 MVC 架构
*   对我来说，它的文档和框架源代码看起来不错。
*   在与服务器端集成的最初障碍之后，它工作正常。

缺点

*   当您动态添加控件时，它对跨浏览器并不友好。对于 IE6 和 IE7，您还必须使用一些 css 样式才能使外观相同。
*   在 IE7 中加载控件的速度非常慢，在 chrome 和 Firefox 中需要 3-5 秒的页面在 IE7 中需要 20-25 秒，而在 IE9 中则需要 5-8 秒。为了获得这么快的速度，我们使用了 extjs 暂停布局并多次优化代码。
*   extjs 开箱即用的控件非常方正（选项卡控件和面板的边框很厚），我们需要使用很多 css 样式来获得我们的外观和感觉

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T17:25:37.740

我们刚刚使用 ExtJs 完成了类似的项目：一个用于管理大量数据的大型企业级 Web 应用程序。当我们为这个项目选择框架时（大约 6 个月前），我们还研究了 KendoUI，但决定使用 ExtJs 主要是因为它具有丰富的网格控制。

我们的应用程序中确实有很多网格，如果不是最重要的功能，它也是主要功能之一。我们对他们中的任何一个都没有任何内部经验 - 所以学习曲线不是问题。

# javascript - 需要帮助从 Actionscript 3 开始使用 Javascript 中的 Google Maps API v3

> ID：11456960
> 
> 赞同：1
> 
> 时间：2012-07-12T17:06:53.523
> 
> 标签：javascript, google-maps

有人可以向我指出一个教程，该教程解释了如何在 Actionscript 3 的 Javascript 中使用 Google Maps API v3？我正在尝试自学，但到目前为止还没有运气。以下测试程序显示简单的 HTML，但不显示 Google 地图。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- aircomponents/src/HTMLSimple.mxml -->
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx">
<s:layout>
    <s:VerticalLayout/>
</s:layout>

<mx:ControlBar width="100%"> 
    <s:Button label="&lt; Back" 
              click="content.historyBack();"/> 
    <s:Button label="Forward &gt;" 
              click="content.historyForward();"/> 
    <s:TextInput id="address" 
                 text="{content.location}" width="100%"/> 
    <s:Button label="Go!" 
              click="content.location = address.text"/> 
</mx:ControlBar> 
<s:Group width="100%" height="100%"> 
    <mx:HTML id="content" location="file:///C:/googlemaps.html"/> 
</s:Group>  
</s:WindowedApplication> 
```

文件 C:/googlemaps.html 适用于 Firefox，包含：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDfNNCCL7xmvk-gTYmvS_Cy5PZcf5L3j_I&sensor=false">
</script>
<script type="text/javascript">
  function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(41., -96),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
  }
  </script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:12:21.260

只是这个库，用于用 AS3 创建谷歌地图

[http://code.google.com/p/gmaps-api-as3/](http://code.google.com/p/gmaps-api-as3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:38:42.150

正确设置尺寸。如果你使用百分比你的`<body>`元素需要一个宽度，所以

```
 html,body { height: 100%; width:100%; margin: 0; padding: 0 }
  #map_canvas { height: 100%; width:100%} 
```

幸运的是，无需加载 Flash。:-) 所以你可以删除

```
s:WindowedApplication ... etc 
```

和所有的

```
<mx> 
```

垃圾:-)

# c# - C# 是 Microsoft.Office.Interop.Excel.Range.Cell.Count 为每次调用计算的还是常量

> ID：11456961
> 
> 赞同：2
> 
> 时间：2012-07-12T17:06:54.207
> 
> 标签：c#, excel, excel-2003

我有一些代码通过检查属性 Excel.Range.Cells.Count 来检查 Excel.Range 中是否有任何单元格。从我的分析来看，这似乎是一个瓶颈（请注意，该方法被多次调用）。有谁知道 Count 属性是如何实现的，它是通过在每次调用时遍历所有单元格来计算的，还是一个常数？

我在 Microsoft 的文档、StackOverflow 或 Google 上找不到任何相关信息。任何帮助表示赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:21:26.410

由于 Excel.Range.Cells 返回 Range 对象本身，因此使用 Range 的属性。它的文档说它返回集合中对象的数量。[MSDN][1]

这表明 range 就像一个动态数组，因此它的 Count 属性不能是常量（在 C 样式常量的意义上）。因此，我们可以推断该属性是在每次调用时计算的，至少通过读取内部存储的值，该值仅在集合更改时更新。

[1] [http://msdn.microsoft.com/en-us/library/aa214230(v=office.11 ​​).aspx](http://msdn.microsoft.com/en-us/library/aa214230(v=office.11).aspx)

# php - PHP中多对多数据库的SQL查询

> ID：11456963
> 
> 赞同：4
> 
> 时间：2012-07-12T17:07:02.227
> 
> 标签：php, mysql, sql

![在此处输入图像描述](../Images/5d3cedbc20199810252acbf7d42b8973.png)

SQL查询显示与pages_learn_more ID相关的所有tool_tip_links？

如何正确构建此查询？

```
 $SQL = 
    "SELECT ptt.tool_tip_link
    FROM pages_tool_tip ptt
    JOIN pages_to_pages ptp
    ON ptp.tool_tip_id = ptt.tool_tip_id
    WHERE ptp.learn_more_id = 2";

    $result = mysql_query($SQL); // or die(mysql_error()); 

     while ($db_field = mysql_fetch_array($result))
    {   
   $reference_keys   =     $db_field['tool_tip_link'];  
        }
      echo $reference_keys; 
```

如何组合这些查询以使它们干净高效？谢谢您的帮助..

- - - - - - - - - - - - - - - - - - - 更新 - - - - - - ----------------------- 使用此代码：

```
 "SELECT ptt.tool_tip_link
    FROM pages_tool_tip ptt
    JOIN pages_to_pages ptp
            ON ptp.tool_tip_id = ptt.tool_tip_id
    JOIN pages_learn_more plm
            ON plm.id = ptp.learn_more_id
    WHERE plm.id = 2"; 
```

应该给我看 3 个 tool_tip_links。但是它只返回数据库中的最后一个字段 4 -> LINK 4

![在此处输入图像描述](../Images/903b7096fc26e5b3dedd39866dedfef0.png)

那么我如何获得所有链接，而不仅仅是最后一个？又来了。。

- - - - - - - - - - - - - - - - - - - 更新 - - - - - - ----------------------

当我回显 mysql_num_rows 时，它正确显示 3 表示 id #2。

那么我需要什么代码来显示所有三行链接？循环阵列？**我不明白，因为它应该已经在我的数组中循环了**。我可以只是回应`$reference_keys`还是我应该做一些不同的事情？

我也试过了`foreach`，但返回了一个错误。我究竟做错了什么？请指教。

更多数据库视图->希望它有助于找到解决方案..

![这是 pages_learn_more 表](../Images/b4b8f6a9cc641fe67df96ae9965417c8.png)

![这是页面工具提示表](../Images/e5c906b08c21dcf5bafa02c805cfbbad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:14:33.503

根据您的标准：

> SQL 查询以显示与 pages_learn_more ID 相关的所有 tool_tip_links

干得好

```
SELECT ptt.tool_tip_link
FROM pages_tool_tip ptt
JOIN pages_to_pages ptp
     ON ptp.tool_tip_id = ptt.tool_tip_id
WHERE ptp.learn_more_id = :id 
```

`:id`是这里的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:04:46.883

您应该将查询重写为：

```
"SELECT ptt.tool_tip_link
    FROM pages_learn_more plm
    JOIN pages_to_pages ptp
        ON plm.id = ptp.learn_more_id
    JOIN pages_tool_tip ptt
        ON ptp.tool_tip_id = ptt.tool_tip_id
    WHERE plm.id = 2"; 
```

这使 pages_learn_more 成为您联接的主表，并找到您想要的内容。

# php - 在 Mac Mini lion 服务器上从源代码编译 PHP 失败

> ID：11456965
> 
> 赞同：1
> 
> 时间：2012-07-12T17:07:06.407
> 
> 标签：php, c, macos, unix

这是我`make`在配置后运行后得到的消息。

```
Undefined symbols for architecture x86_64:
  "_res_9_init", referenced from:
      _zif_dns_check_record in dns.o
      _zif_dns_get_record in dns.o
      _zif_dns_get_mx in dns.o
  "_res_9_search", referenced from:
      _zif_dns_check_record in dns.o
      _zif_dns_get_record in dns.o
      _zif_dns_get_mx in dns.o
  "_res_9_dn_skipname", referenced from:
      _zif_dns_get_record in dns.o
      _zif_dns_get_mx in dns.o
  "_res_9_dn_expand", referenced from:
      _php_parserr in dns.o
      _zif_dns_get_mx in dns.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

我如何配置

```
./configure --prefix=/usr/ --with-apxs2=/usr/sbin/apxs --with-mysql \
--with-pear --with-pdo-pgsql \
--with-pdo-mysql=/usr/local/mysql --with-mysql-sock=/tmp/mysql.sock \
--with-pgsql --with-zlib \
--with-zlib-dir=/usr \
--with-openssl \
--without-iconv \
--enable-exif \
--enable-ftp \
--enable-mbstring \
--enable-mbregex \
--enable-sockets 
```

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T15:16:56.377

这个超过 3 年的错误（提到[这里](https://bugs.php.net/bug.php?id=49332)和[这里](https://bugs.php.net/bug.php?id=49267)，为什么他们还没有修复它？）也可以通过执行以下操作来解决（或者可能通过将不正确的库移出路径，这也可能有效） .

编辑您的`Makefile`并将以下标志添加到该`EXTRA_LIBS =`部分（除了已经存在的其他标志）：

```
EXTRA_LIBS = -lsResolv 
```

您提到的第二个错误：`ext/phar/phar.php] Error 133`是由于MySQL二进制安装程序安装的“lib”目录中的一个文件***没有绝对路径引起的***（这已经有一段时间的错误了，为什么Oracle没有修理它？？）。如果您查看您提到的错误行上方的几行，您会看到它说：

```
Generating phar.php
dyld: Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Users/... 
```

通过执行此操作检查该文件（将下面的版本号替换为您的版本号，例如 mysql-5.x.xx）。请注意结果，它不像其他文件引用那样包含完整路径：

```
# otool -L /usr/local/mysql-5.6.14-osx10.6-x86_64/lib/libmysqlclient.18.dylib 
```

然后像这样修复它：

```
# sudo install_name_tool -id /usr/local/mysql-5.6.14-osx10.6-x86_64/lib/libmysqlclient.18.dylib /usr/local/mysql-5.6.14-osx10.6-x86_64/lib/libmysqlclient.18.dylib 
```

再次检查以确保：

```
# otool -L /usr/local/mysql-5.6.14-osx10.6-x86_64/lib/libmysqlclient.18.dylib 
```

现在，您应该能够成功编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:15:59.327

使用本机 mysql 和 mysqli 驱动程序编译 PHP。此错误是由 php 和 mysql 库之间的冲突引起的。如果您不想使用本机驱动程序，请使用“export EXTRA_CFLAGS=-lresolv”，运行make，这将解决未定义的符号。

将您的配置更改为：

```
./configure \
--prefix=/usr/ \
--with-apxs2=/usr/sbin/apxs 
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--with-pear --with-pdo-pgsql \
--with-mysql-sock=/tmp/mysql.sock \
--with-pgsql --with-zlib \
--with-zlib-dir=/usr \
--with-openssl \
--without-iconv \
--enable-exif \
--enable-ftp \
--enable-mbstring \
--enable-mbregex \
--enable-sockets 
```

顺便说一句，如果你将 mysql 套接字留在 /tmp 中，不要忘记执行 "chmod +t /tmp"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:16:44.023

问题的实际来源仍然模糊，但可以肯定的是我的配置错误。只有从 /usr/bin 中删除所有原生 php 的痕迹，然后我下载了最新的稳定 php 5.4 tarball 并将其解压缩并使用以下选项重新配置后，才能解决造成问题的冲突：

```
./configure  \
--prefix=/usr  \
--mandir=/usr/share/man  \
--infodir=/usr/share/info  \
--sysconfdir=/private/etc  \
--with-apxs2=/usr/sbin/apxs  \
--enable-cli  \
--with-config-file-path=/etc  \
--with-libxml-dir=/usr  \
--with-openssl=/usr  \
--with-kerberos=/usr  \
--with-zlib=/usr  \
--enable-bcmath  \
--with-bz2=/usr  \
--enable-calendar  \
--with-curl=/usr  \
--enable-dba  \
--enable-exif  \
--enable-ftp  \
--with-gd  \
--enable-gd-native-ttf  \
--with-icu-dir=/usr  \
--with-iodbc=/usr  \
--with-ldap=/usr  \
--with-ldap-sasl=/usr  \
--with-libedit=/usr  \
--enable-mbstring  \
--enable-mbregex  \
--with-mysql=mysqlnd   \
--with-mysqli=mysqlnd  \
--without-pear  \
--with-pdo-mysql=mysqlnd  \
--with-mysql-sock=/var/mysql/mysql.sock  \
--with-readline=/usr  \
--enable-shmop  \
--with-snmp=/usr  \
--enable-soap  \
--enable-sockets  \
--enable-sysvmsg  \
--enable-sysvsem  \
--enable-sysvshm  \
--with-tidy  \
--enable-wddx  \
--with-xmlrpc  \
--with-iconv-dir=/usr  \
--with-xsl=/usr  \
--enable-zip  \
--with-pcre-regex  \
--with-pgsql=/usr  \
--with-pdo-pgsql=/usr \
--with-freetype-dir=/usr/X11 \
--with-jpeg-dir=/usr  \
--with-png-dir=/usr/X11 
```

之后我运行 $ sudo make test，然后安装。

然后我重新启动了 apache $ sudo serveradmin stop/start web

然后它 f* ******起作用了。

# asp.net-web-api - ASP.NET WebAPI 将下划线放在 XML 和 JSON 中返回的元素名称上

> ID：11456969
> 
> 赞同：4
> 
> 时间：2012-07-12T17:07:30.620
> 
> 标签：asp.net-web-api

我正在对新的 ASP.NET Web API 进行一些简单的测试，从我的操作方法返回可序列化的类或集合时遇到以下问题。

我的课看起来像这样：

```
<Serializable()>
Public Class Test

    <XmlElement(ElementName:="Name")>
    Public Property Name() As String = String.Empty

    <XmlElement(ElementName:="ID")>
    Public Property ID() As String = String.Empty

    <XmlElement(ElementName:="ClassID")>
    Public Property ClassID() As String = String.Empty

End Class 
```

我检索单个测试的测试操作方法如下所示：

```
Public Function GetTest(ByVal id As String) As Test

    Dim newTest As Test = new Test() With {.ID = id, .Name = "My Test", .ClassID = System.Guid.NewGuid().ToString()}

    return newTest

End Function 
```

当我在浏览器或 Fiddler 中以 XML 或 JSON 的形式查看结果时，返回的 Test 类的属性名称前面有 unsercores，如下所示：

```
<Test>
    <_ClassID>88bb191d-414c-45a4-8213-37f96c41a12d</_ClassID>
    <_ID>ed853792-b7eb-4378-830b-1db611e12ec9</_ID>
    <_Name>Another Test</_Name>
</Test> 
```

如何摆脱元素/属性名称上不需要的下划线？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T13:14:14.910

`<Serializable()>`在 Class 之前删除 ，则结果将不包含“_”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T17:14:10.990

您可以使用[DataMember](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)属性：

```
Public Class Test
    <DataMember(Name:="Name")>
    Public Property Name() As String = String.Empty

    <DataMember(Name:="ID")>
    Public Property ID() As String = String.Empty

    <DataMember(Name:="ClassID")>
    Public Property ClassID() As String = String.Empty
End Class 
```

经过进一步调查，似乎如果您在 C# 中执行相同的操作，则不会添加下划线，也无需使用 DataMember。它只是工作。所以我想这应该是一些 VB.NET 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-01T15:06:48.027

我对 json 中的前置下划线有类似的体验，并且我没有用 Serializable 属性标记的类。在我的情况下，修复是：

```
Imports Newtonsoft.Json

<JsonObject>
Public Class MyObject
... 
```

# macos - Spotlight 和 Alfred 找不到我的文件，我该如何解决？

> ID：11456970
> 
> 赞同：0
> 
> 时间：2012-07-12T17:07:35.440
> 
> 标签：macos, spotlight

我有一台 10.7.4 的 MacBook Pro，我的 Spotlight 不工作，我下载了 Alfred，但它仍然不工作？我已经尝试重新索引 Spotlight，但它仍然不起作用？我认为有一个聚光灯文件已被删除，但我可能错了，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:59:41.483

使用[Cocktail](http://www.maintain.se/cocktail)或[Onyx 之](http://www.titanium.free.fr/)类的工具来重建您的 Launch Services DB。确保首先运行磁盘工具以确保硬盘驱动器上没有任何其他类型的损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-09T03:01:01.813

我知道当您无法使用 Spotlight 时会有多不方便。

*Alfred*使用*Spotlight*的结果（MacOS 元数据索引）来查找文件[^1](https://www.alfredapp.com/help/troubleshooting/indexing/spotlight/)。这就是他们同时停止工作的原因。

我建议您执行以下操作：

*   转到*Alfred Preferences* -> *Advanced*（选项卡）并*单击“**重建 macOS 元数据**”*。

*   终端窗口将打开，您需要输入密码。在您的情况下，请选中“删除 /.Spotlight-V100”框。按照说明返回。

*   这可能需要几个小时，如果系统工作正常，它肯定会解决问题。您也可以在终端中手动执行此操作。

如果这不起作用，请尝试**重新检查**System Preferences -> Spotlight 中的项目；或在软件更新中**更新您的系统。**

最好的祝愿。

# matlab - 如何在 Matlab 中逐列读取此文件（具有重复模式）？

> ID：11456972
> 
> 赞同：1
> 
> 时间：2012-07-12T17:07:43.087
> 
> 标签：matlab, design-patterns, file-io, text-files

该文件是一个输出文件，其第一行是标题，后跟`n`数据行。第一组数据之后是具有不同值的更相似的数据组。

我想从该文件中读取所有数据集的第 2 列和第 3 列，即`direction 1`,`direction 2`等。目前我在函数中使用以下代码行来读取数据，如下所示：

```
fid = fopen(output_file); % open the output file

dotOUT_fileContents = textscan(fid,'%s','Delimiter','\n'); % read it as string ('%s') into one big array, row by row
dotOUT_fileContents = dotOUT_fileContents{1};
fclose(fid); %# close the file 

%# find rows containing 'SV' 
data_starts = strmatch('SV',...
    dotOUT_fileContents); % data_starts contains the line numbers wherever 'str2match' is found
nDataRows=data_starts(2)-data_starts(1)-1;
ndata = length(data_starts); % total no. of data values will be equal to the corresponding no. of 'str2match' read from the .out file

%# loop through the file and read the numeric data
for w = 1:ndata

    %# read lines containing numbers
    tmp_str = dotOUT_fileContents(data_starts(w)+1:data_starts(w)+nDataRows); 

    %# convert strings to numbers
    y = cell2mat(cellfun(@(z) sscanf(z,'%f'),tmp_str,'UniformOutput',false)); % store the content of the string which contains data in form of a character
    data_matrix_column_wise(:,w) = y; % convert the part of the character containing data into number

    %# assign output in terms of lag and variogram values 
    lag_column_wise(:,w)=data_matrix_column_wise(2:6:nLag*6-4,w);
    vgs_column_wise(:,w)=data_matrix_column_wise(3:6:nLag*6-3,w); 
end 
```

如果我没有在上面的输出文件中显示星星，这个函数就可以正常工作。但是，上面显示的输出文件之一包含星号，并且在这种情况下，上面的代码失败了。应该做些什么来处理数据中的*星星*，以便我能够正确读取第 2 列和第 3 列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:54:45.127

问题是您的代码的这一部分：

```
sscanf(z,'%f') 
```

你强制匹配一个浮点数，当它遇到星星时它会失败。你最好用类似的东西代替它

```
textscan(z, '%f %f %f %s %f %f', 'Delimiter', '\t') 
```

并删除 cell2mat 并适当修改以下行以测试是否存在字符串。

或者，这取决于这些星星的含义，您可以将星星替换为零或有意义的东西，您当前的代码就可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:28:45.920

将所有列作为字符串读取：

```
C = textscan(fid, '%s%s%s%s%s%s'); 
```

这为您提供了一个 C，它是一个具有 6 列的元胞数组。您可以通过以下方式访问 C 的元素：C{1,n}{m} 用于第 n 列和第 m 行。然后在 for 循环中，您可以从 48 中减去这些值并得到这样的数字

```
for n=1:6
    for m=1:M
        A(m,n) = C{1,n}{m}-48;
    end
end 
```

您需要的内容将存储在矩阵 A 中。当然，您可以将 C{1,n}{m} 与那 8 颗星进行比较，然后决定您想用它做什么。

# java - 按颜色排序列表（Java）

> ID：11456981
> 
> 赞同：2
> 
> 时间：2012-07-12T17:08:10.073
> 
> 标签：java, colors, rgb, hsv, hsl

我正在寻找按“颜色距离”对列表进行排序。我正在使用以下函数来计算两种颜色之间的距离：

```
double colorDistance(Color c1, Color c2) {
    double rmean = (c1.getRed() + c2.getRed()) / 2;
    int r = c1.getRed() - c2.getRed();
    int g = c1.getGreen() - c2.getGreen();
    int b = c1.getBlue() - c2.getBlue();
    double weightR = 2 + rmean / 256;
    double weightG = 4.0;
    double weightB = 2 + (255 - rmean) / 256;
    return Math.sqrt(weightR * r * r + weightG * g * g + weightB * b * b);
} 
```

因此，如您所见，我使用 RGB 值来计算两种颜色之间的“距离”。这个函数非常适合我需要计算的东西，因为我不需要精确的精度。问题是，我不仅需要知道距离，还需要知道 c1 是在 c2 之前还是之后，以便我可以根据颜色距离创建一个排序列表。

如果还不够清楚，一个例子可能会有所帮助。纯黑色和纯白色之间的颜色距离将在 256 附近。在当前状态下，此函数将为 colorDistance(black, white) 和 colorDistance(white, black) 返回相同的 ~256。我怎样才能使 colorDistance(black, white) 返回 256 而 colorDistance(white, black) 返回 -256？

如果可以的话，我不反对使用 HSV/HSL，但我对 RGB 更加熟悉。如果可以提供一个函数来计算 HSV/HSL 的正或负颜色距离，那就把它带上吧！

或者更好的是，另一个简单的函数将采用两种颜色并简单地决定 c1 是在 c2 之前还是之后！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:15:02.850

如果出现以下情况，您可以将答案乘以负 1：

```
int pixel = (red & 0xFF) << 24 |
              (blue & 0xFF) << 16 |
              (green & 0xFF) <<  8 |
              (255 & 0xFF); // 255 is alpha value 
```

小于其他颜色的像素。

编辑：我留下了 alpha 值，以防您将来想使用它。如果没有，那么你可以把这部分去掉，每班减少 8 班。像这样：

```
int pixel = (red & 0xFF) << 16 |
            (blue & 0xFF) << 8 |
            (green & 0xFF); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:17:32.973

您可以尝试通过将 RGB 颜色表示为十六进制数字来创建一个数组，然后按值对列表进行排序。

# java - 使用 Google Maps API 部署 Android 应用程序时出错

> ID：11456987
> 
> 赞同：0
> 
> 时间：2012-07-12T17:08:17.700
> 
> 标签：java, android, google-maps, eclipse-adt

我正在尝试通过 Eclipse 插件在 Android 模拟器上运行一个使用 Google 地图 API 的 Android 应用程序。

即使我安装了 Google API，当我创建我的初始项目时，指向 API jar 的链接也没有包括在内。所以我将 maps.jar 从`android-sdk-linux/add-ons/addon-google_apis-google-16/libs`我的项目的 libs 文件夹中复制了出来，这解决了所有的参考错误。

但是，当我在模拟器上转到“运行”（Ctrl+F11）我的应用程序时，它会失败并出现错误`Package com.mydomain.myapp requires unavailable shared library com.google.android.maps; failing!`

我的 libs 文件夹中还有其他几个 jar，我没有收到任何错误。为什么不复制maps.jar？如何解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:19:35.743

按照 Yawus 说的做，然后这样做：单击 AVD Manager，然后突出显示您的虚拟设备并单击编辑，然后将目标更改为`Google APIs (Google Inc.) - API Level XX`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:10:59.917

您在创建项目时是否以 Google API 为目标？尝试这个：

1.  在 Package Explorer 中右键单击您的项目
2.  点击“属性”。
3.  点击“安卓”标签
4.  检查适当的“Google API”
5.  应用更改并查看它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:12:09.623

您需要创建一个包含 google 库的模拟器。您无法将其添加到您的应用中。如果您查看，当您创建虚拟设备时，您可以选择具有或不具有 Google API 的版本。

# web-services - spring webservice服务器在大型附件上崩溃

> ID：11456988
> 
> 赞同：0
> 
> 时间：2012-07-12T17:08:18.637
> 
> 标签：web-services, spring, attachment

我正在编写一个spring webservice服务器，需要将一个大文件从客户端上传到服务器。到目前为止，直到 100MB 都可以，但在那之后它会因内存不足错误而崩溃。

java.lang.OutOfMemoryError：java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处 java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间 java.lang.AbstractStringBuilder.append(AbstractStringBuilder. java:515) 在 java.lang.StringBuilder.append(StringBuilder.java:189) 在 com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleCharacters(StAXStreamConnector.java:323) 在 com.sun.xml .bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:187) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)

这是我的配置：

```
<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPath" value="epost.mojito.ws.wsdl" />
    <property name="mtomEnabled" value="true"></property>
</bean>

<bean id="messageFactory" class="org.springframework.ws.soap.axiom.AxiomSoapMessageFactory">
    <description>A message factory to support SOAP 1.2</description>
    <property name="soapVersion">
        <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12" />
    </property>
    <property name="payloadCaching" value="false" />
    <property name="attachmentCaching" value="true" />
    <property name="attachmentCacheThreshold" value="1024"/>
    <property name="attachmentCacheDir" value="D:/mojito attachment test/cache"/>

</bean> 
```

请帮忙！...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:37:31.190

我不确定，但我发现这个线程有一些调整，他设法发送了 900MB。看看，[这里](http://forum.springsource.org/showthread.php?67669-sending-large-attachments-with-Spring-WS-client)

# html - 将 div 定位在固定大小容器的底部

> ID：11456991
> 
> 赞同：0
> 
> 时间：2012-07-12T17:08:22.183
> 
> 标签：html, css

我无法找到将 div 放置在容器底部的方法。

我尝试了什么：

```
position:absolute;
bottom:10px; 
```

但它在底部显示我需要的 div，在我需要它的容器之外......

我感谢在这方面的任何帮助。

下面是显示示例的 jsfiddle：

[http://jsfiddle.net/Gd6JC/](http://jsfiddle.net/Gd6JC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:10:48.390

将容器设置为`position: relative`并确保`<div>`您尝试定位在容器底部的 嵌套在容器内。

[http://jsfiddle.net/Wexcode/RdjS3/](http://jsfiddle.net/Wexcode/RdjS3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:11:37.220

您需要做的就是将规则添加`position: relative`到包含的 div 中。

[http://jsfiddle.net/saluce/Gd6JC/1/](http://jsfiddle.net/saluce/Gd6JC/1/)

# php - 在数据库中搜索 Mysql PHP

> ID：11456995
> 
> 赞同：1
> 
> 时间：2012-07-12T17:08:33.213
> 
> 标签：php, mysql, sql, full-text-search

有数据表`Programmer`和`Lang`

*   `Programmer`行：`ProjectID`,`Person`
*   `Lang`行：`Id`,`name`

*   在 Programer 中有数据：1，John；3、迈克；2、汤米

*   中郎有： 1、Java；2 ,C#; 3、Python

如何获取像这个故事这样的数据：

*   爪哇约翰
*   C# 迈克
*   蟒蛇汤米

使用 Mysql 和 PHP，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:10:44.227

尝试这个：：

Select name, Person from Programmer p inner join Lang l on (p.ProjectID=l.ID)

如果需要根据表中的行出现情况：：

```
Select nL.name,nP.Person 
from
(select @rownum:=@rownum+1 ‘rank’, Person
from
 (SELECT @rownum:=0) r, Programmer order by rank) as nP
inner join

(select @rownum:=@rownum+1 ‘rank_1’, name
from
 (SELECT @rownum:=0) r, Lang order by rank_1) as nL on (nP.rank=nL.rank_1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:09:30.587

这是一篇很棒的文章，教我如何搜索：

[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

大部分工作将使用 SQL 和索引完成，使用称为全文搜索的东西。

快速开始：

您将需要索引您希望在数据库中搜索的列，然后使用`MATCH()`和`AGAINST()`方法执行比使用`%LIKE%`.

# jquery - 如何为“OR”条件创建正则表达式 dataTable().fnFilter

> ID：11456997
> 
> 赞同：4
> 
> 时间：2012-07-12T17:08:37.733
> 
> 标签：jquery, regex, datatables

很难使“OR”条件的正则表达式起作用。

示例：表有 2 列，并试图在第 2 列上搜索（比如说 - “status”列）并且搜索正则表达式是：

```
//javascript
$('#filter-status').change(function() {
     searchTxt =  "Not Shared|Private";
     <table name>.dataTable().fnFilter(searchTxt , 2,true);
} 
```

看起来它正在提取具有“未共享”状态的数据，而不是提取具有“私有”状态的数据。

甚至尝试使用 searchTxt 作为 "^(Not Shared)|(Private)$" 和 "/(^Not Shared$)|(^Private$)/ "

不知道我错过了什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:30:44.710

发现这不是正则表达式问题。但是 Jquery dataTable().fnFilter smartsearch 问题。我只需要提出第四个论点`false`，它就奏效了。

```
<table name>.dataTable().fnFilter(searchTxt, 2, true, false); 
```

# objective-c - 第一次构建和运行我的应用程序时，我的 UITableView 是空的

> ID：11456999
> 
> 赞同：1
> 
> 时间：2012-07-12T17:08:39.123
> 
> 标签：objective-c, ios, uitableview, datasource

我正在构建一个以 a 开头的应用程序，`UITableView`但是当我第一次在手机上构建和运行我的应用程序时，它`UITableView`显示为空。如果我停止运行，然后重新构建并再次运行它，所有数据都会显示出来。此外，如果该应用程序已经在我的手机上，它可以构建并运行良好。这只是第一个初始构建并在我的手机上“安装”应用程序时运行，它留下了`UITableView`空白。我很好奇这是否会在苹果审查我的应用程序时引起任何问题？为了实现这一点，我做错了什么吗？

注意：`UITableView`正在从正在移动到文档目录的 plist 中填充。我最初的想法是`UITableView`在 plist 成功移动到文档目录之前尝试填充列表。所以我试图`[self.tableView reloadData];`在方法结束时调用，`viewDidLoad`但我得到了相同的结果。

```
@implementation AppDelegate

- (void)createEditableCopyOfDatabaseIfNeeded
{
    //TESTING FOR EXISTENCE
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [searchPaths lastObject];
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"ScotchList.plist"];

    BOOL dbexists = [fileManager fileExistsAtPath:writeableDBPath];
    if (!dbexists) {
        // The writeable database does not exist, so copy the default to the appropriate location.
        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"ScotchList.plist"];

        NSError *error;
        BOOL success = [fileManager copyItemAtPath:defaultDBPath toPath:writeableDBPath error:&error];
        if (!success) {
            NSAssert1(0, @"Failed to create writeable database file with message '%@'.", [error localizedDescription]);
        }
    }
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

        self.window.rootViewController = self.navigationController;
    } else {
        MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPad" bundle:nil];
        UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

        DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];
        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

        masterViewController.detailViewController = detailViewController;

        self.splitViewController = [[UISplitViewController alloc] init];
        self.splitViewController.delegate = detailViewController;
        self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];

        self.window.rootViewController = self.splitViewController;
    }
    [self.window makeKeyAndVisible];
    [self createEditableCopyOfDatabaseIfNeeded];
    [application setStatusBarStyle:UIStatusBarStyleBlackOpaque];
    return YES;
} 
```

主视图控制器.m

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.sections = [[NSMutableDictionary alloc] init];
    BOOL found;

    // Loop through the whiskys and create our keys
    for (NSMutableDictionary *whisky in self.drinks)
    {
        NSString *c = [[whisky objectForKey:NAME_KEY] substringToIndex:1];

        found = NO;

        for (NSString *str in [self.sections allKeys])
        {
            if ([str isEqualToString:c])
            {
                found = YES;
            }
        }

        if (!found)
        {
            [self.sections setValue:[[NSMutableArray alloc] init] forKey:c];
        }
    }
    // Loop again and sort the whiskys into their respective keys
    for (NSMutableDictionary *whisky in self.drinks)
    {
        [[self.sections objectForKey:[[whisky objectForKey:NAME_KEY] substringToIndex:1]] addObject:whisky];
    }
    // Sort each section array
    for (NSString *key in [self.sections allKeys])
    {
        [[self.sections objectForKey:key] sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:NAME_KEY ascending:YES]]];
    }
        [self.tableView reloadData];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.582d0e
    self.navigationController.navigationBar.barStyle = UIBarStyleBlack;
    self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:0x015/255.0 green:0x04/255.0 blue:0x04/255.0 alpha:1];
    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"cellBackground.png"]];
    self.navigationItem.leftBarButtonItem = self.editButtonItem;
    self.navigationItem.leftBarButtonItem.tintColor = [UIColor redColor];
    self.navigationItem.backBarButtonItem.tintColor = [UIColor colorWithRed:0x3e/255.0 green:0x3e/255.0 blue:0x3e/255.0 alpha:1];
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
    self.navigationItem.rightBarButtonItem.tintColor = [UIColor colorWithRed:0x015/255.0 green:0x04/255.0 blue:0x04/255.0 alpha:1];

    UIImage *titleImage = [UIImage imageNamed:@"whiskeyTitle.png"];
    self.navigationItem.titleView = [[UIImageView alloc]initWithImage:titleImage];

    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [searchPaths lastObject];
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"ScotchList.plist"];

    NSMutableArray *tmpArray = [[NSMutableArray alloc]initWithContentsOfFile:writeableDBPath];

    self.drinks = tmpArray;
    deletedDrink = [[NSMutableArray alloc]init];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(applicationDidEnterBackground:) 
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:nil];

    //Register for application exiting information so we can save data
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:nil];

    bookCover = [[UIImageView alloc]init];
    bookCover.image = [UIImage imageNamed:@"Default.png"];
    openBookButton = [[UIButton alloc]init];
    [openBookButton addTarget:self action:@selector(goToPage:flipUp:) forControlEvents:UIControlEventTouchUpInside];
    bookCover.frame = CGRectMake(0, 0, 320, 480);
    openBookButton.frame = bookCover.frame;

    [self.navigationController.view addSubview:bookCover];
    [self.navigationController.view addSubview:openBookButton];
    [self.tableView reloadData];
} 
```

**好的更新**

当应用程序最初构建并在手机上运行（安装）时，我已经`NSLog()`从 plist 中提取了我的数组，它记录为空。`viewDidLoad`如果我停止并重新构建并运行它会返回 plist 中的信息（非空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:25:34.780

**知道了。**基本上，我的`appDelegate.m`( `createEditableCopyOfDatabaseIfNeeded`) 中有一个方法可以检查文档目录中的数据库（在我的情况下是 plist）。如果已经有一个现有的 plist，它不会覆盖它。如果没有 plist，则它将我随应用程序附带的 plist 移动到文档目录。然后在`applicationDidFinishLaunchingWithOptions:`我调用的方法内部，`[self createEditableCopyOfDatabaseIfNeeded];`这看起来应该很好。然而，在`applicationDidFinishLaunchingWithOptions`方法内部有 if 语句来检查我在 if 和 else 检查 interfaceIdiom 之后`currentDevice userInterfaceIdiom`调用的内容。`[self createEditableCopyOfDatabaseIfNeeded];`我只是向上移动到`userInterfaceIdiom`iPhone 所在的 if 语句。

下面我评论了问题出在哪里以及我将它移到哪里来解决它。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

        self.window.rootViewController = self.navigationController;

        //THIS WAS THE SOLUTION RIGHT BELOW.
        [self createEditableCopyOfDatabaseIfNeeded];
    } else {
        MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPad" bundle:nil];
        UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

        DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];
        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

        masterViewController.detailViewController = detailViewController;

        self.splitViewController = [[UISplitViewController alloc] init];
        self.splitViewController.delegate = detailViewController;
        self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];

        self.window.rootViewController = self.splitViewController;
    }
    [self.window makeKeyAndVisible];
    //THIS IS WHERE [self createEditableCopyOfDatabaseIfNeeded]; WAS ORIGINALLY WHICH WAS CAUSING THE PROBLEM
    [application setStatusBarStyle:UIStatusBarStyleBlackOpaque];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:19:57.133

您确定 plist 文件已加载并可在首次加载时访问。尝试这样的事情：

```
NSFileManager *filemgr;

filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: @"/CacheDirectory/DocumentDirectory/TempDirectory/myfile.txt" ] == YES)
        NSLog (@"File exists");
else
        NSLog (@"File not found"); 
```

只想确认一下。如果存在，请尝试从中记录数据，以查看它是否在首次启动之前已完全填充，或者应用程序是否在文件完全在手机上打开之前打开了该文件。在模拟器中启动时，应用程序会尽快启动，并且可能会切换线程或导致文件写入在您的应用程序从中打开流之前无法完全完成...如果这是我想一想，在用户 iPhone 上安装它应该不会引起问题，因为应用程序不会在安装后立即启动。

无论如何，任何拥有 iPhone 并使用 facebook 应用程序的人都习惯于在打开应用程序时有时什么都没有出现，他们会重新启动它...... ;-)