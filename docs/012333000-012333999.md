# StackOverflow 问答 12333000-12333999

# jquery - 在jquery中创建一个带有html内容的变量

> ID：12333002
> 
> 赞同：6
> 
> 时间：2012-09-08T17:36:24.190
> 
> 标签：jquery, html, var

您好我正在尝试在 jquery 中创建一个变量，其中包含一个用于在网站的不同区域输出的表。但这给了我一个错误，我不明白为什么。这是我的 JQUERY：

```
var copy = "<table width='750' border='0' cellspacing='0' cellpadding='0'>
  <tr>
    <td>Tarifa valida desde:</td>
    <td>Tarifa valida hasta:</td>
    <td>Tarifa MXN</td>
    <td>Tarifa USD</td>
  </tr>
  <tr>
    <td><input type='text' name='from1' id='from1' class='date' /></td>
    <td><input type='text' name='to1' id='to1' class='date' /></td>
    <td><input type='text' name='mxn1' /></td>
    <td><input type='text' name='usd1' /></td>
  </tr>
  <tr>
    <td>Extra Pax MXN:</td>
    <td>Extra Pax USD:</td>
  </tr>
  <tr>
    <td><input type='text' name='exmxn1' /></td>
    <td><input type='text' name='exusd1' /></td>
  </tr>
</table>";
    }); 
```

我怎么能把它放在一个变量中，这样我就可以在各种 div 中输出：

```
$(".divExample").html(copy); 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T17:39:05.570

由于错误分配的字符串导致的语法错误。

连接线

```
var copy = "<table width='750' border='0' cellspacing='0' cellpadding='0'>" 
            + "<tr>";
  .... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T17:42:13.480

您可以像建议的那样连接字符串。或者另一种方法是用反斜杠转义换行符：

```
var html = "<table> \
    <tr>....</tr> \
    </table>"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T17:38:56.060

您还没有处理字符串中的换行符。因此，javascript 假定每行的结尾是语句的结尾。显然，每一行都不是有效的陈述。像这样连接你的字符串：

```
var "multi-"+
    "line "+
    "string"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-08T17:47:44.887

当我有复杂的 html 时，这就是我所做的。我把 html 放在一个附件中`DIV`并获取 html 内容

```
var copy = $('#mycomplexhtml').html(); //gets the content I placed in an hidden div

<!-- I normally place this at the bottom-most part of the page -->
<div id="mycomplexhtml" style="display:none">
  <table width='750' border='0' cellspacing='0' cellpadding='0'>
  <tr>
    <td>Tarifa valida desde:</td>
    <td>Tarifa valida hasta:</td>
    <td>Tarifa MXN</td>
    <td>Tarifa USD</td>
  </tr>
 ...
  </table>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T17:46:29.010

或者您可以使用此工具[http://www.accessify.com/tools-and-wizards/developer-tools/html-javascript-convertor/](http://www.accessify.com/tools-and-wizards/developer-tools/html-javascript-convertor/)

它工作正常:)

# python - 在 webdriver 和请求之间复制 cookie 时出错

> ID：12333004
> 
> 赞同：2
> 
> 时间：2012-09-08T17:36:39.387
> 
> 标签：python, cookies, selenium-webdriver, python-requests

我正在尝试将 cookie 从 webdriver 对象复制到请求，如下面的代码所示。**我在脚本的最后一条**语句中收到此错误消息。

> TypeError：无法将字典更新序列元素#0 转换为序列

```
import requests
import cookielib
from selenium import webdriver
import urllib

driver = webdriver.Chrome()

driver.get("http://www.google.com/")

cj = cookielib.CookieJar()

#iterate the drive Cookies
for c in driver.get_cookies():
    print "%s -> %s" % (c['name'], c['value'])
    ck = cookielib.Cookie(name=c['name'], value=urllib.unquote(c['value']), domain=c['domain'], \
             path=c['path'], \
             secure=c['secure'], rest={'HttpOnly': c['http_only']}, \
             version =0,    port=None,port_specified=False, \
             domain_specified=False,domain_initial_dot=False, \
             path_specified=True,   expires=None,   discard=True, \
             comment=None, comment_url=None, rfc2109=False)
    print ck
    cj.set_cookie(ck)

rsp = requests.get('http://www.cisco.com/', cookies=cj) 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:33:46.483

您使用的是什么版本的请求？在最近几个版本中，请求处理 cookie 的方式发生了[重大变化。](http://pypi.python.org/pypi/requests#history)

对我来说，您的代码使用 requests 0.14.0（撰写本文时的最新版本）运行而不会产生异常。

# silverlight-5.0 - Silverlight 5 initParams 计数始终等于 0

> ID：12333008
> 
> 赞同：1
> 
> 时间：2012-09-08T17:37:26.943
> 
> 标签：silverlight-5.0, init-parameters

我在堆栈上看到[了这篇文章，在 Silverlight MSDN 上看到了](https://stackoverflow.com/questions/3144666/why-are-the-initparams-i-pass-into-silverlight-always-empty)[这篇](http://forums.silverlight.net/t/14826.aspx/1/10)文章，但它们没有解决 Silverlight5。请参阅下面的我的 html 主机文档 div 代码和调用它的 C# 代码。我得到一个“给定的键不在字典中”。每次都出错，并且`.InitParams`属性计数也每次都是0。有人知道解决方案吗？我觉得这是 Silverlight5 中的错误之类的。此外，如果有人有一种从主机 html 对象标签获取信息的干净替代方法 - 我也会接受。

标记：

```
<div id="silverlightControlHost">
        <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="400" height="300">
          <param name="source" value="ClientBin/MySilverlightApplication.xap"/>
          <param name="onError" value="onSilverlightError" />
          <param name="background" value="white" />
          <param name="minRuntimeVersion" value="5.0.61118.0" />
          <param name="autoUpgrade" value="true" />
          <param name="initParams" value="rootLocation=someLocation" />
          <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
              <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
          </a>
        </object>
        <iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe>
   </div> 
```

C# 从静态属性中检索：

```
private const String rootLocation= "rootLocation";

internal String RootLocation { 

    get
    {

        String location = App.Current.Host.InitParams[rootLocation];

        return location;

    }
} 
```

`AppStartUp`C# 从事件中检索：

```
private const String rootLocation= "rootLocation";

private void Application_Startup(object sender, StartupEventArgs e)
{
    this.RootVisual = new MainPage();

    String location = e.InitParams[rootLocation];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:19:17.690

在将解决方案升级到 Silverlight 5 后，我遇到了同样的问题。结果发现，虽然 app.xaml 正在被调用，但 WEB 项目已经失去了它的“启动项目”状态。重置它会导致一切恢复正常。

# jquery - 是否可以将 jQuery 用于不同 div 的背景图像？

> ID：12333012
> 
> 赞同：2
> 
> 时间：2012-09-08T17:37:56.157
> 
> 标签：jquery, rollover

我想在不同的脱节 div 上淡入背景图像...

[http://www.bpanzullo.com/WebTech/index.html](http://www.bpanzullo.com/WebTech/index.html)

使用 leftnav 类中的 id（悬停或单击都可以）使用 #rightcol 背景图像（使用 jQuery，但 CSS 也可以）显示在 #rightcol div 中。

```
<div id="leftcol">
   <div class="content">
    <ul class="leftav">
        <li class="leftnav" id="webhosting"><a href="#">Web Hosting<span class="greenSmall">Get more information</span></a></li>
        <li class="leftnav" id="cpanel"><a href="#">cPanel<span class="greenSmall">Get more information</span></a></li>
        <li class="leftnav" id="emailhosting"><a href="#">Email Hosting<span class="greenSmall">Get more information</span></a></li>
        <li class="leftnav" id="reseller"><a href="#">Reseller<span class="greenSmall">Get more information</span></a></li>
    </ul>
   </div>
  </div> 
```

//然后让背景图像显示在#rightcol div的下方

```
<div id="rightcol"> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:24:41.427

有人找到了为什么它不起作用的答案 - 我使用了语言这个词而不是在打开的 javascript 声明中键入：

> 脚本语言=“文本/javascript”
> 
> 脚本类型="文本/javascript"

```
 $(document).ready(function(){

    $('#webhosting').click(function() { 
        $('#rightcol').css("background-image", "url(css3menu/webhosting.png)"); 
     }); 

    $('#cpanel').click(function() { 
        $('#rightcol').css("background-image", "url(css3menu/cpanel.png)"); 
     }); 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:45:19.617

首先复制内容

```
$("#rightcol").append($("#leftcol .content").html()); 
```

之后调用效果

# java - 使用 iText 从 *.ttf 文件创建字体

> ID：12333018
> 
> 赞同：0
> 
> 时间：2012-09-08T17:38:57.807
> 
> 标签：java, fonts, resources, itext

这是我的 Resources.class 中的一个方法：

```
public static Font loadFont(String fontFileName)
    {
        BaseFont base = null;

        try
        {
            base = BaseFont.createFont(Resource.class.getResource(fontFileName + "_font.ttf").toString(), BaseFont.WINANSI, true);
        }
        catch (DocumentException | IOException e)
        {
            e.printStackTrace();
        }

        Font font = new Font(base, Font.BOLD, 15);
        return font;
    } 
```

我的程序结构是：

```
src (folder)
    core (package)
        //all (but one) classes used for program
    resources (package)
        class Resources (used to load resources into the "core" classes)
        wingding_font.ttf 
```

这是不起作用的代码片段：

```
p = new Phrase("some random text");
p.setFont(Resource.loadFont("wingding"));
pa = new Paragraph(p);
pa.setFont(Resource.loadFont("wingding"));
document.add(pa); 
```

当我打开 PDF 时，文本在那里，但使用了一些我猜是默认字体的字体。

注意1：我尝试将字体设置为仅短语（p）和仅段落（pa），但这并没有以任何方式改变输出。

注2：Resource.loadFont("wingding"); 方法 try/catch 没有“捕获”任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:04:37.447

尝试创建一个嵌入的字体对象并使用此字体来呈现您的文本：

```
//this code should run once at initialization/application startup
FontFactory.register("resources/wingding_font.ttf");
Font textFont = FontFactory.getFont("wingding", BaseFont.IDENTITY_H, 
    BaseFont.EMBEDDED, 10); //10 is the size
...
//reuse the reference to the font object when rendering your text
Paragraph p = new Paragraph("someText", textFont); 
```

顺便说一句，iText 有帮助加载字体的类，你`FontFactory`不再需要.`loadFont``Resources`

希望能帮助到你。

# javascript - Spring maven，访问 CSS/JS 文件

> ID：12333020
> 
> 赞同：1
> 
> 时间：2012-09-08T17:38:59.383
> 
> 标签：javascript, css, spring, maven

我有一个春季项目：

资源文件位于：`src/main/resources/style/`......很多子文件夹

servlet.xml：

```
 <mvc:annotation-driven/>
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

和我的jsp：

```
<link rel="stylesheet" href="<%=request.getContextPath()%>/resources/style/jquery_ui/css/custom-theme/jquery-ui-1.8.23.custom.css"/> 
```

当我浏览到我的视图时，将此链接作为位置：

```
http://localhost:8080/webapp/WEB-INF/classes/style/jquery_ui/css/custom-theme/jquery-ui-1.8.23.custom.css 
```

如何让它正确显示 css 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:03:07.383

标准 Maven 布局的 Web 资源位于`src/main/webapp/resources`. 更多的`src/main/resources`是用于库和 Java 资源。

在您的 JSP 中引用它们很容易使用[JSTL 核心](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html) [`c:url`标记](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/url.html)完成。使用这些时，您无需担心上下文根。例如：

```
<link rel="stylesheet" href="<c:url value="/resources/style/jquery_ui/css/custom-theme/jquery-ui-1.8.23.custom.css" />" /> 
```

该库将自动将上下文根添加到此 URL。

# php - CakePHP 2.2.2 插件分页与可包含

> ID：12333024
> 
> 赞同：1
> 
> 时间：2012-09-08T17:39:25.587
> 
> 标签：php, cakephp, pagination, cakephp-2.2, containable

我目前正在尝试将可包含与 $this->paginate() 一起使用，但是我无法在结果集中获得额外的表。我期望结果集中有 MediaItem 和 MediaCollectionItem。

下面是我的索引操作的控制器代码

```
App::uses('MediaAppController', 'Media.Controller');
    class ItemsController extends MediaAppController {

        var $uses = array("Media.MediaItem", "Media.MediaCollection");
        var $components = array("Media.MediaRender","Media.TimThumb");
        var $helpers = array("Media.MediaRender");

        var $mediaItemDetails = null;

        var $paginate = array('limit' => 15, 'contain' => array('Media.MediaCollectionItem'));

        function beforeFilter() {
            parent::beforeFilter();
            $this -> Auth -> allow("resizeImage");

        }

        function admin_index() {

            $this -> request -> data = $this->paginate('MediaItem');

            debug($this -> request -> data);

            // Get images group
            $filters = $this -> MediaRender -> getCollectionFilterTypes(array("images"));

            $renderImageTypes = array_keys($filters["images"]["extensions"]);

            $this -> set(compact("renderImageTypes"));

        } 
```

下面是我的 MediaItem 模型，它有所有的关系

```
App::uses('MediaAppModel', 'Media.Model');
class MediaItem extends MediaAppModel {

/**
 * Display field
 *
 * @var string
 */
    var $displayField = 'name';

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * hasMany associations
 *
 * @var array
 */
    var $hasMany = array(
        'MediaCollectionItem' => array(
            'className' => 'Media.MediaCollectionItem',
            'foreignKey' => 'media_item_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),
        'MediaCollection' => array(
            'className' => 'Media.MediaCollection',
            'foreignKey' => 'media_item_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'media_item_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

} 
```

下面是我的 MediaCollectionItem 模型，它具有所有关系

```
 App::uses('MediaAppModel', 'Media.Model');
class MediaCollectionItem extends MediaAppModel {

/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'title';

    public $order = array("MediaCollectionItem.sort_order ASC");

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'MediaCollection' => array(
            'className' => 'Media.MediaCollection',
            'foreignKey' => 'media_collection_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'MediaItem' => array(
            'className' => 'Media.MediaItem',
            'foreignKey' => 'media_item_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
} 
```

插件应用模型

```
class MediaAppModel extends AppModel {
        public $actsAs = array("Containable");
} 
```

当前结果示例

```
array(
    (int) 0 => array(
        'MediaItem' => array(
            'id' => '1098',
            'name' => 'custom',
            'extension' => 'css',
            'file_size' => '0',
            'mime_type' => 'application/x-empty',
            'filename' => '2538984824fdb12ed8c8151.31598776.custom',
            'created' => '2012-06-15 11:48:13',
            'modified' => '2012-06-15 11:48:13',
            'remote_url' => null
        )
    ),
    (int) 1 => array(
        'MediaItem' => array(
            'id' => '1099',
            'name' => 'style',
            'extension' => 'css',
            'file_size' => '39002',
            'mime_type' => 'text/plain; charset=us-ascii',
            'filename' => '867449124fdb12fa1d3d11.81854984.style',
            'created' => '2012-06-15 11:48:26',
            'modified' => '2012-06-15 11:49:08',
            'remote_url' => null
        )
    ), 
```

控制器内 MediaItem 模型的调试

```
object(AppModel) {
    useDbConfig => 'default'
    useTable => 'media_items'
    id => false
    data => array()
    schemaName => 'cbsroxy_cms'
    table => 'media_items'
    primaryKey => 'id'
    validate => array()
    validationErrors => array()
    validationDomain => null
    name => 'MediaItem'
    alias => 'MediaItem'
    tableToModel => array(
        'media_items' => 'MediaItem'
    )
    cacheQueries => false
    belongsTo => array()
    hasOne => array()
    hasMany => array()
    hasAndBelongsToMany => array()
    actsAs => null
    Behaviors => object(BehaviorCollection) {
        modelName => 'MediaItem'
        defaultPriority => (int) 10
    }
    whitelist => array()
    cacheSources => true
    findQueryType => null
    recursive => (int) 1
    order => null
    virtualFields => array()
    __backAssociation => array()
    __backInnerAssociation => array()
    __backOriginalAssociation => array()
    __backContainableAssociation => array()
    findMethods => array(
        'all' => true,
        'first' => true,
        'count' => true,
        'neighbors' => true,
        'list' => true,
        'threaded' => true
    )
    tablePrefix => '' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T13:32:34.300

我现在已经设法让它工作了。我必须将插件模型的前缀设置为“media_”，然后将类名设置为“Media.Item”并调用“$this->Item->find()”以使可包含的行为起作用。

# c++ - boost::fast_pool_allocator 抛出访问冲突异常

> ID：12333025
> 
> 赞同：0
> 
> 时间：2012-09-08T17:39:28.130
> 
> 标签：c++, boost, allocation, pool, allocator

好的，我在使用`boost::fast_pool_allocator`.

我拥有的代码适用于对 的前几次调用`fast_pool_allocator::allocate(1)`，但随后失败并显示以下消息：

> Engine.exe 中 0x000000013fd0fe2d 处未处理的异常：0xC00000005：访问冲突读取位置 0x0000000000ffffff

调用堆栈：

```
Engine.exe!boost::simple_segregated_storage<unsigned __int64>::malloc()  Line 104
Engine.exe!boost::pool<boost::default_user_allocator_new_delete>::malloc()  Line 223 
Engine.exe!boost::singleton_pool<boost::fast_pool_allocator_tag,128,boost::default_user_allocator_new_delete,boost::details::pool::win32_mutex,32>::malloc()  Line 59
Engine.exe!boost::fast_pool_allocator<EventDataSize,boost::default_user_allocator_new_delete,boost::details::pool::win32_mutex,32>::allocate(const unsigned __int64 n)  Line 229
Engine.exe!IEventData::operator new(unsigned __int64 size)  Line 46
etc... 
```

有问题的 boost 代码行似乎是正确的，分配器存储机制将返回下一个空闲块，并将其从空闲块列表中删除

```
void * malloc()
{
  void * const ret = first;

  // Increment the "first" pointer to point to the next chunk
  first = nextof(first); // <--- This is the line that is failing.
  return ret;
} 
```

我的代码如下所示：

```
class EventDataSize
{
private:
    U8 dummyField[128];
};

class IEventData
{    
public:    
    void* operator new(size_t size)
    {       
        void* ptr = boost::fast_pool_allocator<EventDataSize>::allocate(1);
        if (!ptr)
            throw std::bad_alloc();
        return ptr;
    }

    void operator delete(void* ptr)
    {
        boost::fast_pool_allocator<EventDataSize>::deallocate((EventDataSize*)ptr, 1);
    }

// etc...
} 
```

如您所见，我试图将此类`EventDataSize`用作虚拟对象，以便为继承自的任何类`IEventData`分配相同的大小（例如 128 字节），从而允许池分配器与继承一起愉快地工作。

我在其他地方使用完全相同的模式来实现 operator new 与其他基类，他们似乎没有遇到同样的问题。

奇怪的是，如果我改变数组大小，`EventDataSize::dummyField`问题就消失了（或者至少它还没有出现），但我对这种不合标准的解决方案感到不舒服......我想知道为什么这个分配器正在做它正在做什么，我做错了什么，以及如何优雅地修复它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:31:20.497

我意识到，因为我有另一个基类 IControl，使用相同的模式，并使用它自己的 ControlSize 虚拟对象（也是 128 字节），所以两个 fast_pool_allocators 都在后台使用相同的池对象。

然而，我的 IControl 子类之一大于 128 字节。因此它被分配没有问题，但随后覆盖了空闲块的池链接列表。

本质上，这正是 Oo Tiib 所说的问题，但转移到了稍微不同的代码部分。

正如 Oo Tiib 和 bish-bash-bosh 所示，我修复了这两个地方的代码，它就像一个魅力！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:01:18.383

始终测试您的理论（无论它们是什么）是否成立。您似乎有一个理论认为 128 字节对于任何 IEventData 都足够好，所以您可以忽略大小？继续测试它：

```
void* operator new(size_t size)
{
    if ( size > sizeof( EventDataSize ) )
    {
       throw std::runtime_error("crappy idea, pal");
    }
    void* ptr = boost::fast_pool_allocator<EventDataSize>::allocate(1);
    if (!ptr)
        throw std::bad_alloc();
    return ptr;
} 
```

对我来说，感觉可能有大于 128 字节的事件数据，所以它搞砸了池分配器池中的东西。

# sql - 关于 oracle/sql

> ID：12333030
> 
> 赞同：-5
> 
> 时间：2012-09-08T17:40:22.607
> 
> 标签：sql, oracle

我正在创建一个表：

```
create table emp; (
   emp_id number(10) 
   emp_name varchar2(20)
 , address varchar2(50);
   ) 
```

并且第 3 行出现错误，之后`emp_id number(10)`- 缺少逗号。我不能回到或直接回到那条线。

我必须制作新表或重新编写。我的问题是我们如何在不再次写入或不使用复制/粘贴的情况下删除该错误。我们可以使用编辑命令/查询还是有一个查询可以直接转到发生错误的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:06:30.703

有不同的命令可让您编辑最后（错误）输入的 SQL 查询并重新执行它。

```
SQL> create table emp(
  2  emp_id number(10)
  3  emp_name varchar2(20)
  4  , address varchar2(50));
emp_name varchar2(20)
*
ERROR at line 3:
ORA-00907: missing right parenthesis 
```

在这里，我犯了错误，忘记在第 2 行后输入逗号。我可以纠正如下

```
SQL> list 2
  2* emp_id number(10)
SQL> append ,
  2* emp_id number(10),
SQL> run
  1  create table emp(
  2  emp_id number(10),
  3  emp_name varchar2(20)
  4* , address varchar2(50))

Table created.

SQL> 
```

您可以在此处获取有关所有这些命令的更多信息[http://docs.oracle.com/cd/A87860_01/doc/server.817/a82950/ch3.htm](http://docs.oracle.com/cd/A87860_01/doc/server.817/a82950/ch3.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:53:54.693

删除创建表 emp 后的分号，并在 emp_id number(10) 后添加一个逗号。还要删除地址 varchar2(50) 之后的分号并将其放在末尾

# android - 某些设备上的 ResourcesNotFoundException

> ID：12333031
> 
> 赞同：2
> 
> 时间：2012-09-08T17:40:25.730
> 
> 标签：android, bitmap, crash

我最近收到了我的应用程序的崩溃报告。它是这样说的：

```
android.content.res.Resources$NotFoundException: File res/drawable-xhdpi/bg.png from drawable resource ID #0x7f020005 
```

然后这个：

```
Caused by: java.lang.IllegalArgumentException: width and height must be > 0
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:601)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:576)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
at android.content.res.Resources.loadDrawable(Resources.java:1709) 
```

我在几台设备上测试了我的应用程序，但都没有崩溃。根据我应用程序的用户的说法，这个错误似乎出现在三星 Galaxy y pro 上，我真的不知道该怎么办......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:40:52.500

我发现出了什么问题。Galaxy Y 的屏幕很小，分辨率也很低。而且我认为这个设备不知道什么是 xhdpi 文件夹，所以你应该把你的drawable放到所有文件夹中......

希望能帮助到你 ：）

# java - HttpGet JSONArray android 进度条

> ID：12333038
> 
> 赞同：2
> 
> 时间：2012-09-08T17:41:42.230
> 
> 标签：java, php, android, json, http

我正在尝试为从 Internet 下载的 json 数组获取水平进度条对话框。这是我当前的代码

```
protected JSONArray doInBackground(Date... arg0) {
  try {
    BufferedReader in = null;
    String result = null;

    HttpClient client = new DefaultHttpClient();
    HttpConnectionParams.setSoTimeout(client.getParams(), 30000);
    HttpConnectionParams.setConnectionTimeout(client.getParams(),
            30000);

    String getter = arg0[0].getDate();

    URI website = new URI("http://10.0.2.2/bmorg/getEvent?day=" + getter);

    HttpGet request = new HttpGet();
    request.setURI(website);

    HttpResponse response = client.execute(request);

    in = new BufferedReader(new InputStreamReader(response
            .getEntity().getContent()));

    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.seperator");
    while ((l = in.readLine()) != null) {
      sb.append(l + nl);
    }

    in.close();
    result = sb.toString();

    return new JSONArray(result);
  } catch (Exception e) {
    _worked = false;
    e.printStackTrace();
  }
  return null;
} 
```

这工作正常，但我想要的是下载状态。我不知道如何从我的 Http 请求和下载的字节中获取大小以将其放入进度条的 onChange 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:21:44.537

在此处更新您的进度：

```
while ((l = in.readLine()) != null) {
      sb.append(l + nl);
    } 
```

你可以使用它`AsyncTask.publishProgress`和`AsyncTask.onProgressUpdate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:46:57.740

获取[http响应的大小](https://stackoverflow.com/questions/6424611/get-header-from-httpresponse-in-android)设置[进度条最大值](http://developer.android.com/reference/android/widget/ProgressBar.html#setMax%28int%29)，然后在循环中[更新进度条进度。](http://developer.android.com/reference/android/widget/ProgressBar.html#incrementProgressBy%28int%29)`while`

# mysql - 如何在 Apache Tomcat 7 中设置 JDBCRealm？

> ID：12333039
> 
> 赞同：5
> 
> 时间：2012-09-08T17:41:47.147
> 
> 标签：mysql, tomcat, jdbc, jdbcrealm, j-security-check

我希望从 MySQL 数据库加载用户（允许登录到我的站点）。为此，我想为我的 Apache Tomcat 7 应用程序服务器设置一个 JDBCRealm。

我已经阅读了[文档](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JDBCRealm)并使用 JNDI 资源 (jdbc/foo4) 创建了一个数据库连接。该资源有效（我已经在我的应用程序中使用它来检索数据）。似乎不起作用的是将领域与此资源联系起来。

我的配置文件如下所示：

**src\main\webapp\META-INF\context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/my-webapp">
  <!-- works! -->
  <Resource name="jdbc/foo4"
            type="javax.sql.DataSource"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/foo4"
            username="root"
            password="root"
            maxActive="8" 
            maxIdle="4" 
            maxWait="10000"
            auth="Container"
          />
  <!-- Does not seem to work?! -->
  <Realm className="org.apache.catalina.realm.DataSourceRealm"
         dataSourceName="jdbc/foo4"
         userTable="users" 
         userNameCol="user_name" 
         userCredCol="user_pass"
         userRoleTable="user_roles" 
         roleNameCol="role_name"/>
</Context> 
```

在我的标准部署描述符中，我输入了以下内容：

**src\main\webapp\WEB-INF\web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  <security-constraint>
    <display-name>General Restriction</display-name>
    <web-resource-collection>
      <web-resource-name>Entire Application</web-resource-name>
      <description>All resources in this application are protected.</description>
      <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>admin</role-name>
    </auth-constraint>
  </security-constraint>
  <login-config>
    <auth-method>FORM</auth-method>
    <realm-name>Administration Area</realm-name>
    <form-login-config>
      <form-login-page>/login.jsp</form-login-page>
      <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
  </login-config>
  <security-role>
    <role-name>admin</role-name>
  </security-role>
  <resource-ref>
    <res-ref-name>jdbc/foo4</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>
</web-app> 
```

我使用这个 SQL 脚本创建了一个示例用户：

**安全.sql**

> 创建表用户（ user_name varchar(15) not null 主键，user_pass varchar(15) not null ）；
> 
> 创建表 user_roles ( user_name varchar(15) not null,
> role_name varchar(15) not null, 主键 (user_name, role_name) );
> 
> INSERT INTO users(user_name,user_pass)VALUES('benny','test'); 插入到 user_roles(user_name,role_name)VALUES('benny','admin');

但我无法使用用户“benny”和密码“test”登录。我可以使用用户“tomcat”和密码“tomcat”登录（因为它是在 %CATALINA_HOME%\conf\tomcat-users.xml 中定义的），但我无法使用我自己的用户从我的 MySQL 数据库登录。

当然，我的 Tomcat 服务器使用的是 MySQL 驱动程序（我将“mysql-connector-java-5.1.9.jar”放入 %CATALINA_HOME%\lib）。

当我尝试登录时收到以下错误消息：

```
Sep 08, 2012 7:38:55 PM org.apache.catalina.realm.DataSourceRealm open
Exception performing authentication
javax.naming.NameNotFoundException: Name [jdbc/foo4] is not bound in this Context. Unable to find [jdbc]. 
```

有人看到错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T17:50:52.907

默认情况下，领域将始终查找全局数据源（在 Tomcat 端中配置`/conf/server.xml`），但是您已经定义了本地数据源（在相同的 webapp 端中配置`/META-INF/context.xml`），因此领域无法找到数据源。您需要将`localDataSource`属性设置为`true`.

```
<Realm ... localDataSource="true" /> 
```

另请参阅[Tomcat 7.0 领域文档](http://tomcat.apache.org/tomcat-7.0-doc/config/realm.html)：

> `localDataSource`
> 
> 当领域嵌套在 Context 元素中时，这允许领域使用为 Context 定义的 DataSource 而不是全局 DataSource。如果未指定，则默认为`false`：使用全局 DataSource。

# android - Android 垂直操作栏标签

> ID：12333040
> 
> 赞同：4
> 
> 时间：2012-09-08T17:42:04.123
> 
> 标签：android

我已经设法在 android 4.1 中获得了没有 Tabactivity 的选项卡。我的意思是使用 FragmentActivity、片段和操作栏。我有标签每当我点击任何标签时，它都会加载每个片段。现在我的问题是我在垂直选项卡中需要相同的结构。

```
 public class MainActivity extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

      ActionBar actionbar = getActionBar();
      actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

      View view1 = LayoutInflater.from(this).inflate(R.layout.action_bar_layout, null);
      ((TextView) view1.findViewById(R.id.textView)).setText("Tab1");

      ActionBar.Tab tab1 = actionbar.newTab().setCustomView(view1);

      View view2 = LayoutInflater.from(this).inflate(R.layout.action_bar_layout, null);
      ((TextView) view2.findViewById(R.id.textView)).setText("Tab2");

      ActionBar.Tab tab2 = actionbar.newTab().setCustomView(view2);

      View view3 = LayoutInflater.from(this).inflate(R.layout.action_bar_layout, null);
      ((TextView) view3.findViewById(R.id.textView)).setText("Tab3");

      ActionBar.Tab tab3 = actionbar.newTab().setCustomView(view3);

      View view4 = LayoutInflater.from(this).inflate(R.layout.action_bar_layout, null);
      ((TextView) view4.findViewById(R.id.textView)).setText("Tab4");

      ActionBar.Tab tab4 = actionbar.newTab().setCustomView(view4);

      View view5 = LayoutInflater.from(this).inflate(R.layout.action_bar_layout, null);
      ((TextView) view5.findViewById(R.id.textView)).setText("Tab5");

      ActionBar.Tab tab5 = actionbar.newTab().setCustomView(view5);

      Fragment fragment1 = new Fragment1();
      Fragment fragment2 = new Fragment2();
      Fragment fragment3 = new Fragment3();
      Fragment fragment4 = new Fragment4();
      Fragment fragment5 = new Fragment5();

      tab1.setTabListener(new MyTabsListener(fragment1, view1));
      tab2.setTabListener(new MyTabsListener(fragment2, view2));
      tab3.setTabListener(new MyTabsListener(fragment3, view3));
      tab4.setTabListener(new MyTabsListener(fragment4, view4));
      tab5.setTabListener(new MyTabsListener(fragment5, view5));

      actionbar.addTab(tab1);
      actionbar.addTab(tab2);
      actionbar.addTab(tab3);
      actionbar.addTab(tab4);
      actionbar.addTab(tab5);

   }

class MyTabsListener implements TabListener {
    public Fragment fragment;
    public View view;

    public MyTabsListener(Fragment fragment, View view) {
        this.fragment = fragment;
        this.view = view;
    }

    @Override
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {
        System.out.println("onTabReselected");

    }

    @Override
    public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {

        ((RelativeLayout) view.findViewById(R.id.rootElement)).setBackgroundColor(Color.WHITE);
        ((TextView) view.findViewById(R.id.textView)).setTextColor(Color.BLACK);

        FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        fragmentTransaction.replace(R.id.mainFragement, fragment);
        fragmentTransaction.commit();

    }

    @Override
    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
        ((RelativeLayout) view.findViewById(R.id.rootElement)).setBackgroundColor(Color.BLACK);
        ((TextView)view.findViewById(R.id.textView)).setTextColor(Color.WHITE);
    }
}
  } 
```

而我的 activity_main.xml 是，

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
android:layout_gravity="center" 
android:layout_height="fill_parent" 
android:layout_width="fill_parent" 
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android"
>
<LinearLayout 
    android:id="@+id/fragment_container" 
    android:layout_height="match_parent" 
    android:layout_width="match_parent"
    >
    <FrameLayout
    android:id="@+id/mainFragement"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:26:09.280

操作栏不支持我认为的“垂直标签，如结构”。事实上，在 Android 中通常不会看到“类似结构的垂直选项卡”。您将看到的最接近的情况是在横向的平板电脑应用程序中`ListView`，左侧有一个控制右侧 UI 的内容（所谓的“主-细节”模式）。

# jquery - 停止动画*并*阻止完整的动作运行？

> ID：12333053
> 
> 赞同：1
> 
> 时间：2012-09-08T17:43:34.450
> 
> 标签：jquery

我正在淡入淡出背景：

```
// in:
$bg.css({'pointerEvents':'auto'}).show()
    .stop(true).animate({ 'opacity': 0.90 }, animTime);

// out:
$bg.css({'pointerEvents':'none'}).stop(true)
    .animate({ 'opacity': 0 }, animTime,function () { $bg.hide(); }); 
```

当我在它完成淡出之前开始淡入它时，就会出现问题；完整的事件将在淡入动画的一部分中触发并隐藏背景。

我想`.stop(true)`没有清除完整的事件 - 有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:05:24.150

找到了解决方法：

```
$bg.data('fading',true).css({'pointerEvents':'auto'}).stop(true).show().transition({ 'opacity': 0.90 }, animTime, function () { $bg.data('fading', false); });

$bg.css({'pointerEvents':'none'}).stop(true).transition({ 'opacity': 0 }, animTime,function () {
    if(!$bg.data('fading')) {
        $bg.hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:59:10.023

试试`.stop(true,true)`。这将停止当前事件并删除排队事件。

> `.stop( [clearQueue] [, jumpToEnd] )`
> `clearQueueA`指示是否也删除排队动画的布尔值。默认为假。
> `jumpToEndA`布尔值，指示是否立即完成当前动画。默认为假。

# php - MySQL多排序/多组查询

> ID：12333054
> 
> 赞同：0
> 
> 时间：2012-09-08T17:43:55.747
> 
> 标签：php, mysql

好的，我正在尝试构建一个查询，该查询将为我提供结果 az 并将它们分组到主要类别中。每个结果应该给我每个类别大约 30 个或更多列表。但是有了这个查询。

```
select teamName, CONCAT(UCASE(leagueType)) as league
from fmr_teamNames 
group by leagueType 
order by teamName asc 
```

每个类别我只会得到一个列表。我在一定程度上理解这一点，因为我正在按条件使用分组。

当我稍微重新排序查询并按条件删除组时，我得到了所有列表，但它们在 za 中。当期望的目标是类别 az 时，每个类别 az 的内部结果

```
select teamName, CONCAT(UCASE(leagueType)) as league
from fmr_teamNames
order by leagueType asc 
```

这目前给了我关于类别的 az 和关于结果的 za。所以我有点困惑如何更好地为我的结果形成这个查询，而不必使用像 PHP 这样的外部干预来重新排序所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:47:12.547

我认为您将`concat`函数误认为是`group_concat`mysql 中的函数。Concat 会将两个字符串附加在一起，而`group_concat`将行合并在一起。

```
select teamName, group_concat(UCASE(leagueType)) as league
from fmr_teamNames 
group by teamName 
order by teamName asc 
```

您的查询似乎也在`group by`聚合列上使用 a 而不是您要识别的唯一列？

例子：

```
mysql> select * from table1;
+---------+------+------+-------------+
| autonum | ID   | name | metavalue   |
+---------+------+------+-------------+
|       1 |    1 | Rose | Drinker     |
|       2 |    1 | Rose | Nice Person |
|       3 |    1 | Rose | Runner      |
|       4 |    2 | Gary | Player      |
|       5 |    2 | Gary | Funny       |
|       6 |    2 | Gary | NULL        |
|       7 |    2 | Gary | Smelly      |
+---------+------+------+-------------+
7 rows in set (0.00 sec)

mysql> select concat(autonum, ID) from table1 group by ID;
+---------------------+
| concat(autonum, ID) |
+---------------------+
| 11                  |
| 42                  |
+---------------------+
2 rows in set (0.00 sec)

mysql> select group_concat(autonum, ID) from table1 group by ID;
+---------------------------+
| group_concat(autonum, ID) |
+---------------------------+
| 11,21,31                  |
| 42,52,62,72               |
+---------------------------+
2 rows in set (0.01 sec) 
```

# jsf - 非ajax请求后保持对话框打开

> ID：12333057
> 
> 赞同：0
> 
> 时间：2012-09-08T17:44:09.993
> 
> 标签：jsf, navigation, primefaces

我有几个 JSF 页面有一个 PrimeFaces 对话框来创建一个`Person`. 因为此对话框包含文件上传，所以我不想使用 AJAX。对话框将在创建时关闭`Person`。如果`Person`未创建（验证失败或其他），则应显示对话框。

我见过人们使用`visible="#{not empty facesContext.messages}"`，但是我不能使用它，因为被调用的方法`FacesMessage`在任何情况下都会返回 a 。

我现在的想法是生成一个视图参数（例如 showDialog）并使用`visible="#{param.showDialog}"`.

我尝试过使用导航案例，但由于该方法是从多个页面调用的，因此我无法制作仅添加视图参数的通用导航案例。这将是一个想法：

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-action>#{personBean.create}</from-action>
        <from-outcome>true</from-outcome>
        <to-view-id>#{from-view-id}</to-view-id>
        <redirect>
            <view-param>
                <name>showDialog</name>
                <value>#{form-outcome}</value>
            </view-param>
        </redirect>
    </navigation-case>
</navigation-rule> 
```

使用导航案例的另一个问题是对话框是一个复合标记，并且使用属性提供操作。当我确实使用上述导航箱时，我收到一条消息说`Unable to find matching navigation case with from-view-id '/test.xhtml' for action '#{cc.attrs.saveAction}' with outcome 'true'`。

我认为最好/最简单的解决方案是在方法中添加视图参数。但是，requestmap 是不可变的，并且返回包含的 String`?showDialog=true`也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:39:27.520

我不会用导航规则来处理它，而是让它类似于[Primefaces Showcases 的登录示例](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)。如您所见，当验证失败时对话框保持打开状态，如果提交操作成功则关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:55:43.107

我找到了一个没有视图参数想法的解决方案。

要提交表单，我使用`p:commandButton`此按钮使用 AJAX。此按钮仅设置字段、验证字段并更新输入字段的容器。幸运的是，PrimeFaces 返回一个 JavaScript 值 ( `args.validationFailed`)，指示验证是否失败。

当我单击保存按钮时，字段会通过 AJAX 进行验证，从而使对话框保持打开状态。当验证通过时，我点击使用 JavaScript 的非 AJAX 链接。

JSF：

```
<p:commandButton value="Save" update="containerOfValues"
    oncomplete="afterValidation(xhr, status, args)" />
<p:commandLink ajax="false" action="#{cc.attrs.saveAction}"
    style="display:none" binding="#{saveLink}" /> 
```

JavaScript：

```
function afterValidation(xhr, status, args)
{
    if (!args.validationFailed)
    {
        $("[id='#{saveLink.clientId}']").click();
    }
} 
```

# iphone - 小尺寸图像加载并显示在 UIImageView 上后如何加载大尺寸图像？

> ID：12333058
> 
> 赞同：0
> 
> 时间：2012-09-08T17:44:22.303
> 
> 标签：iphone, sdwebimage

我可以使用 SDWebImage 加载带有 URL 的小尺寸图像以显示在 UIImageView 上。但是我不知道如何在加载较小尺寸的图像后使用另一个 url 加载更大尺寸的图像以显示在同一个 UIImageView 上。

```
[aImageView setImageWithURL:fristUrl placeholderImage:[UIImage imageNamed:@"placeholder.png"] success:^(UIImage *image) {
    [aImageView setImageWithURL:secondUrl placeholderImage:image success:^(UIImage *image) {
        ;
    } failure:^(NSError *error) {
        NSLog(@"error105size:%@", [error description]);
    }];
} failure:^(NSError *error) {
    NSLog(@"error50size:%@", [error description]);
}]; 
```

我已经使用了上面的代码，但它崩溃了。希望你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T17:22:55.070

实际上，你不需要创建任何隐藏的东西`UIImageView`来做这个把戏。

您需要做的是设置第一个URL（带有较小的图像）直接下载到您的`UIImageView`，然后用于`SDWebImageManager`在后台下载较大的版本。完成下载后，只需在图像视图中设置下载的图像。

您可以这样做：

```
// First let the smaller image download naturally
[self.imageView setImageWithURL:self.imageURL];

// Slowly download the larger version of the image
SDWebImageManager *manager = [SDWebImageManager sharedManager];
[manager downloadWithURL:self.currentPhoto.largeImageURL options:SDWebImageLowPriority progress:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished) {
    if (image) {
        [self.imageView setImage:image];
    }
}]; 
```

注意我是如何使用`SDWebImageLowPriority`选项的。这样，图片（应该自然比第一个大）将以低优先级下载，不应该取消第一次下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:51:36.190

查看 Developer.Apple 示例[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

请阅读[ReadMe.txt](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40009394-ReadMe_txt-DontLinkElementID_13)了解更多详情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T08:17:14.777

```
UIButton *btn = [[UIButton alloc] init];
[btn sd_setImageWithURL:[NSURL URLWithString:obj.thumbnail_pic] forState:UIControlStateNormal placeholderImage:[UIImage imageNamed:@"photoDefault.png"] options:SDWebImageProgressiveDownload completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
    NSLog(@"img samll download ok:%@",obj.thumbnail_pic);
    if (image) {
         [btn sd_setImageWithURL: [NSURL URLWithString:[ctl getBigImg:obj.thumbnail_pic]] forState:UIControlStateNormal
                placeholderImage:image];
    }
}]; 
```

# java - 在 toCharArray 中仅使用字母数字字符 (az)

> ID：12333059
> 
> 赞同：0
> 
> 时间：2012-09-08T17:44:28.460
> 
> 标签：java, string

下面你会发现我使用 toCharArray 将字符串发送到数组。然后我使用 for 语句移动字母的值...

```
for(i = 0; i < letter.length; i++){
               letter[i] += (shiftCode);
               System.out.print(letter[i]);
            } 
```

但是，当我使用 shiftCode 移动值时，例如...

a 移位 -1；我得到一个符号@。有没有办法将字符串发送到 shiftCode 或告诉 shiftCode 只使用字母？我需要它来查看我的文本，比如“aaron”，当我使用 for 语句时，只遍历 az 并忽略所有符号和数字。我认为这很简单...

```
letter=codeWord.toCharArray(a,z); 
```

但是尝试不同的形式并在谷歌上搜索它并没有给我任何结果。也许它与正则表达式或其他东西有关？您将在下面找到我的程序的完整副本；它完全按照我想要的方式工作；但它会遍历字母和符号。我还尝试在线查找 toCharArray 的说明，但如果存在任何参数，我无法找到它们。

我的程序...

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

/*
 * Aaron L. Jones
 * CS219
 * AaronJonesProg3
 * 
 * This program is designed to -
 * Work as a Ceasar Cipher
 */

/**
 *
 * Aaron Jones
 */
public class AaronJonesProg3 {
    static String codeWord;
    static int shiftCode;
    static int i;
    static char[] letter;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {
        // Instantiating that Buffer Class
        // We are going to use this to read data from the user; in buffer
        // For performance related reasons
        BufferedReader reader;

        // Building the reader variable here
        // Just a basic input buffer (Holds things for us)
        reader = new BufferedReader(new InputStreamReader(System.in));

        // Java speaks to us here / We get it to query our user
        System.out.print("Please enter text to encrypt: ");

        // Try to get their input here
        try {    
            // Get their codeword using the reader
            codeWord = reader.readLine();

            // Make that input upper case
            codeWord = codeWord.toUpperCase();
            // Cut the white space out
            codeWord = codeWord.replaceAll("\\s","");
            // Make it all a character array
            letter = codeWord.toCharArray();
        }
        // If they messed up the input we let them know here and end the prog.
        catch(Throwable t) {
            System.out.println(t.toString());
            System.out.println("You broke it. But you impressed me because"
                    + "I don't know how you did it!");
        }

        // Java Speaks / Lets get their desired shift value
        System.out.print("Please enter the shift value: ");

        // Try for their input
        try {
               // We get their number here
               shiftCode = Integer.parseInt(reader.readLine());
        }
        // Again; if the user broke it. We let them know.
        catch(java.lang.NumberFormatException ioe) {
            System.out.println(ioe.toString());
            System.out.println("How did you break this? Use a number next time!");
        }

        for(i = 0; i < letter.length; i++){
           letter[i] += (shiftCode);
           System.out.print(letter[i]);
        }

        System.out.println();

        /****************************************************************
         ****************************************************************
         ***************************************************************/
        // Java speaks to us here / We get it to query our user
        System.out.print("Please enter text to decrypt: ");

        // Try to get their input here
        try {    
            // Get their codeword using the reader
            codeWord = reader.readLine();

            // Make that input upper case
            codeWord = codeWord.toUpperCase();
            // Cut the white space out
            codeWord = codeWord.replaceAll("\\s","");
            // Make it all a character array
            letter = codeWord.toCharArray();
        }
        // If they messed up the input we let them know here and end the prog.
        catch(Throwable t) {
            System.out.println(t.toString());
            System.out.println("You broke it. But you impressed me because"
                    + "I don't know how you did it!");
        }

        // Java Speaks / Lets get their desired shift value
        System.out.print("Please enter the shift value: ");

        // Try for their input
        try {
               // We get their number here
               shiftCode = Integer.parseInt(reader.readLine());
        }
        // Again; if the user broke it. We let them know.
        catch(java.lang.NumberFormatException ioe) {
            System.out.println(ioe.toString());
            System.out.println("How did you break this? Use a number next time!");
        }

        for(i = 0; i < letter.length; i++){
           letter[i] += (shiftCode);
           System.out.print(letter[i]);
        }

        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:48:40.270

用于`Character.isLetter()`分离出字母......

**看到这个链接......**

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)

**例如：**

```
public class Test{
   public static void main(String args[]){
      System.out.println( Character.isLetter('c'));
      System.out.println( Character.isLetter('5'));
   }
} 
```

**输出：**

真假

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:54:40.257

首先用 . 检查数组的每个字符`if(Character.isLetter(letter[i]))`。然后使用您的移位代码，检查字母[i] 处的字符与相应的最后一个字母字符（即大写或小写'z'）之间的区别。有关详细说明，请参阅我在此论坛中此[链接](https://stackoverflow.com/questions/12239701/referencing-characters-from-an-array-in-a-caesar-cipher/12239772#12239772)上对凯撒密码的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:34:15.837

```
 // iterating
    for(i = 0; i < letter.length; i++){
        letter[i] += (shiftCode); // Start adding shiftcode to letter
        if(!(letter[i] <= 'Z')) {
            // if its bigger than Z subtract 26
            letter[i] -= (26);
        }
        // less than A?
        if(!(letter[i] >= 'A')) {
            // add 26
            letter[i] += (26);
        }
        System.out.print(letter[i]); // print it all out
    } 
```

上面的代码是我的问题的正确答案。我发现 UNICODE 是有编号的，如果你不疯狂地选择一个大的数字，通过使用数字 26，我们可以很好地移动。我认为明智的做法是编写一个强制用户最多迭代-26到26的catch。

# python - tweepy 错误.. 方法不存在

> ID：12333061
> 
> 赞同：0
> 
> 时间：2012-09-08T17:44:37.650
> 
> 标签：python, twitter, tweepy

我需要运行 twitter api 调用以进行友谊查找。通话详情如下：

[https://dev.twitter.com/docs/api/1.1/get/friendships/lookup](https://dev.twitter.com/docs/api/1.1/get/friendships/lookup)

我在 python 中使用 tweepy 来执行此操作，但是，它根本不存在于 tweepy 中。我做了一点挖掘，发现这个方法已经添加到 tweepy 并且我有最新版本。检查这个：

[https://github.com/tweepy/tweepy/commit/aa055fe16c73f80a0a36279bfc83e40af3d93008](https://github.com/tweepy/tweepy/commit/aa055fe16c73f80a0a36279bfc83e40af3d93008)

每当我尝试运行 api.lookup_friendship。它在代码中不存在。有什么办法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:42:31.183

您链接到的提交直到[8 月 19](https://github.com/tweepy/tweepy/commit/ab2be4621b9146fca0eef173516d02104365a5ef)日才与 tweepy master 分支合并，这是在[1.11 版本被删除之后（2012 年 8 月 14 日）](https://github.com/tweepy/tweepy/commit/80e5edd61b207e4f15de11a79474972489c56247)。在 1.12 发布之前，您需要直接从 git 安装才能获得此功能。^*

要使用 pip 安装当前的开发版本，请使用：

```
pip install -e git+https://github.com/tweepy/tweepy.git#egg=tweepy 
```

运行该命令后，该`.lookup_friendships()`方法可用：

```
>>> import tweepy
>>> api = tweepy.API()
>>> api.lookup_friendships
<bound method API.lookup_friendships of <tweepy.api.API object at 0x10a7ad290>>
>>> api.lookup_friendships()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/private/tmp/tweepy/src/tweepy/tweepy/api.py", line 285, in lookup_friendships
    return self._lookup_friendships(list_to_csv(user_ids), list_to_csv(screen_names))
  File "/private/tmp/tweepy/src/tweepy/tweepy/binder.py", line 184, in _call
    method = APIMethod(api, args, kargs)
  File "/private/tmp/tweepy/src/tweepy/tweepy/binder.py", line 34, in __init__
    raise TweepError('Authentication required!')
tweepy.error.TweepError: Authentication required! 
```

我懒得登录；不过，上面的演示确实表明它有效。:-)

* * *

^* 1.12 版（包括此更改）于 2012 年 11 月 8 日发布。

# c++ - 什么时候应该在堆栈而不是堆上分配一个类

> ID：12333062
> 
> 赞同：12
> 
> 时间：2012-09-08T17:44:43.297
> 
> 标签：c++

过去，每当我需要创建一个类的实例时，我都会使用 new 在堆上分配它（除了 stl 类，以及像 vec3 和 mat4 这样的数学类）。

然而，我只是在批判性地查看我的一些代码，并意识到从技术上讲，我可以只是在堆栈上创建这些类。它们不是很大，不需要在当前范围之外进行修改等。当我（偶尔）需要将它们传递给另一个函数时，我可以像传递指针一样轻松地使用引用。

过去我总是默认在堆上分配，并且只在某些情况下使用堆栈，但是现在我想知道默认在堆栈上分配是否会更好，并且只在以下情况下使用堆

*   确实需要一个指针（即对象的生命周期要超过声明的范围）
*   类或数组对于堆栈来说太大了
*   继承需要它（抽象基类/接口）
*   别的东西？

这也提出了一个问题：一个类有多大（大约）太大而无法在堆栈上合理分配？（假设我们至少正在开发智能手机，并升级到高端台式机）我是否只是不必要地担心堆栈大小限制？（可能，只要我们不是在谈论大型数组，并且没有类会接近一千字节）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T18:03:21.997

您的默认行为应该是：

如果对象的生命周期与特定范围一致，
即在编译时很容易确定

> 那么它应该是一个自动存储持续时间对象（类似堆栈）

如果对象的生命周期在运行时定义并超出当前范围

> 那么它应该是一个动态的存储持续时间对象（类似堆）

注意：所有动态存储持续时间对象都应通过将它们包装在适当的 RAII 类中来控制其生命周期。通常这意味着：对于单个对象一个智能指针，而多个对象最终在一个容器中。

我**讨厌**看到东西被定义为*stack Vs heap*。因为它没有传达情况的真实语义。

```
 int x;       // its on the stack
 struct X
 {
     int x;   // Is this a stack or heap object?
 }            // It depends on its parent.

 // But in both cases it is an automatic storage duration object.
 // In both cases the lifespan's are well defined.
 //     The first is defined by the scope it is declared within.
 //     The second is defined by the lifespan of its parent. 
```

您应该考虑自动/动态“存储持续时间”对象。这传达了语言的正确语义。

请注意，还有两种其他类型的变量，因此产生了四种不同类型的变量。自动/动态/静态/线程“存储持续时间”对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T17:52:10.670

我更喜欢在堆栈上分配，原因有两个。首先，在其他条件相同的情况下，它比堆快。此外，释放是自动发生的，我不需要记住`delete`它（当然，有`auto_ptr`s 之类的帮助）。

> 确实需要一个指针

可以将指针传递给堆栈上的对象。只需确保该指针的用户在其生命周期到期后不会访问该对象。

> 类或数组对于堆栈来说太大了

只有对于真正的大事，这才重要。您可能有 1MB 的堆栈，因此您可以在出现问题之前放置大约 1000 个 1KB 的对象。

> 继承需要它

为什么会呢？

> 别的东西？

对象所需的生命周期长于堆栈帧的生命周期。这是在堆上分配的主要原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T18:36:08.103

> 什么时候应该在堆栈而不是堆上分配一个类？

只要有可能，不会造成很大的不便。会有例外，但作为一般规则回答您的问题：在创建实例时，`new`/`new[]`应该*输入*少于百分之一的时间。

* * *

> 确实需要一个指针（即对象的生命周期要超过声明的范围）

是的，在适当的情况下。从您对 OP 中描述的堆的使用来看，这可能比您想象的要少得多。

> 类或数组对于堆栈来说太大了

是的，**但这**应该不是什么大问题——一个很大的类*通常*表明你的类存在根本性的问题。客户端友好的类可能会考虑在堆上创建那些巨大的、固定大小的数组。

> 继承需要它（抽象基类/接口）

在某些情况下（例如，存在抽象工厂或多态类型的深层克隆），但随后是*工厂*创建了类型，并且问题通常在您考虑之前转移到程序对堆栈的使用上。

> 别的东西？

不

* * *

原因：

*   它清晰、简洁，并且它的生命周期和范围已经确定。
*   更少的资源消耗。
*   更少与内存相关的错误或可能出错的事情。
*   速度。堆栈分配非常快。更少的锁。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-08T17:48:58.587

只有在需要动态分配内存时才在堆上分配。这意味着您不知道在编译时需要分配多少。您一直在堆栈上分配

# php - PHP没有从html文本框中获取文本

> ID：12333064
> 
> 赞同：0
> 
> 时间：2012-09-08T17:45:18.063
> 
> 标签：php, html, variables, textbox

我正在尝试设置一个基本文本框，当按下提交按钮时，它会将框的内容通过电子邮件发送给我。问题是我不断收到空白电子邮件。由于某种原因，PHP 代码没有访问文本框输入。

```
//Two Email Lines
$email_to = "contact@mywebsite.com";
$email_subject = "AUTO: REQUEST";

//Set equal to email form textbox
$email_form = $_POST['e3text'];

$email_message = "Email: " . $email_form . "";

//Create email headers
@mail($email_to, $email_subject,$email_message,$headers); 
```

HTML 如下

```
 <div id="form">

    <form method="post" action="Email_Form_Script.php" 
      enctype="text/plain" 
      onsubmit="window.open('FormPopUp.html','popup','width=500,height=500,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0');" >
  <div>
    <input type="text" class="text" name="e3text" id="emailForm" 
           value="Enter your e-mail address" 
           onfocus="if(this.value=='Enter your e-mail address') { this.value = '' }" 
           onblur="if(this.value=='') { this.value = 'Enter your e-mail address' }" />
    <input type="hidden" value="" name="email2"/>
    <input type="hidden" name="loc" value="en_US"/>
    <input type="submit" class="submit" value=""/>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:02:08.350

从表单标签中删除 enctype="text/plain" 。有用

Email_Form_Script.php

```
$email_to = "contact@mywebsite.com";
$email_subject = "AUTO: REQUEST";
//Set equal to email form textbox
$email_form = $_POST['e3text'];
echo $email_form;
$email_message = "Email: " . $email_form . "";
//Create email headers
@mail($email_to, $email_subject,$email_message,$headers); 
```

和 x.html

```
<form method="post" action="Email_Form_Script.php"  onsubmit="window.open('FormPopUp.html','popup','width=500,height=500,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0');" >
<div>
<input type="text" class="text" name="e3text" id="emailForm" value="Enter your e-mail address" onfocus="if(this.value=='Enter your e-mail address') { this.value = '' }" onblur="if(this.value=='') { this.value = 'Enter your e-mail address' }" />
<input type="hidden" value="" name="email2"/><input type="hidden" name="loc" value="en_US"/>
<input type="submit" class="submit" value=""/>
</div> 
```

它对我有用。

# objective-c - 使用pickerView（来自ViewController）从webservice填充对象

> ID：12333067
> 
> 赞同：0
> 
> 时间：2012-09-08T17:45:35.133
> 
> 标签：objective-c, xcode, xcode4.3

我从数据类型的 web 服务中获得了成功的结果`NSMutableArray`，但我的困境是如何将内容结果显示给我的`UIPickerView`对象？当我运行这个时，没有出现任何内容`UIPickerView`，但是当我点击按钮时，它从网络服务内容中弹出了第一个国家。任何评论将不胜感激，这里有我的代码：

我的视图控制器.h

```
#import <UIKit/UIKit.h>
#import "Service.h"

@class myController;
@interface PromoViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate, UIPickerViewDelegate>{
}    
@property (strong, nonatomic) IBOutlet UIPickerView *singlePicker;
@property (strong, nonatomic) NSArray *pickerData;

- (IBAction)buttonPressed;  
@end 
```

========================

myViewController.m：

```
#import "myViewController.h"
#import "Service.h"

@implementation myViewController;
@synthesize singlePicker;
@synthesize pickerData;

- (IBAction)buttonPressed {
    NSInteger row = [singlePicker selectedRowInComponent:0];
    NSString *selected = [pickerData objectAtIndex:row];
    NSString *title = [[NSString alloc] initWithFormat:
                       @"You selected %@!", selected];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                message:@"Thank you for choosing."
                delegate:nil
                cancelButtonTitle:@"You're Welcome"
                otherButtonTitles:nil];
    [alert show];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    //NSArray *array = [[NSArray alloc] initWithObjects:@"Luke", @"Leia",
    //                  @"Han", @"Chewbacca", @"Artoo", @"Threepio", @"Lando", nil];
    //self.pickerData = array;
    Service* service = [[Service alloc] init];
    [service WEBServiceCountries:self action:@selector(handleAllCountries:)]; 
    //self.pickerData = countryArray;
}

-(NSMutableArray *) handleAllCountries:(id) value{
    NSMutableArray *a = value;
    NSLog(@"myViewController:  we have %d countries", [a count]);

    NSMutableArray *countryArray = [[NSMutableArray alloc] init];
    NSMutableArray *countryArrayid =  [[NSMutableArray alloc]  init];

    for (LBCCountry *country in a ){
        NSLog(@"myViewController:  %d - %@", country.CountryID, country.CountryName);
        [countryArray addObject:country.CountryName];     
        [countryArrayid addObject:[NSString stringWithFormat:@"%d",country.CountryID]];
    }
    self.pickerData = countryArray;
    NSLog(@"pickerData: %@", pickerData);
    return countryArray;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.singlePicker = nil;
    self.pickerData = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
#pragma mark -
#pragma mark Picker Data Source Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component {
    return [pickerData count];
}

#pragma mark Picker Delegate Methods
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component {
    return [pickerData objectAtIndex:row];
}
@end 
```

===============

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:07:05.180

在 handleAllCountries 方法中，您将属性 pickerData 设置为没有强引用的 countryArray。因此，当该方法完成时，pickerData 将为 nil。而不是仅仅将 self.pickerData 设置为 countryArray，您应该使用：

```
self.pickerData = [NSArray arrayWithArray:countryArray]; 
```

这会将国家数组中的所有对象放入pickerData。

# javascript - 无法让 SlidesJS 工作

> ID：12333068
> 
> 赞同：0
> 
> 时间：2012-09-08T17:45:44.793
> 
> 标签：javascript, html, carousel

我正在测试[SlidesJS](http://slidesjs.com/#examples)的滚动列表元素，但我并没有完全让它工作。根据示例，它看起来非常简单。

这是我正在使用的 js：

```
$("#fp-slider-container .slides_container").slides(); 
```

我的标记看起来像这样：

```
<div class="blue-gradient" id="fp-slider-container">
  <div class="main-content-container">
    <div class="item-container">
      <ul class="slides_container">
        <li>
          <div class="fp-slider-content">
            <h1>Web design</h1>
            <div>Some text here</div>
            <div class="more"><a href="#" title="Web design">more</a> » </div>
          </div>
        </li>
        <li>
          <div class="fp-slider-content">
            <h1>Photography</h1>
            <div>Some more text here</div>
            <div class="more"><a href="#" title="Photography">more</a> » </div>
          </div>
        </li>            
      </ul>
    </div>
  </div>
</div> 
```

我在这里有我的[JSFiddle](http://jsfiddle.net/gK8Lc/)。

我的 JSfiddle 不工作是因为我已将 SlidesJS 添加到 javascript 框中吗？还是因为我正在使用它而不起作用`<ul><li>`？

预期结果是列表元素的轮播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:09:28.910

您的 js 调用需要如下所示：

`$("#fp-slider-container").slides();`

# node.js - 从 node.js 生成 ssh 命令时如何传递密钥文件？

> ID：12333070
> 
> 赞同：5
> 
> 时间：2012-09-08T17:45:55.553
> 
> 标签：node.js, ssh, child-process

这适用于我的本地终端：

```
ssh -i ~/.ec2/mykey.pem ubuntu@ec2-yada-yada.amazonaws.com ls 
```

当然可以。但是，当我使用 node.js 的命令尝试相同的操作时，`child_process.spawn`它会抱怨密钥不存在/无法访问。

```
// child process
var childProcess = require('child_process').spawn;

// spawn the slave using slaveId as the key
slaves[slaveId] = childProcess('ssh', [
    '-i /mykey.pem',
    'ubuntu@ec2-yada.amazonaws.com',
    'ls'
]) 
```

结果：

```
stderr: Warning: Identity file  /mykey.pem not accessible: No such file or directory.  
stderr: Permission denied (publickey). 
```

尝试的事情：

1.  密钥路径的变化：（
    `/actual/path/to/mykey.pem`
    `mykey.pem`在节点项目的根目录中包含
    `/mykey.pem`文件的副本）（在节点项目的根目录中包含文件的副本）
    `~/.ec2.mykey.pem`（应该在哪里）

2.  运行没有 ssh 部分的命令，即。`childProcess(ls);`- 作品。

3.  `chmod 644, 600, 400 etc. mykey.pem`

在这一点上，我唯一的理论是传递文件引用存在问题，我需要使用 fs 模块做*一些事情。*（？）是的，我知道有一些库可以通过 node 进行 ssh 访问，但它们使用的密码不会削减它，而且无论如何，我的要求并不能真正证明一个库的合理性。

请告诉我我很愚蠢，这是可能的。

**更新：**

好的，所以我*可以*像这样使用 exec 命令：

```
var childProcess = require('child_process').exec;
slaves[slaveId] = childProcess('ssh -i mykey.pem ubuntu@ec2-yada.amazonaws.com ls',  function (error, stdout, stderr) {...} 
```

尽管如此，我觉得我已经从使用`fork`所有漂亮的消息传递和方便的属性（我最初的实现在本地运行良好）创建一个真正的奴隶降级到拥有一个真空吸尘器并被告知自己完成所有工作（现在我想在远程主机上启动奴隶）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T03:45:44.257

我最近似乎经常跳布兰登的评论:-)。他又是对的。当您执行`ssh -i ~/.ec2/mykey.pem ubuntu@ec2-yada-yada.amazonaws.com ls`时，`ssh`在这种情况下，可执行文件会获取四个参数：`-i`、密钥文件的名称、主机地址和命令，例如。`ls -ltr /tmp`. 当它看到 a 时`-i`，它希望*下一个*参数是密钥文件的名称，而不是将名称视为`-i`.

请记住，当您`spawn`编写程序时，您无需通过 shell 直接调用它，因此您必须准确地传递 shell在 shell 进行任何扩展、引用等*之后*`exec`传递给它的参数。当您使用时，您是实际上将命令行字符串传递给 shell，因此 shell 会为您完成所有这些工作，包括确定一个参数在哪里结束，另一个参数从哪里开始。

# java - JFrame 显示不正确

> ID：12333078
> 
> 赞同：2
> 
> 时间：2012-09-08T17:47:44.853
> 
> 标签：java, swing, user-interface, jframe, visitor-pattern

在我的客户端/服务器 Java 应用程序中，我发现了一个奇怪的行为，它阻止任何内容显示在 JFrame 中，而不是第一个（登录）。

JFrame 已显示，但它是透明的，如果我调整它的大小，我会有这样的效果：

![在此处输入图像描述](../Images/e3e98806741ee08c92e08e900532fd85.png)

该应用程序的工作方式是这样的（2个主要的，1个在服务器类中，1个在客户端类中：

SERVER SIDE 1) main 有一个无限循环，当客户端连接到它时启动一个新线程来处理消息

CLIENT SIDE 1) main 获取 GuiLogin JDialog 的单例，并执行一个方法显示它

2) 当用户按下 Login 时，guilogin 中的 ActionListener 调用客户端方法将 LoginRequest 对象分派给 Server，Server 以 LoginResponse 对象进行回复

3）如果电子邮件和密码正确（电子邮件=a，密码=b），它应该显示另一个JFrame，但无论我尝试什么，它总是显示错误 - 透明框架

3b）如果电子邮件和密码不正确，应用程序会显示一个 JDialog（工作正常）

我认为我的错误是概念性的，代码看起来不错，我调用新的 JFrame

```
 guiLogin.dispose();

   JFrame j = new JFrame();
   j.setVisible(true); 
```

作为独立代码，它可以工作，但是在客户端上我的访客模式消息处理程序中的一个方法中，它的工作原理就像在屏幕截图中一样

[eclipse项目的缩小版，剥离了所有与bug无关的类和方法](http://dl.dropbox.com/u/53684320/RiproduciBug.zip)

编辑：我对 Java Gui 和事件非常缺乏经验，我现在检查导致问题的代码在 EDT 内（ javax.swing.SwingUtilities.isEventDispatchThread() 返回 true ）。我应该在 SwingWorker 线程中移动整个消息处理逻辑吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:18:46.780

你挡住了`Event Dispatch Thread (EDT)`。这是在 EDT 上执行的片段`TinyClient`：

```
do {
    System.out.println("waiting response");
    try {
        Response risp = (Response) in.readObject();
        risp.accept(resHandler);
    }
    catch (SocketException e) {
        // unhandled yet
    }
    Thread.sleep(500);
} while (waitForMessage); 
```

在其中一次迭代`in.readObject();`调用被阻塞。对于`Thread.Sleep`. 所有与 UI 相关的工作，例如绘画，都在 EDT 上进行。一旦 EDT 被阻止，它就不会处理任何事件。因此，您看到的结果 - UI 没有重新绘制。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多详细信息。您可能希望采用多线程解决方案来处理网络。`SwingWorker`在同一个教程中查看。它允许在后台线程上执行任务并在 EDT 线程上传达结果。

***编辑***：

由于您的应用程序的详细信息和规模不可用，因此很难给出具体的解决方案。请记住，Swing 是单线程的。所有 UI 工作都必须在 EDT 上完成。为了获得最佳性能，EDT 上的所有任务都应该简短。网络应该在工作线程上处理。您有几个选项，例如`SwingWorker`，`ExecutorService`或您自己的辅助线程。`SwingWorker`具有在 EDT 上推送更新的内置机制。如果`ExecutorService`您可以`SwingUtilities.invokeLater`用于此目的。

# php - php函数没有返回正确的文件日期

> ID：12333081
> 
> 赞同：0
> 
> 时间：2012-09-08T17:48:35.247
> 
> 标签：php

不知道为什么，但我无法获得一个 PHP 函数来显示某个文件的提交时间。前任; 大约 1 年前或大约 2 秒前。但是，在我的情况下，即使文件已在几秒钟前提交，它仍停留在“大约 1 天前”。

这是自提交以来应该得到时间的函数

```
function time_since($since) {
    $chunks = array(
        array(60 * 60 * 24 * 365 , 'year'),
        array(60 * 60 * 24 * 30 , 'month'),
        array(60 * 60 * 24 * 7, 'week'),
        array(60 * 60 * 24 , 'day'),
        array(60 * 60 , 'hour'),
        array(60 , 'minute'),
        array(1 , 'second')
    );

    for ($i = 0, $j = count($chunks); $i < $j; $i++) {
        $seconds = $chunks[$i][0];
        $name = $chunks[$i][1];
        if (($count = floor($since / $seconds)) != 0) {
            break;
        }
    }

    $print = ($count == 1) ? '1 '.$name : "$count {$name}s";
    return $print;
} 
```

这是使用上述函数并将所有信息注入 JSON 的代码

```
$dh = opendir($dir);
$files = array();
while (($file = readdir($dh)) !== false) {
    if ($file != '.' AND $file != '..' ) {
        if (filetype($dir . $file) == 'file') {
            $files[] = array(
                'id' => $domain.$dir.$file."?".Salt($file),
                'name' => $file,
                'size' => filesize($dir . $file). ' bytes',
                'date' => time_since(date("ymd Hi", filemtime($dir . $file))),
                'path' => $domain.$dir.$file,
                'thumb' => $domain.$dir."thumbnails/".$file
                #'thumb' => $dir . 'thumbs/' . $file
            );
        }            
    }
}
closedir($dh);

    $json = json_encode($files);

    $callback = $_GET['callback'];
    echo $callback.'('. $json . ')'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:55:19.747

您是否尝试过为您的函数传递时间戳而不是字符串：

```
'date' => time_since(time() - filemtime($dir . $file)), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:55:40.370

在进行计算之前，您应该将日期转换为 unix 时间戳。

```
 'date' => time_since(date("ymd Hi", filemtime($dir . $file))), 
```

应该 ：

```
 'date' => time_since(strtotime(date("Y-m-d H:i:00", filemtime($dir . $file)))), 
```

更新：

@Arthur Halma 刚刚给出了正确答案：filemtime 返回时间戳！

```
 'date' => time_since(time() - filemtime($dir . $file)), 
```

应该管用。

# java - 字符串在 Toast 和 Logcat 中显示不同：Android

> ID：12333083
> 
> 赞同：0
> 
> 时间：2012-09-08T17:48:47.943
> 
> 标签：java, android, string

在我的应用程序中，我想通过蓝牙接收一些字符串，然后使用处理程序将它们传递回我的 UI 线程。我使用 Handler 对象将数据传回主 UI 线程：

```
mHandler.obtainMessage(MainActivity.MESSAGE_READ, length, 0, a).sendToTarget(); 
```

注意：**a**是我从蓝牙 InputStream 获得的字节数组。

在我的 UI 线程中，我有：

```
private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
                    byte[] b = (byte[]) msg.obj;
            String str = new String(b, 0, msg.arg1);
            Toast.makeText(MainActivity.this, str, Toast.LENGTH_LONG).show();
            Log.i(TAG, "mHander: " + str);
                }
} 
```

例如，如果我从我的其他蓝牙设备（它是一个由微控制器控制的蓝牙模块）向我的 Android 手机发送一个简单的字符串“cfm123245”，则 Toast 将在屏幕上准确显示“cfm12345”。但是在 Logcat 中，我看到了这个丑陋的字符串：

```
MainActivity         mHander: cfm�������� 
```

我不知道为什么 Toast 和 Logcat 之间的一个 String 对象看起来不同。如果我让那个字符串对它做一些进一步的处理方法，我似乎得到了一个丑陋的字符串`cfm��������`。所以是错误的数据。

谁能向我解释为什么会这样？如何解决这个问题？请帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:25:07.100

`mHandler.obtainMessage(FileBrowserActivity.MESSAGE_READ, length, 0, a).sendToTarget();`

我相信`a`上面的**Toast 是某种类型的对象**......我希望你已经覆盖了它的 toString() 方法......

那么最好还是`a.toString()`去`a + ""`吐司**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:59:08.260

很可能是由编码问题引起的。试试这个看看是否有帮助

```
String str = new String(b, "US-ASCII"); 
```

如果上述方法不起作用，您也可以尝试 UTF-8 编码。

# php - PHP的方括号：什么时候加引号，什么时候不加引号？

> ID：12333087
> 
> 赞同：5
> 
> 时间：2012-09-08T17:48:59.957
> 
> 标签：php, variables, post, quotes, brackets

```
<html>
<head><title></title></head>
<body>
<?php
if (isset ($_POST['posted'])) {
if ($_POST['question1'] == "Lisbon") {
  echo "You are correct, $_POST[question1] is the right answer<hr>";
}

if ($_POST['question1'] != "Lisbon") {
  echo "You are incorrect, $_POST[question1] is not. the right answer<hr>";
}
}
?>
<form method="POST" action="quiz.php">
<input type="hidden" name="posted" value="true">
What is the capital of Portugal?
<br>
<br>
<input name=''question1" type=''radio" value=''Porto''>
Porto
<br>
<input name=''question1" type="radio" value=''Lisbon''>
Lisbon
<br>
<input name="question1" type="radio" value=''Madrid''>
Madrid
<br>
<br>
<input type=''submit''>
</form>
</body>
</html> 
```

这是整个部分，它来自PDF。但问题是，他们没有说明为什么在 if 语句中使用 question1 的原因，但在 echo 语句中没有引号。

简而言之：为什么 $_POST['question1'] 在 if 语句中有 ' ' 而为什么 $_POST[question1] 在 echo 语句中没有。它们是同一个变量。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T17:52:13.373

*除非在双引号字符串中，否则*始终使用引号（用于字符串键）。*请参阅手册[的字符串解析部分](http://us.php.net/manual/en/language.types.string.php#language.types.string.parsing)。*

 *```
$juices = array("apple", "orange", "koolaid1" => "purple");

echo "He drank some $juices[0] juice.".PHP_EOL;
echo "He drank some $juices[1] juice.".PHP_EOL;
echo "He drank some juice made of $juice[0]s.".PHP_EOL; // Won't work
echo "He drank some $juices[koolaid1] juice.".PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:29:34.213

数组键的字符是文字​​，所以文本应该有单引号。整数键不应该有引号。

以下是更详细的信息：

*   当数组键以字母字符开头时，PHP 将“理解”如果您没有放单引号，那么您的意思是放单引号。所以`$var[key]`会被解释为`$var['key']`。
*   在双引号字符串中，用大括号括住数组变量以避免出现问题。这也适用于 HEREDOCS！`echo "Your ID is {$user['id']}."`.
*   您可以使用双引号，但建议不要使用，除非您正在执行变量插值，即`$var["someKey$num"]`. 即使在这种情况下，最好使用`$var['someKey'.$num]`or `$var["someKey{$num}"]`。*

# c# - C# for Windows Phone 7，为什么是这种语言

> ID：12333088
> 
> 赞同：1
> 
> 时间：2012-09-08T17:49:10.643
> 
> 标签：c#, windows-phone-7

我试图找到一个具体的论点，为什么选择 C# 用于 Windows Phone 平台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:51:47.417

恕我直言。C# 是 .NET 世界中最流行的语言。在 Windows Phone 平台 - Silverlight 中，选择了 C#。

# java - 如何为特定值重新排列 bean 集合中的元素

> ID：12333089
> 
> 赞同：0
> 
> 时间：2012-09-08T17:49:15.107
> 
> 标签：java, list, collections

假设我有一个 bean 集合，它在为其编写的自定义比较器的帮助下按 empld、dept、project 排序，并使用 apache 集合 ComparatorChain 对该 bean 的列表进行排序。豆子如下。

```
public class Employee  {

    protected String empId; //alphanumeric e.g.abc123
    protected String empFullName;   
    protected String empAddress;
    protected String dept;
    protected String project;
    protected String customer;

    public String getEmpId() {
        return empId;
    }
    public void setEmpId(String empId) {
        this.empId = empId;
    }
    public String getEmpFullName() {
        return empFullName;
    }
    public void setEmpFullName(String empFullName) {
        this.empFullName = empFullName;
    }
    public String getEmpAddress() {
        return empAddress;
    }
    public void setEmpAddress(String empAddress) {
        this.empAddress = empAddress;
    }
    public String getDept() {
        return dept;
    }
    public void setDept(String dept) {
        this.dept = dept;
    }
    public String getProject() {
        return project;
    }
    public void setProject(String project) {
        this.project = project;
    }

    public String getCustomer() {
        return customer;
    }
    public void setCustomer(String customer) {
        this.customer = customer;
    }

} 
```

客户价值可以是，比如说：公司、政府、大学

现在假设集合中有数千条记录（bean），现在我想要的是相同的 empId（可以出现两次），如果客户是公司，则将其移动到具有客户名称 University 的相同 empId 之下。客户的记录可能不按顺序排列，所以任何一个都可以先出现，等等。

所以基本上我想移动两个或多个具有相同empId的记录并且其中一个有customer =Company将其移动到具有相同empId的订单下方，例如

![自定义排序](../Images/baa9ef65ac5a1e5310524ed8540c3d31.png)

我怎样才能以一种有效且可能的线程安全的方式实现这种记录的交换/重新排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:29:38.770

如果要对集合中的记录进行排序，则需要使该对象类实现比较器并根据需要实现方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:24:35.627

我解决了这个问题如下：

1.  您可以创建一个单独的比较器类，该类实现了 Comparator 并具有公司、政府、大学的比较方法。

2.  您可以在公司、政府、大学的 Employee 类中创建创建者比较器方法，如下所示：

    公共静态比较器 COMPARE_BY_COMPANY = new Comparator() { public int compare(Employee o1, Employee o2) {

    ```
     if (o1.company == null && o2.company == null) return 0;   

            if (o1.company != null && o2.company == null) return -1;
            if (o1.company == null && o2.company != null) return 1;

            return o1.company.compareTo (o2.company);    
        }
    }; 
    ```

虽然第一种方法更好，但第二种方法也没有害处。

然后在您想要自定义排序顺序的类中，执行以下操作：

```
 ComparatorChain chain = new ComparatorChain();
             chain.addComparator(Employee.COMPARE_BY_COMPANY);
             chain.addComparator(Employee.COMPARE_BY_GOVERNMENT);
             chain.addComparator(Employee.COMPARE_BY_UNIVERSITY);

             Collections.sort(EmployeeList, chain); 
```

其中 ComparatorChain 是 org.apache.commons.collections.comparators.ComparatorChain。

上面的代码将按公司排序，然后按政府排序，然后按大学排序，最后对列表进行排序，结果将按该顺序显示。

# python - 在 Python 中使用元组作为字典键

> ID：12333091
> 
> 赞同：4
> 
> 时间：2012-09-08T17:49:36.617
> 
> 标签：python, tuples

我正在尝试使用具有 n 个值的元组作为键的字典。我想找到第二个值为 10 的元组（例如）

```
('HI', '10', '10', '10', '10', '10000', 'true', '0.5GiB', '8', '100000s', '100MiB')
('HI', '100', '10', '10', '10', '100', 'false', '0.5GiB', '8', '100000s', '100MiB')
('HI', '100', '10', '10', '10', '1000', 'true', '0.7GiB', '8', '1000s', '100MiB') 
```

任何想法我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T17:54:09.733

对于该特定场景，您必须遍历所有键并针对您的谓词测试它们：

```
results = set(k for k in your_dict if k[1] == '10') 
```

如果您想为重复查找更快地执行此操作，并且您提前知道要检查的字段，您可以构建索引，将每个元组中特定索引的值映射到具有给定键的键价值：

```
from collections import defaultdict

index_2nd = defaultdict(set)
for k in your_dict:
    index_2nd[k[1]].add(k) 
```

然后你可以用它来查找一个特定的值：

```
results = index_2nd['10'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T17:54:18.463

你不能，不容易。您必须遍历所有键以检查匹配的键：

```
matching = [key for key in yourtupledict if key[1] == '10'] 
```

如果你需要在你的应用程序中做很多事情，你最好创建索引；将所有键中的第二个值映射到特定键的字典或类似工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T17:56:54.847

用于`iterkeys()`迭代键

```
d = {(1,2,3):1,(1,2,4):2,(2,2,3):3}

for k in d.iterkeys():
    if k[0] == 1:
        print k 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T17:56:05.530

```
def find(key_element):
    return [value for key, value in a.iteritems() if len(key) > 1 and key[1] == key_element] 
```

# algorithm - 左子右兄弟二叉树的平均叶高

> ID：12333095
> 
> 赞同：0
> 
> 时间：2012-09-08T17:50:38.647
> 
> 标签：algorithm, binary-tree, average

我正在为一场考试练习，但我有一个我想不通的例子。无论如何，任务是这样的：

> 您有一个左子右兄弟树的数据结构，如下所示：
> 
> ```
> public class TreeLCRSnode {
>     public TreeLCRSnode parent, leftSon, rightSibling;
> } 
> ```
> 
> 您需要编写一个名为 double avgH(TreeLCRSnode root) 的函数，该函数将返回平均叶高的结果。

为了确保每个人都明白，叶子是一个没有任何孩子的节点。例如，如果一棵树看起来像这样，

```
4
|
2----7
|
3 
```

然后有两片叶子，一张在高度 1（第 7 号），一张在高度 2（第 3 号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:22:54.340

我认为对于这项任务，您需要使用几个全局变量：

*   `currentHeight`- 递归中的当前高度
*   `leafHeightSum`- 当前找到的所有叶子的高度总和
*   `leafNumber`- 到目前为止找到的所有叶子的计数

那么解决方案可以是这样的：

```
int currentHeight, leafHeightSum, leafNumber;
double traverse(TreeLCRSnode node) {
    currentHeight = 0;
    leafHeightSum = 0;
    leafNumber = 0;
    traverseHelper(node);
    // if the tree can be empty you might need a check here.
    return (double)leafHeightSum  / (double)leafNumber;
}

void traverseHelper(TreeLCRSnode node) {
    while (node != null) {
        if (node.leftSon) {
            currentHeight++;
            traverseHelper(node.leftSon);
            currentHeight--;
        } else {
            leafHeightSum  += currentHeight;
            leafNumber++;
        }
        node = node.rightSibling;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:10:02.167

这是对[Boris Strandjev 答案](https://stackoverflow.com/a/12337927/1247955)的轻微修改。它的目标是更简洁一些并避免全局变量，因为`currentHeight`按值`leafNumber`传递，按引用传递，叶子高度的总和是返回值。

```
double traverse(TreeLCRSnode node) {
    int leafNumber=0;

    return (double)traverseHelper(node,0,&leafNumber)/(double)leafNumber;
}

int traverseHelper(TreeLCRSnode node, int currentHeight, int *leafNumber) {
    if(!node) return 0;

    if(!node.leftSon) {
        (*leafNumber)++;
        return currentHeight + traverse(node.rightSibling, currentHeight, leafNumber);
    } else {
        return traverse(node.leftSon, currentHeight+1, leafNumber) + traverse(node.rightSibling, currentHeight, leafNumber);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:02:31.800

首先，您需要编写一个遍历树的程序。就像是：

```
void traverse(TreeLCRSnode node) {
    while (node != null) {
        if (node.leftSon) traverse(node.leftSon);
        node = node.rightSibling;
    }
} 
```

这将使您到达所有节点。然后你只需要确定节点是否是叶子，并弄清楚如何计算平均值（提示：传递一个深度，跟踪到目前为止找到的叶子的深度总和，以及找到的叶子总数远的）。

# delphi - 为什么 AsyncCall 在主线程中运行？

> ID：12333100
> 
> 赞同：1
> 
> 时间：2012-09-08T17:51:11.560
> 
> 标签：delphi, asynchronous, delphi-2010

我有一个运行长时间操作的模型对象。我试图在线程中运行其中一些操作以保持界面响应，一次下载 2 个东西等，但我想尽可能地从界面代码中隐藏这些细节。我正在尝试使用 AsyncCall 库，但遇到了问题。

```
type EUpdaterAction = (auFoundCurrentVersion, auFoundUpdateVersion);

type
  TUpdater = class
  public
    procedure loadCurrentVersion();
    procedure notify(action: EUpdaterAction);
  end;

procedure TUpdater.loadCurrentVersion();
begin
  TAsyncCalls.Invoke(procedure 
  begin 
    Assert(Windows.GetCurrentThreadId() <> System.MainThreadID);
    //Really long code
    TAsyncCalls.VCLSync(procedure begin notify(auFoundCurrentVersion); end);
  end);
end; 
```

断言失败。我是否需要做一些事情让它在单独的线程中运行，或者[库中显示的第一个示例](http://andy.jgknet.de/blog/bugfix-units/asynccalls-29-asynchronous-function-calls/)实际上并没有在线程中运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:58:18.950

您需要调用`IAsyncCall.ForceDifferentThread`以强制代码在不同的线程中运行。在您的示例中， TAsyncCalls.Invoke() 返回的接口立即释放，因为函数结束并释放 IAsyncCall 接口调用该`Sync`方法。并且由于您的任务尚未开始，该`Sync`方法将在同一个线程中执行它，除非该`ForceDifferentThread`方法被调用。

```
TAsyncCalls.Invoke(procedure 
begin 
  Assert(Windows.GetCurrentThreadId() <> System.MainThreadID);
  //Really long code
  TAsyncCalls.VCLSync(procedure begin notify(auFoundCurrentVersion); end);
end).ForceDifferentThread; // <<<<< 
```

但这真的是你想要的吗？我猜你想在 loadCurrentVersion() 退出后保持线程处于活动状态。对于这个 AsyncCalls 不是正确的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:28:28.753

这已经在 SO 上讨论过了。当您调用`Invoke`AsyncCalls 时，会将您的代码放入要执行的队列中；稍后 Asyncalls 会找到一个工作线程来执行您的代码，但是如果您的代码在工作线程分配给您的代码`Sync` **之前**`ForceDifferentThread`调用（并且没有使用），AsyncCalls 会从队列中删除您的代码并在主线程中执行它。这是设计使然。

# java - 您的 TabHost 必须有一个 id 属性为“android.R.id.tabs”的 TabWidget

> ID：12333101
> 
> 赞同：1
> 
> 时间：2012-09-08T17:51:40.217
> 
> 标签：java, android, xml, eclipse

尝试设置我的 TabHost 时，出现异常，原因是：“您的 TabHost 必须有一个 id 属性为 'android.R.id.tabs' 的 TabWidget”

我在我的 xml 文件中恢复到最小选项卡 Host/widget 和 FrameLayout 的示例（使用 android:id="@android:id/tabs" 的 Tabwidget）我尝试清理我的项目，删除我的 R 文件，重新启动 eclipse 和我的机器（OSX Lion，indigo，r20），但此错误不断出现。欢迎任何提示。TIA

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</LinearLayout>
</TabHost> 
```

# java - 我的线程忽略标志中断

> ID：12333109
> 
> 赞同：-2
> 
> 时间：2012-09-08T17:52:32.080
> 
> 标签：java, android, multithreading

嗨，伙计，我有一个简单的线程，我想在标志中断打开时终止。这是运行方法开头的代码

```
conn = false;
for (int i=0; (isInterrupted() == false) && (i < TRY_CONNECT) && !conn; i++) {
    try{
        Log.d(TAG,"TRY"+i);
        sock.connect();
        conn = true;
    } catch (IOException e) {
        try {
            sleep(5000);
        } catch (InterruptedException e1) {
            Log.d(TAG,"CATCH int");
            break;
        }
    }
}
if(isInterruped() == true)
    Log.d(TAG,"INT"); 
```

我调用他中断方法的线程，它不会终止循环..他没有看到我调用的中断......怎么可能？对于调试：在我调用中断的地方我插入两个打印日志 cat ... thread_reader.interrupt(); boolean b=thread_reader.isInterrupted(); 日志.d(标签,""+b); 在 log cat 上，系统打印“false”怎么可能？我刚刚调用了中断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:08:35.510

当你 catch 时`InterruptedException`，只需打破循环。不要依赖循环头中的检查，因为在抛出`isInterrupted()`时会清除中断标志。`InterruptedException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:36:21.893

每当你捕捉`InterruptedException`到它时，都会*清除*线程上的中断标志。当然，每次执行 catch 时，您都需要执行类似以下模式的操作：

```
try {
     sleep(5000);
} catch (InterruptedException e1) {
     Log.d(TAG,"CATCH int");
     // _always_ re-interrupt the thread since the interrupt flag is cleared
     Thread.currentThread().interrupt();
     // you probably want to break
     break;
} 
```

正如@Alexei 提到的，您可以在 catch 块中放置一个`break`or`return`以立即退出线程。但无论哪种方式，您都应该始终重新中断 ，`Thread`以便程序的其他部分可以检测到在`Thread`.

有关更多信息，请参阅此问题/答案：

> [为什么要捕获 InterruptedException 来调用 Thread.currentThread.interrupt()？](https://stackoverflow.com/questions/1895881/why-would-you-catch-interruptedexception-to-call-thread-currentthread-interrupt)

# google-app-engine - 将消息从 GAE 服务器发送到客户端程序

> ID：12333111
> 
> 赞同：1
> 
> 时间：2012-09-08T17:52:54.067
> 
> 标签：google-app-engine

我的 GAE 应用程序有一个服务器端程序（在 Google App Engine 中运行）和一个客户端程序。有没有优雅的方式将消息从服​​务器发送到客户端程序？GAE 中不允许使用套接字，并且通道 API 不适用，因为客户端程序不是浏览器。我能想到的唯一方法是让客户端程序不时（比如每5秒）检查一次服务器状态。该程序是它消耗了昂贵的前端实例时间，即使只使用了内存缓存。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:14:32.597

我建议您使用[PubNub](http://www.pubnub.com)，您可以在其中找到各种平台上的大量[示例/教程](http://www.pubnub.com/devcenter#tutorials)。只需几行代码即可轻松集成它，您将获得推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:58:21.913

您可以使用[http://pubsubhubbub.appspot.com/](http://pubsubhubbub.appspot.com/)[`pubsubhubbub`](https://code.google.com/p/pubsubhubbub/)上的社区服务器将更新推送到您的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:43:48.537

您可以通过 XMPP API 执行此操作。[https://developers.google.com/appengine/docs/java/xmpp/overview](https://developers.google.com/appengine/docs/java/xmpp/overview)

# qt - QML 动画可见属性更改

> ID：12333112
> 
> 赞同：15
> 
> 时间：2012-09-08T17:53:00.457
> 
> 标签：qt, animation, qt4, transition, qml

我希望在元素变得可见时绘制动画（应该看起来平滑，而不是整体）

我试过这个

```
states: State
{
    name: "iconOff"
    when: iconOnSwitch.checked == false
    PropertyChanges { target: selectIconRow; visible: false }
}

transitions: Transition
{
    reversible: true
    from: ""
    to: "iconOff"
    PropertyAnimation
    {
        properties: "x,y,visible"
        easing.type: Easing.InOutQuad
        from: selectIconRow
        property: "visible"
    }
} 
```

但是 selectIconRow 仍然会立即出现

我怎样才能使用这样的动画？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-09T00:47:25.890

因为它是布尔值，`visible`所以不能为属性设置动画。也许`opacity`可以做到这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-10T12:56:09.270

以下是如何做到这一点`opacity`：

```
Rectangle {
    id: myRect
    property bool stateVisible: true
    ...
    states: [
        State { when: stateVisible;
            PropertyChanges {   target: myRect; opacity: 1.0    }
        },
        State { when: !stateVisible;
            PropertyChanges {   target: myRect; opacity: 0.0    }
        }
    ]
    transitions: Transition {
        NumberAnimation { property: "opacity"; duration: 500}
    }
} 
```

请记住 Vasco Rinaldo 的建议。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-02T10:20:35.720

仅供将来参考，这是我的解决方案，它也照顾 Vasco 的警告。基本上我`visible`在不透明度改变后为组件的属性设置动画。在布尔值上看到 a 很痛苦`NumberAnimation`，但它正在工作：

```
states: [
    State{
        name: "Visible"
        PropertyChanges{target: root; opacity: 1.0}
        PropertyChanges{target: root; visible: true}
    },
    State{
        name:"Invisible"
        PropertyChanges{target: root; opacity: 0.0}
        PropertyChanges{target: root; visible: false}
    }
]

transitions: [
        Transition {
            from: "Visible"
            to: "Invisible"

            SequentialAnimation{
               NumberAnimation {
                   target: root
                   property: "opacity"
                   duration: 500
                   easing.type: Easing.InOutQuad
               }
               NumberAnimation {
                   target: root
                   property: "visible"
                   duration: 0
               }
            }
        },
        Transition {
            from: "Invisible"
            to: "Visible"
            SequentialAnimation{
               NumberAnimation {
                   target: root
                   property: "visible"
                   duration: 0
               }
               NumberAnimation {
                   target: root
                   property: "opacity"
                   duration: 500
                   easing.type: Easing.InOutQuad
               }
            }
        }
    ] 
```

当组件消失时，这也会引入转换。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-23T23:29:48.390

我不得不稍微修改 Uga Buga 的答案以使其正常工作，这就是我得到的：

```
Rectangle {
    id: myRect
    property bool stateVisible: true
            ...
    states: [
        State { when: myRect.stateVisible; 
                PropertyChanges {   target: myRect; opacity: 1.0    }},
        State { when: !myRect.stateVisible;
                PropertyChanges {   target: myRect; opacity: 0.0    }}
    ]
    transitions: [ Transition { NumberAnimation { property: "opacity"; duration: 500}} ]
} 
```

请注意 stateVisible 是通过项目 ID 引用的，没有它在我的系统上将无法工作。也许 API 的一些变化导致了这种情况。

我还在`transitions`字段中添加了方括号，因为那里需要一个数组（尽管 QML 语法似乎允许不带括号的拼写）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-07T19:50:00.380

```
Item {

 scale: visible ? 1.0 : 0.1
 Behavior on scale { 
   NumberAnimation  { duration: 500 ; easing.type: Easing.InOutBounce  } 
  }

} 
```

对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-02T13:32:53.113

`visibility` 可用于`NumberAnimation`，但要获得所需的淡入淡出效果，`opacity`可以使用动画；就像从功能打开可见性一样，如下例所示：

```
Rectangle{
    id:fadingRect
    anchors.fill: parent
    visible: false
    opacity: 0.00
    color: "red"
    Component.onCompleted: {
        animRect.start()
    }
}
SequentialAnimation{
    id:animRect
    NumberAnimation { target: fadingRect; property: "visible"; from: 0; to:1; duration: 20}
    NumberAnimation { target: fadingRect; property: "opacity"; from: 0.00; to:1.00; duration: 4000 }

    onStopped: console.log(fadingRect.visible)
} 
```

或者 ：

```
Rectangle{
    id:fadingRect
    anchors.fill: parent
    visible: false
    opacity: 1
    color: "red"
    Component.onCompleted: {
        animRect.start()
    }
        NumberAnimation { id:animRect; target: fadingRect; property: "opacity"; from: 0; to:1; duration: 2000;
        onStarted: { fadingRect.visible=true; console.log(fadingRect.visible)}
        }
} 
```

# c# - 为什么我的按钮不符合我网页的其余部分？

> ID：12333113
> 
> 赞同：2
> 
> 时间：2012-09-08T17:53:06.470
> 
> 标签：c#, asp.net-mvc, razor

这是我认为的代码：

```
 @model SuburbanCustPortal.Models.CustomerModel

 @{
     ViewBag.Title = "Customer Summary"; }

 <h2>Customer Summary Screen</h2> <p>
     Please select an account below or add an existing account. </p>

 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"
 type="text/javascript"></script> <script
 src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
 type="text/javascript"></script>

@using (Html.BeginForm()) {   
   @Html.ValidationSummary(true, "Account
    creation was unsuccessful. Please correct the errors and try again.")

   <div>
     <fieldset>
       <legend>Existing Accounts</legend>

       @Html.Action("ExistingAccounts2")

       <p>
         <input type="submit" value="Add an Account" />
       </p>
     </fieldset>
   </div>
 } 
```

我在上面调用的部分视图中有这段代码：

```
 @model SuburbanCustPortal.Models.CustomerModel

 <table>
 @foreach (var usr in ViewBag.CustomerData)
 {
   <tr>
     <td>
       @using (Html.BeginForm("ShowCustomer","Customer"))
       {
         <input class="button" id="@usr.AccountId" type="submit" value="Submit" />
       }
     </td>
     <td>@usr.Branch@usr.AccountNumber</td>
     <td>@usr.Name</td>
     <td>@usr.DeliveryStreet</td>
   </tr>
 }  
 </table> <br /> 
```

它显示如下：

![在此处输入图像描述](../Images/d7dffd3025e895fd6de7407305ade5dc.png)

为什么我的按钮显示在文本的其余部分上方？我目前在网站上没有 css，所以不应该干扰......

我在看什么？

# wcf - 通过https从客户端上传大量数据到WCF服务

> ID：12333114
> 
> 赞同：0
> 
> 时间：2012-09-08T17:53:09.390
> 
> 标签：wcf, ssl, wcf-security, isaserver

我正在研究通过 WCF Web 服务将大量数据上传到使用 HTTPS 的服务器的解决方案。我的基础设施设计是这样的：

客户端应用程序 <-- HTTPS --> ISA 服务器 <-- HTTP --> WCF Web 服务

Web 服务托管在 IIS6、Windows server 2003 上。我使用 basicHttpBindings。当我开始上传 2MB 的数据时，我收到： 向**[https://myservice.com/WcfService/service.svc/basic](https://myservice.com/WcfService/service.svc/basic)****发出 HTTP 请求时发生错误。这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的**

但是当我尝试上传 100Kb 时，一切正常。为什么？请有任何建议。

完整的异常消息：

System.ServiceModel.CommunicationException 未处理

[Message=向https://myservice.com/WcfService/service.svc/basic](https://myservice.com/WcfService/service.svc/basic)发出 HTTP 请求时发生错误。这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的。

源=mscorlib

堆栈跟踪：

```
Server stack trace: 

   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)

   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)

   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)

   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)

   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)

   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 

   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)

   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)

   at ServiceWcfServiceMetadata.IServiceService.PutEmployeesCompressed(Transfer employees)

   at TestClient.ServiceService.PutEmployeesCompressed(Transfer employees) in C:\_WorkProjects\ServiceWCFIntegrationServices\TestClient\ServiceService.cs:line 61

   at TestClient.Program.Main(String[] args) in C:\_WorkProjects\ServiceWCFIntegrationServices\TestClient\Program.cs:line 60

   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)

   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)

   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()

   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)

   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)

   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)

   at System.Threading.ThreadHelper.ThreadStart() 
```

内部异常：System.Net.WebException

```
 Message=The underlying connection was closed: An unexpected error occurred on a send.

   Source=System

   StackTrace:

        at System.Net.HttpWebRequest.GetResponse()

        at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

   InnerException: System.IO.IOException

        Message=Unable to write data to the transport connection: An existing connection was forcibly closed by the remote host.

        Source=System

        StackTrace:

             at System.Net.Sockets.NetworkStream.MultipleWrite(BufferOffsetSize[] buffers)

             at System.Net.Security._SslStream.StartWriting(SplitWritesState splitWrite, SplitWriteAsyncProtocolRequest asyncRequest)

             at System.Net.Security._SslStream.ProcessWrite(BufferOffsetSize[] buffers, SplitWriteAsyncProtocolRequest asyncRequest)

             at System.Net.TlsStream.MultipleWrite(BufferOffsetSize[] buffers)

             at System.Net.Connection.Write(ScatterGatherBuffers writeBuffer)

             at System.Net.ConnectStream.ResubmitWrite(ConnectStream oldStream, Boolean suppressWrite)

        InnerException: System.Net.Sockets.SocketException

             Message=An existing connection was forcibly closed by the remote host

             Source=System

             ErrorCode=10054

             NativeErrorCode=10054

             StackTrace:

                  at System.Net.Sockets.Socket.MultipleSend(BufferOffsetSize[] buffers, SocketFlags socketFlags)

                  at System.Net.Sockets.NetworkStream.MultipleWrite(BufferOffsetSize[] buffers)

             InnerException: 
```

**客户端上的基本 Http Bindigs 配置：**

```
<system.serviceModel>
<behaviors>
  <endpointBehaviors>
    <behavior name="BasicHttpBinding_IServiceServiceBehavior">
      <clientCredentials>
        <serviceCertificate>
          <authentication certificateValidationMode="None"/>
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IServiceService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="01:00:00" sendTimeout="01:00:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="Transport">
        <transport clientCredentialType="Certificate" proxyCredentialType="None"
          realm="" />
      </security>
    </binding>
    <binding name="Local_IServiceService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="01:00:00" sendTimeout="01:00:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
      </security>
    </binding>
    <binding name="SecureBasic" maxBufferSize="100000000" maxBufferPoolSize="100000000"
      maxReceivedMessageSize="100000000">
      <readerQuotas maxDepth="100000000" maxStringContentLength="100000000"
        maxArrayLength="100000000" maxBytesPerRead="100000000" maxNameTableCharCount="100000000" />
      <security mode="Transport" />
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="https://myservice.com/WcfService/service.svc/basic"
    behaviorConfiguration="BasicHttpBinding_IServiceServiceBehavior"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServiceService"
    contract="ServiceWcfServiceMetadata.IServiceService" name="BasicHttpBinding_IServiceService" />
</client> 
```

**WCF Web 服务配置：**

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="DefaultBasic" maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
                maxReceivedMessageSize="2147483647" transferMode="Buffered">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <standardEndpoints />
    <behaviors />
    <services>
        <service behaviorConfiguration="" name="ServiceWcfServiceApplication.ServiceService">
            <endpoint address="basic" binding="basicHttpBinding" bindingConfiguration="DefaultBasic"
                name="Basic" bindingName="" contract="ServiceWcfServiceMetadata.IServiceService" />
        </service>
    </services>
</system.serviceModel> 
```

# android - 禁用广播接收器中的菜单项

> ID：12333115
> 
> 赞同：0
> 
> 时间：2012-09-08T17:53:12.440
> 
> 标签：android, menu, android-actionbar

我创建了一个广播接收器：

```
package ir.smspeik.sms;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class ReceiveSms extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent)
    {
    //---get the SMS message passed in---
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i=0; i<msgs.length; i++){
        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
        //str += "SMS from " + msgs[i].getOriginatingAddress();
        //str += " :";
        str += msgs[i].getMessageBody().toString();
        //str += "\n";
        }

        //---display the new SMS message---
        //Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        //---launch the MainActivity---
        //String[] sms = str.split("-");
    //  if(sms[1] == "140")
        //{
        Intent mainActivityIntent = new Intent(context, ir.smspeik.sms.GetResponse.class);
        mainActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        context.startActivity(mainActivityIntent);

        //MyMenu mymen = new MyMenu();
    //  mymen.invisibleMenuItem(R.id.menusms);
        //---send a broadcast to update the SMS received in the activity---
        Intent broadcastIntent = new Intent();
        broadcastIntent.setAction("SMS_RECEIVED_ACTION");
        //intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK"
        broadcastIntent.putExtra("sms", str);
        context.sendBroadcast(broadcastIntent);
        //}
    this.abortBroadcast();
    //  this.clearAbortBroadcast();
        }
        }
    } 
```

并在我的活动中有一个菜单。我创建一个类扩展活动并创建菜单。我的所有活动都扩展了该课程。我想在调用广播接收器时隐藏一些菜单按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:00:45.453

只需传递一个值来表示您要禁用某些菜单项：

```
 Intent mainActivityIntent = new Intent(context, ir.smspeik.sms.GetResponse.class);
    mainActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    mainActivityIntent.putExtra("disable menu item", true);
    context.startActivity(mainActivityIntent); 
```

在您的活动中：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    ...
    if(getIntent().getBooleanExtra("disable menu item", false)) {
        // Disable the items here
    }
} 
```

如果您只想单独禁用项目，则可以传递单独的附加功能。

# css - 如何在不同的桌面设备中应用相同的背景图像

> ID：12333122
> 
> 赞同：0
> 
> 时间：2012-09-08T17:53:57.140
> 
> 标签：css, background, position, background-image, background-position

如何在不同的桌面设备中为我的图像应用相同的背景图像位置？

这是有背景图片的页面：http: [//tommywebdesigner.com/Vision%20General.html](http://tommywebdesigner.com/Vision%20General.html)

这是我的代码：

```
#vision {
background-attachment: fixed;
background-image: url("/img/lapedrera.jpeg");
background-position: 85% 62%;
box-shadow: 2px 1px 6px 0 #888888 inset;
height: 350px;
margin-top: 35px;
width: 100%; 
```

}

如果您查看此工具[http://quirktools.com](http://quirktools.com)并粘贴 url，您会看到在不同的桌面设备中，背景图像会改变位置，我怎样才能使我的图像与背景图像具有相同的位置不同的桌面设备？

希望解释清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:59:59.587

我不确定，如果我正确理解你的问题。如果您希望图像无论向下滚动多少都显示相同的区域，则必须删除此属性：

背景附件：固定；

# sql - 在股票交易表中执行规则

> ID：12333127
> 
> 赞同：1
> 
> 时间：2012-09-08T17:54:57.470
> 
> 标签：sql, sql-server, database-design

我正在创建一个假股票市场类型数据库，该`Transaction`表需要某种逻辑来执行某些规则。这是`Transaction`我正在使用的表格：

```
Id  AccountId   Action  Qty Price   Amount
1   1           SELL    30  $1.00   $30.00
2   2           BUY     30  $1.00   -$30.00
3   1           SELL    20  $2.00   $40.00
4   3           BUY     20  $2.00   -$40.00
5   3           DEPOSIT            $100.00 
```

正如您在此处看到的， `BUY/SELL`Actions 必须有一个应该计算的`Qty`and`Price`和 an 。`Amount`DEPOSIT 操作不需要`Qty`，或者`Price`因为那只是用户将钱放入`Account`表中

我正在考虑使用某种触发器来做到这一点。有更好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:34:49.573

在 SQL Server 2012 中测试。（省略了股票符号。）

```
create table stock_transactions (
  trans_id integer primary key,
  trans_ts datetime not null default current_timestamp,
  account_id integer not null, -- references accounts, not shown

  -- char(1) keeps the table narrow, while avoiding a needless
  -- join on an integer. 
  -- (b)uy, (s)ell, (d)eposit
  action char(1) not null check (action in ('b', 's', 'd')),

  qty integer not null check (qty > 0),

  -- If your platform offers a special data type for money, you
  -- should probably use it. 
  price money not null check (price > cast(0.00 as money)),

  -- Assumes it's not practical to calculate amounts on the fly
  -- for many millions of rows. If you store it, use a constraint
  -- to make sure it's right. But you're better off starting
  -- with a view that does the calculation. If that doesn't perform
  -- well, try an indexed view, or (as I did below) add the 
  -- "trans_amount" column and check constraint, and fix up
  -- the view. (Which might mean just including the new "trans_amount"
  -- column, or might mean dropping the view altogether.)
  trans_amount money not null,

  -- Only (b)uys always result in a negative amount.
  check ( 
    trans_amount = (case when action = 'b' then qty * price * (-1)
                         else                   qty * price
                    end )
  ),

  -- (d)eposits always have a quantity of 1\. Simple, makes logical 
  -- sense, avoids NULL and avoids additional tables.
  check ( 
    qty = (case when action = 'd' then 1 end)
  )
);

insert into stock_transactions values
(1, current_timestamp, 1, 's', 30,   1.00,   30.00),
(2, current_timestamp, 2, 'b', 30,   1.00,  -30.00),
(3, current_timestamp, 1, 's', 20,   2.00,   40.00),
(4, current_timestamp, 3, 'b', 20,   2.00,  -40.00),
(5, current_timestamp, 3, 'd',  1, 100.00,  100.00); 
```

但是看看发生了什么。现在我们已经将存款添加为一种交易类型，这不再是一个股票交易表。现在它更像是一张账户交易表。

您需要的不仅仅是 CHECK 约束，以确保帐户中有足够的资金来购买帐户持有人想要购买的任何东西。

在 SQL Server 中，关于聚集索引的决策很重要。对此进行一些思考和测试。我希望您经常查询帐号。

# mysql - MYSQL 多表

> ID：12333132
> 
> 赞同：0
> 
> 时间：2012-09-08T17:55:31.413
> 
> 标签：mysql, multiple-tables

我想使用多个表来获取最近的帖子（Q）和用户名（句柄），但是当我尝试使用此代码时，它给出了错误

表名**qa_posts**和**qa_users**需要连接来自**qa_posts的****userid**来**处理**来自**qa_users**

 ******```
SELECT *
FROM qa_posts, qa_users
WHERE type="Q" AND qa_posts.userid = "qa_users.handle"
ORDER BY created DESC
LIMIT 5 
```

**错误信息**

```
SELECT *
FROM qa_posts, qa_users
WHERE qa_posts.userid = "qa_users.handle"
ORDER BY created DESC
LIMIT 5

Error 1052: Column 'created' in order clause is ambiguous 
```

**实际代码**

```
qa_db_connection();
$query_post = qa_db_query_raw('         
    SELECT *
    FROM qa_posts, qa_users
    WHERE type="Q" AND qa_posts.userid = "qa_users.handle"
    ORDER BY created DESC
    LIMIT 5

') or die(mysql_error());

while($row = mysql_fetch_array($query_post)) {
    echo $row['title'];
    echo '<span style="font-size:65%;font-style:italic">'.$row['created'].'</span>';
    echo '<br/>';
} 
```

有关表结构，请参阅此图像 ![表结构](../Images/747f5a84805cd77f73b95b283c2450e2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:57:27.373

该错误告诉您有多个具有名称的列，`created`因此您需要指定该`created`字段来自哪个表以执行`ORDER BY`：

```
SELECT *
FROM qa_posts, qa_users
WHERE qa_posts.userid = "qa_users.handle"
ORDER BY qa_posts.created DESC
LIMIT 5 
```

或者：

```
SELECT *
FROM qa_posts, qa_users
WHERE qa_posts.userid = "qa_users.handle"
ORDER BY qa_users.created DESC
LIMIT 5 
```

编辑#1，没有看到完整的表结构，看起来你可能想要这样做，你有`qa_users.handle`引号，这些可能应该被删除：

```
SELECT *
FROM qa_posts
INNER JOIN qa_users
   ON qa_posts.userid = qa_users.handle
ORDER BY qa_posts.created DESC
LIMIT 5 
```

编辑#2 你加入了错误的领域：

```
SELECT *
FROM qa_posts
INNER JOIN qa_users
   ON qa_posts.userid = qa_users.userid
WHERE qa_posts.type="Q" 
ORDER BY qa_posts.created DESC
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:59:50.677

当您在两个表中都有相同的名称列时，会出现给定的错误......因此您必须指定列名以及表名，如下面的模式：

```
table_name.column_name 
```

所以，你的查询应该是这样的：

```
SELECT *
FROM qa_posts, qa_users
WHERE qa_posts.userid = "qa_users.handle"
ORDER BY qa_posts.created DESC (or put the ORDER BY qa_users.created DESC if you want to make order by `created` of `qa_users` )
LIMIT 5 
```

如果您真的不希望拥有值为“qa_users.handle”的用户 ID，则不应引用它们并且应该进行如下查询：

```
 SELECT *
    FROM qa_posts, qa_users
    WHERE qa_posts.userid = qa_users.userid AND qa_posts.type="Q" 
    ORDER BY qa_posts.created DESC 
    LIMIT 5 
```

您最好通过以下方式使用 JOIN：

```
 SELECT *
    FROM qa_posts INNER JOIN qa_users ON qa_posts.userid = qa_users.userid 
    WHERE qa_posts.type="Q" 
    ORDER BY qa_posts.created DESC 
    LIMIT 5 
```******

# django - 姜戈。如何获取 db 的主机名

> ID：12333134
> 
> 赞同：1
> 
> 时间：2012-09-08T17:55:40.257
> 
> 标签：django, django-views, host

我正在尝试连接到数据库：在 localhost 我可以执行以下操作：

```
db = MySQLdb.connect(host='127.0.0.1', user="root", passwd="", db="schooldb") 
```

但不幸的是，在服务器中我想`'127.0.0.1'`成为一个变量

```
 h = request.get_host()
   return HttpResponse(h) 
```

给了我`127.0.0.1:8000` 所以我的问题是如何截断端口并仅离开`127.0.0.1`。或者你可以提出更好的建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:07:57.733

`[request.get_host()][1]`为您提供请求的服务器信息，而不是数据库服务器信息。

要获取数据库信息（假设您只有一个名为*default*的数据库），您可以执行以下操作：

```
>>> from django.conf import settings
>>> settings.DATABASES['default']['HOST']
>>> 'MyDBServer'
>>> settings.DATABASES['default']['PORT']    
>>> '9999' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:09:23.373

您想为本地和服务器目的使用不同的环境吗？

如果是，并且您正在使用 django，我认为最简单的方法是使用[django 设置](https://docs.djangoproject.com/en/dev/topics/settings/)系统并在那里设置数据库主机名。

在服务器上，您可以拥有其他具有不同设置的文件并使用该模块启动服务器。例如使用带有 --settings 标志的 manage.py 工具。

```
./manage.py runserver --settings=project.settings_production 
```

编辑：请记住，开发服务器不适用于生产环境。

顺便说一句，`request.get_host()` [返回一个远程主机名](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_host)。

# css - 用于 android 的单独 CSS 样式

> ID：12333135
> 
> 赞同：0
> 
> 时间：2012-09-08T17:55:41.643
> 
> 标签：css, mobile, styles

我正在创建我的网站的移动版本。

我已将这些代码与相关的 css 一起用于屏幕尺寸：

`<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="phone.css" /> <link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="pad.css" />`

现在这些 css 代码适用于 iphone、ipod touch 甚至 ipad。由于设备的屏幕宽度，在我的 android (samsung Galaxy y) 上测试此页面横向会阻止大部分设计。有没有办法添加另一个链接类型代码但针对 android 用户？甚至任何其他的iOS？

所以我可以将它们的代码更改为自动以适应它运行的所有设备？（注意我知道可以在任何人声明之前使用上面列出的 2 个 css 选择 auto。但它看起来不正确，因此我想要第三个 css 页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:01:26.247

我不知道我是否正确理解了你的问题，但如果我理解了，应该这样做：

```
var userAgent = navigator.userAgent.toLowerCase(); //get the user agent
var android = (userAgent.indexOf("android") != -1);
if(android) { //if client is running Android
    document.head.innerHTML += "<link.../>"; //add an Android-specific stylesheet
}
else {
    document.head.innerHTML += "<link.../>"; //use the regular stylesheet otherwise
} 
```

**注意：**您必须首先删除您`<link>`的 s，然后让 JavaScript 添加它们。

# javascript - onpopstate 两次返回数据

> ID：12333136
> 
> 赞同：0
> 
> 时间：2012-09-08T17:55:45.020
> 
> 标签：javascript, ajax, html, url

我已经开始玩 onpopstate 但遇到了问题。每当我单击浏览器上的后退按钮时，url 确实会相应更改，但页面代码会加载两次，因此我会收到两个列表和两个 div。为什么它会产生双倍的代码，我该如何解决？示例代码如下。

```
<style type="text/css">

div {width: 200px; height: 200px; border: 1px solid;}

</style>

<ul>

   <li class="sour">

   <input type="button" value="1"/>

   </li>

</ul>

<script type="text/javascript" >

$('ul li:nth-child(1)').click(function() {
var url = $(this).index();  
$('#insert').load('1.php');
window.history.pushState('', '', 'test1.php?challenge=' + url);
e.preventDefault();
});

window.onpopstate = function(event) {
  $('#insert').load(location.pathname); 
};

</script>

<div id="insert">

<p>hello there</p>

</div> 
```

这是1.php的内容

```
<p>first file</p> 
```

这是我拍摄的一些屏幕截图的链接，这些屏幕截图显示了视觉上发生的事情。第一张图片是我第一次加载屏幕的时候。第二张图片是我按下按钮 1 时发生的情况。第三张图片是我点击浏览器返回时发生的情况。

[http://imgur.com/Nsqej,E1Ydc,sFCLl#0](http://imgur.com/Nsqej,E1Ydc,sFCLl#0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:32:57.740

根据您描述的问题顺序，`onpopstate`将内容加载`test1.php`到`#insert`div中。由于登陆页面也是`test1.php`如此，这将导致在您的屏幕截图中看到重复。

您可以使用[jquery-pjax](https://github.com/defunkt/jquery-pjax)来解决其他人的问题。如果您不依赖于 jquery，那么还有其他解决方案可能比您自己的解决方案更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:07:56.867

您可能在某个地方两次包含了 jQuery 库。

# android - javascript中html onclick的等价物是什么

> ID：12333137
> 
> 赞同：0
> 
> 时间：2012-09-08T17:56:00.480
> 
> 标签：android, plugins, cordova, include, call

嗨，我创建了一个 phonegap 插件来打印到蓝牙打印机。

我创建了一个 hello world 演示应用程序，以便调用插件并使用以下代码将一些文本打印到打印机

```
<a href="#" class="btn enc" onclick="msgbox.show1('test');">print</a> 
```

一切正常。

然后我尝试在我的普通应用程序中包含相同的插件，但在这种情况下，我必须从我的主 .js 调用插件。所以我这样称呼它

```
if ((i+1) == len){
     msgbox.show1('test');
     alert(print_entryseason);
} 
```

但它不会发生任何事情......

我哪里错了？

# java - 使用 GAE (Resteasy) 上传多部分表单

> ID：12333140
> 
> 赞同：2
> 
> 时间：2012-09-08T17:56:12.333
> 
> 标签：java, rest, resteasy

就像[这里](https://stackoverflow.com/questions/6301973/multipart-file-upload-on-google-appengine-using-jersey-1-7)的代码一样，有任何方法可以设置 JBoss RestEasy 在进行 multipart/form-data 上传时不创建临时文件：

```
@POST
@Path("/upload")
@Consumes("multipart/form-data")
public Response create(@MultipartForm FileUploadForm form) 
{
    return Response.status(200).entity(form.toString()).build();
} 
```

这段代码的主要问题是它运行在不允许创建临时文件的 Google App Engine (GAE) 之上，有没有办法解决这个问题？可以将相同的 Apache Jersey 代码设置为禁用创建临时文件（如上面的链接中提供的）

这个问题甚至可以解决吗？

# jquery - Fancybox：如何在图像之间溶解？

> ID：12333141
> 
> 赞同：1
> 
> 时间：2012-09-08T17:56:15.763
> 
> 标签：jquery, fancybox, fade

当我使用 fancybox 在画廊中的图像之间切换时，一个图像淡出，然后下一个淡入。在这两个转换之间没有显示任何内容。因此，它似乎“闪光”。即：显示一个图像>单击下一个>图像淡出>空白页（非常简短）>下一个图像淡入。

我想要实现的是“溶解”效果。我想将一个图像淡化到另一个图像之上。以便始终显示一个图像。即：显示一个图像 > 单击下一个 > 下一个图像淡入上一个图像之上。

我该怎么做呢？

# memory-management - cudaMemset 是如何实现的？

> ID：12333144
> 
> 赞同：3
> 
> 时间：2012-09-08T17:56:36.623
> 
> 标签：memory-management, cuda

CUDA如何执行`cudaMemset()`功能？如果通过启动线程数 = 元素数来实现内存初始化，我观察到可以节省大量时间。为什么会实现这样的节省？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:04:45.980

cudaMemset 调用 cuMemsetD8 或 cuMemsetD8Aysnc。这在工具中很容易确定。驱动程序实现将尝试根据目标地址的对齐、要写入的值的大小和要写入的字节数来优化执行。这很容易通过编写一些基准来确定。CUDA 实现必须处理所有情况（8 位对齐，尾部，...）。如果您有非常特殊的情况（32 位对齐，可被 4 整除），那么您应该能够编写一个在 CPU 开销方面超过驱动程序实现性能的内核。GPU 执行时间可能相似。

在有效写入内存方面，您需要考虑几个设备限制。

*   每个 SM 每个周期可以发出 1 条 LSU 指令。在费米上你需要 2 条经线，而开普勒则需要 4 条经线来实现这一点。
*   每个 SM 每个周期可以对 L2 执行一次写操作。

每个元素 1 个线程（无论是 8 位还是 128 位）的简单映射很容易实现，并且如果大小不是 WARP_SIZE 的倍数，则相当容易处理条件检查。

# php - 比较数据sql

> ID：12333147
> 
> 赞同：-4
> 
> 时间：2012-09-08T17:57:02.580
> 
> 标签：php, mysql

我有这样的代码php

```
$result = mysql_query("SELECT phone FROM user where phone LIKE 'hjkhkjh');

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Account wasnt created.";

    // echoing JSON response
    echo json_encode($response);
}
else  {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Account was created."; 
```

我想比较数据库中的电话号码，但是当我运行此代码时，此代码显示“未创建帐户”，而我的表中有数据电话号码“hjkhkjh”，我的代码的任何解决方案，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:04:15.257

因为当 if 构造解析为 true 时，您正在编写“未创建帐户”。像这样试试

```
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Account was created.";

    // echoing JSON response
    echo json_encode($response);
}
else  {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Account wasnt created."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:08:43.767

[www.php.net/manual/en/function.mysql-query.php](http://www.php.net/manual/en/function.mysql-query.php)说：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

因为您的查询不会产生错误，所以返回是通过的资源`if ($result) {` （无论数据库表中是否实际存在具有 phone LIKE 'hjkhkjh' 的条目）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T02:36:19.690

我找到了解决方案，我像这样更改我的代码 $result =mysql_query("SELECT phone from user where phone ='hjkhkjh'");

```
// check if row inserted or not
if($row = mysql_fetch_array($result)){
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Account was created.";

    // echoing JSON response
    echo json_encode($response);
}
else  {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Account wasnt created.";

    // echoing JSON response
    echo json_encode($response);
} 
```

谢谢大家 :D

# jquery - AJAX 在 Wordpress 插件中的 IE 中不起作用

> ID：12333148
> 
> 赞同：1
> 
> 时间：2012-09-08T17:57:07.250
> 
> 标签：jquery, ajax, wordpress, internet-explorer

我正在构建一个 Wordpress 插件，并且正在尝试使用 AJAX。我无法让 AJAX 在 IE 中工作。

以下尝试均在 FF/Chrome 中有效，但在 IE 中失败。

PHP：

```
add_action('wp_ajax_nonpriv_trying_ajax', 'trying_ajax');
add_action('wp_ajax_trying_ajax', 'trying_ajax');
function trying_ajax(){

    $response = json_encode( array( 'success' => true ) );

    header( "Content-Type: application/json" );

    echo $response;

    exit;
} 
```

Javascript：

```
var ajaxData = {
    action: 'trying_ajax',
    state:  filterStates
    };

JQuery.post(myconvio_convio_functions.ajaxurl, ajaxData,
    function(data) {
        alert(data);
    },
    'json'
); 
```

FF/Chrome 返回一个 JSON 对象；但是 IE 返回一个 0。

[http://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins) 说……

> 错误返回值
> 
> 如果请求 url 为 wp-admin/admin-ajax.php 时 AJAX 请求失败，它将根据失败的原因返回 -1 或 0。此外，如果 AJAX 请求成功，它将返回 0。

我已经尝试通过以下方式解决缓存问题：

```
var d = new Date();
var n = d.getTime();
JQuery.post(myconvio_convio_functions.ajaxurl+"?x="+n, ajaxData, 
```

我尝试了一个相对 url 来解决跨域问题：

```
JQuery.post('/FWW/wp-admin/admin-ajax.php', ajaxData, 
```

所有相同的结果：FF/Chrome 返回一个 JSON 对象；但是 IE 返回一个 0。

谢谢你的帮助。

.... 更改为 $.ajax 并添加了成功、错误和完成 - 结果在评论中。结果仍然相同，IE 成功返回，但响应为 0

```
$.ajax({
url: '/FWW/wp-admin/admin-ajax.php',
type: 'POST',
data: ajaxData,
dataType: 'json',
success: function(response, status, xhr) {
    console.log(response);                                      
        // Firebug log: Object { success=true }

    alert('success - response: ' + response);                   
        // FF Alert: success - response: [object Object]
        // IE Alert: success - response: 0

    alert('success - status: ' + status);                       
        // IE&FF Alert: success - status: success

    alert('success - xhr.readyState: ' + xhr.readyState);
        // IE&FF Alert: success - xhr.readyState: 4

    alert('success - xhr.responseText: ' + xhr.responseText);
        // FF Alert: success - xhr.responseText: {"success":true}
        // IE Alert: success - xhr.responseText: 0

    alert('success - xhr.status: ' + xhr.status);
        // IE&FF Alert: success - xhr.status: 200

    alert('success - xhr.statusText: ' + xhr.statusText);
        // IE&FF Alert: success - xhr.statusText: OK
},
// error handler function never gets called on IE or FF
error: function(jqXHR, textStatus, errorThrown) {
    alert('error jqXHR: ' + jqXHR);
    alert('error textStatus: ' + textStatus);
    alert('error errorThrown: ' + errorThrown);
},
complete: function(jqXHR, textStatus){
    alert('complete - jqXHR.readyState: ' + jqXHR.readyState);
        // IE&FF Alert: complete - jqXHR.readyState: 4
    alert('complete - jqXHR.responseText: ' + jqXHR.responseText);
        // FF Alert: complete - jqXHR.responseText: {"success":true}
        // IE Alert: complete - jqXHR.responseText: 0

    alert('complete - jqXHR.status: ' + jqXHR.status);
        // IE&FF Alert: complete - jqXHR.status: 200

    alert('complete - jqXHR.statusText: ' + jqXHR.statusText);
        // IE&FF Alert: complete - jqXHR.statusText: OK

    alert('complete - textStatus: ' + textStatus);
        // IE&FF Alert: complete - textStatus: success

    }
}); 
```

# c# - Linq To SQL - 如何禁用关联加载？

> ID：12333149
> 
> 赞同：2
> 
> 时间：2012-09-08T17:57:09.973
> 
> 标签：c#, linq-to-sql, associations

我有一个具有一对多关联的实体（它引用了其他关联项目的集合）。

有时我需要从数据库中加载一组这些实体并将它们放在一个列表中，该列表可以将它们保存在内存中一段时间​​。结果，我得到了具有所有关联的实体列表。但问题是我需要这些没有关联的实体。

在某些情况下，我可以以某种方式手动禁用加载关联吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:11:30.307

我不知道禁用它的开关或参数，但您可以通过手动定义结果数据来限制它。因此，如果您有一个表 person 有一个外键 FamilyId 指向家庭（带有 ID、Name、Comment 列）表，因为家庭可以有一个或多个人，但一个人只能在一个家庭中。如果您想拥有所有家庭，而不是指定人员，您可以致电：

```
var result = datacontext.Families.Select( s => new { ID = s.ID, Name = s.Name, Comment = s.Comment}); 
```

结果是一个对象列表，这些对象仅具有选择表达式中的属性。

# eclipse - Titanium Studio 错误：当我使用 Android 模拟器运行默认移动项目时

> ID：12333154
> 
> 赞同：0
> 
> 时间：2012-09-08T17:57:55.877
> 
> 标签：eclipse, android-emulator, compiler-errors, titanium, titanium-mobile

我正在使用 Windows 7、64 位家庭基础版，我设法安装了 Titanium Studio，构建：2.1.2.201208301612，不知何故。我只是按照 appcelerator 提供的快速入门指南安装了所有东西。

请检查这些图像：[我安装的程序](http://thedezinetree.com/titanium_bugs/)

但是当我尝试在 android 模拟器上运行默认程序（app.js）时，我遇到了一堆错误。

```
[INFO] logfile = C:\Users\SA\My Documents\Titanium_Studio_Workspace\helloworld\build.log<br>
[INFO] Launching Android emulator...one moment
[INFO][Vold    (   29)] Vold 2.1 (the revenge) firing up<br>
[INFO][Netd    (   30)] Netd 1.0 starting<br>
[WARN][Vold    (   29)] No UMS switch available<br>
[INFO][qemu-props(   52)] connected to 'boot-properties' qemud service.<br>
[INFO][qemu-props(   52)] received: dalvik.vm.heapsize=24m<br>
[INFO][qemu-props(   52)] received: qemu.sf.lcd_density=240<br>
[INFO][qemu-props(   52)] received: qemu.hw.mainkeys=1<br>
[INFO][qemu-props(   52)] received: qemu.sf.fake_camera=back<br>
[INFO][qemu-props(   52)] received: <br>
[INFO][qemu-props(   52)] invalid format, ignored.<br>
[INFO][        (   34)] ServiceManager: 0xacd0<br>
[INFO][CameraService(   34)] CameraService started: pid=34<br>
[INFO][AudioFlinger(   34)] AudioFlinger's thread 0xb3f0 ready to run<br>
[INFO][SamplingProfilerIntegration(   33)] Profiler is disabled.<br>
[INFO][Zygote  (   33)] Preloading classes...<br>
[ERROR][Zygote  (   33)] setreuid() failed. errno: 2<br>
[WARN][MediaProfiles(   33)] could not find media config xml file<br>
[INFO][Zygote  (   33)] ...preloaded 1265 classes in 10083ms.<br>
[ERROR][Zygote  (   33)] setreuid() failed. errno: 17<br>
[INFO][Zygote  (   33)] Preloading resources.....a huge list of errors 
```

（请在此处查看[最后的屏幕截图](http://thedezinetree.com/titanium_bugs/)）

我是移动开发的新手。我试图找到所有来源，但无法找出问题所在。谁能帮帮我吗！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:51:14.127

您已经安装了 64 位的 jdk 7。我认为钛仅支持 32 位 jdk 6。[在设置钛工作室](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Setting_up_Titanium_Studio-section-30086257_SettingupTitaniumStudio-OracleJDK)查看更多详细信息

他们提到“**无论 Titanium 是在 32 位还是 64 位 Windows 系统上运行，都需要 32 位版本的 Java JDK** ”

# android - 根据数据库中的地址显示地图位置

> ID：12333155
> 
> 赞同：1
> 
> 时间：2012-09-08T17:58:02.050
> 
> 标签：android, database, google-maps

我有一个工作应用程序和带有地址的数据库（在项目搜索应用程序中），我需要在谷歌地图上显示。当用户单击搜索时，他从数据库中获取项目详细信息和供应商的详细信息，包括地址和第二个活动中显示的所有内容。所有这些都有效，但所有产品的地图上只显示一个位置。**问题是如何根据其位置在地图特定的数据库地址上显示（在我已经拥有的第三个活动上，使用工作地图显示）？**

**DetaljiProizvoda.java**（项目的详细信息）

```
public class DetaljiProizvoda extends Activity {

protected TextView naziv;
protected TextView kategorija;
protected TextView tvrtka;
protected TextView telefonTvrtke;
protected TextView adresaTvrtke;
protected int proizvodId;
protected Cursor cursor; //dodatak na finalni activity prikaza lokacije proizvoda
protected ListAdapter adapter; //dodatak na finalni activity prikaza lokacije proizvoda

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detalji_proizvoda);
    //hvatanje parametra (ID iz tablice) Intenta iz ListaProizvoda activity-a
    proizvodId = getIntent().getIntExtra("PROIZVODI_ID", 0);
    SQLiteDatabase db = (new DatabaseHelper(this)).getWritableDatabase();
    Cursor cursor = db.rawQuery("SELECT proizv._id, proizv.naziv, proizv.tvrtka, proizv.cijena, proizv.kategorija, proizv.telefonTvrtke, proizv.adresaTvrtke FROM proizvodi proizv LEFT OUTER JOIN proizvodi mgr ON proizv._id = mgr._id WHERE proizv._id = ?", 
            new String[]{""+proizvodId});

    if (cursor.getCount() == 1)
    {
        cursor.moveToFirst();

        naziv = (TextView) findViewById(R.id.naziv);
        naziv.setText(cursor.getString(cursor.getColumnIndex("naziv"))); /*+ " " + cursor.getString(cursor.getColumnIndex("lastName")));*/

        kategorija = (TextView) findViewById(R.id.kategorija);
        kategorija.setText(cursor.getString(cursor.getColumnIndex("kategorija")));

        tvrtka = (TextView) findViewById(R.id.tvrtka);
        tvrtka.setText(cursor.getString(cursor.getColumnIndex("tvrtka")));

        telefonTvrtke = (TextView) findViewById(R.id.telefonTvrtke);
        telefonTvrtke.setText(cursor.getString(cursor.getColumnIndex("telefonTvrtke")));

        adresaTvrtke = (TextView) findViewById(R.id.adresaTvrtke);
        adresaTvrtke.setText(cursor.getString(cursor.getColumnIndex("adresaTvrtke")));

    }
    //zatvaranje baze
    cursor.close();
    db.close(); 

}

  //default button handler
    public void changeActivity(View view) { 
        startActivity(new Intent(this, GMapsActivity.class));
    }                    

} 
```

**GMapsActivity.java**

```
public class GMapsActivity extends MapActivity {

    private MapView mapView;
    private static final int latitudeE6 = 37985339;
    private static final int longitudeE6 = 23716735;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.gmaps_layout);

        mapView = (MapView) findViewById(R.id.map_view);       
        mapView.setBuiltInZoomControls(true);

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
        CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);

        GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
        OverlayItem overlayitem = new OverlayItem(point, "Hello", "I'm in Athens, Greece!");

        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        MapController mapController = mapView.getController();

        mapController.animateTo(point);
        mapController.setZoom(6);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

**gmaps_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map_view"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:clickable="true" 
        android:enabled="true" 
        android:apiKey="0vwcQJvEOXRQcyAhZxPToaeuss2Lhodp_qGYkTA" />

</RelativeLayout> 
```

**DetaljiProizvoda.java**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="12dp"
    android:paddingLeft="12dp">

    <TextView
        android:id="@+id/naziv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView
        android:id="@+id/kategorija"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView
        android:id="@+id/tvrtka"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView
        android:id="@+id/telefonTvrtke"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView
        android:id="@+id/adresaTvrtke"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <Button 
        android:id="@+id/btnButton"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_gravity="left"
        android:onClick="changeActivity"
        android:text="@string/prikazi_lokaciju"
        android:textSize="12dp" />

</LinearLayout> 
```

还有**CustomItemizedOverlay.java**文件

# python - 在 LINUX 中使用 python 在线程中设置环境变量

> ID：12333158
> 
> 赞同：2
> 
> 时间：2012-09-08T17:58:20.383
> 
> 标签：python, linux, environment-variables

我的代码中有五个线程...

五个线程由 main.py 启动

所以对于每个正在运行的线程，我需要将 diff IP 设置为环境值

```
thread-1: has to set 192.168.10.2
thread-2: has to set 192.168.10.3
thread-3: has to set 192.168.10.4
thread-4: has to set 192.168.10.5
thread-5: has to set 192.168.10.6 
```

请指导我解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T18:01:08.463

环境变量是按进程设置的，而不是按线程设置的。

# java - JApplet 显示

> ID：12333167
> 
> 赞同：1
> 
> 时间：2012-09-08T17:59:30.847
> 
> 标签：java, multithreading, swing, timer, japplet

我不确定我的程序有什么问题。我认为这可能是线程的问题，即使我没有创建线程。我所拥有的是三个不同的类来实现扫雷游戏。一个是用于 81 (9 x 9) 个按钮的扩展 JButton 类 MineButton。第二个是包含 MineButtons 的扩展容器类 MineField。然后我有包含 MineField 对象的扫雷类。我有很多工作。现在我要做的是让 Minewseeper 类从 MineButton 类访问静态信息。在这里，我不知道该怎么做。在（我相信）字段和按钮被初始化并准备好显示之后。我将扫雷对象发送到一个无限循环中，以不断更新来自 MineButton 类的信息。当我这样做时，Applet 会弹出但不显示其内容。并且 showStatus 显示为零。这应该是什么。谢谢你的帮助。

这是扫雷类

```
 public class Minesweeper extends JApplet
    {
        MineField field;
        public void init()
        {
            field = new MineField(9,9);
            getContentPane().add(field);
            setSize(field.getSize());
        }

        public void start()
        {  
            // trying to fix my problem.  Wondering if not ready for display
            field.setNumbers();
            while(!field.initialized());

            while(true)
            {
                showStatus(MineButton.flagCount + "");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:36:37.493

您至少可以在刷新状态之间添加一些延迟。现在你正在占用整个 CPU 的方式，除了忙于等待是一种非常糟糕的做法之外，swing 线程无法跳入并绘制你的东西。

```
while(true) {
    showStatus(MineButton.flagCount + "");

     try {
        Thread.sleep(1000);
    } catch (InterruptedException ex) {
        Logger.getLogger(Str.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

更好的解决方案是设置一个计时器，而不是`while`循环：

```
int delay = 1000; //milliseconds
ActionListener taskPerformer = new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        showStatus(MineButton.flagCount + "");   // need to make sure that you can call showStatus
    }
};

new javax.swing.Timer(delay, taskPerformer).start(); 
```

# javascript - 如何使用另一个字符串作为模板从字符串中提取数据？

> ID：12333168
> 
> 赞同：1
> 
> 时间：2012-09-08T17:59:44.813
> 
> 标签：javascript, regex

我正在寻找一种有效的方法来使用另一个字符串作为模板从字符串中提取数据。伪代码：

```
var mystring = "NET,1:1,0,ipv4,192.168.1.7,255.255.255.0,192.168.1.1";
var mytemplate = "NET,[address],[lock_state],[ip_type],[ip],[netmask],[gateway]";
var result = mysteryMethod(mystring,mytemplate);
result:
    {
      address: '1:1',
      lock_state: '0',
      ip_type: 'ipv4',
      ip: '192.168.1.7',
      netmask: '255.255.255.0',
      gateway: '192.168.1.1'
    } 
```

在这种情况下有一个逗号分隔符，但并非所有字符串都会被分隔或具有不同的分隔符。要解析的字符串都不包含括号。这对正则表达式是否可行和/或明智？在这种情况下，速度至关重要。一如既往，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:44:46.347

一种解决方案是[http://jsfiddle.net/CrossEye/Kxe6W/](http://jsfiddle.net/CrossEye/Kxe6W/)

```
var templatizedStringParser = function(myTemplate, myString) {

    var names = [];
    var parts = myTemplate.replace( /\[([^\]]+)]/g, function(str, name) {
        names.push(name);
        return "~";
    }).split("~");

    var parser = function(myString) {
        var result = {};
        remainder = myString;
        var i, len, index;
        for (i = 0, len = names.length; i < len; i++) {
            remainder = remainder.substring(parts[i].length);
            index = remainder.indexOf(parts[i + 1]);
            result[names[i]] = remainder.substring(0, index);
            remainder = remainder.substring(index);
        }
        result[names[names.length - 1]] = remainder;
        return result;
    };

    return myString ? parser(myString) : parser;
}; 
```

你可以像这样使用它

```
console.log(templatizedStringParser(myTemplate, myString)); 
```

或这个：

```
var parser = templatizedStringParser(myTemplate);
console.log(parser(myString)); 
```

几乎可以肯定那里有一些杂物，因为我很匆忙地这样做了。使用“~”可能不适合您。如果您有边界问题，可能还有其他问题，但它可能涵盖许多情况。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:48:40.537

```
//This method obtains each lable in the template string
function getLables(patt, templateStr) {
    var i = 0;
    var tmp = patt.exec(templateStr);
    var lables = new Array();
    while(tmp) {
        lables[i] = new String(tmp).replace("[", "").replace("]", "");
        tmp = patt.exec(templateStr);
        ++i;
    }
    return lables;
}

function extract(_inputStr, _template) {
    //Supposing the start string in template is NET
    var startStr = "NET";
    var inputStr = _inputStr.replace(startStr, "");
    var template = "";

    //You can add a control on the correctness of the template
    if(_template.indexOf(startStr) != 0) {
        return false;
        //you could use a throw clausole, in order to use exceptions
    } else {
        template = _template.replace(startStr, "");
    }

    var patt = /\[[a-z | _]+\]/ig; //Pattern to recognize each [lable]
    var delim = template.replace(patt, "[]").split("[]"); //Delimiter list
    var lable = getLables(patt, template); //Lables list
    var result = new Object();

    var endIndex;
    for(var i=0; i<lable.length; ++i) {
        inputStr = inputStr.replace(delim[i], "");
        endIndex = inputStr.indexOf(delim[i+1]);

        if( (i+1) == lable.length ) {
            result[lable[i]] = inputStr.substring(0, inputStr.length);
        } else {
            result[lable[i]] = inputStr.substring(0, endIndex)
            inputStr = inputStr.replace(result[lable[i]], "");
        }

    }

    return result;
} 
```

在这个例子中：

```
var template = "NET???[one]/[two]";
var inputStr = "NET???test/8";

JSON.stringify(extract(inputStr, template)); 
```

结果是：

```
{
    "one":"test",
    "two":"8"
} 
```

# php - 高级自定义字段缩略图 - wordpress

> ID：12333169
> 
> 赞同：3
> 
> 时间：2012-09-08T17:59:45.470
> 
> 标签：php, wordpress, field

我正在 wordpress 中的网站上工作，我正在尝试从帖子的高级自定义字段中获取缩略图：

```
<?php while ( have_posts() ) : the_post(); ?>
    <h1><?php the_field('custom_title'); ?></h1>
    <img src="<?php the_field('thumbnail'); ?>" alt="" />
    <p><?php the_content(); ?></p>
<?php endwhile; // end of the loop. ?> 
```

问题在于，当我加载网站时，图像获取的 url 如下所示：

```
<img src="5, , item_alt2, , , http://portfolio.local/wp-content/uploads/2012/09/item_alt2.jpg, Array"> 
```

因此，据我所知，它正在工作的插件会查找图像，但它会加载一个奇怪的路径，因此它显示为“损坏”的图像。

我做错了什么？

```
 5, , item_alt2, , , http://portfolio.local/wp-content/uploads/2012/09/item_alt2.jpg, ArrayNULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T18:49:36.690

查看有关高级自定义字段的文档；

[http://www.advancedcustomfields.com/docs/field-types/image/](http://www.advancedcustomfields.com/docs/field-types/image/)

根据底部的示例，您将自定义字段的值作为对象返回；

```
Array
(
[id] => 540
[alt] => A Movie
[title] => Movie Poster: UP
[caption] => sweet image
[description] => a man and a baloon
[url] => http://localhost:8888/acf/wp-content/uploads/2012/05/up.jpg
[sizes] => Array
    (
        [thumbnail] => http://localhost:8888/acf/wp-content/uploads/2012/05/up-150x150.jpg
        [medium] => http://localhost:8888/acf/wp-content/uploads/2012/05/up-300x119.jpg
        [large] => http://localhost:8888/acf/wp-content/uploads/2012/05/up.jpg
        [post-thumbnail] => http://localhost:8888/acf/wp-content/uploads/2012/05/up.jpg
        [large-feature] => http://localhost:8888/acf/wp-content/uploads/2012/05/up.jpg
        [small-feature] => http://localhost:8888/acf/wp-content/uploads/2012/05/up-500x199.jpg
    )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T14:48:03.343

或者您可以将自定义字段设置为 IMAGE ID 并像这样使用它

```
$image = wp_get_attachment_image_src(get_field('thumbnail'), 'sizename');
    <h1><?php the_field('custom_title'); ?></h1>
    <img src="' .$image[0]. '" alt="">
    <p><?php the_content(); ?></p>
<?php endwhile; // end of the loop. ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:10:11.583

您是否将自定义字段设置为返回 url。看起来它被设置为对象。您有 3 个选项来返回图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:42:58.303

我有同样的问题。您需要做的就是确保您没有将图像作为对象返回。您在创建/编辑自定义字段时执行此操作。只需确保将返回值设置为图像 url：

[https://www.evernote.com/shard/s3/sh/91d181ed-e9d6-4504-8ab5-cee7ae85d84f/dfc9944d16337e41fb6e7e30ed26bdb5](https://www.evernote.com/shard/s3/sh/91d181ed-e9d6-4504-8ab5-cee7ae85d84f/dfc9944d16337e41fb6e7e30ed26bdb5)

然后，您应该能够使用它在模板中显示图像：

# windows-phone-7 - 实际设置时动画全景控制

> ID：12333170
> 
> 赞同：0
> 
> 时间：2012-09-08T17:59:45.873
> 
> 标签：windows-phone-7, animation, panorama-control

我在用着

```
panoramaControl.DefaultItem = panoramaControl.Items[index]; 
```

将全景控件从一个导航到另一个，但在这种情况下看不到滑动效果。可以做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:25:35.067

您所看到的是平台的限制。

您还应该注意设置默认项目如何更改全景视差背景（和/或标题）。

# python - 将 Python 日期时间拆分为按小时对齐的块

> ID：12333174
> 
> 赞同：5
> 
> 时间：2012-09-08T17:59:55.403
> 
> 标签：python, datetime, split

我有一个`datetime.datetime`实例`d`和一个`datetime.timedelta`实例`td`，并且正在尝试编写一个函数，它将范围`(d, d+td)`分解为`[(d,x1),(x1,x2),...,(xn,d+td)]`所有`xn`变量都与小时对齐。

例如，如果

```
d = datetime.datetime(2012, 9, 8, 18, 53, 34)
td = datetime.timedelta(hours=2, minutes=34, seconds=5) 
```

我想要一份清单

```
[(datetime.datetime(..., 18, 53, 34), datetime.datetime(..., 19, 0, 0)),
 (datetime.datetime(..., 19, 0, 0), datetime.datetime(..., 20, 0, 0)),
 (datetime.datetime(..., 20, 0, 0), datetime.datetime(..., 21, 0, 0)),
 (datetime.datetime(..., 21, 0, 0), datetime.datetime(..., 21, 27, 39))] 
```

任何人都可以提出一个不错的 Pythonic 方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T18:52:03.263

使用[dateutil](http://niemeyer.net/python-dateutil)，您可以使用 rrule 生成[列表](http://niemeyer.net/python-dateutil#head-470fa22b2db72000d7abe698a5783a46b0731b57)：

```
import dateutil.rrule as rrule
import datetime

def hours_aligned(start, end, inc = True):
    if inc: yield start
    rule = rrule.rrule(rrule.HOURLY, byminute = 0, bysecond = 0, dtstart=start)
    for x in rule.between(start, end, inc = False):
        yield x
    if inc: yield end

d = datetime.datetime(2012, 9, 8, 18, 53, 34)
td = datetime.timedelta(hours=2, minutes=34, seconds=5)

for x in hours_aligned(d,d+td):
    print(x) 
```

产量

```
2012-09-08 18:53:34
2012-09-08 19:00:00
2012-09-08 20:00:00
2012-09-08 21:00:00
2012-09-08 21:27:39 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:07:56.490

```
chunks = []
end = d + td

current = d
# Set next_current to the next hour-aligned datetime
next_current = (d + datetime.timedelta(hours=1)).replace(minute=0, second=0)

# Grab the start block (that ends on an hour alignment)
# and then any full-hour blocks
while next_current < end:
    chunks.append( (current, next_current) )

    # Advance both current and next_current to the following hour-aligned spots
    current = next_current
    next_current += datetime.timedelta(hours=1)

# Grab any remainder as the last segment
chunks.append( (current, end) ) 
```

* * *

这里的主要假设是您最初指定的 timedelta 不是负数。`[(x,y)]`如果`y < x`你这样做，你会得到一个单块列表。

# jquery - 鼠标悬停在菜单和超时

> ID：12333177
> 
> 赞同：1
> 
> 时间：2012-09-08T18:00:12.440
> 
> 标签：jquery, html, css, menu

我有多级菜单，当我将鼠标悬停在一个菜单项上时，如果该项目有子菜单，它将显示子菜单项。我认为这是一个正常的下拉菜单操作。问题是，当我将鼠标从主菜单项移动到子菜单项的速度过快时，如果鼠标不在路径中，子菜单项将消失，我必须再次悬停才能显示

我在互联网上搜索并找到了很多指南

[http://stackoverflow.com/questions/2316213/simple-jquery-dropdown-cleartimeout-settimeout-issues]

如果我使用上述指南，当我在主菜单项之间快速悬停时，会显示下一个子菜单项，但也会显示上一个子菜单（因为它有超时设置）

我想知道有没有办法处理这个问题？请帮忙给我一些提示

我将我的代码发布到[http://jsfiddle.net/v4aWZ/9/](http://jsfiddle.net/v4aWZ/9/)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:26:13.200

Try using [HoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html) to reduce responses to unintended hovering.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T13:43:55.163

## 给你：一个简单的脚本

HTML 只是为了展示一个例子。要点是添加 JavaScript (+jQuery) 并在您的 CSS 中，为每个`li:hover`属性添加`li.hover`如下属性：

```
#nav li:hover, #nav li.hover {
    /* your css */
} 
```

```
 /* timeout on hover: big menu */
	var hoverTimeout; //declare timeout
	$('#nav li').hover(function() { //mouse enter

		clearTimeout(hoverTimeout); //remove timeout, we're taking over control
		$('#nav li').removeClass('hover'); //clear all that are hovered
		$(this).parents('li').addClass('hover'); //add class to all our parents

	},function() { //mouse leave

		var $this=$(this); //create local copy
		hoverTimeout = setTimeout(function() {
			$this.parents('li').removeClass('hover'); //un-hover all parents
		},1000); //1 second after we remove our mouse

	});
```

```
@charset "UTF-8";

body {
  background: #aaa;  
}
nav {
  display: table-row;
    padding: 0;
    margin: 0;
    border: 0;
}
    nav a {
        display: block;
        line-height: 1em;
        text-decoration: none;
    }
    #nav, nav li {
        list-style: none;
        margin: 0;
        padding: 0;
    }
#nav {
    position: relative;
    z-index: 597;
    *display: inline-block;
    padding-left: .75rem;
    display: table-cell;
  width: 99%;
}
    #nav li {
        float: left;
        min-height: 1px;
        vertical-align: middle;
    }
    #nav li.hover, #nav li:hover {
        position: relative;
        z-index: 599;
        cursor: default;
    }
    #nav ul {
        visibility: hidden;
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 598;
        width: 100%;
        bottom: 0;
        left: 0;
        margin-top: 0;
        text-transform: none;
        min-width: 210px;
    }

    #nav ul .hassubmenu>a:after {
        content: "+";
        float: right;
        width: 10px;
        text-align: center;
    }
    #nav ul .hassubmenu:hover>a:after, #nav ul .hassubmenu.hover>a:after { content: "-" }
        #nav ul ul {
            top: 0;
            left: auto;
            right: -99.5%;
        }
    #nav li.hover>ul, #nav li:hover>ul { visibility: visible }
    #nav ul, #nav {
        list-style-type: none;
        padding-left: 0;
    }
#nav>li {
    padding: .5rem;
    background: #ddd;
    border: #56a0d3 solid 2px;
    border-top: none;
    border-bottom: none;
}
  #nav>li+li { border-left: none }
  #nav>li a {
      color: #000;
      font-weight: 700;
      text-decoration: none;
  }
  #nav>li:hover>a, #nav>li.hover>a { opacity: 1 }
#nav ul li {
    position: relative;
    float: none;
    font-weight: 400;
    background: #fff;
    background: transparent\9;
    background: hsla(0,0,100%,.7);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#b2ffffff,endColorstr=#b2ffffff);
    zoom: 1;
    padding: 5px 10px;
}
  #nav ul li:nth-child(n) { filter: none }
  #nav ul li:hover, #nav ul li.hover { background: #fff }
    #nav ul li a { line-height: 1.2rem }
    #nav ul li:last-child>a { border-radius: 0 0 3px 3px }
#nav ul li ul li ul li li {
    background: #000;
    background: transparent\9;
    background: rgba(0,0,0,.7);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#b2000000,endColorstr=#b2000000);
    zoom: 1;
    border: 10px solid transparent;
    border-top: 1px solid #ddd;
    border-bottom: none;
}
#nav ul li ul li ul li li:nth-child(n) { filter: none }
#nav ul li ul li ul li li:first-child { border-top: none }
#nav ul li ul li ul li li:last-child { border-bottom: none }
#nav ul li ul li ul li li:hover, #nav ul li ul li ul li li.hover { background: #000 }
#nav ul li ul li ul li li a { color: #62a2d6 }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<nav>
	<ul id="nav">

		<li class="hassubmenu">
			<a href="link">Menu-item</a>

			<ul>
				<li class="hassubmenu">
					<a href="link">Sub-menu-item</a>

					<ul>
						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>
			</ul>
		</li>

		<li class="hassubmenu">
			<a href="link">Menu-item</a>

			<ul>
				<li class="hassubmenu">
					<a href="link">Sub-menu-item</a>

					<ul>
						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>
			</ul>
		</li>

		<li class="hassubmenu">
			<a href="link">Menu-item</a>

			<ul>
				<li class="hassubmenu">
					<a href="link">Sub-menu-item</a>

					<ul>
						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>

						<li>
							<a href="link">Sub-sub-menu-item</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>

				<li>
					<a href="link">Sub-menu-item</a>
				</li>
			</ul>
		</li>
	</ul>
</nav>
```

# java - 问题让 Collections.shuffle() 为一组双打工作

> ID：12333180
> 
> 赞同：2
> 
> 时间：2012-09-08T18:01:07.713
> 
> 标签：java, jsp, collections, javabeans, shuffle

我正在尝试对 Java bean 中的双精度数组进行洗牌，以便在 JSP 文件中使用。

在我的 java bean 的默认构造函数中，我有：

```
amounts  = new double[] {0.5, 1, 1.5, 2, 2.5\. 3, 3.5, 4};

Collections.shuffle(Arrays.asList(amounts)); 
```

我可以很好地调用 bean 的方法，但由于某种原因，数量数组保持不变，所以它要么没有洗牌，要么没有执行默认的构造函数。没有抛出错误，所以我相信它可能是构造函数没有执行，但我不知道为什么。

在我的 JSP 中，我使用：

```
<jsp:useBean id="myBean" class="logic.logicBean" scope = "session" /> 
```

我认为这样做会执行默认构造函数，这是错误的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T18:10:42.670

`Arrays.asList(amounts)`期望`T...`，其中`T`是对象类型。这里的问题是你正在通过`double[]`，所以你的列表实际上是`List<double[]>`- 不是`List<Double>`。其他答案不正确，因为`Arrays.asList`保证“直写”到后备数组。

见[`Arrays.asList`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...))...

> 返回由指定数组支持的固定大小的列表。（将返回的列表“写入”到数组的更改。）

为了证明这一点，请尝试声明`amounts`as`Double[]`并允许编译器自动装箱（还要确保更正文字的类型，即添加`.0`或`D`后缀）：

```
amounts = new Double[] { 0.5, 1.0, 1.5, 2.0, 2.5, 3, 3.5, 4.0 }; 
```

请注意，它现在将正常运行:-)

# jquery - 使用 jsonp 跨浏览器调用但返回 XML

> ID：12333182
> 
> 赞同：0
> 
> 时间：2012-09-08T18:01:09.473
> 
> 标签：jquery, xml, cross-domain, jsonp, steam

我想使用纯粹的客户端方法获取从这个 URL 返回的数据

[http://steamcommunity.com/id/rahulkadukar/stats/TheElderScrollsVSkyrim/?tab=achievements&xml=1](http://steamcommunity.com/id/rahulkadukar/stats/TheElderScrollsVSkyrim/?tab=achievements&xml=1)

这是我现在的代码

```
 <script type="text/javascript">
    $(document).ready(function()
    {

        var data;
        $('#New').click(function()
        {
            $.ajax({
                type: "GET",
                url: "http://steamcommunity.com/id/rahulkadukar/stats/TheElderScrollsVSkyrim/?tab=achievements&xml=1",
                dataType: "jsonp",
                success: readData(data)
            })

            function readData(data) 
            { 
                console.log(data);
            }
        });
    });
    </script> 
```

有人可以告诉我应该怎么做，以便我可以将 Steam 中的数据转换为 JSON 变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:05:59.613

你不能。

防止 XSS 攻击的重点是确保服务器愿意让其数据嵌入到来自另一个域的页面中。

因此，所有解决方案，[JSONP（调用 javascript 变量）](http://en.wikipedia.org/wiki/JSONP)或[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，都涉及对服务器的修改，或者从您的服务器调用另一个域服务器，以便让浏览器只看到一个域。

# asp.net-mvc - asp.net mvc 无需预编译

> ID：12333183
> 
> 赞同：3
> 
> 时间：2012-09-08T18:01:13.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3

当我在 MVC 中对控制器进行更改时，我必须重新编译并上传我的二进制文件，以便在我的网站上注意到这些更改。这是有道理的，但我想知道有没有一种方法（或一些设置）可以让我对代码/控制器进行更改并简单地上传更改，而无需在本地编译和上传二进制文件。

我知道使用标准 asp.net，在对代码隐藏文件进行更改后，该应用程序将在服务器上加载第一页时自动编译。可以为 MVC3 设置类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:06:16.827

您可以使用网站项目类型而不是 Web 应用程序（这是 ASP.NET MVC 3 项目的默认设置）。在这种情况下，您必须手动创建项目结构（网站）并将您的控制器放在`App_Code`运行时自动编译的文件夹中。然后将控制器源代码发送到服务器。

绝对不是我建议你做的事情。只需坚持构建 ASP.NET MVC 3 应用程序的标准方法，该方法包括使用预编译的 Web 应用程序项目类型，其中所有代码都编译在您在`bin`文件夹中提供的程序集中。

# jsf - 来自 CommandButton 的 JSF ViewParam

> ID：12333187
> 
> 赞同：7
> 
> 时间：2012-09-08T18:01:42.047
> 
> 标签：jsf, primefaces

我正在使用 JSF 和 Primefaces，我的问题是：

我有一个页面（page1.jsf），它接收一个带有字符串列表（空格分隔）的视图参数：

```
<f:metadata>
 <f:viewParam name="list" value="#{bean1.list}" converter="listConverter"/>
</f:metadata> 
```

listConverter 将字符串转换为单个单词的列表。如果我通过 url 访问该页面（例如：page1.jsf?list=word1 word2 word3"）一切正常！

但现在我正在尝试使用另一个页面 (page2.jsf) 来创建该术语列表。我正在使用 Primeface 数据表，遵循以下示例： http: [//www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)

我想让用户选择多行（复选框 Primeface 示例），然后按下一个按钮，该按钮将重定向到 page1.jsf 并将所选项目列表作为参数传递（例如，使用 Primeface 展示示例，传递一个列表所选车型）。

我正在尝试这样做：

```
<p:commandButton action="page1?faces-redirect=true&amp;includeViewParams=true" >
 <f:attribute name="list" value="#{bean2.convertSelectedItemsToString()}" />
</p:commandButton> 
```

或这个：

```
<p:commandButton action="page1?faces-redirect=true&amp;includeViewParams=true" >
 <f:param name="list" value="#{bean2.convertSelectedItemsToString()}" />
</p:commandButton> 
```

其中 bean2 有一个 selectedItems[] 并选择了对象。

不用说...它不起作用。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T21:48:21.577

命令按钮不使用属性或参数来构造发生重定向的 URL。

为此，您通常使用`h:commandLink`或可选的`h:outputLink`，但您需要注意这些将呈现参数，就像它们在请求页面时一样。如果用户在此之后对选择进行更改，这些将不会反映在链接中。

可以为您提供最新选择的另一种方法是使用操作方法并在那里构造重定向 URL。

例如

```
<p:commandButton action="#{bean2.navigateWithSelection}" /> 
```

然后在你的 bean 中：

```
public String navigateWithSelection() {
    return "page1?faces-redirect=true&" + convertSelectedItemsToString();
} 
```

根据评论，如果`bean2`是对页面一无所知的通用 bean，则可以将目标页面作为参数传递：

```
<p:commandButton action="#{bean2.navigateWithSelection('page1')}" /> 
```

然后再次在你的 bean 中：

```
public String navigateWithSelection(String target) {
    return target + "?faces-redirect=true&" + convertSelectedItemsToString();
} 
```

# backbone.js - Backbone.js 和 ie fetch 仅使用开发工具工作

> ID：12333188
> 
> 赞同：2
> 
> 时间：2012-09-08T18:01:45.903
> 
> 标签：backbone.js, fetch

我正在尝试使用 BB.js 构建一个小型应用程序。

当然，一切都可以在 FF、CHROME 和 Opera 中运行，但不能在 IE 中运行。

我只是想使用 Restful（php 后端）获取模型以获取模型集合。

在 IE 中，即使多次刷新也没有任何反应。但是当我打开开发工具检查控制台并进行刷新时，它突然起作用了。

模型与收藏

```
(function($) {

//a fact model
window.Fact = Backbone.Model.extend({

    defaults: {
        factContent: ''
    },

    initialize: function Fact(){
        console.log("just created a fact");

        this.url = "fact.php?fact="+this.id,

        this.bind("error", function(model, error){
            console.log(error);
        });
    },

    parse : function(resp, xhr) {

        //new fact added
        if(resp.type == "create")
            this.url = "fact.php?fact="+resp.id;

        return resp;
    }

});

//collection of models
window.Facts = Backbone.Collection.extend({

    model: Fact,

    url: "facts.php",

    initialize: function(){
        console.log('fact collection created');
    }
});

//facts view
window.FactsCollectionView = Backbone.View.extend({

    el: $("#factsCollectionContainer"),

    initialize: function(){
        this.template = _.template($('#factsCollectionTemplate').html());

        //binding
        _.bindAll(this, 'render');
        this.collection.bind('change', this.render);
        this.collection.bind('add', this.render);
        this.collection.bind('remove', this.render);
        this.collection.bind('reset', this.render); 

    },

    render: function(){
        var renderedContent = this.template({facts : this.collection.toJSON()});
        $(this.el).html(renderedContent);
        return this;
    }

});

$(document).ready(function(){
    //create a fact collection and populate it
    factsc = new Facts();

                //NOT WORKING IN IE (no alerts)
                //WORKING ONLY USING DEV TOOL
    factsc.fetch({success:function(){
        //create a view and show collection after fetch is done
        factsView = new FactsCollectionView({collection:factsc});
        factsView.render(); 

        alert("success fetch");
    }, error: function(){
        alert("error fetch");
    }});    
});

})(jQuery); 
```

获取返回此 JSON： [{"id":"48","factContent":"Hello"},{"id":"47","factContent":"World"}]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:39:03.230

我相信这是由 IE 缓存 ajax 调用引起的。检查这个问题：[backbone.js fetch results cached](https://stackoverflow.com/questions/6178366/backbone-js-fetch-results-cached)。基本上，您可以强制 IE 不缓存您的请求，如下所示：

```
factsc.fetch({
cache: false,
success:function(){ /* stuff */
},
error:function() {/* error message */
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-23T21:59:18.373

这种确切的情况最近让我非常中风。问题确实是 IE 缓存 AJAX 调用结果。然而，检验这一理论非常困难。您会看到，当调试控制台打开时，Microsoft 会在任何地方禁用缓存。（当我写“有帮助”时，我的意思是法律允许的绝对最大量的讽刺。）通过这样做，调试任何缓存问题成为 WTF 中的一项练习。

步骤#1：用户报告问题，因此您在 IE 中尝试并确认问题。

步骤#2：您打开调试控制台并单步调试，却发现问题已神秘消失。

步骤#3：您关闭调试器并再次尝试，却发现它再次失败。

泡沫，冲洗重复。

我的问题很复杂，因为有问题的网站是在 HTTPS 中运行的，它不应该以任何方式、形状或形式进行缓存。微软甚至同意这一点：

[https://msdn.microsoft.com/library/ie/dn265017%28v=vs.85%29.aspx](https://msdn.microsoft.com/library/ie/dn265017%28v=vs.85%29.aspx)

但是，请注意“出于安全原因不缓存 HTTPS 页面”声明。事实上，这是真的。然而，AJAX 响应似乎不符合“HTTPS 页面”的条件。

简而言之，在 jQuery 中禁用缓存。对于 Backbone 应用程序，将以下内容放在应用程序的 init() 函数顶部附近应该可以解决问题：

$.ajaxSetup({ 缓存: false });

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:23:58.810

我也有类似的问题。我已经通过删除解决了`console.log`

你也可以试试同样的。它看起来很傻，但它确实有效。

谢谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-16T05:39:58.903

我们遇到了类似的问题。我们通过以下方式解决了它们

*   在 Ajax 级别禁用缓存。

    $.ajaxSetup({ 缓存: false, });

*   我们没有在生产代码中删除 console.log，而是使用 HTML5Boilerplate 控制台覆盖插件代码 [https://raw.github.com/h5bp/html5-boilerplate/master/js/plugins.js](https://raw.github.com/h5bp/html5-boilerplate/master/js/plugins.js)

# ruby - 在 Ruby 中替换方法参数

> ID：12333191
> 
> 赞同：1
> 
> 时间：2012-09-08T18:02:15.623
> 
> 标签：ruby, arguments, substitution

如何将一组参数绑定到一个变量，然后将该变量用作方法的参数，例如

```
my_method(arg_a, arg_b, arg_c, arg_d, arg_e) 
```

应该像这样表达

```
my_args = [arg_a, arg_b, arg_c, arg_d, arg_e]
my_method(my_args) 
```

但这不起作用，因为 my_method 需要 5 个参数，但只能将数组作为一个参数。我几乎没有设置相同参数的方法，那么如何让它工作以获取 DRYer 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:05:30.810

您应该使用 splat 运算符。尝试这个：

```
my_args = [arg_a, arg_b, arg_c, arg_d, arg_e]
my_method(*my_args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:07:23.370

可变长度参数/splat的可能候选者？[http://www.linuxtopia.org/online_books/programming_books/ruby_tutorial/Ruby_More_About_Methods_Variable-Length_Argument_Lists.html](http://www.linuxtopia.org/online_books/programming_books/ruby_tutorial/Ruby_More_About_Methods_Variable-Length_Argument_Lists.html)

# php - 显示用户输入值

> ID：12333196
> 
> 赞同：0
> 
> 时间：2012-09-08T18:03:02.093
> 
> 标签：php

```
+-----+-------+--------+
  ID  | Owner | Number |
+-----+-------+--------+
 com1 | peter | 103045 |
+-----+-------+--------+
 com2 | deter | 103864 |
+-----+-------+--------+ 
```

大家好。我正在处理项目的这一部分，假设用户输入某个 ID。当他输入这个特定的 ID 时，假设打印出该 ID 行中的所有内容。在这种情况下，如果他输入 com1，它将显示：

```
+-----+-------+--------+
  ID  | Owner | Number |
+-----+-------+--------+
 com1 | peter | 103045 |
+-----+-------+--------+ 
```

我使用了这个表格和代码：

表单.php

```
 <form action="query.php" method="POST">
    Enter your ID: <input type="varchar" name="id" /><br />
    <input type="submit" value="Audit" />
    </form> 
```

查询.php

```
 $con = mysql_connect("localhost", "root", "");
    if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

    mysql_select_db("livemigrationauditingdb", $con);

    $input = (int) $_POST['id'];
    $query = mysql_query("SELECT * FROM system_audit WHERE ID = $input");

    echo "<table border='1'>
    <tr>
    <th>ID</th>
    <th>Owner</th>
    <th>Number</th>
    </tr>";

    while($row = mysql_fetch_array($query))
    {
      echo "<tr>";
      echo "<td>" . $row['ID'] . "</td>";
      echo "<td>" . $row['Owner'] . "</td>";
      echo "<td>" . $row['Number'] . "</td>";
      echo "</tr>";
      }
    echo "</table>";

    mysql_close($con); 
```

认为你们知道错误吗？哦，我是否可以不将其链接到其他页面？我需要将表格和代码放在一页中。目前我的表单链接到 query.php。有没有办法取消这条线，它仍然有效。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:07:02.670

尝试从 $input = (int) $_POST['id']; 中删除 (int)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:12:31.003

尝试删除

```
while($row = mysql_fetch_array($query)) 
```

并将其替换为

```
while($row = mysql_fetch_row($result)) 
```

还要删除 (int) 并查看它是否有帮助。

```
 echo "<td>" . $row['ID'] . "</td>";
  echo "<td>" . $row['Owner'] . "</td>";
  echo "<td>" . $row['Number'] . "</td>"; 
```

可以换成

```
 echo "<td>" . $row[0] . "</td>";
  echo "<td>" . $row[1] . "</td>";
  echo "<td>" . $row[2] . "</td>"; 
```

您也可以将它们都放在同一页面上，如图所示

```
<?php

    $con = mysql_connect("localhost", "root", "");
    if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

    mysql_select_db("livemigrationauditingdb", $con);

    $input = (int) $_POST['id'];

    if($input)
    {
      $query = mysql_query("SELECT * FROM system_audit WHERE ID = $input");

      echo "<table border='1'>
      <tr>
      <th>ID</th>
      <th>Owner</th>
      <th>Number</th>
      </tr>";

      while($row = mysql_fetch_row($query))
      {
        echo "<tr>";
        echo "<td>" . $row[0] . "</td>";
        echo "<td>" . $row[1] . "</td>";
        echo "<td>" . $row[2] . "</td>";
        echo "</tr>";
      }
      echo "</table>";
    }

    mysql_close($con); 
?>   

    <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
    Enter your ID: <input type="varchar" name="id" /><br />
    <input type="submit" value="Audit" />
    </form>

?> 
```

# javascript - jqGrid jqGridImport jqGridExport

> ID：12333213
> 
> 赞同：2
> 
> 时间：2012-09-08T18:04:48.757
> 
> 标签：javascript, jquery, jqgrid

我的任务是使用函数 jqGridImport 和 jqGridExport 来保存/加载网格状态。问题是 jqGridImport 没有给我预期的效果。

1.  我将这些功能链接到网格的自定义寻呼机按钮。
2.  我将（通过 POST）带有配置的 XML 保存到服务器。检查我在服务器上有良好的 XML 文件。
3.  然后我从服务器加载 XML（来自 POST 响应）并将其导入网格。检查我从响应良好的 XML 中得到。

我是如何测试的：

1.  用网格加载页面
2.  更改排序，隐藏一些列，替换列。
3.  保存布局
4.  重新加载页面以恢复原始布局
5.  按“加载布局”按钮
6.  没有明显的效果。

我想念什么？对不起，排长队。

第二：我不确定在 gqGridExport/jqGridImport 之后是否会有良好的 hgrid 事件处理程序。他们会正确工作吗？例如， OnSelectRow 会正常工作吗？

非常感谢提前。

```
jQuery("#listU07").jqGrid('navGrid','#pager',{del:false,add:false,edit:false,search:false})
        .navButtonAdd("#pager", {caption: "Columns", buttonicon: "ui-icon-newwin", position: "last", onClickButton: function() {$("#listU07").jqGrid('columnChooser', {classname:"ui-jqgrid"});}})
        .navButtonAdd("#pager", {caption: "Save layout", buttonicon: "ui-icon-disk", position: "last", onClickButton: function() {$.post("u07savegrid", {xml: $("#listU07").jqGrid('jqGridExport', {})}, null, "json");}})
        .navButtonAdd("#pager", {caption: "Load layout", buttonicon: "ui-icon-folder-open", position: "last", onClickButton: function() {$.post("u07loadgrid", {}, null, "json").complete(function(data, status) {$("#listU07").jqGrid('jqGridImport', data); $("#listU07").jqGrid('remapColumns', {}, true);});}}) 
```

# php - PHP检查csv文件是否存在？

> ID：12333220
> 
> 赞同：0
> 
> 时间：2012-09-08T18:06:27.913
> 
> 标签：php, csv, fopen, overwrite, fputcsv

这段代码的问题是，每次我从 MySQL 导出到 csv 时，它都会覆盖已经创建的 csv。我希望这段代码检查是否已经创建了 csv 文件-> 创建新文件。前任。(Sales-2012-9-8.csv) 到 (Sales1-2012-9-8.csv)...这段代码非常适合从 MySQL 导出记录..但是当导出另一个 csv 时，它会覆盖当前的 csv文件名。

哦，是的，还有一件事..如何在 csv 文件的第一行添加表头。例如（货号 - 数量 - 售价 - 日期）？

谢谢你

```
<?php
require_once('connect_db.php');
$fdate = $_POST['fdate'];
$tdate = $_POST['tdate'];

$result = mysql_query("SELECT item_no, qty, discount_price, date FROM sold_items WHERE date BETWEEN '".$fdate."' AND '".$tdate."' ORDER BY date Desc");

$filename = $name = "Sales";
$index = 1;
while(file_exists($filename)) {
  $filename = $name.$index;
  $index++;
  echo "File Already Exists";
}

if(!$f = fopen("E:/{$filename}-{$tdate}.csv", 'w')){
    ?>
    <script language="javascript">
    alert('USB FLASH NOT INSERTED');
    history.back();
    </script>
    <?php
}

while($row = mysql_fetch_array($result, MYSQL_NUM))
{
    fputcsv($f, $row);
}

fclose($f);

?>
<center><font style="font-size:28px; font-weight:bold; color:#C00;">USB Transfer Successful</font></center> 
<center><input type="button" onclick="javascript:window.close()" value="Close Window" /></center>
<?php

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:42:10.753

试试这个变种。我认为 file_exists() 函数可以查看“E:/”以外的其他文件夹：

```
$tdate = date();
$filename = $name = "Sales";
$index = 1;
while(file_exists("E:/{$filename}-{$tdate}.csv")) {
  $filename = $name.$index;
  $index++;
  echo "File {$filename}-{$tdate}.csv Already Exists";
}

if(!$f = fopen("E:/{$filename}-{$tdate}.csv", 'w')){
    ?>
    <script language="javascript">
    alert('USB FLASH NOT INSERTED');
    history.back();
    </script>
    <?php
} 
```

至于第二个问题：

> 哦，是的，还有一件事..如何在 csv 文件的第一行添加表头。例如（货号 - 数量 - 售价 - 日期）？

据我所知，csv 文件的第一行被识别为标题。因此，请在编写查询结果之前尝试编写标题。例如

```
fputcsv($f, array('Item No', 'Qty', 'Selling Price', 'Date')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:10:42.727

您只检查值为“Sales”的文件名 - 日期尚未包括在内！

# java - 在proguard混淆期间如何保留除一个之外的所有公共成员？

> ID：12333221
> 
> 赞同：2
> 
> 时间：2012-09-08T18:06:27.863
> 
> 标签：java, obfuscation, proguard

源示例：

```
// this is package visible interface
interface MyInterface {
    void foo();
}

public class MyClass1 implements MyInterface {
    // some public class members which should not be obfuscated
    // ...     

    // this is MyInterface implementation, this method should be obfuscated:
    void foo() {}
}

// other classes which implement MyInterface
... 
```

如何在仅混淆 MyInterface.foo() 实现的同时将所有公共成员保留在 MyClass1 和其他类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:59:14.977

考虑到它只是您想要混淆的一种方法，为什么不将您的`void foo()`方法重命名为类似 `void y()`（或您喜欢的一些随机字母）？

如果您在调试时真的无法记住一个奇怪的方法，那么您将不得不`-keep`单独使用所有其他方法。

另一种选择是将方法提取到另一个类，或创建一个子类，但这可能不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:24:08.160

ProGuard 不提供任何快捷方式来指定除一个之外的所有方法。你必须指定你需要的那些。据推测，您必须保留它们是有原因的。例如，如果他们实现了另一个接口，您可以轻松地指定保留这个其他接口的所有方法。

请注意，-keep 规范指的是类/字段/方法的名称，而不是方法的代码：

ProGuard 手册 > 使用 > [-keep 选项概述](http://proguard.sourceforge.net/manual/usage.html#keepoverview)

# ruby-on-rails - Hartl 的第 7 章推送到 heroku 时，“pg 不是捆绑包的一部分”，但它是

> ID：12333224
> 
> 赞同：0
> 
> 时间：2012-09-08T18:06:46.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rubygems

因此，我正在阅读 Hartl 的 RoR 教程，我在[第 7 章的末尾](http://ruby.railstutorial.org/chapters/sign-up#sec-deploying_to_production_with_ssl)。我正在尝试部署到heroku。一切直到

```
heroku run rake db:migrate 
```

步骤有效，但该步骤给了我下面的错误。我跑`bundle install`了好几次，我不确定我的问题出在哪里。我也无法在线访问我的 heroku 应用程序，即使我运行`heroku create --stack cedar`然后`git push heroku`. 当我转到我的 heroku 应用程序 URL 时，它只是给我一个应用程序错误。

我目前正在运行 Postgres.app 并且我的 rails 服务器没有部署。

包括我的`Gemfile`和`database.yml`。随意查看[http://github.com/sambaek上的代码](http://github.com/sambaek)

有人可以帮忙吗？谢谢！

## 终端输出

```
heroku run rake db:migrate
Running `rake db:migrate` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
Connecting to database specified by DATABASE_URL
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.)

Tasks: TOP => db:migrate => db:load_config
(See full trace by running task with --trace) 
```

## 宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.4'
gem 'bcrypt-ruby', '3.0.1'

group :development, :test do
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '0.5.5'
  gem 'pg'
  # gem 'sqlite3'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'factory_girl_rails', '1.4.0'
end

gem 'annotate', '2.5.0', group: :development

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1', :require => false
  gem 'growl', '1.0.3'
end 
```

## 配置/数据库.yml

```
# postgresql
development:
  host: localhost
  adapter: postgresql
  encoding: utf8
  database: sample_app_development
  pool: 5
  username: 
  password: 

test:
  host: localhost
  adapter: postgresql
  encoding: utf8
  database: sample_app_test
  pool: 5
  username: 
  password: 

production:
  adapter: postgresql
  encoding: utf8
  database: sample_app_production
  pool: 5
  username:
  password:

# sqlite3
# development:
#   adapter: sqlite3
#   database: db/development.sqlite3
#   pool: 5
#   timeout: 5000

# # Warning: The database defined as "test" will be erased and
# # re-generated from your development database when you run "rake".
# # Do not set this db to the same as development or production.
# test:
#   adapter: sqlite3
#   database: db/test.sqlite3
#   pool: 5
#   timeout: 5000

# production:
#   adapter: sqlite3
#   database: db/production.sqlite3
#   pool: 5
#   timeout: 5000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:23:47.197

两个问题：

1.  您在 github 上的代码显示`pg`gem 在`production`组中 - 只需将其从该组中取出，以便它将包含在所有环境中。
2.  您的问题的更新显示了您的`Gemfile`and `config/database.yml`，将`pg`gem 放入`test`和`development`环境中，Heroku 不会在其中安装它

我在下面看到了您的答案，但是如果您在所有环境中都使用 Postgres，则不需要将`pg`gem 放在**任何**组中，因为您似乎是根据您的`config/database.yml`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:21:57.163

所以事实证明，当我运行`heroku run rake db:migrate`它时，它并没有安装`pg`gem，因为我`production`的`Gemfile`. 现在可以了。感谢任何花时间尝试解决问题的人！

# javascript - 如何覆盖一个方法并且仍然能够在被覆盖的方法中使用基本方法

> ID：12333229
> 
> 赞同：1
> 
> 时间：2012-09-08T18:07:26.273
> 
> 标签：javascript

我有这个代码

```
function test(){};

test.prototype.testMethod = function(){return 1;}

var t = new test();
t.testMethod(); 
```

现在我需要重写方法 testMethod 以便我仍然可以在重写中调用基本方法。我如何使用原型来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:17:39.850

如果您需要覆盖单个实例的基本方法，您仍然可以参考原型中定义的方法：

```
function test(){};

test.prototype.testMethod = function() {console.log('testMethod in prototype');}

var t = new test();
t.testMethod = function () {
    console.log(this);
    console.log('testMethod override');
    test.prototype.testMethod();    
};
t.testMethod(); 
```

试试看：http: [//jsfiddle.net/aeBWS/](http://jsfiddle.net/aeBWS/)

如果你想替换原型方法本身，你有几个路线。最简单的方法是为您的函数选择一个不同的名称。如果这是不可能的，那么您可以将旧方法复制到一个具有新名称（如`_testMethod`）的方法并以这种方式调用它：

```
function test(){};

test.prototype.testMethod = function() {console.log('testMethod in prototype');}  

test.prototype._oldTestMethod = test.prototype.testMethod;

test.prototype.testMethod = function() {
    console.log('testMethod override');
    test.prototype._oldTestMethod ();    
};

var t = new test();
t.testMethod(); 
```

试试看：http: [//jsfiddle.net/x4txH/](http://jsfiddle.net/x4txH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:12:34.473

您可以像这样在测试原型上使用旧方法的引用：

```
function test(){};

test.prototype.testMethod = function(){
  return 1;
}

function test2(){};

test2.prototype = new test();

test2.prototype.testMethod = function(){
  return test.prototype.testMethod()
}; 
```

# flash - Actionscript 3 中的 hitTestObject 错误 1046

> ID：12333231
> 
> 赞同：1
> 
> 时间：2012-09-08T18:07:49.673
> 
> 标签：flash, actionscript

我刚开始在 AS3 中进行一些编程，但仍有一些我不清楚的地方。

我有 3 个不同文件的项目`twinrunner.fla`：`twinrunner.as`和`wall.as`.

我让墙从右到左在屏幕上滚动。当它击中玩家时，我想让它识别它。我试图用`hitTestObject`. 但不幸的是，我只得到错误。

### twinrunner.as

```
public class TwinRunner extends MovieClip
{
    private var _timer:Timer;

    public function TwinRunner()
    {
        //Timer initialize
        _timer = new Timer(500, 1);
        _timer.addEventListener(TimerEvent.TIMER_COMPLETE, onUpdateTime);
        _timer.start();

        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    }

    private function onAddedToStage(event:Event):void
    {
        //Add event listeners
        button.addEventListener(MouseEvent.CLICK, onGuessButtonClick);
        addEventListener(Event.ENTER_FRAME, onEnterFrame);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
    }

    private function onRemovedFromStage(event:Event):void
    {
        //Remove the onEnterFrame event if
        //this object is removed from the stage
        removeEventListener(Event.ENTER_FRAME, onEnterFrame);
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
    }

    private function onGuessButtonClick(event:Event):void
    {
        addChild(new Wall());
    }

    private function onEnterFrame(event:Event):void
    {
    }

    private function onUpdateTime(event:Event):void
    {
        addChild(new Wall());
        _timer.reset();
        _timer.start();
    }

} 
```

### 墙.as

```
public class Wall extends MovieClip
{
    private var _vx:int;

    public function Wall()
    {
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    }

    private function onAddedToStage(event:Event):void
    {
        x = stage.width;
        y = 300;
        _vx = -5;
        stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage)
        addEventListener(Event.ENTER_FRAME, onEnterFrame);
    }
    private function onRemovedFromStage(event:Event):void
    {
        removeEventListener(Event.ENTER_FRAME, onEnterFrame);
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
        trace("wall removed");
    }

    private function onKeyDown(event:KeyboardEvent):void
    {
        if (event.keyCode == Keyboard.RIGHT)
        {
        _vx = -20;
        }
    }

    private function onEnterFrame(event:Event):void
    {
        x += _vx;

        if(this.hitTestObject(Player))
        {
            trace("player hit");
        }

        if (x + width / 2 < 0)
        {
            parent.removeChild(this);
        }
    }
} 
```

每次我尝试编译它时，我都会收到错误 1046：

> 找不到类型或不是编译常量：播放器

我想这是一个非常愚蠢的错误，但我完全迷路了，不知道在哪里搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:32:28.420

我不完全理解这个游戏的概念，所以我会根据我已经理解的内容给你一个解决方案。

起初我认为最好不要使用它，但实际上是墙的实例名称。

```
if(wall.hitTestObject(Player))
{
   trace("player hit");
 } 
```

宽度也无处可寻，这意味着您必须添加（可能您忘记了）。

var wdh：数字；

hitTestObject 也不是那么精确的碰撞方法。您可以计算 2 个对象之间的距离并检查它们是否发生碰撞。

这可以帮助您：

[http://sierakowski.eu/list-of-tips/39-collision-detection-methods-hittest-and-hittestobject-alternatives.html](http://sierakowski.eu/list-of-tips/39-collision-detection-methods-hittest-and-hittestobject-alternatives.html)

[http://ughzoid.wordpress.com/2011/06/20/collision-detection-alternatives-to-hittest-and-hittestobject/](http://ughzoid.wordpress.com/2011/06/20/collision-detection-alternatives-to-hittest-and-hittestobject/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:02:18.830

你在哪里定义了播放器？

错误表明编译器不知道 Player 是什么。它是它自己的类吗？如果是这样，这个 hitTestObject 测试将不起作用——您需要比较两个对象，而不是一个对象和一个类。

这可以通过声明 Player 类的实例（如果有的话）来解决，可能在 Twinrunner.as 文件中：

```
public static var player:Player = new Player();
player.x = whatever;
player.y = whatever;
addChild(player); 
```

然后，做hitTest：

```
if(this.hitTestObject(twinrunner.player))
        {
            trace("player hit");
        } 
```

如果您实际上没有 Player 类，那么您需要创建一个。

或者，`Player`实际上是在舞台上？如果是这样，你需要稍微改变一下。如果是这种情况，请发表评论并告诉我。

# eclipse - java.lang.IllegalArgumentException：已添加：Lorg/hamcrest/BaseDescription；转换为 Dalvik 格式失败，错误 1

> ID：12333238
> 
> 赞同：11
> 
> 时间：2012-09-08T18:08:19.220
> 
> 标签：eclipse, maven, adt, m2e, eclipse-juno

首先，至少有 2 个帖子有相同的问题，但这些解决方案不再起作用，至少在我的安装中不起作用。

我将 m2e 与 Eclipse 和 Android 一起使用，并尝试通过选择 run as-> Android application 将应用程序作为“Android Application”运行，但我总是收到此错误：

> 意外的顶级异常：java.lang.IllegalArgumentException：已添加：Lorg/hamcrest/BaseDescription；
> . . .
> 
> [2012-09-08 19:50:41 - net.mydomain.project-TRUNK] 转换为 Dalvik 格式失败，错误 1

[这是工具 R14 部分中](http://tools.android.com/knownissues)描述的问题。首先，这无法解决，因为我在 ADT 20.0.3 中遇到了这个问题。其次，我没有这些所谓的“_src”文件夹。我以前从未在 Maven 项目中见过它们，所以我不知道我现在应该做什么。我什至没有链接两次的任何库。至少我在我的项目中没有看到一些。任何想法如何让这个工作？

如果这有帮助，这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
  <project xmlns="http://maven.apache.org/POM/4.0.0"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven- v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>net.devgems.android</groupId>
    <artifactId>kurzparkzonewien</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>kurzparkzonewien</name>

    <properties>
        <platform.version>1.6_r2</platform.version>
        <android.sdk.path>/opt/android-sdk-linux</android.sdk.path>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.0.1</version>
        </dependency>
        <!-- Make sure this is below the android dependencies -->
        <dependency>
            <groupId>com.pivotallabs</groupId>
            <artifactId>robolectric</artifactId>
            <version>1.0-RC1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <outputDirectory>target/classes</outputDirectory>
        <testOutputDirectory>target/test-classes</testOutputDirectory>

        <plugins>
            <plugin>
                 <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.1.1</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>4</platform>
                        <path>${android.sdk.path}</path>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
   </project> 
```

我正在使用 Eclipse Juno、ADT 20.0.3、m2e 1.1.0。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T13:39:54.203

我尝试了上述解决方案，但仍然出现错误。只有经过更多尝试和错误后，我才发现 hamcrest 类也包含在另一个 jar 中：mockito（我还不知道 mockito 不适用于我的仪器测试）

所以我通过从我的依赖项中删除 mockito-all.jar 并从 junit 的传递依赖项中排除 hamcrest 来解决我的问题，如下所示：

```
 <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <scope>test</scope>
    <version>4.10</version>
    <exclusions>
        <exclusion>
            <artifactId>hamcrest-core</artifactId>
            <groupId>org.hamcrest</groupId>
        </exclusion>
    </exclusions>
  </dependency> 
```

公共日志记录（截至撰写之日）也可能需要此排除，因为否则 apk 构建器将抗议旧类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-09T08:21:05.443

我找到了解决方案。这取决于 JUnit 版本，因为 JUnit 4.10 增加了 JUnit 库和 hamcrest jar 库，虽然 JUnit 4.10 已经包含了所有 hamcrest 类，所以 hamcrest 存在两次。如果我切换回 JUnit 4.8.1，它不会将 hamcrest 添加为库并且错误消失了。

此解决方案实际上是一种解决方法。通常 Eclipse Maven 插件应该处理这个问题，但是 Hamcrest/JUnit 是一个特殊的问题，因为 JUnit 包含 Hamcrest，不是作为依赖项，而是在代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:49:43.257

不幸的是，Eclipse 不了解 Maven 测试范围。它使用 JUnit 4.10 将 hamcrest 类拉入构建中。使用 JUnit 4.8.1，或者，如果你真的需要使用 4.10+ 版本的 JUnit，你可以在 eclipse 中使用没有 junit dep 的 maven 配置文件。

1.  在默认配置文件中包含 JUnit dep 并创建一个空的“no-junit”配置文件（参见下面的示例 pom）
2.  Eclipse 项目属性 > Maven > 活动 Maven 配置文件：no-junit
3.  手动将junit库添加到你项目的eclipse构建路径中

这是 pom.xml 的相关部分：

```
<profiles>
    <profile>
        <id>default</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <dependencies>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.10</version>
                <scope>test</scope>
            </dependency>
        </dependencies>
    </profile>
    <profile>
        <id>no-junit</id>
    </profile>
</profiles> 
```

# python - django-mptt 树重建错误

> ID：12333242
> 
> 赞同：3
> 
> 时间：2012-09-08T18:08:36.163
> 
> 标签：python, django, orm, django-mptt, mptt

我用的是 django-mptt 版本 (0,5,'+dev')

我的模型看起来像：

```
class Comment(MPTTModel):
    content = models.CharField(max_length = 300)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='child')

    class MPTTMeta:
        order_insertion_by = ['-creation_time'] 
```

现在，我在 Comment 模型中更改 Meta：

```
class MPTTMeta:
        order_insertion_by = ['creation_time'] 
```

然后，我在 django shell 下重建树，然后是[**这个**](https://stackoverflow.com/questions/5541432/how-do-i-rebuild-my-django-mptt-tree)：

> 模型.comment.tree.rebuild()

但是，它抛出： `AttributeError: type object 'Comment' has no attribute 'tree'`

那有什么问题？如何在 django-mptt 中重建树？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:24:16.653

你有没有尝试过：

```
Comment.objects.rebuild() 
```

因为`rebuild`是在[_](https://github.com/django-mptt/django-mptt/blob/master/mptt/managers.py#L431)`TreeManager class`

[在您引用](https://stackoverflow.com/questions/5541432/how-do-i-rebuild-my-django-mptt-tree)的 SO 文章中，我假设他已为该`tree`属性设置了一个自定义管理器。但你没有，因此在`objects`属性上。

您熟悉[模型管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)吗？

# php - 卷曲 https 登录

> ID：12333243
> 
> 赞同：0
> 
> 时间：2012-09-08T18:09:13.123
> 
> 标签：php, curl

我正在尝试使用 Curl登录[https://www.reporo.com/login.php 。](https://www.reporo.com/login.php)这是我正在使用的代码：

```
 <?php
function createPostString($aPostFields) {
    foreach ($aPostFields as $key => $value) {
        $aPostFields[$key] = urlencode($key . '=' . $value);
    }

    return urlencode(implode('&', $aPostFields));
}

$postFields['username'] = 'login';
$postFields['password'] = 'pass';
$postFields['submit'] = ' ';

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, 'https://www.reporo.com/login.php');
curl_setopt($curl, CURLOPT_REFERER, 'https://www.reporo.com/login.php');
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13');
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookies.txt');
curl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookies.txt');
curl_setopt($curl, CURLOPT_POST, TRUE);
curl_setopt($curl, CURLOPT_POSTFIELDS,  createPostString($postFields));

curl_exec($curl);
header('Location: https://www.reporo.com/analytics/dashboard.php');
curl_close($curl)

?> 
```

使用脚本后，它会将我重定向到[http://best-payroll-services.info/adder/login.php](http://best-payroll-services.info/adder/login.php)。哪里有问题 ？

在 var_dump(curl_getinfo($c)) 之后，我得到了：

```
'url' => string 'https://www.reporo.com/login.php' (length=32)
  'content_type' => string 'text/html' (length=9)
  'http_code' => int 200
  'header_size' => int 382
  'request_size' => int 192
  'filetime' => int -1
  'ssl_verify_result' => int 20
  'redirect_count' => int 0
  'total_time' => float 0.843
  'namelookup_time' => float 0
  'connect_time' => float 0.109
  'pretransfer_time' => float 0.531
  'size_upload' => float 255
  'size_download' => float 3233
  'speed_download' => float 3835
  'speed_upload' => float 302
  'download_content_length' => float 3233
  'upload_content_length' => float 255
  'starttransfer_time' => float 0.655
  'redirect_time' => float 0
  'certinfo' => 
    array
      empty
  'redirect_url' => string '' (length=0) 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:21:39.933

这个脚本有几个问题。

*   您需要更改cookies的相对路径：

    ```
    if ( file_exists( 'cookies.txt' ) ) 
    ```

    到绝对

    ```
    if ( file_exists( dirname( __FILE__ ).'/cookies.txt' ) ) 
    ```

    这样您就可以确定它正在检查正确的文件。

*   也是`str_replace( '/', '', $_SERVER[ "PHP_SELF" ] );`一个返回函数。这意味着您需要存储返回值：

    ```
    $redirect_url = str_replace( '/', '', $_SERVER[ "PHP_SELF" ] );
    header('Location:'.$redirect_url); 
    ```

我已经稍微修改了你的代码：

```
function connect( $url, $post = '' )
{
    $curl = curl_init();
    curl_setopt( $curl, CURLOPT_URL, $url );
    curl_setopt( $curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.100 Safari/534.30' );
    curl_setopt( $curl, CURLOPT_HEADER, 0 );
    curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt( $curl, CURLOPT_FOLLOWLOCATION, 0 );
    curl_setopt( $curl, CURLOPT_POST, 1 );
    curl_setopt( $curl, CURLOPT_POSTFIELDS, $post );
    curl_setopt( $curl, CURLOPT_SSL_VERIFYPEER, false );
    curl_setopt( $curl, CURLOPT_COOKIEFILE, __DIR__.'/cookies.txt' );
    curl_setopt( $curl, CURLOPT_COOKIEJAR,  __DIR__.'/cookies.txt' );
    $result = curl_exec( $curl );
    curl_close( $curl );
    return $result;
}

$login_data[ 'username' ] = $_POST['login'];
$login_data[ 'password' ] = $_POST['password'];

foreach ( $login_data as $key => $value ) {
    $post_items[ ] = $key.'='.$value;
}
$post_string = implode( '&', $post_items );

if ( file_exists( __DIR__.'/cookies.txt' ) ) {
    // Cookies exist, point to a secured page?
    echo connect( 'https://yourhost/secure.php')
}
else {
    // Cookies don't exist post to a login page and redirect to a secured page?
    connect( 'https://yourhost/login.php', $post_string )
    $redirect_url = str_replace( '/', '', $_SERVER[ "PHP_SELF" ] );
    header( 'Location: '.$redirect_url );

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:51:29.357

我假设它重定向到的网站属于您，因为该代码中唯一重定向的是以下行：

```
header( 'Location: '.$_SERVER[ "PHP_SELF" ] ); 
```

我猜问题出在：

```
if ( file_exists( 'cookies.txt' ) ) 
```

该文件似乎不存在，这就是它运行的原因：

```
connect( 'https://www.reporo.com/login.php', $post_string );
str_replace( '/', '', $_SERVER[ "PHP_SELF" ] );
header( 'Location: '.$_SERVER[ "PHP_SELF" ] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:39:09.497

这是我编写的脚本，用于登录 Reporo 网站并下载特定日期的整体广告商统计信息（在 url 中指定）。我很确定这就是你要找的。

```
// Login & download stats in CSV format
function get_stats($login_url, $username, $password, $login_button, $csv_title, $download_url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $login_url);
    $post_fields = 'username='.urlencode($username).'&password='.urlencode($password);
    // Some sites don't send this variable, hence the check
    if(trim(urlencode($login_button)) != ''){
        $post_fields .= '&'.$login_button.'='.$login_button;
    }
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookies.txt');
    curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookies.txt');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
    curl_exec($ch);

    // Prevent the script from timing out
    set_time_limit(0);

    $fp = fopen (dirname(__FILE__) . '/'.$csv_title, 'w+');//This is the file where we save the information
    curl_setopt($ch, CURLOPT_URL, $download_url);//Here is the file we are downloading
    curl_setopt($ch, CURLOPT_TIMEOUT, 50);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);
}

// Set REPORO variables
$rep__login_url = 'https://www.reporo.com/login.php';
$rep_un = 'USERNAME';
$rep_pw = 'PASSWORD';
$rep_login_butt = 'submit';
$rep_csv = 'reporo_stats.csv';
// In the url, list= YOUR CAMPAIGN IDS (comma seperated)
$rep_dl_url = 'https://www.reporo.com/analytics/data.php?type=AdvertiserEntity&start=2012-10-17&end=2012-10-17&entity=client&list=1234,5678,9101,1121,3141&format=csv';

// Call get_stats function
get_stats($rep__login_url, $rep_un, $rep_pw, $rep_login_butt, $rep_csv, $rep_dl_url); 
```

# c# - C# 派生接口在 C++ 中无法正常工作

> ID：12333246
> 
> 赞同：5
> 
> 时间：2012-09-08T18:09:32.077
> 
> 标签：c#, c++, com, interface, import

我在 C# 中定义了两个接口，如下所示：

```
[Guid("4938540B-3DB2-452c-A061-59EC499657E7")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IRADevice
{
   Void FA();
}

/// <summary>
/// IRADevice interface represents a given RADevice.
/// </summary>
[Guid("4938540B-3DB2-452c-A061-59EC499657E8")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IRADevice2 : IRADevice
{
    void FB();
} 
```

在 c++ 代码中，我使用以下命令导入上述接口生成的 tlb

```
#import "device.tlb"  raw_interfaces_only 
```

创建的 tlh 文件如下：

```
struct __declspec(uuid("4938540b-3db2-452c-a061-59ec499657e7"))
IRADevice : IDispatch
{
//
// Raw methods provided by interface
//

virtual HRESULT __stdcall FA ( ) = 0;
};

struct __declspec(uuid("4938540b-3db2-452c-a061-59ec499657e8"))
IRADevice2 : IDispatch
{
//
// Raw methods provided by interface
//

virtual HRESULT __stdcall FB ( ) = 0;
}; 
```

我希望 IRADevice 派生自 IRADevice 而不是 IDispatch，并且包括 FA 功能。谁能告诉我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:31:45.360

正如@HansPassant 所说，这是一个已知的限制。我花了一分钟，但我找到了一些相关文件来支持这一事实。[http://msdn.microsoft.com/en-us/library/aa645736(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645736(v=vs.71).aspx)

最相关的部分是：

*在 C# 中声明的 COM 接口必须包括其基接口的所有成员的声明，但 IUnknown 和 IDispatch 的成员除外——.NET Framework 会自动添加这些。从 IDispatch 派生的 COM 接口必须使用 InterfaceType 属性进行标记。*

# c# - ServiceKnownType 未按预期工作

> ID：12333247
> 
> 赞同：0
> 
> 时间：2012-09-08T18:09:32.147
> 
> 标签：c#, .net, wcf, serialization, datacontract

我有一个如下所示的服务合同接口：

```
[ServiceKnownType(typeof(GeometricModelDescriptor))]
[ServiceKnownType(typeof(TemplateModelDescriptor))]
[ServiceContract]
public interface IModelRepository
{
    [OperationContract]
    ModelDescriptor GetDescriptor(ModelHandle model);
} 
```

它使用一些简单的数据合同类型，如下所示：

```
[DataContract]
public class ModelDescriptor
{
    //...
}

[DataContract]
public sealed class GeometricModelDescriptor : ModelDescriptor
{
    //...
} 
```

当我尝试调用 GetDescriptor 方法时，我得到一个序列化异常，表明客户端代理无法反序列化该类型：

> 元素“ [http://tempuri.org/:GetDescriptorResult](http://tempuri.org/:GetDescriptorResult) ”包含映射到名称“MyNamespace:GeometricModelDescriptor”的类型的数据。反序列化器不知道映射到此名称的任何类型。考虑使用 DataContractResolver 或将与“GeometricModelDescriptor”对应的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将其添加到传递给 DataContractSerializer 的已知类型列表中。

我的理解是 ServiceKnownType 属性应该防止这种异常。我错过了什么？

* * *

人们要求提供客户端代码。这有点涉及，但这里是生成客户端代理包装器的逻辑的关键：

```
 var baseType = typeof(ClientBase<>).MakeGenericType(typeof(TService));
                var proxyType = _module.DefineType("ProxyType" + typeof(TService).Name,
                                                     TypeAttributes.Class | TypeAttributes.Sealed | TypeAttributes.Public,
                                                     baseType,
                                                     new[] { typeof(TService) });
                var constructor = proxyType.DefineConstructor(MethodAttributes.Public,
                                                              CallingConventions.HasThis,
                                                              new[] { typeof(ServiceEndpoint)});
                var il = constructor.GetILGenerator();
                il.Emit(OpCodes.Ldarg_0);
                il.Emit(OpCodes.Ldarg_1);
                il.Emit(OpCodes.Call, baseType.GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance,
                                                              null,
                                                              new[] {typeof(ServiceEndpoint)},
                                                              null));
                il.Emit(OpCodes.Ret);

                var interfaces = FlattenInterfaces(typeof(TService)).ToList();
                foreach (var interfaceType in interfaces)
                {
                    BuildInterfaceMethods(typeof(TService), proxyType, interfaceType);
                } 
```

This creates a `ClientBase<IService>` descendent, which also implements `IService`. The interface implementation (built via BuildInterfaceMethods) routes each method call through the protected Channel property provided by ClientBase. The emitted class is the equivalent of this:

```
 public sealed class ModelRepositoryProxy : ClientBase<IModelRepository>, IModelRepository
    {
        //Constructor omitted for brevity...
        ModelDescriptor IModelRepository.GetDescriptor(ModelHandle model)
        {
            return Channel.GetDescriptor(model);
        }
    } 
```

* * *

I ended up using a solution outlined in [this answer](https://stackoverflow.com/questions/3840435/wcf-client-having-problems-recognizing-serviceknowntypes), by calling the IDesign `AddGenericResolver` on the client for each service known type shortly after constructing it. This registers a DataContractSerializerOperationBehavior that knows how to resolve the specified types. It's not clear to me why this is necessary to allow the client to resolve the types, but it works.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:20:43.247

It looks like you have problem on the client side, not on the server. The problem might be because of you have added `ServiceKnownType` attributes after you have generated the client.

# javascript - jquery 从 ajax 响应填充 iframe 字段

> ID：12333249
> 
> 赞同：1
> 
> 时间：2012-09-08T18:09:48.310
> 
> 标签：javascript, jquery, json, jsonp

对不起，乱码。在使用 alert 和 console.log 完成工作后，我意识到

```
var username = $('#username').value = response2; 
```

将以编程方式填充 jquery 字段。

```
$('#signup-button').click(function() {  
    callTheJsonp();
});

function callTheJsonp()
{    
    // the url of the script where we send the asynchronous call
    var url = "http://localhost:8888/ajax1.php?callback=parseRequest";
    // create a new script element
    var script = document.createElement('script');
    // set the src attribute to that url
    script.setAttribute('src', url);
    // insert the script in out page
    document.getElementsByTagName('head')[0].appendChild(script); 
}

function parseRequest(response){
    var response1 = response;       
          var re1='.*?';    // Non-greedy match on filler
          var re2='([\\w-+]+(?:\\.[\\w-+]+)*@(?:[\\w-]+\\.)+[a-zA-Z]{2,7})';    // Email Address 1

          var p = new RegExp(re1+re2,["i"]);
          var m = p.exec(response1);
          if (m != null)
          {
              var response2=m[1];
            //  document.write(""+email1.replace(/</,"&lt;")+"");
                myFunction(response2); //email address from parent without json encode
          }

    try // try to output this to the javascript console
    {

        console.log(response2);
    }
    catch(an_exception) // alert for the users that don't have a javascript console
    {
        alert('product id ' + response.item_id + ': quantity = ' + response.quantity + ' & price = ' + response.price);
    }

}
function myFunction(response2){//how would I populate the jquery objects with the value of response2, just substituting the varaible values breaks the code. 
    var username = $('#username').val().trim();
    var emailAddress = $('#emailAddress').val().trim();
    var password1 = $('#password1').val().trim();
    var password2 = $('#password2').val().trim();
    var postJson = {username: username,
        password1: password1,
        password2: password2};
    if (emailAddress) {
        postJson.emailAddress = emailAddress;
    }
    $('#spinner-container').append('<div id="spinner"><img src="/static/images/progress-spinner.gif" alt="in progress"/></div>');
    $.ajax({
        type: 'POST',
    url: '/signup/',
    data: JSON.stringify(postJson),
    dataType: 'json',
    contentType: 'application/json',
    success: function(response) {
            window.location.href = '/' + username + '/designs';
        },
    error: function(response) {
            SS.render_errors(JSON.parse(response.responseText));
            $('#spinner').remove();
        }
    });
        return false;
    }
}); 
```

在线：

```
function myFunction(response2){ 
```

我想用 response2 值填充 jquery 字段，这是一个剥离成字符串的 json 对象。任何帮助是极大的赞赏。

# database - assign_vertex_id 函数

> ID：12333251
> 
> 赞同：1
> 
> 时间：2012-09-08T18:10:10.720
> 
> 标签：database, postgresql, postgis, pgrouting

当我执行以下查询时；

```
SELECT Assign_vertex_id('ways', 0.00001, 'the_geom', 'gid') 
```

我收到以下错误；

```
NOTICE:  CREATE TABLE will create implicit sequence "vertices_tmp_id_seq" for serial column "vertices_tmp.id"
    CONTEXT:  SQL statement "CREATE TABLE vertices_tmp (id serial)"
    PL/pgSQL function "assign_vertex_id" line 15 at EXECUTE statement
    ERROR:  query string argument of EXECUTE is null
    CONTEXT:  PL/pgSQL function "assign_vertex_id" line 32 at EXECUTE statement

    ********** Error **********

    ERROR: query string argument of EXECUTE is null
    SQL state: 22004
    Context: PL/pgSQL function "assign_vertex_id" line 32 at EXECUTE statement 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:51:04.740

我知道这是一篇旧帖子，但我想提供一个答案，也许它会对某人有所帮助。

我找到[了这篇](http://www.mentby.com/Group/postgis-users/ultimate-solution-to-assignvertexid-error-bug.html)文章，它解决了我的问题。

更新：

所以我在这里复制文章中的相关信息：

以下代码的第一行是错误的：

```
FOR _r IN EXECUTE 'SELECT srid FROM geometry_columns WHERE f_table_name='''|| quote_ident(geom_table)||''';' LOOP
srid := _r.srid;
    END LOOP; 
```

并应修改为：

```
FOR _r IN EXECUTE 'SELECT srid FROM geometry_columns WHERE f_table_name='''|| geom_table||''';' LOOP
srid := _r.srid;
    END LOOP; 
```

这是因为“quote_ident(tablename)”是错误的，它在表名周围添加了一个额外的''。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:26:51.040

也许你应该尝试：

```
SELECT assign_vertex_id("ways", 0.00001, "the_geom", "gid"); 
```

[全球青年基金会](https://gis.stackexchange.com/questions/9861/how-does-assign-vertex-id-in-pgrouting-work)

# ios - 应用拒绝澄清 - 帮助解决实际问题是什么？

> ID：12333252
> 
> 赞同：1
> 
> 时间：2012-09-08T18:10:20.330
> 
> 标签：ios, iphone, ipad, appstore-approval

我第一次提交我的梦幻足球应用程序被拒绝了，原因如下，

> “12.3：简单的网络剪辑、内容聚合器或链接集合的应用程序可能会被拒绝 - 我们发现您的应用程序提供的体验与浏览内容或链接聚合器网站的体验没有足够的不同，正如应用程序所要求的那样商店审查指南。虽然您的应用程序可能有助于访问网站或来自一系列网站的内容，即使包含推送通知等功能，但它提供的体验与使用 Safari 并没有显着不同。此类应用程序包含的内容不够多原生 iOS 功能适合 App Store。我们鼓励您审查您的应用概念并评估您是否可以合并其他功能以增强用户体验。

因此，我添加了一些新功能，包括社交媒体共享和玩家跟踪功能，以便用户搜索/选择多个玩家并在整个应用程序中突出显示那些最喜欢的玩家。然后我重新提交了应用程序并再次被拒绝，原因如下，

> 请记住，Apple 和 Apple 客户非常重视用户界面和应用程序提供的体验，并且具有很高的标准。应用程序应该引人入胜且令人兴奋，使用户能够做他们以前无法做到的事情；或者以他们以前无法做到或比以前做得更好的方式做某事。应用程序应该特定于 iOS 平台，以充分利用 iOS 来提供强大的用户体验。”

我已联系 Apple，但尚未收到任何反馈。我对更新应用程序并重新提交它应该做什么感到困惑。归根结底，他们关心的是什么？是从我们的网络服务器中提取信息吗？添加的功能是否足够，但现在他们不喜欢 UI（如果是，为什么）？该应用程序对 iPhone 和 iPad 是通用的，并且它们仅在第二次拒绝中包含了 iPad 的屏幕截图作为参考。我没有遇到“糟糕的 UI”问题，因为屏幕截图引用了两个表格视图，其中我显示了文章和新闻项目的图像、标题和描述。对于用户来说，它非常简单、直接且易于阅读。他们还包括我的球员跟踪视图，我允许用户选择他们最喜欢的球员，他们可以搜索，

我查看了许多一般新闻和梦幻足球应用程序，它们都实现了非常相似的表格视图和滚动视图来显示他们的数据，这些数据也是从他们的网络服务器中提取的。仅仅是因为我的公司名称不是 yahoo 或 espn 吗？我也不在我的应用程序中使用任何网络视图。我们有成千上万的用户想要使用该应用程序，但我不知道我需要解决的真正问题是什么。

任何建议或您的经验反馈将不胜感激。谢谢。足球赛季已经开始了，但由于被拒绝，我的进度远远落后。

[http://www.fantasyfootballfreaks.com/app.php](http://www.fantasyfootballfreaks.com/app.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:24:29.877

> 应用程序应该引人入胜且令人兴奋，使用户能够做他们以前无法做到的事情；或者以他们以前无法做到或比以前做得更好的方式做某事。并且应用程序应该 **特定于 iOS 平台，以充分利用**iOS 来提供强大的用户体验。

和

> 该应用程序对 iPhone 和 iPad 是通用的，并且它们仅在第二次拒绝中包含了 iPad 的屏幕截图作为参考。

你写了。

> 我没有收到“糟糕的 UI”问题

悲伤...只要再看看上面它就在那里。

我至少会做 iPhone、iPhone Retina、iPad、iPad Retina 版本的设计。

Ofc 的“通用”Phonegap、Appcelerator 之类的生成应用看起来像垃圾。尝试嵌入一些 noce 图像作为设计，用于启动画面、应用程序图标、选项卡、按钮等。也许您也需要设计师的工作，而不是普通的 sdk 生成的按钮。

编辑添加屏幕截图，就像在新 iPad（视网膜）中一样 ![截屏](../Images/be8782d4b26c46e3efde336cb96e8b64.png)

那是有理由拒绝它的！提示：如果您有小图像并且您不想要动态缩略图图像大小，请尝试**仅针对 iPhone 发布。**但是你设置为通用，所以从 iPhone 3 到新的 iPad 分辨率全部！

如果您使用新闻采集器，请调整图像的大小以使其看起来清晰。+ 需要在按钮、表格、表格单元格、背景等方面进行设计工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:21:08.457

我希望你的应用是足球比赛，苹果团队评估你的应用，如果发现与其他应用相似，或者如果你使用在 Retina 显示屏上不太清晰的低质量图像，他们会拒绝，因为苹果非常关心以下事情.

1.  图形质量。
2.  与其他应用程序没有相似之处。
3.  您的代码无效。

以上是一般原则，此外我不知道你的应用程序有多好，如果可能的话发布截图..

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:54:34.443

我认为他们要么没有意识到您拥有该网页，并认为您只是从您在网络上找到的某个网站中提取数据，或者他们不高兴您在每个选项卡中都有一个炸毁的表格。也许如果您使用拆分视图（左侧有一个狭窄的表格，中间有一个详细视图），他们会认为 UI 足够类似于 iPad？

# node.js - 在 Node.js 中使用 Request/Formidable 解析多部分响应

> ID：12333258
> 
> 赞同：2
> 
> 时间：2012-09-08T18:11:17.710
> 
> 标签：node.js, rest, formidable

我正在使用 mikeal 的请求模块从 REST 服务器获取图像，然后尝试使用强大的解析多部分响应，但 form.parse 从未被调用。我做错了什么吗？

```
request.get({url: "http://ur-to-get", headers: headers, qs: query}, function(err, res, body) {
    var form = new formidable.IncomingForm();
    form.parse(res, function(err, fields, files) {
        console.log(util.inspect({fields: fields, files: files}));      
    });
}); 
```

标题看起来像：

```
transfer-encoding': 'chunked',
'content-type': 'multipart/parallel;
boundary=yz2C9C5D87FD6148a3986510BCACF917A82C9C5D87FD6148a3986510BCACF917A8ZY' }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:06:56.137

Formidable`parse`期望能够监视您传递`data`的参数上的事件`res`，但是由于您使用`request`的是回调，因此创建强大的回调将在所有数据都已发出和收集之后才会运行。这就是 request 能够将`body`参数传递给回调的方式。

request 模块有一个流，您可以将其用于数据，但它不会以 Formidable 想要的方式公开响应标头，因此我认为没有简单的方法来使用它。

因为你只是在做一个`GET`请求，我建议只使用 Node 的默认请求逻辑而不是`request`模块，尽管参数有点复杂。

```
http.get({
  host:'google.com',
  headers: headers,
  path: '/?' + querystring.stringify(qs)
}, function(res){
  var form = new formidable.IncomingForm();
  form.parse(res, function(err, fields, files) {
    console.log(util.inspect({fields: fields, files: files}));      
  });
}); 
```

# mysql - 以块的形式导出具有数亿条记录的 MySQL 表？

> ID：12333260
> 
> 赞同：1
> 
> 时间：2012-09-08T18:11:31.527
> 
> 标签：mysql, export

我有一个包含大量记录的 MySQL 表，有没有一种简单的方法可以将它导出为 .CSV 块，每块有一百万条记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T19:16:03.623

我会这样做（假设某些锁不会关闭您的应用程序，否则，请使用读取从属）：

```
mysqldump -u user -pPASS --skip-extended-insert --no-create-info --no-create-db --compact > your.sql 
```

这应该给你一个`INSERT`每行语句的文件。

然后使用[`split`](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)：

```
split -l 1000000 your.sql your-sql 
```

应该创建每个前缀为`your-sql`- 1,000,000 的文件。`split`可在 Linux、Unix 和 MacOSX 上使用。

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T18:17:02.163

不分块也可以，但这里有一个解决方案：

```
SELECT *
INTO OUTFILE 'file_0.csv' -- Change the filename here
FIELDS
  TERMINATED BY ','
  OPTIONALLY ENCLOSED BY '"'
  ESCAPED BY '\\'
  LINES TERMINATED BY '\n'
FROM table
WHERE id BETWEEN 0 AND 1000000 -- And change the range here 
```

请注意，您希望`where`在**索引**列上使用 a 来限制您的范围，否则您的数据库将获得*非常*沉重的负载。

# .net - Visual Studio 错误地报告未安装 Web 部署提供程序 (SQL Azure)

> ID：12333265
> 
> 赞同：5
> 
> 时间：2012-09-08T18:12:28.100
> 
> 标签：.net, sql, visual-studio, azure, web-deployment

当尝试在*发布 Web*对话框中启用*更新数据库*的情况下部署到 SQL Azure 时，我收到以下错误：

 *> 远程主机未安装数据库发布所需的 dbDacFx Web 部署提供程序。要了解有关此的更多信息，请访问此链接。
> 
> FWLink： http: [//go.microsoft.com/fwlink/ ?LinkId=246068](http://go.microsoft.com/fwlink/?LinkId=246068)

**使用：** Visual Studio 2012 RTM、SQL Server 2012、Windows 7 Ultimate

**项目类型：** MVC 4.0 (API)

**连接字符串：**

```
Server=tcp:SERVER.database.windows.net,1433;Database=DB_NAME;User ID=Me@Server;Password=PASSWORD;Trusted_Connection=False;Encrypt=True;Connection Timeout=30; 
```

**其他：**防火墙端口对我的测试 IP 开放。源数据库托管在本地实例上。目标数据库最初设置为新的“预览”模式，但我也在标准下复制了它。没有使用 EntityFramework（不允许“更新数据库”）。发布时禁用防火墙，没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:46:29.110

直到我们本周的最新更新，Windows Azure 网站才存在 dbDacFx。请现在再试一次，如果您继续收到错误，请告诉我。*

# math - cuda 双精度对数误差

> ID：12333268
> 
> 赞同：1
> 
> 时间：2012-09-08T18:12:35.910
> 
> 标签：math, cuda, logarithm, double-precision

我在 3.0 计算能力上使用 C for CUDA，并且必须使用内置的双精度对数函数。我发现为此我应该使用`double log(double x)`函数（[文档](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDA__MATH__DOUBLE_g28ce8e15ef5149c271eba95663becba2.html)）。但是，如果我在双精度范围内传递一个非常小的数字（例如`double x = 6.73E-42`）， `log(x)`函数返回`-Infinity`. 在 Java`Math.log()`函数中返回相同的值`-94.802`。这是 CUDA 数学库中的错误还是我有什么问题？

编辑：这是我在内核函数中使用的代码

```
#include "math.h"
extern "C"
__global__ void smallLog(double* in, int n)
{
   int i = blockIdx.x * blockDim.x + threadIdx.x;
   if (i<n){
      double x = in[i];
      in[i] = log(x);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:41:19.443

确保您正在为计算能力 3.0 ( `nvcc -arch sm_30`) 进行编译。

默认情况下，nvcc 编译为计算能力 1.0，它仅是单精度并且（正如其他人已经指出的那样）6.73E-42 在单精度和 log(0) = -Infinity 中为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:34:33.123

对于您的问题，答案应该是-94.802。

尝试拆分`log(6.73E-42)`为

`log(6.731E-20) + log(1E-22) = [(-44.145)+(-50.66)]=(-94.802)`

或者，如果你愿意，你可以分成更多的部分，最后添加。抱歉，我的设备不支持双精度。这是我能给出的答案。

# c++ - 手写递归上升解析器中的递归左递归

> ID：12333269
> 
> 赞同：5
> 
> 时间：2012-09-08T18:12:39.910
> 
> 标签：c++, parsing, c++11

我一直在编写一些递归上升解析器，而我一直在努力解决的问题之一就是左递归。在我看来，正确的递归可以递归地表达，就像

```
addExpr
    : primaryExpr '+' addExpr
    | primaryExpr; 
```

通过类似的东西

```
parseAddExpr() {
    auto x = parsePrimaryExpr();
    if (next_token == '+') {
        auto result = make_unique<PlusExpr>();
        result->lhs = x;
        result->rhs = parseAddExpr();
        return std::move(result);
    }
    return std::move(x);
} 
```

但是对于左递归，我能想出的只是一个while循环。

```
mulExpr
    : mulExpr '*' addExpr
    | addExpr;

parseMulExpr() {
    auto expr = parseAddExpr();
    while(next_token == '*') {
        auto mul_expr = make_unique<MulExpr>();
        mul_expr->lhs = std::move(expr);
        mul_expr->rhs = parseAddExpr();
        expr = std::move(mul_expr);
    }
    return std::move(expr);
} 
```

我的意思是，这个功能很好，但我一直觉得它应该有一个递归版本。是否可以以递归而不是迭代的方式实现左关联运算符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T19:04:54.590

您的功能是递归*下降*，而不是递归*上升*。您遇到的递归下降解析器与左递归的问题是众所周知和研究的。任何涵盖解析的编译器课程或教科书都将讨论问题和解决方法。

使用迭代是一种完全正常、有效的处理方式。 [例如，请参阅这些课程笔记](http://www.cs.utsa.edu/~wagner/CS3723/rdparse/rdparser.html)。在这些注释中，规则`T -> T '*' S | T '/' S | S`（即`mulExpr`添加了除法的规则）被转换为规则`T -> S { ('*' | '/') S }`，其中大括号`{...}`表示“零次或多次重复”。

## 更新

根据您的评论，我认为您对“递归下降”的含义和“递归上升”的含义有些困惑。

### 递归下降

递归下降的基本思想是为语法中的每个非终结符创建一个函数。对应于某个非终结符**A的函数的工作是尽可能完整地解析****A**的一个实例，并根据需要调用出现在文法中**A**产生式右侧的非终结符的函数。

因此，例如，您的语法具有`addExpr`以下两个产生式的非终结符：

```
addExpr -> primaryExpr '+' addExpr
addExpr -> primaryExpr 
```

因此，递归下降解析器将有一个函数 for`addExpr`尝试匹配其中一个产生式的右侧`addExpr`，并根据需要调用函数 for`primaryExpr`和`addExpr`（本身！），因为这些非终结符出现在`addExpr`的产生式中。

事实上，这正是你在你的`parseAddExpr`功能中所拥有的。它寻找一种方法来匹配其中一个`addExpr`产品，调用`parsePrimaryExpr`和`parseAddExpr`必要时。

### 递归上升

递归上升是一种（非常不常见的）实现 LR 解析的方式。LR 解析器有一个状态表，每个状态对应一行，每个终端对应一列。在递归上升解析器中，我们不将表表示为数据。相反，我们为每个状态创建一个函数，该状态的行在函数中体现为 switch 语句。

在 LR 解析器中，状态和非终结符之间或状态和产生式之间通常**没有**一一对应的关系。通常会有比生产更多的状态。每个状态代表产品中的一*组*位置。

### 你的解析器

查看您帖子中的函数，我没有看到任何证据表明您已经构建或体现了状态表。我看到的是一组直接对应于语法的非终结符的函数。这种对应是递归下降的标志。

此外，您在使用左递归产生式时遇到麻烦的事实是您使用递归下降的一个死胡同。LR 解析器不存在左递归问题，而递归下降解析器则存在问题。

# jquery - 日期选择器在 foucs 之后隐藏

> ID：12333272
> 
> 赞同：2
> 
> 时间：2012-09-08T18:12:57.457
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有 2 个文本框`date1`和`date2`('from', 'to')。

当用户从第一个文本框中选择一个日期时，第二个应该自动打开（在第一个隐藏之后）。我已经设置`$('#date2').focus`了第一个`onSelect`事件；它可以工作，但是在第二个日期选择器显示后，它会立即隐藏..[在这里检查](http://jsfiddle.net/dGRSC/)

有什么问题？和一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:26:30.083

找不到您的问题的确切解决方案，但似乎某些事件触发导致日期选择器关闭。如果您尝试`focus()`在超时后拨打电话，似乎可以正常工作（请参阅[this fiddle](http://jsfiddle.net/dGRSC/7/)）。
我不知道它是否适合您的需求，也许这可以帮助您确定导致问题的问题...

# windows - 使用 npm 安装 postgres 时出现问题

> ID：12333277
> 
> 赞同：2
> 
> 时间：2012-09-08T18:14:33.767
> 
> 标签：windows, node.js, postgresql, npm, node-gyp

我在我的 Windows 机器上通过 npm安装[pg时遇到问题。](https://github.com/brianc/node-postgres)

它抱怨 python，但我已将 python 添加为 env。多方面的变数都无济于事。

这些都是我尝试声明环境的所有方式。变种。

*   `C:/Program Files/Python`
*   `"C:/Program Files/Python"`
*   `C:/Program Files/Python/python.exe`
*   `"C:/Program Files/Python/python.exe"`

这是错误：

```
D:\Projects\GitHub\inmotion>npm -g install pg
npm http GET https://registry.npmjs.org/pg
npm http 200 https://registry.npmjs.org/pg
npm http GET https://registry.npmjs.org/generic-pool/1.0.12
npm http 200 https://registry.npmjs.org/generic-pool/1.0.12
npm http GET https://registry.npmjs.org/generic-pool/-/generic-pool-1.0.12.tgz
npm http 200 https://registry.npmjs.org/generic-pool/-/generic-pool-1.0.12.tgz

> pg@0.8.3 install C:\Users\Guzza\AppData\Roaming\npm\node_modules\pg
> node-gyp rebuild || (exit 0)

C:\Users\Guzza\AppData\Roaming\npm\node_modules\pg>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable ""C:/Program Files/Python"", you can set the PYTHON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:95:14)
gyp ERR! stack     at C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:59:11
gyp ERR! stack     at Object.oncomplete (fs.js:297:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Users\Guzza\AppData\Roaming\npm\node_modules\pg
gyp ERR! node -v v0.8.4
gyp ERR! node-gyp -v v0.6.1
gyp ERR! not ok
pg@0.8.3 C:\Users\Guzza\AppData\Roaming\npm\node_modules\pg
└── generic-pool@1.0.12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:49:49.213

尝试`C:\PROGRA~1\Python`作为您的环境条目，大概是`PYTHON`环境变量。如果安装时的短[名称](http://blogs.msdn.com/b/adioltean/archive/2005/01/27/362105.aspx)`Program Files`不同，请检查：

1.  开始-> 运行或按住 windows 键并按 R
2.  `cmd.exe` **进入**
3.  `cd "Program Files"` **进入**
4.  `dir`

如果我没记错的话，短名称应该列在目录的长名称旁边。

请将此作为错误报告给维护您正在使用的软件的任何人，他们需要修复其代码以正确处理路径中的空格。

# foursquare - Foursquare 连接的应用程序 - 应用程序场所作为详细网址？

> ID：12333278
> 
> 赞同：1
> 
> 时间：2012-09-08T18:15:00.157
> 
> 标签：foursquare

我正在构建一个四方连接的应用程序，我想在用户签到后向他/她推荐一个替代场所。

我正在使用 explore 端点来建议一个替代地点，但我希望我的签到回复中的 url 将用户引导到foursquare应用程序内的那个地点页面。

文档说明[您可以使用多种协议](https://developer.foursquare.com/docs/checkins/reply)，http://、sms://、foursquare:// 等。

[在文档的其他地方](https://developer.foursquare.com/resources/client#appintegration)，foursquare 提供了用于访问应用程序内部特定视图的 uri，但请注意，如果您的客户端与平台无关以使用 Android 意图地址，因为它们可以很好地回退到其他平台（iOS、WP 等）上的移动网页）。

我在使用 Android Intent 时遇到的问题是，当点击详细 URL 时，用户会点击四方移动 Web 登录屏幕，这是非常糟糕的用户体验。

鉴于我的foursquare 连接应用程序是一个网络应用程序而不是本机应用程序，我无法传递iPhone URL，因为它可能不会在非iOS 设备上执行任何操作。我也无法知道我的用户使用的是什么设备（POST 请求来自foursquare，因此没有用户代理字符串可以帮助我）。

有没有办法让签到回复 url 将用户引导到foursquare应用程序内的场地页面（用于场地ID）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:05:53.127

如果您知道您在foursquare 应用程序中向用户显示内容，那么使用foursquare:// 域是完全合理的（因为不需要“未安装foursquare 应用程序”后备）。已发布的自定义域 URL 适用于 android、iOS 和 blackberry。

要链接到foursquare 内的场地屏幕，请使用foursquare://venues/VENUE_ID

# c# - 在 MonoTouch 中使用 Redpark SDK

> ID：12333279
> 
> 赞同：1
> 
> 时间：2012-09-08T18:15:08.107
> 
> 标签：c#, xamarin.ios, external-accessory

我正在尝试将 MonoTouch 与 Redpark SDK 一起使用，并在 C# 中复制一个用 Objective-C 编写的 Redpark 串行电缆示例程序（我可以在 Xcode 中完美运行）：

[https://github.com/bjepson/iPhone-Arduino-Simple-Switch](https://github.com/bjepson/iPhone-Arduino-Simple-Switch)

我使用了在这里找到的现有绑定：

[https://github.com/mono/monotouch-bindings/tree/master/Redpark](https://github.com/mono/monotouch-bindings/tree/master/Redpark)

并创建了一个 .dll 用于我的项目。在我的项目中，一切进展顺利（我能够让 cableConnected 和 cableDisconnected 委托回调正常工作）直到尝试编写。当我尝试使用**Write**函数时，程序因 SIGSEGV 崩溃：

```
Stacktrace:

 at MonoTouch.RedPark.RscMgr.Write (int16,uint) <IL 0x00010, 0x00113>
  at tester2.tester2ViewController.toggleLED (MonoTouch.Foundation.NSObject) [0x00069] in /Users/salgarcia/Projects/tester2/tester2/tester2ViewController.cs:57
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at tester2.Application.Main (string[]) [0x00000] in /Users/salgarcia/Projects/tester2/tester2/Main.cs:17
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

0   tester2                             0x001c2a25 mono_handle_native_sigsegv + 244
1   tester2                             0x001af065 mono_sigsegv_signal_handler + 172
2   libsystem_c.dylib                   0x329f17ed _sigtramp + 48
3   tester2                             0x00003a63 __inline_memcpy_chk + 30
4   tester2                             0x00003a63 __inline_memcpy_chk + 30
5   tester2                             0x00004011 -[RscMgr writeRscMessage:Length:MsgData:] + 220
6   tester2                             0x00004131 -[RscMgr write:Length:] + 100
7   tester2                             0x000438d8 wrapper_managed_to_native_ApiDefinition_Messaging_int_objc_msgSend_short_UInt32_intptr_intptr_int16_uint + 256
8   tester2                             0x001aa024 tester2_tester2ViewController_toggleLED_MonoTouch_Foundation_NSObject + 680
9   tester2                             0x000f76c0 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
10  tester2                             0x001b0843 mono_jit_runtime_invoke + 1054
11  tester2                             0x0022c40f mono_runtime_invoke + 90
12  tester2                             0x001ad14d native_to_managed_trampoline_tester2_tester2ViewController_toggleLED + 220
13  CoreFoundation                      0x3553f3fd -[NSObject performSelector:withObject:withObject:] + 52
14  UIKit                               0x33034e07 -[UIApplication sendAction:to:from:forEvent:] + 62
15  UIKit                               0x33034dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
16  UIKit                               0x33034da1 -[UIControl sendAction:to:forEvent:] + 44
17  UIKit                               0x33034b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
18  Foundation                          0x350ff933 __NSFireDelayedPerform + 414
19  CoreFoundation                      0x355b9a33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
20  CoreFoundation                      0x355b9699 __CFRunLoopDoTimer + 364
21  CoreFoundation                      0x355b826f __CFRunLoopRun + 1206
22  CoreFoundation                      0x3553b4a5 CFRunLoopRunSpecific + 300
23  CoreFoundation                      0x3553b36d CFRunLoopRunInMode + 104
24  GraphicsServices                    0x371d7439 GSEventRunModal + 136
25  UIKit                               0x33047cd5 UIApplicationMain + 1080
26  tester2                             0x0001fcc4 wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
27  tester2                             0x001a9744 tester2_Application_Main_string__ + 152
28  tester2                             0x000f76c0 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
29  tester2                             0x001b0843 mono_jit_runtime_invoke + 1054
30  tester2                             0x0022c40f mono_runtime_invoke + 90
31  tester2                             0x0022f123 mono_runtime_exec_main + 306
32  tester2                             0x00232a4f mono_runtime_run_main + 482
33  tester2                             0x001b529f mono_jit_exec + 94
34  tester2                             0x00271c70 main + 2216
35  tester2                             0x00004860 start + 40

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

我正在寻找可能是什么问题的输入（即串行端口实际上没有打开，我可能为“ **txbuffer** ”使用了错误的数据类型，绑定没有正确实现，我没有正确设置委托等）对此的任何反馈将不胜感激！

作为参考，这里是我的 C#/MonoTouch 实现旁边的 Objective-C 实现：

**Redpark 库的 Objective-C ".h" 文件**

```
#import <Foundation/Foundation.h>
#import <ExternalAccessory/ExternalAccessoryDefines.h>
#import <ExternalAccessory/EAAccessoryManager.h>
#import <ExternalAccessory/EAAccessory.h>
#import <ExternalAccessory/EASession.h>

#include "redparkSerial.h"

enum
{   
    kMsrCts = 0x01,
    kMsrRi =  0x02,
    kMsrDsr = 0x04,
    kMsrDcd = 0x08,

};

enum {
    kRSC_StreamBufferSize = 4096,
    kRSC_MaxMessageDataLength = 230,
    kRSC_SerialReadBufferSize = 4096,
    kRsc_TxFifoSize = 256,
    kRSC_NoPasscode = 0
};

typedef enum DataSizeType
{
    kDataSize7 = SERIAL_DATABITS_7,
    kDataSize8 = SERIAL_DATABITS_8
} DataSizeType;

typedef enum ParityType
{
    kParityNone = SERIAL_PARITY_NONE,
    kParityOdd = SERIAL_PARITY_ODD,
    kParityEven = SERIAL_PARITY_EVEN
} ParityType;

typedef enum StopBitsType
{
    kStopBits1 = STOPBITS_1,
    kStopBits2 = STOPBITS_2
} StopBitsType;

@protocol RscMgrDelegate;

@interface RscMgr : NSObject <NSStreamDelegate> {

    id <RscMgrDelegate> theDelegate;

    // EA api variables
    EASession *theSession;
    EAAccessory *theAccessory;
    NSArray *supportedProtocols;
    NSString *connectedProtocol;

    // rsc port control/info structures
    serialPortConfig portConfig;
    serialPortStatus portStatus;
    serialPortControl portControl;

    // EASession stream handling
    // for collecting RSC Messages
    unsigned char *rxStreamBuffer;
    int rxCount;
    int rxCountTotal;
    int txCountTotal;
    int rxRemain;
    int readLen;

    unsigned char *txStreamBuffer;
    int txIn;
    int txOut;
    int txStreamEmpty;

    // internal dtr and rts state bits
    int dtrState;
    int rtsState;   

    // serial data buffer
    // for collecting serial bytes received from the serial port
    UInt8 *serialReadBuffer;
    int serialReadIn;
    int serialReadOut;
    int serialReadBytesAvailable;

    BOOL encodingEnabled;   
    UInt32 thePasscode;

}

- (void) setDelegate:(id <RscMgrDelegate>) delegate;

// Initializes the RscMgr and reigsters for accessory connect/disconnect notifications. 
- (id) init;

// establish communication with the Redpark Serial Cable.  This call will also
// configure the serial port based on defaults or prior calls to set the port config
// (see setBaud, setDataSize, ...)
- (void) open;

// simple serial port config interface
// can be called anytime (even after open: call)
- (void) setBaud:(int)baud;
- (void) setDataSize:(DataSizeType)dataSize;
- (void) setParity:(ParityType)parity;
- (void) setStopBits:(StopBitsType)stopBits;

// read write serial bytes
- (int) write:(UInt8 *)data Length:(UInt32)length;
- (int) read:(UInt8 *)data Length:(UInt32)length;
- (int) getReadBytesAvailable;

/* 
 returns a bit field (see redparkSerial.h)
 0-3 current modem status bits for CTS, RI, DSR, DCD, 4-7 previous modem status bits

 MODEM_STAT_CTS  0x01
 MODEM_STAT_RI   0x02
 MODEM_STAT_DSR  0x04
 MODEM_STAT_DCD  0x08
 */
- (int) getModemStatus;

// returns true if DTR is asserted
- (BOOL) getDtr;

// returns true if RTS is asserted
- (BOOL) getRts;

// set DTR state 
- (void) setDtr:(BOOL)enable;

// set RTS state
- (void) setRts:(BOOL)enable;

// advanced (full) serial port config interface (see redparkSerial.h)
- (void) setPortConfig:(serialPortConfig *)config RequestStatus:(BOOL)reqStatus;
- (void) setPortControl:(serialPortControl *)control RequestStatus:(BOOL)reqStatus;
- (void) getPortConfig:(serialPortConfig *) portConfig;
- (void) getPortStatus:(serialPortStatus *) portStatus;

// advanced advanced
// write a raw message
- (int) writeRscMessage:(int)cmd Length:(int)len MsgData:(UInt8 *)msgData;

// GPS cable only - requires loopback connector
- (void) testGpsCable;

@end

@protocol RscMgrDelegate  <NSObject>

// Redpark Serial Cable has been connected and/or application moved to foreground.
// protocol is the string which matched from the protocol list passed to initWithProtocol:
- (void) cableConnected:(NSString *)protocol;

// Redpark Serial Cable was disconnected and/or application moved to background
- (void) cableDisconnected;

// serial port status has changed
// user can call getModemStatus or getPortStatus to get current state
- (void) portStatusChanged;

// bytes are available to be read (user calls read:)
- (void) readBytesAvailable:(UInt32)length;

@optional
// called when a response is received to a getPortConfig call
- (void) didReceivePortConfig;

// GPS Cable only - called with result when loop test completes.  
- (void) didGpsLoopTest:(BOOL)pass;

@end 
```

**Objective-C ".h" 文件**

```
#import <UIKit/UIKit.h>
#import "RscMgr.h"

#define BUFFER_LEN 1024

@interface HelloArduinoViewController : UIViewController <RscMgrDelegate> {

RscMgr *rscMgr;
UInt8 rxBuffer[BUFFER_LEN];
UInt8 txBuffer[BUFFER_LEN];

UISwitch *toggleSwitch;
}

@property (nonatomic, retain) IBOutlet UISwitch *toggleSwitch;
- (IBAction)toggleLED:(id)sender;

@end 
```

**Objective-C ".m" 文件**

```
#import "HelloArduinoViewController.h"

@implementation HelloArduinoViewController
@synthesize toggleSwitch;

- (void)dealloc
{
    [toggleSwitch release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
    [super viewDidLoad];
    rscMgr = [[RscMgr alloc] init]; 
    [rscMgr setDelegate:self];

}

- (void)viewDidUnload
{
    [self setToggleSwitch:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)toggleLED:(id)sender {
    if (toggleSwitch.on) { // check the state of the button
        txBuffer[0] = (int) '1';
    } else {
        txBuffer[0] = (int) '0';
    }

    // Send 0 or 1 to the Arduino
    [rscMgr write:txBuffer Length:1];        
}

#pragma mark - RscMgrDelegate methods

- (void) cableConnected:(NSString *)protocol {
    [rscMgr setBaud:9600];
    [rscMgr open]; 
}

- (void) cableDisconnected {

}

- (void) portStatusChanged {

}

- (void) readBytesAvailable:(UInt32)numBytes {
}

- (BOOL) rscMessageReceived:(UInt8 *)msg TotalLength:(int)len {
    return FALSE;    
}

- (void) didReceivePortConfig {
}

@end 
```

**我的 C#/MonoTouch 实现**

```
using System;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using MonoTouch.RedPark;

namespace tester2
{
    public partial class tester2ViewController : UIViewController
    {
        static RscMgr rscMgr;
        MyRedparkDelegate delegate1;

        short[] rxbuffer = new short[1024];
        short[] txbuffer = new short[1024];

        public tester2ViewController () : base ("tester2ViewController", null)
        {
        }

        public override void DidReceiveMemoryWarning ()
        {
            base.DidReceiveMemoryWarning ();
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            rscMgr = new RscMgr();
            delegate1 = new MyRedparkDelegate ();
            rscMgr.SetDelegate(delegate1);
        }

        public override void ViewDidUnload ()
        {
            base.ViewDidUnload ();
            ReleaseDesignerOutlets ();
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }

        partial void toggleLED (NSObject sender)
        {
            if(toggleSwitch.On) {
                txbuffer[0] = (int) '1';
            } else {
                txbuffer[0] = (int) '0';
            }
            rscMgr.Write (txbuffer[0], 1);
        }

        public class MyRedparkDelegate : RscMgrDelegate
        {
            public MyRedparkDelegate ()
            {
            }
            public override void CableConnected (string protocol)
            {
                rscMgr.SetBaud (9600);
                rscMgr.Open ();
            }
            public override void CableDisconnected ()
            {
            }
            public override void PortStatusChanged ()
            {
            }
            public override void ReadBytesAvailable (uint length)
            {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:59:13.133

问题在我的MonoTouch实现代码中解决了，发现需要通过引用来传递正在写入的数据，所以我把上面代码中的Write改成了

```
 rscMgr.Write(ref txbuffer[0],1); 
```

它按预期工作。它有助于彻底阅读 SDK 下载随附的 Redpark 串行电缆 SDK 用户指南。

# c# - 字符串到文本框加上新行？

> ID：12333282
> 
> 赞同：0
> 
> 时间：2012-09-08T18:15:55.337
> 
> 标签：c#, .net, winforms

```
string test ="0123456789 0123456789 0123456789 0123456789 01234567890";
TextBox.Text = test; 
```

问题是字符串没有跳入新行，

```
|------------------------------|
|                              |
|                              |
|0123456789 0123456789 01234567|89 0123456789 01234567890
|                              |
|                              |
|<----------<------>---------->| 
```

如何解决？

1）字符串从左上角开始。

2) 字符串不能越过盒子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:17:23.120

您需要从文本框的属性中启用多行选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T18:18:23.153

文本框上有多行属性。默认情况下，它呈现为单行的 INPUT，使用多行时，它将呈现为 TEXTAREA。

请注意，您需要两者`TextMode = TextBox.MultiLine`和在该元素上，如此[处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.wrap)`Wrap=true;`所示。

```
 <asp:TextBox ID="Comment"
       TextMode="MultiLine"
       Columns="50"
       Rows="5"
       runat="server"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T18:19:45.690

简单地说，你可以这样做：

```
 TextBox.Multiline = true; 
```

如果你想在多行文本框中添加垂直滚动条，你可以这样做；

```
TextBox.ScrollBars = ScrollBars.Vertical; 
```

# ruby-on-rails - 为什么我无法访问 ruby 中的实例变量？

> ID：12333285
> 
> 赞同：2
> 
> 时间：2012-09-08T18:16:23.353
> 
> 标签：ruby-on-rails, ruby

好的，所以我有这个简单的课程

```
class Test
  @var = 99

  def initialize(var2)
    @var2 = var2
  end 

  attr_reader :var, :var2
end

> t = Test.new(100)
 => #<Test:0x007f9b8118ac30 @var2=100> 
> t.var2
 => 100 
> t.var
 => nil 
```

为什么最后一个`t.var`语句返回 nil 而我希望它返回 99 因为`@var = 99`类的顶部。也许我对范围的想法不是 100 正确......关于这个的任何想法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T18:19:07.837

请参阅代码中的注释。

```
class Test
  @var = 99 # self is Test class at this point. You're defining 
            # an instance variable on a class instance.

  def initialize(var2)
    @var2 = var2 # This is normal instance variable.
  end 

  attr_reader :var, :var2
end

t = Test.new(100)
t.var # => nil
t.var2 # => 100

# don't bother with creating an accessor and get the ivar from Test directly.
Test.instance_variable_get(:@var) # => 99 
```

# macos - 重定向到安全站点时未加载 Webview (https://)

> ID：12333286
> 
> 赞同：0
> 
> 时间：2012-09-08T18:16:29.477
> 
> 标签：macos, https, response.redirect

我有一个 Webview，我首先在其中加载一个 URL，该 URL 将自动重定向到[https://secure.authorize.net/gateway/transact.dll](https://secure.authorize.net/gateway/transact.dll)。

但是委托功能

两者都不

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge; 
```

也不

```
-(NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse; 
```

打电话。所以我只有一个空白页。请帮助我。

我正在使用这个函数来加载我的初始 URL

```
 myReq=[NSURLRequest requestWithURL:[NSURL URLWithString:myStr]];
    NSURLConnection *myConn=[NSURLConnection connectionWithRequest:myReq delegate:self];

    if(myConn){
        webdata = [[NSMutableData alloc] init];
    }

    -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [webdata appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    [[myWebView mainFrame] loadData:webdata MIMEType: @"text/html" textEncodingName: @"UTF-8" baseURL:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:59:52.447

我通过在服务器无法加载时重新发送请求来解决此问题。

```
- (void)webView:(WebView *)sender didFailProvisionalLoadWithError:(NSError *)error forFrame:(WebFrame *)frame{
NSLog(@"%@", [error description]);

NSURLConnection *myConnn=[NSURLConnection connectionWithRequest:[[[sender mainFrame] provisionalDataSource] request] delegate:self];

 if(myConnn)
    NSLog(@"I got it"); 
```

}

现在调用了委托函数。我可以信任这里的服务器。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{
NSURLProtectionSpace *space = [challenge protectionSpace];
[space serverTrust];
[challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge]; 
```

}

# node.js - Node.js 获取 Twitter 流 API - EADDRNOTAVAIL

> ID：12333289
> 
> 赞同：1
> 
> 时间：2012-09-08T18:16:55.033
> 
> 标签：node.js, authentication, twitter

我在 node.js 中编写了以下代码来访问 Twitter 流 API。如果我`curl`使用下面的 URL，它可以工作。但是，我无法让它与我的代码一起使用。

```
var https = require('https');

https.request('https://USERNAME:PASSWORD@stream.twitter.com/1.1/statuses/sample.json', function(res) {
  res.on('data', function(chunk) {
    var d = JSON.parse(chunk);
    console.log(d);
  });
}); 
```

但我收到以下

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: connect EADDRNOTAVAIL
    at errnoException (net.js:642:11)
    at connect (net.js:525:18)
    at Socket.connect (net.js:589:5)
    at Object.<anonymous> (net.js:77:12)
    at new ClientRequest (http.js:1073:25)
    at Object.request (https.js:80:10)
    at Object.<anonymous> (/Users/jordan/Projects/twitter-stream/app.js:3:7)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31) 
```

如果有人可以提供替代解决方案，或者向我解释为什么这不起作用，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:49:08.810

我最近遇到了同样的问题。这是解决方案

```
 var https = require('https');   
 var options = {   
   host : 'stream.twitter.com',   
   path : '/1.1/statuses/filter.json?track=bob',    
   method : 'GET',  
   headers : {   
   "Authorization": "Basic "+new Buffer("userName:passwd").toString("base64")
  }   
 };
 var request = https.request(options,function(response){   
   var body = '';
   response.on("data",function(chunk){    
    var tweet = JSON.parse(chunk);  
    console.log(tweet.text);  
  });  
 });  
 request.end(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:28:02.963

1）正如 ebohlman 已经说过的那样，https.request 将选项对象作为第一个参数。

```
http://nodejs.org/api/https.html#https_https_request_options_callback 
```

2）您的 JSON.parse 很可能会失败，因为“数据”事件将在每个块上发出，并且响应可能跨越更多块，因此请等到响应结束。

```
var data = ""
res.on('data',function(chunk){
   data+=chunk
})
res.on('end',function(){
  try  {
     var parsed = JSON.parse(data)
  } catch(e) {
     console.log('failed to parse...',e)
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T03:35:32.403

`https.request()`想要一个选项对象作为它的第一个参数，而不是字符串 URL。但是，您最好使用 mikeal 的请求库，它确实采用字符串 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T13:35:15.437

jst尝试通过其ID杀死进程节点`killall node`或`ps -aux|grep node`通过其ID杀死进程。然后它将起作用。是的，如果您在Linux上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T00:10:44.100

我遇到了同样的问题，问题是我使用的是旧版本的 Nodejs（v0.6.19），在该版本中，[http.get](http://nodejs.org/docs/v0.6.19/api/http.html#http_http_get_options_callback)需要第一个参数作为至少具有主机和路径属性的选项对象。在较新的版本中，您可以简单地给出 url 字符串。

```
http.get({host:'www.google.com',path:'/index.html'}, function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

# c++ - 在智能指针出现之前

> ID：12333292
> 
> 赞同：2
> 
> 时间：2012-09-08T18:17:12.217
> 
> 标签：c++, dynamic-allocation

在智能指针（能够获取动态区域中的资源的所有权并在使用后释放它们）出现之前，我想知道当作为参数传递给采用资源指针的函数时，如何对动态创建的对象进行簿记。

通过簿记，我的意思是如果有一个“新的”，那么在稍后的某个时候应该有一个“删除”跟随它。否则，程序将遭受内存泄漏。

这是一个示例，其中 B 是一个类，而 void a_function(B*) 是第三方库函数：

```
void main() {

  B* b = new B(); // line1

  a_function(b);  // line2

  ???             // line3
} 
```

我在第 3 行做什么？我是否假设第三方功能已经处理了内存的取消分配？如果它没有并且我假设它有，那么我的程序就会出现内存泄漏。但是，如果它取消分配 b 占用的内存并且我也在 main() 中这样做以便安全起见，那么 b 实际上最终会被释放两次！我的程序会因为双释放错误而崩溃！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:28:16.397

启用“智能指针”的两个核心语言特性，以及更普遍的*范围绑定资源管理*（SBRM，有时也被拟声称为 RAII，“资源获取即初始化”）是：

*   析构函数（自动`goto`）

*   无约束变量（每个对象都可以作为变量出现）

这两者都是 C++ 的基本核心特性，并且一直是该语言的一部分。因此，智能指针在 C++ 中一直是可实现的。

[顺便说一句，这两个特性意味着在 C`goto`中*必须*以系统的、通用的方式处理资源分配和多次退出，而在 C++ 中它们基本上是*被禁止的。*C++`goto`融入核心语言。]

与任何语言一样，人们需要很长时间才能学习、理解和采用“正确”的习语。尤其是考虑到 C++ 与 C 的历史联系，许多曾经和正在从事 C++ 项目的程序员都来自 C 背景，并且可能发现坚持熟悉的模式更自在，尽管这些模式仍然受到 C++ 的支持。不可取（“只需替换`malloc`所有人`new`，我们就可以发货了”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T18:30:22.880

*好的，不要讨论为什么这无关紧要，无论如何你都应该使用智能指针......*

在所有其他条件相同的情况下（没有自定义分配器或任何类似的东西），规则是**分配内存的人应该解除分配内存**。第三方函数，例如您的示例中的函数，**绝对不**应该释放它没有创建的内存，主要是因为 1）这通常是不好的做法（可怕的代码气味），更重要的是 2）*它不知道如何内存被分配以开始*。想象一下：

```
int main()
{
    void * memory = malloc(sizeof(int));
    some_awesome_function(memory);
}

// meanwhile, in a third-party library...

void some_awesome_function(void * data)
{
    delete data;
} 
```

如果`malloc/free`并且`new/delete`正在使用不同的分配器进行操作，会发生什么？您正在查看某种潜在错误，因为用于的分配器`delete`不知道如何处理由`malloc`分配器分配的内存。你**永远不会** `free`记得那是`new`'d，你永远不会`delete`记得那是`malloc`'d。曾经。

至于第一点，您必须询问如果第三方库释放内存并且您尝试（或未尝试）手动释放会发生什么，这正是不应该这样做的原因: 因为你根本没有办法知道。因此，公认的做法是，负责分配的代码部分也负责解除分配。如果每个人都遵守这条规则，那么每个人都可以跟踪他们的记忆，没有人会猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:07:26.310

智能指针是一种简化策略实施的方法。使用了相同的策略（将删除的责任归于一个所有者或一组所有者）。您只需记录政策，不要忘记采取相应行动。智能指针既是记录所选策略的一种方式，也是同时实施它的一种方式。在您的情况下，您查看了 a_function 文档并看到了它的要求。或者，如果没有记录，则进行或多或少有根据的猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T19:12:43.593

> 我在第 3 行做什么？

您查阅`a_function`. 通常的规则是函数对所有权或生命周期*没有任何*作用，除非它们说它们这样做。通过引用 C API，可以清楚地确定对此类文档的需求，其中智能指针不可用。

所以，如果它没有说它删除了它的参数，那么它就没有。如果它没有说它在返回时间之后保留其参数的副本，直到某个其他指定时间，那么它没有。

如果它说了什么，你就采取相应的行动，如果它什么也没说，那么你`delete b`（或者最好你改写`B b; a_function(&b);`- 观察通过不破坏对象，函数不需要关心你如何*创建*对象，你可以自由决定）。

希望它明确地说出它所说的任何内容，但是如果您不走运，它会通过某种约定来说明，即 API 中的某些类型的函数拥有其参数所引用的对象的所有权。例如，如果它被调用`set_global_B_instance`，那么您可能会偷偷怀疑它会保留该指针，并在设置后立即删除它是不明智的。

如果它没有说任何东西，但是您的代码最终出现了错误，并且您最终发现`a_function`调用`delete`了它的参数，那么您会找到记录的任何人，然后将其`a_function`打~~在鼻子~~上，然后在他们的文档上提交错误。

通常那个人就是你自己，在这种情况下，试着吸取教训——记录对象所有权。

除了帮助避免编码错误外，智能指针还为在存在所有权问题的情况下接受或返回指针的函数提供了某种程度的自文档。在没有自我记录的情况下，您有实际的文档。例如，如果一个函数返回`auto_ptr`而不是原始指针，则表明您`delete`需要在指针上调用。你可以让它`auto_ptr`为你做这件事，或者你可以将它分配给其他一些智能指针，或者你可以`release()`自己管理指针。您调用的函数无关紧要，也不需要记录任何内容。如果一个函数返回一个原始指针，那么它必须告诉你指针所指对象的生命周期，因为你无法猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T21:13:30.430

如果没有智能指针，程序员通常采用**分配的实体负责解除分配**的规则。

在您的示例中，您的第三方函数删除传递给它的指针通常被认为是不良行为（尽管是有效代码），并且您应该在第 3 行将其删除。

**这是程序员之间的社会契约**，编译器通常不会强制执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T18:42:57.207

我看到很多人指出智能指针从 C++ 开始就已经存在。但事实是，即使在今天，并非所有代码都在使用它们。一种常见的方法是手动进行引用计数：

```
void main() {
  B* b = createB(); //refcount = 1 
  a_function(b);
  releaseB(b); //--refcount
}

void a_function(B* b) {
  acquireB(b); //refcount++ when we store the reference somewhere
  ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-08T19:18:28.287

答案在第三方功能的文档中`a_function()`。可能的情况可能是：

*   该函数只使用对象中的数据，并且在函数调用结束后不会保留对它的引用（例如：）`printf`。您可以在函数调用结束后安全地删除该对象。
*   该函数（在某些内部库对象中）将保留对该对象的引用，直到稍后调用（比如说 to `b_function()`）。您负责删除该对象，但必须保持它处于活动状态，直到您调用`b_function`（例如：）`strtok`。
*   该函数获取对象的所有权，并且不保证对象在被调用后存在（例如：）`free()`。在这种情况下，文档通常会指定如何创建对象 ( `malloc`, `new`, `my_library_malloc`)。

这些只是可能的许多不同行为的一些示例，但只要函数记录得足够好，您就应该能够做正确的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-08T19:28:24.830

只需查看 C API 以获取提示。C API 提供显式创建和销毁函数是很常见的。这些通常遵循库中的一些正式命名约定。

使用您的示例，如果未将参数明确标记为销毁函数，则删除/释放参数将是一个糟糕的设计`a_function`（在这种情况下，您不应在调用该函数后使用该参数。在大多数情况下，**这是一个糟糕的设计假设销毁不属于你的对象是安全的**。当然，对于智能指针，所有权、生命周期和清理机制通常由智能指针处理。

所以是的，人们使用`new`and `delete`，尽管我在`template`s 之前没有编写 C++——在程序中看到明确的`new`and会更常见`delete`。智能指针不是转移对象和传达所有权的好方法`template`s——除了例外，它是在 1990 年左右引入的（在 C++ 可用 7 年后）。自然，编译器需要一些时间来支持所有这些特性，人们需要一些时间来实现容器并改进这些实现。请注意，在模板之前这是可能的，但实现/克隆任意类型的容器并不总是可行的，因为该语言在模板之前并不支持泛型。当然，具有具体类型的具体类可以很容易地完成智能指针的机制，在那些日子里类型是不变的……但是当泛型不可用时，这确实会导致代码重复的形式。

但即使在今天，替换或销毁智能指针参数的内容对象也是一种不寻常的设计，除非明确标记。这种可能性也降低了，因为将智能指针作为参数而不是它所持有的对象传递也是不寻常的。因此，从那时起，与内存相关的错误数量有所减少，但仍应遵守一些谨慎和良好的所有权约定。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-08T19:30:43.440

简单的答案：**阅读文档**。这在 C 接口中很常见，因为资源管理是接口的重要组成部分，如果函数声明对对象的所有权，它将被记录在案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-08T18:35:44.873

你摧毁你创造的东西，图书馆摧毁它创造的东西。

如果您与库共享数据（例如，用于文件数据的 char*），库的文档将指定它是否保留对您的数据的引用（在这种情况下，在库使用完之前不要删除您的副本）或复制您的数据（在这种情况下，图书馆的工作是在完成后删除数据）。

# php - 使用 DataMapper ORM 和 Codeigniter 在多对多关系中选择连接表值

> ID：12333293
> 
> 赞同：0
> 
> 时间：2012-09-08T18:17:16.353
> 
> 标签：php, codeigniter, orm, datamapper, codeigniter-datamapper

我有这个表结构：

| 用户 | --- 有很多 > --- | 偏好_用户 | --- < 有很多 --- | 偏好 |

首选项可能类似于“名字”或“姓氏”，但这些首选项的值存储在连接表中。

我正在使用 Codeigniter 和 Datamapper ORM 将关系表转换为对象，但是我不确定如何在连接表中获取此值。

我正在这样做：

```
$user = new User();
$user->where('unique_url', $url)->get();
$user->preferences->get_iterated(); 
```

我的关系已经建立，因此它们都具有`$has_many = array('tablename');`并且我能够从每个表中获取值。

但是我希望能够从连接表中获取表列值，有人知道该怎么做吗？

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:21:58.037

[我在文档中](http://datamapper.wanwizard.eu/pages/getadvanced.html#include_join_fields)找到了答案：

> ### `$object->include_join_fields()`
> 
> 此方法没有选项。在添加关系之前设置它。您可以在 a 之前使用它 `{$query}_related_{$model}`，也可以在调用`get()`相关项目之前使用它。表上不属于关系的所有字段都包括在内，并以`"join_"`.
> 
> 此方法可能会返回意外结果或抛出具有深层关系的错误。
> 
> 用法：
> 
> ```
> // Create User $u = new User(); $u->get_by_id($userid);
> 
> // get all alarms for this user, and include the extra 'wasfired'
> field $u->alarm->include_join_fields()->get();
> 
> foreach($u->alarm as $alarm) {
>     if($alarm->join_wasfired) {
>         echo("{$alarm->name} was fired\n");
>     } else {
>         echo("{$alarm->name} was NOT fired\n");
>     }
> } 
> ```
> 
> 有关更多详细信息，请参阅[使用连接字段](http://datamapper.wanwizard.eu/pages/joinfields.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T22:28:34.360

你可以使用这个：

```
$Object->joinedObject->include_join_fields()->get(); 
```

然后获取连接字段：

```
$Object->{join}_count; 
```

请注意添加`join_ before field (count) name`文档中引用的内容。

谢谢。

# c# - 继承 VirtualizingStackPanel，InternalChildren.Count 返回零

> ID：12333297
> 
> 赞同：1
> 
> 时间：2012-09-08T18:18:17.260
> 
> 标签：c#, wpf, layout, virtualizingstackpanel

我为元素排列实现了一些额外的逻辑。

我覆盖 MeasureOverride 和 ArrangeOverride。如果我从 StackPanel 继承一切正常。VirtualizingStackPanel 作为父级的情况不是这样。调试显示 InternalChildren.Count 返回零，就好像还没有生成元素的容器一样。我绝对想念 VSP 的一些东西。我猜它正在虚拟化。谁能帮我这个？

PS 继承的两种变体都针对 ItemsControl.ItemsPanel 进行了测试

# php - PHP cURL JSON eBay API 请求

> ID：12333298
> 
> 赞同：1
> 
> 时间：2012-09-08T18:18:20.730
> 
> 标签：php, json, curl, ebay-api

我正在尝试使用 PHP 和 cURL 调用 eBay 的购物 API，并以 JSON 格式返回响应。当我将 URL 直接放在浏览器中时它可以工作，但它不在 PHP 中。我不想使用 XML。JSON更容易。有什么建议么？

```
$Url ="http://open.api.ebay.com/shopping?callname=GetMultipleItems&responseencoding=JSON&appid=MyAppId&siteid=0&version=525&ItemID=290585620456,290683575886&IncludeSelector=Details,ShippingCosts,Variations";

//check if you have curl loaded
if(!function_exists("curl_init")) die("cURL extension is not installed");

$ch=curl_init($Url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$r=curl_exec($ch);
curl_close($ch);

var_dump($r); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:20:41.483

你应该使用

```
 json_encode($response_string); 
```

这会将响应字符串解析为 json 对象。

如果您想要基本数组而不是 json 对象，请使用

```
json_decode($responce_str, true); 
```

这将返回一个关联数组。

# mysql - 如何获取表 A 与表 B 的所有数据仅与表 A 匹配的行

> ID：12333300
> 
> 赞同：0
> 
> 时间：2012-09-08T18:18:34.480
> 
> 标签：mysql, sql, join

我有两个表我想选择出现在表位置中的所有记录，cardId 为 2，如果一个位置映射到 location_card 表中，那么该位置的名称

通过进行单独的查询然后在脚本中加入它们是可行的，但我想进入单个查询。我尝试了下面的查询，但效果很好。

```
SELECT `cl`.`locationId`, `cl`.`cardId`, `l`.`name`
FROM (`locations` as l)
JOIN `location_cards` as cl ON `l`.`cardId` = `cl`.`cardId`
WHERE `l`.`id` =  '2'

location_cards
+---+-------------+-------+
|id | locationId  |cardId |
+---+-------------+-------+
| 1 | 1           |   1   |
| 2 | 1           |   2   |
| 3 | 3           |   2   | 
+---+-------------+-------+

locations
+---+-------------+-------+
|id | name        |cardId |
+---+-------------+-------+
| 1 | some        |   1   |
| 2 | pla         |   2   |
| 3 | sdsdffsdf   |   2   | 
+---+-------------+-------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:26:32.950

您需要更改为 a但您的子句`LEFT JOIN`似乎使用了错误的过滤器：`WHERE`

```
select c.locationid,
  c.cardid,
  l.name
from locations l
left join location_cards c
  on l.cardid = c.cardid
where l.cardid = 2 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/9c80b/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:22:07.287

尝试更改您的`JOIN`连接`LEFT JOIN`和顺序。

```
SELECT `cl`.`locationId`, `cl`.`cardId`, `l`.`name`
FROM `location_cards` as cl
left JOIN `locations` as l   ON `l`.`cardId` = `cl`.`cardId`
WHERE `l`.`id` =  '2' 
```

# ios - 以秒为单位在每个倒计时播放 Click/Tick 声音（iPhone）？

> ID：12333309
> 
> 赞同：0
> 
> 时间：2012-09-08T18:20:23.523
> 
> 标签：ios, xcode, avfoundation, avaudioplayer

我已经实现了一个递减计数器，它每秒播放点击声音，直到它的计时器失效。同时，我正在显示计数器值。

```
 -(IBAction)start{
    myTicker =[NSTimerscheduledTimerWithTimeInterval:1.0 target:self selector:@selector(showactivity) userInfo:nil repeats:YES];
        }

        -(void)showactivity;{

        int CurrentTime =[time.textintValue];

        NSString *soundFilePath=[[NSBundlemainBundle] pathForResource:@"Click03" ofType:@"wav"];
        NSURL *soundFileURL =[NSURLfileURLWithPath:soundFilePath];
        AVAudioPlayer *player=[[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        player.numberOfLoops =1;
        [player play];

        int newTime = CurrentTime-1;
        time.text = [NSString stringWithFormat:@"%d",newTime];
        if(newTime ==0){
                [myTicker invalidate];
        time.text = @"0";

            }

        } 
```

计数器工作完美，但初始延迟很小；但它不播放声音，任何人都可以帮助我有效地实现这个概念，以最小的延迟等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:03:47.890

您可以只发出一秒长的声音，包括咔嗒声，然后是 1 秒（减去咔嗒声的持续时间）的静音样本。将其设置`player.numberOfLoops`为您必须倒计时的秒数，然后播放一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:29:14.507

使用 AVAudioPlayer 播放声音

1) 添加

```
@property (nonatomic, strong) AVAudioPlayer *player; 
```

到你的头文件

记得在你的 .m 文件中合成它

2）初始化播放器并使用以下代码播放声音：

```
 NSString *soundFilePath=[[NSBundle mainBundle]pathForResource:@"yourSoundFile" ofType:@"caf"];

    NSURL *soundFileURL =[NSURL fileURLWithPath:soundFilePath];

    NSError *err = nil;

    self.player=[[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:&err];

    self.player.numberOfLoops = 0;

    if ([self.player play]) {
        NSLog(@"playing sound");
    }else {
        NSLog(@"COULD NOT play sound");
    }; 
```

请注意，将 self.player.numberOfLoops 设置为 0 将播放一次声音。将其设置为 1，将循环一次，导致声音连续播放两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T12:47:46.070

您可以做的一件事，解决 ARC 解除分配问题，就是将所有玩家添加到一个数组中。然后将自己设置为播放器的代理，监听音频何时播放完毕，然后将其从数组中删除。这样，播放器在播放完之前不会被释放。像这样的东西：

```
@property (nonatomic, strong) NSMutableArray *playersArray

-(void)showactivity
{
    int CurrentTime =[time.textintValue];

    NSString *soundFilePath=[[NSBundlemainBundle] pathForResource:@"Click03" ofType:@"wav"];
    NSURL *soundFileURL =[NSURLfileURLWithPath:soundFilePath];
    AVAudioPlayer *player=[[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
    player.numberOfLoops =1;
    player.delegate = self;
    [player play];
    [self.playersArray addObject:player];

    int newTime = CurrentTime-1;
    time.text = [NSString stringWithFormat:@"%d",newTime];
    if (newTime == 0) {
        [myTicker invalidate];
        time.text = @"0";
    }
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    [playersArray removeObject:player];
} 
```

记得初始化你的数组。

# c++ - SFML 2.0：Keyboard::isKeyPressed 并不总是正确返回

> ID：12333313
> 
> 赞同：3
> 
> 时间：2012-09-08T18:20:48.350
> 
> 标签：c++, sfml

```
bool m_down = sf::Keyboard::isKeyPressed(sf::Keyboard::Key::M);
bool up_down = sf::Keyboard::isKeyPressed(sf::Keyboard::Key::Up);
bool down_down = sf::Keyboard::isKeyPressed(sf::Keyboard::Key::Down);
bool left_down = sf::Keyboard::isKeyPressed(sf::Keyboard::Key::Left);
bool right_down = sf::Keyboard::isKeyPressed(sf::Keyboard::Key::Right); 
```

这段代码基本上是唯一相关的代码。

当我与 M 和 a[n] 箭头键 [s] 同时按住其他一些键时，按下 m 时似乎返回 false。（虽然是这样）

我没有代码对其进行操作、破坏等，如果可能的话，我想了解一下为什么会发生这种情况，以及如何解决它。

如果无法修复它，那么您能告诉我使用事件系统在我这边重新制作此功能的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:54:46.243

根据评论，[此处的此链接](https://gaming.stackexchange.com/questions/6669/how-do-i-remove-the-limit-on-pc-keyboard-button-presses/6671#6671)说明键盘存在固有限制。大多数键盘在任何给定时间只能注册一定数量的按键，并忽略任何后续按键，直到您释放一个或多个当前按键。这不适用于修饰键（如 Ctrl、alt 和 shift），因为这些键被特殊处理（因为它们旨在与其他键一起使用）。

# c# - 如何从资源C#中打开文件

> ID：12333314
> 
> 赞同：1
> 
> 时间：2012-09-08T18:20:56.460
> 
> 标签：c#, visual-studio

当我单击按钮时，您知道如何从 Visual Studio 中的资源中打开文件吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T18:23:20.893

您可以使用[GetManifestResourceStream](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)方法：

```
var currentAssembly = Assembly.GetExecutingAssembly();
using (var stream = currentAssembly.GetManifestResourceStream("SomeNs.file.txt"))
using (var reader = new StreamReader(stream))
{
    // TODO: read the stream here
    string contents = reader.ReadToEnd();
} 
```

在此示例`file.txt`中作为资源嵌入到当前程序集中。您将不得不调整您尝试读取的资源的名称。`StreamReader`如果嵌入的资源不是文本文件，则不要使用 a 。如果它是二进制文件，则必须直接读取流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:27:51.827

这可以在您的文件是本地文件时使用

```
 string resName = "myfile.txt";
        var file = GetResourceStream(resName);
        string all = "";

        using (var reader = new StreamReader(file))
        {
            all = reader.ReadToEnd();
        } 
```

在哪里

```
 static UnmanagedMemoryStream GetResourceStream(string resName)
    {
        var assembly = Assembly.GetExecutingAssembly();
        var strResources = assembly.GetName().Name + ".g.resources";
        var rStream = assembly.GetManifestResourceStream(strResources);
        var resourceReader = new System.Resources.ResourceReader(rStream);
        var items = resourceReader.OfType<System.Collections.DictionaryEntry>();
        var stream = items.First(x => (x.Key as string) == resName.ToLower()).Value;
        return (UnmanagedMemoryStream)stream;
    } 
```

![在此处输入图像描述](../Images/a53845bec9da54536a814d0855708631.png)

# winapi - 无法将 hdc 正确保存到位图

> ID：12333315
> 
> 赞同：1
> 
> 时间：2012-09-08T18:21:03.667
> 
> 标签：winapi, bitmap, gdi

我试图将内存 DC 保存到位图文件中。但我无法获得关于以下大小的正确值：

```
infoHeader.biSizeImage

fileHeader.bfSize

fileHeader.bfOffBits

WriteFile(hFile, &fileHeader, sizeof(BITMAPFILEHEADER), &dwBytesWritten, NULL);

WriteFile(hFile, &infoHeader, sizeof(BITMAPINFOHEADER), &dwBytesWritten, NULL);

WriteFile(hFile, pPixels, info.bmiHeader.biSizeImage, &dwBytesWritten, NULL); 
```

我可以得到一个文件，但我无法打开它，因为它抱怨它已损坏或不再受支持。

有很多关于保存到 bmp 的来源，但其中许多对大小有不同的价值。有些还包括调色板信息。我完全糊涂了。

有人可以指出如何填写正确的信息吗？

```
static void SaveAsBmp(TCHAR *fileName)
{
HDC hdcView = GetDC(hwndView);
HDC memDC = CreateCompatibleDC(hdcView);

RECT rcView;
GetClientRect(hwndView, &rcView);

int rcView_dx = rcView.right - rcView.left;
int rcView_dy = rcView.bottom - rcView.top;

HBITMAP hMemBmp = CreateCompatibleBitmap(hdcView, rcView_dx, rcView_dy);
HBITMAP hOldBmp = (HBITMAP)SelectObject(memDC, hMemBmp);

BitBlt(memDC, 0, 0, rcView_dx, rcView_dy, hdcView, 0, 0, SRCCOPY);

//----------

BITMAP bmp;
GetObject(hMemBmp, sizeof(BITMAP), &bmp);

//----------

WORD wBits = (WORD)(bmp.bmBitsPixel * bmp.bmPlanes);

if(wBits <=  1)                                                   
    wBits = 1;             
else  if(wBits <=  4)                               
    wBits  = 4;             
else if(wBits <=  8)                               
    wBits  = 8;             
else if (wBits <= 16)
    wBits = 16;
else if (wBits <= 24)
    wBits = 24;
else wBits = 32; 

//----------

BITMAPINFOHEADER infoHeader;
BITMAPINFO info;
info.bmiHeader = infoHeader;

infoHeader.biSize = sizeof(BITMAPINFOHEADER);    
infoHeader.biWidth = bmp.bmWidth; 
infoHeader.biHeight = bmp.bmHeight;    
infoHeader.biPlanes = bmp.bmPlanes;    
infoHeader.biBitCount = bmp.bmBitsPixel;     
infoHeader.biCompression = BI_RGB;   

infoHeader.biSizeImage = 2 * ((bmp.bmWidth * bmp.bmBitsPixel + 15) / 16)  * bmp.bmPlanes * bmp.bmHeight;
infoHeader.biXPelsPerMeter = 0;  
infoHeader.biYPelsPerMeter = 0;
infoHeader.biClrUsed = 0;
infoHeader.biClrImportant = 0;

RGBQUAD *pPixels = new RGBQUAD[bmp.bmWidth * bmp.bmWidth]; 
GetDIBits(memDC, hMemBmp, 0, bmp.bmWidth, pPixels, &info, DIB_RGB_COLORS);

BITMAPFILEHEADER fileHeader;
fileHeader.bfType = 0x4d42;
fileHeader.bfSize = (DWORD)(sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + info.bmiHeader.biSizeImage);
fileHeader.bfReserved1 = 0;
fileHeader.bfReserved2 = 0;
fileHeader.bfOffBits = (DWORD)(sizeof(BITMAPFILEHEADER) + info.bmiHeader.biSize);

HANDLE hFile = CreateFile(fileName, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

DWORD dwBytesWritten;

WriteFile(hFile, &fileHeader, sizeof(BITMAPFILEHEADER), &dwBytesWritten, NULL);
WriteFile(hFile, &infoHeader, sizeof(BITMAPINFOHEADER), &dwBytesWritten, NULL);
WriteFile(hFile, pPixels, info.bmiHeader.biSizeImage, &dwBytesWritten, NULL);

CloseHandle(hFile);

delete pPixels;

SelectObject(memDC, hOldBmp);
DeleteObject(hMemBmp);
DeleteDC(memDC); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:28:10.260

> infoHeader.biSizeImage = 2 * ((bmp.bmWidth * bmp.bmBitsPixel + 15) / 16) * bmp.bmPlanes * bmp.bmHeight;

在这里看起来不正确，它应该是`bmp.bmBitsPixel >> 3`，假设它是 24 或 32。也就是说，它是每像素的位数，而您正在使用它，就好像它是每像素的字节数。

总体而言，代码看起来不错，您应该使用调试器检查变量以查找不匹配项（或将它们粘贴到此处，尤其是`BITMAPINFOHEADER`）。

另请注意，您可能以不同的方式完成了它：`CreateCompatibleBitmap`您可以使用`CreateDIBSection`您感兴趣的格式，例如 24 bpp RGB，而不是使用，您将立即收到指向位的原始指针。然后将数据传送到此位图中，您不再需要`GetObject`调用，因为您已经拥有了所需的一切。并且，`GetObject`可能会返回您`DIBSECTION`已经准备好使用的格式`BITMAPINFOHEADER`。都是一样的，只是更简单。

# java - 如果 start() 出现异常，则终止 Jetty 服务器线程池

> ID：12333318
> 
> 赞同：0
> 
> 时间：2012-09-08T18:21:28.507
> 
> 标签：java, clojure, jetty, ring

我正在 Clojure 中编写一个嵌入式 Jetty 应用程序，并将以下内容作为主要命名空间：

```
(ns rudkus.core
  (:require [clojure.tools.cli :as cli]
            [ring.adapter.jetty :as jetty])
  (:gen-class))

(defn handler [request]
  {:status 200
   :headers {"Content-Type" "text/html"}
   :body "Hello, World!"})

(def ^{:private true} server (atom nil))

(defn start [port]
  (swap! server #(if (not (nil? %))
                  (throw (IllegalStateException. "Server already started."))
                  (jetty/run-jetty handler
                                   {:port port
                                    :join? false}))))

(defn stop []
  (swap! server #(if (nil? %)
                  (throw (IllegalStateException. "Server already stopped."))
                  (do (.stop %)
                      nil))))

(defn -main [& args]
  (let [[options extra-args banner] (cli/cli args
                                             ["-p" "--port" "Port" :default 80 :parse-fn #(Integer. %)])]
    (if (not-empty extra-args)
      (println banner)
      (start (:port options))))) 
```

这工作正常 - 我希望能够通过 REPL 启动和停止，以及从运行 JAR 的控制台启动和启动（尽管如果有更好的 Clojure-Ring-Jetty 程序的启动/停止模式，我很想知道）。问题是如果我跑

```
lein run 
```

或者

```
lein trampoline run 
```

并且 jetty/run-jetty 抛出了一个异常（它包含了一个 Server.start() 调用）——例如，在我的 MacBook Pro 上，如果我尝试在端口 80 上启动 Jetty 服务器，它会出错——Clojure 程序不会不要退出。但是，异常是在线程“main”中。那么程序为什么不退出呢？我唯一能想到的是 Jetty 有线程浮动。但是 start() 失败了！！！那么这些线程（池）在做什么？

这是 Java 的东西、Clojure 的东西、Leiningen 的东西、Jetty 的东西还是 Ring 的东西？

编辑：

这是堆栈跟踪：

```
$ java -jar rudkus-0.1.0-SNAPSHOT-standalone.jar
2012-09-09 15:54:59.664:INFO:oejs.Server:jetty-7.x.y-SNAPSHOT
2012-09-09 15:54:59.803:WARN:oejuc.AbstractLifeCycle:FAILED SelectChannelConnector@0.0.0.0:80: java.net.SocketException: Permission denied
java.net.SocketException: Permission denied
    at sun.nio.ch.Net.bind(Native Method)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:124)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.open(SelectChannelConnector.java:173)
    at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:311)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:251)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.Server.doStart(Server.java:272)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at ring.adapter.jetty$run_jetty.invoke(jetty.clj:86)
    at rudkus.core$start$fn__16.invoke(core.clj:16)
    at clojure.lang.Atom.swap(Atom.java:37)
    at clojure.core$swap_BANG_.invoke(core.clj:2108)
    at rudkus.core$start.invoke(core.clj:14)
    at rudkus.core$_main.doInvoke(core.clj:31)
    at clojure.lang.RestFn.invoke(RestFn.java:397)
    at clojure.lang.AFn.applyToHelper(AFn.java:159)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at rudkus.core.main(Unknown Source)
2012-09-09 15:54:59.806:WARN:oejuc.AbstractLifeCycle:FAILED org.eclipse.jetty.server.Server@6e5dfaf1: java.net.SocketException: Permission denied
java.net.SocketException: Permission denied
    at sun.nio.ch.Net.bind(Native Method)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:124)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.open(SelectChannelConnector.java:173)
    at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:311)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:251)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.Server.doStart(Server.java:272)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at ring.adapter.jetty$run_jetty.invoke(jetty.clj:86)
    at rudkus.core$start$fn__16.invoke(core.clj:16)
    at clojure.lang.Atom.swap(Atom.java:37)
    at clojure.core$swap_BANG_.invoke(core.clj:2108)
    at rudkus.core$start.invoke(core.clj:14)
    at rudkus.core$_main.doInvoke(core.clj:31)
    at clojure.lang.RestFn.invoke(RestFn.java:397)
    at clojure.lang.AFn.applyToHelper(AFn.java:159)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at rudkus.core.main(Unknown Source)
Exception in thread "main" java.net.SocketException: Permission denied
    at sun.nio.ch.Net.bind(Native Method)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:124)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.open(SelectChannelConnector.java:173)
    at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:311)
    at org.eclipse.jetty.server.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:251)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.server.Server.doStart(Server.java:272)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at ring.adapter.jetty$run_jetty.invoke(jetty.clj:86)
    at rudkus.core$start$fn__16.invoke(core.clj:16)
    at clojure.lang.Atom.swap(Atom.java:37)
    at clojure.core$swap_BANG_.invoke(core.clj:2108)
    at rudkus.core$start.invoke(core.clj:14)
    at rudkus.core$_main.doInvoke(core.clj:31)
    at clojure.lang.RestFn.invoke(RestFn.java:397)
    at clojure.lang.AFn.applyToHelper(AFn.java:159)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at rudkus.core.main(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:59:59.380

如果您查看此代码，则有一个解决方案（在谷歌结果的第一页上作为答案找到）：[包含方法 contextStartupFailed() 的源代码](https://svn.kuali.org/repos/kits/kms/tags/kms-rice2-not-IU/src/main/java/org/kuali/rice/core/web/jetty/JettyServer.java)但是该解决方案对我不起作用，因为它要求使用反射名为 _unavailable 的字段，而我的 Jetty 版本（8.1.8.v20121106）没有这样的字段。

然而，Jetty 接缝现在支持更好的东西。对我来说，以下工作：

```
 protected static void contextStartupFailed(WebAppContext pContext) throws Exception {

  Throwable failedException = pContext.getUnavailableException();

  if (failedException != null) {
     throw new RuntimeException("Error starting WebContext of Jetty.", failedException);
  } 
```

}

我在启动 Jetty 后调用该方法。当然，这仅在您有 WebAppContext 时才有效。

# json - javascript中的Echo php函数和json

> ID：12333325
> 
> 赞同：0
> 
> 时间：2012-09-08T18:22:02.390
> 
> 标签：json, codeigniter

我正在使用 Codeigniter。我想获取 base_url() 和 json 数据，以便检索图像 url。但是我如何编译 base_url() 和 json。

以下是我尝试过但无法正常工作的方法

```
 var url = <?php echo base_url(); ?>;
        var image = document.write(url + obj[0].picture); 
```

@tom 的评论是我的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:24:09.387

`json_encode`将转换`base_url()`，但是 - 你不需要这样做。

如果您没有另外指定，URL 将自动相对于当前文档的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:55:03.847

您需要将 url 变量值包含在引号 var 中`url = "<?php echo base_url(); ?>";`

（从之前的评论中复制，以便可以将问题标记为已关闭）

这是将 PHP 变量值传递给适用于字符串的 JavaScript 的最简单方法。您可以（并且应该）将 json_encode 用于更复杂的变量值，例如数组。

```
<?php
    $url = 'http://www.google.com';
    $foo = array('apple', 'banana', 'melon', array('a', 'b', 'c'));
?>

<script type="text/javascript">
    var url = "<?php echo $url; ?>";
    var foo = <?php echo json_encode($foo); ?>;
</script> 
```

# r - R，用字符过滤（子集）数据并相应地分配名称？

> ID：12333329
> 
> 赞同：1
> 
> 时间：2012-09-08T18:22:52.683
> 
> 标签：r, subset, assign

我有一个数据集`raw.data.2010`，需要对不同动物物种进行子集的几个步骤。我还需要在每个过滤过程之后相应地命名它们。我写了一个简单的代码如下：

```
#Creating reproducible data######
site=rep(list("Q", "R", "S", "T"), each=500)
grid=sample(1:2, size=2000, replace=TRUE)
spp=rep(list("A", "B", "C", "D", "E"), each=400)
fate=sample(1:5, size=20000, replace=TRUE)
sex=rep(list("M","F"), each=2000)
weight=sample(85:140, size=2000, replace=TRUE)

raw.data=as.data.frame(cbind(site, grid, spp, fate, sex, weight))

### main codes#####
spp=c("A", "B", "C", "D", "E")
    for (i in spp){
        name=paste(i, "raw", sep=".", collapse="")
        filter=paste("select",i, sep="", collapse="")
        assign(filter, raw.data$spp==i)
        assign(name, raw.data[get(filter),])
    } 
```

我检查了过滤器，它们正常工作。但是最后一行不起作用，所以我调用的所有子集数据都返回了`NA`。什么问题？谢谢你。

**编辑：**嗨，谢谢大家的建议。我编辑了我的代码，所以它是可重现的。基本上我想先`raw.data`用`spp`. 然后我可以继续添加更多过滤器以根据`site`, `grid`, `fate`... 等对它们进行分组。我需要能够单独访问过滤后的数据，以便我可以操作它们以供以后使用，例如。计算不同性别或年龄组的体重和其他测量值。`A.raw`我希望以后能打电话`A.Q.data`。

因为我想在不同级别（例如人口级别、个人级别、站点/网格级别）分析我的数据，并能够根据我的需要合并/拆分它们。这就是这段代码的目的。希望我的解释不会让你感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T18:42:04.877

`assign`从长远来看，如果您不再使用和使用全局变量，`get`而是使用列表（并记住使用`[[`而不是子集） ，那么从长远来看，您可能会为自己节省很多工作和悲伤`$`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T18:33:39.840

问题似乎是您需要“获取”具有存储在过滤器中的名称的变量，而不是使用过滤器本身。

这应该有效：

```
spp=c("A", "B", "C", "D", "E")
for (i in spp){
    name=paste(i, "raw", sep=".", collapse="")
    filter=paste("select",i, sep="", collapse="")
    assign(filter, raw.data.2010$Spp==i)
    assign(name, raw.data.2010[get(filter),])
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T02:40:37.140

你的例子都搞砸了。这是一个正确的例子，*永远*不会使用`as.data.frame(cbind(...))`

```
 site=rep(c("Q", "R", "S", "T"), each=500)
 grid=sample(1:2, size=2000, replace=TRUE)
 spp=rep(c("A", "B", "C", "D", "E"), each=400)
 fate=sample(1:5, size=20000, replace=TRUE)
 sex=rep(c("M","F"), each=2000)
 weight=sample(85:140, size=2000, replace=TRUE)

 raw.data=data.frame(site=site, grid=grid, spp=spp, fate=fate, sex=sex, weight=weight)
 names(group.spp) <- paste(levels(raw.data$spp), "raw", sep=".")

#------------------------
 str(group.spp)
List of 5
 $ A.raw:'data.frame':  4000 obs. of  6 variables:
  ..$ site  : Factor w/ 4 levels "Q","R","S","T": 1 1 1 1 1 1 1 1 1 1 ...
  ..$ grid  : int [1:4000] 2 1 2 1 2 1 1 1 1 2 ...
  ..$ spp   : Factor w/ 5 levels "A","B","C","D",..: 1 1 1 1 1 1 1 1 1 1 ...
  ..$ fate  : int [1:4000] 3 2 3 5 5 2 3 2 5 2 ...
  ..$ sex   : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ weight: int [1:4000] 136 93 115 100 97 128 120 124 97 120 ...
 $ B.raw:'data.frame':  4000 obs. of  6 variables:
  ..$ site  : Factor w/ 4 levels "Q","R","S","T": 1 1 1 1 1 1 1 1 1 1 ...
  ..$ grid  : int [1:4000] 2 2 1 2 2 2 1 2 2 2 ...
  ..$ spp   : Factor w/ 5 levels "A","B","C","D",..: 2 2 2 2 2 2 2 2 2 2 ...
  ..$ fate  : int [1:4000] 5 5 2 4 3 4 2 3 4 5 ...
  ..$ sex   : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ weight: int [1:4000] 137 126 116 97 97 86 134 103 86 140 ...
 $ C.raw:'data.frame':  4000 obs. of  6 variables:
  ..$ site  : Factor w/ 4 levels "Q","R","S","T": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ grid  : int [1:4000] 1 2 1 2 2 2 1 2 2 1 ...
  ..$ spp   : Factor w/ 5 levels "A","B","C","D",..: 3 3 3 3 3 3 3 3 3 3 ...
  ..$ fate  : int [1:4000] 2 4 4 2 5 1 2 1 2 5 ...
  ..$ sex   : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ weight: int [1:4000] 132 85 96 87 91 94 94 122 116 87 ...
 $ D.raw:'data.frame':  4000 obs. of  6 variables:
  ..$ site  : Factor w/ 4 levels "Q","R","S","T": 3 3 3 3 3 3 3 3 3 3 ...
  ..$ grid  : int [1:4000] 2 2 2 1 1 2 2 1 1 2 ...
  ..$ spp   : Factor w/ 5 levels "A","B","C","D",..: 4 4 4 4 4 4 4 4 4 4 ...
  ..$ fate  : int [1:4000] 2 4 1 4 2 4 1 5 1 4 ...
  ..$ sex   : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ weight: int [1:4000] 130 139 100 107 126 119 134 110 103 135 ...
 $ E.raw:'data.frame':  4000 obs. of  6 variables:
  ..$ site  : Factor w/ 4 levels "Q","R","S","T": 4 4 4 4 4 4 4 4 4 4 ...
  ..$ grid  : int [1:4000] 2 2 1 1 1 1 2 2 2 1 ...
  ..$ spp   : Factor w/ 5 levels "A","B","C","D",..: 5 5 5 5 5 5 5 5 5 5 ...
  ..$ fate  : int [1:4000] 5 5 4 5 5 3 1 4 4 3 ...
  ..$ sex   : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
  ..$ weight: int [1:4000] 88 96 99 101 119 94 97 132 137 115 ... 
```

# python - 让python生成命令行参数

> ID：12333331
> 
> 赞同：0
> 
> 时间：2012-09-08T18:23:28.240
> 
> 标签：python, linux, shell

我试图让 python 为我的命令行程序（Linux）生成输入参数，但根本无法让它工作。

我知道它的效果是

```
./heap0 (python -c 'print "A"*72) 
```

但这不起作用....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:24:07.740

试试`$()`。它接受命令的输出并将其作为值包含在内。

```
./heap0 $(python -c 'print "A"*72') 
```

# jsf - Icefaces ACE 饼图 SectorSeries 类缺失

> ID：12333334
> 
> 赞同：0
> 
> 时间：2012-09-08T18:23:39.883
> 
> 标签：jsf, charts, icefaces

我试图实现这个例子： http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=
[chartBean](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=chartBean)

我想导入

```
org.icefaces.ace.model.chart.SectorSeries 
```

类，它不在 jar 文件中。

我使用 maven，并将此依赖项添加到项目的 pom 文件中

```
<dependency>
   <groupId>org.icefaces</groupId>
   <artifactId>icefaces-ace</artifactId>
   <version>3.0.1</version>
</dependency> 
```

有人能告诉我我做错了什么吗？
我在任何地方都找不到这堂课的位置。
请帮我！
非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:44:01.283

我不相信该类直到版本 3.1.0（不是 3.0.1）才可用，因此您需要升级 Maven pom 才能获得该版本。

# android - 在 Android 上使用 objenesis 时出现 NoClassDefFoundError

> ID：12333342
> 
> 赞同：3
> 
> 时间：2012-09-08T18:24:51.127
> 
> 标签：android, noclassdeffounderror, cloning

我正在开发一个 android 应用程序，它使用`com.rits.cloning`和`org.objenesis.*`libs 来深度克隆对象。目的是将相同的对象添加到我的树结构类中两次或更多次，而不用担心原始对象引用的是同一个对象。由于常规`clone()`只是浅拷贝对象，因此我使用提到的库。

在开发 android 项目之前，我创建了一个 java 项目来实现我的树，并且使用这些库可以正常工作。然后我将它导入到 android 项目中（并添加`com.rits.cloning`,`org.objenesis.*`作为外部库，然后检查 中的两个库`Java Build Path > Order and Export`）。但是当我在我调用的那一行运行它时，`deepClone()`LogCat 中出现了这个错误，并且应用程序被强制关闭：

```
E/AndroidRuntime(280): FATAL EXCEPTION: main
E/AndroidRuntime(280): java.lang.NoClassDefFoundError: sun.reflect.ReflectionFactory
E/AndroidRuntime(280):  at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.<init>(SunReflectionFactoryInstantiator.java:40)
E/AndroidRuntime(280):  at org.objenesis.strategy.StdInstantiatorStrategy.newInstantiatorOf(StdInstantiatorStrategy.java:85)
E/AndroidRuntime(280):  at org.objenesis.ObjenesisBase.getInstantiatorOf(ObjenesisBase.java:90)
E/AndroidRuntime(280):  at org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:73)
E/AndroidRuntime(280):  at com.rits.cloning.Cloner.newInstance(Cloner.java:291)
E/AndroidRuntime(280):  at com.rits.cloning.Cloner.cloneInternal(Cloner.java:468)
E/AndroidRuntime(280):  at com.rits.cloning.Cloner.deepClone(Cloner.java:327)
E/AndroidRuntime(280):  at com.*.project_monitoring.project.WBS.add(WBS.java:35)
E/AndroidRuntime(280):  at com.*.project_monitoring.project.ProjectUtility.demoPlan(ProjectUtility.java:101)
E/AndroidRuntime(280):  at com.*.project_monitoring.ProjectSelection.onCreate(ProjectSelection.java:45)
E/AndroidRuntime(280):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(280):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
E/AndroidRuntime(280):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
E/AndroidRuntime(280):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
E/AndroidRuntime(280):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(280):  at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(280):  at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(280):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(280):  at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(280):  at dalvik.system.NativeStart.main(Native Method) 
```

我用谷歌搜索并单独尝试过：

*   清理项目
*   从构建路径中删除`com.rits.cloning`并`org.objenesis.*`读取
*   重新排序这些库，使它们位于 Android 依赖项的正下方
*   重新排序这些库，使它们位于所有库之上

我不认为这是因为 Eclipse 更新，因为我在这发生前几周更新了它。

这是源代码：

```
package com.*.tree;

import java.util.ArrayList;
import com.rits.cloning.Cloner;

public class MyTree {
    Data o;
    MyTree parent;
    ArrayList<MyTree> child = new ArrayList<MyTree>();

    public void add(MyTree tree) {
        Cloner c = new Cloner();

        MyTree temp =   c.deepClone(tree); //this is where the app crashed
        temp.parent = this;
        child.add(temp);
    }

    public static void main(String[] args) {
        MyTree tree1 = new MyTree();
        MyTree tree2 = new MyTree();

        tree1.add(tree2);
        tree1.add(tree2);
        tree1.add(tree2);
        //The result wanted here is tree1 has 3 different but identical child objects
        //NOT 3 child which refer to the same one object
    }
}

class Data {
    double value;
} 
```

问题：

*   为什么我会收到这个错误，我该如何摆脱它？
*   还有其他方法可以实现我的树吗？

原谅我的英语。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:01:12.060

在 Eclipse 中，当您在 Java Build Path 对话框中添加外部库时，不要忘记切换到 Order and Export 选项卡并在列表中勾选该库的名称。这是必需的，以便在运行时找到库，而不仅仅是在编译时。

[使用 ant 运行 Instrumentation 测试时出现 NoClassDefFoundError](https://stackoverflow.com/questions/9847443/noclassdeffounderror-when-running-instrumentation-test-with-ant/9958669#9958669)

# r - 匹配来自两个向量的值

> ID：12333350
> 
> 赞同：0
> 
> 时间：2012-09-08T18:25:46.243
> 
> 标签：r, vector

我有两个独立的向量`HG`，`AG`它们代表两个不同的足球比分。其中一个是主场进球数，另一个是客场进球数。我想知道是否有一种方法可以计算结果出现的次数并将其放入表中，例如，如果值是 1`HG`和 2，`AG`那么结果是 1-2。然后我想知道这个分数出现了多少次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:29:33.600

```
vector<-paste(HG,AG,sep="-")
result<-data.frame(table(vector)) 
```

# extjs - extjs - 点符号到括号 {} 符号？

> ID：12333353
> 
> 赞同：0
> 
> 时间：2012-09-08T18:26:15.293
> 
> 标签：extjs

不确定这是一个好标题...

我可以在按钮后面获取代码：

```
TabBar.activeTab.setTitle("New Tab"); 
```

但我需要做类似的事情：

```
TabBar.activeTab.items = { title: "New Tab"
}; 
```

所以我最终可以在一个循环中自动化几个选项卡属性：

```
TabBar.activeTab.items = { [key]: [value]
}; 
```

我认为配置和项目只能在construct（）上使用是否正确？有没有办法做到以上几点？蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:38:34.157

它取决于组件和配置属性的实现，是否可以简单地设置或需要应用方法调用。

您是正确的，在 ExtJs 中，许多配置属性是在构建时解释的。有些是在渲染时解释的。渲染后，`Ext.Component`几乎所有属性都需要正确应用显式方法调用。

一般来说，我建议始终使用方法调用在构造时间之后更改属性（如果可用），以免破坏组件的内部工作。如果您查看实现，`Ext.panel.Panel#setTitle`您会发现幕后发生了很多事情，例如事件触发等。

**ExtJs 4 配置**

Ext 4 引入了一个明确的“配置”机制，可能会满足您的目的。但是，我的理解是大多数 ExtJs 组件（还没有？）使用它。

签出'2。ExtJs[类系统指南中的“配置”](http://docs.sencha.com/ext-js/4-1/#!/guide/class_system)

**从 xtype/config 文字创建对象**

如果您想将**新**组件添加到容器中（例如，将选项卡添加到选项卡面板），这将很容易完成。

使用`Ext.ComponentManager#create`（参见 [docs][2]）从您的配置文字创建一个实际的组件对象/实例。

`Ext.container.Container#add`实际上在内部调用此方法，因此您可以简单地将配置对象传递给该`add`方法。

如果您想删除或添加选项卡到面板，现在可以调用正确的方法。

**应用配置（）**

当然，您始终可以`applyConfig`通过将配置“翻译”为正确的方法调用来实现自己的方法，该方法支持在运行时更改某些组件配置属性。

# mercurial - 如何判断 hg pull 的进度？

> ID：12333359
> 
> 赞同：3
> 
> 时间：2012-09-08T18:26:53.450
> 
> 标签：mercurial

```
$ hg pull
Password:
pulling from ssh://foo@bar.com:22//home/usr/xxx/repo
searching for changes
adding changesets
adding manifests
adding file changes 
```

然后它继续显示上述内容 10 分钟以上。有没有办法告诉进度以及它是还活着还是已经死了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T18:30:16.660

通过将以下内容添加到您的[HGRC](http://www.selenic.com/mercurial/hgrc.5.html)来使用[Progress](https://www.mercurial-scm.org/wiki/ProgressExtension)扩展：

```
[extensions]
progress = 
```

和/或使用详细选项：

```
hg pull -v 
```

StackOverflow 上有一个[相关问题，可能对您也有用。](https://stackoverflow.com/questions/308491/show-progress-of-mercurial-push-pull)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:30:26.763

[进度扩展](https://www.mercurial-scm.org/wiki/ProgressExtension)是您的朋友。您还可以添加`-v/--verbose`和`--debug`开关以`hg pull`查看更多数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:46:10.537

至于您的后续问题：如果 Mercurial 正在跟踪文件（即，如果您`hg add`和之后`hg commit` `subdir1/subsubdir1/foobar.c`），那么它不会忽略它。因此`.hgignore`只能帮助您清理与`?`（未知文件）一起列出的条目`hg status`——它不会对跟踪的文件产生任何影响。

# html - 用于打印的 3 个文本 div 的最佳布局

> ID：12333361
> 
> 赞同：0
> 
> 时间：2012-09-08T18:27:10.900
> 
> 标签：html, css, printing, typesetting

我正在写一本由大约 500 页组成的书，其中每页最多包含 3 个部分，“a”“b”和“c”。在每一页中，每一节的内容长度是不同的：例如在第1页中，可能有一个长的“a”，没有“b”，还有一个短的“c”；在第2页中，可能有中“a”、短“b”和长“c”等。

每个页面中每个部分的内容都以 HTML 格式给出。

我想对页面上的部分进行布局，以便有效地使用页面区域。这是我想防止的非高效布局的示例：

```
aaa bbb ccc
aaa     ccc
aaa     ccc
        ccc
        ccc 
```

如您所见，有很多浪费的区域。

最初，我尝试根据内容长度来控制列宽，例如：

```
aaa b ccccc
aaa b ccccc
aaa b ccccc 
```

这更有效，但是，“b”列太窄且难以阅读。

我尝试的另一件事是保持宽度不变，但使用“浮动”布局。例如，假设我只有“a”和“b”列：

```
aaa bbb 
aaaaaa 
```

如果我只有两列，这可能很简单：

*   如果 a 比 b 长得多，则使 b 向右浮动；
*   如果 b 比 a 长得多，则向左浮动；
*   如果它们的长度大致相同，则使它们成为相邻的两列。

但是，当有 3 列时，这变得更加复杂，因为有许多可能的组合。

这个问题有一个通用的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:31:42.743

您可能想看看 jQuery [Masonry](http://masonry.desandro.com/)。可能不是您正在寻找的东西，但我想它可能会有所帮助。

# php - 获取 MySQL 中的行数

> ID：12333363
> 
> 赞同：1
> 
> 时间：2012-09-08T18:27:39.203
> 
> 标签：php, mysql

> **可能重复：**
> [计算一个非常大的表中确切行数的最快方法？](https://stackoverflow.com/questions/6069237/fastest-way-to-count-exact-number-of-rows-in-a-very-large-table)

我使用什么查询来获取共享共同规范的行数。
示例：idpost = 3 的行数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T18:28:48.093

您可以使用[这里](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)`COUNT()`记录的。

```
SELECT COUNT(1) FROM posts WHERE idpost = 3 
```

编辑：根据[dbf](https://stackoverflow.com/users/1653305/dbf)的建议更新。确保区分 COUNT(*) 和 COUNT(1)，在[此处](https://stackoverflow.com/q/1221559/944681)讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T18:30:21.603

查询如下所示：

```
SELECT count(*) FROM some_table WHERE (conditions); 
```

在您的示例中：

```
SELECT count(*) FROM some_table WHERE idpost=3; 
```

**有关在 MySQL 中计算行的**更多信息：[MySQL 5.6 参考手册：3.3.4.8。计数行](http://dev.mysql.com/doc/refman/5.6/en/counting-rows.html)

**编辑：**

如果您想知道哪种计算所有行的方式更好（`count(*)`或`count(1)`），请参阅：[MYSQL count(*) 或 count(1) 中哪个更好？](https://stackoverflow.com/a/5180023/548696).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T18:28:46.913

考虑[学习 SQL](http://www.w3schools.com/sql/default.asp)：

```
select count(*) from mytable where idpost=3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T18:29:18.077

尝试

```
SELECT
    COUNT(*) as NumberRows
FROM
    your_table_name_here
WHERE
    idpost = 3
; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T18:30:54.790

select count(*) 函数获取满足特定条件的行数 - 在 where 语句中定义。

[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html) - 在这里阅读

# wordpress - wordpress 索引页面上的错误

> ID：12333373
> 
> 赞同：0
> 
> 时间：2012-09-08T18:29:00.273
> 
> 标签：wordpress, hyperlink, indexing

我自己做了一个 wordpress 主题，现在我想在链接中不带“wordpress”的情况上传它：（example.com/wordpress/home）所以它应该是一个正常的链接。我遵循了一个教程来实现这一点。整个站点以正确的方式可见，但只有索引页面出现错误。

例如（索引页面不起作用）： http: [//protoformat.nl/](http://protoformat.nl/)

（工作页面）： http: [//protoformat.nl/home](http://protoformat.nl/home)

我遵循的教程是荷兰语，但我也会将其添加到这篇文章中： [http ://wpsitebouw.nl/wordpress-verplaatsen-van-map-naar-hoofdmap/#](http://wpsitebouw.nl/wordpress-verplaatsen-van-map-naar-hoofdmap/#)

谁能帮助我使索引页面可见而不会出现错误？我已经从链接中取出了“wordpress”。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:44:17.967

试试这个。你需要确保

转到管理 > 设置 > 阅读面板。

1.  将“首页显示：”设置为“静态页面”，然后选择您创建的页面（您的主页）作为“首页”。如果您的 WordPress 站点将包含博客部分，请将“帖子页面”设置为您为博客创建的页面。否则，请将此留空。

2.  保存更改。

3.  启用“永久链接”以在地址中显示“页面标题”。

# java - 今天第一次使用 eclipse ......而且 eclipse 我真的不喜欢它。还有哪些更清洁的替代品？

> ID：12333377
> 
> 赞同：0
> 
> 时间：2012-09-08T18:29:44.317
> 
> 标签：java, eclipse, ide

今天第一次使用eclipse……我真的不喜欢它。没有像 eclipse 这样的一百万个按钮和多个窗口，还有哪些其他更清洁的替代方案？Eclipse 太笨重了，我自己也有很多选项和按钮。有人了解我的问题并对我可以使用的另一个 IDE 提出建议吗？我不明白人们如何使用 eclipse 以及为什么它需要如此混乱。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:30:54.860

有诸如此类的替代方案`netbeans`，

如果您不想要这么多按钮，可能是`notepad`，`Notepad++`（或）`EditPlus`等，可能会对您有所帮助，请注意，这些工具不会为您提供自动建议和其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:35:18.200

一旦你习惯了 Eclipse，它并没有那么糟糕。它并没有那么混乱，它实现了大量的定制。

您可以尝试 NetBeans，但这就像从煎锅中直接跳入火中一样。

你看过 IntelliJ 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:36:03.403

**1.**我喜欢的最好的功能之一是`Perspective options`.... 像 Java、DDMS 等等...

**2.** Eclipse 有一些很酷的选项，实际上你也在其他 IDE 中，但我认为它值得一提......

`To format the code:`ctrl + shift + f

`To Import the packages:`ctrl + shift + o

ETC................

**3.**几乎每 3 个部分开放的工具都有`plugins`Eclipse....Audrino 也有 Eclipse 的插件..太棒了....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T18:36:22.193

其他 IDE 包括[NetBeans](http://netbeans.org/)、[BlueJ](http://www.bluej.org/)、[JCreator](http://www.jcreator.com/)、[InteliIDEA](http://www.jetbrains.com/idea/)、[Borland JBuilder](http://www.borland.com/default.aspx)、[Dr. Java](http://drjava.sourceforge.net/)以及更简单的记事本和记事本++

# ios - for(UIButton *keyButton in self.view keyboardView){

> ID：12333379
> 
> 赞同：0
> 
> 时间：2012-09-08T18:30:15.673
> 
> 标签：ios, xcode, uiview

我试图设置变量 keybutton 以允许我检索键盘视图中的所有按钮。虽然我不知道怎么写。这种初始化的另一种形式是使用 NSArray：
`for(UIButton *keyButton in self.KeyBoardButtons){`

NSSArray (keyboardButtons) 有效，那么我该如何替换它以返回 UIView 中的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:29:38.800

我终于弄明白了。

```
 for(UIButton *keyButton in keyboardView.subviews){ 
```

我希望这对人们有所帮助，并且我不会对该帖子投反对票，因为我真的无法通过任何搜索找到它。

通过反复试验解决。

# android - 在录制 Android 4 时逐帧处理 Android 视频

> ID：12333383
> 
> 赞同：0
> 
> 时间：2012-09-08T18:30:21.963
> 
> 标签：android, gps, record, video-processing

我正在尝试制作一个应用程序来录制视频，并将当前的 gps 坐标“嵌入”到录制的视频中。

但是我似乎找不到在录制时将文本添加到框架的方法。

我的目标版本是 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:37:33.140

使用 OpenCv 库

[http://opencv.org/downloads.html](http://opencv.org/downloads.html)

它是一个图像处理库，可让您使用框架做很多很酷的事情。

此外，如果您查看他们提供的示例项目，就会发现一个项目与您刚才描述的完全一样。

# php - 自定义 PHP 验证码

> ID：12333386
> 
> 赞同：1
> 
> 时间：2012-09-08T18:30:34.367
> 
> 标签：php, captcha

我写了一个显示随机方程的php函数。如果未提供正确答案，则提交失败。方程是这样的：

[随机数字或文本数字] [随机选择+,-,x] [随机数字或文本数字]= ?

所以你可能会看到：8+2=?，或 7 - 4 = ?，等等

我手动测试了它，它似乎工作得很好。我无法正确回答 CAPTCHA。尽管有此验证码，但某些人或某人仍在发布垃圾邮件。 ***所以我的问题是，有没有可以解决这个问题的程序？***

这是我的表格：

```
<form action="scripts/handler_post.php" method="post" id="gb_form">
                    <h3>Leave us a comment:</h3><br />
                    <div id="form_msg"><?php echo $msg; ?></div>
                    <input type="text" name="name" value="Your Name" />
                    <textarea name="message">Your Message</textarea>

                    <?php include('includes/bmw_captcha.php'); ?> 
                    <div style="color:red; font-size:90%;">*What does <?php echo $array_num1[1] . " " . $array_calculation[0] . " " . $array_num2[1] . " = "; ?>    
                    <input type='text' maxlength='2' name='captcha' style="color:#640513; width:25px;" />?</div>
                    <div><span style="font:italic 90% Arial; color:#666;">(For security purposes, please answer this CAPTCHA problem.)</span></div>
                    <input type="hidden" name="captcha_answer" value="<?php echo $array_calculation[1]; ?>" />

                    <input type="submit" name="submit_button" value="Post" />
                </form> 
```

这是处理表单的脚本：

```
// submitted values
$name       = clean_string( $_POST['name'] );
$message    = clean_string( $_POST['message'] );
$captcha    = clean_string( $_POST['captcha'] );
$captcha_ans= clean_string( $_POST['captcha_answer'] );

// check if name var is empty or contains digits
if( empty($name) || (strcspn( $name, '0123456789' ) != strlen( $name )) ) 
{ header( 'Location: /guestbook.php?msg=n' ); }

else if( empty($message) )
{ header( 'Location: /guestbook.php?msg=m' ); }

else if( empty($captcha) || $captcha != $captcha_ans )
{ header( 'Location: /guestbook.php?msg=cap' ); }

else 
{
    $query = "
            INSERT INTO $table_posts ( id, name, message, timestamp ) 
            VALUES( 0, \"$name\", \"$message\", now() )
    ";

    $result = $db_connect->query( $query ); // execute the query

    if( $result )
    {       
        header('Location: ../guestbook.php?msg=1');
    }

    else
        header('Location: ../guestbook.php?msg=2');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:35:23.090

您应该将验证码的答案存储在会话变量中。通过表单以明文形式发送，机器人可以将字段设置为它想要的任何值。机器人通常会将所有未知字段设置为某个字符串，例如*ijhsg87dfb34*，因此如果它将 the`captcha`和`captcha_answer`field 设置为相同的值，它将成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:42:07.847

一个非常简单的方法是使用隐藏字段，并在处理 POST 的脚本中检查该字段是否已填写，如果是，则它是 BOT 等，因为普通用户永远不会看到该字段，而只是 BOT 等盲目地填写每个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:37:42.813

您可以尝试非验证码安全表单。检查这个 [http://docs.jquery.com/Tutorials:Safer_Contact_Forms_Without_CAPTCHA](http://docs.jquery.com/Tutorials%3aSafer_Contact_Forms_Without_CAPTCHAs)

# c# - 轻松构建同一个 C# 项目的不同分支（VS2010/TFS）

> ID：12333390
> 
> 赞同：0
> 
> 时间：2012-09-08T18:31:09.267
> 
> 标签：c#, visual-studio-2010, visual-studio, msbuild, wix

我更愿意使用 Team Build/build 定义来解决这个问题，但我对其他解决方案持开放态度。

目前，我有一个构建我的主分支的构建定义。如果我想建立其他分支，最简单的方法是什么？我是否必须为每个分支克隆和修改构建定义，还是有更简单、更优雅的方法？

（具体来说，构建定义构建 MSI 文件，我很想一键为任何以前的版本分支构建 MSI 文件。）

```
MyCollection
|
|-- MyProject
     |
     |-- MainBranch
     |    |
     |    |-- MySolution.sln
     |
     |-- EarlierReleasesFolder
          |
          |-- ReleaseBranch-2012-01
          |    |
          |    |-- MySolution.sln
          |
          |-- ReleaseBranch-2012-02
          |    |
          |    |-- MySolution.sln
          |
          |-- ReleaseBranch-2012-03
          |    |
          |    |-- MySolution.sln
          |
          |-- ReleaseBranch-2012-04
          |    |
          |    |-- MySolution.sln 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:12:10.943

仅使用随 TFS2010 提供的默认模板，无法更改正在构建的目标解决方案。您必须将要构建的解决方案的源路径定义为构建定义的一部分。

当然，TFS Build 只是一个 WF 工作流并且完全可定制；如果您愿意，您可以克隆默认工作流，添加“分支路径”参数，并添加自定义任务以更改 BuildInfo 对象，然后再进入工作流的 MSBuild 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:24:11.713

目前，我在想：

*   [针对 TFS API 编写代码](http://geekswithblogs.net/jakob/archive/2010/04/26/creating-a-build-definition-using-the-tfs-2010-api.aspx)以自动为每个发布分支创建构建定义；或者：
*   手动创建构建定义（使用 Power Tools 能够克隆构建定义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T13:35:17.567

TFS Power Tools 添加了一个 Clone Build Definition 菜单项。它可以轻松复制构建定义，修改源代码控制映射和解决方案以构建列表，然后您就可以开始构建了。

既然您提到了构建 MSI ......我需要了解您是否只是想从这些旧版本开始进行开发，或者这是一个构建再现性练习，其目标是准确地再现 MSI？如果答案是后者，则需要使用静态 PackageCodes 而不是 * 随机。

# wpf - 如何减少文本框的宽度以防止超出网格？

> ID：12333391
> 
> 赞同：0
> 
> 时间：2012-09-08T18:31:13.010
> 
> 标签：wpf, silverlight, windows-phone-7

我有下一个布局

```
<Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="60" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
  </Grid.ColumnDefinitions>

  <Image Grid.Row="0" Grid.RowSpan="2" Grid.Column="0" Width="60" Height="60" />

  <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Orientation="Horizontal">
    <TextBlock Text="Title should be long" HorizontalAlignment="Left" />
    <Ellipse Fill="White" Stroke="White" Width="7" Height="7" />
  </StackPanel>

  <TextBlock Grid.Row="1" Grid.Column="1" Text="Message" /> 
  <TextBlock Grid.Row="1" Grid.Column="2" Text="Info" />
</Grid> 
```

我在托管标题和椭圆的 StackPanel 中有一个问题，目标是椭圆的在线标记应该放在标题的末尾。但它不应该超出视图部分。

我试图将 TextBox 和 Ellipse 放入 Grid 的单元格中，不幸的是它没有帮助。

```
<Grid Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2">
  <Grid.ColumnsDefinitions>
     <ColumnDefinition Width="Auto" />
     <ColumnDefinition Width="*" />
  </Grid.ColumnsDefinitions>

  <TextBlock Grid.Column="0" Text="Title should be long" HorizontalAlignment="Left" />
  <Ellipse Grid.Column="1" Fill="White" Stroke="White" Width="7" Height="7" />

</Grid> 
```

在我看来，它应该呈现正确，但椭圆再次不在视野范围内。

这是一个 Expression Blend 布局截图，相同的布局在运行时呈现。

网格边界：

![在此处输入图像描述](../Images/8de02aff6dc7214bc5bed7275b661269.png)

文本框边界：

![在此处输入图像描述](../Images/277f53b590a4754d5bc4f39934eed563.png)

椭圆边界：

![在此处输入图像描述](../Images/6a5d2e607cef8b1ccd01ed2d94f6bff8.png)

所以 TextBox 和 Ellipse 不在网格中:(

更新：我需要布局的下一个行为

1) 短标题，附在标题末尾的椭圆

![在此处输入图像描述](../Images/a2b925675ffcedb493a0aa13ca40cf8a.png)

2）长标题，附在容器右侧的椭圆

![在此处输入图像描述](../Images/3c188bf32d7e1ae517a5ed34f61d9ec5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:44:24.163

我试过你的代码，它渲染得很好（换句话说，它在视口中渲染。见红色箭头）。请在附件中找到结果的屏幕截图。（我添加了 showgridlines 只是为了说明行和列）

![在此处输入图像描述](../Images/4b1643467f1567d9827cefedec3a6339.png)

//--- 更改测试和固定代码以获得预期效果 ---//

*XAML 中的代码更改：交换了列定义的宽度值。为文本块添加了 Textwrapping 以查看整个文本。（您可以根据自己的审美选择文本修剪。）*

```
<Grid Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Column="0" Text="Title should be really really really really really long" HorizontalAlignment="Left" TextWrapping="Wrap" />
    <Ellipse Grid.Column="1" Fill="White" Stroke="White" Width="7" Height="7"/>
</Grid> 
```

*结果：*

![在此处输入图像描述](../Images/ecc56e4f5fcf220f94d2bf172a785083.png)

# solr - Solr中如何实现分面字段的渐进式公开？

> ID：12333393
> 
> 赞同：0
> 
> 时间：2012-09-08T18:31:23.080
> 
> 标签：solr, lucene, faceted-search

一个很好的例子是 amazon.com，其中搜索“ipod”会显示只有 2 个方面（“部门”和“运输选项”）的结果页面。

当我在“部门”方面点击“电子”时，结果页面会显示“品牌”、“条件”等新方面。

我不断发现新的方面，同时深入研究相同的“部门”层次结构方面，例如在“任何部门/电子产品/便携式音频和视频/MP3 播放器和配件/MP3 播放器”，有“容量”，“播放器功能”， “支持的标准”等等。

我一直在搜索有关如何实现此架构的大量信息，因此任何指针或关键字都会有很大帮助。

谢谢！

**编辑：**只是为了澄清，问题是关于基于先前方面选择的方面的选择性显示。分层刻面的问题是可以的，并且有足够的记录。

# c# - 在不同的线程中加载网站的页面

> ID：12333397
> 
> 赞同：0
> 
> 时间：2012-09-08T18:31:53.610
> 
> 标签：c#, multithreading

例如，我可以使用不同的页面（stackoverflow.com/questions/a、stackoverflow.com/questions/b、...）依次加载网站 10 次。问题是，如果我在 10 个线程中加载页面会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:46:32.573

加载网页的最大时间是等待服务器返回 HTTP 响应，其中大部分时间用于建立 TCP 连接。

HTTP从 1.1 版开始就支持[流水线的概念。](http://en.wikipedia.org/wiki/HTTP_pipelining)这允许沿着同一个 TCP 连接发送多个请求，并且还允许在响应从先前请求返回之前发送它们。

所以是的，使用 10 个线程可以加速加载 10 个不同的页面，但同样，一个线程可以通过使用异步调用并在回复返回之前触发 10 个请求来做同样的事情。

# html - html doctype 是否使页面更安全？

> ID：12333398
> 
> 赞同：1
> 
> 时间：2012-09-08T18:32:08.003
> 
> 标签：html, doctype

doctype 是否有助于使网页更安全？我使用了以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

那么我的页面现在更安全了吗？那个怎么样？[此外，如果在此处](http://validator.w3.org/)使用验证器服务器，当我检查我的页面时，该页面仍会显示一些警告和错误。那么这是否意味着我的页面不安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:38:27.167

DOCTYPE 与安全无关。DOCTYPE 告诉浏览器您的网站是用什么版本的 HTML 编写的，以便浏览器可以相应地显示网站。

W3C 验证器是一种工具，可帮助查找可能影响您的网站在各种浏览器中呈现方式的错误，因此修复您看到的任何报告的问题只会提高可用性和外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:41:36.710

> doctype 是否有助于使网页更安全？

不，它没有。`DOCTYPE`不是安全功能。

它的作用是告诉浏览器它正在阅读什么样的文档。

如果您不指定任何 doctype，则 IE 将进入 quirks 模式，这意味着页面的呈现方式与任何其他浏览器完全不同。你不想要这个，所以你应该指定一个文档类型。（但对于这种情况，使用哪种文档类型并不重要）

doctype 告诉浏览器您希望您的`XHTML Strict`页面是 XHTML，并且要严格执行。

如果您的代码不符合 XHTML 规则，这将（理论上）导致浏览器抛出错误，而不是尝试呈现它。从理论上讲，这会使您的代码更好，因为您可以更轻松地发现错误。然而，许多浏览器实际上并没有强制执行它，这意味着整个“严格”的事情是相当无关紧要的。XHTML 不再被认为是最佳实践，大多数人现在已经从这一点出发，转而使用 HTML5 文档类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:32:46.840

不，添加 doctype 声明对安全性的影响最小。如果您的页面“在 [您] 检查 [您的] 页面时仍然显示一些警告和错误”，则仅表示该页面不符合您通过 doctype 声明引用的文档类型定义。

[验证是纯粹形式上的事情](http://www.cs.tut.fi/~jkorpela/html/validation.html)，违反有效性要求的影响取决于违反的类型。（影响从没有影响到完全崩溃。）

就浏览器而言，使用 doctype 声明只是触发“标准模式”、“几乎标准模式”或“怪癖模式”的魔法咒语，具体取决于浏览器和 doctype。这是一个相当复杂的问题，但是您提到的 XHTML 1.0 doctype 会触发“标准模式”，并且缺少任何 doctype 会触发“<a href="http://www.cs.tut.fi/~jkorpela/quirks-mode .html" rel="nofollow">quirks mode”，这实际上只是浏览器在尝试模仿 20 世纪浏览器版本中的错误时所做的多种怪癖和怪癖的通用名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:47:54.543

No DOCtype 与安全问题无关。为了清楚地了解它，您可能会喜欢这篇文章[http://www.alistapart.com/articles/doctype/](http://www.alistapart.com/articles/doctype/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T18:37:50.320

不，它没有。严格的 XHTML（或任何 doctype）不会使您的页面更好、更好或更快。

# c# - C# ASP.Net 中的全局方法

> ID：12333400
> 
> 赞同：1
> 
> 时间：2012-09-08T18:32:53.130
> 
> 标签：c#, asp.net, azure, global-methods

我正在使用 C# 和 ASP.NET 在 Windows Azure 中进行开发。

我想做一个全局方法来验证字段，我的想法是做一个全局方法（例如在 Site.Master 中）

```
static Regex dateRegex = new Regex("^\\d{2}/\\d{2}/\\d{4}$");
public boolean validate( string type, string stringToValdate)
{
  boolean valid = NO;
  if (type = "date")
  {
      Match m = fechaRegex.Match(stringToValdate);
      if(m.Success)
      {
            valid = true;
      }
  }

 return valid;
} 
```

然后在另一个网络表单中使用它

```
using ????

Site.Master.validate("date",TextBox1.Text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:36:21.423

我会介绍我自己的自定义静态验证类，而不是让它成为 Global.asax 中的一个函数——这更适用于全局站点配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:34:53.690

您可以`Extension Method`在主类型上使用

```
public static class Extension
{ 
    public static boolean Validate(this Master master, 
                                   string type, 
                                   string stringToValdate)
    {
      boolean valid = NO;
      if (type = "date")
      {
          Match m = fechaRegex.Match(stringToValdate);
          if(m.Success)
          {
                valid = true;
          }
      }

     return valid;
    }
} 
```

用例：

```
using NamesPaceOfExtension;

Site.Master.Validate("date",TextBox1.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:49:52.293

您可以使用 a`static class`将所有验证放在一个地方，例如：

```
public static class Validation
{
  private static Regex dateRegex = new Regex("^\\d{2}/\\d{2}/\\d{4}$");

  public static boolean Validate(string type, string stringToValdate)
  {
    boolean valid = false;
    if (type = "date")
    {
        Match m = dateRegex.Match(stringToValdate);
        if(m.Success)
        {
          valid = true;
        }
    }

   return valid;
  }
} 
```

然后你可以从任何地方调用它：

```
bool valid = Validation.Validate("date", "01/01/2012"); 
```

* * *

然而，静态类和方法方便简单，但更难测试。如果您要进行大量单元测试，通常更容易创建一个非静态类来执行实现某些接口的验证，并使用依赖注入框架将一个传递给每个页面请求。不过，这是一个更高级的主题。

* * *

此外，除非您必须这样做，否则您不应该真正制作 1 个大的“验证任何东西”方法，将类型作为字符串传递。它反对关注点分离和单一职责原则。最好为每种类型制作单独的方法。

# sql - 在 Google bigquery 中加入 3 个表

> ID：12333401
> 
> 赞同：0
> 
> 时间：2012-09-08T18:33:02.473
> 
> 标签：sql, google-bigquery

下面的示例在第一个 JOIN 处停止并显示错误消息

在第 13 行第 4 列遇到““JOIN”“JOIN”。期待：“）”

我错过了 Bigquery 中的多个联接的明显内容吗？

```
SELECT type.CourseType AS CourseType, 
       SUM(joined.assign.StudentCount) AS StudentN
FROM
  (
   SELECT assign.StateCourseCode,
          assign.StateCourseName,
          assign.MatchType, 
          assign.Term, 
          assign.StudentCount

   FROM [Assignment.AssignmentExtract5] AS assign

   JOIN SELECT wgt.Term,
               wgt.Weight 

    FROM [Crosswalk.TermWeights] AS wgt
     ON wgt.Term = assign.Term

 ) AS joined

JOIN SELECT type.CourseCode,
            type.CourseDescription, 
            type.CourseType, 
            type.CourseCategory 

FROM [Crosswalk.CourseTypeDescription] AS type
  ON joined.assign.StateCourseCode = type.CourseCode

GROUP BY CourseType 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:19:15.577

谢谢瑞安，非常感谢您的帮助。对于任何可能感兴趣的人，这里有一个有效的查询。

```
SELECT type.CourseCategory AS CourseCategory, 
       SUM(joined.assign.StudentCount) AS StudentN
    FROM
      (
       SELECT assign.StateCourseCode,
              assign.StateCourseName,
              assign.MatchType, 
              assign.Term, 
              assign.StudentCount

       FROM [Assignment.AssignmentExtract5] AS assign

       JOIN (SELECT Term,
                    Weight 

       FROM [Crosswalk.TermWeights]) AS wgt
       ON wgt.Term = assign.Term

     ) AS joined

    JOIN (SELECT CourseCode,
                 CourseDescription, 
                 CourseType, 
                 CourseCategory 

      FROM [Crosswalk.CourseTypeDescription]) AS type
    ON (joined.assign.StateCourseCode = type.CourseCode)

    GROUP BY CourseCategory; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:28:07.260

我认为您只是在第 13 行缺少括号。

这个：

```
 JOIN SELECT wgt.Term,
               wgt.Weight 

    FROM [Crosswalk.TermWeights] AS wgt
     ON wgt.Term = assign.Term 
```

应该：

```
 JOIN (SELECT wgt.Term,
               wgt.Weight 

    FROM [Crosswalk.TermWeights]) AS wgt
     ON wgt.Term = assign.Term 
```

更多信息： [https ://developers.google.com/bigquery/docs/query-reference#multiplejoinsexample](https://developers.google.com/bigquery/docs/query-reference#multiplejoinsexample)

仅供参考 - JOIN 还没有我们想要的那么快。我们正在努力提高性能。

# ruby-on-rails - 自定义休息动作

> ID：12333403
> 
> 赞同：0
> 
> 时间：2012-09-08T18:33:07.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试建立友谊，并创建了一个名为接受的自定义操作。但是我无法达到它。每次我打电话给它时，我都找不到动作节目。

这是我的 route.rb 文件

```
 resources :friendships do
    collection do
      delete 'cancel'
      get 'accept'
    end
  end 
```

我怎么称呼它

```
<%= link_to 'Accept', accept_friendships_path(:friend_id => f) %> 
```

accept_friendships 取自 rake routes 命令。在这里我如何定义我的接受控制器

```
 #Accept friendships
  def accept
    if @customer.requested_friends.include?(@friend)
      Friendship.accept(@customer, @friend)
      flash[:notice] = "Friendship Accepted"
    else
      flash[:notice] = "No Friendship request"
    end
    redirect_to root_url
  end 
```

这里的错误

```
Unknown action

The action 'show' could not be found for FriendshipsController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:37:26.683

也许我错了，但你为什么要“接受”成为一个集合？我猜您希望它成为会员，因为您正在传递friend_id。如果您将其更改为成员并制作路径`accept_friendship_path(@friendship)`[注意单数形式的友谊]，您可能会有更好的运气。[除了一个附加参数之外，您的案例与Ruby on Rails Guides 上](http://guides.rubyonrails.org/routing.html#adding-collection-routes)的示例没有什么不同，这就是值得尝试的原因

# android - Android SQLite 查询不工作

> ID：12333405
> 
> 赞同：0
> 
> 时间：2012-09-08T18:33:24.000
> 
> 标签：android, sqlite

我正在尝试根据 2 个条件（entryId=rowId & category=cat_id）在数据库中搜索数据，如下所示

```
Cursor mCursor = db.query(true, "favorite", new String[] {"_id", "entry"}, "entryId="+ rowId + "& category="+cat_id, null, null, null, null, null); 
```

它不工作。但是，当我尝试仅使用以下一种条件时，它运行良好。

```
Cursor mCursor = db.query(true, "favorite", new String[] {"_id", "entry"}, "entryId="+ rowId, null, null, null, null, null); 
```

你能帮我告诉我如何在多个条件下运行这个查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:45:34.883

在 SQLite`&`中不同于`AND`，只需使用：

```
Cursor mCursor = db.query(true, "favorite", new String[] {"_id", "entry"}, 
        "entryId="+ rowId + " AND category="+cat_id, null, null, null, null, null);
// Change & to AND...  here:  ^^^ 
```

# c++ - 特里波纳奇系列

> ID：12333408
> 
> 赞同：0
> 
> 时间：2012-09-08T18:33:53.640
> 
> 标签：c++, algorithm

> **可能重复：重复**
> [关系](https://stackoverflow.com/questions/12234066/recurrence-relations)

如何找到 tribonacci 系列中的第 n 个数字？我需要和算法足够快，`n`最多可达 10^15。

Tribonacci 数定义为**a(n) = a(n-1) + a(n-2) + a(n-3)**其中 a(0)=a(1)=0, a(2)=1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T18:56:54.397

对于任何具有线性递归的序列，矩阵求幂算法都有效。

如果例如序列有重复

```
a[k] = x*a[k-1] + y*a[k-2] + z*a[k-3] 
```

对于`k >= 3`和初始值，您可以通过相乘`a[0], a[1], a[2]`获得三元组`(a[n+2], a[n+1], a[n])`

```
|x y z|^n  |a[2]|
|1 0 0|  * |a[1]|
|0 1 0|    |a[0]| 
```

通过逐步重复平方，可以使用幂运算将矩阵提升到 n^(次方)`O(log n)`。

# java - 使用 Rest 的 Android Web 服务 - SOAP 消息中的错误

> ID：12333409
> 
> 赞同：0
> 
> 时间：2012-09-08T18:34:07.513
> 
> 标签：java, android, web-services, rest, webservice-client

我在使用 Android RESTful 消费者从 Web 服务获取简单输出时遇到问题。下面是我的代码和我的输出。但是，我似乎无法获得从此 Web 服务返回的值。[http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit)

如果有人能帮助我弄清楚为什么它在 SOAP 消息中显示，我将不胜感激

```
"Server was unable to process request. ---&gt; Data at the root level is      
invalid" 
```

我的代码编译并运行良好

```
public class MainActivity extends Activity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    BufferedReader in = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpPost request = new HttpPost(
                "http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit");

        List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("param1", "77"));
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);

        HttpResponse response = client.execute(request);

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();

        String page = sb.toString();
        // Log.i(tag, page);
        System.out.println(page);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

我的输出

```
09-08 14:25:25.383: I/System.out(1620): <?xml version="1.0" encoding="utf-8"?>   
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><soap:Code> 
<soap:Value>soap:Receiver</soap:Value></soap:Code><soap:Reason><soap:Text   
xml:lang="en">Server was unable to process request. ---&gt; Data at the root level is  
invalid. Line 1, position 1.</soap:Text></soap:Reason><soap:Detail /></soap:Fault> 
</soap:Body></soap:Envelope>

09-08 14:25:25.863: D/gralloc_goldfish(1620): Emulator without GPU emulation detected.
09-08 14:30:00.076: I/Choreographer(1620): Skipped 35 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:01:05.847

我认为您应该按照您提供的网站中的步骤进行`HTTP POST`操作。

据我所知，请求网址应该是`http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit`

此外， POST 参数应该适合`Celsius=77`您的情况。

我用 curl 做了一个简单的测试：

```
curl -d "Celsius=50" http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit 
```

我得到了回应：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">122</string> 
```

这似乎没问题。

`onCreate()`在你的方法中试试这个：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy);

        BufferedReader in = null;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost request = new HttpPost(
                    "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit");

            String celsius = "50";
            request.addHeader("Content-Type", "application/x-www-form-urlencoded");

            List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("Celsius", celsius));
            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
            request.setEntity(formEntity);

            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();

            String page = sb.toString();
            // Log.i(tag, page);
            System.out.println(page);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } 
```

`celsius`您要发布的值在哪里。

我的输出（logcat）如下所示：

```
06-28 07:57:17.506: I/System.out(1847): <?xml version="1.0" encoding="utf-8"?>
06-28 07:57:17.506: I/System.out(1847): <string xmlns="http://tempuri.org/">122</string> 
```

# angularjs - 为什么 Scope.$apply() 调用 $rootScope.$digest() 而不是 this.$digest()？

> ID：12333410
> 
> 赞同：15
> 
> 时间：2012-09-08T18:34:22.800
> 
> 标签：angularjs

在 AngularJS 中，scope.$apply() 在每个事件处理程序（输入指令的 keydown/input 事件、选择指令的更改事件等）和其他一些情况下被调用。

见[小例子](http://jsfiddle.net/7Uxus/)。似乎 ngRepeat 在每次按键时都会重新计算和重新绘制，尽管事实上其他范围内发生了变化。

知道这种决定的理由会很有趣。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T21:32:11.173

有 AngularJS 作者在这方面会很棒，但我相信 $digest() 需要在 $rootScope 上调用，因为在转发器中触发的更改可能会对其他范围（甚至 $rootScope）产生副作用。

问题是**在子作用域中触发的方法可以影响父作用域中的对象**（因为子作用域继承自父作用域）。因此，即使在子作用域中定义的函数不能修改来自父作用域的对象*引用，它们仍然可以修改在父作用域中定义的对象中的值。*

上面的内容可能听起来有点神秘，所以让我们考虑一个（有点人为的）带有项目列表的示例：

```
$scope.items = [{name: 'foo', value:0}, {name: 'bar', value:0}, {name: 'baz', value:0}]; 
```

现在，让我们使用 ng-Repeat 来显示上面的列表，假设点击一个项目应该增加*其他*项目的值（再一次，这个例子有点人为，但这里的重点是在一个范围内触发的动作可以在其他范围内有副作用）。它可以是这样的：

```
$scope.incOther = function(item) {
        for (var i=0; i<$scope.items.length; i++){
            if ($scope.items[i] !== item){
                $scope.items[i].value++;
            }
        }
    }; 
```

示例函数将修改其他范围内的值，AngularJS - 以显示正确的结果 - 需要评估父范围内的观察者（直到 $rootScope 因为我们不知道对象在哪里定义）。

这是说明这一点的完整 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/Z6e5g/3/](http://jsfiddle.net/pkozlowski_opensource/Z6e5g/3/)

事实上，上面的 jsFiddle 还在 $rootScope 中包含了一个对象，以说明观察者评估确实需要从最顶层开始。

# android - BroadcastReceiver 不显示 SMS 未发送或未发送

> ID：12333411
> 
> 赞同：1
> 
> 时间：2012-09-08T18:34:31.227
> 
> 标签：android, sms

在使用广播接收器检查短信状态时，它在发送短信时显示吐司，但在未发送或发送短信时不显示任何内容（我通过输入一个突然的数字来测试它）。我使用的代码是我在每个检查短信发送状态的网站上看到最多的代码。但是我的代码仅在成功发送短信时显示状态。任何人都可以暗示我做错了什么吗？我在 doInBackground() 中有这个方法，所以很明显我正在使用 AsyncTask。

```
public void send_SMS(String list, String msg, AtaskClass task)
{
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    SmsManager sms = SmsManager.getDefault();

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE: Toast.makeText(context, "Generic failure", Toast.LENGTH_SHORT).show();
                    break;

                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(context, "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(context, "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(context, "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent arg1) {

              switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(context, "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED));        

     StringTokenizer st = new StringTokenizer(list,",");    
        int count= st.countTokens();
        int i =1;
        count = 1;

            while(st.hasMoreElements())

            {

                //  PendingIntent pi = PendingIntent.getActivity(this,0,new Intent(this, SMS.class),0);

                    String tempMobileNumber = (String)st.nextElement();

                    //SmsManager sms = SmsManager.getDefault();

                    sms.sendTextMessage(tempMobileNumber, null, msg , sentPI, deliveredPI); 

                      Double cCom = ((double)i/count) * 100; 

                    int j = cCom.intValue();

              task.doProgress(j);
              i++;
              count ++;
               }

     // class ends
    } 
```

# java - 为多个元素解组具有相同名称的对象

> ID：12333412
> 
> 赞同：1
> 
> 时间：2012-09-08T18:34:36.387
> 
> 标签：java, xml, jaxb

要解组的示例 xml 文件

```
 <category>
    <id>abcat0010000</id>
    <name>Gift Center</name>
    <path>
      <category>
        <id>cat00000</id>
        <name>Best Buy</name>
      </category>
      <category>
        <id>abcat0010000</id>
        <name>Gift Center</name>
      </category>
    </path>
    <subCategories>
      <category>
        <id>pcmcat140000050035</id>
        <name>Capturing Photos &amp; Videos</name>
      </category>
      <category>
        <id>pcmcat140000050036</id>
        <name>Listening to Digital Music</name>
      </category>
      <category>
        <id>pcmcat140000050037</id>
        <name>Computing Made Easy</name>
      </category>
      <category>
        <id>pcmcat140000050039</id>
        <name>Simple GPS Navigation</name>
      </category>
      <category>
        <id>pcmcat140000050040</id>
        <name>Playing Video Games</name>
      </category>
      <category>
        <id>pcmcat140000050041</id>
        <name>Watching HDTV</name>
      </category>
      <category>
        <id>pcmcat140000050042</id>
        <name>Enjoying Favorite Movies</name>
      </category>
      <category>
        <id>abcat0012000</id>
        <name>Him</name>
      </category>
      <category>
        <id>abcat0013000</id>
        <name>Teens</name>
      </category>
      <category>
        <id>abcat0014000</id>
        <name>Kids</name>
      </category>
    </subCategories>
  </category> 
```

我的 java 对象

```
 @XmlRootElement(name="category")
    public class Category {
        String id;
        String name;

        public String getId() {
            return id;
        }

        @XmlElement
        public void setId(String id) {
            this.id = id;
        }

        public String getName() {
            return name;
        }

        @XmlElement
        public void setName(String name) {
            this.name = name;
        }
    } 
```

两种“类别”之间的关系有点混乱

```
@XmlRootElement("category")
public class ExtendedCategory extends Category {
    /*String id;
    String name;*/
    List<Category> path;
    List<Category> subCategories;

    /*public String getId() {
        return id;
    }

    @XmlElement
    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    @XmlElement
    public void setName(String name) {
        this.name = name;
    }
*/
    public List<Category> getPath() {
        return path;
    }

    @XmlElementWrapper(name="path")
    @XmlElement(name="category", type=Category.class)
    public void setPath(List<Category> path) {
        this.path = path;
    }

    public List<Category> getSubCategories() {
        return subCategories;
    }

    @XmlElementWrapper(name="subCategories")
    @XmlElement(name="category", type=Category.class)
    public void setSubCategories(List<Category> subCategories) {
        this.subCategories = subCategories;
    }
} 
```

如果我将顶级 xml 元素更改为其他内容（+扩展类别中的相应更改），我遇到了无法将类别转换为 ExtendedCategory 的异常情况

如何为多个元素解组具有相同名称的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:27:49.313

```
@XmlRootElement(name = "category")
public class Category {

    String id;
    String name;
    List<Category> path;
    List<Category> subCategories;

    public String getId() {
        return id;
    }

    @XmlElement
    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    @XmlElement
    public void setName(String name) {
        this.name = name;
    }

    public List<Category> getPath() {
        return path;
    }

    @XmlElementWrapper(name = "path")
    @XmlElement(name = "category", type = Category.class)
    public void setPath(List<Category> path) {
        this.path = path;
    }

    public List<Category> getSubCategories() {
        return subCategories;
    }

    @XmlElementWrapper(name = "subCategories")
    @XmlElement(name = "category", type = Category.class)
    public void setSubCategories(List<Category> subCategories) {
        this.subCategories = subCategories;
    }
} 
```

我在尝试

```
 Category c = JAXB.unmarshal(new File("yourXml"), Category.class); 
```

我得到了包含 2 个路径和 10 个子类别的类别，就像你需要的那样。
下一个：

```
JAXB.marshal(c, System.out); 
```

我得到了与您的示例相同的 XML。

这门课效果很好。对于子类别，将 field `path`to`null`和 field `subCategories`to`null`

# ruby-on-rails - Rails Geocoder 接近方法将结果限制为 100

> ID：12333415
> 
> 赞同：3
> 
> 时间：2012-09-08T18:35:01.830
> 
> 标签：ruby-on-rails, mongodb, mongoid, rails-geocoder

我正在使用 Rails、Mongoid 和 Geocoder。我的问题是`Location.near`将返回的结果限制为 100，即使对于应该产生超过 100 的结果也是如此。我需要一种方法来返回任何位置的所有结果。

```
Location.near([28.4989, -87.7271], 1).count
=> 100 
```

我尝试了几种方法，看起来我应该做类似于以下的事情，它仍然返回 100。

```
Location.near([28.4989, -87.7271]).limit(200).count
=> 100 
```

* * *

**编辑：** 这似乎是该方法的一个已知问题，`near`其默认限制为 100。我能够找到一个返回所有结果的 Mongoid 查询。

```
Location.where(:coordinates.within => { "$center" => [ [-87.7271, 28.4989], 0.01] }).count
=> 186 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T05:24:32.833

看来这是该`near`方法的一个已知问题，其默认限制为 100。我能够找到一个返回所有结果的 Mongoid 查询。

```
Location.where(:coordinates.within => { "$center" => [ [-87.7271, 28.4989], 0.01] }).count
=> 186 
```

# android - ListAdapter 共享

> ID：12333416
> 
> 赞同：1
> 
> 时间：2012-09-08T18:35:05.117
> 
> 标签：android

`ListViews`可以在不同的或不同的适配器之间安全地共享相同的适配器`GridViews`吗？

`getView()`如果是这样，是否可以根据谁要求该视图返回两个不同的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:40:36.010

> 可以在不同的 ListViews 或 GridViews 之间安全地共享同一个适配器吗？

是的。但是为什么要两次显示相同的信息（一次在 ListView 中，一次在 GridView 中）？

> 如果是这样，是否可以根据谁在请求该视图从 getView() 返回两个不同的视图？

是的...您可以根据's parameter覆盖`getView()`并返回不同的视图。但是，如果视图如此不同，为什么不使用不同的适配器呢？`getItemViewType()``getView()``ViewGroup parent`

# iphone - 推送视图控制器时应用程序崩溃

> ID：12333417
> 
> 赞同：2
> 
> 时间：2012-09-08T18:35:11.647
> 
> 标签：iphone, objective-c, ios, ipad, automatic-ref-counting

我有一个视图控制器，它在`viewDidLoad`. 我有一个观察者检查视频何时完成以及当它检测到视频完成时调用一个方法，该方法将视图控制器推入堆栈。但是，当调用此方法时，控制台中会出现以下错误：

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSPathStore2 setView:]: unrecognized selector sent to instance 0xc6ef8e0'`

我使用的代码如下所示：

```
....
....
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(advanceToNextView) name:MPMoviePlayerPlaybackDidFinishNotification object:player];  
....
....
- (void) advanceToNextView {

    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"spoonVC"];

    [self.navigationController pushViewController:controller animated:NO];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.navigationController.view cache:NO];
    [UIView commitAnimations];

} 
```

我不知道我做错了什么。我已经检查并仔细检查了故事板标识符是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:43:52.930

替换您的此代码：

```
[self.navigationController pushViewController:controller animated:NO]; 
```

经过：

```
 [self.navigationController pushViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:47:46.947

它找到了解决方案。制作过渡动画的方式似乎并不一致，但以下似乎对我来说效果很好。

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"page2"];
    [UIView beginAnimations:@"Flip transition" context:nil];
    [UIView setAnimationDuration:0.80];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:
     UIViewAnimationTransitionCurlDown
                           forView:self.navigationController.view cache:NO];
    [self.navigationController pushViewController:controller animated:YES];
    [UIView commitAnimations]; 
```

# php - 如何覆盖css类样式

> ID：12333421
> 
> 赞同：-1
> 
> 时间：2012-09-08T18:35:28.867
> 
> 标签：php, css

我对 Wordpress 主题有疑问。我正在尝试将侧边栏放在标题中......并且由于侧边栏类样式它接收“彩色”背景。如果我要更改它，那么所有侧边栏都会有所更改。

我如何才能仅覆盖该样式类，以便仅在我需要的地方进行更改？

模板 page.php 中的部分部分

```
<?php display_ca_sidebar( $args ); ?> 
```

侧边栏的 css 部分

```
#sidebar ul li{width:298px;float:left; background:url(i/Modern/sidebar.jpg) left top no-repeat #83b1cd;  margin:0 0 19px 0;padding:0 0 10px 0; list-style:none; list-style-type:none;  border:1px solid #536867;} 
```

我需要覆盖“背景”

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:46:24.040

根据此[https://wordpress.org/extend/plugins/content-aware-sidebars/faq/](https://wordpress.org/extend/plugins/content-aware-sidebars/faq/)您可以控制 HTML。因此，当您创建侧边栏时`div`，只需给它一个不同的类，您可以使用它来设置特定侧边栏的样式。

你不应该覆盖任何东西。使用 时`#sidebar`，您应该尝试使用适用于所有“侧边栏”的 CSS 的 ID，然后使用特定的类使每个侧边栏以您想要的方式显示。这使您能够重用类并创建默认类，但您永远不必担心冲突或覆盖事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:47:07.670

我不完全确定你的意思，但如果你试图改变元素列表中一个元素的背景（我猜它是在 li 标签内），那么这可能是有用的：

```
#sidebar ul li:nth-child(2)
{
background:blue;
} 
```

并将第二个数字替换为您需要让侧边栏工作的任何数字

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:37:46.273

给它一个唯一的 id 并将该 id 用作 css 选择器。

# css - CSS幻灯片动画在段落和h1上工作，但不在div上

> ID：12333424
> 
> 赞同：0
> 
> 时间：2012-09-08T18:35:55.080
> 
> 标签：css, html, css-animations

第一个代码向您展示了一个工作动画`h5`（标题从左到右滑入），但是当我使用相同的代码`div`没有发生任何事情时，`div`当我加载没有动画的页面时，它会保持固定并且立即可见。请。帮助。

**h5 CSS 样式 - 工作**

```
h5 {
    font: 25px Arial, serif;
    position: absolute;
    left: 77%;
    top: 0;
    width: 175px;
    padding: 25px 15px 15px 15px;
    margin: 0;
    color: rgb(249, 249, 249);
    background-image: url(bgg.png);
    background-repeat: repeat;

    -moz-border-radius-bottomright:20px;
    -moz-border-radius-bottomleft:20px; 
    -webkit-border-bottom-right-radius:20px;
    -webkit-border-bottom-left-radius:20px;
    border-bottom-right-radius:20px;
    border-bottom-left-radius:20px;

    -webkit-animation-name: h5Slider;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-directiuon:normal;
    -moz-animation-name: h5Slider;
    -moz-animation-duration: 2s;
    -moz-animation-iteration-count:1;
    -moz-animation-directiuon:normal;

}

@-webkit-keyframes h5Slider {
    from {
        margin: 0 0 0 -35%;
    }
    to {
        margin: 0;
    }
}

@-moz-keyframes h5Slider {

    from {
        margin: 0 0 0 -35%;
    }
    to {
        margin: 0;
    }
} 
```

**div CSS 样式 - 不工作**

```
#canvas1Div {
    background-image: url(bgg.png);
    background-repeat: repeat;
    position: absolute;
    margin:-100px 0px 0px -200px;
    top: 45%; 
    left: 50%;

    -webkit-animation-name: divSlider;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-direction:normal;
    -moz-animation-name: divSlider;
    -moz-animation-duration: 2s;
    -moz-animation-iteration-count:1;
    -moz-animation-directiuon:normal;
}

-webkit-keyframes divSlider {
    from {
        margin: 0 0 0 -35%;
    }
    to {
        margin: 0;
    }
}

@-moz-keyframes divSlider {
    from {
        margin: 0 0 0 -35%;
    }
    to {
        margin: 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:45:28.110

你需要一个`@`之前`-webkit-keyframes divSlider`

# extjs - ExtJS4 - Ext.dom.Element 和 fireEvent

> ID：12333425
> 
> 赞同：6
> 
> 时间：2012-09-08T18:35:56.933
> 
> 标签：extjs, extjs4, extjs4.1

我正在测试 ExtJS4，但在这里需要一些帮助...

我有这个 HTML 代码：

```
<input type="button" value="Click" id="sendButton">

<input type="text" id="tbox"> 
```

而这个脚本代码：

```
Ext.addBehaviors({
    '#sendButton@click': function (){
        alert("Test");
    }
}); 

Ext.get('tbox').on('keydown', function(e){
    if(e.keyCode == Ext.EventObject.ENTER){
        //Ext.select('#sendButton').fireEvent('click');
        //Ext.get('sendButton').fireEvent('click');
        // this is what I need working....
    }
}); 
```

我只是想，当您在文本框上按 Enter 时，它会像您单击按钮一样。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T07:50:04.573

```
Ext.get('tbox').on('keydown', function(e){
    if(e.keyCode == Ext.EventObject.ENTER){
        Ext.get('sendButton').dom.click();

    }
}); 
```

虽然我建议用`Ext.onReady(function(){...})`

# java - Java - 客户端/服务器游戏服务器协议。如何传递命令？

> ID：12333426
> 
> 赞同：1
> 
> 时间：2012-09-08T18:35:55.713
> 
> 标签：java, client-server

我为使用套接字的 2D 自上而下 RPG 游戏编写了一个客户端-服务器对。但是，我不清楚如何准确地传输用户想要做的事情。

我会简单地传输一个像“向北移动”这样的字符串，然后使用 switch 语句来决定要采取什么行动，还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:39:49.947

如果客户端和服务器都是 java 程序，那么我将使用[命令](http://en.wikipedia.org/wiki/Command_pattern)模式，其中每个命令类都执行特定的工作（如您的情况下的“向北移动”），并且命令对象在客户端和服务器之间交换。

我们曾经在我们的企业应用程序（虽然不是游戏）中使用这种方法，同时实现多主机复制，并且它非常可扩展，无需任何 if/else 链或 switch 语句，只需接收命令并调用 command.execute() 无需担心命令是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:40:53.937

是的，基本上。你可以传输任何你想要的字符串、整数。您基本上将命令写入可以从客户端的网络套接字获取的 OutputStream，然后在服务器端的 InputStream 上读取它们。

您可以将来自[Socket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)的 Input/OutputStream 对象与其他流类型（例如[ObjectOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html) / [ObjectInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html) ）包装在一起，这样您就可以直接将完整对象和原始类型读/写到流中，就像读/写数据一样使用这些相同的流类型到文件系统上的文件。

对网络的读/写实际上与从任何其他地方读/写没有什么不同，除了在网络中您必须首先通过套接字建立连接。一旦你有了那个套接字和正确的流类型设置，你就可以像在应用程序中的其他任何地方一样读/写数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T03:43:35.667

我认为您应该选择一个序列化库来执行此操作，而不是从流中进行原始解析。

我建议使用 Protocol Buffers 或 FlatBuffers。

只需传输字节数组，它们就会为您解析为对象。

# android - Android 动态壁纸首选项未保存

> ID：12333429
> 
> 赞同：0
> 
> 时间：2012-09-08T18:36:08.350
> 
> 标签：android, android-preferences

我试图在墙纸被破坏时保存一些数据，例如，当您旋转手机时会发生这种情况。

当我使用调试器单步执行代码时，设置似乎可以保存。但是正常运行时，壁纸设置不会保存。我通过从 IDE 重新安装来破坏壁纸。

在我的墙纸 onDestroy() 方法中，我执行以下操作：

```
SharedPreferences.Editor editor = m_prefs.edit();
editor.putString(Preferences.INFO_AUTHOR.getParamKey(), currentPhoto.getAuthor());
editor.putString(Preferences.INFO_TAGS.getParamKey(), currentPhoto.getTags());
editor.putString(Preferences.INFO_DESC.getParamKey(), currentPhoto.getDescription());
editor.commit(); 
```

我在保存时检查了模型 currentPhoto 是否正确。

不知道我在这里做错了什么，我有其他偏好在其他时间保存，这些工作正常。

# wordpress - WP_Query，自定义字段，无分页

> ID：12333433
> 
> 赞同：1
> 
> 时间：2012-09-08T18:36:25.543
> 
> 标签：wordpress, pagination, custom-fields

我有这个代码：

```
<?php $q = new WP_Query(array(
            'post_type' => 'oferty'
        ));
    ?>
    <?php while ($q -> have_posts()) : $q -> the_post(); ?>
    <!-- .post | id: <? echo $post->ID; ?> -->
        <article <?php post_class() ?> id="post-<?php the_ID(); ?>">
            <div class="entry">
                <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>
                <small><?php echo get_field('bank'); ?></small>
                <?php the_content(); ?>
            </div>
            <?php $thumb = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'thumbnail' ); ?>
            <?php if($thumb) : ?>
            <div class="bankimg" style="background-image: url('<?php echo $thumb[0];?>')"></div>
            <?php endif; ?>
            <div class="clear"></div>
        </article>
        <!-- /.post | id: <? echo $post->ID; ?> -->
    <?php endwhile; wp_reset_query(); ?>
        <?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); } ?> 
```

它用于`wp_query`列出来自 post type 的所有帖子`oferty`。我在 WordPress 选项中将帖子的限制设置为 2 并且它可以工作 - 但没有显示分页。我尝试了 WP PageNavi、WP Pagination 和普通 WordPress 的 prev/next 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:57:32.783

查询自定义帖子类型时查看分页参数：

[https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

具体来说，试试这个：

```
$q = new WP_Query(array(
    'post_type' => 'oferty',
    'posts_per_page' => 2
)); 
```

# c# - (WP7DEV) 输入时文本框背景发生变化

> ID：12333443
> 
> 赞同：0
> 
> 时间：2012-09-08T18:38:03.517
> 
> 标签：c#, textbox, windows-phone-7.1, background-color

我在 XAML 中创建了一个文本框，如下所示：

```
 <TextBox x:Name="search"
              TextWrapping="Wrap"
              VerticalAlignment="Top"
              Margin="-12,-13,45,0"
              Background="#FFB2B2B8"
              BorderBrush="Transparent"
              Foreground="White"
              inputScope="Search" 
              SelectionForeground="#FF72BCE6" /> 
```

每当我点击文本框写东西时，它的背景就会改变。如何设置背景以使其始终具有相同的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:45:49.183

使用焦点事件处理程序。

编辑：进一步解释，

1.  将 onfocus 事件处理程序附加到文本框

2.  在该方法中，将文本框的背景颜色设置为您想要的颜色。

进一步扩展，如果您想了解更多我的意思，请查看 [http://www.limguohong.com/2012/09/windows-phone-7-textbox-on-focus-color/](http://www.limguohong.com/2012/09/windows-phone-7-textbox-on-focus-color/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:49:55.373

您可以尝试创建一个新模板并使背景颜色在聚焦时保持不变。

# machine-learning - 如何结合两个不同维度的特征？

> ID：12333444
> 
> 赞同：1
> 
> 时间：2012-09-08T18:38:08.977
> 
> 标签：machine-learning, classification, feature-extraction

让我们考虑文本分类的问题。因此，如果将文档表示为 Bag of words ，那么我们将有一个 n 维特征 ，其中文档中有 n 个单词。现在如果我决定我也想使用文档长度作为特征，那么这个特征的维度（长度）将是一。那么我如何结合使用这两个功能（长度和词袋）。现在应该将特征考虑为 2 维（n 维向量（BOW）和 1 维特征（长度）。如果这不起作用，我该如何组合这些特征。任何关于此的指针也会有帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:38:32.240

这句话有点模棱两可：“所以如果将文档表示为 Bag of words，那么我们将有一个 n 维特征，其中文档中有 n- 个单词。”

我的解释是，您的语料库中出现的每个单词都有一个列（可能仅限于某些感兴趣的字典），并且对于每个文档，您都计算了该单词的出现次数。您的列数现在等于字典中出现在任何文档中的单词数。您还有一个“长度”功能，它可以计算文档中的字数，并且您想知道如何将其合并到您的分析中。

一种简单的方法是将单词出现的次数除以文档中的总单词数。

这具有根据文档大小缩放单词出现的效果，并且新功能称为“词频”。下一个自然步骤是对术语频率进行加权，以补偿语料库中更常见（因此不太重要）的术语。由于我们对不太常见的术语赋予更高的权重，这称为“逆文档频率”，整个过程称为“术语频率乘以逆文档频率”，或 tf-idf。你可以谷歌这个以获取更多信息。

* * *

您可能正在以不同的方式进行字数统计 - 例如，计算每个段落（而不是每个文档）中出现的单词数。在这种情况下，对于每个文档，每个段落都有一个字数，典型的方法是使用诸如奇异值分解之类的过程来合并这些段落数。

# ruby-on-rails - 可变长度的表单提交

> ID：12333449
> 
> 赞同：0
> 
> 时间：2012-09-08T18:38:42.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, form-submit

我想创建一个 form_for 语句，它允许用户从下拉菜单（或自动完成字段）中一个一个地选择元素。当用户选择每个项目时，它们应该以列表格式显示在屏幕顶部。当用户完成选择元素时，可以提交表单并将所选元素的列表发送到接收控制器动作。

有人可以告诉我如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:43:02.417

也许选择的是你需要的。

看看： [http ://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

# flash - Flash：访问 swf 中的所有文本框

> ID：12333452
> 
> 赞同：0
> 
> 时间：2012-09-08T18:39:13.017
> 
> 标签：flash, text-search

我有一个主 swf 文件，它将动态加载几个 swf 并以页面卷曲效果显示它。从主 swf 我必须有一个搜索选项，它需要在动态加载的 swf 的所有文本框内容中搜索特定文本。这种情况是立场还是关于如何做到这一点的任何想法？

顺便说一句，动态 swf 是通过选项从 InDesign 导出的（文本：Flash 经典文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:27.103

我认为您可以从加载完成功能中获得访问权限。在您的加载完成功能中，您将加载程序内容（loader.content）添加到舞台。这样，您可以通过以下方式获取动态添加的 swf 的根目录

```
var mc = loader.content.getChildAt(0); 
```

从此，

```
var txt:TextField = mc.getChildByName(UR TEXTFIELD NAME) as TextField; 
```

# jquery - 如何从 ASP Button 调用 JQuery？

> ID：12333455
> 
> 赞同：0
> 
> 时间：2012-09-08T18:39:48.660
> 
> 标签：jquery, asp.net

我一直在尝试从中调用 JQuery 代码，`Button1`但是每当我单击该按钮时，什么都没有发生。我怀疑这里缺少一些东西。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.js"/>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"/>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#Button1").click(function () {
            alert("Hello");
         });
    });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div runat="server">
<asp:Button ID="Button1" runat="server" Text="Button" />    
    </div>
    </form>
</body>
</html> 
```

请帮助我，因为我是 ASP 的 Jquery 新手

**更新！呈现的 HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"/>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#B1").click(function () {
                alert("Hello");
            });
        });
    </script>
</head>
<body>

    <form name="form1" method="post" action="Default.aspx" id="form1" enctype="multipart/form-data">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTExNzQxODc4NzgPZBYCAgMPFgIeB2VuY3R5cGUFE211bHRpcGFydC9mb3JtLWRhdGEWAgITDzwrAA0AZBgBBQlHcmlkVmlldzEPZ2S859s2HXOd3dMN1a3AFBBA24YTWA==" />
</div>

<div>

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBwLCh8GMCAKl1bK4CQK1qbSRCwKM54rGBgK7q7GGCALWlM+bAgLe7+btDB1tn9tYIpN00SJIvx3i3VxCTOP7" />
</div>

    <input type="submit" name="B1" value="Button" id="B1" />

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:44:00.637

您已经包含了 jquery 两次——标准版和缩小版。您不需要两次包含相同的 js 库。标签也`<script>`不能自动关闭。

这是正确的方法：

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#Button1").click(function () {
            alert("Hello");
        });
    });
    </script>
</head> 
```

此外，由于控制 ASP.NET 中的名称修改，建议使用服务器端构造来确保 id 正确：

```
$("#<%= Button1.ClientID %>").click(function () {
    alert("Hello");
}); 
```

或使用[类选择器](http://api.jquery.com/class-selector/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T18:45:57.287

可能你的渲染ID`<asp:Button />`不是`Button1`，而是类似`ctl00_Button1`

试试这个

```
$(document).ready(function(){
    $("#<%=Button1.ClientID %>").click(function () {
        alert("Hello");
    });
}); 
```

看来您正在加载 jQuery 两次，其中之一是为带宽速度而缩小的

拿出第一个

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script> 
```

留下这个

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:58:16.923

您可以尝试将类添加到按钮元素，并在 div 上下文中找到它：

**Javascript：**

```
$(document).ready(function(){

   var $context = $('#containerForm').find('form'); 
   $context.find('.mybutton').bind('click', function (event) {
      alert("Hello");
   });
}); 
```

**html:**

```
<body>
    <div id="containerForm">
       <form id="form1" runat="server">
       <div runat="server">
           <asp:Button ID="Button1" runat="server" Text="Button" class="mybutton" />    
       </div>
       </form>
    </div>
</body> 
```

**编辑：**

或者，使用此选择器查找按钮元素`$context.find('input[name*="Button1"]')`，使用上下文以获得更好的性能。

**编辑二：**

您的代码运行良好（[见此](http://jsfiddle.net/adescalzo/Q55a2/)）。您应该验证文件“ `Scripts/jquery-1.4.1.min.js`”是否加载正常，您可能位于与文件夹“ `Scripts`”不同级别的路径中，具体取决于级别或设置项目时，您可以放置​​“ `Scripts/jquery-1.4.1.min.js`”，但是如果你有“ `/MyProyect/Scripts/jquery-1.4.1.min.js`”，你必须小心。

要验证这一点，您可以使用“ [fiddler](http://www.fiddler2.com/fiddler2/) ”，并找到 http 状态码 400。

# ios - Cocos2d-x replaceScene 导致app崩溃

> ID：12333459
> 
> 赞同：2
> 
> 时间：2012-09-08T18:40:52.013
> 
> 标签：ios, arrays, cocos2d-iphone, assert, cocos2d-x

我正在将我的 iOS 游戏从 Cocos2d 移植到 Cocos2d-x。我在 C++ 方面还不是最好的，所以我无法自己调试！

我所拥有的是两个场景的简单场景，一个在运行时加载以显示介绍，然后加载另一个场景，第一个介绍场景由以下方式加载：

```
//Create a scene. it's an autorelease object
CCScene *pScene = landingScene::scene();
// Run intro scene
pDirector->runWithScene(pScene); 
```

现在加载后，一切正常，直到我尝试通过运行替换该场景：

```
CCDirector::sharedDirector()->replaceScene(mainScene::scene()); 
```

一旦我调用 this ，应用程序就会断言并给出以下消息：

```
Assertion failed: (index<=arr->num),functionccArrayInsertObjectAtIndex, xxx/libs/cocos2dx/support/data_support/ccCArray.cpp, line 153. 
```

我去线路查看线路，这是内容：

```
/** Inserts an object at index */
void ccArrayInsertObjectAtIndex(ccArray *arr, CCObject* object, unsigned int index){
    CCAssert(index<=arr->num, "Invalid index. Out of bounds");
    CCAssert(object != NULL, "Invalid parameter!");
...
} 
```

这是我的介绍（着陆）场景 .h 文件的内容：

```
#ifndef __LANDING_SCENE_H__
#define __LANDING_SCENE_H__

// When you import this file, you import all the cocos2d classes
#include "cocos2d.h"
#include "GameState.h"

class landingScene : public cocos2d::CCLayer {
public:
    landingScene();
    ~landingScene();
    void loadGame();
    static cocos2d::CCScene* scene();
private:
    //The game state Singleton
    GameState *sharedGameState;
}; 
```

和 .cpp 文件：

```
#include "landingScene.h"
#include "SimpleAudioEngine.h"
#include "mainScene.h"
#include "introScene.h"

using namespace cocos2d;
using namespace CocosDenshion;

landingScene::landingScene(){
    setTouchEnabled( true );

    //Load some sprites here, removed it for simplicity

    //This is where the app crashes
    landingScene::loadGame();
}

landingScene::~landingScene(){
}

CCScene* landingScene::scene(){
    // 'scene' is an autorelease object
    CCScene *scene = CCScene::create();

    // add layer as a child to scene
    CCLayer *layer = new landingScene();
    scene->addChild(layer);

    return scene;
}

void landingScene::loadGame(){
    CCDirector::sharedDirector()->replaceScene(mainScene::scene());
} 
```

这是我试图展示的主要场景的内容：

```
#ifndef _MAIN_SCENE_H_
#define _MAIN_SCENE_H_

//When you import this file, you import all the cocos2d classes
#include "cocos2d.h"
#include "GameState.h"

class mainScene : public cocos2d::CCLayer {
public:
    ~mainScene();
    mainScene();
    static cocos2d::CCScene* scene();
private:
    GameState *sharedGameState;
};
#endif // _MAIN_SCENE_H_ 
```

和 .cpp 文件：

```
#include "mainScene.h"
#include "cocos2d.h"
#include "SimpleAudioEngine.h"

using namespace cocos2d;
using namespace CocosDenshion;

mainScene::mainScene(){
}

mainScene::~mainScene(){
}

CCScene* mainScene::scene(){
    // 'Scene' is an autorelease object
    CCScene *scene = new CCScene();

    // Add layer as a child to scene
    CCLayer* layer = new mainScene();
    scene->addChild(layer);
    layer->release();

    return scene;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:53:29.010

原因是您甚至在第一个场景完成创建之前就替换了场景。尝试在 onEnter() 或 onTransitionDidfFinished() 中调用替换函数

# mysql - 在mysql中插入unix时间戳

> ID：12333461
> 
> 赞同：8
> 
> 时间：2012-09-08T18:41:01.813
> 
> 标签：mysql

我有下表，属性如下

```
CREATE TABLE `test` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `active` varchar(4) CHARACTER SET latin1 DEFAULT NULL,
  `von` date DEFAULT NULL,
  `bis` date DEFAULT NULL,
  `rabatt` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `code` varchar(64) CHARACTER SET latin1 DEFAULT NULL,
  `text_kurz` text CHARACTER SET latin1,
  `linkname` varchar(1024) CHARACTER SET latin1 DEFAULT NULL,
  `link` varchar(2048) CHARACTER SET latin1 DEFAULT NULL,
  `special` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `type` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `hersteller` varchar(128) CHARACTER SET latin1 DEFAULT NULL,
  `smb` smallint(1) DEFAULT NULL,
  `dhs` smallint(1) DEFAULT NULL,
  `sidebar` varchar(4) CHARACTER SET latin1 DEFAULT 'ja',
  `img_tag` text CHARACTER SET latin1,
  `dm_bild` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `von` (`von`),
  KEY `bis` (`bis`),
  KEY `type` (`type`),
  KEY `active` (`active`),
  KEY `code` (`code`),
  FULLTEXT KEY `Volltext` (`text_kurz`)
) ENGINE=MyISAM AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 
```

我想用php插入德语格式的unix时间戳我一直在尝试以下

```
 $time = "1057941242";
    $qry = 'INSERT INTO test (active, von, bis, rabatt, code, text_kurz)
                        VALUES("ja",FROM_UNIXTIME('.$gutschein->startDate.'),
                                    FROM_UNIXTIME('.$gutschein->endDate.'),
                                    "'.$gutschein->title.'",
                                    "'.$gutschein->code.'",
                                    "'.$gutschein->shortDescription.'")' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-08T18:57:37.290

您的时间戳（例如 1346882400000）似乎是自 UNIX 纪元以来的*毫秒*数，而自 UNIX 纪元以来需要一个以*秒*[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime)为单位的参数。因此，您应该将参数除以 1000：

 *```
$qry = 'INSERT INTO test (active, von, bis, rabatt, code, text_kurz)
                    VALUES("ja",FROM_UNIXTIME('.$gutschein->startDate/1000.'),
                                FROM_UNIXTIME('.$gutschein->endDate/1000.'),
                                "'.$gutschein->title.'",
                                "'.$gutschein->code.'",
                                "'.$gutschein->shortDescription.'")' 
```

您还应该考虑使用[准备好的语句](https://stackoverflow.com/a/60496/623041)，将变量作为参数传递给其中，这些参数不会被 SQL 评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:55:21.540

我建议你稍微改变一下你的方法。

您可以将它们以特定格式存储并从那里“翻译”它，而不是将本地化数据存储在数据库中。例如，您将日期存储在 von 和 bis DATE 字段中。相反，您可以将这些字段转换为 INT 并存储 unix 时间戳。

这种方法将使您受益于将日期转换为您需要的任何语言环境/格式 - 在您的情况下是德语。

但是，如果您只是希望上述工作，那么您将需要更改您的 INSERT 语句如下（我假设 $gutschein->startDate 是一个数字，即 unix 时间戳

```
$time = "1057941242";
$qry = 'INSERT INTO test (active, von, bis, rabatt, code, text_kurz) '
     . 'VALUES('
     . '"ja", '
     . 'FROM_UNIXTIME(' . $gutschein->startDate . ', "%Y-%m-%d %H:%i:%s"), '
     . 'FROM_UNIXTIME(' . $gutschein->endDate . ', "%Y-%m-%d %H:%i:%s"), '
     . '"' . $gutschein->title . '", '
     . '"'.$gutschein->code.'", '
     . '"'.$gutschein->shortDescription.'")' 
```

如果日期格式不适用于德国，请参考下面的链接以获取最适合您的格式

[FROM_UNIXTIME 参考](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)*

# macos - 如何抑制 cpio 警告：磁盘上的文件不旧；跳过

> ID：12333462
> 
> 赞同：3
> 
> 时间：2012-09-08T18:41:14.120
> 
> 标签：macos, command-line, osx-mountain-lion

`find . | cpio -pdm destination`我使用 cpio ( )创建大目录的卷影副本

升级到 Mountain Lion 后，cpio 现在警告我它没有复制的每个文件，即`cpio: ./some-file: File on disk is not older; skipping.`

我可以重定向`stderr`；但是，我确实想知道真正的错误，例如目的地已满。

`cpio --quiet`没有帮助。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:46:26.130

这意味着您的目标文件比您的源文件更新。这可能来自您机器上错误的当前时间。如果您确定要覆盖，可以使用`-u`cpio 开关：来自[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/cpio.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/cpio.1.html)：

```
-u  (i and p modes) Unconditionally overwrite existing files.  Ordinarily, an older file will not overwrite a newer file on disk. 
```

# ruby-on-rails - ruby on rails TypeError in Users#show - 无法访问喜欢

> ID：12333466
> 
> 赞同：2
> 
> 时间：2012-09-08T18:42:09.650
> 
> 标签：ruby-on-rails, model, associations, typeerror

*导致问题的形式：*

```
<%= form_for Like.find(post.user.likes), :html => { :method => :delete , :class => "unlike_post_like_form" } do |f| %> 
```

**后模型**

```
belongs_to :user
has_many :likes 
```

**用户模型**

```
 has_many :posts
  has_many :likes 
```

**喜欢模型**

```
 belongs_to :post
  belongs_to :user 
```

我不断收到以下错误：

```
TypeError in Users#show 
Cannot visit Like 
```

上

```
Like.find(post.user.likes), 
```

**编辑：**

**第一个解决方案：**

改变

```
Like.find(post.user.likes), 
```

至

```
Like.find(post.user.likes).limit(1), 
```

**第二种解决方案：**

改变

```
Like.find(post.user.likes), 
```

至

```
current_user.likes.where(:post_id => post.post_id) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:45:23.247

`Like.find(post.user.likes)`正在尝试查找`Like`给定的 . 数组`likes`。这真的没有多大意义。

很可能，您会想要搜索`post.user.likes`，但即便如此，我还是有点困惑——您需要发布更多代码。

`Like.find`正在寻找 id（整数）或包含键和值的散列。数组不给它任何搜索信息。

**编辑：**如果您正在寻找当前用户的喜欢。您需要执行以下操作...

`current_user.likes.where(:post => @post)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:45:38.283

例如，类型错误来自将集合（`post.user.likes`- 这是一个数组）传递给期望记录 id 的方法，`Likes.find(3)`或者`Likes.find(params[:id])`

# javascript - 语法错误：缺少；使用 AJAX 声明之前

> ID：12333468
> 
> 赞同：0
> 
> 时间：2012-09-08T18:42:43.337
> 
> 标签：javascript, jquery, ajax, syntax-error

我在执行 ajax 请求时遇到了这个错误，并且在查看后如果我根本找不到问题。这是下面的代码。

```
$('#post_submit').click(function() {

var poster_id = <?php echo $session_user_id; ?>;
//firebug syntax error shows the line below is the problem
var profile_user_id: <?php echo $user_id; ?>;
var post = $('#post').val();
$.post('ajax_submit_post.php', 
    {
        profile_user_id: profile_user_id,
        poster_id: poster_id,
        comment_type : comment_type,
        post: post      
    }, 
    function () {
        $('#status').append('<li class="hide">Posted</li>').hide(1000); 
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:48:07.077

我想你的意思是使用等号？

```
var profile_user_id = <?php echo $user_id; ?>; 
```

代替

```
var profile_user_id: <?php echo $user_id; ?>; 
```

# php - 在 XMLHttpRequest 之后重新初始化 jQuery

> ID：12333471
> 
> 赞同：0
> 
> 时间：2012-09-08T18:42:57.893
> 
> 标签：php, javascript, jquery, twitter-bootstrap, xmlhttprequest

我在侧边栏上使用 Twitter Bootstrap 的 Popover 功能。每 30 秒获取侧边栏并重新加载内容。我正在起诉 XMLHttpRequest 通过获取一个名为 stats.php 的文件来重新加载侧边栏的内容。

以下代码是驻留在页面标题中的“刷新”代码。

```
function onIndexLoad()
{
    setInterval(onTimerCallback, 30000);
}

function onTimerCallback()
{
  var request = new XMLHttpRequest();
  request.onreadystatechange = function()
  {
      if (request.readyState == 4 && request.status == 200)
      {
          document.getElementById("stats").style.opacity = 0;
          setTimeout(function() {
              document.getElementById("stats").innerHTML = request.responseText;
                document.getElementById("stats").style.opacity = 100;
              }, 1000);
      }
  }
  request.open("GET", "stats.php", true);
  request.send();
} 
```

上面的代码完美无缺，但是，在它重新加载#stats div 之后，弹出框不再做它应该做的——弹出。

弹出框代码位于 foreach() 循环中的 stats.php 中，因为我需要多个弹出框脚本，因为侧边栏上有多个弹出框。

这是我的弹出框代码：

```
$(document).ready(function() {
  $('a[rel=popover_$id]').popover({
        placement:'right',
        title:'$title',
        content: $('#popover_content_$id').html()
  });
}); 
```

`$id`和是动态的`$title`，因为它们是从 foreach() 循环中拉出的。

如何修复它，以便在 div 重新加载后，popover 函数将重新初始化？

* * *

```
$("a[rel=popover_controller_$cid]").on({
    mouseenter: function () {
        $('a[rel=popover_$id]').popover({
                placement:'right',
                title:'$title',
                content: $('#popover_content_$id').html()
        });
    }
}); 
```

我也试过：

```
$("a[rel=popover_controller_$cid]").on("mouseover", function () {
    $('a[rel=popover_$id]').popover({
            placement:'right',
            title:'$title',
            content: $('#popover_content_$id').html()
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:05:01.687

`.live`已贬值。使用`.on`委托

尝试这样的事情：

```
$('#stats').on("mouseenter", "a[rel=popover_controller_$cid]",function () {
        $('a[rel=popover_$id]').popover({
                placement:'right',
                title:'$title',
                content: $('#popover_content_$id').html()
        });

}); 
```

这将 mouseenter 事件从`#stats`to委托给，并且因为该事件是委托的，所以在替换内容`a[rel=popover_controller_$cid]`时它仍然会触发。`#stats`

小心 - 您将在每次鼠标悬停时继续初始化弹出框。那可能很糟糕。

当你在它的时候 - 你应该使用 jquery 的 ajax 而不是原生的 xhr。它更容易，更跨浏览器。

```
$.get('stats.php', function(d){
    $('#stats').html(d);
}; 
```

--

```
setInterval(function(){
    $.get('stats.php', function(data) {
        $('#stats').html(data);
    });
}, 30000); 
```

# asp.net - 具有存储库模式的实体框架 DAL、BLL

> ID：12333473
> 
> 赞同：3
> 
> 时间：2012-09-08T18:43:03.697
> 
> 标签：asp.net, asp.net-mvc, entity-framework, data-access-layer, business-logic-layer

我正在尝试使用 UI、BLL 和 DAL 构建三层架构。我正在使用带有存储库模式的实体框架。

我的问题是：实体框架生成的实体是否应该充当我的 BLL 的一部分，或者这些只是 DAL 对象？

问的原因是因为感觉就像我在复制代码。例如：我有一个由实体框架直接从我的数据库生成的 DAL.CatEntity。这一切都很好，花花公子。然后我使用我的存储库（它是我的 DAL 的一部分）将数据拉入 DAL.CatEntity。然后我在我的 BLL 中使用这个 DAL.CatEntity，提取它的所有数据，并将其转换为 BLL.Cat。然后我在我的 UI 层中使用这个 BLL.Cat。

下面是一些超级简化的代码。

BLL

```
public Cat GetCat(string catName){
    CatEntityRepository _repository = new CatEntityRepository;
    Cat cat = null;
    CatEntity catEntity = _repository.GetSingleCat();
    cat = ConvertToCat(catEntity);
    return cat;
}

private Cat ConvertToCat(CatEntity entity){
    return new Cat(){
        Name = entity.Name,
        Color = entity.Color,
        //....
    }
} 
```

用户界面：

```
public ActionResult method(){
    Cat cat = BLL.GetCat();
    //......
} 
```

似乎没有必要同时拥有 Cat 和 CatEntity。在将存储库用作我的 DLL 时，我可以只使用我的 EntityFramework 实体作为我的 BLL 的一部分吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:53:46.863

最终，无论您做什么，都取决于您。大多数应用程序介于理想和可怕之间，处于务实和实用之间。

您需要做的是查看应用程序的复杂性。它越复杂，它就越能从高度分离中受益。通常，应用程序的简单性并不能证明创建清晰图层所需的大量工作是合理的。

话虽如此，在我看来，在大量中小型复杂应用程序中，您可以有效地将您的实体视为业务对象。特别是，如果您将实体 POCO 和业务层的一部分，然后在您的 EF DAL 中使用这些实体，它会非常有效。

但是，我总是会提醒将业务或数据对象直接发送到 UI。您应该拥有在业务和 UI 之间转换的专用 UI​​ 对象。

我认为当您可能更改数据访问方法时，保持业务和数据之间的强烈分离是最有意义的。例如，如果您认为可以更改为 Web 服务来获取数据，而不是直接使用 EF。此外，强大的关注点分离对单元测试有很大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T18:50:45.067

如果您觉得自己在复制代码，那么您可能不需要服务层，并且您的 EF 实体可以充当业务模型。对于不需要业务层的简单 CRUD 应用程序，通常会出现这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:00:19.547

另一种方法不是在两种类型的对象之间进行转换，而是从您的域实体创建接口并针对接口对存储库进行编码。

这样你可以同时烤两个蛋糕。您没有将数据层实体转换为 bll 实体，而且您仍然没有弄乱层（从某种意义上说，您的存储库不适用于具体的数据层类型）。

这种方法非常有用，但很少被描述。

# php - 将 .csv 文件保存到桌面

> ID：12333476
> 
> 赞同：-1
> 
> 时间：2012-09-08T18:43:51.887
> 
> 标签：php, csv, desktop, fputcsv

我正在使用 PHP 开发一个脚本，以将文件作为 .csv 文件保存到桌面。

我从 PHP 手册中找到了这个代码示例。

```
<?php
$list = array (
array('aaa', 'bbb', 'ccc', 'dddd'),
array('123', '456', '789'),
array('"aaa"', '"bbb"')
);
$fp = fopen('file.csv', 'w');
foreach ($list as $fields) {
fputcsv($fp, $fields);
}
fclose($fp);
?> 
```

我在桌面上创建了 file.csv。我的问题是我找不到在桌面上打开文件并写入和保存的正确路径。($fp = fopen('file.csv', 'w'))

我是否必须显示存储我的网站的服务器的路径以及从那里到桌面的 file.csv 的路径？

有人可以指导我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:58:00.057

```
<?php
$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);
header('Content-type: text/csv');
header("Content-Disposition: attachment;filename=file.csv");

// stream
$f  =   fopen('php://output', 'a');
foreach ($list as $fields) {
    fputcsv($f, $fields);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:50:56.860

如果您谈论客户端的桌面，则不能使用这种方式。

无论如何，为什么不给您的客户一种下载文件的方法呢？

更新：对 Amado Martinez 的回答做了一点改进

```
<?php
    $list = array (
        array('aaa', 'bbb', 'ccc', 'dddd'),
        array('123', '456', '789'),
        array('"aaa"', '"bbb"')
    );

    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header('Content-type: text/csv');
    header("Content-Disposition: attachment;filename=file.csv");
    header("Content-Transfer-Encoding: binary");

    $fp = fopen('php://output', 'a');
    foreach ($list as $fields) {
        fputcsv($fp, $fields);
    }
    fclose($fp);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:44:58.437

您无法保存到桌面！您的浏览器在沙盒中运行，沙盒是一个防止访问文件系统的净化环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T18:48:07.077

您的脚本在服务器上运行。您的文件在桌面上。即使您有本地服务器（如 xamp、uniformserver 等），这些也（并且应该）与您的整个主机文件系统分开。所以答案是——除非你从主机上的命令行运行你的 php 脚本，否则你无法做到这一点。

# web-frameworks - Producteev 和 Trello 等网站使用哪个 Web 框架？

> ID：12333477
> 
> 赞同：5
> 
> 时间：2012-09-08T18:43:58.810
> 
> 标签：web-frameworks

我看到很多 Web 应用程序的布局非常相似，所以我假设它们共同使用了一个特定的框架。顶栏有这种布局：

![在此处输入图像描述](../Images/3d8889785bcb51d5c077d577ca3e9227.png) ![在此处输入图像描述](../Images/53fbe13fa80893da4c4344621d0098e1.png)

还有一个侧边栏，通常有点苹果式：

![在此处输入图像描述](../Images/0227d92dac2446691e88533757fd231a.png)

有谁知道这是否是某种常见的（希望是开源的）UI 框架？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T18:48:50.713

Web 应用程序的外观永远不会表明使用哪个框架来构建它。您展示的内容都是样式化的结果，可以使用任何 Web 框架来完成。

但是，您可以查看源代码以了解存在哪些类型的 javascript 引用并以此方式获得一个想法。某些框架有时会提供线索（asp.net 会有 _viewstate 等）。

例如，在查看 Trello 的源代码时，您可以找到一个 js 参考，其中有一个注释标题部分，它为您提供了很多线索：

```
/*

Sizzle CSS Selector Engine
Copyright 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL Licenses.
More information: http://sizzlejs.com/

jQuery JavaScript Library v1.7.2
http://jquery.com/

Copyright 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.
http://jquery.org/license

Includes Sizzle.js
http://sizzlejs.com/
Copyright 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL Licenses.

Date: Wed Mar 21 12:46:34 2012 -0700

jQuery UI 1.8.14

Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
Dual licensed under the MIT or GPL Version 2 licenses.
http://jquery.org/license

http://docs.jquery.com/UI

jQuery UI Widget 1.8.14

Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
Dual licensed under the MIT or GPL Version 2 licenses.
http://jquery.org/license

http://docs.jquery.com/UI/Widget

jQuery UI Mouse 1.8.14

Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
Dual licensed under the MIT or GPL Version 2 licenses.
http://jquery.org/license

http://docs.jquery.com/UI/Mouse

Depends:
jquery.ui.widget.js
: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
@website: http://www.datejs.com/

This application uses other third-party javascript components
distributed under appropriate licenses. For more information,
see the following files at http://trello.com/js/lib/
backbone.js
highcharts.js
json2.js
markdown.js
socket.io.js
underscore.js
Socket.IO.js build:0.8.6, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed 
! CHANGES FOR TRELLO: Remove all transports other than built-in browser Websockets,     try/catch around errors, fix transport merge, fix heartbeat
! Diff with published v0.8.6 for the details.
*/ 
```

# r - 具有“值”列和“事件数”列的表的统计信息

> ID：12333479
> 
> 赞同：2
> 
> 时间：2012-09-08T18:44:13.463
> 
> 标签：r

我有一张看起来像的桌子

```
value(0 < v< 1),  # of events
---------------   -----------
0.1,              1000
0.5,              20000
0.7,              3000000
0.1,              400000000
0.5,              50000000000
0.9,              6000000000000
...,              ... 
```

该值可以采用从 0 到 1 的任意数字，可能重复，并且事件的数量如此之大，以至于将其转换为通常形式的向量是低效的，例如

```
0.1,0,1,...0.1, 0.5,0.5,0.5, ... 
```

当我尝试将某些功能（例如`plot()`）应用于此表时，R 不会识别具有相同值的行，而是将它们分开处理。用这种表做一些统计数据的好方法是什么，就像我们有下表一样？

```
value,  # of events
0.1,    400001000
0.5,    ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:00:04.783

您的问题有点不清楚，但我认为您只想按每个唯一值对事件求和？如果是这样，那么这个问题和相关问题就有很多答案。这是一种方法：

```
#fake data
set.seed(1)
x <- data.frame(value = 1:3, events = sample(1:10, 9, TRUE))

#Option 1

 aggregate(events ~ ., data = x, FUN = "sum")
  value events
1     1     23
2     2     14
3     3     22

#Option 2
> tapply(x$events, x$value, FUN = "sum")
 1  2  3 
23 14 22 

#Option 3
> library(plyr)
> ddply(x, "value", summarize, sum = sum(events))
  value sum
1     1  23
2     2  14
3     3  22

#Option 4
> library(data.table)
> x <- data.table(x)
> x[, sum(events), by = value]
     value V1
[1,]     1 23
[2,]     2 14
[3,]     3 22 
```

随着数据的增长，这些解决方案（和其他解决方案）的扩展方式不同。我给出了一个非常全面的答案来比较[这里的时间和方法](https://stackoverflow.com/questions/10748253/idiomatic-r-code-for-partitioning-a-vector-by-an-index-and-performing-an-operati/10748470#10748470)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:56:00.007

作为第一步，这里是如何将您的第一个表格转换为第二个表格。

构造数据：

```
dd <- setNames(as.data.frame(matrix(c(0.1,1000,
                                      0.5,20000,
                                      0.7,3000000,
                                      0.1,400000000,
                                      0.5,50000000000,
                                      0.9,6000000000000),
                                    ncol=2,byrow=TRUE)),
                             c("value","count")) 
```

用于`tapply`压缩数据

```
dd2 <- tapply(dd$count,dd$value,sum) 
```

然后用于`melt`将数据转换为（可能）更有用的格式：

```
library(reshape2)
(dd3 <- melt(dd2,varnames="value",value.name="count"))
##   value        count
## 1   0.1 4.000010e+08
## 2   0.5 5.000002e+10
## 3   0.7 3.000000e+06
## 4   0.9 6.000000e+12 
```

添加非常小和非常大的数字时，您可能需要小心。

对于“我应该做什么样的统计？” 问题的一部分——抱歉，这太含糊了。你想知道什么......？？？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:45:55.977

如果你想要一个加权平均值：

```
 weighted.mean(dd$value, dd$count)
[1] 0.8966414 
```

加权中位数：（Hmisc 中还有其他几个“加权”函数）

```
 library(Hmisc)
 wtd.quantile(dd$value, dd$count, .5)
#50% 
#0.9 
```

绘制只是使用`barplot`

```
 barplot(dd$count)  #perhaps with log="y"
 barplot(dd$count, log="y") 
```

# wordpress - WordPress：如何防止顶级菜单项成为链接？

> ID：12333481
> 
> 赞同：3
> 
> 时间：2012-09-08T18:44:24.147
> 
> 标签：wordpress

如何防止 WordPress 菜单的顶级菜单项成为链接？

参见例如这个网站：[http ://thesoftworld.com/](http://thesoftworld.com/)

所以“关于”不应该是一个链接，而“关于>哲学”应该是。没有子项目的项目（例如“电影”）也应该是一个链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T19:21:01.917

如果您希望顶级导航项充当下拉菜单的触发器，但实际上并未链接到任何位置，以下是在 WordPress 菜单系统中执行此操作的方法：

1.  插入带有标签和任何链接地址的自定义链接
2.  单击编辑菜单项链接（三角形）
3.  删除 URL 字段中的链接地址
4.  添加嵌套的子菜单项
5.  节省

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:08:49.547

有一个插件可以完成任务： [链接](http://wordpress.org/extend/plugins/disable-parent-menu-link/)

您可以通过在 HTML 页面的代码中设置其**HREF="#"来手动执行此操作。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:29:14.177

我还发现了这个：

[如何防止带有子项的主菜单项在 Wordpress 中被点击？](https://stackoverflow.com/questions/887464/how-can-i-prevent-a-main-menu-item-with-sub-items-from-being-clickable-in-wordpr?rq=1)

几乎完全相同的问题。抱歉重复问题。

# c - 两个固定长度整数数组的元素之和

> ID：12333482
> 
> 赞同：0
> 
> 时间：2012-09-08T18:44:27.957
> 
> 标签：c, algorithm, sse

假设我有两个固定长度的无符号整数数组。
我如何在不循环或使用较少循环数的情况下对这些数组（第一个）进行元素求和？

```
uint64_t foo[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
uint64_t bar[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
... // 没有循环的时髦代码
    // foo 现在是 {0, 2, 4, 6, 8, 10, 12, 14, 16, 18}

```

相关问题：*是否可以在一次操作中对多个 uint64_t 整数求和？*. （我打赌这可以用 sse 完成）

一般的问题是：对两个固定长度的整数类型数组求和（放在第一个数组中）的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:03:44.183

您可以使用`_mm_add_epi64`每次迭代添加两个 64 位整数。不过，我不希望对直接标量代码有显着的改进。如果您不想要一个显式循环，那么您可以将其展开为 5 个操作。

# iphone - 使用 Xcode 的 iPhone 手机间隙条码扫描器

> ID：12333483
> 
> 赞同：1
> 
> 时间：2012-09-08T18:44:36.787
> 
> 标签：iphone, xcode, cordova

我正在使用 html5 开发 iPhone 手机间隙条码扫描仪应用程序。

我已按照以下链接进行操作：

[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner)

构建此项目后，我没有收到任何错误。但同时没有输出。

这是我的代码。

```
function scanQRCode()
{
 navigator.notification.alert('Scan click');
 window.plugins.barcodeScanner.scan( BarcodeScanner.Type.QR_CODE,
                                           function(result) {
                                           if (result.cancelled)
                                           navigator.notification.alert("the user cancelled the scan")
                                           else
                                           navigator.notification.alert("we got a barcode: " + result.text)
                                           },
                                           function(error) {
                                           navigator.notification.alert("scanning failed: " + error)
                                           }
                                           );

navigator.notification.alert('After Scan click');
} 
```

仍然收到第一个警报，只是没有收到底部警报。它确认我扫描函数调用存在问题。但我已经像上面提到的链接一样导入了所有内容。

它没有打开相机。

请协助我解决该问题。

**我的整个想法是在iPhone**中而不是在 android中读取 QR 码。

注意：我有两个警告 1) 'unsigned int zxing::logDigits_15(unsigned int)' 没有以前的原型 2) file://localhost/Users/malaris/Documents/Projects/MyFirstTest/MyFirstTest/zxing-all-in- one.cpp：警告：语义问题：函数'logDigits_15'没有以前的原型

在此先感谢，卡西克

# google-apps-script - 您如何将 GAS 用户的谷歌日历嵌入到独立的网络应用程序中？

> ID：12333484
> 
> 赞同：0
> 
> 时间：2012-09-08T18:44:36.547
> 
> 标签：google-apps-script, google-calendar-api

开发一个 Web 应用程序，它应该使用户能够在他们的日历上组织事件，而无需从应用程序中导航。您如何将 GAS 用户的谷歌日历嵌入到独立的网络应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:33:23.253

您不能将用户日历 UI（用户界面）直接嵌入到您的应用中。目前没有模拟 google-calendar UI 的“calendar-widget”。然而，有一个名为“DatePicker”的简单日历小部件，但假设我认为这不是你的意思。

[但是，您可以使用日历服务https://developers.google.com/apps-script/service_calendar](https://developers.google.com/apps-script/service_calendar)在数据级别与用户的日历进行交互。请记住，在这种情况下，安全级别非常重要。如果您发布您的网络应用程序以作为当前用户执行，它可以与该用户的日历自由交互。如果它设置为以您（脚本的创建者）身份执行，则它无法访问该用户的日历。只有当它的安全级别已调整为由您（由该日历的所有者）共享和编辑时，它才能访问该日历。

总之，读/写/访问规则与您通过谷歌自己的网络服务“正常”使用服务完全相同。在开发应用程序时请记住这一点，这样可以避免很多麻烦 ;-)

# java - 无法在 Java 中使用 Google Gson 解析它

> ID：12333487
> 
> 赞同：0
> 
> 时间：2012-09-08T18:45:05.207
> 
> 标签：java, json

```
{
    "status":1,
    "list":
        {
            "218888771":
                {
                    "item_id":"218888771",
                    "title":"twitter",
                    "url":"http:\/\/t.co\/oFYGY7z0",
                    "time_updated":"1347094862",
                    "time_added":"1347094862",
                    "state":"0"
                },
            "217345740":
                {
                    "item_id":"217345740",
                    "title":"",
                    "url":"http:\/\/t.co\/dCvNwtrK",
                    "time_updated":"1346790837",
                    "time_added":"1346790700",
                    "state":"0"
                }
        },
    "since":1347094862,
    "complete":1
} 
```

我正在使用 Google GSon，但并没有真正到达任何地方。

首先，我很困惑为什么我不能将它转换为 JsonArray。“列表”看起来像一个 json 数组。但它似乎不起作用。我不介意使用 POJO 方法来做这件事，但我如何首先解析这个 JSONArray？

```
 JsonParser parser = new JsonParser();
    JsonElement tradeElement = parser.parse(response);
    JsonObject trade = tradeElement.getAsJsonObject();
    json.get("list").getAsJsonObject().get("url") 
```

那给了我null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:00:40.307

```
 {
   "complete":1,
   "list":{
      "217345740":{
         "item_id":"217345740",
         "state":"0",
         "time_added":"1346790700",
         "time_updated":"1346790837",
         "title":"",
         "url":"http://t.co/dCvNwtrK"
      },
      "218888771":{
         "item_id":"218888771",
         "state":"0",
         "time_added":"1347094862",
         "time_updated":"1347094862",
         "title":"twitter",
         "url":"http://t.co/oFYGY7z0"
      }
   },
   "since":1347094862,
   "status":1
} 
```

正如您所看到的，当这是一个格式正确`list`的对象时，它具有两个属性`217345740`和`218888771`. 数组用括号括起来`[]`。这就是为什么您无法将其转换为数组的原因。

您最好的选择是正确使用 gson 及其将 json 解析为 POJO 的能力。这是完全未经测试的（我不太了解 Gson，而且我不在我的开发机器上），但你会看到这个想法。

```
public class Item {
    long item_id;
    int state;
    @SerializedName("time_added")
    Date timeAdded;
    @SerializedName("time_updated")
    Date timeUpdated;
    String title;
    String url;

    // getter & setters
}

public class Trade {
    int complete;
    Date since;
    int status;
    Map<Long, Item> list;

    // getter & setters
}

public class Foo {
    public static void main(String[] args) {
        String json = "";

        GsonBuilder builder = new GsonBuilder();
        builder.registerTypeAdapter(Date.class, new JsonDeserializer<Date>() {
            public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
                return new Date(json.getAsJsonPrimitive().getAsLong()); 
            } 
        });
        Gson gson = builder.create();
        Trade trade = gson.fromJson(json, Trade.class);
        Map<Long, Item> items = trade.getList();
        System.out.println(items.get(217345740L).getUrl()); // should print http://t.co/dCvNwtrK
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:02:14.137

JSON 数组如下所示：

```
[
    {
        "item_id":"218888771",
        "title":"twitter",
        "url":"http:\/\/t.co\/oFYGY7z0",
        "time_updated":"1347094862",
        "time_added":"1347094862",
        "state":"0"
    },
    {
        "item_id":"218888771",
        "title":"twitter",
        "url":"http:\/\/t.co\/oFYGY7z0",
        "time_updated":"1347094862",
        "time_added":"1347094862",
        "state":"0"
    },
] 
```

上面的一个是地图的 JSONArray。由于您的数据是地图的地图，因此您应该使用适当的键浏览地图并到达具有“url”键的最里面的地图。

# php - 使用 PHP 我想根据上面的选择选项创建新的文本框

> ID：12333494
> 
> 赞同：0
> 
> 时间：2012-09-08T18:45:43.197
> 
> 标签：php

我在表单中使用以下文本框

```
<?php
$Type = array  ("a" => "A" ,
        "b" => "B",
        "c" => "C",
        "d" => "D");    
?>
<form action="form.php" method="post">
<div style="width: 25em;">
<lable for="Type">&nbsp;&nbsp;&nbsp;&nbsp;Types :</lable>
<select name="Type" id="Type" size="1">
<option>Choose your required test </option>
<option value="a" name= "type_1"><?php echo $Type["a"] ?></option>
<option value="b" name= "type_2"><?php echo $Type["b"] ?></option>
<option value="c" name= "type_3"><?php echo $Type["c"] ?></option>
<option value="d" name= "type_4"><?php echo $Type["d"] ?></option>
</select></div> 
```

每当用户选择我想显示下一步的选项时，例如，如果用户选择 A，那么在下一行中，自动代码应该以与 B、c、D 类似的方式显示有关 A 的信息（例如价格、地点等）。我不对 java 脚本和 Jquery 有任何想法，请建议我仅使用 php 进行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:53:35.353

如果没有 javascript，或者发布选择并刷新页面，您将无法做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T18:53:54.347

这确实是 JQuery 的工作，它会让你的生活*更轻松。*要“打开”Jquery，您所要做的就是将其放入您的标签中：

```
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript'>
//javascript/jquery goes here
</script>
</head> 
```

并按照您的要求进行操作，如下所示：

```
$('#Type').change(function() {
   if ($(this).val() == 'a') {
      $('#div').html('Value A is chosen. HTML here can be outputted to an element.');
   }
   if ($(this).val() == 'b') {
      $('#div').html('Value B is chosen.');
   }
   //and so on
}); 
```

# joomla2.5 - Joomla 用于完全编码的网站

> ID：12333497
> 
> 赞同：1
> 
> 时间：2012-09-08T18:45:55.257
> 
> 标签：joomla2.5

我是基于 HTML、CSS、Javascript、C、C++、Java、PHP、MYSQL 和 SQL 服务器的软件开发人员。

我正在基于上述语言建立自己的网站。目前已完成。

所以，我将使用自己的基于家庭的 linux 服务器。

我的问题是，我听说过 joomla。它是什么？它用于安全或设计谁只是想要创建网站的初学者程序员或者它也可以用于专业开发人员？joomla 可以用于完全自己的基于程序的网站吗？

如果是！那怎么办？

还有任何其他工具可用于为基于自己的服务器的网站提供额外的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:37:53.783

它是一个基于 php 的内容管理系统 (cms)。您可以在此处找到有关 joomla 的更多信息：[关于 joomla](http://www.joomla.org/about-joomla.html "关于 joomla")

在安全方面，我会说在发布时更新您的 joomla 版本，正确的权限和 htaccess 将是一个开始。看看这里的安全检查清单：[安全检查清单](http://docs.joomla.org/Category%3aSecurity_Checklist "安全检查清单")

希望这可以帮助。

# unix - 将 unix 输出转换为整数以用作 Applescript 变量

> ID：12333499
> 
> 赞同：0
> 
> 时间：2012-09-08T18:45:56.957
> 
> 标签：unix, applescript

我在 AppleScript 中使用**do shell script**命令来计算符合特定条件的文件数。但是，我的表达式不是返回一个整数，而是返回一个带有一系列前导空格的字符串。我在下面写的内容*有效*，但我并不热衷于在**if**条件中使用空格（是的 - 只是有点强迫症:-)。如何将结果转换为整数？

```
set fileCount to do shell script "ls -l ~/Downloads/UserExport_*.csv.txt | wc -l"
if (fileCount = "       2") then 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:34:32.817

像这样使用`as integer`：

```
set fileCount to (do shell script "ls -l ~/Downloads/UserExport_*.csv.txt | wc -l") as integer
if fileCount = 2 then 
```

# python - 使用 ScriptingBridge 时隐藏 Python 火箭停靠图标

> ID：12333500
> 
> 赞同：5
> 
> 时间：2012-09-08T18:46:04.660
> 
> 标签：python, macos, itunes, osx-mountain-lion, dock

我正在使用 ScriptingBridge 检索在 iTunes、Mac OS X 中播放的当前曲目。

```
from ScriptingBridge import SBApplication
iTunes = SBApplication.applicationWithBundleIdentifier_("com.apple.iTunes")
print iTunes.currentTrack().name() 
```

但是当我运行最后一行时，实际上得到了轨道名称，一个应用程序出现在 Dock 中，并且在我关闭我的 Python 程序之前不会离开，无论我是在 REPL 中运行它还是作为脚本运行它。图标是这个，至少在我的机器上：

```
/System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/Resources/PythonInterpreter.icns 
```

该脚本运行良好，我可以通过 SB 从 iTunes 获取我需要的所有信息。我只想阻止图标弹出。为什么该特定方法调用会调用停靠图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-17T04:18:11.923

将其从坞站中取出的一种巧妙方法是防止`Python.app`出现在坞站上：

编辑`/System/Library/Frameworks/Python.framework/Versions/Current/Resources/Python.app/Contents/Info.plist`此键值对并将其添加到主`<dict>`元素：

```
<key>LSUIElement</key><string>1</string> 
```

我希望有另一种方法来做到这一点，因为这种变化是全局性的——任何 Python 脚本（使用系统 Python）都不会出现在具有此设置的扩展坞上。自从发布此问题以来，我已将我的 LSUIElement 设置回 0，因为没有其他方法可以抓取例如 matplotlib 生成的窗口，除非它在 ​​Dock 中有一个图标。

# java - 在不知道用户名的情况下启动用户文件夹中的程序

> ID：12333501
> 
> 赞同：3
> 
> 时间：2012-09-08T18:46:18.090
> 
> 标签：java, runtime, directory, home-directory

我不知道我是否可以运行此代码并且它会起作用，但在这里：

```
public void actionPerformed(ActionEvent e) {
        try
        {
        Runtime rt = Runtime.getRuntime();
        Process p = rt.exec("c:\\Users\\Toby\\AppData\\Roaming\\.minecraft\\minecraft.exe");
        }

        catch(Exception a)
        {

        }
    } 
```

这链接到一个按钮，它会启动我的世界启动器。如果我想把它给我的朋友，我该怎么做才能让它不寻找用户“Toby”，而是寻找他们的主文件夹？对不起，如果它令人困惑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T18:48:10.153

我想你正在寻找`user.home`房产。这里有一个可用的属性列表：http: [//www.mindspring.com/~mgrand/java-system-properties.htm](http://www.mindspring.com/~mgrand/java-system-properties.htm)

因此，您的代码将更改为：

```
Process p = rt.exec(System.getProperty("user.home") + \\AppData\\Roaming\\.minecraft\\minecraft.exe"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T19:06:37.940

如果您想与其他版本的 Windows 保持一致，我建议使用`System.getenv("APPDATA")`而不是添加到，`System.getProperty("user.home")`因为旧版本的 Windows 中不存在*漫游文件夹*

所以你的代码会变成这样：

```
Process p = rt.exec(System.getenv("APPDATA") + ".minecraft\\minecraft.exe") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:49:12.993

尝试`System.getProperty("user.home")`

```
String mhome = System.getProperty("user.home"))+"";

    public void actionPerformed(ActionEvent e) {
            try
            {
            Runtime rt = Runtime.getRuntime();
            Process p = rt.exec(mhome+"\\AppData\\Roaming\\.minecraft\\minecraft.exe");
            }

            catch(Exception a)
            {

            }
        } 
```

# javascript - 复选框：一次只允许单击一个复选框

> ID：12333503
> 
> 赞同：2
> 
> 时间：2012-09-08T18:46:24.720
> 
> 标签：javascript

我目前正在使用复选框并根据所选值显示值。几乎所有东西都在我必须选中复选框的异常情况下工作`method of shipping`。现在用户可以选择两种方式，这是一个问题。有没有办法只允许检查一个复选框`method of shipping`？[例子](http://webprolearner2346.zxq.net/bike_calculator/)

**JS**

```
<script>
function check_value(currentElement, val, id, type) {
    var el = document.getElementById("imgBox" + id);
    if (val > 0 && val < 4) { //will trigger when [1,2,3]

        if(currentElement.checked)
        {
            el.src = "images/" + type + val + ".jpg";
            el.style.display = "";
        }
        else
        {
            el.src = "";
            el.style.display = "none";
        }

    }
}    
</script> 
```

**HTML**

```
<h2>Choose method of shipping</h2>
<form name="shipping_list">
    <input type="checkbox" name="shipping1" onclick='check_value(this, 1, "4", "shipping")'/> USPS Ground<br />
    <input type="checkbox" name="shipping2" onclick='check_value(this, 2, "4", "shipping")'/> FedEx         
</form>

<img id="imgBox4" src="#" style="display:none"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T18:48:17.610

您应该改用单选按钮：

```
<form name="shipping_list">
    <input type="radio" name="shipping" id="shipping1" onclick='check_value(this, 1, "4", "shipping")'/> USPS Ground<br />
    <input type="radio" name="shipping" id="shipping2" onclick='check_value(this, 2, "4", "shipping")'/> FedEx         
</form> 
```

键是`name`属性，属于一组的所有单选按钮的值应该相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T18:47:35.737

[单选按钮](http://en.wikipedia.org/wiki/Radio_button)怎么样？

```
<input type="radio" name="shipping" onclick="check_value(this, 1, '4', 'shipping');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T12:53:34.590

```
$(function() { 
  $('input[type="checkbox"]').bind('click',function() {
    $('input[type="checkbox"]').not(this).prop("checked", false);
  });
}); 
```

# javascript - JavaScript 对象不是从原型链继承的

> ID：12333505
> 
> 赞同：0
> 
> 时间：2012-09-08T18:46:28.987
> 
> 标签：javascript, prototypejs, prototype

我在 Chrome 21 中为我的构造函数定义原型时遇到了麻烦。我正在做一个大项目，在该项目中我试图实现一个基于伪类的结构（因此是“子类”属性），其中一些非常松散数据封装，但我对 JavaScript 中的原型设计和继承相对较新，无法弄清楚出了什么问题。StackOverflow 上还有其他模糊相似的线程，但没有什么能解决这个问题。

以下是我正在使用的构造函数：

```
function Root()
{
  this._subclass = "Root";
  this.subclass = function(){
    return this._subclass;
  };

  this._date;
  this.date = function(){
    return this._date;
  };
}

function CustomDateTime()
{
  this._subclass = "CustomDateTime";
  this._value = new Date();
}
CustomDateTime.prototype = new Root;

function CurrentDate()
{
  this._subclass = "CurrentDate";
}
CurrentDate.prototype = new CustomDateTime; 
```

直觉上，在我看来我应该能够做到这一点（因为 subclass() 是在`Root`构造函数中定义的）：

```
var now = new CurrentDate();
alert(now.subclass()); // should alert "CurrentDate" 
```

但是在运行脚本时，我得到一个`TypeError: Object #<CurrentDate> has no method 'subclass'`. 此外，如果我更改`CurrentDate`构造函数以包含此警报：

```
function CurrentDate()
{
  alert(this._subclass);
  this._subclass = "CurrentDate";
}
CurrentDate.prototype = new CustomDateTime; 
```

结果消息是`undefined`.

如果改为分配`var now = new CustomDateTime()`，则调用 subclass() 方法会按预期返回“CustomDateTime”。我还定义了另一个构造函数 ，`ModelObject`它的原型设置为`Root`并且 subclass() 也按预期在这些对象上执行。

我从中得到的是 CurrentDate 构造函数被排除在 CurrentDate 之外： CustomDateTime ： Root 链并且只是被称为独立构造函数-使用此函数创建的对象似乎不是从分配的原型继承到 CurrentDate 函数对象。

这不是使用 JavaScript 原型的正确方法吗？再一次，在我看来，这应该非常顺利..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:45:00.740

感谢'灰色状态即将到来'的响应。看到代码在 jsfiddle 中正常运行告诉我，当您在 .html 页面上包含多个标签时，您必须按照它们的原型继承顺序放置标签。`CurrentDate.prototype`如果 CurrentDate 在 CustomDateTime 之前，则在分配时尚未定义 CustomDateTime 函数。

# python - python不接受关键字参数

> ID：12333511
> 
> 赞同：7
> 
> 时间：2012-09-08T18:47:25.407
> 
> 标签：python, keyword-argument

我正在尝试使我的代码不接受关键字参数，就像某些 bulitins 也不接受关键字参数一样，但是我无法这样做。以下是我根据我有限的理解的想法：-

```
def somefunc(a,b):
    print a,b

somefunc(10,20) 
```

**输出：**

```
10 20 
```

* * *

现在，当我运行以下命令时（我知道这不应该是函数定义中的关键字参数，但是，**看看函数调用，它似乎与调用接受关键字参数的函数时的语法相同**） ：

```
somefunc(b=10,a=20) 
```

**输出：**

```
20 10 
```

**我有两个问题**：-

1.  查看函数调用`somefunc(b=10,a=20)`而不是函数定义，这似乎是对仅接受普通参数的函数或接受关键字参数的函数的调用。口译员如何区分这两者？
2.  是否可以将我们的任何函数转换为一种形式，使其不像许多内置函数那样接受关键字参数？

**为什么我要这样做呢？** 我只是在检查我是否可以做到这一点，这样我就不会错过深入理解 python 的任何内容。我确实知道python是否允许这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T18:57:18.513

您可以使用任意参数列表来执行此操作。请参阅[http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)

例如：

```
def somefunc(*args):
    print args[0], args[1] 
```

不带关键字的调用：

```
somefunc(10,20) 
```

给出：

```
10 20 
```

使用关键字调用：

```
somefunc(a=10,b=20) 
```

给出一个错误：

```
TypeError: someFunc() got an unexpected keyword argument 'a' 
```

目前尚不清楚您为什么要这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T07:07:58.750

广告 1) Python 会自动验证正确的名称，如果它们被称为`somefunct(name=value, ...)`. 我不需要记住参数的确切标准顺序，并且通过在每次使用时每月查看文档来验证它是否过于“神经质”，如果我记得一个具有良好描述性参数名称的函数并且将测试它们是否被接受通过 Python。相反，使用参数的正确顺序只能通过文档来验证。通过命名参数调用优于非常长的位置参数列表。因此，报告的行为是有根据的。（当然，短的单字母参数“a，b”无助于防止错误。）

ad 2) 一些众所周知的 C 语言内置快速函数，需要的参数数量很少，不支持使用命名参数调用。（例如`hasattr`）

这是因为它们仅使用简单的标头`...(... PyObject *args)`，因此所有命名参数都会被自动拒绝。（Python 永远无法自省 C 源代码中的参数名称。:-)

许多其他 C 函数都有一个标头`...(... PyObject *args, PyObject *kwds)`，它们通过实现更复杂的验证`PyArg_ParseTupleAndKeywords`并将名称写入文档字符串来显式地支持名称的精确列表。

* * *

编辑：在**Python 3.8中，****[仅位置参数](https://docs.python.org/3.8/whatsnew/3.8.html#positional-only-parameters)**可以通过新的函数参数语法来指示某些函数参数必须在位置上指定并且不能用作关键字参数。****`/`****

 **```
def somefunc(a, b, /):
    print(a, b) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T18:54:15.907

> 查看函数调用 somefunc(b=10,a=20) 而不是函数定义，这似乎是对仅接受普通参数的函数或接受关键字参数的函数的调用。口译员如何区分这两者？

不确定这是否正是您要问的，但如果我理解正确，答案是“不是”。无论函数中如何*定义*参数，都可以使用关键字*调用*函数。如果您使用关键字语法（例如，）传递任何参数，Python 会将相应的值绑定到函数定义中具有相同名称的参数。是否定义了默认值并不重要。这两种函数定义不会创建不同“种类”的参数，只是一些参数可能具有默认值，而另一些可能没有。所以不管你做，你还是可以做的。唯一的限制是您必须首先传递/定义位置参数（例如，*`f(a=...)``def f(a)``def f(a=2)``f(a=...)``def f(a=2, b)`或`f(a=2, 3)`）。另请参阅[此答案](https://stackoverflow.com/questions/1419046/python-normal-arguments-vs-keyword-arguments)。*

 *至于你问题的第二部分，我不知道有什么方法可以阻止 Python 函数接受命名参数的关键字传递值。如果您只定义`*args`then 它不会接受关键字参数，但位置参数不能有单独的名称。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-08T18:58:32.053

在 Python 中，关键字参数和位置参数之间没有如此明显的区别。事实上，它很简单：

位置参数*按照它们在函数调用中列出的顺序*进行解析 关键字参数可以按*任何顺序*添加，但不能位于位置参数*之前。*

所以，如果你有这个：

```
def foo(x):
    pass 
```

你可以做：

```
foo(1) # positional
foo(x=1) # keyword 
```

但是您不能这样做`foo()`，因为您没有提供默认值。

同样，如果你有这个：

```
def foo(x,y='hello'):
    pass

foo(1) # this works fine
foo() # this is invalid, as an argument without a default isn't passed
foo(y='hello',1) # error - positional arguments come before keyword arguments 
```

不要忘记阅读[任意参数列表](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T22:06:04.357

我认为这是一个非常糟糕的 Python 功能，并且可能导致非常难以维护和错误的代码。假设你有一个函数：

```
def myurl(x, y):
    url = "{}:{}".format(x, y)
    return url 
```

尽管用关键字参数替换位置看起来是个好主意，但永远不要这样做。我很惊讶没有 Python 选项可以阻止使用关键字参数调用此函数：

```
>> print myurl(x="localhost", y=8080) 
```

如果有人发现如果写成这样，图书馆会更具可读性：

```
def myurl(hostname, port):
    url = "{}:{}".format(hostname, port)
    return url 
```

然后使用关键字调用 as 的其余代码`myurl(x="localhost", y=8080)`将失败：

```
TypeError: myurl() got an unexpected keyword argument 'x' 
```

这意味着你的局部函数变量突然变成了全局变量！我希望这个问题能在 Python 3 中得到解决。***

# objective-c - 添加了 CAGradientLayer，在我的 UIView dealloc 中得到了这个：[CALayer release]: message sent to deallocated instance

> ID：12333514
> 
> 赞同：-1
> 
> 时间：2012-09-08T18:47:37.770
> 
> 标签：objective-c, ios, core-animation, cagradientlayer

这里那里，

我有一个自定义 UIView。此视图充当活动指示器，但作为 UIActivityIndi​​catorView 上方的标签。在初始化中，我添加了一个 CAGradientLayer。我分配并初始化它，并将它作为 UIView 层属性的子层插入到索引 0 处。在我的 dealloc 方法被调用时，我在控制台中收到一条消息：

```
- [CALayer release]: message sent to deallocated instance. 
```

我的代码：

```
@interface LabelActivityIndicatorView ()
{
    UILabel *_label;
    UIActivityIndicatorView *_activityIndicatorView;
    CAGradientLayer *_gradientLayer;
}
@end

@implementation LabelActivityIndicatorView

//dealloc
- (void) dealloc
{
    [_label release];
    [_activityIndicatorView release];

    //even tried to remove the layer
    [_gradientLayer removeFromSuperLayer];
    [_gradientLayer release];

    [super dealloc];
}

// init
- (id) initWithFrame:(CGRect)frame
{
    if ( (self = [super initWithFrame:frame]) )
    {
        // init the label

        // init the gradient layer
        _gradientLayer = [[CAGradientLayer alloc] init];
        [_gradientLayer setBounds:[self bounds]];
        [_gradientLayer setPosition:CGPointMake(frame.size.width/2, frame.size.height/2)];

        [[self layer] insertSublayer:_gradientLayer atIndex:0];

        [[self layer] setNeedsDisplay];
    }
    return self;
}

@end 
```

有人有想法么。因为我正在分配和初始化渐变层，所以我负责释放它。我应该能够分配和初始化并分配给一些 ivar。也许我应该创建一个带有保留的属性。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:35:37.413

你可能不应该分配/初始化你的层。使用便捷方法层：

```
 _gradientLayer = [[CAGradientLayer layer]; 
```

然后让您添加它的图层获得它的所有权。当你释放超层所属的视图时，你的层将被释放。

我从来没有保留对我创建的图层的所有权引用。我让父层拥有它，它工作得很好。

# http - 如何在另一个 GET 或 POST 中发送 GET 或 POST 请求

> ID：12333522
> 
> 赞同：0
> 
> 时间：2012-09-08T18:48:51.763
> 
> 标签：http, post, get, httprequest, web-frameworks

我有一种情况，我需要在另一个 GET 请求中发送一个 GET 请求。

```
http://domain.com/data?Message=ItsMyMessage&Photo=http://photodomain.com/photo?FileType=1&type=png 
```

这是行不通的！

那么，我应该怎么做呢？

*编辑*：我正在研究 Django

**编辑**：

在职的：

```
http://myapple.pagekite.me/photo?friend_from=Surya&amp;friend_to=Sophie&amp;image_url=http%3A%2F%2Fmyapple.pagekite.me%2F%2Fimg%3FFileName%3Dpic5.png%26Message%3DHi%2520 
```

不工作（当我发布到 Facebook 时，它被转换为下面）：

```
http://myapple.pagekite.me/photo?friend_from=Surya&amp%3Bfriend_to=Sophie&amp%3Bimage_url=http%3A%2F%2Fmyapple.pagekite.me%2F%2Fimg%3FFileName%3Dpic5.png%26Message%3DHi%2520 
```

注意：在上面的两个代码片段中，**`&amp;`**被转换为**`&amp%3B`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:50:29.937

您必须对辅助参数进行 url 编码。然后在您的代码中解码它们并将它们发送出去。

```
http://domain.com/data?Message=ItsMyMessage&Photo=http%3A%2F%2Fphotodomain.com%2Fphoto%3FFileType%3D1%26type%3Dpng%0A 
```

在纯 Python 中，您可能会执行以下操作：

```
import sys
from urllib import urlencode
artist = "Kruder & Dorfmeister"
artist = urlencode({'ArtistSearch':artist}) 
```

导致：

```
ArtistSearch=Kruder+%26+Dorfmeister 
```

归功于 O'reilly [http://www.oreillynet.com/pub/h/476](http://www.oreillynet.com/pub/h/476)

也许 Django 在这里提供了一些捷径。但我不会知道。

# php - .htaccess 重写在匹配后继续进行

> ID：12333525
> 
> 赞同：1
> 
> 时间：2012-09-08T18:49:17.223
> 
> 标签：php, .htaccess, mod-rewrite

我将以 htaccess 和 mod_rewrite 不是我最好的领域这一事实作为开头。我编写了一个供个人使用的 php MVC 框架，在文档根目录中，我有一个名为“public”的文件夹，用于存放 css、js、图像等。每个 HTTP 请求都会针对“public”中的文件进行检查，如果存在，它发送该文件；否则它会重定向到框架的 index.php。

规则有效，但如果在“公共”中进行匹配，它仍会路由到 index.php。如果我注释掉重定向到 index.php 的最后一行，css 和 js 会正确加载。在“公开”匹配完成后，我无法让它停止处理。

提前致谢

```
Options +FollowSymLinks
RewriteEngine On

#If file exists as public resource
RewriteCond %{DOCUMENT_ROOT}/public/$1 -f
RewriteRule ^(.*) %{DOCUMENT_ROOT}/public/$1 [NC,L]

#Redirect everything else to index.php
RewriteRule ^(.*) index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:29:58.067

需要加个测试看看请求是否已经指向公共目录，如果没有就触发RewriteRule：

```
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^.*$ index.php 
```

请注意，`[L]`("last") 标志经常被误解。**它会阻止在当前 pass**中进一步测试和修改请求，但它不能阻止 Apache 从一开始就通过整个规则集运行新修改的请求（这会发生，因为 .htaccess 规则从顶部应用到每个新的或修改后的请求）。因此，您需要添加 RewriteCond 指令以检查您是否正在处理在规则集的前一阶段中指向公用文件夹的请求。

[有关“last”标志](http://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_l)的更多详细信息，请参阅Apache 2.4 文档。[请注意，Apache 2.4 提供了一个`[END]`标志，该标志将停止请求进行另一次重写处理，但这个新标志在 Apache 2.2 和更早版本中不可用。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:04:42.367

看起来好像您正在做一些不必要的检查，并且每次执行重写时都会触发新的规则传递。

也许尝试这样的事情？

```
RewriteEngine On

# pass through anything in the domain.com/public directory
RewriteRule ^/public/(.*)$ - [NC,L]

# route everything else to index
RewriteRule ^(.*)$ index.php [NC,L] 
```

这应该通过第一次通过公共目录中的任何内容，其他所有内容都需要 2 次通过才能解决第二条规则，AFAIK。我认为主要技巧是提供一条不会触发重写的路线，因此您不会触发第二遍。

还要记住，除非您打算使用它们的内容重写为 $1,$2,...，否则括号并不是真正必要的。

# ruby - 计算字符串 X 出现次数的方法，接受可变数量的变量

> ID：12333534
> 
> 赞同：0
> 
> 时间：2012-09-08T18:51:14.117
> 
> 标签：ruby

如果我可以创建一个方法来计算包含所需字符串的变量的数量，那就太好了。

假设字符串是“hi”，并且该方法需要接受任意数量的变量，我将输入 2 或更多。

变量：

```
var1 = "hi"
var2 = "bye"
var3 = "hi"

result = countvariables("hi",var1,var2,var3) 
```

在这里，我将所需的字符串放在变量参数中，但是也可以在创建方法时输入。

结果应该包含数字 2。因为 2 个变量包含字符串“hi”。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:58:52.917

```
def countvariables(needle, *haystack)
  haystack.count(needle)
end

var1, var2, var3 = 'hi', 'bye', 'hi'

result = countvariables('hi', var1, var2, var3)
# => 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:54:48.783

```
def countvariables( a, *b )
  b.select{ |e| e.include? a }.size
end 
```

# java - java Integer.MAX_VALUE, MIN_VALUE 溢出

> ID：12333541
> 
> 赞同：3
> 
> 时间：2012-09-08T18:52:15.543
> 
> 标签：java, integer, max, min

好吧，也许我只是因为这个而累了，但我怎么能做到这一点呢？

```
int x = Integer.MAX_VALUE+10; 
```

// 也许

```
int x = Integer.MIN_VALUE-20; 
```

我只想让 if 语句捕获 x 是否“在范围内”有点像这样：

```
if(x >= Intefer.MAX_VALUE || x <= Integer.MIN_VALUE){ //throw exception} 
```

但问题是，如果该值如上所述，如 MAX_VALUE + 10，则该值最终既不高于 MAX VALUE 也不低于 MIN_VALUE 并且不满足 if 条件......

编辑：澄清我的意思：我不想实际存储任何大于最大值/最小值的值。想象一下：

一个字段，你写 10+10，它会说“好吧，那是 20” 接下来，有人可能会写 1000000*100000，它也会回复答案，但是有人可能会写一些超过最大值/最小值的东西比如，10000000*1000000*1000000 或类似的东西，然后程序应该都是“等等，这太高了！这里是一个“0”给你”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T19:00:29.500

这可以通过两种方式解决：

第一种方式：

`if(x + 10 <= x){ //Has wrapped arround so throw exception}`

第二种方式（更好）：

`long x = Integer.MAX_VALUE+10L;`
现在条件可以正常工作

`if(x >= Integer.MAX_VALUE){ //throw exception}`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T18:54:29.997

如果您需要表示大于或小于限制的整数，请使用`long`而不是`int`变量。另一方面，如果您真的担心`int`包含大于 的值的变量`Integer.MAX_VALUE`，那么请停止担心——这样的事情是不存在的。当值存储在 中时`int`，任何溢出或下溢都已经发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-14T04:16:57.393

之前提供的所有解决方案的问题在于，它们都建议向上转换为更大尺寸的原语来执行您的计算（例如使用`long`代替`int`）。

这种方法有点笨拙，当您已经在使用最大的原语时会失败。相反，您可以在执行操作之前检查操作（例如加法或减法）是否会溢出。

这是来自[The CERT Oracle Secure Coding Standard for Java](https://www.securecoding.cert.org/confluence/display/java/NUM00-J.+Detect+or+prevent+integer+overflow)的一个函数，它还为其他数学运算符提供等效函数，例如减法。

```
static final int safeAdd(int left, int right) throws ArithmeticException {
  if (right > 0 ? left > Integer.MAX_VALUE - right
                : left < Integer.MIN_VALUE - right) {
    throw new ArithmeticException("Integer overflow");
  }
  return left + right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T18:54:40.523

`Integer.MAX_VALUE`和是用.*表示*`MIN_VALUE`的最大/最小值。这就是重点：你**不能**拥有更小或更大的值。*`int`**`int`***

 ***如果你想保持和测试更小或更大的值，你需要使用`long`.

当您尝试添加到 eg`Integer.MAX_VALUE`并将结果保存在 an`int`中时，变量将[溢出](http://en.wikipedia.org/wiki/Integer_overflow)`MAX_VALUE`，结果将保持在and之间的某个值`MIN_VALUE`。***

# android - 启用 GPS 空指针异常

> ID：12333542
> 
> 赞同：-1
> 
> 时间：2012-09-08T18:52:44.450
> 
> 标签：android, android-intent

嗨，我已经尝试启用 GPS，因为我正在使用下面的代码，但是在启用 GPS 时我得到了 NullPointerException

```
 private void turnGPSOn(){
String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

if(!provider.contains("gps")){ //if gps is disabled
    final Intent poke = new Intent();
    poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
    poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
    poke.setData(Uri.parse("3")); 
    sendBroadcast(poke);
} 
```

}

我的logcat是

```
 09-08 23:12:28.799: W/System.err(7222): java.lang.NullPointerException
  09-08 23:12:28.799: W/System.err(7222):   at  android.content.ContextWrapper.getContentResolver(ContextWrapper.java:90)
  09-08 23:12:28.799: W/System.err(7222):   at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.turnGPSOn(GPSTracker.java:110)
  09-08 23:12:28.799: W/System.err(7222):   at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.getLocation(GPSTracker.java:63)
  09-08 23:12:28.799: W/System.err(7222):   at com.eheuristics.android.diegodeals.googleplacesandmaps.GPSTracker.<init>(GPSTracker.java:45)
  09-08 23:12:28.799: W/System.err(7222):   at com.eheuristics.android.diegodeals.NearestLocation.onCreate(NearestLocation.java:79)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.ActivityThread.access$1500(ActivityThread.java:123)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
  09-08 23:12:28.799: W/System.err(7222):   at android.os.Handler.dispatchMessage(Handler.java:99)
  09-08 23:12:28.799: W/System.err(7222):   at android.os.Looper.loop(Looper.java:130)
  09-08 23:12:28.799: W/System.err(7222):   at android.app.ActivityThread.main(ActivityThread.java:3835)
  09-08 23:12:28.799: W/System.err(7222):   at java.lang.reflect.Method.invokeNative(Native Method)
  09-08 23:12:28.799: W/System.err(7222):   at java.lang.reflect.Method.invoke(Method.java:507)
  09-08 23:12:28.799: W/System.err(7222):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
 09-08 23:12:28.799: W/System.err(7222):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
 09-08 23:12:28.799: W/System.err(7222):    at dalvik.system.NativeStart.main(Native Method) 
```

我在第一行遇到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:08:39.997

[`Settings.Secure.getString()`](http://developer.android.com/reference/android/provider/Settings.Secure.html#getString%28android.content.ContentResolver,%20java.lang.String%29)`Settings.Secure.LOCATION_PROVIDERS_ALLOWED`如果不在其数据库中，将返回 null 。

根据您的上下文，如果`provider`包含`"gps"`，则启用 GPS。因此，如果一切都被禁用，那么`provider`可能`null`......

尝试添加：

```
if(provider == null || !provider.contains("gps")) { 
```

* * *

由于您可能正在使用 LocationManager 来检索 GPS 坐标，因此请考虑使用该[`isProviderEnabled()`](http://developer.android.com/reference/android/location/LocationManager.html#isProviderEnabled%28java.lang.String%29)方法。这里有一个例子：[How do I find if an Android device of an GPS is enabled](https://stackoverflow.com/q/843675/1267661)

```
final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    // Open Location Permissions Settings
    startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), GPS_REQUEST_CODE);

    // Override onActivityResult() to verify that the user has turned the GPS on.
} 
```

# xcode - Xcode 如何与 Git 一起使用来更改分支和签出旧提交？

> ID：12333546
> 
> 赞同：7
> 
> 时间：2012-09-08T18:53:16.547
> 
> 标签：xcode, git

由于 4.4.1 版本的 Xcode 没有 switch 分支或 checkout 旧版本功能，是否可以在 bash 中做到这一点

```
git checkout in-app-purchase-to-be-added 
```

或者

```
git checkout HEAD^2 
```

因为所有的源代码（`.m`, `.h`）, `.xib`, 和项目文件，图片资源都会在眨眼之间发生变化，所以不会在Xcode中引起奇怪的行为吗？现在我总是退出 Xcode，切换分支，然后重新启动 Xcode，但也许有更快的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T07:50:54.787

XCode 应该有一种切换分支的方法，如“在[Xcode 4.1 中使用分支和 git](http://www.gargoylesoft.com/blog/2011/08/using-branches-and-git-with-xcode-4-1/) ”中所述

> 首先，调出组织者的存储库视图并在左侧找到您的项目。
> 单击其中标有 Branches 的淡黄色文件夹，然后在窗口底部单击`Add Branch`图形。
> 在出现的对话框中为分支命名，并确保选中底部的复选框`Automatically switch to this branch`。

![自动切换](../Images/c4c4730eceb570e5cbed655904f5085b.png)

> **返回组织者的存储库视图并再次单击您的蓝色文件夹。
> 在窗口底部，您可以选择`Switch Branch`**返回到您的`master`分支（或您想要合并这些更改的任何分支）。

另请参阅“[使用 Xcode 进行 Git 分支管理](http://useyourloaf.com/blog/2012/02/29/git-branch-management-with-xcode.html)”

![切换分支](../Images/f68784e881cd8e8847ccead8011e47a1.png)

对于更复杂的分支切换/创建，是的，您可能必须通过命令行进行：

> 如果您在 Xcode 中打开项目的情况下从命令行执行 git 版本控制，您需要注意的一件事是，当您更改某些内容时，它并不总是立即发现。
> **我发现 Organizer 在发现当前分支已更改之前需要在一些不同的视图之间切换**。

因此，可能并不总是需要关闭/重新打开 XCode，具体取决于项目的性质。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-22T19:26:42.623

[![](../Images/63632e2ab7e665664adbf2939d7e3a51.png)](https://i.stack.imgur.com/1EcJD.png) 希望这会有所帮助。在通过 Xcode 时，发现了这个。它更加方便和容易。

# javascript - Es6：能够在设置/更新/删除对象属性时调用自定义方法？

> ID：12333547
> 
> 赞同：0
> 
> 时间：2012-09-08T18:53:20.670
> 
> 标签：javascript, node.js, ecmascript-harmony

我相信我已经读过即将到来的 ES6 定义允许在设置、更新或删除对象属性时调用自定义的可定义方法。但是，我再也找不到博客文章来支持它了。

这个对吗？我相信这个功能被称为“代理”，虽然我找不到任何决定性的东西。

此外，现在可以使用 es6-shim 了吗？( [https://github.com/paulmillr/es6-shim](https://github.com/paulmillr/es6-shim) ) 也许我正在寻找新的地图功能，但我再次不确定。

任何人都可以为我指出一个明确的指针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:09:52.110

是的，它是`Proxy`。它现在可以在 Firefox 中使用。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)

虽然我不知道它的语义是否与提议的 ES-6 代理相匹配。

[http://wiki.ecmascript.org/doku.php?id=harmony:direct_proxies](http://wiki.ecmascript.org/doku.php?id=harmony:direct_proxies)

为了测试提议的标准，这目前在 Chrome 中实现，但您需要启用“实验性”功能。

此处记录了一些新功能的高级描述，[http](http://tc39wiki.calculist.org/es6/) ://tc39wiki.calculist.org/es6/，但它正在进行中。

# python - 一种在 settings.py 中设置 django SITEURL 常量的方法

> ID：12333548
> 
> 赞同：2
> 
> 时间：2012-09-08T18:53:22.207
> 
> 标签：python, django, django-urls

我来自 PHP 背景，我知道在框架中的大多数地方都可以访问常量，我认为在 django 中也是如此。我试图在 django 中也有该 URL，但我试图从 django.contrib 中获得它。我试图利用 django 的 Site 类并导入它。但问题是在加载 settings.py 时我无法导入任何 django contrib。文件。

那么，我怎样才能自动拥有可以在任何地方使用的 SITE URL，无论是在模板中还是在其他地方。最好的方法是什么？任何python实用程序都可以这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T19:35:17.000

例如，无论您在 settings.py 中定义什么

```
SITE_URL = 'http://www.mydomain.com' 
```

可以在所有与 Django 相关的代码中访问：

```
from django.conf import settings #this imports also your specific settings.py

print settings.SITE_URL 
```

要不就`Site.objects.get_current().domain`

如果您希望能够在模板中访问它，您可以制作自己的[模板上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。把它放在 my_project/content_processor.py

```
from django.conf import settings
def my_site_url(request):
    return {
        'SITE_URL': settings.SITE_URL,
    } 
```

或者，如果您希望它是动态的：

```
from django.conf import settings
def my_site_url(request):
    return {
        'SITE_URL': Site.objects.get_current().domain,
    } 
```

并将其添加到 settings.py 中的 TEMPLATE_CONTEXT_PROCESSORS 变量中。之后看起来应该类似于：

```
TEMPLATE_CONTEXT_PROCESSORS =("django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.core.context_processors.tz",
"django.contrib.messages.context_processors.messages",
"my_project.context_processors.my_site_url",
) 
```

并完成。

# java - Java关键字在eclipse中不改变颜色

> ID：12333552
> 
> 赞同：2
> 
> 时间：2012-09-08T18:53:49.567
> 
> 标签：java, eclipse, ide

我刚刚启动了 Eclipse，我对它是全新的。由于某些原因代码突出显示关闭，我的 Java 代码都没有改变颜色。为什么是这样？谢谢

请注意，我使用的是最新版本的 Eclipse。

**编辑**：好的，在我重新启动 Eclipse 后，代码突出显示终于打开了。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:56:49.503

确保您的文件确实是 Java 文件，即具有`.java`扩展名。此外，您可以检查***Eclipse -> Preferences -> Java -> Editor -> Syntax Coloring***。在*元素*框中，搜索*关键字*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T23:27:29.650

我也有这个问题。对我来说，修复实际上是将我桌面上个人设置中的“主题”更改为默认设置。我把它放在“高对比度”主题上，它把日食中的所有文字都改成了黑色。当我查看我的偏好时（如上所述），我注意到颜色被分配给了文本，但它们都是黑色的。一旦我恢复了默认主题，所有文本着色都在 Eclipse 中起作用。希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-31T20:47:16.043

右键单击该文件并确保选中使用 Java 编辑器打开，而不是例如文本编辑器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T13:35:52.083

您也可以检查“大纲”面板。如果有一个警告链接提到“可扩展性”。您可以继续 Preferences > Editor > Scalability 并“禁用”“Scalability mode settings”下的所有复选框，然后单击“Apply”。之后它对我有用。似乎它被禁用了，因为我正在打开一个大文件。

# ruby-on-rails - 使用 Twitter Bootstrap 设置电子邮件联系表单的样式

> ID：12333553
> 
> 赞同：1
> 
> 时间：2012-09-08T18:53:49.827
> 
> 标签：ruby-on-rails, css, twitter-bootstrap, ruby-on-rails-3.2

我对编程和尝试学习 Rails 仍然很陌生。[我已经从http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)复制并粘贴了电子邮件表单，现在我正在尝试将 twitter 引导样式应用于下面的表单。我尝试了几种不同的方法，但没有运气，但我想我缺乏对 fieldset 标签存在的内容和原因以及如何将各种 css 类应用于我认为是帮助者的理解。如果有人能指出我正确的方向，那就太好了（对于编程、设计和 Rails 来说仍然很新，所以如果有人能确认我在这里寻找帮助者，那将是一个奖励）。

预先感谢您的帮助。

```
<%= form_for @message, :url => contact_path do |form| %>
<fieldset class="fields">
 <div class="field">
  <%= form.label :name %>
  <%= form.text_field :name %>
 </div>

 <div class="field">
  <%= form.label :email %>
  <%= form.text_field :email %>
 </div>
 <div class="field">
  <%= form.label :subject %>
  <%= form.text_field :subject %>
 </div>

 <div class="field">
  <%= form.label :venue %>
  <%= form.text_field :venue %>
 </div>

 <div class="field">
  <%= form.label :date %>
  <%= form.text_field :date %>
 </div>

 <div class="field">
  <%= form.label :time %>
  <%= form.text_field :time %>
 </div>

 <div class="field">
  <%= form.label :body %>
  <%= form.text_area :body %>
 </div>
</fieldset>

<fieldset class="actions">
  <%= form.submit "Send" %>
 </fieldset>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:18:24.727

应该是这样的：

```
<%= form_for @message, :url => contact_path, :html => {:class => "form-horizontal"} do |form| %>
<fieldset>
 <div class="control-group">
  <%= form.label :name, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :name %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :email, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :email %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :subject, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :subject %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :venue, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :venue %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :date, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :date %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :time, :class => "control-label" %>
  <div class="controls">
    <%= form.text_field :time %>
  </div>
 </div>

 <div class="control-group">
  <%= form.label :body, :class => "control-label" %>
  <div class="controls">
    <%= form.text_area :body %>
  </div>
 </div>

 <div class="control-group">
  <div class="controls">
    <%= form.submit "Send" %>
  </div>
 </div>

</fieldset>
<% end %> 
```

在具有多个表单的大型 Rails 应用程序中添加这种样式将是一件令人头疼的事情。所以我推荐你使用twitter 引导生成器附带的[SimpleForm gem（阅读安装指南）。](https://github.com/plataformatec/simple_form)

有了这个 gem，你的表单就可以像下面这样简单地启动了：

```
<%= simple_form_for @message, :url => contact_path, :html => { :class => 'form-horizontal' } do |form| %>
  <%= form.input :name %>
  <%= form.input :email %>
  <%= form.input :subject %>
  <%= form.input :venue %>
  <%= form.input :date %>
  <%= form.input :time %>
  <%= form.button :submit %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:04:57.650

我是用手机输入的，所以不能详细说明。HTML 中的 fieldset 标签用于对相关的表单字段进行分组。它没有多大作用。您可能可以删除它。

Twitter bootstrap 对 HTML 的组织方式和应用哪些类相对严格。最好从 Twitter 引导文档中复制一些示例表单 HTML 并将表单字段替换为 Rails 代码以生成它们。

# eclipse - CVS 从分支中删除项目

> ID：12333554
> 
> 赞同：0
> 
> 时间：2012-09-08T18:53:49.733
> 
> 标签：eclipse, eclipse-plugin, repository, cvs, tortoisecvs

我从 HEAD 创建了一个新分支并尝试向其中添加 3 个项目。我错误地添加了 2 个额外的项目，这些项目实际上在分支中是不需要的。

为避免分支/负责人的未来用户感到困惑，我想从分支中删除这 2 个项目，并将它们保留在 HEAD 中，以便将来任何人都只能在 HEAD 中看到这 2 个项目。

我在 CVS 物理服务器上没有写权限，有什么办法可以从 eclipse 中的 cvs 插件中做吗？

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T04:43:22.133

我不认为你可以从 Eclipse CVS 插件中做到这一点。相反，我认为您需要从命令行执行此操作。

首先，从 CVS 查看整个分支。 `cd`到要删除的项目正上方的目录。然后使用这个命令：

```
cvs remove -R proj1 proj2 ... 
```

# javascript - 在 JavaScript 代码中包含引号的 HTML 标记和引号

> ID：12333556
> 
> 赞同：0
> 
> 时间：2012-09-08T18:54:07.807
> 
> 标签：javascript, html

我正在编写 JavaScript 代码，单击时将函数 getImage 分配为稍后应该显示在页面中的图像源。但是，引号给了我一个问题。

```
<img src="bill.jpg" class="captify" 
id="teamformat" alt="Bill Gates" onclick="getName('Bill Gates'); 
getMotto('Bill\'s motto'); 
getImage ('<img src=\"http://www.somepage.com/images/team/bill.jpg\"/>');" /> 
```

如何修复 getImage 函数中的引号？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T18:55:21.107

通常，您不需要在单引号分隔的字符串中转义双引号：

```
getImage ('<img src="http://www.somepage.com/images/team/bill.jpg"/>');" /> 
```

类似地，`getMotto`可以改写为：

```
getMotto("Bill's motto"); 
```

您遇到了问题*，因为*您在单个属性中使用了两种引号样式 - 您那里的 JavaScript 太多了，您*确实*需要转义内部双引号（使用`&quot;`）。

这两个都应该放在一个你附加点击事件的javascript函数中——不要直接把它们放在`onclick`事件处理程序中，这是不好的做法。

就像是：

```
function getDetailsForBill(){
     getName('Bill Gates'); 
     getMotto('Bill\'s motto'); 
     getImage ('<img src="http://www.somepage.com/images/team/bill.jpg" />');
} 
```

制作`onclick`：

```
onclick="getDetailsForBill();" 
```

尽管您确实应该注册一个事件侦听器，但使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:56:46.410

不要逃避它：

```
getImage ('<img src="http://www.somepage.com/images/team/bill.jpg"/>');" /> 
```

# php - Jquery Onclick 将数据发送到新打开的窗口

> ID：12333560
> 
> 赞同：0
> 
> 时间：2012-09-08T18:54:29.720
> 
> 标签：php, javascript, jquery, post

我知道这是一个常见问题，但我找不到任何答案。我有一个包含链接的 PHP 文件。单击该链接时，我想在新窗口中打开另一个页面，在这个新打开的页面上，我想获取在前一页上单击的链接的 ID 属性。

> 当前页面='patientreg.php'
> 在新窗口中打开的新页面='patient_history.php' 将
> 数据从当前页面发布到新加载的页面。

当前页面代码：

**HTML：**

```
<a id="37" onclick="phistory(this.id);" href="#">View history</a> 
```

**JavaScript：**

```
function phistory(myVar) {  
    var myurl = '../main/patient_history.php';  
    $.post(myurl,{data:myVar},function(){});  
    window.open(myurl,'_blank');                
} 
```

**新页面代码：**

```
$phid = $_REQUEST["data"];  
echo phid; 
```

问题是它没有在下一页上回显数据，但我可以在当前页面的 Firebug 响应选项卡中看到完整新页面的回显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T19:14:36.197

试试这个，所以使用表单将数据发送到您的页面，您可以使用更详细的锚元素：

HTML：

```
<form id="myform" action="../main/patient_history.php" method="POST">
   <input type="hidden" name="data" id="data" />
</form> 

<a data-idref="37" class="see-history" href="#">View Histroy</a> 
```

Javascript：

```
$(function() {

   $('.see-history').bind('click', function(event) {
      try { 
         window.open('about:blank', 'mynewwindow');   
         $('#myform').find('#data').val($(this).data('idref'));
         $('#myform').attr('target', 'mynewwindow').submit();
      } catch(e) {}

      return false;

   });

}); 
```

**编辑**

如果您需要为每个故事打开一个新窗口，您可以使用元素 id 的名称创建一个新窗口：

```
 $('.see-history').bind('click', function(event) {
      var id = $(this).data('idref');  
      try { 
         window.open('about:blank', 'mynewwindow_' + id);   
         $('#myform').find('#data').val(id);
         $('#myform').attr('target', 'mynewwindow_' + id).submit();
      } catch(e) {}

      return false;

   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:03:15.493

试试这个。对于您的 JavaScript`onclick`处理程序：

```
function phistory(myVar) {  
    var myurl = '../main/patient_history.php?data='+myVar;
    window.open(myurl);                
} 
```

然后，在您的 PHP 文件中：

```
$phid = $_REQUEST["data"];  
echo $phid; 
```

你的问题是你误解了jQuery的`.post()`方法的使用。它只是检索页面（使用指定的 POST 参数） - 它不会修改页面，因此当您在新窗口中打开它时，它将具有您指定的 ID 参数。我对其进行了切换，使其不再使用 jQuery 的`.post()`，而只是通过打开新窗口来使用 GET 参数`?data=[YOUR-ID]`。您会注意到，PHP 基本保持不变，但我更改了 echo 语句以`$`在变量名之前包含符号。这可能只是问题中的一个错字，但如果这是在您的代码中，那么它就是问题的一部分。

另一种可能性是从查询字符串中完全删除 ID，并将其作为全局变量存储在第一页上，然后使用`window.opener`第二页上的属性检索它，如下所示：

**第一页：**

```
var pid=0;
function phistory(myVar) {  
    pid=myVar;
    window.open("../main/patient_history.php");                
} 
```

**第二页（JavaScript）：**

```
pid=window.opener["pid"];
alert(pid); //Just to check that it's working 
```

# javascript - 在 C++ 中调用 JScript 中的 instanceof 运算符 (IDispatch/IDispatchEx)

> ID：12333562
> 
> 赞同：2
> 
> 时间：2012-09-08T18:54:34.710
> 
> 标签：javascript, c++, com, jscript, idispatch

我有一个托管 Active Script JScript 引擎的应用程序。根据 jscript.dll 的版本，它可以运行到 JScript 5.8。该应用程序向 JScript 环境公开了许多对象和方法。

当脚本调用某个函数时，IDL 是这样的：

`HRESULT func(VARIANT varInput);`

我想确定输入是否是`instanceof`另一个函数（即，该函数是否是其原型在输入原型链中的构造函数）。在 JScript 中：

`input instanceof Error`

这如何在 C++ 中使用 IDispatch/IDispatchEx 完成？

该方法可以访问 IActiveScript（由 JScript 引擎实现）和 IActiveScriptSite（由宿主实现）接口，因此可以使用 IActiveScript::GetScriptDispatch 获取全局对象，从中可以获取任何其他构造函数（例如`Error`）取回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:04:09.150

我认为 Roman R 是一个很好的答案，但是，为了最大限度地减少代码注入，您可以使用`IActiveScriptParse::ParseScriptText`将任何匿名 JavaScript 函数转换为`IDispatch`指针：

```
 HRESULT hr = S_OK;
    EXCEPINFO ei = { };
    CComVariant vIsErrorFunc;
    hr = spIActiveScriptParse->ParseScriptText(
        OLESTR("(function () { return function (obj) { return obj instanceof Error; }; } )();"),    // pstrCode
        NULL,                       // pstrItemName
        NULL,                       // punkContent
        NULL,                       // pstrDelimiter
        0,                          // dwSourceContextCookie
        0,                          // ulStartingLineNumber
        SCRIPTTEXT_ISEXPRESSION,    // dwFlags
        &vIsErrorFunc,              // pvarResult
        &ei                         // pexcepinfo
        ); 
```

匿名函数很方便地有一个 DISPID `DISPID_VALUE`，您可以使用`IDispatch::Invoke`. 如果您在 a 中有一个 JavaScript 对象，`VARIANT`您可以按如下方式对其进行测试：

```
// VARIANT* pvObject -- JavaScript object to test
DISPPARAMS dispParams = { pvObject, 0, 1, 0 };
CComVariant vResult;
hr = V_DISPATCH(&vIsErrorFunc)->Invoke(
    DISPID_VALUE,
    IID_NULL,
    0,
    DISPATCH_METHOD,
    &dispParams,
    &vResult,
    NULL,
    NULL); 
```

您可以坚持`vIsErrorFunc`，以便您可以重复使用匿名函数，或者您可以让它超出范围并对其进行垃圾收集。无论哪种方式，都不应该对 JavaScript 引擎中的客户端代码产生持久影响。

** 编辑： **

我发现我原来的匿名函数不起作用（我得到的是 VT_EMPTY 而不是 VT_DISPATCH）：

```
function (obj) { return obj instanceof Error; } 
```

为了欺骗它，我将函数包装如下：

```
(
    function ()
    {
        return function (obj) { return obj instanceof Error; }
    }
) () 
```

我希望这可以解释我的示例中的奇怪表达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:49:37.857

`IDispatch*`您包装到变体中的有一个( `DISPID_VALUE`= `0`) 属性，如果是`Error`object，它会给您一个字符串值“[object Error]”。

您还可以定义或注入 JScript 函数，例如：

```
function IsInstanceOf(object, type) {
    return object instanceof type;
}
function IsInstanceOfError(object) {
    return IsInstanceOf(object, Error);
} 
```

`IDispatch*`并使用您已经持有让 JScript 引擎根据特定类型检查它并返回您的此类检查的真/假结果，从您的 C++ 代码中调用它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T23:59:48.747

与 Java 的 instanceof 运算符等效的 C++ 是使用 dynamic_cast。例如，

```
x instanceof y 
```

在 C++ 中将是以下内容：

```
dynamic_cast<y*>(x) != 0 
```

# jquery - document.getElementById 与 $("#something")

> ID：12333572
> 
> 赞同：1
> 
> 时间：2012-09-08T18:55:53.157
> 
> 标签：jquery, dom

您想解释一下两者之间有什么不同吗？

```
document.getElementById("something") 
```

和

```
$("#something") 
```

我正在尝试使用 ajax 上传文档，但我意识到

```
var upl = document.getElementById('uplFile');
    console.log(upl.files); 
```

返回一个对象但是

```
var upl = $('#uplFile');
    console.log(upl.files); 
```

返回“未定义”

请解释一下差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T18:58:07.753

我认为您的意思是：

```
document.getElementById("something") 
```

和

```
$('#something') 
```

第一个将返回具有指定 id 或 null 的 DOM 元素。

第二个将返回一个 jQuery 对象，该对象将包含具有指定 id 的 DOM 元素，或者是一个空的 jQuery 对象（长度 = 0）。

由于 jQuery 函数返回的是 jQuery 对象而不是元素，因此您必须从 jQuery 对象中取出元素才能访问元素属性：

```
var upl = $('#uplFile');
console.log(upl[0].files); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:01:36.240

不同之处在于`getElementById('id')`返回一个 HTML DOM 元素，而`$('id')`返回一个由 jQuery 对象包裹的 DOM 元素。

因此，您的两个示例之间的区别在于您引用了返回对象的属性。显然，jQuery 对象没有 files 属性，而 DOM 元素有。

# visual-c++ - 如何在 MFC 应用程序中放置一个按钮？

> ID：12333582
> 
> 赞同：2
> 
> 时间：2012-09-08T18:57:08.550
> 
> 标签：visual-c++, button, mfc

我的 mfc 程序在客户区绘制了以下形状 - 现在我想在此旁边放置一个按钮以重新排列形状。

![在此处输入图像描述](../Images/91a05320db24cdafbb40b01632542994.png)

我知道我可以使用工具栏或菜单按钮，但是有没有办法可以在框旁边放置一个按钮？像这样的东西：

![在此处输入图像描述](../Images/b20456606bb4b5d575d4111a71bb2ba2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T09:50:15.500

您需要做的就是创建一个`CButton`，并适当地定位它。

```
//.h
#define MYBUTTONID 10000 //or whatever doesn't conflict with your existing resources

public class CMyVew : public CView
{
    CButton m_Button;

    virtual void OnInitialUpdate();
    void RepositionButton();
}

//.cpp
void CMyVew::OnInitialUpdate()
{
   //this creates the actual button GUI window
   m_Button.Create("Rearrange", WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, CRect(0,0,0,0), this, MYBUTTONID);
   RepositionButton();
}

void CMyVew::RepositionButton()
{
    //work out button position you need
    m_Button.MoveWindow(x, y, width, height);
} 
```

请注意，该按钮只创建一次，并负责绘制本身。你不需要担心它`OnDraw()`或类似的事情。

您唯一需要担心的是按钮何时应该移动位置。这就是我分离出`RepositionButton()`函数的原因。例如，如果您使用 a`CScrollView`并且用户滚动，则按钮窗口对此一无所知，因此您需要对滚动事件做出反应并调用`RepositionButton()`

`ON_BTN_CLICKED`通过添加消息映射，您可以像对任何其他按钮一样对按钮的消息做出反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:43:25.957

您可以使用 Windows API 创建自己的按钮。主要是获取客户区的窗口句柄，然后在创建按钮时将其用作父句柄。

例如，这里是使用 Windows API 创建按钮的示例。

Create() 方法是 CWnd 类的一部分。

```
CRect windRect (xColumn, xRow, xColumn +  nWidth, xRow + nHeight);
Create (_T("BUTTON"), myCaption, WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_MULTILINE, windRect, pParentWnd, m_myId); 
```

您需要知道按钮的宽度和高度以及标识符。需要 id 以便您可以在父窗口中找到它并处理来自按钮操作的消息。

[查看CreateWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)上的Windows API 文档。

# javascript - Twitter bootstrap：弹出窗口未在第一次单击时显示，但在第二次单击时显示

> ID：12333585
> 
> 赞同：32
> 
> 时间：2012-09-08T18:57:34.143
> 
> 标签：javascript, django, twitter-bootstrap

这是我的标记：

```
<a href="#" class="reviews" id="like" rel="popover" data-content="" data-placement="right" data-original-title="Like episode">
    <i class="icon-thumbs-up"></i> 
    Loved it
</a>(<span id="episode_likes">{{ episode_likes }}</span> 
```

这是 JavaScript：

```
$('a.reviews#like').click(function(e){
    var element = $(this);
    $.ajax({
        url: '/episoderatings/like/',
        type: 'POST',
        dataType: 'json',
        data: {
            csrfmiddlewaretoken: '{{ csrf_token }}',
            episode_number: current,
            story: current_story
        },
        success: function(response){
            if(response=='You have liked this episode'){
                $('span#episode_likes').text(parseInt($('span#episode_likes').text())+1);
            }
            $(element).attr('data-content',response);
            $(element).popover();
        }
    });
    e.preventDefault();
}); 
```

问题是当我点击“喜欢”按钮时，弹出框不会在第一次点击时出现，所以无论我是否喜欢该页面，我都会错过重要的回复。当我单击“喜欢”按钮时，会出现第二次弹出窗口，然后从那里开始保持其切换行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-08T19:35:51.030

当您第一次单击链接时，还没有初始化弹出框，可以显示。您通过调用来初始化弹出框`$(element).popover();`。因此，您的代码在单击链接*后*初始化弹出框，并且第一次没有显示任何内容。第二次单击它时，弹出框就在那里并且可以显示。

`.popover()`您必须在单击链接之前拨打电话。在你的情况下

```
$('a.reviews#like')
    .popover({trigger: 'manual'})
    .click(function(e){
        var element = $(this);
        $.ajax({
            url: '/episoderatings/like/',
            type: 'POST',
            dataType: 'json',
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}',
                episode_number: current,
                story: current_story
            },
            success: function(response){
                if(response=='You have liked this episode'){
                    $('span#episode_likes').text(parseInt($('span#episode_likes').text())+1);
                }
                $(element).attr('data-content',response).popover('show');
            }
        });
        e.preventDefault();
    }); 
```

应该做的伎俩。

请注意第 2 行中的调用`.popover({trigger: 'manual')`。这会初始化弹出框并禁用它在您单击后立即出现。这不会有帮助，因为您在 AJAX 回调中设置了它的内容，并且很快就可以显示弹出框。因此，在回调中，您现在必须在设置属性`.popover('show')`后手动调用。`data-content`

还有一件事：您必须`.popover('hide')`在显示弹出框后的某个时间点调用。当您再次单击链接时它不会消失，因为那时 AJAX 调用只会再次触发并`.popover('show')`再次调用。我能想到的一种解决方案是在弹出框处于活动状态时向链接添加一个类，并在每次单击时检查该类。如果该类在那里，您可以调用`.popover('hide')`并删除该类，否则进行 AJAX 调用。我创建[了一个小的 jsfiddle](http://jsfiddle.net/npq3A/)来说明我的意思。

有关更多信息[，请查看文档](http://twitter.github.com/bootstrap/javascript.html#popovers)。

希望有帮助。

# lisp - LISP 局部/全局变量赋值

> ID：12333590
> 
> 赞同：10
> 
> 时间：2012-09-08T18:58:12.937
> 
> 标签：lisp, common-lisp

如果我们定义一个类似的函数

```
(defun foo(x)
  (setf x somevalue)) 
```

是`x`定义为局部变量还是全局变量？使用 setf/q 将值设置为全局。如果它是全局的，谁能告诉我如何在 lisp 中定义一个局部变量`let`？

谢谢！

考虑以下示例

```
(let ((x 0)) 
  (defun foo (y) 
    (when (equal x 0) (setq x y)) 
    (when (< x y) (setq x y))
    x)) 
```

当我给`foo`like一些输入时`(foo 2)`，它返回 2，如果我们再次执行该函数，`(foo 1)`它仍然返回 2 并`(foo 3)`返回 3。这就是我真正想要的。但问题是这怎么可能，因为如果我尝试`x`从 clisp 终端访问函数外部的变量，我无法。如果我再次访问该函数，它似乎保留了以前的值`x`。

谢谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T19:58:20.293

为了与其他语言（如 C、C++、Java 或 Python）进行比较，您的代码更改的是“局部变量”，即使这不是 Lisper 会使用的措辞（Lisp 用语中的措辞将是本地“绑定” ）。

您可以像示例一样使用函数参数或使用一些标准形式来创建局部变量，例如：

*   `(let ((x 12)) ...)`
*   `(do ((x 0 (1+ i))) ...)`
*   `(dotimes (x 10) ...)`
*   `(loop for x from 0 to 10 do ...)`

另一方面，在您的实现中，可能所有局部变量都是使用参数创建的，而其他形式只是扩展为该参数的宏。例如：

```
(let ((x 10)) ...) 
```

相当于

```
(funcall (lambda (x) ...) 10) 
```

另请注意，确实阅读您的代码片段`x`在某种意义上可能是“全局变量”，因为它可能已被声明为特殊：

```
(defvar x 12)
;; ==> x

(defun bar ()
  (format t "The value of x is ~a" x))
;; ==> bar

(defun foo (x)
  (bar))
;; ==> foo

(foo 42)
The value of x is 42
;; ==> NIL

x
;; ==> 12 
```

如果您使用它声明一个变量“特殊” `(defvar ...)`，则处理方式将有所不同：就像每次将其用作参数或以某种`(let ..)`形式使用它时，代码将使用新提供的值保存当前值，然后退出函数后恢复值或`let`.

因此，这些变量既是“全局的”（因为外部函数可以看到它们），也是局部的（因为在您的函数或 let 终止后，先前的值将被恢复）。

标准约定是用“earmuffs”命名特殊变量，即在名称的开头和结尾都用星号，如：

```
(defvar *x* 12) 
```

这有助于阅读您的代码的人了解该变量是特殊的。但是请注意，这不是语言强制要求的，任何名称都可以用于特殊变量。

没有什么类似于 C、C++、Java 或 Python 中的特殊变量。

最后一点关于`setq`和`setf`。这里的事情有点棘手，因为您需要了解较低级别的 Lisp 才能了解为什么`setq`需要。如果您使用的是 Common Lisp，那么您应该忘记`setq`并始终使用`setf`.

`setf`是一个宏，将`setq`在需要时扩展（但也`setq`可以`setf`在需要时更改（符号宏），这可能会让新手感到困惑）。

您的最后一个示例是“关闭”的情况。当您定义一个函数（使用`(lambda ...)`表单命名或未命名）时，该函数可以“捕获”可见的变量并在以后使用它们。一个更简单的例子是“加法器”：

```
(defun adder (x)
  (lambda (y) (incf x y))) 
```

此函数返回一个函数，该函数将继续将传递的值添加到内部累加器：

```
(let ((f (adder 10)))
  (print (funcall f 3))
  (print (funcall f 9))
  (print (funcall f 11))) 
```

输出将是 13 (10 + 3)、22 (13 + 9) 和 33 (22 + 11)。

匿名函数“捕获”了局部变量`x`，即使在退出`adder`函数后也可以使用它。在 C、C++ 或 Java 等语言中，当您退出定义变量的范围时，局部变量将无法生存。

C++11 有未命名的函数，但仍然无法捕获变量并在作用域内存活（可以将它们复制到未命名函数的局部变量中，但这不是一回事）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T19:14:36.497

实际上，`x`是函数的局部变量，所以`setf`它只`setq`改变局部变量`x`。

要回答问题的第二部分，除了 let 之外，还有另一种定义局部变量的方法：

```
(funcall (lambda (var1 var2...)
           ... use var1 var2 ...)-
   val1 val2 ...) 
```

实际上，`defun`可以实现为

```
`(setf (symbol-function ,name) (lambda ,args ,@body)) 
```

尽管我检查过的所有实现都不止于此。

此外，这个`symbol-function`地方允许你这样做：

```
(setf (symbol-function '+) (function -)) 
```

虽然这通常是个坏主意。

## 你的第二个问题

那里发生的事情是`x`包含`defun`. 它**不是**全局变量。您正在做的`defun`是创建一个闭包，该闭包“捕获”周围范围内的所有词法范围（不是用`defvar`/创建）变量，并为将来保留它们。`defparameter`如果要检查 的值`x`，请添加另一个函数

```
(defun get-x () x) 
```

里面`let`。换句话说，`x`是函数所在的本地`let`。您提供的情况类似于：

```
(let ((x 3))
    (print x)
    (let ((y 7))
        (print (list x y))
        (setf x y))
    (print x)) 
```

除了内部`let`被替换为 a `defun`（这是 a `lambda`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:03:19.227

在您的代码`x`中是`f`函数的参数，因此是函数的本地参数。调用`setf`不会创建新变量，而只是设置现有局部变量的值`x`。使用`setq`而不是`setf`行为相同。

# javascript - 用于从字符串中过滤关键字的正则表达式

> ID：12333591
> 
> 赞同：2
> 
> 时间：2012-09-08T18:58:24.533
> 
> 标签：javascript, regex

我正在尝试 JS regX 匹配一些值并用标记替换它们。所以这是我尝试过的代码。

```
content = '<p>[dfp:advertisement:leaderboard:750x90]</p>text here<p>[dfp:advertisement:box1:300x250]</p>';
var regX = /([a-zA-Z0-9]*):([0-9]*x[0-9]*)/g;
match = regX.exec(content); 
```

好的，问题是这只会匹配第一个值，而不是第二个值。我已经添加`/g`但还没有运气。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:03:43.963

即使带有标志，一次调用`exec`也只会返回第*一个*匹配项。`g`但是正则表达式将包含状态，以便后续多次调用`exec`使用相同的正则表达式将返回以下匹配项。

从 MDN[`exec`文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)：

> 返回的数组将匹配的文本作为第一项，然后每个匹配的捕获括号都有一个项目，其中包含捕获的文本
> 
> [ ... ]
> 
> 如果您的正则表达式使用“g”标志，您可以多次使用 exec 方法在同一字符串中查找连续匹配项。

因此，此代码将`alert`与您的示例中的前两个匹配：

```
var content = '<p>[dfp:advertisement:leaderboard:750x90]</p>text here<p>[dfp:advertisement:box1:300x250]</p>';

var regX = /([a-zA-Z0-9]*):([0-9]*x[0-9]*)/g;
var match = regX.exec(content);
var match2 = regX.exec(content);

alert(match[0]);
alert(match2[0]); 
```

正如其他人已经提到的那样，您可以改为使用`match`字符串来返回具有多个匹配项的数组。

因此，与上面的代码类似，此代码将`alert`匹配您示例中的前两个：

```
var content = '<p>[dfp:advertisement:leaderboard:750x90]</p>text here<p>[dfp:advertisement:box1:300x250]</p>';
var regX = /([a-zA-Z0-9]*):([0-9]*x[0-9]*)/g;

var match = content.match(regX);

alert(match[0]);
alert(match[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:01:20.357

使用`content.match`代替`regX.exec`

# clojure - 在 clojure 中 FizzBu zz 的两种解决方案中，为什么一种更快？

> ID：12333595
> 
> 赞同：3
> 
> 时间：2012-09-08T18:59:08.533
> 
> 标签：clojure, profiling, fizzbuzz

**在clojure中FizzBu​​zz的两种解决方案中，为什么第一种更快？**

```
; #1
(defn fizzbuzzer [z]
    "fizzbuzz checker."
    (let [fizz? (zero? (rem z 3))
          buzz? (zero? (rem z 5))
          fizzbuzz? (and fizz? buzz?)]

        (cond fizzbuzz? "FizzBuzz"
              buzz? "Buzz"
              fizz? "Fizz"
              :else z)))

; #2
(defn fizzbuzzer2 [z]
    "fizzbuzz checker."
    (let [fb (str
                (if (zero? (rem z 3)) "Fizz" "")
                (if (zero? (rem z 5)) "Buzz" ""))]
        (if (seq fb) fb z)))

; profiling ;
; (time (fizzbuzzer 1500))
;  => "Elapsed time: 0.098058 msecs"
; (time (fizzbuzzer2 1500))
;  => "Elapsed time: 0.150438 msecs"

;; note: profiling done on separate instances to avoid caching 
```

*PS FizzBu​​zz？*

*~ 如果数字可以被 3 整除，则打印 Fizz 而不是数字。如果它可以被 5 整除，则打印 Buzz。如果它可以被 3 和 5 整除，则打印 FizzBu​​zz。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:24:14.660

当第一个解决方案返回对现有字符串的引用时，第二种解决方案为每个请求连接字符串。(str (if.​​.) (if.​​.)) 创建 2 个中间字符串。

如果我可以补充一点，要进行更正确的分析，您需要重复运行这些函数一些周期。为了获得更好的结果，请执行两次并丢弃第一个结果，这将允许 Java Just-In-Time 编译器完成其工作。

# iphone - 指针中未使用的位 (iPhone)

> ID：12333599
> 
> 赞同：0
> 
> 时间：2012-09-08T19:00:24.720
> 
> 标签：iphone, pointers, box2d

Box2d 对象有一个 `void* m_userData` 用户可以存储数据的字段。通常你存储一个指向另一个对象的指针，例如一个指向 sprite 的指针，该指针应在每个系统滴答时使用位置信息进行更新。

我想存储指向另一个对象的指针，但如果我也能存储一点额外的信息，我会很高兴。我可以在指针的最高有效位中做到这一点吗？可以设置对象指针的最高位吗？我的意思是内部存储器只有 512 MB（我猜）。

也许应用程序因此被拒绝？这不是完全未来的证明，而且有点像黑客......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:12:41.487

指向“另一个对象”的指针可以是您喜欢的任何内容，因此执行此操作的典型方法是创建一个结构/类来保存您想要存储在用户数据中的任何内容，例如：

```
struct myUserData {

    Object* anObject;
    AnotherObject* anotherObject;
    bool oneExtraBit;//okay, 8 extra bits :)

} 
```

然后您将其中之一设置为用户数据...

```
myUserData* mud = new myUserData;
mud->anObject = ...;
mud->oneExtraBit = ...;
myBody->SetUserData( mud ); 
```

# android - 即使应用程序关闭，Android 也会显示 Toast

> ID：12333600
> 
> 赞同：3
> 
> 时间：2012-09-08T19:00:27.637
> 
> 标签：android

说，我必须计算两位数的总和，然后将这两个值传递给服务器，服务器返回计算值，应用程序将其显示在`Toast`. 它完美地工作。`Toast`但即使应用程序已关闭，我也想展示这一点。我想知道我是否可以使用任何其他`Context`来制作全局`Toast`. 或者最好的方法是什么？创建一个`Notification`有意义吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T19:23:26.797

即使可能，当您的应用程序不在前台时显示 toast 也不是最好的主意。这是因为`Toast`突然冒出来可能会令人讨厌、无法提供信息并破坏用户当前正在做的任何事情。

正如您所提到的，通知是实现这一目标的方式。用户可以在决定执行此操作时阅读通知，并且不会错过通知，这与 Toast 简单相反，因为检查通知需要用户采取行动。

[您可以在此处](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)阅读有关通知以及如何实施通知的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:09:59.207

关闭应用程序时无法显示 Toast。但是，即使您将任务移至后台，您也可以显示它。例如，如果您的设备上安装了 Titanium Backup，请打开它并立即按返回键。您可以在主屏幕上看到吐司。通知是更好的方法。虽然你必须把通知栏拉下来才能看到结果。但是，如果您确实希望显示 toast，请将任务发送到后台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:18:28.820

我有点困惑为什么你需要一个服务器后端来计算两位数的总和，但无论如何我都会回答。

是的，即使您的应用程序不在前台，您也可以显示祝酒词。但是它必须在后台运行。如果您的应用程序的进程终止，则无法显示祝酒词。您可以使用应用程序上下文或活动/服务上下文来显示 toast。

但是，在这种情况下，您可能希望使用通知来提供更好的用户体验。用户发现几乎不可能分辨出 toast 来自哪个应用程序，因为它只是屏幕上闪烁的一些文本，没有标识。但是，您可以轻松地告诉用户您的通知属于哪个应用程序。此外，通过使用通知，您不会强迫用户在 toast 存在的那一刻阅读您的文本。相反，用户可以在他有时间的时候查看通知。

# android - 我使用Phonegap + HTML5 + Websql制作了一个应用程序，一旦用户重新启动他的手机，应用程序的数据会丢失吗？

> ID：12333607
> 
> 赞同：0
> 
> 时间：2012-09-08T19:01:05.183
> 
> 标签：android, iphone, html, cordova, web-sql

我的应用程序使用 HTML5 的 Websql 来存储临时笔记/书签，稍后将与服务器同步。

我的疑问是 - 就像手机的浏览器一样，我会在移动重启（或清除缓存）时丢失 websql 中的数据吗？

我还没有构建应用程序..我在计划部分..这个疑问引起了..有经验的人吗？因为如果 websql 不稳定，我将不得不寻找其他方法..

编辑：

自己测试：即使手机重启，数据也是安全的，感谢您的回复..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:38:31.150

不，你会没事的——对于 iOS，一定要使用最新的 Cordova——存储有一个问题，但这些问题在 1.7 中已经解决了。

继续。

# recursion - 递归实现

> ID：12333612
> 
> 赞同：0
> 
> 时间：2012-09-08T19:01:38.440
> 
> 标签：recursion

递归方法来查找整数 k 可以表示为 sum 的不同方式的数量，其中每个操作数都是小于 n 的整数...请帮助我使用算法。我想不出这个问题的递归解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:08:20.610

基本上，我的第一个想法是：

```
int numberOfWays(int x)
{
    if(x <= 1)
        return 0;
    if(x == 2)
        return 1;
    // else:
    int res = 0;
    int i;
    for(i = 1; i <= x / 2; i++)
        res += numberOfWays(x - i);
    return res;
} 
```

我将给它一些测试和想法，但仅此而已。

或许多解释几句...

显然，没有办法把 1 写成整数之和 < 1，只有一种方法把 2 写成整数和 < 2：2 = 1 + 1。

从那里开始，事情变得有趣。每个整数 x > 2 都可以写成 (x-1) + 1。因为我们是递归的，所以我们现在得到方法的数量，(x-1) 可以写成整数之和 < (x-1) 等等上。最终，我们将达到 (xn) = 2，这将返回 1。

从那里开始，我们向上回溯，总结我们找到的表示数字的方式的数量，瞧：）

# c# - ASP.NET 成员资格电子邮件验证

> ID：12333613
> 
> 赞同：4
> 
> 时间：2012-09-08T19:01:49.660
> 
> 标签：c#, asp.net, smtp

尝试根据[本文](http://www.4guysfromrolla.com/articles/062508-1.aspx)在 C# 中创建电子邮件验证。

我创建了一个 jangosmtp 帐户来发送电子邮件。但是，它似乎不起作用。

网络配置：

```
 <system.net>
    <mailSettings>
      <smtp>
        <network
             host="relay.example.com" port="25" userName="********" password="********" />
      </smtp>
    </mailSettings>
  </system.net> 
```

注册.aspx

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" DisableCreatedUser="True">
        <WizardSteps>
            <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server" />
            <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server" />
        </WizardSteps>
        <MailDefinition BodyFileName="NewAccountTemplate.htm" From="example@example.com" IsBodyHtml="True"  Subject="Steps to activate your new account..." Priority="High" />
    </asp:CreateUserWizard>
</asp:Content> 
```

注册.aspx.cs：

```
namespace WebSite
{
    public partial class Registration : System.Web.UI.Page
    {
        protected void CreateUserWizard1_SendingMail(object sender, MailMessageEventArgs e)
        {
            //Send an email to the address on file
            MembershipUser userInfo = Membership.GetUser(CreateUserWizard1.UserName);

            //Construct the verification URL
            string verifyUrl = Request.Url.GetLeftPart(UriPartial.Authority) + Page.ResolveUrl("~/Verify.aspx?ID=" + userInfo.ProviderUserKey.ToString());

            //Replace <%VerifyUrl%> placeholder with verifyUrl value
            e.Message.Body = e.Message.Body.Replace("<%VerifyUrl%>", verifyUrl);
        }
    }
} 
```

新帐户模板.htm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Steps to activate your account...</title>
</head>
<body style="font-family:Verdana;">

    <h2>
        Welcome to My Website!</h2>
    <p>
        Hello, <%UserName%>. You are receiving this email because you recently created a new account at my 
        site. Before you can login, however, you need to first visit the following link:</p>
    <p>
        <a href="<%VerifyUrl%>"><%VerifyUrl%></a></p>
    <p>
        After visiting the above link you can log into the site!</p>
    <p>
        If you have any problems verifying your account, please reply to this email to 
        get assistance.</p>
    <p>
        Thanks!</p>

</body>
</html> 
```

验证.aspx.cs：

```
namespace WebSite
{
    public partial class Verify : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //Make sure that a valid query string value was passed through
            if (string.IsNullOrEmpty(Request.QueryString["ID"]) || !Regex.IsMatch(Request.QueryString["ID"], "[0-9a-f]{8}\\-([0-9a-f]{4}\\-){3}[0-9a-f]{12}"))
            {
                InformationLabel.Text = "An invalid ID value was passed in through the querystring.";
            } else {
                //ID exists and is kosher, see if this user is already approved
                //Get the ID sent in the querystring
                Guid userId = new Guid(Request.QueryString["ID"]);

                //Get information about the user
                MembershipUser userInfo = Membership.GetUser(userId);
                if (userInfo == null) {
                    //Could not find user!
                    InformationLabel.Text = "The user account could not be found in the membership database.";
                } else {
                    //User is valid, approve them
                    userInfo.IsApproved = true;
                    Membership.UpdateUser(userInfo);

                    //Display a message
                    InformationLabel.Text = "Your account has been verified and you can now log into the site.";
                }
            }
        }
    }
} 
```

关于我的两件事是我假设没有导致它工作。

1.  它怎么知道发送 NewAccountTemplate.htm 消息？更新啊，我现在在 createuserwizard1 中看到了这种情况。仍然收到此错误消息。
2.  在 NewAccountTemplate.htm 上，我收到一条警告消息：

> 未找到警告“<% VerifyUrl %>”。

怎么了？我是否忽略了什么。

更新 2：

如果我添加 onsendingmail="CreateUserWizard1_SendingMail" 它会生成一个链接，但是该链接不起作用，因为用户从未被添加到我检查过的数据库中。因此，当我单击电子邮件上的链接时，它会显示错误请求 obv，因为没有具有此 ID 的用户。如果我删除该行代码，则创建用户但未生成链接：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:12:40.807

我终于让这个工作了。

1.  onsendingmail="CreateUserWizard1_SendingMail" 这应该在创建用户向导中。

    ```
    <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server" onsendingmail="CreateUserWizard1_SendingMail">
    <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" DisableCreatedUser="True">
        <WizardSteps>
            <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server" />
            <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server" />
        </WizardSteps>
        <MailDefinition BodyFileName="NewAccountTemplate.htm" From="example@example.com" IsBodyHtml="True"  Subject="Steps to activate your new account..." Priority="High" />
    </asp:CreateUserWizard> 
    ```

2.  在 NewAccountTemplate.htm 中仅使用 <%VerificationUrl%>

3.  将registration.aspx.cs更改为

    ```
    // Get the UserId of the just-added user
    MembershipUser newUser = Membership.GetUser(CreateUserWizard1.UserName);
    Guid newUserId = (Guid)newUser.ProviderUserKey;

    // Determine the full verification URL (i.e., http://yoursite.com/Verification.aspx?ID=...)
    string urlBase = Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath;
    string verifyUrl = "Verify.aspx?ID=" + newUserId.ToString();
    string fullUrl = urlBase + verifyUrl;

    // Replace <%VerificationUrl%> with the appropriate URL and querystring
    e.Message.Body = e.Message.Body.Replace("<%VerificationUrl%>", fullUrl); 
    ```

# java - 如何在Java中检查字符串的多个可能值

> ID：12333621
> 
> 赞同：0
> 
> 时间：2012-09-08T19:03:24.313
> 
> 标签：java, boolean

我想对一个名为的字符串的多个值执行相同的操作`contents`

```
if (contents == "chicken roll" , contents == toasted chicken){
      // do some common operation
    } 
```

什么是正确的 Java 语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:05:16.630

我认为你想要一个合乎逻辑的 or `||`：

```
if (contents.equals("chicken roll") || contents.equals("toasted chicken")){ 
```

请参阅[运营商列表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)。

另请注意，您使用该`equals`方法比较字符串相等性。

# android - 我可以在 Android 的不同布局中使用相同的 id 吗？

> ID：12333624
> 
> 赞同：99
> 
> 时间：2012-09-08T19:03:51.193
> 
> 标签：android, android-layout

我是 Android 开发的新手。对图像和`TextViews`不同的`Layout`XML 文件使用相同的 ID 是否可以？

当eclipse为我自动列出它们时，它会列出项目中的所有布局变量，所以它会发生冲突吗？到目前为止，我还没有注意到在不同布局中使用相同的 ID 有任何问题，但从长远来看，我很担心。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-09-08T19:16:53.070

简短的回答：是的，你可以。

长答案：您可以这样做，因为每当您使用 findViewById() 来获取对布局的一部分的引用时，该方法只会在当前膨胀的布局中查找该视图。因此，即使您在另一个布局中有另一个具有相同 ID 的视图，Android 也不会在那里寻找它。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-09-08T19:20:57.610

建议您为不同的布局使用不同的 id。从长远来看，当你有很多布局并因此有很多 id 时，区分它们会变得非常复杂。

我通常这样命名我的 id `layoutName_elementId`：.

它可以让我轻松找到我正在寻找的 id，尤其是在使用自动完成时（我知道我正在使用什么布局，但我并不真正知道 id；在这种情况下，根据我的命名策略，我只需输入布局名称，它就会显示该布局的所有 id）。

有关布局和 ID 的更多信息，请参见[此处](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)。

快乐编码，

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-07-07T15:45:58.320

根据开发人员 API 指南：

> ID 不必在整个树中是唯一的，但它应该在您正在搜索的树的一部分中是唯一的（这通常可能是整棵树，因此最好尽可能完全唯一）。

所以简短的回答是它不是强制性的，但它是避免可能发生的冲突的好习惯。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-04-18T17:36:25.763

不推荐，因为如果将来你需要重构`view` `id`，Android Studio 会在所有`XML`文件和类中重构它，你会遇到麻烦。

但是在某些情况下，您确实需要使用相同`id`的，例如，如果您有一些抽象并且您重用多个布局。

如果您的项目中有多个`views`相同`id's`的，并且您需要重构，请手动进行，不要使用 IDE 中的构建功能，更改布局`id`内的目标视图，`XML`然后修复布局内的红色错误。

**更新：**

目前 Android Studio 支持使用“仅在当前文件中重构”选项进行重构。

**更新：视图绑定**

如果您的嵌套布局（包括标签）的视图 id 与他的层次结构中的 id 冲突，则可能会出现强制转换异常。

# python - Python 列表正则表达式

> ID：12333628
> 
> 赞同：2
> 
> 时间：2012-09-08T19:04:59.203
> 
> 标签：python, regex, list

我有一个来自股票网络抓取工具的列表，如下所示： [......', 'xlnx>XLNX<', 'yhoo>YHOO<']

我怎样才能得到只有引号的字典？我知道这很简单，但我可以使用一些帮助。谢谢

```
import urllib
import re

base_url = 'http://www.nasdaq.com/markets/indices/nasdaq-100.aspx'
content = urllib.urlopen(base_url).read()
list = re.findall('http://www.nasdaq.com/symbol/(.*)/a>', content)
print list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:09:02.110

你有一个列表，而不是字典。此外，您不应该命名您的变量`list`，因为它是内置的名称。

```
>>> content
['xlnx>XLNX<', 'yhoo>YHOO<']
>>> tickers = []
>>> for s in content:
...     tickers.append(''.join(i for i in s if i.isupper()))
... 
>>> tickers
['XLNX', 'YHOO'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:17:31.947

您应该使用 HTML 解析器（我总是推荐[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)）来解析 HTML，而不是使用正则表达式：

```
import re, urllib2
from BeautifulSoup import BeautifulSoup

url = 'http://www.nasdaq.com/markets/indices/nasdaq-100.aspx'
soup = BeautifulSoup(urllib2.urlopen(url))

for link in soup.findAll('a', href=re.compile('/symbol/'))[1:]:
  print link.text 
```

**输出：**

```
ATVI
ADBE
AKAM
ALXN
ALTR
AMZN
AMGN
APOL
AAPL
AMAT
ADSK
ADP
AVGO
BIDU
BBBY
BIIB
BMC
BRCM
CHRW
CA
CELG
CERN
CHKP
CSCO
CTXS
CTSH
CMCSA
COST
DELL
XRAY
DTV
DLTR
EBAY
ERTS
EXPE
EXPD
ESRX
FFIV
FAST
FISV
FLEX
FOSL
GRMN
GILD
GOOG
GMCR
HSIC
INFY
INTC
INTU
ISRG
KLAC
KFT
LRCX
LINTA
LIFE
LLTC
MRVL
MAT
MXIM
MCHP
MU
MSFT
MNST
MYL
NTAP
NFLX
NUAN
NVDA
NWSA
ORLY
ORCL
PCAR
PAYX
PCLN
PRGO
QCOM
RIMM
ROST
SNDK
STX
SHLD
SIAL
SIRI
SPLS
SBUX
SRCL
SYMC
TXN
VRSN
VRTX
VIAB
VMED
VOD
WCRX
WFM
WYNN
XLNX
YHOO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:28:49.007

像这样的东西：

```
>>> lis=['xlnx>XLNX<', 'yhoo>YHOO<']
>>> [x[x.index('>')+1:x.index('<')] for x in lis]
['XLNX', 'YHOO'] 
```

# c# - 如何获取 wpf 组合框选定值（键）

> ID：12333630
> 
> 赞同：0
> 
> 时间：2012-09-08T19:05:03.413
> 
> 标签：c#, wpf

我想在这里找到 wpf 组合框的选定值是我的代码：

```
DataTable dt = new DataTable();
dt.Columns.Add("id", typeof(string));
dt.Columns.Add("name", typeof(string));
dt.Rows.Add("ks34dsd45g6g74g", "Amisha");
dt.Rows.Add("2ks34dsd45g6g74g", "Rhitik");
dt.Rows.Add("ks34dsd45g6g74g3", "Aishwarya");
dt.Rows.Add("4ks34ds545g6g74g", "Sonam");
dt.Rows.Add("ks55dsd45g6g74g5", "Aamana");

ddl_BusinessIDNames.DataContext = dt;
ddl_BusinessIDNames.DisplayMemberPath = dt.Columns[1].ToString();
ddl_BusinessIDNames.SelectedValuePath = dt.Columns[0].ToString(); 
```

这意味着在运行时组合框向用户显示可读文本，即 Amisha、Rhitik、Aishwarya 等，但我的问题是如果用户选择“sonam”如何获取“sonam”的密钥，即“4ks34ds545g6g74g”，因为`Convert.ToString(ddl_BusinessIDNames.SelectedValue)`此代码获取显示文本组合框，但是如果我想获取值键“sonam”怎么办

请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:08:48.977

使用[`SelectedValue`属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:42:26.873

```
private void ComboBox_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
{
    label1.Content = dt.Rows[Combobox1.SelectedIndex][0];
} 
```

`Combobox1.SelectedIndex`- 代表数据表的选定行索引

`0`- 数据表中具有 id 的列索引，U 想要获取。

# javascript - 在页面启动期间加载图像

> ID：12333634
> 
> 赞同：0
> 
> 时间：2012-09-08T19:06:02.013
> 
> 标签：javascript

我目前正在使用单选按钮和复选框来根据值显示图像。我注意到图像在开始时加载缓慢。例如，已经使用“display:none”（已经设置了它们的 src 属性）预先创建了图像元素，所以我唯一要做的就是使用 display 属性。是否可以预加载图像？[例子](http://webprolearner2346.zxq.net/bike_calculator/)

**JS**

```
<script>
function check_value(currentElement, val, id, type) {
    var el = document.getElementById("imgBox" + id);
    if (val > 0 && val < 4) { //will trigger when [1,2,3]

        if(currentElement.checked)
        {
            el.src = "images/" + type + val + ".jpg";
            el.style.display = "";
        }
        else
        {
            el.src = "";
            el.style.display = "none";
        }       

    }
}    
</script> 
```

**HTML**

```
<h2>Choose a bike</h2>
<form name="builder">
    <input type="radio" name="field" onclick='check_value(this, 1, 1, "bike")'/> KAWASAKI KX 450F<br />
    <input type="radio" name="field" onclick='check_value(this, 2, 1, "bike")'/> 2010 Yamaha Road Star S<br />
    <input type="radio" name="field" onclick='check_value(this, 3, 1, "bike")'/> Aprilia RSV4<br />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:10:03.803

是的！如果你有 JQuery，预加载图像真的很容易：

```
$.fn.preload = function() {
    this.each(function(){
        $('<img/>')[0].src = this;
    });
}

$(['some-image.gif']).preload(); 
```

还要检查这个资源： http: [//perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:34:42.763

这是我前段时间为自己制作的一个功能：http: [//pastebin.com/GeBawE8r](http://pastebin.com/GeBawE8r)

您可以按如下方式使用它：

```
var loader = new imagePreloader();

// Object containing the names of the imgs as keys and url as values
loader.list = {name: "url"...};

// function to call when done loading everything
loader.onload = ... 

// function to call at each time it loades a single image of the list
loader.each = ... 

// function to call when unable to load one of the images 
loader.onerror = ... 

// set this to true to continue even if some of the images fail to load 
loader.ignoreErrors = true/false

// Starts loading the images
loader.load(); 
```

加载完成后，该属性`ready`将设置为 true，您可以访问`list`对象中的图像。

```
if(loader.ready)
    alert(loader.list.myImageName); // Image object 
```

[http://jsfiddle.net/uttZw/1](http://jsfiddle.net/uttZw/1)

# mysql - mongodb - 寻找类似于 mysql 的“id in(1,2,3,4)”的选择查询

> ID：12333635
> 
> 赞同：1
> 
> 时间：2012-09-08T19:06:21.810
> 
> 标签：mysql, mongodb, search

我对 mysql 使用的最常见的查询之一是：

```
select * from database where id in(1,5,3,2,4) order by field(id,1,5,3,2,4) 
```

在我使用 MongoDB 的新项目中，我可以使用类似的查询吗？我们使用单独的搜索引擎进行实际搜索，并按特定顺序返回 ID 列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:24:38.017

等效的 MongoDB 查询将是：

```
db.collection.find({id: $in: [1,2,3,4,5]}).sort({id: 1}) 
```

但是，如果您想自定义`id`超出纯升序的顺序，则必须使用聚合框架。

# c - 现代处理器上数学函数需要多少周期

> ID：12333638
> 
> 赞同：4
> 
> 时间：2012-09-08T19:06:46.097
> 
> 标签：c, math, gcc, assembly, x86-64

我们知道，现代处理器在处理器上直接执行指令，`cosine`因为`sin`它们有操作码。我的问题是这些指令通常需要多少周期。它们需要恒定时间还是取决于输入参数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T19:50:49.517

时间因处理器型号而异。时间通常从几十个 CPU 周期到一百个或更多。

（许多指令消耗的时间因环境而异，因为指令使用处理器中的各种资源[调度程序、执行单元、重命名寄存器等]，因此一条指令延迟其他工作多长时间取决于其他工作在处理器中。例如，如果某些代码几乎完全执行加载和存储指令，那么非常偶然的正弦指令可能根本不会减慢它的执行速度。但是，占用数十个 CPU 周期的指令通常受它们在执行单元，这是进行实际数值计算的部分。）

执行时间可能因输入参数而异。三角函数的大参数必须以 2π 为模减少，这本身就是一个复杂的问题。

在 Mac OS X 数学库中，我们通常使用汇编语言编写自己的实现，原因可能包括速度、符合标准、适用于应用程序二进制接口和其他特性。

如果您只是好奇，那么“数十到数百个处理器周期”可能是一个足够好的答案，尤其是在没有指定特定处理器型号的情况下。本质上，时间足够长，您不应该在没有充分理由的情况下使用这些操作。（例如，我已经看到获得 π 为 4·arctan(1) 的代码。不要那样做。）

如果您有其他询问的原因，您应该解释，以便答案可以集中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-08T23:39:50.213

很久以前，谈论现代处理器的“指令周期”变得很困难。如今的处理器包含多个执行核心，它们的操作可以重叠并且可以乱序执行。

英特尔处理器手册第 4 卷附录 C 中给出了基本考虑的一个很好的示例。它通过延迟和吞吐量分解了指令时序。延迟是执行内核完成微操作所需的周期数。吞吐量是执行单元再次接受同一指令所需的周期数。吞吐量通常*低于*延迟，包括在表中具有小数值。具有多个相同类型的执行单元的副作用。类型很重要，它告诉您指令是否可以重叠。

也许您在这里得到了基本信息：这在很大程度上取决于您对计时感兴趣的代码周围的*其他指令。*那些其他指令很可能与昂贵的指令同时执行。在这一点上，它们实际上需要 0 个周期。或者他们可能不会，因为执行单元正忙于前一条指令而停止流水线。编写代码优化器的程序员非常关心的那种细节。

手册中的一些示例数据，在表格​​中选择了最现代的核心：

*   FMUL，延迟 = 7，吞吐量 = 2，FP_MUL 执行单元
*   FDIV，延迟 = 6，吞吐量 = 5，未指定单位
*   FSQRT，延迟 = 38，吞吐量 = 43，FP_DIV 执行单元
*   FSIN，延迟 = 160-180，吞吐量 = 130，未指定单位

SIMD 指令的效果要好得多。

The only meaningful thing to do is *measure*, not assume.

# php - Codeigniter“新闻部分”教程问题

> ID：12333641
> 
> 赞同：1
> 
> 时间：2012-09-08T19:07:01.767
> 
> 标签：php, codeigniter

我的 URI 有问题。我试图浏览帖子，但看不到答案。

教程可以在这里找到： [http ://codeigniter.com/user_guide/tutorial/news_section.html](http://codeigniter.com/user_guide/tutorial/news_section.html)

基本上我复制了所有内容并且效果很好，但是有人认为我不知道是我的浏览器还是我错过了配置的东西。

在“views/news/index.php”中，按照教程，我有以下代码：

```
<h2><? echo $news_item['title'] ?></h2>
<div id="main">
    <? echo $news_item['text']?>
</div>
<p>[b]<a href="news/<? echo $news_item['slug']?>">View Article</a>[/b]</p> 
```

现在的问题是，当我在浏览器上查看源 html 时，我看到的链接如下：

查看文章

我认为这是正确的。但是当我点击时，它指向我：

本地主机/CI/index.php/news/news/firstnews

如您所见，“新闻”在 URI 中重复了两次。看起来浏览器只是将 href 值附加到打开的 URI 上，而不是将其清理到 index.php 并添加到那里。

我试图从 href 值中删除“新闻”位，它工作正常。

如果这有什么不同，我正在使用 Chome。

那是我的错吗？或者这只是教程中的一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:23:24.440

伊戈尔，我认为，这是一个教程的错误，你需要在 href 属性中添加 / 。例如

```
<a href="/news/<? echo $news_item['slug']?>">View Article</a> 
```

此外，您应该使用 URL Helper - [http://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

Ps 有可能你没有调整 .htaccess 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:35:30.360

为了避免这种错误，我`base_url()`在写链接时经常使用。像这样：

```
<?php echo anchor(base_url('news/'.$news_item['slug']),View article); ?> 
```

请注意，我使用了[URL 助手](http://codeigniter.com/user_guide/helpers/url_helper.html)`anchor()`的&`base_url()`函数。更多信息在：

[http://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T10:31:15.443

This is a mistake in the CI tutorial.

* * *

First of all it's recommended to use the `site_url()` function to help generate the news slug URL.

You do this by adding `$this->load->helper('url');` to the `__construct()` of your News controller in **controllers/news.php**

Then change your link URL in your **views/news/index.php** to `<?php echo site_url('news/' . $news_item['slug']); ?>`

* * *

The most crucial mistake is that throughout your current files you're populating `$data['news']` while the rest of your functions are looking at `$data[‘news_item’]`

You should change these (two) variables in **views/news/view.php** and the (three) variables in the `view()` function in **controller/news.php**

After reloading the page, that should do it! For the full discussion on the CI forums check the following link: [http://ellislab.com/forums/viewthread/209349/](http://ellislab.com/forums/viewthread/209349/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T07:38:22.637

顺便说一句，我发现这个 git repo [github.com/Crias/tutorial-codeigniter-news](https://github.com/Crias/tutorial-codeigniter-news)包含默认 codeigniter 教程的源代码。

现在，您无需再次键入（或复制粘贴）它即可使教程正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T13:07:36.820

对我来说我改变了

```
 $data['news'] = $this->news_model->get_news($slug); 
```

至：

```
 $data['news_item'] = $this->news_model->get_news($slug); 
```

现在效果很好

# vba - 作为程序的回归

> ID：12333642
> 
> 赞同：0
> 
> 时间：2012-09-08T19:07:04.627
> 
> 标签：vba, linear-regression

我所拥有的是excel A列中给出的1000多个数字数据。我必须取50（A1：A50）和另外50个数据（A51：A100），将它们粘贴到B和C列并从最低到最高排序. 之后，我必须对它们进行线性回归并找到 Rsquare 和回归公式。在找到 r 平方和公式后，我必须将它们保存在某个地方以进行下一步，该步骤是相同的​​，但这次是 A2:A51 和 A52:A101。

我必须循环执行此操作并存储结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:35:16.780

这会让你继续前进。

```
Public Sub RegressionAnalysis()
    Dim sample_count As Integer
    sample_count = 50

    Dim r As Range
    Set r = Range("A2") ' First row of data
    Dim i As Integer, N As Integer, j As Integer
    N = Range(r, r.End(xlDown)).Rows.Count ' Count rows

    Dim rx As Range, ry As Range
    i = 0: j = 0 ' data counter, output counter
    Dim slope As Double, yint As Double
    Do While i + 2 * sample_count < N
        ' Current block of data
        Set rx = r.Offset(i, 0).Resize(sample_count, 1)
        ' Next block of data
        Set ry = rx.Offset(sample_count, 0).Resize(sample_count, 1)
        ' Use built-in function for regression slope & intercept
        slope = WorksheetFunction.slope(rx, ry)
        yint = WorksheetFunction.Intercept(rx, ry)
        ' Output values to adjacent columns
        r.Offset(j, 1).Value = slope
        r.Offset(j, 2).Value = yint
        ' Increment the counters
        i = i + sample_count
        j = j + 1
    Loop
End Sub 
```

结果：

![Excel 输出](../Images/c54e111aa8baeab8739da8de344cbe2f.png)

# ios - 无法在 iPhone 模拟器或设备上运行应用程序

> ID：12333644
> 
> 赞同：0
> 
> 时间：2012-09-08T19:07:10.837
> 
> 标签：ios, xcode4

我昨天向 App Store 提交了我的应用程序；一切正常运行。今天早上，我升级了Java，（不确定这与问题有什么关系，只是想我会提到它）。现在，我无法在任何模拟器或 iPhone 上的 XCode 4 中运行我的应用程序！

这是我得到的错误：

![在此处输入图像描述](../Images/235ec01d664fd5e1d64ddda7c0c12d41.png)

我已经查看了处理此问题的所有 Google 和 SO 问题；大多数都与OS x有关。这只发生在 iOS 上。我的 iPhone 是 iOS 5.1，模拟器也是。我将目标操作系统的所有设置都设置为 5.0。我正在运行 XCode 4.4.1。我尝试了一个不同的应用程序，它可以运行，没有问题。

有人有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:02:39.213

我制作了一个新应用程序，其中只有基本文件（main.m、info.plist 和 Prefix.pch）。然后我从无法运行的应用程序中复制了现有文件（上面的 3 个文件除外），现在它运行得很好。

# javascript - 带大括号和不带大括号的调用函数之间的区别

> ID：12333649
> 
> 赞同：0
> 
> 时间：2012-09-08T19:07:26.800
> 
> 标签：javascript

我想知道FunctionOne 的定义`new FunctionOne`和定义之间是否有任何区别`new FunctionOne()`

```
 function FunctionOne(){
   /// this function has no arguments
   ///some code 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:09:12.150

使用运算符时除了传递参数没有区别`()`。除此之外，两者都可以用来产生相同的效果。例如。

```
( new Date() ).getTime(); 
```

是相同的

```
( new Date ).getTime(); 
```

# database - 数据库设计，避免 HTML 表单上的冗余数据

> ID：12333650
> 
> 赞同：0
> 
> 时间：2012-09-08T19:07:35.447
> 
> 标签：database, forms, database-design

我正在尝试为我正在从事的一个新项目提出一个干净的数据库设计。我需要存储在数据库中的数据项之一将来自 HTML 表单：

```
Q1: "Anticoagulated patient?" [YES, NO]

JavaScript;
(If yes is selected, an additional question is displayed):

Q2: "Type of Anticoagulant" [Warfari, Coumarin, Clopidogrel] 
```

我的问题是，是否有必要将第一个问题的响应存储在数据库中？对我来说，数据似乎是多余的。如果指定了类型，则可以假定患者已“抗凝”。

提交表单后，稍后将访问表单，以便可以修改数据，并且界面需要反映数据库的状态。我应该仍然能够做到这一点而无需记录第一个问题：

```
JavaScript;(If Q2 has a value, then the default option should be set to Yes 
otherwise it should be set to No)

Q1: "Anticoagulated patient?" [Yes, No]

JavaScript;(Only display if Q1 is set to Yes):

Q2: "Type of Anticoagulant" [Warfari, Coumarin, Clopidogrel] 
```

您对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:15:33.343

正如您所建议的，我认为这两个问题确实应该在客户端处理。这将提供更好的用户体验。

至于数据库，不要使用两个字段，一个绰绰有余。请注意，即使您没有动态显示第二个问题，您仍然可以将答案存储在其他地方（例如 Web 服务器会话）而不是后端数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:16:00.957

我想说存储对问题 1 的响应所需的额外空间将远远超过将 Q2 标记为暗示 Q1 所涉及的额外逻辑量。把事情简单化！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:18:55.877

我认为，您对此做出了正确的决定，但只需考虑未来和扩展应用程序逻辑，也许您需要稍后添加另一个问题，然后您将不得不将问题存储在数据库中，简而言之，对于目前的情况，它就足够了存储答案。

# javascript - 我们可以使用任意编程语言来动态化 HTML 页面吗？

> ID：12333655
> 
> 赞同：-1
> 
> 时间：2012-09-08T19:08:26.123
> 
> 标签：javascript, web

我只在 HTML 页面上使用过**javascript**（dom 操作、AJAX 调用，你知道我的意思），我**怀疑**大多数 Web 开发人员也是如此。

但是，我们**需要**使用 javascript 吗？我想我也记得看到过以这种方式使用的 VBScript。这是用于编写 HTML 脚本的两种可能的语言。

但是我应该怎么做才能使用**任何脚本语言**来做我们通常用 javascript 做的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:17:51.340

还有[Amber](https://github.com/NicolasPetton/amber)，另一个基于 js 的 Smalltalk 实现，包括客户端和服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:12:33.520

嗯，有[CoffeeScript](http://coffeescript.org/)。还有 Google [Dart](http://www.dartlang.org/)，但显然它仅受 Google Chrome 支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:14:07.283

你应该更具体地了解你真正想要的东西。

如果您的意思是“在浏览器中自托管”，那么无论您写什么都需要：

*   由浏览器本机支持（例如，JavaScript 和其他跨浏览器），或
*   在 JavaScript 中自托管（例如，[Clamato](http://clamato.net/)，一种自托管的 Smalltalk 方言）

如果您不是指“自托管”，那么任何可以转换为 JavaScript 的东西，例如：

*   [咖啡脚本](http://coffeescript.org/)
*   [ClojureScript](https://github.com/clojure/clojurescript#readme)

回答你的最后一个问题：要么为所有浏览器编写插件，要么修改，以支持你想要的任何语言（祝你好运），或者编写一个自托管的语言转换器。

# android - 使用 GCM 时应用程序意外停止

> ID：12333662
> 
> 赞同：0
> 
> 时间：2012-09-08T19:09:07.040
> 
> 标签：android

运行项目时出现错误，我稍后发送了有关此问题的信息，但我支持 Image。这个错误我在互联网上搜索了更多，但我找不到任何解决这个问题的方法。我希望如果有人帮助我。

我测试了所有代码，发现错误在这里：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_elaraby_group);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);

        if (regId.equals("")) {
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            Log.v(TAG, "Already registered");
        }
    } 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.elarabygroup"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ElarabyGroup"
            android:label="@string/title_activity_elaraby_group" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    <category android:name=".ElarabyGroup" />
  </intent-filter>
</receiver>
<service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

![错误日志猫](../Images/bfe2304f6e7ef42c7f102801429ab9f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:10:34.763

您正尝试在没有 Google 服务框架的设备或模拟器上运行您的应用。如果您使用模拟器进行测试，请务必使用其中包含 Google API 的模拟器图像。

# objective-c - 旋转后重新组织视图中元素的最佳方法是什么？

> ID：12333663
> 
> 赞同：3
> 
> 时间：2012-09-08T19:09:09.413
> 
> 标签：objective-c, ios

我有一个子视图（除了其他标准的 Cocoa Touch 控件）里面有 6 个按钮和标签。

![在此处输入图像描述](../Images/8a801f0e58a8c28be123aec3b1ba4b6d.png)

我正在使用这个凌乱的代码在旋转事件上旋转和调整这些按钮和标签的大小。

```
- (void) updateLayoutForNewOrientation: (UIInterfaceOrientation) orientation {
    if (UIInterfaceOrientationIsPortrait(orientation)) {
        button1.frame = CGRectMake(20, 59, 130, 80);
        button2.frame = CGRectMake(170, 59, 130, 80);
        button3.frame = CGRectMake(20, 176, 130, 80);
        button4.frame = CGRectMake(170, 176, 130, 80);
        button5.frame = CGRectMake(20, 293, 130, 80);
        button6.frame = CGRectMake(170, 293, 130, 80);

        label1.frame  = CGRectMake(20, 147, 130, 21);
        label2.frame  = CGRectMake(170, 147, 130, 21);
        label3.frame  = CGRectMake(20, 264, 130, 21);
        label4.frame  = CGRectMake(170, 264, 130, 21);
        label5.frame  = CGRectMake(20, 381, 130, 21);
        label6.frame  = CGRectMake(170, 381, 130, 21);
    } else {
        button1.frame = CGRectMake(20, 59, 130, 60);
        button2.frame = CGRectMake(20, 155, 130, 60);
        button3.frame = CGRectMake(177, 59, 130, 60);
        button4.frame = CGRectMake(177, 155, 130, 60);
        button5.frame = CGRectMake(328, 59, 130, 60);
        button6.frame = CGRectMake(328, 155, 130, 60);

        label1.frame  = CGRectMake(20, 127, 130, 21);
        label2.frame  = CGRectMake(20, 223, 130, 21);
        label3.frame  = CGRectMake(177, 127, 130, 21);
        label4.frame  = CGRectMake(177, 223, 130, 21);
        label5.frame  = CGRectMake(328, 127, 130, 21);
        label6.frame  = CGRectMake(328, 223, 130, 21);
    }
} 
```

这有点乱，**但工作正常，我可以精确控制视图中的元素位置**。

![在此处输入图像描述](../Images/57cc79365d9dc0e3924a46d42c7421c8.png)

顺便说一句**，我想知道是否有两个不同的视图并在旋转时翻转它们在**“cpu 功率”和内存消耗方面是否更有效（我认为有一个视图而不是两个视图对内存更好，但我可能是错的，我对ios编程很陌生）。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:31:14.820

You ask:

> By the way I'm wondering if having two different views and flipping them on rotation is more efficient regarding "cpu power" and memory consumption ...

I believe that the opposite is true. It's far more efficient to have a single view for which you simply invoke your method from `viewWillLayoutSubviews` (in iOS 5, in iOS 4 I generally use `willAnimateRotationToInterfaceOrientation`). The efficiency gain is modest, but if efficiency is your goal, I think a single view is the way to go. You might want to use the separate views if they're radically different and thus your code would become hard to manage with a single view, but otherwise I stick with one view. Personally, I also think it's a stronger user interface to have the controls animate into place as you rotate the device.

Personally, when I have content that reorganizes on orientation changes like this, I try to refrain from using hard coded coordinates, but rather use the dimensions of the view to algorithmically determine the the layout of my controls (e.g. how many per row) and from there, determine their coordinates. This way, it takes care of not only landscape versus portrait, but also makes Universal apps (especially if there's ever other devices with different screen sizes in the future) easier, too. I think we can also look forward to iOS 6 also offering some nice enhancements to laying out controls (though it will be a while before we will feel comfortable developing apps that require iOS 6).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T19:29:52.910

现在我正在处理你写的类似代码。这个项目很大，很难遵循什么地方去修改。它是为 iOS 3 编写的，现在客户端需要进行一些修改。如果 iOS 不会更改 pushModal 并且会在 iOS6 中被弃用，那么问题就不会那么大了……在我的情况下，需要重写 GUI 框架，并且我有 Portait / Landscape 要求。如果您愿意，请查看几个链接：[question1](https://stackoverflow.com/questions/12286998/uiviewcontroller-do-not-rotate-to-landscape) [question2](https://stackoverflow.com/questions/12266909/uiviewcontroller-visible-callback) [question3](https://stackoverflow.com/questions/12159380/which-array-is-deallocated) [question4](https://stackoverflow.com/questions/11832981/dismissviewcontrolleranimated-crash-at-ios5)

对于不可见的 iOS 更改，很难概述该代码，尤其是在 2 年后。我不会重复以前工作过的程序员错误。

在您的情况下，我会从不同的解决方案中进行选择（但这肯定不是）：

解决方案 1：为横向和纵向创建不同的 xib。具有模块化的优点：以后如果由于各种原因不需要 Landscape，很容易从代码中取消链接。具有创建新视图的缺点（它可以被缓存）但仍然是不同的对象并且需要模型-View2-控制器之间的数据同步。

解决方案2：仅使用 1 个 xib 文件并通过在尺寸检查器（第 5 个选项卡）设置它们的属性来自动布局组件。非常难配置

解决方案 3：在该 xib 文件中创建组件横向并布局这些组件以匹配预期的设计、大小，并在运行时读取它们的大小并设置它，就像现在这样，但可以可视化编辑。

Storyboard 或 xib，对我来说几乎一样，可以有 2 个 UIViewController 并弹出/推送 Portait/Landscape 以不使用旋转填充堆栈:)

如果您根本不旋转，速度 ofc 是最好的，但如果您仍然想要，也许 1 xib 中的 2 个组件，因为不需要更改可见性 2-4 次，这将触发很多 od 函数调用： viewwillappear、wiewdidapear、viewwilldisapers 等等。

# objective-c - 设置一个临时计时器 iOS

> ID：12333665
> 
> 赞同：-2
> 
> 时间：2012-09-08T19:09:15.807
> 
> 标签：objective-c, ios, cocoa-touch, methods, timer

> **可能重复：**
> [如何定期调用目标 c 中的方法？](https://stackoverflow.com/questions/8620109/how-to-make-a-periodic-call-to-a-method-in-objective-c)

我正在制作一个应用程序，当用户触摸屏幕时，会调用以下方法：

```
- (void)explode:(int)x 
```

用户只需触摸屏幕一次，但我希望该方法每 0.1 秒重复调用 100 次，然后它应该停止调用。

有没有办法在传递整数的方法上设置这样的“临时”计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:49:09.173

You could pass a counter and the 'x' as into the timer's userInfo. Try this:

Create the timer in the method that's catching the touch event and pass a counter and the int 'x' into the userInfo:

```
NSMutableDictionary *userInfo = [[NSMutableDictionary alloc] initWithCapacity:2];
[userInfo setValue:[NSNumber numberWithInt:x] forKey:@"x"];
[userInfo setValue:[NSNumber numberWithInt:0] forKey:@"counter"];

[NSTimer timerWithTimeInterval:0.1
                        target:self
                      selector:@selector(timerMethod:)
                      userInfo:userInfo
                       repeats:YES]; 
```

Create the timer method, check the userInfo's number count, and invalidate the timer after 100 times:

```
- (void)timerMethod:(NSTimer *)timer
{
    NSMutableDictionary *userInfo = timer.UserInfo;
    int x = [[userInfo valueForKey:@"x"] intValue];

    // your code here

    int counter = [[userInfo valueForKey:@"counter"] intValue];
    counter++;

    if (counter >= 100)
    {
        [timer invalidate];
    }
    else
    {
        [userInfo setValue:[NSNumber numberWithInt:x] forKey:@"x"];
        [userInfo setValue:[NSNumber numberWithInt:counter] forKey:@"counter"];
    }

} 
```

Please also see the Apple docs on `NSTimer`:

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

# javascript - 流星中的全局变量范围？

> ID：12333670
> 
> 赞同：2
> 
> 时间：2012-09-08T19:10:28.087
> 
> 标签：javascript, meteor

这听起来可能很基础，但我刚刚开始玩流星。我看到了如何无缝访问服务器和客户端上的实体（集合）等数据库，并自动同步它。

但是，我还没有看到如何跨服务器和所有客户端 snyc 一个简单的变量。类似于全局变量的东西。我不需要花哨的 mongo 集合，只需要一个简单的变量。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:49:13.147

您可以使用[Meteor.methods](http://docs.meteor.com/#meteor_methods)在服务器中获取和设置变量。但我认为没有办法像更改集合那样将更改推送到其他客户端。

所以你必须注意一切都保持同步。您真的应该为此使用集合或从现有集合中获取信息。

例如，连接的用户可以在其收集项中设置一个标志，然后反应性魔法将完成其余的工作；）

```
Users.find({connected:true}).count(); 
```

# git - 将存储库添加到 git 树

> ID：12333674
> 
> 赞同：1
> 
> 时间：2012-09-08T19:11:07.290
> 
> 标签：git, git-submodules

我有一个在线 git 存储库，我和许多人一样使用它来跟踪我的程序。从我的目录树的根目录开始，它可以正常工作：

```
git add . 
git commit
git push origin master 
```

有一天我发现我的树中的一个子目录变成了绿色（在 git 站点上）并且无法访问。现在我知道绿色用于子模块（即使我不明白这是什么意思），但我希望它是一个真正的目录，我可以在其中查看和下载那里的内容或检查修改。问题是，我怎样才能让这个目录再次变得正常，它的所有子目录和文件都在里面而不触及树内的其他目录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:41:45.303

这个想法是：

*   克隆你的仓库
*   `git submodule update --init --recursive`：请参阅“[如何在遥控器中初始化/更新 git 子模块？](https://stackoverflow.com/questions/8271839/how-can-i-init-update-git-submodules-in-a-remote) ”
*   从子模块中删除并再次添加您的文件：请参阅“ [un-submodule a git submodule](https://stackoverflow.com/questions/1759587/un-submodule-a-git-submodule) ”

最后一个链接向您展示了如何取消引用子模块，同时，如果您愿意，可以保留在所述子模块中完成的提交的历史记录（但将它们合并回主仓库）

现在，如果在尝试初始化子模块时，您会收到以下消息：

```
No submodule mapping found in .gitmodules for path '...' 
```

[检查“ Git - 如何跟踪未跟踪的内容？](https://stackoverflow.com/a/4162672/6309) ”的第二部分：“**将其替换为纯内容**”部分。

根本原因是当您尝试在主 git repo 工作树中添加一个本身就是 git repo 的目录时：

> 目录 ' `nested repo`' 一开始是一个独立的 Git 存储库。
> 通常这样的子存储库会被忽略，但是**如果你告诉 git add 显式添加它，那么它将创建一个指向子存储库的 HEAD 提交的 gitlink 条目，而不是添加目录的内容**。
> 如果 git add 拒绝创建这样的“半子模块”可能会很好。

# xamarin.ios - 从 iPod 库中复制项目

> ID：12333680
> 
> 赞同：0
> 
> 时间：2012-09-08T19:12:45.480
> 
> 标签：xamarin.ios, mpmediaitemcollection

我正在尝试将一个项目从 iPod 库复制到我的本地存储空间 - 以供以后播放。我有项目 URl，但它是 (ipod-library://item/item.mp3?id=2398084975506389321) 知道如何访问实际文件吗？

谢谢，瑞克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:10:51.557

这将工作[https://gist.github.com/3304992](https://gist.github.com/3304992)

```
-(void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection{
    NSString *tempPath = NSTemporaryDirectory();
    int i=1;
    for (MPMediaItem *theItem in mediaItemCollection.items) {
        NSURL *url = [theItem valueForProperty:MPMediaItemPropertyAssetURL];
        AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:url options:nil];
        AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset: songAsset presetName: AVAssetExportPresetPassthrough];
        exporter.outputFileType = @"com.apple.coreaudio-format";
        NSString *fname = [[NSString stringWithFormat:@"%d",i] stringByAppendingString:@".caf"];
        ++i;
        NSString *exportFile = [tempPath stringByAppendingPathComponent: fname];
        exporter.outputURL = [NSURL fileURLWithPath:exportFile];
        [exporter exportAsynchronouslyWithCompletionHandler:^{
            //Code for completion Handler
        }];
    }
    [picker dismissViewControllerAnimated:YES completion:Nil];
} 
```

使用 MPMediaPickerController 选择媒体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:17:44.167

这就是我在 Objective-C 中的做法：

```
#import <CoreMedia/CoreMedia.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudio.h>

// or [NSURL URLWithString:@"ipod-library://item/item.mp3?id=2398084975506389321"]
NSURL *assetURL = [item valueForProperty:MPMediaItemPropertyAssetURL];
NSMutableData *data = [[NSMutableData alloc] init];

const uint32_t sampleRate = 16000;
const uint16_t bitDepth = 16;
const uint16_t channels = 2;

NSDictionary *opts = [NSDictionary dictionary];
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:assetURL options:opts];
AVAssetReader *reader = [[AVAssetReader alloc] initWithAsset:asset error:NULL];
NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,
    [NSNumber numberWithFloat:(float)sampleRate], AVSampleRateKey,
    [NSNumber numberWithInt:bitDepth], AVLinearPCMBitDepthKey,
    [NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
    [NSNumber numberWithBool:NO], AVLinearPCMIsFloatKey,
    [NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey,
    nil];

AVAssetReaderTrackOutput *output = [[AVAssetReaderTrackOutput alloc] initWithTrack:[[asset tracks] objectAtIndex:0] outputSettings:settings];
[asset release];
[reader addOutput:output];
[reader startReading];

// read the samples from the asset and append them subsequently
while ([reader status] != AVAssetReaderStatusCompleted) {
    CMSampleBufferRef buffer = [output copyNextSampleBuffer];
    if (buffer == NULL) continue;

    CMBlockBufferRef blockBuffer = CMSampleBufferGetDataBuffer(buffer);
    size_t size = CMBlockBufferGetDataLength(blockBuffer);
    uint8_t *outBytes = malloc(size);
    CMBlockBufferCopyDataBytes(blockBuffer, 0, size, outBytes);
    CMSampleBufferInvalidate(buffer);
    CFRelease(buffer);
    [data appendBytes:outBytes length:size];
    free(outBytes);
}
[output release]; 
```

这里`data`将包含曲目的原始 PCM 数据。请注意，您不能直接访问歌曲或视频的文件，只能通过此方法访问其数据。您可以使用例如 FLAC 来压缩它（[这就是我在我的调整中处理它的方式](https://github.com/H2CO3/PodMail/blob/master/PMViewController.m)）。

由于 MonoTouch 与 Objective-C 的类和方法名称有 1:1 的映射关系，所以这应该很容易复制。:)

# html - 使页面固定不流动

> ID：12333681
> 
> 赞同：0
> 
> 时间：2012-09-08T19:12:56.410
> 
> 标签：html, css

我正在尝试使此页面固定而不是流动的。当我调整浏览器的大小时，我不想移动任何东西。现在，当我调整浏览器大小时，文本会折叠。我不确定我做错了什么。请帮忙！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Happy Tails</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<style type="text/css">

/* body and wrapper */
* {
margin: 0px 0px;
padding: 0px 0px;
}

body {
background-color: #C15D63;
}

#outer {

}

#container {
width: 50%;
//background-color: #C15D63;
}

/* header */

/* navigation */

/* main content section */
#dog, #cat, #other {
float:left;
width: 750px; 
height: 204px;
margin-left: 50%;
background-color: #E198B2;
padding: 1em;
}

/* dog content */
#dog_float {
position: absolute;
top: 15px;
right: 300px;
//bottom: 30px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#dog_inner {

}

#dog h1 {
position: absolute;
top: 15px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#dog_inner p.description {
position: absolute;
top: 34px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#dog p {
position: absolute;
top: 60px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* cat content */
#cat_float {
position: absolute;
top: 250px;
//right: 30px;
//bottom: 30px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#cat_inner {

}

#cat h1 {
position: absolute;
top: 250px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#cat_inner p.description {
position: absolute;
top: 269px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#cat p {
position: absolute;
top: 295px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* other content */
#other_float {
position: absolute;
top: 485px;
//right: 30px;
//bottom: 30px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#other_inner {

}

#other h1 {
position: absolute;
top: 485px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#other_inner p.description {
position: absolute;
top: 504px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#other p {
position: absolute;
top: 530px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* footer */
#footer {
clear: both;
border: 3px outset;
background-color: #62587C;
height: 60px;
width: 776px;
margin-left: 50%;
}

#footer_main {
float: left;
margin-left: 10px;
}

#footer_inner {
font-family: "Times New Roman", Times, serif;
font-size: 14px;
letter-spacing: 1.5px;
}

.footer_location {
float: left;
font-size: .85em;
text-align: left;
padding: 14px 55px 15px 60px;
}

.footer_social {
float: left;
font-size: .85em;
padding: 18px 5px 0px 35px;
}

#footer img {
padding: 0px 5px 0px 0px;
}

.footer_contact {
float: right;
font-size: .85em;
text-align: right;
padding: 14px 60px 15px 55px;
}

#footer a:link {
color: black;
}

#footer a:hoover {
color: black;
}

</style>
</head>

<body>
<div id="outer">
<div id="container">

    <div id="dog">

    <div id="dog_float">
    <img src="beanie.png" alt="Beanie, 10yrs" />
    </div><!--end div dog_float-->

    <div id="dog_inner">
    <h1>Beanie Baby</h1>
    <p class="description">Yorkshire Terrier, Female, 10 years, 5 lbs.</p><!--end p description-->

    <p>
    Beanie Baby was brought into our rescue from Lancaster, PA where she and her two siblings were born to a breeder. When she was born she was the size of an actual beanie baby, hence the name! She was adopted in 2008 to a family of three who loved and cared for her. With some good TLC, Beanie became an outgoing pup who loved everyone and every other animal, but she was a total momma's girl! She loved to snuggle under the blankets and was always there to greet you after a long day at work. Beanie passed away in 2011.
    </p>    
    </div><!--end div dog_inner-->
    </div><!--end div dog-->

    <div id="cat_float">
    <img src="tink.png" alt="Tinkerbell, 18yrs" />
    </div><!--end div cat_float-->

    <div id="cat">

    <div id="cat_inner">
    <h1>Tinkerbell</h1>
    <p class="description">Tabby Short Hair, Male, 18 years, 12 lbs.</p><!--end p description-->
    <p>
    Tinkerbell first came into our rescue 18 years ago. He loved to spend his days outside soaking up the sun and the nights inside sleeping an the foot of someone's bed. Every time Tinkerbell heard a can opener, he came running assuming that he was going to get a helping of tuna. He was a cat that enjoyed his personal space, but had a daily routine to come visit someone for a good scratching. Tinkerbell passed away in 2012.
    </p>
    </div><!--end div cat_inner-->
    </div><!--end div cat-->

    <div id="other">
    <div id="other_float">
    <img src="sadie2.png" alt="Sadie, 1yrs" />
    </div><!--end div other_float-->

    <div id="other_inner">
    <h1>Sadie</h1>
    <p class="description">Hamster, Female, 1 year, 1 lbs.</p><!--end p description-->
    <p>
    Sadie is a beautiful tan/white hamster. She came into our rescue when her first family could not give her the attention she required. In 2010, a family adopted Sadie as their first family pet. The family recognized that just like any other animal, even small caged creatures need love and attention. Sadie loves to go on adventures through the house in her spinning ball and find new paths through her jungle tube maze, which the family constantly adds to. For Sadie, her second chance was the best thing that could have happened to her.
    </p>
    </div><!--end div other_inner-->
    </div><!--end div other-->

<div id="footer">
    <div id="footer_inner">
        <p class="footer_location">1234 Forbes Avenue<br />
        Pittsburgh, PA 15213</p><!--end p footer_location-->

        <p class="footer_social">
        <a href="www.petfinder.com"><img src="finder.png" alt="See our animals on Petfinder" /></a>
        <a href="www.facebook.com"><img src="Facebook.png" alt="Friend us on Facebook" /></a>
        <a href="www.twitter.com"><img src="twitter.png" alt="Follow us on Twitter" /></a>
        <a href="www.youtube.com"><img src="youtube.png" alt="Visit Our YouTube Channel" /></a></p><!--end p footer_social-->

        <p class="footer_contact">Telephone: 512.341.8872<br />
        Email: <a href="mailto:paws+claws@gmail.com">paws+claws@gmail.com</a></p><!--end p footer_contact-->
    </div><!--end div footer_inner-->
</div><!--end div footer-->

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:18:26.647

尝试：

```
body {min-width: 750px;} 
```

根据您的喜好更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:06:24.093

哎哟! 这是一个有点痛苦的布局。

您可以重用 css 样式，使用 class 而不是 id 来区分。我没有费心添加您正在显示的每个元素（页脚中的一些内容以及看起来应该在页脚中的按钮）

您的页面是 303 行文本。这个例子是 93。另外——你应该看看浏览器中的开发者工具——它们让你看到元素的边界矩形并动态改变它们的样式——这两件事你可能会发现有帮助。:)

Chrome 中的组合键 Ctrl+Shift+I 和 IE 中的 Opera Key F12

或者您通常可以右键单击一个元素，然后选择“检查元素”

享受！

```
<!DOCTYPE html>
<html>
<head>
<style>
body
{
    padding: 0;
    margin: 0;
    background-color: #C15D63;
}
.page
{
    background-color: #E198B2;
    margin: auto;
    width: 800px;
}
.pageFooter
{
    border: 3px outset;
    background-color: #62587C;
    height: 60px;
    clear: both;
}
.item
{
    margin: 16px;
}

.item img
{
    float: left;
    width: 220px;
    height: 204px;
    margin-left: 32px;
    margin-right: 32px;
    border: solid 2px black;
}

h1 
{
    font-weight: bold;
    font-family: Copperplate Gothic Light, sans-serif;
    font-size: 1.2em;
    text-transform: uppercase;
}

p.description 
{
    font-weight: bold;
    font-size: .8em;
    padding: 5px 0px 5px 0px;
}
</style>
</head>
<body>
    <div class='page'>
        <br>

        <div class='item'>
            <img src='item1.png'>
            <h1>Beanie Baby</h1
            <p class="description">Yorkshire Terrier, Female, 10 years, 5 lbs.</p><!--end p description-->
            <p>
            Beanie Baby was brought into our rescue from Lancaster, PA where she and her two siblings were born to a breeder. When she was born she was the size of an actual beanie baby, hence the name! She was adopted in 2008 to a family of three who loved and cared for her. With some good TLC, Beanie became an outgoing pup who loved everyone and every other animal, but she was a total momma's girl! She loved to snuggle under the blankets and was always there to greet you after a long day at work. Beanie passed away in 2011.
            </p>    
        </div>

        <div class='item'>
            <img src='item2.png'>
            <h1>Tinkerbell</h1>
            <p class="description">Tabby Short Hair, Male, 18 years, 12 lbs.</p><!--end p description-->
            <p>
            Tinkerbell first came into our rescue 18 years ago. He loved to spend his days outside soaking up the sun and the nights inside sleeping an the foot of someone's bed. Every time Tinkerbell heard a can opener, he came running assuming that he was going to get a helping of tuna. He was a cat that enjoyed his personal space, but had a daily routine to come visit someone for a good scratching. Tinkerbell passed away in 2012.
            </p>
        </div>

        <div class='item'>
            <img src='item3.png'>
            <h1>Sadie</h1>
            <p class="description">Hamster, Female, 1 year, 1 lbs.</p><!--end p description-->
            <p>
            Sadie is a beautiful tan/white hamster. She came into our rescue when her first family could not give her the attention she required. In 2010, a family adopted Sadie as their first family pet. The family recognized that just like any other animal, even small caged creatures need love and attention. Sadie loves to go on adventures through the house in her spinning ball and find new paths through her jungle tube maze, which the family constantly adds to. For Sadie, her second chance was the best thing that could have happened to her.
            </p>
        </div>

        <div class='pageFooter'>
            <p class="footer_location">1234 Forbes Avenue<br />
            Pittsburgh, PA 15213</p><!--end p footer_location-->
        </div>

    </div>
</body>
</html> 
```

编辑：忘记了！在 !DOCTYPE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:18:47.330

宽度：50% 是相对的。您的容器大小将始终为浏览器窗口大小的 50%。

如果要固定，请使用 width:500px; 或类似的。

# c# - 更改文件名 到 Visual Studio 中的输出目录

> ID：12333684
> 
> 赞同：2
> 
> 时间：2012-09-08T19:13:22.603
> 
> 标签：c#, app-config

我在这个项目中有一个 C# 项目和一个 App.Config 文件。当我构建源代码时，会在应用程序配置的输出目录中创建一个文件（AssemblyName.exe.config），但我想要这个文件 App.Config 的名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:17:16.287

> 但我想要这个文件 App.Config 的名称。

您可以使用构建后事件来重命名文件。

但是，请意识到使用该文件的应用程序设置体系结构将期望名称为`AssemblyName.exe.config`. 如果重命名文件，正常的应用程序设置架构将会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:16:15.777

您可以在您的`Application Build`,`Event Post Build`添加重命名文件的操作中访问。

```
rename "YourPath/AssemblyName.exe.config" "YourPath/App.Config" 
```

# git - GitHub wiki 是项目，如何获取所有统计数据和图表？

> ID：12333687
> 
> 赞同：4
> 
> 时间：2012-09-08T19:13:54.343
> 
> 标签：git, github, markdown, gollum-wiki

我正在使用项目的 wiki 选项卡上的 GitHub 内置 gollum 开发一个开源 wiki。所以wiki本身就是项目。但是，尽管我在 wiki 存储库中完成了大量提交，但在主项目存储库（带有图表的存储库）中，它并没有显示该活动。我应该克服它吗？或者有没有办法镜像这两个存储库，这样我就不必明确告诉人们在寻找维基百科时只找到一个自述文件？

我已经查看了[这篇](https://stackoverflow.com/questions/6941688/how-to-integrate-a-github-wiki-into-the-main-project)关于使用子模块的帖子，但我不确定这是否能让我在图表上得到我想要的，在提交历史等方面。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:20:52.303

我选择的方法是简单地使用 wiki 进行编辑和托管，并定期从该存储库拉入主代码存储库，只是为了图形和统计数据。我在自述文件中指定人们应该访问 wiki，因为它旨在与 Gollum 的侧边栏/页脚功能一起使用。

将来我想弄清楚如何从主代码推送到 gh-pages 分支以与 GitHub Pages 一起使用，但到目前为止我还不能让它工作。（单页编辑功能可用的布局似乎不可用于手动推送。）

# c# - C# 线程池实现/性能峰值

> ID：12333703
> 
> 赞同：4
> 
> 时间：2012-09-08T19:16:30.370
> 
> 标签：c#, multithreading, threadpool

为了加快 C# 中物理对象的处理速度，我决定将线性更新算法更改为并行算法。我认为最好的方法是使用 ThreadPool，因为它是为完成作业队列而构建的。

当我第一次实现并行算法时，我为每个物理对象排队了一个作业。请记住，单个作业完成得相当快（更新力、速度、位置，检查与任何周围对象的旧状态的碰撞以使其线程安全等）。然后，我将使用单个等待句柄等待所有作业完成，每次物理对象完成时我都会递减一个互锁整数（在达到零时，我然后设置等待句柄）。需要等待，因为我需要做的下一个任务涉及更新所有对象。

我注意到的第一件事是表演很疯狂。平均下来，线程池的速度似乎快了一点，但性能却出现了**巨大的**峰值（每次更新大约 10 毫秒，随机跳转到 40-60 毫秒）。我尝试使用 ANTS 对此进行分析，但是我无法深入了解为什么会出现尖峰。

我的下一个方法是仍然使用 ThreadPool，但是我将所有对象分成组。我最初只使用 8 个组，因为这就是我的计算机所具有的任何内核。表演很棒。它远远优于单线程方法，并且没有峰值（每次更新大约 6 毫秒）。

我唯一想到的是，如果一个工作在其他工作之前完成，就会有一个空闲的核心。因此，我将作业数量增加到 20 个左右，甚至增加到 500 个。正如我所料，它下降到 5ms。

所以我的问题如下：

*   当我快速/大量地调整作业大小时，为什么会出现尖峰？
*   是否有任何关于如何实现 ThreadPool 的见解可以帮助我了解如何最好地使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T19:25:57.607

使用线程是有代价的——你需要上下文切换，你需要锁定（当一个线程试图获取一个新作业时，作业队列很可能被锁定）——这一切都是有代价的。与您的线程正在做的实际工作相比，这个价格通常很小，但如果工作很快结束，价格就会变得有意义。

您的解决方案似乎是正确的。一个合理的经验法则是线程数是内核数的两倍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T19:31:07.327

正如您可能期望的那样，峰值可能是由管理线程池并将任务分配给它们的代码引起的。

对于并行编程，有比“手动”跨不同线程分配工作更复杂的方法（即使使用线程池）。

例如，请参阅[.NET Framework 中的并行编程以](http://msdn.microsoft.com/en-us/library/dd460693%28v=vs.100%29.aspx)获取概述和不同选项。在您的情况下，“解决方案”可能就像这样简单：

```
Parallel.ForEach(physicObjects, physicObject => Process(physicObject)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T07:06:18.113

以下是我对你的两个问题的看法：

我想从问题 2（线程池的工作原理）开始，因为它实际上是回答问题 1 的关键。线程池是作为（线程安全的）工作队列和组实现的（无需详细说明）工作线程（可以根据需要缩小或放大）。当用户调用`QueueUserWorkItem`时，任务被放入工作队列。工作人员继续轮询队列并在空闲时开始工作。一旦他们设法接受一项任务，他们就会执行它，然后返回队列进行更多工作（这非常重要！）。所以工作是由工人按需完成的：当工人变得空闲时，他们需要做更多的工作。

说了这么多，很容易看出问题 1 的答案是什么（为什么你会看到更细粒度的任务的性能差异）：这是因为使用细粒度你可以获得更多**的负载平衡**（一个非常理想的属性） ，即您的工人或多或少地做相同数量的工作，并且所有核心都被统一利用。正如您所说，使用粗粒度的任务分布，可能会有更长和更短的任务，因此一个或多个核心可能会滞后，从而减慢整体计算速度，而其他核心则什么也不做。有了小任务，问题就消失了。每个工作线程一次执行一项小任务，然后返回执行更多任务。如果一个线程接一个较短的任务，它会更频繁地进入队列，如果它需要一个较长的任务，它会减少进入队列的频率，所以事情**是平衡的**.

最后，当作业太细粒度时，并且考虑到池可能会扩大到超过 1K 线程，当所有线程返回以执行更多工作时，队列上的争用非常高（这种情况经常发生），这可能会导致对于您看到的尖峰。如果底层实现使用阻塞锁来访问队列，那么上下文切换非常频繁，这会极大地损害性能并使其看起来相当随机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T19:34:50.480

问题1的答案：这是因为线程切换，线程切换（或操作系统概念中的上下文切换）是在每个线程之间切换所需的CPU时钟，大多数时候多线程会提高程序和进程的速度，但是当它是进程时如此小而快速的大小，那么上下文切换将比线程的自身进程花费更多的时间，因此整个程序的吞吐量会降低，您可以在 OS 概念书籍中找到有关此的更多信息。

问题 2 的答案：实际上我对 ThreadPool 有一个全面的了解，我无法准确解释它的结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T20:31:06.020

要了解有关 ThreadPool 的更多信息，请从此处开始[ThreadPool 类](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

每个版本的 .NET Framework 都增加了越来越多的间接利用 ThreadPool 的功能。例如之前提到的[Parallel.ForEach 方法与](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)[System.Threading.Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)一起添加到 .NET 4 中，这使代码更具可读性和整洁性。您也可以在此处了解更多关于[任务计划程序](http://msdn.microsoft.com/en-us/library/dd997402)的信息。

在非常基本的层面上，它所做的是：它创建了 20 个线程并将它们放入一个 lits 中。每次它接收到执行异步的委托时，它都会从列表中获取空闲线程并执行委托。如果没有找到可用的线程，则将其放入队列中。每次 deletegate 执行完成时，它都会检查队列是否有任何项目，如果有，就会偷看一个并在同一个线程中执行。

# ios - iOS XMPPFramework registerWithPassword ERROR

> ID：12333704
> 
> 赞同：4
> 
> 时间：2012-09-08T19:16:47.787
> 
> 标签：ios, frameworks, xmpp

我对 iOS 的 XMPP 框架有疑问。每次我触发`registerWithPassword`方法时，我都会得到一个错误：

> "Error Domain=XMPPStreamErrorDomain Code=1 "请等待流连接。" UserInfo=0xad7c300 {NSLocalizedDescription=请等待流连接。} "

我在我的代码中执行以下步骤：

```
 -(void)createUserWithUsername:(NSString*)name andPW:(NSString*)pw{

[self setupStream];
NSLog(@"name: %@ ",name);

NSString *nameFor = name;
[self disconnect];

NSString *jidBenutzer = [NSString stringWithFormat:@"%@@my-Server.com",nameFor];
NSError *error = nil;

NSError * err = nil; 
NSLog(@"jabberid : %@",jidBenutzer);
XMPPJID *jid = [XMPPJID jidWithString:jidBenutzer];
self.xmppStream.myJID = jid;

[[self xmppStream] registerWithPassword:pw error:&err];

NSLog(@"Connection: %@",error);

NSLog(@"Register: %@",err);
} 
```

我希望你能帮帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:50:31.897

从您的示例代码中，我没有看到任何调用：

```
[xmppStream connect:&error] 
```

从错误消息中，您实际上没有连接。

确保正确调用 connect 方法并相应地处理错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T07:39:55.850

```
/**
 * This method attempts to register a new user on the server using the given username and password.
 * The result of this action will be returned via the delegate methods.
 * 
 * If the XMPPStream is not connected, or the server doesn't support in-band registration, this method does nothing.
 **/ 
```

这是下面。

```
 - (BOOL)registerWithPassword:(NSString *)password error:(NSError **)errPtr 
```

该方法的说明。你会发现在使用这个方法之前，你必须连接服务器。

我在下面找不到。

```
 [xmppStream connect:&error] 
```

我用这个。

```
 NSError *error;
   NSString *tjid = [[NSString alloc] initWithFormat:@"anonymous@%@", serverName];

   isRegister = YES;
   [xmppStream setMyJID:[XMPPJID jidWithString:tjid]];

   [xmppStream connectWithTimeout:XMPPStreamTimeoutNone error:&error] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T08:17:15.873

请确保您的 openfire 服务器已从您的系统偏好设置中打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-15T22:00:12.593

这是一个迟到的答案，但对于像我这样的任何新开发人员来说仍然是：您必须在注册之前匿名登录：例如，您使用 yourname@yourserver 登录，您的密码尝试使用 unknown@yourserver 登录，而密码则什么都不输入。因此它将连接流但不会验证这是注册所必需的。流应已连接但未经过身份验证。

# asp.net-mvc - 使用 Symbolserver 调试 ASP.NET MVC4 的夜间构建

> ID：12333706
> 
> 赞同：1
> 
> 时间：2012-09-08T19:16:50.903
> 
> 标签：asp.net-mvc, asp.net-mvc-4, debug-symbols

我使用此描述为我的项目获取 ASP.NET MVC 的夜间构建

[http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx)

它成功地从 nuget 中提取程序集，我可以运行该项目。

我现在尝试调试从 MS 符号服务器中提取的 pdb。这实际上是重点：我不知道这些符号是否真的位于服务器上。要么我做错了什么，要么符号不可用。

这是我的调试设置：

![在此处输入图像描述](../Images/bb9cbf1e63b5a92d37a408619c5013ca.png)

这些是我的符号服务器 ![在此处输入图像描述](../Images/f41293d937ed9f862966ee304df88bbe.png)

这是我尝试进入位于 System.Web.Mvc.dll 中的方法时看到的 ![在此处输入图像描述](../Images/d7f0754ddd022a5ffeccad7cd7b607cf.png)

这些是加载的模块：

![在此处输入图像描述](../Images/6fd95097e1022ad600d8f7f8189ac06e.png)

我在 9 月 3 日下载了夜间版本。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:33:03.807

我遇到了完全相同的问题。您需要使用托管在 MyGet 上的符号。请参见：

[http://blogs.msdn.com/b/webdev/archive/2012/08/30/getting-symbols-and-source-with-asp-net-nightly-nuget-packages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/30/getting-symbols-and-source-with-asp-net-nightly-nuget-packages.aspx)

# html - 集中水平菜单

> ID：12333711
> 
> 赞同：0
> 
> 时间：2012-09-08T19:17:43.943
> 
> 标签：html, css

HTML

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>hangout</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div id="site">
            <!-- header -->
            <div id="header">
                <div id="menu" align="center">
                    <ul>
                        <li><a href="index.html"        class="btnHome active">     <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="portfolio.html"    class="btnPort">            <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="#.html"            class="btnVideos">          <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="#.html"            class="btnNews">            <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="#.html"            class="btnGallery">         <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="#.html"            class=" btncontacts">       <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                        <li><a href="#.html"            class=" btnAbout">          <img src="images/btn/spacer.gif"    alt="" width="120" height="36"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

CSS

```
* {
margin : 0;
padding : 0;
text-align : center;
}
html {
width : 100%;
height : 100%;
background-color : #222222;
}
body {
width : 100%;
height : 100%;
background: url('images/hdr-bg.gif') top left repeat-x;
}
#site {
width : 988px;
margin : 0 auto;
}
#header {
padding : 15px 0 15px 0;
width : 988px;
overflow : hidden;
position : relative;
}

#menu {
width : 988px;
height : 36px;
margin : 0;
padding : 0px 0 0 14px;
}
#menu ul {
overflow : hidden;
padding : 0 3px 0 0;
}
#menu li {
display : inline;
list-style-type : none;
}
#menu a {
display : block;
float : left;
}

.btnHome{background:url('images/btn/Home.png') top left no-repeat;}
.btnPort{background:url('images/btn/Port.png') top left no-repeat;}
.btnVideos{background:url('images/btn/Videos.png') top left no-repeat;}
.btnNews{background:url('images/btn/News.png') top left no-repeat;}
.btnContact{background:url('images/btn/mid.png') top left no-repeat;}
.btnGallery{background:url('images/btn/Gallery.png') top left no-repeat;}
.btncontacts{background:url('images/btn/contacts.png') top left no-repeat;}
.btnAbout{background:url('images/btn/About.png') top left no-repeat;}
#menu a:hover, .active {
background-position : bottom left;
} 
```

嗨，我的菜单有 2 个问题。首先是集中菜单。我不能取出浮动左侧因为我的菜单不会是水平的。第二件事是 btn pics 似乎它们在 IE 中不粘在一起。顺便说一句，每个 btn***.png 的长度为 120px
将不胜感激您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:19:50.797

很容易做到`display: inline-block;`。

```
ul {text-align: center; font-size: 0;}
li {display: inline-block; vertical-align: top; *zoom: 1; *display: block; font-size: 12px;} 
```

# html - 使右侧的 Div 填充所有可用空间

> ID：12333712
> 
> 赞同：0
> 
> 时间：2012-09-08T19:18:04.307
> 
> 标签：html, css

我想创建两个并排的 div，但是我希望左侧的一个为 300px，而右侧的一个占据屏幕上的剩余量。这怎么可能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:26:25.567

最直接（我会说正确）的方法是使用`display: table`：

```
#wrapper {
    display: table;
    width: 100%;
}
#left, #right {
    display: table-cell;
    color: white;
}
#left {
    background: blue;
    width: 300px;
}
#right {
    background: red;
}

<section id="wrapper">
    <aside id="left">Left 300px</aside>
    <div id="right">Right the rest</div>
</section> 
```

[http://jsfiddle.net/YbLZE/1/](http://jsfiddle.net/YbLZE/1/)

尝试调整右下框架的大小。

更新了`HTML5`元素`section`和`aside`，如果你有`HTML5 doctype`. 我必须记住使用那些...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:25:08.983

这是工作示例： http: [//jsfiddle.net/tnm62/](http://jsfiddle.net/tnm62/)

说明：
1\. 将两个元素放在一个容器中。
2\. 将左侧元素定位为绝对，将其宽度设置为 300 像素。
3\. 将右边元素的左边距设置为 300 像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:31:54.003

一种解决方案是左侧`float: left;`较宽，然后适用于您的右侧。以下是基本大纲：`div``300px``overflow: hidden;``div`

HTML：

```
<div class = "left">
    Glee is awesome!
</div>
<div class = "right">
    Glee is awesome!
</div> 
```

CSS：

```
.left {
    width: 300px;
    float: left;
}
.right {
    overflow: hidden;
} 
```

还有一个小演示：[小链接](http://jsfiddle.net/glee/H3tqj/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T19:33:04.893

这是适用于较新浏览器（不是 IE）的内容：

**CSS**：

```
#container {
    display: box;
}

#left {
    width: 400px;
}

#right {
    box-flex: 1;
} 
```

​<strong>HTML：

```
<div id="container">
    <div id="left">Left</div>
    <div id="right">Right</div>
</div>​ 
```

**演示：http: [//jsfiddle.net/N5zhH/1/](http://jsfiddle.net/N5zhH/1/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T14:59:34.693

这应该足够了：

```
<div style="overflow: hidden;">
    <div style="width: 300px; float: left;"></div>
    <div style="margin-left: 300px;"></div>
</div> 
```

*   `overflow: hidden`将拉伸容器 div 以容纳最高的子元素
*   `float: left`将元素向左浮动（doh！）
*   `width: 300px`并`margin-left: 300px`共同确保如果右列比左列高，它不会流到左浮动 div*下方；*它将与容器 div 的左边缘保持 300 倍的间隙

提示：更改为`margin-left: 320px`添加 20px 装订线

这是一个不错的小[**DEMO**](http://jsfiddle.net/DWd5k/)

# java - 我的代码是插入排序的正确实现吗？

> ID：12333715
> 
> 赞同：0
> 
> 时间：2012-09-08T19:18:20.623
> 
> 标签：java, insertion-sort

此代码正确排序。这是插入排序吗？

```
import java.util.Scanner;
public class InsertionSort {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.println("Enter the number of elements: ");
        int count;
        count = sc.nextInt();
        int[] a = new int[count];
        System.out.println("Enter elements: ");
        for(int i = 0 ; i<count;i++){
            a[i] = sc.nextInt();
        }
        int j,temp;
        System.out.println("aftr insertion sort :");
        for(int i = 1 ; i<count;i++){
            j=i;
            while(j>0 && a[j-1] > a[j] ){
                temp = a[j];
                a[j] = a[j-1];
                a[j-1] = temp;
                j--;
            }
        }
        for(int i = 0 ; i<count;i++){
            System.out.print(a[i]+"  ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:09:47.847

我专注于三个`for`循环中的第二个，即实际排序发生的那个。那个循环对我来说看起来不错。

# java - 如何从 LinkedList 中获取数据？

> ID：12333721
> 
> 赞同：1
> 
> 时间：2012-09-08T19:18:45.590
> 
> 标签：java, linked-list

这是我正在为我的程序寻找的示例输出。

**示例输出**

> 在每一行输入一个球场名称和比赛收入
> 
> 完成后输入done
> 
> 巨人1000
> 
> 福克斯波罗 500
> 
> 巨人1500
> 
> 完毕
> 
> 输入体育场的名称以获得总收入：
> 
> 巨人队
> 
> 总收入为 2500.00

我得到了一切工作，但最后的总收入。我不知道如何进入我的链表并获取游戏收入并显示它..这是我现在的代码，我一直在搞乱......

```
import java.util.LinkedList;
import java.util.Scanner;

public class LinkedLists {

    private final Scanner keyboard;

    private final LinkedList<String> stadiumNames;
    private final LinkedList<Integer> gameRevenue;

    public LinkedLists() {
        this.keyboard = new Scanner(System.in);
        this.stadiumNames = new LinkedList<String>();
        this.gameRevenue = new LinkedList<Integer>();
    }

    public void addData(String stadium, int revenue){
        stadiumNames.add(stadium);
        gameRevenue.add(revenue);
    }

    public void loadDataFromUser() {
        System.out.println("On each line enter the stadium name and game revenue.");
        System.out.println("Enter done when you are finished.");

        boolean done = false;
        while(!done) {
            System.out.print("Enter the name of the stadium:");
            String stadium = keyboard.next();
            if (stadium.equals("done")) {
                done = true;
            } else {
                System.out.print("Enter game revenue: ");
                addData(stadium, keyboard.nextInt());
            }
        }
    }

    // return -1 if not found
    public int getIndexForName(String name) {

        if(stadiumNames.contains(name)){
            System.out.println("The total revenue is: " +gameRevenue.get(0));
            System.exit(0);
        }

        return -1;

    }

    public void showInfoForName(String name) {
        int index = getIndexForName(name);
        if (index==-1) {
            System.out.println("There is no stadium named " + name);
        } else {

        }
    }

    public void showInfoForName() {
        System.out.println("Enter the name of the stadium to get the total revenue for it.");
        showInfoForName(keyboard.next());
    }

    public static void main(String[] args) {
        LinkedLists pgm = new LinkedLists();
        pgm.loadDataFromUser();
        pgm.showInfoForName();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:30:14.857

试试这个：

```
public int getIndexForName(String name) {
    if (stadiumNames.contains(name)) {
        int total = 0;
        for (int i = 0 ; i < stadiumNames.size() ; i++)
            if (stadiumNames.get(i).equals(name))
                total += gameRevenue.get(i);
        System.out.println("The total revenue is: " + total);
        System.exit(0);
    }
    return -1;
} 
```

不过，有更好的方法可以做到这一点。我可能会使用`[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)`将每个体育场名称映射到其总收入的方法。`addData`您可以在方法中更新此地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:14:54.227

使用哈希映射更简洁，而且您可以将总数保存在一边而不计算它：

```
import java.util.Scanner;
import java.util.Map;
import java.util.HashMap;

/**
 * User: user
 * Date: 09/09/2012
 */
public class Blah {

    private Scanner keyboard;
    private Map<String, Integer> stadiumRevenues;
    private Integer total = 0;

    public Blah() {
        this.keyboard = new Scanner(System.in);
        this.stadiumRevenues = new HashMap<String, Integer>();
    }

    public void addData(String stadium, int revenue){
        stadiumRevenues.put(stadium, revenue);
        total += revenue;
    }

    public void loadDataFromUser() {
        System.out.println("On each line enter the stadium name and game revenue.");
        System.out.println("Enter done when you are finished.");

        boolean done = false;
        while(!done) {
            System.out.print("Enter the name of the stadium:");
            String stadium = keyboard.next();
            if (stadium.equals("done")) {
                done = true;
            } else {
                System.out.print("Enter game revenue: ");
                addData(stadium, keyboard.nextInt());
            }
        }
    }

    public int getTotal() {
        return total;
    }

    // return -1 if not found
    public int getIndexForName(String name) {

        Integer rev = stadiumRevenues.get(name);

        if(rev != null){
            System.out.println("The total revenue is: " +rev);
            System.exit(0);
        }

        return -1;

    }

    public void showInfoForName(String name) {

        Integer rev = stadiumRevenues.get(name);

        if (rev == null) {
            System.out.println("There is no stadium named " + name);
        } else {

        }
    }

    public void showInfoForName() {
        System.out.println("Enter the name of the stadium to get the total revenue for it.");
        showInfoForName(keyboard.next());
    }

    public static void main(String[] args) {
        Blah pgm = new Blah();
        pgm.loadDataFromUser();
        pgm.showInfoForName();
    }

} 
```

# c - C 编译器错误：无法转换为指针类型

> ID：12333724
> 
> 赞同：1
> 
> 时间：2012-09-08T19:19:24.353
> 
> 标签：c

我正在尝试将 FreeType 库与 libpng 一起使用来输出字形的 PNG 图像。我可以创建字形的光栅位图，也可以创建有效的 PNG 文件，但我似乎无法将两者放在一起。问题来自接近尾声的这条线：

```
png_bytep image = (png_bytep) slot->bitmap; 
```

看来我不能简单地将 FreeType 位图转换为 a`png_bytep`并将其传递给 pnglib（这是一厢情愿的想法）。我收到以下错误：

```
/home/david/Desktop/png.c: In function ‘main’:
/home/david/Desktop/png.c:47:2: error: cannot convert to a pointer type 
```

但是，我不确定如何从这里开始。但这是完整的代码块：

```
#include <stdlib.h>
#include <stdio.h>
#include <png.h>

#include <ft2build.h>
#include FT_FREETYPE_H

main() {

    // Declare FreeType variables
    FT_Library library;
    FT_Face face;
    FT_GlyphSlot slot = face->glyph;
    FT_UInt glyph_index;
    int pen_x, pen_y, n;
    char* file = "/usr/share/fonts/truetype/freefont/FreeMono.ttf";

    // Declare PNG variables
    png_uint_32 width = 100;
    png_uint_32 height = 100;
    int bit_depth = 16;
    int color_type = PNG_COLOR_TYPE_GRAY;
    char* file_name = "/home/david/Desktop/out.png";
    png_structp png_ptr;
    png_infop info_ptr;

    // Render font
    FT_New_Face(library, file, 0, &face);
    FT_Set_Pixel_Sizes(face, 0, 16);
    glyph_index = 30;
    FT_Load_Glyph(face, glyph_index, FT_LOAD_DEFAULT);
    FT_Render_Glyph(face->glyph, FT_RENDER_MODE_NORMAL);

    // Create a PNG file
    FILE *fp = fopen(file_name, "wb");

    // Create the PNG in memory
    png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
    info_ptr = png_create_info_struct(png_ptr);
    png_init_io(png_ptr, fp);

    // Write the header
    png_set_IHDR(png_ptr, info_ptr, width, height, bit_depth, color_type, PNG_INTERLACE_NONE, PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE);
    png_write_info(png_ptr, info_ptr);

    // Write image data
    png_bytep image = (png_bytep) slot->bitmap;
    png_write_image(png_ptr, &image);

    // End write
    png_write_end(png_ptr, NULL);

    fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:22:01.073

似乎你应该通过`&image`而不是图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T19:51:54.523

```
void png_write_image(png_structp png_ptr, png_bytepp image);
typedef png_byte        FAR * FAR * png_bytepp;
typedef unsigned char png_byte; 
```

所以 png_write_image 正在寻找 type 的输入`unsigned char far * far *`。

[http://en.wikipedia.org/wiki/Far_pointer](http://en.wikipedia.org/wiki/Far_pointer)如果您对远的含义感兴趣。

现在，如果您查看您的 FT_GlyphSlot 类型，您会发现：

```
typedef struct  FT_GlyphSlotRec_
  {
...
FT_Bitmap         bitmap;
...
}

typedef struct  FT_Bitmap_
{
  int             rows;
  int             width;
  int             pitch;
  unsigned char*  buffer;
  short           num_grays;
  char            pixel_mode;
  char            palette_mode;
  void*           palette;
} FT_Bitmap; 
```

因此，要获得正确的类型，您将需要`&slot->bitmap.buffer`.

不需要演员表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T19:28:57.967

您可能想要 slot->bitmap.buffer 而不是 slot->bitmap

slot->bitmap 是一个 FT_Bitmap，一种结构类型，还包含位图宽度等。

# c++ - MongoDB C++ 驱动程序服务器端查询计数

> ID：12333725
> 
> 赞同：1
> 
> 时间：2012-09-08T19:19:31.280
> 
> 标签：c++, mongodb, mongodb-query, mongodb-c

Windows 7 64 SP1 -- MongoDB 2.2.0-rc2 -- Boost 1.42 -- MS VS 2010 Ultimate -- C++ 驱动程序

我有一个将 Query 对象作为参数的函数：

```
 someFunction( Query qu ) 
```

优点：

1.  可以接受 Query 对象或格式良好的 BSONObj。
2.  可以访问查询助手，例如排序/提示/等。

坏处：

1.  无法进行类似于 shell 的服务器端计数（相对于客户端的一批结果计数）：

    ```
    nstudents = db.students.find({'address.state' : 'CA'}).count(); 
    ```

    IE，

    ```
    unsigned long long n = c.count("mydb.users", qu); 
    ```

    引发错误：

    ```
    cannot convert ... from 'mongo::Query' to 'const mongo::BSONObj & 
    ```

因此，建议我使用 BSONObj 作为参数：

```
 someFunction ( BSONObj qu ) 
```

优点：

1.  可以做一个服务器端计数。
2.  可以转换为 Query 并因此使用它的助手。

坏处：

1.  使用该函数的任何人都必须注意**不要**将查询作为违反直觉的 Query 对象传递。

所以，我的问题是：

为什么 BSONObj 中没有实现 Query 类的辅助方法？或者反过来说，为什么不能用 Query 类来实现服务器端的计数方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:35:41.580

```
unsigned long long count (const string &ns, const BSONObj &query=BSONObj(),
int options=0) 
```

因此，`count`应该接收`BSONObj`（或 Base/Derived of/from `BSONObj`）。

`Query`有`implicit c-tor`，即收`BSONObj`。

```
Query (const BSONObj &b) 
```

`Query`有公共成员`obj`，即`BSONObj`。

你的功能可以是

```
// i think const Query& qu will be better.
someFunction( Query qu ) 
```

对于通话`count`，您应该使用

```
c.count("mydb.users", qu.obj); 
```

# ruby-on-rails - 如何使用 rails/master (beta 4.0.0) 创建一个 rails 项目？

> ID：12333726
> 
> 赞同：6
> 
> 时间：2012-09-08T19:19:46.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

如何使用[rails/master](https://github.com/rails/rails)创建 rails 项目？

`rails new app_name --edge`使用 Rails 3.2.8 并指向 Gemfile 中的“3-2-stable”分支。

创建一个rails项目，指向`gem 'rails'`master并运行`bundle`或`bundle install`生成几个错误。我也厌倦了这种方法，因为`rails new`每个版本的命令可能会有所不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T20:05:39.083

只需从 github 下载 head 并从那里运行它：

```
$ gem update bundler #unless you've got 1.2 already

$ git clone https://github.com/rails/rails.git
$ ruby rails/railties/bin/rails new fooapp --dev
$ rails -v
Rails 4.0.0.beta 
```

或者对于更新版本的 rails，请改用该`exe`目录：

```
$ ruby rails/railties/exe/rails new fooapp --dev 
```

还值得注意的是，`--dev`它将生成一个`Gemfile`指向您本地的 Rails 副本。如果您希望它指向 github 上的当前副本，请使用`--edge`.

# git - 从一个分支到另一个分支的单次提交

> ID：12333729
> 
> 赞同：0
> 
> 时间：2012-09-08T19:19:56.117
> 
> 标签：git

> **可能重复：**
> [如何在 Git 中将特定提交从一个分支合并到另一个分支？](https://stackoverflow.com/questions/6372044/how-do-i-merge-a-specific-commit-from-one-branch-into-another-in-git)

我是 git 的新手。有一个问题：如果我想从一个分支提交到另一个分支，我应该使用什么命令？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:23:27.983

使用樱桃采摘，根据：

[http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T19:26:33.283

就像是： `git cherry-pick 575f9b1a75673067830bb224ee09b201923093a6`

或者

`git cherry-pick my-branch`（在我的分支上获得最高提交）。

# java - Java，如何将对象添加到 LinkedList？

> ID：12333733
> 
> 赞同：1
> 
> 时间：2012-09-08T19:20:22.667
> 
> 标签：java, linked-list

我已经编写了以下代码行，似乎一切正常，但是当我看到结果不正确时。

在这里，我定义了一个 LinkedList 并向其中添加了一个对象。

```
private LinkedList<KategoriRecipeList> createListObjects() {

        LinkedList<KategoriRecipeList> list = new LinkedList<KategoriRecipeList>();
        KategoriRecipeList kategori = new KategoriRecipeList();

        for(int i=0; i<resepi.getResepiId().size(); i++) {
            kategori.setKategoriName(kategoriName);
            kategori.setResepiId(resepi.getResepiId().get(i));
            kategori.setResepiName(resepi.getResepiName().get(i).trim().replaceAll("'", ""));
            kategori.setImgLogoUri(resepi.getResepiImageURL().get(i));
            kategori.setImgMoreUri(bitmapUrls.get(i));

            Log.i("WWWWWWW", "Recipe '" + resepi.getResepiName().get(i) + "' added to list");

            list.add(kategori);
        }

        return list;
    } 
```

当我看到日志文件时，结果是这样的：

```
09-09 03:05:29.272: I/WWWWWWW(1250): Recipe '"Chicken Cordon Bleu"' added to list

09-09 03:05:29.272: I/WWWWWWW(1250): Recipe '"Sat-Bag"' added to list

09-09 03:05:29.272: I/WWWWWWW(1250): Recipe 'Ayam Adobo ' added to list

09-09 03:05:29.272: I/WWWWWWW(1250): Recipe 'Ayam Ber’Crumble’ & ‘Fennel’ direneh Air Roselle' added to list

09-09 03:05:29.272: I/WWWWWWW(1250): Recipe 'Ayam Dua Cara' added to list 
```

我有另一个调用上述方法的方法：

```
private void storeListIntoDatabase() {
        Log.i(TAG, "Try to insert data into database.");

        LinkedList<KategoriRecipeList> listOfObjects = createListObjects();
        if(listOfObjects == null  ||  listOfObjects.size() <= 0)
            return;

        for(int i=0;  i<listOfObjects.size(); i++)
            Log.i("KKKKKKKK", "Recipe '" + listOfObjects.get(i).getResepiName() + "' added to list");
    } 
```

日志文件中的结果是这样的：

```
09-09 03:05:29.297: I/KKKKKKKK(1250): Recipe 'Tongkeng Ayam Goreng dan Nasi Kari Leher Ayam' added to list

09-09 03:05:29.297: I/KKKKKKKK(1250): Recipe 'Tongkeng Ayam Goreng dan Nasi Kari Leher Ayam' added to list

09-09 03:05:29.297: I/KKKKKKKK(1250): Recipe 'Tongkeng Ayam Goreng dan Nasi Kari Leher Ayam' added to list

09-09 03:05:29.297: I/KKKKKKKK(1250): Recipe 'Tongkeng Ayam Goreng dan Nasi Kari Leher Ayam' added to list

09-09 03:05:29.297: I/KKKKKKKK(1250): Recipe 'Tongkeng Ayam Goreng dan Nasi Kari Leher Ayam' added to list 
```

如您所见，结果不同，但我希望结果应该相同。我的问题在哪里？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:22:29.513

您需要在每个循环上创建新实例，否则将更新相同的实例。列表维护对对象的引用，它们不包含对象的副本。

```
for(int i=0; i<resepi.getResepiId().size(); i++) {
    KategoriRecipeList kategori = new KategoriRecipeList();
    kategori.setKategoriName(kategoriName);
    kategori.setResepiId(resepi.getResepiId().get(i));
    ....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T19:22:58.890

这条线

分类食谱列表 分类 = 新分类食谱列表（）；

需要在 for 循环内你必须每次都创建一个新对象

# android - 壁纸服务的 onResume

> ID：12333736
> 
> 赞同：1
> 
> 时间：2012-09-08T19:20:45.410
> 
> 标签：android, service, android-preferences, live-wallpaper

WallpaperService 是否有类似 onResume 的方法？

我试过了：

```
@Override
protected void onResume() {
    super.onResume();
} 
```

但它告诉我**该方法 onResume() 未定义为 WallpaperService 类型**

我希望我的壁纸在用户在偏好中给出新值后自行刷新。

所以我想知道WallpaperService是否有像onResume这样的方法？还是有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:22:25.703

壁纸引擎中没有 onResume() 方法。要收听首选项，您需要实现共享首选项侦听器，您可以获得更改后的值。

# php - Laravel 后退按钮

> ID：12333739
> 
> 赞同：93
> 
> 时间：2012-09-08T19:21:20.273
> 
> 标签：php, laravel

我正在尝试在页面上创建一个简单的后退按钮。用户可以从两个不同的页面到达这个页面，所以我想知道他是从哪个页面到达的。那可能吗？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-09-08T19:33:33.093

在 Laravel 中，您可以执行以下操作：（`<a href="{{ Request::referrer() }}">Back</a>`假设您使用的是 Blade）。

**拉拉维尔 4**

```
{{ URL::previous() }} 
```

**拉拉维尔 5+**

```
{{ url()->previous() }} 
```

[Laravel 文档](https://laravel.com/docs/master/urls#accessing-the-current-url)

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-06-10T19:21:24.010

我知道这是一个古老的问题，但我在寻找相同的解决方案时发现了它。上面的解决方案似乎不适用于 Laravel 4，但是您现在可以使用它：

```
<a href="{{ URL::previous() }}">Go Back</a> 
```

希望这对在 L4 中寻找此功能的人有所帮助

（来源：[https](https://github.com/laravel/framework/pull/501/commits) ://github.com/laravel/framework/pull/501/commits ）

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2016-03-20T13:55:42.977

Laravel 5.2+，后退按钮

```
<a href="{{ url()->previous() }}" class="btn btn-default">Back</a> 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-03-31T16:49:29.830

确实使用`{{ URL:previous() }}`do work，但是如果您使用相同命名的路由来显示多个视图，它将带您回到该路由的第一个端点。

就我而言，我有一个命名路由，它基于用户选择的参数，可以呈现 3 个不同的视图。当然，当用户尚未选择任何选项时，我在此路由中第一次进入时有一个默认情况。

当我使用 时`URL:previous()`，Laravel 会带我回到默认视图，即使用户选择了其他选项。仅在我完成的按钮内使用javascript才能返回到正确的视图：

```
<a href="javascript:history.back()" class="btn btn-default">Voltar</a> 
```

我在 Laravel 5.3 上对此进行了测试，只是为了澄清。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-07-05T19:42:41.023

以下是一个完整的 Blade（Laravel 使用的模板引擎）解决方案：

```
{!! link_to(URL::previous(), 'Cancel', ['class' => 'btn btn-default']) !!} 
```

带有类的选项数组是可选的，在这种情况下，它指定 Bootstrap 3 按钮的样式。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-04-14T14:35:20.843

在 5.1 上，我只能让它工作。

```
<a href="{{ URL::previous() }}" class="btn btn-default">Back</a> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-26T12:40:50.063

以下其中一项可以解决您的问题

```
URL::previous() 
URL::back() 
```

其他

```
URL::current() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-16T15:29:23.803

您可以使用 javascript 来解决这个问题。它是从浏览器历史记录中检索链接。

```
<script>
function goBack() {
  window.history.back();
}
</script>
```

```
<button onclick="goBack()">Go Back</button>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-24T07:50:51.630

您可以使用 {{ URL::previous() }} 但它不是完美的用户体验。

例如，当您按 F5 按钮并再次单击带有 {{ URL::previous() }} 的返回按钮时，您将留在原处。

一个好方法是使用 {{ route('page.edit', $item->id) }} 它总是你想要重定向的真实页面。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-25T08:27:25.617

```
<a href="{{ url()->previous() }}" class="btn btn-warning"><i class="fa fa-angle-left"></i> Continue Shopping</a> 
```

这在 Laravel 5.8 中有效

# facebook - 关注帖子的分享/喜欢/评论

> ID：12333742
> 
> 赞同：0
> 
> 时间：2012-09-08T19:22:08.150
> 
> 标签：facebook, facebook-graph-api, facebook-like, restfb

我在一个网站上工作。我的网站有它的内部注册用户（在我的网站数据库中也有用户的 facebook 电子邮件 ID 和 uid）。在我的网站主页上，我有 facebook like 按钮。让 M1、M2、M3 成为我网站上的三个注册会员。当 M1 喜欢我网站的内容时，它会显示在 M1 的墙上。然后 M2 点赞/分享了 M1 墙上的帖子，并显示在 M2 的墙上，再次 M3 点赞/分享了 M2 的帖子，并显示在 M3 的墙上。我想要 M2/M3 喜欢/分享帖子时的事件（以及喜欢/分享者的 uid），以便我可以根据相应用户的事件进行一些活动。

如果可以实时获取详细信息将是最好的，否则任何批处理也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:09:21.447

如果你有 post_id，你可以通过发送 GET 请求来访问它的数据（包括喜欢和评论）`https://graph.facebook.com/POST_ID`。

这将返回与您可以阅读和使用的帖子相关的 JSON 数据。有关更多详细信息，请参见此处：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

这还不能用于实时订阅，因此批量请求是您目前唯一的选择。

# android - 是否始终支持 PendingIntent 中的 requestCode？

> ID：12333743
> 
> 赞同：6
> 
> 时间：2012-09-08T19:22:23.833
> 
> 标签：android, android-pendingintent

正如前面的问题所建议的[那样](https://stackoverflow.com/questions/3730258/mulitple-instances-of-pending-intent)，我试图通过为每个用例设置单独的 requestCode 来区分 PendingIntent 的不同实例。

这是一个强大的解决方案吗？即使[javadocs](http://developer.android.com/reference/android/app/PendingIntent.html)仍然说它“当前未使用”，是否始终支持 requestCode？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-04T21:23:43.637

是的。`requestCode`一直都在。**除了作为`PendingIntent`匹配**测试的一部分之外，Android 框架目前不使用它来做任何事情。用于`requestCode`确定不同`PendingIntent`的 s 是稳健且受支持的。[文档](http://developer.android.com/reference/android/app/PendingIntent.html)甚至这样说：

*   如果您确实需要`PendingIntent`同时激活多个不同的对象（例如用作同时显示的两个通知），那么您需要确保它们有所不同，以便将它们与不同的 PendingIntents 关联. 这可能是`Intent`由 考虑的任何属性，或提供给、、`Intent.filterEquals`或的**不同请求代码整数**。`getActivity(Context, int, Intent, int)``getActivities(Context, int, Intent[], int)``getBroadcast(Context, int, Intent, int)``getService(Context, int, Intent, int)`

# image - OpenCV中的符号比较

> ID：12333745
> 
> 赞同：2
> 
> 时间：2012-09-08T19:22:41.980
> 
> 标签：image, opencv, comparison, similarity, sign

我正在寻找 OpenCV 中的一些函数来比较和评估具有考古标志的图像之间的相似性（基于图像和关键字），例如：

最好使用算法找到符号边界或使用 SURF 或 SIFT 算法？直方图比较有用吗？

有任何教程，示例来实现一些相关的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:11:20.163

这取决于您的图像。SIFT 和 SURF 非常适合检测不受光照条件、比例和方向影响的点，因此它们可能适合您的目的。

您还可以使用基于标准化互相关的 matchTemplate，您将获得相似度值。

# c++ - C++中Java静态方法的等价物

> ID：12333754
> 
> 赞同：16
> 
> 时间：2012-09-08T19:24:13.067
> 
> 标签：c++

我正在尝试在 C++ 类中创建一个可以在不创建类实例的情况下调用的方法（如 Java 中的静态方法），但我一直遇到此错误：`error: expected unqualified-id before ‘.’ token`

这是我要编译的 .cpp 文件：

```
using namespace std;
#include <iostream>

class Method {
    public:
    void printStuff(void) {
        cout << "hahaha!";
    }
};

int main(void){
    Method.printStuff(); // this doesn't work as expected!
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-08T19:25:03.940

在 C++ 中是

```
Method::printStuff(); 
```

并且您必须将方法声明为`static`.

```
class Method{
    public:
    static void printStuff(void){
        cout << "hahaha!";
    }
}; 
```

`::`称为*范围解析运算符*。如果它在类实例上，您可以调用该方法`.`，但不需要该实例（它是静态的并且全部......）。

# android - 具有多个表的 ContentProvider，各种错误

> ID：12333757
> 
> 赞同：0
> 
> 时间：2012-09-08T19:24:24.483
> 
> 标签：android, android-contentprovider, android-contentresolver, android-sqlite, android-query

我已经为我的 3 表 sqlitedb 构建了一个 ContentProvider 作为前端。这是我的第一个 ContentProvider，我找不到关于如何构建它的好教程。架构实际上非常简单。

控制：_id、标题、文本、上次（时间）使用、电话号码

事件：_id、文本、电话号码、日期、类型

数字：_id、标题、电话号码

有几种错误，到目前为止，我最担心的是：

1) 我有两个带有 listFragments 的选项卡，tab1 加载 CONTROLS，tab2 加载 EVENTS。Tab1 将永远加载（使用 LOADER 使其成为异步任务），Tab2 将在 1 秒内显示空消息（按预期工作）。

2）当我尝试在 NUMBERS 表中插入一些东西时，我得到下面的 logcat（必须编辑由于 CHAR LIMIT）告诉我这些列不存在。（我已经在其他表中测试过插入，但我认为结果是一样的） ContentResolver.insert 方法将给出 -1 作为结果。

3）当我建立一个查询时，我通常使用：

```
String selection = MyContentProvider.Data.C_ID + "=";
String[] args = {+ String.valueOf(id)}; 
```

作为查询的 selection 和 selectionArgs。有了这个 ContentProvider 我必须使用：

```
String selection = MyContentProvider.Data.C_ID + "='" + String.valueOf(id) + "'"; 
```

作为 selection 和 null 作为 selectionArgs 或者我得到一个语法错误。

当我调用此方法时会出现这种情况：

```
 public void save(){
    name= etContactName.getText().toString();
    number= etPhoneNumber.getText().toString();
    String empty="";
    if(name.equals(null) || number.equals(null) || name.equals(empty) || number.equals(empty)){
        Toast.makeText(this, "Enter both name and number", Toast.LENGTH_SHORT).show();
    }else{
        ContentResolver cr= this.getContentResolver();
        ContentValues values= new ContentValues();

        values.put(MyContentProvider.Data.N_TITLE, name);
        values.put(MyContentProvider.Data.N_NUMBER, number);

        cr.insert(MyContentProvider.Data.CONTENT_URI_NUMBERS, values);
        NavUtils.navigateUpFromSameTask(this);
    }
} 
```

最后但并非最不重要的一点是，我的整个 MyContentProvider 类，我认为，其中存在错误：

```
public class MyContentProvider extends ContentProvider {

@SuppressWarnings("unused")
private static final String TAG = "SurvContentProvider";
private static final String DATABASE_NAME = "surv.db";
private static final int DATABASE_VERSION = 5;

public static class Data{
    private Data(){
    }

    //Content Types
    public static final String CONTENT_TYPE_EVENTS = 
            "vnd.android.cursor.dir/vnd.com.corsalini.survcontr.SurvContentProvider.EVENTS";
    public static final String CONTENT_TYPE_EVENTS_ID = 
            "vnd.android.cursor.item/vnd.com.corsalini.survcontr.SurvContentProvider.EVENTS";
    public static final String CONTENT_TYPE_CONTROLS = 
            "vnd.android.cursor.dir/vnd.com.corsalini.survcontr.SurvContentProvider.CONTROLS";
    public static final String CONTENT_TYPE_CONTROLS_ID = 
            "vnd.android.cursor.item/vnd.com.corsalini.survcontr.SurvContentProvider.CONTROLS";
    public static final String CONTENT_TYPE_NUMBERS = 
            "vnd.android.cursor.dir/vnd.com.corsalini.survcontr.SurvContentProvider.NUMBERS";
    public static final String CONTENT_TYPE_NUMBERS_ID = 
            "vnd.android.cursor.item/vnd.com.corsalini.survcontr.SurvContentProvider.NUMBERS";
    //Content URIs
    public static final Uri CONTENT_URI_EVENTS = Uri.parse("content://"
            + MyContentProvider.AUTHORITY + "/EVENTS");
    public static final Uri CONTENT_URI_CONTROLS = Uri.parse("content://"
            + MyContentProvider.AUTHORITY + "/CONTROLS");
    public static final Uri CONTENT_URI_NUMBERS = Uri.parse("content://"
            + MyContentProvider.AUTHORITY + "/NUMBERS");

    //Tables
    //EVENTS Table
    public static final String E_ID= "_id";
    public static final String E_TEXT= "ETEXT";
    public static final String E_NUMBER= "ENUMBER";
    public static final String E_TYPE= "ETYPE";
    public static final String E_DATE= "EDATE";
    //Type COSTANTS
    public static final int SENT_PROGRESS=0;
    public static final int SENT_COMPLETED=1;
    public static final int RECEIVED_UNREAD=2;
    public static final int RECEIVED_READ=3;
    //CONTROLS Table
    public static final String C_ID= "_id";
    public static final String C_TITLE= "CTITLE";
    public static final String C_TEXT= "CTEXT";
    public static final String C_LAST= "CLAST";
    public static final String C_NUMBER= "CNUMBER";
    //NUMBERS Table
    public static final String N_ID= "_id";
    public static final String N_TITLE= "NTITLE";
    public static final String N_NUMBER= "NNUMBER";
}

private static HashMap<String, String> eventsProjectionMap;
private static HashMap<String, String> controlsProjectionMap;
private static HashMap<String, String> numbersProjectionMap;

public static final String AUTHORITY = "com.corsalini.survcontr.SurvContentProvider";
private static final int EVENTS=1;
private static final int EVENTS_ID=10;
private static final int CONTROLS=2;
private static final int CONTROLS_ID=20;
private static final int NUMBERS=3;
private static final int NUMBERS_ID=30;

private static final String TABLE_NAME_EVENTS = "EVENTS";
private static final String TABLE_NAME_CONTROLS = "CONTROLS";
private static final String TABLE_NAME_NUMBERS = "NUMBERS";

public static final String CREATE_TABLE_EVENTS= "CREATE TABLE IF NOT EXISTS "
        + TABLE_NAME_EVENTS + " ("
        + Data.E_ID + " INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, "
        + Data.E_TEXT + " TEXT  NULL, "
        + Data.E_NUMBER + " TEXT  NULL, "
        + Data.E_TYPE + " INTEGER  NULL, "
        + Data.E_DATE + " TEXT  NULL);";

public static final String CREATE_TABLE_CONTROLS= "CREATE TABLE IF NOT EXISTS "
        + TABLE_NAME_CONTROLS + " ("
        + Data.C_ID + " INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, "
        + Data.C_TITLE + " TEXT  NULL, "
        + Data.C_TEXT + " TEXT  NULL, "
        + Data.C_NUMBER + " TEXT  NULL, "
        + Data.C_LAST + " TEXT  NULL);";

public static final String CREATE_TABLE_NUMBERS= "CREATE TABLE IF NOT EXISTS "
        + TABLE_NAME_NUMBERS + " ("
        + Data.N_ID + " INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, "
        + Data.N_TITLE + " TEXT  NULL, "
        + Data.N_NUMBER + " INTEGER  NULL);";
private static final UriMatcher sUriMatcher;
static{
    //UriMatcher
    sUriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    sUriMatcher.addURI(AUTHORITY, "EVENTS", EVENTS);
    sUriMatcher.addURI(AUTHORITY, "EVENTS/#", EVENTS_ID);
    sUriMatcher.addURI(AUTHORITY, "CONTROLS", CONTROLS);
    sUriMatcher.addURI(AUTHORITY, "CONTROLS/#", CONTROLS_ID);
    sUriMatcher.addURI(AUTHORITY, "NUMBERS", NUMBERS);
    sUriMatcher.addURI(AUTHORITY, "NUMBERS/#", NUMBERS_ID);
    //eventsProjectionMap
    eventsProjectionMap = new HashMap<String, String>();
    eventsProjectionMap.put(Data.E_ID, Data.E_ID);
    eventsProjectionMap.put(Data.E_TEXT, Data.E_TEXT);
    eventsProjectionMap.put(Data.E_NUMBER, Data.E_NUMBER);
    eventsProjectionMap.put(Data.E_TYPE, Data.E_TYPE);
    eventsProjectionMap.put(Data.E_DATE, Data.E_DATE);
    //controlsProjectionMap
    controlsProjectionMap = new HashMap<String, String>();
    controlsProjectionMap.put(Data.C_ID, Data.C_ID);
    controlsProjectionMap.put(Data.C_TITLE, Data.C_TITLE);
    controlsProjectionMap.put(Data.C_TEXT, Data.C_TEXT);
    controlsProjectionMap.put(Data.C_LAST, Data.C_LAST);
    controlsProjectionMap.put(Data.C_NUMBER, Data.C_NUMBER);
    //numbersProjectionMap
    numbersProjectionMap = new HashMap<String, String>();
    numbersProjectionMap.put(Data.N_ID, Data.N_ID);
    numbersProjectionMap.put(Data.N_TITLE, Data.N_TITLE);
    numbersProjectionMap.put(Data.N_NUMBER, Data.N_NUMBER);
}

private DatabaseHelper dbHelper;

private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {

        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_EVENTS);
        db.execSQL(CREATE_TABLE_CONTROLS);
        db.execSQL(CREATE_TABLE_NUMBERS);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME_EVENTS);
         db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME_CONTROLS);
         db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME_NUMBERS);

         db.execSQL(CREATE_TABLE_EVENTS);
            db.execSQL(CREATE_TABLE_CONTROLS);
            db.execSQL(CREATE_TABLE_NUMBERS);
    }
}

@Override
public int delete(Uri uri, String where, String[] whereArgs) {
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    int count=0;
    switch (sUriMatcher.match(uri)) {
    case EVENTS:
        break;
    case EVENTS_ID:
        where = where + "_id = " +      uri.getLastPathSegment();
        count = db.delete(TABLE_NAME_EVENTS, where, whereArgs);
        break;
    case CONTROLS:
        break;
    case CONTROLS_ID:
        where = where + "_id = " +      uri.getLastPathSegment();
        count = db.delete(TABLE_NAME_CONTROLS, where, whereArgs);
        break;
    case NUMBERS:
        break;
    case NUMBERS_ID:
        where = where + "_id = " +      uri.getLastPathSegment();
        count = db.delete(TABLE_NAME_NUMBERS, where, whereArgs);
        break;
    default:
        throw new IllegalArgumentException("Unknown URI " + uri);
    }

    getContext().getContentResolver().notifyChange(uri, null);
    return count;

}

@Override
public String getType(Uri uri) {

    switch (sUriMatcher.match(uri)) {
    case EVENTS:
        return Data.CONTENT_TYPE_EVENTS;
    case EVENTS_ID:
        return Data.CONTENT_TYPE_EVENTS_ID;
    case CONTROLS:
        return Data.CONTENT_TYPE_CONTROLS;
    case CONTROLS_ID:
        return Data.CONTENT_TYPE_CONTROLS_ID;
    case NUMBERS:
        return Data.CONTENT_TYPE_NUMBERS;
    case NUMBERS_ID:
        return Data.CONTENT_TYPE_NUMBERS_ID; 
    default:
        throw new IllegalArgumentException("Unknown URI " + uri);
    }

}

@Override
public Uri insert(Uri uri, ContentValues initialValues) {
    if (sUriMatcher.match(uri) != EVENTS && sUriMatcher.match(uri) != CONTROLS
            && sUriMatcher.match(uri) != NUMBERS) {
        throw new IllegalArgumentException("Unknown URI " + uri);
    }
    else 
    {
        ContentValues values;
        if (initialValues != null) {
            values = new ContentValues(initialValues);
        } else {
            values = new ContentValues();
        }

        SQLiteDatabase db = dbHelper.getWritableDatabase();
        long rowId=0;
        switch (sUriMatcher.match(uri)) {
        case EVENTS:
            rowId = db.insert(TABLE_NAME_EVENTS, Data.E_TEXT, values);
            break;
        case CONTROLS:
            rowId = db.insert(TABLE_NAME_CONTROLS, Data.C_TEXT, values);
            break;
        case NUMBERS:
            rowId = db.insert(TABLE_NAME_EVENTS, Data.N_TITLE, values);
            break;
        }
        Log.d("INSERT", "ROWID= "+rowId);

        if (rowId > 0) {
            Log.d("INSERT", "ROWID= "+rowId +" ENTRATO");   
            Uri noteUri=null;
            switch (sUriMatcher.match(uri)) {
            case EVENTS:
                noteUri = ContentUris.withAppendedId(Data.CONTENT_URI_EVENTS, rowId);
                break;
            case CONTROLS:
                noteUri = ContentUris.withAppendedId(Data.CONTENT_URI_CONTROLS, rowId);
                break;
            case NUMBERS:
                noteUri = ContentUris.withAppendedId(Data.CONTENT_URI_NUMBERS, rowId);
                break;
            }
            getContext().getContentResolver().notifyChange(noteUri, null);
            return noteUri;
        }else{

            throw new SQLException("Failed to insert row into " + uri);
        }
    }
}

@Override
public boolean onCreate() {
    dbHelper = new DatabaseHelper(getContext());
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    switch (sUriMatcher.match(uri)) {   

    case EVENTS:
        qb.setTables(TABLE_NAME_EVENTS);
        qb.setProjectionMap(eventsProjectionMap);
        break;
    case EVENTS_ID:
        qb.setTables(TABLE_NAME_EVENTS);
        qb.setProjectionMap(eventsProjectionMap);
        selection = selection + "_id =?s " + uri.getLastPathSegment();
        break;
    case CONTROLS:
        qb.setTables(TABLE_NAME_CONTROLS);
        qb.setProjectionMap(controlsProjectionMap);
        break;
    case CONTROLS_ID:
        qb.setTables(TABLE_NAME_CONTROLS);
        qb.setProjectionMap(controlsProjectionMap);
        selection = selection + "_id =?s " + uri.getLastPathSegment();
        break;
    case NUMBERS:
        qb.setTables(TABLE_NAME_NUMBERS);
        qb.setProjectionMap(numbersProjectionMap);
        break;
    case NUMBERS_ID:
        qb.setTables(TABLE_NAME_NUMBERS);
        qb.setProjectionMap(numbersProjectionMap);
        selection = selection + "_id =?s " + uri.getLastPathSegment();
        break;
    default:
        throw new IllegalArgumentException("Unknown URI " + uri);
    }
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    Cursor c = qb.query(db, projection, selection, selectionArgs, null, null, sortOrder);
    c.setNotificationUri(getContext().getContentResolver(), uri);
    return c;
}

@Override
public int update(Uri uri, ContentValues values, String where, String[] whereArgs) {
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    int count;
    switch (sUriMatcher.match(uri)) {
    case EVENTS:
        count = db.update(TABLE_NAME_EVENTS, values, where, whereArgs);
        break;
    case CONTROLS:
        count = db.update(TABLE_NAME_CONTROLS, values, where, whereArgs);
        break;
    case NUMBERS:
        count = db.update(TABLE_NAME_NUMBERS, values, where, whereArgs);
        break;
    default:
        throw new IllegalArgumentException("Unknown URI " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return count;
} 
```

}

编辑：片段控制：

```
public class FragControls extends ListFragment implements  LoaderManager.LoaderCallbacks<Cursor>{

private static final int CONTROLS_LOADER = 0x01;

SimpleCursorAdapter mAdapter;
ContentResolver resolver;
String mCurFilter;
DbOp db;
private String numberSelected = "0";

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    resolver= getActivity().getContentResolver();
    // Give some text to display if there is no data.  In a real
    // application this would come from a resource.
    setEmptyText(this.getString(R.string.add_control)); 

    // We have a menu item to show in action bar.
    setHasOptionsMenu(true);

    // Create an empty adapter we will use to display the loaded data.
    mAdapter = new SimpleCursorAdapter(getActivity(),
            android.R.layout.simple_list_item_2, null,
            new String[] { MyContentProvider.Data.C_TITLE, MyContentProvider.Data.C_LAST },
            new int[] { android.R.id.text1, android.R.id.text2 },
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(mAdapter);

    // Start out with a progress indicator.
    setListShown(false);

    // Prepare the loader.  Either re-connect with an existing one,
    // or start a new one.
    getActivity().getSupportLoaderManager().initLoader(CONTROLS_LOADER, null, this);
    db= new DbOp();
    getActivity().registerForContextMenu(getListView());
}

public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_controls, menu);      
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case R.id.menu_add_control:
        Intent addContrInt = new Intent(getActivity(), ActNewControl.class);
        addContrInt.putExtra("contrNumber", numberSelected);
        startActivity(addContrInt);
        break;
    }
    return super.onOptionsItemSelected(item);
}

@Override public void onListItemClick(ListView l, View v, int position, long id) {

    String selection= Data.C_ID+" = ?";
    String[] args={String.valueOf(id)};
    Cursor c=resolver.query(Data.CONTENT_URI_CONTROLS, null, selection, args, null);
    c.moveToFirst();
    String text = c.getString(c.getColumnIndex(Data.C_TEXT));
    String number = c.getString(c.getColumnIndex(Data.C_NUMBER));
    c.close();
    sendSMS(number, text);

    Log.i("FragmentComplexList", "Item clicked: " + id);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    android.view.MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.contr_context_menu, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {

    AdapterView.AdapterContextMenuInfo info;
    try {
        info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
    } catch (ClassCastException e) {
        Log.e("", "bad menuInfo", e);
        return false;
    }
    long id = getListAdapter().getItemId(info.position);
    switch (item.getItemId()){
    case R.id.cm_delete:
        String selection= MyContentProvider.Data.C_ID +"='"+ id+"'";
        resolver.delete( MyContentProvider.Data.CONTENT_URI_CONTROLS,
                selection, null);
        break;
    case R.id.cm_edit:
        Intent editContrInt=  new Intent(getActivity(), ActNewControl.class);
        editContrInt.putExtra("contrNumber", numberSelected);
        editContrInt.putExtra("contrId", id);
        startActivity(editContrInt);
        break;
    }
    Log.d("", "id = " + id);
    Toast.makeText(getActivity(), "id = " + id, Toast.LENGTH_SHORT).show();
    return true;
}

static final String[] SUMMARY_PROJECTION = new String[] {
    MyContentProvider.Data.C_ID,
    MyContentProvider.Data.C_TITLE,
    MyContentProvider.Data.C_TEXT,
    MyContentProvider.Data.C_LAST,
    MyContentProvider.Data.C_NUMBER,

};

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection= MyContentProvider.Data.C_NUMBER +"=?";
    String[] selectionArgs= {numberSelected};

    return new CursorLoader(getActivity(),  MyContentProvider.Data.CONTENT_URI_CONTROLS,
            SUMMARY_PROJECTION, selection, selectionArgs,
            null);
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {

    mAdapter.swapCursor(data);

    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
}

public void onLoaderReset(Loader<Cursor> loader) {

    mAdapter.swapCursor(null);
}

public void setNumberSelected(String number){
    numberSelected = number;
    getActivity().getSupportLoaderManager().restartLoader(CONTROLS_LOADER, null, this);
}} 
```

片段事件：

```
public class FragEvents extends ListFragment implements  LoaderManager.LoaderCallbacks<Cursor>{

@Override
public void onPause() {
    db.allRead(resolver);
    super.onPause();

}

private static final int EVENTS_LOADER = 0x02;
private String numberSelected="0";
ContentResolver resolver;
// This is the Adapter being used to display the list's data.
SimpleCursorAdapter mAdapter;

// If non-null, this is the current filter the user has provided.
String mCurFilter;
DbOp db;

@Override public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Give some text to display if there is no data.  In a real
    // application this would come from a resource.
    setEmptyText(this.getString(R.string.perform_event)); 

    // We have a menu item to show in action bar.
    setHasOptionsMenu(true);

    // Create an empty adapter we will use to display the loaded data.
    mAdapter = new EventsAdapter(getActivity(),
            android.R.layout.simple_list_item_2, null,
            new String[] { MyContentProvider.Data.E_TEXT, MyContentProvider.Data.E_DATE, 
        MyContentProvider.Data.E_NUMBER, MyContentProvider.Data.E_TYPE  },
        new int[] { android.R.id.text1, android.R.id.text2 },
        CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(mAdapter);

    // Start out with a progress indicator.
    setListShown(false);

    // Prepare the loader.  Either re-connect with an existing one,
    // or start a new one.
    getActivity().getSupportLoaderManager().initLoader(EVENTS_LOADER, null, this);
    resolver = getActivity().getContentResolver();
    db= new DbOp();
}

public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_events, menu);  
}

@Override public void onListItemClick(ListView l, View v, int position, long id) {
    //TODO Insert desired behavior here.
    Log.i("FragmentComplexList", "Item clicked: " + id);
}
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    android.view.MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.events_context_menu, menu);
}

@SuppressWarnings("deprecation")
@Override
public boolean onContextItemSelected(MenuItem item) {

    AdapterView.AdapterContextMenuInfo info;
    try {
        info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
    } catch (ClassCastException e) {
        Log.e("", "bad menuInfo", e);
        return false;
    }
    long id = getListAdapter().getItemId(info.position);
    switch (item.getItemId()){
    case R.id.cm_delete:
        String selection= MyContentProvider.Data.E_ID +"='"+ id+"'";
        resolver.delete( MyContentProvider.Data.CONTENT_URI_EVENTS,
                selection, null);
        break;
    case R.id.cm_copy_text:
        //TODO copiare testo negli appunti
        Cursor curs= mAdapter.getCursor();
        curs.moveToPosition(info.position);
        String text1 = curs.getString(curs.getColumnIndex(MyContentProvider.Data.E_TEXT));
        curs.close();
        int sdk = android.os.Build.VERSION.SDK_INT;
        if(sdk < android.os.Build.VERSION_CODES.HONEYCOMB) {
            android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE);
            clipboard.setText(text1);
        } else {
            android.content.ClipboardManager clipboard = (android.content.ClipboardManager) getActivity().getSystemService(Context.CLIPBOARD_SERVICE); 
            android.content.ClipData clip = android.content.ClipData.newPlainText("event text",text1);
            clipboard.setPrimaryClip(clip);
        }
        break;
    case R.id.cm_share:
        //TODO condividere testo
        Cursor cur= mAdapter.getCursor();
        cur.moveToPosition(info.position);
        String text = cur.getString(cur.getColumnIndex(MyContentProvider.Data.E_TEXT));
        cur.close();
        Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");
        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, text);
        startActivity(Intent.createChooser(sharingIntent, "Share using"));
        break;
    }
    Log.d("", "id = " + id);
    Toast.makeText(getActivity(), "id = " + id, Toast.LENGTH_SHORT).show();
    return true;
}
// These are the Contacts rows that we will retrieve.
static final String[] SUMMARY_PROJECTION = new String[] {
    MyContentProvider.Data.E_ID,
    MyContentProvider.Data.E_DATE,
    MyContentProvider.Data.E_NUMBER,
    MyContentProvider.Data.E_TEXT,
    MyContentProvider.Data.E_TYPE,

};

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection= MyContentProvider.Data.E_NUMBER +" = ?";
    String[] selectionArgs= {numberSelected};

    return new CursorLoader(getActivity(),  MyContentProvider.Data.CONTENT_URI_EVENTS,
            SUMMARY_PROJECTION, selection, selectionArgs,
            Data.E_ID + " DESC");
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    // Swap the new cursor in.  (The framework will take care of closing the
    // old cursor once we return.)
    mAdapter.swapCursor(data);

    // The list should now be shown.
    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
}

public void onLoaderReset(Loader<Cursor> loader) {
    // This is called when the last Cursor provided to onLoadFinished()
    // above is about to be closed.  We need to make sure we are no
    // longer using it.
    mAdapter.swapCursor(null);
}

public void setNumberSelected(String number){
    numberSelected = number;
    getActivity().getSupportLoaderManager().restartLoader(EVENTS_LOADER, null, this);
} 
```

}

边注：

那些 2 frag 不会添加 menuitem，我认为这是 ActionBarSherlock 错误，但如果我扩展 SherlokListFragment 我会收到错误，因为 onOptionsItemSelected() 是最终的，我无法覆盖它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:36:16.970

1 你可能想更好地解释问题是什么，我不明白。

2 我认为，而不是：

```
String selection = MyContentProvider.Data.C_ID + "=";
String[] args = {+ String.valueOf(id)}; // what is with the + sign?? 
```

你要这个：

```
String selection = MyContentProvider.Data.C_ID + "= ?"; // the ? is the placeholder
String[] args = {String.valueOf(id)}; 
```

3 尝试卸载应用程序，然后重新安装并再次运行。同样对于表，您在的插入方法`NUMBERS`中有这一行：`ContentProvider`

```
rowId = db.insert(TABLE_NAME_EVENTS, Data.N_TITLE, values); 
```

你确定不是：

```
rowId = db.insert(TABLE_NAME_NUMBERS, Data.N_TITLE, values); 
```

?

# ruby-on-rails - 如何在rails中使用by_group实现belongs_to

> ID：12333761
> 
> 赞同：0
> 
> 时间：2012-09-08T19:24:38.563
> 
> 标签：ruby-on-rails, database

我想知道如何在我的 rails 应用程序中设置模型。我知道我需要使用某种嵌套关联，但不确定正确的规范应该是什么。可以在下面找到问题的描述，任何建议将不胜感激。

我在一家拥有许多不同公司的私募股权公司工作。我们希望构建一个 Web 应用程序来跟踪整个产品组合的购买情况。更具体地说，我们想了解我们在特定供应商和特定类别供应商上的总支出和在每家公司的支出。

对此进行建模似乎很简单。您创建一个公司模型、一个类别模型、一个供应商模型（其中每个供应商属于一个类别）和一个交易模型（其中每个交易属于特定供应商和特定公司）。但是，我不知道如何处理要求中的皱纹。我们希望允许不同的公司对同一个供应商进行不同的分类，但也要对每个供应商都有一个标准的分类。因此，一家公司可以将主食归类为办公设备，另一家公司可能将其归类为 SGA 办公用品，但我们将保持一个标准分类，始终将主食与办公用品相对应。

设置它的最佳方法是什么？我在想我会创建 2 个类别模型，一个称为 stanard_category 和 :has_many => 供应商。另一个名为 company_category 的 :has_many => 供应商按公司。这是正确的方法吗？如果是这样，我如何指定 company_category 上的 :has_many 关系特定于每个公司？这是我想要使用嵌套路由的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:53:18.893

这是一个适合您需求的示例结构：

```
class Company
  has_many   :company_categories
end

class CompanyCategory
  belongs_to :company
  has_and_belongs_to_many :vendors
end

class StandardCategory
  has_many   :vendors
end

class Vendor
  has_and_belongs_to_many :company_categories
  belongs_to :standard_category
end 
```

您是否使用嵌套路由取决于您的应用程序的具体情况。

# google-apps-script - 将 UiApp 函数包装在库中

> ID：12333762
> 
> 赞同：0
> 
> 时间：2012-09-08T19:24:49.790
> 
> 标签：google-apps-script

我正在使用某种包装函数向 UiApp 添加小部件，如下面的示例

```
function newButton(text, handler, callBack) {
  var app = UiApp.getActiveApplication();
  return app.createButton(text).addClickHandler(app.createServerClickHandler(handler).addCallbackElement(callBack));
} 
```

*   在同一个脚本中使用时它工作正常，如下所示

    panel.add(newButton("Submit", "myHandler", panel));

*   但是当在库（例如 myLib）中包含 newButton 函数并且它被称为 myLib.newButton 时，我会收到一个错误：“遇到错误：未知宏 myLib.myHandler”

    panel.add(myLib.newButton("Submit", "myHandler", panel));

有什么方法可以避免这个问题，同时将 myHandler 保留在当前脚本中（而不是 myLib 中）？谢谢，福斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:00:22.230

是的，它可以。在您当前的脚本中（您在其中导入了对库的引用）创建；

```
function myLib.myHandler(){
} 
```

随着您的处理程序（字符串）不断传递名称“myHandler”。上述函数将由您的库脚本中创建的按钮调用。

似乎应用程序脚本正在使用此命名空间结构来避免名称冲突。

您应该记住，谷歌可能出于某种原因故意没有记录。也许这种当前的结构将来可能会改变。或者也许我只是偏执;-)

# client-server - 在公共程序中免费使用 SSL\TLS

> ID：12333763
> 
> 赞同：-2
> 
> 时间：2012-09-08T19:25:00.667
> 
> 标签：client-server, ssl

我真的需要在我的 Socket Server\Client 通信中使用 SSL，但是支付认证费用对我来说太贵了 :( 我付不起认证费用

[注意]：我的程序将公开发布，所以我想保护我的程序与服务器的通信

问题是：是否有可能以有效的 [没有安全风险] 方式免费使用 SSL\TLS，因为我买不起付费证书......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:46:26.707

简短的回答：是的。

长答案：您从 CA（证书颁发机构）购买的东西通常不是证书。通常，您创建自己的证书，并向 CA 索取“签名”，然后将其提供给客户端（浏览器等），以表明您的证书受到该 CA 的信任。

浏览器（和其他软件）通常有一个他们信任的 CA 的内部列表。这就是人们通常购买签名的原因 - 让当前部署的软件将自己的证书识别为有效。但是，您不需要获得这样的签名。您也可以创建您的证书（通常称为“自签名”证书），并要求最终用户将其作为受信任的软件介绍给软件，或者将其分发到软件本身中。

有[很多](http://www.akadia.com/services/ssh_test_certificate.html) [关于如何在 Web 上创建自签名证书的](https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate.html) [说明](http://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html)，通常使用 openSSL CLI，还有 IIS 或 Java。

至于如何在软件上部署这样的证书，最好再问一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:29:11.487

> 是否可以有效地免费使用 SSL\TLS，因为我买不起付费证书...？

是的。从受信任的 CA 购买证书，无需任何手动操作（例如 Verisign）即可让您的服务器受到**所有浏览器的信任。**
如果您同时拥有客户端和服务器并且使用 SSL，您可以创建自己的证书（或获得免费证书）并将它们*安装*到所有受信任的客户端（在离线过程中）。
现在唯一与安全性相关的部分是密钥大小。至少应为 2048 位。
但是有一个问题。如果您创建自己的证书，则需要注意设置的扩展名，以免在部署期间出现任何问题。CA 知道如何创建`X509v3`兼容的证书以被所有浏览器（库）接受而不会出现任何问题

# jsf - 启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel。

> ID：12333764
> 
> 赞同：36
> 
> 时间：2012-09-08T19:25:01.107
> 
> 标签：jsf, primefaces, facelets

我正在尝试创建具有多行选择的 DataTable，但出现错误，这是教程[http://www.primefaces.org/showcase/ui/datatableRowSelectionMultiple.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionMultiple.jsf)的链接：

这是我的xhtml：

```
 <p:dataTable border="1" value="#{projectAdminisrationMB.projectNoUsersList}" 
                     var="userObj"
                     selection="#  
         {projectAdminisrationMB.selectedUsers}"
 selectionMode="multiple" rowIndexVar="rowIndex"binding="#{table2}">
<p:column id="column3">
<f:facet name="header">
<h:outputText value=" user "></h:outputText>
</f:facet>

      <h:outputText value="#{userObj.name}"/>  

                            /
  <h:outputText value="#{userObj.lastName}"></h:outputText>

  &nbsp;
   <h:outputText value="#{userObj.firstName}"></h:outputText>
  </p:column>

    <f:facet name="footer">  
     <p:commandButton id="addProjectUser" value=" Add " onclick="dlg1.show()" />  
      <p:commandButton id="deleteProjectUser" value=" Delete " />  

    </f:facet> 

</p:dataTable> 
```

托管豆：

```
 @ManagedBean
 @SessionScoped
 public class ProjectAdminisrationMB implements Serializable {

private static final long serialVersionUID = 1L;

private String projectName;
private List <User> projectUsersList;
private List<User> projectNoUsersList;
private List<User> selectedUsers;

private String projectAdmin;

public ProjectAdminisrationMB() {
    super();
    AdministrationProjectFinal administrationProjectFinal =new    
             AdministrationProjectFinal();
    this.projectUsersList=administrationProjectFinal.getUserList();
    this.projectNoUsersList=administrationProjectFinal.getNotUserList();
}

public String getProjectName() {
    return projectName;
}

public void setProjectName(String projectName) {
    this.projectName = projectName;
}

public List<User> getProjectUsersList() {
    return projectUsersList;
}

public void setProjectUsersList(List<User> projectUsersList) {
    this.projectUsersList = projectUsersList;
}

public String getProjectAdmin() {
    return projectAdmin;
}

public void setProjectAdmin(String projectAdmin) {
    this.projectAdmin = projectAdmin;
}

public List<User> getProjectNoUsersList() {
    return projectNoUsersList;
}

public void setProjectNoUsersList(List<User> projectNoUsersList) {
    this.projectNoUsersList = projectNoUsersList;
}

public List<User> getSelectedUsers() {
    return selectedUsers;
}

public void setSelectedUsers(List<User> selectedUsers) {
    this.selectedUsers = selectedUsers;
}

 } 
```

我收到此错误：

```
 javax.faces.FacesException: DataModel must implement     
  org.primefaces.model.SelectableDataModel when selection is enabled..... 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-08T19:42:26.433

只需将此属性 rowKey 添加到数据表标签：

```
<p:dataTable border="1" value="#{projectAdminisrationMB.projectNoUsersList}" 
 var="userObj"
 rowKey="#{userObj.name}"selection="#{projectAdminisrationMB.selectedUsers}"
 selectionMode="multiple" rowIndexVar="rowIndex"
 binding="#{table2}"> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-21T14:28:32.897

如果您尝试将新项目添加到基础列表并忘记为该新项目的 rowKey 分配值，则可能会出现此错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-09T07:27:26.033

或者，`rowKey`您可以将数据包装在真正实现的自定义模型中`org.primefaces.model.SelectableDataModel`。这很有帮助，如果

*   您所有的类都具有相同类型的`@Id`（例如 a `long`）并且可以实现相同的接口（例如`EjbWithId`）
*   您想为您的数据添加额外的功能，这些功能不是特定于域且不属于例如`User`.

界面可能是这样的：

```
public interface EjbWithId
{
  public long getId();
  public void setId(long id);
} 
```

`SelectableDataModel`然后可以使用所有类的通用实现：

```
public class PrimefacesEjbIdDataModel <T extends EjbWithId>
       extends ListDataModel<T> implements SelectableDataModel<T>
{    
  public PrimefacesEjbIdDataModel(List<T> data)
  {  
    super(data);
  }  

  @Override public T getRowData(String rowKey)
  {  
    List<T> list = (List<T>) getWrappedData();  

    for(T ejb : list)
    {  
      if(ejb.getId()==(new Integer(rowKey))){return ejb;}  
    }
    return null;  
  }  

  @Override public Object getRowKey(T item) {return item.getId();}
} 
```

在你的`@ManagedBean`：

```
private PrimefacesEjbIdDataModel<User> dmUser; //+getter
dmUser = new PrimefacesEjbIdDataModel<User>(administrationProjectFinal.getUserList()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-06T15:10:13.953

首先检查您是否添加了 **rowKey="#{userObj.id}"**

那么您需要在 xhtml 中的数据表的***filteredValue属性中设置数据表 List ，而不是******value***。

# hadoop - 了解 Hadoop VIntWritable 压缩

> ID：12333766
> 
> 赞同：1
> 
> 时间：2012-09-08T19:25:05.080
> 
> 标签：hadoop, io, variable-length

我知道这有点丢人，但我不了解 VIntWritable 和 VLongWritable 中的压缩技术。有人可以详细说明 WritableUtils.java 中的示例
代码片段吗

```
 public static void writeVLong(DataOutput stream, long i) throws IOException {
    if (i >= -112 && i <= 127) {
      stream.writeByte((byte)i);
      return;
    }

    int len = -112;
    if (i < 0) {
      i ^= -1L; // take one's complement'
      len = -120;
    }

    long tmp = i;
    while (tmp != 0) {
      tmp = tmp >> 8;
      len--;
    }

    stream.writeByte((byte)len);

    len = (len < -120) ? -(len + 120) : -(len + 112);

    for (int idx = len; idx != 0; idx--) {
      int shiftbits = (idx - 1) * 8;
      long mask = 0xFFL << shiftbits;
      stream.writeByte((byte)((i & mask) >> shiftbits));
    }
  } 
```

# git - 在 GIT 中做修补程序

> ID：12333768
> 
> 赞同：0
> 
> 时间：2012-09-08T19:25:10.357
> 
> 标签：git

如果我目前正在开发一个名为“my-new-feature-branch”的新功能分支，其中包含未提交的更改，并且需要在 master（修补程序）上修复某些内容，我应该使用哪些命令来执行从“my-new-feature-branch”开始的修补程序-新功能分支”？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:31:19.020

您可以将未提交的更改存储在 my-new-feature 分支中

```
$ git stash 
```

切换到主分支

```
$ git checkout master 
```

进行修补程序更改，提交它们。然后切换回 my-new-feature 分支

```
$ git checkout my-new-feature 
```

并取消您之前所做的代码更改

```
$ git stash pop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:54:46.913

As an alternative:

```
git add -A
git commit -m "unfinished work"
git checkout master
....
git checkout my-new-feature
git reset HEAD~1 
```

# android - 创建主菜单时遇到问题

> ID：12333769
> 
> 赞同：0
> 
> 时间：2012-09-08T19:25:13.767
> 
> 标签：android, user-interface, interface, menu

我正在学习如何制作安卓应用程序，下面是我用来创建主菜单的代码。问题是它一直说“主菜单无法解决或不是一个字段”。

```
package chapter.seven;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuInflater;

public class UserInterface extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_interface);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:30:38.880

1.  确保您确实定义了一个`mainmenu`包含正确菜单定义的 XML 资源文件。
2.  确保您的布局和 XML 资源文件中没有错误。这可能会阻止正确生成 R 文件。
3.  刷新/清理项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:51:51.513

In addition to what Paul said, import the application resource file if the class is not in the same package as the app's declared package:

```
import chapter.seven.R; 
```

# mongodb - MongoDB查询数据库时间

> ID：12333771
> 
> 赞同：4
> 
> 时间：2012-09-08T19:25:29.483
> 
> 标签：mongodb

有没有办法以我可以检索时间的方式查询 mongodb？

在放入数据之前，我经常检查 mongodb 服务器的运行时间。我需要从客户端的角度知道数据库服务器上的时间。

我正在使用 C# .NET 包装器，但如果有一个查询可以在任何平台上执行此操作，那也很好。我将如何获得数据库时间？

我知道通过同步时间显然还有其他方法可以做到这一点。但是我需要使用这个选项，所以不能篡改当地时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:43:26.737

`db.hostInfo()`返回一个对象，其中`system.currentTime`是服务器主机上的当前时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:38:34.547

我不确定您所说的“从客户的角度来看”是什么意思。但是，这可能会有所帮助：

```
>> db.serverStatus() 
```

返回一个大对象，其中包括时间。显然（尚未对此进行测试），对于 java 驱动程序，您可以使用 Db.command("serverStatus") 获得它，所以我可以想象在 C# 中有类似的工作。

参考：

[服务器状态的 Mongo 文档](http://docs.mongodb.org/manual/reference/server-status/)

[Java 中有关 serverStatus 的已回答问题](https://stackoverflow.com/questions/5310212/getting-mongostat-through-mongodb-java-driver)

# tabs - 通过 chrome.tabs.create 打开多个标签的问题

> ID：12333773
> 
> 赞同：2
> 
> 时间：2012-09-08T19:25:45.020
> 
> 标签：tabs, google-chrome-extension, createprocess

我在使用 chrome.tabs.create 方法打开多个标签时遇到问题。我正在尝试使用 chrome.tabs.create 循环打开一些 9 个选项卡，尽管打开的选项卡数量仅限于 4 个。看起来循环在标签实际创建之前很早就结束了。

假设我能够在 links_array 变量中打开所有链接。我应该如何创建一个允许打开每个选项卡的 JavaScript 同步回调。

我可能猜错了确切的问题，但很高兴知道，如果我没有发现这个谜题中缺少的东西。

> **编辑**：Chrome 扩展程序被限制在一次点击中打开不超过 3 或 4 个选项卡（通过许多其他问题发现），但 Chrome 扩展程序开发人员没有关于这种情况的官方声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:28:48.817

也许您必须在 background.js 中为[chrome.tabs.onCreated](http://developer.chrome.com/extensions/tabs.html#event-onCreated)事件添加侦听器，并在回调函数中为下一个选项卡调用 create 方法？但要注意无限循环。

# c# - 精灵的位置

> ID：12333778
> 
> 赞同：0
> 
> 时间：2012-09-08T19:26:34.640
> 
> 标签：c#, xna

```
 Vector2 drawPos = (-screenPosition);
        drawPos.X *= (float)device.DisplayMode.Width;
        drawPos.Y *= (float)device.DisplayMode.Height;

        spriteBatch.Draw(
            texture, 
            drawPos, 
            getRectangle(), 
            Color.White, 
            rotation, 
            getOrigin(), 
            1.0f / zoom, 
            SpriteEffects.None, 
            0); 
```

我有一个 drawPos 本质上是 0..1 并将其与显示宽度和高度相乘。screenposition 是通过拖动屏幕获得的。对于其他元素，图元，位置是正确的，并且与输入一起被拖动。然而，当绘制一个精灵时，精灵移动得很快，比输入更快，产生了一种视差效果，这不是我想要的。

我以某种方式感觉到我使用的参数错误，并且 spriteBatch.Draw(..) 不需要像素坐标..

宽度和高度由纹理加载器获得。

```
 public Vector2 getOrigin()
    {
        return new Vector2(width / 2, height / 2);
    }

    public Rectangle getRectangle()
    {
        return new Rectangle(
            0,
            0,
            width,
            height);
    } 
```

另外，我正在为 Windows Phone 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:34:18.417

该`getRectangle()`方法基本上是无用的，您正在指定一个与纹理大小相同的源矩形 -`null`改为使用（除非您刚刚为我们简化了代码）。

screenPosition 是如何定义的？我不明白你为什么要把它乘以-1。您还使用窗口所在的屏幕来获取宽度/高度，`device.DisplayMode`这是您应该避免的，因为这仅在您的窗口与屏幕大小相同时才有效。

尝试将精灵绘制为`Vector2.Zero`没有原点，并`sourceRectangle`设置为`null`。慢慢添加其他参数，看看错误发生在哪里。如果没有更多信息，真的不能说太多！

```
spriteBatch.Draw(
    texture,
    Vector2.Zero,
    null,
    Color.White,
    0,
    Vector2.Zero,
    1,
    SpriteEffects.None,
    1); 
```

这是我用来确保精灵实际正确显示的方法。

# iphone - MediaPlayer.framework：如何将 MPMusicRepeatModeDefault “翻译”为实际模式？

> ID：12333779
> 
> 赞同：11
> 
> 时间：2012-09-08T19:26:37.173
> 
> 标签：iphone, objective-c, ipad, mpmediaplayercontroller

正如Apple文档中所述：

```
enum {
   MPMusicRepeatModeDefault,
   MPMusicRepeatModeNone,
   MPMusicRepeatModeOne,
   MPMusicRepeatModeAll
};
typedef NSInteger MPMusicRepeatMode; 
```

然而，`MPMusicRepeatModeDefault`被描述为*用户的首选重复模式*。由于我正在编写音乐播放器，因此我每次都需要知道当前的重复模式是什么，以及当返回时，“实际”模式是什么：

*   `MPMusicRepeatModeNone`
*   `MPMusicRepeatModeOne`
*   `MPMusicRepeatModeAll`

应该被选中？还是没有办法得到这样的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:38:03.480

我的理解是`MPMusicRepeatModeDefault`仅用于实例化您自己的播放器，如此[处](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingMediaPlayback/UsingMediaPlayback.html#//apple_ref/doc/uid/TP40008765-CH100-SW1)所述。

```
MPMusicPlayerController* appMusicPlayer = [MPMusicPlayerController applicationMusicPlayer];

// Use whatever the user has set in their iPod settings
// Omitting this line has no real effect because deferring to the
// user mode is the default setting for new players
[appMusicPlayer setRepeatMode: MPMusicRepeatModeDefault]; 
```

如果您想知道该默认设置实际上是什么，您应该能够从[iPodMusicPlayer 实例](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html#//apple_ref/occ/clm/MPMusicPlayerController/iPodMusicPlayer)中获取它：

```
MPMusicPlayerController* iPodMusicPlayer =
    [MPMusicPlayerController iPodMusicPlayer];

MPMusicRepeatMode theDefaultMode = [iPodMusicPlayer repeatMode]; 
```

# arrays - Excel：在两列（A 和 B）之间配对，并在 C 和 D 列中显示未配对的值

> ID：12333780
> 
> 赞同：0
> 
> 时间：2012-09-08T19:26:41.177
> 
> 标签：arrays, excel, excel-formula, duplicate-removal

Excel爱好者：

在搜索两列之间的比较时显示了许多结果（即：使用 VLOOKUP），但到目前为止我所看到的结果似乎都没有以这种特殊方式满足我的需要：

A 列具有以下值：Z、Q、V、V、T、T

B 列具有以下值：V、T、T、M

C 列将显示 Z、Q、V（这里我们有一个 V，因为一组“V”配对，留下一个未配对的“V”）

D 列将显示 M

到目前为止，我看到的其他示例假设 C 列中没有“V”，因为它已经在 A 列中找到，无论它出现了多少次。

基本上，相反，我需要两列之间的值配对并删除，但留下任何“奇数”。

我一直无法使用公式来解决这个问题 - 我首先对所有内容进行排序，然后将 A 列或 B 列中的单元格向下移动，直到 A 列和 B 列有匹配的值或每行中有一个奇数

提前致谢

编辑：另一种说法：我想从 A 列和 B 列中“消除”成对的值，直到所有对都被删除，在 A 列和 B 列中留下剩余的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:59:24.997

让我们假设允许 C/D 中的答案与 A/B 中不匹配的原始答案位于同一行。

这是C1的公式，复制并粘贴下来：

```
=REPT(A1,
 MAX(0,MIN(1,COUNTIF($A:$A,A1)
 -COUNTIF($B:$B,A1)
 -IF(ROW()=1,0,COUNTIF(OFFSET($C$1,0,0,ROW()-1,1),A1))
 ))) 
```

*基本上，如果*我们在 B 中没有找到匹配的值*并且*到目前为止我们还没有在 C 中考虑它，我们希望在 A 列中“重复”相应的值。

那里有确保 OFFSET() 不引用零高度范围的逻辑，并且我们在 C 的每一行上重复 0 或 1 次，不多也不少。

D1 的公式类似，但反过来将 B 与 A 进行比较：

```
=REPT(B1,
 MAX(0,MIN(1,COUNTIF($B:$B,B1)
 -COUNTIF($A:$A,B1)
 -IF(ROW()=1,0,COUNTIF(OFFSET($D$1,0,0,ROW()-1,1),B1))
 ))) 
```

# android - 使用数组中的特定条目填充微调器

> ID：12333781
> 
> 赞同：0
> 
> 时间：2012-09-08T19:27:17.420
> 
> 标签：android, arraylist, spinner, android-arrayadapter

我正在开发适用于 Android 的应用程序。为此，我正在开展一项活动，您可以在其中选择您的国家，然后在该国家/地区选择一个地点。我有一个微调器，其中包含所有可用国家/地区的列表。现在，我想要它做的是获取已选择的国家/地区，然后过滤我拥有的以已选择的国家/地区开头的项目的地点列表。然后它应该将所选国家/地区的点放入不同的微调器中。为清楚起见，国家列表只是国家列表，地点列表如下所示：

*   国家 1 - 地点 1

*   国家 1 - 地点 2

*   国家 2 - 地点 1

*   Country2 - Spot2

等等。

这就是我认为代码应该像这样工作：

*   从微调器 1 中获取选定的国家/地区。
*   制作一个包含斑点的新 ArrayList。
*   制作第二个空的 ArrayList。
*   对于包含点的 ArrayList 的每个条目，检查它是否以所选国家/地区开头。
*   如果是这样，请将其添加到第二个 ArrayList。
*   全部完成后，使用第二个 ArrayList 创建一个 ArrayAdapter。
*   为微调器 2 设置此 ArrayAdapter。

我尝试使用以下代码来实现这一点：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    String selectedCountry = parent.getItemAtPosition(pos).toString();
    ArrayList<CharSequence> arraylist = new ArrayList<CharSequence>();
    arraylist.addAll(R.array.spots_array);
    ArrayList<CharSequence> arraylist2 = new ArrayList<CharSequence>();
    for (i=0; i<arraylist.size(); i++) {
        String delimiter = " - ";
        if ((arraylist(i).split(delimiter)).equals(selectedCountry)) {
            arraylist2.add(arraylist(i).string.substring(string.lastIndexOf('-') + 1));
        }

    }
    ArrayAdapter<CharSequence> arrayAdapter2 = ArrayAdapter.createFromResource(this,  arraylist2<CharSequence>, android.R.layout.simple_spinner_item);
    arrayAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(arrayAdapter2);
    spinner2.setOnItemSelectedListener(this);
} 
```

但它给出了几个错误：

*   在 addAll() 它说：“ArrayList 类型中的方法 addAll(int, Collection) 不适用于参数 (int)”
*   在arraylist它说：“方法arraylist（int）未定义类型配置”
*   在字符串（子字符串内部）它说：“字符串无法解析”

我对 Android 还是比较陌生，并且在使其正常工作时遇到了很多麻烦。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:27:50.110

您的代码中有很多小错误：

*   要访问元素中的`arraylist`使用`get(position)`方法
*   当您添加“spot_array”时，您实际上添加了资源的 id，而不是数组本身（请参见[此处](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)）

这是您的代码更新，它应该可以工作或可能需要一些调整

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        String selectedCountry = parent.getItemAtPosition(pos).toString();
        List<CharSequence> arraylist = new ArrayList<CharSequence>();
        arraylist.addAll(Arrays.asList(getResources().getTextArray(R.array.spots_array)));
        List<CharSequence> arraylist2 = new ArrayList<CharSequence>();
        String delimiter = " - ";
        for (int i=0; i<arraylist.size(); i++) {
            String country = arraylist.get(i).toString();
            if (country.contains(selectedCountry)) {
                arraylist2.add(country.substring(country.lastIndexOf('-') + 2));
            }

        }
        ArrayAdapter<CharSequence> arrayAdapter2 = ArrayAdapter.createFromResource(this,  android.R.id.text1, android.R.layout.simple_spinner_item);
        arrayAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(arrayAdapter2);
        spinner2.setOnItemSelectedListener(this);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:28:05.983

您的代码中有几个错误。

首先，`addAll`ArrayList 的方法必须将 a 作为参数`Collection`。您正在传递一个 Android 数组 id `R.array.spots_array`；请记住，Android id 是整数。

从 Android 资源中获取字符串数组的通常方法是（在活动中）：

`String[] myArray = getResources().getStringArray(R.array.spots_array);`

第二个错误：您应该`ArrayList`通过调用方法来访问元素`get(position)`，而不是直接（`arraylist(position)`）。类似的东西`arraylist.get(position)`。

第三个错误：

`arraylist2.add(arraylist(i).string.substring(string.lastIndexOf('-') + 1));`

应该只是`arraylist2.add(arraylist.get(i));`将一个列表元素添加到另一个列表元素。

更多信息`ArrayLists`可以在[这里](http://javarevisited.blogspot.ro/2011/05/example-of-arraylist-in-java-tutorial.html)找到。

# c++ - 如何初始化 C++ 中的字符串集？

> ID：12333783
> 
> 赞同：42
> 
> 时间：2012-09-08T19:27:36.373
> 
> 标签：c++, string, set

在声明字符串集时，我有几句话要初始化。

```
...
using namespace std;
set<string> str;

/*str has to contain some names like "John", "Kelly", "Amanda", "Kim".*/ 
```

我不想`str.insert("Name");`每次都用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-08T19:30:38.643

使用 C++11：

```
std::set<std::string> str = {"John", "Kelly", "Amanda", "Kim"}; 
```

否则：

```
std::string tmp[] = {"John", "Kelly", "Amanda", "Kim"};
std::set<std::string> str(tmp, tmp + sizeof(tmp) / sizeof(tmp[0])); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-08T19:32:17.507

**在 C++11 中**

使用[初始化列表](http://en.wikipedia.org/wiki/C++11#Initializer_lists)。

```
set<string> str { "John", "Kelly", "Amanda", "Kim" }; 
```

**在 C++03 中** *（我投票赞成@john 的答案。这非常接近我所给出的。）*

使用`std::set( InputIterator first, InputIterator last, ...)`构造函数。

```
string init[] = { "John", "Kelly", "Amanda", "Kim" };
set<string> str(init, init + sizeof(init)/sizeof(init[0]) ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-08T19:30:20.553

有很多方法可以做到这一点，这里有一个

```
string init[] = { "John", "Kelly", "Amanda", "Kim" };
set<string> str(init, init + 4); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-08T19:45:43.893

如果你不是 c++0x：

你应该看看 boost::assign

[http://www.boost.org/doc/libs/1_39_0/libs/assign/doc/index.html#list_of](http://www.boost.org/doc/libs/1_39_0/libs/assign/doc/index.html#list_of)

也看看：

[使用 STL/Boost 初始化硬编码集<vector<int> >](https://stackoverflow.com/questions/2742549/using-stl-boost-to-initialize-a-hard-coded-setvectorint)

```
#include <boost/assign/list_of.hpp> 
#include <vector>
#include <set>

using namespace std;
using namespace boost::assign;

int main()
{
    set<int>  A = list_of(1)(2)(3)(4);

    return 0; // not checked if compile
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-08T19:35:23.007

有多种方法可以做到这一点。使用 C++11，您可以尝试...

```
std::set<std::string> set {
  "John", "Kelly", "Amanda", "Kim"
}; 
```

...它使用初始化列表，或者[`std::begin`](http://en.cppreference.com/w/cpp/iterator/begin)和[`std::end`](http://en.cppreference.com/w/cpp/iterator/end)...

```
std::string vals[] = { "John", "Kelly", "Amanda", "Kim" };
std::set<std::string> set(std::begin(vals), std::end(vals)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-08T19:39:16.333

创建一个字符串数组（C 数组）并用它的值初始化集合（数组指针作为迭代器）：
`std::string values[] = { "John", "Kelly", "Amanda", "Kim" };
std::set s(values,values + sizeof(values)/sizeof(std::string));`

# mysql - 关系数据库和 MyIsam

> ID：12333785
> 
> 赞同：4
> 
> 时间：2012-09-08T19:27:42.523
> 
> 标签：mysql, database-design, relational-database, innodb, myisam

刚从大学毕业，我就学会了设计数据库的“正确”方法。例如数据库规范化，如何构建表等。

现在我面临着他们在大学里没有教给我的东西......

看来我可以选择 2 个数据库引擎 - MyISAM 或 InnoDB。

我知道我可以使用 InnoDB 存储引擎构建关系数据库，但是据我所知，我无法使用 MyISAM 存储引擎构建关系数据库，因为我无法链接表。

所以-我的问题-请告诉我我只是愚蠢还是错过了一个技巧...

如果我不能用 MyISAM 构建关系数据库，那它有什么用呢？如何使用 MyISAM 确保数据库完整性？大多数人使用 MyISAM 还是 INNODB？如何在两个 MyIsam 表之间强制执行约束？

例如，如果我正在建立一个小型在线商店，我将有一个产品表和一个类别表。产品必须属于 1 个类别。我将如何使用 MyIsam 构建它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:34:57.540

确实，当前版本的 MySQL 不会强制执行在 MyISAM 表上定义的外键约束，但这并不意味着不能在此类表之间创建*关系*（毕竟，这只是在一个表中保存数据的问题标识另一个表中的相关记录）：必须更加小心地正确管理它们。

如果强制执行 ACID 合规性对您很重要，那么 InnoDB 是您的最佳选择；如果您可以牺牲这种合规性以换取在某些情况下提高性能，那么 MyISAM 可能值得一看。如果需要，您甚至可以在同一个数据库中混合和匹配两个存储引擎以实现平衡。

有*很多*资源讨论了 MyISAM 与 InnoDB 的优缺点——只需在 Google（或此站点）上搜索，您就会发现！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:06:01.520

关系模型是在 1969-1970 年开发的，目的是帮助阐明构建符合该模型的数据库的案例。没有什么特别的理由为什么应该使用关系模型来对最终将进入分层数据库的数据进行建模。但是，使用关系模型来帮助描述从分层数据库中出来的数据以及在将其交付给 DBMS 客户端之前可能会很有用。

重要的是要认识到数据的关系模型是一种设计工具，而不是真正的分析工具。数据的 ER 模型是专门为数据分析而发明的，而不会将分析偏向于一种特定的实现，例如关系或 SQL 实现。在这样的 ER 模型中，没有外键。重要的是要理解外键是解决方案的一个特征，而不是问题的一个特征。

也许，为了使用 MyISAM 构建一个像样的数据库，您需要重新学习构建数据库的正确方法。你在大学里学到的可能是如何建立一个关系数据库，假设没有学生需要建立一个分层数据库。

警告：大多数分层 DBMS 的顶部都贴有“关系层”，因此以关系术语思考的人可以使用该工具，而不必将关系模型放在一边。至少在某些方面，关系 DBMS 比非关系 DBMS“更好”。1969-1970 年提出的论点在很大程度上仍然有效。

# excel - 如何通过名称获取控件名称？

> ID：12333789
> 
> 赞同：6
> 
> 时间：2012-09-08T19:28:34.007
> 
> 标签：excel, vba

我有一个简单的功能，其中有一个组合框。如果组合框的值等于“禁用”，我将禁用文本框 B。有许多组合框及其对应的文本框 B，按行排列并手动命名。如果组合框 A 被命名`Product1`，则文本框 B 将被命名`Product1_status`

我在想类似的事情：

```
If value_of_a = "disable" Then 
 Dim name_of_b as String
 name_of_b = Me.Combo.Name + "_status"
 get_object_by_name(name_of_b).Enabled = False
End If 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T20:48:50.327

我不确定你是怎么称呼它的，但这里有一个独立的过程，应该会有所帮助：

```
Sub test()

Dim ws As Excel.Worksheet
Dim ProductCombo As OLEObject
Dim ProductText As OLEObject

Set ws = ThisWorkbook.Sheets(1)
With ws
    Set ProductCombo = .OLEObjects("Product1")
    Set ProductText = .OLEObjects(ProductCombo.Name & "_status")
    ProductText.Enabled = ProductCombo.Object.Text <> "Disabled"
End With
End Sub 
```

编辑：我真的很讨厌工作表控件 - 每次编程时我都从头开始！尽管如此，我想我会添加这个子例程，它会根据其配对组合框重置名称符合模式 Product#_status 的每个文本框。逻辑确实假设名称以 Product1、Product2 等开头，编号中没有间隙：

```
Sub test2()

Dim ws As Excel.Worksheet
Dim ctl As OLEObject
Dim i As Long
Dim ProductComboboxesCount
Dim ProductCombo As OLEObject
Dim ProductText As OLEObject
Const ControlPrefix As String = "Product"

Set ws = ThisWorkbook.Sheets(1)
With ws
    For Each ctl In .OLEObjects
        If TypeOf ctl.Object Is MSForms.ComboBox And Left(ctl.Name, Len(ControlPrefix)) = ControlPrefix Then
            ProductComboboxesCount = ProductComboboxesCount + 1
        End If
    Next ctl
    For i = 1 To ProductComboboxesCount
        Set ProductCombo = .OLEObjects(ControlPrefix & i)
        Set ProductText = .OLEObjects(ControlPrefix & i & "_status")
        ProductText.Enabled = ProductCombo.Object.Text <> "Disabled"
    Next i
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T19:50:56.590

## VBA

编辑：（更改为实际的 VBA 宏）

```
Sub Macro1()
'
' GetControl By Name
'
    If value_of_a = "disable" Then
        GetControl(ComboBox1.Name + "_status").Enabled = False
    End If

End Sub

Function GetControl(nameOfControl As String) As OLEObject
    Dim ctrl As OLEObject

    For Each ctrl In ActiveSheet.OLEObjects
        If ctrl.Name = nameOfControl Then
            Set GetControl = ctrl
        End If
    Next ctrl
End Function 
```

* * *

## VB.Net

VB.Net 的代码，如果有人出于这个原因想要它：

```
Sub Main()
    If value_of_a = "disable" Then 
        GetControl(ComboBox_1.Name + "_status").Enabled = False
    End If
End Sub

Function GetControl(nameOfControl As String) As Control
    For Each ctrl In Me.Controls
        If ctrl.Name = nameOfControl Then
            Return ctrl
        End If
    Next ctrl

    Return Nothing
End Function 
```

# f# - 将 OCaml 转换为 F#：是否有 num 模块到 F# 的端口

> ID：12333797
> 
> 赞同：2
> 
> 时间：2012-09-08T19:29:52.647
> 
> 标签：f#, ocaml

我正在将几个基于 OCaml 的模块转换为 F#。OCaml 代码使用来自[num 模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Num.html)的 num 类型。

> 输入数字 =
> | 整数
> | Big_int 的 Big_int.big_int
> | 比率比率

虽然我很幸运这次转换将 OCaml num 变量更改为 F# int 类型，但我想知道是否有人知道 num 模块到 F# 的公共端口。

如果你确定答案是否定的，那就是我所需要的。我知道人们不喜欢简短的回答，但如果答案是否定的，这就是我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:21:25.820

参见[Jack](https://stackoverflow.com/users/1197411/jack-p)的[FSharp.Compatibility.OCaml.Num.fs](https://github.com/jack-pappas/FSharp.Compatibility/blob/master/FSharp.Compatibility.OCaml/Num.fs)

# c# - 通过 DataGridView 更新 MS Access 数据库

> ID：12333810
> 
> 赞同：0
> 
> 时间：2012-09-08T19:31:23.130
> 
> 标签：c#

大家好，我正在尝试通过带有按钮的 datagridview 将数据保存到数据库，但每次运行应用程序时都会出现以下错误，这是我的代码：

```
 DataTable Table = new DataTable(); 
        BindingSource bindingSource1 = new BindingSource();
 string connetionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Database/Database.accdb;";
        string sql = "SELECT * FROM IAE;";
        OleDbConnection connection = new OleDbConnection(connetionString);
        OleDbDataAdapter dataadapter = new OleDbDataAdapter(sql, connection);
        OleDbCommandBuilder cb = new OleDbCommandBuilder(dataadapter);
        DataSet ds = new DataSet();
        connection.Open();
        dataGridView1.DataSource = ds.Tables["IAE"];
        dataadapter.Update((DataTable)bindingSource1.DataSource);
        connection.Close(); 
```

错误：值不能为空。参数名称：数据表

需要你的帮助和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:55:16.773

Reason of error is your bindingSource1.DataSource property is NULL. Your are not assigning any DATASOURCE to your bindingsource class

# objective-c - 在cocos2d中检测精灵上的透明部分？

> ID：12333822
> 
> 赞同：9
> 
> 时间：2012-09-08T19:33:44.653
> 
> 标签：objective-c, cocos2d-iphone

我是 Cocos2d 的初学者。我有一个精灵，我想忽略对该精灵透明区域的触摸。

我知道这个答案[Cocos2d 2.0 - Ignoring touches to transparent area of​​ layers/sprites](https://stackoverflow.com/questions/10889170/cocos2d-2-0-ignoring-touches-to-transparent-areas-of-layers-sprites)，还有这篇很棒的文章[http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d -code-1of2/](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)。

我能够使其与 KKPixelMaskSprite 一起使用，但仅当从文件中使用 sprite 而不是从批处理节点使用时。每当我使用批处理节点（Sprite 表）来获取 sprite 时，它​​就会停止工作。

我彼此有不同的精灵，我想以这种方式检测 - >如果触摸在当前精灵边界框中，那部分在精灵上是否透明？

PSI 正在使用 cocos2d 1.0。我现在不想使用任何物理引擎，我只想忽略对精灵透明区域的触摸（使用批处理节点创建）。我该怎么做？或者是否有任何工具可以提供帮助？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:28:31.317

您可以使用 CGMutablePathRef 进行非矩形精灵碰撞检测。

//检查

```
 CGPoint loc =[mySprite convertToNodeSpace:touchPoint];

    if([mySprite isPointInsideMap:loc]) 
    {
         //touched inside..
    }

//Add this method in your MySprite class derived from CCSprite.
-(bool)isPointInsideMap:(CGPoint)inPoint
{
    if (CGPathContainsPoint(mCollisionPath, NULL, inPoint, NO) ) 
    {
        return true;
    }

    return false;
} 
```

////创建路径

```
CGMutablePathRef  mCollisionPath = CGPathCreateMutable();
CGPathMoveToPoint(mCollisionPath,    NULL,  0, 0 );
CGPathAddLineToPoint(mCollisionPath, NULL,   11, 82 );
CGPathAddLineToPoint(mCollisionPath, NULL,   42, 152 );
CGPathAddLineToPoint(mCollisionPath, NULL,   86, 202 );
CGPathAddLineToPoint(mCollisionPath, NULL,   169, 13 );
CGPathCloseSubpath(mCollisionPath); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:43:36.380

这个答案比你想象的更分散，因为我不会给你一个代码示例，但这就是我实现它的方式：

你有精灵边界框的位置（精灵的角落，包括透明区域，如果适用），以及屏幕上触摸的位置。使用此信息，您可以计算出精灵*内部的触摸位置。*换句话说，您可以找到触摸的像素，与游戏画面无关。

现在您有了像素位置（x 和 y），打开图像（可能是 PNG），并获取该像素的 RGB[A] 值。每个 PNG 都有一个透明度键。这是 alpha 通道**如果 (x;y) == 透明度键处 PNG 的内部像素颜色，则该像素是透明的**

如果您可以获得相关像素的 alpha 值，如果它等于 0，则该像素是透明的。

编辑：语义（“阿尔法通道”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:30:42.137

我会尝试为我更改您的 is Touch 中的边界框，并为不同的精灵减少它...

# c# - 在 C# 中使用时间跨度计算费率

> ID：12333825
> 
> 赞同：-2
> 
> 时间：2012-09-08T19:33:53.943
> 
> 标签：c#

我想知道如何计算特定时间之间的不同工资率。

例如：如果有人从上午 9 点到下午 5 点工作，他们将获得 1 倍的费率。如果同一个人从上午 9 点到晚上 7 点工作，他们将在上午 9 点到下午 5 点获得 1 倍费率，然后从下午 5 点到晚上 7 点获得 1.5 倍费率。

但是，我目前在他们开始工作时使用 DateTime.Now，在他们完成使用时间跨度来计算两者之间的小时数时使用 DateTime.Now。

我没有尝试过任何事情，因为我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:30:36.190

这是一个尝试：

```
static double Rate = 20.0; // 20$ per hour 9am to 5pm    

static double TotalPayment(DateTime startTime, DateTime endTime)
{
  if (startTime > endTime)
    throw new ArgumentException("start must be before end");
  if (startTime.Date != endTime.Date)
    throw new NotImplementedException("start and end must be on same day");

  double totalHours = (endTime - startTime).TotalHours;

  double startOfOrdinaryRate = Math.Max(9.0, startTime.TimeOfDay.TotalHours);
  double endOfOrdinaryRate = Math.Min(17.0, endTime.TimeOfDay.TotalHours);
  double ordinaryHours;
  if (startOfOrdinaryRate > endOfOrdinaryRate)
    ordinaryHours = 0.0;
  else
    ordinaryHours = endOfOrdinaryRate - startOfOrdinaryRate;

  return 1.0 * Rate * ordinaryHours
    + 1.5 * Rate * (totalHours - ordinaryHours);
} 
```

做测试是否有效。

# c# - 在 IWebMatrixHost ShowDialog 方法上触发对话框按钮

> ID：12333826
> 
> 赞同：1
> 
> 时间：2012-09-08T19:34:13.023
> 
> 标签：c#, wpf, webmatrix, webmatrix-2

我创建了一个传递给[ShowDialog](http://msdn.microsoft.com/en-us/library/hh965821.aspx)方法的自定义 XAML UserControl 类。我希望能够通过在我的 UserControl 中生成的其他事件触发单击对话框上的 OK 按钮 - 例如双击 ListItem。我有处理双击的代码（甚至绑定到 MouseDown 并检查了点击次数），但我不知道如何触发父对话框的新事件以关闭它。

```
// Bound to TextBlock, part of a ListBox on a UserControl
private void TextBlock_MouseDown(object sender, MouseButtonEventArgs e)
{
    if (e.ClickCount == 2)
    {
        // trigger dialog to close with OK button
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:21:43.003

让您的用户控件实现 IDialogContent。然后，您可以直接调用您实现的 CloseDialog 事件，这将触发对话框关闭。

您需要通过在您的用户控件/视图模型或适合您的特定扩展的一些其他数据上设置某种状态来决定您希望如何在后续代码中处理它。

```
// Bound to TextBlock, part of a ListBox on a UserControl
    private void TextBlock_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (e.ClickCount == 2)
        {
            CloseDialog(this, EventArgs.Empty);
        }
    } 
```

# python - 如何使端口不是 80 的 HTTP 服务器可用于网络？

> ID：12333831
> 
> 赞同：0
> 
> 时间：2012-09-08T19:34:37.063
> 
> 标签：python, sockets, port

我目前遇到的问题是我有一个服务器脚本在一台计算机上运行为`localhost:12123`. 我可以使用同一台计算机连接到它，但使用同一网络中的另一台计算机无法连接到它（说它不存在）。防火墙被禁用。

和权限有关系吗？

套接字是由 python 文件使用`BaseHTTPServer`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T19:40:23.047

它可能与绑定到本地主机有关，而不是绑定到实际的 LAN 接口（例如 192.168.1.x）或所有接口（有时称为 0.0.0.0）。

此代码将启动一个绑定到所有接口（不仅是本地主机）的实例

```
def run(server_class=BaseHTTPServer.HTTPServer,
        handler_class=BaseHTTPServer.BaseHTTPRequestHandler):
    server_address = ('0.0.0.0', 12123)
    httpd = server_class(server_address, handler_class)
    httpd.serve_forever() 
```

`server_adress`必须`(0.0.0.0, 12123)`看到：**0.0.0.0**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:36:45.197

显然，绑定到 0.0.0.0 或外部 IP 地址。

# asp.net - Ajax 调用不起作用

> ID：12333835
> 
> 赞同：0
> 
> 时间：2012-09-08T19:35:05.523
> 
> 标签：asp.net, jquery, json.net

我尝试在我的 aspx 页面中使用 ajax 调用。这是我的脚本：

```
<head runat="server">
<title></title>
<script type="text/javascript" src="jquery/ui/jquery-ui-1.8.23.custom.js"></script>

<script type="text/javascript" language="javascript">

    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "WebForm1.aspx/List",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function () {
                alert('asd');
            }
        });

    });

</script>
</head> 
```

这是我的服务器端代码：

```
 [WebMethod]
 public static string[] List()
 {
      ...
 } 
```

我在 List 的第一行放了一个断点，但什么也没发生。你有什么建议，我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:42:17.073

您指定的参数是 json; 但是json数据在哪里？`data: '{}',`是一个对象。另外，我会检查 url 参数。大概，你需要这样写你的电话：

```
var AjaxData = '{"ParameterName":""}';

 $.ajax({
            type: "POST",
            url: "../WebForm1.aspx/GetList",
            data: AjaxData ,
            contentType: "application/json; charset=utf-8",
            dataType: "json",.... 
```

然后在服务器端，您应该指定您正在接收一个字符串，因为这是 json 数据的格式。我还建议更改 WebMethod 的名称，因为这`List`可能会造成混淆。最后，您返回的是 json，因此您返回的是字符串而不是数组。服务器方法如下：

```
 [WebMethod]
 public string GetList(string ParameterName)
 {
      ...
 } 
```

# jquery - 如果光标已经在元素内，请避免触发鼠标悬停事件？

> ID：12333841
> 
> 赞同：3
> 
> 时间：2012-09-08T19:35:49.563
> 
> 标签：jquery

每当您将鼠标悬停在它上面时，我`div`都会运行一个小动画：

```
$('.cg-panel').bind('mouseover.anim', function() {
    $(this).stop(true).css({ 'opacity': 0.4 }).transition({ 'opacity': 0 }, 800);
}); 
```

问题是它`.cg-panel`位于另一个`div`根据需要显示和隐藏的顶部：

```
$('#control_grid').show(); 
```

当显示“控制网格”时，鼠标悬停事件立即触发。如果你的鼠标已经在它上面，我不希望它触发，只有当你的鼠标从侧面进入它时。

我怎样才能避免触发第一个事件？

[小提琴示例](http://jsfiddle.net/rJfc9/6/)——在 chrome 中尝试。由于某种原因它锁定了Firefox，不知道为什么。

[显示后我也无法绑定事件](http://jsfiddle.net/rJfc9/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:42:21.543

如果没有你的 html 和对你想要的东西的更好描述，很难测试这个理论；但是，由于您只希望在拳头进入 div 时发生事件，因此您是否有理由不想使用`mouseenter`而不是`mouseover`？

```
$('.cg-panel').bind('mouseenter.anim', function() {
    $(this).stop(true).css({ 'opacity': 0.4 }).transition({ 'opacity': 0 }, 800);
}); 
```

另请注意，根据您使用的 jquery 版本，不推荐使用[bind()](http://api.jquery.com/bind/)并已替换为[on()](http://api.jquery.com/on/)。

```
$('.cg-panel').on('mouseenter.anim', function() {
    $(this).stop(true).css({ 'opacity': 0.4 }).transition({ 'opacity': 0 }, 800);
}); 
```

**编辑**：

我对您的演示进行了一些调整，然后想出了[这个可能的解决方案](http://jsfiddle.net/rJfc9/12/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:41:00.547

“控制网格”显示在 onclick 事件中。如果我同时设置一个变量，

```
$cg.show().data('flash', false); 
```

然后我可以用它来防止第一次“闪光”：

```
$('.cg-panel').on('mouseenter.anim', function() {
    if($cg.data('flash')) {
        $(this).stop(true).css({ 'opacity': 0.4 }).transition({ 'opacity': 0 }, 800);
    } else {
        $cg.data('flash', true);
    }
}); 
```

这只有效，因为我的网格覆盖了整个屏幕，所以当它出现时，您的鼠标不可能不在面板之一上方。（除非我可能添加键盘事件......这是一个计划......但是，我没有更好的解决方案）

# regex - ExpressJS 路由正则表达式

> ID：12333845
> 
> 赞同：10
> 
> 时间：2012-09-08T19:36:44.447
> 
> 标签：regex, node.js, express

我有路线：

```
app.get('/:id', routes.action); 
```

它工作正常，但我需要跳过`robot.txt`和其他（人类......）我创建正则表达式（只有字符或数字）：

```
/^[a-z]{0,10}$/ 
```

我如何只能路由与此正则表达式匹配的 ID？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-08T19:59:38.767

将正则表达式放在括号中，如下所示：

```
app.get('/:id(^[a-z]{0,10}$)', routes.action); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T13:30:07.467

如果要避免路由匹配物理存在的静态文件，只需将`static`中间件放在对`app.router`.

然后静态文件（如 robots.txt）将被传递，这些调用将不会通过您的路由。

问题解决了 ;-）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T20:14:16.107

在内部，您提供给 Express 路由器的字符串无论如何都只是转换为正则表达式。如果你看一下[代码](https://github.com/visionmedia/express/blob/3.0.0rc3/lib/utils.js#L249-269)，你会发现你可以直接传递一个正则表达式。

```
app.get(/^\/[a-z]{0,10}$/, routes.action); 
```

[文档](http://expressjs.com/api.html#app.VERB)也有示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T09:52:37.327

如果您需要多条路线：

```
app.routes.get 
```

是一个包含所有获取路线的数组。您可以更改需要更改的路由的正则表达式对象。

# java - ClassFormatError：XY 类中的未知常量标记

> ID：12333849
> 
> 赞同：17
> 
> 时间：2012-09-08T19:37:20.590
> 
> 标签：java

我有一段代码，我尝试在运行时加载一个类。代码并非全部是自己编写的，所以我在理解编译后总是出现的错误时遇到了一些问题。

这里的代码：

```
private Class findClass(String s)
        throws ClassNotFoundException
    {
        URL url = getResource("AP.class");
        if(url == null)
        {
            throw new ClassNotFoundException(s);
        }
        inputstream = null;
        Class classToRead;
        try
        {
            inputstream = url.openStream();
            byte abyte0[] = readClass(inputstream);
            classToRead= defineClass(s, abyte0, 0, abyte0.length);
        }
        catch(IOException ioexception)
        {
            throw new ClassNotFoundException(s);
        }
        if(inputstream != null)
        {
            try
            {
                inputstream.close();
            }
            catch(Exception exception1) { }
        }
        return classToRead;
    } 
```

错误出现在 defineClass 方法中。

错误堆栈跟踪：

```
Exception in thread "main" java.lang.ClassFormatError: Unknown constant tag 63 in class file AP
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at c.findClass(c.java:100)
    at c.loadClass(c.java:56)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at c.a(c.java:20)
    at mainOpenClass.main(lol.java:13) 
```

我现在的问题是：代码可能有什么问题吗？AP.class 是否有可能损坏？错误的真正含义是什么？

我希望任何人都可以帮助我解决我的问题，因为在这种情况下搜索互联网并没有真正的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T20:02:41.240

您自己编写的代码很好。问题是这`AP.class`是一个损坏的类文件 - 因此`ClassFormatError`.

错误本身意味着它未能正确解码*常量池*，这是类文件结构的一部分，很像符号表。请参阅[Java 虚拟机规范的 §4.4](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4)：

> Java 虚拟机指令不依赖于类、接口、类实例或数组的运行时布局。相反，指令引用`constant_pool`表中的符号信息。
> 
> 所有`constant_pool`表格条目都具有以下一般格式：
> 
> ```
> cp_info {
>     u1 tag;
>     u1 info[];
> } 
> ```
> 
> 表中的每一项都必须以指示条目`constant_pool`类型的 1 字节标记开头。`cp_info`info 数组的内容随 tag 的值而变化。有效标签及其值列于[表 4.3](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4-140)中。每个标记字节后面必须跟两个或多个字节，给出有关特定常量的信息。附加信息的格式因标签值而异。

因此，错误本身告诉您该类有一个带有无效标签的常量池表条目，即`63`. 用上面提到的表 4.3 进行验证，确实，**这不对应于任何记录在案的`cp_info`entry**。

尝试重新下载`AP.class`。鉴于晦涩的名称（`AP`以及`c`来自堆栈跟踪），我将假设您正在尝试使用一些混淆代码。不仅要验证您尝试处理的代码没有受到某种加密的进一步保护，而且还要验证您所做的任何预处理（例如反混淆）不会破坏数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:47:02.750

回答您的问题：

1.  不

2.  是的

3.  [来自 Java Doc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassFormatError.html)当 Java 虚拟机尝试读取类文件并确定该文件格式错误或无法解释为类文件时抛出。

# vb.net - 在运行时更改 My.Settings ConnectionString？

> ID：12333850
> 
> 赞同：-1
> 
> 时间：2012-09-08T19:37:25.470
> 
> 标签：vb.net, visual-studio, connection-string

我有一个 ClickOnce 部署，其中我在网络文件上有一个 INI 设置文件，其中包含应该影响所有客户端计算机上的程序的“全局”设置。我遇到的问题是我想将数据库连接字符串存储在此 INI 文件中，并在程序启动时将其读取并存储在 My.Settings ConnectionString 中。我该怎么做呢？ConnectionString 设置是应用程序范围的，因此是只读的，如果我尝试设置它， `My.Settings("ConnectionString") = "Source=server;Initial Catalog=database;Integrated Security=True"` 我会收到运行时错误：

> 创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：“DB_lib.DB_LINQ”的类型初始化程序引发了异常。

`My.Settings("ConnectionString") = "Source=server;Initial Catalog=database;Integrated Security=True"`[编辑] 我通过在另一个地方使用然后我创建的 eventtriggerd settingsLoaded 方法摆脱了错误。问题是即使连接字符串是正确的，程序仍然连接到“默认”数据库输入到 app.config 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:47:38.210

您不能从应用程序中更改应用程序设置。将其更改为用户设置。

或编写您自己的设置（来自[msdn](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)）：

> 如果您想对设置进行更详细的控制，您可以定义自己的自定义应用程序设置包装类。这是通过从[ApplicationSettingsBase](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.aspx)派生一个类，添加与每个设置对应的属性，并将特殊属性应用于这些属性来完成的。有关创建包装类的详细信息，请参阅[应用程序设置架构](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)。

# facebook - 尝试使用 FB GraphAPI 确定用户是否是页面管理员

> ID：12333852
> 
> 赞同：1
> 
> 时间：2012-09-08T19:37:38.050
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我有一个页面标签应用程序。当用户单击“转到应用程序”并被发送到我的页面选项卡编辑 url 时，我试图确定他们是否是页面管理员。我尝试了两种不同的方法。[我已经尝试过从https://developers.facebook.com/blog/post/2011/09/05/platform-updates--labor-day-edition/](https://developers.facebook.com/blog/post/2011/09/05/platform-updates--labor-day-edition/)使用的页面方法 1 的唯一管理员/所有者

```
 $page_info = $facebook->api("/".$pageID."?fields=access_token");
 $pageAccessToken = $page_info['access_token']     

 $is_admin_url = "https://graph.facebook.com/" . $pageID 
  . "/admins/" . $FBuser . "?access_token=" 
  . $pageAccessToken;

$response = file_get_contents($is_admin_url); 
```

响应是 {"data":[]}

我也试过::

```
path = '/'.$pageID.'/admins/'.$FBuser;
$params = array(
        'app_id' => FB_APP_ID,
        'access_token' => $pageAccessToken
);
$is_admin = $facebook->api($path, 'POST', $params); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:03:43.973

虽然`PAGE_ID/admins`是一个有效的请求，但您需要管理员的 access_token 才能查看该列表。即只有管理员可以看到还有谁是管理员。

您可以做的是从另一端通过生成用户是管理员的页面列表（使用`https://graph.facebook.com/USER_ID/accounts/`数据和`manage_pages`权限）并在该列表中搜索您的应用程序来解决此问题。

但是，如果某些用户不愿意给予`manage_pages`许可，我会理解，因为它还提供了一个访问令牌来作为该页面进行身份验证，这对他们来说是一个安全漏洞。不幸的是，似乎没有其他方法可以访问该用户是管理员的页面列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:15:16.837

最简单的方法将是签名请求。

当应用程序在页面选项卡中加载时，将签名请求参数 POST 到应用程序。

你可以从 signed_request 中得到很多信息

```
require '../fb_sdk/facebook.php';
$config = array();
$config['appId'] = '45916xxxxxx';
$config['secret'] = '59caxxxxxx';

$facebook = new Facebook($config);
$facebook->setFileUploadSupport(true);

$signed_request = $facebook->getSignedRequest(); 
```

`print_($signed_request);`会有类似的输出

```
Array
(
    [algorithm] => HMAC-SHA256
    [expires] => 1347210000
    [issued_at] => 1347203265
    [oauth_token] => AAAGhmv67ki8BAAfBwtxxxx
    [page] => Array
        (
            [id] => 192430xxxxxx
            [liked] => 1
            [admin] => 1
        )

    [user] => Array
        (
            [country] => in
            [locale] => en_US
            [age] => Array
                (
                    [min] => 21
                )

        )

[user_id] => 10000020xxxxx
) 
```

您可以使用`$signed_request[page][admin]`value 来确定用户是否是当前页面的管理员，您的应用程序在该页面中加载到页面选项卡中。如果设置为，`1`则用户是页面的管理员，否则不是管理员，即设置为`0`.

[**更多关于签名请求**](https://developers.facebook.com/docs/authentication/signed_request/)

# django - Django rest 框架 - PUT 请求的身份验证错误

> ID：12333853
> 
> 赞同：2
> 
> 时间：2012-09-08T19:37:45.890
> 
> 标签：django, backbone.js, django-rest-framework

对于我的模型“Presentacion”，我有一个非常简单的资源

```
class PresentacionResource(ModelResource):
    model = Presentacion
    fields = (some fields)
    ignore_fields = (few to ignore) 
```

我需要为此实现身份验证，所以当我阅读时，我创建了两个包装器

```
class AuthListOrCreateModelView(ListOrCreateModelView):
    permissions = (IsAuthenticated, )
class AuthInstanceModelView(InstanceModelView):
    permissions = (IsAuthenticated, ) 
```

然后在我的 urls.py 中

```
url(r'^presentaciones/$', AuthListOrCreateModelView.as_view(resource=PresentacionResource), name='presentacion-root'),
url(r'^presentaciones/(?P<id>[0-9]+)$', AuthInstanceModelView.as_view(resource=PresentacionResource), name='presentacion'), 
```

这适用于 GET 'presentaciones/' 请求，但是当我尝试发出 PUT 请求时，我收到 403 FORBIDDEN

对我来说奇怪的是 GET 工作正常：只要我登录，它就会正确响应，但如果我注销它会以 403 FORBIDDEN 响应。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T05:16:46.430

如果问题是 X-CSRF 令牌标头，您可以像这样修改 Backbone.sync 以在每个 POST、PUT、DELETE 请求中发送一个令牌。

```
 /* alias away the sync method */
        Backbone._sync = Backbone.sync;

        /* define a new sync method */
        Backbone.sync = function(method, model, options) {

            /* only need a token for non-get requests */
            if (method == 'create' || method == 'update' || method == 'delete') {
                // CSRF token value is in an embedded meta tag 
                var csrfToken = $("meta[name='csrf_token']").attr('content');

                options.beforeSend = function(xhr){
                    xhr.setRequestHeader('X-CSRFToken', csrfToken);
                };
            }

            /* proxy the call to the old sync method */
            return Backbone._sync(method, model, options);
        }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T20:48:55.570

如果您使用 Django 的基于会话的身份验证，那么您可能会绊倒 Django 中内置的 CSRF 保护（请参阅 UserLoggedInAuthentication 类 [1]）。

如果是这种情况，您需要确保将 CSRF cookie 发送到客户端，然后您可以调整 jQuery 指令 [2] 以发送带有可能更改数据的请求的 X-CSRFToken 标头。

[1] [http://django-rest-framework.org/_modules/authentication.html](http://django-rest-framework.org/_modules/authentication.html)

[2] [https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-30T02:51:59.723

我意识到这是一篇较旧的帖子，但我最近正在处理这个问题。扩展[@orangewarp](https://stackoverflow.com/users/972393/orangewarp)的答案并使用 django 文档（[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)），这是一个解决方案：

此解决方案使用 csrftoken cookie。另一种解决方案是在您的 API 中创建一个 csrf 令牌端点并从那里获取 csrf。

```
 Backbone._sync = Backbone.sync;

  Backbone.sync = function(method, model, options) {
      //from django docs
      function getCookie(name) {
          var cookieValue = null;
          if (document.cookie && document.cookie != '') {
              var cookies = document.cookie.split(';');
              for (var i = 0; i < cookies.length; i++) {
                  var cookie = jQuery.trim(cookies[i]);
                  // Does this cookie string begin with the name we want?
                  if (cookie.substring(0, name.length + 1) == (name + '=')) {
                      cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                      break;
                  }
              }
          }
          return cookieValue;
      }

      /* only need a token for non-get requests */
      if (method == 'create' || method == 'update' || method == 'delete') {
          var csrfToken = getCookie('csrftoken');

          options.beforeSend = function(xhr){
              xhr.setRequestHeader('X-CSRFToken', csrfToken);
          };
      }

      return Backbone._sync(method, model, options);
  }; 
```

# javascript - 服务器上的 Meteor 客户端断开连接事件

> ID：12333857
> 
> 赞同：5
> 
> 时间：2012-09-08T19:38:07.283
> 
> 标签：javascript, meteor

简单的问题，也许是简单的答案：我如何在服务器上知道某个客户端已断开连接？基本用例：发球者需要知道玩家是否断开了连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T03:09:31.630

在发布功能中，您可以按如下方式观看套接字关闭事件。

```
this.session.socket.on "close", -> # do your thing 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-19T14:16:55.390

```
 Meteor.publish("yourPublishFunction", function()
        {
            var id = this._session.userId;
            this._session.socket.on("close", Meteor.bindEnvironment(function()
            {
              console.log(id); // called once the user disconnects
            }, function(e){console.log(e)}));

            return YourCollection.find({});
        }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-03T03:18:33.940

我创建了一个非常全面的包来跟踪每个用户的所有登录会话，以及他们的 IP 地址和活动：

> [https://github.com/mizzao/meteor-user-status](https://github.com/mizzao/meteor-user-status)

要监视断开连接，您只需执行以下操作，即可捕获注销和浏览器关闭：

```
UserStatus.on "sessionLogout", (userId, sessionId) ->
  console.log(userId + " with session " + sessionId + " logged out") 
```

您还可以查看代码并为自己做类似的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T22:27:47.227

也许（在服务器代码中）

```
Meteor.default_server.sessions.length 
```

或者

```
Meteor.default_server.stream_server.open_sockets.length 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T20:05:29.147

你可以做一件事在服务器上创建一个事件并**使用 ajax**从浏览器调用它，**在一些小的时间间隔 settimeinterval**使用会话值到标头后调用它，如果服务器没有从用户那里得到请求，这意味着他断开了连接

# c++ - 如何在自定义 std::ostream 类中使用 std::endl

> ID：12333858
> 
> 赞同：3
> 
> 时间：2012-09-08T19:38:09.250
> 
> 标签：c++, templates, std

我正在创建一个自定义 ostream 类，该类在以下代码段中简要介绍。我希望能够使用`std::endl`但编译器不让我使用。我不明白为什么。

```
#include <iostream> 

struct Bar
{
};

template <typename T>
struct Foo
{
};

template <typename T, typename U>
Foo<T>& operator<<(Foo<T>& _foo, U&&)
{
  return _foo;
}

int main()
{
  Foo<Bar> f;
  f << "aa" << std::endl;
} 
```

gcc 4.7.1 给我的错误是：

> main.cpp:21:21: 错误: 'operator<< ((* & f), (*"aa")) << std::endl' main.cpp:21 中的'operator<<' 不匹配： 21：注意：候选人是：main.cpp：13：9：注意：模板Foo&运算符<<（Foo&，U&&）main.cpp：13：9：注意：模板参数推导/替换失败：main.cpp：21： 21：注意：
> 无法推断模板参数'U'</p>

为什么不能推导出参数U？这不应该`typeof(std::endl)`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:42:12.883

由于`std::endl`是

```
namespace std {
template <class charT, class traits>
basic_ostream<charT,traits>& endl(basic_ostream<charT,traits>& os);
} 
```

你的类不是从 派生的`basic_ostream`，所以它不能工作。

并且`basic_ostream`有

```
basic_ostream<charT,traits>& operator<<
(basic_ostream<charT,traits>& (*pf)(basic_ostream<charT,traits>&)) 
```

适用于与`std::endl`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T22:40:16.320

请注意，很少需要使用模板方法，也没有很好地使用派生来实现与使用自定义`std::ostream`的方便初始化不同的目的。要创建新的源或目标以读取或写入，您从. 对于流写入，您通常会覆盖和.`std::ostream``std::streambuf``std::streambuf``std:;streambuf::overflow()``std::streambuf::sync()`

# debugging - PIC24HJ256GP610/610A 差异导致的 RTCC 的 I2C 读/写问题？

> ID：12333861
> 
> 赞同：1
> 
> 时间：2012-09-08T19:38:42.540
> 
> 标签：debugging, pic, microchip, i2c, mplab

我在使用 PIC24HJ256GP610A 上的 I2C 模块时遇到问题。我的代码（见下面的片段）在 PIC24HJ256GP610 [注意：不是 610A] 上运行得非常好。我正在使用 I2C 总线与 DS1374 RTCC 进行通信。但是在 610A 上，当尝试使用 I2C 向 RTCC 写入值时轮询 ACKSTAT 位时，它会卡住。此外，大多数情况下，通过 I2C 读取值时 RTCC 值不会增加（有时它确实会增加）。有任何想法吗？处理 I2C 模块的 610 和 610A 之间是否存在配置位/模式/设置差异？我试过换掉 RTCC 芯片，换掉处理器。所以，这里唯一的区别是 I2C 通信在 610 上工作，而不是在 610A 上。

610和610A有什么区别？610 是不再生产的过时部件，还是会继续生产？

在试验、探测信号和使用调试器单步执行时，我注意到了一些事情：

1）。I2C 时钟在即将发送的第 20 个位上无限期变高，如果我暂停调试器，它会在轮询 ACKSTAT 位时卡住。第一位似乎是起始位，然后是 9 个更多位，然后是另一个开始/停止位，然后是 9 个更多位，然后时钟线变为高电平。

2）。当时钟线卡住并使用监视窗口时，I2C1STATbits 寄存器中的值为 0x8008，这意味着从从设备接收到 NACK，并且最后检测到启动（或重复启动）位。

3）。我总是能够从 610 和 610A 的从设备 (RTCC) 中读取数据。然而，有时对于 610A，它的值不会增加，而是保持在某个整数值。我相信当我切断一切电源并重新编程一切时，RTCC 值会发生变化。有时它在读取值时保持不变，并且可能有 25% 的时间在读取值时实际发生变化。

4）。我无法使用 610A 通过 I2C 向 RTCC 写入任何内容。处理器在轮询 ACKSTAT 位时卡住了（我假设是因为它收到了来自 RTCC 的 NACK。）610 工作完美。

工具：MPLAB v8.86、C30 v3.31、ICD3

谢谢你，布拉德

```
//Write RTCC Register: This functions writes a Byte to the DS1374 RTCC
void Write_RTCC_Register(int Register, unsigned char Byte
{
    unsigned int config2, config1;
    /* Baud rate is set for 100 Khz */
    config2 = 0x97;
    /* Configure I2C for 7 bit address mode */
    config1 =  (I2C1_ON & I2C1_IDLE_CON & I2C1_CLK_HLD &
            I2C1_IPMI_DIS & I2C1_7BIT_ADD &
            I2C1_SLW_DIS & I2C1_SM_DIS &
            I2C1_GCALL_DIS & I2C1_STR_DIS &
            I2C1_NACK & I2C1_ACK_DIS & I2C1_RCV_DIS &
            I2C1_STOP_DIS & I2C1_RESTART_DIS &
            I2C1_START_DIS);

OpenI2C1(config1,config2);
IdleI2C1();
StartI2C1();

//Configure RTCC
//Wait till Start sequence is completed
while(I2C1CONbits.SEN);
//Clear interrupt flag
IFS1bits.MI2C1IF = 0;
//Write Slave address and set master for transmission
MasterWriteI2C1(0xD0);
//Wait till address is transmitted
while(I2C1STATbits.TBF);  // 8 clock cycles
while(!IFS1bits.MI2C1IF); // Wait for 9th clock cycle
IFS1bits.MI2C1IF = 0;     // Clear interrupt flag 
while(I2C1STATbits.ACKSTAT);            

OpenI2C1(config1,config2);
IdleI2C1();
StartI2C1();
//Wait till Start sequence is completed
while(I2C1CONbits.SEN);

//Clear interrupt flag
IFS1bits.MI2C1IF = 0;
//Write Slave address and set master for transmission
MasterWriteI2C1(Register);

//Wait till address is transmitted
while(I2C1STATbits.TBF);  // 8 clock cycles
while(!IFS1bits.MI2C1IF); // Wait for 9th clock cycle

IFS1bits.MI2C1IF = 0;     // Clear interrupt flag

***while(I2C1STATbits.ACKSTAT); //problem here***

//Clear interrupt flag
IFS1bits.MI2C1IF = 0;
//Write Slave address and set master for transmission
MasterWriteI2C1(Byte);
//Wait till address is transmitted
while(I2C1STATbits.TBF);  // 8 clock cycles
while(!IFS1bits.MI2C1IF); // Wait for 9th clock cycle
IFS1bits.MI2C1IF = 0;     // Clear interrupt flag 
while(I2C1STATbits.ACKSTAT);

StopI2C1();
//Wait till stop sequence is completed
while(I2C1CONbits.PEN);
CloseI2C1();
}; //Write RTCC Register 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:34:20.540

我发现了这个问题。我重新启用了 I2C 模块，并在“...ACKSTAT); //problem here”代码行上方几行断言了一个不必要的启动条件。重新启用模块似乎没有什么不同，问题在于重新断言启动条件位。

我不确定为什么它适用于 610 而不是 610A。不管怎样，问题解决了！

```
...
...
...
//**DELETED** OpenI2C1(config1,config2);
//**DELETED** IdleI2C1();
//**DELETED** StartI2C1();
////**DELETED** Wait till Start sequence is completed
//**DELETED** while(I2C1CONbits.SEN);

//Clear interrupt flag
IFS1bits.MI2C1IF = 0;
//Write Slave address and set master for transmission
MasterWriteI2C1(Register);

//Wait till address is transmitted
while(I2C1STATbits.TBF);  // 8 clock cycles
while(!IFS1bits.MI2C1IF); // Wait for 9th clock cycle

IFS1bits.MI2C1IF = 0;     // Clear interrupt flag

while(I2C1STATbits.ACKSTAT); // ** problem no more!
...
...
... 
```

# xcode - Xcode'NSinteger'（又名'int'）？是这样做的吗？

> ID：12333862
> 
> 赞同：0
> 
> 时间：2012-09-08T19:39:14.983
> 
> 标签：xcode

```
NSString *nssHighscore = [NSString stringWithFormat:@"Bounce the ball upwards by tilting or touching where you want it to go. Bounce on the green platforms in order to move up. If you miss a platform and fall, it's game over.%lu",highscore]; 
```

Xcodes 询问：'NSinteger'（又名'int'）

我是否必须将这个'NSinteger'（又名'int'）放在代码上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:43:38.297

格式说明符`%lu`用于`unsigned long`整数。如果`%d`要指定`int`整数的格式，请使用。Apple 在其[Developer Connection](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)网站上提供了这些和其他格式说明符的表格。

# apache-flex - 无法解决 到组件实现

> ID：12333865
> 
> 赞同：0
> 
> 时间：2012-09-08T19:39:35.827
> 
> 标签：apache-flex, air, flex4, flex4.6

在过去工作得很好的项目上，我现在得到一个“无法解决组件实现”的问题。错误。它阻止我编译它们，我不知道是否有任何变化。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ .actionScriptProperties ~~~~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~

通用库有两个排除库：

```
 <excludedEntries>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/flex.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/core.swc" useDefaultLinkType="false"/>
    </excludedEntries> 
```

仅移动库有许多排除库：

```
 <excludedEntries>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/advancedgrids.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/qtp.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/automation_air.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/air/airspark.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/netmon.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/mx/mx.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/air/applicationupdater.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/utilities.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/flex.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/sparkskins.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/qtp_air.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/datavisualization.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/spark_dmv.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/automation.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/automation_dmv.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/automation_flashflexkit.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/air/applicationupdater_ui.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/air/airframework.swc" useDefaultLinkType="false"/>
      <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/automation_agent.swc" useDefaultLinkType="false"/>
    </excludedEntries> 
```

# python - Python 套接字服务器只获得一次信号

> ID：12333869
> 
> 赞同：0
> 
> 时间：2012-09-08T19:40:32.573
> 
> 标签：python, sockets

我刚刚进入网络，我想尝试使用 ping

服务器代码：

```
import socket

host = 'localhost'
port = 5050
backlog = 5
size = 1024
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((host,port))
s.listen(backlog)
while 1:
    client, address = s.accept()
    data = client.recv(size)
    print "getting "+str(data)+" from "+ str(address) 
```

客户代码

```
import socket
import time

host = 'localhost'
port = 5050
size = 1024
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((host,port))
while 1:
    s.send('PING')
    print "sending package"
    time.sleep(1) 
```

现在它输出：

```
getting PING from ('127.0.0.1', 56580) 
```

只有一次，而它应该每秒得到一个 PING。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:49:06.503

由于您只与服务器建立*一个*连接，因此您只需调用`.accept()`一次即可接受该连接。一旦打开，套接字将接收您从客户端发送的定期数据包。

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((host,port))
s.listen(backlog)
client, address = s.accept()
while 1:
    data = client.recv(size)
    print "getting "+str(data)+" from "+ str(address) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:49:30.133

好吧，你只读了一次。`client.recv`在服务器上循环调用：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((host,port))
s.listen(backlog)
while True:
    client, address = s.accept()
    # TODO Use fork(), threading, or async I/O to for parallel processing
    while True: 
        data = client.recv(size)
        print "getting "+str(data)+" from "+ str(address) 
```

或为每个 ping 创建一个套接字：

```
while True:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((host,port))
    s.send('PING')
    print "sending package"
    time.sleep(1) 
```

# java - （重写文本文件并保留以前的数据）获取值并写入记事本/ms-word-每次在记事本文件的新行中

> ID：12333871
> 
> 赞同：0
> 
> 时间：2012-09-08T19:40:44.217
> 
> 标签：java, file-io, line, jtextfield

我知道如何从 JTextField 中获取值并将其写入 Java 语言的文本文件中。这是我的代码：

```
public class createfile {
    private Formatter x;

    public void openFile() {
        try {
            x = new Formatter("c:\\definition.txt");
        } catch (Exception e) {
            System.out.println("Error");
        }
    }

    private void addRecords() {
        x.format(null, jTextField3);
    }

    public void closFile() {
        x.close();
    }
} 
```

它可以正常工作并将 jTextField3 的值写入名为“definition.txt”的文件中。但是如果用户再次运行程序，并在 jTextField3 中输入新值，那么“definition.txt”将被新数据填充！并且之前的数据会丢失！我不想变成那样！我想保留用户每次输入的所有数据。我应该如何更改我的代码？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:57:39.920

您*想追*加到文件而不是*覆盖*它。采用文件名的[`Formatter`构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#Formatter%28java.lang.String%29)似乎无法胜任这项工作。我建议您创建一个[`FileOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)可以明确要求附加的位置。您可以将该流而不是原始文件名传递给[`Formatter`构造函数。](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#Formatter%28java.io.OutputStream%29)

```
x = new Formatter(new FileOutputStream("c:\\definition.txt", true)); 
```

# javascript - 用Javascript浏览网站时如何获取原始窗口的句柄

> ID：12333874
> 
> 赞同：-1
> 
> 时间：2012-09-08T19:41:29.623
> 
> 标签：javascript

我想触发一个事件，直到完成对商家网站的浏览，比如 www.homedepot.home。

例如，用户访问 www.homedepot 1\. 一旦开始浏览这个网站，就会打开一个弹出窗口，显示一些指令等，并且会一直停留；2\. 之后他可以通过搜索、查看homedepot上的任何产品等继续浏览；3.一旦他完成浏览homedepot并关闭主窗口，我的弹出窗口就会做一些事情。

这里的问题是如何获取用户正在浏览的主窗口的句柄，无论 url 是什么，因为在该窗口中最后浏览的页面关闭时需要触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:46:51.303

您可以在 JavaScript 中使用 Window 对象，当您在打开弹出页面之前进入某个网页时，您可以访问表示访问当前窗口的 Window 对象，在弹出窗口中您还可以访问 Window 对象，Window 对象有一个名为 Opener 的属性，表示调用者窗口。通过该属性，您可以获得父母事件，也可以在父（开启器）窗口上调用函数

看看这个 [http://www.w3schools.com/jsref/obj_window.asp](http://www.w3schools.com/jsref/obj_window.asp)

# java - Eclipse 中的“与编辑器链接”功能有什么作用？

> ID：12333875
> 
> 赞同：13
> 
> 时间：2012-09-08T19:41:34.523
> 
> 标签：java, eclipse, ide

我是 Eclipse 新手（也不知道 NetBeans）。我正在阅读日食教程。但是我很困惑，无法理解“与编辑器链接”到底是做什么的。在 Eclipse->Help 中说：

> 在本地工具栏或导航视图之一的视图菜单中选择“与编辑器链接”按钮。最后，单击 JanesFile.txt 的编辑器选项卡。请注意导航视图如何自我更新以选择您当前正在编辑的文件 (JanesFile.txt)。如果您不喜欢此自动更新，您可以通过取消选择 Link with Editor 轻松将其关闭。

我选择了带有编辑器的链接按钮，但我看不到任何更改它看起来没有做任何可见的事情。它在 Eclipse 的另一个文档中说：

> 当打开多个编辑器时，可能很难跟踪相关资源在导航器中的位置。因此，导航器支持将其树视图与当前编辑的资源同步。
> 
> 要在工作台中的导航器和编辑器之间链接资源，请在其 UI 顶部的导航器工具栏中找到链接按钮。链接按钮是一个带有两个相互指向的箭头的图标。将鼠标移到它上面；悬停帮助应阅读 Link with Editor。这种技术也适用于 JDT 的包资源管理器。

我读了上面和其他一些博客。据说在做大型项目时它非常有用和必要。它到底是做什么的？我无法理解。任何人都可以帮助我掌握它并提供一个清晰的例子或信息来看看它的作用吗？提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T19:44:11.687

它确保您已打开（当前正在编辑）的文件在 Navigator/Project Explorer 中被选中并可见。因此，如果您想查看同一个包中的其他类，例如，您不必手动深入了解它。

如果您想查看它是否正常工作，请打开导航器视图并启用此设置。然后切换到编辑新文件（不使用导航器，例如使用`CTRL`-`T`并直接键入类名，或单击不同的编辑器选项卡）。导航器中的选择应该更新为您现在正在编辑的文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-08T19:49:13.020

当您在项目中打开许多文件时，使用编辑器链接很有用。当您在编辑器中选择一个文件时，Project Explorer 或 Navigator 在其文档树中显示相同的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:40:20.410

每当您在编辑器中选择打开的文件（JSP、Java 等）时​​，导航器将跳转到项目结构中的该文件，打开所需的任何文件夹。

我个人觉得这很痛苦......我喜欢保持我正在使用的项目区域稳定，并且我正在使用`Ctrl`++`Shift`来`R`跳过寻找文件。如果我这样做，导航器就会到处乱跳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T19:44:14.517

简单来说，Link with editor 为文件类型设置默认编辑器，例如，xml 编辑器将用于编辑 xml 文件等，

# php - 重定向请求 (htaccess)

> ID：12333880
> 
> 赞同：-1
> 
> 时间：2012-09-08T19:42:05.080
> 
> 标签：php, .htaccess, mod-rewrite, rewrite

我有这个规则：

```
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?site\.com/ [NC]
RewriteRule .*\.(gif)$ gif.php [L] 
```

据我所知，它将所有请求重定向到 *.gif 文件。我必须如何编辑此规则以仅重定向请求 /uploads/ 文件夹？

对不起我的英语不好 （：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:51:50.687

改写如下：

```
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?site\.com/ [NC]
RewriteRule uploads/.*\.gif$ gif.php [L] 
```

现在它只将请求重定向到文件`uploads`夹内的 gif 文件。

请注意，它会将所有内容重定向到`gif.php`文档根目录内部。该`uploads`文件夹不会成为新请求的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:54:01.953

如果您想将请求重定向到 /uploads/ 路径内的 GIF 文件，您将执行以下操作：

```
RewiteCond %{HTTP_REFERER} !^http://(.+\.)?site\.com/ [NC]
RewriteRule ^/uploads/.*\.gif$ gif.php [L] 
```

# javascript - AngularJS - 使模型变量可用于 jQuery？

> ID：12333882
> 
> 赞同：1
> 
> 时间：2012-09-08T19:42:11.430
> 
> 标签：javascript, jquery, angularjs

我刚开始使用 AngularJS，并试图弄清楚如何从 Angular 控制器外部轻松引用（绑定？）范围变量。

简单代码：

```
<div ng-controller="Ctrl">
  <label>Name:</label>
  <input type="text" ng-model="yourNameInput" placeholder="Enter a name here">
  <input type="button" onClick="console.log(inputName);">
  <hr>
  <h1 ng-bind-template="Hello, {{yourNameInput}}"></h1>
</div> 
```

我将如何绑定`{{yourNameInput}}`到`inputName`对我的应用程序的其余部分可用的 var？我设法做到了一种丑陋的方式：

```
$scope.change = function() { inputName = $scope.yourNameInput; } 
```

进而：

```
<... ng-change = "change()"> 
```

还有更优雅的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:24:22.760

您可以将[$window](http://docs.angularjs.org/api/ng.$window)注入您的控制器并使其在范围内可用。见[例子](http://jsfiddle.net/z7T55/1/)。

```
function Ctrl($scope, $window) {
    $scope.window = $window;
}​ 
```

...

```
<input type="text" ng-model="yourNameInput" placeholder="Enter a name here" ng-change="window.yourName = yourNameInput"> 
```

为了更广泛的使用，您可以在[$rootScope](http://docs.angularjs.org/api/ng.$rootScope)上使用它。看另一个[例子](http://jsfiddle.net/z7T55/2/)。

```
angular.module('myApp', [])
    .run(function($rootScope, $window){
        $rootScope.window = $window;
    }); 
```

您还可以看到[Call Angular JS from legacy code](https://stackoverflow.com/questions/10490570/call-angular-js-from-legacy-code/10508731#10508731)。

对于 console.log() 你可以使用

```
<input type="button" onClick="console.log('{{yourNameInput}}');" value="Log"> 
```

见[例子](http://jsfiddle.net/z7T55/)。

如果你想调试 AngularJS 应用程序，你可以使用[AngularJS Batarang](https://chrome.google.com/webstore/detail/ighdmehidhipcmcojjgiloacoafjmpfk?utm_source=chrome-ntp-icon)（[文本描述和源代码](https://github.com/angular/angularjs-batarang)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T05:21:43.360

好吧，我猜你不会期望你的外部世界会在你的模型改变时自动更新。相反，您可以拉动您的模型。

我不喜欢将模型数据与全局变量同步的想法。如果我是你，我会这样做

```
console.log($("[ng-controller=Ctrl]").scope().yourNameInput); 
```

外部世界的每个地方都需要访问模型。

# ios - 归档 xcode 项目

> ID：12333884
> 
> 赞同：1
> 
> 时间：2012-09-08T19:42:14.757
> 
> 标签：ios, xcode

我的应用程序使用了我插入的一个附加项目，我链接它，然后使用以下代码导入它：

```
#import <SBJson/SBJson.h> 
```

如果我正常运行应用程序，应用程序工作正常，但如果我按下存档按钮，则上面报告的代码行有错误。它说：找不到 SBJson/SBJson.h 文件。为什么是这样？？是因为 JSON 是我添加到项目中的项目吗？为什么它适用于 Run 而不是 Archive？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:11:32.453

您可能已经链接了**SBJSON**文件，而实际上您可能应该将它们**复制**到您的项目中。

要解决此问题，请选择所有 SBJSON 文件，右键单击，然后选择“删除”。出现提示时，选择“删除引用”。

然后，通过 File -> Add files to menu 将这些文件添加回您的项目，并确保选中“copy files”复选框。

# c++ - reinterpret_cast 从类指针到 long

> ID：12333890
> 
> 赞同：2
> 
> 时间：2012-09-08T19:42:33.930
> 
> 标签：c++, windows

我用这些行在 Win64 上编写了一个 C++ 应用程序：

```
Window* wnd = 0;
long l = reinterpret_cast<long> ( wnd ); 
```

编译器在最后一行显示以下错误：

```
error: cast from 'window::Window*' to 'long int' loses precision [-fpermissive] 
```

我使用此值将其放入 SetWindowLong (WindowsAPI) 函数中。

我无法理解这个错误。我正在使用 MinGW-w64 (ruben build)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:50:49.947

阅读我[原来的评论](https://stackoverflow.com/questions/12333890/reinterpret-cast-from-class-pointer-to-long#comment16555850_12333890)。

问题是`sizeof(window::Window *)`大于`sizeof(long)`，这意味着您无法有效地将指针的值存储在`l`. 这解释了错误。

现在，您*真正*想要的是实际使用[`SetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898.aspx)。

> **注意**要编写与 32 位和 64 位版本的 Windows 兼容的代码，请使用**`SetWindowLongPtr`**. 在为 32 位 Windows 编译时，**`SetWindowLongPtr`**定义为对**`SetWindowLong`**函数的调用。

```
window::Window *wnd = ...;
HWND handle = ...;
int index = ...; /* e.g. GWLP_USERDATA */
LONG_PTR val = reinterpret_cast<LONG_PTR>(wnd);
SetWindowLongPtr(handle, index, val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:46:33.120

该消息表明`sizeof(long)`您正在编译的架构上的 小于`sizeof(window::Window *)`. `long`太小而无法将指针的值存储在您所针对的体系结构上。

具体来说，您的目标似乎是 64 位 Windows 系统架构，其中使用了 LLP64 数据模型。在 LLP64 中，a`long`是 32 位，指针是 64 位。

# eclipse - Eclipse indigo 无法在 Windows 7 中启动

> ID：12333891
> 
> 赞同：1
> 
> 时间：2012-09-08T19:42:38.293
> 
> 标签：eclipse, windows-7, crash

Eclipse indigo 不会在 Windows 7 中启动（首次启动），会出现启动画面，并停留在那里，之后什么也没有发生。

到目前为止，我尝试了以下方法：

*   重新安装 Java 6
*   将 vm 参数添加到 eclipse.ini（到正确的 javaw.exe 路径）。在这种情况下，Taskmanager 中没有启动屏幕，并且 eclipse.exe 和 javaw.exe 可用。
*   启动 eclipsec.exe 而不是 eclipse.exe
*   启动 eclipse.exe -clean
*   增加-Xmx384m参数
*   在管理员模式下启动 eclipse.exe

没运气

我的配置：

*   Eclipse Indigo Java 版（32 位）
*   视窗 7（32 位）

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:35:34.037

1）由于到目前为止您还没有运气，请尝试*删除*，重新启动并重新安装Eclipse：

*   删除你的 Eclipse 安装目录

*   删除 Eclipse 工作区目录（例如：c:\users\MYUSERNAME\Workspace）

*   重启你的电脑

*   重新安装 Eclipse。

2) 尝试从命令提示符启动 Eclipse；看看你是否有任何错误。

*   检查您的工作区。验证它是否存在，它是可写的。

3）查看您的工作区下是否有任何日志

*   示例：c:\users\MYUSERNAME\Workspace\.metadata.log

4）按照这里的建议：

*   [http://www.eclipsezone.com/eclipse/forums/t99010.html](http://www.eclipsezone.com/eclipse/forums/t99010.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:09:07.970

好吧，我没有考虑的是我试图启动 Eclipse 的计算机的性能。

%TEMP% 目录已满（300k+ 个文件）并且没有 java 程序可以启动，因为访问临时文件夹需要很长时间。

如果我等了更长的时间，它可能会在 30-40 分钟后开始。

现在，当我使用磁盘清理实用程序时，eclipse 在合理的时间内正常启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T10:45:25.173

在尝试了一些技巧（如 eclipse -clean 或 eclipse -debug -console）后，在日志文件中搜索提示，从 java.library.path 环境中删除 xulrunner，删除一些最近的历史文件等等，我发现解决方案。在您的工作区目录中执行以下步骤：

```
cd .metadata/.plugins

mv org.eclipse.core.resources org.eclipse.core.resources.bak

Start eclipse. (It should show an error message or an empty
workspace because no project is found.)

Close all open editors tabs.

Exit eclipse.

rm -rf org.eclipse.core.resources (Delete the newly created
directory.)

mv org.eclipse.core.resources.bak/ org.eclipse.core.resources
(Restore the original directory.)

Start eclipse and start working. :-) 
```

# c# - 如何使用 Stream Writer 写入文件的开头？

> ID：12333892
> 
> 赞同：8
> 
> 时间：2012-09-08T19:42:38.017
> 
> 标签：c#, stream

我想将我的字符串插入文件的开头。但是在流编写器的开头没有附加功能。那么我该怎么做呢？

我的代码是：

```
string path = Directory.GetCurrentDirectory() + "\\test.txt";
StreamReader sreader = new StreamReader(path);
string str = sreader.ReadToEnd();
sreader.Close();

StreamWriter swriter = new StreamWriter(path, false);

swriter.WriteLine("example text");
swriter.WriteLine(str);
swriter.Close(); 
```

但它似乎没有优化。那么还有其他方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T20:02:42.113

你快到了：

```
 string path = Directory.GetCurrentDirectory() + "\\test.txt";
        string str;
        using (StreamReader sreader = new StreamReader(path)) {
            str = sreader.ReadToEnd();
        }

        File.Delete(path);

        using (StreamWriter swriter = new StreamWriter(path, false))
        {
            str = "example text" + Environment.NewLine + str;
            swriter.Write(str);
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T20:16:43.787

如果您不必考虑写入同一文件的其他进程并且您的进程对目录具有创建权限，则处理此问题的最有效方法是：

1.  使用临时名称创建新文件
2.  写新文本
3.  附加文件中的旧文本
4.  删除文件
5.  重命名临时文件

它不会那么酷和快速，但至少你不必为你现在使用的方法在内存中分配一个巨大的字符串。

但是，如果您确定文件会很小，例如少于几兆字节，那么您的方法还不错。

但是你可以稍微简化你的代码：

```
public static void InsertText( string path, string newText )
{
    if (File.Exists(path))
    {
        string oldText = File.ReadAllText(path);
        using (var sw = new StreamWriter(path, false))
        {
            sw.WriteLine(newText);
            sw.WriteLine(oldText);
        }
    }
    else File.WriteAllText(path,newText);
} 
```

对于大文件（即 > 几 MB）

```
public static void InsertLarge( string path, string newText )
{
    if(!File.Exists(path))
    {
        File.WriteAllText(path,newText);
        return;
    }

    var pathDir = Path.GetDirectoryName(path);
    var tempPath = Path.Combine(pathDir, Guid.NewGuid().ToString("N"));
    using (var stream = new FileStream(tempPath, FileMode.Create, 
        FileAccess.Write, FileShare.None, 4 * 1024 * 1024))
    {
        using (var sw = new StreamWriter(stream))
        {
            sw.WriteLine(newText);
            sw.Flush();
            using (var old = File.OpenRead(path)) old.CopyTo(sw.BaseStream);
        }
    }
    File.Delete(path);
    File.Move(tempPath,path);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:19:01.243

像这样的东西：

```
 private void WriteToFile(FileInfo pFile, string pData)
    {
        var fileCopy = pFile.CopyTo(Path.GetTempFileName(), true);

        using (var tempFile = new StreamReader(fileCopy.OpenRead()))
        using (var originalFile = new  StreamWriter(File.Open(pFile.FullName, FileMode.Create)))
        {
            originalFile.Write(pData);
            originalFile.Write(tempFile.ReadToEnd());
            originalFile.Flush();
        }

        fileCopy.Delete();
    } 
```

# oracle - 从多个更新查询中返回一个“更新的记录”

> ID：12333895
> 
> 赞同：2
> 
> 时间：2012-09-08T19:43:12.407
> 
> 标签：oracle

免责声明：我没有太多的 SQL 经验，也不知道我公司使用的是什么版本的 Oracle。

我有一个明天需要更新的产品价格表。有几千条记录将被更新，但还有一千条记录将保持不变。

现在，我对每条记录都有一个更新语句，虽然我可以将它们全部作为脚本运行，但我想获得一些关于更新了多少记录的反馈，如果可能的话，哪些语句失败了。

如果我以脚本的形式运行我所拥有的内容，我最终会收到大约 5,000 条“1 行已更新”消息，而如果我看到“0 行已更新”，则不知道哪条消息失败了。

**是否可以使用某种形式的脚本来捕获故障，或者至少将更新的行数收集到一个总数中？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T00:51:07.610

您的产品价格表是否有某种修改日期或上次修改的字段？如果是这样，请确保您正在更新这些。

此外，如果使用您的脚本，您应该设置 echo on 并将 spool 设置为日志文件。您的脚本应类似于：

```
-- updates.sql
set serveroutput on
set echo on
WHENEVER SQLERROR EXIT SQL.SQLCODE
spool on
spool updates.log

-- put updates here

commit;
spool off 
```

从与此文件相同的目录登录到 sqlplus 并使用以下命令运行：@updates.sql

updates.log 文件将包含运行的每个语句。

如果您想从单独的更新语句列表中获取总数，则需要在每次更新后检查 SQL%ROWCOUNT。类似（*未经测试*）：

```
declare 
  l_total pls_integer := 0;
begin
  update product set x = 'foo' where y='bar';
  l_total := l_total + SQL%ROWCOUNT;

  update product set x = 'blah' where y='someval';
  l_total := l_total + SQL%ROWCOUNT;

  commit;
  dbms_output.put_line(l_total);
end
/ 
```

这是一个基本的 pl/sql 匿名块，可以与上面的假脱机策略一起使用。

最后，通常设置一个基本日志表，其中包含消息字段、日志日期时间、一些上下文字段（消息来自何处等）、消息类型（日志、错误）等。设置一个处理过程插入日志表（自治事务），然后在需要跟踪统计信息或其他任何内容时使用日志过程（dbms_output 非常有限）。您的环境可能已经有类似的东西，您只需要寻找它（或询问您公司的高级开发人员）。

# javascript - 可以使用带有 json 回调的 html5 视频标签吗？

> ID：12333908
> 
> 赞同：0
> 
> 时间：2012-09-08T19:44:54.773
> 
> 标签：javascript, jquery, json, html, html5-video

想知道这是否可能。

我正在制作一个视频页面，页面顶部有一个主屏幕，主屏幕下方有一些可点击的小屏幕。所以当你点击底部的小屏幕时，主屏幕会呈现类似于youtube的点击视频。

我们从 ooyala 获得如下数据：data="http://player.ooyala.com/static/cacheable/fc6411f99c3b69d5987fcb94f4f48a94/player_v2.swf

另外，我们没有后端的php代码，所以我们只能使用javascript、jquery和html来制作页面。

所以这是我的问题。如果可能，如何使用 html5 视频标签、jquery 或 javascript 和 json 来呈现每个视频？另外，如果有人可以提供任何其他可能的解决方案或更好的解决方案，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:28:21.987

像这样的东西应该工作......

jQuery：

```
$("a").click(function(){
    $(".video").html("");
    var url = $(this).data("url");
    $(".video").append("<video controls=\"controls\"><source src=\"" + url + "\" type=\"video/mp4\" class=\"video\" /></video>"); 
});​ 
```

HTML：

```
<div class="video">  
</div>
<a class="one" href="#" data-url="VIDEO URL ONE">One</a>
<a class="two" href="#"  data-url="VIDEO URL TWO">two</a> 
```

示例：http: [//jsfiddle.net/charlescarver/xJ6mz/1/](http://jsfiddle.net/charlescarver/xJ6mz/1/)

* * *

单击`<a>`链接后，它会获取其`data-url`属性，将其放入变量中，然后将视频播放器附加到`div`具有正确`src`.

# c++ - 递归中的异常概率（8 个皇后概率）

> ID：12333911
> 
> 赞同：0
> 
> 时间：2012-09-08T19:45:22.313
> 
> 标签：c++, recursion

我已经为 8-Queens 问题编写了一个程序。它打印了所有可能的解决方案。

Queens() 找到所有可能的解决方案。ok() 告诉给定的列和行是否安全。

非常奇怪的问题是：

“计数”不会增加。我不知道为什么。

```
#include<iostream.h>
#include<stdlib.h>
#include<conio.h>

int arr[8][8]={0};
int count=0;

int ok(int k,int j)
{
 int i,l;
 int tup[8]={0};

 for(i=0;i<k;i++)
 {
  for(l=0;l<8;l++)
  {
   if(arr[i][l]==1)
   tup[i]=l;
  }
 }

 for(i=0;i<k;i++)
 {
  if((abs(tup[i]-j)==abs(i-k))||(tup[i]==j)||(arr[i][j]==1))
  return 0;
 }

 return 1;

}

void queen(int i)
{
 int j,k,temp;

 if(i==8)
 {
  count++;
  cout<<"Solution no. "<<count<<":\n";

  for(i=0;i<8;i++)
  {
   for(j=0;j<8;j++)
   {
    if(arr[i][j]==1)
    cout<<"Q";
    else
    cout<<"=";
    cout<<" ";
   }
   cout<<"\n";
  }
  cout<<"---------------\n";

  getch();

 }

 for(j=0;j<8;j++)
 {
  if(ok(i,j))
  {
   for(k=0;k<8;k++)
   arr[i][k]=0;
   arr[i][j]=1;
   queen(i+1);
  }
 }

 arr[i][j]=0;

}

int main()
{

 clrscr();    

 queen(0);

 return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T00:29:52.407

部分完成后，您应该从`queen`函数返回。`i==8`目前你继续，最后你`arr[i][j]=0;`用`i==7`and执行`j==8`。这是数组末尾的一个，并且`count`紧随其后驻留`arr`在内存中，它被重置为零。

发现使用`gdb`：增加计数后中断，在计数上设置（硬件）观察点，并继续查看计数再次更改值的位置。

# ios - 推然后模态然后推？

> ID：12333914
> 
> 赞同：2
> 
> 时间：2012-09-08T19:45:51.520
> 
> 标签：ios, xcode, uiviewcontroller

我的应用程序中有一个主菜单屏幕，因此当我按下按钮时，我会推送到另一个视图控制器。在其中一个视图控制器中，我使用轻击手势识别器进入模态视图，然后再次关闭模态视图。但是在这个模态视图中，我想要一个按钮 {主菜单} 来关闭视图控制器，然后关闭推送。

我如何关闭 2 层推送和模式视图。使用 push segue，您是关闭 push 视图，还是只是添加另一个 push 以返回。现在我不能关闭模态并按下那个 1 按钮（在模态屏幕上）。

一些建议会很有帮助..

编辑：主菜单视图控制器->(push segue)-> view controllerXXX view controllerXXX->(modal segue)-> pause controller pause controller->(dismiss modal segue)-> view controllerXXX **pause controller->(???(将不得不关闭模式和弹出推送）？？？）-> 主菜单视图控制器**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:01:07.053

您应该使用委托从模态视图控制器向呈现它的父视图控制器进行回调，然后它可以关闭模​​态并将其自身从导航堆栈中弹出。

如果您不熟悉委托模式，请参阅 Apple 的介绍：

[http://developer.apple.com/library/ios/#Documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html](http://developer.apple.com/library/ios/#Documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)

您还可以在 Ray Wenderlich 的网站上尝试本教程的开始情节提要（其中也有使用委托的示例）：

[http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

编辑：

**以下是您如何**从呈现视图控制器中关闭模态视图控制器（也就是说，self 是呈现模态的视图控制器）：

```
[self dismissModalViewControllerAnimated:YES]; 
```

**以下是从导航堆栈弹出视图控制器的方法**（其中 self 是要弹出的视图控制器）：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

请参阅 Wenderlich 教程（通读所有内容，有 2 个部分），它将向您展示如何创建协议和调用委托的方法。

不，Wenderlich 的教程中没有提到“委托”这个名称……这是设计模式的名称。

# javascript - 如何制作由映射插件创建的剔除对象的深层副本

> ID：12333915
> 
> 赞同：22
> 
> 时间：2012-09-08T19:46:03.513
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

这是我的场景。我正在使用淘汰映射插件为我创建一个可观察的视图模型层次结构。我的层次结构中有嵌套元素。在层次结构中的特定点，我想放置一个添加按钮以在 observablearray 中插入该元素的新空白副本。问题是我不能只说whateverArray.push(new MyObject())。

由于映射插件实际上为我创建了整个层次结构，因此我无权访问“MyObject”。因此，插入新项目似乎我唯一能做的就是查看前一个项目并复制它。我尝试了 ko.utils.extend 函数，但这似乎并没有进行实际的克隆。它给了我一个对象，但是当我更新该对象时，它仍然会影响从中复制它的原始对象。

请参阅 jsfiddle[示例](http://jsfiddle.net/PLx6G/)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-09T00:12:48.670

可能有一种方法可以在映射设置中进行设置，但我还不能完全弄清楚。

同时，您可以取消映射对象并将其映射回来，因此您实际上是在制作副本。

```
var newJob = ko.mapping.fromJS(ko.mapping.toJS(job)); 
```

这将是最简单的方法，就像任何其他库一样，再次“反序列化”和“序列化”。

* * *

我一直在寻找一种使用映射选项的好方法，并找到了一种方法。

默认情况下，映射插件将从源对象中获取可观察实例，并在目标对象中使用相同的实例。所以实际上，两个实例将共享相同的 observables（错误？）。我们需要做的是为每个属性创建一个新的 observable 并将值复制过来。

幸运的是，有一个方便的实用函数来映射对象的每个属性。然后我们可以创建新的可观察实例，并使用这些值的副本进行初始化。

```
// Deep copy
var options = {
    create: function (options) {
        // map each of the properties
        return ko.mapping.visitModel(options.data, function (value) {
            // create new instances of observables initialized to the same value
            if (ko.isObservable(value)) { // may want to handle more cases
                return ko.observable(value);
            }
            return value;
        });
    }
};
var newJob = ko.mapping.fromJS(job, options); 
```

请注意，这将是一个浅拷贝，如果您想要一个深拷贝，您可能必须递归地映射对象。但是，这将解决您示例中的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-28T03:33:17.457

```
ko.utils.clone = function (obj) {
    var target = new obj.constructor();
    for (var prop in obj) {
        var propVal = obj[prop];
        if (ko.isObservable(propVal)) {
            var val = propVal();
            if ($.type(val) == 'object') {
                target[prop] = ko.utils.clone(val);
                continue;
            }
            target[prop](val);
        }
    }
    return target;
}; 
```

这是我的解决方案，希望对您有所帮助。在此代码中，`obj`将是您的 viewModel 对象。

# c - Typedef struct 指向函数的指针 (C)

> ID：12333922
> 
> 赞同：0
> 
> 时间：2012-09-08T19:46:58.843
> 
> 标签：c, function, pointers, struct, typedef

我正在尝试将 typedef 结构指针传递给函数，编译器抱怨此错误消息：**错误：未知类型名称“RootP”。**这是代码...

```
int main()
{
    typedef struct Root
    {
        struct Root *child;
    }*RootP;
    RootP rootNode = malloc(sizeof(struct Root));
    rootNode->child = NULL;
    ....

}

void mkdir(RootP rootNode, char param2[60], char pwd[200])
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:49:10.450

`struct`应该在 之外，`main`所以移动

```
typedef struct Root
{
    struct Root *child;
 }*RootP; 
```

在`main`函数之前。如果程序足够大，请考虑将其移动到某个头文件 ( `*.h`)

我会避免使用这个`mkdir`名字。它在[Posix](http://pubs.opengroup.org/onlinepubs/009695399/functions/mkdir.html)中定义，在 Linux 上指的是[mkdir(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mkdir.2.html)系统调用。

我不觉得那`typedef struct Root *RootP;`是漂亮的代码：你通常想一眼看一下 C 的东西是指针。我会改为声明`struct root_st`and have `typedef struct root_st Root;` （Gtk 也使用那个，或者非常相似的编码约定）。和代码`Root* rootnode`。但这是有争议的，也是品味问题。

# php - laravel 转到页面分页

> ID：12333924
> 
> 赞同：1
> 
> 时间：2012-09-08T19:47:15.007
> 
> 标签：php, html, pagination, laravel

知道如何转到特定的分页页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:03:59.207

您需要做的就是复制分页器创建的链接以转到您想要的页面。

```
echo HTML::link('controller?page=2', 'Link Name'); 
```

只要路由或控制器设置正确，这将在加载时为您生成分页器结果的第 2 页。

# twitter-bootstrap - 引导柱形图

> ID：12333925
> 
> 赞同：0
> 
> 时间：2012-09-08T19:47:27.170
> 
> 标签：twitter-bootstrap

有没有一种方法可以让我将引导进度条横向转动以将它们用作柱形图？我正在考虑去谷歌图表，但使用引导程序更容易。这里有一些代码可以通过 StackOverflow 质量标准。

```
Code goes here. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:41:58.080

*这是一种解决方法。它不是那么好，但它很短并且有效。*

**用法**：与通常的进度条非常相似，但有两点不同：

1.  您应该设置栏的高度，而不是宽度
2.  进度条高度是固定的（但可以使用内联样式更改）

CSS：

```
.progress-vertical {
    width: 20px;
    height: 100px !important;
    position: relative;
}
.progress-vertical .bar {
    width: 100% !important;
    position: absolute;
    bottom: 0;
    border-bottom-left-radius: inherit;
    border-bottom-right-radius: inherit;
} 
```

示例：http: [//jsfiddle.net/mQzj9/251/](http://jsfiddle.net/mQzj9/251/)

**编辑 1**：修复了错误的示例链接。

**编辑 2**：感谢 Pavlo Mykhalov，不再需要 jQuery 代码（CSS 更新）

**编辑 3**：CSS 链接已过时，已更新。

# sql - SQL -- 将两个结果相除

> ID：12333928
> 
> 赞同：8
> 
> 时间：2012-09-08T19:48:10.993
> 
> 标签：sql, oracle, oracle-sqldeveloper

我在下面有两个查询，它们都来自同一个“玩家”表。我想将查询 1 除以查询 2 以获得相关百分比。我对更详细的 SQL 查询以及在论坛上发帖相对较新……但如果您对如何将其结合以获得相关百分比结果有任何建议，请告诉我。

### 1

```
Select
  sysdate,sum(Count(init_dtime))
From Player p
Where
  Trunc(Init_Dtime) > Trunc(Sysdate) - 7 
  And Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
  and trunc(create_dtime) < to_date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(Init_Dtime)
Order By Trunc(Init_Dtime) Asc 
```

### 2

```
Select
  Sum(Count(Create_Dtime))
From Player P
where 
  Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
  And Trunc(Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(create_Dtime)
Order By Trunc(create_Dtime) Asc 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T19:53:47.873

你可以说

```
select sysdate,
       count((init_dtime)) / sum((Create_Dtime)) * 100 as percentage
  from Player p
 where Trunc(Init_Dtime) > Trunc(Sysdate) - 7 
   and Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
   and trunc(create_dtime) < to_date('2015-sep-9','yyyy-mon-dd')
   order by percentage asc 
```

`group by`不需要 SQL 中的 ，因为您并没有真正按某些东西进行分组。`group by`例如，当您需要按玩家的百分比时很有用。然后你会说`group by player_id`，并且`select`会有`player_id`：

```
select player_id, count(…)
  from …
 where …
group by player_id 
```

编辑：如果 where 子句不同：

```
select sysdate, 
       (
           (select count((init_dtime))
             from player p
            where trunc(Init_Dtime) > trunc(Sysdate) - 7 
              and Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
              and trunc(create_dtime) < to_date('2015-sep-9','yyyy-mon-dd'))
            / 
           (select count((Create_Dtime))
              from player P
             where trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
               and trunc(Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd'))
       ) * 100 as percentage
from dual 
```

# objective-c - 在 Mac 上获取最后一个粘贴板项目条目的来源和时间

> ID：12333929
> 
> 赞同：2
> 
> 时间：2012-09-08T19:48:11.350
> 
> 标签：objective-c, macos, unix, nspasteboard, pasteboard

有什么办法可以让我最后一次进入 NSPasteboard 以及使用 Objective-C 代码或某些终端命令在 Mac 上执行复制/剪切操作的应用程序

# c++ - 释放内存时出错

> ID：12333930
> 
> 赞同：1
> 
> 时间：2012-09-08T19:48:45.673
> 
> 标签：c++, memory-management, free

这些是文件：

```
//============================================================================
// Name        : linearMatrix.hpp
// Author      : Flores, Facundo Gabriel
// Version     : 0.1
// Description : This file contains the linearMatrix class.
//===========================================================================

#ifndef LINEARMATRIX_HPP_
#define LINEARMATRIX_HPP_

class linearMatrix
{
public:
    //Constructor
    linearMatrix(const int Width, const int Heigth);

    //Destructor
    ~linearMatrix();

    //We read a matrix file
    void Read_File_Matrix(const char *Path);

    //We write a matrix file
    void Write_File_Matrix(const char *Path);

    //Generate a diagonal dominant matrix
    void Generate_Diagonal_Dominant(void);

    //Generate a random matrix
    void Generate_Random_Matrix(void);

    //Copy a float *vector
    void Copy_Vector(const float *V, const int Width, const int Heigth);

    //Show a little vector
    void Show_Little_Matrix(void);

private:
    int _Width, _Height; // Width and Height
    float* myVector;

    //Aux function for testing
    bool Test_Sizes(const int Width, const int Heigth);
};

#endif /* LINEARMATRIX_HPP_ */

//============================================================================
// Name        : linearMatrix.cpp
// Author      : Flores, Facundo Gabriel
// Version     : 0.1
// Description : This file contains the linearMatrix implementation class.
// A linear matrix is a vector that represents a matrix.
// We will read this kind of classes from files, because
// they are generally large. But linearMatrix can represent
// a 1D vector if Height is 1.
//============================================================================

#include <iostream>
using std::cout;
using std::endl;
using std::cerr;
using std::bad_alloc;

#include <cstdio>

#include <cstdlib>

#include <ctime>

#include <new>

#include "linearMatrix.hpp"

#define FALSE 0
#define TRUE 1

//Test if W and H are correct
bool linearMatrix::Test_Sizes(const int W, const int H)
{
    if(W < 1 || W > 32500)
        return FALSE;
    if(H < 1 || H> 32500)
        return FALSE;
    return TRUE;
}

// We set the Width and Height parameters
linearMatrix::linearMatrix(const int Width, const int Height)
{
    if(Test_Sizes(Width, Height))
    {
        _Width = Width;
        _Height = Height;
        try{
            myVector = new float[_Width * _Height];
        }
        catch(bad_alloc &ex)
        {
            cerr << "Exception:" << ex.what();
            exit(1);
        }
    }
    else
    {
        cout<<"Bad sizes!"<<endl;
        exit(1);
    }

}

linearMatrix::~linearMatrix()
{
    delete [] myVector;
}

//We set a random vector using its Width and Height
void linearMatrix::Generate_Random_Matrix(void)
{
    srand(time(NULL));
    for(int i = 0; i < _Width; i++)
        for(int j = 0; j < _Height; j++)
        {
            // We are putting a number between 0 and 99
            myVector[i * _Width + _Height] = rand() % 100;
        }
}

//We set a diagonal dominant matrix
void linearMatrix::Generate_Diagonal_Dominant(void)
{
    for(int i = 0; i < _Width; i++)
        for(int j = 0; j < _Height; j++)
        {
            if(i == j) //Diagonal item
                myVector[i * _Width + j] = 32500;
            else
                myVector[i * _Width + j] = 0.5;
        }
}

//We copy V into myVector
void linearMatrix::Copy_Vector(const float *V, const int Width, const int Heigth)
{
    if(Width != _Width || Heigth != _Height)
    {
        cout<<"Different sizes, we cannot copy vector V"<<endl;
        exit(1);
    }
    else
    {
        for(int i = 0; i < _Width; i++)
            for(int j = 0; j < _Height; j++)
            {
                myVector[i * _Width + j] = V[i * Width + j];
            }
    }
}

//We show a little matrix. Assume H < 11 and W < 11
void linearMatrix::Show_Little_Matrix(void)
{
    cout.precision(5);
    if(_Height < 11 && _Width < 11)
    {
        for(int i = 0; i < _Width; i++)
        {
            for(int j = 0; j < _Height; j++)
            {
                cout<<myVector[i * _Width + j]<<" ";
            }
            cout << endl;
        }
    }
    else
    {
        cout << "I can show only little matrices in the console " << endl;
    }
}

void linearMatrix::Write_File_Matrix(const char *Path)
{
    FILE *pFile = fopen(Path, "wb");
    fwrite(&_Height, sizeof(int), 1, pFile);
    fwrite(&_Width, sizeof(int), 1, pFile);
    fwrite(myVector, sizeof(float), _Height * _Width, pFile);
    fclose(pFile);
}

void linearMatrix::Read_File_Matrix(const char *Path)
{
    FILE *pFile = fopen(Path, "rb");
    if(pFile == NULL){
        cout << "Cannot read :" << Path << endl;
        exit(1);
    }
    fread(&_Height, sizeof(int), 1, pFile);
    fread(&_Width, sizeof(int), 1, pFile);

    try{
        myVector = new float[_Width * _Height];
    }
    catch(bad_alloc &ex)
    {
        cout << "Exception:" << ex.what();
        exit(1);
    }
    fread(myVector, sizeof(double), _Height * _Width, pFile);
} 
```

我正在尝试将此类与以下内容一起使用`main.cpp`：

```
//============================================================================
// Name        : main.cpp
// Author      : Flores, Facundo Gabriel
// Version     : 0.1
// Description : This file is a test.
//===========================================================================
#include <iostream>
#include "linearMatrix.hpp"

int main(void)
{
    linearMatrix Matrix2(3,1);

    Matrix2.Generate_Diagonal_Dominant();
    Matrix2.Show_Little_Matrix();

    return 0;
} 
```

所以错误是：

> ```
> *** glibc detected *** /.../linearMatrix/Debug/linearMatrix: free(): invalid next size (fast): 0x00000000007f1010 *** 
> ```

我还不知道怎么用`valgrind`。但是为什么会有错误呢？该程序向我显示了正确的输出，但是当析构函数被“执行”时，释放时出现错误`myVector`。如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:58:55.570

这是一个错误

```
void linearMatrix::Generate_Diagonal_Dominant(void)
{
    for(int i = 0; i < _Width; i++)
        for(int j = 0; j < _Height; j++)
        {
            if(i == j) //Diagonal item
                myVector[i * _Width + j] = 32500;
            else
                myVector[i * _Width + j] = 0.5;
        }
} 
```

应该

```
void linearMatrix::Generate_Diagonal_Dominant(void)
{
    for(int i = 0; i < _Width; i++)
        for(int j = 0; j < _Height; j++)
        {
            if(i == j) //Diagonal item
                myVector[j * _Width + i] = 32500;
            else
                myVector[j * _Width + i] = 0.5;
        }
} 
```

换句话说，当你计算偏移量时，你有 i 和 j 错误的方式（或者你应该使用`i * _Height + j`）。你似乎自始至终都犯了同样的错误。

正如克里斯提到的，您还有其他错误，例如不遵循*三规则。*

# tsql - 在 SQL Azure 联合中获取已使用/未使用的数据库容量

> ID：12333931
> 
> 赞同：0
> 
> 时间：2012-09-08T19:48:49.057
> 
> 标签：tsql, azure-sql-database

如何检索 SQL Azure 联合中所有联合数据库的大小（以 MB 或 GB 为单位）？获取所有成员的已用空间和未使用空间的 TSQL 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:34:11.663

您可以对每个联合成员进行扇出查询。有关进行扇出查询的示例，请查看[http://federationsutility-seasia.cloudapp.net/](http://federationsutility-seasia.cloudapp.net/)

例如，您可以在实用程序上触发此查询以获取每个成员的 db 大小：

从 sys.dm_db_partition_stats 中选择总和（reserved_pa​​ge_count）* 8192

# c - ANSI C - 在任意树中查找节点

> ID：12333934
> 
> 赞同：0
> 
> 时间：2012-09-08T19:48:58.453
> 
> 标签：c, algorithm, data-structures, ansi

我创建了一个简单的测试程序，如下所示（省略了错误检查）。

我的 Tree_Find() 和 Node_Find() 函数似乎工作正常，但我想知道是否有更有效的方法来实现相同的目标。

**节点.h**

```
typedef struct _Node Node;

Node* Node_Create(int nTag);
void Node_Destroy(Node **ppNode);
void Node_Append(Node **ppParent, Node *pChild);
Node* Node_Find(Node *pNode, int nTag); 
```

**树.h**

```
#include "Node.h"

typedef struct _Tree Tree;

Tree* Tree_Create(void);
void Tree_Destroy(Tree **ppTree);
void Tree_Init(Tree *pTree);
Node* Tree_Find(Tree *pTree, int nTag); 
```

**节点.c**

```
#include "Node.h"

struct _Node
{
    int nTag;
    struct _Node *pFirstChild;
    struct _Node *pNextSibling;
};

Node* Node_Create(int nTag)
{
    Node *pNode = malloc(sizeof(*pNode));
    pNode->nTag = nTag;
    pNode->pFirstChild = NULL;
    pNode->pNextSibling = NULL;

    return pNode;
}

void Node_Destroy(Node **ppNode)
{
    Node *pNode = NULL;

    if (!ppNode)
        return;

    if ((pNode = *ppNode) == NULL)
        return;

    Node_Destroy(&(pNode->pFirstChild));
    Node_Destroy(&(pNode->pNextSibling));

    free(pNode);
    *ppNode = NULL;
}

void Node_Append(Node **ppParent, Node *pChild)
{
    Node *pLastChild = NULL;

    if (!(*ppParent))
        return;

    if (!((*ppParent)->pFirstChild))
    {
        (*ppParent)->pFirstChild = pChild;

        return;
    }

    pLastChild = (*ppParent)->pFirstChild;
    while (pLastChild->pNextSibling)
        pLastChild = pLastChild->pNextSibling;

    pLastChild->pNextSibling = pChild;
}

Node* Node_Find(Node *pNode, int nTag)
{
    Node *pNodeFound = NULL;

    if (!pNode)
        return NULL;

    if (pNode->nTag == nTag)
        return pNode;

    if ((pNodeFound = Node_Find(pNode->pFirstChild, nTag)) == NULL)
        pNodeFound = Node_Find(pNode->pNextSibling, nTag);

    return pNodeFound;
} 
```

**树.c**

```
#include "Tree.h"

struct _Tree
{
    Node *pRoot;
};

Tree* Tree_Create(void)
{
    Tree *pTree = malloc(sizeof(*pTree));

    pTree->pRoot = NULL;

    return pTree;
}

void Tree_Destroy(Tree **ppTree)
{
    Tree *pTree = NULL;

    if (!ppTree)
        return;

    if ((pTree = *ppTree) == NULL)
        return;

    Node_Destroy(&(pTree->pRoot));

    free(pTree);
    *ppTree = NULL;
}

void Tree_Init(Tree *pTree)
{
    Node *p1 = Node_Create(1);
    Node *p2 = Node_Create(2);
    Node *p3 = Node_Create(3);
    Node *p4 = Node_Create(4);
    Node *p5 = Node_Create(5);

    Node_Append(&p1, p2);
    Node_Append(&p1, p3);
    Node_Append(&p3, p4);
    Node_Append(&p3, p5);

    pTree->pRoot = p1;
}

Node* Tree_Find(Tree *pTree, int nTag)
{
    if (!pTree)
        return NULL;

    return Node_Find(pTree->pRoot, nTag);
} 
```

**主程序**

```
#include "Tree.h"

int main(void)
{
    Node *pNodeToFind = NULL;

    Tree *pTree = Tree_Create();

    Tree_Init(pTree);

    pNodeToFind = Tree_Find(pTree, 1);
    pNodeToFind = Tree_Find(pTree, 2);
    pNodeToFind = Tree_Find(pTree, 3);
    pNodeToFind = Tree_Find(pTree, 4);
    pNodeToFind = Tree_Find(pTree, 5);
    pNodeToFind = Tree_Find(pTree, 6); // Not found!

    Tree_Destroy(&pTree);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:06:37.353

正如 Linus Torvalds 所说，一切都与数据结构有关。你的算法本身不能优化太多，但你的数据结构可以。重复的指针访问并不便宜，你可以在一个节点中存储一个包含 256 个对象的数组以获得更高的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:24:57.310

如果您的目标是构建和搜索没有键顺序的任意树，那么您已经完成了几乎所有可以做的事情，除了一件事：您的 append 方法将具有 O(n^2) 运行时间，其中 n 是单个节点可能具有的子节点。如果你维护一个队列而不是一个列表，你可以在单位时间内追加。有一个很好的技巧来实现一个队列，在头中只有一个指针，而不是单独的头和尾指针。使子列表循环并让父指向循环列表的*尾部*。那么 parent->children 是尾部元素，而 parent->children->sibling 是头部。使用此设置，您可以推送到尾部，并从子列表的头部推送和弹出。这些操作的代码可以非常优雅，并且您的追加将是恒定的时间。

或者，您可以将子项存储在自动调整大小的数组中。存在轻微的存储损失（您需要为每个节点存储一个指针和子节点计数），但在某些情况下随机访问子节点可能很方便。

# jsf - JSF DataTable command buttons not working

> ID：12333944
> 
> 赞同：0
> 
> 时间：2012-09-08T19:50:32.763
> 
> 标签：jsf, jsf-2, datatable, primefaces, managed-bean

I am using primefaces 3.3, have 3 components on page: data table, edit area, command button. I have 1 strange issue: when I open page, data is displayed in data table, but if I click on any of button, debugger suggests that corresponding button code is not even called. However, if I click on any record in table, edit area is populated, then if I click on buttons they start working. below is page code, i tried different options, putting all content in 1 form etc., none works. please help

```
 <ui:define name="content">
        <h:form id="form" prependId="false">
            <p:growl id="growl" showDetail="true"/>  
            <p:dataTable id="table" var="var" 
                         value="#{regions.list}" 
                         selection="#{regions.selected}"  
                         rowKey="#{var.idRegion}"
                         selectionMode="single" 
                         paginator="true" rows="10" 
                         paginatorPosition="bottom"                                  
                         >                                
                <p:ajax event="rowSelect" listener="#{regions.onRowSelect}" update=":frmEdit :form:growl"  />  
                <p:ajax event="rowUnselect" listener="#{regions.onRowUnSelect}"  update=":frmEdit :form:growl"/>  

                <f:facet name="header">  
                    List of Regions  
                </f:facet>  
                <p:column sortBy ="#{var.shortName}">
                    <f:facet name="header">Short Name</f:facet> 
                    <h:outputText value="#{var.shortName}" />
                </p:column>
                <p:column sortBy ="#{var.fullName}">
                    <f:facet name="header">Full Name</f:facet>
                    <h:outputText value="#{var.fullName}" />
                </p:column>
                <p:column sortBy ="#{var.created}">
                    <f:facet name="header">Created On</f:facet>
                    <h:outputText value="#{var.created}" />
                </p:column>
            </p:dataTable>
                            </h:form>
            <p:panel header="Add/Edit Properties">
        <h:form id="frmEdit">
                <h:panelGrid id="display" columns="6" cellpadding="4" >

                    <h:outputText value="Short Name:" />
                    <h:inputText value="#{regions.selected.shortName}" />

                    <h:outputText value="Full Name:" />
                    <h:inputText value="#{regions.selected.fullName}" />

                </h:panelGrid>
        </h:form>
        <h:form id="frmBtn">
                <h:panelGrid id="command" columns="6"  cellpadding="4" >
                    <p:commandButton id="new" value="New" actionListener="#{regions.add()}"  process="@this :frmEdit"  update="result :frmEdit :form" >                                
                    </p:commandButton>
                    <p:commandButton id="save" value="Save" actionListener="#{regions.save()}" process="@this :frmEdit"  update="result :frmEdit :form" >                                
                    </p:commandButton>
                    <p:commandButton id="delete"  value="Delete" actionListener="#{regions.delete()}"  process="@this :frmEdit"  update="result :frmEdit :form" >                                
                    </p:commandButton>
                    <p:commandButton id="refresh"  value="Refresh" actionListener="#{regions.refresh()}"  process="@this :frmEdit"  update="result :frmEdit :form" >                                
                    </p:commandButton>
                </h:panelGrid>

                <p:messages id="result" showDetail="true" autoUpdate="true"/>  
        </h:form>
            </p:panel>
    </ui:define> 
```

below is JSF MB Code:

```
@ManagedBean
@ViewScoped
public class Regions implements Serializable {
    private List<Region> list;
    private Region selected;
    private @EJB RegionFacade esvc;  //entity services    
    private FacesContext context;
    private FacesMessage msg;
    private boolean newRec =false;

    @SuppressWarnings("OverridableMethodCallInConstructor")
    public Regions() {
//        context = FacesContext.getCurrentInstance();
//        HttpSession session = (HttpSession)context.getExternalContext().getSession(false);
//        Users user = (Users)session.getAttribute("user");
//        if (user != null)
//            init();
//        else {
//            msg = new FacesMessage("Session Expired, Return to Login Page");
//            context.addMessage(null, msg);
//        }
    }

    @PostConstruct
    public void init(){        
        try{
            list = esvc.findAll();
        }catch (Exception ex){
            System.out.println(ex);
        }
    }

    public String add(){
        selected = new Region();          
        newRec = true;
        return "region";
    }

    public String save(){
        int result;
        if (newRec){
            result=esvc.insert(selected);
            newRec=false;
        }
        else{       
            result=esvc.update(selected);
        }
        refresh();
        context = FacesContext.getCurrentInstance();
        if (result>0){
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Success", "Record Saved");
            refresh();
        }else{
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Failure", "Record not Saved");            
        }
        context.addMessage(null, msg);
        return "region";
    }

    public String delete(){
        int result;
        result= esvc.delete(selected);
        context = FacesContext.getCurrentInstance();
        refresh();
        if (result>0){
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Success", "Record Deleted");            
            refresh();
        }else {
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Failure", "Record not Deleted");            
        }
        context.addMessage(null, msg);
        return "region";
    }

    public void refresh(){
        selected=null;
        list=getList();         
    }

    public List<Region> getList() {
        return list;
    }

    public Region getSelected() {
        return selected;
    }

    public void setSelected(Region selected) {
        this.selected = selected;
    }

    public void onRowSelect(SelectEvent event) {
        context = FacesContext.getCurrentInstance();
        msg = new FacesMessage("Selected", ((Region) event.getObject()).getFullName());
        context.addMessage(null, msg);
    }

    public void onRowUnSelect(UnselectEvent event) {
        context = FacesContext.getCurrentInstance();
        selected=null;
    }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:50:58.793

`ActionListener`方法（要像您一样在属性上使用`actionListener`）必须采用`ActionEvent`参数和`void`返回类型。如果要保留方法签名，请删除`actionListener`命令按钮上的属性并使用该属性。`action`但是，如果您需要在按钮上触发事件时立即处理事件，则必须更改方法签名以实现`ActionListener` [接口](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)。

# html - Make webpage fixed width

> ID：12333945
> 
> 赞同：0
> 
> 时间：2012-09-08T19:50:37.733
> 
> 标签：html

I need help with making my webpage fixed width instead of liquid. When I resize the browser the text collapses onto itself. I want it to stay in place. I changed my container size to pixels instead of a percentage, but the text still collapses when I change the size of the browser. Any way to keep this a fixed width?

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Happy Tails</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<style type="text/css">

/* body and wrapper */
* {
margin: 0px 0px;
padding: 0px 0px;
}

body {
background-color: #C15D63;
}

#outer {

}

#container {
width: 1138px; 
}

/* header */

/* navigation */

/* main content section */
#dog, #cat, #other {
//width: 750px; 
height: 204px;
margin-left: 357px;
background-color: #E198B2;
padding: 1em;
}

/* dog content */
#dog_float {
position: absolute;
top: 15px;
right: 300px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#dog_inner {

}

#dog h1 {
position: absolute;
top: 15px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#dog_inner p.description {
position: absolute;
top: 34px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#dog p {
position: absolute;
top: 60px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* cat content */
#cat_float {
position: absolute;
top: 250px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#cat_inner {

}

#cat h1 {
position: absolute;
top: 250px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#cat_inner p.description {
position: absolute;
top: 269px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#cat p {
position: absolute;
top: 295px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* other content */
#other_float {
position: absolute;
top: 485px;
left: 376px;
border: 2px solid #222222;
width: 220px;
height: 204px;
}

#other_inner {

}

#other h1 {
position: absolute;
top: 485px;
left: 610px;
font-weight: bold;
font-family: Copperplate Gothic Light, sans-serif;
font-size: 1.2em;
text-transform: uppercase;
}

#other_inner p.description {
position: absolute;
top: 504px;
left: 610px;
font-weight: bold;
font-size: .8em;
padding: 5px 0px 5px 0px;
}

#other p {
position: absolute;
top: 530px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
}

/* footer */
#footer {
clear: both;
border: 3px outset;
background-color: #62587C;
height: 60px;
width: 776px;
margin-left: 357px;
}

#footer_main {
float: left;
margin-left: 10px;
}

#footer_inner {
font-family: "Times New Roman", Times, serif;
font-size: 14px;
letter-spacing: 1.5px;
}

.footer_location {
float: left;
font-size: .85em;
text-align: left;
padding: 14px 55px 15px 60px;
}

.footer_social {
float: left;
font-size: .85em;
padding: 18px 5px 0px 35px;
}

#footer img {
padding: 0px 5px 0px 0px;
}

.footer_contact {
float: right;
font-size: .85em;
text-align: right;
padding: 14px 60px 15px 55px;
}

#footer a:link {
color: black;
}

#footer a:hoover {
color: black;
}

</style>
</head>

<body>
<div id="outer">
<div id="container">

    <div id="dog">

    <div id="dog_float">
    <img src="beanie.png" alt="Beanie, 10yrs" />
    </div><!--end div dog_float-->

    <div id="dog_inner">
    <h1>Beanie Baby</h1>
    <p class="description">Yorkshire Terrier, Female, 10 years, 5 lbs.</p><!--end p description-->

    <p>
    Beanie Baby was brought into our rescue from Lancaster, PA where she and her two siblings were born to a breeder. When she was born she was the size of an actual beanie baby, hence the name! She was adopted in 2008 to a family of three who loved and cared for her. With some good TLC, Beanie became an outgoing pup who loved everyone and every other animal, but she was a total momma's girl! She loved to snuggle under the blankets and was always there to greet you after a long day at work. Beanie passed away in 2011.
    </p>    
    </div><!--end div dog_inner-->
    </div><!--end div dog-->

    <div id="cat_float">
    <img src="tink.png" alt="Tinkerbell, 18yrs" />
    </div><!--end div cat_float-->

    <div id="cat">

    <div id="cat_inner">
    <h1>Tinkerbell</h1>
    <p class="description">Tabby Short Hair, Male, 18 years, 12 lbs.</p><!--end p description-->
    <p>
    Tinkerbell first came into our rescue 18 years ago. He loved to spend his days outside soaking up the sun and the nights inside sleeping an the foot of someone's bed. Every time Tinkerbell heard a can opener, he came running assuming that he was going to get a helping of tuna. He was a cat that enjoyed his personal space, but had a daily routine to come visit someone for a good scratching. Tinkerbell passed away in 2012.
    </p>
    </div><!--end div cat_inner-->
    </div><!--end div cat-->

    <div id="other">
    <div id="other_float">
    <img src="sadie2.png" alt="Sadie, 1yrs" />
    </div><!--end div other_float-->

    <div id="other_inner">
    <h1>Sadie</h1>
    <p class="description">Hamster, Female, 1 year, 1 lbs.</p><!--end p description-->
    <p>
    Sadie is a beautiful tan/white hamster. She came into our rescue when her first family could not give her the attention she required. In 2010, a family adopted Sadie as their first family pet. The family recognized that just like any other animal, even small caged creatures need love and attention. Sadie loves to go on adventures through the house in her spinning ball and find new paths through her jungle tube maze, which the family constantly adds to. For Sadie, her second chance was the best thing that could have happened to her.
    </p>
    </div><!--end div other_inner-->
    </div><!--end div other-->

<div id="footer">
    <div id="footer_inner">
        <p class="footer_location">1234 Forbes Avenue<br />
        Pittsburgh, PA 15213</p><!--end p footer_location-->

        <p class="footer_social">
        <a href="www.petfinder.com"><img src="finder.png" alt="See our animals on Petfinder" /></a>
        <a href="www.facebook.com"><img src="Facebook.png" alt="Friend us on Facebook" /></a>
        <a href="www.twitter.com"><img src="twitter.png" alt="Follow us on Twitter" /></a>
        <a href="www.youtube.com"><img src="youtube.png" alt="Visit Our YouTube Channel" /></a></p><!--end p footer_social-->

        <p class="footer_contact">Telephone: 512.341.8872<br />
        Email: <a href="mailto:paws+claws@gmail.com">paws+claws@gmail.com</a></p><!--end p footer_contact-->
    </div><!--end div footer_inner-->
</div><!--end div footer-->

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:56:26.163

This is because your `#dog p`, `#cat p` and `#other p` rules specify `position: absolute`.

You can solve this problem by either removing that rule from them, or also assigning widths to them as well. For example, the following will ensure your dog paragraph stays 300px wide:

```
#dog p {
position: absolute;
top: 60px;
left: 610px;
right: 320px;
font-family: "Times New Roman", Times, serif;
font-size: 15px;
line-height: 20px;
letter-spacing: 1.5px;
width: 300px;
} 
```

Making something `position: absolute` removes it from the standard layout, so it is not bound by the width of any of its parent containers.

# shell - VxWorks User Script

> ID：12333947
> 
> 赞同：2
> 
> 时间：2012-09-08T19:50:46.803
> 
> 标签：shell, vxworks

I am trying to create a script to be executed in VxWorks. The script should create an output file with specific data. I would like something like the following:

```
saveFd = open("myoutput.txt",0x102, 0777 )
oldFd = ioGlobalStdGet(1)
ioGlobalStdSet(1, saveFd)

#I would like to use three variables
#I don't know if I should use them as environment variables

putenv("MYBUSA=0x000000") 
putenv("MYBUSD=0x000000") 
putenv("DATAA=0x000000") 

for(i=0;i<N;i++){
    #modify memory using my variables.
    m getenv("MYBUSA"), 4 getenv("DATAA")
    #display memory using my variables. This output should be redirected to the file.
    d getenv("MYBUSB"), 4 
    #update variable DATAA
    DATAA = DATAA + 1;
}

#recover old std output
ioGlobalStdSet(1, oldFd) 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-21T11:49:29.763

根据您的文件系统，更改目录。就我而言，我们有真正的闪存文件系统

> ->cd“/tffs0/cfg”

创建脚本：

> -> > 脚本

在此处添加所有其他相关命令

> iosDevShow

要关闭文件：

> CTRL + D

检查文件是否已创建。

> ->ls

执行脚本，会在控制台显示：

> ->< 脚本

要将脚本的所有内容记录到文件中，请使用：

> <脚本> script.log

# xml - xslt summing the totals in an invoice

> ID：12333952
> 
> 赞同：-4
> 
> 时间：2012-09-08T19:50:54.660
> 
> 标签：xml, xslt, xslt-2.0

am wondering how i can up with an xslt sheet for to show the invoice total per customer.please help,.tried my best with recursive but nothing seems to give way,.for-each loop only gives me the total of all the products but not per invoice.,..any ideas

```
<customers>
  <customer>
    <clientname>troy madison</clientfname>
    <invoices>
    <invoiceDate>8/8/98</invoiceDate>
      <product>
         <PriceUnit>1000</PriceUnit>
         <Ordered>2</Ordered>
     </product>
     <product>
         <PriceUnit>5400</PriceUnit>
         <Ordered>3</Ordered>
     </product>
   </invoices>
   <invoices>
     <invoiceDate>1/4/98</invoiceDate>
       <product>
          <PriceUnit>300</PriceUnit>
          <Ordered>4</Ordered>
       </product>
      <product>
        <PriceUnit>6000</PriceUnit>
        <Ordered>1</Ordered>
     </product>
   </invoices>
  <invoices>
    <invoiceDate>03/5/99</invoiceDate>
      <product>
        <PriceUnit>549</PriceUnit>
        <Ordered>1</Ordered>
     </product>
     <product>
       <PriceUnit>320</PriceUnit>
       <Ordered>2</Ordered>
    </product>
   </invoices>
 </customer>
 <customer>
   <clientname>Morris</clientfname>
    <invoices>
      <invoiceDate>1/1/00</invoiceDate>
        <product>
           <PriceUnit>59</PriceUnit>
           <Ordered>3</Ordered>
        </product>
      <product>
          <PriceUnit>55</PriceUnit>
          <Ordered>1</Ordered>
      </product>
    </invoices>
    <invoices>
     <invoiceDate>11/1/01</invoiceDate>
       <product>
         <PriceUnit>10</PriceUnit>
         <Ordered>2</Ordered>
      </product>
      <product>
         <PriceUnit>54</PriceUnit>
         <Ordered>1</Ordered>
       </product>
    </invoices>
    <invoices>
      <invoiceDate>03/2/01</invoiceDate>
        <product>
          <PriceUnit>30</PriceUnit>
          <Ordered>1</Ordered>
        </product>
       <product>
         <PriceUnit>299</PriceUnit>
         <Ordered>1</Ordered>
       </product>
    </invoices>
</customer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:35:41.293

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <html>
    <table border="1">
     <thead>
       <tr>
         <td>Name</td><td>Total</td>
       </tr>
     </thead>
     <xsl:apply-templates/>
    </table>
  </html>
 </xsl:template>

 <xsl:template match="customer">
  <tr>
    <td><xsl:value-of select="clientname"/></td>
    <td><xsl:value-of select=
     "sum(invoices/product/(PriceUnit*Ordered))"/></td>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（在更正提供的严重格式错误的文本后获得）：

```
<customers>
  <customer>
    <clientname>troy madison</clientname>
    <invoices>
    <invoiceDate>8/8/98</invoiceDate>
      <product>
         <PriceUnit>1000</PriceUnit>
         <Ordered>2</Ordered>
     </product>
     <product>
         <PriceUnit>5400</PriceUnit>
         <Ordered>3</Ordered>
     </product>
   </invoices>
   <invoices>
     <invoiceDate>1/4/98</invoiceDate>
       <product>
          <PriceUnit>300</PriceUnit>
          <Ordered>4</Ordered>
       </product>
      <product>
        <PriceUnit>6000</PriceUnit>
        <Ordered>1</Ordered>
     </product>
   </invoices>
  <invoices>
    <invoiceDate>03/5/99</invoiceDate>
      <product>
        <PriceUnit>549</PriceUnit>
        <Ordered>1</Ordered>
     </product>
     <product>
       <PriceUnit>320</PriceUnit>
       <Ordered>2</Ordered>
    </product>
   </invoices>
 </customer>
 <customer>
   <clientname>Morris</clientname>
    <invoices>
      <invoiceDate>1/1/00</invoiceDate>
        <product>
           <PriceUnit>59</PriceUnit>
           <Ordered>3</Ordered>
        </product>
      <product>
          <PriceUnit>55</PriceUnit>
          <Ordered>1</Ordered>
      </product>
    </invoices>
    <invoices>
     <invoiceDate>11/1/01</invoiceDate>
       <product>
         <PriceUnit>10</PriceUnit>
         <Ordered>2</Ordered>
      </product>
      <product>
         <PriceUnit>54</PriceUnit>
         <Ordered>1</Ordered>
       </product>
    </invoices>
    <invoices>
      <invoiceDate>03/2/01</invoiceDate>
        <product>
          <PriceUnit>30</PriceUnit>
          <Ordered>1</Ordered>
        </product>
       <product>
         <PriceUnit>299</PriceUnit>
         <Ordered>1</Ordered>
       </product>
    </invoices>
</customer>
</customers> 
```

**产生（人们只能猜测的是!!!）想要的结果：**

```
<html>
   <table border="1">
      <thead>
         <tr>
            <td>Name</td>
            <td>Total</td>
         </tr>
      </thead>
      <tr>
         <td>troy madison</td>
         <td>26589</td>
      </tr>
      <tr>
         <td>Morris</td>
         <td>635</td>
      </tr>
   </table>
</html> 
```

# mysql - Is it possible to factor this SQL Union statement?

> ID：12333955
> 
> 赞同：1
> 
> 时间：2012-09-08T19:51:17.840
> 
> 标签：mysql, sql, union

In this query I am using a UNION to simply combined the results of two nearly identical queries. The single difference is that tp.t_id in the WHERE clauses is different. I've renamed the table names here simply to highlight how both queries in the UNION are similar. (I do not think it is relevant what those tables are actually called).

I'd like to know if there is a way to factor out the redundancy in these queries if for nothing else for maintenance purposes.

Thanks!

```
SELECT SUM(s.count) AS total
FROM Table1 s 
JOIN Table2 p ON p.id=s.p_id 
JOIN Table3 tp ON tp.p_id=s.p_id 
JOIN Table4 t ON tp.p_id=s.p_id 
WHERE s.g_id=1 AND tp.t_id=1 AND s.type=1
UNION 
SELECT SUM(s.count) AS total
FROM Table1 s 
JOIN Table2 p ON p.id=s.p_id 
JOIN Table3 tp ON tp.p_id=s.p_id 
JOIN Table4 t ON tp.p_id=s.p_id 
WHERE s.g_id=1 AND tp.t_id=2 AND s.type=1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:53:01.983

Yes, use [`IN()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in):

```
SELECT SUM(s.count) AS total
FROM Table1 s 
JOIN Table2 p ON p.id=s.p_id 
JOIN Table3 tp ON tp.p_id=s.p_id 
JOIN Table4 t ON tp.p_id=s.p_id 
WHERE s.g_id=1 AND tp.t_id IN (1, 2) AND s.type=1
GROUP BY tp.t_id 
```

# css - 我可以屏蔽我的设备宽度吗？

> ID：12333958
> 
> 赞同：1
> 
> 时间：2012-09-08T19:51:47.260
> 
> 标签：css, media-queries

我正在使用媒体类型为某些设备指定某些样式。但是我想使用 Chrome 的元素检查来调试我在移动设备上得到的东西。有没有办法指定我自己的设备大小来调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:22:39.647

是的，你可以做到。使用 Chrome Webinspector 覆盖设备指标。

![使用 Chrome Webinspector 覆盖设备指标](../Images/72461185c039c285760c5a94b90345fb.png)

# javascript - 列表选择或披露的新视图

> ID：12333962
> 
> 赞同：0
> 
> 时间：2012-09-08T19:52:26.303
> 
> 标签：javascript, sencha-touch

列表选择或披露的新视图

我认为有很多方法可以处理列表中的功能选择或披露。我确实在 sencha 的文档中看到了 vimeo 教程。但是，如果可能的话，我不想使用 controller.js，因为我只有 2 或 3 个项目。

当我点击项目或披露时如何推送视图？我尝试了所有 ext.create、Ext.ComponentManager.get('listdetails').push(... 我有一个带有 xtype:'listdetails' 的 listdetails.js。

帮助和感谢^^

**主.js**

```
Ext.define('easylist.view.Main', {
          extend: 'Ext.tab.Panel',
          requires: [
              'Ext.navigation.View',
              'Ext.dataview.List',
              'Ext.data.Store'
          ],

        config: {
            items: [
                {
                    xtype: 'container',
                    title: 'Tab 1',
                    iconCls: 'info'
                },
                {
                    xtype: 'container',
                    title: 'Tab 2',
                    iconCls: 'info'

                },
                {
                    xtype: 'container',
                    title: 'Tab 3',
                    iconCls: 'info'
                },
                {
                    xtype: 'navigationview',
                    title: 'MyNavigationView',
                    iconCls: 'info',
                    items: [
                        {
                            xtype: 'list',
                            title: 'uyuyuy',

                            store: {
                                  fields: ['name'],
                                  data: [
                                    {name: 'Cowper'},
                                    {name: 'Everett'},
                                    {name: 'University'}                                
                                  ]
                                },
                                onItemDisclosure: true,

                                itemTpl: '{name}',
                                listeners: {
                                    select: function(view, record) {
                                        navview = view.up('navigationview'),
                                         navview.push({How can I view lisdetail1.js     or 2, or 3 depending onselect?????})      
                                    },
                                   // disclose: function(view, record) {
                                   //     Ext.Msg.alert('Selected!', 'You selected ' + //record.get('name'));                                    
                           //         }
                                }

                            }
                    ]
                }
            ],
            tabBar: {
                docked: 'bottom'
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:37:41.640

试试这个

```
listeners: [
        {
            fn: 'onMylistItemSingletap',
            event: 'itemsingletap',
            delegate: '#mylist'
        }
    ],
onMylistItemSingletap: function(dataview, index, target, record, e, options) {
    var nav=dataview.up('navigationview');
    if(index==0){
        nav.push({
            xtype: 'listdetail1'
        });
    }
    else if(index==1){
        nav.push({
            xtype: 'listdetail2'
        });
    }    
    else if(index==2){
        nav.push({
            xtype: 'listdetail3'
        });
    }    
} 
```

希望对你有帮助^^

# jquery-ui - Resizable dynamic containment

> ID：12333966
> 
> 赞同：1
> 
> 时间：2012-09-08T19:53:19.307
> 
> 标签：jquery-ui, jquery-ui-resizable

Can I pass my own object pretending to be a selector as a containment to resizable?

Please note, I've read all questions about dynamic containment/refresh containment the solutions aren't good enough for me.

the idea is - JQuery UI will evaluate containment object's size & position `hopefully` by calling containment.width(), containment .height() and containment.position(), so by providing my own implementations I can get my containment dynamic.

Here's some code, which doesn't work:

```
var fake = { width: fucnction(){ return 100; }, height: function(){ return 200; }, position: function(){ return { left:100, top:100 }}}};

element.resizable({containment: fake}); 
```

Wonder if it's doable that way and what am I missing?

# php - 使用正则表达式提取值的正确方法是什么

> ID：12333968
> 
> 赞同：1
> 
> 时间：2012-09-08T19:53:47.707
> 
> 标签：php, preg-match

PS：我不能对这段代码使用 DOM 等，因为 Xpath 不适用于 html 代码，其中包含来自管理不善的站点的大量错误。这对我来说将是最简单的方法。

我从错误的 html 代码中获得了以下 html 片段：

```
<td width="11%">Train Number</Td>
<td width="16%">Train Name</td>
<td width="18%">Boarding Date <br>(DD-MM-YYYY)</td>

<td width="7%">From</Td>
<td width="7%">To</Td>
<td width="14%">Reserved Upto</Td>
<td width="21%">Boarding Point</Td>
<td width="6%">Class</Td>
</TR>
<TR>
<TD class="table_border_both">*12018</TD>
<TD class="table_border_both">DEHRADUN SHTBDI</TD>
<TD class="table_border_both"> 9- 9-2012</TD>

<TD class="table_border_both">DDN </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">DDN </TD>
<TD class="table_border_both"> CC</TD> 
```

我想使用正则表达式获取最后 8 个 TD 中的值。因此，如果我将其放在 heredoc 中，则它不匹配。我应该如何放置在heredoc中，以便这个模式（原样）匹配？

我正在尝试这样做：

```
 $trainpattern = <<<EOT
<td width="11%">Train Number</Td>
<td width="16%">Train Name</td>
<td width="18%">Boarding Date <br>[(]DD-MM-YYYY[)]</td>

<td width="7%">From</Td>
<td width="7%">To</Td>
<td width="14%">Reserved Upto</Td>
<td width="21%">Boarding Point</Td>
<td width="6%">Class</Td>
</TR>
<TR>
<TD class="table_border_both">[*]12018</TD>
<TD class="table_border_both">DEHRADUN SHTBDI</TD>
<TD class="table_border_both"> 9- 9-2012</TD>

<TD class="table_border_both">DDN </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">DDN </TD>
<TD class="table_border_both"> CC</TD>
EOT;

$ret = preg_match("#$trainpattern#s",$filetext,$matches); 
```

此外，当我只取前两行并将它们与 \s+ 加入单行时，它是匹配的，但我正在寻找匹配行而不加入它们的方法。可能在那种情况下，我需要将 \n\r's 替换为 \s*'s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:40:57.030

要提取值，您可以使用类似的东西：

```
<?php

// Note: I add <TR></TR> to match

$trainpattern = <<< EOT
<TR>
<td width="11%">Train Number</Td>
<td width="16%">Train Name</td>
<td width="18%">Boarding Date <br>(DD-MM-YYYY)</td>

<td width="7%">From</Td>
<td width="7%">To</Td>
<td width="14%">Reserved Upto</Td>
<td width="21%">Boarding Point</Td>
<td width="6%">Class</Td>
</TR>

<TR>
<TD class="table_border_both">[*]12018</TD>
<TD class="table_border_both">DEHRADUN SHTBDI</TD>
<TD class="table_border_both"> 9- 9-2012</TD>

<TD class="table_border_both">DDN </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">RK  </TD>
<TD class="table_border_both">DDN </TD>
<TD class="table_border_both"> CC</TD>
</TR>
EOT;

// $trs will contains each TRs
$trs=array();
preg_match_all("|<tr>(.+)</tr>|Uis", $trainpattern, $trs);

// $keys will contains TD's value of first TR
preg_match_all("|<td.*>(.+)</td>|Uis", $trs[1][0], $keys);

// $values will contains TD's value of second TR
preg_match_all("|<td.*>(.+)</td>|Uis", $trs[1][1], $values);

// We join keys and values 
$results = array();
foreach ($keys[1] as $index => $key) {
    if (isset($values[1][$index])) {
       $results[$key] = $values[1][$index];
    }
}

var_dump($results); 
```

这将向您展示：

```
array(8) {
  ["Train Number"]=>
  string(8) "[*]12018"
  ["Train Name"]=>
  string(15) "DEHRADUN SHTBDI"
  ["Boarding Date <br>(DD-MM-YYYY)"]=>
  string(10) " 9- 9-2012"
  ["From"]=>
  string(4) "DDN "
  ["To"]=>
  string(4) "RK  "
  ["Reserved Upto"]=>
  string(4) "RK  "
  ["Boarding Point"]=>
  string(4) "DDN "
  ["Class"]=>
  string(3) " CC"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:34:04.227

你试过[phpQuery](http://code.google.com/p/phpquery/)吗？如果您曾经使用过 jQuery，这将不是问题。

例子 ：

```
require 'phpQuery.php';
phpQuery::newDocumentHTML($trainpattern);
foreach (pq('td')->slice(-8) as $v) {
    $v = pq($v);
    var_dump((string)$v);
    var_dump((string)$v->attr('class'));
    # etc...
} 
```

输出 ：

```
string(43) "[*]12018"
string(50) "DEHRADUN SHTBDI"
string(45) " 9- 9-2012"
string(39) "DDN "
string(39) "RK  "
string(39) "RK  "
string(39) "DDN "
string(38) " CC" 
```

# c++ - C++向量初始化为什么要调用拷贝构造函数

> ID：12333971
> 
> 赞同：8
> 
> 时间：2012-09-08T19:54:20.580
> 
> 标签：c++, constructor, c++03

当您以下列方式初始化向量时：

```
std::vector<MyClass> MyVec(10); 
```

它调用默认构造函数一次，然后再调用复制构造函数 10 次。所以，如果我理解正确的话，向量中的对象都是由复制构造函数创建的。

有人可以解释调用复制构造函数而不是默认构造函数的原因吗？或者甚至只是在没有对象的情况下分配内存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T19:58:39.577

它将分配没有对象的内存，除非您指定初始大小为 10，因此它*必须*创建 10 个对象。如果您想要 10 个对象的内存而不实际创建它们，您可以执行以下操作：

```
 std::vector<MyClass> MyVec;
 MyVec.reserve(10); 
```

如果您查看正在使用的构造函数的签名，则类似于：

```
vector(size_t num, T initial_value = T()); 
```

这让你传递一个值来填充你告诉它创建的点。如果您不指定值，它会创建一个（使用默认 ctor）传递给 ctor，然后在向量本身中复制该值。

毫无疑问它*可以*做其他事情，但这在简单性（不指定值）、多功能性（如果需要，请指定值）和代码大小（避免将整个 ctor 复制为默认值）之间提供了合理的平衡构建内容）。

# ruby-on-rails - 无法将 belongs_to 模型保存为 has_one 表单的一部分

> ID：12333974
> 
> 赞同：1
> 
> 时间：2012-09-08T19:55:14.603
> 
> 标签：ruby-on-rails, activerecord

我有一个事件和活动。每个事件都有一个活动，用户需要从大量活动中进行选择。我有一个collection_select 字段可以在事件表单中正确显示，但它不会保存。我不断收到`Couldn't find Activity without an ID`错误消息。

我认为通过在我的模型中创建 has_one belongs_to 关联，表单会自动知道要做什么。没有。所以我开始向事件控制器添加方法，甚至不知道它们是否正确。但事情并没有破裂。

现在我在想我可能需要在表单中创建一个局部变量，但我已经尝试了十几种变体，但没有任何效果。我最终会收到其他错误消息。

我的事件模型

```
class Event < ActiveRecord::Base

  attr_accessible :date, :activity

  has_one :activity
  belongs_to :creator, :class_name => "User"
  has_many :attendees, :class_name => "User"
  has_many :comments
end 
```

活动模式

```
class Activity < ActiveRecord::Base
  attr_accessible :location, :title, :image, :image_cache

  mount_uploader :image, ImageUploader

  belongs_to :event
end 
```

事件控制器的一部分

```
def new
  @event = Event.new
  @activities = Activity.find(:all, :order => 'title')

end

def create
  @event = Event.new(params[:event])
  @activities = Activity.find(:all, :order => 'title')
  @activity = Activity.find(params[:id])
end 
```

活动表格

```
<div class="field">
  <h6>When do you want to go?</h6><br />
  <%= f.text_field :date %>
</div>
<h5>Activities</h5>

<%= collection_select(:activity, :event_id, Activity.all, :id, :title, {:include_blank => 'Please Select'} ) %>

<div class="actions">
  <%= f.submit %>
</div> 
```

我的无知在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:05:21.350

执行此操作时，您需要使用嵌套表单结构来同时更新两个模型。您需要将**Accepts_nested_attributes_for**添加到您的 Event model.rb 文件中。以下是您的每个文件的外观。

事件模型

```
class Event < ActiveRecord::Base
  attr_accessible :date, :activity

  has_one :activity
  accepts_nested_attributes_for :activity

  belongs_to :creator, :class_name => "User"
  has_many :attendees, :class_name => "User"
  has_many :comments
end 
```

活动模型很好，因为您已经拥有 belongs_to 事件

事件控制器：

```
def new
  @event = Event.new
  activity = @event.activity.build
end

def create
  @event = Event.new(params[:event])
  if @event.save
    #etc.
  end
end 
```

形式

```
<%= form_for @event do |f| %>  
     <div class="field">
      <h6>When do you want to go?</h6><br />
      <%= f.text_field :date %>
    </div>

    <h5>Activities</h5>
    <%= f.fields_for :activity do |b| %>
       <!--Add whatever form input you need for your activity.--> 
       <%= b.collection_select :title %>
    <% end %>

    <div class="actions">
      <%= f.submit %>
    </div>
<%end%> 
```

如果您想仔细查看嵌套模型表单[上的 railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)

为了回答评论中的问题......是的，我会颠倒你的模型关系设置，所以你有......

```
class Activity < ActiveRecord::Base
  has_many :events
end

class Event < ActiveRecord::Base
  belongs_to :activity
end 
```

这样，每个事件都会有一个 activity_id 列，该列将标识与其对应的活动，并用于 Rails 进行关联。

现在，对于听起来您需要的 many_to_many 关联，您有两个选择。您可以使用 has_many through 或 HABTM。最简单的经验法则是，如果您认为需要将关系模型作为独立实体使用，则应该设置一个 has_many :through 关系。查看此[Rails 指南](http://guides.rubyonrails.org/association_basics.html#the-types-of-associations)以获取有关这些关联将创建的所有方法的更多说明和详细信息。

我一直很喜欢 has_many，因为如果您将来选择，您始终可以选择处理这种关系，所以这就是您将如何做到的

```
class Event < ActiveRecord::Base
  has_many :plans
  has_many :users, :through => :plans
end

class Plan < ActiveRecord::Base
  belongs_to :event
  belongs_to :user
end 

class User < ActiveRecord::Base
  has_many :plans
  has_many :events, :through => :plans
end 
```

关系可以随便称呼，“计划”正是我最先想到的。

# sql - Magento DB 删除所有重复或重复的索引

> ID：12333982
> 
> 赞同：0
> 
> 时间：2012-09-08T19:56:14.240
> 
> 标签：sql, magento

> **可能重复：**
> [InnoDB：发现重复索引 - 这很糟糕吗？](https://stackoverflow.com/questions/12278023/innodb-duplicate-indixes-found-is-this-very-bad)

不知何故，我的 Magento 数据库中有重复的唯一键和索引。而且不是一些，而是数千个。

有没有一种方法可以轻松摆脱所有这些并从一个新的数据库开始，只导入数据。

我想只导出数据然后设置一个新的magento安装（使用新索引）然后只复制数据

这可以用 phpmyadmin 完成吗？还是其他技巧？

给你举个例子：

```
CREATE TABLE IF NOT EXISTS `mag_catalog_product_option_type_title` (
  `option_type_title_id` int(10) unsigned NOT NULL auto_increment COMMENT 'Option Type Title ID',
  `option_type_id` int(10) unsigned NOT NULL default '0' COMMENT 'Option Type ID',
  `store_id` smallint(5) unsigned NOT NULL default '0' COMMENT 'Store ID',
  `title` varchar(255) NOT NULL COMMENT 'Title',
  PRIMARY KEY  (`option_type_title_id`),
  UNIQUE KEY `UNQ_MAG_CAT_PRD_OPT_TYPE_TTL_OPT_TYPE_ID_STORE_ID` (`option_type_id`,`store_id`),
  UNIQUE KEY `UNQ_CATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID_STORE_ID` (`option_type_id`,`store_id`),
  UNIQUE KEY `UNQ_REMOVEMECAT_PRD_OPT_TYPE_TTL_OPT_TYPE_ID_STORE_ID` (`option_type_id`,`store_id`),
  KEY `IDX_MAG_CATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID` (`option_type_id`),
  KEY `IDX_MAG_CATALOG_PRODUCT_OPTION_TYPE_TITLE_STORE_ID` (`store_id`),
  KEY `IDX_CATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID` (`option_type_id`),
  KEY `IDX_CATALOG_PRODUCT_OPTION_TYPE_TITLE_STORE_ID` (`store_id`),
  KEY `IDX_REMOVEMECATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID` (`option_type_id`),
  KEY `IDX_REMOVEMECATALOG_PRODUCT_OPTION_TYPE_TITLE_STORE_ID` (`store_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Catalog Product Option Type Title Table' AUTO_INCREMENT=1 ; 
```

以下这些都可以删除，它们是重复的

键`IDX_CATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID`( `option_type_id`), 键`IDX_CATALOG_PRODUCT_OPTION_TYPE_TITLE_STORE_ID`( `store_id`), 键`IDX_REMOVEMECATALOG_PRODUCT_OPTION_TYPE_TITLE_OPTION_TYPE_ID`( `option_type_id`), 键`IDX_REMOVEMECATALOG_PRODUCT_OPTION_TYPE_TITLE_STORE_ID`( `store_id`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:13:07.747

我在这里发布了 Magento DB 修复工具的更新：

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

它现在还删除在参考数据库中找不到的索引

# css - JavaFX: Cannot set font size programmatically after font being set by CSS

> ID：12333985
> 
> 赞同：6
> 
> 时间：2012-09-08T19:56:59.250
> 
> 标签：css, font-face, javafx, javafx-2

I have stored the default font type and size of my application in a CSS file which I apply using the code:

```
label.getStyleClass().add("labelStyleClass"); 
```

However I also added the feature that if the user provides its own preference, it should override the default settings (set above) and use the user provided font size:

```
double userSize = readFromFile;
label.setFont(new Font(userSize)); 
```

In this case the `label.setFont()` call does not set the new size given by user. When I comment out the initial CSS code, the later works.

Any workaround?

Note: cross-posted at [JavaFX forum](https://forums.oracle.com/forums/thread.jspa?threadID=2437387&stqc=true)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T22:09:42.947

这是设计使然。出于架构原因，css 的覆盖链工作如下：

> 默认 caspian.css < API 设置 < 用户`Scene`css < 用户`Parent`css <`setStyle()`

这是来自[css 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introscenegraph)的引用：

> JavaFX CSS 实现应用以下优先顺序；来自用户代理样式表的样式的优先级低于从代码中设置的值，后者的优先级低于场景或父样式表。内联样式具有最高优先级。来自 Parent 实例的样式表被认为比来自 Scene 样式表的样式更具体。

`setStyle()`因此，您可以通过使用而不是 API 调用来实现您的目标。尝试运行下一个示例：

```
public void start(Stage stage) {
    VBox root = new VBox(10);

    Scene scene = new Scene(root, 300, 250);
    // font.css: .labelStyleClass { -fx-font-size: 20 }
    scene.getStylesheets().add(getClass().getResource("font.css").toExternalForm());

    root.getChildren().add(LabelBuilder.create().text("default").build());
    root.getChildren().add(LabelBuilder.create().text("font-css").styleClass("labelStyleClass").build());

    Label lblApi = LabelBuilder.create().text("font-css-api (doesn't work)").styleClass("labelStyleClass").build();
    lblApi.setFont(Font.font(lblApi.getFont().getFamily(), 40));
    root.getChildren().add(lblApi);

    Label lblStyle = LabelBuilder.create().text("font-css-setstyle (work)").styleClass("labelStyleClass").build();
    lblStyle.setStyle("-fx-font-size:40;");
    root.getChildren().add(lblStyle);

    stage.setTitle("Hello World!");
    stage.setScene(scene);
    stage.show();
} 
```

# algorithm - Programming Challenge: Easiest way to code this grid?

> ID：12333988
> 
> 赞同：14
> 
> 时间：2012-09-08T19:57:30.283
> 
> 标签：algorithm, grid, processing

**Made It! Look at bottom of the post!!!**

Smart people of the world...

I'm trying to draw this grid using Processing (java), but I'm having trouble figuring out the smartest way around this. I could basically just plot each point in the repeating section, but I'm sure there's a better way around it.

![grid](../Images/fe5ed56ae17086844f50db8ca2530177.png)

Any algorithm and language will do. I just need to see the concept.

**EDIT**

Updated with an image of the logo. This basically shows how I need to ability to "know" what areas are neighbors, in order to create a generative shape from the grid:

![logo](../Images/c7bca333fa74d7ad54191604f079fd02.png)

**EDIT 2**

The grid is called a "quasi periodic eight fold grid" by the designer.

**EDIT 3**

Okay, that was harder than I thought. I've made a lot of progress, and you can find there code here: [https://gist.github.com/3682600](https://gist.github.com/3682600)

I have the sub-divisioning working perfect for both shapes, however, when I start the recursion, something weird is going on. This is my output right now:

![test](../Images/8dbb1e6ba7dde5d42574939a73cdd865.png)

Any help is appreciated!

**Edit 4**

Okay, this is turning into an epic task. I've figured out that the problem arises when I the recursion becomes too deep. Either it's a problem with the rotation of the elements, or it's another thing I can't figure out. Anyway, here's the working sketch I have right now:

![working](../Images/ed48be626f0c2c78607325edf1d6dfed.png)

**Edit 5**

I made it! I had messed up the rotations of the cubes, which messed it all up. I changed it and it's working: [https://gist.github.com/3682600](https://gist.github.com/3682600). There may be a little too much stuff in there, but it's totally working. Proof:

![leve1](../Images/97b8ed3532aa49743d95b523d8d01b7a.png) ![level2](../Images/aad311803329a33e8ab4e2a53add6ba2.png) ![level3](../Images/569a88d11acb5a3e4909b14b66641273.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T20:45:27.713

我不确定会有一个简单的方法，我开始寻找一个重复的部分，但它是准周期性的，或者几乎是重复的。

![在此处输入图像描述](../Images/73d3e5865e4f9408c877161d9f2106b0.png)

它显然在绿线上是对称的，但蓝色标记的图案实际上似乎并没有显示网格看起来远离中心延伸的图案。不过我可能是错的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T20:53:18.493

如果这确实是[他的评论](https://stackoverflow.com/questions/12333988/programming-challenge-easiest-way-to-code-this-grid#comment16556602_12333988)中提到的[Ammann-Beenker 平铺](http://en.wikipedia.org/wiki/Ammann%E2%80%93Beenker_tiling)@nm ，那么您最容易使用提供的替代规则对其进行编码。从任意瓷砖开始，然后用较小的瓷砖替换它，直到您有足够数量的瓷砖用于您的目的。请注意，替换规则显然处理有向的半正方形。

# ffmpeg - Grayscale streaming from raw video using FFMPEG

> ID：12333993
> 
> 赞同：1
> 
> 时间：2012-09-08T19:57:49.593
> 
> 标签：ffmpeg, grayscale

I have a raw video file (testvideo_1000f.raw) that I am trying to stream in gray scale using ffmpeg and output the grayscale video to output.swf. The command I am using to do this is:

```
ffmpeg/ffmpeg -qmin 2 -qmax 31 -s 320x240 -f rawvideo -flags gray -pix_fmt:output gray -an -i testvideo_1000f.raw output.swf 
```

However, the result from this command is a video stream that is in gray scale but still contains some of the chrominance data. The output from this command is pasted below:

```
 3 [volta]/home/student/elliott> ffmpeg/ffmpeg -qmin 2 -qmax 31 -s 320x240 -f rawvideo -flags gray -pix_fmt:output gray -an -i testvideo_1000f.raw output.swf
ffmpeg version N-41632-g2b1fc56 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jul 29 2012 10:27:26 with gcc 4.1.2 20080704 (Red Hat 4.1.2-51)
  configuration: 
  libavutil      51\. 58.100 / 51\. 58.100
  libavcodec     54\. 25.100 / 54\. 25.100
  libavformat    54\.  6.101 / 54\.  6.101
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 80.100 /  2\. 80.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
*** CHOOSING 8
[rawvideo @ 0xdda9660] Estimating duration from bitrate, this may be inaccurate
Input #0, rawvideo, from 'testvideo_1000f.raw':
  Duration: N/A, start: 0.000000, bitrate: N/A
   Stream #0:0: Video: rawvideo (Y800 / 0x30303859), gray, 320x240, 25 tbr, 25 tbn, 25 tbc
File 'output.swf' already exists. Overwrite ? [y/N] y
w:320 h:240 pixfmt:gray tb:1/25 fr:25/1 sar:0/1 sws_param:flags=2
[ffmpeg_buffersink @ 0xddb7b40] No opaque field provided
[format @ 0xddb7d40] auto-inserting filter 'auto-inserted scaler 0' between the filter 'Parsed_null_0' and the filter 'format'
[auto-inserted scaler 0 @ 0xddb7920] w:320 h:240 fmt:gray sar:0/1 -> w:320 h:240 fmt:yuv420p sar:0/1 flags:0x4
*** CHOOSING 8
Output #0, swf, to 'output.swf':
  Metadata:
    encoder         : Lavf54.6.101
   Stream #0:0: Video: flv1, yuv420p, 320x240, q=2-31, 200 kb/s, 90k tbn, 25 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (rawvideo -> flv)
Press [q] to stop, [?] for help
Truncating packet of size 76800 to 1 2875kB time=00:00:40.84 bitrate= 576.7kbits/s    
frame= 1500 fps=1035 q=24.8 Lsize=    4194kB time=00:01:00.00 bitrate= 572.6kbits/s    
video:4166kB audio:0kB global headers:0kB muxing overhead 0.669245% 
```

I am fairly new to FFMPEG and I am afraid I am using either the wrong syntax or the wrong parameters in my command line. For some reason, the format of the output is yuv420p. I have tried searching for this answer all over but have had no luck. Could anyone please help me and tell me why the output is being formatted in yuv420p when I am giving the command for it to be in 8bit grayscale? Any help would be greatly appreciated. Thank you.

Marc Elliott

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T12:20:29.533

```
ffmpeg -i VTS_05_1.VOB -pix_fmt gray -vcodec rawvideo -f yuv4mpegpipe - | ffmpeg -y -f yuv4mpegpipe -i - -vcodec libtheora out.avi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:52:52.617

没有 ffmpeg 标志将允许您执行此操作。

视频格式是为 YUV 而设计的，而不仅仅是 Y。因此，如果不修改您的方法，您将无法做到这一点。您将不得不使用 mjpeg 来获取仅 Y 流。Mjpeg 支持 8 位输出，但我不认为 mjpeg 可以放在 swf 中。如果这足以满足您的目的，它可以进入 mp4 或 ts。

当然，另一种选择是解码/显示端只解码/显示亮度而不是色度。同样，这是一个自定义要求，不直接支持。

# php - 使用 PHP sdk 获取新 access_token 的最佳方法

> ID：12333997
> 
> 赞同：4
> 
> 时间：2012-09-08T19:58:17.470
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我收到错误“必须使用活动访问令牌来查询有关当前用户的信息”。似乎有很多文章和想法，但我很困惑，似乎事情也在发生变化。很多人说要使用离线访问，但这似乎正在消失。我确实找到[了这篇文章](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)。

有人有使用 PHP SDK 的示例吗？

我尝试做类似下面的事情，但它似乎不起作用；`$FBuser`仍然为零：

```
$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                            "client_id=" . FB_APP_ID .
                            "&client_secret=" . FB_APP_SECRET .
                            "&grant_type=client_credentials";
list($name, $ACCESS_TOKEN) = explode("=", file_get_contents($token_url) );
$facebook->setAccessToken(ACCESS_TOKEN);
$FBuser = $facebook->getUser(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:31:28.947

试试这个（根据这个[链接](https://developers.facebook.com/docs/authentication/permissions/)更改范围参数）：

```
// Checks if the user granted the access (after the redirection bellow)
$user = $facebook->getUser();
if(!$user) {
    // If not: Retrieves the login url in order to redirect the user
    $url = $facebook->getLoginUrl(array('scope' => 'user_about_me', 'grant_type' => 'client_credentials'));
    // redirect here (after accepting the user will be redirect back to the same url. In other words this script, that will check again if the user is authenticated)
} else {
    // Now the user is authenticated
    $user_data  = $facebook->api('/me');
    $user_token = $facebook->getAccessToken();
    // Saves the access token
} 
```

# ruby-on-rails - 为什么我的视图中的 to_date 输出日期的格式与 Rails 控制台中相同对象的 to_date 格式不同？

> ID：12333999
> 
> 赞同：0
> 
> 时间：2012-09-08T19:58:24.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime

在我看来，我这样做：

```
 <td><%= client.last_contact.to_date %></td> 
```

输出如下：

```
2011-08-11 
```

但是当我在控制台中执行此操作时，我得到了我想要的格式：

```
1.9.3p194 :093 > c.last_contact
 => Thu, 11 Aug 2011 00:00:00 UTC +00:00 
1.9.3p194 :094 > c.last_contact.to_date
 => Thu, 11 Aug 2011 
```

在我看来，我希望它在控制台中显示日期和格式。

我该如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T20:13:17.410

在 Rails 视图中显示时间/日期的最佳方法是使用 I18n 本地化功能。您可以`config/locales`在 yaml 文件的目录中设置日期时间格式。像这样的东西

```
# config/locales/datetime.en.yml
en:
  time:
    formats:
      # Use the strftime parameters for formats.
      # When no format has been given, it uses default.
      # You can provide other formats here if you like!
      default: "%d.%m.%Y"
      short: "%d %b"
      long: "%d %B %Y"
      date: "%a, %d %b %Y" 
```

然后`l`在您的视图中使用助手

```
<%= l client.last_contact, :format => :date %> 
```

*   Rails 指南： http: [//guides.rubyonrails.org/i18n.html#adding-date-time-formats](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)
*   可能的格式：[https ://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en.yml)
*   ruby 中的日期时间：[http ://www.dzone.com/snippets/date-time-format-ruby](http://www.dzone.com/snippets/date-time-format-ruby)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T20:08:22.453

控制台调用`inspect`值，而 erb 标签调用`to_s`它们的值。

虽然您可以调用`inspect`您的视图，但我鼓励您使用`strftime`允许您精确定义您想要的内容

```
Date::today.strftime('%a, %d %b %Y')` 
```

或使用允许您定义格式并重用它们的`I18n.localize`助手（别名为）`l`

```
I18n.localize Date::today, :format => :long 
```