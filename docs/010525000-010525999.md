# StackOverflow 问答 10525000-10525999

# html - CSS ul 高度差

> ID：10525000
> 
> 赞同：0
> 
> 时间：2012-05-09T22:28:24.383
> 
> 标签：html, css, html-lists

我已经为我的问题准备了一个[jsfiddle](http://jsfiddle.net/Fj2PA/)：

我怎样才能使`ul`列的高度相同，而不依赖于其中包含多少数据。

**CSS：**

```
#priceTable{
    width:780px;
    margin:0 auto;
    background:gray;
}
#priceTable ul{
    display:inline-block;
    margin:0 40px 0 0;
    height:100%;
    min-height:100%;
    width:195px;
    background:orange;
}
#priceTable li{
    text-align:center;
    font-weight:bold;
    color:#000;
} 
```

**HTML：**

```
 <div id="priceTable">
                            <ul class="rowOne">
                                <li class="rowName">Package</li>
                                <li>1</li>
                                <li>2</li>
                                <li>3</li>
                                <li>4</li>
                                <li>5</li>
                                <li class="button"><a href="#">Buy Now</a></li>
                                </ul>
                                <ul class="rowTwo">
                                    <li class="rowName">Package</li>
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                    <li>6</li>
                                    <li class="button"><a href="#">Buy Now</a></li>
                                    </ul>
                                    <ul class="rowThree">
                                        <li class="rowName">Package</li>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4 </li>
                                        <li class="button"><a href="#">Buy Now</a></li>
                                        </ul>    
                            </div><!-- end #priceTable -->​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:43:25.297

使用 CSS 执行此操作的唯一方法是将它们全部设置为固定高度。而不是你`min-height : 100%`使用类似`min-height: 300px`. 但是由于您不知道每个将包含多少数据`uls`，这是一个非常不灵活的解决方案。

现在，如果您希望所有列都具有相同的高度，那么我假设您希望它们都与最高的列一样高。

这个 jQuery 代码应该可以解决问题：

```
var equalHeight = function ( group ) {
    var tallest = 0;

    group.each(function() {
        var thisHeight = $(this).height();
        if( thisHeight > tallest ) {
            tallest = thisHeight;
        }
    });

    group.height( tallest );
} 
```

而不仅仅是在准备好你的一组元素的文档上调用它

```
$(function () {
    equalHeight($('.rows'));
}); 
```

这里的工作示例=> [http://jsfiddle.net/y2eHg/](http://jsfiddle.net/y2eHg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:46:14.050

硬解决方案是以像素为单位设置固定高度`overflow: hidden`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T22:55:20.490

您不需要 Javascript 来执行此操作。有许多 HTML/CSS 技术可以解决这个问题。一个简单的谷歌搜索出现了[这样](http://css-tricks.com/fluid-width-equal-height-columns/)[的](http://woorkup.com/2009/10/11/really-simple-css-trick-for-equal-height-columns/)[文章](http://www.vanseodesign.com/css/equal-height-columns/) 。

是的，这些描述`<div>`的是 s 而不是`<ul>`s，但这些技术仍然适用。

# android - 适用于 Android 的 UDP 或 RTP 流媒体解决方案

> ID：10525001
> 
> 赞同：12
> 
> 时间：2012-05-09T22:28:26.633
> 
> 标签：android, udp, video-streaming, rtsp, rtp

我需要创建一个 android 应用程序来显示直播电视节目。该应用程序应该播放来自 DVB 网关的多播的实时视频流，根据网关供应商的说法，它可以流式传输 UDP 或 RTP。我在我的电脑上设置了 vlc 以流式传输 UDP 和 RTP 并打破了我的手指试图让 android 播放器显示它们。过了一会儿我发现android只支持HTTP/S和RTSP直播。我尝试了所有 FFMPEG 解决方案和不同的媒体播放器，但都没有成功。我不是视频专家，但据我了解，RTSP 是 RTP 的封装，我的 RTP 提要是否可以被包装和流式传输（甚至通过代理）？有人知道有效的 UDP 解决方案吗？

谢谢

我开始编写一个隧道，将本地 UDP 流从端口 1234 传递到端口 8888 上的 TCP 连接。我正在使用 VLC 进行测试，UDP 有效负载看起来正确，并且当我等待时，我能够看到 VLC 初始化 http 连接让 TCP 侦听器接受连接。但 VLC 仍然不会播放生成的 HTTP 流，我的代码：

```
public void Bridge()
    {
        //endpoints
        IPEndPoint myRemoteEndpoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 1234);

        //communications objects
        UdpClient myUdpClient = new UdpClient(myRemoteEndpoint);
        TcpListener myTcpListener = new TcpListener(IPAddress.Any, 8888);

        //buffer
        byte[] buffer = new byte[2048];

        //start tcp listener
        myTcpListener.Start();
        Socket tcpAcceptedSocket = myTcpListener.AcceptSocket();            

        while (true)
        {
            try
            {
                //get data from UDP client
                buffer = myUdpClient.Receive(ref myRemoteEndpoint);

                //send bytes received from UDP over TCP
                tcpAcceptedSocket.Send(buffer);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        //close sockets
        myUdpClient.Close();
        myTcpListener.Stop();

    } 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:34:40.277

*希望*你已经解决了这个问题？

我的第一个想法是“你如何退出那个`while (true)`循环？” 哈哈

在 API 级别 12 中将 RTP 添加到 Android SDK：

[http://developer.android.com/reference/android/net/rtp/package-summary.html](http://developer.android.com/reference/android/net/rtp/package-summary.html)

也许你可以`android.net.rtp`用来捕捉你的流媒体视频。这方面的教程似乎很缺乏，所以如果你确实/确实得到了这个工作，我相信快速写一篇文章可以让大 G 搜索结果飞起来；更不用说帮助在“android udp rtp”搜索中出现的关于 stackoverflow 的 600 多个其他问题的海报。

来自博客圈：

[http://burcudogan.com/2011/06/05/android-rtp-implementation-is-based-on-udp/](http://burcudogan.com/2011/06/05/android-rtp-implementation-is-based-on-udp/)

我会为 WebRTC 插入一个插件，因为它看起来很有希望：

[http://www.html5rocks.com/en/tutorials/webrtc/basics/](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

# html - IE6 最小宽度问题

> ID：10525003
> 
> 赞同：0
> 
> 时间：2012-05-09T22:28:38.803
> 
> 标签：html, css, internet-explorer-6

我知道 IE6 不支持最小宽度，但我尝试使用以下方法让 ie 玩得很好，但它并没有真正工作..！

```
nav.top ul li {
width: expression(document.body.clientWidth < 60? "61px" : document.body.clientWidth > 120? "121px" : "auto");
} 
```

这个的 HTML 看起来像

```
...
<li><a>text here</a></li>
<li><a>text here</a></li>
<li><a>text here</a></li>
... 
```

使用上面的表达式，所有 li 的宽度都是相同的，这对于导航来说并不理想，尤其是用户可以动态添加更长的 li。

上面的 HTML 只是部分内容，我会在我的电脑前尝试发布更多内容......！

理想情况下，我正在使用 CSS 解决方案，因为上面的表达式存在于条件电子表格中，并且会使事情变得更容易。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:37:39.680

你的问题有点不清楚。

你想在导航上实现什么？你只是想获得一个导航栏吗？

这会对你有帮助吗？

```
nav.top ul li {
   display:inline-block;
}

.oldie nav.top ul li {
   zoom: 1;
   *display: inline; 
} 
```

# jquery - 无法将 zclip 对象应用于我在 onLoad() 之后创建的元素 ID？

> ID：10525007
> 
> 赞同：2
> 
> 时间：2012-05-09T22:29:05.240
> 
> 标签：jquery, zeroclipboard, zclip

所以我试图让 zclip 与我的网站一起工作。基本上，页面加载后，我只是一个“.get()”函数来创建我的列表。对于每个表格行，我有一个带有按钮的表格数据，我希望它从另一个表格数据中复制数据。问题是，我读到 zclip 只能应用于在“onLoad”中创建的代码。我需要能够在 pageLoad 之后继续使用它。我的清单是动态的，所以事情会发生变化。而且加载我的桌子需要时间，所以我这样做了。

这是我的代码如何工作的一段

```
$(文档).ready(函数()
   // 在所有内容加载后获取 //
   $.get（网址，函数（数据）{
       $('#list-information').html(data); // data 是 php ajax 调用回显的 html 字符串
       // 这个按钮是在上面的调用中创建的
        $('a#test-button').zclip({
          路径：'http://mytest.com/files/ZeroClipboard.swf',
          复制：函数（）{返回'hellomee'}
        });
   });

});

```

“测试按钮”永远不会与瑞士法郎“粘合”。但是当我在.get之外执行此操作时，如果我将按钮放在实际的html页面上，它可以在初始加载时创建，而不是在“.get（）”中，它工作正常。任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T15:02:48.197

我知道我可能会迟到一点，但这应该可以解决您的问题：

```
$(document).ready(function() {
    $('a#test-button').zclip({
       path:'http://mytest.com/files/ZeroClipboard.swf',
       copy: function() {return 'hellomee'}
    }).zclip('hide').addClass('disabled'); //in your css, add a.disabled { color: #eee; }
    $.get(url, function(data) {
       $('#list-information').html(data);
       $('a#test-button').removeClass('disabled').zclip('show');
    });
}); 
```

如您所见，这会在页面加载时实例化 zclip，然后禁用它，然后仅在 $.get 接收到必要的数据后才重新启用它。

# vb.net - xml 解析错误处理或如何将 XMLTextReader 的光标重新启动？

> ID：10525008
> 
> 赞同：0
> 
> 时间：2012-05-09T22:29:10.833
> 
> 标签：vb.net, xml-parsing, xmltextreader

我有一个函数`api_request`，它将 API 方法作为参数，并返回`XMLTextReader`

```
Shared Function api_request(method As String) As XmlTextReader
request_text = method & ".xml"
 url = "https://api.vk.com/method/" & request_text & "&access_token=" & token
 Return New XmlTextReader(url)
End Function 
```

我从不同的地方调用这个函数来向站点 API 发出请求，并且根据方法结果的解析非常不同。

所以在每种方法中我都有这样的东西：

```
Dim s As Xml.XmlReader = api_request("users.get")
While s.Read
        If s.NodeType = XmlNodeType.Element Then
          If s.Name = "user" Then
              curr_user=s.ReadElementContentAsString            
          ElseIf s.Name = "error" Then
             error_handler(s, "user.get")
          End If
       End If
End While 
```

如您所见，我有代码`ElseIf s.Name = "error" Then error_handler(s, "user.get")`。这是因为发生错误时，服务器总是返回如下内容：

```
<error>
<error_code>4</error_code>
<error_msg>Incorrect signature</error_msg>
</error> 
```

这在 Sub 中进行解析`error_handler`，并根据错误选择以下操作。

此代码有效，但我必须检查是否 `ElseIf s.Name = "error"` **每次都**遇到这样的错误，尽管所有方法都调用该`api_request`函数。是否可以在返回 Reader 之前检查 api_request 函数中的错误？问题是如果我在那里开始读取 xml，并且没有错误，我无论如何都无法将 Reader 定位到开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:21:02.430

由于您无法使用 更改您的位置`XmlTextReader`，因此唯一的其他解决方案是将整个 XML 文档加载到内存中。大概`XmlTextReader`当它第一次读取它时会将整个 XML 文件下载到内存中，因此任何性能损失都应该可以忽略不计。我会建议这样的事情：

```
Shared Function api_request(ByVal method As String) As XmlDocument
    request_text = method & ".xml"
    url = "https://api.vk.com/method/" & request_text & "&access_token=" & token
    Dim doc As XmlDocument = New XmlDocument()
    doc.Load(New XmlTextReader(url))
    Dim node As XmlNode = doc.SelectSingleNode("error")
    If node IsNot Nothing Then
        Try
            Dim errorCode As Integer = Integer.Parse(node.SelectSingleNode("error_code").InnerText)
            Dim errorMessage As String = node.SelectSingleNode("error_msg").InnerText
            errorHandler(errorCode, errorMessage, method)
            doc = Nothing
        Catch ex As Exception
            Throw New Exception("Improperly formatted error response: " + doc.InnerXml, ex)
        End Try
    End If
    Return doc
End Function 
```

然后在调用的方法中`api_request`，执行以下操作：

```
 Dim doc As XmlDocument = api_request("users.get")
    If doc IsNot Nothing Then
        For Each node As XmlNode In doc.SelectNodes("path_to_user/user")
            curr_user = node.InnerText
        Next
    End If 
```

# iphone - 知道上次使用应用程序的时间，iPhone 应用程序

> ID：10525011
> 
> 赞同：1
> 
> 时间：2012-05-09T22:29:43.493
> 
> 标签：iphone, objective-c, ios, xcode, nsuserdefaults

我想向我的应用程序添加一个条件，该条件基于用户在过去一周内是否使用过该应用程序。最好的方法是什么？我在某处读到我应该使用 NSUseDefaults，但不确定如何使用，我只是对此很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T22:35:22.873

读：

```
self.lastRun = [NSDate distantPast];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"MyAppLastRun"]) {
    self.lastRun = [defaults objectForKey:@"MyAppLastRun"];
} 
```

写：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:self.lastRun forKey:@"MyAppLastRun"];
[defaults synchronize]; 
```

比较：

```
if ([[NSDate date] timeIntervalSinceDate:self.lastRun] > X) {
} 
```

注意：假设 NSDate *lastRun 的 self 有一个属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:34:50.740

是的，只需`NSUserDefaults`像这样粘贴一些东西：

```
// When app comes to foreground:

NSDate *lastStartDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"lastStartDate"];

if (!lastStartDate) {
    // Never launched
} else if ([lastStartDate timeIntervalSinceNow] < -(60\. * 60\. * 24\. * 7.)) {
    // Do whatever you want if they've not used in past week
}

[[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"lastStartDate"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T22:39:09.820

您可以在 : 中设置一个值，`applicationWillTerminate`例如：

```
NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
[ud setObject:[NSDate date] forKey:@"lastUsed"]; 
```

检索值：

```
NSDate *date=(NSDate*)[[NSUserDefaults standardUserDefaults]objectForKey:@lastUsed"]; 
```

然后比较日期。

# ruby-on-rails - 你如何打开你最近的 ruby rails 项目？

> ID：10525013
> 
> 赞同：0
> 
> 时间：2012-05-09T22:30:01.107
> 
> 标签：ruby-on-rails

我正在学习教程，但已经很晚了，所以我关闭了所有内容（命令行，textmate），现在当我想再次处理我的项目时，我不知道如何在命令行中打开它或重新打开它并且启动 Rails 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:41:48.167

cd 进入你的项目目录

```
mate .

rails s 
```

应该让你回到原来的位置

# c - 如何保存 gtk 笔记本选项卡以在以后的会话中使用

> ID：10525018
> 
> 赞同：0
> 
> 时间：2012-05-09T22:30:21.893
> 
> 标签：c, gtk, gtksourceview

我正在使用 gtk+-2.0 gtksourceview-2.0 创建一个文本编辑器。我希望能够在关闭编辑器并在以后重新打开它之后保存笔记本中的选项卡以供使用。我在 gtk_notebook_* 下的 devhelp 中没有看到任何看起来很有希望的东西。我可以将这些文件的路径保存在数据库表中，然后从数据库中读取表并在应用程序启动时创建选项卡，但这似乎有点笨拙。许多编辑器都内置了此功能。对于一个 geany，但我知道还有其他的。

这在gtk中可能吗？我对 C 比较陌生，有没有其他方法可以存储这些路径（除了在数据库中）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:39:05.743

GtkNotebook 无法为您执行此操作，您必须编写一些代码来存储应用程序的状态，然后在应用程序启动时加载它。如果那是打开文件的路径列表，那很好。不知道为什么你认为这是“笨拙”？该工具包不会神奇地知道您的应用程序的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:25:39.880

我最初认为写入/从配置文件写入会很慢，我对写入/从数据库有类似的想法。虽然提供了一些很好的建议：sqlite 和配置文件解析器，但最终我决定以老式方式向文本文件写入/读取几行代码不会那么昂贵。

在将这些概念合并到我的编辑器中之前，我整理了一个演示程序，我在下面提供了该程序。随意批评这个程序，特别是在内存使用方面。该程序演示了以下步骤：

（如果我列出一个列表，它似乎会弄乱我的代码块）

1）检查配置文件是否存在，2）如果存在则删除配置文件，3）将路径写入配置文件，4）从配置文件中读取路径

```
/*
 * Compile Command:
 * gcc ledit_config.c -o ledit_config 
 * 
 */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>   // system

#define NUM_TABS 10

char paths[NUM_TABS][200];

void write_config();
void read_config();

int main ()
{
  write_config();
  read_config();
}

void write_config()
{
  char *config_file;
  char temp[200];
  int i=0;

  /* change to the user's home directory (for fopen) */
  (int)chdir(getenv("HOME"));
  config_file = ".config/ledit/files";

  /* populate paths array with random paths */
  strcpy(paths[0], "~/Documents/code/glade/tutorial1/scratch_files/scratch.py");
  strcpy(paths[4], "~/Documents/code/glade/tutorial1/scratch_files/scratch.c");
  strcpy(paths[7], "~/Documents/code/glade/tutorial1/scratch_files/scratch.glade");

  if (fopen(config_file, "r") == NULL) /* file does not exist */
  {
    system("mkdir -p $HOME/.config/ledit/");
    FILE *fp;
    fp=fopen(config_file, "w");

    for(i = 0;i < NUM_TABS;++i)
    {
      strcpy(temp,paths[i]);
      strcat(temp, "\n");
      if (strlen(temp) > strlen("\n")) /* check to see if element actually contains more than just "\n" */
      {
        fprintf(fp, "%s",temp);
      }
    }

    fclose(fp);
  }
  else /* file does exist */
  {
    system("rm $HOME/.config/ledit/files");
    FILE *fp;
    fp=fopen(config_file, "w");

    for(i = 0;i < NUM_TABS;++i)
    {
      strcpy(temp,paths[i]);
      strcat(temp, "\n");
      if (strlen(temp) > strlen("\n")) /* check to see if element actually contains more than just "\n" */
      {
        fprintf(fp, "%s",temp);
      }
    }

    fclose(fp);
  }

}

void read_config()
{
  char line[200];
  char *config_file;
  int i=0;

  /* change to the user's home directory (for fopen) */
  (int)chdir(getenv("HOME"));
  config_file = ".config/ledit/files";

  /* empty the paths array */
  for(i = 0;i < NUM_TABS;++i)
    strcpy(paths[i], "");

  /* read the config file and poplulate array */
  i = 0;
  FILE* fp = fopen(config_file,"r");
  while(fgets(line,sizeof(line),fp) != NULL)
  {
    strcpy(paths[i], line);
    i++;
  }
  fclose(fp);

  /* print out paths array for verification */
  for(i = 0;i < NUM_TABS;++i)
    printf("%s",paths[i]);

} 
```

# c# - 如何使用 Rhino 模拟存根 SingleOrDefault

> ID：10525019
> 
> 赞同：3
> 
> 时间：2012-05-09T22:30:24.010
> 
> 标签：c#, unit-testing, entity-framework-4, rhino-mocks

如果我在这里有正确的方法，我很难理解。我想测试一个存储库。存储库依赖于 DbContext。我希望能够验证存储库没有在 IDbSet 类型的属性上调用函数 Add，该属性是 DbContext 的成员。

我尝试了两种方法。用行为验证，用状态验证。似乎用行为验证是正确的，因为谁知道存根状态在假对象中做了什么。

```
 public void VerifyBehaviour()
    {
        // Arrange
        var stubEntities = MockRepository.GenerateStub<IWsStatContext>();
        var stubManufcturers = MockRepository.GenerateStub<IDbSet<Manufacturer>>();
        var manufacturer = new Manufacturer() { Name = "Dummy" };
        var manufacturers = new List<Manufacturer>();
        manufacturers.Add(manufacturer);

        stubManufcturers.Stub(x => x.Local).Return(new System.Collections.ObjectModel.ObservableCollection<Manufacturer>(manufacturers));
        stubManufcturers.Stub(x => x.SingleOrDefault(m => m.Name == "Dummy")).Return(manufacturer);
        stubEntities.Manufacturers = stubManufcturers;

        // Act
        var sut = new EquiptmentRepository(stubEntities);
        sut.AddManufacturer(manufacturer);

        // Assert
        stubManufcturers.AssertWasNotCalled(x => x.Add(manufacturer));
    }

    public void VerifyState()
    { 
        // Arrange
        var stubEntities = MockRepository.GenerateStub<IWsStatContext>();
        var stubManufacturers = new InMemoryDbSet<Manufacturer>();
        var manufacturer = new Manufacturer() { Name = "Dummy" };
        stubManufacturers.Add(manufacturer);
        stubEntities.Manufacturers = stubManufacturers;

        // Act
        var sut = new EquiptmentRepository(stubEntities);
        sut.AddManufacturer(manufacturer);

        // Assert
        Assert.AreEqual(stubManufacturers.Count(), 1);
    } 
```

验证行为方法因 SingleOrDefault 存根周围的 NullReferenceExceptions 而失败。所以我发现帖子说最好验证状态并使用假的 DbSet。但是检查假对象的状态感觉不对。如果 Add 函数的实现方式与真实的不同（它最初是这样，并且我的测试通过了，即使我的存储库被破坏了）。

有谁知道如何存根 SingleOrDefault 以便我可以检查 Add 是否被调用？我无法检查 Add 是否在非 rhinomocked 存根上调用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T21:30:04.037

如[jimmy_keen 的回答](https://stackoverflow.com/a/10525524/466100)所述：

> `SingleOrDefault``IEnumerable<T>`是在（`IDbSet<T>`实现）上定义的扩展方法。作为扩展方法意味着它是一个静态方法。RhinoMocks（或任何其他免费工具）不能模拟/存根静态方法。

与其尝试“存根”扩展方法，不如尝试对构建扩展方法的底层接口进行存根：`IEnumerable<T>`

```
stubManufcturers.Stub( x => x.GetEnumerator() ).Return( new List<Manufacturer> { manufacturer }.GetEnumerator() ); 
```

`GetEnumerator()`通过对调用时的行为进行存根，`SingleOrDefault`它将按预期针对假枚举执行，并且测试将能够评估该行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:24:41.223

`SingleOrDefault``IEnumerable<T>`是在（`IDbSet<T>`实现）上定义的扩展方法。作为扩展方法意味着它是一个**静态方法**。RhinoMocks（或任何其他免费工具）[**不能**模拟/存根静态方法](https://stackoverflow.com/a/9065036/343266)。

不幸的是，您在这里没有太多选择：您要么必须进行*基于状态的*验证，要么创建手工模拟并为您的测试手动设置（但这很可能会以*基于状态的*验证结束）再次 - 你不能真正存根`SingleOrDefault`）。

**编辑**：**提取和覆盖**示例：

首先，您需要*提取*类的有问题的部分以分离稍后将被覆盖的方法。这个有问题的部分自然是与`IDbSet`：

```
public class EquiptmentRepository
{
    public void Add(Manufacturer m)
    {
        // perform some local logic before calling IDbSet.Add
        this.AddToDbSet(m);
    }

    protected virtual AddToDbSet(Manufacturer m)
    {
        this.context.Manfuacturers.Add(m);
    }
} 
```

现在，在您的可测试版本中，`EquiptmentRepository`您覆盖`AddToDbSet`以使测试更容易，例如通过简单地添加一些状态验证：

```
internal void TestableEquiptmentRepository: EquiptmentRepository
{
    internal List<Manufacturer> AddedManufacturers = new List<Manufacturer>();

    protected override void AddToDbSet(Manufacturer m)
    {
        // we're no longer calling DbSet.Add but kind of rolling
        // our own basic mock and tracking what objects were
        // add by simply adding them to internal list
        this.AddedManufacturers.Add(m);
    }
} 
```

每当被调用时，如果在实际情况下`Add`将添加到列表中，则传递的制造商将被添加到列表中。`DbSet`在您的测试中，您可以简单地验证类状态的可测试版本：

```
[Test]
public void AddManufacturer_DoesNotAddExistingManufacturersToDbSet()
{
    // Arrange
    var stubEntities = MockRepository.GenerateStub<IWsStatContext>();
    var stubManufacturers = MockRepository.GenerateStub<IDbSet<Manufacturer>>();
    var manufacturer = new Manufacturer() { Name = "Dummy" };
    stubManufacturers.Add(manufacturer);
    stubEntities.Manufacturers = stubManufacturers;

    // Act
    var sut = new TestableEquiptmentRepository(stubEntities);
    sut.AddManufacturer(manufacturer);

    // Assert
    Assert.AreEqual(sut.AddedManufacturers.Count(), 0);
} 
```

通过这种方式，您可以验证所有逻辑，`EquiptmentRepository.Add`而无需与之交互`DbSet`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:52:35.837

你不能用 RhinoMocks 或 Moq 模拟静态方法（TypeMock 可以）。

假对象的状态验证实际上验证了您的模拟，而不是您的被测系统。

有一种[技术](http://blogs.clariusconsulting.net/kzu/making-extension-methods-amenable-to-mocking/)可以使您的代码可测试（但我认为价格太高了）。您必须将扩展方法提取到接口，并用您自己的替换 System.Linq.Enumerable 扩展的用法：

```
var item = items.MyExtensions().SingleOrDefault(); 
```

顺便说一句，当我面对静态方法模拟时，我通常会做以下事情之一：

*   *传递静态方法执行的结果。*例如，如果我需要测试方法中的当前日期，而不是调用`DateTime.Today`我将当前时间作为参数传递`Foo(DateTime date)`。
*   *将静态调用包装在一些非静态对象中。*例如，如果我需要获取一些配置设置，而不是调用`ConfigurationManager.AppSettings["foo"]`，我创建非静态类`BarConfiguration`，它将所有工作委托给静态 ConfigurationManager（并实现接口`IBar { int Foo { get; }`）。
*   *不要嘲笑它。*看起来我正在测试我不应该测试的东西（可枚举扩展、日志等）

考虑不要对您的存储库进行单元测试。数据访问逻辑的集成测试更有意义。

# algorithm - 为什么皇后在棋盘覆盖中只有 10 个独特的位置？

> ID：10525024
> 
> 赞同：2
> 
> 时间：2012-05-09T22:30:55.943
> 
> 标签：algorithm, data-structures, graph, heuristics

在棋盘覆盖问题

> 覆盖问题是 1 个国王、1 个皇后、2 个骑士、2 个主教、2 个白车可以威胁所有 64 个方格。他们应该在哪里？

为了减少搜索空间，我们可以将女王的可能位置限制为只有 10 个。

> 完成工作需要大量修剪。我们的第一个想法是消除对称性。考虑到正交和对角对称，女王只剩下十个不同的位置，如图所示

![女王可能去的地方](../Images/bf8d84edcb9088876aea06820cdff20c.png)

行。我不明白这一点。

为什么女王的可能名额可以这样限制？

为什么可以考虑对称性来限制女王的位置？那么上图中，queen放在左下角和放在右下角是一样的吗？这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T22:33:58.343

如果将电路板旋转 90、180 或 270 度，最终会遇到完全相同的问题。同样，您将皇后移动到它的镜像位置（穿过对角线，或水平或垂直穿过棋盘的中间），结果证明与您没有移动时完全相同。

要理解对角对称：

试着把皇后放在左下角，解决问题，然后把皇后放在右上角，解决问题。您将看到解决方案完全相同。

要了解旋转对称性：

尝试将皇后放在左下角，解决问题，然后移动到右下角。解决方案再次完全相同。

您可能希望使用较小的板（例如 4x4 或 6x6）来执行此操作，以便解决方案步骤更少，从而更容易掌握对称性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:31:55.967

一般来说，对称只对放置的第一块有效。一旦一块棋子放在棋盘上，您就会失去部分或全部对称性：棋盘在镜像或旋转时看起来不再一样。

您发布的问题似乎假设皇后是放置的第一块。对于特定的问题，这是有道理的，因为皇后可以比其他任何棋子覆盖更多的棋盘，因此可以减少放置剩余棋子所需的工作。但是，无论您首先放置什么棋子，对称方面都是相似的：只有第一个棋子可以利用整个棋盘的对称性。

* * *

请注意，一旦放置了第一块，可能仍然存在一些残余对称性，这可以节省额外的时间。例如，如果第一块沿对角线放置，您仍然可以沿该对角线镜像。然而，这种残余对称性将需要更复杂（且容易出错）的代码来利用......

# android - Android：设置地图意图的缩放

> ID：10525028
> 
> 赞同：1
> 
> 时间：2012-05-09T22:31:03.100
> 
> 标签：android, map

Java 或 .NET 的答案很好。

我使用以下内容创建了一个 Android 地图，工作正常：

```
 var geoUri = Android.Net.Uri.Parse ("geo:42.374260,-71.120824");
   var mapIntent = new Intent (Intent.ActionView, geoUri);
   StartActivity (mapIntent); 
```

有没有办法向意图发送缩放到一定数量的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:37:08.197

根据[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)添加后缀“?z=zoom”，其中缩放来自 [2..23]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T08:43:44.543

"geo:42.374260,-71.120824?z=16" 在你的 Uri 设置 z=1-23 范围（1 到 23）中的 lat,long 值之后，它会起作用。

# .net - 64 位 .NET Informix ADO.NET 提供程序的程序集加载错误

> ID：10525029
> 
> 赞同：5
> 
> 时间：2012-05-09T22:31:09.483
> 
> 标签：.net, ado.net, informix

我正在运行 64 位 Windows 7。我有一个 .NET 4.0 Web 项目和一个访问 Informix 数据库的类库项目。我安装了 IBM Informix Client SDK 版本 3.70.FC4（64 位版本，.NET 2.0 运行时）。

根据[IBM Informix .Net 提供者指南](http://www.cursor-distribution.de/aktuell/documentation/ids_net_bookmap.pdf)

1.  我将目录 %INFORMIXDIR%/bin/netf20/ 添加到 PATH 变量中

2.  我在类库项目中添加了对 IBM.Data.Informix.dll（版本 3.0.0.2）的引用。

当我运行 web 项目时，我收到此错误：

```
Could not load file or assembly 'IBM.Data.Informix' or one of its dependencies.
An attempt was made to load a program with an incorrect format. 
```

关于做什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-17T16:03:06.147

我要解决的步骤：

1.  选择参考列表下的 IBM.Data.Informix DLL 并打开属性。设置**'复制本地' = False**。
2.  **清理解决方案**并尝试构建。

# html - IE7中的水平li显示为垂直

> ID：10525030
> 
> 赞同：2
> 
> 时间：2012-05-09T22:31:20.143
> 
> 标签：html, css, internet-explorer

我已经尝试了一些来自 SO 的调整和修复以及在网上找到的其他一些帖子，但我仍然无法让这个列表在 IE7 中显示为水平。

我用验证器检查了 html 和 css，它是有效的，没有错误。

[我已经在http://dogmatic69.com/tmp/test.html](http://dogmatic69.com/tmp/test.html)中删除了与 ul/li 无关的几乎所有内容

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:10:42.533

除非您需要显式浮动列表项，否则不要。采用`display: inline;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:42:30.227

IE 6 & 7 不喜欢 display:inline-block; 由于某些原因。

尝试使用下面的代码。请注意，它可能会在现代浏览器中破坏它，因此请使用您将其放入仅 IE 6/7 的 CSS 文件中。

```
<!--[if IE 7]>
    <style> li { display: inline-block; display:block; } </style>
<![endif]--> 
```

# php - 是否可以使用 PHP 添加事件侦听器？

> ID：10525031
> 
> 赞同：2
> 
> 时间：2012-05-09T22:31:29.723
> 
> 标签：php, dom-events, smarty

我正在使用 Smarty 模板创建一个调查表，我想在其中附加一个带有特定问题单选按钮的事件，以便在单击其中任何一个时弹出一条消息。

所以我想在它们上添加一个单击/更改事件侦听器，但不知道如何使用 PHP 来实现。由于我事先不知道单选按钮 ID（它们是动态生成的），我不确定我是否可以在这里使用 JavaScript。任何解决方案/建议？

谷歌搜索返回所有类型的为 Android 和 JavaScript 添加事件侦听器的答案，这些都没有用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:06:45.990

只需向单选按钮添加一个类，然后使用 JavaScript/JQuery，您就可以根据需要向输入添加事件侦听器。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="myjsfile.js"></script>
<input type="radio" class="clickyradio" />
<input type="radio" class="clickyradio" />
<input type="radio" class="clickyradio" /> 
```

现在在文件 myjsfile.js

```
$(document).ready(function() {
   $('.clickyradio').click(function() {
      // whatever you want to happen when it gets clicked
      // "this" keyword will refer to the input element that got clicked

   });
}); 
```

如果您需要单击与服务器进行通信，请在单击事件处理程序中放置一个 ajax 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T22:44:10.023

最接近 php 事件侦听器的方法是在 javascript 事件触发后通过 ajax 调用某些特定的 php 功能。该请求在技术上*附加*到来自客户端的事件链（回调）。

但 php 不这样做，因为它不是客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T22:41:05.367

PHP 无法监听单选按钮，因为所有代码都是在服务器端完成的，而单选按钮将在客户端单击。您几乎肯定必须使用 JavaScript。如果您对 JS 不太满意，我建议您查看 jQuery。它非常用户友好，并且可以快速学习恕我直言。有了它，您可以侦听要单击的 raido 按钮，然后通过 AJAX 将信息传递回 PHP 脚本。我会给你一个更好的例子，但是如果不知道你的代码，很难说明它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T22:49:15.510

你可以这样做，你只想使用 php 来编写你的 javascript。您可以通过以下两种方式之一执行此操作，将其写入文件或将脚本指向 php 文件。

如果选择后者，[本站](http://www.javascriptkit.com/javatutors/externalphp.shtml)

讨论如何设置文件。如果您在文档中执行此操作，您只需执行类似的操作

```
 <?php

   echo "<script>";

   if($radio_button == 'blah'){
      echo "document.getElementById('$radio_button')";//bind your event here
   }
   echo "</script>"; 
```

说得通？在 javascript 命令中调用 php 文件可能更简洁，但两种方式都可以。

# objective-c - (UITableView) 背景图案图像问题

> ID：10525035
> 
> 赞同：1
> 
> 时间：2012-05-09T22:31:42.327
> 
> 标签：objective-c, cocoa-touch, uitableview, background-image

有两段代码：

代码1：

```
UIView* _backView = [[[UIView alloc] initWithFrame:[[self view] frame]] autorelease];
[_backView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"testbg"]]];
[[self tableViewCountrySelector] setBackgroundView:_backView]; 
```

代码2：

```
UIView* _backView = [[[UIView alloc] initWithFrame:[[self view] frame]] autorelease];
[[self tableViewCountrySelector] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"testbg"]]];
[[self tableViewCountrySelector] setBackgroundView:_backView]; 
```

我的问题是：

1.  为什么上面的代码输出相同的结果？这些代码应该解决 UITableView 背景的图案图像问题。

我只是不明白代码 2 是如何工作的。

# c++ - 如何在 STL 地图上使用 binary_search

> ID：10525037
> 
> 赞同：4
> 
> 时间：2012-05-09T22:31:49.703
> 
> 标签：c++, map

我想知道你是否可以在 STL 地图上使用 STL binary_search。我已经尝试过，但仍然无法正常工作

```
map<int,string> dataMap;

if(binary_search (dataMap.begin().first, dataMap.end().first, key))
    // do some stuff 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T22:36:36.360

STL`map`本质上是一个二叉搜索树 - 只需使用`map::find`. 在存在容器成员函数的地方使用它们比算法更可取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T22:37:50.960

使用`std::map::lower_bound`,`std::map::find`和`std::map::upper_bound`代替。

```
if(binary_search (dataMap.begin().first, dataMap.end().first, key)) 
```

binary_serach 需要迭代器。`dataMap.begin().first`并且`dataMap.end().first`不是迭代器。另一个问题是访问`dataMap.end().first`很可能会使您的应用程序崩溃。

# android - Sencha Touch 2 - 选择一张照片

> ID：10525040
> 
> 赞同：2
> 
> 时间：2012-05-09T22:32:09.910
> 
> 标签：android, iphone, ios, mobile, sencha-touch-2

我是 Sencha 的新手，并试图构建一个简单的流程，用户需要选择一张照片才能继续“第 2 步”。照片的选择可以来自新的相机捕捉或来自现有照片。

这是我捕获照片的代码：

```
 Ext.device.Camera.capture({
        success: function(image) {
            Ext.create('myapp.view.PreviewImage', {
                title: 'Test photo',
                description: 'Testing a camera capture',    
                src: image,
                fullscreen: true
            });
        },
        quality: 75,
        width: 200,
        height: 200,
        destination: 'data'
    }); 
```

我正在等待我的 iPhone 通过邮件到达以便我可以测试相机（因为 iOS 模拟器没有硬件支持）所以上面的代码可能会或可能不会工作。我的问题是，有什么替代方法 - 我从 Sencha Touch 2 文档的示例中获取了上面的代码，`Ext.device.Camera`我看到他们将它存储在`data`. 我注意到其他一些示例`data`将成为`app`.

是否可以使用当前的 Sencha Touch 2 设备 api 浏览设备上的照片？我在 Sencha 论坛上阅读了一些关于使用 PhoneGap 作为本机设备包装器的帖子，但是使用 Sencha Touch 2，它有自己的本机打包程序和设备 API，所以我想我应该能够在此处包含整个应用程序。

根据他们位于此处的文档（似乎不完整）：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.device.Camera](http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Camera)

> Sencha Packager 和 PhoneGap 实现都将使用本机相机功能来拍摄**或选择**照片。Simulator 实现将简单地返回假图像。

Ext.device.Camera 文档中提到的仅有的两种方法是`capture()`和`getInitialConfig()`

有人可以指点我一个片段或为我提供一个简单的例子来浏览设备上的现有照片吗？

**更新**- 每个答案中引用的新文档，这里是`source`属性规范：

```
The source of where the image should be taken. Available options are:

album - prompts the user to choose an image from an album
camera - prompts the user to take a new photo
library - prompts the user to choose an image from the library 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:18:17.377

您可以设置`source`捕获方法的属性。

文档：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.device.camera.Abstract-method-capture](http://docs.sencha.com/touch/2-0/#!/api/Ext.device.camera.Abstract-method-capture)

```
Ext.device.Camera.capture({
    source: 'library',
    ...
}); 
```

# c# - MonoTouch 绑定无法使用字段

> ID：10525043
> 
> 赞同：3
> 
> 时间：2012-05-09T22:32:16.020
> 
> 标签：c#, ios, xamarin.ios, pinvoke

您好，我正在尝试将 google admboads 更新到 V6，但我在绑定以下内容并将其公开给托管世界时遇到了一些麻烦

我有以下结构

```
typedef struct GADAdSize {
  CGSize size;
  NSUInteger flags;
} GADAdSize; 
```

我在单点触控方面做到了这一点

```
[StructLayout(LayoutKind.Sequential)]
public struct GADAdSize
{
    public SizeF size;
    public uint flags;
} 
```

我有以下代码

```
extern GADAdSize const kGADAdSizeBanner;
extern GADAdSize const kGADAdSizeMediumRectangle; 
```

我无法使用 [Field] 属性绑定它，因为文档指定 Field 属性只能用于

*   NSString 引用
*   NSArray 引用
*   32 位整数 (System.Int32)
*   32 位浮点数 (System.Single)
*   64 位浮点数 (System.Double)

所以我尝试了以下两种我能想到的方法

```
[DllImport ("__Internal")]
    extern static IntPtr kGADAdSizeMediumRectangle ();

public static GADAdSize MediumRectangle 
{
    get 
    {
        object obj = Marshal.PtrToStructure(kGADAdSizeMediumRectangle(), typeof(GADAdSize));
        return (GADAdSize) obj;
    }
} 
```

和

```
public static GADAdSize Banner 
{
    get 
    {
        var handle = Dlfcn.dlopen ("libGoogleAdMobAds", 0);
        IntPtr ptr = Dlfcn.GetIntPtr(handle, "kGADAdSizeBanner");   
        Dlfcn.dlclose (handle);     
        object obj = Marshal.PtrToStructure(ptr, typeof(GADAdSize));
        return (GADAdSize) obj;
    }
} 
```

在这两种方式上它都会崩溃

使用 DLLImport 调用 Marshal.PtrToStructure() 时出现空参数异常，第二个异常引发~~DLLNotFoundException~~ System.ArgumentNullException

提前感谢您的帮助

亚历克斯

* * *

编辑：

抱歉@Poupou 我的错，它抛出一个 System.ArgumentNullException 句柄值它的 0 以及 ptr 值它的 0

堆栈跟踪是：

```
System.ArgumentNullException: Argument cannot be null.
Parameter name: src
  at (wrapper managed-to-native) System.Runtime.InteropServices.Marshal:PtrToStructure (intptr,System.Type)
  at AlexTouch.GoogleAdMobAds.GADAdSizeConstants.get_Banner () [0x00000] in <filename unknown>:0
  at MobclixText.MobclixTextViewController.ViewDidLoad () [0x00006] in /Users/Alex/Projects/MobclixText/MobclixText/MobclixTextViewController.cs:33
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSend (intptr,intptr)
  at MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00010] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIWindow.g.cs:98
  at MobclixText.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app, MonoTouch.Foundation.NSDictionary options) [0x00031] in /Users/Alex/Projects/MobclixText/MobclixText/AppDelegate.cs:44
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at MobclixText.Application.Main (System.String[] args) [0x00000] in /Users/Alex/Projects/MobclixText/MobclixText/Main.cs:17 
```

我想这是由于句柄为0。

关于您的评论

> 将 dlsym 与特殊标志之一（man dlsym）一起使用可能会有所帮助。

你能给我一个如何使用它的例子吗=）？

亚历克斯

* * *

编辑2：

您好@Poupou，感谢您的回答，但是

```
IntPtr RTLD_MAIN_ONLY = (IntPtr) (-5);
IntPtr ptr = Dlfcn.GetIntPtr (RTLD_MAIN_ONLY, "kGADAdSizeBanner"); 
```

我仍然得到`ptr`等于`0`任何其他想法？

亚历克斯

* * *

编辑3：

好的，我现在尝试以下

```
IntPtr RTLD_MAIN_ONLY = Dlfcn.dlopen (null, 0);
IntPtr ptr = Dlfcn.dlsym (RTLD_MAIN_ONLY, "kGADAdSizeBanner");              
Console.WriteLine("RTLD_MAIN_ONLY: " + RTLD_MAIN_ONLY);
Console.WriteLine("ptr: " + ptr); 
```

`Dlfcn.dlopen (null, 0);`正如它现在在[这里](https://github.com/mono/maccore/blob/master/src/generator.cs#L2733)完成的那样，我得到了一个句柄值`-2`，但我猜本机链接器现在正在删除符号，我怎样才能防止这种情况发生？

非常感谢您的时间@Poupou

亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:49:41.457

所以我找到了一种获取值的方法。第一部分是说服链接器导出符号（不隐藏任何现有符号）。这可以通过创建（本地）符号的别名（默认为全局）来完成。例如

```
-gcc_flags="-Xlinker -alias -Xlinker _kGADAdSizeBanner -Xlinker _MTAdSizeBanner" 
```

之后的代码：

```
IntPtr RTLD_MAIN_ONLY = Dlfcn.dlopen (null, 0);
IntPtr ptr = Dlfcn.dlsym (RTLD_MAIN_ONLY, "MTAdSizeBanner");
object obj2 = Marshal.PtrToStructure(ptr, typeof(GADAdSize)); 
```

将为您`GADAdSize`提供一个值为 320x50 的实例。

您需要重新导出您需要的每个符号 (yuck)，但这应该可以将其包含在`[LinkWith]`属性 (iirc) 中，因此最终用户不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:15:37.413

您的第二个解决方案是*通常*使用的解决方案。它从指定的*库*中动态加载符号。OTOH 这**仅**适用于 iOS 上的系统库。

为什么 ？因为您自己提供的库将与您的主要可执行文件静态链接。`[DllImport("__Internal")`这与正常 p/invoke 必须使用的原因相同。

回到符号，`dldym`有一些选项可以处理主要的可执行文件（或所有加载的代码）。`man dlsym`在终端窗口上执行以查看它们。这可能（没有尝试过）使用：

```
 IntPtr RTLD_MAIN_ONLY = (IntPtr) -5;
 IntPtr ptr = Dlfcn.GetIntPtr (RTLD_MAIN_ONLY, "kGADAdSizeBanner"); 
```

注1：`Dlfcn.GetIntPtr`是一种实用方法，基本上是`dlsym`;

注意 2：也请查看其他选项 :-) 如果您得到一个非空（非`IntPtr.Zero`）指针，那么您可以尝试将其编组为一个`SizeF`结构。

# xcode - 在 TableView 字幕问题中保存当前日期

> ID：10525048
> 
> 赞同：1
> 
> 时间：2012-05-09T22:32:41.087
> 
> 标签：xcode, uitableview, datetime, subtitle, detailtextlabel

我试图在 TableView 的副标题中记录日期和时间我使用了一个数组作为副标题，就像我对文本字段所做的那样，但它不适用于副标题。难道我做错了什么？我为带有 * 的字幕添加的代码。

```
-(IBAction)save{

    *NSDate *now = [NSDate date];
    *NSLog(@"now: %@", now); // now: 2012-02-28 09:57:49 +0000
    *NSString *strDate = [[NSString alloc] initWithFormat:@"%@",now];

    NSUserDefaults *add1 = [NSUserDefaults standardUserDefaults];
    NSMutableArray *myList = [[[NSUserDefaults standardUserDefaults] valueForKey:@"myTxtList"] mutableCopy];
    *NSMutableArray *myDate = [[[NSUserDefaults standardUserDefaults] valueForKey:@"myDateList"] mutableCopy];

    [myList addObject:txt1.text];
    *[myDate addObject:strDate];

    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithArray:myList] forKey:@"myTxtList"];
    *[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithArray:myDate] forKey:@"myDateList"];

    [add1 synchronize];
    self.dataArray = myList;
    *self.dateArray = myDate;
    [self.tbl1 reloadData];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.dataArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myTxtList"];
    *self.dateArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myDateList"];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dataArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *string = [dataArray objectAtIndex:indexPath.row];
    *NSString *dateString = [dateArray objectAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell==nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = string;
    *cell.detailTextLabel.text = dateString;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:01:10.357

您将其存储为 NSDate，然后将其作为 NSString 读回。

另外，我假设您正在使用 ARC，因为您没有发布 myList 和 myDate 的可变副本。如果你不在 ARC 上，你应该发布这些，否则它会泄漏。

# ruby - Ruby 元类混淆

> ID：10525053
> 
> 赞同：14
> 
> 时间：2012-05-09T22:33:02.720
> 
> 标签：ruby, metaclass

我知道 ruby​​ 中的所有类都是元类类的实例。并且那个“常规”对象是这些类的实例（元类类的实例）。

但我一直想知道，我的意思是类是对象的根，类本身就是类的实例（称为元类，因为它的实例是类）。我在一些博客中看到了`new`类 Class 的一些重写方法。

所以 Class 表现得像一个类，但它的实例是类。所以看起来我们有一个圆圈，看起来类 Class 是它自己的一个实例。

我显然在这里遗漏了一点。类Class的由来是什么？

这是一个让我感到困惑的例子：

```
class Class
  def new
    #something
  end
end 
```

但是关键字`class`暗示了类Class的一个实例。那么这是如何工作的呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-10T00:30:14.173

> 这是怎么工作的

容易：它没有。无论如何，不​​在 Ruby 中。

就像在大多数其他语言中一样，有一些核心实体被简单地假设为存在。它们从天而降，凭空显现，神奇地出现。

在 Ruby 中，其中一些神奇的东西是：

*   `Object`没有超类，但不能定义没有超类的类，隐式直接超类总是`Object`. [注意：可能存在实现定义的超类`Object`，但最终会有一个没有超类。]
*   `Object`是 的一个实例`Class`，它是 的子类`Object`（这意味着间接地`Object`是它自己的一个实例`Object`）
*   `Class`是 的子类`Module`，是 的实例`Class`
*   `Class`是一个实例`Class`

这些东西都不能用 Ruby 解释。

`BasicObject`, `Object`,`Module`并且`Class`都需要同时出现，因为它们具有循环依赖关系。

仅仅因为这种关系不能用 Ruby 代码表达，并不意味着 Ruby 语言规范不能说它必须如此。由实现者来想办法做到这一点。毕竟，Ruby 实现对您作为程序员所没有的对象具有一定的访问权限。

例如，Ruby 实现可以首先创建`BasicObject`，将其`superclass`指针和指针都设置`class`为`null`。

然后，它创建`Object`，将其`superclass`指针设置为`BasicObject`并将其`class`指针设置为`null`。

接下来，它创建`Module`，将其`superclass`指针设置为 ，`Object`并将其`class`指针设置为`null`。

最后，它创建`Class`，将其`superclass`指针设置为 ，`Module`并将其`class`指针设置为`null`。

现在，我们可以覆盖`BasicObject`'s、`Object`'s、`Module`'s 和`Class`'`class`指向 的指针`Class`，我们就完成了。

这从系统外部很容易做到，只是从内部看起来很奇怪。

但是，一旦它们*确实*存在，就完全有可能在纯 Ruby 中实现它们的大部分行为。您只需要这些类的准系统版本，多亏了 Ruby 的开放类，您可以在以后添加任何缺少的功能。

在您的示例中，`class Class`不是创建一个名为 的新类`Class`，而是重新打开运行时环境提供给我们的*现有*类。`Class`

因此，完全有可能解释`Class#new`普通 Ruby 的默认行为：

```
class Class
  def new(*args, &block)
    obj = allocate # another magic thing that cannot be explained in Ruby
    obj.initialize(*args, &block)
    return obj
  end
end 
```

[注：实际上`initialize`是私有的，所以你需要使用它`obj.send(:initialize, *args, &block)`来规避访问限制。]

顺便说一句：`Class#allocate`是另一种神奇的东西。它在 Ruby 的对象空间中分配一个新的空对象，这是 Ruby 无法做到的。因此，`Class#allocate`运行时系统也必须提供一些东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T19:11:56.323

“扭曲”链接给出了元循环。它是从根的特征类到类的内置超类链接`Class`。这可以表示为

```
BasicObject.singleton_class.superclass == Class 
```

理解该映射的一个线索`.class`是将该映射视为从 eigenclass 和 superclass 链接派生的：对于 object `x`，`x.class`是 eigenclass 的超类链中`x`的第一个类。这可以表示为

```
x.class == x.eigenclass.superclass(n) 
```

其中`eigenclass`是`singleton_class` （抵抗立即值问题）的“概念别名”，`y.superclass(i)`表示`i`第一个超类，`y`并且`n`是最小`x.eigenclass.superclass(n)`的一个类。等价地，`x.eigenclass`跳过超类链中的特征类（参见[rb_class_real](http://rxr.whitequark.org/mri/source/object.c?v=1.9.3#147)，它还揭示了在 MRI 中，甚至`superclass`链接也是间接实现的——它们是通过跳过“ *iclasses* ”而产生的）。这导致`class`每个类（以及每个特征类）的 始终是`Class`类。

[这张图](http://www.atalon.cz/rb-om/ruby-object-model/#s2-example)提供了一张图片。

元类混淆有两个主要来源：

*   **小话**。Smalltalk-80 对象模型包含由 Ruby 对象模型纠正的概念上的不一致。此外，Smalltalk 文献在术语中使用辩证法，不幸的是，Ruby 文献中没有充分纠正这一点。

*   **元类**的定义。目前，该定义指出*元类是类的类*。然而，对于所谓的“*隐式元类*”（Ruby 和 Smalltalk-80 的情况），更合适的定义是类的**元对象**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T00:29:56.500

是的，Class 是它自己的一个实例。它是Module的子类，也是类的实例，Module是Object的子类，Object也是Class的实例。它确实是循环的——但这是核心语言的一部分，而不是库中的东西。Ruby 运行时本身并没有你或我在编写 Ruby 代码时所做的限制。

不过，我从来没有听说过用来谈论 Class 的“元类”这个词。它在 Ruby 中根本没有使用太多，但是当它使用时，它通常是官方称为“对象的单例类”的同义词，这是一个比对象-模块-类三角形更令人困惑的话题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T00:10:13.703

虽然它有点过时，[但_why 的这篇文章](http://viewsourcecode.org/why/hacking/seeingMetaclassesClearly.html)可能有助于理解这种行为。[您可以在 Paolo Perrotta 的Metaprogramming Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)中找到对该主题的更深入了解。

# c++ - 如何查看 gdb 中的复杂对象？

> ID：10525056
> 
> 赞同：3
> 
> 时间：2012-05-09T22:33:14.387
> 
> 标签：c++, c, gdb, qt-creator

是否有任何简单的方法可以编写脚本或某种代码来使用它们来观察 GDB 中的复杂对象？我能想到的一件事是在代码中为此目的提供特殊功能，并直接通过`call debugViewer(object)`. 有没有更好的方法来做到这一点？

使用可视化调试器（例如 Qt Creator 中的调试器），您将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:22:19.207

我使用 GDB 的 DDD 图形界面，它专门用于显示您可能称之为“复杂对象”的内容。然而，话虽如此，我发现在琐碎的类/结构之外的任何东西中编写 dbg() 方法通常会更好，其好处是 dbg() 方法不仅可以将对象的内容打印到标准输出，它还可以进行自定义对象完整性检查，包括验证拥有/连接的对象是否处于预期状态等，并且它可以隐藏它知道有效但通常对调试没有帮助的信息，除非您将“详细”标志传递给它（或具有单独的详细功能）。为了更容易从 GDB 命令行调用该方法，我编写了非成员方法，它们将指针指向预期对象的 dbg() 方法

另外关于完整性检查，实际上与您的问题无关，我发现几乎任何时候有人试图复制类似于 std::string、std::list 或 std::map 或其他任何东西的功能（通常用于“性能原因”），他们总是会出错，通常除了在难以测试的毛茸茸的边缘情况下不会出现。现在我已经通过编写数据结构类的数据结构完整性测试器朋友类三度发现了此类实现中的多个毛茸茸的边缘案例错误，其工作是简单地爬取整个数据结构（列表或树或其他） ) 一直到最后，寻找陈旧/损坏的指针（即在列表中，任何 'next->prev' 不等于 'this' 或 'prev->next' 不等于 ' 这'等）。其中一个数据结构是一个侵入式组合列表图（一个带有嵌入式 DAG 的列表），它的故障排除很有趣......在单独列表之间的几次拼接/传输操作之后，有很多机会搞砸向上链接并在一个列表中获取 DAG，并在另一个列表中引用节点。令人惊讶的是，在我编写完整性检查器并发现毛茸茸的边缘案例错误之前，该结构在内部使用了将近一年。

抱歉，我想这不是你的问题，但不管怎样，把它吐出来很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:07:49.740

您可以尝试使用“Insight”，这是一个很好的 gdb 图形用户界面，请看：

[GDB GUI 洞察力](http://sources.redhat.com/insight/screenshots.php)

# php - 将图像动态加载到 javascript 函数中

> ID：10525060
> 
> 赞同：0
> 
> 时间：2012-05-09T22:33:29.863
> 
> 标签：php, javascript, jquery, ajax, photoswipe

我正在使用 Javascript 照片查看器插件（此处->http://www.photoswipe.com/）。当用户在图像中滑动时，我想动态更新插件附加到的照片。

我有一个 Javascript 对象（我使用 Joose 框架），它负责根据对解析图像元素的 php 脚本的 ajax 调用结果来更新它的属性。

这是我的代码：

```
<script>
    (function(window, PhotoSwipe){

        domInjector = new DOMInjector();
        domInjector.init();

        document.addEventListener('DOMContentLoaded', function(){

            var options = {
                 preventHide: true,
                 getImageSource: function(obj)
                 {
                    return obj.url;
                 },

                 getImageCaption: function(obj)
                 {
                    return obj.caption;
                 }
            },

            instance = PhotoSwipe.attach(
            [
                domInjector.output
            ], 

            options 

            );

            instance.show(0);

    }, false);

}(window, window.Code.PhotoSwipe)); 
```

domInjector.output 应该是这样的 -> { url: '" + this.masterObject.elementArray[1].imageLink + "', caption: 'Image 001'}

其中 this.masterObject.elementArray[1].imageLink 是图像的 URL。

但是...因为 ajax 函数需要有限的时间才能完成 domInjector.output 为空几秒钟并且图像滑动插件没有元素！

我的其余代码都很好，一切正常。我只是不知道一旦 ajax 函数完成，我怎么能注入更新的 domInjector.output？

对不起，这个很难解释。不过，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:35:27.520

`document.DOMContentLoaded`我认为，一旦您的 Ajax 调用成功返回，您需要在处理程序中为您从 DOMInjector 类触发的事件执行此操作，而不是在事件处理程序中实例化 PhotoSwipe 插件。您还可以考虑将回调函数作为参数传递给 DOMInjector 类，并在 Ajax 调用返回时执行该函数。无论哪种方式，当您实例化 PhotoSwipe 时，您都可以使用该调用的输出。

# jasper-reports - 为一家小型（但正在成长）的互联网公司报告

> ID：10525061
> 
> 赞同：2
> 
> 时间：2012-05-09T22:33:31.777
> 
> 标签：jasper-reports, reporting, birt, pentaho

所以我在一家从事附属业务的公司工作。我为他们构建了一个小型 Web 应用程序，用于获取数据、记账和类似的事情。

现在一切正常，我的客户 - 当然 - 想要对收集的数据进行数据挖掘，如过滤、聚合、绘图等。自然地——至少作为一个懒惰的开发人员——我对手工实现那种东西没有兴趣，所以我想知道是否有一个精简但仍然强大的开源报告软件可以用来做这件事？

我对此类软件的标准如下：

*   对于作为开发人员的我来说，报告应该易于编写/编码，理想情况下还应以易于保存在版本控制系统中的格式保存
*   数据源是 JSON，但也可以转换为 XML
*   数据分组、连接、过滤、计算等应该是可能的（不，没有 XSLT :)
*   存在用于报告可视化的模块，理想情况下可自行部署到网络
*   视觉报告设计是一个加分项，但不是必需的
*   平台无关紧要，只要易于设置和管理即可

我意识到市场上基本上存在三大操作系统“竞争对手”，BIRT、Pentaho 和 JasperReports。我完全不确定这样的工具是否是我们刚才的正确选择*，*因为它们在功能和复杂性方面都感觉有点过大......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:24:43.960

根据您的观点快速回顾 Pentaho（一般是 Pentaho BI 平台，不仅限于报告）。当然社区版（开源）已经很好地服务于社区并且可能已经满足您的需求，但企业版（需要许可证）具有更多附加功能，例如：支持、具有第三方安全性的企业存储库、修订管理和协作（锁定等），用于调度的集成接口，数据集成服务器进行调度并运行企业存储库，文档（知识库，手册）。

当然，可以在[此处](http://wiki.pentaho.com/display/COM/Community+Wiki+Home)的社区 wiki 中找到其他资源，但它仍然是工作副本。

现在回到你的观点。

> *   *对于作为开发人员的我来说，报告应该易于编写/编码，理想情况下还应以易于保存在版本控制系统中的格式保存*

如果您希望为报告编写代码，就我所使用的而言，报告文档很容易理解（也可以在 wiki 上找到）。您也可以在网上找到示例。它有点类似于 JasperReports。

> *   *数据源是 JSON，但也可以转换为 XML*

Pentaho 报表设计器（将在下面的可视化报表工具中解释）可以识别 XML 数据源类型，但我没有使用 JSON 数据源类型。

> *   *数据分组、连接、过滤、计算等应该是可能的（不，没有 XSLT :)*

您可以使用 Pentaho 平台的 Pentaho Data Integration 进行转换，主要是您要求的。它有各种各样的工作要执行，你只需要将它们链接在一起。

> *   *存在用于报告可视化的模块，理想情况下可自行部署到网络*

是的，存在一个用于报告可视化的模块，它位于 Pentaho BI Server（一个网络应用程序，它可以识别您所有的 Pentaho 解决方案。以您的报告为例，您只需将报告放入解决方案存储库（其中BI 服务器连接到，它只是一个简单的文件夹），当您在 BI 服务器中启动它时，它将显示您的报表预览，以及您希望显示以操作报表中的数据的选定参数。

> *   *视觉报告设计是一个加分项，但不是必需的*

Pentaho 有一个名为 Pentaho Report Designer 的报告工具。它类似于 JasperReports Visual Studio，并且非常易于学习和使用。

> *   *平台无关紧要，只要易于设置和管理即可*

该平台易于设置和管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:29:23.940

由于这都是基于网络的，您是否查看过任何 JS 库？

您没有将任何选项作为选项包括在内，但我认为我会特别插入一个插件，因为我已经专门使用 BIRT 多年，并且我已经使用了一点 Jasper 报告，但我已经放弃了两者都赞成ExtJS 库。

ExtJS 图表非常容易定制，而且它们开箱即用的动画效果很好——在我看来，它们在视觉上击败了 BIRT 和 Jasper 图表。ExtJS 网格具有出色的内置分组、排序和过滤功能，以及用于导出到 excel、分页等的其他插件。以及该库提供的其他功能，如拖放支持、JS 类的同步加载， ETC。

我的工作都是供内部使用的，所以操作系统版本对我来说很好。

在没有设计师的情况下使用它很容易，但他们确实有一个。

# sql - 使用数据库表的时间列生成开始和结束时间

> ID：10525063
> 
> 赞同：0
> 
> 时间：2012-05-09T22:33:33.843
> 
> 标签：sql, sqlite

我有以下问题：我有一个带有顶点和边的网络，车辆在上面移动。每次车辆到达顶点时，当前时间戳以及顶点和车辆 ID 都会记录到数据库中。我需要一个表格，其中包含车辆在两个顶点之间所需的时间差。

注意：条目是按时间戳升序记录的，但不一定是 car_ids 或crossing_ids。

例子：

```
|  ID  | Car_id  | Crossing_id  |     TIMESTAMP       |
|   1  |    1    |      1       | 2010-09-25 05:20:00 |
|   2  |    1    |      2       | 2010-09-25 05:23:00 |
|   3  |    2    |      1       | 2010-09-25 05:25:00 |
|   4  |    1    |      3       | 2010-09-25 05:35:00 |
|   5  |    2    |      5       | 2010-09-25 05:42:00 | 
```

想要的结果：

```
| Car_id  | Crossing_id_start |   Timestamp_start   | Crossing_id_end |    Timestamp_end    |
|   1     |         1         | 2010-09-25 05:20:00 |         2       | 2010-09-25 05:23:00 |
|   1     |         2         | 2010-09-25 05:23:00 |         3       | 2010-09-25 05:35:00 |
|   2     |         1         | 2010-09-25 05:25:00 |         5       | 2010-09-25 05:35:00 | 
```

示例测试数据：

```
DROP TABLE IF EXISTS "test";
CREATE TABLE "test" ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "car_id" TEXT NOT NULL , "crossing_id" TEXT NOT NULL , "time" DATETIME);
INSERT INTO "test" VALUES(1,'car_1','crossing_1','2010-09-25 05:20:00');
INSERT INTO "test" VALUES(2,'car_1','crossing_2','2010-09-25 05:23:00');
INSERT INTO "test" VALUES(3,'car_2','crossing_1','2010-09-25 05:25:00');
INSERT INTO "test" VALUES(4,'car_1','crossing_3','2010-09-25 05:35:00');
INSERT INTO "test" VALUES(5,'car_2','crossing_5','2010-09-25 05:42:00'); 
```

任何帮助是极大的赞赏; 最喜欢的是 sqlite，但也欢迎任何关于其他 sql 数据库的提示！

提前致谢， 杉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:56:29.347

一种可能的解决方案，如果您知道数字将是连续的

```
select 
  t1.ID as Car_id, 
  t1.Crossing_id as Crossing_id_start, 
  t1.TIMESTAMP as Timestamp_start, 
  t2.Crossing_id as Crossing_id_end, 
  t2.TIMESTAMP as Timestamp_end
from table t1
join table t2 on t1.ID = t2.ID and t1.Crossing_id = t2.Crossing_id + 1
order by Crossing_id_start, Crossing_id_end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:51:36.330

我没有确切的 sqlite 语法，但我会分两步解决这个问题......

1.  按您需要的顺序将数据放入游标或临时表中

    `SELECT Car_id, Crossing_id, TIMESTAMP FROM Example ORDER BY Car_id ASC, Crossing_id ASC`

2.  迭代新表中填入crossing_id_start和crossing_id_end的行，其中crossing_id_start变成crossing_id_end，只要当前记录的car_id与前一条记录相同。

# facebook - 为什么我不能将服务器端流 oauth 令牌用于 iOS 应用程序提要对话框？

> ID：10525066
> 
> 赞同：1
> 
> 时间：2012-05-09T22:33:42.930
> 
> 标签：facebook, authentication, mobile, oauth, dialog

我正在开发一种同时具有桌面网站和本机 iOS 应用程序的产品。我们在两种情况下都为我们的用户提供 Facebook 连接作为登录选项。

我的目的是通过安全的 JSON API 共享相同的 Facebook 令牌，以便在两种情况下使用：当用户登录网络时，令牌存储到我们的后端，以便移动客户端下次运行时，它可以下载令牌并使用它，反之亦然。（*我在问题末尾解释了这种方法的详细推理，对于问题不是必需的。）

**问题：当iOS客户端使用token预设一个[feed dialog](http://developers.facebook.com/docs/reference/iossdk/dialog/)时，如果该token是web使用[server-side flow](http://developers.facebook.com/docs/authentication/server-side/)生成的，dialog webview会呈现错误：**

**“{我的应用名称}出现错误。请稍后再试。”**

这是可靠的可重现的：

1.  使用服务器端流程生成新的访问令牌。确保您请求 publish_actions 权限，因为您将使用提要对话框。
2.  使用隐身浏览器窗口（获取一个空的 cookie 罐），查看 iOS 提要对话框将在其 web 视图中呈现的 m.facebook.com 页面：[https ://m.facebook.com/dialog/feed?access_token=SERVER_SIDE_FLOW_ACCESS_TOKEN&app_id =YOUR_APP_ID&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch](https://m.facebook.com/dialog/feed?access_token=SERVER_SIDE_FLOW_ACCESS_TOKEN&app_id=YOUR_APP_ID&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch)

除了#2，您可以完成所有工作（我已经完成）使用 Facebook SDK 创建一个虚拟 iOS 应用程序，正确实例化它并显示对话框。为了重现错误，直接访问 m.facebook.com 提要 URL 更容易。

如果令牌是由本机 Facebook iOS SDK 发起的身份验证流而不是服务器端身份验证流生成的，则上述提要 URL 可以正常工作，正如预期的那样。

此外，任何一个令牌（移动或服务器生成）都非常适合直接通过图形 api 发布提要项目。问题实际上只是与移动提要对话框有关。

*Facebook 是否故意禁止服务器端生成的令牌在移动提要对话上下文中运行？*

*这是 m.facebook.com 上的提要对话框端点的错误吗？*

*或者，希望，我做错了什么？*

* * *

为什么我要分享代币？

*   由于正在删除 offline_access 权限，因此每个客户端（Web 与移动）都可以从让另一个客户端在用户处于活动状态时刷新相同的令牌中受益。这将导致令牌过期的情况减少，因此用户必须从头开始重新进行身份验证的情况也将减少。
*   同样，不会频繁地要求用户批准额外的权限，因为每个客户端都可以从对方的权限增强中受益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:30:03.000

您从服务器端身份验证获得的令牌与客户端的令牌不同（我将 iOS/Android 视为客户端）。服务器令牌的寿命很长（60 天），而客户端令牌的寿命很短（几个小时）。

服务器端流程增加了另一层安全性，您的服务器对 facebook 服务器进行身份验证，这可能是您在使用此流程时自动获得长期令牌的原因。

如果您使用访问令牌尝试[调试器](https://developers.facebook.com/tools/debug)，您将收到有关令牌的信息，例如令牌的“来源”。例如，从客户端身份验证（使用 js）生成的令牌具有“Origin：Web”。这意味着 facebook 确实区分了令牌。

我不是 100% 确定这一点，但从你所说的听起来确实像 facebook 将 UI 限制为客户端令牌的使用而不是服务器端令牌，可能是因为对话框让用户不需要做事应用程序获取权限，因此如果您有 60 天令牌，则您的应用程序可以代替用户使用它，并在未经他许可的情况下代表他做事。我只是在这里猜测。

我建议你只在服务器端使用服务器令牌，让 iOS 客户端处理他自己的令牌。根据[处理无效和过期的访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)指南，它指出：

> **iOS 原生应用**
> 
> API 错误由 FBRequestDelegate 接口处理。当您检测到访问令牌无效或已过期时，您的应用程序将需要将多任务转移到 Facebook iOS 应用程序。假设用户没有取消对您的应用程序的授权，他们将立即使用新的有效访问令牌将多任务返回到您的 iOS 应用程序。

这意味着您不必担心令牌在客户端过期。

# windows - 语法错误在 Python 中使用带有替换（“\\”，“\”）的 Windows 文件路径

> ID：10525072
> 
> 赞同：2
> 
> 时间：2012-05-09T22:34:23.333
> 
> 标签：windows, syntax, replace, python-2.7, filepath

我正在尝试用单正斜杠更改路径分隔符的双正斜杠。该程序读取一个包含路径的文件列表的文本文件。我也在使用一个windows盒子。

```
f = open('C:/Users/visc/scratch/scratch_child/test.txt')

destination = ('C:/Users/visc')
# read input file line by line
for line in f:

  line = line.replace("\\", "/")
  #split the drive and path using os.path.splitdrive
  (drive, path) = os.path.splitdrive(line)
  #split the path and fliename using os.path.split
  (path, filename) = os.path.split(path)
  #print the stripped line
  print line.strip()
  #print the drive, path, and filename info
  print('Drive is %s Path is %s and file is %s' % (drive, path, filename)) 
```

和：

```
 line = line.replace("\\", "/") 
```

它工作正常，但不是我想要的。但是如果我用反斜杠替换正斜杠，我会收到语法错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:09:28.410

反斜杠 \ 是一个转义字符，表示它后面的字符应该被特殊解释。像 \n 用于回车。如果单个反斜杠后面的字符不是用于解释的有效字符，则会出错。

反斜杠是用于解释的有效字符，表示单个反斜杠。所以：

```
line = line.replace("\\", "/") 
```

将用单个正斜杠替换单个反斜杠。要将双反斜杠转换为单反斜杠，请使用：

```
line = line.replace("\\\\", "\\") 
```

# c# - 如何将数据库整数值绑定到 FormView 控件中的 TextBox？

> ID：10525076
> 
> 赞同：0
> 
> 时间：2012-05-09T22:34:45.057
> 
> 标签：c#, .net, devexpress

在我的页面上，我有 FormView 控件，并且我将 Integer 数据库字段绑定到位于 FormView 的 EditItemTemplate 内的 TextBox。

```
<FormView ...>
    <EditItemTemplate> 
        <dx:ASPxTextBox ID="txtDiameter" runat="server" Text='<%# Bind("Diameter") %>' />
        ... 
    <EditItemTemplate>
    ... 
</FormView> 
```

我的问题是当直径字段为空时，txtDiameter 获取空字符串的值。当我单击更新命令时（如果我没有在 txtDiameter 中提供任何数值），则会引发客户端错误

> Sys.WebForms.PageRequestManagerServerErrorException：不是 Int32 的有效值。

我发现了 2005 年的一些帖子，声称这是由于一些错误而发生的。好吧，现在是 2012 年。我想出解决这个问题的唯一方法是使用`FormView_ItemUpdating`事件，循环遍历所有有问题的值并将它们从 String.Empty 转换为 null。

我只是有点怀疑这可能没有必要。有没有另一种方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:22:38.920

而是绑定编辑器的 Value 属性：

```
<dx:ASPxTextBox ID="txtDiameter" runat="server" Value='<%# Bind("Diameter") %>' /> 
```

这行得通吗？

# android - 关于在一个活动中切换布局，带有两个 baseAdapter

> ID：10525086
> 
> 赞同：2
> 
> 时间：2012-05-09T22:35:26.650
> 
> 标签：android, android-layout

基本上，我得到一个活动有两个布局，一个是 gridview，它有 mBaseAdapter 作为它的适配器。另一个是gallery，它有galleryBaseAdapter 作为它的适配器。两种布局中的元素都在 onCreate 函数中初始化。

我有一个菜单项来切换布局，但是当我切换时，适配器似乎没有更新。我已经调用了数据更改通知程序，但仍然无法正常工作。

这是一段代码：

```
if (mIsGridView) {
mIsGridView = false;
Main.this.setContentView(R.layout.gallary_view);
updateGalleryNotifer();
} else {
mIsGridView = true;
Main.this.setContentView(R.layout.view_table_layout);
updateBaseViewNotifer();
} 
```

感谢您提供任何有用的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:48:23.357

关于这个问题，我自己找到了解决方案。答案是：切换布局后，需要为相应的gridview、gallery或button重新初始化你的元素。如果您不这样做，则任何内容都不会生效。

# asp.net - 有人可以确认我对 asp.net 生命周期的理解吗？

> ID：10525088
> 
> 赞同：2
> 
> 时间：2012-05-09T22:35:34.963
> 
> 标签：asp.net, master-pages

我的目标是找到一种在页面创建之前的最后一刻更新页面标题的方法

我有一个母版页和一个内容占位符，它们始终包含具有特定属性的页面。

该属性可以在代码中的任何位置更新，但我希望该标记的最终值是 html 标题

该页面的预渲染事件是设置标题的最佳位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:51:30.017

`PreRender`是*一个*可以设置标题的地方，另一个-稍后-是`PreRenderComplete`：

```
protected void Page_Init(object sender, EventArgs e)
{
    this.PreRenderComplete += Page_PreRenderComplete;
    this.SaveStateComplete += Page_SaveStateComplete;
} 
```

**编辑**：刚刚注意到您甚至可以使用`SaveStateComplete`事件，这应该是您可以更改标题的最新位置：

```
protected void Page_PreRenderComplete(object sender, EventArgs e)
{
    Page.Title = "late title";
}

protected void Page_SaveStateComplete(object sender, EventArgs e)
{
    Page.Title = "very late title";
} 
```

![在此处输入图像描述](../Images/935163f7f5828f2c30e35da32dc4139a.png)

有关母版页和站点地图数据中页面标题的一些附加信息：

[在 ASP.NET 2.0 中动态设置页面的标题](http://www.4guysfromrolla.com/articles/051006-1.aspx)

# asp.net-mvc-3 - 在 MVC3 asp.net 条件中搜索总是失败

> ID：10525093
> 
> 赞同：0
> 
> 时间：2012-05-09T22:36:19.380
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个动作 SearchPost。在获取操作中：

```
 ViewBag.cities = db.cities.ToList();
        ViewBag.areas = db.areas.ToList();
      IEnumerable<SelectListItem> Months =pm.GetMyMonthList().Select(a => new      
              SelectListItem  {
                    Value = a.Value,
                    Text = a.Text
                }).ToList();
        ViewBag.monthList = Months;
        IEnumerable<SelectListItem> rentTypes = pm
                .GetRentType()
                .Select(a => new SelectListItem
                {
                    Value = a.Value,
                    Text = a.Text
                })
                .ToList();

        ViewBag.typeList = rentTypes;
        return View(db.posts.Include("user").ToList()); 
```

在查看页面

```
 @Html.DropDownList("City",new SelectList(ViewBag.cities as 
         System.Collections.IEnumerable, "city_id", "name"),
          "Select City", new { id = "ddlCars" }) 
         @Html.DropDownList("Area", new SelectList(Enumerable.Empty<SelectListItem>(), 
          "area_id", "name"),
          "Select Area", new { id = "ddlModels" })
        @Html.DropDownList("rent_type", new SelectList(ViewBag.typeList as    
         System.Collections.IEnumerable, "Value", "Text"), "Select Category")       
       @Html.DropDownList("month", new SelectList(ViewBag.monthList as 
        System.Collections.IEnumerable, "Value", "Text"), "Select Month") 
```

在我的发布操作中：

```
 IList<post> p = db.posts.Include("user").ToList();
          string Area = Request.Form["Area"];
          string City = Request.Form["City"];
            if (City != "Select City" && City != null && City !="")
            {
                int c_id = Convert.ToInt32(City);
                city c = db.cities.Single(s => s.city_id == c_id);
                ci = c.name;
            }
            if (Area != "Select Area" && Area != null && Area !="")
            {
                int a_id = Convert.ToInt32(Area);
                area a = db.areas.Single(x => x.area_id == a_id);
                ar = a.name;
            }
         string rent_type = Request.Form["rent_type"];
         string month = Request.Form["month"];
          if (rent_type != null && rent_type != "")
            {
                if ((p != null) && (p.Any()))
                {
                    p = p.Where(a => a.rent_type == rent_type).ToList();
                }
            }
            if (month!= null && month != "")
            {
                if ((p != null) && (p.Any()))
                {

                    p = p.Where(a => a.rent_month == month).ToList();

                }
            }
         return View(p); 
```

在这里，我首先从我的数据库中选择了所有帖子。然后我想按城市、地区、月份和租金类型过滤它。城市和地区是级联下拉列表。当我选择城市和地区时，它会正确过滤记录。但如果我只选择城市它会给出错误：

**序列不包含任何元素**

在线：

面积 a = db.areas.Single(x => x.area_id == a_id);

当我尝试仅按月或rent_type 过滤时，它没有过滤记录并且总是不提供任何记录。

我应该更改哪部分代码来解决这两个问题......

提前致谢...

# javascript - 选择父复选框

> ID：10525094
> 
> 赞同：0
> 
> 时间：2012-05-09T22:36:35.843
> 
> 标签：javascript, jquery

我有一个具有树结构的页面，它的级别数没有限制。每个级别都有一个复选框，我需要能够允许用户勾选他们感兴趣的级别。如果用户单击一个级别，则需要选择该孩子的所有父级别。此外，如果未选中父复选框，则应取消选中所有子级别。

我尝试编写下面的代码，但是如果我单击孩子，它将勾选父母和祖父母，但不选择孩子。我也无法取消选择项目，因为每次我选择一个框时它总是会再次选择它。

我一直在尝试对代码进行更改并有想法，但我认为我走错了方向，我想知道是否有更好的解决方案可用于我想要实现的目标。这是代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Check Box</title>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script language="javascript">
            $(document).ready(function () {
                $(".test").click(function (event) {
                    event.preventDefault();
                });
            });

            function set_checked(id, checked) {
                $("#ID_" + id).attr("checked", checked)
                alert(id);
            }

            function CheckMe(id) {
                var IDS = id.replace("ID_", "");
                var IDS = IDS.split('_');
                for (i = 0; i < IDS.length; i++) {
                    set_checked(IDS[i], true);
                }
            }
        </script>
    </head>
    <body>
        <div>
            <form>
                <p>
                    <input name="ID" type="checkbox" id="ID_123" value="123" onClick="CheckMe('ID_123')" class="test">Grandparent
                    <br>
                    <input name="ID" type="checkbox" id="ID_124" value="124" onClick="CheckMe('ID_123_124')"class="test">Parent
                    <br>
                    <input name="ID" type="checkbox" id="ID_125" value="125" onClick="CheckMe('ID_123_124_125')"class="test">Child
                </p>
                <p>
                    <input type="submit" name="button" id="button" value="Submit">
                </p>
            </form>
        </div>
    </body>
</html> 
```

我使用 jQuery`PreventDefault`来停止复选框的默认操作。对于这方面的任何指导，我将不胜感激。

编辑：

以下是无序列表中的选项。我上面的示例具有误导性，因为它只有三个选项，因为我试图测试单击底部选项并单击父选项而不考虑会有多个树。

```
<form action="" method="get" id="test">
<ul>
<li>
<input type="checkbox" name="ID" value="1">
<label>Level 1</label>
<ul>
<li><input type="checkbox" name="ID" value="2"><label>Level 1.1</label>
<ul>
<li><input type="checkbox" name="ID" value="3"><label>Level 1.1.1</label>
</ul>
</ul>
<ul>
<li><input type="checkbox" name="ID" value="4"><label>Level 1.2</label>
<ul>
<li><input type="checkbox" name="ID" value="5"><label>Level 1.2.1</label>
<li><input type="checkbox" name="ID" value="6"><label>Level 1.2.2</label>
<li><input type="checkbox" name="ID" value="7"><label>Level 1.2.3</label>
<ul>
<li><input type="checkbox" name="ID" value="8"><label>Level 1.2.3.1</label>
<li><input type="checkbox" name="ID" value="9"><label>Level 1.2.3.2</label>
</ul>
<li><input type="checkbox" name="ID" value="10"><label>Level 1.2.4</label>
<li><input type="checkbox" name="ID" value="11"><label>Level 1.2.5</label>
<li><input type="checkbox" name="ID" value="12"><label>Level 1.2.6</label>
</ul>
</ul>
<li><input type="checkbox" name="ID" value="13"><label>Level 2</label>
<ul>
<li><input type="checkbox" name="ID" value="14"><label>Level 2.1</label>
<ul>
<li><input type="checkbox" name="ID" value="15"><label>Level 2.1.1</label>
</ul>
<li><input type="checkbox" name="ID" value="16"><label>Level 2.2</label>
<ul>
<li><input type="checkbox" name="ID" value="16"><label>Level 2.2.1</label>
<li><input type="checkbox" name="ID" value="17"><label>Level 2.2.2</label>
<li><input type="checkbox" name="ID" value="18"><label>Level 2.2.3</label>
<ul>
<li><input type="checkbox" name="ID" value="19"><label>Level 2.2.3.1</label>
<li><input type="checkbox" name="ID" value="20"><label>Level 2.2.3.2</label>
</ul>
<li><input type="checkbox" name="ID" value="21"><label>Level 2.2.4</label>
<li><input type="checkbox" name="ID" value="22"><label>Level 2.2.5</label>
<li><input type="checkbox" name="ID" value="23"><label>Level 2.2.6</label>
</ul>
</ul>
</ul>
<input name="Submit" type="submit" id="Button" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T22:45:18.090

有些插件已经提供了这个功能。

试试这个，因为它完全符合您的要求。

[http://code.google.com/p/checkboxtree/](http://code.google.com/p/checkboxtree/)

演示：

[http://checkboxtree.googlecode.com/svn/tags/checkboxtree-0.5.2/index.html](http://checkboxtree.googlecode.com/svn/tags/checkboxtree-0.5.2/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:02:36.930

不确定“级别”是什么意思，复选框是嵌套在其他元素中，还是与您的示例一样，只是兄弟姐妹？

如果示例 HTML 正确，请删除所有内联 JS，然后执行以下操作：

```
$(".test").on('change', function() {
    var i = $(this).index(),
        c = $(this).is(':checked');
    $(".test").filter(function() { return $(this).index() < i; }).prop('checked', c);
}); 
```

[小提琴](http://jsfiddle.net/adeneo/tM9RN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:17:49.570

试试这个代码：

```
<!DOCTYPE HTML>
    <html>
    <head>
        <meta charset="utf-8">
        <title>Check Box</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">        </script>
        <script language="javascript">
            $(document).ready(function () {
                $(".test").on('click',function () {
                    var clicked = $(this);
                    var hermanos = clicked.siblings(".test");
                    if(clicked.attr("checked")=="checked")
                        $.each(hermanos, function(index,object){
                            if($(object).val() < clicked.val())
                                    $(object).attr("checked", "checked");

                    });
                else
                    $.each(hermanos, function(index,object){
                        if($(object).val() > clicked.val())
                                $(object).removeAttr("checked");

                    });
            });
        });

    </script>
</head>
<body>
    <div>
        <form>
            <p>
                <input name="ID" type="checkbox" value="123"  class="test">Grandparent
                <br>
                <input name="ID" type="checkbox"  value="124" class="test">Parent
                <br>
                <input name="ID" type="checkbox"  value="125" class="test">Child
            </p>
            <p>
                <input type="submit" name="button" id="button" value="Submit">
            </p>
        </form>
    </div>
</body> 
```

# java - 如何通知 JTable 更新其模型

> ID：10525098
> 
> 赞同：-1
> 
> 时间：2012-05-09T22:36:39.163
> 
> 标签：java, swing, jtable, treeset

我正在寻找一种模式来通知我`JTable`在 TableModel 中处理的数据已更改。想法是我有一个`TreeSet`管理数据的全局单例。我收到随机更新。`TreeSet`如果对 TreeSet 进行了任何更改，则`TableModel`应该通过从 TreeSet 收集新信息来更新自身。

观察者？事件+监听器？还要别的吗？

感谢您的帮助！

ps：更新模型的方法已经实现，不是问题的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:39:18.437

你基本上回答了你自己的问题，观察者，事件+听众。与平常不同：**你**试过了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:47:06.797

问题有点令人困惑，但听起来你应该使用`AbstractTableModel.fireTableDataChanged()`，如此[处](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T22:51:04.003

你可以看看[Listening for Data Changes](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)

考虑方法`fireTableStructureChanged`。您可以在[CustomEditorTableModel中看到一个示例](https://java2s.com/Open-Source/Java/IDE-Netbeans/vmd.analyzer/org/netbeans/modules/vmd/midpnb/propertyeditors/table/CustomEditorTableModel.java.htm)

您可以在[SortingaColumninaJTableComponent中看到另一个](http://www.java2s.com/Tutorial/Java/0240__Swing/SortingaColumninaJTableComponent.htm)

# html - HTML5 Canvas 图像缩放问题

> ID：10525107
> 
> 赞同：18
> 
> 时间：2012-05-09T22:37:25.000
> 
> 标签：html, html5-canvas, nearest-neighbor, bicubic

我正在尝试在 HTML5 画布中制作像素艺术主题游戏，作为其中的一部分，我采用 10x20 左右大小的图像并使用以下代码将它们绘制到画布上：

```
ctx.drawImage(image, 20, 20, 100, 200); 
```

然而，画布使用双三次图像缩放，因此像素艺术图像在 2 倍及以上时看起来很糟糕。有没有办法强制画布使用最近邻缩放或可能使用自定义方法来缩放图像？如果不是，这是否意味着图像必须事先在 Paint.net 中进行缩放？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-09T22:42:41.800

选择以下任何一项：

* * *

**通过 JavaScript：**

```
ctx.imageSmoothingEnabled = false; 
```

^(来源： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#image-smoothing](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#image-smoothing))

在 Gecko 上，您需要

```
ctx.mozImageSmoothingEnabled = false; 
```

^(来源：[https ://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#Gecko-specific_attributes](https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#Gecko-specific_attributes))

在 Webkit 上，您需要

```
ctx.webkitImageSmoothingEnabled = false; 
```

^(来源：[https ://bugs.webkit.org/show_bug.cgi?id=82804](https://bugs.webkit.org/show_bug.cgi?id=82804))

我在其他浏览器上找不到有关支持此属性的信息，因此它们可能不支持它。

* * *

**通过 CSS：**

另一种选择是在画布上使用一组 CSS 规则。例如：

```
<canvas id="c" width="16" height="16"></canvas>
<script>
  var c = document.getElementById("c"),
      cx = c.getContext("2d"),
      im = new Image();
  im.src = "http://stackoverflow.com/favicon.ico"; // 16x16
  cx.drawImage(im, 0, 0);
</script>
<style>
  canvas {
    width: 32px;
    height: 32px;
    image-rendering: optimizeSpeed;
    image-rendering: crisp-edges;
    image-rendering: -moz-crisp-edges;
    image-rendering: -o-crisp-edges;
    image-rendering: -webkit-optimize-contrast;
    -ms-interpolation-mode: nearest-neighbor;
  }
</style> 
```

^(来源：[https](https://developer.mozilla.org/en/CSS/image-rendering))
^(://developer.mozilla.org/en/CSS/image-rendering来源：[https ://bugs.webkit.org/show_bug.cgi?id=56627](https://bugs.webkit.org/show_bug.cgi?id=56627))

* * *

**通过像素例程：**

另一种选择是自己使用画布像素操作例程： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)。不过，这还有很多工作要做。

# mysql - 此 SQL 语句的问题

> ID：10525110
> 
> 赞同：1
> 
> 时间：2012-05-09T22:37:45.970
> 
> 标签：mysql, sql

```
 $query="INSERT INTO `main_table` (`count`) VALUES ('$count') WHERE userid='$someid'"; 
```

基本上我喜欢将一个新的count值插入到main_table中的变量count中，其中userid等于变量some​​id。

SQL 抱怨此语句的语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T22:38:48.667

要更新现有行，您应该使用 UPDATE 语句而不是 INSERT 语句。

```
UPDATE `main_table`
SET `count` = '$count'
WHERE userid='$someid' 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/0ce0a/1)

INSERT 仅用于将全新的行插入到您的表中。在 INSERT 语句中包含 WHERE 子句是不合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:30:06.110

应该

$query="INSERT INTO main_table (count) VALUES ($count) WHERE userid='$someid'";

单引号仅用于 varchar 类型字段上的 varchar 类型变量。

瑞安 A. (NZT)

# windows - Fuzzing 虚拟驱动工具

> ID：10525111
> 
> 赞同：1
> 
> 时间：2012-05-09T22:37:47.427
> 
> 标签：windows, security, virtualization, virtual-machine, fuzzing

我正在寻找模糊虚拟驱动程序，我已经阅读了有关此的其他问题，但它们并没有真正去任何地方。基本上是想看看我是否错过了一个明显的工具，并想知道从 Windows 来宾中模糊 IOCTL 是否可行？或者如果我需要写一个低电平，例如输入/输出？

任何用于在 Windows 客户机中对驱动程序进行模糊测试以打击 hyper-v 或 VMware 的工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:17:06.810

有许多方法可以练习虚拟化代码。

首先，当然，如果你在 Windows 上，就是 IOCTL 接口。

那么您应该记住，所有虚拟设备都是由来宾操作系统和主机操作系统中的某些代码以某种方式模拟的。因此，访问输入设备（键盘和鼠标）、视频设备、存储（磁盘）、网卡、通信端口（串行、并行）、标准 PC 设备（PIC、PIT、RTC、DMA）、CPU APIC 等也将练习虚拟化代码。

同样重要的是要记住，各种 PC 设备的虚拟化（除非我们谈论的是在 Windows 中通过 VMBUS 工作的合成设备）是通过拦截、解析和模拟/执行访问设备内存映射缓冲区和寄存器的指令来完成的。输入/输出端口。这为您提供了另一个“界面”。

通过使用它，您不仅可以发现与设备相关的错误，还可以发现与指令相关的错误。如果您对后者感兴趣，您需要很好地了解 x86 CPU 如何在指令级以各种模式（真实、虚拟 8086、受保护、64 位）工作，它如何处理中断和异常以及您还需要知道如何访问这些 PC 设备（如何以及在哪些内存地址和 I/O 端口号）。

顺便说一句，除非您的代码在内核中运行，否则 Windows 不会让您直接访问这些东西。您可能希望拥有一个非 Windows 来宾 VM 来处理此类事情，以避免 Windows 的过度保护功能。寻找边缘情况、异常指令编码（包括无效编码）或用于通常任务的异常指令（例如使用 FPU/MMX/SSE/等或特殊保护模式指令（如 SIDT）访问设备）。思考和调皮。

要考虑的另一件事是竞争条件和计算或 I/O 负载。你也可以在这个方向上探索一些运气。

# visual-studio - Visual Studio 11 中的单元测试资源管理器参考 Microsoft Smooth Streaming Client SDK Beta 1 程序集失败

> ID：10525114
> 
> 赞同：2
> 
> 时间：2012-05-09T22:37:56.310
> 
> 标签：visual-studio, mstest, windows-8, smooth-streaming

在 Metro Style App 项目中引用 Microsoft.Media.SmoothStreaming.dll，然后尝试从引用 Metro Style App 程序集的单独单元测试项目运行测试在 Visual Studio 11（终极测试版 11.0.0）中不起作用。 50323.1 QRELB），即使处理器类型在调试编译配置中都设置为 x86 或 x64。

Metro Style App 的平台目标必须设置为 x86 或 x64（任何 CPU 都不能与 SmoothStreaming SDK 程序集一起使用）。当单元测试项目目标包含对 Metro Style App 程序集的引用时，它必须与 Metro Style App 的设置匹配，否则会出现以下错误：

“错误 1 ​​正在构建的项目“MSIL”的处理器架构与参考“%APPROOT%\bin\x86\Debug\UVerseApp.exe”、“x86”的处理器架构不匹配。这种不匹配可能会导致“

当两者都设置为 x64 时，解决方案编译并运行良好，但单元测试资源管理器不会发现单元测试项目中的任何测试，因此您无法运行它们，甚至无法查看它们。

当两者都设置为 x86 时，解决方案构建良好，单元测试资源管理器正确显示所有测试。但是，如果您尝试运行任何测试，每次都会在 vstest.executionengine.appcontainer.x86.exe 中遇到应用程序错误。Metro 应用程序仍然可以正常运行 - 只有当您尝试使用单元测试资源管理器运行或调试测试方法时才会发生这种情况。

这是一个已知问题和/或是否有任何可能的解决方法？

# c++ - 寻找歌曲的长度

> ID：10525119
> 
> 赞同：2
> 
> 时间：2012-05-09T22:38:07.370
> 
> 标签：c++, qt, id3lib

我想以秒为单位查找歌曲的长度，以便制作 M3U 格式的播放列表，但我不知道如何从文件中获取该信息。我正在使用 id3lib 和 Qt。

我试过了：

```
ID3_Frame* myFrame = myTag.Find(ID3FID_SONGLEN);
ID3_Frame* myFrame = myTag.Find(ID3FID_TIME);
ID3_Frame* myFrame = myTag.Find(ID3FID_SIZE); 
```

但 myFrame 为 NULL。我尝试了其他参数并工作，例如`ID3FID_ALBUM`. 我真的不知道该尝试什么。我在 id3lib API 中没有找到任何东西。

我知道 Qt 可以给我这些信息，但我不能使用 id3lib 吗？

稍后编辑：我读到`MediaObject::totalTime()`只有在播放歌曲时才给我时间，但我想要关于歌曲是否播放的信息；我需要此信息才能将其写入文件。

后期编辑：

我正在尝试使用 Qt 中的 Phonon 作为长度，但我收到了很多错误。

```
#include <Phonon/MediaSource>
#include <Phonon/MediaObject>
#include <iostream>
#include <Qstring>

/* stuff */

Phonon::MediaObject *mediaObject = new Phonon::MediaObject();
QString fileName("D:/melodie.mp3");
mediaObject->setCurrentSource(fileName);
cout << mediaObject->totalTime() << endl; 
```

我得到了很多未解决的外部符号

main.obj:-1: 错误: LNK2019: 无法解析的外部符号“__declspec(dllimport) public: __thiscall Phonon::MediaObject::MediaObject(class QObject *)” (_ *imp* ??0MediaObject@Phonon@@QAE@PAVQObject@@ @Z) 在函数 _main 中引用

我正在使用 QCreator，我的应用程序很简单，只是一个打招呼的窗口（如果我不使用 Phonon，它可以工作）；我就是不能让它运行；我已经分配了静态媒体对象，我已经制作了一个 MediaSource 并尝试传递它，但它不起作用（这里它说不能从 MediaSource* 转换为 MediaSource &）。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:42:22.830

您可以使用[`Phonon::MediaObject::totalTime()`](http://doc.qt.nokia.com/4.7-snapshot/phonon-mediaobject.html#totalTime)以毫秒为单位获取歌曲的长度。

id3lib 不提供直接查找歌曲长度的功能，因为曲目长度不是 ID3v1 或 ID3v2“标准”的一部分。它们仅用于标记。如果您在尝试问题中的代码时得到 0，则可能意味着尚未设置这些标签。如[文档](http://id3lib.sourceforge.net/api/index.html)中所述，“......如果找不到这样的帧，Find() 方法将返回一个 NULL 指针。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:43:13.613

正确设置媒体源后使用[MediaObject::totalTime](http://qt-project.org/doc/qt-4.8/phonon-mediaobject.html#totalTime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:45:51.447

我建议你使用`totalTimeChanged(qint64 newTotalTime)`信号。捕获轨道长度的方法更加谨慎，因为您不需要手动检查`mediaObject`.

# java - 从开发模式测试 Google App Engine 应用程序的 doPost()

> ID：10525121
> 
> 赞同：0
> 
> 时间：2012-05-09T22:38:22.150
> 
> 标签：java, google-app-engine, http, servlets, development-mode

我正在开发一个 Google App Engine 应用程序，并且我已经实现了一个我想要测试的 servlet。具体来说，我想调用`doPost()`servlet 的方法，并检查结果。有什么方法可以做到这一点而不必每次都重新部署？

目前我必须部署来检查它，这非常不方便。如果这是我的（不是实际的）部署的 URL：

> HttpPost postMethod=new HttpPost("http://my_app.appspot.com/my_app/my_app_place");

但是，如果我将开发模式 URL 放入`HttpPost(...)`我会得到一个`"Permission Denied"`错误。有没有人设法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:20:42.713

如果您只是测试 Servlet（而不是 UI），那么使用[HttpUnit 的 ServletUnit](http://httpunit.sourceforge.net/doc/servletunit-intro.html)就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:39:32.417

如果您不能通过 Java 在本地 POST 到您的 servlet，那么使用[cURL](http://curl.haxx.se/)之类的命令行工具就足够了吗？

```
curl -X POST [see cURL's man page for the arguments you need] http://localhost:8080/my_app/my_app_place 
```

cURL 的手册页可以在[这里](http://curl.haxx.se/docs/manpage.html)找到。

# hadoop - 我正在尝试运行 hadoop 确定指南中给出的 ShowFileStatusTest，我收到以下错误

> ID：10525129
> 
> 赞同：0
> 
> 时间：2012-05-09T22:39:20.607
> 
> 标签：hadoop, hdfs

测试运行：3，失败：0，错误：3，跳过：0，经过的时间：3.836 秒 <<< 失败！throwsFileNotFoundForNonExistentFile(org.anahata.play.hadoop.ShowFileStatusTest) 经过时间：3.667 秒 <<< 错误！

```
java.lang.NullPointerException
at org.apache.hadoop.hdfs.MiniDFSCluster.startDataNodes(MiniDFSCluster.java:422)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:280)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:124)
at org.anahata.play.hadoop.ShowFileStatusTest.setUp(ShowFileStatusTest.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
at $Proxy0.invoke(Unknown Source)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

fileStatusForFile(org.anahata.play.hadoop.ShowFileStatusTest) 经过时间：0.072 秒 <<< 错误！

```
java.io.IOException: Cannot lock storage /tmp/dfs/name1\. The directory is already locked.
at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.lock(Storage.java:602)
at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1219)
at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1237)
at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1164)
at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:184)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:267)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:124)
at org.anahata.play.hadoop.ShowFileStatusTest.setUp(ShowFileStatusTest.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
at $Proxy0.invoke(Unknown Source)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

fileStatusForDirectory(org.anahata.play.hadoop.ShowFileStatusTest) 经过时间：0.044 秒 <<< 错误！

```
java.io.IOException: Cannot lock storage /tmp/dfs/name1\. The directory is already locked.
at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.lock(Storage.java:602)
at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1219)
at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1237)
at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1164)
at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:184)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:267)
at org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:124)
at org.anahata.play.hadoop.ShowFileStatusTest.setUp(ShowFileStatusTest.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
at $Proxy0.invoke(Unknown Source)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:25:15.683

正如我们在聊天会话中所讨论的，这是`org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(String[], Configuration, SecureResources)`方法中的一个问题，它断言数据节点数据目录必须是`rwxr-xr-x`.

日志中有一条警告说您当前将它们作为“rwxr-xrx”。您需要将会话 umask（一个 linux 概念，而不是 java 'thing'）配置为 0022，而不是当前值 0002。`umask`在终端中执行以确认这一点，然后使用`umask 0022`. 现在你的测试应该成功了。

根据您执行测试的方式，您可能需要将 umask 应用到您的 bash 配置文件，然后重新应用它：

*   [http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html](http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html)

# javascript - 使用谷歌地图绘制城市/邮政编码多边形

> ID：10525132
> 
> 赞同：7
> 
> 时间：2012-05-09T22:39:32.830
> 
> 标签：javascript, google-maps, google-maps-api-3, overlay, polygon

我正在寻找一个支持将邮政编码或城市作为参数传递并获取 x,y 坐标列表以使用谷歌地图绘制多边形的能力的 javascript 库？

这存在吗？谷歌地图 API 是否支持此类查询？我正在寻找类似于谷歌用来在谷歌查询上绘制地图的坐标数组：

![在此处输入图像描述](../Images/5828a5088cbab354a847881ec693870d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-15T08:13:46.963

Google Maps API 不支持这种解决方案。不过，还有其他几个地方可以获取坐标：

**Flickr API**

有一个基于人们标记的照片的 Flickr API，但它仅与标记照片的人一样准确：因此它足以用于引导，但可能不适用于生产： http: [//karya-blog.blogspot.com/2012/ 12/fetching-city-polygons-with-flickr-api.html](http://karya-blog.blogspot.com/2012/12/fetching-city-polygons-with-flickr-api.html)

**自然地球数据**

一个准确的替代方案是 www.naturalearthdata.com。要从那里获取该数据，您只需要发出两个请求：一个带有城市名称，另一个带有他们的 ID 以获取参数：

unlock.edina.ac.uk/ws/search?name=berlin&gazetteer=naturalearth&format=json

接着

unlock.edina.ac.uk/ws/footprintLookup?format=json&identifier=14126951

你已经设置好了:)

**地图**

如果您可以预取数据，请使用 Mapzen，他们有一个完整且非常准确的数据库：[https ://mapzen.com/data/borders/](https://mapzen.com/data/borders/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:59:50.617

简短回答：我认为 Google Maps API 中没有任何神奇的 getZipCodeBoundaries 方法。但是，您想做的事情可以并且已经完成。[请参阅实现](http://maps.huge.info/zip.htm)，以及有关该过程[的 Google 群组上的此线程。](http://groups.google.com/group/Google-Maps-How-Do-I/browse_thread/thread/8f765061934d4e22?pli=1)第一个链接是否与您希望完成的相似？此外，[Zillow 在 CC 许可下提供了一个社区 API](http://www.zillow.com/howto/api/neighborhood-boundaries.htm)。您可能想调查一下，看看它是否按邮政编码划分街区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T14:33:52.993

您可以在 json 中获取多边形坐标，以便使用 openstreetmap 与 googlemaps 一起使用。转到[http://nominatim.openstreetmap.org/](http://nominatim.openstreetmap.org/) 搜索“Partido de Ituzaingó”之类的地方

脚步：

*   点击“详情”
*   查找 OSM ID 并复制它（control+c），例如：`2018776`
*   转到[http://polygons.openstreetmap.fr/index.py](http://polygons.openstreetmap.fr/index.py)
*   将 ID 粘贴到
*   下载多边形

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T10:42:22.910

看看这个网站[Twitter geo api](https://dev.twitter.com/docs/api/1/get/geo/id/%3aplace_id)你有几个搜索模式，它给你城市的边界框。我现在在我的网站上使用它。试试这个[链接](https://api.twitter.com/1/geo/id/535f0c2de0121451.json)，你会看到结果。

# javascript - Facebook FQL 在查询中返回重复的帖子

> ID：10525133
> 
> 赞同：1
> 
> 时间：2012-05-09T22:39:38.823
> 
> 标签：javascript, facebook, coffeescript, facebook-fql

我正在尝试从用户的信息流中获取最后 10 个帖子。出于某种原因，我的 FQL 查询将连续返回每个帖子中的两个。这是我的代码，请原谅 CoffeeScript，

```
method = 'fql.multiquery'
queries = 'feed' : "SELECT attachment , type , created_time , filter_key,     actor_id, description, message  FROM stream WHERE (filter_key = 'others' OR filter_key = 'owner') ORDER BY created_time DESC LIMIT 10"
params =
    method : method
    queries : queries
FB.api (params) , (response) =>
    #and so on 
```

我不太确定为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:35:35.117

FQL 不能做 group by，而且 Facebook 商店以各种方式发布故事，所以有“倍数”。解决这个问题的方法是选择你需要的列，然后做一个“在哪里”来限制你的结果集，即：

```
select 
    attachment , type , created_time , filter_key, actor_id, description, message
FROM 
   stream
WHERE 
   post_id in (select post_id 
      FROM 
         stream 
     WHERE 
          (filter_key = 'others' OR filter_key = 'owner' and created_time < [long-ass unix time])
  ) 
```

*   不相信你可以做限制，你应该做小于/大于日期，或者解析和排序结果集

# networking - 是否应该接受 0.0.0.0 作为 IP/网络掩码的答案？

> ID：10525135
> 
> 赞同：1
> 
> 时间：2012-05-09T22:40:08.520
> 
> 标签：networking, user-interface, ip

对于有提示配置 IP/网络掩码的产品系统，当用户输入它们时是否应该接受 0.0.0.0 等并立即抛出错误？还是系统应该等到输入提交并从底层网络适配器返回错误？

像这样的提示：

`Please enter the IP:`

`Please enter the netmask:`

（当用户按回车键时，两者都被提交并返回错误，如果有的话）

立即拒绝的论点是 0.0.0.0 与无效值一样明显。一个系统应该足够聪明，能够检测到它并阻止它进入。

提交期间稍后拒绝的论点是可能存在各种无效输入，并且 IP 类型系统很难捕捉到。1.1.1.1、1.11.111.111 也无效。（理论上是的，但实际上不是..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:52:59.050

大多数系统通过拥有一个“火星”地址范围列表并根据该列表使事物无效来处理这个问题。这是否是 UI 或后端验证的一部分在很大程度上取决于您的系统。如果它是一个人们经常输入地址和前缀的网络系统，最好将其作为前台功能。

顺便说一句，现代系统现在允许您输入有效位数，而不是输入网络掩码，使用 CIDR 的“/”符号表示有效位数。

# .net - 无法使用 VS2010 SP1 进入 .NET 框架源

> ID：10525139
> 
> 赞同：2
> 
> 时间：2012-05-09T22:40:40.007
> 
> 标签：.net, visual-studio-2010

我按照 [http://blogs.microsoft.co.il/blogs/arik/archive/2010/07/12/step-into-net-framework-4-0-source-code.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2010/07/12/step-into-net-framework-4-0-source-code.aspx)中的步骤调试 .Net 框架源代码，但我无法进入 .net 框架的代码。

我的 .Net 框架版本是 4.0.30319 SP1 Rel，我从[http://referencesource.microsoft.com/netframework.aspx下载 .Net 框架 4.0 源代码](http://referencesource.microsoft.com/netframework.aspx)

# c# - 获取保存的 URL 并打开网络浏览器 c#

> ID：10525144
> 
> 赞同：0
> 
> 时间：2012-05-09T22:41:26.073
> 
> 标签：c#, winforms

我在链接到 Windows 窗体的数据库中有一个保存的 url。如何获取网址并打开网络浏览器？

这是它存储的地方

```
m_dtMedia.Rows[m_rowPosition]["File_Path"] 
```

我想要的是当您单击一个按钮以打开网络浏览器时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:45:04.890

```
private static void OpenBrowser(string url)
{
        if (url != null)
        {
            Process process = new Process();
            process.StartInfo.FileName = "rundll32.exe";
            process.StartInfo.Arguments = "url.dll,FileProtocolHandler " + url;
            process.StartInfo.UseShellExecute = true;
            process.Start();
        }
} 
```

由于生成另一个进程需要一些时间，因此您的 UI 将被阻止。我建议从后台线程调用此方法。例如：

```
Task.Factory.StartNew(()=>{OpenBrowser(url);}); 
```

使用此方法是因为从 UI 线程调用 Process.Start(string) 会导致异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:46:48.327

您可以使用 url 作为目标/文件名来启动一个新进程：

```
Process.Start("http://www.google.com"); 
```

这将具有使用默认浏览器加载 url 的效果。

# objective-c - Objective-C，在存储在 NSArray 中的类对象中设置和获取变量

> ID：10525146
> 
> 赞同：1
> 
> 时间：2012-05-09T22:41:44.233
> 
> 标签：objective-c, class, object

我正在尝试编写自己的类来存储有关库的数据，然后将每个对象存储在 NSArray 中。

我的界面：

```
#import <Foundation/Foundation.h>

@interface LibraryInfo : NSObject
{

NSString* name;
NSString* address;
NSString* link;
NSString* coordinates;

}

- (NSString*) getName;
- (NSString*) getAddress;
- (NSString*) getLink;
- (NSString*) getCoordinates;

- (void) setName: (NSString*)input;
- (void) setAddress: (NSString*)input;
- (void) setLink: (NSString*)input;
- (void) setCoordinates: (NSString*)input;

@end 
```

我的实现：

```
#import "LibraryInfo.h"

@implementation LibraryInfo

- (void) setName: (NSString*)input
{
name = input;
}

- (void) setAddress: (NSString*)input
{
address = input;
}

- (void) setLink: (NSString*)input
{
link = input;
}

- (void) setCoordinates: (NSString*)input
{
coordinates = input;
}

- (NSString*) getName {
return name;
}

- (NSString*) getAddress {
return address;
}

- (NSString*) getLink {
return link;
}

- (NSString*) getCoordinates {
return coordinates;
}

@end 
```

我将每个对象写入并存储在 NSArray 中，如下所示：

```
LibraryInfo *library = [[LibraryInfo alloc] init];
[library setName:( ( name != nil && name.length > 0 ) ? name : @"No Name" )];
[library setAddress:( ( address != nil && address.length > 0 ) ? address : @"No Address" )];
[library setLink:( ( link != nil && link.length > 0 ) ? link : @"No Link" )];
[library setCoordinates:( ( coordinate != nil && coordinate.length > 0 ) ? coordinate : @"No Coordinates" )];

[libraries addObject: library]; 
```

其中“库”是一个 NSArray。

然后我尝试像这样读取值：

```
cell.textLabel.text = [[ libraries objectAtIndex:indexPath.row ] getName ];
cell.detailTextLabel.text = [[ libraries objectAtIndex:indexPath.row ] getAddress ]; 
```

我认为这可能与值的设置有关，或者它们没有正确存储或保留，但是
当应用程序“崩溃”并暂停时，我的“setName”方法出现以下错误和标记：

```
self    LibraryInfo *const  0x068a1760
input   NSString *  0x068a3550
name    NSString *  0x00000000 
```

我该如何解决？我使用的是 Xcode 4.3，所以不需要发布/保留。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:16:10.330

您需要声明属性。Ivar 不会以您期望的方式存储您的数据

图书馆信息.h

```
@interface LibraryInfo : NSObject

@property (nonatomic, strong) NSString* name;
@property (nonatomic, strong) NSString* address;
@property (nonatomic, strong) NSString* link;
@property (nonatomic, strong) NSString* coordinates; 
```

图书馆信息.m

```
@implementation LibraryInfo
@synthesize name;
@synthesize address;
@synthesize link;
@synthesize coordinates; 
```

然后创建库会很简单

```
LibraryInfo *library = [[LibraryInfo alloc] init];
library.name = (name.length > 0 ? name : @"No Name");
library.address = (address.length > 0 ? address : @"No Address")
library.link = (link.length > 0 ? link : @"No Link")
library.coordinates = (coordinates.length > 0 ? coordinates : @"No Coordinates") 
```

然后在您的 TableView 单元格中。

```
cell.textLabel.text = [libraries objectAtIndex:indexPath.row].name;
cell.detailTextLabel.text = [libraries objectAtIndex:indexPath.row].address; 
```

# c# - C#，如何始终将表单置于最前面？

> ID：10525148
> 
> 赞同：0
> 
> 时间：2012-05-09T22:41:51.447
> 
> 标签：c#

我有一个`MainForm`类实例，我提出了另一种形式；

```
InputForm MyInput= new InputForm("Enter a Number");
MyInput.ShowDialog(); 
```

`MyInput`我像这样从自身内部封闭形式；

```
 private void Button_Click(object sender, EventArgs e)
    {
        //Do things here
        this.Hide();

    } 
```

流程在 MainForm 中恢复并使用

```
this.Show(); 
```

或者

```
this.Activate(); 
```

两者都不会始终如一地把它`MainForm`带到前面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:51:57.453

您需要做的是像这样显示您的 InputForm。这种形式的[ShowDialog](http://msdn.microsoft.com/en-us/library/w61zzfwe.aspx)将所有者分配给您的对话框。

```
DialogResult dr = MyInput.ShowDialog(this);
//test for result here

MyInput.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:45:07.793

`this.Hide()`似乎隐藏了主要形式，而不是输入。因为`ShowDialog`是一种阻塞方法，所以 InputForm 需要通过用户操作、InputForm 内部的代码或其他线程来关闭。

# backbone.js - 主干集合移除，ReferenceError: el is not defined

> ID：10525159
> 
> 赞同：0
> 
> 时间：2012-05-09T22:42:27.810
> 
> 标签：backbone.js, backbone-views

我有一个集合的视图，当我调用它的 remove 方法时，我也调用它的集合 remove 方法，我得到一个 'ReferenceError: el is not defined' 这对我来说没有任何意义，为什么会一个集合需要一个 el。

调用代码：

```
try {

 myAppModel=backboneApp.views.privateViews.myAppsTabView.myAppsView.views.myAppsPrivateView.collection.get(appId);
                                            backboneApp.views.privateViews.myAppsTabView.myAppsView.views.myAppsPrivateView.remove(myAppModel);

} catch(e) {
console.log("delFromMyAppsCollection: Failed to delete app from collection e= " + e);
} 
```

视图中的删除方法：

```
remove : function(modelToRemove) {
        alert('Killing!');
        console.log("MyAppsPrivateView.remove called with model: ", modelToRemove );   
        this.collection.remove(modelToRemove);
        console.log("MyAppsPrivateView.remove collection: ", this.collection );
        this._rendered = false;
    } 
```

我想这可能是从集合/视图中删除元素的更好方法，但是集合抱怨没有 el 似乎仍然很奇怪，有什么想法吗？

提前致谢。

以防万一，

视图定义：

```
var MyAppsPrivateView = Backbone.View.extend( {
    // Reference to this collection's model.
    model:      PapsCatalog , // don't should be PapModel instead of a collection?
    templateId: Epc2G.myAppsTemplateId,
    template:   jQuery('#' + this.templateId).html(), 
```

查看实例化：

```
var options = {
            className : "MyAppsContainer",
            uid : "myAppsPrivateView",
            collection : papsCollection,
            el : "#myAppsView"
        };

        var oMyAppsPrivateView = new MyAppsPrivateView(_.clone(options)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:36:08.023

可能与`Backbone.View`已有`remove`方法有关，而您正在覆盖它？

这听起来像是一种复合视图的情况，您是否考虑过为集合中的每个模型创建一个视图？

# ruby-on-rails - 表单提交到不同的控制器 - 路由

> ID：10525162
> 
> 赞同：1
> 
> 时间：2012-05-09T22:42:37.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我认为这是：

```
<%= form_for @comment, :as => :post, :url => user_ticket_message_comments_path, :html => { :class => "add-comment", :id => "add-comment-" + @ticket.id.to_s } do |f| %>
  <%= f.label :body, "Add comment" %>
  <%= f.text_area :body %>
  <%= f.submit "Add comment" %>
<% end %> 
```

在我的 routes.rb 中：

```
resources :users do
  resources :tickets do
    resources :messages do
      resources :comments
    end
  end
end 
```

我收到路由错误：

`No route matches {:controller=>"comments"}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:01:03.617

看起来您缺少用户、票证和消息：

```
user_ticket_message_comments_path(@user, @ticket, @message) 
```

您需要这些参数，因为生成的 URL 如下所示：

```
/users/:user_id/tickets/:ticket_id/messages/:message_id/comments 
```

没有参数，Rails 不知道如何生成该 URL。

此外，考虑到 Rails 应用程序中的经验法则是[“资源的嵌套深度不应超过 1 级”。](http://guides.rubyonrails.org/routing.html#nested-resources)

[Jamis Buck 的这篇文章](http://weblog.jamisbuck.org/2007/2/5/nesting-resources)建议不要随意嵌套资源，而是只使用一层嵌套，如下所示：

```
resources :users do
  resources :tickets
end

resources :tickets do
  resources :messages
end

resources :messages do
  resources :comments
end 
```

# ios - UITableViewCell 从 nib 自定义初始化

> ID：10525166
> 
> 赞同：0
> 
> 时间：2012-05-09T22:42:50.800
> 
> 标签：ios, memory-leaks, uitableview, xib

下面的代码有多么错误：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    NSArray *array = [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:nil options:nil];
    for (id currentObject in array) {

        if ([currentObject isKindOfClass:[self class]]) {
            self = [currentObject retain];
        }
    }

    return self;
} 
```

我正在尝试从 nib 文件中调出一个自定义 UITableViewCell，问题是 Leaks Instruments 说里面有泄漏：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

    CPVideoGenTVCell *cell = (CPVideoGenTVCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[[CPVideoGenTVCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.delegate = self;
        cell.titleLbl.textColor = [UIColor colorWithRed:0.992 green:0.933 blue:0.0 alpha:1.0];

    }

    CPTempVideo *aVideo = [self.videos objectAtIndex:indexPath.row];

    cell.seasonLbl.text = [NSString stringWithFormat:@"Season %@", [self romanNumberFromArabic:aVideo.season]];
    cell.titleLbl.text = [NSString stringWithFormat:@"%2i - \"%@\"",aVideo.idVideo, aVideo.chapterName];
    cell.managedImg.url = aVideo.thumbnail;

    [[CPDataManager sharedDataManager] manageImage:cell.managedImg];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:11:31.383

认为问题出在保留上，但不明白你为什么要用 initWithStyle 做这些疯狂的事情。

```
if ([currentObject isKindOfClass:[self class]]) {
  self = currentObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:43:16.927

我发现了另一种选择：

```
+ (id)cellWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    NSArray *array = [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:nil options:nil];
    for (id currentObject in array) {

        if ([currentObject isKindOfClass:[self class]]) {
            return currentObject;
        }
    }

    return nil;
} 
```

只需返回一个自动释放的对象并在 cellForRowAtIndexPath 中处理它：

```
CPTempHeadCell *headCell = (CPTempHeadCell *)[tableView dequeueReusableCellWithIdentifier:HeadCellIdentifier];
if (headCell == nil) {

    headCell = [CPVideoGenTVCell cellWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:CellIdentifier]; 
```

# jquery - 我可以删除wordpress内联css吗？

> ID：10525168
> 
> 赞同：0
> 
> 时间：2012-05-09T22:43:08.563
> 
> 标签：jquery, css, wordpress, inline

我有这个问题：

```
<img src="http://localhost:8080/wordpress/wp-content/themes/ITR/timthumb.php?src=http://localhost:8080/wordpress/wp-content/uploads/2012/05/90-0331-e1336510507762.jpg&amp;w=940&amp;h=320&amp;zc=1" alt="" class="png preload" ;="" style="opacity: 0;" /> 
```

我想更改`style="opacity: 0"`为`style="opacity: 100"`

我怎样才能做到这一点 ？用 jQuery 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:46:52.247

是的，你可以用 jQuery 做到这一点：

```
$('.png.preload').css({'opacity':1}); 
```

**编辑**：正如在对原始问题的评论中指出的那样，不透明度是一个介于 0 和 1 之间的值。我修改了上面的 jQuery 代码片段以反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:28:26.130

更好的是删除该属性，您可以使用`removeAttr`jQuery

```
$(document).ready(function() {
   $('.png.preload').removeAttr('style')
 }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T22:47:14.093

您可以使用 jQuery 设置样式属性

`jQuery("img.png.preload").attr('style', 'opacity: 1');`

# java - 在 servlet 上提供合并的 pdf（以字节 [] 为单位）

> ID：10525170
> 
> 赞同：0
> 
> 时间：2012-05-09T22:43:20.357
> 
> 标签：java, apache, servlets

这是包含堆栈跟踪的代码：[https ://gist.github.com/2649430](https://gist.github.com/2649430)

我有 2 个 java 类。一种是合并多个 PDF 并返回结果合并 PDF 的字节数组，然后另一种是在 servlet 上提供结果 PDF 字节数组。当我运行服务器时，我收到此错误：

`java.lang.NullPointerException at java.io.ByteArrayInputStream.<init>(ByteArrayInputStream.java:106) at testPackage.TestServlet.doGet(TestServlet.java:37) at javax.servlet.http.HttpServlet.service(HttpServlet.java:621) at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)`

（完整的堆栈跟踪包含在 gist 链接中）

你能帮我弄清楚如何做到这一点吗？

**更新**：真实性指出没有调用 mergePDF() 。所以我更新了文件TestServlet.java：

```
 public class TestServlet extends HttpServlet {

    private static byte[] PDF;

    public static void mergePDF() {
        try {
            List pdfs = new ArrayList();
            pdfs.add(new FileInputStream("/test.pdf"));
            pdfs.add(new FileInputStream("/test2.pdf"));
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            PDF = PDFMerger.concatPDFs(pdfs, output, true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        mergePDF();
        InputStream is = new ByteArrayInputStream(PDF);

        // Set response headers
        response.setHeader("Expires", "0");
        response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
        response.setHeader("Pragma", "public");
        response.setContentType("application/pdf");
        response.setContentLength(PDF.length);

        OutputStream os = response.getOutputStream();
        IOUtils.copy(is, os);

        os.flush();
        os.close();

    }
} 
```

仍然没有解决问题：

```
根本原因

java.lang.NoClassDefFoundError: com/itextpdf/text/pdf/PdfTemplate
    testPackage.TestServlet.mergePDF(TestServlet.java:28)
    testPackage.TestServlet.doGet(TestServlet.java:37)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

根本原因

java.lang.ClassNotFoundException：com.itextpdf.text.pdf.PdfTemplate
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    testPackage.TestServlet.mergePDF(TestServlet.java:28)
    testPackage.TestServlet.doGet(TestServlet.java:37)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

```

**更新2**：

谢谢@mprabhat 和@Zhanger，我从[这里](http://sourceforge.net/projects/itext/files/)下载了 iText zip并将其放入项目中。它只为我提供了这些罐子：`itextpdf-5.2.1.jar, itextpdf-5.2.1-javadoc.jar, itextpdf-5.2.1-sources.jar, itextpdf-xtra-5.2.1.jar, itextpdf-xtra-5.2.1-javadoc.jar, itextpdf-xtra-5.2.1-sources.jar`

你觉得合适吗？

奇怪的是，如果我将合并的 PDF 写入文件而不是将其存储为字节数组，一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:03:48.843

您的堆栈跟踪是不言自明的，在您的代码中

```
InputStream is = new ByteArrayInputStream(PDF); 
```

作为`doGet`实现的一部分，当您传递`byte[] PDF`它时，它还没有被初始化，它的 null 因此是 NPE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:09:06.613

正如真实性所提到的，它似乎`mergePDF()`永远不会被调用，所以你可能应该将它放在一个[静态初始化程序](http://geekexplains.blogspot.com/2009/06/static-initialization-blocks-their.html)中（这样它就不会在每次发出 GET 请求时被调用，而只会被调用一次，从而提高效率/页面加载时间）

```
static {
     mergePDF();
} 
```

在`HttpServlet`.

至于您的其他问题，似乎找不到所需的依赖项。也许检查 .jars 是否在正确的位置/目录中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T00:33:30.943

答对了！

谢谢@Zhanger 和@mprabhat，这都是愚蠢的 RUNTIME 路径。所以我通过将 iText jars 放入`WEB-INF/lib`项目中解决了这个问题。现在工作！

# c# - HttpCacheability.NoCache 和 Response.CacheControl = "no-cache" 有什么不同？

> ID：10525172
> 
> 赞同：2
> 
> 时间：2012-05-09T22:43:30.233
> 
> 标签：c#, asp.net

下面的两行有什么不同？：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

和

```
 Response.CacheControl = "no-cache"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T22:53:49.117

如果您通读文档，通常情况下没有任何区别。

但是，由于前者使用 Cache 对象（`HttpCachePolicyBase`在 Asp.Net 4 或 Asp.Net MVC 中），它提供：

a) 对响应对象缓存策略的抽象，可用于测试场景

b) 如果 HTTP 规范由于某种原因被扩展，意味着响应中`NoCache`需要更多标头，或者对响应进行其他调整，则可能是面向未来的。

它还允许根据客户端的能力透明地调整“不可缓存性”的概念；这在 HTTP 确实发展的情况下很重要 - 但在 HTTP 1.0 和 1.1 客户端的情况下也很重要（1.0 和 1.1 之间的差异在[HTTP 1.0 与](https://stackoverflow.com/questions/246859/http-1-0-vs-1-1)1.1 中得到了很好的总结）。

在第二行中，您将负责如何应用 no-cache 指令（使用有点神奇的字符串）——当然，它仍然是可测试的，但如果 HTTP 规范确实发生了变化，那么您必须自己编写代码。

归根结底，使用`Response.Cache`对象比直接对标头进行编码更好（例如，对于 ETags 和 If-Not-Modified-Since 处理，它确实发挥了自己的作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:53:39.037

`Response.CacheControl`仅为了向后兼容而维护该属性。当你给它分配一个字符串时，它会在`Response.Cache`对象中设置相应的值。

# delphi - 1 个弹出菜单和 2 个备忘录，备忘录是从中调用的菜单

> ID：10525173
> 
> 赞同：1
> 
> 时间：2012-05-09T22:43:37.133
> 
> 标签：delphi, popupmenu, memo

我在一个表单上有 2 个备忘录和 1 个 Tpopupmenu 我已将弹出菜单指定为两个备忘录的弹出菜单。弹出菜单有几个分配给它的菜单项，当我右键单击任一备忘录并单击其 onclick 事件中的一个菜单项时，我希望能够知道哪个备忘录是菜单被调用，但无法弄清楚如何找出它是哪个备忘录！

谁能给我一个关于如何检测底层备忘录的指针。

谢谢

科林

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T22:57:34.180

您可以使用[`PopupComponent`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TPopupMenu.PopupComponent)弹出菜单的属性：

```
procedure TForm1.PopupItemClick(Sender: TObject);
begin
  if PopupMenu1.PopupComponent = Memo1 then
    ..
  else
    .. 
```

# ios - 如何使用 UIAutomation 类的 performTaskWithPathArgumentsTimeout 函数？

> ID：10525174
> 
> 赞同：0
> 
> 时间：2012-05-09T22:43:37.623
> 
> 标签：ios, automated-tests, functional-testing, ios-ui-automation

我正在为 iPhone 应用程序自动化一些测试用例，并且我正在使用 UIAutomation 类。我想使用该函数`performTaskWithPathArgumentsTimeout`，我相信它运行一些外部脚本。但我不能使用它。我有以下代码：

```
#import "revision3.js"
#import "tuneup/tuneup.js"
test("script call", function(target, app){
var target = UIATarget.localTarget();
var host = target.host();
var result = host.performTaskWithPathArgumentsTimeout("fwasim/Desktop/registration.js, ["null"], 5);

UIALogger.logDebug("exitCode: " + result.exitCode);
UIALogger.logDebug("stdout: " + result.stdout);
UIALogger.logDebug("stderr: " + result.stderr);
}); 
```

仪器控制台说：

> 错误：启动路径不可访问。

我在互联网上搜索过，但 UIAutomation 类的资源似乎非常稀缺，尤其是上述功能。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:15:03.107

主机上的`performTaskWithPathArgumentsTimeout()`方法是用于执行 shell 程序而不是 JavaScript。该错误消息告诉您它在您提供的路径中找不到可执行命令。

以下是使用该方法执行命令的方法：

```
var result = host.performTaskWithPathArgumentsTimeout("/usr/bin/whoami", [], 5); 
```

执行目录`whoami`中的命令`/usr/bin`。该命令只是打印出`result.stdout`您已经使用的登录用户名。

不过，我不太确定您要在这里做什么。从您尝试执行的脚本 ( `fwasim/Desktop/registration.js`) 的外观来看，您是否只是尝试运行一些位于不同文件中的注册测试？如果是这样，有一种更简单的方法可以做到这一点。只需输入：

```
#import "fwasim/Desktop/registration.js" 
```

这会尝试导入该 JavaScript 文件，就好像它是相对于正在运行的脚本文件的目录一样。仅`performTaskWithPathArgumentsTimeout()`当您尝试执行外部 shell 脚本或类似的东西时才需要。它不适用于在 UI 自动化中执行 JavaScript。

# ios - 如何修复视图保留周期导致子视图的 dealloc 不被调用？

> ID：10525175
> 
> 赞同：0
> 
> 时间：2012-05-09T22:43:37.670
> 
> 标签：ios, cocoa-touch

我有一个视图控制器，它实例化了一堆 UIButton 子类并将它们添加到它的 self.view 和一个可变数组中。这些子类又具有指向另一个视图的保留属性。在大多数情况下，view 属性指向 UIButton 子类的超视图（视图控制器的 self.view，它们被添加到其中）。但并非总是如此，也不一定，这就是为什么我使用这个属性而不是继承的 superview 的原因。

我遇到的问题是，当视图控制器的 dealloc 执行时：

```
- (void)dealloc
{
  [UIBUttonSubClassesArray release];
  [super dealloc];
} 
```

UIButton 子类的 dealloc 没有被调用。因此，这些子类中视图属性的附加版本不会被调用，即使视图控制器被释放，我也会为每个 UIButton 子类泄漏一次视图控制器的视图。

但是，如果我将子类的视图属性设为赋值，这样我就不需要在它们的 dealloc 中调用 release，它们的 dealloc 确实会被调用，即使现在没有引用视图的代码，应用程序也会崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:38:42.200

如果您的视图控制器不在保留周期中，您可以通过将按钮中的额外保留属性设置为零来打破其 dealloc（以及其 viewDidUnload 中）的循环。

尽管始终最好不要首先创建保留周期，但我在您的问题中没有看到足够的线索来说明在您的情况下应该如何避免它们。

# python - Python 线程。如何锁定线程？

> ID：10525185
> 
> 赞同：93
> 
> 时间：2012-05-09T22:44:33.587
> 
> 标签：python, multithreading

我试图了解线程和并发的基础知识。我想要一个简单的案例，两个线程反复尝试访问一个共享资源。

编码：

```
import threading

class Thread(threading.Thread):
    def __init__(self, t, *args):
        threading.Thread.__init__(self, target=t, args=args)
        self.start()
count = 0
lock = threading.Lock()

def increment():
    global count 
    lock.acquire()
    try:
        count += 1    
    finally:
        lock.release()

def bye():
    while True:
        increment()

def hello_there():
    while True:
        increment()

def main():    
    hello = Thread(hello_there)
    goodbye = Thread(bye)

    while True:
        print count

if __name__ == '__main__':
    main() 
```

所以，我有两个线程，都试图增加计数器。我认为如果调用线程'A' `increment()`，`lock`就会建立，阻止'B'访问，直到'A'释放。

运行 可以清楚地表明情况并非如此。您将获得所有随机数据竞赛增量。

锁定对象究竟是如何使用的？

此外，我尝试将锁放在线程函数中，但仍然没有运气。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-05-09T23:11:36.300

你可以看到你的锁在你使用它们时几乎可以工作，如果你放慢这个过程并让它们阻塞一点。你有正确的想法，用锁包围关键的代码片段。这是对您的示例的一个小调整，以向您展示每个人如何等待另一个人释放锁定。

```
import threading
import time
import inspect

class Thread(threading.Thread):
    def __init__(self, t, *args):
        threading.Thread.__init__(self, target=t, args=args)
        self.start()

count = 0
lock = threading.Lock()

def incre():
    global count
    caller = inspect.getouterframes(inspect.currentframe())[1][3]
    print "Inside %s()" % caller
    print "Acquiring lock"
    with lock:
        print "Lock Acquired"
        count += 1  
        time.sleep(2)  

def bye():
    while count < 5:
        incre()

def hello_there():
    while count < 5:
        incre()

def main():    
    hello = Thread(hello_there)
    goodbye = Thread(bye)

if __name__ == '__main__':
    main() 
```

样本输出：

```
...
Inside hello_there()
Acquiring lock
Lock Acquired
Inside bye()
Acquiring lock
Lock Acquired
... 
```

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2020-04-27T07:30:53.587

```
import threading 

# global variable x 
x = 0

def increment(): 
    """ 
    function to increment global variable x 
    """
    global x 
    x += 1

def thread_task(): 
    """ 
    task for thread 
    calls increment function 100000 times. 
    """
    for _ in range(100000): 
        increment() 

def main_task(): 
    global x 
    # setting global variable x as 0 
    x = 0

    # creating threads 
    t1 = threading.Thread(target=thread_task) 
    t2 = threading.Thread(target=thread_task) 

    # start threads 
    t1.start() 
    t2.start() 

    # wait until threads finish their job 
    t1.join() 
    t2.join() 

if __name__ == "__main__": 
    for i in range(10): 
        main_task() 
        print("Iteration {0}: x = {1}".format(i,x)) 
```

# .htaccess - htaccess重写错误

> ID：10525186
> 
> 赞同：1
> 
> 时间：2012-05-09T22:44:36.643
> 
> 标签：.htaccess

这条线有什么问题

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?query=$1 [L] 
```

我正在尝试重写链接

```
http://mysite.com/index.php?query=2012 
```

到

```
http://mysite.com/2012 
```

但我有**500 内部服务器错误**

这也是我的 htaccess 中的内容

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^software$ index.php?type=app
RewriteRule ^movies$ index.php?type=movie
RewriteRule ^games$ index.php?type=game
RewriteRule ^music$ index.php?type=music
RewriteRule ^other$ index.php?type=other
RewriteRule ^tv$ index.php?type=tv-show
RewriteRule ^ebooks$ index.php?type=ebooks

RewriteRule ^(.*)-(\d+)\.html$ download.php?id=$2 [L,NC]
RewriteRule ^site/([^/]*)$ /index.php?site=$1 [L]
RewriteRule ^([^/]*)$ /index.php?query=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:48:54.190

替换此规则：

```
RewriteRule ^([^/]*)$ /index.php?query=$1 [L] 
```

有了这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^/]*)/?$ index.php?query=$1 [L,QSA] 
```

# java - Android - 获取用户在 webview 中点击的链接

> ID：10525188
> 
> 赞同：0
> 
> 时间：2012-05-09T22:44:44.690
> 
> 标签：java, android, webview

我如何获得用户在 webview 中单击的链接？示例：我的 webview 将用户带到列出信息和 PDF 的网站，如果用户单击 PDF，我想获取用户单击的 PDF 文件的链接并将其放入 Google 的在线查看器中。我的代码不起作用，因为它不会拦截点击链接。有任何想法吗？

这是我所拥有的：

```
webview.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // do your handling codes here, which url is the requested url
            // probably you need to open that url rather than redirect:
            if (url.startsWith("tel:")) {
                startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(url)));
            } else if (url.startsWith("mailto:")) {
                url = url.replaceFirst("mailto:", "");
                url = url.trim();
                Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("plain/text").putExtra(Intent.EXTRA_EMAIL,
                        new String[] { url });
                startActivity(i);

            } else if (url.startsWith("geo:")) {
                try {
                } catch (Exception e) {
                    System.out.println(e);
                }

            } else if (url.endsWith("pdf")) {
                try{
                    String pdf = (url);
                    webview.loadUrl("http://docs.google.com/viewer?url=" + pdf);
                    }
                    catch (ActivityNotFoundException e)
                    {
                     Toast.makeText(atcFaa.this, "No PDF Viewer Installed", Toast.LENGTH_LONG).show();
                    }

            }

            else {
                view.loadUrl(url);
            }
            return true;
            // then it is not handled by default action
        }
    });
webview.loadUrl("http://www.somewebsite.com/publications/");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:00:31.607

我认为您要覆盖的方法是[WebViewClient.shouldInterceptRequest(WebView view, String url)](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)

```
public WebResourceResponse shouldInterceptRequest (WebView view, String url) 
```

*   将资源请求通知宿主应用程序并允许应用程序返回数据。如果返回值为 null，则 WebView 将照常继续加载资源。否则，将使用返回响应和数据。注意：此方法由网络线程调用，因此客户端在访问私有数据时应谨慎行事。参数

参见[webview shouldinterceptrequest 示例](https://stackoverflow.com/questions/8273991/webview-shouldinterceptrequest-example)

# templates - 无法（成功）在 Xcode 4.3.2 中安装 cocos2d/Kobold2D 模板或构建项目

> ID：10525194
> 
> 赞同：0
> 
> 时间：2012-05-09T22:45:13.717
> 
> 标签：templates, cocos2d-iphone, xcode4.3, kobold2d

我正在尝试这个新东西……它叫做简洁。不过，我只是在阅读它，所以请耐心等待。

安装了 cocos2d、cocos2d-chipmunk 和 cocos2d-box2d 的模板，它们将显示在 Xcode 的项目窗口中。（我知道 cocos2d 还不支持我已启用的 ARC。）尝试在任何一个模板中构建和运行一个简单的 Hello World 应用程序会导致“词汇或预处理器问题 - 'FontManager.h' 文件未找到“ 错误。努力寻找该问题的答案，我得到的只是这个，这最终对我没有帮助，但欢迎您查看：

[cocos2d 错误](https://stackoverflow.com/questions/3359551/cocos2d-error)

放弃了 cocos2d，走上了 kobold2d 的路线。使用安装程序，似乎工作正常。我已经能够使用 kobold2d 成功构建项目。问题是，无论是印刷版还是在线版，都几乎没有关于它的文献。

我想，“也许我应该改用 cocos3d 路线，只将它用于 2D。” 遵循本教程：

[http://www.techipost.com/2011/02/20/installing-cocos3d-for-iphoneipad/](http://www.techipost.com/2011/02/20/installing-cocos3d-for-iphoneipad/)

根据安装过程中在终端中打印的所有内容，它应该已经成功运行。不幸的是，我无法在 Xcode 中显示 3D 模板。

在这里，我束手无策，我正在考虑在接下来的课程中学习 OpenGL 和 UIKit，我不知道，一两年？

在 ARC 之后，cocos2d 甚至是一个可行的选择吗？感谢您提供的任何帮助，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:40:46.570

cocos2d 很好，ARC 兼容 1.1 (beta) 和 2.0 (beta) 版本。我已经使用 2.0 beta 几个月了，它非常棒。我猜您尝试使用 1.0.1 稳定版本，正如您所说，它与 ARC 不兼容。

`./install-templates.sh -f`我建议下载 2.0-rc1，通过（-f 强制覆盖，以防万一）从其根目录安装其模板。

关于 2.0-rc1 版本的博文：http: [//www.cocos2d-iphone.org/archives/1885](http://www.cocos2d-iphone.org/archives/1885)

编辑：只是为了澄清我们在同一页上......我将做一个步骤的迷你大纲：

1.  下载并解压 2.0-rc1
2.  进入终端，导航到 2.0-rc1 提取的根文件夹
3.  完全退出所有 Xcode 实例
4.  在控制台中输入这个并按回车：`./install-templates.sh -f`
5.  终端中的结果如下所示： http: [//pastebin.com/AVWKv3w1](http://pastebin.com/AVWKv3w1)
6.  重新打开Xcode，点击New Project -> 点击iOS or Mac OSX -> 点击“cocos2d v2.x” -> 点击“cocos2d iOS”或“cocos2d Mac” -> 点击Next
7.  这是我感到困惑的地方：我的模板没有显示 ARC 启用项目的选项。
8.  不管ARC，输入项目名->点击下一步->选择目录->点击创建
9.  项目完成索引后，选择“iPad 5.1 Simulator”或“My Mac 64-bit”作为目标，并构建（CMD + B）项目，它抱怨FontManager.h？

只是想知道，您是在创建 Mac 还是 iOS 项目？无论如何，让我知道它是怎么回事。=（这很奇怪！

# objective-c - 将 C++ 头文件添加到 Objective-C 项目

> ID：10525199
> 
> 赞同：0
> 
> 时间：2012-05-09T22:46:17.237
> 
> 标签：objective-c

我在 OSx 中使用 Photoshop 连接 API 时遇到了一个奇怪的错误。我需要将 cpp 文件的标头包含到我的项目中...我从 adobe 示例开始，并以这种方式包含代码：

```
#include "PSCryptor.h" 
```

其中包含 PSCryptor 类：

```
class PSCryptor
{
    public:
... 
```

一旦我尝试使用 PSCrypor 对象，就像这段代码一样

```
static PSCryptor *sPSCryptor = NULL; 
```

我收到此错误：

```
Unknown type name 'class'; did you mean 'Class'? 
```

你能帮我理解哪个是我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:50:23.380

该文件包含在 Objective-C 文件中——也就是说，它们具有扩展名“.m”，或者它们被专门配置为编译为 Objective-C（可能是前者）。因此，编译器尝试将代码解释为 Objective-C，但 C++ 不是有效的 Objective-C，因此它会报错。

您需要做的是改用 Objective-C++。简单修复：将使用该标题的文件的扩展名从“.m”更改为“.mm”。

# php - 从 URL 中删除 Youtube 链接

> ID：10525210
> 
> 赞同：1
> 
> 时间：2012-05-09T22:47:19.510
> 
> 标签：php, regex, parsing, youtube, strip

我拥有一个允许用户下载 Youtube 视频的网站。我需要检测是否存在 youtube url 的 php 脚本，例如：

givemeyoutube.com 将用户带到我的正常网站，但如果他们输入，

www.givemeyoutube.com/watch?v=OZLUa8JUR18

如何将它们带到我网站的索引并删除“watch？v=OZLUa8JUR18”并将其存储为变量？

**更新：**我该怎么做才能检查 URL，如果它包含“watch?v=”然后重定向到另一个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:50:21.037

将 preg_match 与以下正则表达式一起使用

`/(\/watch\?v=)([a-zA-Z0-9_-]+)/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:49:38.923

Preg match with `\b(?<=v.|/)[a-zA-Z0-9_-]{11,}\b`as RegExp

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T22:56:13.980

您可以使用`mod_rewrite`来妥善处理类似的请求`watch?V=123456`

在您的`.htaccess`文件中：

```
RewriteEngine On
RewriteBase /
RewriteRule ^watch index.php [QSA] 
```

然后在`index.php`：

```
if( isset( $_GET['v'] ) ) {
    // access the v parameter with $_GET['v'];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T22:57:28.087

我认为 url 重写会更适合这项任务，因为无论如何您都需要重写 url 以确保`watch`打开一个实际的 php 页面。

我会使用类似的东西：

```
RewriteEngine On
RewriteBase /

RewriteRule ^watch.*$ /index.php?action=watch [QSA] 
```

此规则将导致所有以 开头的请求都`watch`被路由到`index.php`原始查询字符串（由于）和一个以 value`[QSA]`调用的附加参数。`action``watch`

# asp.net - 在母版页中找到控件

> ID：10525213
> 
> 赞同：4
> 
> 时间：2012-05-09T22:47:33.037
> 
> 标签：asp.net, master-pages

我正在尝试从内容页面在母版页中设置标签，而不是使用 FindControl。因此，在母版页中我声明：

```
public partial class MainMasterPage : System.Web.UI.MasterPage
{

    public string UserOfficeLabel 
    {
        get { return lblUserOffice.Text; }
        set { lblUserOffice.Text = value; } 
    }
    public string OfficeLocationLabel
    {
        get { return lblOfficeLocation.Text; }
        set { lblOfficeLocation.Text = value; } 
    }

    protected void Page_Load(object sender, EventArgs e)
    {
    ....
    }
} 
```

“UserOfficeLabel”和“OfficeLocationLabel”是母版页上的标签。然后在内容页面（.aspx）中，我在“页面”指令下添加了以下指令：

```
<%@ MasterType VirtualPath="~/Main/MainMasterPage.master" %> 
```

在内容页面后面的代码（.cs 文件）中，我尝试访问/设置标签：

```
Master.UserOfficeLabel = ... 
```

但是 UserOfficeLabel 不是 Master 的选项（VS Intellisense 没有将其列为选项）。当我无论如何添加它时，它会说“MainMasterPage.UserOfficeLabel 无法访问其保护级别”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:30:50.190

我想你可以在这里找到你要找的东西：http: [//odetocode.com/blogs/scott/archive/2005/07/16/mastertype-in​​-asp-net-2-0.aspx](http://odetocode.com/blogs/scott/archive/2005/07/16/mastertype-in-asp-net-2-0.aspx)。理论上，当您编译时，您应该在部分类中看到下面的代码

```
 Public Shadows ReadOnly Property Master() As otc
    Get
        Return CType(MyBase.Master,otcMaster)
    End Get
End Property 
```

我已经通过声明一个变量来完成你正在尝试的事情

```
Dim LocalMasterPageRef As MyMasterPageName
LocalMasterPageRef = CType(Me.Master, MyMasterPageName)
...
LocalMasterPageRef.xxxx 
```

希望能帮助到你。

# facebook - 单个域上的多个应用程序？

> ID：10525214
> 
> 赞同：0
> 
> 时间：2012-05-09T22:47:39.823
> 
> 标签：facebook

我想在一个域上托管多个应用程序。

应用程序 url 将是[https://www.domain.com/app1/](https://www.domain.com/app1/)，[https://www.domain.com/app2/](https://www.domain.com/app2/)等...

我可以做吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:59:47.580

是的。当然，你没有理由不能这样做。

# c++ - 如何使用 boost::spirit::lex 实现包含指令？

> ID：10525216
> 
> 赞同：6
> 
> 时间：2012-05-09T22:47:40.930
> 
> 标签：c++, boost, boost-spirit, boost-spirit-lex

我有一个简单的配置文件解析器，由 spirit::lex 和 spirit::qi 构建。当词法分析器达到模式时，`include "path"`我希望包含文件的文本。你可能知道，spirit::lexer::begin() 开始扫描过程：

```
// Read file contents into a std::string
...

// _first and _last are const char*
_first = _contents.c_str();
_last  = &_first[_input.size()];

// _token is a lexer::iterator_type for the current token
_token = _lexer.begin(_first, _last); 
```

我的想法是有一个堆栈来存储表示为结构的词法分析器状态：

```
struct LexerState
{
    const char* first;
    const char* last;
    std::string contents;
}; 
```

词法分析器将识别模式`include "path"`并在语义操作中提取包含文件的路径。然后，当前的词法分析器状态被压入堆栈，文件的内容被加载到一个字符串中，并使用 lexer::begin() 像上面一样初始化新状态。

当词法分析器找到 EOF 字符时，堆栈被弹出并使用先前的词法分析器状态变量调用 lexer::begin()。

像这样反复调用 lexer::begin() 可以吗？如何让 lex::lexer 识别`include "path"`模式和 EOF 字符而不向 qi 解析器返回令牌？

最后，是否有任何替代或更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:42:17.300

看看**[Boost Wave](http://www.boost.org/doc/libs/1_49_0/libs/wave/index.html)**是如何做事的：

> C++预`Wave`处理器库使用`Spirit`解析器构造库来实现具有符合 ISO/ANSI 标准的预处理功能的 C++ 词法分析器。它公开了一个迭代器接口，该接口从输入流中返回当前预处理的令牌。这个预处理的令牌是在迭代预处理器迭代器序列时动态生成的（在 STL 的术语中，这些迭代器是前向迭代器）。

关于功能：

> C++ 预处理器提供了四种不同的工具，您可以根据需要使用它们：
> 
> *   包含头文件
> *   宏扩展
> *   条件编译
> *   线路控制

他们的[快速入门示例](http://www.boost.org/doc/libs/1_49_0/libs/wave/samples/quick_start/quick_start.cpp)展示了如何使用 Boost Wave 的词法分析器界面。

# php - php.log：清除日志文件的正确方法是什么？

> ID：10525219
> 
> 赞同：7
> 
> 时间：2012-05-09T22:47:58.717
> 
> 标签：php, unix, logging

我正在对一个 php 日志文件进行故障排除，该文件扩展得太快并占用了大量磁盘空间。

清除日志文件的最佳方法是什么？

简单地删除日志文件有问题吗？并且该日志文件会在 php 尝试写入时重新创建吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T23:02:19.100

删除 php.log 文件是完全安全的。下次需要时会自动创建。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-14T22:54:22.100

在 Linux 上，您可以执行以下操作：

```
cat /dev/null > /var/logs/php.log 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-09T14:01:18.153

在 Mac OS X 10.6 上，我删除**了 /var/log/apache2/error_log**。当刷新我的页面后它没有重新出现时，会出现轻微的恐慌。只需通过共享设置重新启动 apache。现在她回来了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T14:25:21.143

通过执行以下操作删除日志文件是安全的**：**

1.  完全删除 php.log 文件。
2.  如果在 Apache 上使用“service apache2 restart”命令重新启动服务器
3.  如果在 NGINX 上，您不必重新启动服务器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-14T05:25:11.173

您可以从终端（在 WHM 中）或从 SSH 终端运行这个简单的命令。

```
find -name error_log -type f -exec rm -rf {} \; 
```

此命令将查找所有名称为“error_log”的文件并将其删除。

享受。

# python - 使用 clang 构建 CPython 调用 /usr/bin/ld 作为最终链接，并获得“/usr/bin/ld: error: libpython3.2m.a: malformed archive header name at 8”

> ID：10525221
> 
> 赞同：2
> 
> 时间：2012-05-09T22:48:05.513
> 
> 标签：python, llvm, llvm-clang

我正在尝试使用 llvm 的 clang 构建 CPython 3.2。它可以使用 gcc 构建。我在 Linux Mint 12 上。

编译似乎运行良好，直到最后，它尝试生成 ./python 二进制文件。我得到的错误是：

```
clang -pthread   -Xlinker -export-dynamic -o python Modules/python.o libpython3.2m.a -lpthread -ldl  -lutil   -lm
/usr/bin/ld: error: libpython3.2m.a: malformed archive header name at 8
./Modules/python.c:25: error: undefined reference to 'PyMem_Malloc'
./Modules/python.c:27: error: undefined reference to 'PyMem_Malloc'
./Modules/python.c:51: error: undefined reference to '_Py_char2wchar'
./Modules/python.c:59: error: undefined reference to 'Py_Main'
./Modules/python.c:61: error: undefined reference to 'PyMem_Free'
./Modules/python.c:63: error: undefined reference to 'PyMem_Free'
./Modules/python.c:64: error: undefined reference to 'PyMem_Free'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经尝试使用我可信赖的 Linux Mint 12 .deb 存储库中的 llvm 2.9，以及今天早些时候的 llvm SVN 主干，但两者都给出了相同的错误。

我突然想到，如果我可以说服 clang 使用 llvm-link 而不是 /usr/bin/ld 进行链接，事情可能会更好，但我在文档中看不到如何做到这一点。只是将 $LD 设置为 llvm-link 似乎没有帮助。

那些未定义的引用可能是红鲱鱼：如果我 nm -o libpython3.2m.a （或 llvm-nm -o libpython3.2m.a - 两者都有效），我可以看到这些符号中至少有一个确实被定义了（根据当然是纳米 - 其他工具可能并且可能确实有其他想法）。

最终，我想生成 llvm 位码而不是 ELF 二进制文件，但首先获得具有 llvm 的工作 python ELF 二进制文件将是一个令人满意的迷你里程碑。

我目前正在使用以下内容进行编译：

```
export PATH=/usr/local/llvm/bin:$PATH
prefix=/usr/local/p3ib-3.2
export CC='clang'
export AR='llvm-ar'
export LD='llvm-link -emit-llvm-bc'
export RANLIB='llvm-ranlib'
./configure --prefix="$prefix" && make -j 3 
```

谢谢！

# windows - Windows 和虚拟商店中隐藏的注册文件

> ID：10525225
> 
> 赞同：0
> 
> 时间：2012-05-09T22:48:44.797
> 
> 标签：windows, windows-7, registration, appdata, virtualstore

我们刚刚发现了我们在 Windows 7 64 位版本上的注册方案的一个新问题。目前我们在应用程序的资源中保存了一个隐藏的注册文件，但很明显这不是最好的地方。今天我们发现，在 Windows 7 64 位版本中，当应用程序尝试在程序 files(x 86)/.. 中创建文件时，它实际上最终会出现在 virtualStore 中用户的 appData 中。当不同的用户尝试从不同的帐户使用该软件时，这将成为一个严重的问题（因为 virtualStore 特定于用户的帐户，并且要求用户再次注册该软件）。

我想知道人们通常将这些注册文件放在哪里？

# maven - 在 MANIFEST 文件中使用 Maven 程序集的 Maven SNAPSHOT jar 文件名不一致

> ID：10525231
> 
> 赞同：18
> 
> 时间：2012-05-09T22:49:22.433
> 
> 标签：maven, nexus, snapshot, maven-assembly-plugin

这是场景：

两个 Maven 3 项目构建。

构建 1 具有部署到 Nexus 的快照 jar。

Build 2 依赖于快照，引用如*1.0.0-SNAPSHOT*`mvn clean package assembly:single` ，使用命令打包和压缩。

我们遇到的问题：有时在创建程序集时，jar 的 MANIFEST 文件有时会说*some.jar.1.0.0-SNAPSHOT*有时会说*some.jar.1.0.0-datetime stamp*，因此导致类未定义错误。

有没有办法防止清单文件中出现这个命名问题？

- 编辑 -

进一步的研究发现了以下内容：

> “如果快照是从 repo 解析的，那么它将被加上时间戳，如果它来自反应器或本地 repo，那么它将是 -SNAPSHOT。插件调用 maven 解析逻辑，所以这是核心 maven 行为。“

这是正在遇到的确切问题。第二个构建清单文件始终具有*./lib/Framework-1.0.0-SNAPSHOT.jar*条目，其中实际 jar 文件名在*./lib/Framework-1.0.0-SNAPSHOT.jar*和*./lib/之间更改Framework-1.0.0-timestamp.jar*基于上面的引用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T08:48:55.087

在`<dependencySet>`你需要设置`<outputFileNameMapping>${artifact.artifactId}-${artifact.baseVersion}.${artifact.extension}</outputFileNameMapping>`

例如：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  <id>appserverB</id>
  <formats>
    <format>zip</format>
  </formats>
  <dependencySets>
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
      <outputFileNameMapping>${artifact.artifactId}-${artifact.baseVersion}.${artifact.extension}</outputFileNameMapping>
      <includes>
        <include>application:logging</include>
        <include>application:core</include>
        <include>application:utils</include>
        <include>application:appserverB</include>
      </includes>
    </dependencySet>
  </dependencySets>
</assembly> 
```

如果您使用的是**内置**程序集描述符之一，您需要自己复制它并`outputFileNameMapping`自己添加条目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-11T11:42:30.723

对于`maven-jar-plugin`用于创建工件然后由 打包的人`maven-assembly-plugin`，您仍然可以在工件名称中看到类路径中的时间戳，您可以通过设置禁用它`useUniqueVersions=false`，如下所示：

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
<version>${maven-jar-plugin.version}</version>
<configuration>
    <archive>
        <manifest>
            <addClasspath>true</addClasspath>
            <classpathPrefix>${project.build.finalName}.lib/</classpathPrefix>
            <mainClass>com.nate.Application</mainClass>
            <!-- To force the use of '-SNAPSHOT' version naming, simply disable the <useUniqueVersions>  -->
            <useUniqueVersions>false</useUniqueVersions>
        </manifest>
        <manifestEntries>
            <buildTime>${maven.timestamp}</buildTime>
        </manifestEntries>
    </archive>
</configuration> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-03T04:06:17.967

使用`<useBaseVersion>false</useBaseVersion>`, 当您需要复制依赖项时。例如 ：

```
 <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <version>2.8</version>
                    <executions>
                        <execution>
                            <id>copy</id>
                            <phase>package</phase>
                            <goals>
                                <goal>copy-dependencies</goal>
                            </goals>
                            <configuration>
                                <outputDirectory>${project.build.directory}</outputDirectory>
                                <useBaseVersion>false</useBaseVersion>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T14:39:59.713

对于那些遇到此问题并看到 Stephen Connolly 的答案但最终仍然有异常的人，这可能是因为某些依赖项的名称中有分类器。然后，您必须调整模式以使用 dashClassifier 作为可选值：

```
<outputFileNameMapping>${artifact.artifactId}-${artifact.baseVersion}${dashClassifier?}.${artifact.extension}</outputFileNameMapping> 
```

即使使用的依赖项没有分类器，这也将起作用。

有关更多详细信息，请参阅[程序集插件的文档](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-05-10T19:46:16.683

`<useBaseVersion>false</useBaseVersion>`为我做了诀窍。我刚刚切换到一个 SNAPSHOT 分支，它包括时间戳。

使用快照的主要优点是可以参考构建快照的实际日期/时间。

# python - 使用路径上传 Django 文件

> ID：10525232
> 
> 赞同：0
> 
> 时间：2012-05-09T22:49:25.993
> 
> 标签：python, django, file-upload, filefield

如果我通过 Ajax 将文件上传到我的网站，并且我有它的路径，有没有办法可以将此路径提交给 Django 表单的内置 FileField？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:41:03.247

我认为您可以[`UploadedFile`](https://github.com/django/django/blob/master/django/core/files/uploadedfile.py#L16)从类似文件的对象构造一个实例，将其放入 dict`{'name': temporary_uploaded_file}`并将其提供给表单的`files`参数。自己没有尝试过，但应该可以工作。

# facebook - 如何在 facebook 和 wordpress 网站上显示民意调查？

> ID：10525237
> 
> 赞同：0
> 
> 时间：2012-05-09T22:49:47.907
> 
> 标签：facebook, wordpress

有没有办法让我在我的 wordpress 网站和 facebook 上都显示一个民意调查。

我需要使用 Facebook 应用程序吗？

我可以创建一个 iframe 以显示在 Facebook 页面上吗？

我不确定这个民意调查是否只会显示在 Facebook 页面的主页上，或者民意调查是否会出现在新闻提要中。我只是想做初步研究。

我搜索的大部分内容都是 polldaddy.com

我目前正在使用 wp-polls，我可以创建一个自定义界面让它显示在 facebook 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:32:26.020

1) 是的。

2)[是的](https://developers.facebook.com)

3) 创建 Facebook 应用程序时，默认使用 iFrame，指向您的应用程序在您在应用程序设置中指定的服务器上的位置

4) 应用程序本身不能出现在 Facebook 个人资料页面上。您可以为批准您的应用程序的用户生成链接和状态消息（除其他外），这些消息可以出现在用户的时间轴/个人资料页面中

5) 根据你想花的钱，[Woobox](http://woobox.com/)也是一个不错的选择。

6) 是的。由于应用程序只是 iFrame，因此您可以根据自己的喜好设置您希望投票显示的页面的样式。不过，在 Facebook 上，它仍将仅驻留在其相应的应用程序页面上。

您将需要查看[Javascript SDK](https://developers.facebook.com/docs/reference/javascript/)或[PHP SDK](https://developers.facebook.com/docs/reference/php/)以获取有关如何为您的 Facebook 应用程序设置 UI 以与 Facebook 本身交互的更多信息。

# ruby-on-rails-3 - Rails 视图返回整个哈希而不是键

> ID：10525238
> 
> 赞同：0
> 
> 时间：2012-05-09T22:49:52.710
> 
> 标签：ruby-on-rails-3

这是一个快速的：

在我的 Rails 视图中，我有：

```
<% h = { "a" => 100, "b" => 200 } %>
<%= h.each_key { |key| puts key } %> 
```

这将在视图中返回以下内容：

> {"a"=>100, "b"=>200}

但是，根据 ruby​​ api doc (http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each_key)，它应该只返回以下内容：

> 一个
> _

为什么视图中列出了整个哈希，而不仅仅是键输出？我知道这可能是我愚蠢的问题，但我已经坚持了一段时间。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:57:35.093

编写此代码以获得正确的结果：

```
<% { "a" => 100, "b" => 200 }.each_key do |key| %>
  <%= key %>
  <br/>
<% end %> 
```

当您编写`pusts key`密钥时，会将其写入日志（和控制台）。当您写入`<%= key %>`密钥时，会将其写入您的页面。

# database - 在rails中的db错误中创建重复条目，可能是表单提交错误

> ID：10525242
> 
> 赞同：0
> 
> 时间：2012-05-09T22:50:11.597
> 
> 标签：database, ruby-on-rails-3, forms, duplicates

你好，我正在创建一个收藏夹功能，但它在数据库中创建了重复的 id。它正确存储了 id，但它复制了条目。

在我最喜欢的形式我有...

```
<div id="favorite_form">
    <% if current_user.favorited?(@lesson) %>
      <%= render 'unfavorite' %>
    <% else %>
      <%= render 'favorite' %>
    <% end %>
</div> 
```

我最喜欢的部分是......

```
<%= puts "xx favorite partial"%>
<%= form_for(current_user.favorite_relationships.build(lesson_id: @lesson.id), remote: true) do |f| %>
  <div><%= f.hidden_field :lesson_id %></div>
  <%= f.submit "Favorite", class: "btn btn-large btn-primary" %>
<% end %> 
```

当用户单击收藏按钮时，它应该调用 my FavoriteRelationships#create

```
def create
    puts "xx create"
    puts params[:favorite_relationship][:lesson_id]
    @lesson = Lesson.find(params[:favorite_relationship][:lesson_id])
    current_user.favorite!(@lesson) 
    respond_to do |format|
        format.html { redirect_to @lesson }
        format.js
    end
end 
```

在上面的代码中，我称我的用户模型函数为收藏！看起来像...

```
 def favorite!(lesson)
    puts 'xx favorite'
    favorite_relationships.create!(lesson_id: lesson.id)
  end 
```

我放了打印语句，出于某种原因......'xx create' 被调用了两次，'xx favorite' 也是如此。部分被渲染一次，这是正确的，因为“xx 最喜欢的部分”只出现一次。但是我的 FavoritesRelationships#create 被调用了两次

到底是怎么回事？

在我的课程模型中，这是用户想要收藏的我拥有的..

```
 belongs_to :user
  has_many :favorite_relationships
  has_many :users, :through => :favorite_relationships 
```

在我的用户模型中，我有

```
 has_many :lessons
  has_many :favorite_relationships 
```

收藏夹功能只是网络应用程序的一部分，这就是为什么我有多个关联。

最后但并非最不重要的是，我在我的 favorite_relationship.rb

```
 belongs_to :user
  belongs_to :lesson 
```

我不认为这是一个关联问题，但这可能就是我粘贴代码的原因。

出了什么问题？帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:02:14.407

我修好了它。有些东西已经腐败了，我不得不做

```
rake assets:clean 
```

# php - 查询数据库并将每行的两列放入数组中？

> ID：10525247
> 
> 赞同：2
> 
> 时间：2012-05-09T22:50:22.190
> 
> 标签：php, mysql

我有一个带有“profile_values”表的 sql 数据库（是的，它是一个 Drupal 数据库），我想通过一个查询来提取用户的姓名、职务和公司 ID。（我过去曾用三个查询完成此操作，但我想一次性完成。）

```
|   fid   |    uid    |    value

|    4    |    100    |     john
|    8    |    100    |     doe
|    9    |    100    | web developer
|   22    |    100    |   D3239GE77 
```

我使用了不同的字段 id (fid) 来表明我想要提取的行之间可以有字段 id，但是字段 id 不会改变，所以 4 将始终是名字，8 将是姓氏，9 将是标题，22 是公司 ID。

我的第一次尝试：

```
$result = mysql_query("SELECT value FROM profile_values WHERE uid = '$uid' ORDER BY fid ASC");
        while($row = mysql_fetch_array($result)) {

            $userinfo[] = $row['value'];

            $firstname = $userinfo[0];
            $lastname = $userinfo[1];
            $title = $userinfo[10];
            $companyid = $userinfo[12];

        } 
```

但是这种方法行不通，因为根据用户填写的可选字段，可能会有更多或更少的字段。

**我需要一种说法，“在这个数组中，如果 fid = 4, $firstname = value**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:59:10.913

这是一种不需要`switch`语句或`if`s 的方法。它基于一个数组，您之前将表的`fid`s 映射到目标数组上的键：

```
$fieldMap = array(
    4 => 'firstname',
    8 => 'lastname',
    9 => 'title',
    22 => 'companyid'
);
$userinfo = array();
$result = mysql_query("
    SELECT fid, value 
    FROM profile_values 
    WHERE uid = $uid 
    ORDER BY fid ASC
");
while($row = mysql_fetch_array($result)) {
    $fieldKey = $fieldMap[$row['fid']];
    $userinfo[$fieldKey] = $row['value'];
} 
```

下面是我最初的建议，我们将结果转换为“常规”表格格式，而不是属性表格格式：

```
SELECT 
    p1.value AS first_name,
    p2.value AS last_name,
    p3.value AS title,
    p4.value AS company_id
FROM profile_values p1
    LEFT OUTER JOIN profile_values p2
    ON p2.uid = p1.uid 
    AND p2.fid = 8
    LEFT OUTER JOIN profile_values p3
    ON p3.uid = p1.uid 
    AND p3.fid = 9
    LEFT OUTER JOIN profile_values p4
    ON p4.uid = p1.uid 
    AND p4.fid = 22
WHERE p1.uid = $uid AND p1.fid = 4 
```

这对于 SQL 来说比您当前使用的方式更昂贵，但它可以让您更轻松地从多个用户那里获取数据（只需更改`p1.uid = $uid`为，例如`p1.uid IN (2, 6, 29)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:05:53.133

```
$result = mysql_query("SELECT fid, uid, value FROM profile_values WHERE uid = '$uid' ORDER BY fid ASC");
$user = array();
while ($row = mysql_fetch_array($result)) {
    switch ($row['fid']) {
    case 4:
        $key = 'firstname';
        break;
    case 8:
        $key = 'lastname';
        break;
    case 9:
        $key = 'title';
        break;
    case 22:
        $key = 'company_id';
        break;
    default:
        continue 2; // 2 required when using switch inside loop
    }

    $user[$key] = $row['value'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:06:56.220

我会尝试以下方法：

```
$result = mysql_query("SELECT fid, value FROM profile_values WHERE uid = '$uid' ORDER BY fid ASC");
while($row = mysql_fetch_assoc($result)) {
    switch ((int)$row['fid']) {
        case 4:
            $firstname = $row['value'];
            break;
        case 8:
            $lastname = $row['value'];
            break;
        case 9:
            $title = $row['value'];
            break;
        case 22:
            $companyid = $row['value'];
            break;
    }
} 
```

然后，我会`isset()`用来检查变量是否存在，例如`isset($lastname)`

希望这可以帮助

# c - 将 char 数组中的 char 转换为 ANSI C 中自己的 char 数组

> ID：10525249
> 
> 赞同：0
> 
> 时间：2012-05-09T22:50:28.513
> 
> 标签：c, arrays, character

我有一个 char 数组，以十六进制形式表示双精度浮点数。

```
char *hex = ""402499999999999A" 
```

我想将每个 char 提取`hex`为自己的 char 数组并将其读入 unsigned int `num`。例如，我试过

```
sscanf((char *)&hex[3], "%X", &num); 
```

但这并没有给我第四个字符作为单独的字符数组，它给了我从第四个位置开始的子字符数组，我想这是因为数组是由它们的第一个元素的指针给出的。

有一个更好的方法吗？我看了看，`strcpy`似乎只能复制前n个字符，所以不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:55:55.203

您可以通过多种方式做到这一点。一种方法如下（这是*你*如何做的正确方法）：

```
char only_1_char[2] = {'\0', '\0'};
only_1_char[0] = hex[3];
sscanf(only_1_char, "%X", &num); 
```

和更有效的解决方案：

```
if (hex[3] <= '9')
    num = hex[3] - '0';
else
    num = hex[3] - 'A' + 10; 
```

不过，这只是一个示例。事实上，如果可能的话，您需要处理无效输入和小写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:54:02.420

尝试这样的事情：

```
for(i = 0; src[i] != 0; i++) {
    if(src[i]) <= '9') {
        dest[i] = src[i] - '0';
    } else {
        dest[i] = toupper(src[i]) - 'A' + 10;
    }
} 
```

它可以通过错误处理来改进（例如，检测“src[i]”是否包含有效/健全的字符）。

# jquery - jquery自动完成不显示从数据库中选择的所有标签

> ID：10525264
> 
> 赞同：1
> 
> 时间：2012-05-09T22:52:17.427
> 
> 标签：jquery, sql, json, jquery-ui, autocomplete

我正在尝试使用jquery自动完成，自动完成中使用的标签是从mysql数据库中提取的，问题是一旦从数据库中选择的标签数量超过500（我在SQL中使用LIMIT测试它），自动完成停止在
这里工作的是 SQL 代码：

```
DELIMITER $$

CREATE PROCEDURE `tous_comptes`()
BEGIN
DECLARE nbr INT;
CREATE temporary TABLE IF NOT EXISTS temp(id int, libele varchar(255));
select count(*) into nbr from temp;
    IF nbr = 0 THEN
        insert into temp select idCD,libele from cd union select idcomptes,libele from comptes union select idsouscomptes,libele from souscomptes;
        select*from temp LIMIT 500;
    ELSE
        select*from temp LIMIT 500;
    END IF;

END 
```

这是调用自动完成功能的脚本以及生成 Json 字符串的 php 文件

```
$(function () {

        $.getJSON('autocomplete.php', function(data) {
             var com=new Array();
             var idcom= new Array();
             var i=0;
             $.each(data, function(key, val) {
                 com[i]=val.libele;
                 idcom[i]=val.id;
                 i++;

             });
                $("#compte").autocomplete({
                    source: idcom,
                    minLength: 2,
                    select: function( event, ui ) {

                        for(var x=0; x<idcom.length;x++){
                          if(idcom[x] == ui.item.value){
                            $("#lblcompte").val(com[x]);

                          }
                        }

                    } 
                });
        }); 

    }); 
```

提前致谢。

# c++ - 在 Qt 中做 Gui 测试

> ID：10525267
> 
> 赞同：14
> 
> 时间：2012-05-09T22:52:54.770
> 
> 标签：c++, qt, user-interface

我正在尝试对 gui 应用程序进行压力测试，但我不太确定如何执行此操作。首先，我有一个应用程序，所有 gui 和帮助函数都位于其中。我还制作了两个外部库，该应用程序使用它们。这些库只做一些小事情，我想在 QtMock 启动并工作时对这些部分进行单元测试（由于某种原因，目前它与 qt 4.8 不兼容）。

我想对主应用程序进行压力测试，而不必更改太多代码。我查看了 QtTestLib，它看起来非常基本，好像您必须将该代码与主代码集成，这是我不想要的。我真的很想在应用程序之外进行测试，并且想知道如何做到这一点？不太确定是否应该将我的 enitre gui 应用程序导出为可以导入测试的外部库？

你通常如何做到这一点来真正对整个事情进行压力测试。不知道我应该如何以及在哪里做测试代码，我将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T01:26:02.773

根据我的经验，您使用的任何测试工具包要么会以微妙的方式将自己融入您的代码，要么永远无法达到您需要的深度（或两者兼而有之）。

可以编写自定义测试代码，并且仍然为正在测试的应用程序保持代码清洁。我是在一个需要自动测试的大型 Windows C++ gui 应用程序上完成的。基本思想是创建一个新项目，引用基础项目中的所有代码，并编写一组新的类，这些类派生自基类并包含您的测试代码。

就我而言，我创建了一个新的 Visual Studio 项目，但您可以对新的 Qt 项目执行相同的操作。当然，基类可能必须重构以公开要测试的功能。测试类根据需要调用基类函数 - 如果需要，您可以创建整个测试 gui。

作为一个非常简单的例子，如果这是你的项目......

```
class MyView : public QMainWindow {}
class MyController {}
class MyModel {} 
```

...创建一个新项目，拉入您的基本代码，然后添加这些：

```
class TestView       : public MyView {}
class TestController : public MyController {}
class TestModel      : public MyModel {} 
```

最后，经过一些工作，零测试代码在我的基类中，我仍然能够在一个漂亮的测试 gui 中连接并启动各种重复的自动测试。

我并不是说这是一项简单或微不足道的任务。我只是鼓励你，这是可以做到的。:-)

编辑：这不是对嵌入式单元测试的批评，如果您可以从项目开始就将其落实到位，那就太好了。但这是一个大型遗留应用程序，我没有将测试代码注入基本代码是一个硬性要求。

# magento - Magento Connect Manager 下载器 500 内部服务器错误

> ID：10525273
> 
> 赞同：1
> 
> 时间：2012-05-09T22:53:35.487
> 
> 标签：magento

我有一个 Magento 1.7 全新安装，我刚刚完成了我的产品上传。我去到系统> Magento Connect > Magento Connect Manager，我被重定向到：

[http://xx.xx.xx.xxx/store2/downloader/?return=http%3A%2F%2Fxx.xx.xx.xxx%2Fstore2%2Findex.php%2Fadmin%2F](http://xx.xx.xx.xxx/store2/downloader/?return=http%3A%2F%2Fxx.xx.xx.xxx%2Fstore2%2Findex.php%2Fadmin%2F)

带有 500 内部服务器错误。我检查了 Apache 错误日志，并没有发布任何关于此的内容。我还禁用了 htaccess，这也没有任何效果。与所有其他文件一样，权限设置为 apache 用户（守护进程），我将 Magento 中所有内容的权限设置为 777。不知道还能做什么！

有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T22:31:55.483

将 /downloader/ **.htaccess**重命名（或删除）为**.htaccess.backup**

# ruby-on-rails - Ruby on Rails 中用于配置文件的块级助手

> ID：10525275
> 
> 赞同：1
> 
> 时间：2012-05-09T22:53:40.067
> 
> 标签：ruby-on-rails, ruby, helpers

我正在使用 Ruby 1.9 在 RoR 3.1 上开发一个网站。我想为这样的用户角色创建一个配置文件（RAILS_ROOT/config/roles.rb）：

```
auth do
    roles :admin do
        auth_on :blogs, :to => [:create, update, :destroy]
        auth_on :comments, :to => [:create, update, :destroy]
    end

    roles :moderator do
        auth_on :blogs, :to => [update]
        auth_on :comments, :to => [:create, update] do
            where_attribute :user => current_user
        end
    end
end 
```

这个想法是解析文件并为角色设置变量。您知道如何实现这种帮助程序以及如何逐块解析文件吗？如果您有其他想法来创建一个简单的配置文件，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:26:16.183

为什么不使用 YAML？就像是

角色.yml：

```
roles:
  admin:
    blogs:
      create:
      update:
      destroy:
    comments:
      create:
      update: 
```

然后像

```
require 'yaml'
roles = YAML::load(File.open("roles.yml"))['roles']
roles.each do |user, role|
  role.each do |part,privs|
    privs.keys.each do |priv|
      setPrivilegeFor(user, part, priv)
    end 
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:47:17.913

就像您正在尝试重新创建 CanCan gem：

[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

使用 cancan 您可以创建一个`ability.rb`指定权限的文件。这是一个例子：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.admin?
      can :manage, :all
    else
      can :read, :all
    end
  end
end 
```

然后在您的视图（或控制器）中，您允许像这样访问：

```
<% if can? :update, @article %>
  <%= link_to "Edit", edit_article_path(@article) %>
<% end %> 
```

因此，我建议您先看看这是否能满足您的需求，而不是自己构建一些东西。如果没有，您至少可以对如何继续您的想法有所了解。此外，cancan 可以很好地与提供整体身份验证/授权策略的设计配合使用。

# c# - EntityFramework 上下文未保存

> ID：10525276
> 
> 赞同：2
> 
> 时间：2012-05-09T22:53:46.207
> 
> 标签：c#, .net, entity-framework, exception, dbcontext

我对我的 DbContext 进行了一些操作以进行保存。

我有两个实体 - 材质和颜色。实体具有多对多的关系。

我尝试这样做：

```
var color = context
 .Colors
 .Include("Materials")
 .Where(g => g.Id == (colorId))
 .FirstOrDefault();
var mater = context
 .Materials
 .Include("Colors")
 .SingleOrDefault(c => c.Name == material.Name);
mater.Colors.Add(color);
context.SaveChanges(); 
```

当程序试图运行`context.SaveChanges()`时，它会抛出一个异常`DbUpdateException`

```
Unable to update the EntitySet 'MaterialColors' because it has a 
DefiningQuery and no <InsertFunction> element exists in 
the <ModificationFunctionMapping> element to support the current operation. 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:07:22.467

EF映射的每个表都必须有PK。如果它没有 PK，它将被映射为只读视图。您必须转到您的数据库并将`MaterialColors`两个 FK 标记为复合 PK。比更新你的模型。

# asp.net - 设置文本框的属性？

> ID：10525286
> 
> 赞同：0
> 
> 时间：2012-05-09T22:54:46.587
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在尝试学习 Microsoft 的 ASP.net mvc 框架，而我不知道该怎么做的一件事是更改表单项（特别是文本框）的属性。这是我到目前为止所拥有的：

`@Html.TextBox("activeQuery", "defaultValue", new {Width = 300, Height = 300 })`

这在直觉上并不正确，但我只是根据我在网上找到的帖子调整了格式。

我使用这个框架只工作了一两个小时，所以请原谅这个非常基本的问题。提前感谢您的回复和耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:45:16.997

最后一个参数是定义文本框属性的匿名对象。因此，您可以将属性名称和值添加为匿名对象的属性名称和值。[http://msdn.microsoft.com/en-us/library/dd493049.aspx](http://msdn.microsoft.com/en-us/library/dd493049.aspx)

# jquery - 骨干网 - 在_模板和 zindex 问题中嵌入 youtube iframe

> ID：10525290
> 
> 赞同：0
> 
> 时间：2012-05-09T22:55:24.913
> 
> 标签：jquery, backbone.js

我的模板中有 iFrame，如下所示：

```
<iframe class="videoContainer" src="<%= url %>&html5=1" width="400" height="230" frameborder="0" allowfullscreen></iframe> 
```

我有问题将生成的 iFrames 放在 zindex 为 500 的弹出窗口后面；

这里是 class="videoContainer"

> .videoContainer { 位置：绝对；顶部：30px；左：0；底部：0；z-index：1；}

我已经尝试过的事情：

> 1-在 iFrame 之前通过以下代码将 wmode=transparent 或 wmode=Opaque 放在 url 的开头

```
<% url = url.substring(0 , url.indexOf('?') + 1) + 'wmode=transparent&' +  url.substring(url.indexOf('?') + 1 , url.length); %> 
```

正如我所看到的 iframe 和生成的 url 是正确的，但仍然有覆盖问题。

> 2- 将 wmode=transparent 或 wmode=Opaque 放在 url 的末尾，在 html5=1 之后；

仍然没有结果，有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:33:21.687

试试这个。

[http://jsfiddle.net/nejj/EkrQD/](http://jsfiddle.net/nejj/EkrQD/)

# mysql - 带有 SUM() 和 WHERE 的多个选择语句？

> ID：10525291
> 
> 赞同：2
> 
> 时间：2012-05-09T22:55:40.430
> 
> 标签：mysql

这涉及三列'name'、'trans_status'、'amount'。我需要得到一个表，其中每个“名称”都在一行上，并且对于四种状态（新、待定、最终、关闭）中的每一种都有一个 SUM() 的所有金额。

这就是我要找的东西：

```
name           total_new     total_pending       total_final      total_closed
Frank          145.35        219.34              518.23           9588.33
Susan          233.54        455.44              920.00           9600.52 
```

这是我的桌子的样子：

```
transactions
================
userid        status        amount
----------------------------------
1             new           25.00
1             new           30.18
2             final         90.12
1             pending       100.25
2             new           81.43

users
================
userid        name
----------------------------------
1             Frank
2             Susan 
```

我尝试了很多不同的查询，但恐怕我超出了我的能力范围。这是一个失败的例子：

```
 SELECT a.userid, u.name, 
    ( SUM(a.amount)
      WHERE a.status = 'new' 
    ) AS total_new,
    ( SUM(a.amount)
      WHERE a.status = 'pending' 
    ) AS total_pending,
    ( SUM(a.amount)
      WHERE a.status = 'final' 
    ) AS total_final,
    ( SUM(a.amount)
      WHERE a.status = 'closed' 
    ) AS total_closed 
    FROM transactions AS a
    LEFT JOIN users AS u ON u.userid = a.userid
    GROUP BY u.name
    ORDER BY u.name ASC; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T23:08:55.917

```
select u.name,
sum(case when status = 'new' then amount else 0 end) as total_new,
sum(case when status = 'pending' then amount else 0 end) as total_pending,
sum(case when status = 'final' then amount else 0 end) as total_final,
sum(case when status = 'closed' then amount else 0 end) as total_closed
from users as u
left join transactions as t on u.userid = t.userid
group by u.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:05:44.397

我不确定试试这个：

```
SELECT a.userid, u.name, 
    (SELECT SUM(amount) AS total_new FROM transactions
      WHERE status = 'new' 
    ),
    (SELECT SUM(amount) AS total_pending FROM transactions
      WHERE status = 'pending' 
    ),
    (SELECT SUM(amount) AS total_final FROM transactions
      WHERE status = 'final' 
    ),
    (SELECT SUM(amount) AS total_closed FROM transactions
      WHERE status = 'closed' 
    ) 
    FROM transactions AS a
    LEFT JOIN users AS u ON u.userid = a.userid
    GROUP BY u.name
    ORDER BY u.name ASC; 
```

# java - 使用 Java Android，有没有办法访问 Flipperview 中的动态对象？

> ID：10525292
> 
> 赞同：0
> 
> 时间：2012-05-09T22:55:54.080
> 
> 标签：java, android, dynamic, radio-button, viewflipper

我是 Java/Android 开发的新手。我正在viewflipper中动态构建一个问题/答案，以便每次翻转都有一个带有一些答案的新问题。现在，在我的 XML 文件中，我有一个 Flipperview。下面的代码构建了 X 个 [linearlayout with a [radiogroup and [4 radio elements]]]。我的问题是：如何根据脚蹼中的“当前”可见窗口获取选定的单选按钮？

```
for (DataQuizQuiz quiz_question : PLT.dataQuiz.getQuiz_data()) {
    LinearLayout ll = new LinearLayout(this);
    ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                        LayoutParams.FILL_PARENT));
    ll.setOrientation(LinearLayout.VERTICAL);
    RadioGroup rg = new RadioGroup(this);

    TextView tv_answer = new TextView(this);
    tv_answer.setText("Question: " + quiz_question.getQuestion());
    ll.addView(tv_answer);

    for (DataQuizAnswers answer : quiz_question.getAnswers()) {
        RadioButton rb = new RadioButton(this);
        rb.setText(answer.getAnswer());
        rg.addView(rb);
    }

    ll.addView(rg);
    vf_quiz_data.addView(ll);
} 
```

我所知道的是`vf_quiz_data.getCurrentView()`，但除此之外，我不知道如何引用其中的元素，因为它们没有 id 并且是动态创建的。该代码用于构建布局；我只是不确定现在如何引用其中的数据。谢谢你的帮助。

**更新**：我想出了一种在可见视图中定位广播组的方法，但我认为必须有更好的方法。我为无线电组分配了计数器 0、1、2 等的 id，因为它循环并使用以下方法捕获无线电组元素：

```
int selected = (int) ((RadioGroup)
vf_quiz_data.getCurrentView().findViewById(
    vf_quiz_data.getDisplayedChild())).getCheckedRadioButtonId();
RadioButton b = (RadioButton) findViewById(selected);
Log.v("DEBUG",(String) b.getText()); 
```

我也不确定根据计数器分配 id 有多安全。如果有人有另一种方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:40:10.887

一位朋友告诉我为我的数据构建一个或多个自定义视图，以便我可以使用 vf_quiz_data.getCurrentView() 从我自己的方法中访问它。经过一堆试验和错误，我得到了一个测试示例。我的自定义类名为“ViewQuiz”，我添加了一个名为“getName()”的方法，该方法返回该类添加到视图中的编辑文本的值。我最终能够像这样检索它：`(ViewQuiz) vf_quiz_data.getCurrentView()).getName()`. 我的类扩展了 linearlayout 并在其中输出了一个edittext，我在循环中创建了该类的一个新实例，并使用 addView 将它添加到 viewflipper 上。万一这对其他人有帮助，例如：

```
public class ViewQuiz extends LinearLayout {

public EditText name;

public ViewQuiz(Context context, AttributeSet attrs) {
    super(context, attrs);

    name = new EditText(context);

    name.setText("This is a test");
    addView(name);
}

public ViewQuiz(Context context) {
    super(context);
    name = new EditText(context);
    name.setText("This is a test");
    addView(name);
}

public String getName() {
    return name.getText().toString();

}

} 
```

* * *

```
ViewQuiz test;
for (loop stuff here) {
        test = new ViewQuiz(this);
        test.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        // vf_quiz_data = (ViewFlipper) findViewById(R.id.vf_quiz_data);
        vf_quiz_data.addView(test);
} 
```

* * *

```
// get text from visible view
(ViewQuiz) vf_quiz_data.getCurrentView()).getName() 
```

# math - N-Body problen：双 for 循环的高效并行化

> ID：10525294
> 
> 赞同：8
> 
> 时间：2012-05-09T22:55:55.447
> 
> 标签：math, optimization, parallel-processing

N 体问题的一个非常常见的问题是使用双循环来计算粒子之间的相互作用。考虑具有 n 个粒子的 N 体问题，循环可以写成

```
for (i = 0, i < n; i++)
    for (j = i+1, j < n; j++)
        // calculate interaction 
```

我的问题是如何使用不同的线程并行化这个循环。目标是每个线程“理想地”必须计算相同数量的交互。

我的想法是在不同的间隔上分离外循环，即 i 循环，比如 a_k=a(k)，其中 k = 1,2,...,p 其中 p 是我们想要划分的线程数问题成。

所以，循环可以写成

```
for (k = 1, k < p; k++)
    for (i = a(k), i < a(k+1); i++)
        for (j = i+1, j < n; j++)
            // calculate interaction 
```

其中最外层的循环，即 k 循环，是要并行化的循环。

因为最内层循环j-cycle的交互次数为n-(i+1)，所以每个线程计算的交互次数为

\sum_{i=a(k)}^{a(k+1)} n - (i+1)

这意味着人们想找到离散函数 a_k 使得函数

f[a_k] = \sum_{i=a(k)}^{a(k+1)} n - (i+1)

边界条件 a(1)=0 和 a(p)=n 是一个常数函数，因此迫使每个线程上的交互次数相同。

我尝试过使用不同的“启发式”（例如 a_k 多项式、指数、对数），但到目前为止还没有一个给我一个满意的答案。这个问题的直接解决方案对我来说并不明显。

对于小p，这个问题可以放在“最小化麻袋问题”上，基本上每个a_k都是一个变量来最小化函数

f(a_1,a_2,a_3,...) = 总和(|f[a_k] - n/p|^2)

但是您可能会猜到，对于较高的 p 值，这不是有效的（甚至收敛）。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:05:04.483

（对不起，如果没有清楚地表达出来，这在我的脑海中是有道理的）。

将 1 到 N 的所有数字相加时，您会注意到 N + 1 = (N - 1) + 2 = (N - 2) + 3 等。

那么，如果每个线程使用一个小 i 和一个大 i，这样总和总是相加呢？

或者，假设您想始终使用 5 个线程。线程 1 将执行前 10% 和最后 10%，线程 2 将执行第二个 10% 和倒数第二个 10%，依此类推。“早期”和“晚期”部分的每一对都会加起来相同的交互总数。

编辑：

从另一个帖子中窃取图表...

```
 0 1 2 3 4 5 6 7 8

0  - A B C D D C B A
1    - B C D D C B A  
2      - C D D C B A
3        - D D C B A  
4          - D C B A
5            - C B A
6              - B A
7                - A
8                  - 
```

这是否更清楚地表明了我的意思？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:30:26.237

您可以将您的对象分成`k`几组大致的`N/k`物体，并使用它来将您的初始交互三角形分解为多个`k*(k + 1)/2`部分：

```
 0 1 2 3 4 5 6 7 8
                      -- N=9;  k=3;  N/k=3
0  - A A B B B C C C
1    - A B B B C C C  -- diagonal pieces:  A, D, F
2      - B B B C C C
3        - D D E E E  -- non-diagonal pieces: B, C, E
4          - D E E E
5            - E E E
6              - F F
7                - F
8                  - 
```

由于存在两种类型的碎片，这种观点变得复杂：沿对角线的那些（带有`(N/k)*(N/k - 1)/2`元素的三角形）和不沿对角线的那些（带有元素的正方形`(N/k)*(N/k)`）。但是，由于对角线块的大小大约是方形块的一半，因此您可以为每个线程分配两个以平衡负载——总共`k*k/2`大致相等的任务。

这种方法的一个优点是每个任务只需要访问`2*N/k`body 的数据，这可以使它对缓存更加友好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T09:40:39.640

假设你的编译器支持 OpenMP，你为什么不能简单地尝试做

```
#pragma omp parallel for schedule(dynamic) // or: schedule(guided)
for (i = 0; i < n; i++)
    for (j = i+1; j < n; j++)
        // calculate interaction 
```

甚至（您需要进行基准测试以了解哪个表现更好）

```
#pragma omp parallel
const int stride = omp_get_num_threads() + 1; 
for (i = omp_get_thread_num(); i < n; i += stride)
    for (j = i+1; j < n; j++)
        // calculate interaction 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:35:35.337

今天我刚刚找到了解决方案。在有人确认之前我不会接受

为了使 f[a_k] 是关于 k 的常数函数，则

f[a_{k+1}] - f[a_k] = 0

k = 1,2,3,...,p-1 时必须为真。

我们可以使用我在问题上发布的定义扩展这个方程，我们得到一个关于 a_k, k=1,2,3,...,p 的“p”2º 阶代数方程系统。我没有看到任意 p 的封闭解决方案，但可以对每个 p 进行解析求解。

我已经确认：

1.  总和，当使用我计算的 a_k 是 n(n-1)/2，这个问题的交互总数。

2.  对于 p = 2,3,4,5 和 10，每个线程的交互次数确实是恒定的（其中 p=10 在mathematica® 上需要一些时间来计算）。

**编辑**

在详细检查了不同 p 值的解决方案之后，我已经达到了一般封闭解决方案

a_k = 1/(2 p) (-p + 2 pn - sqrt[p^2 + 4 p (p + 1 - k) (n - 1) n])

这对每个 p>=2, n>1 都有效。

这完成了答案。

# javascript - 寻找想法 JavaScript 的 IE 8 特定错误

> ID：10525296
> 
> 赞同：-4
> 
> 时间：2012-05-09T22:56:16.160
> 
> 标签：javascript, jquery

不幸的是，我目前无法在这里转储我的代码，因为其中大部分都是基于 Protiatory 的。但是，我只是在寻找有关在特定版本的 IE 中可能导致此问题的想法。此代码经过测试，可在 FF、Safari、Chrome、Opera、IE 7、IE 9 中运行，但在 IE 8 中不可用且拒绝运行。我尝试应用的任何修复程序都会在所有浏览器上破坏它。

在 IE 8 中，错误是“期待'}'”，我知道这显然应该是什么意思。但是我和其他 3 个人已经从第一行一直爬到下面的代码中，寻找任何损坏的括号、双亲或只是语法错误。除了一些对 HTML 的遗漏（这个项目是交给我的）。我没有看到任何问题，正如我所说的，所有其他浏览器都可以很好地处理此代码，因此没有错误。

任何人都猜到 IE 8 是怎么回事？因为我被难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:01:39.890

每次我遇到一个失踪`}`它都是因为我错过了一个`}`. 所以我猜就是这样。

回去再检查一次。他们很容易错过。

如果您仍然感到困惑，而事实并非如此，或者您找不到它，那么也许 IE8 以某种方式注释掉了一个，您可能想研究一下。不确定这是否是问题所在，或者由于没有可查看的代码，您如何解决这个问题。

# c# - 自动将经典 asp 转换为 Asp.net 2 或 MVC

> ID：10525300
> 
> 赞同：-1
> 
> 时间：2012-05-09T22:57:08.280
> 
> 标签：c#, asp.net, asp.net-mvc, asp-classic

我想知道是否有任何工具可以在 win 7 64 位机器上运行，以将我的经典 asp 站点转换为 C# 中的 Web 窗体/MVC。我发现在 Framework 1.1 中有一个工具可以转换它，但效果不太好。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T03:59:44.470

AFAIK，这样的工具不存在，即使它存在，我怀疑它会准确地转换任何东西。ASP.NET 和 ASP 是不同的范例。

您需要自己执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:23:35.330

我的两分钱本身并不是一个答案，就是不要尝试立即更新整个网站。特别是如果它是大型网站。并排运行经典网站和 asp.net 网站非常简单。制作新页面/功能 asp.net。当您这样做时，将网站分解为功能单元，然后开始转换这些单元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:03:01.840

这不是一个真正的答案，但在我看来，从 asp classic 直接到 mvc 会不那么痛苦，它们在某种程度上更接近于 web 开发的方法，webforms 使用完全不同的范式，它依赖于人工事件模型。话虽如此，我不知道任何可以在此过程中为您提供帮助的转换工具，并且正如您已经发现的那样，框架 1.1 上的转换工具并不能真正起作用。

# python - 可能来自 latin1 和 utf8 的字符串编码和解码

> ID：10525301
> 
> 赞同：4
> 
> 时间：2012-05-09T22:57:14.777
> 
> 标签：python, mysql, unicode, utf-8, latin1

我最近偶然发现了一个使用 Latin1 编码的 MySQL 数据库，并且在浏览器问号符号上查看时正在呈现。为了解决这个问题，我们将所有表上的 DB 编码更改为 utf8，将排序规则更改为 utf8_general_ci，但是已经存储的数据仍然显示有问号，所有从 mysql 到浏览器的数据存储和轮询由 php 完成，我确保在 php 上也使用了 utf8，甚至按照网上很多人的建议运行了 set names utf8，问题是现在我在我们知道没有的字符串上得到了奇怪的字符，例如 ÃƒÂ' .

数据示例

存储：

**EMMANUEL PE\xc3\u0192\xc2\u2018A GOMEZ 葡萄牙**

渲染：

**EMMANUEL PEÃƒÂ'A GOMEZ 葡萄牙**

恰当的：

**伊曼纽尔·皮亚·戈麦斯 葡萄牙**

* * *

存储：

**Luis Hern\xe1ndez-Higareda**

渲染：

路易斯·埃尔南德斯-希加雷达

恰当的：

**路易斯·埃尔南德斯-希加雷达**

* * *

存储：

**Teresa de Jes\xc3\u0192\xc2\xbas 加利西亚 G\xc3\u0192\xc2\xb3mez**

渲染：

**Teresa de JesÃƒÂºs 加利西亚 GÃƒÂ³mez**

恰当的：

**特蕾莎·德·赫苏斯·加利西亚·戈麦斯**

* * *

存储：

**博士。JOS\xc3\u0192\xc2\u2030 ABEN\xc3\u0192\xc2\x81MAR RIC\xc3\u0192\xc2\x81RDEZ GARC\xc3\u0192\xc2\x8dA**

恰当的：

**博士。JOSÃƒÂ‰ ABENÃƒÂMAR RICÃƒÂRDEZ GARCÃƒÂA**

目前我正在使用 python 从数据库中获取数据，我正在尝试标准化为 unicode utf8 但我真的迷路了，就我到这里而言，我需要转换当前显示的内容很奇怪字符转换为可读文本，如上所示。

我在这里想念什么？数据是不可修复的吗？

功能 [https://gist.github.com/2649463](https://gist.github.com/2649463)

**注意：** 在所有示例中，有 1 个是正确渲染的（如果有任何关于如何解决此问题的建议，请考虑是否存在）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:10:24.020

尝试这个：

```
print str.encode('cp1252').decode('utf-8').encode('cp1252').decode('utf-8') 
```

使用示例`ipython`：

```
In [49]: a=u'Teresa de Jes\xc3\u0192\xc2\xbas Galicia G\xc3\u0192\xc2\xb3mez'

In [50]: a=u'Teresa de Jes\xc3\u0192\xc2\xbas Galicia G\xc3\u0192\xc2\xb3mez'

In [51]: print a
Teresa de JesÃƒÂºs Galicia GÃƒÂ³mez

In [52]: print a.encode('cp1252').decode('utf-8').encode('cp1252').decode('utf-8')
Teresa de Jesús Galicia Gómez 
```

这是一个*“错误编码”*的 utf-8..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:21:35.877

如果您尝试将无法表示的字符插入`latin1`存储在该字符编码下的列中，这些字符将被不可逆转地替换为`?`- 信息已丢失：您唯一的选择是重新插入/更新数据，因为该列已存储在`utf8`.

但是，您问题中的某些数据没有多大意义。例如：

> 存储：
> 
> **EMMANUEL PE\xc3\u0192\xc2\u2018A GOMEZ 葡萄牙**

您是否尝试显示当前存储的*字节*或*字符？*无论哪种方式，其中一个`\u`或`\x`转义码都是没有意义的。

你说原始数据被编码为`latin1`; 在该字符集中，**Ñ**字符被编码为`0xd1`. 您说您随后将数据转换为`utf8`，这会将该字符的编码更改为双字节序列`0xc391`（这解释了`\xc3`您在上面显示为被存储；但是，尚不清楚第二个字节如何`0x91`变成片段`\u0192\xc2\u2018`中的序列*）。

我怀疑数据实际上已经通过一些进一步的转换，可能是在当前存储的数据和您用于查看此类存储的任何方式之间。建议您首先*确切地*确定数据库中存储的内容：

```
SELECT HEX(my_column) FROM my_table WHERE ... 
```

一旦确定了这一点，您将能够更好地了解需要对存储的数据进行哪些转换（如果有）来进行，`utf8`以及在存储和检索操作期间发生了哪些不希望的转换（如果有）。

* * *

^(* 现在阅读了 Thanasis Petsas 的答案，我意识到他已经发现您似乎已经将正确编码的`utf8`字符串解码为`latin1`，使用 对生成的字符进行编码`utf8`，然后`latin1`再次解码这些字节。这确实会产生您所显示的字符序列，但仍然有必要了解实际存储的内容以及检索期间的转换。)

# python - 程序在 IDLE 下工作，但在命令行失败

> ID：10525304
> 
> 赞同：6
> 
> 时间：2012-05-09T22:57:25.133
> 
> 标签：python, dll, ctypes, python-idle

我正在使用 Python 的 ctypes 库与 Windows DLL 对话。当我从 IDLE、Ipython 运行我的代码或键入交互式 python 解释器时，它工作正常。当我从 Windows 命令提示符运行相同的代码时，它会崩溃。**为什么一种方式崩溃，一种方式成功？**

这是我正在运行的代码的简化版本：

```
import ctypes, os, sys

print "Current directory:", os.getcwd()
print "sys.path:"
for i in sys.path:
    print i

PCO_api = ctypes.oledll.LoadLibrary("SC2_Cam")

camera_handle = ctypes.c_ulong()
print "Opening camera..."
PCO_api.PCO_OpenCamera(ctypes.byref(camera_handle), 0)
print " Camera handle:", camera_handle.value

wSensor = ctypes.c_uint16(0)
print "Setting sensor format..."
PCO_api.PCO_SetSensorFormat(camera_handle, wSensor)
PCO_api.PCO_GetSensorFormat(camera_handle, ctypes.byref(wSensor))
mode_names = {0: "standard", 1:"extended"}
print " Sensor format is", mode_names[wSensor.value] 
```

当我从 IDLE 或 Ipython 运行此代码时，我得到以下结果：

```
Current directory: C:\Users\Admin\Desktop\code
sys.path:
C:\Users\Admin\Desktop\code
C:\Python27\Lib\idlelib
C:\Windows\system32\python27.zip
C:\Python27\DLLs
C:\Python27\lib
C:\Python27\lib\plat-win
C:\Python27\lib\lib-tk
C:\Python27
C:\Python27\lib\site-packages
Opening camera...
 Camera handle: 39354336
Setting sensor format...
 Sensor format is standard
>>> 
```

当我从 Windows 命令提示符运行此代码时，我得到以下结果：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Admin>cd Desktop\code

C:\Users\Admin\Desktop\code>C:\Python27\python.exe test.py
Current directory: C:\Users\Admin\Desktop\code
sys.path:
C:\Users\Admin\Desktop\code
C:\Windows\system32\python27.zip
C:\Python27\DLLs
C:\Python27\lib
C:\Python27\lib\plat-win
C:\Python27\lib\lib-tk
C:\Python27
C:\Python27\lib\site-packages
Opening camera...
 Camera handle: 43742176
Setting sensor format...
Traceback (most recent call last):
  File "test.py", line 18, in <module>
    PCO_api.PCO_GetSensorFormat(camera_handle, ctypes.byref(wSensor))
  File "_ctypes/callproc.c", line 936, in GetResult
WindowsError: [Error -1609945086] Windows Error 0xA00A3002

C:\Users\Admin\Desktop\code> 
```

请注意，一些 DLL 调用可以正常工作，直到我开始设置传感器格式，我们才偏离了轨道。

通过检查我正在调用的 DLL 附带的文档，我看到 Windows 错误解码为“缓冲区的 wSize 太小”。（原文如此）。我不确定这是否相关。以防万一，[这里是 API 文档](http://www.pco.de/fileadmin/user_upload/db/download/MA_DCSDKWINE_114.pdf)。

当我看到“在 IDLE 中工作，提示失败”时，我认为必须有一些不同的环境变量设置。我应该检查什么？

编辑：

我将 sys.path 和 os.getcwd() 添加到测试代码中。

编辑：

不确定这是否重要，但我加载的 DLL (SC2_Cam.dll) 位于当前工作目录中。此目录中还有另一个 DLL (sc2_cl_me4.dll)，我相信它是由 SC2_Cam.dll 加载的。如果我从该目录中删除 sc2_cl_me4.dll，则对 SC2_Cam.dll 的调用都不起作用，包括 PCO_OpenCamera。

编辑：

如果我将上面的代码输入到“vanilla”交互式 python 解释器中，上面的代码也可以工作。我不需要 IDLE 或 ipython 来使其工作。仅调用“python.exe test.py”失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T02:15:37.120

你的系统上安装了多个版本的 python 吗？当您以交互方式运行和从文件运行它时，您可能正在使用不同的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:43:37.250

当您与 C 程序交互时，您会遇到 C 的所有困难。您犯的任何错误都可能导致缓冲区溢出、堆栈溢出、分段违规等。如果程序由于错误而写入随机内存位置，它的行为不会在所有情况下都相同。在您的机器上，它似乎在交互模式下工作，但从窗口命令提示符运行时会崩溃。但是在另一个操作系统上，或者在另一台机器上，甚至在另一天在同一台机器上，它的行为可能会有所不同。它的行为不是确定性的。

鉴于此，让我们看一下以下行：

```
PCO_api.PCO_OpenCamera(ctypes.byref(camera_handle), 0) 
```

根据 API 文档，在上面的调用中，`PCO_OpenCamera`函数不只是返回一个值`camera_handle`；它也`camera_handle`用作输入值。但是，您`camera_value`未初始化。我了解您应该在通话前将其设置为零。另一个问题是`PCO_OpenCamera`返回一个应该检查的值。如果有问题但程序继续运行，就好像没有问题一样，它将继续使用随机值作为`camera_handle`. 所以程序中的一个错误似乎是前一行（保存打印）应该是

```
camera_handle = ctypes.c_ulong(0) 
```

`PCO_OpenCamera`另一个是没有检查的返回值。（我不知道其余的是否还可以，我没有仔细检查过。）

此外，`c_ulong`Windows`HANDLE`类型是否正确？不知道，应该没问题。即使`c_ulong`大于`HANDLE`，它仍然*可能*没问题。但可能还不够；你必须确定你知道你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T02:36:13.057

你得到的错误让我相信你用来存储 wSensor 变量的 16 位整数太小了。我查看了他们的 API，它只是将其指定为 WORD 类型，从历史上看，按照 Microsoft 的标准应该是 16 位，但由于单词的大小存在很多歧义，请尝试将值提高到 32 或 64 位。

至于为什么这会在不同的环境中导致不同的行为，您使用的是 64 位操作系统吗？你安装了不同版本的python吗？

# javafx - 我可以在 javafx 2 上的 TableView 标题列上放置 TextField

> ID：10525311
> 
> 赞同：2
> 
> 时间：2012-05-09T22:58:10.880
> 
> 标签：javafx, javafx-2

我是javafx的新手。任何人都可以帮我在 TableView 标题上添加一些 TextFields。在 css 集成的帮助下，我尝试将 TableView 放在堆栈窗格上并将文本字段放在其上方。不能成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T00:30:20.553

是的，你可以这样做。

*对于 JavaFX 2.2*

在 JavaFX 2.2 (jdk7u6+) 中实现了 jira [RT-14909](http://javafx-jira.kenai.com/browse/RT-14909)，它允许您在列上设置图形（任意节点）以指定列的表头。

```
TableColumn col = new TableColumn("");
TextField colHeaderTextField = new TextField("Pink Elephants");
col.setGraphic(colHeaderTextField); 
```

*对于 JavaFX 2.0 和 2.1*

将表格添加到活动场景并渲染后，您可以查找表格标题标签并更改它们以显示图形（可以是任何类型的节点），该图形显示表格标题的文本字段而不是默认值静态标签文本。

这是一个示例：

```
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.collections.FXCollections;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class TableWithTextHeaders extends Application {
  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) {
    TableColumn firstNameCol = new TableColumn("First Name");
    firstNameCol.setCellValueFactory(new PropertyValueFactory<Person,String>("firstName"));
    TableColumn lastNameCol = new TableColumn("Last Name");
    lastNameCol.setCellValueFactory(new PropertyValueFactory<Person,String>("lastName"));

    TableView table = new TableView();
    table.getColumns().addAll(firstNameCol, lastNameCol);
    table.setItems(FXCollections.observableArrayList(
      new Person("Jacob", "Smith"),
      new Person("Isabella", "Johnson"),
      new Person("Ethan", "Williams")
    ));
    table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);

    StackPane layout = new StackPane();
    layout.setStyle("-fx-padding: 10;");
    layout.getChildren().add(table);
    Scene scene = new Scene(layout);
    stage.setScene(scene);
    stage.show();

    for (Node n: table.lookupAll(".column-header > .label")) {
      if (n instanceof Label) {
        Label label = (Label) n;
        TextField textField = new TextField(label.getText());
        label.textProperty().bind(textField.textProperty());
        label.setGraphic(textField);
        label.setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
      }
    }
  }  

  public static class Person {
    private final SimpleStringProperty firstName;
    private final SimpleStringProperty lastName;

    private Person(String fName, String lName) {
      this.firstName = new SimpleStringProperty(fName);
      this.lastName = new SimpleStringProperty(lName);
    }

    public String getFirstName() { return firstName.get(); }
    public void setFirstName(String fName) { firstName.set(fName); }
    public String getLastName() { return lastName.get(); }
    public void setLastName(String fName) { lastName.set(fName); }
  }
} 
```

# web-applications - 是否可以在 Web 应用程序中写入文件？

> ID：10525312
> 
> 赞同：3
> 
> 时间：2012-05-09T22:58:11.733
> 
> 标签：web-applications, dart, dart-html, dart-io

我想制作一个完全客户端的文本编辑器。不幸的是，[dart:io 不能在客户端工作](http://code.google.com/p/dart/issues/detail?id=1324)。我想将用户输入的文本保存到他机器上的文件中。他可以完全控制它的保存位置或我必须跳过的任何箍，以使其被认为是安全的。是否可以将文件写入他的机器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T22:59:45.883

您可以使用 HTML5 和 LocalStorage。它是一个持久存储，但只能由浏览器访问。

如果您希望用户能够在浏览器之外打开文件，只需将“保存”按钮设置为下载操作即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T15:04:57.597

请参阅 JavaScript 的等效答案：

[使用 jQuery 或 Javascript 编写本地文件](https://stackoverflow.com/questions/2090747/write-local-file-with-jquery-or-javascript)

> Web 平台专门设计用于防止站点将任意数据写入客户端计算机。

这是为了保护您的机器。

我看到解决此问题的一种方法是使用 dropbox 或 google drive api 之类的东西，以便您的应用程序“编辑” Dropbox 或 gdrive 上的文件，然后由 Dropbox 或 gdrive 客户端将其同步到您的本地磁盘上。例如：[SourceKit](https://chrome.google.com/webstore/detail/iieeldjdihkpoapgipfkeoddjckopgjg)

* * *

# java - 游标和baseadapter有什么区别？

> ID：10525315
> 
> 赞同：-3
> 
> 时间：2012-05-09T22:58:39.670
> 
> 标签：java, android, cursor, adapter, baseadapter

有什么区别

当我想使用它们在列表中显示对象时，光标和基本适配器会特别突出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:03:51.457

巨大的差异：

游标用于检查数据，通常来自数据库。例如，检查所有联系人/短信消息。

baseAdapter 就像一个将数据发送到 UI 组件的管子。例如，我经常将它用于 listViews，以准确设置每个项目的内容。

# dynamics-crm-2011 - CRM 2011 功能区 DisplayRule ValueRule 不起作用

> ID：10525316
> 
> 赞同：3
> 
> 时间：2012-05-09T22:58:43.900
> 
> 标签：dynamics-crm-2011, ribbon

我目前正在尝试根据表单上复选框的值显示/隐藏自定义功能区按钮。

我已经设法让我的 XML 在`<EnableRule>`我创建的情况下正常工作，但是一旦我尝试使用 a `<DisplayRule>`，无论我在该`new_is_trading`字段中输入什么值，相关按钮都会消失。

下面是我的 XML：

```
 <CommandUIDefinition>
          <Group Id="Mscrm.Form.account.CustomGroup.Group" 
                 Command="Mscrm.Form.account.CustomGroup.Command" 
                 Title="Client Commands" 
                 Sequence="51" 
                 Template="Mscrm.Templates.Flexible2">

              <Controls Id="Mscrm.Form.account.CustomGroup.Controls">
              <Button Id="Mscrm.Form.account.CustomGroup.Button.A" 
                      Command="Mscrm.Form.account.CustomGroup.Button.A.Command"
                      Sequence="10" 
                      LabelText="Custom Button" 
                      ToolTipTitle="Description" 
                      ToolTipDescription="Should only be shown if this account is trading" 
                      TemplateAlias="o1" 
                      Image16by16="/_imgs/ribbon/CustomEntity_16.png" 
                      Image32by32="/_imgs/ribbon/CustomEntity_32.png" />
            </Controls>
          </Group>
        </CommandUIDefinition> 
```

然后在我的规则定义中：

```
 <RuleDefinitions>
      <TabDisplayRules />
      <DisplayRules>
        <DisplayRule Id="Mscrm.Form.account.CustomDisplayRules.DisplayIfClient">
          <ValueRule Field="new_is_trading" Value="true" />
        </DisplayRule>
      </DisplayRules>
      <EnableRules>
        <EnableRule Id="Mscrm.Form.account.CustomEnableRules.EnableIfClient">
          <ValueRule Field="new_is_trading" Value="true" />
        </EnableRule>
      </EnableRules>
    </RuleDefinitions> 
```

同样，我的`EnableRule`作品很好，但`DisplayRule`由于某种原因我没有！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:09:54.567

使用 1(true) 和 0(false) 比较布尔值 - 这将起作用。我有同样的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T05:36:52.433

我不确定您的 enable 是如何工作的，但这是我正在使用的工作命令定义的示例。这不使用 value 属性，但我知道下面的代码可以正常工作，而且您似乎缺少对您创建的规则的引用...

```
 <CommandDefinitions>
      <CommandDefinition Id="Mscrm.Isv.account.grid.ShowMap.Command">
        <EnableRules>
          <EnableRule Id="Mscrm.Isv.account.Clients.EnableRule" />
          <EnableRule Id="Mscrm.Isv.account.grid.OneSelected.EnableRule" />
        </EnableRules>
        <DisplayRules>
          <DisplayRule Id="Mscrm.Isv.account.Clients.DisplayRule" />
        </DisplayRules>
        <Actions>
          <JavaScriptFunction Library="$webresource:way_showBingMapAll.js" FunctionName="showBingMap" />
        </Actions>
      </CommandDefinition>
    </CommandDefinitions> 
```

# php - PHP：没有任何意义的 SQL 滴答声

> ID：10525320
> 
> 赞同：0
> 
> 时间：2012-05-09T22:59:25.210
> 
> 标签：php, sql, boolean

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

上次检查时我的代码运行良好，但现在它似乎坏了。这是错误：

```
 Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /home/nerblog/public_html/nerblog/arch.php on line 4 
```

...这是第 4 行的代码：

```
 $q = mysql_query("SELECT * FROM main WHERE month='$month' AND year='$year' LIMIT 12 ORDER BY id DESC");

    while ($sql = mysql_fetch_array($q )) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:01:32.420

您的 SQL 查询失败。尝试将“ORDER”之后的“LIMIT”命令移动到查询的末尾：

```
SELECT * FROM main WHERE month='$month' AND year='$year' ORDER BY id DESC LIMIT 12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:08:33.183

根据文档：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 如果用户无权访问查询引用的表，mysql_query() 也会失败并返回 FALSE。

mysql_fetch_array() 函数需要 mysql_query 返回的结果资源。如果该调用失败，它将返回 false，这就是您传递给 mysql_fetch_array() 函数的内容，因此它失败了。

问题实际上出在您的 SQL 中。您需要`LIMIT`在查询中将子句放在最后：

```
 SELECT * FROM main WHERE month='$month' AND year='$year' ORDER BY id DESC LIMIT 12 
```

确保查询中的错误不会渗入其他代码的一种方法是首先检查该值：

```
$q = mysql_query("SELECT * FROM main WHERE month='$month' AND year='$year' ORDER BY id DESC LIMIT 12");

if($q != FALSE)
{
   // Query didn't fail, so get results
   while ($result = mysql_fetch_array($q))
   {
      // Do something with $result
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T23:03:34.653

[`mysql_error()`](http://php.net/mysql-error)存在是有原因的。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“ORDER BY id DESC”附近使用正确的语法

这意味着它没想到会看到`ORDER BY`你把它放在哪里。原因是`LIMIT`应该在*之后* `ORDER BY`，而不是之前。

# c# - 如何拆分字符串然后重新加入它？

> ID：10525321
> 
> 赞同：4
> 
> 时间：2012-05-09T22:59:28.507
> 
> 标签：c#, string, join, split

我在 C# 中有以下字符串。

```
"aaa,bbbb.ccc|dddd:eee" 
```

然后我用`new char[] {',','.','|',':'}`. 如何以与以前相同的顺序使用相同的字符重新加入此字符串？因此，该列表最终将与以前完全相同。

例子

```
string s = "aaa,bbbb.ccc|dddd:eee";
string[] s2 = s.Split(new char[] {',','.','|',':'});
// now s2 = {"aaa", "bbbb", "ccc", "dddd", "eee"}
// lets assume I done some operation, and
// now s2 = {"xxx", "yyy", "zzz", "1111", "222"}

s = s2.MagicJoin(~~~~~~);  // I need this

// now s = "xxx,yyy.zzz|1111:222"; 
```

编辑

上面的`char[]`示例只是示例，在现实世界中不会以相同的顺序甚至不会同时出现。

编辑

只是一个想法，使用 Regex.split 怎么样，然后首先通过`char[]`get a拆分`string[]`，然后使用`not the char[]`to split get another `string[]`，然后将它们放回去。也许工作，但我不知道如何编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:09:05.663

给你 - 这适用于任何顺序的任何分隔符组合，也允许在字符串中实际上没有找到分隔符的情况。我花了一段时间才想出这个，并且发布后，它看起来比任何其他答案都复杂！

啊，好吧，我还是把它留在这里。

```
public static string SplitAndReJoin(string str, char[] delimiters, 
  Func<string[], string[]> mutator)
{
  //first thing to know is which of the delimiters are 
  //actually in the string, and in what order
  //Using ToArray() here to get the total count of found delimiters
  var delimitersInOrder = (from ci in
                            (from c in delimiters
                             from i in FindIndexesOfAll(str, c)
                             select new { c, i })
                          orderby ci.i
                          select ci.c).ToArray();
  if (delimitersInOrder.Length == 0)
    return str;

  //now split and mutate the string
  string[] strings = str.Split(delimiters);
  strings = mutator(strings);
  //now build a format string
  //note - this operation is much more complicated if you wish to use 
  //StringSplitOptions.RemoveEmptyEntries
  string formatStr = string.Join("",
    delimitersInOrder.Select((c, i) => string.Format("{{{0}}}", i)
      + c));
  //deals with the 'perfect' split - i.e. there's always two values
  //either side of a delimiter
  if (strings.Length > delimitersInOrder.Length)
    formatStr += string.Format("{{{0}}}", strings.Length - 1);

  return string.Format(formatStr, strings);
}

public static IEnumerable<int> FindIndexesOfAll(string str, char c)
{
  int startIndex = 0;
  int lastIndex = -1;

  while(true)
  {
    lastIndex = str.IndexOf(c, startIndex);
    if (lastIndex != -1)
    {
      yield return lastIndex;
      startIndex = lastIndex + 1;
    }
    else
      yield break;
  }
} 
```

这是一个可以用来验证它的测试：

```
[TestMethod]
public void TestSplitAndReJoin()
{
  //note - mutator does nothing
  Assert.AreEqual("a,b", SplitAndReJoin("a,b", ",".ToCharArray(), s => s));
  //insert a 'z' in front of every sub string.
  Assert.AreEqual("zaaa,zbbbb.zccc|zdddd:zeee", SplitAndReJoin("aaa,bbbb.ccc|dddd:eee",
    ",.|:".ToCharArray(), s => s.Select(ss => "z" + ss).ToArray()));
  //re-ordering of delimiters + mutate
  Assert.AreEqual("zaaa,zbbbb.zccc|zdddd:zeee", SplitAndReJoin("aaa,bbbb.ccc|dddd:eee",
    ":|.,".ToCharArray(), s => s.Select(ss => "z" + ss).ToArray()));
  //now how about leading or trailing results?
  Assert.AreEqual("a,", SplitAndReJoin("a,", ",".ToCharArray(), s => s));
  Assert.AreEqual(",b", SplitAndReJoin(",b", ",".ToCharArray(), s => s));
} 
```

请注意，我假设您需要能够对数组的元素做一些事情，在将它们重新组合在一起之前操纵各个字符串 - 否则您可能只会保留原始字符串！

该方法构建动态格式字符串。这里不保证效率:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:35:52.750

这是`MagicSplit`：

```
public IEnumerable<Tuple<string,char>> MagicSplit(string input, char[] split)
{    
    var buffer = new StringBuilder();
    foreach (var c in input)
    {
        if (split.Contains(c)) 
        {
            var result = buffer.ToString();
            buffer.Clear();
            yield return Tuple.Create(result,c);
        }
        else
        {
            buffer.Append(c);
        }
    }
    yield return Tuple.Create(buffer.ToString(),' ');
} 
```

和两种类型`MagicJoin`：

```
public string MagicJoin(IEnumerable<Tuple<string,char>> split)
{
    return split.Aggregate(new StringBuilder(), (sb, tup) => sb.Append(tup.Item1).Append(tup.Item2)).ToString();
}

public string MagicJoin(IEnumerable<string> strings, IEnumerable<char> chars)
{
    return strings.Zip(chars, (s,c) => s + c.ToString()).Aggregate(new StringBuilder(), (sb, s) => sb.Append(s)).ToString();
} 
```

用途：

```
var s = "aaa,bbbb.ccc|dddd:eee";

// simple
var split = MagicSplit(s, new char[] {',','.','|',':'}).ToArray();
var joined = MagicJoin(split);    

// if you want to change the strings
var strings = split.Select(tup => tup.Item1).ToArray();
var chars = split.Select(tup => tup.Item2).ToArray();
strings[0] = "test";
var joined = MagicJoin(strings,chars); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T23:36:54.497

使用 Regex 类可能更容易做到这一点：

```
input = Regex.Replace(input, @"[^,.|:]+", DoSomething); 
```

其中 DoSomething 是转换相关项目的方法或 lambda，例如：

```
string DoSomething(Match m)
{
    return m.Value.ToUpper();
} 
```

对于此示例，“aaa,bbbb.ccc|dddd:eee”的输出字符串将为“AAA,BBBB.CCC|DDDD:EEE”。

如果您使用 lambda，您可以非常轻松地保持状态，如下所示：

```
int i = 0;
Console.WriteLine(Regex.Replace("aaa,bbbb.ccc|dddd:eee", @"[^,.|:]+",
    _ => (++i).ToString())); 
```

输出：

```
1,2.3|4:5 
```

这仅取决于您对项目进行的转换类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:39:31.040

这个怎么样？

```
 var x = "aaa,bbbb.ccc|dddd:eee";

var matches = Regex.Matches(x, "(?<Value>[^\\.,|\\:]+)(?<Separator>[\\.,|\\:]?)");

var result = new StringBuilder();

foreach (Match match in matches)
{
    result.AppendFormat("{0}{1}", match.Groups["Value"], match.Groups["Separator"]);
}

Console.WriteLine(result.ToString());
Console.ReadLine(); 
```

或者，如果您喜欢 LINQ（我喜欢）：

```
 var x = "aaa,bbbb.ccc|dddd:eee";
var matches = Regex.Matches(x, "(?<Value>[^\\.,|\\:]+)(?<Separator>[\\.,|\\:]?)");
var reassembly = matches.Cast<Match>().Aggregate(new StringBuilder(), (a, v) => a.AppendFormat("{0}{1}", v.Groups["Value"], v.Groups["Separator"])).ToString();
Console.WriteLine(reassembly);
Console.ReadLine(); 
```

不用说，您可以在重新组装之前对零件做一些事情，我认为这是本练习的重点

# asp.net - 控件不能覆盖层次结构中的 Page_Load

> ID：10525322
> 
> 赞同：2
> 
> 时间：2012-05-09T22:59:41.257
> 
> 标签：asp.net, inheritance, user-controls

我正在使用的**ChildClass用户控件具有一系列父类，最终继承自****System.Web.UI.UserControl**。

```
public BasestClass : AnotherClassExtendingUserControl
{
    private void Page_Load(object sender, EventArgs e)
    {
        // do some stuff
    }
}

public BaseClass : BasestClass
{
    // no Page_Load
} 
```

链上的两个父类， Page_Load 被标记为*private*。“中间”类显然不会覆盖它，但我需要在**ChildClass**用户控件的 Page_Load 中添加一些内容。

```
public ChildClass : BaseClass
{
    // think I need to override Page_Load here,
    // but there is no acceptable method to override
} 
```

我该怎么做才能进入**ChildClass**的 Page_Load ？**该控件中有我需要操作的控件，这些控件在BaseClass**或**BaseClass**中不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:53:04.077

The `Page_Load` (or `Load`) event gets raised during execution of the `OnLoad` event method, so I would suggest moving your logic there. You shouldn't have a problem overriding the `OnLoad` method from your child class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:42:22.667

我复制了你的课程，只是改变了两件事：

```
BasestClass : System.Web.UI.UserControl 
```

这不应该改变任何东西，因为你说`BasestClass`最终继承自`UserControl`.

我还将它添加到 BasestClass.Page_Load：

```
Response.Write("BasePage_Load"); 
```

现在，要解决您的问题：

您可以向 ChildClass 添加构造函数并为 Load 事件添加事件处理程序。

```
public ChildClass()
{
        Load += new EventHandler(_Default_Load);
}

void _Default_Load(object sender, EventArgs e)
{
        Response.Write("Event Handler");
} 
```

您还可以覆盖 OnPreRender：

```
protected override void OnPreRender(EventArgs e)
{
       base.OnPreRender(e);
       Response.Write("OnPreRender");
} 
```

完成上述所有操作后，将在响应中输出：

```
Event Handler
BasePage_Load
OnPreRender 
```

如果您想确保 的`Page_Load`方法`BasestClass`在您的新代码之前已经运行，`OnPreRender`那么就是您要做的事情的地方。

# ios - 是否可以将操作附加到导航栏的默认后退按钮项？

> ID：10525327
> 
> 赞同：1
> 
> 时间：2012-05-09T23:00:06.793
> 
> 标签：ios

我希望在用户单击导航栏中的后退按钮时调用一个方法。

我知道它可以创建我自己的带有附加操作的后退按钮并在导航栏中使用它。但我不想这样做——我没有这样一个按钮的图稿（我尝试使用苹果自己的导航按钮，这是在有人在网上发布了 iPhone 的图稿拆包后得到的，但它看起来不像对，即使是这样，如果我更改导航栏的颜色，它也不会匹配）。

我也知道它可以在 viewWillDisappear 中查看堆栈中的控制器列表：但我在 UIWebView 中导航，当涉及嵌套页面时这将不适用（实际上我想要做的是调用 [self .webView.goBack] 在这种情况下而不是 UIWebView 被弹出堆栈）。

那么，当用户单击导航栏默认后退按钮时，我有没有办法获得一个要调用的方法？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:08:05.210

简短的回答没有。后退按钮是 UINavigationBar 的私有部分。

通过子类化 UINavigationBar 您可能可以访问它，但我对此表示怀疑。

重要的是要注意，即使您替换了 leftBarButtonItem，它也永远不是“后退”按钮，而只是另一个可能将用户发送到前一页的按钮。

如果您想要一个执行您自己方法的“后退”按钮，您需要努力使其与其他人使用自定义图形的方式一样。它可以与您只需投入工作的原始后退按钮相匹配。

# html - 如何为单词添加样式 (HTML/CSS)

> ID：10525332
> 
> 赞同：-1
> 
> 时间：2012-05-09T23:00:35.123
> 
> 标签：html, css

我想做的很简单，但我真的不知道该怎么做。我想要的是使用 div 类来设置这样的标题：

- - 页面标题 - - - - - - - - - - - - - - - - - - - - - - -----

但显然我希望虚线是实线。这可能吗？非常感谢。

从其他帖子来看，我只是设计了一个 hr 标签，但没有我尝试过的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:22:30.680

您可以使用没有右、下或左边框的字段集图例。

```
<html>
<head>
    <title> test page </title>
    <style type="text/css">
        fieldset.cat_title
        {
            display: block;
            margin: 5px 0;
            border-top: 1px solid #000;
            border-right: 0;
            border-bottom: 0;
            border-left: 0;
        }
        fieldset.cat_title legend
        {
            margin: 0 0 0 50px;
        }
    </style>
</head>

<body>
    <fieldset class="cat_title">
        <legend>title</legend>
    </fieldset>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:25:39.333

试试这个。样式是内联的；但你应该能够将它们移出

```
 <div style="display:block">
            <div style="display:inline; float:left;"><hr style="width:100px" /></div>
            <div style="display:inline; float:left;">Page Title</div>
            <div style="display:inline; float:left;"><hr style="width:600px" /></div>         
        </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:04:57.777

你可以这样做：http: [//jsfiddle.net/zAytA/](http://jsfiddle.net/zAytA/)

简单的 HTML

```
<h1 class="h-line"><b>Page Title</b></h1>​ 
```

CSS

```
.h-line{
    border-top:1px solid #ccc;
    height:1px;
    margin:8px 0 7px 0;
    position:relative;
}
.h-line b{
    position:absolute;
    display:block;
    bottom:-8px;
    left:32px;
    font-size:16px;
    padding:0 6px;
    background:#FFF;

}​ 
```

这个想法是，对于您的标题，您只需使用容器元素的边框（在此示例中，H1，我只是选择使用顶部边框），然后添加另一位标记以包含实际文本，您可以绝对定位相对于容器。

我使用了 b 标签，因为它在语义上与 span 一样不重要，但字符较少。

我有一个 1px 高度的容器以确保它显示出来，但它可能不是必需的。

一个重要方面是确保容器有一些边距，以匹配标题中文本的大小，或者标题下方/上方的任何内容最终可能与标题重叠。

然后，通过使 b 元素的背景与背景颜色匹配来完成此操作，这将使边框看起来消失在文本后面。

*注意*：我相信这就是字段集和图例标签的工作方式，但如果您将其用于页面标题而不是表单字段分组，则语义上会更好。

如果您有非纯色背景，此概念将无法正常工作。这将导致文本“突出显示”背景颜色变得明显并打破“神奇”效果。

# git - git diff 的 HTML 漂亮视图页面

> ID：10525336
> 
> 赞同：2
> 
> 时间：2012-05-09T23:00:44.007
> 
> 标签：git, report, diff

有谁知道使用什么工具来生成如此漂亮的差异报告，例如 [https://review.openstack.org/#/c/6670/4/exercises/floating_ips.sh,unified](https://review.openstack.org/#/c/6670/4/exercises/floating_ips.sh,unified)

（注意它显示更改的线条并突出显示确切的更改）

我们正在考虑接收 HTML 格式的 git diff 以加快代码审查。漂亮视图差异报告的其他变体。

# ruby - Ruby：向对象添加实例变量

> ID：10525337
> 
> 赞同：4
> 
> 时间：2012-05-09T23:00:59.070
> 
> 标签：ruby

如何将一堆实例变量从一个对象添加到另一个对象？

例如，想象一下您拥有基础机器人的机器人，您可以使用附加组件对其进行自定义。

```
类机器人

   定义初始化
      @name = "简单机器人"
      @power = nil #没有电源
      @速度 = 无
      # 更多属性
   结尾

   def add_attributes（插件）
      @power = addon.power
      @speed = addon.speed
      #插件具有的其余属性
   结尾
结尾

```

我想重写`add_attributes`方法来简单地迭代每个插件的属性，而不是一个一个地写它们，因为可能有几十个属性。

一些插件可能有 Robot 没有的实例变量，我也想将它们添加到 Robot。就像动态创建实例变量一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T23:21:33.460

这取决于您所说的“属性”是什么意思；Ruby 没有直接的概念，但您可以将实例变量从一个对象复制到另一个对象，如下所示：

```
def add_attributes(addon)
  addon.instance_variables.each do |x|
    self.instance_variable_set(addon.instance_variable_get(x))
  end      
end 
```

**[编辑]**请注意，[@HolgerJust 的回答](https://stackoverflow.com/a/10525537/244128)也是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T23:25:56.147

您可以摆脱实例变量并改用单个哈希。这具有免费枚举器和干净界面的优势，可以从一个方便的地方访问机器人的所有功能。

它还避免了弄乱实例内部变量。它们通常是内部的，用于大量的东西。如果要公开功能，则应使用公共方法。弄乱内部状态至少是糟糕的设计，并且很可能会在以后导致很多悲伤。通常，最好尽可能避免元编程。

```
class Robot
  attr_reader :features

  def initialize
    @features = {}
    @features[:name] = "simple robot"
    @features[:power] = nil #no power
    @features[:speed] = nil
  end

  def add_attributes(addon)
    @features.merge! addon.features
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T15:12:07.057

您可以使用灵活的 gem[0]，它可以让您在不编写太多代码的情况下即时创建实例变量。做就是了

```
class SomeClass
  include Flexible
end
sc = SomeClass.new
sc.my_variable_name = 1 # or any other value 
```

[0] [https://github.com/matthiasbeyer/flexible](https://github.com/matthiasbeyer/flexible)

# emacs - 如何在 Emacs 中一次在多行末尾添加或删除文本？

> ID：10525340
> 
> 赞同：5
> 
> 时间：2012-05-09T23:01:28.847
> 
> 标签：emacs

例如，我想在一堆突出显示的行的末尾添加一个双引号。或者我想从一堆突出显示的行中删除两个字符。有这个命令吗？我知道有用于插入文本矩形的“Mx r t”，但这只有在所有内容都垂直排列时才有效，这通常不是行尾的情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T23:12:52.077

你可以

1.  `C-x``(``C-e``"``C-f``C-x``)`用, 分别 保存键盘宏 。`C-x``(``C-e``Backspace``Backspace``C-f``C-x``)`. `C-x``e`然后用, `e`, `e`, `e`...调用宏
2.  用 进行正则表达式替换`M-C-%`。替换`$`为`"` 添加双引号，替换`..$`为无删除最后两个字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T08:43:16.337

`M-x``replace-regexp` `$` `"`应该可以，但我不确定是否`replace-regexp`尊重标记。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T08:37:30.613

这是一种更直观的方式，当您在一行中键入结果时，可以查看每一行的结果。

[获取 YASnippet](https://github.com/joaotavora/yasnippet)的最新副本并添加到您的`.emacs`

```
(require 'yasnippet)

(defun yas/add-to-end-of-lines-snippet ()
  (interactive)
  (when (region-active-p)
    (let ((snippet (replace-regexp-in-string "$" "$1" (buffer-substring (region-beginning) (region-end)))))
      (delete-region (region-beginning) (region-end))
      (yas/expand-snippet snippet)))) 
```

现在选择一个区域并输入`M-x add-to-end-of-lines-snippet`。

# android - Android surfaceview - 只要按下屏幕上的左或右按钮即可移动 Starship

> ID：10525342
> 
> 赞同：0
> 
> 时间：2012-05-09T23:01:33.107
> 
> 标签：android, touch, surfaceview, move

我正在尝试使用基本的surfaceview单线程引擎在android中制作Galaga类型的游戏。我的问题很简单，在扩展的 Gameview 类中，我定义了 onTouch 方法，该方法读取画布上发生的任何触摸事件。如果在左键（或右键）放置的位置触摸屏幕，只要按下按钮，星舰就应该向左/向右移动。

但是当按钮区域被触摸时，我的船的更新方法只被调用一次，它只向左或向右移动一次，并且必须再次触摸按钮才能移动得更远。只要触摸按钮区域，有没有办法让船连续左/右移动？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:09:54.303

不要将移动逻辑与 onTouch 逻辑混用。在 onTouch 中，您可以设置一个标志“已触摸”，然后在常规游戏更新循环期间，如果触摸为真，您可以移动船。然后取消设置 onTouchReleased 中的 'touched' 标志。

# java - 如何在 Cloneable 中保护克隆方法？

> ID：10525344
> 
> 赞同：1
> 
> 时间：2012-05-09T23:02:10.677
> 
> 标签：java, cloneable

我有一个非常简单的问题（我猜！）如何在 Cloneable 接口中保护克隆方法，而接口只能声明公共方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:04:59.770

Cloneable 接口实际上并没有在其中定义任何方法。它只是一个标记接口，类似于Serializable。

预计任何实际可克隆的对象都将实现此接口，并覆盖 Object 的 clone() 方法（至少使其可公开访问）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:05:05.650

该`Cloneable`接口没有定义任何方法。
`protected Object clone()`是 中的一个方法`java.lang.Object`，如果该类没有实现，则抛出异常`Cloneable`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T23:05:18.357

没有`Cloneable`声明任何方法:)

您正在考虑`Object`，它确实声明了一个`clone()`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T23:06:36.410

[`Cloneable`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html)是一个[标记接口](http://en.wikipedia.org/wiki/Marker_interface_pattern)，它没有任何方法。

clone 方法在 Object 类中，因为 Java 中的所有对象都隐式扩展了 Object，因此即使它受到保护，它也是可用的。

如果一个类没有实现`Cloneable`并且它的 clone 方法被调用，它将抛出[CloneNotSupportedException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CloneNotSupportedException.html)

# android - 将sqlite数据库从pc复制到android？

> ID：10525350
> 
> 赞同：1
> 
> 时间：2012-05-09T23:02:49.690
> 
> 标签：android, sqlite

请问如何在真正的android手机中使用数据库（我用Eclipse创建并且我正在使用SDK）？该应用程序运行良好，但是当我需要从搜索栏访问数据库时，它就崩溃了。我真的需要这个作为我明天的顶点。

```
package com.nutriapp;

import java.util.ArrayList;
import java.util.Date;

import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log; 
```

公共类数据库适配器 {

```
public static final String COLUMN_ID = "ID";
public static final String COLUMN_NAME = "Name";
public static final String COLUMN_AGE = "Age";
public static final String COLUMN_GENDER = "Gender";
public static final String COLUMN_WEIGHT = "Weight";
public static final String COLUMN_HEIGHT = "Height";
public static final String COLUMN_ACTIVITY = "Activitylevel";
public static final String COLUMN_CALORIES = "numCal";
public static final String FOOD_ID = "food_ID";
public static final String FOOD_NAME = "food_name";
public static final String FOOD_CALS = "food_cals";
public static final String FOOD_FAT = "food_fat";
public static final String FOOD_PRO = "food_protein";
public static final String FOOD_CRAB = "food_crabs";
public static final String EXERCISE_NAME = "exercise_name";
public static final String EXERCISE_CALS = "exercise_cals";
public static final String EXERCISE_ID = "exercise_ID";
public static final String DAILY_ID = "daily_ID";
public static final String DAILY_DATE = "daily_date";
public static final String DAILY_FAT = "daily_fat";
public static final String DAILY_PROTS = "daily_protein";
public static final String DAILY_CARBS = "daily_carb";
public static final String DAILY_BFITEMS = "daily_breakfast";
public static final String DAILY_LNITEMS = "daily_lunch";
public static final String DAILY_DNITEMS = "daily_dinner";
public static final String DAILY_EXERCISE = "daily_exercise";

public static final String TABLE_DAILYSTATS = "dailystats";
public static final String TABLE_USERS = "users";
public static final String TABLE_FOOD = "food";
public static final String TABLE_EXERCISE = "exercise";
private static final int DATABASE_VERSION = 10;
private static final String DATABASE_NAME = "nutriwellness.db";

private static final String CREATE_TABLE_USERS = "create table users( id integer primary key autoincrement, "
        + "Name text, Age integer, Gender text, Weight text, Height text, Activitylevel text, numCal float );";

private static final String CREATE_TABLE_FOOD = "create table food( food_ID integer primary key,"
        + "food_name text,food_cals real, food_fat real, food_protein real, food_crabs real );";

private static final String CREATE_TABLE_EXERCISE = "create table exercise( exercise_ID integer primary key,"
        + "exercise_name text,exercise_cals real );";

private static final String CREATE_TABLE_DAILYSTATS = "create table dailystats( daily_ID integer primary key autoincrement,"
        + "daily_date text, daily_fat real, daily_protein real, daily_carb real, daily_breakfast text, daily_lunch text, daily_dinner text, daily_exercise text, ID integer );";

private SQLiteDatabase database;
private DatabaseHelper dbHelper;

private String[] allColumnsofuserstable = { COLUMN_ID, COLUMN_NAME,
        COLUMN_AGE, COLUMN_GENDER, COLUMN_WEIGHT, COLUMN_HEIGHT,
        COLUMN_CALORIES };

private String[] allColumnoffoodtable = { FOOD_ID, FOOD_NAME, FOOD_FAT,
        FOOD_PRO, FOOD_CRAB };
private String[] allColumnofexercisetable = { EXERCISE_ID, EXERCISE_NAME,
        EXERCISE_CALS };

private String[] allColumnofdailytable = { DAILY_ID, DAILY_FAT,
        DAILY_PROTS, DAILY_CARBS, DAILY_EXERCISE };

public DatabaseAdapter(Context context) {

    dbHelper = new DatabaseHelper(context);
}

public static class DatabaseHelper extends SQLiteOpenHelper {

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 18);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            // db.execSQL(CREATE_TABLE_USERS);
            // db.execSQL(CREATE_TABLE_FOOD);
            // db.execSQL(CREATE_TABLE_EXERCISE);
            db.execSQL(CREATE_TABLE_DAILYSTATS);
        } catch (SQLException e) {
            // e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(DatabaseHelper.class.getName(),
                "Upgrading database from version " + oldVersion
                        + "to version " + newVersion);

        // db.execSQL("DROP TABLE IF EXISTS users");
        // db.execSQL("DROP TABLE IF EXISTS food");
        // db.execSQL("DROP TABLE IF EXISTS exercise");
        db.execSQL("DROP TABLE IF EXISTS dailystats");

        onCreate(db);

    }

}

public float sumCalories(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select food_cals from food where food_name='" + items[i]
                        + "'", null);
        c.moveToFirst();
        while (!c.isAfterLast()) {
            sum += c.getFloat(0);
            c.moveToNext();
        }
    }
    return sum;
}

public float sumProteins(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select food_protein from food where food_name='"
                        + items[i] + "'", null);
        c.moveToFirst();
        while (!c.isAfterLast()) {
            sum += c.getFloat(0);
            c.moveToNext();
        }
    }
    return sum;
}

public float sumFat(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select food_fat from food where food_name='" + items[i]
                        + "'", null);
        c.moveToFirst();
        while (!c.isAfterLast()) {
            sum += c.getFloat(0);
            c.moveToNext();
        }
    }
    return sum;
}

public float sumCarbs(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select food_crabs from food where food_name='" + items[i]
                        + "'", null);
        c.moveToFirst();
        while (!c.isAfterLast()) {
            sum += c.getFloat(0);
            c.moveToNext();
        }
    }
    return sum;
}

public float sumBurned(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select exercise_cals from exercise where exercise_name='"
                        + items[i] + "'", null);
        c.moveToFirst();
        while (!c.isAfterLast()) {
            sum += c.getFloat(0);
            c.moveToNext();
        }
    }
    return sum;
}

// //////////////////////////// FOR STORING IN DAILY TABLE
public long saveDayStatistics(float fat, float protein, float carbs,
        String breakfast, String lunch, String dinner, String exercise) {
    Date now = new Date();

    ContentValues values = new ContentValues();
    values.put("daily_date", now.toString());
    values.put("daily_fat", fat);
    values.put("daily_protein", protein);
    values.put("daily_carb", carbs);
    values.put("daily_breakfast", breakfast);
    values.put("daily_lunch", lunch);
    values.put("daily_dinner", dinner);
    values.put("daily_exercise", exercise);

    return database.insert(TABLE_DAILYSTATS, DAILY_DATE, values);

}

public DatabaseAdapter open() throws SQLException {
    database = dbHelper.getWritableDatabase();
    return this;
}

public void close() {
    dbHelper.close();
}

// create a user
public long createUser(String name, String age, String gender,
        String weight, String height, String level, float calnum) {

    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);

    return database.insert(TABLE_USERS, COLUMN_ID, values);
}

// delete a user by ID
public boolean deleteUser(long rowId) {
    return database.delete(TABLE_USERS, COLUMN_ID + "=" + rowId, null) > 0;
}

// retrieve a list of all users
public Cursor getAllUsers() {
    return database.query(TABLE_USERS, allColumnsofuserstable, null, null,
            null, null, null);

}

// retrieve a particular user
public Cursor getUser(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_USERS,
            allColumnsofuserstable, COLUMN_ID + "=" + rowId, null, null,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// update a user
public boolean updateUser(long rowId, String Name, int age, String gender,
        String weight, String height, String level, float calnum) {
    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, Name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);
    return database.update(TABLE_USERS, values, COLUMN_ID + "=" + rowId,
            null) > 0;
}

// FOOD METHODS !

// Create a new food row
public long createFood(String name, double food_cal, double food_fat,
        double food_proteins, double food_carbs) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
    Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database.insert(TABLE_FOOD, FOOD_ID, Fvalues);
}

// delete a Food by ID
public boolean deleteFood(long rowId) {
    return database.delete(TABLE_FOOD, FOOD_ID + "=" + rowId, null) > 0;
}

// retrieve a list of all FOOD
public ArrayList<String> getAllfood() {
    Cursor c = database.query(TABLE_FOOD, allColumnoffoodtable, null, null,
            null, null, null);
    ArrayList<String> food = new ArrayList<String>();

    c.moveToFirst();
    while (!c.isAfterLast()) {
        food.add(c.getString(1));
        c.moveToNext();
    }

    return food;

}

// Retrieve a specific Food

public Cursor getFood(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_FOOD, allColumnoffoodtable,
            FOOD_ID + "=" + rowId, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// Update a food

public boolean updateFood(long rowId, String name, int food_cal,
        int food_fat, int food_proteins, int food_carbs) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
    Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database
            .update(TABLE_FOOD, Fvalues, FOOD_ID + "=" + rowId, null) > 0;
}

// //////////////////////////////// EXERCISE
// TABLE///////////////////////////////////////////////////

public long createExercise(String name, double exercise_cals) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(EXERCISE_NAME, name);
    Fvalues.put(EXERCISE_CALS, exercise_cals);

    return database.insert(TABLE_EXERCISE, EXERCISE_ID, Fvalues);
}

public Cursor getExercise(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_EXERCISE,
            allColumnofexercisetable, EXERCISE_ID + "=" + rowId, null,
            null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public ArrayList<String> getAllexercise() {
    Cursor c = database.query(TABLE_EXERCISE, allColumnofexercisetable,
            null, null, null, null, null);
    ArrayList<String> exercise = new ArrayList<String>();

    c.moveToFirst();
    while (!c.isAfterLast()) {
        exercise.add(c.getString(1));
        c.moveToNext();
    }

    return exercise;

}

public boolean deleteexercise(long rowId) {
    return database.delete(TABLE_EXERCISE, EXERCISE_ID + "=" + rowId, null) > 0;
}

public XYMultipleSeriesDataset getFatDataset() {

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    Cursor c = database.rawQuery(
            "select * from dailystats order by daily_ID desc LIMIT 7;",
            null);
    float i = 1.0f;

    c.moveToFirst();
    XYSeries seriesFat = new XYSeries("Fat");
    while (!c.isAfterLast()) {
        seriesFat.add(i++, c.getDouble(2));

        c.moveToNext();
    }
    dataset.addSeries(seriesFat);
    return dataset;
}

public XYMultipleSeriesDataset getProtDataset() {

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    Cursor c = database.rawQuery(
            "select * from dailystats order by daily_ID desc LIMIT 7;",
            null);

    float i = 1.0f;
    c.moveToFirst();
    XYSeries seriesProtein = new XYSeries("Protein");
    while (!c.isAfterLast()) {

        seriesProtein.add(i++, c.getDouble(3));

        c.moveToNext();
    }
    dataset.addSeries(seriesProtein);
    return dataset;

}

public XYMultipleSeriesDataset getCarbsDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    Cursor c = database.rawQuery(
            "select * from dailystats order by daily_ID desc LIMIT 7;",
            null);
    float i = 1.0f;

    c.moveToFirst();
    XYSeries seriesCarbs = new XYSeries("Carbs");
    while (!c.isAfterLast()) {

        seriesCarbs.add(i++, c.getDouble(4));

        c.moveToNext();
    }
    dataset.addSeries(seriesCarbs);
    return dataset;
}

public void clearDailyStats() {
     database.execSQL("delete from dailystats");
     Log.d("db", "lol");
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:08:19.133

从另一个答案抄袭，[这个例子](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)展示了一种快速而肮脏的方法来解决你的问题。

另外一点，您的一些代码可能会简化如下：

```
public float sumProteins(String[] items) {
    float sum = .0f;
    for (int i = 0; i < items.length; i++) {
        Cursor c = database.rawQuery(
                "select SUM(food_protein) from food where food_name='"
                        + items[i] + "'", null);
        if (c.moveToFirst()) {
            sum += c.getFloat(0);
        }
    }
    return sum;
} 
```

您可以通过构建一个查询字符串来进一步改进代码，`select SUM(food_protein ) from food where food_name=items[0] OR food_name=items[1] OR ...`这样您只需要执行一个查询。

还有，`carbs`不是`crabs`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:54:24.517

您也可以将它放在 /res/raw 文件夹中，并在您的应用程序第一次启动时将其复制过来。

# javascript - 为什么地图（api v3）拖动后没有变化？

> ID：10525354
> 
> 赞同：0
> 
> 时间：2012-05-09T23:03:32.237
> 
> 标签：javascript, html, windows-phone-7, google-maps, google-maps-api-3

我正在使用我的谷歌地图应用程序。当我开发它时，我意识到我的应用程序没有按预期工作。

当我将地图上的光标拖出地图边界时，地图不会更改为新地图。就像拖动静态图片一样。它没有改变。

请有人帮助我。

**更新（添加代码）：**

```
var map;
function initialize() {
    var myOptions = { 
        zoom: 15,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP 
    }; 
    map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);    
    directionsDisplay.setMap(map); 
    defaultSettings(); 
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:15:08.933

如果您单击以抓取地图，则 Google 地图将平移，将光标拖动到*仍在*地图内的新位置，然后释放按钮。如果您在地图内开始拖动，它不会平移，但随后拖动到地图外的位置。

# android - TextView not showing during asynctask

> ID：10525359
> 
> 赞同：0
> 
> 时间：2012-05-09T23:03:50.123
> 
> 标签：android, android-asynctask, android-softkeyboard

I have a search function when the user types something in an input and presses enter, an asynctask will fire off to retrieve the results. I want my textview (visibility=gone) which says "Loading" to be displayed before/while the asynctask is running. However, it only displays the loading text for a second, before showing the results in postExecute. So during the few seconds the asynctask is running, I do not see a loading text. Does anyone know why?

As you can see in my code, I have set the loading text to be visible before the asynctask runs and during preExecute in the asynctask, and neither solves the problem.

edit is my EditText, retrieving is my "loading" TextView

Here is my EditText keylistener:

```
edit.setOnKeyListener(new OnKeyListener() {

            public boolean onKey(View v, int keyCode, KeyEvent event) {

                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    switch (keyCode) {
                    case KeyEvent.KEYCODE_ENTER:
                        retrieving.setVisibility(View.VISIBLE);

                        SearchTask task = (SearchTask) new SearchTask(edit,retrieving);
                        task.execute(edit.getText().toString());

                        try {
                            task.get();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        } catch (ExecutionException e) {
                            e.printStackTrace();
                        }

                        break;
                    }
                }
                return false;
            }
        }); 
```

Here is the asynctask:

public class SearchTask extends AsyncTask {

```
private EditText edit;
private TextView retrieving;

public SearchTask(EditText edit,TextView retreiving, ) {
    this.edit = edit;
    this.retrieving = retreiving;
}

@Override
protected void onPreExecute() {
    InputMethodManager imm = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(edit.getWindowToken(), 0);
    retrieving.setVisibility(View.VISIBLE);
}

@Override
protected Playlist doInBackground(String... params) {

   //download and parse xml
}

@Override
protected void onPostExecute(Playlist playlist) {

    retrieving.setVisibility(View.GONE);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:05:39.930

OK I read your code further and I see the problem. Your `task.get()` command is locking up your UI. Therefore your onPreExecute never has a change to run, before getting blocked by task.get().

You should elminate that block of code entirely and do anything that needs to be done in the onPostExecute() method of your async task.

For example:

```
@Override
protected void onPostExecute(Playlist playlist) {

    retrieving.setVisibility(View.GONE);
    // do something with playist here. Play store it, etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:20:07.377

after `retrieving.setVisibility(View.VISIBLE);`

type `retrieving.invalidate();`

This tells the ui to redraw the view

If for some reason that doesn't work type:

```
(new Handler()).post (new Runnable() { public void run() { retrieving.invalidate(); } }); 
```

Lastly if the above doesn't work try:

```
(new Handler()).post (new Runnable() { public void run() { retrieving.setVisibility(View.VISIBLE); } }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:30:09.227

Why arent you updating your UI related stuff by calling publishProgress() after you have completed your background job?

In that way it's assured that you call the UI thread in proper way and rearrange your views properly.

Something like this

```
@Override
protected Playlist doInBackground(String... params) {

//download and parse xml
publishProgress();

}

protected void onProgressUpdate(Integer... progress) {
    //Do your UI Related Stuff Here
} 
```

# ios - iOS 5 XCODE 4.3.2 故事板。如何在现有表视图之前插入新视图？

> ID：10525362
> 
> 赞同：0
> 
> 时间：2012-05-09T23:04:15.757
> 
> 标签：ios, xcode, uiviewcontroller, storyboard, tableview

首先，我对 iOS 和 Xcode 真的很陌生。我已经完成了几个演示，并在开发站点上阅读了很多内容。

我当前的应用程序以导航控制器 > 表格视图控制器（主视图）> 详细视图开始。这是表格视图中的一个基本菜单，可以深入到显示图片、价格、描述等的项目详细信息。我（主要）遵循了 iOS 开发库“你的第二个 iOS 应用程序”中的教程[https://developer.apple.com /library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1) 此外，我确实对布局和属性进行了一些实现更改，但是在最后它完美地运行。

现在，事后，我决定我不喜欢应用程序的入口点是表格视图。相反，我更喜欢使用其他一些按钮进入视图控制器，其中一个按钮会将您带到菜单。

我的问题如下；我删除了导航控制器和表格视图之间的关系“根视图控制器”，然后我将它从导航控制器重新连接到我的新视图。我认为将带有 push segue 的按钮链接到旧表视图。现在应用程序仍然可以正常构建，但是它在运行时崩溃并出现以下错误“-[UIViewController setDataController:]: unrecognized selector sent to instance 0x6a6ed60 2012-05-09 16:51:28.618 [16513:f803] *** Terminating app due to未捕获的异常 'NSInvalidArgumentException'，原因：'-[UIViewController setDataController:]：无法识别的选择器发送到实例 0x6a6ed60' ***第一次抛出调用堆栈：“

看来二传手得到了一些不好的数据。所以我猜这是旧的rootview无效的问题，我真的没有足够的知识来解决这个问题。请帮忙。

抱歉，没有代表张贴图片，如果您需要一张，请告诉我，我会在某处托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:07:05.330

该错误告诉您作为初始屏幕的 UIViewController 不知道 setDataController 的含义。您可以通过子类化 UIViewController（称为 FirstViewController 或其他名称）然后将初始视图控制器的类设置为情节提要中的该子类来解决此问题。然后，在标题中，给您的 FirstViewController 一个 property `@property (nonatomic, strong) DataController *dataController`。可能需要更多步骤才能启动并运行它，但主要是您应该使用 UIViewController 的子类，而不是类本身的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:19:23.650

返回到您的表格视图作为根的最后一个版本。只需在故事板上拖动一个新的 viecontroller 即可。然后你会看到一个指向表格视图的箭头，将该箭头拖到新的视图控制器上。

# validation - symfony2 表单验证表单构建器和自定义表单类型

> ID：10525364
> 
> 赞同：0
> 
> 时间：2012-05-09T23:04:35.880
> 
> 标签：validation, symfony

我正在创建一个具有自定义表单类型的表单。

这是我的主要形式：

```
public function buildForm(FormBuilder $builder, array $options) {

    $builder->add('area', new AreaSelectType($this->em, true, true, $this->organizercountry), array('selectedArea'  => null,'label' => 'City'));        
    $builder->add('location', new LocationAutocompleteType('#steptwo_location_autocomplete', '#steptwo_location_hidden', '#steptwo_area_pkid'));                        
}

public function getDefaultOptions(array $options)
{

    $collectionConstraint = new Collection(array(            
        'area' => new NotNull(array('message' => 'nicht leer')),            
        'location' => new NotNull(array('message' => 'nicht leer'))            
    ));

    return array('validation_constraint' => $collectionConstraint);                
} 
```

这是 LocationAutocompleteType：

```
public function buildForm(FormBuilder $builder, array $options) {

    $builder->setAttribute('source', $options['source']);                        
    $builder->add('autocomplete', 'text', array('label' => false, 'attr' => array('autocomplete' => 'off')));
    $builder->add('hidden', 'hidden', array('label' => false, 'attr' => array('autocomplete' => 'off')));        
}

public function getDefaultOptions(array $options) {

    $collectionConstraint = new Collection(array(            
        'hidden' => new NotNull(array('message' => 'nicht leer')),                        
    ));

    return array('validation_constraint' => $collectionConstraint, 'source' => 'organizer.ajax.location');                                
} 
```

我所做的一切，自定义表单类型都没有经过验证。我必须怎么做才能正确验证表单类型并通过父表单中的位置属性获取错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:39:49.353

在`getDefaultOptions`主表单的方法中，您必须添加`'cascade_validation' => true`到返回的数组以启用对子表单的验证。这是最近的更改，尚未在文档中更新。

# delphi - 如何同步2个TTreeviews的滚动？

> ID：10525367
> 
> 赞同：6
> 
> 时间：2012-05-09T23:05:03.123
> 
> 标签：delphi, treeview, scrollbar, synchronized

我有**2 个 TTreeviews**。它们都具有相同数量的项目。我希望能够**同步**他们的**滚动条**......如果我移动其中一个，其他移动也......

对于水平，它按我的预期工作......对于垂直，如果我使用滚动条的箭头，它会工作，但如果我**拖动拇指**或使用**鼠标滚轮**则不会......

这是我为说明我的问题而编写的示例：

```
unit main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, ComCtrls, StrUtils;

type
  TForm1 = class(TForm)
    tv1: TTreeView;
    tv2: TTreeView;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
    originalTv1WindowProc : TWndMethod;
    originalTv2WindowProc : TWndMethod;
    procedure Tv1WindowProc (var Msg : TMessage);
    procedure Tv2WindowProc (var Msg : TMessage);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
begin
  for i := 0 to 10 do
  begin
    tv1.Items.AddChild(nil, DupeString('A', 20) + IntToStr(i));
    tv2.Items.AddChild(nil, DupeString('B', 20) + IntToStr(i));
  end;

  originalTv1WindowProc := tv1.WindowProc;
  tv1.WindowProc        := Tv1WindowProc;
  originalTv2WindowProc := tv2.WindowProc;
  tv2.WindowProc        := Tv2WindowProc;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  tv1.WindowProc := originalTv1WindowProc;
  tv2.WindowProc := originalTv2WindowProc;

  originalTv1WindowProc := nil;
  originalTv2WindowProc := nil;
end;

procedure TForm1.Tv1WindowProc(var Msg: TMessage);
begin
  originalTv1WindowProc(Msg);
  if ((Msg.Msg = WM_VSCROLL)
   or (Msg.Msg = WM_HSCROLL)
   or (Msg.msg = WM_Mousewheel)) then
  begin
//    tv2.Perform(Msg.Msg, Msg.wparam, Msg.lparam);
    originalTv2WindowProc(Msg);
  end;
end;

procedure TForm1.Tv2WindowProc(var Msg: TMessage);
begin
  originalTv2WindowProc(Msg);
  if ((Msg.Msg = WM_VSCROLL)
   or (Msg.Msg = WM_HSCROLL)
   or (Msg.msg = WM_Mousewheel)) then
  begin
//    tv1.Perform(Msg.Msg, Msg.wparam, Msg.lparam);
    originalTv1WindowProc(Msg);
  end;
end;

end. 
```

DFM：

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 113
  ClientWidth = 274
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  OnDestroy = FormDestroy
  PixelsPerInch = 96
  TextHeight = 13
  object tv1: TTreeView
    Left = 8
    Top = 8
    Width = 121
    Height = 97
    Indent = 19
    TabOrder = 0
  end
  object tv2: TTreeView
    Left = 144
    Top = 8
    Width = 121
    Height = 97
    Indent = 19
    TabOrder = 1
  end
end 
```

![在此处输入图像描述](../Images/615215d64f79bad837500d06ae504e3b.png)

我也尝试从 TTreeview 创建一个子类，但没有成功（相同的行为）......我尝试使用 TMemo，它按预期工作......

我错过了什么？

干杯，

W。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T23:57:29.393

首先，一个有趣的测试：取消选中项目选项中的“启用运行时主题”，您会看到两个树视图将同步滚动。这向我们表明，树视图控件的默认窗口过程在不同版本的 comctl32.dll 中实现不同。看起来，comctl32 v6 中的实现在垂直滚动时特别不同。

无论如何，似乎仅对于垂直滚动，控件会查找拇指位置，然后相应地调整窗口内容。当您将 a 路由`WM_VSCROLL`到相邻的树视图时，它会查看其拇指的位置，并且由于它没有更改，因此决定无事可做（我们只更改了我们正在拖动的那个的拇指位置）。

因此，要使其正常工作，请在发送`WM_VSCROLL`. tv1 的修改过程如下所示：

```
procedure TForm1.Tv1WindowProc(var Msg: TMessage);
begin
  originalTv1WindowProc(Msg);

  if Msg.Msg = WM_VSCROLL then begin
    if Msg.WParamLo = SB_THUMBTRACK then
      SetScrollPos(tv2.Handle, SB_VERT, Msg.WParamHi, False);
  end;

  if ((Msg.Msg = WM_VSCROLL)
   or (Msg.Msg = WM_HSCROLL)
   or (Msg.msg = WM_Mousewheel)) then
  begin
//    tv2.Perform(Msg.Msg, Msg.wparam, Msg.lparam);
    originalTv2WindowProc(Msg);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:20:47.310

**更新：**

我在[法语论坛](http://www.developpez.net/forums/d1219431/environnements-developpement/delphi/debutant/synchroniser-2-treeviews/)上得到的另一个答案，来自[ShaiLeTroll](http://www.developpez.net/forums/u107482/shailetroll/)：

该解决方案完美运行.. 我总是同步：箭头，拇指，水平，垂直，鼠标滚轮！

这是更新的代码（**混合了两种解决方案：拇指和鼠标滚轮**）：

```
unit main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, ComCtrls, StrUtils;

type
  TForm1 = class(TForm)
    tv1: TTreeView;
    tv2: TTreeView;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
    originalTv1WindowProc : TWndMethod;
    originalTv2WindowProc : TWndMethod;

    sender: TTreeView;

    procedure Tv1WindowProc (var Msg : TMessage);
    procedure Tv2WindowProc (var Msg : TMessage);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
  tn: TTreeNode;
begin
  for i := 0 to 20 do
  begin
    tn := tv1.Items.AddChild(nil, DupeString('A', 20) + IntToStr(i));
    tv1.Items.AddChild(tn, DupeString('C', 20) + IntToStr(i));
    tv1.Items.AddChild(tn, DupeString('C', 20) + IntToStr(i));
    tn := tv2.Items.AddChild(nil, DupeString('B', 20) + IntToStr(i));
    tv2.Items.AddChild(tn, DupeString('D', 20) + IntToStr(i));
    tv2.Items.AddChild(tn, DupeString('D', 20) + IntToStr(i));
  end;

  originalTv1WindowProc := tv1.WindowProc;
  tv1.WindowProc        := Tv1WindowProc;
  originalTv2WindowProc := tv2.WindowProc;
  tv2.WindowProc        := Tv2WindowProc;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  tv1.WindowProc        := originalTv1WindowProc;
  tv2.WindowProc        := originalTv2WindowProc;
  originalTv1WindowProc := nil;
  originalTv2WindowProc := nil;
end;

procedure TForm1.Tv1WindowProc(var Msg: TMessage);
begin
  originalTv1WindowProc(Msg);

  if Msg.Msg = WM_VSCROLL then
  begin
    if Msg.WParamLo = SB_THUMBTRACK then
    begin
      SetScrollPos(tv2.Handle, SB_VERT, Msg.WParamHi, False);
    end;
  end;

  if (sender <> tv2) and
    ((Msg.Msg = WM_VSCROLL) or (Msg.Msg = WM_HSCROLL) or (Msg.Msg = WM_MOUSEWHEEL)) then
  begin
    sender := tv1;
    tv2.Perform(Msg.Msg, Msg.wparam, Msg.lparam);
    sender := nil;
  end;
end;

procedure TForm1.Tv2WindowProc(var Msg: TMessage);
begin
  originalTv2WindowProc(Msg);

  if Msg.Msg = WM_VSCROLL then
  begin
    if Msg.WParamLo = SB_THUMBTRACK then
    begin
      SetScrollPos(tv1.Handle, SB_VERT, Msg.WParamHi, False);
    end;
  end;

  if (sender <> tv1) and ((Msg.Msg = WM_VSCROLL) or (Msg.Msg = WM_HSCROLL) or (Msg.Msg = WM_MOUSEWHEEL)) then
  begin
    sender := tv2;
    tv1.Perform(Msg.Msg, Msg.wparam, Msg.lparam);
    sender := nil;
  end;
end;

end. 
```

# jquery - 需要选择标签内的所有类

> ID：10525374
> 
> 赞同：2
> 
> 时间：2012-05-09T23:05:50.640
> 
> 标签：jquery

我的问题是我只需要在点击事件上隐藏 div 中的类。现在我的代码看起来像这样。

```
<section>
   <h2>Section Title</h2>
   <div class="inner_wrapper">content</div>
   <div class="inner_wrapper">content</div>
   <div class="inner_wrapper">content</div>
</section>

<section>
   <h2>Section 2 Title</h2>
   <div class="inner_wrapper">content</div>
   <div class="inner_wrapper">content</div>
   <div class="inner_wrapper">content</div>
</section> 
```

等等。当我单击 h2 时，我只想隐藏同一部分内的 inner_wrapper div。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:07:04.107

尝试这个：

```
$("h2").on("click", function() {
    $(this).siblings(".inner_wrapper").hide();
}); 
```

**演示：http:** [//jsfiddle.net/VLRNX/](http://jsfiddle.net/VLRNX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:07:30.203

```
$('h2').click(function() {
    $(this).siblings('.inner_wrapper').hide();
}); 
```

如果您有兴趣在再次单击 h2 时重新显示内容，您可以执行以下操作：

```
$('h2').click(function() {
    $(this).siblings('.inner_wrapper').toggle();
}); 
```

# c++ - 影响窗口标题的 C++ 指针问题

> ID：10525377
> 
> 赞同：3
> 
> 时间：2012-05-09T23:05:54.167
> 
> 标签：c++, winapi, pointers, title

我有这个让我发疯的问题，所以我在这里寻求您的帮助。我有这段代码应该创建一个简单的窗口并显示它：

```
void ShowMainWindow() {
WNDCLASSEX main_window_class;                                                                // New window class for the splash window    //

main_window_class.cbSize         = sizeof(WNDCLASSEX);                                       // Set size of the splash window class       //
main_window_class.style          = CS_PARENTDC|CS_HREDRAW|CS_VREDRAW|CS_DBLCLKS;             // Main window class style                   //
main_window_class.lpfnWndProc    = MainProc;                                                 // Pointer to the main window procedure      //
main_window_class.cbClsExtra     = 0;                                                        // No extra bytes after class structure      //
main_window_class.cbWndExtra     = 0;                                                        // No extra bytes after window's instance    //
main_window_class.hInstance      = Instance;                                                 // Set instance of the window                //
main_window_class.hIcon          = LoadIcon(Instance, MAKEINTRESOURCE(MICON));               // Executable's icon                         //
main_window_class.hCursor        = LoadCursor(NULL, IDC_ARROW);                              // Main window's default cursor              //
main_window_class.hbrBackground  = HBRUSH(COLOR_WINDOW + 1);                                 // Main window's default background          //
main_window_class.lpszClassName  = L"MyAppClass";                                            // Main window's class name                  //
main_window_class.hIconSm        = LoadIcon(Instance, MAKEINTRESOURCE(SICON));               // Application's small icon                  //

if (!RegisterClassEx(&main_window_class)) {                                                  // If the class was not registered           //
    MessageBox(NULL, L"RegisterClassEx", L"Error", MB_OK|MB_ICONERROR);
}

MainWindow = CreateWindowEx (                                                                // Create the main window                    //
                            WS_EX_APPWINDOW,                                                 // Extended style to support transparency    //
                            main_window_class.lpszClassName,                                 // Assign the anterior class name            //
                            (WCHAR*)"App Title",                                           // Main window's title                       //
                            WS_OVERLAPPEDWINDOW|WS_CLIPCHILDREN|WS_CLIPSIBLINGS,             // No border window                          //
                            CW_USEDEFAULT,                                                   // Default left position for the moment      //
                            CW_USEDEFAULT,                                                   // Default top position for the moment       //
                            600,                                                             // Main window width                         //
                            400,                                                             // Main window height                        //
                            NULL,                                                            // No parent                                 //
                            NULL,                                                            // No ID                                     //
                            Instance,                                                        // Assign to main instance                   //
                            NULL                                                             // No additional data needed                 //
                            );

if (!MainWindow) {                                                                           // If the window was not created             //
    MessageBox(NULL, L"CreateWindowEx", L"Error", MB_OK|MB_ICONERROR);
}

long Style = GetWindowLong(MainWindow, GWL_STYLE);
Style &= ~WS_MAXIMIZEBOX;
SetWindowLong(MainWindow, GWL_STYLE, Style);

ShowWindow(MainWindow, SW_SHOWNORMAL);                                                       // Display main window at normal size        //
UpdateWindow(MainWindow);                                                                    // Update the window's client area           //} 
```

我的问题是，当窗口打开时，窗口的标题不是“App Title”而是一些奇怪的字符加上“ *CreateWindowEx* ”。太奇怪了。就像它将 MessageBox 函数中的文本分配给窗口的标题一样。我必须指定我使用 UNICODE 编码。无论如何，它以前从未发生在我身上，我只是不知道可能出了什么问题。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T23:10:30.883

`(WCHAR*)"App Title"`是错的。`"App Title"`是一个 ANSI 字符串，而您的项目默认设置为对 Windows API 使用 Unicode，因此`CreateWindowEx`需要一个`WCHAR *`，即 Unicode 字符串。

因此，要传递的正确参数是`L"App Title"`; 需要`L`前缀才能使编译器提供宽（~Unicode）字符串文字而不是“常规”字符串文字。

我想您尝试使用“常规”字符串文字，编译器告诉您它无法将其转换为`const WCHAR_T *`，您只需在它前面加上一个演员表。***这是解决此类问题的错误方法***；[如果您让编译器抱怨指针类型，几乎总是*您错了*](http://blogs.msdn.com/b/oldnewthing/archive/2009/10/23/9911891.aspx)，并且只是强制转换指针以使编译器关闭并不能解决问题。盲目地转换指针消除了类型系统的“安全网”，并允许您将错误的数据传递给函数。

在这种特殊情况下，您的 ANSI 字符串的字节（以及在堆栈上找到的其他数据）被解释为 Unicode，这导致标题栏中出现垃圾。

再次：在铸造之前三思而后行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:08:57.903

您不能将 a`const char*`转换为 a `WCHAR*`。

您需要替换`(WCHAR*)"App Title"`为`L"App Title"`.

# eclipse - 更新 Eclipse 插件时遇到问题

> ID：10525378
> 
> 赞同：0
> 
> 时间：2012-05-09T23:06:21.450
> 
> 标签：eclipse, eclipse-plugin, mylyn

我刚刚安装了一些额外的存储库，现在我正在尝试检查更新，但我不断收到一个我似乎无法过去的错误，并且在谷歌中找不到任何相关信息。

```
Cannot complete the install because one or more required items could not be found.
Software being installed: EGit Mylyn 1.3.0.201202151440-r (org.eclipse.egit.mylyn.feature.group 1.3.0.201202151440-r)
Missing requirement: EGit Mylyn 1.3.0.201202151440-r (org.eclipse.egit.mylyn.feature.group 1.3.0.201202151440-r) requires 'org.eclipse.mylyn.team_feature.feature.group 3.5.0' but it could not be found 
```

我在这里有点茫然。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:50:14.353

您缺少 Mylyn 功能。确保您的软件更新站点列表中有[Mylyn 更新站点](http://www.eclipse.org/mylyn/downloads/)，您应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:11:04.037

过去我与 Mylyn 有类似的问题，只能通过**首先卸载**所有 Mylyn 插件，然后更新其余插件并**再次安装所有 Mylyn 插件**来解决（这没关系，因为您的设置保持不变）。

@Francis：这不是由于缺少更新站点造成的。我认为根本问题更多的是大多数 Mylyn 连接器对其“主机”插件使用非常狭窄的版本范围并更新不同 Mylyn 连接器的“混合”然后可以让 P2 相信无法完成更新，尽管只是更新*所有*到最新版本是一个有效的解决方案。不知道该怪Mylyn还是P2……

# javascript - CoffeeScript/Backbone/Marionette - 教程示例转换和范围问题

> ID：10525379
> 
> 赞同：2
> 
> 时间：2012-05-09T23:06:34.073
> 
> 标签：javascript, backbone.js, coffeescript, marionette

我正在尝试在 CoffeeScript 中创建此示例的基本版本：http: [//davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/)。所有依赖项都按照我编写它们的顺序（在正文中）声明为 .coffee 文件，并且 jQuery + Underscore + Backbone + Marionette 在头部。

我有一个模型，**thing.coffee**

```
$ ->

  console.log 'load model'

  class Thing extends Backbone.Model

    defaults:
      myValue: null

   initialize: ->
     console.log 'new thing'

  window.Thing = Thing 
```

我的第一个问题是范围界定：如果我不声明`window.Thing`，下一个文件（的集合`Things`，找不到模型`Thing`等等。我在那里做错了什么？

我有一个收藏，**things.coffee**

```
$ ->

  console.log 'load collection'

  class Things extends Backbone.Collection

    model: Thing

  window.Things = Things 
```

我有一个木偶视图，**thing_view.coffee**

```
$ ->

  console.log 'load composite model view'

  ThingView = Backbone.Marionette.ItemView.extend(
    template: '#template-thing'
    tagName: 'tr'
  )

  window.ThingView = ThingView 
```

我有一个木偶视图，**things_view.coffee**

```
$ ->

  console.log 'load composite collection view'

  ThingsView = Backbone.Marionette.CompositeView.extend(
    tagName:  'table'
    id: 'things'
    template: '#template-things'
    itemView: ThingView
    appendHtml: (collectionView, itemView) ->
      collectionView.$('tbody').append itemView.el
  )

  window.ThingsView = ThingsView 
```

我有一个应用程序**myapp.coffee**

```
$ ->

  console.log 'load app'

  # Load default data
  thingsCollection = new Things([ 
    new Thing(myValue: 'uno'), 
    new Thing(myValue: 'dos')
  ])

  data:
    thingsCollection: thingsCollection

  # Create application, specify default layouts
  MyApp = new Backbone.Marionette.Application()
  MyApp.addRegions singleRegion: '#content'

  # On application init...
  MyApp.addInitializer (data) ->
    console.log 'Init application...'
    thingsView = new ThingsView(collection: data.thingsCollection)
    MyApp.singleRegion.show data.thingsView

  # Start application
  MyApp.start data 
```

我的 html 文件如下所示：

```
<div id="content">
    <script type="text/template" id="template-things">
       <thead>
          <tr class='header'>
             <th>myValue</th>
          </tr>
      </thead>
      <tbody>
      </tbody>
    </script>
    <script type="text/template" id="template-thing">
       <td><%= myValue %></td>
    </script>
</div> 
```

继`console.log`：

```
load model
load collection
load composite model view
composite collection view
load app
Init application...
Uncaught TypeError: Cannot call method 'render' of undefined 
```

所以，不用说我对发生了什么感到困惑——我敢肯定这里有很多问题，所以请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:48:42.247

这`window.Thing`件事是 Coffeescript 避免全局命名空间污染的副产品。解决这个问题的惯用方法是[使用`App`命名空间](http://ricostacruz.com/backbone-patterns/#namespace_convention)。

仅在 DOM 加载时初始化您的类是[Backbone 反模式](http://ricostacruz.com/backbone-patterns/#abuse)。如果您命名您的类，那么您只需要确保以正确的顺序加载它们（项目视图在集合视图之前）并且它们可以立即创建而不是在页面加载之后创建。

你能告诉我们`Uncaught TypeError`发生的地方吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:49:20.827

> if I don't declare `window.Thing`, the next file (the collection of `Things`, can't find the model `Thing`, and so on. What am I doing wrong there?

The CoffeeScript compiler wraps each file in a self-executing function so `Thing` is local to the wrapper unless you forcibly globalize it by putting it in `window`.

I think your real problem is right here:

```
MyApp.addInitializer (data) ->
  console.log 'Init application...'
  thingsView = new ThingsView(collection: data.thingsCollection)
  MyApp.singleRegion.show data.thingsView 
```

You create a `ThingsView` and store it in `thingsView`. But then you try to pass `data.thingsView` to `MyApp.singleRegion.show` but there's nothing in `data.thingsView` so you get a complaint when something inside Marionette tries to `view.render()`. I think you want this:

```
 thingsView = new ThingsView(collection: data.thingsCollection)
  MyApp.singleRegion.show thingsView 
```

or this:

```
 data.thingsView = new ThingsView(collection: data.thingsCollection)
  MyApp.singleRegion.show data.thingsView 
```

depending on what this `data` object is all about.

# c# - 限制 ASP.NET 框架功能的 C# 代码

> ID：10525381
> 
> 赞同：0
> 
> 时间：2012-05-09T23:06:43.930
> 
> 标签：c#, asp.net, asp.net-mvc-3, security

是否可以限制某些 .NET 功能/类的代码访问？

例如，我的 MVC CMS 有插件模块。我不希望第 3 方模块能够直接使用 File 类。我想将它包装在一个 API 中，以便模块只能访问它自己指定的“根”文件夹（沙箱）中的文件。否则，模块将拥有对整个服务器的文件访问权限，包括 CMS 系统文件。

有没有办法限制某些命名空间使用框架的特定功能？还是我应该采取不同的方法？

**给你一个概述：**

CMS 命名空间是`MyCms`

所有模块都采用命名空间`MyCms.Module.xxxxx`

模块只是标准 MVC 结构，它们被带入名称 main MVC 命名空间，并且自动设置路由以将请求路由到模块控制器。

因此，这些模块具有对 ASP.NET 框架的默认访问权限。如果可能的话，我希望能够限制 MyCms.Module.xxxxx 命名空间能够做某些事情。

我在这里采取了错误的方法吗？老实说，我并不热衷于更改基础架构，但如果我不能正确保护主要 CMS 基础架构免受顽皮模块的影响，我可能会被迫这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:27:23.890

你是要提供你的第 3 方源代码还是只提供一个已编译的 API dll？如果是以后，那么设置一个界面并只公开您希望您的第 3 方使用的方法，这听起来像是对我的回答。当然，它也严重依赖于代码库的架构师。

或者简单地向您的第 3 方提供指定的文件也可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:17:45.590

是的，.net/ 公共语言运行时支持广泛的权限限制和自定义，您可以针对哪些代码可以执行哪些操作进行设置。

[这](http://msdn.microsoft.com/en-us/library/xbk2s3fa%28v=vs.91%29.aspx)是 .net 4 之前它如何工作的概述

[http://msdn.microsoft.com/en-us/library/.aspx](http://msdn.microsoft.com/en-us/library/.aspx)

[这](http://msdn.microsoft.com/en-us/library/dd233103.aspx)就是它现在的工作方式

这东西有点复杂，我使用它的工作仅限于为我必须编写的测试用例传递其中的一些，但它的编写是为了提供您所寻求的功能。

# jquery - Jquery将隐藏的div加载到弹出的div中

> ID：10525383
> 
> 赞同：0
> 
> 时间：2012-05-09T23:06:52.403
> 
> 标签：jquery, css, django, load

我有以下 django 代码循环遍历我的所有对象并创建一个我希望在弹出容器中显示的隐藏 div。

我的弹出容器运行良好，我只是不知道如何做三件事：

1.  我想隐藏容器中的任何内容
2.  然后我想将内容加载到容器中
3.  然后我想将内容的显示设置为在弹出窗口中加载后阻止

**django代码**

```
 {% for recipe in recipe_list %}
            <div class="recipe">
                <div class="button">
                      click me to load recipe content
                    </div>

            <div id="recipepopup" style="display:none;">
                       //content
            </div>
    {% endfor %}

    <div id = "popupdiv">
    <div id = "content_to_hide">
     //content to hide on recipepopup load
    </div>
    </div> 
```

**以及点击的Javascript：**

```
<script type="text/javascript">
  $(document).ready(function(){
    $(".button").click(function(){
      // hide current content in popupdiv 
      // then load recipepopup then set display
      // of recipepopup to block  
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:29:47.427

```
$("#content_to_hide").hide();
var popup = $("#recipepopup");
$("#popupdiv").append(popup);
popup.show(); 
```

只需根据您的需要快速将它们组合在一起。应该进入按钮点击代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:40:39.113

单线就可以了！

```
$("#popupdiv").children(':first').hide().end().append($('#recipepopup')).find('#recipepopup').css('display', 'block'); 
```

# objective-c - 通过按钮加载的 PickerView 点击太小

> ID：10525385
> 
> 赞同：2
> 
> 时间：2012-05-09T23:06:56.460
> 
> 标签：objective-c, ipad, uipickerview, uipopovercontroller, uiactionsheet

我正在构建一个 iPad 应用程序，我希望在用户按下按钮（常规按钮，而不是 ToolBarItem）时弹出一个 uipickerview。我意识到通常你会从工具栏上做弹出框类型的东西，但在这种情况下，我需要它发生在标准的按钮点击上。我做了很多搜索，这是我能够想出的代码（这是按钮单击的代码）：

```
- (IBAction)showTagPicker:(id)sender {
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select a Category" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
CGRect frame = CGRectMake(0, 40, 320, 450);

PCCategory *categories = [[PCCategory alloc] init];
UIPickerView *picker = [[UIPickerView alloc] initWithFrame:frame];
picker.delegate = categories;
picker.dataSource = categories;

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 464)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];
UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace 
                                                      target:self 
                                                      action:nil];
[barItems addObject:flexSpace];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                                                       target:self 
                                                       action:@selector(tagSelected)];
[barItems addObject:doneButton];

[pickerToolbar setItems:barItems animated:YES];
[actionSheet addSubview:pickerToolbar];
[actionSheet addSubview:picker];
[actionSheet showInView:self.view];
[actionSheet setBounds:CGRectMake(0, 0, 320, 464)];

} 
```

这似乎确实是在弹出窗口中创建选择器控件，但是该控件非常小（仅显示大约 1 行），并且我显示的工具栏项目都没有呈现。

[看图片](http://i.imgur.com/RCLKC.png)

如何控制大小？我尝试调整正在创建的两个 CGRect 对象的值，但这似乎没有太大区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:38:30.697

在那种情况下，我总是使用 UIPopoverController。您可以在 IB 中构建一个视图，其中包含您想要的大小的选择器，然后将此视图添加到 popoverController 并从您想要的任何内容（文本字段、工具栏等）呈现它。

UPD：示例代码

```
UIViewController *vc = [UIViewController new];
vc.view = yourview; //With whatever you want in it
vc.contentSizeForViewInPopover = yourview.frame.size;
vc.navigationItem.title = @"Title"; // If you want one
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:vc];
popover presentPopoverFromRect:rect inView: self.view premittedArrowDirections:UIPopoverArrowDirectionAny animated: YES]; 
//rect is a frame from which you would like to present your popover. For example:  yourUIButton.frame
if (yourview.hidden)
     [yourview setHidden:NO]; 
```

另一种解决方案是在 IB 中创建一个新的 UIViewController 并将其与 popover segue 链接，但我认为对于一个 pickerview 来说它很复杂。

# java - 为什么我在Eclipse中创建的项目是空的？

> ID：10525388
> 
> 赞同：-1
> 
> 时间：2012-05-09T23:07:46.477
> 
> 标签：java, eclipse

这是我第一次使用 Eclipse 3.3.2 在 Java 中制作应用程序。我转到 File -> New Java Project，并创建了一个名为“NewProject”的新项目。

在我的工作区中创建了一个名为“NewProject”的新文件夹，其中包含两个空文件夹：一个名为“src”，一个名为“bin”。然后我关闭 Eclipse 并尝试重新打开我新创建的“项目”。但是，我不能这样做。Eclipse 只是将项目文件夹视为任何其他文件夹。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:12:25.210

Java 源文件进入该`src`文件夹，Eclipse 不断将它们编译到该`bin`文件夹​​中。

由于您尚未创建任何源文件，因此您在项目中看不到任何内容。

# mysql - JOINed 查询中的 MySQL FORCE INDEX 位置

> ID：10525391
> 
> 赞同：0
> 
> 时间：2012-05-09T23:08:06.427
> 
> 标签：mysql, mysql-error-1064

我在让 MySQL 将 INDEX() 放在正确的字段上时遇到了一些麻烦。例如，我有一个查询看起来像这样：

```
SELECT m.id as mid,p.id as pid,po.* FROM m 
LEFT OUTER JOIN p ON p.mid = m.id AND p.uid = 2 
LEFT OUTER JOIN po ON po.mid = m.id AND po.uid = 2 
ORDER BY m.date,m.time 
```

我有以下索引：

*   日期
*   时间
*   p.mid
*   p.uid
*   po.mid
*   po.uid

但是，当我运行`EXPLAIN`查询时，没有任何键被拾取。我试图放入`FORCE INDEX`语句，但 MySQL 一直拒绝它们（说查询中有语法错误）。有任何想法吗？

**编辑**

这是`EXPLAIN`：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  m   ALL NULL    NULL    NULL    NULL    31  Using filesort
1   SIMPLE  p   ref mid,uid mid 5   db.m.id 1   
1   SIMPLE  po  ref uid,mid uid 5   const   1 
```

请注意， p 和 po 现在处理得很好，但 m 仍然没有。我刚刚为 m 添加了一个 INDEX(date, time)，结果还是一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:51:43.473

FORCE INDEX 通常用在表名之后，即

```
... FROM <table_name> FORCE INDEX (<index_name>) 
```

但我不建议使用它。如果您希望使用索引对其进行排序，您可以在 (m. `date`, m. `time`) 上创建复合索引 IDX_date_time。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:17:03.143

你需要有这样的索引：

1.  `(p.mid, p.uid)`- 复合一
2.  `(po.mid, po.uid)`- 另一种复合物
3.  `(m.date, m.time)`- 另一种复合物

PS：这个查询从每个表中选择了多少（百分比）行？如果值很大（超过 30%）——那么 mysql 不会故意使用索引

# jquery - 如何确定拖动事件相对于对象的开始位置

> ID：10525394
> 
> 赞同：1
> 
> 时间：2012-05-09T23:08:21.923
> 
> 标签：jquery, drag, crop

我有一个 100 x 100 像素的右上角和左下角图形，我用它来覆盖图像。这些代表裁剪标记。我有一个绑定到每个的拖动事件，可以让我拖动这些裁剪标记，然后调整图像大小。这一切都有效，但无论我点击角落图像的哪个位置，鼠标都会跳到图形左上角的左侧。由于图形是 100 x 100 像素，我可能点击了右下角。我希望鼠标（或手指）停留在最初单击（或触摸）的同一位置，而不是跳到左上角。查看事件返回的各种偏移量（或 this.offsetLeft、this.offsetTop）似乎都没有给我从指针结束位置到它开始位置的 x、y 偏移量。

有没有办法确定起点并保持拖动的接触点？

这是我的右上角/裁剪的拖动处理程序：

```
function ur_crop()
{
    $('#ur_corner').bind('drag', function (event) {
    event.preventDefault();
    curX = event.pageX; 
    curY = event.pageY; 
    offsetX = curX - ur_curX;
    offsetY = curY - ur_curY;
    var $this = $(this);
    $(this).css({
        left: curX + 'px', 
        top: curY + 'px' 
    });

    ur_curX = curX; // + offsetX;
    ur_curY = curY; // + offsetY;

}); 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:13:13.660

在选择角拖动以获取鼠标位置后，将 jQuery 的 mousemove 事件绑定在那里。

## [查看 jQuery 的 mousemove 文档](http://api.jquery.com/mousemove/)

# terminal - tmux: 窗格分割线显示终端之间的差异

> ID：10525400
> 
> 赞同：8
> 
> 时间：2012-05-09T23:08:41.933
> 
> 标签：terminal, tmux

我正在将终端应用程序从 OSX 的 Terminal.app 切换到 Google Chrome [Secure Shell app](https://chrome.google.com/webstore/detail/pnhechapfaindjhompbnflcldabbghjo/details)，并且 tmux 中窗口中窗格之间的分界线从一个终端更改为另一个。

在 Terminal.app 中，分界线就是这样，一行：

[![](../Images/71707eaf3f0eabfc0d6901ee46487e19.png)](https://imgur.com/lkNQk,aBNWo#0)

在 Secure Shell 中，分割线被渲染为一行`q`s：

[![](../Images/527d3133a3f16c7709ef26d72549eea0.png)](https://imgur.com/lkNQk,aBNWo#1)

我可以想到三种可能的情况：

1.  这是我可以在我的 shell 中修复的设置。
2.  这是我可以从 Secure Shell 的首选项中修复的设置。
3.  Secure Shell 的首选项尚不支持此设置。

但我不确定是哪个。如果是第 3 种情况，我很乐意破解它，但我不确定是什么负责显示 line vs `q`s，所以我无法立足开始谷歌搜索和学习需要做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:49:54.477

您的终端仿真器 (Google Chrome *Secure Shell* ) 不支持在您连接到（或启动）您的*tmux*会话时生效的 TERM 环境变量指定的 terminfo 数据库条目所宣传的备用字符集 (ASC) 功能。

Chromium 项目在 Chrome 应用程序使用的终端模拟器中存在字符集支持[问题。](http://code.google.com/p/chromium-os/issues/detail?id=26290)

* * *

Per the [VT100 User Guide, Table 3-9: Special Graphics Characters](https://vt100.net/docs/vt100-ug/chapter3.html#T3-9) , when the “special graphics set” is selected, `q`is used to draw “Horizo​​ntal line - Scan 5”.

在*terminfo*下，VT100 特殊图形字符作为备用字符集 (ACS) 功能的一部分提供；[*请参阅terminfo(5)*手册页](http://manpages.debian.net/cgi-bin/man.cgi?query=terminfo&sektion=5)的“线条图形”部分。

* * *

如果您使用*tmux* 1.4 或更高版本，并且 Google Chrome *Secure Shell*支持 UTF-8，那么您应该能够通过提供`-u`给您的*tmux*客户端（或者`UTF-8`在 LC_ALL、LC_CTYPE 或 LANG 中出现你运行一个*tmux*客户端）。

或者，您可以配置*tmux*以取消设置 ACS 相关的 terminfo 功能（在您的 中`~/.tmux.conf`）：

```
# Google Chrome Secure Shell does not (yet) support ACS; do not use it (for now).
set-option -ga terminal-overrides ',*:enacs@:smacs@:rmacs@:acsc@' 
```

*如果附加的客户端不支持 UTF-8，并且其 TERM 的 terminfo 数据库条目（由 调整）不宣传 ACS 功能，则*tmux*将回退到 ASCII 线图（例如`-`、`|`和）。`+``terminal-overrides`*

 *注意：在配置更改生效之前，您基本上需要重新启动*tmux服务器（退出所有会话）。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T08:28:27.400

我有同样的问题（腻子）并通过使用以下命令更改 LANG 环境变量来修复它

```
export LANG="en_US:en" 
```

然后我运行 tmux 并正确显示了行

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T03:16:33.680

Secure Shell 目前不做画线字符。他们将很快添加*

# objective-c - Objective-c - initWithCoder 和内存管理？

> ID：10525401
> 
> 赞同：0
> 
> 时间：2012-05-09T23:08:44.253
> 
> 标签：objective-c, ios, nskeyedarchiver, nscoding

我在 initWithCoder 方法中有泄漏。

unarchiveObjectWithData:cacheData 会返回一个自动释放的对象吗？谁负责释放 unarchiveObjectWithData:cacheData 返回的对象？

```
@implementation MyObject
@synthesize something = _something;

- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super init])
    {
         self.something = [aDecoder decodeObjectForKey:@"something"];
    }
}

- (void)dealloc
{
        self.something = nil;
        [super dealloc];
}

@end 
```

这是我从文件中读取对象的地方

```
MyObject *myObject = [NSKeyedUnarchiver unarchiveObjectWithData:cacheData]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:23:42.290

> unarchiveObjectWithData:cacheData 会返回一个自动释放的对象吗？谁负责释放 unarchiveObjectWithData:cacheData 返回的对象？

只记得**NARC**。如果您调用的方法以`new`、`alloc`、`retain`或开头`copy`，那么您拥有任何返回的对象并且必须释放它。如果没有，那么它是自动释放的。

# sql - 更改表 SQL 字符串 - 语法错误

> ID：10525415
> 
> 赞同：1
> 
> 时间：2012-05-09T23:09:53.947
> 
> 标签：sql, syntax-error, alter, oledbcommand

这是一个由两部分组成的问题，首先是 SQL 字符串

```
Dim Addcolumn As New OleDb.OleDbCommand("ALTER TABLE [" & TableName & "] ADD " & X & "", con)

    X = 0
    Do
        X = X + 1

        Addcolumn.ExecuteNonQuery() 
    Loop Until X = 8 
```

这个字符串抛出了一个语法错误，特别是 OleDbException 未处理，语法错误是 SQL 语句

我不确定我哪里出错了，做了一些研究，但找不到错误，我相信这对有更多经验的人来说是显而易见的。

我的第二部分问题是澄清我想知道的事情。如果我在数据集中输入新列，当我更新表单时它会粘住吗？还是只有行这样做？如果是这样，是否会在实际表中创建新列，然后将其复制到数据集，然后通过表适配器更新表？并为我的表格提供我想要的行和列？

非常感谢所有帮助

提前非常感谢！

莫=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:18:15.947

你可以试试

```
 X = 0
    Do
      Dim Addcolumn As New OleDb.OleDbCommand("ALTER TABLE [" & TableName & "] ADD COLUMN " & X      & " varchar(10) NULL", con)

        X = X + 1

        Addcolumn.ExecuteNonQuery() 
    Loop Until X = 8 
```

# jquery - 你如何停止 jCarouselLite 自动播放？

> ID：10525422
> 
> 赞同：0
> 
> 时间：2012-05-09T23:10:32.257
> 
> 标签：jquery, autoplay, jcarousellite

一旦 jCarouselLite 到达可滚动列表的末尾，我想停止它的自动播放。现在发生的事情是我到达列表的末尾，单击后退按钮，然后它继续自动播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T22:39:26.653

$(".mycarousel").trigger('stopCarousel');

如果您使用的是最新的 jcarousel [https://github.com/kswedberg/jquery-carousel-lite/](https://github.com/kswedberg/jquery-carousel-lite/)

尽管 pauseCarousel 是，但由于某种原因，此事件不在他们的文档中。暂停只是暂时暂停，当您将鼠标移出轮播时，它会重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:32:16.687

使用以下命令。

$('div.carousel').trigger('pauseCarousel');

还要确保您使用的是最新的 jcarouselite 版本

[https://github.com/kswedberg/jquery-carousel-lite](https://github.com/kswedberg/jquery-carousel-lite)

# perl - 验证 DBIx::Class 中一行的数据的首选方法是什么？

> ID：10525425
> 
> 赞同：4
> 
> 时间：2012-05-09T23:10:49.800
> 
> 标签：perl, validation, dbix-class

[`DBIx::Class`](http://search.cpan.org/perldoc?DBIx%3a%3aClass)在存储到数据库 ( )之前，我需要验证 Web 应用程序的多个控制器中的传入数据。基本上，我需要使用回调（匿名子）验证每一列的值。我最初考虑[`Params::Validate`](http://search.cpan.org/perldoc?Params%3a%3aValidate)在每个控制器中使用。但是这种方法有两个问题：

1.  没有简单的方法来处理验证错误 `Params::Validate`，因为它只是在第一个带有错误字符串的无效参数上死掉。

2.  我必须为所有控制器中的每一列复制验证逻辑，这违反了 DRY 原则。

我认为最好的方法是将验证逻辑作为模型的一部分。这样做的首选方法是什么[`DBIx::Class`](http://search.cpan.org/perldoc?DBIx%3a%3aClass)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:41:38.610

我不确定您想验证什么以及如何验证您的数据，但您是否尝试使用[DBIx::Class::Validation](http://search.cpan.org/~claco/DBIx-Class-Validation-0.02005/lib/DBIx/Class/Validation.pm)来满足您的需求？它应该适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:22:30.357

将验证回调添加到`add_columns`Result 类中使用的列元数据，例如

```
__PACKAGE__->add_columns(
    '+mycolumn' => {
        validate => sub {
            my ($schema, $val) = @_;
            # validate $val, possibly using $schema
        },
    },
    ...
); 
```

为了方便使用这些回调，您可以创建一个[DBIx::Class сomponent](http://search.cpan.org/perldoc?DBIx%3a%3aClass%3a%3aManual%3a%3aComponent)。

# facebook - 控制在 Facebook 上共享的 Wordpress 链接的链接描述

> ID：10525427
> 
> 赞同：3
> 
> 时间：2012-05-09T23:10:54.683
> 
> 标签：facebook, wordpress, hyperlink, meta

当我们直接在 Facebook 上共享一个链接，并且该链接转到一个 Wordpress 博客时，我们如何控制 Facebook 将提取并用作共享链接描述的文本？只需转到 facebook 并粘贴或输入任何 Wordpress URL，它将以首页上第一篇文章的故事作为该 URL 的描述。

我试过了：

```
<meta name="description" content="<?php echo get_bloginfo ( 'description' );  ?>" /> 
```

和

```
<meta property="og:description" content="<?php echo get_bloginfo ( 'description' );  ?>" /> 
```

但它仍然没有在 Facebook 上得到正确的描述。是的，我已经在 Wordpress 上为我的网站设置了描述。是的，当我查看源代码时，描述会显示在网站上。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T23:49:55.030

Facebook has its own Caching that can sometimes cause changes to your Meta Tags to never show up properly, even after adding or changing them.

Running the [Facebook Debugger](http://developers.facebook.com/tools/debug) not only will tell you if something is wrong with your Meta Tags, but also will clear its cache of the target website's information so that its current information can be properly scraped.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:16:14.437

我还没有做过任何 facebook 开发，但是查看这个[文档](http://developers.facebook.com/docs/share/)，它说

> 标题和描述标签是任何预览的最低要求，因此请确保包含这两个标签。

所以也许尝试包括在内`<meta property="og:title" content="title" />`？

# ms-access - 插入锁定表时记录集未显示错误

> ID：10525436
> 
> 赞同：2
> 
> 时间：2012-05-09T23:12:38.970
> 
> 标签：ms-access, vba, dao, recordset

使用 Access 2010、WinXP。我正在尝试`test`用

```
Sub testUpdate()
Dim rs As Recordset
Dim db As DAO.Database

Set db = CurrentDb
Set rs = db.OpenRecordset("test")

With rs
 .AddNew
 !field1 = "abc"
 !field2 = "def"
 .Update
End With

End Sub 
```

如果`test`被另一个用户锁定，则该过程运行，并且不会更新表（这很好），但也不会产生错误。如果我执行与 SQL 插入语句相同的操作，例如

`insert into test (field1,field2) values ("abc","def")`

然后我收到一条错误消息，告诉我插入因锁定违规而失败。我怎样才能`recordset.update`生成一个我可以处理的类似错误？`dbFailOnError`据我所知，Recordset似乎没有任何等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:09:28.147

如果要触发错误，我认为您需要查看设置记录集类型和锁定类型，例如：

```
Currentdb.OpenRecordset("test", dbOpenDynaset, dbPessimistic,) 
```

您可以测试这些的不同变体，直到找到有效的变体，内置帮助的访问权限将列出所有可用选项。

# javascript - 试图理解骨干继承和专业化

> ID：10525438
> 
> 赞同：1
> 
> 时间：2012-05-09T23:12:39.720
> 
> 标签：javascript, backbone.js

我有一个基本观点`V`：

```
V = Backbone.View.extend({   
  initialize: function() {
    console.log(this.options.z);
    console.log(this.options.q);   
  }
}); 
```

扩展`VV`，它设置属性的值 ( `q: 234`)：

```
VV = V.extend({q:234}); 
```

`V`进一步专门用于`VV`：

```
new VV({z: 123}) 
```

​ 问题是基类型无法访问`q`，我该怎么做呢？`q`在这个例子中，我试图理解这个继承系统， `z`就像要在子类中定义的虚拟/抽象值一样。

[http://jsfiddle.net/maxl/G8cab/](http://jsfiddle.net/maxl/G8cab/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:36:35.357

当你这样说时：

```
VV = V.extend({q: 234}); 
```

您正在创建`VV`的“子类”`V`将具有额外的`q`属性。“类”定义的属性与[`View#initialize`](http://backbonejs.org/#View-constructor).

如果它说“创建视图的新*实例*”，文档可能会更好。

然后，当你在其单个参数中传递给视图的方法时`new VV({z: 123})`（`{z: 123}`1.1.0之前的 Backbones 自动设置为构造函数的选项），你应该看起来更像这样：`initialize``options``this.options``q``this.q``initialize`

```
initialize: function(options) {
  console.log(options.z);
  console.log(this.q);
} 
```

另外，如果你这样做：

```
var VVV = VV.extend({q: 'pancakes'}); 
```

您将替换get和inside`q`实例的默认值。`VV``this.q``'pancakes'``initialize`

演示：http: [//jsfiddle.net/ambiguous/eqBV2/](http://jsfiddle.net/ambiguous/eqBV2/)

Using [`View#extend`](http://backbonejs.org/#View-extend) is like subclassing (or more accurately it creates a new prototypical instance) whereas `new` creates new objects (or copies of the prototypical instance). Of course, the class/instance language doesn't fit the reality of JavaScript so we have to be careful not to take the terminology too seriously.

# c# - 列网格中的复选框

> ID：10525440
> 
> 赞同：2
> 
> 时间：2012-05-09T23:12:56.410
> 
> 标签：c#, .net, asp.net-mvc-3, razor, webgrid

我在 Asp.net MVC 3 中有一个网格，我希望它在“活动？”列中。显示一个复选框，指示用户是否处于活动状态，现在我得到“真”这个词。

我想为无法更改的复选框更改“true”一词，我该怎么做？

```
@grid.GetHtml(  fillEmptyRows: false,
                tableStyle : "table",
                mode: WebGridPagerModes.All,
                columns: new [] {
                grid.Column("IdUser", header: "User"),
                grid.Column("Name", header: "Name"),
                grid.Column("Lastname", header: "Lastname"),
                grid.Column( "Active" ,header: "Active?")
        )
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:08:21.260

您可以为此使用 WebGrid.Column 的**格式**参数。

```
grid.Column(
    header: "Active",
    format: (col) => @Html.Raw("<input type='checkbox' checked='" + ((col.Active) ? "checked" : "") + "' disabled='true' />")
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T14:10:24.860

你可以使用这个：

```
grid.Column(
    "Active",
    format: item => @Html.CheckBox("Active", (bool)(item.Active ?? false), new { @disabled = "disabled" }), style: "center"
) 
```

如果您愿意，可以省略 'style: "center"' :)

祝你好运！

# php - 基于下拉选择的javascript自动填充文本输入

> ID：10525442
> 
> 赞同：0
> 
> 时间：2012-05-09T23:13:16.973
> 
> 标签：php, javascript, ajax, arrays

我遇到了麻烦...希望在从下拉列表中选择用户名后自动填充表单中的文本输入框。用户数组来自 mysql 数据库。不确定我是否正确编写了 javascript。首先是我的数组，它将作为 $users 从 db 中调用。感谢您的关注。

```
<?php 
    $users=array
    (
        "User" => array 
        (
            "0" => array
                            (
                            "id" => "6",
                            "username" => "bsmith",
                            "full_name" => "Buddy Smith"
                            ),
            "1" => array
                            (
                            "id" => "2",
                            "username" => "lsmith",
                            "full_name" => "Libbie Smith"
                            ),
            "2" => array
                            (
                            "id" => "4",
                            "username" => "asmith",
                            "full_name" => "Andy Smith"
                            ) 
        )
    )
?> 
```

然后是javascript：

```
<script type="text/javascript">
var ids = new Array();
var use = new Array();
var ful = new Array();
    <?php
        foreach($users as $key=>$value) {
            echo "ids[" . $key . "] = '" . $value['User']['id'] . "';\n";
            echo "use[" . $key . "] = '" . $value['User']['username'] . "';\n";
            echo "ful[" . $key . "] = '" . $value['User']['full_name'] . "';\n";
        }
        ?>

        function Choice() {
            x = document.getElementById("users");
            x.value = y.options[y.selectedIndex].text;
            document.getElementById("ids") = ids[y.selectedIndex];
            document.getElementById("use") = use[y.selectedIndex];
            document.getElementById("ful") = ful[y.selectedIndex];
           }

        }
</script> 
```

然后我的html：

```
<form name="form1" method="post" action="">
<select name="users" onChange='Choice();'><option> </option>
<?php
foreach ($users as $key=>$value) {
echo '<option value="'.$key.'">'.$value['User']['username'].'</option>';
}
?>
</select>
<p><input type="text" id="ids" name="id" ></p>
<p><input type="text" id="ful" name="full_name" ></p>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T00:06:45.510

我采取了一些自由，并不太了解 PHP，所以我编造了这些部分。无论如何，这就是我得到的：

[http://jsfiddle.net/zunrk/](http://jsfiddle.net/zunrk/)

```
<html>
  <head>
    <style type="text/css">

    </style>
    <script type="text/javascript">
var ids = new Array();
var use = new Array();
var ful = new Array();

ids[0] = "";
use[0] = "";
ful[0] = "";

ids[1] = 6;
use[1] = "bsmith";
ful[1] = "Buddy Smith";

ids[2] = 2;
use[2] = "lsmith";
ful[2] = "Libbie Smith";

ids[3] = 4;
use[3] = "asmith";
ful[3] = "Andy Smith";

        function Choice() {
            //x = document.getElementById("users");
            y = document.getElementById("selectUsers");

              //x.value = y.options[y.selectedIndex].text;
              document.getElementById("ids").value = ids[y.selectedIndex];
              document.getElementById("use").value = use[y.selectedIndex];
              document.getElementById("ful").value = ful[y.selectedIndex];
         }

    </script>
  </head>
  <body>
<form name="form1" method="post" action="">
<select id="selectUsers" name="users" onChange='Choice();'><option> </option>
<option value="1">bsmith</option>
<option value="2">lsmith</option>
<option value="3">asmith</option>
</select>
<p>ids <input type="text" id="ids" name="id" ></p>
<p>use <input type="text" id="use" name="username" ></p>
<p>ful <input type="text" id="ful" name="full_name" ></p>
</form>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:35:27.853

如果我正确理解了您的问题，您需要设置输入文本字段的文本。您可以通过设置“值”字段来做到这一点。

```
 function Choice() {
        x = document.getElementById("users");
        x.value = y.options[y.selectedIndex].text;
        document.getElementById("ids").value = ids[y.selectedIndex];
        document.getElementById("use").value = use[y.selectedIndex];
        document.getElementById("ful").value = ful[y.selectedIndex];
    } 
```

# asp.net - Linq.DataContext 到 Entity.DbContext？

> ID：10525443
> 
> 赞同：2
> 
> 时间：2012-05-09T23:13:42.280
> 
> 标签：asp.net, asp.net-mvc

我目前正在使用 MVC4，但在 Model > Controller 层遇到了一些问题。

我的主要模型对象是一个`Linq To Sql`对象（自动生成），源自`Linq.DataContext`,

我的控制器源自`DbDataController`并且我在`DbContext`任何地方都积极使用。

现在我收到以下错误消息，我几乎可以肯定它`DataContext`是因为与`DbContext`. 有解决方法吗？

> 类型“bugsbase4.Models.BugsDataDataContext”不能用作泛型类型或方法“System.Web.Http.Data.EntityFramework.DbDataController”中的类型参数“TContext”。没有从“bugsbase4.Models.BugsDataDataContext”到“System.Data.Entity.DbContext”的隐式引用转换。

使用 Linq-to-SQL 作为模型是一种不好的做法吗？是否有其他方法可以在没有 Linq-to-SQL 的情况下自动映射数据库中的所有表和存储过程？

**编辑**：考虑使用 EDM，但我对它非常陌生。我觉得 Linq-to-SQL 对存储过程的支持要好得多。

# javascript - 全屏模式下的 CLEditor 文本编辑器

> ID：10525448
> 
> 赞同：0
> 
> 时间：2012-05-09T23:14:54.670
> 
> 标签：javascript, jquery, html, text, editor

我正在使用 CLEditor 文本编辑器，突然间我发现没有全屏模式（就像 wordpress 对广受好评的“分心模式”所做的那样）。我正在尝试使用基本的 Javascript 自己构建全屏模式（无论如何都称我为疯狂）。到目前为止，我把文本编辑器放在了它应该在的地方。当我单击全屏模式时，它会抓取 CLEditor 容器 div 并将其放在另一个 div 上，该 div 具有一些样式来填充所有浏览器窗口并将其余部分留在后面。它可以工作，有点（中间有一些错误），但我无法在编辑器中输入 - 至少在我调整浏览器窗口大小之前。似乎编辑器需要一些“你好”的摇晃才能重新开始工作。似乎它可能需要通过 Javascript 或 jQuery 进行“更新”，我不知道。

任何人都可以帮忙吗？

最好的问候，蒂亚戈·卡斯特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:24:17.257

为此，我编写了插件**jquery.cleditor.fullscreen.js （与****jquery.cleditor.js**位于同一位置）

```
(function($) {
    //Style for fullscreen mode
    var fullscreen = 'height: 100%; left: 0; position: fixed; top: 0; width: 100%; z-index: 9999;',
        style = '';

    // Define the fullscreen button
    $.cleditor.buttons.fullscreen = {
        name: 'fullscreen',
        image: 'fullscreen.gif',
        title: 'Fullscreen',
        command: '',
        popupName: '',
        popupClass: '',
        popupContent: '',
        getPressed: fullscreenGetPressed,
        buttonClick: fullscreenButtonClick,
    };

    // Add the button to the default controls before the bold button
    $.cleditor.defaultOptions.controls = $.cleditor.defaultOptions.controls.replace("bold", "fullscreen | bold");

    function fullscreenGetPressed(data) {
        return data.editor.$main.hasClass('fullscreen');
    };

    function fullscreenButtonClick(e, data) {
        var main = data.editor.$main;

        if (main.hasClass('fullscreen')) main.attr('style', style).removeClass('fullscreen');
        else {
            style = main.attr('style');
            main.attr('style', fullscreen).addClass('fullscreen');
        };

        editor.focus();
        return false;
    }
})(jQuery); 
```

在 cleditor **images**文件夹中，我放了**fullscreen.gif** ![全屏按钮的图标](../Images/534a5e68fafe02e7532c1a4d6e874a80.png)。**比在jquery.cleditor.js**之后的我的**html的****head**部分中添加这个插件。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T12:59:27.270

我有同样的需求，我跟进了@verybadbug 的回答，并修复了 JS。这已经过测试并按要求工作。关键确实是让iframe适配，调用插件提供的refresh(editor)函数。

```
(function($)
{
    //Style for fullscreen mode
    var fullscreen = 'display:block; height: 100%; left: 0; position: fixed; top: 0; width: 100%; z-index: 9999;',
    fullscreenIframe = 'height: 100%; width: 100%;', 
    style = '';

    // Define the fullscreen button
    $.cleditor.buttons.fullscreen = {
        name: 'fullscreen',
        image: 'fullscreen.gif',
        title: 'Fullscreen',
        command: '',
        popupName: '',
        popupClass: '',
        popupContent: '',
        getPressed: fullscreenGetPressed,
        buttonClick: fullscreenButtonClick,
    };

    // Add the button to the default controls before the bold button
    $.cleditor.defaultOptions.controls = $.cleditor.defaultOptions.controls.replace("bold", "fullscreen | bold");

    function fullscreenGetPressed(data)
    {
        return data.editor.$main.hasClass('fullscreen');
    };

    function fullscreenButtonClick(e, data)
    {
        var main = data.editor.$main;
        var iframe = data.editor.$frame;

        if (main.hasClass('fullscreen'))
        {
            main.attr('style', style).removeClass('fullscreen');
        }
        else
        {
            style = main.attr('style');
            main.attr('style', fullscreen).addClass('fullscreen');
            iframe.attr('style', fullscreenIframe).removeClass('fullscreen');
        };
        editor.refresh(data.editor);
        editor.focus();
        return false;
    }
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T00:07:46.337

如果你这样做：

```
$('#cleditor_max_container').append(textEditor.editor.$main); 
```

你可能想要这样做：

```
textEditor.editor.refresh(); 
```

这个对我有用.. ：）****

# scala - 整数对的尾递归有界流（Scala）？

> ID：10525449
> 
> 赞同：14
> 
> 时间：2012-05-09T23:15:02.067
> 
> 标签：scala, tail-recursion, tailrecursion-modulo-cons

我对 Scala 很陌生，所以请原谅我的无知！我正在尝试迭代以最大值为界的整数对。例如，如果最大值为 5，则迭代应返回：

```
(0, 0), (0, 1), ..., (0, 5), (1, 0), ..., (5, 5) 
```

我选择尝试以递归方式将其作为流返回：

```
 @tailrec
    def _pairs(i: Int, j: Int, maximum: Int): Stream[(Int, Int)] = {
        if (i == maximum && j == maximum) Stream.empty
        else if (j == maximum) (i, j) #:: _pairs(i + 1, 0, maximum)
        else (i, j) #:: _pairs(i, j + 1, maximum)
    } 
```

如果没有 tailrec 注释，代码可以工作：

```
scala> _pairs(0, 0, 5).take(11)
res16: scala.collection.immutable.Stream[(Int, Int)] = Stream((0,0), ?)

scala> _pairs(0, 0, 5).take(11).toList
res17: List[(Int, Int)] = List((0,0), (0,1), (0,2), (0,3), (0,4), (0,5), (1,0), (1,1), (1,2), (1,3), (1,4)) 
```

但这对我来说还不够好。编译器正确地指出 _pairs 的最后一行没有返回 _pairs：

```
could not optimize @tailrec annotated method _pairs: it contains a recursive call not in tail position
    else (i, j) #:: _pairs(i, j + 1, maximum)
                ^ 
```

所以，我有几个问题：

*   直接解决上面的实现，尾递归如何返回 Stream[(Int, Int)]？
*   退后一步，迭代有界整数序列的最节省内存的方法是什么？我不想迭代 Range 因为[Range 扩展 IndexedSeq](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range)，我不希望序列完全存在于内存中。还是我错了？如果我遍历 Range.view 我会避免它进入内存吗？

在 Python（！）中，我想要的只是：

```
In [6]: def _pairs(maximum):
   ...:     for i in xrange(maximum+1):
   ...:         for j in xrange(maximum+1):
   ...:             yield (i, j)
   ...:             

In [7]: p = _pairs(5)

In [8]: [p.next() for i in xrange(11)]
Out[8]: 
[(0, 0),
 (0, 1),
 (0, 2),
 (0, 3),
 (0, 4),
 (0, 5),
 (1, 0),
 (1, 1),
 (1, 2),
 (1, 3),
 (1, 4)] 
```

谢谢你的帮助！如果您认为我需要阅读参考资料/API 文档/其他任何内容，请告诉我，因为我很想学习。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T23:26:03.530

# 这不是尾递归

假设您正在制作一个列表而不是一个流：（让我使用一个更简单的函数来说明我的观点）

```
def foo(n: Int): List[Int] =
  if (n == 0)
    0 :: Nil
  else
    n :: foo(n - 1) 
```

在这个递归的一般情况下，在`foo(n - 1)`返回之后，函数必须对它返回的列表做一些事情——它必须将另一个项目连接到列表的开头。所以函数不能是尾递归的，因为递归之后必须对列表做一些事情。

如果没有尾递归，对于某些较大的 值`n`，您会耗尽堆栈空间。

# 通常的列表解决方案

通常的解决方案是将 a`ListBuffer`作为第二个参数传递，并填充它。

```
def foo(n: Int) = {
  def fooInternal(n: Int, list: ListBuffer[Int]) = {
    if (n == 0) 
      list.toList
    else {
      list += n
      fooInternal(n - 1, list)
    }
  }
  fooInternal(n, new ListBuffer[Int]())
} 
```

您正在做的事情被称为“[尾递归模 cons](https://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons) ”，这是~~LISP~~ Prolog 编译器在看到尾递归模 cons 模式时自动执行的优化，因为它很常见。Scala 的编译器不会自动对此进行优化。

# 流不需要尾递归

流不需要尾递归来避免堆栈空间用完——这是因为它们使用了一个聪明的技巧来阻止执行递归调用到`foo`它出现在代码中的位置。函数调用被包装在一个 thunk 中，并且仅在您实际尝试从流中获取值时调用。一次只有一个调用`foo`处于活动状态——它从不递归。

我已经写了一个先前的答案，解释[了`#::`操作员](https://stackoverflow.com/questions/4553909/searching-the-scala-documentation/4555863#4555863)如何在 Stackoverflow 上工作。以下是调用以下递归流函数时发生的情况。（它在数学意义上是递归的，但它不会像您通常期望的那样从函数调用中进行函数调用。）

```
def foo(n: Int): Stream[Int] =
  if (n == 0)
    0 #:: Nil
  else
    n #:: foo(n - 1) 
```

你调用`foo(10)`，它返回一个已经计算了一个元素的流，而尾部是一个 thunk ，`foo(9)`下次你需要流中的一个元素时会调用它。`foo(9)`现在没有调用——而是调用绑定到`lazy val`流内部的 a ，并`foo(10)`立即返回。当您最终确实需要流中的第二个值时，`foo(9)`将调用它，它会计算一个元素并将 hte 流的尾部设置为将调用`foo(8)`. `foo(9)`立即返回而不调用`foo(8)`. 等等...

这允许您创建无限流而不会耗尽内存，例如：

```
def countUp(start: Int): Stream[Int] = start #::countUp(start + 1) 
```

（注意你在这个流上调用了什么操作。如果你尝试做 a`forEach`或 a `map`，你会填满你的整个堆，但是 using`take`是处理流的任意前缀的好方法。）

# 一个更简单的解决方案

与其处理递归和流，为什么不直接使用 Scala 的`for`循环呢？

```
def pairs(maximum:Int) =
  for (i <- 0 to maximum;
       j <- 0 to maximum)
    yield (i, j) 
```

这会在内存中实现整个集合，并返回一个`IndexedSeq[(Int, Int)]`.

如果您特别需要 Stream，您可以将第一个范围转换为`Stream`.

```
def pairs(maximum:Int) =
  for (i <- 0 to maximum toStream;
       j <- 0 to maximum)
    yield (i, j) 
```

这将返回一个`Stream[(Int, Int)]`. 当您访问序列中的某个点时，它将被物化到内存中，并且只要您仍然引用该元素之前的流中的任何点，它就会一直存在。

通过将两个范围都转换为视图，您可以获得更好的内存使用率。

```
def pairs(maximum:Int) =
  for (i <- 0 to maximum view;
       j <- 0 to maximum view)
    yield (i, j) 
```

每次需要时都会返回一个`SeqView[(Int, Int),Seq[_]]`计算每个元素的值，并且不存储预先计算的结果。

你也可以用同样的方法得到一个迭代器（你只能遍历一次）

```
def pairs(maximum:Int) =
  for (i <- 0 to maximum iterator;
       j <- 0 to maximum iterator)
    yield (i, j) 
```

那返回`Iterator[(Int, Int)]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:06:59.753

也许 Iterator 更适合您？

```
class PairIterator (max: Int) extends Iterator [(Int, Int)] {
  var count = -1
  def hasNext = count <= max * max 
  def next () = { count += 1; (count / max, count % max) }
}

val pi = new PairIterator (5)
pi.take (7).toList 
```

# javascript - 浏览网页的标签

> ID：10525450
> 
> 赞同：0
> 
> 时间：2012-05-09T23:15:24.533
> 
> 标签：javascript, webpage

我想浏览所有包含特定属性的（网页的）链接（例如，所有具有属性“title”的“a”标签。
我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:16:52.660

```
var links = document.getElementsByTagName('a'),//Or also document.links
withTitle = [];
for(varn=0;n<links.length;n++)
    if(links[n].getAttribute('title'))
        withTitle.push(links[n]); 
```

或者使用 jQuery：

```
var withTitle = $('a[title]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:20:47.313

作为文档对象的默认属性的节点列表怎么样`document.links`，您可以对其进行迭代，如下所示：

```
for (var i=0;i<document.links.length;i++)
{
    if (document.links[i].hasOwnProperty('title'))
    {
        linksWithTitle.push(document.links[i]);
    }
} 
```

或有关此主题的任何变体

**编辑**

我做了一些挖掘，也许另一种方法是使用treewalker：

```
function byTitle(node)
{
    if (node.hasOwnProperty('title'))
    {
        return NodeFilter.FILTER_ACCEPT;
    }
    return NodeFilter.FILTER_SKIP;
}

function getElementsWithTitle(root)
{
    root = root || document.links;
    var treeWalker,result;
    treeWalker = document.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,byTitle,false);
    result = [treeWalker.currentNode];
    while(treeWalker.nextNode())
    {
        result.push(treeWalker.currentNode);
    }
    return result;
} 
```

treeWalkers 和 NodeFilters/NodeLists 远不止这些，但这[是](http://www.javascriptkit.com/dhtmltutors/treewalker.shtml)对整个概念的一个很好的介绍。

最后，如果您不关心 IE 兼容性：`document.querySelectorAll('a[title]');`会成功的

# javascript - jQuery Plupload Queue - 如果输入没有文本，则不显示文件浏览器

> ID：10525453
> 
> 赞同：2
> 
> 时间：2012-05-09T23:16:02.593
> 
> 标签：javascript, jquery, plupload

如果输入不包含任何文本，我不想显示文件浏览器。

这是我的代码...

```
var haveText = false;
$('#input_box').bind('change',function(){
    if($(this).val()) {
        haveText = true;
    } else {
        haveText = false;
    }
});

$('a.plupload_add').click(function(e) {
    uploader.trigger("DisableBrowse", true);

    if(haveText) {
        $(this).unbind('click');
        uploader.trigger("Refresh");
        uploader.trigger("DisableBrowse", true);
        uploader.trigger("DisableBrowse", false);
    } else {
        alert("no test");
    }
    e.stopPropagation();
}); 
```

我应该改变什么来做我需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:22:36.950

当您的文本框更改值时，也许您可​​以切换浏览按钮的可见性：

```
$('#input_box').bind('change',function(){
    if($(this).val()!=='') {
        $("a.plupload_add").show();
    } else {
        $("a.plupload_add").hide();
    }
}); 
```

# python - 如何在没有框架的情况下在 WSGI 上创建站点

> ID：10525456
> 
> 赞同：0
> 
> 时间：2012-05-09T23:16:14.507
> 
> 标签：python, wsgi

我想编写站点引擎，但没有任何框架，只有 python 标准库和一些像 redis-py 这样的辅助模块。但我不知道我应该从哪里开始，我应该怎么做。

我在谷歌关于这个主题的文章中搜索，但一无所获。

你能给我这个主题在哪里完整描述的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:56:21.187

我找不到完整的解决方案，但您可以从[本教程](http://docs.webob.org/en/latest/do-it-yourself.html)和[本](http://lucumr.pocoo.org/2007/5/21/getting-started-with-wsgi/)教程开始。

然后添加“模型”的东西，比如 redis-py。

# javascript - 使用 JavaScript 在 XML 中查找 ID

> ID：10525463
> 
> 赞同：0
> 
> 时间：2012-05-09T23:16:55.837
> 
> 标签：javascript, jquery

我在 JavaScript 中进行了一个简单的 ajax 调用，它返回一个 ID，然后我需要进行另一个 ajax 调用来获取一个 XML 文件，该文件包含所有 ID 以及相关的描述性字符串作为 XML 的一部分。

ID 的描述以这种格式返回：

```
<Category>
  <Id>1</Id>
  <Descriptor>Accounts</Descriptor>
</Category>
<Category>
  <Id>2</Id>
  <Descriptor>Marketing</Descriptor>
</Category>
<Category>
  <Id>3</Id>
  <Descriptor>HR</Descriptor>
</Category>
etc... 
```

如何根据这个 XML 查找 ID 值并使用 JavaScript 返回描述符字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:26:54.907

使用 jQuery，您可以：

```
var xml = $.ajax({......}); //your xml
var numb = $.ajax({......}); //returns 1,2 or 3 etc...

var descriptor = $('id', xml).filter(function() {
    return $(this).text() == numb; //filter elements based on text in the id tag
}).siblings('Descriptor').text(); 
```

jQuery 会将其视为 html，但它似乎都可以正常工作。

[小提琴](http://jsfiddle.net/adeneo/tM9RN/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:26:41.450

类似这个功能的东西应该可以工作：

```
function searchXmlForId(id) {
    var searchDescriptor = "";

    $.ajax({
        type: "GET",
        url: "your/xml/file.xml",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('Category').each(function(){
                if (curId == $(this).find('Id').text()) return $(this).find('Descriptor').text();
            });   
        }
    });

    return false;
} 
```

然后你这样称呼它：

```
var myDescriptorFromId = searchXmlForId(1);

>> "Accounts" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T23:26:58.747

人们会因为在这里建议正则表达式而跳下喉咙，但我认为这可能是最快的解决方案（对于仇恨者，我*不是*在这里解析 xml，也无意 - 我只是通过一个文本模式）：

```
var matches = xml.match(new RegExp('<Id>' + id + '<\\/Id>[\\s\\S]*?<Descriptor>(.*?)</Descriptor>', 'i'))
var description = matches ? matches[1] : null; 
```

# java - 抽象类和枚举

> ID：10525466
> 
> 赞同：3
> 
> 时间：2012-05-09T23:17:46.737
> 
> 标签：java, enums

我正在尝试建立一个抽象类。我想确保任何子类都有一个列出其潜在操作的枚举。

例如，`Foo`是一个抽象类。

```
Fee extends Foo and can...
    TALK
    WALK
    SLEEP

Bar extends Foo and can...
    SIT
    STARE 
```

我想给父类这个字段，并让子类用它能够执行的操作填充枚举。我将如何处理这个？

例如，如果我在一个类中定义一个枚举，给它一些通用操作，它会被传递给子类并且子类可以扩展枚举吗？那可能是另一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:24:46.443

我不知道我同意这种方法，但你可以这样做

```
enum CanDos {
  TALK,
  WALK,
  SLEEP,
  SIT,
  STARE
} 
```

然后班级可以有

```
abstract class Foo {
  abstract Set<CanDos> getCanDos();
  //or
  abstract boolean can(CanDos item);
} 
```

并且您可以使用`EnumSet`来高效存储功能。

如果您正在寻找的只是提供一组枚举的正确事物（例如您提到的父抽象类中的字段），那么我认为[`EnumSet<CanDos>`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumSet.html)是您的人。在这种情况下

```
abstract class Foo {

  private final Set<CanDos> candos;

  protected Foo(Set<CanDos> candos) 
  {
     this.candos = new EnumSet<CanDos>(candos);
  }

  public boolean can(CanDos item) {
    return candos.contains(item);
  }
} 
```

或者，您可以完全避免使用抽象类（或者至少不强制它看到例如[这个问题](https://stackoverflow.com/questions/1474249/abstract-classes-vs-interfaces)或[这个](https://stackoverflow.com/questions/462198/java-interface-vs-abstract-class-regarding-fields)问题）。广受好评的《*Effective Java* 》一书建议“[优先使用接口而不是抽象类](https://stackoverflow.com/questions/56867/interface-vs-base-class)”。

为此，改为

```
enum CanDos {
  TALK,
  WALK,
  SLEEP,
  SIT,
  STARE
}

public interface FooThatCanDo {
  boolean can(CanDos item);
} 
```

如果您真的认为公共继承根中存在价值（您应该认真考虑），那么您可以提供如上所示的抽象基础实现，并声明它`implements FooThatCanDo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:25:11.570

我不认为枚举是你正在寻找的，至少不是直接的。也许您可以使用[BitSet](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html "枚举集")。

```
class Base {
    private static EnumSet actions;

    public EnumSet getActions() { return actions; }
}

class Derived extends Base {
    private static EnumSet actions;

    @Override
    public EnumSet getActions() { 
        return new EnumSet(actions).addAll(super.getActions()); 
    }
} 
```

# c++ - 在 mac os x 上安装使用 cmake 构建的库

> ID：10525477
> 
> 赞同：4
> 
> 时间：2012-05-09T23:19:33.857
> 
> 标签：c++, macos, cmake

我下载了yaml-cpp源，生成了它的xcode项目，构建了它，但是我如何安装库和它的头文件，我只是想用g ++编译一个小控制台程序，我不知道xcode项目是否也安装了标题。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:01:10.280

你的 Xcode 项目应该有一个安装目标。或者，根据[此](http://www.cmake.org/pipermail/cmake/2006-November/011910.html)您可以执行以下操作：

```
sudo xcodebuild -target INSTALL 
```

# c# - 重用顶点传递到着色器

> ID：10525478
> 
> 赞同：0
> 
> 时间：2012-05-09T23:19:38.907
> 
> 标签：c#, graphics, xna, 3d

一般问题：

假设您有一个顶点列表，您可以根据着色器参数（例如，激光宽度或其他）传递给效果以绘制某些东西。我想传递相同的顶点，但使用不同的着色器参数 - 但是，这不起作用。

这是有问题的代码：

```
 foreach (EffectPass pass in quinticFX.CurrentTechnique.Passes)
            {
                quinticFX.Parameters["NumPoints"].SetValue(CurvedVertices.Count());
                pass.Apply();
                GraphicsDevice.SamplerStates[0] = LinearMirrorState;
                GraphicsDevice.Textures[0] = solid;

                quinticFX.Parameters["radiusOfBeam"].SetValue(8);
                GraphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, CurvedVertices.ToArray(), 0, CurvedVertices.Count() - 2);
                pass.Apply();

                quinticFX.Parameters["radiusOfBeam"].SetValue(4);
                quinticFX.Parameters["P"].SetValue(cp1);
                GraphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, CurvedVertices.ToArray(), 0, CurvedVertices .Count() - 2);
            } 
```

我*假设*你可以这样做，它会用不同的控制点和宽度绘制（在本例中为曲线）两次。情况并非如此——仅绘制最近的一组图元。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:00:54.860

原来我是个白痴——设置参数后需要 Apply() 通行证。

修正后的代码如下：

```
foreach (EffectPass pass in quinticFX.CurrentTechnique.Passes)
{
    quinticFX.Parameters["NumPoints"].SetValue(CurvedVertices.Count());
    //GraphicsDevice.SamplerStates[0] = SamplerState.LinearWrap;
    GraphicsDevice.SamplerStates[0] = LinearMirrorState;
    GraphicsDevice.Textures[0] = solid;

    quinticFX.Parameters["radiusOfBeam"].SetValue(12);
    pass.Apply();
    GraphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, CurvedVertices.ToArray(), 0, CurvedVertices.Count() - 2);

    quinticFX.Parameters["radiusOfBeam"].SetValue(6);
    quinticFX.Parameters["P"].SetValue(cp1);
    pass.Apply();
    GraphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, CurvedVertices.ToArray(), 0, CurvedVertices.Count() - 2);

    quinticFX.Parameters["radiusOfBeam"].SetValue(3);
    quinticFX.Parameters["P"].SetValue(cp2);
    pass.Apply();
    GraphicsDevice.DrawUserPrimitives<VertexPositionTexture>(PrimitiveType.TriangleStrip, CurvedVertices.ToArray(), 0, CurvedVertices.Count() - 2);
} 
```

# php - 如何计算从 MySQL 查询返回的总结果有限制？

> ID：10525481
> 
> 赞同：1
> 
> 时间：2012-05-09T23:20:14.610
> 
> 标签：php, mysql, database, search

我正在使用以下查询从 MySQL 数据库中获取结果：

```
$query =  $this->db->query("
    SELECT * FROM results r 
    INNER JOIN categories c on r.id = c.result_id 
    INNER JOIN tags t on r.id = t.result_id 
    WHERE c.name in ('$purpose', '$prop_type', '$loan_type')
    $tag_string
    AND ( r.scope = 'all' OR r.scope = '$subdomain' )
    GROUP BY r.id
    HAVING COUNT(c.c_id) = 3
    ORDER BY r.usefulness DESC
    LIMIT 10 OFFSET $offset
"); 
```

返回的结果可能是 500+

如果没有限制，我如何计算此查询将返回的总行数，以便我可以将其显示给用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:23:06.030

这很简单，只需使用`select count(*) from ...`代替`select * from ...`

如果您想在同一个查询中完成所有操作，您可以在这里得到答案：

[如何在MYSQL中对单个查询中的记录进行计数和限制？](https://stackoverflow.com/questions/802373/how-to-count-and-limit-record-in-a-single-query-in-mysql)

另一个`SELECT FOUND_ROWS();`答案就是答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T23:28:06.670

SQL_CALC_FOUND_ROWS 和 "SELECT FOUND_ROWS()" 是你想要的：

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

# cakephp - 将模型的值放在选择列表中

> ID：10525483
> 
> 赞同：0
> 
> 时间：2012-05-09T23:20:24.170
> 
> 标签：cakephp, selectlist

我想将模型中的字段放在选择列表中。我有这个代码..

brand.php 和 car.php 模型

```
 class Brand extends AppModel{ 
  var $name = 'Brand'; 
  var $hasMany = 'Car'; 
 }
 <?php   
 class Car extends AppModel{ 
  var $name = 'Car'; 
  var $belongsTo = 'Brand'; 
 } 
 ?> 
```

控制器

```
 <?php 
   class CarsController extends AppController{
   var $name = 'Cars';
   function index(){
   $this->set('id', $this->Car->find('all'));
   }
   }
  ?> 
```

这是视图 index.ctp

```
<?php   
echo $form->create('Search'); 
foreach($id as $options){ 
     echo $options['Brand']['name']."<br>";  // it works
$values = array(); 
$values[] = $options['Brand']['name']; // doesnt work!

} 
echo $this->Form->select('one', $values); // the values for selects just the last one
echo $form->end('search'); 
?> 
```

那么如何将 Brand.php 模型中选项值的字段和 id 放在选择列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:58:21.967

将您的`find('all')`呼叫更改为`find('list')`呼叫并在品牌模型上呼叫。

这将为您提供一个关联数组，其中包含所有记录的`id`=> 。您可以通过在模型中指定字段来修改显示字段`displayField``Brand``var $displayField = 'my_field';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:05:02.077

在您的控制器中：

```
$this->set('brands', $this->Car->Brand->find('list')); 
```

在您看来：

```
echo $this->Form->input('brand_id'); 
```

Cake 会自动将 $brands 视图变量链接到 brand_id 字段选项列表。

# matlab - 带有句柄类的 Matlab Arrayfun

> ID：10525485
> 
> 赞同：3
> 
> 时间：2012-05-09T23:20:29.943
> 
> 标签：matlab

假设我有一个带有方法 SetProperty 的句柄类的 1x2 对象数组。我可以使用 arrayfun 为每个类调用 SetProperty 方法，以及一个用于设置属性值的向量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:53:10.053

您还可以设计该类，以便对对的调用`SetProperty`进行矢量化：

```
 class Foo < handle
      methods(Access=public)
            function SetProperty(this,val)
                 assert(numel(this)==numel(val));
                 for i=1:numel(this)
                      this(i).prop = val(i);
                 end
            end
      end
end 
```

然后，您可以创建一个向量并直接调用它的方法：

```
 f = repmat(Foo(),[1 2]);
    f.SetProperty( [5 3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:22:23.667

是的你可以：

```
arrayfun(@(x,y)x.SetProperty(y), yourHandleObjects, theValues) 
```

# extjs - 如何在 ExtJS 4.1 中销毁商店？

> ID：10525486
> 
> 赞同：5
> 
> 时间：2012-05-09T23:20:32.033
> 
> 标签：extjs, datastore, destroy, extjs4.1

我曾经使用商店的`autoDestroy`财产。清理内存资源。但我再也无法在 API 中找到它了。

我发现`EXTJSIV-4844 - Ext.data.Store autoDestroy config is missing`列在[4.1 RC1 Bug Fixes](http://www.sencha.com/forum/showthread.php?187908-Ext-JS-4.1-RC1-is-Now-Available)中（尽管我在任何地方都找不到该错误的线程）。

现在在 RC3 中，该配置已从 API 中消失，并且不再位于源文件中。

我用过`Ext.destroy`视图，但从不用于商店。[API 在这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-destroy)描述该`Ext.destroy`方法的方式听起来像：“此方法是为小部件设计的，但它会接受任何对象并查看它可以做什么”。- 换句话说，不是很确定。

有没有人碰巧知道是否`Ext.destroy`适用于商店并将它们从内存中删除？或者推荐的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T00:30:31.757

Ext.data.Store.destroyStore 看起来像您要使用的方法。由于某种原因它是私有的（如果选中显示私有，它甚至不会显示在文档中）但看起来它具有与 3.4 的公共 Store.destroy [http://docs.sencha.com/ext相同的功能-js/3-4/#!/api/Ext.data.Store-method-destroy](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-destroy)。在 4.x 中有一个 Store.destroy 方法，但这是完全不同的，不应该用于从内存中销毁存储。这是来自[http://docs.sencha.com/ext-js/4-1/source/AbstractStore.html#Ext-data-AbstractStore](http://docs.sencha.com/ext-js/4-1/source/AbstractStore.html#Ext-data-AbstractStore)的来源：

```
// private
destroyStore: function() {
    var me = this;

    if (!me.isDestroyed) {
        if (me.storeId) {
            Ext.data.StoreManager.unregister(me);
        }
        me.clearData();
        me.data = me.tree = me.sorters = me.filters = me.groupers = null;
        if (me.reader) {
            me.reader.destroyReader();
        }
        me.proxy = me.reader = me.writer = null;
        me.clearListeners();
        me.isDestroyed = true;

        if (me.implicitModel) {
            Ext.destroy(me.model);
        } else {
            me.model = null;
        }
    }
}, 
```

# objective-c - QR 扫描仪仅适用于 iPhone，不适用于 iPad

> ID：10525488
> 
> 赞同：0
> 
> 时间：2012-05-09T23:20:37.430
> 
> 标签：objective-c, xcode, ipad

我为 QR 扫描仪获取了一些非常好的源代码，希望能从这位先生 (http://iphonenativeapp.blogspot.ca/2011/07/qr-code-readerscanner-for-iphone-app-in.html) 那里读取 URL将其集成到我正在开发的 iPad 应用程序中。但是，当我尝试在 iPad 上运行 QR 扫描仪时，程序会输出此错误：

> 2012-05-09 17:16:55.046 QRscanner[1176:10703] UIStatusBarStyleBlackTranslucent 在此设备上不可用。
> 
> 2012-05-09 17:16:55.049 QRscanner [1176:10703] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“在 iPad 上，UIImagePickerController 必须通过 UIPopoverController 呈现”

对于我的一生，我无法弄清楚哪里出了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:35:59.960

> 对于我的一生，我无法弄清楚哪里出了问题。

严重地？

该错误告诉您，在 iPad 上，`UIImagePickerController`必须通过`UIPopoverController`. 就这样做吧。如果您愿意查看[文档，`UIImagePickerController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)您不仅会看到它告诉您这一点，而且它链接到如何使用`UIPopoverController`.

这几乎是您在编程中遇到的最直接的问题类型。系统专门告诉你必须做什么，文档的明显部分告诉你如何去做。

# iis - 尝试打开 Word 文档的链接时获得第二次登录提示

> ID：10525491
> 
> 赞同：0
> 
> 时间：2012-05-09T23:21:19.180
> 
> 标签：iis, ms-word

我创建了一个简单的网站，列出了存储在我们服务器上的 word 文档。我们的网站正在使用带有 SSL 证书的基本身份验证。因此，当用户第一次访问该站点时，系统会提示他们输入用户名和密码，一旦他们登录并且当用户单击链接并单击“打开”以打开单词 doc（.doc 或 .docx）时，系统会提示他再次登录。单击“取消”两次，提示消失，文档打开。如何删除此第二次登录请求？我用谷歌搜索了它，发现使用 sharepoint 描述相同场景的用户存在一些问题，但我们没有使用 sharepoint。

谢谢！-拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:31:56.703

最终我最终请求了 PDF 文件而不是 word 文件。似乎 IE 和 Word，使用基本身份验证将需要 2 个密码请求。当您请求页面时，由 IIS 提供一个。第二个来自 Office，当它试图打开 word 文档时。除了将请求的文档更改为 pdf 文件之外，找不到解决此问题的方法，然后他们在没有第二次登录的情况下就可以正常打开。

# c++ - Pthread 阻塞/可更新定时器

> ID：10525496
> 
> 赞同：2
> 
> 时间：2012-05-09T23:21:42.310
> 
> 标签：c++, timer, pthreads, sleep, blocking

我目前正在使用 pthreads，并且我的一个线程中有一个 run() 方法。run() 方法检查向量的第一个元素的开始时间，并且需要进行阻塞睡眠，直到达到该时间，从而允许其他线程执行。问题是向量的前面元素可以更新，我需要在我的 run() 方法中重置计时器。我不确定如何处理这个问题。我不能使用睡眠，因为它会等到它最后一次检查的开始时间可能已经更新到更早的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:49:15.040

您可以使用 pthread_kill() 唤醒在 sigtimedwait() 处休眠的特定线程。

```
sigset_t _fSigMask; // global sigmask 
```

我们在创建线程之前执行此操作。线程从创建它们的线程继承其信号掩码。我们使用 SIGUSR1 给我们的线程发信号。其他信号可用。

```
sigemptyset(&_fSigMask);
sigaddset(&_fSigMask, SIGUSR1);
sigaddset(&_fSigMask, SIGSEGV); 
```

然后休眠一个线程：

```
int nSig;
struct timespec tmTimeout = { nSec, nNanoSec }; // from your vector of times
sigtimedwait(&fSigMask, &nSig, &tmTimeout); 
```

然后唤醒线程 pThread，只需发出信号：

```
pthread_kill(pThread, SIGUSR1); 
```

顺便说一句，在我们的测试过程中，以这种方式休眠和唤醒我们的线程比使用条件变量快很多倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:32:58.677

无论更新向量，都需要以一种或另一种方式向睡眠线程发出信号。有十几种方法可以做到这一点，但两种明显的方法是条件变量或仅使用带有管道或类似方法的 select。

使用条件变量，您可以使用`pthread_cond_timedwait`计算出的超时值。如果超时就好了。如果你收到信号，你必须读取向量，重新计算超时，然后再次阻塞。

同样，`select()`您在等待超时或管道上的某些输入时计算并使用向量和块中的超时值。无论是在更新向量，也会向管道写入一些内容，然后线程会唤醒、重新计算等等……

# xml - XML schemaLocation 和 targetNameSpace 属性

> ID：10525506
> 
> 赞同：2
> 
> 时间：2012-05-09T23:23:05.753
> 
> 标签：xml

我对 schemaLocation 和 targetNameSpace 属性有一些疑问。

1.  为什么我们使用 schemaLocation 属性？如果两个 URL 被指定为 schemaLocation 的值，这意味着什么？他们指向网络资源吗？

2\. targetNameSpace 是否出现在架构中？它的价值是否指向任何网络资源？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:49:39.497

命名空间是以 URI 的形式编写的全局唯一标识符 (GUID)。它们不引用网络上的资源，除非是偶然的（有些人喜欢在网络上放一些东西来解释命名空间的含义）。它们只是唯一的字符串。以 URI 的形式编写它们的主要原因是告诉您谁拥有和管理名称空间。

模式描述了一个词汇；如果词汇表包含多个名称空间，则每个名称空间都在不同的模式文档中进行描述。因此，模式文档（即模式的模块）和名称空间之间存在关系，这由 xs:schema 元素的 targetNamespace 属性指示。

实例文档使用一个词汇表，该词汇表也可能包含多个名称空间。schemaLocation 属性描述了从命名空间到描述这些命名空间的架构文档位置的映射。如果有两个 URI，一个是命名空间，另一个是描述该命名空间的模式文档的位置。

# c++ - 什么是“原子”数据类型？

> ID：10525511
> 
> 赞同：28
> 
> 时间：2012-05-09T23:23:42.540
> 
> 标签：c++, winapi, types

[我在Win32api](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649053%28v=vs.85%29.aspx)中遇到过这种`ATOM`类型，在 Acrobat API 中也有[ASAtom](http://livedocs.adobe.com/pdfl_sdk/9/PDFL_SDK9_HTMLHelp/API_References/Acrobat_API_Reference/AS_Layer/ASAtom.html)。

据我所知，原子是通常由字符串组成的哈希表的键，可以在应用程序之间快速查找和共享数据。这是正确的吗？原子类型的词源是什么？

**编辑**

经过一番广泛的搜索后，我注意到[Prolog](http://en.wikipedia.org/wiki/Prolog)使用了原子，所以这个词一定有一些来源。它似乎曾经指代任何单个数据。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T08:32:07.107

ATOM 是一个 16 位 Windows 类句柄原语。它的值对用户模式完全不透明。它不是指针或索引。

typedef 无符号短 ATOM；

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-24T16:31:44.160

至于名称的词源`ATOM`，我知道我曾经在一些旧的 Microsoft Win32 API 文档中看到它是“ **A** ccess **to** **Memory** ”或类似名称的首字母缩写词。它是用于表示系统中一些内部数据结构的简单数字标识符（其他名称是“句柄”）的术语。

出于显而易见的原因，给用户直接指向这些结构的指针是不明智的。首先，因为它们驻留在内核空间中，其次，因为它违反了封装。然后用户可以释放不属于它的内存，或者覆盖它，或者其他一些愚蠢的想法。所以操作系统只是给它一些替换数字标签（即ATOM），然后可以用来从系统请求数据。用户传递小数字而不是整个巨大的数据结构也更快。用户不需要关心内存分配和东西，或者通过不再有效的指针访问一些数据，这可能会使他们的程序崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T02:38:05.427

关于“原子”一词，我能找到的最早的东西来自 Lisp 编程语言（[源代码](http://en.wikipedia.org/wiki/S-expression)）。但是，它可能最初来自[数理逻辑](http://en.wikipedia.org/wiki/Atomic_formula)。在编程中，它们也被称为[符号](http://en.wikipedia.org/wiki/Symbol_%28Lisp%29)，最简单的形式是名称整数（C 中的枚举类型就是一个例子）。但是，它们广泛用于许多编程语言，在 Win32 API 和 Acrobat API 中，它们是表中字符串的标识符。

此外，正如[Mehrdad](https://stackoverflow.com/questions/10525511/questions-about-atoms-and-atom-tables/10526830#comment13614818_10525511)指出的那样，希腊语的原始含义是“不可分割的”，因此它们暗示了一种无法进一步分解的原始数据类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-10T14:16:39.720

**RegisterClass** / RegistrClassEx函数（以及其他**一些**函数）返回一个**ATOM**数据类型。

ATOM 唯一标识正在注册的类，但如果函数失败则返回零，因此您可以像这样测试函数是否失败

```
ATOM a=0;
.
.
a = RegisterClassEx(your_window);
if (0==a)
  {
    //code for function failed
  } 
```

# java - Google App Engine 上的任意主机/IP 查找

> ID：10525513
> 
> 赞同：0
> 
> 时间：2012-05-09T23:23:51.303
> 
> 标签：java, google-app-engine, http

我正在开发一个浏览器插件（请参阅[Distinguish Intranet and external IP addresses in JavaScript](https://stackoverflow.com/questions/10505450/distinguish-intranet-and-external-ip-addresses-in-javascript)），它（简而言之）为用户访问的每个页面生成“分数”，将有关最高分数的详细信息异步提交给后端服务器，是一个 App Engine 实例。（这一切都很好。）

我想要*用户最初请求的主机的*IP （这样我就可以去掉“内部网”IP）——但是因为它在客户端以跨浏览器的方式获取它是介于繁琐和不可能之间的，我想我'会将页面 URL 与我们的 AJAX 调用一起发送到服务器，并使用 JDK 的`InetAddress`类在那里进行查找。不幸的是，此类在 App Engine 上被阻止。

是否有一个*替代*的HTTP 库我可以用来在那里执行主机 - > IP 查找，即不通过`InetAddress`？

如果有，而且我确实可以绕过 JDK 限制，这是合法/道德/理智的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:03:44.043

似乎无法直接从 App Engine atm 进行 DNS 查找：请参阅（并加注星标！）以下[功能请求](http://code.google.com/p/googleappengine/issues/detail?id=354)。

# javascript - UIWebView & Javascript：访问选择的父 div

> ID：10525514
> 
> 赞同：1
> 
> 时间：2012-05-09T23:23:56.850
> 
> 标签：javascript, html, styles, selection, parent

如何更改 UIWebView 中所选文本的父 div 样式？使用：

```
[self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getSelection().getRangeAt(0).startContainer.parentNode.style.textAlign=\"center\";" ]]; 
```

当 parentNode 是 div 时可以，但不起作用，例如，如果选定的文本在*...*节点中。

# android - 尝试根据屏幕高度在页面上加载对象

> ID：10525518
> 
> 赞同：0
> 
> 时间：2012-05-09T23:24:22.080
> 
> 标签：android

我正在尝试制作我认为简单的游戏。我一直在关注某人的教程，现在我正在尝试调整它并让它做我想做的事情。但是我找不到任何对我有用的答案，他们都提出了一些阻止它编译的错误。代码中的行是

```
droid = new Droid(BitmapFactory.decodeResource(getResources(),
    R.drawable.droid_1), 50, 50); 
```

我可以将第二个“50”更改为任何硬编码数字，它会移动，但我总是希望它在屏幕底部创建，不受屏幕大小的影响。所以基本上我希望 50 是 (screenheight - bitmapheight) 这是我正在使用的代码页面。

```
import net.obviam.droidz.model.Droid;
import net.obviam.droidz.model.components.Speed;
import android.app.Activity;
import android.content.Context;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;

/**
 * This is the main surface that handles the ontouch events and draws
 * the image to the screen.
*/
public class MainGamePanel extends SurfaceView implements
    SurfaceHolder.Callback {

private static final String TAG = MainGamePanel.class.getSimpleName();

private MainThread thread;
private Droid droid;

public MainGamePanel(Context context) {
    super(context);
    // adding the callback (this) to the surface holder to intercept events
    getHolder().addCallback(this);

    // create droid and load bitmap
      droid = new Droid(BitmapFactory.decodeResource(getResources(), R.drawable.droid_1), 50, 50);

    // create the game loop thread
    thread = new MainThread(getHolder(), this);

    // make the GamePanel focusable so it can handle events
    setFocusable(true);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // at this point the surface is created and
    // we can safely start the game loop
    thread.setRunning(true);
    thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    Log.d(TAG, "Surface is being destroyed");
    // tell the thread to shut down and wait for it to finish
    // this is a clean shutdown
    boolean retry = true;
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // try again shutting down the thread
        }
    }
    Log.d(TAG, "Thread was shut down cleanly");
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // delegating event handling to the droid
        droid.handleActionDown((int)event.getX(), (int)event.getY());

        // check if in the lower part of the screen we exit
        if (event.getX() > getWidth() /2) {
            thread.setRunning(false);
            ((Activity)getContext()).finish();

        } else {

            droid.setX((int)event.getX());
            droid.setY((int)event.getY());

        }

    } if (event.getAction() == MotionEvent.ACTION_MOVE) {
        // the gestures
        if (droid.isTouched()) {
            // the droid was picked up and is being dragged
            droid.setX((int)event.getX());
            droid.setY((int)event.getY());
        }
    } if (event.getAction() == MotionEvent.ACTION_UP) {
        // touch was released
        if (droid.isTouched()) {
            droid.setTouched(false);
        }
    }

    return true;
}

public void render(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    droid.draw(canvas);
}

/**
 * This is the game update method. It iterates through all the objects
 * and calls their update method if they have one or calls specific
 * engine's update method.
 */
public void update() {
    // check collision with right wall if heading right
    if (droid.getSpeed().getxDirection() == Speed.DIRECTION_RIGHT
            && droid.getX() + droid.getBitmap().getWidth() / 2 >= getWidth()) {
        droid.getSpeed().toggleXDirection();
    }
    // check collision with left wall if heading left
    if (droid.getSpeed().getxDirection() == Speed.DIRECTION_LEFT
            && droid.getX() - droid.getBitmap().getWidth() / 2 <= 0) {
        droid.getSpeed().toggleXDirection();
    }
    // check collision with bottom wall if heading down
    if (droid.getSpeed().getyDirection() == Speed.DIRECTION_DOWN
            && droid.getY() + droid.getBitmap().getHeight() / 2 + 2 >= getHeight()) {
        droid.getSpeed().toggleYDirection();
    }
    // check collision with top wall if heading up
    if (droid.getSpeed().getyDirection() == Speed.DIRECTION_UP
            && droid.getY() - droid.getBitmap().getHeight() / 2 - 2 <= 0) {
        droid.getSpeed().toggleYDirection();
    }
    // Update the lone droid
    droid.update();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:22:46.920

你需要这样的东西吗？我不知道你使用的是什么 API 版本，所以我会给你早期 API 的代码示例。

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

希望我明白了，祝你好运。

# css - 如何使用 CSS 重新定位元素，而不用冒险浏览器将其截断？

> ID：10525520
> 
> 赞同：0
> 
> 时间：2012-05-09T23:24:22.413
> 
> 标签：css

在我的工作中，我们根据现有的 HTML 模板为客户定制页面，这意味着我们唯一可以修改的就是 CSS。所以很明显，这意味着很多时候都要为问题寻找创造性的解决方案。不确定这是否可以做到，但我需要仅使用 CSS 将页面上的元素重新定位到其原始位置的左侧。基本上，这个元素通常是居中的，但是他们需要图像位于屏幕的右上角（我已将其设为背景图像），而不是居中其标题图像，因此其他元素的“居中”现在是向右一点。

我的问题是我只能找到这样做的方法，导致元素在较小的窗口中被切断屏幕的左侧。有没有办法，仅使用 CSS，将元素定位到其原始位置的左侧，而不会让它掉出浏览器窗口？对不起，如果其中任何一个解释得不好，我每天都这样做，但我完全是自学的。这是我尝试过的（不成功）：

```
.content {
background: #ffffff;
color: #000000;
margin-top: 0px;
position: relative;
left: -20%;
} 
```

我也尝试过使用 margin-left ，以及将 min-width 添加为 100%。当我尝试使用 position:absolute 时，它​​搞砸了页面上的其他元素，所以这也是不可能的。如果您知道此问题的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:31:45.297

您可以使用相对位置 DIV 围绕元素，然后您可以使用 position:absolute 元素内容。

```
<div style="position:relative">
   <div class="content"><img /></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:47:47.187

我尝试按照您的解释进行操作。我不是 100% 确定我是否理解您的问题，但似乎您的问题可以通过为较小的窗口尺寸应用不同的 css 来解决。这是一个例子：

```
@media only screen and (max-width: 480px) {
    .content {
       // whatever css you want to put here for window sizes smaller than 480px 
    }
} 
```

# .net - RNGCryptoServiceProvider.GetBytes 线程安全吗？

> ID：10525521
> 
> 赞同：12
> 
> 时间：2012-05-09T23:24:37.417
> 
> 标签：.net

RNGCryptoServiceProvider.GetBytes 线程安全吗？我似乎在文档中找不到任何关于它的注释。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T23:27:37.540

是的。它[在“备注”部分](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.getbytes.aspx)：

> 字节数组的长度决定了产生多少加密强的随机字节。此方法是线程安全的。

# clojure - Lein repl 选项 :init

> ID：10525523
> 
> 赞同：4
> 
> 时间：2012-05-09T23:24:41.110
> 
> 标签：clojure

根据[https://github.com/technomancy/leiningen/blob/master/sample.project.clj](https://github.com/technomancy/leiningen/blob/master/sample.project.clj) 我可以在 :repl-options 中附加一个 :init 。

但是，当我尝试：

```
lein version; echo "====="; cat project.clj; echo "====="; lein repl 
```

我得到输出：

```
Leiningen 1.7.1 on Java 1.6.0_29 Java HotSpot(TM) 64-Bit Server VM
=====
(defproject
  test "0.0.1"
  :dependencies [[org.clojure/clojure "1.3.0"]]
  :source-paths ["src"]
  :jvm-opts ["-Xms4g"  "-Xmx4g"]
  :repl-options {
                 :init (println "Init")
                 }
  )

=====
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at jline.ConsoleRunner.main(ConsoleRunner.java:69)
Caused by: java.lang.IllegalArgumentException: No value supplied for key: [:init (println "Init")] (NO_SOURCE_FILE:0)
    at clojure.lang.Compiler.eval(Compiler.java:5440)
    at clojure.lang.Compiler.eval(Compiler.java:5391)
    at clojure.core$eval.invoke(core.clj:2382)
    at clojure.main$eval_opt.invoke(main.clj:235)
    at clojure.main$initialize.invoke(main.clj:254)
    at clojure.main$script_opt.invoke(main.clj:270)
    at clojure.main$main.doInvoke(main.clj:354)
    at clojure.lang.RestFn.invoke(RestFn.java:457)
    at clojure.lang.Var.invoke(Var.java:377)
    at clojure.lang.AFn.applyToHelper(AFn.java:172)
    at clojure.lang.Var.applyTo(Var.java:482)
    at clojure.main.main(main.java:37)
    ... 5 more
Caused by: java.lang.IllegalArgumentException: No value supplied for key: [:init (println "Init")]
    at clojure.lang.PersistentHashMap.createWithCheck(PersistentHashMap.java:89)
    at clojure.core$hash_map.doInvoke(core.clj:327)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:540)
    at leiningen.repl$repl_options.invoke(repl.clj:16)
    at leiningen.repl$repl_server.doInvoke(repl.clj:69)
    at clojure.lang.RestFn.applyTo(RestFn.java:146)
    at clojure.core$apply.invoke(core.clj:546)
    at leiningen.repl$repl.invoke(repl.clj:145)
    at clojure.lang.Var.invoke(Var.java:365)
    at clojure.lang.AFn.applyToHelper(AFn.java:161)
    at clojure.lang.Var.applyTo(Var.java:482)
    at clojure.core$apply.invoke(core.clj:542)
    at leiningen.core$apply_task.invoke(core.clj:262)
    at leiningen.core$_main.doInvoke(core.clj:329)
    at clojure.lang.RestFn.invoke(RestFn.java:410)
    at clojure.lang.AFn.applyToHelper(AFn.java:161)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at clojure.core$apply.invoke(core.clj:542)
    at leiningen.core$_main.invoke(core.clj:332)
    at user$eval47.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:5424)
    ... 16 more 
```

我究竟做错了什么？

特别是，我不明白为什么 [:init +func+] 被视为键，而不是 :init 被视为键。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T00:03:39.410

不确定，但是您给master的链接可能是Leiningen 2，与稳定的分支不同，可能是1.7-ish？如果您在 github 链接上将分支切换为 stable，则没有 :init 参数...

# c# - 如何在 C# 中比较 IP 地址范围？

> ID：10525531
> 
> 赞同：7
> 
> 时间：2012-05-09T23:25:35.980
> 
> 标签：c#, ipv6, ipv4, cidr

如果我有一个 IP 地址范围（CIDR 表示法）并且我需要知道某个任意 IP 地址是否在该范围内——两者都以字符串形式显示——用 C# 执行此操作的最简单方法是什么？

例子：

*   IPv4 范围：`192.168.168.100/24`，要检查的 IP：`192.168.168.200`
*   IPv6 范围：`fe80::202:b3ff:fe1e:8329/24`，要检查的 IP：`2001:db8::`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T03:33:19.477

这是一个简单的类：

```
public class IPSubnet
{
    private readonly byte[] _address;
    private readonly int _prefixLength;

    public IPSubnet(string value)
    {
        if (value == null)
            throw new ArgumentNullException("value");

        string[] parts = value.Split('/');
        if (parts.Length != 2)
            throw new ArgumentException("Invalid CIDR notation.", "value");

        _address = IPAddress.Parse(parts[0]).GetAddressBytes();
        _prefixLength = Convert.ToInt32(parts[1], 10);
    }

    public bool Contains(string address)
    {
        return this.Contains(IPAddress.Parse(address).GetAddressBytes());
    }

    public bool Contains(byte[] address)
    {
        if (address == null)
            throw new ArgumentNullException("address");

        if (address.Length != _address.Length)
            return false; // IPv4/IPv6 mismatch

        int index = 0;
        int bits = _prefixLength;

        for (; bits >= 8; bits -= 8)
        {
            if (address[index] != _address[index])
                return false;
            ++index;
        }

        if (bits > 0)
        {
            int mask = (byte)~(255 >> bits);
            if ((address[index] & mask) != (_address[index] & mask))
                return false;
        }

        return true;
    }
} 
```

示例用法：

```
Console.WriteLine(new IPSubnet("192.168.168.100/24").Contains("192.168.168.200")); // True
Console.WriteLine(new IPSubnet("fe80::202:b3ff:fe1e:8329/24").Contains("2001:db8::")); // False 
```

此类将所有 IPv4 地址与所有 IPv6 地址区别对待，不尝试在 IPv4 和 IPv6 之间进行转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:36:11.463

我不会为你写代码，但是：

*   [http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx)
*   [http://blogs.msdn.com/b/knom/archive/2008/12/31/ip-address-calculations-with-c-subnetmasks-networks.aspx](http://blogs.msdn.com/b/knom/archive/2008/12/31/ip-address-calculations-with-c-subnetmasks-networks.aspx)
*   [IP 地址是否与本地计算机位于同一子网上（支持 IPv6）](https://stackoverflow.com/questions/3679652/is-ip-address-on-the-same-subnet-as-the-local-machine-with-ipv6-support)
*   [计算子网内的所有地址...对于 IPv6](https://stackoverflow.com/questions/7082727/calculating-all-addresses-within-a-subnet-for-ipv6)

应该足以让你开始。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T08:31:13.650

我建议使用 IPNetwork 库[https://github.com/lduchosal/ipnetwork](https://github.com/lduchosal/ipnetwork)。从版本 2 开始，它也支持 IPv4 和 IPv6。

**IPv6**

```
 IPNetwork ipnetwork = IPNetwork.Parse("fe80::202:b3ff:fe1e:8329/24");

  IPAddress ipaddress = IPAddress.Parse("2001:db8::");
  IPAddress ipaddress2 = IPAddress.Parse("fe80::202:b3ff:fe1e:1");

  bool contains1 = IPNetwork.Contains(ipnetwork, ipaddress);
  bool contains2 = IPNetwork.Contains(ipnetwork, ipaddress2);

  Console.WriteLine("{0} contains {1} : {2}", ipnetwork, ipaddress,     contains1);
  Console.WriteLine("{0} contains {1} : {2}", ipnetwork, ipaddress2,     contains2); 
```

输出

```
 fe80::/24 contains 2001:db8:: : False
   fe80::/24 contains fe80::202:b3ff:fe1e:1 : True 
```

**IPv4**

```
 IPNetwork ipnetwork = IPNetwork.Parse("192.168.168.100/24");

  IPAddress ipaddress = IPAddress.Parse("192.168.168.200");
  IPAddress ipaddress2 = IPAddress.Parse("192.168.0.200");

  bool contains1 = IPNetwork.Contains(ipnetwork, ipaddress);
  bool contains2 = IPNetwork.Contains(ipnetwork, ipaddress2);

  Console.WriteLine("{0} contains {1} : {2}", ipnetwork, ipaddress, contains1);
  Console.WriteLine("{0} contains {1} : {2}", ipnetwork, ipaddress2, contains2); 
```

输出

```
 192.168.168.0/24 contains 192.168.168.200 : True
  192.168.168.0/24 contains 192.168.0.200 : False 
```

玩得开心 ！

# facebook-opengraph - Tumblr 忽略打开的图形标签

> ID：10525543
> 
> 赞同：1
> 
> 时间：2012-05-09T23:26:25.993
> 
> 标签：facebook-opengraph, tumblr

我在网站上有一些社交分享按钮。我已经能够使用开放图形标签来准确指定我想要共享的内容。他们与除 Tumblr 之外的所有主要社交网络合作。有谁知道为什么或我应该做什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:09:22.543

尽管这是一篇较旧的帖子，但我偶然发现了它，并认为我会为未来的人们发布回复。我希望OP找到更及时的答案。

这取决于您的开放图形标签如何设置 - 在您的索引页面上？或者在您的永久链接页面上？Facebook 不允许你传递参数，它只能抓取页面上的内容。所以在索引页面上它只能获取一般的博客信息，因为在一个有很多帖子的页面上没有办法写出唯一的 OG 元标记。而在单个永久链接页面上，您可以创建开放图形标签以具体说明帖子。这是来自 addthis.com 支持页面的链接，该链接解释了 facebook 如何获取其打开的图表信息以及为什么在从主索引页面共享时它不具体发布：http: [//support.addthis.com/customer/portal/questions/ 245592-分享按钮-tumblr-posts](http://support.addthis.com/customer/portal/questions/245592-share-buttons-on-tumblr-posts)

这是一个指向“赞”按钮页面的链接，它总体上解释了开放图形标签的工作原理：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

以下是设置 tumblr 模板的示例，以便它可以在永久链接页面上获取更多详细信息：

```
<!-- OPEN GRAPH INFO-->
<meta property="og:type" content="blog" />
<meta property="og:site_name" content="{Title}" />
{block:PermalinkPage}
   <meta property="og:title" content="{block:PostSummary}{PostSummary}{/block:PostSummary}" />
{block:Posts}

{block:Photo}
  <meta property="og:image" content="{PhotoURL-500}" />
{/block:Photo}

{block:Answer}
   <meta property="og:image" content="{AskerPortraitURL-128}"/>
{/block:Answer}

{block:Text}
  <meta property="og:image" content="{PortraitURL-128}" />
{/block:Text}

{block:Photoset}
 {block:Photos}
   <meta property="og:image" content="{PhotoURL-500}" />
 {/block:Photos}
{/block:Photoset}

{block:Quote}
   <meta property="og:image" content="{PortraitURL-128}" />
{/block:Quote}

{block:Link}
   <meta property="og:image" content="{PortraitURL-128}" />
{/block:Link}

 {block:Chat}
   <meta property="og:image" content="{PortraitURL-128}" />
 {/block:Chat}

{block:Video}
  <meta property="og:image" content="{PortraitURL-128}" />
{/block:Video}

{/block:Posts}

{/block:PermalinkPage}

{block:IndexPage}
   <meta property="og:title" content="{block:Description}{MetaDescription}{/block:Description}" />
   <meta property="og:image" content="{PortraitURL-128}" />
{/block:IndexPage}

<meta property="fb:app_id" content="YOUR_FB_APP_ID" /> <!-- YOU CAN ALSO USE A DIFFERENT TAG FOR YOUR PROFILE ID INSTEAD NOTE - use one of the other, not both -->
<meta property="fb:admins" content="YOUR_FB_ADMIN_ID" />
<!-- END OPEN GRAPH --> 
```

# html - 元素内的文本位置

> ID：10525548
> 
> 赞同：8
> 
> 时间：2012-05-09T23:27:16.957
> 
> 标签：html, css

 这是我当前的代码的样子：

**HTML：**

```
<a class="button" href="#">Read More</a> 
```

**CSS：**

```
.button {
background:url('../images/btn_bg.jpg') repeat scroll 0% 0%;
font: 12px Helvetica, Arial, sans-serif;
color: #FFF;
text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.2);
text-transform: uppercase;
text-align: center;
text-decoration: none;

cursor: pointer;
border: none;

min-width: 87px;
min-height: 29px;

float: right;
margin-top: 14px;

padding-top: 4.25px;

transition: all 0.5s ease 0s;
-webkit-transition: all 0.5s ease 0s;
-moz-transition: all 0.5s ease 0s;
-o-transition: all 0.5s ease 0s;
}

.button:hover {
background: url('../images/btn_over.jpg') repeat scroll 0% 0%;
} 
```

**结果**：

![JPG 图片结果](../Images/d4aadfc63da0e968ad6ed2a198952bb8.png)

* * *

首先，全部包含在其中的列有一个`margin-bottom: 14px`. 这将创建与列之间的间距及其下方的两条水平线。因此，如果用户想将按钮全部取出，列内的文本仍会与下面的两行相距 14px。

如您所见，使用 css属性和. 的文本`.button`与中间对齐。按钮上有一个，按钮上方和下方的间距相同。`padding``text-align: center``margin-top: 14px`

但是，我发现通过使用`padding`按钮内的文本元素，它会影响它周围的距离（在这种情况下，按钮下方的空间应该是 14 像素，现在比它应该的大）。

**问题：**

有没有一种方法可以在不使用填充属性的情况下垂直对齐文本，`.button`因为我已经尝试了垂直对齐、位置、浮动和其他一些属性，但是如果不更改框上方或下方的空间就没有成功...什么是解决此问题的最佳方法，如果可能的话，另一种仅使用图像的方法？ 

任何帮助将不胜感激。[http://jsfiddle.net/9xpfY/](http://jsfiddle.net/9xpfY/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T23:43:31.433

有两种方法可以做到这一点，但是如果没有 javascript，这两种方法都需要绝对高度，尽管第二个选项相对于`padding`您设置的值起作用。

* * *

*   首先，一个明显的选择是使用行高。

    这通过将文本行的高度设置为一个值来工作，并且因为文本已经在本机垂直对齐到 line-height 的中心，您可以获得您正在寻找的效果。

    添加该行将`line-height : 27px;`为`.button {`您提供所需的结果。

    [jsfiddle](http://jsfiddle.net/mikeymagic/BLx9u/)

* * *

*   第二种方法是将元素内的文本包装在 span 标签中，并将`bottom`属性设置为`bottom: -6.75px;`

    你的按钮元素看起来像这样

    `<a class="button" href="#"><span id="buttontext">Read More</span></a>`

    您可以将此行添加到您的 css 中：

    `#buttontext {position: relative; bottom: -6.75px;}`

    [jsfiddle](http://jsfiddle.net/mikeymagic/Mv2Zx/)

**参考**

*   [线高](http://reference.sitepoint.com/css/line-height/)

*   [底部](http://reference.sitepoint.com/css/bottom)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:30:21.193

您想使用“line-height”样式来指定里面文本的行高。请记住，在某些情况下，这也可能会改变元素的高度（例如，当 line-height 大于 element 的 min-height 时）。看到这个：http: [//jsfiddle.net/VvnhJ/](http://jsfiddle.net/VvnhJ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T23:31:28.003

设置`line-height`为与按钮相同的值`height`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:36:14.450

我认为您可以做的一件事是使用 line-height 属性。试试这个：

```
.button{
  line-height : 27px;
} 
```

# java - 按一个值对 Java 对象集合进行排序，并按另一个值保持唯一性

> ID：10525555
> 
> 赞同：3
> 
> 时间：2012-05-09T23:27:57.230
> 
> 标签：java, collections, arraylist, comparator, treeset

我需要按整数值“级别”对 Java 对象集合进行排序。我还需要通过“标题”确定此集合是否已经包含一个对象。

我相信集合的最佳选择是具有一组有序唯一值的 TreeSet。

我有一个具有“级别”和“标题”属性的对象。它的实现方式如下：

它覆盖 Equals 方法（用于检查对象是否已通过“标题”包含在 TreeSet 中。

代码如下所示：

```
@Override
public boolean equals(Object arg0) {

    Artifact obj = (Artifact) arg0;

    if (this.getTitle().equals(obj.getTitle())) { 
        return true;
    }

    return false;
}

@Override
public int compareTo(Artifact aThat) {  

    final int BEFORE = -1;
    final int EQUAL = 0;
    final int AFTER = 1;

    if (this == aThat) return EQUAL;

    if (this.level < aThat.level) return BEFORE;
    if (this.level > aThat.level) return AFTER;

    assert this.equals(aThat) : "compareTo inconsistent with equals.";
    return EQUAL;
} 
```

当我尝试将具有可能重复值的数组列表中的值添加到列表中时。包含似乎不起作用，并且无论如何都会将对象添加到 TreeSet 中。这是代码：

```
TreeSet<Artifact> subsetOfArtifacts = new TreeSet<Artifact>();

ArrayList<Artifact> allArtifacts = getArtifacts(); 
Iterator<Artifact> allArtifactsIter = allArtifacts.iterator();

while (allArtifactsIter.hasNext()) {
    Artifact artifact = (Artifact) allArtifactsIter.next();
    if (!subsetOfArtifacts.contains(artifact)) {
        subsetOfArtifacts.add(artifact);
    }
 } 
```

理想情况下，我希望有一个按级别排序的所有独特工件的列表。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:37:58.130

如果你覆盖[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)你也应该覆盖[`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)！否则，集合的行为，尤其是集合，是未定义的。您应该将此方法添加到您的类中：

```
@Override
public int hashCode() {
    return title.hashCode();
} 
```

接下来，您应该改用 HashSet 并`Set sortedSet = new TreeSet(set);`用于排序。一旦你这样做，它应该一切正常。

原因是 HashTables 依赖于这样一个事实：如果两个对象是，`equal()`那么它们`hashCode()`也是相等*的。*这是javadoc的摘录`hashCode()`

> hashCode 的一般合约是：
> 
> *   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
> *   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
> *   如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:37:28.620

不仅需要 compareTo 来比较级别，还需要它来比较标题，因为 equals 比较的是标题。

```
public int compareTo(Artifact aThat) {

    final int BEFORE = -1;
    final int EQUAL = 0;
    final int AFTER = 1;

    if ( this == aThat ) return EQUAL;

    if (this.level < aThat.level) return BEFORE;
    if (this.level > aThat.level) return AFTER;
    return this.getTitle().compareTo(aThat.getTitle());

//        assert this.equals(aThat) : "compareTo inconsistent with equals.";

//    return EQUAL;
} 
```

此外，正如 Bohemian 所提到的，如果要覆盖 equals()，则应该覆盖 hashCode()，但这不是 TreeSet 允许添加重复项的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:53:30.663

RTFM :D javadoc for TreeSet clearly states: "Note that the ordering maintained by a set (whether or not an explicit comparator is provided) must be consistent with equals if it is to correctly implement the Set interface"

your equals and comparator are inconsistent. the one you need to add and then you will have to sort it.

You might need to create your own implementation for your use case

and as the other guys said: if you change the equals, always change the hashcode.

2 equal objects must produce equal hashcode.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T23:59:41.280

您的 compareTo 应该首先检查级别，然后是标题，如果您希望它先按级别排序，然后按标题排序，并且只有在级别和标题相等时才返回相等。像这样的东西：

```
@Override
public int compareTo(Artifact aThat) 
{
    final int BEFORE = -1;
    final int EQUAL = 0;
    final int AFTER = 1;

    if ( this == aThat ) return EQUAL;

    if( this.level < aThat.level ) return BEFORE;
    if( this.level > aThat.level ) return AFTER;

    int compare = this.getTitle().compareTo(aThat.getTitle());

    if( compare != EQUAL ) return compare;

    assert this.equals(aThat) : "compareTo inconsistent with equals.";

    return EQUAL;
} 
```

在发布之前没有看到 rob 的答案。

# matlab - 操作 dir('./folder') 返回的 Matlab 结构

> ID：10525561
> 
> 赞同：2
> 
> 时间：2012-05-09T23:28:33.377
> 
> 标签：matlab

我最近将我的 Matlab 版本从 2007a 更新到 2012a，我遇到了一些在 R2007a 上运行良好的代码的问题。特别是关于返回的文件名的结构`dir('./folder')`

一个例子：

```
X = dir('./folder');
p = X(:).name; 
```

在 R2007a 中运行此代码，p 包含该文件夹中的所有文件名，但是，在 R2012a 中，p 仅包含 X.names 中第一个文件的名称。我也试过：

```
p = X.name; 
```

和

```
p = X(:,1).name; 
```

所有这些都不会产生所需的文件名列表。

有没有其他人遇到过这个问题？有人能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T23:38:45.947

我很惊讶 R2007a 应该能够做到这一点。无论如何，一直有效的是连接到一个单元格数组中：

```
p = {X.name}; 
```

# sql-server - 是否有适用于 Microsoft SQL Server 的 SQLDeveloper？

> ID：10525573
> 
> 赞同：3
> 
> 时间：2012-05-09T23:30:12.137
> 
> 标签：sql-server

针对 Microsoft SQL Server 数据库进行开发的推荐工具是什么？我们有一个旧版 Microsoft SQL Server，我正在为其开发新服务。我以前从未使用过 Microsoft SQL Server。

例如，针对 Oracle 数据库进行开发，目前我使用 Oracle SQLDeveloper 来计算查询和探索索引等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T23:32:18.267

通常，您将使用[SQL Server Management Studio](http://msdn.microsoft.com/en-us/library/ms174173.aspx)或 SSMS。您还可以使用 Visual Studio。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:34:42.720

您可以下载**[Microsoft SQL Server Management Studio Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)**以开始使用。

如果您只需要 Management Studio，请选择与对应的最后一个*下载按钮。*`ENU\x86\SQLManagementStudio_x86_ENU.exe`

页面上列出了有关其他可执行文件的说明。

# php - 从 PHP 中的抽象父类访问孩子的方法

> ID：10525575
> 
> 赞同：3
> 
> 时间：2012-05-09T23:30:45.667
> 
> 标签：php, oop, inheritance

我正在开发一个非常简单的模板引擎，它允许其他人通过继承 TemplateParser 类来扩展模板解析功能。我的 TemplateParser 类的骨架如下所示：

```
abstract class TemplateParser {

    public static function parse_template($template_file) {
        //Do stuff with $template_file

        $specials = array();
        foreach (get_class_methods(__CLASS__) as $method) {
            if(strpos($method, "replace_") !== false) {
                $specials[] = $method;
            }
        }
    }

} 
```

我想做的是能够获取一个子类并在父类“自动”知道的子类中添加任意数量的 replace_XXXXX 方法。我的问题是`__CLASS__`常量总是等于'TemplateParser'，即使在子类上调用也是如此。有什么方法可以从 TemplateParser中获取*子类的方法？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T00:28:29.023

如果您要使用一种`static`方法，为什么还要麻烦用户扩展父类？

## OOP 与 COP

首先，您所建议的不是**OOP——**而是**COP**（面向类的编程）。我建议您首先考虑一下*为什么*要`TemplateParser::parse_template`设置静态。是否有一个非常非常好的理由（*提示*：不太可能）？仅仅因为 PHP 5.3 引入了后期静态绑定并不意味着您应该在所有地方都随意使用它。事实上，[`static`很少是最好的选择](http://kore-nordmann.de/blog/0103_static_considered_harmful.html)。

## 组合优于继承

其次，您陈述的用例没有为使用继承提供任何令人信服的理由。您几乎应该总是倾向于组合而不是继承。考虑：

```
interface ParserInterface
{
    public function parse_template($template_file);
}

interface ReplacerInterface
{
    // fill in your own interface requirements here
}

class Parser implements ParserInterface
{
    private $replacer;

    public function __construct(ReplacerInterface $replacer)
    {
        $this->replacer = $replacer;
    }

    public function parse_template($template_file)
    {
        $specials = array_filter(function($method) {
            return strpos($method, "replace_") === 0;
        }, get_class_methods($this->replacer));

        foreach ($specials as $method) {
            $this->replacer->$method($template_file);
        }
    }
} 
```

在上面的代码中，我们能够获得[Dependency Injection ^(*wiki*)](http://en.wikipedia.org/wiki/Dependency_injection)的所有优势，并且与使用`static`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:03:51.020

后期静态绑定使这成为可能，因为 php 5.3 具有内置函数：get_call_class() 和/或 forward_static_call()。[http://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

快速示例：

```
class parent_class {
    public function method() {
        echo get_called_class(),PHP_EOL;
    }
    public static function smethod() {
        echo get_called_class(), PHP_EOL;
    }
}

class child_class extends parent_class {
}

$a = new child_class();
$a->method();
$a::smethod(); 
```

这输出： child_class child_class

使用新找到的类名保持与 get_class_methods() 相同的逻辑。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:40:22.967

尝试这个：

```
// Array to hold special functions
$specials = array();

// Get all defined classes in script
$all_classes = get_declared_classes();    

// Loop through all classes
foreach($all_classes as $class)
{
   // Check if class is a child of TemplateParser
   if( is_subclass_of($class,'TemplateParser') )
   {
      // This class is a child of TemplateParser.
      // Get it's methods. 
      foreach (get_class_methods($class) as $method) 
      {
         if(strpos($method, "replace_") !== false) {
            $specials[] = $method;
         }
      }
   }
} 
```

我只是把它写下来（参考了一点 PHP 文档），但还没有测试过。我相信你可以让它做你需要它做的事情。

# javascript - 为什么全局变量被认为是不好的做法？

> ID：10525582
> 
> 赞同：40
> 
> 时间：2012-05-09T23:31:50.723
> 
> 标签：javascript, global-variables, global

我不断看到不要在 JavaScript 中使用全局变量的警告，但似乎人们这么说的唯一原因是因为阻塞了全局命名空间。我可以想象通过将所有变量放入一个大对象中很容易解决这个问题。现在的问题是：除了方便起见，还有其他理由不使用全局变量吗？它们是否涉及任何性能或兼容性问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-09T23:34:06.590

它们使全局命名空间变得混乱，并且比局部变量查找起来更慢。

首先，拥有许多全局变量总是一件坏事，因为很容易忘记您在某处声明了一个变量并意外地在其他地方重新声明了它。如果您的第一个变量是本地变量，那么您没有问题。如果它是全局的，那么它就会被覆盖。当你进入隐含的全局变量时，情况会变得更糟（例如，当你说`someVar = someValue`没有用关键字声明 someVar 时`var`）。

其次，全局变量比局部变量需要更长的时间来“找到”Javascript。速度差异不大，但*确实*存在。

要进一步阅读和更深入地解释为什么全局变量被认为是不好的做法，您可能需要查看[此页面](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-24T20:55:25.563

全局变量可以显着增加耦合，显着降低代码的可扩展性和可测试性。一旦开始使用全局变量，您现在必须知道变量在何处以及如何被修改（即破坏封装）。大多数文献和惯例都认为，在使用全局变量时，性能是您最不关心的问题。

这是一篇[很棒的文章，概述了为什么](http://c2.com/cgi/wiki?GlobalVariablesAreBad)全局变量会引起头痛。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-24T01:26:50.043

简而言之，全局变量会导致（以及更多）以下问题。

1) 变量命名冲突 - 如果您在一个团队中工作，并且您自己和您的同事在全局范围内使用相同的变量名，最后定义的变量将覆盖初始变量。这种明显的后果可能会产生毁灭性的后果。

2) 安全性——特别是在网络上，每个用户都可以访问 Window（或全局）对象。通过将变量放在全局范围内，您可以让任何用户查看或更改您的变量。

3) 较慢 - 这可以说是微不足道的，但它仍然存在。JavaScript 变量查找的工作方式是 JavaScript 引擎将对正在查找的变量的当前作用域进行查找。如果找不到，它将在下一个父作用域上进行查找。如果它在那里没有找到它，它将继续向上查找，直到它到达寻找该变量的全局对象。如果您的所有变量都位于全局范围内，JavaScript 引擎将始终必须遍历每个范围才能最终到达全局范围以找到变量。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-09T23:39:21.310

如果您的脚本很长并且您从许多函数中使用这些变量，它将增加您的调试时间，因为全局变量的值可能已从任何地方更改，因此如果您正在跟踪更改为非预期值的位置，您'必须全部检查。

如果不同的程序员从您页面中包含的其他脚本修改此变量，这种情况会更加痛苦。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-17T07:17:10.060

只要您将全局变量包装在唯一的命名空间/对象中（以避免与不属于您的脚本发生冲突），在您的代码中使用全局变量应该不会有任何问题

在 javascript 中使用全局变量有一个好处，它源于 javascript 不是一种强类型语言这一事实​​。因此，如果您将某些复杂对象作为参数传递给函数，您将可能会失去这些对象的所有智能（在函数范围内）。而使用全局对象，则会保留该智能。当你有智能时，它实际上可以改善调试时间（与其他人所说的相反......）

我个人觉得这非常有用，它肯定在我的代码中占有一席之地。

（当然，应该始终在局部变量和全局变量之间做出正确的平衡）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T23:34:44.807

基本上，因为它们可以从页面上的任何脚本访问，并且因为您可以在同一范围内重复它的名称。这就是为什么很多 Javascript 引擎都使用这段代码的原因：

```
(function(){
    var foo = 'foo',//Local
    bar = 'bar';//Local
    window.globalVar = foo + bar;//Global
})();
alert(foo);//Error
alert(bar);//Error
alert(globalVar );//'foobar' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-06T17:43:28.377

The global variable which you have created might overwrite the existing window object properties. Because the global variables are accessing in global context i.e. window object.

# javascript - javascript 重定向（设置 window.location.href）后代码会发生什么？

> ID：10525584
> 
> 赞同：31
> 
> 时间：2012-05-09T23:32:03.873
> 
> 标签：javascript, firefox, google-chrome, cross-browser, window.location

我有以下 javascript 重定向代码，然后是更多代码。

```
window.location.href = '/someurl';
alert('hello');
alert('hello again'); 
```

这会导致浏览器不一致。

在 Firefox 中，第一个警报在被重定向之前的瞬间可见。第二个警报根本不可见。

在 chrome 中，两个警报都会弹出，并且只有在两个警报都单击“确定”后才会发生重定向。

是否有一些关于重定向后代码会发生什么的概念可以解决这些差异？如果重定向是异步的，那么 chrome 在做什么？我想了解正在发生的事情，以便我可以确定在重定向深埋在某些回调和其他逻辑中的更复杂的情况下要做什么。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-10T00:34:56.040

面对即将到来的厄运，Javascript 会议将难以继续其使命。以这种方式编码被认为是不可预测的。……而且残忍。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-09T23:39:43.930

浏览器会尝试执行代码，`window.location.href = 'url'`直到页面转到下一个网址，因此将执行的代码行数取决于浏览器的速度

# jquery - jQuery弹跳效果问题

> ID：10525589
> 
> 赞同：1
> 
> 时间：2012-05-09T23:32:21.360
> 
> 标签：jquery, animation, bounce

我正在尝试在一些图像上使用 jQuery 的反弹效果。当我将鼠标悬停在图像上时，您会看到反弹一次。但是，如果您将鼠标移出并希望再次滚动图像，则图像将不再反弹。每隔一段时间它就会抛出一个js错误，但它并不一致。“b.callback.apply 不是函数”。这里是：

[http://jsfiddle.net/ZWrzM/3/](http://jsfiddle.net/ZWrzM/3/)

不太确定我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:43:00.930

你的 effect() 参数有一个额外的 {,}

```
$('img.hp_icons').hover(function() {
$(this).effect("bounce", {
    distance: 10,
    times: 3
}, 500);
}); 
```

# c++ - 如何在 C++ 中从 txt 文件中检索数据

> ID：10525591
> 
> 赞同：3
> 
> 时间：2012-05-09T23:32:39.540
> 
> 标签：c++, visual-c++

我遇到的问题是我能够创建一个文本文件，一次写入文本。我希望能够在必要时添加更多行而不创建新文件。我的下一个问题是我似乎无法获得我正在寻找的输出。例如。文本文件包含

> start1
> fname|lname|ssn
> end1

我的目标是只在 start1 和 end1 中获取数据，并返回 fname lname 和 ssn 而不使用分隔符 |。这是我的代码

```
int main()
{
    fstream filestr;
    string line;

    filestr.open ("file.txt", fstream::in | fstream::out | fstream::app);
    if(!filestr.is_open())
    {
        cout << "Input file connection failed.\n";
        exit(1); 
    }
    else{
        filestr<<"Start2\n";
        filestr<< "middle|middle"<<endl;
        filestr<<"end2"<<endl;
        if(filestr.good()){
            while(getline(filestr, line) && line !="end1"){
                if(line !="Start1"){
                    //below this point the output goes screwy
                    while(getline(filestr, line,'|')){
                        cout<<"\n"<<line;
                    }
                }
            }
        }
        filestr.close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:52:30.233

Nearly:

When you open a file for appending the read position is at the end. So before you start reading you need to seek back to the beginning (or close and re-open).

```
 filestr.seekg(0); 
```

The second probelem is that you nested while loop does not check for end:

```
 while(getline(filestr, line,'|')){
                    cout<<"\n"<<line; 
```

This breaks up the line. But it does not stop at the end of the line. it keeps going until it reaches the end of the file.

What you should do is take the current line and treat it as its own stream:

```
 if(line !="Start1")
            {   
                std::stringstream   linestream(line);
              // ^^^^^^^^^^^^^^^^^^  Add this line

                while(getline(linestream, line,'|'))
                {         //  ^^^^^^^^^^ use it as the stream
                    cout<<"\n"<<line;
                }   
            } 
```

PS: In the file.txt

```
start1
^^^^^ Note not Start1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:54:33.170

```
while(getline(filestr, line))
{
      if(line !="Start1" && line != "end1")
      {
          // Get the tokens from the string.           
      }
} 
```

# haskell - 在 Haskell 中从 IO 中获取元素

> ID：10525593
> 
> 赞同：4
> 
> 时间：2012-05-09T23:32:43.733
> 
> 标签：haskell

我正在完成令人惊叹[的“在 48 小时内为自己写一个计划”，](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours)并完成了核心任务并想扩展它，但遇到了问题。我想做的是使`eval`函数可用于运行时，但在将其存储到全局环境中时遇到问题。

运行时环境的类型：

```
type Env = IORef [(String, IORef LispVal)] 
```

Haskell`eval`实现的类型为：

```
eval :: Env -> LispVal -> IOThrowsError LispVal 
```

全局环境是一个类型的映射：

```
primitiveBindings :: IO Env 
```

因为它包含执行 IO 的函数和纯函数。我的尝试是将运行时设置为部分应用全局环境`eval`的主机，如下所示：`eval`

```
baseFun :: [(String, [LispVal] -> IOThrowsError LispVal)]
baseFun = [("eval", unaryOp (eval (liftIO $ readIORef primitiveBindings)))] 
```

在哪里`unaryOp`：

```
unaryOp :: (LispVal -> ThrowsError LispVal) -> [LispVal] -> ThrowsError LispVal
unaryOp f [v] = f v 
```

然后我想将元素添加到全局环境中，但出现以下编译错误：

```
Couldn't match expected type `IORef a'
       against inferred type `IO Env'
In the first argument of `readIORef', namely `primitiveBindings'
In the second argument of `($)', namely `readIORef primitiveBindings'
In the first argument of `eval', namely
    `(liftIO $ readIORef primitiveBindings)' 
```

这种模式似乎`readIORef env`经常发生在代码中，所以不清楚为什么它在这里不起作用。我将非常感谢对我的错误的启发。作为参考，我的代码几乎与作为参考[的原始教程的最终代码完全一样。](http://jonathan.tang.name/files/scheme_in_48/code/listing10.hs)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T01:36:01.947

据我所知，`primitiveBindings`这*不是*一个全局环境，而是一个动作，当执行该动作时，会使用已经设置的原始绑定生成一个新的映射。也许更好的名字是`createPrimitiveBindings`. 没有`unsafePerformIO`hack 就没有办法在 Haskell 中拥有适当的全局变量。

因此，您尝试添加的方式`eval`将使其评估*新*环境中的所有内容，因为您正在重新运行该`primitiveBindings`操作。如果这确实是您想要的，我们可以轻松地处理类型错误：

```
baseFun :: [(String, [LispVal] -> IOThrowsError LispVal)]
baseFun = [("eval", evalInNewEnv)]
    where evalInNewEnv args = do
              env <- liftIO primitiveBindings
              unaryOp (eval env) args 
```

如您所见，这里不需要任何内容`readIORef`​​，因为`eval`已经期望`Env`which 只是 . 的类型同义词`IORef`。

但是，在我看来，您想`eval`在“全局”环境中工作，在这种情况下，您需要以某种方式将此环境传递给您，因为正如我所提到的，没有全局变量。例如，我们可以定义这样的东西，它会`eval`在其中创建一个新环境。

```
primitiveBindingsWithEval :: IO Env
primitiveBindingsWithEval = do
    env <- primitiveBindings    
    bindVars env [("eval", unaryOp (eval env))] 
```

`primitiveBindings`然后，`primitiveBindingsWithEval`当您想要一个新的环境时，您可以替换现有的使用`eval`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:26:15.137

您的问题（来自错误消息）是`readIORef primitiveBindings`.

由于`readIORef :: IORef a -> IO a`和`primitiveBindings :: IO (IORef [(String, IORef LispVal)])`类型不对齐（通知`primitiveBindings`包含在 中`IO`）。

试试`primitiveBindings >>= readIORef`。

对于标题中的问题：您不能“从 IO 中获取元素”，因为`IO`世界是这样，并且 haskell 不会公开其实现，因此您只剩下`Monad`(bind and return)提供的接口. 如果需要，有人可以指导您更好地解释这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T00:22:47.120

假设： 的类型`unaryOp`实际上涉及`IOThrowsError`您编写的任何地方`ThrowsError`。然后，仅根据您在不知道域的情况下给出的类型，我可以猜测您的意思：

```
baseFun = [("eval", unaryOp (\lispVal -> liftIO primitiveBindings >>= flip eval lispVal))] 
```

这看起来是否与您想要的相当接近？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T17:56:27.683

你`IO`有点随意地混合和纯函数。本质上，您有三个问题：

1.  你想要`unaryOp (eval (liftIO $ readIORef primitiveBindings))`有类型`[LispVal] -> IOThrowsError LispVal`，但是`unaryOp`返回类型`[LispVal] -> ThrowsError LispVal`，和`IOThrowsError`不一样`ThrowsError`。有几种方法可以解决这个问题，但到目前为止最简单的是概括 的类型`unaryOp`：

    ```
    unaryOp :: (a -> b) -> [a] -> b
    unaryOp f [v] = f v 
    ```

    （当第二个参数不是单例列表时，您可能还应该提出更好的错误消息。）

    Now`unaryOp`做了它之前做的事情，但`[LispVal] -> IOThrowsError LispVal`如果你给它也可以返回`LispVal -> IOThrowsError LispVal`，这正是给`eval` *它*的东西。到目前为止，一切都很好。但：

2.  `liftIO (readIORef primitiveBindings)`不进行类型检查，因为`primitiveBindings`它不是一个`IORef`，它是一个在运行时*产生*`IO`的动作。因此，您可以执行读取with的操作，即 ie ，但实际上您*不想*这样做，因为您想将自身传递给，而不是其内容。所以你应该改用。但：*`IORef``IORef``=<<``readIORef =<< primitiveBindings`*`IORef``eval``liftIO primitiveBindings`**

***   `eval`接受 type 的参数`Env`，但`liftIO primitiveBindings`is type `IOThrowsError Env`（实际上，它比这更通用，但这已经足够接近了）。因此，您需要先使用`>>=`或`do`提取该值：

    ```
    evalOp val = do
      env <- liftIO primitiveBindings
      eval env val

    baseFun = [("eval", unaryOp evalOp)] 
    ```** 

 **顺便说一句，为了解决问题标题的语气：在 Haskell 中，您不会从`IO`. 您所做的是编写函数，然后将其*放入* `IO`以获取更多信息`IO`。`>>=`（即`do`符号）并且`return`是“提升”函数以对`IO`值进行操作的常用技术。**

# javascript - 请帮我用 html 输出替换一些 javascript

> ID：10525597
> 
> 赞同：0
> 
> 时间：2012-05-09T23:33:18.250
> 
> 标签：javascript, mailchimp

我的页面上有一个 Mailchimp 电子邮件注册表单。当注册成功或失败时，它会从 javascript 库中获取成功/失败消息。

我想阻止它获取默认消息（我无法编辑，因为我相信它们存在于 Mailchimp 的服务器上）并用我自己的替换它们。你能帮我吗？

以下是相关功能：

```
function mce_success_cb(resp){
$('#mce-success-response').hide();
$('#mce-error-response').hide();
if (resp.result=="success"){
    $('#mce-'+resp.result+'-response').show();
    $('#mce-'+resp.result+'-response').html(resp.msg);
    $('#mc-embedded-subscribe-form').each(function(){
        this.reset();
    });
} else {
    var index = -1;
    var msg;
    try {
        var parts = resp.msg.split(' - ',2);
        if (parts[1]==undefined){
            msg = resp.msg;
        } else {
            i = parseInt(parts[0]);
            if (i.toString() == parts[0]){
                index = parts[0];
                msg = parts[1];
            } else {
                index = -1;
                msg = resp.msg;
            }
        }
    } catch(e){
        index = -1;
        msg = resp.msg;
    }
    try{
        if (index== -1){
            $('#mce-'+resp.result+'-response').show();
            $('#mce-'+resp.result+'-response').html(msg);            
        } else {
            err_id = 'mce_tmp_error_msg';
            html = '<div id="'+err_id+'" style="'+err_style+'"> '+msg+'</div>';

            var input_id = '#mc_embed_signup';
            var f = $(input_id);
            if (ftypes[index]=='address'){
                input_id = '#mce-'+fnames[index]+'-addr1';
                f = $(input_id).parent().parent().get(0);
            } else if (ftypes[index]=='date'){
                input_id = '#mce-'+fnames[index]+'-month';
                f = $(input_id).parent().parent().get(0);
            } else {
                input_id = '#mce-'+fnames[index];
                f = $().parent(input_id).get(0);
            }
            if (f){
                $(f).append(html);
                $(input_id).focus();
            } else {
                $('#mce-'+resp.result+'-response').show();
                $('#mce-'+resp.result+'-response').html(msg);
            }
        }
    } catch(e){
        $('#mce-'+resp.result+'-response').show();
        $('#mce-'+resp.result+'-response').html(msg);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:05:15.787

我认为在任何地方你都会看到这样的东西：

`$('#mce-'+resp.result+'-response').html(msg);`

您想根据您在逻辑中的位置，用您的相关文本替换味精部分。所以你发布的代码中的第一个（第6行）是成功=真，所以替换

`$('#mce-'+resp.result+'-response').html(resp.msg);`

有类似的东西

`$('#mce-'+resp.result+'-response').html('Successfully signed up');`

# php - 通过 PHP、HTML5、jQuery 控制带有语音的 Web 表单？

> ID：10525598
> 
> 赞同：4
> 
> 时间：2012-05-09T23:33:22.673
> 
> 标签：php, jquery, html, speech-recognition

我有兴趣了解一种通过 HTML5、PHP 和/或 javascript jQuery 使用语音识别来控制网页（最好是在 Chrome 浏览器中）的方法。

我知道 HTML5 语音命令`<input type="text" x-webkit-speech />`，但是如果你有多个输入并且你说“下一个”这个词，我希望它专注于下一个输入。或者说一个人说“提交”这个词，它会提交一个输入，得到漂移？

它可能是自定义语音代码，但找不到任何信息，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:05:10.487

如果您乐于在这个阶段只支持 Chrome，您应该能够通过在收到`webkitspeechchange`事件时检查启用 webkit 语音的输入的值来做到这一点。[请参阅此处](http://jsfiddle.net/Ju9jP/2/)的小提琴（对[iRomin](http://www.rominirani.com/2011/07/12/voice-enabled-web-applications-via-x-webkit-speech/)的帽子提示）。

显而易见且非常重要的问题是，您需要在页面上启用 webkit 语音输入字段，并且用户必须单击麦克风图标才能开始录制。W3 规范提到了一种[`startSpeechInput`](http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html#method-start-speech-input)方法，但在我的 Chrome (18) 版本中似乎没有实现。

如果限制太大，您不能等到 Chrome 实现该方法，和/或您需要支持其他浏览器，您可以查看使用 Flash 访问麦克风并提供的`startSpeechInput`开源[语音 API](http://www.speechapi.com/)客户端的 JavaScript API。从文档看来，它为服务器端提供了多种选项，包括托管服务。还有各种演示可以让您了解它是否适​​合这项工作。

# javascript - Twitter Bootstrap JS 中 $.fn.foo.Constructor = Foo 的目的是什么

> ID：10525600
> 
> 赞同：12
> 
> 时间：2012-05-09T23:33:47.520
> 
> 标签：javascript, jquery

Twitter Bootstrap 的所有 jQuery 插件都遵循相同的基本模式，即定义一个控制插件行为的类。接近尾声时，他们这样做：

```
$.fn.alert.Constructor = Alert 
```

这是在做什么？

我假设这是定义一个原型构造函数，但它们使用大写 C。大小写在这里无关紧要吗？除此之外，我真的不明白这是在做什么以及插件如何使用它。

例如，这里是警报插件： [https ://github.com/twitter/bootstrap/blob/master/js/bootstrap-alert.js](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-alert.js)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T00:44:03.280

这里没有魔法，`Constructor`（大C）作为属性没有特殊意义。这只是惯例。

基本上他们使用类结构来定义功能

```
var Alert = function() {};
Alert.prototype.foo = function() {}; 
```

并通过非类接口公开它。

```
$('#blurf').alert(); 
```

所以这只是一个有用的插件约定。每个 jQuery 插件都在`$.fn`对象上定义自己的主要方法，该方法可以通过闭包访问所需的构造函数。但是构造函数本身对于该闭包是私有的。将其分配为`$.fn.myplugin.Constructor`简单地使其他代码可以访问该构造函数，从而允许您在必要时进行高级控制

```
var myAlert = new $.fn.alert.Constructor('Hello World'); // or something 
```

现在你可以这样：

```
$.fn.alert.Alert = Alert; 
```

这在主观上是丑陋和多余的。现在您必须翻译或猜测导致构造函数的属性名称。如果你说每个插件都是用一个类实现的，并且每个类的构造函数都可以找到，`$.fn.myplugin.Constructor`那么你就有了一个一致的接口来访问每个插件背后的类。

再说一次，这只是惯例，没什么特别的。

# c#-4.0 - AOP 忽略日志成功

> ID：10525601
> 
> 赞同：1
> 
> 时间：2012-05-09T23:34:03.003
> 
> 标签：c#-4.0, aop, postsharp, log4postsharp

我们使用 PostSharp 作为我们的 AOP 引擎，不知何故它表现得很奇怪。我知道它会在函数之前和之后放置挂钩点，并在调用属性函数之前和之后记录 LogEntry 和 LogSuccess 事件。

我正在配置我们的事件记录模块，以便用户可以在 LogEntry 和 LogSuccess 上获得不同数量的积分。

现在，当 LogEntry 发生并且我将其设置为 10 分时，此人将获得 10 X 2 =20 分。但是，如果我设置用户在 LogSuccess 上获得一些分数，那么用户根本不会获得任何分数。

不知何故，我觉得 LogEntry 点值覆盖了 LogSuccess 点。

我不知道它为什么这样做，最重要的是，我在我的数据库中看到一个事件，那里有正确的点。

以前有人从 AOP 中观察过这种行为之王吗？

谢谢，

# bash - /usr/bin/env 错误的解释器

> ID：10525603
> 
> 赞同：1
> 
> 时间：2012-05-09T23:34:14.587
> 
> 标签：bash, .bash-profile

试图让亚马逊的 EC2 命令行工具工作。这就是我的 .bash_profile 的样子。我收到错误：/users/zmjones/.ec2/bin/ec2-add-keypair: /usr/bin/env: bad interpreter: Operation not allowed

```
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:$PATH
PATH=/opt/local/sbin:/usr/local/bin:/usr/x11/bin:/usr/texbin:$PATH
PATH=/usr/local/texlive/2011/bin/x86_64-darwin:$PATH
PATH=/Library/Frameworks/EPD64.framework/Versions/Current/bin:$PATH
EC2_HOME=~/.ec2
PATH=$PATH:$EC2_HOME/bin
EC2_PRIVATE_KEY=`ls $EC2_HOME/pk-*.pem`
EC2_CERT=`ls $EC2_HOME/cert-*.pem`
JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/

export PATH 
```

有人认为这有什么问题吗？我不确定我做错了什么。

的输出`ls -l /usr/bin/env`

```
-r-xr-xr-x  1 root  wheel  34720 Sep  8  2011 /usr/bin/env
zmjones-mbp:.ec2 zmjones$ /usr/bin/env
TERM_PROGRAM=iTerm.app
TERM=xterm
SHELL=/bin/bash
TMPDIR=/var/folders/x3/vrw5029d1rj9xblj8bmxl0m00000gn/T/ 
Apple_PubSub_Socket_Render=/tmp/launch-91y0bp/Render
OLDPWD=/Users/zmjones
USER=zmjones
COMMAND_MODE=unix2003
SSH_AUTH_SOCK=/tmp/launch-H3JJsl/Listeners
__CF_USER_TEXT_ENCODING=0x1F5:0:0
Apple_Ubiquity_Message=/tmp/launch-n2bT2X/Apple_Ubiquity_Message
PATH=/users/zmjones/.ec2/bin:/Library/Frameworks/EPD64.framework/Versions/Current/bin:/usr/local/texlive/2011/bin/x86_64-darwin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/x11/bin:/usr/texbn
PWD=/Users/zmjones/.ec2
 JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/
LANG=en_US.UTF-8
ITERM_PROFILE=Default
SHLVL=1
HOME=/Users/zmjones
ITERM_SESSION_ID=w0t0p0
LOGNAME=zmjones
EC2_PRIVATE_KEY=pk-mykey.pem
DISPLAY=/tmp/launch-6kkP5t/org.x:0
EC2_CERT=cert-mycert.pem
 _=/usr/bin/env 
```

部分解决方案：`tr -d '\r' < /users/zmjones/.ec2/bin/ec2-add-keypair > /users/zmjones/.ec2/bin/ec2-add-keypair`

这似乎允许命令执行，但它们现在不起作用。例如，我下载了一个新的 ec2 api 工具副本，`~/.ec2`尝试使用它们`ec2-describe-images -o amazon`并得到错误的解释器错误。我重命名`ec2-describe-images`为`ec2-describe-images.bak`运行`tr`上面列出的命令并再次尝试。然后我收到一个`permission denied error`. 当我用 sudo 运行它时，它告诉我`EC2_HOME`未设置，但`echo $EC2_HOME`表明已设置。我跑了`chmod +x ec2-describe-images`，现在我又回到了同样的错误解释器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:26:34.623

`/users/zmjones/.ec2/bin/ec2-add-keypair`有 DOS[行尾](http://en.wikipedia.org/wiki/Newline#Representations)。

修理：

```
mv /users/zmjones/.ec2/bin/ec2-add-keypair /users/zmjones/.ec2/bin/ec2-add-keypair.bak
tr -d '\r' < /users/zmjones/.ec2/bin/ec2-add-keypair.bak > /users/zmjones/.ec2/bin/ec2-add-keypair 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-09T22:07:56.770

这在 Windows 上发生在我身上，因为我的 bash 文件中的标题错误。我有 `#!/usr/bin/bash`而不是`#!/usr/bin/env bash`便携式版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:10:00.607

我遇到了完全相同的问题。

问题的原因是**“unarchiver tool”**。

我已经安装了第三方解档工具。它可能会在解压缩过程中更改文件的行尾。

意识到这一点后，我删除了这个工具，并使用原生解压缩工具重新解压了 EC2 压缩球。问题就解决了。

希望这可能对你们有同样问题的人有用。

# objective-c - iOS tableview：隐藏垂直部分图例

> ID：10525604
> 
> 赞同：0
> 
> 时间：2012-05-09T23:34:35.787
> 
> 标签：objective-c, ios5, scrollbar, tableview

我试图隐藏通常在表格视图中显示部分的第一个字符的垂直图例。问题在于，由于分层结构，每个类别（或部分）都以`tu-graz`. 实际上，tableview 提取了节名的第一个字符并建立了一个滚动条。但这最终只出现在栏中的一个字符（`t`）中并且没有意义......

我认为以下屏幕截图更好地描述了我的意思：

![我的问题截图](../Images/2fd92f85b432a3e34ec4afa143fd81b7.png)

有没有简单的方法来隐藏这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:28:55.053

好的，我找到了解决方案。只需`nil`从以下方法返回：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return nil;
} 
```

# mapreduce - 如何找出 MapReduce 作业输出目录中的最后一个零件号

> ID：10525617
> 
> 赞同：0
> 
> 时间：2012-05-09T23:36:16.627
> 
> 标签：mapreduce, hdfs

我想知道是否有办法找出 MapReduce 输出目录中的最后一个零件号？我想将另一个目录中的一些文件移动到该目录，但我想让它们看起来好像它们是同一输出的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:53:43.113

对于仅地图作业，它是输入拆分的数量。对于减少的工作，它的减少器的数量。请注意，根据文件的输出编号（0 到 n-1），这两个值都为零

# android - Android - 使用 CommonWare 的 locpoller 时遇到问题

> ID：10525620
> 
> 赞同：1
> 
> 时间：2012-05-09T23:36:46.800
> 
> 标签：android, service, location, broadcastreceiver

我一直在尝试将我的任何应用程序的 gps 转移到服务中，但我真的很难过。出于某种原因，使用这些服务对我来说一直很痛苦。Opengl 没问题.....将简单数据从服务传递到活动中，在过去的 3 天里一直在杀死我。

因为我发现这是一个彻头彻尾的痛苦，所以我一直在这里寻找一些例子，并遇到了 commonware 的 locpoller。我很快就启动并运行了它，但在我知道它之前，我的代码变得非常复杂，并且在我在这里找到的示例和 git repo 中的演示通用软件之间混杂在一起。

有人可以指出我如何启动服务，设置广播接收器，然后将数据从接收器中提取到我的活动中。这听起来很容易，但实际上它一直让我把头发拔掉。我不需要有人牵着我的手，我只需要看看你如何从服务的广播中获取数据到你的服务绑定的活动中。有了消息和处理程序以及其他所有内容，我现在只是对地狱感到困惑。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:11:19.223

> 有人可以指出我如何启动服务，设置广播接收器，然后将数据从接收器中提取到我的活动中。

您的问题标题似乎与此请求不匹配。是因为它可能...

[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Service/Downloader)有一个向服务发送命令的活动，服务通过广播传递结果`Intent`。

> 我只需要看看你如何从服务的广播中获取数据到你的服务绑定的活动中。

如果您使用绑定模式，为什么需要广播？您可以将某种侦听器对象从活动传递给服务，服务可以在事件发生时调用它。就个人而言，我不喜欢绑定模式并尽可能避免使用它。

# html - HTML字体前卫和像素化

> ID：10525622
> 
> 赞同：0
> 
> 时间：2012-05-09T23:36:54.877
> 
> 标签：html, fonts, smooth

我已经`Verdana,Arial,Helvetica,sans-serif`在我的 H1 标签上使用了字体属性。
下面是它的渲染方式。
如果你仔细观察，它看起来非常前卫/像素化。有没有办法让它平滑？

![在此处输入图像描述](../Images/3ebcc06639a3094222ffe4304f1c9b48.png)

更新：使用 mingos 的解决方案进行渲染。

![在此处输入图像描述](../Images/04b75510296795d65b72326f579bfee5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:48:32.243

您的操作系统/浏览器应该处理好这一点。我假设您使用的是关闭 ClearType 的 Windows XP，或者您的浏览器忽略了操作系统的抗锯齿设置（例如：[在 IE9 中禁用 Cleartype（文本抗锯齿）](https://stackoverflow.com/questions/5427315/disable-cleartype-text-anti-aliasing-in-ie9)）。您无法从 Web 应用程序中控制它，因为 CSS 无法影响浏览器的文本呈现。

# c - 尝试打印 32 位浮点图像的像素值

> ID：10525625
> 
> 赞同：0
> 
> 时间：2012-05-09T23:37:16.137
> 
> 标签：c, opencv

我正在尝试打印 32 位浮点图像的像素强度。这是我正在使用的代码。图像中有两种类型的值，通过在 matlab 上的 imread 中看到它，NAN 和浮点。该程序加载图像，但在尝试运行时挂起。谁能建议我出了什么问题。谢谢你的帮助。

```
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <stdio.h>
#include <sys/types.h>
#include <dirent.h>

void printIplImage(const IplImage* src)
{
    int row = 0,col = 0;
    for(row = 0; row < src->height; row++)
    {
        for(col = 0; col < src->width; col++)
        {       
            printf("%f, ", ((float*)(src->imageData + src->widthStep*row))[col]);
        }
        printf("\n");
    }
}

int main(int argc, char** argv)
{
    IplImage *t3 = cvLoadImage("divimages1.tiff",CV_LOAD_IMAGE_UNCHANGED);

    printIplImage(t3);

    cvReleaseImage (&t3);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:52:25.113

您确定将图像数据加载为 32 位浮点数吗？尝试[按照此处所述显式转换它](https://stackoverflow.com/q/6349493/163956)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T20:38:36.770

如果您先检查加载图像的数据类型，那就太好了。下面是可以帮助您了解数据类型的代码。如果不是“浮点”格式，那么***首先以自己的格式提取像素的值，然后稍后进行类型转换***。我之前也遇到过类似的问题，它帮助了我。

这是一个方便的函数，您可以使用它来帮助在运行时识别您的 opencv 矩阵。我发现它至少对调试很有用。

```
string type2str(int type) {
  string r;

  uchar depth = type & CV_MAT_DEPTH_MASK;
  uchar chans = 1 + (type >> CV_CN_SHIFT);

  switch ( depth ) {
    case CV_8U:  r = "8U"; break;
    case CV_8S:  r = "8S"; break;
    case CV_16U: r = "16U"; break;
    case CV_16S: r = "16S"; break;
    case CV_32S: r = "32S"; break;
    case CV_32F: r = "32F"; break;
    case CV_64F: r = "64F"; break;
    default:     r = "User"; break;
  }

  r += "C";
  r += (chans+'0');

  return r;
} 
```

如果`M`是 var 类型`Mat`，您可以这样称呼它：

```
string ty =  type2str( M.type() );
printf("Matrix: %s %dx%d \n", ty.c_str(), M.cols, M.rows ); 
```

将输出如下数据：

```
Matrix: 8UC3 640x480 
Matrix: 64FC1 3x2 
```

# wpf - 在属性绑定之后评估的 DataContext 绑定——导致崩溃

> ID：10525628
> 
> 赞同：0
> 
> 时间：2012-05-09T23:37:41.907
> 
> 标签：wpf, data-binding, datacontext

我正在尝试设置几个切换按钮的 DataContext，每个切换按钮都对应于列表的特定元素。这些切换按钮是静态的，不是动态生成的，因为我们想在布局中对它们进行分组，而不是将它们全部放在一个区域中。

`ListOfRoles`是对象的集合，每个对象都有一个`IsSelected`属性（类型`bool?`）和一个名称。转换器返回具有`nameToObject`转换器中给定名称的对象。

**我的问题**是 XAML`IsSelected`在评估 DataContext 绑定之前尝试绑定，这会在我们的系统上引发异常。它尝试绑定到`RoleContainerStyle`应用的对象，然后崩溃。这是 XAML：

```
<Style x:Key="RoleContainerStyle" TargetType="{x:Type MyControls:MyListBoxItem}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type MyControls:MyListBoxItem}">
        <Grid>
          <StackPanel Orientation="Horizontal" >
            <ToggleButton Content="Driver To Scene"   IsChecked="{Binding IsSelected}" DataContext="{Binding ListOfRoles, Converter={StaticResource nameToObject}, ConverterParameter='Driver To'}"    HorizontalAlignment="Stretch" Margin="0"       Width="80" Height="40" FontSize="14.667" />
            <ToggleButton Content="Driver From Scene" IsChecked="{Binding IsSelected}" DataContext="{Binding ListOfRoles, Converter={StaticResource nameToObject}, ConverterParameter='Driver From'}"  HorizontalAlignment="Stretch" Margin="8,0,0,0" Width="80" Height="40" FontSize="14.667" />
          </StackPanel>
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

我在转换器中放置了断点，并在尝试评估绑定之前验证它*不会进入转换器。*`IsSelected`

如果我删除`IsSelected`绑定，我*可以*在转换器中捕获执行，所以这似乎是评估顺序的问题，除非我遗漏了有关 XAML 的某些内容。

我尝试过更改 XAML 中属性的顺序，尝试使用指定绑定（嵌套标签）的长格式，但我只是没有想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:18:40.437

如果您只需要为**IsSelected**属性指定**ToggleButton**的 DataContext ，并且如果您的列表始终包含 2 个项目，则可以使用此（未测试，但我希望您明白）：

 **```
<Style x:Key="RoleContainerStyle" TargetType="{x:Type MyControls:MyListBoxItem}">
<Setter Property="Template">
<Setter.Value>
  <ControlTemplate TargetType="{x:Type MyControls:MyListBoxItem}">
      <StackPanel Orientation="Horizontal" >
        <ToggleButton Content="Driver To Scene"   IsChecked="{Binding ListOfRoles[0].IsSelected}" HorizontalAlignment="Stretch" Margin="0"       Width="80" Height="40" FontSize="14.667" />
        <ToggleButton Content="Driver From Scene" IsChecked="{Binding ListOfRoles[1].IsSelected}" HorizontalAlignment="Stretch" Margin="8,0,0,0" Width="80" Height="40" FontSize="14.667" />
      </StackPanel>
  </ControlTemplate>
</Setter.Value> 
```

备注：不要将一个布局控件用于另一个布局控件。（**网格**内的**StackPanel**）**

# javascript - 一些网站如何阻止您离开？

> ID：10525629
> 
> 赞同：-2
> 
> 时间：2012-05-09T23:37:46.783
> 
> 标签：javascript, html, web, spam

> **可能重复：**
> [您如何防止 javascript 页面导航离开？](https://stackoverflow.com/questions/821011/how-do-you-prevent-javascript-page-from-navigating-away)
> [如何阻止页面在 JS 中卸载（导航）？](https://stackoverflow.com/questions/1299452/how-do-i-stop-a-page-from-unloading-navigating-away-in-js)

我去过几个网站，抱歉我不能提供网址，那不让你离开。不管你做什么，除了强制退出（关闭页面，导航到一个新的 url，定期退出，你不能离开）。这些网站总是有一个警告框，会问你一个问题，比如：“你想离开吗？” 但是两个答案（是和取消）都会让您回到他们的页面。我只是想知道他们是如何做到这一点的。 **不会在我的网站上使用它，我不是垃圾邮件发送者，只是想知道**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:38:34.007

使用此代码：

```
window.onbeforeunload = function(){
    return 'Are you sure you wanna leave my website?';//Displays an confirm box and, if you click cancel, you will stay on the page. Otherwise, you'll leave the page
} 
```

但是，将此代码放在您的网站上会使您的观众非常生气。因此我警告你不要这样做

# vim - 当我键入时，如何在vim中的每个新行前面放置一个常量前缀？

> ID：10525630
> 
> 赞同：5
> 
> 时间：2012-05-09T23:37:50.317
> 
> 标签：vim

好吧，这是一个相当复杂的愿望。它源于这样一个事实，即我的大多数 fortran 行都包含一个“调用”语句，而且我厌倦了键入调用、调用、调用、调用...

我想要的是以下内容：

*   每次我按回车，下一行都会在前面自动添加一个“call”字符串。
*   如果我按下制表符，制表符会添加到字符串调用*的前面*（以便我可以缩进）
*   如果我在该行的开头，并且按一次退格键，它将删除“调用”条目，但保留选项卡。同样，如果我键入“i​​f”、“do”、“enddo”和所有相关的，它可以自动删除该条目会很好

您是否知道这样的事情是否已经存在，是否可能，如果您有任何提示或类似的脚本我可以从中获取，我们将不胜感激。

例如，在 C 风格的注释中，每次我按下回车键时，都会在行首自动添加一个星号。执行此操作的代码在哪里（我假设它是插件功能，而不是在 vim 中硬编码）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:03:03.227

我按照您对 C 注释的提示提出了以下建议：

```
:set formatoptions+=ro
:set comments+=s:call,m:call,e:call 
```

如果一行以 'call' 开头，这应该会自动添加具有相同文本的连续行。它仅在上一行包含“呼叫”并且未在您指定的关键字上删除“呼叫”时才有效。随意使用这些选项，也许您会根据您的喜好对其进行自定义。

用于`>>`在正常模式下缩进或在插入模式下使用`Ctrl`+ 。`T`要删除行开头的“呼叫”，请使用`Ctrl`+`W`而不是`Backspace`.

或者，您可以使用缩写来加快打字速度：

```
:iab ,, call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:19:07.213

在我看来，当需要改变 and 的行为时`<CR>`，`<BS>`这意味着有问题，或者迟早会出错，因为有很多边缘情况。

我发现的最大问题之一是我无法猜测光标是在函数内的第一列还是第二列，重要的是要知道能够正确处理制表符和退格键。但在这里你有一个开始。我没有彻底测试它，因为它是一团糟。我不推荐它，我认为**myki**的方法要好得多。

将此注释良好的代码添加到您的`vimrc`文件中并进行测试。

```
"" When pressed 'return' in insert mode:
"" <Esc>: Exit from Insert Mode to Normal Mode.
"" o: Add a new line below the current one and set Insert Mode.
"" call <Esc>: Write literal 'call ' and exit from Insert Mode.
"" A: Set cursor at end of line and enter Insert Mode to begin writting.
inoremap <cr> <Esc>ocall <Esc>A

function! SpecialTab()

    "" Get cursor position.
    let cursor_pos = getpos('.')

    "" If line is empty, insert a tab, update current position and finish
    let line_len = strlen( getline( line('.') ) ) 
    if empty( getline( line('.') ) ) || line_len == 1
        s/\%#/\t/   
        let cursor_pos[2] += 1
        call setpos( '.', cursor_pos )
        return
    endif

    "" Search for a line beginning with 'call', omitting spaces. If found
    "" insert a tab at the beginning of line.
    if match( getline( line('.') ), "\s*call" ) != -1
        s/^/\t/
    else
        "" Insert a normal tab in current cursor position. I cannot use
        "" the regular <Tab> command because function would entry in a 
        "" infinite recursion due to the mapping.
        s/\%#\(.\)/\1\t/
    endif

    "" Set cursor column in the character it was before adding tab character.
    let cursor_pos[2] += 2
    call setpos( '.', cursor_pos )
endfunction

"" Map the tab character.
inoremap <Tab> <Esc>:call SpecialTab()<cr>:startinsert<cr>

function! SpecialBackspace()
    "" Do nothing if line is empty.
    if empty( getline( line('.') ) ) 
        return
    endif

    "" Get cursor position.
    let cursor_pos = getpos( '.' )

    "" If cursor is not in first column press 'delete' button and done.
    if col('.') > 1 
        execute "normal \<Del>"
        return
    endif

    "" Search for 'call' string. If found delete it and set cursor in
    "" previous position.
    if match( getline( line('.') ), "\s*call" ) != -1
        s/call//
        let cursor_pos[2] = 1 
        call setpos( '.', cursor_pos )
        return
    endif

    "" A line with one character is a special case. I delete the complete
    "" line.
    let line_len = strlen( getline( line('.') ) )
    if line_len == 1
        s/^.*$//
        return
    endif

    "" If cursor is in first column, delete character. Messy behavior, I
    "" think :-/
    if col('.') == 1
        s/^.//
    endif
endfunction

"" Map the 'backspace' character.
inoremap <BS> <Esc>:call SpecialBackspace()<cr>:startinsert<cr> 
```

# function - 如何检查字符串/数组中的两个邻居（元素）是否相同

> ID：10525631
> 
> 赞同：1
> 
> 时间：2012-05-09T23:37:53.683
> 
> 标签：function, haskell, functional-programming

好吧，基本上，我遇到了一个问题，如何让haskell中的函数像这样工作：取字符串的第一个元素，然后取第二个元素并比较它们，然后函数应该继续取第三个元素从字符串中比较第二个和第三个。

如果必须比较前两个，那么接下来的两个会很容易，但在这种特殊情况下我无法弄清楚。

我需要完成这一步才能编写一个函数，如果找到两个相同的相邻元素，则返回 True，如果没有类似的元素则返回 False。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T23:52:24.217

A higher-order way to accomplish this (i.e. no explicit recursion) is to use `zipWith` to perform a point-wise comparison of the elements in the list, starting with the first, against the elements of the list, starting from the second (using `tail`), and then using `or` to collapse the point-wise results into a single result. You don't even need to special case the empty list since `zipWith` is non-strict in its third argument if its second argument is the empty list.

**EDIT:** Solution (hover to reveal)

> `hasNeighbors as = or . zipWith (==) as $ tail as`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:43:03.947

你可以创建一个递归函数来解决这个问题。有3种情况你必须处理：

1.  如果函数得到一个空列表或一个元素的列表，那么显然它不会包含任何邻居，所以你 return `False`。
2.  如果列表以两个不相等的项目开头，则意味着它不是以邻居对开头，因此您应该检查除第一个元素之外的所有列表。
3.  如果列表以两个相等的项目开头，则您知道该列表包含一对邻居，因此您可以返回`True`.

如果您希望我提供执行此操作的代码，或者您不想要更多提示，请告诉我。

**编辑：**解决方案（悬停显示）

> `hasNeighbors :: Eq a => [a] -> True
> hasNeighbors (a : allExceptA @ (b : _))
>   | a == b = True
>   | otherwise = hasNeighbors allExceptA
> hasNeighbors _ = False`

# jquery - 使用 jQuery 从特定站点查找具有 src 的图像

> ID：10525634
> 
> 赞同：1
> 
> 时间：2012-05-09T23:38:09.707
> 
> 标签：jquery, image, match, src

我需要使用 jQuery 删除具有来自 staticflickr.com 的源的页面上的所有图像。有人可以帮忙吗？

```
<img class="colorbox-194" src="http://farm8.**staticflickr.com**/7107/7143029237_13d20551a2.jpg" alt="the stride (explore) by stephane (got my camera back!!)"> 
```

像上面的 img 将被删除。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:42:27.133

试试这个代码：

```
$("img").filter(function() {
    return /^https?:\/\/(\w+.)?staticflickr.com\//.test(this.src);
}).hide();​ 
```

**演示：http:** [//jsfiddle.net/7KbCF/1/](http://jsfiddle.net/7KbCF/1/)

# python - Python 3 和带有进度条的请求

> ID：10525635
> 
> 赞同：4
> 
> 时间：2012-05-09T23:38:23.887
> 
> 标签：python, python-3.x, request, progress-bar, chunks

我正在尝试使用 python 请求下载文件。它在 python 2.7 中工作，但现在不行。我真的很困惑，必须有一个更简单的答案。由于文件可能非常大，我真的想要一个进度条，我正在使用 python procressbar 来完成这项工作。

```
 r = requests.get(file_url, data={'track': 'requests'})
                size = int(r.headers['Content-Length'].strip())
                self.bytes = 0
                widgets = [name, ": ", Bar(marker="|", left="[", right=" "),
                    Percentage(), " ",  FileTransferSpeed(), "] ",
                    self,
                    " of {0}MB".format(round(size / 1024 / 1024, 2))]
                pbar = ProgressBar(widgets=widgets, maxval=size)
                pbar.start()

                file = b""
                for chunk in r.iter_content()
                    if chunk:
                        file += chunk

                        self.bytes += 1
                        pbar.update(self.bytes) 
```

我发现使用 iter_content 是获得持续更新的最佳方式。我确实尝试过 iter_lines 但它弄乱了文件。它突然停止下载，*非常*慢，下载10％需要15分钟，然后停止。并且尝试以字节模式打开文件并写入它是行不通的，它根本不会引发错误。当我尝试打印块包含的内容时

```
print(chunk.decode("utf-8") 
```

有效，但只有几个字符。在某些时候它抱怨

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xff in position 0: invalid start byte 
```

即使在 iter_content 中使用“decode_unicode=True”也无济于事。我很困惑，不知道该怎么办。使用 Py3k 应该不难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T01:12:23.987

设法修复它。所以这是更新的代码：

```
r = requests.get(file_url)
size = int(r.headers['Content-Length'].strip())
self.bytes = 0
widgets = [name, ": ", Bar(marker="|", left="[", right=" "),
    Percentage(), " ",  FileTransferSpeed(), "] ",
    self,
    " of {0}MB".format(str(round(size / 1024 / 1024, 2))[:4])]
pbar = ProgressBar(widgets=widgets, maxval=size).start()
file = []
for buf in r.iter_content(1024):
    if buf:
        file.append(buf)
        self.bytes += len(buf)
        pbar.update(self.bytes)
pbar.finish() 
```

下载速度从 7kb/s 变为 400+ kb/s。它正在充分发挥作用。

# android - LibGDX 横向 X 和 Y 作为位置 0,0

> ID：10525637
> 
> 赞同：0
> 
> 时间：2012-05-09T23:38:33.903
> 
> 标签：android, location, landscape, point, libgdx

任何人都知道是否可以将Android设备的左上角设置为0,0？截至目前，位置似乎是（根据我的 HTC 愿望）X：320，Y：0。我希望它是 0,0。

有谁知道这是否可能？或者怎么做。由于我放置了很多瓷砖，稍后也将使用 X 和 Y 位置，我发现左上角为 0,0 是有利的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:57:30.320

您需要考虑使用相机。

```
OrthographicCamera camera;
camera = new OrthographicCamera((float) 100, (100 * (9.0f/16.0f) ));    //UI
camera.position.set(0f, 0f, 0); 
```

我通常将该相机存储在某个地方，然后您需要在每次渲染循环时将其应用于 spritebatch。

```
applyCamera(spriteBatch, camera);
GfxD.spriteBatch.begin();{
    for(Sprite4 sprite: SpriteList) {   sprite.draw(spriteBatch);   }
}GfxD.spriteBatch.end(); 
```

...我的“应用相机”方法看起来像...

```
public static void applyCamera  (SpriteBatch spritebatch, OrthographicCamera camera){
    camera.update();
    spritebatch.getProjectionMatrix().set(camera.combined);
} 
```

您将不得不为自己的目的编辑代码，但希望这能让您朝着正确的方向开始。

# algorithm - 组合预排序集的最快排序算法是什么

> ID：10525638
> 
> 赞同：1
> 
> 时间：2012-05-09T23:38:40.467
> 
> 标签：algorithm, sorting, dataset, complexity-theory

假设我有一些我知道已经排序的集合，例如 {0,2,10,23,65} 和 {3,5,8..}。可以将任意数量的预排序集组合成一个排序集的最佳排序算法是什么？这种排序的效率如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:41:59.213

你不需要对它们进行*排序*，你需要*合并*。这是通过`O(M+N)`使用一个简单的循环来完成的，该循环保持两个索引查看两个部分的当前元素，将两者中较小的一个添加到最终序列中，并将索引推进一个。

这是伪代码：

```
int[] parts1, parts2 // Sorted parts
int i = 0, j = 0;
while i != parts1.Length || j != parts2.Length
    if i != parts1.Length || j != parts2.Length
        if parts1[i] < parts2[j]
            res.Add(parts1[i++])
        else
            res.Add(parts2[j++])
    else if i != parts1.Length
        res.Add(parts1[i++])
    else
        res.Add(parts2[j++]) 
```

在每一步，循环都会前进`i`或`j`，执行`parts1.Lenght + part2.Length`次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:43:16.217

最简单的方法是比较您拥有的列表的头部，取最小的一个，并将其添加到排序集中。重复直到所有列表都为空。

效率方面，它总是在时间上是线性的。这将花费您必须合并的项目总数。

这实际上是[Mergesort](http://en.wikipedia.org/wiki/Merge_sort)的第二阶段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:26:15.093

假设集合中有`O(n)`元素`O(k)`。一个标准的合并将是`O(n * k)`.

如果你只有 2 套，这没什么大不了的。如果你有1000个，它可能是。在这种情况下，您可以保留按其下一个最小元素组织的集合的优先级队列。这个变种是`O(n log(k))`.

# imacros - 如果 iMacros 页面中存在文本，请单击按钮

> ID：10525640
> 
> 赞同：3
> 
> 时间：2012-05-09T23:38:54.707
> 
> 标签：imacros

我正在尝试将 iMacros 与 Firefox 一起使用，仅当页面上存在此代码时才单击取消关注按钮...

```
<small class="follow-status">follows you</small> 
```

如果页面源中不存在上述内容，那么它将运行此 iMacros 代码...

```
TAG POS=1 TYPE=DIV ATTR=TXT:UnFollow 
```

根据我的阅读，没有 if/else 类型语法，但您可以运行 Javascript

```
EVAL("Javascript code here") 
```

如果有人知道我该怎么做，我真的可以使用帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T01:37:50.693

你可以欺骗 Imacros 来做一个 If 语句，但首先你必须`SET !ERRORIGNORE YES`为这个宏做。然后：

```
SET EXTRACT NULL
'if this exist you extract the text(even if you know it)
'if doesn't exist should return error but we turned that off; Extract remains Null
TAG POS=1 TYPE=SMALL ATTR=TXT:follows<SP>you EXTRACT=TXT
SET !VAR1 EVAL("var text=\"{{!EXTRACT}}\"; if(text==\"follows you\") text = \"jibber\";else text = \"UnFollow\";text;")
'this one executes if the text is right, if not should give error but we turned that off
TAG POS=1 TYPE=DIV ATTR=TXT:{{!VAR1}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:42:59.247

为此使用 javascript 文件

```
run();
function run() {
  var exists = doesElementExist();
  alert('element exists? ' + exists);
  if (exists) {
    iimPlay('CODE: TAG POS=1 TYPE=DIV ATTR=TXT:UnFollow');
  }
  else {
    // do something else here
  }
}

// test if element exists
function doesElementExist() {
  iimDisplay('looking for small element with class "follow-status" on page');
  var code = iimPlay('CODE: SET !TIMEOUT_TAG 1\n'
                     + 'TAG POS=1 TYPE=SMALL ATTR=CLASS:follow-status EXTRACT=TXT');
  if (code !==1) {
    return false;
  }
  var extract = iimGetLastExtract();
  if (extract === '#EANF#') {
    return false;
  }
  return true;
} 
```

# css-position - 尝试响应式、绝对定位的子 div...（哎呀！）

> ID：10525641
> 
> 赞同：1
> 
> 时间：2012-05-09T23:38:58.560
> 
> 标签：css-position, responsive-design

所以，

我有一个相当简单的父 div，其中包含两个子 div，一个是文本（向左浮动），另一个包含一个图像（向第一个孩子向左浮动）......第二个的浮动有点无关紧要（我只是不'不希望它掉到下面）。但我想要实现的是让图像坐在父母的右下角并留在那里。同时，我希望它成为流体网格的一部分，并且与底部/右侧的距离也能够响应。

我尝试了绝对定位（在它周围添加了一个额外的父级到位置：相对），这根本不起作用......它只能在左侧/顶部定位，然后在 %'s 中不起作用。

然后我尝试添加填充（顶部，左侧）而不是使用定位，认为我可以将其推入到位......这对于将其保持在右侧（向左推）非常有用，但显然不适用于底部（从顶部推动），因为这个值需要随着屏幕的减小而不是相反的方式增加（doh！）。

只是想知道是否有人有任何想法或创造性的解决方案？

我知道我正在尝试同时做许多棘手的事情！

# python - Python Json 数据

> ID：10525642
> 
> 赞同：-2
> 
> 时间：2012-05-09T23:39:19.237
> 
> 标签：python

我已经到处寻找可能是微不足道的东西，但我就是不知道如何做到这一点。我有一个 Web 服务，它希望数据看起来像这样来更新一些对象：（这被编码到 Web 服务调用的 POST 正文中）

```
{
    "name":zone_name,
    "service":{
            "name":"service_name",
             "dns_address_record_list":[{
                        "vip_order":"record",
                        "static":"state",
                    }
                        {
                        "vip_order":"record",
                        "static":"state",}
                  ]
              }
          } 
```

我正在尝试构建方法，以便可以`dns_address_record_list[]`基于用户表单以编程方式添加。如何动态生成上述数据并添加到`dns_address_record_list"[]`？我尝试了各种各样的东西，但没有任何效果。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:42:39.653

这是一个清单。所以你使用[列表方法](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)。

```
>>> foo = [1, 2, 3]
>>> foo.append(5)
>>> foo
[1, 2, 3, 5] 
```

# javascript - 在 blur() 事件中获取每个值

> ID：10525649
> 
> 赞同：0
> 
> 时间：2012-05-09T23:40:02.063
> 
> 标签：javascript, jquery

我有一个页面，其中包含由 PHP 脚本生成的一堆文本区域。有一个隐藏的输入类型，其中包含一个变量的 id。基本上我想做的是在任何文本区域的 .blur() 上调用 .ajax() JQuery 方法，并从隐藏输入中传递 textarea 的值 + id。我所有的文本区域都是这样命名的：tr1、tr2、tr3 等。以及隐藏字段：tr_id1、tr_id2 等

那么如何从这两个元素中获取值，以便可以在其他地方使用它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:52:29.727

这可能会给你一个想法

**HTML**

```
<textarea name="tr1"></textarea>
<input type="hidden" name="tr_id1" value="1" />
<br />
<textarea name="tr2"></textarea>
<input type="hidden" name="tr_id2" value="2"/> 
```

**​JS**

 **```
​$(function(){
    $('textarea').on('blur', function(e){
        var txtAval=$(this).val();
        var txtId=$(this).prop('name').replace('tr','');
        var txtHval=$('input:hidden[name="tr_id'+txtId+'"]').val();

        // txtAval contains textarea's value and txtHval contains text input's value

       $.ajax({
           type: "POST",
           url: "some_url",
           data: {txtarea:txtAval, txthidden:txtId}
          //or
          //data: "txtarea="+txtAval+"&txthidden="+txtId
        }).done(function(msg) {
            // ...
        });
    });
});​ 
```

**jQuery ajax 参考：** [**这里。**](http://api.jquery.com/jQuery.ajax/)

[**在此处查看控制台上的值。**](http://jsfiddle.net/heera/4VfzG/1/)**

# java - JPA 使用 GenerationType.IDENTITY @onetomany Postgres 子（许多）表插入失败：父 FK 上的非空约束错误

> ID：10525650
> 
> 赞同：2
> 
> 时间：2012-05-09T23:40:02.553
> 
> 标签：java, jpa, one-to-many, identity, constraintexception

假设一支球队有很多球员。使用 JPA/休眠。Postgres 9.1。GenerationType.IDENTITY（Postgres 在 int 列上使用序列，如 Oracle）。在新插入时，当我 em.persist() 时，我在子表上得到一个非空错误（在我非常非常轻微混淆的代码中的播放器表......更改了名称以保护无辜。:) 错误信息如下.

父表

```
@Entity
@Table(name = "team")
public class Team implements Serializable {
    @Id
    @GeneratedValue (strategy = GenerationType.IDENTITY)
    @Column(name = "teamid")
    private Long teamid;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "teamid", fetch = FetchType.LAZY)
    private Collection<Player> playerList; 
```

子表

```
@Entity
@Table(name = "player")
@XmlRootElement
public class Player implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "playerid")
    private Long playerid;
    @JoinColumn(name = "teamid", referencedColumnName = "teamid")
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Team teamid; 
```

persistence.xml 很好的衡量标准：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="ELS_Soulard_PU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/ElsDev1Pool</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

错误信息：

```
INFO: THROWABLE INFO: org.postgresql.util.PSQLException: ERROR: null value in column "teamid" violates not-null constraint
INFO: Team Controller persistence exception THROWABLE MESSAGE: could not insert: [com.mydomainblahblahblah.persistence.entity.Player] 
```

请注意，如果我将玩家排除在等式之外，即在“团队”类中，玩家属性的值设置为 null（我注释掉将玩家列表添加到属性的代码），数据将成功插入团队表。问题全在球员身上。（问问多伦多枫叶队的老板就知道了。：p）。

可能是导致问题的 GenerationType.IDENTITY 吗？即在事务结束之前没有返回父表中的teamid，所以它不能作为FK放在玩家表中？如果是这样，除了使用不同的生成类型之外，是否有任何补救措施？我喜欢使用数据库序列（更多控制恕我直言）。

序列生成类型会更好还是同样的问题？但我确信必须有某种方法可以做到这一点。没有吗？：/

* * *

将 ID 更改为这样（即让 hibernate 生成它们）：

```
@Id
@Column(name = "teamid")
private Long teamid; 
```

现在我收到此错误：

```
INFO: EXCEPTION CLASS NAME: javax.persistence.PersistenceException
INFO: THROWABLE CLASS NAME: org.hibernate.id.IdentifierGenerationException 
```

啊！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T05:51:15.253

所以这里唯一的错误是我对表连接和 JPA 类型 ORM 的工作原理的理解（我以前使用过 MyBatis，所以还在学习 JPA）。事实证明，即使直觉上你会认为我可以将数据添加到我的团队类中，包括我的球员的数组列表，然后将其持久化，但你不能。您必须首先坚持团队，然后将团队依次添加到每个玩家中，然后一次坚持一个。所以本质上，这段代码没有任何问题。问题出在椅子和电脑之间。:/ 它已经被纠正了。

# javascript - 其他内部的Jquery选择器元素

> ID：10525651
> 
> 赞同：2
> 
> 时间：2012-05-09T23:40:02.747
> 
> 标签：javascript, jquery, jquery-selectors

我在尝试构建一个不错的“产品”页面时遇到问题，我有 html：

```
 <div class="product-box-2">
     <a href="img/produtos/1-lightbox.jpg" class="lightbox"><img src="img/produtos/1.jpg" alt=""></a>
     <p class="legend">>> Vero mlkshk velit, freegan ullamco commodo put a bird on it cred synth kogi, Vero mlkshk velit, freegan ullamco commodo put a bird on it cred synth kogi.</p>
     <a href="img/produtos/1-lightbox.jpg" class="ampliar lightbox">clique para ampliar</a>
    </div>
    <div class="product-box-2">
     <a href="img/produtos/1-lightbox.jpg" class="lightbox"><img src="img/produtos/1.jpg" alt=""></a>
     <p class="legend">>> Vero mlkshk velit, freegan ullamco commodo put a bird on it cred synth kogi, Vero mlkshk velit, freegan ullamco commodo put a bird on it cred synth kogi.</p>
     <a href="img/produtos/1-lightbox.jpg" class="ampliar lightbox">clique para ampliar</a>
    </div> 
```

很多次都需要它。然后我尝试在 .legend 上添加一个很好的效果，使用 CSS 设置“display:none”和 Jquery：

```
 $('.product-box-2 a').mouseenter(
    function(){
    $('.legend').fadeIn();
});

$('.product-box-2').mouseleave(
    function(){
    $('.legend').fadeOut();
}); 
```

但是我有相同的类，因此，当我将鼠标放在某些 .product-box-2 a 上时，所有图例都会出现...而且我不知道如何仅选择 .product-box 内的 .legend -2 我在里面。

如果您想看到它的实际效果，[就在这里！](http://viotidesign.com.br/clientes/glafcon/produtos.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:42:03.320

通过将元素作为上下文将内部选择器的范围限制为发生事件的元素。有关接受上下文的签名，请参阅[文档](http://api.jquery.com/jQuery/)。

```
$('.product-box-2 a').mouseenter(
   function(){
    $('.legend',$(this).closest('div')).fadeIn();
});
$('.product-box-2').mouseleave(
    function(){
    $('.legend',this).fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:23:44.750

`.children([Selector])`你也可以试试

```
$('.product-box-2 a').mouseenter(
    function(){
    $(this).children('.legend').fadeIn();
});

$('.product-box-2').mouseleave(
    function(){
    $(this).children('.legend').fadeOut();
}); 
```

[http://api.jquery.com/children/](http://api.jquery.com/children/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T23:42:53.290

你需要的是

```
$(this).find('.legend').fadeIn(); 
```

在这种情况下`$(this)`，指的是触发事件的元素，并且`.find()`只在其子元素中查看。

# css - 导航不会对齐中心

> ID：10525658
> 
> 赞同：0
> 
> 时间：2012-05-09T23:40:40.270
> 
> 标签：css, alignment

有人可以帮我调整我的导航中心吗

[http://sketchedneo.com/Example.php](http://sketchedneo.com/Example.php)

我试过了

左：25%；

居中对齐;

对齐调整：中间；

它似乎只是不想走中间。

非常感谢任何建议

```
div#navigation{ position: absolute;
padding-top:-100px; 
    border-radius: 4px;

}

#navigation ul {
    padding:5px 1px 1px 1px;
    margin: 0;
    list-style: none;
    float:left; text-align:left;
}
#pad{padding:0px 0px 0px 70px;}
#navigation li {
    float: left;
    position: relative;

}

#navigation ul li a{
    display:block;
    padding:5px 1px 1px 1px;
    margin:0px;
font-family: Verdana, Geneva, sans-serif;
    font-size: 12px;
    text-decoration: none;
    white-space:nowrap;

}

#navigation ul ul{
    position:absolute;
    top:-99999px;
    left:0;
    opacity: 0; /* Hide sub level */
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    z-index:497;
    background:#95cfff;
    padding: 2px;  border:1px solid #000000;   border-top:1px solid #000000;
    border-bottom-left-radius:6px;
    border-bottom-right-radius:6px;
}
#navigation ul ul ul {
    position:absolute;
    top:-99999px;
    left:100%;
  opacity: 0; /* Hide sub level */
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    z-index:497;
    background:#a1e8dc;
    padding: 2px;  border:1px solid #000000;
    border-top-left-radius:6px;
    border-top-right-radius:6px;
    border-bottom-left-radius:6px;
    border-bottom-right-radius:6px;
}
#navigation ul li:hover>ul{ opacity: 1; position:absolute; top:99%; left:0; }
#navigation ul ul li:hover>ul{ position:absolute; top:0; left:100%; opacity: 1; z-index:497; background:#95cfff; }

    #navigation a:link,#navigation a:visited, #navigation a:active {
    color: #002b4f;
    font-weight: normal;
    text-align: center;
    text-decoration: none;
}

#navigation a:hover {
    color: #0059d2;
    font-weight: normal;
    text-align: center;
    text-decoration: none;

}   a.top:link, a.top:visited, a.top:active {
    color: #002b4f;
    font-weight: normal;
    text-align: center;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:44:50.887

我过去几次使用过这个人的技术，效果很好：

[http://pmob.co.uk/pob/centred-float.htm](http://pmob.co.uk/pob/centred-float.htm)

# bash - 在逐个命令的基础上为 bash 完成设置不区分大小写

> ID：10525659
> 
> 赞同：8
> 
> 时间：2012-05-09T23:40:41.123
> 
> 标签：bash, case-insensitive, tab-completion

有没有办法指定一个特定的命令不区分大小写，而不需要全局打开不区分大小写（至少对于那个 shell）？

在我的特殊情况下，我有一个小应用程序，它可以让我通过命令行访问电子邮件地址数据库，所以我输入：

```
db get email john smith 
```

并返回 John Smith 的电子邮件地址。所以我设法在应用程序内部启用了完成功能：设置

```
COMPREPLY=($(compgen -W "$(db --complete $COMP_CWORD "$COMP_WORDS[@]"}")" -- ${COMP_WORDS[COMP_CWORD]})) 
```

可以让我完成制表符`get`和`email`. 但是，如果我然后键入`j<tab>`，它会拒绝，因为在电子邮件数据库中，它是正确大写的。无论如何，我想让 bash 完成这项工作。（如果我使用大写字母`J`，它可以工作。）

如果做不到这一点，我想我可以让我的`--complete`选项通过匹配输入来更改其回复的大小写，但理想情况下，如果可能的话，命令行将匹配数据库。

请注意，当使用 readline 时，我在应用程序中进行了此操作，它仅与 bash 交互，这似乎是一个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:18:14.917

事实上，似乎没有办法`compgen`对单词列表 ( ) 进行不区分大小写的匹配`-W`。我看到以下解决方法：

简单的解决方案：首先将单词列表和输入标记都翻译成全小写。注意：这*只是*一个选项，如果可以接受*所有完成变成全小写*。

```
complete_lower() {

    local token=${COMP_WORDS[$COMP_CWORD]}
    local words=$( db --complete $COMP_CWORD "${COMP_WORDS[@]}" )

    # Translate both the word list and the token to all-lowercase.
    local wordsLower=$( printf %s "$words" | tr [:upper:] [:lower:] )
    local tokenLower=$( printf %s "$token" | tr [:upper:] [:lower:] )

    COMPREPLY=($(compgen -W "$wordsLower" -- "$tokenLower"))   
} 
```

更好但更精细的解决方案：滚动您自己的不区分大小写的匹配逻辑：

```
complete_custommatch() {

    local token=${COMP_WORDS[$COMP_CWORD]}
    local words=$( db --complete $COMP_CWORD "${COMP_WORDS[@]}" )

    # Turn case-insensitive matching temporarily on, if necessary.
    local nocasematchWasOff=0
    shopt nocasematch >/dev/null || nocasematchWasOff=1
    (( nocasematchWasOff )) && shopt -s nocasematch

    # Loop over words in list and search for case-insensitive prefix match.
    local w matches=()
    for w in $words; do
        if [[ "$w" == "$token"* ]]; then matches+=("$w"); fi
    done

    # Restore state of 'nocasematch' option, if necessary.
    (( nocasematchWasOff )) && shopt -u nocasematch

    COMPREPLY=("${matches[@]}")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-23T05:58:42.463

`grep`使用它来完成所有工作要容易得多；然后案件被保留在完成中，你不必弄乱`shopt`或类似的事情。例如：

```
_example_completions () {
    local choices="john JAMES Jerry Erik eMIly alex Don donald donny@example.com RON"
    COMPREPLY=( $( echo "$choices" | tr " " "\n" | grep -i "^$2" ) )
} 
```

在这里，`$choices`是您的单词列表，`tr`用于将单词之间的空格更改为换行符以便`grep`理解它们（如果您的单词已经用换行符分隔，则可以省略），该`-i`选项不区分大小写匹配，并`"^$2"`匹配当前单词（ bash`$2`在一行的开头将它作为 ) 传递。

```
$ example dO<tab>
Don     donald     donny@example.com 
```

# objective-c - 试图设置一个属性值，但它是 nil

> ID：10525662
> 
> 赞同：0
> 
> 时间：2012-05-09T23:40:49.160
> 
> 标签：objective-c, ios, cocoa-touch

我在管理地图视图的控制器的头文件中声明了一个协议。

```
@protocol UCMapViewDelegate <NSObject>
@required
- (void)pushMapviewRight;

@end 
```

我在另一个视图控制器 (.h) 中声明协议的实现并在 .m 文件中实现它

```
// in the UCRootViewController.h
@interface UCRootViewController : UIViewController <UCMapviewDelegate>

// in the UCRootViewController.m
- (void)pushMapviewRight
{
    NSLog(@"push mapview right");
} 
```

我将委托设置为指向 rootviewController 的属性。这是在我的 MapviewController 的 viewDidLoad() 中完成的，带有一个 property `@property (weak, nonatomic) id<UCMapViewDelegate> delegate;`。

```
// in UCRootViewController
self.mapviewController.rootviewController = self;

// in UCMapViewController
self.delegate = (id<UCMapviewDelegate>)self.rootviewController; 
```

调用委托方法。当 mapviewController 中的一个按钮被按下并且它工作时，showMenu() 被执行。但委托方法不会被调用。

```
- (void)showMenu
{
    NSLog(@"show menu");
    [self.delegate pushMapviewRight];
} 
```

但是什么也没发生……怎么了？！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:36:59.010

我修好了它。起初我使用 NSLog 来验证 self 不是 nil （这很明显，但仍然）我实际上不确定为什么，但`self.mapviewController.rootviewController = self;`没有“延续”到我想引用 self.rootViewController 的地步，虽然 self在我将它设置为指向 rootViewController 的指针时不是零。

我通过创建另一个来修复它，`initWithRootViewController:(UCRootViewController*) ctrl`并在创建 MapViewController 时将 self 作为参数传递。

有人可以解释为什么 MapViewController 中没有对 self (=rootViewController) 的有效引用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:40:31.457

该`rootViewController`属性是强引用还是弱引用？应该很强大吧。如果对象没有弱引用，那么它会立即被释放，当它们指向的对象被释放时，弱引用会被清空。您需要在应用程序中的某个地方有一个强引用，以使对象可以四处游荡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:54:25.070

正如@CodaFi 所说，您的代码看起来很乱。为什么要在 UCMapViewController 中设置委托属性值？当弹出或准备 segue 时，应在其父级中设置委托。

基本上，如果您的 UCMapViewController 了解 UCRootViewController 实现委托方法，为什么不直接从 riitVuewController 调用它的方法呢？根本不需要设置委托。

下面是一个使用故事板和 segue 的例子，UCMyViewController 将把 segue 推送到 UCMapViewController：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
  ...
  [segue.destinationViewController setDelegate:self.rootViewController];
  ...
} 
```

# php - 在 Zend 中添加路由器模块

> ID：10525670
> 
> 赞同：1
> 
> 时间：2012-05-09T23:42:23.020
> 
> 标签：php, zend-framework, zend-controller-router

我有这个代码：

```
$defaultAdmin = array ('module' => 'admin', 'controller' => 'index', 'action' => 'index' );
$routeAdmin = new Zend_Controller_Router_Route ( 'admin/:controller/:action/*', $defaultAdmin );
$router->addRoute ( 'admin', $routeAdmin ); 
```

但是，如果我进入这个 url: /admin/ 它将控制器加载到 /application/controllers/IndexController.php 而不是 /application/modules/admin/controllers/IndexController.php 中的那个

我的完整引导程序是这个：

```
abstract class My_Application_Bootstrap extends Zend_Application_Bootstrap_Bootstrap {
    /**
     * Inicializa las características generales de la aplicación
     *
     * @param $application Zend_Application|Zend_Application_Bootstrap_Bootstrapper         
     * @return void
     */
    public function __construct($application) {
        parent::__construct ( $application );
        $autoloader = $application->getAutoloader ();
        $autoloader->registerNamespace ( 'Busca' );
        $this->_initConfig ();
        $this->_initDb ();
        $this->_initView ();
        $this->_setCache ();
        $this->_setRouter ();
        $this->_setHelpers ();
        $this->_init ();
    }
    /**
     * Método que setea el cache del sistema
     *
     * @return My_Application_Bootstrap
     */
    protected function _setCache() {
        $config = Zend_Registry::get ( 'config' );

        $metadataBack = $config->metadata_cache->frontend->toArray ();
        $metadataFront = $config->metadata_cache->backend->toArray ();

        $memcachedOpts = $config->db_cache->toArray ();

        $memcache = new My_Cache_Backend_Memcached ( $memcachedOpts );
        $metadataCache = Zend_Cache::factory ( 'Core', 'File', $metadataBack, $metadataFront );

        Zend_Registry::set ( 'Cache', $memcache );
        Zend_Registry::set ( 'MetadaCache', $metadataCache );

        My_Model_Table_Abstract::setDefaultMetadataCache ( 'MetadaCache' );
        return $this;
    }
    /**
     * Inicializa la configuración de la aplicación
     *
     * @return My_Application_Bootstrap
     */
    protected function _initConfig() {
        Zend_Registry::set ( 'config', new Zend_Config ( $this->getOptions () ) );
        return $this;
    }
    /**
     * Inicializa la(s) base(s) de datos
     *
     * @return My_Application_Bootstrap
     */
    protected function _initDb() {
        $this->bootstrap ( 'multidb' );
        $resource = $this->getPluginResource ( 'multidb' );
        $databases = Zend_Registry::get ( 'config' )->resources->multidb;
        foreach ( $databases as $name => $adapter ) {
            $db_adapter = $resource->getDb ( $name );
            Zend_Registry::set ( $name, $db_adapter );
        }
        return $this;
    }
    /**
     * Reemplaza la vista Zend_View por My_View
     *
     * @return My_Application_Bootstrap
     */
    protected function _initView() {
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper ( 'viewRenderer' );
        $view = new My_View ();
        $viewRenderer->setView ( $view );
        return $this;
    }
    /**
     * Método que setea el router general del sitio
     * Todas las peticiones irán al controlador default, con excepción de las de
     * administración.
     *
     * @return My_Application_Bootstrap
     */
    protected function _setRouter() {
        $front = Zend_Controller_Front::getInstance ();
        $router = $front->getRouter ();
        /*
         * Router para entidades
         */
        $defaultSection = array ('module' => 'default', 'controller' => 'index', 'action' => 'section', 'sectionAction' => null, 'section' => null, 'id' => null, 'title' => null );
        $requiredSection = array ('id' => '\d+' );
        $routeSection = new Zend_Controller_Router_Route ( ':section/:sectionAction/:id/:title/*', $defaultSection, $requiredSection );
        $router->addRoute ( 'section', $routeSection );
        /*
         * Router para entidades sin ID
         */
        $defaultSection = array ('module' => 'default', 'controller' => 'index', 'action' => 'section', 'sectionAction' => null, 'section' => null );
        $routeSection = new Zend_Controller_Router_Route ( ':section/:sectionAction/*', $defaultSection, $requiredSection );
        $router->addRoute ( 'section', $routeSection );
        /*
         * Router para listados
         */
        $defaultList = array ('module' => 'default', 'controller' => 'index', 'action' => 'list', 'section' => null );
        $routeList = new Zend_Controller_Router_Route ( ':section/listar/*', $defaultList );
        $router->addRoute ( 'listados', $routeList );
        /*
         * Router para administración
         */
        $defaultAdmin = array ('module' => 'admin', 'controller' => 'index', 'action' => 'index' );
        $routeAdmin = new Zend_Controller_Router_Route ( 'admin/:controller/:action/*', $defaultAdmin );
        $router->addRoute ( 'admin', $routeAdmin );
        return $this;
    }
    /**
     * Configuración de los helpers del sistema
     *
     * @return My_Application_Bootstrap
     */
    protected function _setHelpers() {
        $prefix = 'My_Controller_Action_Helpers';
        Zend_Controller_Action_HelperBroker::addPrefix ( $prefix );
        Zend_Controller_Action_HelperBroker::addPath ( APPLICATION_PATH . '/controllers/helpers', 'My_Controller_Action_Helper' );
        return $this;
    }
    /**
     * Para usar en los hijos en vez del constructor
     */
    protected function _init() {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:07:54.983

在应用程序文件夹名称“modules/default”中创建一个新目录，将“application/controllers”**剪切**粘贴到其中。然后确保你的 application.ini 有

```
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules = true; 
```

如果您将“控制器”目录保留在应用程序文件夹中，则 zf 将不会使用模块化结构，因此请确保您剪切和粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:31:24.050

一旦你有了基于模块的结构，一定要使用你的自定义路由为你的模块创建一个引导程序。例如

```
class Example_Bootstrap extends Zend_Application_Module_Bootstrap
    {

    public function _initModuleRoutes()
    {
        $this->bootstrap('FrontController');
        $frontController = $this->getResource('FrontController');
        $router = $frontController->getRouter();

        $route = new Zend_Controller_Router_Route(
            'modulename/:action/*',
            array(
                    'module' => 'modulename',
                    'controller' => 'modulecontroller',
                    'action' => 'index'
            )
        );
        $router->addRoute('routename', $route);

        return $router;
    } 
```

# ffmpeg - 在 Snow Leopard 上下载编译并安装 ffmpeg 以进行 HLS 流式传输

> ID：10525672
> 
> 赞同：0
> 
> 时间：2012-05-09T23:42:33.660
> 
> 标签：ffmpeg, osx-snow-leopard

关于这个问题：

[使用 ffmpeg 进行转码和分段](https://stackoverflow.com/questions/8767727/transcode-and-segment-with-ffmpeg)

如何使用 Snow Leopard 在我的 mac mini 上下载和安装 ffmpeg，并使用该问题的答案中列出的选项？我（目前）不想打扰 RTMP 支持，目标是实时转码文件，而不是实时视频。

# javascript - Click Event 使移动设备上的 jQuery Mobile 非常慢 - 取消绑定 Click 事件并添加“Tap”事件的最简单方法是什么？

> ID：10525681
> 
> 赞同：1
> 
> 时间：2012-05-09T23:43:35.550
> 
> 标签：javascript, jquery, events, mobile, tap

我已经在互联网上搜索了这个答案，但没有成功。

默认情况下，使用“点击”事件的移动设备较慢，因为它会继续侦听其他类型的手势，例如双击、滚动、单击并按住等。因此，jquery mobile 在尝试展开时速度很慢且无响应使用“点击”的可折叠列表。它在触发前延迟约 0.5 秒。

我可以从这些元素中取消绑定“点击”事件并绑定“点击”事件以执行相同操作的最简单方法是什么？

我的计划是检测设备是否是移动的，如果是，则添加 Tap 事件，从而使网站更具响应性。

谢谢！

# mysql - 使用 SSH 私钥进行 MySQL 根登录？

> ID：10525683
> 
> 赞同：8
> 
> 时间：2012-05-09T23:44:08.847
> 
> 标签：mysql, security, authentication, root, ssh-agent

假设 Mysql -dbs 和一个有忘记密码的坏习惯的管理员（或者偏执狂想要更多创造性的身份验证，而不仅仅是密码）。是否可以以 Ssh-agent 存储私钥的方式访问 Mysql -root shell，然后我可以通过`"mysql -u root"`（不输入密码或私钥和密码的组合）登录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T23:49:02.883

您当然可以使用普通的 SSH 密钥身份验证登录到您的 shell 帐户，然后使用`~/.my.cnf`包含您密码的文件。这将由`mysql`命令行客户端默认使用。

它的内容应该是：

```
[client]
user=the_user_name
password=the_password 
```

请注意，任何可以读取此文件的人都可以使用这些凭据。保护它，以便只有所有者可以阅读它（如果您离开键盘，请锁定您的终端）。

* * *

如果您想要直接基于密钥的身份验证，您还可以使用[SSL 客户端证书身份验证](https://dev.mysql.com/doc/refman/8.0/en/using-encrypted-connections.html)。您可以创建自己的小型 CA 并向自己颁发这些客户端证书。如果您需要直接远程访问，许多工具都支持这一点。

# javascript - 如何为 HTML 文档请求的 JS 和 CSS 文件设置 http 'accept' 标头？

> ID：10525687
> 
> 赞同：0
> 
> 时间：2012-05-09T23:44:43.350
> 
> 标签：javascript, html, http, rackspace-cloud, cloudfiles

我正在尝试在 Rackspace Cloudfiles CDN 上配置一些资产，以使用 gzip 编码发送给客户端。据我所知，根据他们的网站（http://www.rackspace.com/blog/cloud-files-cdn-compresses-at-the-edge/），任何带有“接受编码：gzip”的请求和'Accept: application/x-javascript' 将与 gzip 一起发送。该请求是使用“accept-encoding: gzip”发出的，但是是“accept: */* ”。

有没有办法让浏览器将 JS 文件请求为“application/x-javascript”，或者我是否需要在文件级别做一些事情以使用正确的 mime 类型发送资源？CSS 也一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:44:41.997

我们通过使用 Rackspace Cloud Files API Ruby gem 在我们的部署脚本中显式设置“Content-Type: application/x-javascript”解决了这个问题。这解决了问题。

# git - 如何找到以前的合并提交

> ID：10525695
> 
> 赞同：9
> 
> 时间：2012-05-09T23:45:32.723
> 
> 标签：git

如何找到两个分支之间的先前合并提交？

我想查看自上次将发布分支合并到主分支以来我的主分支中的更改。要查看自上一个分支以来发布分支的变化，就像`git diff ...release`

但显然`git diff release...`不起作用，因为它还包括上次合并之前的所有更改。因此，我认为我需要最后一次合并的提交 ID 将其传递给`git diff`

```
git log --reverse --ancestry-path `git merge-base HEAD release`.. \ 
        --format=format:%H|head -n1 
```

似乎可以工作并且可以与 一起使用`git diff $(...)`，但它似乎非常复杂。有没有更简单的解决方案？

**例子**

```
 I
 / \
A1 B1
 \ |
|  M   
|  |
A2 B2 
```

这`I`是初始提交。`A[12]`是发布提交并且`B[12]`是主提交。`M`是之前的提交。在示例中，最后一次合并和主节点之间的更改只是 B2 引入的更改。`git merge-base A2 B2`返回`A`1。并`git diff B2 A1`包括 的变化`B1`。因此，问题是如何在一般更复杂的情况下找到 M 以便`git diff M B2`无需手动查找即可运行`M`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T01:29:06.393

您正在寻找的似乎是两个分支开始不同的点，而不是两个分支之间的最后一次合并。这两个概念是不同的，因为您的发布分支可能在合并后的某个时间被快速转发。

`git merge-base master release`将找到您的 master 和 release 分支的最新共同祖先（即两者共同的最后一次提交）。

然后，您可以**在 master**`git diff [common ancestor] HEAD`上查看自共同祖先以来对 master 所做的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:13:25.473

这将显示分支 foo 和分支 master 之间的最新合并提交

```
git log foo master --oneline --date-order --merges -1

--oneline is just to keep the output short
--date-order to get the latest first
--merges to only show merge commits
-1 to display the first result only 
```

# visual-studio - Windows 8 Metro App 上的 YUI：无法识别 YUI

> ID：10525696
> 
> 赞同：0
> 
> 时间：2012-05-09T23:45:52.120
> 
> 标签：visual-studio, yui, windows-8, windows-runtime, winjs

我正在尝试使用 YUI3 在 Visual Studio 2011 上创建一个 Hello World JS Metro 应用程序。

我已经获取了 YUI 的本地副本，添加到解决方案的子文件夹中，并在我的 default.html 页面上添加了对 yui-min.js 的引用：

```
<!-- TodoJS references -->
<link href="/css/default.css" rel="stylesheet">
<script src="/js/default.js"></script>
<script src="js/yui/build/yui/yui.js"></script> 
```

然后在页面底部我添加了以下代码：

```
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        YUI().use("event", function () {
            //some code will go here..
        });
    }, false);
</script> 
```

当我运行代码时，我在 YUI() 上得到一个空引用错误。我确实在 Visual Studio 中得到了 intelissense（例如 YUI().add），所以引用似乎没问题，但在运行时找不到 YUI。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:50:10.963

我会尝试[如何：使用 JS 和 YUI 3 创建 Windows 8 Metro 应用程序中概述的步骤](http://www.goer.org/Journal/2011/09/howto_create_a_windows_8_metro_app_with_js_yui_3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:22:41.847

我认为你已经解决了这个问题。但是，如果您想使用 YUI 组件，例如“日历”、“选项卡视图”等，则必须修改一些包含 innerHTML 调用的文件，并使用 toStaticHTML 包装添加的 html 内容。

只有几个文件（dom-base.js、yui.js）需要修改，大多数组件都可以正常工作（包括“数据表”和“图表”小部件），富文本除外编辑。YUI 的好处是它支持大多数组件的触摸手势，例如平移“数据表”可以正常工作。

# php - cookie过期后将用户重定向到登录页面

> ID：10525697
> 
> 赞同：0
> 
> 时间：2012-05-09T23:45:56.097
> 
> 标签：php, cookies

我目前有一个登录脚本，将 cookie 设置为 8 小时后过期。cookie 过期后，我想将用户重定向回登录页面？我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:50:14.097

如果登录在*不同的页面上*，您可以将其放在最顶部（在任何输出到客户端之前）：

```
if(!$_COOKIE['theNameOfTheCookie'])
    header('Location: loginPage.php'); 
```

但是您需要在此处添加一些额外的逻辑来检查 cookie 值或其他取决于数据在站点上的价值的东西。在上面的例子中，有人可以*很*容易地伪造 cookie。

或者如果您更喜欢会话，只需将 COOKIE 替换为 SESSION：

```
if(!$_SESSION['theNameOfTheCookie'])
    header('Location: loginPage.php'); 
```

# winforms - 如果 Winforms Web 浏览器控件崩溃，您能否将其与应用程序的其余部分隔离？

> ID：10525699
> 
> 赞同：1
> 
> 时间：2012-05-09T23:46:03.960
> 
> 标签：winforms, browser, controls

我在我的应用程序（C#，框架 3.5）中使用网络浏览器控件时遇到问题，IE 时不时会发现一个 html 页面会导致它挂起，冻结我的整个应用程序。

比如这个小宝石

```
<html><head>
<style type="text/css">
#a {
        margin:0 10px 10px;
}

#b {
        width:100%;
}

</style>
<title>IE Crasher</title>
</head>
<body>
<table><tr><td>
<div id="a">
<form id="b">
<input type="text" name="test"/>
</div>
</td><td width="1"></td></tr></table>
</body></html> 
```

鉴于我永远无法保证 IE 或任何浏览器的稳定性，有没有办法处理这样的冻结，而不会使我的主要应用程序在颈静脉中受到影响。

我已经对 Gecko 和 XULRunner 进行了修补，看起来不错，但是换掉浏览器控件并不能真正解决问题，Firefox 仍有可能挂起。或者，我尝试了 AxBrowser 以查看是否有任何区别，尝试从另一个线程调用它，但我知道这不会做任何事情..

不，我希望能够做的是，如果 IE-as-Browser-control 决定它会稍微睡觉，我真的希望用户可以选择简单地关闭其所在的容器。

不知道从哪里开始，保护我的应用免受流氓第三方控制。

# android - 来自 JUNIT 的 UnsupportedOperationException android 内部存储

> ID：10525700
> 
> 赞同：0
> 
> 时间：2012-05-09T23:46:06.997
> 
> 标签：android, junit, storage

我正在尝试使用 MockContext 在内部存储中从 Android Junit 创建一个文件，它会引发 UnsupportedOperationException。

```
MockContext mockContext = new MockContext();
FileOutputStream fos = mockContext.openFileOutput(LOG_FILE_NAME,
                    Context.MODE_PRIVATE); 
```

是否有使用 Android JUNIT 测试文件操作的标准方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:05:32.830

根据[API](http://developer.android.com/reference/android/test/mock/MockContext.html)：

> 一个模拟上下文类。所有方法都不起作用并抛出 UnsupportedOperationException。您可以使用它来将其他依赖项、模拟或监视器注入您正在测试的类中。

如果要使用该方法，则必须扩展 MockContext 并编写相应的方法实现。

# c - 我是否可以通过使变量静态来提高性能？

> ID：10525707
> 
> 赞同：17
> 
> 时间：2012-05-09T23:47:29.263
> 
> 标签：c, static-variables, static

为什么有些人声明将他们的变量设为静态，如下所示：

```
char baa(int x) {
    static char foo[] = " .. ";
    return foo[x ..];
} 
```

代替：

```
char baa(int x) {
    char foo[] = " .. ";
    return foo[x ..];
} 
```

它似乎在 Linux 源代码应用程序中很常见。有性能差异吗？如果是，有人可以解释为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T23:52:32.480

It's not for performance *per se*, but rather to decrease memory usage. There *is* a performance boost, but it's not (usually) the primary reason you'd see code like that.

Variables in a function are allocated on the stack, they'll be reserved and removed each time the function is called, and importantly, they will count towards the stack size limit which is a serious constraint on many embedded and resource-constrained platforms.

However, static variables are stored in either the `.BSS` or `.DATA` segment (non-explicitly-initialized static variables will go to `.BSS`, statically-initialized static variables will go to `.DATA`), off the stack. The compiler can also take advantage of this to perform certain optimizations.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T23:55:24.087

在典型的实现中，带有的版本`static`只会在编译时将字符串放在内存中的某个位置，而没有的版本`static`将使函数（每次调用它）在堆栈上分配一些空间并将字符串写入该空间。

`static`因此，带有 的版本

*   可能会更快
*   可能会使用更少的内存
*   将使用更少的堆栈空间（在某些系统上是稀缺资源）
*   会更好地使用缓存（对于一个小字符串来说这可能不是什么大问题，但可能`foo`是更大的东西）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T23:52:04.617

Yes, the performance is different: unlike variables in the automatic storage that are initialized every time, static variables are initialized only once, the first time you go through the function. If `foo` is *not* written to, there is no other differences. If it is written to, the changes to static variables survive between calls, while changes to automatic variables get lost the next time through the function.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T23:52:33.517

Defining a variable static in a method only means that the variable is not "released", i.e. it will keep its value on subsequent calls. It could lead to performance improvement depending on the algorithm, but is certainly not not a performance improvement by itself.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T08:53:14.540

是的，如果您已将变量声明为静态变量，则会有所不同：

1.  首先，内存将分配在 bss 或数据段而不是堆栈中。

2.  其次，它只会初始化一次，不像函数的其他变量那样每次都会初始化，这肯定会产生差异。

3.  第三，它保留了它的价值 b/w 函数调用。所以根据你应该使用它的情况。

# android - 寻找更好的应用小部件“工作流程”

> ID：10525708
> 
> 赞同：0
> 
> 时间：2012-05-09T23:47:31.257
> 
> 标签：android, android-appwidget

这可能不是您的典型问题..但我想我会试一试。我试过谷歌搜索这类问题，但显然我使用了错误的查询。

所以我的问题基本上是如何让我的小部件“流动”更好。现在这是流程：

1.  应用程序打开时会出现“跳转”屏幕，其中包含一些有关如何使用它的说明、一个信息按钮和一个将您定向到配置页面的按钮（用户选择他们想要查看的图片）。在将小部件实例添加到他们的屏幕之前，还会大量提示用户配置这些图片；否则它将无法正常工作。
2.  配置完成后，退出应用程序并访问主屏幕。添加小部件，然后向用户显示时间配置（他们希望更新发生的频率）。用户选择，点击保存，小部件被添加到屏幕上。
3.  如果用户在步骤 1 中成功配置，则添加小部件。但是，如果他们没有进行初始配置，小部件会弹出一个 toast，再次说明他们必须进行配置。
4.  然后用户必须删除空白小部件，重新打开应用程序，配置图像，重新添加它，设置时间，然后就可以开始了。
5.  如果添加成功，用户可以通过小部件打开时间配置，或者从应用程序抽屉中打开它返回到图像选择。

根据这些信息，有人知道我可以如何使这个过程更简单吗？我的想法是除非进行第一次配置，否则不允许添加小部件。这是我在 :( 上找不到任何信息和/或尝试将这两个配置（时间/图像）组合成一个。

猜猜我正在寻找你们的任何意见/建议/想法。如果有人对此有任何见解，非常感谢！或者，如果我只是愚蠢并且无法找到已经讨论过的某些链接，请指向他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:08:10.083

如果您的应用程序依赖于所有配置，那么它应该是强制性的。当然，您可以做出一些假设以简化设置，稍后用户可以在某种配置屏幕上更改这些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:10:52.623

其实这很容易。根据您的问题，您的小部件在 xml 文件中声明了一个配置活动（即 android:configure="com.test.widget.act_configure"。如果 act_configure 活动返回 RESULT_CANCELED（通过 setResult(RESULT_CANCELED)），则小部件主机取消它的位置。

因此，您必须在小部件的配置活动 onCreate 方法中检查所需条件，如果满足或不满足，则返回 OK 或 CANCELED。

希望这可以帮助...

# c# - 函数多态。当 A:B 时返回 B，因为 A 为空

> ID：10525711
> 
> 赞同：1
> 
> 时间：2012-05-09T23:47:47.213
> 
> 标签：c#, inheritance, polymorphism

我怎样才能做类似以下的事情？
我的`A`对象在调用后为空，`GetB`即使`A`继承自`B`.

```
class Program
{
    public class A : B
    {
    }

    public class B
    {
    }

    static void Main(string[] args)
    {
        A a = GetB() as A;
        Console.WriteLine(a == null); // it is null!

        Console.WriteLine("Console.ReadKey();");
        Console.ReadKey();
    }
    public static B GetB()
    {
        return new B();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:50:34.147

You probably meant `return new A();` in the function. At the moment, you're trying to down-cast your `B` to an `A`, which won't work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:52:33.663

You got it reversed:

```
class Program
{
    public class A : B  // should be: public class A
    {
    }

    public class B // should be: public class B : A
    {
    }

    static void Main(string[] args)
    {
        // If you reverse the inheritance on code above
        // As Ben Voigt noticed, *as A* is redundant. should be removed
        // A a = GetB() as A; 

        // should be this. B is wider than A, so A can accept B, no need to cast
        A a = GetB(); 
        Console.WriteLine(a == null); // it is null!

        Console.WriteLine("Console.ReadKey();");
        Console.ReadKey();
    }
    public static B GetB()
    {
        return new B();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T00:01:58.720

你正试图将你的 B 降级为 A。你不能这样做，也没有意义，因为我们不知道 B 是否会成为 A。最好在你的`A`类中构建一个构造函数以 a`B`作为参数。

```
public class A : B
{
    public A(B b)
    {
        //perform your conversion of a B into an A
    }
}

public class B
{
    public B(){}
}

static void Main(string[] args)
{
    B b = new B();
    A a = new A(b);
    Console.WriteLine(a == null); // it is null!

    Console.WriteLine("Console.ReadKey();");
    Console.ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:54:12.680

您将无法执行这种类型的铸造，因为`B`很可能不是`A`！当然，`A`是 的子类`B`，因此您始终可以执行`GetA() as B;`. 但是走另一条路是没有意义的。最有可能的一个实例`A`比`B`.

考虑添加第三类，`C : B`. 如果您的函数`GetB()`实际上返回了 a`new C()`怎么办？这很好，因为`C`是`B`. 但是您当然不希望能够将其转换为`A`? `A`并且`C`几乎可以肯定几乎没有共同点。

# objective-c - 使用 NSTreeController，更改模型数组时是否必须手动重新加载 NSOutlineView？

> ID：10525712
> 
> 赞同：8
> 
> 时间：2012-05-09T23:47:57.233
> 
> 标签：objective-c, cocoa, binding, nsoutlineview, nstreecontroller

我有一个树状模型，我想使用 NSTreeController 在 NSOutlineView 中显示。

只要我使用 NSTreeController 的插入和删除函数来更改我的模型树，我就能够设置绑定并且一切正常。如果我尝试直接从模型树中插入或删除，在某些情况下 NSOutlineView 不会更新。

如果我将一个对象插入到扩展的对象组中，它会起作用：

![插入节点](../Images/25e8e27a9310dc1cf2adc7d48e444654.png)

![新节点显示](../Images/041b633cdf7d506664c3ff2e24408f66.png)

但是，如果我尝试将第一个对象添加到之前没有子节点的节点，则不会发生任何事情。显示三角形没有出现，所以我无法展开它来查看新节点。

![插入新的孩子](../Images/135d94cd35281589ccefd6241e76bc96.png)

![在此处输入图像描述](../Images/0dab0cd3faee854509e1954e5fdd1516.png)

如果我用一个新对象将鼠标悬停在那个节点上，它就会展开，我可以毫无问题地添加第二个孩子。但是三角形仍然是不可见的：

![在此处输入图像描述](../Images/6f7d735f5a0799d55b171ef5966667d8.png)

最后，如果我关闭所有这些节点的父节点并再次打开它们（触发重新加载），三角形会突然出现：

![在此处输入图像描述](../Images/e0bc2d26d8649a6d746736763260e328.png)

这就是为什么我想知道是否必须手动重新加载 NSOutlineView 的行以使三角形可见，或者我是否搞砸了什么？谢谢！！

更新：

在我的 Node 类中，我添加了一个像这样的新孩子：

```
- (void)addChild:(MyNode *)child {
    [self willChangeValueForKey:@"childNodes"];
    [children addObject:child];
    [self didChangeValueForKey:@"childNodes"];
} 
```

我也实现了这些（我在 IB 中为我的 NSTreeController 设置）：

```
- (NSArray *)childNodes {
    return [NSArray arrayWithArray:children];
}

- (NSInteger)countOfChildNodes {
    return [children count];
}

- (BOOL)nodeIsLeaf {
    return [children count] < 1;
} 
```

我知道这（尤其是`childNodes`）不是很优化，但我目前只是在试验，因为在最终版本中，我的孩子将存储在 C 数组中。

更新 2：

我也尝试为其他 2 个属性发送 KVO 通知，但这也无济于事。

```
- (void)addChild:(MyNode *)child {
    NSLog(@"%@", NSStringFromSelector(_cmd));
    [self willChangeValueForKey:@"nodeIsLeaf"];
    [self willChangeValueForKey:@"countOfChildNodes"];
    [self willChangeValueForKey:@"childNodes"];
    [children addObject:child];
    [self didChangeValueForKey:@"childNodes"];
    [self didChangeValueForKey:@"countOfChildNodes"];
    [self didChangeValueForKey:@"nodeIsLeaf"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:16:34.743

您必须确保对模型的所有更新都以符合 Key-Value Observing 的方式执行。

[Cocoa Bindings 编程主题：Cocoa Bindings 疑难解答](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/concepts/troubleshooting.html)

# nsis - 滚动许可证 NSIS 未滚动到许可证末尾

> ID：10525714
> 
> 赞同：1
> 
> 时间：2012-05-09T23:48:11.747
> 
> 标签：nsis

我正在使用[ScrollLicense 插件](http://nsis.sourceforge.net/ScrollLicense_plug-in)，试图强制用户滚动到许可协议的末尾。

我遇到的问题是他们目前只需要向下滚动大约 1/4 条即可启用“下一步”按钮......以前有人遇到过这个问题吗？

代码非常简单，并使用插件示例中的所有内容

LicenseForceSelection 单选按钮“我接受”“我拒绝”

```
!insertmacro MUI_PAGE_WELCOME 
!define MUI_PAGE_CUSTOMFUNCTION_SHOW LicenseShow
!insertmacro MUI_PAGE_LICENSE "$(MUILicense)"
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_UNPAGE_CONFIRM
!insertmacro MUI_UNPAGE_INSTFILES

Function LicenseShow
 ScrollLicense::Set /NOUNLOAD /RADIOBUTTONS
FunctionEnd

Section -Main
Files here
Section End

Function .onGUIEnd
    ScrollLicense::Unload
FunctionEnd 
```

# xml - Scala - 将 XML 附加到文件

> ID：10525715
> 
> 赞同：0
> 
> 时间：2012-05-09T23:48:14.097
> 
> 标签：xml, file, scala, append

我正在 Scala 中创建一个简单的 Web 服务器，并尝试将事件日志记录到 XML 文件中。因此，XML 结构是：

```
<log>
      <event>
             <type>Info/Warning/Error/etc</type>
             <description>File not found etc</description>
             <file>/etc/etc.etc</file>
             <ip>1.2.3.4</ip>
             <time>12:34:56 1st Jan 2012</time>
      </event>
      <event>
             etc...
      <event>
</log> 
```

目前我正在尝试将 XML 写入这样的文件：

```
var logEvent = 
    <log>
<event>
<type>ERROR</type>
<description>The Requested File was not found</description>
<file>{path}</file>
<ip>{connection.getRemoteSocketAddress}</ip>
<time>{new Date(System.currentTimeMillis)}</time>
</event>
</log>

XML.save(logFile, logEvent, "UTF-8", true, null) 
```

但是，当我检查文件时，只有最近的偶数存在并在服务器运行时刷新文件显示每个事件都会替换文件中的最后一个事件。

我还尝试使用`FileOutputStream`启用附加功能的方法，`XML.write`但它会在每个事件之前插入 XML 模式，这会阻止它被识别为正确的 XML 文件。它还`<log>`在每个事件周围添加根标签。

我能想到的唯一方法是将当前 XML 加载到文件中，添加到它然后将其写回，这对我来说似乎效率很低。

有没有一种简单的方法可以将 XML 附加到我丢失的文件中？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:33:45.383

如果您以该格式附加另一个日志，则您的文档将*不是有效*的 XML，因为缺少顶级容器。
如果您不在乎，您可以简单地使用 java.nio.channels.FileChannel。

```
import java.nio._
import java.io._

def appendToFile(f: File) {
  var foutstream: Option[FileOutputStream] = None
  lazy val foutchannel = foutstream.get.getChannel
  try {
    foutstream = Some(new FileOutputStream(f, true)
    val buffer = ByteBuffer.allocate(1024)
    "this text will be appended" foreach (buffer.put(_.toByte))
    buffer.flip
    foutchannel.write(buffer)
    foutchannel.close
    foutstream.get.close
  } catch {
    case e: Exception => e printStackTrace
  }
} 
```

# android - 接收广播意图时出错（有额外内容）

> ID：10525716
> 
> 赞同：1
> 
> 时间：2012-05-09T23:48:23.177
> 
> 标签：android, android-intent, broadcastreceiver, locationmanager, android-pendingintent

我是安卓新手。我正在尝试为从 mysql 数据库中检索到的不同位置添加邻近警报。我检索位置并将它们存储到 arrayList。

```
ArrayList<String> latArray, lngArray; 
```

现在，我正在向这样的位置添加接近警报：

```
 for (int i = 0; i < latArray.size(); i++) {     
                setProximityAlert(Double.valueOf(latArray.get(i)),Double.valueOf(lngArray.get(i)));
        }

private void setProximityAlert(double latitude, double longitude) {
        Intent intent = new Intent(IntentToFire);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

        locationManager.addProximityAlert(latitude, longitude, radius,expiration, proximityIntent);

        // register the broadcast receiver to start listening for proximity alerts
        filter = new IntentFilter(IntentToFire);
        registerReceiver(myReceiver, filter);
    } 
```

现在我的广播接收器类如下：

```
 public class MyProximityAlertReceiver extends BroadcastReceiver{

        private static final int NOTIFICATION_ID = 1000;

    @Override
    public void onReceive(Context context, Intent intent) {
        String key = LocationManager.KEY_PROXIMITY_ENTERING; //indicates whether proximity alert is entering or exiting

        //Retrieve extended data from the intent and return false if no value of the desired type is stored with the 

given name.
                Boolean entering = intent.getBooleanExtra(key, false);

                 if (entering) {
                        Log.d(getClass().getSimpleName(), "entering");
                        System.out.print("entering");
                    }
                    else {
                        Log.d(getClass().getSimpleName(), "exiting");
                        System.out.print("exiting");
                    }

                 NotificationManager notificationManager = 
                            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                        //Retrieve a PendingIntent that will start a new activity
                        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);        

                        //create icons and other stuffs for notification
                        Notification notification = createNotification();
                        notification.setLatestEventInfo(context, 
                            "Proximity Alert!", "In the area.", pendingIntent);

                        notificationManager.notify(NOTIFICATION_ID, notification);

                    }
........
} 
```

一旦我收到通知，我就会收到以下错误：接收广播意图时出错 { act=com.app (has extras) }

在双击几行错误代码时，它会将我带到这一行：

```
notificationManager.notify(NOTIFICATION_ID, notification); 
```

我还在暂停和重新启动时取消注册和重新注册接收器：

```
@Override
    protected void onPause() {
        unregisterReceiver(myReceiver);
        super.onPause();
    }

    @Override
    protected void onRestart() {
        registerReceiver(myReceiver, filter);
        super.onRestart();
    } 
```

我不明白我做错了什么？添加接近警报时我做错了吗？任何帮助表示赞赏。

# delphi - 初始化一个常量，它是固定数组的动态数组？

> ID：10525718
> 
> 赞同：9
> 
> 时间：2012-05-09T23:48:29.447
> 
> 标签：delphi

我可以初始化一个恒定的*动态*数组数组吗？

如果：

```
type
  tNamePair = array[1..2] of String;
  tPairList = array of tNamePair; 
```

如何创建初始化常量？我无法编译下面的代码：

```
const
  PairList: tPairList = ( ('One', '1'), 
                          ('Two', '2'),
                          ('Three', '3')); 
```

如果这不可能，可以使用*固定*数组初始化常量*固定*数组：

```
 type
    tPairList: array[1..3] of tNamePair; 
```

如果这不可能，可以使用*记录*初始化常量*动态*数组：

 *```
tNamePair = record 
              English: String;
              Number: String;
            end;           
tPairList = array of tNamePair; 
```

如果这不可能，可以使用*记录*初始化常量*固定*数组：

 *```
tNamePair = record 
              English: String;
              Number: String;
            end;           
tPairList = array[1..3] of tNamePair; 
```

如果这是不可能的，除了代码中的硬接线分配之外的任何建议，坦率地说，这比撰写这个问题花费的时间更少！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T00:49:06.413

在 XE7 之前，您无法创建*动态*数组常量。常量必须在编译时知道，但*动态*数组是在运行时分配的。

可以在编译时声明一个*固定*数组的*固定数组：*

```
type
  tNamePair = array[1..2] of String;
  tPairList = array[1..3] of tNamePair;

const
  PairList: tPairList = ( ('One', '1'),
                          ('Two', '2'),
                          ('Three', '3')); 
```

也可以在编译时声明一个*固定的**记录*数组：

```
type
  tNamePair = record
              English: String;
              Number: String;
            end;
  tPairList = array[1..3] of tNamePair;

const
  PairList: tPairList = ( (English: 'One'; Number: '1'),
                          (English: 'Two'; Number: '2'),
                          (English: 'Three'; Number: '3')); 
```

如果需要*动态*数组，则必须在运行时构造它。您可以直接构建它：

```
type
  tNamePair = array[1..2] of String;
  tPairList = array of tNamePair;

var
  PairList: tPairList;

initialization
  SetLength(PairList, 3);
  PairList[0][1] := 'One';
  PairList[0][2] := '1';
  PairList[1][1] := 'Two';
  PairList[1][2] := '2';
  PairList[2][1] := 'Three';
  PairList[2][2] := '3';
end. 
```

或者您可以定义一个编译时常量*固定*数组并在运行时将其复制到*动态数组中：*

```
type
  tNamePair = array[1..2] of String;
  tPairList = array[1..3] of tNamePair;
  tPairListDyn = array of tNamePair;

const
  PairList: tPairList = ( ('One', '1'),
                          ('Two', '2'),
                          ('Three', '3'));

function MakePairListDyn(const Pairs: tPairList): tPairListDyn;
var
  I, J: Integer;
begin
  SetLength(Result, Length(Pairs));
  J := 0;
  for I := Low(Pairs) to High(Pairs) do begin
    Result[J] := Pairs[I];
    Inc(J);
  end;
end;

var
  Pairs: tPairListDyn;

initialization
  Pairs := MakePairListDyn(PairList);
end. 
```

对于 XE7 后的情况，请参阅@LURD[的回答](https://stackoverflow.com/a/25622740/65863)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-02T11:51:07.507

在 XE7 中可以声明动态数组常量。

简单案例：

```
const
  a: TArray<String> = ['Delphi','XE7']; 
```

在您的示例中，它编译：

```
type
  tNamePair = TArray<String>;
  tPairList = TArray<tNamePair>;

const
  PairList: tPairList = [['One', '1'],['Two', '2'],['Three', '3']]; 
```

* * *

要创建记录的动态数组，可以在运行时完成，如下所示：

```
Type
  TNamePair = record
    English: String;
    Number: String;
    class function Define(_English,_Number: String): TNamePair; static;
  end;
  TPairList = TArray<TNamePair>;

class function TNamePair.Define(_English, _Number: String): TNamePair;
begin
  Result.English := _English;
  Result.Number := _Number;
end;

var
  pl : TPairList;
begin
  pl := [TNamePair.Define('A','1'),TNamePair.Define('B','2')];
  ...
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T08:20:27.373

您可以使用此方法：

```
const
  C_ARRAY_CODE : array ['a'..'d'] of string = ('01','02','03','04');
var Conter:Char;
begin
  //Use With Loop
  for Conter := Low(C_ARRAY_CODE) to high(C_ARRAY_CODE) do
    ShowMessage(C_ARRAY_CODE[Conter]);

  //Use Direct
  ShowMessage(C_ARRAY_CODE['a']);
end; 
```**

# zend-framework - Zend 框架依赖注入 vs Symfony2 依赖注入

> ID：10525722
> 
> 赞同：2
> 
> 时间：2012-05-09T23:48:47.810
> 
> 标签：zend-framework, dependency-injection, symfony

我最近在我的一些项目中经常使用 Symfony2 DI，并且刚刚开始尝试 Zend DI。我可以看到 SYmfony2 DI 比 Zend DI 好很多，因为它还提供了 Zend DI 中不存在的以下功能：

*   使用 XML、YML、PHP 配置服务...
*   标记功能
*   事件/调度员

如果我错了，请纠正我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:44:58.023

*   AFAIK zend DI 可以从任何可以返回数组的格式（XML、INI、YMP、PHP、NEON，甚至 CSV 可能：D）
*   那有什么用？
*   ZF2 有一个强大的 EventManager 并且在 DI 配置中也设置了 Dispatching - 任何实现 Dispatchable 接口的东西都可以被调度 - 但我看不到事件和 Dispatching 如何与 DI 实现相关联。

# c# - 将 TCP 客户端（在 linux/c++ 上）连接到 TCP 服务器（在 windows c# 上）

> ID：10525724
> 
> 赞同：-5
> 
> 时间：2012-05-09T23:49:11.830
> 
> 标签：c#, c++, tcp, tcpclient, tcpserver

> **可能重复：**
> [通过 tcp 从 linux 连接到 windows](https://stackoverflow.com/questions/10506788/connection-from-linux-to-windows-via-tcp)

我在 windows/c# 上有一个 TCP 客户端，在 linux/c++ 上有另一个客户端。我在两者上都有一个 TCP 服务器。

我在 windows/c# 上的 TCP 客户端工作正常，问题是 linux/c++ 上的 TCP 客户端

当我连接到 linux/c++ 上的 TCP 服务器时，它运行良好，但是当我尝试连接到 windows/c# 上的 TCP 服务器时，它没有连接，但 ping 正常。

这是失败的代码部分：

```
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server;  
struct in_addr addr={0};
char buffer[256];
if (argc < 3) {
   fprintf(stderr,"usage %s hostname port\n", argv[0]);
   exit(0);
}
portno = atoi(argv[2]);
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
addr.s_addr=inet_addr(argv[1]);
server = gethostbyaddr((char *) &addr, 6, AF_INET);
if (server == NULL) {
    fprintf(stderr,"ERROR, no such host\n");
    exit(0); 
```

问题在于：

```
server = gethostbyaddr((char *) &addr, 6, AF_INET); 
```

它返回 null，所以它打印“错误，没有这样的主机”

我尝试了每一种组合：

-TCP客户端（linux）到TCP服务器（linux）

-TCP客户端（linux）到TCP服务器（windows）

-TCP客户端（windows）到TCP服务器（linux）

-TCP客户端（windows）到TCP服务器（windows）

一切正常，除了：TCP客户端（linux）到TCP服务器（windows）

我还尝试了 TCP 客户端 netcat（包含在 linux 上）到 TCP 服务器（windows），它可以工作。

我已经从 windows 到 linux 以及从 linux 到 windows 都调用了 ping，它收到 100%

我不知道为什么我的 TCP 客户端（linux）没有连接到 TCP 服务器（linux）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:45:42.703

您必须拥有某种名称服务，例如 DNS，才能让 gethostbyaddr() 确定给定地址的主机名。当您将 Windows 转到 linux 时，这显然存在问题。一般来说，我自己在以这种方式解析主机名时遇到了很多可靠性问题，建议您不要使用它。正如 DTB 指出的那样，您只需要 IP 地址即可连接。如果您出于其他原因需要主机名，那么最安全的做法是让您的服务器在您的客户端首次连接时向您的客户端发送其主机名（反之亦然）

# .net - 我应该使用哪个 NoSQL 数据库进行日志记录？

> ID：10525725
> 
> 赞同：56
> 
> 时间：2012-05-09T23:49:17.043
> 
> 标签：.net, mongodb, logging

您是否有任何记录到 NoSQL 数据库以获取可扩展应用程序的经验？我对 NoSQL 数据库进行了一些日志记录研究，发现 MongoDB 似乎是一个不错的选择。另外，我发现[log4mongo-net](https://github.com/log4mongo/log4mongo-net)这似乎是一个非常简单的选择。

你会推荐这种方法吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-10T01:29:51.660

我决定修改这个公认的答案，因为在过去的 18 个月中，最先进的技术发生了显着变化，并且存在更好的替代方案。

**新答案**

对于可扩展的日志记录解决方案，MongoDB 是一个低于标准的选择。这有通常的原因（例如负载下的写入性能）。我想再提出一个，那就是它只解决了日志解决方案中的一个用例。

一个强大的日志记录解决方案至少需要涵盖以下阶段：

*   收藏
*   运输
*   加工
*   贮存
*   搜索
*   可视化

MongoDB 作为一种选择只解决了存储用例（尽管有些糟糕）。一旦分析了完整的链条，就会有更合适的解决方案。

@KazukiOhta 提到了一些选项。这些天我首选的端到端解决方案包括：

*   用于收集和运输的[Logstash-Forwarder](https://github.com/elasticsearch/logstash-forwarder)
*   用于处理的[Logstash](http://logstash.net/) 和[Riemann](http://riemann.io/)
*   用于存储和查询的[ElasticSearch](http://www.elasticsearch.org/)
*   用于可视化的[Kibana3](http://www.elasticsearch.org/overview/kibana/)

ElasticSearch 用于日志数据存储的底层使用将当前最好的 NoSQL 解决方案用于日志记录和搜索用例。Logstash-Forwarder / Logstash / ElasticSearch / Kibana3 都在 ElasticSearch 的保护伞下，[这一事实](http://www.elasticsearch.com/)提出了一个更有说服力的论点。

由于 Logstash 还可以充当 Graphite 代理，因此可以为收集和分析指标（不仅仅是日志）的相关问题构建一个非常相似的链。

**旧答案**

MongoDB [Capped Collections](http://www.mongodb.org/display/DOCS/Capped+Collections)非常流行并且[适用于日志记录](http://blog.mongodb.org/post/172254834/mongodb-is-fantastic-for-logging)，另外还有一个额外的好处是“少模式”，这通常是适合日志记录的语义。通常我们只知道我们想要登录到项目中的内容，或者在生产中发现某些问题之后。在这些情况下，关系数据库或严格模式往往难以更改，而试图使它们“灵活”往往只会使它们“缓慢”且难以使用或理解。

但是，如果您想[在黑暗中管理您的日志并使用激光并让它看起来像您来自太空](http://www.graylog2.org/)，那么总有[Graylog2](http://www.graylog2.org/about)使用 MongoDB 作为其整体基础架构的一部分，但在顶部提供了更多功能，例如通用的、可扩展的格式、专用的日志收集服务器、分布式架构和时髦的 UI。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-17T06:24:24.720

我见过很多公司都在使用**MongoDB**来存储应用程序日志。它的模式自由性对于应用程序日志非常灵活，在这种情况下，模式往往会不时改变。此外，它的[Capped Collection](http://docs.mongodb.org/manual/core/capped-collections/)功能非常有用，因为它会自动清除旧数据以保持数据适合内存。

人们通过普通的 Grouping 或 MapReduce 聚合日志，但速度不是那么快。尤其是 MongoDB 的 MapReduce 只能在单线程中工作，而且它的 JavaScript 执行开销很大。[新的聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)可以解决这个问题。

当您使用 MongoDB 进行日志记录时，需要注意的是高写入吞吐量导致的**锁争用。**虽然 MongoDB 的插入默认是即发即弃的风格，但调用大量的 insert() 会导致严重的写锁争用。这可能会影响应用程序性能，并阻止阅读器聚合/过滤存储的日志。

一种解决方案可能是使用**日志收集器框架**，例如[Fluentd](http://fluentd.org/)、[Logstash](http://logstash.net/)或[Flume](http://flume.apache.org/)。这些守护进程应该在每个应用程序节点上启动，并从应用程序进程中获取日志。

![Fluentd 加 MongoDB](../Images/916bb316b0fe423923a3c21cfe389bd2.png)

它们缓冲日志并将数据**异步**写入其他系统，如 MongoDB / PostgreSQL / 等。写入是通过**批处理**完成的，因此比直接从应用程序写入要高效得多。此链接描述了如何将日志从 PHP 程序放入 Fluentd。

*   [Fluentd：从 PHP 应用程序导入数据](http://docs.fluentd.org/articles/php)

这里有一些关于 MongoDB + Fluentd 的教程。

*   [Fluentd + MongoDB：](http://blog.10gen.com/post/27619817959/fluentd-mongodb-the-easiest-way-to-log-your-data)在 10gen 博客上有效记录数据的最简单方法
*   [Fluentd：将 Apache 日志存储到 MongoDB](http://docs.fluentd.org/articles/apache-to-mongodb)

MongoDB 的问题是当数据量超过内存大小时它开始变慢。此时，您可以切换到其他解决方案，如**Apache Hadoop**或**Cassandra**。如果你有上面提到的分布式日志层，你可以随着你的成长立即切换到另一个解决方案。本教程介绍如何使用 Fluentd 将日志存储到 HDFS。

*   [Fluentd：Fluentd + HDFS：即时大数据收集](http://docs.fluentd.org/articles/http-to-hdfs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:02:38.563

您应该指定您的应用程序生成什么样的日志消息。如果您只记录大量简单的日志消息，那么 MongoDB 是一个非常好的选择，因为它的可扩展性非常好。但是如果您需要复杂的身份验证内容或很多层次结构，我会使用传统的 rdbms。

# javascript - 是封闭路径内的一个点 - SVG Javascript

> ID：10525729
> 
> 赞同：1
> 
> 时间：2012-05-09T23:49:39.297
> 
> 标签：javascript, svg, raphael

您如何确定一个点是否在使用 javascript 的封闭 SVG 路径内？为什么以下代码不能按预期工作？

```
var paper = Raphael(0, 0, 600, 600);

var p = paper.path("M82.725,37.884l0.777,1.555l-20.391,9.569l-17.714,7.453L27.508,68.212v3.111l-6.997,19.442l16.329,20.996 l7.864,21.019l0.477,13.026l5.658,10.284l4.666,3.886l-2.333,2.336l7.002,0.777v6.219l3.886,10.888l8.555,0.778l-8.555,4.363 l-10.11-2.03l1.016,24.043l2.873,11.73l0.777-2.333l4.667,16.329l3.111-0.778L56.047,350.44l-16.052,32.639l-8.381,19.527 l15.253,11.277l7.083,9.399l49.77,20.129l8.726,4.064l16.917,3.736l10.131,6.222l27.195,6.222l7.799,4.079l17.865,0.284 l16.354,5.292l72.321,17.903l60.463,45.627l18.082,16.633l-2.032-24.106l-34.777-76.215l-12.66-41.99l-1.447-22.556l-6.826-30.328 l-2.851-12.442l5.054-10.108l5.206-14.061l-0.214-10.045l1.555-14.779h7.774l7.002-3.111l-4.495-27.996l-2.593-27.93l4.753-28.06 l8.555-3.241l20.217-3.652l7.002-3.995l42.771-4.837l13.999,6.393h-3.111l0.777,4.666l3.889-1.558l1.555,3.891h-3.109l4.6,32.661 l3.176,27.219l3.111,0.775l18.662,2.271l12.443,0.062l15.078,6.224l12.139,38.105h-31.926l-1.512,6.997l-2.334,0.775l2.334,3.891 l6.998-6.222l-0.777,4.666l0.777,4.667l15.555-9.333l2.332,0.78l10.889,3.886l-2.336-6.221l3.414,18.664l-8.057,45.126l-4.213,55.97 l-10.584,59.88l7.582,31.108l1.035,24.106L477,579.916h31.105V36.33l-14.777,6.522L442.004,58.88l-24.107,9.636l-32.663,5.032 l-41.993-11.557v-2.333l-45.104-13.219l-9.268-6.761L250.7,25.982L145,20.084L103.72,31.058L82.725,37.884z");

p.isPointInside(165,100); // returns false, but when I draw a circle at that point, it is clearly inside the path. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:20:48.637

这不会回答您的问题，甚至不会有太大帮助。一些谷歌搜索提出了[这个](https://github.com/DmitryBaranovskiy/raphael/issues/539)问题，以及一个观察结果——这个错误似乎受到你使用的是浮点数还是整数的影响。

我已经把你的代码放在这个[fiddle](http://jsfiddle.net/amadanNM/4yruT/)中，看起来他们是对的，尽管在你的情况下，使用小数使它工作，而不是中断。也许你可以使用这些信息以某种方式绕过这个问题。

归功于 github 上问题的创建者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T18:55:37.267

查看其他[问题](https://github.com/DmitryBaranovskiy/raphael/issues/538)，这可能是您的问题的原因。

它已在 2.1.1 版本中解决。您可以从此[分支](https://github.com/DmitryBaranovskiy/raphael/tree/v2.1.1)获取更新的代码。从中更新 Raphael 为我解决了这个问题。

# android - ActionBar Lag 隐藏标题

> ID：10525734
> 
> 赞同：6
> 
> 时间：2012-05-09T23:50:19.553
> 
> 标签：android, android-actionbar, actionbarsherlock

我将`ActionBarSherlock`用于我的应用程序，这是我用来隐藏`Title`of的代码`ActionBar`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayUseLogoEnabled(true);
    setContentView(R.layout.main_fragment);
} 
```

这样做的问题是，当应用程序启动时，`Logo`和`Title`同时显示的时间很短。这看起来真的很难看，我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T00:16:27.200

这是我的解决方案，我们需要定义一个新样式并在 Manifest 中声明它

```
<style name="VibhinnaTheme" parent="Theme.Sherlock.Light.ForceOverflow">
    <item name="android:actionBarStyle">@style/VibhinnaTheme.ActionBar</item>
    <item name="actionBarStyle">@style/VibhinnaTheme.ActionBar</item>
</style>

<style name="VibhinnaTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:displayOptions">showHome|useLogo</item>
    <item name="displayOptions">showHome|useLogo</item>
</style> 
```

这个链接很有帮助：[LINK](https://groups.google.com/group/actionbarsherlock/browse_thread/thread/b228ab55d670fadb)

# editor - Is there an article editor similar to Madmimi's email editor?

> ID：10525739
> 
> 赞同：2
> 
> 时间：2012-05-09T23:50:51.227
> 
> 标签：editor, markdown

I really like how madmimi works when you want to create an email. You have blocks that you insert, each block can be text, text+image, image etc And you fill that block with the content.

Is there an editor that is designed like this?

I need to create a CMS for a website. They need to write articles, and i don't want them to use HTML to edit. Something like Markdown would be great. But there aren't any good editor for general people to use. Markdown can be very confusing for people.

# eclipse - 为什么要在 Eclipse 中命名 java 包？

> ID：10525740
> 
> 赞同：-1
> 
> 时间：2012-05-09T23:51:00.183
> 
> 标签：eclipse

> **可能重复：**
> [为什么我们不应该使用（默认）src 包？](https://stackoverflow.com/questions/7995212/why-shouldnt-we-use-the-defaultsrc-package)

我开始在 Eclipse 中编写 Java 代码。我创建了一个新项目并注意到一个默认包。

创建一个新包（通过右键单击“src”）并将其命名为“com.johnhoffman.myproject”有什么好处？我的应用程序似乎与默认包一起工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:16:59.970

为什么要创建自己的包：

**组织**，如果你把所有东西都放在默认包中，几年后你将在默认包中拥有数千个类，而要找到任何东西几乎是不可能的。这会使命名一个新类变得困难——您需要检查该名称是否已被使用。

**被别人重用**如果大家都把所有东西都放在默认包里，你怎么区分**你的布局**类和**johns布局**类和**peters布局**类

我会尝试为您的包起一个合理的名称 - 如果您稍后需要参考代码，这会有所帮助。

```
i.e.
    shop.swing.exercise
rather than
    exercise1 
```

也见

[为什么我们不应该使用（默认）src 包？](https://stackoverflow.com/questions/7995212/why-shouldnt-we-use-the-defaultsrc-package)

# facebook-like - Facebook“Like Button”显示计数格式不正确

> ID：10525741
> 
> 赞同：0
> 
> 时间：2012-05-09T23:51:10.043
> 
> 标签：facebook-like

我在 www.6bebes.com 中添加了一个“点赞按钮”，但它显示的计数格式不正确（1,2000 而不是 1,2K）。如果我将“connect.facebook.net/es_LA/all.js#xfbml=1”更改为“connect.facebook.net/en_US/all.js#xfbml=1”，它显示正确但为英文。我看到其他西班牙语网站可以使用 es_LA，但我不知道为什么我的按钮会失败。如果您将“http://www.facebook.com/6bebes”作为“喜欢的网址”，它也会在[http://developers.facebook.com/docs/reference/plugins/like/中失败](http://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:26:37.173

这是 5 月 4 日报告的一个错误。在这里你可以关注它。

[http://developers.facebook.com/bugs/355302524526776](http://developers.facebook.com/bugs/355302524526776)

# html - CSS表格单元格等宽

> ID：10525744
> 
> 赞同：152
> 
> 时间：2012-05-09T23:51:26.407
> 
> 标签：html, css, html-table

我在表格容器中有不确定数量的表格单元格元素。

```
<div style="display:table;">
  <div style="display:table-cell;"></div>
  <div style="display:table-cell;"></div>
</div> 
```

是否有一种纯 CSS 方法可以使表格单元格的宽度相等，即使它们中的内容大小不同？

拥有最大宽度需要知道我认为您有多少个单元格？

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-05-10T01:09:32.297

这是一个不确定数量的单元格的工作小提琴：http: [//jsfiddle.net/r9yrM/1/](http://jsfiddle.net/r9yrM/1/)

您可以为每个父级`div`（*表格*）固定一个宽度，否则它将像往常一样为 100%。

诀窍是**`table-layout: fixed;`**在每个单元格上使用一些宽度来触发它，这里是 2%。这将触发*另一个*表 algorightm，浏览器非常努力地尊重所指示的尺寸。
请使用 Chrome（和 IE8- 如果需要）进行测试。最近的 Safari 没问题，但我不记得这个技巧与它们的兼容性。

CSS（相关说明）：

```
div {
  display: table;
  width: 250px;
  table-layout: fixed;
}

div > div {
  display: table-cell;
  width: 2%; /* or 100% according to OP comment. See edit about Safari 6 below */
} 
```

编辑（2013 年）：提防 OS X 上的 Safari 6，它有`table-layout: fixed;` *错误*（或者可能只是不同，与其他浏览器非常不同。我没有校对 CSS2.1 REC 表格布局；））。为不同的结果做好准备。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-10T00:03:16.583

**HTML**

```
<div class="table">
  <div class="table_cell">Cell-1</div>
  <div class="table_cell">Cell-2 Cell-2 Cell-2 Cell-2Cell-2 Cell-2</div>
  <div class="table_cell">Cell-3Cell-3 Cell-3Cell-3 Cell-3Cell-3</div>
  <div class="table_cell">Cell-4Cell-4Cell-4 Cell-4Cell-4Cell-4 Cell-4Cell-4Cell-4Cell-4</div>
</div>​ 
```

**CSS**

```
.table{
  display:table;
  width:100%;
  table-layout:fixed;
}
.table_cell{
  display:table-cell;
  width:100px;
  border:solid black 1px;
} 
```

[**演示。**](http://jsfiddle.net/heera/4pdBa/1/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-04-12T10:39:52.037

只是`max-width: 0`在`display: table-cell`元素中使用对我有用：

```
.table {
  display: table;
  width: 100%;
}

.table-cell {
  display: table-cell;
  max-width: 0px;
  border: 1px solid gray;
}
```

```
<div class="table">
  <div class="table-cell">short</div>
  <div class="table-cell">loooooong</div>
  <div class="table-cell">Veeeeeeery loooooong</div>
</div>
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-04-22T03:54:05.800

代替

```
 <div style="display:table;">
    <div style="display:table-cell;"></div>
    <div style="display:table-cell;"></div>
  </div> 
```

和

```
 <table>
    <tr><td>content cell1</td></tr>
    <tr><td>content cell1</td></tr>
  </table> 
```

查看围绕尝试使 div 像表格一样执行的所有问题。他们不得不添加 table-xxx 来模仿表格布局

表格在所有浏览器中都受支持并且运行良好。为什么要抛弃他们？他们必须模仿他们的事实证明他们做得很好。

在我看来，使用最好的工具来完成这项工作，如果你想要表格数据或类似表格数据表的东西就可以了。

我知道很晚的回复，但值得表达。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-25T03:36:26.477

这对每个人都有效

```
<table border="your val" cellspacing="your val" cellpadding="your val" role="grid" style="width=100%; table-layout=fixed">
<!-- set the table td element roll attr to gridcell -->
<tr>
<td roll="gridcell"></td>
</tr>
</table>
```

这也适用于迭代创建的表数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-05T01:59:58.300

这可以通过将表格单元格样式设置为`width: auto`和内容为空来完成。列现在等宽，但不包含任何内容。

要将内容插入单元格，请添加`div`带有 css 的内容：

```
position: absolute;
left: 0;
top: 0;
right: 0;
bottom: 0; 
```

您还需要添加`position: relative`到单元格中。

现在您可以将实际内容放入上面谈到的 div 中。

[https://jsfiddle.net/vensdvvb/](https://jsfiddle.net/vensdvvb/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-10T00:04:53.090

干得好：

[http://jsfiddle.net/damsarabi/gwAdA/](http://jsfiddle.net/damsarabi/gwAdA/)

您不能使用宽度：100px，因为显示是表格单元格。但是，您可以使用 Max-width: 100px。那么你的盒子永远不会超过100px。但是您需要添加溢出：隐藏以确保连接不会流到其他单元格。如果您希望保持高度不增加，您还可以添加空格：nowrap。

# c# - WebClient.UploadValues() 不返回响应

> ID：10525747
> 
> 赞同：2
> 
> 时间：2012-05-09T23:52:17.703
> 
> 标签：c#, .net, post, webclient, imgur

我正在尝试创建一个简单的 Imgur 应用程序，该应用程序将通过 WebClient.UploadValues() 调用将图像上传到他们的服务器。我在 StackOverflow 的其他地方找到了这段代码：

```
public static void PostToImgur(string ImageFilePath)
{
    using (var w = new WebClient())
    {
        var values = new NameValueCollection
        {
            { "key", API_KEY },
            { "image", Convert.ToBase64String(File.ReadAllBytes(ImageFilePath)) }
        };

        byte[] response = w.UploadValues("http://imgur.com/api/upload.xml", values);

        XDocument result = (XDocument.Load(new MemoryStream(response)));
    }
} 
```

我在返回 WebClient 响应的行上插入了一个断点，但是它似乎完全跳过它而没有抛出任何异常或任何东西。这不是我以前在 Visual Studio 中见过的任何东西，所以有些事情让我相信可能会发生一些奇怪的事情。

如果有帮助，我将在 OSX 的 Windows 7 虚拟机中运行它。有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T09:44:55.850

你可能想试试

```
using (WebClient client = new WebClient())
{
     client.UseDefaultCredentials = true;
     ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:11:44.247

发现问题，我使用 OAuth 令牌传递给 Imgur，该方法用于通过匿名 API 上传。

为匿名应用程序获取新的 API 密钥解决了这个问题。

# linux - Rsync with --checksum from local to local?

> ID：10525748
> 
> 赞同：5
> 
> 时间：2012-05-09T23:52:17.733
> 
> 标签：linux, bash, unix, rsync

I'll first try situate the problem a bit. We have a project that is build to a large tree of files. The build is several hundreds of MB, contains lots of (smallish) files, only a small fraction of which change between builds. We want to preserve a bit of history of these builds, and to do this efficiently we want to hardlink files that don't change between builds. For this we use `rsync` (as the more powerful brother of `cp`), from a local source to a local target with option `--link-dest` for doing the hardlinking magic.

This works fine for incremental builds: most files are not touched and `rsync` does the hardlink trick correctly. With full recompile builds (which we have to do for reasons that are not relevant here), things don't seem to work as expected. Because of the recompile, all files get a fresh timestamp, but content-wise, most files are still the same as the previous build. But even though we use `rsync` with the `--checksum` option (so `rsync` "syncs"/hardlinks based on content, not filesize+timestamp), nothing gets hardlinked anymore.

## Illustration

I tried to isolate/illustrate the problem with this simple (bash) script:

```
echo "--- Start clean"
rm -fr src build*

echo "--- Set up src"
mkdir src
echo hello world > src/helloworld.txt

echo "--- First copy with src as hardlink reference"
rsync -a --checksum --link-dest=$(pwd)/src src/ build1/

echo "--- Second copy with first copy as hardlink reference"
rsync -a --checksum --link-dest=$(pwd)/build1 src/ build2/

echo "--- Result (as expected)"
ls -ali src/helloworld.txt build*/helloworld.txt

echo "--- Sleep to have reasonable timestamp differences"
sleep 2

echo "--- 'Remake' src, but with same content"
rm -fr src/helloworld.txt
echo hello world > src/helloworld.txt

echo "Third copy with second copy as hardlink reference"
rsync -a --checksum --link-dest=$(pwd)/build2 src/ build3
# Using --modify-window=10 gives results as expected
# rsync -a --modify-window=10 --link-dest=$(pwd)/build2 src/ build3

echo "Final result, not as expected"
ls -ali src/helloworld.txt build*/helloworld.txt 
```

The first result is as expected: all three copies are hardlinked (same inode)

```
30157018 -rw-r--r--  3 stefaan  staff  12 May 10 01:28 build1/helloworld.txt
30157018 -rw-r--r--  3 stefaan  staff  12 May 10 01:28 build2/helloworld.txt
30157018 -rw-r--r--  3 stefaan  staff  12 May 10 01:28 src/helloworld.txt 
```

The final result is not as expected/desired:

```
30157018 -rw-r--r--  2 stefaan  staff  12 May 10 01:28 build1/helloworld.txt
30157018 -rw-r--r--  2 stefaan  staff  12 May 10 01:28 build2/helloworld.txt
30157026 -rw-r--r--  1 stefaan  staff  12 May 10 01:28 build3/helloworld.txt
30157024 -rw-r--r--  1 stefaan  staff  12 May 10 01:28 src/helloworld.txt 
```

The third copy `build3/helloworld.txt` is not hardlinked to the one from `build2`, even though the content is the same, so the checksum check should see this.

## Question

Anybody has a idea what is wrong here? Is my expectation wrong? Or is rsync ignoring the `--checksum` option when syncing from local to local, for example because it knowns looking at inode numbers is smarter than spending time on checksums?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:56:07.560

问题是使用“-a”标志会强制保留修改时间（隐含的“-t”）。

如果您改用“-rlpgo”（或在“-a”后面加上“--no-times”），将不再考虑保留修改时间，因此将共享inode。您仍然必须指定“--size-only”或“--checksum”（后者显然更安全），这样它就不会根据文件时间进行比较。

文档没有明确区分哪些标志用于**触发**更新，哪些用于控制属性的**保存**。

# htmlpurifier - 允许通过 HTMLPurifier + CSStidy 进行媒体查询需要什么

> ID：10525751
> 
> 赞同：1
> 
> 时间：2012-05-09T23:52:26.813
> 
> 标签：htmlpurifier, csstidy

允许通过 HTMLPurifier + CSStidy 进行媒体查询需要什么？

换句话说，我正在使用这些库：

```
require_once 'inc_php_classes/htmlpurifier-4_4_0/library/HTMLPurifier.auto.php';
require_once 'inc_php_classes/csstidy-1_3/class.csstidy.php'; 
```

...在将管理员用户输入保存到数据库之前对其进行清理..用于填充*外部样式表*...因此碰巧任何输入媒体查询都被处理了..例如：

`@media only screen and (min-width: 600px) and (max-width: 939px) {`

变成

`@media only screen and min-width 600px and max-width 939px {`

..这会破坏媒体查询，至少在 Chrome 18/Mac 中是这样。

表单/输入用于为受信任的管理员用户创建自定义样式表.. 他们需要媒体查询.. 但即使他们是受信任的，我也不想放弃使用 CSStidy.. 因为管理员的机会不大擅离职守，更不用说我想清理他们的新手 CSS 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:29:12.357

不确定，vanilla HTML Purifier 绝对不支持它。CSSTidy 确实正确解析媒体选择器是合理的，所以这只是教 HTML Purifire 不要剥离它们的问题。

# scala - 在 Play 中使用 scala 2.9.2？

> ID：10525759
> 
> 赞同：5
> 
> 时间：2012-05-09T23:53:22.407
> 
> 标签：scala, playframework, playframework-2.0

我有一个 Play 项目。不幸的是，我正在反序列化一些使用 scala 2.9.2 序列化的案例类。由于 play 使用 2.9.1，因此存在 InvalidClassException。

```
Caused by: java.io.InvalidClassException: scala.Option; local class incompatible: stream classdesc serialVersionUID = 2832403187243187948, local class serialVersionUID = 7113474029577970182 
```

是否可以强制播放使用 scala 2.9.2？play 项目配置似乎做了很多神奇的事情。里面没有多少`projects/Build.scala`。

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {
    val appName         = "myproj"
    val appVersion      = "1.0-SNAPSHOT"
} 
```

由于 2.9.2 与 2.9.1 二进制兼容，我应该能够强制使用它——但我不知道怎么做！

更新：添加 scala 2.9.2 作为依赖项会给我以下错误。

```
[error] {file:/home/schmmd/repo/openie-demo/}openiedemo/*:update: Version specified for dependency org.scala-lang#scala-lang;2.9.2 differs from Scala version in project (2.9.1). 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T23:26:05.457

尝试更新您的 Build.scala

```
object ApplicationBuild extends Build {

    val appDependencies = Seq(
       // Add your project dependencies here,
       "org.scala-lang" % "scala-compiler" % "2.9.2",
      ...
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).setting(
      // Add your own project settings here
      scalaVersion := "2.9.2"
    )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:08:05.933

您可以在 sbt 中更改 scala 版本。不确定是否有 2.9.2 的 play sbt 插件。

[如何更改 sbt 项目的 Scala 版本？](https://stackoverflow.com/questions/2888031/changing-scala-version-in-existing-sbt-project)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T17:56:59.867

Play 2.0.4 没有与 Scala 2.9.2 兼容的 sbt 插件，因为 play 2.0.4 是基于 SBT 0.11.x 构建的。玩！使用 SBT 0.12.x 升级到 Scala 2.9.2，这打破了 Play 2.0.4 使用 Scala 2.9.2 的向后兼容性

但是，Scala 2.9.3 有一个后向端口。在 Build 文件中将 scalaVersion 更改为 2.9.3 以使用 play 2.0.4 SBT 插件。

# javascript - 在脚本链接标签中使用注释

> ID：10525762
> 
> 赞同：4
> 
> 时间：2012-05-09T23:53:34.333
> 
> 标签：javascript, jquery, html

在调用外部脚本的脚本标签中放置注释会导致什么问题？我的同事告诉我，这不是一个好习惯。

像这样的东西：

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript">
            //    import jQuery
            //    cdn refers to a remotely hosted library
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:56:07.873

没有错，也许是可读性。内容也将被源覆盖。

```
<!-- import jQuery. CDN refers to a remotely hosted library -->
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:56:12.627

完全没有问题。如果`script`元素具有`src`属性，则内容将被忽略。

也许您的同事指的是脚本标签内的 HTML 注释，这些注释用于不支持 JavaScript 的古老浏览器？

```
<script>
   <!--
      // JS was here
   // -->
</script> 
```

[脚本标签内的 HTML 注释是最佳实践吗？](https://stackoverflow.com/questions/808816/are-html-comments-inside-script-tags-a-best-practice)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T02:43:23.737

也许你的同事担心你会养成这样做的习惯

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript">
            //    import jQuery
            //    cdn refers to a remotely hosted library
</script> 
```

然后最终很难弄清楚为什么这不起作用

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript">
     $(document).ready(function() {
           $('#ActionButton').click(DoAction);
     });
</script> 
```

因为你养成了一个坏习惯

# javascript - Why this function causes memory leak

> ID：10525765
> 
> 赞同：0
> 
> 时间：2012-05-09T23:54:03.140
> 
> 标签：javascript

```
function parseAttach(b)
{
    var h="";
    for(i=0;i<b.length;i++)
    {
        var a=b[i];
        switch(a['type'])
        {
            case "image":
                h+='<li class="attach aImg" style="background:#000;border-bottom:2px solid #fff"><img style="max-width:425px;max-height:500px" src="http://img.xiami.com/u/phoo/'+a['file']+'"></li>';
            break;
            case "video":
                h+='<li class="attach aVideo" style="background:#f3f3f3"><span class="MxND" f="'+a['from']+'" d="'+a['id']+'"></span></li>';
            break;
            case "music":
                h+='<li class="attach aMusic"><embed src="http://www.xiami.com/widget/0_'+a['id']+'/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed></li>';
            break;
        }
    }
    return h;
} 
```

Once above function is running, the page cannot be interacted, memory and cpu usage of that page skyrocket.

this is an example of parameter `b` passed to this function:

```
[{"type":"video","from":"k6","id":"kyxGTZbD-vQ8Domm-eeHiQ"}] 
```

b.length is not more than 2 and this function was executed no more than three times. If this function is removed, memory leaking will not happen.

UPDATE:

Following @GarethMcCaughan 's suggestion, I added alert(i) to the top of the loop, it keeps alerting 0, I headed to the invocation code:

```
for(i=0;i<c[0].length;i++)//the breakpoint
{
    ......
    if(t[6].length>0)
    {
        //console.log(t[6].length);
        //var a=parseAttach(t[6]);
        var a="";
        h+='<ul class="attaches">'+a+'</ul>';
    }
   ......
} 
```

as you see in the comment, if I replace the invocation with a console.log, the log only show 4 times of execution. But why the function are invoked repeatedly?

Then I found the console report a breakpoint at the top of the loop(I've comment it out), is this the reason why the function keeps invoking?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:37:35.210

在您的两个循环中，您都没有放在变量`var`之前。`i`这意味着它是全球性的。如果它是全局的，那么两个循环都使用**相同** `i`的.

```
for(i=0;i<b.length;i++) 
```

添加 var 它应该修复它：

```
for(var i=0;i<b.length;i++) 
```

**编辑**：进一步澄清：

```
for(i=0;i<c[0].length;i++)
{
    ......
    if(t[6].length>0)
    {
        // THIS CALL WILL SET THE GLOBAL i TO t[6].length
        var a=parseAttach(t[6]);
    }
   ......
} 
```

因此，外部循环的退出条件永远不会满足，循环的每次迭代都会`i`返回，因此`i`永远不会到达`c[0].length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:41:27.407

除了一个错误之外，一切似乎都很好：您忘记将 counter 变量设置为`i`本地变量。当从循环调用时，代码将重置外部循环的同名计数器变量（为 2，因为这是最大长度）并使其永远不会达到其结束条件：

```
var i; // this variable will always be referenced
function x(number) {
    for (i=0; i<number; i++)
        dosomething;
}
for (i=0; i<5; i++)
    x(2); // resets i to 2
// => never-ending loop 
```

无限循环将使您的浏览器挂起，冻结界面直到代码执行。某些浏览器可能会因运行时间过长的脚本而引发错误，并通过超时实现。

# javascript - 在负数之前中断while循环

> ID：10525768
> 
> 赞同：3
> 
> 时间：2012-05-09T23:54:23.337
> 
> 标签：javascript

我试图在它进入负数之前打破一个while循环，但它一直超过0并显示负数

问题是我的while循环这是循环

```
while(Math.round(housetotal)>0){
    housetotal-=o*12;
    zx++;
    row_data.push([zx,
    {v:housetotal, f:'$'+Comma(housetotal)},        
    ]);

    if(zx == year || housetotal<=0){                 
            break
        }

    } 
```

我的循环是这样工作的。

让我们说

```
housetotal = 239,852 
o = 1,438 
```

222,596 并在 14 次循环后继续倒计时至 -1,732

我试图让它停在第 13 个循环，即 15,524，所以它不会变成负数

在我的while语句中，如果zx等于我拥有的任何数字，在这种情况下是15，o * 12是乘以12的任何数字，但在这种情况下是1,438 x 12 = 17,256

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:00:37.550

您需要`housetotal`在每次循环迭代开始时舍入后为正数，如果在每次循环迭代结束时不是正数，则退出循环。到目前为止，一切都很好。

但是，在这些检查之后，您 (1) 更改 的值，`housetotal`然后*(* 2) 使用它（在这种情况下，将其放入`row_data`.

如果要确保在使用时该值为正，则应在使用前立即对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:58:35.013

```
var a = 239.852,
o = 1.432;
while(a>0 && (a-o*12)>0){
    a -= (a-o*12)>0 ? o*12 : 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:39:00.160

一种解决方案是检查赋值后的值并打破循环然后：

```
while(Math.round(housetotal)>0){
   housetotal-=o*12;
   zx++;

   if(zx == year || housetotal<=0)               // moved here
      break;

   row_data.push( [zx, {v:housetotal, f:'$'+Comma(housetotal)}, ]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T00:54:29.460

查看 for 循环。它的部分是：

```
<init counter variable>;
while ( <counter condition met> ) {
    <do task>;
    <update counter>;
} 
```

当您在执行重复任务之前更新计数器时，它将以不再满足条件的运行结束。我建议您的代码：

```
while( zx != year && Math.round(housetotal) > 0){
    row_data.push([
        zx,
        {v:housetotal, f:'$'+Comma(housetotal)},        
    ]);

    housetotal-=o*12;
    zx++;
} 
```

# php - 如何使用 inArray 并使用 jQuery 制作很棒的井字游戏（Noughts and Crosses）

> ID：10525774
> 
> 赞同：0
> 
> 时间：2012-05-09T23:54:56.010
> 
> 标签：php, jquery, mysqli

我做了一个井字游戏！只是为了好玩。它有效，但不能说一旦有人赢了。我使用 .inArray 在当前板上寻找成功的解决方案。这个想法是，一旦棋盘上出现一个获胜的方块组合，就会弹出一个警报（“你赢了 Bruh”）。也许 inArray 正在将 win 数组与所选元素进行比较，而不是将 win 数组的元素与所选元素进行比较？我难住了。如果您有兴趣，请查看 jsfiddle，如果您想通了，请留下回复。谢谢。[http://jsfiddle.net/QH6W9/7/](http://jsfiddle.net/QH6W9/7/)

//**更新**

我最终使用了一个幻方并检查 3 的组合是否加到 15 中，并使用可能的组合和 MySQL 数据库实现了自学和基本 AI。我使用了第二个脚本让计算机自行运行并建立数据库。这不是最完美的代码，但你自己看看..

```
//---//--//--//--//--//--//---//--//--//--//--//---//  
//   TIC-TAC-TOE:                                  //
//Good Old game. This version is meant to be a self//
//teaching system as a means to utilise and master //
//exchange between web-page, server and database.  //
//---//--//--//--//--//--//---//--//--//--//--//---//  

// Author: Dylan Madisetti
// Date: I don't remember?

$(document).ready(function(){

    var magiclist = [8,3,4,1,5,9,6,7,2]; //for humans          
    var squares = [8,3,4,1,5,9,6,7,2];  //Le Magic Square\\ 
    var xs = [];                         //------------//
    var os = [];                         //  8 | 3 | 4 //
    var x = 0;                           //----+---+---//
    var o = 0;                           //  1 | 5 | 9 //
    var gameover = -1;                   //----+---+---//
    var FirstMoves = [];                 //  6 | 7 | 2 //
    var SecondMoves = [];                //------------//
    var ThirdMoves = [];    //All Diagonals,rows and Columns add to 15\\            
    var moves = [];
    var i = 0;
    win = false;
    end = false;
    // I have a radio button for whether the human plays as x or o     
          if(document.getElementById('human').checked) {
              humanmove("x",x,xs,moves,squares,gameover,i,magiclist,"o",o,os); //human move    
          }else{
              ajaxmove("x",x,xs,moves,squares,gameover,i,magiclist,"o",o,os); //computer move
            x++;
            i++;             
            humanmove("o",o,os,moves,squares,gameover,i,magiclist,"x",x,xs); //human move
          };                
}); 
```

* * *

```
//---//--//--//--//--//--//--//--//--//--//--//---//  
// AjaxMove Desc. Checks if can win or block if it//
//can't, Sends data to MYSQLtest which in turn    //
//queries xos database and returns best move is   //
//then used.                                      //
//---//--//--//--//--//--//--//--//--//--//--//---//

function ajaxmove(status,counter,turn,moves,squares,gameover,i,magiclist,otherturn){

bestmove = 0;
if (turn.length >= 2){ //goes through each possibility
     FirstMoves = turn.slice(0);
     while (FirstMoves.length > 1){                        
           FirstX = FirstMoves[0];
           SecondMoves = FirstMoves.slice(1);
           ThirdMoves = squares.slice(0);
           $.each (SecondMoves,function(){
                if (ThirdMoves.length > 0){
                                     SecondX = this;
                         $.each (ThirdMoves,function(){
                             ThirdX = this;
                             if (FirstX + SecondX + ThirdX == 15){
                             bestmove = this;
                             };
                         });
                       ThirdMoves = ThirdMoves.slice(1);                                
                 };
           });
           FirstMoves = FirstMoves.slice(1); 
     }
};
if ((bestmove == 0) && (otherturn.length >= 2)){
     FirstMoves = otherturn.slice(0);
     while (FirstMoves.length > 1){
           FirstX = FirstMoves[0];
           SecondMoves = FirstMoves.slice(1);
           ThirdMoves = squares.slice(0);
           $.each (SecondMoves,function(){
                if (ThirdMoves.length > 0){
                      SecondX = this;
                         $.each (ThirdMoves,function(){
                             ThirdX = this;
                             if (FirstX + SecondX + ThirdX == 15){
                                 bestmove = this;
                             };
                         });
                       ThirdMoves = ThirdMoves.slice(1);                                
                 };
           });
           FirstMoves = FirstMoves.slice(1); 
     }  
};
if (bestmove == 0){
    $.ajax({type:'POST',
        async: false,
        url:'/XOsAI/MYSQLtest.php',
        data:{
            status: status,
            moves: moves,
            remaining: squares,
            gameover: gameover
        },
        success: 
            function(data){
                 bestmove = data;                                           
            }
   });
};
bestmove = Number(bestmove);
index = squares.indexOf(bestmove);
    turn[counter] = bestmove; 
select = magiclist.indexOf(bestmove);
    $('.square').eq(select).addClass(status);
    $('.square').eq(select).addClass('clicked');
    squares.splice(index,1);
    moves[i] = turn[counter];          
    gamecheck(turn,squares,moves); //game check (see below)
    if (win) {
         alert ("You Lose!");
         while (i <= 9){                          
               i++;
               moves[i] = "'" + status + "'";                      
         };                                   
         $.ajax({type:'POST',
               async: false,
               url:'/XOsAI/MYSQLtest.php',
               data:{
                    status: status,
                    moves: moves,
                    remaining: squares,
                    gameover: gameover
              }                      
        });
   };
}; 
```

* * *

```
//---//--//--//--//--//--//--//--//--//--//--//---//  
// HumanMove Desc. Allows human to make a move and//
//checks if they have won.Updates Database if so. //
//Also Triggers computer move.                    //
//---//--//--//--//--//--//--//--//--//--//--//---//

function humanmove(status,counter,turn,
              moves,squares,gameover,
              i,magiclist,otherstatus,
              othercounter,otherturn){      
  $(".XOs").on('click', '.square:not(.clicked)', function() {
       if (gameover == -1){
       if (!$(this).hasClass("clicked")) {
              $(this).addClass('clicked');
              $(this).addClass(status);
              data = magiclist[$('.square').index(this)];
              turn[counter] = data;
              index = squares.indexOf(data);
              squares.splice(index,1);
              moves[i] = turn[counter];
              gamecheck(turn,squares,moves); //game check (see below)
              if (!(end)){
              if (win) {
                      alert ("You Win!");
                      gameover = 1;
                      while (i <= 9){                          
                          i++;
                          moves[i] = "'" + status + "'";                      
                      };                                  
                      $.ajax({type:'POST',
                           async: false,
                           url:'/XOsAI/MYSQLtest.php',
                           data:{
                               status: status,
                               moves: moves,
                               remaining: squares,
                               gameover: gameover
                           }                     
                      });
                      $('.squares').addClass('clicked');
              };
              counter++;
              i++;
              if (gameover == -1){
              ajaxmove(otherstatus,othercounter,otherturn,moves,squares,gameover,i,magiclist,turn); //computer move           
              othercounter++;
              i++;
              if (win) {gameover = 1;};
              };
              }; 
       };
    };
  });
}; 
```

* * *

```
//---//--//--//--//--//--//--//--//--//--//--//---//  
//  GameCheck Desc. Runs through each possibility.//
//As data locations of divs are arranged in magic //
//square, checks if any three add to 15\. Checks   //
//for cat game as well.                           //
//---//--//--//--//--//--//--//--//--//--//--//---//  

function gamecheck(turn,squares,moves){ 
    if (turn.length >= 3){
       FirstMoves = turn.slice(0);
       while (FirstMoves.length >= 3){                        
           FirstX = FirstMoves[0];
           SecondMoves = FirstMoves.slice(1);
           ThirdMoves = SecondMoves.slice(1);
           $.each (SecondMoves,function(){
                if (ThirdMoves.length > 0){
                      SecondX = this;
                         $.each (ThirdMoves,function(){
                             ThirdX = this;
                             if (FirstX + SecondX + ThirdX == 15){
                                 win = true;
                             };
                         });
                       ThirdMoves = ThirdMoves.slice(1);                                
                 };
           });
           FirstMoves = FirstMoves.slice(1); 
       }
   };

  if (!(squares.length > 0) && win == false) { //if any remain      
       alert ("You Draw!");
       gameover = 1;
       moves[9] = "'c'";                                                             
       $.ajax({type:'POST',  //ajax to tell server Cat Game
               async: false,
               url:'/XOsAI/MYSQLtest.php',
               data:{
                    status: "c",
                    moves: moves,
                    remaining: squares,
                    gameover: gameover
               }                      
       });
       end = true;
  };
}; 
```

* * *

和 php 如果有人有兴趣

```
//--------------------------------------------------------------------------
// 1) Connect to mysql database
//--------------------------------------------------------------------------
$con = mysqli_connect($host,$user,$pass,$databaseName);
$dbs = mysqli_select_db($con,$databaseName);

//--------------------------------------------------------------------------
// 2) Query database for bestmove or insert data if gameover
//--------------------------------------------------------------------------
$gameover = 0;
$col = 0;
$status = $_POST['status'];
$moves = $_POST['moves'];
$gameover = $_POST['gameover'];
$remaining = $_POST['remaining'];
$bestresult = 0;
if ($gameover < 0){
  $required = (count($remaining) * 50); //seemed large enough to make a smart move
  if (count($moves) > 0){
    foreach ($moves as $move){
      $columns[$col].=' AND ';
      $columns[$col].= '`';
      $columns[$col].= ($col + 1);
      $columns[$col].= '`=';
      $columns[$col].= $move;
      $col++;
    };    
  $moves = implode(' ',$columns); 
  };
  $sql = '
            SELECT *
            FROM xos
            WHERE status=\'';
  $sql .= $status;
  $sql .= '\' ';
  if (count($moves) > 0){
    $sql .= $moves ;
  };
  $results = mysqli_query($con,$sql); //fetch result
  $results = $results->num_rows;
  echo $con->error; 
if ($results > $required){
        if (count($moves) == 0){
          $col = 1;
      };
      $reset = $sql;
      foreach ($remaining as $bestmove){
          $sql .=' AND ';
          $sql .= '`';
          $sql .= $col;              
          $sql .= '`='; 
          $sql .= $bestmove;
          $sql .= ' ';
          $results = mysqli_query($con,$sql);
          $results = $results->num_rows;
          if ($con->error){
              echo $con->error ."\n";
              echo $sql .":";
              echo $results ."\n \n";
          }
          if ($results >= $bestresult){
              $bestresult = $results;
              $bestplay = $bestmove;
          };
          $sql = $reset;
      };  
}else{
    $sql = '
           SELECT *
           FROM xos
           WHERE status=\'c\'';
    if (count($moves) > 0){
        $sql .=' AND ';
        $sql .= $moves ;
    };
   $results = mysqli_query($con,$sql); //fetch result
   $results = $results->num_rows;
    if ($results > $required){
          if (count($moves) == 0){
          $col = 1;
        };
        $reset = $sql;
        foreach ($remaining as $bestmove){
          $sql .=' AND ';
          $sql .= '`';
          $sql .= $col;              
          $sql .= '`='; 
          $sql .= $bestmove;
          $sql .= ' ';
          $results = mysqli_query($con,$sql);
          $results = $results->num_rows;
          if ($con->error){
              echo $con->error ."\n";
              echo $sql .":";
              echo $results ."\n \n";
          }
          if ($results >= $bestresult){
              $bestresult = $results;
              $bestplay = $bestmove;
          };
          $sql = $reset;
      };
    }else{
    $max = count($remaining) - 1;
    $bestplay = rand(0,$max);
    $bestplay= $remaining[$bestplay];
    };
  };echo $bestplay;
}else{
$sql = "INSERT INTO `xos`(`1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `Status`) VALUES (";
      for ($i = 0; $i <= 8; $i++) {
          $sql .= $moves[$i];
          $sql .= ",";
      };
      $sql .= "";
      $sql .= $moves[9];
      $sql .= ")";
      if ($con->query($sql) === false){
          echo $con->error;
          echo $sql;
      };     
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:03:17.877

乍一看，它看起来像在

```
$(wins).each(function(){
    var maybe = $.inArray(this,xs); //if Xs match combos win
    ...
} 
```

您正在检查是否`array xs`在当前检查的获胜组合中找到 ，而不仅仅是比较`this`（`xs`两个一维数组）。【试过`$.inArray(wins, xs)`了，还是不行。】

会是这样吗？

**更新：**此版本有效：http: [//jsfiddle.net/QH6W9/9/](http://jsfiddle.net/QH6W9/9/)

我修复了您的代码以检索 X'ed 字段的 ID：

```
var xs = $(".x").map(function(i, el) {
             return parseInt($(el).attr('id'))
         }).get(); // get ids as array 
```

还有获胜情况的检测：

```
$(wins).each(function() {
    var found = true;
    for(var i =0; i<this.length; i++) {
        found &= ($.inArray(this[i], xs) > -1);
    }
    if (!found) return;
    alert("You Won Bruh");
    var all = $(".square");
    $(all).addclass('clicked'); //stops more turns
    return;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:25:23.020

您的程序中有两个问题：

首先，您有以下内容：

parseInt(数字); xs[i] = 数字；

`xs[i]`仍然得到一个字符串，因为`parseInt()`没有修改它的参数。相反，它返回数值。所以我将该代码更改为更紧凑：

```
xs[i] = parseInt(number); 
```

其次，在您的`$(wins).each()`循环中，您正在使用`$.inArray()`，但您已经*拥有*单独的数组，因此您真的想在那里进行数组子集比较。由于 Javascript/jQuery 没有内置的数组子集函数，我只是比较了数组中的每个元素：

```
$(wins).each(function(){
    console.log( 'template: ' + this );
    var allIn = true;
    for( var i=0; i<this.length; i++ ) {
        console.log( this[i] );
        if( $.inArray( this[i], xs ) == -1 ) allIn = false;
    }
if ( allIn ){
    alert("You Won Bruh"); 
```

现在它可以工作了。我只是为 X 做的，不是为 O 做的……我会留给你的！你可以在这里看到我的 jsfiddle 解决方案：

[http://jsfiddle.net/HxGZE/2/](http://jsfiddle.net/HxGZE/2/)

**编辑**：我的解决方案现在有效。请参阅 jsfiddle 以获取证据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T00:25:41.743

你有几个问题。

首先，您将 的所有位置`.x`放入一个数组中，然后查看该数组是否在`wins`数组中。

不幸的是，只有当项目是*相同*`$.inArray()`的项目时才会返回索引，而不是如果它们具有匹配的值。

 *```
$.inArray([4,5,6], [[1,2,3], [4,5,6]]) // returns -1  

var ary1 = [1,2,3];
var ary2 = [4,5,6];
$.inArray(ary2, [ary1, ary2]); // returns 1

$.inArray(ary2, [ary1, [4,5,6]]); // returns -1 
```

其次，如果您在游戏中处于拥有超过 3 个 X 的状态，您将永远无法匹配获胜位置：

```
X O _
X X O
X O _ 
```

在这种情况下`xs`将等于`[1,4,5,7]`。这是一个获胜的位置，但不会匹配您的任何阵列。

还有许多其他方法可以解决这个问题。给定您的`wins`数组，最简单的方法是遍历每个数组并检查`div`数组中每个位置的`X`. 如果是这样，停止并宣布获胜。

演示：http: [//jsfiddle.net/jtbowden/4BDwt/1/](http://jsfiddle.net/jtbowden/4BDwt/1/)

请注意，我在此示例中清理了一些其他代码。

*   删除了多余的`clickable`类，并使用 `.square:not(.clicked)`.
*   替换`.click()`为`.on()`。
*   删除了`.square`ID，只使用`div`顺序`XOs`作为位置，`.eq()`与数组位置一起使用。ID 不应该以数字开头，最好将数据存储在 jQuery 数据属性中，例如`<div data-location="1">`，然后使用`.data('location')`. 但是，在这种情况下，不需要它，因为 div 顺序告诉我们它在哪里。
*   替换`$(array).each(function(){})`为`$.each(array, function(){})`。这是迭代不是 jQuery 对象的普通数组的正确方法。*

# iphone - 重新加载视图确实在从其他选项卡返回视图时加载（iPhone 界面生成器）

> ID：10525775
> 
> 赞同：1
> 
> 时间：2012-05-09T23:54:56.360
> 
> 标签：iphone, objective-c, interface-builder, viewdidload, uitabcontroller

我有 2 个由标签栏控制器控制的视图。

我遇到的问题是，从第二个选项卡返回到我的第一个选项卡时，理想情况下，我需要根据我在第二个选项卡中所做的更改重新加载第一个视图的所有数据。

最好不要解释原因，因为我对过度复杂的代码和许多变通方法的失败尝试可能会让你感到震惊。

所以基本上，当我从另一个选项卡返回视图时，我可以让 viewDidLoad 自行重做吗？

编辑：答案是：我认为 viewWillAppear 而不是 viewDidLoad （不能回答自己的问题 8 小时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:02:53.237

在大多数情况下，最好不要在 viewDidAppear 上每次都重新加载，而是向视图 1 发送一条消息，告诉它在下次出现时重新加载。这避免了不必要的重新加载（这可能对用户体验不利并使用不必要的带宽）。根据应用中的屏幕流，有多种方法可以做到这一点。一种方法是：

- 在视图 1 上创建一个 ivar BOOL shouldReload

- 每当视图 2（或应用程序中的任何其他地方）发生需要重新加载视图 1 的事情时，都会向 [NSNotificationCenter defaultCenter] 发布一条名为“View1ShouldReload”之类的消息。

-on load of view 1 将 shouldReload 标志设置为 NO 并开始监听

- 在通知选择器上，将 shouldReload 设置为 YES

-on viewDidAppear 检查是否（应该重新加载）然后重新加载。

还有很多其他方法可以做到这一点（比如委托、单例等等），但这是一种让您的应用程序更有效地工作的简单方法。

# sqlite - 如何重写多列 IN 子句以在 SQLite 上工作？

> ID：10525779
> 
> 赞同：21
> 
> 时间：2012-05-09T23:55:33.397
> 
> 标签：sqlite

我有一个看起来像这样的查询：

```
SELECT
  *
FROM table
WHERE
  (col1, col2) in (
    ('col1_val1', 'col2_val1'),
    ('col1_val2', 'col2_val2'),
    ('col1_val3', 'col2_val3'),
  ) 
```

这在 MySQL 中有效，但在 sqlite3 中失败并出现语法错误：

```
Error: near ",": syntax error 
```

如何将此查询重写为在 sqlite3 中有效的等效查询？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T17:04:47.667

选择您喜欢的版本：

[http://sqlfiddle.com/#!5/6169b/9](http://sqlfiddle.com/#!5/6169b/9)

## 使用临时表

```
CREATE TEMPORARY TABLE pair (a INTEGER, b INTEGER);
INSERT INTO pair (a, b) VALUES (1, 1);
INSERT INTO pair (a, b) VALUES (2, 2);
.... 
```

数据成对；如果 pair(a,b) 不是唯一的

```
SELECT *
FROM data
WHERE EXISTS (
  SELECT NULL
  FROM  pair
  WHERE pair.a = data.a
    AND pair.b = data.b
); 
```

数据成对；如果 pair(a,b) 是唯一的

```
SELECT     data.*
FROM       data
INNER JOIN pair
        ON pair.a = data.a
       AND pair.b = data.b; 
```

数据不是成对的；如果 pair(a,b) 是唯一的

```
SELECT    data.*
FROM      data
LEFT JOIN pair
   ON pair.a = data.a
  AND pair.b = data.b
WHERE pair.a IS NULL
   OR pair.b IS NULL; 
```

## 使用内联表

数据成对；如果 pair(a,b) 不是唯一的

```
SELECT *
FROM data
WHERE EXISTS (
  SELECT NULL
  FROM  (
    SELECT 1 AS a, 1 AS b
    UNION ALL
    SELECT 2 AS a, 2 AS b
    UNION ALL
    SELECT 3 AS a, 3 AS b
  ) AS pair
  WHERE pair.a = data.a
    AND pair.b = data.b
); 
```

数据成对；如果 pair(a,b) 是唯一的

```
SELECT     data.*
FROM       data
INNER JOIN (
  SELECT 1 AS a, 1 AS b
  UNION ALL
  SELECT 2 AS a, 2 AS b
  UNION ALL
  SELECT 3 AS a, 3 AS b
) AS pair
 ON  pair.a = data.a
AND  pair.b = data.b; 
```

数据不是成对的；如果 pair(a,b) 是唯一的

```
SELECT    data.*
FROM      data
LEFT JOIN (
  SELECT 1 AS a, 1 AS b
  UNION ALL
  SELECT 2 AS a, 2 AS b
  UNION ALL
  SELECT 3 AS a, 3 AS b
 ) AS pair
   ON pair.a = data.a
  AND pair.b = data.b
WHERE pair.a IS NULL
   OR pair.b IS NULL; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-19T15:07:01.433

这是一个可行的简单解决方案，但它可能在大型数据集上表现不佳，因为它不能使用您的任何索引。

```
SELECT * FROM table
WHERE col1 || '-' || col2 in (
  'col1_val1-col2_val1',
  'col1_val2-col2_val2',
  'col1_val3-col2_val3'
) 
```

[在 sqlfiddle 中试试](http://sqlfiddle.com/#!7/c768d/1)

享受！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-15T10:56:13.117

在 sqlite 中尝试添加 VALUES 关键字：

```
SELECT *
FROM table
WHERE
  (col1, col2) in ( VALUES     --> add this keyword and remove the last ,
    ('col1_val1', 'col2_val1'),
    ('col1_val2', 'col2_val2'),
    ('col1_val3', 'col2_val3')
  ) 
```

基本上在 sqLite 中执行查询：

```
VALUES
('col1_val1', 'col2_val1'),
('col1_val2', 'col2_val2'); 
```

是相同的：

```
SELECT 'col1_val1' AS column1, 'col2_val1' AS column2
UNION 
SELECT 'col1_val2' AS column1, 'col2_val2' AS column2; 
```

或结合：

```
SELECT 'col1_val1' AS column1, 'col2_val1' AS column2
UNION  VALUES  ('col1_val2', 'col2_val2'); 
```

所以你甚至可以这样写：

```
SELECT * 
  FROM table
  WHERE (col1, col2) IN ( 
      SELECT 'col1_val1', 'col2_val1'
      UNION 
      SELECT 'col1_val2', 'col2_val2'
  ); 
```

这是一个简单的子查询，适用于所有/大多数数据库。

# jquery - jQuery .live() 问题，不起作用？

> ID：10525783
> 
> 赞同：1
> 
> 时间：2012-05-09T23:56:04.207
> 
> 标签：jquery

我在我正在处理的网站中使用 .live() ，它似乎运行不正常，这是我的代码：

```
$('.comment_cheer').live("click",function(e){

    e.preventDefault();

    var id          = $(this).attr('rel');
    var url         = $(this).attr('href');
    var thisClass   = this;

    if(like2 == true){
    like2 = false;   

        setTimeout(function(){
            $.post(url,function(data){

                $(thisClass).fadeOut('slow').fadeIn();
                $(thisClass).removeClass('remove');
                $(thisClass).addClass('add');                            
                $('#boo_click_'+id).hide();

                like2 = true;
             });       
        },500);
    }

    return false;

}); 
```

我想要的是，在我发表评论后，我可以选择在 Cheer 和 Boo 之间点击，当我点击其中任何一个时，例如 Cheer，可点击的 Boo 将消失以防止用户点击它，但它不起作用我想让它工作。有人可以在这里指导我吗？

这是我在 Cheer 和 Boo 链接中使用的代码：

```
 <!--Cheer!-->
<span id="cheer_click_<?php echo $all_post['comment_id'];?>" class="add" rel="<?php echo $all_post['comment_id']?>">
    <a  href    ="<?php echo base_url().'socket/likes/'.$all_post['comment_id']?>"
        class   ="comment_cheer"
        rel     ="<?php echo $all_post['comment_id']?>"
        target  ="num_likes_<?php echo $all_post['num_likes']?>"

    ><span><i class="cheer_icon button_icons_profile_13 padr5"></i>Cheer!</span></a>
</span>
<!--Boo!-->
<span id="boo_click_<?php echo $all_post['comment_id'];?>" class="remove red" rel="<?php echo $all_post['comment_id']?>">
    <a  href    ="<?php echo base_url().'socket/unlike/'.$all_post['comment_id']?>"
        class   ="comment_boo"
        rel     ="<?php echo $all_post['comment_id']?>"
        target  ="num_boos_<?php echo $all_post['num_likes']?>"

    ><span><i class="cheer_icon button_icons_profile_14 padr5"></i>Boo!</span></a>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:19:29.017

您是否在点击处理程序之外定义了`like2`某个地方并为其赋值`true`？如果它不是 true 或未定义，`Boo`单击 时不会消失`Cheer`。检查这个[小提琴](http://jsfiddle.net/pratheepraj/tEbKw/)。我已经禁用了 ajax 帖子。

问题也可能是您的 ajax 发布失败，因此回调函数没有运行。在回调中执行控制台日志以确保调用该函数。

# c# - 浏览器面板的好处？

> ID：10525784
> 
> 赞同：1
> 
> 时间：2012-05-09T23:56:07.367
> 
> 标签：c#, winforms, winforms-to-web

我主要是一个 asp.NET MVC 开发人员，但我继承了一个 WinForms 应用程序来维护和增强。它的一个功能是一个报告窗口，它只是一个带有 BrowserPanel 控件的 WinForm，其中注入了许多尖括号和文本。该报告只是一组 HTML 表格。

我的“问题”是其中带有 BrowserPanel 的报告表单，由于是弹出表单，是模态的。我想我理解为什么最好不要尝试使其成为非模态 WinForm，但如果报告窗口可以在用户位于应用程序的其他部分时打开，那就太好了。

因此，当用户想要查看报告而不是使用此 WebForm/BrowserPanel 范例时，我是否可以将所有报告 HTML 发送到用户的浏览器，而不是在 WinForm 中使用 BrowserPanel？或者这只是一个非常糟糕的主意？如果这是一个好主意，我怎么能做这样的事情？

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:31:30.143

在没有看到应用程序工作的情况下，我不确定这是一个好主意还是坏主意 - Winform 应用程序中的 WebBrowser 控件确实具有某些优点（和缺点）。做起来很简单，试一试，看看它是否是用户想要的——即使它最终成为一个程序设置：

```
//Save the HTML to a file
string fileName = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + @"\a.html";
System.IO.StreamWriter file = new System.IO.StreamWriter(fileName);
file.WriteLine(htmlContent);
file.Close();

//Open the HTML file in the default browser
ProcessStartInfo start = new ProcessStartInfo();
start.FileName = fileName;
Process myProcess = Process.Start(start); 
```

表单属性 TopMost 将允许您拥有一个始终位于顶部的非模式窗口。

# playframework-2.0 - 从源代码构建 Play2.0 文档，以便在本地从 @documentation 路由中获得它

> ID：10525791
> 
> 赞同：0
> 
> 时间：2012-05-09T23:57:16.753
> 
> 标签：playframework-2.0

[我使用此处](http://www.playframework.org/documentation/2.0/BuildingFromSource)提供的说明安装了主版本。

但是，当我尝试运行[http://localhost:9000/@documentation](http://localhost:9000/@documentation)时，URL 不提供任何内容。

我假设，我需要构建文档，就像必须构建存储库一样，但是，我无法找到任何说明。

如果我们安装二进制/稳定版本，这不是问题。仅当从源代码构建时。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:58:08.783

你必须打电话

```
git clone git://github.com/playframework/Play20.wiki.git . 
```

`Play20/documentation/manual` 获取您必须调用的 api- docs `build doc`。doc-command 目前在 windows 下不起作用。

[自 2012 年 10 月 26 日起更新，无需额外拉动。该文档现在是主存储库的一部分。希望 doc-command 现在在 windows 下运行。我没查过。]

# php - 使用 MooTools 单击我的按钮后进行 Ajax 调用

> ID：10525792
> 
> 赞同：0
> 
> 时间：2012-05-09T23:57:20.953
> 
> 标签：php, javascript, ajax, mootools

单击按钮后，我想进行 ajax 调用。我有超过 14 个按钮，它们发出 ajax 请求以从我的网站的其他部分捕获元素。

```
Button, Button1, Button2, Button3
|               |
| load content  |
|               |
|_______________| 
```

为此，我在 MooTools 中使用了这个命令：

```
window.addEvent('load', function(){     
    new Request.HTML({      
        'url': '<?php echo $this->baseUrl() ?>/pageitems/1/news/?format=smoothbox',
        'onComplete': function(answer) {
            answer[1].getElements('.CatchClassId')[0].inject($('spendPointsContPages1').empty(),
'bottom');      
        }   
    }).send(); 
}); 
```

并加载**DIV**

```
<div id="spendPointsContPages1"><img src="<?php echo $this->baseUrl() ?>/application/modules/Socialengineaddon/externals/images/loading.gif"/></div> 
```

这是进行ajax调用。我喜欢点击我的一些选项卡，然后进行 ajax 调用。所以，就目前而言，当我尝试加载我的页面时，所有这些内容都会在后台自动加载，我不喜欢它。

单击以加载内容时，我希望每个单独的选项卡。通过这种方式，我保持网站的速度。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:28:30.570

你可以做几件事来改进这里的东西：

1.  `localStorage`如果内容足够稳定（不动态更改），则使用或简单的闭包（如果不支持）来缓存基于选项卡 ID 的键中的选项卡上的响应。
2.  添加悬停意图 - 基本上，在鼠标悬停时启动 ajax 请求并将响应存储在存储中，然后如果用户实际单击，则仅显示来自缓存的就绪响应。

如果您在编写一个可以进行缓存并扩展您的请求类的类方面需要帮助，那么我可以向您指出我在这方面所做的一些工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:32:34.603

您应该向每个单独的按钮添加事件，而不是在开始时加载所有内容（这不比服务器端加载快）。

**HTML**

```
<div id="menuBar">
    <button class="menuItem" data-page="home">Home</button>
    <button class="menuItem" data-page="about">About Me</button>
</div> 
```

**Javascript**

```
document.id('menubar').addEvent('click:relay(button.menuItem)', function() {
    var requestedPage = this.getProperty('data-page');
    loadPage(requestedPage);    // Where loadPage is defined somewhere else
}); 
```

# jquery - jQueryUI 可排序 + HTML5 文件 API 示例？

> ID：10525795
> 
> 赞同：4
> 
> 时间：2012-05-09T23:57:29.263
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable, fileapi

有谁知道任何将 jQueryUI:Sortable:display-grid 与 HTML5 File API 结合以显示将多个本地图像同时放入浏览器的好示例，然​​后所有这些图像都显示在显示网格中？

参考： http:
[//jqueryui.com/demos/sortable/#display-grid](http://jqueryui.com/demos/sortable/#display-grid)
[http://html5demos.com/file-api](http://html5demos.com/file-api)
[当用户使用 HTML5 文件 API 按下按钮时，如何读取本地文件？](https://stackoverflow.com/questions/9979464/jquery-reading-files-locally-with-file-api)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:33:00.697

为图像创建一个占位符：

```
<ul id="sortable"></ul> 
```

将 sortable 绑定到占位符：

```
$( "#sortable" ).sortable();
$( "#sortable" ).disableSelection(); 
```

将 ondrop 函数绑定到占位符：

```
$('#sortable').on(
    'drop',
    function(e){
        if(e.originalEvent.dataTransfer){
            if(e.originalEvent.dataTransfer.files.length) {
                e.preventDefault();
                e.stopPropagation();
                upload(e.originalEvent.dataTransfer.files);
            }   
        }
    }
); 
```

最后但同样重要的是，编写 File API 部分：

```
function upload(files){
    for (var i = 0, f; f = files[i]; i++) {
        var imageReader = new FileReader();
        imageReader.onload = (function(aFile) {
            return function(e) {
                var li = document.createElement('li');
                li.innerHTML = ['<img class="images" src="', e.target.result,'" title="', aFile.name, '"/>'].join('');
                $('#sortable').append(li);
         };
    })(f);
    imageReader.readAsDataURL(f);
} 
```

在以下位置查看完整代码：http: [//jsfiddle.net/xKYxL/2/](http://jsfiddle.net/xKYxL/2/)

致谢： [https ://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_of_file_api_drag_drop_hard_drive_files_to_a_webpage28?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_of_file_api_drag_drop_hard_drive_files_to_a_webpage28?lang=en)

# python - SQLAlchemy：具有复合主键的关系表

> ID：10525797
> 
> 赞同：16
> 
> 时间：2012-05-09T23:57:55.477
> 
> 标签：python, orm, sqlalchemy, foreign-key-relationship

我有一组看起来像的表：

```
workflows = Table('workflows', Base.metadata,
                  Column('id', Integer, primary_key=True),
                 )

actions = Table('actions', Base.metadata,
                Column('name', String, primary_key=True),
                Column('workflow_id', Integer, ForeignKey(workflows.c.id), primary_key=True),
               )

action_dependencies = Table('action_dependencies', Base.metadata,
                            Column('workflow_id', Integer, ForeignKey(workflows.c.id), primary_key=True),
                            Column('parent_action', String, ForeignKey(actions.c.name), primary_key=True),
                            Column('child_action', String, ForeignKey(actions.c.name), primary_key=True),
                           ) 
```

我的 ORM 类看起来像：

```
class Workflow(Base):
    __table__ = workflows

    actions = relationship("Action", order_by="Action.name", backref="workflow")

class Action(Base):
    __table__ = actions

    children = relationship("Action",
                            secondary=action_dependencies,
                            primaryjoin=actions.c.name == action_dependencies.c.parent_action,
                            secondaryjoin=actions.c.name == action_dependencies.c.child_action,
                            backref="parents"
                           ) 
```

因此，在我的系统中，每个操作都由工作流 ID 及其名称的组合唯一标识。我希望每个操作都具有引用其父操作和子操作的属性`parents`。`children`每个动作可以有多个父母和孩子。

当我具有以下功能时会出现问题：

```
def set_parents(session, workflow_id, action_name, parents):
    action = session.query(db.Action).filter(db.Action.workflow_id == workflow.id).filter(db.Action.name == action_name).one()

    for parent_name in parents:
        parent = session.query(db.Action).filter(db.Action.workflow_id == workflow.id).filter(db.Action.name == parent_name).one()
        action.parents.append(parent)

    session.commit() 
```

我收到如下错误：

```
IntegrityError: (IntegrityError) action_dependencies.workflow_id may not be NULL u'INSERT INTO action_dependencies (parent_action, child_action) VALUES (?, ?)' (u'directory_creator', u'packing') 
```

如何获得正确设置 workflow_id 的关系？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T11:54:53.063

请参阅下面的工作代码。关键点是我在评论中提到的：

*   `ForeignKey`适当的复合
*   使用 FK 进行正确`relationship`配置

代码：

```
workflows = Table('workflows', Base.metadata,
                  Column('id', Integer, primary_key=True),
                 )

actions = Table('actions', Base.metadata,
                Column('workflow_id', Integer, ForeignKey(workflows.c.id), primary_key=True),
                Column('name', String, primary_key=True),
               )

action_dependencies = Table('action_dependencies', Base.metadata,
                            Column('workflow_id', Integer, ForeignKey(workflows.c.id), primary_key=True),
                            Column('parent_action', String, ForeignKey(actions.c.name), primary_key=True),
                            Column('child_action', String, ForeignKey(actions.c.name), primary_key=True),
                            ForeignKeyConstraint(['workflow_id', 'parent_action'], ['actions.workflow_id', 'actions.name']),
                            ForeignKeyConstraint(['workflow_id', 'child_action'], ['actions.workflow_id', 'actions.name']),
                           )
class Workflow(Base):
    __table__ = workflows
    actions = relationship("Action", order_by="Action.name", backref="workflow")

class Action(Base):
    __table__ = actions
    children = relationship("Action",
                            secondary=action_dependencies,
                            primaryjoin=and_(actions.c.name == action_dependencies.c.parent_action,
                                actions.c.workflow_id == action_dependencies.c.workflow_id),
                            secondaryjoin=and_(actions.c.name == action_dependencies.c.child_action,
                                actions.c.workflow_id == action_dependencies.c.workflow_id),
                            backref="parents"
                           )

# create db schema
Base.metadata.create_all(engine)

# create entities
w_1 = Workflow()
w_2 = Workflow()
a_11 = Action(name="ac-11", workflow=w_1)
a_12 = Action(name="ac-12", workflow=w_1)
a_21 = Action(name="ac-21", workflow=w_2)
a_22 = Action(name="ac-22", workflow=w_2)
session.add(w_1)
session.add(w_2)
a_22.parents.append(a_21)
session.commit()
session.expunge_all()
print '-'*80

# helper functions
def get_workflow(id):
    return session.query(Workflow).get(id)
def get_action(name):
    return session.query(Action).filter_by(name=name).one()

# test another OK
a_11 = get_action("ac-11")
a_12 = get_action("ac-12")
a_11.children.append(a_12)
session.commit()
session.expunge_all()
print '-'*80

# test KO (THIS SHOULD FAIL VIOLATING FK-constraint)
a_11 = get_action("ac-11")
a_22 = get_action("ac-22")
a_11.children.append(a_22)
session.commit()
session.expunge_all()
print '-'*80 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:43:22.360

我认为将主键作为外键是不正确的。这是如何运作的？

但是要制作复合约束，一个“一起唯一”的键，在表定义中使用它：

```
UniqueConstraint(u"name", u"workflow_id"), 
```

但是如果你真的希望它成为主键，你也可以使用这个：

```
PrimaryKeyConstraint(*columns, **kw) 
```

[http://docs.sqlalchemy.org/en/latest/core/schema.html#sqlalchemy.schema.PrimaryKeyConstraint](http://docs.sqlalchemy.org/en/latest/core/schema.html#sqlalchemy.schema.PrimaryKeyConstraint)

# spring - sessionFactory 的注入不起作用

> ID：10525800
> 
> 赞同：0
> 
> 时间：2012-05-09T23:58:40.383
> 
> 标签：spring, hibernate, dependency-injection, sessionfactory

我是 Spring 新手，我想注入 sessionFactory 并且它根本不起作用。我正在启动一个 Web 服务器 Jetty，然后加载上下文。在我启动 GWT Web 应用程序后，我在服务器端进行调用并尝试获取一些信息，但我得到一个空指针。根本没有错误，因此很难知道问题出在哪里。我知道它应该可以工作，因为我看到它在我之前工作过的一个项目上工作。任何帮助将不胜感激。（对不起我可能英语不好）

这是 context.xml ：

```
 <?xml version="1.0" encoding="UTF-8" ?>

 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:security="http://www.springframework.org/schema/security"
   xsi:schemaLocation="http://www.springframework.org/schema/beans       
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema
    /context/spring-context-3.0.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema
    /tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema
    /aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/security http://www.springframework.org/schema
    /security/spring-security-3.0.xsd">

   <!--  Standard spring initialization -->
   <context:component-scan base-package="com.test">

   </context:component-scan>

   <tx:annotation-driven transaction-manager="txManager"/>

   <!-- Connection to the database-->
   <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-
    method="close">

   <property name="driverClassName" value="com.mysql.jdbc.Driver" />
   <property name="url" value="jdbc:mysql://localhost:3306/test" />
   <property name="username" value="root" />
   <property name="password" value="123456789" />
   </bean>

   <!-- Hibernate session factory-->
   <bean id="jpaSessionFactory"   
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan" value="com.domain"/>
  <property name="namingStrategy" >
    <bean class="org.hibernate.cfg.ImprovedNamingStrategy" />
  </property>
  <property name="hibernateProperties">
    <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
        <prop key="show_sql">true</prop>
        <prop key="hibernate.hbm2ddl.auto">update</prop>
    </props>
  </property>
   </bean>

   <!-- Hibernate session factory -->   
   <bean id="txManager"    
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
  <property name="sessionFactory" ref="jpaSessionFactory" />
   </bean>

 </beans> 
```

这是主要的：

```
 public static void main(String[] args) {

        ContextHandlerCollection contexts = new ContextHandlerCollection();

        contexts.setHandlers(new Handler[] 
        { new AppContextBuilder().buildWebAppContext()});

        final JettyServer jettyServer = new JettyServer();
        jettyServer.setHandler(contexts);
        Runnable runner = new Runnable() {
            @Override
            public void run() {
                new ServerRunner(jettyServer);
            }
        };
        EventQueue.invokeLater(runner);

        new ClassPathXmlApplicationContext("context.xml");
    } 
```

这是我想要注入的类 Test ：

```
@Component("test")
public class TEST{

    @Resource(name="jpaSessionFactory")
    private SessionFactory sessionFactory;

    @SuppressWarnings("unchecked")
    @Transactional(readOnly = true)
    public  List<Personne> getPersonnes() {

        Session s = sessionFactory.getCurrentSession();

        Query query = s.createQuery("from Person");

        return query.list();
    }
} 
```

这是应用程序的服务器端（未完全显示）

```
/*** The server side implementation of the RPC service.
 */
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements
    GreetingService {

@Resource
private TEST t;

public String greetServer(String input) throws IllegalArgumentException {
    // Verify that the input is valid. 
    if (!FieldVerifier.isValidName(input)) {
        // If the input is not valid, throw an IllegalArgumentException 
                        back to
        // the client.
        throw new IllegalArgumentException(
                "Name must be at least 4 characters long");
    }

    t.getPersons();  // NULL pointer here 
```

…………………………………………………………………………………………………………

MySQL 表是按应有的方式创建的，因此所有扫描似乎都有效。

谢谢

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:31:36.223

这是因为 GreetingServiceImpl 类不是由 spring 创建的——它是由容器直接初始化的 servlet。请按照[本文](http://mitosome.blogspot.in/2011/01/injecting-spring-beans-into-gwt.html)中的说明解决此问题。我已经从文章中复制了相关代码。

```
@Override
public void init() throws ServletException {
    super.init();

    final WebApplicationContext ctx =
        WebApplicationContextUtils.getWebApplicationContext(getServletContext());

    if (ctx == null) {
        throw new IllegalStateException("No Spring web application context found");
    }

    ctx.getAutowireCapableBeanFactory().autowireBeanProperties(this,
        AutowireCapableBeanFactory.AUTOWIRE_BY_TYPE, true);
} 
```

# sql-server - PK 值之间的 SQL Server 查询最佳？

> ID：10525804
> 
> 赞同：0
> 
> 时间：2012-05-09T23:59:32.233
> 
> 标签：sql-server, indexing, primary-key

使用 SQL Server 2012 Express。我有一个代表键/值对的表。keycol 是表的 PK。当查询参数在表中的两个 keycol 值之间时，我试图找到查询表以查找 valcol 的最佳方法。因此，如果我正在寻找 keycol=15，我想找到'a'，如果 keycol=20，我想找到'b'，如果 keycol=36，我想找到'c'。

```
;
with tblextr ( keycol , valcol )
As
(
   Select 10 , 'a'
   Union All
   Select 19 , 'a'
   Union All
   Select 20 , 'b'
   Union All
   Select 29 , 'b'
   Union All
   Select 30 , 'c'
   Union All
   Select 39 , 'c'
)
select valcol from tblextr 
where keycol = (
   select max(keycol)
   from tblextr
   where keycol <= 36
) 
```

由于 keycol 已经是 PK 了，有没有办法比我更好地编写 SQL？我应该把另一个索引放在桌子上吗？如果速度提高，我不介意使用更多空间。这是一个查找表，因此仅每月添加行，作为重新创建完整表的刷新的一部分。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:35:05.680

我认为应该是：

```
...
SELECT a.valcol 
FROM 
    ( SELECT TOP(1) valcol  
      FROM tblextr
      WHERE keycol <= 36
      ORDER BY keycol DESC
    ) AS a
  JOIN
    ( SELECT TOP(1) valcol  
      FROM tblextr
      WHERE keycol >= 36
      ORDER BY keycol ASC
    ) AS b
    ON b.valcol = a.valcol 
```

如果您在主键 ( `keycol`) 上已经有一个聚集索引，我认为您不需要任何 otehr 索引来进行此查询。

# protobuf-net - 在 Silverlight 应用程序中使用 protobuf-net

> ID：10525805
> 
> 赞同：1
> 
> 时间：2012-05-09T23:59:37.043
> 
> 标签：protobuf-net, silverlight-5.0

我已经在控制台和 WPF 应用程序中成功使用了 protobuf-net.dll。但是，当我尝试在 Silverlight 5 应用程序中使用它时，我收到错误消息：

“您不能添加对 protobuf-net.dll 的引用，因为它不是针对 Silverlight 运行时构建的。Silverlight 项目仅适用于 Silverlight 程序集。”

在 protobuf-net 站点 (http://code.google.com/p/protobuf-net/)，我看到了对 Silverlight 兼容性问题的引用，但找不到 Silverlight dll。如何在 Silverlight 5 应用程序中使用 protobuf-net？

谢谢马尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:22:58.817

Nuget 包包含特定于 Silverlight 的构建；如果您通过 Nuget 包管理器添加引用，它应该会自动正确设置。

如果您从 google-code 下载包，只需展开 .zip（当前为 r480）；它包含一个“sl4”目录，其中包含为 Silverlight 4（及更高版本）构建的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:20:35.580

在源分发中有一个项目文件

.\protobuf-net_Silverlight\protobuf-net_Silverlight.csproj

包含在分发中。我个人没有使用过silverlight的东西，但它可能会让你到达你需要的地方。

# javascript - 如何通过 JS 获取嵌入的 SVG 文档的文本？

> ID：10525809
> 
> 赞同：1
> 
> 时间：2012-05-09T23:59:50.383
> 
> 标签：javascript, svg

我认为这真的很容易......我想要的是相当于`innerHTML`, 但对于 SVG。（jQuery 窒息`$("svg").html()`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:03:55.240

我似乎记得 SVG 文件只不过是 XML。如果是这样的话，这样的事情可能会奏效：

```
$.ajax({
    type: "GET",
    url: "your/svg/file.svg",
    dataType: "xml",
    success: function(svg) {
        var mySvgText = $(this).find("svg").text();
        // do something with svg text
    }
});​ 
```

这是在黑暗中拍摄的，所以如果我错了，请有人纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:57:06.713

您可以使用[innerSVG](http://code.google.com/p/innersvg/) shim 来获得此功能，它是使用 XMLSerializer 和 DOMParser 实现的。在所有当前支持 svg 的浏览器中都能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:09:00.790

我最终使用的解决方案：

```
var svg = $("svg:first").clone();
svg = $('<div />').append(svg);
svg = svg.html(); 
```

# asp.net - 为什么 detailsview 控件在网页上不显示换行符？

> ID：10525817
> 
> 赞同：0
> 
> 时间：2012-05-10T00:01:13.503
> 
> 标签：asp.net, sql-server, detailsview

在 SQL Server 2008 R2 中，我有一个表，其中的列包含 nvarchar(max) 数据。当我从该列打印一条记录的值时，它显示如下。 ![在此处输入图像描述](../Images/eeaf548c8e0444d4390c3264142d1206.png)

使用VS2010，我开发了带有DetailsView的ASP.net web表单，上面的记录如下图所示。在 DetailsView 上显示时，换行符和换行符会丢失！问题是如何查看新行？

![在此处输入图像描述](../Images/ace38fead6d352360186bc90f3c72550.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:19:46.083

您需要将**`\n`**数据字段中的换行符替换为 HTML 换行符，**`<br />`**以在网页上正确显示文本。

*   您可以在将数据返回到表示层之前替换数据库查询或存储过程中的字符。

*   您可以在将数据绑定到表示层中的控件时替换字符。

*   如果您希望数据正确对齐，您可能还想使用固定宽度的字体。

以下链接可能会帮助您。

[**如何在 detailsview BoundField 数据控件中做 Replace("\n", "<br />")**](http://forums.asp.net/t/958035.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:50:14.727

使用 pre (preserve) 解决

pre style="text-overflow: 可见；white-space: pre-wrap![在此处输入图像描述](../Images/357565948dbb0a25bd854146b92c619e.png)

# python - 读取 CSV 单元格；写入字典/数组

> ID：10525818
> 
> 赞同：0
> 
> 时间：2012-05-10T00:01:20.860
> 
> 标签：python, arrays, csv, dictionary

我正在尝试创建一个 python 脚本来读取 CSV 文件，例如，每次出现字母“a”或整数 1 出现时计数。

目前，我已经修改了代码以将列表设置为从 csv 文件读取的一行数据，并且我正在尝试创建一个循环，该循环将通过数组或字典跟踪该数据。

```
# -*- coding: cp1252 -*-

import os

os.chdir('F:\Muiltimedia Tools\Projects\KippurCat Arts™\Python\Input')

'Initialize variables'
checklet = 'x';count = 0;index = 0

"Import Excel Data"
import csv
with open('test.csv', 'rb') as f:
    reader = csv.reader(f, delimiter=':', quoting=csv.QUOTE_NONE)
    for row in reader:
        print row
        alist = row

print alist.count(1)

print count 
```

此外，我正在寻找一种将 00:00:00 格式的时间数据转换为秒的简单方法。

请记住，我对 python 很陌生，但我之前有一些其他基本语言的编码经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:42:23.867

```
import csv
from collections import Counter

def strToSeconds(st):
    h,m,s = st.split(':')
    return 3600*int(h) + 60*int(m) + int(s)

def main():
    fname = "F:/Multimedia Tools/Projects/KippurCat Arts™/Python/Input/test.csv"

    # read data
    c = Counter()
    with open(fname, 'rb') as f:
        reader =  csv.reader(fname, delimiter=':', quoting=csv.QUOTE_NONE)
        for row in reader:
            c.update(row)

    # show results of interest
    for val in ('a', 1):
        print("Number of {}s: {}".format(val, c[val]))

if __name__=="__main__":
    main() 
```

# jquery - 当点击«openElem»的孩子时，jquery脚本没有关闭«openedElem»？

> ID：10525820
> 
> 赞同：0
> 
> 时间：2012-05-10T00:01:43.470
> 
> 标签：jquery

当单击 «openedElem» 的子项时，我试图让这个 jquery 脚本不关闭 «openedElem»？我的目标是将 ajax 表单插入其中一个滑动面板。有什么建议么？

```
<code>
$(function(){
    var openedElem = null;
    $("a.click").click(function(){
        var nextElem = $(this).next();

        if (openedElem !== null) {
            if (openedElem.attr("id") === nextElem.attr("id")) {
                return false;
            }
            openedElem.slideUp();
        }

        openedElem = nextElem.slideDown();
    });
});
</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:06:53.483

如果元素的子`<a>`元素导致事件处理程序触发，请停止在这些子元素上冒泡。

随着所有 HTML 的发布，这将是一个疯狂的猜测，但也许这会起作用：

```
$("a.click").children().on('click', function(e) { e.stopPropagation(); }); 
```

# delphi - Delphi XE2，如何在更改 VCL 样式后保持表单在顶部

> ID：10525823
> 
> 赞同：7
> 
> 时间：2012-05-10T00:02:20.640
> 
> 标签：delphi, delphi-xe2, vcl-styles

我在 XE2 中遇到了一个奇怪的问题：

我正在使用 HWND_TOPMOST 和 SetWindowPos 将我的表单设置在顶部，但是如果我在运行时切换 VCL 样式，则窗口不再是最顶部的，并且取消设置/重新设置它也不能修复它。

有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T00:35:23.183

您的问题是，由于样式更改并失去了最重要的样式，因此表单正在重新创建，因为 VCL 对此一无所知。要么使用：

```
FormStyle := fsStayOnTop; 
```

或覆盖`CreateWindowHandle`，以便在`SetWindowPos`每次重新创建表单时调用：

```
type
  TForm1 = class(TForm)
    ..
  protected
    procedure CreateWindowHandle(const Params: TCreateParams); override;
  ..

procedure TForm1.CreateWindowHandle(const Params: TCreateParams);
begin
  inherited;
  SetWindowPos(Handle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOSIZE or SWP_NOMOVE);
end; 
```

顺便说一句，我无法复制*“取消设置/重新设置不能修复它”*。通过我的测试，再次调用`SetWindowPos`修复它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T00:50:44.820

在控件上设置新样式会导致重新创建控件的窗口句柄，因此`HWND_TOPMOST`必须再次重新应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T11:55:03.363

在互联网上长时间搜索并在Delphi帮助中没有解决方案后，我尝试了几个不同的代码，几个提示，所有这些都没有任何效果，问题仍然存在。看着帮助，我决定测试下面对我来说非常有效的简单代码。

```
procedure TForm1.FormShow(Sender: TObject);
begin
  Application.RestoreTopMosts;
end; 
```

# html - div 的背景 url

> ID：10525828
> 
> 赞同：0
> 
> 时间：2012-05-10T00:03:20.467
> 
> 标签：html, css

使用这些样式和此 html，背景 url 中指定的图像不会显示。可能是什么问题呢？网址是正确的。

```
<style>
    .copy_tool {
    width: 17px;
    height: 15px;
    float: left;
    margin-top: 3px;
    margin-left: 2px;
    background: url("/images/copy_tool.png") no-repeat;
    cursor: pointer;
    background-color: lightgrey;
    }

    .print_tool {
    width: 17px;
    height: 15px;
    float: left;
    margin-top: 3px;
    margin-left: 2px;
    background: url("/images/print_tool.png") no-repeat;
    cursor: pointer;
    background-color: lightgrey;
    }

</style>

<div class="toolbox">
    <div id="copy_readfe" class="copy_tool" title="Copy"></div>&nbsp;&nbsp; 
    <div id="print_readfe" class="print_tool" title="Print" onclick="print_element('div_readfe');"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:17:31.500

[正如这个 jsfiddle 所](http://jsfiddle.net/mikeymagic/aWMjS/)证明的那样，css 和 html 是正确的。由于某种内部问题，您的路径很可能已损坏或您的图像未显示。

但是，您的标记可以像[本示例](http://jsfiddle.net/mikeymagic/aWMjS/1/)中那样做得更好（删除多余的 css），或者在[本示例](http://jsfiddle.net/mikeymagic/aWMjS/2/)中做得更好（转换为 ul li 设置）。

**参考**

*   [背景图片](http://www.w3schools.com/cssref/pr_background-image.asp)

# php - 如何确定 vimeo URL 是否为视频？PHP

> ID：10525829
> 
> 赞同：1
> 
> 时间：2012-05-10T00:03:21.390
> 
> 标签：php, regex, url, preg-match, vimeo

所以我一直在使用这个简单的方法来确定一个 URL 是否来自 vimeo

```
if (preg_match("/vimeo/",$url)) {
$getvim = (parse_url($url));
$vimid = str_replace("/", "", $getvim['path']);
} 
```

正如您所看到的，这只是确定 url 是否包含“vimeo”，然后通过抓取斜线后的所有内容来抓取视频 ID。如果您实际上是在链接 vimeo 视频，则效果很好，但是如果链接仅包含“vimeo”而不是实际上是 vimeo 链接，则会完全搞砸一切。

有没有人有更好的方法来做到这一点？有大量可用的 YouTube 解决方案，但几乎不可能找到一个好的 vimeo 解决方案。对此的任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:06:15.887

试试这个代码：

```
$urls = parse_url($url);
if ($urls['host'] == 'vimeo.com'){
    $vimid = ltrim($urls['path'], '/');
    if (is_numeric($vimid)) {
        // do something with $vimid
    }
} 
```

我们假设所有视频 ID 都是数字的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:11:03.203

通过读取页面的源代码，`file_get_contents($url)`然后检查它是否包含字符串`<meta property="og:video" content="http://vimeo.com/moogaloop.swf?clip_id=".$vimid." />` 如果如果包含该字符串，那么您就知道它是一个有效的视频。

# python - 自动缩放 matplotlib 轴以为图例腾出空间

> ID：10525831
> 
> 赞同：1
> 
> 时间：2012-05-10T00:03:50.850
> 
> 标签：python, matplotlib

我正在使用 matplotlib 绘制航天器轨道的 2D 视图。在这个轨道上，我识别并标记某些事件，然后在图例中列出这些事件和相应的日期。在将图形保存到文件之前，我会自动缩放我的轨道图，这会导致图例直接打印在我的图顶部。我想做的是，在自动缩放之后，以某种方式找出我的图例的宽度，然后扩展我的 xaxis 以为图右侧的图例“腾出空间”。从概念上讲，是这样的；

```
# ... code that generates my plot up here, then:
ax.autoscale_view()
leg = ax.get_legend()
leg_width = # Somehow get the width of legend in units that I can use to modify my axes
xlims = ax.get_xlim()
ax.set_xlim( [xlims[0], xlims[1] + leg_width] )
fig.savefig('myplot.ps',format='ps') 
```

我遇到的主要问题是`ax.set_xlim()`采用“数据”特定值，而`leg.get_window_extent`在窗口像素中报告（我认为），甚至只有在画布绘制之后，所以我不确定如何获得图例“宽度”，我可以使用类似于上面的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:37:41.990

您可以将图形保存一次以获得真正的图例位置，然后使用 transData.inverted() 将屏幕坐标转换为数据坐标。

```
import pylab as pl
ax = pl.subplot(111)
pl.plot(pl.randn(1000), pl.randn(1000), label="ok")
leg = pl.legend()

pl.savefig("test.png") # save once to get the legend location

x,y,w,h = leg.get_window_extent().bounds

# transform from screen coordinate to screen coordinate
tmp1, tmp2 = ax.transData.inverted().transform([0, w])
print abs(tmp1-tmp2) # this is the with of legend in data coordinate

pl.savefig("test.png") 
```

# .htaccess - 缺少部分 URL 时的 301 重定向

> ID：10525835
> 
> 赞同：0
> 
> 时间：2012-05-10T00:04:12.673
> 
> 标签：.htaccess, url-rewriting, indexing

有人可以帮我制定一条我不能上班的规则！

一种普通的 URL 如下所示：

www.domain.com/a/Inner_music/id/22064

www.domain.com/a/Vowel_length/id/1969733

www.domain.com/a/The_Mind/id/221078

出于某种原因，Google 选择了以下 URL：

www.domain.com/a/Inner_music

www.domain.com/a/Vowel_length

www.domain.com/a/The_Mind

我想重定向 URL 中的后者 1) 具有 /a/ 2) 但缺少最后两部分；/id/999999 到首页/。

请注意，不应影响以下网址：

www.domain.com/inner_music

www.domain.com/vowel_length

我尝试过的规则是重定向两种类型或错误的一种：

```
#RedirectMatch 301 ^/a/(.*) /
#RedirectMatch 301 ^/a/(.*)$ /
#RedirectMatch 301 ^/a/(.*)/$ /
#RedirectMatch 301 ^/a/(.*)/ / 
```

我也尝试过这个，但它也会影响“好”页面：

```
#RewriteCond %{REQUEST_URI} ^/a/.+$
#RewriteRule !^/a/id/.+$ /b/ [R=404,L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:14:18.543

你可以试试：

```
#RedirectMatch 301 ^/a/[^/]*$ / 
```

# coldfusion - Coldfusion：将数据从一个数据源移动到另一个数据源

> ID：10525836
> 
> 赞同：0
> 
> 时间：2012-05-10T00:04:19.173
> 
> 标签：coldfusion, datasource, cfquery

我需要将一系列表从一个数据源移动到另一个数据源。我们的托管公司不会在数据库之间提供共享密码，所以我无法编写 SQL 脚本来处理它。

最好的选择就是编写一个处理它的小冷融合脚本。

通常我会这样做：SELECT * INTO database.table FROM database.table

唯一的问题是 cfquery 不允许您在同一个查询中使用两个数据源。

我认为我也不能使用 QoQ，因为您不能告诉它使用第二个数据源，而是要有一个 dbType 为“Query”。

谁能想到任何聪明的方法来完成这件事？或者是唯一的选择只是循环第一个查询中的每一行，将它们单独添加到第二个？

我的问题是它需要更长的时间。我们有很多桌子要搬。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:19:32.777

好的，所以您在数据库之间没有共享密码，但您似乎确实拥有每个单独数据库的密码（因为您设置了数据源）。那么，您可以创建从数据库 1 到数据库 2的**链接服务器定义吗？**用户凭据可以保存在链接服务器上，因此它们不必与源数据库相同。设置完成后，您绝对可以在两个数据库之间移动数据。

我们一直使用它来将实时数据库中的数据同步到我们的测试环境中。如果这对您有用，我可以提供更具体的 SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:44:08.223

您可以访问两个数据库，但不能在同一个查询中访问两个数据源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T02:42:38.510

几年前我为这类事情写了一个叫做“DataSynch”的东西。

[http://www.bryantwebconsulting.com/blog/index.cfm/2006/9/20/database_synchronization](http://www.bryantwebconsulting.com/blog/index.cfm/2006/9/20/database_synchronization)

你需要的一切都包含在我的免费“com.sebtools”包中： [http ://sebtools.riaforge.org/](http://sebtools.riaforge.org/)

我已经有几年没有真正使用过它了，但我想不出它为什么仍然不起作用的任何原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:41:23.420

亨利 - 为什么要这样做？为什么不使用“导入数据”功能仅使用 SQL 管理器移动选定的表？（右键单击您的分贝并选择“导入” - 然后使用本机客户端和“其他”数据库的权限来指定表。您的 SQL 管理器将需要访问两个数据库，但数据库服务器本身不需要相互访问。您的经理工作室将充当管道。

# javascript - 将 bmp/gif/png/etc 转换为 jpg 的公共服务？

> ID：10525837
> 
> 赞同：4
> 
> 时间：2012-05-10T00:04:21.583
> 
> 标签：javascript, web-services, api, image-conversion

是否有任何公共服务可用于将任何常见图像格式（gif、png、bmp、tga 等）转换为 jpg？我正在寻找可以在javascript中使用的东西，将图像发送到任何地方，然后取回我可以使用的jpg。

我不是在找手册，我可以去[http://foo.bar.com](http://foo.bar.com)，手动上传图片，然后手动保存返回的 jpg。我正在寻找可以远程用作实际 Web 服务的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:07:20.850

您可以查看[api.online-convert.com](http://api.online-convert.com/) - 它是免费的，但您必须在您网站的某处放置指向他们服务的反向链接。

希望这可以帮助！

# iphone - 将 UINavigationBar 的通用代码放在 UINavigationController 中

> ID：10525841
> 
> 赞同：0
> 
> 时间：2012-05-10T00:04:57.430
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar

在我的 iPhone 项目中，我有一个导航视图控制器。在此控制器加载的每个视图中，我在 UINavigationBar 中设置按钮，这些按钮为每个视图执行不同的操作。

但是，我希望 .rightBarButtonItem 每次都做完全相同的事情（即弹出一个 UIActionSheet）。我怎样才能集中这些代码而不必把它放在每个视图控制器中？

我尝试子类化 UINavigationController 并在这个子类的 viewDidLoad 中设置 .rightBarButtonItem。但是，此时不显示任何按钮。（但是当我将相同的代码放在导航控制器加载的视图控制器中时，按钮会显示并且工作正常）。

我用来设置 rightBarButtonItem 的代码是：

```
self.navigationItem.rightBarButtonItem = ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:08:12.647

将推送到该 UINavigationController 上的所有 UIViewController 子类化并添加相同的 viewDidLoad 代码。

# access-violation - 内存访问冲突VC++

> ID：10525852
> 
> 赞同：0
> 
> 时间：2012-05-10T00:06:47.587
> 
> 标签：access-violation, memory-access

我遇到了内存访问冲突，我无法弄清楚。我猜我的语法在某处可能是错误的。这是我的代码

```
load(double **pDouble)
 {
   int size;

   //pStruct is returned by a method of some object inside load
   // arr is an array of double, also member of struct pointed by pStruct.
   size = sizeof(pStruct->arr)/sizeof(double);
   *pDouble =  new double[size];
   for(int i = 0 ; i < size; i++)
   {
     *pDouble[i] = pStruct->arr[i];
       //the violation occurs for the second iteration of 
      // the loop
   }
 } 
```

什么可能导致访问冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:10:14.387

数组索引比指针解引用绑定得更紧密。你可能的意思是：

```
(*pDouble)[i] = pStruct->arr[i]; 
```

不过可能还有其他错误。

# javascript - .animate 具有多个动画的队列

> ID：10525855
> 
> 赞同：1
> 
> 时间：2012-05-10T00:07:14.377
> 
> 标签：javascript, jquery, jquery-animate

我正在尝试使 div 从屏幕底部移动到顶部，从不透明度 0 开始，中间有不透明度 1，然后在顶部再次淡入 0。一切都必须从 3 秒延迟开始。

```
 $("#circle")
                .css({'display':'block'})
                .css({'opacity': '0'})
                .css({'top':$(window).height()})
                .delay(3000)
                .animate({'opacity':1},{duration:1000},"linear")
                .animate({'top':$(window).height()/2},{duration:1000, queue:false},"linear")                
                .animate({'opacity':0},{duration:1000},"linear")
                .animate({'top':0},{duration:1000, queue:false},"linear") 
```

我也尝试使用 'queue:false' 但它仍然无法正常运行，而且这也不是线性的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:21:31.630

您应该更好地使用对象表示法，例如：

```
 $("#circle")
                .css({
                      'display':'block',
                      'opacity': '0',
                      'top':$(window).height()
}
)
                .delay(3000)
                .animate({ 
                           'opacity':1 , 
                           'top':$(window).height()/2
                         },
                         {duration:1000},"linear")
                .delay(1000)
                .animate({
                          'opacity':0,
                          'top':0
                         },
                         {duration:1000},"linear"); 
```

您可以尝试这个或尝试使用`$(this)`选择器在多行之间设置延迟。

祝你好运，拥有一个 jsfiddle 链接总是有帮助的。

# objective-c - NSNotification 问题

> ID：10525858
> 
> 赞同：4
> 
> 时间：2012-05-10T00:07:44.370
> 
> 标签：objective-c, nsnotification

当我的类初始化时，它会将自己添加为一堆不同 Wi-Fi 通知的观察者。出于某种原因，当这些事情发生时，选择器没有运行。有任何想法吗？提前谢谢你。

```
-(id) init
{
    if (self)
    {
        sself = self;
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWModeDidChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWSSIDDidChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWBSSIDDidChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWCountryCodeDidChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWLinkDidChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWPowerDidChangeNotification object:nil]; 
```

更新：这是 handleNotification 方法：

```
-(void) handleNotification:(NSNotification*) notification
{
    NSLog(@"Notification Received");
} 
```

我已将 CoreWLAN 框架包含到我的项目中： ![在此处输入图像描述](../Images/c60fde67a7e625eaa1c89128a23e5958.png)

我已经下载了 CoreWLANWirelessManager.app，这是我用来参考的。奇怪的是，Apple 的代码使用了已弃用的通知，但它仍然有效。我尝试使用新的 API 和不推荐使用的 API，但没有成功。我不确定我是否可以在这里发布他们的代码，但实际上没有区别。选择器甚至具有相同的名称。

请不要犹豫，要求进一步详细说明。

更新（在达斯汀的回答之后）：我创建了一个新项目，希望能隔离这个问题。正如您所描述的那样，我设置了我的 .h 和 .m 文件。可悲的是，我仍然没有收到任何通知。为了向您展示我没有说谎（或疯了），我包含了两个（相当拥挤的）屏幕截图，它们是在同一运行时拍摄的。注意：（1。我在 handleNotification: 方法中有一个断点。应用程序永远不会暂停。（2。我包含网络窗口以显示我的 Mac*在*此运行时确实更改了 Wi-Fi 网络。（3。没有 NSLoged

网络 1： ![在此处输入图像描述](../Images/eb9f4a34a7e351bff4e0d94359de5685.png)

网络 2： ![在此处输入图像描述](../Images/9690004cf8017c3dc6e1c9f3e0ce289a.png)

2012 年 5 月 17 日更新：Dustin 的回答是正确的，但 Wi-Fi 接口名称因应用程序运行的硬件而异。就我而言，（MacBook Air；没有以太网），我的 Wi-Fi 是 en0 而不是 en1。我设法从我妈妈的 iMac 上获取了系统配置 plst 文件，Wi-Fi 被称为 en1。以太网是 en0。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:46:23.247

为了让您获得这些通知，您需要持有 CWInterface 的实例。你的 .h 看起来像这样

```
#import <Cocoa/Cocoa.h>
@class CWInterface;

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (retain) CWInterface *wirelessInterface;

@end 
```

然后在你的 .m 文件中看起来像这样

```
#import "AppDelegate.h"
#import <CoreWLAN/CoreWLAN.h>

@implementation AppDelegate

@synthesize window = _window;
@synthesize wirelessInterface;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWModeDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWSSIDDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWBSSIDDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWCountryCodeDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWLinkDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:CWPowerDidChangeNotification object:nil];

    self.wirelessInterface = [CWInterface interfaceWithName:@"en1"];
}

-(void) handleNotification:(NSNotification*) notification
{
    NSLog(@"Notification Received");
}

@end 
```

注意 CWInterface 属性，这是重要的一点

# eclipse - Eclipse EGIT - 所有已提交、拉取、合并、标记为已合并，仍在推送中我被“拒绝 - 非快进”，我错过了什么？

> ID：10525859
> 
> 赞同：10
> 
> 时间：2012-05-10T00:07:54.440
> 
> 标签：eclipse, git, egit

我开始尝试使用 Git，我确定我错过了一些东西，因为我无法进行简单的合并和推送

这是我所做的（我可能以错误的顺序得到它，或者以任何顺序错误，如果是，请更正）

*   拉
*   同步工作区
*   关于冲突 - 是否进行了手动合并，
*   然后“标记为合并”（有必要吗？）
*   其余的 - 允许自动合并
*   提交我的更改
*   按下推（origin-master）
*   我得到了著名的**“拒绝 - 非快进”**
*   做了一个“获取”来检查 - 没有更新
*   做了另一个提交 - 没有提交

我错过了什么？

不确定它是否相关，但我在 Eclipse Indigo（SR2，内部版本 20120216-1857）中使用 Windows 7、EGit（1.3.0.201202151440-1）并推送到 GitHub

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T00:32:05.590

我想我找到了，而不是“标记为合并”，我需要做“添加”

> 手动解决冲突
> 
> 要解决冲突，您必须执行以下步骤：
> 
> 导航到冲突资源 编辑冲突资源的内容 告诉 EGit 使用**Team -> Add解决了冲突**
> 
> **使用Team > Commit 提交**冲突解决方案

 **来自[http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution](http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution)

**编辑：**显然，我应该在玩 EGit 之前学习 git 命令行，那里的概念相同**

# javascript - 图形分辨率会使网页变慢吗？

> ID：10525865
> 
> 赞同：2
> 
> 时间：2012-05-10T00:08:39.073
> 
> 标签：javascript, html, web, webpage

我几天前才启动了我的网站……最近非常慢。会不会是图形？链接是：[http](http://britobmarketing.com) ://britobmarketing.com onMouseOver 效果需要很长时间才能发生。背景也需要一段时间才能加载。这一切都很慢......有人知道为什么会这样吗？

非常感谢你！

-布里托。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T00:14:24.213

当然，您有 2 张超过**1.5meg**的图像！这对网络来说是巨大的。

您必须将每个文件的大小减少到**至少 250kb**`plainbgndwall.jpg`或以下。`bgndwall.jpg`

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:11:18.873

是的，图像就像任何其他计算机资源一样。它们占用内存，并且占用 CPU 处理周期来渲染它们。资源越大，内存使用量越大，渲染所需的 CPU 周期就越多。

我建议您制作图像的低质量压缩版本。一些成像工具，如 Adob​​e Fireworks（没有广告，它只是我使用的那个）可以选择压缩图像而不会显着降低细节。您还可以减少或删除未使用的颜色。

此外，它不是所有缓慢效果的主要原因。DOM 操作和错误代码也会影响性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T00:34:58.660

我在基于 Web 的负载测试中检查了您的页面浏览时间，加载页面大约需要 11 秒，这不是一个很好的体验。结果如下：

![在此处输入图像描述](../Images/4e6cd9c30cd41c8606cdd3c293fb6f98.png)

在上面的屏幕中，您可以看到大部分时间都是通过图像进行的，因此您可以了解您需要在哪里工作。您也可以通过输入您的 URL 在下面的链接中自己运行类似的测试，您将了解更多关于页面加载时发生的事情：

[http://www.uptrends.com/aspx/free-html-site-page-load-check-tool.aspx](http://www.uptrends.com/aspx/free-html-site-page-load-check-tool.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T00:14:29.543

那些图像是**巨大的**。要求您的用户在页面加载时下载 4+MB，然后对其进行动画处理，这*确实*会减慢任何网站的速度。减小图像的大小，您将看到性能提高。

我总是试图让我的图像接近或低于 100KB，以使页面加载更快。如果我有超过 500KB 的图像要显示，我将在用户导航时推迟加载它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T00:15:57.817

这将有助于：

[https://developers.google.com/speed/pagespeed/](https://developers.google.com/speed/pagespeed/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-10T00:18:20.157

浏览器仅在第一次需要鼠标悬停图像时才加载它们。一旦浏览器缓存了它们，交换动画似乎要快得多。您可以强制立即加载图像，例如将它们放入隐藏`<img>`标签中。

也就是说，需要这么多大图像才能获得如此小的美容效果有点糟糕。连接速度慢的人可能会有糟糕的用户体验。**

# python - 用beautifulsoup提取标签属性

> ID：10525867
> 
> 赞同：0
> 
> 时间：2012-05-10T00:08:59.773
> 
> 标签：python, parsing, beautifulsoup

我整天都在用这个拉头发。基本上我无法从标签中提取信息，例如：

```
<REUTERS LEWISSPLIT="TRAIN"> 
```

我无法获取 LEWISSPLIT 的值并将其存储在列表中

我有以下代码：

```
import arff
from xml.etree import ElementTree
import re
from StringIO import StringIO

import BeautifulSoup
from BeautifulSoup import BeautifulSoup

totstring=""

with open('reut2-000.sgm', 'r') as inF:
    for line in inF:
        string=re.sub("[^0-9a-zA-Z<>/\s=!-\"\"]+","", line)
    totstring+=string

soup = BeautifulSoup(totstring)

bodies = list()
topics = list()
tags = list()

for a in soup.findAll("body"):
    bodies.append(a)

for b in soup.findAll("topics"):
    topics.append(b)

for item in soup.findAll('REUTERS'):
    tags.append(item['TOPICS'])

outputstring=""

for x in range(0,len(bodies)):
    if topics[x].text=="":
        continue
    outputstring=outputstring+"<TOPICS>"+topics[x].text+"</TOPICS>\n"+"<BODY>"+bodies[x].text+"</BODY>\n"

outfile=open("output.sgm","w")
outfile.write(outputstring)

outfile.close()

print tags[0]

file.close 
```

用于解析一些看起来有点像这样的旧的 reuters XML：

```
<!DOCTYPE lewis SYSTEM "lewis.dtd">
<REUTERS TOPICS="YES" LEWISSPLIT="TRAIN" CGISPLIT="TRAINING-SET" OLDID="5544" NEWID="1">
<DATE>26-FEB-1987 15:01:01.79</DATE>
<TOPICS><D>cocoa</D></TOPICS>
<PLACES><D>el-salvador</D><D>usa</D><D>uruguay</D></PLACES>
<PEOPLE></PEOPLE>
<ORGS></ORGS>
<EXCHANGES></EXCHANGES>
<COMPANIES></COMPANIES>
<UNKNOWN> 
&#5;&#5;&#5;C T
&#22;&#22;&#1;f0704&#31;reute
u f BC-BAHIA-COCOA-REVIEW   02-26 0105</UNKNOWN>
<TEXT>&#2;
<TITLE>BAHIA COCOA REVIEW</TITLE>
<DATELINE>    SALVADOR, Feb 26 - </DATELINE><BODY>Showers continued throughout the week in
the Bahia cocoa zone, alleviating the drought since early
January and improving prospects for the coming temporao,
although normal humidity levels have not been restored,
Comissaria Smith said in its weekly review.
&#3;</BODY></TEXT>
</REUTERS>
<REUTERS TOPICS="NO" LEWISSPLIT="TRAIN" CGISPLIT="TRAINING-SET" OLDID="5545" NEWID="2">
<DATE>26-FEB-1987 15:02:20.00</DATE>
<TOPICS></TOPICS>
<PLACES><D>usa</D></PLACES>
<PEOPLE></PEOPLE>
<ORGS></ORGS>
<EXCHANGES></EXCHANGES>
<COMPANIES></COMPANIES>
<UNKNOWN> 
&#5;&#5;&#5;F Y
&#22;&#22;&#1;f0708&#31;reute
d f BC-STANDARD-OIL-&lt;SRD>-TO   02-26 0082</UNKNOWN>
<TEXT>&#2;
<TITLE>STANDARD OIL &lt;SRD> TO FORM FINANCIAL UNIT</TITLE>
<DATELINE>    CLEVELAND, Feb 26 - </DATELINE><BODY>Standard Oil Co and BP North America
Inc said they plan to form a venture to manage the money market
borrowing and investment activities of both companies.
    BP North America is a subsidiary of British Petroleum Co
Plc &lt;BP>, which also owns a 55 pct interest in Standard Oil.
    The venture will be called BP/Standard Financial Trading
and will be operated by Standard Oil under the oversight of a
joint management committee.
&#3;</BODY></TEXT>
</REUTERS>
<REUTERS TOPICS="NO" LEWISSPLIT="TRAIN" CGISPLIT="TRAINING-SET" OLDID="5546" NEWID="3">
<DATE>26-FEB-1987 15:03:27.51</DATE>
<TOPICS></TOPICS>
<PLACES><D>usa</D></PLACES>
<PEOPLE></PEOPLE>
<ORGS></ORGS>
<EXCHANGES></EXCHANGES>
<COMPANIES></COMPANIES>
<UNKNOWN> 
&#5;&#5;&#5;F A
&#22;&#22;&#1;f0714&#31;reute
d f BC-TEXAS-COMMERCE-BANCSH   02-26 0064</UNKNOWN>
<TEXT>&#2;
<TITLE>TEXAS COMMERCE BANCSHARES &lt;TCB> FILES PLAN</TITLE>
<DATELINE>    HOUSTON, Feb 26 - </DATELINE><BODY>Texas Commerce Bancshares Inc's Texas
Commerce Bank-Houston said it filed an application with the
Comptroller of the Currency in an effort to create the largest
banking network in Harris County.
    The bank said the network would link 31 banks having
13.5 billion dlrs in assets and 7.5 billion dlrs in deposits.

 Reuter
&#3;</BODY></TEXT>
</REUTERS> 
```

我有兴趣删除特殊字符，提取正文和主题标签的内容并从中构建新的 xml：

```
<topic>oil</topic>
<body>asdsd</body>
<topic>grain</topic>
<body>asdsdds</body> 
```

我想根据值拆分这些数据`LEWISSPLIT`

到目前为止，除了根据 lewissplit 的值进行拆分之外，我已经能够完成所有这些工作。

这是因为我无法从`<reuters>`标签中提取值。我从这个网站和官方文档中尝试了许多不同的技术，但是在运行时

```
for item in soup.findAll('REUTERS'):
    tags.append(item['LEWISSPLIT'])

print tags[0] 
```

我得到的只是[]

为什么从标签中提取 LEWISSPLIT 属性的值这么难`<REUTERS>`？

非常感谢您阅读本文。

另请参阅[使用 beautifulsoup 和 python 提取标签信息](https://stackoverflow.com/questions/10521443/extracting-tag-information-with-beautifulsoup-and-python)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:42:33.063

乔尔·科内特是正确的，

“reuters”和“lewissplit”应该是小写的:(正确的语法：

```
for item in soup.findAll('reuters'):
    tags.append(item['lewissplit']) 
```

# objective-c - 在自己的 .h 文件中声明协议时找不到协议声明

> ID：10525868
> 
> 赞同：0
> 
> 时间：2012-05-10T00:10:07.243
> 
> 标签：objective-c, xcode, protocols, target

我创建了一个协议

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

// Defines the protocol that must be implemented to be a delegate for UCMapviewController
@protocol UCMapviewDelegate <NSObject>
@required
- (void)pushMapviewRight;

@end 
```

当我转到新文件-> 协议时，会出现一个询问目标的提示。我检查我的项目。但是，当我单击项目中的 protocol.h 文件并查看文件检查器时，在“目标成员资格”中，我的项目未选中，我无法检查它。

当我将协议放在我的一个视图控制器的头文件中时（例如），我没有收到此错误。我必须在其他地方导入协议吗？

怎么了？非常感谢您的帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:14:58.267

头文件不会进入目标，除非您正在构建框架并希望将头文件复制到框架中的 Headers 文件夹中。构建应用程序时，只有源文件属于目标。

您会注意到，如果您在项目中选择其他标题之一，它也不会在目标中。只有对应的源文件才会。这没关系。如果标题在您的项目中，则可以`#import`。

# java - 关闭单击的选项卡，而不是当前选择的选项卡 JTabbedPane

> ID：10525872
> 
> 赞同：3
> 
> 时间：2012-05-10T00:10:54.620
> 
> 标签：java, swing, actionlistener, jtabbedpane

我的主类中有这个类，可以在我的 jTabbedPane 上放置一个关闭按钮。问题是，例如我打开了三个标签：标签日记、联系人和上传，标签联系人是当前选择的标签。当我尝试关闭不是选定选项卡的日记选项卡时，关闭的是当前选定的选项卡。

```
class Tab extends javax.swing.JPanel implements java.awt.event.ActionListener{
    @SuppressWarnings("LeakingThisInConstructor")
    public Tab(String label){
        super(new java.awt.BorderLayout());
        ((java.awt.BorderLayout)this.getLayout()).setHgap(5);
        add(new javax.swing.JLabel(label), java.awt.BorderLayout.WEST);
        ImageIcon img = new ImageIcon(getClass().getResource("/timsoftware/images/close.png"));
        javax.swing.JButton closeTab = new javax.swing.JButton(img);
        closeTab.addActionListener(this);
        closeTab.setMargin(new java.awt.Insets(0,0,0,0));
        closeTab.setBorder(null);
        closeTab.setBorderPainted(false);
        add(closeTab, java.awt.BorderLayout.EAST);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        closeTab();    //function which closes the tab          
    }

}

private void closeTab(){
    menuTabbedPane.remove(menuTabbedPane.getSelectedComponent());
} 
```

这就是我调用选项卡的方法：

```
menuTabbedPane.setTabComponentAt(menuTabbedPane.indexOfComponent(jvPanel), new Tab("contactPanel")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T01:58:42.660

你的`actionPerformed()`方法调用你的`closeTab()`方法。您的方法会从选项卡式窗格`closeTab()`中删除*当前选定的选项卡。*

相反，您需要使用单击的按钮删除与您的选项卡对应的组件。

当您创建您的`Tab`时，还将作为选项卡窗格内容的组件传递给构造函数。然后，您可以在您的`actionPerformed()`方法中使用它，并将组件传递给`closeTab()`

```
public void actionPerformed(ActionEvent e)
{
  closeTab(component);
}

private void closeTab(JComponent component)
{
  menuTabbedPane.remove(component);
} 
```

这里有更多的上下文：

```
tab = new Tab("The Label", component);          // component is the tab content
menuTabbedPane.insertTab(title, icon, component, tooltip, tabIndex);
menuTabbedPane.setTabComponentAt(tabIndex, tab); 
```

而在标签...

```
public Tab(String label, final JComponent component)
{
  ...
  closeTab.addActionListener(new ActionListner()
  {
    public void actionPerformed(ActionEvent e)
    {
      closeTab(component);
    }
  });
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:54:55.220

通过删除 getSelectedComponent() 您将始终删除选定的选项卡，如果要删除日志选项卡，您需要将日志选项卡组件传递给 remove 方法。

# jsf - 使用 JSF 数据表进行行扩展

> ID：10525876
> 
> 赞同：0
> 
> 时间：2012-05-10T00:11:07.927
> 
> 标签：jsf, jsf-2

我有一个要求，其中有一个包含一些行的数据表。每行都有一个“[+]”链接。单击该链接时，我需要显示有关该行的一些详细信息。该行的详细信息应再次显示在数据表中。您能否让我知道如何实施相同的方法。

我有以下要求。

展开前，应显示以下数据。

## XX Col1Head Col2Head Col3Head Col4Head

[+] 行 1 值 1 行 1 值 2 行 1 值 3 行 1 值 4

[+] Row2Val1 Row2Val2 Row2Val3 Row2Val4

展开后（通过单击 [+] 链接），表格应如下所示

## XX Col1Head Col2Head Col3Head Col4Head

[+] 行 1 值 1 行 1 值 2 行 1 值 3 行 1 值 4

[-] Row2Val1 Row2Val2 Row2Val3 Row2Val4

SubCol1Head SubCol2Head SubCol3Head

子行1Val1 子行1Val2 子行1Val3

[+] Row3Val1 Row3Val2 Row3Val3 Row3Val4

我需要仅使用 JSF 来实现上述目标。请帮助。

谢谢

# php - 获取符号链接的 php 脚本的当前目录，而不是实际的 php 脚本

> ID：10525880
> 
> 赞同：12
> 
> 时间：2012-05-10T00:11:19.483
> 
> 标签：php, directory, symlink

我有一个从一个文件夹符号链接到另一个文件夹的脚本

```
/var/www/default/index.php 
```

这是符号链接到

```
/var/www/mysite/index.php 
```

但是，当我从 mysite 调用**DIR**时，路径会解析为默认情况下的原始路径。我如何让它返回 mysite 路径（符号链接文件夹，而不是实际文件夹）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T00:46:16.533

**对于 Web 服务器请求**

dirname($_SERVER['SCRIPT_FILENAME']) 会给你你所需要的。

失败 $_SERVER['PHP_SELF'] 甚至 REQUEST_URI 可能有你需要的东西，这取决于你的服务器配置。

**对于 CLI（命令行）**

这在 cli（命令行）脚本中不起作用，因为 $_SERVER 是由 Web 服务器添加的。

幸运的是，使用 cli 脚本要容易得多（因为没有 Web 服务器可以搞砸事情）。

您只需阅读启动脚本的命令行：http: [//php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)。第一个参数 $argv[0] 始终是用于运行脚本的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-27T14:25:40.090

如果您想使用符号链接获取**当前路径**，您可以询问您的主机操作系统：

`$path = exec('pwd');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-05T02:48:40.533

如果您正在寻找 cli 脚本的完整未解析系统路径，则 SCRIPT_PATH 将不够用。

```
php -f symlink/script.php 
```

**SCRIPT_FILENAME**将包含**symlink/script.php**

我创建了一个 php/gist 来[获取 php 文件的未解析路径。](https://gist.github.com/projectivemotion/c3ca6c7c2ec2022ec547a415618dfb1c)

这是函数的结果：

```
 $ php -f subdir/mysymlink/subdir/mysymlink/subdir/mysymlink/app.php
 PWD: /tmp/phpcode                                                                           
 SCRIPT_FILENAME: subdir/mysymlink/subdir/mysymlink/subdir/mysymlink/app.php                 
___FILE__ : /tmp/phpcode/app.php                                                             
 getSymlink(): /tmp/phpcode/subdir/mysymlink/subdir/mysymlink/subdir/mysymlink 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T07:42:05.143

可能有用：

```
var_dump($_SERVER['PWD']); 
```

# java - Android for Dummies 代码错误

> ID：10525881
> 
> 赞同：0
> 
> 时间：2012-05-10T00:11:22.000
> 
> 标签：java, android

在*Android app Development for Dummies 中*，我在最后一段代码后出现错误。

> 该类型的方法`setListAdapter(ArrayAdapter<String>)`未定义`ReminderListActivity`

代码如下：

```
package com.dummies.android.taskreminder;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class ReminderListActivity extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reminder_list);

    String[] items = new String[] { "Foo", "Bar", "Fizz", "Bin"};
    ArrayAdapter<String> adapter =
      new ArrayAdapter<String>(this, R.layout.reminder_row, R.id.text1, items);
    setListAdapter(adapter);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:22:07.440

在我看来[`Activity`](http://developer.android.com/reference/android/app/Activity.html)它没有，`setListAdapter()`但它的子类[`ListActivity`](http://developer.android.com/reference/android/app/ListActivity.html)有。也许你想要

```
public class ReminderListActivity extends ListActivity { 
```

反而？这应该可以正常工作：

```
package com.dummies.android.taskreminder;

import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class ReminderListActivity extends ListActivity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reminder_list);

    String[] items = new String[] { "Foo", "Bar", "Fizz", "Bin"};
    ArrayAdapter<String> adapter =
      new ArrayAdapter<String>(this, R.layout.reminder_row, R.id.text1, items);
    setListAdapter(adapter);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:22:14.547

`Activity`没有定义方法`setListAdapter()`。我认为您想扩展`ListActivity`：

```
public class ReminderListActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reminder_list);

        String[] items = new String[] { "Foo", "Bar", "Fizz", "Bin"};
        ArrayAdapter<String> adapter =
            new ArrayAdapter<String>(this, R.layout.reminder_row, R.id.text1, items);
        setListAdapter(adapter);
    }
} 
```

# python - 我如何将str中的所有其他字母大写？

> ID：10525882
> 
> 赞同：-3
> 
> 时间：2012-05-10T00:11:35.047
> 
> 标签：python, python-3.x, python-3.2

所以我一直在搞乱python，我认为找到一种方法将其他所有字母都大写是个好主意。我从[Homestuck](http://www.mspaintadventures.com/?s=6&p=003912)和 Gamzee 的怪癖中得到启发。因此，非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:01:03.373

```
mixed = lambda s: "".join((str.upper,str.lower)[i%2](ch) for i,ch in enumerate(s))
mixed("whatchathink?") 
```

返回

```
'WhAtChAtHiNk?' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:23:56.763

这里有一个提示。如果您传入的数字是偶数，则以下函数返回 True：

```
def is_even(i):
  return i % 2 == 0 
```

因为偶数发生“每隔一个”数字，您可以遍历字符串中的每个字母，并根据其位置是否为偶数来确定是否应将其大写。

# perl - 对哈希的更新不会反映在对 HTTP::Server::Simple::CGI 的调用中

> ID：10525885
> 
> 赞同：1
> 
> 时间：2012-05-10T00:12:40.983
> 
> 标签：perl, cgi

我花了大约 6 个小时试图弄清楚这一点。我希望perl大师会有所帮助。

我有一个循环的程序，用我正在轮询的服务器的信息更新哈希。我正在使用 HTTP::Server::Simple::CGI 向用户报告此信息。我遇到了一个问题，HTTP::Server::Simple::CGI 模块看不到哈希的更新，只会报告哈希初始化的数据。

我有以下代码，删节：

```
{
package LabBrowser;

use warnings;
use strict;
use Thread::Queue;
use LWP::Simple; 
use HTTP::Server::Simple::CGI;
use base qw(HTTP::Server::Simple::CGI);

my %problem_data_structure;

sub server_loop {
    while(1) {
        for my $server (@server_list) {
            fetch_server_info(@$server);
        }
    }
}

sub fetch_server_info {
    my ($hostname, $port) = @_; 
    my $content = fetch_webpage_content("http://" . $hostname . ":" . $port);   
    my @data = parse_data(content);
    $problem_data_structure{$hostname} = [@data];
}

##THIS SUB
sub handle_request {
    my ($self, $cgi) = @_;
    my $path = $cgi->path_info();

    ##THIS LINE 
    print Data::Dumper->Dump([\%problem_data_structure],['handle']);

}

}

my $pid = LabBrowser->new(8080)->background();
my $labBrowser = LabBrowser->init();
$labBrowser->server_loop();
print "$pid !!!\n"; 
```

我可以在程序的任何地方获取 %problem_data_structure 中的数据，除了 handle_request。在那里，它似乎只知道变量被初始化为什么。如果我在开头添加一些键值对，它会报告。但是，它不会报告自初始化以来添加到数据结构中的任何内容。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:52:40.483

这`background()`是在后台进程中处理请求的线索。Perl 中的进程不共享内存，因此在`%problem_data_structure`中修改时`handle_request`，父进程中的（原始）副本`%problem_data_structure`不受影响。

# c - 生成一个 0 到 4 之间的数字，不包括一个数字

> ID：10525886
> 
> 赞同：1
> 
> 时间：2012-05-10T00:13:12.883
> 
> 标签：c

在下面的代码中，有没有更好的方法来排除随机值？

```
 enum Direction {HAUT, BAS, GAUCHE, DROITE} direction;

switch(direction)
{
    case HAUT:
        if (false)
        {
        do{direction=(rand() % 4); }while(direction!=0); 
        break;
        }

    case BAS:
        if (false)
        {
        do{direction=(rand() % 4); }while(direction!=1);
        break;
        }          
    case GAUCHE:
.......... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:21:47.637

看起来您的代码总是排除当前方向（向上排除 0，向下排除 1，依此类推），因此您可以使用`Enum.ordinal`来决定排除而不是使用开关，如下所示：

```
Direction direction = GAUCHE; // ...for example...
int nextDir;
do {
    nextDir = rand() % 4;
} while (nextDir == direction);
direction = nextDir; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T00:26:54.440

关于什么：

```
new_direction = rand() % 3;
direction = (new_direction < direction) ? new_direction : new_direction + 1; 
```

如果我们生成的方向小于我们希望排除的数字，请保留它。否则增加 1 以跳过排除的数字。随机数的范围相应地减少了 1。

# windows-8 - 我可以在 Windows 10/Windows 8/WinRT 中唯一标识设备吗

> ID：10525889
> 
> 赞同：19
> 
> 时间：2012-05-10T00:13:42.157
> 
> 标签：windows-8, windows-runtime

是否有任何机制来唯一识别设备（即使它是匿名的）？

需要明确的是，“设备”是指计算机/平板电脑/个人电脑。

**视窗 8.x**

> [http://codepaste.net/ybt893](http://codepaste.net/ybt893)

```
string HardwareId()
{
    var token = Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);
    var hardwareId = token.Id;
    var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);
    var bytes = new byte[hardwareId.Length];
    dataReader.ReadBytes(bytes);
    return BitConverter.ToString(bytes);
} 
```

**视窗 10**

> 您必须添加移动和/或桌面扩展 SDK。

```
string HardwareId()
{
    var token = HardwareIdentification.GetPackageSpecificToken(null);
    var hardwareId = token.Id;
    var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);
    var bytes = new byte[hardwareId.Length];
    dataReader.ReadBytes(bytes);
    return BitConverter.ToString(bytes);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T19:22:41.610

刚刚在 Windows 8 RTM 中添加了这样的能力：

```
Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T23:14:46.623

Windows 8 中的 Metro Style 应用程序似乎没有一种方便的方法来获取系统维护的唯一标识符，例如 Windows Phone 7 提供的`Microsoft.Phone.Info.DeviceExtendedProperties.GetValue( "DeviceUniqueId" )`

*   [http://social.msdn.microsoft.com/Forums/en-HK/winappswithcsharp/thread/62ac2a48-be60-465c-b3b7-bbb736a67a60](http://social.msdn.microsoft.com/Forums/en-HK/winappswithcsharp/thread/62ac2a48-be60-465c-b3b7-bbb736a67a60)
*   [http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/2ca0d5de-9db5-4349-839c-e01ff614ec6e](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/2ca0d5de-9db5-4349-839c-e01ff614ec6e)

到目前为止，我发现的最佳解决方案是简单地在[应用程序本地存储中生成一个](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx#Y0)[新的 guid](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx) ，并使用该标识符来识别计算机，以便当前和将来启动您的应用程序。

```
var localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
Object value = localSettings.Values["uniqueDeviceId"];
if (!value)
{
    value = Guid.NewGuid();
    localSettings.Values["uniqueDeviceId"] = value;
} 
```

请记住，用户可能会删除本地存储并导致您的应用程序忘记并重新生成该值（甚至可能修改/欺骗该值），因此不要将其用于任何关键的安全目的。由于我只将这种技术用于粗略的统计和使用情况报告，因此这对我的需求来说很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T22:01:32.297

这可以用作登录用户的一致 ID 吗？

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.exchangeactivesyncprovisioning.easclientdeviceinformation.id.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.exchangeactivesyncprovisioning.easclientdeviceinformation.id.aspx)

***EasClientDeviceInformation.Id | id 属性***

*返回本地计算机的标识符。Id 属性表示使用从 MachineID、用户 SID 和应用程序 ID 的 SHA256 哈希的前 16 个字节截断的 GUID 的 DeviceId，其中 MachineID 使用本地用户组的 SID。GUID 的每个组件都按网络字节顺序返回。*

# matlab - Matlab在图形外部添加文字

> ID：10525890
> 
> 赞同：4
> 
> 时间：2012-05-10T00:13:49.987
> 
> 标签：matlab, text, figure

如何在图的右侧添加文本？我想调整绘图的大小以在右侧留下一些空白空间并在那里添加一些信息。

谢谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T02:13:06.663

如果您想将该文本放在图例中，您可以执行以下操作：

```
legend('Some quick information','location','EastOutside') 
```

那是最简单的。不过，为了获得更多控制，您可以在图形窗口中放置一个文本框：

```
MyBox = uicontrol('style','text')
set(MyBox,'String','Here is a lot more information') 
```

并移动它：

```
set(MyBox,'Position',[xpos,ypos,xsize,ysize]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T14:30:26.677

试试这个短文本：

```
plot(1:5);
text(5.05, 2.5, 'outside', 'clipping', 'off'); 
```

或者这个解决方案更复杂的注释：

[http://radio.feld.cvut.cz/matlab/techdoc/creating_plots/chaxes6.html](http://radio.feld.cvut.cz/matlab/techdoc/creating_plots/chaxes6.html)

# haml - 我如何将代码粘贴到haml而不抱怨？

> ID：10525891
> 
> 赞同：0
> 
> 时间：2012-05-10T00:13:53.140
> 
> 标签：haml

我有以下代码，并且不想在我只想让它保持原样时将代码缩进到同一行？

我必须缩进到：

```
.content.first
Thank you for taking our Survey, hope you had fun!!!
<!-- Begin MailChimp Signup Form -->
<link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
<div id="mc_embed_signup" style="text-align:center">
<form onsubmit="_kmq.push(['record', 'sign up for our newsletter'])" action="http://socialcrunch.us5.list-manage.com/subscribe/post?u=755f44e55d468b9568a7ec9de&amp;id=7f27e118c4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
%label{:style=>"text-align:center"}
  %br
  Like spandex wearing gym freaks, SocialCrunch is in training.
  %br
  %br
  You have been one of the first people to take part in a test which will form the basis of our website.
  %br
  %br
  Input your email below to learn more about SocialCrunch and our launch later this summer!
  %br
  %br
  Thank you for taking part, we hope you had fun.
<input style="margin-left: 21%;text-align:center" type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
<div class="clear"><input style="margin-left:33%" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div> 
```

我可以通过一些会忽略我的缩进并且不会抱怨的过滤器来运行它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:09:12.153

HAML 语法对缩进敏感，并且没有“过滤器”会忽略您的缩进。HAML 使用缩进将您的代码正确地转换为相应的 HTML 代码块。

如果您厌倦了手动缩进 haml 代码并使用 emacs 作为编辑器，那么您可以按照此处的说明进行操作

[http://emacswiki.org/emacs/HamlMode](http://emacswiki.org/emacs/HamlMode)

并永久解决您的问题

# java - 如何将 CXF 用于带有附件的客户端 REST 帖子

> ID：10525892
> 
> 赞同：2
> 
> 时间：2012-05-10T00:13:55.683
> 
> 标签：java, rest, cxf

我正在编写一个需要使用 REST 帖子将文件上传到服务器的 Java 客户端。我有一个与文件一起发送的信息架构，但文件本身将作为消息的附件发送。服务器不是用 Java 编写的，我无法（轻松）访问源代码。

如何在 CXF 中创建帖子消息？我发现了一个[类似的 SO question](https://stackoverflow.com/q/5772225/62162)，但它似乎使用了我在 CXF 中找不到的特定于 Jersey 的类。CXF 已经在项目中使用，所以我更喜欢使用它，但如果需要，我可以使用另一个库。

如果不是很明显，这是我第一次使用 REST 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:31:11.947

您是否[在 Apache CXF 用户指南中看到与 MultipartBody、附件或文件一起使用的](http://cxf.apache.org/docs/jax-rs-multiparts.html#JAX-RSMultiparts-Uploadingfiles)位`WebClient`？示例代码摘录如下：

```
WebClient client = WebClient.create("http://books");
client.type("multipart/form-data");
ContentDisposition cd = new ContentDisposition("attachment;filename=image.jpg");
Attachment att = new Attachment("root", imageInputStream, cd);
client.post(new MultipartBody(att));

// or just post the attachment if it's a single part request only
client.post(att);

// or just use a file
client.post(getClass().getResource("image.png").getFile()); 
```

# c++ - 插入迭代器与容器的成员函数插入器

> ID：10525898
> 
> 赞同：3
> 
> 时间：2012-05-10T00:14:41.150
> 
> 标签：c++, stl, iterator, inserter

过去两周我一直在学习 stl 并处理了很多`vector<T>`,`deque<T>`和`list<T>`. 我一直在使用`push_back()`, `push_front()`, `insert()`. 不过，目前，我已经被介绍给**“插入迭代器”**，它们如下：

*   `back_insert_iterator`，这类似于`push_back()`并且确实需要容器具有`push_back()`工作的功能
*   `front_insert_iterator`，这类似于`push_front()`并且要求容器具有`push_front()`
*   `insert_iterator`, 类似`insert()`的, 等等等等

所以我知道如何实现所有这些。我的问题很简单，有什么区别？为什么要使用**Insert Iterators**呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T00:16:47.337

因为您可以将它们传递给算法，例如

```
std::copy(v1.begin(), v1.end(), std::back_inserter(v2)); 
```

# php - CakePHP 1.3 自动注销用户

> ID：10525900
> 
> 赞同：0
> 
> 时间：2012-05-10T00:15:06.490
> 
> 标签：php, cakephp, cakephp-1.3

我已将 Cakephp 1.3 调试级别设置为 0，每当用户登录时，几秒钟后用户就会自动注销。

但是，这不会在调试级别 1 或 2 中发生。

我在 core.php 中检查了我的 security.level 和 session.timeout。我还检查了我的服务器的 php.ini，一切似乎都井然有序。

有什么我可能错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:12:49.020

我终于解决了这个问题。我使用 shell 脚本来检查白人的步伐，并手动查看我的整个应用程序。从模型到我的观点。

清理了整个代码并确保没有任何不必要的空格或未使用的方法，例如调试，现在它工作正常。我想干净的编码确实有助于让您的应用程序顺利运行。

# java - 制作一个记录器以跳过 logback 中的根部分

> ID：10525902
> 
> 赞同：12
> 
> 时间：2012-05-10T00:15:43.747
> 
> 标签：java, logback, appender

我定义了几个记录器和一个带有多个附加程序的根部分，例如：

```
 <logger name="X" level="debug"/>
  <logger name="Y" level="trace"/>

  <logger name="Z" level="warn">
    <appender-ref ref="ALERTS-SYSLOG" />
  </logger>

  <root level="INFO">
    <appender-ref ref="STDOUT"/>
    <appender-ref ref="FILE"/>
    <appender-ref ref="BUFFER"/>
    <appender-ref ref="SYSLOG"/>
  </root> 
```

我想要完成的是让名为 Z 的记录器**仅**转到 ALERTS-SYSLOG 附加程序，而不是根部分中定义的所有附加程序。只有在 XML 文件上配置才有可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T10:42:44.940

[有关appender 可加性](http://logback.qos.ch/manual/architecture.html#additivity)和可[加性配置](http://logback.qos.ch/manual/configuration.html#overrridingCumulativity)的信息，请参阅 logback 文档。简而言之，Z logger 应该配置为：

```
<!-- set the additivity attribute of the Z logger to false -->
<logger name="Z" level="warn" additivity="false">
  <appender-ref ref="ALERTS-SYSLOG" />
</logger> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T02:07:48.227

在 XML 文件中显式地为记录器 Z 和 ALERTS_SYSLOG 附加程序添加一个条目，并将 additvity 标志设置为 false。

# python - Python ...测试类？

> ID：10525903
> 
> 赞同：15
> 
> 时间：2012-05-10T00:15:43.650
> 
> 标签：python, testing

在python中，我们如何为我们的类编写测试用例？例如：

```
class Employee(object):
  num_employees = 0

# numEmployess is incremented each time an employee is constructed
  def __init__(self, salary=0.0, firstName="", lastName="", ssID="", DOB=datetime.fromordinal(1), startDate=datetime.today()): #Employee attributes
    self.salary=salary
    self.firstName = firstName
    self.lastName = lastName
    self.ssID = ssID
    self.DOB = DOB
    self.startDate = startDate
    Employee.num_employees += 1 #keep this 

  def __str__(self): #returns the attributes of employee for print
    return str(self.salary) + ', ' + self.firstName + ' ' + self.lastName + ', ' + self.ssID + ', ' + str(self.DOB) + ', ' + str(self.startDate) 
```

我知道有一种叫做单元测试的东西。但我完全不确定它是如何工作的。在网上找不到我理解的很好的解释。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T00:22:11.410

[`doctest`](http://docs.python.org/library/doctest.html)是最简单的。测试写在[docstring](http://www.python.org/dev/peps/pep-0257/)中，看起来像 REPL 剧集。

```
 ...

  def __str__(self):
    """Returns the attributes of the employee for printing

    >>> import datetime
    >>> e = Employee(10, 'Bob', 'Quux', '123', startDate=datetime.datetime(2009, 1, 1))
    >>> print str(e)
    10, Bob Quux, 123, 0001-01-01 00:00:00, 2009-01-01 00:00:00
    """
    return (str(self.salary) + ', ' +
            self.firstName + ' ' + 
            self.lastName + ', ' +
            self.ssID + ', ' + 
            str(self.DOB) + ', ' +
            str(self.startDate)
            )

if __name__ == '__main__':
  import doctest
  doctest.testmod() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-23T13:33:07.430

Hitchhiker's Guide to Python的[“测试你的代码”部分](http://docs.python-guide.org/en/latest/writing/tests/)讨论了 Python 中的一般测试实践/方法，以及以或多或少越来越复杂的顺序介绍特定工具。如前所述，doctest 是一种超级简单的开始方式……从那里开始，您可能希望转到 unittest() 及其他。

我的经验是 doctest 可以（并且应该）被用作一个快速而肮脏的测试，但要小心过度 - 它可能导致模块用户可能不想看的长而丑陋的文档字符串，特别是如果您的测试很详尽，并且包括各种极端情况。从长远来看，将这些测试移植到像 unittest() 这样的专用测试框架中是一种更好的做法。您可以在 doctest 中仅保留基础知识，以便查看文档字符串的任何人都可以快速了解该模块在实践中的工作方式。

# c# - 在 HTML 页面中使用 VBScript 在客户端打印 .msg 文件

> ID：10525904
> 
> 赞同：0
> 
> 时间：2012-05-10T00:15:56.123
> 
> 标签：c#, html, sharepoint, sharepoint-2010, vbscript

我正在尝试为我们的 SharePoint 场编写一个功能，让用户在文档库中勾选项目，从功能区中选择自定义操作“打印”，然后打印出文档客户端。大多数文档都打印得很好——（.docx、.xlsx、.pdf），因为我可以将 ActiveXObjects 与每种类型的 Print 方法一起使用。但是，没有用于 Outlook 的 ActiveXObject 可以轻松打印 .msg 文件。因此，我发现通过脚本在客户端打印 .msg 文件的唯一方法是通过 vbs：

```
TargetFolder = "C:\EmailExport" 
Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.Namespace(TargetFolder) 
Set colItems = objFolder.Items
For Each objItem in colItems
    objItem.InvokeVerbEx("Print")
Next 
```

这在我的本地机器上的 .vbs 文件中工作正常，但是当我尝试将它放在 .html 文件中以便在浏览器中进行测试时，它给了我一个 Permission Denied 错误。我无法修改 Internet Explorer 的安全级别，因为公司的组策略控制它们。

测试 .html 页面是这样的：

```
<html>
<head>
<script language="vbscript">
<!--
TargetFolder = "C:\EmailExport"
Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.Namespace(TargetFolder)
Set colItems = objFolder.Items
For Each objItem in colItems
       objItem.InvokeVerbEx("Print")
Next
-->
</script>
</head>
<body>
</body>
</html> 
```

有没有人有任何解决方案可以让我在客户端打印出这些 .msg 文件？我想保持 Outlook 将它们打印出来的格式，因此首先将它们转换为文本文件等并不是一个真正的选择......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:49:09.433

我试过你的脚本，它可以在 HTML 页面上运行，但只有当你使用 Internet Explorer 作为浏览器并且用户需要在他的电脑上拥有足够的权限并且需要设置 IE 的安全设置以启用 Active-X 时，它才会起作用.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:36:04.487

出于安全原因，您不能从浏览器环境中访问 Namespace 方法。（网页永远不需要访问本地数据目录。）您需要通过 Windows 脚本主机将其作为独立脚本运行。

# r - 如何添加缺失的序列值？

> ID：10525907
> 
> 赞同：1
> 
> 时间：2012-05-10T00:15:59.050
> 
> 标签：r, dataframe

我有一个这样的数据框：

```
structure(list(x = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 
24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 
37L, 38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 
50L, 51L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 
63L, 64L, 65L, 66L, 67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 
76L, 77L, 78L, 79L, 80L, 81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 
89L, 90L, 91L, 92L, 93L, 94L, 95L, 96L, 97L, 98L, 99L, 100L, 
101L, 102L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L, 112L, 
113L, 114L, 115L, 116L, 117L, 118L, 119L, 120L, 121L, 123L, 124L, 
125L, 127L, 128L, 129L, 130L, 132L, 133L, 134L, 135L, 136L, 137L, 
138L, 139L, 140L, 141L, 142L, 143L, 145L, 146L, 147L, 148L, 149L, 
150L, 151L, 152L, 153L, 154L, 155L, 158L, 160L, 163L, 164L, 166L, 
167L, 169L, 170L, 173L, 174L, 178L, 179L, 181L, 182L, 183L, 186L, 
187L, 191L, 192L, 193L, 194L, 197L, 198L, 200L, 205L, 208L, 209L, 
213L, 214L, 216L, 217L, 220L, 222L, 223L, 225L, 229L, 233L, 235L, 
237L, 242L, 243L, 244L, 251L, 253L, 254L, 255L, 261L, 262L, 263L, 
264L, 267L, 268L, 269L, 270L, 276L, 281L, 282L, 284L, 285L, 287L, 
289L, 293L, 295L, 297L, 299L, 301L, 306L, 308L, 315L, 317L, 318L, 
320L, 327L, 330L, 336L, 337L, 345L, 346L, 355L, 359L, 376L, 377L, 
379L, 384L, 387L, 388L, 402L, 405L, 408L, 415L, 420L, 421L, 427L, 
428L, 429L, 430L, 437L, 438L, 439L, 440L, 446L, 448L, 453L, 456L, 
469L, 472L, 476L, 478L, 481L, 483L, 486L, 487L, 488L, 497L, 500L, 
502L, 504L, 507L, 512L, 525L, 530L, 531L, 543L, 546L, 550L, 578L, 
581L, 598L, 601L, 680L, 689L, 693L, 712L, 728L, 746L, 768L, 790L, 
794L, 840L, 851L, 861L, 928L, 969L, 1010L, 1180L, 1698L), freq = c(29186L, 
12276L, 5851L, 3938L, 3133L, 1894L, 1157L, 820L, 597L, 481L, 
398L, 297L, 269L, 251L, 175L, 176L, 153L, 130L, 117L, 108L, 93L, 
83L, 58L, 84L, 60L, 43L, 59L, 51L, 57L, 53L, 38L, 38L, 32L, 35L, 
28L, 27L, 29L, 22L, 24L, 29L, 30L, 23L, 26L, 19L, 19L, 25L, 14L, 
22L, 16L, 12L, 15L, 14L, 11L, 13L, 18L, 10L, 17L, 20L, 7L, 9L, 
2L, 8L, 12L, 8L, 7L, 10L, 10L, 9L, 6L, 6L, 9L, 5L, 11L, 4L, 5L, 
5L, 10L, 4L, 6L, 1L, 4L, 7L, 3L, 4L, 3L, 2L, 3L, 5L, 7L, 2L, 
2L, 3L, 2L, 4L, 7L, 1L, 3L, 5L, 5L, 3L, 5L, 2L, 2L, 2L, 3L, 2L, 
5L, 7L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 1L, 3L, 2L, 2L, 1L, 
3L, 4L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 1L, 4L, 3L, 1L, 2L, 2L, 1L, 
1L, 1L, 1L, 2L, 3L, 1L, 1L, 3L, 2L, 1L, 1L, 1L, 4L, 4L, 1L, 2L, 
2L, 4L, 2L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 2L, 3L, 1L, 1L, 1L, 1L, 
3L, 2L, 1L, 3L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 3L, 2L, 1L, 1L, 2L, 1L, 1L, 
2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 4L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L)), .Names = c("x", 
"freq"), row.names = c(NA, -296L), class = "data.frame") 
```

x 值 130 之后，存在缺失值。有没有办法让这个连续数据框以 1 为增量，即从 1 到 1698，填充整个列表并将此处没有值的元素设置为 0？我的意思是：

```
1,2
4,5
5,7 
```

应转换为：

```
1,2
2,0
3,0
4,5
5,7 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:29:03.503

我将创建一个列未涵盖的值的数据集，`x`然后创建这些值的数据框并将 0 分配给`freq`所有这些`x`值。然后 rbind 和 order by `x`。

```
#I called your data dat
y <- 1:max(dat$x)
dat2 <- data.frame(x=y[!y%in%dat$x], freq=0)
dat3 <- rbind(dat, dat2)
dat4 <- dat3[order(dat3$x), ]               #could stop here 
rownames(dat4) <- NULL                      #but I hate non sequential row names
dat4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:32:19.127

您还可以使用`merge`（假设您的数据存储在`l`）：

```
l <- merge(l,data.frame(x = 1:1698),all = TRUE,by = "x")
l$freq[is.na(l$freq)] <- 0 
```

# linux - Linux中的应用程序计数器？（和 OSX？）

> ID：10525908
> 
> 赞同：12
> 
> 时间：2012-05-10T00:15:59.833
> 
> 标签：linux, performancecounter

我试图弄清楚是否有一个库可以为我提供与 Windows 自定义性能计数器相当的东西（在此处描述[http://geekswithblogs.net/.NETonMyMind/archive/2006/08/20/88549.aspx](http://geekswithblogs.net/.NETonMyMind/archive/2006/08/20/88549.aspx)）

基本上，我正在寻找既可用于跟踪应用程序中的全局计数器，又可用于（理想情况下）通过明确定义的界面向其他应用程序/用户呈现该信息的东西。这些是应用统计信息；可以通过其他方式捕获内存和磁盘之类的东西，但我希望公开在我的应用程序生命周期内处理的吞吐量/事务/“小部件”。

我看过这个问题：

[Linux/Unix 中“性能计数器”的概念](https://stackoverflow.com/questions/1100733/concept-of-performance-counters-in-linux-unix)

和这个

[Linux 中的注册表级计数器可从 Java 访问](https://stackoverflow.com/questions/4601453/registry-level-counters-in-linux-accessible-from-java)

但两者都不是我想要的。我不想编写静态文件（这毕竟是动态信息；即使磁盘已满等我也应该能够得到它），并且如果可能的话，宁愿避免使用自制的代码集。理想情况下，至少在 Linux 上，这些数据（我认为）会以某种方式通过 /proc 出现，尽管我不清楚这是否可以从用户空间完成（这不太重要，只要它出现在某些给客户的方式。）

但回到问题的关键：是否有任何内置或合适的 3rd-party 库可以为我提供适用于我可以在 Linux 和其他 *NIXy 操作系统上使用的应用程序指标的自定义全局（线程安全、高性能）计数器? （并且可以从 C/C++ 接口？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T21:40:21.957

除了[@user964970](https://stackoverflow.com/users/964970/user964970 "@user964970")评论/解决方案，我建议让它与操作系统无关。

使用与操作系统无关的 API，如 ACE 或 BOOST，创建您自己的库，提供一个命名信号量写保护计数器，放置在命名共享内存段内。

这应该是您图书馆的 API：

```
long * createCounter(const char * name); // Create a counter
                                         // Will create a named semaphore and a named
                                         // shared memory segment, holding the counter     
                                         // value. Will return pointer to counter
long * getCounter(const char * name); // Get existing counter pointer
                                      // in the calling process' address space
long incCounter(const char * name);   // increment existing counter 
```

# jpa - JPA：为地图建模

> ID：10525909
> 
> 赞同：1
> 
> 时间：2012-05-10T00:16:05.627
> 
> 标签：jpa

使用 EclipseLink 为以下模型生成数据库表时遇到异常：

```
 @Entity
 @Table(name="RXRACTSPOT")
 public class ActivitySpot implements Serializable,IsSerializable {
    .....

    @OneToMany
    private Map<CustomAttributeDefinition, CustomAttributeRestriction> customAttributes; 
```

--

```
@Entity
@Table(name="RXRCUSTATTRREST")
public class CustomAttributeRestriction implements Serializable 
```

--

```
@Entity
@Table(name="RXRCUSTATTRDEF")
public class CustomAttributeDefinition implements Serializable 
```

我遇到以下异常：

> 线程“主”javax.persistence.PersistenceException 中的异常：异常> [EclipseLink-0]（Eclipse Persistence Services - 2.1.2.v20101206-r8635）：org.eclipse.persistence.exceptions.IntegrityException

描述符例外：

> 异常 [EclipseLink-93] (Eclipse Persistence Services - 2.1.2.v20101206-r8635)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：此描述符中不存在表 [RXRCUSTATTRREST]。描述符：RelationalDescriptor(com.rubiconred.activitystream.core.model.ActivitySpot --> [DatabaseTable(RXRACTSPOT)])

运行时异常：

> java.lang.IndexOutOfBoundsException：索引：0，大小：0

```
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:417)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:164)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:221)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:209)
at com.rubiconred.activitystream.database.ActivityStreamDatabaseUtils.dropAndCreateTables(ActivityStreamDatabaseUtils.java:64)
at com.rubiconred.soauiext.server.db.CreateOneSpotDatabases.main(CreateOneSpotDatabases.java:16) 
```

原因：异常 [EclipseLink-0] (Eclipse Persistence Services - 2.1.2.v20101206-r8635): org.eclipse.persistence.exceptions.IntegrityException

如果我删除 RXRACTSPOT 中的 Map，则成功创建表 RXRCUSTATTREST 和 RXRCUSTATTRDEF。使用 Map 不会创建任何表并引发异常。我怀疑我在地图上遗漏了一些注释，但我一直无法找到一个将键和值都作为实体的地图的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:28:55.273

似乎是一个错误。尝试最新版本，如果仍然出现，请记录错误。

您还可以创建另一个实体类来表示三向连接表，而不是使用 Map。

# windows-phone-7 - 使用 HAP 删除子节点

> ID：10525910
> 
> 赞同：0
> 
> 时间：2012-05-10T00:16:05.983
> 
> 标签：windows-phone-7, html-agility-pack

当我试图从我的 xpath 中删除一个子节点时，我遇到了一个奇怪的错误：-

System.ArgumentOutOfRangeException 未处理 Message=Node "" is not found in the collection

我知道 HAP childremoving 存在问题，但如果他们用新版本修复它，我知道。我的问题是我的代码错误还是 HAP？无论哪种方式，有没有办法解决这个问题并删除那些子节点？

这是我的代码：-

```
 List<MediNetScheme> medinetScheme = new List<MediNetScheme>();
        HtmlDocument htdoc = new HtmlDocument();
        htdoc.LoadHtml(results);
        foreach (HtmlNode table in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
        {
            string itemValue = string.Empty;
            HtmlNode ansvarig =table.SelectSingleNode("//table[@class='list-medium']/tbody[1]/tr[@class]/td[4]");
            table.RemoveChild(ansvarig, true);
            itemValue = table.InnerText;
            medinetScheme.Add(new MediNetScheme(){Datum=itemValue.Remove(15),Sections=itemValue.Remove(0,15)});
        }
        MediNetScheme.ItemsSource = medinetScheme; 
```

编辑：-

我的 HTML 文档有一个表格，其中包含几行具有此 xpath 的表格：-“//table[@class='list-medium']/tbody [1](https://i.stack.imgur.com/LEZif.jpg) /tr[@class]”。此表中的每一行有 5 列 td [1](https://i.stack.imgur.com/LEZif.jpg) ...td[5]。在我的第一个 foreach 循环中，我使用 selectnodes 来获取表中每一行的 HTMLcode。我想要做的是只从每行的前 3 个 td 中获取内部文本，这意味着我需要从每行中删除 td[4] 和 td[5]。当我使用您编辑的代码时，我能够摆脱第一行中的 td[4] 和 td[5] 而不是第一行之后的其他行。

这是我的 HTML 的图片：- ![在此处输入图像描述](../Images/6f943a91403ff7c6c52afdc2d24be194.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:45:13.243

从其父节点中删除节点的更好方法`HtmlAgilityPack`是：

```
nodeToRemove.ParentNode.RemoveChild(nodeToRemove); 
```

在您的代码中，您可以像这样使用：

```
List<MediNetScheme> medinetScheme = new List<MediNetScheme>();
HtmlDocument htdoc = new HtmlDocument();
htdoc.LoadHtml(results);
foreach (HtmlNode table in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
{
    string itemValue = string.Empty;
    HtmlNode ansvarig =table.SelectSingleNode("//table[@class='list-medium']/tbody[1]/tr[@class]/td[4]");
    ansvarig.ParentNode.RemoveChild(ansvarig);
    itemValue = table.InnerText;
    medinetScheme.Add(new MediNetScheme(){Datum=itemValue.Remove(15),Sections=itemValue.Remove(0,15)});
 }
 MediNetScheme.ItemsSource = medinetScheme; 
```

我希望这对你有用:)

编辑：你想获得每行前三个 td 的 InnerText。我正在检查您的代码，我认为 foreach 中的 xpath 是错误的。

我会像这样使用 linq 更改经典计数循环的 xpath：

```
foreach (HtmlNode trNodes in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
{
    string itemValue = string.Empty;
    int position = 1;
    foreach (var td in tr.DescendantNodes("td"))
    {
        itemValue = td .InnerText;
        medinetScheme.Add(new MediNetScheme(){Datum=itemValue.Remove(15),Sections=itemValue.Remove(0,15)});
        position++;
        if (position == 3)
            break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:06:16.623

经过几个小时的测试不同的代码和方法来实现我想要的，我想通了。

但我必须感谢 vfportero 的回答并将其标记为答案。

我的问题的编辑版本的答案就是这段代码；）

```
List<MediNetScheme> medinetScheme = new List<MediNetScheme>();
        HtmlDocument htdoc = new HtmlDocument();
        htdoc.LoadHtml(results);
        foreach (HtmlNode table in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
        {
            table.ChildNodes.RemoveAt(3);
            string itemValue = table.InnerText;
            medinetScheme.Add(new MediNetScheme(){Datum=itemValue.Remove(15),Sections=itemValue.Remove(0,15)}); 
        }
        MediNetScheme.ItemsSource = medinetScheme; 
```

您可以看到我省略了 RemoveChild 方法，因为它没有做我想要的（请阅读我的问题的编辑），而是使用 .ChildNodes.RemoveAt(int //您要删除的孩子的位置）。希望这将有助于其他一些面临同样问题的人。

你的

# jquery - NilClass 的未定义方法“model_name”：使用 jQuery 加载部分时的类

> ID：10525911
> 
> 赞同：1
> 
> 时间：2012-05-10T00:16:07.437
> 
> 标签：jquery, ruby-on-rails-3, forms

我有一个`dashboard_controller`我试图允许用户为其他控制器提交三个表单的地方。`div`当我单击链接时，我正在使用 jQuery 将表单加载到 a中。jQuery 工作正常，我可以根据单击的链接查看表单。但是，当我实际提交表单时，出现错误：

```
undefined method `model_name' for NilClass:Class 
```

这是`dashboard_controller`动作：

```
class DashboardController < ApplicationController
  def show
    @message = Message.new
    @image = Image.new
    @link = Link.new
  end
end 
```

这是我在开始时加载的 jQuery 以显示我的表单：

```
$("#forms").html("#{j render :partial => "messages/form"}") 
```

这是单击链接时我拥有的 jQuery：

```
$("#add_image").live('click', function(){
  $("#forms").html("#{j render :partial => "images/form"}")
}) 
```

这是我单击的链接，呈现表单：

```
=link_to 'Image', "#", :class => "btn btn-info btn-medium inactive", :id => "add_image" 
```

现在，如果我单击我的`Image`选项卡，则会加载图像表单。但是当我在该表单上单击提交时，会引发错误。谁能解释帮助我弄清楚如何解决这个问题？

**编辑：**我有这个工作，但感觉就像一个严重的黑客攻击。在我的其他有创建操作的控制器中，我只是将一个变量分配给一个新对象。因此，例如，如果我尝试创建一条新消息，则`create`操作`messages_controller`将如下所示：

```
def create
  @link = Link.new
  @image = Image.new
  @message = Message.new(params[:message])
  ...
end 
```

# c++ - Qt：LNK2001 和 LNK2019 跨源文件实现信号/槽后出现错误

> ID：10525912
> 
> 赞同：4
> 
> 时间：2012-05-10T00:16:07.870
> 
> 标签：c++, qt, linker, qt-creator

这包括我的 MainWindow 文件中的声明，为简洁起见，我没有包含库包含。我在这两个库和所有必需的库中都包含了 QObject.h。在包含第二个连接调用之前，它编译得很好。第一个 Ctrl-C 处理程序工作正常。

`I took out my code, thought my employer wouldn't like it. See the appropriate response below!`

我正在使用 QT Creator。当我用谷歌搜索这些错误消息时，提供的大多数解决方案都围绕着修复 make 命令/路径或在 Visual Studio 中编译时发生的类似问题。

我重申，这些错误仅在包含全局 GCamera 和 MainWindow 的第二次连接调用之后才出现。该程序在此之前正在编译和运行。

提前感谢您，对于冗长的帖子，我深表歉意，并期待收到任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:09:44.127

您应该有一个名为的文件，该文件`moc_tcamera.cpp`在构建目录中实现了缺少的符号。

如果它不存在，您应该“运行 qmake”，然后“重建”您的项目（这两个操作都在 Qt Creator Build 菜单中）。

### 发生错误的原因：

qmake 为所有包含宏的源文件的 Makefile 添加一个 moc（Qt 的元对象编译器）步骤，`Q_OBJECT`或者`Q_GADGET`，这样的文件被称为“mocable”。一旦文件被检测为可移动或不可移动，该状态不会改变，直到重新运行 qmake。

QtCreator 仅在 .pro 文件更改时（例如，添加或删除文件时）自行运行 qmake。

`Q_OBJECT`这意味着您可能在文件中没有宏的情况下编译了一次项目`tcamera.h`，然后添加了该宏。并且因为在添加对 的调用之前不需要元对象`connect`，VC++ 没有尝试解决丢失的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:47:22.063

例如，当您在 .pro 文件中包含标头而不是源文件时，您可能会收到链接器错误。例如在您的 .pro 文件中：

```
HEADERS += t_camera.h foo.h
SOURCES += foo.cpp 
```

会导致您出现链接器错误，通常是 LNK2001 和 LNK2019。但是，IIRC QtCreator 会为您管理 .pro 文件，对吗？换句话说，确保您的 .pro 文件是正确的。如果不是，我会感到惊讶，但 .pro 文件中的错误可能会导致您看到的问题。

# json - fromJson GSON 复杂类

> ID：10525913
> 
> 赞同：0
> 
> 时间：2012-05-10T00:16:12.547
> 
> 标签：json, class, object, gson

我有以下代码。

```
public class SomeClass {

    private List<SomeOtherClass> referrals;

    public  List<SomeOtherClass> getReferrals() {
        return referrals;
    }

    public void setReferrals( List<SomeOtherClass> referrals) {
        this.referrals = referrals;
    }

} 
```

我有一个从电线上读取的 json。它的格式正确。我使用 GSON

我的问题是：

当我这样做时 fromJson(jsonString,SomeClass.class); 它给出了一个例外。

如果我不使用 `List<SomeOtherClass>`而是`List<String>`用于推荐。（换句话说，原语）

并遍历每个 String 并创建 SomeOtherClass 对象，它工作正常。

为什么我不能只使用 fromJson(jsonString,SomeClass.class);

# android - 如何使用 Android ViewPager

> ID：10525914
> 
> 赞同：3
> 
> 时间：2012-05-10T00:16:17.147
> 
> 标签：android, android-viewpager

我正在计划将一些应用程序从 Windows Phone 7 移植到 Android。通过一些博客，我发现了一个名为 ViewPager 的“额外”android 控件，它看起来像是 WP7 Pivot 控件的穷人版本。我想尝试使用此控件，因为我的 WP7 应用程序使用 Pivot。

我计划以 Android 2.3.3 (API 10) 为目标，因为[http://developer.android.com/resources/dashboard/platform-versions.html](http://developer.android.com/resources/dashboard/platform-versions.html)上的信息告诉我，任何更高的级别都可以在相对较少的手机上运行。所以，我的 Eclipse 是为那个级别设置的。

使用 Eclipse SDK 管理器，我尝试添加 Extras Android 支持包，但它不会添加给出下面粘贴的错误。我不知道所有这些错误是什么意思，但我想知道我是否需要运行 API 11 才能使用兼容性包（即 android 支持包）？

所以，我想我的最后一个问题是：如果我的目标是 Android 2.3.3，我可以使用 VeiwPager 控件吗？此外，是否有任何可下载的使用 viewPager 的完整解决方案？我能找到的只是显示代码片段的“教程”。谢谢，院长

```
Preparing to install archives
Downloading Android SDK Platform-tools, revision 11
File not found: C:\Program Files (x86)\Android\android-sdk\temp\platform-tools_r11-windows.zip (Access is denied)
Downloading Documentation for Android SDK, API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\docs-15_r02.zip (Access is denied)
Downloading SDK Platform Android 4.0.3, API 15, revision 3
File not found: C:\Program Files (x86)\Android\android-sdk\temp\android-15_r03.zip (Access is denied)
Downloading Samples for SDK API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\samples-15_r02.zip (Access is denied)
Downloading ARM EABI v7a System Image, Android API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\sysimg_armv7a-15_r02.zip (Access is denied)
Downloading Sources for Android SDK, API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\sources-15_r02.zip (Access is denied)
Downloading Android Support package, revision 8
File not found: C:\Program Files (x86)\Android\android-sdk\temp\support_r08.zip (Access is denied)
Skipping 'Android SDK Tools, revision 19'; it depends on 'Android SDK Platform-tools, revision 11' which was not installed.
Done. Nothing was installed. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T00:20:45.530

> 我想知道我是否需要运行 API 11 才能使用兼容性包（即 android 支持包）？

不。

> 如果我的目标是 Android 2.3.3，我可以使用 VeiwPager 控件吗？

是的。

> 此外，是否有任何可下载的使用 viewPager 的完整解决方案？

[这是一个小示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments)，显示 10个小`EditText`部件，每页一个，在`ViewPager`.

[这是一个更复杂的应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/EmPubLite/T12-Book)`WebView`，实现了一个数字图书阅读器，在 a 中每页有一章（在 a 中） `ViewPager`，但在我的一本书之外它可能没有多大意义。

关于您的错误，我的猜测是您通过自安装`.EXE`文件安装了 Android SDK，在这种情况下，您需要以管理员权限运行 SDK Manager 来更新它，IIRC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:30:00.770

稍微详细说明一下马克的观点：在你的 AndroidManifest.xml 中，你应该把这一行：

```
 <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" /> 
```

其中 15 可以替换为编译时最新的 API 级别，而 8 是您要运行的最低 API 级别。在撰写本文时，API 级别 8 (Froyo) 及更高级别将允许您针对大约 94% 的设备人群。

Android 支持包 (V4) 让您可以调用一系列有用的函数，直至 API 级别 4，包括[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。尝试构建[Suport4Demos](http://developer.android.com/resources/samples/Support4Demos/index.html)示例应用程序；它包括一个不错的 ViewPager 实现。为此，在 Eclipse 中，选择：New > Android Sample Project > Android 4.0.3 > Support4Demos > Finish。然后构建并运行项目。

# php - 如何强制 Facebook 分享按钮以不同的格式分享网址？

> ID：10525918
> 
> 赞同：1
> 
> 时间：2012-05-10T00:17:03.640
> 
> 标签：php, facebook

我使用以下分享按钮到我的页面。不幸的是，我通过我的页面共享的网址中有希腊字母“如下”：

```
http://www.domain.com/gb/news/12/13311/the-name-of-article-written-in-greek.htm 
```

我猜这会导致 facebook 不显示页面的任何图像或内容的问题。它只显示网址。

我发现如果我手动将上面的网址剪切为

```
http://www.domain.com/gb/news/12/13311/ 
```

共享正常工作并显示当前页面。一切都很好。

*所以我的问题是*我应该如何强制facebook分享按钮在修改后分享页面？我知道通过使用`var_dump($url['dirname']);`我得到我想要的格式。

![在此处输入图像描述](../Images/925f7c8bf2c017fafc66628c3d3d6493.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:24:52.773

根据[FB docs](http://developers.facebook.com/docs/share/)`SHARE_URL` ，您可以通过填充a 标签属性来指定您希望的任何 URL ：

```
<a name="fb_share" type="button" share_url="<?php echo $url['dirname'] ?>"></a> 
```

顺便说一句，你指的是一个[规范](http://en.wikipedia.org/wiki/Canonical_link_element)的网址，修剪这个：

```
http://www.domain.com/gb/news/12/13311/the-name-of-article-written-in-greek.htm 
```

对此：

```
http://www.domain.com/gb/news/12/13311/ 
```

规范 url 的美妙之处在于它们不会改变，即使您决定更改漂亮 url 版本中的关键字。对站点地图有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:26:10.617

您可以使用 FaceBook OG（开放图）标签告诉 Facebook 页面的“真实”网址是什么。如果您对 facebook 分享很认真，那么您应该已经在使用它们了。把这些放在你的

```
<meta property="og:title" content="Titeel Goes Here"/>
<meta property="og:url" content="URL goes here"/> 
```

验证 Facebook 在此处看到的内容：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug 。您还可以添加缩略图和管理员（这样您就可以更好地查看喜欢和分享的人）。

# python - numpy.array 布尔到二进制？

> ID：10525921
> 
> 赞同：18
> 
> 时间：2012-05-10T00:17:21.577
> 
> 标签：python, numpy

我正在尝试在 python27 中重写 matlab 代码。有一个matlab行如下：

```
vector_C = vector_A > vector_B; 
```

如果我尝试使用 numpy 在 python 中编写它，它将是相同的，但结果将是一个布尔数组而不是二进制文件。我希望结果是二进制文件。有没有办法让它返回二进制文件或者我应该每次都手动转换？有没有快速转换的方法？我是 python 新手。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T02:12:18.073

即使`vector_C`可能有`dtype=bool`，您仍然可以进行如下操作：

```
In [1]: vector_A = scipy.randn(4)

In [2]: vector_B = scipy.zeros(4)

In [3]: vector_A
Out[3]: array([ 0.12515902, -0.53244222, -0.67717936, -0.74164708])

In [4]: vector_B
Out[4]: array([ 0.,  0.,  0.,  0.])

In [5]: vector_C = vector_A > vector_B

In [6]: vector_C
Out[6]: array([ True, False, False, False], dtype=bool)

In [7]: vector_C.sum()
Out[7]: 1

In [8]: vector_C.mean()
Out[8]: 0.25

In [9]: 3 - vector_C
Out[9]: array([2, 3, 3, 3]) 
```

所以，简而言之，你可能不需要做任何额外的事情。

但是，如果您必须进行转换，您可以使用`astype`：

```
In [10]: vector_C.astype(int)
Out[10]: array([1, 0, 0, 0])

In [11]: vector_C.astype(float)
Out[11]: array([ 1.,  0.,  0.,  0.]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T02:11:22.963

您可以强制 numpy 将元素存储为整数。它将 0 视为假，将 1 视为真。

```
import numpy

vector_C = numpy.array( vector_A > vector_B, dtype=int) ; 
```

# python - 分割路径的标准python函数？

> ID：10525924
> 
> 赞同：0
> 
> 时间：2012-05-10T00:17:59.477
> 
> 标签：python, path, standard-library

### 注意：请不要为我编码。 *我已经有一个家庭滚动功能*来执行我在下面描述的操作。

***标准 Python 库***中是否有一个函数将绝对路径作为参数，并在删除所有冗余路径组件（例如`./`）、解析位等之后返回其所有“原子”路径组件的元组`../`？例如，给定 Unix path `/s//pam/../ham/./eggs`，输出应该是

```
('/', 's', 'ham', 'eggs') 
```

并给定 Windows 路径`C:\s\\pam\..\ham\.\eggs`，输出应该是

```
('C:', '\\', 's', 'ham', 'eggs') 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:22:05.640

与标准库一样接近（AFAIR）：

```
 >>> import os
   >>> help(os.path.split)
    Help on function split in odule ntpath:

    split(p)
        Split a pathname.
        Return tuple (head, tail) where tail is everything after the final slash.
        Either part may be empty. 
```

这并不能解决您的用例，但可以轻松扩展它。有关更多信息，请参阅评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:27:18.520

没有一个函数可以做你想做的事……主要是因为从路径操作的角度来看，你所问的没有任何意义（因为丢弃`..`会以有意义的方式改变路径）。

您可以按照以下方式做一些事情：

```
[x for x in path.split(os.path.sep) if x not in ['.', '..']] 
```

这给了你：

```
>>> path='/s//pam/../ham/./eggs'
>>> [x for x in path.split(os.path.sep) if x not in ['.', '..']]
['', 's', '', 'pam', 'ham', 'eggs'] 
```

和：

```
>>> path=r'C:\s\\pam\..\ham\.\eggs'
>>> [x for x in path.split(os.path.sep) if x not in ['.', '..']]
['C:', 's', '', 'pam', 'ham', 'eggs'] 
```

（只要`os.path.sep`是`\`）。

这显然不是您要寻找的东西，但也许它指向了正确的方向。

# ruby-on-rails - geocode_ip_address 特定控制器除外

> ID：10525925
> 
> 赞同：1
> 
> 时间：2012-05-10T00:18:16.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, geokit

我已`geocode_ip_address`在 ApplicationController 中添加，因此我可以从他们的会话中获取用户位置信息。

我有一些控制器，我不希望它们根据 Geokit 进行检查。它确实会减慢应用程序的速度，并且不需要在那里进行地理检查。

因为它被称为 like`geocode_ip_address`而不是 as`before_filter`我无法使用`skip_before_filter`

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:34:31.163

它实际上使用了 store_ip_location 过滤器，所以你可以把

```
skip_before_filter :store_ip_location 
```

话虽如此，它将地理代码的结果存储在 cookie 中，在进行服务调用之前正在检查该 cookie，因此后续调用不会对性能产生太大影响

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T00:30:19.550

您可以根据您所在的控制器有选择地不调用代码，如下所示：

```
unless ["controller1", "controller2", "etc"].member?(params[:controller])
 geocode_ip_address
end 
```

将您不希望代码运行的控制器的名称放在列表中，并且不会在这些控制器中调用它。

您还可以创建一个常量，它是一个控制器列表，如下所示：

```
CONTROLLERS_TO_NOT_FILTER_BY_GEOCODE = ["controller1", "controller2", "etc"]

unless CONTROLLERS_TO_NOT_FILTER_BY_GEOCODE.member?(params[:controller])
 geocode_ip_address
end 
```

# parsing - 解析制表符分隔的字符串

> ID：10525926
> 
> 赞同：1
> 
> 时间：2012-05-10T00:18:18.550
> 
> 标签：parsing, lisp, common-lisp, csv

我在弄清楚如何将制表符分隔的字符串分隔成数据块时遇到了一些麻烦，例如，如果我有一个正在读取的文本文件看起来像这样

```
a1     b1     c1     d1     e1
a2     b2     c2     d2     e2 
```

我读了我文件的第一行并得到一个字符串

```
"a1     b1     c1     d1      e2" 
```

我想把它分成 5 个变量 a、b、c、d 和 e，或者创建一个列表（abcde）。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:26:48.277

尝试将括号连接到输入字符串的前后，然后使用`read-from-string`（我假设您使用的是 Common Lisp，因为您标记了问题剪辑）。

```
(setf str "a1   b1      c1      d1      e2")
(print (read-from-string (concatenate 'string "(" str ")"))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:29:57.137

还有另一种解决方法（也许更强大一点），您也可以轻松修改它，以便在调用回调后可以在字符串中“设置”一个字符，但我没有这样做，因为看来你不需要这种能力。另外，在后一种情况下，我宁愿使用宏。

```
(defun mapc-words (function vector
                  &aux (whites '(#\Space #\Tab #\Newline #\Rubout)))
  "Iterates over string `vector' and calls the `function'
with the non-white characters collected so far.
The white characters are, by default: #\Space, #\Tab
#\Newline and #\Rubout.
`mapc-words' will short-circuit when `function' returns false."
  (do ((i 0 (1+ i))
       (start 0)
       (len 0))
      ((= i (1+ (length vector))))
    (if (or (= i (length vector)) (find (aref vector i) whites))
        (if (> len 0)
            (if (not (funcall function (subseq vector start i)))
                (return-from map-words)
                (setf len 0 start (1+ i)))
            (incf start))
        (incf len))) vector)

(mapc-words
 #'(lambda (word)
     (not
      (format t "word collected: ~s~&" word)))
 "a1     b1     c1     d1     e1
a2     b2     c2     d2     e2")

;; word collected: "a1"
;; word collected: "b1"
;; word collected: "c1"
;; word collected: "d1"
;; word collected: "e1"
;; word collected: "a2"
;; word collected: "b2"
;; word collected: "c2"
;; word collected: "d2"
;; word collected: "e2" 
```

如果您想在阅读字符串时修改字符串，可以使用以下示例宏，但我对它并不完全满意，所以也许有人会想出一个更好的变体。

```
(defmacro with-words-in-string
    ((word start end
           &aux (whites '(#\Space #\Tab #\Newline #\Rubout)))
     s
     &body body)
  `(do ((,end 0 (1+ ,end))
        (,start 0)
        (,word)
        (len 0))
       ((= ,end (1+ (length ,s))))
     (if (or (= ,end (length ,s)) (find (aref ,s ,end) ',whites))
         (if (> len 0)
             (progn
               (setf ,word (subseq ,s ,start ,end))
               ,@body
               (setf len 0 ,start (1+ ,end)))
             (incf ,start))
         (incf len))))

(with-words-in-string (word start end)
    "a1     b1     c1     d1     e1
a2     b2     c2     d2     e2"
(format t "word: ~s, start: ~s, end: ~s~&" word start end)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T19:57:00.780

假设它们是选项卡（不间隔），那么这将创建一个列表

```
(defun tokenize-tabbed-line (line)
  (loop 
     for start = 0 then (+ space 1)
     for space = (position #\Tab line :start start)
     for token = (subseq line start space)
     collect token until (not space))) 
```

结果如下：

```
CL-USER> (tokenize-tabbed-line "a1  b1  c1  d1  e1")
("a1" "b1" "c1" "d1" "e1") 
```

# php - 如何将 PHP Simple DOM Parser 用于具有 id 和 class 的 div？

> ID：10525927
> 
> 赞同：1
> 
> 时间：2012-05-10T00:18:19.547
> 
> 标签：php, dom

我将使用什么代码来获取包含 id 和类的 div 的信息？例如，我将如何使用 PHP Simple DOM Parser 来查看这个 div？

```
<div id="the-id" class="the-class"> 
```

我知道`$html->find('div[id=the-id]', 0);`如果 div 中只有一个 id，我会使用它，但是如何解析具有类和 id 的 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:33:51.317

你能扩展类似css的选择器吗？

我没有测试过，但我认为以下任何一项都应该产生你想要的结果。

```
$html->find('div.the-class[id=the-id]', 0);
$html->find('div.the-class#the-id', 0);
$html->find('div[id=the-id][class=the-class]', 0); // only if that's the only
$html->find('div[id=the-id][class~=the-class]', 0); // even if there's multiple classes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:23:06.817

简单的 dom 解析器查询字符串就像 css 一样工作。要查找 id 为“the-id”的 div，请使用`->find('div#the-id')`. 大概，您有​​唯一的 ID，这就是您所需要的。

如果你真的想要，你可以使用`->find('div#the-id.the-class')`，但通常没有必要那么具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:26:55.047

```
$html->find('#the-id .the-class', 0);
//or
$html->find('[id=the-id] [class=the-class]', 0); 
```

用空格分隔元素。

```
// Find all <li> in <ul>
$es = $html->find('ul li');

// Find Nested <div> tags
$es = $html->find('div div div');

// Find all <td> in <table> which class=hello
$es = $html->find('table.hello td');

// Find all td tags with attribite align=center in table tags
$es = $html->find(''table td[align=center]');

// Find all <li> in <ul>
foreach($html->find('ul') as $ul)
{
       foreach($ul->find('li') as $li)
       {
             // do something...
       }
}

// Find first <li> in first <ul>
$e = $html->find('ul', 0)->find('li', 0); 
```

[http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T00:27:08.450

您确定要在 php 中执行此操作吗？在 javascript 中执行此操作非常简单

```
var elements = document.getElementsByClassName("the-class");
for (var element in elements)
{
    var id = element.getAttribute("id");
} 
```

或者...

```
var elements = document.getElementsByTagName("div");
for (var element in elements)
{
    var id = element.getAttribute("id");
    var class_name = element.get.Attribute("class");
} 
```

# dart - 有没有办法在 Dart 的类中动态调用方法或设置实例变量？

> ID：10525929
> 
> 赞同：4
> 
> 时间：2012-05-10T00:18:24.770
> 
> 标签：dart, dart-mirrors, dynamic-method

我希望能够用 Dart 类构造函数做这样的事情：

```
class Model {

  // ... setting instance variables

  Model(Map fields) {
    fields.forEach((k,v) => this[k] = v);
  }

} 
```

显然，这是行不通的，因为`this`没有`[]=`方法。

有没有办法让它发挥作用，或者它根本就不是做事的“飞镖方式”？如果不是，你能告诉我什么是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:16:11.153

您可以使用[镜子](https://api.dart.dev/be/dart-mirrors/dart-mirrors-library.html)：

```
InstanceMirror im = reflect(theClassInstance);

im.invoke('methodName', ['param 1', 2, 'foo']).then((InstanceMirror value) {
  print(value.reflectee); // This is the return value of the method invocation.
}); 
```

所以，在你的情况下，你可以这样做（因为你有二传手）：

```
import 'dart:mirrors';

class Model {
  Model(Map fields) {
    InstanceMirror im = reflect(this);
    fields.forEach((k, v) => im.setField(k, v)); // or just fields.forEach(im.setField);
  }
} 
```

的文档[`InstanceMirror`](https://api.dart.dev/be/dart-mirrors/InstanceMirror-class.html)可能会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:18:00.707

目前没有。在这样的事情（希望如此）成为可能之前，您将不得不等待反射到达 Dart。在此之前，您最好的选择可能是在构造函数中进行。或者，您可以尝试使用[JsonObject](https://github.com/chrisbu/dartwatch-JsonObject)之类的东西，它允许您直接从 Map 初始化它（有关其工作原理的说明，请查看[此](http://dartwatch.com/index.php/2012/04/jsonobject-gets-more-features-implements-map/)博客文章）。

# properties - 如何在 WebSphere Application Server 8 中使属性文件可用于 EJB

> ID：10525930
> 
> 赞同：2
> 
> 时间：2012-05-10T00:18:26.497
> 
> 标签：properties, ejb, websphere

我按照 Rational Application Developer for WebSphere 8.0.4 帮助中的教程从 WSDL 文件创建了 JAX-WS Web 服务和 EJB 框架。

它创建了一个 EJB 项目来包含我的 EJB 代码。它创建了一个 EJBEar 项目来构建一个 ear 文件。它创建了一个RouterWebProject 来创建一个war 文件。

RouterWebProject 提供 servlet 信息，以便我可以向 servlet 发布 HTTP soap 请求，以路由到我在 EJB 中的 Web 服务代码。

EJB 服务代码调用同一 EJB 项目中的一个类，该类使用 ResourceBundle 读取名为 AppSDKExamples.properties 的属性文件

```
static {
    ResourceBundle props = ResourceBundle.getBundle("AppSDKExamples", Locale.getDefault());
    brokerPartnerId = props.getString("broker.partner.id");
    buyPartnerId    = props.getString("svc.dealer.partner.id");
    sellPartnerId   = props.getString("platform.partner.id");
    sellPartnerId2  = props.getString("platform.partner.id2");
    accountNumber   = props.getString("account.number");
} 
```

我已经尝试将 AppSDKExamples.properties 文件放在我能想到的任何地方，但我总是得到一个 java.util.MissingResourceException。

如何使该属性文件可用于 EJB 代码？

目前 EJB 耳朵看起来像这样：

*   lib/AppSDKExamples.properties
*   lib/AppSDKExamples_en_US.properties
*   lib/其他 jar 文件
*   META-INF/MANIFEST.MF（这不包含类路径，我不知道如何设置它。）
*   EJB.jar
*   WebProject.war

EJB.jar 看起来像这样：

*   com/activant/web/services/examples/class 文件，用于查找属性文件
*   Web 服务的 com/activant/web/services/iaptest/class 文件
*   META-INF/MANIFEST.MF（在类路径中有 AppSDKExamples.properties 和 AppSDKExamples_en_US.properties）
*   AppSDKExamples.properties
*   AppSDKExamples_en_US.properties

战争文件如下所示：

*   lib 包含与 EJB.jar 文件相同的 jar 文件
*   META-INF（类路径：/lib EJB.jar）
*   WEB-INF/classes 这个文件夹包含两个属性文件。
*   WEB-INF/lib 这个文件夹包含两个属性文件。
*   WEB-INF/ibm-web-bnd.xml
*   WEB-INF/ibm-web-ext.xml
*   WEB-INF/web.xml

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:24:38.740

如果属性文件位于 EJB 的根目录，那么 EJB 类应该能够找到属性文件。如果您在启用 Java 2 安全性的情况下运行，那么您需要授予 FilePermission；${webComponent} 和 ${ejbComponent} 参见 PROFILE_HOME/config/cells/CELL/nodes/NODE/app.policy。

简单地将属性文件放在 EAR/lib 中是行不通的，因为 EAR/lib/ 目录不在类路径中，只有其中的 .jar 文件在类路径中。添加`Class-Path: lib/`到 EJB jar MANIFEST.MF 可能会起作用，但 JavaEE 规范不需要目录类路径，因此我不知道 WebSphere Application Server 是否支持它们。

直接在 MANIFEST.MF 类路径中引用属性文件也不起作用，因为仅支持 JAR 和目录（有关目录的 JavaEE 警告请参见上文）。

一般来说，最好从`/lib`. 从 JavaEE 平台规范中不清楚这是否应该引用`lib`EAR 中的目录或机器文件系统根目录中的目录。

# sql-server-2008 - 商业智能开发工作室是否有速成版？

> ID：10525936
> 
> 赞同：3
> 
> 时间：2012-05-10T00:20:26.510
> 
> 标签：sql-server-2008, business-intelligence

无论如何，是否可以将 Business Intelligence Development Studio 与 SQL Server 2008 R2 Express Edition 一起使用？或者它是否适用于企业版和开发者版？如果有可能有 BIDS 独立分期付款？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T00:28:48.747

根据下面的 MSDN 链接，`Business Intelligence Development Studio (BIDS)`可在*SQL Server 2008 R2 Express with Advanced Services*中使用。

[**SQL Server 2008 R2 各版本支持的功能 - 开发工具**](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx#Dev_tools)

您可以从以下链接下载 Express with Advanced Services。请注意，有安装`32-bit`的`64-bit`版本。您需要选择正确的版本。

[**Microsoft SQL Server2008 R2 RTM - Express with Advanced Services**](http://www.microsoft.com/en-us/download/details.aspx?id=25174)

就个人而言，我还没有尝试过 Express with Advanced Services 版本。因此，我不确定 Express 版可以进行多少 BI 开发。

# crystal-reports - 水晶报表栏目布置

> ID：10525938
> 
> 赞同：0
> 
> 时间：2012-05-10T00:20:29.277
> 
> 标签：crystal-reports, formatting

我目前正在研究一个水晶报表，其中我使用三个不同的命令。我使用第一个命令显示报告标题的详细信息，而其他两个命令包含报告正文本身的两组数据。

我的问题是报告的格式应该分为两组，其中第一组将出现在标题之后，第二组将出现在第一组之后。为了让您更好地了解它，请参考以下示例：

```
CLASS CODE: AC01
SECTION   : A
TEACHER   : Ms. Teacher 1

GROUP 1
      NAME           AGE           BIRTHDATE
    Student 1        19            12-01-1990
    Student 2        22            08-04-1987
    Student 3        20            07-07-1989

SCHEDULE
      TIME           DAY             SUBJECT          
    10-11 AM         MWF           HISTORY 101
    12-01 PM         MWF           BIOLOGY 202
    02-04 PM         TTh           BIOLOGY LAB 
```

请注意，我将 TextTools 用于 GROUP 1 和 SECTION 标签。我尝试添加一个新标题并将“组 1”放入其中，然后前面的详细信息部分包含第 1 组的数据。但是，我无法在详细信息部分下方添加另一个标题，以便我可以开始使用 SCHEDULE。

有没有解决这个问题的方法？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:41:11.887

好的，

我做了一些其他的研究，这就是我得到的：[http ://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=12033](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=12033)

显然，我不得不使用 SUBREPORTS。

谢谢您的帮助！:)

# .htaccess - 在我的服务器上创建一个目录进行测试？

> ID：10525941
> 
> 赞同：0
> 
> 时间：2012-05-10T00:21:04.017
> 
> 标签：.htaccess

我问我应该如何在我的网站上测试东西而不只是实时发布它们，其中一个建议是在网站上建立一个与 public_html 相同的目录，我可以在其中测试东西并在需要时移动到主站点。这将防止必须将本地服务器配置为与托管服务器相同的问题。

我网站上的许多脚本、css、图像等都有像“/images/image.png”这样的路径。如果我将所有内容都放在 public_html 中一个名为“dev”的目录中，我可以使用一些 .htaccess 魔法来使 /dev 中的任何名为 form 的链接指向“/images”之类的东西转到“/dev/images”吗？

我不完全理解 .htaccess 的上下文，但我可以这样做：

```
Redirect (?<!/dev)(.*) dev/$1 
```

# windows - 需要mac应用商店吗？

> ID：10525943
> 
> 赞同：1
> 
> 时间：2012-05-10T00:21:27.690
> 
> 标签：windows, macos, app-store, publish

如果我为 Mac OS X 制作应用程序，我是否需要将其放在 Mac 应用商店中，或者我可以在我的网站上免费分发它吗？

那么Windows呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:24:47.820

不，没有这样的要求，您可以随意分发您的程序。

您**可能**希望使用 App Store 作为一种分发方式，但要做到这一点，您必须符合各种 Apple 要求。

我不确定 Windows 的等价物是什么，但同样没有这样的要求。想想数以百万计的独立应用程序，这些应用程序与任何集中式商店都没有关联，我想说大多数仍然属于这一类。

2018 年更新 - 随着安全问题的增加以及复制 iOS App Store 成功的愿望，Apple 越来越难以从应用商店外运行应用程序。您可以获得数字证书，并成为值得信赖的开发人员，但很明显，如果您希望用户能够轻松运行您的应用程序，那么 AppStore 的未来或破产。请注意，通过简单的设置访问，它仍然很可能安装和运行任何未经授权的应用程序，而且很可能总是如此，这显然对许多用户来说是一个很大的威慑力，因为它应该是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T00:27:20.440

您现在不必在 Mac App Store 上分发它，但下一个 OS X 可能会改变，请务必查看：[https ://developer.apple.com/library/mac/#documentation/Security/Conceptual /CodeSigningGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T00:23:51.473

您可以随意分发它。它不需要在 Mac App Store 中。Windows 也是如此。

# validation - codeigniter + 要求密码中包含字母和数字

> ID：10525944
> 
> 赞同：7
> 
> 时间：2012-05-10T00:21:31.090
> 
> 标签：validation, codeigniter, passwords, codeigniter-2

我想使用表单验证来要求同时包含字母和数字字符的密码。到目前为止，这是我想出的：

```
$this->form_validation->set_rules('password', 'Password', 'required|matches[passconf]|min_length[8]|alpha_numeric'); 
```

问题是“alpha_numeric”要求密码只包含字母或数字，它不需要两者。在这里寻求更强的密码选项。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T00:26:52.567

您可以在控制器中设置[回调：](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)

```
public function password_check($str)
{
   if (preg_match('#[0-9]#', $str) && preg_match('#[a-zA-Z]#', $str)) {
     return TRUE;
   }
   return FALSE;
} 
```

然后，更新您的规则以使用它：

```
$this->form_validation->set_rules('password', 'Password', 'required|matches[passconf]|min_length[8]|alpha_numeric|callback_password_check'); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-16T07:46:44.150

可以在其他项目中轻松重用并本地化验证规则的替代解决方案是扩展 Form_validation 类。

在 application/libraries/ 创建一个名为 MY_Form_validation.php 的文件，其中“MY”是您在 application/config/config.php 中设置的子类前缀。

该类看起来像：

```
class MY_Form_validation extends CI_Form_validation
{
    /**
     * Verify that a string contains a specified number of
     * uppercase, lowercase, and numbers.
     *
     * @access public
     *
     * @param String $str
     * @param String $format
     *
     * @return int
     */
    public function password_check($str, $format)
    {
        $ret = TRUE;

        list($uppercase, $lowercase, $number) = explode(',', $format);

        $str_uc = $this->count_uppercase($str);
        $str_lc = $this->count_lowercase($str);
        $str_num = $this->count_numbers($str);

        if ($str_uc < $uppercase) // lacking uppercase characters
        {
            $ret = FALSE;
            $this->set_message('password_check', 'Password must contain at least ' . $uppercase . ' uppercase characters.');
        }
        elseif ($str_lc < $lowercase) // lacking lowercase characters
        {
            $ret = FALSE;
            $this->set_message('password_check', 'Password must contain at least ' . $lowercase . ' lowercase characters.');
        }
        elseif ($str_num < $number) //  lacking numbers
        {
            $ret = FALSE;
            $this->set_message('password_check', 'Password must contain at least ' . $number . ' numbers characters.');
        }

        return $ret;
    }

    /**
     * count the number of times an expression appears in a string
     *
     * @access private
     *
     * @param String $str
     * @param String $exp
     *
     * @return int
     */
    private function count_occurrences($str, $exp)
    {
        $match = array();
        preg_match_all($exp, $str, $match);

        return count($match[0]);
    }

    /**
     * count the number of lowercase characters in a string
     *
     * @access private
     *
     * @param String $str
     *
     * @return int
     */
    private function count_lowercase($str)
    {
        return $this->count_occurrences($str, '/[a-z]/');
    }

    /**
     * count the number of uppercase characters in a string
     *
     * @access private
     *
     * @param String $str
     *
     * @return int
     */
    private function count_uppercase($str)
    {
        return $this->count_occurrences($str, '/[A-Z]/');
    }

    /**
     * count the number of numbers characters in a string
     *
     * @access private
     *
     * @param String $str
     *
     * @return int
     */
    private function count_numbers($str)
    {
        return $this->count_occurrences($str, '/[0-9]/');
    }
} 
```

然后设置规则：

```
$this->form_validation->set_rules('password', 'Password', 'required|matches[passconf]|min_length[8]|alpha_numeric|password_check[1,1,1]'); 
```

该规则可以以许多不同的方式使用。'password_check[1,1,1]' 要求密码包含小写、大写和数字字符。'password_check[5,0,1]' 需要 5 个大写字符和密码中的一个数字。

这样做的好处是：

1.  您的所有规则都包含在一个易于移植的类中
2.  诸如“count_occurences”之类的子验证函数可以很容易地用于其他验证函数。
3.  可以修改该类以使用 application/language/ 中的语言文件

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-25T20:56:03.167

使用 CI 2.2.0，您可以添加一些参数，例如“alpha_numeric”参数，注意管道（级联）参数：

```
function check_password(){
 $this -> form_validation -> set_rules('password', 'New Password', 'required|max_length[15]|min_length[6]|alpha_numeric');
 $this -> form_validation -> set_rules('passconf', 'Re-enter', 'required|matches[password]');

 if ($this -> form_validation -> run() == FALSE){
  doStuff();
 } else {
  doOtherStuff();
 }
} 
```

[在本页](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)底部附近查找规则参考。

# r - 如何在ggplot2的绘图区域之外绘制线条？

> ID：10525957
> 
> 赞同：27
> 
> 时间：2012-05-10T00:22:13.367
> 
> 标签：r, ggplot2

我用**ggplot2**创建了这个图：

![在此处输入图像描述](../Images/d8a29352bbaab60b7d6d0472d7373e95.png)

外线需要对应Y 刻度，（即Text1 的线的Y 位置应为100 和85）。我可以做到这一点的唯一方法是在图形右侧绘制一个与条形图相同比例的空白图，然后使用注释函数绘制线条。另一种方法是简单地“手动”用 绘制线条`grid.lines`，但是 的坐标`grid.lines`不会对应于绘图的 Y 比例。

是否可以使用不同的方法以某种方式绘制这些线？我认为必须使用`grid.lines`. 我怎样才能将条形图的 Y 坐标传递给`grid.lines`？

以下是用于创建此图的最少代码：

```
library (ggplot2)
test= data.frame(
  group=c(rep(1,6), rep(2,6)),
  subgroup=c( 1,1,1,2,2,2,1,1,1,2,2,2),
  category=c( rep(1:3, 4)),
  count=c( 10,80,10,5,90,5,  10,80,10,5,90,5   )
  )

qplot(subgroup, 
      count, 
      data=test, 
      geom="bar", 
      stat="identity",
      fill =category,  
      facets =  .~ group,  width=0.9)+
      opts(legend.position="none",
           plot.margin = unit(c(0,9,2,0), "lines")) 
```

![在此处输入图像描述](../Images/f72eb66982c1422dfec14fb569caf728.png)

如何在条的右侧绘制线条？

我最近问了一个关于在**ggplot2**绘图区域之外绘制文本的问题，解决方案是使用`gt$layout`and `grid.draw`。

[在 ggplot2 生成的图下方显示文本](https://stackoverflow.com/questions/10014187/displaying-text-below-the-plot-generated-by-ggplot)

可以在这里使用类似的方法吗？据我了解，annotation_custom 仅适用于文本，不适用于其他图形元素。谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T01:53:12.170

**更新**

使用的原始解决方案`annotation_custom`，但一个问题`annotation_custom`是它在所有面板中绘制注释。但是，通过简单的修改，`annotation_custom`可以只在一个面板中绘制（取自 Baptiste's answer [here](https://stackoverflow.com/questions/32807665/removing-one-tablegrob-when-applied-to-a-box-plot-with-a-facet-wrap/32832732#32832732)）

```
annotation_custom2 <- 
function (grob, xmin = -Inf, xmax = Inf, ymin = -Inf, ymax = Inf, data) 
{
  layer(data = data, stat = StatIdentity, position = PositionIdentity, 
        geom = ggplot2:::GeomCustomAnn,
        inherit.aes = TRUE, params = list(grob = grob, 
                                          xmin = xmin, xmax = xmax, 
                                          ymin = ymin, ymax = ymax))
}

library(ggplot2)
library(grid)

 #Some data
test = data.frame(
  group=c(rep(1,6), rep(2,6)),
  subgroup=c( 1,1,1,2,2,2,1,1,1,2,2,2),
  category=c( rep(1:3, 4)),
  count=c( 10,80,10,5,90,5,  10,80,10,5,90,5   )
  )

# base plot
p <- ggplot(test) +
   geom_bar(aes(subgroup, count, fill = category), stat = "identity") +
   facet_grid(. ~ group) +
  theme(legend.position = "none",  
        plot.margin = unit(c(1,5,1,1), "lines"))

# Create the text Grobs
Text1 = textGrob("Text 1")
Text2 = textGrob("Text 2")
Text4 = textGrob("Text 4")

## Add the annotations
# Which panel to attach the annotations
data = data.frame(group=2)

# Text 1
p1 = p + annotation_custom2(Text1,  xmin = 3., xmax = 3., ymin = 85, ymax = 100, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 100, ymax = 100, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 85, ymax = 85, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 85, ymax = 100, data = data)

# Text 2
p1 = p1 + annotation_custom2(Text2,  xmin = 3, xmax = 3, ymin = 20, ymax = 80, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 80, ymax = 80, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 20, ymax = 20, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 20, ymax = 80, data = data)

# Text 4
p1 = p1 + annotation_custom2(Text4,  xmin = 3, xmax = 3, ymin = 0, ymax = 15, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 15, ymax = 15, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 0, ymax = 0, data = data) +
    annotation_custom2(linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 0, ymax = 15, data = data)

# Code to override clipping
gt <- ggplotGrob(p1)
gt$layout[grepl("panel", gt$layout$name), ]$clip <- "off"

# Draw the plot
grid.newpage()
grid.draw(gt) 
```

**原始解决方案**

我认为几乎所有使用创建的 Grob`grid()`都可以在`annotation_custom()`. 可能有更简洁的方法可以做到这一点，但这里有一种使用`grid`,`annotation_custom`和 @baptiste 的代码[从这里](https://stackoverflow.com/questions/9690648/point-clipped-on-x-axis-in-ggplot)覆盖剪辑的方法（如之前的帖子中所示）。

```
library (ggplot2)
library(grid)

test= data.frame(
  group=c(rep(1,6), rep(2,6)),
  subgroup=c( 1,1,1,2,2,2,1,1,1,2,2,2),
  category=c( rep(1:3, 4)),
  count=c( 10,80,10,5,90,5,  10,80,10,5,90,5   )
  )

## EDIT:  Updated qplot() command
p <- qplot(subgroup, count, 
  data = test, geom = "bar",  stat = "identity",
  fill = category,  
  facets = .~ group,  width = 0.9)+
  theme(legend.position="none",  plot.margin = unit(c(0,9,2,0), "lines"))

# Create the text Grobs
Text1 = textGrob("Text 1")
Text2 = textGrob("Text 2")
Text4 = textGrob("Text 4")

# Draw the plot
# Text 1
p1 = p + annotation_custom(grob = Text1,  xmin = 3., xmax = 3., ymin = 85, ymax = 100) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 100, ymax = 100) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 85, ymax = 85) +
    annotation_custom(grob = linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 85, ymax = 100)

# Text 2
p1 = p1 + annotation_custom(grob = Text2,  xmin = 3, xmax = 3, ymin = 20, ymax = 80) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 80, ymax = 80) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 20, ymax = 20) +
    annotation_custom(grob = linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 20, ymax = 80)

# Text 4
p1 = p1 + annotation_custom(grob = Text4,  xmin = 3, xmax = 3, ymin = 0, ymax = 15) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 15, ymax = 15) +
    annotation_custom(grob = linesGrob(), xmin = 2.6, xmax = 2.75, ymin = 0, ymax = 0) +
    annotation_custom(grob = linesGrob(), xmin = 2.75, xmax = 2.75, ymin = 0, ymax = 15)

p1

# Code to override clipping
gt <- ggplot_gtable(ggplot_build(p1))
gt$layout$clip[gt$layout$name=="panel"] <- "off"
grid.draw(gt) 
```

![在此处输入图像描述](../Images/4c98be7052971bc98e6065b8ebb7cc31.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T21:46:35.950

**更新** `opts`已被弃用；改为使用`theme`。

这是另一个解决方案。它解决了`annotation_custom()`在两个面板中绘制 grobs 的问题。它绘制了两个图表：第一个是您的条形图；第二个仅包含注释。`grid.arrange()`然后从`gridExtra`包装中将两者放在一起。但是，您的折线问题仍然存在。

在两个图中仍然存在使 y 轴比例相同的问题。但只要小心，就可以做到。在包含注释的图中，请注意可能对 y 轴刻度产生影响的元素如何未被删除（通过`theme_blank()`，而是隐藏（使用`colour = NA`）。

```
library(ggplot2)
library(gridExtra)
library(grid)

test= data.frame(
  group=c(rep(1,6), rep(2,6)),
  subgroup=c( 1,1,1,2,2,2,1,1,1,2,2,2),
  category=c( rep(1:3, 4)),
  count=c( 10,80,10,5,90,5,  10,80,10,5,90,5))

# The bar plot
p1 <- ggplot(test, aes(subgroup, count, fill = category)) +
   geom_bar(stat = "identity") +
   facet_grid(.~ group) +
   theme(legend.position = "none",  
         plot.margin = unit(c(1,0,2,0), "lines"))

p1 <- p1 + ylim(0, 100)

# The empty plot to contain the annotations
p2 = ggplot(data.frame(x = c(1,2), y = c(0,100), z = c(1,1)), aes(x,y)) + theme_bw() + facet_wrap(~ z) +
   theme(axis.title.y = element_blank(),
        axis.title.x = element_text(colour = NA),
        axis.text.y = element_blank(),
        axis.text.x = element_text(colour = NA),
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        axis.ticks = element_line(colour = NA),
        panel.border = element_rect(colour = NA),
        strip.background = element_rect(colour = NA, fill = NA),
        strip.text.x = element_text(colour = NA), 
        plot.margin = unit(c(1,0,2,0), "lines"))

# The annotations
Text1 = textGrob("Text 1")
Text2 = textGrob("Text 2")
Text4 = textGrob("Text 4")

p2 = p2 + annotation_custom(grob = Text1,  xmin = 1.4, xmax = 1.4, ymin = 85, ymax = 100) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 100, ymax = 100) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 85, ymax = 85) +
        annotation_custom(grob = linesGrob(), xmin = 1.1, xmax = 1.1, ymin = 85, ymax = 100)

p2 = p2 + annotation_custom(grob = Text2,  xmin = 1.4, xmax = 1.4, ymin = 20, ymax = 80) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 80, ymax = 80) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 20, ymax = 20) +
        annotation_custom(grob = linesGrob(), xmin = 1.1, xmax = 1.1, ymin = 20, ymax = 80)

p2 = p2 + annotation_custom(grob = Text4,  xmin = 1.4, xmax = 1.4, ymin = 0, ymax = 15) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 15, ymax = 15) +
        annotation_custom(grob = linesGrob(), xmin = 1, xmax = 1.1, ymin = 0, ymax = 0) +
        annotation_custom(grob = linesGrob(), xmin = 1.1, xmax = 1.1, ymin = 0, ymax = 15)

# Putting the two plots together
plot = arrangeGrob(p1, p2, ncol = 2, widths = unit(c(10, 2), c("null", "null")))
grid.draw(plot) 
```

![机器人](../Images/1920c51ea899a41be0bba2bbf7a92ef9.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T19:10:27.963

我使用此链接中的代码添加了行/文本： [Using grconvertX/grconvertY in ggplot2](https://stackoverflow.com/questions/10536396/using-grconvertx-grconverty-in-ggplot2)。这种方法使用 grid.text 和 grid.lines 而不是 grobs。我不确定哪种方法更好。

我认为 grid.lines 可以合并到 grid.polyline 语句中，也可以通过循环完成。x 和 y 位置可以设置为一个变量，而不是在每一行中硬编码。

唯一可能的复杂情况是将比例传递到视口。但是，只要在 GGPLOT 和视口中使用相同的比例，此代码就可以工作。请注意，视口使用绘图的整个高度作为 0 到 100。

```
library (ggplot2)
library(grid)
library(gridBase)

test= data.frame(
  group=c(rep(1,6), rep(2,6)),
  subgroup=c( 1,1,1,2,2,2,1,1,1,2,2,2),
  category=c( rep(1:3, 4)),
  count=c( 10,80,10,5,90,5,  10,80,10,5,90,5   )
  )

qplot(subgroup, count, 
           data=test, geom="bar",  stat="identity",
           fill =category,  
           facets =  .~ group,  width=0.9)+
             opts(legend.position="none",  plot.margin = unit(c(0,9,2,0), "lines"))

current.vpTree()
downViewport('panel-4-6')
pushViewport(dataViewport( yscale=c(0,100), clip='off',xscale=c(0,1)))

grid.text(x=1.21,  y = 90, default.units='native' ,label="Text 1")
grid.text(x=1.21,  y = 55, default.units='native' ,label="Text 2")
grid.text(x=1.21,  y = 10, default.units='native' ,label="Text 3")

grid.lines(x=c(1.02,1.12), y = c(95,95), default.units='native' )
grid.lines(x=c(1.02,1.12), y = c(85, 85), default.units='native' )
grid.lines(x=c(1.12,1.12), y = c(85, 95), default.units='native' )

grid.lines(x=c(1.02,1.12), y = c(80, 80), default.units='native' )
grid.lines(x=c(1.02,1.12), y = c(20, 20), default.units='native' )
grid.lines(x=c(1.12,1.12), y = c(80, 20), default.units='native' )

grid.lines(x=c(1.02,1.12), y = c(5, 5), default.units='native' )
grid.lines(x=c(1.02,1.12), y = c(15, 15), default.units='native' )
grid.lines(x=c(1.12,1.12), y = c(5, 15), default.units='native' ) 
```

对任何格式问题表示歉意 - 我只是粘贴了我的代码并使用代码按钮缩进它。

![在此处输入图像描述](../Images/1cb0eaaa907784cd3511a789d13168ec.png)

# java - Android - 从 Webview 拦截链接

> ID：10525959
> 
> 赞同：0
> 
> 时间：2012-05-10T00:22:34.987
> 
> 标签：java, android, pdf, android-intent, webview

所以我需要用户点击 webview 中的链接，在这种情况下，它是一个包含 .pdf 文件的链接。我有启动 PDF 阅读器的代码，但它没有获得链接，所以它只是在单击 PDF 文件时加载 PDF 阅读器。如何拦截此链接并将其提供给我的 PDF 阅读器意图？

代码：

```
public class atcFaa extends Activity {
WebView webview;
private String url;
ProgressBar pd = null;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.atccti);

    pd = (ProgressBar) findViewById(R.id.web_view_progress_bar);

    webview = (WebView) findViewById(R.id.ctiWebView);
    webview.getSettings().setJavaScriptEnabled(true);

    Button openPdfBtn = new Button(this);
    webview.addJavascriptInterface(openPdfBtn, "openPdfBtn");
    openPdfBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            openPdf();
        }
    });

    webview.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
            if (progress < 100 && pd.getVisibility() == ProgressBar.GONE) {
                pd.setVisibility(ProgressBar.VISIBLE);
            }
            pd.setProgress(progress);
            if (progress == 100) {
                pd.setVisibility(ProgressBar.GONE);
            }
        }
    });

    webview.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            webview.getSettings().setJavaScriptEnabled(true);
            // do your handling codes here, which url is the requested url
            // probably you need to open that url rather than redirect:
            if (url.startsWith("tel:")) {
                startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(url)));
            } else if (url.startsWith("mailto:")) {
                url = url.replaceFirst("mailto:", "");
                url = url.trim();
                Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("plain/text").putExtra(Intent.EXTRA_EMAIL,
                        new String[] { url });
                startActivity(i);

            } else if (url.startsWith("geo:")) {
                try {
                } catch (Exception e) {
                    System.out.println(e);
                }

            } else if (url.endsWith("pdf")) {
                try {

                }

                catch (ActivityNotFoundException e) {
                    Toast.makeText(atcFaa.this, "No PDF Viewer Installed",
                            Toast.LENGTH_LONG).show();
                }
            }

            else {
                view.loadUrl(url);
            }
            return true;
            // then it is not handled by default action
        }

    });

    webview.loadUrl("http://www.faa.gov/air_traffic/publications/");
}

protected void openPdf() {
    // TODO Auto-generated method stub
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    Uri uri = Uri.parse(url);
    intent.setDataAndType(uri, "application/pdf");
    startActivity(intent);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu2, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.atcAbout2:
        Toast.makeText(this, "You pressed the icon!", Toast.LENGTH_LONG)
                .show();
        break;
    case R.id.atcContact2:
        emailme();
        break;

    }
    return true;
}

private void emailme() {
    // TODO Auto-generated method stub
    String domsEmail = "MYEMAIL@EXAMPLE.com";
    String message = "Insert Message Here";
    String myemail[] = { domsEmail };
    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, myemail);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "ATC Assistant");
    emailIntent.setType("plain/text");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    startActivity(emailIntent);
}

/*
 * @Override public void onBackPressed() { if (webview.canGoBack())
 * webview.goBack(); else super.onBackPressed(); }
 */

public void setUrl(String url) {
    this.url = url;
}

public String getUrl() {
    return url;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:00:35.387

我不知道你的 html 代码的结构，但我会假装你有一个按钮。这是您的html中的代码：

```
<button onclick='openPdfBtn.performClick();'>Open pdf</button> 
```

然后在你的 webview 中添加一个 js 接口：

```
Button openPdfBtn = new Button(this); //this is not gonna be visible
yourWebView.addJavascriptInterface(openPdfBtn, "openPdfBtn"); //here you bind the js with the native button
openPdfBtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        openPdf();
    }
}); 
```

# javascript - ajax表单发送后刷新/重置jquery变量

> ID：10525964
> 
> 赞同：0
> 
> 时间：2012-05-10T00:23:37.667
> 
> 标签：javascript, jquery

我很难弄清楚这个问题，有人可以帮忙吗？

我不确定它是否可能，我需要刷新/重置变量，因为我需要保持它对其他函数的作用域，所以它可以在全局范围内使用。

我在 jquery 的顶部附近有这个变量......

```
var heightOne = $panelOne.height(); 
```

当我的 ajax 重力表单发送时，我正在尝试刷新它。

我有这个绑定函数，它会在表单完全重新加载时触发，所以我想我可以把我的变量刷新/重置脚本放在这里......

```
$(document).bind('gform_post_render', function(){

    // variable refresh code in here...     

    $slidePane.css({ 'height' : heightOne + 'px' }); // then this will follow and use new height taken from $panelOne updated variable  

}); 
```

但我正在努力寻找从哪里开始。任何帮助都会非常感谢。

* * *

**更新**

这是我的完整脚本，向您展示我正在努力实现的目标。

```
$(window).load(function(){

    var $slidePane  = $("#sliding-pane"),

         $stageOne  = $("#nav-stage-1"),
         $stageTwo  = $("#nav-stage-2"),
         $stageThree = $("#nav-stage-3"),

         heightOne  = $("#panel-stage-1").height(),
         heightTwo  = $("#panel-stage-2").height(),
         heightThree = $("#panel-stage-3").height();

    $slidePane.css({ 'height' : heightOne + 'px' });

    $.fn.slideThree = function() {

        $slidePane.stop().animate({
                left : "0px",
                height : heightOne + 'px'
        }, 300);

        FB.Canvas.scrollTo(0, 510);

    };

    $.fn.slideThree = function() {

        $slidePane.stop().animate({
                left : "-680px",
                height : heightTwo + 'px'
        }, 300);

        FB.Canvas.scrollTo(0, 510);

    };

    $.fn.slideThree = function() {

        $slidePane.stop().animate({
                left : "-1360px",
                height : heightThree + 'px'
        }, 300);

        FB.Canvas.scrollTo(0, 510);

    };

    $stageOne.on('click', function () {

        $(this).slideOne();

    });

    $stageTwo.on('click', function () {

        $(this).slideTwo();

    });

    $stageThree.on('click', function () {

        $(this).slideThree();

    });

    $(document).bind('gform_post_render', function(){

        $slidePane.css({ 'height' : heightThree + 'px' });

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:15:21.300

```
var $slidePane  = $("#sliding-pane"),
    /* ...other vars... */
    heightThree = $("#panel-stage-3").height();

    // Cache the height
    $('#panel-stage-3').data('origHeight', heightThree);

$(document).bind('gform_post_render', function(){
    $slidePane.css({ 'height' : $('#panel-stage-3').data('origHeight') + 'px' });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:11:28.907

我建议您放入`overflow:hidden`slidePane 的 css；这样尺寸将自动调整大小。你不应该为此需要 jquery。

# php - 如何配置 PHP 和 nginx 仅显示特定 IP 地址的错误？

> ID：10525968
> 
> 赞同：0
> 
> 时间：2012-05-10T00:23:56.673
> 
> 标签：php, nginx

如何将 PHP 和 nginx 配置为仅显示特定 IP 地址的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:37:38.320

您可以先将 PHP 设置为根本不显示错误（`display_errors = Off`in `php.ini`），然后使用`auto_prepend_file`php.ini 中的指令来包含此脚本：

```
<?php
$allowed_ips = array('111.111.111.111', ...);
if (in_array($_SERVER['REMOTE_ADDR'], $allowed_ips)) {
    ini_set('display_errors', '1');
} 
```

# objective-c - 每天更改两组数据类型，然后重置它们

> ID：10525974
> 
> 赞同：0
> 
> 时间：2012-05-10T00:25:06.213
> 
> 标签：objective-c, xcode4.2

我需要每天为 iOS 应用更改两组图像数据和两组文本数据。第一个图像集是 x1-13.png ，第二个是 y1-20.png 。在重复循环之前，总共有 260 种组合（13x20 天）。有 2x260 组文本数据（textA，textB）并排运行。它们必须对应特定的公历日期并循环通过它们的组合。该应用程序将打开，查看它是什么日期并加载相应的数据。它还需要**跳过闰年（2/29）..**

[在图像 260 组合中，还有其他图像组合（下面的示例），但我已经为这些制定了各种公式/编码 - 它们从第一天开始就依赖于两组（x1.png，y1.png）并且会起作用实施中。]

目前我所能做的就是手动更改两组整数作为计数器来显示不同的图像。例如：

```
int x = 2;
int y = 2;

-(void)getImage{

if (y) {
UIImage *theYimg = [UIImage  imageNamed:[NSString stringWithFormat:@"SetY%i.png", y]];
    [MainImageView setImage:theYimg];

int additionalImagery;
if ((x == 2 ||x == 7||x==12) && y <9) {
        additionalImagery = y + 12;
        UIImage *addimg = [UIImage  imageNamed:[NSString stringWithFormat:@"SetY%i.png", additionalImagery]];
        [secondImageView setImage:addimg];
        UIImage *thirdimg = [UIImage  imageNamed:[NSString stringWithFormat:@"SetX%i.png", x]];
        [thirdImageView setImage:thirdimg];
} 
```

是否有一个循环可以**每天**计数（++） ，直到它们到达图像集的末尾，然后再次从第一张图像重置自己？- 相当于：

```
int x = 1; x <=13; x++; //then reset to x=1 again after 13days

int y = 1; y <=20; y++; //then reset to y=1 again after 20days 
```

这些周期将在同一天开始，但显然它们需要在不同的日子重新设置。

同样**重要的是**

我如何在日常计划中实施它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:57:19.460

我已经实现了一个似乎有效的计数器/重置方法。但是我只使用了一个 NSTimer 间隔来检查这个：

```
-(void)countUpAndReset{

x++;
if (x <= 13) {
    [self getImage];
}
else if (x > 13){
    x = 1;
    [self getImage];
}

y++;
if (y <=20) {
    [self getImage];
}
else if (y >20){
    y = 1;
    [self getImage];
}
} 
```

在 ViewDidLoad 中：

```
- (void)viewDidLoad
{

[super viewDidLoad];

x = 1;
y = 1;

[self getImage];
theTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(countUpAndReset) userInfo:nil repeats:YES]; 
```

现在我必须将它映射到从某个日期开始的公历上，例如。2010 年 12 月 25 日至 (++) 每天（减去闰年 2/29 日）..？

# javascript - 页面加载后添加图片

> ID：10525991
> 
> 赞同：2
> 
> 时间：2012-05-10T00:27:21.237
> 
> 标签：javascript, jquery, onload

所以我读了这篇，似乎是一篇关于主题标题的非常好的文章：

[http://www.rodsdot.com/javascript/Remote-Scripting-Images-(No-Need-For-AJAX).asp](http://www.rodsdot.com/javascript/Remote-Scripting-Images-(No-Need-For-AJAX).asp)

我不明白为什么它有效？

我对我的工作很好（猴子看，猴子做）但我想为什么不问。

谢谢，

垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:32:15.393

而不是在页面加载时加载所有图像、css、脚本等。这使您可以在页面加载后加载一些图像，让关键部分首先加载。

它减少了页面加载时间，因为它在页面加载完成后继续在后台加载。

# css - 显示 水平与lesscss

> ID：10525994
> 
> 赞同：1
> 
> 时间：2012-05-10T00:27:30.960
> 
> 标签：css, less

[http://lesscss.org/](http://lesscss.org/)

我有同样的问题。我将显示更改为内联，但似乎不起作用。谁能告诉我我做错了什么？

```
 ul{
            width:100%;
            padding: 0;
            margin: 0;

            li{
            list-style-type: none;
            float: left;
            padding-left: 10px;
            display: inline;
            white-space: nowrap;

                a{
                    text-decoration: none;
                    font-size: 16px;
                    letter-spacing: -1px;
                    color: @darkGrey;
                    padding-right: 6px;

                    &:hover{
                        color: @mainColor;
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:36:14.997

我认为你正在使用 LESS CSS 或类似的东西。

尝试显示块而不是内联。

```
li{
     display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:34:35.917

**这 2 条评论适用于 LESS CSS 或常规 CSS**

1.  在您声明and`a:hover`之前，您不能声明。`a:link``a:visited`
2.  你不需要两者`display:inline`和`float:left`。Float 应用于块级元素，但使用 display:inline，您正在制作`<li>`一个内联元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:12:04.947

* * *

演示： http: [//plugins.amiwithyou.com/lesscss/demo.htm](http://plugins.amiwithyou.com/lesscss/demo.htm)

* * *

根据文档，您需要将 .less 样式表与 rel 设置为“stylesheet/less”链接：

```
<link rel="stylesheet/less" type="text/css" href="styles.less"> 
```

然后从页面顶部下载less.js，并将其包含在页面的元素中，如下所示：

```
<script src="less.js" type="text/javascript"></script> 
```

确保在脚本之前包含样式表。

然后在您的 styles.less 文件中添加以下内容

```
 @darkGrey:#777;
 @mainColor:#333;
 ul{             
     width:100%;             
     padding: 0;             
     margin: 0;              
     li{             
         list-style-type: none;             
         padding-left: 10px;             
         display: inline;             
         white-space: nowrap;                  
             a{                     
             text-decoration: none;                     
             font-size: 16px;                     
             letter-spacing: -1px;                     
             color: @darkGrey;                     
             padding-right: 6px;                      
                &:hover{                         
                 color: @mainColor;                     
                }                 
            }             
        }
} 
```

请注意，

*   我已经删除了浮动：左

和

*   在末尾添加“}”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T00:34:12.513

由于对 css/less-css 的歧义，原始答案被删除，但由于一些好的评论，我决定留下问题。

# objective-c - PopOver 中的 UIImageView 没有改变？

> ID：10525998
> 
> 赞同：0
> 
> 时间：2012-05-10T00:27:51.693
> 
> 标签：objective-c, imageview

我正在制作一个应用程序，它有多个按钮，当你按下它们时，它会打开一个弹出视图（使用 Storyboard。）图像在 IB 中是空白的（我是这样设置的），我的按钮是用来填充图像视图的. 这是我正在使用的代码： `[popoverImageView setImage:[UIImage imageNamed:@"telegraph.jpeg"]];` 步骤（按顺序运行）

1.  弹出框打开
2.  上面的代码运行

一些注意事项： 图像大小写匹配。该图像内置于捆绑包中

任何人都可以阐明一些光？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:27:39.947

1.  如果您还没有阅读 Apples [View Controller Catalog for iOS](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/Popovers.html)，您应该阅读它。
2.  我会检查您的 popoverImageView 的`viewDidLoad`/`viewWillLoad`并查看它是否在您的视图出现之前清除了您的视图。
3.  检查您的 popoverImageView 的属性，它们可能没有正确链接
4.  喜欢使用故事板，我觉得 Popover 很痛苦

如果没有关于 Popover 的接口以及调用的函数`[popoverImageView setImage:[UIImage imageNamed:@"telegraph.jpeg"]];`和 setImage 函数的实现的任何信息，我无法确定您的确切问题