# StackOverflow 问答 10563000-10563999

# silverlight - Silverlight Datagrid 按年、月、周分组

> ID：10563003
> 
> 赞同：0
> 
> 时间：2012-05-12T10:42:26.200
> 
> 标签：silverlight, datagrid, grouping

我将 Silverlight RIA 与 EF 一起使用，并且我有一个实体，例如字段 Date、Field1、Field2、... 在 LoadOperation_Completed 上绑定数据可以正常工作。但是，我需要按年、月、周对数据进行分组。建议的方法是什么？我试过了

```
 public void  loadOp_Completed(object sender, EventArgs e) {
    LoadOperation<MyEntity> loadOp = sender as LoadOperation<MyEntity>;

    List<MyEntity> list = ((LoadOperation<MyEntity>)sender).Entities.ToList();

    PagedCollectionView collection = new PagedCollectionView(list);

    collection.GroupDescriptions.Add(new PropertyGroupDescription(**???**));
    this.MyDataGrid.ItemsSource = collection;
 } 
```

但我不知道我的 PropertyGroupDescription 应该是什么。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:45:35.727

添加名为 的属性`Year`，`Month`并将`Week`它们基于您的日期字段：

```
public int Year
{
   get {  return myDate.Year; }
} 
```

然后按年、月、周分组:)

# android - 在 android 中使用兼容的库

> ID：10563004
> 
> 赞同：1
> 
> 时间：2012-05-12T10:42:42.200
> 
> 标签：android, compatibility, actionbarsherlock

在使用 android 4.0 开发应用程序并使其在 android 2.3 中运行时，什么是理想的方法，我已经导入了兼容性库和[Android Sherlock](http://actionbarsherlock.com/index.html)？在我的项目上？

在应用兼容性实践之前，我是否应该使用 4.0 的编码实践，直到我的应用程序成型？

或者

我应该将兼容性实践与项目的进展一起应用（对于像我这样的兼容性库的初学者来说，这有点硬核）？

我会很感激你的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:12:04.257

我可能有点偏颇，但是通过使用 Google 支持库、[ActionBarSherlock](http://actionbarsherlock.com)和[NineOldAndroids](http://nineoldandroids.com) ，您可以获得 Honeycomb 中引入的所有主要新功能，99% 的设备都可以访问 Play 商店。

在 Android 2.1+ 上轻松访问片段、加载器、操作栏和新动画 API 允许您专注于应用程序的实际内容，而不是任何 API 差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:49:45.403

Action Bar Sherlock 旨在尽可能地在旧系统上复制 Android 4.0 的体验，因此我建议您本着这种精神使用它。尝试开发干净的冰淇淋三明治代码，只需关注 ABS 是否支持它。大多数时候，它会的。如果不行，就另寻他法。每次完成 Activity 编码后，可能是退后一步并进行快速 Gingerbread 完整性检查的好时机。

# c# - 如何通过名称从html中获取注册字段的元素？

> ID：10563005
> 
> 赞同：3
> 
> 时间：2012-05-12T10:42:42.437
> 
> 标签：c#

我正在尝试制作一个注册程序：例如：Button1 点击事件：

```
WebBrowser wb = new WebBrowser();
    wb.Navigate("register site");
    wb.Document.GetElementById("passwort").SetAttribute("value", textBox1.Text);
    wb.Document.GetElementById("register").InvokeMember("click"); 
```

这是注册页面的 html 代码（来自查看源代码）：

```
<td><h5>Password:<br><input type="password" name="passwort"></td> 
<td> <input type="submit" name="register" value="Registri"></td> 
```

有没有机会通过他的名字获得元素？因为它没有 ID 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:50:25.553

您不能直接按名称访问元素，但您可以通过首先查找输入标签来访问它，然后对结果进行索引以按名称查找标签。

`wb.Document.GetElementsByTagName("input")["passwort"]`

# python - 在 Django 中，零（整数）是否被视为空白或空？

> ID：10563006
> 
> 赞同：0
> 
> 时间：2012-05-12T10:42:45.917
> 
> 标签：python, django, templates

我在输入字段（IntegerField）中尝试了整数零，但是在提交后该零似乎从未显示。

这是我的模板的一部分：

```
{{user_date_table.june_11}}
{% if not user_date_table.june_11_steps %}
 <form action="/steps_count/index/{{ username }}/table/" method="post">
  {% csrf_token %}              
  <input type="text" autocorrect="off" autocapitalize="off" name="june_11_steps"/>
  <input type="submit" value="Add"/>
 </form>
{% else %}      
 {{user_date_table.june_11_steps}}
{% endif %} 
```

我认为这`if not user_date_table.june_11_steps`会抛出“真”，即如果我使用零作为输入，它是空白的。这是正确的，我可以克服吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:49:49.037

在 python 中，以下所有内容都被评估为`False`：

```
'', "", 0, [], {}, (), False, None 
```

所以，`user_date_table.june_11_steps`是 0，然后`{% if not user_date_table.june_11_steps %}`将被评估`True`并执行该块。

更新：对于解决方案，

1.  如果`user_date_table`在显示表单时不在您的上下文中发生，或者如果它是空的，您可以使用

    ```
    {% if not user_date_table%} 
    ```

2.  将另一个值传递给您的模板，例如`display_result`，并使用它来检查将显示哪个字段集。

视图.py：

```
if request.POST: #saving the post data
    display_result = True 
```

模板.html

```
{% if not display_result %}
    <form action="/steps_count/inde... 
```

但第一种方法总是更好。

# jquery - 如何拒绝在jstree中将节点移动到根目录

> ID：10563007
> 
> 赞同：1
> 
> 时间：2012-05-12T10:42:56.833
> 
> 标签：jquery, jstree

a 有一棵树，如下所示：

```
[{
    "data": "reference",
    "attr":{"id":"1"},
    "children": [{
        "data": "reference child",
        "attr":{"id":"3"}
     }]
}, 
{
    "data": "recycle bin",
    "attr":{"id":"2"}
}] 
```

我需要拒绝使用“check_move”将“reference child”移动到 root。

# jquery - 显示 jQuery 迷你图的子弹图比例

> ID：10563008
> 
> 赞同：1
> 
> 时间：2012-05-12T10:43:02.533
> 
> 标签：jquery, charts, sparklines

我正在使用出色的[jQuery Sparklines](http://omnipotent.net/jquery.sparkline/#s-about)在我的 Web 应用程序中绘制小子弹图。这有点违背像这样的小图的性质，但我想渲染子弹趋势的比例，例如在图的下方或上方，就像[D3 实现](http://mbostock.github.com/d3/ex/bullet.html)一样，但在较小的打印中以适应小尺寸。

我试图绕过文档并在谷歌上搜索它，但找不到任何关于它的信息。是否有可能，或者只是我需要解决的工具提示？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:27:55.223

插件中没有内置的功能，也没有任何计划在当前添加它。

当然，您可以自由地在 github 上 fork 项目并自己添加它；-)

# css - CSS：对齐浮动的 li 在 div 内居中？

> ID：10563010
> 
> 赞同：0
> 
> 时间：2012-05-12T10:43:09.213
> 
> 标签：css, alignment, css-float

**HTML**

```
<div class="wrapper join-links">
    <ul>
       <li><a href="link">Whatever</a></li>
       <li><a href="link">Something</a></li>
    </ul>
</div>​ 
```

**CSS**

```
.join-links li {
    float:left;
    margin-right:20px;
}​ 
```

是否有可能在环绕的包装器 div 内将两个链接“居中”或“对齐”对齐？

[http://jsfiddle.net/CRrmL/](http://jsfiddle.net/CRrmL/)

编辑：我也想知道我是否可以将它们对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:47:05.140

改成`float: left`给`display: inline`你：

```
.join-links li {
    display: inline;
    margin-right:20px;
}​ 
```

然后，您可以在父 div 上使用 text-align。

[居中对齐](http://jsfiddle.net/CRrmL/1/)
[示例 右对齐示例](http://jsfiddle.net/CRrmL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:57:10.233

要将链接向右或居中对齐，您需要使用文本对齐并显示内联或内联块到 li 元素。Float 属性将任何元素转换为块。 [http://jsfiddle.net/CRrmL/15/](http://jsfiddle.net/CRrmL/15/) http://jsfiddle.net/CRrmL/16/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T10:47:50.157

您可以通过用于居中的常见边距黑客来做到这一点：

```
.join-links ul{
    margin:0 auto;
} 
```

然后你需要设置`li`要在行中显示的元素：

```
.join-links li {
    display:inline;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T10:57:23.183

您可以像这样使链接合理。只需为两者定义一个类，然后从第一个到左，第二个到右`li`浮动。`li``li`

[检查这个例子](http://jsfiddle.net/libinvbabu/CRrmL/17/)

# iphone - 在 TableView 中自动加载更多文章

> ID：10563013
> 
> 赞同：0
> 
> 时间：2012-05-12T10:44:12.817
> 
> 标签：iphone, objective-c, xcode, uitableview

我有 TableView，在这个 TableView 中我正在打印文章。现在用户必须点击导航栏项目来更新（通过 json 从 web 下载更多文章）。我想要并且我认为当用户滚动到底部时自动显示加载单元并开始加载或从网络获取更多文章会更好。

**接下来是我的问题：**

1.  如何在其中出现加载指示器的额外单元格
2.  和加载文本如何自动获取更多文章？

此功能位于 iphone 应用程序“App Store”中，但单击加载更多项目。

也许最好把按钮加载更多文章？

欢迎所有示例和建议。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:08:32.410

这很容易，它在最后添加一个 UITablecell 以加载更多项目。

```
//
//  TableViewController.m
//  PartialTable
//
//  Created by Abizer Nasir on 07/07/2011.
//

#import "TableViewController.h"

#define kNumberOfItemsToAdd 8

@implementation TableViewController

@synthesize items;

// Mark: -
// Mark: Set up and tear down

- (id)init  {
    // New designated initialiser
    if (!(self = [super initWithStyle:UITableViewStyleGrouped])) {
        return nil; // Bail!
    }
    numberOfItemsToDisplay = kNumberOfItemsToAdd; // Show 10 items at startup
    return self;
}

- (id)initWithStyle:(UITableViewStyle)style {
    // Call out to the new designated initialiser
    return [self init];
}

- (void)dealloc {
    [items release];
    [super dealloc];
}

#pragma mark - View lifecycle

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (numberOfItemsToDisplay == [items count]) {
        return 1;
    }
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        return numberOfItemsToDisplay;
    } else {
        return 1;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"ItemCell";

    // If the indexPath is less than the numberOfItemsToDisplay, configure and return a normal cell,
    // otherwise, replace it with a button cell.

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    if (indexPath.section == 0) {            
        cell.textLabel.text = [items objectAtIndex:indexPath.row];
        cell.textLabel.textAlignment = UITextAlignmentLeft;        
        cell.textLabel.textColor = [UIColor blackColor];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:17.f];

    } else {
        cell.textLabel.text = [NSString stringWithFormat:NSLocalizedString(@"Next %d items", @"The text to display to load more content"), kNumberOfItemsToAdd];
        cell.textLabel.textAlignment = UITextAlignmentCenter;
        cell.textLabel.textColor = [UIColor colorWithRed:0.196f green:0.3098f blue:0.52f alpha:1.f];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:14.f];
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 1) {
        NSUInteger i, totalNumberOfItems = [items count];        
        NSUInteger newNumberOfItemsToDisplay = MIN(totalNumberOfItems, numberOfItemsToDisplay + kNumberOfItemsToAdd);
        NSMutableArray *indexPaths = [[NSMutableArray alloc] init];        

        for (i=numberOfItemsToDisplay; i<newNumberOfItemsToDisplay; i++) {
            [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
        }        

        numberOfItemsToDisplay = newNumberOfItemsToDisplay;                

        [tableView beginUpdates];
        [tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationTop];
        [indexPaths release];                
        if (numberOfItemsToDisplay == totalNumberOfItems) {
            [tableView deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
        }        
        [tableView endUpdates];
        // Scroll the cell to the top of the table
        if (newNumberOfItemsToDisplay < totalNumberOfItems) {
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 200000000), dispatch_get_main_queue(), ^(void){
                [tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
            });
            [tableView deselectRowAtIndexPath:indexPath animated:YES];
        } else {
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 200000000), dispatch_get_main_queue(), ^(void){
                [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:totalNumberOfItems-1 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
            });
        }

    }    
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:14:32.070

Q1：再添加 1 个单元格以加载更多状态：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return cellsCount <= 0 ? 0 : cellsCount + 1;
} 
```

并创建加载更多单元：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == cellsCount) {
        if (loadMoreCell == nil) {
            self.loadMoreCell = [[LoadMoreTableCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                         reuseIdentifier:@"LoadMoreCellIdentifier"];
        }
        return loadMoreCell;
    }
    ...
} 
```

您可以`LoadMoreTableCell`根据需要自定义。

Q2：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float offset = (scrollView.contentOffset.y - (scrollView.contentSize.height - scrollView.frame.size.height));
    if (offset >= 0 && offset <= 5) {
        [self loadMoreData];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:59:06.947

我在我的应用程序中也喜欢这个东西，在这里你可以使用 AsyncImage 类，这对于在后台下载带有 url 的图像很有用，这样你的 tableview 滚动平滑..

这里有两个链接希望这可以帮助您在后台下载图像... 1.https://github.com/Koolistov/Image-Cache 2.https://github.com/rs/SDWebImage

您想在底部下载到另一个数据和单元格的第二件事，然后在这里，如果您使用 1 个条件，那么您喜欢它的工作......

在`cellForRowAtIndexPath`tableview 委托方法中

```
if(indexPath.row==[yourArray count]-1){

   .....do somthing which you like.....(Reload table with your json or another data)

} 
```

这里只有简单的逻辑，其他更明智的想法是将按钮放在最后一行...希望这对您有所帮助.. :)

# javascript - jQuery最后一次点击

> ID：10563016
> 
> 赞同：4
> 
> 时间：2012-05-12T10:44:20.970
> 
> 标签：javascript, jquery

我如何确定最后点击的 id ？！因为如果我使用：

```
 if(clicks > 1){
     var lc = event.target.id;  // Last Clicked event

     } 
```

它将返回当前单击的按钮 id 我有这样的东西：

```
$('#menu).click(function(event) {

  clicks++;
   if(clicks > 1){
     var lc = event.target.id;  // Last Clicked event

     }
   console.log(lc); 
```

我有 2 个按钮现在如果我点击第一个按钮控制台日志将显示未定义但如果我点击第二个按钮它将显示他的 id。我想阻止这种情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T11:03:02.450

你可以用`.data()`这个，

```
<ul class="menu">
   <li id="menu1">1</li>
   <li id="menu2">2</li>
   <li id="menu3">3</li>
   <li id="menu4">4</li>
   <li id="menu5">5</li>
</ul>​ 
```

* * *

```
$(".menu li").click(function() {
    if($(this).parent().data("lastClicked")){
        alert($(this).parent().data("lastClicked"));
    }
    $(this).parent().data("lastClicked", this.id);
});​ 
```

[http://jsfiddle.net/aDUdq/](http://jsfiddle.net/aDUdq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:00:01.373

变量`lc`是局部的。您必须改为：

```
var lc;
if(clicks > 1){
 lc = event.target.id;  // Last Clicked event
 }
console.log(lc); 
```

# java - Java 中的 Android 和 IPv6

> ID：10563018
> 
> 赞同：11
> 
> 时间：2012-05-12T10:44:52.567
> 
> 标签：java, android, sockets, ipv6

我正在开发一个 Android 应用程序，我需要使用 IPv6 连接到服务器。

电话上启用了 IPv6，我可以看到我的本地 IPv6 地址`ip addr`。我也可以`ping6`从 PC 上成功地使用我的手机，反之亦然。

但是当我尝试通过 Java 命令获取 Android 上的本地地址时，`NetworkInterface.getNetworkInterfaces()`我只能获取 IPv4 地址。

我也尝试打开客户端套接字，但线路 `Socket s = new Socket(MYSERVERIPV6ADDRESS, PORT);` 总是抛出`java.net.SocketException: Invalid argument`. 我确定地址是正确的，因为我在计算机上尝试使用相同的代码并且运行良好。

似乎操作系统支持 IPv6，但 Java 虚拟机不支持。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:31:24.243

在 Inet6Address 中使用此静态方法为您的地址获取 Inet6Address 对象，

Inet6Address getByAddress (String host, byte[] addr, int scope_id)

然后使用以下套接字构造函数来获取套接字，

套接字（InetAddress dstAddress，int dstPort）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:48:45.213

IP6 支持是供应商的选择，据我了解，支持是存在的。

我假设您正在模拟器中测试您的应用程序。看看 android 是如何联网的， [http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking](http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking) 它位于地址为 10.0.2.1 的 IPv4 路由器后面。因此，您无法使用 IPv6 打开 Socket。这完全取决于是否存在从您的手机到目的地的所有与 IPv6 兼容的路由器的路径。

# python - 如何计算 Python 中点和点列表之间的欧几里得距离？

> ID：10563019
> 
> 赞同：0
> 
> 时间：2012-05-12T10:44:54.260
> 
> 标签：python, list, distance, points

```
def findDistance((x1,y1),p) # finds Euclidean distance 
```

假设 p 是`[(0, 0), (1, 0), (0, 1), (1, 1), (0, -1), (-1, 1)]`,

```
x1 = 0

y1 = 0 
```

可选，您可以定义半径。半径默认为 1。结果应该只包括那些位于 的`radius`点`(x1, y1)`：

```
findDistance((0, 0), punten) 
```

[(0, 0), (1, 0), (0, 1), (0, -1)]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T10:48:33.160

以下将找到 中的`(x1, y1)`每个点之间的（欧几里得）距离`p`：

```
In [6]: [math.sqrt((x1-x2)**2+(y1-y2)**2) for x2,y2 in p]
Out[6]: [0.0, 1.0, 1.0, 1.4142135623730951, 1.0, 1.4142135623730951] 
```

如果您只想要距 一定距离内的点`(x1, y1)`，您可以编写：

```
In [8]: [(x2,y2) for x2,y2 in p if math.sqrt((x1-x2)**2+(y1-y2)**2) <= 1.0]
Out[8]: [(0, 0), (1, 0), (0, 1), (0, -1)] 
```

这里，`1.0`是所需的半径。

把它们放在一起：

```
import math

def filter_points(points, origin, radius=1.0):
  x1, y1 = origin
  return [(x2,y2) for x2,y2 in points if math.sqrt((x1-x2)**2+(y1-y2)**2) <= radius]

p = [(0, 0), (1, 0), (0, 1), (1, 1), (0, -1), (-1, 1)]
print(filter_points(p, (0, 0), 1.0)) 
```

NB 值得牢记四舍五入问题：非常接近边界的点最终可能会被错误分类。它是否重要，以及如何最好地处理它取决于您打算如何处理结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:50:00.997

```
>>> p = [(0, 0), (1, 0), (0, 1), (1, 1), (0, -1), (-1, 1)]
>>> orig = (0, 0)
>>> map(lambda point: ((point[0]-orig[0])**2 + (point[1]-orig[1])**2)**(0.5), p)
[0.0, 1.0, 1.0, 1.4142135623730951, 1.0, 1.4142135623730951] 
```

# ruby-on-rails - 为什么我的创建功能不起作用？

> ID：10563021
> 
> 赞同：0
> 
> 时间：2012-05-12T10:45:10.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3

只是不明白，我一直在关注一个教程，但它对我不起作用，有人可以帮我解决这个问题吗？谢谢

它提交并没有返回错误，但实际上没有任何内容插入到表中。

SQL

```
 create_table "photos", :force => true do |t|
    t.string "description"
    t.string "content_type"
    t.string "filename"
    t.binary "binary_data"
  end 
```

.rb

```
class Photo < ActiveRecord::Base
  attr_accessible :photos, :photo, :description
  attr_writer :photos, :photo, :description
    def image_file=(input_data)
    self.filename = input_data.original_filename
    self.content_type = input_data.content_type.chomp
    self.binary_data = input_data.read
  end
end 
```

控制器（部分代码）我认为这段代码是错误的，它是自动生成的。教程没有说这必须修改。

```
 def create
    @photo = Photo.new(:photo => params[:photo])

   respond_to do |format|
      if @photo.save
        format.html { redirect_to @photo, notice: 'Photo was successfully created.' }
        format.json { render json: @photo, status: :created, location: @photo }
      else
        format.html { render action: "new" }
        format.json { render json: @photo.errors, status: :unprocessable_entity }
      end
    end
  end 
```

看法

```
<%= form_tag ({:action => "create"}) %>
    <%= file_field_tag "photo" %>
    <%= submit_tag  "Save" %>
<%= form_tag %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:59:38.397

问题可能在你看来。尝试改用`form_for`用户`form_tag`

```
<%= form_for @photo do |f| %>
  <%= f.file_field :photo %>
  <%= f.submit  "Save" %>
<% end %> 
```

你的符号`form_tag`也是错误的。尝试这个

```
<%= form_tag({:action => "create"}) do %>
  <%= file_field_tag "photo" %>
  <%= submit_tag  "Save" %>
<% end %> 
```

# wpf - WPF如何控制ListCollectionView绑定方法？

> ID：10563022
> 
> 赞同：2
> 
> 时间：2012-05-12T10:45:11.767
> 
> 标签：wpf, binding, listcollectionview

我有一个简单的 ObservableCollection 列表，我使用 ListCollectionView 绑定到表单。

![在此处输入图像描述](../Images/26cbb41fc5ff0db543c49831f7b34b16.png)

我想控制绑定方法的问题。意味着只有当我按下确定按钮时，属性才会改变。

就像现在一样，如果我更改“名字”并导航，则保存该值。

例如，如果我将“名字”更改为 XXX 并导航下一个然后返回，我会看到 XXX 而不是 x...

这是 MainWindow.xaml：

```
public partial class MainWindow : Window
{
    private ListCollectionView view;

    private PersonRepository _personRepository;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        _personRepository = new PersonRepository();

        this.DataContext = _personRepository.Persons;

        view = (ListCollectionView)CollectionViewSource.GetDefaultView(this.DataContext);
    }

    private void BackButton_Click(object sender, RoutedEventArgs e)
    {
        view.MoveCurrentToPrevious();

        view.Refresh();
    }

    private void OkButton_Click(object sender, RoutedEventArgs e)
    {

    }

    private void NextButton_Click(object sender, RoutedEventArgs e)
    {
        view.MoveCurrentToNext();
    }
} 
```

和 Person 类是：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Age { get; set; }
    public string Description { get; set; }
} 
```

存储库是带有虚拟数据的 ObservableCollection ...我的 xaml 字段绑定为：`Text="{Binding FirstName, UpdateSourceTrigger=Explicit}"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:03:03.323

你可以`Person`实施`IEditableObject`. 然后，您可以`EndEdit`从**OK**按钮调用，但从`CancelEdit`其他导航按钮调用。

也就是说，我会发现这个界面不直观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:36:57.147

我会通过使用 BindingGroup 来做到这一点。我会选择一个容器，例如 GroupBox，或者只是布置编辑 Person 类的控件的 Grid，确保容器包含所有这些控件并且当前 Person 对象是它的 DataContext，并在它是 XAML 定义。

这会导致当前 Person 的所有 Bindings 上的默认 UpdateSourceTrigger 从 LostFocus 更改为 Explicit。这意味着您用于编辑 Person 对象的控件不会自动更新其绑定属性，而是会等到您在 BindingGroup 上调用 CommitEdit，这显然是您按下 OK 按钮时将执行的操作。正如 Kent 已经建议的那样，您可以在导航按钮中调用 CancelEdit，以防止在您不按 OK 时更新当前 Person。逻辑与 IEditableObject 相同，只是您不必更改 Person 类，而是使用 BindingGroup 的行为来实现您想要的。

# jquery - mouseenter、mouseleave 和覆盖

> ID：10563024
> 
> 赞同：1
> 
> 时间：2012-05-12T10:45:13.620
> 
> 标签：jquery, jquery-animate

没有错误，但我想知道处理这种冲突或做对的最佳技巧。如何停止这种循环效果。

这是一个基本示例：http: [//jsfiddle.net/aC5bV/](http://jsfiddle.net/aC5bV/)

```
$('a').on({
  mouseenter:function(){
  $tooltip=$('#tooltip');
    $tooltip.animate({
        top:20,
        left:20
    },300);   
  },
  mouseleave:function(){
  $tooltip=$('#tooltip');
    $tooltip.animate({
        top:50,
        left:50
    },300);  
  }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:48:37.027

> 如何停止这种循环效应？

使用[`.stop()`](http://api.jquery.com/stop/). 请查看手册上的参数以获得最佳效果。

[jsFiddle 演示](http://jsfiddle.net/aC5bV/3/)

```
$('a').on({
  mouseenter:function(){
    var $tooltip=$('#tooltip');
    $tooltip.stop().animate({
        top:20,
        left:20
    },300);   
  },
  mouseleave:function(){
    var $tooltip=$('#tooltip');
    $tooltip.stop().animate({
        top:50,
        left:50
    },300);  
  }
});​ 
```

另外，你应该`var`在定义变量时使用，否则[你会得到一个全局变量](http://www.svennerberg.com/2009/02/global-variables-in-javascript/)。这[毁灭了整个世界](http://yuiblog.com/blog/2006/06/01/global-domination)并杀死了小猫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:49:26.893

使用 stop() 函数...

```
 $('a').on({
  mouseenter:function(){
  $tooltip=$('#tooltip');
    $tooltip.stop().animate({
        top:20,
        left:20
    },300);   
  },
  mouseleave:function(){
  $tooltip=$('#tooltip');
    $tooltip.stop().animate({
        top:50,
        left:50
    },300);  
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T17:47:53.010

最后，我找到了这个（从[这里](https://stackoverflow.com/questions/4864039/jquery-hover-flickers-if-trigger-div-and-targeted-div-overlap)）

```
$(document).mouseover(function(e) {
    if (e.target == $("a").get(0) || e.target == $("#tt").get(0)) {
        $("#tt").animate({top:0,left:0},300);
    }
    else {
        $("#tt").stop().animate({top:200,left:200},300);
    }
}); 
```

[http://jsfiddle.net/aC5bV/13/](http://jsfiddle.net/aC5bV/13/)

如果这是可以改进的，我会接受更好的答案！

# java - PHP 变量到 Java 小程序？

> ID：10563028
> 
> 赞同：3
> 
> 时间：2012-05-12T10:45:49.410
> 
> 标签：java, php, applet, processing, php-java-bridge

我有一个音频可视化小程序，我使用 fft 进行处理和最小化来分析音频。现在我想在用户点击歌曲时使用 php 动态地将歌曲输入到程序中。我已经阅读了有关 JavaBridge 的信息，并使用 Tomcat 启动并运行它。我是否需要将歌曲变量值存储在 xml 文件中并将其发送到 .java 文件？这是正确的方法吗？如果是这样，知道这会是什么样子吗？我对java和处理完全陌生。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:42:24.927

> 当用户点击歌曲时，使用 php 动态地将歌曲输入到程序中。

假定答案的翻译：

*   PHP 到 HTML。
*   “点击歌曲”到“点击链接”。

由于 HTML 中有歌曲的链接，添加一个`onclick()`处理程序并在调用的函数中，使用 JavaScript 调用一个小程序方法来加载所需的歌曲。

只要小程序从代码库或文档库加载歌曲，这在沙盒小程序中应该是允许的。不幸的是，通过从 JS 调用的方法这样做会使事情稍微复杂化，因为安全沙箱更加严格。

如果是这种情况，则有必要将调用包装在 a 中[`PrivilegedAction`](http://docs.oracle.com/javase/7/docs/api/java/security/PrivilegedAction.html)并使用[`AccessController.doPrivileged(PrivilegedAction)`](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#doPrivileged%28java.security.PrivilegedAction%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T12:46:10.260

基本顺序如下：

*   用户在浏览器中请求一个**.php**页面。
*   Web 服务器让 PHP 编写页面。它可以编写带有指定applet 的HTML，可以编写带有PHP 填充值的参数的applet HTML。
*   客户端收到一个 HTML 页面，该页面启动 applet。

因此，PHP 无法以简单直接的方式处理对页面的点击。在此关注@AndrewThompson。

# ruby-on-rails-3 - 给定时间戳上的多个活动记录对象之间的差异

> ID：10563036
> 
> 赞同：0
> 
> 时间：2012-05-12T10:47:14.017
> 
> 标签：ruby-on-rails-3, activerecord

我有一个简单的问题：想象一个包含 1:N 事件的日历。在某些时候，我想知道两个时间戳之间发生了什么变化。

*   创建、更新或销毁了哪些事件？
*   我不需要知道在第一个时间戳之后创建并在第二个时间戳之前销毁的事件。

我尝试了papertrail，但在我看来应该有一种更简单的方法来做到这一点。

简单吧？:)

**更新：获取创建和更新的记录：**

```
Calendar.last.events.where("created_at >= :timestamp OR updated_at >= :timestamp", {timestamp: timestamp}) 
```

**更新：通过 papertrail 获取被破坏的记录：**

```
PaperTrail::EventVersions.where("created_at >= :timestamp", { timestamp: DateTime.now}).where(calendar_id: calendar.id, event: "destroy") 
```

注意：您需要向（自定义）版本模型添加元数据引用。

**更新： @ck3g 在阅读这篇**[文章](http://railspikes.com/2010/2/26/acts-as-archive) 后建议“软删除” 。我决定重新考虑我的模型。含义：如果一个*事件*有分配给它的用户，我必须“取消”（而不是删除）该事件。如果它没有关联，我可以安全地销毁该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:38:33.230

我认为您应该执行某种软删除（存档）记录。你可以在网上找到一堆实现。稍后您可以通过 查找记录`deleted_at`。

# java - 在 MRI Ruby 应用程序中使用 Java 需要提示

> ID：10563038
> 
> 赞同：0
> 
> 时间：2012-05-12T10:47:42.827
> 
> 标签：java, ruby, jruby, passenger, rjb

我需要一些提示。

我有基于 MRI Ruby (1.9.3) + Passenger 的应用程序

现在这个应用程序需要扩展“Apache POI”（[http://poi.apache.org/](http://poi.apache.org/)）功能。“Apache POI”是 Microsoft 文档的 Java API。

在调查期间，我测试了：

*   “Apache POI”+ JRuby。这种组合效果很好。

*   “Apache POI”+ rjb（Ruby 和 Java 之间的桥梁）+ MRI Ruby。这种组合效果很好。但在调查期间，我多次评论说这种组合与Passenger一起工作可能会出现一些问题。（我还没有测试）

如果“Apache POI + rjb + MRI Ruby + Passenger”组合不起作用，你们都可以向我提供哪些可能性/提示以在我的应用程序中获取“Ap​​ache POI”？

我的意见：

*   创建小型 JRuby 应用程序（支持 Apache POI），然后使用 REST API 在 MRI Ruby 应用程序和 JRuby 应用程序之间建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:34:21.840

如果您只需要 Java 来处理 Excel 电子表格，您可能需要考虑使用纯 Ruby 方法来创建 Excel，而不是使用 Java。

最简单的是像我为我们的产品应用程序所做的那样生成 Excel XML：[https](https://gist.github.com/1252406) ://gist.github.com/1252406 。

另一种方法是使用电子表格 gem：[https ://rubygems.org/gems/spreadsheet](https://rubygems.org/gems/spreadsheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T16:02:25.890

如果您使用“Apache POI + rjb + MRI Ruby +Passenger”，则需要配置Passenger 以在每次请求后重新启动。

[http://www.modrails.com/documentation/Users%20guide%20Apache.html#_making_the_application_restart_after_each_request](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_making_the_application_restart_after_each_request)

# latex - 如何在 Lyx 中的段落标题后开始新行？

> ID：10563043
> 
> 赞同：4
> 
> 时间：2012-05-12T10:48:08.787
> 
> 标签：latex, paragraph, lyx, tableofcontents

我正在为 LaTeX 使用 Lyx 文档处理器。

我需要使用段落环境（因为我有 Subsubsubsections），并且我希望段落出现在目录中。

我设法通过更改文档设置使段落出现在目录中。但是，标题之后的文本不会在新行中开始。

我通过插入 ERT (LaTeX code) 来解决这个问题`\newline`。

但是，现在我遇到了一个问题，因为目录中段落的页码也显示在下一行！（而不是在页面右侧，在其他页码下方。）

那么如何在不影响目录的情况下让段落的正文从新行开始呢？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T10:19:01.827

要在段落之后获得新行，您需要重新定义段落命令。

去

文档 -> 设置 -> Latex 序言

并添加

```
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
   {-3.25ex\@plus -1ex \@minus -.2ex}%
   {1.5ex \@plus .2ex}%
   {\normalfont\normalsize\bfseries}} 
```

来源：[http ://www.latex-community.org/forum/viewtopic.php?f=5&t=1383](http://www.latex-community.org/forum/viewtopic.php?f=5&t=1383)

修改第二行和第三行，增加或减少段落标题前后的空格。

有关 \@startsection 的更多信息（如果您需要更多调整） [http://infohost.nmt.edu/tcc/help/pubs/nmtthesis/old/annotated/at.startsection.html](http://infohost.nmt.edu/tcc/help/pubs/nmtthesis/old/annotated/at.startsection.html)

# css - 在 ASP.NET 中使用 CSS 定位元素

> ID：10563046
> 
> 赞同：0
> 
> 时间：2012-05-12T10:48:39.040
> 
> 标签：css

我正在学习 CSS 并想在 ASP.NET 中应用它。我正在为元素的总体定位而苦苦挣扎。

例如，应用以下内容不会对元素的定位产生太大影响`.menu`。

```
.menu {
    z-index: 3;
    position: absolute;
    width: 180px;
    top: 355;
    left: 0;
} 
```

换句话说，无论我做什么，菜单元素都或多或少地停留在左上角。为什么要在 ASP.NET 表单上操作各种元素的位置？

这是`.menu`.

```
<div class="menu">
    <ul>
        <li>Add Books</li>
        <li>Review Books</li>
        <li>Register</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:50:06.343

您缺少用于`top`和`left`属性值的度量单位（尽管`left`' 是 ' `0`' 它不需要一个，因为 0 在任何度量中都是相同的）。

尝试使用.`top: 355**px**; left: 0;`

一般来说，您还应该考虑使用之前[的`margin`属性](http://w3.org/tr/css21/box.html#propdef-margin)`position`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:01:52.217

而不是给定`top`，`left`您可以定义`margin`. 在这种情况下，无需将位置设置为绝对位置。

[检查这个例子](http://jsfiddle.net/libinvbabu/5a7et/)

`margin:50px 0 0 30px;`方法

上边距为 50px，

右边距为 0px，

下边距为 0px，

左边距为 30px

# javascript - 在 javascript 中访问 python 字典

> ID：10563047
> 
> 赞同：1
> 
> 时间：2012-05-12T10:48:42.033
> 
> 标签：javascript, django, django-templates

我需要在 django 模板中的 javascript 中访问字典（country_stat）。我正在使用具有此 javascript 代码的谷歌图表 api。下面的代码运行良好并打印出一张整洁的地图。但是这些值是静态的。

```
function drawRegionsMap() {
  var data = google.visualization.arrayToDataTable([
    ['Country', 'Popularity'],
    ['Germany', 2],
    ['United States', 3],
    ['Brazil', 4],
    ['Canada', 5],
    ['France', 6],
    ['RU', 7]
  ]); 
```

在内容块中打印 country_stat 是成功的。

```
{% for key, value in country_stat.items %}
{{key}}, {{value}}
{% endfor %} 
```

印刷，

```
India, 2 Russia, 1 
```

但我不知道如何将其插入 javascript 代码中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:54:00.533

要么通过 AJAX 请求数据，要么从模板中在 JavaScript 中下载文字 JSON - 在视图中设置上下文变量：

```
import simplejson as json
context['thingy_json'] = json.dumps(thingy) 
```

然后将该变量包含在您的模板中：

```
<script>
    var data = {{ thingy_json }};
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:00:20.297

其实解决了。

```
 var data = google.visualization.arrayToDataTable([
    ['Country', 'Popularity'],
    {% for key, value in country_stat.items %}
    ['{{key}}', {{value}}],
    {% endfor %}
  ]); 
```

问题很愚蠢 - 我错过了 {{key}} 周围的单引号

# listview - sencha touch 2 问题与 Ext.List

> ID：10563049
> 
> 赞同：1
> 
> 时间：2012-05-12T10:49:11.157
> 
> 标签：listview, sencha-touch, sencha-touch-2

我在显示我的 Ext.list 组件时遇到问题。这是我的代码：

```
Ext.define("iphone.view.customers.List", {

extend: 'Ext.List',
xtype: 'customersList',

config: {

    fullscreen: true,
    title: 'Customers List',
    ui: 'round',
    itemTpl: [ '{title}' ],

    data: [
        { title: 'Item 1' },
        { title: 'Item 2' },
        { title: 'Item 3' },
        { title: 'Item 4' }
    ]
}
}); 
```

当我启动应用程序时，控制台会产生此警告，但什么也没有出现：

> [WARN][Anonymous] [Ext.Loader] 同步加载'Ext.data.Store'；考虑明确添加“Ext.data.Store”作为相应类的要求

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:56:34.737

您会看到该警告，因为在 Sencha Touch 2 中执行此操作的最佳做​​法是：

*   定义你`Ext.data.Store`的`data`配置（在这种情况下是内联数据）

*   假设您定义的 Store 是，然后在您的列表定义中`listStore`使用此配置：`store: listStore`

希望这可以帮助。

你的情况的一个例子：

```
Ext.define('iphone.store.Customers', {
    extend: 'Ext.data.Store',

    config: {
        model: 'iphone.model.Customer',
            data: [
                      { title: 'Item 1' },
                      { title: 'Item 2' },
                      { title: 'Item 3' },
                      { title: 'Item 4' }
                    ]
    }
}); 
```

并列出：

```
Ext.define("iphone.view.customers.List", {

extend: 'Ext.List',
xtype: 'customersList',

config: {

    fullscreen: true,
    title: 'Customers List',
    ui: 'round',
    itemTpl: [ '{title}' ],

    store: 'Customers'
}
}); 
```

# jquery - jQuery Mobile App 跨域问题

> ID：10563054
> 
> 赞同：0
> 
> 时间：2012-05-12T10:49:59.790
> 
> 标签：jquery, jquery-mobile, https, cross-domain

我想开发一个使用 Web 服务从网站获取数据的 jQuery 移动应用程序。我有一个登录页面。我想与 https 页面通信（比如[https://mysite.com/validate.php?username=user&pass=pwd](https://mysite.com/validate.php?username=user&pass=pwd)）。当我尝试使用 ajax 访问页面时出现错误。当我使用 http url 时，我得到 JSON 响应（可能是跨域问题）。我的问题是我们可以通过将登录页面也设为 https 来解决这个问题。如果有怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:17:12.653

您可以使用以下 mod 重写规则强制 https。

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L] 
```

我假设您在 apache 服务器上。在这种情况下，在 Web 根目录中创建一个 .htaccess 文件，其中包含该文本。

# ruby - 如何在所有公共 LinkedIn 数据中搜索关键字？

> ID：10563055
> 
> 赞同：-1
> 
> 时间：2012-05-12T10:50:00.390
> 
> 标签：ruby, linkedin

我正在使用`linkedin`宝石。我想在 LinkedIn 上所有可用的公共数据中搜索关键字。例如，如果我搜索“microsoft”之类的关键字，它会在 LinkedIn 的人员、工作、公司、连接、组等中搜索“microsoft”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:01:07.990

通过[LinkedIn 公共 API](https://developer.linkedin.com/apis)，您可以执行单独的搜索来完成您需要的大部分内容，然后可以根据需要组合返回的数据。

通过 People Search API 在所有 LinkedIn 用户中搜索“Microsoft”：

[https://developer.linkedin.com/documents/people-search-api](https://developer.linkedin.com/documents/people-search-api)

通过 Jobs Search API 搜索所有工作：

[https://developer.linkedin.com/documents/job-search-api](https://developer.linkedin.com/documents/job-search-api)

通过公司搜索 API 搜索所有公司：

[https://developer.linkedin.com/documents/company-search](https://developer.linkedin.com/documents/company-search)

目前没有群组搜索，所以这是不可能的。

# jsp - 如何使用jstl从arraylist获取值以显示在jsp上

> ID：10563057
> 
> 赞同：0
> 
> 时间：2012-05-12T10:50:13.173
> 
> 标签：jsp, spring-mvc, jstl

我是新手，请帮助解决这个问题，这里我需要显示数组列表中的数据以使用 jstl 显示在 jsp 中。我创建了一个 utill 类，它从数据库中获取数据并在 bean 中设置值，然后我将该 bean 添加到 arraylist 中

```
arl.add(devTechBean); 
```

并将数组列表返回给 modelandview mylist 方法，在该方法中，它将数组列表传递给 jsp 使用

```
ModelAndView mnv = 
new ModelAndView("swl_mySoftwareList","mySoftwareList",mySoftwareList); 
```

在jsp中，我访问数组列表，如

```
${mySoftwareList.assetNumber} 
```

（`assetnumber`我从 bean 获得的价值在哪里）。我的问题是如何使用jstl访问jsp中的arraylist，我需要知道在spring中映射该modelandview mylist方法的位置，因为在jsp中没有调用该方法。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:42:27.410

`mySoftwareList`是一个`ArrayList`。因此，如果您编写`${mySoftwareList.assetNumber}`，您是在要求容器调用`getAssetNumber()`类型对象的方法`ArrayList`。ArrayList 没有这样的方法。

如果要对列表的每个元素调用此方法，则遍历列表：

```
<c:forEach var="element" items="${mySoftwareList}>
    ${element.assetNumber}<br/>
</c:forEach> 
```

如果您只有一个实例，则不要将其存储在列表中并将其直接传递给视图：

```
new ModelAndView("swl_mySoftwareList","devTechBean", devTechBean);

${devTechBean.assetNumber} 
```

# html - 对齐html的最佳做法是什么

> ID：10563061
> 
> 赞同：0
> 
> 时间：2012-05-12T10:50:32.580
> 
> 标签：html, css

# html代码

```
<div id="signup">
    <p>
        <label>Frist Name</label>
        <input type="text"/>
    <p>
    <p>
        <label>Last Name</label>
        <input type="text"/>
    <p>
    <p>
        <label>Email</label>
        <input type="text"/>
    <p>
    <p>
        <label>Mobile Number</label>
        <input type="text"/>
    <p>
    <p>
        <label>Password</label>
        <input type="password"/>
    <p>
    <p>
        <label>Re Password</label>
        <input type="password"/>
    <p>
</div> 
```

这是CSS

# css

```
#signup{
    width: 860px;
    background-color: white;
    border:  1px black solid;
    padding: 0px;
    margin: 0px;
}
#signup p label{
    padding: 0.4em;
    color: #0986e3;
}
#signup p input{
    width: 300px;
    padding: 0.4em;
} 
```

如果您运行此代码，您将看到左右输入文件，这并不好，我可以使用 div 或 li 纠正这个问题，但我想要这样做的最佳实践，我希望输入文件在下面准确彼此，这是 jsfiddle [http://jsfiddle.net/Wiliam_Kinaan/EfBD7/中的代码](http://jsfiddle.net/Wiliam_Kinaan/EfBD7/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:53:51.733

[使标签显示为块元素](http://jsfiddle.net/EfBD7/2/)。这样，您可以设置它的宽度。但是你仍然需要它们是内联的。您需要应用其中一个`float:left`，否则`display:inline-block`它们会内联并阻止。

```
#signup p label{
    display:inline-block;
    width:100px;
}

/*or*/
#signup p label{
    float:left;
    width:100px;
} 
```

如果您想支持较旧的浏览器，请使用`float:left`. 如果您针对新浏览器，那就`display:inline-block`更好了。[如果您使用浮动方法](http://jsfiddle.net/EfBD7/5/)，请将其添加到 CSS 以清除浮动：

```
#signup p{
    overflow:hidden;
    zoom:1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:53:58.200

给标签一个确定的宽度，例如：

```
#signup p label{
  padding: 0.4em;
  color: #0986e3;
  width: 100px;
  display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T11:06:09.233

您可以使用表格吗，可能会对您的事业有所帮助，[请参阅示例](http://jsfiddle.net/7DqnY/)，抱歉没有很好地对齐标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T11:18:58.850

在这里，我按照我的方式做到了。我去掉了 p 和一些 css 以使文本位于右侧。但你当然可以添加 display:inline-block;width:300px; 到标签并在html中交换标签和输入位置

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
#signup{
    width: 500px;
    background-color: #ececec;
    border:  1px black solid;
    padding: 0px;
    margin: 0px;
}
#signup label{
    font:12px arial;
    color: #0986e3;
}
#signup input{
    margin:10px;
    width: 300px;
    padding 0.4em;
}
#signup input[type=button]{
    margin:10px;
    width: 80px;
    padding 0.4em;
}
</style>
</head>
<body>
<div id="signup">
    <input type="text"/>
    <label>Frist Name</label>
    <input type="text"/>
    <label>Last Name</label>
    <input type="text"/>
    <label>Email</label>
    <input type="text"/>
    <label>Mobile Number</label>
    <input type="password"/>
    <label>Password</label>
    <input type="password"/>
    <label>Re Password</label>
    <input type="button" value="click me!" />
</div>

</body>
</html> 
```

# android - 如何在android中的触摸事件上获取mapview的缩放级别？

> ID：10563062
> 
> 赞同：1
> 
> 时间：2012-05-12T10:50:45.557
> 
> 标签：android, google-maps, android-mapview

在我使用的程序中，

```
mapView.setBuiltInZoomControls(true);

mapView.setOnTouchListener(new OnTouchListener() 
{
     @Override
     public boolean onTouch(View v, MotionEvent event) 
     {
         int currentLevel=mapView.getZoomLevel();
         return false;
     }
} 
```

它最初为我提供了触摸事件的当前级别....但是，当我单击缩放控制栏时，触摸事件将不起作用。单击缩放控制栏后如何获得缩放级别。？

请给我一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:01:44.043

```
private MapController mc; 
```

然后当你使用 Overlays 然后使用这个

```
p = new GeoPoint((int) (toLat * 1E6), (int) (toLon * 1E6));    
mc.animateTo(p);
mc.setZoom(15); 
```

你可以参考这两个例子。,[例 1](http://mobiforge.com/developing/story/using-google-maps-android) ,[例 2](http://android-codes-examples.blogspot.in/2011/04/google-map-example-in-android-with-info.html)

# sql - 如何防止 SQL 攻击 - 存储过程中的输入参数

> ID：10563065
> 
> 赞同：0
> 
> 时间：2012-05-12T10:51:27.387
> 
> 标签：sql, stored-procedures, sql-injection

如何防止输入参数中的 SQL 攻击？不安全字符 ('")

我有以下存储过程：

我想保护输入 - @NICKNAME_USER、@PASSWORD_USER

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[SP_AUTH]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[SP_AUTH]
GO

CREATE PROCEDURE [dbo].[SP_AUTH]    (@ACTION    INT = NULL,
                                     @NICKNAME_USER VARCHAR(250) = NULL,
                                     @PASSWORD_USER VARCHAR(250) = NULL)
AS
BEGIN TRY
    IF @ACTION = 'L'
         BEGIN

    SELECT  U.ID AS ID_USER, 
            U.NICKNAME AS NICKNAME
            FROM dbo.T_USERS AS U WITH (NOLOCK)
            WHERE U.NICKNAME = @NICKNAME_USER
            AND U.PASSWORD = @PASSWORD_USER
   END
END TRY
BEGIN CATCH

    DECLARE @ErrorMessage NVARCHAR(4000),
            @ErrorSeverity INT,
            @ErrorState INT

    SELECT 
        @ErrorMessage = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE();

    RAISERROR (@ErrorMessage, -- Message text.
               @ErrorSeverity, -- Severity.
               @ErrorState -- State.
               );
END CATCH 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T11:04:51.950

仅使用带参数的过程将阻止您进行 sql 注入。有关 msdn 的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/ff648339.aspx)。

# actionscript-3 - 编译时Flash按钮不断闪烁

> ID：10563069
> 
> 赞同：0
> 
> 时间：2012-05-12T10:51:49.273
> 
> 标签：actionscript-3, flash-cs5

我正在寻求有关 Flash（CS5 版本）的帮助。我有一种情况，如果尝试在舞台上放置一个按钮，在向上/向上/向下/点击状态中存在明显差异，当我将文档编译为 .swf 时，按钮将在每个状态中连续闪烁，以非常快速. 此外，如果我在 Main 类文件中破坏 AS3 代码，滑块组件的隐藏部分将在可见和不可见之间闪烁。我在这里说的是日本式的、引起癫痫发作的闪烁。我已经在我的代码中搜索了递归函数调用，并尝试删除和重新添加组件和按钮，但无济于事。关于可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:12:14.527

好吧，在我看来，您并没有使用`stop()`在您想要的帧处停止按钮。

如果不是这个，那么你的 ActionScript 有一些错误，它会显示在输出面板中，所以检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:28:03.680

当您说“按钮”时，它是按钮类的实例吗？您是否将实例类型设置为按钮？

即选择库面板中的按钮，右键单击并选择“属性”。然后将类型设置为按钮。

接下来，选择舞台上按钮的实例，打开“属性”面板，在您键入实例名称的下方，您应该会看到一个包含影片剪辑、按钮和图形的下拉菜单。将其设置为按钮。

# mysql - WHERE 有两个表和特定的表名

> ID：10563070
> 
> 赞同：0
> 
> 时间：2012-05-12T10:51:53.997
> 
> 标签：mysql

我有 2 张桌子：

```
table 1 named table_1
table 2 named table_2 
```

在表 2 中，我有一个名为“table_name”的列，其中我有一些来自 dbase 的表的名称

我想为 WHERE 过程写一个条件，类似的东西（当然是错的）

```
WHERE $table_1.name of table 1 = $table_2.table_name 
```

即表1的正确名称在表2的table_name列内的情况

当然 - 表 1 的正确名称是 -> $table_1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:53:31.423

这是不可能的[（感谢上帝）]

在任何广泛使用的 DBMS 中

# mysql - 如何在三个表中使用join

> ID：10563075
> 
> 赞同：0
> 
> 时间：2012-05-12T10:52:45.857
> 
> 标签：mysql

我们有三张桌子。

```
tblA

id(PK)      doc_id(fk)     mr_id(fk)       date 
--------    ----------     --------        ---------
1             23            22             2012-05-23
2             24            22             2012-05-23
3             25            21             2012-05-24
4             26            22             2012-05-24

tblB 

doc_id(PK)      d_name          d_segId(FK)    mr_id(FK)  
------------    -------------   ----------     ---------- 
     1          manish           1              12
     23         rahul            2              22
     24         paul             1              22
     25         jacky            1              21
     26         amit             2              22

tblC
seg_id(PK)      seg_name       seg_color        
--------        ----------     --------       
1               A_corei         red             
2               Bcorec          green 
```

我想要的是来自 tblA 的所有记录，其中 mr_id=22 和 date='2012-05-23' 并在 tblC 中按 seg_name 排序

doc_id 引用到 tblB 并且在 doc_id 的基础上， Seg_id 引用到 tblC 在这种情况下如何使用 join。

它应该看起来像

```
id           doc_id      d_name        seg_color
--------    ---------   ---------      ----------
1            23          rahul         green  
2            24          paul          red 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:58:37.010

试试这个。

```
SELECT a.id,b.doc_id,b.d_name,c.seg_color FROM tblB b 
INNER JOIN tblA a ON b.doc_id=a.doc_id
INNER JOIN tblC c ON b.d_segId=c.seg_id
WHERE a.mr_id=22
AND a.date='2012-05-23' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:59:58.270

```
SELECT
    tblA.id,
    tblA.doc_id,
    tblB.d_name,
    tblC.seg_color
FROM
    tblA, tblB, tblC
WHERE
    tblA.doc_id = tblB.doc_id
    AND
    tblB.d_segId = tblC.seg_id
    AND
    tblA.mr_id = 22
    AND
    tblA.date = '2012-05-23'
ORDER BY
    tblC.seg_name 
```

# c# - 对 MySql 的 Dapper LIKE 查询对 Sql 注入安全吗？

> ID：10563077
> 
> 赞同：10
> 
> 时间：2012-05-12T10:53:01.983
> 
> 标签：c#, mysql, dapper

此查询与 Dapper 结合使用对 sql 注入安全吗？如果不是，那么在 MySql 下编写它的正确方法是什么？或者有没有更好的版本而不使用 concat？

```
string sql = "SELECT * from user_profile WHERE FirstName LIKE CONCAT("%",@name,"%");"
var result = connection.query<profile>(sql, new {name}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T11:25:31.123

该代码没有问题，但另一种方法是在调用者处执行 concat，即

```
const string sql = "SELECT * from user_profile WHERE FirstName LIKE @name;";
var result = connection.Query<Profile>(sql, new {name = "%"+name+"%"}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T11:07:19.687

这是**安全**的，因为您根本**没有动态构建 SQL**。名称只是一个普通参数。实际上，它与 Dapper 无关。

在这里使用字符串 concat 是正确的选择。或者，您可以使用该`SUBSTRING_INDEX`功能。

# javascript - Node.js socket.io.js 未找到或 io 未定义

> ID：10563080
> 
> 赞同：4
> 
> 时间：2012-05-12T10:53:34.990
> 
> 标签：javascript, html, node.js, socket.io

我正在尝试在我的 freebsd 服务器上运行 node.js 应用程序，但我无法让 socket.io 库使用它。我试过包括：

```
 <script src="/socket.io/socket.io.js"></script> 
```

这给出了 404 错误，如果我直接链接到该文件（即它在我的 public_html 文件夹中的位置），我会得到 io not defined 错误。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T14:35:46.283

尝试创建另一个包含这一行的 node.js 应用程序，然后使用 node.js 运行它

```
var io = require('socket.io').listen(8000); 
```

然后在您的浏览器访问中`http://127.0.0.1:8000`，您应该会得到友好的“欢迎来到 socket.io”。问候。如果你得到这个，那么 socket.io 正在运行并将提供 socket.io.js 文件。

我能想到的唯一可能发生的事情是您可能没有链接到客户端文件中的备用端口。除非您在 express 上运行 socket.io 服务器，该服务器在端口 80 上运行。现在创建一个客户端文件，将 socket.io 的脚本源设置为

```
<script src="http://127.0.0.1:8000/socket.io/socket.io.js"> </script> 
```

这应该连接到在端口 8000 上运行的 socket.io 服务器并获取 socket.io.js 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:02:59.197

您的 node.js 应用程序仍然必须为其提供服务 - 它不会自动提供服务。你的服务器里有什么？它应该是这样的

```
var app = require('express').createServer();                                    
var io = require('socket.io').listen(app); 
```

或类似的（这`listen`很重要）。该位置不是磁盘上的真实位置 - 据我了解，socket.io 库应该拦截 URL 并为其客户端库提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:32:59.393

在正文解析器之后添加以下内容：

```
, express.static(__dirname + "/public") 
```

所以像：

```
var app = module.exports = express.createServer(
  express.bodyParser()
  , express.static(__dirname + "/public")
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-03T17:18:09.500

如果他们直接从您的`local file directory(ex: file:///C:/Users/index.html)`.

***解决方案：***您必须通过`localhost (ex: http://localhost:3000/index.html)`服务器正在侦听的位置运行（打开）文件。

下面的代码片段显示了如何创建服务器以及如何`express`与`socket.io`

```
const express = require("express");
const app = express();
const httpServer = require("http").createServer(app); 
const io = require("socket.io")(httpServer);

///////////////////////////////////////////////////////////////
// Any other server-side code goes here                     //
//////////////////////////////////////////////////////////////

httpServer.listen(3000, () => {
    console.log(`Server listening to port 3000`);
}); 
```

# php - 带有自定义字段的条件标记无法正常工作

> ID：10563081
> 
> 赞同：0
> 
> 时间：2012-05-12T10:53:38.913
> 
> 标签：php, html, wordpress, content-management-system

如果填写了自定义字段，我所追求的是让日期和标题出现在每个日历上；但目前，它正在将它们按顺序排列并为每个子页面显示一个日历，但我只希望在它们有即将到来的日期时出现一个日历和日期。

任何帮助将不胜感激！- 有关工作示例，请参阅底部的链接。

这就是我目前所拥有的：

```
 <!-- PHP OF OPEN DAYS --> 
```

```
<!-- Calender Items -->
<div class="calender-item">
<?php $values = get_post_custom_values("next_open_day");
            if ( is_array($values) )
                   the_field( 'university_name');
            else 
    echo '';
 ?>

<?php $values = get_post_custom_values("next_open_day");
            if ( is_array($values) )
                  the_field('next_open_day');
            else 
    echo '';
 ?>

<!-- END OF CALENDER ITEM -->   

</div>
<?php endwhile; ?>
<?php wp_reset_query(); ?> 
```

任何想法，然后拍走请...

我的网站目前吐出的方式是这样的：

[http://universitycompare.net/open-days](http://universitycompare.net/open-days)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:08:52.710

将 if 移到 div 上方，这样当 false 时它根本不会打印

```
<?php $values = get_post_custom_values("next_open_day");
            if ( is_array($values) ) {
echo '<div class="calender-item">';
                   the_field( 'university_name');
                  the_field('next_open_day');
echo '</div>';
}
            else 
    echo '';
 ?> 
```

# interface-builder - JavaFX 场景构建器不会运行

> ID：10563090
> 
> 赞同：0
> 
> 时间：2012-05-12T10:55:08.277
> 
> 标签：interface-builder, javafx

我是Java的初学者，所以我正在寻求帮助。我已经安装了 Java 7u4、Java JDK 7u4、带有 SDK 的 JavaFX 2.1.0 和 JavaFX Scene Builder 1.0。全部用于 Windows x32。当我启动 JavaFX Scene Builder 对话框窗口时显示：

[http://img821.imageshack.us/img821/1420/javafx.png](http://img821.imageshack.us/img821/1420/javafx.png) ![错误：无法创建 java 虚拟机。 错误：发生了致命异常。 程序将会退出。 好的 X](../Images/0fd75fe9f9c58500c1103757a902fade.png)

你能帮我弄清楚如何运行它吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:31:15.263

原因：Deamon Tools Lite 与我安装的 JavaFX Scene Builder 1.0 发生冲突。我关闭了这个，问题已经解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:36:29.620

也许你会尝试重新安装它？我已经安装了一次，它工作得很好。当您尝试将其与控制器集成到 fxml 中时，它不是很好。

编辑：如果您安装了 x64 操作系统，我建议您卸载并重新安装 x64 版本！

# java - 从 Google App Engine 中删除名称中带有破折号的实体

> ID：10563091
> 
> 赞同：1
> 
> 时间：2012-05-12T10:55:09.987
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore

我需要从我的数据库中删除所有在“name”道具中包含“-”符号的实体。

我需要什么来查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:13:40.603

您不能在 GAE 数据存储中仅使用一个查询来执行此操作，因为数据存储不支持“包含”查询。因此，您有两种选择：

1.  选择所有实体并遍历结果集，检查名称是否包含“-”。
2.  向您的实体添加一个新属性，例如“nameContainsDash”，并查询所有将此属性设置为 的实体`true`。每次更新名称时都会更新此属性。

```
...

public void setName(String name) {
    this.name = name;
    nameContainsDash = name.contains("-");
}

public boolean isNameContainsDash() {
    return nameContainsDash;
}

... 
```

当然，第二个选项可能需要数据迁移，因为该属性将`null`用于现有实体。

# opengl - glsl fragmentshader 渲染对象ID

> ID：10563097
> 
> 赞同：6
> 
> 时间：2012-05-12T10:56:55.423
> 
> 标签：opengl, glsl

如何正确地将对象的整数 ID 渲染到整数纹理缓冲区？

假设我有一个内部格式为 GL_LUMINANCE16 的 texture2D，我将它作为颜色附件附加到我的 FBO。

渲染对象时，我将整数 ID 传递给着色器，并希望将此 ID 渲染到我的整数纹理中。

但是，fragmentsshader 输出的类型是 vec4。如何正确地将我的 ID 转换为四分量浮点数并避免转换不准确，以便最终我的整数纹理目标中的整数值对应于我想要渲染的整数 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T15:12:30.957

我仍然认为这里没有明确的答案。所以这是我如何通过 2D 纹理使它工作的：

```
// First, create a frame buffer:
glGenFramebuffers(1, &fbo);
glBindFramebuffer(GL_FRAMEBUFFER, fbo);

// Then generate your texture and define an unsigned int array:
glGenTextures(1, &textureid);
glBindTexture(GL_TEXTURE_2D, textureid);
glTexImage2D(GL_TEXTURE_2D, 0, GL_R32UI, w, h, 0, GL_RED_INTEGER, GL_UNSIGNED_INT, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

// Attach it to the frame buffer object:
glFramebufferTexture(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, textureid, 0);

// Before rendering    
glBindFramebuffer(GL_FRAMEBUFFER, fbo);    
GLuint buffers[2] = { GL_COLOR_ATTACHMENT0, GL_COLOR_ATTACHMENT1 }; // this assumes that there is another     texture that is for the render buffer. Color attachment1 is preserved for the element ids.
glDrawBuffers(2, buffers);

// Clear and render here
glFlush(); // Flush after just in case
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

在 GLSL 方面，片段着色器应具有（此处为 4.3 核心配置文件代码）：

```
layout(location = 0) out vec4 colorOut; // The first element in 'buffers' so location 0    
layout(location = 1) out uvec4 elementID; // The second element in 'buffers' so location 1\. unsigned int vector as color

// ...
void main()
{
//...

elementID = uvec4( elementid, 0, 0, 0 ); // Write the element id as integer to the red channel.

} 
```

您可以读取主机端的值：

```
unsigned int* ids = new unsigned int[ w*h ];
glBindTexture(GL_TEXTURE_2D, textureid);
glGetTexImage(GL_TEXTURE_2D, 0, GL_RED_INTEGER, GL_UNSIGNED_INT, ids); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T22:49:02.480

你的问题有几个问题。

首先，*不是*`GL_LUMINANCE16`“整数纹理”。它是一个包含*标准化*无符号整数值的纹理。它使用整数来表示 [0, 1] 范围内的浮点数。如果要存储实际整数，则必须使用实际[整数图像格式](http://www.opengl.org/wiki/Image_Format#Color_formats)。

 **其次，您不能渲染到亮度纹理；它们不是可呈现颜色的格式。如果你真的想渲染到单通道纹理，你必须创建单通道图像格式。`GL_LUMINANCE16`因此，您可以使用`GL_R16UI`16 位单通道无符号整数图像格式来代替。

现在您已经正确设置了此设置，这非常简单。定义一个`uint`片段着色器输出并让您的片段着色器将您的`uint`值写入它。这`uint`可能来自顶点着色器或制服；但是你想这样做。

显然，您还需要将纹理或渲染缓冲区附加到 FBO，但我很确定您知道这一点。

最后一件事：不要使用短语“纹理缓冲区”，除非您指的是[其中之一](http://www.opengl.org/wiki/Buffer_Texture)。否则，它会变得混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:11:46.283

我想你的整数 ID 是一组原语的标识符；实际上它可以被定义为一个着色器制服：

```
uniform int vertedObjectId; 
```

渲染后，您希望将片段处理存储到[整数纹理](http://www.opengl.org/registry/specs/EXT/texture_integer.txt)中。请注意，整数纹理应使用*整数*采样器（`isampler2D`）进行采样，它返回*整数*向量（即`ivec3`）。

此纹理可以附加到帧缓冲区对象（注意[帧缓冲区完整性](http://www.opengl.org/wiki/Framebuffer_Object#Framebuffer_Completeness)）。帧缓冲区附件可以[绑定](http://www.opengl.org/sdk/docs/man4/xhtml/glBindFragDataLocation.xml)到整数输出变量：

```
out int fragmentObjectId;

void main() {
    fragmentObjectId = vertedObjectId;
} 
```

您需要一些扩展支持，或高级 OpenGL 版本（3.2？）。**

# javascript - 如何计算jQuery中每个循环的总时间？

> ID：10563101
> 
> 赞同：1
> 
> 时间：2012-05-12T10:57:17.010
> 
> 标签：javascript, setinterval, each, jquery

考虑一个重复循环

```
setInterval(function(){
$('.test').each(function(idx){
    var duration = 1000;
    $(this).delay(duration*idx);
    Some stuff here
});
}, 4000); 
```

如何计算内部循环`setInterval`动态设置所花费的总时间？

在这里，如果我们有 4 个元素的 class of `test`，则循环与`setInterval`of完美配合`4000`。如何使变量动态设置此值？例如，设置它`6000`，当我们有 6 个元素时，等等。

我的问题是，我不能使用`duration*idx`for的值`setInterval`，因为它在`idx function`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T11:00:46.743

您可以使用[.length](http://api.jquery.com/length/)来计算元素的数量：

```
var total  = $('.test').length,
    timer  = 1000,
    result = parseInt(timer*total); 
```

然后，执行您的操作！

* * *

**已编辑，以澄清 .lenght 超过 .size() 的使用：**

*.size [()](http://api.jquery.com/size/)方法在功能上等同于[.length](http://api.jquery.com/length/)属性；但是，首选[.length](http://api.jquery.com/length/)属性，因为它没有函数调用的开销。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:04:09.260

最简单的方法是有差异。在开始时间和经过时间之间。

```
start = new Date().getTime();
 elapsed = new Date().getTime() - start; 
```

# regex - 更改 awk 模式中的正则表达式分隔符

> ID：10563105
> 
> 赞同：6
> 
> 时间：2012-05-12T10:57:43.703
> 
> 标签：regex, awk, gawk, nawk

是否可以将默认正则表达式分隔符（斜杠）更改为其他字符？

我尝试使用**sed**语法来做到这一点，但它没有用。

```
$ gawk '\|bash| { print } ' backup.sh
gawk: |bash| { print }
gawk: ^ syntax error 
```

我正在尝试的正则表达式有很多斜杠。将它们全部转义会使它变得丑陋且不可读。我尝试将 / 更改为 | 但它没有用。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:02:40.220

AWK 不支持。请改用变量。

```
gawk 'BEGIN {pattern = "/"} $0 ~ pattern {print}' backup.sh 
```

# c - Linux 实时调度优先级（SCHED_FIFO 和 SCHED_RR）的实际使用？

> ID：10563106
> 
> 赞同：6
> 
> 时间：2012-05-12T10:58:13.937
> 
> 标签：c, linux, kernel, real-time, scheduler

我正在试验，`SCHED_FIFO`我看到了一些意想不到的行为。我使用的服务器有 12 个内核，禁用了超线程。所有可配置的中断都已设置为在 CPU 0 上运行。

我的程序开始使用 pthreads 库为低优先级任务创建一个线程，而不更改调度策略，并将 CPU 亲和性设置为核心 0。然后父线程将其 CPU 亲和性设置为核心 3，并将其自己的调度策略设置为`SCHED_FIFO`使用`sched_setscheduler()`pid 零和优先级1 然后开始运行非阻塞循环。

程序本身运行良好。但是，如果我在程序运行时第二次尝试登录服务器，终端将无响应，直到我停止程序。这就像调度程序试图在与实时进程相同的核心上运行其他进程。

1.  我错过了什么？
2.  调度程序是否仍会尝试在运行实时进程的核心上运行其他进程？如果是这样，有没有办法防止这种情况？
3.  在父级中设置调度策略会`sched_setscheduler()`改变之前创建的子级的行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T12:19:54.700

`sched_setscheduler`设置进程的调度**程序**，而不是线程。看：

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/sched_setscheduler.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sched_setscheduler.html)

如果要为线程设置调度程序，则需要在创建新线程之前对新线程的属性对象使用`pthread_attr_setschedpolicy`和函数。`pthread_attr_setschedparam`

我不确定 Linux 在满足这些要求方面的一致性如何，但您至少应该首先确保您的代码符合规范，然后根据需要进行调整...

# jsf - PrimeFaces fileDownload 方法没有被调用？

> ID：10563108
> 
> 赞同：3
> 
> 时间：2012-05-12T10:58:40.597
> 
> 标签：jsf, primefaces, bytearray, download

我有多个页面允许下载相同的资源（从我的数据库中检索）。

问题是下载只适用于其中一些，即使使用相同的代码并调用相同的 bean。

这件事变得非常烦人，因为在非工作页面上，单击下载链接只会重新加载页面而没有任何消息/异常，所以我无法找出发生了什么。

这是我的 BEAN 代码：

```
package ManagedBeans;

import ejb.DispensaManagerLocal;
import entity.Dispensa;
import entity.Utente;
import java.io.ByteArrayInputStream;
import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;
import org.primefaces.event.RateEvent;
import org.primefaces.model.DefaultStreamedContent;
import org.primefaces.model.StreamedContent;

/**
 *
 * @author stefano
 */
@ManagedBean
@RequestScoped
public class DispensaBean {

    @EJB
    private DispensaManagerLocal dispensaManager;
    @ManagedProperty(value = "#{loginBean.utente}")
    private Utente utente;

    public Utente getUtente() {
        return utente;
    }

    public void setUtente(Utente utente) {
        this.utente = utente;
    }

    /**
     * Creates a new instance of DispensaBean
     */
    public DispensaBean() {
    }

    public StreamedContent getDownload() {
        String id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("dispensaId");        
        System.out.println("________" + id);
        Dispensa d = dispensaManager.findById(Integer.parseInt(id));        
        String type = getMimeFromByte(d.getDatiFile());
        String estensione = "";
        if(type.equals("application/pdf")){
            estensione = ".pdf";
        } else if(type.equals("application/zip")) {
            estensione = ".zip";
        } else if(type.equals("application/vnd.ms-powerpoint")) {
            estensione = ".ppt";
        }        
        return new DefaultStreamedContent(new ByteArrayInputStream(d.getDatiFile()), type, d.getTitolo() + estensione);
    }

    private String getMimeFromByte(byte[] src) {
        if (src[0] == 0x25 && src[1] == 0x50 && src[2] == 0x44 && src[3] == 0x46) {
            return "application/pdf";
        }
        if (src[0] == 0x50 && src[1] == 0x4b) {
            return "application/zip";
        }
        if (src[0] == 0xd0 && src[1] == 0xcf && src[2] == 0x11 && src[3] == 0xe0 && src[4] == 0xa1 && src[5] == 0xb1 && src[6] == 0x1a && src[7] == 0xe1) {
            return "application/vnd.ms-powerpoint";
        }
        return "application/octet-stream";
    }

} 
```

现在，在非工作页面上，`getDownload()`不调用该方法，因为它不打印任何内容。

这是下载按钮代码

```
<h:form style="float: right">
    <pou:commandLink id="downloadDispensa" ajax="false" disabled="#{!loginBean.logged}">
       <pou:graphicImage value="./resources/images/download.png" height="30"/>
       <pou:fileDownload value="#{dispensaBean.getDownload()}"/>                                                    
       <f:param name="dispensaId" value="#{dispensa.id}"/>
    </pou:commandLink>                                
</h:form> 
```

我注意到下载链接只是重新加载页面而不是调用该方法，并且这只发生在`#{dispensa.id}`依赖于 GET 参数的页面中。

例如，`dispensa.xhtml`如果没有传递 GET 参数，我有一个名为显示我在数据库中的所有文件的页面。

实际上，`dispensa.xhtml?id=5`将只显示 id=5 的文件。

在第一种情况下，单击下载链接可以正常工作。在第二种情况下执行此操作将重新加载页面并丢失 GET 参数，因此它将加载`dispensa.xhtml`而不是`dispensa.xhtml?id=5`.

我认为使用 GET 参数存在一些问题，但是..昨天它工作了，我没有更改此代码！

另一个 NON 工作页面是`ricerca.xhtml`显示由 给出的查询的（多个）结果`ricerca.xhtml?key=query`。

最后，为了搞砸，在`profile.xhtml?user=username`WORKS 中下载。

这破坏了我关于 GET 参数的整个理论。

为避免出现 null `byte[] datiFile`，我以这种方式编辑了我的`Dispensa`实体：

```
@Basic(optional = true, fetch=FetchType.EAGER)
@Lob
@Column(name = "datiFile")    
private byte[] datiFile; 
```

我不知道该怎么做，因为它没有说出了什么问题，它只是重新加载页面，绕过我的下载！

编辑 ：

我尝试更改我的`getDownload()`方法以返回`File`我的 HD 上的 a，以了解问题是否是由 db 上的空数据引起的，但它仍然无法正常工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:30:31.677

似乎我通过使用替代解决方案解决了这个问题。

我已经改变了一切

```
<h:form style="float: right">
        <pou:commandLink id="downloadDispensa" ajax="false" disabled="#{!loginBean.logged}">
           <pou:graphicImage value="./resources/images/download.png" height="30"/>
           <pou:fileDownload value="#{dispensaBean.getDownload()}"/>                                                    
           <f:param name="dispensaId" value="#{dispensa.id}"/>
        </pou:commandLink>                                
    </h:form> 
```

至

```
<h:form style="float: right">
    <h:outputLink id="downloadDispensa" disabled="#{!loginBean.logged}" target="_blank" value="./download.xhtml?id=#{dispensa.id}">
         <pou:graphicImage value="./resources/images/download.png" height="30"/>                                    
     </h:outputLink>                                
</h:form> 
```

`download.xhtml`这个代码在哪里：

```
<script type="text/javascript">
    if(document.referrer == "" || document.referrer == "download.xhtml"){
        self.location='./index.xhtml';
    }
    document.onblur = new Function('self.close()');
</script>
<h:body onload="document.getElementsByClassName('downloadDispensa')[0].click();" rendered="#{loginBean.logged}">
    <h:form>            
        <h:commandLink class="downloadDispensa" id="downloadDispensa" style="display: none">                
            <pou:graphicImage value="./resources/images/download.png" height="30"/>
            <pou:fileDownload value="#{dispensaBean.download}"/>                                                                                       
            <f:param name="dispensaId" value="#{request.getParameter('id')}"/>
        </h:commandLink> 
    </h:form>        
</h:body>
<h:body onload="self.location='./index.xhtml';" rendered="#{!loginBean.logged}">
</h:body> 
```

因此它会加载下载页面，自动点击下载链接，并在显示下载对话框时自动关闭页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-30T15:14:31.133

我遇到了同样的问题。我已经对其进行了调试，并知道表单中有表单，因为我在另一个模板中包含了模板，因为它是一个摘要屏幕。所以我已经删除了内部模板中的所有 h:form 标签，除了根 xhtml 页面这些模板，它工作。

# xcode - 可可对 NSTabViewItem 使用单独的控制器？

> ID：10563110
> 
> 赞同：1
> 
> 时间：2012-05-12T10:59:03.947
> 
> 标签：xcode, cocoa, nstabview

我有一个具有不同样式的 NSTabViewItems 的 NSTabView。有没有办法可以将选项卡控制器分离到与外视图控制器不同的类中？只是为了让我的代码保持整洁。我还希望将标签内容保存在单独的笔尖中。

注意：这是针对 NSTabViewItem 而不是针对 UITabs（不是 iPhone）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:46:41.357

当然可以，但是需要在代码中进行一些设置。创建单独的 NIB，每个视图一个。创建一个自定义子类`NSViewController`来加载和拥有每个 NIB 并控制其中的视图。将每个视图NIB的File's Owner的类设置为对应的类。根据需要连接插座。

当您在其 NIB 中配置选项卡视图时，它基本上是空的。您将添加选项卡，但视图中没有任何内容。

在带有选项卡视图的 NIB 的控制器中`-awakeFromNib`，为应该进入选项卡视图的每个视图实例化视图控制器。将这些新视图控制器的视图设置为`NSTabViewItem`选项卡视图的视图。

# java - Java和同步两个线程

> ID：10563114
> 
> 赞同：1
> 
> 时间：2012-05-12T10:59:12.777
> 
> 标签：java, synchronization

我有两个线程修改相同的对象。`ArrayList`对象是（不是向量）中的自定义、非同步对象。我想让这两个线程很好地协同工作，因为它们是同时被调用的。

这是线程 1 中唯一重要的方法。

```
public void doThread1Action() {
  //something...
  for(myObject x : MyArrayList){
    modify(x);
  }
} 
```

这是线程2中的一个方法：

```
public void doThread2Action() {   
  //something...
  for(myObject x : MyArrayList){
    modifyAgain(x);
  }
} 
```

目前，在测试时，我偶尔会遇到`ConcurrentModificationExceptions`。（我认为这取决于线程 1 在线程 2 尝试修改对象之前完成迭代的速度。）

我是否认为通过简单地附加`synchronized`到这两种方法的开头，线程将以同步的方式一起工作，而不是尝试访问`ArrayList`？或者我应该将 更改`ArrayList`为`Vector`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:03:34.960

ConcurrentModificationException 不是源于修改集合中的对象，而是源于在迭代器处于活动状态时从集合中添加/删除。

共享资源是集合，必须有第三种方法使用和添加/删除。要获得正确的并发性，您必须在访问它的所有方法中同步对集合资源的访问。

为了避免同步块过长，一种常见的模式**可能**是将集合复制到同步块中，然后对其进行迭代。如果您这样做，请注意您首先谈论的问题（对象的并发修改）**再次出现**- 但这次您可以锁定另一个资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:14:25.760

您不需要同步对列表的访问，只要您不对其进行结构修改，即只要您不从列表中添加或删除对象。您也不应该看到`ConcurrentModificationException`s，因为仅当您在结构上修改列表时才会抛出这些。

因此，假设您只修改列表中包含的对象，但不添加、删除或重新排序列表中的对象，则可以在修改时同步包含的对象，如下所示：

```
void modifyAgain(MyObject x) {
    synchronized(x) {
        // do the modification
    }
} 
```

我不会`synchronized`在方法上使用修饰符`modifyAgain()`，因为这不允许同时修改列表中的两个不同对象。

另一个线程中的`modify()`方法当然必须以与`modifyAgain()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T11:19:16.513

您需要在同一个锁上同步访问集合，因此仅在方法上使用同步关键字（假设它们在不同的类中）将锁定两个不同的对象。

所以这里有一个你可能需要做的例子：

```
Object lock = new Object();

public void doThread1Action(){

//something...
    synchronized(lock){
        for(myObject x : MyArrayList){
           modify(x);
    }

}

public void doThread2Action(){

//something...
    synchronized(lock){
        for(myObject x : MyArrayList){
            modifyAgain(x);
    }

} 
```

您也可以考虑使用 a`CopyOnWriteArrayList`而不是`Vector`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T11:19:40.067

我猜你的问题与`ConcurrentModificationException`. 这个类在它的 Java 文档中说：

> /** * 当这种修改是不允许的时，
> 检测到对象的并发修改的方法可能会抛出此异常。
> 
> */

在您的情况下，问题是列表中的迭代器并且可能会被修改。我想通过以下实现你的问题将是唯一的：

```
public void doThread1Action()
{
    synchronized(x //for sample)
    {
       //something...
       for(myObject x : MyArrayList)
       {
          modify(x);
       }
    }
} 
```

接着：

```
public void doThread2Action()
{
    synchronized(x //for sample)
    {
       //something...
       for(myObject x : MyArrayList)
       {
          modifyAgain(x);
       }
    }
} 
```

为了获得更好的结果，我希望有人纠正我的解决方案。

# vb.net - Vb.net FTP - 获取时间戳值？

> ID：10563121
> 
> 赞同：0
> 
> 时间：2012-05-12T11:00:12.870
> 
> 标签：vb.net, string, ftp, timestamp

我正在获取这样的 ftp 文件的时间戳值：

```
ftpRequest.Method = System.Net.WebRequestMethods.Ftp.GetDateTimestamp 
```

通过：

```
ftpResponse.StatusDescription 
```

它返回：

> 213 20120512102159

我很确定 213 是 ftp 状态代码，然后 20120512102159 将是 2012、05(may)、12(12th)，然后可能是 HH MM SS ...但这与我的本地系统不匹配，所以可能FTP服务器的本地时间？

无论如何......这个值是一个字符串，我错过了一些明显的日期值吗？否则，如何将此字符串作为日期时间值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:14:12.740

尝试这样的事情来解析字符串：

```
Dim dateValue as DateTime
dateValue = DateTime.ParseExact(ftpResponse.StatusDescription.substring(4, "yyyyMMddHHmmss", 
                                            CultureInfo.InvariantCulture, 
                                            DateTimeStyles.None); 
```

# facebook - 多朋友选择器对话框 - 显示用户列表

> ID：10563128
> 
> 赞同：0
> 
> 时间：2012-05-12T11:01:31.403
> 
> 标签：facebook, facebook-graph-api

是否可以在多好友选择器对话框中显示用户创建的自定义好友列表？目前唯一的选择是：

*   所有朋友
*   应用程序用户
*   可以邀请的朋友
*   已选中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:09:39.560

Facebook 不再提供多朋友选择器对话框。您需要编写自定义版本。

如果你让它工作，它会在大约 2 周内停止。[http://developers.facebook.com/docs/reference/fbml/multi-friend-selector/](http://developers.facebook.com/docs/reference/fbml/multi-friend-selector/)

# magento - 如何在 magento 1.6 中将客户电子邮件添加到订单网格

> ID：10563138
> 
> 赞同：1
> 
> 时间：2012-05-12T11:03:02.573
> 
> 标签：magento

我正在使用 magento 1.6 并希望将客户电子邮件、优惠券代码和运输详细信息添加到销售订单网格

你们能告诉我怎么做吗

它尝试使用这个

```
copy
app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php
to
app/code/local/Mage/Adminhtml/Block/Sales/Order/Grid.php

then under the following line

$collection = Mage::getResourceModel($this->_getCollectionClass());

add

$collection->getSelect()->joinLeft(array('sfo'=>'sales_flat_order'),'sfo.entity_id=main_table.entity_id',array('sfo.customer_email'));

then in the _prepareColumns() method add

    $this->addColumn('customer_email', array(
        'header' => Mage::helper('sales')->__('Customer Email'),
        'index' => 'customer_email',
        'filter_index' => 'sfo.customer_email',
    ));
note. you will need to add a 'filter_index' to all calls to addColumn pointing to main_table.field_name 
```

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:03:53.383

我相信我已经[找到了一个扩展](http://www.magentocommerce.com/magento-connect/order-grid-manager-8044.html)来做你正在寻找的东西。还有[这个免费的扩展](http://www.magentocommerce.com/magento-connect/enhanced-admin-product-grid.html)，但我不知道它是否足够强大，可以满足您的需求。最坏的情况，这对你来说是一个起点？？而且我相当肯定[这个扩展可以满足你的所有需求](http://www.mageworx.com/extended-orders-magento-extension.html)......我很想买它！

正如我经常说的，[最好买一个扩展，这样你就不会写代码了](https://stackoverflow.com/questions/10580712/magento-1-6-adding-custom-fields-for-registration-page/10606489#10606489)。

# java - java 草稿 AI（多线程）

> ID：10563142
> 
> 赞同：3
> 
> 时间：2012-05-12T11:03:24.877
> 
> 标签：java, artificial-intelligence

这是我的第一个问题，如果我做错了什么，请告诉我...

我目前正在用 Java 制作草稿游戏。事实上，除了人工智能之外，一切都正常。AI 目前是单线程的，使用极小极大和 alpha-beta 修剪。这段代码有效，我认为，它只是很慢，我只能深入我的游戏树 5。

1.  我有一个函数可以接收我的主板、深度（从 0 开始）和最大深度。在这个最大深度处，它停止，返回棋盘上棋子最多的玩家值（-1,1 或 0）并结束递归调用。
2.  如果还没有达到最大深度，我会计算所有可能的动作，我会一一执行它们，以某种方式将我的更改存储到主板上。
3.  我还使用 alpha-beta 修剪，例如，当我发现一个可以让玩家获胜的动作时，我不会担心下一个可能的动作。
4.  我从该主板状态递归地计算下一组移动。退出递归调用时，我撤消了这些更改（从第 2 点开始）。我存储这些递归调用返回的值并在它们上使用 minimax。

情况就是这样，现在我有一些问题。我想更深入地研究我的游戏树，因此我必须减少计算移动所需的时间。

1.  AI 可能的走法（例如 AI 可以选择的走法）的值总是 0 是否正常？或者如果我可以更深入地研究递归，这种情况会改变吗？因为此时我只能在递归中进行 5 次深度（最大深度），否则它需要的时间太长了。
2.  我不知道它是否有用，但我如何将此递归转换为多线程递归。我认为这可以将工作时间除以一些价值......

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:10:45.050

> *1\. AI 可能的走法（例如 AI 可以选择的走法）的值总是 0 是否正常？*

对我来说听起来很奇怪。如果可能的移动数为 0，则该玩家不能玩他的回合。这应该不是很常见，还是我误解了什么？

如果您所指的值代表该动作的“分数”，那么显然“始终为 0”表示所有动作都同样好，这显然不是一个很好的 AI 算法。

> *2.我不知道它是否有用，但是我如何将这个递归转换为多线程递归。我认为这可以将工作时间除以一些价值......*

我相信它会非常有用，尤其是考虑到如今大多数机器都有多个内核。

让它变得复杂的是你的“尝试移动，记录它，撤消它，尝试下一步”的方法。这表明您正在使用**可变**数据结构，这使得并行化算法变得极其复杂。

如果我是你，我会让边框/游戏状态由一个**不可变**的数据结构来表示。然后，您可以将每个递归调用视为一个单独的任务，并使用线程池来处理它们。您将接近 CPU 的最大利用率，同时大大简化代码（通过删除整个恢复到先前状态的代码）。

假设您的机器上确实有多个内核，这可能会让您更深入地了解树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:03:36.007

我强烈推荐阅读这本书：

[领先一步：跳棋的计算机完美](https://rads.stackoverflow.com/amzn/click/com/0387765751 "领先一步：跳棋的计算机完美")

它将为您提供有关跳棋游戏中计算机 AI 的深入历史，并且可能会为您的评估功能提供一些帮助。

与其让评估函数只对不同的棋子给出 1/0/-1，不如对每个常规棋子给出 100 分，对国王给出 200 分。然后给块结构奖金。例如，如果我的棋子形成了一个无法被捕获的安全结构，那么我会得到奖励。如果我的棋子独自在棋盘中间，那么我会得到负奖金。正是这种片段配置的丰富功能将使您的程序运行良好。最终得分是对两名球员的评价之差。

此外，您不应该以统一的深度停止搜索。静止搜索会扩展搜索，直到棋盘“安静”。在跳棋的情况下，这意味着棋盘上没有强制捕获。如果您不这样做，您的程序将运行得非常糟糕。

正如其他人所建议的那样，转置表可以很好地减少搜索树的大小，尽管程序运行速度会稍慢。我还推荐历史启发式，它易于编程，并且将大大改善树中移动的顺序。（谷歌历史启发式有关这方面的更多信息。）

最后，董事会的代表可以产生很大的不同。搜索的快速实现不会在每次应用移动时都复制棋盘，而是尝试快速修改棋盘以应用和撤消移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T20:39:08.990

（我假设你所说的草稿是指我们在美国这里所说的跳棋。）

我不确定我是否理解你在游戏树中的评分系统。您是否通过说“如果玩家的棋子比对手多，则该位置得分 1 分，玩家的棋子少，则为 -1 分，如果他们的棋子数量相同，则为 0 分？”

如果是这样，那么您的算法可能只是前五步的捕获厌恶，或者事情正在发挥作用，因此所有捕获都是平衡的。我对跳棋并不十分熟悉，但对于只有五步棋的游戏来说，这似乎并非*不可能。*如果它只有 5*层*（其中一层是一个玩家的移动，而不是一整套相反的移动），它可能一点也不稀奇。

您可能想通过在您绝对知道正确答案的棋盘位置上输入来测试这一点，也许棋盘上只有两个棋子，其中一个棋子可以捕获。

不过，作为一般原则，棋盘评估功能没有多大意义——它忽略了棋子和加冕棋子之间的区别，将三人优势与单人优势视为相同。

# android - 我如何理解我在触摸事件中拖动的方向？

> ID：10563145
> 
> 赞同：3
> 
> 时间：2012-05-12T11:04:06.357
> 
> 标签：android, touch

我的意思是我想了解用户在屏幕上拖动手指的哪个方向？如何使用触摸事件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T11:12:14.740

你可以通过这个例子。当您在屏幕上滑动时，会显示一个 Toast。

[例子](https://stackoverflow.com/a/938657/1298796)

# android - 做我的主菜单的最佳方式（ListView vs ScrollView + LinearLayout）

> ID：10563147
> 
> 赞同：0
> 
> 时间：2012-05-12T11:04:22.277
> 
> 标签：android, listview, scrollview, android-linearlayout

我的应用程序的主菜单应如下所示： http: [//imageshack.us/photo/my-images/31/accueilpart1.jpg/](http://imageshack.us/photo/my-images/31/accueilpart1.jpg/)滚动后[http://imageshack.us/photo/my-images/38 /accueilpart2.jpg/](http://imageshack.us/photo/my-images/38/accueilpart2.jpg/)

我现在有点迷茫，因为我不知道带有可点击部分标题的列表视图之间的最佳方式是什么（我想我将不得不使用不同的适配器或一个自定义适配器进行测试，例如“if XXX.getClass() == Test.class") 或另一个选项是可滚动视图内的线性布局，我自己放置每个项目（可能使用枚举类型）。

有人能帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:16:44.817

我使用 a`ListView`和 my创造了这种外观[`MergeAdapter`](https://github.com/commonsguy/cwac-merge)。

在您的情况下，它似乎是一个操作栏（可能使用 ActionBarSherlock），用于带有徽标、刷新按钮等的栏，以及一个`ListView`持有：

*   a`View`对于每个标题（Actualité 等）
*   “主要文章”的单曲`View`（Porrentruy）
*   `ListAdapters`每个标题内的文章系列

# c# - 存储应用程序特定数据的正确位置在哪里？

> ID：10563148
> 
> 赞同：42
> 
> 时间：2012-05-12T11:04:33.860
> 
> 标签：c#, filesystems

我正在开发一个小型 C# Winforms 游戏，我想做的一件事是保存应用程序特定的数据。但是，我很难理解应该存储的正确位置。

据我所见，应用程序可能存储多种类型的数据，因此可以将其保存在不同的位置：

**1\. 应用程序属性** - 设置，例如应用程序存储数据的位置、上次登录的用户是谁、默认窗口大小、位置等。这些信息是否应该进入 app.settings，或者可能进入注册表？

**2\. 全局应用程序数据** ——这可能包括在这台机器上运行应用程序的每个用户使用的精灵和其他游戏资产。这些通用数据将存储在哪里？值得注意的是，在我的特定情况下，默认安装不会提供此数据，用户将被允许添加他们自己的游戏资产，这些资产应该可供同一台计算机上的任何其他用户使用。

**3\. 用户特定的应用程序数据** ——这将包括用户保存的游戏文件、他们的特定应用程序偏好和他们的个人资料信息。我应该在哪里存储这个？

理想情况下，我希望我的应用程序与 Windows XP、Vista、7 以及即将推出的 Windows 8 兼容——我不知道这是否会改变方法，但希望它有助于提供建议。

这是我第一次尝试这种发展，我会很感激一些“最佳实践”的建议。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-12T11:13:08.230

**问题2：**
我建议在`Environment.SpecialFolder.CommonAppData`（默认映射到`C:\ProgramData`Windows7）中使用子文件夹。这是一个隐藏文件夹。

**问题 3：**如果您希望用户不打算备份/修改这些文件，请将
这些文件放入`Environment.SpecialFolder.AppData`（默认映射到隐藏文件夹）。`C:\Users\[USERNAME]\AppData\Roaming`有的游戏也会把自己存档的游戏放到`Environment.SpecialFolder.MyDocuments`里面，可能是因为用户更容易在里面找到。

示例代码：

```
var directory = Environment.GetFolderPath(Environment.SpecialFolder.AppData);

using (FileStream fs = File.Create(Path.Combine(directory, "myAppDirectory", "myFile.txt")))
{
    // write data               
} 
```

有关[Windows 上特殊文件夹的完整列表，](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)请点击链接

**旁注**

*   允许用户在这些目录中移动，因此请确保使用上面提供的代码
*   Windows 7 x64 中存在与`CommonAppData`目录有关的错误，并且该错误在 Windows 8 x64 CP 中变得更加严重。我在博客上写过这个：[在 Windows 7 x64 和 Windows 8 x64 上移动 CommonAppData 目录后出现的问题](http://www.hiddenfeatures.net/2012/03/inconsistencies-when-accessing-the-registry-on-windows-x64/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-01-20T21:15:25.223

**应用程序属性**- 您描述的大多数应用程序数据应该特定于每个用户并放入`Environment.SpecialFolder.ApplicationData`（`%appdata%`环境变量）。我通常会避免将数据放入注册表，因为它很难找到、编辑和修复。如果您不希望在用户漫游时将数据与用户关联（可能文件很大或以某种方式连接到计算机），那么您可以将其放入`Environement.SpecialFolder.LocalApplicationData`（`%localappdata% 环境变量）。

**全局应用程序数据**- 我会将全局应用程序数据放入`Environment.SpecialFolder.CommonApplicationData`（`%programdata%`环境变量）

**用户特定的应用程序数据**- 与 #1 相同，除非数据旨在让用户轻松找到（例如保存的游戏），在这种情况下，它应该进入`Environment.SpecialFolder.MyDocuments`没有关联的环境变量。

正如 yas4891 指出的那样，您可以使用[此处列出的 Environment.SpecialFolder 值](https://docs.microsoft.com/en-us/dotnet/api/system.environment.specialfolder?view=netframework-4.7.2)`Environment.GetFolderPath()`之一可靠地获取这些文件夹路径。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-05-12T11:14:46.470

为什么不将数据保存到对象并将其写入文件。对每种类型使用不同的文件。

# javascript - 用于处理呈现的 html 表单的更改日志的插件

> ID：10563154
> 
> 赞同：0
> 
> 时间：2012-05-12T11:05:10.560
> 
> 标签：javascript, jquery

今天我接到学校的作业，我有点困惑，这个作业要求我做什么，我在这里粘贴相同的内容

作业：设计和编写一个 jQuery 插件来处理呈现的 html 表单的更改日志。

1）您需要存储设置为表单输入的初始值。

2) 在提交表单时，您需要计算对表单值所做的更改。

3) 将更改日志对象作为“changelog”参数添加到表单中。

谁能弄清楚这个任务要求做什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:16:18.137

1.  存储默认配置（初始值）。我猜，一个简单的变量一开始就可以。
2.  编写一个函数将提交的值与默认配置进行比较。
3.  创建对象并将其附加到 DOM
4.  将其设计为 jQuery 插件的一部分。

看一眼：

*   [jQuery 选择器](http://api.jquery.com/category/selectors/)
*   [jQuery 插件](http://docs.jquery.com/Plugins/Authoring)
*   值比较（即字符串/数字）
*   [DOM 操作](http://api.jquery.com/category/manipulation/dom-insertion-inside/)（即 jQuery 的函数，如 append. 添加对象）

[http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)

您需要一个带有对 jquery 插件的脚本引用的表单。您可以先用纯 JS/HTML 编写代码，然后将其放在插件中。对于初学者来说是这样的：

```
<script type="text/javascript">
var default = "my value";

/* ... */

function check_values() {
    /* select and check input */
    /* ... */
    /* append object within the form ? */
}
</script>

<form ... onsubmit="check_values();">

    /* inputs etc. ... */

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:24:56.063

我开发了一些类似类型的插件。请注意： [https ://github.com/mukeshyadav/changelog-form](https://github.com/mukeshyadav/changelog-form)

# python - 3 方代码的许可证：我必须记住什么？组织它们的最佳方式是什么？

> ID：10563162
> 
> 赞同：3
> 
> 时间：2012-05-12T11:06:27.207
> 
> 标签：python, licensing, virtualenv

我想将 Python 应用程序作为压缩的 Virtualenv 目录提供给客户端。我想知道包含 Python 本身和使用的 3 方库的许可证的最佳方式是什么。

我必须记住什么？

我需要包含 Python、pip 和任何已安装库的许可证，对吗？

组织许可证的最佳方式是什么？目前，我会将每个许可证都包含在一个名为 Licence.txt 的文件中。这是否足够，或者我是否需要指定可以找到所用代码的确切路径？

这是我为客户做的第一个项目，我有点不知所措；）

我试图在互联网上的某个地方找到答案，但我什么也没找到。

谢谢！

此致，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:29:33.433

我建议阅读[PythonSoftwareFoundationFAQ](http://wiki.python.org/moin/PythonSoftwareFoundationLicenseFaq#If_I_bundle_Python_with_my_application.2C_what_do_I_need_to_include_in_my_software_and.2BAC8-or_printed_documentation.3F)。这可能是您正在寻找的：

> 您必须保留您重新分发的代码中的所有版权声明，并在软件分发中包含 PSF 许可证和 Python“许可证堆栈”中的所有其他许可证的副本。“许可证堆栈”是 Python 开发历史的结果，如此处所述（此页面还列出了堆栈中的所有许可证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:12:17.037

我不是律师，但就常识而言，我很确定，当您分发大量受众多许可证涵盖的受版权保护的文档时，您必须清楚地传达哪些许可证涵盖哪些文档才能为被许可人了解他们必须遵守哪些许可条件。

即假设您可以分发一大堆代码并说“其中一些被GPL覆盖，一些是公共领域，一些被专有许可覆盖”似乎很荒谬，而没有说哪个是哪个。如果你这样做了，那么有人可以使用你的一些专有代码，就好像它是公共领域一样，并根据你的信息提出他们真诚地相信它是公共领域的论点。

# jquery - 使用文本调整器后工具提示位置错误

> ID：10563170
> 
> 赞同：0
> 
> 时间：2012-05-12T11:07:37.923
> 
> 标签：jquery

我结合使用两个 jquery 插件。文本调整器和工具提示。加载站点后，工具提示位于正确的位置。当我调整文本大小时，工具提示保持第一个位置。所以它高于所需位置。

单击文本调整大小后必须刷新工具提示？我怎样才能做到这一点？

文本调整大小功能：

```
jQuery( "#textsizer-classnames a" ).textresizer({
            target: "#maincontent",
            type: "cssClass",
            sizes: [ "small-text", "medium-text", "large-text" ],
            selectedIndex: 0
}); 
```

工具提示功能：

```
$('.tTip').betterTooltip({speed: 350, delay: 700}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:18:36.880

嗯，你可以刷新整个页面，或者尝试这个调整。

```
$('.tTip').load('/myscript'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:19:46.027

我认为不重写 betterTooltip 插件的某些部分是不可能的。实际上，当您运行`betterTooltip()`它时，它会存储将具有工具提示的对象的初始位置和大小。最好在每个悬停事件上检查元素的位置和大小。

最初隐藏的元素也会出现此问题，其中一位评论者解决了它，这里是解决方案的链接：http: [//net.tutsplus.com/tutorials/javascript-ajax/build-a-better-tooltip-with -jquery-awesomeness/comment-page-3/#comment-396215](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-better-tooltip-with-jquery-awesomeness/comment-page-3/#comment-396215)

您也应该通过尺寸检查来扩展上述解决方案。

如果您需要进一步的帮助，请添加评论！

# iphone - 拖动 pin 时自动滚动 mkmapview

> ID：10563175
> 
> 赞同：4
> 
> 时间：2012-05-12T11:09:01.073
> 
> 标签：iphone, objective-c, mkmapview, mkplacemark

是否有任何好的代码可以在拖动 pin 时实现 MKMapView 的自动滚动？

我想要达到的效果是当我拖动图钉并到达地图边缘时地图滚动。当我将 pin 移出边缘时，我希望滚动停止，当我放下它时，map shell 会移动，直到 pin 到达屏幕中心。

我知道如何在所选位置上居中地图，但我真的不知道如何在拖动图钉时滚动它。

如果有人可以指导我了解如何实现它的逻辑，那将真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:15:28.807

```
MKMapRect mapRect = [self.mapView visibleMapRect];

CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(42.777126,-76.113281);

MKMapPoint point = MKMapPointForCoordinate(coordinate);
mapRect.origin.x = point.x - mapRect.size.width * 0.3;
mapRect.origin.y = point.y - mapRect.size.height * 0.70;

[self.mapView setVisibleMapRect:mapRect animated:YES]; 
```

# python - 无向图重新排序顶点

> ID：10563176
> 
> 赞同：0
> 
> 时间：2012-05-12T11:09:02.243
> 
> 标签：python, graph, numpy

给定一个邻接矩阵和一个新的顶点排序，我们如何在 python 中置换图？这个任务有图书馆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:45:49.310

您可以手动构建新的邻接矩阵。`old`是旧的邻接矩阵，并且`perm`是一个向量，用于存储每个新顶点的旧名称，即如果顶点`j`移动到顶点，`i`则`perm[i] == j`.

```
import numpy as np

def rearrange(old, perm):
    n = old.shape[0]
    new = np.zeros_like(old)

    for x in xrange(n):
        for y in xrange(x+1): # only need to traverse half the matrix
            # the matrix is symmetric (because of undirectedness)
            new[y, x] = new[x, y] = old[perm[x], perm[y]]
    return new 
```

（请注意，我假设您将邻接矩阵作为密集矩阵存储在`n`× `n`numpy 数组中。另外，对于 Python 3.x，`xrange`应该是`range`.）

# java - java检查值

> ID：10563177
> 
> 赞同：0
> 
> 时间：2012-05-12T11:09:08.670
> 
> 标签：java, android, arraylist

我正在尝试搜索 alpabet 数组中的 char 是否等于 textCharArray 的元素。如果是这样，请做一些数学运算：从字母表中添加到 arrayList 值的字符数。但我收到一个错误：

**java.lang.ArrayIndexOutOfBoundsException**

问题应该出在cicles上。但我不知道如何正确修复它。编码：

```
 outputText.setText("");
            inputTextString = inputText.getText().toString().replace(" ", ""); //panaikinami tarpa
            char[] textCharArray = inputTextString.toCharArray(); //seka paverciama char masyvu
            int l = textCharArray.length;
            char[] alphabet = {'A','B','C','D','E','F','G','H','I','K','L','M','N','O','P','Q','R','S','T','V','X','Y','Z'};
            int alpLenght = alphabet.length;
            System.out.println(alpLenght);
            stringKey = inputKey.getText().toString();
            int k = Integer.parseInt(stringKey);
            List<Integer>keyList = new ArrayList<Integer>();
            while(k > 0){
                keyList.add(k%10);
                k = k /10;
            }
            Collections.reverse(keyList);
            int j = 0;
            int temp;
            for(int i = 0; i <= l; i++){
                for(int ii = 0; ii < alpLenght; i++){
                    if(j < keyList.size()){
                        if(textCharArray[i] == alphabet[ii]){
                            temp = ii + keyList.get(j);
                            System.out.println("Uzkoduotas: " + temp);
                            }
                        j++;
                    }

                else {
                    j = 0;
                        if(textCharArray[i] == alphabet[ii]){
                            temp = ii + keyList.get(j);
                            System.out.println("Uzkoduotas: " + temp);
                        }
                    }
                    j++;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:11:57.263

采用

```
 for(int i = 0; i < l; i++)<------Remove = 
```

**代替**

```
 for(int i = 0; i<=l; i++) 
```

`Last index of array is array.size()-1` 你试着得到`array.size()`

所以 ArrayIndexOutOfBoundException...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:16:29.727

你这里有错误

```
 for(int i = 0; i <= l; i++){
            for(int ii = 0; ii < alpLenght; i++){
                if(j < keyList.size()){
                    if(textCharArray[i] == alphabet[ii]){
                        temp = ii + keyList.get(j);
                        System.out.println("Uzkoduotas: " + temp);
                        }
                    j++;
                } 
```

由于 for 错误，您有无限循环，并且 i 正在递增，直到他越界为止。

您使用**ii**变量，但在此行中增加**i ：**

```
 for(int ii = 0; ii < alpLenght; i++){ 
```

用。。。来代替

```
 for(int ii = 0; ii < alpLenght; ii++){ 
```

# c# - Delphi 记录转换为 C# 结构并从套接字读取

> ID：10563178
> 
> 赞同：1
> 
> 时间：2012-05-12T11:09:23.000
> 
> 标签：c#, delphi, struct, record

我已经从套接字读取 Delphi 代码：

```
type
   RegbusReq2=packed record 
     Funct:char;             
     Device:char;            
     Device1:char;
     Starting:integer;       
     Quantity:smallint;      
     _CRC:Word;              
     stroka:char;            
   end;

   type                         
     crcReg=packed record
     buf:array[0..2] of byte;
     value:array[0..5] of byte;
   end;

   type                          
   myRB=record                       
   case byte of
    0:(data:RegbusReq2);
    1:(Buff:crcReg);
   end;

   type
   outVal=packed record
    cap:array[0..8] of byte;
    val:array[0..3] of single;
   end;

   type
   outValBuff=record
   case byte of
    0:(val:outVal);
    1:(Buff:array [1..25] of byte);
   end;

var
  Form1: TForm1;
  hCommFile:THandle;  
  typeCon:byte;       
  cs1: TClientSocket;
... 
```

读取数据的计时器滴答声：

```
Procedure TForm1.Timer1Timer(Sender: TObject);
var
  DataReq:myRB;
  output:outValbuff;
  Wr,Rd:Cardinal;
  i:integer;
  st:string;
begin
    //çàïîëíåíèå çàïðîñà
  DataReq.data.Funct:=chr(63);    //êîìàíäà "?"
  DataReq.data.Device:=chr(48);     //íîìåð ïðèáîðà ñò
  DataReq.data.Device1:=chr(49);    //íîìåð ïðèáîðà ìëàäøèé
  DataReq.data.Starting:=2088;     //àäðåñ â äåñ ôîðì
  DataReq.data.Quantity:=16;       //ðàçìåð äàííûõ
  DataReq.data._CRC:=CRC2(@DataReq.Buff.value,6);      //ÊÑ
  DataReq.data.stroka:=chr(13);             //ïåðåâîä ñòðîêè

PurgeComm(hCommFile,PURGE_RXCLEAR or PURGE_TXCLEAR);
if typecon=1 then begin   //COM-ïîðò
 WriteFile(hCommFile,DataReq.data,SizeOf(DataReq.data),Wr,nil);
 ReadFile(hCommFile,Output.buff,SizeOf(Output.Buff),Rd,nil);
end;
if typecon=2 then begin    //ethernet
  cs1.Active:=true;
  cs1.Socket.SendBuf(DataReq.data,SizeOf(DataReq.data));
  cs1.Socket.ReceiveBuf(output.buff,SizeOf(Output.Buff));
  cs1.Active:=false;
 end;

 for i:=1 to 25 do
 st:=st + '_' + inttostr(output.buff[i]);
 memo1.Lines.Add(st);

 edit1.Text:=FloatToStr(Round(output.val.val[0]
 *exp(2*ln(10)))/(exp(2*ln(10))));
 edit2.Text:=FloatToStr(Round(output.val.val[1]
 *exp(2*ln(10)))/(exp(2*ln(10))));
 edit3.Text:=FloatToStr(Round(output.val.val[2]
 *exp(2*ln(10)))/(exp(2*ln(10))));
 edit4.Text:=FloatToStr(Round(output.val.val[3]
 *exp(2*ln(10)))/(exp(2*ln(10))));

end; 
```

我遵循 C# 代码：

```
[StructLayout(LayoutKind.Sequential, Pack = 1, CharSet = CharSet.Ansi)]        
        public struct RegBusRec
        {
            public char Funct;
            public char Device;
            public char Device1;
            public int Starting;
            public short Quantity;
            public ushort _CRC;
            public char Message;
        }
...
private void timer1_Tick(object sender, EventArgs e)
        {
            byte[] CRCc = new byte[6];
            byte[] tmp;
            byte[] output = new byte[25];
            RegBusRec req2 = new RegBusRec();
            Crc16 crc16 = new Crc16();
            req2.Funct = '?';
            req2.Device = '0';
            req2.Device1 = '1';
            req2.Starting = 2088;
            req2.Quantity = 16;
            req2.Message = '\r';
            tmp = BitConverter.GetBytes(req2.Starting);
            CRCc[0] = tmp[0];
            CRCc[1] = tmp[1];
            CRCc[2] = tmp[2];
            CRCc[3] = tmp[3];
            tmp = BitConverter.GetBytes(req2.Quantity);
            CRCc[4] = tmp[0];
            CRCc[5] = tmp[1];
            req2._CRC = crc16.ComputeChecksum(CRCc);
            textBox6.Text += Environment.NewLine;
            textBox6.Text += "CRC: " + req2._CRC;
            cl.Client.Send(StructureToByteArray(req2));
            cl.Client.Receive(output);
            byte[] val = new byte[4];
            val[0] = output[15];
            val[1] = output[16];
            val[2] = output[17];
            val[3] = output[18];
            textBox6.Text += Environment.NewLine;
            textBox6.Text += "Query: ";
            for (int i = 0; i < StructureToByteArray(req2).Length; i++)
            {
                textBox6.Text += StructureToByteArray(req2)[i] + "_";
            }
            textBox2.Text = BitConverter.ToSingle(val,0).ToString();
            textBox6.Text += Environment.NewLine;
            textBox6.Text += "Data: ";
            for (int i = 0; i < output.Length; i++)
            {
                textBox6.Text += output[i] + "_";
            }
        }
...
static byte[] StructureToByteArray(object obj)
        {

            int len = Marshal.SizeOf(obj);
            byte[] arr = new byte[len];
            IntPtr ptr = Marshal.AllocHGlobal(len);
            Marshal.StructureToPtr(obj, ptr, true);
            Marshal.Copy(ptr, arr, 0, len);
            Marshal.FreeHGlobal(ptr);
            return arr;
        } 
```

CRC 计算正确。但是我得到了 textBox2.Text 的错误数字 - 随机数。我怎样才能正确得到这个数字？提前致谢。

Delphi 调试器的截图：

![在此处输入图像描述](../Images/fee9e3b77a3ea066e87c1b6e8019f64e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:53:39.170

好吧，我想我可能已经破译了它，但我不会指望它。

您似乎是在说 C# 代码在`textBox2`. 查看 C# 代码，`textBox2`显示来自`val`. 并`val`像这样分配：

```
val[0] = output[15];
val[1] = output[16];
val[2] = output[17];
val[3] = output[18]; 
```

请注意，这`output`是一个 C# 字节数组，因此使用从零开始的索引。

在您的 Delphi 代码中，匹配的数据结构是：

```
outVal=packed record
  cap:array[0..8] of byte;
  val:array[0..3] of single;
end;

outValBuff=record
  case byte of
  0:(val:outVal);
  1:(Buff:array [1..25] of byte);
end; 
```

因此，`cap`消耗前 9 个字节，然后接下来的 16 个是 4 个单精度值。就 C# 字节数组而言：

*   `cap`是，`output[0]`_`output[8]`
*   `val[0]`是，`output[9]`_`output[12]`
*   `val[1]`是，`output[13]`_`output[16]`
*   `val[2]`是，`output[17]`_`output[20]`
*   `val[3]`是。`output[21]`_`output[24]`

但是您正在阅读`output[15]`to `output[18]`，因此将 half of`val[1]`与 half of结合起来`val[2]`。

简而言之，您只需要修复索引。

* * *

现在，您正在使它变得更加复杂。您可以执行以下操作来获取所有 4 个单个值：

```
single[] val = new single[4];
int byteIndex = 9;
for (int i=0; i<4; i++)
{
    val[i] = BitConverter.ToSingle(val, byteIndex);
    byteIndex += 4;
} 
```

而不是一个字节一个字节地复制东西到`CRCc`中，这样做：

```
Buffer.BlockCopy(BitConverter.GetBytes(req2.Starting), 0, CRCc, 0, 4);
Buffer.BlockCopy(BitConverter.GetBytes(req2.Quantity), 0, CRCc, 4, 2); 
```

# objective-c - 在没有 NSTreeController 的模型更改时自动更新 NSOutlineView

> ID：10563179
> 
> 赞同：0
> 
> 时间：2012-05-12T11:09:29.373
> 
> 标签：objective-c, cocoa, key-value-observing, nsoutlineview, nstreecontroller

如果我将 NSOutlineView 从使用绑定和 NSTreeController 更改为拥有数据源和委托，如果我的模型树发生更改，我将如何自动更新 NSOutlineView？我是否应该使用控制器观察树中每个节点的 childNodes 属性并在发生更改时触发重新加载？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:18:31.417

这是一种方式。另一种方法是模型在更改时发布通知并让您的控制器观察这些通知。

此外，模型通常不会自发改变。通常，更改是在模型外部启动以响应某些事件。控制器通常会这样做。因此，该控制器还可以引发对大纲视图的更新。（可能有多个控制器，因此启动模型更改的控制器可能只是通知窗口或视图控制器，它们将负责更新大纲视图。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T16:18:42.887

我问了一个类似的问题，在这里被标记为重复：[推荐的观察树结构变化的模式 [重复]](https://stackoverflow.com/questions/48284987/recommended-pattern-for-observing-changes-in-tree-structure)

我想避免使用 NSTreeController，因为这意味着当更新发生时你会失去对动画的控制。

我有一个 MVVM 设置。我的模型是图，我的视图模型是树。任何树节点与图节点之间存在一对一的关系。正如上面问题中所详述的，树节点和大纲视图之间显然存在多对一的关系。

所以，我和...

视图模型树节点需要知道它们的子节点何时更新，因此我使用关联图节点的 KVO 来捕获添加或删除子节点的时间。

对于大纲视图更新，我选择了在视图控制器上实现的模型视图委托。当添加或删除子节点时，视图模型中的每个树节点都可以调用树根上的委托方法。这对我来说是最清晰的方法，并且易于调试。我不希望幕后发生一连串的事情。

最终的大纲视图更新调用感觉非常简单：

```
func itemsInserted(atIndexes indexes: IndexSet, forParent parent: ECViewModelNode) {
        outlineView?.insertItems(at: indexes, inParent: parent, withAnimation: .slideDown)
    } 
```

在表格单元视图级别，我直接绑定到图模型节点的详细信息。

# scala - 使用 ScalaTest 测试 akka actor

> ID：10563181
> 
> 赞同：5
> 
> 时间：2012-05-12T11:10:18.173
> 
> 标签：scala, automated-tests, akka, scalatest

我正在努力寻找使用 FunSuite 测试 akka 演员编写的任何 ScalaTest 示例。

如果有人可以提供一个简单的 scalatest 示例来测试一个简单的 akka 演员，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T12:27:58.250

Akka 有很好的文档记录。[您可以在此处](http://akka.io/docs/)找到文档。这是[测试 Actor 系统 (Scala)](http://doc.akka.io/docs/akka/2.0.1/scala/testing.html)章节的链接，该章节附带了一个[示例](http://doc.akka.io/docs/akka/2.0.1/scala/testkit-example.html)。

注意：完整示例使用 ScalaTest WordSpec。对于 FunSuite 示例，将 WordSpec 更改为 FunSuite 并使用 test("test name") 而不是 WordSpec 的 should/in 样式编写测试。其他所有将与所示示例相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-03T09:25:53.047

如果你使用**FunSuite**，你会得到一个错误：“FunSuite 需要成为一个特征才能混入”。如果您想在 Akka 文档中使用它，但将 WordSpec 替换为 FunSuite 之类的测试，请使用**FunSuiteLike**。像这样：

```
class ComponentLogicTest() extends TestKit(ActorSystem("ComponentLogicTest")) with ImplicitSender with FunSuiteLike with Matchers with BeforeAndAfterAll { 
```

# javascript - 如何在javascript中动态创建哈希表

> ID：10563186
> 
> 赞同：0
> 
> 时间：2012-05-12T11:10:47.133
> 
> 标签：javascript, hashtable

我有一个 Web 应用程序，它将返回 JSON 作为响应，它的响应类似于以下内容：

```
{"album1" : "track1" , "album1" : "track2" , "album1" : "track3" , "album2" : "track1"} 
```

请注意后端的架构超出了我的掌控，我无法更改它创建 json 的方式（重复密钥）

所以我想在javascript中创建一个哈希表我的哈希表的想法应该是这样的：

```
"album1" : ["track1" , "track2" , "track3"] 
```

我的问题是如何在 javascript 中创建这样的行为？

我知道如何创建哈希图但不知道哈希表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:43:59.463

好吧，如果这个结构保持不变，你可能会拼凑出一个功能来完成它。如下所示

```
var response = '{"album1" : "track1" , "album1" : "track2" , "album1" : "track3" , "album2" : "track1"}'
.replace(/}?{?/g, '');

var sanitisedData = {};

var transform = response.split(',').map(function(item){
    return JSON.parse('{' + item + '}');
}).forEach(function(item){
    var key = Object.keys(item)[0];
    if(!sanitisedData [key]) sanitisedData [key] = [];
    sanitisedData [key].push(item[key]);
});

//output - {"album1":["track1","track2","track3"],"album2":["track1"]} 
```

# asp.net - 使用 HttpRequestMessage.Properties 携带每个请求的上下文

> ID：10563188
> 
> 赞同：6
> 
> 时间：2012-05-12T11:11:00.870
> 
> 标签：asp.net, dependency-injection, castle-windsor, asp.net-mvc-4, asp.net-web-api

在 Web API 应用程序中，我使用 Castle Windsor 提供配置了 PerWebRequest 生命周期的服务，并且在 IIS 上一切正常。

但是，当我使用 ASP.NET Web API Self Host (Beta)[包](https://nuget.org/packages/AspNetWebApi.SelfHost)时，我需要创建一个自定义生命周期，以便根据 HTTP 请求确定这些服务的范围。

如何使用 HttpRequestMessage.Properties 携带每个请求的上下文？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T14:37:50.810

我建议您使用消息处理程序将一些对象设置为 HttpRequestMessage.Property：

```
public class MyApplication : HttpApplication
{
    protected void Application_Start()
    {
        RegisterHttpMessageHandlers(GlobalConfiguration.Configuration);
    }
    public void RegisterHttpMessageHandlers(HttpConfiguration config)
    {
        config.MessageHandlers.Add(new MyMessageHandler());
    }
}

public static class MyHttpMessageHandlerExtensions
{
    public static class HttpPropertyKey
    {
        public static readonly string MyProperty = "MyCompany_MyProperty";
    }

    public static MyContext GetContext(this HttpRequestMessage request)
    {
        return (MyContext)request.Properties[HttpPropertyKey.MyProperty ];
    }

    public static void SetContext(this HttpRequestMessage request, MyContext ctx)
    {
        request.Properties[HttpPropertyKey.MyProperty] = ctx;
    }
}
public class MyMessageHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        request.SetContext(new MyContext(){/*some your data*/});
        return base.SendAsync(request, cancellationToken);
    }
}

public class MyController: ApiController
{
    public object GetData()
    {
        MyContext ctx = this.Request.GetContext(); // the extenstion method is used
    }
} 
```

# ruby-on-rails - 如何定义client_id？

> ID：10563197
> 
> 赞同：0
> 
> 时间：2012-05-12T11:12:59.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有两个模型`jobs`和`clients`.

用户可以简单地创建一个客户端，然后分配给他们一些工作。

这是我的两个模型。

工作.rb

```
class Job < ActiveRecord::Base
  has_and_belongs_to_many :clients
end 
```

客户端.rb

```
class Client < ActiveRecord::Base 
  has_and_belongs_to_many :jobs
end 
```

我创建新工作的表格如下所示：

```
<%= simple_form_for :job do |f| %>
  <%= f.input :name %>
  <%= <%= collection_select(:job, :client_ids, Client.all, :id, :name, {:include_blank => 'None'}, { :multiple => true }) %>%>
  <%= f.button :submit %>
<% end %> 
```

如您所见，表单上有一个包含所有客户端的下拉框。

但是，当尝试保存它时，我收到了这个混乱：

```
ActiveRecord::UnknownAttributeError in JobsController#create

unknown attribute: client_id

Application Trace | Framework Trace | Full Trace
app/controllers/jobs_controller.rb:22:in `new'
app/controllers/jobs_controller.rb:22:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"0ZVYpM9vTgY+BI55Y9yJDwCJwrwSgGL9xjHq8dz5OBE=",
 "job"=>{"name"=>"Sample Monthly",
 "client_id"=>"1"},
 "commit"=>"Save Job"} 
```

我的工作控制器非常基础，如下所示：

```
class JobsController < ApplicationController

  def index
    @jobs = Job.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def new
    @jobs = Job.new 

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def create
    @jobs = Job.new(params[:job])
    respond_to do |format|
      if @jobs.save
        format.html { redirect_to @jobs, notice: 'Job was successfully created.' }
        format.json { render json: @jobs, status: :created, location: @jobs }
      else
        format.html { render action: "new" }
        format.json { render json: @jobs.errors, status: :unprocessable_entity }
      end
    end
  end

  def show
    @jobs = Job.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @jobs }
    end
  end
end 
```

我有一个连接表设置，其中包含`job_id`和`client_id`作为整数值。所以我认为这只是在我的控制器中定义它们的一个例子，就像错误消息所暗示的那样。

这是我的第一个 Rails 应用程序，虽然我不太清楚如何。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:18:45.657

问题可能出在您的表格中。尝试替换这个

```
<%= <%= collection_select(:job, :client_ids, Client.all, :id, :name, {:include_blank => 'None'}, { :multiple => true }) %>%> 
```

和

```
<%= f.association :clients %> 
```

所以表格看起来像这样

```
<%= simple_form_for @job do |f| %>
  <%= f.input :name %>
  <%= f.association :clients %>
  <%= f.button :submit %>  
<% end %> 
```

# java - Java按空格、换行符、制表符、标点符号分割字符串

> ID：10563202
> 
> 赞同：16
> 
> 时间：2012-05-12T11:14:00.563
> 
> 标签：java, string

每个人。

我有一个这样的字符串

```
String message = "This is the new message or something like that, OK"; 
```

我想把它分成数组

```
String[] dic = {"this", "is", "the", "new", "message", "or", "something", "like", "that", "OK"}; 
```

我用了

```
message = message.split("\\s+"); 
```

问题是它包含“那个”，而不是我想要的“那个”。请教我如何解决它。谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-12T11:18:07.480

你可以做

```
String[] dic = message.split("\\W+"); 
```

`\\W`表示不是字母数字字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T11:24:15.870

您可以使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

```
 String message = "This is the new message or something like that, OK";
 String delim = " \n\r\t,.;"; //insert here all delimitators
 StringTokenizer st = new StringTokenizer(message,delim);
 while (st.hasMoreTokens()) {
     System.out.println(st.nextToken());
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T11:22:17.837

使用[番石榴](http://guava-libraries.googlecode.com/)：

```
// define splitter as a constant
private static final Splitter SPLITTER =
Splitter.on(CharMatcher.WHITESPACE.or(CharMatcher.is(','))
        .trimResults()
        .omitEmptyStrings();
// ...

// and now use it in your code
String[] str = Iterables.toArray(SPLITTER.split(yourString), String.class); 
```

# java - transferring file through socket in Java

> ID：10563203
> 
> 赞同：0
> 
> 时间：2012-05-12T11:14:05.347
> 
> 标签：java, file, sockets

i am trying to transfer file through socket in java..actually i have been able to transfer..but there is one problem occured..the problem is the file sent is shrink in size..for example i transfer 300mb file, the client will receive only 299mb....i was wondering what might be the problem..

Server Side

```
File myFile = new File (basePath+"\\"+input.readUTF());
byte [] mybytearray  = new byte [1024];
FileInputStream fis = new FileInputStream(myFile);
BufferedInputStream bis = new BufferedInputStream(fis);
txtArea.append("Sending... \n");
while (true)
{
    int i = bis.read(mybytearray, 0, mybytearray.length);
            if (i == -1) {
        break;
    }
    output.write(mybytearray, 0, i);
    txtArea.append("Sending chunk " + i + "\n");

}
output.flush(); 
```

Client Side

```
output.writeUTF("get");
txtArea.append("Starting to recive file... \n");
                long start = System.currentTimeMillis();
                byte [] mybytearray  = new byte [1024];
                txtArea.append("Connecting... \n");
                output.writeUTF(remoteSelection);
                FileOutputStream fos = new FileOutputStream(basePath+"\\"+remoteSelection);
                BufferedOutputStream bos = new BufferedOutputStream(fos);
                int bytesRead = input.read(mybytearray, 0, mybytearray.length);
                while(bytesRead != -1) 
                {
                    bos.write(mybytearray, 0, bytesRead);
                    txtArea.append("got chunk" + bytesRead +"\n");
                    bytesRead = input.read(mybytearray, 0, mybytearray.length);
                }
bos.flush(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:18:01.573

The canonical way to copy a stream in Java is as follows:

```
int count;
byte[] buffer = new byte[8192]; // or whatever you like really, not too small
while ((count = in.read(buffer)) > 0)
{
   out.write(buffer, 0, count);
} 
```

Works for any length input; does not load the entire input into memory; does not add latency by so doing.

If you are sending more than one file you need to send the length first, via DataOutputStream.writeLong(); read it at the other end via the inverse function; and adjust the loop condition at the reading end to terminate after reading exactly that many bytes. Not quite as simple as it may appear; left as an exercise for the reader.

# ruby-on-rails - 你如何加速 Heroku 上的 rails-3.2.3 资产管道

> ID：10563204
> 
> 赞同：1
> 
> 时间：2012-05-12T11:14:06.133
> 
> 标签：ruby-on-rails, deployment, heroku

我注意到在 Heroku 上下载我的网站主页的 css/js 大约需要一秒半。我很好奇你们中的一些人是否有相同的经验，或者我应该期待更快的响应。

[http://gitwatcher.com/assets/application-61efaf20532302f93b6c79d976861884.css](http://gitwatcher.com/assets/application-61efaf20532302f93b6c79d976861884.css)：

```
GET application-61efaf...6c79d976861884.css 200 OK gitwatcher.com 19.4 KB 75.101.163.44:80  
476ms 
```

[http://gitwatcher.com/assets/application-66c036d6d06705744603507b085afdf4.js](http://gitwatcher.com/assets/application-66c036d6d06705744603507b085afdf4.js)：

```
GET application-66c036...603507b085afdf4.js 200 OK gitwatcher.com 62.7 KB 75.101.163.44:80  
1.24s 
```

DNS响应似乎也很低，大约1.08s。

能否请您分享您的经验或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:11:55.603

使用asset_sync gem 在部署时将您的资产推送到S3。理想情况下，您不希望 Heroku 的流程为资产提供服务，让它们处理 Ruby - 将所有静态资产放在 S3 和/或 Cloudfront 或类似设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:53:46.897

我按照建议遵循了“[在 Rails 3.1 中使用 CDN 资产主机](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)”，但现在情况变得更糟了：

CSS 的服务速度比之前慢约 3.5 倍：

```
GET https://gitwatcher-assets.s3.amazonaws.com/assets/application-82e153501de8c4032d1565a3e8adffc1.css

200 OK
    ,
gitwatcher-assets.s3.amazonaws.com

166.2 KB

178.236.4.193:443

1.62s 
```

而 js 需要 1.7s vs 1.25 ：

```
https://gitwatcher-assets.s3.amazonaws.com/assets/application-66c036d6d06705744603507b085afdf4.js

200 OK

gitwatcher-assets.s3.amazonaws.com

198.6 KB

178.236.4.193:443

1.7s 
```

更糟糕的是，现在所有 png 图像都是从 S3 下载的，每个图像的媒体时间为 1.5 秒（当然或多或少并行），导致主页的总时间约为 4 秒（坏），这或多或少是以前，但现在 DNS 开销很小（~1/3）。比我猜通过 S3 提供的静态资产比直接由 heroku 提供的要慢 .... !?!

在进行更多分析之前，我将保持这种状态，但我想知道是否有人可以分享他以这种方式提供静态资产的经验和性能数据，以进行比较。

这里的所有措施都是通过 FireBug 客户端（firefox：93.34.152.23）采取的，并且存储桶在爱尔兰。

# java - mac上没有这样的文件或目录错误

> ID：10563209
> 
> 赞同：0
> 
> 时间：2012-05-12T11:14:36.793
> 
> 标签：java, eclipse, macos, bufferedreader, readfile

我正在尝试读取我的 Eclipse java 项目的以下位置中存在的文件：

测试器 -> src -> 线程 -> ReadFile.java

这是使用的代码：

公共类测试者{

```
public static void main(String[] args) {
    ReadFile[] readers;
    readers = new ReadFile[3];

    for (int intLoopCounter = 0; intLoopCounter < 3; intLoopCounter++) {
        readers[intLoopCounter] = 
                new ReadFile("ReadFile.java", intLoopCounter);

        System.out.println("Doing thread number: " + (intLoopCounter + 1));
    }
} 
```

你能告诉我要添加什么：

```
new ReadFile("ReadFile.java" 
```

所以文件可以读取？

ReadFile.java 类文件中有一个缓冲阅读器。我正在试验这个只是为了看看我是否可以读取 ReafFile.java 文件并将结果显示到控制台。

这是从 ReadFile.java 引发错误的代码：

```
public ReadFile(String filename, int i) {
    id = i;

    try {
        input = new BufferedReader(new FileReader(filename));

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        System.out.println("Problem occured: " + e.getMessage());

    } // catch
} // Constructor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:20:44.533

假设 Tester 是您的项目根目录，您的文件路径应该是`"src/threads/ReadFile.java"`. 如果该文件确实存在，它将被找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:20:26.487

您需要修改调用中的路径`ReadFile`以包含完整路径、由用户目录锚定的路径或相对于 Eclipse 运行测试程序的目录的路径。

例如，如果您的项目位于`/Users/myuser/projects/Tester/src/threads`，则可以使用以下行：

```
new ReadFile("/Users/myuser/projects/Tester/src/threads/ReadFile.java", intLoopCounter) 
```

# java - 从 Servlet 写入文件

> ID：10563210
> 
> 赞同：1
> 
> 时间：2012-05-12T11:14:41.927
> 
> 标签：java, xml, servlets

这是我写的一段代码：

```
public class ServletCounter extends HttpServlet {

    private final Object lock = new Object();

    private int serviceCounter = 0;
    private FileOutputStream out;
    private boolean shuttingDown;

    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
        super.init(servletConfig);
            }

     @Override
    protected void service(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException {
        enteringServiceMethod();
        try {
            super.service(httpServletRequest, httpServletResponse);
            out = new FileOutputStream("C:\\xampp\\tomcat\\webapps\\myapp\\WEB-INF\\lib\\counter.txt");

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        } 
        @Override
    protected void doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException {
        if (!shuttingDown) {
            writeToFile("number of servlet access = " + serviceCounter );

        }
    }

    @Override
    public void destroy() {
        ...
    }
    private void enteringServiceMethod() {
        synchronized (lock) {
            serviceCounter++;
            writeToFile("method enteringServiceMethod serviceCounter =  " + serviceCounter);
        }
    }
    private int getNumServices() {
        synchronized (lock) {
            return serviceCounter;
        }
    }
    private void writeToFile(String text) {
        System.out.println(text);
        text += "\r\n";

        try {
            out.write(text.getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    } 
```

我需要的是每次有人打开我的 Servlet 时，它应该打开“counter.txt”文件并存储打开 Servlet 的次数。例如，如果文件保存数字 8，那么在有人访问 servlet 后，它应该存储数字 9 并删除数字 8。这有意义吗？谁能帮我重写 writeToFile 方法。我写的代码不完整，但我被卡住了，尝试了几件事，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:17:51.460

如果您要计算页面点击量，那么`Filter`这将是一个不错的方法

拦截每个请求并`synchronized`在应用程序范围内获取一个变量并增加它

# ios - 按钮应该在单击后更改图像，但（随机）也会更改其他按钮的图像

> ID：10563213
> 
> 赞同：1
> 
> 时间：2012-05-12T11:14:57.360
> 
> 标签：ios, button, tableview

在我的 cellForRowAtIndex 中，我初始化了一个按钮（它显示在 tableview 的每个单元格中）：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self
           action:@selector(customActionPressed:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"" forState:UIControlStateNormal];
button.frame = CGRectMake(0.0f,cell.frame.size.height -15, 160.0f, 15.0f);
UIImage *buttonImage = [UIImage imageNamed:@"Image1.png"];
button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
[button.titleLabel setFont:[UIFont fontWithName:@"Arial" size:13.0]];
button.contentEdgeInsets = UIEdgeInsetsMake(1, 60, 0, 0);
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];    
[cell addSubview:button];
button.autoresizingMask = UIViewAutoresizingFlexibleTopMargin; 
```

它有一个普通的图像，如果用户点击按钮，图像就会改变。我还从 XML 中获取了 button.title 的内容。因此，我告诉它从网络上获取正确的标题。这工作正常，但有时（不是一直）并且随机地从下一个单元格或向下三行的单元格更改按钮。我不知道为什么，在使用断点/调试器运行时找不到任何东西。

```
-(void)customActionPressed :(id)sender
{
    UITableViewCell *owningCell = (UITableViewCell*)[sender superview];

    NSIndexPath *pathToCell = [self.tableView indexPathForCell:owningCell];

    UIImage *buttonImage = [UIImage imageNamed:@"image2.png"];

    [self doXMLParsing];
    [sender setBackgroundImage:buttonImage forState:UIControlStateNormal];
    NSString *TableText = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:pathToCell.row] pressed1]]; 
    [sender setTitle:TableText forState:UIControlStateNormal];
    ((UIButton *)sender).enabled = NO;
} 
```

所以也许有人可以看到我哪里出错了。如果您需要更多代码，请直说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:21:44.200

```
[button addTarget:self action:@selector(customActionPressed:)
     forControlEvents:UIControlEventTouchDown]; 
```

尝试使用 UIControlEventTouchUpInside 而不是 UIControlEventTouchDown。

您还可以创建一个自定义单元格，然后您可以在 UITableViewCell 子类中为您的按钮创建一个属性，并通过该属性更改按钮的图像。

也不要从按钮的操作中更改图像。您可以通过 tableview 的 didSelectRowAtIndexPath 委托中的 cell.yourbuttonName 访问按钮，然后更改图像。

# .net - TPL 取消继续从不调用已取消的任务

> ID：10563214
> 
> 赞同：7
> 
> 时间：2012-05-12T11:15:01.257
> 
> 标签：.net, multithreading, task-parallel-library, task

我的代码中有以下使用 TPL 的设置：

*   我班上的一个字段：private CancellationTokenSource _cancellationTokenSource；
*   每次我创建使用该特定取消令牌的 TPL 任务时，此 CancellationTokeSource 都会被激活

实际的 TPL 任务如下所示：

```
var dataRetrievalTask = new Task<List<myType>>(() =>
            {
                // retrieve data and do something
                foreach (var a in retrievalMethod())
                {
                    if (_cancellationTokenSource.Token.IsCancellationRequested)
                        _cancellationTokenSource.Token.ThrowIfCancellationRequested();

                        // do something if not cancelled
                    }
                }

                return filledListOfMyType;

            }, _cancellationTokenSource.Token);

            // define what shall happen if data retrievel finished without any problems
            var writingLoadedDataToGridTask = dataRetrievalTask.ContinueWith(task =>
            {
              // do something in case we ran to completion without error
            }, _cancellationTokenSource.Token, TaskContinuationOptions.OnlyOnRanToCompletion, currentScheduler);

            // what to do in case cancellation was performed
            var loadingDataCancelledTask = dataRetrievalTask.ContinueWith(task =>
                              {
                                someLabel.Text = "Data retrieval canceled.";
                              },_cancellationTokenSource.Token, TaskContinuationOptions.OnlyOnCanceled, currentScheduler);

            // what to do in case an exception / error occured
            var loadingDataFaulted = dataRetrievalTask.ContinueWith(task =>
                {
                    someLabel.Text = string.Format("Data retrieval ended with an Error.");
                }, _cancellationTokenSource.Token, TaskContinuationOptions.OnlyOnFaulted, currentScheduler);

            // when any of the continuation tasks ran through, reset ui controls / buttons etc
            Task.Factory.ContinueWhenAny(new[] { writingLoadedDataToGridTask, loadingDataCancelledTask, loadingDataFaulted }, task =>
            {
              // reset controls and all that
            }, _cancellationTokenSource.Token, TaskContinuationOptions.None, currentScheduler);

            dataRetrievalTask.Start(); 
```

现在我的问题是，当某处（在取消按钮的 .Click 事件处理程序中）调用 _cancellationTokenSource.Cancel() 方法时，不会调用特定的 loadingDataCancelledTask 的主体/方法。

我在这里做错了什么？我正在使用并移交相同的 _cancellationTokenSource.Token 实例...以及其他所有内容（“writingLoadedDataToGridTask”和“loadingDataFaulted”任务以及以下“Task.Factory.ContinueWhenAny(new[] { writingLoadedDataToGridTask, loadingDataCancelledTask, loadingDataFaulted }, task => ...'块）确实有效。只有取消没有。有人看到/知道为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T11:18:47.400

您的取消继续被取消，因为它使用相同的取消令牌。

如果您考虑一下，这完全有道理：当您说“我想取消所有处理”时，您实际上得到了您所要求的。所有处理都会停止，包括更新 UI。

解决方案是不将取消令牌用于取消、错误和`ContinueWhenAny`继续。这样，这些延续总是运行。

# objective-c - UIPickerView：键盘不隐藏

> ID：10563216
> 
> 赞同：0
> 
> 时间：2012-05-12T11:15:19.510
> 
> 标签：objective-c, ios, uitextfield, uipickerview

我有 3 个 UIExfield，用户可以填写前两个，但最后一个是类别字段，单击时显示 UIPickerView。

到目前为止，我设法做的是：

*   用户单击分类文本字段 -> 出现选择器视图
*   然后用户点击另一个文本字段 - >选择器视图消失并且键盘出现

但是知道当用户再次单击类别文本字段并显示选择器视图时，我想隐藏键盘。

这是我到目前为止所拥有的：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    if(textField == categoryTextField){
        [categoryTextField resignFirstResponder];
        [UIView beginAnimations:@"picker" context:nil];
        [UIView setAnimationDuration:0.3];
        pickerView.transform = CGAffineTransformMakeTranslation(0,-236);
        [UIView commitAnimations];
    }else{
        [UIView beginAnimations:@"picker" context:nil];
        [UIView setAnimationDuration:0.3];
        pickerView.transform = CGAffineTransformMakeTranslation(0,236);
        [UIView commitAnimations];
    }
} 
```

但它不起作用。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:00:43.137

你太难了 将选取器视图设置为文本字段的输入视图，操作系统将为您处理动画。随着每个字段成为第一响应者，将显示适当的输入视图（文本字段的默认键盘，第三个字段的选择器）。你不需要自己做任何动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:39:15.317

我真的不明白你的问题来自哪里。我认为您的翻译可能会使pickerView 移动得太远。你应该试试：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    if(textField == categoryTextField){
        [categoryTextField resignFirstResponder];
        [UIView beginAnimations:@"picker" context:nil];
        [UIView setAnimationDuration:0.3];
        CGRect frame = pickerView.frame;
        frame.origin.y = 480 - 236; // assuming your on an iPhone and your picker appears from bottom
        pickerView.frame = frame;
        [UIView commitAnimations];
    }else{
        [UIView beginAnimations:@"picker" context:nil];
        [UIView setAnimationDuration:0.3];
        CGRect frame = pickerView.frame;
        frame.origin.y = 480; // assuming your on an iPhone and your picker disappears to bottom
        pickerView.frame = frame;
        [UIView commitAnimations];
    }
} 
```

希望有帮助

# python - Python IMAP 从或到指定的电子邮件地址搜索

> ID：10563218
> 
> 赞同：8
> 
> 时间：2012-05-12T11:15:27.073
> 
> 标签：python, imap, imaplib

我将它与 Gmail 的 SMTP 服务器一起使用，我想通过 IMAP 搜索发送到某个地址或从某个地址接收的电子邮件。

这就是我所拥有的：

```
mail = imaplib.IMAP4_SSL('imap.gmail.com')

mail.login('user', 'pass')
mail.list()
mail.select("[Gmail]/All Mail")

status, email_ids = mail.search(None, 'TO "tech163@fusionswift.com" OR FROM "tech163@fusionswift.com"') 
```

错误的最后一行是：`imaplib.error: SEARCH command error: BAD ['Could not parse command']`

不知道我应该如何在 python 的`imaplib`. 如果有人可以快速解释问题所在或指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-12T11:38:47.320

您收到的错误是从服务器生成的，因为它无法正确解析*搜索查询*。为了生成有效的查询，请遵循[RFC 3501](https://datatracker.ietf.org/doc/html/rfc3501)，在第 49 页中详细解释了该结构。

例如，您要正确的搜索字符串应该是：

```
'(OR (TO "tech163@fusionswift.com") (FROM "tech163@fusionswift.com"))' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-11T12:23:02.553

尝试使用来自[https://github.com/ikvk/imap_tools的 IMAP 查询生成器](https://github.com/ikvk/imap_tools)

```
from imap_tools import A, AND, OR, NOT
# AND
A(text='hello', new=True)  # '(TEXT "hello" NEW)'
# OR
OR(text='hello', date=datetime.date(2000, 3, 15))  # '(OR TEXT "hello" ON 15-Mar-2000)'
# NOT
NOT(text='hello', new=True)  # 'NOT (TEXT "hello" NEW)'
# complex
A(OR(from_='from@ya.ru', text='"the text"'), NOT(OR(A(answered=False), A(new=True))), to='to@ya.ru') 
```

当然你可以使用所有的库工具

# jquery - 根据 Drupal 7 中的视口高度动态更改 DIV 高度

> ID：10563220
> 
> 赞同：0
> 
> 时间：2012-05-12T11:15:45.463
> 
> 标签：jquery, css, drupal

我的页面只包含标题和内容。标题大约是 90 像素，我所有的内容都放在一个 DIV 中。有没有办法改变 DIV 的高度以匹配我的视口高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:29:30.750

尝试这个

```
$("#id_of_content_div").height($(window).height()-$("#header").height()); 
```

$(window).height() 是视口高度

在调整视口大小时调整内容高度，使用

```
$(window).resize(function(){
    $("#id_of_content_div").height($(window).height()-$("#header").height());
}); 
```

# android - jQuery移动应用，多页还是单页？这将提供最接近原生应用的用户体验

> ID：10563224
> 
> 赞同：1
> 
> 时间：2012-05-12T11:16:44.457
> 
> 标签：android, iphone, jquery, jquery-mobile, cordova

我想开发一个 jQuery 应用程序。它包含大约 30 个屏幕。几乎每个页面都使用 Web 服务从服务器获取内容。这是我的问题。

1.我应该在单个页面中创建所有页面还是应该在不同页面中编写它们？2.在获取数据和导航时，应该记住什么以避免页面延迟和转换问题？3.我们怎样才能让应用表现得像原生应用一样？4.我应该将其保留为网页本身还是使用phonegap将其集成为本机应用程序？5.我应该使用jsonp还是ajax来获取数据？

请回复.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:09:37.027

1) 没关系。

2）做大量的预缓存和预加载。这是我在转换方面所做的博客文章。我发现 1.0.1 过渡最像原生。

[http://zsprawl.com/iOS/2012/05/fixing-the-transitions-in-jquery-mobile-1-1-0/](http://zsprawl.com/iOS/2012/05/fixing-the-transitions-in-jquery-mobile-1-1-0/)

3）有点。Web/混合应用程序总是渴望与 Native 一样好，但几乎永远不会更好。

4) 取决于你的目标。您想出售它还是广泛分发它？

5）取决于用例......

# jquery - jquery类别子类、子类等

> ID：10563230
> 
> 赞同：0
> 
> 时间：2012-05-12T11:17:44.393
> 
> 标签：jquery

我想用JQuery的select标签做一个三级分层类别，子类别和子子类别。实际上，它有效。但是，有一个错误。它只适用于第一次。当我选择一个类别时，它会显示子类别。然后，当我选择子类别时，它会显示子子类别。那挺好的。但是，当我更改类别而不重新加载页面时，它会显示重复的子类别。我不知道为什么，但我认为这可能是由于不了解 JQuery 实时功能。这是代码。使用了一些树枝标签（来自 Symfony 2）。

请帮忙。

```
$(document).ready(function() {
        var options = '<select><option value="0">--Select--</option>';
        {% for catalog in catalogs %}
            options += '<option value="{{ catalog.id }}">{{ catalog.name }}</option>';
        {% endfor %}
        options += '</select>';
        $('#form_item_add').html(options);

        $('#form_item_add select').change(function() {
            $(this).nextAll($(this)).remove();
            $.getJSON('{{ path('subcatalog_list') }}', {catalog: $(this).val()}, function(json) {
                if (json.length !== 0)
                {
                    options = '<select><option value="0">--Select--</option>';
                    for (var i = 0; i < json.length; i++)
                    {
                        options += '<option value="' + json[i].c_id + '">' + json[i].c_name + '</option>';
                    }
                    options += '</select>';
                    $('#form_item_add').append(options);

                    $('#form_item_add select').live('change', function() {
                        $(this).nextAll($(this)).remove();
                        $.getJSON('{{ path('subcatalog_list') }}', {catalog: $(this).val()}, function(json) {
                            if (json.length !== 0)
                            {
                                options = '<select><option value="0">--Select--</option>';
                                for (var i = 0; i < json.length; i++)
                                {
                                    options += '<option value="' + json[i].c_id + '">' + json[i].c_name + '</option>';
                                }
                                options += '</select>';
                                $('#form_item_add').append(options);

                            }
                        });
                    });
                }
            });
        });
    }); 
```

我的控制器（Symfony 2）

```
/**
 * @Route("/subcatalogs", name = "subcatalog_list")
 */
public function getSubcatalogAction(Request $request)
{
    if ($request->isXmlHttpRequest())
    {
        $repository = $this->getDoctrine()->getRepository('TradeTradeBundle:Catalog');
        $query = $repository->createQueryBuilder('c')
            ->where('c.parent = :parent')
            ->setParameter('parent', $request->get('catalog'))
            ->getQuery();
        $subcatalogs = $query->getScalarResult();

        return new Response(json_encode($subcatalogs));
    }

    return $this->render('TwigBundle:Exception:error.html.twig', array('status_code' => 404, 'status_text' => 'Page not found'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:39:05.727

```
 $(document).ready(function () {
            var ddlCategory = '<select id="ddlCategory"><option value="0">--Select--</option>';
            {% for catalog in catalogs %}
            ddlCategory += '<option value="{{ catalog.id }}">{{ catalog.name }}</option>';
            {% endfor %}
            ddlCategory += '</select>';
            $('#form_item_add').html(options);

            $('#form_item_add').find('select.ddlCategory').on('change', function () {
                $(this).nextAll('select').remove();

                if ($(this).val() !== '0') {
                    $.getJSON('{{ path(' + subcatalog_list + ') }}', { catalog: $(this).val() }, function (json) {
                        if (json.length !== 0) {
                            var ddlSubcategory = $('<select id="ddlSubcategory"><option value="0">--Select--</option></select>');
                            $.each(json, function (i, entity) {
                                ddlSubcategory.append($('<option />', { 'value': entity.c_id, 'text': entity.c_name }));
                            });

                            $('#form_item_add').append(ddlSubcategory);

                            $('#form_item_add').find('select.ddlCategory').trigger('change');
                        }
                    });
                }
            });

            $('#form_item_add select.ddlSubcategory').on('change', function () {
                $(this).nextAll('select').remove();

                if ($(this).val() !== '0') {
                    $.getJSON('{{ path(' + subcatalog_list + ') }}', { catalog: $(this).val() }, function (json) {
                        if (json.length !== 0) {
                            var ddlSubcategoryList = '<select id="ddlSubcategoryList"></select>';

                            $.each(json, function (i, entity) {
                                ddlSubcategoryList.append($('<option />', { 'value': entity.c_id, 'text': entity.c_name }));
                            });

                            $('#form_item_add').append(ddlSubcategoryList);

                            $('#form_item_add').find('select.ddlSubcategoryList').trigger('change');
                        }
                    });
                }
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:50:09.403

我自己解决了：

```
$(document).ready(function() {
        var options = '<select><option value="0">--Select--</option>';
        {% for catalog in catalogs %}
            options += '<option value="{{ catalog.id }}">{{ catalog.name }}</option>';
        {% endfor %}
        options += '</select>';
        $('#form_item_add').html(options);

        $('#form_item_add select').live('change', function() {
            $(this).nextAll($(this)).remove();
            $.getJSON('{{ path('subcatalog_list') }}', {catalog: $(this).val()}, function(json) {
                if (json.length !== 0)
                {
                    options = '<select><option value="0">--Select--</option>';
                    for (var i = 0; i < json.length; i++)
                    {
                        options += '<option value="' + json[i].c_id + '">' + json[i].c_name + '</option>';
                    }
                    options += '</select>';
                    $('#form_item_add').append(options);
                }
            });
        });
    }); 
```

# google-maps - 带有 KML 图层控制的 Google Maps JS API

> ID：10563233
> 
> 赞同：1
> 
> 时间：2012-05-12T11:17:58.697
> 
> 标签：google-maps, dynamic, google-maps-api-3, kml, layer

我找到了使用 JavaScript 打开/关闭 KmlLayers 的不同解决方案。我见过的所有脚本都需要为每一层提供单独的函数，但我希望所有层都只有一个函数，因此在向我的网页添加新层时，我不必编辑现有的 JavaScript 代码。

我的代码：

```
<!DOCTYPE html>
<html><head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<style type="text/css">
    * {margin:0; padding:0; border:0; outline:0; font-size:100%; 
        vertical-align:baseline}
    html, body {width:100%; height:100%}
    #map {width:100%; height:95%}
</style>
<script type="text/javascript" 
    src="http://maps.googleapis.com/maps/api/js?sensor=false&language=lv">
</script>

<script type="text/javascript">
    var G = google.maps; var kml = null; var show = false;

    function toggle() {
        var tr = this.rel;
        if (!tr) {
            tr = new G.KmlLayer('http://www.eiranet.lv/kartes/Anjo/kmz/' +
                this.id + '.kmz', {preserveViewport:true})
        };
        show = !show;
        if (show) {
            tr.setMap(map)
        }
        else {
            tr.setMap(null)
        };
    };

    function initialize() {
        var layers = document.getElementsByTagName('input');
        var options = {
            center: new G.LatLng(34.9, 137.3),
            zoom: 10,
            mapTypeId: G.MapTypeId.TERRAIN,
            scaleControl: true,
            overviewMapControl: true,
            mapTypeControlOptions: {
                style:G.MapTypeControlStyle.DROPDOWN_MENU }
        };

        map = new G.Map(document.getElementById('map'), options);

        for (var i=0; i<layers.length; i++) {
            layers[i].type = 'checkbox';
            G.event.addDomListener(layers[i], 'click', toggle)
        };
    };

    G.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map"></div>
<input id="Didzis_21.03-03.04" rel="d1"/>
<input id="Didzis_04.04-17.04" rel="d2"/>
<input id="Didzis_18.04-01.05" rel="d3"/>
<input id="Didzis_02.05-15.05" rel="d4"/>
</body></html> 
```

这是我的问题：实际上我可以打开多个图层，但无法关闭它们。我认为除了 function 之外的所有代码都很好`toggle()`。此外，如果不需要“rel”属性，只需要“id”，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T14:51:56.717

看起来`KmlLayer`你创建的每一个都是孤立的；它们被分配给一个`var`名为local 的函数`tr`，但从未分配给任何在多次调用中仍然可用的东西`toggle()`。我建议对该功能进行一些更改`toggle()`：

```
function toggle() {
    if (!this.kmlLayer ) {
        this.kmlLayer = new G.KmlLayer(
            'http://www.eiranet.lv/kartes/Anjo/kmz/' + this.id + '.kmz',
            { preserveViewport:true } );
    }
    show = !show;
    if (show) {
        this.kmlLayer.setMap(map)
    }
    else {
        this.kmlLayer.setMap(null)
    };
}; 
```

在更详细地查看了您的页面后，我建议进行其他更改：

```
function toggle() {
    if (!this.kmlLayer ) {
        this.kmlLayer = new G.KmlLayer(
            'http://www.eiranet.lv/kartes/Anjo/kmz/' + this.id + '.kmz',
            { preserveViewport:true } );
        this.displayIsOn = false;
    }
    //show = !show;  --  Remove this line, it is causing display state problems
    if ( this.displayIsOn ) {
        this.kmlLayer.setMap( null );
        this.displayIsOn = false;
    }
    else {
        this.kmlLayer.setMap( map );
        this.displayIsOn = true;
    };
}; 
```

# c# - 如何在 SQL Server 2005 中执行服务器端分页

> ID：10563235
> 
> 赞同：2
> 
> 时间：2012-05-12T11:18:29.943
> 
> 标签：c#, sql, sql-server, sql-server-2005

我需要能够使用 SQL 从表中选择一定范围的行。

我应该使用什么 TSQL 命令来执行服务器端分页？

我不考虑服务器端分页？我想从表中选择前 10 行并进行一些计算

```
cmd.commandText :="select top 10 from table "
ada.fill(dt)
for each(datarow dtr in dt.rows)
{
//calulation
} 
```

然后我想选择接下来的 10 行并同样重复直到表格结束

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:29:08.630

Microsoft 在 SQL Server 2005 中引入了 ROW_NUMBER() 来帮助分页...

```
SELECT * FROM (     
  SELECT          
  ROW_NUMBER() OVER (ORDER BY City) AS row, *  
  FROM Cities  
) AS a WHERE row BETWEEN 1 AND 10 
```

使用 1 和 10 的变量来动态获取下一组。

```
create proc dbo.whatever_select_paging
  @int page
as

SELECT * FROM (     
  SELECT          
  ROW_NUMBER() OVER (ORDER BY City) AS row, *  
  FROM Cities  
) AS a WHERE row BETWEEN ((@page-1) * 10) +1 AND (@page * 10)-1

go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:25:36.260

您应该使用 ROW_NUMBER 来完成此操作。在分页上查看 ROW_NUMBER 用法的[链接](http://blog.sqlauthority.com/2007/06/11/sql-server-2005-t-sql-paging-query-technique-comparison-over-and-row_number-cte-vs-derived-table/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T14:52:11.780

```
SELECT TOP 20 FROM MyData
WHERE orderNum <= 61
ORDER BY orderNum DESC 
```

这将获得从第 61 行到第 80 行的 20 行（如果您有重复的 orderNum 值，则可以获得超过 20 行）

# cocoa - 旋转 NSView 并获取其角点

> ID：10563239
> 
> 赞同：0
> 
> 时间：2012-05-12T11:18:55.717
> 
> 标签：cocoa, rotation, nsview, point

我正在使用以下方法旋转 NSView：

```
 setFrameRotation: 
```

它将视图围绕其左下角旋转。围绕中心点旋转视图的最佳方法是什么？

另外，我想在其角落的超级视图中获得积分。使用：

```
view.frame.origin 
```

在我旋转它*之前*给我一个角落。旋转后如何获得其角的实际点？

在此先感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:13:48.657

要获得围绕框架中心的有效旋转，您必须平移框架的原点。

此外，当然`view.frame.origin`在旋转之前给出原点。旋转后它还会为您提供原点，因为旋转是围绕原点进行的。原点不动。如果您确实平移原点以围绕中心旋转，那么您将知道新的原点。

要获取其他角，您可以使用`[view convertPoint:pt toView:view.superview]`，`pt`视图坐标系中的每个角在哪里。例如`NSMakePoint(NSMaxX([view bounds]), NSMinY([view bounds]))`。

您实际上可以使用这种技术来获得您想要的翻译。计算所需的视图中心，或者只记录当前中心（如果它在您想要的位置）。然后旋转视图。使用 获取中心的新位置`-convertPoint:toView:`。然后通过新中心和所需中心之间的差异来平移原点。

# objective-c - 从 txt 文件中删除一些符号

> ID：10563248
> 
> 赞同：0
> 
> 时间：2012-05-12T11:20:23.937
> 
> 标签：objective-c

我正在保存一个`NSMutuablearray`文本文件，他`NSNmbers`在里面。

当我打开它（它发送到我的电子邮件）时，我看到：

```
<integer>-13</integer>
<integer>-80</integer>
<integer>-15</integer> 
```

我只想要没有这个`<integer>`标志的数字。有办法消除吗？或者把这些数字放在 nsmutuable 中？

代码 ：

```
//add numbers
     for(int i=0;i<417;i++)
     {
         int x= [globals sharedGlobals].bufBuf[i];
         NSNumber* myNumber = [NSNumber numberWithInt: x];
         [samples addObject:myNumber];
     }

//create file
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *fullFileName = [NSString stringWithFormat:@"%@/samplesTest.txt", documentsDirectory];
    [samples writeToFile:fullFileName atomically:NO]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:29:31.950

您可以使用您的数字准备一个字符串，并将其保存到文件中：

```
NSArray *numbers =
        [NSArray arrayWithObjects:
            [NSNumber numberWithInt:1],
            [NSNumber numberWithInt:2],
            [NSNumber numberWithInt:3],
            nil
        ];
NSString *res = [numbers componentsJoinedByString:@","];
NSError *error;
[res writeToFile:fullFileName atomically:NO encoding:NSUTF8StringEncoding 
                                                      error:&error]; 
```

# javascript - JavaScript 关联数组的长度

> ID：10563251
> 
> 赞同：70
> 
> 时间：2012-05-12T11:20:45.583
> 
> 标签：javascript, arrays, javascript-objects

我有一个 JavaScript 关联数组**（或者有些人可能更喜欢称它为对象）**，比如

```
var quesArr = new Array();
quesArr["q101"] = "Your name?";
quesArr["q102"] = "Your age?";
quesArr["q103"] = "Your school?"; 
```

是否有可以获取该数组长度的内置函数，或者 jQuery 或其他库中的解决方案？目前 quesArr.length 会给出 0，因为你们中的大多数人一定都知道。

**请不要建议迭代[这个问题](https://stackoverflow.com/questions/5223/length-of-javascript-associative-array)中提到的整个数组/对象，因为我拥有的数组/对象非常大。**

有没有办法我可以继续这个？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-05-12T11:24:00.130

不，没有内置属性可以告诉您该对象有多少属性（这是您要查找的）。

我能想到的最接近的是两个 ES5 和更高的特性，`Object.keys`（[spec](https://tc39.es/ecma262/#sec-object.keys) | [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys#Browser_compatibility)）和`Object.getOwnPropertyNames`（[spec](https://tc39.es/ecma262/#sec-object.getownpropertynames) | [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)）。例如，您可以这样使用`Object.keys`：

```
console.log(Object.keys(quesArr).length); // "3" 
```

`Object.keys`返回对象自己的可枚举字符串命名属性的名称数组。但是在内部（理论上）这是您不想使用的循环（当然，在 ES5 之前的环境中，它的 polyfill 使用了循环）。如果您还想要不可枚举的字符串命名属性，则可以`Object.getOwnPropertyNames`改用。

在 ES2015+ 中，对象可以具有键是符号而不是字符串的属性。`Object.getOwnPropertySymbols`( [spec](https://tc39.es/ecma262/#sec-object.getownpropertysymbols) | [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols) ) 让你得到它们。

* * *

FWIW，除非您要使用`Array`对象的功能，否则不要将其设为数组。反而：

```
var quesArr = {};
quesArr["q101"] = "Your name?";
quesArr["q102"] = "Your age?";
quesArr["q103"] = "Your school?"; 
```

如果您不希望它们是（无论您使用数组还是普通对象），这些键也不必作为方括号中的字符串文字给出：

```
var quesArr = {};
quesArr.q101 = "Your name?";
quesArr.q102 = "Your age?";
quesArr.q103 = "Your school?"; 
```

但是，如果您愿意，可以使用其他表示法；它们是完全等价的，除了用点表示法，键必须是有效的标识符名称（在括号表示法中，它们可以是任何东西）。

你甚至可以这样做：

```
var quesArr = {
    q101: "Your name?",
    q102: "Your age?",
    q103: "Your school?"
}; 
```

或（如果键不是有效的标识符）：

```
var quesArr = {
    "q101": "Your name?",
    "q102": "Your age?",
    "q103": "Your school?"
}; 
```

这些可以是单引号或双引号。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-25T06:32:47.523

假设您有以下内容，

```
var myObject = {};  // Denotes an Object is being created
myObject.city = "Chennai";
myObject.state = "Tamilnadu";
myObject.country = "Indian Peninsula";
console.log(myObject.length);  // Results in undefined 
```

但是，有一种方法可以在现代浏览器（Chrome、Firefox 4+ 和 Internet Explorer 9）中计算长度：

```
Object.keys(myObject);
// --> ["city", "state", "country"]
Object.keys(myObject).length
// --> 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:28:30.057

*还可以通过使用称为length*的关联元素跟踪数组的长度来处理关联数组长度问题。

**众所周知**：

```
myArray["length"] = 0; 
```

当您添加或删除元素时，只需从元素中添加或减去`myArray["length"]`。

然后您可以执行以下操作：

```
theLength = myArray.length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-12T11:15:39.953

关联数组没有长度属性，但[您可以获得长度](https://i.stack.imgur.com/nIqQS.png)。

# jvm - Jboss Mbeans 在 jmx-console 中可见但在 JConsole 中不可见

> ID：10563256
> 
> 赞同：2
> 
> 时间：2012-05-12T11:21:16.970
> 
> 标签：jvm, jmx, jconsole, jboss-4.0.x

JBoss(4.0.x) 有许多有用的 MBean ( `org.apache.commons.modeler.*`)，它们可见于： `/jmx-console`

但我看不到 JConsole（MBeans 选项卡）中列出的这些 bean。

这些豆子不暴露在外界吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:44:18.997

JBoss 4.x 有自己的内部 MBean 服务器，与默认的 JVM 不同（JBoss AS 4.x 早于 Java 5 及其 MBean 服务器，因此需要自己的）。

我相信在 JBoss AS 5.x 中你可以告诉它使用 JVM 的 MBean 服务器，但我不认为 JBoss AS 4.x 提供了这个选项。

> 这些豆子不暴露在外界吗？

是的——JBoss AS 的内部 MBean 服务器与 JVM 一样暴露，只是暴露方式不同。JConsole 与 JVM 的 MBean 服务器对话，您需要不同的工具与 JBoss AS 对话。

PS JBoss AS 4.0 令人瞠目结舌（2004 年？2005 年？）。你真的应该更新它。

# iphone - 如何计算从我现在所在位置到特定点的距离

> ID：10563258
> 
> 赞同：1
> 
> 时间：2012-05-12T11:21:27.277
> 
> 标签：iphone, objective-c, ios, mapkit

在我的应用程序上，我已经确定了一个感兴趣的区域。还有我所在位置的 GPS，我现在如何让应用程序计算并向用户显示他们的距离有多远？

我的 .h 文件设置有地图视图、用于查找我的位置的按钮并设置地图选项以在地图/卫星和混合视图之间进行选择。

在我的 .m 文件中，我有设置位置和我所在位置的所有代码，并且还启用了跟踪模式。还要设置不同的地图视图，并在我的地图上设置一个定位点并设置纬度和经度，然后启用缩放和滚动功能。我还设置了这样在地图上，当您单击精确区域时，它会显示名称和该地点的简短描述。所以此时一切正常：D

我真的需要找到如何找到我的点和精确区域之间的距离。

## *请注意我正在使用 MapKit！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:31:25.470

在这里，如果您在 CLLocationManager 的委托方法中使用以下代码，那么它会返回从当前点到目标点的距离。

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    CLLocation *appleHQ = [[CLLocation alloc] initWithLatitude:37.322998 longitude:-122.032182];////here put your destination point

    NSLog(@"New Location:%@", newLocation);
    CLLocationDistance distance = [newLocation distanceFromLocation:appleHQ];
    NSLog(@"Distance to Apple HQ %4.0f km", distance);
    [appleHQ release];
} 
```

试试这个代码......希望这对你有帮助。

# php - 在 wordpress 中的帖子标题旁边添加视频/图库图标

> ID：10563261
> 
> 赞同：1
> 
> 时间：2012-05-12T11:22:09.740
> 
> 标签：php, wordpress, title, html

我想在标题旁边添加一个视频图标/图库图标，该帖子包含视频/照片库。我在最新的 wordpress 上并制作自己的自定义主题。目前我正在使用

```
<h3><a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a></h3> 
```

为标题。我正在研究另一个主题（不是我的），之前的标题上有视频图标。我在functions.php中找到的代码

```
<?php
 function title_embed($title,$conts)
        {
                $pattern ="/<object> ?.* <\/object>/isx";
                $return =preg_match($pattern, $conts,$result);
                if($result)
                {
                    $return = $title.'<span class="video-icon"></span>';
                    return $return;
                }    
                else{return $title;}        
} 
```

这使得帖子标题的跨度类包含`<object>`和`</object>`。标题代码是

```
 <a href="<?php echo $arraybox['link'][0];?>" title="<?php echo $arraybox['alt'][0];?>"><h2><?php echo $arraybox['title'][0];?></h2></a> 
```

我尝试将上面的代码粘贴到我当前主题的 functions.php 中，但什么也没发生。我认为问题可能出在我称呼标题的方式上。我用谷歌搜索了一个资源，浪费了我 6-7 个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:02:05.327

基本上，您的代码`<object> </object>`会在内容中查找标签，
如果找到，它将类为 video-icon 的跨度附加到标题。这个跨度可能会被设置为 css 中的视频图标。

您是否尝试过调用您的函数`$conts= the_content()`

# java - 检查其他类中主视图的复选框状态

> ID：10563268
> 
> 赞同：0
> 
> 时间：2012-05-12T11:23:04.310
> 
> 标签：java, android, checkbox

在主视图类/活动中，我有几个复选框。现在在另一个类中并且另一个视图处于活动状态，我想检查我的 Android 应用程序的“主”窗口中复选框的状态。我怎样才能做到这一点？

这是我尝试过的：

```
 protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        setContentView(R.layout.main);
        View v = findViewById(R.id.cbHasWifi);
        CheckBox check = v.findViewById(R.id.cbHasWifi);
        v.setContentView(v); 
```

看起来，整个代码块让我无处可去。我还担心另一个 View 上下文处于活动状态，如果在我的 setContentView() 之后没有“恢复”，可能会产生后续问题，这是合理的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:50:58.073

除了主 UI 线程之外，您无法在任何线程中对 UI 执行任何操作，因此尝试从中设置内容视图`doInBackground`是行不通的。

此外，您还没有明确说明您是否正在运行其他活动。如果您正在运行一项新活动，则无法保证您的数据从第一个活动开始仍然存在。

# .net - 故障异常 将自我跟踪实体作为异常的属性？

> ID：10563270
> 
> 赞同：0
> 
> 时间：2012-05-12T11:23:20.937
> 
> 标签：.net, wcf, exception-handling, self-tracking-entities

我有一个带有一种异步方法 updateUsers 的 WCF 服务。用户名是唯一的，所以当我保存更改时，如果存在分配给新用户的用户名，我会收到 UpdateException。

我创建了一个自定义异常 UniqueKeyUsersException，它具有三个属性，一个带有 ID 的 int64 和两个字符串，一个用于用户名，另一个用于密码。目前是数据库表中的所有字段。

这个异常，被装饰为 Serializable 并实现了 ISerializable 接口。有了这个，我可以将信息发送给客户。如果我不实现这个接口，到客户端会出现异常，但是所有的属性都是空的。

一切正常，客户端到达带有存在的用户名信息的 FaultException。

但是，我正在考虑在异常中仅使用一个属性的可能性，即用户类型，这是我在外部库中拥有的自我跟踪实体。这个想法是将具有数据库中存在的寄存器的实体发送给客户端，因此用户可以决定查看现有用户的信息。这样，用户保存了做新查询所需。如果我要使用我的三个属性发送异常，我将必须创建一个新对象 Users 并将异常中的信息转换为 Users 实体。

我的问题是，当我在异常中添加用户类型的属性（一个 STE）时，当我抛出 FaultException 时，它会失败，使服务崩溃。我认为这可能是出于序列化的原因，可能需要在 ISerialize 的实现中添加 STE 的序列化。

但这将是很多工作，因为STE不仅有数据库的信息，还有实体的跟踪和其他属性。

所以我的问题是是否存在使用 STE 作为异常属性的任何方式，或者我只能使用基本类型？

谢谢。戴姆洛克。

# mysql - 这些 SQL 查询是否相同 - 如果不是，有什么区别

> ID：10563272
> 
> 赞同：1
> 
> 时间：2012-05-12T11:23:32.157
> 
> 标签：mysql, sql

假设有适当的表 - 两个查询之间有什么区别 - 它们何时返回不同的结果

```
选择 *
来自 quiz_user 曲
在 qu.quiz_id = qt.quiz_id 和 qt.topic_id=44 上加入 quiz_topic qt
其中 qu.user_id=9

选择 *
来自 quiz_user 曲
在 qu.quiz_id = qt.quiz_id 上加入 quiz_topic qt
其中 qu.user_id=9
和 qt.topic_id=44

```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:30:03.150

我看不出查询有什么不同。但是，如果您使用`LEFT JOIN`而不是`INNER`（默认），结果会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:36:49.050

没有，但第二个代码的意图更清楚，JOIN只是用来反映数据关系，而不是过滤。

在第一个代码的 JOIN 中，数字 44 似乎与 quiz_topic 与 quiz_user 的关系有关

# javascript - iPhone 上带有 GO 按钮（提交）的文本区域

> ID：10563273
> 
> 赞同：6
> 
> 时间：2012-05-12T11:23:38.267
> 
> 标签：javascript, iphone, html, textarea, submit

我有一个带有 textarea 的表格（它是一个聊天）。按 Enter 提交表单（通过 javascript/jquery）

它在所有带有回车键的普通计算机上都能很好地工作。但在 iPhone 上，没有回车键，也没有出现 GO（提交）按钮，表示无法发送表单

如果 textarea 改为**输入 type="text"**字段也没问题，但是我错过了 textarea 中的多行换行等

我该如何解决这个问题？我宁愿不显示提交按钮也不制作表单的两个版本。而且我相信输入字段不能充当文本区域，对吗？（多行）

# perl - 为什么我用 Perl 编写的图像下载 CGI 脚本不起作用？

> ID：10563275
> 
> 赞同：2
> 
> 时间：2012-05-12T11:23:47.993
> 
> 标签：perl, cgi, download

```
#!/usr/bin/perl 
use CGI ':standard';
use CGI::Carp qw(fatalsToBrowser); 
my $files_location; 
my $ID; 
my @fileholder;
$files_location = "C:\Users\user\Documents\hello\icon.png";
open(DLFILE, "<$files_location") ; 
@fileholder = <DLFILE>; 
close (DLFILE) ; 
print "Content-Type:application/x-download\n"; 
print "Content-Disposition:attachment;filename=$ID\n\n";
print @fileholder; 
```

当我运行这个脚本时，它没有`icon.png`返回文件，而是返回`download.pl`（上面给出的脚本的名称），其中***没有内容***。问题是什么？

我目前正在使用的脚本。

```
#!C:\Perl64\bin\perl.exe -w 
use CGI qw(:standard);
use File::Copy qw( copy );
use File::Spec::Functions qw( catfile );
use constant IMG_DIR => catfile(qw(     D:\  ));
serve_logo(IMG_DIR);
sub serve_logo {
    my ($dir) = @_;

                my $cgi = CGI->new;

                my $file = "icon.png";
                #print $file;

                defined ($file)         or die "Invalid image name in CGI request\n";
                send_file($cgi, $dir, $file);

                return;
                }
sub send_file
  {
    my ($cgi, $dir, $file) = @_;
    my $path = catfile($dir, $file);
    open my $fh, '<:raw', $path         or die "Cannot open '$path': $!";
    print $cgi->header(         -type => 'application/octet-stream',         -attachment => $file,     ); 
    binmode STDOUT, ':raw';
     copy $fh => \*STDOUT, 8_192;      
    close $fh         or die "Cannot close '$path': $!";
    return;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T11:48:12.320

有不少问题。`@fileholder = <DLFILE>;`第一个是您正在使用slurp 二进制文件的事实。在 Windows 上，行尾的自动转换会对该文件的内容造成严重破坏。

其他问题是：

1.  您没有检查`open`. 我们甚至不知道是否`open`成功。

2.  您永远不会为 分配值`$ID`，这意味着您正在发送`"filename=\n\n"`响应。

3.  您正在使用二进制文件，使程序的内存占用与二进制文件的大小成正比。健壮的程序不会那样做。

4.  您正在使用[CGI.pm](http://search.cpan.org/perldoc/CGI)`use`，但您既没有使用它，也没有阅读文档。

5.  您使用的是裸字（即包全局）文件句柄。

然而，根本原因是`open`失败了。为什么会`open`失败？简单的：

```
C:\temp> 猫 uu.pl
#!/usr/bin/env perl

使用严格；使用警告；

我的 $files_location = "C:\Users\user\Documents\hello\icon.png";
打印 "$files_location\n";
```

让我们尝试运行它，好吗？

```
C:\temp> uu
无法识别的转义 \D 在 C:\temp\uu.pl 第 5 行通过。
无法识别的转义 \h 在 C:\temp\uu.pl 第 5 行通过。
无法识别的转义 \i 在 C:\temp\uu.pl 第 5 行通过。
C:SERSSERDOCUMENTSHELLOICON.PNG
```

这是一个简短的脚本，说明了一种更好的方法：

```
use CGI qw(:standard);
use File::Copy qw( copy );
use File::Spec::Functions qw( catfile );

use constant IMG_DIR => catfile(qw(
    E:\ srv localhost images
));

serve_logo(IMG_DIR);

sub serve_logo {
    my ($dir) = @_;

    my %mapping = (
        'big' => 'logo-1600x1200px.png',
        'medium' => 'logo-800x600.png',
        'small' => 'logo-400x300.png',
        'thumb' => 'logo-200x150.jpg',
        'icon' => 'logo-32x32.gif',
    );

    my $cgi = CGI->new;

    my $file = $mapping{ $cgi->param('which') };
    defined ($file)
        or die "Invalid image name in CGI request\n";

    send_file($cgi, $dir, $file);

    return;
}

sub send_file {
    my ($cgi, $dir, $file) = @_;

    my $path = catfile($dir, $file);

    open my $fh, '<:raw', $path
        or die "Cannot open '$path': $!";

    print $cgi->header(
        -type => 'application/octet-stream',
        -attachment => $file,
    );

    binmode STDOUT, ':raw';

    copy $fh => \*STDOUT, 8_192;

    close $fh
        or die "Cannot close '$path': $!";

    return;
} 
```

我还在[我的博客上发布了详细的解释](http://blog.nu42.com/2012/05/file-download-cgi-script-in-perl.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:23:31.387

我花了一段时间才弄清楚出了什么问题，所以对于那些最终在这里（就像我一样）在提供大文件时遇到随机问题的人，这是我的建议：

避免使用 File::Copy，因为它为此目的存在错误。当通过 CGI 提供数据时，syswrite 可以在一段时间内返回 undef（$! 是“资源暂时不可用”）。

File::Copy 在这种情况下停止（返回 0，设置 $！），无法传输整个文件（或流）。

许多不同的选项可以解决这个问题，重试系统写入或使用阻塞套接字，但不确定哪个是最好的！

# node.js - nodejs - 为什么 Node.js 可以处理大量的同时持久连接？

> ID：10563278
> 
> 赞同：5
> 
> 时间：2012-05-12T11:24:09.140
> 
> 标签：node.js, networking, tcp

我知道 Node.js 擅长保持大量同时的持久连接，例如，许多聊天者的聊天室。

我想知道它是如何实现这一点的。我的意思是无论如何它使用的是由底层操作系统封装的 TCP/IP，为什么它可以很好地处理持久连接而其他人不能？

它有什么神奇之处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T11:33:00.703

Node.js 使所有 I/O 都是异步的。它只在单个线程中运行，但在等待 I/O 时会执行其他请求或操作。

相比之下，经典的 Web 服务器在前一个请求完全完成之前不会处理另一个请求。为此，Apache 同时运行多个进程；假设有 10 个`httpd`进程，这通常意味着可以同时处理 10 个请求 (*)。如果进程需要更多时间来完成，您将提供更少的请求 - 或者将不得不产生更多进程，即使该进程什么都不做 - 比如等待数据库咀嚼并返回数据。

一个 node.js 进程，面对一个将进入数据库的请求，让数据库继续工作，同时它去服务另一个请求。

*) MPM 使这不太正确，但对于所有意图和目的来说都足够正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:44:44.107

好吧，事情是大多数 Web 服务器（如 apache 等）使用线程生成来工作，它们为每个传入的 HTTP 请求生成一个新线程。这些线程本质上是同步和阻塞的 => 这意味着它们将按照编写的顺序执行代码，并且任何进一步的计算都将被当前的 I/O 或计算任务阻塞。就像如果你想监听一个事件，比如 - 聊天者的聊天提交，你需要每个用户都有一个专用线程（每个用户是维持持久连接所必需的，几乎没有可能的优化技术，但你仍然可以假设线程是用户）监听这个事件，这个线程将被阻塞等待这个事件发生。所以对于任何线程产生和阻塞网络服务器

另一方面，Javascript本质上是非阻塞的（并且可以传导异步代码）=>在这里您为事件注册一个回调，并且每当它发生时，都会执行一些回调函数。它不会在任何时候阻塞等待这个事件。

您可以通过阅读有关非阻塞或异步服务器的信息来了解更多信息。

# javascript - 是否可以跟踪离开或访问其他站点的访问者？

> ID：10563284
> 
> 赞同：1
> 
> 时间：2012-05-12T11:25:24.917
> 
> 标签：javascript, jquery, tracking

是否可以跟踪离开或访问其他站点的访问者，例如仅在他们想要移动到其他站点或其他域名时才提出问题？我写这段代码

```
<script language="JavaScript">
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "leave?";
  }
</script> 
```

但是即使在我自己的页面上，这段代码也每次都有效。我想让这个代码在访问者通过提示 URL（不是通过链接）访问另一个域时运行。可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:27:46.090

我认为这是浏览器插件的任务，而不是页面脚本。JS 不可能知道用户在页面外做了什么。

如果这是可能的，那将是一个全新的安全问题，一个隐私问题，而且我不会访问你的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:41:48.887

正如你在这个问题中标记了 jquery 我猜你已经在使用 [http://jquery.com/](http://jquery.com/)

```
<script language="JavaScript">
  $(document).ready(function(){
       $("a").click(function(){
       if( fnGetDomain(document.location) == fnGetDomain($(this).attr("href")) )
       {
            return true;
       }
       else{
            return confirm("Leave page?");
       }

   });
});
function fnGetDomain(url) {
  return url.match(/:\/\/(.[^/]+)/)[1];
}
</script> 
```

如果有任何问题`document.location.href`，您可以使用`document.location`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T11:59:19.530

我在这里尝试了一个东西，不确定它是否适用于所有情况......

```
window.onbeforeunload = confirmExit;

function confirmExit(event)
{
    console.log(event);
    console.log("Current : " + event.srcElement.domain);
    console.log("Target : " + event.target.domain);
    if (event.srcElement.domain != event.target.domain)
    {
        return "leave ?";
    }
    else
    {
        // staying here
    }
}​ 
```

# python - Python，删除列表中所有出现的字符串

> ID：10563288
> 
> 赞同：10
> 
> 时间：2012-05-12T11:25:45.147
> 
> 标签：python, string, list

假设我有一个清单：

```
main_list = ['bacon', 'cheese', 'milk', 'cake', 'tomato'] 
```

和另一个清单：

```
second_list = ['cheese', 'tomato'] 
```

我想从主列表中删除在第二个列表中找到的所有元素？

先感谢您

亚当

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T11:28:15.430

```
new_array = [x for x in main_array if x not in second_array] 
```

但是，这对于大型列表不是很有效。您可以通过使用一组进行优化`second_array`：

```
second_array = set(second_array)
new_array = [x for x in main_array if x not in second_array] 
```

如果项目的顺序无关紧要，您可以为两个数组使用一个集合：

```
new_array = list(set(main_array) - set(second_array)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T11:27:06.987

如果顺序不重要，您可以使用[sets](http://docs.python.org/library/stdtypes.html#set)：

```
>>> main_array = ['bacon', 'cheese', 'milk', 'cake', 'tomato']
>>> second_array = ['cheese', 'tomato']
>>> set(main_array) & set(second_array)
set(['tomato', 'cheese']) 
```

这里我们使用交集运算符，`&`。如果您只想要第二个列表中未找到的项目，我们可以使用差异，`-`：

```
>>> set(main_array) - set(second_array)
set(['cake', 'bacon', 'milk']) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T11:32:42.793

```
main_array = set(['bacon', 'cheese', 'milk', 'cake', 'tomato'])
second_array = (['cheese', 'tomato'])

main_array.difference(second_array)
>>> set(['bacon', 'cake', 'milk'])

main_array.intersection(second_array)
>>> set(['cheese', 'tomato']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T22:17:32.990

```
l = [u'SQOOP', u'SOLR', u'SLIDER', u'SFTP', u'PIG', u'NODEMANAGER', u'JSQSH', u'HCAT', u'HBASE_REGIONSERVER', u'GANGLIA_MONITOR', u'FLUME_HANDLER', u'DATANODE', u'BIGSQL_WORKER']

p = [u'SQOOP', u'SOLR', u'SLIDER', u'SFTP']

l = [i for i in l if i not in [j for j in p]]

print l
[u'PIG', u'NODEMANAGER', u'JSQSH', u'HCAT', u'HBASE_REGIONSERVER', u'GANGLIA_MONITOR', u'FLUME_HANDLER', u'DATANODE', u'BIGSQL_WORKER'] 
```

# javascript - 将元素的顺序更改为顶部

> ID：10563291
> 
> 赞同：5
> 
> 时间：2012-05-12T11:25:52.293
> 
> 标签：javascript

```
 <div id="container">
        <div id="1">1</div>
        <div id="2">2</div>
        <div id="3">3</div>
        <div id="4">4</div>
   </div> 
```

如何`div`使用纯 javascript 将 #4 移动到顶部 我看到了[这个](https://stackoverflow.com/questions/7742305/changing-the-order-of-elements-using-javasript)，但它只能将元素移动到底部。例如，这将有助于将#1 移动到底部。通过将所有其他元素移动到底部，它将 #4 移动到顶部。没有直接的方法可以将#4 移到顶部吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T11:32:18.537

```
var _4th = document.getElementById('4'); // BTW. numeric IDs are not valid
var parent = _4th.parentNode;
var _1st = parent.firstChild;

parent.insertBefore(_4th, _1st); 
```

一个[JSFiddle 示例](http://jsfiddle.net/FuFtF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:37:51.483

你可以试试这个：

```
var container = document.getElementById("container");
var el = document.getElementById("4")​;
container.insertBefore(el, container.firstChild); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T11:43:36.317

jQuery解决方案是，

你的 HTML 是，

```
 <div id="container">
        <div id="1">1</div>
        <div id="2">2</div>
        <div id="3">3</div>
        <div id="4">4</div>
   </div>  ​ 
```

一些额外的CSS，

```
#container {
    border:1px solid #888;
    padding:10px;
    margin:5px;
    border-radius:10px;
}
#container div{
    border:1px solid #Cda12a;
    margin:5px;
    text-align:center;
    height:25px;
    color:#fff;
    background:#000;
} 
```

而JavaScript代码是，

```
$(function() {
    $( "#container" ).sortable();
    $( "#container" ).disableSelection();
});​ 
```

请在[此处参考工作示例](http://jsfiddle.net/bpRAu/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-12T11:32:01.320

```
jQuery("#4").before(jQuery("#1").html()); 
```

试试这个

# windows - 移动或复制和截断正在使用的文件

> ID：10563293
> 
> 赞同：1
> 
> 时间：2012-05-12T11:26:02.883
> 
> 标签：windows, linux, ffmpeg, copy, truncate

我希望能够（以编程方式）移动（或复制和截断）一个不断使用并被写入的文件。这将导致被写入的文件永远不会太大。

这可能吗？Windows 或 Linux 都可以。

具体来说，我正在尝试使用 FFMPEG 记录视频并创建一小时长的视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:48:51.793

在 Windows 和 Linux 中都是可能的，但需要相关应用程序之间的合作。如果将新数据写入文件的应用程序不知道其他应用程序在做什么，它可能无法工作（嗯......有一些可能性......稍后再回到那个）。

通常，要使其正常工作，您必须打开共享的文件。例如，如果使用 Windows API CreateFile，两个应用程序都可能需要指定`FILE_SHARE_READ`和`FILE_SHARE_WRITE`. 这将允许两个（多个）应用程序“同时”读取和写入文件。

但是，除了共享文件之外，还需要协调应用程序之间的操作。您将需要使用某种锁定机制（通过锁定文件的某些部分或某些共享互斥体/信号量）。请注意，如果您使用文件锁定，您可以锁定文件中的一些已知偏移量以充当“信号量”（它甚至可以是超出文件物理结尾的字节值）。如果一个应用程序在另一个应用程序截断文件的同时附加到文件，那么这将导致不可预知的结果。

回到关于两个应用程序需要相互了解的评论......如果两个应用程序都以独占方式打开文件并不断重试操作直到成功，然后执行操作，然后关闭文件，它基本上会允许他们在彼此不“了解”的情况下工作。但是，这可能不会很好，也不是很有效。

说了这么多，出于效率原因，您可能需要考虑替代方案。例如，如果可以让写入应用程序定期写入新文件，那么它可能比必须不断地将数据从一个文件“移动”到另一个文件更有效。此外，如果您需要维护文件的某些部分（例如，将前 100 MB 移出到另一个文件，然后将第二个 100 MB 移到开头），这也可能是一项相当昂贵的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:42:12.387

logrotate 将是一个不错的选择是 linux，几乎任何发行版都有库存。我确定某处有类似的 Windows 服务

# java - 有没有办法在 Java 小程序中禁用发送 SNI 记录？

> ID：10563295
> 
> 赞同：1
> 
> 时间：2012-05-12T11:26:33.030
> 
> 标签：java, applet, sni

我尝试过使用该`params`元素：

```
<param name='java_arguments' value='-Djsse.enableSNIExtension=false'> 
```

也从代码中尝试过

```
System.setProperty("jsse.enableSNIExtension", "false"); 
```

看到这些线程，但建议的解决方案都没有奏效：

*   [握手期间恢复缓存会话时出现 SSLException](https://stackoverflow.com/questions/10188568/sslexception-during-handshake-while-resuming-cached-session)
*   [SSL 握手警报：升级到 Java 1.7.0 后出现 unrecognized_name 错误](https://stackoverflow.com/questions/7615645/ssl-handshake-alert-unrecognized-name-error-since-upgrade-to-java-1-7-0)

但我真正想要的是在 Java 机器开始下载小程序代码之前通常禁用 SNI。

# iphone - 在 iOS 4.3 模拟器上调试

> ID：10563296
> 
> 赞同：2
> 
> 时间：2012-05-12T11:26:36.617
> 
> 标签：iphone, xcode

我一直在用 leopard 上的 Xcode 4.2 开发一切，我最近安装了 Lion，Xcode 4.2 的 Lion 版本，一切都变成了 5.0！模拟器，我的项目，一切。

现在我尝试将我的项目部署目标设为 4.3 并更改了模拟器，当我的应用程序启动时我得到的只是黑屏，我什至没有在 viewDidLoad 上打断点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:54:00.990

我以前遇到过这个令人沮丧的问题（在模拟器中启动应用程序后出现黑屏，没有断点命中，也没有迹象表明调试控制台中发生了任何事情）。

我感觉这是构建产品和模拟器之间某处损坏的 XIB 文件。

现在我不能 100% 确定是什么为我修复了它，但我结合了“清理”项目（甚至丢弃了 Derived Data 文件夹）以及从模拟器中删除应用程序，然后重新启动 Xcode 和重建应用程序之前的模拟器。

# c# - MacOS 上 Mono 控制台应用程序中的文本转语音

> ID：10563297
> 
> 赞同：4
> 
> 时间：2012-05-12T11:26:49.140
> 
> 标签：c#, macos, mono

我正在使用桌面 MacOS 中的 C# Mono 开发控制台应用程序。有没有办法执行 Mac 的文本到语音处理器？我希望控制台应用程序根据字符串说出一个句子。

一如既往地提前感谢您。

# ruby-on-rails-3 - rails 3.2，twitter bootstrap 为什么带有图标的按钮宽度不正确？

> ID：10563299
> 
> 赞同：0
> 
> 时间：2012-05-12T11:26:58.703
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我正在尝试在按钮旁边添加一个图标，图标出现了，但是，位置不对，按钮总宽度也不对，请检查下面的图片，我试图设置红色按钮的宽度，但是，图标仍然出现在按钮文字上。

![在此处输入图像描述](../Images/647245fdf39952c506fa2eca11c58f96.png)

这是我用过的haml代码：

```
= link_to new_class_room_path, {:class=>'btn btn-primary'} do
  %i{:class=>'icon-plus'}
    %span
      New Class Room

%a{:class=>"btn btn-danger", :ref=>"#", :style=>'width: 200px;'}
  %i{:class=>"icon-trash icon-white"}
    Delete 
```

任何人都可以告诉我我在这里缺少什么？ps：如果我不使用图标，按钮会以正确的宽度正常显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:16:28.027

您已将文本嵌套在图标中。

代替：

```
= link_to new_class_room_path, {:class=>'btn btn-primary'} do
  %i{:class=>'icon-plus'}
    %span
      New Class Room

%a{:class=>"btn btn-danger", :ref=>"#", :style=>'width: 200px;'}
  %i{:class=>"icon-trash icon-white"}
    Delete 
```

利用：

```
= link_to new_class_room_path, {:class=>'btn btn-primary'} do
  %i{:class=>'icon-plus'}
  %span
    New Class Room

%a{:class=>"btn btn-danger", :ref=>"#", :style=>'width: 200px;'}
  %i{:class=>"icon-trash icon-white"}
  Delete 
```

# c# - StreamReader 和 TextReader

> ID：10563300
> 
> 赞同：4
> 
> 时间：2012-05-12T11:26:59.863
> 
> 标签：c#, visual-studio-2008

我正在尝试使用 StreamReader 从 pbx 文件中读取，编辑内容并将内容显示到使用 c# 中的 TextReader 的新文件中。

这是我在 ac# 中的第一个开发任务。

我在 uni 学习 java，我的新工作使用 c#。

基本上，我必须从电话系统读取 pbx 文件中包含的记录列表。然而，这些记录有一行良好的通话记录，然后是一行带有一些可疑字符的行，然后是另一行良好的记录。

我的任务是逐行阅读这个文件，然后编写一段代码来忽略带有不可靠字符的行，并将好的记录输出到我的 c:\ 驱动器上的一个新文件中，该文件我称为 output.txt。

我可以编写while循环来取出狡猾的字符，但我不确定从我的c驱动器上的pbx文件中读取的c#代码，然后将编辑的内容输出到一个名为output.txt的新文件，也在我的c驱动器上。

我是 c# 的新手，并且已经在这方面探索了谷歌几个小时。只需要一点指导，我就走了……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T12:14:50.670

你没有提到文件编码，所以我在这里坚持使用 UTF-8 默认值。

一种选择是读取、检查和有条件写入的循环的“常规”方法，如下所示：

```
var inputFilePath  = @"C:\temp\input.txt";
var outputFilePath = @"C:\temp\output.txt";

using (var reader = File.OpenText(inputFilePath))
using (var writer = File.CreateText(outputFilePath))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        var isValidLine = CheckLine(line);
        if (isValidLine)
        {
            writer.WriteLine(line);
        }
    }
} 
```

由于您标记了此 VS2008，我猜这意味着您仅限于 .NET 3.5，但在 4.0 或更高版本上，您可以读写枚举然后利用它（在 .NET 3.5 中，您必须阅读所有行进入内存，过滤，然后写入所有行）。

```
var inputFilePath  = @"C:\temp\input.txt";
var outputFilePath = @"C:\temp\output.txt";

var inputLines = File.ReadLines(inputFilePath);

var linesToWrite = inputLines
    .Where(line => IsLineValid(line));

File.WriteAllLines(outputFilePath, linesToWrite); 
```

# spring - 在 Spring MVC (3.1.1) 中提供静态内容

> ID：10563302
> 
> 赞同：1
> 
> 时间：2012-05-12T11:27:20.123
> 
> 标签：spring, spring-mvc

我的调度程序 servlet 映射到应用程序的根目录。

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我的 webroot 中有一个名为“static”的文件夹。它包含 CSS、JS 和图像文件。但是，由于调度程序 servlet 映射，对静态内容的请求以 404 结束。

我知道解决这个问题的解决方案。

1.  使调度程序映射到更具体的 URL，例如：context：/app/，然后编写一个过滤器来拦截请求，并有条件地映射到默认 servlet，或者委托给 spring 调度程序。

2.  URL 重写技巧。

3.  使用`<mvc:resources />`

问题是，我的映射是基于 XML 的，我绝对不会以使用注释的名义将我的映射配置分散在各处。因此，如果我使用`<mvc:resources />`，我的基于 xml 的映射会中断，并且到不同控制器的所有 url 映射都会丢失。

这是因为`<mvc:resources /`> 会覆盖某些设置并应用它自己的设置。但它也是静态内容最干净的解决方案。

有什么方法可以告诉`<mvc:resources />`不要覆盖我的基于 xml 的映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:26:34.127

`<mvc:resources />`似乎非常适合您的问题。

据我了解，您`DispatcherServlet`正在处理对服务器的所有请求。所以资源标签应该返回在 mvc:resources 位置属性中指定的位置的文件。除了映射的内容之外，它不应该捕获任何内容。

您是否正在使用类似的东西

```
<mvc:resources mapping="/static/**" location="/static/"/> 
```

如果它覆盖了标签中不可配置的设置，请考虑实例化您自己的`org.springframework.web.servlet.resource.ResourceHttpRequestHandler`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:56:26.460

我在 web.xml 中有这个

```
 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/resources/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
    <url-pattern>*.js</url-pattern>
    <url-pattern>*.css</url-pattern>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T11:34:45.920

您可以为您的控制器提供文件扩展名，例如

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

然后所有以结尾的 URL`.do`都会经过 springs DispatcherServlet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T09:57:16.837

将 <mvc:default-servlet-handler/> 添加到 web.xml 文件的顶部

或者如果您正在使用注释

```
@Configuration
@EnableWebMvc
public class MVCConfig extends WebMvcConfigurerAdapter {

    @Override
    public void configureDefaultServletHandling(
            DefaultServletHandlerConfigurer configurer) {
        configurer.enable("default");
    }
} 
```

# javascript - 隐藏表单域性能

> ID：10563304
> 
> 赞同：1
> 
> 时间：2012-05-12T11:27:36.533
> 
> 标签：javascript, html

我一直在我的代码中使用隐藏的表单字段很多次。根据要求，我将一些值存储在此/这些隐藏字段中，因此我可以轻松地从 JavaScript 代码访问它们并避免 PostBack。但是，我想知道一些事情

1.  在填充隐藏字段方面是否有我不应该跨越的限制？
2.  隐藏字段的使用是否会导致某种安全威胁？

我确实找到了关于隐藏表单字段的[讨论](https://stackoverflow.com/questions/2881632/why-are-hidden-fields-used)，但它并没有满足我的所有查询。

我真的很感激任何链接或解释？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:15:38.360

这就是我要说的：

1.  只要您使用 POST 作为方法，隐藏的表单字段通常没有长度限制。我从未将表单与 GET 表单请求一起使用（例如，使用 RESTful 服务），显然最好将总 GET 请求保持在 2KB 或更少，但这个限制实际上归结为[URL 的最大长度，](http://support.microsoft.com/kb/208427)并且[因浏览器而异到浏览器](http://www.boutell.com/newfaq/misc/urllength.html)（这意味着将非常大的数据分块到多个 2k 隐藏字段中不适用于 GET 提交）。

2.  如果您使用隐藏的表单字段来存储有关用户应用程序状态的信息（而不是使用 .NET 来为您管理），那么您需要知道用户可以（并且可能会）以您没有的方式修改这些字段'期待。如果用户不应更改字段，则应在另一个隐藏变量中包含数据的哈希或校验和，以便您可以轻松检测意外更改（并至少清除用户的状态）。借助 Chrome、IE、Safari 和 Firefox 中的现代网络检查器面板，以开发人员可能未预料到的方式修改页面非常容易。只需将客户端返回的所有数据（包括所有查询字符串、表单字段、cookie 和请求标头）视为已污染（即“危险”）并采取相应措施。

# java - mysql查询缓存

> ID：10563307
> 
> 赞同：2
> 
> 时间：2012-05-12T11:28:04.193
> 
> 标签：java, mysql

我有一个应用程序的 MySQL 数据库，但是随着记录的增加，响应时间现在已经上升，所以我想在我的数据库中启用 mysql querycache。问题是我们经常重启主机，所以查询缓存一直为0。有没有办法处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:36:11.537

如果您的查询时间随着记录数的增加而增加，那么是时候评估表索引了。我建议启用慢速查询日志并针对慢速运行的查询运行解释以找出放置索引的位置。另外请停止随机重新启动数据库并修复根本原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:44:31.890

如果您不介意更长的启动时间，我认为您可以尝试在启动时预热缓存...您可以将查询放在单独的文件中（或创建一个运行一堆的存储过程`selects`，然后调用 SP），并且然后在`init_file`参数中指定它的路径`my.cnf`

# c# - 实体框架中的关系问题

> ID：10563310
> 
> 赞同：1
> 
> 时间：2012-05-12T11:28:54.263
> 
> 标签：c#, database, asp.net-mvc, sql-server-2008, entity-framework

我在 EF v4 中遇到了关系问题。我知道这个问题很受欢迎，我试图在 Internet 上找到一些东西，但没有帮助。我有一个与地址一对一的类人（人有地址）

```
class Person
{
public int PersonId{get;set;}
public string FisrtName{get; set;}
...
public int AddressId{get;set;}
public virtual Address Address{get;set;}
}
class Address
{
public int AddressId{get;set}
public string Street{get;set;}
...
} 
```

我假设这是一对一的关系，我遵循 EF v4 中的所有约定。但是当我创建生成的数据库的数据库图时。我看不到 Person 和 Address 之间的任何关系。我的意思是我看到两个表没有关系，Person 上的键和 Address 上的键另一个具有这种关系的表创建一对多帐户上的键和地址上的无穷大，但代码相同。我在设计器中只看到一对多的关系，在某些情况下，我可以看到表之间必须存在的任何关系。请帮帮我！谢谢你的帮助 PS我认为添加表格时设计师有问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:29:56.650

如果您首先使用代码，则可以使用流畅的代码 API 或使用属性来优化模型来自定义持久性映射。如果您要使用简单的键名（例如 Id），EF 可以通过推理解决关系；在您的情况下，EF 需要提示 PersonID 和 AddressID 是键。

要使用属性方法，请在项目中添加对 System.ComponentModel.DataAnnotations 的引用以及相应的“使用 System.ComponentModel.DataAnnotations;” 根据需要在源文件中。以下示例 (EF 4.3.1) 将在生成的 Addresses 和 Persons 表之间生成“一对多”关系（在这种情况下您不需要一对一）。运行代码后，您将在 SQL Server 数据库图表窗口中看到关系。

```
class Program
{
    static void Main(string[] args)
    {
        using (ContactsEntities entities = new ContactsEntities())
        {
            Address doeaddress = new Address() { Street = "1 Broadway", ZipCode = "01234" };
            Address doeaddress2 = new Address() { Street = "2 Broadway", ZipCode = "01234" };
            entities.Addresses.Add(doeaddress);
            entities.Persons.Add(new Person() { FirstName = "Jane", LastName = "Doe", Address = doeaddress });
            entities.Persons.Add(new Person() { FirstName = "John", LastName = "Doe", Address = doeaddress });
            entities.Persons.Add(new Person() { FirstName = "Jim", LastName = "Doe", Address = doeaddress2 });
            entities.SaveChanges(); 
        }
        Console.WriteLine("Press Enter to exit...");
        Console.ReadLine();

    }
}

[Table("Addresses")]
public partial class Address
{
    public Address()
    {
        this.Persons = new HashSet<Person>();
    }
    [Key]
    public int AddressID { get; set; }
    [Required]
    public string Street { get; set; }
    [RegularExpression(@"^(\d{5}-\d{4}|\d{5}|\d{9})$")]
    [Required]
    public string ZipCode { get; set; }

    public virtual ICollection<Person> Persons { get; set; }
}

[Table("Persons")]
public partial class Person
{
    [Key]
    public int PersonID { get; set; }
    public int AddressID { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }
    [ForeignKey("AddressID")]
    public virtual Address Address { get; set; }
}

public partial class ContactsEntities : DbContext
{
    public DbSet<Address> Addresses { get; set; }
    public DbSet<Person> Persons { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:22:31.120

根据反馈，这里是一对一（实际上是一对零或一）关系的示例。我使用 fluent API 来设置 OnModelCreating 覆盖中的关系。在这种情况下，一个人最多可以拥有一个照片行。在实践中，如果 Photos 表包含一个或多个大字节数组来保存图像数据，这可能很有用；为了清楚起见，我使用字符串来表示图像的链接。

```
 static void Main(string[] args)
    {
        using (ContactsEntities entities = new ContactsEntities())
        {

            entities.Persons.Add(new Person() { FirstName = "Jane", LastName = "Doe", Photo = new Photo() { PhotoLink = "/images/jane.jpg" } });
            entities.Persons.Add(new Person() { FirstName = "John", LastName = "Doe" }); // no photo
            entities.Persons.Add(new Person() { FirstName = "Joe", LastName = "Smith", Photo = new Photo() { PhotoLink = "/images/joe.jpg", ThumnbnailLink = "/images/thumbs/joe.jpg" } });

            // note that the following is not allowed based on the defined RI rules - will fail on call to SaveChanges:
            // entities.Photos.Add(new Photo() { PhotoLink = "/images/as.jpg" });

            entities.SaveChanges();

            foreach (Person person in entities.Persons)
            {
                Console.WriteLine("{0} {1} {2}", person.FirstName, person.LastName, person.Photo == null ? "missing photo" : person.Photo.PhotoLink);
            } 
        }

        Console.WriteLine("Press Enter to exit...");
        Console.ReadLine();

    }
}

public partial class ContactsEntities : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // a Person may have at most one Photo
        modelBuilder.Entity<Person>().HasOptional<Photo>(p => p.Photo);
        // a Photo is dependant on a Person (non-nullable FK constraint)
        modelBuilder.Entity<Photo>().HasRequired<Person>(p => p.Person);
        base.OnModelCreating(modelBuilder);
    }
    public DbSet<Photo> Photos { get; set; }
    public DbSet<Person> Persons { get; set; }
}

[Table("Photos")]
public partial class Photo
{
    [Key]
    public int PhotoID { get; set; }
    [Required]
    public string PhotoLink { get; set; }
    public string ThumnbnailLink { get; set; }
    public virtual Person Person { get; set; }
}

[Table("Persons")]
public partial class Person
{
    [Key]
    public int PersonID { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }

    public virtual Photo Photo { get; set; }
} 
```

# html - 最适合用于“clear: both;”的 HTML5 元素是什么？目的？

> ID：10563311
> 
> 赞同：5
> 
> 时间：2012-05-12T11:29:00.823
> 
> 标签：html, css

我有：

```
<section>
    <ul>
        <li>....</li>
        <li>....</li>
        <li>....</li>
        ..
    </ul>
</section> 
```

我希望s`<li>`向左浮动，在这些 s 的末尾`<li>`，就在 s 之后`</ul>`，我需要放置一个元素 as`clear: both;`以保持`section`s 块的完整性。

哪个 html5 元素最适合此目的？我应该去隐形`hr`吗？一个`div`？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T11:32:08.027

**无**，在适当的地方使用`overflow: hidden`技巧。

如果这不合适，请使用伪元素。例如，您可以使用...

```
ul:after { 
    content: "";
    clear: both;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:33:17.387

您可以为此使用[.clearfix](http://www.webtoolkit.info/css-clearfix.html)方法。像这样写：

```
ul:after{
 content:'';
 display:block;
 clear:both;
} 
```

# eclipse - 如何将最常见的 mercurial 命令添加到 Eclipse 工具栏？

> ID：10563312
> 
> 赞同：3
> 
> 时间：2012-05-12T11:29:05.387
> 
> 标签：eclipse, version-control, mercurial, eclipse-plugin, toolbar

每次我想访问 Mercurial 命令时，我都厌倦了*右键单击 -> 团队 -> 提交等操作，而且我不倾向于学习新的键盘快捷键。*

> **有没有一种简单的方法可以将最重要的 Mercurial 命令** （推送、拉取、提交、更新、合并……）添加到**Eclipse 工具栏** *，而无需* [编写我自己的插件来完成这项工作](http://www.vogella.com/articles/EclipseCommands/article.html)？

git 是可能的（*右键单击工具栏 -> 自定义透视图 -> git*），所以我很难相信没有人想出一个插件来为 Mercurial 完成同样的任务。

经过广泛搜索后，我在 MercurialEclipse 插件 bitbucket 存储库的问题跟踪器中发现了这个[未分配的提案](https://bitbucket.org/mercurialeclipse/main/issue/231/provide-eclipse-toolbar-with-most-used)。尽管它是在近三年前提出的，但它已经有了状态`new`，所以我认为开发人员不会在不久的将来实施它......

任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:04:07.837

我不认为有一种方法可以在不编写插件的情况下将自定义工具栏添加到 Eclipse 中。其他人也问过类似的问题：[如何向 Eclipse 工具栏添加按钮？](https://stackoverflow.com/questions/681113/how-do-i-add-buttons-to-the-eclipse-toolbar)

如何在 Eclipse 中向工具栏添加撤消/重做按钮的最佳答案[？](https://stackoverflow.com/questions/819846/how-to-add-undo-redo-buttons-to-toolbar-in-eclipse)似乎确实表明为 Eclipse 编写插件并不难。您的任务是找出正确的命令 ID 才能执行此操作。

或者，您可以显示 Team Synchronize 视图，然后您需要右键单击 Uncommitted 节点并选择 Commit。点击次数不多，但鼠标移动更少。

# jsf-2 - 从出生日期计算年龄（使用日历）IN Jsf

> ID：10563330
> 
> 赞同：0
> 
> 时间：2012-05-12T11:32:38.673
> 
> 标签：jsf-2, primefaces

我有一个使用 pimefaces 日历组件的表单，现在当用户使用此组件选择他的出生日期时，我想计算他当前的年龄并需要放入一个文本框。当用户选择他的出生日期时，年龄文本框应该会自动显示。

```
<h:outputLabel for="dobirth" value="Date of Birth (mu)" />
                <p:calendar value="#{patient.dob}" id="popupCal">
<p:ajax event="dateSelect" listener="#{patient.handleDateSelect}" />
                </p:calendar> 
```

我正在尝试通过这种方式计算年龄。

```
public void handleDateSelect(DateSelectEvent event) throws ParseException {

        System.out.println("inside get age");
        FacesContext facesContext = FacesContext.getCurrentInstance();
        SimpleDateFormat format = new SimpleDateFormat("d/M/yyyy");
        facesContext.addMessage(null,
                new FacesMessage(FacesMessage.SEVERITY_INFO, "Date Selected",
                        format.format(event.getDate())));
        String dd=null;
        dd=format.format(event.getDate());
        System.out.println("date dd"+dd);
        Date date = new SimpleDateFormat("MMMM d, yyyy", Locale.ENGLISH).parse(dd);
        System.out.println("date+++++++++"+date);
        Calendar birth = new GregorianCalendar();
        Calendar today = new GregorianCalendar();
        int calculatedAge = 0;
        int factor = 0;

        Date currentDate = new Date(); // current date
        System.out.println("DOB" + dob);
        birth.setTime(date);
        System.out.println("set birth" + birth);
        today.setTime(currentDate);

        if (today.get(Calendar.DAY_OF_YEAR) < birth.get(Calendar.DAY_OF_YEAR)) {
            factor = -1;

        }
        calculatedAge = today.get(Calendar.YEAR) - birth.get(Calendar.YEAR)
                + factor;
        System.out.println("age is " + calculatedAge);
    } 
```

一旦用户使用日历选择他的出生，我还需要显示年龄。

一旦我到了年龄，如何在 jsf 2.0 中显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:37:31.123

像这样的东西（向`calculatedAge`属性添加吸气剂）。

```
<h:form>
    <h:outputLabel for="dobirth" value="Date of Birth (mu)" />
    <p:calendar value="#{patient.dob}" id="popupCal">
        <p:ajax event="dateSelect" listener="#{patient.handleDateSelect}"      
               update="age" />
        </p:calendar>
    <h:outputText id="age" value="#{patient.calculatedAge}"/>
</h:form> 
```

# c# - OAuthException: (#200) 用户尚未授权应用程序执行此操作

> ID：10563331
> 
> 赞同：2
> 
> 时间：2012-05-12T11:32:41.583
> 
> 标签：c#, oauth, facebook-c#-sdk

使用 Facebook C# SDK，我在尝试发布状态更新时收到以下错误：OAuthException: (#200) The user has not authorized the application to perform this action

我只对某些用户收到此错误。对于其他一些人，状态更新正常。应用程序已成功获得所有用户的访问权限。

这是完整的代码：

```
public partial class Authorize : Form
    {
        public Authorize()
        {
            InitializeComponent();

        }

        public string ApplicationId 
        { 
            get 
            { 
                return ConfigurationManager.AppSettings["ApplicationId"]; 
            } 
        }

        public string ExtendedPermissions 
        { 
            get
            {
                return ConfigurationManager.AppSettings["ExtendedPermissions"];
            } 
        }

        public string AppSecret
        {
            get
            {
                return ConfigurationManager.AppSettings["ApplicationSecret"];
            }
        }

        public string AccessToken { get; set; }

        private void LoadAuthorize(object sender, EventArgs e)
        {
            var destinationURL = String.Format(
                @"https://www.facebook.com/dialog/oauth?client_id={0}&scope={1}&redirect_uri=http://www.facebook.com/connect/login_success.html&response_type=token",
                this.ApplicationId,
                this.ExtendedPermissions);
            webBrowser.Navigated += WebBrowserNavigated;
            webBrowser.Navigate(destinationURL);
        }

        private void WebBrowserNavigated(object sender, WebBrowserNavigatedEventArgs e)
        {
            // get token
            var url = e.Url.Fragment;
            if (url.Contains("access_token") && url.Contains("#"))
            {
                this.Hide();
                url = (new Regex("#")).Replace(url, "?", 1);
                this.AccessToken = System.Web.HttpUtility.ParseQueryString(url).Get("access_token");
                //MessageBox.Show(facebookCore.AccessToken);
                try
                {
                    //var facebooking = new FacebookingTest(facebookCore.AccessToken);
                    //facebooking.UpdateStatus();
                    var fb = new FacebookClient(this.AccessToken);
                    dynamic result = fb.Post("me/feed", new { message = "Hi..Test33" });
                    var newPostId = result.id;
                }
                catch (Exception exception)
                {
                    Console.Write(exception);
                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:50:41.390

尝试打开文件 App.Config 并修改最后一行

```
<appsettings> 
```

部分如下：

```
<add key="ExtendedPermissions" value="offline_access,publish_stream,publish_actions" /> 
```

# c - if () 语句的不同参数

> ID：10563334
> 
> 赞同：0
> 
> 时间：2012-05-12T11:33:11.023
> 
> 标签：c, if-statement, conditional-statements, varying

我有一个问题，如下所述：我有一个数组（比如说）a[]={10,24,56,33,22,11,21} 我有这样的东西

```
for(i=0;i<100;i++){
    if(a[i]==10)
        // do something
} 
```

接下来当 i=1

```
if(a[i]==10 && a[i+1]==24) 
```

依此类推，因此在每次迭代中， if 中的参数/条件现在应该有所不同，这将是一个非常大的序列，我无法明确编写
`if(a[i]==10 && a[i+1]==24 && a[i+2]==56 ...... a[i+100]=2322)`

我怎样才能达到这种不同的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:38:38.853

在循环中有一个循环：

```
for (i = 0; i != 100; ++i)
{
    int condition = 1;
    for (j = 0; i + j != 100 && condition; ++j)
    {
        condition = condition && (a[i + j] == /* your number */ );
    }
    if (condition) { /* ... */ }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:39:46.980

我认为你应该引入一个布尔值。

```
bool valid = true;

for(i=0;i<100;i++){
    if(a[i]==10 && valid)
        // do something
    else
    {
        valid = false;
        break;
    }
} 
```

对于每次迭代，您需要更改要比较的值`a[i]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T12:32:41.547

您必须有一个累积的“布尔”变量，在第 i 次迭代时检查 a[i] 并更新该变量：

```
int a[] = {...};   /* array with some values to verify */
int v[] = {...};   /* these are the actual desired values in a[] */

/* the verifying loop */
int i;
int cond = 1;
for (i = 0; i < 100; i++)
{
    cond = cond && (a[i] == v[i]);
    if (cond)
    {
       /* do something */
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T11:41:07.837

在这种情况下，您可以使用函数指针或块。[你可以在这里](http://developer.apple.com/library/mac/#featuredarticles/BuildingWithBlocks/_index.html)找到一个很好的例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T12:07:44.860

看到你的例子，我认为你正在谈论的变化只是数组'a'的长度，你想在某个数组x中检查它的存在。如果确实如此，那么 memcmp 可能对您有用。

让我稍微修改一下您的示例以澄清我在说什么。

int a[7]={10,24,56,33,22,11,21} 是您要在某个数组“x”中检查的必需值，每次使用不同长度的“a”，使用“x”声明为

```
int x[1000]; 
```

在这种情况下，您可以使用 memcmp 如下：-

```
for ( len = 1 ; len <= 7 ; ++len )
{ for ( i = 0 ; i <= 1000-len ; ++i )
  { if ( ! memcmp( a, x+i, len * sizeof(int) ) )
    { // do something
    }
  }
} 
```

# jquery - 有没有更好的方法来获取所有父元素的名称？

> ID：10563336
> 
> 赞同：0
> 
> 时间：2012-05-12T11:33:43.680
> 
> 标签：jquery, parents

获取所有父元素的名称？

```
 $(document).on('click', function(e){
    var parents = $(e.target).parents().map(function(){ 
        var $this = $(this),
            $id = $this.prop('id') ? '#'+$this.attr('id') : '',
            $class = $this.prop('class') ? '.'+$this.attr('class') : ''; 
        return this.tagName.toLowerCase()+$id+$class;
        }).get().join(" < ");
    prompt('The path to the element, Luke:',parents);
 }); 
```

[举个](http://jsfiddle.net/shehovn/cdWXN/)例子。

**编辑：**很好！多谢你们！更新[了 FIDDLE](http://jsfiddle.net/shehovn/cdWXN/4/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:51:24.967

它工作正常，而且非常清晰和直接。您唯一可以改进的是在每个类之前添加一个点：

```
$class = $this.prop('class') 
             ? '.'+$.trim($this.attr('class')).replace(/\s+/g,'.') 
             : ''; 
```

这是一个现场演示：http: [//jsfiddle.net/cdWXN/1/](http://jsfiddle.net/cdWXN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:06:56.717

它运作良好，我已经进行了一些测试，但没有人可以改进您当前的方法。

除了 gion_13 提供的建议之外，我建议颠倒显示元素的顺序！

根据您的目标，通过使用[.reverse()](http://www.w3schools.com/jsref/jsref_reverse.asp) ，它可能具有更好的从 HTML 到单击元素的可读性：

```
$(document).on('click', function(e){
  var parents = $(e.target).parents().map(function(){

    var $this  = $(this),
        $id    = $this.prop('id') ? '#'+$this.attr('id') : '',
        $class = $this.prop('class') 
                   ? '.'+$.trim($this.attr('class')).replace(/\s+/g,'.') 
                   : '';

    return this.tagName.toLowerCase()+$id+$class;

  }).get().reverse().join(" > ");

  prompt('The path to the element, Luke:',parents);
}); 
```

小提琴的例子[在这里！](http://jsfiddle.net/zuul/cdWXN/2/)

# php - 将 Dojo Datagrid 添加到 ZF Dojo_Form，我该怎么做？

> ID：10563338
> 
> 赞同：0
> 
> 时间：2012-05-12T11:34:03.010
> 
> 标签：php, datagrid, dojo, zend-form

我有这个带有几个子表单的表单，我正在使用 tabContainer，
在其中一个表单中，单击时我有一个按钮，希望在那个“空间”子表单中出现一个带有一些值的数据网格。

有可能做到这一点，怎么做？

我尝试创建一个 datagrid View Helper，但这不能正常工作，DataGrid 没有显示。

使用的代码：

> /** * DataGrid 的描述 * * @author andref * @version $Id$ */ class Zend_View_Helper_DataGrid { private $_nameDG = 'DefaultSt';
> 
> ```
> private $_action     = '';
> 
> private $_key        = '';
> 
> private $_selectMode = "single";
> 
> private $_fields     = array();
> 
> private $_storage   = 'getall/';
> 
> public function dataGrid($key, $action = null, $options = array() )
> {
> 
>     if (count($options) > 0 ) {
>         if (array_key_exists("selectmode", $options)) {
>             $this->_selectMode = $options['selectmode'];
>         } elseif (array_key_exists("fields", $options)) {
>             if (!is_array($options['fields'])) {
>                 throw new Exception("fields is not an array");
>             }
>             $this->_fields = $options['fields'];
>         } elseif(array_key_exists("selectmode", $options)) {
>             $this->_selectMode = $options['selectmode'];
>         } elseif(array_key_exists("storage", $options)) {
>                 $this->_storage = $options['storage'];
>         }
>     }
> 
>     if ($action !== null ) {
>         $this->_action = $action;
>     }
> 
>     if ($key === null ) {
>         throw new Exception("Key cannot be null.");
>     }
> 
>     $this->_key = $key;
> 
>     return $this->_init();
> }
> 
> private function _init()
> {
>     $str = '';
>     if (!empty($this->_action)) {
>         $str .= $this->addJS();
>     }
> 
>     $str .= $this->storageType();
> 
>     $str .= $this->draw();
> 
>     return $str;
> }
> /**
>  * Returns double click handler to direct to a form
>  * 
>  * @return String
>  */
> public function addJS()
> {
>     $str = "<script type=\"text/Javascript\">\n";
>     $str .= "function pickit(event)\n";
>     $str .= "{\n";
>     $str .= "grid = dijit.byId('grid".$this->_key."');\n";
>   $str .= "selected_index = grid.focus.rowIndex;\n";
>   $str .= "selected_item = grid.getItem(selected_index);\n";
>   //Not sure if this is the most efficient way but it worked for me
>   $str .= "selected_id = grid.store.getValue(selected_item, \"".$this->_key."\");\n";
>   $str .= "location.href = " . $this->_action . "+selected_id;\n";
>     $str .= "}\n";
>     $str .= "</script>\n";
> 
>     return $str;
> }
> 
> public function storageType()
> {
>     if (strpos($this->_storage, "[") !== false ) {
>         $st = "jsonData".$this->_key . " = " . $this->_storage."\n";
>         $st .= "<gett dojoType=\"dojo.data.ItemFileReadStore\" 
>             jsId=\"jsonStore" . $this->_key . "\" 
>                 data=\"jsonData" . $this->_key . "\" id=\"store" . $this->_key . "\" />";
>     } else {
>         $st = '<gett dojoType="dojo.data.ItemFileReadStore" jsId=\"jsonStore'.$this->_key.'" 
>      url="' . $this->_storage . '" id="store'.$this->_key.'" />';
>     }
> 
>     return $st;
> }
> 
> public function draw()
> {
>     $str = '';
>     $str .= "<table dojoType=\"dojox.grid.DataGrid\" id=\"grid".$this->_key."\" jsid=\"gridJ".$this->_key."\" 
>    query=\"{ " . $this->_key . ": '*' }\" store=\"jsonStore".$this->_key."\"
>    selectionMode=\"" . $this->_selectMode . "\" autoWidth=\"true\"
>    style=\"width: 100%; height: 400px\" onRowDblClick='pickit();'>\n";
>     $str .= "<thead>\n";
>     $str .= "<tr>\n";
>     foreach ($this->_fields as $k => $v ) {
>         $str .= "\t<th field=\"$k\">$v</th>\n";
>     }
>     $str .= "</tr>\n";;
>     $str .= "</thead>\n";
>     $str .= "</table>\n";
> 
>     return $str;
> }
>      } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:57:57.553

尝试在纯 js 中创建一个网格，并在您的元素中使用 grid.placeat("idOfElement") 放置它。看看这里：

[http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html)

# r - 使用 R 中的 psych 包对“timeSeries”结构数据进行描述性统计

> ID：10563339
> 
> 赞同：2
> 
> 时间：2012-05-12T11:34:10.343
> 
> 标签：r, statistics, psych

抱歉这个愚蠢的问题，我是 R 的新手。我有一些这样的格式并保存在 CSV 中：

```
%Y-%m-%d,st1,st2,st3,st4,st5,st6,st7,st8,st9,st10
2005-09-20,38.75,48.625,48.5,23.667,45.5,48.75,18.75,33.25,43.455,76.042
2005-09-21,39.482,49.3,49,23.9,46.15,50.281,18.975,34.125,44.465,78.232
... 
```

我在 R 中导入它

```
library(fPortfolio)

Data <- readSeries(file = "data.csv", header = TRUE, sep = ",") 
```

我想要一些描述性统计数据

```
library(psych)
describe(Data)

Error in x[!is.na(x[, i]), i] : 
  invalid or not-yet-implemented 'timeSeries' subsetting 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:20:43.303

你可能想先把它变成一个时间序列，对吧？

```
tS <- dummySeries() #make quick dummy time series
describe(tS)  # fails 
```

但

```
newtS<-as.ts(tS)
describe(newtS)  #works fine giving:

        var  n mean   sd median trimmed  mad  min  max range skew kurtosis   se
Series 1   1 12 0.49 0.25   0.44    0.48 0.29 0.13 0.89  0.76 0.24    -1.52 0.07
Series 2   2 12 0.45 0.28   0.44    0.45 0.42 0.07 0.83  0.77 0.03    -1.74 0.08 
```

# javascript - 如何立即启动 setInterval 循环？

> ID：10563344
> 
> 赞同：81
> 
> 时间：2012-05-12T11:34:49.860
> 
> 标签：javascript, jquery, setinterval

在一个简单的`setInterval`

```
setInterval(function() {
      // Do something every 9 seconds
}, 9000); 
```

第一个动作将在 9 秒 ( `t=9s`) 后发生。如何强制循环立即执行第一个动作（`t=0`）？

我认为这是由于`setInterval`有`Delay - Action - Delay - Action ...`循环的机制；而不是`Action - Delay - Action - Delay ...`循环。

**编辑：**我的功能确实是一个循环

```
setInterval(function(){
$('.test').each(function(idx){
    var duration = 1000;
    $(this).delay(duration*idx);
    Some stuff here
});
}, 4000); 
```

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-05-12T11:37:03.500

把事情简单化。您可以使用命名函数而不是匿名函数；调用它并为其设置间隔。

```
function doSomething() {
    console.log("tick");
}
doSomething();
setInterval(doSomething, 9000); 
```

如有必要，创建一个范围：

```
(function() {
    function doSomething() {
        console.log("tick");
    }
    doSomething();
    setInterval(doSomething, 9000);
})(); 
```

最后，以下作品不会创建或影响`x`：

```
setInterval(function x() {
    console.log("tick");
    return x;
}(), 9000); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-12T11:38:21.797

有时我使用这种模式...

```
(function me() {
    // Do something every 9 seconds

    setTimeout(me, 9000);
})(); 
```

它并不完全相同，因为它会等到*执行某些*操作后再等待约 9 秒才能再次调用它。但是，这通常很有用，因此事件队列上的事件不会不必要地堆积（但不太可能某些代码需要 9 秒才能运行 :)

请注意，在较旧的 IE 中，`me`将泄漏到外部范围。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-12-20T14:38:35.357

setInterval() 是一个非常丑陋的函数。我使用这个经过净化的版本，它会立即调用该函数，并且在函数参数之前需要以秒为单位的时间，因此使用内联函数定义调用它实际上看起来很明智。

```
function startInterval(seconds, callback) {
  callback();
  return setInterval(callback, seconds * 1000);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-12T11:38:49.110

使用命名函数并调用它并将其分配给区间。

```
var myFnc = function() {
    // Do something every 9 seconds
};
setInterval(myFnc, 9000);
myFnc(); 
```

另一种选择是改用 setTimeout。

```
var myFnc = function() {
    // Do something every 9 seconds
    setTimeout(myFnc, 9000);
};
myFnc(); 
```

# javascript - 动态创建多个组

> ID：10563347
> 
> 赞同：0
> 
> 时间：2012-05-12T11:35:09.447
> 
> 标签：javascript, html, jquery

在表单上，​​客户可以创建多个组。每个组都有相同的输入字段。如果客户单击“+ Additional Group”，则将通过 jQuery 动态创建一个附加组（通过 AJAX 调用下载 html）。

以下是示例 html。每个`ul`标签都是一个组。在组`ul`中，每个输入字段都包括一个组号字段。像这样：`foo_1`,`foo_2`

`current_group`是一个隐藏字段，用于跟踪组的总数。

如果`add_group`单击按钮，jQuery 将动态获取组的总数`current_group`，然后动态获取附加组。

这是应该怎么做的吗？

此外，如果客户在完成表单后单击提交按钮 - 由于通过 PHP 进行的错误验证，它可能会返回到同一页面。我不想再松开动态 html 组。如何解决？

```
<h2> Group One </h2>
<ul class="Form">
    <li>
        <label>Foo</label>
        <select name='foo_1'>
                <option value='1'>One</option>
                <option value='2'>Two</option>
                <option value='3'>Three</option>
        </select>
    </li>
   <li>
        <label>Bar</label>
        <select name='bar_1'>
                <option value='car'>Car</option>
                <option value='bike'>Bike</option>
                <option value='van'>Van</option>
        </select>
    </li>
<ul>

<h2> Group Two </h2>
<ul class="Form">
    <li>
        <label>Foo</label>
        <select name='foo_2'>
                <option value='1'>One</option>
                <option value='2'>Two</option>
                <option value='3'>Three</option>
        </select>
    </li>
   <li>
        <label>Bar</label>
        <select name='bar_2'>
                <option value='car'>Car</option>
                <option value='bike'>Bike</option>
                <option value='van'>Van</option>
        </select>
    </li>
<ul>

<input type='hidden' id='current_group' value='2' />
<input type='button' id='add_group' value='+ Additional Group' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:56:16.040

有几种方法可以做一件事。这是你的逻辑。如果没有出错，它应该可以工作。

每当您获取显示新组时，请保留一个名为“您”的隐藏字段`group_ids[]` ，您将收到数组中的所有组 ID。您可以从 $_REQUEST['group_ids'] 访问该数组（您可以根据您的代码使用 $_POST 或 $_GET ）

现在，每当您提交页面时，请检查用户提交的组 ID。您也可以接收下拉值。如果您需要再次显示这些组，您可以使用从数据库中获取它，`$_REQUEST['group_ids']`并通过比较当前值与用户选择的值来保持选择正确的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:57:03.360

好吧，如果第一组 HTML 元素已经存在，您总是可以使用 jQuery[`clone()`](http://api.jquery.com/clone/)来复制元素，而不是调用服务器。您需要找到元素并替换您所说的名称。

```
jQuery(".Form").clone().find("select").eq(0).prop("name", "foo_" + count).end().eq(1).prop("name", "bar_" + count).end().end().appendTo("#someElem"); 
```

以更易读的格式

```
var count = 1;
function addRow(){
    count++;
    var newFormElems = jQuery(".Form").clone();  //clone the form
    var selects = newFormElems.find("select");  //find the selects
    selects.eq(0).prop("name", "foo_" + count);  //rename first
    selects.eq(1).prop("name", "bar_" + count);  //rename second
    newFormElems.appendTo("#someElem");   //add to the page
} 
```

重做命名函数的另一种方法是增加数字：

```
newFormElems.find("select").each( 
    function(){        
        this.name = this.name.replace(/^([^_]+_)(\d+)/, function(match,str,num){ return str + (parseInt(num,10)+1)});
    }
); 
```

处理动态表单的最佳方法是什么？好吧，您可以使用 Ajax 提交数据，或者在验证后让 php 代码写出表单。

# session - cakephp session.cooke_lifetime 不起作用

> ID：10563348
> 
> 赞同：0
> 
> 时间：2012-05-12T11:35:12.323
> 
> 标签：session, cakephp, cakephp-2.0

我在 core.php 中使用这个配置：

```
Configure::write('Session', array(
        'defaults' => 'php'
    ));

Configure::write('Session.save', 'custom_session_handler');

/**
 * The level of CakePHP security.
 */
Configure::write('Security.level', 'high'); 
```

和 custom_session_handler.php（在 app/config 中）

```
<?php

    ini_set('session.cookie_lifetime', 0); 

?> 
```

当我关闭浏览器会话应该被破坏/不记得 - 但它不起作用，当我关闭浏览器时我仍然登录......

我在我的 PC 上的 WAMP 服务器上使用 Auth 组件、cakePHP 2.0、php 5.3.9。而且在我的 php.ini 中 Session.cookie_lifetime 默认设置为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:58:42.940

我找到了 - 它应该是：

```
Configure::write('Session', array(
        'defaults' => 'php',
        'cookieTimeout' => 0,
    )); 
```

# sphinx - 在更新 sphinx 索引时，负载平均增加

> ID：10563349
> 
> 赞同：1
> 
> 时间：2012-05-12T11:35:16.053
> 
> 标签：sphinx, indexing, delta-index

我们已经在我们的站点中安装和配置 sphinx 搜索已有一段时间了。它运行得很好。但最近我们注意到，在 sphinx 服务器中通过 ssh 更新主索引和增量索引时，服务器的平均负载急剧增加。当索引器脚本正在运行时，它会上升到 11。我们正在运行的代码是这样的：

1)ssh -p 90 root@host "/usr/bin/indexer --rotate IdxDelta_domainname"

2)ssh -p 90 root@host "/usr/bin/indexer --rotate IdxDeltaOutlineSearchIndex_domainname"

3)ssh -p 90 root@host "/usr/bin/indexer --rotate IdxDeltaStatus_grmtech"

4) ssh -p 90 root@host "/usr/bin/indexer --rotate --merge IdxMainSearchIndex_domainname IdxDelta_domainname --merge-klists --sighup-each "

5)ssh -p 90 root@host "/usr/bin/indexer --rotate --merge IdxMainOutlineSearchIndex_grmtech IdxDeltaOutlineSearchIndex_domainname --merge-klists --sighup-each "

6)ssh -p 90 root@host "/usr/bin/indexer --rotate --merge IdxMainStatus_grmtech IdxDeltaStatus_grmtech --merge-klists --sighup-each "

这是通过爬虫脚本从原始站点的域运行的

Sphinx 索引表有 22 个字段和 689,325 行的数据。

服务器是强大的（具有 16 核处理器和 6GB 内存）

当索引器进程运行所有 16 个内核时，显示 100% 的 CPU 使用率（通过 top 命令）并且平均负载猛增（从第 4 步开始）

有什么出路吗？请帮忙

# html - 链接到网站的索引页面

> ID：10563352
> 
> 赞同：29
> 
> 时间：2012-05-12T11:35:50.013
> 
> 标签：html, hyperlink, anchor, href

有没有办法在不指定索引页面名称或完整网站 URL 的情况下链接到网站的索引页面？

我有这个：

```
<a href="index.htm">Home</a> 
```

但是当我点击链接时，我的地址栏显示：

```
mydomain.com/index.html 
```

我希望它显示：

```
mydomain.com 
```

我可以在不将完整 URL ( `mydomain.com`)放入的情况下执行此操作`href`吗？如果是这样，怎么做？

对于未来的观众，我也发现[这个问题](https://stackoverflow.com/q/296873/785745)很有帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-12T11:37:42.040

你可以这样做：

```
<a href="/">Home</a> 
```

任何`href`前面有斜线的都是相对的根目录。

需要注意的是，在浏览器中从本地硬盘查看网页时，会导致链接失效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-12-06T15:01:16.670

我知道这篇文章很旧并且有答案。但这是我的贡献，它也支持不完全在根目录中的索引

要去

```
mydomain.com/index.html 
```

without index.html showing in address bar

```
<a href="/">Home</a> 
```

this will always point to mydomain.com no matter where the directory your file was saved to.

to point to the index in a directory use this:

```
<a href="./">Home</a> 
```

this will point to mydomain.com/subdir for mydomain.com/subdir/index.html while the accepted answer will always point to mydomain.com (and this is not always the desired action)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-03T04:06:32.747

Create a ".htaccess" file and upload to your host public folder

```
<IfModule mod_rewrite.c> 
RewriteEngine On

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^index\.html$ http://www.yourwebsite.com.ph/ [R=301,L]
RewriteCond %{THE_REQUEST} \.html 
RewriteRule ^(.*)\.html$ /$1 [R=301,L]
</IfModule> 
```

# django-forms - Django 表单禁止 (403) 错误

> ID：10563353
> 
> 赞同：0
> 
> 时间：2012-05-12T11:35:56.793
> 
> 标签：django-forms

单击虚拟表单的提交按钮时出现以下错误

> 禁止 (403)
> 
> CSRF 验证失败。请求中止

我的views.py（已经完成了上面所需的导入）如下所示：

```
def search(request):
       errors=[]
       if request.method=="POST":
             if not request.POST['name']:
                       errors.append('Name field is empty')
             if not request.POST['subject']:
                       errors.append('Subject field is empty')
             if not request.POST['age']:
                       errors.append('Age field is empty')
             if not errors:
                       thank()
       return render_to_response('search.html',{'errors':errors},context_instance=RequestContext(request))

def thank(search):
      return HttpResponse('<html><p>Post done successfully</p></html>') 
```

我的 search.html 是：

```
 <form method="post" action='/search/'>
     <p>Name: <input type="text" name="name"/></p>
     <p>Subject  <input type="text" name="subject"/></p>
     <p>Age: <input type="text" name="age"/></p>
     <input type="submit" value="Hit Me!!"/>
    </form>
  </body>
 </html> 
```

有人请让我知道，我该如何克服这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:12:34.817

我要说的是，我`{% csrf_token %}`在您的`<form></form>`标签之间看不到a。这将导致 CSRF 验证失败。上面的海报打败了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:52:58.003

出色地，

1\. 将 'django.core.context_processors.csrf' 添加到 settings.py 中的 TEMPLATE_CONTEXT_PROCESSORS 设置。2.像这样修改你的表格，

```
<form method="post" action='/search/'>
  {% csrf_token %}
  <p>Name: <input type="text" name="name"/></p>
  <p>Subject  <input type="text" name="subject"/></p>
  <p>Age: <input type="text" name="age"/></p>
  <input type="submit" value="Hit Me!!"/>
</form> 
```

# user-interface - 如何将位图作为背景添加到黑莓屏幕

> ID：10563361
> 
> 赞同：-2
> 
> 时间：2012-05-12T11:37:11.120
> 
> 标签：user-interface, blackberry, java-me, blackberry-jde

我想将白色背景屏幕添加到我的黑莓屏幕（即主屏幕）之后，我可以在屏幕上绘制一些东西。如何创建背景以及如何在该屏幕上绘图。请建议我。请把示例代码发给我……我已经写了这段代码，但它不起作用……

```
Background bg = 
BackgroundFactory.createBitmapBackground(
    Bitmap.getBitmapResource("/Background.png"));
setBackground(bg);
VerticalFieldManager verticalFieldManager = new VerticalFieldManager();

 add(verticalFieldManager); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:07:19.483

尝试这个..

```
final Bitmap backgroundBitmap = Bitmap.getBitmapResource("blackbg.png");

VerticalFieldManager mainManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR )
{ 
public void paint(Graphics graphics)
{
graphics.clear();
graphics.drawBitmap(0, 0, deviceWidth, deviceHeight, backgroundBitmap, 0, 0); 
super.paint(graphics);
} 
}; 
```

# java - 在 Glassfish 3.1.2 上部署包含应用程序客户端的 ear 会引发异常

> ID：10563363
> 
> 赞同：4
> 
> 时间：2012-05-12T11:37:26.520
> 
> 标签：java, glassfish, glassfish-3, ear, application-client

我问这个问题只是为了让我自己回答，因为它让我发疯了两天，没有其他人应该像我一样受苦。

部署我的耳朵时，我得到这样的例外：

```
 Exception while invoking class org.glassfish.appclient.server.core.AppClientServerApplication start method
org.jvnet.hk2.component.ComponentException: injection failed on org.glassfish.appclient.server.core.jws.JavaWebStartInfo.dch with class org.glassfish.appclient.server.core.jws.DeveloperContentHandler
    at org.jvnet.hk2.component.InjectionManager.error_injectionException(InjectionManager.java:284)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:161)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:93)
.
.
Caused by: org.jvnet.hk2.component.ComponentException: Failed to create class org.glassfish.appclient.server.core.jws.DeveloperContentHandler
.
.
Caused by: java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
.
. 
```

或者有时像这样：

```
 Exception while loading the app : injection failed on org.glassfish.appclient.server.core.jws.JavaWebStartInfo.dch with class org.glassfish.appclient.server.core.jws.DeveloperContentHandler
org.jvnet.hk2.component.ComponentException: Failed to create class org.glassfish.appclient.server.core.jws.DeveloperContentHandler
    at com.sun.hk2.component.ConstructorCreator.create(ConstructorCreator.java:71)
    at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:80)
.
.
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.glassfish.appclient.server.core.jws.DeveloperContentHandler 
```

这个错误完全令人费解，因为在一台机器上运行良好的 ear 文件可能无法在另一台机器上部署，并且服务器可能看起来被该问题“感染”并拒绝部署以前运行良好的 ear。清除缓存和生成的文件不会让它消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:08:24.977

经过数小时的摆弄后，我想我有了答案-问题是由于ear lib文件夹中包含一个xerxes-impl jar文件引起的。我怀疑通过一些类加载怪异它正在替换服务器自己的 xml 解析器。这解释了奇怪的感染问题，因为类路径问题在服务器重新启动之前不会消失。任何 xml 解析器都可能会出现问题，但我没有检查过。

要解决此问题，请关闭 glassfish，确保您正在部署的 ear 中没有 xerces，然后重新启动 glassfish 并部署新的 clean ear 文件。它应该工作。它对我有用。如果做不到这一点，我认为你唯一的办法就是献血。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:22:38.740

JDK 定义了**javax.xml.parsers.DocumentBuilderFactory**接口并提供了默认实现。服务提供者可以通过设置系统属性“javax.xml.parsers.DocumentBuilderFactory”来替换实现类。当您部署 xerces 时，它使用此属性来提供它自己的实现。

**来自javax.xml.parsers.DocumentBuilderFactory**的片段：

```
 public static DocumentBuilderFactory newInstance() {
    try {
        return (DocumentBuilderFactory) FactoryFinder.find(
            /* The default property name according to the JAXP spec */
            "javax.xml.parsers.DocumentBuilderFactory",
            /* The fallback implementation class name */
            "com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl");
    } catch (FactoryFinder.ConfigurationError e) {
        throw new FactoryConfigurationError(e.getException(),
                                            e.getMessage());
    }

} 
```

所有这些也适用于**javax.xml.parsers.SAXParserFactory**。

> 选择解析器实现
> 
> 如果未指定其他工厂类，则使用默认 SAXParserFactory 类。要使用来自不同制造商的解析器，您可以更改指向它的环境 > 变量的值。您可以从命令行执行此操作：
> 
> java -Djavax.xml.parsers.SAXParserFactory=yourFactoryHere [...]
> 
> 您指定的工厂名称必须是完全限定的类名（所有包前缀>包含）。有关更多信息，请参阅 >SAXParserFactory 类的 newInstance() 方法中的文档。

[http://docs.oracle.com/javase/tutorial/jaxp/sax/validation.html](http://docs.oracle.com/javase/tutorial/jaxp/sax/validation.html)

# django - virtualenvironment - 在 vi rtualenv 中安装了 django，但能够从 env 外部访问它，但它不应该发生

> ID：10563364
> 
> 赞同：1
> 
> 时间：2012-05-12T11:37:29.457
> 
> 标签：django, virtualenv

我使用安装了 django

```
 "sudo pip install django" 
```

进入虚拟环境后。所以退出虚拟环境后，我应该无法访问 django ，对吗？但我仍然可以从环境外部访问 django。是什么原因 ？我正在使用 ubuntu 吗？我所知道的是，我们在里面安装的任何东西都只会被本地化到那个特定的虚拟环境，一旦我们删除那个特定的文件夹，它们就会被删除。当然我没有删除那个文件夹，但我认为它应该可以在环境之外访问，但是访问那，什么是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:46:32.563

virtualenv 依赖于在环境中设置各种东西。使用 sudo 会改变环境，这可能是 Django 单独安装的方式。您或其他用户也可能已经在您系统的其他地方安装了 Django。

无论如何，在 virtualenv 中进行 pip install 时不要使用 sudo，这是不必要的，并且可能会由于路径而导致意外的事情发生。

# asp.net-mvc-3 - 使用 Castle Windsors LifestylePerWebRequest 的 NHibernate 会话

> ID：10563367
> 
> 赞同：0
> 
> 时间：2012-05-12T11:37:33.000
> 
> 标签：asp.net-mvc-3, nhibernate, fluent-nhibernate, castle-windsor

使用 Castle Windsor 作为我的 IoC 容器和 NHibernate 我有以下注册：

```
Component.For<ICustomSessionFactory>()
  .ImplementedBy<MsSql2008SessionFactory>().LifeStyle.Singleton,

Component.For<ISession>()
 .UsingFactoryMethod(kernel => kernel.Resolve<ICustomSessionFactory>()
     .OpenSession()).LifeStyle.PerWebRequest, 
```

`ISession`一个在哪里`NHibernate.ISession`。

这很好用。我的问题是关于我的`ISession`.

Castle Windsor 会处理我的会话的结束，还是我需要自己关闭它？

我在[文档](http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Seven-Lifestyles.ashx)中看到：

> 因此，Windsor 知道何时释放每个 Web 请求对象，并且无需您执行任何操作即可执行此操作。

这是否意味着会话的关闭是默认处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:58:51.443

是的，温莎将为您关闭会话。

您还可以记录所有容器信息：

```
 void ConfigureContainer()
        {
            _container = new WindsorContainer();

            _container.Install(new LoggerInstaller());
            _logger = _container.Resolve<ILogger>();

#if DEBUG
            _container.Kernel.ComponentRegistered += (k, h) => _logger.Debug(String.Format("Registered {0} - {1}/{2}", k, h.ComponentModel.ComponentName.Name, h.ComponentModel.Implementation.FullName));
            _container.Kernel.ComponentDestroyed += (k, h) => _logger.Debug(String.Format("Destoyed {0} - ", k.ComponentName.Name));
#endif
            _container.Install(new ContainerInstaller());
            _container.Install(new NHibernateInstaller());
            _container.Install(new ValidationInstaller());
        } 
```

# c# - 为什么我在服务器上没有访问权限？

> ID：10563370
> 
> 赞同：16
> 
> 时间：2012-05-12T11:38:09.747
> 
> 标签：c#, asp.net-mvc, elmah

我在本地使用[Elmah](http://code.google.com/p/elmah/) - 好吧。

但是，在服务器上，它会发出以下错误，我无法弄清楚如何获得访问权限。

> 403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-12T12:49:01.493

也许您应该[启用远程访问](http://code.google.com/p/elmah/wiki/SecuringErrorLogPages)

```
<elmah>  
    <security allowRemoteAccess="1" />  
</elmah> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T17:34:02.083

除了archil的回答，别忘了如果你需要认证，允许的用户和角色是区分大小写的：

```
<appSettings>
    ...
    <add key="elmah.mvc.disableHandler" value="false"/>
    <add key="elmah.mvc.disableHandleErrorFilter" value="false"/>
    <add key="elmah.mvc.requiresAuthentication" value="true"/>
    <add key="elmah.mvc.IgnoreDefaultRoute" value="false"/>
    <!-- The roles and usernames for elmah are case sensitive! -->
    <add key="elmah.mvc.allowedRoles" value="Administrator"/>
    <add key="elmah.mvc.allowedUsers" value="user1,user2,user3"/>
    <add key="elmah.mvc.route" value="elmah"/>
    ...
</appSettings> 
```

# eclipse - Eclipse 中的 Maven 插件版本

> ID：10563377
> 
> 赞同：7
> 
> 时间：2012-05-12T11:39:01.687
> 
> 标签：eclipse, maven, m2eclipse, versions-maven-plugin

如何将 Versions-Maven-Plugin 添加到我的 Eclipse 项目中？

我尝试了`Add Plugins`菜单选项，但似乎无法找到插件。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-04-01T18:04:23.137

在 Eclipse 中检查 maven 插件版本：

*   点击 Window –> Preferences –> Maven –> Installation 。它将显示带有 Maven 版本的安装窗口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T18:21:54.320

您必须将[版本 maven 插件](http://mojo.codehaus.org/versions-maven-plugin/usage.html)添加到 pom 的报告部分中，以创建有关依赖项更新的适当报告。

```
<reporting>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>versions-maven-plugin</artifactId>
      <version>1.3.1</version>
      <reportSets>
        <reportSet>
          <reports>
            <report>dependency-updates-report</report>
            <report>plugin-updates-report</report>
            <report>property-updates-report</report>
          </reports>
        </reportSet>
      </reportSets>
    </plugin>
  </plugins>
</reporting> 
```

您不能在 Eclipse 中安装 versions-maven-plugin，因为 version-maven-plugin 是 Maven 插件而不是 Eclipse 插件。但不是一个坏主意。

# ember.js - 如何使用 ember 数据刷新实体

> ID：10563384
> 
> 赞同：4
> 
> 时间：2012-05-12T11:40:15.530
> 
> 标签：ember.js, ember-data

在我的应用程序中，我收到了有关对象的 websockects 信息已更改，并且 ember 数据应重新加载它们。

如何强制 emberdata 更新已加载的记录？如何强制 emberdata 从服务器获知某些记录已被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:35:37.683

我能找到实现这样的事情的唯一方法是`App.store.loadMany(data)`使用 json 手动触发（如果有的话），或者执行 a `App.store.findQuery(App.Model, {})`，这将使您的缓存无效。

几天前我在ember上开了一个issue来问这个问题：

[https://github.com/emberjs/data/issues/245](https://github.com/emberjs/data/issues/245)

似乎他们正在处理这种情况 - ember/data 还很年轻！

# grails - MissingMethodException：在 Grails 运行应用程序期间 org.apache.catalina.core.StandardContext.setAliases()

> ID：10563385
> 
> 赞同：1
> 
> 时间：2012-05-12T11:40:16.580
> 
> 标签：grails

运行 grails 应用程序时出现以下错误。通过查看错误跟踪，是否有人能够识别出这个错误可能是什么原因？

在我看来，grails 出于某种原因无法启动 tomcat 嵌入式服务器。我在 linux 系统中使用 grails 1.3.4 (openSuse 12.1)

- 更新 -

我使用 openJDK 版本 6：

```
 java version "1.6.0_24"

 OpenJDK Runtime Environment (IcedTea6 1.11.1) (suse-3.1-i386)

 OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

--错误跟踪---

```
(stuff leftout)

Error executing script RunApp: groovy.lang.MissingMethodException: No signature of method: org.apache.catalina.core.StandardContext.setAliases() is applicable for argument types: (java.lang.String) values: [/plugins/log4j-xml-0.2=/home/othman/.grails/1.3.4/projects/jbilling/plugins/log4j-xml-0.2/./web-app,/plugins/jquery-ui-1.8.7=/home/othman/.grails/1.3.4/projects/jbilling/plugins/jquery-ui-1.8.7/./web-app,/plugins/remote-pagination-0.2.4=/home/othman/.grails/1.3.4/projects/jbilling/plugins/remote-pagination-0.2.4/./web-app,/plugins/remoting-1.1=/home/othman/.grails/1.3.4/projects/jbilling/plugins/remoting-1.1/./web-app,/plugins/jquery-1.4.4.1=/home/othman/.grails/1.3.4/projects/jbilling/plugins/jquery-1.4.4.1/./web-app,/plugins/include-0.3=/home/othman/.grails/1.3.4/projects/jbilling/plugins/include-0.3/./web-app]
Possible solutions: getClass(), setName(java.lang.String), setDocBase(java.lang.String), setName(java.lang.String)
11:16:42,037 ERROR [StackTrace] Sanitizing stacktrace:
groovy.lang.MissingMethodException: No signature of method: org.apache.catalina.core.StandardContext.setAliases() is applicable for argument types: (java.lang.String) values: [/plugins/log4j-xml-0.2=/home/othman/.grails/1.3.4/projects/jbilling/plugins/log4j-xml-0.2/./web-app,/plugins/jquery-ui-1.8.7=/home/othman/.grails/1.3.4/projects/jbilling/plugins/jquery-ui-1.8.7/./web-app,/plugins/remote-pagination-0.2.4=/home/othman/.grails/1.3.4/projects/jbilling/plugins/remote-pagination-0.2.4/./web-app,/plugins/remoting-1.1=/home/othman/.grails/1.3.4/projects/jbilling/plugins/remoting-1.1/./web-app,/plugins/jquery-1.4.4.1=/home/othman/.grails/1.3.4/projects/jbilling/plugins/jquery-1.4.4.1/./web-app,/plugins/include-0.3=/home/othman/.grails/1.3.4/projects/jbilling/plugins/include-0.3/./web-app]
Possible solutions: getClass(), setName(java.lang.String), setDocBase(java.lang.String), setName(java.lang.String)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:54)
    at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
    at org.grails.tomcat.TomcatServer.<init>(TomcatServer.groovy:73)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:77)
    at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:107)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:192)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:212)
    at org.grails.tomcat.TomcatServerFactory.createInline(TomcatServerFactory.groovy:10)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrap.invoke(PogoMetaMethodSite.java:246)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:63)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:137)
    at _GrailsRun_groovy.runInline(_GrailsRun_groovy:115)
    at _GrailsRun_groovy.this$4$runInline(_GrailsRun_groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1003)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:163)
    at _GrailsRun_groovy$_run_closure1.doCall(_GrailsRun_groovy:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:289)
    at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:54)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
    at sun.reflect.GeneratedMethodAccessor135.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
    at sun.reflect.GeneratedMethodAccessor134.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:271)
    at groovy.lang.Closure$call.call(Unknown Source)
    at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
    at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
    at sun.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1003)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:706)
    at groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1123)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1017)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:159)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
    at sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
    at sun.reflect.GeneratedMethodAccessor126.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:271)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokePropertyOrMissing(MetaClassImpl.java:1104)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1060)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:706)
    at groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
    at groovy.lang.Script.invokeMethod(Script.java:78)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1123)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1017)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:147)
    at RunApp$_run_closure1.doCall(RunApp.groovy:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:289)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:127)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:54)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:271)
    at groovy.lang.Closure$call.call(Unknown Source)
    at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
    at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1003)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:706)
    at groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1123)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1017)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:159)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:271)
    at groovy.lang.Closure$call.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
    at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:289)
    at groovy.lang.Closure$call$0.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:276)
    at groovy.lang.Closure.call(Closure.java:271)
    at groovy.lang.Closure$call.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
    at gant.Gant.withBuildListeners(Gant.groovy:427)
    at gant.Gant.this$2$withBuildListeners(Gant.groovy)
    at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at gant.Gant.dispatch(Gant.groovy:415)
    at gant.Gant.this$2$dispatch(Gant.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:88)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:708)
    at gant.Gant.invokeMethod(Gant.groovy)
    at groovy.lang.GroovyObject$invokeMethod.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:155)
    at gant.Gant.executeTargets(Gant.groovy:590)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:225)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:155)
    at gant.Gant.executeTargets(Gant.groovy:589)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeWithGantInstance(GrailsScriptRunner.java:656)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.callPluginOrGrailsScript(GrailsScriptRunner.java:522)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.executeCommand(GrailsScriptRunner.java:318)
    at org.codehaus.groovy.grails.cli.GrailsScriptRunner.main(GrailsScriptRunner.java:135)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.rootLoader(GrailsStarter.java:234)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.main(GrailsStarter.java:262)

[other stuff ..] 
```

# netbeans - 谁能告诉我为什么我的 netbeans 6.8 中的数据库选项似乎是空的？

> ID：10563388
> 
> 赞同：2
> 
> 时间：2012-05-12T11:40:59.363
> 
> 标签：netbeans, netbeans-7, netbeans6.8

谁能告诉我为什么我的 netbeans 6.8 中服务下的数据库选项似乎是空的，没有选项。在安装 netbeans 6.8 之前，我还在我的操作系统中安装了 netbeans 7.1。在 netbeans 7.1 中我有所有数据库选项，但为什么在 netbeans 6.8 下我没有得到它？

[http://i.stack.imgur.com/PCHiL.png](http://i.stack.imgur.com/PCHiL.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:36:19.367

我不知道确切的答案，但以下链接正在谈论这个问题

[Netbeans 6.9.1 数据库空节点](https://stackoverflow.com/questions/8236765/netbeans-6-9-1-database-empty-nodes)

**仔细**阅读，仅在与您相关的情况下应用解决方案。

# php - file_put_contents 创建损坏的图像

> ID：10563392
> 
> 赞同：-1
> 
> 时间：2012-05-12T11:41:36.580
> 
> 标签：php, rss

我正在尝试解析 RSS 提要并下载每个项目的所有图像。我正在遍历每个项目并执行以下操作来保存图像：

```
$url = str_replace(' ', '%20', $itemRSS['image']);
$rand = rand(1111, 99999999);
$img = $_SERVER['DOCUMENT_ROOT'].'/prod_images/'.$rand.'.jpg';
file_put_contents($img, file_get_contents($url)); 
```

RSS 提要中大约有 100 个项目，并且在服务器上创建了 100 个图像，但是当我下载它们时只有少数工作，其余的都是无效的。它们都是 jpg 以防您认为这是因为我将它们都称为 .jpg，而有些可能不是。

AHHHH 感谢所有评论的人。我在记事本中打开了一个损坏的并得到了这个：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<TITLE>400 Bad Request</TITLE>
</HEAD><BODY>
<H1>Bad Request</H1>
Your browser sent a request that this server could not understand.<P>
The request line contained invalid characters following the protocol string.<P>
<P>
<HR>
<ADDRESS>Apache/1.3.37 Server at www.magicbunny.co.uk Port 80</ADDRESS>
</BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:01:31.613

该 URL 中将包含不可靠的字符 - 您可能需要用 %20 替换更多的“”。我建议回显网址

```
echo htmlspecialchars($url); 
```

对于那些不正确的。然后，您可以发现需要替换的其他字符。

如果您想自动执行此操作，请将 URL 分成几部分，并对路径（但不是“/”）、文件名（但不是“.”）进行 urlencode，然后将其重新构建在一起。但是首先从回声开始，这样您就知道涉及多少工作。

# php - 带有 ASP 表单的 PHP Curl

> ID：10563394
> 
> 赞同：0
> 
> 时间：2012-05-12T11:42:08.143
> 
> 标签：php, curl, asp-classic

我想使用 curl 通过 .asp 页面发送登录表单（我怎么知道什么类型的 ASP？）。如果是PHP，我不会有任何问题，但我不知道PHP和ASP表单之间有什么区别。

我一直在网上搜索，但找不到任何令人信服的东西，我不想在网上尝试 100 次，因为它不是我的。

谢谢！

# c# - 从我的网站通过 C# 发送电子邮件

> ID：10563397
> 
> 赞同：1
> 
> 时间：2012-05-12T11:42:30.283
> 
> 标签：c#, asp.net, sendmail

我使用以下代码发送电子邮件：

```
 public static bool SendEmail(string To, string ToName, string From, string FromName, string Subject, string Body, bool IsBodyHTML)
        {
            try
            {
                MailAddress FromAddr = new MailAddress(From, FromName, System.Text.Encoding.UTF8);
                MailAddress ToAddr = new MailAddress(To, ToName, System.Text.Encoding.UTF8);
                var smtp = new SmtpClient
                {
                    Host = "smtp.datagts.net",
                    Port = 587,
                    EnableSsl = false,
                    DeliveryMethod = SmtpDeliveryMethod.Network,
                    UseDefaultCredentials = true,                                        
                    Credentials = new System.Net.NetworkCredential("MeEmail@...", "Password")
                };

                using (MailMessage message = new MailMessage(FromAddr, ToAddr)
                {
                    Subject = Subject,
                    Body = Body,                    
                    IsBodyHtml = IsBodyHTML,                    
                    BodyEncoding = System.Text.Encoding.UTF8,                   

                })
                {
                    smtp.Send(message);
                }
                return true;
            }
            catch
            {
                return false;
            }
        } 
```

它适用于本地，当我在本地 IIS 下使用我的网站时，但当我将其上传到我的网站时，它不起作用，即使发生任何错误也不会发送电子邮件。

有没有人可以帮助我解决这个问题？

**UPDATE1**：我删除了 try catch 并使用此消息捕获错误：`Failure sending mail`

**UPDATE2**：我更改了我的 stmp 服务器并使用了我的 Gmail 帐户，请查看以下代码：

```
public static bool SendEmail(string To, string ToName, string From, string FromName, string Subject, string Body, bool IsBodyHTML)
            {
                try
                {
                    MailAddress FromAddr = new MailAddress(From, FromName, System.Text.Encoding.UTF8);
                    MailAddress ToAddr = new MailAddress(To, ToName, System.Text.Encoding.UTF8);
                    var smtp = new SmtpClient
                    {
                        Host = "smtp.gmail.com",
                        Port = 587,
                        EnableSsl = true,
                        DeliveryMethod = SmtpDeliveryMethod.Network,
                        UseDefaultCredentials = false,                                        
                        Credentials = new System.Net.NetworkCredential("MeEmail@gmail.com", "Password")
                    };

                    using (MailMessage message = new MailMessage(FromAddr, ToAddr)
                    {
                        Subject = Subject,
                        Body = Body,                    
                        IsBodyHtml = IsBodyHTML,                    
                        BodyEncoding = System.Text.Encoding.UTF8,                   

                    })
                    {
                        smtp.Send(message);
                    }
                    return true;
                }
                catch
                {
                    return false;
                }
            } 
```

现在我得到一个错误:(

我收到此[链接](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpstatuscode.aspx)中提到的**“MustIssueStartTlsFirst”**错误。我现在正在尝试检查@EdFS 点并使用端口 25

**UPDATE3**：这是因为我使用共享服务器，我只能将端口更改为 25 ，并且它不起作用并给出相同的错误，我正在尝试从我的服务器备份团队获得支持

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:12:31.703

**假设**SMTP 服务器 (smtp.datagts.net) 运行良好，需要检查一些项目：

1.  您的代码似乎正在使用`UseDefaultCredentials=true`，但在下一行您正在提供凭据
2.  如评论中所述，检查您的网络主机是否未阻止端口 587
3.  如果您托管在共享服务器（而不是专用机器）上，则*很可能*ASP.Net 设置为`medium trust`. **如果**是这样，您[不能为 SMTP 使用*除***Port 25**](http://blogs.msdn.com/b/alvar/archive/2010/02/08/smtp-problems-when-asp-net-is-not-running-in-full-trust.aspx)[以外](http://blogs.msdn.com/b/alvar/archive/2010/02/08/smtp-problems-when-asp-net-is-not-running-in-full-trust.aspx)的任何端口。

* * *

更新：

尝试解决错误。在您的**本地**（开发）机器中，将其添加到您的 web.config：

```
<system.web>
...
    <securityPolicy>
      <trustLevel name="Medium" />
    </securityPolicy>
... 
```

本地计算机上的 ASP.Net 以`FULL TRUST`. 上述设置使您正在处理的当前网站/应用程序在`medium trust`. 您可以根据需要删除/评论。这个练习的重点是*尝试*匹配您的网络主机设置（如果事情在您的本地机器上工作然后在发布时死掉，这显然是不同的）。最好从您的网络主机获取信息..但在那之前....

然后尝试端口 587 和 25。

*   它应该在端口 587 上失败并出现安全异常（因为`medium trust`）
*   如果您的邮件服务器*只*接受端口 587 上的 SMTP 连接，那么当然，端口 25 也将不起作用（但您应该得到一个不同的错误）。在这种情况下，关键是*“......它仍然不起作用......”*是 SMTP 服务器（smtp.datagts.net）*只*接受端口 587 上的连接

GMAIL 也是如此。如果您的 ASP.Net 网络主机设置为`medium trust`. 我已经经历过很多次了——它会在我的本地机器上“工作”，但是一旦我`medium trust`在我的本地开发机器上启用它，它就会失败。

你应该询问你的网络主机他们对 ASP.Net 的设置是什么——如果它是一些“自定义”设置，你可以要求一个副本并在你的开发框中使用它。

# iphone - iPhone - 更改语言后错误的本地化

> ID：10563408
> 
> 赞同：2
> 
> 时间：2012-05-12T11:44:43.067
> 
> 标签：iphone, ios, xcode, localization

我正在开发一个支持英语和阿拉伯语本地化的应用程序。如果 iPhone 语言设置为阿拉伯语，一切都很好。如果我将语言更改为英语，该应用程序会继续以阿拉伯语更改。

我尝试了以下方法：

1.  在更改语言之前终止应用程序。

2.  从 iPhone 中删除应用程序。将语言更改为英语。重新启动 iPhone。并从头开始构建应用程序（仍然是阿拉伯语！）。

3.  我尝试使用 shift-command-k 进行清洁（也失败了）。

4.  我删除了应用程序。重新启动了手机。清理了构建文件夹（shift-option-command-k）。然后我构建了应用程序，你猜怎么着，它仍然是阿拉伯语！（以上帝的名义，iPhone怎么知道我以前用过阿拉伯语？！我多次重启手机！，删除并清理构建目录！）。

所以，你觉得我应该怎么做？

注意：提供本地化的其他应用程序运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:03:49.050

项目有`en.lproj` `Localizable.strings`文件吗？

感谢@Shatou Dev，我发表评论作为答案。

# c++ - 严格别名和 std::array 与 C 样式数组

> ID：10563411
> 
> 赞同：7
> 
> 时间：2012-05-12T11:45:10.430
> 
> 标签：c++, arrays, reinterpret-cast, strict-aliasing, type-punning

当使用 gcc 4.7（在 OS X 上使用 MacPorts 构建的 g++-mp-4.7 (GCC) 4.7.0）编译以下代码时，我得到看似矛盾的结果。

当我尝试将 an 的一部分重新解释和取消引用`std::array`为 an时，编译器不会抱怨，`uint32_t`但在使用 C 样式数组时会抱怨。

示例代码：

```
#include <array>
#include <cstdint>

int main() {    
    std::array<uint8_t, 6> stdarr;
    *reinterpret_cast<uint32_t*>(&stdarr[0]) = 0; // OK

    uint8_t arr[6];
    *reinterpret_cast<uint32_t*>(&arr[0]) = 0;
    // ^ error: dereferencing type-punned pointer will break strict-aliasing rules [-Werror=strict-aliasing]
} 
```

编译命令是：

```
$ g++ -o test -std=c++0x -Wall -Wextra -Werror main.cpp 
```

为什么他们会受到不同的对待？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:52:30.787

取地址时`std::array`，表达式`arr[0]`相当于`arr.operator[](0)`返回引用的函数调用，而不是指针算术表达式`(arr + 0)`。`operator[]`也许编译器在生成别名警告时不会尝试“看穿”函数调用。

# c++ - boost.spirit：对不完整的输入流采取行动

> ID：10563412
> 
> 赞同：0
> 
> 时间：2012-05-12T11:45:31.743
> 
> 标签：c++, boost

是否可以使用精神对不完整的流采取行动？我想为一个程序制作一个命令行界面。例如，一个完整的命令序列可能如下所示：

> 进程管理器进程胭脂杀死

但说用户输入：

> 进程管理器进程？（或按 Tab 键）

我想展示一个流程列表我可以用精神来做吗？如果属实，请举例回答。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:19:46.300

如果你足够努力，你可能会找到一种方法来强迫 boost.spirit 做你想做的事。我最初的想法是，您可以使用跳过解析器来使用您的选项卡，并触发从选项卡字符上的语义操作打印出您的替代列表。

但我建议在这里避免 boost.spirit。我这样说是因为调试精神和其他 TMP 重的库的问题很难开始，当你只是将它们用于它们的目的时。这不是 boost.spirit 的用途，因此尝试这样做可能会导致您遇到令人讨厌的边缘情况并让您无法调试。

# ruby-on-rails - 何时使用 sphinx 搜索，何时使用普通查询？

> ID：10563413
> 
> 赞同：0
> 
> 时间：2012-05-12T11:45:33.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, thinking-sphinx

我在 Rails 中使用thinking_sphinx。据我所知，Sphinx 用于全文搜索。假设我有这些查询：

```
keyword
country
sort order 
```

我使用 Sphinx 进行上述所有搜索。但是，当我在没有查询的情况下进行查询时`keyword`，仅在 MySQL 中使用普通查询`country`而`sort order`不是使用 Sphinx 会更好吗？

换句话说，是否应该只在`keyword`搜索时才使用 Sphinx？

查看整体性能和速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:00:50.910

不要听起来刻薄，但性能真的很重要吗？

如果您正在构建一个仅由组织内的少数用户使用的应用程序，那么您可能会忽略使用一种方法而不是另一种方法的性能优势，而是专注于代码的简单性。

另一方面，如果您的应用程序被 interwebz 上的大量用户访问，并且您*确实*需要专注于提高性能，那么您应该遵循上述@barryhunter 的建议并进行基准测试以确定给定情况下的最佳方法。

PS在需要之前不要优化。全心全意地努力让代码远离你的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:00:18.007

基准！基准！基准！

即自己测试。确切的性能将取决于确切的数据，甚至可能取决于您的 sphinx 和 mysql 服务器的相对性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:55:57.437

当通过文本字符串搜索时，Sphinx 将提供比 MySQL 更快的速度，而通过数字键搜索时，MySQL 可能会更快。

因此，假设“国家”和“排序顺序”都可以在 MySQL 中使用数字索引进行索引，最好只使用带有“关键字”的 Sphinx，而对于其他两个 - MySQL 普通查询。

但是，正如 barryhunter 所建议的那样，基准测试不会受到伤害；）

# javascript - 网站使用主干作为前端，使用 nodejs 作为后端

> ID：10563414
> 
> 赞同：2
> 
> 时间：2012-05-12T11:45:37.553
> 
> 标签：javascript, security, node.js, backbone.js, express

我正在开发一个新的网站，它将是一个带有一些对话框/模态窗口的单页应用程序。我想将骨干用于前端。这将使用 ajax/websockets 调用后端并使用模板渲染生成的 json。
作为后端，我将使用 nodejs express 应用程序，它将返回客户端所需的 json，它将是某种 api。这不会使用服务器端视图。
客户将使用 facebook、twitter 等进行身份验证，也可能使用自定义注册表单。
客户端静态资源，如 css、js、html 文件将由 nginx（稍后 CDN）处理。

## 我现在有的问题：

*   如何确定给定用户有权在 api 中执行某些操作（即删除建筑物，创建新建筑物）？这是授权问题，我想在用户登录时给他们一个角色，并根据它确定他们的权限。这行得通吗？
*   与上面的问题类似，这种基于角色的安全性是否足以保护 api？或者我需要添加令牌或请求签名之类的东西？
*   这种架构是否可以接受，或者我过度设计并使其复杂化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:18:47.367

[Passport](http://passportjs.org/)是解决难题的一个选项。我是开发人员，所以如果您使用它，请随时问我任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:41:54.683

对于您问题的**身份验证**部分，我将使用[everyauth](http://everyauth.com/)，它是用于连接/表达的身份验证中间件。它支持几乎所有 oauth-social-network-thingie。

对于**角色管理**，您可以尝试[node-roles 。](http://dresende.github.com/node-roles/)我自己没有使用它，但它应该可以帮助你，因为它会检查服务器端的角色。当然，这仅在您的 API 在 node.js 中实现时才有用。如果不是这种情况，您必须通过您的 node.js 应用程序“代理”API 调用。

我希望我能帮助你！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:34:25.613

*   *我想在用户登录时给他们一个角色，并据此确定他们的权限。这行得通吗？*
    *   是的，这会起作用。从服务器获取用户后，您可以检查用户的某个角色。然后，您可以根据此角色显示不同的 UI 元素。
*   *这种基于角色的安全性足以保护 api 吗？或者我需要添加令牌或请求签名之类的东西？*
    *   这还不够。任何人都可以跳进控制台并设置类似`user.admin = true`. 在您的 API 中，您需要验证请求中的用户令牌，确保相关用户具有适当的权限。
*   *这种架构是否可以接受，或者我过度设计并使其复杂化？*
    *   至少你应该有一个 API 验证层。这将是一个足够好的开始，并且不会过度设计。

# joomla - 在joomla 1.5中将语言设置为管理员菜单

> ID：10563417
> 
> 赞同：0
> 
> 时间：2012-05-12T11:45:59.167
> 
> 标签：joomla, joomla1.5

我在 joomla 1.5 中开发了一个组件，并制作了 .xml 文件以安装在我的 .xml 中我有管理员菜单，例如

```
<administration><menu>COM_MY_COMP</menu>
    <submenu> 
         <menu task="display">COM_MY_COMP_MENU1</menu> 
        <menu task="additem">COM_MY_COMP_MENU2</menu> 
  </submenu> 
```

在语言文件中，我将项目设置为

```
COM_MY_COMP="My Component"
COM_MY_COMP_MENU1="Dispaly"
COM_MY_COMP_MENU2="Dispaly2" 
```

它在其他项目上工作，但不在管理员菜单上，它没有转换为`COM_MY_COMP`我`My Component` 使用 joomla 1.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:14:38.293

您不能只将语言文件添加到文件夹中。您需要使用语言文件重新安装组件。这是您需要添加到 xml 中的内容。

```
<languages folder="language-admin"> 
     <language tag="en-GB">en-GB/en-GB.com_yourcomponent.ini</language> 
     <language tag="en-GB">en-GB/en-GB.com_yourcomponent.menu.ini</language> 
</languages> 
```

我还可以说，如果它是您要翻译的菜单，您将需要一个单独的语言文件，例如`en-GB.com_yourcomponent.menu.ini`

下面是它的外观。

```
COM_YOURCOMPONENT="Your Component"
COM_YOURCOMPONENT.CONTROL_PANEL="Control Panel" 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:03:54.830

你必须把你的翻译放在这个文件夹中：

```
/administrator/language/en-GB/ 
```

# jquery - 使用jquery在一个圆圈中旋转多个图像

> ID：10563419
> 
> 赞同：4
> 
> 时间：2012-05-12T11:46:23.933
> 
> 标签：jquery, css, image, jquery-animate

我需要使用 jquery 在同一个轨道圆中旋转多个图像。我更改并延迟了两个图像的时间间隔。问题是几秒钟后两个图像都重叠了。我的代码是

```
 <script type="text/javascript">
            var p = 0;

            function moveit() {
            p += 0.02;

            var r = 135;
            var xcenter = 500;
            var ycenter = 200;
            var newLeft = Math.floor(xcenter + (r * Math.cos(p)));
            var newTop = Math.floor(ycenter + (r * Math.sin(p)));
            $('#friends').animate({
                    top: newTop,
                    left: newLeft,
                }, 10, function() {
                    moveit();
            $('#friends2').animate({
                top: newTop,
                left: newLeft,
            },15, function() {
                moveit();
            });
             }
            $(document).ready(function() {
                moveit();    
            });
            </script> 
```

我的 css 和 html 源代码是

```
 #friends { position: absolute;     }         
     #friends2 { position: absolute;    }     

 <img src="Images/info.gif" id="friends"/>
<img src="Images/circle.jpg" id="circles" />
<img src="Images/help.gif" id="friends2" /> 
```

现场演示： http: [//jsfiddle.net/W69s6/embedded/result/](http://jsfiddle.net/W69s6/embedded/result/)但这是针对单张图片的。有什么建议吗？？

编辑:: 我的形象 ![图像旋转](../Images/a994f2d080968531147d3f802f44f5f8.png)

或者

示例链接[http://www.templatemonster.com/demo/38228.html](http://www.templatemonster.com/demo/38228.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:22:47.440

[**检查这个例子**](http://jsfiddle.net/libinvbabu/FyMCc/4/)

它有两个**以相同速度在同一轨道上旋转的**项目。它永远不会重叠。

**编辑：**

这是以相同速度和相同轨道旋转但均等分离的 4 个项目[**的示例。**](http://jsfiddle.net/libinvbabu/FyMCc/13/)

要添加更多项目，只需通过添加不同的角度来调整代码。

**更新：**

[***这是简单的图像版本***](http://jsfiddle.net/libinvbabu/Pvtzv/1/)

希望这会有所帮助。干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:31:21.140

您的代码有效，但看起来您有语法错误；您的第一次 moveit 通话未正确结束。

这个有相同的轨道，不同的速度 [http://jsfiddle.net/thinkingsites/FyMCc/](http://jsfiddle.net/thinkingsites/FyMCc/)

**编辑**

您的错误是将命令在同一个函数中旋转两个项目。他们都抓住了相同的顶部和左侧，并且总是相互绑定，更不用说他们都调用了 moveit() 所以每次调用 moveit 时，它都会在内部被调用两次。

我已经修复了您的递归，因此它只发生一次，并使 moveit 接受目标元素以及不同的起始位置（移位）。

这个有相同的轨道，相同的速度，不同的位置 [http://jsfiddle.net/thinkingsites/QAT7C/11/](http://jsfiddle.net/thinkingsites/QAT7C/11/)

# c# - 如何优化此 LINQ 查询

> ID：10563420
> 
> 赞同：0
> 
> 时间：2012-05-12T11:46:31.050
> 
> 标签：c#, .net, linq, extension-methods

我有这个查询

```
Dasha.Where(x => x[15] == 9).ForEachWithIndex((x,i) => dd[Sex[i]][(int)x[16]]++); 
```

此查询查找`Dasha`第 15 个索引值为 9 的元素，如果是，则增加 dd[Dashaindex][x[16]] 值。

这里 Dasha 是`double[100][50]`，dd 是`double[2][10]`，Sex 是 byte[ ] 并且只能有 0 或 1 的值。0 代表男性，1 代表女性

x[15] 只能在 0 到 9 之间（包括两者）。x[16] 的规则相同。

它给了我正确的结果。

我尝试将其优化为

```
Dasha.ForEachWithIndex((x,i) => 
{
    if(x[15] == 9)
        dd[Sex[i]][(int)x[16]]++
}); 
```

这给了我错误的结果。我在哪里做错了？

我`ForEachWithIndex`的就像

```
static void ForEachWithIndex<T>(this IEnumerable<T> enu, Action<T, int> action)
{
    int i = 0;
    foreach(T item in enu)
        action(item, i++);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:05:19.260

这只是关于的部分答案（评论太长）

```
 Dasha.ForEachWithIndex((x,i) =>  {
     if(x[15] == 9)
         dd[Sex[i]][(int)x[16]]++ }); 
```

> 这给了我错误的结果。我在哪里做错了？

在第一种情况下，您将包含 100 个项目的 Dasha 列表过滤到 n 个项目，然后遍历这 n 个项目。

在第二种情况下，您遍历所有 100 个项目。所以索引会不同，你从 Sex[i] 得到的每一行的值也会不同

例如

```
 Dasha[0] != Dasha.Where(x => x[15] == 9)[0] 
```

除非 Dasha[0][15] == 9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:59:57.113

以下将为您提供与第一次查询相同的结果。

```
 int counter=0;
    Dasha.ForEachWithIndex((x,i) => 
    {
        if(x[15] == 9)
        {
            dd[Sex[counter]][(int)x[16]]++;
            counter++;
        }
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:07:53.273

您需要先保存原始索引`Where`：

```
Dasha.Select((x,i) => new {x = x, i = i})
     .Where(a => a.x[15] == 9)
     .ForEach(a => dd[Sex[a.i]][(int)a.x[16]]++); 
```

# compiler-construction - dart javascript 编译器 (dart2js) 是如何工作的？

> ID：10563422
> 
> 赞同：6
> 
> 时间：2012-05-12T11:46:39.603
> 
> 标签：compiler-construction, dart

Dart 在其自己的 Dart VM 中运行，但您可以将其编译为现代优化的 JavaScript。但这是如何工作的？网上有没有解释这个过程的文章或论文？

我想知道这是否是一个简单直接的元素与元素匹配，开发、处理只是耗时，或者 Dart 的某些元素/方面是否无法编译为 JavaScript。

[http://www.dartlang.org](http://www.dartlang.org)

编辑：谢谢你的 2 个答案。关键是，我告诉我的一位同事 dart 并且 dart 可以编译为 JavaScript。他承认它可以编译成 JavaScript，但它会产生 mumbojumba 代码，并且只适用于简单的东西。最后他说：'''好吧，解释我。这种编译将如何处理非平凡的代码？'''

这就是我问的原因。我希望网上有一些材料可以链接他。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T13:22:14.793

Dart 编辑器现在将使用 dart2js 将您的 Dart 代码编译为 JavaScript。

至于您问题的第二部分，dart:io 库仅适用于服务器/命令行，因此无法使用 dart2js 进行编译。

我现在意识到我认为你在问“工程师是如何设计和实现 dart2js 编译器的”，而不是“你如何运行 dart2js”

这是一篇关于 dart2js 公告的博文：http: [//news.dartlang.org/2012/05/new-dart-to-javascript-compiler-ready.html](http://news.dartlang.org/2012/05/new-dart-to-javascript-compiler-ready.html)

工程师之一 Kasper Lund 补充道：“对于技术上感兴趣的人，我可以告诉你，新编译器使用 SSA 形式（静态单一赋值）的内部表示，并且编译器完全在 Dart 中实现。”

源代码位于[http://code.google.com/p/dart/source/browse/#svn%2Fbranches%2Fbleeding_edge%2Fdart%2Flib%2Fcompiler%2Fimplementation](http://code.google.com/p/dart/source/browse/#svn%2Fbranches%2Fbleeding_edge%2Fdart%2Flib%2Fcompiler%2Fimplementation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T19:37:14.883

Kasper lund 关于中间表示和实施的优化。[https://www.youtube.com/watch?v=GwBb_nqQLuc](https://www.youtube.com/watch?v=GwBb_nqQLuc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T21:32:37.243

> 网上有没有解释这个过程的文章或论文？

前端是您经典的手动词法分析器和递归下降解析器。后端是，我相信做一堆类型推断（因为 Dart 的类型注释太松散，无法让你从它们进行可靠的静态类型分析，并且运行时语义不会让你认真对待类型注释）。如果您查找有关“具体类型推断”的论文，我相信您会找到一些您正在寻找的文献。此外，任何关于编译到 SSA 表单（以及从该表单生成代码，我假设）的任何参考都应该有所帮助。

# vba - 使用单行代码清除范围数组

> ID：10563423
> 
> 赞同：2
> 
> 时间：2012-05-12T11:46:42.240
> 
> 标签：vba, excel

我已经为范围创建了全局字符串常量。

```
Global Const Graph_Cl As String = "G2:G13"
Global Const Graph_Vl As String = "I2:I13"
Global Const Graph_VlS As String = "L2:L13" 
```

我想使用一行代码清除这些范围。

```
With wkDataToUse
    .Range(Graph_Cl, Graph_Vl, Graph_VlS).ClearContents
End With 
```

但我得到错误：

```
"Wrong no of arguments or invalid property assignment!" 
```

我什至试过这个：

```
With wkDataToUse
    .Range(Array(Graph_Cl, Graph_Vl, Graph_VlS)).ClearContents
End With 
```

或者

```
With wkDataToUse
    .Range([{Graph_Cl, Graph_Vl, Graph_VlS}]).ClearContents
End With 
```

如何清除一行代码中的所有范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:00:08.033

要传递多个范围地址，您需要逗号分隔的字符串格式：`"a:b,c:d,e:f"`所以你可以；

```
.Range(Graph_Cl & "," & Graph_Vl & "," & Graph_VlS).ClearContents 
```

你也可以；

```
Union(.Range(Graph_Cl), .Range(Graph_Vl), .Range(Graph_VlS)).ClearContents 
```

# django - 在错误页面上隐藏 Django 设置值（用于 Celery）

> ID：10563425
> 
> 赞同：3
> 
> 时间：2012-05-12T11:46:59.150
> 
> 标签：django, celery, django-celery, django-settings, traceback

我们在我们的 Django 项目中使用 Celery 并将一个`CELERY_RESULT_DBURI`值（它携带我们数据库的密码）放入我们的`settings.py`文件中。显然，在每个回溯中使用明文密码我觉得不太安全。

我知道[过滤错误报告](https://docs.djangoproject.com/en/1.4/howto/error-reporting/#filtering-error-reports)，但我现在能想到的唯一解决方案是`SafeExceptionReporterFilter`通过复制`get_traceback_frame_variables()`方法和猴子修补来重写类`CELERY_RESULT_DBURI`。你们中有人知道更好的解决方案吗？您是如何解决暴露数据库密码的问题的？

# iphone - 架构错误的未定义符号

> ID：10563426
> 
> 赞同：15
> 
> 时间：2012-05-12T11:47:01.250
> 
> 标签：iphone, ios, core-data

我正在使用 Core Data 在表格视图中显示数据，但我经常遇到这个问题：

> 体系结构 i386 的未定义符号：
> “_OBJC_CLASS_$_NSEntityDescription”，引用自：singleAppDelegate.o 中的 objc-class-ref。 o “_OBJC_CLASS_$_NSFetchedResultsController”，引用自：singleViewController.o 中的 objc-class-ref。o “_OBJC_METACLASS_$_NSManagedObject”，引用自：Data 中的 _OBJC_METACLASS_$_Data。 ○

这是我的 singleViewController.m

```
#import "Data.h"
#import "singleViewController.h"

@interface singleViewController ()

@end

@implementation singleViewController

@synthesize managedObjectContext;
@synthesize fetchedResultsController = _fetchedResultsController;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

    self.title = @"Core Data";
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    self.fetchedResultsController = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    id  sectionInfo =
    [[_fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    Data *info = [_fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = info.title;
    cell.detailTextLabel.text = info.content;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

#pragma mark - fetchedResultsController

- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Data" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray
                                               arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray
                                               arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
}

@end 
```

这是我的 appdelegate.m

```
#import "Data.h"
#import "singleAppDelegate.h"
#import "singleAppDelegate.h"

@implementation singleAppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSManagedObjectContext *context = [self managedObjectContext];
    Data *data = [NSEntityDescription
                                      insertNewObjectForEntityForName:@"Data"
                                      inManagedObjectContext:context];
    data.title = @"title";
    data.content = @"test content";

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }
    return YES;
} 
```

这是我的data.m

```
@implementation Data

@dynamic title;
@dynamic content;

@end 
```

不知道怎么了。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-12T11:52:25.267

添加`CoreData.framework`到您的目标。

选择您的目标，选择并`Build Phases`添加`CoreData.framework`.`Link Binary With Libraries`

# vb.net - 循环在图表控件中创建多个系列

> ID：10563428
> 
> 赞同：1
> 
> 时间：2012-05-12T11:47:35.073
> 
> 标签：vb.net, mschart

我正在尝试构建一个返回图表的函数。我想要一个参数来说明我可能需要多个系列的时间。一个循环如何创建多个系列？我认为每个系列都需要一个变量。函数如下。我认为如果有 5 个系列，那么每个“Dataseries”变量都应该有自己的名称。然后我是否只通过索引来引用它们？

```
 Public Shared Function MakeChart(ByVal form As Form, Optional ByVal numseries As Integer = 0) As Chart

    ' Add any initialization after the InitializeComponent() call.
    Dim SampleChart As Chart = New Chart()
    Dim MainChartArea As ChartArea = New ChartArea()
    Dim ChartLegend As Legend = New Legend()
    Dim Dataseries As Series = New Series()
    Dim seriesname As String = ""

    'add additonal series if the parameter exists
    If numseries > 0 Then
        For i As Integer = 0 To numseries - 1
            seriesname = "Series" & Convert.ToString(i)
            Dataseries = SampleChart.Series.Add(i)
            Dataseries.Name = seriesname
        Next
    Else
        DataSeries = SampleChart.Series.Add("Series1")
        Dataseries.Name = "Series1"
    End If
    form.Controls.Add(SampleChart)

    SampleChart.ChartAreas.Add(MainChartArea)
    SampleChart.Legends.Add(ChartLegend)
    SampleChart.Dock = DockStyle.Fill
    SampleChart.TabIndex = 0
    Return SampleChart
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:55:17.477

索引或字符串，所以是的，您可以通过名称引用该系列：

```
MessageBox.Show("First Series is " & SampleChart.Series(0).Name) 
```

或者

```
MessageBox.Show("First Series is " & SampleChart.Series("Series0").Name) 
```

但请注意：如果未找到该字符串，则控件将引发`ArgumentException`错误。

# c# - Valums Ajax 文件上传在 IE 中有效，但在 Firefox 中无效

> ID：10563432
> 
> 赞同：0
> 
> 时间：2012-05-12T11:48:05.830
> 
> 标签：c#, sql-server, ajax, asp.net-mvc-3, sql-server-2008

我在 ASP.NET MVC3 中开发，我有下面的代码用于将文件保存在 Sql Server 2008 中，它适用于 IE（我使用 IE9）但在 Firefox 中我收到错误“索引超出范围。必须为非负数且小于集合的大小。\r\n参数名称：索引”，我应该如何解决这个问题？谢谢

```
[HttpPost]
    public ActionResult FileUpload(string qqfile)
    {
        try
        {
            HttpPostedFileBase postedFile = Request.Files[0];
            var stream = postedFile.InputStream;
            App_MessageAttachment NewAttachment = new App_MessageAttachment
            {
                FileName = postedFile.FileName.ToString().Substring(postedFile.FileName.ToString().LastIndexOf('\\') + 1),
                FilteContentType = postedFile.ContentType,
                MessageId = 4,
                FileData = new byte[postedFile.ContentLength]
            };
            postedFile.InputStream.Read(NewAttachment.FileData, 0, postedFile.ContentLength);
            db.App_MessageAttachments.InsertOnSubmit(NewAttachment);
            db.SubmitChanges();
        }
        catch (Exception ex)
        {
            return Json(new { success = false, message = ex.Message }, "application/json");
        }
        return Json(new { success = true }, "text/html");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:00:06.360

Valums Ajax 上传有 2 种模式。如果它识别出浏览器支持 HTML5 File API（FireFox 无疑就是这种情况），它会使用这个 API 而不是使用`enctype="multipart/form-data"`请求。因此，在您的控制器操作中，您需要考虑这些差异，对于支持 HTML5 的现代浏览器，请`Request.InputStream`直接阅读：

```
[HttpPost]
public ActionResult FileUpload(string qqfile)
{
    try
    {
        var stream = Request.InputStream;
        var filename = Path.GetFileName(qqfile);

        // TODO: not sure about the content type. Check
        // with the documentation how is the content type 
        // for the file transmitted in the case of HTML5 File API
        var contentType = Request.ContentType;
        if (string.IsNullOrEmpty(qqfile))
        {
            // IE
            var postedFile = Request.Files[0];
            stream = postedFile.InputStream;
            filename = Path.GetFileName(postedFile.FileName);
            contentType = postedFile.ContentType;
        }
        var contentLength = stream.Length;

        var newAttachment = new App_MessageAttachment
        {
            FileName = filename,
            FilteContentType = contentType,
            MessageId = 4,
            FileData = new byte[contentLength]
        };
        stream.Read(newAttachment.FileData, 0, contentLength);
        db.App_MessageAttachments.InsertOnSubmit(newAttachment);
        db.SubmitChanges();
    }
    catch (Exception ex)
    {
        return Json(new { success = false, message = ex.Message });
    }
    return Json(new { success = true }, "text/html");
} 
```

代码可能需要一些调整。我现在没有时间测试它，但你明白了：在启用 HTML5 的浏览器的情况下，文件直接写入请求的主体，而对于不支持文件 API 的浏览器，文件数据被传输使用标准`multipart/form-data`编码。

# python - 传递具有多个参数的字符串

> ID：10563436
> 
> 赞同：3
> 
> 时间：2012-05-12T11:48:24.547
> 
> 标签：python, python-3.x

我是 python 新手。我正在使用 python 3.1.2 我必须通过我的代码与 xml-rpc 服务器通信。从我的代码中，我调用了 client.py，它会依次连接到服务器以从服务器获取评论列表。

工作代码：

```
class xmlrpc:
    def connect(self, webaddr):
        self.server = ServerProxy(webaddr) 
```

列出方法：-

```
my_list = self.server.tests.getTests() 
```

上面的方法是有效的，但是，虽然我有约束将其设置为如下所示`tests.getTests()`的单个`cmd_str`

```
my_list = self.server.cmd_str 
```

在这种情况下，`cmd_str`作为字符串本身发送到 client.py，而不是像其他字符串一样。谁能帮助我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:47:28.933

如果我理解你的话，你想调用一个对象的方法，但你事先不知道方法，你只是把它放在一个字符串中。那是对的吗？

```
class Server(object): 
    def isRunning(self): 
        print("you are inside the isRunning")

my_server = Server()
cmd_str = "isRunning"
my_function = my_server.__getattribute__(cmd_str)
my_function() 
```

> 你在 isRunning 里面

请注意，我让`Server`该类继承自`object`以使其成为所谓的新型类，并`isRunning`获得一个参数`self`，它告诉 python 这应该是一个实例方法。`my_server.__getattribute__`将获得对绑定函数的引用`my_server.isRunning`，然后调用它。

你也可以这样做：

```
function_map = {
    'check_if_running': my_server.isRunning
}
cmd_str = 'check_if_running'
my_function = function_map[cmd_str]
my_function() 
```

所以你不必完全按照调用命令字符串的方式来命名你的函数（在python中，方法的命名约定通常是`like_this`, not `likeThis`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:23:51.757

如果我理解正确，您需要调用一个只有字符串中的名称的方法，而不是对该方法本身的引用。

您可以使用[getattr](http://effbot.org/zone/python-getattr.htm)函数来获取对您要调用的方法的引用。

在您的示例中使用它：

```
cmdStr = "isRunning" 
func = getattr(Server, cmdStr)
test = func() 
```

# mysql - SQL 查询 + 特殊字符 ä、ö、ü、ø 等

> ID：10563439
> 
> 赞同：0
> 
> 时间：2012-05-12T11:48:56.137
> 
> 标签：mysql, sql, character-encoding, collation

在过去的几天里，我一直在思考一个问题，需要一些关于如何解决问题的提示。

我有一个看起来像这样的 sql 查询

```
 mysql_real_escape_string($value);
    $sql_first = "SELECT `user_id` FROM `usermeta` WHERE `meta_value` = '".$value."' 
```

如果 $value 不包含像`ä ü ö ø`

数据库的排序规则这样的字符，它工作正常`utf8_general_ci`

我尝试了 php`conv()`函数的各种组合，但无法使其正常工作。

我想我必须转换`$value`为 UTF-8 - 这是朝着正确的方向发展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:53:16.183

使用准备好的语句，数据库驱动程序会为你做所有事情，而且你不会受到 SQL 注入攻击作为奖励。

见[http://php.net/manual/fr/mysqli.prepare.php](http://php.net/manual/fr/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:56:33.850

我会说尝试`utf8_unicode_ci` 排序规则

从[这个](http://forums.mysql.com/read.php?103,187048,188748#msg-188748)链接：

主要区别在于：

1.  utf8_unicode_ci 支持所谓的扩展和连字，例如：德语字母 ß (U+00DF LETTER SHARP S) 在“ss”附近排序 字母 Œ (U+0152 LATIN CAPITAL LIGATURE OE) 在“OE”附近排序。

utf8_general_ci 不支持扩展/连字，它将所有这些字母排序为单个字符，有时顺序错误。

1.  utf8_unicode_ci*通常*对所有脚本都更准确。例如，在西里尔字母块上：utf8_unicode_ci 适用于所有以下语言：俄语、保加利亚语、白俄罗斯语、马其顿语、塞尔维亚语和乌克兰语。虽然 utf8_general_ci 仅适用于西里尔文的俄语和保加利亚语子集。白俄罗斯语、马其顿语、塞尔维亚语和乌克兰语中使用的额外字母排序不佳。

utf8_unicode_ci 的缺点是比 utf8_general_ci 慢一点。

因此，当您需要更好的排序顺序时 - 使用 utf8_unicode_ci，而当您对性能完全感兴趣时 - 使用 utf8_general_ci。

# c# - 如何在没有 GUI 的情况下创建 C# 程序？

> ID：10563440
> 
> 赞同：12
> 
> 时间：2012-05-12T11:48:57.043
> 
> 标签：c#, user-interface

我知道您可以创建一个 Windows 窗体应用程序并将其设置为不可见。如果我创建了一个控制台应用程序（控制台窗口将打开——我没有使用控制台），我如何创建一个根本没有 GUI 的简单应用程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-12T11:51:50.847

创建一个 windows 应用程序，删除 Form1.cs 文件，编辑 Program.cs 文件以删除行

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new Form1()); 
```

改用你自己的代码，你就完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T11:50:13.453

您可以将其创建为[Windows 服务](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)。

[这个问题](https://stackoverflow.com/questions/836427/how-to-run-a-c-sharp-console-application-with-the-console-hidden)还有一些选项可以运行没有控制台窗口的现有控制台应用程序，因此您可以编写一个控制台应用程序，然后编写一个控制台应用程序，该应用程序在其窗口隐藏的情况下启动该应用程序，然后关闭。

# php - 简单的php程序不起作用

> ID：10563444
> 
> 赞同：0
> 
> 时间：2012-05-12T11:49:14.223
> 
> 标签：php, html

```
<html>
 <head>
    <title>Roll Em!</title>
 </head>
 <body>
    <h1>Roll Em!</h1>
    <?php
    $roll = rand(1,6);
    print "You rolled a $roll";
    print "<br>";
    ?>

 </body>
</html> 
```

这是一个非常简单的程序，但由于某种原因不工作！它给出这样的输出

```
 Roll Em!

"; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:50:25.920

唯一的错误是 and 之间的空格`<?`，`php`但完整的代码应该是：

```
<html>
 <head>
    <title>Roll Em!</title>
 </head>
 <body>
    <h1>Roll Em!</h1>
    <?php
    $roll = rand(1,6);
    echo "You rolled a " . $roll;
    echo "<br>";
    ?>

 </body>
</html> 
```

您不应该使用 print，echo 在几乎所有情况下都更好，并且您应该使用“.$string.”将变量粘贴到文本字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:50:32.160

PHP 开始标签应该是： `<?php`- 没有空格。

# iphone - 从 Flickr 加载 Retina 显示图像（使用 Three20 TTThumbnailViewController）

> ID：10563446
> 
> 赞同：2
> 
> 时间：2012-05-12T11:49:26.157
> 
> 标签：iphone, ios, ios5, three20, flickr

我目前正在使用three20 的缩略图视图从flickr 加载图像，唯一的问题是它们返回像素化。有谁知道我可以做些什么来适应图像比例，使它看起来不错？

![在此处输入图像描述](../Images/2b59d6a45d68f85368d35de1f54de32c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:01:27.587

查看您的图片 URL，Flickr 提供不同的图片尺寸`suffixes`，您可以在 Flickr API 文档中找到它们：[https ://secure.flickr.com/services/api/misc.urls.html](https://secure.flickr.com/services/api/misc.urls.html)

# javascript - 在javascript xhr请求函数上显示/隐藏html元素

> ID：10563448
> 
> 赞同：1
> 
> 时间：2012-05-12T11:49:33.457
> 
> 标签：javascript, jquery, xmlhttprequest, loading

我有一个signle html元素，我需要通过jquery显示和隐藏到一个纯javascript xhr请求方法中，现在它总是在请求完成/成功时显示元素而不隐藏，如果出错我想再次隐藏它。

html

```
<div class="ajax-loading">Loading ..</a> 
```

xhr方法

```
function post(_url, _callback,_data){

  var xhr = createCORSRequest('POST',_url);
  if (!xhr){
    throw new Error('CORS not supported');
  }
  $('.ajax-loading').show();

  xhr.send(_data);

  /*SUCCESS -- do somenthing with data*/
  xhr.onload = function(){
    // process the response.
    _callback(xhr.responseText);
    $('.ajax-loading').hide();
  };

  xhr.onerror = function(e){
    console.log(e);
    $('.ajax-loading').show();
  };
} 
```

问题是我总是通过 $.ajax() statements(error,success,beforeSend) 来做到这一点，这次我有纯 javascript xhr 请求，我不知道该怎么做。

更清楚地说，我希望将其转换为 xhr javascript，如下所示：

```
$.ajax({
/*data etc ...*/
error:function(){
$('.ajax-loading').show();
},
success:function(){
$('.ajax-loading').hide();
},
beforeSend:function(){
$('.ajax-loading').show();
}
}); 
```

已编辑

我也尝试过但没有成功：

```
function get(_url, _callback){
  var xhr = createCORSRequest('GET',_url);
  if (!xhr){
    throw new Error('CORS not supported');

  }

  xhr.send();
  xhr.onreadystatechange = function() {
        if(xhr.readyState == 4 /*COMPLETE STATEMENT*/){
            alert(xhr.readyState);
        }
};
  /*SUCCESS -- do somenthing with data*/
  xhr.onload = function(){
    // process the response.
    _callback(xhr.responseText);

  };

  xhr.onerror = function(e){
    console.log(e);
  };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:52:40.473

检查这个： [Wiki for xmlhttprequest](http://en.wikipedia.org/wiki/XMLHttpRequest#The_onreadystatechange_event_listener)

在 xmlHTTPRequest 中，您必须检查对象的状态以了解请求发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:16:58.347

固定

```
xhr.onloadstart = function(){
       $('.ajax-loading').show();
  }

  xhr.onloadend = function(){
      $('.ajax-loading').hide();
  } 
```

# c# - 在对象列表中搜索

> ID：10563449
> 
> 赞同：0
> 
> 时间：2012-05-12T11:49:46.007
> 
> 标签：c#

我有一个包含 Customer 对象的列表，我正在尝试在每个对象中搜索一个名称。在 Customer 对象中有一个属性 ContactData，它返回一个 Contact 对象。在 Contact 对象中，我有一个返回名称字符串的方法。这是我试图比较的名称，但它不能正常工作，因为我每次都会受到打击，尽管我搜索的名称在任何 Customer 对象中都不存在。我正在使用的代码：

```
foreach (Customer name in m_customers)
{
      if (name.ContactData.FullName == "Anna") 
      {
          MessageBox.Show(string.Format("Yes"), "Test!", MessageBoxButtons.OK, MessageBoxIcon.Information); // Just for testing  
      }
} 
```

我也测试过使用简单的 for 循环，但我得到了相同的结果。我不确定我在做正确的事情，并且会得到一些帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:55:29.663

试试这个，可能是因为您的代码、数据库或存储过程中某处的所有客户的“全名”以某种方式设置为“安娜”...

```
foreach (Customer name in m_customers) 
{ 
    if(name.ContactData != null) System.Diagnostics.Debug.WriteLine(name.ContactData.FullName);

    if (name.ContactData.FullName == "Anna")  
    { 
        MessageBox.Show(string.Format("Yes"), "Test!", MessageBoxButtons.OK, MessageBoxIcon.Information); // Just for testing   
    } 
} 
```

如果是这种情况，请对关键字“Anna”进行全局搜索，然后查看弹出的内容。

另一种可能性是您没有为每个客户创建一个新的 ContactData 对象，而只是重用一个变量。这可能会使用相同的 ContactData 对象更新所有客户，因为正在使用指针。相反，为每个客户创建一个全新的 ContactData 对象。

如果这两种可能性没有帮助，您将不得不发布更多代码进行故障排除。

# mysql - IIS 7.5 使用 32 位驱动程序而不是 64 位

> ID：10563450
> 
> 赞同：1
> 
> 时间：2012-05-12T11:49:54.933
> 
> 标签：mysql, iis, odbc, driver

我在 Windows Server 2008 R2 机器上使用 IIS 7.5 通过 ODBC 驱动程序 3.51 连接到 MySQL 服务器。

当我在 VS 2010 中开发应用程序时，我为连接创建了一个 64 DSN（使用 c:\windows\sysWOW64\odbcad32.exe），一切都很顺利。

但是，当我在 IIS 上部署应用程序时，它并没有使用这个 DSN。所以我创建了一个 32 位的 DSN。

现在我面临**算术运算导致**每隔一页溢出的问题。

请帮忙。如何让 IIS 使用我在开发应用程序时创建的 64 位 DSN？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:01:12.057

检查`Enable 32 Bit Applications`您的网站应用程序池的设置，以在 32 位或 64 位模式下运行您的网站之间切换。

有关详细信息，请参阅[如何在 IIS 7 中启用 32 位应用程序池](http://help.webcontrolcenter.com/KB/a1114/how-to-enable-32-bit-application-pool-iis-7-dedicatedvps.aspx)。

# indexing - 谷歌没有快速索引新帖子

> ID：10563456
> 
> 赞同：0
> 
> 时间：2012-05-12T11:50:44.137
> 
> 标签：indexing

嗨，我有一个用 WordPress 构建的流行博客，谷歌过去可以很快地索引新帖子，至少在 12 小时内，但现在它在超过 2 天之前没有索引新帖子，我能做些什么让它更快？我很担心，因为有些帖子是新闻，所以如果没有被索引，它们很快就会失去价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:05:33.187

正如我所说'**耐心是成功的关键。**'

```
<meta name="revisit-after" content="7 days" /> 
```

在此处注册（[Google Webmastertool](http://www.google.com/webmasters/tools/?hl=en)）并（再次）提交您的站点地图。

在 Google Webmastertool 中，您可以看到任何爬虫错误、被阻止的网址等等。看看吧！

祝你好运。

# android - Android 秒表 - 时间增长非常快

> ID：10563459
> 
> 赞同：0
> 
> 时间：2012-05-12T11:51:04.033
> 
> 标签：android, stopwatch

我正在为 android 制作秒表应用程序。我有一个启动和停止按钮。我的问题是时间增长得非常快。我哪里错了。下面是代码：

```
 final Runnable updater = new Runnable() {

        public void run() {

            if (startIsPressed) {
                time = SystemClock.elapsedRealtime() - initStart + startPointTime;
                startPointTime = time;
            } else {
                time = startPointTime;
            }

            hh = time / 3600000;
            hours.setText("" + formatter.format(hh));
            time = time - hh * 3600000;

            mm = time / 60000;
            minutes.setText("" + formatter.format(mm));
            time = time - mm * 60000;

            ss = time / 1000;
            seconds.setText("" + formatter.format(ss));
            time = time - ss * 1000;

            millis.setText("" + formatter.format(time / 10));

            handler.postDelayed(this, 30);
        }
    };
    startBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (!startIsPressed) {
                startIsPressed = true;
                startBtn.setText(R.string.stop);
                initStart = SystemClock.elapsedRealtime();
                handler.post(updater);
            } else {
                startIsPressed = false;
                startBtn.setText(R.string.start);
                handler.post(updater);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:33:30.517

正如文档所说[postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)导致 Runnable r 添加到消息队列中，在指定的时间过去后运行。每 1 秒更新一次计时器：使用

```
handler.postDelayed(this, 100); //100 milliseconds refresh rate 
```

代替

```
handler.postDelayed(this, 30); //30 milliseconds refresh rate 
```

[并在此处](https://stackoverflow.com/questions/3733867/stop-watch-logic)查看秒表逻辑

# storyboard - 如何在 TableView 中使用 UISearchBar 后进行 Segue-Push，带有情节提要的项目

> ID：10563461
> 
> 赞同：0
> 
> 时间：2012-05-12T11:51:30.040
> 
> 标签：storyboard, push, tableview, uisearchbar, segue

在使用情节提要的项目中，我有一个带有 UISearchBar 的 UITableView。

搜索功能没有问题。

我将单元格链接到 Seague Push 到下一个视图。

如果我选择一个单元格，则会加载下一个视图并且一切正常。

一切都很完美，直到我使用 UISearchBar，然后停止工作 Segue Push，当我选择过滤的单元格时，我无法进入下一个视图。

该怎么办？强制转场。

此链接上的项目模型：

[http://uploaded.to/file/ooohrxnf](http://uploaded.to/file/ooohrxnf)

```
//Code for search
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{

[searchData removeAllObjects];

NSArray *group;

for(group in arraynumbers)
{
    NSMutableArray *newGroup = [[NSMutableArray alloc] init];
    NSString *element;

    for(element in group)
    {
        NSRange range = [element rangeOfString:searchString options:NSCaseInsensitiveSearch];

        if (range.length > 0) {
            [newGroup addObject:element];
        }
    }

    if ([newGroup count] > 0) {
        [searchData addObject:newGroup];
    }        
}

onTableData = searchData;

return YES;
}

// Force Segue when UISearchBar isActive
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (self.searchDisplayController.isActive) {

    NSMutableArray *mutablerray = [searchData objectAtIndex:indexPath.section];        
    number = [mutablerray objectAtIndex:indexPath.row];       
    [self performSegueWithIdentifier:@"detail" sender:self];
    searchBar.text = @"";
}

}

// pickup number when UISearchBar isNotActive and reloadData after Segue
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"detail"])
{
    if (!self.searchDisplayController.isActive) 
    {

        number = [[onTableData objectAtIndex:[[self.tableView indexPathForSelectedRow] section]] objectAtIndex:[[self.tableView indexPathForSelectedRow] row]];
    }

    NSLog(@"number: %@", number);
    [segue.destinationViewController setNumber:number];

    [self.tableView reloadData];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:15:35.073

我遇到了完全相同的问题，并最终尝试了各种事情，因为 UISearchDisplayController 对我来说很新。我最终将 tableView 设置为 searchDisplayController 的 searchResultsDelegate：

```
searchDisplayController.searchResultsDelegate = self; 
```

我不太清楚为什么这会照顾它。有人有解释吗？

# html - 一个objectStore中的多个项目

> ID：10563462
> 
> 赞同：0
> 
> 时间：2012-05-12T11:51:35.687
> 
> 标签：html, indexeddb, jaydata

我正在尝试使用索引数据库做简单的应用程序。我想将多个项目存储在一个 objectStore 中。是否可以？我尝试了类似的方法，但它不起作用：

```
 itemsDB.indexedDB.addTodo = function(Name, Desp) {
    var db = itemsDB.indexedDB.db;
    var trans = db.transaction(['items'], IDBTransaction.READ_WRITE);
    var store = trans.objectStore("items");

    var data = {
      "name": Name,
      "description": Desp, 

    };

    var request = store.put(data);
   } 
```

我使用了来自[http://www.html5rocks.com/en/tutorials/indexeddb/todo/的示例](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:24:54.857

定位“仅”IndexedDB 会将您的兼容客户端缩小到 chrome 和 firefox 用户。看看[JayData](http://jaydata.org)，它支持您的对象存储模式，并带有一个备用提供程序列表选项：如果客户端有 IndexedDB，它将被使用，但如果只有客户端拥有的 WebSQL（95% 的移动设备），那么将使用 webSQL .

此外，语法更容易存储或检索，检查[ToDo 列表示例](http://examples.jaydata.org/Todolist2/index.html)，这也显示了后备提供程序选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:29:34.217

IndexedDB 对象存储旨在容纳多个对象，并让您可以在它们的属性上进行光标移动。

目前尚不清楚究竟是什么导致了您的`put`问题，但是如果您在其中一个上有一个键，`name`或者`description`它将只是替换现有对象而不是添加新对象。您想使用`add`而不是`put`.

关于 HTML5Rocks 示例要记住的一件事是，目前它们只能在 Chrome 中工作（恰好有一个滞后的 IndexedDB 实现）。

FWIW，一个小提示是您的 JavaScript 中有一个错误（Desp var 后的额外逗号），这可能会阻止它在 IE10 中运行：

```
var data = {
      "name": Name,
      "description": Desp, 

    }; 
```

# php - jQuery.post 输出下拉列表

> ID：10563464
> 
> 赞同：1
> 
> 时间：2012-05-12T11:51:50.110
> 
> 标签：php, javascript, jquery

我创建了一个下拉列表，它在单独的页面中运行良好： ![普通的](../Images/ea2b154f7ac52329f31d69f11722ada4.png)

但是，当我`jQuery.post()`在PP页面的表格中输出它时，内容从下拉列表中用完： ![异常](../Images/efefcf2036364c846521c2a2d5fe7482.png)

我使用我们的 jQuery 是这样的：

```
<script>
function showestate(){
$.post('admin/page/ur/showestate.php',{ 
zid: document.getElementById('zone').value

},
function(output){
$('#showestate').html(output);
}); 
}
showestate();
</script>

<div id='showestate'>
    </div> 
```

请帮忙！谢谢！

下拉列表是这样的：

```
<?php
include "../../db.php";
session_start();

?>
<select name="estate" id="estate" />
<?php
$sql_sel_estate = "select * from [estate]";
$result_sel_estate = mssql_query($sql_sel_estate, $conn);
while ($record_sel_estate = mssql_fetch_array($result_sel_estate))
{
$estateid = $record_sel_estate['estateid'];
$estatename = $record_sel_estate['estatename'];
$estatenameen = $record_sel_estate['estatenameen'];
$estatezoneid = $record_sel_estate['estatezoneid'];
$estatecode = $record_sel_estate['estatecode'];

?>

<option value="<?=$estateid?>">
<?=$estatenameen?><br>
</option>
<?php
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:01:06.570

你必须检查/提醒什么回来了`output`

它应该包含

```
<option>option 1</option>
<option>option 2</option>
<option>option 3</option> 
```

即只有选项。没有其他的html。没有其他的。

还创建一个`<select>`带有 id 的元素`showestate`。在将 html 添加到`showestate`

# file - 如果用户在黑莓中卸载应用程序，则删除文件

> ID：10563469
> 
> 赞同：0
> 
> 时间：2012-05-12T11:52:49.640
> 
> 标签：file, blackberry, uninstallation, delete-file, file-connection

我需要在我的黑莓应用程序中存储一些数据，所以我正在使用文件，我将这些文件存储在设备的内部存储器中，但如果我卸载了应用程序，我也需要删除这些文件。有没有办法将文件存储在应用程序包的同一路径中，或者如果应用程序被卸载，是否有其他方法可以删除它们？

这是我正在使用的路径：

```
 try {
    fileconn = (FileConnection) Connector.open("file:///store/home/user/data.txt");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:03:02.153

你存储什么样的数据？如果您可以将数据存储在应用程序的 PersistentStore 中，则在卸载应用程序时会自动将其删除。

# string - 将随机生成的字符串插入为嵌套表

> ID：10563474
> 
> 赞同：1
> 
> 时间：2012-05-12T11:53:38.150
> 
> 标签：string, random, lua, lua-table

这些天，我正在研究自己的一个小例子/项目。我正在做的是创建`n`一组**可变长度**的随机字符串。这是我想要获得的：

*   长度为 3 到 25 个字符的两个名称。
*   一条 40 到 300 个字符的消息。

在我的 C 示例中，我创建了一个`struct`并一直作为列表插入到该表中。在我的 LUA 示例中，我想要一个像这样的嵌套表：

```
tTableName = {
  [1] = {
    "To" = "Name 1",
    "From" = "Name 2",
    "Message" = "The first message generated"
  }
  [2] = {
    "To" = "Name 3",
    "From" = "Name 4",
    "Message" = "The second message generated"
  }
} 
```

所以，基本上我的结构是这样的：

```
struct PM {
  char *sTo, *sFrom, *sMessage;
} PMs; 
```

我想在 LUA 中有一个类似的结构/表，以便我可以使用一种`table.insert`方法。我目前正在这样做：

```
tTempTable = {
  "To" = "Name 1",
  "From" = "Name 2",
  "Message" = "The first message generated"
}
table.insert( tTableName, tTempTable ) 
```

但我认为这是浪费大量处理时间。目前我只生成*30 个*这样的 PM 的样本；但稍后我将生成 * *1000* * 个它们。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:38:40.887

我认为您甚至在知道瓶颈在哪里之前就陷入了过早优化代码的陷阱……但是以下文档通常包含一堆有关 lua 的优化信息，包括表格。编写它的人是 Lua 的首席架构师之一。

[http://www.lua.org/gems/sample.pdf](http://www.lua.org/gems/sample.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:40:28.287

首先，这不是一个真正的问题。我猜你会问是否有更有效的方法来做到这一点？一般来说，你想写的清晰，[除非你遇到问题，否则根本不要为了小的性能提升而汗流浃背。](http://c2.com/cgi/wiki?PrematureOptimization)但是这里有一些关于你的代码的注释，包括一些关于效率的注释：

发布的表构造函数无效。以下任一修复程序都可以工作：

```
tTempTable = {
  ["To"] = "Name 1",
  ["From"] = "Name 2",
  ["Message"] = "The first message generated"
}
tTempTable = {
  To = "Name 1",
  From = "Name 2",
  Message = "The first message generated"
} 
```

构造数组时不需要指定数字索引。你可以替换这个：

```
tTableName = {
  [1] = { To = "Name 1", From = "Name 2", Message = "The first message generated" },
  [2] = { To = "Name 3", From = "Name 4", Message = "The second message generated" },
} 
```

有了这个，这意味着完全相同的事情，但更简洁：

```
tTableName = {
  { To = "Name 1", From = "Name 2", Message = "The first message generated" },
  { To = "Name 3", From = "Name 4", Message = "The second message generated" },
} 
```

这也恰好更有效；Lua 可以预先分配它需要的数组大小，而使用前面的构造函数来做到这一点还不够聪明。

至于写这个的更好的方法，如果不了解更多关于你的应用程序，很难说。如果您只是想测试一些 PM 代码，为什么不在使用时即时生成所需的字符串呢？为什么要预先将它们分配到一个表中？

如果必须预先分配，则不必将它们存储为结构化数据。您可以只拥有三个数组：ToNames、FromNames、Messages，然后在使用时从它们中随机选择：

```
local to      =  ToNames  [ math.random(1,#ToNames  ) ]
local from    =  FromNames[ math.random(1,#FromNames) ]
local message =  Messages [ math.random(1,#Messages ) ]
TestPM(to, from, message) 
```

# javascript - ie<9 中 .change(function() javascript 的问题

> ID：10563477
> 
> 赞同：0
> 
> 时间：2012-05-12T11:54:02.593
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7

我在 ie<9 中遇到了这个脚本的问题。我的脚本有什么问题？谢谢

ie7,8 错误：SCRIPT87：无效参数。jquery.js，第 3 行字符 32369

在 jquery.js 中：function(a){this.parentNode.insertBefore(a,this.nextSibling)};

```
 $(":radio[name=variant]").change(function() {
            var vat = $(this).val()
                /*$(this).parent().parent().find('td.cost').css("display", "none");
                $("#costVariants_"+val).css("display", "block");
                */
            $(this).parent().parent().parent().find('label.variant_color').css("border", "none");
            $(this).parent().parent().parent().find('span.price').css("display", "none");
            $("#color_"+vat).css("border", "1px solid white") ;
            /*$("#price_"+vat).css("display", "block") ;*/
            $("#price_"+vat).insertAfter($(this).parent().parent().find('.main_image'));
            $(this).parent().find('.main_image').html($(this).parent().find('span.price').html());
                $(this).parent().parent().parent().parent().parent().parent().parent().find('.main_image').html($(this).parent().parent().find('span.price').html());
            }); 
```

对不起，这是我在这里的第一篇文章。多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:09:42.663

谢谢，我阅读了一些文档，现在我尽量避免使用 .parent。但总的来说，我的问题是隐藏的。ie<9 无法选择标签（输入的标签是我项目中的色块），当输入被隐藏时（显示：无；）

# iphone - 在 iphone 上使用大量电池将视频从 url 播放到 ATV

> ID：10563479
> 
> 赞同：6
> 
> 时间：2012-05-12T11:54:38.397
> 
> 标签：iphone, airplay, apple-tv

我正在编写一个使用 MPMoviePlayerController 播放 url 的应用程序。该应用程序在后台运行，使用 airplay 也适用于 ATV、使用 airserver 的 macmini 和 XBMC。该 url 指向本地网络上的电影文件。我[理解](http://nto.github.com/AirPlay.html)的方式是手机不会做任何繁重的工作，而只是将 url 传递给苹果电视，只要 url 指向 AppleTV 支持的媒体，它就会播放。

我遇到的问题是苹果电视必须积极地 ping iphone 并保持 wifi 处于活动状态，因为电池寿命受到了很大的打击。播放一部普通大小的电影会使 iPhone 3GS 的电池寿命减少约 2/3，而在 iPhone 4S 上则减少 1/2。

如果我使用[空中服务器](http://www.airserverapp.com/)在 mac mini 上玩游戏，那么手机的电池寿命会以与手机处于后台并且不播放任何内容相同的速度减少。我注意到如果我在 iphone 上停止 wifi，那么电影将继续在 mac mini 上播放，但在 ATV 上大约 30 秒内停止。我猜 ATV 一直在推出一个事件，说它正在播放，如果它没有收到 OK 作为回报，那么它就会停止播放。

有什么我做错了吗？其他人是否在手机上使用 Airplay 时遇到过同样的电池消耗问题？我试过别人的应用程序，它也做了同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:13:37.837

流量的数据包跟踪将为您提供明确的答案。但是，假设您链接到的文档是正确的，您的答案可能在这里：

> AirPlay 服务器是 HTTP 服务器 (RFC 2616)。与此服务器建立两个连接，第二个用作反向 HTTP 连接。这允许客户端从服务器接收异步事件，例如播放状态更改。

反向连接将使 WiFi 无线电保持活动状态。

# xml - 从jsp读取xsl

> ID：10563480
> 
> 赞同：0
> 
> 时间：2012-05-12T11:54:45.357
> 
> 标签：xml, jsp, xslt

我想从 xml 文件打开流，然后在 jsp 文件中使用 xsl 转换。一切似乎都是正确的，但我不知道为什么当我从响应中获取输出时会出现异常。

这是我的代码

```
<%@page import="javax.xml.transform.*" %>
<%@page import="javax.xml.transform.stream.*" %>
<%@page import="java.io.*" %>
<%

StreamSource xmlSource = new StreamSource( new File(application.getRealPath("foo/cd.xml")));
StreamSource xsltSource = new StreamSource( new File(application.getRealPath("foo/cd.xsl")));

StreamResult fileResult = new StreamResult(response.getOutputStream());
try {
    // Load a Transformer object and perform the transformation
    TransformerFactory tfFactory = TransformerFactory.newInstance();
    Transformer tf = tfFactory.newTransformer(xsltSource);
    tf.transform(xmlSource, fileResult);
} catch(TransformerException e) {
    throw new ServletException("Transforming XML failed.", e);
}

%> 
```

例外是：java.lang.IllegalStateException: getOutputStream() 已经为此响应调用

那么我该如何摆脱它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:11:14.083

Jstl 包括用于进行 xsl 转换的 jsp 标签。这使您可以选择执行转换而不必担心输出流。

Sun[在这里](http://java.sun.com/developer/technicalArticles/javaserverpages/faster/)提供了一个转换示例。因此，如果您的战争中有 jstl：

```
<%@ taglib prefix="x" uri="http://java.sun.com/jstl/xml" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>

<c:import url="foo/cd.xml" var="xmldocument"/>
<c:import url="foo/cd.xsl" var="xslt"/>
<x:transform xml="${xmldocument}" xslt="${xslt}"/> 
```

另一个例子是[here](http://www.java2s.com/Code/Java/JSP/VariousJSTLtags.htm)

tomcat *examples.war* Web 应用程序包含 jstl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:58:48.003

执行 JSP 时，它会打开响应编写器以将其第一个字符写为文本（所有 <`%@page ... %>`指令之间的换行符）。然后您尝试打开响应的输出流，但 JSP 之前已经完成了它。

这种纯 Java 代码没有理由放在 JSP 中，JSP 的目的是使用 JSP 标签生成标记。使用 servlet 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T18:17:42.293

我正在尝试[pd40](https://stackoverflow.com/a/10563605/1590763)的解决方案，但它不起作用。这些库导入代替了：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %> 
```

请参阅：[https ://stackoverflow.com/a/19434154/1590763](https://stackoverflow.com/a/19434154/1590763)

# sql - 两个表之间的关系应该是什么，这样每个学生都可以有单独的 markid

> ID：10563483
> 
> 赞同：0
> 
> 时间：2012-05-12T11:55:00.583
> 
> 标签：sql

我是 sql 新手，我有 2 个表，第一个带有标记，第二个带有学生。标记的主键是 markid，学生的主键是学生 ID。我想知道两个表之间的关系应该是什么，这样每个学生都可以有单独的标记。以及获取数据的 sql 查询是什么。

我已经尝试了与此选择查询 s="select s.Student Name,z.Hourly1Marks from Student s,marks z" 的一对一关系，但它显示了条目的笛卡尔积。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:57:28.807

学习INNER JOIN（如果每个学生有一个分数，即1:1关系）和LEFT JOIN（如果每个学生可以有多个分数，即1:n关系）的概念。

您使用了没有限制的内部联接。你需要的是类似

```
SELECT S.name, Z.marks
FROM students S
  JOIN marks Z ON S.student_id = Z.student_id 
```

或等效地

```
SELECT S.name, Z.marks
FROM students S, marks Z
WHERE S.student_id = Z.student_id 
```

对于 1:1 关系案例，或

```
SELECT S.name, Z.marks
FROM students S
  LEFT JOIN marks Z ON S.student_id = Z.student_id 
```

对于 1:N 关系案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:02:23.357

假设您有两个表：

```
Students
--------------
IDStudent
Name
....

Marks
--------------
IDMarks
Hourly1Marks 
```

并且Studend和Marks之间的关系是“一个学生可能有0个或更多Marks”，那么您需要在Marks表中添加一列 - 调用它`studentID`，该列用作学生表的外键。

那么你可以编写这个查询

```
select s.Name, z.Hourly1Marks 
from Student s left join marks z 
    on z.studentID = s.IDStudent 
```

这将使您返回所有学生及其分数（也包括没有任何分数的学生），或者，如果您只想要至少一个分数的学生

```
select s.Name, z.Hourly1Marks 
from Student s inner join marks z 
    on z.studentID = s.IDStudent 
```

# java - jax-ws 绑定 - 方法没有重命名，而类是

> ID：10563486
> 
> 赞同：3
> 
> 时间：2012-05-12T11:55:36.527
> 
> 标签：java, web-services

我觉得我被困住了。

这里是wsdl： [http ://www.doffin.no/ws/tdeservice.asmx?wsdl](http://www.doffin.no/ws/tdeservice.asmx?wsdl)

我使用 apache maven cxf 插件生成类。由于具有序列“X0020”的名称，我有两个要重命名的类。

*   为 wsdl:definitions/wsdl:service[@name='TDE_x0020_Connect'] 生成的一个；

*   另一个用于 wsdl:definitions/wsdl:portType[@name='TDE_x0020_ConnectSoap']。

我还希望将返回第二个类的第一个类的 getter 方法重命名。我尝试使用绑定文件：

```
<jaxws:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    wsdlLocation="TdeService.wsdl"
    xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
    <jaxws:bindings node="wsdl:definitions/wsdl:service[@name='TDE_x0020_Connect']">
        <jaxws:class name="TdeConnect"/>
    </jaxws:bindings>
    <jaxws:bindings node="wsdl:definitions/wsdl:portType[@name='TDE_x0020_ConnectSoap']">
        <jaxws:class name="TdeConnectSoap"/>
    </jaxws:bindings>
    <jaxws:bindings node="wsdl:definitions/wsdl:service[@name='TDE_x0020_Connect']/wsdl:port[@name='TDE_x0020_ConnectSoap']">
        <jaxws:method name="getTdeConnectSoap"/>
    </jaxws:bindings>
</jaxws:bindings> 
```

但是，类被重命名，而方法则不是：

```
@WebEndpoint(name = "TDE_x0020_ConnectSoap")
public TdeConnectSoap getTDEX0020ConnectSoap() {
    return super.getPort(TDEX0020ConnectSoap, TdeConnectSoap.class);
}
@WebEndpoint(name = "TDE_x0020_ConnectSoap")
public TdeConnectSoap getTDEX0020ConnectSoap(WebServiceFeature... features) {
    return super.getPort(TDEX0020ConnectSoap, TdeConnectSoap.class, features);
} 
```

我觉得我做错了什么，您能否提供有关该问题的提示或综合手册的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T08:48:55.600

我有同样的问题，所以我向 CXF 团队提交了一个错误（问题[CXF-5783](https://issues.apache.org/jira/browse/CXF-5783)）。

现在该错误已解决，您可以使用[Apache 快照存储库](http://repository.apache.org/content/groups/snapshots/org/apache/cxf/apache-cxf/)进行检查。

# php - 会话数据尚未访问

> ID：10563491
> 
> 赞同：0
> 
> 时间：2012-05-12T11:56:40.327
> 
> 标签：php, codeigniter, session

我正在尝试在产品控制器下的 product_edit 方法中的会话变量中填充已删除的按摩，如下所示：-

`$_SESSION['msg']="Record has been deleted successfully."` 然后我像这样重定向到列表页面：-`redirect('allinone/product_list');` 然后我在列表页面上显示按摩，如下所示：-

```
<?php if(isset($_SESSION['msg'])){?>
<tr>
  <td colspan='8' align="center" class="error_td"> 
  <?php echo $_SESSION['msg'];
        unset($_SESSION['msg']);?> </td>
</tr>
<?php }  ?> 
```

**但是会话按摩不会在列表页面上回显。我无法弄清楚我在代码中遗漏了什么？** 有人可以调查一下吗？

我认为每次导航都创建了新会话。

我是codeignitor框架的新手。

任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:04:12.780

Coeignitor Session 类不使用原生 PHP 会话。它生成自己的会话数据在您的 product_edit 方法上添加这个您可以访问会话变量，例如

```
$this->load->library('session'); 
```

会话变量可以通过

```
$this->session->set_userdata('message', 'hello world'); 
```

会话变量可以通过

```
$msg = $this->session->userdata('message'); 
```

在您看来，您可以使用 session like

```
<?php if($this->session->userdata('message')){?>
<tr>
  <td colspan='8' align="center" class="error_td"> 
  <?php echo $this->session->userdata('message');
        $this->session->unset_userdata('message');     ?> </td>
</tr>
<?php }  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:02:57.223

您应该使用`set_userdata($userdata);`在 Codeigniter 中设置会话。例如：

```
$this->load->library('session'); // loading session library

$userdata= array(
   'msg'  => 'Record has been deleted successfully.'
);

$this->session->set_userdata($userdata); // set session

$user_data = $this->session->userdata  // get session 
```

您可以在此处找到有关 Codeigniter 会话的更多信息：http: [//codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

# jquery - 如何在里面选择除“div”之外的元素？

> ID：10563493
> 
> 赞同：1
> 
> 时间：2012-05-12T11:57:06.190
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [在不包括后代的元素中获取文本](https://stackoverflow.com/questions/6487777/getting-text-within-element-excluding-decendants)

我正在尝试使用`:not`但`.not()`仍然无法正常工作。我希望结果只是“星期一”。

示例标记：

```
 <td id="day_id">
  Monday
   <div class='spec_class'>
    <span>One</span>
    <span>Two</span>
   </div>
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:58:44.980

jQuery 并没有真正“做”文本节点，所以这是少数几个最好使用原始 DOM 方法的地方之一：

```
var text = "",
    node;
for (node = $("#day_id")[0].firstChild; node; node = node.nextSibling) {
    if (node.nodeType === 3) { // 3 = text node
        text += node.nodeValue;
    }
}
console.log("[" + text + "]"); // "[ Monday ]" 
```

[实例](http://jsbin.com/epuras)| [来源](http://jsbin.com/epuras/edit)

注意之前和之后的空格，因为在文本“Monday”之前和之后都有带有空格的文本节点。你可以`$.trim()`用来摆脱它。

更多阅读：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T12:11:35.163

您需要查看元素的 textNodes

```
var td = jQuery("#day_id");
var textNodes = td.contents().filter(function() {
        return this.nodeType == 3;
    });

console.log(textNodes.text()); 
```

[JSFiddle](http://jsfiddle.net/ERbWp/)

# c++ - boost：使用 gzip 解压缩 http 响应失败

> ID：10563494
> 
> 赞同：3
> 
> 时间：2012-05-12T11:57:16.197
> 
> 标签：c++, boost, gzip, gzipstream

我正在尝试使用 boost gzip 过滤器解压缩 http 正文响应。我正在使用随处提供的标准代码示例：

```
std::string source = "c:\\install\\data.gz";
std::string destination = "c:\\install\\data.txt";

using namespace std;
using namespace boost::iostreams;

ifstream file(source, ios_base::in | ios_base::binary);
filtering_streambuf<input> in;
in.push(gzip_decompressor());
in.push(file);
ofstream unzipped(destination, std::ios::out | std::ios::binary);
boost::iostreams::copy(in, unzipped); 
```

在这种情况下，我之前将页面内容保存到源文件中。问题是此代码不适用于某些使用 gzip 编码的站点（例如，[http](http://mail.ru) ://mail.ru - 最大的俄罗斯门户网站）。其他站点，例如[http://bing.com](http://bing.com)是完全解压缩的。

我编写了小代码来测试使用 GZipStream 保存的数据。即使使用 mail.ru，它也可以正常工作：

```
String source = @"c:\install\data.gz";
String destination = @"c:\install\data.txt";

using (FileStream inFile = new FileStream(source, FileMode.Open))
{
    using (FileStream outFile = File.Create(destination))
    {
        using (GZipStream Decompress = new GZipStream(inFile, CompressionMode.Decompress))
        {
            Decompress.CopyTo(outFile);
        }
    }
} 
```

任何人都可以解释我的问题，mail.ru 或 gzip 吗？

# web-crawler - 如何避免抓取“执行”诸如取消订阅邮件列表中的人之类的 URL

> ID：10563499
> 
> 赞同：0
> 
> 时间：2012-05-12T11:57:38.087
> 
> 标签：web-crawler

我正在编写一个工具来抓取电子邮件中的网址，以便用户可以进行有针对性的搜索。有没有办法告诉被访问的 URL 我们是一个爬虫，这样用户就不会从邮件列表中订阅或取消订阅，或者 URL 中的其他操作不太可能被执行。

否则，是否有任何聪明的方法可以普遍地发现一个 URL 只能由希望采取某些行动的人访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:41:21.883

无论如何，一种有用的方法是遵守站点根目录中可用的任何 robots.txt 文件。

网站作者应该进行此设置，以便任何爬虫远离他们不希望他们进入的区域。

斯图尔特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:06:47.233

一般来说，没有。

没有办法可靠地推断给定的 URL 是否“做了”任何特别的事情（我想你可以寻找模式，例如“取消订阅”，但这几乎不可靠）。

在发出 HTTP 请求时，没有可以设置的魔法“我是机器人”标志。

# mongodb - MongoDB。Map-Reduce 终结函数

> ID：10563510
> 
> 赞同：3
> 
> 时间：2012-05-12T11:59:29.740
> 
> 标签：mongodb, mapreduce

我想通过按日期累积来计算用户。我有以下地图减少功能：

```
var m = function(){
    // creation date
    var d = new Date(parseInt(this._id.toString().slice(0,8), 16)*1000);
    // ticks
    var t = d.getTime();
    emit(d2,d3);
};

var r = function(k,v){
    return v[0];    // just go next with ticks
};

var opts = { out :  { merge : "UserAccum", db : "Metric"},
    finalize: function(k,v){
    var str = "parseInt(this._id.toString().slice(0,8), 16)*1000 <= "+v;
    return db.User.count({$where:str});         
} 
};
var res = db.Provider.mapReduce(m, r, opts); 
```

运行时，出现错误：

```
Sat May 12 17:47:23 uncaught exception: map reduce failed:{
    "assertion" : "invoke failed: JS Error: TypeError: db has no properties
nofile_b:2",
    "assertionCode" : 9004,
    "errmsg" : "db assertion failure",
    "ok" : 0
} 
```

似乎无法调用 db. finalize 里面的方法。为什么？

我知道我可以从 map() 和 reduce() 调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:01:22.093

是的，您不能在 map-reduce 函数中运行查询。它们必须只依赖于它们的输入参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T13:44:56.077

您可以在 mapreduce 函数中运行查询，只是 db 是对默认数据库的引用，而不是您正在运行的数据库。

所以你需要这样做： var fdb = db.getSiblingDB('yourdb'); var 结果 = fdb.yourcollection.find(..);

我不知道这是否是新的并且在一年前的版本中不起作用。在这种情况下，“可以”也可能与“应该”不同。

# php - PHP中的索引未定义错误？

> ID：10563514
> 
> 赞同：-1
> 
> 时间：2012-05-12T12:00:07.277
> 
> 标签：php, arrays, usps

我复制了一些我写过一段时间的 PHP 来清理地址。在原始页面中，它存在于实时网络服务器上并且运行良好。当前脚本从我的开发机器上的命令行运行。CLI 脚本总是抛出“索引未定义”错误，但索引已定义，来自以下代码：

```
$url = 'http://production.shippingapis.com/ShippingAPI.dll?API=ZipCodeLookup&XML=';
$msg = '
<ZipCodeLookupRequest USERID="xxxxxxxxxx">
<Address ID="0"><FirmName></FirmName><Address1>' . $suite . '</Address1>
<Address2>' . $street . '</Address2>
<City>' . $city . '</City><State>' . $state . '</State>
</Address></ZipCodeLookupRequest>
';

//get the response from the USPS
$newurl = $url . urlencode($msg);

// echo $newurl;

$xml    = $newurl;
$parser = xml_parser_create();

// open a file and read data
$fp      = fopen($xml, 'r');
$xmldata = fread($fp, 4096);

xml_parse_into_struct($parser, $xmldata, $values);

xml_parser_free($parser);
//echo $xmldata;
//print_r($values);

if ($values[6][tag] === 'ZIP4') {
    $street = $values[2][value];
    $city   = $values[3][value];
    $state  = $values[4][value];
    $zip5   = $values[5][value];
    $zip4   = $values[6][value];
}
else if ($values[7][tag] === 'ZIP4') {
    $suite  = $values[2][value];
    $street = $values[3][value];
    $city   = $values[4][value];
    $state  = $values[5][value];
    $zip5   = $values[6][value];
    $zip4   = $values[7][value];
}
else {
    $suite  = '';
    $street = '';
    $city   = '';
    $state  = '';
    $zip5   = '';
    $zip4   = '';
}
;

if ($values[2][tag] != 'ERROR') {
    $verifiedBlock = ("
    $suite . chr(13) . chr(10);
    $street . chr(13) . chr(10);
    $city $state $zip5 $zip4
    ");
}
else {
    $verifiedBlock = ("
    The address could not be verified
    ");
}
; 
```

如果我做一个 $values 的 print_r，我会得到这个：

```
Array (    [0] => Array
       (
           [tag] => ZIPCODELOOKUPRESPONSE
           [type] => open
           [level] => 1
       )

   [1] => Array
       (
           [tag] => ADDRESS
           [type] => open
           [level] => 2
           [attributes] => Array
               (
                   [ID] => 0
               )

       )

   [2] => Array
       (
           [tag] => ADDRESS1
           [type] => complete
           [level] => 3
           [value] => FL 7
       ) 
```

等 - 我已经确认 [6] 和 [7] 始终存在。然而，它总是在这些行和行上抛出“索引未定义”错误`if ($values[2][tag] != 'ERROR')`。

有人可以告诉我我在这里缺少什么愚蠢，明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:04:41.070

将其更改为：

```
if ($values[2]["tag"] != 'ERROR') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:06:19.010

在您的代码中，我看到`$values[2][tag]`.In 这种上下文`tag`是一个不得定义的常量。你有`tag`一个字符串的键，所以你必须将它用作字符串，例如`$values[2]['tag']`. 哦，对其他索引（键）做同样的事情。

# c# - 在 textarea 中显示编码的 HTML

> ID：10563521
> 
> 赞同：0
> 
> 时间：2012-05-12T12:00:58.750
> 
> 标签：c#, asp.net, asp.net-mvc

当我尝试在 textarea 中显示编码的 HTML 字符串时，我在 mvc 解码时遇到问题，我尝试了这个：

```
 <textarea rows="3" cols="20" style="width: 80%; height:150px; margin:10px 0px;">
      &lt;iframe allowtransparency='true'...
    </textarea> 
```

还有这个：

```
<textarea rows="3" cols="20" style="width: 80%; height:150px; margin:10px 0px;">
    @(Html.Raw("&lt;iframe allowtransparency='true'..."))
</textarea> 
```

但它仍然显示 like`<iframe allowtransparency='true'`而不是`&lt;iframe allowtransparency='true'...`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:05:42.757

尝试转义 & 符号。它看起来像

```
<textarea>
    &amp;lt;iframe ...
</textarea> 
```

# c# - 是否有一个开关来获取 SQL Server 表字段的默认值作为 FormView/DetailsView 的 TextBoxes 的默认值？

> ID：10563522
> 
> 赞同：2
> 
> 时间：2012-05-12T12:01:00.937
> 
> 标签：c#, asp.net, sql-server

我正在使用 SQL Server 2008 R2 和 VS2010 C# ASP.NET 4

FormView 和 DetailsView 在插入模式下是空的 TextBoxes。

我希望这些文本框能够反映 SQL Server 上各个列的默认值的默认值。

有没有一种简单的方法可以做到这一点？

* * *

编辑：（示例）

问题：

![在此处输入图像描述](../Images/e9a4276e4c0083836a835c5fc71868a8.png)

桌子：

```
CREATE TABLE [dbo].[SampleTable](
    [PKColumn1] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED,
    [IntColumn2] [int] NOT NULL DEFAULT (12),
    [nvarcharColumn3] [nvarchar](50) NOT NULL DEFAULT (N'bla bla'),
    [IntColumn4NoDefault] [int] NULL) 
```

aspx 标记：

```
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" 
            AutoGenerateRows="False" DataKeyNames="PKColumn1" DataSourceID="SqlDataSource1" 
            DefaultMode="Insert">
            <Fields>
                <asp:BoundField DataField="PKColumn1" HeaderText="PKColumn1" InsertVisible="False" ReadOnly="True" SortExpression="PKColumn1" />
                <asp:BoundField DataField="IntColumn2" HeaderText="IntColumn2" SortExpression="IntColumn2" />
                <asp:BoundField DataField="nvarcharColumn3" HeaderText="nvarcharColumn3" SortExpression="nvarcharColumn3" />
                <asp:BoundField DataField="IntColumn4NoDefault" 
                    HeaderText="IntColumn4NoDefault" SortExpression="IntColumn4NoDefault" />
                <asp:CommandField ShowInsertButton="True" />
            </Fields>
        </asp:DetailsView>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:dbConnectionString %>" 
            InsertCommand="INSERT INTO [SampleTable] ([IntColumn2], [nvarcharColumn3], [IntColumn4NoDefault]) VALUES (@IntColumn2, @nvarcharColumn3, @IntColumn4NoDefault)" 
            SelectCommand="SELECT * FROM [SampleTable]">
            <InsertParameters>
                <asp:Parameter Name="IntColumn2" Type="Int32" />
                <asp:Parameter Name="nvarcharColumn3" Type="String" />
                <asp:Parameter Name="IntColumn4NoDefault" Type="Int32" />
            </InsertParameters>
        </asp:SqlDataSource> 
```

后面没有 C# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:08:41.433

就在这里...

```
select  c.name, definition 
from    sys.default_constraints dc 
join    sys.columns c 
on      c.object_id = dc.parent_object_id 
        and c.column_id = dc.parent_column_id 
where   parent_object_id = object_id('mytable') 
```

一旦你得到你的结果集，你应该有列名和默认值。如果每个具有默认值的列对应 (1:1) 到一个文本框，只需将一个中继器添加到您的表单/网络表单并将“定义”绑定到文本属性。由于输出中添加了括号，您可能需要稍微修改数据，但可能是正则表达式或简单的替换可能会解决问题。

# asp.net-mvc-3 - 如何从控制器的方法在新选项卡中打开 cshtml 文件？

> ID：10563531
> 
> 赞同：10
> 
> 时间：2012-05-12T12:01:41.500
> 
> 标签：asp.net-mvc-3

我正在开发 Nopcommerce，需要生成发票（定制的不是他们已经提供的，因为它不能解决我们的目的）。我们需要使用控制器的方法在新选项卡（使用另一个 cshtml 文件）中生成发票，我也在视图上传递模型数据。

```
<tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.ProbableDeliveryDate):
        </td>
        <td class="adminData">
            @Html.EditorFor(model=>model.ProbableDeliveryDate)
        </td>
        </tr>
        <tr>
            <td>
            @if(Model.CanGenrateInvoice)
            {
                 <input type="submit" name="generateinvoice" value="@T("Admin.Orders.Fields.generateinvoice")" id="generateinvoice" class="adminButton"  />
            }
            </td>
        </tr> 
```

我必须发布数据以获取 probableDeliveryDate 的值到控制器方法，然后想在新选项卡中打开视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T12:05:27.263

如果您通过 Html.ActionLink 从第一页进入操作，您可以这样做：

```
Html.ActionLink("Open Invoice", "ActionName","ControllerName", new { id = Model.InvoiceID }, new { target = "_blank" }); 
```

指定 target = "_blank" 将在新选项卡中打开

**更新**

由于您将模型发布到控制器（我希望 RedirectToAction 可以帮助打开一个新窗口/选项卡，但事实并非如此）

我的感觉很刺痛你的流量......这只是我，但我会做一些不同的事情......比如

1.  将模型发布到控制器
2.  保存生成发票的数据
3.  将 InvoiceID 返回给操作
4.  将 InvoiceID 添加到模型
5.  将模型发送回视图
6.  通知用户
7.  发票已生成并显示一个链接 - 如上所述 - 允许用户打开发票或
8.  这提供了完美的干净解决方案来显示模型错误（如果有）

您的视图可能有一段剃刀代码可以做到这一点：

```
@{
    if(Model.InvoiceID != null && Model.InvoiceID !=0) {
        @Html.ActionLink("Open Invoice", "ActionName","ControllerName", new { id = Model.InvoiceID }, new { target = "_blank" });
    } 
} 
```

# android - LinearLayout 半透明（但不透明）

> ID：10563534
> 
> 赞同：3
> 
> 时间：2012-05-12T12:01:54.777
> 
> 标签：android, layout

我想要一个 LinearLayout 半透明（我不是说透明）。我想在我的活动中模拟一个对话框。所以我尝试了这个：

在清单中：

```
android:theme="@android:style/Theme.Translucent" 
```

在 Activity onCreate 中：

```
LinearLayout MyLayout = (LinearLayout)findViewById(R.id.MyLayout);  
MyLayout.setBackgroundColor(Color.BLACK); 
MyLayout.getBackground().setAlpha(50); 
```

但它不起作用，因为我根本看不到主桌面。任何的想法？

我也在 xml 中尝试过这个，但它也不起作用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/MyLayout"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="#22FFFFFF"
   android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:04:34.960

使用十六进制颜色代码，其中包含 alpha 的两个数字和颜色本身的六个数字，如下所示：

```
android:background="#22FFFFFF" 
```

它会使它变成半透明的。

# css - 文本未在 UL LI A 内换行

> ID：10563537
> 
> 赞同：7
> 
> 时间：2012-05-12T12:02:19.643
> 
> 标签：css, umbraco, word-wrap

我有一个 XSLT 脚本来输出一个简单的垂直菜单，但是在我的几个链接上，文本没有换行，我不知道为什么！

试图在链接中放置一个 DIV，以及一个

包含文本但无济于事。

以前有人遇到过这种问题吗？

XSLT：

```
 <xsl:template match="/">

  <xsl:variable name="items" select="$currentPage/ancestor-or-self::* [@isDoc and @level = 2]/* [@isDoc and string(umbracoNaviHide) != '1']"/>

<!-- The fun starts here -->
  <div id="subnavtitle">
  <xsl:value-of select="$currentPage/@nodeName" />
  </div>
<xsl:if test="count($items) &gt; 0">
<ul>
<xsl:for-each select="$items">
  <li>

    <xsl:if test="@id = $currentPage/@id">
        <xsl:attribute name="class">current</xsl:attribute>
      </xsl:if>
    <xsl:if test="@id = $currentPage/../@id">
        <xsl:attribute name="class">current</xsl:attribute>
      </xsl:if>
    <a href="{umbraco.library:NiceUrl(@id)}" >
      <p style="width: 100px;">
        <xsl:value-of select="translate(@nodeName,' ',' ')"/>
        </p>
    </a>

  </li>
</xsl:for-each>
</ul>
    </xsl:if>

</xsl:template> 
```

CSS：

```
#subNavigation {
  padding-top: 10px;
  padding-right: 10px;
  padding-left: 10px;
  font-weight: bold;
  font-size: 12px;
  background-size: 100% auto;
  margin: 0px;

}
#subNavigation ul {
  margin: 0;
  padding: 0;
  border: 0;
  outline: 0;
}
#subNavigation ul:after {
  content: ".";
  display: block;
  font-size: 0;
  height: 0;
  clear: both;
  visibility: hidden;
}
* html #subNavigation ul {
  zoom: 1;
}
*:first-child + html #subNavigation ul {
  zoom: 1;
}
#subNavigation ul li {
  list-style-image: none;
  list-style-type: none;
  margin-left: 0px;
  white-space: nowrap;
  display: inline;
  float: left;
    background: url(Designit_Green/images/nav.png) repeat-x;
  margin-bottom: 10px;
  width: 150px;
}

#subNavigation li.current {
  background: #FFF url(Designit_Green/images/nav-item-activeXXX.png) left top repeat-x;
}
#subNavigation li.current a:hover {
  background: #FFF url(Designit_Green/images/nav-item-activeXXX.png) left top repeat-x;
}
#subNavigation li.current a {
  color: #333;
}
#subNavigation li:last-child {
  border: none;
}
#subNavigation a:link, #subNavigation a:visited {
  padding-left: 15px;
  padding-right: 0px;
  padding-top: 10px;
  padding-bottom: 10px;
  color: #FFF;
  display: block;
  text-decoration: none;

} 
```

您可以在这里查看结果：http: [//bellstest.info/bar-restaurant.aspx](http://bellstest.info/bar-restaurant.aspx) 问题在于左侧导航。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-12T12:15:07.547

你有`white-space: nowrap;`在你的`#subNavigation ul li`，它会被你的继承`p`。

将其更改为`white-space: normal;`，或添加`white-space: normal;`到`p`or`a`应该可以解决您的问题。

# jquery - 简单的jQuery总和

> ID：10563541
> 
> 赞同：4
> 
> 时间：2012-05-12T12:02:44.323
> 
> 标签：jquery, math, sum

我有未知数量的输入字段，有“添加”类我只想用 jquery 总结这些，不知道我错在哪里。

```
<input name="add" class="add" type="text">
<input name="add" class="add" type="text">
<input name="add" class="add" type="text">
<input name="add" class="add" type="text">

<input type="button" value="" onClick="add()" /> 
```

`

```
function add(){
        val = 0;
        $(".add").each(function() {      
            str = (parseInt(this.value))
            sum=str+str
        });
        alert (sum)
    } 
```

`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T12:10:16.527

你从来没有真正将东西添加到`sum`：

```
function add() {
    var sum = 0;
    $(".add").each(function() {   
        sum += +this.value;
    });
    return sum; // an add function shouldn't really "alert"
} 
```

如果打算只支持整数，请使用`parseInt(this.value, 10)`[note the radix parameter] 而不是`+this.value`：

```
function add() {
    var sum = 0;
    $(".add").each(function() { 
        var str = this.value.trim();  // .trim() may need a shim
        if (str) {   // don't send blank values to `parseInt`
            sum += parseInt(str, 10);
        }
    });
    return sum;
} 
```

见[http://jsfiddle.net/alnitak/eHsJP/](http://jsfiddle.net/alnitak/eHsJP/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T12:05:10.493

```
function add(){
    var sum = 0;
    $(".add").each(function() {
        var val = parseInt($(this).val(), 10)
        sum += (!isNaN(val) ? val : 0);
    });
    alert(sum);
} 
```

编辑：敏锐的眼睛，得到括号...... =）还有空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T16:37:44.707

如果您不需要支持 IE8，那么您可以使用本机 Javascript`Array.prototype.reduce()`方法。您需要先将 JQuery 对象转换为数组：

```
function add() {
     return $('.add').toArray().reduce(function(sum,element) {
         return sum + Number(element.value);
     }, 0);
} 
```

参考：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)

# android - API 级别 15 上的 SurfaceView-Thread 中出现意外的 NullPointerException

> ID：10563542
> 
> 赞同：3
> 
> 时间：2012-05-12T12:02:46.997
> 
> 标签：android, multithreading, surfaceview

我编写了一个应用程序，我想在更高的 API 级别上进行测试以检查兼容性。对于 API 10 (2.3.3) 没有问题，但是当我在 API 15 (4.0.3) 上运行我的应用程序时，当我退出 Activity 时，我的一个 SurfaceViews 中出现了 NullPointerException。我不得不说我解决了这个问题，但我无法弄清楚为什么异常实际上会发生。所以也许你可以告诉我。

这是在 API 10 上为我工作的代码：它是`run()`-method 的通用结构。

```
public void run() {
    while (mThreadActive) {
        c = null;
        try {
            c = mSurfaceHolder.lockCanvas(null);
            synchronized (mSurfaceHolder) {
                if(mState == 1) {
                    updateValues();
                    updateAnimation();
                }
                doDraw(c);
            }
        } finally {
            if (c != null) {
                mSurfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

退出活动时在 API 15 上：当`doDraw()`-method 尝试在“c”上写入时发生异常。我检查了 c 并发现它是空的，所以我得到一个异常也就不足为奇了。我还检查`mThreadActive`并发现虽然我将其设置为 false，但`while`-loop 仍然会触发。这是代码示例：

```
public void run() {
    while (mThreadActive) {
        c = null;
        try {
            c = mSurfaceHolder.lockCanvas(null);
            synchronized (mSurfaceHolder) {
                if(mState == 1) {
                    updateValues();
                    updateAnimation();
                }

                if(!mThreadActive)    // so it really is!
                    Log.d("Thread", "mThreadActive is false!");

                if(c == null)   // so it is too!
                    Log.d("Thread", "c is null!");

                doDraw(c);   // error
            }
        } finally {
            if (c != null) {
                mSurfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

我可以想象为什么在被-statement`mThreadActive`检查后会变为 false ，但我无法弄清楚为什么 "c" 在. 似乎代码没有按顺序运行。`while``mSurfaceHolder.lockCanvas(null)`

好吧，解决方案将`c != null`在绘制之前进行检查：

```
public void run() {
    while (mThreadActive) {
        c = null;
        try {
            c = mSurfaceHolder.lockCanvas(null);
            synchronized (mSurfaceHolder) {
                if(mState == 1) {
                    updateValues();
                    updateAnimation();
                }
                if(c != null) // prevent drawing on c if c doesnt exist.
                    doDraw(c);
            }
        } finally {
            if (c != null) {
                mSurfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
} 
```

那么为什么我在 API 15 上得到一个异常，而它在 API 10 上运行良好？另一个有趣的事情是，我有其他结构相同的 SurfaceView，但与这个相比，它们工作得很好！为什么代码不按顺序运行？是因为我正在模拟器上进行测试（这非常滞后）吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:10:52.020

您提到尽管是错误的，您的`while()`循环似乎仍在继续。`mThreadActive`有`mThreadActive`标记`volatile`吗？它可能需要。

还有，`lockCanvas(null)`气味。由于我们看不到您的其余代码，因此尚不清楚您要做什么。API 对传递 a 有什么`null`看法`lockCanvas`？（我们是在谈论原始实例`SurfaceHolder`还是子类？）

请注意，API 规范[`SurfaceHolder.lockCanvas()`](http://developer.android.com/reference/android/view/SurfaceHolder.html#lockCanvas%28%29)表明它可以返回`null`：

> 如果尚未创建曲面或无法编辑曲面，则返回 null。您通常需要实现 Callback.surfaceCreated 以了解 Surface 何时可用。

从阅读 API 来看，您应该正在实现[`SurfaceHolder.Callback`](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html#surfaceDestroyed%28android.view.SurfaceHolder%29)接口并响应[`surfaceCreated()`](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html#surfaceCreated%28android.view.SurfaceHolder%29)事件，这实际上是告诉您已准备好写入画布的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:11:11.243

打电话时我也遇到了一个非常相似的问题：

```
public void surfaceDestroyed(SurfaceHolder holder)  {
    isAttached = false;
    this.drawthread = null;
} 
```

当退出我的应用程序以停止绘图线程时 - 我使用的 while 布尔`isAttached`值为 false，但该 while 循环中的绘图代码仍然执行 - 在退出时给出 null 异常。不是表演停止者，而是我真正想解决的问题。也在考虑一种`if (canvas != null)`解决方案，但我认为必须有更好的方法。

现在这是这个错误的奇怪之处 - 它只在某些时候发生 - 而且在更快的设备上发生得更少。我看到的问题`holder.lockCanvas()`是返回 null - 这意味着在布尔值设置为 false 之前持有者被销毁，而 while 有机会停止执行线程。线程竞争问题？

找到了一个可能的解决方案，`Thread.join()`在将 while boolean 设为 null 之前使用，但`holder.lockCanvas()`返回 null 时，持有者在绘图完成之前被销毁，所以它有点毫无意义，仍然会导致 nullexception。

我能想到的唯一其他解决方案是覆盖后退按钮方法并在销毁surfaceview（如果可以的话）之前强制while bool为null，但我认为`if (canvas != null)`可能更干净。任何其他的想法都渴望听到！

编辑：尚未在其他地方测试，但我使用 API 17 得到错误

# ipad - 如何更改 UIPopover 的锚点？PresentFromRect 对我来说不能正常工作。

> ID：10563550
> 
> 赞同：3
> 
> 时间：2012-05-12T12:03:54.543
> 
> 标签：ipad, ios5

我查看了几个选项，例如：

* [http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx) * [UIPopoverController 锚位置](https://stackoverflow.com/questions/5481653/uipopovercontroller-anchor-position) *[我可以更改 UIPopover动画锚点？](https://stackoverflow.com/questions/3299482/can-i-change-the-uipopover-animation-anchor-point)

我正在尝试在 mapview 中显示地图注释的弹出框。目前我正在使用一种解决方法。我在我的故事板视图控制器中创建了一个视图，并将我的弹出框锚定到该视图。我将视图移动到正确的位置，然后使用以下方法加载弹出框：

(a) 找到注解的位置

```
CGPoint annotationPoint = [_mapView    convertCoordinate:self.selectedAnnotationView.annotation.coordinate toPointToView:_mapView];
float boxDY= annotationPoint.y;
float boxDX= annotationPoint.x;
CGRect box = CGRectMake(boxDX,boxDY,1,1); 
```

(b) 将我在情节提要中创建的视图（anchorView）移动到注释位置

```
anchorView.frame = box; 
```

(c) 显示弹出框

```
[annotationPopoverController presentPopoverFromRect:box inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:NO]; 
```

我的直觉是不需要这种解决方法。有没有更简单、更优雅的方法来做到这一点？

谢谢， 马赫什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:51:43.003

谢谢安娜。为重复发布道歉 - Stackoverflow 标记有点麻烦。

我正在使用 segues 启动弹出框 - 因此我无法正确定位弹出框。

如果您使用 segue，我相信我使用的解决方法适用于定位弹出框。

话虽如此，我现在正在使用您的答案建议的方法。

我使用启动弹出窗口

```
self.detailsPopover = [[self storyboard] instantiateViewControllerWithIdentifier:@"identifierName"];

//... config code for the popover 

UIPopoverController *pc = [[UIPopoverController alloc] initWithContentViewController:detailsPopover];

//... store popover view controller in an ivar

[self.annotationPopoverController presentPopoverFromRect:selectedAnnotationView.bounds inView:selectedAnnotationView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:55:12.607

我使用表格和动态锚点创建了一个类似的答案。在我的解决方案中，您可以使用 segues 保留情节提要的流程。您将不得不稍微调整答案，但基本相同。

[是否可以手动执行 Popover Segue（从动态 UITableView 单元格）？](https://stackoverflow.com/questions/13845508/is-it-possible-to-perform-a-popover-segue-manually-from-dynamic-uitableview-cel/14514837#14514837)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T15:50:10.710

```
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        if let identifier = segue.identifier {
        switch identifier {
        case "popover":
            if let vc = segue.destination as? MyTemplateTableViewController, let ppc = vc.popoverPresentationController {
                ppc.permittedArrowDirections = .up
                ppc.delegate = self
// set the sourceRect and sourceView to move the anchor point
                ppc.sourceRect = ((sender as? UITextField)?.frame)!
                ppc.sourceView = sender as? UITextField

            }
            break
        default:
            break

        }
        }
    } 
```

# php - 在 PHP 中处理基本表单时出错

> ID：10563553
> 
> 赞同：0
> 
> 时间：2012-05-12T12:04:03.867
> 
> 标签：php, forms, post

问题如下：

文件 1 的名称为：**Lesson 17_Forms - Simple Form.php**
，文件 2 的名称为：**Lesson 17_Forms - Process.php**

文件1的内容如下：

```
<html>
    <title>Lesson 17_Forms - Simple Form</title>
    <head>
        <center><h1>Lesson 17_Forms - Simple Form</h1></center>
    </head>

    <body>
    <form action= "Lesson 17_Forms - Process.php" method="post">
        Username: <input type="text" name="username" value="" />
        <br />
        Password: <input type="password" name="password" value="" />
        <br />
        <input type="submit" name="submit" value="Submit" />
    </form>
    </body>
</html> 
```

文件2的内容：

```
<html>
    <title>Lesson 17_Forms - Process</title>
    <head>
        <center><h1>Lesson 17_Forms - Process</h1></center>
    </head>

    <body>
        <?php
            // Ultra-simple form processing
            // Just retrieve the value and return it to the browser

            $username = $_POST['username'];
            $password = $_POST['password'];

            echo "{$username}: {$password}";
        ?>
    </body>
</html> 
```

两个文件都在同一个目录中，当我尝试通过单击提交按钮来处理表单时，我收到以下错误：

> 找不到对象！
> 
> 在此服务器上找不到请求的 URL。引用页面上的链接似乎是错误的或过时的。请将该错误通知该页面的作者。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 
> 错误 404
> 
> 本地主机 2012 年 5 月 12 日星期六 02:40:39 PM EEST Apache/2.2.21 (Unix) DAV/2 mod_ssl/2.2.21 OpenSSL/1.0.0c PHP/5.3.8 mod_apreq2-20090110/2.7.1 mod_perl/2.0.5 Perl/v5.10.1

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:11:05.520

确保两个文件都在同一个目录中。此外，消除文件名中的任何空格，虽然有效，但它们会引起巨大的麻烦。所以命名你的文件更像：`lesson17_forms_process.php`.

此外，经过一些修改，这是我得到的代码：

```
<?php

//Initialize variables
$fields_set = false;
$username = "";
$password = "";

//Validity check
if (isset($_POST['username']) && isset($_POST['password'])) {
    $fields_set = true;
    $username = $_POST["username"];
    $password = $_POST["password"];
}

?>
<html>
<head>
    <title>Lesson 17_Forms - Process</title>
</head>

<body>
<h1 style="text-align: center;">Lesson 17_Forms - Process</h1>

<?php

//Display results if validity passed, or error in case it didn't.
if ($fields_set) {
    echo "{$username}: {$password}";
}
else {
    echo "Error! username or password not set!";
}
?>
</body>
</html> 
```

## 几点

*   在开始发送 HTML 之前，我会处理所有表单数据。尽可能分离逻辑和显示。
*   我`h1`从 中删除了元素`head`并将其放置在`body`（它所属的位置）中。所有页面内容都必须进去`body`。
*   我删除了展示元素`<center>`并用 CSS 替换了它。
*   我在处理之前验证输入。
*   如果表单无效，我会显示错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T12:14:01.533

url 中不允许有空格 -> 将名称更改为 simple_form.php 和 process.php。

或者，如果您想在名称中保留空格，则在将其用作 url 时将所有空格替换为 '%20'。

或者最好的选择是使用 urlencode -> 它会自动将所有不允许的字符替换为其 Web 可接受的占位符。

```
<form action=<?php echo '"'.urlencode("Lesson 17_Forms - Process.php").'"'; ?> method="post"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T12:11:37.893

我将使用您现有的代码，并对其进行修改。使用新文件名。我也更正了您的 HTML。

创建一个名为：**form.php**的文件，插入以下代码：

```
<html>
    <head>
        <title>Submit form</title>
    </head>

    <body>
        <center><h1>Submit form</h1></center>

        <form action="process.php" method="post">
            Username:<input type="text" name="username" value="" />
            <br />
            Password: <input type="password" name="password" value="" />
            <br />
            <input type="submit" name="submit" value="Submit" />
        </form>
    </body>
</html> 
```

创建一个名为：**process.php**的文件，插入以下代码：

```
<html>
    <head>
        <title>Your form</title>
    </head>

    <body>
        <center><h1>Lesson 17_Forms - Process</h1></center>
        <?php
            // Ultra-simple form processing
            // Just retrieve the value and return it to the browser

            $username = $_POST['username'];
            $password = $_POST['password'];

            echo "{$username}: {$password}";
        ?>
    </body>
</html> 
```

这应该可以完美地工作，记住将两个文件放在同一个文件夹中。

# matlab - 删除一行或放哨兵数据

> ID：10563559
> 
> 赞同：0
> 
> 时间：2012-05-12T12:04:50.640
> 
> 标签：matlab

我正在运行排序算法。

我有一个整数矩阵，并且我知道其中的所有整数都小于 1000。
是删除一行（使用`x(10,:) = []`）还是在行中的每个槽中放置一个无效值（例如 1001）更好？

我在这里考虑效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:14:03.560

为了比较，只需运行 tic/toc。

```
X = randn(1000);
time1 = 0;
for i= 1:100
    X = randn(1000);
    tic
    X(10,:) = [];
    a = toc;
    time1 = time1 +a;
end
time2 = 0;
for i= 1:100
    X = randn(1000);
    tic
    X(10,:) = 1001;
    a = toc;
    time2 = time2 +a;
end

disp ([time1 time2])
0.3882    0.0026 
```

判决：插入值。我猜是因为删除一行可能与重新排列矩阵有关。只要确保在排序时，你的算法只触及“非法值”一次，否则你需要做一些复杂的大 O 计算来解决你的问题

# php - 使用 facebook graph api 仅从用户墙提要中获取照片

> ID：10563568
> 
> 赞同：1
> 
> 时间：2012-05-12T12:06:16.693
> 
> 标签：php, ruby-on-rails, facebook, api, facebook-graph-api

```
https://graph.facebook.com/me/home?access_token=token 
```

将返回用户新闻提要的所有提要。但我正在寻找 type=post 或 type=photos 等过滤器

facebook api中是否提供此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:45:30.790

您可以使用参数过滤由用户的流过滤器过滤的[`home`](https://developers.facebook.com/docs/reference/api/user/#home)连接结果。例如，可以通过以下方式访问照片：[`user`](https://developers.facebook.com/docs/reference/api/user/)`filter`

```
https://graph.facebook.com/me/home?filter=app_2305272732 
```

和链接：

```
https://graph.facebook.com/me/home?filter=app_2309869772 
```

`filter`应该是下一个 FQL 查询返回的那些之一：

```
SELECT filter_key FROM stream_filter WHERE uid=me() 
```

详见[`stream_filter`](https://developers.facebook.com/docs/reference/fql/stream_filter/)表格。

**顺便说一句：**当心，并非所有东西都可以用作过滤器，例如状态（那些`/me/statuses`比 via更容易访问的状态`/me/home`）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:10:54.737

我找不到它的文档，但我只是尝试了以下网址并且它有效：

```
https://graph.facebook.com/me/home/photos?access_token=token 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:52:23.610

[对于](http://pulkitgoyal.in/2012/12/26/getting-all-photos-and-videos-from-facebook-news-feed/)`fql`任何想要使用. 这是我使用的查询。

```
SELECT actor_id, created_time, likes, post_id, attachment FROM stream WHERE filter_key IN ( SELECT filter_key FROM stream_filter WHERE uid = me() AND (name = "Photos" OR name = "Video")) 
```

# java - JVM 验证 - 何时执行？

> ID：10563569
> 
> 赞同：0
> 
> 时间：2012-05-12T12:06:19.027
> 
> 标签：java, jvm

我想知道 JVM 中的验证器究竟会在什么情况下启动并检查类。我知道一个这样的例子是当你加载类时，但有时类被加载并稍后被验证。这就是为什么我想确切地知道这种情况何时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:16:03.740

规范（§4.10）说如下：

> Java 虚拟机实现验证每个类文件在链接时满足必要的约束（第 5.4 节）。

§5.4 定义了“链接时间”的确切含义：

> 如果需要，链接一个类或接口涉及验证和准备该类或接口、其直接超类、其直接超接口及其元素类型（如果它是数组类型）。类或接口中符号引用的解析是链接的可选部分。
> 
> 该规范允许在何时发生链接活动（以及由于递归，加载）时实现灵活性，前提是维护以下所有属性：
> 
> ```
> A class or interface is completely loaded before it is linked.
> 
> A class or interface is completely verified and prepared before it is initialized.
> 
> Errors detected during linkage are thrown at a point in the program where some action is taken by the program that might, directly 
> ```
> 
> 或间接地，需要链接到错误中涉及的类或接口。
> 
> 例如，Java 虚拟机实现可以选择在使用类或接口时单独解析每个符号引用（“延迟”或“延迟”解析），或者在验证类时一次性全部解析（ “渴望”或“静态”分辨率）。这意味着在某些实现中，在初始化类或接口之后，解析过程可能会继续。无论采用哪种策略，在解析期间检测到的任何错误都必须在程序中（直接或间接）使用对类或接口的符号引用的点处抛出。

请注意，事实上，至少 Hotspot 正在按照所述进行延迟初始化（如果 JRockit 和 co 不这样做，我会感到非常惊讶）。

来源：

[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10)

[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4)

# objective-c - 使用 IBAction 从我的应用程序中打开本机 Twitter 应用程序

> ID：10563583
> 
> 赞同：4
> 
> 时间：2012-05-12T12:08:03.277
> 
> 标签：objective-c, xcode, twitter, ibaction, url-scheme

我想在我的 iOS 应用程序中实现 natvie Twitter 应用程序。我已经通过使用 URL 方案在 Facebook 上完成了这项工作。但我无法为 Twitter 找到这样的东西。

对于 Facebook，我使用：

```
-(IBAction)facebook:(id)sender {
       [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"fb://"]];
} 
```

但是当我尝试使用

```
@"Twitter" or @"twitter" or @"tw" 
```

没发生什么事。如果你们能帮助我，那就太好了。我在 Internet 上没有找到任何东西：/ 如果有类似的东西，请 :)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T12:14:29.280

你试过了吗：

```
twitter:// 
```

前任：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://user?screen_name=username"]]; 
```

# c# - 当我尝试连接到数据库时收到“错误：无法初始化 OLE”？C＃

> ID：10563585
> 
> 赞同：0
> 
> 时间：2012-05-12T12:08:20.023
> 
> 标签：c#, sql-server, database, database-connection, ole

我正在尝试通过 C# 连接到数据库，但是这样做时我收到了一条非常无用的错误消息：

> 08:44:17：错误：无法初始化 OLE 08:44:17：错误：无法初始化 OLE

我曾尝试寻找解决方案，但没有成功。我也尝试重新启动我的计算机，这也没有帮助。

我正在运行 SQL Server 2008，这是相关的数据库代码：

```
/// <summary>
/// Connects to a given database and returns the database connection.
/// </summary>
/// <param name="file">The database file name.</param>
/// <returns>The database connection.</returns>
public static SqlConnection ConnectToDb(string file)
{
    //initialize generic path
    string path = System.Reflection.Assembly.GetExecutingAssembly().Location;
    path = path.Replace("bin\\Debug\\MediaPlayer.exe", "");
    path += "Database.mdf";

    string connectionPath = @"Data Source=.\SQLEXPRESS;AttachDbFilename=" + path + ";Integrated Security=True;User Instance=True";
    SqlConnection connection = new SqlConnection(connectionPath);
    return connection;
}

/// <summary>
/// Executes a SQL query in a given database.
/// </summary>
/// <param name="file">The database file name.</param>
/// <param name="query">The SQL query to execute.</param>
public static void ExecuteQuery(string file, string query)
{

    SqlConnection connection = ConnectToDb(file);
    connection.Open();
    SqlCommand command = new SqlCommand(query, connection);
    command.ExecuteNonQuery();
    connection.Close();
} 
```

这是我用于几个项目的数据库代码，它以前一直有效。

在 ExecuteQuery 方法的 connection.Open() 行上调用错误（我知道这一点是因为我注释掉了其他行）。

任何帮助/建议将不胜感激:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:20:31.920

*我猜您的路径与Database.mdf*文件的位置不匹配。

尝试调试并查看`path`变量的实际值，您可能会发现这`Replace`不起作用，并且`path`看起来像*bin\Debug\MediaPlayer.exeDatabase.mdf*。

我建议将连接字符串放入 app.config 中，而不是通过反射找到它。

* * *

*更新*

此问题的原因可能是运行 SQL Server 的帐户权限不足，如[使用 OLE 使用 ClickOnce App 部署 SQL Express 数据库文件中](http://social.msdn.microsoft.com/Forums/en/sqlexpress/thread/6146c59a-8a85-4741-8340-1defa931482f)所述。

尝试将您的数据库文件移动到与项目调试文件夹不同的位置。

# php - JQUERY - 通过 Ajax 向 PHP 发送数组（我知道这个问题已经得到了很多处理......）

> ID：10563589
> 
> 赞同：0
> 
> 时间：2012-05-12T12:08:55.117
> 
> 标签：php, jquery, ajax, json

我想将我在 Jquery 脚本中创建的数组发送到 php 文件。我知道这个问题已经被处理了很多。不幸的是，在应用似乎是最佳实践的方法时，我无法让它发挥作用。希望有人可以帮助我理解。先感谢您。干杯。马克。在我的代码下面：

我的js：

```
// I build myArray
var myArray = new Array();
$('.someClass').each(function() {
    $this = $(this);
    myArray.push({
        'id': $this.attr('attrId')
    });
});

//...and then send it to myFile.php
var ajaxData = { myArray: JSON.stringify(myArray) };
$.ajax({
    type: "POST",
    url: "myFile.php",
    data: ajaxData,
    success: function(data) {
        $('body').append(data);
    }
});​ 
```

我的PHP：

```
$myArray = json_decode(stripslashes($_POST['myArray']));

foreach($myArray as $value){
    echo $value.'</br>';
} 
```

我得到的错误：

```
Catchable fatal error:  Object of class stdClass could not be converted to string 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:15:02.577

尝试替换此行：

```
$myArray = json_decode(stripslashes($_POST['myArray'])); 
```

有了这个：

```
$myArray = json_decode(stripslashes($_POST['myArray']), true); 
```

如果 json_decode() 的第二个参数设置为 true，则所有对象都将转换为关联数组：[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# php - 当访问者从谷歌搜索到我的网站时，我如何获得搜索词？

> ID：10563590
> 
> 赞同：4
> 
> 时间：2012-05-12T12:09:02.320
> 
> 标签：php, http-headers

当访问者在谷歌搜索中搜索一个词并来到我的网站时，我想自定义我的 index.php。前任：

```
if(visitor searches for "A" in google search)
   do somthing;
elseif(visitor searches for "B" in google search)
   do somthing else; 
```

如果我应该使用推荐人告诉我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:11:11.893

试试这个脚本：

```
function getKeywords()
{
    $refer = parse_url($_SERVER['HTTP_REFERER']);
    $host = $refer['host'];
    $refer = $refer['query'];

    if(strstr($host,'google'))
    {
        $match = preg_match('/&q=([a-zA-Z0-9+-]+)/',$refer, $output);
        $querystring = $output[0];
        $querystring = str_replace('&q=','',$querystring);
        $keywords = explode('+',$querystring);
        return $keywords;
    }
    else
    {
        return false;
    }
} 
```

注意：当有人使用加密的 Google（使用 SSL）时，这不起作用：[https ://encrypted.google.com/](https://encrypted.google.com/)

# visual-c++ - 将 CString 转换为浮点数

> ID：10563591
> 
> 赞同：-1
> 
> 时间：2012-05-12T12:09:38.063
> 
> 标签：visual-c++, mfc, floating-point, cstring

一些机构帮助我解决以下问题

```
strFixFactorSide = _T("0.5"); 
dFixFactorSide = atof((const char *)(LPCTSTR)strFixFactorSide); 
```

"dFixFactorSide" 取值为 0.0000；

我将如何获得正确的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:59:08.393

使用`_tstof()`代替`atof()`，并将 CString 转换为 LPCTSTR，并保持原样，而不是尝试将其转换为`const char *`. `const char *`在使用 unicode 并仅使用`const _TCHAR *`(LPCTSTR)时忘记(LPCSTR)。

```
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
    int nRetCode = 0;

    CString s1 = _T("123.4");
    CString s2 = _T("567.8");

    double v1 = _tstof((LPCTSTR)s1);
    double v2 = _tstof((LPCTSTR)s2);

    _tprintf(_T("%.3f"), v1 + v2);

    return nRetCode;
} 
```

并正确运行它会给出预期的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:35:07.553

我认为你`CString strFixFactorSide`是一个 Unicode (UTF-16) 字符串。

如果是，则强制`(const char *)`转换仅更改指针类型，但它指向的字符串仍保持 Unicode。

`atof()`不适用于 Unicode 字符串。如果你推`L"0.5"`入它，它将获取字节 0x30（'0'）和 0x00（也是 UTF-16 '0' 的一部分），将其视为以 NUL 结尾的 ASCII 字符串`"0"`并将其转换为 0.0。

如果`CString strFixFactorSide`是 Unicode 字符串，您需要先将其转换为 ASCII 字符串，然后应用`atof()`或使用能够将 Unicode 字符串转换为数字的函数。`_wtof()`可用于 Unicode 字符串。

# c# - 如何从字节数组中提取字节，而不是在字节边界上的位位置c#

> ID：10563592
> 
> 赞同：0
> 
> 时间：2012-05-12T12:09:48.953
> 
> 标签：c#, bit-manipulation

我在 c# 中有一个字节数组。我需要从可能不在字节边界上的位位置开始提取一定数量的字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:19:25.190

编写一个小辅助方法，它使用移位运算符来获取一个字节，例如

```
byte[] x = new[] {0x0F, 0xF0}
result = x[0] << 4 | x[1] >> 4; 
```

从第 5 位位置返回 8 位`0xFF`

您可以使用模运算符轻松更改位置`%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:32:04.227

一个字节是您可以使用 .NET 中的标准流阅读器读取的最小对齐方式

如果要读取位，则需要使用位运算符和掩码来确定位是打开 (1) 还是关闭 (0)。

但是，这意味着您可以使用布尔值 true/false 来判断字节的内容是什么。一种方法是将这些位读入布尔枚举。像这种扩展方法这样的东西可以工作：

```
public static IEnumerable<bool> BitsToBools(IEnumerable<byte> input)
{
    int readByte;
    while((readByte = input.MoveNext()) >= 0)
    {
        for(int i = 7; i >= 0; i--) // read left to right
            yield return ((readByte >> i) & 1) == 1;
    }
} 
```

如果需要，您可以向扩展方法添加 startIndex 和计数，或者从调用方法传入范围。

# xcode - 在 NSArray 集合中的多个 UILabel 上设置文本

> ID：10563593
> 
> 赞同：0
> 
> 时间：2012-05-12T12:09:53.990
> 
> 标签：xcode

我正在尝试使用相同的文本设置多个标签，并且无法为我的生活找出正确的方法。

我正在使用 ibaction 来处理一个开关，该开关将更改集合中的多个标签以说“是”或“否”，并且一直在尝试使用 for 循环和 makeobjectsperformselector withobject 方法，但到目前为止还没有运气。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:30:36.507

您可以设置 UILabel 子视图的标签来帮助您解决这个问题。如果尚未设置，请转到情节提要，单击您的标签，转到属性检查器，在“查看”下有一个标签字段。

如果标签都有不同的标签 (0,1,2...) ，下面的循环应该做你需要的：

```
for(UIView *subview in [self.view subviews] ) {
    if([subview isKindOfClass:[UILabel class]]) {

         UILabel *currentLabel = (UILabel *)[self.view viewWithTag:subview.tag];
         currentLabel.text = @"yes";            
    }
} 
```

# php - 带有动态信息的 SQL 文本框/自动填充文本框

> ID：10563594
> 
> 赞同：0
> 
> 时间：2012-05-12T12:10:04.923
> 
> 标签：php, javascript, mysql, html, sql

我正在尝试制作一个连接到我的 SQL 数据库并从表中获取信息并将其放入文本框中的网页。它获取的信息取决于输入到另一个文本框中的内容。本质上，它是信息的“自动填充”。我很好奇这是否可能。

为了更好地理解这里是文本框的布局：

```
<html>
<head>
<?php
$con = mssql_connect("abc", "123", "password");
if (!$con)
  {
  die('Could not connect: ' . mssql_get_last_message());
  }

mssql_select_db("db1", $con);

$result = mssql_query("SELECT * FROM FormData");
<head>

<title>test</title>

</head>

<body>
    <h1>test</h1>

    <form action="#">

        <p>Enter ID</p>

        <input type="text" name="ID"/> 
        <input type="text" name="NAME"/> 
        <input type="text" name="LASTNAME"/> 
        <input type ="button" value="submit" onclick="check(ID)" />

    </form>
</body> 
```

这里将在文本框中输入一个 ID，然后一旦按下提交按钮，它将从我的 sql 数据库中获取其余信息到下一个框中。我什至不知道这是否可能，我是否可以将 Javascript 与此结合使用。我进行了搜索，但在该主题上找不到太多帮助。

我什至不确定是否可以在 SQL 中执行“if”语句 - 每当我尝试时，由于语法不正确，我最终会出现 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:43:16.857

如果我理解正确，您需要做的就是在提交表单时捕获他们输入的 ID。

如果 ID 尚未提交（他们第一次点击页面，或者他们未能输入 ID），则不应执行任何查询并创建一个空白 $row 数组，如下所示：

```
$row = array("ID" => "", "NAME" => "", "LASTNAME" => ""); 
```

然后，您应该使用此数组填写表单字段`<input type="text" name="NAME" value="<?php echo $row['NAME']; ?>"/>`。

如果 ID 已提交，则在 SQL 查询中使用此 ID `"SELECT * FROM FormData WHERE ID = $_POST['ID']"`（注意：这是一个示例。您需要转义 POST 数据以防止 SQL 注入）。

然后，您需要将此结果拉入您的 $row 数组`$row = mysql_fetch_row($result)`中，然后您的字段使用该数组来填充值。

整个过程可以使用 AJAX 完成，因此您不必执行整页提交，但是根据您的示例，我提供的解决方案应该足够好。

# scala - 在 Scala 中循环的正确方法

> ID：10563595
> 
> 赞同：2
> 
> 时间：2012-05-12T12:10:12.340
> 
> 标签：scala, for-loop

[假设我在Scala](http://www.scala-lang.org/)中有一个字符串数组：

```
val strings = Array[String]("1", "2", "3", "4", "5", "6", "7") 
```

我需要的是创建一个新数组，其中的元素将作为第一个数组的每三个（任意数量）后续元素的串联获得，这应该导致`("123", "456", "7")`

作为 Scala 的新手，我编写了以下既不简洁也不有效的代码：

```
var step = 3
val strings = Array[String]("1", "2", "3", "4", "5", "6", "7")
val newStrings = collection.mutable.ArrayBuffer.empty[String]

for (i <- 0 until strings.length by step) {
  var elem = ""
  for (k <- 0 until step if i + k < strings.length) {
    elem += strings(i + k)
  }
  newStrings += elem
} 
```

这样做的Scala方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T12:15:14.833

```
strings.grouped(3).map(_.mkString).toArray 
```

或者

```
strings grouped 3 map (_.mkString) toArray 
```

我个人更喜欢第一个版本:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T12:14:39.153

```
strings grouped 3 map (_.mkString) 
```

或（为了真正得到`Array`回报）

```
(strings grouped 3 map (_.mkString)).toArray 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T12:36:25.867

...或使用*滑动*

```
val strings = Array[String]("1", "2", "3", "4", "5", "6", "7")
strings.sliding (3, 3) .map (_.mkString).toArray

res19: Array[String] = Array(123, 456, 7) 
```

滑动：你取 3，然后向前移动 3。变体：

```
scala> strings.sliding (3, 2) .map (_.mkString).toArray
res20: Array[String] = Array(123, 345, 567) 
```

取 3，但前进 2

```
scala> strings.sliding (2, 3) .map (_.mkString).toArray
res21: Array[String] = Array(12, 45, 7) 
```

取 2，前进 3（因此每隔三分之一跳过）

# objective-c - 使用从 UIImagePickerController 保存的图像进行内存管理

> ID：10563601
> 
> 赞同：9
> 
> 时间：2012-05-12T12:10:55.020
> 
> 标签：objective-c, ios, cocoa-touch, memory, uiimagepickercontroller

我正在编写一个应用程序，用户在其中为自己拍照，然后通过一系列视图使用导航控制器调整图像。如果用户使用前置摄像头拍照（在支持它的设备上设置为默认设置），这非常有效，但是当我重复该过程时，我完成了大约一半，并在抛出内存警告后崩溃。

在 Instruments 中进行分析后，我发现我的应用程序内存占用在使用较低分辨率的前置摄像头图像时保持在 20-25 MB 左右，但是当使用后置摄像头时，每次视图更改都会再增加 33 MB 左右，直到它在大约 350 MB 时崩溃（ 4S)

下面是我用来处理将照片保存到文档目录的代码，然后读取该文件位置以将图像设置为`UIImageView`. 此代码的“读取”部分通过多个视图控制器 (viewDidLoad) 循环使用，以便将我保存的图像设置为每个视图中的背景图像。

我已经删除了我所有的图像修改代码，以将其减少到试图隔离问题的最低限度，但我似乎找不到它。就目前而言，应用程序所做的只是在第一个视图中拍摄一张照片，然后将该照片用作大约 10 个视图的背景图像，并在用户浏览视图堆栈时进行分配。

现在显然更高分辨率的照片会使用更多的内存，但我不明白的是为什么低分辨率的照片似乎没有使用越来越多的内存，而高分辨率的照片却不断地使用越来越多的内存直到崩溃。

我如何保存和阅读图像：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];    
    jpgData = UIImageJPEGRepresentation(image, 1);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSString *documentsPath = [paths objectAtIndex:0];
    filePath = [documentsPath stringByAppendingPathComponent:@"image.jpeg"];
    [jpgData writeToFile:filePath atomically:YES];    

    [self dismissModalViewControllerAnimated:YES];
    [disableNextButton setEnabled:YES];

    jpgData = [NSData dataWithContentsOfFile:filePath];
    UIImage *image2 = [UIImage imageWithData:jpgData];
    [imageView setImage:image2];
} 
```

现在我知道我可以在保存图像之前尝试缩放图像，我计划接下来研究它，但我不明白为什么这不能按原样工作。也许我错误地认为 ARC 在离开堆栈顶部时会自动释放视图及其子视图。

任何人都可以解释为什么我要堆积我的设备内存吗？（希望我完全忽略了一些简单的事情）我是否设法将ARC扔出窗外？

**编辑：**我如何在其他视图中调用图像

```
- (void)loadBackground
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"image.jpeg"];
    UIImage *image = [UIImage imageWithContentsOfFile:filePath];
    [backgroundImageView setImage:image];

} 
```

我的视图控制器之间的导航是如何建立的：

![在此处输入图像描述](../Images/801e01e728a274aa703e4ea3a673858f.png)

**编辑2：**

我的基本声明是什么样的：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
@interface PhotoPickerViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    IBOutlet UIImageView *imageView;
    NSData *jpgData;
    NSString *filePath;
    UIImagePickerController *imagePicker;
    IBOutlet UIBarButtonItem *disableNextButton;
}

@end 
```

如果相关，我如何调用我的图像选择器：

```
- (void)callCameraPicker
{

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == YES)
    {
        NSLog(@"Camera is available and ready");

        imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;
        imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

        NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo]; for (AVCaptureDevice *device in devices) 
        {
            if([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0) 
            {
                imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;

            }
        }

        imagePicker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

        [self presentModalViewController:imagePicker animated:YES];

    }

    else
    {
        NSLog(@"Camera is not available");
        UIAlertView *cameraAlert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                              message:@"Your device doesn't seem to have a camera!" 
                                                             delegate:self cancelButtonTitle:@"Dismiss" 
                                                    otherButtonTitles:nil];
        [cameraAlert show];

    }
} 
```

**编辑 3：**我记录了viewDidUnload ，实际上它没有被调用，所以我现在正在调用并`loadBackground`在. 我希望这会有所帮助，但没有任何区别。`viewWillAppear``backgroundImageView``viewDidDisappear`

```
- (void)viewWillAppear:(BOOL)animated
{
    [self loadBackground];
}

- (void)viewDidDisappear:(BOOL)animated
{
    NSLog(@"ViewDidDisappear");
    backgroundImageView = nil;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T18:17:48.903

`UIImage`和之间的关系`UIImageView`不一定对每个人都直观。

`UIImage`是图像数据的高级表示 - 就显示数据而言，它没有任何作用。

`UIImageView`用于`UIImage`允许您显示图像。

没有理由为什么 的多个实例`UIImageView`不能显示相同的`UIImage`. 这是很好且高效的，因为图像数据只有一个内存表示，被多个视图共享。

您似乎正在做的是`UIImage`通过从磁盘加载它来为您的每个视图创建一个新视图。因此，在两个方面，这是一个糟糕的通用设计：一遍又一遍地实例化实际上相同的内容`UIImage`，以及反复从磁盘重新加载相同的图像数据。

您的内存问题实际上是一个单独的问题，您没有正确释放您一直加载到`UIImage`对象和`UIImageViews`.

从理论上讲，您应该能够获取第一个`UIImage`您从中获取的信息，`UIImagePickerController`然后将该引用简单地传递给您的视图，而无需从磁盘重新加载。

如果您因为更高级别的功能要求而需要从磁盘保存和重新加载（例如，因为图像正在被用户更改并且您想继续保存它），您需要确保您完全拆除了以前的`UIView`, 通过从它的视图层次结构中删除它。在视图的 dealloc 方法中设置断点以确认它正在被删除和解除分配是很有帮助的，并确保将任何`iVar`对子视图的引用（看起来你`backgroundImageView`是 iVar）设置为 nil。如果您没有正确地拆除它`backgroundImageView`，它会继续持有对`UIImage`您设置为它的 image 属性的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:44:19.113

有几件事对您发布的代码*感到好奇：*

1.  您的视图回调实现都没有调用`super`. **那很糟！**额外确保你调用了 super in `viewDidUnload`and (如果你实现了它) `didReceiveMemoryWarning`。
2.  确保`didReceiveMemoryWarning`以有意义的方式实施！
3.  您**真的**不应该一遍又一遍地重新创建该图像！我假设您没有编辑实际图像，因为您在其上使用了 JPEG 压缩——即使是 100% 质量——每次保存都会使您的图像质量下降……</li>
4.  检查您的实现，`viewDidUnload`确保将您的每个 IBOutlets 设置为`nil`.

ARC 不是 Pixie Dust™！它只是为您节省了一些打字时间，它并**没有**使您免于设计和维护您的对象图！

从您的问题中，我至少看到了这些引用您的图像的图表：

```
image 1 <- image-view 1 <- view-controller 1 <- navigation-controller <- key window <- application

image 1 <- image-view 1 <- view 1 <- view-controller 1 <- navigation-controller <- key window <- application 
```

对于每个视图控制器重复此操作，并在视图控制器、视图、图像视图和图像上进行索引移位。虽然您必须为视图控制器提供单独的视图和图像视图，但我想不出为什么您需要同一图像的多个副本。

因此，内存消耗的第一把斧头显然是不再创建相同图像数据的所有副本——我估计这将为您节省一半的内存。

接下来的事情是，如果不再引用，ARC 只能释放对象消耗的内存。

内存方面，视图并不完全是轻量级对象，当您构建一个深度导航堆栈时，您最终会得到大量的视图。

因此，您还需要取消对这些视图的任何不需要的强引用。

必须发生这种情况的*级别是视图控制器。*发生这种*情况*的最晚*时间*是在视图控制器的.*`viewDidUnload`*

 *## 为什么是视图控制器？

根据您的描述，图像本身仅由 UIImageView 引用 - 这是一个糟糕的选择，恕我直言，但我离题了……<br> `UIViewController`旨在“知道”何时需要它的视图以及何时可以安全地处理它— 这就是它实现`didReceiveMemoryWarning`and的原因`viewDidUnload`：

如果内存压力很高并且视图控制器的视图不在“屏幕上”，那么根实现`didReceiveMemoryWorning`将放开它的视图并`viewDidUnload`在之后调用它自己。

这就是为什么您**必须在***这两种方法*`super`的实现中调用 to 。

 *此外，这就是为什么如果你有强大的 IBOutlets 引用视图控制器视图的子视图，你**必须**将它们 nil ，`viewDidUnload`否则系统无法回收它们占用的内存。

它的核心`UIViewController`是一个庞大的有限状态机。所有这些“something-will/did-whatever”回调都用于在这些状态之间进行转换，并且大多数默认实现都会做一些非常重要的簿记以保持所有状态井井有条。

如果你没有在你的覆盖中调用它们，你最终会处于不一致的状态和坏事——比如这种内存不足的崩溃——发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:34:36.730

只需创建单独的文件夹并将 Capture 图像保存在其中。成功操作后，使用 nsfilemager 清除文件夹数据（或）文件夹。**

# ios - 对 uiviewcontroller 内存管理和在它们之间传递数据感到困惑

> ID：10563602
> 
> 赞同：1
> 
> 时间：2012-05-12T12:11:03.507
> 
> 标签：ios

我是 iOS 编程新手，我阅读了视图控制器编程指南，但有些事情我还不清楚

*   viewcontroller 的视图被破坏但 viewcontroller 仍然存在，没有指定我自己是否想销毁任何 viewcontroller 或者我只是错过了它。VC 指南说，当内存开始对其他资源不足时，iOS 会破坏 VC，VC 的观点也是如此，对吧？需要了解VC的内存管理，请看我的第二点。

*   在一个 uinavigationcontroller 我有一个 tableviewcontroller 显示我的朋友列表，在选择我的任何一个朋友时，我正在推动另一个聊天 VC。问题是每次选择朋友时我都必须创建一个新的聊天 VC 实例吗？对于我想与之聊天的每个朋友来说，这个聊天 VC 将如何是独一无二的？我还在数据库中保存消息，所以无论朋友窗口打开或关闭消息出现，用户都不会看到空白视图。是否有可能只有一个即时聊天 VC 用于每个朋友唯一（意味着仅特定朋友显示的消息并发送给我要与之聊天的他）。我认为这个问题与在视图控制器之间传递数据有关，但我很困惑。

我希望我已经清楚地定义了我的困惑。请忽略任何愚蠢的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:36:08.193

回答您的疑问 -

1.  视图控制器的视图被销毁但视图控制器仍然存在

根据 UIViewController 指南 - 它负责创建这些视图并在适当的时间放弃它们的所有权，包括在内存不足的情况下和视图控制器本身被释放时。

所以我们需要取得所有权来释放一个视图控制器。此外，UIViewController 类通过其 didReceiveMemoryWarning 方法提供了一些低内存条件的自动处理，该方法释放了不需要的内存。

1.  在您的场景中-

TableView -> 单击单元格推送下一个视图 -> 现在弹出此视图以返回表格视图（此处内存已释放）-> 再次在表格视图中 -> 单击单元格时推送一个新的视图控制器。

以这种方式处理内存。如果在层次结构中我们正在推送一些视图，例如 -

VC1 -> VC2 > VC3 -> VC4

现在在这种情况下，导航控制器保留所有这些视图控制器的实例，因为导航控制器为我们提供了向后移动的灵活性。一旦我们返回，视图控制器就会从堆栈中移除，分配给它的内存也会被释放。

使用的语法 -

推送视图控制器 -

```
[self.navigationController pushViewController:myViewController animated:YES];
[myViewController release];//at the time of push we add this release statement. 
```

现在，当我们执行 pop 时，会调用它的 dealloc 方法并将其从堆栈中删除。

```
[self.navigationController popViewControllerAnimated:YES];//That view is release from navigation stack 
```

希望这可以消除您的疑问。查看此开发者页面了解更多详情 - [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

# asp.net-mvc-3 - 在ajax动作+ Asp.net MVC 3中获取路由值

> ID：10563606
> 
> 赞同：0
> 
> 时间：2012-05-12T12:11:34.623
> 
> 标签：asp.net-mvc-3, c#-4.0, routing

在`Post`Controller 中，URL 是这样的：

```
 http://127.0.0.1/post/5006/some-text-for-seo-friendly
     {contoller}/{id}/{seo}

     public ViewResult Index(){
     .....
     } 
```

我`Ajax.BeginForm`在索引视图中使用并将其映射到`AddComment`同一控制器中的操作。

```
 @using (Ajax.BeginForm("AddComment", "Post", new AjaxOptions()
                   {
                      HttpMethod = "GET",
                      InsertionMode = InsertionMode.InsertAfter,
                      UpdateTargetId = "comment-container"
           }))
            {
                <textarea cols="2" rows="2" name="comment" id="comment"></textarea>
                <input type="submit" value="Add Comment" />
            } 
```

并在控制器中

```
 public PartialViewResult AddComment(string comment){
              // how can I get 5006 {id} here
    } 
```

我的问题是我怎样才能`{id} [5006]`采取`AddComment`行动。

注意：困难的方法是使用`Request.UrlReferrer`和拆分`'/'`并选择表单数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:26:29.210

您需要使用带有参数的[此重载](http://msdn.microsoft.com/en-us/library/dd470605%28v=vs.98%29.aspx)`id`向`BeginForm`方法提供 ：`routeValues`

```
@using ( Ajax.BeginForm( "AddComment", "Post",
  new { id = 5006 },
  new AjaxOptions
  {
    ... 
```

然后您应该能够将 id 作为您的操作方法的参数：

```
public PartialViewResult AddComment( int id, string comment )
{
  ... 
```

MVC 将`AddComment`使用填充的 id 值调用。

# php - tinymce 获取 html 内容并使用 php 将其放置在另一个页面上

> ID：10563612
> 
> 赞同：0
> 
> 时间：2012-05-12T12:12:04.053
> 
> 标签：php, tinymce

我正在使用 tinymce 并希望显示用户在编辑器中编写的任何内容的预览。

现在我不知道如何在 php 中获取 tinyMce 的 html 内容。我得到了内容并在其他页面上回显它们，但它们不是 html 内容（带有 html 标签）它们是简单的纯文本。这是我到目前为止所做的。

我的HTML：

```
<form action="../Profile/Profile_View.php" method="post" id="form">

        <div id="Editor"><textarea cols="123" rows="22" id="PostEditor" name="editorValue"></textarea></div>
        <div id="SubmitButtons">
           <a href="javascript:void(0)" onClick="SetPreview()" target="_blank" id="preview"><img src="../Images/PreviewButton.png" width="200" height="50"  /></a>
           <a href="#"><img src="../Images/SaveButton.png" width="200" height="50"/></a>
        </div>  
</form> 
```

SetPreview() 函数提交的脚本。

我的 PHP（在 Profile_View.php 中）：

```
 if(isset($_POST['editorValue']))
 {
   $previewValue=strip_tags(stripslashes($_POST['editorValue']));
   echo $previewValue;  
 }
 else
 {
   $previewValue="";
 } 
```

当 if 语句被执行时，它不输出 html，只输出简单的纯文本。

> 回答：

从 tinyMCE 文档中得到了答案。我没有使用导致问题的 $allowedTags 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:40:26.047

您不得在 php 文件中使用 strip_tags() 函数。

# python - python 是否正式支持在循环后重用循环变量？

> ID：10563613
> 
> 赞同：20
> 
> 时间：2012-05-12T12:12:54.613
> 
> 标签：python

以下代码是不好的做法吗？

```
for i in some_values:
    do_whatever(i)
do_more_things(i) 
```

不知何故，我觉得变量`i`应该保留在 for 循环内块的范围内。但是 python 2.7 让我在循环后重用它。

python 是否正式支持该功能，还是我在滥用该语言？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T12:27:09.817

是的，这是官方的：

```
for_stmt ::=  "for" target_list "in" expression_list ":" suite
              ["else" ":" suite]

> The target list is not deleted when the loop is finished 
```

[http://docs.python.org/reference/compound_stmts.html#for](http://docs.python.org/reference/compound_stmts.html#for)

请注意，后面的[目标列表](http://docs.python.org/reference/simple_stmts.html#grammar-token-target_list)`for`不仅仅是一个变量：

```
for some_list[blah] in...
for some_object.foo in...
for a[:n] in ...: 
```

等等。这些东西不能在循环之后简单地消失。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T12:26:06.800

如果您来自 C 或 Java 等语言，那么在范围界定方面，Python 会感觉有点特别。正如前面的回答所说，代码绝对有效，但我建议不要这样做。它创建了不是特别可读的代码，此外，如果`some_values`结果是空的，代码的最后一行将引发异常。

所以你的问题的答案是 - 是的，它是官方支持的，但在大多数情况下，它不是推荐的策略。

可以在[这里](http://mail.python.org/pipermail/python-ideas/2008-October/002109.html)找到有趣的讨论以及关于[SO](https://stackoverflow.com/questions/3611760/scoping-in-python-for-loops)的本地讨论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T15:55:37.897

您可以使用此技术扫描列表以查找符合某些条件的项目：

```
for item in iter:
    if interesting(item):
        break
else:
    raise ValueError('iter is boring.')

handle(item) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T14:02:25.250

就像@petr 说的，这听起来不自然。不是因为它是自然的，或者你必须使用它。

我宁愿有这样的东西，尽管它可能不适用于带有`break`用例的逻辑：

```
for i in some_values:
    do_whatever(i)
else:
    do_more_things(i)
```

`NameError`但是如果`some_values`评估为空，这仍然会提高，但听起来更清晰。它没有给出内部范围的清晰可读性，但缩进可能暗示了这一点。

但正如其他人所说，要回答特定的 OP 问题，是的，这是合法的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-12T12:15:22.097

这不是一个功能。在您编写时，变量仍保留在范围内。这是正常的解释器行为。

# ajax - 在MVC中使用ajax时访问Request.Url

> ID：10563614
> 
> 赞同：0
> 
> 时间：2012-05-12T12:13:29.230
> 
> 标签：ajax, asp.net-mvc

当我访问`Request.Url`在 MVC 中使用 ajax 时，url 会添加一些标签，例如：

> www.test.com/home/index/4?X-Requested-With=XMLHttpRequest

如何获取实际的 url 或如何在没有任何硬编码的情况下删除标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:18:36.567

你可以使用：

```
string url = Request.Url.AbsolutePath; // should give you /home/index/4 
```

如果你想要一个绝对网址，你可以试试：

```
var builder = new UriBuilder(Request.Url);
builder.Query = string.Empty;
string url = builder.ToString(); // should give you http://www.test.com/home/index/4 
```

# mysql - 错误代码：2013。查询期间丢失与 MySQL 服务器的连接

> ID：10563619
> 
> 赞同：350
> 
> 时间：2012-05-12T12:14:18.477
> 
> 标签：mysql, sql, database, mysql-workbench

我收到错误代码：2013。当我尝试使用 MySQL Workbench 向表添加索引时，**在查询错误期间丢失了与 MySQL 服务器的连接。**我还注意到，每当我运行长查询时它就会出现。

有没有增加超时值？

* * *

## 回答 #1

> 赞同：650
> 
> 时间：2012-10-08T22:49:13.540

新版本的 MySQL WorkBench 可以选择更改特定超时。

对我来说，它在编辑 → 首选项 → SQL 编辑器 → DBMS 连接读取超时（以秒为单位）：600

将值更改为 6000。

每次我想搜索整个数据集时，未选中的限制行都会让人厌烦。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-07-03T13:36:36.647

如果您的查询具有 blob 数据，则可以通过应用[此答案中建议](https://stackoverflow.com/a/9479681/985852)`my.ini`的更改来解决此问题：

```
[mysqld]
max_allowed_packet=16M 
```

默认情况下，这将为 1M（允许的最大值为 1024M）。如果提供的值不是 1024K 的倍数，它将自动四舍五入到最接近的 1024K 倍数。

虽然引用的线程是关于 MySQL 错误*2006*的，但将`max_allowed_packet`1M 设置为 16M*确实*修复了运行长查询时出现的 2013 错误。

*对于 WAMP 用户：您将在该`[wampmysqld]`部分中找到标志。*

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-05-12T12:17:27.523

使用命令行选项`net_read_timeout`/`wait_timeout`和合适的值（以秒为单位）启动数据库服务器 - 例如：`--net_read_timeout=100`.

有关参考，请参见[此处](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)和[此处](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-04-17T15:11:36.287

将以下内容添加到 /etc/mysql/cnf 文件中：

```
innodb_buffer_pool_size = 64M 
```

例子：

```
key_buffer              = 16M
max_allowed_packet      = 16M
thread_stack            = 192K
thread_cache_size       = 8
innodb_buffer_pool_size = 64M 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-04-20T03:58:19.997

```
SET @@local.net_read_timeout=360; 
```

警告：当您在远程连接中应用它时，以下内容将不起作用：

```
SET @@global.net_read_timeout=360; 
```

**编辑：** 360 是秒数

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-05-12T12:19:04.527

您应该将 mysql 配置文件中的“interactive_timeout”和“wait_timeout”属性设置为您需要的值。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-11-26T03:55:28.580

就我而言，将连接超时间隔设置为 6000 或更高的值不起作用。

我只是做了工作台上说我能做的事情。

> 查询从 DBMS 返回数据所需的最长时间。设置 0 以跳过读取超时。

在 Mac 首选项 -> SQL 编辑器 -> 转到 MySQL 会话 -> 将连接读取超时间隔设置为 0。

它有效

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-12-08T06:30:24.940

此错误消息有三个可能的原因

1.  通常它表示网络连接有问题，如果经常出现此错误，您应该检查网络状况
2.  有时，当作为一个或多个查询的一部分发送数百万行时，会出现“查询期间”形式。
3.  更罕见的是，当客户端尝试与服务器进行初始连接时，可能会发生这种情况

> 更多详情 [请阅读>>](https://dev.mysql.com/doc/refman/5.7/en/error-lost-connection.html)

原因 2：

```
SET GLOBAL interactive_timeout=60; 
```

*从默认的 30 秒到 60 秒或更长*

原因 3：

```
SET GLOBAL connect_timeout=60; 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-05-19T20:16:38.563

只需执行 MySQL 升级，它将重新构建 innoDB 引擎以及重建 MySQL 正常运行所需的许多表，例如`performance_schema`，`information_schema`等。

从您的 shell 发出以下命令：

```
sudo mysql_upgrade -u root -p 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-03-27T06:53:45.880

我知道它很旧，但在 Mac 上

```
1\. Control-click your connection and choose Connection Properties.
2\. Under Advanced tab, set the Socket Timeout (sec) to a larger value. 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-01-08T11:07:27.267

如果您在还原大转储文件期间遇到此问题并且可以排除它与网络有关的问题（例如在本地主机上执行），那么我的解决方案可能会有所帮助。

我的 mysqldump 至少保存了一个对于 mysql 来说太大而无法计算的 INSERT。`show variables like "net_buffer_length";`您可以通过在 mysql-cli 中键入来查看此变量。你有三种可能：

*   增加 mysql 中的 net_buffer_length -> 这需要重新启动服务器
*   创建转储`--skip-extended-insert`，每次插入使用一行 -> 虽然这些转储更易于阅读，但这不适合 > 1GB 的大转储，因为它往往非常慢
*   使用扩展插入创建转储（这是默认值），但限制 net-buffer_length 例如，`--net-buffer_length NR_OF_BYTES`其中 NR_OF_BYTES 小于服务器的 net_buffer_length -> 我认为这是最好的解决方案，虽然速度较慢，但​​不需要重新启动服务器。

我使用了以下 mysqldump 命令： `mysqldump --skip-comments --set-charset --default-character-set=utf8 --single-transaction --net-buffer_length 4096 DBX > dumpfile`

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2021-02-10T13:28:46.993

有时你的 SQL-Server 会陷入死锁，我遇到过这个问题 100 次。您可以重新启动计算机/笔记本电脑以重新启动服务器（简单方法），或者您可以转到任务管理器>服务>您的服务器名称（对我来说，它是 MySQL785 之类的）。然后右键单击>重新启动。再次尝试执行查询。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-07-24T09:59:29.290

请尝试在编辑→首选项→SQL查询中取消选中限制行

因为您应该将 mysql 配置文件中的“interactive_timeout”和“wait_timeout”属性设置为您需要的值。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-04-21T09:25:34.317

在 Edit->Preferences->SQL editor->MySQL session 中更改“读取超时”时间

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-09-08T06:19:47.260

加载 .csv 文件时我遇到了同样的问题。将文件转换为 .sql。

使用以下命令，我设法解决了这个问题。

```
mysql -u <user> -p -D <DB name> < file.sql 
```

希望这会有所帮助。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-09-01T02:50:16.443

转到工作台编辑 → 首选项 → SQL 编辑器 → DBMS 连接读取超时：最多 3000。不再发生错误。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-01-05T18:46:38.710

如果此处的所有其他解决方案都失败 - 检查您的系统日志（/var/log/syslog 或类似的）以查看您的服务器在查询期间是否内存不足。

在没有配置交换文件的情况下将 innodb_buffer_pool_size 设置得太接近物理内存时出现此问题。[MySQL 建议数据库特定服务器设置 innodb_buffer_pool_size 最大为物理内存的 80% 左右](https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)，我将其设置为 90% 左右，内核正在杀死 mysql 进程。将 innodb_buffer_pool_size 移回 80% 左右，这解决了问题。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-02-26T15:35:04.390

这发生在我身上，因为我的 innodb_buffer_pool_size 设置为大于服务器上可用的 RAM 大小。事情因此而中断，并发出此错误。修复方法是使用正确的 innodb_buffer_pool_size 设置更新 my.cnf。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-12-23T07:22:30.237

我遇到了同样的问题。我相信当你有更大表的外键时会发生这种情况（这需要时间）。

我尝试在没有外键声明的情况下再次运行 create table 语句，发现它有效。

然后在创建表之后，我使用 ALTER TABLE 查询添加了外键约束。

希望这会对某人有所帮助。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-05-05T13:23:47.980

去：

编辑 -> 首选项 -> SQL 编辑器

在那里，您可以看到“MySQL Session”组中的三个字段，您现在可以在其中设置新的连接间隔（以秒为单位）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-09-22T03:58:20.037

首先检查**索引**是否到位。

```
SELECT *
FROM INFORMATION_SCHEMA.STATISTICS
WHERE TABLE_SCHEMA = '<schema>' 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-06-25T08:21:39.950

如果您使用的是 SQL Work Bench，您可以尝试使用索引，通过向表添加索引来添加索引，单击表上的扳手（扳手）符号，它应该打开表的设置，如下，单击索引视图，键入索引名称并将类型设置为索引，在索引列中，选择表中的主列。

对其他表上的其他主键执行相同的步骤。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-05-06T17:36:16.490

对于那些使用 SSH 连接到他们的 MySQL 数据库的人来说，这里似乎缺少一个答案。您需要检查两个地方，而不是其他答案所建议的 1：

*工作台编辑 → 首选项 → SQL 编辑器 → DBMS*

*工作台编辑 → 首选项 → SSH → 超时*

我的默认 SSH 超时设置非常低，导致我的一些（但显然不是全部）超时问题。之后，别忘了重启 MySQL Workbench！

最后，可能值得联系您的数据库管理员并要求他们通过 my.conf + mysql restart 增加 mysql 本身的 wait_timeout 和 interactive_timeout 属性，或者如果无法重新启动 mysql 则进行全局设置。

希望这可以帮助！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-05-11T15:38:48.740

原来我们的防火墙规则阻止了我与 MYSQL 的连接。在解除防火墙策略以允许连接后，我能够成功导入架构。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-01-23T19:29:54.200

由于升级 Mysql 后出现问题，我收到此错误消息。在我尝试进行任何查询后**立即**出现错误

检查路径中的mysql错误日志文件`/var/log/mysql`（linux）

在我的情况下，将 Mysql 所有者重新分配给 Mysql 系统文件夹对我有用

```
chown -R mysql:mysql /var/lib/mysql 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-12-19T21:19:35.317

我在运行存储过程时遇到了这个问题——它在数据库中的表中创建了很多行。我可以在时间超过 30 秒边界后立即看到错误。

我尝试了其他答案中的所有建议。我确信其中一些有所帮助，但是真正使它对我有用的是从 Workbench 切换到 SequelPro。

我猜这是我在 Workbench 中找不到的一些客户端连接。也许这也会对其他人有所帮助？

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-08-31T17:35:43.897

我遇到了同样的问题 - 但对我来说，解决方案是权限过于严格的数据库用户。我不得不让这个`Execute`能力摆在`mysql`桌面上。在允许之后，我没有断开连接了

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-29T05:32:48.833

首先建立连接 `mysql --host=host.com --port=3306 -u username -p` ，然后选择您的数据库`use dbname` ，然后选择源哑`source C:\dumpfile.sql`。完成后`\q`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-09-22T16:10:49.680

要遵循并确保三件事：

1.  多个查询是否显示失去连接？
2.  你如何在 MySQL 中使用 set 查询？
3.  如何同时删除+更新查询？

答案：

1.  始终尝试删除定义器，因为 MySQL 创建了自己的定义器，并且如果涉及更新的多个表尝试进行单个查询，因为有时多个查询显示连接丢失
2.  如果其条件不涉及 SET 值，则始终在顶部设置值，但在 DELETE 之后。
3.  如果这两个操作都在不同的表上执行，请先使用删除然后更新

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-11-26T07:13:23.350

我的观察——

当您一起运行 MySQL Workbench 和终端并在终端中运行时-

`SET AUTOCOMMIT = 0;`

或者

`START TRANSACTION;`

那么你通常会遇到这种问题。

甚至在之后——

`SET AUTOCOMMIT = 1;`

或者

`COMMIT;`

问题仍然存在。

您需要从终端和 MYSQL 工作台注销，然后再次登录，否则重新启动。

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2016-07-21T04:30:16.290

检查一下

```
OOM on /var/log/messages ,
modify innodb_buffer_pool_size value ; when load data , use 50% of os mem ; 
```

希望这可以帮助

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2016-08-03T10:34:55.490

这通常意味着您“与 MySQL 服务器的当前版本不兼容”，请参阅 mysql_upgrade。我遇到了同样的问题，只需要运行：

mysql_upgrade --password 文档指出，“每次升级 MySQL 时都应该执行 mysql_upgrade”。

# java - 从服务器端为特定网站打开的所有浏览器之间的通信

> ID：10563623
> 
> 赞同：1
> 
> 时间：2012-05-12T12:14:36.690
> 
> 标签：java, sockets, jakarta-ee

![图表](../Images/2eddbe412e26add87b0a75fc0f2ab520.png)

如图所示，如果 client1 向服务器发送了一些信息，并且在另一端 client2、client3、client4 也打开了 client1 对其进行更改的同一页面，我想将这些更改显示给同一页面上的所有用户。

我们可以做到以下几点：

*   每隔一段时间调用服务器
*   节点.js

我正在使用 Java，这可以使用套接字来完成吗？

我的想法是，client2、client3、client4 将通过某种通知接收 client1 的更改，然后他们才会调用服务器以获取所需的更改。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:22:22.793

看看 akka -> akka 提供了使用 Java 构建异步应用程序的能力。是的，您可以使用 websockets+akka 为这个问题制定一个非常有效的解决方案。

您可以在 Play Framework 的示例应用程序 (websocket-chat) 中找到如何执行此操作的示例，它使用 akka+websockets 来制作异步聊天应用程序。

# eclipse - 文件上传中的编译错误

> ID：10563625
> 
> 赞同：0
> 
> 时间：2012-05-12T12:14:41.650
> 
> 标签：eclipse, parsing, exception, file-upload, file-io

```
List<?> items =upload.parseRequest(request); 
```

DiskFileUpload 类型中的方法 parseRequest(HttpServletRequest, int, long, String) 不适用于参数 (HttpServletRequest)

* * *

当我作为服务器运行时...它在控制台上给出错误

> 2012 年 5 月 13 日晚上 7:47:49 org.apache.tomcat.util.digester.Digester startElement 严重：开始事件抛出错误 java.lang.NoSuchMethodError: org.apache.tomcat.util.ExceptionUtils.unwrapInvocationTargetException(Ljava/lang/ Throwable;)Ljava/lang/Throwable; 在 org.apache.catalina.core.AprLifecycleListener.init(AprLifecycleListener.java:185) 在 org.apache.catalina.core.AprLifecycleListener.isAprAvailable(AprLifecycleListener.java:84) 在 org.apache.catalina.connector.Connector.setProtocol (Connector.java:577) 在 org.apache.catalina.connector.Connector.(Connector.java:69) 在 org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:62) 在 org.apache.tomcat .util.digester.Digester.startElement(Digester.java:1356) 在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser。
> 
> java.lang.NoSuchMethodError: org.apache.tomcat.util.ExceptionUtils.unwrapInvocationTargetException(Ljava/lang/Throwable;)Ljava/lang/Throwable; 在 org.apache.catalina.core.AprLifecycleListener.init(AprLifecycleListener.java:185) 在 org.apache.catalina.core.AprLifecycleListener.isAprAvailable(AprLifecycleListener.java:84) 在 org.apache.catalina.connector.Connector.setProtocol (Connector.java:577) 在 org.apache.catalina.connector.Connector.(Connector.java:69) 在 org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:62) 在 org.apache.tomcat .util.digester.Digester.startElement(Digester.java:1356) 在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506) 在 com.sun.org.apache.xerces .internal.parsers.AbstractXMLDocumentParser。

* * *

这是我在此代码中的代码 `List<?> items =upload.parseRequest(request);`错误为 DiskFileUpload 类型中的方法 parseRequest(HttpServletRequest, int, long, String) 不适用于参数 (HttpServletRequest)

```
package br.com.ecommerce.servlet;

import java.io.File;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.tomcat.util.http.fileupload.disk.*;
import org.apache.tomcat.util.http.fileupload.servlet.*;
import org.apache.tomcat.util.http.fileupload.util.*;

import org.apache.tomcat.util.http.fileupload.DiskFileUpload;
import org.apache.tomcat.util.http.fileupload.FileItem;
import org.apache.tomcat.util.http.fileupload.FileUpload;
import org.apache.tomcat.util.http.fileupload.FileUploadException;
import org.apache.tomcat.util.http.fileupload.RequestContext;

import br.com.ecommerce.bean.Produtos;
import br.com.ecommerce.controller.ExceptionController;
import br.com.ecommerce.dao.CategoriasDao;
import br.com.ecommerce.dao.ProdutosDao;
 class UploadServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    public UploadServlet() {
        super();

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/plain");
        Produtos produto = new Produtos();

        String caminhoTemp = new String("C:\\Users\\vaio\\workspace\\ecommerce\\WebContent\\images\\upload");
        String pasta = new String("C:\\Users\\vaio\\workspace\\ecommerce\\WebContent\\images\\upload");
        String caminho = new String("images\\upload\\");

        if (ServletFileUpload.isMultipartContent( request)){

            DiskFileUpload upload = new DiskFileUpload();

            upload.setRepositoryPath(caminhoTemp);

            try{
    List<?> items =upload.parseRequest(request);//In this line i got error..why?..Pls help

                Iterator<?> iter = items.iterator();

                while (iter.hasNext()) {

                    FileItem item = (FileItem) iter.next();

                    if(item.isFormField()){  

                        if(item.getFieldName().equals("nome")){  
                            produto.setProdNome(item.getString().toUpperCase());
                        }

                        else if (item.getFieldName().equals("categoria")){
                            produto.setCategorias(new CategoriasDao().findByPK(Integer.valueOf(item.getString())));
                        }

                        else if (item.getFieldName().equals("preco")){
                            produto.setPreco(Double.valueOf(item.getString()));

                            Double preco = 0d;
                            preco = Double.valueOf(item.getString());
                            preco += 10.00;
                            System.out.println(preco);
                        }

                        else if (item.getFieldName().equals("descp")){
                            produto.setDescPeq(item.getString());
                        }

                        else if (item.getFieldName().equals("descg")){
                            produto.setDescGd(item.getString());
                        }

                        else if (item.getFieldName().equals("espec")){
                            produto.setEspecificacoes(item.getString());
                        }

                        else if (item.getFieldName().equals("itens")){
                            produto.setItensInclusos(item.getString());
                        }

                        produto.setPromocao(0);
                        produto.setDestaque(0);
                }   

                if (!item.isFormField()) {

                    String nome = item.getName().toString();
                    String nomeArquivo = nome.substring(nome.lastIndexOf("\\")+1);

                    File arquivo = new File(pasta + "\\" + nomeArquivo);

                    produto.setImagem(caminho + nomeArquivo);

                    item.write(arquivo);

                }
            }

            }catch(FileUploadException e){

                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
            }

            try {
                new ProdutosDao().insert(produto);

            } catch (ExceptionController e) {
                e.printStackTrace();
            }

        response.sendRedirect("/ecommerce/admin/gerenciarProdutos.jsp");

    }

}
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:22:42.707

您是否尝试使用[Commons FileUpload中的](http://commons.apache.org/fileupload/)[DiskFileUpload](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/DiskFileUpload.html)类？如果是这样，请确保您的类正在导入，而不是其他名为.`org.apache.commons.fileupload.DiskFileUpload``DiskFileUpload`

# windows - 有没有办法只允许现有 win 应用程序的一个实例？

> ID：10563634
> 
> 赞同：0
> 
> 时间：2012-05-12T12:15:30.073
> 
> 标签：windows

是否可以只允许任何 Windows 应用程序的一个实例？如果是，如何？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:27:04.210

您可以创建一个[命名的 mutex](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)。在应用程序启动时，通常是 WinMain() 函数，如果您成功拥有互斥锁，则意味着该实例是第一个实例，否则您可以标记错误或使用其他方式激活第一个应用程序。

```
HANDLE hMutex = CreateMutex(NULL, FALSE, "MY_MUTEX_123_UNIQUE_STRING");
if (ERROR_ALREADY_EXISTS == GetLastError())
    std::cout<<"This is not the first instance\n";
else
    std::cout<<"This is first instance\n"; 
```

# linux - 使用 kprobes 获取函数参数

> ID：10563635
> 
> 赞同：9
> 
> 时间：2012-05-12T12:15:32.057
> 
> 标签：linux, debugging, assembly, kernel

我在一个函数上放了一个 kprobe，现在我需要在 kprobe 的 prehandler 函数中获取它的参数值。

这是我的功能：

```
void foobar(int arg, int arg2, int arg3, int arg4, int arg5, int arg6, int arg7, int arg8)
{
    printk("foobar called\n");
} 
```

将 kprobe 放在上面并调用该函数：

```
...
kp.addr = (kprobe_opcode_t *) foobar;
register_kprobe(&kp);

foobar(0xdead1, 0xdead2, 0xdead3, 0xdead4, 0xdead5, 0xdead6, 0xdead7, 0xdead8); 
```

最后是预处理函数（取自[这里](http://www-users.cs.umn.edu/~boutcher/kprobes/)）：

```
static int inst_generic_make_request(struct kprobe *p, struct pt_regs *regs)
{
  printk(KERN_INFO "eax: %08lx   ebx: %08lx   ecx: %08lx   edx: %08lx\n",
    regs->ax, regs->bx, regs->cx, regs->dx);
    printk(KERN_INFO "esi: %08lx   edi: %08lx   ebp: %08lx   esp: %08lx\n",
      regs->si, regs->di, regs->bp, regs->sp);
    regs++;
    //...
} 
```

prehandler 函数的输出如下所示（我将`regs`指针递增 3 次）

```
May 10 22:58:07 kernel: [  402.640994] eax: 000dead1   ebx: f7d80086   ecx: 000dead3   edx: 000dead2
May 10 22:58:07 kernel: [  402.640996] esi: 00000000   edi: b77c8040   ebp: 00000000   esp: f7d8006c

May 10 22:58:07 kernel: [  402.641006] eax: f7d8032c   ebx: 000dead5   ecx: 000dead6   edx: 000dead7
May 10 22:58:07 kernel: [  402.641007] esi: 000dead8   edi: f7d800e0   ebp: f7d80330   esp: 08049674

May 10 22:58:07 kernel: [  402.641014] eax: 00000080   ebx: 0992b018   ecx: 0000108e   edx: 0992b008
May 10 22:58:07 kernel: [  402.641015] esi: 08049674   edi: b77c8040   ebp: bfe23fb8   esp: bfe23f50 
```

`foobar`现在我可以在各种寄存器中看到函数的参数（但是在哪里`0xdead4`？），它们不应该在堆栈中吗？如何从 prehandler 函数访问堆栈？或者如何在不知道它们的类型和计数的情况下获取任何函数的参数？我知道这可能不是一件容易的事（甚至不可能获得所有值），但只有近似值就足够了。我正在计算两个函数的参数之间的相关性，我真的不需要确切的值。如果我有调用函数的汇编代码，其中参数被推到堆栈上会有所帮助吗）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T19:32:52.927

至少有两种方法。

# 方法一：Jprobes

可能是最简单的一个：如果*Jprobes*适合您的任务，您可以尝试一下。它们是 kprobes 的近亲（请参阅它们的详细描述和[内核文档](http://www.mjmwired.net/kernel/Documentation/kprobes.txt)中的示例链接）。

Jprobes 允许在进入后者时使用与被探测函数相同的签名调用您的函数。您可以通过这种方式自动获得所有参数。

# 方法 2：寄存器和堆栈

另一种方法可能是扩展您已经做的事情并从寄存器和堆栈中检索参数。从您问题的输出日志中，我假设您正在使用 32 位 x86 系统。

## x86, 32 位

据我所知，在 x86 上的 Linux 内核中传递参数有两种最常见的约定（详细信息可在[Agner Fog 的手册中找到](http://www.agner.org/optimize/calling_conventions.pdf)）。请注意，系统调用遵循其他约定（有关详细信息，请参阅[手册](http://www.agner.org/optimize/calling_conventions.pdf)），但我假设您对分析“普通”函数而不是系统调用感兴趣。

### 公约 1

对于标记`asmlinkage`为 的函数以及具有可变参数列表的函数，所有参数都在堆栈上传递。函数的返回地址应该在函数入口的栈顶，第一个参数位于它的正下方。第二个参数低于第一个参数，依此类推。

由于您保存了 的值`esp`，因此您可以找到它所指向的内容。`*(esp+4)`应该是第一个参数，`*(esp+8)`- 如果使用此约定，则为第二个等。

### 公约 2

它似乎用于大多数内核功能，包括您在问题中提到的那个。

内核是用 编译的`-mregparm=3`，因此前 3 个参数被传入`eax`，`edx`并且`ecx`，按照这个顺序，其余的进入堆栈。`*(esp+4)`应该是第四个参数，`*(esp+8)`-第五个，依此类推。

## x86, 64位

似乎 x86-64 上的事情要简单一些。大多数内核函数（包括具有可变参数列表的那些）按顺序获取`rdi`, `rsi`, `rdx`, `rcx`, `r8`,`r9`中的前 6 个参数，其余的进入堆栈。`*(esp+8)`应该是第 7 个参数，`*(esp+16)`- 第 8 个，依此类推。

**编辑：**

请注意，在 x86-32 上，`esp`不会`pt_regs`为内核模式陷阱（包括 KProbe 所依赖的软件断点）保存 的值。[<asm/ptrace.h>](http://lxr.free-electrons.com/source/arch/x86/include/asm/ptrace.h)提供 `kernel_stack_pointer()`了检索正确值的函数`esp`，它适用于 x86-32 和 x86-64。有关详细信息，请参阅该`kernel_stack_pointer()`头文件中的描述。

此外，`regs_get_kernel_stack_nth()`（也在该标头中定义）提供了一种在处理程序中获取堆栈内容的便捷方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:22:28.643

据我所知，分析汇编代码和查找函数参数将是一项艰巨的任务，尤其是在 Linux 内核代码的情况下。找出函数参数的方法之一是使用调试信息。让我一步一步来。

1) 使用调试信息（-g 选项）构建您的内核或模块，例如，假设我已经构建了一个名为“test.ko”的带有调试信息的模块。

2) 使用 readelf 命令解码调试信息。像这样：

```
 $readelf debug-dump=info test.ko > log.info 
```

在这里，我将 readelf 输出重定向到 log.info 文件。

3) 现在打开 log.info 并搜索您要查找函数参数的函数，在我们的例子中，假设为 'foobar()'。函数 foobar() 将有一个带有 TAG DW_TAG_subprogram 的 Dwarf 条目。在这个 TAG 之后，您会发现其他一些带有函数参数名称的 dwarf 条目。在此条目中，您将找到调用函数时这些函数参数的位置。例如，它说第一个参数“arg”将在 ebx 寄存器中，第二个参数将在 esp+8 中，第三个参数将在 ecx 寄存器中，依此类推。

4) 获得这些信息后，在您的 kprobe 预处理程序中打印所有寄存器。并且还打印堆栈数据，你可以打印你知道预处理器中的 esp 寄存器。

5) 根据您在第三步中获得的信息搜索参数值。

# delphi - TClientDataSet 错误“尝试修改只读字段”

> ID：10563640
> 
> 赞同：1
> 
> 时间：2012-05-12T12:16:18.647
> 
> 标签：delphi, ado, tclientdataset, tdatasetprovider

我使用下一个链

```
TADOQuerry->TDataSetProvider->TClientDataSet 
```

获取 Items 和 ItemType 表的数据并离线使用。项 TADOQuery 的 SQL 属性包含一个简单的查询

```
select i.ID,i.Name, i.TypeID, i.Qnty, i.Price, it.TypeName 
from Items i join ItemType it on (it.ID = i.TypeID) 
```

ItemType 更简单：

```
select * from ItemType 
```

现在 - 对于 cdsItems，我将 TypeName 字段修改为查找字段并将其链接到 cdsItemType - 没什么不寻常的 - 并将 cdsItems 绑定到网格。但是当我尝试通过在网格中使用组合框来修改数据时 - 它会引发错误“尝试修改只读字段”。

我设置为 TCliendDataSet ReanOnly:= false 的所有字段。此外，在我将数据输入 TClientDataSets 之后 - 使用 for - 我再次将所有字段设置为 ReadOnly:=False。但即便如此，我仍然得到“尝试修改只读字段”。

使用的数据库是 MS SQL Server 2005 Express 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:11:56.573

**成立！！！！**

该错误位于 GetItems 查询（ADOQuery 类型）的 TypeID 列的类型中 - 当我将所有字段加载到其中时 - 添加为 TAutoIncField 的 TypeID - 当我将其更改为 TIntegerField 时 - 一切顺利。

# c++ - 在 C++ 中将无符号字符转换为 int

> ID：10563642
> 
> 赞同：15
> 
> 时间：2012-05-12T12:17:14.103
> 
> 标签：c++, casting, unsigned

我有一个变量 unsigned char 包含一个值，例如 40。我想要一个 int 变量来获取该值。最简单和最有效的方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T12:19:05.257

```
unsigned char c = 40;
int i = c; 
```

想必您的问题还不止这些……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-16T11:00:05.740

尝试以下方法之一，它对我有用。如果您需要更具体的演员表，您可以查看 Boost 的**lexical_cast**和**reinterpret_cast**。

```
unsigned char c = 40;
int i = static_cast<int>(c);
std::cout << i << std::endl; 
```

或者：

```
unsigned char c = 40;
int i = (int)(c);
std::cout << i << std::endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T12:26:41.520

实际上，这是一个隐式转换。这意味着您的值会自动转换，因为它不会溢出或下溢。

这是一个例子：

```
unsigned char a = 'A';
doSomething(a); // Implicit cast

double b = 3.14;
doSomething((int)b); // Explicit cast neccesary!

void doSomething(int x)
{
...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T12:21:39.840

[谷歌](http://google.com)通常是一个有用的工具，但答案非常简单：

```
unsigned char a = 'A'
int b = a 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-04T17:26:45.183

取决于你想做什么：

要将值读取为 ascii 代码，您可以编写

```
char a = 'a';
int ia = (int)a; 
/* note that the int cast is not necessary -- int ia = a would suffice */ 
```

转换字符 '0' -> 0, '1' -> 1 等，你可以写

```
char a = '4';
int ia = a - '0';
/* check here if ia is bounded by 0 and 9 */ 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-12T12:25:52.947

```
char *a="40";
int i= a; 
```

'a' 中的值将是 ASCII 值 40（不会是 40）。

而是尝试使用 stdlib.h 中定义的 strtol() 函数

请小心，因为此函数用于字符串。这对角色不起作用

# node.js - 如何使用 Express.js 指定 HTTP 错误代码？

> ID：10563644
> 
> 赞同：213
> 
> 时间：2012-05-12T12:17:28.833
> 
> 标签：node.js, express, http-status-codes

我试过了：

```
app.get('/', function(req, res, next) {
    var e = new Error('error message');
    e.status = 400;
    next(e);
}); 
```

和：

```
app.get('/', function(req, res, next) {
    res.statusCode = 400;
    var e = new Error('error message');
    next(e);
}); 
```

但总是会宣布错误代码 500。

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2014-04-30T17:19:51.927

根据 Express（版本 4+）文档，您可以使用：

```
res.status(400);
res.send('None shall pass'); 
```

[http://expressjs.com/4x/api.html#res.status](http://expressjs.com/4x/api.html#res.status)

<=3.8

```
res.statusCode = 401;
res.send('None shall pass'); 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2015-02-16T18:18:47.313

一个简单的班轮；

```
res.status(404).send("Oh uh, something went wrong"); 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-09-24T11:38:17.473

我想以这种方式集中创建错误响应：

```
app.get('/test', function(req, res){
  throw {status: 500, message: 'detailed message'};
});

app.use(function (err, req, res, next) {
  res.status(err.status || 500).json({status: err.status, message: err.message})
}); 
```

所以我总是有相同的错误输出格式。

PS：当然，您可以创建一个对象来[扩展标准错误](https://gist.github.com/justmoon/15511f92e5216fa2624b)，如下所示：

```
const AppError = require('./lib/app-error');
app.get('/test', function(req, res){
  throw new AppError('Detail Message', 500)
}); 
```

* * *

```
'use strict';

module.exports = function AppError(message, httpStatus) {
  Error.captureStackTrace(this, this.constructor);
  this.name = this.constructor.name;
  this.message = message;
  this.status = httpStatus;
};

require('util').inherits(module.exports, Error); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-12T13:42:15.183

你可以`res.send('OMG :(', 404);`只使用`res.send(404);`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-02-21T14:27:37.763

在 express 4.0 中，他们做对了 :)

```
res.sendStatus(statusCode)
// Sets the response HTTP status code to statusCode and send its string representation as the response body.

res.sendStatus(200); // equivalent to res.status(200).send('OK')
res.sendStatus(403); // equivalent to res.status(403).send('Forbidden')
res.sendStatus(404); // equivalent to res.status(404).send('Not Found')
res.sendStatus(500); // equivalent to res.status(500).send('Internal Server Error')

//If an unsupported status code is specified, the HTTP status is still set to statusCode and the string version of the code is sent as the response body.

res.sendStatus(2000); // equivalent to res.status(2000).send('2000') 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-11-11T15:00:17.267

从我在 Express 4.0 中看到的情况来看，这对我有用。这是需要身份验证的中间件的示例。

```
function apiDemandLoggedIn(req, res, next) {

    // if user is authenticated in the session, carry on
    console.log('isAuth', req.isAuthenticated(), req.user);
    if (req.isAuthenticated())
        return next();

    // If not return 401 response which means unauthroized.
    var err = new Error();
    err.status = 401;
    next(err);
} 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-08-10T02:02:28.767

errorHandler 中间件的版本与 express 的某些（可能是旧的？）版本捆绑在一起似乎具有硬编码的状态代码。此处记录的版本：[http://www.senchalabs.org/connect/errorHandler.html](http://www.senchalabs.org/connect/errorHandler.html)另一方面，您可以做您想做的事情。因此，也许尝试升级到最新版本的 express/connect。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-09-24T15:25:47.857

老问题，但仍然出现在谷歌上。在当前版本的 Express (3.4.0) 中，您可以在调用 next(err) 之前更改 res.statusCode：

```
res.statusCode = 404;
next(new Error('File not found')); 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-08-24T17:53:20.030

我试过

```
res.status(400);
res.send('message'); 
```

..但它给了我**错误**：

> （节点：208）UnhandledPromiseRejectionWarning：错误：发送后无法设置标头。

这对我有用

```
res.status(400).send(yourMessage); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-12-24T12:34:32.400

快递已弃用`res.send(body, status)`。

`res.status(status).send(body)`改为使用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-25T23:41:26.337

我建议使用[Boom](https://github.com/hapijs/boom)包处理发送 http 错误代码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-03T00:05:31.347

异步方式：

```
 myNodeJs.processAsync(pays)
        .then((result) => {
            myLog.logger.info('API 200 OK');
            res.statusCode = 200;
            res.json(result);
            myLog.logger.response(result);
        })
        .fail((error) => {
            if (error instanceof myTypes.types.MyError) {
                log.logger.info(`My Custom Error:${error.toString()}`);
                res.statusCode = 400;
                res.json(error);
            } else {
                log.logger.error(error);
                res.statusCode = 500;
                // it seems standard errors do not go properly into json by themselves
                res.json({
                    name: error.name,
                    message: error.message
                });
            }
            log.logger.response(error);
        })
        .done(); 
```

# android - 如何在 Eclipse 中导入两个相同的 android 应用程序 .. ？重命名包名称还是什么？

> ID：10563646
> 
> 赞同：1
> 
> 时间：2012-05-12T12:17:56.347
> 
> 标签：android

我和我的朋友开始在 android 上构建我们的第一个应用程序。我们从一台笔记本电脑开始，然后也将项目复制到另一台笔记本电脑。现在我们开始分别在 android 上做我们的部分。现在我必须将工作合并到一个应用程序中，因此当我尝试将另一个项目导入我的工作区时，它显示“某些项目无法导入，因为它们已经存在于工作区中”我也尝试更改我的包名称。但即使在那之后，同样的警告也来了。该怎么办？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:21:01.707

您需要设置某种带有版本控制的存储库，然后你们俩都可以签出代码，对其进行处理并重新签入。版本控制系统将跟踪所有内容，为您执行合并和标记冲突。

[关于修订控制](http://en.wikipedia.org/wiki/Revision_control)的一些信息

以及各种[软件的列表](http://en.wikipedia.org/wiki/List_of_revision_control_software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:31:58.677

如果你不想做版本控制，你可以使用 diff 程序来比较两个文件并合并差异。将其设置为比较，对“您的”副本进行更改，您应该可以开始了。

我以前使用 ExamDiff 取得了巨大的成功（他们有一个非常有用的免费版本）。

这是[diff 软件](http://en.wikipedia.org/wiki/Comparison_of_file_comparison_tools)的列表。

# php - 匹配多个包含反斜杠的分隔符 php

> ID：10563648
> 
> 赞同：1
> 
> 时间：2012-05-12T12:18:25.360
> 
> 标签：php, preg-match

我有一个 php 代码，需要使用 preg_match 匹配以下任何字符串

```
if(preg_match('/(image/gif)|(image/jpg)|(image/jpeg)/',$between))
{
    echo "Match Found";
}

else

echo "Match Not Found"; 
```

但我得到这个错误

```
Warning: preg_match() [function.preg-match]: Unknown modifier 'g' in C:\xampp\htdocs\project\extension.php on line 38 
```

任何帮助将不胜感激......我用谷歌搜索了很多但找不到解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:19:57.460

您正在`/`用作[分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)，因此当它出现在您的正则表达式中时，您必须对其进行转义：

```
if(preg_match('/(image\/gif)|(image\/jpg)|(image\/jpeg)/',$between)) 
```

或者，您可以选择另一个分隔符：

```
if(preg_match('~(image/gif)|(image/jpg)|(image/jpeg)~',$between)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:20:04.350

用这个替换你的 preg_match 模式：

```
'/(image\/gif)|(image\/jpg)|(image\/jpeg)/' 
```

你应该总是转义像 / 这样的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:20:21.880

只要您想`/`在正则表达式中使用 -`~`改为用作正则表达式分隔符：

```
if(preg_match('~(image/gif)|(image/jpg)|(image/jpeg)~',$between))
               ^-----------                         ^-------- 
```

甚至更好：

```
if(preg_match('~image/(gif|jpe?g)~',$between)) 
```

# c# - 使用 c# 将 xml 文件作为存储过程参数传递的最简单方法

> ID：10563650
> 
> 赞同：-1
> 
> 时间：2012-05-12T12:18:33.693
> 
> 标签：c#, xml, xml-parsing

我正在寻找使用 c# 将 xml 文件作为存储过程参数传递的最简单方法。实际上，我需要创建一个 xml 文件，以便将此 xml 保存到 sql 数据库中。在数据库存储过程中有一个参数为xml 类型。我已经创建了一个如下所述的 xml 文件

```
 StringWriter stringWriter = null;
 XmlTextWriter writer = null;
 try
 {
  stringWriter = new StringWriter(new StringBuilder());
  writer = new XmlTextWriter(stringWriter);
  writer.Formatting = Formatting.Indented;
  writer.WriteStartDocument();
  writer.WriteComment("Holiday Info");

  writer.WriteStartElement("holidayInfo", "");

  for (int groupIndex = 0; groupIndex < numberOfGroup; groupIndex++)
        {
            for (int religionIndex = 0; religionIndex < numberOfReligion; religionIndex++)
            {
                for (int jobStationIndex = 0; jobStationIndex < numberOfJobStation; jobStationIndex++)
                {
                    writer.WriteStartElement("HOLIDAY", ""); 
                    writer.WriteAttributeString("intGroupID", chkGroupList.Items[groupIndex].Value.ToString());
                    writer.WriteAttributeString("intJobTypeId", "0");
                    writer.WriteAttributeString("intJobStationID", chkReligionList.Items[religionIndex].Value.ToString());
                    writer.WriteAttributeString("intHolidayID", ddlHolidayName.SelectedValue.ToString());
                    writer.WriteAttributeString("dtePermitedDate", DateTime.Now.ToShortDateString());
                    writer.WriteAttributeString("intReligionId", chkReligionList.Items[religionIndex].Value.ToString());
                    writer.WriteAttributeString("dteFromDate", txtFromDate.Text);
                    writer.WriteAttributeString("dteToDate", txtToDate.Text);
                    writer.WriteEndElement();
                }
            }

        }
      stringWriter.GetStringBuilder().ToString();
      return will be what if i want to sent this file to the store procedure parameter?;
    }
    finally
    {
        if (writer != null) writer.Close();
        if (stringWriter != null) stringWriter.Close();
    } 
```

如果我想将此文件作为 xml 参数发送到存储过程，返回类型将是什么？

这是我的商店程序

```
CREATE PROCEDURE [dbo].[sprHoliday_InsertHolidaysGroupPermission]
@intUserID INT =NULL,
@xmlHolidayPermissionDetails XML,
@insertStatus AS VARCHAR(200) OUT
AS
BEGIN
DECLARE @intEmployeeID int
IF (@intUserID IS NOT NULL)
BEGIN
    SELECT @intEmployeeID = intEmployeeID From dbo.tblUserInfo WHERE   tblUserInfo.intUserID = @intUserID       
END 

BEGIN TRANSACTION
BEGIN TRY
   INSERT INTO  dbo.tblEmployeeGroupPermissionHolidays
                (intGroupID,
                 intJobTypeId,
                 intJobStationID,
                 intHolidayID,
                 dtePermitedDate,
                 intReligionId,
                 dteFromDate,
                 dteToDate)
        (SELECT  xmlHolidayPermissionDetails.item.value('@intGroupID[1]', 'INT'),
                 xmlHolidayPermissionDetails.item.value('@intJobTypeId[1]', 'INT'),
                 xmlHolidayPermissionDetails.item.value('@intJobStationID[1]', 'INT'),
                 xmlHolidayPermissionDetails.item.value('@intHolidayID[1]', 'INT'),
                 xmlHolidayPermissionDetails.item.value('@dtePermitedDate[1]', 'DATE'),
                 xmlHolidayPermissionDetails.item.value('@intReligionId[1]', 'INT'),
                 xmlHolidayPermissionDetails.item.value('@dteFromDate[1]', 'DATE'),
                 xmlHolidayPermissionDetails.item.value('@dteToDate[1]', 'DATE')
          FROM   @xmlHolidayPermissionDetails.nodes('//HOLIDAY') AS xmlHolidayPermissionDetails(item)
         )
   COMMIT 
   INSERT INTO dbo.tblHRDataHistory values('Insert','Holiday Permission Data Insert','tblEmployeeGroupPermissionHolidays',GETDATE(),@intEmployeeID)
   SET @insertStatus = 'Holiday Permission has been iserted succesfully' 
 END TRY

 BEGIN CATCH
 Rollback
 SELECT @insertStatus = 'There was an error! ' + ERROR_MESSAGE()
 END CATCH 

 END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:26:25.600

对于整个文档：

```
XDocument doc = XDocument.Parse(text); 
```

如果您只需要一个可以轻松添加到另一个文档的元素：

```
XElement element = XElement.Parse(text); 
```

这是假设您使用的是 .NET 3.5 - LINQ to XML 比旧 API 要好得多。

请注意，您反复说过您需要“返回类型为 xml 的函数”。.NET 中没有像“xml”这样的类型，但是像`XElement`等`XDocument`这样的类型是 XML API 中的类型。您不需要创建单独的方法来返回它们 - 它们已经以`XDocument.Parse`and形式存在`XElement.Parse`，如上所示。

我怀疑您对自己的要求感到困惑 - 请注意“返回 xml**文件**”也有点奇怪。您是否正在尝试将数据*写入*文件？从文件中读取？如果不是，文件与您的要求有什么关系？

如果您能提供更多关于您真正想做的事情的详细信息，我们可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T12:20:05.063

您问题中的“最简单”限定词是高度主观的，因为不同的方法可能是有效的。尽管如此，这是一个“简单”的解决方案：

```
XDocument doc = XDocument.Parse(xmlstring);

XElement el = doc.Root; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T12:21:18.813

```
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
doc.LoadXml(string); 
```

这应该有效。

# android - 如何使用大量选择参数进行查询？

> ID：10563651
> 
> 赞同：2
> 
> 时间：2012-05-12T12:18:39.750
> 
> 标签：android, sqlite

我遇到了一种可以解决的情况，但正在寻找更好的方法。这是：

*   我在 Android 设备中有 8,000 多首歌曲。也就是说，Android 的 Audio.Media 有 8,000+ 行。
*   也就是说，我有一个包含 2,000 个路径的数组，我需要在数据库中查询对应文件的其他列。

现在我用`resolver.query(URI, "_data IN (?,?,?........,?)", selectionArgs, null);`

但如果`?`600 或更多，查询将失败，因为 WHERE 子句变得太长。

所以我把2000条路径分成四部分，分别查询并将需要的信息保存在其他地方。通过四次查询，我可以得到结果。但这会消耗大量内存，如果我可以通过一个查询来完成，它会比4快。

有没有人有更好的方法来做到这一点？谢谢！

# java - 这个请求有什么问题？

> ID：10563658
> 
> 赞同：2
> 
> 时间：2012-05-12T12:19:33.280
> 
> 标签：java, javascript, jquery, ajax, jersey

我正在尝试向球衣测试方法发出发布请求。但是我总是遇到错误并且不知道出了什么问题。我正在使用Tomcat。

Java代码：

```
@Path("/users")
public class UsersResource {
@GET
@Produces(MediaType.TEXT_PLAIN)
public String sayHello() {
    return "Hello Jersey Today";
}

@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public String createUser(User us)
{
    //System.out.println("userdata " + us);
    User user = new User("testUserName", "testPassword");
    return user.toJson();
}
} 
```

用户等级：

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class User 
{
private String username;
private String password;

public User()
{
    super();
}

public User(String name, String pass)
{
    super();
    this.username = name;
    this.password = pass;
}

public User(String username)
{
    this.username = username;
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String toJson()
{
    Gson gson = new GsonBuilder().setPrettyPrinting().create();
    String json = gson.toJson(this);
    return json;
}
} 
```

和js代码：

```
$(function () {

main = {

    // Start updates
    start: function(){

        var user = {username: "test", password: "pass"};
        var encoded = $.toJSON( user );

        ajaxPost.ajaxRequest("TodoListing/rest/users", user,
                            function(data)
                            {
                                alert("success with data " + data);
                            }, 

                            function(jqXHR, textStatus, errorThrown) {
                            alert("error " + textStatus + "/" + errorThrown);
                            });

    }
},

// Ajax request.
ajaxPost = {
    ajaxRequest: function(service, data, successSelector, errorSelector) {
        $.ajax({
            type: 'POST',
            url: ajaxPost.serverURL + service,
            data: data,
            contentType: "application/json",
            dataType: "application/json",
            success: successSelector,
            error: errorSelector
        });
    },
    serverURL: 'http://localhost/',
};

}); 
```

JS 总是返回没有描述的错误（empty errorThrown），并且 jersey 会根据请求记录错误：

```
PM com.sun.jersey.server.wadl.generators.WadlGeneratorJAXBGrammarGenerator attachTypes
INFO: Couldn't find JAX-B element for class java.lang.String 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T08:28:42.430

我在球衣上遇到同样的问题，而灰熊总是遇到同样的错误。经过 2 周的研究，这个问题似乎与 CORS（跨域）困难有关。

对我有用的解决方案是一个过滤器，它为响应头提供了一些额外的信息：

```
 import com.sun.jersey.spi.container.ContainerRequest;
    import com.sun.jersey.spi.container.ContainerResponse;
    import com.sun.jersey.spi.container.ContainerResponseFilter;

    class CORSFilter implements ContainerResponseFilter {

        @Override
        public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
            // instead of "*" you should provide a specific domain name for security reasons
            response.getHttpHeaders().add("Access-Control-Allow-Origin", "*");
            response.getHttpHeaders().add("Access-Control-Allow-Methods", "PUT, GET, POST, DELETE, OPTIONS");
            response.getHttpHeaders().add("Access-Control-Allow-Headers", "Content-Type");
            return response;
        }
    } 
```

将过滤器引入灰熊：

```
 ...
    ResourceConfig rc = new ClasspathResourceConfig("my.resource.package");
    rc.getContainerResponseFilters().add(new CORSFilter());
    return GrizzlyServerFactory.createHttpServer("http://base_uri", rc);
    ... 
```

Maybe you can adopt this to tomcat.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:16:09.700

如果您使用的是 Glassfish 服务器，则需要设置`com.sun.enterprise.overrideablejavaxpackages`为 JVM。此外，这里有一个线程：

[多值映射异常](https://stackoverflow.com/questions/7840620/multivaluedmap-exception)

希望这会帮助你。

# android - 在 Android（华为设备）上未正确设置 ContentView：maxScrollFactorString = null

> ID：10563659
> 
> 赞同：2
> 
> 时间：2012-05-12T12:19:43.597
> 
> 标签：android, listview, null

当我调用 setContentView(layout..) 时，它会切换到布局。它只加载一个 TextView 而不是我的 ListView。我没有*阻塞*UI 线程。

在 LogCat 中有一条奇怪的消息：“maxScrollFactorString = null”。布局在模拟器中加载得很好。

我在 Google 中没有找到任何东西，这似乎是平台/设备特定的错误。

有人可以帮忙吗？我需要知道如何使布局完全加载。

该设备是配备 Android 2.3.3 的华为 U8510。

# ruby-on-rails - 如何在 ruby /rails 中将多个参数传递给 Proc？

> ID：10563668
> 
> 赞同：1
> 
> 时间：2012-05-12T12:20:27.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

以下是给我的问题：

```
accepts_nested_attributes_for :photo, 
:reject_if => proc { |attributes| attributes['image'].blank? }, 
:reject_if => proc { |attributes| attributes['photo_title'].blank? },
:allow_destroy => true 
```

我认为这是因为我调用了 :reject_if 两次，而不是 100% 确定。但是，当我取消注释 photo_title reject_if 行时，如果我选择一个，我的图像就不会上传。如果我将这一行注释掉，那么它会这样做。

如何将这两个条件组合成一个 reject_if 条件？如果这是有道理的。

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:24:29.503

这：

```
accepts_nested_attributes_for :photo, 
  :reject_if => proc { |attributes| attributes['image'].blank? }, 
  :reject_if => proc { |attributes| attributes['photo_title'].blank? },
  :allow_destroy => true 
```

与此相同：

```
accepts_nested_attributes_for :photo, {
  :reject_if => proc { |attributes| attributes['image'].blank? }, 
  :reject_if => proc { |attributes| attributes['photo_title'].blank? },
  :allow_destroy => true
} 
```

粗箭头参数实际上是一个哈希，大括号本质上是 Ruby 在你背后添加的。哈希不允许重复键，因此第二个`:reject_if`值会覆盖第一个值，您最终会得到：

```
accepts_nested_attributes_for :photo,
  :reject_if => proc { |attributes| attributes['photo_title'].blank? },
  :allow_destroy => true 
```

您可以在一个 Proc 中结合这两个条件：

```
accepts_nested_attributes_for :photo,
  :reject_if => proc { |attributes| attributes['image'].blank? || attributes['photo_title'].blank? }, 
  :allow_destroy => true 
```

您还可以使用单独的方法：

```
accepts_nested_attributes_for :photo,
  :reject_if => :not_all_there,
  :allow_destroy => true

def not_all_there(attributes)
  attributes['image'].blank? || attributes['photo_title'].blank?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:23:10.650

试试这个

```
accepts_nested_attributes_for :photo, 
 :reject_if => proc { |attributes| attributes['image'].blank? || attributes['photo_title'].blank?}, 
 :allow_destroy => true 
```

# ios - Google Analytics for iOS 跟踪同一事件的多个帐户

> ID：10563675
> 
> 赞同：8
> 
> 时间：2012-05-12T12:21:10.447
> 
> 标签：ios, google-analytics-api

我有来自两个不同帐户的两个不同网络资产 ID，例如 UA-1111-11、UA-2222-22 现在，在我的 iOS 应用程序中，我需要在事件中登录到它们。这甚至可能吗？如果没有，是否有任何解决方法？

这是我的高级场景：我有一个现有的应用程序，我使用谷歌分析 UA-1111-11 进行跟踪。现在，我与 X 公司达成协议（他们有 UA-2222-22）。他们告诉我，我需要从我的应用程序向他们的帐户 (UA-2222-22) 发送分析跟踪事件（我想保留 UA-1111-11 供我自己使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:18:44.417

Google 正在开发[适用于 iOS](https://developers.google.com/analytics/devguides/collection/ios/v2/advanced#multiple-trackers)和 Android 的 v2 SDK，并为同一应用程序中的多个跟踪器添加了一项功能。目前，您可以下载[适用于 iOS 的 Google Analytics v2 beta 3，并开始使用它](https://developers.google.com/analytics/devguides/collection/ios/resources)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T07:47:10.867

检查[谷歌分析 SDK](https://developers.google.com/analytics/devguides/collection/ios/v2/advanced#multiple-trackers)

示例代码：

```
#import "RootViewController.h"
#import "GAI.h"

@interface RootViewController ()

@end

@implementation RootViewController
{
- (void)viewDidLoad {
  [super viewDidLoad];

  // Send a screen view to the first property.
  id tracker1 = [[GAI sharedInstance] trackerWithTrackingId:@"UA-XXXX-Y"];
  [tracker1 sendView:@"/HomeScreen"];

  // Send another screen view to the second property.
  id tracker2 = [[GAI sharedInstance] trackerWithTrackingId:@"UA-XXXX-Z"];
  [tracker2 sendView:@"Home"];
}

@end 
```

> 请记住，自动测量功能（如自动筛选和未捕获的异常测量）只会使用一个跟踪器将数据发送到 Google Analytics。如果您正在使用这些功能并希望使用其他跟踪器发送数据，则需要手动执行此操作。

# oop - 自动继承 Racket 子类中的绑定

> ID：10563679
> 
> 赞同：3
> 
> 时间：2012-05-12T12:21:27.370
> 
> 标签：oop, inheritance, racket

我有一个包含几个子类的类，它们都使用父类中的方法和字段。有没有“正确”的处理方式？

到目前为止，我一直`(inherit method1 method2 ...)`在每个子类中使用。

我徒劳地寻找了一种父类可以强制子类继承绑定的方式，我知道这可能是不好的风格。

对 Racket 或 OOP 不是很有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:21:29.887

即使您不使用，这些方法也会被继承`inherit`。要从超类调用方法，可以使用`(send this method arg1 ...)`. 类表单`(inherit method)`内的表单将使该方法在`(method arg1 ...)`主体内的表单中可用。这不仅是一种方便的速记方式，而且比`(send this method)`.

我不知道要继承的包名称的表单，但是您可以使用一个小宏来滚动自己的表单。这是一个例子：

```
(define-syntax (inherit-from-car stx) 
  (datum->syntax stx '(inherit wash buy sell)))

(define car% (class object%
               (define/public (wash) (display "Washing\n"))
               (define/public (buy)  (display "Buying\n"))
               (define/public (sell) (display "Selling\n"))
               (super-new)))

(define audi% (class car% (super-new)
                (inherit-from-car)
                (define/public (wash-and-sell)
                  (wash)
                  (sell))))

(define a-car (new audi%))
(send a-car wash-and-sell) 
```

# node.js - 使用节点将字符串插入 HTML 文件的最佳实践

> ID：10563682
> 
> 赞同：1
> 
> 时间：2012-05-12T12:21:34.673
> 
> 标签：node.js

假设我有一个大的 HTML 文件，并且我想在几个地方插入一个字符串，该字符串的内容是在启动期间设置的。如果我只被允许提供静态 HTML，我将如何解决这个问题，因此所有事情都必须在服务器端处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:34:57.103

您可以使用[JADE](https://github.com/visionmedia/jade#readme)模板引擎。如果它一直是静态的，您可以将模板编译到您的公共目录并使用[ExpressJS之类的框架提供它们](http://expressjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T01:50:21.290

如果您已经有了这个 HTML 文件，我建议您使用[EJS](http://embeddedjs.com/)。

将任何东西重写为haml（玉）只是太多的工作......

# iphone - 如果服务器不可用，如何停止 ftp 连接

> ID：10563686
> 
> 赞同：0
> 
> 时间：2012-05-12T12:21:54.640
> 
> 标签：iphone, objective-c, ftp

我为 ftp 请求创建了一个输入流，如下所示：

```
ftpStream = CFReadStreamCreateWithFTPURL(NULL, (CFURLRef) url);

networkStream = (NSInputStream *) ftpStream;        

[self.networkStream read:<#(uint8_t *)#> maxLength:<#(NSUInteger)#>] 
```

当我读取数据时，如果无法连接服务器，程序会卡在上面的第三行。是否有一种方法可以在您可以定义的几秒钟后停止连接？或者如果有其他方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:30:50.103

不要做一个同步的`read`。相反，在流对象上设置一个委托，将其安排在运行循环上，然后调用`-open`. 如果您在应用程序的主线程上，此时只需将控制权返回给框架，它就会为您运行运行循环。如果您在后台线程上或编写命令行工具，请自己运行线程的运行循环。当有数据要读取时，您的委托将被调用。

要为连接建立超时，您可以在运行循环上安排一个计时器。或者，如果您自己运行运行循环，您可以限制运行它的时间。如果时间在建立连接之前到期，只需关闭流。

# jquery - jquery删除按钮无法从数据库中删除行

> ID：10563688
> 
> 赞同：2
> 
> 时间：2012-05-12T12:22:06.397
> 
> 标签：jquery, button

我有一个列表，每个 li 都包含一个删除按钮，单击时将其删除，以及从我的数据库中选择的框数据。我创建了一个 id biz_watch'.$biz_watch_id.' 这对于每个单独的盒子都是独一无二的。使用 $.get 调用服务器端 php 脚本来删除表行。

但是脚本不起作用。如果我要取消 get 功能，我可以删除这些框，但是使用 .get 命令，就无法再删除这些框了。以下是代码

```
 foreach($biz_watchlist as $biz_watchlist1){
         echo '<li class="biz_watch" id="biz_watch'.$biz_watch_id.'">';
         echo '<table style="width:100%">';
         echo '<td style="width:50%">';
         echo $biz_watch_details['5'];
         echo ' | <a class="remove_watch" id="remove_watch'.$biz_watch_id.'">remove</a>';
         echo '</td>';
         echo '<td>';
         echo '<span style="float:right">'.$biz_watch_details['19'].'</span>';
         echo '</td>';
         echo '</table>';
         echo '</li>';
    }

    <script type="text/javascript">
     $(document).ready(function(){
        $('.remove_watch').click(function(){
            var li = $(this).closest('li.biz_watch');
            var action = '../delete_watchlist.php';
            var data = { id:13};
               $.post(action, data, function(){
                 li.fadeOut('slow', function() {
                     li.remove();
                 });
               });
        });
    });
    </script> 
```

我的服务器端脚本

```
 <?php
        $id = $_POST["id"];

        $query = "DELETE FROM dz0yn_biz_watchlist WHERE biz_id = $id";
        $delete_watch_row = mysql_query($query);
      ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:51:30.260

您应该使用[post()](http://api.jquery.com/jQuery.post/)而不是[get()](http://api.jquery.com/jQuery.get/)

```
$.post('/.../delete_watchlist.php', {id: $(this).closest('.biz_watch').attr('id')},function(){
    $(this).closest('.biz_watch').fadeOut("slow");
}); 
```

jquery4u[博客](http://www.jquery4u.com/ajax/key-differences-post/)总结得很好：

> 如果表单的处理是幂等的（即它对世界状态没有持久的可观察影响），那么表单方法应该是 GET。许多数据库搜索没有明显的副作用，是查询表单的理想应用。
> 
> 如果与处理表单相关的服务有副作用（例如，修改数据库或订阅服务），则方法应该是 POST。

**编辑**：

您正在动态创建表，这意味着您的 .ready 在表完全创建之前被调用；因此，它很可能不会在所有行上创建点击功能。

您需要使用[on()](http://api.jquery.com/on/)事件将事件应用于稍后可能创建的对象。

```
$(document).ready(function(){
    $('.remove_watch').on("click", function(){
        $.get('/.../delete_watchlist.php', {id:  $(this).closest('.biz_watch').attr('id')},function(){
            $(this).closest('.biz_watch').fadeOut("slow");
        });
    });
}); 
```

**编辑**：

最后一次尝试：P。由于您只需要 12 的 id 而不是整个 biz_watch12，因此您可以使用 replace 从您的 id 中删除 biz_watch 以发送到服务器。

```
$(this).closest('.biz_watch').attr('id').replace("biz_watch", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:08:50.273

1.  使用 / 前缀相对目录 (..) 会将其转换为引用自身的绝对路径。这有点没有意义。第一个 / 应该被删除（'../delete_watchlist.php'）。

2.  分解你的脚本。您试图将太多的东西组合在一行中，这使问题变得混乱。

假设您的服务器端脚本成功，这应该完成您所追求的。

```
$(document).ready(function(){
    $('.remove_watch').click(function(){
        var li = $(this).closest('li.biz_watch');
        var action = '../delete_watchlist.php';
        var data = { id: li.attr('id').substr(9) };
        $.post(action, data, function(){
            li.fadeOut('slow', function() {
                li.remove();
            });
        });
    });
}); 
```

# asp.net-mvc-3 - ASP.NET MVC 3 RAZOR：如何使用 POST，它给出错误“找不到资源”

> ID：10563690
> 
> 赞同：2
> 
> 时间：2012-05-12T12:22:11.730
> 
> 标签：asp.net-mvc-3, razor, get, http-post

以下是控制器和视图。单击 [提交] 按钮时，应用程序会引发错误“找不到资源”。我知道使用 Get 和 Post 是 MVC 的非常基本的概念。是否可以通过一些实际场景让我清楚地了解何时使用 Get 和 Post 以及以下代码有什么问题。

# 控制器：

```
namespace MVCModelBinding.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }
        [HttpPost, ActionName("Index")] 
        public ActionResult IndexPost()
        {
            if (Request.Form.Count > 0)
            {

                string id = Request.Form["ID"];

                string fname = Request.Form["FirstName"];

                string lname = Request.Form["LastName"];

                ViewBag.StatusMessage = "Employee data received successfully for ID " + id + "!";

            }

            return View();
        }
        public ActionResult About()
        {
            return View();
        }
    }
} 
```

# 视图 (index.chtml)

```
@using (Html.BeginForm("IndexPost", "HomeController",FormMethod.Post))
{
    <table>
        <tr>
            <td>
                Employee ID
            </td>
            <td>
                @Html.TextBox("ID")
            </td>
        </tr>
        <tr>
            <td>
                First name
            </td>
            <td>
                @Html.TextBox("FirstName")
            </td>
        </tr>
        <tr>
            <td>
                Last Name
            </td>
            <td>
                @Html.TextBox("LastName")
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>
} 
```

谢谢

保罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T12:25:09.877

表单使用的动作名称和控制器名称错误。它应该是

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post)) 
```

动作名称只是`"Index"`因为那是您使用`ActionNameAttribute`. 控制器名称不应包含“控制器”后缀。

# objective-c - 带有 PatternImage 的 UIView 圆角

> ID：10563699
> 
> 赞同：1
> 
> 时间：2012-05-12T12:23:21.733
> 
> 标签：objective-c, xcode, uiview, cornerradius

在这里，cornerRadius 不适用于 PatternImage，你能帮帮我吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    myView.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"background.png"]];
    myView.layer.cornerRadius = 10.0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:25:32.557

您需要剪辑视图，否则背景会溢出。

```
myView.layer.maskToBounds = YES; 
```

您也可以使用 UIView 方法，但我认为您已经在图层中，这样看起来会更干净哈哈。他们做同样的事情。

```
myView.clipsToBounds = YES; 
```

# android - 我如何学习在 Android 上使用 Websocket，即使我没有服务器也可以测试它吗？

> ID：10563700
> 
> 赞同：0
> 
> 时间：2012-05-12T12:23:21.963
> 
> 标签：android, websocket

我们正在尝试学习 Websocket 从服务器发送和接收信息。你能给我们推荐一些链接来解释如何使用它易于理解吗？此外，我们还没有服务器。那么即使我们没有服务器，我们也可以测试它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T09:58:54.233

正如@Chris Stratton 所说，在本地运行 WebSocket 服务器。

对于测试和开始使用 WebSocket 通信，您还可以使用[https://github.com/cobuChris/yak-js](https://github.com/cobuChris/yak-js)

设置简单，您可以在几分钟内运行一个 WebSocket 服务器实例。

# jquery - jQuery 不保留修改后的锚标签 href 属性

> ID：10563703
> 
> 赞同：0
> 
> 时间：2012-05-12T12:24:04.087
> 
> 标签：jquery, anchor

我正在尝试使用 jQuery 修改锚标记 href，如下所示，但我无法坚持对下面的 htmlFragment 所做的更改。

似乎 jQuery 选择器复制了值，而不是使用引用？

**我可以保存修改后的 href 值而不复制到新元素中吗？**

```
 <div class="photo"><a class="photo_large" href=http://myimage/a/1.jpg>AAAA</a></div> 
 <div class="photo"><a class="photo_large" href=http://myimage/b/1.jpg>AAAA</a></div>   

function(err, htmlFragment) {
    var photosImg = $('.photo_large', htmlFragment);

    $(photosImg[0]).attr('href', '');
    $(photosImg[1]).attr('href', '');
    $(photosImg[2]).attr('href', '');

    $('#mydivout').html( htmlFragment );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:37:48.517

无论你解释了什么，我都试图回答你

```
$("a.photo_large").each(function(index,value){
  $(this).attr("href","javascript:void(0);");
}); 
```

在上面的代码中，`index`将为您提供`a`从 0 开始的位置，如果您对任何链接执行特殊操作，则可以使用`index`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:50:28.980

如果你想改变你的 href 的值，你总是可以使用这样的东西：

```
$(photosImg[0]).href = $(photosImg[0]).href.replace("old value","new value"); 
```

或者

```
 $(photosImg[0]).href = $(photosImg[0]).href.replace($(photosImg[0]).href,"new value"); 
```

如果你想对不止一个做，比如你的例子，你可以使用 for 循环；。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:54:54.517

原来我必须将普通的 DOM elem 包装到 JQuery 中

```
 var normalDom = document.getElementById('myelem');

    var photosImg = $('.photo_large', $(normalDom) ); 
```

否则 jQuery 不会将任何修改后的数据保存回 DOM。

由于未知原因，我无法重现我在 jsFiddle 中得到的内容，我让它在我的系统上运行。

# firefox - Firefox SQLite Manager 为 iOS 创建数据库

> ID：10563704
> 
> 赞同：0
> 
> 时间：2012-05-12T12:24:04.547
> 
> 标签：firefox, sqlite, sqlitemanager

Firefox SQLite Manager 创建的表的默认行数是 20。

但我想在我的表中插入 50 条记录。

我必须在 SQLite 管理器中在哪里进行更改以增加 Number 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:41:25.390

我对 Sqlite 表的理解是，它们不限于最大行数吗？你是说只能看到 20 行吗？

话虽如此，我对 Firefox Sqlite 编辑器（错误）的结果好坏参半。

作为建议，我不能推荐足够多的免费程序 SQLite Expert Personal。它是迄今为止我发现的最精致和无错误的 sqlite 编辑器。

[http://www.sqliteexpert.com/download.html](http://www.sqliteexpert.com/download.html)

# python - Python：将元组可迭代转换为字符串可迭代

> ID：10563707
> 
> 赞同：3
> 
> 时间：2012-05-12T12:24:13.453
> 
> 标签：python, sqlite

作为 sqlite3 select 语句的结果，我得到了一个可迭代的元组，我想将此可迭代对象提供给一个期望字符串可迭代对象的函数。如何覆盖下一个函数以给出元组的第一个索引？或者更准确地说，这样做的正确pythonic方式是什么？

```
>>> res = conn.execute(query,(font,))
>>> train_counts = count_vect.fit_transform(res)

AttributeError: 'tuple' object has no attribute 'lower' 
```

*编辑：*

由于映射涉及迭代整个列表，因此它所花费的时间是 Niklas 提供的构建生成器的两倍。

```
first = """
l = list()
for i in xrange(10):
    l.append((i,))

for j in (i[0] for i in l):
    j
"""

second = """
l = list()
for i in xrange(10):
    l.append((i,))

convert_to_string = lambda t: "%d" % t
strings = map(convert_to_string, l)

for j in strings:
    j
"""

third = """
l = list()
for i in xrange(10):
    l.append((i,))

strings = [t[0] for t in l]

for j in strings:
    j
"""

print "Niklas B. %f" % timeit.Timer(first).timeit()
print "Richard Fearn %f" % timeit.Timer(second).timeit()
print "Richard Fearn #2 %f" % timeit.Timer(third).timeit()

>>>
Niklas B. 4.744230
Richard Fearn 12.016272
Richard Fearn #2 12.041094 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:33:29.940

您需要编写一个将每个元组转换为字符串的函数；然后您可以使用`map`将元组序列转换为字符串序列。

例如：

```
# assume each tuple contains 3 integers
res = ((1,2,3), (4,5,6))

# converts a 3-integer tuple (x, y, z) to a string with the format "x-y-z"
convert_to_string = lambda t: "%d-%d-%d" % t

# convert each tuple to a string
strings = map(convert_to_string, res)

# call the same function as before, but with a sequence of strings
train_counts = count_vect.fit_transform(strings) 
```

如果您想要每个元组中的第一项，您的函数可以是：

```
convert_to_string = lambda t: t[0] 
```

（假设第一个元素已经是一个字符串）。

实际上，在这种情况下，您可以完全避免使用 lambda 并使用列表推导：

```
strings = [t[0] for t in res] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:09:42.250

简单的解决方案是使用生成器表达式：

```
count_vect.fit_transform(t[0] for t in res) 
```

# jquery - 在 Internet Explorer 8 中使用 jQuery 加载图像事件失败

> ID：10563719
> 
> 赞同：0
> 
> 时间：2012-05-12T12:26:29.080
> 
> 标签：jquery, internet-explorer-8

我正在努力为 Internet Explorer 8 中的弹出窗口加载图像，我不知道为什么它返回“图像加载失败”。每时每刻。

我一开始以为是缓存问题，但看起来不是，所以现在我不知道它是什么......

```
 var img = $("<img />").attr('src', imageSource)
    .load(function() {
        if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
            $("#imagePopup .content").html('Image failed to load.');
        }
        else {
            $("#imagePopup .content").html(img);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:31:20.193

以下对我有用：

```
var img = $('<img/>').load(function() {
   // Loading done ..
   img.appendTo("#imagePopup .content");
}).error(function(){
   // Unable to load image ..
   $("#imagePopup .content").html('Image failed to load.');
}).attr('src', imageSource); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T12:31:23.593

IE8 不支持 naturlwidth。您将不得不使用 height 和 width 属性。

# php - php + mysql：创建查询

> ID：10563725
> 
> 赞同：0
> 
> 时间：2012-05-12T12:27:14.807
> 
> 标签：php, mysql

假设您需要使用 values 插入到 db 行的表中`$a, $b, $c`，这些值可能是不安全的，表的名称作为常量存储在执行操作的类中。可以进行如下查询

```
$query = "INSERT INTO `" . self::TABLE . '` ' .
    "(a, b, c) VALUES (" .
    . intval(a) .
    ",'" . mysql_real_escape_string(b) . "'" .
    ",'" . mysql_real_escape_string(b) . "')"; 
```

问题来了：有没有更优雅的方式来创建查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:30:58.943

它被称为**prepared statements**，它存在于MySQLi（好）或PDO（更好）中。我将添加我在评论中为使用的人添加的常见内容`mysql_*`：

> `mysql_*`请停止使用古老的功能编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。相反，您应该了解准备好的语句并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

虽然可以在`mysql_*`函数中执行，但我**强烈**（真的是***EPICLY***）建议不要这样做。

* * *

在 PDO 中，您的代码如下所示：

```
$query = "INSERT INTO `" . self::TABLE . "` (a, b, c) VALUES (:a, :b, :c);";

$statement = $db_connection->prepare($query);

$statement->bindParam(":a", $a);
$statement->bindParam(":b", $b);
$statement->bindParam(":c", $c);

$statement->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:29:35.303

是的。您可以/必须使用 PDO 或 mysqli。顺便说一句，当您在不需要的数据库中插入整数时`'`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T12:30:11.720

有 - 使用诸如[Doctrine](http://docs.doctrine-project.org/en/latest/index.html)或[Propel之类的](http://www.propelorm.org/)[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping) ...几乎所有 PHP 框架都提供了 ORM，其中大多数基于[Active Record](http://en.wikipedia.org/wiki/Active_record_pattern)模式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T12:31:16.643

是的，有可能 唯一的事情是，对于*intval中**的*不安全值，您将获得值 1 和 E_NOTICE 级别错误。

# sencha-touch - 如何在 Sencha Touch 2 模型中存储日期

> ID：10563726
> 
> 赞同：8
> 
> 时间：2012-05-12T12:27:14.637
> 
> 标签：sencha-touch, extjs, sencha-touch-2

在 sencha touch 2 中，似乎只有 string、int、float、boolean 数据类型。那么如何存储日期时间？

**更新**

好的，我发现我可以`convert()`用来转换值：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.Types](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Types)

> `convert`: Function 将原始数据值从数据块转换为要存储在字段中的数据的函数。该函数传递以下参数：
> - v : Mixed
> Reader 读取的数据值，如果未定义将使用配置的 defaultValue。
> - rec : Mixed
> 包含 Reader 读取的行的数据对象。根据 Reader 类型，这可能是数组 (ArrayReader)、对象 (JsonReader) 或 XML 元素。

```
// Add a new Field data type which stores a VELatLong object in the Record.
Ext.data.Types.VELATLONG = {
    convert: function(v, data) {
        return new VELatLong(data.lat, data.long);
    },
    sortType: function(v) {
        return v.Latitude;  // When sorting, order by latitude
    },
    type: 'VELatLong'
}; 
```

但我真的不明白代码。对于`convert()`，什么设置参数？为什么第一个参数未使用，它何时以及用于什么用途？我如何获取/设置这样的自定义类型（它是变成`v`还是`data`in `convert()`）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T20:27:12.557

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Types-property-DATE](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Types-property-DATE) 哦，日期数据类型...

无论如何，在回答你的问题之前！（有关日期数据类型示例，请参见 tl;dr）

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field-cfg-convert](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field-cfg-convert)

将 Reader 提供的值转换为将存储在模型中的对象的函数。它传递了以下参数：

v : 混合

Reader 读取的数据值，如果未定义将使用配置的 defaultValue。记录：Ext.data.Model

到目前为止，阅读器读取的包含模型的数据对象。请注意，此时模型可能未完全填充，因为字段是按照它们在字段数组中定义的顺序读取的。

```
Ext.define('Dude', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'locationInCity',  convert: function(rawDataValue,record){
            return record.location+', '+record.city //would be something like Sprooklyn,Springfield
        }},
        {name: 'firstname', mapping: 'name.first'},
        {name: 'lastname',  mapping: 'name.last'},
        {name: 'city', defaultValue: 'homeless'},
        'state',
        {name: 'location',  convert: location}
    ]
}); 
```

啊，此时我找到了你的例子的来源；）

```
// Add a new Field data type which stores a VELatLong object in the Record.
Ext.data.Types.VELATLONG = {
    convert: function(v, data) { // convert(value,record)
        return new VELatLong(data.lat, data.long); //VELatLong was declared previously in another library as something according to example
    },
    sortType: function(v) {
        return v.Latitude;  // When sorting, order by latitude //VELatLong will have lat and long properties, this is for complex sorting
    },
    type: 'VELatLong' //This is what we use to reference it.
}; 
```

所有这些都或多或少地声明了一个新的数据类型。它看起来像

```
// Add a new Field data type which stores a VELatLong object in the Record.
Ext.data.Types.tehDate = {
    convert: function(v, data) { // convert(value,record)
        return new date(v);
    },
    sortType: function(v) {
        return v; // eh i have no idea whether its going to actually just accept date comparisons, though no there's real reason why it shouldn't
    },
    type: 'tehDate' //This is what we use to reference it.

};

^-- some of this is untested. 
```

**TL;博士**

现在要实际回答您的 -original- 问题：

Ext 有一个可以使用的日期类型：Ext.data.Types.DATE（以及其他一些）。

我假设 type: date 没有用，否则我们不会在这里！所以可能只有 4 个被正确引用。但！这确实有效：

```
var types = Ext.data.Types; // allow shorthand type access
Ext.define('Unit', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            { name: 'dated', type: types.DATE },
            { name: 'pie', type: 'string' },
        ]
    }
});
abc=Ext.create('Unit',{
    dated: new Date().toString(),
    pie:'hello'
})
console.log(abc)
console.log(abc.get('dated').getUTCFullYear())//it liiiiives! 
```

工作代码的小提琴：

[http://www.senchafiddle.com/#w97Oe](http://www.senchafiddle.com/#w97Oe)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:56:50.007

只是以简单的方式包装以上所有内容：

是的，您可以轻松地将日期存储为模型中的日期。为此，您需要：

1.  在模型中指定字段的类型（记住在 app.js`Ext.data.Types`的字段中包含文件）：`required`

    ```
    {name: 'date', type: Ext.data.Types.DATE, dateFormat: 'd.m.Y'}; 
    ```

2.  在 XTemplates 中为该字段使用具有日期格式的修饰符：

    ```
    {date:date("d.m.Y")} 
    ```

3.  在发送到服务器之前将日期字段正确转换回字符串。例如，我以 format 存储日期`"d.m.Y"`，所以我进行以下转换：

    ```
    Ext.Date.format(form.getValues().date, 'd.m.Y'). 
    ```

就是这样！现在您拥有本地日期字段的所有功能，即您可以轻松进行分组、排序等。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-12T12:59:14.117

`Sencha Touch 1.0`支持[Model 中的日期类型](http://docs.sencha.com/touch/1-1/#!/api/Ext.data.Field-cfg-type)。

但是， Model`Sencha Touch 2`仅支持**4**种数据类型。

*   细绳
*   整数
*   漂浮
*   布尔值

您可以做的是您可以`date`输入`String`格式，然后 `date`使用 API 将其转换为对象。

# ruby-on-rails - 如何使用 rspec 测试选择日期？

> ID：10563727
> 
> 赞同：1
> 
> 时间：2012-05-12T12:27:19.603
> 
> 标签：ruby-on-rails, testing

**如何使用集成 rspec 测试测试以下代码（我也在使用水豚）？**

```
 1 <%= form_for [@project, @task] do |f| %>

 17   <p>
 18     <%= f.date_select(:target_date,
 19                       :default => Date.today,         
 20                       :order => [:day, :month, :year], :start_year => Date.today.year, 
 21                       :end_year => Date.today.year + 3) %>
 22   </p>                
 23 
 24   <%= f.submit %>
 25 
 26 <% end %> 
```

到目前为止，我有以下代码......

```
select '28', :from => :day 
```

...但它说 >**无法选择选项，没有找到带有 id、名称或标签“day”的选择框**

编辑：在查看页面的 HTML 输出时，我注意到 Rails 会自动将 id 添加到日、月和年字段中......例如，日的输出看起来像这样......

```
<select id="show_date_3i" name="show[date(3i)]"><option value="1">1</option> 
```

但是当我再次这样做时......

```
select '28', :from => :show_date_3i 
```

...它说>>>**无法选择选项，没有找到带有ID，名称或标签'show_date_3i'的选择框**...这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:31:47.843

Rails Form Helpers 将日期选择字段分解为一组数据部分——可能将它们命名为`1i`to——`6i`它们代表数据时间的年、月、日、小时、分钟和秒。

对于日期，仅使用年、月和日期部分。

所以给定你的表单助手标签：

```
 <%= f.date_select(:target_date,
                    :default => Date.today,         
                    :order => [:day, :month, :year], :start_year => Date.today.year, 
                    :end_year => Date.today.year + 3)
%> 
```

我建议您首先了解 html 日期是如何在选择框中呈现的，然后使用 capybara 匹配器来选择它们。

因此，例如，如果您选择的日期是“2011/01/01”，而您的选择是“显示日期”，那么您会写：

```
select '2011/01/01', :from => 'Show Date' 
```

请参阅此相关问题：

[如何在 Rails 3 中使用 Capybara 从选择框中选择日期？](https://stackoverflow.com/questions/6729786/how-to-select-date-from-a-select-box-using-capybara-in-rails-3)

ruby-doc.info 上的 capybara matchers 文档：

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:30:22.627

试试这个

```
select '28', :from => 'task[target_date]' 
```

或给选择一些特殊的ID

```
<%= f.date_select(:target_date,
                :default => Date.today,         
                :order => [:day, :month, :year], 
                :start_year => Date.today.year, 
                :end_year => Date.today.year + 3,
                :id => 'task_target_date') %> 
```

然后尝试

```
select '28', :from => 'task_target_date' 
```

# c - 读取命名管道会导致无限循环

> ID：10563732
> 
> 赞同：0
> 
> 时间：2012-05-12T12:28:20.630
> 
> 标签：c, linux, named-pipes

我有两个使用命名管道的简单程序，这是第一个：

```
int main(int argc,char **argv)
{
  if (argc<2)
   error_nsys_f("usage: [fifo]");

  if (mkfifo(argv[1],S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH)<0)
   error_sys_f("error while creating named pipe");

  int fd=open(argv[1],O_RDONLY);
  int log_file=open("wyniki.log",O_WRONLY | O_CREAT| O_TRUNC,S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH);
  long result;
  size_t len;
  if (fd<0)
   error_sys_f("error while openning pipe");
  if (log_file<0)
   error_sys_f("error while openning log file"); 
  //unlink(argv[1]);
  char path[MAXLINE];
  char buffer[BUF];
  while(1)
  {
   if (read(fd,&len,sizeof(size_t)) == -1)
   {
       cleanup(fd,argv[1]);
       error_sys_f("error while reading from file-name queue");
   }
   if (read(fd,path,len) == -1) 
   {
       cleanup(fd,argv[1]);
       error_sys_f("error while reading from file-name queue");
   }
   result=count(path,buffer);
   if (result>-1)
   {
       sprintf(buffer,"%s: %ld\n",path,result);
       if (write(log_file,buffer,strlen(buffer)) == -1)
       {
        cleanup(fd,argv[1]);
        error_sys_f("error while writing to log-file");
       }
   }
  }
} 
```

第二个

```
int main(int argc,char **argv)
{

 if (argc<3)
     error_nsys_f("usage: [fifo] [plik1] [plik2]...\n");

 int fd=open(argv[1],O_WRONLY);
 int i;
 int s;
 if (fd<1)
     error_sys_f("nie udalo sie otrzymac dostepu do kolejki");

 for(i=2;i<argc;++i)
 {
     s=strlen(argv[i])+1;
     if (write(fd,&s,sizeof(size_t)) == -1)
     {
      close(fd);
      error_sys_f("error while writing to queue");
     }
     if (write(fd,argv[i],strlen(argv[i])+1) == -1)
     {
      close(fd);
      error_sys_f("error while writing to queue");
     }
 }
 close(fd);
 return EXIT_SUCCESS;
} 
```

在第二个程序中，我给他要写入的 fifo 的名称和文件的名称，在第一个程序中，我读取名称和文件名的长度，计算字节并将其写入日志文件。

但是有一个问题，如果我尝试将例如一个文件名写入fifo，第一个程序读取名称和长度ok，执行计数，但之后他一直从fifo读取相同的文件名。他表现得好像他没有删除从 fifo 读取的消息。这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:32:55.200

您没有处理 read() 返回 0 的情况，这意味着没有更多数据并且另一端已关闭管道。

因此，如果 read() 也返回 0，您的代码应该停止循环，而不仅仅是在它返回 -1 时

# javascript - 如何在 MobileSafari 中使用 JavaScript 进行缩小？

> ID：10563735
> 
> 赞同：4
> 
> 时间：2012-05-12T12:29:02.327
> 
> 标签：javascript, iphone, mobile-safari, zooming

当您双击或选择输入字段时，它会放大。我假设输入 BLUR 会自动缩放回以前的缩放级别，但是这不会发生，用户必须再次手动缩小。这也可以通过javascript完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:45:24.903

这是 iOS Safari 浏览器的默认行为。这尤其发生在选择框上。

为避免这种情况，请覆盖 jqm 默认提供的字体大小。你可以做这样的事情。

```
.ui-select .ui-btn select{
font-size: 50px;
} 
```

# java - OpenGL 版本

> ID：10563740
> 
> 赞同：6
> 
> 时间：2012-05-12T12:29:36.307
> 
> 标签：java, opengl, jogl, java-3d

所以我想开始使用 OpenGL，以实现我长期以来的一些游戏想法，但我注意到有几个版本的 OpenGL。

理想情况下，我也希望支持较旧的计算机，所以我想知道 OpenGL 2.1 是否是最好的版本。OpenGL 4 甚至无法在我的台式机上运行：O

游戏的最低规格类型将是 DX9 时代的显卡，因此基本上大多数现代计算机都会运行它（即使是低端板载显卡）。我会考虑 JOGL 的实现，因为我最了解 Java（过去做过 Java3D），我想部署到所有 3 个主要操作系统。

考虑到这一点，你会向我推荐什么样的书？阅读 OpenGL 3 或 4 的书是否有很大的变化？我应该接受一本关于 2.1 的旧书吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:24:29.943

只是出于好奇，你在 Linux 上吗？

Linux 确实是这里的主要瓶颈，或者更确切地说，使用开源驱动程序运行的 Linux 系统是瓶颈（使用 ATI 或 NVIDIA 驱动程序的系统不是问题，它们将支持最新和最好的）。不过，这方面的情况正在形成，随着今年早些时候 Mesa 8 的发布，终于有了一个开源的 OpenGL 3 解决方案。

我肯定会建议你不要忽略着色器，如果我在你的鞋子里，因为你使用的是 JOGL，我会考虑使用 OpenGL ES 2 配置文件来实现它（因为无论如何你都在使用 java，这将使一切都非常容易移植如果您认为合适，也可以到 android)

哦，另外，由于您正在购买书籍，我会看一下交互式计算机图形学：基于着色器的 OpenGL 的自顶向下方法（第 6 版）。

许多个月前，我在大学的一门课程中浏览了这本书的早期版本。最近买了第 6 版，只是因为我非常喜欢旧版，而且它的质量 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T12:55:15.523

OpenGL 2.1 可能是最好的。作为比较，它与 DirectX 9c 具有相对相同的兼容性，这是最新的 Windows xp 可以获得的，我知道那里有很多 XP 盒子。我的一些朋友仍然喜欢XP。

目前不支持这些 API 的显卡很可能已经过时了。

如果用户无法使用 2.1 运行您的游戏，您可能不得不建议用户购买更新的计算机。如果您采用这种想法，您甚至可能想要使用 OpenGL 3.0。

在我看来，我会尝试先学习 2.1 并进行一些练习，然后开始使用 3.x，最终使用 4.x。大型游戏公司通常不关心兼容性，让用户购买新硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T01:20:32.170

请记住，仍然支持老式 OpenGL。您不必使用现代 OpenGL，如果您正在做一些相对不复杂或非特定的事情，您完全可以使用固定功能管道。如果您想开始进行高级照明或类似的事情，那么现代 OpenGL 就派上用场了。

老实说，我有点喜欢老式的 OpenGL，它更容易，而且你可以更快地在屏幕上显示内容。现代 OpenGL 令人难以置信，但它的代价是变得更加复杂，您需要大量代码并且在开始有效使用它之前必须了解很多。

自从您询问以来，主要区别在于能够自定义着色器的工作方式。着色器是在 GPU 上运行的程序。过去，这些着色器是预先编程的，因此您几乎无法控制希望它们如何工作，因此您在 OpenGL 中可以做的事情受到限制（它完成了工作，它只是更通用，因此更少强大的）。因此，使用现代 OpenGL，您可以自定义希望着色器工作的方式，例如，有一种称为顶点着色器的东西，它是一种处理推送到 GPU 的点并计算出这些点的位置的着色器。在现代 OpenGL 中，您可以使用称为 GLSL 的东西来自定义这些着色器的工作方式

GLSL 是一种 C 风格的半汇编语言，被推送到 GPU，这是旧版和现代 OpenGL 之间的主要区别。

至于要买一本书，你将不得不为 2.x 买一本 2.0 的书，它甚至与新的 OpenGL 不在同一个球场。有一些通用概念可以转移到现代 OpenGL，但在大多数情况下它是完全不同的。我以 5 美元的价格订购了 Andre Lamothe 的 OpenGL 游戏编程？这是对 2.1 的非常好的介绍，并且代码是用 Win32 编写的，而且由于 Windows API 几乎没有改变，几乎所有代码（如果不是全部的话）的工作方式都是一样的，即使这本书已经有 12 年的历史了（去展示它写得有多好）并且它实际上有非常有趣的项目（动画机器人，前几个旋转立方体）。无论如何，祝你好运。这是一条艰难而漫长的道路，但它是如此有益。

# c# - 将所有键添加到数组然后迭代？

> ID：10563741
> 
> 赞同：-2
> 
> 时间：2012-05-12T12:29:48.237
> 
> 标签：c#, key

所以我希望能够将所有键添加到键数组中，以便我可以轻松地迭代它们并操作它们。

所以我想要这样的东西：

一点伪代码。

```
Keys[] keys = ..All the keys..;
for(int i = 0; i<keys.Length; i++) {
   //do something with the key here.
} 
```

基本上我想要的是将对象'Keys'（它是默认对象，不是我自己的）中的所有键添加到 Keys[] 数组中，以便我可以一个一个地遍历这些键。

[http://puu.sh/uhLI](http://puu.sh/uhLI)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:35:39.177

如果您的意思是要将枚举`System.Windows.Input.Key`转换为数组，那么您可以这样做：

```
Key[] keys = Enum.GetValues(typeof(Key)).Cast<Key>().ToArray(); 
```

当然你可以得到一个`IEnumerable<Key>`as

```
IEnumerable<Key> keys = Enum.GetValues(typeof(Key)).Cast<Key>(); 
```

如果您的意思是要将枚举`System.Windows.Forms.Keys`转换为数组，则适用相同的代码

```
Keys[] keys = Enum.GetValues(typeof(Keys)).Cast<Keys>().ToArray(); 
```

# android - 以编程方式嵌套权重

> ID：10563747
> 
> 赞同：-1
> 
> 时间：2012-05-12T12:30:46.540
> 
> 标签：android, android-layout, android-widget, custom-controls, custom-component

我正在创建一个扩展 LinearLayout 的自定义控件。我在这个自定义小部件中放置了一些 textView 的内部布局。我为此目的使用 addView() API，并且必须在内部使用嵌套权重。

这是否会像嵌套的 Android XML 布局一样严重影响性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:42:45.347

这是同一件事。无论是在程序中还是在 XML 中进行，都会导致系统多次测量事物。

# jquery - jquery 和 IE 提交，ajaxForm 不工作

> ID：10563748
> 
> 赞同：3
> 
> 时间：2012-05-12T12:30:47.713
> 
> 标签：jquery, ajax, internet-explorer-9, submit, ajaxform

我有一个表格：

```
<form method="post" action="/balda/server.wsgi" id="gameboard" name="gameboard" > 
```

带有提交按钮：

```
<input type="submit" name="submit" value="Поиск" style="" onmouseover="CheckElements();"> 
```

提交按钮应该发送ajax绑定过程：

```
jQuery(document).ready(function(){
    jQuery('#gameboard').submit( function() {
        $.ajax({
            url     : $(this).attr('action'),
            type    : $(this).attr('method'),
            dataType: 'json',
            data    : $(this).serialize(),
            success : function( data ) {
                       onAjaxSuccess( data );
                    }
        });
        return false;
    });
}); 
```

有接受的功能：

```
function onAjaxSuccess (result) 
```

所有这些在 chrome、ff、opera、safari 中都可以正常工作，但在 Internet Explorer 9 中不起作用（其他人没有尝试过）

在 IE9 中，结果变量为空。我尝试了另一个像这样的绑定提交按钮：

```
$('document').ready(function( result )
{
    $('#gameboard').ajaxForm( {    
        type: "POST",
        data    : $(this).serialize(),
        success: onAjaxSuccess,
        dataType: 'json',
        error: function(){ alert ( 'Error loading data format.' ); }
    }); 
}); 
```

但结果是相同的 ff chrome safari 歌剧作品，除了 IE9 。

请告诉我可能是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:00:51.607

问题是 IE9 不理解编码 cp1251 中“JSON”的格式，即使它在响应头中明确说明。以 utf-8 格式翻译 JSON 响应解决了 IE9 的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:35:27.210

确保 type="text/javascript" 中没有空格如果在定义脚本类型时有空格，那么 IE 将不允许您的 js 工作

```
<script type="text/javascript">
  ....... 
</script> 
```

# android - 如何在屏幕中央显示图像视图？

> ID：10563750
> 
> 赞同：5
> 
> 时间：2012-05-12T12:31:06.573
> 
> 标签：android, imageview, center

我创建了轮播设计应用程序，它运行良好。我希望在屏幕中央显示一个默认徽标。所以我尝试了很多方法，请帮助我。

这是我的屏幕截图： ![在此处输入图像描述](../Images/b70ec9f868e73219efe754b701507659.png)

我希望在轮播设计的中心显示一个徽标。

这是我的xml源代码：

```
>

<LinearLayout
    android:layout_weight="0.5"
    android:padding="5dip"
    android:gravity="top"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    >
        <com.globems.controls.Carousel
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/carousel"  
            pj:UseReflection="true"
            pj:Items="@array/entries"
            pj:Names="@array/names" 
            pj:SelectedItem="0"
            android:animationDuration="200"
        />    
         <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

在这段代码中，我使用 imageview 来显示徽标，但它不起作用。

更新的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:pj="http://schemas.android.com/apk/res/com.globems.main"
    xmlns:bm="com.carousel.main"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background ="@drawable/blue3"

    >

    <RelativeLayout
        android:layout_weight="0.5"
        android:padding="5dip"
        android:gravity="top"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        >
            <com.globems.controls.Carousel
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@+id/carousel"  
                pj:UseReflection="true"
                pj:Items="@array/entries"
                pj:Names="@array/names" 
                pj:SelectedItem="0"
                android:animationDuration="200"
            />    
        <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:centerinHorizontal="true"
        />

    </RelativeLayout>       
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T12:32:45.120

最好在 imageView 中使用`RelativeLayout`和添加`android:centerinParent="true"`...

**更新 ：：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:pj="http://schemas.android.com/apk/res/com.globems.main"
    xmlns:bm="com.carousel.main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/blue3" >

    <com.globems.controls.Carousel
        android:id="@+id/carousel"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        pj:Items="@array/entries"
        pj:Names="@array/names"
        pj:SelectedItem="0"
        pj:UseReflection="true"
        android:animationDuration="200" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/icon" />

</RelativeLayout> 
```

# php - 每个球员的统计数据总和（进球/助攻/卡等）

> ID：10563751
> 
> 赞同：0
> 
> 时间：2012-05-12T12:31:08.833
> 
> 标签：php, sql, pdo, statistics, sum

我正在尝试创建一个显示每个玩家统计数据的页面。总进球、助攻、黄牌、红牌等的总和。

详细信息存储在 matchdetails 中，您可以在下面看到：

```
+----------------+-------------+------+-----+---------+-------+
| Field          | Type        | Null | Key | Default | Extra |
+----------------+-------------+------+-----+---------+-------+
| player_id      | int(4)      | NO   |     | NULL    |       |
| match_id       | int(4)      | NO   |     | NULL    |       |
| season         | varchar(45) | NO   |     | NULL    |       |
| player_present | int(4)      | NO   |     | NULL    |       |
| player_away    | int(4)      | NO   |     | NULL    |       |
| goals          | int(4)      | NO   |     | NULL    |       |
| assists        | int(4)      | NO   |     | NULL    |       |
| yellowcards    | int(4)      | NO   |     | NULL    |       |
| redcards       | int(4)      | NO   |     | NULL    |       |
+----------------+-------------+------+-----+---------+-------+

+-----------+----------+-----------+----------------+-------------+-------+---------+-------------+----------+
| player_id | match_id | season    | player_present | player_away | goals | assists | yellowcards | redcards |
+-----------+----------+-----------+----------------+-------------+-------+---------+-------------+----------+
| 3         | 1        | 2011-2012 | 1              | 0           | 0     | 0       | 0           | 0        |
| 4         | 2        | 2011-2012 | 1              | 0           | 0     | 2       | 1           | 0        |
| 4         | 1        | 2011-2012 | 1              | 0           | 0     | 0       | 0           | 0        |
| 1         | 2        | 2011-2012 | 1              | 0           | 4     | 0       | 0           | 0        |
| 1         | 1        | 2011-2012 | 0              | 1           | 0     | 0       | 0           | 0        |
| 2         | 1        | 2011-2012 | 1              | 0           | 2     | 0       | 1           | 0        |
| 2         | 2        | 2011-2012 | 1              | 0           | 1     | 2       | 0           | 1        |
+-----------+----------+-----------+----------------+-------------+-------+---------+-------------+----------+ 
```

我想要实现的目标是显示每个球员的总比赛数（player_present）、客场总比赛数（player_away）、总进球数、总助攻数、总黄牌数和总红牌数。

我使用的以下代码已经显示了总进球数，但它汇总了所有球员的进球数。我希望它为每个玩家显示每个细节的总和。

```
$sql = "SELECT SUM(goals) AS goals, 
player_id
FROM matchdetails
ORDER BY player_id ASC
"; 
$results = $db->query($sql); 

echo "<table border='0' id='stats' cellpadding='0' cellspacing ='0'>
foreach ($results as $row) {    
    echo "<td class=''>" , $row['player_id'] , ' ' , "</td>"; 
    echo "<td class=''>" , $row['goals'] , "</td>";
}
    echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:33:31.940

添加一个`GROUP BY`子句：

```
SELECT SUM(goals) AS goals, player_id
FROM matchdetails
GROUP BY player_id
ORDER BY player_id ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:39:21.370

`GROUP BY`如果你想使用，你需要使用`SUM`.

```
SELECT SUM(goals) AS goals, player_id
FROM matchdetails
GROUP BY player_id
ORDER BY player_id ASC 
```

此外，不确定是否复制/粘贴错误，您的代码中缺少结束引号：

```
$sql = "SELECT SUM(goals) AS goals, 
player_id
FROM matchdetails
ORDER BY player_id ASC
"; 
$results = $db->query($sql); 

echo "<table border='0' id='stats' cellpadding='0' cellspacing ='0'>";
foreach ($results as $row) {    
    echo "<td class=''>" , $row['player_id'] , ' ' , "</td>"; 
    echo "<td class=''>" , $row['goals'] , "</td>";
}
    echo "</tr>";
echo "</table>"; 
```

# c - 在 C 中归档/添加数据

> ID：10563761
> 
> 赞同：0
> 
> 时间：2012-05-12T12:32:22.920
> 
> 标签：c, file-io

我正在尝试制作随机访问归档程序，它只是为了开始。当我查看 biodata.txt 有很多奇怪的字符时，我遇到了关于归档 addData 函数无法正常工作的问题。我正在尝试使用结构归档。

```
 #include <stdio.h>
    #include <conio.h>

    struct biodata{
           int recno,age;
           char name[20],sex;
           float salary;
    }obj;

    int main(){
         void addData(void);

         void showRecord(void);
          char choice;

         while(1){

          printf("\n\n*****CHOOSE YOUR CHOICE*****\n");
          printf("1) ADD DATA\n");

          printf("2) SHOW RECORD\n");

          printf("Enter your choice : ");

          choice = getche();
          switch(choice){
             case '1' :   //call add data
                    addData();
                    break;

             case '2' :  //call show record
                    showRecord();
                    break;

          }
         }

    }

    //Adding Record to File
    void addData(){
         FILE *fp;

         fp = fopen("biodata.txt","a+t");

         printf("\n*****ADDING DATA*****\n");
         printf("\nEnter Record No : ");
         scanf("%d",&obj.recno);
         printf("Enter Name : ");

         scanf("%s",&obj.name);
         printf("Enter age : ");
         scanf("%d",&obj.age);

         printf("Enter Sex : ");
         scanf("%c",&obj.sex);
         printf("Enter Salary : ");
         scanf("%f",&obj.salary);
     fseek(fp,(obj.recno-1)*sizeof(obj),SEEK_SET);
    fwrite(&obj,sizeof(obj),1,fp);

         fclose(fp);
    }

    void showRecord(){
         FILE *fp;
         struct biodata obj;
         int rec;
         long pos;
         fp = fopen("biodata.txt","r");

         printf("\n*****SHOWING SPECIFIC RECORD*****\n");
         printf("\nEnter Record No : ");
         scanf("%d",&rec);
         pos = rec * sizeof(obj);
         fseek(fp,pos,SEEK_SET);
         if(feof(fp)==0)
        printf("\n\nNO DATA FOUND\n");
         else{
         fscanf(fp,"%d %s %d %c %f",&obj.recno,obj.name,&obj.age,&obj.sex,&obj.salary);
         printf("\n\n\tRecord No :  %d\n",obj.recno);
         printf("\tName : %s\n",obj.name);
         printf("\tAge  : %d\n",obj.age);
         printf("\tSex  : %c\n",obj.sex);
         printf("\tSalary : %f\n",obj.salary);
         }
         getch();
         fclose(fp);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:01:41.107

您在 biodata.txt 中收到奇怪字符的原因是您在函数中使用`fwrite()`，它执行*二进制流输出*，`addData()`以输出您打算解释为文本的内容。你会想要使用类似的东西`fprintf()`。

更具体地说，奇怪的字符很可能是您输出的类型`int`和结构的成员 - 字符串和具有值的整数没有相同的二进制表示，并且期望前者（例如，整数表示为文本字符串)，而直接输出二进制整数，不进行任何转换。因此，简而言之，您需要使用诸如将整数和浮点数转换为适当的文本表示的函数。`float``"12345"``12345``fscanf(fp, "%d %s %d %c %f", ...)``12345``"12345"``addData()``fprintf()`

# php - 在 Wordpress 中创建/更新新帖子后更新/插入自定义表格

> ID：10563762
> 
> 赞同：0
> 
> 时间：2012-05-12T12:32:24.473
> 
> 标签：php, wordpress

当我创建新帖子或编辑现有帖子时，有什么方法可以更新几个 mySQL 表。

例如，我有一个名为“电视”的自定义帖子类型。我有一个名为 tvoffers 的自定义表，它存储特定电视的报价。

所以，如果我要写一篇关于 Sony Bravia 32" LCD 的帖子，我还可以在电视优惠中输入信息，例如：

```
offer_id   post_id  Offer_name   Offer_code    Offer_link   Price 
```

?

这可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:50:04.980

您需要使用 Wordpress [`hook`](http://codex.wordpress.org/Plugin_API/Hooks)。在这种情况下，您应该对动作应用一个动作钩子[`save_post`](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)（或您认为更合适的任何其他动作钩子；其中有很多）：

```
add_action( 'save_post', 'update_database_with_info' );

function update_database_with_info( $post_id ) {
    // Now do something with the post
} 
```

此代码应添加到您的`functions.php`文件中，位于您的主题目录中。

请注意，更新的页面也会触发`save_post`，因此您可能希望在函数中考虑到这一点。

# sql - postgresql 函数：最终语句返回 bigint 而不是整数

> ID：10563763
> 
> 赞同：6
> 
> 时间：2012-05-12T12:32:34.433
> 
> 标签：sql, postgresql, plpgsql

我正在使用 PostgreSQL 8.4 版并编写了以下自定义分组函数：

```
CREATE OR REPLACE FUNCTION custom_group(integer)
RETURNS TABLE (
grp INTEGER,
entry_date DATE,
col1 REAL,
col2 REAL,
col3 REAL,
col4 REAL,
col5 INTEGER,
col6 INTEGER) AS
$BODY$
    SELECT ceil(rank() OVER (ORDER BY entry_date) / $1)::int as grp
          ,entry_date, col1, col2, col3, col4, col5, col6
    FROM   table_foo 
    ORDER  BY 1;
$BODY$ LANGUAGE SQL; 
```

当我尝试将函数导入使用 psql 时，出现以下错误：

> 最终语句返回 bigint 而不是整数

我不理解错误消息，特别是因为我期待返回记录（井表）类型。

是什么导致了错误，我该如何解决？

**[[编辑]]**

我按照评论中的建议将 grp 数据类型更改为 BIGINT，但是我得到了同样的错误。细节：

```
ERROR:  return type mismatch in function declared to return record
DETAIL:  Final statement returns integer instead of bigint at column 1.
CONTEXT:  SQL function "custom_group" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:49:30.750

编辑后，您现在收到*不同*的错误。您*应该*得到这个新错误，因为您将第 1 列显式转换为`int`并将其声明为`bigint`. 我的猜测是你原来的问题是`col5`或`col6`在`table_foo`是一个`bigint`.

# macos - NSTableView 在特定条件下不重绘

> ID：10563768
> 
> 赞同：0
> 
> 时间：2012-05-12T12:32:54.823
> 
> 标签：macos, osx-lion, xcode4.3

我有一个带有两个 NSTableViews 和其他 NSViews 的 NSWindow。由于我已将 NSTableView 更改为其中一个表的视图模式，因此在特定条件下无法正确刷新。当另一个视图被放置在顶部，然后被移除并释放时，其中一个 nstableviews 不会刷新其内容并且被移除的视图仍然可见。tabledata 已正确重新加载，甚至可以用于从（不可见）行中进行选择。然而，调整大小的窗口会立即正确刷新并显示在两个 NSTableView 中。

有人可以帮忙吗？谢谢。约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:20:55.457

感谢您的建议。事实上，这一切都来自第二个视图的损坏的 XIB 文件。在进行了一些更改后，当视图开始时，我也开始收到异常。从XIB中剥离大部分子视图并重新插入后，所有问题都消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:00:10.900

您如何删除正在删除的视图？有多种方法提到它们不会导致重新显示，并且您必须自己执行此操作。您可能需要在`-setNeedsDisplay...`要删除的视图、其父视图上调用其中一种方法，或者如果所有其他方法都失败了表视图。

# android - android-sdk\docs\reference 丢失

> ID：10563770
> 
> 赞同：3
> 
> 时间：2012-05-12T12:33:06.807
> 
> 标签：android, eclipse, javadoc, android-sdk-2.1

在为 Android 项目创建 JavaDoc 时，我想在单击 Android 类/包时包含指向 Android 官方在线参考的链接。

据我所知，大多数人都是这样做的，使用离线链接，提供 android 的包列表。但我**没有这样的文件/目录*android-sdk\docs\reference***

当前的蚂蚁文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project
    name="api docs"
    basedir="."
    default="doc" >

    <target
        name="doc"
        description="my docs" >

        <javadoc
            access="private"
            classpath="C:\Program Files (x86)\Android\android-sdk\platforms\android-4\android.jar;.\libs\admob-sdk-android.jar"
            destdir="docs"
            doctitle="Testing the Title"
            packagenames="*"
            sourcepath="src"
            stylesheetfile="C:\Users\Johannes Staehlin\development\android\UITheme\doc\stylesheet.css"
            use="true"
            verbose="on" >

            <link
                href="http://d.android.com/reference"
                offline="true"
                packagelistloc="C:\Program Files (x86)\Android\android-sdk\docs\reference" > // <--- DOES NOT EXIST
            </link>
        </javadoc>
    </target>

</project> 
```

顺便说一句：我仍然收到一些警告，例如

```
cannot find symbol
  [javadoc] public class MeetingListFragment extends Fragment { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T14:31:52.017

当您在 SDK 管理器中安装“Android SDK 文档”时，将创建“docs”文件夹。

该文档似乎仅适用于最新的 Android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T20:47:06.867

您必须使用 Android SDK 管理器为其中一个 Android API 安装文档。

# objective-c - 循环的多个条件

> ID：10563774
> 
> 赞同：1
> 
> 时间：2012-05-12T12:33:40.737
> 
> 标签：objective-c, xcode

我试图在 for 循环中使用多个值。如果我创建两个单独的 for 循环，代码会重复两次，所以我尝试了这个：

```
for ((NSString* Key in [Dictionary allKeys]) && (NSString* Key2 in [Dictionary allValues])){ 
```

但是没办法！！我该怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:42:01.960

`NSDictionary`为此提供了一种特殊的基于块的方法：

```
[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    // do something with key and obj
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:39:58.373

首先，变量名应该以小写字母开头。

你知道 for 循环的“通常”形式吗？您正在使用的只是一个捷径：

```
for (int i = 0; i < [myArray count]; i++) {
    id obj = [myArray objectAtIndex:i];
    // do something with the object
} 
```

所以在你的情况下，你可以写

```
NSArray *allKeys = [dictionary allKeys];
for (int i = 0; i < [allKeys count]; i++) {
    NSString *key = [allKeys objectAtIndex:i];
    NSObject *obj = [dictionary objectForKey:key];
    // do something 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T12:47:59.537

for-in 循环不是这样工作的。它只需要一个对象来实现`NSFastEnumeration`协议并循环所有值，不多也不少。如果您需要在循环中使用键和值，则必须获取键的值：

```
for (id key in dictionary) {
   id value = [dictionary valueForKey: key];
   // do stuff with key and value
} 
```

请注意，您不需要枚举 over `[dictionary allKeys]`，`NSDictionary`实现`NSFastEnumeration`枚举键。

如果您不想自己查找值并且您的目标是可用块的操作系统（iOS 4.0 和 Mac OS X 10.6 或更高版本），您可以使用基于块的方法`enumerateKeysAndObjectsUsingBlock:`：

```
[dictionary enumerateKeysAndObjectsUsingBlock:^( id key, id value, BOOL *stop ) {
    // do stuff with key and value
}]; 
```

使用您设置的基于块的方法`*stop`来`YES`跳出循环，同时您可以`break`在常规循环中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T12:40:16.183

在迭代它们的内容之前，您需要连接两个数组：

```
NSMutableArray *allKeysAndValues = [NSMutableArray arrayWithArray:[Dictionary allKeys]];
[allKeysAndValues addObjectsFromArray:[Dictionary allValues]];
for (NSString* KeyOrValue in allKeysAndValues) {
    // Do something...
} 
```

更好的方法是使用*block*枚举您的字典，如下所示：

```
[Dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id object, BOOL *stop) {
    NSLog(@"%@ = %@", key, object);
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T12:41:25.287

我不认为你能做到这一点。只看这条线，编译器就存在语义问题。这是否意味着同时并行迭代 Key 和 Key2 ？这是否意味着只有在两个键都非零时才进入循环？这是否意味着通过两个集合的连接进行迭代？ETC...

在我看来，您的 Dictionary 可能不是您想要做的正确数据结构。

这对你想做的事情不起作用吗？

```
for (NSString* Key in [Dictionary allKeys]) {
    NSString* Key2 = [Dictionary objectForKey:Key]?
    // ...
} 
```

或者，您可以尝试将两个集合连接到一个数组中并进行迭代，如果这是您想要的行为。

# tabs - JavaFX 2.0 TabPane 应用程序在运行时将选项卡设置为默认值

> ID：10563775
> 
> 赞同：0
> 
> 时间：2012-05-12T12:34:12.423
> 
> 标签：tabs, javafx-2

大家好，我正在开发一个 JavaFX 2.0 应用程序，我想知道当我打开应用程序时是否可以以某种方式将选定的选项卡设置为第二个？我的意思是我打开应用程序，而不是查看第一个选项卡，我将看到第二个选项卡及其内容！

我正在寻找这样的东西，因为我正在使用 fxml 文件，并且我在第一个和第二个选项卡中有按钮，当我从第二个选项卡单击一个按钮时，fxml 内容将被另一个 fxml 替换，这意味着第二个将打开，但不在正确的页面上。所以任何人都可以在这里帮助我，或者任何人知道替换已经在 fxml 页面中的内容的更好主意（我认为它不能完成）？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:22:35.370

[tabPane.getSelectionModel().select(1)](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TabPane.html#getSelectionModel%28%29)

# seo - 如何让谷歌抓取pdf文件但不索引它们？

> ID：10563778
> 
> 赞同：0
> 
> 时间：2012-05-12T12:34:31.080
> 
> 标签：seo, robots.txt

如果我理解正确，您只能通过 robots.txt 告诉 google 抓取或不抓取 pdf 文件。我希望谷歌抓取文件，但不在搜索结果页面中列出它们。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:30:26.030

您可以通过 x-robots-tag http 标头将机器人指令添加到任何文件。将其设置为 noindex，按照您想要的声音进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:02:16.417

我不确定，但这不是：`<meta name="robots" content="noindex">`解决您的问题的好方法。？

# cakephp - Cakephp 致命错误：调用非对象上的成员函数 find()

> ID：10563779
> 
> 赞同：0
> 
> 时间：2012-05-12T12:34:37.503
> 
> 标签：cakephp

我收到以下错误：
注意 (8): Undefined property: ProductsController::$Category **

## 致命错误：在非对象上调用成员函数 find()

**
在第 7 行的 \shop\app\controllers\products_controller.php
**模型中：**

```
class Category extends AppModel {
var $name = 'Category';
var $hasMany = array('Product');
} 
```

**控制器：**

```
class CategoriesController extends AppController{
var $name = 'Categories';}
class ProductsController extends AppController{
var $name ='Products';

function lists(){
$categories = $this->Category->find( 'all',array('order'=>'Category.id ASC'));
} 
```

> 我有两个控制器类 1\. CategoriesController 2\. ProductsController。当我在类别控制器中使用列表方法时，它可以工作，但在产品控制器中它会出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:50:22.177

如果您想从 Category（或其他相关）模型中调用方法，您必须通过“父”（在本例中为 Prodcut）模型来执行此操作：

`$categories = $this->Product->Category->find('all', array('order' => 'Category.id ASC'));`

应该管用。

见[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#relationship-types](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#relationship-types)

# sencha-touch-2 - 如何使用 Sencha Touch2 监听控制器中的控制器触发的事件

> ID：10563780
> 
> 赞同：2
> 
> 时间：2012-05-12T12:34:43.090
> 
> 标签：sencha-touch-2

我有多个控制器，假设它们是控制器 Main 和 Sub，
Controller Sub 触发一个事件，我想在控制器 Main 上捕获它，
我该怎么办？谢谢！

**编辑：我在这里粘贴我的代码**

在子控制器中：

```
config: {

    control:    {
        'pinlist': {
            disclose: 'showPinDetails'                
        }                    
    }

} 

, showPinDetails: function(list, record) {
    console.log('showPinDetails');

    this.fireEvent('showPinDetails',list, record);

} 
```

在主控制器中：

```
requires: [
            'MyApp.controller.Sub',
            ],  

config: {

    listeners: {
        'showPinDetails': 'showPinDetails',
    }
} , 
showPinDetails: function(list, record){
    console.log('showPinDetails');       
}, 
```

所以，我刚刚从 Sub 那里得到了日志“showPinDetails”，而不是从这两个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:19:53.613

在您的 Sub 控制器中，假设您通过以下方式触发了一个事件：

```
yourComponent.fireEvent('my_event',this); 
```

然后，您必须在主控制器中以编程方式定义侦听器和处理程序。**最佳做法**是：

```
Ext.define('app.controller.Main', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
               yourComponent: 'enter your selector here, eg. #id'
        },
        control: {
               yourComponent: {
                 'my_event': 'my_event_handler'
               }
        }
    },
    my_event_handler: function() {
      //do whatever you want here
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:52:38.707

在子控制器中，在处理函数之一中，您可以编写以下代码。

```
....
btnClick : function() {
   myPanel.fireEvent('mycustomevent', this);
}
.... 
```

在主控制器中，您可以在某些组件上监听该事件，如下所示，

```
......
listeners : {
    'mycustomevent' : function() {
             // ....
             // ....
     }
}
...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T15:56:24.100

首先，您需要对其他控制器的引用。这可以通过以下方式完成：

`var other = YourAppName.app.getController('OtherController');`

然后在您的“监听”控制器（或任何其他适合您的地方）的`init`/`launch`方法中，您可以添加一个事件监听器：

```
other.on({
    myCustomEventName: function () {
        console.log('Hello World');
    }
}); 
```

如果您是手动创建子控制器而不是将其添加到控制器数组中，`app.js`那么您需要在创建子控制器后添加侦听器。

# wordpress - Wordpress 插件安装失败

> ID：10563782
> 
> 赞同：5
> 
> 时间：2012-05-12T12:34:53.373
> 
> 标签：wordpress

尝试在 wordpress 站点中安装插件时，出现以下错误

```
Unpacking the package…

Installing the plugin…

The package could not be installed. No valid plugins were found.

Plugin install failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:49:43.847

如果您有权访问 cPanel，请尝试以下操作：

1.  下载要在 WordPress 上安装的插件。
2.  打开您的 CPanel 并登录。
3.  打开“文件管理器”</li>
4.  在那里找到您的 wordpress 安装，然后单击标记为“wp-content”的文件夹</li>
5.  打开标有“插件”的文件夹</li>
6.  点击“上传文件”并上传刚刚下载的插件。
7.  单击您刚刚上传的插件文件，然后单击“提取”。
8.  打开 WordPress 并转到仪表板。点击“插件”。（您应该将新插件视为选择之一。）
9.  点击“激活”。

假设您的主机使用 HostGator，则说明了上述步骤。其他主机的步骤也类似。

干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T21:35:13.987

我的一位同事发现了这一点。检查您的 wp-config.php 并查找以下行：

定义（'FS_CHMOD_DIR'，'02775'）；定义（'FS_CHMOD_FILE'，'0664'）；

请注意，值 02775 和 0664 包含在引号中，因此 PHP 将其解释为字符串。它们是数值，不应包含在引号中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:56:55.513

看来您放错了文件夹/文件。wordpress 只有在它可以获取一个 php 文件时才意识到有一个插件，该文件的标题至少包含这一行

/* 插件名称：你的插件名称 */

所以，你必须检查..

*   解压缩插件文件，看看是否有任何包含类似标题的php文件。你的插件文件应该在.. wp-content/PLUGIN_DIRECTORY/PLUGIN_FILE.php

先检查一下，让我们知道它是否有效

# java - 如何使用访问者模式替换“instanceof”

> ID：10563783
> 
> 赞同：5
> 
> 时间：2012-05-12T12:34:59.143
> 
> 标签：java, gwt, polymorphism, instance

我对访问者模式有点不友好，但我有一个需要访问者实现的任务（如果我想避免“instanceof”检查）。

我有一个类是几个 gwt 元素的包装器：标签、面板、小部件（可以是复选框、列表框、文本框等）。我使用数组作为 UI 相似部分的集合。例如标签+复选框，标签+文本框；标签+按钮等

一些元素以不同的方式构造（例如派生自 Panel 的另一个类的一部分）。因此，我有两个相同的构造函数，但在一个地方使用了重载方法。我可以合并这些构造函数并在提到的方法中使用“instanceof”检查元素。但我不喜欢这个解决方案，想用访客模式来代替它。说实话，我不知道该怎么做，希望对你有所帮助。

这是我所拥有的一个例子：

```
public class MyWidgets {
    private String stringLabel;
    private Widget widget;
    private Panel panel;

    public MyWidgets(String stringLabel, Widget widget) {
      this.stringLabel = stringLabel;
      this.widget = widget;

      initPanel(stringLabel, widget);
    }

    public MyWidgets(ConstructedClass cs, Widget widget) {
       this.widget = widget;

       initPanel(cs, widget);
    }

    private initPanel(String label, Widget widget) {
      panel = SomeStaticUtilityClass.initPanel(new Label(label), widget);
    }

    private initPanel(ConstructedClass cs, Widget widget) {
      panel = SomeStaticUtilityClass(cs, widget);
    }
} 
```

像这样的东西（我试图让它最抽象，实际上它更难）。

所以我有一个使用“instanceof”的解决方案：

```
private initPanel(Object object, Widget widget) {
  if(object instanceof String) {
    panel = SomeStaticUtilityClass.initPanel(new Label(label), widget);
  }
  if(object instanceof ConstructedClass) {
    panel = SomeStaticUtilityClass.initPanelFromObject(cs, widget);
  }
} 
```

我想从“instanceof”中拯救出来，只留下一个构造函数，甚至，如果可能的话，一个没有重载版本的 init 方法。提前感谢您的建议，帮助。

PS> 我再说一遍，上面的类是捏造的，看起来有些误解，尤其是这个字符串标签:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:49:57.133

IMO，您现有的解决方案，有两个构造函数，很好。

您可以使用策略模式并让您的构造函数采用某个`PanelProvider`接口的实例而不是 Object。该接口将具有以下方法：

```
Panel createPanel(Widget widget); 
```

. 客户端将传递一个实例`StringPanelProvider`或一个实例`ConstructedClassPanelProvider`给构造函数。因此，您的构造函数将如下所示：

```
public MyWidgets(PanelProvider panelProvider, Widget widget) {
   this.widget = widget;
   this.panel = panelProvider.createPanel(widget);
} 
```

StringPanelProvider 实现看起来像

```
public class StringPanelProvider implements PanelProvider {

    private String s;

    public StringPanelProvider(String s) {
        this.s = s;
    }

    @Override
    public Panel createPanel(Widget widget) {
        return SomeStaticUtilityClass.initPanel(new Label(s), widget);
    }
} 
```

ConstructedClassPanelProvider 看起来是一样的。

如果您真的想使用访问者模式，那么您必须对上面的内容进行一些修改：

```
public interface Visitable {
    void accept(Visitor visitor);
}

public interface Visitor {
    void stringVisited(String s);
    void constructedClassVisited(ConstructedClass cs);
}

public class StringVisitable {
    private String s;

    public StringVisitable(String s) {
        this.s = s;
    }

    void accept(Visitor visitor) {
        visitor.stringVisited(s);
    }
}

// similar for ConstructedClassVisitable

public MyWidgets(Visitable visitable, final Widget widget) {
   this.widget = widget;
   visitable.accept(new Visitor() {
       public void stringVisited(String s) {
           panel = SomeStaticUtilityClass.initPanel(new Label(label), widget);
       }

       public void constructedClassVisited(ConstructedClass cs) {
           panel = SomeStaticUtilityClass.initPanelFromObject(cs, widget);
       }
   });
} 
```

但这对我来说似乎是过度工程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:14:22.053

使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)的一种实现如下：

```
public interface ConstructionArgVisitor {
    void visit(LabelText text);

    void visit(ConstructedClass clazz);
}

public interface ConstructionArg {
    void accept(ConstructionArgVisitor visitor);
}

public class LabelText implements ConstructionArg {
    private final String text;

    public LabelText(String str) {
        this.text = str;
    }

    @Override
    public void accept(ConstructionArgVisitor visitor) {
        visitor.visit(this);
    }

    public String getString() {
        return this.text;
    }
}

public class ConstructedClass implements ConstructionArg {
    @Override
    public void accept(ConstructionArgVisitor visitor) {
        visitor.visit(this);
    }
}

public class MyWidgets implements ConstructionArgVisitor {
    private String stringLabel;
    private Widget widget;
    private Panel panel;

    public MyWidgets(ConstructionArg constructionArg, Widget widget) {
        this.widget = widget;
        constructionArg.accept(this);
    }

    @Override
    public void visit(LabelText labelText) {
        this.stringLabel = labelText.getString();
        this.panel = SomeStaticUtilityClass.initPanel(new Label(labelText.getString()), this.widget);
    }

    @Override
    public void visit(ConstructedClass clazz) {
        this.panel = SomeStaticUtilityClass.initPanelFromObject(clazz, this.widget);
    }
} 
```

该解决方案与 JB Nizet 的解决方案非常相似。这个实现`ConstructorArgVisitor`和 JB Nizet 的`Visitor`接口之间的区别在于方法名称。该`visit`方法在 中被重载`ConstructorArgVisitor`，而在 JB Nizet 中`Visitor`，方法名称包含其中的类型（例如，`stringVisited`）。重载该`visit`方法更类似于[Wikipedia 页面上的访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern#Java_example)示例。

我同意 JB Nizet 的观点，即使用访问者模式可能有点过度设计；但是，如果您`PanelProvider`按照 JB Nizet 的建议使用 a，除非您提前知道参数是 a`String`或，否则您可能仍需要进行检查，这是您试图避免的。`ConstructedClass``instanceof`

现在这是我个人的偏好，所以如果你愿意，你可以忽略：尽量不要像 Misko Hevery 在“[缺陷：构造函数做真正](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)的工作”中建议的那样在构造函数中做工作。例如，您可以将构造逻辑移动到工厂中。以下使用上述访问者模式的修改版本：

```
public interface ConstructionArgVisitor<T> {
    T visit(LabelText text);

    T visit(ConstructedClass clazz);
}

public interface ConstructionArg {
    <T> T accept(ConstructionArgVisitor<T> visitor);
}

public class LabelText implements ConstructionArg {
    private final String text;

    public LabelText(String str) {
        this.text = str;
    }

    @Override
    public <T> T accept(ConstructionArgVisitor<T> visitor) {
        return visitor.visit(this);
    }

    public String getString() {
        return this.text;
    }
}

public class ConstructedClass implements ConstructionArg {
    @Override
    public <T> T accept(ConstructionArgVisitor<T> visitor) {
        return visitor.visit(this);
    }
}

public class MyWidgetsFactory implements ConstructionArgVisitor<MyWidgets> {
    private final Widget widget;

    public MyWidgetsFactory(Widget widget) {
        this.widget = widget;
    }

    public MyWidgets createMyWidgets(ConstructionArg constructionArg) {
        return constructionArg.accept(this);
    }

    @Override
    public MyWidgets visit(LabelText text) {
        return new MyWidgets(text.getString(), this.widget, SomeStaticUtilityClass.initPanel(
                new Label(text.getString()), this.widget));
    }

    @Override
    public MyWidgets visit(ConstructedClass clazz) {
        return new MyWidgets(null, this.widget, SomeStaticUtilityClass.initPanelFromObject(clazz, this.widget));
    }
}

public class MyWidgets {
    private final String stringLabel;
    private final Widget widget;
    private final Panel panel;

    public MyWidgets(String stringLabel, Widget widget, Panel panel) {
        this.stringLabel = stringLabel;
        this.widget = widget;
        this.panel = panel;
    }
}

public static void main(String[] args) {
    final Widget widget = ...;
    final MyWidgetsFactory factory = new MyWidgetsFactory(widget);

    // create MyWidgets from label text
    final String str = ...;
    final MyWidgets labelWidget = factory.createMyWidgets(new LabelText(str));

    // create MyWidgets from constructed class
    final ConstructedClass clazz = ...;
    final MyWidgets constructedClassWidget = factory.createMyWidgets(clazz);
} 
```

我还看到您在构造过程中调用了静态方法。尽管众所周知，在许多代码库中 GUI 很难测试，但您可能需要阅读“[缺陷：脆弱的全局状态和单例](http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/)”和“[指南：编写可测试代码”](http://misko.hevery.com/code-reviewers-guide/)。

# symfony1 - 如何在 Symfony 1.4 中显示未设置的小部件

> ID：10563787
> 
> 赞同：0
> 
> 时间：2012-05-12T12:35:21.170
> 
> 标签：symfony1, widget, show, unset

如何在不使用 javascript 的情况下在 Form.class.php 中的 Symfony 1.4 中显示未设置的小部件？我在配置功能开始时取消了小部件的设置。我想在回调验证函数中显示它。谢谢。

# javascript - 如何使用传单定位定位用户？

> ID：10563789
> 
> 赞同：11
> 
> 时间：2012-05-12T12:35:37.070
> 
> 标签：javascript, leaflet

我正在尝试找到一个用户并使用传单将地图设置到这个位置：

```
 <script>
    var map;

    function initMap(){
        map = new L.Map('map',{zoomControl : false});
        var osmUrl = 'http://{s}.tile.openstreetmap.org/mapnik_tiles/{z}/{x}/{y}.png',
            osmAttribution = 'Map data &copy; 2012 OpenStreetMap contributors',
            osm = new L.TileLayer(osmUrl, {maxZoom: 18, attribution: osmAttribution});
        map.setView(new L.LatLng(51.930156,7.189230), 7).addLayer(osm);
    }

    function locateUser(){
        map.locate({setView : true});
    }
</script> 
```

在执行浏览器请求许可，但没有任何反应？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-13T12:39:08.100

这是一个快速破解。我推荐这个插件[https://github.com/domoritz/leaflet-locatecontrol](https://github.com/domoritz/leaflet-locatecontrol)

```
var loadMap = function (id) {
    var HELSINKI = [60.1708, 24.9375];
    var map = L.map(id);
    var tile_url = 'http://{s}.tile.osm.org/{z}/{x}/{y}.png';
    var layer = L.tileLayer(tile_url, {
        attribution: 'OSM'
    });
    map.addLayer(layer);
    map.setView(HELSINKI, 19);

    map.locate({setView: true, watch: true}) /* This will return map so you can do chaining */
        .on('locationfound', function(e){
            var marker = L.marker([e.latitude, e.longitude]).bindPopup('Your are here :)');
            var circle = L.circle([e.latitude, e.longitude], e.accuracy/2, {
                weight: 1,
                color: 'blue',
                fillColor: '#cacaca',
                fillOpacity: 0.2
            });
            map.addLayer(marker);
            map.addLayer(circle);
        })
       .on('locationerror', function(e){
            console.log(e);
            alert("Location access denied.");
        });
};

loadMap('map'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T13:05:37.903

您的地图变量的范围有问题。我在这里发布了一个修复您的代码的示例：http: [//jsfiddle.net/XwbsU/3/](http://jsfiddle.net/XwbsU/3/)

当您单击“找到我！”时，您应该会收到浏览器地理位置弹出窗口。

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T17:33:34.490

或者，您可以将所有代码放在 getLocation() 函数下，并在加载网页时调用该函数，您应该已经准备就绪。我使用这种方式，一旦浏览器加载它就会弹出一个共享数据的问题。

# php - preg_match 用于文件扩展名列表

> ID：10563796
> 
> 赞同：0
> 
> 时间：2012-05-12T12:36:42.133
> 
> 标签：php, preg-match

我想就我为验证逗号分隔的文件扩展名列表而构建的一个简单正则表达式发表您的意见（在逗号字符之后或之前也可能有一个或多个空格）。

此正则表达式应返回以下值：

```
$list = 'jpg,png,gif'; // valid
$list = 'jpg   , png, gif'; // valid
$list = 'jpg'; // valid
$list = 'jpg, png, gif'; // valid
$list = 'jpg png, gif'; // INVALID
$list = 'jpg png'; // INVALID 
```

我正在使用下面的正则表达式，你怎么看？它可以优化或缩短吗？

```
if(!preg_match( '#^[0-9a-zA-Z]+([ ]*,[ ]*[0-9a-zA-Z]+)*$#' , $list))
{
    echo 'invalid extension list';
} else{
    echo 'valid extension list';
} 
```

谢谢你的好建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:41:54.317

也许更简单的方法是拆分`,`并查看是否有任何结果包含空格。

```
function isvalid($var)
{
    return !strpos ($var, ' ');
}

$array = explode (',', $list);
$array_filtered = array_filter ($array, 'isvalid');

if ($array == $array_filtered) {
    echo 'Valid';
}
else {
    echo 'Invalid';
} 
```

这应该比使用正则表达式快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:44:24.757

你也可以缩短一点：

```
preg_match('#^\w+(\s*,\s*\w+)*$#' , $list) 
```

# jquery - 为静态按钮动态分配事件的优势

> ID：10563799
> 
> 赞同：1
> 
> 时间：2012-05-12T12:37:16.880
> 
> 标签：jquery, html

我是 Jquery 的新手，在许多示例和代码中，我看到事件处理程序是使用 Jquery ( $("#button").click(somefunction) ) 为 HTML 组件动态分配的，即使它们是静态创建的。

将事件动态绑定到静态创建的按钮有什么好处吗？如果组件是动态创建的，我可以获得优势吗？有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:39:30.343

您获得的优势是，它将业务逻辑与标记分开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T12:41:00.793

是的，它与代码维护以及 HTML 和 JS 之间的分离有关。

将所有点击事件分配在一个地方意味着：

1.  你的 HTML 会更干净，更容易阅读
2.  当您必须更改某些内容时，您会将所有代码放在一个地方，从而更容易找到/修改内容。

当然，从纯技术的角度来说，你也可以`onclick`直接在 HTML 中添加事件，也可以，但是最好将 HTML 和 JS 分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:45:33.197

还有一些是，

1.  外部化代码将有助于快速加载页面。前提是您正确地将其外部化。
2.  它创建了一个 SEO 友好的 HTML 页面。
3.  您可以使用 javaScript 添加更多动态行为。

# nhibernate - NHibernate Projections - 如何投影集合

> ID：10563804
> 
> 赞同：5
> 
> 时间：2012-05-12T12:37:56.663
> 
> 标签：nhibernate

有一种情况，我只需要从一个实体中选择一个/几列，但在一个查询中选择多个子级。我一直在尝试预测，但在 collections 属性上出现错误。这是一种正常的情况，但无法找到有关投影集合的信息 - 只有属性。

```
Customer customerAlias = null;
Order orderAlias = null;
 var list = _session.QueryOver<Customer>(() => customerAlias)
                    .JoinAlias(x => x.Orders, () => orderAlias, JoinType.LeftOuterJoin)
                    .Select(
                       Projections.Property(() => customerAlias.Name),
                       Projections.Property(() => customerAlias.Orders))//this is the issue
                   .List<object>(); 
```

返回的错误是：

```
System.IndexOutOfRangeException : Index was outside the bounds of the array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:21:58.430

不能在 NH 3.3 中完成。[https://nhibernate.jira.com/browse/NH-3176](https://nhibernate.jira.com/browse/NH-3176)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:20:11.657

如何反转查询（假设 Order 具有 Customer 属性）：

```
var list = _session.QueryOver<Order>()
                .Select(
                   Projections.Property(o => o.Customer.Name),
                   Projections.Property(o => o.OrderProperty1),
                   Projections.Property(o => o.OrderProperty2)) // etc..
               .List<object[]>(); 
```

# php - 清理本地主机中的 URL

> ID：10563806
> 
> 赞同：0
> 
> 时间：2012-05-12T12:38:31.870
> 
> 标签：php, apache, .htaccess, localhost

我目前正在尝试在我的在线网站中使用该（.htaccess）脚本之前清理我的本地机器（wamp）中的 URL。这是我的本地主机地址

```
 http://localhost/index.php
  http://localhost/people.php
  http://localhost/current.php 
```

我想清理这个网址

```
 http://localhost/home/
  http://localhost/People/
  http://localhost/Current/ 
```

分别。但是对于开始（也为了简单），我只想将**index.php**文件更改为**home**。我在搜索网页时发现了这个脚本

```
RewriteEngine on
RewriteRule ^home/?$ index.php [NC,L] 
```

但是当我在我的本地机器上尝试这个脚本时没有任何效果，我的网址仍然显示如下

```
 http://localhost/index.php 
```

我不知道我哪里出错了，任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:41:44.040

打开 .htaccess 并插入以下代码：

```
RewriteEngine On
Options -multiviews

RewriteRule ^home/$ index.php [L]
RewriteRule ^People/$ people.php [L]
RewriteRule ^Current/$ current.php [L] 
```

然后转到您的网站 URL 并执行：/home/（和 /People//Current/）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:44:27.390

您可能对重写的工作原理有某种误解：

```
RewriteEngine on
RewriteRule ^home/?$ index.php [NC,L] 
```

这意味着如果 URL（在浏览器中键入）与第一个参数 ( `^home/?$`) 匹配，则该请求应重写为`index.php`.

你应该做的是，而不是试图`index.php`在浏览器栏中输入，输入`http://localhost/home/`. 您应该会看到索引页，即使浏览器地址栏显示`/home/`.

# django - 使用 south 时正确的工作流程，并使开发和生产 django 环境与 mercurial 同步

> ID：10563809
> 
> 赞同：1
> 
> 时间：2012-05-12T12:38:40.813
> 
> 标签：django, mercurial, django-south

我想使用南来管理使用 mercurial 的开发和生产中的数据库更改。但是我不知道该怎么办！

假设我有一个根本不使用南的项目。它在生产和开发中与 mercurial 同步。一切正常！

现在，有一天我想对应用程序测试的模型进行更改。所以，我在我的开发环境中是

```
1\. python manage.py convert_to_south 测试
2\. python manage.py 迁移

```

现在我改变模型然后

```
3\. python manage.py schemamigration test --auto
4\. python manage.py 迁移

```

现在我把一切都交给善变

```
5.hg 删除
6\. hg commit -m "向南转换并改变了东西"
7.hg推生产

```

在 uat 中一切似乎都运行良好，但是我无法让它在生产中运行:(

所以我认为正确的工作流程是登录生产并应用更改

```
1\. 汞更新

```

然后只是迁移应用程序

```
2\. python manage.py 迁移

```

但这不起作用，我收到一个奇怪的“test_table”错误已经存在（出于某种原因，南方想再次装箱）。另外，我在这里阅读了[将 South 添加到 Django 项目、开发和生产](https://stackoverflow.com/questions/4035296/adding-south-to-django-project-development-production)中，我应该在进行迁移之前执行 python manage.py migrate test --fake 0001 - 但这也没有用（我收到一个缺少表的错误或类似的东西）。

所以 ？我应该怎么办 ？将迁移应用于开发和环境的正确方法是什么？我是否应该将我的应用程序的 /migrations/ 目录从 mercurial 中移除并运行

```
python manage.py convert_to_south 测试
和
python manage.py schemamigration test --auto

```

开发和生产？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T05:19:01.803

`convert_to_south`只是两个链接在一起的命令：`schemamigration --init`+ `migrate --fake`. 因此`init`，只需像往常一样创建迁移，并`fake`确保您不需要手动应用迁移。但是您的服务器会进行迁移，而不是创建它，因此您确实需要运行`manage.py migrate test 0001 --fake`它并且它应该可以工作。`syncdb`可能是你安装后没有运行，`south`所以服务器数据库没有`south`表。

所以，运行：

```
manage.py syncdb
manage.py migrate test 0001 --fake 
```

# visual-studio-2010 - 在哪里可以找到 - DataSet VC++ 2010 Ultimate..？仅在 Visual C++ 中缺少模板..？

> ID：10563816
> 
> 赞同：1
> 
> 时间：2012-05-12T12:39:34.730
> 
> 标签：visual-studio-2010, templates, visual-c++

我有 Visual Studio 2010 终极版...当我尝试创建一个数据集时，模板中缺少它...仅适用于 Visual C++...但所有其他人都喜欢 C#，VB 无处不在...真的让人头疼...仅在 Visual C++ 中缺少它...我想创建一个数据集和数据表以将数据发送到报告...但我找不到它..

因此我用谷歌搜索并找到了执行以下操作的建议

```
1.) I cleared ProjectTemplatesCache & ItemTemplates Cache..

2.) devenv.exe / installvstemplates 
```

但是没用....那里我找不到DataSet ...模板了..所以对我有什么建议吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:53:24.430

下面的代码是 XML 模式

```
<?xml version="1.0" encoding="utf-8"?>
//DataSet Name - EmpDataSet
<xs:schema id="EmpDataSet" xmlns="urn:Emp" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" targetNamespace="urn:Emp" attributeFormDefault="qualified "
    elementFormDefault="qualified">
  <xs:element name ="EmpDataSet" msdata:IsDataSet="true">
    <xs:complexType>
      <xs:choice maxOccurs ="unbounded">
        <xs:element name ="EmpTable">
          <xs:complexType>
            <xs:sequence>

              // Below Code is Column Fields

              <xs:element name ="sl_no" type ="xs:int" minOccurs ="0" />
              <xs:element name ="emp_no" type ="xs:string" minOccurs ="0" />
              <xs:element name ="emp_detail" type ="xs:string" minOccurs ="0" />

            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:31:59.397

此功能在 Visual Studio for C++ 本机项目中从未存在，仅适用于 C++/CLI，即使对于那些，[自 Visual Studio 2008 以来它也被禁用](https://connect.microsoft.com/VisualStudio/feedback/details/292118/cannot-add-data-source-in-c-cli-winforms-project)，该页面上 Microsoft 代表的回复说：

> Visual Studio 2008 不再支持向 Visual C++ 项目添加新数据源（数据库或 Web 服务）。

作为 C++/CLI 的解决方法，您可以创建一个空的 C# 项目，在其中添加数据集，然后从主项目中添加对它的引用。

# prolog - prolog将函数作为变量传递，如何添加参数？

> ID：10563818
> 
> 赞同：5
> 
> 时间：2012-05-12T12:39:39.907
> 
> 标签：prolog, declarative

我有这个任意函数，我需要用不同的变量多次调用。顺便说一句，这是 SWI-Prolog

```
perform(V1,V2,V3,Function,Result):-
    % 
    % do little stuf.
    %
    Function(Arg1,Arg2,Result). 
```

这会产生语法错误。

但是在不添加参数的情况下将函数作为变量传递可以正常工作，如下面的代码所示：

```
perform(Function):-
    Function.

sayHello:-
    write('hello').

:-perform(sayHello). 
```

那么如何给变量函数添加参数呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T14:50:20.713

特别是在 SWI-Prolog 中，您可以使用`call`. 引用手册：

> 呼叫（：目标，+ExtraArg1，...）
> 
> 将 ExtraArg1, ExtraArg2, ... 附加到 Goal 的参数列表并调用结果。例如，call(plus(1), 2, X) 将调用 plus(1, 2, X)，将 X 绑定到 3。 call/[2..] 构造由编译器处理。谓词 call/[2-8] 被定义为真实（元）谓词，可通过 current_predicate/1、predicate_property/2 等进行检查。更高的参数由编译器和运行时系统处理，但谓词不是可供检查。

其中加号表示 ，`argument must be fully instantiated to a term that satisfies the required argument type`冒号表示`agument is a meta-argument`（这也意味着“+”）。

# c++ - 如何在不损失精度的情况下将 32 位随机函数输出缩放为 0...1 值？

> ID：10563820
> 
> 赞同：1
> 
> 时间：2012-05-12T12:40:10.517
> 
> 标签：c++, random, floating-point-precision

我当前的功能如下：

```
float random(){
    return (float)rand_xor128()/UINT_MAX;
} 
```

但是后来我意识到，一旦将值转换为浮点数，它就会失去精度，对吧？

我应该先把它转换成双倍吗？

```
float random(){
    return (float)((double)rand_xor128()/UINT_MAX);
} 
```

但这感觉不是正确的做法。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:01:45.730

您有一个 32 位的值，您想将其压缩到 [0,1) 范围内。这要求您能够表示`2^32`该范围内的不同值。

A*总共*`float`有 2^32 种可能的值。换句话说，float 永远无法满足您的需求。如果你返回一个双精度数，你*也许*可以做到这一点（我没有运行数字来准确确定它），但否则，你必须编写自己的数据类型，它完全符合你的需要。

 **但是，如果您将该值存储到浮点数中，您将失去精度，因为它在 [0,1) 范围内根本没有足够的精度来满足您的要求。**

# android - SDK 与 SPen SDK 类似，但可在每部手机上运行

> ID：10563825
> 
> 赞同：2
> 
> 时间：2012-05-12T12:40:44.980
> 
> 标签：android, canvas, samsung-mobile

是否有任何类似于三星的 SPen SDK 的 SDK，但可以让您使用普通手写笔进行绘图（SPen SDK 仅适用于 S Pen）？

# php - 将（多维）数组推送到php中的多维数组

> ID：10563828
> 
> 赞同：0
> 
> 时间：2012-05-12T12:41:04.257
> 
> 标签：php, mysql, arrays, multidimensional-array

我正在尝试将我的新闻提要结果转换为一个数组，以便我现在可以对结果进行分组并拥有诸如“Peter 和其他 6 人发表评论……”之类的条目

我想问其他人，他们通过 in_array(); 评论了同一个线程；将是一个很好的解决方案。但是现在我很难将整个 mysql 结果转换为一个数组，而不必更改原始 while 循环的整个结构，其中所有数据库值都是使用 $getnews_row 请求的。我认为我创建数组的方式可能存在错误。

我花了一个小时在谷歌上搜索，但我找不到任何将变量（数组）实际添加到多维数组的示例。

有任何想法吗？

我的PHP：

```
$x = 0;
while($getnews_row = mysql_fetch_array($res_getnews))
{
$this_getnewsrow = array
  (
  [$x] => array
  ($getnews_row)
  )
  $x++;
}

$x = $x_total;
$x=0;
while($x < $x_total)
{

    $getnews_row =  $this_getnewsrow[$x];

    echo $getnews_row['id'];

    x++;
} 
```

我的输出：

解析错误：语法错误，第 48 行的 /newsfeed/index.php 中出现意外的 '['，期待 ')'（此摘录中的第 6 行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:46:06.543

您不能以这种方式初始化数组。

尝试更换这个

```
$x = 0;
while($getnews_row = mysql_fetch_array($res_getnews))
{
$this_getnewsrow = array
  (
  [$x] => array
  ($getnews_row)
  )
  $x++;
} 
```

有了这个

```
while($getnews_row = mysql_fetch_array($res_getnews))
{
$this_getnewsrow[] = $getnews_row;
} 
```

看看[PHP：数组](http://php.net/manual/en/language.types.array.php)

* * *

也尝试替换`$x = $x_total;`为`$x_total = $x;`

并在第二个循环中添加`$`到变量。`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:45:44.097

试试这个：

```
$i = 0;
while($getnews_row = mysql_fetch_array ($res_getnews)) {
    $this_getnewsrow [$i] = $getnews_row;
    $i++;
}

$j = 0;
while($j < $i_total)
{

    $getnews_row =  $this_getnewsrow[$j];

    echo $getnews_row ['id'];

    $j++;
} 
```

更新

```
<?php
while ($row = mysql_fetch_array($res_getnews, MYSQL_ASSOC)) {
    echo $row ['id'];
} 
```

# .net - 解析对同一应用程序中同一 .NET 程序集的不同版本的编译时引用

> ID：10563829
> 
> 赞同：5
> 
> 时间：2012-05-12T12:41:09.140
> 
> 标签：.net, f#

## 在面向 .NET 4.0 的 F# 应用程序中使用 PowerPack 会带来一些痛苦

`FSharp.PowerPack.dll`仍然（*为什么？他们会放弃它吗？*）仅引用`FSharp.Core.dll 2.0`哪些目标 .NET 2.0。同时`FSharp.Core.dll 4.0`不兼容.NET 2.0。

当两者都在 GAC时`FSharp.Core.dll 2.0`，情况如何？`4.0`它`4.0`在与当前的 .NET 框架兼容时加载，然后告诉`FSharp.PowerPack.dll`所有内容都已加载。这可以在 Visual Studio 调试器中看到，当应用程序加载时，在 Reflector 中遍历依赖项时。

一切都很好，直到我们需要以可移植的方式重新分发软件。当我们真正需要时，我们将复制`FSharp.Core.dll 4.0`（与 .NET 4.0 一致）并复制`FSharp.PowerPack.dll`到应用程序本地代码库。然后它（*突然！*）抱怨`FSharp.Core.dll 2.0`没有满足对[来自PowerPack]的引用。

只需将引用重定向到现有版本的 FSharp.Core.dll，即可以[F# PowerPack Target Runtime](https://stackoverflow.com/questions/4566858/f-powerpack-target-runtime)主题中提到的残酷方式轻松解决该问题。

## 那么问题是什么？

问题是当我们将安装的程序集引用到 GAC 时，为什么一切正常而没有任何重定向。对于 GAC，它似乎对 FSharp.Core.dll 2.0 本身的存在感到满意，然后将其丢弃，使用 4.0 版本用于所有目的。这背后的逻辑是什么？

*Jeffrey Richter*通过 C# 的 CLR 似乎对此一无所知...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T02:34:33.050

首先，您需要知道 CLR 4.0 引入了与 CLR 2.0 不同的 GAC。CLR 4.0 的 GAC 看到旧版本，但反之则不然。

现在，在 CLR 4.0 GAC 中有*一个*重定向 - FSharp.Core 的发布者策略文件，它将任何请求重定向到加载版本 2.0 到 4.0。这包含与您链接到的配置文件基本相同的内容。

在 CLR 2.0 GAC 中没有这样的重定向，显然是因为 4.0 不在该 GAC 中并且无论如何都不兼容。

要亲自查看，请在加载 FSharp.Core 时使用融合日志查看器 (fuslogvw) - 它应该显示正在发生的重定向。

还请查看我的 CLR 4.0 GAC 中的 pub.config 文件位于 C:\Windows\Microsoft.NET\assembly\GAC_MSIL\policy.2.0.FSharp.Core\v4.0_2.0.0.0__b03f5f7f11d50a3a

# android - 示例适配器类错误

> ID：10563841
> 
> 赞同：0
> 
> 时间：2012-05-12T12:42:33.673
> 
> 标签：android, simplecursoradapter

基于这个例子[Simple Cursor Adapter problem](https://stackoverflow.com/questions/6660072/simple-cursor-adapter-problem) 我认为错误与 xml 布局有关

数据库详细信息：

```
 public static final String question = "quest";
  private static final String DATABASE_NAME = "QuestionDB";
private static final String DATABASE_TABLE = "questions";
   DBAdapter da = new DBAdapter(this);

 // open the database connection
da.open();
// assign to the cursor the ability to loop through the records.
Cursor c = da.getAllContacts(); 
```

方法 getAllContacts(); 基于以下代码

```
 public Cursor getAllContacts() 
  {
         return db.query(DATABASE_TABLE, new String[] {KEY_ROWID,
   question, possibleAnsOne,possibleAnsTwo,  possibleAnsThree,realQuestion}, null,   null, null, null, null);
}

startManagingCursor(c);

// move to the first element
c.moveToFirst();

 String[] from = new String[]{"quest"};
 int[] to = new int[] { R.id.name_entry };

 SimpleCursorAdapter sca = new SimpleCursorAdapter(this, R.layout.layout_list_example, c, from, to);
 setListAdapter(sca); 
```

这是 xml 文件 layout_list_example.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <ListView
        android:id="@android:id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

list_example_entry.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/name_entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="28dip" />
       <TextView
        android:id="@+id/number_entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="28dip" />
</LinearLayout> 
```

扩展内容设置内容审查消除了该问题。我会记住这一点，以备将来之用。我不得不将列改回 quest，因为它说不存在列，当我运行活动时，我得到一个黑屏，上面有线条，我猜是一个没有数据的列表视图。

这是错误日志

```
05-12 19:52:22.570: E/AndroidRuntime(534): FATAL EXCEPTION: main
05-12 19:52:22.570: E/AndroidRuntime(534): java.lang.RuntimeException: Unable to start activity ComponentInfo{alex.android.basic.databse.questions/alex.android.basic.databse.questions.Result}: java.lang.IllegalArgumentException: column 'question' does not exist
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.os.Looper.loop(Looper.java:137)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-12 19:52:22.570: E/AndroidRuntime(534):  at java.lang.reflect.Method.invokeNative(Native Method)
05-12 19:52:22.570: E/AndroidRuntime(534):  at java.lang.reflect.Method.invoke(Method.java:511)
05-12 19:52:22.570: E/AndroidRuntime(534):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-12 19:52:22.570: E/AndroidRuntime(534):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-12 19:52:22.570: E/AndroidRuntime(534):  at dalvik.system.NativeStart.main(Native Method)
05-12 19:52:22.570: E/AndroidRuntime(534): Caused by: java.lang.IllegalArgumentException: column 'question' does not exist
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:267)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.widget.SimpleCursorAdapter.findColumns(SimpleCursorAdapter.java:332)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:81)
05-12 19:52:22.570: E/AndroidRuntime(534):  at alex.android.basic.databse.questions.Result.onCreate(Result.java:37)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.Activity.performCreate(Activity.java:4465)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-12 19:52:22.570: E/AndroidRuntime(534):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:58:03.233

这是不正确的 `String[] from = new String[]{"quest"};`

String[] 必须是光标中某一列的名称，因为它用于将数据从光标映射到列表视图。

我想你想要这个：

```
String[] from = new String[]{"question"}; 
```

编辑

如果找不到，那么我猜您需要为活动设置内容视图。

```
setContentView(R.layout.layout_list_example); 
```

编辑 2

我认为我们一直在盯着它看却没有看到它...在您的查询中，将每个项目括在引号中，除了 KEY_ 一个。“问题”等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:48:00.193

如果你使用`ListActivty`你的布局 xml 应该有带有 id 的 listview`android:id="@android:id/list"`

例如：

```
<ListView
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="wrap_content" >
</ListView> 
```

所以改变`android:id="@android:id/android:list"`你`layout_list_example.xml`的`android:id="@android:id/list"`应该可以解决你的问题

希望这可以帮助

# debugging - windbg：如何获取符号的源文件名？

> ID：10563842
> 
> 赞同：2
> 
> 时间：2012-05-12T12:42:35.000
> 
> 标签：debugging, windbg

假设我有一个符号 foo!bar_func，那么我怎样才能得到这个符号函数的源文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:37:30.777

假设您有符号设置并且行号信息可用，那么命令`ln`（代表“列出最近的符号”）将为您提供帮助。例如：

```
0:000> ln MyProgram!main
c:\scratch\MyProgram\program.cpp(224)
(000819d0)   MyProgram!main   |  (00081e10)   MyProgram!time
Exact matches:
0:000> 
```

# javascript - javascript确保输入文件不为空

> ID：10563844
> 
> 赞同：0
> 
> 时间：2012-05-12T12:42:55.927
> 
> 标签：javascript, jquery, html

# html代码

```
<div id="signup">
    <form method="POST" action="#">
        <p>
            <label>Frist Name</label>
            <input type="text" id="sufName"/>
        <p>
        <p>
            <label>Last Name</label>
            <input type="text" id="sulName"/>
        <p>
        <p>
            <label>Email</label>
            <input type="text" id="suEmail"/>
        <p>
        <p>
            <label>Mobile Number</label>
            <input type="text" id="suMNumber"/>
        <p>
        <p>
            <label>Password</label>
            <input type="password" id="suPassword"/>
        <p>
        <p>
            <label>Re Password</label>
            <input type="password" id="suRePassword"/>
        <p>
        <p>
            <input type="submit" class="button" value="sign up" onclick="signup()"/>
        </p>
    </form>
</div> 
```

当我按下注册按钮时，我想确保没有输入文件为空，如果任何输入字段为空，我将在该输入字段中添加一条错误消息

# javascript代码

```
function signup(){
    var inputs = document.getElementsByTagName('input');
    for(var i=0;i<inputs.length;i++){
        alert('d');
        isEmptyInput(inputs[0].id);
    }
}
function addErrorMessage(element){
    clearErrorMessage();
    var error = document.createElement('span');
    error.setAttribute('class', 'errorMessage');
    error.innerHTML="select coutry first";
    element.appendChild(error);
}
function clearErrorMessage(){
    var errors = document.getElementsByClassName('errorMessage');
    for(var i=0;i<errors.length;i++){
        var kk=errors[i].parentNode;
        kk.removeChild(errors[i]);
    }
}
function isEmptyInput(input){
    if(input.value===""){
        var parent = input.parentNode;
        addErrorMessage(parent);
    }
} 
```

但不起作用，即使函数 isEmptyInput 也不起作用 jsfiddle 复制 [代码](http://jsfiddle.net/Wiliam_Kinaan/h9njC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:45:38.913

演示：http: [//jsfiddle.net/h9njC/9/](http://jsfiddle.net/h9njC/9/)

HTML：

```
<form method="POST" action="#" onSubmit='return false;'> 
```

js：

```
function signup(){
    var inputs = document.getElementsByTagName('input');
    clearErrorMessage();
    for(var i=0;i<inputs.length;i++){
        isEmptyInput(inputs[i]);
    }
    return false;
}
function addErrorMessage(element,field){
    var error = document.createElement('span');
    error.setAttribute('class', 'errorMessage');
    error.innerHTML = "select "+field+" first";
    element.appendChild(error);
}
function clearErrorMessage(){
    var errors = document.getElementsByClassName('errorMessage');
    for(var i=0;i<errors.length;i++){
        var kk=errors[i].parentNode;
        kk.removeChild(errors[i]);
    }
}
function isEmptyInput(input){
    if(input.value===""){
        var parent = input.parentNode;
        var field = parent.getElementsByTagName('label');
        addErrorMessage(parent,field[0].innerHTML);
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:00:54.430

试试看：

```
$("input[type=submit]").click(function () {
    var err = false;
    $(this).closest("form").find("input[type='text']").each(function () {
        if ($(this).val() == "") {
            addErrorMessage(this); //or any other error handling you like                
            err = true;
        }
    });
    return !err;        
}); 
```

我写了一个[用于表单验证的 jquery 插件](https://sourceforge.net/projects/easyvalidator/)。看看这个。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T13:14:42.287

1.  由于您正在使用`jquery`，因此可以轻松完成。

2.  而且您还没有`p`正确关闭标签。

3.  首先，您应该防止默认功能，因为它正在提交中。

4.  每次调用都附加是不好的，因为每次提交时错误跨度的数量都会增加。

像下面这样更改 HTML 并尝试 jquery。

**HTML：**

```
<form method="POST" action="#">
    <p>
        <label>Frist Name</label>
        <input type="text" id="sufName"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <label>Last Name</label>
        <input type="text" id="sulName"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <label>Email</label>
        <input type="text" id="suEmail"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <label>Mobile Number</label>
        <input type="text" id="suMNumber"/>
         <span class="errorMessage"></span>
    </p>
    <p>
        <label>Password</label>
        <input type="password" id="suPassword"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <label>Re Password</label>
        <input type="password" id="suRePassword"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <input type="submit" class="button" value="sign up"/>
    </p>
</form> 
```

** jQuery **

```
 $(document).ready(function(){
  $('form').on('submit', function(e){
   e.preventDefault();
   var errorCount = 0;
   $('span.errorMessage').text(''); // reset all error mesaage
   $('input').each(function(){
     var $this = $(this);
     if($this.val() === ''){
        var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
        $this.next('span').text(error);
        errorCount = errorCount + 1;   
      }
  });
  if(errorCount === 0){
    $(this).submit(); // submit form if no error
  }
  });
 }); 
```

小提琴：http: [//jsfiddle.net/h9njC/11/](http://jsfiddle.net/h9njC/11/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T12:47:43.553

因为您使用的是提交按钮。

将您的代码添加到表单的`OnSubmit()`事件中并在验证失败时返回 false，或者将您的按钮更改为常规按钮`type='button'`，然后在验证成功时`document.forms[0].submit()`在您的方法中调用。`signup()`

# memory - 硬件性能计数器来统计操作系统的访问

> ID：10563848
> 
> 赞同：2
> 
> 时间：2012-05-12T12:44:00.060
> 
> 标签：memory, operating-system, performancecounter, computer-architecture

我想在运行一些工作负载时收集性能计数器数字。这可以使用现有的 LAPI 性能计数器基础设施轻松完成。但是，我想要更多的统计数据，比如

1.  环级指令数 0,1,2,3
2.  不同环级别对 l1 缓存的加载请求数
3.  环形电平开关长度

所以，实际上我想要区分操作系统和应用程序的内存访问。

有人可以指导我如何做到这一点吗？PS：我以前没有使用过性能计数器。所以，对你来说似乎有点微不足道的事情实际上可能对我有帮助。谢谢

PS：有没有办法在不改变应用程序行为的情况下获得系统的执行跟踪和内存访问跟踪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:09:37.427

您可以使用[perf](https://perf.wiki.kernel.org/index.php/Tutorial)等硬件性能计数器。

现代硬件提供了硬件性能计数器，因此您的机器很有可能具有此功能。此外，您可能需要为其放置内核驱动程序。（在 ubuntu 上 sudo apt-get 对此很神奇）。

perf 的一点描述（从上面的链接导入）

> Perf 是一个用于基于 Linux 2.6+ 的系统的分析器工具，它抽象出 Linux 性能测量中的 CPU 硬件差异，并提供了一个简单的命令行界面。Perf 基于最新版本的 Linux 内核导出的 perf_events 接口。
> 
> perf 工具支持可测量事件列表

这些事件在上面的链接中列出。

说在许多事件中，您想获得`cycles`以下事件的统计信息

`perf stat -e cycles:u -e cycles:k -e cycles dd if=/dev/zero of=/dev/null count=100000` where `u` and `k` stands user and kernel respectively. you can also put all the events by separating them using comma.

# android - Android - android 小部件的自定义布局

> ID：10563853
> 
> 赞同：1
> 
> 时间：2012-05-12T12:44:35.783
> 
> 标签：android, xml, layout, mediacontroller

我想自定义android附带的标准MediaController布局，我认为这样做的方式是制作自定义MediaController布局并以某种方式覆盖它，以便Android使用我的布局而不是它通常使用的布局

有什么方法可以帮助我实现我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:03:55.247

1.  创建一个类扩展 ViewGroup

2.  覆盖 onMeasure() 以测量此视图及其子视图。

3.  覆盖 onLayout() 以布局您的子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:13:25.347

这是如何创建自己的自定义布局的示例代码：

*   [https://github.com/ApmeM/android-flowlayout](https://github.com/ApmeM/android-flowlayout)

它与 WPF/silverlight 的 wrapPanel 非常相似。

# socket.io - 如何处理纸牌游戏中的回合结束

> ID：10563857
> 
> 赞同：1
> 
> 时间：2012-05-12T12:44:58.420
> 
> 标签：socket.io

我正在构建一个简单的纸牌游戏来学习 node.js 和 socket.io。当所有玩家在回合结束时扔牌时，我可以自动清理桌子并设置下一个回合，但如果我在最后一张牌被扔掉的时候就这样做，它会变得有点尴尬，因为其他玩家看不到最后一个玩家玩了什么。

目前，我看到两个选项：

1.  要求每位玩家在清台前点击“继续”或
2.  引入延迟，然后自动清除表。我不确定这个延迟应该多长时间？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:21:54.473

最后，我在清理桌子之前设置了 4 秒的延迟。如果某些玩家打出一张新牌（新一轮开始），我会“覆盖”该牌位，但将旧牌保留在桌面上，直到延迟结束。

# php - 用链接替换按钮

> ID：10563858
> 
> 赞同：0
> 
> 时间：2012-05-12T12:45:13.243
> 
> 标签：php, html, css

好的，我有这个有效的代码：

```
echo '<input name="edit'.$i.'" type="submit" value="Edit" />';
$edit_button="edit".$i;

if (isset($_POST[$edit_button])) 
```

但现在我正在使用一个管理模板/css 和一个我想使用的 css 类，它只适用于链接或`<a>`标签。如何转换上面的代码以使用它：

```
echo '<a href="" title="Edit" class="icon-1 info-tooltip"></a>'; 
```

基本上我想看看链接是否被点击但刷新到同一页面，我想我可以用 $_GET 做到这一点，但我不知道怎么做，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:49:24.580

我认为这应该可行；）

```
echo '<a href="thesamepage.php?button=5" title="Edit" class="icon-1 info-tooltip"></a>';

if(isset($_GET['button'])&&$_GET['button']==5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:50:53.300

```
<a href="?edit_button=1" title="Edit" class="icon-1 info-tooltip">Edit</a>

<?php

if (!empty($_GET['edit_button'])) {
    // your actions
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T12:53:10.783

您可以将“href”属性设置为“script.php?var=val”。然后使用 $_GET['var']

# javascript - js 正则表达式从 txt 中获取字符串，以“start”开始，以“end”结束一次

> ID：10563860
> 
> 赞同：0
> 
> 时间：2012-05-12T12:45:27.783
> 
> 标签：javascript, regex

**你好 ，**

我有文本，我需要在其中找到一个以“start”开头并以“end”结尾的字符串。只有第一次出现。如果字符串是：

```
 "just test ... bla ...bla start some txt .... end more text "
"just test ... bla ...bla start some txt .... end more text ".match(/start(.*)end/) 
```

我得到了正确的答案，包含 2 个项目的数组：

```
 array[0]="start some txt .... end"
 array[1]=" some txt .... " 
```

太棒了。当文本包含更多“结束”时：

```
"just test ... bla ...bla start some txt .... end more text  xxxx end blue fff  ...end" 
```

我无法得到正确的字符串发生的事情是`.match(/start(.*)end/)`从第一个“开始”到最后一个“结束”而不是第一个“结束”返回所有字符串：返回：`"start some txt .... end more text xxxx end blue fff ...end"` 我需要的只是第一次出现：

```
"start some txt .... end" 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:49:35.963

```
/start(.*?)end/ 
```

使其`?`“非贪婪”意味着它会尽可能少地匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:50:14.560

尝试非贪婪匹配：

```
/start(.*?)end/ 
```

# javascript - javascript JSON 将对象属性直接解析为 int

> ID：10563864
> 
> 赞同：13
> 
> 时间：2012-05-12T12:45:44.660
> 
> 标签：javascript

我有一些使用本机浏览器实现从 json 解析的对象。一些对象的属性是数字。目前，数字从 json 解析为字符串，我使用 parseInt 将字符串转换为我需要的 int。

问题是我有 23 个对象我这样做了，总共有大约 80 个属性我正在解析为这样的整数：

```
if (TheObject && TheObject.TheProperty) {
   TheObject.TheProperty = parseInt(TheObject.TheProperty, 10);
} 
```

有许多看起来非常相似的代码行。有没有办法使用原型或其他东西来改变 JSON.parse 函数的工作方式，以便每次解析器运行时检查一个字符串属性是否实际上是一个 int ，如果是这样直接转换它？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T13:00:33.860

`JSON.parse`接受可以进行一些后处理的函数形式的第二个参数。

```
JSON.parse('{"p": "5"}', function(k, v) { 
    return (typeof v === "object" || isNaN(v)) ? v : parseInt(v, 10); 
}); 
```

* * *

我不想处理所有数字字符串，然后创建您想要的属性的查找表。

```
var props = {"p":1, "some_prop":1, "another_prop":1};

JSON.parse('{"p": "5"}', function(k, v) { 
    return props.hasOwnProperty(k) ? parseInt(v, 10) : v; 
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T12:49:49.740

JSON 可以按如下方式处理数字：

```
{
    "TheObject":{
        "TheProperty":5
    }
} 
```

如果您的属性是双引号，那么它是一个字符串，否则它是一个数字、布尔值（`true`和`false`值），`null`或者只是导致解析错误的东西。

见[http://json.org/](http://json.org/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T13:01:14.480

如果您的数据源无法固定（数字应作为数字传递，而不是作为字符串传递），[您可以传递`JSON.parse`一个“reviver”函数](http://es5.github.com/#x15.12.2)，它将接收正在处理的每个项目。这为您提供了转换它的选项：

```
// Create this once
var propsToConvert = {
    TheProperty: 1,
    TheOtherProperty: 1,
    YetAnotherProperty: 1,
    // ...and so on...
};

// Use it each time you parse
var obj = JSON.parse(str, function(key, value) {
    if (propsToConvert.hasOwnProperty(key)) {
        return parseInt(value, 10);
    }
    return value;
}); 
```

[实例](http://jsbin.com/ejotah)| [资源](http://jsbin.com/ejotah/edit)

或者，如果属性名称不够独特（`TheProperty`并不*总是*需要处理，只是当它是 的属性时`TheObject`），您可以将其作为两级检查来执行：

```
// Define the object names and their property names (once)
var propsToConvert = {
    TheObject: {
        TheProperty: 1,
        TheOtherProperty: 1,
        YetAnotherProperty: 1,
        // ...and so on...
    },
    AnotherObject: {
        // Other properties...
    }
};

// Use it each time you parse
var obj = JSON.parse(str, function(key, value) {
    var name, props;

    if (typeof value === "object") {
        props = propsToConvert[key];
        if (props) {
            for (name in props) {
                value[name] = parseInt(value[name], 10);
            }
        }
    }
}); 
```

（Revivers 被称为由内而外，所以当你看到对象的键时，属性将在对象上；这就是我们更新它们的原因。）

你明白了，你可以用 reviver 功能做*很多事情。*

* * *

旁注：`parseInt`，我在上面使用过，是相当宽容的——可能比你想要的更宽容。例如：

```
var a = parseInt('1a', 10); // 1, instead of NaN 
```

如果您可以接受像`"0x10"`被视为十六进制的字符串，那么：

```
var a = Number(str); 
```

...这将为您`NaN`提供无效的数字字符串（`Number("1a")`is `NaN`）。由于 JSON 并不意味着具有十六进制数字，因此如果您确定损坏的数据源不会将它们编码为十六进制，那么您就是黄金。

否则，如果您需要小数但又想严格，则需要对字符串执行正则表达式以确保它与有效十进制数的模式匹配（如果您想支持所有内容，这相当复杂JavaScript 数字文字支持）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T12:50:21.147

我认为您无法修改解析器，但不要使用许多类似的代码行，而是使用属性数组并使用`[]`循环中的符号访问`parseInt()`它们。当然，如果您可以访问生成 JSON 的代码，则更容易将其更改为正确输出不带引号的整数。

```
// Array of properties you want to parse out
var parseUs = ['prop1','prop2','prop3','prop4'];

// Array of objects you need to parse them in
var objs = [obj1, obj2, obj3];

// Iterate over the objects
for (var i=0; i<objs.length; i++) {

  // And over the properties array
  for (var j=0; j<parseUs.length; j++) {
    // Parse out the int value if the object has the property
    if (objs[i].hasOwnProperty(parseUs[j]) {
      objs[i][parseUs[j]] = parseInt(parseUs[j], 10);
    }
  }
} 
```

**注意**：如果对象共享的属性名称不是所有的 int 值，这将不起作用。如果是这种情况，您需要修改它以使用每个对象的属性数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T12:53:06.653

@kbec 给出了正确的答案。如果您无法控制数据源，则可以使用以下内容：

```
function intify(obj, fields) {
  if (typeof(obj) == "undefined") return;
  var numFields = fields.length;
  for (var i = 0; i < numFields; i++) {
    var field = fields[i];
    if (typeof(obj[field]) != "undefined") {
      obj[field] = parseInt(obj[field], 10);
    }
  }
  return obj;
}

intify(obj, ['foo', 'bar']);
intify(obj.baz, ['boo']); 
```

# wpf - TextBox/RichTextBox 中的块选择

> ID：10563865
> 
> 赞同：4
> 
> 时间：2012-05-12T12:46:03.350
> 
> 标签：wpf, textbox, richtextbox, notepad

我正在开发记事本克隆。我想在文本板（垂直选择）中实现块选择。我该怎么做？

![文本板块选择](../Images/d1e2f4f64bc1f85494a539cff758d08e.png)

编辑：我不知道应该在这个问题中添加什么样的细节。然而，这是我的代码。我需要在此文本框中添加块选择功能。

```
<TextBox Name="txtContentBox"
         Text="{Binding Content, UpdateSourceTrigger=PropertyChanged}"
         VerticalAlignment="Stretch"
         Background="White"
         Foreground="#111111"
         BorderThickness="0"
         FontSize="{Binding FontSize}"
         FontFamily="{Binding CurrentFont}"
         FontStyle="{Binding IsItalic, Converter={StaticResource BoolToFontStyle}, ConverterParameter=Italic}"
         FontWeight="{Binding IsBold, Converter={StaticResource BoolToFontWeight}, ConverterParameter=Bold}"
         TextWrapping="{Binding IsWrap, Converter={StaticResource BoolToWrap}}"                                                          
         SelectionBrush="#6674AAE2"                             
         AcceptsReturn="True"
         AcceptsTab="True"
         VerticalScrollBarVisibility="Auto"
         HorizontalScrollBarVisibility="Auto"                             
         AllowDrop="True"
         SnapsToDevicePixels="False"
         MouseMove="txtContentBox_MouseMove"
         PreviewMouseDown="txtContentBox_PreviewMouseDown"
         PreviewMouseUp="txtContentBox_PreviewMouseUp">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="TextChanged">
            <cmd:EventToCommand Command="{Binding HandleChangesCommand}" />
        </i:EventTrigger>
        <i:EventTrigger EventName="PreviewMouseWheel">
            <cmd:EventToCommand Command="{Binding IncDecFontSizeCommand}"
                                PassEventArgsToCommand="True" />
        </i:EventTrigger>
        <i:EventTrigger EventName="Drop">
            <cmd:EventToCommand Command="{Binding OpenCommand}"
                                PassEventArgsToCommand="True" />
        </i:EventTrigger>
        <i:EventTrigger EventName="PreviewDragEnter">
            <cmd:EventToCommand Command="{Binding PreviewDraggedFileCommand}"
                                PassEventArgsToCommand="True" />
        </i:EventTrigger>
        <i:EventTrigger EventName="PreviewDragOver">
            <cmd:EventToCommand Command="{Binding PreviewDraggedFileCommand}"
                                PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:56:33.230

您可以使用[AvalonEdit](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)。它是一个原生 WPF 编辑器，具有此功能等等。

# jquery - Jquery：下一个 + 幻灯片 = 错误？

> ID：10563869
> 
> 赞同：0
> 
> 时间：2012-05-12T12:46:11.783
> 
> 标签：jquery, jquery-ui, jquery-selectors, next, slideup

我有这个 html 代码：

```
<span class="rating-image up"></span>
<label class="rating-text up">1</label>
<span class="rating-image down"></span>
<label class="rating-text down">2</label> 
```

这个jQuery代码：

```
ratingClicked.addClass("selected");
var label = ratingClicked.next(".rating-text").first();
label.slideUp(function () {
   label.html(parseInt(label.html()) + 1);
   label.slideDown();
 }); 
```

当我单击图像（=ratingClicked）时，两个数字都在 Firefox 和 IE 上滑动（在 Chrome 上一切正常）。右边的标签完全滑动，而另一个（不应该移动）做了一个奇怪的动作......

**编辑**

这是一个显示错误的 jsfiddle：http: [//jsfiddle.net/CujXY/4/](http://jsfiddle.net/CujXY/4/)

提前致谢

# python - 在Windows 7环境中将变量作为参数从1个python脚本传递给另一个

> ID：10563883
> 
> 赞同：2
> 
> 时间：2012-05-12T12:48:38.233
> 
> 标签：python, arguments, subprocess

我正在学习 python 并且遇到了一些我无法弄清楚如何去做的问题。为了简单起见，假设我有 2 个脚本：Main 和 CalledScript。我希望 Main 打开一个可执行文件并获取它的 pid，将其分配给一个变量，然后将 CalledScript.py 作为子进程打开并将该变量作为参数传递给它。虽然我知道在大多数情况下使用导入会是更好的选择，但在我的情况下，由于项目的其他部分，我必须将其作为子进程运行。无论如何，当我这样做时，我不断收到错误消息。它仅在我尝试发送 pid 时发生。如果我将下面的变量“thePid”分配给像“555”这样的随机数，它会工作得很好。CalledScript 会收到它，将它打印到屏幕上，一切都很好。但是尝试分配它 cproc.pid 并发送它并没有很好地完成。

事不宜迟，下面是一个简单的示例代码：

**主文件**

```
from subprocess import Popen, PIPE
import sys
import subprocess
import os

cproc = Popen("C:\Test\Test.exe", stdin=PIPE, stdout=PIPE)

thePid = cproc.pid

theproc = subprocess.Popen(['C:\\CalledScript.py', thePid], shell=True) 
```

**调用脚本.py**

```
import sys

print "thePid is: %r" % sys.argv[1] 
```

我得到的错误：

```
Traceback (most recent call last):
  File "main.py", line 12, in <module>
    theproc = subprocess.Popen(['C:\\CalledScript.py
', cproc.pid], shell=True)
  File "C:\Python27\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python27\lib\subprocess.py", line 852, in _execute_child
    args = list2cmdline(args)
  File "C:\Python27\lib\subprocess.py", line 587, in list2cmdline
    needquote = (" " in arg) or ("\t" in arg) or not arg
TypeError: argument of type 'int' is not iterable 
```

任何帮助都会非常出色！对于可能非常明显的问题，我们深表歉意。我在谷歌上四处搜索，但没有找到答案！前几天我刚开始玩python，所以我还在学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:06:09.543

尝试将 pid 作为字符串而不是 int 传递：

```
theproc = subprocess.Popen(['C:\\CalledScript.py', str(thePid)]) 
```

`shell=True`如果您将参数作为字符串列表传递，则使用毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:13:36.083

对我来说使用这个作品：

```
 theproc = subprocess.Popen("./CalledScript.py " + str(thePid),shell=True) 
```

但是使用它不起作用：

```
 theproc = subprocess.Popen(['./CalledScript.py', str(thePid)], shell=True) 
```

ubuntu，python 2.7.2+

# php - PHP 回显片段比一次回显慢吗？

> ID：10563899
> 
> 赞同：0
> 
> 时间：2012-05-12T12:50:12.440
> 
> 标签：php, performance, echo

我有一个关于页面加载时间的实际问题：

假设我想要以下输出：

```
<a class="class-a" href="www.google.com"></a> 
```

这样做是否更快（关于加载时间和效率）：

```
<a class="<?php echo $class_a; ?>" href="<?php echo $url; ?>"></a> 
```

或者

```
echo "<a class='$class_a' href='$url'></a>"; 
```

这是一个更大问题的缩影——如果我在页面上多次使用 echo 是不是最好尝试将 HTML 输出压缩为一个变量并一次性回显它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:01:42.023

这两个真的没什么区别。一两个回声无所谓。1000回声没关系。真的，当你看到事物的宏大时，回声并不重要。我可以在我的笔记本电脑上以紧密的循环每秒运行 500 万次回声。执行一个需要 1 毫秒或 2 毫秒运行的 SQL 查询意味着您或多或少会获得 5000 个回显调用的差异。那是多么无关紧要。

您想要做的是使用分析器查看您的代码，并在遇到性能问题时找到瓶颈，但不要担心您做了多少回显。顺便说一句，您可能应该使用[Twig](http://twig.sensiolabs.org/)之类的东西来使用模板打印 HTML，而不是像您的示例中那样使用原始 PHP，至少这可以让您自动转义 HTML 实体，例如保护您免受 XSS 攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T12:56:05.187

就性能而言，第二个更快，因为打印到输出是昂贵的操作。但是你应该小心不要为了快速执行代码而牺牲阅读代码的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T13:04:37.923

我已经进行了类似于您之前要求的测试。

在您发布的两个示例中，我发现第一个示例与第二个示例相比要慢一些。

如果您事先将输出存储到缓冲区中，您将使用更多内存，并且它再次比您给出的两个示例中最慢的慢一点。

正如其他人指出的那样，这完全无关紧要，我会将易于维护性和可读性置于您认为可能获得的任何速度优化之上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T12:57:59.260

完全没有意义的微优化。是否存在差异取决于您使用的 PHP 运行时，但与任何类型的 DB 访问、服务器配置和字节码缓存相比，它完全无关紧要。

这不是你应该担心的事情，*尤其是*在性能很重要的情况下。

# backbone.js - 按名称和类别排序主干集合

> ID：10563903
> 
> 赞同：1
> 
> 时间：2012-05-12T12:50:23.907
> 
> 标签：backbone.js

我有一个骨干集合和两个按钮。我想要做的是，如果我单击 button1，它应该按名称对集合进行排序，如果单击 button2，它应该按类别排序。

我试过这个

```
comparator : function(model){
     return model.get("Name");
} 
```

我的问题是我的收藏中可以有两个比较器吗？我将如何按名称和类别分别对集合进行排序。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T13:03:43.847

您可以将排序变量附加到集合并在比较器中使用它：

```
 App.List = Backbone.Collection.extend({
      initialize: function() {
        this.sortVar = 'Name';
      },
      comparator: function(model){
        return model.get(this.sortVar);
      }
    }) 
```

然后只需在单击链接时更改 sortVar 并调用 sort()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T02:24:12.937

另一种方法是使用**sortBy**方法（它来自下划线，但可用于 Backbone.Collection）：使用该方法，您只需传入模型属性名称。请注意，sortBy 方法返回一个数组。

在这里，我有一个独立的按钮视图。触发排序事件使其他视图（例如，处理列表呈现的视图）能够响应排序事件并重新呈现自己。

```
app.ButtonsView = Backbone.View.extend({

        el: '#buttons',

        events: {
            'click #sortByNameBtn' : 'sortByName',
            'click #sortByCategoryBtn' : 'sortByCategory'
        },

        sortByName : function(){
            app.mycollection.models = app.mycollection.sortBy('name');  
            app.mycollection.trigger('sort');                                                       
        }, 

        sortByCategory : function(){                    
            app.mycollection.models = app.mycollection.sortBy('category');  
            app.mycollection.trigger('sort');                                                                       
        }
    }); 
```

参考：[http](http://backbonejs.org/docs/backbone.html) : //backbonejs.org/docs/backbone.html（搜索sortBy）

使用 sortBy**不会触发“排序”事件**，这就是我自己在集合上触发它的原因。此外，sortBy 可能不适用于 Date 属性或其他排序复杂的属性，因此请使用比较器。

# iphone - 如何使用两个相同的方法编写委托协议

> ID：10563904
> 
> 赞同：0
> 
> 时间：2012-05-12T12:50:24.590
> 
> 标签：iphone, ios, delegates

当按下某个按钮时，我想将一些数据添加到 2 个不同的实体中，我正在使用委托，但我不知道该怎么做。

```
@protocol AddContentViewControllerDelegate <NSObject>

- (void)AddContentViewControllerDidCancel:(AddContentViewController *)controller;
- (void)AddContentViewController:(AddContentViewController *)controller didAddPlayer:(FailedBankInfo *)info;
- (void)AddContentViewController:(AddContentViewController *)controller didAddPlayer:(FailedBankDetails *)details;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:04:39.857

每当您声明一个协议时，您还必须为其创建一个委托

```
id <AddContentViewControllerDelegate > delegateAddContent 
```

并在 .m 文件中创建其属性 ans synthesize

```
@property (nonatomic) id delegateAddContent 
```

米

```
@synthesize delegateAddContent 
```

现在您必须通过您已经通过 .m 文件方法定义的协议方法发送数据。

```
[self delegateAddContent]AddContentViewControllerDidCancel:(AddContentViewController *)controller]; 
```

可能有一些你想发送数据的类。那个类必须符合你的协议，例如-->

```
@interface ClassName : SuperClass<AddContentViewControllerDelegate > 
```

然后你必须实现协议的方法。/例如-->-

```
 (void)AddContentViewControllerDidCancel:(AddContentViewController *)controller
{
//the data will be received in the parameters of the method of the protocol implemented.here in controller
} 
```

符合协议的类也必须取得协议所有权

yourclassconformingprotocol.delegateController=self.

You can also define the required methods in protocol by @required and optional by @optional

See [Apple's documentation on protocol](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:11:49.150

You can't have two method names that are selected as different only by their parameter types. As far as the compiler is concerned, the names of your second and third methods in the protocol are both `AddContentViewController:didAddPlayer:`.

# ruby-on-rails - 安装 rspec-rails 和 capybara gems 时出错

> ID：10563906
> 
> 赞同：1
> 
> 时间：2012-05-12T12:50:36.030
> 
> 标签：ruby-on-rails, rspec, bundler

简要背景：

我的 Gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
    gem 'sqlite3', '1.3.5'
    gem 'rspec-rails', '2.9.0'
end

gem 'therubyracer'

# group :production do
#   gem 'pg', '0.12.2'
# end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '1.2.3'
end

group :test do
    # gem 'capybara', '1.1.2'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

在我的应用程序文件夹中运行 bundle install 时，我收到以下错误：

```
$ bundle install
Fetching gem metadata from https://rubygems.org/........
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.5) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using bundler (1.1.3) 
Using coffee-script-source (1.3.1) 
Using execjs (1.3.2) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.3) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 

Gem::RemoteFetcher::FetchError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv3 read server certificate A (https://rubygems.cachefly.net/gems/diff-lcs-1.1.3.gem)
An error occured while installing diff-lcs (1.1.3), and Bundler cannot continue.
Make sure that `gem install diff-lcs -v '1.1.3'` succeeds before bundling. 
```

但是，如果我注释掉*gem rspec-rails', '2.9.0'*，它的安装很顺利。我认为问题在于 gem 的安装方式。请帮忙看看怎么办？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:47:21.003

您可以尝试在再次捆绑之前安装 diff-lcs

```
gem install diff-lcs -v '1.1.3
bundle install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T17:30:10.977

由于 SSL 特定错误的性质，您可能需要考虑切换到非安全连接以获取 gem。正如[其他答案](https://stackoverflow.com/a/17044361)中所建议的那样，检查您`Gemfile`的以下行：

```
source 'https://rubygem.org' 
```

并将其更改为非 https 版本：

```
source 'http://rubygem.org' 
```

# php - 将变量从 Flash 传递到 PHP

> ID：10563907
> 
> 赞同：1
> 
> 时间：2012-05-12T12:50:37.493
> 
> 标签：php, actionscript-3, connect

> **可能重复：**
> [将变量 FROM flash 传递到 HTML/php](https://stackoverflow.com/questions/5225202/passing-variable-from-flash-to-html-php)

我正在使用 Flash (Actionscript 3.0) 处理这个项目。基本上，它是一个拖放应用程序。在获得一些用户输入后，我需要使用 PHP 将变量传递给 MySQL 服务器。这是我想出的代码：

动作脚本：

```
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.navigateToURL;
import flash.events.MouseEvent;

var urlVariables:URLVariables = new URLVariables;
var pi:pizza=new pizza();
var totalAmt:Number;

totalAmt=pi.totalPrice;
urlVariables.totalAmount = totalAmt;//"" contains what should be passed
//urlVariables.password = "testpass";//""contains what should be passed

var urlRequest:URLRequest = new          URLRequest("http://172.21.147.103/csc207/bcg2g2/customise.php");
urlRequest.data = urlVariables;

sendToURL(urlRequest) 
```

PHP：

```
<?php

$total = $_GET["totalAmount"];
//$pass = $_GET["password"];

echo $total;
//echo $userName."::".$pass;

?> 
```

我最终发送给 PHP 的变量是 totalAmount。有人可以就代码是否正确提供一些反馈吗？可以使用用户名和密码访问服务器。是否必须指定？如果是这样，我该怎么做？

先感谢您！

编辑：谢谢大家的回复！

我对代码进行了相应的更改：
import flash.net.URLVariables; 导入 flash.net.URLRequest；导入 flash.net.URLLoader；导入 flash.net.URLRequestMethod；导入 flash.net.navigateToURL；导入 flash.events.MouseEvent；

```
var urlString:String = "http://172.21.147.103/csc207/bcg2g2/customise.php"; 

function Submit():void
{
    var requestVars:URLVariables = new URLVariables();
    requestVars.totalAmt= 50; // Dummy data to be sent to php

    var urlRequest:URLRequest = new URLRequest();
    urlRequest.url = urlString;
    urlRequest.method = URLRequestMethod.GET;
    urlRequest.data = requestVars;

    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.TEXT;
    loader.addEventListener(Event.COMPLETE, loaderCompleteHandler);

sendToURL(urlRequest)

    try { loader.load(urlRequest); }

    catch (error:Error) { // Handle Immediate Errors 
}
}

function loaderCompleteHandler(e:Event):void
{
    trace(e.target.data); // Response Text
} 
```

价值仍然没有得到体现。我可以检查一下我这样做是否正确吗？我应该将 SWF 文件上传到我正在开发的网站，还有什么我应该做的吗？此外，有关身份验证的信息很有用！但我对是否应该在代码中使用它感到困惑。有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:08:54.793

正如 Hakre 所评论的：检查将[变量 FROM flash 传递到 HTML/php](https://stackoverflow.com/questions/5225202/passing-variable-from-flash-to-html-php) - 不接受的答案就是你想要的（接受的答案发布到 HTML，然后依赖 HTML 发布到 PHP - 如果你需要这个您还想传递 cookie，但如果不传递，您可以直接调用 PHP）。

至于username/pass，你可以在这里找到答案：[Flex 3 - how to support HTTP Authentication URLRequest?](https://stackoverflow.com/questions/509219/flex-3-how-to-support-http-authentication-urlrequest) ; 虽然那是 Flex，但我相信添加身份验证的方法是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:10:19.097

我建议使用 load 方法，因为您以后可能需要处理事件。

Ans 因为您想在 php 中获取变量，所以您发出 GET 请求，例如：

```
var urlString:String = "http://172.21.147.103/csc207/bcg2g2/customise.php"; 

function Submit():void
{
    var requestVars:URLVariables = new URLVariables();
    requestVars.totalAmt= 50; // Dummy data to be sent to php

    var request:URLRequest = new URLRequest();
    request.url = urlString;
    request.method = URLRequestMethod.GET;
    request.data = requestVars;

    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.TEXT;
    loader.addEventListener(Event.COMPLETE, loaderCompleteHandler);

    try { loader.load(request); }

    catch (error:Error) { // Handle Immediate Errors }
}

function loaderCompleteHandler(e:Event):void
{
    trace(e.target.data); // Response Text
} 
```

# javascript - 检查用户是否可以在网站中打开文件类型

> ID：10563908
> 
> 赞同：0
> 
> 时间：2012-05-12T12:50:47.843
> 
> 标签：javascript, filesystems

我正在构建一个站点，用户可以在其中下载 ePub 文件和 Adob​​e Digital Edition 文件。浏览器是否可以在实际下载文件之前知道系统是否可以打开特定类型的文件或具有特定扩展名的文件？

我对 WebKit 如何做到这一点有一些模糊的记忆，但在搜索时我找不到任何有用的信息。

如果用户无法打开他/她要下载/购买的文件，我想做的是显示警告消息。

//约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:53:39.697

不可能，浏览器无权访问此类操作系统资源

PS：“无法打开”的定义有点模糊。用户可以安装必要的软件，但没有注册扩展 - 这算作“无法打开”吗？

# javascript - 如何在 JSF 输入字段中创建阴影并在用户单击它时保留它

> ID：10563911
> 
> 赞同：0
> 
> 时间：2012-05-12T12:51:26.087
> 
> 标签：javascript

我有这个 JavaScript 用于在输入字段中创建阴影：

```
<!-- input field shadow  -->
    var placeholder = "#{GlassfishController.date}"
    $("input").on({
        focus: function() {
            if (this.value == placeholder) {
                $(this).val("").removeClass("shadow");
            }
        },
        blur: function() {
            if (this.value == "") {
                $(this).val(placeholder).addClass("shadow");
            }
        }
    }).trigger("blur"); 
```

现在脚本显示时间格式。但是当我在字段中用鼠标单击时，文本消失了。我想将脚本修改为仅在键入密钥时才消失。我怎么能做到这一点？

最良好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:53:08.920

使用[`keypress`](http://api.jquery.com/keypress/)事件：

```
var placeholder = "#{GlassfishController.date}"
$("input").on({
    keypress: function() {
        if (this.value == placeholder) {
            $(this).val("").removeClass("shadow");
        }
    },
    blur: function() {
        if (this.value == "") {
            $(this).val(placeholder).addClass("shadow");
        }
    }
}).trigger("blur"); 
```

**演示：http:** [//jsfiddle.net/2qY52/](http://jsfiddle.net/2qY52/)

# objective-c - 如何隐藏空的 UITablecells？

> ID：10563914
> 
> 赞同：1
> 
> 时间：2012-05-12T12:51:46.187
> 
> 标签：objective-c, xcode, ios5

如何隐藏空的 UITableCells？我的 Tablecell 包含背景，所以我尝试了这行代码

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];
    view.backgroundColor = [UIColor whiteColor];
    return view;
} 
```

但它没有用（因为我的 uitablecell 背景）

背景：

```
[tabelView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"table.png"]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:19:15.433

如果要删除虚拟分隔符，则必须将表格视图分隔符样式设置为无，如下所示：

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

请注意，这也会隐藏非空单元格之间的分隔符。如果您想显示它们之间的界限，您必须自己处理，例如通过`UITableViewCell`在顶部/底部使用带有 1px 线条的自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:01:22.703

是否要隐藏该部分中的页脚或单元格？

如果您有多个部分，您可以检查委托实际在哪个部分。

```
If (section == 0) {
Return view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T13:28:23.223

**Swift 2.0 中的版本**

`tableView(tableView:, viewForFooterInSection section:) -> UIView?`如果您希望 tableViewController 仅显示已定义的单元格，则必须使用具有清晰颜色背景的空 UIView实现委托方法。

在这种情况下，如果您定义`tableView(tableView: UITableView, numberOfRowsInSection section: Int)`了返回 3 个单元格的方法，则只有 3 个可见单元格没有分隔符或其他单元格上的任何背景。

这里有我的示例实现`viewForFooterInSection`：

```
override func tableView(tableView: UITableView, viewForFooterInSection section: Int) -> UIView? {

        let view = UIView()
        view.backgroundColor = UIColor.clearColor()

        return view
    } 
```

# python - 返回开始或多次重复原始输入

> ID：10563920
> 
> 赞同：1
> 
> 时间：2012-05-12T12:53:06.310
> 
> 标签：python

我已经编写了一个代码并且它可以工作，现在因为代码中有变量我想在最后询问这个人是否希望退出/继续，他们说继续它一直回到第一个问题。还有一种方法可以在一开始就问问题要重复多少次。抱歉无法上传代码，因为它超过 150 行 ta Greggy D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:05:03.663

```
i = 0

def code_to_repeat():
    # whatever is your code
    print "I was repeated : " + str(i) +" times"

while(True):
    print "Do you want to run the code (Y/N) : "
    stri = raw_input()
    print "\n"
    if stri=="Y":
        i += 1
        code_to_repeat()
    elif stri=="N"
        print "exiting\n"
        break;
    else:
        print "Please Answer Y/N only.\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:00:16.340

如果我正确理解你的问题，这样的事情可能会奏效。

```
def dostuff():
    ABC = raw_input("Enter Number (q exits): ")

    if(ABC.lower() == 'q'):  #Allow the user to enter q at this point to exit
       return False

    Product = int(raw_input("Enter Product:"))

    #do stuff to print out the cost of these items.

    #We could forgo the next lines and always return True here assuming the user
    #has more input if they didn't input 'q' for 'ABC'.  That's up to you.

    #return True

    print "Do you have more purchases [Y/N]?"
    answer=raw_input()
    return answer.upper() == 'Y'

while dostuff():
    pass

#same as:  
#while True:
#   if(not dostuff()): 
#      break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:09:57.440

在 Python 中，while 循环应该可以让您完成目标。您可以使用这样的示例来解决您的问题：

```
while(raw_input()[0] != 'n'):
    print 'to exit print n' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:07:11.113

while 循环应该适用于您的情况。

```
while(raw_input("to exit enter n ")[0] != 'n'):
        print("Doing some work in the loop, until user enters an 'n'.") 
```

`raw_input()`

是询问用户输入的好方法，并允许您插入提示，例如

`to exit enter n`.

请记住，您应该检查多个“n”，例如用户是否按回车键。此外，执行简单的数据解析可能是有意义的，因此您可以做的不仅仅是响应是否有人输入了 n。

# asp.net - 无法加载文件或程序集“System.IdentityModel

> ID：10563934
> 
> 赞同：0
> 
> 时间：2012-05-12T12:55:01.240
> 
> 标签：asp.net

嗨，我在调试 Web 应用程序时收到此错误

> 无法加载文件或程序集“System.IdentityModel，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该模块应包含程序集清单。

请告诉我正确的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:02:19.513

检查您项目的框架版本 - 我知道这个程序集需要 4.0+ 如果第一个是真的 - 尝试手动将此程序集添加到您的参考列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-11T19:54:30.687

我遇到了关于 System.IdentityModel 的相同错误，原因是我使用**.Net Core 3.1**控制台应用程序调用了**.Net Framework 4.7.2**项目，该项目调用了对 Microsoft Dynamics CRM 组织服务的服务调用（StackTrace = "at Microsoft.Xrm.Client.Services.OrganizationService.ToOrganizationServiceProxy..）。

这是兼容性问题，所以我只是将控制台应用程序移至 .Net Framework 4.7.2，然后就没有问题了。

# c# - 在 C# 中使用 OpenCV 进行骨架化

> ID：10563935
> 
> 赞同：0
> 
> 时间：2012-05-12T12:55:06.397
> 
> 标签：c#, opencv

有没有人有一个如何在 C# 中使用 OpenCV 进行骨架化的示例。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:40:16.427

对不起，我没有 C# 的例子。但是我可以给你一个使用 OpenCV-Python 的方法。它是通过基本的 OpenCV 函数完成的，所以我使用的所有函数也应该在 C# 中可用。

```
import cv2
import numpy as np

img = cv2.imread('img.png',0)
size = np.size(img)
skeleton = np.zeros(img.shape,np.uint8)

ret,img = cv2.threshold(img,127,255,0)
kernel = cv2.getStructuringElement(cv2.MORPH_CROSS,(3,3))
finished = False

while(not finished):
    eroded = cv2.erode(img,kernel)
    temp = cv2.dilate(eroded,kernel)
    temp = cv2.subtract(img,temp)
    skel = cv2.bitwise_or(skeleton,temp)
    img = eroded.copy()

    zeros = size - cv2.countNonZero(img)
    if zeros==size:
        finished = True

cv2.imshow("skeleton",skeleton)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

结果如下：

![在此处输入图像描述](../Images/1fdf575a5c60ef6035b4f768e57c8cc3.png) ![在此处输入图像描述](../Images/ede7708c16bd234e039fe006a4749cdf.png)

方法不太好，所以结果也不完美。但更好，我希望。

EmguCV 文档：[http ://www.emgu.com/wiki/files/2.3.0/document/Index.html](http://www.emgu.com/wiki/files/2.3.0/document/Index.html)

我确信所有功能都将在那里可用。所以自己实施。

# android - 如何从表格布局中删除内容？

> ID：10563936
> 
> 赞同：0
> 
> 时间：2012-05-12T12:55:10.353
> 
> 标签：android, tablelayout, tablerow

我在我的应用程序中使用了 Tablelayout，并添加了一些 TableRows。我希望每次按下按钮时都删除我之前添加的 TableRows。这怎么可能？在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:01:40.363

行 = (TableRow)findViewById(R.id.row); table.removeView(row);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:11:50.563

一个简单的方法是设置行消失。

```
TableLayout tableLayout = findByViewId(R.layout.myTL);
tableLayout.getChildAt(numberOfRow).setVisibility(View.GONE); 
```

希望此解决方案适合您的情况！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:03:55.627

```
TableLayout tblLayout = (TableLayout) findViewById(viewID);
tblLayout.removeAllViews(); 
```

# mysql - Tomcat JDBC 共享数据库资源

> ID：10563939
> 
> 赞同：0
> 
> 时间：2012-05-12T12:55:28.057
> 
> 标签：mysql, jsp, jdbc, tomcat6

我有两个应用程序在 Tomcat 中运行，它们共享一个数据库资源。当站点 2 上存在任何类型的负载时，站点 1 挂起。谁能告诉我在我的 server.xml 文件中声明共享资源是否有任何问题？或者，如果各种“最大”参数可能是问题？

谢谢你的帮助

我用的是JDBC，我的server.xml文件如下；

```
<!-- site 1 -->
    <Host name="siteone.co.uk" appBase="/var/www/siteone.co.uk" unpackWARs="true" autoDeploy="true">
    <Alias>www.siteone.co.uk</Alias>
            <Context path="" docBase="htdocs" debug="0" reloadable="true"  >
                <Resource name="jdbc/siteone" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="-1" username="siteone_user" password="**********" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/siteone"/>
            </Context>
            <Valve className="org.apache.catalina.valves.AccessLogValve" directory="/var/www/siteone.co.uk/logs"  prefix="tomcat_access_" suffix=".log" pattern="common" resolveHosts="false"/>
    </Host>

<!-- site 2 -->
    <Host name="sitetwo.co.uk" appBase="/var/www/sitetwo.co.uk" unpackWARs="true" autoDeploy="true">
        <Context path="" docBase="htdocs" debug="0" reloadable="true">
            <Resource name="jdbc/sitetwo_db1" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="sitetwo_db1_user" password="**********" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/sitetwo_db1"/>
            <Resource name="jdbc/sitetwo_db2" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="sitetwo_db2_user" password="**********" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/sitetwo_db2"/>
            <Resource name="jdbc/siteone" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="siteone_user" password="**********" driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/siteone"/>
        </Context>  
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="/var/www/sitetwo.co.uk/logs"  prefix="tomcat_access_" suffix=".log" pattern="common" resolveHosts="false"/>
    </Host> 
```

我现在有我的线程转储，它们包含对我的数据库连接的大量引用。如;

```
"TP-Processor30" daemon prio=10 tid=0x00007f6dd40ae000 nid=0x1ad4 in Object.wait()     [0x00007f6dd27b2000]
   java.lang.Thread.State: WAITING (on object monitor)
at java.lang.Object.wait(Native Method)
- waiting on <0x00000000eeac1790> (a org.apache.commons.pool.impl.GenericObjectPool$Latch)
at java.lang.Object.wait(Object.java:502)
at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)
- locked <0x00000000eeac1790> (a org.apache.commons.pool.impl.GenericObjectPool$Latch)
at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:999)
at htSql.SQLController.<init>(SQLController.java:43)
at controllers.HomeControllerServlet.doGet(HomeControllerServlet.java:41)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
at java.lang.Thread.run(Thread.java:636) 
```

我的 SQLController 类用作连接帮助文件，如下所示；

```
import java.sql.*;
import javax.sql.*;
import javax.naming.*;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public class SQLController {

private static Log _logger = LogFactory.getLog( SQLController.class );

private static Statement statement = null;
private static Connection connection;
private ResultSet rs = null;
private static InitialContext ctx;
private static DataSource ds;

static{

    _logger.fatal("SQLController : 'static' called...");

    try{
        ctx = new InitialContext();
        ds = (DataSource) ctx.lookup("java:comp/env/jdbc/****************");
    }
    catch(Exception e){
        _logger.fatal("Error creating InitialContext...");
        _logger.fatal(e);
        _logger.fatal(e.getMessage());
    }

}

public SQLController(){

    _logger.fatal("SQLController : 'constructor' called...");

    try{

        if(ctx == null){
            _logger.fatal("No DB Context");
        }
        if(ds != null){
            connection = ds.getConnection();
            statement = connection.createStatement();
        }
    }
    catch(Exception e){
        _logger.fatal(e);
        _logger.fatal(e.getMessage());
    }

}

public void insert(String sql) throws Exception{

    statement.execute(sql);     
}

public ResultSet select(String sql) throws Exception{

 rs = statement.executeQuery(sql);
   return rs;

}

public void close(){

    try{
        if(statement != null){
            statement.close();
        }
        if(connection != null){
            connection.close();
        }
        if(rs != null){
            rs.close();
        }
    }
    catch(Exception e){
        _logger.fatal(e);
        _logger.fatal(e.getMessage());
    }

}
} 
```

我已经删除了数据库的名称。

这种连接方法有什么不合适的地方吗？

提前致谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:02:55.587

这些将被视为单独的资源，因此它们应该是独立的。您需要进行一些挖掘以找出瓶颈在哪里，但这不是连接池的共享，因为 site1 和 site2 有单独的池。

# r - ggplot2：如何在绘图上透明地遮蔽隔日

> ID：10563944
> 
> 赞同：13
> 
> 时间：2012-05-12T12:56:15.320
> 
> 标签：r, ggplot2, vectorization, alpha-transparency, occlusion

请问我在这里做错了什么？我正在尝试用透明灰色遮蔽每天 24 小时的交替矩形。但是只有来自 for 循环的最后一个矩形被绘制（？！？）如果我手动而不是通过 for 循环来做事情，它工作正常。

有没有办法对其进行矢量化以避免for循环？（可以用 qplot 完成吗？）我是 ggplot2 的新手，是的，我阅读了 Hadley 的网站、书籍和示例。

第二个问题：美学上的 alpha 设置不会阻止矩形遮挡背景。如何获得透明度？

```
dat <- data.frame(my_x_series=1:192, my_y_series=5.0*runif(192))
# (ymin, ymax are computed for this series using min/max(na.rm==TRUE))
ymax <- 5.0
ymin <- 0.0
p <- ggplot(dat, aes(x=my_x_series,alpha=0.9)) 
alternate_daily_bars_xmin <- c(4,52,100,148)

for (shade_xmin in alternate_daily_bars_xmin) {
    shade_xmax <- min(shade_xmin+24, 192) # clamp at end of x-range
    p <- p + geom_rect(aes(alpha=0.5,xmin=shade_xmin,xmax=shade_xmax,ymin=ymin,ymax=ymax), fill='gray80')
}
p <- p + geom_point(aes(y=my_y_series))
p 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-12T17:02:11.310

要绘制矩形，请创建一个数据框，其中每行包含单个矩形的坐标。此构造适用于所有多边形，而不仅仅是矩形。一旦你知道了这一点，就很容易避免循环。

然后，请注意是否将变量映射到美学。在您的情况下，您需要设置`alpha`为您希望的任何值，因此它不构成`aes()`设置的一部分。

```
library(ggplot2)

dat <- data.frame(my_x_series=1:192, my_y_series=5.0*runif(192))
rect_left <- c(4,52,100,148)
rectangles <- data.frame(
  xmin = rect_left,
  xmax = rect_left + 24,
  ymin = 0,
  ymax = 5
)

ggplot() +
  geom_rect(data=rectangles, aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax), 
            fill='gray80', alpha=0.8) +
  geom_point(data=dat, aes(x=my_x_series, y=my_y_series)) 
```

![在此处输入图像描述](../Images/3bed7742507921304e47672ea5ab387b.png)

# javascript - Jquery 这是正确的方法吗？

> ID：10563949
> 
> 赞同：0
> 
> 时间：2012-05-12T12:57:30.803
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
        if (SOMECONDITION) {
            $("#scriptD").attr("src", "../../Scripts/A.js");
        } else {
            $("#scriptD").attr("src", "../../Scripts/B.js");
        }

</script>

<script id="scriptD" src="" type="text/javascript"></script> 
```

我正在尝试`.js`动态插入文件（基于条件）。但这不起作用。谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:59:43.577

我认为您正在寻找 getScript(url)：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T13:02:19.137

做你正在尝试的一种方法是使用[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)

```
if (SOMECONDITION) {
    $.getScript("a.js");
} else {
    $.getScritp("b.js");
} 
```

此外，如果您将脚本放在`<script>`元素之后，您的方式将起作用

```
<script id="scriptD" src="" type="text/javascript"></script>
<script type="text/javascript">

    if (SOMECONDITION) {
        $("#scriptD").attr("src", "../../Scripts/A.js");
    } else {
        $("#scriptD").attr("src", "../../Scripts/B.js");
    }

</script> 
```

`scriptD`这是因为当在元素之前调用脚本时，脚本将无法在 DOM 上找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T13:01:35.153

看起来您在`<script id='scriptD'>`DOM 中存在之前解析和执行脚本。要么执行函数，`$(document).ready()`要么重新排列它，以便脚本标签在执行之前就在那里。

```
<script type="text/javascript">
      $(document).ready(function() {
        if (SOMECONDITION) {
            $("#scriptD").attr("src", "../../Scripts/A.js");
        } else {
            $("#scriptD").attr("src", "../../Scripts/B.js");
        }
      });

</script>
<script id="scriptD" src="" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T13:04:49.277

你可能想试试这个：

```
<script type="text/javascript" id="scriptD" src=""></script>

<script type="text/javascript">
    (function () {
        if (SOMECONDITION) {
            $("#scriptD").attr("src", "../../Scripts/A.js");
        } else {
            $("#scriptD").attr("src", "../../Scripts/B.js");
        }
    })();
</script> 
```

在对其属性进行任何更改之前，您要更改 src 的脚本必须存在。或者您可能想尝试这种方式 - 没有空的 src 脚本：

```
<script type="text/javascript">
    (function () {
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        script.setAttribute("src", "../../Scripts/" + (SOMECONDITION ? "A" : "B") + ".js");

        document.getElementByTagName(head)[0].appendChild(script);
    })();
</script> 
```

# java - 包装器方法和包装器类

> ID：10563950
> 
> 赞同：0
> 
> 时间：2012-05-12T12:57:31.630
> 
> 标签：java, wrapper

我目前正在准备考试，我在这篇文章的底部遇到了一个问题。它与 Wrapper 方法与 Wrapper 类有关。这里有区别吗？据我了解，包装类允许将原语包装在对象中，以便它们可以包含在集合之类的东西中。Wrapper 类也有一堆实用方法，允许在字符串对象之间进行转换。我在下面有一个问题，询问包装器方法并将它们与 getter/setter 方法联系起来。我是否认为 set wrapper 方法只是采用原语并将其包装在对象中，还是在做不同的事情？

什么是包装器方法以及它们何时有用？

在 City 类中编写 set/get 包装方法，该方法将允许直接访问其位置的每个属性、纬度和经度。例如，setLatitude：

```
class City {
    //...

    public void setLatitude(double value) 
    {
        location.setLat(value);
    }

    //your code:
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:07:33.047

包装类是扩展某个类或原语的可用性的类。例如上这个课：

```
public class NewBoolean{
    private boolean value = false;
    public NewBoolean(boolean state) {
        value = state;
    }
    public boolean value() {
        return value;
    }
    public void setValue(boolean value) {
        this.value = value;
    }
    public boolean isTrue() {
        return value;
    }

    public boolean isFalse() {
        return !value;
    }

    public boolean compare(boolean anotherBoolean){
       return value==anotherBoolean;
    }
} 
```

它可以替换任何`boolean`值，并且具有可以扩展`boolean`原语可用性的新方法。

包装器方法可以引用包装器函数。包装器方法只是调用其他方法的方法，例如，我们可能在一个类中有这两个方法：

```
public void setFullScreen() { }
public void setWindowMode() { } 
```

包装方法可能是：

```
public void toggleFullScreen() {
    if(fullscreen) {
         setWindowMode();
    }
    else {
         setFullScreen();
    }
} 
```

简而言之，一个调用类中已经存在的另一个方法的方法。另一个例子是一个`setResolution(w,h);`和一个包装器方法调用什么`setDefaultResolution()`，然后调用`setResolution(DEFAULT_W,DEFAULT_H)`内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:22:17.533

我听说术语“包装器类”被用作装饰器类的同义词（参见[“装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)”），它有更多的用途，然后只允许将原始类型插入到集合中

# ios - 另一个 mac 中的 Xcode 证书

> ID：10563954
> 
> 赞同：0
> 
> 时间：2012-05-12T12:58:09.240
> 
> 标签：ios, xcode, certificate, code-signing, profiles

我不在家，忘记从我的 imac 导出我的证书和代码签名内容。现在我在设备上尝试项目时遇到了麻烦。我从供应门户下载了 de 证书和所有内容，但不起作用。似乎钥匙不见了。

我想我会再次经历整个过程，以使一切正常。我的问题是：如果我重新完成整个过程，我回到家会不会有问题？我正在考虑创建一个名为“macBook dev profile”或类似名称的新开发人员配置文件，以使一切都清楚。

对此有何反馈？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:09:54.247

创建开发证书，并将该证书添加到现有的配置文件中。您不需要像这样创建单独的配置文件。这些不会干扰您在其他机器上的现有设置。

即使您创建单独的配置文件也不会有问题，但最好只有一个，恕我直言。

# c++ - Visual-C++ malloc 实现？

> ID：10563965
> 
> 赞同：5
> 
> 时间：2012-05-12T13:01:01.657
> 
> 标签：c++, visual-c++, malloc

我目前正在研究`malloc`我的作业的实施。

我知道存在一些版本的 malloc 实现，例如 glibc 使用的 ptmalloc 和 FreeBSD 使用的 jemalloc。

我想知道visual C++采用的是哪个版本的实现？还是 VC++ 团队刚刚实现了他们自己的版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:47:36.593

当你调用VC++ 编译`malloc`的`new`程序而不编写自己的重定向器时，你最终会进入`HeapAlloc`，也称为 NT 堆。

NT Heap 是由 Windows 内存团队开发的。这些人负责操作系统中的所有内存管理。他们为用户模式进程分配虚拟空间；他们为驱动程序处理内存等。同一个团队为应用程序代码中的小分配提供代码是合乎逻辑的。根据我的经验，NT堆是个好东西。它没有任何重大缺陷。当您有非常具体的要求时，其他一些分配器可能会执行得更好。在一般情况下，NT 堆是正确的起点。它很可能会满足您的需求。

请注意，VC++ 是一个编译器。它创建一个在操作系统控制下运行的可执行文件。谈论任何“VC++ 执行环境”都是不正确的。

尽管如此，我知道编译器本身在编译代码时并没有使用 NT 堆。他们使用自己的分配器。我不知道他们这样做的确切原因。

# database - 带有数据库数据的 FXML 中的 JavaFX 2.0 TableView

> ID：10563966
> 
> 赞同：0
> 
> 时间：2012-05-12T13:01:06.637
> 
> 标签：database, tableview, javafx-2, fxml

我想知道如何将 mysql 数据库中的数据检索到 fxml 文件中的 tableview 中。我必须检索数据并将其放入位于 fxml 文件中的 tableview 中。我知道如何连接到数据库，但我不知道如何检索数据并将其放入 tableview。

表格视图位于 fxml 文件中。如果我还在这里，任何人都知道在我导入数据后如何编辑此表格视图中的单元格？

我使用的应用程序是桌面应用程序！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:26:50.127

有几种方法可以做到这一点，一种是使用[DataFX](http://www.javafxdata.org/)的 JDBC 适配器。

**更新**

FXML 本身只是定义了一个基于 xml 的 UI 结构，它不能从数据库中加载数据。

当数据来自数据库时，在大多数情况下，创建包含数据值的静态 fxml 文件可能不是一个好主意。每当数据库中的数据发生变化时，您都需要生成并加载一个新的 fxml 文件，为此您需要手动创建新文件或编写一个脆弱的程序来根据数据中的数据生成新的 fxml 文件数据库。

建议的方法：

1.  fxml 仅用于定义您的 TableView 结构，但不包含实际数据值。
2.  在您的 JavaFX Java 代码中连接到 mysql 数据库。
3.  使用 DataFX JDBC 数据源适配器从数据库中检索数据并填充您的 TableView。

您可以编写自己的代码来执行第 3 步。如果您希望使用 JPA（我认为 DataFX 目前不直接支持），使用您自己的代码可能是一个好主意。否则，您可能会使用 DataFX 实现更快地获得更好的结果。

要了解如何在 TableView 中进行编辑，请阅读此[TableView 教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)。同样，DataFX 将通过为编辑提供[控制单元工厂](http://www.javafxdata.org/content/cell-factories/)来帮助您- 所以我建议为此使用 DataFX 而不是手动编码 TableView 编辑处理。

当您需要对数据库进行编辑时，我不确定 DataFX 代码是否会对您有所帮助；在这种情况下，您可能需要添加自己的 JDBC 或 JPA 代码来提交更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:17:04.083

AFAIK，您无法在 FXML 文件中检索和显示来自 DB 的数据，并使表格视图单元格在 FXML 文件中可编辑。尽管这是可能的（可能部分通过自定义`Builder`和`BuilderFactory`），但在 MVC 的意义上不建议这样做。请先阅读[为什么使用 FXML](http://docs.oracle.com/javafx/2/fxml_get_started/why_use_fxml.htm#CHDCHIBE)及其好处。如果有必要，您仍然可以在 FXML 文件中定义一些基本的数据结构，请参阅[FXML 简介](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)。
因此，在控制器的方法中执行与视图无关的任务`initialize()`，即检索数据并设置 tableview 的项目。自定义表格列的单元工厂，支持编辑等。

# android - 使用 javah 工具时包含 Android 平台 jar

> ID：10563967
> 
> 赞同：0
> 
> 时间：2012-05-12T13:01:12.320
> 
> 标签：android, c++, c, android-ndk, javah

使用javah工具创建C/C++.h头文件时如何包含Android平台的jar文件？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:00:51.000

假设：

1.  您的 android SDK 安装在 C:\android\sdk 中（并且您已下载 Android 1.5 平台）
2.  您的 android NDK 安装在 C:\android\ndk

打开命令行窗口。转到 C:\android\ndk\samples\hello-jni 文件夹。并执行以下操作：

```
javah -classpath C:\android\sdk\platforms\android-3;src com.example.hellojni.HelloJni 
```

它将`com_example_hellojni_HelloJni.h`为来自 Android NDK 的 hello-jni 示例生成带有 JNI 函数的文件。

# methods - 咖啡脚本：使用“构造”字符串调用方法

> ID：10563969
> 
> 赞同：0
> 
> 时间：2012-05-12T13:01:20.307
> 
> 标签：methods, coffeescript, dojox.gfx

我试图通过使用由可变数量的用户输入字段组成的字符串来调用 Coffee 脚本中类实例的方法。假设我们有一个“表面”实例，我们应该在其上调用一个绘制特定图形的方法。这是 CoffeeScript 中的代码：

```
 dojo.ready ->    
    dojoConfig = gfxRenderer: "svg,silverlight,vml"
    surface = dojox.gfx.createSurface("dojocan", 500, 400)
    /  The user's input values are stored in an array
    /  and then concatenated to create a string of this pattern:
    /  formula = "createRect({pointX,pointY,height,width})"
    /  Now I should apply the string "formula" as a method call to "surface" instance

    surface."#{formula}".setStroke("red") 

    / ?? as it would be in Ruby , but .... it fails 
```

我见过所有类似的问题，但我找不到在 Coffee Script 中实现它的答案。

感谢您的时间 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:41:16.330

所以你有一个这样的字符串：

```
"createRect(pointX,pointY,height,width)" 
```

并且您想将其`createRect`称为 on 的方法`surface`，对吗？通过将所有内容集中到一根弦上，您正在使您的生活变得更加艰难和丑陋；相反，您应该创建两个单独的变量：一个保存方法名称的字符串和一个保存参数的数组：

```
method = 'createRect'
args   = [ 0, 11, 23, 42 ] # the values for pointX, pointY, height, width 
```

然后你可以使用[`Function.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
surface[method].apply(surface, args) 
```

如果您需要将方法名称和参数存储在数据库中的某个位置（或通过网络传输它们），则使用它[`JSON.stringify`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)来生成结构化字符串：

```
serialized = JSON.stringify(
    method: 'createRect'
    args:   [0, 11, 23, 42]
)
# serialized = '{"method":"createRect","args":[0,11,23,42]}' 
```

然后[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)解压字符串：

```
m = JSON.parse(serialized)
surface[m.method].apply(surface, m.args) 
```

不要丢弃你已经拥有的结构，保持该结构并利用它，这样你就不必浪费大量的时间和精力来解决已经解决的解析任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:56:19.227

我今天真高兴！我已经学会了如何构造调用类实例上的方法的字符串。看起来很简单（在 MU IS TOO SHORT 给我看之后）：

```
method = "stringMethodToCall"  # selected by user's input  
arguments = [arrayOfValues] # must be array or array-like object
surface = dojox.gfx.createSurface("dojocan", 500, 400) 
```

现在 ：

```
surface[method].apply(surface,arguments) 
```

就像先生一样。CODEMONKEY 说，surface[method] 是按键访问对象。

再一次感谢你 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:13:37.290

尝试

```
surface[formula].setStroke("red") 
```

# android - 如何用不同权重的内容（如百分比宽度）填充布局？

> ID：10563977
> 
> 赞同：0
> 
> 时间：2012-05-12T13:01:42.127
> 
> 标签：android, android-layout, android-linearlayout, textview

我有总重量为 10 的水平布局。我想在上面放一些不同宽度的内容。我希望我的内容看起来像它的宽度的下一个比例： 3:5:1:1 即像一个包含 30%、50%、10%、10% 列的表格 如何组织这个？我现在有：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:baselineAligned="true"
    android:clipChildren="false"
    android:orientation="horizontal"
    android:useLargestChild="true"
    android:weightSum="10" > 
```

以及具有不同权重的 TextView，如下所示：

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="top"
        android:layout_weight="3"
        android:padding="2dp"
        android:text="TextView 1"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

但它没有用。视图位于屏幕外。如果我将 match_parent 更改为 wrap_content 它看起来不错，而我没有在其上放置大文本，那么 TextView 会长大。我不想要它，我只想显示那部分文本，它将以当前的 30、50 或其他 % 换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:07:21.377

你设置`android:layout_width="match_parent"`为`android:layout_width="0dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:39:04.513

我在容器中的限制文本中找到了解决方案

```
android:maxEms="<Wieght of this TextView>" 
```

似乎工作正常。但我不确定它是否正确。

# ios - 带有圆角的 UIImage

> ID：10563986
> 
> 赞同：21
> 
> 时间：2012-05-12T13:02:36.090
> 
> 标签：ios, xcode, uiimage, rounded-corners

我已经阅读了几篇文章。几乎每个人都建议使用`QuartzCore/QuartzCore.h`with`layer.cornerRadius`

我已经尝试过这种方法和其他一些方法。

好吧，当图像不动时，一切正常。

但在我的项目中，我总是移动我的图像。如果我添加圆角半径或阴影，图像移动不再平滑。它看起来很棒！

这就是我调整图像大小的方式：

```
CGSize newSize = CGSizeMake(200*height/image.size.height, 280);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(nil, newSize.width, newSize.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);
CGContextClearRect(context, CGRectMake(0, 0, newSize.width, newSize.height));
CGContextDrawImage(context, CGRectMake(0, 0, newSize.width, newSize.height), image.CGImage);
CGImageRef scaledImage = CGBitmapContextCreateImage(context);
CGColorSpaceRelease(colorSpace);
CGContextRelease(context);
UIImage *newImage = [UIImage imageWithCGImage: scaledImage];
CGImageRelease(scaledImage); 
```

我想知道一种调整图像大小、添加阴影、圆角半径并且仍然可以平滑移动图像的好方法。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-12T13:09:11.093

```
// Get your image somehow
UIImage *image = [UIImage imageNamed:@"image.jpg"];

// Begin a new image that will be the new image with the rounded corners 
// (here with the size of an UIImageView)
 UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, NO, [UIScreen mainScreen].scale);

 // Add a clip before drawing anything, in the shape of an rounded rect
  [[UIBezierPath bezierPathWithRoundedRect:imageView.bounds 
                        cornerRadius:10.0] addClip];
 // Draw your image
[image drawInRect:imageView.bounds];

 // Get the image, here setting the UIImageView image
  imageView.image = UIGraphicsGetImageFromCurrentImageContext();

 // Lets forget about that we were drawing
  UIGraphicsEndImageContext(); 
```

尝试使用此代码移动，据我所知，我不久前使用过它，它制作了一个带有圆角的图像，您可以将其移动到目标中。但它似乎扩展得很好......

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-07T11:01:28.377

罗汉的回答很好。如果有人有任何重构它以在他们的项目中工作的问题，这里是一个简洁的重构，希望能帮助一些新的程序员：

```
+ (UIImage *)imageWithRoundedCornersSize:(float)cornerRadius usingImage:(UIImage *)original
{    
    UIImageView *imageView = [[UIImageView alloc] initWithImage:original];

    // Begin a new image that will be the new image with the rounded corners
    // (here with the size of an UIImageView)
    UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, NO, 1.0);

    // Add a clip before drawing anything, in the shape of an rounded rect
    [[UIBezierPath bezierPathWithRoundedRect:imageView.bounds
                            cornerRadius:cornerRadius] addClip];
    // Draw your image
    [original drawInRect:imageView.bounds];

    // Get the image, here setting the UIImageView image
    imageView.image = UIGraphicsGetImageFromCurrentImageContext();

    // Lets forget about that we were drawing
    UIGraphicsEndImageContext();

    return imageView.image;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-10T18:22:34.933

Charlie Seligman 的解决方案有更优化的内存版本。您不需要为此目的使用 UIImageView。

```
+ (UIImage *)imageWithRoundedCornersSize:(float)cornerRadius usingImage:(UIImage *)original
{
    CGRect frame = CGRectMake(0, 0, original.size.width, original.size.height);

    // Begin a new image that will be the new image with the rounded corners
    // (here with the size of an UIImageView)
    UIGraphicsBeginImageContextWithOptions(original.size, NO, original.scale);

    // Add a clip before drawing anything, in the shape of an rounded rect
    [[UIBezierPath bezierPathWithRoundedRect:frame
                                cornerRadius:cornerRadius] addClip];
    // Draw your image
    [original drawInRect:frame];

    // Get the image, here setting the UIImageView image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    // Lets forget about that we were drawing
    UIGraphicsEndImageContext();

    return image;
} 
```

您可以通过指定cornerRadius 等于增加图像大小两倍（image.size.width * 2）来获得圆形图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T13:53:55.700

在.m 文件中导入文件#import 后尝试下面的代码

```
 yourImageView.layer.shadowColor=[[UIColor grayColor] CGColor];
  yourImageView.layer.cornerRadius = 8;
  yourImageView.layer.shadowOffset=CGSizeMake(2, 2);
  yourImageView.layer.shadowOpacity=1.0;
  yourImageView.layer.shadowRadius=1.0; 
```

希望，这对你有帮助....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T06:34:42.427

如果在动画图像位置时性能很差，可能是因为它必须每帧都用圆角半径渲染图像。如果图像后面没有纯色，这是不可避免的（每帧的“混合”不同，因此必须计算）。如果不是这种情况，并且您可以将背景设置为纯色，请确保将其设置为`UIView.backgroundColor`clearColor 以外的其他值，alpha 为 1.0。栅格化图层也可能对您有所帮助（它将渲染图层的缓存版本存储在内存中，并在整个动画中使用它。但同样，如果图层不透明，也无济于事）。

这是你如何做到这一点：

```
UIView *yourView;
CALayer *yourLayer = yourView.layer;

yourLayer.shouldRasterize = YES;
yourLayer.rasterizationScale = [UIScreen mainScreen].scale; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-09T06:34:26.107

在 Objective-C 中的图像上设置圆角：

```
yourImageView.layer.cornerRadius = yourRadius;                                   

yourImageView.clipsToBounds = YES; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-30T06:25:04.493

是的，有可能。

导入 QuartzCore (#import) 标头并使用 UIImageView 的 layer 属性。

```
ImageView.layer.cornerRadius = Radius;
ImageView.clipsToBounds = YES; 
```

# ruby-on-rails - 不裁剪图像的图像的回形针尺寸

> ID：10563988
> 
> 赞同：0
> 
> 时间：2012-05-12T13:02:51.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3

任何人都可以在没有裁剪的情况下给出回形针中使用的图像尺寸。任何其他可用的符号，而不是 # 和 >。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:17:22.483

Paperclip 使用 ImageMagick 库来处理图像，因此您可以使用 ImageMagick 提供的任何选项。完整列表在这里：[http ://www.imagemagick.org/Usage/resize/](http://www.imagemagick.org/Usage/resize/)

因此，您可以执行以下操作：

```
has_attached_file :photo,
                  :styles => {
                    :thumb => "100x100!",
                    :small  => "150x150^",
                    :medium => "50%" } 
```

等等

您应该花一些时间阅读命令以找到适合您情况的命令。

# iphone - 在 UITableViewCell 上绘制垂直分隔符

> ID：10563989
> 
> 赞同：5
> 
> 时间：2012-05-12T13:02:52.307
> 
> 标签：iphone, objective-c, uitableview

我有一个简单风格的 UITableView，它的单元格是 UITableViewCell 的子类。

在单元格子类中，我覆盖了 drawRect 以将此绘图代码放入（用于垂直分隔符）：

```
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextSetStrokeColorWithColor(c, [[UIColor grayColor] CGColor]);
CGContextBeginPath(c);
CGContextMoveToPoint(c, self.frame.size.height + 0.5f, 0);
CGContextAddLineToPoint(c, self.frame.size.height + 0.5f, self.frame.size.height);
CGContextStrokePath(c); 
```

效果很好。但是，我现在已将 tableview 样式更改为分组。这条线根本没有画出来。虽然设置了一个断点，但显示 drawRect 方法被调用。

我想避免子类 UIView 只是为了画一条小线，特别是因为我已经子类化了 tableview 单元格并且我只想在单元格上绘制。那么为什么代码突然停止在分组表视图上工作呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T15:07:43.323

`drawRect`在子类中覆盖不是一个好主意`UITableViewCell`。如果您不想设置自定义单元格`backgroundView`，那么您可以添加简单`UIView`的 1px 宽度。

```
UIView* vertLineView = [[UIView alloc] initWithFrame:CGRectMake(80, 0, 1, 44)];
vertLineView.backgroundColor = [UIColor redColor];
[self.contentView addSubview:vertLineView]; 
```

# java - Admob for Android Andengine 游戏

> ID：10563990
> 
> 赞同：1
> 
> 时间：2012-05-12T13:03:03.517
> 
> 标签：java, android, admob, andengine

我通过andengine创建了一个android游戏。我想将Admob广告添加到游戏中。我使用了下面的代码。我得到了一个图片中的错误。[http://s16.postimage.org/rz6fbr2l1/Untitled.png](http://s16.postimage.org/rz6fbr2l1/Untitled.png)

```
 <activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation"/> 
```

但我在上面的清单中添加了。那么有什么问题？

```
 protected void onSetContentView() {

     final FrameLayout frameLayout = new FrameLayout(this);
     final FrameLayout.LayoutParams frameLayoutLayoutParams =
             new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT,
                                          FrameLayout.LayoutParams.FILL_PARENT);

     final AdView adView = new AdView(this, AdSize.BANNER, "PUBLISHER_ID");

     adView.refreshDrawableState();
     adView.setVisibility(AdView.VISIBLE);
     final FrameLayout.LayoutParams adViewLayoutParams =
             new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT,
                                          FrameLayout.LayoutParams.WRAP_CONTENT,
                                          Gravity.CENTER_HORIZONTAL|Gravity.TOP);

     AdRequest adRequest = new AdRequest();
     adView.loadAd(adRequest);

     this.mRenderSurfaceView = new RenderSurfaceView(this);
     mRenderSurfaceView.setRenderer(mEngine);

     final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams =
             new FrameLayout.LayoutParams(super.createSurfaceViewLayoutParams());

     frameLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
     frameLayout.addView(adView, adViewLayoutParams);

     this.setContentView(frameLayout, frameLayoutLayoutParams);
 } 
```

# ruby-on-rails-3 - Backbone.js 和基于角色的授权/客户端黑客攻击的潜力

> ID：10563993
> 
> 赞同：0
> 
> 时间：2012-05-12T13:03:34.437
> 
> 标签：ruby-on-rails-3, backbone.js, authorization, cancan

我习惯于在我的 Rails 视图中使用 cancan 来根据用户权限显示/隐藏视觉元素。例如，向允许添加新帖子的用户显示“添加新帖子”链接。

在主干应用程序中，我一开始将整个应用程序发送到客户端，我如何确保显示这些元素。显然，我可以根据用户模型上的属性隐藏它们。但是可以在客户端覆盖此属性。

只是想知道其他人正在做什么来保护他们的应用程序免受那些在客户端上弄乱 js 的人的影响。还是我太安全了（因为授权仍在服务器上正常工作，因此不会有任何数据发送到客户端）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:31:52.080

我不会说你“太安全了”，但肯定你必须依靠你的后端来防止未经授权的活动。甚至在您开始使用客户端框架之前，有人可能已经模拟了一个“添加新帖子”链接，您必须阻止在服务器上访问该链接，但没有任何改变。

# javascript - 带有python瓶的extjs ajax响应

> ID：10563998
> 
> 赞同：0
> 
> 时间：2012-05-12T13:04:03.613
> 
> 标签：javascript, python, ajax, extjs, bottle

我是网络编程新手，所以请原谅我的幼稚问题，我尝试在网络上搜索，但找不到我的基本问题的答案。

我在服务器端使用 extjs（用于小部件和 ajax）和 python（使用瓶子）。

这是我的要求。

我有 extjs EditorGrid，它只有一列（可编辑）。在索引路由（瓶子路由）上，我返回填充在此网格中并显示的 json 字典，到目前为止，一切都很好，现在我想更新此列的值并将更新的值保存在服务器端。

所以我在我的 python 脚本上添加了另一条路由，并将 ajax_reply 作为 url 到我在 javascript 上的 ajax 请求（代码如下）。

现在我的问题是我如何向客户端发送响应，例如我想向客户端发送失败消息（即更新在服务器上不成功，我想发送更新失败的 ajax 响应。我尝试从我的 ajax_reply 路由但总是在客户端调用成功。

我很困惑如何从 ajax_repose 函数发送一个 json 响应，然后在我的 javascript 成功或失败函数中再次解析它以采取相应的行动。

任何帮助都非常感谢

```
@bottle.route('/ajax_reply', method='POST')
def update_column():
    return { 'success' : False }

var grid = new Ext.grid.EditorGridPanel({
                tbar: [{ text : 'Remove' }, {text : 'Add'}],
                ds: ds,
                frame:true,
                listeners: {
                  afteredit : function(e){
                        Ext.Ajax.request({
                        url : '/ajax_reply',
                        params : {
                               action: 'update',
                                id : e.record.id,
                                field: e.field,
                                value : e.value
                        },
                        success : function(resp, opt){
                           e.record.commit();
                           Ext.Msg.alert('SUCCESS', 'success...');
                        },
                        failure: function(resp, opt){
                           Ext.Msg.alert('ERROR', 'error...');
                           e.record.reject();
                        }
                  });
                }
                }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:55:44.030

如果您正在使用`Ext.Ajax.request`，则需要自己解析响应。即使服务器无法更新记录但生成了某种正确的响应

```
{ success: false, msg: 'Failed to save record' } 
```

*   这仍然会达到您的`success`功能。因为 Ajax 请求本身是成功的。

但是，如果您使用网格和编辑器 - 我建议您查看不同的方法 - 检查远程存储、读取器/写入器等的文档。

# android - 更新网址字符串

> ID：10563999
> 
> 赞同：0
> 
> 时间：2012-05-12T13:04:08.897
> 
> 标签：android, string, url

有什么方法可以更新此 url 字符串而无需打开或升级 .apk 文件？我可以从 Twitter 帖子或其他内容中更新它吗？我只是不想每次要更改频道时都必须不断更新应用程序，但我确实需要每天更改频道约 5 次。这是一些代码：

```
video_url = "my url link - this being the link i need to update"; 
     try {
                final VideoView videoView =(VideoView)findViewById(R.id.videoView1);
                mediaController = new MediaController(ServerActivity.this);
                mediaController.setAnchorView(videoView);
                // Set video link (mp4 format )
                Uri video = Uri.parse(video_url);
                videoView.setMediaController(mediaController);
                videoView.setVideoURI(video); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:11:59.313

将 URL 保存在持久存储中，例如`SharedPreferences`并根据您要更改的频道从中加载适当的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T13:12:51.640

我会通过 RSS 提要检索 url。

[http://www.ibm.com/developerworks/opensource/library/x-android/index.html](http://www.ibm.com/developerworks/opensource/library/x-android/index.html)