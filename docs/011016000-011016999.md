# StackOverflow 问答 11016000-11016999

# java - 将动态表添加到 pdf 模板

> ID：11016002
> 
> 赞同：2
> 
> 时间：2012-06-13T13:34:40.490
> 
> 标签：java, itext

我正在使用以下 Java 代码用 itext 填充 pdf 模板

```
 PdfReader pdfTemplate = getPdfReader(templateFile);
    PdfStamper stamper = new PdfStamper(pdfTemplate, writer);
    stamper.getAcroFields().setField("#ID", "1");
    stamper.getAcroFields().setField("#value", "27");
    stamper.getAcroFields().setField("#valuexxx", "99");
    stamper.setFormFlattening(true);
// TODO Dynamic Table
    stamper.close();
    pdfTemplate.close(); 
```

现在我的问题：

我会用表格动态长度替换 PDF 中的文本字段。

我试过了

```
 float[] fieldPosition= pdfTemplate.getAcroFields().getFieldPositions("tableField");
    PdfPTable table = buildTable();
    PdfContentByte cb = stamper.getOverContent(1); 
    table.writeSelectedRows(0, -1, fieldPosition[1],fieldPosition[4],cb); 
```

这很好用，但是当字段是一些内容之后，表格“覆盖它”，第二个问题是表格的行数超过页面可以容纳的行数。

有人知道如何真正替换字段并重建以下文档吗？

# c# - 使用 LINQ 订购我的收藏时出现问题

> ID：11016009
> 
> 赞同：0
> 
> 时间：2012-06-13T13:35:06.873
> 
> 标签：c#, linq

我有以下内容：

```
var cities = _cityRepository.GetPk(partitionKey);
var sortedCities = cities.OrderBy(item => item.RowKey.Substring(0, 4))
                         .ThenBy(item => item.ShortTitle);
return sortedCities; 
```

城市在哪里：`ICollection<City>`

这给了我一个错误

```
Cannot implicitly convert type 'System.Linq.IOrderedEnumerable<Storage.Models.City>' to 'System.Collections.Generic.ICollection<Storage.Models.City>'. An explicit conversion exists (are you missing a cast?) 
```

有人可以帮我解决这个问题。我以为我可以运行 LINQ 重新排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:37:18.207

在末尾添加`.ToList()`如下

```
var sortedCities = cities.OrderBy(item => item.RowKey.Substring(0, 4))
                         .ThenBy(item => item.ShortTitle).ToList(); 
```

可能你的方法必须返回`IOrderedEnumerable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:39:05.053

您的方法似乎期望返回类型的值，`ICollection<Storage.Models.City>`但您返回的`IOrderedEnumerable<Storage.Models.City>`通常是 a `IEnumerable<Storage.Models.City>`。

您可以更改方法的返回类型，也可以将返回值转换为`ICollection`诸如`List`with之类的东西`ToList()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:38:19.937

“无法转换为指定类型”，调用`.ToList`：

```
var sortedCities = cities.OrderBy(item => item.RowKey.Substring(0, 4))
                                  .ThenBy(item => item.ShortTitle).ToList(); 
```

# ios - clang：错误：没有这样的文件或目录：ASIAuthenticationDialog.m

> ID：11016016
> 
> 赞同：1
> 
> 时间：2012-06-13T13:35:36.443
> 
> 标签：ios, xcode, audio, asihttprequest

我有这个错误：

```
clang: error: no such file or directory: 
'/Users/usuario/Desktop/echonest-echoprint-ios-sample-b937c04/Classes/ASIHTTP/clang: 
 error: no such file or directory:' 
```

我想运行“ `echoprint-ios-sample`”项目并导入 ASIHTTP 文件

我不知道是什么问题:(

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:08:35.177

如果您删除了任何 h 或 m 文件，请通过 xcode 中的项目导航（command + 1），该项目导航器中可能有一些参考（将以红色显示）。你可以删除它。那么就不会出现这样的错误。希望这会对你有所帮助。

否则，看看[这个链接](https://stackoverflow.com/a/10619927/1424174)

# android - 一个可以实现xml文件并相应运行的解析器应用程序

> ID：11016021
> 
> 赞同：1
> 
> 时间：2012-06-13T13:35:47.930
> 
> 标签：android, xml, parsing

我想实现一个可以作为解析器工作的应用程序。用户将能够上传 xml 文件，这些文件将描述一些 android 应用程序的 UI 和功能属性。我想知道是否已经有一种方法可以解析 xml 文件并将它们用作布局而无需编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:38:00.843

我认为你的解析器将不得不生成新的视图，这些视图通过 xml 文件接收“参数”。之后，您必须以编程方式将视图添加到您的布局根目录。

您为此目的使用哪种解析器技术并不重要，因为您将从它创建对象 - 所以 SAX、DOM 和 Pull-Parser 都适合。

# silverlight - 异常：Microsoft LightSwitch Visual Studio 2012 RC 出现错误 HRESULT E_FAIL

> ID：11016025
> 
> 赞同：2
> 
> 时间：2012-06-13T13:35:57.680
> 
> 标签：silverlight, visual-studio-lightswitch, visual-studio-2012, hresult

我最近安装了 Visual Studio 2012 RC 以及 VS 2012 SDK 和 LightSwitch Extensibility Toolkit。

这是我的 Client.Design -> TControl.XAML 文件中的 XAML 代码

```
<UserControl x:Class="CustomControls.Presentation.Controls.TControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:framework="clr-namespace:Microsoft.LightSwitch.Presentation.Framework;assembly=Microsoft.LightSwitch.Client">   
    <Grid Width="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
        <framework:ContentItemPresenter ContentItem="{Binding ChildItems[0]}" Grid.Row="0" Margin="3" />
        <framework:ContentItemPresenter ContentItem="{Binding ChildItems[1]}" Grid.Row="0" Margin="3" />
    </Grid>
</UserControl> 
```

我在设计器上看不到此 XAML 的输出。相反，我在设计器区域看到此错误消息：

```
Exception: Error HRESULT E_FAIL has been returned from a call to a COM component.
Stacktrace: 
    at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
    at MS.Internal.XcpImports.Collection_InsertValue[T](PresentationFrameworkCollection`1 collection, UInt32 index, CValue value)
    at MS.Internal.XcpImports.Collection_InsertDependencyObject[T](PresentationFrameworkCollection`1 collection, UInt32 index, DependencyObject value)
    at System.Windows.PresentationFrameworkCollection`1.InsertDependencyObject(Int32 index, DependencyObject value)
    at System.Windows.Controls.UIElementCollection.InsertInternal(Int32 index, UIElement value) 
```

我强烈怀疑这与此处涉及的命名空间和 Silverlight 版本有关。我的项目设置为使用 Silverlight 版本 5。

快速谷歌搜索和“Stackoverflowing”确实揭示了有关此错误的一些一般信息，但没有太大帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:22:22.290

您已经明确说明了您安装了哪些版本的 LS RC 和 2012 SDK，但是您安装了哪个版本的扩展工具包？我知道一个是为 Beta 发布的，我不确定另一个是否是专门为 LS V2 RC 发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T21:55:01.250

要在 VS2013 终极版中解决此问题，我必须遵循帖子[http://rathodkrunal.blogspot.com/2011/11/visual-studio-2010-error-hresult-efail.html](http://rathodkrunal.blogspot.com/2011/11/visual-studio-2010-error-hresult-efail.html)

其中它谈到了简单地清理 Visual Studio 的 ItemTemplateCache 并使用 /setup 标志运行一次。

如果链接中断或不可用，这里是旧 VS 的缓存位置：

> 您可以在“Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplatesCache”删除项目缓存，然后运行“devenv /setup”再次构建缓存，看看是否有帮助。

# mysql - mysql 记录表更改历史

> ID：11016026
> 
> 赞同：0
> 
> 时间：2012-06-13T13:35:57.707
> 
> 标签：mysql, logging, history

我想在单个表中记录表的更改历史例如：表 a(col1,col2,col3) 表 b(col1,col2) 表历史(tablename,olddata,newdata,modifiedDate,modifiedBy)

如果我执行更新语句，例如更新集合 col1=2,col2=4,col3=5 那么它应该以

```
 a|col1=1,col2=2,col3=3| col1=2,col2=4,col3=5|13/6/2012|username 
```

# javascript - 如何在 javascript 中使用 django-comments 表单？

> ID：11016027
> 
> 赞同：0
> 
> 时间：2012-06-13T13:35:57.820
> 
> 标签：javascript, django, comments, django-comments

我有一个类似系统的注释，请参见此处的图片：[http](http://www.uploadscreenshot.com/image/1091218/5818195) ://www.uploadscreenshot.com/image/1091218/5818195当点击注释时，您可以看到标题、消息和评论。我通过 js 文件发送它们并将它们设置在视图中。我现在的问题是我可以使用 django-comments 表单来做到这一点吗？如果我只是粘贴到模板中并在引导弹出窗口中显示的 div 中使用 {% for note in notes %} 它会显示每个不在该窗口上的所有表单（可以理解）。

如何将正确的值传递给 django-comments 表单？

这是 js 函数（只是相关部分）：

```
 request.done(function(note) {
    $('h3#view-note-title').text(note.title);
    $('p#view-note-desc').text(note.message);
    var html = '';
    for(var i=0; i<note.comments.length; i++) {
        var item = note.comments[i];
        html += "<p id='comments' style='display: block; background: #a3d95d;margin-bottom: 3px;'>" + item.comment + "</p>";
        html += "<p id='username' style='display: block;background: #edac65;margin-bottom: 3px;'>" + item.username + "</p>";
        html += "<p id='date' style='display: block;background: #afe9eb;margin-bottom: 13px;'>"+ item.submit_date +"</p>";
    }
    $('div#comments').html(html);
}); 
```

这是views.py的相关部分：

```
 if request.method == "GET" and request.is_ajax:
    note = get_object_or_404(Note, pk=request.GET['noteid'])
    ctype = ContentType.objects.get_for_model(Note)
    latest_comments = Comment.objects.filter(is_public=True, is_removed=False, content_type=ctype, object_pk=note.id).order_by('-submit_date')[:5]
    response_data = {}
    response_data['title'] = note.title
    response_data['message'] = note.message
    response_data['comments'] = [
        {'username': c.user.username, 'comment': c.comment, 'submit_date': c.submit_date} for c in latest_comments]
    return HttpResponse(json.dumps(response_data, cls=DjangoJSONEncoder), mimetype="application/json") 
```

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:47:07.150

解决方案是通过视图发送 CommentForm。

代码：模板

```
<form id="form_comments" action="{% comment_form_target %}" method="post">
{% csrf_token %}
<table>
<tr>
  <td colspan="2">
    <div class="kopce"></div>
    <input type="submit" name="submit" value="Post">
    <input type="submit" name="preview" value="Preview">
  </td>
</tr> 
```

风景：

```
from django.contrib.comments.forms import CommentForm

form = CommentForm(target_object = note)
response_data["form_html"] = form.as_p() 
```

js：

```
 $('form#form_comments div.kopce').html(note.form_html); 
```

# freebase - Freebase初学者：获得运动员的运动

> ID：11016035
> 
> 赞同：1
> 
> 时间：2012-06-13T13:36:28.720
> 
> 标签：freebase

我正在尝试使用[Freebase](http://www.freebase.com/)找出职业运动员所属的团队。

所以我正在尝试做这样的事情

```
[{
  "id":   null,
  "name": "Kobe Bryant",
  "type": "/sports/pro_athlete",
  "sports_played":    []
}]​ 
```

[查询编辑器](http://www.freebase.com/queryeditor?autorun=true&q=%5B%7B%22id%22:null,%22name%22:null,%22type%22:%22/sports/pro_athlete%22,%22*%22:%5B%5D%7D%5D)

然后提取属性“sport_played”以找出玩家所属的运动。我的计划是对“basketball_player”进行更具体的查询，直到找到球队名称。（这是一种更简单的方法吗？）

但是，我已经在第一步失败了，因为在结果中，虽然属性 sport_played 和 sport_played_professional 包含一个条目，但该条目为空：

```
{
  "code":          "/api/status/ok",
  "result": [{
    "id":   "/en/kobe_bryant",
    "name": "Kobe Bryant",
    "sports_played": [
      null
    ],
    "type": "/sports/pro_athlete"
  }],
  "status":        "200 OK",
  "transaction_id": "cache;cache03.p01.sjc1:8101;2012-06-13T13:30:20Z;0053"
} 
```

我很困惑：我通过浏览数据库知道该球员应该有运动价值。并且结果清楚地表明结果中的“sports_played”列表中有一个值。

但为什么它是空的？不应该是对篮球对象的引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:20:39.303

您的查询要求提供 sports_played 列表，但由于您只使用了方括号，因此它只会返回所有匹配主题的名称列表。

如果您在查询中添加花括号，您会看到 sports_played 实际上返回了一个 name = null 的主题（这就是您之前的查询所显示的内容）

```
[{
  "id": null,
  "name": "Kobe Bryant",
  "type": "/sports/pro_athlete",
  "sports_played": [{}]
}] 
```

这是因为[sports_played 的期望值](http://www.freebase.com/schema/sports/pro_athlete/sports_played_professionally)是一个名为Sportsplayed 的[CVT ，它将](http://wiki.freebase.com/wiki/Cvt)[运动员](http://www.freebase.com/schema/sports/pro_sports_played)与特定时间段的运动联系起来。这样我们就可以跟踪参加过多项运动的运动员，并知道哪一项是最新的。

如果您想查看 CVT 对象中的值，您需要像这样进一步深入：

```
[{
  "id": null,
  "name": "Kobe Bryant",
  "type": "/sports/pro_athlete",
  "sports_played": [{
    "type": "/sports/pro_sports_played",
    "sport": {
      "id": null,
      "name": null
    },
    "career_start": null,
    "career_end": null
  }]
}] 
```

在[查询编辑器中尝试](http://www.freebase.com/queryeditor?q=%5B%7B%22id%22%3anull,%22name%22%3a%22Kobe%20Bryant%22,%22type%22%3a%22/sports/pro_athlete%22,%22sports_played%22%3a%5B%7B%22type%22%3a%22/sports/pro_sports_played%22,%22sport%22%3a%7B%22id%22%3anull,%22name%22%3anull%7D,%22career_start%22%3anull,%22career_end%22%3anull%7D%5D%7D%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:39:16.853

该`sports_played`属性并不是您真正想要的，因为它不一定与包含团队信息的属性相关。

相反，您想使用以下内容：

```
{
  "id":   null,
  "name": "Kobe Bryant",
  "/basketball/basketball_player/team" : [{"team":null}],
  }]
} 
```

如果你想得到所有科比布莱恩特的所有球队，你可以使用类似的东西：

```
[{
  "id":   null,
  "name": "Kobe Bryant",
  "/soccer/football_player/current_team" : [{"team":null,"optional":true}],
  "/basketball/basketball_player/team" : [{"team":null,"optional":true}],
  "/american_football/football_player/current_team" :[{"team":null,"optional":true}]
  }]
}]​ 
```

不幸的是，您需要手动浏览模式并手动提取感兴趣的属性，因为它们的规则性不够可靠，无法自动查询，但确实没有那么多运动需要考虑，所以不应该整理你的清单需要很长时间。

# php - PHP - determine last function-call from chained function-calls

> ID：11016036
> 
> 赞同：1
> 
> 时间：2012-06-13T13:36:31.590
> 
> 标签：php, method-chaining

When using chained functions, is there a way to determine if the current call is the last in the chain?

For example:

```
$oObject->first()->second()->third(); 
```

I want to check in `first`, `second` and `third` if the call is the last in the chain so it saves me to write a `result`-like function to always add to the chain. In this example the check should result true in `third`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:40:44.790

No, not in any way that's sane or maintainable.
You'll have to add a `done()` method or similar.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:41:44.140

As far as i know it's impossible, i'd suggest to use finishing method like this:

```
$oObject->first()
  ->second()
  ->third()
  ->end(); // like this 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-12T02:47:58.810

If you want to execute a function on the last chain (without addional exec or done on the chain).

The code below will obtain the full chain from the source code and return the data after the last chain.

```
<?php

$abc = new Methods;
echo($abc->minus(12)->plus(32)); // output: -12+32
echo(
    $abc->plus(84)
    ->minus(63)
); // output: +84-63

class Methods{
    private $data = '';
    private $chains = false;

    public function minus($val){
        $this->data .= '-'.$val;
        return $this->exec('minus');
    }

    public function plus($val){
        $this->data .= '+'.$val;
        return $this->exec('plus');
    }

    private function exec($from){
        // Check if this is the first chain
        if($this->chains === false){
            $this->getChains();
        }

        // Remove the first chain as it's
        // already being called
        if($this->chains[0] === $from){
            array_shift($this->chains);
        }
        else
            die("Can't parse your chain");

        // Check if this is the last chain
        if(count($this->chains) === 0){
            $copy = $this->data;

            // Clear data
            $this->chains = false;
            $this->data = '';

            return $copy;
        }

        // If not then continue the chain
        return $this;
    }

    private function getChains(){
        $temp = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS);

        // Find out who called the function
        for ($i=0; $i < count($temp); $i++) { 
            if($temp[$i]['function'] === 'exec'){
                $temp = $temp[$i + 1];
                break;
            }
        }

        // Prepare variable
        $obtained = '';
        $current = 1;

        // Open that source and find the chain
        $handle = fopen($temp['file'], "r");
        if(!$handle) return false;

        while(($text = fgets($handle)) !== false){
            if($current >= $temp['line']){
                $obtained .= $text;

                // Find break
                if(strrpos($text, ';') !== false)
                    break;
            }
            $current++;
        }

        fclose($handle);
        preg_match_all('/>(\w.*?)\(/', $obtained, $matches);
        $this->chains = $matches[1];
        return true;
    }
} 
```

# java - JScrollPane 中的 JTextArea 换行但缺少字母

> ID：11016041
> 
> 赞同：3
> 
> 时间：2012-06-13T13:36:55.993
> 
> 标签：java, swing, jscrollpane, jtextarea, joptionpane

我想`JOptionPane.showOptionDialog`用一些`JTextArea`和`JLabel`. 问题是对话框太小，我没有找到任何解决方案，所以我决定把我的内容放在`JScrollPane`.

我看到我必须将所有 my`JTextArea`和 my`JLabel`放入 a 中，`JPanel`因为将它们`JScrollPane`连续添加不允许我正确放置视口。

最后一个问题是我的 JTextArea 正确包装了单词，但是当我有 2 或 3 个字母长度的单词时，它们被滚动条隐藏。

SSCCE：

```
public class myTest extends JFrame
{
        public static void main(String[] args)
        {
            new myTest();
        }
        public myTest()
        {
            String myLongString="Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?";
            String aLittleString="I am a poor little string which is placed at the bottom of a JOptionPane.";
            String[] options = {"OK","NO"}; 

            JLabel titre1 = new JLabel("Title"); 
            JLabel titre2 = new JLabel("Title 2");

            Map<TextAttribute,Integer> attributs = new HashMap<TextAttribute, Integer>();
            attributs.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
            Font police = new Font("Serif", Font.BOLD, 12).deriveFont(attributs); 

            titre1.setFont(police);
            titre2.setFont(police);

            JTextArea text3 = new JTextArea(myLongString,5,75); 
            text3.setLineWrap(true);
            text3.setWrapStyleWord(true);
            text3.setEditable(false);
            Color back = this.getBackground();
            text3.setBackground(back);
            JTextArea text = new JTextArea(myLongString,5,75); 
            text.setLineWrap(true);
            text.setWrapStyleWord(true);
            text.setEditable(false);
            text.setBackground(back);

            JTextArea text2 = new JTextArea(aLittleString,5,75); 
            text2.setLineWrap(true);
            text2.setWrapStyleWord(true);
            text2.setEditable(false);
            text2.setBackground(back);
            JPanel bas = new JPanel(new BorderLayout());
            JPanel basbas = new JPanel(new BorderLayout());

            bas.add(titre1,BorderLayout.NORTH);
            bas.add(text,BorderLayout.CENTER);
            basbas.add(titre2,BorderLayout.NORTH);
            basbas.add(text2,BorderLayout.CENTER);
            basbas.add(text3,BorderLayout.SOUTH);
            bas.add(basbas,BorderLayout.SOUTH);

            JScrollPane js = new JScrollPane(bas);
            js.setBorder(null);
            js.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
            js.setViewportView(bas);
            JLabel lMessage = new JLabel("A message."); 

            Object[] params = {js,lMessage}; 

            int n = JOptionPane.showOptionDialog(new JFrame(),
                    params,
                    "my dialog", 
                    JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE,
                    null, 
                    options, 
                    options[0]); 

        }
    } 
```

我阅读了几个主题，但他们总是在谈论 setWrapStyleWord。我禁用了水平滚动条，因为我不想要它，事实上我不想要一个滚动条用于 2 个字母的越位。

在我看来，问题是我用 a 构造了滚动条，`JPanel`但我没有找到其他解决方案。

欢迎对我的帖子或我的英语提出任何反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:40:48.903

把我的评论回答一下。请尝试为您要添加的内容提供一个[EmptyBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)，或者您可以将一个 EmptyBorder 添加到您的.`JPanel``JScrollPane``JTextArea`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T14:48:06.810

您正在将 a 添加`JScrollPane`到a和 a的`JPanel`父级。这样，就会认为它的宽度比渲染文本的宽度要宽。`JLabel``JTextArea``JTextArea`

我建议您将滚动条添加到`JTextArea`代替（使滚动窗格成为父级）。然后 textarea 将知道实际宽度（不包括滚动条）。

* * *

## 例子：

![截屏](../Images/495cadea6a120bffc90f2667814a740f.png)

```
public static void main(String[] args) {

    String myLongString="Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?";
    String[] options = {"OK","NO"}; 

    JTextArea text = new JTextArea(myLongString, 5, 55); 
    text.setLineWrap(true);
    text.setWrapStyleWord(true);
    text.setEditable(false);

    JPanel bas = new JPanel(new BorderLayout());
    bas.add(new JLabel("Title"), BorderLayout.NORTH);
    bas.add(new JScrollPane(text),BorderLayout.CENTER);

    JOptionPane.showOptionDialog(new JFrame(),
            bas,
            "my dialog", 
            JOptionPane.YES_NO_OPTION,
            JOptionPane.QUESTION_MESSAGE,
            null, 
            options, 
            options[0]); 

    System.exit(0);
} 
```

# mysql - MySQL 将 COMMENT 添加到外键

> ID：11016042
> 
> 赞同：4
> 
> 时间：2012-06-13T13:36:58.303
> 
> 标签：mysql, sql, foreign-keys

我正在将旧数据库 SyBase 转换为 MySQL，并且我有这个 DDL 查询：

```
ALTER TABLE "DBA"."tab_prodotto"
  ADD FOREIGN KEY "fkey_idlinea" ("tpr_idlin") 
  REFERENCES "DBA"."linea" ("lin_id")
go
COMMENT ON FOREIGN KEY "DBA"."tab_prodotto"."fkey_idlinea" IS
'Riferimento linea'
go 
```

查询的 Alter 部分运行良好，但我在 COMMENT 上遇到了麻烦。我已经知道我可以更改一列以添加评论，但是外键也可以吗？如果是，如何？我在文档上没有发现什么特别之处。先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T13:41:45.350

[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)显示了该`FOREIGN KEY`命令的允许语法为：

```
 [CONSTRAINT [symbol]] FOREIGN KEY
  [index_name] (index_col_name, ...)
  REFERENCES tbl_name (index_col_name,...)
  [ON DELETE reference_option]
  [ON UPDATE reference_option]

reference_option:
   RESTRICT | CASCADE | SET NULL | NO ACTION 
```

没有允许的`COMMENT`部分。看起来这是不允许的。

我上面引用的手册来自 5.6 版。我检查了 5.1 和 5.5 版本，语法是一样的。

# jsf - p:fileUpload 在点击它时没有显示任何东西

> ID：11016043
> 
> 赞同：0
> 
> 时间：2012-06-13T13:37:02.883
> 
> 标签：jsf, primefaces

```
<p:fileUpload fileUploadListener="#{editBean.relatedFileEditUpload}"
                        style="width:370px;"
                        rendered="#{editBean.uploadFileRender}"
                        process="relatedFileUploadingEditForm:relatedFileType"
                        update="relatedFileUploadingEditForm:messages relatedFileUploadingEditForm:relatedFileType">
</p:fileUpload> 
```

以上是我正在使用的代码片段。但是单击上传按钮时没有显示浏览选项。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:44:08.827

你必须设置`mode`和`value`属性。所以试着让我们说`mode="simple"`和`value="#{editBean.yourFile}"`（org.primefaces.model.UploadedFile）

# c++ - 服务器不使用 select()、cpp 响应新客户端

> ID：11016045
> 
> 赞同：0
> 
> 时间：2012-06-13T13:37:06.580
> 
> 标签：c++, select

我按照[这个](http://www.lowtek.com/sockets/select.html)不错的教程使用 select() 函数创建了一个简单的非阻塞服务器。这是我所拥有的：

```
void setNonBlocking(int socketFD) {
    int x;
    x = fcntl(socketFD,F_GETFL,0);
    fcntl(socketFD,F_SETFL,x | O_NONBLOCK);
    return;
}

int initialize(char * port) {
    int yes = 1;
    listener = socket(PF_INET,SOCK_STREAM, 0);
    if (listener < 0) {
        perror("listener");
        exit(EXIT_FAILURE);
    }
    if (setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(yes)) == -1) {
        perror("setsockopt");
        exit(EXIT_FAILURE);
    }
    setNonBlocking(listener);

    struct sockaddr_in server_address;
    memset((char *) &server_address, 0, sizeof(server_address));
    server_address.sin_family = AF_INET;
//  server_address.sin_addr.s_addr = htonl(INADDR_ANY);
    inet_aton("132.65.151.39",&(server_address.sin_addr));
    server_address.sin_port = htons(atoi(port));

    if (bind(listener, (struct sockaddr *) &server_address,
            sizeof(server_address)) < 0 ) {
        perror("bind");
        close(listener);
        exit(EXIT_FAILURE);
    }

    listen(listener,BACKLOG);
    maxSocket = listener;
    memset((char *) &clientQueue, 0, sizeof(clientQueue));

    return 0;
}

void readSockets() {
    int i;
        cout << "in readSockets()" << endl;
    if (FD_ISSET(listener,&sockets))
        createConnection();

    for (i = 0; i < 5; i++) {
        if (FD_ISSET(clientQueue[i],&sockets))
            readData(i);
    } /* for (all entries in queue) */
}

int main(int argc, char* argv[]) {
    if (argc != 2) {
        fprintf(stderr,"usage: server port\n");
        exit(EXIT_FAILURE);
    }

    if (initialize(argv[1]) != 0) {
        exit(EXIT_FAILURE);
    }

    struct timeval timeout;
    int value;

    printf("server: waiting for connections...\n");
    while(1) {  // main accept() loop
        build_select_list();
        timeout.tv_sec = 1;
        timeout.tv_usec = 0;
        value = select(maxSocket, &sockets, (fd_set *) 0,(fd_set *) 0, &timeout);
        if (value == -1) {
            perror("select");
            exit(EXIT_FAILURE);
        }
        if (value == 0) {
            printf("%d",value);
            fflush(stdout);
        } else{
            cout << "Value is " << value << endl;
            readSockets();
        }
    }
    return EXIT_SUCCESS;
} 
```

我的问题很简单 - select 总是返回 0，这意味着它没有获得或没有响应新的连接。一天前，我用一个更简单的阻塞服务器检查了我的客户，它确实有效，所以我认为这不是问题。

您会注意到我尝试了两个 IP 地址：

```
server_address.sin_family = AF_INET;
//  server_address.sin_addr.s_addr = htonl(INADDR_ANY); 
```

谁能帮帮我吗？我感到失落 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:16:33.097

请参考`man select`，第一个参数应该是最高描述符的数量+1，所以在你的情况下：

```
value = select(maxSocket + 1, &sockets, (fd_set *) 0,(fd_set *) 0, &timeout); 
```

# php - 如何（或在哪里）使用 Zend Framework 2 的 EventManager？

> ID：11016046
> 
> 赞同：4
> 
> 时间：2012-06-13T13:37:07.113
> 
> 标签：php, frameworks, zend-framework2

我正在尝试使用 Zend Framework 2 的新 Eventmanager。我确实了解[基本用法](http://akrabat.com/zend-framework-2/an-introduction-to-zendeventmanager/)。但我不确定如何在实际项目中使用它，或者更确切地说该代码在哪里。

例如：在 Rob Allen 的介绍中（上面的链接），他在“findById”方法中触发了两个事件。听众的代码应该去哪里？在我看来，将此代码也放在 PhotoMapper 类中是没有意义的，还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:22:20.493

我承认我还没有强烈使用它，但我认为你是对的，监听器代码可能不应该在映射器中。相反，它可以在外部类中独立存在，因此它实际上可以是一个单一职责的对象 - 处理他订阅的事件 - 并且代码可以尽可能保持 DRY。

作为第一步，我们可以定义听众需要做什么来完成他的工作。有些事情他在实例化时就知道，有些事情需要在事件触发时传递。

例如，对于缓存侦听器，我可能会在 Bootstrap 中实例化他，并提供有关缓存位置、生命周期等的信息。甚至可以从缓存管理器资源中获取完全配置并准备好使用的缓存实例。这些可能是侦听器对象的构造函数参数。

然后，仍然可能在 Bootstrap 中，我会向事件管理器注册此侦听器，订阅您的事件并附加您希望在触发事件时运行的方法。当然，该方法签名需要与事件管理器提供给您的信息兼容。

我想这个想法是这个监听器对象具有以下潜在好处：

1.  单一职责，因此复杂性更低，更容易测试

2.  希望足够通用，以便这个单个侦听器可以处理多个事件。

这里有一点皱纹。仅仅在某个下游进程可能触发他订阅的事件的情况下实例化和注册一个侦听器似乎对性能造成了不合理的影响。这就是静态监听器的用武之地。同样，注册是提前完成的（就像 Bootstrap 一样），但监听器在真正需要之前不会被实例化。

披露：我可能完全错了。因此，如果有人想理顺我，那就太好了。;-)

# iphone - 如何将一组图像保存到 iPhone 应用程序中的照片库

> ID：11016048
> 
> 赞同：0
> 
> 时间：2012-06-13T13:37:12.683
> 
> 标签：iphone, ios4, iphone-sdk-3.0

我必须通过一个按钮操作将一组图像保存到照片库。

```
for (j=85; j<100; j++)
       {
           UIImage *saveImage=[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",j]];
           UIImageWriteToSavedPhotosAlbum(saveImage,self,nil,nil);
       } 
```

我使用上面的代码。图像名称以 85.png 开头并以 100.png 结尾。它会保存 4 或 5 张图像，然后在输出窗口中显示一些行，如下所示

```
-[NSKeyedUnarchiver initForReadingWithData:]: data is NULL 
```

谁能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:16:17.583

延迟一段时间后调用您的 Save 方法。图像需要一些时间才能保存在照片库中。当您连续保存多个图像时，处理覆盖和保存图像的方法不起作用。

因此，每张图像至少延迟 0.5 秒。我在我的情况下使用了这个，见下面的方法......

先声明

```
NSInteger frameCount; 
NSTimer pauseTimer; 
```

全球范围内。并取一个方法名

```
-(void)startTimer; 
```

现在在您的保存按钮上单击调用此方法

```
-(void)yourSaveButtonClick:(id)Sender
{
    [self startTimer];
}

-(void)startTimer
{
    frameCount = 85;
pauseTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(myFunctionForSaveToPhoneLibrary) userInfo:nil repeats:YES];

}

-(void)myFunctionForSaveToPhoneLibrary
{

UIImage *saveImage=[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",frameCount]];
UIImageWriteToSavedPhotosAlbum(saveImage,self,nil,nil);

frameCount++;
    if(frameCount>=100)
    {
     [pauseTimer invalidate];
     NSLog(@"Images are saved successfully");
    }
} 
```

它会工作.....谢谢！

# python - Matplotlib 中的重复刻度标签

> ID：11016050
> 
> 赞同：2
> 
> 时间：2012-06-13T13:37:16.800
> 
> 标签：python, matplotlib

我正在寻找一种从 matplotlibfigure 中提取所有文本元素的方法，包括它们的位置、样式、对齐方式等。调用`findobj(matplotlib.text.Text)`图形的方法完全可以完成这项工作。但是，我对所有刻度标签都有一些奇怪的重复，我不知道如何处理它们。

例如，`findobj`用于打印轴的所有 Text 元素：

```
import matplotlib
import pylab as p

p.plot([1,2,3])
p.xticks([1],["tick"])
ax = p.gca()
fig = p.gcf()

p.draw()
def print_texts(artist):
    for t in artist.findobj(matplotlib.text.Text):
        if t.get_visible() and t.get_text():
            print " %r @ %s" % (t.get_text(), t.get_position())

print "X-Axis Text Elements:"
print_texts(ax.xaxis)
print "Y-Axis Text Elements:"
print_texts(ax.yaxis) 
```

结果：

```
X-Axis Text Elements:
 'tick' @ (1.0, 0.0)
 'tick' @ (0.0, 1.0)
Y-Axis Text Elements:
 u'1.0' @ (0.0, 1.0)
 u'1.0' @ (1.0, 0.0)
 u'1.5' @ (0.0, 1.5)
 u'1.5' @ (1.0, 0.0)
 u'2.0' @ (0.0, 2.0)
 u'2.0' @ (1.0, 0.0)
 u'2.5' @ (0.0, 2.5)
 u'2.5' @ (1.0, 0.0)
 u'3.0' @ (0.0, 3.0)
 u'3.0' @ (1.0, 0.0) 
```

请注意，所有刻度标签在轴的末端都有重复。为什么？如何从 Text 元素列表中过滤掉它们？他们的`get_visible()`属性是True。

另一件事是我首先必须调用`draw()`才能更新/生成刻度。如何强制更新刻度标签？`matplotlib.colorbar.Colorbar`似乎有一种`update_ticks()`方法，但我在轴上找不到类似的滴答声。

我还尝试编写一个自定义后端并从`draw_text()` 渲染器的方法中获取所有文本。与文档相反，`draw_text()`它没有收到`matplotlib.text.Text`包含所有必要信息的实例，而只有一个简单的字符串和一个预先布局的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:28:28.863

这个问题的答案在 matplotlib 邮件列表中给出。Tick 对象总是创建两个文本标签，一个用于左/下，一个用于右/上。绘制 Tick 艺术家时，其`label1On`和`label2On`属性定义两个子文本标签中的哪一个接收`draw()`调用。然而，它们都保持在可见状态。

因此，在遍历图形的所有文本元素之前，我隐藏了那些不应该看到的标签：

```
for tick in fig.findobj(matplotlib.axis.Tick):
    tick.label1.set_visible(tick.label1On)
    tick.label2.set_visible(tick.label2On)

for text in fig.findobj(match=Text, include_self=False):
    s = text.get_text()
    if not s or not text.get_visible(): continue
    # do something with the texts 
```

# menu - Eclipse 插件：将我的项目类型添加到“新建”菜单

> ID：11016052
> 
> 赞同：3
> 
> 时间：2012-06-13T13:37:19.257
> 
> 标签：menu, eclipse-plugin, project

我正在编写一个 Eclipse 插件，并且我有一个创建我的项目的向导。

当按菜单 -> 新建时，有两个选项：Java 项目和项目，只有当我单击项目时才能选择我的插件项目类型。

是否可以让新菜单也包含我的项目类型？like menu -> New 会有三个选项： Java Project , XXX Project 和 Project?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:11:00.677

查看[Eclipse DLTK：将向导添加到 ScriptExplorerPart 的“新建”菜单中，](https://stackoverflow.com/questions/5421447/eclipse-dltk-adding-wizards-to-the-new-menu-of-scriptexplorerpart)该菜单与文件有关，但新项目向导的解决方案应该相同。

# html - 将 inline-block 元素清除到下一行

> ID：11016053
> 
> 赞同：6
> 
> 时间：2012-06-13T13:37:21.187
> 
> 标签：html, css

我希望将 inline-block 元素（在本例中为`<a>`within a `<p>`）清除到下一行，而无需设置`display:block`和定义宽度。

这是一个例子：http: [//jsfiddle.net/alecrust/zstKf/](http://jsfiddle.net/alecrust/zstKf/)

这是所需的结果（使用`display:block`和定义宽度）：http: [//jsfiddle.net/alecrust/TmwhU/](http://jsfiddle.net/alecrust/TmwhU/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-27T13:47:26.027

如果要避免设置显式宽度，以便根据文本的实际长度设置背景样式，可以执行以下操作：

包装你的链接：

```
 <p>To stay up to date <span><a href="#">Follow Us</a></span></p> 
```

请注意，我`<span>`在链接周围添加了一个标签。

使用 CSS 样式化你的包装器：

```
 span {
   display: inline-block;
   width: 100%;
 } 
```

将宽度设置为 100% 会强制包装器占据整行。将链接的`<a>`标签设置为 inline-block 允许它应用填充和背景，而不会使其扩展以适应容器的 100% 宽度。

分叉的 JSFiddle：http: [//jsfiddle.net/Cm9kZ/](http://jsfiddle.net/Cm9kZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:52:58.237

这有点麻烦，但它会起作用：

```
a {
    display: inline-block;
    padding: 5px 18px;
    background-color: #8C4AD5;
    text-decoration: none;
    position:relative;
    top:25px;
    left:-30%
} 
```

你必须捏造左边的位置，但这基本上会让你重新设置一个已知值，就像你的`display:block`例子中的宽度问题一样。没有更好，只是方法不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:42:59.713

我能得到的最接近我想要的是在（[小提琴](http://jsfiddle.net/alecrust/TF2AT/)`:before`）之前插入一个新行。不幸的是，这并没有将其清除到下一行。`<a>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T06:42:22.093

*这仅在您想在 p 中的最后一个元素之后换行时才有效。*

我已经做了很多实验，这对我有用，在 Safari 6 中：

```
p.linebreak-after-last-element:after {
   content: "";
   display: inline-block;
   width: 100%;
} 
```

我没有在其他浏览器中测试过这个，但是它非常简单，它应该可以在所有支持`display: inline-block`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-11T08:54:00.633

inline-block 元素后的空`<div/>`，清除 inline-block。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T14:27:59.747

根据您的要求，我认为这是不可能的。

我希望[这会有所帮助](https://stackoverflow.com/questions/4609279/css-to-line-break-before-after-a-particular-inline-block-item/4609491#4609491)，但这不是因为您的链接之前没有元素。

您应该只更改您的 HTML，例如：http: [//jsfiddle.net/thirtydot/zstKf/10/](http://jsfiddle.net/thirtydot/zstKf/10/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-26T16:45:33.033

使用伪类 :: after 你可以用`clear:both`;添加内容 财产给它。

未经测试，但理论上应该可以工作。

# jquery - 使用 .animate() 模拟 3 个串行事件

> ID：11016059
> 
> 赞同：0
> 
> 时间：2012-06-13T13:37:47.713
> 
> 标签：jquery, jquery-animate

我`.animate()`在 jQuery 中使用来模拟比赛的持续时间。这工作正常，但不如我想要的那么好。

比赛分为三个系列赛，其中有人可以在第一场比赛中最快，在最后一场比赛中最慢。希望你明白我的意思？;-)

那么有没有办法模拟时代，`.animate()`或者你有其他想法吗？

谢谢

# java - 使用 .bat 文件运行 .jar 文件

> ID：11016061
> 
> 赞同：2
> 
> 时间：2012-06-13T13:37:50.590
> 
> 标签：java, batch-file

大家好，我有一个名为 Column Reader 的 jar 文件。我正在尝试使用具有以下脚本的 .bat 文件运行它：

```
@echo off
java.exe -jar Column Reader.jar parameter 
```

谁能告诉我为什么它没有运行？因为我已经以同样的方式管理了另一个名为 Nope.jar 的 Jar 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:39:57.493

这是因为文件名中有空格。尝试使用：

```
java.exe -jar "Column Reader.jar" parameter 
```

或者更好的是，将您的 JAR 文件重命名为`column-reader.jar`. 通常 JAR 文件以全小写命名，文件名中通常没有任何空格。

一些正确的 JAR 文件名示例：

```
org.springframework.web.struts-3.1.1.RELEASE.jar
poi-ooxml-schemas.jar
slf4j-api.jar
soap.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:40:51.610

您需要确保命令行知道 where`java.exe`和`Column Reader.jar`are。此外，您需要将任何一起放在引号中，所以它会是`"Column Reader.jar"`. 您可能需要像这样直接指向 jar：

`java -jar "C:\Your\directory\Column Reader.jar" parameter`

为避免使用引号，您只需确保路径不包含任何空格。此外，如果你想指向一个特定的 java.exe 文件，你可以这样做：

`C:\Program Files\Java\jre7\bin\java.exe -jar C:\Your\directory\column-reader.jar parameter`

[如果您的 java 环境变量（ JAVA_HOME](https://confluence.atlassian.com/display/CONF26/Set+JAVA_HOME+variable+in+Windows)）已设置并且您的文件与您的`.bat`文件位于同一目录中，则不必如此明确`.jar`

# symfony - Symfony2 Security Component And Propel，select语句中的表名不正确

> ID：11016062
> 
> 赞同：0
> 
> 时间：2012-06-13T13:37:52.513
> 
> 标签：symfony, propel

我阅读[此页面](http://www.propelorm.org/cookbook/symfony2/the-symfony2-security-component-and-propel.html)是为了使用 propel orm 管理我的 symfony2.0 登录表单。在表单提交推进返回此错误：

```
Warning! Unable to execute SELECT statement 
[SELECT admin.ID, admin.USERNAME, admin.PASSWORD, admin.USERLEVEL, admin.MERCATO_ID 
FROM `` `admin` WHERE admin.USERNAME=:p1 LIMIT 1] 
[wrapped: SQLSTATE[42000]: Syntax error or access violation: 1103 Incorrect table name ''] 
```

它应该是

```
FROM admin 
```

并不是

```
FROM `` `admin` 
```

为什么在select语句中表名admin前有``？

**编辑**

security.yml 内容

```
security:
    providers:
        custom_provider:
            id: papernet.secured.security.provider
    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        login_firewall:
          pattern:    ^/login$
          anonymous:  ~
        secured_area:
            pattern:  ^/
            anonymous: ~
            form_login:
                check_path: /login_check
                login_path: /login
            logout:
                path:   /logout
                target: /login
            #anonymous: ~
            #http_basic:
            #    realm: "Secured Demo Area"

    access_control:
      - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
      - { path: ^/, roles: ROLE_ADMIN } 
```

`papernet.secured.security.provider`是我的自定义提供商，如指南中所示

# c - 使用 C 中的置换 (nPr, nCr) 函数避免整数溢出

> ID：11016069
> 
> 赞同：0
> 
> 时间：2012-06-13T13:38:08.220
> 
> 标签：c, math, statistics

我正在尝试做一些与统计相关的功能，以便我可以执行一些相关的程序（即：概率的统计计算，为任意深度生成帕斯卡三角形等）。

我遇到了一个可能要处理溢出的问题。例如，如果我想计算 (n=30,p=1) 的 nPr，我知道我可以将其简化为：

```
30P1 = 30! / (30 - 1)!
     = 30! / (29)!
     = 30! / 29!
     = 30 
```

但是，当使用下面的函数进行计算时，看起来我总是会因为整数溢出而得到无效值。是否有任何解决方法不需要使用库来支持任意大的数字？我在其他有关 gamma 函数的帖子中阅读了一些内容，但找不到具体的例子。

```
int factorial(int n) {
   return (n == 1 || n == 0) ? 1 : factorial(n - 1) * n;
}

int nCr(int n, int r) {
   return (nPr(n,r) / factorial(r));
   //return factorial(n) / factorial(r) / factorial(n-r));
}

int nPr(int n, int r) {
   return (factorial(n) / factorial(n-r));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:31:09.977

这是一种不使用伽马函数的计算方法。它依赖于 n_C_r = (n/r) * ((n-1) *C* (r-1)) 以及对于任何正值 n_C_0 = 1 的事实，因此我们可以使用它编写如下所示的递归函数

```
public long combination(long n, long r) {
    if(r==0)
        return 1;
    else {
        long num = n * combination(n - 1, r - 1);
        return num/r;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:45:35.003

我认为你有两个选择：

1.  使用大整数库。这样您就不会失去精度（浮点数可能适用于某些情况，但它是一个糟糕的替代品）。

2.  重组你的函数，这样它们就不会达到很高的中间值。例如是从到`factorial(x)/factorial(y)`的所有数字的乘积。所以只需编写一个循环并乘以。这样，如果最终结果溢出，您只会得到溢出。`y+1``x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:48:10.123

如果您不必处理带符号的值（而且您似乎没有这样做），您可以尝试使用更大的整数类型，例如`unsigned long long`. 如果这还不够，您需要使用支持任意长整数的非标准库。请注意，使用该`long long`类型需要 C99 编译器支持（如果您使用 GCC，可能必须使用 编译`-std=c99`）。

编辑：您可能可以更适合 a `long double`，在某些系统上是 80 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T09:44:34.240

我可能很密集，但在我看来，去`double`s 和 gamma 函数在这里是多余的。

> 是否有任何解决方法不需要使用库来支持任意大的数字？

当然有。你总是清楚地知道你在处理什么——整数范围的乘积。整数范围是有限整数列表的特例。我不知道在 C 中表示列表的惯用方式是什么，所以我将坚持使用 C-ish 伪代码：

```
make_list(from, to)
    return a list containing from, from+1, ..., to

concatenate_lists(list1, list2)
    return a list with all the elements from list1 and list2

calculate_list_product(list)
    return list[0] * list[1] * ... * list[last]

calculate_list_quotient(numerator_list, denominator_list)
    /* 
    be a bit clever here: form the product of the elements of numerator_list, but
    any time the running product is divisible by an element of denominator_list,
    divide the running product by that element and remove it from consideration
    */

n_P_r(n, r)
   /* nPr is n! / (n-r)! 
      which simplifies to n * n-1 * ... * r+1
       so we can just: */
   return calculate_list_product(make_list(r+1, n)) 

n_C_r(n, r)
   /* nCr is n! / (r! (n-r)!) */
    return calculate_list_quotient(
        make_list(1, n), 
        concatenate_lists(make_list(1, r), make_list(1, n-r))
    ) 
```

请注意，我们从不实际计算阶乘！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T13:55:33.577

你看起来是在正确的轨道上，所以你去：

```
#include <math.h>
#include <stdio.h>

int nCr(int n, int r) {
   if(r>n) {
      printf("FATAL ERROR"); return 0;
     }       
   if(n==0 || r==0 || n==r) {
      return 1;
   } else {
      return (int)lround( ((double)n/(double)(n-r)/(double)r) * exp(lgamma(n) - lgamma(n-r) - lgamma(r)));
   }
}

int nPr(int n, int r) {
   if(r>n) {printf("FATAL ERROR"; return 0;}
   if(n==0 || r==0) {
      return 1;
   } else {
      if (n==r) {
         r = n - 1;
      }
      return (int)lround( ((double)n/(double)(n-r)) * exp(lgamma(n) - lgamma(n-r)));
   }
} 
```

要编译，请执行以下操作：`gcc -lm myFile.c && ./a.out`

请注意，结果的准确性受到`double`数据类型的位深度的限制。你应该能够得到很好的结果，但要注意：用 s 替换`int`上面的所有 s`long long unsigned`不一定能保证较大值的准确结果`n,r`。在某些时候，您仍然需要一些数学库来处理任意大的值，但这应该可以帮助您避免对于较小的输入值。

# java - 在 mac 上导入包

> ID：11016070
> 
> 赞同：1
> 
> 时间：2012-06-13T13:38:10.517
> 
> 标签：java, macos, package

嘿家伙有这个非常简单的问题，但似乎无法弄清楚必须导入这个包，`it`但我不知道将实际文件夹放在 mac 上的哪个位置，不断给出错误`package does not exist`，这是一个非常愚蠢的问题，但确实有不知道该怎么做

这是代码（java）：

```
import it.*;
import java.awt.*;

public class pyramidColour
{           
  public static void main (String[] args)
  {
     int col1 = (int)(Math.random()*255+1);
     int col2 = (int)(Math.random()*255+1);
     int col3 = (int)(Math.random()*255+1);

     Color newCol = new Color (col1, col2, col3);

     Gogga bug= new Gogga();//creating the gogga
     Gogga(1,8);

     for (int i = 1; i <= 4; i ++)//loop for going up 
     {
        bug.move();
        bug.turnRight();
        bug.move();
        bug.turnLeft();
     }

     bug.setDirection(bug.DOWN);

     for (int i = 1; i <= 3; i ++)//loop for going down
     {         
        bug.move();
        bug.turnLeft();
        bug.move();
        bug.turnRight();         
     }

     bug.move();
     bug.turnRight();

     for (int i = 1; i <= 7; i ++)//loop for base of pyramid
     {
        bug.move();
     }         
  }
} 
```

该项目的下一部分是将循环放入一个方法中，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:45:54.940

您必须在 java 命令中包含包的类路径：

```
java -cp .;<path to the it classes> pyramidColour 
```

`.`before`;`代表当前目录，其中存储了 pyramidColour 类。

编辑：在 Mac 上，分隔符不是`;`但是`:`（感谢 Jesper）

如果您使用的是 IDE（Eclipse、Netbeans），您只需在项目属性中添加库即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T08:28:28.580

这是关于 jGrasp 的一个工作示例

```
import java.awt.*;
import it.*;
public class DiscoSquares
{
    public static void main(String[] args)
    {
        int red, green, blue;
        Color col = new Color(255, 0, 0);
      Gogga.setGridSize(17, 17);
        Gogga bug = new Gogga();
      bug.setTrailWidth(150);
        for (int dir = 1; dir <=4; dir++)
        {
            bug.setDirection (dir);
            for(int sides=1;sides<=4;sides++)
            {
                for(int length=1;length<=5;length++)
                {
                    bug.move();
                }
                bug.turnLeft();
            }
            if(dir==4)
                dir = 0;
         red = (int)(Math.random()*255+1);
            green = (int)(Math.random()*255+1);
            blue = (int)(Math.random()*255+1);
            col = new Color(red, green, blue);
            bug.setColor(col);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:51:17.517

包就像文件夹，因此您必须将这些包放在与导入它的代码相同的父文件夹中。所以它应该像

```
<it> folder
    programs
<another package> folder
    pyramidColor 
```

这篇[文章](http://suite101.com/article/how-to-create-a-java-package-a91474)应该可以帮助你。

# gwt - 在需要之前下载资源

> ID：11016076
> 
> 赞同：0
> 
> 时间：2012-06-13T13:38:25.007
> 
> 标签：gwt

我正在使用 GWT 开发在线多人游戏，我想通过在使用图像和声音文件之前下载它们来减少流量。我正在为图像文件使用 Image.prefetch 方法。这是正确的方法吗？

关于声音文件，我不知道如何确保在游戏开始之前下载它们。我正在使用库 gwt-voices 并且当前使用默认音量为 0 的声音控制器对所有需要的声音文件调用 play() 方法。在这两种情况下，似乎文件被提取一次然后被缓存。这很好，但我认为让它们由客户端下载并在本地访问它们可能会更好 - 如果可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:33:40.490

我不确定它是否适用于声音文件，但您可能希望使用 ClientBundle。在编译时，这将创建一个大图像，因此当您第一次请求其中一个图像时，客户端将检索整个大图像，然后您请求并获取单个图像。这减少了单独检索每个图像所需的多个请求。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

此外，您应该研究可能也有用的代码拆分。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

# iphone - 强行改变方向

> ID：11016077
> 
> 赞同：0
> 
> 时间：2012-06-13T13:38:35.397
> 
> 标签：iphone

在我的应用程序中，播放视频时，用户可以在横向和纵向方向全屏播放。但是，当从全屏移回原始位置时，如果控制器以横向运行，我想将其方向更改为纵向。

如果我推动那个控制器，它工作正常，但我必须展示它。所以它不适用于提供的控制器。

我正在使用下面的代码来制作肖像。

```
 [appdel.navigationController.presentedViewController.view removeFromSuperview];

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
[[UIApplication sharedApplication].self.delegate.window addSubview:[appdel.navigationController.presentedViewController.view];
self.navigationController.navigationBar.hidden=NO; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:52:13.810

看到当你进入前一个控制器时呈现控制器的情况下，
前一个方法的 viewWillApear: 将调用，所以在 viewWillApear: mthod 中改变你的方向

# c++ - 是否可以在 C++ 运行时动态创建函数？

> ID：11016078
> 
> 赞同：59
> 
> 时间：2012-06-13T13:38:35.833
> 
> 标签：c++, function, dynamic, runtime

C++ 是一种静态的编译语言，模板在编译时被解析等等......

但是是否有可能在运行时创建一个在源代码中没有描述并且在编译期间没有转换为机器语言的函数，以便用户可以将源代码中没有预料到的数据扔给它？

我知道这不可能以直接的方式发生，但肯定有可能，有很多编程语言没有被编译，而是动态地创建了用 C 或 C++ 实现的那种东西。

也许如果创建所有原始类型的工厂，以及将它们组织成更复杂的对象（例如用户类型和函数）的合适的数据结构，这是可以实现的吗？

欢迎提供有关该主题的任何信息以及指向在线材料的指针。谢谢！

编辑：我知道这是可能的，这更像是我对实现细节感兴趣:)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-13T13:53:46.543

**是**的，当然，没有其他答案中提到的**任何工具，而****只是使用 C++ 编译器**。

只需在您的 C++ 程序中执行这些步骤（在 linux 上，但在其他操作系统上必须类似）

1.  将 C++ 程序写入文件（例如在 /tmp/prog.cc 中），使用`ofstream`
2.  通过编译程序`system("c++ /tmp/prog.cc -o /tmp/prog.so -shared -fPIC");`
3.  动态加载程序，例如使用`dlopen()`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-13T17:36:33.247

您也可以直接将字节码提供给函数，然后将其转换为函数类型，如下所示。

例如

```
byte[3] func = { 0x90, 0x0f, 0x1 }
*reinterpret_cast<void**>(&func)() 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-13T13:44:49.330

是的，JIT 编译器一直都在这样做。他们分配一块已被操作系统赋予特殊执行权限的内存，然后用代码填充它并将指针转换为函数指针并执行它。很简单。

编辑：这是一个关于如何在 Linux 中执行此操作的示例：http: [//burnttoys.blogspot.de/2011/04/how-to-allocate-executable-memory-on.html](http://burnttoys.blogspot.de/2011/04/how-to-allocate-executable-memory-on.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-03-30T12:07:33.143

下面是一个基于前面提到的方法的 C++ 运行时编译示例（将代码写入输出文件，编译通过`system()`，加载通过`dlopen()`和`dlsym()`）。另请参阅[相关问题](https://stackoverflow.com/questions/10564670/#answer-10565120 "有没有办法在运行时用 C 或 C++ 编译附加代码？")中的示例。这里的区别在于它动态编译一个类而不是一个函数。这是通过将 C 风格的`maker()`函数添加到要动态编译的代码来实现的。参考：

*   [https://www.linuxjournal.com/article/3687](https://www.linuxjournal.com/article/3687)
*   [http://www.tldp.org/HOWTO/C++-dlopen/thesolution.html](http://www.tldp.org/HOWTO/C++-dlopen/thesolution.html)

该示例仅在 Linux 下有效（Windows 具有`LoadLibrary`和`GetProcAddress`功能），并且需要在目标机器上提供相同的编译器。

**基类.h**

```
#ifndef BASECLASS_H
#define BASECLASS_H
class A
{
protected:
    double m_input;     // or use a pointer to a larger input object
public:
    virtual double f(double x) const = 0;
    void init(double input) { m_input=input; }
    virtual ~A() {};
};
#endif /* BASECLASS_H */ 
```

**主文件**

```
#include "baseclass.h"
#include <cstdlib>      // EXIT_FAILURE, etc
#include <string>
#include <iostream>
#include <fstream>
#include <dlfcn.h>      // dynamic library loading, dlopen() etc
#include <memory>       // std::shared_ptr

// compile code, instantiate class and return pointer to base class
// https://www.linuxjournal.com/article/3687
// http://www.tldp.org/HOWTO/C++-dlopen/thesolution.html
// https://stackoverflow.com/questions/11016078/
// https://stackoverflow.com/questions/10564670/
std::shared_ptr<A> compile(const std::string& code)
{
    // temporary cpp/library output files
    std::string outpath="/tmp";
    std::string headerfile="baseclass.h";
    std::string cppfile=outpath+"/runtimecode.cpp";
    std::string libfile=outpath+"/runtimecode.so";
    std::string logfile=outpath+"/runtimecode.log";
    std::ofstream out(cppfile.c_str(), std::ofstream::out);

    // copy required header file to outpath
    std::string cp_cmd="cp " + headerfile + " " + outpath;
    system(cp_cmd.c_str());

    // add necessary header to the code
    std::string newcode =   "#include \"" + headerfile + "\"\n\n"
                            + code + "\n\n"
                            "extern \"C\" {\n"
                            "A* maker()\n"
                            "{\n"
                            "    return (A*) new B(); \n"
                            "}\n"
                            "} // extern C\n";

    // output code to file
    if(out.bad()) {
        std::cout << "cannot open " << cppfile << std::endl;
        exit(EXIT_FAILURE);
    }
    out << newcode;
    out.flush();
    out.close();

    // compile the code
    std::string cmd = "g++ -Wall -Wextra " + cppfile + " -o " + libfile
                      + " -O2 -shared -fPIC &> " + logfile;
    int ret = system(cmd.c_str());
    if(WEXITSTATUS(ret) != EXIT_SUCCESS) {
        std::cout << "compilation failed, see " << logfile << std::endl;
        exit(EXIT_FAILURE);
    }

    // load dynamic library
    void* dynlib = dlopen (libfile.c_str(), RTLD_LAZY);
    if(!dynlib) {
        std::cerr << "error loading library:\n" << dlerror() << std::endl;
        exit(EXIT_FAILURE);
    }

    // loading symbol from library and assign to pointer
    // (to be cast to function pointer later)
    void* create = dlsym(dynlib, "maker");
    const char* dlsym_error=dlerror();
    if(dlsym_error != NULL)  {
        std::cerr << "error loading symbol:\n" << dlsym_error << std::endl;
        exit(EXIT_FAILURE);
    }

    // execute "create" function
    // (casting to function pointer first)
    // https://stackoverflow.com/questions/8245880/
    A* a = reinterpret_cast<A*(*)()> (create)();

    // cannot close dynamic lib here, because all functions of the class
    // object will still refer to the library code
    // dlclose(dynlib);

    return std::shared_ptr<A>(a);
}

int main(int argc, char** argv)
{
    double input=2.0;
    double x=5.1;
    // code to be compiled at run-time
    // class needs to be called B and derived from A
    std::string code =  "class B : public A {\n"
                        "    double f(double x) const \n"
                        "    {\n"
                        "        return m_input*x;\n"
                        "    }\n"
                        "};";

    std::cout << "compiling.." << std::endl;
    std::shared_ptr<A> a = compile(code);
    a->init(input);
    std::cout << "f(" << x << ") = " << a->f(x) << std::endl;

    return EXIT_SUCCESS;
} 
```

**输出**

```
$ g++ -Wall -std=c++11 -O2 -c main.cpp -o main.o   # c++11 required for std::shared_ptr
$ g++ -ldl main.o -o main
$ ./main
compiling..
f(5.1) = 10.2 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-13T13:51:06.950

除了简单地使用嵌入式脚本语言（[Lua](http://www.lua.org/)非常适合嵌入）或编写自己的 C++ 编译器以在运行时使用之外，如果你真的想使用 C++，你可以只使用现有的编译器。

例如，[Clang](http://clang.llvm.org/)是一个 C++ 编译器，它构建为可以轻松嵌入到另一个程序中的库。它旨在用于需要以各种方式分析和操作 C++ 源代码的 IDE 等程序，但使用[LLVM](http://llvm.org/)编译器基础设施作为后端，它还能够在运行时生成代码并为您提供函数指针，您可以调用运行生成的代码。

*   [铛](http://clang.llvm.org/)
*   [LLVM](http://llvm.org/)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-22T22:28:18.793

看看[libtcc](http://download.savannah.gnu.org/releases/tinycc/)；它简单、快速、可靠并且适合您的需要。每当我需要“即时”编译 C 函数时，我都会使用它。

在存档中，您会找到文件**examples/libtcc_test.c**，它可以为您提供良好的开端。这个小教程也可能对您有所帮助：http: [//blog.mister-muffin.de/2011/10/22/discovering-tcc/](http://blog.mister-muffin.de/2011/10/22/discovering-tcc/)

```
#include <stdlib.h>
#include <stdio.h>
#include "libtcc.h"

int add(int a, int b) { return a + b; }

char my_program[] =
"int fib(int n) {\n"
"    if (n <= 2) return 1;\n"
"    else return fib(n-1) + fib(n-2);\n"
"}\n"
"int foobar(int n) {\n"
"    printf(\"fib(%d) = %d\\n\", n, fib(n));\n"
"    printf(\"add(%d, %d) = %d\\n\", n, 2 * n, add(n, 2 * n));\n"
"    return 1337;\n"
"}\n";

int main(int argc, char **argv)
{
    TCCState *s;
    int (*foobar_func)(int);
    void *mem;

    s = tcc_new();
    tcc_set_output_type(s, TCC_OUTPUT_MEMORY);
    tcc_compile_string(s, my_program);
    tcc_add_symbol(s, "add", add);

    mem = malloc(tcc_relocate(s, NULL));
    tcc_relocate(s, mem);

    foobar_func = tcc_get_symbol(s, "foobar");

    tcc_delete(s);

    printf("foobar returned: %d\n", foobar_func(32));

    free(mem);
    return 0;
} 
```

如果您在使用库时遇到任何问题，请在评论中提问！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-13T13:44:29.267

本质上，您需要在程序中编写 C++ 编译器（这不是一项简单的任务），并执行与 JIT 编译器相同的操作来运行代码。你实际上已经完成了这一段的 90%：

> 我知道这不可能以直接的方式发生，但肯定有可能，有很多编程语言没有被编译，而是动态地创建了用 C 或 C++ 实现的那种东西。

正是——这些程序带有解释器。你通过说 --python 是编译的 C 代码来运行一个 python 程序，`python MyProgram.py`它能够即时解释和运行你的程序。您需要按照这些方式做一些事情，但要使用 C++ 编译器。

如果您非常需要动态函数*，*请使用不同的语言:)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-13T13:46:00.263

一种典型的方法是将 C++（或任何它所写的）项目与脚本语言结合起来。
[Lua](http://www.lua.org/)是最受欢迎的应用程序之一，因为它有据可查、体积小，并且绑定了许多语言。

但是，如果您不朝那个方向研究，也许您可​​以考虑使用动态库？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-13T13:41:11.020

是的——你可以用 C++ 为 C++ 编写一个编译器，带有一些额外的特性——编写你自己的函数，自动编译和运行（或不自动）......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-13T14:44:25.300

看看`ExpressionTrees`.NET - 我认为这基本上是你想要实现的。创建一个子表达式树，然后评估它们。在面向对象的方式中，每个节点可能知道如何通过递归到其子节点来评估自己。然后，您的视觉语言将创建此树，您可以编写一个简单的解释器来执行它。

另外，请查看[Ptolemy II](http://ptolemy.berkeley.edu/ptolemyII/)，作为 Java 中的示例，了解如何编写这种可视化编程语言。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-13T10:01:55.440

您可以查看[Runtime Compiled C++](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus)（或查看[RCC++ 博客和视频](http://runtimecompiledcplusplus.blogspot.com/)），或者尝试其中的[一种替代方案](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/wiki/Alternatives)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-02-27T13:55:24.500

使用操作码扩展[Jay 的答案](https://stackoverflow.com/a/11020335/15295924)，以下适用于 Linux。

1.  从编译器中学习操作码：
    *   自己写`myfunc.cpp`，例如

        ```
        double f(double x) { return x*x; } 
        ```

    *   编译

        ```
        $ g++ -O2 -c myfunc.cpp 
        ```

    *   反汇编函数`f`

        ```
        $ gdb -batch -ex "file ./myfunc.o" -ex "set disassembly-flavor intel" -ex "disassemble/rs f"
        Dump of assembler code for function _Z1fd:
           0x0000000000000000 <+0>:     f2 0f 59 c0     mulsd  xmm0,xmm0
           0x0000000000000004 <+4>:     c3      ret    
        End of assembler dump. 
        ```

        这意味着`x*x`汇编中的函数是`mulsd xmm0,xmm0`，`ret`并且是机器码`f2 0f 59 c0 c3`。
2.  用机器码编写自己的函数：
    *   `opcode.cpp`

        ```
        #include <cstdlib>          // EXIT_FAILURE etc
        #include <cstdio>           // printf(), fopen() etc
        #include <cstring>          // memcpy()
        #include <sys/mman.h>       // mmap()

        // allocate memory and fill it with machine code instructions
        // returns pointer to memory location and length in bytes
        void* gencode(size_t& length)
        {
            // machine code
            unsigned char opcode[] = {
                0xf2, 0x0f, 0x59, 0xc0,         // mulsd  xmm0,xmm0
                0xc3                            // ret
            };
            // allocate memory which allows code execution
            // https://en.wikipedia.org/wiki/NX_bit
            void* buf = mmap(NULL,sizeof(opcode),PROT_READ|PROT_WRITE|PROT_EXEC,
                             MAP_PRIVATE|MAP_ANON,-1,0);
            // copy machine code to executable memory location
            memcpy(buf, opcode, sizeof(opcode));
            // return: pointer to memory location with executable code
            length = sizeof(opcode);
            return buf;
        }

        // print the disassemby of buf
        void print_asm(const void* buf, size_t length)
        {
            FILE* fp = fopen("/tmp/opcode.bin", "w");
            if(fp!=NULL) {
                fwrite(buf, length, 1, fp);
                fclose(fp);
            }
            system("objdump -D -M intel -b binary -mi386 /tmp/opcode.bin");
        }

        int main(int, char**)
        {
            // generate machine code and point myfunc() to it
            size_t length;
            void* code=gencode(length);
            double (*myfunc)(double);   // function pointer
            myfunc = reinterpret_cast<double(*)(double)>(code);

            double x=1.5;
            printf("f(%f)=%f\n", x,myfunc(x));
            print_asm(code,length);     // for debugging
            return EXIT_SUCCESS;
        } 
        ```

    *   编译运行

        ```
        $ g++ -O2 opcode.cpp -o opcode
        $ ./opcode
        f(1.500000)=2.250000

        /tmp/opcode.bin:     file format binary

        Disassembly of section .data:

        00000000 <.data>:
           0:   f2 0f 59 c0             mulsd  xmm0,xmm0
           4:   c3                      ret 
        ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-13T13:42:32.853

如果您不追求性能，最简单的可用解决方案是嵌入脚本语言解释器，例如[Lua](http://heavycoder.com/tutorials/lua_embed.php)或[Python](http://docs.python.org/extending/)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-02T08:47:15.940

它像这样对我有用。您必须使用 -fpermissive 标志。我正在使用 CodeBlocks 17.12。

```
#include <cstddef>

using namespace std;
int main()
{
    char func[] = {'\x90', '\x0f', '\x1'};
    void (*func2)() = reinterpret_cast<void*>(&func);
    func2();
    return 0;
} 
```

# asp.net-mvc - IIS 应用程序池回收后 ASP.NET MVC 应用程序失败

> ID：11016087
> 
> 赞同：0
> 
> 时间：2012-06-13T13:38:59.327
> 
> 标签：asp.net-mvc, iis, application-pool

部署到托管环境（Windows server 2008 R2、IIS7）后的 ASP.NET MVC 应用程序按预期工作 - 直到 IIS 应用程序池被回收。IIS 管理员已将应用程序池配置为定期回收。

应用程序池回收后，应用程序返回以下错误。

“Icontrollerfactory 没有返回名称的控制器”

路由在 Global.asax 中的应用程序启动事件中初始化。

完整的例外是**"The IControllerFactory "Controllers.ControllerFactory" 没有返回名称为 "ProductStatus" 的控制器**。

堆栈跟踪说

```
at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) 
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.I‌​ExecutionStep.Execute() 
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

# r - 摘要方法的结果似乎对向量不准确

> ID：11016089
> 
> 赞同：10
> 
> 时间：2012-06-13T13:39:00.140
> 
> 标签：r

这让我很困惑。当您在整数向量上运行 summary() 时，您似乎无法获得准确的结果。数字似乎四舍五入。我在具有不同操作系统的三台不同机器上进行了尝试，结果是相同的。

对于向量：

```
>a <- 0:628846
>str(a)
 int [1:628847] 0 1 2 3 4 5 6 7 8 9 ...
>summary(a)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0  157200  314400  314400  471600  628800 
>max(a)
[1] 628846 
```

对于data.frame：

```
> b <- data.frame(b = 0:628846)
> str(b)
'data.frame':   628847 obs. of  1 variable:
 $ b: int  0 1 2 3 4 5 6 7 8 9 ...
> summary(b)
       b         
 Min.   :     0  
 1st Qu.:157212  
 Median :314423  
 Mean   :314423  
 3rd Qu.:471635  
 Max.   :628846  
> summary(b$b)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0  157200  314400  314400  471600  628800 
```

为什么这些结果不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:56:26.210

对象`a`是类`integer`，`b`是类`data.frame`。A`data frame`是`list`具有某些属性和类`data.frame`（[http://cran.r-project.org/doc/manuals/R-intro.html#Data-frames](http://cran.r-project.org/doc/manuals/R-intro.html#Data-frames)）的。许多函数，包括`summary`，以不同的方式处理不同类的对象（请参阅您可以`summary`在类对象上使用`lm`它并为您提供完全不同的东西）。如果您想将该功能`summary`应用于 中的每个组件`b`，您可以使用`lapply`：

```
> a <- 0:628846
> b <- data.frame(b = 0:628846)
> class(a)
[1] "integer"
> class(b)
[1] "data.frame"
> names(b)
[1] "b"
> length(b)
[1] 1
> summary(b[[1]]) # b[[1]] gives the first component of the list b
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0  157200  314400  314400  471600  628800 
> class(b$b)
[1] "integer"
> summary(b$b)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0  157200  314400  314400  471600  628800 
> lapply(b,summary)
$b
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0  157200  314400  314400  471600  628800 
> 
> # example of summary on a linear model
> x <- rnorm(100)
> y <- x + rnorm(100)
> my.lm <- lm(y~x)
> class(my.lm)
[1] "lm"
> summary(my.lm)

Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.6847 -0.5460  0.1175  0.6610  2.2976 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  0.04122    0.09736   0.423    0.673    
x            1.14790    0.09514  12.066   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.9735 on 98 degrees of freedom
Multiple R-squared: 0.5977, Adjusted R-squared: 0.5936 
F-statistic: 145.6 on 1 and 98 DF,  p-value: < 2.2e-16 
```

# gsm - 以手机频率与我的手机与笔记本电脑通信？

> ID：11016090
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:39:01.073
> 
> 标签：gsm, 3g

没有电缆进行的每一次交流，每个人都可以听，但不是每个人都能理解。所以，当我用我的手机打电话给某人，或者给我的手机发送短信时，我希望我的电脑知道这一点（我知道两者的频率相同）。或者一些网站或材料从它开始。我有一个机器人。

就像和运营商沟通一样，只是我的手机和我的电脑，而不是我的手机和运营商

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:08:05.723

请看一下[OpenBTS](http://wush.net/trac/rangepublic)。它是 BTS（基站收发器）的（实验性）开源实现，是处理无线电通信的网络节点。类似[的 OpenBSC](http://openbsc.osmocom.org/trac/wiki/OpenBSC)。

你想做的事是巨大的。您将需要特殊的硬件。

# java - 如何在运行时从文件夹或 JAR 加载类？

> ID：11016092
> 
> 赞同：73
> 
> 时间：2012-06-13T13:39:04.357
> 
> 标签：java, class, reflection, jar, load

我正在尝试制作一个 Java 工具来扫描 Java 应用程序的结构并提供一些有意义的信息。为此，我需要能够从项目位置（JAR/WAR 或只是一个文件夹）扫描所有 .class 文件，并使用反射来了解它们的方法。事实证明这几乎是不可能的。

我可以找到很多基于 URLClassloader 的解决方案，这些解决方案允许我从目录/存档加载特定的类，但是没有一个允许我在没有任何关于类名或包结构的信息的情况下加载类。

编辑：我认为我的措辞很糟糕。我的问题不是我无法获得所有的类文件，我可以通过递归等来做到这一点并正确定位它们。我的问题是为每个类文件获取一个类对象。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-13T13:54:13.350

以下代码从 JAR 文件加载所有类。它不需要知道任何关于类的信息。类的名称是从 JarEntry 中提取的。

```
JarFile jarFile = new JarFile(pathToJar);
Enumeration<JarEntry> e = jarFile.entries();

URL[] urls = { new URL("jar:file:" + pathToJar+"!/") };
URLClassLoader cl = URLClassLoader.newInstance(urls);

while (e.hasMoreElements()) {
    JarEntry je = e.nextElement();
    if(je.isDirectory() || !je.getName().endsWith(".class")){
        continue;
    }
    // -6 because of .class
    String className = je.getName().substring(0,je.getName().length()-6);
    className = className.replace('/', '.');
    Class c = cl.loadClass(className);

} 
```

编辑：

正如上面评论中所建议的，javassist 也是一种可能性。在上面代码的 while 循环之前的某个地方初始化一个 ClassPool，而不是使用类加载器加载类，您可以创建一个 CtClass 对象：

```
ClassPool cp = ClassPool.getDefault();
...
CtClass ctClass = cp.get(className); 
```

从 ctClass 中，您可以获取所有方法、字段、嵌套类...。看看 javassist api： [https ://jboss-javassist.github.io/javassist/html/index.html](https://jboss-javassist.github.io/javassist/html/index.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-13T14:03:30.180

列出 jar 文件中的所有类。

```
public static List getClasseNames(String jarName) {
    ArrayList classes = new ArrayList();

    if (debug)
        System.out.println("Jar " + jarName );
    try {
        JarInputStream jarFile = new JarInputStream(new FileInputStream(
                jarName));
        JarEntry jarEntry;

        while (true) {
            jarEntry = jarFile.getNextJarEntry();
            if (jarEntry == null) {
                break;
            }
            if (jarEntry.getName().endsWith(".class")) {
                if (debug)
                    System.out.println("Found "
                            + jarEntry.getName().replaceAll("/", "\\."));
                classes.add(jarEntry.getName().replaceAll("/", "\\."));
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return classes;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T13:54:18.860

> 为此，我需要能够从项目位置（JAR/WAR 或只是一个文件夹）扫描所有 .class 文件

扫描文件夹中的所有文件很简单。一种选择是调用表示文件夹的 ，然后迭代生成的数组`File.listFiles()`。`File`要遍历嵌套文件夹的树，请使用递归。

可以使用 API 扫描 JAR 文件的文件`JarFile`……而且您无需递归遍历嵌套的“文件夹”。

这些都不是特别复杂。只需阅读 javadoc 并开始编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-18T22:21:53.103

带着类似的要求来到这里：

> 在某个包中有一些正在开发的服务类，它们实现了一个公共接口，并希望在运行时检测它们。

部分问题是在特定包中查找类，其中应用程序可能从 jar 文件或从包/文件夹结构中的解包类加载。

所以我把来自 amicnh 和[anonymous](http://www.java2s.com/example/java/reflection/recursive-method-used-to-find-all-classes-in-a-given-directory-and-sub.html)的解决方案放在一起。

```
// Retrieve classes of a package and it's nested package from file based class repository

package esc;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.jar.JarEntry;
import java.util.jar.JarInputStream;

public class GetClasses
{
    private static boolean debug = false;

    /**
     * test function with assumed package esc.util
     */
    public static void main(String... args)
    {
        try
        {
            final Class<?>[] list = getClasses("esc.util");
            for (final Class<?> c : list)
            {
                System.out.println(c.getName());
            }
        }
        catch (final IOException e)
        {
            e.printStackTrace();
        }
    }

    /**
     * Scans all classes accessible from the context class loader which belong to the given package and subpackages.
     *
     * @precondition Thread Class loader attracts class and jar files, exclusively
     * @precondition Classes with static code sections are executed, when loaded and thus must not throw exceptions
     *
     * @param packageName
     *            [in] The base package path, dot-separated
     *
     * @return The classes of package /packageName/ and nested packages
     *
     * @throws IOException,
     *             ClassNotFoundException not applicable
     *
     * @author Sam Ginrich, http://www.java2s.com/example/java/reflection/recursive-method-used-to-find-all-classes-in-a-given-directory-and-sub.html
     *
     */
    public static Class<?>[] getClasses(String packageName) throws IOException
    {
        final ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        assert classLoader != null;
        if (debug)
        {
            System.out.println("Class Loader class is " + classLoader.getClass().getName());
        }
        final String packagePath = packageName.replace('.', '/');
        final Enumeration<URL> resources = classLoader.getResources(packagePath);
        final List<Class<?>> classes = new ArrayList<Class<?>>();
        while (resources.hasMoreElements())
        {
            final URL resource = resources.nextElement();
            final String proto = resource.getProtocol();
            if ("file".equals(proto))
            {
                classes.addAll(findFileClasses(new File(resource.getFile()), packageName));
            }
            else if ("jar".equals(proto))
            {
                classes.addAll(findJarClasses(resource));
            }
            else
            {
                System.err.println("Protocol " + proto + " not supported");
                continue;
            }
        }
        return classes.toArray(new Class[classes.size()]);
    }

    /**
     * Linear search for classes of a package from a jar file
     *
     * @param packageResource
     *            [in] Jar URL of the base package, i.e. file URL bested in jar URL
     *
     * @return The classes of package /packageResource/ and nested packages
     *
     * @throws -
     *
     * @author amicngh, Sam Ginrich@stackoverflow.com
     */
    private static List<Class<?>> findJarClasses(URL packageResource)
    {
        final List<Class<?>> classes = new ArrayList<Class<?>>();
        try
        {
            System.out.println("Jar URL Path is " + packageResource.getPath());
            final URL fileUrl = new URL(packageResource.getPath());
            final String proto = fileUrl.getProtocol();
            if ("file".equals(proto))
            {
                final String filePath = fileUrl.getPath().substring(1); // skip leading /
                final int jarTagPos = filePath.indexOf(".jar!/");
                if (jarTagPos < 0)
                {
                    System.err.println("Non-conformant jar file reference " + filePath + " !");
                }
                else
                {
                    final String packagePath = filePath.substring(jarTagPos + 6);
                    final String jarFilename = filePath.substring(0, jarTagPos + 4);
                    if (debug)
                    {
                        System.out.println("Package " + packagePath);
                        System.out.println("Jar file " + jarFilename);
                    }
                    final String packagePrefix = packagePath + '/';
                    try
                    {
                        final JarInputStream jarFile = new JarInputStream(
                                new FileInputStream(jarFilename));
                        JarEntry jarEntry;

                        while (true)
                        {
                            jarEntry = jarFile.getNextJarEntry();
                            if (jarEntry == null)
                            {
                                break;
                            }
                            final String classPath = jarEntry.getName();
                            if (classPath.startsWith(packagePrefix) && classPath.endsWith(".class"))
                            {
                                final String className = classPath
                                        .substring(0, classPath.length() - 6).replace('/', '.');

                                if (debug)
                                {
                                    System.out.println("Found entry " + jarEntry.getName());
                                }
                                try
                                {
                                    classes.add(Class.forName(className));
                                }
                                catch (final ClassNotFoundException x)
                                {
                                    System.err.println("Cannot load class " + className);
                                }
                            }
                        }
                        jarFile.close();
                    }
                    catch (final Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
            else
            {
                System.err.println("Nested protocol " + proto + " not supprted!");
            }
        }
        catch (final MalformedURLException e)
        {
            e.printStackTrace();
        }
        return classes;
    }

    /**
     * Recursive method used to find all classes in a given directory and subdirs.
     *
     * @param directory
     *            The base directory
     * @param packageName
     *            The package name for classes found inside the base directory
     * @return The classes
     * @author http://www.java2s.com/example/java/reflection/recursive-method-used-to-find-all-classes-in-a-given-directory-and-sub.html
     * @throws -
     *
     */
    private static List<Class<?>> findFileClasses(File directory, String packageName)
    {
        final List<Class<?>> classes = new ArrayList<Class<?>>();
        if (!directory.exists())
        {
            System.err.println("Directory " + directory.getAbsolutePath() + " does not exist.");
            return classes;
        }
        final File[] files = directory.listFiles();
        if (debug)
        {
            System.out.println("Directory "
                    + directory.getAbsolutePath()
                    + " has "
                    + files.length
                    + " elements.");
        }
        for (final File file : files)
        {
            if (file.isDirectory())
            {
                assert !file.getName().contains(".");
                classes.addAll(findFileClasses(file, packageName + "." + file.getName()));
            }
            else if (file.getName().endsWith(".class"))
            {
                final String className = packageName
                        + '.'
                        + file.getName().substring(0, file.getName().length() - 6);
                try
                {
                    classes.add(Class.forName(className));
                }
                catch (final ClassNotFoundException cnf)
                {
                    System.err.println("Cannot load class " + className);
                }
            }
        }
        return classes;
    }
} 
```

# batch-file - 批量处理输入文件

> ID：11016094
> 
> 赞同：1
> 
> 时间：2012-06-13T13:39:05.567
> 
> 标签：batch-file

我想编写一个批处理文件来读取输入文本文件，从中提取信息并将其放入输出文件中。

1.  输入文件中的每一行都有不同的信息，所以我希望批处理循环遍历每一行。
2.  我想从输入文件中提取某些信息并丢弃其余信息。
3.  输入文件可以有任意数量的行。
4.  如果输入行没有有用的信息，我想留下一条错误消息。
5.  我需要两个计数器，第一个告诉输入文件中的行数，第二个告诉输出文件中的行数（不计算空行）。
6.  我希望批处理将特殊字符视为普通字母。

例如：

```
FILE_NAME=apple FILE_SIZE=312     C=fwef sdf asdetg

FILE_SIZE=7867 C=ehtrghr  FILE_NAME=sea&ocean G=tryr    yujg
C=gert FILE_NAME=chair=12 tgrgd sfsf FILE_SIZE=66
dfgg ertergf C=ert A=344

fgdfg FILE_NAME=cat 
```

我只想提取`FILE_NAME=XXX`and`FILE_SIZE=XXX`部分，丢弃该行中的所有其他内容。输出应该是：

```
-name apple -size 312
-name sea&ocean -size 7867
-name chair=12 -size 66
ERROR!!!
-name cat

 input_count=5 and output_count=4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:41:55.237

人们对批处理脚本没有给予足够的信任。试试这个：

```
@echo off
setlocal enableDelayedExpansion
set INPUT_FILE=input.txt
set OUTPUT_FILE=output.txt
set INPUT_COUNT=0
set OUTPUT_COUNT=0

:: Read the input file
for /f "tokens=*" %%s in (%INPUT_FILE%) do call :ParseLine "%%s"
echo. >>%OUTPUT_FILE%
echo input_count=!INPUT_COUNT! and output_count=!OUTPUT_COUNT! >>%OUTPUT_FILE%
exit /b

:: Parse one line and write to output
:ParseLine
set "str=%~1"
set ^"str=!str: =^

!"
set file_name=
set file_size=
for /f "eol=  tokens=1,2 delims==" %%a in ("!str!") do (
    set "tag=%%a"
    set "value=%%b"
    if "!tag!" equ "FILE_NAME" set "file_name=-name !value!"
    if "!tag!" equ "FILE_SIZE" set "file_size=-size !value!"
)
set /a input_count+=1
if "!file_name!" equ "" if "!file_size!" equ "" (
    echo ERROR^^!^^!^^! >>%OUTPUT_FILE%
    goto Done
)
echo.!file_name! !file_size! >>%OUTPUT_FILE%
set /a output_count+=1
:Done 
```

以下是有关此功能的一些说明：

1.  第一个`for`循环逐行读取文件，每行的内容作为输入参数发送到`ParseLine`子例程。
2.  该`ParseLine`子例程接收每一行`str`并遍历其以空格分隔的单词（使用[此处](https://stackoverflow.com/a/8494490/1336150)描述的 jeb 的高级方法）。
    子例程循环的逻辑非常简单：它将每个单词分成`tag`（前面的文本`=`）和`value`（后面的文本`=`），并相应地设置`file_name`和`file_size`。

我相信这种方法几乎可以处理任何输入文件，无论有无特殊字符。

# azure - Azure 网站中的文件夹权限

> ID：11016098
> 
> 赞同：6
> 
> 时间：2012-06-13T13:39:19.427
> 
> 标签：azure, azure-web-app-service

刚刚了解新的 Azure 网站功能并遇到了我的第一个障碍。我正在部署一个将缓存数据写入文件系统的 PHP 站点，但该应用程序抛出错误，因为它要写入的文件夹没有写入权限。是否可以对文件夹设置权限，或者这是禁止的？

我可能可以解决这个问题，但想知道它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T20:25:50.937

无法设置/自定义文件夹权限。这意味着您的应用程序写入的任何位置都应该在您的站点根目录下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T00:41:16.727

您的站点只能写入 C:\DWASFiles\Sites\[siteName]\VirtualDirectory0 下的位置和 %TEMP% 文件夹。

这里有两个警告：

1.  东西不能直接写在 VirtualDirectory0 下，你必须在那里创建一个子文件夹并将你的文件放在那个子文件夹中
2.  %TEMP% 文件夹真的是临时的！如果您的站点实例因任何原因出现故障并在其他地方重新启动，则 %TEMP% 文件夹中的所有内容都将消失。仅将它用于真正临时的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:12:02.883

应用程序尝试写入的文件夹是否位于站点文件夹下？

据我了解，文件夹权限无法设置/更改。但我还没有看到任何来自微软的明确表示“是”或“否”的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T21:47:24.157

应该可以使用[webdeploy](https://web.archive.org/web/20140816181832/http://blogs.msdn.com/b/azureappgallery/archive/2013/04/03/set-file-folder-permissions-for-your-content-on-azure-website-using-web-deployable-package.aspx)。

但是，我认为没有手动设置 webdeploy 包的方法 - 如帖子[http://blogs.msdn.com/b/azureappgallery/archive/2013/04/03/set-file中所述-folder-permissions-for-your-content-on-azure-website-using-web-deployable-package.aspx](https://web.archive.org/web/20140816181832/http://blogs.msdn.com/b/azureappgallery/archive/2013/04/03/set-file-folder-permissions-for-your-content-on-azure-website-using-web-deployable-package.aspx)。

# sql - SQL 命令中的组子句

> ID：11016099
> 
> 赞同：1
> 
> 时间：2012-06-13T13:39:23.313
> 
> 标签：sql, group-by

我有 3 个表：Deliveries、IssuedWarehouse、ReturnedStock。

```
Deliveries: ID, OrderNumber, Material, Width, Gauge, DelKG
IssuedWarehouse: OrderNumber, IssuedKG
ReturnedStock: OrderNumber, IssuedKG 
```

我想做的是按材料、宽度和规格对所有订单进行分组，然后将交付的数量相加，发给仓库并发回库存。

这是非常接近的 SQL：

```
SELECT 
    DELIVERIES.Material, 
    DELIVERIES.Width, 
    DELIVERIES.Gauge, 
    Count(DELIVERIES.OrderNo) AS [Orders Placed],
    Sum(DELIVERIES.DeldQtyKilos) AS [KG Delivered], 
    Sum(IssuedWarehouse.[Qty Issued]) AS [Film Issued], 
    Sum([Film Retns].[Qty Issued]) AS [Film Returned],
    [KG Delivered]-[Film Issued]+[Film Returned] AS [Qty Remaining]

FROM (DELIVERIES 
INNER JOIN IssuedWarehouse
    ON DELIVERIES.OrderNo = IssuedWarehouse.[Order No From]) 
INNER JOIN [Film Retns] 
    ON DELIVERIES.OrderNo = [Film Retns].[Order No From]
GROUP BY Material, Width, Gauge, ActDelDate
HAVING ActDelDate Between [start date] And [end date]
ORDER BY DELIVERIES.Material; 
```

这几乎完美地组合了产品。但是，如果您查看结果：

```
Material    Width   Gauge   Orders Placed   Delivered Qnty Kilos    Film Issued Film Returned   Qty Remaining
COEX-GLOSS  590     75      1               534                     500         124             158
COEX-MATT   1080    80      1               4226                    4226        52              52
CPP         660     38      8               6720                    2768        1384            5336
CPP         666     47      1               5677                    5716        536             497
CPP         690     65      2               1232                    717         202             717
CPP         760     38      3               3444                    1318        510             2636
CPP         770     38      4               4316                    3318        2592            3590
CPP         786     38      2               672                     442         212             442
CPP         800     47      1               1122                    1122        116             116
CPP         810     47      1               1127                    1134        69              62
CPP         810     47      2               2250                    1285        320             1285
CPP         1460    38      12              6540                    4704        2442            4278
LD          975     75      1               502                     502         182             182
LDPE        450     50      1               252                     252         50              50
LDPE        520     70      1               250                     250         95              95
LDPE        570     65      2               504                     295         86              295
LDPE        570     65      2               508                     278         48              278
LDPE        620     50      1               252                     252         67              67
LDPE        660     50      1               256                     256         62              62
LDPE        670     75      1               248                     248         80              80
LDPE        690     47      1               476                     476         390             390
LDPE        790     38      2               2104                    1122        140             1122
LDPE        790     50      1               286                     286         134             134
LDPE        790     50      1               250                     250         125             125
LDPE        810     30      1               4062                    4062        100             100
LDPE        843     33      1               408                     408         835             835
LDPE        850     80      1               412                     412         34              34
LDPE        855     30      1               740                     740         83              83
LDPE        880     60      1               304                     304         130             130
LDPE        900     70      2               1000                    650         500             850
LDPE        1017    60      1               1056                    1056        174             174
OPP         25      1100    1               381                     381         95              95
OPP         1000    30      2               1358                    1112        300             546
OPP         1000    30      1               1492                    1491        100             101
OPP         1200    20      1               418                     417         461             462
PET         760     12      3               1227                    1876        132             -517 
```

您会看到有些材料具有相同的宽度和规格，但它们没有分组。我认为这是因为订单上的交付数量不同。例如：

```
Material    Width   Gauge   Orders Placed   Delivered Qnty Kilos    Film Issued Film Returned   Qty Remaining
LDPE        620     50      1               252                     252         67               67
LDPE        660     50      1               256                     256         62               62 
```

我希望将这两行分组。它们具有相同的材料、宽度和规格，但交货数量不同，因此未分组。

谁能帮我把这些奇怪的行分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:06:24.360

您的“问题”是交付发生在不同的日期，并且您正在分组，`ActDelDate`因此数据拆分，但由于您没有选择该`ActDelDate`列，这并不明显。

修复方法是：**按列表从组中****删除`ActDelDate`**

您还应该删除第一个连接周围不必要的括号，并更改

```
HAVING ActDelDate Between [start date] And [end date] 
```

至

```
WHERE ActDelDate Between [start date] And [end date] 
```

并*在*_`GROUP BY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:43:00.967

您按交货日期分组，这导致行被拆分。要么从结果中省略交货日期并分组，要么采用交货日期的最小值/最大值。

# ruby - 将磁盘上的文件视为命令行中的选项

> ID：11016100
> 
> 赞同：1
> 
> 时间：2012-06-13T13:39:23.447
> 
> 标签：ruby, command-line

我想在 ruby​​ 中创建一个命令行实用程序，在运行时列出当前目录中的文件并将其显示为选项列表。

```
1 - somefile.txt
2 - somefile.pdf
3- somefile.whatever 
```

所以我可以输入让我们说选项 2 并且**somefile.pdf**被选中来做我想做的任何事情。任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:48:45.290

[http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)

Dir.glob 会将目录中的所有文件作为数组列出，所有其他步骤都很明显。

# c# - 应用程序的重定向、握手

> ID：11016106
> 
> 赞同：2
> 
> 时间：2012-06-13T13:40:02.450
> 
> 标签：c#, asp.net, html, asp.net-mvc-3

我有一些网站`example.com`可以让我制作应用程序。它为创建应用程序的用户创建`user name`、`encrypted token`和`user token`。

为了激活应用程序，它必须获得应用程序所有者的许可。类似于脸书。曾经登录过一个网站，上面写着用 facebook 登录。去获得 facebook 的许可，然后 facebook 重定向回来告诉他们批准。我想做类似的事情。因此`example.com`，当我按下激活按钮时，它会将参数 et、usertoken、用户名发送到我的 mvc。现在我想创建一个重定向回来，`example.com`这样我就可以完成激活应用程序所需的握手，并刷新他们的主屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:41:36.843

我认为您正在寻找[OAuth](http://oauth.net/)。

> OAuth 为用户提供了一种在不共享密码的情况下授予第三方对其资源的访问权限的方法。它还提供了一种授予有限访问权限（范围、持续时间等）的方法。

您还可以查看：[dotnetopenauth](http://www.dotnetopenauth.net/)

> DotNetOpenAuth 是一个完善的开源库，它将 OpenID、OAuth 和 ICard 功能引入 Microsoft .NET Framework。

# cakephp - 无法在 cakephp 中使用电子邮件登录，适用于用户名

> ID：11016111
> 
> 赞同：0
> 
> 时间：2012-06-13T13:40:12.580
> 
> 标签：cakephp, login, cakephp-2.1

我无法在 CakePHP 2.1 中使用电子邮件登录，当我尝试使用用户名时，它工作得非常好。

下面是代码

## 查看：login.ctp

```
<?php
    echo $this->Form->create();
    echo $this->Form->input('email');
    //echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->end('Login');
?> 
```

## 控制器：UsersController.php

```
<?php
    public function login(){
        if ($this->request->is('post')){
            if ($this->Auth->login()){
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid email and password'));
            }
        }
    }
?> 
```

## 型号：User.php

```
<?php
App::uses('AuthComponent', 'Controller/Component');

class User extends AppModel {
    public function beforeSave(){
        if (isset($this->data[$this->alias]['password'])){
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
    }
}
?> 
```

## 数据库结构：用户表

```
id Auto_Increment
username
email
password
role 
```

我不知道，为什么它不接受任何用于登录的电子邮件 ID，但对于用户名来说它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:52:56.690

阅读CakePHP 书的[这一部分](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)。

这是该部分的示例，您需要配置表单身份验证以使用不同的字段作为用户名。

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

# project-management - 如何将产品从 Agilefant 安装迁移到另一个安装？

> ID：11016115
> 
> 赞同：0
> 
> 时间：2012-06-13T13:40:21.920
> 
> 标签：project-management, agile, data-migration

我们有一个 Agilefant 的内部安装。我们已经完成了第一个 sprint，并且已经开始了第二个，现在我们的客户要求访问 Agilefant，以便他可以检查我们的进度。问题是我们的安装中有多个项目，我们不希望他们看到其他项目:) 你可以理解:)

如果我是对的，您不能限制 Agilefant 用户只能访问一种产品，他会看到所有产品（如果我错了，请更正）。

所以解决方案是进行另一个安装并以某种方式将项目迁移到该安装。是否有捷径可寻？

我愿意接受其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:19:06.053

Agilefant 社区论坛上的站点管理员[jarno](http://agilefant.freeforums.org/memberlist.php?mode=viewprofile&u=2)对我的问题给出了很好的回答。目前还没有简单的方法来实现产品的迁移。尽管 jarno 描述了两种方法：

a) 您可以复制您的数据库，将其放入另一个 Agilefant 实例并删除所有您不需要的产品。然后，您可以为您的客户创建用户。

b) 您可以采用 Agilefant 3.0 alpha X。您将能够基于使用 Agilefant 3.0 alpha X 的团队来限制产品访问！

您可以在以下链接中找到有关此版本 Agilefant 的更多详细信息和已知问题：

[http://agilefant.freeforums.org/how-can-i-migrate-a-product-from-an-agilefant-installation-t205.html](http://agilefant.freeforums.org/how-can-i-migrate-a-product-from-an-agilefant-installation-t205.html)

# iphone - 我的代码中处理 nsstring 的错误

> ID：11016116
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:40:22.637
> 
> 标签：iphone, objective-c, xcode, uitableview, nsstring

我在这段代码中有一个错误

```
NSString *str = @"above string"; //load above string here
NSArray * firstArry = [str componentsSeparatedByString:@"#"];
NSMutableArray *secondArry = [[NSMutableArray alloc] init]; //Will hold the # titles
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; //Will hold the strings related to # title
for(NSString firstArryStr : firstArry)
{
    NSArray *tempArry = [firstArryStr componentsSeparatedByString@"\n"];
    NSMutableArray *titleStingsArry = [[NSMutableArray alloc] init];
    for (int i=0; i< [tempArry count];i++)
    {
        if (i==0)
        {
            NSString *title = [tempArry  objectAtIndex:i];
            [secondArry addObject:title];
            [dict setValue:titleStingsArry  forKey:title];
        } else {
            [titleStingsArry  addObject:[tempArry  objectAtIndex:i]];
        }
    } 
 } 
```

错误出现在第一个“for”上。

这是处理该问题的代码：

```
# 2012
20120604 Huge Sandstorm over Saudi Arabia
20120527 Huge Sandstorm over niger
# 2012
20110330 Huge Sandstorm over niger
# just for the test
20110330 AHuge Sandstorm over niger
20110330 BHuge Sandstorm over niger
20110330 CHuge Sandstorm over niger
20110330 1Huge Sandstorm over niger
20110330 2Huge Sandstorm over niger
20110330 3Huge Sandstorm over niger
20110330 4Huge Sandstorm over niger
20110330 5CHuge Sandstorm over niger
20110330 6Huge Sandstorm over niger
# **********
20110330 7Huge Sandstorm over niger
20110330 8Huge Sandstorm over niger
20110330 9CHuge Sandstorm over niger
20110330 AHuge Sandstorm over niger
20110330 B10CHuge Sandstorm over niger
20110330 **CHuge Sandstorm over niger 
```

在一个`UITableView`不同的部分，其中标题将是`# .......`和内容`20110330 ........` `20110330 ........` `20110330 ........`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:45:47.920

使用 for 方法是...

```
for(NSString *firstArryStr in firstArry)
{

             //Put your all code here 
} 
```

希望这能解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:46:42.730

采用：

```
for(NSString *str in firstArry) 
```

# fpdf - FPDF 强制打印到“适合页面”

> ID：11016117
> 
> 赞同：1
> 
> 时间：2012-06-13T13:40:30.537
> 
> 标签：fpdf

是否可以使用 FPDF 强制打印对话框在 Adob​​e Reader 的页面缩放中默认为“适合页面”？我目前正在处理一个 8.27" x 11.67" 的现有文档，而不是重写它以挤出额外的 .67"，我想设置一个值以使 Adob​​e Reader 将比例设置为“适合到页面”默认情况下。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T05:26:07.743

您如何将页面设置为 A4 大小，例如 '$pdf=new FPDF('P','mm','A4');`

# java - 如何将 java 项目转换为 Maven 项目或类似项目

> ID：11016120
> 
> 赞同：6
> 
> 时间：2012-06-13T13:40:51.660
> 
> 标签：java, maven

我目前正在创建一个应用程序，用于一次性编译多个 Java 项目以完成编程任务。由于有许多不同的方式来提交 java 项目（例如，作为 eclipse 项目、作为 netbeans 项目、作为 jar 文件），是否有一个类似的插件，您可以轻松导入或在项目中使用，将 java 项目转换为 maven项目，所以它们都可以以相同的方式编译，而不必创建功能以允许程序编译所有不同类型的 java 项目？

如果不是 Maven 项目，还有其他方法可以完成我想要做的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:56:08.590

在我看来，没有这样的工具可以像这样对自由式 Java 项目进行 mavenize。Maven 基于一些不一定通用的自己的约定。这不仅仅是关于 Java 文件在哪里，还包括资源在哪里（例如，它们可以与 Java 文件在同一目录中）、其他资产在哪里（例如 WSDL 文件）、这些资产是什么、如何处理它们以及如何使用所有这些东西来成功构建最终包。我认为没有机会拥有可以做到这一点的通用工具。

我认为在这里可以想象的最好情况是找出一些关于您必须构建的项目的常见假设，例如它们只能包含 Java 源代码和常规资源。然后，您可以实现一些脚本或程序来扫描这种简化的 Java 项目，以了解所有这些文件的位置。即便如此，依赖关系又如何呢？您是否应该为它们扫描 Eclipse/Netbeans/IDEA 特定文件？甚至很难创建这些假设来使项目足够简单以进行自动 mavenize。

正如我所说，我真的不相信你能做的比仅仅强制项目已经由 Maven 管理更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T14:01:17.423

我不确定我是否完全理解了您的问题，但大多数 IDE 软件（例如 Eclipse、Netbeans 等）都有 Maven 插件，您可以在其中从“配置”选项下的右键单击上下文菜单“mavenize”项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T20:39:46.430

正如 posdef 所说，Eclipse（使用 m2eclipse 或 iam）和 IntelliJ 可以做到这一点：

*   [http://www.mkyong.com/maven/how-to-convert-java-web-project-to-maven-project/](http://www.mkyong.com/maven/how-to-convert-java-web-project-to-maven-project/)
*   [http://wiki.eclipse.org/Converting_Eclipse_Java_Project_to_Maven_Project](http://wiki.eclipse.org/Converting_Eclipse_Java_Project_to_Maven_Project)

您的 IDE 具有此类插件所需的信息。例如，eclipse 拥有自己的文件，如 .classpath、.settings/*。据我所知，这是专有格式，因此不容易解析（尽管它们是人类可读的）。

我不确定你会找到你要找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:56:55.957

使用**Spring STS** IDE（Spring Tool Suite），可以选择将 Java/Dynamic Web 项目转换为 MAVEN 项目。我相信，一旦您拥有适当的插件，您也可以通过 Eclipse 完成同样的任务

右键单击您的 Web 项目 -->**配置 --> 转换为 Maven 项目**。

您将在项目中看到**pom.xml**和其他 Mavenized 功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-05T09:49:55.010

我为 Selenium 项目做了同样的事情。希望会有用

请在您的系统中安装 TestNG 和 Maven。按照所有步骤 1 到步骤 8，并运行您的项目

步骤：1 右键单击​​ Java 项目，单击配置导航到转换为 Maven 项目。

跟随，图 1.1 和图 1.2

[![在此处输入图像描述](../Images/4e204b25308e1391a1ff12ea0c8f51dc.png)](https://i.stack.imgur.com/0jicM.png)

[![在此处输入图像描述](../Images/75bf218316b6e041819f0b44a4b6ad87.png)](https://i.stack.imgur.com/WtF1z.png)

步骤：2 添加所有依赖项（testing.xml 所需的罐子和插件surefire-plugin）

[![在此处输入图像描述](../Images/c09f7ee69186fd8bc0a76d1199bde617.png)](https://i.stack.imgur.com/yGlwz.png)

如何添加罐子，

方式：1 在“<a href="https://mvnrepository.com/" rel="nofollow noreferrer">https://mvnrepository.com/ ”中搜索并添加仓库

方式：2 从本地系统添加 jars（如果需要，选择方式 1 或方式 2 或两者）创建一个文件夹（例如：lib）并放在同一目录中

```
<dependency>
<groupId>selenium-server-standalone-3.3.1</groupId>
<artifactId>selenium-server-standalone-3.3.1</artifactId>
<version>3.3.1</version>
<systemPath>${basedir}/lib/selenium-server-standalone-3.3.1.jar</systemPath>
<scope>system</scope>
</dependency> 
```

[![在此处输入图像描述](../Images/4d1d0c5247de6d7ec019420591ca8455.png)](https://i.stack.imgur.com/KCVMq.png)

步骤：3 将您的课程转换为测试课程 [![在此处输入图像描述](../Images/01ddc622caaf668607e13d9bb12a560f.png)](https://i.stack.imgur.com/o4Xli.png) [![在此处输入图像描述](../Images/4c909fec2ef5386d753c46c9b86b0812.png)](https://i.stack.imgur.com/C0wPW.png)

步骤：4 编辑 testing.xml。

提供类名保存

```
<suite name="Suite">
<test name="Test">
<classes>
<class name="test.java.CurseraTesting" />
</classes>
</test> <!-- Test -->
</suite> <!-- Suite --> 
```

步骤：5 你的类必须包含注解@Test

如果没有，请补充。看下面的程序，

```
package test.java;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.annotations.Test;
public class URL {
@Test
public void openUrl() throws InterruptedException{
System.setProperty("webdriver.chrome.driver","C:\\Users\\shivendra.pandey\\Downloads\\chromedriver.exe");
WebDriver driver = new ChromeDriver();
driver.get("https://www.google.co.in/?gfe_rd=cr&ei=EjlbWbnFPOSK8QeylZ7ACw");
Thread.sleep(1000);
driver.manage().window().maximize();
driver.findElement(By.xpath("//*[@title='Search']")).sendKeys("sanfoundry");
Thread.sleep(1000);
driver.close();
}
} 
```

Step:7 最后验证所有设置的TestNG、JDK

[![在此处输入图像描述](../Images/70a309c470c8a65bc967376a3eb33688.png)](https://i.stack.imgur.com/mI9gC.png)

步骤：8 运行你的项目，点击 Maven 测试

[![在此处输入图像描述](../Images/9b9fdf4a5c249fddc186814b2e4eb366.png)](https://i.stack.imgur.com/d8A1P.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-05T12:35:43.590

如果您使用的是 Eclipse 或 Spring Tool Suite，请右键单击项目 -> 配置 -> 转换为 maven 项目应该将您的项目转换为 maven 项目。您可以检查项目是否包含 pom.xml 文件。如果是，则成功转换。

# crystal-reports - 水晶报告公式中的“字符串是非数字”错误

> ID：11016125
> 
> 赞同：0
> 
> 时间：2012-06-13T13:41:19.140
> 
> 标签：crystal-reports

在水晶报表中屏蔽字段后，我已经放置了一个公式来显示字段的值。**但它在cardno**变量中显示了一个错误“字符串是非数字的” 。以下是我的公式的代码：

```
StringVar cardno;
NumberVar current_len;
NumberVar card_len;
NumberVar start;
NumberVar last;
StringVar ca;

card_len := ToNumber (Mid ({@lens},1,2));
start    := ToNumber (Mid ({@lens},3,2));
last     := ToNumber (Mid ({@lens},5,2));

current_len := Length (Trim (ToText({CA.CA}, 0 ,'')));

ca := ReplicateString("0",card_len-current_len) + Totext({CA.CA},0,'');

If card_len > current_len Then
    If start = 0 Then
        If last <= 1 Then
            cardno := Mid(ca, last, card_len)            
        Else
            cardno := ReplicateString("X",last-start-1) + Mid(ca, last, card_len)           
Else
    cardno := Mid (ca,1,start) + ReplicateString("X",last-start-1) + Mid(ca, last, card_len); 
```

请提供解决方案以避免此错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:55:24.273

你为什么不做这样的事情：

```
Select Len({table.field})

//AmEx
Case 15:  Picture({table.field}, "XXXX XXXXXX XXXXX")

//Visa
Case 16:  Picture({table.field}, "XXXX XXXX XXXX XXXX")

Default:  {table.field} 
```

** 编辑 **

```
Replace(Space(Len({table.field})-4), " ", "X") + Right({table.field},4) 
```

# ruby-on-rails - 使用 Mongoid 数据库设计的多对多关系？

> ID：11016130
> 
> 赞同：1
> 
> 时间：2012-06-13T13:41:41.503
> 
> 标签：ruby-on-rails, database-design, mongoid

我尝试实现以下数据库结构，但在理解如何使用 mongoid 时遇到问题：

我有一个模型**Documents**，一个模型**DocumentTeam**和一个模型**Employees**。用户可以创建文档并可以选择员工，这些员工将添加到 DocumentTeam。这是我在atm的地方：

```
class Document
  embeds_one :document_team
end

class DocumentTeam
  has_many :employees
  embedded_in :document
end

class Employee
  belongs_to :document_teams
end 
```

所以我的问题是：我如何告诉 Rails 在创建文档时自动将选定的员工插入到嵌入式 DocumentTeam 中？

此外，我希望能够列出例如员工的所有简报

```
Employee.first.documents 
```

这也可能吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:16:38.893

在 mongoid 中，您不能引用嵌入的文档。您可以从嵌入文档中引用根文档，但反之则不行。即你不能有`belongs_to :document_teams`in `Employee`。此外，一个副作用是嵌入文档中的关系应该是单面的。您可以将建模更改为以下以实现您想要的：

```
class Document
  embeds_one :document_team
end

class DocumentTeam
  has_and_belongs_to_many :employees, inverse_of: nil
  embedded_in :document
end

class Employee
  def documents
    Document.where('document_team.employee_ids' => self.id)
  end
end 
```

这将允许您使用`Employee.first.documents`，但您不能将其视为关系并继续执行您可以对关系执行的操作，例如重新分配、推送和拉取文档。您必须通过管理团队和员工关系，`DocumentTeam`但可以直接访问员工文档以供阅读。

PS：`Document`id 不是类的好名字，我猜它在某些情况下可能会与 Mongoid::Document 冲突。

# java - Java中的HTML验证

> ID：11016134
> 
> 赞同：0
> 
> 时间：2012-06-13T13:41:52.237
> 
> 标签：java, validation, dtd

我尝试编写一个 HTML 验证器。这时候我认为最好的方法是使用 DTD 文件，因为如果使用了交互的东西，比如 JavaScript，Validator 应该会抱怨。有谁知道一种方法，我如何根据 Java 中的 DTD 文件验证 HTML 文件？有本地库的方法吗？我对外部库也很满意。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:07:28.683

忠告：您无法真正准确地识别 HTML 中的所有 javascript。你必须做到多精确？您可以在事件处理程序、内联和许多其他地方使用 javascript。

如果您对非严格解析感到满意，我建议[您使用 NejoHtml](http://nekohtml.sourceforge.net)和[TagSoup](http://ccil.org/~cowan/XML/tagsoup/)

# jquery-plugins - jQueryMobile-Timebox 问题与 overrideTimeFormat

> ID：11016137
> 
> 赞同：2
> 
> 时间：2012-06-13T13:42:03.993
> 
> 标签：jquery-plugins, jquery-mobile, datebox

我正在尝试在强制时钟模式下将 jQM-DateBox 与数据选项时间框一起使用，以获得 24 小时的小时范围，如下所示：[在此处输入链接描述][jQM-DateBox 时间]

我只是将代码复制粘贴到我的应用程序中

```
 <label for="mydate">Time </label>
 <input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "timebox", "overrideTimeFormat": 24}'> 
```

它仍然不断向我显示 AM/PM 模式。其他人注意到这种行为吗？知道如何解决吗？

请注意，在上面的链接中（相同的代码！）一切似乎都正常工作，我对其他 jQM-DateBox 模式没有其他问题。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T22:48:38.640

您也需要覆盖 timeOutput - 即 "overrideTimeOutput":"%k:%M"

老实说，我不记得为什么我停止进行自动切换 - 我想当我意识到时间输出从语言环境更改为语言环境时（如果您正在为单个语言环境编写，这是更容易处理的方法它）。否则，我的假设是您需要以服务器期望的格式使用它，在这种情况下，您无论如何都想覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:02:55.673

@JTSage 我的意思是选择器无论如何都显示 12 小时模式

对任何人：我是意大利人，所以我“解决”了下载这个 .js 文件[Italian .js 脚本用于 timebox并使用](http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.it.utf8.js)*timeFormat: 24* 更改*timeFormat: 12*语句。这是一个技巧，但它有效。

 *再见，谢谢。*

# hadoop - 如何将具有权限的新用户添加到 Hue/Hive？

> ID：11016138
> 
> 赞同：0
> 
> 时间：2012-06-13T13:42:11.810
> 
> 标签：hadoop, hive, hue

我有一个 Hadoop 集群，我通过 Hue 界面管理它来运行 Hive 查询。

我想将另一个用户添加到 Hue 并让他们访问某些表以运行查询。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:35:17.903

您可能希望将该用户添加到您必须创建以运行 hadoop 的 hadoop 组。此外，您可能希望为 hadoop 上的每个用户创建一个单独的工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:23:08.820

Hue 只是 Hive 之上的一个视图，因此应该使用[Hive 授权](https://cwiki.apache.org/Hive/languagemanual-auth.html)（请注意：Hive 授权目前正在重新设计以确保真正安全）。

# c# - ReSharper 和对象初始化器的间距

> ID：11016141
> 
> 赞同：2
> 
> 时间：2012-06-13T13:42:32.413
> 
> 标签：c#, resharper, object-initializer

当我尝试使用 Object Initializer 初始化对象时，ReSharper 总是会插入大量空白。

```
public class Bar
{
    public void Adam()
    {
        var foo = new Foo
                      {
                          First = "yes",
                          Second                              = 
                      };
    }
} 
```

当我替换`;`初始化器之后的字符时，我的代码将被格式化如下：

```
public class Bar
{
    public void Adam()
    {
        var foo = new Foo
                      {
                          First = "yes",
                          Second = "no"
                      };
    }
} 
```

请按照以下步骤重现问题（谢谢 Piers Myers）：

*   例如，将光标放在左大括号之后的缩进位置（在空行上，您可以将光标放在行的最开头或 Resharper/VS 认为您应该使用的缩进级别）
*   按 CTRL+空格、CTRL+ALT+空格或 SHIFT+ALT+空格。它会在光标之前插入空格以填充它，但它也会在光标之后添加相同数量的空格，这是不正确的。

有谁知道是什么导致最初生成的空白？也许我可能配置错了哪些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:10:43.750

此问题已在以下安装中得到确认：

*   Resharper 5.1 VS2008（由 Piers Myers 提供）
*   Resharper 6.1 VS2008（由我）

然而，这些安装的问题似乎已经消失：

*   Resharper 6.1 VS2010（由 Piers Myers 提供）
*   Resharper 7.0EAP VS012（由我）

因此，它似乎是 ReSharper 与 VS2008 IDE 结合使用的错误。

# python - 写入文本文件时出现 Python 奇怪字符

> ID：11016157
> 
> 赞同：4
> 
> 时间：2012-06-13T13:43:19.330
> 
> 标签：python, text, notepad, python-2.4

我在这里有一个简单的代码，它应该在文本文件中输出 2 列字符。

```
infile = open('anything.txt', 'r')
outfile = open('some.txt', 'w')
f = infile.readlines()
data=[]
a=['1','2','3']
b=['5','6','7']
for i in a:
  for j in b:
    outfile.write(i + "\t" + j + "\n") 
```

当我用标准记事本打开生成的文本文件时，我得到的是这些奇怪的字符！ऱਵऱਸ਼ऱ਷लਵलਸ਼ल਷ळਵळਸ਼ळ਷</p>

但是，当我使用 Notepad++ 或 Wordpad 打开文本文件时，结果是两列数字，它们之间有一个制表符，正如我们所期望的那样。

我真的迷路了。到底是怎么回事 ？我不能用标准的记事本打开文本文件吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:59:11.623

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:47:02.123

我没有这个问题，你用的是什么版本的Python，什么操作系统？

完成后，您应该明确关闭文件。

```
infile.close()
infile.close() 
```

最好考虑使用`with`，因为它会在您完成或遇到异常时“自动”关闭您的文件：

```
with open('data.txt') as infile, open('some.txt', 'w') as outfile: 
```

对于早期版本的 Python（2.7 之前？），您可能必须将其分为两部分：

```
with open('data.txt') as infile:  # default mode is "read" if not specified
  with open('some.txt', 'w') as outfile: 
```

（鉴于您提到您使用 Python v2.4`with`对您不起作用，它是在 v2.5 中引入的 - 仍然很高兴了解它）

我得到这个输出：

```
1   5
1   6
1   7
2   5
2   6
2   7
3   5
3   6
3   7 
```

另外，请注意您根本*没有*在程序中使用这三行：

```
infile = open('anything.txt', 'r')
f = infile.readlines()
data=[] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:52:05.717

不同的编辑器可能会采用不同的字符编码。这可以解释为什么有些编辑器会正确显示结果。

# java - Spring：如何解析上传的 zip 文件？

> ID：11016158
> 
> 赞同：2
> 
> 时间：2012-06-13T13:43:21.353
> 
> 标签：java, spring, zip, zipinputstream

我将我的**zip**存档上传到服务器并希望打开`.txt`其中的`.jpg`文件。我成功地在我的控制器中获取了我的存档，并通过`ZipEntry`. 现在我想打开它，但为此我应该得到我的文件的完整路径。

我还没有找到如何做到这一点。你能建议一些方法来做到这一点吗？

**更新**

我尝试使用下面建议的示例，但我无法打开文件

```
ZipFile zFile = new ZipFile("trainingDefaultApp.zip"); 
```

我有`FileNotFoundException`

所以我回到我的起点。我在 Java Spring 应用程序中有上传表单。在控制器中，我有一个 zip 存档`byte[]`

```
@RequestMapping(method = RequestMethod.POST)
public String create(UploadItem uploadItem, BindingResult bindingResult){
    try {
        byte[] zip = uploadItem.getFileData().getBytes();
        saveFile(zip); 
```

然后我得到了每个`ZipEntry`

```
 InputStream is = new ByteArrayInputStream(zip);
    ZipInputStream zis = new ZipInputStream(is);

    ZipEntry entry = null;
    while ((entry = zis.getNextEntry()) != null) {
        String entryName = entry.getName();
        if (entryName.equals("readme.txt")) {
            ZipFile zip = new ZipFile(entry.getName()); // here I had got an exception 
```

根据文档，我做得很好，但对我来说，只传递文件名并怀疑你会成功打开文件很奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:04:25.423

`zipFile.getInputStream(ZipEntry entry)`将为您返回特定条目的输入流。

查看[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html#getInputStream(java.util.zip.ZipEntry))`ZipFile.getInputStream()` - [http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html#getInputStream(java.util.zip.ZipEntry](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html#getInputStream(java.util.zip.ZipEntry)) ) 。

**更新：**

我误读了你的问题。对于使用`ZipInputStream`，Oracle 网站 ( [http://java.sun.com/developer/technicalArticles/Programming/compression/](http://java.sun.com/developer/technicalArticles/Programming/compression/) ) 上的示例代码向您展示了如何从流中读取。请参阅第一个代码示例：代码

*   示例 1：UnZip.java。

在这里复制，它是从条目中读取并将其直接写入文件，但您可以用您需要的任何逻辑替换它：

```
ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
ZipEntry entry;
while((entry = zis.getNextEntry()) != null) {
   System.out.println("Extracting: " +entry);
   int count;
   byte data[] = new byte[BUFFER];
   // write the files to the disk
   FileOutputStream fos = new FileOutputStream(entry.getName());
   dest = new 
   BufferedOutputStream(fos, BUFFER);

   while ((count = zis.read(data, 0, BUFFER)) != -1) {
        dest.write(data, 0, count);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:27:56.703

我解决了我的 uissue。解决方案是直接使用 ZipInputStream。这里的代码：

```
 private void saveFile(byte[] zip, String name, String description) throws IOException {
    InputStream is = new ByteArrayInputStream(zip);
    ZipInputStream zis = new ZipInputStream(is);

    Application app = new Application();
    ZipEntry entry = null;
    while ((entry = zis.getNextEntry()) != null) {
        String entryName = entry.getName();
        if (entryName.equals("readme.txt")) { 
           new Scanner(zis); //!!!
           //... 
           zis.closeEntry(); 
```

# php - 如何使用 php 服务器发送 WebSocket hybi-17 帧

> ID：11016164
> 
> 赞同：2
> 
> 时间：2012-06-13T13:43:42.187
> 
> 标签：php, phpwebsocket

我尝试在 PHP 握手和接收数据中实现 WebSocket 服务器，但如果我尝试向客户端发送数据，Chrome 19 会说“服务器不得屏蔽它发送给客户端的任何帧。” 但我不掩盖数据。我的代码如下所示：

```
function wrap($msg=""){ 

$byte1 = 0x80 | (0x1 & 0x0f);

if(strlen($msg) <= 125){
    $header = pack('CC', $byte1, strlen($msg));
}
elseif(strlen($msg) >= 126 && strlen($msg) <= 65535){
    $header = pack('CCn', $byte1, 126, strlen($msg));
}
else{
    $header = pack('CCN', $byte1, 126, strlen($msg));
}
$this->log($header);
return $header.$msg;
} 
```

我使用 socket_write() 将它发送给客户端

**编辑：** Firefox 13 也关闭了连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:02:20.237

我遇到了同样的问题：对于从服务器发送的一些消息，浏​​览器中没有响应，对于一些错误“服务器不能屏蔽任何帧......”，尽管我没有添加任何掩码。原因在于发送的握手。握手是：

```
"HTTP/1.1 101 Web Socket Protocol Handshake\r\n" .
...
"WebSocket-Location: ws://{$host}{$resource}\r\n\r\n" . chr(0) 
```

那个 chr(0) 是原因，在我删除它之后一切正常。

消息编码函数：

```
protected function hybi10Encode($payload, $type = 'text', $masked = true) {
        $frameHead = array();
        $frame = '';
        $payloadLength = strlen($payload);

        switch ($type) {
            case 'text':
                // first byte indicates FIN, Text-Frame (10000001):
                $frameHead[0] = 129;
                break;

            case 'close':
                // first byte indicates FIN, Close Frame(10001000):
                $frameHead[0] = 136;
                break;

            case 'ping':
                // first byte indicates FIN, Ping frame (10001001):
                $frameHead[0] = 137;
                break;

            case 'pong':
                // first byte indicates FIN, Pong frame (10001010):
                $frameHead[0] = 138;
                break;
        }

        // set mask and payload length (using 1, 3 or 9 bytes)
        if ($payloadLength > 65535) {
            $payloadLengthBin = str_split(sprintf('%064b', $payloadLength), 8);
            $frameHead[1] = ($masked === true) ? 255 : 127;
            for ($i = 0; $i < 8; $i++) {
                $frameHead[$i + 2] = bindec($payloadLengthBin[$i]);
            }

            // most significant bit MUST be 0 (close connection if frame too big)
            if ($frameHead[2] > 127) {
                $this->close(1004);
                return false;
            }
        } elseif ($payloadLength > 125) {
            $payloadLengthBin = str_split(sprintf('%016b', $payloadLength), 8);
            $frameHead[1] = ($masked === true) ? 254 : 126;
            $frameHead[2] = bindec($payloadLengthBin[0]);
            $frameHead[3] = bindec($payloadLengthBin[1]);
        } else {
            $frameHead[1] = ($masked === true) ? $payloadLength + 128 : $payloadLength;
        }

        // convert frame-head to string:
        foreach (array_keys($frameHead) as $i) {
            $frameHead[$i] = chr($frameHead[$i]);
        }

        if ($masked === true) {
            // generate a random mask:
            $mask = array();
            for ($i = 0; $i < 4; $i++) {
                $mask[$i] = chr(rand(0, 255));
            }

            $frameHead = array_merge($frameHead, $mask);
        }
        $frame = implode('', $frameHead);
        // append payload to frame:
        for ($i = 0; $i < $payloadLength; $i++) {
            $frame .= ($masked === true) ? $payload[$i] ^ $mask[$i % 4] : $payload[$i];
        }

        return $frame;
    } 
```

# c# - 从代码隐藏创建 aspx 文本框

> ID：11016169
> 
> 赞同：4
> 
> 时间：2012-06-13T13:43:52.443
> 
> 标签：c#, asp.net

如何从 C# 中的代码后面创建 aspx 文本框以及如何在后面的代码中访问它的值？我按照以下方式进行操作，但在每个帖子背面的文本框都被清除。我需要在回帖中保留它的价值观。

```
TextBox txt = new TextBox();
txt.ID = "strtxtbox";
txt.CssClass = "CSS1";
StringBuilder sb = new StringBuilder();
StringWriter writer = new StringWriter(sb);
HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
txt.RenderControl(htmlWriter);

//lbl is an aspx label
lbl.text += @"<td style='width: 5%;'>" + sb.ToString() + "</td>"; 
```

我访问文本框值如下

```
string tb = Request.Form["strtxtbox"].ToString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:48:36.927

您可以从创建 TextBox 控件开始。它必须在`Init()`( `Page_Init()`) 或`PreInit()`( `Page_PreInit()`) 方法中完成，并且无论`Page.IsPostBack`. 这将在加载之前将元素放在页面`ViewState`上，并允许您在回发时检索值。

```
var textBox = new TextBox(); 
```

然后你应该在它上面设置一些属性，包括一个 ID，这样你以后可以找到它：

```
textBox.ID = "uxTxtSomeName";
textBox.MaxLength = 10; // maximum input length
textBox.Columns = 20; // character width of the textbox
etc... 
```

然后您需要将其添加到页面上的适当容器中（`Page`或您希望它出现在其中的任何控件）：

```
parentControl.Controls.Add(textBox); 
```

然后在回发时，您可以使用父函数在`Load()`方法 ( ) 中检索该值：`Page_Load()``FindControl()`

```
var input = (parentControl.FindControl("uxTxtSomeName") as TextBox).Text; 
```

注意：内置`FindControl()`仅遍历直接子级。如果要搜索整个嵌套服务器控件树，可能需要实现自己的*递归* `FindControl()`函数。不过，[so] 上有一百万零一个递归`FindControl()`函数的例子，所以我将把它留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:47:37.187

检查一下，它为您提供了在运行时添加控件的完整示例 [http://www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET](http://www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET)

[http://geekswithblogs.net/dotNETvinz/archive/2009/03/17/dynamically-adding-textbox-control-to-aspnet-table.aspx](http://geekswithblogs.net/dotNETvinz/archive/2009/03/17/dynamically-adding-textbox-control-to-aspnet-table.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:48:26.927

问题是控件在回发时不可用，除非您每次都重新创建它，这是有问题的。

我过去使用的一种解决方案是 DynamicControlsPlaceholder，您可以在[此处查看](http://www.denisbauer.com/ASPNETControls/DynamicControlsPlaceholder.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:48:20.093

根据注释中的代码创建文本框

```
TextBox myTextBox=new TextBox(); 
```

但是，您必须设置 ID/名称。此外，您必须在每次回发、预渲染或之前创建文本框，以便填充该值。如果您将文本框的创建延迟到页面生命周期的后期，则不会从回发中填充该值，然后您必须手动从 Request.Response[] 集合中检索它。

# sql-server - 如何将 sql server 更新推送到 Web UI

> ID：11016170
> 
> 赞同：1
> 
> 时间：2012-06-13T13:43:52.467
> 
> 标签：sql-server, real-time

我们有一个将数据写入 SQL Server 的 ETL 包。数据显示在 ASP.Net 网页上。有时 ETL 可能会识别出警报条件（它也被写入数据库）。在这种情况下，必须立即通知 UI。将某些内容从 ETL 或 SQL Server 推送到 ASP.Net UI 的合适技术是什么？StreamInsight 似乎有点过头了。Cache Dependency 似乎不包括将事件推送到客户端的方法。你的建议是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:44:44.500

您可以使用 SQL Server 中的查询通知。查询通知允许在数据更改时通知应用程序。此功能对于从数据库提供信息缓存的应用程序（例如 Web 应用程序）特别有用，并且需要在源数据更改时得到通知。有关详细信息，请参阅此链接[msdn 链接](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)

希望能帮助到你 ！！

**编辑 ：** 您可以在您的情况下使用 SqlCacheDependency 类。SqlCacheDependency 使用 SqlDependency 在依赖项更改时从缓存中删除数据。它派生自 CacheDependency 基类，这是将项目插入缓存时使用的参数之一。当使用数据库和表名创建 SqlCacheDependency 时，它将监视表的更改。监视表是通过 SQL Server 提供的轮询功能完成的。轮询的工作方式是将触发器附加到要监视的表，每个插入、更新和删除语句都会触发该触发器。触发器在此源表的状态表中增加一个数字，以指示该表已更改。当一个表被监控时，这个状态表会被轮询那个号码来检查它是否已经改变。
你可以在谷歌上得到很多实现这个的例子。[这里](http://www.dotnetcurry.com/ShowArticle.aspx?ID=263)展示了一个这样的

# xml - Enumerate inner elements with xslt

> ID：11016171
> 
> 赞同：0
> 
> 时间：2012-06-13T13:43:58.737
> 
> 标签：xml, xslt

I have xml file with such structure:

```
...
<outer>
   ...
   <inner/>
   ...
</outer>
...
<outer>
   ...
   <inner/>
   ...
</outer>
... 
```

Instead of "..." there exist other elements. How one could enumerate `<inner/>` elements using `xslt`? The output should be:

```
...
<outer>
   ...
   <inner>1</inner>
   ...
</outer>
...
<outer>
   ...
   <inner>2</inner>
   ...
</outer>
... 
```

**EDIT 1.** What if we need to count and copy only `<outer copy="1">`? This doesn't work:

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:04:21.060

Use `xsl:number`:

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="outer/inner">
    <xsl:copy>
      <xsl:number level="any"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:46:25.190

I'm not sure if this is what you are looking for:

> ```
> <xsl:for-each select="outer/inner">
> 
> </xsl:for-each> 
> ```

# javascript - jquery - 防止点击并检索函数调用的参数

> ID：11016173
> 
> 赞同：0
> 
> 时间：2012-06-13T13:44:06.650
> 
> 标签：javascript, jquery

我们被要求对一些代码采取创可贴措施，所以这看起来真的很愚蠢，但请耐心等待。

我们需要阻止锚点的 onclick 方法并检索正在执行的函数调用的参数，以便使用这些参数调用不同的函数。这是我们到目前为止的代码和html：

```
<p><a href="#" onclick="openMoreProductVideos('Title of video','VideoCode','false');return false;"><span class="txt">View all videos</span></a></p> 
```

JS：

```
// undefine onclick so it is not handled with broken function
$('a[onClick^=openMoreProductVideos]').each(function () {
    this.onclick = undefined;   
});

    // grab parameters from onclick function call and submit to new function.
$('a[onClick^=openMoreProductVideos]').click(function () {
    strStart = "openMoreProductVideos(";
    strFinish = ");return false"
    srctext = $(this).parent().html();      
    var re = strStart + ".*?"+strFinish
    var newtext = srctext.match(re)[1];
    var callparams = newtext.substring(1,newtext.length-1);
    testparams(callparams);
  });

 // test function to see if parameters are working
 function testparams (a,b,c){
    console.log (a,b,c)
 } 
```

问题是返回的字符串（callparams）被视为一个参数。我不是正则表达式专家，所以我希望比我更有经验的人能快速看到解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:48:44.097

if`callparams`是一个字符串，`"'Title of video','VideoCode','false'"`然后尝试

```
testparams(callparams.split(',')); 
   /* transforming string into an array 
    * ["'Title of video'", "'VideoCode'", "'false'"] 
    */
...

function testparams (pars){
   console.log (pars[0], pars[1], pars[2]);
   /* if necessary remove trailing quotes with .replace() method */
} 
```

# python - 在制作 Facebook 应用程序时，我对用户和朋友权限使用什么语法？

> ID：11016175
> 
> 赞同：1
> 
> 时间：2012-06-13T13:44:10.653
> 
> 标签：python, facebook-graph-api, facebook-apps, pyfacebook, facebook-app-requests

我正在制作一个 facebook 应用程序，在用户和朋友权限中我选择了“friends_birthday”，在扩展权限下我选择了“offline_access”

对于“offline_access”，代码是

```
facebook=Facebook('<api-key>','<secret-key>')
facebook.request_extended_permission('offline_access') 
```

所以我使用“request_extended_permission”来获得扩展权限。我对用户和朋友权限使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:53:57.933

假设“pyfacebook”的工作方式与官方 SDK 类似，只需将所需的其余权限作为 CSV 列表添加到同一个调用中：

```
facebook=Facebook('<api-key>','<secret-key>')
facebook.request_extended_permission('friends_birthday, user_birthday') 
```

ETC

# c++ - C++ 设计中的属性处理

> ID：11016176
> 
> 赞同：2
> 
> 时间：2012-06-13T13:44:21.483
> 
> 标签：c++, oop, attributes

这让我感到困扰：我有一个类层次结构，其中包含一组强制或非强制属性。这些类被序列化为 XML（或其他）。必须的属性应该一直序列化，那些不是的，只有在我指定它们时才应该序列化。

我正在寻找一种方法，可以尽可能地自动化这个过程，而不必专门检查每个属性是否设置了值。

这是一个例子：

```
 class Book
 {

     QString m_author;           // this is optional
     QString m_secondaryAuthor;  // this is optional
     QString m_title;            // this is mandatory

 public: 
     QString serializePlainText()
     {
         QString result = "Book:";
         result += m_title;
         if(m_author.length()) result+= " by "+m_author;
         if(m_SecondaryAuthor.length()) result+= " and "+m_SecondaryAuthor;
         return result;
     }

     void setTitle(const QString& title)
     {
         m_title = title;
     }

     void setAuthor(const QString& author)
     {
         m_author = author;
     }
 }; 
```

当然，这只是一个简单的例子，现实生活要复杂得多，类可以有数百个属性。这里是问题的第二部分：我需要能够以更严格的方式设置属性，即。不使用映射到字符串属性值的映射，但或多或​​少类似于上面的示例（使用setter函数`setTitle(const QString&)`......等等......

考虑到这样做的任何奇特方式：

1.  无需手动声明和检查所有属性
2.  有一个漂亮的和程序员友好的 API？

我或多或少地坚持使用 Qt，但这不是强制性的。

谢谢，f。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:08:00.413

如果你愿意使用预处理器为你生成代码，你可以依赖[Boost.Preprocessor](http://www.boost.org/libs/preprocessor)。例如，您可以按照以下方式做一些事情：

```
#define GET_TYPE( pair ) BOOST_PP_TUPLE_ELEM( 2, 0, pair )
#define GET_NAME( pair ) BOOST_PP_TUPLE_ELEM( 2, 1, pair )

#define DECLARE_MANDATORY( r, data, elem ) GET_TYPE( elem ) GET_NAME( elem );

#define DECLARE_MANDATORY_ATTRIBUTES( attributes ) \
    BOOST_PP_SEQ_FOR_EACH( DECLARE_MANDATORY, ~, attributes )

#define DECLARE_OPTIONAL( r, data, elem ) boost::optional< GET_TYPE( elem ) > GET_NAME( elem );

#define DECLARE_OPTIONAL_ATTRIBUTES( attributes ) \
    BOOST_PP_SEQ_FOR_EACH( DECLARE_OPTIONAL, ~, attributes )

#define MANDATORY_ACCESSORS( r, data, elem ) \
    BOOST_PP_CAT( void set_, GET_NAME( elem ) ) (GET_TYPE( elem ) const & value) { GET_NAME( elem ) = value; } \
    GET_TYPE( elem ) BOOST_PP_CAT( get_, GET_NAME( elem ) ) () const { return GET_NAME( elem ); }

#define DEFINE_MANDATORY_ACCESSORS( attributes ) \
    BOOST_PP_SEQ_FOR_EACH( MANDATORY_ACCESSORS, ~, attributes )

#define OPTIONAL_ACCESSORS( r, data, elem ) \
    BOOST_PP_CAT( void set_, GET_NAME( elem ) ) (GET_TYPE( elem ) const & value) { GET_NAME( elem ).reset(value); } \
    GET_TYPE( elem ) BOOST_PP_CAT( get_, GET_NAME( elem ) ) () const { return *GET_NAME( elem ); }

#define DEFINE_OPTIONAL_ACCESSORS( attributes ) \
    BOOST_PP_SEQ_FOR_EACH( OPTIONAL_ACCESSORS, ~, attributes )

class Book
{
    #define BOOK_MANDATORY_ATTRIBUTES ((std::string, title))
    #define BOOK_OPTIONAL_ATTRIBUTES ((std::string, author)) ((std::string, secondaryAuthor))

  public:

    DECLARE_MANDATORY_ATTRIBUTES( BOOK_MANDATORY_ATTRIBUTES )
    DECLARE_OPTIONAL_ATTRIBUTES( BOOK_OPTIONAL_ATTRIBUTES )

    DEFINE_MANDATORY_ACCESSORS( BOOK_MANDATORY_ATTRIBUTES )
    DEFINE_OPTIONAL_ACCESSORS( BOOK_OPTIONAL_ATTRIBUTES )
};

int main()
{
    Book b;
    b.set_title("H2G2");

    std::cout << b.get_title();

    b.set_author("Douglas Adams");
    std::cout << b.get_author();
} 
```

您可以创建另一个宏来为您的序列化函数生成代码，利用 [ `boost::optional`](http://www.boost.org/libs/optional] 来测试是否设置了可选属性。

如果您不想进行代码生成，您将无法自动获取属性的访问器。但是，序列化方面可以更经典地处理，例如通过为所有属性使用公共基类。这样，您可以将它们存储在容器中，并遍历它们以要求它们序列化自己：

```
struct Attribute
{
    virtual QString serializePlainText() = 0;
};

// Generic attribute for the most common cases
template <typename T>
class MandatoryAttribute : public Attribute
{
    T value;

  public:

    std::string serializePlainText() 
    { 
        return boost::lexical_cast<std::string>(value);
    }
};

// Generic attribute for the most common cases
template <typename T>
class OptionalAttribute : public Attribute
{
    boost::optional<T> value;

  public:

    bool isSet() const { return value; }

    std::string serializePlainText() 
    { 
        return isSet() ? 
            boost::lexical_cast<std::string>(value) :
            "";
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:17:31.993

所以。我的第一个想法是“使用一种不错的动态语言”，但我想这不是一个选择。不过，我确实有一些模糊的建议。

1.  使用地图。地图可以被迭代，使你的序列化代码大大减少痛苦。它还使添加新属性变得更加容易。
2.  使用单个 getter 和单个 setter 函数，因为这是客户端代码调用的最简单、最简洁的 API。
3.  分别保存已知属性名称和元数据值的映射。

调用 set 后，可以在属性元数据表中查找请求的属性名称。然后，您可以执行任何您想要的验证或转换。我假设您不需要在这里为每个属性的结构设置一组独特而复杂的要求，当然......大多数属性可能只需要最小或最大长度之类的东西？

在序列化时，您可以遍历属性元数据表，查找所有必需属性的名称，并在属性值表中查找它们。之后，遍历您的属性值表，并序列化任何剩余的项目。

# scheduled-tasks - 是否所有集群调度程序都接受数组作业，如果他们接受，他们是否设置了 SGE_TASK_ID 数组 ID？

> ID：11016179
> 
> 赞同：1
> 
> 时间：2012-06-13T13:44:32.247
> 
> 标签：scheduled-tasks, cluster-computing, qsub

当使用[qsub](http://www.clusterresources.com/torquedocs/commands/qsub.shtml)将数组作业放在集群上时，全局变量 SGE_TASK_ID 被设置为数组作业 ID。我在集群上运行的 shell 脚本中使用它，其中每个阵列作业需要根据 SGE_TASK_ID 执行不同的操作。这是集群调度程序执行此操作的常用方法，还是它们都有不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:34:17.243

大多数调度程序都有办法做到这一点，尽管在不同的设置中可能会略有不同。在 TORQUE 中，该变量称为 $PBS_ARRAYID，但它的工作原理相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:44:22.483

> 是否所有集群调度程序都接受阵列作业

不，很多人都这样做，但不是全部。

> 如果他们这样做了，他们是否设置了 SGE_TASK_ID 数组 ID？

只有 Grid Engine 会设置 SGE_TASK_ID，因为这只是在 Grid Engine 中调用的变量。其他集群中间件有不同的名称，具有不同的语义。

您的问题的目标有点不清楚，但是如果您想编写一个在许多不同的集群中间件/负载均衡器/调度程序上运行的程序/系统，您应该查看 DRMAA。这将抽象变量如 SGE_TASK_ID。

# php - Kohana 自动加载子模型

> ID：11016181
> 
> 赞同：1
> 
> 时间：2012-06-13T13:44:33.717
> 
> 标签：php, kohana, models, autoload, kohana-2

首先，我使用的是 Kohana 2.3.4。

我的问题是，正如 Kohana 文档所说，模型必须在应用程序/模型中，但为了改进我的应用程序，我希望有几个子文件夹与其他模型。这很有用，因为我可以让文件树更有条理。

因此，如果我尝试在子文件夹中加载模型，则会返回“找不到类”错误，如果我将该类移动到主模型文件夹，它会正常工作。

所以，我的问题是，如何在这些子文件夹中加载模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:57:59.640

IIRC，模型仅从`models/`kohana 2 中的基本路径自动加载。如果您在其他地方拥有该文件，则必须手动包含该文件：

`require Kohana::find_file('models', 'path/to/model')`

我认为这是正确的语法。如果不是，请看一下 kohana 类。

# android - 安卓卸载包

> ID：11016183
> 
> 赞同：2
> 
> 时间：2012-06-13T13:44:40.480
> 
> 标签：android

我正在开发其中的 android 应用程序

1.  应用程序有一个存储的密码（由用户在首次安装应用程序时设置）

2.  我的应用程序是设备管理员

问题是当用户单击**卸载**此应用程序时，我希望用户输入应用程序的密码

之后我将遵循的过程是：

1.  显示密码页面
2.  通过某些代码删除设备管理员权限
3.  允许卸载

请帮我检测我的应用程序的卸载点击拍摄密码页面.. !!

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:56:51.790

您的意思是拦截您的应用程序的卸载，并查询密码吗？这是不可能的。之前已经提出过类似的问题，例如[这里](https://stackoverflow.com/questions/2874412/get-application-uninstall-event-in-android)。

**编辑**：似乎可以通过使您的应用程序成为[设备管理应用](http://developer.android.com/guide/topics/admin/device-admin.html)程序来完成一些相关的事情：

> “要卸载现有的设备管理应用程序，用户需要先将应用程序注销为管理员。”

但是，我不熟悉随之而来的限制，以及它是否允许您的确切用例。

# css - 使用 SquishIt 在保存时编译 .less 文件

> ID：11016186
> 
> 赞同：1
> 
> 时间：2012-06-13T13:44:48.607
> 
> 标签：css, less, squishit

我正在使用 SquishIt 并有一个**.less**文件，我使用以下行将其添加到 CSS 包中

`.Add("~/content/styles/dev.less")`

这`dev.less.debug.css`会在我构建解决方案时进行编译，但是我希望能够只保存 .less 文件并自动编译 css（因此我可以在浏览器中立即看到更改，就像使用传统的 CSS 文件一样）。

我已经查看了许多扩展来实现这一点（例如[LessExtension](http://visualstudiogallery.msdn.microsoft.com/e646c6ec-87a7-45ea-81e8-d655a3d3e73e)和[LessCssForVisualStudio](https://github.com/StevePotter/LessCssForVisualStudio/downloads)），但是这些需要将文件添加到包中`dev.css`而不是`dev.less`. [Mindscape Web Workbench](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)在其免费版本中不编译 LESS 文件，所以我不知道它是否也需要`dev.css`.

我无法更改文件的链接，因为该项目将跨团队进行，有些人不会安装扩展程序，并且很乐意构建解决方案以进行编译。

是否有自动编译为与 SquishIt 一起使用而构建的 LESS 的扩展程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:33:27.423

Squishit 在后台使用 dotless，因此您可以直接使用它。或者设置它以便您请求较少的文件并且处理程序返回 CSS，或者您可以使用 exe 在构建时编译以及监视模式......我不确定什么最适合您，但您可以在 dotless wiki (https://github.com/dotless/dotless/wiki/Using-.less) 上找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T12:03:51.783

Web Essentials 完美地完成了这项工作并且它是免费的。

[http://vswebessentials.com/](http://vswebessentials.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:47:03.940

如果您在非生产站点上使用它，我建议使用 less.js（它将在客户端使用 js 渲染 css）。

# android - 在 TextView 中显示纬度和经度值

> ID：11016188
> 
> 赞同：1
> 
> 时间：2012-06-13T13:44:49.657
> 
> 标签：android, textview

我正在尝试在 a 中显示纬度和经度值`TextView`，但是在运行项目时不显示这些值。任何人都可以帮助我吗？，提前谢谢你。我的代码如下：
**GeocodingActivity.class**

```
public class GeocodingActivity extends Activity {
LocationManager locman;
Criteria cri;
LocationProvider locpro;
AlertDialog.Builder builder;
Handler handler;
TextView t1;
LocationListener loclis;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t1=(TextView)findViewById(R.id.textView1);
    locman=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
       handler=new Handler(){
        public void handle(Message msg){
                  switch(msg.what){
        case 1: 
            t1.setText((String)msg.obj);
            break;
        }

        }
loclis=new LocationListener(){

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
Message.obtain(handler, 1,   arg0.getLatitude()+","+arg0.getLongitude()).sendToTarget();

}
@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
    }
@Override
public void onStatusChanged(String provider, int status,
Bundle extras) {
     }
    };

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:03:07.883

```
Message.obtain(handler,0,location.getLatitude()+","+location.getLongitude()).sendToTarget(); 
```

所以你必须意识到方法`getLongitude`和`getLatitude`返回`Double`。而你需要`String`. 所以你需要将它们转换为`String`with 方法`String.valueOf()`

```
Message.obtain(handler, 0, String.valueOf(location.getLatitude()) + "," + String.valueOf(location.getLongitude())).sendToTarget(); 
```

然后，`Message.obj`返回`Object`so 以便`String`从那里得到你应该将它转换为`String`so`t1.setText((String) msg.obj);`

现在，它应该可以工作了。

* * *

**编辑：**

**第二种方法**

```
@Override
public void onLocationChanged(Location location) {
   Bundle bundle = new Bundle();
   String data = String.valueOf(location.getLatitude()) + "," + String.valueOf(location.getLongitude());
   bundle.putString("updateGpsData", data);
   yourMessage.setData(bundle);
   yourMessage.obtain(handler, 0).sendToTarget(); 
```

}

然后你的`handle`方法看起来像这样

```
public void handle(Message msg){
   t1.setText(msg.getData().getString("updateGpsData"));
} 
```

因此，您可以创建`Bundle`和更新数据，只需添加到您的数据，`Bundle`然后在您调用的句柄方法中`setData()`设置数据以检索更新数据。`Message``getData().getString()``GPS`

不要忘记这`Bundle`适用于对**键 + 值**，因此您`Bundle`使用特定键将数据设置为您的数据，因此要获取数据，您必须使用**相同的键**（“updateGpsData”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:47:04.090

请像这样在您的坐标上使用该`String.valueOf`方法

```
String.valueO(location.getLatitude())+","+String.valueOf(location.getLongitude()) 
```

# c++ - 'pow' 未在此范围内声明

> ID：11016189
> 
> 赞同：2
> 
> 时间：2012-06-13T13:45:01.547
> 
> 标签：c++, pow

```
#include <iostream>
#include <string.h>

using namespace std;

int main()
{
    int e=0;
    int b=0;
    cout<<"Enter Exponent";
    cin>>e;
    cout<<"Enter Base";
    cin>>b;
    pow(e, b);
    cout<<"Power:"<<e;
    return 0;
}

void pow(int e, int b)
{
  int t=1;
  while(b==t)
  {
    e=e*b;
    t++;
  }
} 
```

这是我收到的错误：

```
ulaga.cpp|29|error: 'pow' was not declared in this scope 
```

谁能解释为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:49:36.427

您需要转发声明该`pow`函数。像 -

```
....
void pow(int e, int b);

int main()
.... 
```

这里几乎没有什么问题。例如按`e`值**传递**。所以，`e`在 main 上与`pow`.

```
pow(e, b);
cout<<"Power:"<<e;  // This just prints the value taken from console
                    // And not the calculated power. 
```

要么使`pow`函数返回一个值（或）通过`e`引用传递。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T14:07:04.000

C++ 编译器按顺序依次解析您的代码文件。即第 1 行然后第 2 行然后第 3 行......等等。所以当编译器到达**`pow(e, b);`**你**`main()`**函数中的函数调用语句时，它还没有到达函数**`void pow(int e, int b)`**下面的**`main()`**函数定义，因此会给你错误。有两种方法可以解决这个问题。

1) 将**`void pow(int e, int b)`**（以及您计划从中调用的任何其他函数）的定义移到函数本身`main()`之上。**`main()`**这样，编译器已经解析并知道你的函数在到达**`pow(e, b);`**你的**`main()`**.

2）另一种方法是使用前向声明。这意味着在函数**`void pow(int e, int b);`**之前添加行。**`main()`**这告诉编译器前向声明给出的函数（在这种情况下**`void pow(int e, int b)`**）是在这个代码文件中定义的，但可以在文件中函数的定义代码之前调用。这是一种更好的方法，因为您的文件中可能有多个函数以不同的顺序相互调用，并且在文件中调用它们之前重新排列它们的定义可能并不容易。[这是关于前向声明](http://www.learncpp.com/cpp-tutorial/17-forward-declarations/)的好读物

您可能还希望通过引用您的函数来传递参数以获得正确的结果。即使用**`void pow(int& e, int& b)`**. 这将导致**`pow()`**函数中修改的值实际应用于整数`e`，`b`而不仅仅是它们的副本，这些副本将在执行完成后被丢弃**`pow()`**。这个关于在函数中通过引用传递参数的[链接](http://www.cplusplus.com/doc/tutorial/functions2/)很好地解释了这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-12T15:36:11.467

`#include <cmath>`只需在代码开头导入即可轻松解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:50:09.290

您需要使用函数*pow*的前向声明。或者只是将它的定义移到*主*函数上方。

# websocket - websocket 可以发送什么类型的消息？

> ID：11016191
> 
> 赞同：2
> 
> 时间：2012-06-13T13:45:03.993
> 
> 标签：websocket

我正在尝试使用 websocket 发送音频消息，我应该将音频流更改为哪种类型的消息，以便我可以使用套接字发送？如果我直接使用 websocket.send(audio)，我会得到一个错误“DOMException”，我应该把它改成二进制数据吗？如何？我对编程完全陌生，所以请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:11:00.363

Websocket API 并支持发送 Blob 和 ArrayBuffer 二进制类型。

如果您的浏览器支持[Mozilla 的音频数据 API](https://wiki.mozilla.org/Audio_Data_API)，那么您可以从音频标签中读出数据作为 ArrayBuffer 并发送。但是，此 API 不太可能标准化。

如果您的浏览器支持 Web Audio API（由 Google 提出），那么您还可以提取数据的 ArrayBuffer 并将其发送。Web Audio API 可能会得到更多的采用。这是[Web Audio API 的介绍](http://www.html5rocks.com/en/tutorials/webaudio/intro/)。[此常见问题解答](http://updates.html5rocks.com/2012/01/Web-Audio-FAQ)有一个答案，描述了如何使用 Web Audio API 从普通音频/视频标签中读取。

**更新**：

[这篇博](http://badassjs.com/post/25174050115/flac-js-aurora-and-the-future-of-web-audio)文中提到的[Aurora.js](https://github.com/ofmlabs/aurora.js)库看起来可能有助于处理音频和二进制数据。

# pdf - PDF 1.7 的语法。（BNF 或变体）

> ID：11016192
> 
> 赞同：2
> 
> 时间：2012-06-13T13:45:04.300
> 
> 标签：pdf, grammar, bnf, ebnf

我正在寻找 PDF 1.7 的语法（BNF 或变体）

绝对不能用谷歌搜索

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:35:35.707

我不知道任何形式的 PDF 文件格式的*正式*规范，语法形式，BNF 与否。

但我碰巧知道，目前致力于 PDF-2.0 规范的 ISO 技术委员会 171/SC2 的议程主题是*“来自特设委员会的更新：[...] iv. 用于验证 PDF 的文件格式语法文件（L. Rosenthol）”*，用于 2012 年 9 月 11 日至 12 日在柏林举行的下一次面对面会议。——我认为哪个议程项目*“有些人似乎对 PDF 语法的更正式描述感兴趣“* ... :-)

Leonard Rosenthol 是一名 Adob​​e PDF 高层，他经常在 Adob​​e 用户论坛上回答问题。也许在那里问一个问题是个好主意？很有可能，你会得到比这里更好的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:58:00.993

PDF 是一种非上下文无关的二进制格式。例如，在 PDF 中，您需要在解析流之前读取和解释二进制流的大小。

例子：

```
10 0 obj
<</Type /XObject
/Subtype /Image
/Width 260
/Height 52
/ColorSpace /DeviceRGB
/SMask 10 0 R
/BitsPerComponent 8
/Filter /FlateDecode
/Length 4570>> stream
--- insert binary data here ---
endstream
endobj 
```

无法判断您的二进制数据是否包含令牌`endstream`或`endobj`内部，因此您别无选择，只能在解析之前读取流的长度。

[BNF 只能用于上下文无关文法](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)，因此无法为 PDF 构造 BNF 文法。

在此处查看规范： [PDF 参考文档](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)

# php - 如何从具有多个值的字段中提取数据？

> ID：11016193
> 
> 赞同：0
> 
> 时间：2012-06-13T13:45:11.887
> 
> 标签：php, mysql, sql

IP.Nexus 将自定义字段放入一个表中，所有这些字段都混杂在一行中，并且有些方法可以提取正确的数据。

基本上我的自定义字段行如下所示：

```
a:2:{i:2;s:4:"Test";i:3;s:10:"Accounting";} 
```

我如何选择要拉的项目，因为我想只放一个项目而不是整行，是带分隔符还是字符串拆分器，因为我是 mySQL 的这一部分的新手

因为我想自己呼应广告，反之亦然以进行测试。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:54:19.623

它是一个使用函数的序列化数组，[`serialize()`](http://php.net/manual/en/function.serialize.php)因此您可以使用[`unserialize($YourString);`](http://www.php.net/manual/en/function.unserialize.php).

但是我看到您的字符串因反序列化而损坏，因为`s:4:`in`s:4:"advertising"`表示在`s:4:`4 个字符长的字符串之后预期`advertising`不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:49:50.177

数据库中的数据是序列化（json）形式的。你可以将它转换成简单的数组使用`unserialize`。例如;如果`$mystr`你的字符串写

```
$mystring=unserialize($mystring) 
```

你会得到这个字符串的普通数组你可以做

```
foreach($mystring as $str){
$ads[]=$str['advertising'];
} 
```

结果数组`$ads`将是您喜欢的简单数组形式的广告

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T13:47:23.380

由于这看起来像 JSon，因此您可以使用[PHP JSon](http://fr2.php.net/json)模块来解析 MySQL 中的每一行。

```
<?php

(...)
while (...) {
    $obj = json_decode($row);
    // do something with $obj
} 
```

# asp.net-mvc - asp.net mvc ef codefirst 存储库并发不起作用

> ID：11016194
> 
> 赞同：0
> 
> 时间：2012-06-13T13:45:11.840
> 
> 标签：asp.net-mvc, entity-framework, exception, concurrency, code-first

我有一个 asp.net mvc 应用程序，我在其中使用 EF CodeFirst 和存储库模式，并试图测试和捕获 DbUpdateConcurrencyException，但它似乎没有触发，尽管当我在一个浏览器中更新记录时，晚上已经在另一个打开，然后去另一个并尝试更新相同的记录，它允许我这样做。我在表上有一个 TimeStamp 列（称为 RowVersion），它会随着每次更新而改变，所以这是正确的，从观察 sql profiler 中我可以看到更新语句确实检查时间戳是传入的内容，所以我我没有想法，到目前为止我找不到任何可以真正帮助我的东西。如果有人能看到我做错了什么，请告诉我。谢谢！！

这是我的实体：

```
public class MyEntity : EntityBase
{
    public override int Id { get; set; }

    public DateTime? LastEdited { get; set; }

    [Timestamp] 
    public byte[] RowVersion { get; set; }
} 
```

这是存储库，它是基类/dbcontext：

```
public class MyEntityDataProvider : EfDataProviderBase<MyEntity>, IMyEntityDataProvider
{
    public MyEntityDataProvider (IDataContext dataContext) : base(dataContext) { }
}

public abstract class EfDataProviderBase<T> : DataProviderBase<T> where T : EntityBase
{
    public new DbDataContext DataContext
    { 
        get { return base.DataContext as DbDataContext; }
        protected set { base.DataContext = value; }
    }

    public EfDataProviderBase(IDataContext dataContext)
        : base(dataContext)
    {
        if (!(dataContext is DbDataContext)) throw new ArgumentException("Parameter 'dataContext' must be of type DbDataContext.");
    }

    public override T GetById(int id)
    {
        if (id < 1) return null;

        return this.DataContext.GetDbSet<T>().Find(id);
    }

    public override List<T> GetAll()
    {
        return this.DataContext.GetDbSet<T>().OrderBy(e => e.Id).ToList();
    }      

    public override void Insert(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");

        this.DataContext.GetDbSet<T>().Add(entity);
    }

    public override void Update(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");

        if (!this.DataContext.GetDbSet<T>().Local.Any(e => e.Id == entity.Id))
            this.DataContext.GetDbSet<T>().Attach(entity);
        this.DataContext.Entry(entity).State = EntityState.Modified;
    }
}

public class DbDataContext : DbContext, IDataContext
{
    public DbSet<MyEntity> MyEntities { get; set; }

    public DbSet<T> GetDbSet<T>() where T : EntityBase
    {
        Type entityType = typeof(T);

        if (entityType == typeof(User))
            return this.Users as DbSet<T>;
    }

     public void Commit()
     {
        this.SaveChanges();
     }
 }

public abstract class DataProviderBase<T> : IDataProvider<T> where T: EntityBase
{
    public IDataContext DataContext { get; protected set; }

    public DataProviderBase(IDataContext dataContext)
    {
        if (dataContext == null) throw new ArgumentNullException("dataContext");

        this.DataContext = dataContext;
    }

    public abstract T GetById(int id);

    public abstract List<T> GetAll();

    public void Save(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");

        if (entity.IsNew)
        {
            this.Insert(entity);
        }
        else if (entity.IsDeleted)
        {
            this.Delete(entity);
        }
        else
        {
            this.Update(entity);
        }
    }

    public abstract void Insert(T entity);

    public abstract void Update(T entity);
} 
```

这是我的控制器操作：

```
 [HttpPost]
    [ValidateAntiForgeryToken()]
    public ActionResult UpdateViewModel(ViewModel model)
    {
        if (ModelState.IsValid)
        {
            try
            {
                MyEntity current = this.MyEntityDataProvider.GetById(model.Id);

                current.LastEdited = DateTime.UtcNow;
                current.RowVersion = model.Timestamp; // should have original timestamp, getting from hidden field on view

                this.MyEntityDataProvider.Save(current);
                this.DataContext.Commit(); // one dbcontext per http request, injected by ninject

                return Json(new { success = "Saved!" });
            }
            catch (DbUpdateConcurrencyException)
            {
                ModelState.AddModelError("", "This record has been edited by an another person since you have opened it - please close and re-open to attempt your changes again.");
            }
        }

        return Json(new { errors = GetErrorsFromModelState() });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:36:37.537

早上好朋友。您应该添加有关要[控制并发性](http://msdn.microsoft.com/en-us/data/gg193958.aspx)的属性的信息。

例子：

```
[ConcurrencyCheck]
     public int Code {get; set;} 
```

# c# - 如何从C#中的字符串列表中删除重复值

> ID：11016196
> 
> 赞同：-4
> 
> 时间：2012-06-13T13:45:14.553
> 
> 标签：c#

我使用了这段代码：

```
List<string> lists=new List<string>("apple","orange","banana","apple","mang0","orange");
string names;
names=lists.Distinct() 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:47:59.800

不，变量`names`必须是一个集合。该`Distinct`方法返回一个枚举器，因此您可能希望枚举结果并将其实现为一个列表：

```
List<string> names = lists.Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:48:10.267

您可以对列表进行排序，然后检查两个和两个：

```
list.Sort();
Int32 index = 0;
while (index < list.Count - 1)
{
  if (list[index] == list[index + 1])
    list.RemoveAt(index);
else
    index++;
} 
```

# xampp - 使用计算机名访问 xampp

> ID：11016205
> 
> 赞同：-1
> 
> 时间：2012-06-13T13:45:42.193
> 
> 标签：xampp, computer-name

我已经在我的新笔记本上安装了 xammp，我可以使用`localhost`或使用计算机名访问它，`127.0.0.1`但不能在使用计算机名时访问它。使用计算机名称以前也可以在我的台式电脑上使用。我已经尝试禁用没有帮助的防火墙 - 有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:57:57.960

除了 Dan 的回答，它解释了为什么它不起作用，这里有一个修复。

我收到的错误消息如下所示。是德文的，不过没关系。它说有一个新的安全概念。您只能从本地网络访问。它还说如何更改它。

> 祖格里夫维维格特！
> 
> Neues XAMPP Sicherheitskonzept：
> 
> Der Zugriff auf das angeforderte Objekt ist nur aus dem lokalen Netzwerk möglich。
> 
> Diese Einstellung kann 在 der Datei "httpd-xampp.conf" angepasst werden。
> 
> Sofern Sie 死了 für eine Fehlfunktion des Servers 停顿，通知 Sie bitte den Webmaster hierüber。错误 403

在您的 xampp 文件夹中有一个名为的文件，`httpd-xampp.conf`在我的情况下它在这里：

> C:\xampp\apache\conf\extra\httpd-xampp.conf

在最底部的这个文件中找到它说的位置

```
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/8 
    ErrorDocument 403 /error/HTTP_XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

并注释掉这些`Deny from all and Allow`行：

```
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
#    Deny from all
#    Allow from 127.0.0.0/8 
    ErrorDocument 403 /error/HTTP_XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

现在重新启动apache，它应该可以工作了。

**编辑：**

您还可以将主机名添加为 Allow 指令：

```
Allow from 127.0.0.0/8
Allow from pc001.MYCOMPANY.local 
```

从命令行找出您的完整主机名，包括域：

```
C:\>hostname
pc001

C:\>ping pc001
Ping pc001.MYCOMPANY.local [...] 
```

这可能是要走的路！这比向所有人敞开大门要好。

更多信息可以在[Apache 文档](http://httpd.apache.org/docs/2.0/howto/auth.html)中找到。

* * *

一个警告：现在可以从网络中的每台机器访问您的 xampp 安装（网络服务器、数据库等）。**这是一个安全风险**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:49:23.870

首先要检查的是您的计算机名称解析为什么。

转到命令提示符并比较以下两个命令的输出。

```
ping computername

ping localhost 
```

您可能会发现 localhost 解析为 127.0.0.1 （如果您也使用 IPv6，则为 ::1），而 computername 将解析为您的网卡 IP 地址。

如果是这样，请确保 XAMPP 正在侦听所有 IP 地址，或者如果要保持静态，请添加您的计算机 IP。

您可能会添加一个将计算机名解析为 127.0.0.1 的主机条目，但我不会亲自推荐该路由。

# android - 无法在示例应用程序中的设备上注册 C2DM

> ID：11016208
> 
> 赞同：1
> 
> 时间：2012-06-13T13:45:49.220
> 
> 标签：android, google-app-engine, android-c2dm

我不能强制使用 android + appengine 示例在任何设备上工作。在模拟器上出现了一些问题，但现在一切正常。我一直在设备上“注册/注销失败：电子邮件@地址”。[我已经完成了https://developers.google.com/eclipse/docs/appeng_android_run_debug](https://developers.google.com/eclipse/docs/appeng_android_run_debug)的每一步，但无论如何都不会更好：/

# c# - 构建一个简单的 RSS 阅读器，检索内容

> ID：11016213
> 
> 赞同：4
> 
> 时间：2012-06-13T13:45:56.257
> 
> 标签：c#, rss, syndication-feed

我正在尝试使用[`SyndicationFeed`](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)类制作一个简单的 RSS 阅读器。

有一些标准标签，例如`<title>`, `<link>`, `<description>`... 它们没有问题。

但是还有一些其他的标签。例如，在[这个由 WordPress 创建的 feed](http://feed.2barnamenevis.com/2barnamenevis)中，有`<content:encoded>`标签。我认为其他网站的内容部分可能还有其他标签。对？

我想知道，如何找到每个帖子的主要内容，有什么标准吗？我应该寻找哪些标签？

（例如，一个网站可能使用`<content:encoded>`但其他一些只是使用`<description>`或有人使用另一个标准......我不知道如何检索帖子的**主要**内容）

PS：我正在使用此代码来测试我的简单 RSS 阅读器：

```
 var reader = XmlReader.Create("http://feed.2barnamenevis.com/2barnamenevis");
        var feed = SyndicationFeed.Load(reader);

        string s = "";
        foreach (SyndicationItem i in feed.Items)
        {
            s += i.Title.Text + "<br />" + i.Summary.Text + "<br />" + i.PublishDate.ToString() + "<br />";
            foreach (SyndicationElementExtension extension in i.ElementExtensions)
            {
                XElement ele = extension.GetObject<XElement>();
                s += ele.Name + " :: " + ele.Value + "<br />";
            }
            s += "<hr />";
        }
        return s; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:48:46.523

根据我们在评论中的讨论，我可能会建议与第 3 方供应商合作，而不是从头开始构建它 - [Argotic](http://argotic.codeplex.com/)和[RSS.NET](http://www.rssdotnet.com/)看起来都很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:45:12.027

取决于你想支持什么。内容元素不是 RSS2.0 的一部分，但属于 Atom (rss 4287)。

阅读 RSS2.0 规范[http://cyber.law.harvard.edu/rss/rss.html#hrelementsOfLtitemgt](http://cyber.law.harvard.edu/rss/rss.html#hrelementsOfLtitemgt) 阅读 Atom 规范[https://www.rfc-editor.org/rfc/rfc4287](https://www.rfc-editor.org/rfc/rfc4287)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:40:40.733

我找到[了 Argotic](http://argotic.codeplex.com/) Syndication Framework（感谢 JoeEnos）。

Argotic 有许多扩展，可用于处理非标准元素。

例如，您可以`Argotic.Extensions.Core.SiteSummaryContentSyndicationExtension`用于检索`<content:encoded>`. [你可以在这里](http://frederictorres.blogspot.com/2011/01/reading-rss-feed-with-argotic.html)看到一个例子。（如果该示例返回`null`内容，您应该简单地使用`MyRssItem.Description`）

其他一些有用的扩展是`WellFormedWebCommentsSyndicationExtension`（用于检索评论提要 url）和`SiteSummarySlashSyndicationExtension`（用于检索评论计数）。

# jquery - Grooveshark.com 类似搜索结果过滤器

> ID：11016216
> 
> 赞同：1
> 
> 时间：2012-06-13T13:46:02.757
> 
> 标签：jquery, ajax, autocomplete

在我的网页中，我有一个从数据库中提取的表。我希望当用户在搜索框中键入关键字时动态过滤此表。[Grooveshark.com](http://Grooveshark.com)正在实现类似的功能

实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:23:23.953

看看这个 jQuery 插件：[https ://github.com/riklomas/quicksearch](https://github.com/riklomas/quicksearch)

我使用它，它制作精良且易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:00:35.350

你想要什么叫做自动完成，我不知道你使用的是什么 ajax 框架（jquery、原型、mootools 等），但 jquery 内置了一个非常灵活的框架。( [http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/) ) 看看右边的例子，你可能要密切注意“远程缓存”。如果您不使用查询，那么我敢肯定，如果您用谷歌搜索“ajax 搜索自动完成”这个词，您会发现几乎适用于任何框架的插件。（用您喜欢的 ajax 框架替换 ajax）

希望这可以帮助。

# wcf - WCF 在 jquery ajax 调用上返回错误请求

> ID：11016217
> 
> 赞同：1
> 
> 时间：2012-06-13T13:46:08.207
> 
> 标签：wcf, web-services, jquery

我有一个带有一个 GET 和一个 POST 方法的 WCF 服务。GET 运行良好。

前端是一个简单的 HTML 页面，它使用 jquery ajax 调用 WCF 的 GET 和 POST 方法。

问题是我收到了错误的请求响应。我已阅读所有相关帖子，据我所知，我认为一切都井井有条。

资料来源：

我的合同：

```
[OperationContract]
        [WebGet(UriTemplate = "schedule?week={week}",
                ResponseFormat = WebMessageFormat.Json,
                BodyStyle = WebMessageBodyStyle.Bare)]
        [Description("Return the food schedule; specify the dates to include.")]
        WeeklySchedule GetSchedule(int week);

        [OperationContract]
        [WebInvoke(UriTemplate="writeweek", Method = "POST", 
                    RequestFormat=WebMessageFormat.Json,
                    ResponseFormat=WebMessageFormat.Json,
                    BodyStyle=WebMessageBodyStyle.Bare)]
        [Description("Write or Update a week schedule via json data with POST")]
        int WriteWeek(string jsonwk); 
```

我有一个单独的数据访问层，它在数据库中进行写入/读取并且工作正常。

我关于 ajax 调用的页面来源：

```
 function ajaxGetWeek(wk)
    {
        $.ajax({
            cache: false,
            type: "GET",
            processData: false,
            url: 'http://appsrv01/food/svc/foodland.svc/schedule?week='+ wk,
            dataType: "json",
            success: function(data) {
                    GetWeekSucceeded(data);
            },
            error: function (xhr,status,error) {
                alert(error);
            }
        }); 
```

这很好用，它返回 json 格式，我能够以我的形式解析它。

返回错误请求的 POST ajax 调用：

```
function SubmitFood() {
        var features = new Object();    // Create empty javascript object
        features["weeknumber"] = currentWeek;
        $("#TheForm textarea").each(function() {           // Iterate over inputs
            features[$(this).attr("name")] = $(this).val();  // Add each to features object
        });         
        var jsontxt = JSON.stringify(features);
        $.ajax({
            type: "POST",
            url: 'http://appsrv01/food/svc/foodland.svc/writeweek',
            data: jsontxt,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function(postresult) {
                    WriteWeekSucceeded(postresult);
            },
            error: function (xhr,status,error) {
                alert(error);
            }
        });

    } 
```

以上返回类似：

```
{"weeknumber":24,"DishMon":"sdfadsf","DishTue":"asdfasd","DishWed":"fasdfa","DishThu":"sdfasdfas","DishFri":"dfasdf"} 
```

我在我的 VS 解决方案中设置了断点，但它甚至无法调用该方法。

我的 app.config：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true"/>
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="FoodLandService.FoodLandService">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:6969/FoodLand"/>
          </baseAddresses>
        </host>
        <endpoint address="" 
                  binding="webHttpBinding" 
                  contract="ContractsClass.IFoodLandService" 
                  behaviorConfiguration="Web"  />
        <endpoint address="mex" 
                  binding="mexHttpBinding" 
                  contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="Web">
          <webHttp helpEnabled="true"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

网络配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="false" targetFramework="4.0" />
    <customErrors mode="Off"/>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

和 foodland.svc：

```
<%@ ServiceHost Service="FoodLandService.FoodLandService"
     Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

我的服务来源：

```
public class FoodLandService : ContractsClass.IFoodLandService
{
    public WeeklySchedule GetSchedule(int week)
    {
        FoodClassDB fd = new FoodClassDB();
        return fd.ReadWeekDB(week);
    }

    public int WriteWeek(string jsonwk)
    {
        FoodClassDB fd = new FoodClassDB();
        return fd.WriteWeekDB(jsonwk);
    }
} 
```

json 编码很好，我找不到错误的原因。

# c++ - 什么是内联命名空间？

> ID：11016220
> 
> 赞同：378
> 
> 时间：2012-06-13T13:46:13.913
> 
> 标签：c++, namespaces, c++11, inline-namespaces

C++11 允许`inline namespace`s，其所有成员也自动包含在`namespace`. 我想不出任何有用的应用——有人可以给出一个简短的例子来说明`inline namespace`需要 an 并且它是最惯用的解决方案的情况吗？

（另外，我不清楚当 a在一个而不是所有声明`namespace`中声明时会发生什么`inline`，这些声明可能存在于不同的文件中。这不是在自找麻烦吗？）

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2012-06-13T15:35:00.963

内联命名空间是类似于[符号版本控制](https://stackoverflow.com/questions/2856438/how-can-i-link-to-a-specific-glibc-version)的库版本控制功能，但纯粹在 C++11 级别（即跨平台）实现，而不是特定二进制可执行格式的功能（即特定于平台）。

它是一种机制，库作者可以通过该机制使嵌套命名空间看起来并像其所有声明都在周围的命名空间中一样（内联命名空间可以嵌套，因此“更多嵌套”的名称一直渗透到第一个非-inline 命名空间，并且看起来和行为就好像它们的声明也在两者之间的任何命名空间中一样）。

例如，考虑`vector`. 如果我们从 C++ 开始就有内联命名空间，那么在 C++98 中，标头`<vector>`可能看起来像这样：

```
namespace std {

#if __cplusplus < 1997L // pre-standard C++
    inline
#endif

    namespace pre_cxx_1997 {
        template <class T> __vector_impl; // implementation class
        template <class T> // e.g. w/o allocator argument
        class vector : __vector_impl<T> { // private inheritance
            // ...
        };
    }
#if __cplusplus >= 1997L // C++98/03 or later
                         // (ifdef'ed out b/c it probably uses new language
                         // features that a pre-C++98 compiler would choke on)
#  if __cplusplus == 1997L // C++98/03
    inline
#  endif

    namespace cxx_1997 {

        // std::vector now has an allocator argument
        template <class T, class Alloc=std::allocator<T> >
        class vector : pre_cxx_1997::__vector_impl<T> { // the old impl is still good
            // ...
        };

        // and vector<bool> is special:
        template <class Alloc=std::allocator<bool> >
        class vector<bool> {
            // ...
        };

    };

#endif // C++98/03 or later

} // namespace std 
```

根据 的值`__cplusplus`，选择一种或另一种`vector`实现。如果您的代码库是在 C++98 之前的版本中编写的，并且您在升级编译器时发现 C++98 版本`vector`给您带来了麻烦，那么“您所要做的就是找到对`std::vector`in您的代码库并将它们替换为`std::pre_cxx_1997::vector`.

`std::vector`下一个标准来了，STL 供应商只是再次重复这个过程，为with `emplace_back`support（需要 C++11）引入一个新的命名空间并内联那个 iff `__cplusplus == 201103L`。

好的，那么为什么我需要一个新的语言功能呢？我已经可以执行以下操作以获得相同的效果，不是吗？

```
namespace std {

    namespace pre_cxx_1997 {
        // ...
    }
#if __cplusplus < 1997L // pre-standard C++
    using namespace pre_cxx_1997;
#endif

#if __cplusplus >= 1997L // C++98/03 or later
                         // (ifdef'ed out b/c it probably uses new language
                         // features that a pre-C++98 compiler would choke on)

    namespace cxx_1997 {
        // ...
    };
#  if __cplusplus == 1997L // C++98/03
    using namespace cxx_1997;
#  endif

#endif // C++98/03 or later

} // namespace std 
```

根据 的值`__cplusplus`，我得到一个或另一个实现。

你几乎是正确的。

考虑以下有效的 C++98 用户代码（在 C++98 中已经允许完全特化存在于命名空间中的模板`std`）：

```
// I don't trust my STL vendor to do this optimisation, so force these 
// specializations myself:
namespace std {
    template <>
    class vector<MyType> : my_special_vector<MyType> {
        // ...
    };
    template <>
    class vector<MyOtherType> : my_special_vector<MyOtherType> {
        // ...
    };
    // ...etc...
} // namespace std 
```

这是完全有效的代码，其中用户为一组类型提供自己的向量实现，她显然知道比在 STL（她的副本）中找到的更有效的实现。

*但是*：当特化一个模板时，你需要在它被声明的命名空间中这样做。标准说这`vector`是在命名空间中声明的`std`，所以这是用户理所当然地期望特化类型的地方。

此代码适用于非版本化命名空间`std`，或 C++11 内联命名空间功能，但不适用于使用的版本控制技巧，因为这暴露了未直接定义`using namespace <nested>`的真正命名空间的实现细节。`vector``std`

还有其他漏洞可以用来检测嵌套命名空间（请参阅下面的注释），但内联命名空间会将它们全部塞住。这就是它的全部。对未来非常有用，但 AFAIK 标准并没有为它自己的标准库规定内联命名空间名称（不过我很想被证明是错误的），所以它只能用于第三方库，而不是标准本身（除非编译器供应商同意命名方案）。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-06-13T13:52:53.337

[http://www.stroustrup.com/C++11FAQ.html#inline-namespace](http://www.stroustrup.com/C++11FAQ.html#inline-namespace)（由 Bjarne Stroustrup 编写和维护的文档，您认为他应该了解大多数 C++11 功能的动机。 )

据此，它允许版本控制以实现向后兼容性。您定义了多个内部命名空间，并创建了最新的一个`inline`。或者无论如何，不​​关心版本控制的人的默认设置。我想最新的版本可能是尚未默认的未来版本或尖端版本。

给出的例子是：

```
// file V99.h:
inline namespace V99 {
    void f(int);    // does something better than the V98 version
    void f(double); // new feature
    // ...
}

// file V98.h:
namespace V98 {
    void f(int);    // does something
    // ...
}

// file Mine.h:
namespace Mine {
#include "V99.h"
#include "V98.h"
}

#include "Mine.h"
using namespace Mine;
// ...
V98::f(1);  // old version
V99::f(1);  // new version
f(1);       // default version 
```

我没有立即明白你为什么不把`using namespace V99;`namespace 放在里面`Mine`，但我不必完全理解用例就可以在委员会的动机上接受 Bjarne 的话。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-06-21T01:11:23.773

除了所有其他答案。

内联命名空间可用于编码 ABI 信息或符号中函数的版本。正是由于这个原因，它们被用来提供向后 ABI 兼容性。内联命名空间允许您在不改变 API 的情况下将信息注入错位名称 (ABI)，因为它们仅影响链接器符号名称。

考虑这个例子：

假设您编写了一个函数，该函数`Foo`接受一个对象的引用，但`bar`什么也不返回。

在 main.cpp 中说

```
struct bar;
void Foo(bar& ref); 
```

如果在将其编译为对象后检查此文件的符号名称。

```
$ nm main.o
T__ Z1fooRK6bar 
```

> 链接器符号名称可能会有所不同，但它肯定会在某处对函数和参数类型的名称进行编码。

现在，它可能被`bar`定义为：

```
struct bar{
   int x;
#ifndef NDEBUG
   int y;
#endif
}; 
```

根据构建类型，`bar`可以引用具有相同链接器符号的两种不同类型/布局。

为了防止这种行为，我们将结构包装`bar`到内联命名空间中，根据构建类型，链接器符号`bar`将有所不同。

所以，我们可以这样写：

```
#ifndef NDEBUG
inline namespace rel { 
#else
inline namespace dbg {
#endif
struct bar{
   int x;
#ifndef NDEBUG
   int y;
#endif
};
} 
```

现在，如果您查看每个对象的对象文件，您将使用发布版本构建一个对象文件，而另一个使用调试标志构建一个对象文件。您会发现链接器符号也包含内联命名空间名称。在这种情况下

```
$ nm rel.o
T__ ZROKfoo9relEbar
$ nm dbg.o
T__ ZROKfoo9dbgEbar 
```

> 链接器符号名称可能不同。

注意符号名称中`rel`和的存在。`dbg`

现在，如果您尝试将调试与发布模式或反之亦然链接，您将收到与运行时错误相反的链接器错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-27T20:24:45.500

我实际上发现了内联命名空间的另一种用途。

使用[Qt](https://en.wikipedia.org/wiki/Qt_(software))，您可以获得一些额外的、不错的特性 using [`Q_ENUM_NS`](https://doc.qt.io/qt-5/qobject.html#Q_ENUM_NS)，这反过来又要求封闭的命名空间有一个元对象，它用`Q_NAMESPACE`. 然而，为了工作，*在同一个文件中*`Q_ENUM_NS`必须有一个对应的⁽¹⁾。而且只能有一个，否则会出现重复的定义错误。这实际上意味着您的所有枚举都必须在同一个标​​题中。呸。`Q_NAMESPACE`

 ****或者...***您可以使用内联命名空间。在 an 中隐藏枚举`inline namespace`会导致元对象具有不同的错位名称，而在用户看来，额外的命名空间并不存在⁽²⁾。

因此，如果您出于某种原因需要这样做，它们对于将内容拆分为多个*看起来像一个命名空间的子命名空间很有用。*当然，这类似于`using namespace inner`在外部命名空间中写入，但没有两次写入内部命名空间的名称的[DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)违规。

* * *

1.  实际上比这更糟。它必须在同一组大括号中。

2.  除非您尝试在不完全限定元对象的情况下访问元对象，但元对象几乎从未直接使用过。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-28T13:50:44.367

因此，总结要点，`using namespace v99`但`inline namespace`并不相同，前者是在 C++11 中引入专用关键字（inline）之前版本库的一种解决方法，它解决了使用问题`using`，同时提供相同的版本控制功能。使用`using namespace`过去会导致 ADL 出现问题（尽管 ADL 现在似乎遵循`using`指令），并且如果在真正的命名空间（其名称为用户不会也不应该知道，即用户必须使用 B::abi_v2:: 而不仅仅是 B:: 来解决专业化问题）。

```
//library code
namespace B { //library name the user knows
    namespace A { //ABI version the user doesn't know about
        template<class T> class myclass{int a;};
    }
    using namespace A; //pre inline-namespace versioning trick
} 

// user code
namespace B { //user thinks the library uses this namespace
    template<> class myclass<int> {};
} 
```

这将显示静态分析警告`first declaration of class template specialization of 'myclass' outside namespace 'A' is a C++11 extension [-Wc++11-extensions]`。但是，如果您将命名空间 A 内联，则编译器会正确解析特化。虽然，使用 C++11 扩展，问题就消失了。

**`using`使用;时无法解析行外定义 它们必须在嵌套/非嵌套扩展命名空间块中声明**（这意味着用户需要再次知道 ABI 版本，如果出于某种原因允许他们提供自己的函数实现）。

```
#include <iostream>
namespace A {
    namespace B{
        int a;
        int func(int a);
        template<class T> class myclass{int a;};
        class C;
        extern int d;
    } 
    using namespace B;
} 
int A::d = 3; //No member named 'd' in namespace A
class A::C {int a;}; //no class named 'C' in namespace 'A' 
template<> class A::myclass<int> {}; // works; specialisation is not an out-of-line definition of a declaration
int A::func(int a){return a;}; //out-of-line definition of 'func' does not match any declaration in namespace 'A'
namespace A { int func(int a){return a;};} //works
int main() {
    A::a =1; // works; not an out-of-line definition
} 
```

使 B 内联时问题就消失了。

命名空间的其他功能`inline`是允许库编写者提供对库的透明更新 1) 无需强制用户使用新的命名空间名称重构代码 2) 防止缺乏冗长 3) 提供与 API 无关的细节的抽象，同时 4) 提供与使用非内联命名空间相同的有益链接器诊断和行为。假设您正在使用一个库：

```
namespace library {
    inline namespace abi_v1 {
        class foo {
        } 
    }
} 
```

它允许用户在`library::foo`不需要知道或在文档中包含 ABI 版本的情况下调用，看起来更干净。使用`library::abiverison129389123::foo`会看起来很脏。

当对 进行更新时`foo`，即向类添加新成员时，它不会影响 API 级别的现有程序，因为它们不会已经在使用该成员，并且内联命名空间名称的更改不会改变 API 级别的任何内容因为`library::foo`仍然可以工作。

```
namespace library {
    inline namespace abi_v2 {
        class foo {
            //new member
        } 
    }
} 
```

但是，对于与其链接的程序，因为内联名称空间名称像常规名称空间一样被分解为符号名称，因此更改对链接器来说是不透明的。因此，如果应用程序没有重新编译而是与新版本的库链接，它会出现符号`abi_v1`未找到错误，而不是实际链接然后由于ABI不兼容而导致运行时出现神秘的逻辑错误。添加新成员会由于类型定义的变化而导致 ABI 兼容性，即使它在编译时（API 级别）不会影响程序。

在这种情况下：

```
namespace library {
    namespace abi_v1 {
        class foo {
        } 
    }

    inline namespace abi_v2 {
        class foo {
            //new member
        } 
    }
} 
```

就像使用 2 个非内联命名空间一样，它允许链接新版本的库，而无需重新编译应用程序，因为`abi_v1`它将被其中一个全局符号破坏，并且它将使用正确的（旧）类型定义。但是，重新编译应用程序会导致引用解析为`library::abi_v2`.

Using`using namespace`的功能比 using 少`inline`（因为行外定义无法解决），但提供了与上述相同的 4 个优点。但真正的问题是，既然现在有专门的关键字来解决问题，为什么还要继续使用解决方法。这是更好的做法，不那么冗长（必须更改 1 行代码而不是 2 行），并使意图明确。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-02T08:01:10.120

内联命名空间也可用于提供对命名空间内功能/名称的细粒度访问。

这用于[`std::literals`](https://en.cppreference.com/w/cpp/symbol_index/string_literals). `literals`std 中的命名空间都是内联命名空间，因此：

*   如果您在`using namespace std;`某处使用，您还可以访问标准中所有用户定义的文字。
*   但是，如果您只需要本地代码中的一组 udl，您也可以这样做`using namespace std::literals::string_literals;`，您将*只*获得该命名空间中定义的 udl 符号。

对于您想要访问非限定符号（udl、运算符等）的符号，这似乎是一种有用的技术，您可以将它们捆绑在内联命名空间中，以便您可以仅在该（子）命名空间上执行特定使用整个库的命名空间。*

# sql-server - SQL Server 2012 将 CSV 导入映射列

> ID：11016223
> 
> 赞同：4
> 
> 时间：2012-06-13T13:46:18.237
> 
> 标签：sql-server, sql-server-2012, csv-import

我目前正在尝试将大约 10000 行（来自 CSV 文件）导入现有表。

我只有 1 列要导入，但在我的表中我有另一个名为的列`TypeId`，我需要将其设置为静态值，即`99E05902-1F68-4B1A-BC66-A143BFF19E37`.

所以我需要类似的东西

```
INSERT INTO TABLE ([Name], [TypeId])
Values (@Name (CSV value), "99E05902-1F68-4B1A-BC66-A143BFF19E37") 
```

任何例子都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:17:20.203

如上所述，将数据导入到临时表中，然后将值插入到实际表中

```
DECLARE @TempTable TABLE (Name nvarchar(max))

 BULK INSERT @TempTable 
 FROM ‘C:\YourFilePath\file.csv’
 WITH ( FIELDTERMINATOR = ‘,’,
 ROWTERMINATOR = ‘\n’
)

INSERT INTO TABLE ([Name], [TypeId])
Select Name,'99E05902-1F68-4B1A-BC66-A143BFF19E37' from @TempTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:18:39.113

如果您准备好使用工具来执行此操作，则可以使用 SQL Server 导入和导出向导。您可以从“开始”菜单、SQL Server Management Studio、SQL Server Data Tools (SSDT) 或命令提示符处启动 SQL Server 导入和导出向导。您可以使用此工具非常轻松地映射目标列和源列。稍后，如果您希望更新另一列，您可以使用代码来完成。

# wcf - REST WCF 服务返回 XML 响应但不返回 JSON 响应

> ID：11016228
> 
> 赞同：3
> 
> 时间：2012-06-13T13:46:24.143
> 
> 标签：wcf

我是 WCF 的新手，所以我认为这是非常基本的。我有一个简单的方法，它返回一个“订单”对象。使用默认 XML 时它工作得很好，但是，当我应用

```
ResponseFormat = WebMessageFormat.Json 
```

属性，返回失败`JSON`。代码成功执行并点击返回行，但随后立即再次调用该方法，最后在浏览器返回错误之前第三次调用，说明**与 localhost 的连接已中断**。

当我删除 时`ResponseFormat = WebMessageFormat.Json`，调用该方法并返回 XML 就好了。不确定我是否缺少 JSON。

**IProductSales.cs**

```
namespace ProductsSalesService
{
    [ServiceContract(Name = "ProductsSales")]
    public interface IProductsSales
    {

        [OperationContract]
        [WebGet(UriTemplate = "Orders/{orderID}", ResponseFormat = WebMessageFormat.Json)]
        [Description("Returns the details of an order")]
        SalesOrderHeader GetOrder(string orderID);

    }
} 
```

**产品销售**

```
public SalesOrderHeader GetOrder(string orderID)
{
    SalesOrderHeader header = null;

    try
    {
        int id = Convert.ToInt32(orderID);
        AdventureWorksEntities database = new AdventureWorksEntities();

            header = (from order in database.SalesOrderHeaders
                      where order.SalesOrderID == id
                      select order).FirstOrDefault();

    }
    catch
    {
        throw new WebFaultException(HttpStatusCode.BadRequest);
    }

    return header;
} 
```

我正在研究 WCF 书中的一个示例，所以他们让我构建了一个小型控制台应用程序作为主机，所以这是我为主机客户端提供的 app.config 文件。

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="AdventureWorksEntities" connectionString="metadata=res://*/ProductsSalesModel.csdl|res://*/ProductsSalesModel.ssdl|res://*/ProductsSalesModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=BINGBONG;Initial Catalog=AdventureWorks;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup><system.serviceModel>
    <services>
      <service name="ProductsSalesService.ProductsSales">
        <endpoint address="http://localhost:8000/Sales" binding="webHttpBinding"
          bindingConfiguration="" name="ProductsSalesService.ProductsSales"
          contract="ProductsSalesService.IProductsSales" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

最后，这只是主机客户端代码。

```
public class Program
    {
        static void Main(string[] args)
        {
            WebServiceHost host = new WebServiceHost(typeof(ProductsSalesService.ProductsSales));
            host.Open();
            Console.WriteLine("Service running");
            Console.WriteLine("Press ENTER to stop the service");
            Console.ReadLine();
            host.Close();
        }
    } 
```

因此，当我去`http://localhost:8000/Sales/Orders/43659`拉起我的订单时，它点击了三次，并且页面在 Chrome 中取消，并出现以下错误：

> 此网页不可用 与 localhost 的连接已中断。以下是一些建议： 稍后重新加载此网页。检查您的互联网连接。重新启动您可能正在使用的任何路由器、调制解调器或其他网络设备。在防火墙或防病毒软件的设置中将 Google Chrome 添加为允许的程序。如果它已经是允许的程序，请尝试将其从允许的程序列表中删除并重新添加。如果您使用代理服务器，请检查您的代理设置或联系您的网络管理员以确保代理服务器正常工作。如果您认为您不应该使用代理服务器，请调整您的代理设置：转到扳手菜单 > 设置 > 显示高级设置... > 更改代理设置...
> 
> > LAN 设置并取消选中“为 LAN 使用代理服务器”复选框。错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。

如果我删除`WebMessageFormat.Json`一切正常！

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:59:08.000

对于初学者，请尝试 WCF 跟踪/日志记录，看看它是否能说明问题。

将其放入服务器的配置文件中（`<configuration>`元素内的某处）：-

```
<system.diagnostics>
 <sources>
  <source name="System.ServiceModel" switchValue="Error" propagateActivity="true">
    <listeners>
      <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="C:\Temp\server.svclog"/>
    </listeners>
  </source>
  <source name="System.ServiceModel.MessageLogging">
    <listeners>
      <add name="messages"
      type="System.Diagnostics.XmlWriterTraceListener"
      initializeData="C:\Temp\server_messages.svclog" />
    </listeners>
  </source>
 </sources>
</system.diagnostics> 
```

并将其放入`<system.serviceModel>`元素中：-

```
<diagnostics>
  <messageLogging
       logEntireMessage="true"
       logMalformedMessages="false"
       logMessagesAtServiceLevel="true"
       logMessagesAtTransportLevel="false"
       maxMessagesToLog="3000"
       maxSizeOfMessageToLog="2000"/>
</diagnostics> 
```

尝试再次点击您的服务并检查此（希望）生成的 .svclog 文件以寻找线索。这些文件将在“服务跟踪查看器”工具中打开 - 如果没有，它可以从 MS 下载（我认为是 Win SDK 的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-22T11:40:31.420

虽然我的错误实际上是无关的，但这是我在调查我的问题时发现的第一篇文章，即我的服务失败并且我看到错误**连接已中断**。

我的错是因为我从我的`WebGet`方法输出的类具有具有属性的`DataContract`属性，但我没有`Set`为每个属性添加访问器（因为我认为它们只是输出，我没有看到重点） .

将跟踪添加到我的配置文件中很快发现错误是没有`Set`访问器，所以我`private set`为每个`DataContract`属性添加了访问器，现在一切都按预期工作。

*我在这里添加了这个，以防其他人遵循相同的搜索路径并遇到相同的问题*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:22:16.850

这行代码将在不考虑配置的情况下构建服务主机，因此您将拥有服务，但它会侦听不同的 URL。

```
WebServiceHost host = new WebServiceHost(typeof(ProductsSalesService.ProductsSales)); 
```

在下面添加基地址`new WebServiceHost`和代码：

```
 WebChannelFactory<ProductsSalesService.IProductsSales> cf = 
    new WebChannelFactory<ProductsSalesService.IProductsSales>("ProductsSalesService.ProductsSales");
ProductsSalesService.IProductsSales channel = cf.CreateChannel(); 
```

在此处查看完整代码 - [http://msdn.microsoft.com/en-us/library/bb919583](http://msdn.microsoft.com/en-us/library/bb919583)

# android - 寻找一个通用的方法来初始化杂项视图对象

> ID：11016231
> 
> 赞同：1
> 
> 时间：2012-06-13T13:46:25.880
> 
> 标签：android, object, initialization

我有一个选项卡设置为使用 API8 max 的活动扩展。在此选项卡中，我正在初始化一些`TextView`,`EditText`和`SeekBar`对象，如下所示。

我正在寻找一种更通用的方法，以便能够使用单一方法来初始化各种对象类型（即`TextView`,`EditText`等`SeekBar`），传递`View`类型和`id`作为参数，而不是每种`View`类型使用一个方法。

简而言之，如何用一个通用方法替换两个方法 setTextViewObjects 和 setSeekbarObjects ？

```
private void initView(){
    mUnits = setTextViewObjects(R.id.textView16);
    mSeekBar = setSeekBarObjects(R.id.seek);
}

/**
 * Set TextView objects
 */
private TextView setTextViewObjects(int id){
    return (TextView) findViewById(id );
}

/**
 * Set Seekbar objects
 */
private SeekBar setSeekBarObjects(int id){
    return (SeekBar) findViewById(id );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:50:45.090

这应该做你想要的：

```
@SuppressWarnings("unchecked")
private <V extends View> V findView(int id) {
    return (V) findViewById(id);
} 
```

# c# - ASP.NET c# 中的 AJAX 错误

> ID：11016232
> 
> 赞同：2
> 
> 时间：2012-06-13T13:46:32.700
> 
> 标签：c#, ajax, asp.net-mvc

我对 Ajax 和 ASP.NET MVC 非常陌生。我有一个返回 AJAX 的函数，我需要处理错误情况。当一切正常时，代码就可以了。我的问题是如何处理错误部分。这是我所拥有的：

为了返回成功，我有：

```
var data = new { success = false };

return Json(data, JsonRequestBehavior.AllowGet); 
```

而且我需要知道当出现异常或错误时要返回什么？

这是我的查询：

```
function DoMailPDF() {
             $("#submitMail").attr("disabled", true);
             var personid = $("#personid").val();
             var unitid = $("#unitid").val();
             var url = "@(Url.Action("SendEmail", "Report"))";
            $.ajax({
                url: url,
                data: { person: personid , unit:unitid},
                success: function () {                    
               // $('input[name=MailSent]').attr('checked', true);
                $("#submitMail").removeAttr("disabled");
                    alert("Email sent!");
                },
                error: function () {                    
                 alert("Email not sent!");
                }
            });
        } 
```

它永远不会涉及错误函数。我如何让它去错误？欢迎任何提示和建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:50:53.993

您可以通过以下方式访问您的 json 响应对象：

```
 $.ajax({
            url: url,
            data: { person: personid , unit:unitid},
            dataType: 'json',
            success: function (response) {                    
                if (response.success == false) {
                    // Error handling
                } else {
                    // Success handling
                }
            },
            error: function () {                    
             alert("Email not sent!");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:50:39.330

正如 Nick Bork 已经在评论中解释的那样，响应的错误/成功状态由在标头中向下发送的 Http 状态代码确定。您仍然可以采用建议的方式并检查响应对象和成功属性，但当您已经拥有更强大且经过长期验证的机制（HTTP 协议本身）时，这显然不是正确的方式。

当一切都按照代码进行时，.NET 将使用 HTTP 200（OK），但是您可以通过访问这样的 Reponse 对象来更改控制器中的此行为，例如：

```
Response.StatusCode = 500; // or any of the other HTTP "failure" status codes 
```

4xx 或 5xx 类别中的任何状态代码都将触发调用`error()`中指定的处理程序`$.ajax(...)`。当然，您还可以从那里检查正确的状态代码、响应详细信息和 XHR 对象的每个属性，以提供更有意义的用户体验。

HTTP 状态代码几乎是一成不变的，不太可能改变，这就是为什么我认为它们绝对比定制解决方案更可取......

PS：对于 HTTP 状态代码的列表，[维基百科](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)是你的朋友。

# android - 如何在 Android 上使用 OBEX/Bluecove

> ID：11016236
> 
> 赞同：1
> 
> 时间：2012-06-13T13:46:57.223
> 
> 标签：android

我的任务是通过蓝牙以编程方式共享文件。我尝试使用 stackoverflow 提供的几个示例。但它无法识别确切的解决方案。让我知道如何在 android 上使用 OBEX api。

我尝试使用 android 实现 Bluecove jar，我在构建路径中添加了 jar，当我运行应用程序时，它显示一个错误，如 -`BlueCove native library version mismatch`请您提供解决此问题的必要解决方案。当我使用 loadlibrary 时，它通常指出 javax.bluetooth.BluetoothStateException: BlueCove 本机库版本不匹配。

帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:59:12.353

一种简单的方法是使用现有应用程序通过 BT 发送文件（共享功能是 Android 的架构目标之一）。安装一个应用程序（在 playstore 中搜索蓝牙）并使用类似于以下的方法发送您的文件：

```
private File exportFile;  // set when creating the file

/**
 * Send the export file via an intent with the send action.
 */
private void doSendFile() {
    final Intent i = new Intent(Intent.ACTION_SEND);
    i.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(this.exportFile));
    i.setType("text/*");
    final Intent chooser = Intent.createChooser(i, this.global.getText(R.string.txt_send_chooser_title));  // R.string.... is the label's ID for the chooser headline
    chooser.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    this.startActivity(chooser);
} 
```

# codeigniter - 将源代码文件移动到 CodeIgniter 文件夹

> ID：11016237
> 
> 赞同：0
> 
> 时间：2012-06-13T13:47:00.110
> 
> 标签：codeigniter

我开始在 codeigniter 中处理一些不完整的东西。我必须在我的机器上安装 codeigniter。我有以前工作的源代码文件，但是我很困惑如何将这些文件移动到 CodeIgniter 文件夹以照常访问它们并开始处理它们。

我不确定下载时哪些文件会转到 CodeIgniter 文件夹中的哪个文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:35:03.370

CodeIgniter have and `system` a `application` folder.

I'd recommend a new download.

I doubt some change was made on `system` folder, so I think you can ignore it from your project and use the new downloaded one

The project is on the `application` and there you have some folders, as mentioned by gopi1410, that you need to take care, maybe there are libraries, models, controllers, configurations files, autoload, etc.

And tell us what it the version of you application. If it is a old version, there will be some problem using the new version `system` folder.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:53:00.077

首先在您的机器上[下载并安装 Codeigniter 。](http://codeigniter.com/download.php)检查控制器/模型/视图/配置所在的文件夹。

然后您将知道哪些文件驻留在哪里，如果您仍然有一些问题，请查看文档。

# qt - 重新打开小部件时自动更新数据库

> ID：11016241
> 
> 赞同：0
> 
> 时间：2012-06-13T13:47:21.340
> 
> 标签：qt

我有一个小部件，它位于堆叠的小部件中，用于在表格中显示数据库。目前数据库已填充并显示在构造函数中，这是错误的，因为它只发生一次，因此永远不会更新。所以我猜必须有一个函数应该被调用来更新数据库。

所以我希望有一些功能可以在小部件关闭或打开时被覆盖？但我不确定这些是什么。我敢肯定这是很明显的事情，但我没有运气找到它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:56:49.487

> 所以我希望有一些功能可以在小部件关闭或打开时被覆盖？

`showEvent(QShowEvent* event)`和`hideEvent(QHideEvent* event)`。还有一个`closeEvent(QCloseEvent* event)`, 但这可能不适用于堆叠小部件中的小部件。

# wix - 为什么卸载 msi 不会删除注册表和 installdir？

> ID：11016244
> 
> 赞同：1
> 
> 时间：2012-06-13T13:47:37.093
> 
> 标签：wix, windows-installer, major-upgrade

我们正在使用 wix 项目来创建 msi。我们正在尝试进行重大升级。

我们确实更改了产品代码和产品版本并创建了新的 Msi

在机器中安装了新的 msi [注册表项已创建并且 installdir 包含最新文件]。

现在我们在卸载注册表项中看到两个产品代码。我认为旧的 msi 没有正确卸载。

当我们更新产品代码时，它应该会自动处理它，不是吗？不卸载旧版本的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:20:09.290

> *当我们更新产品代码时，它应该会自动处理它，不是吗？*

不，更改产品代码不足以导致删除以前的版本。

要实施删除先前版本的升级，请使用[有关主题的 wix 文档](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm)`MajorUpgrade`中描述的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:18:18.007

这些症状告诉我你没有正确地编写你的主要升级。wxs是什么样子的？您的新旧 ProductVersion 属性是什么样的？

FindRelatedProducts / RemoveExistingProducts 没有识别旧的 ProductCode 并且没有被删除。

# python - python在scrapy中导入item.py文件

> ID：11016246
> 
> 赞同：0
> 
> 时间：2012-06-13T13:47:42.693
> 
> 标签：python, web-scraping, scrapy

我有以下文件夹结构

```
/project
   /scrape
        item.py
        /spiders
               myscraper.py 
```

在文件 item.py 我有一个声明

```
class MyItem(Item): 
```

里面有更多的代码。

我正在尝试运行scrapy

scrapy 爬行 myscraper

从文件夹/项目中，但我不断收到错误消息。

```
 exceptions.NameError: global name 'MyItem' is not defined 
```

有谁知道我需要做些什么来确保scrapy看到我的item.py文件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:01:54.850

我不能确定，因为我可以看到你的代码很少，但看起来你有一个循环导入。

检查您是否没有从一个文件中导入某些内容，反之亦然，重新排列您的代码，使其不再发生。

# ios - 从文件路径获取数据时崩溃

> ID：11016247
> 
> 赞同：1
> 
> 时间：2012-06-13T13:47:44.460
> 
> 标签：ios, objective-c, cocoa-touch, crash, nsmutabledata

应用程序在尝试从路径/URL（存储在文档文件夹中的视频文件）仅针对大文件 (>100 MB) 获取数据时崩溃。

设备详情：iOS (4.3)、iPad 1

1.  URL 是完美的（检查日志）
2.  文件存在于该路径（检查路径）

注意：仅在设备上崩溃。

以下是应用程序崩溃的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);

if ([paths count] > 0) 
    {
         filePath = [paths objectAtIndex:0];
         filePath = [filePath stringByAppendingPathComponent:@"Private Documents"];
         filePath = [filePath stringByAppendingPathComponent:@"videos"];
         filePath = [filePath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp4",st]];
    }

NSURL *fileUrl=[NSURL fileURLWithPath:filePath];
NSMutableData *Data = [NSMutableData dataWithContentsOfURL:fileUrl];  //CRASHES ON THIS LINE
NSLog(@"Data: %d",[Data length]); 
```

任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:05:18.353

看来您的内存不足了。

在设备上，您的模拟器通常可用的内存要少得多，并且 100MB 可以存储在 RAM 中。考虑将可下载的文件分成更小的块，如果可以的话，分块处理。

我不认为

> 您花费了很长时间，并且该应用程序被杀死了。

正如大卫建议的那样，除非你在启动时这样做。

# python - 具有 1 亿个节点的图中的连接组件

> ID：11016256
> 
> 赞同：4
> 
> 时间：2012-06-13T13:48:03.263
> 
> 标签：python, graph

我正在尝试在具有 1 亿个节点的图中获取连接组件的列表。对于较小的图，我通常使用Python 中 Networkx 模块的[connected_components函数，它正是这样做的。](http://networkx.lanl.gov/reference/generated/networkx.algorithms.components.connected.connected_components.html#networkx.algorithms.components.connected.connected_components)但是，使用此模块将具有 1 亿个节点（及其边）的图加载到内存中需要 ca. 110GB内存，我没有。另一种方法是使用具有连接组件功能的图形数据库，但我在 Python 中没有找到任何功能。似乎 Dex（API：Java、.NET、C++）具有此功能，但我不是 100% 确定。理想情况下，我正在寻找 Python 中的解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:54:55.817

SciPy 有一个[连通分量算法](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csgraph.connected_components.html)。它期望您的图形的邻接矩阵以其一种[稀疏矩阵格式](http://docs.scipy.org/doc/scipy/reference/sparse.html)作为输入，并处理有向和无向情况。

从一系列`(i, j)`对中构建稀疏邻接矩阵，`adj_list`其中`i`和`j`是（从零开始的）节点索引可以通过

```
i_indices, j_indices = zip(*adj_list)
adj_matrix = scipy.sparse.coo_matrix((np.ones(number_of_nodes),
                                     (i_indices, j_indices))) 
```

您必须为无向案例做一些额外的工作。

如果您的图形足够稀疏，这种方法应该是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-31T00:56:07.760

[https://graph-tool.skewed.de/performance](https://graph-tool.skewed.de/performance)

从性能上可以看出，这个工具非常快。它是用 C++ 编写的，但接口是用 Python 编写的。

如果这个工具对你来说不够好。（我认为会的）然后您可以尝试 Apache Giraph（[http://giraph.apache.org/](http://giraph.apache.org/)）。

# javascript - 在 Mosync 上添加多个 html 文件的问题

> ID：11016260
> 
> 赞同：0
> 
> 时间：2012-06-13T13:48:10.513
> 
> 标签：javascript, html, mosync

我是 Mosync 的新手，我正在尝试创建一个 HTML5/Javascript 项目。IDE 生成一个 main.cpp 文件和一个 index.html 文件。

main.cpp 文件包含对 index.html 文件的引用；我已经尝试在生成的 index.html 文件所在的同一文件夹中创建一个新的 html 文件，并更改了 main.cpp 文件中的引用以调用我刚刚创建的文件，但它给了我一个错误提示找不到该文件。

我什至尝试删除生成 index.html 文件中的所有代码并运行它，结果仍然显示 index.html 文件中所有已删除的代码。

我的问题是如何在创建 MoSync 项目时添加多个 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:04:07.807

它应该可以做你正在做的事情，这可能是一个错误。您能否提供一些有关您使用的是哪个版本的 MoSync 以及哪个平台的详细信息？

您应该能够在 MoSync 项目的 LocalFiles 文件夹中拥有任何 html 文件，然后只需将文件名传递给 main.cpp 中的 showPage，就像您正在做的那样。

也许项目没有正确重建？尝试在 Eclipse 中右键单击项目，然后选择 Rebuild。你是iOS还是安卓？如何将应用程序传输到设备？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:14:37.277

正如 Mikael 也提到的，我认为这是一个 IDE 错误，我尝试刷新/重建项目并且效果很好。有时 eclipse 不会检测到来自其他编辑器的文件更改，因此它会忽略它们。

# c++ - 模板化构造函数是否覆盖 C++ 中的隐式复制构造函数？

> ID：11016262
> 
> 赞同：7
> 
> 时间：2012-06-13T13:48:18.037
> 
> 标签：c++, templates, copy-constructor

模板化构造函数（如下所示）是否会覆盖隐式复制构造函数？

```
template <class T>
struct Foo
{
    T data;

    // ...

    template <class U>
    Foo(const Foo<U> &other) : data((T)doSomethingWith(other.data)) {}

    // ...
}; 
```

`other`如果是这样，如果按值而不是常量引用传递，它是否仍会覆盖它？

如果是这样，是否有任何方法可以在不明确定义复制构造函数的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:54:50.097

不，那不是复制构造函数。该标准第 12.8 ( `[class.copy]`) 节要求：

> 类的非模板构造函数`X`是复制构造函数，如果它的第一个参数的类型是`X&`、或，并且要么没有其他参数，要么所有其他参数都有默认参数`const X&`。`volatile X&``const volatile X&`

编译器仍会隐式生成一个默认值。

您可以通过以下方式使其明确（需要 C++11）

```
Foo(const Foo<T>&) = default; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:55:19.747

> 模板化构造函数（如下所示）是否会覆盖隐式复制构造函数？

不。复制构造函数仍然是隐式声明的，并且优先于模板选择。

> 在没有明确定义复制构造函数的情况下有什么办法吗？

不。如果您不想要隐式复制构造函数，那么您必须自己定义一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:55:47.863

看起来像模板化的 [默认构造函数/复制构造函数/移动构造函数/复制赋值运算符/移动赋值运算符] 的模板化构造函数或赋值运算符并不是*真正*的 [默认构造函数/复制构造函数/移动构造函数/复制赋值运算符/移动赋值运算符] 并且不会替换它或阻止它被隐式生成。

# c++ - 使用 COMMON 语句编译包括 Fortran 库的 C++

> ID：11016266
> 
> 赞同：2
> 
> 时间：2012-06-13T13:48:29.603
> 
> 标签：c++, fortran, libraries, fortran-common-block

我正在编译一个需要一些库的 C++ 程序。这些库的代码是用 Fortran 编写的，并且包含 COMMON 块。基本上我正在做类似的事情：

```
g++ -o main.cpp main lib1.a lib2.a 
```

Lib1.a 和 lib2.a 用 Fortran 编码：

```
gfortran -c -o lib1.a Code1.F
gfortran -c -o lib2.a Code2.F 
```

两者都包含一个头文件，其中包含以下内容：

```
double precision var1,var2
double precision var3,var4

common /block1/ var1,var2
common /block2/ var3,var4 
```

COMMON 块似乎出了点问题。例如，在公共变量之后更改变量的顺序，或添加新变量，会导致随机不一致的结果。

我知道在可能的情况下不应使用 COMMON 语句，但我看不出在这种情况下可能出现什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:21:26.983

`COMMON`块中变量的顺序*很*重要，更改顺序后会发生坏事。在使用公共块的任何地方都应该是相同的，*包括*在 C++ 程序中。无关紧要的是这些变量的名称。例如，在一个子程序中，您可以：

```
double precision a, b
common /block1/ a, b 
```

在另一个子程序中，您可以：

```
double precision c, d
common /block1/ c, d 
```

仍然`a`并且`c`将共享相同的内存位置。这同样适用于`b`和`d`。这可能会导致混淆，通常的做法是将变量和公共块声明放在一个文件中，该文件`include`由每个使用特定公共块的子例程 -d ，就像在您的情况下所做的那样。现在，如果您更改任何公共块中的某些内容，所有子例程都会看到它发生了变化，并且一切都会按预期工作。

问题是您还必须更改相应的 C 结构以使其与更改后的公共块相对应。例如

```
double precision a, b
common /block1/ a, b 
```

在 C 中对应于：

```
struct common_block1
{
    double a;
    double b;
};
extern struct common_block1 block1_; 
```

（注意：不支持`bind(C)`属性的较旧的 Fortran 编译器在每个导出的标识符的末尾加上下划线，因此在 C/C++ 中，您必须引用`block1`as `block1_`）

如果将公共块更改为：

```
integer a
double precision b, c
common /block1/ a, b, c 
```

您还应该将 C 结构更改为：

```
struct common_block1
{
   int a;
   double b;
   double c;
}; 
```

给定 C 和 Fortran 编译器的所有内容都使用相同的内存对齐规则。对齐通常可以通过编译器选项 (C/C++/Fortran) 和类型属性 (C/C++) 来控制。使用`ISO_C_BINDING`Fortran 模块可以保证在 Fortran 和 C 中使用相同存储大小的类型种类。建议您首先将最大的对象（例如数组、`(DOUBLE) COMPLEX`变量、`DOUBLE PRECISION`变量等）放在公共块的开头，然后是较小的对象等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:02:25.647

根据您的编译器的 Fortran，它可能会在变量之间插入填充。也许 Fortran 和 C++ 编译器不同意这一点。只是一个猜测。

如果您愿意更改 Fortran 代码，则使用 ISO C 绑定会有所帮助，因为它指示 Fortran 编译器生成与 C 编译器约定一致的代码。[在http://software.intel.com/sites/products/documentation/hpc/compilerpro/en-us/fortran/lin/compiler_f/bldaps_for/common/bldaps_interopc.htm](http://software.intel.com/sites/products/documentation/hpc/compilerpro/en-us/fortran/lin/compiler_f/bldaps_for/common/bldaps_interopc.htm)有通用块示例。基于那个例子：

```
use, intrinsic :: iso_c_binding
real (c_double) :: var1, var2, var3, var4
common /block1/ var1, var2
common /block2/ var3, var4
bind (C) :: /block1/, /block2/ 
```

如果你愿意做更多的模组，一个更好的选择是模块变量。那么就不用担心内存中的布局了。

```
module global_vars
use, intrinsic :: iso_c_binding
real (c_double), bind (C) :: var1, var2, var3, var4
end module global_vars 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:02:52.413

我想我理解了这个错误的起源。我首先编译了库 lib1.a，包括头文件。然后我实际修改了这个头文件（尤其是common块），编译了库lib2.a。这似乎是合乎逻辑的，这会导致不同库中的两个公共块之间出现不匹配......

我会详细检查这一点，但我很确定这就是解释。感谢您的建议，它帮助我检查了所有内容，这就是我找到解决方案的方式！

# java - Java/Android：增量算法

> ID：11016267
> 
> 赞同：3
> 
> 时间：2012-06-13T13:48:33.510
> 
> 标签：java, android

我有一个 Android 加速度计 x 轴的值，并且在该值每变化**0.18时，** **az**的值也应该递增/递减**5**

例如：

在`x=0, az=0`

在`x=0.18, az=5`

在`x=0.36, az=10`

如果 x 的值回到 0.18，那么 az 的值也必须回到 5（这意味着 x 和 az 是同步的）

我应该如何将这个逻辑实现到代码中？

PS：我希望这里有“for”、“if”或“while”语句

对不起，我的英语不好。先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:51:46.727

我想你有一些方法可以持续监控`x`价值。在这种情况下，伪代码：

```
private static final double xToAz = 5.0/0.18;    

onChange(x)
{        
    az = xToAz * x;
    az -= az%5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:51:30.750

将 x 除以 0.18 并将结果乘以 5 得到 az 的值。

```
az = (x / 0.18) * 5; 
```

# java - 为什么我的交易不活跃？javax.persistence.TransactionRequiredException：执行更新/删除查询

> ID：11016268
> 
> 赞同：2
> 
> 时间：2012-06-13T13:48:36.920
> 
> 标签：java, spring, hibernate, jboss, hibernate-search

我有一个我正在尝试配置使用的 Spring Web Service (Spring-WS) 应用程序。我正在使用的堆栈如下

```
Spring 3
Spring-WS
JPA with Hibernate as the provider
JBoss 7.1* 
```

应用程序配置如下：

持久性.xml

```
<persistence-unit name="myPersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/myDataSource</jta-data-source>
        <non-jta-data-source>java:jboss/datasources/myDataSource</non-jta-data-source>
        <class>myPackage.MyClass</class>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>           
            <property name="hibernate.connection.autocommit" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="validate"/>
            <property name="hibernate.show_sql" value="false"/>
            <property name="hibernate.cache.use_second_level_cache" value="true"/>
            <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.SingletonEhCacheProvider"/>
            <property name="hibernate.search.default.directory_provider" value="org.hibernate.search.store.FSDirectoryProvider"/>
            <property name="hibernate.search.default.indexBase" value="./lucene/indexes"/>
            <property name="hibernate.search.default.batch.merge_factor" value="10"/>
            <property name="hibernate.search.default.batch.max_buffered_docs" value="10"/>
        </properties>
    </persistence-unit> 
```

spring.xml - 实体管理器和事务管理器

```
<context:annotation-config/>

    <context:component-scan base-package="com.mypackage"/>

    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <!-- Live database entity and transaction managers -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        p:dataSource-ref="myDataSource">

        <property name="persistenceUnitName" value="myPersistenceUnit" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entityManagerFactory-ref="entityManagerFactory" />

    <tx:annotation-driven transaction-manager="transactionManager" /> 
```

Web.xml - 加载上面的 spring.xml 文件

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/app-config.xml
            /WEB-INF/spring.xml
            /WEB-INF/spring-datasources.xml
         </param-value>   
     </context-param> 
```

弹簧数据源.xml

```
<jee:jndi-lookup id="myDataSource" jndi-name="java:jboss/datasources/myDataSource"/> 
```

在我的 DAO 类中，我对 entityManager 有以下定义。

```
@PersistenceContext(type=PersistenceContextType.TRANSACTION, unitName="myPersistenceUnit")
protected EntityManager entityManager;

@Transactional
    public void updateProduct(Product product) {

        //  Save the document to the database
        update(product);
    } 
```

上面的更新方法只是调用一个泛型方法，调用`entityManager.merge(object);`

现在，当我测试上述内容时，我发现如果我从数据库中读取它可以工作，但如果我正在写入数据库（即创建或更新）它就不起作用。如果我尝试写信给我，我会得到以下异常：

```
javax.persistence.TransactionRequiredException: Executing an update/delete query
   at org.hibernate.ejb.AbstractQueryImpl.executeUpdate(AbstractQueryImpl.java:96)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:310)
   at $Proxy96.executeUpdate(Unknown Source) 
```

我猜我可以从数据库中读取，这意味着事务管理器的配置有问题。有任何想法吗？

## 编辑

好的，我只是重新阅读了上面的内容，并注意到最后一点有点错误。我上面显示的异常仅在我使用 JPQL 使用`entityManager.createQuery`. 如果我尝试使用`entityManager.merge()`实际上没有发生任何事情来更新实体。不返回异常，但不更新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:06:56.927

当您将方法标记为@Transactional 时，您指望JTA，但是- 如altanis 所述- 但是您将持久性单元的事务类型定义为不是JTA 的RESOURCE_LOCAL。

1）如果您想使用容器管理的事务然后更改事务类型，将您的数据源定义为 JBoss 中的 JTA 数据源并将 non-jta-data-source 更改为 jta-data-source

2) 如果您想管理自己的事务，请保持 persistence.xml 和数据源定义不变，但在任何持久化、合并、删除操作之前，通过调用 entitymanager.getTransaction().begin() 并在最后开始事务业务部门，调用 entitymanager.getTransaction().commit() 或 entitymanager.getTransaction().rollback()。在这种情况下，由于您自己管理事务，因此在 updateProduct() 中使用 @Transactional 启动 JTA 事务似乎没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:55:08.680

尝试在 persistence.xml 中将 transaction-type="RESOURCE_LOCAL" 更改为 transaction-type="JTA"。此外，您可能需要从 persistence.xml 中删除元素。

# html - Css 分页符导致 IE 中的表格后出现额外的分页符

> ID：11016280
> 
> 赞同：3
> 
> 时间：2012-06-13T13:49:07.590
> 
> 标签：html, css, internet-explorer-8

我有以下 html 文件...这些是全部内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
<style type="text/css">
    P.breakhere
    {            
        page-break-after: always;
    }
</style>
<title></title>
</head>
<body>
<table>
    <tr>
        <td>
            [Contents of page 1]
            <p class="breakhere" style="width: 100%; text-align: right; font-weight: bold;">
                Continued...
            </p>
            [Contents of page 2]
        </td>
        </tr>
    </table>
    [More of page 2]
</body>
</html> 
```

这是在安装在 Windows 7 Professional SP1 上的 IE 8（版本：8.0.7601.17514）中打印为 3 页

这应该只打印为 2 页，但在表格元素关闭后会插入一个额外的分页符。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:46:14.807

在表格内的元素上设置 page-break-before（或 page-break-after）存在问题。

没有解决方法。这将导致意外的行为。我不得不改变页面的布局以避免这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:20:22.043

尝试使用：

```
page-break-inside:avoid 
```

[http://www.w3schools.com/cssref/pr_print_pagebi.asp](http://www.w3schools.com/cssref/pr_print_pagebi.asp)

# javascript - 捕获滚动 事件的跨浏览器方法（或临时禁用滚动的更简单方法）

> ID：11016288
> 
> 赞同：1
> 
> 时间：2012-06-13T13:49:32.957
> 
> 标签：javascript, html, scroll, dom-events

每当用户滚动页面时，我都会尝试执行 Javascript 函数。

我试过了：

```
<body onscroll="myScrollFunction()"> 
```

这在 Firefox 中运行良好，但在 IE 中运行良好。

我也试过：

```
window.onscroll = "myScrollFunction()"; 
```

但这似乎只执行一次功能，类似于 onload 事件，但进一步滚动不会触发该事件。我的文档类型设置为严格；不确定这是否有所作为。

我怎样才能让它在所有浏览器上工作？

我想要完成的是一种防止用户在显示模式后滚动的方法。我宁愿不使用

```
overflow:hidden 
```

因为在显示模式时文档会稍微移动（以补偿滚动条），所以我想我可以捕获滚动功能并在显示模式时将其锁定到页面顶部。如果有更简单的方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:53:31.857

代替

```
window.onscroll = myScrollFunction(); 
```

它将结果分配给`myScrollFunction()`onscroll 处理程序，你想要

```
window.onscroll = myScrollFunction; 
```

它分配函数本身，因此将在每次滚动时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:53:03.993

我建议您不要这样做，而只需提供模态对话框`position: fixed;`，它将将其固定到视口而不是页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:12:48.850

在您的灯箱打开时将`<body>`'s设置`overflow`为。`hidden`

```
$('body').css('overflow','hidden'); 
```

...然后在关闭时恢复正常：

```
$('body').css('overflow','auto'); 
```

# c# - 将调试字符串排除在 C# 中的构建之外

> ID：11016292
> 
> 赞同：2
> 
> 时间：2012-06-13T13:49:39.790
> 
> 标签：c#, logging, c-preprocessor

在编写代码时，我经常在代码中放置调试消息。调试消息由记录器类处理，它在调试模式下将消息输出到文件并在发布模式下丢弃它们。

它看起来有点像这样：

```
class Logger : IDisposable
{
    private StreamWriter m_Logger = null;

    public void Start(string logFile)
    {
        m_Logger = new StreamWriter(logFile);
        m_Logger.AutoFlush = true;
    }

    public void Dispose()
    {
        if (m_Logger != null) m_Logger.Dispose();
    }

    public void WriteLine(string message)
    {
        if (m_Logger != null) m_Logger.WriteLine(message);
    }
} 
```

一个实例是在启动时创建的，并且可以从`Program`类中访问。然后我检查这样的调试：

```
#if DEBUG
Program.Log.Start("app.log");
#endif 
```

这很好用，因为它在调试模式下转储调试信息，而不是在发布模式下。但是，如果我通过诸如 之类的实用程序运行发布可执行文件`strings`，我仍然可以看到调试字符串。我宁愿将它们完全排除在发布版本之外，以帮助防止逆向工程。

到目前为止，我发现的唯一解决方案是将所有调试消息包装在预处理器条件中：

```
// < some code here >
#if DEBUG
Program.Log.WriteLine("Some debug message.");
#endif
// < more code here > 
```

这是相当乏味和丑陋的。我的第一个想法是使用某种预处理器宏，但 C# 不支持它们。有没有比我现在使用的更优雅的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T13:55:43.853

要避免在每个 WriteLine 调用上使用 #if-#endif，请尝试在记录器方法本身上使用[ConditionalAttribute ：](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)

```
[Conditional("DEBUG")]
public void WriteLine(string message)
{
    if (m_Logger != null) m_Logger.WriteLine(message);
} 
```

在发布版本的情况下，这将从 MSIL 中排除。

> 将 ConditionalAttribute 应用于方法向编译器指示不应将对该方法的调用编译为 Microsoft 中间语言 (MSIL)，除非定义了与 ConditionalAttribute 关联的条件编译符号。将 ConditionalAttribute 应用于属性表示不应将属性发送到元数据，除非定义了条件编译符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:56:53.073

1) 将 #ifdef 放在 log 方法的主体中，这样您就不必在每条日志消息周围放置定义

2）如果您试图防止逆向工程，请混淆代码，这会加密字符串，但这不是故障安全。

3）您可以使用 PostSharp 之类的东西在事后主动从 MSIL 中删除代码[http://www.sharpcrafters.com/solutions/logging](http://www.sharpcrafters.com/solutions/logging)

# extjs - 无法将 id 属性添加到 Sencha Touch 2 中的视图

> ID：11016293
> 
> 赞同：0
> 
> 时间：2012-06-13T13:49:39.830
> 
> 标签：extjs, sencha-touch-2

我正在使用 Sencha Touch 2 开发一个项目。

每当我将属性“id”添加到我的视图中时，整个应用程序都会停止工作

就像我添加这个

```
id: myapp.views.RoadNotifier, 
```

任何帮助将不胜感激

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:44:30.287

使用 `id:"RoadNotifier"`，这将工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:35:06.153

您必须分配字符串值而不是对象。

例如：

```
id: "myapp.views.RoadNotifier", // 好！
id: myapp.views.RoadNotifier, // 不好！

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:24:37.027

`id` ***绝不能***像视图文件的完整分类名称一样指定您的名称。

那应该是您在`Ext.define(`代码中的名字。

看看下面的代码。您应该为您的应用程序类似地命名它。

```
Ext.define('myapp.views.RoadNotifier', {
    extend: 'Ext.Container',
    xtype: 'roadNotifier',
    id: 'roadNotifierId',
    .....
    ..... 
```

# regex - 实现以下目标的正则表达式是什么？

> ID：11016298
> 
> 赞同：0
> 
> 时间：2012-06-13T13:49:52.387
> 
> 标签：regex

我正在寻找一个单一的正则表达式，它将用 替换`replace me`文本中的所有内容`REPLACE ME`，但不会受到`dont replace me`影响。

文本示例：

```
blah replace me blah
blah dont replace me blah
replace me blah blah
blah blah dont replace me 
```

我知道它可以通过无数种方式完成，但我正在寻找一种利用单个正则表达式搜索和替换的解决方案，所以只有在你有一个时才发布:)

我认为可以使用以下站点的信息来完成：[http](http://www.regular-expressions.info/refadv.html) ://www.regular-expressions.info/refadv.html ，但是当我阅读有关原子分组、环视等的信息时，我会迷失方向。

我会赞成任何可行的解决方案并接受最好的解决方案。提前致谢。

**编辑**：当您发布正则表达式时，您能否解释一下正则表达式背后的想法？对于不太熟悉语法的人来说会很好。

你可以在这里测试你的正则表达式：[http](http://www.regextester.com/) ://www.regextester.com/ 。我不确定它是否不受限制......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:51:28.767

### 在`python/perl/c#`：

```
(?<!dont )replace me 
```

### 在`vim`：

```
:%s/\(dont \)\@<!replace me/REPLACE ME/g 
```

# c# - 通过组合两个列表创建一个列表

> ID：11016318
> 
> 赞同：3
> 
> 时间：2012-06-13T13:50:51.177
> 
> 标签：c#

我是.Net 的新手。我有两个对象，`Customer`在`Country`我的项目中：

```
public class Customer
{
  public int CustomerId {get;set;}
  public string CustomerName {get;set}
  public String Street {get;set}
  public String Address {get;set}
  public int CountryId {get;set}
  //...o
}

public class Country
{
  public int CountryId {get;set;}
  public String CountryName{get;set}
} 
```

我有两个列表，`List<Customer>`并且`List<Country>.`

我正在使用 sql join 语句来列出国家/地区的客户。但我很困惑如何创建一个包含客户和国家名称的列表。

是否有必要为此创建单独的类？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:52:47.720

无需将国家/地区 ID 存储在您的 Customer 类中，只需存储对象本身。也就是说，让它像这样：

```
public Class Customer
{
public int CustomerId {get;set;}
public string CustomerName {get;set}
public String Street {get;set}
public String Address {get;set}
public Country Country {get;set}
//...o
} 
```

然后你的`Customer`对象中就有了所有需要的信息，并且没有必要尝试合并列表或类似的东西。

在您的`SQL`声明中，加入国家/地区表并获取国家/地区名称作为结果集的一部分，然后您可以在一次服务器往返中填充客户列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:54:37.493

您可以添加到您的客户类别

```
public Country country { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:02:20.113

如果您可以从数据库中获取正确格式的数据，请务必先这样做！数据为此进行了优化。

但是，如果您有两个列表并且需要使用它，那么 LINQ 应该会有所帮助。你可以这样做：

```
var query = from customer in customers
            from country in countries
            where customer.CountryId == country.CountryId
            select new
            {
                Customer = customer,
                Country = country
            }; 
```

这将给出一组匿名对象，其中一个`Customer`属性持有一个客户，一个`Country`属性持有匹配的国家/地区。

如果您真的需要使用`List<>`您可以随时编写的类型`query.ToList()`。

如果匿名类型不适合您，您可以创建一个新类，或者改进`Customer`该类以引用 a`Country`并返回它的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:52:49.053

是的，您需要为每个（客户和国家/地区）创建一个包含单独属性的类，或者您需要创建一个包含附加国家/地区属性的增强型客户类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T13:56:52.790

我建议看一下[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)。

它是 Microsoft 的 Object-Relational-Mapper (ORM)，专为抽象数据库访问而设计，就像您尝试做的那样。

# zend-framework - 要成为一名优秀的 Web 开发人员，我应该学习什么？

> ID：11016320
> 
> 赞同：3
> 
> 时间：2012-06-13T13:50:53.993
> 
> 标签：zend-framework, node.js, symfony1

很长一段时间以来，我一直在使用 PHP 进行编码。几天以来，我一直在寻找 Web 开发方面的工作。

显然他们正在寻找了解 ZEND 或 Symfony 的人。我不知道任何一个（尽管我确实在 CodeIgniter 上做了一些工作）。

这些天我真的很想进入 node.js。

所以我问你们，我应该有什么特权才能得到一份工作？我有一种感觉 Node.js 将成为非常重要和需要的东西，所以我最好在其他人之前进入它......

你怎么看？还有其他我应该学习的东西吗？我真的不想进入 RoR，因为我做 PHP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:14:31.243

我知道这是一个备受争议的话题，但 node.js 更像是一个流行词，而不是成熟的公司正在寻找的技能。许多人已经意识到 javascript 过于细微而无法有效地编写大型应用程序，而且一旦它在服务器端就不会改变。如果您想要工作前景，请学习 Java 或 C# 等静态类型的托管语言。这些并不时髦，因此很多人会告诉我我错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:04:08.363

我同意 Node.js 的建议，但也会学习用于 JavaScript 的 jQuery 和 jQuery 移动库。

它们提供了大量功能来简化 Web 开发以及对 HTML5 功能的支持。另一个好处是您可以使用 jQuery mobile 编写移动 Web 应用程序，并通过一个应用程序支持所有平台（iOS、Android、WP）。它不会是原生的，但它仍然可以是具有大量功能的漂亮应用程序。

编辑：绝对同意 Breland 所说的一切，此外，我想强调客户端上的 SQLite 是值得学习的东西。这是一个非常好的功能，如果您想保留对于 cookie 来说太大的数据，或者您可以使用真正的数据库，您可以在其中创建客户端数据库。不幸的是，AFAIK 目前仅支持 webkit 浏览器（Safari、Chrome、Android、iOS），但学习如何使用它以及像 persistencejs 这样的 ORM 可能会很好，它是一个 jQuery 插件，可以为 SQLite 创建一个 ORM 并且可以工作在客户端或服务器端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:12:26.273

同意，Node.js 和 jQuery 将成为这里的大赢家；无论如何，用于客户端开发。此外，请确保您精通 CSS（尤其是 CSS3）并熟悉 HTML(5) 以及所有这些如何协同工作以制作精美的 Web 应用程序。

就服务器端开发而言，您真的可以自由选择任何东西，毕竟，客户端很少看到使 WebService 运行的实际代码。如果你可以在 PHP 中创建一个可靠的 WebService，当然可以。C＃？为什么不？罗尔？爪哇？Python？你知道的越多，你就越有市场，你会接触到更多的代码。就个人而言，仅仅因为我被迫进入大商业世界，我几乎只使用 C#，但这只是因为我每天都在使用它。

如果你有超级冒险精神，也可以对 SQL 有所了解。还有网络设置等。但这可能超出了网络开发人员的范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T14:49:02.733

如今，“Web 开发人员”的含义与 3 或 4 年前不同。现在，该技能集进一步分为学科，主要是前端和后端。您选择的路径可能基于您作为 PHP 开发人员所做的工作。

1.  如果您一直在以“传统”方式构建 PHP 应用程序并通过 PHP 控制 MVC 应用程序的所有方面，那么学习使该方法更容易的现代 PHP 框架将是一个简单的下一步。
2.  如果您一直在构建通过 API 或服务层公开业务逻辑的 PHP 后端，那么您可以坚持使用后端轨道并学习在 Ruby on Rails（使用类似 rails-api 的东西）或 Node.js 中做同样的事情，如果您希望。如果你走 node.js 路线，选择 CoffeeScript 会让你的 JavaScript 编写更舒服一些，但这是你必须学习的另一种语法。

如果您完成了上述 1 和 2 并且喜欢客户端开发，请学习现代 Javascript Web 开发。不要太担心该选择哪个框架，只需学习构建大型 JS 应用程序的现代方法即可。我推荐的一本书是 Alex McCaw 的 JavaScript Web Applications (http://shop.oreilly.com/product/0636920018421.do)。它确实帮助我摆脱了对 JavaScript 的厌恶，这种厌恶来自于很久以前使用这门语言。

我的建议是学习围栏的两面并掌握每一面的一两个框架。这将使您成为现在所谓的“全栈”开发人员，这只是一个术语，用于识别那些在客户端和后端开发方面有效的人，从而使他们在市场上非常受欢迎。

祝你好运。

# php - 控制 Flex + PHP 软件版本的最佳方法是什么？

> ID：11016326
> 
> 赞同：2
> 
> 时间：2012-06-13T13:51:09.843
> 
> 标签：php, actionscript-3, apache-flex, version-control, browser-cache

SWho 使用缓存客户端系统知道有时您必须更新服务器和客户端文件。到目前为止，我已经设法部分解决了这个问题，每次打开软件时都打一个电话，询问 PHP 他使用的是什么版本的软件。结果，我与 Flex 所在的版本进行了比较，voalá。问题是，每当我需要在工作时间范围内进行紧急更新时，都不可能知道有多少客户已经打开了 Flex 版本。所以要sunup：我通过在启动时控制版本解决的缓存问题，如果您的浏览器缓存它，版本将与服务器的应用程序不匹配。我能想到的解决“已经打开的应用程序”问题的唯一解决方案是在 PHP 服务和 Flex 调用之间建立一个网关，在实际调用服务之前，我必须传递 Flex 版本并在网关内部进行比较，尽管我不喜欢这种解决方案。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:57:59.097

您可以从 Adob​​e 网站下载此应用程序。[http://labs.adobe.com/technologies/airlaunchpad/](http://labs.adobe.com/technologies/airlaunchpad/)它将允许您构建一个新的测试应用程序，您需要在菜单中选择：“自动更新”属性。这将为您生成服务器和客户端的所有必要文件。最终结果将有一个基于服务器的 xml 文件，并在每个客户端应用程序中设置以定期检查 xml 文件是否提供更新版本的应用程序，如果为 true，则自动下载和更新它。您可以在源代码中根据自己的喜好更新“检查更新”频率，默认情况下它与应用程序打开事件相关联。

这种频繁的更新也会在应用程序打开时检查更新，因此它应该可以解决您的问题。

# ruby - Hpricot - UTF-8 问题

> ID：11016328
> 
> 赞同：1
> 
> 时间：2012-06-13T13:51:16.333
> 
> 标签：ruby, unicode, utf-8, hpricot

运行以下代码时出现以下错误：

```
invalid byte sequence in UTF-8 (ArgumentError) 
```

编码：

```
require 'hpricot'
require 'open-uri'

doc = open('http://www.amazon.co.jp/') {|f| Hpricot(f.read) }
puts doc.to_html 
```

Hpricot 无法解析日语内容。有关解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:23:36.293

该网站似乎没有使用 UTF-8: `<meta http-equiv="content-type" content="text/html; charset=Shift_JIS" />`。

试试这个：

```
open('http://www.amazon.co.jp/') {|f| Hpricot(f.read.encode("UTF-8")) } 
```

# ruby-on-rails - 如何防止 Rails 缓存 Model.all 查询

> ID：11016333
> 
> 赞同：0
> 
> 时间：2012-06-13T13:51:33.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不明白为什么在开发模式下，即使插入新记录，查询也会被缓存。我的意思是，在创建新记录后，我的 Model.all 不会从数据库中提取该记录。我与 IRB 核对并保留了记录。一旦我重新启动服务器，就会出现新记录。

这是详细信息...

*   所有环境配置都是由“rails new app”生成的标准配置

第一次启动服务器后，当我点击 pagecontroller#index 时，日志是

```
Processing by PagesController#index as HTML
  Page Load (14.9ms)  SELECT "pages".* FROM "pages" 
  Rendered pages/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 237ms (Views: 167.5ms | ActiveRecord: 16.9ms) 
```

创建页面后，用户被重定向到索引操作并且日志是

```
Started GET "/pages" for 127.0.0.1 at 2012-06-13 09:40:27 -0400
 Processing by PagesController#index as HTML
 Rendered pages/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 5ms (Views: 5.2ms | ActiveRecord: 0.0ms) 
```

我的行动

```
def index
  @pages = Page.all
end

def create
  @page = Page.new(params[:page])
  if @page.save
    flash[:notice] = "Page saved Successfully"
    redirect_to :action => "index"
  else
    flash[:alert] = "Errors on saving the page"
    render :action => "new"
  end
end 
```

我对 Rails 很陌生，在我对这个问题的研究中找不到任何东西。有人能帮我吗。

**宝石**

*   actionmailer (3.2.4)
*   动作包（3.2.4）
*   活动模型（3.2.4）
*   活动记录（3.2.4）
*   活动资​​源（3.2.4）
*   积极支持 (3.2.4)
*   雷尔 (3.0.2)
*   bcrypt-ruby (3.0.0)
*   建设者（3.0.0）
*   捆绑器 (1.1.4)
*   ci_reporter (1.7.0)
*   咖啡轨 (3.2.1)
*   咖啡脚本（2.2.0）
*   咖啡脚本源 (1.3.3)
*   厄鲁比斯 (2.7.0)
*   执行js (1.4.0)
*   远足 (1.2.1)
*   i18n (0.6.0)
*   旅程 (1.0.3)
*   json (1.7.3)
*   libv8 (3.3.10.4 x86_64-darwin-11)
*   邮件 (2.4.4)
*   元类 (0.0.1)
*   哑剧类型 (1.18)
*   摩卡（0.11.4）
*   multi_json (1.3.6)
*   mynyml-redgreen (0.7.1)
*   多语言（0.3.3）
*   机架 (1.4.1)
*   机架缓存 (1.2)
*   机架 SSL (1.3.2)
*   机架测试（0.6.1）
*   导轨 (3.2.4)
*   铁路（3.2.4）
*   耙子 (0.9.2.2)
*   rdoc (3.12)
*   rubygems 捆绑器 (1.0.2)
*   rvm (1.11.3.3)
*   萨斯（3.1.19）
*   sass-rails (3.2.3)
*   链轮 (2.1.3)
*   sqlite3 (1.3.6)
*   术语 ansicolor (1.0.7)
*   therubyracer (0.10.1)
*   雷神 (0.15.2)
*   倾斜 (1.3.3)
*   tinymce-rails (3.5)
*   树顶 (1.4.10)
*   tzinfo (0.3.33)
*   丑化者 (1.0.3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:25:46.757

Rails 3.2.4 在缓存 findall 方面存在问题。我建议您根据以下问题升级到更新版本的 Rails：[Rails 3.2.4 SQL query is caching results on find(:all)](https://stackoverflow.com/questions/10858923/rails-3-2-4-sql-query-is-caching-results-on-findall)

# linux - 如何在启用了 firebug 的情况下从终端打开 FireFox？

> ID：11016334
> 
> 赞同：0
> 
> 时间：2012-06-13T13:51:42.120
> 
> 标签：linux, firefox, terminal, firebug

想要在启用了 firebug 的 linux 终端上打开 firefox

```
// Terminal 
$ Firefox 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:31:34.927

您可以使用`xdotool`：

```
#!/bin/bash
wid=$(xdotool search 'mozilla firefox' | head -1)
xdotool windowactivate $wid
xdotool key F12 
```

# java - 如何在java中生成随机时间戳？

> ID：11016336
> 
> 赞同：24
> 
> 时间：2012-06-13T13:51:45.077
> 
> 标签：java, random, timestamp

我想生成一个随机时间戳并向其添加一个随机增量以生成第二个时间戳。那可能吗？

如果我传递随机长值来创建时间戳并且我想随机生成该长值，那么生成该值以在 2012 年给出时间戳的约束是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-13T14:02:12.913

您需要将随机数缩放到特定年份的范围内，并将年份的开始添加为偏移量。一年中的毫秒数从一年到另一年变化（闰年有额外的一天，某些年份有闰分钟，等等），因此您可以在缩放之前确定范围，如下所示：

```
long offset = Timestamp.valueOf("2012-01-01 00:00:00").getTime();
long end = Timestamp.valueOf("2013-01-01 00:00:00").getTime();
long diff = end - offset + 1;
Timestamp rand = new Timestamp(offset + (long)(Math.random() * diff)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T13:56:50.200

对于您的示例，传递给 Date 的长值应介于2012 年的**1325397600**和**1293861599**之间。尝试使用[此站点](http://www.unixtimestamp.com/index.php)进行检查！要生成随机日期，您可以执行以下操作：

```
Random r =new Random();
long unixtime=(long) (1293861599+r.nextDouble()*60*60*24*365);
Date d = new Date(unixtime); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-15T20:24:09.530

使用 ApacheCommonUtils 在给定范围内生成随机长整数，然后在该长整数中创建日期。

例子：

```
import org.apache.commons.math.random.RandomData;
import org.apache.commons.math.random.RandomDataImpl;

public Date nextDate(Date min, Date max) {

      RandomData randomData = new RandomDataImpl();
      return new Date(randomData.nextLong(min.getTime(), max.getTime()));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:58:59.997

`long`您可以通过在适当范围内生成随机数，然后将其视为毫秒精度的时间戳来生成随机时间戳；例如`new Date(long)`。

要确定范围，请创建表示范围的开始日期和结束日期的日期或日历（或类似）对象，并调用`long getTime()`或等效项以获取毫秒时间值。`long`然后在该范围内生成一个随机数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T14:02:19.873

IMO，Java 中最好的日期时间库是 JodaTime。

例如，如果您想要一个 2012 年的随机 TimeStam，您应该从创建 01/01/2012 日期开始，然后添加一个随机数的时间。最后使用 long 构造函数创建一个 TimeStamp 对象：

```
org.joda.time.DateTime tempDateTime = org.joda.time.DateTimeFormat.forPattern("yyyy-MM-dd").parseDateTime("2012-01-01").plusMillis(my_random_value);
return new Timestamp(tempDateTime .getMillis()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T14:08:59.153

首先找出 2012 年的开始：

```
 long start2012 = new SimpleDateFormat("yyyy").parse("2012").getTime(); 
```

获取一年中的随机毫秒数：

```
 final long millisInYear2012 = 1000 * 60 * 60 * 24 * 365 + 1000; // Have to account for the leap second!
    long millis = Math.round(millisInYear2012 * Math.random());
    Timestamp timeStamp = new Timestamp(start2012 + millis); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T14:06:25.187

以下代码生成 2012 年的随机时间戳。

```
 DateFormat dateFormat = new SimpleDateFormat("yyyy");
    Date dateFrom = dateFormat.parse("2012");
    long timestampFrom = dateFrom.getTime();
    Date dateTo = dateFormat.parse("2013");
    long timestampTo = dateTo.getTime();
    Random random = new Random();
    long timeRange = timestampTo - timestampFrom;
    long randomTimestamp = timestampFrom + (long) (random.nextDouble() * timeRange); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-08T18:55:06.647

看看这个方法：

```
public static Timestamp dateRandom(int initialYear, int lastYear) {
    if (initialYear > lastYear) {
        int year = lastYear;
        lastYear = initialYear;
        initialYear = year;
    }

    Calendar cInitialYear = Calendar.getInstance();
    cInitialYear.set(Calendar.YEAR, 2015);
    long offset = cInitialYear.getTimeInMillis();

    Calendar cLastYear = Calendar.getInstance();
    cLastYear.set(Calendar.YEAR, 2016);
    long end = cLastYear.getTimeInMillis();

    long diff = end - offset + 1;
    return new Timestamp(offset + (long) (Math.random() * diff));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-03T21:15:53.977

其他方式

```
public static Timestamp getRandomTime(){

  Random r = new Random();
  int Low = 100;
  int High = 1500;
  int Result = r.nextInt(High-Low) + Low;
  int ResultSec = r.nextInt(High-Low) + Low;

  Calendar calendar = Calendar.getInstance();
  calendar.add(Calendar.MINUTE, - Result);
  calendar.add(Calendar.SECOND, - ResultSec);

  java.sql.Timestamp ts = new java.sql.Timestamp(calendar.getTimeInMillis());
  return ts;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-27T07:41:28.800

```
import org.joda.time.*;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

    DateTime d1 =DateTime.now().withZone(DateTimeZone.UTC);
        DateTime d0 = d1.minusSeconds(20);
        DateTime d2 = d1.plusSeconds(20);

        Random r = new Random();
        long t1 = d0.getMillis();
        long t2 = d2.getMillis();
        //DateTime d1 = new DateTime(t1);
        //DateTime d2 = new DateTime(t2);
        Random random = new Random();
        long rand = t1 + (long) (random.nextDouble() * (t2-t1));

        DateTime randDatetime = new DateTime(rand);

        String datestr= randDatetime.toString("MM/dd/YYYY hh:mm:ss") ;
        System.out.println(datestr) ; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-25T16:06:41.280

我实际上是在 scala 中编码，但无论如何它可能很有用

```
import scala.util.Random
import java.sql.Timestamp

def generateRandomTimestamp(dateStringMin: String = "2000-01-01 00:00:00", dateStringMax: String = "2021-12-31 00:00:00"): java.sql.Timestamp = {
    val date1 = Timestamp.valueOf(dateStringMin).getTime()
    val date2 = Timestamp.valueOf(dateStringMax).getTime()
    val diff = date2 - date1
    new Timestamp(date1 + (Random.nextFloat() * diff).toLong)} 
```

# wcf - 您可以在托管 WCF 应用程序的 IIS 群集上使用网络负载平衡吗？

> ID：11016337
> 
> 赞同：0
> 
> 时间：2012-06-13T13:51:46.083
> 
> 标签：wcf, iis, cluster-computing, endpoint, nlb

感谢您抽时间阅读。我是使用 WCF 的新手，我正处于为我们现有系统创建新 Web 前端的早期阶段。我想在 IIS 群集上使用网络负载平衡，其中每个节点都托管一个 WCF 应用程序，该应用程序包含有关将请求路由到何处的逻辑...

这样的事情可能吗？WCF 应用程序的端点是否与 IIS 端点相同？任何帮助/建议/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:37:03.313

理想情况下，确定应该调用哪个服务（或服务集群）所需的信息位于初始 WCF 消息中，NLB 将路由该消息。

深入阅读[WCF 寻址](http://msdn.microsoft.com/en-us/magazine/cc163412.aspx)

*   *IIS 寻址注意事项*将回答您的 IIS 端点问题。
*   *逻辑与物理寻址*提供了有关如何与中介（在本例中为 NLB）进行路由的想法。

# php - 如何检测 iPhone 是否有视网膜显示屏？

> ID：11016339
> 
> 赞同：5
> 
> 时间：2012-06-13T13:51:51.660
> 
> 标签：php, iphone, zend-framework, retina-display

如何检测 iPhone 是否有视网膜显示屏？有可靠的方法吗？无论是纯 PHP 还是最好的 Zend Framework 方式都可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:55:01.813

我通过这个弄清楚

```
var retina = window.devicePixelRatio > 1;

if (retina)
{
    // the user has a retina display
}
else
{
    // the user has a non-retina display
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:59:23.710

您必须考虑您试图在服务器端获取客户端信息的事实。

使用纯 PHP 或 Zend 框架似乎无法检测到显示。

此外，您可能从 PHP 访问的来自客户端的 UserAgent 信息似乎是基于操作系统，而不是硬件，因此对您没有帮助。

您可能有兴趣阅读以下文章，该文章更雄辩、更彻底地解释了这些问题。

[http://www.bdoran.co.uk/2010/07/19/detecting-the-iphone4-and-resolution-with-javascript-or-php](http://www.bdoran.co.uk/2010/07/19/detecting-the-iphone4-and-resolution-with-javascript-or-php/) /

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:37:12.947

Javascript：window.devicePixelRatio

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T14:08:31.940

我想像显示器宽度检测这样简单的事情就足以完成这样的任务，视网膜显示器在宽度上包含了这么多像素，简单的检查会立即告诉你它是普通显示器还是视网膜显示器。PHP 没有这种开箱即用的能力，但 Javascript 有。

方法如下：

```
<script language="Javascript">     
<!--     
document.write('<br>your resolution is' + screen.width + 'x' + screen.height)     
//-->     
</script> 
```

# vbscript - 检查 VBScript 中是否存在文件时出现“权限被拒绝”

> ID：11016341
> 
> 赞同：0
> 
> 时间：2012-06-13T13:51:52.860
> 
> 标签：vbscript, filesystems

我有一个 VBS 脚本，用于将文件从旧用户配置文件复制到新用户配置文件（如果存在），但在使用该`objFSO.FileExists()`方法时显示“权限被拒绝”错误。

为了检查文件，我映射了一个驱动器（工作正常，`objFSO.FolderExists()`检查工作正常）并传递我的用户名/密码（我是管理员，所以可以访问所有配置文件，但这甚至在我自己的配置文件中失败）。

完整的脚本在[这个 pastebin](http://pastebin.com/yBsA1R9x)中（有问题的代码第 106 行），我会很感激一些提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:16:24.817

使用用户/密码的映射方法通常会带来麻烦，因为脚本在另一个安全上下文中运行，而不是您用来进行映射的用户。您确实需要映射才能获得读取文件的权限，因此最安全的做法是使用映射，但随后使用 UNC 访问文件，而不是带有驱动器号的路径。

所以而不是

```
old_nicknames_file_path = "J:\" & user_name & "\Application Data\Microsoft\Outlook" 
```

采用

```
old_nicknames_file_path = "\\server\d$\__OLD-PROFILES\" & user_name & "\Application Data\Microsoft\Outlook" 
```

# mysql - 具有 NULL 值的 MySql 正则表达式

> ID：11016346
> 
> 赞同：1
> 
> 时间：2012-06-13T13:52:15.093
> 
> 标签：mysql, regex

如何将 MySql-Database 中的字段与应为 null 或已定义字符串的正则表达式匹配？在 Javascript 中，表达式看起来像这样（在 JS 中它可以工作）`/(.{0}|^ADO$)/`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:16:09.147

使用 IFNULL 可能是最清楚的，因此您可以明确指出您希望如何处理 NULL（我一直在寻找使代码更易于理解而不是更棘手的方法）。也许是这样的：

```
SELECT * from table where IFNULL(field, '') REGEXP 'whatever'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:56:32.150

使用`IS NULL`，像这样：

```
SELECT * FROM table WHERE (field IS NULL OR field = 'ADO') 
```

# android - 存在自动链接检测时启用 onContextMenu

> ID：11016347
> 
> 赞同：5
> 
> 时间：2012-06-13T13:52:22.917
> 
> 标签：android, listview, listitem, linkify

我有一个列表项视图，我添加了这个属性

```
 android:autoLink="web|email|phone"
            android:linksClickable="true"
            autoUrlDetect="true" 
```

但问题是当检测到链接时，不会显示上下文菜单。

我怎样才能在我的项目中有链接，但仍然是上下文菜单以在长按项目时继续显示。

在我的列表项中，我只有一个布局和文本视图，仅此而已

**编辑**

如果我这样设置这个*android:linksClickable* 为 false

```
android:linksClickable="false" 
```

然后显示上下文菜单，但我无法单击链接:(

我希望能够点击链接，但当我长按该项目时，我的菜单也将显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:28:23.887

在寻找解决方案 2 天后，我找到了它:-)。

```
android:focusable="true" 
```

到项目解决我的问题

# datagrid - 如何关闭dojo dataGrid 外边框和每行之间的网格线？

> ID：11016349
> 
> 赞同：1
> 
> 时间：2012-06-13T13:52:31.043
> 
> 标签：datagrid, dojo

我使用以下代码使用 dojo dataGrid 呈现表格。但是，我需要完全关闭每个单元格（水平和垂直）周围的边界线。你能告诉我如何做到这一点吗？（例如，我应该为此定义额外的 CSS 吗？）

非常感谢！

```
dojo.ready(function() {
    var layout = [
        {type: "dojox.grid._CheckBoxSelector"},
        [
            { name: "Photo", field: "Photo", width: "10%",
                formatter: function(field){
                    return "<img src='/images/test.gif' WIDTH=45 HEIGHT=45>";
                }   
            },

            { name: "Summary", fields:["column1", "column2", "column3", "column4"],editable:true,width: "80%" ,
                formatter: function(fields){
                    var column1 = fields[0],
                    column2 = fields[1],
                    column3 = fields[2],
                    column4 = fields[3];

                    return "<h4 class='namelink'><a href='javascript:;'>" +column1+ "  "+ column2 + "</a></h4>" + "<div class='namelink'> <a href='javascript:;'>"+ "Another Name" + "</a></div>" + column3 + "<br>" + "<div class='addresslink'> <a href='javascript:;'>"+column4+"</a> </div>";
                }
            }
        ]
    ]

     var mygrid = new dojox.grid.DataGrid({
        id: "gridId",
        store: store,
        autowidth:"true", 
        rowselector:"15px",
        keepRows: "30",
        rowsPerPage: "10",
        style:"height:300px",
        structure: layout},"gridContainer");    
    mygrid.startup();
    dojo.connect(mygrid, "onApplyEdit", function(row){
        store.save();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:14:41.117

```
.dojoxGridCell {
  border: none !important;            
} 
```

编辑：仅顶部和底部

```
.dojoxGridCell {
  border-width: 1px 0 !important;
} 
```

# windows - 我的 Git GUI 中的存储库选择器在哪里？

> ID：11016352
> 
> 赞同：0
> 
> 时间：2012-06-13T13:52:38.473
> 
> 标签：windows, git, git-gui

我刚刚开始使用 GIT，出于某种原因，每次单击打开 GIT GUI 时，我都看不到 repo 选择器，它只是进入存储库屏幕并显示它在 C 驱动器中。

有谁知道如何克服这个问题，这样我每次打开时都可以像往常一样选择我的回购？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:46:19.587

如果您正在谈论该`git gui`命令，它将打开由您当前工作目录确定的存储库。如果您在 GIT_WORK_TREE 之外，那么您将看到一个允许您选择存储库的对话框。

如果您使用其他工具，则需要更新您的问题以获得更好的答案。

# android - 用于高分辨率手持设备的可绘制文件夹

> ID：11016353
> 
> 赞同：5
> 
> 时间：2012-06-13T13:52:38.603
> 
> 标签：android, drawable, photoshop, resolution, screens

我不知道如何为分辨率为 1280x720 或更高的 Galaxy Nexus、One X、Galaxy S3 等新的“高分辨率”手持设备制作可绘制对象。

我总是尝试制作尽可能少的布局版本。最好只有一个，但有时需要一个长且不长的布局。并使 xml 足够智能以处理所有设备。但这只有在可绘制资源能够提供所有不同的分辨率和大小时才有可能。

在新的大手机到货之前，一切都很顺利，我发现可绘制对象对他们来说太小了。谷歌还没有 xxhdpi 文件夹，所以我一定做错了什么。

我知道这里禁止提及像素，但您仍然必须使用 Photoshop 或其他基于像素的应用程序来制作可绘制对象。因此，您需要知道制作这些可绘制对象有多大。

这是我到目前为止所做的：

xhdpi：640x960

高清：480x640

分辨率：320x480

低密度脂蛋白：240x320

问题是，当 1280x720 设备从 xhdpi 文件夹中获取可绘制对象时，事情开始变得很糟糕，图像太小并且它们之间的空间太大。

您的可绘制源文件基于什么？1028x720的xhdpi？这对我来说搞乱了较低的分辨率版本。

我有一家广告公司在我的脖子上喘着粗气，想知道为什么它看起来不像在 iPhone 上那么完美......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:07:11.483

好吧，正如我上面所说，我找不到任何具有 640x960 分辨率的 Android 手持设备。因此，我将所有图像都基于 720x1280，并将 640x960 分辨率的东西放在一个大的 hdpi 文件夹中。

现在，我的应用在最新的 Nexus、Galaxy S3、HTC One-X 和所有其他新员工型号上看起来都很棒。我认为平板电脑在寻找资源时会先去大，然后是 hdpi，在那里他们会找到 2 倍缩放的图像。

这就是我最终的结果：

xhdpi：720x1280

大高清：640x960

高清：480x640

分辨率：320x480

低密度脂蛋白：240x320

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:06:47.233

我有一个 Galaxy Nexus，我使用 xhdpi 资源文件夹（缩放因子为 2.0），图像看起来很棒。你有什么问题的例子（最好是截图）？如果您以像素为单位对间距和大小进行硬编码，那么是的，在更高的密度下它可能看起来很奇怪。您是否尝试以特定像素大小对背景图像进行 1:1 硬编码？如果是这样，那在 Android 上绝不是一个好主意。

# java - 在 Java 中将函数列为选择项

> ID：11016354
> 
> 赞同：6
> 
> 时间：2012-06-13T13:52:39.127
> 
> 标签：java

我是 Java 新手，所以我的问题可能看起来很简单。但我需要你们的一些指导。

这是我的问题：我有一个包含一堆方法的类，我想将这些方法提供给组合框中的用户进行选择，根据他们的选择，一些代码将运行。现在我可以通过编写开关选择方法来做到这一点。根据选择，我使用 switch 来运行特定方法。

但是我的函数列表很长接近 200，所以我的问题是：有没有更聪明的方法来做这件事。只要给我指出正确的方向，剩下的我会尽力去做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:54:25.167

您可以使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)，特别是： [`Class.getMethods()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethods%28%29)或[`Class.getDeclaredMethods()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethods%28%29)。

确保您了解它们之间的差异（请阅读链接的 javadocs），如果您不了解 - 不要害怕问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:54:36.977

我认为研究 Java 反射将是最好的起点，假设我已经理解了你想要正确地做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:54:59.770

您可以使用反射来列出方法并调用它们

[http://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

[使用 Java 反射创建 eval() 方法](https://stackoverflow.com/questions/2621251/java-reflection)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:56:06.943

您可以使用反射（您可以在 Google 上找到很多信息），但简单地向用户展示您的方法并不是一个好习惯。在更复杂的应用程序中，您应该尝试将用户想要的展示和真实执行分开

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:03:47.823

每个选择都可以由一个 Enum 表示，该 Enum 构建为一组函数指针：

```
public enum FunctionPointer {
F1 {
    public SomeObject doFunction(args) {
        YourClass.doMethod(args);
    }
},
//More enum values here...
} 
```

语法需要一些工作，但在客户端你可以调用

```
FunctionPointer.F1.doFunction("abc"); 
```

# c# - 无法以编程方式将 OneNote 文档发布为 PDF

> ID：11016355
> 
> 赞同：3
> 
> 时间：2012-06-13T13:52:39.743
> 
> 标签：c#, onenote

我正在尝试将 Microsoft OneNote 文档转换为 PDF 文件：

```
 Microsoft.Office.Interop.OneNote.Application oneNote;
        oneNote = new Microsoft.Office.Interop.OneNote.Application();

        string noteBookXML;
        oneNote.GetHierarchy(null, HierarchyScope.hsNotebooks, out noteBookXML);

        XDocument doc = XDocument.Parse(noteBookXML);
        XNamespace ns = doc.Root.Name.Namespace;

        foreach (var noteBookNode in from node in doc.Descendants(ns + "Notebook") select node)
        {
            string id = noteBookNode.Attribute("ID").Value;
            string path = "C:\\convert.pdf";
            if (File.Exists(path))
                File.Delete(path);
            try
            {
                oneNote.Publish(id, path, PublishFormat.pfPDF, "");
            }
            catch(Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        } 
```

使用上面的代码，我目前正在进行发布调用，跨过它会导致 Microsoft OneNote 停止工作（通用窗口“X 已停止工作，请稍候”），然后出现以下异常：

```
{System.Runtime.InteropServices.COMException (0x800706BE): The remote procedure call failed. (Exception from HRESULT: 0x800706BE)
    at Microsoft.Office.Interop.OneNote.ApplicationClass.Publish(String bstrHierarchyID, String bstrTargetFilePath, PublishFormat pfPublishFormat, String bstrCLSIDofExporter)
    at Conversion.OneNoteConverter.run() in G:\Code\OneNoteConversion\Conversion\OneNoteConverter.cs:line 34} 
```

有没有人能够得到这个工作？我在做一些明显错误的事情吗？

提前致谢。

我一直在尝试关注的资源：

[http://msdn.microsoft.com/en-us/library/ms788684.aspx](http://msdn.microsoft.com/en-us/library/ms788684.aspx)

[http://social.technet.microsoft.com/Forums/en/office2010/thread/900dd92b-6e5c-40e5-86ec-f18c1a1fc050](http://social.technet.microsoft.com/Forums/en/office2010/thread/900dd92b-6e5c-40e5-86ec-f18c1a1fc050)

[http://www.technologyquestions.com/community/threads/api-onenote-2007-publish.117776/](http://www.technologyquestions.com/community/threads/api-onenote-2007-publish.117776/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:41:54.757

事实证明，在使用 .publish 调用时，您需要打开 OneNote 才能使其工作（否则您会遇到异常）。

在调用之前打开 OneNote 允许它执行并将文档从 .one 转换为 .pdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:57:20.547

`NavigateTo()`您在调用发布之前尝试过调用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:29:14.763

为什么要循环删除/创建文件？

我推测删除/创建有一个锁并且进程正在停止。

如何删除它并简单地写入文件名1，文件名2...文件名N（用于测试运行），看看是否发生同样的问题；如果没有，那就有答案了。

# nhibernate - 强制 NHibernate 获取已经处于持久状态/一级缓存的实体

> ID：11016356
> 
> 赞同：4
> 
> 时间：2012-06-13T13:52:40.240
> 
> 标签：nhibernate

我有一个负责某些业务逻辑验证的服务对象。在向存储库发布更新之前，它所做的是检查其工作的实体是否符合某些业务规则。

必须检查的规则之一是，与数据库中的实体相比，实体的**Status**属性是否没有改变。因为我使用共享相同**ISession**的存储库，所以当我尝试从数据库中获取实体时，为了获取对象进行比较：

```
if (fromDbEntity.Status != entity.Status) throw new Exception("Cannot change status..."); 
```

我总是会从一级缓存中的**DbEntity获取 - 所以我在同一个对象上工作。**

有没有办法强制 NHibernate/Repository 从数据库中获取实体，即使它已经在会话范围内？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:03:03.900

加载`entity`前从会话中驱逐`fromDbEntity`

```
session.Evict(entity); 
```

您可以查看官方文档以获取更多详细信息：[管理缓存](http://nhforge.org/doc/nh/en/index.html#performance-sessioncache)

缺点是您需要手动调用`SaveOrUpdate`，`entity`因为现在对象不在会话中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:21:40.330

正如克劳迪奥[建议](https://stackoverflow.com/a/11016582/119230)的那样，您可以从会话中驱逐`entity`，然后加载您的`fromDbEntity`，进行比较，然后再次将实体与会话[合并。](https://stackoverflow.com/questions/170962/nhibernate-difference-between-session-merge-and-session-saveorupdate)

您可能会做的另一件事是`fromDbEntity`使用[无状态会话](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)加载。

但这真的有必要吗？你不能让你的`Status`财产只读吗？NHibernate 完全能够使用[字段](https://stackoverflow.com/questions/2339264/property-access-strategies-in-nhibernate)来访问数据。或者你可以让你的属性设置器`protected`：

```
public virtual Status Status { get; protected set; } 
```

这样用户将无法更改属性值，因此无需检查当前值是否与 db one 不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T07:29:59.230

我有一个类似的问题，我通过在我想一直到数据库的任何呼叫之前清除会话来解决它。

```
session.Clear(); 
```

这有点矫枉过正，但它的工作原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:12:12.970

你满足逻辑的方式，听起来好像有一个潜在的错误。一个更好的解决方案是打开动态更新，因此只更新更改的值，然后在保存之前验证没有人更改状态。

# jquery - 使用 jQuery 将 JSON 对象发送到新页面

> ID：11016363
> 
> 赞同：1
> 
> 时间：2012-06-13T13:52:57.153
> 
> 标签：jquery, ajax, json, post, get

当用户单击我在页面上的谷歌地图上放置的标记时，我正在尝试将 JSON 数据（人口统计数据）发送到新页面（在同一目录中）。我现在正在使用 jquery-ui-map 插件，标记和单击事件工作正常，但正如您在代码中看到的那样，我正在尝试将 JSON 对象传输到下一页（demo-data.html） . 我尝试使用 $.ajax 但遇到了 CORS 问题。

所以我的问题是，如何将该 JSON 数组发送到下一页，然后在加载下一页 (demo-data.html) 时检索它，以便将文本放置到适当的位置？

PS - 我无法使用服务器端脚本

谢谢！

```
$(document).bind('pageshow', function () {
  var mapdata = { destination: new google.maps.LatLng(59.3327881, 18.064488100000062) };
  var demographics =
  {
    city: 'Stockholm',
    county: '',
    state: 'Germany',
    lat: 59.3327881,
    long: 18.064488100000062,
    type: 'Standard',
    population: 1000000,
    housing: 800000,
    income: 50000,
    landarea: 1000000,
    waterarea:10000,
    decomissioned: 'No',
    militarycodes: ''
  };

  $('h1').text('Stockholm, Germany');

  $('#map_canvas').gmap(
    {
        'center' : mapdata.destination,
        'zoom' : 12
    })
    .bind('init', function(evt, map) {
        $('#map_canvas').gmap('addMarker',
            {
                'position' : map.getCenter(),
                'animation' : google.maps.Animation.DROP
            }, function(map, marker) {
                $(marker).click(function() {

                    $.ajax({
                        url: 'demo-data.html',
                        type: 'POST',
                        data: JSON.stringify(demographics),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        async: false,
                        success: function(msg) {
                            alert(msg);
                        }
                    });
                });
            });
      });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:57:32.413

我首先想到的是将 JSON 对象保存在 cookie 中，并在跳转后在下一页检索它。

[jquery在cookie中保存json数据对象](https://stackoverflow.com/questions/4225030/jquery-save-json-data-object-in-cookie)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:58:04.727

我会通过[URL 参数](http://www.kevinleary.net/get-url-parameters-javascript-jquery/)传递所有内容。

# windows-phone-7 - 如何计算步行或驾驶方向的路线

> ID：11016365
> 
> 赞同：0
> 
> 时间：2012-06-13T13:52:58.820
> 
> 标签：windows-phone-7, bing-maps

我不确定计算步行和驾驶方向之间是否有区别。比如说，我想步行从A点到B点。我是否在 BingMap 中使用正常的路线计算？正常的路线计算是否仅适用于驾驶？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:31:43.220

目前[`BingMapsDirectionTask`](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.bingmapsdirectionstask%28v=vs.92%29)唯一允许指定起点和终点 - 您的最终用户可以选择更改给他们的方向，是步行还是开车。

# objective-c - iOS：我无法写入我的文件

> ID：11016371
> 
> 赞同：0
> 
> 时间：2012-06-13T13:53:13.913
> 
> 标签：objective-c, ios, file

我想在我的 iPhone 应用程序上写一个文件。我的文件在我的项目文件夹中，但是当我尝试访问它时：

```
NSString *myFile = [[NSBundle mainBundle] pathForResource:@"myFile" ofType:@"txt"];
NSLog(@"%@",myFile); 
```

我得到以下路径：

> 2012-06-13 17:36:56.398 MyFileApp[610:15203] /Users/Damian/Library/Application Support/iPhone Simulator/5.1/Applications/1FFD4436-DCCA-4280-9E47-F6474BEE0183/MyFileApp.app/myFile.txt

为什么 ？

感谢您的建议

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:56:26.113

你问：

> 为什么？

就是那个路径，因为那是存储文件的地方。

**在设备上会有所不同。**

请注意，无论如何您都不能将文件写入该文件夹。您也许应该改为写入应用程序的文档文件夹：

```
//Get the documents folder
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];

//Get the final path of your file.
NSString *finalPath = @"myfile.txt"];    
//And actually write that file.
[[NSFileManager defaultManager] createFileAtPath:finalPath contents:/*fileData as NSData*/ attributes:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:11:15.090

如前所述，您无法在实际设备上写入主包。

对于你的另一个问题：

当您在模拟器中运行您的应用程序时，xcode 会将您的项目复制到您的库目录中的一个文件夹中.. 在您的情况下：

/Users/Damian/Library/Application Support/iPhone Simulator/5.1/Applications/

您在模拟器中运行的每个应用程序都有一个文件夹。应用程序不会在您实际编辑代码的文件夹中运行。

# infragistics - UltraWinGrid 基础设施运营

> ID：11016374
> 
> 赞同：0
> 
> 时间：2012-06-13T13:53:23.557
> 
> 标签：infragistics, ultrawingrid

我有一个 Ultrawingrid，我将数据库中的一些列绑定到它。我将一些列与 Ultragrid 组分组，以便结果集如下所示：

![分组网格](../Images/28477d6edc559171d798a97bb65bf0f0.png)

现在使用 ultrawincalc 管理器，用户可以添加新的计算列。用户可以选择应该将列添加到哪个超组吗？喜欢他可以选择新列进入任何组吗？

此外，如果数据源为空，我可以设置“无记录”消息吗？如果有怎么办？

谢谢， 迪内什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:06:40.070

好吧，我想出了如何通过我们的代码来做到这一点。所以这就是我们所做的。

我们允许用户通过利用 ultarcalcmanager 引擎的向导添加计算列。我们添加了一个下拉列表，列出了不同的 ultagroup（输入、计算和最终）。用户在下拉列表中选择组并点击保存。

ultragridcolumn 可以通过以下方式关联到 ultragridgroup

```
Grid.DisplayLayout.Bands[0].Groups["DROPDOWNTEXT"].Columns.Add("New Calculated Column"); 
```

问候， 迪内什

# ruby-on-rails - 为什么在视图中同时使用 <% 和 <%=？

> ID：11016375
> 
> 赞同：5
> 
> 时间：2012-06-13T13:53:30.720
> 
> 标签：ruby-on-rails, erb

如果我写类似：

`<% if signed_in?.blank? %>`或者`<%= link_to "Sign Up", sign_up_path %>`

`<%`和的两个符号有什么区别`<%=`？

为什么要这样做，而不是为了简单而只使用一个？

我什么时候知道我需要使用`<%`over `<%=`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T13:54:39.873

`<%=`将代码的返回值放入页面。

`<%`只需执行代码。

这是关于 ERB 的良好指南[http://api.rubyonrails.org/classes/ActionView/Base.html](http://api.rubyonrails.org/classes/ActionView/Base.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:56:55.147

`<% %>`只需执行该块内的语句，而`<%= %>`将输出语句的结果。

例如，使用`<% if signed_in?.blank? %>`，ruby 解释器只执行该代码并检查是否`signed_in`为空白。

该`<%= link_to %>`语句实际上会生成 HTML。

# php - CodeIgniter Active Record 删除特殊字符

> ID：11016377
> 
> 赞同：1
> 
> 时间：2012-06-13T13:53:37.567
> 
> 标签：php, mysql, database, codeigniter, encoding

我是 CodeIgniter 的新手，遇到了将特殊字符插入 MySQL 数据库的问题。我正在使用以下代码将数据插入数据库：

```
return $this->db->insert('table_name', $data); 
```

当我查看数据库中的文本时，所有“€”符号都更改为“？” 迹象。此外，其中有一个带有'á'的句子，它被删除了，并且它之后的所有文本都没有插入到数据库中。

我在插入之前对*$data做了一个 var_dump 并且字符是正确的。*

该字段的 MySQL 排序规则是**latin1_swedish_ci**。我将其更改为**utf8_general_ci**以查看它是否会有所不同，但随后完全省略了“€”符号。

**解决方案**：在数据库插入之前，将字符集设置为**latin1**：

```
$this->db->query("SET NAMES 'latin1'");
return $this->db->insert('table_name', $data); 
```

另一个解决方案是更改 CodeIgniter 数据库文件 ( *config/database.php* )。代码应为：

```
$db['default']['char_set'] = 'latin1';
$db['default']['dbcollat'] = 'latin1_swedish_ci'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:01:18.313

您在 config/database.php 文件中配置的字符集是什么？[有关数据库配置文件的信息，请参见此处。](http://codeigniter.com/user_guide/database/configuration.html)

编辑：

另请查看[UTF-8 和 CI 的权威指南](http://philsturgeon.co.uk/blog/2009/08/utf-8-support-for-codeigniter)。

# android - Listview 中的联系人列表不是按字母顺序排列的

> ID：11016384
> 
> 赞同：0
> 
> 时间：2012-06-13T13:53:49.733
> 
> 标签：android

我正在使用 Android Eclair 2.1 平台。

这段代码的工作原理是，它将访问模拟器中的所有联系人，并将像这样显示在每个联系人的列表视图中

**联系人姓名、联系电话、电子邮件**

这段代码有两个问题是

1.  我确实运行了该程序，之后我创建了一个新联系人，它不会按字母顺序排列

[例如：当我创建一个从 B 开始的名字时，它不会去 A，而是去最后一个地方]

2.如果联系人没有电子邮件或号码，它将收到前一个联系人的电子邮件或号码

这是代码

```
public class GetAllDatas extends Activity { 

ListView lvItem;
private Button btnAdd;
String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>(); 
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

lvItem = (ListView)this.findViewById(R.id.lvitems); 
btnAdd = (Button)this.findViewById(R.id.btnAddItem);

itemAdapter = new ArrayAdapter<String>    (this,android.R.layout.simple_list_item_1,contactlist);
lvItem.setAdapter(itemAdapter);

btnAdd.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
    readContacts();
}
});

 } 

private void readContacts()
{
ContentResolver cr =getContentResolver();
Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null,    null);
while (cursor.moveToNext()) 
{
displayName =Cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)    );       
String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null,     null);
while (emails.moveToNext()) 
{ 
    emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
    break;
}
emails.close();
    if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PH    ONE_NUMBER))) > 0)
{
    Cursor pCur =cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDat     aKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
    while (pCur.moveToNext()) 
    {
         phoneNumber =pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        break;  
    }
    pCur.close();
}

//  To display the Details
    contactlist.add(displayName+", "+phoneNumber+", "+ emailAddress+"\n");
    itemAdapter.notifyDataSetChanged();
 }
cursor.close(); 
 }
 } 
```

如果有的话，有什么链接或网站可以参考和研究解决这个问题吗？把链接发给我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:02:11.423

当您查询数据库时，您缺少 orderBy：

`public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy)`

将最后一个 null 替换为要排序的列：

```
Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null,    null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:02:34.473

该`query`方法的最后一个参数需要排序顺序。

请检查文档[`query (Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`](http://developer.android.com/reference/android/content/ContentResolver.html)。

> sortOrder 如何对行进行排序，格式化为 SQL ORDER BY 子句（不包括 ORDER BY 本身）。传递 null 将使用默认排序顺序，可能是无序的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:34:39.870

检查下面的测试代码

```
package stack.examples;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class GetAllDatas extends Activity {

    ListView lvItem;
    private Button btnAdd;
    String displayName="", emailAddress="", phoneNumber="";
    ArrayList<String> contactlist=new ArrayList<String>();
    ArrayAdapter<String> itemAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       lvItem = (ListView)this.findViewById(R.id.listView_items);  
       btnAdd = (Button)this.findViewById(R.id.btnAddItem);
       itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
       lvItem.setAdapter(itemAdapter);
       btnAdd.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               readContacts();
           }
       });
    }

    private void readContacts()
    {
        ContentResolver cr =getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) 
        {
            displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));       
            String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
            while (emails.moveToNext()) 
            { 
                emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
                break;
            }
            emails.close();
            if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
            {
                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
                while (pCur.moveToNext()) 
                {
                     phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    break;
                }
                pCur.close();
            }
                contactlist.add(displayName+","+phoneNumber+","+ emailAddress);

        }
        cursor.close(); 
        sortList(contactlist);
        itemAdapter.notifyDataSetChanged();
    }

    private static void sortList(List<String> aItems){
        Collections.sort(aItems, String.CASE_INSENSITIVE_ORDER);
      }
} 
```

要按字母顺序对 ArrayList 进行排序，您可以使用

```
Collections.sort(aItems, String.CASE_INSENSITIVE_ORDER); 
```

快乐编码！

# javascript - Canvas toDataURL 在第一次尝试时不返回整个 URL

> ID：11016385
> 
> 赞同：3
> 
> 时间：2012-06-13T13:53:52.213
> 
> 标签：javascript, html, image, canvas

我有一些代码，它使用 Raphael 在 SVG 上绘制绘图（使用 Raphael 将 400x400 图像加载到 SVG 中），将其转换为带有 canvg 的画布，然后应该使用 canvas.toDataURL 并使其成为图像。所有这些都应该在按下按钮时发生。前两步有效，但第三步有问题。第一次按下按钮时，一个 300x150 的空白图像被放置在最终的 div 中，而不是 400x400 的图像。如果我再次按下按钮，图像会显示得很好（正确的尺寸和一切）。我尝试同时使用 img.onload 和 jquery 版本 $(img).load 但似乎都无法阻止问题的发生。因此，我觉得画布尚未完全绘制是一个问题，但我无法证明这一点，我似乎无法让代码等到它被绘制出来。以下是所有代码。

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
    <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/raphael.js"></script>
    <script type="text/javascript" src="scripts/excanvas.compiled.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var nowX, nowY, R = Raphael("svg_drawing", 400, 400);

            $($("svg").get(0)).attr("xmlns:xlink", "http://www.w3.org/1999/xlink");
            var templ = R.image("images/band_clutch.jpg", 0, 0, 400, 400);

        });

        function toImg(){
            var svg = $("#svg_drawing").html().replace(/>\s+/g, ">").replace(/\s+</g, "<");
            var canvas = $("#canvas")[0];
            canvg(canvas, svg);
            var imgData = canvas.toDataURL('image/jpg');
            var img = new Image();
            $(img).load(function(){
                $("#drawing_area").html("");
                $(img).appendTo("#drawing_area");
            });
            img.src = imgData;
        }

    </script>
    <title>Sandbox</title>
</head>
<body style="margin: 0; width:3000px">
    <div id="svg_drawing" style="background-color:white;display:inline-block;height:400px;width:400px;border:1px solid black;"></div>

    <canvas id="canvas" style="display:inline-block;height:400px;width:400px;border:1px solid red;"></canvas>

    <div id="drawing_area" style="background-color:white;display:inline-block;height:400px;width:400px;border:1px solid black;"></div>
            <button onclick="toImg()" style="display:inline-block;vertical-align:top;">Do it</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:17:30.207

听起来画布区域保持在默认的 350 x 150。尝试设置

```
canvas.width = canvas.height = 400; 
```

在绘制之前（保持内联 CSS 原样）。

要解决实际的渲染问题，您需要告诉 canvg 方法在渲染完成后异步执行 toDataURI 的内容：

```
function toImg(){
        var svg = $("#svg_drawing").html().replace(/>\s+/g, ">").replace(/\s+</g, "<");
        var canvas = $("#canvas")[0];
        canvg(canvas, svg, {
            renderCallback : function(){
                var imgData = canvas.toDataURL('image/jpg');
                var img = new Image();
                $(img).load(function(){
                    $("#drawing_area").html("");
                    $(img).appendTo("#drawing_area");
                });
                img.src = imgData;
                }
            });           
     } 
```

# javascript - 使用 jquery 将数据发送到 MVC 控制器

> ID：11016388
> 
> 赞同：9
> 
> 时间：2012-06-13T13:54:02.777
> 
> 标签：javascript, c#, jquery, asp.net, asp.net-mvc

我有一个 ASP.NET MVC3 应用程序，当用户单击我的锚标记时，我想将 3 条数据发送到一个操作：

```
 <a onclick='editDescription(<#= DocID,FileName,Description #>)'></a> 
```

这是调用我的操作的 javascript：

```
 function editDescription(docId,fileName,description) {
     var url = "@Url.Content("~/OrderDetail/_EditDescription/")" + docId+'/'+
     fileName + '/' + description;
    //do the rest} 
```

我的行动：

```
 public ActionResult _EditDescription(string id,string filename, string descritpion) 
```

我关心的部分是文件名和描述，因为它们可能很长，我不希望 url 看起来像这样：

```
 http://localhost/OrderDetail/_EditDescription/123/some long filename.pdf/this is a    long description for the name 
```

如何将我的数据发送到我的操作，而不必像查询字符串一样发送它？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T14:04:43.397

您可以使用 jQuery $.ajax 方法：

```
<div id="what-I-want-updated">

  <input id="whatever-the-id-is" type="text" value="@Model.ID" />
  <br /> 
  <input id="whatever-the-filename" type="text" value="@Model.Filename" />
  <br />
  <input id="whatever-the-description" type="text" value="@Model.Description" />
  <br />
  <button id="whatIsClicked">Update!</button>

</div> <!-- /#what-I-want-updated -->

<script>

    // You're probably clicking something to initiate update 
    var $whatIsClicked = $('#whatIsClicked');

    // .live persists on the page even after other ajax calls
    // So when the thing is clicked
    $whatIsClicked.live('click', function() {

       // Grab the information needed to update
       var theId = $('#whatever-the-id-is').val(); //Or it could be .text()
       var theFilename = $('#whatever-the-filename').val();
       var theDescript = $('#whatever-the-description').val();

       // Let's edit the description!
       $.ajax({
         type: "POST",
         url: "OrderDetail/_EditDescription", // the method we are calling
         contentType: "application/json; charset=utf-8",
         data: {id: theId, filename: theFilename, description: theDescript},
         dataType: "json",
         success: function (result) {
             alert('Yay! It worked!');
             // Or if you are returning something
             alert('I returned... ' + result.WhateverIsReturning);                    
         },
         error: function (result) {
             alert('Oh no :(');
         }
     });
    });
</script> 
```

即使它仍然可以工作，请确保将 Controller 方法更改为：

```
[HttpPost]
public ActionResult _EditDescription(string id, string filename, string descritpion) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:56:16.407

如果您喜欢通过 ajax`$.post`或通过具有`[HttpPost]`属性的操作来完成表单的完整发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:03:59.137

将您的操作声明为**POST**

```
[HttpPost]
public ActionResult _EditDescription(string docId, string filename, string description) 
```

创建一个不可见的 HTML 表单：

```
<form action="@Url.Content("~/OrderDetail/_EditDescription/")" method="post" name="editDescriptionForm">
   <input type="hidden" name="docId" />
   <input type="hidden" name="fileName" />
   <input type="hidden" name="description" />
</form> 
```

填写表格并用JS提交：

```
function editDescription(docId, fileName, description) {
    document.editDescriptionForm.docId = docId;
    ...

    document.editDescriptionForm.submit();
} 
```

# visual-studio-2010 - 为什么我在 vs2010 中不能更改目标框架？

> ID：11016391
> 
> 赞同：0
> 
> 时间：2012-06-13T13:54:09.443
> 
> 标签：visual-studio-2010, frameworks, target

我正在尝试升级旧的 vs 2003 项目并将其安装在似乎具有框架 2.0、3 和 3.5 的较新服务器 windows 2008（可能是 r2，不知道）上。我通过在 vs2010 中打开项目并让它为我升级来完成此升级。当试图在这个新服务器上安装它时，它说我需要框架 4，但我不明白为什么？项目->属性->编译->高级编译选项，目标框架显示2.0。这不应该意味着在将要安装它的机器上只需要 2.0 吗？

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:07:52.863

您需要确保包括安装程序在内的代码的所有方面都针对正确的框架。

# javascript - 可选择的限位停止

> ID：11016393
> 
> 赞同：0
> 
> 时间：2012-06-13T13:54:14.100
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使这个可选脚本具有选择限制。我希望它在选择限制超过限制数 4 时停止选择。

[http://jsfiddle.net/dw6Hf/51/](http://jsfiddle.net/dw6Hf/51/)

```
$(function() {
    $(".selectable").selectable({
        filter: "td.cs",

        stop: function() {
            var result = $("#select-result").empty();
            var result2 = $("#result2");
            $('.ui-selecting:gt(31)').removeClass("ui-selecting");

        //    alert($(".ui-selected").length);
            $('#divmsg').html($(".ui-selected").length*2+ " box selected")
            if ($(".ui-selected").length > 4) {
                //alert("Selection of only 4 allowed");
                $('#divmsg').html($('#divmsg').html() + ", Selection of only 4 allowed");
                $(".ui-selected").each(function(i, e) {                  
                    if (i > 3) {

                        $(this).removeClass("ui-selected");
                    }
                });
                return;
            }

            $(".ui-selected", this).each(function() {
                var cabbage = this.id + ', ';
                result.append(cabbage);
            });

            var newInputResult = $('#select-result').text();
            newInputResult = newInputResult.substring(0, newInputResult.length - 1);
            result2.val(newInputResult);
        }
    });
});​ 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:55:31.073

这有效

```
$( "#selectable" ).selectable({
    selecting: function(event, ui) {
         if ($(".ui-selected, .ui-selecting").length > 4) {
           $(ui.selecting).removeClass("ui-selecting");
         }
    }       
}); 
```

[这个](https://stackoverflow.com/questions/10817129/jquery-selectable-limit)的副本

**编辑** 这样的东西？

```
$(function() {
    $(".selectable").selectable({
        filter: "td.cs",

        // do not allow selecting more than four items
        selecting: function(event, ui) {
             if ($(".ui-selected, .ui-selecting").length > 4) {
               $(ui.selecting).removeClass("ui-selecting");
             }
        }               

        // do whatever you like with the selected
        stop: function() {
            var result = $("#select-result").empty();
            var result2 = $("#result2");            

            $('#divmsg').html($(".ui-selected").length*2+ " box selected")

            $(".ui-selected", this).each(function() {
                var cabbage = this.id + ', ';
                result.append(cabbage);
            });

            var newInputResult = $('#select-result').text();
            newInputResult = newInputResult.substring(0, newInputResult.length - 1);
            result2.val(newInputResult);
        }
    });
});? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:05:08.340

好的，现在我了解了这个应该给你你所要求的要求。从停止更改为可选意味着您可以在“选择”之前决定，而不是在触发停止之后。

[小提琴](http://jsfiddle.net/dw6Hf/56/)

# jsf - 自从升级到 JSF2.0 后，使用 f:validateDoubleRange 时，客户端 ID:FormID:ComponentID 会出现在验证消息之前

> ID：11016400
> 
> 赞同：1
> 
> 时间：2012-06-13T13:54:39.180
> 
> 标签：jsf, jsf-2

我已经从 JSF 1.1 升级到 JSF 2.0。早些时候我使用 f:validateLongRange 或 f:validateDoubleRange 并且验证工作正常。但是，由于我已迁移到 JSF 2.0，因此验证消息前面带有客户端 ID，如下所示：FormID:ClientID:0:ComponentID 在我的情况下，消息显示为

```
premiumCategory:j_idt368:0:tlNewLOS: Validation Error: Specified attribute
                is not between the expected values of 1 and 999,999. 
```

有一个[Jira](http://java.net/jira/browse/JAVASERVERFACES-2278)谈到了为 ClientID 加上前缀，但我认为它对我没有任何用处。我从博客 Communication in JSF 2.0 中了解到，这些标签处理程序在 JSF 2.0 中无法正常工作，因此我们应该使用 f:validator 创建自定义验证器

[我从这里](https://stackoverflow.com/questions/7445417/why-does-fvalidatedoublerange-only-work-for-sessionscoped)关注了 BalusC 的回答；唯一的区别是我没有从 bean 中获取我的最大值和最小值，我在 xhtml 中指定了它们，它仍然如上所述打印验证消息。

在调试时，我意识到客户端 ID 生成为 FormID:ClientID:0:ComponentID 并存储在 UIComponent 实例中，该实例传递给 MessageFactory.getMessage 方法。我之前提到的同一个博客中有一个主题是“Ajax 呈现形式外的内容”，我认为这可以解决我的问题，但还是没有运气。

现在我有我自己的自定义验证器类，它扩展到 DoubleRangeValidator 并覆盖 validate 方法。我得到了想要的消息。但是，我不相信为每个 f:validatorXXXX 组件编写自定义验证器是解决方案。

我仍在学习曲线上，谁能解释一下为什么 MessageFactory.getMessage 将这些 ID 绑定到面部消息的原因和位置？请告知，Dakshata Gulkhobare

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:16:03.727

`label`通过在感兴趣的输入组件上设置属性，可以覆盖标签。

```
<h:inputText ... label="Your label" /> 
```

这样验证消息的格式如下：

> 您的标签：验证错误：指定属性不在预期值 1 和 999,999 之间

否则，它确实会默认为组件的客户端 ID。

如果您碰巧`<h:outputLabel>`已经使用并希望准确使用它的值，但又不想将其复制到`label`每个输入组件的属性中，那么您可能会发现[OmniFaces](http://omnifaces.org) [`<o:outputLabel>`](http://showcase.omnifaces.org/components/outputLabel)很有帮助。

# mysql - 当更新找不到要更新的行时，MySQL 报告/导致错误？

> ID：11016402
> 
> 赞同：0
> 
> 时间：2012-06-13T13:54:48.750
> 
> 标签：mysql, sql, database

有没有办法让 MySQL 在执行时导致某种错误`UPDATE`并且没有行匹配条件？`UPDATE`返回受影响的行，如果没有匹配的行，它将为 0，但如果`UPDATE`根本没有更改任何内容，它也将为 0。那么有没有办法在不使用额外查询的情况下知道正在更新的行不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:26:22.820

只需检查返回的行数`update`并使用您的编程语言（JAVA/PHP/等）通过自定义消息/错误报告来处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:29:34.880

不。鉴于您的确切问题，如果没有额外的查询，就无法知道 0 的确切含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:07:11.247

作为一种解决方法，您可以添加一个始终会更新的特殊字段，例如`last_updated = NOW()`

# f# - 缺少项目子类型 F# 项目

> ID：11016404
> 
> 赞同：1
> 
> 时间：2012-06-13T13:54:54.883
> 
> 标签：f#

我尝试使用 Visual basic 2011 beta 加载 F# 项目，但我遇到了以下问题，这是第一次出现：

```
There is a missing project subtype.
Subtype: '{5B89FCC2-C9F6-49a8-8F8D-EDDCC3FDC9E9}' is unsupported by this installation 
```

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:39:27.390

在某些时候（VS2010？），您安装了[FsProjectExtender](http://fsprojectextender.codeplex.com/)以获得一些可用于 Visual Studio 中的 F# 项目的额外功能。只需为 VS2011 重新安装该扩展程序就可以了，或者删除`.fsproj`文件中的依赖项，如@Brian 所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:13:34.993

我不知道那个 guid 是做什么用的（Bing 搜索没有出现太多），所以你可以简单地尝试从文件`ProjectTypeGuids`中删除它`.fsproj`（只留下`f2a71f9b-5d33-465a-a702-920d77279786`用于 F# 项目系统的那个）。

# c# - 如何从不同的目录运行 WPF 应用程序？

> ID：11016405
> 
> 赞同：1
> 
> 时间：2012-06-13T13:54:55.583
> 
> 标签：c#, wpf

我已经使用 WPF 创建了一个基本工具。如果我从它所在的目录中运行该工具，则一切正常。但是，如果我从不同的目录运行，什么都不会发生。从命令行，它只是返回到提示符。我在 WinForms 应用程序中没有遇到过这个问题，并且该目录确实包含该工具所依赖的一个 dll。还有什么可能发生的？

编辑：我想我发现了这个问题。它在 MainWindow.xaml.cs 构造函数中的 InitializeComponent 调用中死亡。绑定到的属性正试图访问为空的对象。但是，我还没有弄清楚为什么只有当我从不同的目录运行时该属性才为空。认为这个问题解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:09:57.187

回复：为什么该属性为空

我怀疑 InitializeComponent 正在尝试加载一些资源并在 WorkingDirectory 中查找资源文件。

试试这个：

```
var realWD = Environment.CurrentDirectory;
Environment.CurrentDirectory =
        System.IO.Path.GetDirectory(
            System.Reflection.Assembly.GetEntryAssembly().Location);
InitializeComponent();
Environment.CurrentDirectory = realWD; 
```

**编辑：**刚刚重新格式化以避免水平滚动。

-杰西

# c# - 如何从 .aspx 页面上的 .ascx 获取控件引用？

> ID：11016409
> 
> 赞同：1
> 
> 时间：2012-06-13T13:54:59.923
> 
> 标签：c#, asp.net

我有一个这样的向导设置：

```
<asp:Wizard ID="Wizard1" runat="server" DisplaySideBar="false" onnextbuttonclick="OnNextButtonClick">
       <WizardSteps>
           <asp:WizardStep ID="WizardStep1" runat="server" Title="Step 1">
            <div class="content">
                <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
            </div>
           </asp:WizardStep>
           <asp:WizardStep ID="WizardStep2" runat="server" Title="Step 2">
               <div class="content">
                   <asp:PlaceHolder ID="PlaceHolder2" runat="server"></asp:PlaceHolder>
               </div>
           </asp:WizardStep> ...more 
```

然后在该页面的预渲染中添加控件，如下所示：

```
protected void Wizard1_PreRender(object sender, EventArgs e)
{
    PlaceHolder1.Controls.Add(LoadControl("Control1.ascx"));
    PlaceHolder2.Controls.Add(LoadControl("Control2.ascx"));
    PlaceHolder3.Controls.Add(LoadControl("Control3.ascx"));
    ...more controls added
 } 
```

在 .ascx 控件上，我有一个 ajaxToolkit:TabContainer 我想像这样访问它：

```
<ajaxToolkit:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0">  
            <ajaxToolkit:TabPanel ID="TabPanel1" HeaderText="PRV 1" runat="server"> 
```

所以我想要做的是阻止向导进入下一步并将 ajaxtoolkit:Tabcontainer 移动到下一个选项卡。我正在像这样访问下一个按钮：

```
protected void OnNextButtonClick(object sender, WizardNavigationEventArgs e)
{
     if(Wizard1.ActiveStepIndex == 2)
     {
          e.Cancel = true;
          //get ajaxToolKit:tabcontrol here
     }
} 
```

关于如何在 OnNextButtonClick 函数中访问 TabControl 的任何想法？这是一个 asp.net 网络应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:17:38.660

如果您不知道 Page 的深度，您可以使用 Page.GetControl("TabContainer1") 或使用递归方法（对 .ascx 很有用）。

```
public static Control FindControlRecursive(Control container, string name)
{
    if ((container.ID != null) && (container.ID.Equals(name)))
        return container;

    foreach (Control ctrl in container.Controls)
    {
        Control foundCtrl = FindControlRecursive(ctrl, name);
        if (foundCtrl != null)
            return foundCtrl;
    }
    return null;
} 
```

使用它 FindControlRecursive(Page, "TabContainer1")

# javascript - 使用 javascript 获取从 scriptlet 定义的 div 元素

> ID：11016410
> 
> 赞同：0
> 
> 时间：2012-06-13T13:55:04.023
> 
> 标签：javascript, html

我有一个包含类似脚本的网页

```
 <div id="flash_chart">
    <%=content_data['report_text']%>
    </div> 
```

该变量`content_data['report_text']`包含一个长字符串，实际上是一些 html 和 javascript 代码，如下所示

```
 <div id='Fusion_12345678'></div>
    <script type="text/javascript">
    <script class="fusioncharts" type='text/javascript'>
    if(!document.getElementById('id_chart_Fusion_1779126')){
    if(typeof(printRequest) === 'function') printRequest();
        window.chart_Fusion_1779126 = FusionCharts.render({
    swfUrl: 'http://localhost:8080/mysentry/assets/ireportpro      
    id: 'id_chart_Fusion_1779126',
    width: '100%',
    height: '450',
    debugMode: 0,
    registerWithJS: 1,
    renderAt: 'Fusion_1779126',
            ...
    </script> 
```

在我的网页上，我尝试使用`document.getElementById('Fusion_12345678')`从 scriptlet 中获取定义的 div，但它不起作用。任何人都知道如何使用 javascript 获取 div 'Fusion-12345678'？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:42:04.830

知道了。访问页面上定义的父 div 上的`<div>`using ：`childNodes`

```
document.getElementById("flash_chart").childNodes[1] 
```

# jsf-2 - 如何从 JSF Web 应用程序到不同的 Web 应用程序进行服务器端转发？

> ID：11016419
> 
> 赞同：1
> 
> 时间：2012-06-13T13:55:32.813
> 
> 标签：jsf-2

我想做一个从 JSF Web 应用程序到非 JSF Web 应用程序的服务器端转发，部署在同一个 EAR 中。有没有办法做到这一点？我似乎无法通过 FacesContext 简单地做到这一点。（注意，为了获得更多上下文，我将在转发之前将数据放入请求对象中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:07:16.460

这对任何 JSF API 都不可用。您需要退回到原始的 Servlet API。

首先你需要配置服务器启用“cross context”选项，以便能够通过[`ServletContext#getContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getContext%28java.lang.String%29). 在大多数服务器上默认禁用此功能。不清楚您使用的是哪个服务器，所以这里只是一些提示：对于 Tomcat，检查 的`crossContext`属性，对于`context.xml`Glassfish，检查.`crossContextAllowed``glassfish-web.xml`

完成后，您将能够`ServletContext`通过其在 JSF 中的上下文路径获取另一个，如下所示：

```
ServletContext currentServletContext = (ServletContext) externalContext.getContext();
ServletContext otherServletContext = currentServletContext.getContext("/otherContextPath"); 
```

然后，您需要`RequestDispatcher`从它获取所需资源的路径上的 a 并调用[`forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)它，从而传递当前的 HTTP servlet 请求和响应。

```
HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
otherServletContext.getRequestDispatcher("/path/to/other.xhtml").forward(request, response); 
```

最后，您需要通知 JSF 响应的呈现已被接管，而 JSF 不需要这样做。

```
facesContext.responseComplete(); 
```

您只需要确保此操作不是由 ajax 请求调用，而是由正常的同步请求调用，仅仅是因为您完全超越了对呈现来自 JSF 的响应的控制，并且通过这种方式 JSF JS/Ajax 引擎完全不知道会返回非 XML 响应。

*（免责声明：我从来没有将它与 JSF 结合使用，但它与“普通”JSP/Servlet 一起使用，理论上应该在 JSF webapp 中工作，因为它只是建立在 Servlet API 之上）*

# excel - 如何在 Excel 中创建范围图

> ID：11016425
> 
> 赞同：1
> 
> 时间：2012-06-13T13:55:59.623
> 
> 标签：excel, diagram

我不知道如何在 Excel 2010 中创建这样的范围图：

[范围图 http://i.msdn.microsoft.com/dynimg/IC267977.gif](http://i.msdn.microsoft.com/dynimg/IC267977.gif)

我的数据如下所示： 1, 12, 22 2, 8, 48 3, 22, 42 ...

第一列是 x 值，第二列是较低的 y 值，第三列是较高的 y 值。那是图中的黄色区域。

然后蓝色的也一样。

谢谢！

图片来源：http: [//msdn.microsoft.com/en-us/library/dd456630.aspx](http://msdn.microsoft.com/en-us/library/dd456630.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:28:33.510

我的建议如下：将以下内容粘贴到 Excel 工作表中

```
20% 20% 20% 20% 20%
10% 10% 10% 10% 10.0%
40% 10% -5% 10% 45.0%
20% 20% 20% 20% 20.0%
10% 40% 55% 40% 5% 
```

请注意，每列的总和为 100%

现在根据这个数据添加一个“堆叠区域”图表（在图表的区域类别下），并将第一、第三和第五种颜色着色为白色（或透明）

然后，您可以使用百分比来获取图表。20％的顶行对应于矩形等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T21:26:31.380

我会将我的数据排列在一个表中，如下所示：

```
axis   y_1  h_1 y_2 h_2
1      12    10 30  10
2      8     40 2   4
3      10    12 43  4
4      17    12 18  5
5      30    6  31  5
6      4     7  5   6
7      5     8  6   7
8      2     9  34  8
9      1     4  2   9 
```

然后，您可以在第一个轴上绘制列 y_1、h_1 和在第二个轴上绘制 y_2、h_2 列（y_i 是 y 值，h_i 是每个条带的高度）。将两个图表都设为堆积区域图表并更改系列 y_i 透明。

![在此处输入图像描述](../Images/b48194d0d26d4700649d68658d0868aa.png)

最后使第二个轴等于第一个轴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T01:02:38.850

使用 MS Office 2010 最适合我的是使用面积图，而不是堆叠。对于单个图表中的多个数据范围图，我需要从高到低排列数据图例（列名），方法是单击图表，然后在“图表工具”->“设计”选项卡下单击“选择数据”。将弹出一个名为“选择数据源”的新窗口。在窗口的左窗格中选择数据图例，然后使用左窗格顶部的箭头按钮向上或向下移动，以便图形从高到低堆叠。现在，我们需要选择对应于范围下端的图形，并通过格式化图形来填充实心“白色”。剩下的是范围图，数据的低端和高端之间有阴影区域。看起来有点复杂，但是做一个动手教程，

# oracle - 如何按类别、年份分组，以便每个类别包括每年的零和？

> ID：11016427
> 
> 赞同：2
> 
> 时间：2012-06-13T13:56:03.257
> 
> 标签：oracle, group-by

我想象的结果如下：

```
Category | Year |  sum  |
--------- ------ --------
    A      2008    200
    A      2009      0
    B      2008    100
    B      2009      5
   ...     ...     ... 
```

即每年和每个*类别**的**交易*总和。

 **有些情况下，一个*类别*在一年内没有任何*交易。*在这些情况下，不会出现第二行结果。为了在每个类别中包含 2008、2009，我如何必须重新编写上述查询？

```
select category, to_char(trans_date, 'YYYY') year, sum(trans_value)
from transaction
group by category, to_char(trans_date, 'YYYY')
order by 1, 2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:06:27.550

理想情况下，您需要一个类别表和一个年份表：

```
select c.category, y.year, nvl(sum(t.trans_value),0)
from categories c
cross join years y
left outer join transaction t
   on  to_char(t.trans_date, 'YYYY') = y.year
   and t.category = c.category
group by c.category, y.year
order by 1, 2; 
```

希望您确实有一个类别表，但您可能没有年份表，在这种情况下，您可以像这样“伪造”一个：

```
with years as
( select 2007+rownum year
  from dual
  connect by rownum < 10) -- returns 2008, 2009, ..., 2017
select c.category, y.year, nvl(sum(t.trans_value),0)
from categories c
cross join years y
left outer join transaction t
   on  to_char(t.trans_date, 'YYYY') = y.year
   and t.category = c.category
group by c.category, y.year
order by 1, 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:26:47.630

使用[分区外连接](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2177515)，您不需要类别表。

我使用了与“dcp”相同的事务表：

```
SQL> create table transactions
  2  ( category varchar(1)
  3  , trans_date date
  4  , trans_value number(25,8)
  5  );

Table created.

SQL> insert into transactions values ('A',to_date('2008-01-01','yyyy-mm-dd'),100.0);

1 row created.

SQL> insert into transactions values ('A',to_date('2008-02-01','yyyy-mm-dd'),100.0);

1 row created.

SQL> insert into transactions values ('B',to_date('2008-01-01','yyyy-mm-dd'),50.0);

1 row created.

SQL> insert into transactions values ('B',to_date('2008-02-01','yyyy-mm-dd'),50.0);

1 row created.

SQL> insert into transactions values ('B',to_date('2009-08-01','yyyy-mm-dd'),5.0);

1 row created. 
```

对于分区外连接，您只需要一组年份来对外连接进行分区。在下面的查询中，我使用了 2 年（2008 年和 2009 年），但您可以轻松调整该设置。

```
SQL> with the_years as
  2  ( select 2007 + level year
  3         , trunc(to_date(2007 + level,'yyyy'),'yy') start_of_year
  4         , trunc(to_date(2007 + level + 1,'yyyy'),'yy') - interval '1' second end_of_year
  5      from dual
  6   connect by level <= 2
  7  )
  8  select t.category                "Category"
  9       , y.year                    "Year"
 10       , nvl(sum(t.trans_value),0) "sum"
 11    from the_years y
 12         left outer join transactions t
 13           partition by (t.category)
 14           on (t.trans_date between y.start_of_year and y.end_of_year)
 15   group by t.category
 16       , y.year
 17   order by t.category
 18       , y.year
 19  /

Category       Year        sum
-------- ---------- ----------
A              2008        200
A              2009          0
B              2008        100
B              2009          5

4 rows selected. 
```

另请注意，我使用了 start_of_year 和 end_of_year，因此，如果您想过滤 trans_date 并且在该列上有索引，则可以使用它。另一种选择是简单地使用 trunc(t.trans_date) = y.year 作为开条件。

希望这可以帮助。

问候，
罗布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:58:33.537

这是一个完整的工作示例：

```
CREATE TABLE transactions (CATEGORY VARCHAR(1), trans_date DATE, trans_value NUMBER(25,8));
CREATE TABLE YEAR (YEAR NUMBER(4));

CREATE TABLE categories (CATEGORY VARCHAR(1));
INSERT INTO categories VALUES ('A');
INSERT INTO categories VALUES ('B');

INSERT INTO transactions VALUES ('A',to_date('2008-01-01','YYYY-MM-DD'),100.0);
INSERT INTO transactions VALUES ('A',to_date('2008-02-01','YYYY-MM-DD'),100.0);

INSERT INTO transactions VALUES ('B',to_date('2008-01-01','YYYY-MM-DD'),50.0);
INSERT INTO transactions VALUES ('B',to_date('2008-02-01','YYYY-MM-DD'),50.0);

INSERT INTO transactions VALUES ('B',to_date('2009-08-01','YYYY-MM-DD'),5.0);

INSERT INTO YEAR VALUES (2008);
INSERT INTO YEAR VALUES (2009);

SELECT b.category
     , b.year
     , SUM(nvl(a.trans_value,0))
  FROM (SELECT to_char(a.trans_date,'YYYY') YEAR
             , CATEGORY
             , SUM(NVL(trans_value,0)) trans_value
          FROM transactions a
        GROUP BY to_char(a.trans_date,'YYYY')
               , a.category ) a
     , (SELECT
        DISTINCT a.category
               , b.year
          FROM   categories a
             ,   YEAR b ) b
 WHERE b.year = to_char(a.year(+))
   AND b.category = a.category(+)
 GROUP BY
       b.category
     , b.year  
 ORDER BY 1
         ,2; 
```

输出：

```
 CATEGORY    YEAR    SUM(NVL(A.TRANS_VALUE,0))
1   A           2008    200
2   A           2009    0
3   B           2008    100
4   B           2009    5 
```**

# php - 显示新创建的缩略图而不先保存？

> ID：11016434
> 
> 赞同：2
> 
> 时间：2012-06-13T13:56:15.850
> 
> 标签：php, image-processing, http-headers, thumbnails

我正在测试一个缩略图图像创建器脚本，该脚本创建一个可以在 Web 浏览器中显示而无需先保存的缩略图。

目前我必须使用以下代码来显示图像：

```
include('image.inc.php');

    header('Content-Type: image/png');
    create_thumbnail('me.jpg', false, 200, 200); 
```

但是如何在标准网页上显示动态生成的缩略图图像以及旁边的 html 标记？

create_thumbnail 函数：

```
function create_thumbnail($path, $save, $width, $height){

    // Get the width[0] and height[1] of image in an array
    $info = getimagesize($path);

    // Create a new array that just contains the width and height
    $size = array($info[0], $info[1]);

    // Check what file type the image is
    if($info['mime'] == 'image/png'){

        $src = imagecreatefrompng($path);

    }else if($info['mime'] == 'image/jpeg'){

        $src = imagecreatefromjpeg($path);

    }else if($info['mime'] == 'image/gif'){

        $src = imagecreatefromgif($path);

    }else{
        // If it isn't a good file type don't do anything
        return false;
    }

    // Create a thumbnail with the passed dimensions
    $thumb = imagecreatetruecolor($width, $height);

    $src_aspect = $size[0] / $size[1];

    $thumb_aspect = $width / $height;

    if($src_aspect < $thumb_aspect){

        // Image is tall
        $scale = $width / $size[0];
        $new_size = array($width, $width / $src_aspect);
        $src_pos = array(0, ($size[1] * $scale - $height) / $scale / 2);
    }else if($src_aspect > $thumb_aspect){

        // Image is wide
        $scale = $height / $size[1];
        $new_size = array($height * $src_aspect, $height);
        $src_pos = array(($size[0] * $scale - $width) / $scale /2, 0);

    }else{

        // Image is square
        $new_size = array($width, $height);
        $src_pos = array(0, 0);
    }

    // Stop the new dimensions being less than 1 (this stops it breaking the code). Takes which ever value is higher.
    $new_size[0] = max($new_size[0], 1);
    $new_size[1] = max($new_size[1], 1);

    // Copy the image into the new thumbnail 
    // Newly created thumbnail, image copying from, starting x-coord of thumbnail, starting y-coord of thumbnail(0,0 will fill up entire thumbnail), x-coord of original image, y-coord of original image,  width of new thumbnail, height of new thumbnail, width of original image, height of original image
    imagecopyresampled($thumb, $src, 0, 0, $src_pos[0], $src_pos[1], $new_size[0], $new_size[1], $size[0], $size[1]);

    if($save === false){
        return imagepng($thumb);
    }else{

    // Create the png image and save it to passed location
    return imagepng($thumb, $save);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:00:00.073

如果我正确理解您的问题，您只需插入一个`img`标签并将其`src`属性设置为您的 php 脚本。

就像是：

```
<img src="thumbnailgenerator.php?image_path=me.jpg"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:58:46.017

将其转换为 base64（使用[base64_encode](http://php.net/manual/en/function.base64-encode.php)），然后显示：

```
<img src="data:image/jpg;base64,iVBORw0KGgoAAAANS==" /> 
```

# awk - 在文件中查找一个字符串并在另一个文件中替换它的匹配项

> ID：11016437
> 
> 赞同：0
> 
> 时间：2012-06-13T13:56:27.707
> 
> 标签：awk, solaris, ksh, replace

我正在尝试用另一个文件中匹配的别名替换一个文件中的字符串。

例如，我想匹配文件 A 每一行中的第一个字段，并将其替换为文件 B 中的内容。

我不知道如何解决这个问题？它会是带有 for 循环的 awk 吗？

试图在 Solaris 中编写脚本...

文件 A

> ```
> KVHPOJNOTES KVHPOJNOTESSERVER C_POJ_NOTES_C1D63EN
> KVHPOJNOTES KVHPOJNOTESSERVER C_POJ_NOTES_C99HXEN
> KVHNOTESIDANAPC KVHPOJANAPC C_POJ_NOTES_START_ANAPC
> KVHNOTESIDANAPC KVHPOJANAPC C_POJ_NOTES_STOP_ANAPC
> KVHNOTESIDANAPD KVHPOJANAPD C_POJ_NOTES_START_ANAPD 
> ```

文件 B

> ```
>  KVHNOTESIDAHMLB=ahml02 
>     KVHNOTESIDAHUBA=ahub01
>     KVHNOTESIDALMLD=alml02
>     KVHNOTESIDANAPC=anap02
>     KVHNOTESIDANAPD=anap04
>     KVHNOTESIDALMLF=alml06 
> ```

我在想这将是类似的东西

```
for i in `cat "File A"`
do
grep $1 "File B" | awk ' { print $3 } '
done 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:23:29.473

使用 AWK：

```
awk '{ if(NR != FNR) { if(map[$1]) $1=map[$1];print } 
     else { split($0,a,"=");map[a[1]]=a[2];}}' FileB FileA 
```

# asp-classic - 从 IIS 6.0 迁移到 IIS 7.5 后上传图片

> ID：11016438
> 
> 赞同：1
> 
> 时间：2012-06-13T13:56:28.547
> 
> 标签：asp-classic, migration, iis-6, iis-7.5

几天前我们从 Windows Server 2003 和 IIS 6.0 迁移到 Windows Server 2008 R2 和 IIS 7.5 后，尝试将图片上传到 IIS 应用程序时遇到了问题。

您可以选择一张图片，但是一旦您单击“发送”按钮执行上传，您就会看到以下错误消息：

"

```
Server object error 'ASP 0177 : 800401f3'

Server.CreateObject Failed

/****/****/photouploadproc.asp, line 15

800401f3 
```

"

在这段代码中，程序使用了一个专有的第三个库，称为 w3upload.dll。我们尝试将 dll 从旧 IIS 迁移到新 IIS 并授予访问权限。它仍然无法正常工作。

我们接近精神错乱的边缘，所以请，如果有人有任何提示或提示，我们将很乐意接受它:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:38:20.353

我想你在 IIS 的 64 位应用程序池中运行？您可能需要设置 IIS 以允许 32 位应用程序（dll、com 对象和程序集等）。

![导航到管理工具 - IIS7 并加载应用程序池的属性](../Images/d686bfd255ad24e4f79473d3753fc789.png)

另外，您是否使用 regsvr32 注册了 dll？

# jquery - 如何解析从 Ajax 获取的 xml

> ID：11016439
> 
> 赞同：0
> 
> 时间：2012-06-13T13:56:31.643
> 
> 标签：jquery, xml-parsing

我有一个从我的数据库中填充的表。我的目标是在用户从列表中选择另一个元素时仅使用更新表。

为此，我正在使用 Ajax。我有我使用 ajax 的 HTML 模板：

```
{literal}
<script type="text/javascript">

function refreshToolPrivileges($Object)
{
$.ajax({
    url: '/ajax/user_management/refresh_tool_privileges'+$Object,
    cache: false,
    dataType: 'xml',
    success: function(xml) {
        $(xml).find("Row").each(function(){

        });     
    }
});
}
</script>
{/literal} 
```

Ajax 正在调用一个 php 文件，我在其中返回一个格式化的 xml 文件：

```
$format =
"\n\t<Row>
\t\t<group_id>{$fin_array['group_id']}</group_id>
\t\t<user_id>{$fin_array['user_id']}</user_id>
\t\t<Object>{$fin_array['Object']}</Object>
\t\t<Read>{$fin_array['Read']}</Read>
\t\t<Update>{$fin_array['Update']}</Update>
\t\t<Insert>{$fin_array['Insert']}</Insert>
\t\t<Delete>{$fin_array['Delete']}</Delete>
\t</Row>";

echo "<Result>" .$format. "\n</Result>"; 
```

现在，我不知道如何从返回的 XML 中获取日期并自动更新我的表。

这是表格：

```
<table width='700px' id="employeetable" class="tablesorter" style='table-layout:fixed;'>
<thead>
    <tr>
        <th>Group Id</th>
        <th>User Id</th>
        <th>Object</th>
        <th>Read</th>
        <th>Update</th>
        <th>Insert</th>
        <th>Delete</th>
    </tr>
</thead>
<tbody>
    {foreach from=$privileges item=privilegesItem name=foo}
    <tr>
        <td>{$privilegesItem['group_id']}</td>
        <td>{$privilegesItem['user_id']}</td>
        <td>{$privilegesItem['Object']}</td>
        <td>{$privilegesItem['Read']}</td>
        <td>{$privilegesItem['Update']}</td>
        <td>{$privilegesItem['Insert']}</td>
        <td>{$privilegesItem['Delete']}</td>
    </tr>
    {/foreach}
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:17:20.607

这是解决方案：

```
$.ajax({
    url: '/ajax/user_management/refresh_tool_privileges_table/'+$Object,
    cache: false,
    dataType: 'xml',
    success: function(xml) {
        $(xml).find("Row").each(function(){
            //alert('aaa');
            var group_id =$(this).find("group_id").text();
            var user_id=$(this).find("user_id").text();
            var Object=$(this).find("Object").text();
            var Read=$(this).find("Read").text();
            var Update=$(this).find("Update").text();
            var Insert=$(this).find("Insert").text();
            var Delete=$(this).find("Delete").text();

            $('tbody').remove();
            // jquery create a new tbody and insert aftre thead
            $('#employeetable').append(
                    '<tbody>'+
                    '<tr>'+
                        '<td>'+group_id+'</td>'+
                        '<td>'+user_id+'</td>'+
                        '<td>'+Object+'</td>'+
                        '<td>'+Read+'</td>'+
                        '<td>'+Update+'</td>'+
                        '<td>'+Insert+'</td>'+
                        '<td>'+Delete+'</td>'+
                    '</tr>'+
                    '</tbody>');

        });     
    }
}); 
```

我正在移除主体，然后使用新变量创建一个新主体。

# c++ - C++ Boost Graph Library:- 为 DFS 指定根节点

> ID：11016441
> 
> 赞同：3
> 
> 时间：2012-06-13T13:56:44.740
> 
> 标签：c++, depth-first-search, boost-graph

在有向图上使用标准，

```
std::vector<size_type> dtime(N);
std::vector<size_type> ftime(N);
size_type t = 0;
dfs_time_visitor<size_type*> vis(&dtime[0], &ftime[0], t);
depth_first_search(graph, visitor(vis)); 
```

似乎总是从节点 0 开始 dfs。

如何告诉算法从已知的“根节点”开始？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T15:21:25.910

[在这里](http://www.boost.org/libs/graph/doc/depth_first_search.html)你可以找到所有重载的列表`depth_first_search`。您需要的是“[命名参数](http://www.boost.org/libs/graph/doc/bgl_named_params.html)版本”。您需要使用的参数是“root_vertex”，您的调用`depth_first_search`将只是：

```
depth_first_search(graph, visitor(vis).root_vertex(root_vertex_descriptor)); 
```

# jquery - jQuery 不适用于带有 Chrome 的 facebook 应用程序

> ID：11016446
> 
> 赞同：1
> 
> 时间：2012-06-13T13:56:51.310
> 
> 标签：jquery, facebook, google-chrome, facebook-apps

我有一个使用 jQuery 的代码，它检查是否单击了正确的图像，然后根据答案是否正确将图像更改为红色或绿色。之后，它会等待 2 秒并重新加载页面以显示下一个图片对。单独使用它就可以正常工作，但是一旦我将其放入 facebook 应用程序中，它就无法正常工作。

在 IE 和 Firefox 中，它会在单击时更改颜色，但不会重新加载页面。然而，在 chrome 中，它甚至不会改变点击时的颜色。可能是 iframe 的问题还是什么？在 iframe 中使用 jQuery 时是否需要特定参数？

我的代码摘录如下所示：

```
jQuery(document).ready(function(){
   jQuery('img#0').live("click", function(){
        if (jQuery(this).hasClass("correct")){
            jQuery(this).attr('src', "0g.png");
        } else{
            jQuery(this).attr('src', "0r.png");
        }

    });
}); 
```

如您所见，我什至将 $ 更改为 jQuery 以防止与其他可能的库发生冲突。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:19:51.170

when you are running jquery inside of a facebook page or app you have to use https, including the link inside your html to your script file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:17:08.720

具有 id 的图像`0`是 HTML4 和 XHTML 中的无效 HTML 元素 id。它在 HTML5 中有效。这可能是您的`DOCTYPE`声明的问题。

如果更改 DOCTYPE 不能解决问题，您可以委托给图像点击事件。

```
// html
<div id="someElement">
   <img class="correct" />
</div>

// jquery
$("div#someElement").delegate("img", "click", function() {
   var correct = $(this).hasClass("correct");
   $(this).attr('src', (correct ? "0g.png" : "0r.png" ) );
}); 
```

[jQuery.delegate()](http://api.jquery.com/delegate/)与该`.live()`函数类似，它将应用于当前和未来的元素。不同之处在于delegate() 将事件处理程序应用于父元素( `someElement`) 并监视来自子元素的冒泡事件。 `live()`监视文档顶部的这些冒泡事件，并且可能对性能更差。文档页面上有更多信息，这里有很多关于两者之间差异的讨论。

以下是 ID 属性规范的相关链接：

[html5 规范](http://dev.w3.org/html5/spec/global-attributes.html#the-id-attribute)
[html4 规范](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5.2)
[xhtml 指南](http://www.w3.org/TR/xhtml1/#guidelines)
[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:46:47.427

好吧，这可能是有史以来最愚蠢的想法——但它对我有用。浏览网页时，JQuery 在 chrome 中的网页上加载良好 - 而不是在 Facebook 中。当我在 fb 应用程序的 chrome 中加载它时，它失败了。

IE 运行良好。我发现我链接到 http:// 而不是 https:// （记住一切都必须是安全的）。当我将其更改为 https:// 时，它工作正常。

# swing - 在 JTable 获得焦点之前，单元格内容不会显示在 JTable 中

> ID：11016450
> 
> 赞同：0
> 
> 时间：2012-06-13T13:56:54.897
> 
> 标签：swing, jtable, cellrenderer

您好有一个 JTable，每个单元格都是一个 JPanel（使用单元格渲染器）

直到我单击 JTable 中的某个位置以获得焦点时，才会显示单元格的内容。（当我对每个单元格使用 JTextArea 而不是 JPanel 时，它运行良好）

我尝试在某些地方使用 updateUI() 但它没有帮助..

问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:54:09.633

要在面板中获得功能控件，您不仅需要 a `TableCellRenderer`，还需要 a `CellEditor`，如本[例所示](https://stackoverflow.com/a/11179669/230513)。正如@kleopatra 评论的那样，*不*`updateUI()`应该是必需的。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:40:47.567

尝试

```
table.repaint();
table.revalidate(); 
```*

# svn - 提交被预提交挂钩 SVN 阻止

> ID：11016458
> 
> 赞同：1
> 
> 时间：2012-06-13T13:57:05.770
> 
> 标签：svn, pre-commit

我的服务器上有颠覆，当我尝试提交时，出现如下错误：

```
error creating module:org.tigris.subversion.javahi.ClientException:svn:
Commit blocked by pre-commit hook(exit code 199) with no output.
svn MERGE of '/svn/mssql/trunk':409 Conflict (http://www.domain.com) 
```

然后我尝试检查 /var/log/httpd/error_log 中的错误日志

我收到如下错误：

```
Could not MERGE resource "/svn/[project name]/!svn/act/8b7476df-3701-0010-a025-c590208c08a0" into  "/svn/[project name]/trunk"

Commit blocked by pre-commit hook (exit code 199) with no output.  [409, #165001] 
```

那是什么错误？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:43:18.543

有两种不同类型的*预提交*钩子：

*   服务器端：这是标准的 Unix 预提交挂钩。钩子本身位于存储库`hooks`目录中。如果该钩子不可执行，或者没有调用`pre-commit`该钩子的钩子脚本，则该钩子不会运行。
*   TortoiseSVN 客户端钩子：钩子在客户端上，特定于 TortoiseSVN。

当您说*pre-commit hook*时，您是在谈论服务器上的那个还是计算机上的那个？你说你把钩子放在`exit 0`前面修改了。

你没有说明钩子的作用，或者是谁把它放在那里的。这使得很难确定出了什么问题。有数以千计的 Subversion 钩子在执行各种任务。我不知道这个是什么。这个钩子是谁设的？默认情况下，Subversion 没有活动的钩子。一定是有人添加的。谁干的？

而且，他们为什么要放这个钩子？这个钩子应该完成什么。一些挂钩可防止将重复文件添加到存储库中。一些防止不匹配的套管。有些做安全，有些只是玩笑。

[在Pastebin](http://pastebin.com/)上发布你的钩子，然后回来告诉我们你已经更新了它。让我们知道是谁添加了这个钩子以及为什么。

否则，我们能为您做的不多。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T02:00:38.303

我可以使用以下代码在预提交脚本上添加新行来解决此问题：

```
#!/bin/sh
exit 0; 
```

之后，我可以提交、更新、结帐等:)

但是我必须在每个存储库项目中手动添加这些行吗？是克服这个的另一个想法吗？

谢谢

# php - 冒泡、排序、策略

> ID：11016463
> 
> 赞同：0
> 
> 时间：2012-06-13T13:57:31.697
> 
> 标签：php, bubble-sort

我正在研究 php 的冒泡排序策略，您可以在[此处](http://pastebin.com/rgGGWHg0)查看代码，在主循环中，有两个条件必须为真，因此循环将运行，我知道该变量是因为我们不希望我们的循环运行，直到即使数组已经排序，它的最大迭代也是如此，但我不明白为什么我们需要检查我们是否已经进入最大迭代？为什么我们不能只检查变量（我的假设是我们可以在变量处遇到**一些**问题并且我们不想要一个永恒的循环）。无论如何我不确定，如果有人能告诉我为什么我们不需要只检查主循环中的变量，我将非常感激，谢谢大家，祝你有美好的一天。

```
function sort(array &$vec)
    {
        $sorted = false;
        $size = sizeof($vec);
        for($i=0; $i<=$size-2 && !$sorted; $i++)
        {
            $maybeSorted = true;
            $from = 0;
            $till = $size-1-$i;
            for($j=$from; $j<$till; $j++)
            {
                if($vec[$j]>$vec[$j+1])
                {
                    $maybeSorted = false;
                    $temp = $vec[$j];
                    $vec[$j] = $vec[$j+1];
                    $vec[$j+1] = $temp;
                }
            }
            if($maybeSorted)
            {
                $sorted = true;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:05:38.653

你可以查看[这个维基百科链接](http://en.wikipedia.org/wiki/Bubble_sort)，在那里你可以找到伪代码中的算法。尝试理解每一步，并在您喜欢的语言中开始新的实施。这是学习某事的最好方法。新的！

冒泡排序在每一轮中执行类似交换元素的操作并重复此操作，直到最后一轮没有任何交换。

**更新**一个好的冒泡排序算法的一些例子：

```
function sort(array &$vec) {
  $n = sizeof($vec);

  do {
    $newn = 1;
    for ($i = 0; $i < ($n - 1); $i++) {
      if ($vec[$i] > $vec[$i + 1]) {
        $tmp         = $vec[$i];
        $vec[$i]     = $vec[$i + 1];
        $vec[$i + 1] = $tmp;
        $newn        = $i + 1;
      }
    }
    $n = $newn;
  } while ($n > 1);
} 
```

1.  获取数组中元素的数量（我们希望现在没有排序）
2.  `$n`在有未排序的元素时循环`$n > 1`
3.  在`for`循环中，我们遍历元素并检查它们是否需要交换
4.  我们这样做直到没有元素可以交换，所以`$n`不是`> 1`

例子：

```
| 55 |  7 | 78 | 12 | 42 | 1\. run
|  7 | 55 | 78 | 12 | 42 |
|  7 | 55 | 12 | 78 | 42 |
|  7 | 55 | 12 | 42 | 78 | last comparison
|  7 | 55 | 12 | 42 | 78 | 2\. run
|  7 | 12 | 55 | 42 | 78 |
|  7 | 12 | 42 | 55 | 78 | last comparison (we now 78 is sorted!)
|  7 | 12 | 42 | 55 | 78 | 3\. run
|  7 | 12 | 42 | 55 | 78 | sorted! (nothing was swapped) 
```

（未经测试，但应该可以）我希望这会对你有所帮助。

# android - Android 在 AsyncTask 中显示和隐藏视图

> ID：11016467
> 
> 赞同：0
> 
> 时间：2012-06-13T13:57:47.953
> 
> 标签：android, layout, android-asynctask

嗨，我有一个 AysncTask，我想在完成隐藏它时运行加载视图。有谁知道如何做到这一点？目前它没有显示加载视图。

这就是我尝试过的

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    loadingView = LayoutInflater.from(getBaseContext()).inflate(R.layout.loadingcell,
            null);

    //Check Preferences which sets UI

    checkPreferences();
   PostTask posttask;
   posttask = new PostTask();
   posttask.execute();

}

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;

        loadFixtures();
        publishProgress("progress");
        loadResultsFeed();
        publishProgress("progress");
        loadNewsFeed();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");

            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");
         FillData();
         loadingView.setVisibility(View.GONE);
      }
} 
```

加载单元格.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white" 
    android:id="@+id/loadingcell">

    <include
        layout="@layout/header" />

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="87dp" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="115dp"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/progressBar1"
        android:gravity="center"
        android:text="Loading..."
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/blue" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:15:50.293

您没有在代码中使用 AsyncTask。使用这样的东西：

```
private class doSomething extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        //Inflate you view or do anything here before loading stuff
    }

    protected Void doInBackground(Void... urls) {
        //loading stuff
    }

    protected void onProgressUpdate(String... progress) {
        //change your UI - like a progressbar
    }

    @Override
    protected void onPostExecute(String unused) {
        //Hide the progressbar
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:11:16.870

您需要有一个内容`Activity`- 您可以使用[`setContentView`](http://developer.android.com/reference/android/app/Activity.html#setContentView%28android.view.View%29)

# php - 基于第一个数组的循环 PHP 数组

> ID：11016473
> 
> 赞同：0
> 
> 时间：2012-06-13T13:58:02.213
> 
> 标签：php, arrays

我刚刚发现了如何基于另一个数组循环一个数组，但我的问题是，如果第二个数组只是 1 个对象，那么它可以正常工作，但我想让它与两个对象一起工作。

这是一个例子，它是如何工作的，

```
$shorten = array(
  0 => 'ECAR',
  1 => 'CCAR',
  2 => 'ICAR',
  3 => 'SCAR',
  4 => 'FCAR',
  5 => 'PCAR',
);

$data = array(
  'Hertz' => array(
        'ECAR' => '49.21',
        'CCAR' => '71.04',
        'ICAR' => '89.58',
        'SCAR' => '100.00',
    )
  ),
  'Avis' => array(
        'ECAR' => '412.00',
        'CCAR' => '347.00',
        'ICAR' => '285.00',
        'SCAR' => '224.00',
        'FCAR' => '165.00',
        'PCAR' => '100.00',
    )
  ),
);

// default array as the base
$shorten = array_combine($shorten, array_fill(0, count($shorten), 'n/a'));

foreach($data as &$array) {
    // merge to get set members
    $array = array_merge($shorten, $array);
}
unset($array);

print_r($data); 
```

但我想让它和这个一起工作，

```
$shorten = array(
  0 => 'ECAR',
  1 => 'CCAR',
  2 => 'ICAR',
  3 => 'SCAR',
  4 => 'FCAR',
  5 => 'PCAR',
);

$data = array(
  'Hertz' => array(
    'NYCT01' => array(
        'ECAR' => '49.21',
        'CCAR' => '71.04',
        'ICAR' => '89.58',
        'SCAR' => '100.00',
    )
  ),
  'Avis' => array(
    'NYCT01' => array(
        'ECAR' => '412.00',
        'CCAR' => '347.00',
        'ICAR' => '285.00',
        'SCAR' => '224.00',
        'FCAR' => '165.00',
        'PCAR' => '100.00',
    )
  ),
);

// default array as the base
$shorten = array_combine($shorten, array_fill(0, count($shorten), 'n/a'));

foreach($data as $firstArray) {
    foreach($firstArray as &$array){
        // merge to get set members
        $array = array_merge($shorten, $array);
    }
}
unset($array);

print_r($data); 
```

这就是我想要的，

```
Array
(
    [Hertz] => Array
        (
            [ECAR] => 49.21
            [CCAR] => 71.04
            [ICAR] => 89.58
            [SCAR] => 100.00
            [FCAR] => n/a
            [PCAR] => n/a
        )

    [Avis] => Array
        (
            [ECAR] => 412.00
            [CCAR] => 347.00
            [ICAR] => 285.00
            [SCAR] => 224.00
            [FCAR] => 165.00
            [PCAR] => 100.00
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:19:53.023

```
foreach($data AS $company => $nyc){
    $inner = $nyc['NYCT01'];
    foreach($shorten AS $car){
        if(array_key_exists($car, $inner)){
            $output[$company][$car] = $inner[$car];
        }else {
            $output[$company][$car] = "n/a";
        }
    }
} 
```

只需遍历数据并检查任何汽车的键是否存在于 NYCT01 数组中，如果它确实设置了值，否则为“n/a”。

我的输出：

```
Array
(
    [Hertz] => Array
        (
            [ECAR] => 49.21
            [CCAR] => 71.04
            [ICAR] => 89.58
            [SCAR] => 100.00
            [FCAR] => n/a
            [PCAR] => n/a
        )

    [Avis] => Array
        (
            [ECAR] => 412.00
            [CCAR] => 347.00
            [ICAR] => 285.00
            [SCAR] => 224.00
            [FCAR] => 165.00
            [PCAR] => 100.00
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:12:46.467

好的，得到它的工作这是我想的真正的代码，

```
foreach($data as $company => $nyc){
    foreach($nyc as $inner => $s){
        foreach($shorten as $car){
            if(array_key_exists($car, $nyc[$inner])){
                $output[$company][$car] = $nyc[$inner][$car];
            }else {
                $output[$company][$car] = "n/a";
            }
        }
    }
} 
```

非常感谢你的帮助马库斯，

祝你好运。

# uml - Eclipse：如何以编程方式将 UML 转换为 ecore

> ID：11016477
> 
> 赞同：2
> 
> 时间：2012-06-13T13:58:12.853
> 
> 标签：uml, eclipse-emf, eclipse-emf-ecore

我已经加载了一个带有 uml 图的 xmi 文件。结果我得到了一个 org.eclipse.uml2.uml.Package。

现在我想以编程方式将其转换为 Ecore (ePackage)。

我已经查看了来自 org.eclipse.uml2.uml.util.UMLUtil 的 UML2EcoreConverter。但我不清楚它的转换方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:03:44.170

而不是直接去UML2EcoreConverter，看看

org.eclipse.uml2.uml.util.UMLUtil.convertToEcore（包，地图）

它接受一个包和一个选项 Map 并返回转换后的 EPackage(s)。可以将来自 UMLUtil.UML2EcoreConverter.OPTION__* 的选项作为键提供选项映射。可能的值为 UMLUtil.OPTION_DISCARD */* OPTION_IGNORE/OPTION_PROCESS */OPTION_REPORT*。所有选项默认为 OPTION__IGNORE。

这些选项中的大多数用于处理不能完全映射到 Ecore 的 UML2 类图的概念，因此您可以控制应如何处理它们。

对于扩展特征映射（子集/联合、重新定义...），请参见OPTION_REDEFINING *、*OPTION_SUBSETTING* *、OPTION__UNION_PROPERTIES、*OPTION_DUPLICATE* ***。将所有这些设置为 OPTION_PROCESS 应该没问题。

您可能想要禁用的一个选项是 OPTION__SUPER_CLASS_ORDER。这将按字母顺序重新排序泛化和接口实现，当您想要继承特定的超级实现时，这可能会引起实现问题。另一个是 OPTION__CAMEL_CASE_NAMES，它将处理类和功能名称以强制采用严格的驼峰式方案。这仅在您的 UML 工件没有有效的 java 名称的情况下才有意义。只需将它们设置为 OPTION_IGNORE，或者，要查看它们将在何处进行更改，设置为 OPTION_REPORT。

反过来也有一个 convertFromEcore(...) 。

如果您想更好地了解 UML2EcoreConverter 的内部工作原理：它基本上是一个简单的递归访问者，它遍历 UML 模型，将每个工件转换为其 Ecore 等效项并进行一些清理。它扩展了 UMLSwitch 以处理不同的元类。因此，例如要查看如何将 UML 属性转换为 EStructuralFeature，请查看 caseProperty(...)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T22:08:59.423

您只能将一种方式从 Ecore 转换为 UML。

# c# - 使用密码锁定 iPhone 设备

> ID：11016478
> 
> 赞同：0
> 
> 时间：2012-06-13T13:58:14.547
> 
> 标签：c#, iphone, ios, apple-push-notifications, mdm

我目前正在使用 APNS MDM API，我想用给定的 PASSCODE 锁定设备。我已成功锁定设备，但我希望如果未设置密码，那么我希望能够选择密码来锁定设备。

我怎样才能做到这一点？是否可以使用 MDM API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:38:22.627

不幸的是，使用 MDM 无法做到这一点。

# jquery - jQuery：包括除包含 TH 的所有 TR

> ID：11016479
> 
> 赞同：2
> 
> 时间：2012-06-13T13:58:14.800
> 
> 标签：jquery, jquery-selectors

我想获取不包括 TH 的所有 TR 的列表。

我的初始选择器是

```
$(".lanes tr") 
```

我试图使用`not`选择器来限定它，但它不是很有效

```
var rowsToInclude = $(".lanes tr").not(function(){
    return ($(this).find('th').length == 0) ? false : true;
}); 
```

我的语法错误还是有更简单的方法来完成这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:59:38.723

那不是`:not()`选择器，而是`.not()`方法。通过实际使用选择器，它要简单得多：

```
$(".lanes tr:not(:has(th))") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:04:32.880

这有点整洁，应该可以工作：

```
var rowsToInclude = $(".lanes tr").filter(function(){
    return $("th",this).length == 0
}); 
```

# c# - WPF在不修改应用程序的情况下在鼠标下找到控件

> ID：11016481
> 
> 赞同：0
> 
> 时间：2012-06-13T13:58:18.630
> 
> 标签：c#, .net, wpf

我正在创建一个日志系统（“外部”应用程序）来记录对应用程序的所有点击。我已经设置了一个`PreFilterMessage`检测鼠标点击的功能，但我找不到被点击的控件/元素。

我试过了，`Mouse.DirectlyOver`但元素总是`null`. 我也尝试过，`VisualTreeHelper.HitTest`但我没有一个`Visual`可以进行搜索。

我无权访问应用程序的内部：只能访问 Main 方法（使用`Application.Run(new MainForm());`and my `Application.AddMessageFilter(new Logger());`）。

有没有人知道（或四处走走）如何在应用程序中（在 .Net 3.5 中）获得单击的控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:00:54.730

一段时间以来，我一直在使用一个名为 Snoop 的令人惊叹的小应用程序，我认为它完全符合您的需求，它是开源的 (C#)，如果您能了解它的工作原理，它可能对您有用。（所有 WPF 开发人员都应该得到这个，不，我不在 Snoop 上工作，哈哈）

[http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

# jquery - 我可以在 Fancybox 2 中放置一个文本框吗？

> ID：11016483
> 
> 赞同：0
> 
> 时间：2012-06-13T13:58:22.353
> 
> 标签：jquery, textbox, fancybox, fancybox-2

我正在尝试将文本框放入 Fancybox2。

但是，当我单击文本框时，Fancybox 代码似乎会重新加载。我怎样才能防止这种情况发生？

您可以在此处查看问题示例；[http://jsfiddle.net/geefg/11/](http://jsfiddle.net/geefg/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:17:47.733

[http://jsfiddle.net/64epM/](http://jsfiddle.net/64epM/)

我做了一个技巧，用内容替换内容：

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        padding : 0,
        afterLoad : function() {
            this.content = this.content.html();                            
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:14:04.180

问题是当你点击fancybox的内容时，就像点击一样`<a>`，就是重新加载页面。

尝试将`input`字段隐藏`div`：

```
<a class="fancybox" href="#data">Some content</a>

<div style="display:none">
    <div id="data"><input type="text" id="TextBox3" name="TextBox3"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T19:37:02.153

我做了另一个技巧，使它完美地工作

在调用 .fancybox 之前

只需检查将由 fancybox 显示的 div 是否可见

像这样

```
 if ($(".fancybox").is(":visible")) {
     return false;
 }
else{
   $(".fancybox").fancybox({
     padding : 0
    });
} 
```

这将使您的文本可编辑

# c# - 不可调用的方法错误

> ID：11016489
> 
> 赞同：0
> 
> 时间：2012-06-13T13:58:52.133
> 
> 标签：c#, .net, wcf-ria-services

我尝试**在 RIA 服务中使用 SQL SERVER VIEW。**

所以我创建了一些视图并更新了 EDMX。

现在我尝试创建一些 RIA Services 方法，例如

```
public IQueryable<ErrorsFullView> GetErrorsFullViews()
{
   return this.ObjectContext.ErrorsFullViews();
} 
```

但是得到一个错误：

**不可调用的成员 '.....ErrorsFullViews' 不能像方法一样使用。**

任何线索如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:02:45.253

正如错误所说，`ErrorsFullViews`它不是一种方法。尝试删除括号：

```
public IQueryable<ErrorsFullView> GetErrorsFullViews()
{
   return this.ObjectContext.ErrorsFullViews;
} 
```

# java - 动态更改树选择时显示的表单

> ID：11016492
> 
> 赞同：0
> 
> 时间：2012-06-13T13:59:02.167
> 
> 标签：java, jdeveloper, oracle-adf

我目前正在学习 adf 框架，在这样做的同时，我发现自己处于无法解决的情况。

我有一个运行良好的树组件。我也有不同的形式，对应不同层次的树。我不想同时显示所有表单，我只想显示与树中所选项目对应的表单。

为了解决这个问题，我创建了 af:switcher，创建了构面并将表单移到那里。这是我迷路的地方，我该如何告诉切换器更改表格？我尝试使用切换器上的 facetName 将它们链接在一起，但没有成功。我怀疑我没有在那里链接正确的东西，但我也无法从树中找到任何有用的东西！我认为它与 selectionListener 和一个 bean 有关，但我想不出一种方法来做到这一点。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:01:47.017

[请参阅http://www.oracle.com/technetwork/developer-tools/adf/learnmore/index-101235.html#CodeCornerSamples](http://www.oracle.com/technetwork/developer-tools/adf/learnmore/index-101235.html#CodeCornerSamples)的示例 #50

坦率

# linux - 错误：未定义的引用

> ID：11016493
> 
> 赞同：1
> 
> 时间：2012-06-13T13:59:03.677
> 
> 标签：linux, gcc, linker, makefile, installation

我正在使用 linux-mint 11 并尝试在我的机器上从项目紫色安装“sendip”工具。

我对makefile和linux内部了解不多。

但是在尝试安装它时，出现这些错误。请帮我解决这个问题。

这次对我来说最重要的是尽快在我的机器上安装这个工具。

它完美地安装在红帽机器上，不会产生任何问题。

我在互联网上搜索并找到了许多解决方案，但它们都没有解决，即使有些看起来对我来说无关紧要，但为了安全起见，我都尝试了它们......

```
1\. LDFLAGS='-ldl' make install
2\. sudo apt-get install glibc*
3\. make CFLAGS="${CFLAGS} -ldl"
4\. sudo apt-get install libjpeg62-dev
5\.  sudo apt-get install libdb-devel
6\. sudo apt-get install libdbl 
```

错误 ：

```
 udit@udit-Notebook ~/Desktop/sendip-2.5-mec-0 $ make
   for subdir in mec ; do \
    cd $subdir ;\
    make  ;\
    cd ..  ;\
    done
make[1]: Entering directory `/home/udit/Desktop/sendip-2.5-mec-0/mec'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/home/udit/Desktop/sendip-2.5-mec-0/mec'
sh -c "if [ `uname` = Linux ] ; then \
gcc -o sendip -g  -rdynamic -ldl -lm -fPIC -fsigned-char -pipe -Wall -Wpointer-arith  
-Wwrite-strings -Wstrict-prototypes -Wnested-externs -Winline -Werror -g -Wcast-align  
-DSENDIP_LIBS=\"/usr/local/lib/sendip\" sendip.o gnugetopt.o gnugetopt1.o compact.o ; \
elif [ `uname` = SunOS ] ; then \
gcc -o sendip -g -lsocket -lnsl -lm -ldl -fPIC -fsigned-char -pipe -Wall  
-Wpointer-arith -Wwrite-strings -Wstrict-prototypes -Wnested-externs -Winline -Werror 
-g -Wcast-align -DSENDIP_LIBS=\"/usr/local/lib/sendip\" sendip.o gnugetopt.o  
gnugetopt1.o compact.o ;\
else \
gcc -o sendip -g -rdynamic -lm -fPIC -fsigned-char -pipe -Wall -Wpointer-arith -Wwrite- 
strings -Wstrict-prototypes -Wnested-externs -Winline -Werror -g -Wcast-align   
-DSENDIP_LIBS=\"/usr/local/lib/sendip\" sendip.o gnugetopt.o gnugetopt1.o compact.o ; \
fi"
sendip.o: In function `unload_modules':
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:211: undefined reference to `dlclose'
sendip.o: In function `load_module':
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:240: undefined reference to `dlopen'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:241: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:243: undefined reference to `dlopen'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:244: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:246: undefined reference to `dlopen'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:247: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:249: undefined reference to `dlopen'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:250: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:265: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:266: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:268: undefined reference to `dlclose'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:272: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:273: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:275: undefined reference to `dlclose'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:279: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:280: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:281: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:282: undefined reference to `dlclose'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:286: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:287: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:288: undefined reference to `dlclose'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:292: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:293: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:294: undefined reference to `dlclose'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:298: undefined reference to `dlsym'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:299: undefined reference to `dlerror'
/home/udit/Desktop/sendip-2.5-mec-0/sendip.c:300: undefined reference to `dlclose'
collect2: ld returned 1 exit status
make: *** [sendip] Error 1 
```

MakeFile 内容：

```
#configureable stuff
PREFIX ?= /usr/local
BINDIR ?= $(PREFIX)/bin
MANDIR ?= $(PREFIX)/share/man/man1
LIBDIR ?= $(PREFIX)/lib/sendip
#For most systems, this works
INSTALL ?= install
#For Solaris, you may need
#INSTALL=/usr/ucb/install

CFLAGS= -fPIC -fsigned-char -pipe -Wall -Wpointer-arith -Wwrite-strings \
        -Wstrict-prototypes -Wnested-externs -Winline -Werror -g   
-Wcast-align \
        -DSENDIP_LIBS=\"$(LIBDIR)\"
#-Wcast-align causes problems on solaris, but not serious ones
LDFLAGS=    -g -rdynamic -lm
#LDFLAGS_SOLARIS= -g -lsocket -lnsl -lm
LDFLAGS_SOLARIS= -g -lsocket -lnsl -lm -ldl
LDFLAGS_LINUX= -g  -rdynamic -ldl -lm
LIBCFLAGS= -shared
CC= gcc

PROGS= sendip
BASEPROTOS= ipv4.so ipv6.so
IPPROTOS= icmp.so tcp.so udp.so
UDPPROTOS= rip.so ripng.so ntp.so
TCPPROTOS= bgp.so
PROTOS= $(BASEPROTOS) $(IPPROTOS) $(UDPPROTOS) $(TCPPROTOS)
LIBS= libsendipaux.a
LIBOBJS= csum.o compact.o protoname.o headers.o parseargs.o
SUBDIRS= mec

all:    $(LIBS) subdirs sendip $(PROTOS) sendip.1 sendip.spec

#there has to be a nice way to do this
sendip: sendip.o    gnugetopt.o gnugetopt1.o compact.o
sh -c "if [ `uname` = Linux ] ; then \
$(CC) -o $@ $(LDFLAGS_LINUX) $(CFLAGS) $+ ; \
elif [ `uname` = SunOS ] ; then \
$(CC) -o $@ $(LDFLAGS_SOLARIS) $(CFLAGS) $+ ;\
else \
$(CC) -o $@ $(LDFLAGS) $(CFLAGS) $+ ; \
fi"

libsendipaux.a: $(LIBOBJS)
ar vr $@ $?

subdirs:
for subdir in $(SUBDIRS) ; do \
    cd $$subdir ;\
    make  ;\
    cd ..  ;\
    done

protoname.o:    mec/protoname.c
$(CC) -o $@ -c -I. $(CFLAGS) $+

headers.o:  mec/headers.c
$(CC) -o $@ -c -I. $(CFLAGS) $+

 parseargs.o:   mec/parseargs.c
$(CC) -o $@ -c -I. $(CFLAGS) $+

 sendip.1:  ./help2man $(PROGS) $(PROTOS) subdirs VERSION
        ./help2man -n "Send arbitrary IP packets" -N >sendip.1

 sendip.spec:   sendip.spec.in VERSION
        echo -n '%define ver ' >sendip.spec
        cat VERSION >>sendip.spec
        cat sendip.spec.in >>sendip.spec

 %.so: %.c $(LIBS)
        $(CC) -o $@ $(CFLAGS) $(LIBCFLAGS) $+ $(LIBS)

 .PHONY:    clean install

 clean:
        rm -f *.o *~ *.so $(PROTOS) $(PROGS) $(LIBS) core gmon.out
        for subdir in $(SUBDIRS) ; do \
            cd $$subdir ;\
            make clean ;\
            cd ..  ;\
            done

  veryclean:
        make clean
        rm -f sendip.spec sendip.1

  install:      all
        [ -d $(LIBDIR) ] || mkdir -p $(LIBDIR)
        [ -d $(BINDIR) ] || mkdir -p $(BINDIR)
        [ -d $(MANDIR) ] || mkdir -p $(MANDIR)
        $(INSTALL) -m 755 $(PROGS) $(BINDIR)
        $(INSTALL) -m 644 sendip.1 $(MANDIR)
        $(INSTALL) -m 755 $(PROTOS) $(LIBDIR)
        for subdir in $(SUBDIRS) ; do \
            cd $$subdir ;\
            make install ;\
            cd ..  ;\
            done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:28:44.343

在 Linux Mint 13 和 Ubuntu 12.04 中遇到了同样的问题。这是我为解决此问题所做的工作：

安装 gcc-4.4

> sudo apt-get 安装 gcc-4.4

在 Makefile 中，将“cc”设置为指向 gcc-4.4。

> 抄送= gcc-4.4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:24:14.433

由于您使用的是 Linux，因此似乎使用的是 LDFLAGS_LINUX 变量而不是 LDFLAGS。尝试添加`-ldl`到该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T16:03:20.540

我宁愿使用以下建议的解决方案：

[为什么我在尝试创建共享对象时收到 gcc“未定义引用”错误？](https://stackoverflow.com/questions/8140494/why-am-i-getting-a-gcc-undefined-reference-error-trying-to-create-shared-objec)

和

[回答：即使 -lm 是编译标志，对“pow”的未定义引用也是如此。[C]](https://stackoverflow.com/a/35872122/721929)

# php - 使用 Mencoder 加入视频文件时出错

> ID：11016496
> 
> 赞同：1
> 
> 时间：2012-06-13T13:59:09.280
> 
> 标签：php, mencoder

我正在使用 mencoder 剪切和加入视频文件。但是输出文件没有在我网站的 flv 播放器中播放。但它在 VLC 媒体播放器中播放没有任何错误。会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:01:17.250

**最后，我通过使用MENCODER**以自己的格式加入文件并使用**FFMPEG**将加入的视频转换为 flv 来解决这个问题。现在它在我网站上的 flv 播放器中播放良好。

# android - 错误：jni.h：没有这样的文件或目录

> ID：11016499
> 
> 赞同：2
> 
> 时间：2012-06-13T13:59:20.653
> 
> 标签：android, linux, android-ndk

尝试构建 android ndk 项目时出现错误：

```
error: jni.h: No such file or directory 
```

但是：`locate jni.h`命令告诉我：

```
locate jni.h
/usr/lib/jvm/java-6-openjdk-i386/include/jni.h 
```

我的行为有什么问题？

编辑：

如果我在源代码中对其进行硬编码，它可以工作，但我有很多文件正在使用这个头文件。我需要做什么才能让我的所有文件都能看到 /usr/lib/jvm/java-6-openjdk-i386/include/jni.h ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:10:05.453

`PATH`尝试在文件中设置 NDK 的安装位置，`rc`比如说`~/.bashrc`：

```
NDK=/path/to/your/ndk/location    
export PATH=$PATH:$NDK 
```

`rc`通过运行获取文件`source ~/.bashrc`。

现在，当您运行时`ndk-build`，它将通过`make`对下面的一堆`make`文件运行命令来为您设置整个构建环境`$NDK/build/core`，它将根据 .xml 中的设置为您的项目设置正确的**头文件搜索路径**。`android:targetSdkVersion``AndroidManifest.xml`

您的`jni.h`NDK 项目所需的位于`$NDK/platforms/android-14/arch-arm/usr/include`.

Android NDK 项目不会使用您安装的 JDK 下的任何 JNI 头文件，`/usr/lib/jvm/....`永远不会触及下的文件。

# crystal-reports - 晶选专家

> ID：11016503
> 
> 赞同：0
> 
> 时间：2012-06-13T13:59:33.250
> 
> 标签：crystal-reports

是否可以使用选择专家生成过滤器，以便我的报告仅在某个 OLE 图像可见时显示结果。

我们目前有三个 OLE 图像（如下所示）

![在此处输入图像描述](../Images/d86a9fdea92916fd8fe10b0a5146915a.png)

1.  我想生成一个过滤器来创建一个只显示任何特定 OLE 图像之一的报告。（只是带有红色 X 的结果）

2.  有没有办法区分 OLE 图像？

如果您需要更多信息，我会尽快获取。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:28:26.633

由于图像完全依赖于`{PROD_Product.Traffic_Status}`，您只需根据该字段过滤报表即可。例如，如果您只想显示带有红色 X 的行，您可以添加`{PROD_Product.Traffic_Status}=0`到您的记录选择公式（基本上是图像的条件抑制公式的倒数）。

实际上，您可能只想创建一个数字参数，其中包含选项 0、1 或 2 来表示不同的交通状态/图像并根据它进行过滤`{PROD_Product.Traffic_Status}={?Traffic Status Parameter}`

# buddypress - 根据 buddypress 中的扩展配置文件字段列出成员

> ID：11016505
> 
> 赞同：1
> 
> 时间：2012-06-13T13:59:38.687
> 
> 标签：buddypress

我正在根据他们在 buddypress 的扩展配置文件字段中选择的字段来获取成员列表。这是我的代码：

```
<?php
$membership_group = "Orange Membership";
$db_query = "SELECT user_id FROM wp_bp_xprofile_data WHERE field_id = 33 AND value = \"" .$membership_group ."\""; 
$match_ids = $wpdb->get_var($db_query);
$get_these_members = 'include=' .$match_ids;

if (bp_has_members($get_these_members, 'per_page optional=9')) {
    //Some Codes here
} 
?> 
```

结果只返回从查询中获得的第一个成员，而不是成员列表。请说我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T16:44:45.113

这：$wpdb->get_var($db_query);

返回一个 var ！

这就是你想要的： $wpdb->get_col($db_query);

然后修复slaFFik提到的语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T06:42:04.907

我认为您应该深入研究类`BP_Core_User`及其方法`get_users`。它支持 meta_key 和 meta_value。您也可以尝试仅按字段值进行搜索。因此，将参数传递`s`给`bp_has_members`.

并且`per_page optional=9`是错误的语法。

# python - 在 python boto aws simpleDB 查询中忽略限制

> ID：11016508
> 
> 赞同：1
> 
> 时间：2012-06-13T13:59:42.837
> 
> 标签：python, amazon-simpledb, boto

以下查询返回所有记录，而不仅仅是 2。但是，当我在 AWS SimpleDB 浏览器中运行查询时，它可以工作。我使用boto错了吗？

```
conn = boto.connect_sdb()
dom = conn.get_domain('taxplan')
query = 'select Descr, PlanName, ItemName, Plan, ReceivedTime from taxplan limit 2'
rs = dom.select(query)
sl= []
for j in rs:
    sl.append(j)
result['sboto'] = convert(sl[1:])

sys.stdout.write(json.dumps(result,indent=1)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:07:36.610

看来问题是：

```
for j in rs: 
```

由于迭代，查询似乎正在运行多次，不确定。我通过替换为我解决了这个问题：

```
rs = dom.select(query) 
```

和

```
rs = dom.select(query,max_items=2) 
```

希望有帮助。

# ruby-on-rails - Ruby on Rails session[:counter] 增加 2

> ID：11016509
> 
> 赞同：1
> 
> 时间：2012-06-13T13:59:46.913
> 
> 标签：ruby-on-rails, session

我正在学习实用的书架课程。我尝试制作一个会话计数器。我的商店控制器是

```
 class StoreController < ApplicationController
  def increment_counter
  if session[:counter].nil?
    session[:counter] = 0
  end
  session[:counter] += 1
end
  def index
    @count = increment_counter
    @products  = Product.all
    @cart = current_cart
    @time = Time.now
    @shown_message = "You've been here #{@count} times" if increment_counter >5
  end
end 
```

我的观点是

```
<h5><p><%= @shown_message %></p></h5>.. 
```

直到 5 次它不起作用。但在它开始计为 5,7,9,11 之后。. 我的会话 [:counter] 有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T14:02:01.743

您在操作中调用`increment_counter`了两次：第一次是在设置@count 时，然后在您的条件下再次调用@shown_message。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:03:55.873

作为 ksol 答案的补充。在最后一次通话中使用@count。

```
def index
  @count = increment_counter
  @products  = Product.all
  @cart = current_cart
  @time = Time.now
  @shown_message = "You've been here #{@count} times" if @count >5
end 
```

# c - Ncurses 菜单 - 记住选择

> ID：11016512
> 
> 赞同：2
> 
> 时间：2012-06-13T13:59:51.737
> 
> 标签：c, menu, ncurses

我正在使用 Ncurses 库做一些交互式菜单，但我不知道如何做一件事。我有几个选项的简单菜单，我打开了`O_ONEVALUE`很多选项可以同时选择，在发布菜单之前，我获取所有菜单项并将它们标记为选中或未选中，这取决于我保存在其他地方的位掩码，但是当菜单发布时，每个选项都被关闭，这里是代码：

```
//acquiring menu items
ITEM** header_items = menu_items(params.header_opts_menu);
ITEM* cur_item;
if (header_items == NULL)
{
    client_cleanup();
    syslog_nsys_f(LOG_ERR, "error while getting header menu items");
}
//selecting appropriate items
long header_menu_items_count = ARRAY_SIZE(header_menu_choices);
for (i = 0; i < header_menu_items_count; ++i)
{
    if ((params.header_flags & (1 << (i))) != 0)
        decision = TRUE;
    else
        decision = FALSE;
    if (set_item_value(header_items[i], TRUE) != E_OK)
    {
        client_cleanup();
        syslog_nsys_f(LOG_ERR,"error while setting menu item value");
    }
}
if (post_menu(params.header_opts_menu) != E_OK)
{
    client_cleanup();
    syslog_nsys_f(LOG_ERR,"error while posting header options menu");
}
set_menu_items(params.header_opts_menu,header_items);
refresh(); 
```

即使我将每个项目的值都设置为什么都`TRUE`没有发生，我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:11:35.087

看起来您在调用 post_menu 之后尝试调用 set_menu_items。检查 set_menu_items 的返回值，您可能会收到 E_POSTED 错误。

# perl - ./script 第 17 行没有这样的文件或目录

> ID：11016517
> 
> 赞同：3
> 
> 时间：2012-06-13T13:59:59.327
> 
> 标签：perl, file-io

确切的错误：

```
$ ./script.pl file.txt  
Can't open file.txt: No such file or directory at ./script.pl line 17\. 
Use of uninitialized value in chomp at ./script.pl line 17\. 
Username: Password: 
```

我正在编写一个脚本，该脚本从命令行获取文件名，然后将其输出写入其中：

```
#!/usr/bin/perl
use warnings;
use strict;
use Term::ReadKey;

my @array;
my $user;
my $pass;

# get login info
print "Username: ";
chomp($user = <>); # line 17
print "Password: ";
ReadMode 2;
chomp($pass = <>);
ReadMode 0;
print " \n";

# ...
# connect to database, and save the info in "@array" 
# ...

# save the array to a file
if (defined($ARGV[0])) {
    open (MYFILE, ">".$ARGV[0]) or die "Can't open ".$ARGV[0].": $!\n";
    foreach (@array) {
        print MYFILE $_."\n";
    }
    close (MYFILE);
# otherwise, print the names to the screen
} else {
    foreach (@array) {
        print $_."\n";
    }
} 
```

但是，如果我替换`ARGV[0]`为`"file.txt"`或类似的东西，打印到文件就可以了。如果我不提供文件名，则脚本可以正常工作。我的预感是打印语句干扰了 iostream 缓冲区，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:03:06.830

这就是 Perl 中魔法钻石运算符的工作原理。如果您使用参数启动脚本，它会尝试从文件中读取输入。如果你给它一个标准输入，它就会从那里读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:19:29.650

如果您打算使用`<STDIN>`，请使用而不是从标准输入中读取。`<>``@ARGV`

Or, even better, read directly from terminal (*if* STDIN is a terminal). A quick search [brought up](http://docstore.mik.ua/orelly/perl/cookbook/ch15_11.htm) `Term::ReadKey`, but I haven't tried it myself.

# c - c中的局部结构

> ID：11016519
> 
> 赞同：7
> 
> 时间：2012-06-13T14:00:02.703
> 
> 标签：c

如果一个结构只用在一个函数中，我可以在那个函数中声明它吗？我可以这样做：

```
int func()
{
    struct {
        int a, b;
    } s;

    s.a=5;

    return s.a;
} 
```

gcc 被它噎住了，但它发出了一个看起来很奇怪的错误，我无法理解，而不是说“对不起，你不能那样做”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T14:03:32.537

这是完全有效的 C89/C99/C11 代码，这是一个没有标签的结构，并且对象具有块范围。检查 C99 6.7.2.3p6 以查看标签的标识符是可选的。

# tridion - 将包中的项目作为 Dreamweaver 模板执行

> ID：11016520
> 
> 赞同：9
> 
> 时间：2012-06-13T14:00:08.200
> 
> 标签：tridion, tridion-2011, tridion2009

有谁知道是否可以在复合模板中使用包中的字符串项并像 Dreamweaver 模板一样执行它？以及您是否将相同的方法应用于其他中介（如剃刀）？

谢谢马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:21:04.260

恐怕在 中的任何项目上都不可能`Package`，因为`Engine`期望`Template`s 基于 Tridion 项目。

**如果您的**模板项目基于 Tridion 项目，您可能会从该`Engine.GetMediator`方法开始走得很远。如果不是，则必须找到某种方法将其变成有效`Template`对象。

```
Template template = ...
IMediator mediator = engine.GetMediator(template);
mediator.Transform(engine, template, package); 
```

`Component`当我必须从包中基于 Tridion 的项目创建对象时，我通常会执行以下操作：

```
Component component = new Component(item.GetAsXmlDocument().DocumentElement, 
                                    engine.GetSession); 
```

我没有尝试过，但希望你可以对`Template`- 做同样的事情，因为你从包中代表模板的有效项目开始。您可能可以从现有项目中克隆 XML 或找到其他方法来伪造它。

如果你让它工作，它将适用于所有注册的模板类型。对`Engine`Tridion 附带的类型没有提供特殊处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T19:42:36.767

我怀疑这是不可能的。

`Package.EvaluateExpression`可能有用，但顾名思义，它只适用于表达式，而不适用于嵌入表达式的大型代码片段（即 TEL）

`Engine.GetMediator`期望 a`Template`并返回适合`Mediator`它的值。那么你的问题是`IMediator`接口只定义了`Transform`方法，它需要一个`Engine`，一个`Template`和一个`Package`。

我想不出任何优雅的方式来解决这些问题。也许编写您自己的调解器，但仍然需要一个包，而不是字符串，因此您必须首先存储来自另一个 TBB 的基于字符串的项目。

我的建议：听起来你需要回到绘图板并找到解决问题的替代方案。

# ant - 如何使用 ANT 脚本将文件复制到 zip 文件中？

> ID：11016524
> 
> 赞同：3
> 
> 时间：2012-06-13T14:00:32.433
> 
> 标签：ant, ant-contrib

我想使用 ANT 脚本将几个文件复制到现有的 zip 文件中。

有没有可用的任务？还是我需要解压缩 zip 文件然后复制所需的文件并再次压缩？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T14:04:14.470

直接来自[zip 任务的文档](http://ant.apache.org/manual/Tasks/zip.html)：

> 如果 ZIP 文件已经存在，更新参数控制会发生什么。当设置为 yes 时，ZIP 文件将使用指定的文件进行更新。（添加新文件；旧文件替换为新版本。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:00:23.020

如果您有一个名为 perlscr.zip 的现有 zip 文件，您可以使用 Ant Zip 任务在 shellscr 目录中添加一个名为 backup.sh 的文件：

```
<zip destfile="perlscr.zip"
    basedir="shellscr"
   includes="backup.sh"
   update="true"/> 
```

# c# - 私人名单 垃圾收集期间未处理 WCF 返回值上的属性

> ID：11016529
> 
> 赞同：-1
> 
> 时间：2012-06-13T14:00:40.560
> 
> 标签：c#, wcf, memory-management, garbage-collection, dispose

我有一个使用 HTTP 协议托管在 IIS7 中的简单 WCF 服务。该服务包含一个方法，该方法返回一个名为 的自定义对象`Calendar`。这个对象是非常基本的，并且包含简单的值类型属性，除了一个属性，`Holidays`，它的类型是`List<IHoliday>`。`Holiday`又是一个仅由值类型属性组成的简单类型。

该`Calendar`对象从 WCF 服务方法返回到 MVC 控制器，并应用于相应的视图。在使用 dotTrace 进行内存测试期间，很明显 Calendar 对象已由 GC 完成，但有趣的`Holidays`是，它的空属性仍保留在堆上。

这不是主要的性能问题，仅占用 32 个字节，但我很想知道为什么没有处理空列表。如有必要，我可以提供代码示例。

源代码和服务配置如下：

```
public class Calendar : ICalendar
{
    [DataMember] private IEnumerable<IHoliday> holidays = new List<IHoliday>();
    [DataMember] private IEnumerable<IHolidayNotTaken> holidaysNotTaken = new List<IHolidayNotTaken>();
    [DataMember] private IEnumerable<INonInstructionalDay> nonInstructionalDays = new List<INonInstructionalDay>();
    [DataMember] private IEnumerable<ISchoolBreak> schoolBreaks = new List<ISchoolBreak>();
}

public class Holiday : IHoliday, IIdentifiable, IDisposable
{
    [DataMember(Name = @"date")] [JsonProperty(PropertyName = @"date")] private string date;

    [DataMember(Name = @"checked")]
    [JsonProperty(PropertyName = @"checked")]
    public bool Checked { get; set; }

    /// <summary>
    ///   Gets or sets the end Holiday Id.
    /// </summary>
    /// <value> The holiday id. </value>
    [DataMember(Name = @"id")]
    [JsonProperty(PropertyName = @"id")]
    public int HolidayId { get; set; }

    /// <summary>
    ///   Gets or sets the end description for the holiday.
    /// </summary>
    /// <value> The description. </value>
    [DataMember(Name = @"description")]
    [JsonProperty(PropertyName = @"description")]
    public string Description { get; set; }

    /// <summary>
    ///   Gets or sets the date of the holiday.
    /// </summary>
    /// <value> The holiday date. </value>
    [DataMember]
    [JsonIgnore]
    public DateTime Date { get; set; }

    /// <summary>
    ///   Gets or sets the sort order for the holiday.
    /// </summary>
    /// <value> The sort order. </value>
    [DataMember(Name = @"sortOrder")]
    [JsonProperty(PropertyName = @"sortOrder")]
    public int SortOrder { get; set; }

    /// <summary>
    ///   Gets the <see cref="IIdentifiable.Type" /> of this instance.
    /// </summary>
    [DataMember(Name = @"type")]
    [JsonProperty(PropertyName = @"type")]
    public string Type { get; private set; }

    /// <summary>
    ///   Invoked when this instance is serialising.
    /// </summary>
    /// <param name="streamingContext"> The streaming context. </param>
    [OnSerializing]
    private void OnSerialising(StreamingContext streamingContext)
    {
        date = Date.ToString(@"yyyy-MM-dd");
        Type = GetType().ToString();
    }
} 
```

服务方式：

```
public Domain.Calendar GetCalendarByMember(string externalId)
    {
        try
        {
            using (var e = new EPlannerEntities())
            {
                var memberId = e.Members
                    .Where(m => m.ExternalId == externalId)
                    .Select(m => m.MemberId)
                    .SingleOrDefault();

                if (memberId.Equals(0))
                {
                    e.Members.AddObject(new Member { ExternalId = externalId.Trim() });

                    var calendar = new Domain.Calendar
                                   {
                                       DefaultViewId = 2,
                                       MemberId = memberId,
                                       IsWeekendsVisible = true,
                                       TimeFormatId = 1,
                                       DayBeginTime = new TimeSpan(0, 8, 0, 0),
                                       DayEndTime = new TimeSpan(0, 16, 0, 0),
                                       DateFormatId = 1
                                   };

                    e.Calendars.AddObject(calendar);
                    e.SaveChanges();

                    return calendar;
                }

                return e.Calendars.Single(c => c.MemberId == memberId);
            }
        }
        catch (Exception exception)
        {
            throw ErrorManager.FaultException(ExceptionType.Business, (int) CalendarErrorCodes.GeneralError, exception);
        }
    } 
```

服务配置：

```
<services>
  <service behaviorConfiguration="CalendarServiceBehavior" name="HMH.ePlanner.Services.Calendar">
    <endpoint address="" binding="netTcpBinding" bindingConfiguration="TCPBinding" name="TCPEndPoint" contract="HMH.ePlanner.Services.ICalendar">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="HTTPBinding" name="HttpEndPoint" contract="HMH.ePlanner.Services.ICalendar" />
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="TCPMexEndPoint" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:808/Calendar.svc" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:01:13.067

问题源于`Holiday`列表在没有指定`UpperBound`. 指定 UpperBound 可确保在垃圾收集后从堆中删除对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:00:08.407

对于您的问题，我没有答案，因为我在提供的代码中看不到任何犯罪行为。

我能提出的唯一建议是检查`Session`解决方案中是否需要安全性。

现在不一致了。配置为使用 TCP 的客户端启用它并为 HTTP 禁用它。

配置中缺少PS `bindingConfiguration`。你把所有的都发了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:44:18.183

为 Calendar 创建一个部分类（如果需要部分类）并向其中添加[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口并手动取消假期。再次运行 dottrace，看看是否会发生同样的情况。

# php - Magento - 从特定类别页面隐藏特定属性

> ID：11016534
> 
> 赞同：0
> 
> 时间：2012-06-13T14:00:50.620
> 
> 标签：php, magento

有人知道如何隐藏特定类别页面的属性吗？我从构建我的分层导航模块的公司那里得到了一个提示，它可以通过 css 和独特的类别 body 类来完成，但是如何？

这是我的身体课

```
<body class=" catalog-category-view categorypath-jongenskleding-html category-jongenskleding"> 
```

# c++ - 如何将c++对象绑定为objective-c中的属性？

> ID：11016536
> 
> 赞同：3
> 
> 时间：2012-06-13T14:00:54.427
> 
> 标签：c++, objective-c, cocoa-bindings, objective-c++

我想将 Objective-C 对象的属性相互绑定，但属性是 c++ 类。该属性实际上是一个数学向量类，它更易于使用，因为运算符重载对向量数学非常有用。（我什至没有看到使用 Objective-C 对象的向量数学的好方法，有吗？）

问题是绑定此向量属性会使应用程序崩溃。这是一个例子：

```
@interface M_Node : NSObject{
Vec3f pos;
M_Node *manipulator
}
@property Vec3f pos;
@end

@implementation
@synthesize pos;

@dynamic pos;
-(void)setPos:(Vec3f)newPos{
pos=Vec3f(newPos);
}
-(Vec3f)pos{
return Vec3f(pos);
}

- (id) init
{
self = [super init];
if (self != nil) {
[self bind:@"pos" toObject:self withKeyPath:@"manipulator.pos" options:nil];
}

return self;
} 
```

Xcode的问题：'Vec3f'（又名'Vec3'）类型的原子属性使用非平凡赋值运算符合成setter

我使用 cinder 中的 Vec3f 类：http: [//libcinder.org/docs/v0.8.3/classcinder_1_1_vec3.html](http://libcinder.org/docs/v0.8.3/classcinder_1_1_vec3.html)

所以问题是如何将 c++ 对象绑定为objective-c 中的属性，甚至有可能吗？还有其他方法吗？（如果您知道如何在 Objective-c 中进行干净的向量、矩阵等数学运算，请告诉我。）

这是我在文档中找到的：

***标量和结构值的 KVC 转换** KVC 方法 valueForKey: 和 setValue:forKey: 的默认实现支持标量数据类型（如 BOOL、char、double、float、int 和 NSPoint、NSRange 和 NSRect 等结构）的自动对象包装。当 Cocoa 脚本调用 valueForKey: 来获取一个值时，如果需要，KVC 会自动将该值转换为 NSNumber 对象（对于标量）或 NSValue 对象（对于结构）。同样， setValue:forKey: 确定指定键的适当访问器或实例变量所需的数据类型。如果数据类型不是对象，则使用适当的 NSNumber 或 NSValue 方法从传递的对象中提取值。有关更多信息，包括支持的类型表，请参阅 Key-Value Coding Programming Guide 中的 Scalar and Structure Support*

尽管如此，还是有像 NSRect 这样的结构的包装器。可能有一种方法可以覆盖原始 valueForKey: 所以它也可以处理 Vec3f。

所以这将是一个新问题：**如何覆盖*valueForKey:*和*setValue: forKey:*以便能够处理我自己的 c++ 对象？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:28:59.767

我非常怀疑这会奏效。

Bindings 建立在键值编码 (KVC) 和键值观察 (KVO) 之上。您正在使用`manipulator.pos`. 这意味着该`manipulator`属性必须是一个符合 KVC 和 KVO 的 Objective-C 对象`pos`。目前尚不清楚，但我怀疑这`M_Node`是一个 C++ 类，而不是 Objective-C 类，因此任何东西都不符合 KVC 或 KVO。

接下来是 KVC 将如何返回并传递`pos`是否可以到达它的值的问题。KVC 将包装非对象数据类型`NSNumber`或`NSValue`传递它们。但是，如果 a`Vec3f`不是 POD，那么我怀疑它是否能正常工作。

归根结底，绑定并不神奇（尽管无可否认，KVO 在其实现中有一些近乎神奇的 isa-swizzling 东西）。关键是，你认为这`[[yourObject valueForKey:@"manipulator"] valueForKey:@"pos"]`会奏效吗？你希望`[[yourObject valueForKey:@"manipulator"] setValue:someValue forKey:@"pos"]`工作吗？如果没有，那么绑定就不可能起作用。

# java - hql 查询以获取以父表 id 作为键并以子对象列表作为值的映射

> ID：11016539
> 
> 赞同：1
> 
> 时间：2012-06-13T14:01:01.807
> 
> 标签：java, map, hql

有两个表 parent 和 child 具有外键关系。现在我的要求是编写 hql，它返回一个映射，其中键作为父表 id，值作为子对象列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:35:26.733

好的。你似乎完全迷失了，所以我会这样做：

```
String hql = 
    "select distinct p from Parent p" // get all the parents
    + " left join fetch p.children";  // with their children
List<Parent> parents = session.createQuery(hql).list();

// now transform this list of parents into a Map
Map<Long, List<Child>> result = new HashMap<Long, List<Child>>(parents.size());
for (Parent parent : parents) {
    result.put(parent.getId(), parent.getChildren());
} 
```

请注意，我并没有真正看到这张地图的重点。如果您有父母列表，每个父母都包含其孩子，那么地图就不是必需的。

# latex - DokuWiki - Latex - libjpeg.8.dylib 需要更新的版本？

> ID：11016551
> 
> 赞同：1
> 
> 时间：2012-06-13T14:01:56.583
> 
> 标签：latex, dokuwiki

我正在尝试将 LaTex-Plugin 用于 DokuWiki。当我运行 LaTeX 疑难解答时，我收到此错误：

![在此处输入图像描述](../Images/1b96d8646259c1cee3fead8de3aa83ba.png)

```
dyld: Library not loaded: /opt/local/lib/libjpeg.8.dylib
  Referenced from: /opt/local/bin/identify
  Reason: Incompatible library version: identify requires version 13.0.0 or later, but libjpeg.8.dylib provides version 12.0.0 
```

我不知道如何将其升级到版本 13。感谢任何形式的帮助！约翰

# php - 当查询没有返回记录时，如何通过 PDO/Sqlite 获取列名？

> ID：11016555
> 
> 赞同：2
> 
> 时间：2012-06-13T14:02:02.087
> 
> 标签：php, sqlite, pdo

下面的代码允许我将 SQL 语句传递给一个类并调用它的方法来显示一个漂亮的结果表，包括列名。

但是，**如果没有结果，我仍然希望**显示列名。

不幸的是，`getColumnMeta`它没有像我发现的其他示例那样返回任何数据。

**有谁知道如何让 getColumnMeta() 在这个例子中工作，或者当查询返回零行时我可以从 SQL 语句中获取字段名称的另一种方式？**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
            table thead tr td {
                background-color: #ddd;
                padding: 5px;
                font-weight: bold;
            }
            table tbody tr td {
                background-color: #eee;
                padding: 5px;
                color: navy;
            }
            div.sqlCommand {
                font-family: courier;
            }

            h2 {
                border-bottom: 1px solid #777;
            }
        </style>
    </head>
    <body>
        <?php

        $sql = 'SELECT LastName,FirstName,Title FROM employee WHERE 1=2 ORDER BY LastName';

        echo '<h2>sqlite</h2>';
        $dbSqlite = new DbSqlite($sql);
        echo $dbSqlite -> displayHtmlTable();

        class DbSqlite {
            protected $sql;
            protected $records = array();
            protected $columnNames = array();
            public function __construct($sql) {
                $this -> sql = $sql;
                $this -> initialize();
            }

            protected function initialize() {
                $db = new PDO('sqlite:chinook.sqlite');
                $result = $db -> query($this -> sql);
                $result -> setFetchMode(PDO::FETCH_ASSOC);
                $columnsAreDefined = false;
                while ($row = $result -> fetch()) {
                    $this -> records[] = $row;
                    if (!$columnsAreDefined) {
                        foreach ($row as $columnName => $dummy) {
                            $this -> columnNames[] = $columnName;
                        }
                        $columnsAreDefined = true;
                    }
                }

                if (count($this -> records) == 0) {
                    $total_column = $result -> columnCount();
                    var_dump($total_column);

                    for ($x = 0; $x < $total_column; $x++) {
                        $meta = $result -> getColumnMeta($x);
                        //var_dump($meta);
                        //bool(false)
                        //$column[] = $meta['name'];
                    }
                }
            }

            public function displayHtmlTable() {
                $r = '';

                $r .= '<div class="sqlCommand">' . $this -> sql . '</div>';

                $r .= '<table>';

                $r .= '<thead>';
                $r .= '<tr>';
                foreach ($this->columnNames as $columnName) {
                    $r .= '<td>' . $columnName . '</td>';
                }
                $r .= '</tr>';
                $r .= '</thead>';

                $r .= '<tbody>';
                foreach ($this->records as $record) {
                    $r .= '<tr>';
                    foreach ($record as $data) {
                        $r .= '<td>' . $data . '</td>';
                    }
                    $r .= '</tr>';
                }
                $r .= '</tbody>';
                $r .= '<table>';
                return $r;
            }

        }
        ?>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:26:35.800

元表`sqlite_master`包含所有信息。以下代码将解析`sqlite_master`为列名`$colnames`：

```
$colnames = array() ;

$stmt = $dbh->prepare("SELECT sql FROM sqlite_master WHERE tbl_name = 'put_table_name_here'") ;
$stmt->execute() ;
$row = $stmt->fetch() ;

$sql = $row[0] ;
$r = preg_match("/\(\s*(\S+)[^,)]*/", $sql, $m, PREG_OFFSET_CAPTURE) ;
while ($r) {
  array_push( $colnames, $m[1][0] ) ;
  $r = preg_match("/,\s*(\S+)[^,)]*/", $sql, $m, PREG_OFFSET_CAPTURE, $m[0][1] + strlen($m[0][0]) ) ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:40:10.463

1.  我会尝试的第一种方法：
    *   运行查询
    *   检查是否有结果返回
    *   如果是，请运行 Your `initialize()`and`displayHtmlTable`
    *   如果**没有**，运行 Your`initializeEmptyResult()`将运行下一个查询并只填充`$this->columnNames[]`：

```
SELECT column_name FROM information_schema.columns WHERE table_name = 'my_table_name' 
```

该查询依赖于 MySQL，但其他数据库应该有更多的选择，或者您仍然可以`DESCRIBE table`从结果中运行和解析列名（应该是 SQL DBMS 独立的）。

1.  其次，我认为更容易完成：如果查询没有返回结果，则根本不显示列名或表，只显示一条消息：'No results found.'。这可以在您的`displayHtmlTable`方法中实现：

    ```
     public function displayHtmlTable() {
            $r = '';

            $r .= '<div class="sqlCommand">' . $this -> sql . '</div>';

            if(count($this->records) > 0) {
                $r .= '<table>';

                $r .= '<thead>';
                $r .= '<tr>';
                foreach ($this->columnNames as $columnName) {
                    $r .= '<td>' . $columnName . '</td>';
                }
                $r .= '</tr>';
                $r .= '</thead>';

                $r .= '<tbody>';
                foreach ($this->records as $record) {
                    $r .= '<tr>';
                    foreach ($record as $data) {
                        $r .= '<td>' . $data . '</td>';
                    }
                    $r .= '</tr>';
                }
                $r .= '</tbody>';
                $r .= '<table>';
            } else {
                $r .= '<div class="no-results">No results found for query.</div>';
            }

            return $r;
        } 
    ```

而且您不必为列名而烦恼...

**编辑：**对于第一种情况，发现 SQLite 的查询应该与以下内容相同`select * from information_schema.columns where table_name = 'xxx'`：

```
PRAGMA table_info(table-name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T18:44:28.377

只是为了扩展@shadyyx评论：

> `PRAGMA table_info(table-name);`

我没有方便的 PDO_SQLITE 沙箱，但是使用本机 SQLite3 驱动程序，此代码段将为您提供**$arrColumns中表****table-name**的列名：

 **```
$db = new SQLite3('db.sqlite');
$db->query('PRAGMA table_info(table-name)');
while ($col = $res->fetchArray(SQLITE3_ASSOC)) {
    $arrColnames[]=$col['name'];
}
print_r($arrColnames); 
```**

# java - Java的语法编译器编译器

> ID：11016556
> 
> 赞同：4
> 
> 时间：2012-06-13T14:02:04.760
> 
> 标签：java, compiler-construction, grammar, compiler-compiler

我的公司正在尝试为 Android 编写一些软件。我们想使用 Java，并且公司软件的一个组件是 c++，因此需要移植（或者至少在尝试 NDK 之前需要尝试移植）。此代码是使用[Accent](http://accent.compilertools.net/)创建的，它定义了语法语法。据我所知，最初的作者（现在已经走了）写了一个语法来指定如何指定一个语法，然后用那个语法和口音编译了一个编译器-编译器。编译器-编译器采用指定格式的语法并生成二进制代码来解析符合该语法的字符串。这是语法的示例片段：

```
 //include rules from from this file (such as <alpha>)
include "alphabet.bnf"

<<topSymbol>> = <alpha> <alpha> <alpha>? .//two letters with an optional third
//square brackets enclose an XML statement clarifying semantics of the rule
[
    <topSymbol>
        <letter>
                       <command val="doSomethingToLetter"/>
        </letter>
        <!--etc.-->
    </topSymbol>
] 
```

我的问题是如何使用 Java，使用 Antlr 或其他一些工具来做到这一点。编译器-编译器-编译器对我来说似乎相当复杂。或者，我想知道如何轻松编译/解析这种包含语法和语义 XML 信息的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:39:34.283

如果最初的设计师知道他在做什么，而且这是有道理的，那么你想保留这个概念。使用另一个解析器生成器（或至少某种解析方案）是正确的方法。JavaCC 或 ANTLR 都可以作为解析器生成器；您必须手动翻译语法。如果语法足够简单，您可以[手动编写递归下降解析器。](https://stackoverflow.com/a/2336769/120163)

如果最初的设计师只是过头了，那么您可能可以替换语法驱动方面，但是如果不了解他的目标，您将无法做到这一点。这个“对我来说似乎相当复杂”的事实表明您并不真正了解解析/解析器生成器技术，并且您希望做一些您了解的事情而不是保留您不了解的事情。但是，仅仅因为您不了解它而将设计/实现良好的东西拆开是一个坏主意。我强烈建议您更多地了解这些技术，并问*为什么要*以这种方式实施？最终你可能是对的，应该用其他方法代替他的方法，但要根据知识做出选择，而不是恐惧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:10:20.023

> 我的问题是如何使用 Java，使用 Antlr 或其他一些工具来做到这一点。编译器-编译器-编译器对我来说似乎相当复杂。

对我来说听起来也很复杂！

> 或者，我想知道如何轻松编译/解析这种包含语法和语义 XML 信息的语法。

不……对此没有简单的答案。听起来您的前同事在复杂性方面已经超越了顶峰。你将不得不：

*   要么了解他的代码的作用以及它是如何工作的，要么了解 Antlr 的工作原理，然后手动翻译，
*   或者放弃他的代码和设计，找到一种更简单的方法来做它正在做的事情。

祝你好运！

* * *

（实际上，代码很有可能并不像看起来那么复杂......一旦你了解它，以及编译器 - 编译器技术。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:12:43.360

最好的办法是将您拥有的语法翻译成 ANTLR 或 Java CC 或其他一些工具。

另一种可能性是使用 JNI 调用您的 C++ 代码，但这充满了危险。

我不知道有什么可以提供帮助的。你只需要拿一把铲子开始挖掘。

# database - Grails：保存到数据库而不重新加载页面

> ID：11016570
> 
> 赞同：2
> 
> 时间：2012-06-13T14:02:28.850
> 
> 标签：database, grails, save

如何在不重新加载页面的情况下将文本字段和复选框保存到数据库？

只需单击按钮，然后单击它在数据库中。而已。我不明白。这意味着当我有一个输入内容的文本字段 - > 然后单击按钮时，文本字段中的内容应该在数据库中并且应该什么都不做（例如不重新加载页面或转到顶部）。

我不明白。

### 编辑：

当我在标准 create.gsp 中有 aa`<div>`标记时：`id="testid"`

```
def create() {
  def mytestInstance = new Mytest(params)
} 
```

`<g:remoteLink>`应该保存这部分的应该是这样的：

```
<g:remoteLink class="button" name="myForm" update="testid"
              url="[controller:'mytest', action: 'create']" value="....." /> 
```

这不起作用，因为页面正在刷新或类似的东西，并且这些东西没有存储在数据库中，而且它们不再在文本字段中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:12:34.303

您应该能够使用[标签`formRemote`通过](http://grails.org/doc/latest/ref/Tags/formRemote.html)Ajax 将数据发送到控制器

### 编辑

正如该页面上所说的那样；

> 此标签还需要使用`<g:javascript/>`( [link](http://grails.org/doc/latest/ref/Tags/javascript.html) ) 或`<g:setProvider/>`( [link](http://grails.org/doc/latest/ref/Tags/setProvider.html) ) 标签。请参阅[用户指南的 AJAX 部分](http://grails.org/doc/latest/guide/single.html#ajax)以了解更多信息。

你这样做了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:13:25.440

使用`<g:formRemote>`或`<g:submitToRemote>`通过 Ajax 调用进行表单提交。

# java - IntelliJ Idea 11 Flex 编译问题

> ID：11016571
> 
> 赞同：10
> 
> 时间：2012-06-13T14:02:30.837
> 
> 标签：java, apache-flex, intellij-idea, flex4.5, socketexception

我在完成我的代码时遇到问题。它在 Flash Builder 中运行良好。但我之前在 Idea 中使用过它，而且速度要快得多。所以我将我的 FB 文件导入到新的 Idea 项目中。但是当我尝试调试时，我收到错误消息：

使用内置编译器外壳，最多 4 个并行线程 请参阅文件 | 中的编译器设置 设置 | 编译器 | Flex 编译器页面

启动 Flex 编译器：/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -d32 -Dapplication.home=/Applications/Adobe/flex_sdk_4 -Xmx384m -Dsun.io.useCanonCaches=false - Djava.awt.headless=true -Duser.language=en -Duser.region=en -Xmx512m -classpath "/Applications/IntelliJ IDEA 11.app/plugins/flex/lib/idea-flex-compiler-fix.jar:/应用程序/IntelliJ IDEA 11.app/plugins/flex/lib/flex-compiler.jar:/Applications/Adobe/flex_sdk_4/lib/flex-compiler-oem.jar" com.intellij.flex.compiler.FlexCompiler 58789

编译完成，出现 1 个错误和 0 个警告

**java.net.SocketTimeoutException：接受超时**

我试图重新启动我的电脑。我有干净的操作系统安装，我没有任何应该阻止它的程序。

如果它有助于我在 OS X 10.7 上开发

感谢您的回复。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T22:10:32.880

刚刚全新安装了 IDEA 11.1.3 和 Flex SDK 4.6，并使用全新的 Flash Mobile 应用程序+模块出现此错误。

这是我修复它的方法：

1.  转到**设置 > 编译器 > Flex 编译器**

2.  选择**Mxmlc/compx**而不是默认的**内置编译器外壳** （屏幕截图：[http](http://puu.sh/10Nhg) ://puu.sh/10Nhg ）

3.  编译你的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-21T15:43:23.077

上面接受的答案对我不起作用，虽然 Florian Salihovic 提供的答案为我指明了正确的方向，但我想我会在这里发布解决方案。

对 Florian Salihovic 提供的链接[的评论，特别是我直接链接到的评论](https://youtrack.jetbrains.com/issue/IDEA-62377#comment=27-1761131)，包含以下对我有用的解决方案：

1.  找到您的主机名。你可以`hostname`在你的shell中使用。
2.  编辑`/etc/hosts`并添加命令报告的`127.0.0.1 <<hostname>>`名称。`<<hostname>>``hostname`

我发现这更正了我的问题（在 Linux 上），并且也应该更正 OSX 上的问题。有了这个，您仍然可以使用内置的编译器外壳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:10:12.940

这类似于[在启动 Flex 编译器时在 Jetbrain 的 YouTrack 错误中](http://youtrack.jetbrains.com/issue/IDEA-62377)跟踪的问题。你可能会检查那个。

# javascript - 奇怪的野生动物园行为

> ID：11016573
> 
> 赞同：-2
> 
> 时间：2012-06-13T14:02:34.943
> 
> 标签：javascript, html, css, ios, safari

我正在使用 JS 将我的 ePub 章节拆分为页面。我用代表单独页面的新 div 包装代码。我的 CSS 也有新 div 的样式。当我的文件具有文件扩展名“html”时，一切都很好，但是 ePub 提供 xml 文件并且未应用新 div 的 Safari 样式。（我可以重命名文件，并将 xml 重命名为 html 开始炒锅）。我做错了什么？谢谢你的帮助！

**更新** 链接到 xml [https://dl.dropbox.com/u/29925382/so​​/chapter.xml](https://dl.dropbox.com/u/29925382/so/chapter.xml) 到 html [https://dl.dropbox.com/u/29925382/so​​/chapter.html](https://dl.dropbox.com/u/29925382/so/chapter.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:34:59.117

知道了！导致它的一段代码：

```
var wrapper = document.createElement( 'div' ); 
```

它应该替换为

```
var wrapper = document.createElementNS ? 
              document.createElementNS( 'http://www.w3.org/1999/xhtml', 'div' ) 
              :document.createElement( 'div' ); 
```

# java - soapui 2.0.2 给了我 NumberFormatException 甚至最简单的表达式

> ID：11016574
> 
> 赞同：0
> 
> 时间：2012-06-13T14:02:39.387
> 
> 标签：java, soapui, numberformatexception

我有一个 Web 服务，我为它生成一个示例请求，然后替换所有 ? 最简单的情况为 0。它工作正常。然后我替换这样的值之一：

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:int="http://interfaces.mypackage.foo.com">
       <soapenv:Header/>
       <soapenv:Body>
          <int:getCheckResults>
             <criteria>
               <startTm>
                 <time>${=0}</time>
               </startTm>
             </criteria>
          </int:getCheckResults>
       </soapenv:Body>
    </soapenv:Envelope> 
```

（我尝试这样做的原因是，最终，当接口需要长 ms 值时，我想传递这样的可读日期）：

```
 <startTm>
      <time>${= new java.util.SimpleDateFormat("MM/dd/yyyy hh:mm z").parse("01/01/2012 04:00 GMT"}</time>
    </startTm> 
```

它总是给我相同的答案而不是调用服务 - 这曾经可以工作，但我不确定现在有什么不同，也许它在旧版本的 SoapUI 中工作？

```
 <soapenv:Fault>
       <faultcode>soapenv:Server.generalException</faultcode>
       <faultstring>java.lang.NumberFormatException: For input string: "" Message being parsed:</faultstring>
    </soapenv:Fault> 
```

帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:35:30.870

好吧，我吹掉了 SOAPUI 2.0.2 版并安装了最新的 4.5.0，现在它可以正常工作了。天知道出了什么问题。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:13:35.160

我建议您使用上下文变量和 Groovy 脚本。

在此 SOAP 请求之前运行的 Groovy 脚本中，添加类似这样的内容（我没有将您的代码放入其中，但我想您明白我的意思）：

```
import java.text.SimpleDateFormat
Date today
String formattedDate
SimpleDateFormat formatter
Locale currentLocale
currentLocale = new Locale("en", "US")  
formatter = new SimpleDateFormat("yyyy-MM-dd", currentLocale)
today = new Date()
formattedDate = formatter.format(today)
log.info(formattedDate)
context.setProperty("formattedDate", formattedDate) 
```

然后在 SOAP 请求中输入：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:int="http://interfaces.mypackage.foo.com">
   <soapenv:Header/>
   <soapenv:Body>
      <int:getCheckResults>
         <criteria>
           <startTm>
             <time>${formattedDate}</time>
           </startTm>
         </criteria>
      </int:getCheckResults>
   </soapenv:Body>
</soapenv:Envelope> 
```

# servlets - 贾斯珀报告 NoClassDefFoundError

> ID：11016575
> 
> 赞同：1
> 
> 时间：2012-06-13T14:02:39.463
> 
> 标签：servlets, jboss, jasper-reports

我在尝试编译或运行 Jasper 报告时收到 NoClassDefFoundError 错误。

```
2012-06-13 14:46:26,710 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/jahtest].[jahtest]] Servlet.service() for servlet jahtest threw exception
java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.engine.xml.JRXmlDigesterFactory
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:207)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:172)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:156) 
```

我有一组包含在 war 文件中并部署在 JBoss default/deploy 文件夹中的 java 类。我在 JBoss default/lib 文件夹中有 jasperreports-4.1.2.jar 文件，所以我看不到如何存在类路径问题，因为可以看到 lib 文件夹中的所有其他 jar。

我的前端应用程序调用 HTTPServlet 类，然后使用反射调用包含 Jasper 代码的类。一切正常，直到调用这条线 -

```
JasperDesign jasperDesign = JRXmlLoader.load(strCompiledReportFile); 
```

strCompiledReportFile 是正确的并且存在。当我通过 Eclipse 运行它时，这一切都有效，而不是从我的 HTTPServlet 类调用时。

我正处于想要抛弃 Jasper 的地步，因为我遇到了很多问题，所以这是最后一次机会沙龙。

为您可能提供的任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:19:14.690

我认为您缺少 jasper 在运行时依赖的几个 jar。检查此[线程](https://stackoverflow.com/questions/4998762/could-not-initialize-class-net-sf-jasperreports-engine-util-jrstyledtextparser)并确保您的类路径中也有这些罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:47:42.900

我不确定它是否也适用于您的情况，但我最近遇到了类似的问题，在未能加载字体（“读取字体数据的问题”）之后，Jasper Reports 会开始`java.lang.NoClassDefFoundError`为它的许多类提供虚假信息；此问题是由于`java.awt.Font.createFont(int fontFormat, InputStream fontStream)`尝试创建临时文件但失败而引起的。错误发生在 Tomcat 内部，但不在 Eclipse 内部；发生的事情是 Tomcat 自动将其 JVM 配置为指向其临时文件夹而不是默认文件夹，并且 Tomcat 的临时文件夹已被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T09:13:22.603

如果您尝试将 jasper 与 springboot 应用程序集成，请检查 .jrxml 是否在资源文件夹中。

# php - 当用户在 24 小时内未登录时从 Tuser 中删除用户

> ID：11016576
> 
> 赞同：1
> 
> 时间：2012-06-13T14:02:41.093
> 
> 标签：php, mysql, zend-framework

当 Tuser 中的身份验证代码不为空时，这意味着用户没有在 24 小时内登录该站点，因此我必须删除这些行。

这是我写的查询，但没有正确删除

```
 DELETE FROM tusers WHERE auth_code IS NOT NULL 
AND auth_code !=''
AND STR_TO_DATE(NOW(),'%Y-%m-%d %T')
> (DATE_SUB(STR_TO_DATE(created_date,'%Y-%m-%d  %T'),INTERVAL -1 DAY)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:10:04.233

通过测试并让我们知道它是否有效，您可以更好地确定它是否正确。

但我可以告诉你，它比它需要的更复杂。您可以像这样直接比较日期：

```
... where date(now()) > date_sub(created_date, interval 1 day) 
```

请注意，如果您要减去一天以返回，则应减去正数天数。减去负的天数是指时间较晚，而不是较早。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:16:03.263

我得到了完美的删除，它运行良好：

```
 DELETE FROM tusers WHERE auth_code IS NOT NULL AND auth_code !=''
 AND DATE_SUB(NOW() , INTERVAL 24 HOUR) > STR_TO_DATE(created_date,'%Y-%m-%d %T'); 
```

此查询通过将系统的当前日期与超过当前日期 24 小时的行的创建日期进行比较来删除行。

# c - 获取结构的大小作为 void 传递给函数

> ID：11016578
> 
> 赞同：0
> 
> 时间：2012-06-13T14:02:48.630
> 
> 标签：c, pointers, struct, sybase

我正在更改数据库库中的一些代码。它的工作方式我发送一个 void 指针，以获取它的大小，我调用一个查询并使用查询计算结构的大小。现在的问题是我将结构作为参数接收，但函数在第一次提取之前/中间失败。之后我需要清除结构，但我什至没有大小。我知道最好的方法是将结构的大小作为参数发送，但是我已经编译了成千上万的程序，库是 1996 年的，所以我需要找到一种方法来计算结构大小，即使类型是 void .

我的一个想法是计算下一个不在结构中的元素的位置

```
0x000010              0x000042
[int|char[30]|int|int][int] 
```

所以大小是32，因为0x00042-0x000010是32。

有没有办法知道我什么时候离开这个结构。

函数的原型是

```
int getData(char* fields, void* myStruct) 
```

我需要找出结构大小。

对不起，如果我错过了一些信息，代码是巨大的，不幸的是我不能在这里发布。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:07:34.547

不，一般来说，没有办法，给定 a `void *`，弄清楚你在追求什么。您唯一能做的就是将其与 进行比较`NULL`，这在这里当然没有帮助。

请注意，其中没有任何内容`void *`甚至说它指向 a `struct`，它也可以指向数组的中间。

如果您在将指针传递给之前有一些全局方法来记录指针`getData()`，则您可能能够实现一个查找函数，该函数只需将指针值与先前记录的值进行比较，但这只是使用指针值作为键。

# javascript - 视频后期处理所需的 javascript 框架

> ID：11016580
> 
> 赞同：-1
> 
> 时间：2012-06-13T14:03:00.833
> 
> 标签：javascript, video, canvas, html5-video, html5-canvas

有没有一些好的解决方案可以使用 canvas / html5 实现视频后处理（过滤器）？

我刚刚找到[https://github.com/brianchirls/Seriously.js](https://github.com/brianchirls/Seriously.js)但需要 webgl，我需要一些替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:40:40.270

Ive 将 RequestAnimationFrame 与播放到画布的视频结合起来，然后使用[Pixastic](http://www.pixastic.com/lib/docs/)的每一帧都取得了一些成功。这更像是“高端”视频后期制作（如在 Nuke、Flame 等中使用的）方法，其中视频本质上被视为帧存储中的一组帧。我见过像 Seriously.js 这样的东西，它们很棒，但请记住，在将视频渲染到画布时，您只是在处理图像序列，因此您有很大的自由度，几乎可以使用任何在显示之前对数据进行图像过滤/处理/算法。另一件要提的是，pixastic 效果在没有启用 webgl 的情况下都可以工作（所以你也可以支持 Internet Explorer），这很重要。js 没有。

有点跑题了，但是：

PS：我已经考虑过基于此制作一个基于整个 javascript 实时节点的后期制作应用程序：http: [//idflood.github.com/ThreeNodes.js/](http://idflood.github.com/ThreeNodes.js/) 示例：http: [//idflood.github.com /ThreeNodes.js/public/index.html#example/postprocessing1.json](http://idflood.github.com/ThreeNodes.js/public/index.html#example/postprocessing1.json)

具有一套全面的 FFT 和 webgl 增强效果。它确实处于早期阶段。

如果您有类似的想法，另一件可能会很有趣的事情是：

[http://marcinignac.com/blog/timeline-js](http://marcinignac.com/blog/timeline-js)

这里的例子：http: [//vorg.github.com/timeline.js/examples/cssAnimation.html](http://vorg.github.com/timeline.js/examples/cssAnimation.html)

# jquery - jQuery UI 可拖动。允许拖动仅从特定标签启动

> ID：11016581
> 
> 赞同：0
> 
> 时间：2012-06-13T14:03:01.897
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有 jQuery 可拖动设置并且在表格行上工作正常。目前您可以选择并拖动整行。我想要的是在左侧显示一个“grip”样式的图标，您可以从中启动拖动。我该如何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:10:20.023

[您可以在官方文档页面](http://jqueryui.com/demos/draggable/#handle)上阅读如何操作。

我自己还没有使用过draggable，但是使用官方文档实现这样的可排序句柄是一件容易的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:19:16.600

看看帮助选项：http: [//jqueryui.com/demos/draggable/#option-helper](http://jqueryui.com/demos/draggable/#option-helper)

例子：

```
$(".draggable").draggable({
    helper: function (event) {
        //return DOM-Element
    }
}); 
```

我为您设置了一个显示结果的小提琴（您可以开始拖动红色框）：http: [//jsfiddle.net/ra2zE/6/](http://jsfiddle.net/ra2zE/6/)

# c# - MVC BeginForm - 从控制器返回三个不同的 ajax 文本字符串

> ID：11016587
> 
> 赞同：0
> 
> 时间：2012-06-13T14:03:09.553
> 
> 标签：c#, jquery, ajax, asp.net-mvc

当在 beginform 中提交数据时，我需要从控制器向视图发送 3 个变量（视图包）。由于下面的 AJAX 功能，目前我只能得到 1 个变量来回发。

查询/AJAX

```
 function autosubmit() {

        $.ajax({
            type: 'POST',
            url: this.action,
            data: $('form').serialize(),
           success: function (result) {
                    $('#one').html(result); //ViewBag.one
                    $('#two').html(result); //ViewBag.two
                    $('#three').html(result); //ViewBag.three
                                     }

        });

    } 
```

形式：

```
@using (Html.BeginForm())
{
//form data automatically submits to controller
}

<div id="one">ajax data</div>
<div id="two">ajax data</div>
<div id="three">ajax data</div> 
```

控制器

```
[HttpPost]
        public ActionResult Index(model stuff)
        {
         ViewBag.one = stuff.data1;
         ViewBag.two = stuff.data2;
         ViewBag.three = stuff.data3;
         Return(ViewBag.one, ViewBag.two,ViewBag.three)
         } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:05:16.997

忘记 ViewBag/ViewData。就好像它从未存在过一样。

使用 JSON：

```
[HttpPost]
public ActionResult Index(model stuff)
{
    var data = new 
    { 
        data1 = stuff.data1, 
        data2 = stuff.data2, 
        data3 = stuff.data3 
    };
    return Json(data);
} 
```

然后消费：

```
$.ajax({
    type: 'POST',
    url: this.action,
    data: $('form').serialize(),
    success: function (result) {
        $('#one').html(result.data1);
        $('#two').html(result.data2);
        $('#three').html(result.data3);
    }
}); 
```

# php - 无法在具有 Worker 角色的开发模拟器上部署 PHP

> ID：11016592
> 
> 赞同：2
> 
> 时间：2012-06-13T14:03:24.580
> 
> 标签：php, azure, azure-worker-roles

我使用 Eclipse 和 PHP 插件来创建和配置我的 PHP 项目，以便在 Windows Azure (WA) 上部署它们。但是，我已经安装了 WA SDK 1.7（6 月 7 日），它与 Eclipse 和插件不兼容，所以我不得不使用突击队。我决定在 Eclipse 中创建项目（具有 Web 角色和工作者角色）并尝试运行以下突击队来重新创建 cscfg 文件和 .csx 文件夹，然后在计算模拟器上运行它......

```
 cspack ServiceDefinition.csdef /generateConfigurationFile:ServiceConfiguration.cscfg /copyonly 
```

...但它会产生以下错误...

```
Error : CloudServices38 : The entrypoint dll is not defined for worker role MyPhpProj_MyWorkerRole. 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T19:52:12.337

在 Web 和 Worker 角色中，您确实需要提供角色入口点或程序入口点。而且我知道在自定义工作角色中没有工作角色 DLL，但是您可以使用 PHP.EXE 或 Java.exe 或 Nodejs.exe 作为 ProgramEntryPoint。

解决此问题的方法是将 ProgramEntryPoint 与 Windows Azure Worker Role 结合使用。我将为您提供一个如下示例，说明如何使用它，以便您可以在 Windows Azure PHP 应用程序中使用它：

因此，如果您的工作角色名称为“TestWorker”并且文件夹 TestWorker 包含您的 PHP.EXE 以及其他文件，并且您的应用程序文件夹如下所示：

![在此处输入图像描述](../Images/7afe1818749c275a7f7635a9a939f97a.png)

现在您还可以编辑/添加您的 ServiceDefinition.cscfg 以包含正确的 WorkerRole 设置以及 ProgramEntryPoint，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WorkerRoleApp" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
 <WorkerRole name="TestWorker" vmsize="Small">
   <Runtime executionContext="limited">
     <EntryPoint>
      <ProgramEntryPoint commandLine="php.exe" setReadyOnProcessStart="true" />
     </EntryPoint>
   </Runtime>
   <Endpoints>
        <InputEndpoint name="PhpHttpIn" protocol="http" port="80" />
   </Endpoints>
  </WorkerRole>
</ServiceDefinition> 
```

最后，您可以使用如下 CSPACK 命令来构建您的包，然后在 Compute Emulator 中进行本地测试：

```
cspack ServiceDefinition.csdef /role:TestWorker;TestWorker /copyOnly 
   /out:WorkerRoleApp.csx /generateConfigurationFile:ServiceConfiguration.cscfg 
```

最后结果如下所示：

![在此处输入图像描述](../Images/6239a7fe22f8464cb30622ccadcda2b6.png)

# python - 打开存储在 csv 文件中的 URL

> ID：11016597
> 
> 赞同：0
> 
> 时间：2012-06-13T14:03:39.697
> 
> 标签：python, csv

我几乎是 Python 的绝对初学者，但我被要求管理一些困难的任务。我已经阅读了很多教程，并在这个网站上找到了一些非常有用的提示，但我认为这个问题直到现在才被问到，或者至少在我在搜索引擎中尝试过的方式上。

我设法在 csv 文件中写了一些 url。现在我想编写一个脚本来打开这个文件，打开网址，并将它们的内容写入字典。但我失败了：我的脚本可以打印这些地址，但无法处理文件。

有趣的是，我的脚本并不每次都发送相同的错误消息。最后一个：req.timeout = timeout AttributeError: 'list' object has no attribute 'timeout'

所以我认为我的脚本面临几个问题：1-我打开 url 的方法是正确的吗？2 - 我建立字典的方式有什么问题？

下面是我的尝试。提前感谢那些帮助我的人！

```
import csv
import urllib

dict = {}

test = csv.reader(open("read.csv","rb"))

for z in test:  
    sock = urllib.urlopen(z)
    source = sock.read()
    dict[z] = source
    sock.close()
print dict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:17:49.297

首先，不要隐藏内置插件。将您的字典重命名`dict`为用于创建新字典的其他名称。

其次，`csv`读者每行创建一个包含所有列的列表。要么显式引用列，`urllib.urlopen(z[0]) # First column in the line`要么用正常打开文件`open()`并遍历它。

除此之外，它对我有用。

# linux - cross-gdb：修复 libthread_db 和 libpthread 之间的不匹配问题

> ID：11016598
> 
> 赞同：2
> 
> 时间：2012-06-13T14:03:47.653
> 
> 标签：linux, debugging, gdb, remote-debugging

我有一个配置了`--host=i686-pc-linux-gnu --target=powerpc-e300c3-linux-gnu`. 我可以正确调试远程板上的应用程序，`gdbserver`但我收到有关版本不匹配的错误`libthread_db`，`libpthread`因此我无法正确调试线程（`gdb`仅识别一个线程而不是三个线程）。也许这是由于不同版本的`libc`: 在我拥有的主机`libc2.15`和目标机器上`lib2.5`。我试图`libc2.5`为主机重新构建以便将 gdb 链接到它，但这是一个地狱。在我疯狂重建它之前，有人可以确认这是一个`libc`问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:46:17.223

> 我试图为主机重新构建 libc2.5 以便将 gdb 链接到它

那不是你需要的。

您需要的是 gdb 查找和加载`libthread_db.so.1`与您的目标匹配的`libpthread.so.0`。

为此，您需要

1.  为主机构建`libc-2.5`，以及
2.  设置 GDB `libthread-db-search-path`，使其找到`libthread_db.so.1`步骤 1 中的内置内容。

您实际上不需要在步骤 1 中构建整个 libc。这样的事情就足够了：

```
mkdir build && cd build
../configure --prefix=/usr
make -C ../nptl_db objdir=`pwd` 
```

更新：

> 我有 GDB 6.6，但没有 libthread-db-search-path。指定该路径的另一种方法是什么？

那个 GDB 将只是`dlopen("libthread_db.so.1", ...)`. 所以要让它找到合适的`libthread_db.so.1`，你需要调整`LD_LIBRARY_PATH`。使用 bash：

```
LD_LIBRARY_PATH=/tmp/glibc-2.5/build/nptl_db gdb /path/to/target/a.out 
```

# hadoop - 如何混淆 Hive 视图中的列？

> ID：11016606
> 
> 赞同：4
> 
> 时间：2012-06-13T14:04:09.453
> 
> 标签：hadoop, md5, hive, hue

我为表创建了一个视图：

```
CREATE VIEW anonymous_table
AS SELECT id, value FROM sensitive_table 
```

并希望`id`以某种方式混淆敏感表的字段，例如 MD5 哈希或类似的东西，以便查询视图的人看不到实际的`id`. 在 Hive 中执行此操作的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:54:38.107

一些选项：

*   根本不要在视图中包含 ID：

    CREATE VIEW something AS SELECT "HIDDEN ID", value from sensitive_table;

*   如果您仍然需要为每条记录提供一个不同的键，您可以编写一个 UDF 来执行您喜欢的任何转换：

    添加 JAR mycode.jar; CREATE TEMPORARY FUNCTION hash as 'com.example.MyUDF'; CREATE VIEW SELECT hash(id)，来自sensitive_table的值；

*   奖励：看到您的用户无论如何都可以查看敏感表，您可以在 ID 到达配置单元之前对其进行哈希处理？老实说，这可能是最好的选择。

无论哪种方式，如果您正在处理 ID，如果人们仍然需要依赖 ID 来加入/聚合等，那么您需要一个稳定的散列函数。

[这是如何创建 UDF 的链接](https://cwiki.apache.org/confluence/display/Hive/HivePlugins)

# javascript - 动画由 html5 绘图 api 绘制的形状的点？

> ID：11016611
> 
> 赞同：0
> 
> 时间：2012-06-13T14:04:29.410
> 
> 标签：javascript, html

本质上，我想根据收到的内容量来改变我的形状，所以如果我使用 ajax 检索内容并且有很多内容，我会想要为形状的底部设置动画以放大形状。

关于如何完成此功能或是否有可能的任何想法？

# hover - 单击时保持悬停状态

> ID：11016614
> 
> 赞同：0
> 
> 时间：2012-06-13T14:04:33.727
> 
> 标签：hover

我正在完成一个网站，其中部分代码由未完成工作的自由职业者完成。我已经解决了几乎所有问题，但我被困在这个问题上。

测试地点在[这里](http://www.nunobraz.com.pt/test/)。

我希望顶部的按钮（PT-EN）保持悬停状态（白色），具体取决于我们所在的语言站点。与导航菜单项在选择时保持白色的方式大致相同。

提前致谢！

编辑：

我想要做的基本上是复制它在导航菜单中所做的事情，这是这样的：

HTML 说：

```
<div class="fright text">
            <ul>
                <li class="active"><a href="baga.html">baga</a></li>
                <li><a href="portfolio_thumbnai.html"> portfolio</a></li>
            </ul>
            <ul>
                <li><a href="clientes.html">clientes</a></li>
                <li><a href="contactors.html"> contactos</a></li>
                <li><a href="news.html"> news</a></li>
            </ul>
        </div> 
```

CSS 说：

```
.head .text{
    text-transform:uppercase;
    padding-top: 72px;
    font-size: 25px;
    text-align:right;
    margin-right:-1px;
    line-height:26px;
}
.head .text ul{
    padding:0px;
    margin-top:-5px
}
.head .text ul li{
    display:inline;
}
.head .text ul li a{
    text-decoration:none;
    color: #fff;
    opacity: 0.3;
    font-family: DIN-Light;
    -webkit-font-smoothing: antialiased; /* This needs to be set or some font faced fonts look bold on Mac. */
}
.head .text ul li.active a{
    color:#fff;
} 
```

当前对顶部按钮所做的是：

HTML

```
<div class="top-head">
        <ul>
        <li class="active"><a href="#">pt</a></li>
        <li> - <a href="en/index.html">en</a></li>
        </ul>
        </div> 
```

CSS

```
.top-head{
    text-align:right;
    text-transform:uppercase;
    padding-top:20px;
    font-size:11px;
    font-family: DIN-Light;
    -webkit-font-smoothing: antialiased; /* This needs to be set or some font faced fonts look bold on Mac. */
}
.top-head ul li{
    display:inline;
}
.top-head ul li a{
    text-decoration:none;
    color: #fff;
    opacity: 0.3;
    font-family: DIN-Light;
    -webkit-font-smoothing: antialiased; /* This needs to be set or some font faced fonts look bold on Mac. */
}
.top-head ul li.active a{
    color:#fff;
    opacity: 1;
} 
```

结果是当我们进入页面时，虽然 PT 按钮保持白色，但如果我们再次将鼠标悬停在它上面，白色就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:11:27.587

您可以根据 DOM 事件更改按钮的类别。使用我喜欢的 jQuery，我建议看一下[这个](http://api.jquery.com/hover/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:47:31.767

问题出在您的javascript中：

```
$(".text-top a,.menu-div a,.top-head a,.blog ul li a,.mapa a, input[type=button],input[type=submit]").live("mouseout", function() {
    if(!$(this).hasClass('active')) {
        $(this).stop();
        $(this).animate({
            opacity: 0.3
        }); 
    }
}); 
```

它会在鼠标移出时淡出元素，除非该特定元素具有活动类。您的站点不会将活动类应用于语言链接......它将活动类应用于`<li>`容器。

# php - PHP preg_replace_callback

> ID：11016617
> 
> 赞同：0
> 
> 时间：2012-06-13T14:04:37.323
> 
> 标签：php, preg-replace, preg-replace-callback

我在我的 html 文件中有这个标签：

```
 {{block:my_test_block}} 
{{news:my_test_block2}} 
```

我需要用数据库中的内容解析和替换这个标签，我的方法：

```
 ob_start();
     require_once('file.php');
     $template = ob_get_contents();
     ob_end_clean();

      $line = preg_replace_callback('/{(\w+)}/' , "parseTag" , $template);

function parseTag($matches){
   //here switch for block, news, 
} 
```

这是正确的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:19:09.577

尝试使用

```
'/{{(.+):(.+)}}/' 
```

所以在 $matches[1] 你会看到区块或新闻。

你的脚本应该是这样的

```
$line = preg_replace_callback('/{{(.+):(.+)}}/' , "parseTag" , $template);

function parseTag($matches){
   if($matches[1] == 'block'){
        $return = 'Its Blocked';
   }elseif($matches[1] == 'news'){
        $return = 'Great news';
   }else{
        $return = 'Ops...';
   }
   return $return;
} 
```

# delphi - 当面板改变大小时，如何将控件保留在面板的底部或右侧？

> ID：11016618
> 
> 赞同：3
> 
> 时间：2012-06-13T14:04:42.270
> 
> 标签：delphi, layout, panel

有一些类似的问题与解决方案，但没有人回答我的问题，所以在这里。

使用 a 进行`TPanel`折叠/展开`TButton`在它上面是可笑的简单，或者我是这么认为的。我到处玩，将按钮放在最顶部（用于从上到下扩展/折叠高度）或左侧（用于从左到右扩展/折叠宽度）一切都按计划进行。事实上，所有可扩展/可折叠的“高级”面板都以完全相同的方式工作 - 按钮仅放置在顶部或左侧。很快我就撞墙了：如果您将按钮分别放在底部或右侧以扩展/折叠高度或宽度，则按钮将停留在它们所在的位置......客户区（？） - 我缺乏解释的知识这是正确的，但我认为在另外指出之前很清楚正在发生什么。关键是，按照我这样做的方式，唯一的解决方案是在面板中重新定位按钮，

所以问题是：我怎样才能正确地做到这一点？因为我调整面板大小然后重新定位按钮的想法看起来不是解决这个问题的正确方法。或者，我很乐意采用一些这样做的组件，但是从我检查过的组件中，所有组件的行为都相同，甚至 JEDI VCL`TJvRollOut`组件也只能将`Placement`（按钮/标题的）设置为`plTop`or `plLeft`，所以我在想这不是那么简单吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:35:54.503

将您的按钮[`Anchors`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TControl.Anchors)属性设置为`[akLeft, akBottom]`.

![在此处输入图像描述](../Images/7ebf416d20bcbe4dbafd2aab7ba44d1a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:56:55.590

delphi中有两个属性可以调整任意工具的对齐方式：

1.  对齐（alNone、alLeft、alRight、alTop....）

2.  锚点（akLeft、akRight、akTop、akBottom）

例如，您有一个面板并在 TPanel 上拖动一个 TEdit。现在，您希望 TEdit 仅占据 TPanel 的左上角，并且它与面板的底角和右上角的距离应保持不变，无论面板大小如何变化（这意味着如果您沿底角或右角扩展面板，TEdit 会扩展）。

1.  设置对齐-> alNone。（不是 alLeft 否则 tEdit 将占据面板上的整个左侧区域，而不仅仅是左上角）。
2.  设置锚点-> akLeft=akTop=akRight=akBottom=True。如果您设置 akLeft=akTop=True 和 akRight=akBottom=False: 那么 TEdit 的大小在展开面板上沿底角或右上角保持不变。

# php - 如何在 php 中使用 BC Math 的无穷大？

> ID：11016620
> 
> 赞同：0
> 
> 时间：2012-06-13T14:04:59.157
> 
> 标签：php, infinity, bcmath

我找不到如何在 BC Math 中使用无穷大。让我们看一下：

```
$result = echo bcdiv("1", $divider); 
```

一切顺利，直到 $divider 为 0。所以你例外：

```
if (!bccomp($divider, "0")) {
    $result = echo bcdiv("1", $divider);
}
else {
    $result = INF;
} 
```

问题是 $result 在以后的计算中被计算为“0”。我可以将 $result 设置为任意大数，但这破坏了精确计算的概念。此外，如果我输入太大的数字以获得准确的计算，它会变得更慢。

有没有办法克服这个问题？

# google-maps - 使用密钥访问 Google 静态地图 API 未登录报告

> ID：11016622
> 
> 赞同：0
> 
> 时间：2012-06-13T14:05:06.203
> 
> 标签：google-maps, google-static-maps

我正在使用带有来自 API 控制台的 API 密钥的 Google 静态地图 API。

当我转到“报告”时，我看到 0 个静态地图 API 请求。对于 Google Places API，我可以看到预期的统计信息。

还有其他人经历过吗？也许这个 API 的统计数据需要很长时间才能更新？

# c++ - 包含时间数据的几乎排序列表的有效排序算法？

> ID：11016630
> 
> 赞同：9
> 
> 时间：2012-06-13T14:05:28.797
> 
> 标签：c++, algorithm, sorting, insertion-sort

这个名字真的说明了一切。我怀疑插入排序是最好的，因为它通常是大多数排序数据的最佳排序。但是，由于我对数据了解得更多，因此有可能还有其他类型的数据值得关注。所以其他相关的信息是：

1）这是时间数据，这意味着我推测可以为数据排序创建一个有效的散列。2）数据不会同时存在。相反，我将阅读可能包含单个向量或十几个或数百个向量的记录。我想在 5 秒的窗口内输出所有时间。因此，在我插入数据时进行排序的排序可能是一个更好的选择。3）内存不是大问题，但CPU速度是因为这可能是系统的瓶颈。

鉴于这些条件，除了插入排序之外，任何人都可以提出一种可能值得考虑的算法吗？另外，如何定义“大部分排序”来决定什么是好的排序选项？我的意思是我如何查看我的数据并决定'这不像我想象的那样排序，也许插入排序不再是最好的选择'？任何链接到考虑了过程复杂性的文章，该文章更好地定义了相对于学位数据的复杂性，都将被排序。

谢谢

编辑：谢谢大家的信息。我现在将使用简单的插入或合并排序（无论我已经预先编写过哪个）。但是，一旦接近优化阶段，我将尝试其他一些方法（因为它们需要更多的努力来实现）。我很感激帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:17:53.710

您可以采用您建议的选项 (2) - 在插入元素时对数据进行排序。

使用[跳过列表](http://en.wikipedia.org/wiki/Skip_list)，按时间排序，升序来维护您的数据。

*   一旦新的主菜到达 - 检查它是否大于最后一个元素（简单快捷），如果是 - 只需附加它（在跳过列表中很容易做到）。对于这些情况，跳过列表将需要平均添加 2 个节点，并且`O(1)`对于这些情况平均而言。
*   如果元素不大于最后一个元素 - 将其作为标准插入操作添加到跳过列表中，即`O(logn)`.

这种方法将为您提供`O(n+klogn)`算法，其中`k`是乱序插入的元素数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:12:47.930

如果您实现自然版本，我会进行[合并排序](http://en.wikipedia.org/wiki/Merge_sort)，如果您有任何问题，您会得到`O(N)`一个典型和最坏情况的最佳情况。`O(N log N)`插入你会得到最坏的情况`O(N^2)`和最好的情况`O(N)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-31T00:27:54.060

您可以对包含不合时宜的元素`n`的大小列表进行排序。`k``O(n + k lg k)`

请参阅：[http ://www.quora.com/How-can-I-quickly-sort-an-array-of-elements-that-is-already-sorted-except-for-a-small-number-of- elements-say-up-to-1-4-of-the-total-whose-positions-are-known/answer/Mark-Gordon-6?share=1](http://www.quora.com/How-can-I-quickly-sort-an-array-of-elements-that-is-already-sorted-except-for-a-small-number-of-elements-say-up-to-1-4-of-the-total-whose-positions-are-known/answer/Mark-Gordon-6?share=1)

基本思想是这样的：

*   遍历数组的元素，构建一个递增的子序列（如果当前元素大于或等于子序列的最后一个元素，则将其追加到子序列的末尾。否则，丢弃当前元素和最后一个元素子序列）。这需要`O(n)`时间。
*   `2k`由于`k`元素不合适，您将丢弃的元素不超过元素。
*   使用归并排序或堆排序等排序算法对丢弃的`2k`元素进行排序。`O(k lg k)`
*   您现在有两个排序列表。`O(n)`像在合并排序的合并步骤中那样及时合并列表。

总时间复杂度 =`O(n + k lg k)`

整体空间复杂度 =`O(n)`

`O(1)`（如果可以在空间中合并，这可以修改为在空间中运行`O(1)`，但这绝不是微不足道的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T22:01:46.137

在不完全理解问题的情况下，[Timsort](http://en.wikipedia.org/wiki/Timsort)可能符合要求，因为您声称您的数据大部分已经排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T16:43:11.200

有许多自适应排序算法专门设计用于对大多数排序的数据进行排序。忽略您正在存储日期的事实，您可能希望将[平滑](http://en.wikipedia.org/wiki/Smoothsort)排序或笛卡尔树排序视为可以对在最坏情况 O(n log n) 时间和最佳情况 O(n) 时间合理排序的数据进行排序的算法时间。Smoothsort 还具有只需要 O(1) 空间的优点，就像插入排序一样。

使用所有内容都是日期并因此可以转换为整数的事实，您可能希望使用三个枢轴选择的中值来查看二进制快速排序（MSD 基数排序）。该算法具有最佳情况 O(n log n) 性能，但具有非常低的常数因子，使其非常具有竞争力。最坏的情况是 O(n log U)，其中 U 是每个日期的位数（可能是 64），这还不错。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T16:50:07.950

如果您的 OS 或 C 库提供了合并排序功能，它很可能已经处理了在 O(N) 时间内运行的给定数据是部分有序（在任何方向上）的情况。

否则，您可以从您最喜欢的 BSD 操作系统中复制可用的合并排序。

# iphone - 为什么将委托添加到 UINavigationController 会使我的应用程序崩溃？

> ID：11016641
> 
> 赞同：0
> 
> 时间：2012-06-13T14:06:12.480
> 
> 标签：iphone, delegates, storyboard

我正在开发一个 iPhone 应用程序。我正在使用故事板。

我想将一个对象附加到 NavController 以处理显示表格视图的窗口底部按钮栏的可见性。

我创建了自己的 UINavigationDelegate；我的导航控制器委托。

我在 UIBuilder 中创建了一个 NSObject 并更改了它的类 MyNavigationControllerDelegate。然后将其附加为 UINavigationController 的委托。

![在此处输入图像描述](../Images/8c21fbc437ab74840ca2b8ee7137a15b.png)

出于某种原因，MyNavigationControllerDelegate 正在被释放。我原以为成为代表就足以保持对它的引用并防止重新分配，但情况似乎并非如此。

关于如何防止它被释放的任何建议？每次加载视图时，我是否必须将其重置为委托？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:24:09.637

UINavigationController的`delegate`属性被声明为`assign`而不是`retain`或`strong`（参见[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/delegate)）。委托通常声明为`weak`or `assign`，这意味着分配属性不会导致`UINavigationController`增加委托的引用计数，并且您需要另一个对象来持有对它的强引用（可能是您的 RootViewController）。

# android - Android：在本地网络中打开文件

> ID：11016642
> 
> 赞同：2
> 
> 时间：2012-06-13T14:06:12.973
> 
> 标签：android, file, networking, download, lan

我正在尝试创建一个每 x 分钟发送一次 SMS 的程序，使用位于我的 LAN 网络上的共享文件夹中的 .txt 文件，我找不到如何捕获这个文件......我想远程阅读它或至少将其下载到我的 SD 卡中以供阅读。

我试图用几种方法解决它，但没有人奏效

```
File f = new File("file://192.168.2.106/Users/Maxime.test.txt"); 
```

或者：

```
String textSource = "\\\\192.168.2.106\\Users\\Maxime\\test.txt";
textUrl = new URL(textSource); 
```

我的共享不需要密码，并且在 ES Explorator 中可见

谢谢您的帮助 ：）

# jquery - jQuery 元素 offset() 返回不正确的值？

> ID：11016647
> 
> 赞同：0
> 
> 时间：2012-06-13T14:06:28.993
> 
> 标签：jquery, offset

我正在尝试使用 foo.offset().top 为`<sup>`文章第一段中出现的元素获取正确的偏移值。这是我正在谈论的屏幕截图：

[链接到图片](http://i.imgur.com/PhbSK.png)

红色框距离文档顶部 377px，这是 offset() 返回的计算值。问题是我试图找到段落中第一个上标元素的偏移量（它从“所有孩子”开始）。很明显，有些可疑的事情正在发生。

有任何想法吗？由于我暂时在本地开发，因此无法链接到实时站点。（在 Chrome 和 Firefox 中测试并遇到同样的问题）

# tomcat - MyFaces 2 不带 2 个滤镜

> ID：11016653
> 
> 赞同：0
> 
> 时间：2012-06-13T14:07:01.617
> 
> 标签：tomcat, myfaces

在我们的软件中，我们使用了 myfaces 1，实现了 2 个过滤器。首先是 /jsf，另一个是 /1，其映射类位于 web.xml 文件中。它适用于 myfaces 1，但是当我们在 Web 应用程序的每个页面上将 myfaces 版本从 1 升级到 2 时，我们开始出现空指针错误。

> java.lang.NullPointerException 在 org.apache.myfaces.context.MyFacesExceptionHandlerWrapperImpl.handle(MyFacesExceptionHandlerWrapperImpl.java:202) 在 javax.faces.context.ExceptionHandlerWrapper.handle(ExceptionHandlerWrapper.java:64) 在 org.apache.myfaces.lifecycle。 LifecycleImpl.render(LifecycleImpl.java:261) at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache .catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.calendra.portal.SessionFilter.doFilter(SessionFilter.java:91) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235 ) 在 org.apache.catalina.core.ApplicationFilterChain。doFilter(ApplicationFilterChain.java:206) 在 com.calendra.jsf.components.XSLFilter.doFilter(XSLFilter.java:92) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache .catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.myfaces.component.html.util.MultipartFilter.doFilter(MultipartFilter.java:131) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter (ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache。 catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core。StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org .apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291) 在 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877) 在 org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process (Http11AprProtocol.java:594) 在 org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675) 在 java.lang.Thread.run(Thread.java:619)109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291) 在 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877) 在 org.apache.coyote.http11.Http11AprProtocol $Http11ConnectionHandler.process(Http11AprProtocol.java:594) at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675) at java.lang.Thread.run(Thread.java:619)109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291) 在 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877) 在 org.apache.coyote.http11.Http11AprProtocol $Http11ConnectionHandler.process(Http11AprProtocol.java:594) at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675) at java.lang.Thread.run(Thread.java:619)

在 jsp 文件中，我使用如下调度方法重定向到新页面 **context.getExternalContext().dispatch("/jsf/1/stdportal/login.jsp");**

当我从上面的调度方法的参数中删除 /jsf 时，我没有遇到任何问题，一切正常......但我希望它也能与 /jsf 一起使用......**。

我的应用服务器是 Tomcat 6，Java 版本是 6。

在此先感谢 Akshay

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:51:44.667

看起来像 MyFaces 异常处理程序中的异常。所以我猜你看到的异常是由 MyFaces 无法处理其他一些异常引起的。

您可以尝试禁用 MyFaces 错误处理以查看它是否揭示了原始问题：

```
<context-param>
  <param-name>org.apache.myfaces.ERROR_HANDLING</param-name>
  <param-value>false</param-value>
</context-param> 
```

# javascript - Jquery：复选框未在 IE7 中被选中

> ID：11016654
> 
> 赞同：0
> 
> 时间：2012-06-13T14:07:03.317
> 
> 标签：javascript, jquery, html

我正在尝试检查一个复选框，我尝试执行以下操作：-

1.  `$('#someId').attr('checked','checked');`

2.  `$('#someId').attr('checked', true);`

以上都适用于 ie8,ff**但不适用于 ie7**！

我使用的是旧版本的 jquery (1.4.2)，所以使用 .prop() 是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:12:24.357

您始终可以采用原生 Javascript 方式：

```
// Get element using jQuery
var myCheckbox = $('#someId').get(0);

// Make it checked old school style.
myCheckbox.checked = true; 
```

编辑：

当然： document.getElementById("someId") 会让你获得完全独立于 jQuery 的元素

# android - 如何判断Android的BOOT_COMPLETED是否发生（未收到）

> ID：11016656
> 
> 赞同：3
> 
> 时间：2012-06-13T14:07:16.530
> 
> 标签：android

我不是想创建一个 BOOT_COMPLETED 接收器（这样做并不能解决我的问题）。

有没有办法确定 BOOT_COMPLETED 是否发生？我有一个在 Android 完成启动之前（以及之后）被调用的库，如果系统尚未完成启动，我不希望我的库完成其请求。在每个可能使用这个库的应用程序中设置一个 BOOT_COMPLETED 接收器不是一个合理的方法，原因有几个。

我可以拨打任何 Android 电话来确定设备的启动是否已完成？似乎有一个属性 dev.bootcomplete，如果不存在更好的方法，我可能不得不使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:14:41.777

恐怕实现这一目标的唯一*官方*方法是创建`RECEIVE_BOOT_COMPLETED`接收器。

我建议您不要依赖属性，因为它们通常是 OEM 特定的。否则，您的应用程序最终可能会在一个 Android 模型上运行，而不能在另一个模型上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:28:20.903

```
 Setting up a BOOT_COMPLETED receiver in every application 
```

我猜你的意思是说你不想在每个活动中都使用 BOOT_COMPLETED 接收器。

它很有可能。

您可以注册`BOOT_COMPLETED receiver`.and`Activity A`一旦`Activity A`获得广播，它就可以使用 sendBroadcast（自定义广播）通知其他活动。

要查看如何使用自定义广播，[请查看此处](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)

# iphone - 从当前 NSDate 计算年份

> ID：11016657
> 
> 赞同：-1
> 
> 时间：2012-06-13T14:07:16.903
> 
> 标签：iphone, objective-c, nsdate, nscalendar, nsdatecomponents

我想从当前的 NSDate 计算年份。假设我当前的日期是**14-06-2012**，那么年底之后的最后一个日期是什么。（简单来说，我可以向您解释，如果我有日期**01-01-2012**那么在年底之后我会得到**31-12-2012**）。那么，我如何计算当前日期的年份。以下输出我期望我的项目：

> 1.  下一年或结束年 年结束的日期（如 31-12-2012）。
> 2.  下一个或年末月份（最后一个日期月份）。
> 3.  下一年或结束年份（最后日期年份或下一年）。

它应该是 NSDate 格式。希望你能明白我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:39:00.683

```
NSDate *today = [NSDate date]; 
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [gregorian components:(NSYearCalendarUnit) fromDate:today];

[comps setDay:31]; // last day of year is always the same
[comps setMonth:12];

NSInteger year = [comps year]; // the current year
NSDate *lastDayOfYear = [gregorian dateFromComponents:comps]; // the last day of the year 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:09:29.463

你可以使用这个：

```
NSDate *now = [NSDate date];
NSDateComponents *dc = [[NSDateComponents alloc] init];
[dc setYear:1];
NSDate *targetDateObject = [[NSCalendar currentCalendar] dateByAddingComponents:dc toDate:now options:0];
[dc release]; 
```

# unit-testing - Grails 与多个服务的集成测试

> ID：11016659
> 
> 赞同：5
> 
> 时间：2012-06-13T14:07:21.667
> 
> 标签：unit-testing, grails, integration-testing, grails-2.0

测试依赖于另一个服务的 Grails 服务的最佳实践是什么？默认 mixin TestFor 正确注入被测服务，例如：

```
@TestFor(TopService) 
class TopServiceTests {
    @Test
    void testMethod() {
        service.method()
    }
} 
```

但是如果我的 TopService（服务）实例依赖于另一个服务，比如 InnerService：

```
class TopService {
    def innerService
} 
```

innerService 将不可用，依赖注入似乎没有填充这个变量。我应该如何进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T17:34:47.053

集成测试不应该使用`@TestFor`注解，他们应该使用`extend GroovyTestCase`. 测试注释仅用于单元测试（在集成测试中使用时会出现不良行为，尤其是`@Mock`注释）。您现在正在看到其中一种不良行为。

如果你扩展`GroovyTestCase`你就可以

```
def topService 
```

在测试的顶部，它将注入所有注入的依赖项。

对于单元测试用例，您只想在方法中将关联服务的新实例添加到您的服务中`setUp`。就像：

```
@TestFor(TopService) 
class TopServiceTests {
    @Before public void setUp() {
        service.otherService = new OtherService()
    }
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:25:31.113

我有一个 CustomerRegistrationServiceTest，我的 CustomerRegistrationService 依赖于 PasswordService。

我的 CustomerRegistrationService 只是像往常一样自动连接它：

```
class CustomerRegistrationService {
    def passwordService 
```

在我的 CustomerRegistrationServiceTest 我有：

```
@TestFor(CustomerRegistrationService)
@Mock(Customer)
class CustomerRegistrationServiceTests extends GrailsUnitTestMixin {

    void setUp() {
        mockService(PasswordService)
    } 
```

因此，当我测试 CustomerRegistrationService 时，它​​能够访问 PasswordService

# python - 如何在 Python 中编写带有注释的输入文件

> ID：11016661
> 
> 赞同：1
> 
> 时间：2012-06-13T14:07:35.567
> 
> 标签：python, comments

我需要为 python 程序编写一些输入数据文件，我需要完整的东西：

注释、间距、变量 = 值等。

python是否有任何库（命令行参数的行argparser）或者我应该自己编写？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:08:54.343

查看[`ConfigParser`](http://docs.python.org/library/configparser.html)模块（`configparser`在 Python 3 中重命名为）。

或者，您可以简单地使用 Python 语法编写输入数据，并将`import`结果写入您的主程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:36:36.097

语法必须看起来像这样吗？您能否只使用字符分隔文件（如 csv 或制表符分隔），每个预定义字段位于单独的列中？Python 有定义明确的模块来处理`csv`数据。

如果您特别想要显示代码块的输入文件，那么 aix 的导入建议也可以。

# ruby-on-rails - 计算 Rails 中记录之间的平均天数

> ID：11016669
> 
> 赞同：3
> 
> 时间：2012-06-13T14:08:07.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

鉴于我有一个`Foo`带有标准 Rails 时间戳列的模型，计算创建记录之间的平均天数的最有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:23:11.483

模型的`maximum`和`minimum`类方法将使用 SQL 聚合函数`min()`并`max()`有效地找到极值。

```
span_secs = Foo.maximum(:created_at) - Foo.minimum(:created_at)
avg_secs = span_secs / (Foo.count - 1)
avg_days = avg_secs / (24 * 60 * 60) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T16:07:44.543

如果你使用 MySQL

```
secs = Foo.where("created_at IS NOT NULL").average("UNIX_TIMESTAMP(created_at)").to_i
DateTime.strptime secs.to_s, "%s" 
```

# android - 标签小部件的高度

> ID：11016671
> 
> 赞同：1
> 
> 时间：2012-06-13T14:08:09.330
> 
> 标签：android, android-layout, android-widget

我有一个 TabWidget 这样做：

![在此处输入图像描述](../Images/c81a98eb249bbad1efda66cd97a29a03.png)

我试图降低高度，我得到了这个：

![在此处输入图像描述](../Images/d49a990f73fb7eb8d46cade5f593e8db.png)

使用以下代码：

```
 <TabWidget android:id="@android:id/tabs"
        android:layout_width="match_parent" 
        android:layout_height="40px" 
        android:layout_marginTop="10px" ></TabWidget> 
```

有没有办法让文字消失？

# php - 使用 OAuth 2.0 登录 Facebook

> ID：11016676
> 
> 赞同：2
> 
> 时间：2012-06-13T14:08:23.407
> 
> 标签：php, facebook, oauth-2.0, facebook-login

1.  我希望人们使用他们的 Facebook 帐户登录我的网站。
2.  我需要从他们的 Facebook 个人资料中提取一些信息并将其添加到我网站的数据库中

我尝试使用 OAuth 2.0 方法重定向到这个 url

```
https://www.facebook.com/dialog/oauth?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
   &state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

我成功地对用户进行了身份验证，但现在出现了主要问题。如何访问作为响应发送的数据，我只能看到一个`GET`名为变量`code`和一些长文本。如何转换为可用数据？

我为我的网站使用 php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:16:28.440

交换用户访问令牌的代码

用户授权您的应用程序后，您应该发出服务器端请求以将上面返回的代码交换为用户访问令牌。

```
https://graph.facebook.com/oauth/access_token?
client_id=YOUR_APP_ID
&redirect_uri=YOUR_REDIRECT_URI
&client_secret=YOUR_APP_SECRET
&code=CODE_GENERATED_BY_FACEBOOK 
```

client_secret 参数必须是应用程序设置中显示的应用程序密钥。对此请求的响应正文将是一个 url 编码的字符串，格式如下：

```
access_token=USER_ACESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

您应该解析此字符串并使用 access_token 值向 Graph API 发出请求。您还应该将访问令牌保留在数据库中，以便向 API 发出进一步请求，而无需重新验证用户身份。

一旦访问令牌到期时间到达，令牌将失效，不能再用于对 API 的请求。要获取新的用户访问令牌，您必须再次让用户通过此流程。但是，如果用户没有取消对您的应用程序的授权，并且您要求的权限超出了用户已经授予您的应用程序的权限，则不会显示任何对话框，并且用户将使用新代码透明地重定向到您的 redirect_uri可以换成新的用户访问令牌。

如果在交换用户访问令牌的代码时出现问题，授权服务器将发出 HTTP 400 并在响应正文中以 JSON 对象的形式返回错误：

```
{
   "error": {
      "type": "OAuthException",
      "message": "Error validating verification code."
   }
} 
```

如需进一步参考结帐[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

向 Graph API 发出请求

使用有效的用户访问令牌，您可以请求从 Graph API 读取和写入数据。一个常见的第一个请求是获取刚刚对您的应用进行身份验证的用户的基本信息（包括 id 和名称）：

```
https://graph.facebook.com/me?access_token=YOUR_USER_ACCESS_TOKEN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:14:20.357

Facebook有一个[官方](https://github.com/facebook/facebook-php-sdk)的 php SDK。这让生活更轻松。

检查此[示例代码](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-25T15:00:15.570

在带有 facebook 的 OAuth 2.0 中，整体概念很简单，如下所示。

Step 1\. 通过 GET 请求获取“授权码”

```
request URI: https://www.facebook.com/dialog/oauth
Params:
    response_type=code
    client_id={add your "App id" got by registering app}
    redirect_uri={add redirect uri defined at the registration of app}
    scope={add the scope needed in your app}
Headers: None 
```

Step 2\. 通过POST请求发送授权码获取“Access Token”

```
request URI: https://graph.facebook.com/oauth/access_token
Params:
    grant_type=authorization_code
    client_id=<add your "App id" got by registering app>
    redirect_uri=<add redirect uri defined at the registration of app>
    code=<obtained authorization code from previous step>
Headers:
    Authorization:Basic encode <App Id:App Secret> with base64 
    Content-Type:application/json 
```

步骤 3\. 使用从上述步骤获得的访问令牌并检索用户资源

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-29T17:43:18.743

使用 JSON WEB TOKEN(JWT) 解码器获取 token_id 中的数据，当您打印 GET['code'] 的内容时将获得该数据。在其中选择 token_id 复制它并将其粘贴到在线解码器中

# asp.net-mvc-3 - ASP.NET MVC3 获取视图任何部分的上次修改时间？

> ID：11016677
> 
> 赞同：6
> 
> 时间：2012-06-13T14:08:25.903
> 
> 标签：asp.net-mvc-3, view, razor, last-modified, http-caching

我想在渲染之前获取视图任何部分的最后修改时间。这包括布局页面、部分视图等。

我想设定一个合适的时间

```
 Response.Cache.SetLastModified(viewLastWriteUtcTime); 
```

正确处理http缓存。目前我已经为视图本身工作，但是如果布局页面有任何更改，或者子部分视图没有被拾取

```
var viewLastWriteUtcTime = System.IO.File.GetLastWriteTime(
    Server.MapPath(
    (ViewEngines.Engines.FindView(ControllerContext, ViewBag.HttpMethod, null)
            .View as BuildManagerCompiledView)
        .ViewPath)).ToUniversalTime(); 
```

有什么办法可以得到整体的最后修改时间？

我不想`304 Not Modified`在修改了视图相关部分的部署之后做出响应，因为用户会得到不一致的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T18:07:39.297

我不会保证这是最有效的方法，但我已经测试过它并且它有效。您可能需要调整 GetRequestKey() 逻辑，并且您可能希望根据您的方案选择备用临时存储位置。我没有为文件时间实现任何缓存，因为这似乎是您不感兴趣的事情。如果可以将时间减少一点并且您想避免每个请求的文件访问开销。

首先，使用视图引擎扩展 RazorViewEngine，该引擎跟踪在此请求期间呈现的所有视图的最大上次修改时间。我们通过在会话 id 和请求时间戳键入的会话中存储最新时间来做到这一点。您可以使用任何其他视图引擎轻松完成此操作。

```
public class CacheFriendlyRazorViewEngine : RazorViewEngine
{
    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        UpdateLatestTime(controllerContext, GetLastModifiedForPath(controllerContext, viewPath));
        var pathToMaster = masterPath;
        if (string.IsNullOrEmpty(pathToMaster))
        {
            pathToMaster = "~/Views/Shared/_Layout.cshtml"; // TODO: derive from _ViewStart.cshtml
        }
        UpdateLatestTime(controllerContext, GetLastModifiedForPath(controllerContext, pathToMaster));
        return base.CreateView(controllerContext, viewPath, masterPath);
    }

    protected override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
    {
        UpdateLatestTime(controllerContext, GetLastModifiedForPath(controllerContext, partialPath));
        return base.CreatePartialView(controllerContext, partialPath);
    }

    private DateTime GetLastModifiedForPath(ControllerContext controllerContext, string path)
    {
        return System.IO.File.GetLastWriteTime(controllerContext.HttpContext.Server.MapPath(path)).ToUniversalTime();
    }

    public static void ClearLatestTime(ControllerContext controllerContext)
    {
        var key = GetRequestKey(controllerContext.HttpContext);
        controllerContext.HttpContext.Session.Remove(key);
    }

    public static DateTime GetLatestTime(ControllerContext controllerContext, bool clear = false)
    {
        var key = GetRequestKey(controllerContext.HttpContext);
        var timestamp = GetLatestTime(controllerContext, key);
        if (clear)
        {
            ClearLatestTime(controllerContext);
        }
        return timestamp;
    }

    private static DateTime GetLatestTime(ControllerContext controllerContext, string key)
    {
        return controllerContext.HttpContext.Session[key] as DateTime? ?? DateTime.MinValue;
    }

    private void UpdateLatestTime(ControllerContext controllerContext, DateTime timestamp)
    {
        var key = GetRequestKey(controllerContext.HttpContext);
        var currentTimeStamp = GetLatestTime(controllerContext, key);
        if (timestamp > currentTimeStamp)
        {
            controllerContext.HttpContext.Session[key] = timestamp;
        }
    }

    private static string GetRequestKey(HttpContextBase context)
    {
        return string.Format("{0}-{1}", context.Session.SessionID, context.Timestamp);
    }
} 
```

接下来，用 global.asax.cs 中的新引擎替换现有引擎

```
protected void Application_Start()
{
     System.Web.Mvc.ViewEngines.Engines.Clear();
     System.Web.Mvc.ViewEngines.Engines.Add(new ViewEngines.CacheFriendlyRazorViewEngine());
     ...
} 
```

最后，在一些全局过滤器中或在每个控制器的基础上添加一个 OnResultExecuted。注意，我相信控制器中的 OnResultExecuted 在响应发送后运行，所以我认为你必须使用过滤器。我的测试表明这是真的。

另外，请注意，在用于防止使用时间戳污染会话之后，我将清除会话中的值。您可能希望将其保留在缓存中并对其设置较短的到期时间，这样您就不必明确清除内容，或者如果您的会话未保存在内存中以避免将其存储在会话中的事务成本。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class UpdateLastModifiedFromViewsAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        var cache = filterContext.HttpContext.Response.Cache;
        cache.SetLastModified(CacheFriendlyRazorViewEngine.GetLatestTime(filterContext.Controller.ControllerContext, true));
    }

} 
```

最后，将过滤器应用到要使用它的控制器或作为全局过滤器：

```
[UpdateLastModifiedFromViews]
public class HomeController : Controller
{
    ...
} 
```

# c++ - 有没有办法手动扩展可变参数模板？

> ID：11016683
> 
> 赞同：2
> 
> 时间：2012-06-13T14:08:46.720
> 
> 标签：c++, visual-studio, c++11, variadic-templates

Visual Studio 目前不支持可变参数模板，官方的说法是 VS2012 仍然不支持它们。

我已经移植了我的开源项目以使用 C++11，而可变参数模板是该移植的重要组成部分。这意味着我可以支持 clang++ 3.1 和 g++ 4.5 但不支持 Visual Studio。

所以，我的问题是，是否有一个工具可以让我手动扩展我的可变参数模板（到一些 N 参数）并将它们检查到源代码控制中，以便我可以为 VisualStudio 提供权宜之计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:35:07.023

我最近写了一个工具来做到这一点（新的 VStudio 2012 C++ 编译器不支持，我不希望再获得可变参数模板）

这是非常基本的，但我想既然可能有兴趣，我不妨发布它。

你可以从我的网站下载它：http: [//mlvdmeide.com/varexp](http://mlvdmeide.com/varexp)

# django - 实现数据库搜索

> ID：11016684
> 
> 赞同：0
> 
> 时间：2012-06-13T14:08:47.083
> 
> 标签：django, search, django-models, django-haystack

目前我有一个课程数据库，它有 6 列：

```
class Course(models.Model):
    title = models.CharField(max_length=50)
    number = models.CharField(max_length=12)
    Cat1 = models.BooleanField()
    Cat2 = models.BooleanField()
    Cat3 = models.BooleanField()
    department = models.ForeignKey(Department) 
```

本课程的 unicode 方法输出如下内容：

```
def __unicode__(self):
        return u'%s %s %s %s %s %s' % (self.department, self.number, self.title, 'CAT1' if self.Cat1 else '','Cat2' if self.Cat2 else '','Cat3' if self.Cat3 else '') 
```

返回类似：ENG 1104 Academic Writing Cat1 Cat3

我正在尝试实现搜索以通过文本查询查找课程，所以我尝试了 Haystack（以 Whoosh 作为引擎），但为了更容易索引，我只是在名为 的模型中添加了一个新列`text`，我刚刚在其中添加了每门课程的 Unicode 文本。这种方法效果很好，但显然它并不健壮，因为这只是我的一个小项目，用于学习目的，我想知道更有效的方法来完成这个搜索。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:06:08.870

Haystack 不需要对您的模型进行任何更改。推荐的方法是使用模板：

```
class CourseIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    ... 
```

然后，您创建一个以`templates/search/indexes/[app]/[model]_[indexfield].txt`. 所以，在这种情况下，它会是`templates/search/indexes/yourapp/course_text.txt`. 然后，您使用标准 Django 模板标签等来创建模型的纯文本表示：

```
{{ object.title }}
{{ object.number }}
{{ object.department.name }} 
```

添加尽可能多的信息。如果您有任何包含 HTML 的富文本字段，请记住使用`striptags`，以免索引中出现垃圾。

# django - ModelForm 用户混合

> ID：11016687
> 
> 赞同：2
> 
> 时间：2012-06-13T14:08:56.567
> 
> 标签：django, forms, modelform

我有一些带有**用户**字段的模型。

为此，我想创建一个表单 mixin 来添加`self.user`实例（在视图中提供给表单）。可能吗 ？

这是示例

```
class UserFormMixin(object):
    """Removes user instance from kwargs and adding it to object"""
    def __init__(self, *args, **kwargs):
        super(UserFormMixin, self).__init__(*args, **kwargs)
        self.user = kwargs.pop('user')

    def save(self, **kwargs):
        obj = super(UserFormMixin, self).save(commit=False)
        obj.user = self.user
        if kwargs['commit']:
            return obj.save()
        else:
            return obj 
```

我想达到的目标：

```
class SomeFormWithUserField(UserFormMixin, ModelForm):
    class Meta:
        model = SomeModelWithUserField
        fields = ['fields without user']

    def save(self, **kwargs):
        data = super(SomeFormWithUserField, sefl).save(commit=False)
        #data already with user prepended
        #do some other stuff with data
        if kwargs['commit']:
            return data.save()
        else
            return data

class SomeOtherFormWithUser(UserFormMixin, ModelForm):
    class Meta:
        model = SomeOtherModel
        fields = ['some fields without user']

# no need to save here.. standard model form with user prepended on save() 
```

问题是 UserFormMixin 不知道模型实例？还是我在这里错了？我遇到了一些问题..比如'commit' kwargs key error..或者对象没有保存..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:49:23.597

你很接近，你只是有一些逻辑错误。首先，为了覆盖`ModelForm`方法，你的 mixin 需要继承自`ModelForm`.

```
class UserFormMixin(forms.ModelForm):
    ... 
```

然后，从它继承的任何形式都只是继承`UserFormMixin`，而不是`ModelForm`。

```
class SomeOtherFormWithUser(UserFormMixin):
    ... 
```

其次，您的`__init__`方法覆盖不正确。您需要接受传入其中的任何和所有 args 和 kwargs。

```
def __init__(self, *args, **kwargs):
    ... 
```

最后，不要`save`在子类中再次覆盖该方法。我想这在技术上不会伤害任何东西，但是如果你要重复代码，继承又有什么意义呢？If不可为空，您始终可以在将其添加到模型之前`user`添加一个 if 块来检查是否。`self.user is not None`当然，如果它不可为空，那么无论如何`user`您的模型都不会保存。`self.user`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:09:09.873

这个似乎工作正常。谢谢克里斯！如果这可以更好地编码，请告诉我。

```
class UserFormMixin(forms.ModelForm):
    """Removes user instance from kwargs and adding it to object"""
    def __init__(self, *args, **kwargs):
        super(UserFormMixin, self).__init__(*args, **kwargs)
        self.user = kwargs.pop('user')

    def save(self, commit=True):
        obj = super(UserFormMixin, self).save(commit=False)
        obj.user = self.user
        if commit:
            return obj.save()
        else:
            return obj

class SomeFormWithUserField(UserFormMixin):
    class Meta:
        model = SomeModelWithUserField
        fields = ['fields without user']

    def save(self, **kwargs):
        data = super(SomeFormWithUserField, sefl).save(commit=False)
        #data already with user prepended
        #do some other stuff with data
        # self.send_mail() f.e.
        return data.save()

class SomeOtherFormWithUser(UserFormMixin):
    class Meta:
        model = SomeOtherModel
        fields = ['some fields without user']
# this will work too 
```

# java - TextView 未显示/相对布局

> ID：11016695
> 
> 赞同：1
> 
> 时间：2012-06-13T14:09:45.093
> 
> 标签：java, android, xml, eclipse, textview

对于你们中的一些人来说，这似乎是一个非常简单的问题，但即使在尝试了本网站上提出的众多解决方案之后，我也找不到显示我的 TextView 的方法。并不是说我使用的是 Android 的内置 Eclipse XML 工具，并且 TextView 在这个图形布局上是可见的。这是我到目前为止所得到的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/home_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:contentDescription="@string/no_of_screens"
    android:id="@+id/imageViewHome"
    android:layout_width="290dp"
    android:layout_height="212dp"
    android:layout_gravity="center_horizontal"
    android:paddingTop="40dp"
    android:src="@drawable/logo" />

<RelativeLayout
    android:id="@+id/relativeid"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <Button
        android:id="@+id/launch_button"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="80dp"
        android:text="@string/launch" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/launch_button"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/launch_button"
        android:entries="@array/num_array"
        android:prompt="@string/screen_prompt"
        android:textSize="8pt" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/launch_button"
        android:layout_alignBottom="@+id/launch_button"
        android:layout_marginRight="16dp"
        android:layout_toLeftOf="@+id/spinner1"
        android:text="@string/no_of_screens"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout>

</LinearLayout> 
```

就目前而言，所有其他元素都已正确显示。任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:24:56.043

你想要你的textView在哪里？

我会放弃这两个：

`layout_alignBaseline="@+id/launch_button`

`layout_alignBottom="@+id/launch_button`

并使用其中之一：

`layout_below="@+id/launch_button`

`layout_above="@+id/launch_button`

这将把它放在按钮的上方或下方。

# javascript - 使用ajax发送参数不起作用

> ID：11016697
> 
> 赞同：0
> 
> 时间：2012-06-13T14:09:54.500
> 
> 标签：javascript, html, ajax

我正在尝试使用 ajax 将一些变量发送到 php 页面，然后在 div 中显示它们，但它不起作用。

html代码：

```
<div id="center">
    <form>                                  
        <input type="text" id="toSearch" class="inputText" title="Search for ...">              
        <select name="thelist1" id="ecoElem" class="comboBox">
            <option>-- Ecosystem Element --</option>
        </select> 
        <select name="thelist2" id="ecoActor" class="comboBox">                         
            <option>-- Ecosystem Actor --</option>
        </select>   
        <input type="button" value="Search" id="searchButton" onclick="loadData();">
    </form>        
</div>
 <div id="resBox">
    </div> 
```

加载数据函数：

```
function loadData(){
            if(window.XMLHttpRequest){
                xmlhttp = new XMLHttpRequest();
            }
            else{
                xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
            }

            searchT = document.getElementById('toSearch').value;
            ecoElem = document.getElementById('ecoElem').value;
            ecoActor = document.getElementById('ecoActor').value;

            xmlhttp.onreadystatechange = function(){
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
                    document.getElementById('resBox').innerHTML = xmlhttp.responseText;
                }
            }

            xmlhttp.open("POST","databaseRead.php",true);
            xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xmlhttp.send("text=" + searchT + "&elem=" + ecoElem + "&actor=" + ecoActor);} 
```

最后是 php 页面：

```
<?php   
$searchT = $_POST['text'];
$ecoElem = $_POST['elem'];
$ecoActor = $_POST['actor'];
echo $searchT;
?> 
```

就是这样，我已经为此工作了几个小时，但仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:50:56.623

您也可以使用 JQuery。

```
function loadData(){   
     var searchT = $('#toSearch').val(); 
     var toSearch = $('#ecoActor ').val();    
     var ecoActor = $('#ecoActor').val();
     $.post("databaseRead.php"),{ text:searchT, elem:toSearch, actor:ecoActor },
          function(data){
          $('#resBox').html(data);
     });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:23:29.487

尝试更改按钮，使 onclick 返回 false（以防提交表单）...

```
<input type="button" value="Search" id="searchButton" onclick="loadData();return false;"> 
```

此外，您可能希望对文本框中的值进行 URL 编码，否则有人输入 = 或 & 会搞砸一切......

```
xmlhttp.send("text=" + encodeURIComponent(searchT) + "&elem=" + + encodeURIComponent(ecoElem) + "&actor=" + + encodeURIComponent(ecoActor));} 
```

# javascript - 我将如何从 json 文件创建模型？(ExtJS)

> ID：11016701
> 
> 赞同：3
> 
> 时间：2012-06-13T14:10:07.180
> 
> 标签：javascript, extjs, extjs4.1

这是我想使用 json 文件创建的模型

```
Ext.define('Users', {
    extend: 'Ext.data.Model',
    fields: [{name: 'user_id',  type: 'int'},
    {name: 'user_name',  type: 'string'}]
}); 
```

根据来自服务器的 json 响应的内容，我需要做什么才能自动创建此模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:40:22.320

为了自动创建模型，您需要在`metaData`Json 数据中包含该字段。`metaData`可用于描述模型的所有字段。

在 ExtJS 4.1 文档中 - [Ext.data.reader.Json](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json)有一个名为 Response MetaData 的部分描述了此功能的基本使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:13:50.247

您应该能够提取一些带有字段的 json，或者可以很容易地转换为该格式的某种格式。

1.  致电服务以获取模型的字段。可能需要定义一些首先调用模型服务并在之后执行后续步骤的链。

2.  构建模型的字段数组，其中包含来自 #1 的字段结果。可能需要根据 #1 中的响应转换数据。

    `var fields = response.fields;`

3.  根据 Store 构造函数中的字段定义模型

    ```
    var store = Ext.create('Ext.data.Store', {
        constructor: function () {
            var model = Ext.define("Users", {
                extend: "Ext.data.Model",
                fields: fields
            });
            this.model = model.$className;
            this.callParent(arguments);
        }
    }); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:29:25.270

我只使用jsonp，它加载一个json文件并自动解析它，不知道Ext.Ajax是否也这样做。

但是你会做这样的事情：

定义.json：

```
{
  "name": "User",
  "fields": [
    { "name": "user_id"  , "type": "int"    },
    { "name": "user_name", "type": "string" }
  ]
} 
```

加载它：

```
Ext.Ajax.request({
  url    : "..../definition.json"
  success: function( res ) {
    Ext.define( res.name, {
      extend: 'Ext.data.Model',
      fields: res.fields
    }, function() {
      Ext.create( 'somestore', { model: res.name });
    });
  }
}); 
```

# c# - .NET LINQ to entity 按日期（天）分组

> ID：11016703
> 
> 赞同：13
> 
> 时间：2012-06-13T14:10:13.390
> 
> 标签：c#, .net, linq, group-by, timezone

我在这里发布了同样的问题： [LINQ to Entities group-by failure using .date](https://stackoverflow.com/questions/4188066/linq-to-entities-group-by-failure-using-date)

但是，答案并非 100% 正确。它适用于所有情况，除非使用不同的时区。当使用不同的时区时，它也会按时区分组。为什么？我设法通过使用许多实体函数绕过了这一点。

```
int localOffset= Convert.ToInt32(
    TimeZone.CurrentTimeZone.GetUtcOffset(DateTime.Now).TotalMinutes);

var results = (
    from perfEntry in db.entry
    where (....)
    select new { 
        perfEntry.Operation, perfEntry.Duration, 
        localTime = EntityFunctions.AddMinutes(perfEntry.Start, 
            localOffset - EntityFunctions.GetTotalOffsetMinutes(
                perfEntry.Start)) 
    }
).GroupBy(x => new { 
    Time = EntityFunctions.TruncateTime(
        EntityFunctions.CreateDateTime(x.localTime.Value.Year,
            x.localTime.Value.Month, x.localTime.Value.Day, 0, 0, 0)),
    x.Operation }
).OrderByDescending(a => a.Key).
Select(g => new {
    Time = g.Key.Time,
    ...
}); 
```

有没有人知道如何以正确的方式做到这一点？这段代码非常丑陋，而且可能非常低效。

更新（警告）：
我还意识到 EntityFunctions.CreateDateTime 函数存在错误。它与闰年不兼容，例如今年。2012 年 2 月 29 日将引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:13:05.747

您可以使用 UTC DateTime 并在它之后中继时间。

# ios - iOS Core 数据迁移到另一台机器

> ID：11016706
> 
> 赞同：0
> 
> 时间：2012-06-13T14:10:15.233
> 
> 标签：ios, xcode, core-data, data-migration

我从一个人那里收到了一个应用程序的源代码，以便对应用程序进行一些更改。例如，数据模型版本是 App3。在此过程中，我不得不添加大约 3-4 个数据模型版本。所以我发给他的时候激活的模型版本是App7

我构建了项目（它在我的 Mac 上正常运行）我给他发送了 zip，当他运行时，他收到错误“找不到源存储的模型”我让他再次创建最新的数据模型，基于数据模型 App3 并使其与 App7 相同并将其设置为当前版本。

他仍然有错误，我不知道为什么？中间数据模型版本是否会导致问题？是否需要删除应用程序support->iphone模拟器文件夹中的sqlite文件？我到处都是这个。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:42:39.633

您需要同时拥有两个模型文件并进行某种版本控制。您创建的新模型将不再适用于他的数据文件，除非您向 Core Data 指定您希望它更新数据。

版本控制并不是那么容易，但如果您的更改足够小，您也许可以摆脱自动版本控制。阅读指南并查看：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:06:26.487

为了使轻量级迁移工作，您还需要向他发送模型的所有中间版本，因为迁移是通过所有版本逐步进行的。

并且您必须确保您没有对基本版本 App3 进行任何修改（甚至是意外修改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:52:00.240

据我了解，会的。但是，如果最终版本控制也将发生在现有的实时应用程序上，那么实际上这不是要做的事情。

# c++ - 基本 Qt 应用程序在启动时崩溃

> ID：11016712
> 
> 赞同：0
> 
> 时间：2012-06-13T14:10:35.690
> 
> 标签：c++, eclipse, qt

当我在 Eclipse 中启动一个基本的 Qt 应用程序时，它会因“.exe 已停止工作”错误而崩溃。

上下文 ：

*   它是创建 Qt GUI 项目（带有 MainWindow）时获得的基本应用程序，其中没有任何更改，甚至没有添加按钮

*   PATH 包含所有必要的东西（mingw、msys、qt）

*   项目属性和eclipse路径也应该没问题（c++，qt，mingw）

*   .pro 文件没问题，没有文件丢失

*   清理和重建，以及重新启动 Eclipse 并不能解决问题

*   编译时没有错误，只是一个被忽略的“ **cannot lstat `ui_.h': No such file or directory** ”。搜索时未找到相关结果。

*   如果启动，则以上述错误停止。详细信息显示其应用程序崩溃，**错误代码为 c0000005，偏移量 00002cb20**。搜索结果告诉我 c0000005 是访问冲突，但它来自哪里？这是基本的应用程序...

*   试图在 eclipse 处于管理员模式下启动以防止访问冲突，但没有帮助

*   如果在调试模式下启动，则会因错误“**无法在 ../mingw/main.c 找到源文件**”而停止。我以为我在安装 mingw 时忘记了一些东西，所以我再次进行了设置，但这并没有创建该文件。这里也没有相关的搜索结果。

*   我的设置：eclipse classic x32 with c++ & php stuff, qt 4.8, win7 x64

I'm getting lost here. I already worked with Qt under Eclipse before (on winXP and vista), got my bunch of installing problems but this one is a first. Anybody went through this already ? Any leads on how to find where the access violation is happening ? Reading [this question](https://stackoverflow.com/questions/6687270/qt-gui-has-stopped-working) makes me think it's a Qt Eclipse Integration problem, but how can I circumvent that ?

Thanks for any leads !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:41:33.057

Your project doesn't have a `TARGET =` set in the `.pro` file. This was probably caused by an Eclipse/Qt plugin wizard screw up, so just typing a new target may not work, other files may have to be renamed manually.

FWIW development on the Qt plugin for Eclipse was halted some time ago, building outside of Qt Creator is definitely one way of making life more difficult for yourself.

# iphone - iPod touch 上的应用程序性能与 iPhone 4s 不同

> ID：11016721
> 
> 赞同：0
> 
> 时间：2012-06-13T14:11:10.490
> 
> 标签：iphone, ipod-touch

在 iPhone 上测试时的应用程序性能非常好，但在 iPod touch 上测试相同的应用程序时性能不佳，字体看起来更小，并且 modalviewcontroller 转换速度非常快。操作表按钮性能很慢。

知道如何在 iPod touch 上测试相同的应用程序时解决此性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:16:06.477

这是正常的，因为每个设备的硬件不同。

# sql - Drupal commerce Sql选择当前分类的最高价格

> ID：11016724
> 
> 赞同：1
> 
> 时间：2012-06-13T14:11:20.077
> 
> 标签：sql, drupal, drupal-7, views

你好（抱歉英语不好）。我尝试为当前目录标签选择最低和最高价格（drupal 商业）。ATM 我输入了标头 php 代码：

```
$max = db_query("SELECT MAX(`commerce_price_amount`) FROM {`field_data_commerce_price`}")->fetchField(); 
```

所以我可以获得所有产品的最高价格。相同的分钟。但我需要当前标签。我的 sql 表如下所示：

表 field_data_field_product_catalog： [http ://postimage.org/image/tahrk3y29/](http://postimage.org/image/tahrk3y29/)

表 field_data_commerce_price： [http ://postimage.org/image/w1yvkh8kn/](http://postimage.org/image/w1yvkh8kn/)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:10:04.890

```
$catalog=arg(2);   
$max = db_query("SELECT MAX(`commerce_price_amount`) FROM {`field_data_field_product_catalog`},{`field_data_commerce_price`} 
WHERE {field_data_commerce_price.entity_id}={field_data_field_product_catalog.entity_id} 
AND {field_product_catalog_tid}=:cnid", array(':cnid' => $catalog))->fetchField();
$max=Ceil($max/100); 
```

# database - 访问数据库并将数据导入 Magento

> ID：11016729
> 
> 赞同：0
> 
> 时间：2012-06-13T14:11:35.403
> 
> 标签：database, magento, model, import

我正在考虑建立某种机制，将数据导入 Magento 数据库。但是，正如我在文档中所读到的，如果可能，建议默认使用 Magento 中可用的模型。

我的问题是，是否可以使用模型方法，而不创建 Magento 模块，然后从命令行执行此代码？

或者最好的想法是使用模块，但如果我打算构建两种导入机制，其中一个使用自定义表（也许我可能需要一个更多的表来进行一次自定义，但这个表会分开），另一个使用表Magento 中可用的型号和型号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:04:09.643

要引导 Magento 并从命令行使用它，请创建一个`php`以以下开头的文件：

```
<?php
  require_once '../Mage.php'; //correct path to Mage.php
  $app = Mage::app();
  Mage::register('isSecureArea', true); 
```

# postgresql - postgres、psql 和一个 bat 文件

> ID：11016730
> 
> 赞同：1
> 
> 时间：2012-06-13T14:11:41.387
> 
> 标签：postgresql, batch-file

我正在兜圈子，所以需要一些帮助。

我希望能够通过 bat 文件对作为计划任务的数据库运行 .sql。但是，当我手动运行 bat 文件时，系统会提示我输入密码。我输入密码然后被告知....

```
"psql: FATAL: password authentication failed for user "(my windows login)"
'-h' is not recognised as an internal or external command, 
operable program or batch file. 
```

此刻我的蝙蝠读...

```
@echo off
"D:\Program Files (x86)\PostgreSQL\9.1\bin\psql.exe"
-h localhost -U postgres -d database_name -f D:/scripts/SQL/test.sql
pause 
```

首先，我需要添加什么 cmd 来填充密码请求

我在语句的其余部分做错了什么以使其加载.sql

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:18:10.450

通过将此行添加到您的配置文件 ( `pg_hba.conf`)，您可以告诉 postgres 允许本地连接而无需身份验证

```
local      <database>  <user>  trust 
```

[http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:17:53.543

所有需要进入批处理文件中的一行（看起来你有两行）：

```
@echo off
"D:\Program Files (x86)\PostgreSQL\9.1\bin\psql.exe" -h localhost -U postgres -d database_name -f D:/scripts/SQL/test.sql
pause 
```

要避免密码提示，请在调用 psql 之前设置环境变量 PGPASSWORD：

```
@echo off
setlocal
set PGPASSWORD=my_very_secret_password
"D:\Program Files (x86)\PostgreSQL\9.1\bin\psql.exe" -h localhost -U postgres -d database_name -f D:/scripts/SQL/test.sql
pause
endlocal 
```

setlocal/endlocal 命令用于确保在执行批处理文件后清除变量。

为了避免在批处理文件中使用纯文本密码，您可以创建一个包含密码的 pgpass.conf 文件。有关详细信息，请参阅手册：[http ://www.postgresql.org/docs/current/static/libpq-pgpass.html](http://www.postgresql.org/docs/current/static/libpq-pgpass.html)

# android - Android XML 属性

> ID：11016731
> 
> 赞同：2
> 
> 时间：2012-06-13T14:11:45.280
> 
> 标签：android, android-xml, android-resources

我已经学习 Android 很长一段时间了，但仍然无法理解为什么它们在资源文件中是相等的：

这个

```
<style name="MyTheme" parent="android:Theme"> 
```

和这个：

```
<style name="MyTheme" parent="@android:style/Theme"> 
```

这个

```
<item name="windowTitleSize">40dip</item> 
```

和这个：

```
<item name="android:windowTitleSize">40dip</item> 
```

我可以猜测第二个：“android”是默认包。虽然不知道第一个。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:06:36.567

我认为可以在[这里](http://developer.android.com/guide/topics/resources/accessing-resources.html#ResourcesFromXml)找到对这个问题的最佳解释。

如果我理解正确的话，基本上有两种方法可以引用资源，无论是在 R 类中还是在 XML 中。值应该是相同的。

# cmd - 用于查找服务器站点的 Windows 控制台命令部署到

> ID：11016732
> 
> 赞同：0
> 
> 时间：2012-06-13T14:11:50.947
> 
> 标签：cmd, ip-address

我有一个站点的 url，我隐约记得有一个 Windows 控制台命令，您可以使用它来查找站点部署到的服务器的 IP 地址。有人可以提醒我吗？另外，能告诉我怎么用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:14:58.677

如果您使用 Windows 命令提示符 ping 服务器，它将为您提供服务器 IP。例如：ping www.google.com

```
C:\Users\Deleu>ping www.google.com

Pinging www.l.google.com [177.99.189.241] with 32 bytes of data:
Reply from 177.99.189.241: bytes=32 time=34ms TTL=58
Reply from 177.99.189.241: bytes=32 time=36ms TTL=58
Reply from 177.99.189.241: bytes=32 time=38ms TTL=58
Reply from 177.99.189.241: bytes=32 time=38ms TTL=58

Ping statistics for 177.99.189.241:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 34ms, Maximum = 38ms, Average = 36ms

C:\Users\Deleu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:18:02.243

你需要[nslookup](http://support.microsoft.com/kb/200525)。

> Nslookup.exe 是用于测试和排除 DNS 服务器故障的命令行管理工具。该工具通过控制面板与 TCP/IP 协议一起安装。本文包括使用 Nslookup.exe 的几个技巧。

```
c:\Temp>nslookup google.com
Server:  BoB.Orcon
Address:  10.1.1.1  <------ Name server 

Non-authoritative answer:
Name:    google.com
Addresses:  2404:6800:4006:804::1004    <----- Answer in ipv6
          74.125.237.128                <----- Answer in ipv4
          74.125.237.137                <----- Other answers....
          74.125.237.134                          .
          74.125.237.132                          .
          74.125.237.135                          .
          74.125.237.133                         etc
          74.125.237.136                          .
          74.125.237.142                          .
          74.125.237.130                          .
          74.125.237.131                          .
          74.125.237.129 
```

# python - 带有字符串序列的 any()

> ID：11016735
> 
> 赞同：1
> 
> 时间：2012-06-13T14:12:04.983
> 
> 标签：python, any

为什么

```
any(['','foo']) 
```

引发异常

```
TypeError: cannot perform reduce with flexible type 
```

我认为它应该评估为`True`，因为

*   `bool('')`评估为`False`
*   `bool('foo')`评估为`True`
*   我虽然`any()`可以与任何可转换为的对象序列一起使用`bool`

我正在使用 Python 2.7。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:14:56.977

您不小心调用[`numpy.any()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.any.html)而不是内置的[`any()`](http://docs.python.org/library/functions.html#any). 后者确实适用于您的示例。

要解决此问题，您需要整理导入。查找`from numpy import *`和，并查找涉及和`from numpy import any`的类似导入。`scipy``pylab`

# sql - Access 2007 疯狂地查询 SQL DB

> ID：11016736
> 
> 赞同：0
> 
> 时间：2012-06-13T14:12:09.030
> 
> 标签：sql, ms-access, records

我不得不优化一个 Access 应用程序，我注意到它查询数据库的原因我不明白。这是一个现有的应用程序，所以我创建了一个视图，它填充了一个拆分表单——底部的记录集，顶部的表单。

我无法弄清楚为什么访问会做下面这样的事情。它正在准备这个查询，并为表中的每个记录运行它，从而产生数万个查询。

这很疯狂，我是 Access 的新手，我认为这与将记录集指定为“动态集”有关。表格必须是可更新的。

另外，如何启用下拉过滤器以过滤底部的记录集。我是否必须为基础视图中的每一列定义不确定性？请指教——我在这里很迷茫。

```
exec sp_prepexec @p1 output,
N'@P1 nvarchar(255)',
N'SELECT "Provider_ID"
,"Provider_CAT"
,"Risk Assoc"
,"Contracted"

-- snip lots of fields 

,"Updated Project"
,"Provider Status" 
FROM "dbo"."MRA_Providers_To_Schedule"  
WHERE "Provider_ID" = @P1',N'00001' 
```

# ios - iOS 开发图库

> ID：11016743
> 
> 赞同：0
> 
> 时间：2012-06-13T14:12:31.120
> 
> 标签：ios, gallery, photos

我有一个带有画廊的应用程序。我有一个充满照片缩略图的视图。我想全屏查看照片。问题是我想加载全屏照片，但是当我返回缩略图时，我丢失了所有信息并且必须重新加载它（从 JSON）。所以我认为我必须在同一个视图控制器中完成这一切？或者你对我有更好的解决方案吗？

也许这是一个菜鸟问题，但我是 iOS 开发（和 OOP）的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:20:31.837

您必须使用导航控制器来帮助您在带有缩略图的视图控制器和另一个用于显示所选全屏照片的视图控制器之间切换。

有关更多详细信息，请在此处阅读：http: [//developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html)

# visual-studio-2010 - 在 Visual Studio 2010 中构建和部署插件到目录

> ID：11016746
> 
> 赞同：1
> 
> 时间：2012-06-13T14:12:45.043
> 
> 标签：visual-studio-2010, msbuild, mef

我们有一个 .NET 4 应用程序，它有一个主体，并在特定的子目录中查找要使用 MEF 加载的插件。

现在，对于系统测试，我有一个构建主应用程序和插件的顶级解决方案，并且插件放置在带有“XCOPY”构建后事件的子目录中。

现在这……好吧，但对我来说似乎有点 hacky，并且存在各种问题。

所以我的问题是 - 有没有更好的方法来做到这一点？当然有一种方法可以让我在 Visual Studio 中正确构建我的构建吗？

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:15:06.510

将插件项目的输出目录设置为插件目录。您可以在项目的属性中的构建选项卡中执行此操作。这样你也可以很容易地调试你的插件！

# c# - BindingSource.Find 抛出 NotSupportedException（DataSource 是 BindingList )

> ID：11016748
> 
> 赞同：5
> 
> 时间：2012-06-13T14:12:48.267
> 
> 标签：c#, .net, winforms, data-binding, bindingsource

我有`BindingSource`一个`BindingList<Foo>`附件作为数据源。我想使用`BindingSource`'s[`Find`方法](http://msdn.microsoft.com/en-us/library/ms158165.aspx)来查找元素。但是，`NotSupportedException`当我执行以下操作时会抛出 a ，即使我的数据源确实实现了`IBindingList`（并且 MSDN 中没有记录此类异常）：

```
int pos = bindingSource1.Find("Bar", 5); 
```

我在下面附上了一个简短的例子（a `ListBox`、a`Button`和 a `BindingSource`）。任何人都可以帮助我使`Find`调用正常工作吗？

```
public partial class Form1 : Form
{
    public Form1() { InitializeComponent(); }

    private void Form1_Load(object sender, EventArgs e)
    {
        var src = new BindingList<Foo>();
        for(int i = 0; i < 10; i++)
        {
            src.Add(new Foo(i));
        }

        bindingSource1.DataSource = src;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int pos = bindingSource1.Find("Bar", 5);
    }
}

public sealed class Foo
{
    public Foo(int bar)
    {
        this.Bar = bar;
    }

    public int Bar { get; private set; }

    public override string ToString()
    {
        return this.Bar.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T06:10:43.843

我能够使用解决我的类似问题

```
var obj = bindingSource1.List.OfType<Foo>().ToList().Find(f=> f.Bar == 5);
var pos = bindingSource1.IndexOf(obj);
bindingSource1.Position = pos; 
```

这有利于看到位置以及找到对象

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T14:18:25.270

`BindingList<T>`不支持搜索，原样。实际上`bindingSource1.SupportsSearching`返回false。该`Find`功能适用​​于其他想要实现`IBindingList`支持搜索的接口的类。

要获得价值，您应该这样做`bindingSource1.ToList().Find("Bar",5);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-11T22:34:32.433

接受的答案暗示了这个问题的答案。未在 IBindingList 上实现查找。您需要在自己的类中继承 IBindingList 并实现 find。您还需要表明使用和覆盖 SupportsSearchingCore 支持查找。这是对问题的实际答案，例如如何让 Find 在 BindingList 上工作。

```
public class EfBindingList<T> : BindingList<T>
    where T : class
{
    public EfBindingList(IList<T> lst) : base(lst)
    {
    }

    protected override bool SupportsSearchingCore
    {
        get { return true; }
    }

    protected override int FindCore(PropertyDescriptor prop, object key)
    {
        var foundItem = Items.FirstOrDefault(x => prop.GetValue(x) == key);
        // Ignore the prop value and search by family name.
        for (int i = 0; i < Count; ++i)
        {
            var item = Items[i];
            if (prop.GetValue(item).ToString() == key.ToString()) return i;
        }
        return -1;
    }
} 
```

实现此类后，以下工作

```
bsOrder.DataSource = new EfBindingList<OrderDto>(lstOrder);
var oldIndex = bsOrder.Find(keyName, id); 
```

# azure - Azure 报告 - 在多个实例中运行的报告查看器不显示所有图像

> ID：11016756
> 
> 赞同：0
> 
> 时间：2012-06-13T14:13:04.717
> 
> 标签：azure, reporting, reportviewer

我在 Azure 报告中使用带有报告查看器的 asp.net webrole 项目。
一开始我遇到了“ASP.NET 会话已过期”的一些问题，我解决了将 AsyncRendering 设置为 false 并在 web.config 中设置 sessionState timeout ="120" mode="InProc" cookieless="true" 的问题。
但是，当我在单个实例中部署项目运行时，一切正常。但是当我在多个（两个）实例中部署项目时，一些图像（图表、仪表等）没有加载。但是，如果我右键单击丢失的图像，我可以通过上下文菜单加载图像。
有任何想法吗 ？对我来说似乎是一些时间问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:35:18.003

这是因为您正在使用 InProc 会话状态。您无法控制负载均衡器，因此您可能从一个实例加载页面，但从另一个实例加载图像。这意味着您的会话在两个实例上都会有所不同。

当使用多个实例时，不应存储会话 InProc，而应选择分布式存储（如表存储、SQL Azure 或 AppFabric 缓存）。这将允许您的所有实例使用相同的会话数据。

示例：[Windows Azure 缓存的会话状态提供程序](http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx)

# c++ - 使用 C++ 在结构中初始化列表容器对象？

> ID：11016760
> 
> 赞同：0
> 
> 时间：2012-06-13T14:13:34.973
> 
> 标签：c++, list, struct, char

我有一个包含三个列表和一个整数的结构，如下面的代码所示。

```
struct MainScreenState 
{
    std::list<char*> sessionId;
    std::list<char*> opposingUser;
    std::list<char*> currentMove;
    int totalScore;
    MainScreenState() {
        totalScore = 0;
    }
};
struct MainScreenState *state; 
```

可以使用构造函数初始化 int，但是如何初始化列表对象以避免编译器警告“警告 C4700：未初始化的局部变量 'state'”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:14:42.127

`std::list`成员被自动初始化。问题出在`state`未初始化的变量上。

```
MainScreenState *state = NULL; //struct keyword not necessary in C++ 
```

或（根据请求）

```
MainScreenState *state = new MainScreenState; 
```

或者更喜欢使用自动存储变量或智能指针。

# java - 如何提取字符串

> ID：11016765
> 
> 赞同：1
> 
> 时间：2012-06-13T14:13:50.107
> 
> 标签：java

我是 Java 编程新手。我想编写简单的 Java 网络协议。我想将此字符串发送到远程 Java 主机，例如：

```
230 computer delete reboot exit 
```

我无法解决的问题是如何将字符串一一提取并放入数组中？对我来说最大的谜团是，如果我有不同长度的字符串，我该怎么做？感谢您的帮助！

PS：我可以直接发送整个数组而不仅仅是简单的字符串吗？

PS 2：如果我有 Java 服务器和 C 客户端怎么办？据知道只有字符串可以用来交换双方之间的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:15:51.590

```
String input = "230 computer delete reboot exit";
String s[] = input.split("\\s+");

// now s[0] = 230 s[1] = computer 
```

阅读更多关于[String.split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)的内容。

并且这里使用的正则表达式`\\s+`等于任何空格。阅读[此](https://stackoverflow.com/questions/225337/how-do-i-split-a-string-with-any-whitespace-chars-as-delimiters)内容以获取更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T14:16:20.450

您可以：

1.  `String.split`使用方法拆分字符串

    ```
    String text = "230 computer delete reboot exit";
    String[] split = text.split("\\s"); 
    ```

2.  使用一个`Pattern`和一个`Matcher`

    ```
    String text = "230 computer delete reboot exit";
    Pattern p = Pattern.compile("(.*)\\s+(.*)\\s+(.*)\\s+(.*)\\s+(.*)");
    Matcher m = p.matcher(text);
    if (m.matches()) {
        String first = m.group(1);
        String second = m.group(2);
        .... 
    ```

3.  使用`Scanner`类

    ```
    Scanner s = new Scanner(text);
    int firstNumber = s.nextInt(); // 230
    String secondText = s.next(); // computer
    .... 
    ```

如果从流中读取内容，第二个和第三个选择可能会更好。

或其他一些方法... :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T14:18:00.950

[`ObectInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)您可以通过和使用序列化直接发送数组[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)。

但我建议你使用自己的类来封装消息。例如

```
class NetworkMessage {
  int code;
  String param1;
  String param2;
  ..
} 
```

这样它就更加面向对象和结构化。只发送字符串不是一个好的设计，尤其是当协议变得复杂时。

关于拆分字符串只是使用`String.split(String regex)`方法，但这不是一个好的解决方案。

# python - 如果元素不存在（无重复），则将元素推送到数组

> ID：11016767
> 
> 赞同：6
> 
> 时间：2012-06-13T14:13:52.997
> 
> 标签：python, mongodb

我有一个事件集合，我将通过它来查找特定事件的类别，然后使用 $push 语句更新我的其他集合。问题是当两个事件具有相同的类别时，它会创建一个副本，这是我不想要的。

我知道 upserts，但我不确定它们是否是最好的解决方法？当谈到如何实际编写与“$push”语句一起使用的 upsert 时，我有点困惑。

这就是我的更新现在的样子：

```
self.users.update({"user_id": event['userid']}, {'$push': {'campaigns': UserCampaign}}) 
```

..在哪里：

```
UserCampaign = {
        "id": campaign['id'],
        "name": campaign['name']
} 
```

“UserCampaign”时不时会充满相同的信息，由于我的收藏可能非常庞大，我希望尽可能高效地完成这项工作。

TLDR；我想更新使用“推送”找到的文档中的数组，而不会有重复的风险。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T10:14:17.020

为我的问题找到了更好的答案：

通过使用 $addToSet 它不会创建重复项（我还通过将所有字典添加到列表中来确保之前没有重复项）：

```
self.users.update({"user_id": event['userid']}, {'$addToSet': {'campaigns': UserCampaigns[i]}}) 
```

如果我刚刚使用了 $push，它总是会在用户集合中的“活动”中创建重复的元素。这发生在有和没有 upsert 的情况下。

出于某种原因，$each 不起作用但不是必需的，我猜 PyMongo 会为我解决这个问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T14:25:03.660

[根据MongoDB Docs](http://www.mongodb.org/display/DOCS/Updating)和[PyMongo Docs](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.update)通过更新的第三个参数作为 true 发送。

```
self.users.update({"user_id": event['userid']}, {'$push': {'campaigns': UserCampaign}}, True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:46:02.837

克里斯蒂安在他的回答中有正确的论据，所以我将不理会那部分（赞成他的回答）。

但是，您还询问避免重复等。

这里的关键是确保更新查询的条件部分特定于您想要的级别。upsert（或更新）仅与您传递给它的标准一样好。如果 upsert 没有找到与条件匹配的文档，则 upsert 将插入一个新文档，并且 update 将仅在找到传入的条件时执行 $push （或指定的任何更新）（如果不止一个，您可以进行多重更新doc也被发现）。

在您的情况下，标准部分是：

```
UserCampaign = {
        "id": campaign['id'],
        "name": campaign['name']
} 
```

确保这部分是唯一的，你会没事的 - 如果这可以匹配多个文档，那么你将有重复。

# api - 如何在google doc中上传excel文件

> ID：11016768
> 
> 赞同：1
> 
> 时间：2012-06-13T14:13:54.787
> 
> 标签：api, google-api, google-docs, google-sheets

使用 C#，想在 google doc 上上传 excel 文件。下面的语法用于上传 xls 文件

```
//use Content-Type: text/csv
     entry.MediaSource = new MediaFileSource("E:\\Emailcontent.xls", "text/csv"); 
```

但它不工作，上传文件转换为 csv 后。但我不想要这种转换。我只想在我的谷歌文档中上传我的 excel 文件。帮助我上传没有转换的 excel 文件。提前谢谢

```
 string USERNAME = "xxx@gmail.com";
            string PASSWORD = "xxxxx";

            // Start the service and set credentials
            DocumentsService service = new DocumentsService("MyDocumentsListIntegration-v1");
            service.setUserCredentials(USERNAME, PASSWORD);
            Authenticator authenticator = new ClientLoginAuthenticator("TestApi", Google.GData.Client.ServiceNames.Documents, service.Credentials);
            DocumentEntry entry = new DocumentEntry();
            // Set the document title
            entry.Title.Text = "Legal Contract";
            entry.IsSpreadsheet = true;
            // Set the media source
            //entry.MediaSource = new MediaFileSource("E:\\New Microsoft Office Word Document.doc", "application/msword");
            entry.MediaSource = new MediaFileSource("E:\\Emailcontent.xls", "text/csv");
            // Define the resumable upload link
            Uri createUploadUrl = new Uri("https://docs.google.com/feeds/upload/create-session/default/private/full");
            AtomLink link = new AtomLink(createUploadUrl.AbsoluteUri);
            link.Rel = ResumableUploader.CreateMediaRelation;
            entry.Links.Add(link);

            // Set the service to be used to parse the returned entry
            entry.Service = service;

            // Instantiate the ResumableUploader component.
            ResumableUploader uploader = new ResumableUploader();

            // Set the handlers for the completion and progress events
            uploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(OnDone);
            uploader.AsyncOperationProgress += new AsyncOperationProgressEventHandler(OnProgress);

            // Start the upload process
            uploader.InsertAsync(authenticator, entry, new object()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:28:32.740

您将 xls (Excel) 文件作为文本/csv 传递。如果要上传为 xls，请使用

```
entry.MediaSource = new MediaFileSource("E:\\Emailcontent.xls", "text/csv"); 
```

如果要上传为 xls，请使用

```
entry.MediaSource = new MediaFileSource("E:\\Emailcontent.xls", "application/vnd.ms-excel"); 
```

这是我使用的 wikipedia/google 搜索：

[http://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:02:01.280

为确保文件在上传时不会被转换，您还应该附加`?convert=false`到上传 uri。

# url - 为什么用 Base32 编码 URL？

> ID：11016772
> 
> 赞同：3
> 
> 时间：2012-06-13T14:14:00.847
> 
> 标签：url, uri, base, base32

我认为这是一个非常简短的问题，但我不确定我是否理解它的重点。

为什么用 Base32 编码 URL？它的好处是什么，它的缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:50:27.670

有时需要对 URL 数据进行编码以封装不易键入的内容，例如“ÓĆ”，甚至是根本没有文本表示的二进制数据。将其放在查询字符串中是有问题的。一些服务器不理解查询字符串中的 Unicode 文本，尽管这种情况肯定会好转。

因此，数据需要以某种方式进行编码，以便服务器可以正确解释，并且应用程序知道如何使用。Base32 通常用于此目的。它将任何二进制数据编码为该数据的 ASCII 文本表示。当需要原始数据时，将其解码。

那么为什么不用base64呢？Base64 几乎总是具有较短的编码长度。Base64 的弱点是它同时使用大小写字母进行编码。`A`和之间有区别`a`。而 Base32 只使用一个字母的大小写，所以它可以不区分大小写。通常（但并非总是），URL 不区分大小写，使用 Base32 可以保持这一概念。当编码数据需要输入、朗读等时，这种区别很有用。

Base32 的缺点是，由于字符集小得多，生成的编码几乎总是更长。

# ruby-on-rails - ruby on rails 中的迁移是否会更新到数据库？

> ID：11016774
> 
> 赞同：0
> 
> 时间：2012-06-13T14:14:04.403
> 
> 标签：ruby-on-rails

假设 ruby​​ on rails 中的迁移只是对任何数据库的更新是正确的。并且 rake db:migrate 脚本仅用于实现这些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:24:00.947

是的。

> 迁移是一种以结构化和有组织的方式更改数据库的便捷方式。您可以手动编辑 SQL 片段，但随后您将负责告诉其他开发人员他们需要去运行它们。您还必须跟踪下次部署时需要对生产机器运行哪些更改。
> 
> Active Record 跟踪哪些迁移已经运行，所以你所要做的就是更新你的源并运行 rake db:migrate。Active Record 将确定应该运行哪些迁移。它还将更新您的 db/schema.rb 文件以匹配您的数据库的结构。
> 
> 迁移还允许您使用 Ruby 描述这些转换。这样做的好处是（就像大多数 Active Record 的功能一样）它独立于数据库：您无需担心 CREATE TABLE 的精确语法，就像您担心 SELECT * 的变化一样（您可以下拉到用于数据库特定功能的原始 SQL）。例如，您可以在开发中使用 SQLite3，但在生产中使用 MySQL。

来源：[Ruby on Rails 指南：迁移](http://guides.rubyonrails.org/migrations.html)

# c# - C# WP7 按钮按下状态抛出：“属性背景的属性值无效。”

> ID：11016775
> 
> 赞同：1
> 
> 时间：2012-06-13T14:14:12.827
> 
> 标签：c#, windows-phone-7, xaml, button, pressed

错误：“属性背景的属性值无效。”

XAML：

```
<VisualState x:Name="Pressed">
    <Storyboard>
        ....
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBackground" Storyboard.TargetProperty="Background">
            <DiscreteObjectKeyFrame KeyTime="0" Value="/Images/home_2_click.png" />
        </ObjectAnimationUsingKeyFrames>
        ....
    </Storyboard>
</VisualState> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:15:47.603

您似乎在动画期间将背景图像应用于按钮。当然，您以错误的方式应用它。您必须执行以下操作：

```
<DiscreteObjectKeyFrame KeyTime="0:0:1">
    <DiscreteObjectKeyFrame.Value>
        <ImageBrush ImageSource="" />
    </DiscreteObjectKeyFrame.Value>
</DiscreteObjectKeyFrame> 
```

这肯定会解决你的问题。如果确实如此，请将此标记为已接受的答案。谢谢

# php - 从 codeigniter-2 中删除 index.php

> ID：11016778
> 
> 赞同：1
> 
> 时间：2012-06-13T14:14:22.703
> 
> 标签：php, codeigniter, codeigniter-2

我在从 codeigniter-2 中删除 index.php 时遇到问题。**我记得之前也使用过相同的代码，它工作得非常好，但它不适用于 codeigniter-2。**

我也检查了[文档](http://codeigniter.com/user_guide/general/urls.html)和[这个](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)问题，仍然没有帮助。

我的 .htaccess 代码如下：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond $1 !^(index\.php|images|robots\.txt|css)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:15:30.300

替换`/index.php`为`/site_folder_name/index.php` 任何地方并**确保您的服务器支持 mod_rewrite**

您的新代码应如下所示：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /site_folder_name/index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /site_folder_name/index.php?/$1 [L]

RewriteCond $1 !^(index\.php|images|robots\.txt|css)
RewriteRule ^(.*)$ /site_folder_name/index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:20:56.033

试试这个：

```
RewriteEngine On
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T06:49:52.017

您必须为此重新编写 .htaccess 文件。

最大服务器工作与此

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

在 Godaddy 服务器中，我必须写这个。有时它适用于 Godaddy 服务器中的上述代码。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php?/$1 
```

# android - Android可以通过外围设备从睡眠中唤醒吗？

> ID：11016779
> 
> 赞同：2
> 
> 时间：2012-06-13T14:14:26.237
> 
> 标签：android, arduino

Android 可以通过 arduino 微控制器等外围设备从睡眠中唤醒吗？

其他详细信息：我希望通过让 Android 设备进入睡眠状态并让低功耗外围设备仅在发生“有趣事件”时唤醒 Android 设备来节省电量（例如传感器读数异常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:22:14.843

设备可能无法通过普通软件/信号方式从真正的 CPU 睡眠（这是一个超出关闭屏幕的级别）中唤醒。

但是，为 USB 插孔启用 5v 电源可能会唤醒大多数可以通过 USB 充电的设备。

如果它们连接到实际的 USB 主机（与简单的电源/充电器相比），我怀疑它们根本不会进入 CPU 睡眠。android 配件套件和 IOIO 方案都将外部微控制器用作 USB 主机并提供​​电源，因此睡眠可能不是问题。或者，如果您需要省电，您可以使外部电源可切换。

需要考虑的另外两种可能性是使用部分唤醒锁来防止 CPU 睡眠，或者设置警报以定期唤醒设备，以便后台代码可以检查某些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T00:22:41.943

刚刚测试了这个。我有一些 USB 拇指驱动器 OTG 适配器，当我连接没有拇指驱动器的适配器时，手机会唤醒。我认为这与微型 USB 插座上的两个引脚有关，引脚 5 和引脚 4 紧密连接在一起。

我说的适配器： [![otg](../Images/f0c4c11feca5e7b83ece4e22d5fc96a2.png)](https://i.stack.imgur.com/wvCal.jpg)

引脚： [![引脚](../Images/7901606162650a327be354482adba948.png)](https://i.stack.imgur.com/Gaf1k.jpg)

# box2d - Box2D 特殊碰撞场景

> ID：11016788
> 
> 赞同：0
> 
> 时间：2012-06-13T14:14:52.577
> 
> 标签：box2d, physics, game-physics

我有一个非常独特的 Box2D 需求：

我将设置多边形具有特定颜色的世界。每当两个相同颜色的多边形重叠时，它们的交叉区域不应再是实心的（其他对象可以通过它）。

我不知道如何在 Box2D 中实现这种碰撞方案。我精通Box2D，所以我了解所有基础知识并且以前使用过它。只是这个功能让我感到困惑。

我目前的计划：实现一个特殊的接触侦听器，它检查碰撞点是否有相同颜色的重叠多边形。我想在这里提出其他想法，因为由于联系人的工作方式，这听起来很脆弱且成本高昂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:58:50.897

您可以保留当前重叠的当前多边形列表，如果碰撞对象仅与一个对象发生碰撞，则为实体。如果它与多个碰撞，则允许。当它们不再碰撞（重叠）时，您从列表中删除引用。

# python - 如何在我的网站中修复此图像上传错误？网站建立在 Python 之上

> ID：11016790
> 
> 赞同：0
> 
> 时间：2012-06-13T14:14:58.343
> 
> 标签：python, django, file-upload, importerror

我的网站是基于 Python/Postgresql 和 django 构建的，有一个可以上传图片的区域。当我尝试在其上上传图像时，没有任何反应，并且我通过电子邮件收到此错误消息通知：

> 回溯（最近一次通话最后）：
> 
> 文件“../lib/python/django/core/handlers/base.py”，第 85 行，在 get_response response = callback(request, *callback_args, **callback_kwargs)
> 
> 文件“../lib/python/django/contrib/auth/de corators.py”，第 67 行，**调用** return self.view_func(request, *args, **kwargs)
> 
> 文件“.. /app/bmwrr/views/assessment.py”，第 231 行，在 upload_assessment_media 导入图像中
> 
> ImportError：没有名为 Image 的模块
> 
> , POST:, COOKIES:{'sessionid': '1918628422885ccc8265fe7f9229332f'}, META:{'CONTENT_LENGTH': '1741174', 'CONTENT_TYPE': 'multipart/form-data; 边界=---- WebKitFormBoundary5S1a4kvt7BfnTMgl', 'DOCUMENT_ROOT': '/home/bmwrr/www.sitename.com/app/bmwrr', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application /xhtml+xml,application/ xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'HTTP_ACCEPT_ENCODING ': 'gzip,deflate,sdch', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8', 'HTTP_CACHE_CONTROL': 'max-age=0', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_CONTENT_LENGTH '：'1741174'，'HTTP_COOKIE'：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:21:53.053

你需要安装[PIL](http://www.pythonware.com/products/pil/)，如果你已经安装了 pip，你只需要安装它：

```
pip install pil 
```

但是您是否需要一些库，例如 libjpeg62-dev

# android - Android 中的布局

> ID：11016792
> 
> 赞同：0
> 
> 时间：2012-06-13T14:15:01.033
> 
> 标签：android, android-layout

我有两个问题。

1.  如何让下图中的微调器更接近文本？

![在此处输入图像描述](../Images/1c19b3d459705db077dc778ecddc95ec.png)

我使用以下 xml 布局

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="4">   

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Check by" 
        android:layout_weight="1"
        android:textSize="20dp"/>

    <Spinner
        android:id="@+id/CheckBy"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="20dp" 
        android:enabled="false"/>

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Outcome"
        android:layout_weight="1"
        android:textSize="20dp"/>

    <Spinner
        android:id="@+id/Outcome"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="20dp" 
        android:enabled="false"/>

</LinearLayout> 
```

2.  如何更改回车按钮的文本，如下图所示，并指定单击时要执行的操作？

![在此处输入图像描述](../Images/59a0896eef563b5153d49d4872f37b76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:32:48.200

1）对于布局设计使用下面的代码 -

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Check by" 
        android:textSize="20dp"

        />

    <Spinner
        android:id="@+id/CheckBy"
        android:layout_marginLeft="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dp" 
        android:enabled="false"

       />

    <TextView
        android:layout_width="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_height="wrap_content"
        android:text="Outcome"
        android:textSize="20dp" 

         />

    <Spinner
        android:id="@+id/Outcome"
        android:layout_marginLeft="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dp" 
        android:enabled="false" 

       />

</LinearLayout> 
```

只需删除`weightsum`并给出`wrap_content`as 宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:49:28.583

您无法更改输入按钮的文本。它在默认键盘中。如果您想要自定义按钮文本，您必须自己编写一个。

并且您不能将操作“分配”给按钮，但您可以实现您的 EditText 类型（假设文本字段的类型为 EditText），它会覆盖`public boolean onKeyDown (int keyCode, KeyEvent event)`和/或`public boolean onKeyUp (int keyCode, KeyEvent event)`方法（或您认为适合您目标的任何其他方法） ）。检查 EditText 的文档以获取`onKey...`方法。在您发现更合适的方法中，您可以实现所需的功能（操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:15:26.560

我通过使用线性布局找到了您对第一个问题的答案。我想它会对您有所帮助。代码如下：-

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    <TextView
        android:id="@+id/lblCheckBy"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:gravity="right"
        android:text="Check by" />

    <Spinner
        android:id="@+id/spnCheckBy"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

    <TextView
        android:id="@+id/lblOutcome"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:gravity="right"
        android:text="Outcome" />

    <Spinner
        android:id="@+id/Outcome"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" />

</LinearLayout> 
```

对于您的第二个答案，这是将引导您找到正确解决方案的链接。链接是：- [Imp Link](http://developer.android.com/guide/topics/ui/controls/text.html)

# actionscript-3 - Flex：如何在服务器调用期间禁用用户与应用程序的交互？

> ID：11016794
> 
> 赞同：0
> 
> 时间：2012-06-13T14:15:06.723
> 
> 标签：actionscript-3, apache-flex

我需要一种方法来禁用用户与应用程序的交互，以便对服务器进行某些调用以获取信息。我一直在使用以下代码在服务器调用之前/之后禁用/启用应用程序。基本上，它给用户一个忙碌的光标并在服务器上处理呼叫时禁用应用程序。

提交来自服务器的调用后，我执行：

```
CursorManager.setBusyCursor(); 
mx.core.FlexGlobals.topLevelApplication.enabled=false; 
```

当来自服务器的调用返回时，我执行：

```
CursorManager.removeBusyCursor(); 
mx.core.FlexGlobals.topLevelApplication.enabled=true; 
```

这有应用程序颜色变暗的问题。有没有办法防止它变暗？或者，我可以以某种方式禁用鼠标单击和键盘吗？或者，其他人在这种情况下会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:18:52.733

尝试：

```
// in your method
const stage:Stage = mx.core.FlexGlobals.topLevelApplication.stage;
if (stage)
  stage.mouseChildren = false; // or true of course 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:19:51.640

我有一个 AMFConnector 类可以拨打我的所有电话。每次此类调用时，它都会将光标设置为忙碌模式并将布尔属性设置为 true (amf_busy)。我所有的应用程序都是为了使用该属性来激活/取消激活调用/命令的按钮。您的解决方案更快更容易，但正如您所说，它会淡化整个屏幕并且它不是非常用户友好。现在当用户看到当他做出一个动作时，只是按钮消失了，他会自动意识到他现在必须等待服务器返回答案，即使他不理解客户端-服务器调用。

编辑：至于禁用鼠标/键盘，它也不是很友好。如果您使用该解决方案，则必须小心用户配置文件。用户可能会看到“有时”键盘/鼠标“显然无缘无故”停止工作，因为他不明白发生了什么。

编辑二：由于我不知道 BlazeDS 是如何工作的，所以我将使用我自己的示例，您可以尝试翻译它。

这是一个简单的调用的样子：

```
//creating a object connection.
var gateway:NetConnection = new Netconnection();
//connect
gateway.connect(url_connection_here);
//Making a simple call
gateway.call("UserController/GetUser", new Responder(onResult, onfault)); 
```

这就是你要做的：

创建网关以接收呼叫：

```
[Bindable] public class AMFConnctor{
      private var instance:AMFConnector = new AMFConnector();

      public function getInstance():AMFConnector{
          return instance;
      }

      public function AMFConnector(){
          if(instance){
            throw new Error("Singleton class cannot be instanced. Use getInstance() method instead.");
          }
      }

      private var _amf_busy:Boolean = false;        
      public function get amf_busy():Boolean{
             return _amf_busy;
      }

      public function set amf_busy(value:Boolean):void{
             //If you are setting to true (yes, it's busy)
             if(value){
                CursorManager.setBusyCursor();
                _amf_busy = true;
             }else{
                _amf_busy = false;
                CursorManager.removeBusyCursor();
             }
      }

      //Here I assume that everytime that I ask this class for the gateway
      //it's because I'm going to make a call, which means that I want the
      //rest of the application knows that AMF is currently busy.
      public function get Gateway():NetConnection{
           amf_busy = true;
           return this._gateway;
      }
} 
```

如果您有类似这样的网关，您现在可以轻松配置您的按钮：

```
<mx:Button id="btnSubmit1" label="Submit" click="action" icon="@Embed(source='images/ok.png')"  enabled="{!AMFConnector.getInstance().amf_busy}"/>
<mx:Button id="btnCancel1" label="Cancel" click="action" icon="@Embed(source='images/cancel.png')" enabled="{!AMFConnector.getInstance().amf_busy}"/> 
```

现在，您唯一需要确保的是，在您的“onResult”函数中，在服务器端返回您的调用后将被调用的函数，您必须确保将 amf_busy 属性设置为 Off (false) 和这将自动启用所有按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T13:48:42.090

什么对我有用...

```
private var _lastFocusedElement:InteractiveObject;

private function set enabled(value:Boolean):void {
    value ? CursorManager.removeBusyCursor(): CursorManager.setBusyCursor();
    var stage:Stage = FlexGlobals.topLevelApplication.stage;
    if (stage) {
        stage.mouseChildren = value;
        stage.tabChildren = value;
        if (!value)
            _lastFocusedElement = stage.focus;
        stage.focus = value ? _lastFocusedElement : null;
    }
} 
```

问候，维杰科

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T06:16:55.220

这是一个简单的解决方案：-

```
protected static function toggleScreenClick (value : Boolean) : void

    {

        if (value)
        {
            FlexGlobals.topLevelApplication.setStyle("disabledOverlayAlpha", 0.5);
        }
        else
        {
            FlexGlobals.topLevelApplication.setStyle("disabledOverlayAlpha", 0.0);
        }
        FlexGlobals.topLevelApplication.enabled = value;
    } 
```

# javascript - 在字符串数组中如何对部分字符串的数组进行排序

> ID：11016795
> 
> 赞同：5
> 
> 时间：2012-06-13T14:15:08.033
> 
> 标签：javascript, google-apps-script

当我想也许有一种方法可以使用带有 array.sort() 的函数来完成这项工作时，我开始为此编写冒泡排序？

这是我必须排序的（希望）清晰的示例：（文件名列表）

```
var array = ['impression_page_1_12_juin','impression_page_1_13_juin','impression_page_2_12_juin','impression_page_2_13_juin'] 
```

如您所见，在 2 个不同的日期有 2 个“page1”，每个字符串中只有字符 19 和 20 不同。我想对这两个字符进行排序。

Javascript 可以直接做到这一点，还是我应该返回我的子字符串和冒泡排序方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T14:23:14.973

使用`sort`带有函数的方法进行比较：

```
array.sort(function(x,y){
  var xp = x.substr(18, 2);
  var yp = y.substr(18, 2);
  return xp == yp ? 0 : xp < yp ? -1 : 1;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:20:22.810

是的，您可以将一个函数传递给 array.sort，该函数根据您感兴趣的任何标准比较两个字符串。请参阅[如何在 javascript 中对数组进行排序？](https://stackoverflow.com/questions/2185441/how-to-sort-array-in-javascript?rq=1)

你必须小心字符串与数字：例如`'1_12' < '1_2'`is `True`。如果您需要将它们作为数字进行比较，您可以拆分字符串，对每个部分执行 parseInt，并实现成对比较。

# android - 不同颜色和相同样式的按钮

> ID：11016800
> 
> 赞同：0
> 
> 时间：2012-06-13T14:15:40.400
> 
> 标签：android, button, colors, styles

我正在开发一个应用程序，其中包含一些通过 layout.xml 定义的按钮，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/largebutton" >
</Button> 
```

@drawable/largebutton 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >
        <shape>
            <gradient android:startColor="@color/menu_button_active_start" android:endColor="@color/menu_button_active_end" android:angle="270" />
            <stroke android:width="@dimen/largebutton_stroke" android:color="@color/menu_button_stroke" />
            <corners android:radius="@dimen/largebutton_radius" />
            <padding android:left="@dimen/largebutton_padding_leftright" android:top="@dimen/largebutton_padding_topbottom" android:right="@dimen/largebutton_padding_leftright" android:bottom="@dimen/largebutton_padding_topbottom" />
        </shape>
    </item>

    <item android:state_focused="true" >
        <shape>
            <gradient android:startColor="@color/menu_button_focused_start" android:endColor="@color/menu_button_focused_end" android:angle="270" />
            <stroke android:width="@dimen/largebutton_stroke" android:color="@color/menu_button_focused_stroke" />
            <corners android:radius="@dimen/largebutton_radius" />
            <padding android:left="@dimen/largebutton_padding_leftright" android:top="@dimen/largebutton_padding_topbottom" android:right="@dimen/largebutton_padding_leftright" android:bottom="@dimen/largebutton_padding_topbottom" />
        </shape>
    </item>
 .....
</selector> 
```

除了不同状态下的渐变颜色外，所有属性，如填充、描边、半径都是相同的。我的问题是我的应用程序必须有更多样式。您可以将其想象为拥有颜色列表，并且当您选择一个应用程序时，会将所有颜色更改为选定的一种。因此，如果您有 20 种颜色，则 20 种不同的 xml 不是正确的方法。

所有 android:states 的 startColor 和 endColor 值都是从 Web 下载并保存到 DB 中的，我不知道其中有多少。

有没有办法实现这种行为？我搜索了所有论坛，大多数答案是不可能的。我找到了一个覆盖 colors.xml 的“解决方案”，但它似乎不是我的最佳解决方案。

**所以我的问题是，我可以在colors.xml 中动态改变颜色吗？**像这样的东西

```
List<Colors> colors = downloadColorsFromWeb();

Button b = new Button;
b.setDrawable(drawable.with(colors)); 
```

谢谢大家。

诺斯科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:06:34.310

您可能可以为下载的每种颜色动态生成一个可绘制对象。检查 GradientDrawable 类。我认为您可以在初始化期间提供开始/结束颜色，然后设置笔触和角半径属性。但是你必须自己找出填充物。我不知道。

创建drawable后，您可以在按钮的`setBackgroundDrawable`

编辑：可能设置按钮的填充可以解决问题

edit2：您可以`setState`绘制可绘制对象，但我不确定如何为按钮的每个状态设置不同的可绘制背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:47:03.077

谢谢@stan0 的回复，它帮助很大，尤其是**GradientDrawable 类。**

我编写了简单的类来创建按钮并可以根据其状态设置样式。也许它对某人有帮助:)

```
import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.GradientDrawable.Orientation;
import android.util.AttributeSet;
import android.widget.Button;

/**
 * @author nosko
 *
 */
public class TabButton extends Button {

    private Context c;
    private GradientDrawable selected, focused, pressed, normal;

    public void setNormalState(GradientDrawable gd) {
        this.normal = gd;
    }

    public void setSelectedState(GradientDrawable gd) {
        this.selected = gd;
    }

    public void setFocusedState(GradientDrawable gd) {
        this.focused = gd;
    }

    public void setPressedState(GradientDrawable gd) {
        this.pressed = gd;
    }

    public TabButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub

        selected = pressed = focused = normal = new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { Color.WHITE, Color.DKGRAY });

        this.c          = context;
        this.setPadding(8, 8, 8, 8);        
    }

    /**
     * Change colors when button's state changes
     */
    protected void drawableStateChanged() {

        normal.setCornerRadius(8);
        normal.setStroke(2, Color.parseColor(c.getResources().getString(R.color.tab_button_border)));
        normal.setShape(GradientDrawable.RECTANGLE);
        this.setBackgroundDrawable(normal);

        if (isSelected()) {

            selected.setCornerRadius(8);
            selected.setStroke(2, Color.parseColor(c.getResources().getString(R.color.tab_button_border)));
            selected.setShape(GradientDrawable.RECTANGLE);
            this.setBackgroundDrawable(selected);
        }

        if (isFocused()) {
            focused.setCornerRadius(8);
            focused.setStroke(2, Color.parseColor(c.getResources().getString(R.color.tab_button_border)));
            focused.setShape(GradientDrawable.RECTANGLE);
            this.setBackgroundDrawable(focused);
        }

        if (isPressed()) {
            pressed.setCornerRadius(8);
            pressed.setStroke(2, Color.parseColor(c.getResources().getString(R.color.tab_button_border)));
            pressed.setShape(GradientDrawable.RECTANGLE);
            this.setBackgroundDrawable(pressed);
        }
    }

} 
```

并像这样使用它

```
TabButton b = new TabButton(context, null);

b.setNormalState(new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { Color.RED, Color.CYAN }));
b.setSelectedState(new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { Color.YELLOW, Color.BLUE }));
b.setFocusedState(new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { Color.YELLOW, Color.GREEN }));
b.setPressedState(new GradientDrawable(Orientation.TOP_BOTTOM, new int[] { Color.YELLOW, Color.BLACK })); 
```

# windows-phone-7 - C# windows phone -xaml ListBox.ItemTemplate 中的对齐

> ID：11016806
> 
> 赞同：5
> 
> 时间：2012-06-13T14:15:50.433
> 
> 标签：windows-phone-7, xaml

我想做简单的列表框。每行应包含 2 个控件，一个左对齐，另一个右对齐，仅此而已:) 我尝试了多种方法，但没有任何效果。我的代码如下

```
<StackPanel Grid.Row="1" Margin="12,0,12,0" Grid.Column="0">
        <ListBox Name="ListBox" Margin="12,0,12,0" ItemsSource="Exercises" HorizontalContentAlignment="Stretch">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Width=">
                        <TextBlock Text="abc" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        <TextBlock Text="def" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel> 
```

（两个文本块仅用于演示，在实际应用程序中，我想将一个文本块绑定到真实数据，而不是第二个错误使用按钮。）当我编译这个时，两个文本块都向左对齐，在模拟器中，似乎就像一个带有文本“abcdef”的文本块。知道如何将一个文本块向右对齐，另一个向左对齐吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T15:49:42.470

默认情况下，ListBoxItem 不会填充给定的空间。它将自身和内容向左对齐。为确保您的 ListBoxItem 的内容跨越整个宽度，您需要更改 ItemContainerStyle

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

现在内容将跨越可用宽度。如果您希望在示例中使用 StackPanel，请确保也将其设置为 Horizo​​ntalAlignment。StackPanel 也不会填充给定的可用空间

```
<DataTemplate>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
        <TextBlock Text="abc" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <TextBlock Text="def" HorizontalAlignment="Right" VerticalAlignment="Center"/>
    </StackPanel>
</DataTemplate> 
```

但是，我建议使用 Grid 并定义两列

```
<DataTemplate>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <TextBlock Text="abc" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <TextBlock Text="def" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center"/>
    </Grid>
</DataTemplate> 
```

# iphone - xcode可以在不使用代码的情况下旋转UI项目吗？

> ID：11016811
> 
> 赞同：0
> 
> 时间：2012-06-13T14:16:11.377
> 
> 标签：iphone, objective-c, ios, xcode

我看到很多人都在使用下面的代码`viewDidLoad`来旋转他们的对象，但是 xcode 最初没有办法做到这一点吗？

如果没有，最有效/最好的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:19:29.293

Interface Builder 目前不支持在视图（或其支持层）上设置转换。你一定要通过代码来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:24:09.437

You can set base view to landscape in the interface builder and build it like that. So everything will be rotated 90 degrees. Also do not forget to edit your shouldAutorotateToInterfaceOrientation method. In the case that you only want to rotate some objects and not all of them you are going to have to go with the transforms as Cyrille said.

# c# - Web.Config 转换 - 文件名

> ID：11016812
> 
> 赞同：1
> 
> 时间：2012-06-13T14:16:13.757
> 
> 标签：c#, asp.net, .net, web-config

我熟悉 Web.Config 转换，其中每个配置的转换采用以下格式 Web.{configurationName}.config。

我现在继承了一个解决方案，其中每个 Web.Config 的转换遵循以下格式 Web.{configurationName}.Transform.config。转换文件显示为 Web.config 的链接/子文件，但 Visual Studio 不会将它们识别为转换文件，因此不会应用转换。

是否可能有一个 VS 插件用于创建我不知道的这些插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:24:03.287

也许他们使用了可以在这里找到的 VS 插件“SlowCheetah - XML Transforms”：http: [//visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

Scott Hanselman 有一篇很棒的文章：[http ://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

你可以看看，看看是否能解决你的问题。

# c++ - 比较次数和项目移动次数

> ID：11016815
> 
> 赞同：0
> 
> 时间：2012-06-13T14:16:21.423
> 
> 标签：c++

我正在使用 c++ 并且正在使用插入排序

在插入排序算法中，我们应该在哪里放置一个计数器来监控项目移动的数量和项目比较的数量。我在下面包含了我的设置

```
void InsertionSort::insertion_sort()
{
    int key,i,count = 0;
for(int j=1;j<10;j++)
 {
    key=Arr1[j];
    i=j-1;
    while(Arr1[i]>key && i>=0)
    {
     Arr1[i+1]=Arr1[i];
     i--;
     numberOfItemMovements++;
    }
    Arr1[i+1]=key;
}
}
} 
```

如您所见，我似乎无法弄清楚比较计数器应该放在哪里，尽管项目移动计数器很好并且可以按预期工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:32:07.547

使其工作的一种方法是在循环中使用 numberOfComparisons 。

```
while(++numberOfComparisons && Arr1[i]>key && i>=0)
{
    Arr1[i+1]=Arr1[i];
    numberOfItemMovements++;
    i--;
} 
```

1）你明白为什么`++numberOfComparisons`可以在while循环中使用但`numberOfComparisons++`会失败吗？

2) 你有一个问题，可以评估 Arr1[-1]。你能弄清楚这发生在哪里以及如何更改代码来修复它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:27:34.693

运动计数器确实是正确的。

为了实现比较计数器，您需要稍微重构您的代码。特别是，您需要能够区分`Arr1[i]>key`和`i>=0`，因为其中一个需要比较，而另一个不需要。

既然这看起来像家庭作业，我会把剩下的留给你去解决。

# php - 在会话中存储对象 Symfony 2

> ID：11016819
> 
> 赞同：13
> 
> 时间：2012-06-13T14:16:28.153
> 
> 标签：php, session, symfony

我正在使用 Symfony 2 编写一个小型电子商店应用程序，我需要一些方法将用户的购物车存储在会话中。我认为使用数据库不是一个好主意。

该应用程序将使用**Product**、**Category**、**ShoppingCart**等实体，其中 Product 和 Category 被持久化到数据库中，用户将在他们的 ShoppingCart 中选择产品。

我找到**了 NativeSessionStorage**类，它应该将实体保存到会话中。但是在应用程序中没有实现的书面过程。

我是在控制器中使用它还是在单独的类 ShoppingCart 中使用它？你能给我一个简短的`NativeSessionStorage`用法示例吗？

**编辑：** 问题设置不正确：

目标不是将所有产品 ID 保存到 cookie 中。目标是在服务器端的应用程序内存中仅保存篮子（装满产品）的引用，并为用户分配适当的篮子。这甚至可以在 PHP 中做到这一点吗？

**编辑2**：

使用服务是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-13T14:26:11.193

不知道这种方式是否是临时存储数据的更好方法。您可以使用它来实例化会话对象：

`$session = $this->get("session");`

不要忘记控制器中的“使用”：

```
use Symfony\Component\HttpFoundation\Session; 
```

然后，当您要设置如下变量时，会话会自动启动：

`$session->set("product name","computer");`

这是基于[Session](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Session.html)类的使用，容易理解。常用定义：

```
get(string $name, mixed $default = null)

Returns an attribute.

set(string $name, mixed $value)

Sets an attribute.

has(string $name)

Checks if an attribute is defined. 
```

另外，看看存储数据的其他方法：[Multiple SessionStorage](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/SessionStorage.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-13T14:33:06.190

您可以使您的实体可[序列化](http://www.php.net/manual/en/class.serializable.php)并序列化实体对象并保存到会话，然后使用`unserialize()`. 有一个警告，因为 db Doctrine2 中存在的实体会将检索到的/未序列化的实体标记为分离的。`$em->merge($entity);`在这种情况下你必须打电话。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-12T16:45:03.070

您可以使用 Symfony 将整个对象保存到会话中。只需使用（在控制器中）：

```
$this->get('session')->set('session_name', $object); 
```

**注意：**对象需要可序列化。`start_session()`否则，在函数上加载会话时 PHP 会崩溃。

只需`\Serializable`通过添加`serialize()`和`unserialize()`方法来实现接口，如下所示：

```
public function serialize()
{
    return serialize(
        [
            $this->property1,
            $this->property2,
        ]
    );
}

public function unserialize($serialized)
{
    $data = unserialize($serialized);
    list(
        $this->property1, 
        $this->property2,
    ) = $data;
} 
```

*资料来源：* [http](http://blog.ikvasnica.com/entry/storing-objects-into-a-session-in-symfony) ://blog.ikvasnica.com/entry/storing-objects-into-a-session-in-symfony （我关于这个主题的博文）

# c++ - 为什么无错误代码在一台机器上不能给出预期结果，而在另一台机器上却是

> ID：11016823
> 
> 赞同：-1
> 
> 时间：2012-06-13T14:16:32.570
> 
> 标签：c++, sorting

我的部分代码有问题。它应该可以工作，因为它没有错误，并且它没有逻辑问题，因为它可以在其他电脑上工作，但在我的电脑上，结果与输入相同。代码（可运行）：

```
#include <algorithm>
#include <fstream>
#include <iostream>
#include <vector>
#include <cstdlib>
using namespace std;
class RAngle{
public:
   int x,y,l;
   RAngle(){}
   RAngle(int i,int j,int k){
      x=i,y=j,l=k;
   }
   bool operator<(const RAngle& rhs)const{
      if(l < rhs.l){
         return true;
        }
      return 0;
  }
  friend ostream& operator << (ostream& out, const RAngle& ra){
    out << ra.x << " " << ra.y << " " << ra.l;
    return out;
  }
  friend istream& operator >>( istream& is, RAngle &ra){
    is >> ra.x;
    is >> ra.y;
    is >> ra.l;
    return is ;
  }
};
void descrSort(vector <RAngle> &l){
    for(unsigned i=0; i<l.size();i++){
        cout<<l[i]<<endl;
    }
    cout << "==================" << endl;
    sort(l.begin(),l.end());
    reverse(l.begin(),l.end());
    for(unsigned i=0; i<l.size();i++){
        cout<<l[i]<<endl;
    }
}
void readData(vector <RAngle> &l){
   RAngle r;
   ifstream f_in;
   f_in.open("test.txt",ios::in);
   for(int i=0;i<10;++i){
      f_in >> r;
      l.push_back(r);
   }
}
int main(){
   vector <RAngle> a;
   readData(a);
   descrSort(a);

   return 0;
  } 
```

数据：

```
1 7 31
2 2 2
3 3 3
4 5 1
10 5 1
1 1 9
10 3 10
4 5 7
5 4 15
2 3 25
1 7 31 
```

其他机器上的输出（只打印部分之后，descr排序）：

```
1 7 31
2 3 25
5 4 15
10 3 10
1 1 9
4 5 7
3 3 3
2 2 2
10 5 1
4 5 1 
```

在我的电脑上（孔输出）：

```
1 7 31

2 2 2

3 3 3

4 5 1

10 5 1

1 1 9

10 3 10

4 5 7

5 4 15

2 3 25

==================
1 7 31

2 2 2

3 3 3

4 5 1

10 5 1

1 1 9

10 3 10

4 5 7

5 4 15

2 3 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:23:15.820

这意味着您的代码有错误。C 和 C++ 让那些实际上有错误的东西编译和运行。像这样：

```
int i;
std::cout << i << std::endl; 
```

会在不同的机器上做不同的事情。我会称之为错误。编译器不会。

现在至于你的*错误*在哪里，这是我的“使用调试器”演讲。使用调试器。与我阅读您的代码以查看是否有任何问题相比，使用调试器花费的时间更少，并且找到错误的机会也很大。用 编译`-g`。谷歌“gdb 备忘单”。使用 gdb 运行。按照备忘单。看看你的代码在哪里做了一些意想不到的事情。

在输出错误的机器上执行此操作似乎很聪明。看看它在哪里做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:48:19.760

为了扩展@djechlin 所说的内容，您最有可能拥有的是“未定义的行为”。

大多数编程语言都严格定义了可以做什么和不可以做什么，编译器编写者使用它来生成编译器错误。另一方面，未定义的行为意味着它取决于编译器编写者和系统；任何事情都可能发生——它可以正常工作，它可以擦除你的引导扇区，僵尸艾伦图灵的崛起和你的大脑盛宴等等。

例如，使用像这样的未初始化变量：

```
int i; 
std::cout << i << std::endl; 
```

在某些编译器上，会在调试版本中为您提供类似 0xCECECECE 的模式，以帮助查找未初始化的变量。在发布版本中，它可能被编译器设置为 0，或者它可能是垃圾数据。

# javascript - 乘号上的 JSLint“错误擒纵机构”

> ID：11016824
> 
> 赞同：0
> 
> 时间：2012-06-13T14:16:32.670
> 
> 标签：javascript, jslint

我需要在由 JavaScript 创建的模态中显示一个乘号 (×)，如下所示：

```
$(blah).dialog({ something: '\327' }); 
```

然而，JSLint 说这是一个“糟糕的擒纵机构”。不幸的是，在这种情况下使用类似的 HTML 实体`&times`不起作用——只有转义码才能正确显示。任何人都知道为什么这是一个糟糕的擒纵机构，如果有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:19:29.823

使用十六进制转义：`'\u00D7'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:20:07.703

`×`如果您的文件编码没问题，您就可以使用。

# python - Python 的“a+”文件打开模式中的错误？

> ID：11016825
> 
> 赞同：3
> 
> 时间：2012-06-13T14:16:42.967
> 
> 标签：python, file, file-io, python-2.7, mode

我目前正在使用 python-fuse 制作文件系统，并正在查找每种不同模式（'r'、'r+'等）的文件指针从哪里开始，并在多个站点上发现文件指针从零开始，除非它在文件末尾开始时以“a”或“a+”打开。

我在 Python 中对此进行了测试以确保（在每种模式下打开一个文本文件并立即调用 tell()），但发现当它在“a+”中打开时，文件指针为零而不是文件末尾。

这是python中的错误，还是网站错误？

以供参考：

*   [网站之一](http://www.tutorialspoint.com/python/python_files_io.htm)（搜索“文件指针”）
*   我在 Ubuntu 上使用 Python 2.7.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:58:55.957

不，这不是错误。

写入一些数据`tell()` **后**调用会发生什么？

它是写在位置 0 还是像您期望的那样写在文件末尾？我几乎敢打赌，它是后者。

```
>>> f = open('test', 'a+')
>>> f.tell()
0
>>> f.write('this is a test\n')
>>> f.tell()
15
>>> f.close()
>>> f = open('test', 'a+')
>>> f.tell()
0
>>> f.write('this is a test\n')
>>> f.tell()
30 
```

因此，它会在写入数据*之前查找文件末尾。*

这是应该的。从`fopen()`手册页：

> ```
>  a+     Open for reading and appending (writing at end  of  file).   The
>           file is created if it does not exist.  The initial file position
>           for reading is at the beginning  of  the  file,  but  output  is
>           always appended to the end of the file. 
> ```

呸，幸运的是我是对的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:27:13.377

我不认为这是一个错误（尽管我并不完全理解这是什么）。文档说：

> ...'a' 用于附加（在某些 Unix 系统上，这意味着所有写入都附加到文件的末尾，而不管当前的查找位置如何）

这确实是发生了什么：

```
In [3]: hello = open('/tmp/hello', 'w')

In [4]: hello.write('Hello ')

In [5]: hello.close()

In [6]: world = open('/tmp/hello', 'a+')

In [7]: world.write('world!')

In [8]: world.close()

In [9]: open('/tmp/hello').read()
Out[9]: 'Hello world!' 
```

我在 Ubuntu 上，`tell()`也`0`以`a+`模式返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:57:26.593

传递给的模式`open()`只是传递给 C`fopen()`函数。`a+`应该将流的位置设置为 0，因为文件是为读取和追加而打开的。在大多数 unix 系统（可能还有其他地方）上，所有写入都将在文件末尾完成，无论您`seek()`编辑到文件的哪个位置。

# android - 在 onClick 中同时改变 ImageButton 的位置和内容

> ID：11016828
> 
> 赞同：0
> 
> 时间：2012-06-13T14:16:48.280
> 
> 标签：android, position, imagebutton, android-view, android-button

我正在制作一个简单的应用程序来帮助我学习一些编码基础知识。用户单击 an`ImageButton`会发生两件事：

1.  `Button`图像变为随机图像。
2.  `Button`移动到屏幕上的随机位置。

我已经想出了如何孤立地做这两件事，但是当我把两者放在一起时，一次`onClick`只有一个可以工作。

`onClick`代码：

```
ImageButton button = (ImageButton) findViewById(R.id.my_button);
    button.setOnClickListener(new OnClickListener() {
        public void onClick (View v) {

            // change button image
            int imgNo = (int) (Math.random() * 9) + 1; // 9 images in the folder, start at index 1
            int imgID = getResources().getIdentifier("chef" + imgNo, "drawable", getPackageName());
            v.setBackgroundResource(imgID);

            // move button to a random location
            LinearLayout button_container = (LinearLayout) findViewById(R.id.my_window);
            int x = (int) (Math.random() * (button_container.getWidth() - v.getWidth())); // might need to work out how to find if phone is landscape or portrait;
            int y = (int) (Math.random() * (button_container.getHeight() - v.getHeight()));
            v.layout(x, y, x + v.getWidth(), y + v.getHeight());

            Toast.makeText(WhackachefActivity.this, "X: " + x + " Y: " + y + " Width: " + v.getWidth() + " Height: " + v.getHeight() + " Image: " + imgNo, Toast.LENGTH_LONG).show();           
        }
    }); 
```

`Toast`只是为了证明所有变量都正常工作。如果位置更改或图像更改代码被注释掉，另一个工作正常。如果图像被随机设置为当前图像（即图像没有变化），则随机位置有效，否则将设置为 XML 中的默认位置。

供参考，主要`XML`是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:id="@+id/my_window" >

<ImageButton
    android:id="@+id/my_button"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_gravity="center"
    android:contentDescription="@string/description"
    /> 
```

作为后续，两个相关的问题：

1.  首次加载应用程序时，如何使 onClick 代码运行一次？
2.  如何自动使 ImageButton 大小自动（即适应随机图像的大小，它们略有不同，而不拉伸它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:30:53.463

我找到了一个可行的解决方案 - 使用 LinearLayout 的填充来移动按钮，而不是使用 .layout。主要活动代码（沿途有一些小的更改）现在看起来像这样：

```
final ImageButton button = (ImageButton) findViewById(R.id.my_button);
final LinearLayout button_container = (LinearLayout) findViewById(R.id.my_window);

button.setOnClickListener(new OnClickListener() {
    public void onClick (View v) {

        // change button image
        int imgNo = (int) (Math.random() * 9) + 1; // 9 images in the folder, start at index 1
        int imgID = getResources().getIdentifier("chef" + imgNo, "drawable", getPackageName());
        button.setBackgroundResource(imgID);
        button.requestLayout(); // size to fit content

        // move button to a random location
        int x = (int) (Math.random() * (button_container.getWidth() - button.getWidth()));
        int y = (int) (Math.random() * (button_container.getHeight() - button.getHeight()));
        button_container.setPadding(x, y, 0, 0);
    }   
});
button.performClick(); // run once at the start to set image and position randomly 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:26:07.080

好的，对于主要问题，我没有直接的答案——我不确定如果您只是删除背景资源，它为什么会起作用，但也许如果您在布局后更改背景资源？值得一试，但这并不能真正解释为什么会发生这种情况。

现在“积分”问题，我可以回答：

1：只需调用`imageButton.performClick()`您的`onCreate()`（当然，在分配您`OnClickListener`的之后）。

2：将`ImageButton`'s设置`LayoutParams`为`wrap_content`, `wrap_content`，然后调用`imageButton.requestLayout();`. 然后应调整其大小以适合内容。

# jquery - 是否可以使用 ZURB 基础选项卡加载 AJAX 内容？

> ID：11016842
> 
> 赞同：3
> 
> 时间：2012-06-13T14:17:52.797
> 
> 标签：jquery, ajax, zurb-foundation

根据文档（[http://foundation.zurb.com/docs/ui.php#nice2](http://foundation.zurb.com/docs/ui.php#nice2)），您似乎必须事先准备好整页内容。是否可以通过 AJAX 加载而不是为这些选项卡预加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:01:07.280

您应该能够通过 ajax 加载内容。我能够在运行时使用 jQuery 的 appendTo() 方法添加选项卡，并且新添加的选项卡和内容运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:35:58.500

我将内容加载到 divrevealLayer 中，然后附加到 revel 模态 div 并正常工作。代码是这样的

HTML

```
<div id="revealLayer"></div>
<div id="revealModal" class="reveal-modal">
    <a class="close-reveal-modal">&#215;</a>
</div>
<a href="#" class="button" id="buttonForModal">Click Me For A Modal</a> 
```

JAVASCRIPT

```
$(document).ready(function() {
    $("#buttonForModal").click(function() {
        $( '#revealLayer' ).empty();
        $( '#revealLayer' ).load( 'url-to-load' );
        $( '#revealLayer' ).appendTo( '#revealModal' );
        $( '#revealModal' ).reveal();
        return false;
    });
}); 
```

# android - 在 Motorola Defy+ (MB526) 上检索坐标时出错

> ID：11016843
> 
> 赞同：0
> 
> 时间：2012-06-13T14:17:52.937
> 
> 标签：android, geolocation, location, hardware

首先，我为英语道歉，我不知道如何写好英语。

我正在创建一个应在地图上显示用户位置的应用程序。根据文档，我创建了我的监听器并添加了一个覆盖我的位置。

在所有其他 Android 设备中，我的应用程序运行良好，包括 Motorola Defy (MB525)，但在 (MB526) 中，它显然没有收到不同的坐标。

```
public class TesteMapActivity extends MapActivity {

    private LocationManager locationManager;

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        Criteria criteria = new Criteria();

        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        criteria.setAltitudeRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        String provider = locationManager.getBestProvider(criteria, true);

        locationManager.requestLocationUpdates(provider, 0, 0, locationListener);

        MapView mapView = (MapView) findViewById(R.id.mapview);
        MapController mapController = mapView.getController();
        mapView.setSatellite(false);
        mapView.setStreetView(false);
        mapView.setBuiltInZoomControls(true);

        mapController.setZoom(16);
    }

    private LocationListener locationListener = new LocationListener() {

        int i = 0;

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) { }

        @Override
        public void onProviderEnabled(String provider) { }

        @Override
        public void onProviderDisabled(String provider) { }

        @Override
        public void onLocationChanged(Location location) {
            i++;
            animeTo(location, i);
        }
    };

    public void animeTo(Location location, int i) {
        TextView txtCoordenadas = (TextView) findViewById(R.id.txtCoordenadas);

        txtCoordenadas.setText(i + " " + location.getLatitude() + ", " + location.getLongitude());

        MapView mapView = (MapView) findViewById(R.id.mapview);
        MapController mapController = mapView.getController();

        if (mapView.getOverlays().size() >= 1) {
            mapView.getOverlays().removeAll(mapView.getOverlays());
        }

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = getResources().getDrawable(R.drawable.ponto);
        OtemizedOverlay itemizedoverlay = new OtemizedOverlay(drawable, TesteMapActivity.this);

        Double lat = location.getLatitude() * 1E6;
        Double log = location.getLongitude() * 1E6;

        GeoPoint point = new GeoPoint(lat.intValue(), log.intValue());
        OverlayItem overlayitem = new OverlayItem(point, "Minha Localização", "Latitude: " + lat + " Longitude: " + log);

        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);

        mapController.animateTo(point);
    }
}

public class OtemizedOverlay extends ItemizedOverlay<OverlayItem> {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public OtemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public OtemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }
} 
```

谁能帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:50:16.037

Defy+ 硬件/默认配置有一个错误。

您可以在[此链接](http://forum.xda-developers.com/showthread.php?t=1458285)上为您的设备提供解决方案。

如果你只为这个设备开发一个应用程序，最好的思考方式就是忘记它。Defy+ 是一团糟，毫无用处的垃圾。

我建议不要直接杀死 Listener，它会弄乱位置，并且会使其他设备无法正常工作。所以最好有 1% 的问题，而不是 100% 的工作不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:49:57.020

首先，David 和 Kaneto，Paulo 我感谢你们对我的帮助很大。

我找到了解决方案，如果您有同样的问题，请使用此解决方案。

将您的方法animeTo 更改为AsyncTask()。

```
public void animeTo(Location location) {
     new AsyncTask() {  
            protected Object doInBackground(Object... params) {  

                //your code   
                return null;  
            }  
        }.execute(new Void[0]);
} 
```

这在我的测试中运行良好。

我再次为英语道歉，我不知道如何写好英语。

# php - 加载多个 XML 提要 - PHP

> ID：11016846
> 
> 赞同：0
> 
> 时间：2012-06-13T14:17:55.897
> 
> 标签：php, xml

我有一个 php 文件设置来提取**一个**XML 数据提要，我想做的是最多加载 4 个提要，如果可能的话，让它也选择一个随机项目。然后将其解析为 jQuery News Ticker。

我目前的PHP如下...

```
<?php
$feed = new DOMDocument();
$feed->load('/feed');
$json = array();

$json['title'] = $feed->getElementsByTagName('channel')->item(0)->getElementsByTagName('title')->item(0)->firstChild->nodeValue;
$json['description'] = $feed->getElementsByTagName('channel')->item(0)->getElementsByTagName('description')->item(0)->firstChild->nodeValue;
$json['link'] = $feed->getElementsByTagName('channel')->item(0)->getElementsByTagName('link')->item(0)->firstChild->nodeValue;

$items = $feed->getElementsByTagName('channel')->item(0)->getElementsByTagName('item');

$json['item'] = array();
$i = 0;

foreach($items as $item) {

   $title = $item->getElementsByTagName('title')->item(0)->firstChild->nodeValue;
   $description = $item->getElementsByTagName('description')->item(0)->firstChild->nodeValue;
   $pubDate = $item->getElementsByTagName('pubDate')->item(0)->firstChild->nodeValue;
   $guid = $item->getElementsByTagName('guid')->item(0)->firstChild->nodeValue;

   $json['item'][$i++]['title'] = $title;
   $json['item'][$i++]['description'] = $description;
   $json['item'][$i++]['pubdate'] = $pubDate;
   $json['item'][$i++]['guid'] = $guid; 

   echo '<li class="news-item"><a href="#">'.$title.'</a></li>';

}

//echo json_encode($json);

?> 
```

如何修改它以将多个提要加载到文件中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:03:34.217

执行此操作的最简单方法是围绕您拥有的代码包装另一个循环。这不是最干净的方式，但可能就足够了。

一般来说，IMO，首先学习语言的基础知识总是有益的。例如[PHP 手册`foreach`](http://php.net/manual/en/control-structures.foreach.php)

这大致是循环需要的样子：

```
$my_feeds = array("http://.....", "http://.....", "http://.....");

foreach ($my_feeds as $my_feed)
 {
  // This is where your code starts
  $feed = new DOMDocument();
  $feed->load($my_feed); <--------------- notice the variable
  $json = array();

 ... and the rest of the code

 } 
```

这将遍历 中的所有 URL `$my_feeds`，打开 RSS 源，从中获取所有项目，然后输出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:26:39.977

如果我正确地阅读了您的问题，您可能想要做的是将您的代码转换为一个函数，然后您将在每个 url 的 foreach 循环中运行该函数（您可以将其存储在数组或其他数据结构中）。

编辑：如果您对函数不太了解，本教程部分可能会对您有所帮助。[http://devzone.zend.com/9/php-101-part-6-functionally-yours/](http://devzone.zend.com/9/php-101-part-6-functionally-yours/)

# c++ - 将 std::cout 重定向到 linux 上的 syslog

> ID：11016847
> 
> 赞同：2
> 
> 时间：2012-06-13T14:17:56.940
> 
> 标签：c++, linux, syslog

我的代码包含很多`std::cout`.
我接到系统管理员的电话，告诉我我正在填写`/var/log/messages`文件夹和系统日志文件系统。但是，我的用户 ID 没有访问`/var`权限，这需要 root 权限才能写入，我不使用 syslog。
我的假设是，必须以某种方式将 Linux 配置为重定向`cout`到 syslog 服务器。

我的问题是 Linux 中的设置是什么，这使得上述可行（即重定向`cout`到 syslog）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:54:29.540

如果您将程序的输出通过管道传输到`logger`，该程序会将输出发送到`syslog`. [请参阅此问题](https://stackoverflow.com/questions/637827/redirect-stderr-and-stdout-in-a-bash-script)的答案。

# sql - 从子查询 SQL Server 2008 更新

> ID：11016848
> 
> 赞同：1
> 
> 时间：2012-06-13T14:18:00.423
> 
> 标签：sql, tsql

我在表中有县名和州名的 tblPatient。我有一个县名和州名的查找表，我正在尝试规范化我的 tblPatient，它的结构是 ![在此处输入图像描述](../Images/c5ebbd184dcca35c731b4036f0032d0f.png)

可以想象，不同的州有时会共享县名。为了解决这个问题，我正在使用查询

```
select patientid, admissionDate, dischargeDate, patientState, patientCounty
from tblPatient
where patientState='AL' 
```

我想更新`tblPatient.patientCounty`到`tblStateCounties.countyCode`患者县和县名相同的地方。

我还没有一个虚拟版本的使用方法`rollback`，但这对我来说看起来是正确的，但我不想犯一个可能很愚蠢的错误。

```
update tblPatient
set tblPatient.patientCounty=tblStateCountes.countyCode
from 
(
select patientID, admissionDate, dischargeDate, patientState, patientCounty from tblPatient
where patientState='AL'
) as t
inner join on tblStateCounties.countyName=tblPatient.countyName 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:35:24.393

您编写的查询不会解析（您可以很容易地检查），因为您在子查询中缺少 FROM 子句。您还需要 JOIN`t.tblPatient`并且您的主 FROM 子句中还需要 tblPatient 。

您可以使用下面的查询来更新您的表格。

```
UPDATE tblPatient 
SET    tblPatient.patientCounty = tblStateCounties.countyCode 
FROM   tblPatient 
       INNER JOIN tblStateCounties 
               ON tblStateCounties.countyName = tblPatient.patientCounty 
WHERE  patientState = 'AL' 
       AND tblStateCounties.stateCode = '01'; 
```

您会注意到我删除了子查询并使用了一个简单的 where 子句。由于您注意到县可以共享名称，因此您还需要过滤 tblStateCounties.stateCode

还可以考虑将 StateNames 映射到 StateCode（如果您还没有）

[演示](http://sqlfiddle.com/#!3/ce1cc/2)

# css - IE 将镜像显示为内容之前/之后

> ID：11016850
> 
> 赞同：2
> 
> 时间：2012-06-13T14:18:01.027
> 
> 标签：css, internet-explorer

只有 IE 显示镜像的 img.png 图像。为什么？如何在不创建专门针对 IE 的镜像的情况下应对它？

```
body {
    direction: rtl;
}
li:before {
  content: url(/img/img.png);
} 
```

小提琴：http: [//jsfiddle.net/Txza7/2/](http://jsfiddle.net/Txza7/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:46:24.850

好吧，问题解决了：我必须将方向： ltr 标尺设置为 li:before 以使其正确。

```
body {
    direction: rtl;
}
li:before {
  content: url(/img/img.png);
  direction: ltr;
} 
```

# .net - WPF中是否有全局触摸状态？

> ID：11016855
> 
> 赞同：1
> 
> 时间：2012-06-13T14:18:19.963
> 
> 标签：.net, wpf, touch

由于它很容易在 WPF 中收听触摸事件，有没有办法判断用户当前是否触摸屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:22:28.810

是的。WPF 4 甚至支持 MultiTouch

[llobo 的 msdn 博客](http://blogs.msdn.com/b/llobo/archive/tags/multitouch/)上有一些很好的例子

这里有[一些来自 PDC 09 的样本](https://skydrive.live.com/?cid=0d695ca64e3fb0c5&resid=D695CA64E3FB0C5!259&id=D695CA64E3FB0C5!259)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:26:42.323

您可以在任何 UIElement 上检查[AreAnyTouchesOver](http://msdn.microsoft.com/en-us/library/system.windows.uielement.areanytouchesover) ……包括 Window。 `Window.AreAnyTouchesOver`将告诉您用户是否正在触摸您的窗口。没有 WPF API 可以知道用户是否正在触摸另一个应用程序。

# java - Eclipse CustomizableIntroPart 中的图像未显示

> ID：11016856
> 
> 赞同：1
> 
> 时间：2012-06-13T14:18:20.370
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我正在为我的 Eclipse 应用程序创建一个 CustomizableIntroPart。我使用工作正常的 XHTML 定义我的页面。但是处理图像会引起一些麻烦。我使用 IIntroXHTMLContentProvider 生成我的内容，但是当我生成 img-tag 并设置 src 属性时，不显示图像。图像可能在执行中，也可能在对 XHTML 页面有贡献的其他一些插件中。

```
Element img = dom.createElement("img");
img.setAttribute("src", getApplicationIcon(element));
img.setAttribute("class", "appIcon");
div.appendChild(img); 
```

我找不到任何关于如何指定来源的文档。我尝试过类似的事情

```
plugin:my.plugin.id/icons/foo.png 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:03:49.513

最后，它是一个可以显示您的 XHTML 内容的 Web 浏览器，因此它没有“由插件提供”的概念，对吧？

但是您正在使用代码来处理这些贡献，它们来自您的插件或其他插件？

如果是这种情况，我会使用`org.osgi.framework.Bundle.getEntry(String)`获取图像的 URL，然后`org.eclipse.core.runtime.FileLocator.toFileURL(URL)`将其转换为`file:///`URL。然后使用该 URL 来引用您的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:28:32.287

我以前从未使用过 CustomizableIntroPart，但我已经成功地使用前缀在不同的插件中引用了图像`platform:/plugin/...`，如下所示：

```
platform:/plugin/my.plugin.id/icons/foo.png 
```

# javascript - 从对象中删除默认值

> ID：11016857
> 
> 赞同：6
> 
> 时间：2012-06-13T14:18:23.543
> 
> 标签：javascript

我有两个 javascript 对象：

```
var a = {
    x: 1, 
    y: {
        faz: 'hello', 
        baz: ''
    },
    z: [1, 2]
};

var defaults = {
    x: 2,
    y: {
        faz: '', 
        baz: ''
    },
    z: [1, 2]
}; 
```

我只想保留与默认值`a`不同**的字段：**

```
a = remove_defaults(a, defaults); // <---- i need this fnc
{
    x: 1,
    y: {
        faz: 'hello'
    }
} 
```

目标是从用作状态的对象中删除默认值（通过 URL）。状态可以有嵌套字段，因此浅比较是不够的。叶值都是原始的（数字、字符串、布尔值）。

*（这有点像`underscore.js`'s`_.defaults()`方法的反面）*

实现这一目标的最佳方法是什么？

* * *

如果有帮助，可以使用该解决方案`underscore.js`，但没有`jquery`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:34:46.797

尝试这个：

```
function removeDuplicates(a, defaults, result) {
  for (var i in a) {
    if (i in defaults) {
      if (typeof a[i] == "object" 
          && typeof defaults[i] == "object"
          && Object.prototype.toString.call(defaults[i]) !== '[object Array]') {
        result[i] = removeDuplicates(a[i], defaults[i], {});
      } else if (a[i] !== defaults[i]) {
        result[i] = a[i];  
      }
    } else {
      result[i] = a[i];
    }
  }

  return result;
}

var result = removeDuplicates(a, defaults, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:40:19.680

```
function remove_defaults(obj, defaults) {
  for (var i in obj) {
    if (typeof obj[i] == 'object') {
      obj[i] = remove_defaults(obj[i], defaults[i]);
      continue;
    }
    if (defaults[i] !== undefined && obj[i] == defaults[i]) {
      delete obj[i];
    }
  }
  return obj;
} 
```

小提琴：http: [//jsfiddle.net/ybVGq/](http://jsfiddle.net/ybVGq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:30:38.903

我自己的看法：

```
function no_defaults(obj, defaults) {
    if ((obj instanceof Array) && (defaults instanceof Array)) {
        var result = _.difference(obj, defaults);
        return _.isEmpty(result) ? undefined : result;
    }
    if ((obj instanceof Array) || (defaults instanceof Array))
        return _.clone(obj);
    if (typeof obj == "object" && typeof defaults == "object") {
        var result = {};
        for (var prop in obj) {
            var res = prop in defaults ? no_defaults(obj[prop], defaults[prop]) : _.clone(obj[prop]);
            if (res !== undefined)
                result[prop] = res;
        }
        return _.isEmpty(result) ? undefined : result;
    }
    return _.isEqual(obj, defaults) ? undefined : _.clone(obj);
} 
```

* * *

请注意，这会深度处理对象，而不是数组。数组仅针对其直接元素的浅差异进行处理——如果元素本身需要`no_default`ing，则此函数将不起作用。但这对于我的预期用例来说很好。

# delphi - 如何使用 Rave Report 9.0 显示预览？

> ID：11016858
> 
> 赞同：0
> 
> 时间：2012-06-13T14:18:24.830
> 
> 标签：delphi, printing, delphi-xe, rave-reports, print-preview

如果您发现其他类似的问题，我深表歉意，但我只是感到沮丧。我已经在整个 Internet 和 StackOverflow 上寻找答案，但根本没有找到一种真正有效的解决方案。然而，我确实接近了。

我已经链接了我的数据库并创建了数据视图。然后，我可以直接从 Rave Report Designer 执行报告以供预览（一切看起来都很棒）。现在，我需要能够从我的 Delphi 程序中做同样的事情。当用户单击按钮时，我需要显示或打开报告的预览。

最初，我的表单上只有 TRvProject 和 TRvDataSetConnection，但在花了将近 2 个小时尝试实施其他建议后，我现在有了 TRvProject、TRvSystem、TRvRenderView、TRvRenderPrinter 和 TRvNDRWriter。不用说我在这一点上很困惑。

我可以调用`RvSystem1.Execute;`它弹出一个预览窗口，但里面什么都没有——完全空白。

尽管 Rave Report Designer View 易于使用，但在您的 Delphi 程序中使用它就不一样了。

任何输入或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:37:47.693

最直接的方法是将 TRvSystem 组件与您的 TRvProject 一起使用。

*   确保您已保存 .rav 项目文件。我使用非数据感知报告进行了测试。
*   创建一个新的 Delphi 项目。
*   在表单上放置一个 TButton、TRvProject 和 TRvSystem。
*   在您的 TRvProject 中，将 ProjectFile 属性设置为指向您的 .rav 项目文件。
*   还将 Engine 属性设置为指向 TRvSystem 组件。
*   在您的 TRvSystem 组件中，在 SystemSetups 下，将 ssAllowSetups 设置为 False。
*   确保 DefaultDest 属性设置为 rdPreview。
*   在 TButton 的 OnClick 事件中，放入以下代码：

    RvProject1.执行；

当您运行应用程序并按下按钮时，您应该会看到报告的预览。我刚试过这个。

# java - 使用 JBoss/Spring 和 NetBeans 部署 WebAppp 时出现 javax.naming.NameNotFoundException

> ID：11016861
> 
> 赞同：0
> 
> 时间：2012-06-13T14:18:29.420
> 
> 标签：java, spring, hibernate, netbeans, jboss

我是 NetBeans 和 JBoss 的新手（多年来一直在使用 Eclipse 和 Tomcat），并且在部署我们的新项目时遇到了问题。JBoss好像找不到数据源xml配置文件。我已将该文件 (buzon-adaptiv-ds.xml) 复制到 NetBeans 中我的项目内的 Other Sources/setup 文件夹和 JBoss Home 文件夹中的 conf 文件夹中。

每次我尝试运行项目时都会收到部署失败错误，从堆栈跟踪中可以看到 Spring/JBoss 找不到数据源的配置：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'BuzonAdaptivCoreDS': Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: BuzonAdaptivCoreDS not bound
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1412)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:546)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3856)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4361)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:790)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:770)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:553)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
```

BuzonAdaptivCoreDS 是在数据源配置文件中使用 jndi-name 设置的三个数据源之一。正确设置了配置（数据库 url、用户、密码等）。

我很想知道为什么会发生这种情况的任何线索，我意识到这可能是一个愚蠢的问题，但我仍然不确定 JBoss-Spring-Hibernate 集成应该如何工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:09:22.500

您需要将数据源 xml 文件放在 jboss/server/xxx/deploy 文件夹中。你放置战争文件的同一个地方。

# database - 产品和特色产品的数据库设计建议

> ID：11016862
> 
> 赞同：1
> 
> 时间：2012-06-13T14:18:32.640
> 
> 标签：database, database-design

我将创建一个以 3*8 矩阵显示产品的应用程序。

顶行是为特色产品保留的。特色产品有时可能为 0 或有时最多为 3。

与普通产品相比，特色产品有很多额外的细节，比如多出 5-6 列。

我很可能会将它们全部绑定（产品和特色产品到 ASP.NET 中的数据绑定控件）

**问题是我应该将产品和特色产品都放在同一张表还是不同的表中。**

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:27:04.990

在您的 Product 表旁边创建一个新表 FeaturedProduct，其中包含 Product 的外键。附加信息包含在此 FeaturedProduct 表中。如果一个产品存在于 FeaturedProduct 表中，那么这意味着它是一个特色产品。

要构建您的 UI，您需要将两个表左外连接。

# biztalk - 用于插入 xml 转义字符的 BizTalk WCF SQL 适配器键入过程？

> ID：11016863
> 
> 赞同：0
> 
> 时间：2012-06-13T14:18:39.153
> 
> 标签：biztalk

我们正在使用 WCF SQL 适配器将消息记录到数据库，但是消息本身有几个字符需要在 xml 中转义，即我的消息看起来像这样 'abc&d'，那么如果我使用类型化存储过程，我将拥有问题。有什么解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:58:01.550

您需要更改数据源以提供有效的 xml。没有我知道的解决方法。

仅供参考：我还发现我们的 sql server 可以生成无效的 xml。具体来说，它不会转义一些不可打印的字符。我们在相反的方向遇到了问题。我们将存储过程的输出消耗到 BizTalk 中。

# c++ - 矩阵的简单传递，即。cv::Mat 到 OpenCV2.4 中的函数

> ID：11016866
> 
> 赞同：15
> 
> 时间：2012-06-13T14:18:47.287
> 
> 标签：c++, opencv, image-processing

我是opencv的新手，我对编码中最简单的操作之一有疑问：将值传递给函数。

这是我想做的，

1.  `cv:Mat`用 0 到 50 的值在主函数中初始化 a 。
2.  将此矩阵作为参数传递给函数`foo()`，该函数又简单地打印出矩阵中每个元素的值。就是这样。

现在我在多个地方读到，当这些矩阵被传递时，只有标题被传递，而不是实际数据。那么我如何仍然能够在被调用函数中读出这个矩阵的值，就好像整个矩阵都被传递了一样？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-13T16:49:20.793

要了解发生了什么，您需要查看**[C++ 构造函数](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.1)**，更具体地说**是[复制构造函数](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)**。

`cv::Mat`当您从另一个创建 a时`cv::Mat`，如下所示：

```
cv::Mat a = cv::imread("huge.png", 1);
cv::Mat b = a; 
```

的**复制构造函数**（它是一个函数）`cv::Mat`被调用来执行对象的复制。在我谈论复制过程中发生的事情之前，您必须意识到，由于`cv::Mat`用于存储图像，较大的图像可能会占用数百兆的内存。因此，上面示例中的复制**构造函数**`cv::Mat`所做的是将整个标头（高度、宽度、深度信息等）复制`a`到`b`中，而不是复制`a`（可能是数百 MB）的整个数据/像素，它只是指向（使用指针）的原始数据`a`。

换句话说，**不复制整个图像数据是一种优化/性能决策**。

现在，考虑这个调用函数并`cv::Mat`作为参数传递的代码：

```
void do_something(cv::Mat src)
{
    // changing src pixels will be the same as changing orig pixels
}

int main()
{
    cv::Mat orig = cv::imread("huge.png", 1);
    do_something(orig);
    return 0;
} 
```

如果您研究过如何将参数传递给函数，您就会知道调用 `do_something(a);`将按**[值传递参数](http://forums.codeguru.com/showthread.php?t=343473)**。这意味着它将尝试复制`orig`into的内容`src`，但是，此过程会激活复制构造函数，`cv::Mat`它不会像我刚刚解释的那样制作数据的硬拷贝。

解决这个问题？如果您正在编写`do_something()`并且只想制作 的真实副本`orig`，只需创建一个新的`cv::Mat`并调用该方法`copyTo()`：

```
void do_something(cv::Mat src)
{
    cv::Mat real_copy = src.copyTo();
    // operating on the data of real_copy will not affect orig
} 
```

但请记住，如果`src`调用 ~100MB`copyTo()`来制作真实副本将占用另外 ~100MB 的内存，这意味着在单个函数调用中，您的程序刚刚从 100MB 变为 200MB。在设计系统时请记住这一点。祝你好运。

# iphone - 核心数据自定义部分标题/索引

> ID：11016870
> 
> 赞同：1
> 
> 时间：2012-06-13T14:18:59.043
> 
> 标签：iphone, ios, xcode, uitableview, core-data

我想在 Core Data 生成的部分标题中有完整的名称。目前它只显示第一个字母/数字（它将浮点数显示为 int），但我想将其显示为浮点数（例如 7.12）。

我想在一个部分的索引/标题中有多个字符。

因此我认为我需要覆盖 NSFetchedResultsController 的方法：

```
- (NSString *)controller:(NSFetchedResultsController *)controller sectionIndexTitleForSectionName:(NSString *)sectionName 
```

因此，我创建了 NSFetchedResultsController 的一个子类，并将其包含在我的控制器中以获取数据。但是该方法似乎没有被覆盖..

我在覆盖这个方法时做错了什么吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:55:19.847

您需要在 的委托上实现该方法`NSFetchedResultsController`，而不是在子类中。

# php - PHP循环搜索字符串，如果不匹配则执行

> ID：11016873
> 
> 赞同：2
> 
> 时间：2012-06-13T14:19:13.103
> 
> 标签：php

我正在尝试在一个较大的字符串中搜索多个字符串，如果它们都不匹配，则操作原始字符串。这是代码：

```
$searchthis = 'this is a string'
$arr = array('foo', 'bar');
foreach ($arr as &$value) {
  if (strpos($searchthis, $value) !== false) {
    break;
  }
  else{
    $searchthis = $searchthis . ' addthis';
  }
} 
```

问题是在搜索第一个字符串变量并且不匹配之后，原始搜索的字符串在运行下一个测试之前被操纵。

有什么想法吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:22:05.290

您需要检查**循环之外**是否没有匹配项。您可以通过将变量 ( `$found`)设置`true`为至少找到一个字符串来完成此操作：

```
$found = false;
foreach ($arr as &$value) {
  if (strpos($searchthis, $value) !== false) {
    $found = true;
  }
}
if (!$found) {
  $searchthis = $searchthis . ' addthis'; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:23:46.263

你的意思是

```
$searchthis = 'this is a string'
$arr = array('foo', 'bar');
$notfound = true;
foreach ($arr as &$value) {
  if (strpos($searchthis, $value) !== false) {
    $notfound = false;
    break;
  }
}
if ($notfound){
    $searchthis = $searchthis . ' addthis';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:24:53.190

或者像这样：

```
$searchthis = 'this is a string';
$arr = array('foo', 'bar');
foreach ($arr as &$value) {
    if (strpos($searchthis, $value) !== false) {
        break;
    }
    else{
        if(!isset($result)) {
            $result = $searchthis . ' addthis';
        }
        else {
            continue;
        }
    }
} 
```

# jquery - Jquery 定位难题

> ID：11016877
> 
> 赞同：0
> 
> 时间：2012-06-13T14:19:27.577
> 
> 标签：jquery

我有一个很好的条纹表，上面有一些漂亮的鼠标悬停效果，直到我今天看到它。我最近没有更改与此功能相关的任何内容，但它不再起作用。jquery 代码如下所示：

```
$(".striped tr").mouseover(function(){$(this).addClass("over");}).mouseout(function(){$(this).removeClass("over");});
$(".striped tr:even").addClass("alt"); 
```

第一个选择器有效，我得到了鼠标悬停功能。第二个显然在同一张桌子上失败了。我尝试将 .striped 目标替换为表的 ID，然后它可以工作，但是此功能需要应用于多个表 ID。

任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:25:10.373

尝试添加`tbody`到您的选择器

```
$(".striped tbody tr") 
```

# batch-file - 批处理文件：回显“|” 特点

> ID：11016882
> 
> 赞同：0
> 
> 时间：2012-06-13T14:19:32.930
> 
> 标签：batch-file

我能怎么做：

```
echo [-help | -h]: displays help 
```

在我这样做的那一刻，我得到：

> 该命令的语法不正确。

这有效，但

```
echo "[-help | -h]: displays help" 
```

它还打印引号，我不希望那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:26:43.937

用这个

```
echo [-help ^| -h]: displays help 
```

`^`逃出管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:28:21.680

有多种方式：

1.  使用脱字符转义
    您可以使用脱字符转义任何字符（但不是百分比）

    回声 [-help ^¦ -?]

2.  使用延迟扩展
    由于延迟扩展的内容不再被解析，它可以包含所有字符。

    setlocal EnableDelayedExpansion set "helpStr=[ -help | -?]" echo !helpStr!

3.  消失的引号
    引号也可以转义特殊字符，但它们也会被回显。
    消失的引号与普通引号一样工作，但在回显之前它们将被替换为空。

    3.1 延迟扩展，你在任何需要引用的地方添加 !"=! ，这个表达式将被替换为空，稍后

    `setlocal EnableDelayedExpansion`
    `echo !"=![ -help | -?]`

    3.2 如果没有延迟扩展，您可以使用 FOR 循环

```
FOR %%^" in ("") do (
    echo %%~"[ -help | -?]`
 )
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T14:28:33.453

DOS 中的转义字符（通常）是 ^

所以试试：

```
echo [-help ^| -h]: displays help 
```

这有点奇怪，但也有很多例外。见这里：[http ://www.robvanderwoude.com/escapechars.php](http://www.robvanderwoude.com/escapechars.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:23:08.670

`[-help | -h]`表示要么`-help`要么。`-h`尝试再次运行该命令，并将其`-h`作为唯一参数。

# gnuplot - 图顶部的 Gnuplot x 轴

> ID：11016890
> 
> 赞同：4
> 
> 时间：2012-06-13T14:20:14.507
> 
> 标签：gnuplot

如何让 gnuplot 在图表顶部而不是底部绘制 X 轴（带有测量值等）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:24:21.967

这应该可以解决问题（或其某些变体）：

```
set xtics format ""
set x2tics
plot sin(x) axes x2y1 
```

Gnuplot 有 x1（底部，默认）、x2（顶部）、y1（左，默认）和 y2（右）轴。您需要在说明`plot ... axes <axes>`符中将两个轴配对在一起——先是 x，然后是 y。您也可以设置范围： `set x2range [-30:30]`，标签 ( `set x2label "foo"`) 虽然这看起来很像第二个标题...基本上`set x...`映射到`set x2...`.

# javascript - 反序列化后重新应用 JS Prototype 函数

> ID：11016896
> 
> 赞同：6
> 
> 时间：2012-06-13T14:20:33.757
> 
> 标签：javascript, casting

给定以下代码：

```
function Person(firstName, lastName) {
    this.FirstName = firstName;
    this.LastName = lastName;
}

Person.prototype.showFullName = function() {
    return this.FirstName + " " + this.LastName;
};

var person = new Person("xx", "xxxx");
var jsonString = JSON.stringify(person);

var thePerson = JSON.parse(jsonString); 
```

我的目标是能够在 thePerson 上调用“showFullName”。虽然我知道 JS 并没有真正的对象，但它必须有某种方式能够说应该以某种方式对待某些东西，比如强制转换`thePerson`为`Person`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:22:55.487

**这是不可能的**。

您不能使用它以前的方法将 JSON 字符串转换为对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:24:27.213

据我所知，最好的方法是先构造一个 vanilla 对象，然后使用 jQuery 的[extend](http://api.jquery.com/jQuery.extend/)之类的东西将数据放到它上面，即。

```
var thePerson = new Person(); // and make sure the constructor gracefully handles no arguments
jQuery.extend(thePerson, JSON.parse(stringData)); 
```

`extend`如下所述，如果你只是创建一个浅拷贝，你就不需要使用，你在这里。您可以遍历解析数据的属性并将它们复制到目标对象上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:26:40.340

Like most things that have language constructs in other languages, even though you can't do it directly, there's a way around it in Javascript. Just set up your object to accept all the data it exposes as a constructor:

```
var data = JSON.parse(jsonString);
var person = new Person(data); 
```

from scratch:

```
var person = new Person({ FirstName: "xx", LastName: "xxx"}); 
```

(nb - you could use `$.extend` or the like to update an existing instance instead - but generally it's preferable to use the constructor so you have control over the handling of the object that gets passed in; for example you may want to ignore all except certain properties of the object that's passed in).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:25:15.857

> 虽然我知道 JS 并没有真正的对象，但它必须有某种方式可以说应该以某种方式对待某事。

不正确。JS中有很多对象；函数本身就是对象。AFAIK 唯一不是对象的东西是原始类型。也许您的意思是 Javascript 没有**类**的概念。这是正确的，因为 JS 使用原型继承。

一般来说，在 JS 中强制转换是没有意义的。如果你这样做

`x.someMethod()`

someMethod 如果在 上定义`x`，无论是什么类型都会触发`x`。它被称为鸭子打字。

`JSON.parse`创建一个`object literal`. 您可以做的最好的事情是创建一个构造函数，该构造函数接受一个对象文字并初始化您的实例的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T14:25:28.983

您可以创建一种包装类，您可以将对象提供给构造函数，并将每个属性设置为该对象的属性。你可以把它变成一个“基类”，这样你就可以将它用于所有类型的对象。这样，您只需创建一个从该基类“继承”的类的新实例，并将其与您的对象一起提供。有点像[http://backbonejs.org/中使用的模型](http://backbonejs.org/)

# android - 已发布的 Android 应用在 Google Play 上不可见

> ID：11016897
> 
> 赞同：1
> 
> 时间：2012-06-13T14:20:43.523
> 
> 标签：android, publishing, google-play

我刚刚在 Google Play 上发布了我的第一个 android 应用程序。但是，虽然我在开发者控制台上看到该应用程序已发布，但我在 Google Play 上看不到它。

我试图通过包名从直接 url 访问它，但它也没有工作。直接链接如下：

[https://play.google.com/store/apps/details?id=com.serdar.sozluk](https://play.google.com/store/apps/details?id=com.serdar.sozluk)

谁能知道是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:28:30.620

它是一个与语言相关的问题。您的应用程序名称不是英文，这就是您无法找到您的 aoolication 的原因

您的应用程序未显示在列表中，因为您可能正在搜索

**《学习英语单词》**

试着搜索这个[词](https://play.google.com/store/search?q=Learning%20English%20Words&c=apps)

**İngilizce Kelime Öğreniyorum** [this](https://play.google.com/store/search?q=%C4%B0ngilizce%20Kelime%20%C3%96%C4%9Freniyorum&c=apps)

# android - 无法将 Facebook Android SDK 项目添加到库字段

> ID：11016902
> 
> 赞同：1
> 
> 时间：2012-06-13T14:21:02.477
> 
> 标签：android, facebook, sdk, project

我相信我已经到处寻找可能并且已经觉得很傻，因为我花了几个小时在这方面没有任何成功。

我按照说明创建两个初始项目（Facebook Android SDK 和测试项目）：http: [//developers.facebook.com/docs/mobile/android/build/#ref](http://developers.facebook.com/docs/mobile/android/build/#ref)

但是当通过单击“添加...”按钮来选择项目时，它并没有真正在列表中显示任何内容，而且我的测试项目充满了错误，因为没有引用 Facebook Android SDK 库。

你能帮我解决这个问题吗？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:27:03.477

您确定 FB Android SDK 项目被标记为“Is Library”吗？右键单击该项目，属性-> Android-> 选中“是库”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:25:21.613

在您的 Facebook Android SDK-Project 中，确保选中“属性”->“Android”对话框中的“是库”-复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:25:37.393

实际上，只需将 facebook SDK 完全复制到您的项目中即可。它只会以这种方式工作。

# arrays - 在 O(log n) 时间内找到数组中的重复元素

> ID：11016910
> 
> 赞同：0
> 
> 时间：2012-06-13T14:21:30.870
> 
> 标签：arrays, algorithm

我知道类似的问题可能会被问很多次，但它与那些不同。

给定一个未排序的整数数组，其中`1 to N-1`包含一个重复元素（`N`是数组的大小，最大值是`N-1`由于重复元素）。找到重复元素的最佳方法是什么？如果可能的`O(log n)`话。`

我知道`O(n)`解决方案，但有什么办法可以及时解决这个问题`O(log n)`吗？

**O(n) 解决方案：**

```
1) Find sum of first N-1 natural numbers using N(N-1)/2, lets say it SUM1
2) Find sum of all the elements of the arrays, let say it SUM2

Duplicate = SUM2 - SUM1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:23:19.637

它不能以次线性方式完成，数组未排序，因此您需要在最坏的情况下读取所有元素。

这种直觉非常通用，适用于许多处理未排序数组的算法，因为您的欺骗元素可能正在等待“超出界限”。

当然，同样的直觉不适用于排序数组的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T07:08:02.853

它不能在亚线性时间内完成。输入没有这样的属性（如排序数组）让您在 log(N) 时间内完成。

# jquery - jQuery droppable div不接受克隆

> ID：11016916
> 
> 赞同：0
> 
> 时间：2012-06-13T14:21:56.873
> 
> 标签：jquery, jquery-ui

我有许多可拖动的图像，我想克隆它们然后放到一个 div 上，并可以选择在放置后重新定位和添加新的克隆。在浏览了这个网站之后，我将其缩小到以下代码：

```
function init() {

$("#bin").droppable({
  accept: '.symbol',
  drop: function(event, ui) {
      $(this).append($(ui.helper).clone());
      $("#bin .symbol").addClass("item");
      $(".item").removeClass("ui-draggable symbol");
      $(".item").draggable();
  }
}); 
$(".symbol").draggable({
  helper: 'clone',
  grid: [20, 50]
});
} 
```

这似乎可行，但现在在拖动克隆时，它甚至不会出现在可放置的 div 上（它在页面上可见，但随后似乎“滑入”可放置的 div 之下）。有人可以告诉我出了什么问题吗？

html:

```
<div class="symbolSource">
<img src="pics/sun.png" alt="Bliss for 'sun'" class="symbol" />
<img src="pics/colour.png" alt="Bliss for 'colour'" class="symbol"  />
<img src="pics/tree.png" alt="Bliss for 'tree'" class="symbol" />
</div>
<div id="bin" ></div> 
```

CSS：

```
.symbolSource {
    padding: 0px 0;    
    margin: 20px;
    width: 100%;
    height: 150px;
    float: left;
    overflow: scroll;
}

#bin {
  background: #eee;
  height: 300px;
  width: 100%;
  position: relative;
  margin-top: 220px;
} 
```

编辑：克隆不再消失，但 div 仍然不会接受它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:27:32.837

检查`#bin`和的 z 索引`.symbol`。的 z-index`#bin`应低于 的 z-index`.symbol`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:30:17.280

You might want to check The answer [https://stackoverflow.com/a/868002/556856](https://stackoverflow.com/a/868002/556856) to the question [When I make a draggable clone and drop it in a droppable I cannot drag it again](https://stackoverflow.com/questions/867469/when-i-make-a-draggable-clone-and-drop-it-in-a-droppable-i-cannot-drag-it-again)

# javascript - html中新标签的疯狂想法

> ID：11016919
> 
> 赞同：1
> 
> 时间：2012-06-13T14:22:08.307
> 
> 标签：javascript

我想创建一个名为`<triangle>`. 我想添加新的 CSS 属性，比如`width-a`,`width-b`和`width-c`. （三角形三边的宽度）。

我已经在 J​​avaScript 中进行了计算，我知道如何创建标签并附加它们，我知道如何查找所有`<triangle>`标签并更改它们的样式。

但是，如果将使用我的库作为`<triangle>`标签的人在 javascript 中附加了一个`<triangle>`标签，那么它就不会被格式化为它必须的格式。然后我想到了一个间隔，但是在三角形出现之前会有一个眨眼。

有没有办法修改`appendChild`（或`createElement`）函数，以便我修改将在附加之前附加的标签？

（当然，任何其他方式可以使某人只写：

```
var a=document.createElement("triangle");
a.style.borderA="100px";
a.style.borderB="100px";
a.style.borderC="100px";
document.body.appendChild(a); 
```

将被接受）

* * *

[请不要 jQuery]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:39:07.810

你可以重写该`createElement`函数，注入一个地方来监听创建过程：

```
(function () {
    // cache the old createElement function
    var createElement = document.createElement;

    // override the createElement function
    document.createElement = function ( tag ) {
        // create a normal element
        var el = createElement.call(document, tag);

        // execute all pseudo-event handlers
        for (var i = 0, il = document.createElement.hooks.length; i < il; ++i) {
            document.createElement.hooks[i].call(el, el);
        }

        // still return the element
        return el;
    };

    // create a place to register "events"
    document.createElement.hooks = [];
})(); 
```

一旦被覆盖，您就可以自由地进入创建过程。现在，您创建的任何新三角形都将自动设置其样式属性：

```
// register a new "event" hook
document.createElement.hooks.push(function () {
    if (this.tagName === 'TRIANGLE') {
        this.style.borderA = "100px";
        this.style.borderB = "100px";
        this.style.borderC = "100px";
    }
});

var el = document.createElement('triangle');
document.body.appendChild(el); 
```

# apache-flex - 来自 Adob e air 的 Http POST 不起作用

> ID：11016924
> 
> 赞同：1
> 
> 时间：2012-06-13T14:22:21.650
> 
> 标签：apache-flex, post, air

我有一个 Adob​​e Flex Web 应用程序，我们正在将其转换为 Adob​​e AIR 应用程序。在服务器端，我有一个只接受 HTTP POST 请求的 servlet。我们使用`navigateToUrl()`该 POST 请求的结果打开网页。在 Web 应用程序中，这可以完美运行（使用请求结果打开一个新选项卡），但它在 Adob​​e AIR 客户端中无法使用，使用完全相同的代码。HTTP **POST**被转换为servlet 不接受的 HTTP **GET 。**网络浏览器显示：

```
HTTP Status 405 - Request method 'GET' not supported. 
```

这是提出请求的方式：

```
var request:URLRequest = new URLRequest();
request.method = URLRequestMethod.POST;
request.url = presentationModel.exportURL; 
```

（`exportURL`变量是一个字符串，看起来像`http://ipaddress:8080/myapp/export/eventhistory1339595975131.html`）

我检查了[这个论坛帖子](http://www.actionscript.org/forums/showthread.php3?t=159020)，但那里给出的解决方案（用`const`字符串本身替换指向字符串的 a ）没有意义，并且在我尝试时不起作用。

我也看过[这个问题](https://stackoverflow.com/questions/6898192/unable-to-post-data-from-adobe-air-application)，但那里没有真正的答案。评论表明用户在他的 URL 中添加了一个斜杠以使其工作，但在我的情况下这不起作用，因为 url 的形式是： `http://ipaddress:8080/myapp/export/eventhistory1339595975131.html`

我正在使用 Adob​​e Air 3.3 和 Flex SDK 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:11:53.240

查看似乎将请求转换为的方法的[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html)`navigateToURL``POST``GET`

> **参数**
> 
> request:URLRequest — 一个 URLRequest 对象，它指定要导航到的 URL。对于在 Adob​​e AIR 中运行的内容，当使用 navigateToURL() 函数时，运行时将使用 POST 方法（其方法属性设置为 URLRequestMethod.POST）的 URLRequest 视为使用 GET 方法。

也许使用[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)代替？

# c - C：以这种方式从内核模块写入文件正确吗？

> ID：11016927
> 
> 赞同：0
> 
> 时间：2012-06-13T14:22:34.307
> 
> 标签：c, file, kernel-module, fwrite

我尝试将 pcm 字节（来自 ALSA 缓冲区）从内核空间复制/写入内核模块（LKM）内的文件中。

文件已写入，大小对我来说看起来不错，但因为它是 PCM 数据，我看不出它是否正确（原始音频数据，不可读）。

我的音频播放器（MPlayer="Invalid seek tonegative position ffffffffffffffff!", VLC, Foobar2000）无法播放我的书面文件，所以我认为我的代码有误。

当我通过 SCITE 打开文件时，我看到许多“NUL”和其他内容（字节；）。

也许你们中的一个人发现了一个错误？

我有这个脚本：

```
unsigned char *dma_area; // this is the source, an mmapped-area
int pcm_offset_bytes; // the actual offset in the dma_area
int size_bytes; // the amount of bytes to copy
struct file *target_file; // the target-file

int ret; // used in write-process below
int wrote = 0; // used in write-process below
mm_segment_t fs;
void *data; // dma_area + pcm_offset_bytes

// (..) calculate offset and size

// open the target file
target_file = filp_open("/dev/snd/pcmC0D0p_output", (O_CREAT | O_TRUNC | O_WRONLY), (S_IRWXU | S_IRWXG | S_IRWXO));

data = dma_area + pcm_offset_bytes

fs = get_fs();
set_fs (get_ds ());

if (!target_file || !target_file->f_op || !target_file->f_op->write) {
    LOGI("something's missing\n");
    return -EIO;
}

// loop until every byte is written
while (size_bytes > 0) {

    ret = target_file->f_op->write(target_file, (char *)data, size_bytes, &target_file->f_pos);

    LOGI ("wrote %d bytes to target_file@%p, return %d\n", size_bytes, target_file, ret);
    if (ret <= 0)
        goto done;

    size_bytes -= ret;
    data += ret;
    wrote += ret;
}

ret = wrote;

done:
    set_fs(fs);
    LOGI("result %d\n", ret); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:32:42.623

首先，您不是“应该”写入内核中的文件。

对于如何播放无头原始 pcm 更合适的问题，您可以使用 audacity 的导入功能。

或者使用 aplay

```
aplay some_file -t raw -f S16_LE -c 2 -r 44100 
```

使用任何合适的参数。

# date - 如何在 SAS 中查询日期

> ID：11016930
> 
> 赞同：2
> 
> 时间：2012-06-13T14:23:05.327
> 
> 标签：date, sas

我需要将一些数据从 SAS 导出到 CSV，以便我可以将其移动到 SQL Server 并将其加载到那里。（服务器彼此看不到。）

数据中有一个具有以下定义的字段：

*   类型 = 数字
*   长度 = 8
*   格式 = DATETIME18。

现在我只是想看看一个日期范围内有多少条记录：

```
proc sql;

SELECT COUNT(*)
FROM BNA_BASE.base_agent_bna_cust_date
WHERE bna_outcome_ts >= '04Jun12:00:00:00'd
  AND bna_outcome_ts <  '11Jun12:00:00:00'd
;

quit; 
```

但我总是得到`0`，即使我可以在表中看到有与我认为我正在查询的记录相匹配的记录，例如`06JUN12:12:42:57`.

谁能指出我的愚蠢错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:46:44.427

我应该`dt`不只是使用`d`...

```
WHERE bna_outcome_ts >= '04Jun12:00:00:00'dt
  AND bna_outcome_ts <  '11Jun12:00:00:00'dt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:52:32.970

Dems 答案的替代方法是使用 datepart() 函数，

例如

```
where datepart(bna_outcome_ts) >= '04jun2012'd
and datepart(bna_outcoume_ts) < '11jun2012'd 
```

# sql - 如何强制查询不使用给定表上的索引？

> ID：11016935
> 
> 赞同：54
> 
> 时间：2012-06-13T14:23:13.073
> 
> 标签：sql, sql-server-2005, indexing

我目前正在做一些测试，以确定在 SQL Server 2005 中的给定列上包含索引的性能影响。

我使用的测试数据集大约有 7200 万行（大约 6 GB 的数据）。为了实际*测试*索引的性能，我需要能够比较有无索引的性能。

这一切都很好，但是首先创建索引并不是一项便宜的操作。如果我想在没有索引的情况下测试表，我至少需要禁用索引。要使用索引进行测试，我需要重新启用它，这需要很长时间。

有什么方法可以强制 SQL Server 2005 在执行查询时忽略给定的索引？我不想仅仅为了测试查询而禁用索引，因为禁用索引需要很长时间。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-13T14:29:58.833

```
SELECT *
FROM MyTable WITH (INDEX(0))
WHERE MyIndexedColumn = 0 
```

查询通常会使用 MyIndexedColumn 上的索引，但由于 table 提示，它将改为 tablescan。

* * *

```
SELECT *
FROM MyTable WITH (INDEX(IndexName))
WHERE MyIndexedColumn = 0 
```

查询通常会使用 MyIndexedColumn 上的索引，但由于表提示，它将改为使用名为 IndexName 的索引。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-17T05:22:42.253

我正在使用所有不同类型的数据库，并且在需要时永远记不起具体的提示。因此，我正在使用一种纯 SQL 方法，该方法（当前）适用于我遇到的所有数据库。

这个想法只是通过混淆 SQL 中的相应表达式，使 DB 无法使用特定索引。例如，当一个`where`子句使数据库相信它最好使用索引来解决时，但事实并非如此。

```
SELECT *
FROM MyTable
WHERE MyIndexedColumn + 0 = 0 
```

同样，您可以将空字符串添加到字符串值。当前的优化器没有解决这样的表达式不能使用索引`(MyIndexedColumn)`。

这实际上是我在书中描述的一种反模式。这里有一些关于[SQL 数学的页面](http://use-the-index-luke.com/sql/where-clause/obfuscation/math)

对于临时测试来说，它绝对足够好。在生产代码中，提示当然更具表现力！

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-09-16T18:06:26.363

您可以禁用您不想在运行测试代码的同一事务中使用的索引，只需确保在最后回滚事务。这可确保测试代码不会使用索引，但会防止索引实际被禁用。

```
BEGIN TRANSACTION

    ALTER INDEX [MyIndex] ON MyTable DISABLE;

    EXEC TestCode;

ROLLBACK 
```

如果您有一个复杂的情况，即您的测试代码在不同时间使用多个索引并且您想测试添加一个新索引是否会改善事情，这会更好。

# sql-server - 从函数返回sql server填表

> ID：11016940
> 
> 赞同：1
> 
> 时间：2012-06-13T14:23:24.800
> 
> 标签：sql-server, tsql

我有一张桌子，例如：

```
PK_ID  LOCATION_ID     LOCATION_TEXT
 1          21           NULL
 2          44           NULL
 3          26           NULL 
```

我有一个`LOCATION_TEXT`从`LOCATION_ID`. 我正在尝试做类似的事情：

```
update mytable 
set locationText = (select dbo.fcGetLocationText (LOCATION_ID) from mytable) 
```

我得到了

> 子查询返回超过 1 个值

错误，我有点理解，但我不知道该怎么做...如何在`LOCATION_TEXT`没有游标或 while 循环的情况下更新列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:24:57.807

为什么不简单：

```
UPDATE mytable SET LOCATION_TEXT = dbo.fcGetLocationText(LOCATION_ID); 
```

另外，为什么您的列名大喊大叫？

# android - android小部件是否与其应用程序在同一进程中运行

> ID：11016944
> 
> 赞同：10
> 
> 时间：2012-06-13T14:23:29.137
> 
> 标签：android, android-widget, android-service

我想为我的应用程序创建一个绑定服务，并希望它可以在我决定创建一个小部件时用于将来。为了决定是使用 Messenger 还是扩展 Binder，我需要知道一个小部件及其对应的应用程序是否在同一个进程中运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T14:46:41.647

是的。除非您在清单中另外指定（使用`android:process="..."`），否则应用程序的所有组件（小部件提供程序、服务、活动、广播接收器）都在同一进程中运行，使用同一虚拟机并在同一内存空间中运行。

# ruby-on-rails - 如果登录/注册无效，需要删除重定向（在设计中）

> ID：11016946
> 
> 赞同：1
> 
> 时间：2012-06-13T14:23:31.543
> 
> 标签：ruby-on-rails, devise, overriding

我正在写弹出式注册。我的麻烦是我无法覆盖注册和会话控制器。我正在使用这篇文章[http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/](http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/)。

在 registrations_controller.rb 我放：

```
 def after_sign_up_path_for(resource)
      edit_user_registration_path(current_user)
    end 
```

它不起作用......也在 session_controller 中：

```
 class SessionsController < Devise::SessionsController
    def sign_in_and_redirect(resource_or_scope, resource=nil)
      scope = Devise::Mapping.find_scope!(resource_or_scope)
    resource ||= resource_or_scope
    redirect_url = stored_location_for(scope)
    respond_to do |format|
      format.js do
        sign_in(scope, resource) unless warden.user(scope) == resource
       if redirect_url.present?
          redirect_url = "#{redirect_url}.js" unless redirect_url[-3..-1] == '.js'
          redirect_url += redirect_url.match(/\?/) ? '&' : '?'
          redirect_url += "after_authentication=true"
          redirect_to redirect_url
        else
          render(:update) do |page|
          page << render('/shared/after_authentication')
        end
       end
    end
       format.html { super }
      end
    end
   end 
```

我认为我的路线有问题：

```
devise_for :users, :controllers => {:sessions => '/sessions', :registrations => '/registrations'} 
```

我更改了 devise.rb 并添加了 custom_failure.rb。

谁能帮我 ？

# javascript - JavaScript 布尔比较总是失败

> ID：11016949
> 
> 赞同：0
> 
> 时间：2012-06-13T14:23:46.997
> 
> 标签：javascript, extjs4, boolean

这个布尔比较总是返回 false，但它在我的 getColumnsFunction() 中比较 false == false。它应该返回 true，我不知道为什么。这是代码：

```
function getModelColumns(exlude, modelName){    
    var model = Ext.ModelManager.getModel(modelName).create();
    var fields = model.fields.items;

    for(var x in fields){
        console.log( inArray(exlude, fields[x].name == false),
                    'boolean_compare', 
                     inArray(exlude, fields[x].name));
     }

}
function inArray(arr,val){
    for(var x in arr){
        if(arr[x] === val)
            return true;
    }

    return false;
 } 
```

这是该 for 循环中所有字段的 console.log() 中的内容：

```
false "boolean_compare" false 
```

它们都等于假，为什么布尔比较返回假？

编辑：忘记了 '(' 它应该是 inArray(exlude, fields[x].name ) == false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:30:39.433

这个表达式：

```
inArray(exlude, fields[x].name == false) 
```

将首先将名称与 进行比较`false`，并且由于它们不相等，它将调用`inArray(exclude, false)`. 除非它是一个包含该值的数组，`false`否则它将始终返回 false。

我认为你想要：

```
inArray(exlude, fields[x].name) == false 
```

它将在数组中搜索名称，然后将结果与`false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:30:20.583

我猜字段名称没有明确定义为布尔值，所以在 extjs 中默认是字符串。您正在`"false"`与`false`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:30:34.507

您可以使用 FF 上的 firebug 或 Chrome 上的网络工具进行调试，我会这样做。
但是给我们 jsfiddle 演示 [jsfiddle](http://jsfiddle.net/)

但我认为可能是console.log 与它有关我遇到了同样的问题一个不使用console.log 使用警报测试它。

# asp.net - SQL Server 接收并运行结果错误的查询

> ID：11016951
> 
> 赞同：0
> 
> 时间：2012-06-13T14:23:50.337
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我有一个连接到数据库的 ASP.NET 项目。网页向数据库发送查询。不止一个，事实上，它成功地从数据库中读取。`UPDATE`单击提交按钮后，我向SQL Server (2008)发送查询。

我使用 C#，将`UPDATE`查询发送到服务器，并使用`SqlCommand`如下初始化的对象：

**编辑：**向查询添加了变量。

```
string strQuery = "UPDATE [tbl] SET [f1]='" + stringValue + "', [f2]='" + (boolValue?"1":"0") + "' WHERE [id]=" + intId.ToString() + ";";
SqlCommand cmd = new SqlCommand(strQuery, connectionObject);
int QueryResult = cmd.ExecuteNonQuery(); 
```

QueryResult 以 0 结尾，当然，没有进行任何更改。复制粘贴到 SSMS - 我得到`1 row(s) affected`并且数据发生了变化。

连接工作正常 - 当我使用[它](https://stackoverflow.com/questions/7849091/sql-server-2005-query-history)来检查数据库上的工作时 - 查询已执行。（它看起来像`(@1 varchar(8000), @2 varchar(8000), @3 tinyInt) UPDATE [tbl] SET [f1]=@1, [f2]=@2 WHERE [id]=@3;`）。

任何想法发生了什么 - 赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:48:35.300

最有可能的`WHERE [id]=" + intId.ToString()`是没有找到要更新的行。

这要么是因为：

*   ID 是正确的，并且该行还不存在（如果您是在手前插入它）
*   身份证错了
*   stringValue 包含破坏您的 SQL 的东西，以至于它执行但不匹配（不太可能但可能）。
*   您没有针对正确的数据库执行 SQL（我之前在有多个数据库的开发环境中这样做过！）

如果您在作业后的行上放置一个断点，`strQuery`请查看它包含的内容，并可能将其内容发布回您的问题中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:26:55.267

这是一个如何使用参数的示例

```
using (SqlCommand cmd = new SqlCommand())
        {
            cmd.Connection = connectionObject;
            cmd.Parameters.AddWithValue("@f1", stringValue);
            cmd.Parameters.AddWithValue("@f2", boolValue);
            cmd.Parameters.AddWithValue("@id", intId);
            cmd.CommandText = "update [tbl] set f1 = @f1 , f2 = @f2 where id = @id";
            int QueryResult = cmd.ExecuteNonQuery();

        } 
```

# asp.net - 使用 SqlDataSource 的 SessionParameter 和更新查询

> ID：11016953
> 
> 赞同：0
> 
> 时间：2012-06-13T14:23:53.163
> 
> 标签：asp.net

我的 SQLDataSource 中有一个 UpdateQuery，其中的参数是从 SessionParameter 提供的。SessionParameter 的值是通过单击 gridview 的按钮从我的代码隐藏中设置的。

目标是当用户单击gridview 上的按钮时，它会通过gridview 更新数据库。我遇到的问题是更新查询没有被执行，因为我没有看到用新值更新的行。我所做的调试表明我在正在选择的行上获得了我想要的值，并且正在设置会话。

这是相关的代码片段：

```
<asp:SqlDataSource ID="JobNameDatasource" runat="server"
ConnectionString="<%$ ConnectionStrings:ConnectionString %>"

SelectCommand="SELECT [JobName], [ChangedDate], [AdHocFlg] FROM [t_Config_iFace_Execution]"
UpdateCommand="UPDATE [t_Config_iFace_Execution] SET [RunJob] = 1 WHERE [JobName] =  @JobName">
<UpdateParameters>
<asp:SessionParameter Name="JobName" SessionField="JobName"/>
</UpdateParameters>
</asp:SqlDataSource>

Protected Sub RunJob_RowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)
   If e.CommandName = "UpdateJob" Then
     Dim btnRunJob As Button = TryCast(e.CommandSource, Button)
     Dim gvr As GridViewRow = TryCast(btnRunJob.NamingContainer, GridViewRow)
     Dim rowIndex As Integer = gvr.RowIndex
     Dim Name As String = DirectCast(GridView1.DataKeys(rowIndex).Values("JobName"), String)
     Session.Add("JobName", Name)
     Label1.Text = Session("JobName")
   End If
End Sub 
```

任何想法为什么它不起作用？我认为这很简单，除非我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:03:29.227

对不起！通过使用后面的代码自己解决问题。在我的 rowcommand 方法中，我使用 updateparameters 将值传递到我的 where 并解决了问题！

# .net - 通过 mod_mono 在 Mono 2.11.1 上运行 .NET4.0 应用程序的异常

> ID：11016954
> 
> 赞同：1
> 
> 时间：2012-06-13T14:23:54.800
> 
> 标签：.net, asp.net-mvc, apache, mono, mod-mono

昨天我在 CentOS 5.7 上安装了单声道版本 2.11.1。从那以后，我无法让我的 .NET4.0 应用程序通过 mod_mono 和 Apache 工作，但我的 .NET2.0 应用程序工作正常。从命令行运行 .NET4.0 控制台应用程序也可以正常工作。

使用的版本：

*   单声道 2.11.1
*   mod_mono 2.10
*   xsp 2.10.2
*   阿帕奇 2.2.21

我的 Apache 配置（相关部分）：

```
Alias /testproject "/var/www/sites/testproject"

MonoServerPath testproject "/usr/bin/mod-mono-server4"
MonoAutoApplication disabled
MonoDebug testproject true
MonoSetEnv testproject MONO_IOMAP=all
MonoApplications testproject "/testproject:/var/www/sites/testproject"

<Location /testproject>
        SetHandler mono
        MonoSetServerAlias testproject
</Location> 
```

Apache 错误日志中出现以下异常：

```
mod-mono-server4
Listening on: /tmp/mod_mono_server_testproject
Root directory: /
Worker initialization exception occurred. Continuing anyway:
System.InvalidCastException: Cannot cast from source type to destination type.
  at System.Configuration.ConfigurationManager.get_AppSettings () [0x00000] in <filename unknown>:0
  at Mono.WebServer.ModMonoWorkerRequest..cctor () [0x00035] in /root/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorkerRequest.cs:86
System.NullReferenceException: Object reference not set to an instance of an object

Server stack trace:
  at Mono.WebServer.BaseApplicationHost.EndOfRequest (Mono.WebServer.MonoWorkerRequest mwr) [0x00029] in /root/xsp-2.10.2/src/Mono.WebServer/BaseApplicationHost.cs:141
  at Mono.WebServer.ModMonoApplicationHost.ProcessRequest (Int32 reqId, System.String verb, System.String queryString, System.String path, System.String protocol, System.String localAddress, Int32 serverPort, System.String remoteAddress, Int32 remotePort, System.String remoteName, System.String[] headers, System.String[] headerValues, System.Object worker) [0x00173] in /root/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoApplicationHost.cs:109
  at (wrapper remoting-invoke-with-check) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (int,string,string,string,string,string,int,string,int,string,string[],string[],object)
  at (wrapper xdomain-dispatch) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (object,byte[]&,byte[]&,int,string,string,string,string,string,int,string,int,string,string[],string[])

Exception rethrown at [0]:

  at (wrapper xdomain-invoke) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (int,string,string,string,string,string,int,string,int,string,string[],string[],object)
  at (wrapper remoting-invoke-with-check) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (int,string,string,string,string,string,int,string,int,string,string[],string[],object)
  at Mono.WebServer.ModMonoWorker.InnerRun (System.Object state) [0x00199] in /root/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:239
  at Mono.WebServer.ModMonoWorker.Run (System.Object state) [0x00002] in /root/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:92
[Wed Jun 13 14:58:31 2012] [error] (70014)End of file found: read_data failed
[Wed Jun 13 14:58:31 2012] [error] Command stream corrupted, last command was -1 
```

这看起来像是 Mono、mod_mono、xsp 中的错误，还是完全不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:53:48.127

尝试将带有以下标志的 XSP 运行到 mono 可执行文件：

--debug=casts

（从这里：[http](http://tirania.org/blog/archive/2008/Apr-16-1.html) ://tirania.org/blog/archive/2008/Apr-16-1.html ）

您可能已经安装了一个脚本来在您的系统中运行 XSP。在我这里是 /usr/bin/xsp4。通过查看它，您会发现您需要在 MONO_OPTIONS 环境变量中包含此标志，或者只需修改该文件以添加它。

# objective-c - 这 2 个 @synthesize 模式和推荐的有什么区别？

> ID：11016955
> 
> 赞同：3
> 
> 时间：2012-06-13T14:23:55.850
> 
> 标签：objective-c, ios, properties

示例代码中的许多地方我已经看到了@synthesize 变量的 2 种不同方式。例如，这里我采用 1 个示例按钮。@property（强，非原子）IBOutlet UIButton *logonButton;

1.@synthesize logonButton = _logonButton;

2.@synthesize 登录按钮；

在这两种方法中，推荐哪一种？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:26:00.493

**简答**

首选第一种方法。

**长答案**

第一个示例是声明为`logonButton`属性生成的 ivar 应该`_logonButton`代替与属性 ( ) 同名的默认生成的 ivar `logonButton`。

这样做的目的是帮助防止内存问题。您可能会不小心将一个对象分配给您的 ivar 而不是您的属性，然后它就不会被保留，这可能会导致您的应用程序崩溃。

*例子*

```
@synthesize logonButton;

-(void)doSomething {
    // Because we use 'self.logonButton', the object is retained.
    self.logonButton = [UIButton buttonWithType:UIButtonTypeCustom];

    // Here, we don't use 'self.logonButton', and we are using a convenience
    // constructor 'buttonWithType:' instead of alloc/init, so it is not retained.
    // Attempting to use this variable in the future will almost invariably lead 
    // to a crash.
    logonButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:34:55.430

1.  意味着为属性自动生成的 set/get 方法正在使用具有不同名称的 ivar - _logonButton。

    `-(void)setLogonButton:(UIButton)btn {
    _logonButton = [btn retain]; // or whatever the current implementation is
    }`

2.  表示为属性自动生成的 set/get 方法正在使用具有相同名称 logonButton 的 ivar。

    `-(void)setLogonButton:(UIButton)btn {
    logonButton = [btn retain]; // or whatever the current implementation is
    }`

# jquery - JQuery Mobile 和 Mediaelements.js？

> ID：11016957
> 
> 赞同：1
> 
> 时间：2012-06-13T14:24:01.857
> 
> 标签：jquery, jquery-mobile, mediaelement.js

JQuery Mobile 和 mediaelements 是否存在兼容性问题？每当我尝试使用播放器创建页面时，它的按钮都会变黑。

试试这个 html 页面： http: [//mt.ccnmtl.columbia.edu/majmin_mbl/m/test.html](http://mt.ccnmtl.columbia.edu/majmin_mbl/m/test.html)

如您所见，按钮是黑色的。如果我拿走 jquery 移动代码，它可以正常工作。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:06:53.207

这是一个样式问题，但由于 medieelement 在您启动它后呈现元素...... data-role 属性丢失了。因此，您实际上需要在像这样启动 mediaelement 后专门应用它。

```
$('audio,video').mediaelementplayer({});
$('button').attr("data-role","none"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:34:01.593

看起来 jquery mobile 正在尝试设置控件的样式。将 data-role="none" 添加到您不希望 jquery mobile 设置样式的任何控件。

# dos - MS DOS 中的 FIND 函数

> ID：11016961
> 
> 赞同：1
> 
> 时间：2012-06-13T14:24:09.433
> 
> 标签：dos

是否可以使用 find 函数搜索文件夹并返回具有任何字符串集合的文件的名称

例如，搜索文件夹并返回带有文本“Michael”、“Alan”、“Ben”等的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:31:00.870

您可以在DOS 和 Windows中使用[Findstr命令。](http://ss64.com/nt/findstr.html)

```
FINDSTR [options] [/F:file] [/C:string] [/G:file]
        [/D:DirList] [/A:color] [/OFF[LINE]] [string(s)] [pathname(s)]

Literal search

Search a text file mydir\*.* that contains the following

The quick brown fox The really ^brown^ fox

A literal search will ignore any special meaning for the search characters:

FINDSTR /C:"^brown" mydir\*.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:32:29.703

我不认为 DOS 有 FINDSTR，但如果你有，那么你可以使用以下内容查找内容包含“fox”或“dog”的文件的名称

```
findstr /ml "fox dog" "myDir\*" 
```

或者

```
findstr /m /c:"fox" /c:"dog" 
```

但是有一个讨厌的 FINDSTR 错误，当您有多个不同长度的文字搜索字符串并且搜索区分大小写时，可能会导致丢失应该匹配的文件。由于“狗”和“狐狸”的长度相同，所以你不会有问题。但我怀疑你真正的搜索字符串的长度会有所不同。希望您可以摆脱不区分大小写的搜索，因为这样可以避免错误：

```
findstr /mli "string1 string2IsLonger" "myDir\*" 
```

或者

```
findstr /mi /c:"string1" /c:"string2IsLonger" 
```

请参阅[为什么这个具有多个文字搜索字符串的 FINDSTR 示例找不到匹配项？](https://stackoverflow.com/q/8921253/1012053)有关该错误的更多信息。我还推荐阅读[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053).

如果您的任何搜索字符串包含空格，那么您将需要使用该`/c`选项。

如果您必须搜索许多搜索字符串，那么我建议您使用该`/g:file`选项。

您可以键入`HELP FINDSTR`或`FINDSTR /?`从命令行获取可用选项的完整列表。

# struts - 如何将客户端操作系统活动用户详细信息发送到服务器？

> ID：11016963
> 
> 赞同：0
> 
> 时间：2012-06-13T14:24:14.873
> 
> 标签：struts

我正在开发基于 Struts（1.3 版）的应用程序。

在我的应用程序中，每当创建新记录时，都会向在数据库中配置的审批者发送一封警报电子邮件。

警报电子邮件正文包含`<a href="http://server:7778/DOD/login.jsp">`用于访问应用程序的链接（例如 DOD）。

在这里，我的要求是当批准者点击链接时，如果他是有效的批准者，那么我必须直接显示主页而不是登录页面。但要显示主页，我必须验证他是否是有效的批准者。

审批者只需点击链接，而无需提供他的详细信息。在后台我必须得到他的操作系统用户名并发送到服务器端 JSP 组件。

我怎样才能达到这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:44:20.983

我通过将 Encoded Approver User id 作为请求参数添加到 Application Link 来实现上述要求。因此，当请求来自相应的批准者时，我将解码用户 ID 请求参数并验证用户 ID 是否存在于数据库中。如果它存在于数据库中，那么我将显示主页，否则我将显示未经授权的用户访问消息。

请询问我是否有任何机构不清楚解决方案。

# c# - c# zip文件到包含所有目录的用户？

> ID：11016967
> 
> 赞同：2
> 
> 时间：2012-06-13T14:24:29.820
> 
> 标签：c#, .net, zip

我有一个压缩文件并将它们下载到用户机器的功能。

但是，当它压缩文件时，它们位于几个文件夹中。

例如，如果我想压缩一个名为 test.doc 的文件，它位于 c:/document/the folder/test.doc

在压缩文件夹中将有“文档”文件夹和“文件夹”。我只是想要那里的文件

这是我的代码...

```
 public FileStreamResult DownloadDocs()
    {
        MemoryStream workStream = new MemoryStream();
        ZipFile zip = new ZipFile();
        string[] fileEntries = Directory.GetFiles(Server.MapPath(SettingManager.OnlineForms));
        foreach (string fileName in fileEntries)
        {
            FileInfo fi = new FileInfo(fileName);
            string name = Server.MapPath(SettingManager.OnlineForms + fi.Name);
            zip.AddFile(name);
        }

        zip.Save(workStream);
        workStream.Position = 0;

        FileStreamResult fileResult = new FileStreamResult(workStream, System.Net.Mime.MediaTypeNames.Application.Zip);
        fileResult.FileDownloadName = "OnlineForms.zip";

        return fileResult;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T14:29:22.807

换行

```
Zip.AddFile(name); 
```

到

```
Zip.AddFile(name, string.Empty); 
```

您也可以避免调用获取文件信息。文件名数组就足够了。

# ruby-on-rails - 设置此 form_for 的正确语法是什么？

> ID：11016968
> 
> 赞同：2
> 
> 时间：2012-06-13T14:24:43.750
> 
> 标签：ruby-on-rails

这有点复杂。但是我有命名空间的路由，这个表单负责处理由两个不同控制器共享的 Customer 模型。

**我的路线：**

```
namespace "self_service" do
  resources :customers 
```

**我实例化编辑表单的糟糕尝试**

```
= form_for [:self_service, @current_customer], action: 'update', method: :put do |f| 
```

**我的控制器**

```
class SelfService::CustomersController < SelfService::BaseController
  layout 'self_service'

  def edit
  end

  def update
  end
end 
```

这个实例化做了两件事是错误的：

1.  表单的 url 是`/customers/146/self_service`。但不应该反过来吗？不应该`self_service/customers/146/`吗？

2.  当我点击提交时，我得到一个`No route matches "/customers/146/self_service"`

**更新**

事实证明，这.. ：

```
resources :customers do
  member do
    get :self_service 
```

..与此相矛盾：

```
 namespace "self_service" do
    resources :customers
  end 
```

但这里困扰我的是..他们为什么要相互矛盾？一个应该是：

```
customers/:id/self_service 
```

另一个是：

```
self_service/customers/:id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:02:31.760

您使用的语法适用于嵌套资源。您不需要在 form_for 中指定命名空间。尝试：

```
= form_for @current_customer do |f| 
```

- 编辑 -

我的错。但是根据[这里](https://stackoverflow.com/a/10954924/285614)的答案，您所做的似乎是正确的。能不能试试

```
= form_for [:self_service, @current_customer] do |f| 
```

并在您的路线中，使用符号而不是字符串，即

```
namespace :self_service do
  resources :customers
end 
```

不确定这是否可行，但值得一试。

-- 编辑 2 --

我还在[这里](https://github.com/azizmb/so_example)使用命名空间资源设置了一个虚拟项目。我使用了 rails 脚手架生成器，这就是它生成的。它根据需要创建表单。您可以以此为例。

# python - 如何更新用户实体 Google 应用引擎的唯一属性？

> ID：11016970
> 
> 赞同：0
> 
> 时间：2012-06-13T14:24:50.257
> 
> 标签：python, google-app-engine

我正在尝试为 Google App Engine 样板制作编辑配置文件板

当用户编辑配置文件时。模型为的用户实体

```
class User(User):
"""
Universal user model. Can be used with App Engine's default users API,
own auth or third party authentication methods (OpenId, OAuth etc).
based on https://gist.github.com/kylefinley
"""

#: Creation date.
created = model.DateTimeProperty(auto_now_add=True)
#: Modification date.
updated = model.DateTimeProperty(auto_now=True)
#: User defined unique name, also used as key_name.
username = model.StringProperty(required=True)
#: User Name
name = model.StringProperty()
#: User Last Name
last_name = model.StringProperty()
#: User email
email = model.StringProperty(required=True)
#: Password, only set for own authentication.
password = model.StringProperty(required=True)
#: User Country
country = model.StringProperty()

@classmethod
def get_by_email(cls, email):
    """Returns a user object based on an email.

    :param email:
        String representing the user email. Examples:

    :returns:
        A user object.
    """
    return cls.query(cls.email == email).get() 
```

我通过特定用户会话的代码获得了用户对象

```
user_info = models.User.get_by_id(long(self.user_id))

#Made required changes to to user object such as country name lastname

#saved the entity

user_info.put() 
```

一切正常。用户实体已更新。但唯一实体不是。

我的主要问题是如何更新它们？

但是当我在管理视图中看到唯一表时

唯一表的图像是 [https://www.dropbox.com/s/sfbsn63023gsxil/unique.png](https://www.dropbox.com/s/sfbsn63023gsxil/unique.png)

此表未更新，但此表用于实体已更新。

用户表的图像是 [https://www.dropbox.com/s/sfhw5l5ixdmlq7c/user.png](https://www.dropbox.com/s/sfhw5l5ixdmlq7c/user.png)

我应该怎么做才能更新数据存储中的唯一属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:25:15.093

看起来您想使用用户名作为 key_name，但您的实现令人困惑。

首先，我没有看到您尝试更新唯一实体的任何代码。事实上，您的 User 实体和 Unique 实体之间没有任何联系。如果您希望更新唯一实体，您需要自己显式编码。

从更大的角度来看，我不确定你为什么需要一个独特的实体。您可能想要做的是在创建 User 对象时使用用户名作为 key_name。

# iphone - 编辑 xml 文件时界面构建器故事板编译器错误

> ID：11016974
> 
> 赞同：2
> 
> 时间：2012-06-13T14:24:58.453
> 
> 标签：iphone, xml, xcode, ipad

我在 iPhone/iPad 开发的故事板文件中手动添加元素。
事实上，我为 iPad 复制了故事板中的视图，并计算了 iPhone 的比例尺寸（1024x768 到 480x320）。
它可以正常工作，但是在其上添加包含多个图像视图时出现错误：

```
*CompileStoryboard iboniaIphoneLGT/LGT_iphone.storyboard
    cd /Users/imac/Desktop/WORKSPACE
    setenv IBSC_MINIMUM_COMPATIBILITY_VERSION 5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv XCODE_DEVELOPER_USR_PATH /Applications/Xcode.app/Contents/Developer/usr/bin/..
/Applications/Xcode.app/Contents/Developer/usr/bin/ibtool 
    --errors 
    --warnings 
    --notices 
    --output-format human-readable-text 
    --compile 
            /Users/imac/Desktop/WORKSPACE/build/Debug-iphonesimulator/LGT.app/LGT_iphone.storyboardc 
            /Users/imac/Desktop/WORKSPACE/iboniaIphoneLGT/LGT_iphone.storyboard 
    --sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk

Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool 
failed with exit code 255* 
```

消息不明确，这个消息的可能原因是什么？？？

雷克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:44:27.843

我收到此错误，最终发现当我在项目导航器中选择 xib 中使用的图像之一时，它没有在“目标成员资格”下的文件检查器中检查项目。一旦我检查了这一点，我就再也没有收到错误了。

因此，我建议检查 xib 中使用的所有图像和其他资源，并确保它们的目标成员资格正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T08:10:20.120

对我来说，解决方案只是删除我的一些警告。我更改的警告只是将 var:s 更改为 let:s 在 4 个地方未更改的属性上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T08:10:16.533

就我而言，这是由添加一个等宽约束引起的。它没有任何意义。我现在对 Xcode 非常警惕。

# android - 动态添加或删除 CheckBoxPreferences (Android)

> ID：11016976
> 
> 赞同：0
> 
> 时间：2012-06-13T14:24:59.267
> 
> 标签：android, dynamic, preferences, checkboxpreference

我有一个城市列表，我希望用户可以选择其中一个城市将其添加到偏好中。为此，他继续 CityActivity（代表一个城市），打开 OptionMenu 并选择“添加到收藏夹”。所有城市都有一个名称、一个 ID 和其他在这里不感兴趣的字段。

如果用户将一个城市添加到其收藏夹中（通过 optionsMenu =>“添加到收藏夹”），我希望在 PreferenceCategory“收藏夹”中出现一个复选框（已在我的 PreferenceScreen 中创建，但默认为空）。如果复选框被选中，我将应用特定的处理（这不是问题）。

最后，如果用户再次进入该城市并选择“从收藏夹中删除”，则具有该城市名称的 checkBoxPreference 必须消失......

我在 SO 上搜索了很长时间，但从未找到确切的解决方案……或者我不明白。

我目前的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
android:key="appSettings"
android:title="Préférences" >

<PreferenceCategory android:title="Accueil" >
    <ListPreference
        android:defaultValue="6"
        android:entries="@array/nbNewsTitles"
        android:entryValues="@array/nbNewsValues"
        android:key="nbNews"
        android:summary="Définit le nombre de news à afficher sur l&apos;onglet d&apos;accueil"
        android:title="Nombre de news" />
</PreferenceCategory>
<PreferenceCategory android:title="Modèles" >
    <ListPreference
        android:entries="@array/quickTitles"
        android:entryValues="@array/quickValues"
        android:key="navigationRapide"
        android:summary="Définit le nombre d&apos;échéances à sauter lors de la navigation rapide"
        android:title="Navigation rapide" />
</PreferenceCategory>
<PreferenceCategory android:title="Général" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:enabled="true"
        android:key="doubleTapMenu"
        android:summary="Affiche le menu lors d&apos;actions spécifiques sur l&apos;écran."
        android:title="Magic Menu" />
</PreferenceCategory>
<PreferenceCategory
    android:key="favoris"
    android:title="Prévisions par villes" >
</PreferenceCategory> 
```

```
public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:33:29.463

您可以从您的偏好屏幕中选择性地添加和删除 CheckBoxPreference。

IE

```
//please note that this is depreciated in new fragment based preference screens
PreferenceScreen mPreferenceScreen = getPreferenceScreen();
mPreferenceScreen.remove(mPreferenceScreen.findPreferenec("thatPreferenceKey")); 
```

然后通过动态创建 CheckBoxPreference 然后将其添加到 perferenceScreen 来添加。

```
mPreferenceScreen.addPreference(yourCBP); 
```

# javascript - 为什么我在 jQuery(function ($) { }); 中封装了一个 jQuery 函数

> ID：11016977
> 
> 赞同：7
> 
> 时间：2012-06-13T14:25:00.290
> 
> 标签：javascript, jquery

我遇到了一段看起来像这样的代码：

```
jQuery(function($) {
  $('#saySomething').click(function() {
    alert('something');
  });
}); 
```

我不太明白。为什么我不能简单地这样做：

```
$('#saySomething').click(function() {
   alert('saySomething');
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T14:26:56.253

```
jQuery(function ($) {...}); 
```

是以下的简写版本：

```
jQuery(document).ready(function ($) {...}); 
```

如果您不等待`document`准备好，您将绑定事件的元素将不存在于 dom 中，并且事件实际上不会被绑定。

或者，您可以等待`body`完成加载，但这将包括等待图像，这需要更长的时间来加载。

说实话，[你*不必*等待`document.ready`](https://stackoverflow.com/questions/4643990/jquery-is-document-ready-necessary/4644026#4644026)。`$('#saySomething').click(...)`如果您知道该元素存在于 DOM 中，则可以继续使用：

```
<button id="saySomething>Say Something!</button>
<script>
    jQuery('#saySomething').click(...);
</script> 
```

`jQuery(function ($) {...});`您应该知道最后一个细微差别。函数中的`$`参数用于别名`jQuery`to `$`，这将允许您`$`在函数内使用简写，而不必担心与其他库（例如原型）冲突。

如果您不等待，`document.ready`通常会看到用于别名 jQuery的[IIFE ：](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

```
(function ($) {
    $('#saySomething').click(...);
}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T14:27:01.337

```
jQuery(function($) { 
```

是一个捷径

```
jQuery(document).ready(function(){ 
```

这会一直等到文档处于构建 DOM 的“就绪”状态。然后，您的 jQuery 脚本可以处理整个页面而不会错过任何元素。

**但是**- 你可以在没有它的情况下运行 jQuery。如果您的脚本在头脑中，则您冒着选择尚未创建的元素的风险。*我在我想要影响的元素之后*立即在我的文档正文中使用了 jQuery，以尝试尽快对它们进行操作。这是一个不寻常的案例，我通常不会这样做。

使用 ready 函数的另一个原因 - 您可以多次运行它。如果包含多个脚本或有条件包含的代码，则可以有多个 ready() 函数。每个就绪块中的代码会一直保持，直到达到就绪状态，然后代码按照添加的顺序执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:42:43.350

这将取决于代码的上下文，但在 JavaScript 中有一个常见的设计实践是在命名空间或模块模式中封装变量和方法。此代码*可能*是该意图的派生词。

模块设计模式背后的原因归结为全局变量的复杂性和“破坏”的危险。

当同名的任何变量（或函数）被定义两次时，就会发生破坏。第二个定义将覆盖第一个，本质上是破坏它。

因此，将代码包装在一个结构中是一个经验法则，该结构将变量（和函数）与全局命名空间隔离开来。Douglas Crockford 很好地描述了这类场景。

这个[例子](http://javascriptplayground.com/blog/2012/04/javascript-module-pattern)展示了一个*稍微*更常见的化身，称为“闭包”：

```
var jspy = (function() {
    var _count = 0;

    return {
      incrementCount: function() {
        _count++;
      },
      getCount: function() {
        return _count;
      }
    };
})(); 
```

一开始它会让人迷失方向，但一旦你认识到它，它就会变成第二天性。关键是将 _count 变量封装为返回对象的私有成员，该对象具有两个可访问的方法。

这很强大，因为全局命名空间现在只包含一个 var (jspy)，而不是一个包含两个方法的变量。它强大的第二个原因是它保证了_count变量只能被两个方法（incrementCount，getCount）中的逻辑访问。

正如我所说，您的代码*可能*是这个经验法则的体现。

无论哪种方式，了解 JavaScript 中的这种模式都很重要，因为它为框架之间更强大的交互打开了大门，例如在 AMD 中异步加载它们。

这是一个很好的[命名空间](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)示例。

总而言之，有一个高级的 JavaScript 设计模式可以帮助你了解，相关术语是模块模式、命名空间模式。其他相关术语是关闭和 AMD。

希望有帮助。一切顺利！纳什

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T14:27:02.120

第一个示例在页面完全加载后执行。第二个示例直接执行（并且可能会失败）。

所以，第一个是简写：

```
$(document).ready(function(){
  // Do something after the page is loaded.
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T14:27:12.197

这是“文档加载”的简写，他们还使用了带有 $ 别名的简写“jQuery”，以避免使用 $ 符号与其他库发生冲突。

如果您不等待文件加载，事情可能会变得不可预测/不起作用。此外，如果您有命名冲突，事情就会简单地爆炸。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T14:27:17.873

`$(function() {})`是 jQuerys 文档就绪函数[http://api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)和[http://api.jquery.com/ready/](http://api.jquery.com/ready/)的缩写以获取更多信息

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-13T14:28:23.290

直接从[文档](http://api.jquery.com/jQuery/#jQuery3)复制并粘贴：

> `jQuery( callback )`回报：`jQuery`
> 
> 描述：绑定一个在 DOM 完成加载时要执行的函数。
> 
> ```
> version added: 1.0jQuery( callback )
> 
> `callback` The function to execute when the DOM is ready. 
> ```
> 
> 这个函数的行为就像`$(document).ready()`，因为它应该用于包装`$()`页面上依赖于准备好的 DOM 的其他操作。虽然从技术上讲，这个函数是可链接的，但链接它并没有太多用处。

请检查 api

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T14:29:27.157

这`jQuery(function(){...}`是`jQuery(document).ready(function(){...})`. Ready 事件在 DOM 准备就绪时触发，因此您可以确保您没有访问尚不可用的内容。

另一方面，如果您像在第二个代码段上那样绑定 click 方法。该代码将立即执行，因此您需要确保将其放置在`#saySomething`声明之后。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-13T14:27:22.883

`jQuery(function($) { ... });`是在 DOM (HTML) 完全呈现和可访问之前阻止您的代码执行的原因。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-15T16:34:43.973

如果您的 jquery 不需要完全加载 DOM，您可以安全地使用任何一种形式。为确保在执行 jquery 之前完全加载 DOM，请将 jquery 语句包装在`$(function...`.

`$(function(){ ...});`是`$(document).ready(function(){ ... });` [https://stackoverflow.com/a/6454695/209942](https://stackoverflow.com/a/6454695/209942) [http://jqfundamentals.com/chapter/jquery-basics的快捷方式](http://jqfundamentals.com/chapter/jquery-basics)

在所有 HTML 完全解析到内存中并且文档准备好与之交互之前，包裹在其中的 Jquery 代码`$(function`不会被执行。

如果在您的环境中，DOM 不能保证在渲染器命中您的 jquery 之前完全加载，那么您必须将 jquery 包装在`$(function`.

您还可以尝试这种替代的 DOM 就绪形式，它使 $ 成为局部变量，以避免与可能使用 $ 符号的其他变量发生冲突：

jQuery(函数($){...}); [https://stackoverflow.com/a/6454701/209942](https://stackoverflow.com/a/6454701/209942)

如果 jquery 代码未包含在 中`$(function`，它会工作吗？如果您的 DOM 已加载，则可以。DOM 加载取决于您加载 javascript 的方式。
[在 HTML 正文末尾引用外部 JavaScript 文件时如何调用 JavaScript 函数？](https://stackoverflow.com/questions/41210271/how-to-call-a-javascript-function-when-the-external-javascript-file-is-reference)

请注意，其他类似的表单不会等待 DOM 呈现。这是一个立即执行的函数字面量。它没有前导 $ 或前导 jquery，但有尾随 open+close 括号：

（功能（）{...}）（）;

# google-perftools - 谷歌 CPU 分析器错误：堆栈跟踪深度 >=2**32

> ID：11016991
> 
> 赞同：4
> 
> 时间：2012-06-13T14:25:25.437
> 
> 标签：google-perftools

我正在尝试使用 google CPU perf 工具分析我的程序，但是当我尝试分析 .prof 文件时，我收到如下错误：

```
At index 5519 (address 0126170):
node1.prof: stack trace depth >= 2**32 
```

一开始我想可能是它试图分析太多调用，所以我减少了程序运行的长度（基于时间步长，很容易缩短运行时间），但我仍然遇到同样的错误。任何解决此问题的帮助将不胜感激。

# python - 使用 Sunburnt+Solr 创建动态大小的 OR 查询

> ID：11016994
> 
> 赞同：4
> 
> 时间：2012-06-13T14:25:35.897
> 
> 标签：python, solr, sunburnt

我正在尝试 python Solr 接口 Sunburnt ，我遇到了一个我似乎无法弄清楚的小问题。在我的搜索字段中，我想接受我放入数组中的任意数量的单词（例如“Music 'Iron Maiden'”-> ['Music', 'Iron Maiden']。我已经想通了（使用shlex）。

问题是 ORing 术语的 Sunburnt 语法是

```
 response = si.query(si.Q(tag = 'Music') | si.Q(tag = 'Iron Maiden')) 
```

我怎样才能遍历我的搜索词列表并最终得到类似上面的内容？或者还有其他我不知道的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T12:02:16.257

你真正想做的是：

```
query = si.query()

for word in words:
    query |= si.Q(word) 
```

或者，作为单行

```
query = reduce(operator.or_, [si.Q(word) for word in words]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:08:01.460

你能遍历你的数组并构造查询表达式吗？

通常类似于

```
expr=""
for word in words:
    expr = expr + "si.Q(tag =" + word + ") |"

response = si.query(expr[:-1]); #to remove the dangling "|" character 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:54:13.813

我想到了！该`eval()`功能是关键：

```
words = shlex.split(request.args.get('q', ''))

qrystr=""
for word in words:
    qrystr = qrystr + "si.Q(title_s = '*" + word.replace("\0", "") + "*') | "
    # Each word needs to be stripped of null characters for the eval to work

qrystr = qrystr[:-2]; 

results = si.query(eval(qrystr))
finalresults = results.execute() 
```

# jquery - BackboneJS Single Page Sites: Attaching and Cleaning Up Views

> ID：11016996
> 
> 赞同：2
> 
> 时间：2012-06-13T14:25:48.830
> 
> 标签：jquery, backbone.js, coffeescript

I want to use BackboneJS for single page sites. The structure I am thinking of using is have a `div#pageWrapper` for loading views into

```
# a simple example view
class View1 extends Backbone.View
    render: ->
        @$el.html @template()

class AppRouter extends Backbone.Router
    routes:
        "": "home"
        "view1": "view1"
        "view2": "view2"

    home: ->
        # init, render, attach to body. repeat for other controller actions
        view = new HomeView()
        view.render()
        $("#pageWrapper").html view.el 
```

Is the the usual way of doing this? Or is there some kind of design pattern alreay available? I havent handled the clean up, do I need it? Or is it a side effect of simply replacing the page wrappers' html?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:45:30.940

Yes, you definitely need to handle closing of views and removing of them properly. If you don't, you'll end up with memory leaks and "zombie" views - views that should be dead, but aren't.

I've written about it extensively:

[http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

[http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)

The gist of it is that you should manage cleaning up your view within your view directly, and then use a standardized process to call your view's cleanup method.

For example, I use an object to show / remove / replace my views on the screen:

```
 Region = (function (Backbone, $) {
    var currentView;
    var el = "#mainregion";
    var region = {};

    var closeView = function (view) {
        if (view && view.close) {
            view.close();
        }
    };

    var openView = function (view) {
        view.render();
        $(el).html(view.el);
        if (view.onShow) {
            view.onShow();
        }
    };

    region.show = function (view) {
        closeView(currentView);
        currentView = view;
        openView(currentView);
    };

    return region;
})(Backbone, jQuery); 
```

Just be sure your view has a `close` method in it, and this code will clean it up for you. A simple `close` implementation would look like this:

```
 Backbone.View.prototype.close = function(){
  this.remove();
  this.unbind();
  if (this.onClose){
    this.onClose();
  }
} 
```

and now all of your views have this close method.

See the articles for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:42:13.790

Yes, the usual way of doing a single page site is to have some html-element within which you render the page to be shown at any given moment.

As for cleanup. You should clear the container element and within each View to be cleaned up, you should unbind all events concerning that view and if you're using for example ModelBinding, you should unbind that as well. So basically

Cleanup all subviews -> unbind events concerning this view -> clear html

Handling cleanup is important to avoid having ghost views and events messing things up.

# javascript - Javascript - 在浏览器中呈现动态生成的 XML

> ID：11016998
> 
> 赞同：0
> 
> 时间：2012-06-13T14:25:53.830
> 
> 标签：javascript, xml, browser

我正在使用 JQuery 创建一个 XML 字符串。我想打开一个新窗口向用户显示此字符串，以便他将其保存为 XML 文件。

我没有服务器端，我希望这个 Javascript 脚本与 Firefox 和 Internet Explorer 浏览器兼容。

我发现了很多东西，但没有一个真的很好用。

```
uriContent="data:application/xml," + encodeURIComponent(xmlContent);
var newWindow=window.open(uriContent,'_blank','toolbar=0,location=0,directories=0,status=0, scrollbars=1, resizable=1, copyhistory=1, menuBar=1, width=640,height=480, left=50, top=50'); 
```

或者对于 IE：

```
var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async = "false";
xmlDoc.loadXML(xmlContent);
var newWindow = window.open('','_blank','toolbar=0, location=0, directories=0, status=0, scrollbars=1, resizable=1, copyhistory=1, menuBar=1, width=640, height=480, left=50, top=50', true);
 newWindow.document.writeln(xmlDoc.documentElement.xml);
 newWindow.document.close(); 
```

第一个解决方案几乎适用于 Firefox，但不适用于 IE：

![一个数据：FF中的url](../Images/c2767d66f97f8616c41d7ba4848337e8.png)

第二个源代码打开一个带有 XML 内容的窗口，但 IE 无法将其识别为 XML……所以用户必须自己显示源代码。这不是很方便。

![空的 IE 窗口](../Images/96338f0e5774669c44ec620ad123586f.png)

有没有人有办法解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:37:44.440

如果您将 XML 视为内容会怎样？

```
var newWindow = window.open('','_blank','toolbar=0, location=0, directories=0, status=0, scrollbars=1, resizable=1, copyhistory=1, menuBar=1, width=640, height=480, left=50, top=50', true);
var preEl = newWindow.document.createElement("pre");
var codeEl = newWindow.document.createElement("code");
codeEl.appendChild(newWindow.document.createTextNode(xmlContent));
preEl.appendChild(codeEl);
newWindow.document.body.appendChild(preEl); 
```

...然后您可以使用[Google Code Prettify](http://code.google.com/p/google-code-prettify/)或[SyntaxHighlighter 之](http://alexgorbatchev.com/SyntaxHighlighter/)类的东西来添加您需要的任何突出显示。