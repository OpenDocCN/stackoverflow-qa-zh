# StackOverflow 问答 11710000-11710999

# r - 使用 R 翻译“编码”表

> ID：11710000
> 
> 赞同：-1
> 
> 时间：2012-07-29T14:27:05.480
> 
> 标签：r

我在使用**R**将编码表“翻译”回来时遇到问题。所以我有一个表格，表格元素由 XX、XY、YY 组成。我有第二个表 (.csv)，其中 X 和 Y 的正确含义 - 所以它可能看起来像，如果 X=1 和 Y=2，

XY 转换为 12 XX 转换为 11 ...

**任何人都可以暗示在R**中编写这样一个程序/一段代码的良好起点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:00:49.887

这与查找表略有不同，因为您实际上是在正则表达式和替换每个元素的部分。qdap (Quantitative Discourse Analysis Package) 有一个`mgsub`(multiple `gsub`) 函数可以轻松处理这个问题。

```
library(qdap)

#recreate scenerio with quick character vector (no need for quotes)
z <- factor(qcv(XX,XY,YY))  
#replace all X and Ys with 1 and 2
mgsub(pattern = c("X", "Y"), replacement = c(1, 2), text.var = z)

#Even better if you have the code book read in, say it looks like this:
code.book <- data.frame(symb = c("X", "Y"), replacement = c(1, 2))

# > code.book
#   symb replacement
# 1    X           1
# 2    Y           2

mgsub(code.book$symb, code.book$replacement, z) 
```

# .net - 如何保存图像文件？

> ID：11710001
> 
> 赞同：1
> 
> 时间：2012-07-29T14:27:14.613
> 
> 标签：.net, vb.net

我有这段代码：

```
 Dim myStream As Stream = Nothing
    Dim openFileDialog1 As New OpenFileDialog()

    openFileDialog1.InitialDirectory = "C:\Users\Desktop\Sample Pictures"
    openFileDialog1.Filter = "Pictures|*.jpg|Text|*.txt"

    If openFileDialog1.ShowDialog() = System.Windows.Forms.DialogResult.OK Then
            myStream = openFileDialog1.OpenFile()
            If (myStream IsNot Nothing) Then

              ' Insert code to read the stream here.

            End If
        End Sub
    End Class 
```

我需要将**myStream**中的文件复制到某个目标文件夹。知道如何实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:37:24.870

您可以使用：

```
Image img = Image.FromStream(myStream); 
```

或者

```
Image img = Image.FromFile(path); 
```

然后，通过以下方式保存：

```
img.Save("new location"); 
```

[示例在 C# 中]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:42:03.033

假设`myDestinationDir`是您要复制文件的路径，那么

```
If openFileDialog1.ShowDialog() = System.Windows.Forms.DialogResult.OK Then 
    ' Extract the filename part from the full filename returned by openDialog.'
    Dim selectedFile As String = Path.GetFileName(openFileDialog1.FileName)
    ' Append to the destinationDir the filename extracted'
    Dim destFile As String = Path.Combine(myDestinationDir, selectedFile)
    ' Copy with overwrite (if overwrite is not desidered, use the overload with False as 3 arg'
    System.IO.File.Copy(openFileDialog1.FileName, destFile)
End Sub 
```

这会将选定的文件复制到目标文件夹，覆盖现有的同名文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:22:28.093

这是我为一些实验软件编写的真实代码片段。

```
 Dim strPath As String
    Dim fStream As FileStream
    Dim fileName As String

    Try
   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    'Get path from textbox
    strPath = txtSavePath.Text.ToLower

    'Check directory existence, if not, create it
    If Directory.Exists(strPath) Then

    Else
        Try
            Directory.CreateDirectory(strPath)
        Catch ex As Exception

            MessageBox.Show("Error in Creating Directory, Code : " & ex.ToString)
        End Try

    End If

    'Set current active directory
    Directory.SetCurrentDirectory(strPath)

    'Create Filename
    fileName = txtFileName.Text.ToUpper & "_" & DateTime.Now.ToString("yyyyMMdd_HH_mm_ss")

    'Write/Create file
    fStream = File.Open(fileName & ".png", FileMode.Create)
    fStream.Write(byteData, 0, nLength)
    fStream.Close()
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    'Display On Window
        picGraphDisplay.BackgroundImage = Image.FromFile(fileName & ".png")
        txtSavedFileName.Text = fileName & ".png"
    Catch ex As Exception
        CheckVisaStatus(errorStatus)
        MessageBox.Show(ex.ToString)

    End Try 
```

在这种情况下，文件流正在将图像的字节数据写入文件。从哪里获取字节图像取决于您。在这种情况下，一个好主意是为您的文件使用一个特定的名称，在这里通过使用系统的`DateTime.Now`.

希望它给了你一些想法。干杯

# web-services - 测试 Soap 服务和 XML 消息格式

> ID：11710003
> 
> 赞同：0
> 
> 时间：2012-07-29T14:27:51.907
> 
> 标签：web-services, web-applications, soap, webservices-client

嗨，我是 SOAP Web 服务的新手，我正在阅读一本书[Web Services Essentials(O'Reilly XML)](https://rads.stackoverflow.com/amzn/click/com/0596002246)。我读了很多书，感觉对 SOAP Web 服务很熟悉我运行了一些示例。在本书第 6 章中，有一个名为 GLUE 的工具，如果我们传递 Web 服务的 wsdl 文件 url 并在 SOAP Web 的命令行工具上调用一个方法服务然后它给出 Web 服务的输出。经过一些配置更改后，它将给出 SOAP Web 服务和 SOAP 客户端之间传递的消息格式。任何人都可以建议其他替代命令行工具，这些工具给出在 Web 服务之间传递的 xml 消息和client.please建议一些测试soap web服务的好工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:33:35.857

[SoapUI](http://www.soapui.org/)是一个免费的**GUI**工具，非常适合测试 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:25:39.450

如果您想坚持使用命令行实用程序，可以使用 curl。

例子：

创建 request.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?> 
   <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"                   
               xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
     <soap:Body>
       HERE COMES THE PAYLOAD
     </soap:Body>
   </soap:Envelope>

curl -H "Content-Type: text/xml; charset=utf-8" \
     -H "SOAPAction:http://www.my_amazing_webservice/DoSomethingAmazing"    \
     -d@request.xml    \
     http://www.my_amazing_webservice/amazing_stuff.asmx    \
     > output.xml 
```

这就对了。希望能帮助到你。

# javascript - 如何修改 jcrop 以支持黑莓触控板？

> ID：11710011
> 
> 赞同：0
> 
> 时间：2012-07-29T14:28:44.300
> 
> 标签：javascript, blackberry, crop, jcrop, trackpad

我已经联系了开发人员，他表示我将自己修改代码以支持这种方法，因为当前编写的代码对黑客攻击不是很友好......我试图修改但没有 100% 成功.

目前，JCrop 正在使用 jquery 来跟踪 .mousedown 以开始选择，并使用 .mouseup 来接受/停止选择。当您使用 jcrop 单击触控板时，黑莓设备（带触控板）上会发生什么，它会在您移动光标时开始绘制选择（您不能单击（按住）并在触控板上拖动它更多的是单击事件）。问题是当您再次单击时，它会删除选择并开始从当前光标位置重新绘制它。在我看来，JCrop 正在使用 mousedown 来跟踪单击和拖动选择过程，然后使用 mouseup 来释放选择并保留裁剪框。

我考虑分配一个变量，如 clickCount 跟踪点击和触发事件的函数。因此，每次用户单击时，它都会运行一个函数来跟踪 clickCount 并触发开始选择或完成选择事件。

以下是对 .mousedown 和 .mouseup 的所有引用：

```
var $trk = newTracker().width(boundx + (bound * 2)).height(boundy + (bound * 2)).css({
      position: 'absolute',
      top: px(-bound),
      left: px(-bound),
      zIndex: 290
    }).mousedown(newSelection);

function dragDiv(ord, zi) //{{{
      {
        var jq = $('<div />').mousedown(createDragger(ord)).css({
          cursor: ord + '-resize',
          position: 'absolute',
          zIndex: zi
        });

        if (Touch.support) {
          jq.bind('touchstart', Touch.createDragger(ord));
        }

        $hdl_holder.append(jq);
        return jq;
      }

var $track = newTracker().mousedown(createDragger('move')).css({
        cursor: 'move',
        position: 'absolute',
        zIndex: 360
      });
function toFront() //{{{
      {
        $trk.css({
          zIndex: 450
        });
        if (trackDoc) {
          $(document)
            .bind('mousemove',trackMove)
            .bind('mouseup',trackUp);
        }
      } 
      //}}}
      function toBack() //{{{
      {
        $trk.css({
          zIndex: 290
        });
        if (trackDoc) {
          $(document)
            .unbind('mousemove', trackMove)
            .unbind('mouseup', trackUp);
        }
      } 
 if (!trackDoc) {
        $trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);
      } 
```

帮助/想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:43:17.537

类似这样的事情怎么样：

```
var isDragging = false;

function onMouseDown(event) {
    isDragging = !isDragging;
}

function onMouseUp(event) {
    if (isDragging) {
        event.preventDefault();
    }
}

window.addEventListener('mousedown', onMouseDown, false);
window.addEventListener('mouseup', onMouseUp, false); 
```

这样，从技术上讲，onMouseUp 应该只每隔*一次*触发一次，可能会阻止*释放*触发器停止选择。当然，这需要与您的代码进行更深入的集成。

# linux-kernel - 将新的驱动程序代码添加到 linux 源代码

> ID：11710022
> 
> 赞同：21
> 
> 时间：2012-07-29T14:30:12.913
> 
> 标签：linux-kernel, linux-device-driver

我开发了一个 Linux 设备驱动程序。到目前为止，我正在使用 arm 的交叉编译器在 Ubuntu 12.04 上编译它，然后将它安装到我的 arm Linux 映像中。但是我想学习如何在Linux源代码中添加它，并通过arm Linux的配置给出添加/删除的选项，以便我可以用Linux源代码编译来编译它？

有任何想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-30T11:07:13.270

要在 arm 架构中交叉编译您自己的驱动程序，您必须按照下面提到的一些步骤进行操作。

1.  在驱动程序（位于 Linux 源代码中）中为您的驱动程序创建一个类似 my_drvr 的目录，并将您的驱动程序 (my_driver.c) 文件放在该目录中。它看起来像 `/linux_source_code/drivers/my_drvr/my_driver.c`

2.  在您的驱动程序目录中创建一个 Makefile（使用 vi 任何编辑器）并在此放置`obj-$(CONFIG_MY_DRIVER) += my_driver.o` 并保存此文件。这看起来像`/linux_source_code/drivers/my_drvr/Makefile`

3.  在您的驱动程序目录中创建一个`Kconfig`文件（使用 vi 任何编辑器）并在此放置

    ```
    配置 MY_DRIVER
    tristate "my driver" // 提供您的驱动程序描述，如供应商名称等。
    依赖于 ARM
    默认 y 如果 ARM
    帮助
      我的驱动模块。
    ```

4.  保存这个文件，这看起来像`/linux_source_code/drivers/my_drvr/Kconfig`

5.  在 Linux 源驱动程序和文件中添加`Makefile`和文件，它们位于 和`Kconfig``Makefile``Kconfig``/linux_source_code/drivers/Makefile``/linux_source_code/drivers/Kconfig`

6.  在 Makefile 的最后一行添加下面

    ```
    obj-y += my_drvr/
    ```

    或者

    ```
    obj-$(CONFIG_MY_DRIVER) += my_drvr/
    ```

7.  在 Kconfig 文件的最后一行添加下面

    ```
    源“驱动程序/my_drvr/Kconfig”
    ```

8.  最后必须将`Kconfig`文件添加到特定于体系结构的配置文件中，该文件将在`kernel_source/arch/arm/configs/--defconfig`最后一行的下面添加

    ```
    CONFIG_MY_DRIVER=y
    ```

注意：- 最后一步将根据您的架构而有所不同，因此请注意。现在您可以使用 make 命令编译您的驱动程序。（例如：sun7i_defconfig）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T17:35:41.257

您需要在内核源子目录的 Kconfig 文件中添加一个配置选项，您的设备驱动程序将被放置在其中。您还需要向该目录的 Makefile 添加行。显然，您也需要将源文件复制到该目录。

由于您的驱动程序依赖于 ARM 架构，因此在 Kconfig 中，您需要添加一个“取决于”选项，例如：

```
config SND_ARMAACI
tristate "ARM PrimeCell PL041 AC Link support"
depends on ARM_AMBA 
```

你的 Makefile 看起来像

```
obj-$(CONFIG_SND_ARMAACI)   += snd-aaci.o
snd-aaci-objs       := aaci.o 
```

因此，现在当您在内核源代码树中执行 make menuconfig 时，您将找到您放入 Kconfig 的配置选项，您将能够选择将其编译到内核中或构建为模块或根本不编译。

在您的驱动程序适用的子系统目录中查找示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T14:32:00.707

创建补丁并添加应用此补丁作为解压缩内核 tarball 之后和配置/编译之前的一个步骤。

# macos - 在 Macbook 上组织多个网站

> ID：11710024
> 
> 赞同：0
> 
> 时间：2012-07-29T14:30:18.363
> 
> 标签：macos, apache, webserver

完成向OS X (Lion)***添加***另一个网站需要哪些步骤？

我想将 2 个网站组织在“站点”下的 2 个文件夹中，但不知道如何到达那里。如下图所示，MB 当前的“默认”（第一个）网站分布在站点中。我担心将此默认站点放入站点文件夹中，将其称为“siteA”会导致它消失。

这些网站***不在***此 MB 上。（好吧，他们是，...）它被用于 BBEdit 中的开发、查看和测试。

执行以下步骤后，URL`http://bella`回复 Forbidden - You don't have permission to access / on this server。（？？）

欢迎提出建议。提前致谢。

到目前为止，我已经添加或修改了：

```
-- private/etc/hosts (added the following)
127.0.0.1 bella

-- private/etc/apache2/http.conf (uncommented 2nd line)
# Virtual hosts
Include /private/etc/apache2/extra/httpd-vhosts.conf

-- /private/etc/apache2/extra/httpd-vhosts.conf (added 2 VirtualHost blocks)
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
   DocumentRoot "/Library/WebServer/Documents"
   ServerName localhost
</VirtualHost>

<VirtualHost *:80>
   DocumentRoot "/Users/dolan2go/Sites/Bella"
   ServerName bella
</VirtualHost> 
```

我的 Macbook 目前的目录结构如下：

![目录结构](../Images/b152c08a731e1d2b7175409df241b64d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:08:11.493

必须进行一些修改才能使其正常工作。希望在“站点”文件夹中有文件夹“FirstSite”和“Bella”。（由于 HD 和 SSD 硬件模块，我的用户目录结构已更改）

1.  将 hosts.conf 文件修改为：（最后 2 行 - 请参阅下面的注释）

    ```
    127.0.0.1 bella.local
    127.0.0.1 firstSite.local 
    ```

2.  取消注释该行以使用 vhosts.conf 文件（如原始问题所示）

3.  将 httpd-vhosts.conf 修改为：

    ```
    # Localhost first
    <VirtualHost *:80>  
       DocumentRoot "/Volumes/HDD 1/<username>/Sites"
       ServerName localhost
    </VirtualHost>

    # local test Sites
    <VirtualHost *:80> 
       DocumentRoot "/Volumes/HDD 1/<username>/Sites/FirstSite"
       ServerName firstSite.local
    </VirtualHost>

    <VirtualHost *:80> 
       DocumentRoot "/Volumes/HDD 1/<username>/Sites/Bella"
       ServerName bella.local
    </VirtualHost>

    # Allow from localhost only or other directives
    <Directory "/Volumes/HDD 1/<username>/Sites/FirstSite">
        Order Deny,Allow
        Allow from 127.0.0.1
        Deny from all
    </Directory>

    <Directory "/Volumes/HDD 1/<username>/Sites/Bella">
        Order Deny,Allow
        Allow from 127.0.0.1
        Deny from all
    </Directory> 
    ```

`http://bella.local`现在我可以使用&访问两个站点的本地版本`http://firstSite.local`（我决定添加本地以帮助区分本地和远程版本。）

twtwtw 3/4 在[Local Web Server for Lion](https://discussions.apple.com/thread/3216810?start=0&tstart=0)的页面下方的回复确实帮助解决了这个问题。

# ruby-on-rails - Rails：搜索过滤器模型属性

> ID：11710025
> 
> 赞同：2
> 
> 时间：2012-07-29T14:30:43.530
> 
> 标签：ruby-on-rails, search, full-text-search, filtering, categories

我需要在我的搜索表单中添加过滤搜索功能。这有点像社交网络。我的应用程序有社团，社团有类别（时尚、新闻、工厂、ecc）。我需要我的搜索来过滤这些类别。

自从我看到有很多搜索宝石（solr、thinking sphinx、elasticsearch、sunspot）并且浏览所有这些宝石有点不知所措，有人完成了这样的任务吗？有什么建议吗？

搜索表单应执行的操作：

1）搜索社团名称（我可以用 Sunspot 处理）
2）按用户在选择标签中选择的类别过滤所有社团（类似[这样](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_option)）
3）如果文本字段和选择都已填写，则搜索仅在所选类别中的名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:36:23.857

我最近发现的一个伟大的宝石是[Ransack](https://github.com/ernie/ransack)，Ryan Bates 有一个[RailsCasts 用于](http://railscasts.com/episodes/370-ransack).

这是一个如何使用它的例子。

```
<%= search_form_for @query do |f| %>
  <!-- filter: `society_name` contains text -->
  <%= f.label :society_name_cont %>
  <%= f.text_field :society_name_cont %>

  <!-- filter: `category_id` equals -->
  <%= f.label :category_id_eq %>
  <%= f.collection_select :category_id_eq, Category.all, :id, :name %>
<% end %> 
```

如果您不熟悉`collection_select`Rails 指南，将有助于 < [http://guides.rubyonrails.org/form_helpers.html#making-select-boxes-with-ease](http://guides.rubyonrails.org/form_helpers.html#making-select-boxes-with-ease) >。

# php - php钩子核心函数

> ID：11710026
> 
> 赞同：2
> 
> 时间：2012-07-29T14:30:44.890
> 
> 标签：php, security, hook, core

我想在执行之前挂钩/或替换标准核心功能，例如，我将阻止这两个`include`和`require`访问任何脚本。有什么方法可以在没有任何额外的 .dll 的情况下实现它？或者另一种情况`is_array($myarr);`是我会挂钩`array($myarr) === $myarr;`（*看起来更快*）以避免创建额外的类和函数。

Ps 和另一个问题：如何在一段时间后阻止所有 php 执行？我有带有 php 部分的 html 模板`<?=$myvar?>`我想在我的脚本结束工作时完全防止短的 sintax 和执行，我必须尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:57:18.047

关于标准功能的挂钩：没有外部模块就无法做到这一点。[APD PECL 模块](http://www.php.net/manual/en/ref.apd.php) 将完成这项工作。

```
rename_function('require', 'internal_require'); // saving reference to original function
override_function('require', '$filename', 
                  'print "require called"; internal_require($filename);'); 
```

第二个问题不是很清楚。你想挂接标准`is_array`函数、`array()`词法构造还是`(array)`类型转换？

关于停止 php 解释：看看[__halt_compiler](http://php.net/manual/en/function.halt-compiler.php)函数。但请记住，后续的 php 块将只是嵌入到 HTML 中（因此每个人都可以看到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:31:57.923

如果要禁用功能，可以使用安全模式，但不推荐使用，不推荐使用。正如 madfriend 所说， __halt_compiler 只是将它下面的所有内容作为文本发送。请记住，它只能从最外层范围调用 - 即不能在花括号内（如果、循环、函数等）

# c - 通过 C 程序更改环境变量

> ID：11710029
> 
> 赞同：1
> 
> 时间：2012-07-29T14:30:59.583
> 
> 标签：c, variables, posix, environment

任何人都知道如何通过 C 程序更改 Linux 环境变量？我不想更改为执行该程序而复制的环境变量。我希望能够从 C 程序更改它的值，然后在 linux 中执行命令“env”时，我可以看到它的值发生了变化。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:36:05.587

> 我不想更改为执行该程序而复制的环境变量。我希望能够从 C 程序中更改它的值，然后在 linux 中执行命令“env”时，我可以看到它的值发生了变化

你不能。**你只能改变你自己进程的环境**。你永远无法接触到父母的环境。换句话说，您所做的任何事情（设置/清除环境变量、更改本地目录等）对于父进程都是不可见的。

该标准明确规定：

> **setenv() 函数应在调用进程**的环境中更新或添加变量。

改变父母环境的唯一方法是让它自己去做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:33:44.330

请参阅 POSIX 函数`setenv`和 `putenv`.

`setenv` [http://pubs.opengroup.org/onlinepubs/009604599/functions/setenv.html](http://pubs.opengroup.org/onlinepubs/009604599/functions/setenv.html)

`putenv` [http://pubs.opengroup.org/onlinepubs/009604599/functions/putenv.html](http://pubs.opengroup.org/onlinepubs/009604599/functions/putenv.html)

正如 POSIX 所说*， setenv() 函数优于此函数。(putenv)*

> 我不想更改为执行该程序而复制的环境变量。

正如@cnicutar 在他的回答中所说，您只能更改当前进程的环境变量，而不能更改其父进程或其他进程的环境变量。

# javascript - 解释为什么这个奇怪的 javascript 代码有效

> ID：11710030
> 
> 赞同：1
> 
> 时间：2012-07-29T14:31:02.077
> 
> 标签：javascript

```
function get_denomination(){
    return "Fabrice Petard";
}

function auto_flatterie(flatterie){ // 
   return this.get_denomination() + " est " + flatterie + " !";
}

console.debug(auto_flatterie("le plus intelligent")); // affiche  "Fabrice Petard est le plus intelligent !" 
```

您能解释一下“this”的含义以及为什么 this.get_denomination 不会引发任何错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:34:11.520

`this`绑定到`window`对象。该方法`get_denomination`在`window`对象上注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T14:34:37.710

在您发布的代码中，`this`是全局`window`对象。当您在默认全局范围（如 ）中创建函数时，`get_denomination`它会作为属性附加到`window`对象。

# javascript - 如何拦截 UIWebView 中链接的长按？

> ID：11710037
> 
> 赞同：7
> 
> 时间：2012-07-29T14:31:55.110
> 
> 标签：javascript, iphone, ios, ipad, uiwebview

我想提供自己的操作表或弹出框，不想要默认系统。

请注意：

1.  我问的是**长按**不**点击**。
2.  我需要知道被长按的链接的 URL。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T20:48:17.257

为了提供您自己的操作表或弹出框，首先您需要禁用默认的上下文菜单。您可以使用以下代码在 javascript 中执行此操作`webViewDidFinishLoad`

```
[webView stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitTouchCallout='none';"]; 
```

禁用默认行为后，您可以创建自己的自定义操作表/弹出框。

以下链接中描述了一种可能的方法：

[自定义 UIWebView 的上下文菜单](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)

# php - Codeigniter $this->db->reconnect(); 用法

> ID：11710039
> 
> 赞同：4
> 
> 时间：2012-07-29T14:32:05.483
> 
> 标签：php, mysql, codeigniter

我**没有**自动加载数据库，因为我的应用程序的大多数页面**都不**需要数据库处理，否则整个事情会变慢。我想要做的不是在已经有一个连接的情况下建立与数据库的新连接，而是使用它而不是打扰 server-db。那么如何在`$this->db->reconnect();`下面的示例中实现呢？我阅读了用户指南，但没有确切的例子。

**注意：**如果我需要使用`$this->db->close();`然后`$this->db->initialize();`请帮助我实现它们，因为我听说`$this->db->reconnect();`禁用自动加载的调用会引发错误。

我正在使用 CI 2.1

谢谢

```
class Test_model extends CI_Model
{
 public function __construct()
 {
  parent::__construct();

  $this->load->database();
 }

 public function function_a($id)
 {
  $this->db->protect_identifiers('year');

  $sql = "SELECT * FROM year WHERE id = ?";

  $data['dbquery'] = $this->db->query($sql, array($id));

  return $data['dbquery'];
 }

 public function function_b($id)
 {
  $this->db->protect_identifiers('month');

  $sql = "SELECT * FROM month WHERE id = ?";

  $data['dbquery'] = $this->db->query($sql, array($id));

  return $data['dbquery'];
 }

 public function function_c($id)...
 public function function_d($id)...
 public function function_e($id)...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T15:09:47.100

基本上，如果您保持连接`pconnect=false`，`database.php`则连接将在每个脚本执行结束时自动关闭，默认情况下它设置为`false`.

好吧，如果你愿意，那么你可以使用

```
$this->db->close(); 
```

在每次查询执行后手动关闭连接并使用

```
$this->db->initialize(); 
```

在任何查询执行之前关闭连接后再次初始化连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T14:44:57.057

最好的方法是关闭连接并手动重新连接：

```
$this->db->close();
$this->db->initialize(); 
```

# android - 自动展开并关注 SearchView

> ID：11710042
> 
> 赞同：79
> 
> 时间：2012-07-29T14:32:26.140
> 
> 标签：android, search, focus, expand

我正在开发一个应用程序，用户在其中按下“搜索”图标，`ActionBar`并`SearchView`在屏幕顶​​部显示 a。

我的问题是它既`SearchView`没有聚焦也没有展开，因此用户必须按下搜索按钮`Searchview`才能使其展开并带出键盘。

这应该如何解决？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-30T17:34:44.507

您还可以调用 expandActionView() 方法来强制它：

```
@Override
public boolean onCreateOptionsMenu( Menu menu )
{
    super.onCreateOptionsMenu( menu );

    MenuItem searchMenuItem = menu.findItem( R.id.mi_search ); // get my MenuItem with placeholder submenu
    searchMenuItem.expandActionView(); // Expand the search menu item in order to show by default the query

    return true;
} 
```

操作栏布局中的搜索项：

```
<item
        android:id="@+id/mi_search"
        android:icon="@drawable/abs__ic_search_api_holo_light"
        android:title="@string/search"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        /> 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-07-29T14:41:43.140

要使 SearchView 默认展开，请在初始化时调用[setIconifiedByDefault(false)](https://developer.android.com/reference/android/widget/SearchView#attr_android:iconifiedByDefault)`onCreateOptionsMenu(..)` （例如 in或`onPrepareOptionsMenu(..)`）。我发现在大多数情况下，这会自动给它焦点，但如果不是简单地调用`requestFocus()`它。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-04-26T09:48:02.870

如果你想拥有它`iconifiedByDefault`，这对我有用。`setFocusable`并且`setIconified`需要。

```
 SearchView searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
    searchView.setIconifiedByDefault(true);
    searchView.setFocusable(true);
    searchView.setIconified(false);
    searchView.requestFocusFromTouch(); 
```

更新：如果您使用*`android.support.v7.widget.SearchView`*我们的行为非常不同。`clearFocus`如果您不想一直弹出键盘，则需要。由于某种原因，在使用 appcompat 时，菜单会一直重新创建。

```
SearchView searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
searchView.setIconified(false);
searchView.clearFocus(); 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-12-02T18:31:09.053

如果你在布局中使用它，你可以调用

`mSearchView.onActionViewExpanded()`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-02-08T08:33:03.280

这对我有用：

在根布局中：

```
xmlns:app="http://schemas.android.com/apk/res-auto" 
```

SearchView 定义如下：

```
 <android.support.v7.widget.SearchView
        android:id="@+id/search_contacts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_margin="15dp"
        android:background="@drawable/search_view"        
        app:iconifiedByDefault="false"
        app:queryHint="Search name or email"
        >

        <requestFocus />
    </android.support.v7.widget.SearchView> 
```

区别在于应用标签。

```
app:iconifiedByDefault="false"
app:queryHint="Search name or email" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-18T09:42:32.667

如果您在活动中使用，则需要使用

```
view.onActionViewExpanded(); 
```

如果您使用的是内部菜单选项，则需要使用

```
MenuItem.expandActionView(); 
```

注意：它仅适用于 SearchView

这两种情况对我有用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-08T13:54:49.580

这对我有用：

```
menu.expandActionView(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-27T13:59:32.617

您可以`SearchView#setIconified()`在 Java 代码中的 SearchView 句柄上使用该方法。更多在这里：

[http://developer.android.com/reference/android/widget/SearchView.html#setIconified(boolean)](http://developer.android.com/reference/android/widget/SearchView.html#setIconified(boolean))

您也可以使用`SearchView#setIconifiedByDefault()`. 更多信息在这里：

[http://developer.android.com/reference/android/widget/SearchView.html#setIconifiedByDefault(boolean)](http://developer.android.com/reference/android/widget/SearchView.html#setIconifiedByDefault(boolean))

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-10T02:26:58.230

@Pascalius 的回答对我有用。但是每次关闭 SearchView 并再次单击时，您都会失去焦点。所以我插入了这样的代码`setOnMenuItemClickListener`：

```
MenuItem item = menu.findItem(R.id.action_search);

SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
final SearchView searchView = (SearchView) item.getActionView();

item.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
    @Override
    public boolean onMenuItemClick(MenuItem menuItem) {
        searchView.setIconifiedByDefault(true);
        searchView.setFocusable(true);
        searchView.setIconified(false);
        searchView.requestFocusFromTouch();

        return false;
    }
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-05-26T07:49:08.560

**科特林**

```
var searchView = menu.findItem(R.id.action_search).actionView as SearchView
searchView.isIconified = true 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-09-19T13:31:22.823

对于 Appcompat Searchview，您可以使用此方法：

```
MenuItemCompat.expandActionView(mSearchMenuItem); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-07-12T12:09:44.990

用这个

```
SearchManager searchManager = (SearchManager) mActivity.getSystemService(Context.SEARCH_SERVICE);
                SearchView searchView = new SearchView(mActivity.actionBar.getThemedContext());
                searchView.setSearchableInfo(searchManager.getSearchableInfo(mActivity.getComponentName()));
                searchView.setIconifiedByDefault(false);
                searchView.setQueryHint("Search");
                menu.findItem(R.id.action_search).setActionView(searchView); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-11-07T15:50:47.700

我很难做到这一点`SearchView widget`，但`expandActionView() method`实际上是在 MenuItem 类中定义的，而不是 SearchView 类。所以，我解决了它

```
 MenuItem searchItem = menu.findItem(R.id.item_search);
        SearchView   searchView = (SearchView) searchItem.getActionView();
        searchItem.expandActionView();//the method expandActionView is called on searchItem not searchView 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-05-21T02:45:17.443

调用`expandActionView()`menuItem。

```
menuItem.expandActionView() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-04T06:50:16.547

```
 <item
        android:id="@+id/search"
        android:icon="@drawable/ic_search"
        android:title="Search"
        app:actionViewClass="androidx.appcompat.widget.SearchView"
        app:showAsAction="always"/>

 public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.search_menu, menu);
        // Associate searchable configuration with the SearchView
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setQueryHint("Search the customer...");
        searchView.setSearchableInfo(Objects.requireNonNull(searchManager).getSearchableInfo(getComponentName()));
        searchView.setMaxWidth(Integer.MAX_VALUE);
        searchView.setIconifiedByDefault(false);
        searchView.requestFocus();

    }
```

```
<pre>

 <item
        android:id="@+id/search"
        android:icon="@drawable/ic_search"
        android:title="Search"
        app:actionViewClass="androidx.appcompat.widget.SearchView"
        app:showAsAction="always"/>

 public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.search_menu, menu);
        // Associate searchable configuration with the SearchView
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setQueryHint("Search the customer...");
        searchView.setSearchableInfo(Objects.requireNonNull(searchManager).getSearchableInfo(getComponentName()));
        searchView.setMaxWidth(Integer.MAX_VALUE);
        searchView.setIconifiedByDefault(false);
        searchView.requestFocus();

    }

</pre>
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-30T11:28:14.033

MenuItemCompat 的 SearchView 有一个名为 maxWidth 的属性。

```
final MenuItem searchItem = menu.findItem(R.id.action_search);
final SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);
searchView.setMaxWidth(xxx); 
```

使用屏幕宽度而不是 xxx offcourse

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-24T18:27:20.903

我正在使用 android.widget Searchview 并默认图标化。xml 中的以下代码帮助我使其扩展并自动聚焦在搜索视图上，单击时：

```
<SearchView
                android:id="@+id/searchView"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:iconifiedByDefault="true"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:queryHint="Search"/> 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2017-01-27T13:32:09.600

`android:iconifiedByDefault="true"`

以上是 XML 中的代码，帮助我在单击时扩展并自动聚焦在搜索视图上：

# php - 带有 HTML 格式文本的 phptidy textarea

> ID：11710046
> 
> 赞同：0
> 
> 时间：2012-07-29T14:33:08.760
> 
> 标签：php, html, textarea

我正在使用 Javascript 来生成 HTML 编码的文本区域，这可以正常工作，然后我将其存储到 SQL 数据库中。还行吧。但是当我想将它输出回textarea以再次编辑时，php-tidy将关闭的textarea标签移动到内容之前，因此实际上将内容放在textarea标签之后。这仅在内容使用 HTML 标签格式化时发生，但这些是生成格式所必需的，我需要生成 HTML 格式的电子邮件等。当我禁用 PHP-tidy 时，一切正常，只是 HTML 代码完全一团糟

如果有人无论如何都要让 PHP-tidy 忽略某些代码部分或免除 textarea 被 PHP-tidy 解析，那就太好了。

我的代码很简单

//数据库内容

```
$message = stripslashes($database['message']);
$buffer = "<textarea id=\"elm1\" name=\"message\" cols=\"70\" rows=\"20\">$message</textarea>";

$config = array('indent' => TRUE,
           'doctype' => "strict",
            'output-xhtml' => TRUE,
            'wrap' => 300);
$tidy = tidy_parse_string($buffer, $config);
$tidy->cleanRepair();
echo $tidy; 
```

如果邮件没有 HTML 内容，则格式正常

php tidy disabled 它出来了，是的，格式不太好，但可以按我的预期工作

```
<textarea id="elm1" name="Message" cols="70" rows="20"><p>this is a full html email.</p>
<p>little formatting </p>
<p><span style="color: #ff0000;">different colour text</span></p>
<p>and normal</p></textarea> 
```

php tidy 已启用

```
<textarea id="elm1" name="Message" cols="70" rows="20">
</textarea>
    <p>
      this is a full html email.
    </p>
    <p>
      little formatting
    </p>
    <p>

      <span style="color: #ff0000;">different colour text</span>
    </p>
    <p>
      and normal
    </p> 
```

我希望启用 PHP-tidy 但仍然有我期望的结果

谢谢

贵宾32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:55:13.337

```
$message = stripslashes($database['message']);
// DO the tidy before interpolating with
// the html of your form element
$config = array('indent' => TRUE,
           'doctype' => "strict",
            'output-xhtml' => TRUE,
            'wrap' => 300);

$tidy = tidy_parse_string($message, $config);
$tidy->cleanRepair();

// now insert it into the correct place

$buffer = "<textarea id=\"elm1\" name=\"message\" cols=\"70\" rows=\"20\">$tidy</textarea>";

echo $buffer; 
```

我认为你只是按照错误的顺序组装东西。

**未经测试**

# entity-framework - 对实体框架对象的递归调用引发 SqlTransaction 错误

> ID：11710047
> 
> 赞同：0
> 
> 时间：2012-07-29T14:33:09.863
> 
> 标签：entity-framework, transactions

我正在使用 C# 语言使用 MVC 3 和实体框架。我有一个实现 IRepository 接口的存储库类。在我的项目中，我需要一个用于删除对象的递归逻辑。它已通过递归函数实现。但它引发了这个错误：

> “/”应用程序中的服务器错误。不允许新事务，因为会话中还有其他线程在运行。

我的代码与此类似：

```
public void Delete(long ObjectId)
{
  if(SomeThing ==true)
  {
    var items = TRepository.Find(o=>o.Id==ObjectId);
    foreach(var t in items)
      {
        Delete(t.ObjectId);
      }
  }
  Delete(ObjectId);
  TRepository.SaveChanges();//here raise error!!!
} 
```

# mysql - 如何从数据库中获取用户的所有或特定属性？

> ID：11710062
> 
> 赞同：-2
> 
> 时间：2012-07-29T14:34:52.263
> 
> 标签：mysql, grails, groovy, getproperties

我是 grails 的新手，我想知道如何在应用程序中获取登录用户的所有属性。我使用 MYSQL db 来存储其信息，例如用户名、密码、地址等。我想知道如何从数据库中获取其属性的特定值并将其显示在文本字段/gsp 上。请帮忙。tnx..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:49:40.473

如果您想通过分页获取用户对象列表，您可以使用：

```
def users = User.list(params) 
```

其中 params 是请求（CGI）参数的映射（散列）。参数应包含偏移量和最大值。

如果您想通过 id 获取用户：

```
def users = User.get(<ID>) 
```

或者

```
def user = User.findById(<ID>) 
```

或通过其他一些属性：

```
def user = User.findBy<PROPERTY_NAME>(<PROPERTY_VALUE>) 
```

这些方法中的每一个都应返回包含所有字段的用户对象。在 gsp 中，我们可以将其显示为：

```
${user?.username} 
```

或者

```
${fieldValue(bean: user, field: "username")} 
```

# c++ - 使用 size_t 差异复制字符串的一部分

> ID：11710066
> 
> 赞同：0
> 
> 时间：2012-07-29T14:35:23.453
> 
> 标签：c++, size-t

我正在尝试遍历字符串并根据初始键值和标识信息块结尾的键值复制信息块。然而，当我尝试减去我的初始值和最终值以找到我正在寻找的块的长度时，我收到了一个看似任意的值。

因此，开始和结束索引通过以下方式找到：

```
currentstringlocation = mystring.find("value_im_looking_to_start_at, 0);
endlocation = mystring.find("value_im_looking_to_stop_at", currentstringlocation); 
```

然后我试图做类似的事情：

```
mystring.copy(newstring,(endlocation-currentlocation), currentlocation); 
```

然而，这并没有给我想要的结果。这是我的代码及其产生的输出的摘录。

```
stringlocation2=topoinfo.find("\n",stringlocation+11);
topoinfo.copy(address,(stringlocation2-stringlocation+11),stringlocation+11);
cout << (stringlocation2-stringlocation+11) << "\n";
cout << stringlocation2 << "\t" << stringlocation+11 << "\n"; 
```

输出：25 59 56

很明显，我试图捕获的信息块跨越 3 个字符，但是当我减去这两个字符时，我得到 25。有人可以向我解释为什么会发生这种情况以及我该如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:56:01.177

您计算的长度错误，请尝试以下方法：

```
topoinfo.copy(address, stringlocation2 - (stringlocaion + 11),
              stringlocation + 11); 
```

在此之后，`address`将包含复制的字符串。但请记住：如果`address`是字符数组或字符指针，那么您*应该*自己添加终止`'\0'`字符！

获取子字符串的更好解决方案是实际使用该[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)函数：

```
std::string address = topoinfo.substr(stringlocation + 11,
                                      stringlocation2 - (stringlocaion + 11)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:44:06.813

应该

```
topoinfo.copy(address,stringlocation2-(stringlocation+11),stringlocation+11);
cout << stringlocation2-(stringlocation+11) << "\n"; 
```

你的括号错了。

# wordpress - wp_get_recent_posts 停止工作

> ID：11710067
> 
> 赞同：2
> 
> 时间：2012-07-29T14:35:44.510
> 
> 标签：wordpress

我想在单个帖子模式下返回 2 个最新帖子，但不包括当前帖子。我做到了。问题是，它刚刚停止工作。它没有更改代码，它在服务器以及我的本地主机上停止。

这是代码：

```
<section id='recent_posts'>

            <header class='recent_header'>
                Recent posts
            </header>

            <?php 
                $id = $post->ID;
                $recent_posts = wp_get_recent_posts("numberposts=2&exclude=$id");

                foreach( $recent_posts as $recent ) { ?>                        

                    <article class='single_recent'>
                        <header>
                            <a href="<?php echo get_permalink($recent["ID"]); ?>"><?php echo $recent["post_title"]; ?></a>
                        </header>
                        <p>
                            <?php echo get_excerpt_by_id($recent["ID"]); ?>
                        </p>
                    </article>

            <?php } ?>

        </section> 
```

有人有解释吗？

我尝试删除参数，仍然没有。它返回一个空数组。

我应该使用哪个其他功能来达到相同的效果有什么建议吗？

编辑：

```
 <?php 

get_header();
get_sidebar();

?>

        <?php the_post() ?>

        <article class='post-single'>

                <header class='post_header'>

                    <h1><?php the_title(); ?></h1>

                    <div class='post_header_bottom'>
                        <strong class='post_category'><?php echo get_the_category_list(', '); ?></strong>
                        <strong class='post_author'><span class='symbol'>U</span> by <?php the_author(); ?></strong>
                    </div>

                </header>

                <?php if (has_post_thumbnail()) : ?>
                <figure class='post_single_image'>
                    <?php the_post_thumbnail(); ?>
                    <figcaption>No Will No Skill</figcaption>
                </figure>
                <?php endif; ?>

                <div class='post_perex'>
                    <?php the_content(); ?>
                </div>

                <footer class='post_footer'>

                    <div class='post_footer_top'>

                        <div class='post_tags'>
                            <?php the_tags('', '', ''); ?>
                        </div>

                        <div class='post_time'>
                            <time datetime='<?php the_time('Y-m-d'); ?>' pubdate>
                                <span class='symbol'>P </span>
                                <?php relative_post_the_date(); ?>
                            </time>
                        </div>

                    </div>

                    <div class='post_share'>

                            <div class='share_show'>
                                <span class='symbol'>f</span> Like
                                 | 
                                <span class='symbol'>g</span> +1
                                 | 
                                <span class='symbol'>t</span> Tweet

                                <?php
                                    if(function_exists('display_social4i'))
                                        echo display_social4i("large","align-left");
                                ?>

                            </div>

                        </div>

                </footer>

            </article>

            <?php comments_template(); ?>   

            <section id='recent_posts'>

                <header class='recent_header'>
                    Recent posts
                </header>

                <?php 
                    global $post;
                    $id = $post->ID;
                    $qargs = array(
                        'post__not_in'=> array($id),
                        'posts_per_page' => 2
                    );
                    $recent_posts = new WP_Query($qargs);

                    if ($recent_posts->have_posts()) echo 'yes'; else echo 'nope';

                    if($recent_posts->have_posts()) : while($recent_posts->have_posts()) : $recent_posts->the_post(); ?>                        

                        <article class='single_recent'>
                            <header>
                                <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                            </header>
                            <p>
                                <?php the_excerpt(); ?>
                            </p>
                        </article>
                <?php endwhile;endif; ?>
            </section>

            <div class='space'></div>
        </div>

<?php
get_footer();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:27:23.603

您缺少循环，或者至少缺少当前 post 对象的全局实例。虽然我更喜欢自己使用循环，但您可以使用后者。

改变：

```
$id = $post->ID;
$recent_posts = wp_get_recent_posts("numberposts=2&exclude=$id"); 
```

至：

```
global $post;
$id = $post->ID;
$recent_posts = wp_get_recent_posts("numberposts=2&exclude=$id"); 
```

**更新：**

该循环可以在单个视图中用于从默认的 query_posts 对象中获取信息。尽管它只是一篇文章，但循环最常用于填充 the_content 和其他信息。

您是正确的，在这种情况下 ID 应该无关紧要，因为 wp_get_recent_posts() 仍然应该返回一些没有任何参数的结果（当然，除非您正在处理自定义帖子类型）。

另一种解决方案是尝试使用 WP_Query 获取您最近的帖子：

```
<section id='recent_posts'>

        <header class='recent_header'>
            Recent posts
        </header>

        <?php 
            global $post;
            $id = $post->ID;
            $qargs = array(
                'post__not_in'=> array($id),
                'posts_per_page' => 2
            );
            $recent_posts = new WP_Query($qargs);

            if($recent_posts->have_posts()) : while($recent_posts->have_posts()) : $recent_posts->the_post(); ?>                        

                <article class='single_recent'>
                    <header>
                        <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                    </header>
                    <p>
                        <?php the_excerpt(); ?>
                    </p>
                </article>
        <?php endwhile;endif; ?>
</section> 
```

WP_Query 将默认为标准的 'orderby'=>'date' 和 'order'=>'DESC' 参数，因此不需要明确说明（不过，您可以根据需要添加它们）。

如上所述以及在我的评论中，我不确定您是否只想要最新的帖子，或者您是否正在尝试查询最近的自定义帖子类型。如果最近的帖子是“po​​st”类型并且这就是您想要的，那么这是 WP_Query 的“post_type”参数以及 wp_get_recent_posts 的默认值。

否则，您将需要显式声明“post_type”参数，以便 $qargs 看起来像：

```
$qargs = array(
    'post__not_in'=> array($id),
    'posts_per_page' => 2,
    'post_type' => array('post', 'custom_post_type_slug', ...)
); 
```

只是为了检查，如果您想确保返回 SOMETHING，您还可以将 'post_type' 设置为 'all'。如果 WP_Query 或 wp_get_recent_posts 没有返回任何内容，并且 'post_type' 设置为 'all'，那么问题就更大了，我需要查看你的 single.php 模板中的所有代码。

希望这可以帮助。

**新更新：**

尝试完全注释掉代码块并替换为：

```
wp_get_archives(array('type'=>'postbypost')); 
```

如果这不起作用，那么我的想法很新鲜。您的文件主机端可能发生了一些事情，这可能解释了无中生有的事情。检查并查看他们是否有任何关于此类活动的公告。我知道许多文件主机正在替换 PHP4 和旧版本的 MySQL，这可能会导致一些不可预见的问题。

我会尝试使用干净、单独的 Wordpress 安装和您的主题副本创建一个新的子域。设置好后，只需创建一个新帖子，看看是否会出现同样的问题。

如果是这样，那么在你的 single.php 文件中注释掉代码块（可能从 get_sidebar 注释到你的第一个`<article>...</article>`块开始）并找出可能弹出的任何错误。如果我们处理的代码块突然开始填充，那么发布阻止它发生的代码块，我会尝试进一步与您合作（也就是说，如果您仍然遇到问题）。

否则，如果全新安装解决了您的问题，那么您的 wp_options 表中可能存在某种差异。我会开始合并表（首先是 wp_posts，然后是 wp_postmeta，然后是 wp_terms....），直到问题再次出现。

不幸的是，我认为详尽的测试可能是为了纠正这种异常情况。抱歉，我没有纯代码解决方案。这是您正在经历的一个非常奇怪的问题。随时关注我，我会尽我所能提供帮助。

# java - 爪哇玩！2.0 日食

> ID：11710072
> 
> 赞同：0
> 
> 时间：2012-07-29T14:37:13.983
> 
> 标签：java, windows, playframework

我在 Play! 中使用 eclipsify 创建 eclipse 项目时遇到问题。

我已经下载了玩！来自[http://www.playframework.org/](http://www.playframework.org/)

我提取了它并打开了我的 cmd（我正在使用 Windows 顺便说一句）

我将目录更改为

```
cd C:\Users\kanta\Downloads\play-2.0.2\play-2.0.2 
```

然后我创建了一个新的应用程序：

*   `play new myApp`

*   `myApp`

但是现在卡住了，不知道怎么用`eclipsify`

[http://www.playframework.org/documentation/2.0.2/IDE](http://www.playframework.org/documentation/2.0.2/IDE) 我不知道在哪里可以找到 eclipsify。

我试过这个：

```
play eclipsify myApp 
```

和

```
play myApp eclipsify 
```

这导致“这不是 Play 应用程序”。

**..：：回答：：..**

对我来说，它是这样工作的：

小路

c:\windows\system32\;c:\windows\System32\Wbem;C:\Program Files\Java\jdk1.7.0_05\bin\;c:\play

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:53:17.850

尝试以下步骤

1.  `play new myapp`
2.  `cd myapp`
3.  `play`
4.  `eclipsify`

澄清这里发生了什么

1 - 创建一个新的播放应用程序，

2 - 进入 myapp 目录

3 - 启动播放 SBT 控制台，您可以在其中执行播放命令的范围

4 - 运行 eclipsify 命令

# java - 有没有办法让一个对象知道它是否包含在另一个对象中？

> ID：11710075
> 
> 赞同：0
> 
> 时间：2012-07-29T14:37:38.117
> 
> 标签：java, composition

我的具体问题是我有一个包含另一个 B 类的 A 类。B 包含一些数字，A 包含这些数字的总和。我喜欢做的是当 B 中的数字发生变化时，它应该让 A 类知道它更新了它的数字，以便 A 更新它自己的数字。

举个例子，假设 B 包含：

数字1 = 7; 数字2 = 5;

所以 A 包含 12。

现在，当我将 7 更改为 9 时，A 应该包含 14。

最佳做法是什么？

PS：不仅仅是A包含B，实际上我有D包含C，C包含A，A包含B。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:40:52.593

这里有两种选择：

*   不要将总数存储在 中`A`，按需计算。

    ```
    class A {
        B b;

        ...

        public int getTotal() {
            return b.getNumber1() + b.getNumber2();
        }
    } 
    ```

*   或者，让我们`A`成为一个观察者，倾听`B`.

    ```
    class A implements ChangeListener {
        B b;
        int total = 0;

        public A() {
            b = new B();
            b.addChangeListener(this);
        }

        @Override
        public void stateChanged(ChangeEvent ce) {
            // recompute total
        }
    } 
    ```

    这种方法通常被称为[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:44:52.483

**1.**使用`Publisher-Subscriber`pattern ，**俗称**。`Observer Pattern`

**2.**也可以通过**创建一个线程来轮询变量的值**，所做的任何更改都将按照您规定的方式进行处理。

# java - Eclipse 中的 JOGL Opengl WriteCloneable

> ID：11710076
> 
> 赞同：2
> 
> 时间：2012-07-29T14:37:47.397
> 
> 标签：java, opengl, jogl

我正在关注[本教程](http://schabby.de/jogl-example-hello-world/)。

虽然我做的和教程完全一样，即使我看了视频。即使我尝试了其他教程。但是我所有的尝试，我每次都得到那个错误。

当我单击运行时，会显示一个错误框和“发生 Java 异常”。

我在 consol 中看到了错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/jogamp/common/type/WriteCloneable
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
... 
```

即使我卸载了 jdk&jre，我也下载了最新版本并安装。我正在使用 Eclipse，Windows 7 家庭高级版 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:23:43.463

起初，他的教程包含几个错误，我已经在他的 Youtube 视频的评论中抱怨了。我建议您使用[我们 wiki](http://jogamp.org/wiki/index.php/Main_Page)中的官方教程，如果您需要帮助，请在[官方论坛](http://forum.jogamp.org/)上与我们联系。

您的环境可能有问题，或者您使用 32 位版本和 64 位 JVM。如果您不知道应该将哪些 JAR 用于本机库，只需将两者都拿走，然后让 GlueGen 选择正确的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-26T08:55:28.747

确保在项目中添加所有 4 个库，如下所示。

```
-lib
    --gluegen-rt.jar
    --gluegen-rt-natives-windows-amd64.jar
    --jogl-all.jar
    --jogl-all-natives-windows-amd64.jar 
```

这对我有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:44:25.380

看起来您的类路径有问题，因为未找到 WriteCloneable 类 - 构建路径中可能缺少您需要的一个或多个 jar。

在 Eclipse 中：右键单击您的项目/属性/Java 构建路径/库选项卡。检查您需要的 JOGL 库是否都在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-13T13:20:41.777

有同样的问题。我通过添加 glagegen 的依赖项来解决它。首先我只有：

```
 <dependency>
        <groupId>org.jogamp.jogl</groupId>
        <artifactId>jogl-all-main</artifactId>
        <version>2.3.2</version>
    </dependency> 
```

这解决了问题：

```
 <dependency>
        <groupId>org.jogamp.gluegen</groupId>
        <artifactId>gluegen-rt-main</artifactId>
        <version>2.3.2</version>
    </dependency> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T19:08:31.177

我找到解决方案。

如果出现 NoClassDefFoundError 的 JVMUtil 或 WriteCloneable 错误，则必须将该 4 个库 jar 复制到 java/jre/lib/ext 文件夹。

谢谢你的破旧。

# c - 具有共享内存和初始化的结构

> ID：11710078
> 
> 赞同：0
> 
> 时间：2012-07-29T14:38:18.443
> 
> 标签：c, linux, struct, shared-memory

在[我之前](https://stackoverflow.com/questions/11709929/how-to-initialize-a-pointer-to-a-struct-in-c/11709951#11709950)的帖子之后，我想向前迈出一步：

我想分配一个共享内存区域，并为分配/共享数据放置初始值：

```
static struct PipeShm  myPipeSt = {.init = 0 , .flag = FALSE , .mutex = NULL , .ptr1 = NULL , .ptr2 = NULL ,
        .status1 = -10 , .status2 = -10 , .semaphoreFlag = FALSE };

int shmid  = shmget(IPC_PRIVATE, sizeof(int), 0600);
static struct PipeShm  * myPipe = shmat(shmid, NULL, 0); // &myPipeSt;

myPipe = & myPipeSt; // that doesn't compile 
```

建议？

非常感激 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:43:57.493

首先，您只要求整数大小的共享内存，而不是整个结构。即使它被四舍五入到最接近的页面大小，您也应该始终使用您要使用的结构的适当大小。

其次，要从一个结构复制到另一个结构，您只需分配。要复制到指向结构的指针，您必须使用取消引用运算符`*`，例如：

```
*myPipe = myPipeSt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:43:04.277

这确实编译：

```
*myPipe = myPipeSt; 
```

您可以使用简单的赋值运算符复制结构对象，`myPipe`因为它是一个指针，您需要取消引用它才能访问结构对象。

# c# - 附加到 IDE 的特定实例

> ID：11710079
> 
> 赞同：0
> 
> 时间：2012-07-29T14:38:19.287
> 
> 标签：c#, visual-studio-2010, ide, macros, envdte

**当我做：**

```
// Get an instance of the currently running Visual Studio IDE.
EnvDTE80.DTE2 dte2;
dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.
GetActiveObject("VisualStudio.DTE.10.0");

var solution = dte2.Solution; // get solution

Console.WriteLine(solution.FullName);  // prints the name of the solution where this code is written 
```

**我能够获得当前 ide 的实例**

不过，我想获得对不同视觉工作室实例的 dte2 的引用。[该链接](http://msdn.microsoft.com/en-us/library/ms228755.aspx)表明可以做到这一点。结果，我尝试了类似的方法：

```
 Process p = new Process();
    ProcessStartInfo ps = new ProcessStartInfo(@"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe");
    p.StartInfo = ps;
    p.Start(); // start a new instance of visual studio

    var ROT = "!VisualStudio.DTE.10.0:" + p.Id;

    // Get an instance of the NEW instance of Visual Studio IDE.
    EnvDTE80.DTE2 dte2;
    dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.
    GetActiveObject(ROT); 
```

如果我尝试得到异常：

> 无效的类字符串（来自 HRESULT 的异常：0x800401F3 (CO_E_CLASSSTRING)）

**有更多链接显示如何执行我正在寻找的内容，但由于某种原因，我无法使其工作。以下是一些链接：**

[http://msdn.microsoft.com/en-us/library/6cefss65.aspx](http://msdn.microsoft.com/en-us/library/6cefss65.aspx)

[http://msdn.microsoft.com/en-us/library/ms228755.aspx](http://msdn.microsoft.com/en-us/library/ms228755.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:52:53.520

一直对我有用的一件事是

```
var dte = GetDTE();
var debugger = dte.Debugger;
var processes = debugger.LocalProcesses;
int processIdToAttach; //your process id of second visual studio
foreach (var p in processes)
{
    EnvDTE90.Process3 process3 = (EnvDTE90.Process3)p;
    if (process3.ProcessID == processIdToAttach)
    {
        if (!process3.IsBeingDebugged)
        {
            if (doMixedModeDebugging)
            {
                string[] arr = new string[] { "Managed", "Native" };
                process3.Attach2(arr);
            }
            else
            {
                process3.Attach();
            }
        }
        break;
    }
} 
```

# google-app-engine - 如何在谷歌云存储文件上进行 mapreduce？

> ID：11710080
> 
> 赞同：1
> 
> 时间：2012-07-29T14:38:48.207
> 
> 标签：google-app-engine, google-cloud-storage

从应用程序引擎 mapreduce 控制台 (myappid.appspot.com/mapreduce/status) 我有一个使用 input_reader: mapreduce.input_readers.BlobstoreLineInputReader 定义的 mapreduce，我已成功将其与常规 blobstore 文件一起使用，但它不适用于使用 create_gs_key 从云存储创建的 Blobkey。当我运行它时，我收到错误“BadReaderParamsError：找不到密钥 THEKEY 的 blobinfo”。输入阅读器检查是否存在 BlobInfo。有什么解决方法吗？BlobInfo.get(BLOBKEY FROM CS) 不应该返回 blobinfo 吗？

要从谷歌云存储文件中获取 blob_key，我运行以下命令：

```
from google.appengine.ext import blobstore
READ_PATH = '/gs/mybucket/myfile.json'
blob_key =  blobstore.create_gs_key(READ_PATH)
print blob_key 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:13:22.133

社区成员为云存储创建了 LineInputReader 作为 appengine-mapreduce 库上的一个问题：[http ://code.google.com/p/appengine-mapreduce/issues/detail?id=140](http://code.google.com/p/appengine-mapreduce/issues/detail?id=140)

我们在这里发布了我们的修改：[https ://github.com/thinkjson/CloudStorageLineInputReader](https://github.com/thinkjson/CloudStorageLineInputReader)

我们正在使用它对大约 4TB 的数据执行 MapReduce，并且到目前为止对它感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:52:32.873

Cloud Storage 和 BlobStore 是两个不同的存储，您不能将 Cloud Storage 中的密钥作为 BlobStore 密钥传递。
您将需要通过 Cloud Storage 文件实现自己的行阅读器。

# c# - 如何从 WCF 服务中止流而不读取它来结束？

> ID：11710081
> 
> 赞同：17
> 
> 时间：2012-07-29T14:38:59.943
> 
> 标签：c#, wcf, stream, wshttpbinding, mtom

这是我上周一直在调查的问题，但找不到任何解决方案。发现帖子问同样的问题，但从未得到答案，希望这对其他人也有帮助。

我有一个`WCF`服务，它返回一个包含 a 的对象`stream`。我使用`basicHttpBinding`流传输和 Mtom 将其发送到客户端。

`WCF`客户端在收到响应对象后立即调用服务并关闭代理。

接下来，客户端读取从 WCF 服务获得的流并将其写入本地磁盘上的文件。所有这一切都很好。

我的问题是当客户端想要中止操作并停止从 WCF 服务下载数据时。如果我调用`.close()`流，例如：`serverReply.DataStream.Close();`然后它会阻塞并从 WCF 服务读取整个流，直到它结束，然后再继续。流可能非常大，网络并不总是很快。

这对于网络资源的使用都是非常不利的，这基本上浪费在不再使用的数据上。并且由于`basicHttpBinding`只允许到 WCF 服务服务器的两个并发 TCP 连接（默认情况下），它会阻止其他连接尝试，直到流被读取直到结束。

我可以增加并发连接的数量，但这将是一个糟糕的解决方案，因为它会造成麻烦。

例如，20 个中止的下载仍在下载数据以将其丢弃。我需要完全停止传输。

在客户端，流对象只是一个普通的`Stream`类，所以它只有 close 方法，没有别的。

调用`.close()`或`.abort()`代理对象没有帮助，使用`.dispose()`或任何其他方法破坏它也无济于事。在服务器端，我处理该`OperationContext.OperationCompleted`事件，但直到从 数据`stream`读取到最后才会触发它。

所以问题是，我如何在不完全阅读的情况下关闭/中止流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T14:52:04.010

经过调查，我发现 WCF 客户端将继续从流中读取，直到 closeTimeout 结束，然后它将中止连接。您可以减少客户端上的 closeTimeout 以最小化问题。

注意：您应该将处理流的代码包装到 try/catch 块中。stream.Dispose() 方法将抛出 TimeoutException ，这打破了[在 Dispose 方法中不抛出异常](http://msdn.microsoft.com/en-us/library/bb386039.aspx)的准则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T09:19:30.873

我认为您只是在关闭后收到缓冲区。您应该将 maxBufferSize 设置为较低的值。

您可能还希望通过包装流和覆盖读取来限制服务器上读取的数据量。如果您的客户端带宽较低，请使用较小的块，并从 read 方法返回相应的计数以匹配您实际读取的数量。这将限制缓冲区的填充率。

我自己对此主题的测试涉及我编写一个 NeverEndingStream 并始终返回数据。在某些时候，我在客户端上调用了关闭，然后几乎立即在服务器上调用了关闭。这表明缓冲区只是被清空了，因为很明显它直到最后都无法读取我的流。

如果您仍然遇到问题，那么我建议您在覆盖的流上跟踪 Read 方法的时间。如果 currentReadtime - the lastReadTime > x 那么您可以改为调用 Close 并引发异常。那肯定会杀了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:22:27.967

你试过玩弄`binding.MaxBufferSize`吗？
您是否尝试过使用您的 app.config 文件设置，例如：

```
<bindings>
  <wsHttpBinding>
    <binding name="default" maxReceivedMessageSize="2147483647"  maxBufferPoolSize="2147483647" 
             closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" >
      <readerQuotas  maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384"
                     maxDepth="64" maxStringContentLength="2147483647" />
    </binding>

  </wsHttpBinding>
</bindings> 
```

我会尽量减少超时和缓冲区长度，并尝试中止或关闭，看看会发生什么。

# python - 在 GAE 上按键获取实例的复杂性是什么？

> ID：11710086
> 
> 赞同：1
> 
> 时间：2012-07-29T14:39:54.293
> 
> 标签：python, google-app-engine, google-cloud-datastore

[GAE 有一个名为ReferenceProperty](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ReferenceProperty)的内置数据类型，`db.Key`正如它所说的，它实际上是 a 。可以用来获取对应的实例，不知道复杂度是多少？

所谓“引用”，不像C++中的引用，是地址，访问的复杂度是O(1)。如果它只是`key-value`系统中的一个键，我想知道它可能需要像 O(log) 或什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:55:04.993

访问数据存储中的键是在恒定时间内完成的，无论您拥有多少此类实体，通过键检索实体都需要相同的时间。

# asp.net - 关于选择silverlight建立新网站的说明

> ID：11710088
> 
> 赞同：1
> 
> 时间：2012-07-29T14:40:11.840
> 
> 标签：asp.net, silverlight, html, telerik

真的有2个问题：

我最近选择使用 silverlight、表达式和 Telerik silverlight 控件来制作网站。但我刚刚读到 Windows 8 和未来 IE 的默认浏览器将不允许插件，除非用户使用将继续支持插件的非默认桌面模式浏览器。我说对了吗？所有使用 Silverlight 的网站都需要重写为 Html 5 还是什么？

我已经看到了 Silverlight 支持的浏览器列表，我注意到不支持 Windows 7 的 IE 6 和 IE 7，但这是否意味着默认情况下不安装该插件而不是不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:06:34.813

我说对了吗？是的。iOS / Win 8 Metro 浏览器 / Win Phone7+ 不支持浏览器插件。网站的唯一选择是 Html / Html5 + Javascript + CSS

在 windows 7 上不支持 ie6 / ie7 的原因是 windows 7 默认带有 IE 8，因此您无法在 windows 7 上安装 IE6/IE7，因此这些版本不支持 silverlight :)

# sql - oracle中的多个SELECT

> ID：11710091
> 
> 赞同：1
> 
> 时间：2012-07-29T14:41:07.773
> 
> 标签：sql, oracle10g

我想从 3 个不同的表中获取特定值。每个表具有相同的结构，但包含一年中不同时期的数据。

```
Temp_Table_Jun (Contains data for June month)
---------------
CustNo    CustName  Revenue
1000      John      5.55 
```

同样，我还有两张桌子

*   Temp_table_Apr
*   Temp_table_May

现在我运行一个查询

```
select sum(Revenue)Rev_June from Temp_Table_Jun where CustNo='1000' 
```

得到六月的结果。现在我的问题是我想在一个查询中获取整个月的收入详细信息。

我需要类似的东西，（这是错误的，不起作用）

```
select Rev_June,Rev_Apr,Rev_May,((Rev_June+Rev_Apr+Rev_May)/3)Avg_3_Mon from 
(
        select sum(Revenue)Rev_June from Temp_Table_Jun where CustNo='1000',
        select sum(Revenue)Rev_Apr from Temp_Table_Apr where CustNo='1000',
        select sum(Revenue)Rev_May from Temp_Table_May where CustNo='1000'   

) 
```

如何做到这一点？我正在使用 Oracle 10g。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T16:33:41.493

要获取数据，您可以通过以下方式进行。Oracle 10g 没有，`PIVOT`但您可以使用`CASE`语句来复制功能：

```
SELECT sum(case when month = 'June' then Rev END) June
  , sum(case when month = 'May' then Rev END) May
  , sum(case when month = 'April' then Rev END) April
  , avg(Rev) as Average
FROM
(
  SELECT sum(revenue) Rev, 'June' as Month from rev_june where cust_no = '1000'
  union all
  SELECT sum(revenue) Rev, 'April' from rev_apr where cust_no = '1000'
  union all
  SELECT sum(revenue) Rev, 'May' from rev_may where cust_no = '1000'
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/e6422/16)

或者您可以执行以下操作：

```
SELECT June, April, May, (June + April + May)/3 as Average
FROM
(
  select 
    (SELECT sum(revenue) from rev_june where cust_no = '1000') as June
  , (SELECT sum(revenue) from rev_apr where cust_no = '1000') as April
  , (SELECT sum(revenue) from rev_may where cust_no = '1000') as May
  from dual
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/e6422/17)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T15:14:03.837

以下可能有效：

```
select Rev_June, Rev_Apr, Rev_May,
    (Rev_June + Rev_Apr + Rev_May) / 3 Avg_3_Mon
from (
    (select sum(Revenue) from Temp_Table_Jun where CustNo='1000') as Rev_June,
    (select sum(Revenue) from Temp_Table_Apr where CustNo='1000') as Rev_Apr,
    (select sum(Revenue) from Temp_Table_May where CustNo='1000') as Rev_May
    from dual
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:59:02.067

我不知道它是否适用于 Oracle 10g，但大致如下所示的 UNION 查询通常适用于我使用过的数据库：

```
select sum(Revenue) Rev_June from Temp_Table_Jun where CustNo='1000'
UNION
select sum(Revenue) Rev_Apr from Temp_Table_Apr where CustNo='1000'
UNION
select sum(Revenue) Rev_May from Temp_Table_May where CustNo='1000' 
```

我对标点符号不是很清楚——你需要在结尾处加分号吗？- 但这可能会让你开始。

我想我会稍有不同，因为每个查询必须具有相同的结构才能使 UNION 查询工作：

```
select sum(Revenue) Revenue_Sum, 'Jun' Month from Temp_Table_Jun where CustNo='1000'
UNION
select sum(Revenue) Revenue_Sum, 'Apr' Month from Temp_Table_Apr where CustNo='1000'
UNION
select sum(Revenue) Revenue_Sum, 'May' Month from Temp_Table_May where CustNo='1000' 
```

现在，这并不能完全得到平均总和和您正在寻找的 3 列，但也许您可以使用类似 UNION 查询的内容创建一个 VIEW，然后在该 VIEW 上使用 GROUP BY 查询来聚合数据。

# jquery - 递归搜索某个类的所有div的孩子

> ID：11710092
> 
> 赞同：2
> 
> 时间：2012-07-29T14:41:10.627
> 
> 标签：jquery

```
<div class="testClass">
    <div>
        <select name="specialName123">
        </select>
    </div>
</div>

<div class="testClass">
    <div>
        <span id="someSpan">
            <select name="specialName123">
            </select>
        </span>
    </div>
</div> 
```

如何根据它们具有“testClass”类并且名称中包含“123”的选择这一事实在我的页面上选择上述两个div？

我知道我可以找到所有这样的选择`$('select[name*="123"]')`，并且可以`$(".testClass")`用来选择适当的 div。但是我如何以我需要的方式将这些组合在一起呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:42:51.493

您可以使用`closest`方法：

```
$('select[name*="123"]').closest('.testClass') 
```

[演示](http://jsfiddle.net/Zj7kL/)

或者：

```
$('.testClass').has("select[name*=123]") 
```

[演示](http://jsfiddle.net/Zj7kL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:46:41.047

为什么不：

```
$('.testClass select[name*="123"]') 
```

它会匹配名称包含 123 的选择框的 testclass 的任何子级（任何深度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:48:44.797

您还可以使用该`find`方法获取 的所有后代`testClass`，然后您可以通过选择器对其进行过滤：

`$('.testClass').find('select[name*="123"]');`

# objective-c - 将工具栏直接放在导航控制器下方，而不将内容隐藏在工具栏下方

> ID：11710095
> 
> 赞同：1
> 
> 时间：2012-07-29T14:41:20.957
> 
> 标签：objective-c, ios, xcode

我正在尝试将工具栏直接放在导航栏下方，但我需要工具栏不隐藏其下方视图中的内容。我的快速解决方案是将导航控制器的本机工具栏设置为可见，它可以正常工作并正确调整其下方的视图大小，以便它不会让任何东西隐藏在其后面，但默认工具栏显示在屏幕底部。

我需要它位于顶部，就在导航栏下方。我认为简单的解决方案是更改默认工具栏的框架（我不知道该怎么做）或将工具栏的新实例定位到视图上（这有效，但它隐藏了它下面的内容）但是让它调整以下视图的大小。

请查看我发现的以下图片，以了解我正在尝试做什么。（注意表格视图的第一行是如何在标签栏下开始​​的）

![在此处输入图像描述](../Images/2be9db1e684fac185e1f01888d05fbce.png)

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:34:05.107

我不相信您可以更改默认工具栏的框架。您将需要创建自己的工具栏实例，将其放置在导航栏的底部并调整 tableView 的大小以适合下方。我们看不到您是如何设置视图的，但如果您从一个子类为 UITableViewController 的视图开始，您将很难做到这一点。你想要的是从一个 UIViewController 作为你的主控制器开始，添加一个表格视图和工具栏作为子视图。然后根据需要定位和调整它们的大小。

如果您要隐藏和显示工具栏，您将创建一个方法将其在导航控制器下向上移动并再次调整 tableview 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:08:41.673

你混淆了两件事。NavigationController 工具栏属性是底部栏，您添加到视图的任何工具栏都与导航控制器无关，而是该视图的属性。

如果您在视图顶部有自己的工具栏，则需要将其余的视图内容向下移动或将该工具栏设置为半透明（如果您正在寻找的话）。

同样，导航控制器工具栏始终是底部栏，您在 IB 中放置的工具栏只是该视图的工具栏，您可以放在任何地方。

# facebook - 如何在 Windows 上安装 Heroku？

> ID：11710096
> 
> 赞同：0
> 
> 时间：2012-07-29T14:41:22.713
> 
> 标签：facebook, facebook-graph-api, heroku, interface-builder, facebook-apps

我正在使用 Heroku 制作 Facebook 应用程序，我按照 heroku 和 facebook 帮助页面的说明进行操作，但是在安装 heroku-toolbelt 后我被卡住了。我打开`cmd.exe`， `heroku`按照说明输入，但它导致错误如下

> C:/Program Files/Heroku/bin/heroku:15:in []': 找不到代码转换器（UTF-16LE 到 Windows-1258）（Encoding::ConverterNotFoundError）来自 C:/Program Files/Heroku/bin/heroku ：15：在'

我不知道是什么问题，搜索了一整天，但完全没有运气。可能是因为我年纪小，知道的太少……

有谁知道我做错了什么？

在这个网站上还有另一个类似的问题[Unable to use Heroku from the commandline](https://stackoverflow.com/questions/9986433/unable-to-use-heroku-from-the-commandline)

但是在那里，选择的答案说了一些关于去提问者为应用程序设置文件夹的目录......

我开始头疼...谁能给我一步一步的指示（如果没有，任何其他方式也可以）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:34:25.243

如果您使用 Windows 7，请转到控制面板 --> 区域和语言 --> 管理 --> 更改系统区域设置...并将当前系统区域设置更改为英语（美国）。

并重新启动 Windows。

它工作正常！

# php - PHP 中的 self::$bar 和 static::$bar 有什么区别？

> ID：11710099
> 
> 赞同：159
> 
> 时间：2012-07-29T14:41:44.607
> 
> 标签：php, oop, php-5.3

`self`在下面的示例中使用和有什么区别`static`？

```
class Foo
{
    protected static $bar = 1234;

    public static function instance()
    {
        echo self::$bar;
        echo "\n";
        echo static::$bar;
    }

}

Foo::instance(); 
```

### 生产

```
1234
1234 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-07-29T14:52:11.713

当您`self`用来指代类成员时，您指的是在其中使用关键字的类。在这种情况下，您的`Foo`类定义了一个名为 的受保护静态属性`$bar`。当您`self`在`Foo`类中使用来引用属性时，您引用的是同一个类。

因此，如果您尝试`self::$bar`在类中的其他地方使用，`Foo`但您有一个`Bar`具有不同属性值的类，它将使用`Foo::$bar`而不是`Bar::$bar`，这可能不是您想要的：

```
class Foo
{
    protected static $bar = 1234;
}

class Bar extends Foo
{
    protected static $bar = 4321;
} 
```

当您通过**调用**方法时`static`，您正在调用一个称为[后期静态绑定](http://www.php.net/manual/en/language.oop5.late-static-bindings.php)的功能（在 PHP 5.3 中引入）。

在上述场景中，使用`self`将导致`Foo::$bar`(1234)。并且 using`static`将导致`Bar::$bar`(4321) 因为 with ，解释器会在运行时`static`考虑类内的重新声明。`Bar`

```
// self
var_dump(Foo::$bar);
// (int) 1234

// static
var_dump(Bar::$bar);
// (int) 4321 
```

您通常对方法甚至类本身使用后期静态绑定，而不是属性，因为您不经常在子类中重新声明属性；`static`可以在以下相关问题中找到使用关键字调用后期绑定构造函数的示例： [New self vs. new static](https://stackoverflow.com/questions/5197300/new-self-vs-new-static)

但是，这也不排除使用`static`with 属性。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2020-09-26T00:49:04.387

`self`我有一个小例子显示和之间的区别`static`。使用`static::`执行后期静态绑定，因此它绑定来自子类的变量值。

```
class A { // Base Class
    protected static $name = 'ClassA';
    public static function getSelfName() {
        return self::$name;
    }
    public static function getStaticName() {
        return static::$name;
    }
}

class B extends A {
    protected static $name = 'ClassB';
}

echo B::getSelfName(); // ClassA
echo B::getStaticName(); // ClassB 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-07-15T14:40:14.180

**有`self`电话：**

```
class Phone
{
    protected static $number = 123;

    public function getNumber()
    {
        return self::$number;
    }
} 
```

```
class Fax extends Phone
{
    protected static $number = 234;
}

// Displays: "123"
echo (new Fax)->getNumber(); 
```

你可以在上面看到，即使我们已经`$number`用我们的`Fax`类覆盖了 ，它仍然返回`123`，因为我们已经明确地要求 PHP 提供`self`变量，而 PHP 反过来又要求`Phone`s 变量。

`self`现在，如果我们将调用与交换`static`，我们将获得`Fax`s 覆盖的值：

**有`static`电话：**

```
class Phone
{
    protected static $number = 123;

    public function getNumber()
    {
        return static::$number;
    }
} 
```

```
class Fax extends Phone
{
    protected static $number = 234;
}

// Displays: "234"
echo (new Fax)->getVar(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-19T20:41:38.757

如前所述，主要区别之一是`static`允许后期静态绑定。我发现的最有用的场景之一是为单例类创建基类：

```
class A { // Base Class
    protected static $name = '';
    protected static function getName() {
        return static::$name;
    }
}
class B extends A {
    protected static $name = 'MyCustomNameB';
}
class C extends A {
    protected static $name = 'MyCustomNameC';
}

echo B::getName(); // MyCustomNameB
echo C::getName(); // MyCustomNameC 
```

在基类中使用`return static::$name`将返回扩展时静态附加的内容。如果您要使用`return self::$name`then`B::getName()`将返回一个空字符串，因为这是在 Base 类中声明的内容。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-08-24T13:08:46.103

也许这个自我解释的代码可以帮助你：

> ```
> class Foo 
> {
>     protected static $bar = 'parent value';
> 
>     public static function test() 
>     {
>         var_dump('I am your father');
>         var_dump('self:: here means '.self::$bar);
>         var_dump('static:: here means '.static::$bar);
>     }
> }
> 
> class Bar extends Foo 
> {
>     protected static $bar = 'child value';
> 
>     public static function test() 
>     {
>         parent::Test();
> 
>         var_dump('I am the child');
>         var_dump('self:: here means '.self::$bar);
>         var_dump('static:: here means '.static::$bar);
>     }
> }
> 
> Bar::test();
> Foo::test(); 
> ```

这会产生以下输出（为了清楚起见，我添加了换行符）：

```
'I am your father' (length=16)
'self:: here means parent value' (length=30)
'static:: here means child value' (length=31)

'I am the child' (length=14)
'self:: here means child value' (length=29)
'static:: here means child value' (length=31)

'I am your father' (length=16)
'self:: here means parent value' (length=30)
'static:: here means parent value' (length=32) 
```

# performance - 弹性列表的性能测量（TileLayout）

> ID：11710100
> 
> 赞同：0
> 
> 时间：2012-07-29T14:41:58.923
> 
> 标签：performance, apache-flex, itemrenderer, flex-spark

我正在对我拥有的列表中的项目渲染器进行一些性能调整，到目前为止，我正在监听 update-complete 事件以查看它何时首次渲染。

但是我也想测量滚动速度（当我改变视口位置时，列表会闪烁几秒钟），我也应该听什么事件？

谢谢

# css - 如何将 CSS 应用于 :before 内容之后的第一个字母？

> ID：11710103
> 
> 赞同：9
> 
> 时间：2012-07-29T14:42:19.770
> 
> 标签：css, pseudo-element

```
<!DOCTYPE html>
<html lang="en">
<head>
<style type="text/css">
p:before {  
    content:"Former - "; 
    color:red;
    font-family:"Tahoma" ,Times New Roman;
    font-size:70%;
}

p.normal:first-letter {
    font-size:40px;
    color:blue;
}
</style>
</head>
<body>
  <p class="normal">First character of this paragraph will
  be normal and will have font size 40px;</p>
</body>
</html> 
```

在这里，`:before`伪元素中的内容以红色显示，但我还想将“本段第一个字符”的字符“F”设置为**蓝色**。但相反，我看到“ **F** ormer -”的“F”是蓝色的。

我想要的是将内容*后面*的`:before`首字母和首字母应用于同一段落。这可能吗？如果是这样，怎么做？`.normal` *`:before`*

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T15:27:54.320

通常你会用`:first-letter`伪元素来做这件事，但是看到你有`:before`内容，它会[在你的段落的实际内容](http://www.w3.org/TR/CSS21/generate.html#before-after-content)[*之前*](http://www.w3.org/TR/CSS21/generate.html#before-after-content)[插入文本](http://www.w3.org/TR/CSS21/generate.html#before-after-content)*，而不是实际内容的第一个字母，而是`:first-letter`匹配内容的第一个字母`:before`。*

 *这意味着，而不是这个：

```
<p class="normal">
  <p:before>Former - </p:before>
  <p.normal:first-letter>F</p.normal:first-letter>irst character of this paragraph will
  be normal and will have font size 40px;
</p> 
```

你实际上得到了这个：

```
<p class="normal">
  <p:before>
    <p.normal:first-letter>F</p.normal:first-letter>ormer - 
  </p:before>
  First character of this paragraph will
  be normal and will have font size 40px;
</p> 
```

由于 CSS 生成内容的工作方式，我认为在纯 CSS 中没有解决方案可以在您在实际内容之前插入内容后到达实际内容的第一个字母。

作为替代方案，您可以使用 a`span`代替`:first-letter`伪元素，然后您可以对其应用蓝色，但这意味着您必须插入额外的元素：

```
 <p class="normal"><span>F</span>irst character of this paragraph will
  be normal and will have font size 40px;</p> 
```

```
p.normal span {
    font-size:40px;
    color:blue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-17T17:06:28.983

你好。

例如，如果您在没有 JavaScript 的情况下无法编辑 HTML，则可以使用纯 CSS，只要您为“块级”元素的 :before 或 :after 内容设置样式即可。

```
p:before {
  content: 'Wisdom'
}

p:first-letter {
  font-size: 7vw;
}
```

```
<p></p>
```

请注意 ::first-letter CSS 伪元素将样式应用于块级元素的第一行的第一个字母，但仅当前面没有其他内容（例如图像或内联表格）时。

署名：[https ://developer.mozilla.org/en-US/docs/Web/CSS/::first-letter](https://developer.mozilla.org/en-US/docs/Web/CSS/::first-letter)

✌干杯，肖恩老。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-15T15:31:51.717

将 :before 更改为 :after ，并且只使用绝对定位，正如 user719662 所建议的那样

```
p:after {  
  position: absolute;
left: 0;
content:"Former - "; 
color:red;
font-family:"Tahoma" ,Times New Roman;
font-size:70%;
}

p.normal:first-letter {
  font-size:40px;
color:blue;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-29T18:46:41.477

```
<!DOCTYPE html>
<html lang="en">
  <head>

    <title>Complicated pseudo element and span</title>

    <style type="text/css">
      <!--
      p:before {  
           content:"Read this -"; 
           color:red;
           font-family:"Tahoma" ,Times New Roman;
           font-size:100%;}

            .span {
                   font-size:40px;
              color:blue; 
                 } 

         -->
   </style>

  </head>
  <body>

    <p><span style="color:blue; font-size:30px" >F</span>irst character of this paragraph
        will be normal and will have font size 40px;</p>

  </body>
</html> 
```

感谢您的指导 - 我得到了我想象的输出方式，我想要它**

# ruby-on-rails - 如何在 Rails 3.2 中将图像添加到原子提要？

> ID：11710106
> 
> 赞同：3
> 
> 时间：2012-07-29T14:42:30.177
> 
> 标签：ruby-on-rails, rss, atom-feed

在 Rails 3.2 应用程序中，我有一个带有`:caption`字段并使用 Carrierwave 处理图像文件的照片模型。

我正在尝试创建一个包含图像的原子提要。这样做的正确方法是什么？

目前我有

```
#views/photos/index.atom.builder
atom_feed do |feed|
  feed.title "Photos"
  @photos.each do |photo|
      feed.entry photo do |entry|
        entry.title photo.title
        entry.summary photo.caption
        entry.image image_path(photo.file.url(:large))
        entry.author do |author|
          author.name photo.user.name
        end
      end
    end
end 
```

虽然这确实为提要标记添加了图像标签，但我认为这可能不是正确的语法？

```
<entry>
   ...
   <image>http://path/to/image.jpg</image> 
   ...
</entry> 
```

在其他地方我看到了以下语法

```
<entry>
    <content type="image/jpg" src="/path/to/image.png" />
</entry> 
```

如果有更多知识的人可以告诉我，我将不胜感激：

1.  将图像合并到 atom 提要中的正确标记是什么？
2.  如何通过 Rails 中的 atom/xml 构建器生成该标记？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:49:01.943

我找到了自己问题的答案。

对于 Atom 提要，可以将图像添加到 img 标签内的内容中。

或者，它可以作为附件添加：

```
feed.entry photo do |entry|
    entry.link href: photo.file.url(:large), rel:"enclosure", type:"image/jpeg" 
end 
```

最后，我从 Atom 切换到 RSS 提要（这是我使用的特殊方式，因为我需要稍后处理提要，发现 RSS 更容易做到这一点）。

同样，图像可以作为 img 添加到内容标签内的 RSS 中。

或者可以添加为附件：

```
@photos.each do |photo|
    xml.item do
        xml.media :content, url: photo.file.url(:fullpage), type:"image/jpeg", height:770, width:770
        xml.media :thumbnail, url: photo.file.url(:thumb), height: 50, width:50
    end
end 
```

为了构建这样的 RSS 提要，可能需要在 RSS 提要的头部添加一些属性。

我的看起来像这样

```
xml.instruct! :xml, version: "1.0" 
xml.rss version: "2.0", "xmlns:media" => "http://search.yahoo.com/mrss/", "xmlns:atom" => "http://www.w3.org/2005/Atom" do
... 
```

# python - 如何从 python2 http 请求代码更改为 python3 请求

> ID：11710109
> 
> 赞同：-5
> 
> 时间：2012-07-29T14:42:48.720
> 
> 标签：python, python-3.x, python-requests

我使用python2.6编写了以下代码，我想将其更改为python3.2和Requests：

```
import urllib, urllib2
import cookielib 
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))  
urllib2.install_opener(opener)

params = urllib.urlencode(dict(x = '0' , y = '0', url='login.php', password='1234',id='userid'))   
f = urllib2.urlopen('http://test.com/login_check.php', params)  
data = f.read()   
login_response = opener.open('http://aaa.com/bbs/confirm.php?')
htmlContent = login_response.read()   
print htmlContent   
response.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:14:21.573

如果您查看文档，这非常简单：[http ://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)

```
import requests

url = r'http://test.com/login_check.php'
parameters = {'x' : '0' ,
              'y' : '0', 
              'url':'login.php',
              'password':'1234',
              'id':'userid'}

login_response = requests.get(url, params=parameters)
htmlContent = login_response.text 
```

# ruby-on-rails-3 - 在 Rufus Scheduler (rails 3.2) 中从代码块中确定 cron 作业的 job_id

> ID：11710112
> 
> 赞同：0
> 
> 时间：2012-07-29T14:43:17.383
> 
> 标签：ruby-on-rails-3, rufus-scheduler

通过 Rufus 调度程序创建 cron 作业时，cron 作业的代码块中是否有某种方法可以确定 cron 作业本身的 job_id？

我想做的是这样的：

```
scheduler.cron '0 0 0 * * * Etc/GMT+0' do
  # Nix existing jobs.
  scheduler.cron_jobs.values.map { |j| if j.job_id != self.job_id then j.unschedule end }     
  ...
end 
```

问题是`self.job_id`。有关如何检索当前正在触发的 cron 的当前 job_id 的任何建议？

我知道有类似“triggered_threads”的东西，它返回当前正在运行的作业。但我想要更具体的东西：我当前所在的代码块的 job_id。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:37:12.397

我能够通过为 scheduler.cron 方法调用提供一个明确标识新作业 ID 的可选参数来解决此问题：

```
scheduler.cron '0 0 0 * * * Etc/GMT+0', {:job_id => explicit_job_id} do
  # Nix existing jobs.
  scheduler.cron_jobs.values.map { |j| if j.job_id != self.job_id then j.unschedule end }     
  ...
end 
```

`explicit_job_id`在调用 scheduler.cron 之前定义的变量在哪里。

# ruby-on-rails - 为 Alchemy CMS 创建自定义留言板模块

> ID：11710115
> 
> 赞同：0
> 
> 时间：2012-07-29T14:43:30.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, alchemy-cms

我正在尝试使用 Alchemy CMS 框架在 Rails 站点中构建留言簿模块。使用 Alchemy 构建模块的文档方式似乎并不多，所以我只是离开了[这个页面](http://guides.alchemy-cms.com/creating_modules.html)。

我创建了两个控制器，管理员将使用一个名为 guestbook_controller.rb 并将其放在 app/controllers/admin 下

```
module Admin
  class GuestbookController < Alchemy::Admin::ResourcesController
    def index
      "index"
    end
  end
end 
```

另一个供客人在 app/controllers/guestbook_controller.rb 下访问

```
class GuestbookController < ActionController::Base
  def index
    "index"
  end
end 
```

我的意图是留言簿帖子将显示在 Alchemy 中已有的一个页面下，并且此页面上还将显示一个表单。

留言簿模型如下所示：

```
class GuestbookEntry < ActiveRecord::Base
  attr_accessible :location, :message, :name
end 
```

我的路线文件如下所示：

```
resources :guestbook

namespace :admin do
  resources :guestbook
end

mount Alchemy::Engine => '/' 
```

我在配置下有一个名为 authorization_rules.rb 的文件，如下所示：authorization do

```
 role :admin do
    has_permission_on :guestbook, :to => [:manage]
  end

end 
```

我遇到的第一个问题是去路由 /admin/guestbook 给我错误“你没有被授权”，但是我的初始化程序应该调用授权规则文件，那么为什么我会收到这个错误？

```
# Registering guestbook module in Alchemy CMS
Alchemy::Modules.register_module(YAML.load_file(File.join(File.dirname(__FILE__), '../..', 'config/guestbook_module.yml')))

# Loading authorization rules and register them to auth engine instance
Alchemy::AuthEngine.get_instance.load(File.join(File.dirname(__FILE__), '../..', 'config/authorization_rules.rb')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:50:10.610

授权问题很简单。你只需要写：

```
has_permission_on :admin_guestbook, :to => [:manage] 
```

我注意到的另一件事：您的前端 GuestbookController 应该继承自 Alchemy::BaseController。

并且您应该确保要在其上呈现留言簿条目的页面不得被 Alchemy 缓存。您可以通过使用`cache: false`page_layouts.yml 中的选项来进行页面布局。

# java - Android/OpenGLES2 - 在不同的线程中创建“着色器”程序

> ID：11710121
> 
> 赞同：0
> 
> 时间：2012-07-29T14:44:00.177
> 
> 标签：java, android, opengl-es

我是 OpenGLES 的新手，我遇到了着色器程序的问题。我的情况是：

```
Thread A(works as loop) manages everything but it does not draw on screen
Thread B only draws on screen
Thread A decides if Thread B will draw in current cycle 
```

我的问题是当线程 A 为线程 B 创建着色器程序时，B 无法访问属性和统一位置

这是 A 创建着色器程序的方式：

```
int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
int pixelShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

mProgram = GLES20.glCreateProgram();
GLES20.glAttachShader(mProgram, vertexShader);
GLES20.glAttachShader(mProgram, pixelShader);
GLES20.glLinkProgram(mProgram); 
```

这是线程 B 使用程序的方式：

```
GLES20.glUseProgram(mProgram);
int positionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
GLES20.glEnableVertexAttribArray(positionHandle);

GLES20.glVertexAttribPointer(positionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, vertexBuffer); 
```

如果 mProgram 由线程 A 创建，glGetAttribLocation 返回 -1 当 mProgram 由线程 B 创建时 glGetAttribLocation 返回有效位置

如果线程 A 创建的 mProgram 和 positionHandle 被硬编码为有效的位置着色器程序将无法正常工作。

我的问题：是否可以在线程 A 中创建着色器程序以供线​​程 B 使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:53:44.013

我没有阅读您的整个问题；我只读过“你的场景”。既然你说你是 OpenGL/GameDev 的新手，我只会说你的“场景”是错误的。很久以前，我写的第一个游戏也使用了类似的方法，所以我不怪你:)。

您应该使用像这样工作的单个线程：

```
load everything (textures, shaders, buffers, ...)
while (running)
{
    start timer
    update game (step by one frame, handle user input)
    render game
    show to openglbuffer to the screen (swap buffers)
    stop timer
    manage fps limiting (ie: sleep, using the difference of the timers)
}
clean up 
```

您遇到的所有 OpenGL 问题的原因是只有一个线程可以拥有 OpenGL 上下文。

# filesystems - Metro 是否适合访问文件系统的应用程序？

> ID：11710124
> 
> 赞同：1
> 
> 时间：2012-07-29T14:44:33.613
> 
> 标签：filesystems, gmail, windows-8, microsoft-metro, email-client

我了解 Metro 限制了应用程序对用户计算机的访问权限。任何人都可以验证这一点，因为我正在考虑创建一个至少可以与 yahoo/at&t.net 和 gmail 一起使用的电子邮件客户端。我是否能够使用 Metro 风格的应用程序访问用户的电子邮件（当然，假设他们提供了用户名和密码），还是我需要坚持为这种情况创建一个“老式”桌面应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:46:37.430

如果开发人员将这些功能添加到**Package.appxmanifest**（在 Visual Studio 中双击它并转到 Capabilities 选项卡） ，Metro 应用程序*无需*用户干预即可访问用户文档库、图片库、视频库和音乐库。

 **即使没有这些功能，应用程序也可以在其自己的本地文件夹中读取和写入。即使没有这些功能，应用程序也可以提示用户使用 FileOpenPicker*在磁盘上的任何位置打开文件。*所以是的，Metro 绝对可以用于电子邮件客户端。

有关使用 FileOpenPicker 的示例（即向您的电子邮件添加附件），请参阅：

[http://code.msdn.microsoft.com/windowsapps/File-picker-sample-9f294cba](http://code.msdn.microsoft.com/windowsapps/File-picker-sample-9f294cba)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:47:33.153

Metro 可以很容易地用于创建电子邮件客户端。对于这样的事情，您将在邮件服务器和客户端之间同步数据。

Metro 应用程序对文件系统的访问权限有限。但是他们可以访问[应用程序数据存储](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)和**隔离**存储，这些存储可用于离线存储与应用程序有关的数据。[**此**](http://metrostoragehelper.codeplex.com/)帮助程序库有助于将结构化数据存储在隔离存储中，并且可能适合您的需求。

对于您的场景，metro 应用程序将非常适合。然而，metro 应用程序的覆盖范围将取决于 Windows 8 在启动后的表现。**

# sql - 根据新插入记录的主键更新记录的外键字段

> ID：11710128
> 
> 赞同：6
> 
> 时间：2012-07-29T14:45:46.250
> 
> 标签：sql, sql-server

对于表 AI 中的每条记录，希望根据表 B 中新插入记录的 scope_identity 更新其中一个字段的外键值。

我需要在表 B 中为表 A 中的每条记录创建一个新记录，以便接收外键（scope_identity）值。

例如，对于下表中的每一行，我想根据在表 B 中创建新的行/外键来更新空外键字段。

表 A：

```
|Id|ForeignKey|
|1 |NULL      |
|2 |NULL      |
|3 |NULL      |
|4 |NULL      |
|5 |NULL      | 
```

作为伪代码，我想到了类似这样的 sql：

```
update TableA 
set ForeignKey = (INSERT INTO TableB VALUES (value1) select SCOPE_IDENTITY()) 
```

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T17:06:48.470

您可以使用游标遍历 TableA 并创建记录：

```
DECLARE @Id int
DECLARE @ForeignKey int

DECLARE C CURSOR FOR SELECT Id FROM TableA

OPEN C

FETCH NEXT FROM C INTO @Id

WHILE @@FETCH_STATUS = 0
BEGIN
    INSERT INTO TableB VALUES (value1)
    SET @ForeignKey = SCOPE_IDENTITY()

    UPDATE TableA
    SET ForeignKey = @ForeignKey
    WHERE Id = @Id

    FETCH NEXT FROM C INTO @Id
END

CLOSE C
DEALLOCATE C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T20:39:46.203

在 SQL Server 2008 及更高版本中执行与 INSERT 相关的 UPDATE 的基于集合的方法是使用[MERGE...OUTPUT](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx)语句。

```
-- This table variable will hold the correlation between the two tables
declare @NewLinks table (dst_id int, src_id int)

merge TableB dst
using TableA src
    on 1 = 0 --inserts all from src into dst, add WHERE-like limit here
when not matched --should never match, since this is an INSERT-like query
    insert (<dst_column_list>) values (<src_column_list>)
output INSERTED.<dst_surrogate_key>, src.<src_surrogate_key>
into @NewLinks

update src
set src.ForeignKey = nl.dst_id
from TableA src
join @NewLinks nl
    on nl.src_id = src.Id 
```

由于 INSERT 语句（即使在 INSERT...SELECT 形式中）没有 FROM 子句，`from_table_name`因此无法在其 OUTPUT 子句中引用以捕获完整的相关性。由于 MERGE 始终将其 USING 子句视为 FROM 子句，因此它可用于模仿 INSERT...SELECT 构造，同时提供对 OUTPUT 中源表和目标表的访问权限。

使用 MERGE...OUTPUT 创建与 INSERT 相关的 UPDATE 以维护单个临时表或表值变量来替换使用游标或循环的 RBAR 解决方案的低效使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-10T16:34:41.227

我发现的另一种方法是使用[ROW_NUMBER 函数](https://docs.microsoft.com/en-us/sql/t-sql/functions/row-number-transact-sql)任意连接表，然后使用该派生查询来更新 FK。我们的想法是tableA 和 tableB之间**还没有关系，我们只需要链接它们来获取新的外键。**将它们加入到 ROW_NUMBER 之类的任意对象上，我们可以从中挑选出一行来获取 Id。

首先创建新记录

```
INSERT INTO TableB VALUES (value1) 
```

在 ROW_NUMBER 上编写任意连接它们的查询（我们在下一步中使用它）

```
SELECT
    tableARows.Id, 
    tableBRows.TheNewId
FROM
(
    SELECT Id, Row =  ROW_NUMBER() OVER (ORDER BY Id) FROM tableA
)tableARows INNER JOIN
(
    SELECT TheNewId, Row = ROW_NUMBER() OVER (ORDER BY TheNewId) FROM tableB
)tableBRows ON tableARows.Row = tableBRows.Row 
```

然后是一个完整的 UPDATE 语句，用来自 tableB 的新 FK 填充 tableA

```
UPDATE tableA 
SET tableA.ForeignKey = LinkedKeys.TheNewId
FROM
(
    SELECT
        tableARows.Id, 
        tableBRows.TheNewId
    FROM
    (
        SELECT Id, Row =  ROW_NUMBER() OVER (ORDER BY Id) FROM tableA
    )tableARows INNER JOIN
    (
        SELECT TheNewId, Row = ROW_NUMBER() OVER (ORDER BY TheNewId) FROM tableB
    )tableBRows ON tableARows.Row = tableBRows.Row
)LinkedKeys INNER JOIN
tableA  ON tableA.Id = LinkedKeys.Id 
```

这是我使用的示例表定义。

```
CREATE TABLE tableA (Id INT, ForeignKey INT)
INSERT INTO tableA VALUES (100,NULL),(200,NULL),(300,NULL)

CREATE TABLE tableB (TheNewId INT)
INSERT INTO tableB VALUES(5000),(6000),(7000) 
```

# c# - 从 SQL 服务器动态地将单个记录插入到 MS 访问中

> ID：11710138
> 
> 赞同：1
> 
> 时间：2012-07-29T14:47:42.183
> 
> 标签：c#, ado.net

我有两个具有相同模式（相同表）的数据库（SQlserver 和 MS Access）。SQL Server 数据库有数据，但 Access 没有数据（空白数据库）。

我的目标：当用户输入 ClientId 并单击插入按钮时，我需要从 sql server 数据库中的所有表中检索该单条记录并插入到 MS Access 数据库中的表中。

实现：我从具有客户端 ID 的 sql server 数据库中的所有表中检索并将数据存储在数据集中。

我有表数组，我正在循环遍历数组中的所有表，并尝试将来自上述数据集的数据动态插入 Ms Access。

您能否建议如何在循环中动态插入所有表的 Access。我不能为每个表写插入语句。我需要一个对每个表都是通用的，这样我才能传递参数。它不是批量插入，它的单个记录推送到多个表中。

--------这是我的代码--------------------------- ----------------

```
private void InsertMsiClientIntoTest(string ClientId)
        {
            SqlConnection sqlConnection = null;
            SqlDataAdapter sqlDataAdapter = null;
            DataSet sqlserverDataset = new DataSet();
            sqlserverDataset.Tables.Add();
            sqlConnection = new SqlConnection();
            sqlConnection = new SqlConnection("Data Source=THINK;Initial Catalog=" + dbName + ";Integrated Security=True;");
            sqlConnection.Open();
            sqlDataAdapter = new SqlDataAdapter(ClientSQL.PopulateTables, sqlConnection);
            sqlDataAdapter.SelectCommand.Parameters.AddWithValue("@ClientId", cmbId.Text);
           sqlDataAdapter.Fill(sqlserverDataset);
           GetDataFromTablesForID(sqlserverDataset); 
           InsertAllTableDataIntoAccess(sqlserverDataset,tableArray);
        }

        private DataSet GetDataFromTablesForID(DataSet dsTablesList)
        {
            SqlConnection sqlConnection = null;
            SqlDataAdapter sqlDataAdapter = null;
            string tableName = string.Empty;
            string QueryText = string.Empty;
            int i =0;
            tableArray = new string[dsTablesList.Tables[0].Rows.Count];
            DataSet sqlserverDataset = new DataSet();
            sqlserverDataset.Tables.Add();
            sqlConnection = new SqlConnection();
            sqlConnection = new SqlConnection("Data Source=THINK;Initial Catalog=" + dbName + ";Integrated Security=True;");
            sqlConnection.Open();
            foreach (DataRow itemRow in dsTablesList.Tables[0].Rows)
            {                
                 tableArray[i] = itemRow[0].ToString();
                 i++;
            }
            foreach (string tableItem in tableArray)
            {
                tableName = tableItem;

                    QueryText = "select x.*  from" + " " + tableName + " " +
                    "x inner join ClientMajor ci on ci.ClientId = x.ClientId where ci.MajorClientId =@ClientId";
                }
                sqlDataAdapter = new SqlDataAdapter(QueryText, sqlConnection);
                sqlDataAdapter.SelectCommand.Parameters.AddWithValue("@ClientId", cmbExceedId.Text);
                sqlDataAdapter.Fill(sqlserverDataset);
            }

            return sqlserverDataset;

        }

        private void InsertAllTableDataIntoAccess(DataSet Inputset, string[] tableArray)
        {
            string connectionstring = System.Configuration.ConfigurationManager.ConnectionStrings["mdb"].ToString();
            OleDbConnection oledbConnection = null;
            OleDbDataAdapter oledbDataAdapter = null;
            DataSet resultSet = new DataSet();
            oledbConnection = new OleDbConnection(connectionstring);
            oledbConnection.Open();
            foreach (string tableItem in tableArray)
            {
//?????????  I NEED THE FOLLOWING CODE......////////////???????           
                oledbDataAdapter.InsertCommand.CommandText="insert into "
                oledbDataAdapter.Fill(resultSet.Tables[0]);
            }
        } 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:15:49.947

最好的方法是：首先，在 sql server 上插入数据，其次，使用 ssis 包从 sql server 导出数据以访问数据库 SSIS 在你的情况下很有用（创建一个使用 sql server 作为数据源的数据流，你的查询, 和 ms 访问作为数据目标)

# android - 在 Java 和 XML 中设置监听器

> ID：11710139
> 
> 赞同：-4
> 
> 时间：2012-07-29T14:47:59.210
> 
> 标签：android

可以以编程方式或在视图的 XML 定义中定义侦听器。什么是最佳实践？我如何决定应该使用两者中的哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:14:48.553

我不确定是否有**最佳做法**。它可能归结为样式差异，尽管有时使用实`OnClickListener`数优于`onClick`在 XML 中定义方法。

例如，如果您想累积任何与 关联的状态，`OnClickListener`并且希望您`OnClickListener`独立于您的状态`Activity`，那么定义一个实现`OnClickListener`接口的单独类是有意义的。您根本无法使用 XML 执行此操作。

但是，如果您需要在单击视图时采取简单的操作，那么简单的 XML 定义可能就足够了。

带走的信息不是一个明显比另一个更好，而是你应该了解两者的优点和缺点，并使用能更好地解决手头问题的那个。

# json - 如何使用好友列表模块获取 Drupal 用户的粉丝数？

> ID：11710141
> 
> 赞同：0
> 
> 时间：2012-07-29T14:48:03.097
> 
> 标签：json, drupal, module

我正在尝试获取每个用户在 Views 中显示的粉丝**数，我正在使用 Drupal 6 和（friendlist 模块）连接到 android 程序，因为 View Style 应该是****JSON 数据文档**

我希望视图的数据预览是：

```
 {
"followingcount" : [
{
  "user" : {
    "picture" : "\n ",
    "name" : "adminadmin",
    "uid" : "65",
    "followerscount":"1500"

  } 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:35:50.790

最简单的方法可能是使用[Views Datasource](http://drupal.org/project/views_datasource)模块。这会将您在视图中执行的任何操作导出到 JSON，从而解决您的第一个问题。

**更新：** 要在 sql 中使用 GROUP BY 对项目进行分组，您可以使用[按模块分组的视图](http://drupal.org/project/views_groupby)。

或者，如果您需要执行此模块无法执行的其他操作，您可以编写自定义处理程序来执行类似的操作。

# dapper - Dapper 在中等信任下工作吗？

> ID：11710142
> 
> 赞同：0
> 
> 时间：2012-07-29T14:48:05.910
> 
> 标签：dapper

刚刚开始使用 Dapper。我想使用它，但我必须确保它可以在中等信任的服务器情况下工作。我用谷歌搜索答案没有任何运气。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:41:50.747

[SecurityException - 共享主机上的 Dapper](https://stackoverflow.com/questions/10780278/securityexception-dapper-on-shared-hosting)

根据上面的链接，看起来这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T22:56:54.727

Dapper 实际上确实有效，但方式有限。我已经让 Get 方法正常工作，但更新和插入似乎是主要问题区域，所以我只是手动执行这些操作。那好吧。我太喜欢 Dapper 以至于不能完全放弃它。

# html - Flash 下拉菜单未在对象标记之外扩展

> ID：11710143
> 
> 赞同：1
> 
> 时间：2012-07-29T14:48:31.060
> 
> 标签：html, actionscript-3, flash

我的问题很像这样： [我可以在 Flash 对象边界之外进行 Flash/Flex 下拉扩展吗？](https://stackoverflow.com/questions/2115316/can-i-make-a-flash-flex-drop-down-extend-outside-the-flash-object-boundaries)

除了我不只使用`<iframe>`标签`<object>`和`<embded>`标签，根本不使用 flex。我一直在起诉的横幅是 90 px 的高度，并且必须保持这种状态，这会导致下拉菜单在打开时被切断的问题。

有没有办法让它们延伸到对象标签之外，或者甚至让它们总是向下延伸，因为目前它们都想向上延伸，即使有些向下延伸效果更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:12:22.113

如果它是您的站点，那么您可以使用 Javascript 来更改对象的高度。

# javascript - 带有 Wordpress 的常规 FancyBox 1.3.4 - 链接

> ID：11710146
> 
> 赞同：0
> 
> 时间：2012-07-29T14:48:56.210
> 
> 标签：javascript, wordpress, fancybox

当我在谷歌上搜索这个时，我得到了很多 wordpress 插件响应，所以我在这里问。

我有一个 wordpress.org 博客。有一个链接，点击后，我想打开一个带有一些内容的花式框，实际上是一个带有标题的 spotify 嵌入播放列表。

我已经包含了所有的 fancybox 文件并进行了初始化，但没有运气。这是我的代码：

初始化：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="<?php echo get_template_directory_uri();?>/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" type="text/css" href="<?php echo get_template_directory_uri();?>/fancybox/jquery.fancybox-1.3.4.css" media="screen" /> 
  <script type="text/javascript">
                    $(document).ready(function() {
                        $("a#playlist_pop").fancybox({
                                'overlayShow'   : false,
                                'transitionIn'  : 'elastic',
                                'transitionOut' : 'elastic'
                        });
                    });
                  </script> 
```

这是我的html：

```
<div class="spotify_header" style="padding-bottom: 10px;padding-top: 10PX;text-align: center">CHECK US OUT ON <a id="playlist_pop" href="#playlist_data"><span>SPOTIFY</span></a>
                        <div style="display:none">
                            <div id="playlist_data">
                                <div id="Spotiplay">
                                    <h3>Artists We Love</h3><br/>
                                    <div id="playlist_pop_con"><iframe src="https://embed.spotify.com/?uri=spotify:user:yalefox:playlist:3NCBHSkbl0jLZtUnNWkdPh" width="312" height="392" frameborder="0" allowtransparency="true"></iframe></div>
                                </div>
                            </div>
            </div></div> 
```

谁能帮我这个？令人难以置信的是，如此简单的事情如何在 wordpress 中变得如此痛苦。

我在控制台中收到此错误消息： Uncaught TypeError: Object [object Object] has no method 'fancybox'

这是否意味着它没有读取 fancybox js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:42:18.320

非常感谢帮忙。不确定它是否与我客户的博客配置有关，或者只是缺乏对常规 Fancybox 1.3.2 和 wordpress.org 的支持，但我不得不求助于 Lytebox wordpress 插件 - [http://wordpress.org/extend /plugins/lytebox/](http://wordpress.org/extend/plugins/lytebox/) - 你只需在 a 标签中包含一个 rel="lyteframe" ..我将它重新设计为看起来就像一个 fancybox，所以虽然不是最佳的或像 fancybox 一样健壮，但它不是一个糟糕的选择

# php - 从foreach循环php更新数据库不起作用

> ID：11710150
> 
> 赞同：0
> 
> 时间：2012-07-29T14:49:37.390
> 
> 标签：php, mysql, arrays

您好，我正在尝试使用 foreach 循环中的值更新我的 sql 数据库中的列，但我得到了..为 foreach() 提供的参数无效

```
 foreach($ids as $id){
    $ch = curl_init();

    // set URL and other appropriate options
    curl_setopt($ch, CURLOPT_URL, "http://api.twitter.com/1/
    users/lookup.json?user_id=".$id."");
    curl_setopt($ch, CURLOPT_HEADER, 0);

    // grab URL and pass it to the browser
    $contents = curl_exec ($ch);
    $ok=array();
    $ok=json_decode($contents,true);
    foreach($ok['results'] as $p){
        $location=$p['location'];
        $query=mysql_query("UPDATE tweets SET location=".$location."
         WHERE from_user_id=".$id."");
        if($query){
            print'ok';
        }else{print'sds';}
    }
    // close cURL resource, and free up system resources
    curl_close($ch);
    } 
```

我究竟做错了什么？

欢呼人们！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:48:28.547

这就是你所需要的。它只拉最后一条推文，但这是一个好的开始。您对 twitter api 的调用不再有效，将其放在浏览器窗口中，您会发现它出错。

```
$contents = file_get_contents("http://api.twitter.com/users/".$id.".json");
$ok=json_decode($contents,true);

# For Testing Purposes
#echo '<pre>';
#var_dump($ok);
#echo '</pre>';

echo $ok['location']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:54:15.057

PHP 数组，无论是否关联，每对都有一个键和一个值。

所以，应该是`foreach($ids as $id_number => $id) {`我猜的，因为您没有提供有关`$ids`数组的更多信息。

# magento - 限制 magento 字符串/单词

> ID：11710153
> 
> 赞同：1
> 
> 时间：2012-07-29T14:49:49.450
> 
> 标签：magento

magento 有什么方法可以分割太长的字符串吗？具体来说，我想要产品描述和我的自定义模块，这样我就可以有一个不错的 javascript“阅读更多”下拉菜单并保持字符串长度整洁

我可以自己做javascript，但需要帮助用magento将字符串分成两部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:03:51.963

好的，首先 Magento 确实提供了一种通过其核心字符串助手的截断方法来执行此操作的方法 - [Mage_Core_Helper_String](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Helper/String.php#L47)它有几个不错的功能，但绝对没有理由不能在普通的旧 php 中创建一个基本版本使用[substr](http://php.net/manual/en/function.substr.php)的工作量很小。我将在下面展示这两种方法的示例...

**使用 php substr**

```
$length = 10;  // this is wehere the string will be split
$string = "Lorem ipsum dolor sit amet, consectetur adipisicing elit";

$primaryString = substr($string, 0, $length);
$remainder     = substr($string, $length);

echo $primaryString; // Will output 'Lorem ipsu'
echo $remainder;     // Will output 'm dolor sit amet, consectetur adipisicing elit' 
```

**使用 Magento 字符串助手**

如前所述，这个助手在前面的例子中提供了一些不错的特性：即 etc 字符串和是否断词的选项。我将由您来探索该方法及其选项，但作为一个基本示例：

```
$length = 10; 
$string = "Lorem ipsum dolor sit amet, consectetur adipisicing elit";

$remainder     = '';
$primaryString = Mage::helper('core/string')->truncate($string, $length, '...', $remainder);

echo $primaryString; // Will output 'Lorem i...'
echo $remainder;     // Will output 'psum dolor sit amet, consectetur adipisicing elit' 
```

# rtp - linux环境下用C++编写的rtp分析器

> ID：11710154
> 
> 赞同：0
> 
> 时间：2012-07-29T14:49:54.767
> 
> 标签：rtp, analyzer

我需要编写 (c++, linux) rtp 分析器，例如：http://mmlab.disi.unitn.it/wiki/index.php/Analyzer。但我无法理解一些技术时刻，例如服务器如何接收 udp-datagrams，确定一个 udp-datagram 已经完成，另一个 udp-datagram 开始，以及它如何识别包含 rtp 的 udp-datagrams。很高兴看到分析器的代码，但我还没有找到。你能帮我找到我的问题的答案吗（我想知道它是如何通过套接字实现的）。非常感谢，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:58:47.400

如果我确实正确理解了您的问题，您可以按照以下步骤操作：

*   使用其中一个套接字库在 C++ 中编写服务器程序，并创建一个 UDP 套接字。
*   侦听客户端发送 RTP 数据包的端口。
*   当你监听指定的 UDP 端口时，你会一一收到 UDP 数据包。
*   当您收到一个 UDP 数据包时，解析长度字段，它是一个 2 字节字段，从第 4 个字节开始。
*   长度 - 8（UDP 标头大小，以字节为单位）是您要查找的内容，实际上是 RTP 数据包的大小。
*   通过获取 UDP 数据包的第 8 个字节到 Length'the byte 之间的位来获取 RTP 数据包。
*   然后你有了你的 RTP 数据包，你也可以通过查看 IETF 在 RFC3550 中的样子以同样的方式解析它。

（也可以指定 UDP 数据包可能乱序到达，您可以使用 RTP 标头中的序列号字段对它们重新排序）

# android - 搜索启动方法，如果 Android 启动我的 proc

> ID：11710155
> 
> 赞同：1
> 
> 时间：2012-07-29T14:50:08.950
> 
> 标签：android

我创建了一个应用程序，其服务作为我的应用程序的后台线程运行。由于内存不足，Andrdoid 有时会杀死一些应用程序。其中一个已被杀死的应用程序是我的应用程序：

> > 07-29 14:48:35.140 I/ActivityManager(145): 进程 test.myApp (pid 4847) 已经死亡。
> > 
> > 07-29 14:48:35.140 W/ActivityManager（145）：计划在 19600 毫秒内重新启动崩溃的服务 test.myApp/.hilfsklassen.AutoSyncService
> > 
> > 07-29 14:48:35.140 I/WindowManager(145): WIN DEATH: Window{4071e300 test.myApp/test.myApp.Login paused=false}
> > 
> > 07-29 14:48:35.150 I/WindowManager(145): WIN DEATH: Window{407def28 test.myApp/test.myApp.Startseite paused=false}

几秒钟后，Android 启动了我的应用程序：

> > 07-29 14:48:54.750 I/ActivityManager（145）：为服务 test.myApp/.hilfsklassen.AutoSyncService 启动 proc test.myApp：pid=7299 uid=10057 gids={3003}

但是有一个问题：

我的服务需要一些来自 test.myApp 的数据才能运行。
所以我知道**如果 Android 启动我的应用程序，我的 start-activity 将被调用什么方法？**

我已经尝试过 onResume()，但这只有在我的应用程序具有焦点（前景）时才有效。如果 Android 启动我的应用程序，它会在后台运行。所以我认为它一定是onRestart()，但是这个方法没有被调用。我必须在此方法中启动我的服务才能设置运行服务所需的一些变量！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:45:56.463

当内存变低时，Android 运行时会在不发出警告的情况下终止后台服务。`START_STICKY`如果服务的 onStartComand() 方法返回或[START_FLAG_REDELIVERY](http://developer.android.com/reference/android/app/Service.html#START_FLAG_REDELIVERY)将在稍后重新启动。在后一种情况下，启动服务的原始意图与所有额外数据一起重新传递。该活动只会在用户手动启动时启动。

另一种方法是将您的数据存储在某处（例如 in `sharedPreferences`）并在服务中检索该数据。这样，服务变得独立于活动。希望有帮助。

# c++ - 通过来自不同模块的预处理器/模板生成列表/集合，并且必须在链接之前填充

> ID：11710156
> 
> 赞同：0
> 
> 时间：2012-07-29T14:50:23.453
> 
> 标签：c++, templates, c-preprocessor

据我所知，我有一些在`main()`调用之前创建的全局变量（类）。我需要一些技术来从我的代码的任何部分将数据添加到全局或作为该类的成员的列表中，并且必须在链接器之前填充它。在全局创建的类中使用它。是否可以？我没有找到任何类似的解决方案甚至问题，因此将不胜感激。

详细示例：

我有一个单例类，它有一个在构造函数中填充的变量。所有其他类在运行时使用类中的数据，有人早有人晚。单例类是在 main 函数的开头创建的。我在不同的项目中使用单例，除了应该显示该模块要求的特殊标志外，它对所有项目和模块具有大部分通用的数据。如果单例抛出异常程序退出并且我们在执行的第一步就知道它，因为单例在 main 的第一行创建。所以单例对所有项目都有很多通用数据，但我需要添加标志来指向单例，每个模块都需要哪些数据。我已经为 main 创建了模板，因此对于每个项目我都有相同的 main，只需简单地定义 PROJECT_NAME 稍后我添加 .

这个解释看起来并不完美，如果不明白不要犹豫，我会更刻意地组织它。

编辑：

我仍在互联网上寻找解决方案，发现 constexpr 看起来像我需要的，但目前并非所有编译器都支持它，是否有一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:00:01.803

第一步是不使用全局变量，而是在全局函数中使用静态变量。第一次调用函数时，变量将被初始化，然后让函数返回对变量的引用。

```
my_class& instnace() {
   static my_class i;
   return i;
} 
```

列表示例：

```
std::list<my_class>& global_list() { 
   static std::list<my_class> m; return m;
}

static int x = []()->int{ global_list().push_back(my_class); return 0;}(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:27:33.003

如果你想从不同的模块中完成你想要的，其中一种方法是在你的 dll 加载时完成某种回调函数。

一个窗口是**[DLLMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)**。

> 动态链接库 (DLL) 的可选入口点。当系统启动或终止进程或线程时，它会使用进程的第一个线程为每个加载的 DLL 调用入口点函数。当使用 LoadLibrary 和 FreeLibrary 函数加载或卸载 DLL 时，系统还会调用 DLL 的入口点函数。

在使用 gcc 的其他平台上，您可以通过 [属性构造函数]

> constructor 构造函数属性使函数在执行进入main()之前被自动调用。类似地，析构函数属性使函数在 main() 完成或 exit() 被调用后自动调用。具有这些属性的函数对于初始化将在程序执行期间隐式使用的数据很有用。这些属性目前还没有为 Objective-C 实现。

**警告**

用这种方法很容易射中自己的脚。至少在那些你不能在[dll 入口点](http://msdn.microsoft.com/en-us/windows/hardware/gg487379.aspx)做很多事情的窗口上。请阅读您的编译器/操作系统文档以了解限制是什么。

# twitter-bootstrap - 流星编译自定义引导程序少的例子？

> ID：11710160
> 
> 赞同：6
> 
> 时间：2012-07-29T14:51:01.157
> 
> 标签：twitter-bootstrap, less, meteor

我想少用一些自定义引导程序的流星。

任何人都可以分享一个流星项目的示例，该项目设置为编译自定义引导 .less 文件吗？

或者我是否需要与流星一起使用外部 .less 预处理器（在其他项目中我为此使用 LiverReload）？

如果没有引导程序的编译是在一个流星风味的屋顶下，那就太好了。

任何见解都非常感谢！-j

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T15:11:06.560

您可以通过添加更少的支持

```
meteor add less 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T16:39:23.350

到目前为止，不可能在流星项目中直接包含 vanilla bootstrap less 源文件，因为 less 包仅并行编译较少的文件，因此会破坏交叉文件 @variables 引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T00:53:26.460

我自己不能保证，但看起来这就是您所要求的：[https](https://atmosphere.meteor.com/package/bootstrap3-less) : //atmosphere.meteor.com/package/bootstrap3-less（如果您不使用陨石，请参阅 github 链接，但您可能应该）。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T17:18:57.210

您可以使用 node.js 的（imo 高级）Stylus CSS 预处理器，而不是使用 LESS。

而不是 LESS bootstrap 使用 bootstrap-stylus。

然后添加为解决此问题而创建的[stylus-mixin](https://atmosphere.meteor.com/package/stylus-mixin)，让您享受 stylus、mixin 和变量的全部功能。

# xcode - CGLayerRelease 崩溃

> ID：11710161
> 
> 赞同：0
> 
> 时间：2012-07-29T14:51:02.587
> 
> 标签：xcode, automatic-ref-counting, cglayer

我有一个启用了 ARC 的 Cocoa 应用程序。我正在使用 OS 10.8 和 Xcode 4.4。该应用程序在调用 CGLayerRelease 时偶尔会崩溃，将以下消息转储到控制台：

```
error for object 0x10a2d2000: entry for pointer being freed from death-row vanished 
```

如果我注释掉对 CGLayerRelease 的调用，崩溃就会停止。我需要在启用 ARC 的项目中调用 CGLayerRelease 吗？文档对此不是很清楚。

很难为此发布代码，因为它分布在一个从 NSView 继承的类的大文件中。该类有一个数据成员`CGLayerRef layer;`。然后在drawRect函数内部：

```
 if (layer == nil) {
        layer = CGLayerCreateWithContext(context, self.frame.size, NULL);
        // draw some stuff into CGLayerGetContext(layer)
    }
    CGContextDrawLayerInRect(context, self.bounds, layer); 
```

该类也是其窗口的委托，具有以下功能

```
- (void)windowDidEndLiveResize:(NSNotification *)notification {
    if (layer) {
        //CGLayerRelease(layer);
        layer = nil;
    }
    [self setNeedsDisplay:YES];
} 
```

也在属性设置器中

```
- (void)setPitch:(NSArray *)aPitch {
    pitch = aPitch;
    if (layer) {
        //CGLayerRelease(layer);
        layer = nil;
    }
} 
```

现在，如果我取消对调用的注释，`CGLayerRelease`那么我偶尔会遇到上述崩溃。我强调“偶尔”，因为它并不总是发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T00:10:38.197

是的，您需要在 ARC 中调用 CGLayerRelease()。上面的作业看起来是正确的，但我怀疑你可能还有其他作业。您正在直接访问您的 ivars，这是导致此类崩溃的第一大原因。除了 init 和 dealloc 之外，不要访问您自己的 ivars。为正确释放旧的访问器创建一个访问器`setLayer:`并创建一个新的访问器并始终使用它。

很有可能您的 CGLayer 代码很好，并且它是您添加到 CGLayer 的其他类似 CGPath 的东西。将所有 ivars 移至访问器。否则你将永远追逐这些类型的错误。

# android - 防止 Android Fragment/Activity 在方向更改时重新加载

> ID：11710162
> 
> 赞同：0
> 
> 时间：2012-07-29T14:51:14.983
> 
> 标签：android, android-fragments, screen-orientation

也许我没有得到 Fragments 的原理；但如果我切换到横向或纵向，我希望一切都保持不变。我有一个填充列表视图并显示进度对话框的 AsynTask。

如果我切换设备的方向，“正在加载...”对话框会重新打开（并且很多时候应用程序崩溃） - 这表明 AsynTask 再次被调用。如何在不删除和重新加载视图的情况下更改方向？

对于它的价值，我将 ListFragment 中的 AsynTask 称为 onActivityCreated。

LogCat 的崩溃也报告了这一点：

```
07-29 07:41:02.596: E/AndroidRuntime(15338): FATAL EXCEPTION: main
07-29 07:41:02.596: E/AndroidRuntime(15338): java.lang.IllegalStateException: Content view not yet created 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:12:30.170

我想到了。这很奇怪。

我的“onStop”中有一个“finish()”。我删除了它，一切都很好。

我还从我的 AsynTask 中取出 getListView 并进入 onActivityCreate

# asp.net - 使用 WCF 服务的 Asp.Net Web 应用程序身份验证

> ID：11710170
> 
> 赞同：0
> 
> 时间：2012-07-29T14:52:22.393
> 
> 标签：asp.net, wcf, forms-authentication, membership-provider

我有一个 WCF 服务，它负责对用户进行身份验证。与 WCF 身份验证服务不同，我希望所有身份验证（包括来自 asp.net Web 应用程序的身份验证）都发生在 WCF 服务层。

现在，我的查询，我是否应该在 Web 应用程序层定义用于身份验证的成员资格提供程序。比如说，例如，我定义了一个自定义 WCF 成员资格提供程序，它调用 WCF 服务来执行身份验证。或者如果应用程序使用表单身份验证来针对活动目录对用户进行身份验证，我将在 Web 层使用活动目录成员资格提供程序。

按照我的逻辑，因为我希望 WCF 服务负责对来自不同应用程序的用户进行身份验证，所以我将在服务层定义成员资格提供程序。

但是，对于哪个层负责实现成员资格提供者存在不同意见。

谢谢和问候 Girija

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:14:43.353

您不能（也不应该）在 WCF 中对 asp.net 应用程序执行 Windows 身份验证。您也不应该让您的服务负责确定使用 asp.net*的身份验证。*

简而言之，您应该在应用程序级别*定义*您的身份验证机制（尽管您可以在任何您想要的级别*实现它）。*

顺便说一句，我建议您使用已经建立的联合协议（即 WIF）来处理多个应用程序之间的身份验证。

# java - 使用 JUnit 测试树实现

> ID：11710179
> 
> 赞同：0
> 
> 时间：2012-07-29T14:53:11.403
> 
> 标签：java, testing, junit, tree, qa

我需要为其节点测试树实现和不同的“移动”操作。我的树保存到 DB（在我们的例子中是 mongoDB，但它并不重要）。最好的方法是什么？我正在使用 JUnit。

到目前为止，我的想法如下：

*   有一个创建树结构并将其保存到数据库的 setUp 方法
*   让 setUp 方法创建树的内存副本，每个节点包含以下详细信息：父 ID、位置、名称
*   运行我要测试的每个测试功能。例如将节点从 A 移动到 B
*   将内存中的内存与新的数据库内版本进行比较。传播找到的每个差异
*   断言差异变化是预期的

创建内存中副本的原因是针对复杂树（多个级别和每个级别的节点）进行测试。否则，我必须为每个测试测试每个节点。

这有意义吗？有什么更好的方法（或更好的：可以为我做的图书馆）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:05:25.300

你的方法听起来不错。我建议进行一项更改：编写两个递归方法来代替数据库，它们生成给定树的字符串 XML 表示，并从给定的 XML 表示重新创建树。

您可以将初始树和预期树存储为每个测试用例的 XML 字符串，并且测试用例的断言是在一组操作之后的树的字符串 XML 表示是否等于（）预期的 XML 字符串。

应该很容易直观地检查各种 XML 字符串并且调试会更容易，因为当测试失败时，您可以看到实际的 XML 并将其与预期的 XML 进行直观比较。事实上，您甚至可以在记录模式下运行测试用例，它们只需写出生成的 XML 供您审查和批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:04:48.623

这种方法似乎很公平——用内存中的副本构建一棵树，现在开始在被测树和内存实例中移动节点，看看它们是否相同。

但我认为最重要的是使用两个预定义的用例-

*   空树
*   只有右/左儿子
*   递归移动
*   叶动
*   ...

和另一个使用随机树的测试。

这可能会涵盖大多数情况，之后您应该对代码充满信心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:09:29.480

理想情况下，为树提供持久性的代码应该独立于操作它的代码。这样您就可以独立地测试和修改它们。

出于测试目的，您可以考虑采用嵌套括号字符串的树构造方法。将 toString 方法添加到相同的格式，您就有了理想的测试和调试工具。

例如：

```
Tree sut( "(root,left,(right,a,b))" );
ASSERT_EQUALS( "(root,(left,c,),(right,a,b))", sut.methodUnderTest(c).toString()); 
```

我所显示的根、左、右等实际上可能是您的实际结构的更复杂表示，例如“{root,x,y,name,value}”。

关键是要让测试快速创建且易于理解，这样您就可以减少理解每个测试的时间，并有时间创建足够的测试来覆盖您的代码。

将测试与树数据的更改隔离开来很重要。为了促进这一点，您可以添加更改频率较低的 .toTestString()，而不是使用 .toString()。这样您就可以添加到您的树对象并更改 .toString() 而不会破坏测试。同样，您从字符串构建树的方法可能是一个单独的类。

# java - 登录表单在我的应用程序中不起作用

> ID：11710181
> 
> 赞同：0
> 
> 时间：2012-07-29T14:53:21.190
> 
> 标签：java

我的登录表单不起作用，请帮助我...

```
public class LoginServlet extends HttpServlet {

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String userName=request.getParameter("userName");
    String password=request.getParameter("password");
     DataPersistor d=new DataPersistor();
    try {
        if( d.isValidateUser(userName, password)){
               HttpSession session=request.getSession();
         session.setAttribute("name", userName);
         response.sendRedirect("index.jsp");
        }

         else{
             response.sendRedirect("login.jsp");

         }
    } catch (SQLException ex) {
        Logger.getLogger(LoginServlet.class.getName()).log(Level.SEVERE, null, ex);
    }

    } 

} 
```

* * *

这是我的数据持久化类。我从数据库中获取值，

```
public class DataPersistor {
    Connection con;

public DataPersistor() {
    con = DBConnector.getConnection();
}

public void registerUser(User user) {
    try {
        Statement stmt = con.createStatement();
        String query = "INSERT INTO user VALUES ('" + user.getUserName() + "','" + user.getPassword() + "','" + user.getEmail() + "','" + user.getLastName() + "','" + user.getFirstName() + "','false')";
        stmt.execute(query);

    } catch (SQLException ex) {
        Logger.getLogger(DataPersistor.class.getName()).log(Level.SEVERE, null, ex);
    }

}
public boolean isValidateUser(String username,String password) throws SQLException{
    boolean result=false;
    PreparedStatement ps;
     Statement stmt = con.createStatement();
        String query = "SELECT * FROM  user WHERE username='" + username + "' and password='"+password+"'";
        ps=con.prepareStatement(query);
        ps.setString(1,username);
        ps.setString(2, password);

        ResultSet rs=ps.executeQuery();

        if(rs.next()==true){

            result=true;
        }
        return result;

} 
```

}

* * *

清理和构建之后

```
Jul 29, 2012 8:51:46 PM com.asiahospital.servlet.LoginServlet doPost
SEVERE: null
java.sql.SQLException: Parameter index out of range (1 > number of parameters, which is 0).
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.PreparedStatement.checkBounds(PreparedStatement.java:3729)
    at com.mysql.jdbc.PreparedStatement.setInternal(PreparedStatement.java:3713)
    at com.mysql.jdbc.PreparedStatement.setString(PreparedStatement.java:4553)
    at com.asiahospital.db.DataPersistor.isValidateUser(DataPersistor.java:50)
    at com.asiahospital.servlet.LoginServlet.doPost(LoginServlet.java:32)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)`enter code here` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:03:48.477

您的连接似乎没有正确初始化。

```
Statement stmt = con.createStatement(); 
```

检查返回的内容

```
DBConnector.getConnection() 
```

从您更新的帖子（！）中，问题是您准备好的语句不包含任何“？” 占位符字符。

```
public boolean isValidateUser(String username, String password) throws SQLException {
    boolean result = false;

    String query = "SELECT * FROM  user WHERE username='?' and password='?'";
    PreparedStatement ps = con.prepareStatement(query);
    ps.setString(1, username);
    ps.setString(2, password);

    ResultSet rs = ps.executeQuery();

    if (rs.next() == true) {
       result = true;
    }

    return result;
} 
```

# php - 无法使用表单编辑 mysql 行

> ID：11710184
> 
> 赞同：0
> 
> 时间：2012-07-29T14:53:56.563
> 
> 标签：php, mysql, forms

我正在尝试创建一个表单来编辑我的数据库表中的行。（基于我从 StackOverflow 页面获得的一些代码。）

我可以使用相关数据填充表单，但是当我提交表单时，该行没有更新。事实上，我的一些专栏被删除了。

我做错什么了？

编辑.php

```
<?php

$UID = (int)$_GET['f'];
$query = mysql_query("SELECT * FROM user_feeds WHERE feed_id = '$UID'") or die(mysql_error());

if(mysql_num_rows($query)>=1){
    while($row = mysql_fetch_array($query)) {
        $feedtitle = $row['feed_title'];
        $feedurl = $row['feed_url'];
        $feedorder = $row['feed_order'];
        $feedowner = $row['feed_owner'];
    }
?>
<form action="update.php" method="post">
<input type="hidden" name="ID" value="<?=$UID;?>">
Title:<br /> <input type="text" name="ud_feedtitle" value="<?=$feedtitle?>"><br>
URL: <br /> <input type="text" name="ud_feedurl" value="<?=$feedurl?>"><br>
Order: <br /> <input type="text" name="ud_feedorder" value="<?=$feedorder?>"><br>
Owner:<br /> <input type="text" name="ud_feedowner" value="<?=$feedowner;?>"><br>
<input type="Submit">
</form>
<?php
}else{
    echo 'No entry found. <a href="javascript:history.back()">Go back</a>';
}
?>
</div>
</body>
</html> 
```

更新.php

```
 <?php

$ud_ID = $_REQUEST["ID"];
$ud_feedtitle = $_POST["feed_title"];
$ud_feedurl = $_POST["feed_url"];
$ud_feedorder = $_POST["feed_order"];
$ud_feedowner = $_POST["feed_owner"];

$query = "UPDATE user_feeds SET feed_title = '$ud_feedtitle', feed_url = '$ud_feedurl', feed_order = '$ud_feedorder', feed_owner = '$ud_feedowner', WHERE feed_id = '$ud_ID'";

$res = mysql_query($query);

if ($res)
  echo "<p>Record Updated<p>";

else
  echo "Problem updating record. MySQL Error: " . mysql_error();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:57:00.300

**原因：**

输入字段的名称与填充**$_POST**的名称相同。您当前请求的变量：

```
$_POST["feed_title"];, $_POST["feed_url"];,  $_POST["feed_order"];, $_POST["feed_owner"]; 
```

都是空的，因为它们不存在。更新时，您将表中的值替换为空白值。

* * *

**解决方案：**

在您`update.php,`的以下内容中应该存在。

```
$ud_ID = $_POST["ID"];
$ud_feedtitle = $_POST["ud_feedtitle"]; //corresponding to <input type="text" name="ud_feedtitle" ...
$ud_feedurl = $_POST["ud_feedurl"]; //corresponding to <input type="text" name="ud_feedurl" ...
$ud_feedorder = $_POST["ud_feedorder"]; //corresponding to <input type="text" name="ud_feedorder" ...
$ud_feedowner = $_POST["ud_feedowner"]; //corresponding to <input type="text" name="ud_feedowner" ... 
```

# java - Java Chat系统协议设计，如何判断消息类型？

> ID：11710187
> 
> 赞同：2
> 
> 时间：2012-07-29T14:54:20.570
> 
> 标签：java, chat, protocols

我有一个用 Java 实现的聊天程序。客户端可以向服务器发送许多不同类型的信息（即，加入服务器并发送用户名、密码；请求与服务器上的另一个用户进行私人聊天，断开与服务器的连接等）。

我正在寻找正确的方法让服务器/客户端区分“文本”消息，这些消息只是从一个客户端发送给其他客户端的聊天文本消息，以及“命令”消息（断开连接、请求私人聊天、请求用于服务器或客户端的文件传输等）。

我看到两个选项：

1.  使用序列化对象，并通过执行“instanceof”来确定它们在接收端是什么
2.  将数据作为字节数组发送，保留数组的前 N ​​个字节以指定传入数据的“类型”。

这样做的“正确”方法是什么？真正的协议（oscar，irc）如何处理这种情况？

我在这个主题上搜索了一下，只找到了以简单的 Java 聊天应用程序为中心的示例/讨论。没有详细介绍协议设计（我最终打算实践）。

感谢任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:33:23.837

第二种方法要好得多，因为序列化是一种复杂的机制，很容易以错误的方式使用（例如，您可能会将自己绑定到具体序列化类的内部内容）。另外，您的协议将绑定到 JVM 机制。使用一些“协议头”来区分消息是网络协议（FTP、HTTP 等）中的常用方法。当它是文本形式时更好（人们将能够阅读它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:00:02.950

您通常有一个小的消息头来标识*所有*消息中的内容类型，包括标准文本/聊天消息。

您的两个建议中的任何一个都可以。（在您的第二种方法中，您可能还想为数组的*长度保留一些字节。）*

# jquery - jQuery FlexSlider 和轮播缩略图导航

> ID：11710188
> 
> 赞同：2
> 
> 时间：2012-07-29T14:55:00.853
> 
> 标签：jquery, flexslider

我正在使用 jQUery FlexSlider 以下是我的代码

```
<link rel="stylesheet" type="text/css" href="css/gallery/shCore.css" />
<link rel="stylesheet" type="text/css" href="css/gallery/shThemeDefault.css" />
<link rel="stylesheet" type="text/css" href="css/gallery/flexslider.css" />

<script type="text/javascript" src="js/gallery/modernizr.js"></script>
<script type="text/javascript" src="js/gallery/jquery.flexslider.js" ></script>
<script type="text/javascript" src="js/gallery/shCore.js"></script> 
<script type="text/javascript" src="js/gallery/shBrushXml.js"></script>
<script type="text/javascript" src="js/gallery/shBrushJScript.js"></script>

<script type="text/javascript" src="js/gallery/jquery.easing.js"></script>
<script type="text/javascript" src="js/gallery/jquery.mousewheel.js"></script> 
```

和下面的 isin 身体

```
<body>
<div id="slider" class="flexslider">
                      <ul class="slides">
                             <li >
                              <img src="images/gallery/1.jpg" alt="image01" data-description="Fiesta Gallery" height="299px" width="450px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/2.jpg" alt="image01" data-description="Fiesta Gallery" height="299px" width="450px"/> 
                            </li>
                            <li >
                              <img src="images/gallery/3.jpg" alt="image01" data-description="Fiesta Gallery" height="299px" width="450px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/4.jpg" alt="image01" data-description="Fiesta Gallery" height="299px" width="450px" /> 
                            </li>   
                            <li >
                              <img src="images/gallery/5.jpg" alt="image01" data-description="Fiesta Gallery" height="299px" width="450px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/6.jpg" alt="image93" data-description="Fiesta Gallery" height="299px" width="450px" />
                            </li>
                            <li >
                              <img src="images/gallery/7.jpg" alt="image97" data-description="Fiesta Gallery" height="299px" width="450px" />
                            </li>
                            <li >
                              <img src="images/gallery/8.jpg" alt="image108" data-description="Fiesta Gallery" height="299px" width="450px" />
                            </li>
</ul>
                    </div>
                    <div id="carousel" class="flexslider" style="margin-top:-50px;">
                      <ul class="slides">
                            <li >
                              <img src="images/gallery/thumbs/1.jpg" height="100px"  /> 
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/2.jpg" height="100px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/3.jpg" height="100px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/4.jpg" height="100px" /> 
                            </li>       
                            <li >
                              <img src="images/gallery/thumbs/5.jpg"  height="100px" /> 
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/6.jpg" height="100px" />
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/7.jpg" height="100px" />
                            </li>
                            <li >
                              <img src="images/gallery/thumbs/8.jpg" height="100px" />
                            </li>
</ul>
                    </div>
</body> 
```

以下是head部分的配置

```
$(function(){
      SyntaxHighlighter.all();
    });
    $(window).load(function() {
      // The slider being synced must be initialized first
      $('#carousel').flexslider({
        animation: "slide",
        controlNav: false,
        animationLoop: true,
        directionNav: false,
        slideshow: false,       
        slideshowSpeed: 7500,
        animationSpeed: 400,   
        itemWidth: 150,
        itemMargin: 5,
        startAt: 0, 
        move : 3,             
        asNavFor: '#slider'

      });

      $('#slider').flexslider({
        animation: "slide",
        controlNav: false,
        animationLoop: true,
        slideshowSpeed: 7500,
        animationSpeed: 400,
        pauseOnAction: false,
        slideshow: true,
        startAt: 0, 
        sync: "#carousel",
        start: function(slider) {
        $('#carousel .slides li img').click(function(event){
            event.preventDefault();
            //slider.flexAnimate(slider.getTarget("next"));
            var count = slider.currentSlide + 1;
            slider.flexAnimate(count);
        });
        }
      });
    }); 
```

从上面的代码中，我可以进行自动滑动、左/右按钮导航，并且在一些缩略图中单击它可以工作。

但是如果我点击当前缩略图后面的两个缩略图，它会停止自动滑动。

我怎样才能解决这个问题？任何帮助将不胜感激。

提前感谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:27:53.130

我用以下代码替换：它有效

```
start: function(slider) {
    $('#carousel .slides li img').click(function(event){
        $('#slider').flexslider("play");
    });
} 
```

我可以从参考中弄清楚： [https ://github.com/woothemes/FlexSlider/](https://github.com/woothemes/FlexSlider/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T02:30:48.263

这是HTML结构

```
 <div class="g-s-wrapper">

              <div class="flexslider">

                <ul class="slides">

                  <li data-thumb="assets/img/gallery-photo/1.jpg">
                    <img src="assets/img/gallery-photo/1.jpg" alt="">
                  </li>

                  <li data-thumb="assets/img/gallery-photo/2.jpg">
                    <img src="assets/img/gallery-photo/2.jpg" alt="">
                  </li>

                </ul> <!-- .slides -->

              </div>  <!-- .flexslider -->

            </div>  <!-- .gallery slider wrapper --> 
```

当你调用 flexslider 函数时，使用如下

```
 if ($('.g-s-wrapper').length > 0) {

    $(window).load(function () {
        $('.g-s-wrapper .flexslider').flexslider({
            slideshowSpeed: 2000,
            directionNav: false, 
            controlNav: true,
            start: function(){
                var slide_li = $('.g-s-wrapper ul.slides li').not('.clone');
                var control_li = $('.g-s-wrapper .flexslider .flex-control-nav li a');
                console.log(control_li);
                $.each(slide_li, function(index, el){
                    var img_src = $('<img src="" />').attr('src', $(el).attr('data-thumb'));
                                img_src.appendTo(control_li[index]);

                });                             
            }   
        });
    }); 
```

# android - eclipse android sdk 更新到 v20 破坏了我的安装

> ID：11710190
> 
> 赞同：2
> 
> 时间：2012-07-29T14:55:06.183
> 
> 标签：android, eclipse

我的 AVD 通知我 v20 的更新。但是这样做之后，我就不能再使用 Eclipse 进行 Android 开发了。

当我尝试使用帮助 -> 检查更新时：

![发现更新](../Images/832e4f73f27eda21b04e5b90a9d35559.png)

然后单击*下一步*，然后我会收到如下所示的错误。我无法找到解决此问题的方法？我不打算卸载 eclipse 并从头开始。

```
 An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.jcraft.jsch,0.1.46.v201205102330
No repository found containing: osgi.bundle,javax.persistence,2.0.4.v201112161009
No repository found containing: osgi.bundle,javax.servlet,3.0.0.v201112011016
No repository found containing: osgi.bundle,javax.servlet.jsp,2.2.0.v201112011158
No repository found containing: osgi.bundle,org.apache.ant,1.8.3.v20120321-1730
No repository found containing: osgi.bundle,org.apache.commons.lang,2.6.0.v201205030909
No repository found containing: osgi.bundle,org.eclipse.ant.core,3.2.400.v20120523-1752
No repository found containing: osgi.bundle,org.eclipse.ant.launching,1.0.200.v20120530-1204
No repository found containing: osgi.bundle,org.eclipse.ant.ui,3.5.300.v20120523-1752
No repository found containing: osgi.bundle,org.eclipse.compare,3.5.300.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.compare.core,3.5.200.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.compare.win32,1.0.200.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.core.commands,3.6.1.v20120521-2329
No repository found containing: osgi.bundle,org.eclipse.core.contenttype,3.4.200.v20120523-2004
No repository found containing: osgi.bundle,org.eclipse.core.databinding,1.4.1.v20120521-2329
No repository found containing: osgi.bundle,org.eclipse.core.databinding.beans,1.2.200.v20120523-1955
No repository found containing: osgi.bundle,org.eclipse.core.databinding.observable,1.4.1.v20120521-2329
No repository found containing: osgi.bundle,org.eclipse.core.databinding.property,1.4.100.v20120523-1955
No repository found containing: osgi.bundle,org.eclipse.core.expressions,3.4.400.v20120523-2004
No repository found containing: osgi.bundle,org.eclipse.core.externaltools,1.0.100.v20120521-2012
No repository found containing: osgi.bundle,org.eclipse.core.filebuffers,3.5.200.v20120523-1310
No repository found containing: osgi.bundle,org.eclipse.core.filesystem,1.3.200.v20120522-2012
No repository found containing: osgi.bundle,org.eclipse.core.filesystem.win32.x86,1.1.300.v20120522-1137
No repository found containing: osgi.bundle,org.eclipse.core.jobs,3.5.200.v20120521-2346
No repository found containing: osgi.bundle,org.eclipse.core.net,1.2.200.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.core.net.win32.x86,1.0.100.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.core.resources,3.8.0.v20120522-2034
No repository found containing: osgi.bundle,org.eclipse.core.resources.win32.x86,3.5.100.v20120522-1137
No repository found containing: osgi.bundle,org.eclipse.core.runtime,3.8.0.v20120521-2346
No repository found containing: osgi.bundle,org.eclipse.core.runtime.compatibility,3.2.200.v20120521-2346
No repository found containing: osgi.bundle,org.eclipse.core.runtime.compatibility.registry,3.5.100.v20120521-2346
No repository found containing: osgi.bundle,org.eclipse.core.variables,3.2.600.v20120521-2012
No repository found containing: osgi.bundle,org.eclipse.cvs,1.2.0.v201206081400
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity,1.2.5.v201206130431
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.design,3.3.5.v201204241156
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.design.ui,3.2.7.v201205221153
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.flatfile,3.1.2.v201206121559
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.flatfile.ui,3.1.3.v201203221637
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.oda.profile,3.2.7.v201203291105
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.core,1.2.5.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.core.ui,1.2.2.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.sqm.server.ui,1.1.100.v201202021103
No repository found containing: osgi.bundle,org.eclipse.datatools.connectivity.ui,1.2.3.v201205240353
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.iseries.ui,1.0.2.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.luw.ui,1.0.3.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.db2.zseries.ui,1.0.2.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.ibm.informix.ui,1.0.3.v201202100836
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.msft.sqlserver.dbdefinition,1.0.1.v201201240505
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.mysql,1.0.3.v201205252211
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oda.ws,1.2.4.v201203221631
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oda.ws.ui,1.2.4.v201203221631
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.oracle.dbdefinition,1.0.103.v201206010214
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.postgresql,1.1.1.v201205252207
No repository found containing: osgi.bundle,org.eclipse.datatools.enablement.sqlite.dbdefinition,1.0.2.v201206010441
No repository found containing: osgi.bundle,org.eclipse.datatools.modelbase.sql.query,1.1.3.v201206060918
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.editor.core,1.0.2.v201205310904
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.parsers.sql.query,1.2.1.v201201250511
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.result,1.1.3.v201205310911
No repository found containing: osgi.bundle,org.eclipse.datatools.sqltools.sqlscrapbook,1.0.2.v201205310922
No repository found containing: osgi.bundle,org.eclipse.debug.core,3.7.100.v20120521-2012
No repository found containing: osgi.bundle,org.eclipse.debug.ui,3.8.0.v20120530-1753
No repository found containing: osgi.bundle,org.eclipse.draw2d,3.8.0.201206112118
No repository found containing: osgi.bundle,org.eclipse.dstore.core,3.3.100.201205300905
No repository found containing: osgi.bundle,org.eclipse.dstore.extra,2.1.400.201205300905
No repository found containing: osgi.bundle,org.eclipse.ecf,3.1.300.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.filetransfer,5.0.0.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.identity,3.1.200.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.provider.filetransfer,3.2.0.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.provider.filetransfer.httpclient,4.0.200.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.provider.filetransfer.httpclient.ssl,1.0.0.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.provider.filetransfer.ssl,1.0.0.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.ecf.ssl,1.0.100.v20120608-0148
No repository found containing: osgi.bundle,org.eclipse.emf,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ant,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore.ui,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.common,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.common.ui,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.converter,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.databinding,1.2.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.databinding.edit,1.2.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.change,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.change.edit,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.edit,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.editor,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.xmi,2.8.0.v20120606-0717
No repository found containing: osgi.bundle,org.eclipse.emf.edit,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.edit.ui,2.8.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.exporter,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.ecore,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.java,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.importer.rose,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore.editor,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2ecore,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2ecore.editor,2.5.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2xml,2.7.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ecore2xml.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.emf.mapping.ui,2.6.0.v20120608-0554
No repository found containing: osgi.bundle,org.eclipse.epp.package.jee,1.5.0.20120131-1544
No repository found containing: osgi.bundle,org.eclipse.equinox.app,1.3.100.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.common,3.6.100.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.concurrent,1.0.300.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.ds,1.4.0.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.event,1.2.200.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.frameworkadmin,2.0.100.v20120606-175127
No repository found containing: osgi.bundle,org.eclipse.equinox.frameworkadmin.equinox,1.0.400.v20120428-0117
No repository found containing: osgi.bundle,org.eclipse.equinox.http.jetty,3.0.0.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.http.registry,1.1.200.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.http.servlet,1.1.300.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.jsp.jasper,1.0.400.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.jsp.jasper.registry,1.0.300.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.launcher,1.3.0.v20120522-1813
No repository found containing: osgi.bundle,org.eclipse.equinox.launcher.win32.win32.x86,1.1.200.v20120522-1813
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.artifact.repository,1.1.200.v20120430-1959
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.console,1.0.300.v20120429-0125
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.core,2.2.0.v20120430-0525
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.director,2.2.0.v20120524-0542
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.director.app,1.0.300.v20120428-0517
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.discovery,1.0.200.v20120524-1717
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.discovery.compatibility,1.0.101.v20120524-1717
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.engine,2.2.0.v20120501-1502
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.metadata,2.1.0.v20120430-2001
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.metadata.repository,1.2.100.v20120524-1717
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.operations,2.2.0.v20120524-0542
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.publisher,1.2.0.v20120428-0117
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.publisher.eclipse,1.1.0.v20120511-1931
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.reconciler.dropins,1.1.200.v20120301-2145
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.repository,2.2.0.v20120524-1945
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.repository.tools,2.0.100.v20120501-1314
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.touchpoint.eclipse,2.1.100.v20120428-0117
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.touchpoint.natives,1.1.0.v20120524-0542
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.transport.ecf,1.0.100.v20120305-0333
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.ui,2.2.0.v20120524-0542
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.ui.discovery,1.0.0.v20110808-1657
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.ui.importexport,1.0.1.v20110818-1344
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.ui.sdk,1.0.200.v20120515-1650
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.ui.sdk.scheduler,1.1.0.v20110815-1744
No repository found containing: osgi.bundle,org.eclipse.equinox.p2.updatesite,1.0.400.v20120412-1615
No repository found containing: osgi.bundle,org.eclipse.equinox.preferences,3.5.0.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.registry,3.5.200.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.security,1.1.100.v20120522-1841
No repository found containing: osgi.bundle,org.eclipse.equinox.security.ui,1.1.100.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.security.win32.x86,1.0.300.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.equinox.simpleconfigurator,1.0.300.v20110815-1744
No repository found containing: osgi.bundle,org.eclipse.equinox.util,1.0.400.v20120522-2049
No repository found containing: osgi.bundle,org.eclipse.gef,3.8.0.201206112118
No repository found containing: osgi.bundle,org.eclipse.help,3.6.0.v20120521-2344
No repository found containing: osgi.bundle,org.eclipse.help.base,3.6.100.v201206081400
No repository found containing: osgi.bundle,org.eclipse.help.ui,3.5.200.v20120521-2344
No repository found containing: osgi.bundle,org.eclipse.help.webapp,3.6.100.v20120521-2344
No repository found containing: osgi.bundle,org.eclipse.jdt,3.8.0.v201206081400
No repository found containing: osgi.bundle,org.eclipse.jdt.apt.core,3.3.500.v20120522-1651
No repository found containing: osgi.bundle,org.eclipse.jdt.apt.pluggable.core,1.0.400.v20120522-1651
No repository found containing: osgi.bundle,org.eclipse.jdt.apt.ui,3.3.300.v20120522-1651
No repository found containing: osgi.bundle,org.eclipse.jdt.compiler.apt,1.0.500.v20120522-1651
No repository found containing: osgi.bundle,org.eclipse.jdt.compiler.tool,1.0.101.v20120522-1651
No repository found containing: osgi.bundle,org.eclipse.jdt.core,3.8.1.v20120531-0637
No repository found containing: osgi.bundle,org.eclipse.jdt.core.manipulation,1.5.0.v20120523-1543
No repository found containing: osgi.bundle,org.eclipse.jdt.debug,3.7.100.v20120529-1702
No repository found containing: osgi.bundle,org.eclipse.jdt.debug.ui,3.6.100.v20120530-1425
No repository found containing: osgi.bundle,org.eclipse.jdt.doc.user,3.8.0.v20120606-134218
No repository found containing: osgi.bundle,org.eclipse.jdt.junit,3.7.100.v20120523-1543
No repository found containing: osgi.bundle,org.eclipse.jdt.junit.core,3.7.100.v20120523-1257
No repository found containing: osgi.bundle,org.eclipse.jdt.junit.runtime,3.4.300.v20120523-1257
No repository found containing: osgi.bundle,org.eclipse.jdt.junit4.runtime,1.1.200.v20120523-1257
No repository found containing: osgi.bundle,org.eclipse.jdt.launching,3.6.100.v20120523-1953
No repository found containing: osgi.bundle,org.eclipse.jdt.ui,3.8.0.v20120524-1551
No repository found containing: osgi.bundle,org.eclipse.jem,2.0.600.v201201051400
No repository found containing: osgi.bundle,org.eclipse.jface,3.8.0.v20120521-2329
No repository found containing: osgi.bundle,org.eclipse.jface.databinding,1.6.0.v20120521-2329
No repository found containing: osgi.bundle,org.eclipse.jface.text,3.8.0.v20120531-0600
No repository found containing: osgi.bundle,org.eclipse.jpt.common.branding,1.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.common.core,1.2.0.v201205240000
No repository found containing: osgi.bundle,org.eclipse.jpt.common.eclipselink.branding,1.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.common.eclipselink.core,1.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.common.ui,1.2.0.v201205150000
No repository found containing: osgi.bundle,org.eclipse.jpt.common.utility,2.1.0.v201205020001
No repository found containing: osgi.bundle,org.eclipse.jpt.dbws.eclipselink.branding,1.1.100.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.dbws.eclipselink.ui,1.0.200.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.doc.user,1.4.2.v201205290002
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.branding,1.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.core,1.2.0.v201205100000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.core.schemagen,1.0.200.v201203050000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.eclipselink.branding,1.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.eclipselink.core,1.2.0.v201204160000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.eclipselink.ui,1.3.0.v201204160000
No repository found containing: osgi.bundle,org.eclipse.jpt.jaxb.ui,1.3.0.v201205180000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.branding,3.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.core,3.2.0.v201206110000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.db,2.1.100.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.eclipselink.branding,3.2.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.eclipselink.core,2.2.0.v201205240000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.eclipselink.core.ddlgen,2.1.0.v201203150000
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.eclipselink.ui,2.2.0.v201205020001
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.gen,2.2.0.v201205020001
No repository found containing: osgi.bundle,org.eclipse.jpt.jpa.ui,3.2.0.v201205230001
No repository found containing: osgi.bundle,org.eclipse.jsch.core,1.1.400.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.jsch.ui,1.1.400.v20120522-1148
No repository found containing: osgi.bundle,org.eclipse.jst.common.frameworks,1.1.600.v201204190200
No repository found containing: osgi.bundle,org.eclipse.jst.common.project.facet.core,1.4.201.v201108161900
No repository found containing: osgi.bundle,org.eclipse.jst.common.ui,1.0.200.v201202020230
No repository found containing: osgi.bundle,org.eclipse.jst.ejb.ui,1.1.700.v201201190500
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee,1.1.600.v201205170400
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.core,1.2.200.v201205030130
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.ejb,1.1.600.v201205030130
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.jca,1.1.600.v201111012200
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.navigator.ui,1.1.600.v201203142300
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.ui,1.1.600.v201205170400
No repository found containing: osgi.bundle,org.eclipse.jst.j2ee.web,1.1.600.v201203142300
No repository found containing: osgi.bundle,org.eclipse.jst.jee,1.0.500.v201202020745
No repository found containing: osgi.bundle,org.eclipse.jst.jee.ui,1.0.500.v201205170400
No repository found containing: osgi.bundle,org.eclipse.jst.jsf.core,1.4.0.v201205241050
No repository found containing: osgi.bundle,org.eclipse.jst.jsf.facelet.core,1.0.200.v201205161442
No repository found containing: osgi.bundle,org.eclipse.jst.jsf.facesconfig,1.2.100.v2012030703072246
No repository found containing: osgi.bundle,org.eclipse.jst.jsf.facesconfig.ui,1.2.100.v201201111516
No repository found containing: osgi.bundle,org.eclipse.jst.jsf.ui,1.3.200.v201202131530
No repository found containing: osgi.bundle,org.eclipse.jst.jsp.core,1.2.500.v201203071954
No repository found containing: osgi.bundle,org.eclipse.jst.jsp.ui,1.1.700.v201204260100
No repository found containing: osgi.bundle,org.eclipse.jst.pagedesigner,1.3.200.v2012030703072246
No repository found containing: osgi.bundle,org.eclipse.jst.pagedesigner.jsp.core,1.2.100.v201112111111
No repository found containing: osgi.bundle,org.eclipse.jst.server.core,1.2.302.v20120503_1042
No repository found containing: osgi.bundle,org.eclipse.jst.server.preview.adapter,1.1.200.v20120517_1442
No repository found containing: osgi.bundle,org.eclipse.jst.server.tomcat.core,1.1.400.v20120418_1501
No repository found containing: osgi.bundle,org.eclipse.jst.server.tomcat.ui,1.1.300.v20120420_1012
No repository found containing: osgi.bundle,org.eclipse.jst.servlet.ui,1.1.600.v201202011057
No repository found containing: osgi.bundle,org.eclipse.jst.ws,1.0.600.v201108242234
No repository found containing: osgi.bundle,org.eclipse.jst.ws.annotations.core,1.2.0.v201203272107
No repository found containing: osgi.bundle,org.eclipse.jst.ws.axis.consumption.ui,1.0.700.v201204181727
No repository found containing: osgi.bundle,org.eclipse.jst.ws.axis.creation.ui,1.0.750.v201204120428
No repository found containing: osgi.bundle,org.eclipse.jst.ws.consumption,1.0.700.v201204102147
No repository found containing: osgi.bundle,org.eclipse.jst.ws.consumption.ui,1.1.500.v201204102147
No repository found containing: osgi.bundle,org.eclipse.jst.ws.creation.ui,1.0.700.v201205041550
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.consumption.core,1.0.200.v201201312103
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.consumption.ui,1.0.200.v201201312103
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.core,1.1.0.v201205012246
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.creation.core,1.0.200.v201205012246
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.creation.ui,1.0.200.v201204221838
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.doc.user,1.0.200.v201205231944
No repository found containing: osgi.bundle,org.eclipse.jst.ws.cxf.ui,1.0.200.v201203062228
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxrs.core,1.0.400.v201202152223
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxrs.ui,1.0.500.v201205020140
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.core,1.0.200.v201204172145
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.doc.user,1.0.200.v201205231938
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.dom.integration,1.0.200.v201109042201
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.dom.runtime,1.0.200.v201109042201
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.ui,1.0.200.v201204221614
No repository found containing: osgi.bundle,org.eclipse.jst.ws.jaxws.utils,1.0.200.v201201032002
No repository found containing: osgi.bundle,org.eclipse.ltk.core.refactoring,3.6.0.v20120523-1543
No repository found containing: osgi.bundle,org.eclipse.ltk.ui.refactoring,3.7.0.v20120523-1543
No repository found containing: osgi.bundle,org.eclipse.mylyn.bugzilla.core,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.bugzilla.ide,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.bugzilla.ui,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.commons.core,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.commons.net,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.commons.screenshots,3.8.0.v20120612-0600
No repository found containing: osgi.bundle,org.eclipse.mylyn.commons.ui,3.8.0.v20120612-0600
truncated due to SO message limit 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T07:45:23.170

这张票有提示：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=290782](https://bugs.eclipse.org/bugs/show_bug.cgi?id=290782)

从窗口 -> 首选项 -> 安装/更新 -> 可用软件站点中删除所有 url，然后重试更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:24:58.880

检查Eclipse所在的目录是否可写。例如，如果它在 Program Files 中，则它是不可写的。

如果是，则将 Eclipse 移动到可写位置，例如 My Documents/Eclipse。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T20:38:03.760

转到窗口 -> 首选项 -> 安装/更新 -> 可用软件站点，找到 ADT 插件的 url 并将 https 更改为 http（例如[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)到[http:// dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)）。当您完成更新操作时，将更改的 url 还原为 https。它应该有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:52:17.177

我认为当您将 Android SDK 工具和 Android SDK 平台工具从修订版 19 更新到修订版 20（使用 SDK 管理器进行更新）时，问题可以解决。成功更新这些工具后，您可以返回 Eclipse 并更新您的 ADT 插件。

正如这里所说：http: [//developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

依赖项：

ADT 20.0.2 需要 Java 1.6 或更高版本。ADT 20.0.2 需要 Eclipse Helios（版本 3.6.2）或更高版本。ADT 20.0.2 设计用于 SDK Tools r20.0.1。如果您尚未将 SDK Tools r20.0.1 安装到您的 SDK 中，请使用 Android SDK 管理器来安装。

Bug修复：

修复了 Eclipse 4.x 的各种 XML 编辑器中的键绑定。修复了创建已存在的布局配置时的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T07:08:47.433

尽管我有所有正确的要求，但我遇到了类似的问题。

Java 1.6 和 1.7、Eclipse Indigo (v3.7)、ADT v18 和 SDK 18（带有 Android v4.0.3）。我想升级到 v20 ADT 和 SDK，但 Eclipse 抛出了上面列出的相同错误。我手动升级了 SDK，但 Eclipse 拒绝升级。我卸载了 ADT v18，希望可以安装新的 ADT v20，但无济于事，即使从[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)下载了 ADT v20 。

最后，我升级到 Eclipse Juno (v4.2)，一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T03:27:09.790

将 eclipse 移至 c:\ 驱动器后，一切正常。谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-05T02:08:46.513

试试这些步骤，对我有用。

*   转到首选项/安装/可用软件站点
*   导出所有书签
*   删除所有书签
*   编辑 bookmarks.xml 并在每个 URL 的末尾添加一个反斜杠
*   导入书签.xml
*   检查更新...

来源： http://forums.zend.com/viewtopic.php?f=59& [t=120338](http://forums.zend.com/viewtopic.php?f=59&t=120338)

# java - 如何在 Eclipse 中导入“org.apache.http.client.HttpClient”？

> ID：11710191
> 
> 赞同：7
> 
> 时间：2012-07-29T14:55:23.523
> 
> 标签：java, apache

我按照[这里](http://hc.apache.org/httpcomponents-core-ga/download.html)`httpcore.jar`的步骤试过了，但是写的时候还是找不到。jar 已经由 Maven 下载。`import org.apache.http.client.HttpClient`

`httpcore`导入的库是正确的`org.apache.http.client.HttpClient`吗？还是`org.apache.http.client.HttpClient`仅用于Android开发？

`org.apache.http.client.HttpClient`另一个问题，和有什么区别`org.apache.commons.httpclient.HttpClient`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:33:46.137

首先：[http ://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

> Commons HttpClient 项目现已结束，不再开发。它已被其 HttpClient 和 HttpCore 模块中的 Apache HttpComponents 项目所取代，这些模块提供了更好的性能和更大的灵活性。

因此，您需要使用 HttpClient (http://hc.apache.org/httpcomponents-client-ga/index.html)，而不是 Commons HttpClient（查看您所说的包的名称）。

是的，org.apache.http.client.HttpClient 是正确的包。

您确定 Maven 获得了 .jar 并且它在您的类路径中吗？

# jquery - 如何将jQuery变量传递给对话框打开的div

> ID：11710193
> 
> 赞同：3
> 
> 时间：2012-07-29T14:55:31.500
> 
> 标签：jquery, html

我正在为我的一个网站开发一个用户管理面板，我试图弄清楚如何正确地将所有正确的信息传递给对话框。

显示用户的**HTML**是这样的：

```
<table>
  <tr>
    <td>{$v.id}</td>
    <td><a href="#" class="editUser" data-userid="{$v.id}">{$v.username}</a></td>
    <td>{if $smarty.now - $v.last_active <= 900}<span style="color: green;">Online</span>{else}<span style="color: #e61e1e;">Offline</span>{/if}</td>
    <td>{$v.email}</td>
    <td>{$v.time}</td>
    <td>{$v.notes}</td>
    <td align="center"><input name="delete" type="checkbox"/></td>
  </tr>
</table> 
```

当您单击用户名时，它会打开一个带有**jQ​​uery UI**的对话框，这是处理该问题的**jQuery**代码：

```
 $('a.editUser').click(function(){
        $('#editUser').dialog('open');
        //var userID = $(this).data('userid');
        //var username = $(this).attr('title');
        //$('#editUser').html(userID);
   }); 
```

非常简单。注释掉的代码是我用来测试以确保它区分用户的代码。

当然，这会打开对话框并且工作得很好。但是，我不确定如何设置 div 以在对话框打开时正确显示用户信息。此外，我希望能够向用户的帐户提交更改，但我不确定如何将用户的 ID 提交给表单处理器，以便它知道要修改哪个用户。

我已经在谷歌上搜索了一段时间，发现了许多类似的线程，但没有一个真正涵盖这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:31:51.707

创建你的#editUser div

```
<div id="editUser">
<span id="username"></span>
</div> 
```

在您的函数中，在调用函数**之前**使用单击的用户信息填充对话框`dialog`。

```
$('a.editUser').click(function(){
        $("#username").html($(this).data('userid'));
        $('#editUser').dialog('open');
        //var userID = $(this).data('userid');
        //var username = $(this).attr('title');
        //$('#editUser').html(userID);
   }); 
```

现在使用隐藏变量在其他地方创建您的表单。在您的提交按钮上，调用一个 javascript 函数，该函数将从上述 id 中提取信息，例如 $("#username") 或 JS 变量（如果您使用它们并在提交之前设置到表单中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:05:51.650

好的，因为对话框`div`与上面的代码在同一个文档中，您可以添加一个具有已知 id 的 div，例如`<div id="stufftochange"></div>`添加到对话框的 div 中。

然后，在打开 div 之前，调用`$('#stufftochange').html("user's info here");`动态更改其内容，然后`$('#editUser').dialog('open');`

# php - 从字符串中删除我想要的任何内容

> ID：11710194
> 
> 赞同：0
> 
> 时间：2012-07-29T14:55:37.303
> 
> 标签：php, regex, preg-replace

我想从我的 php 字符串中删除一些关键字、符号、字母等。我正在尝试添加它，但效果不太好。

```
$string = preg_replace("/(?![=$'%-mp4mp3])\p{P}/u","", $check['title']); 
```

几乎我想从字符串中删除单词 mp3、mp4、./、apples。

请帮助指导我，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:09:37.137

第一：`[]`在正则表达式中引入了一个字符类。连字符用于表示两个符号之间的字符范围。因此，您的正则表达式会进行太多擦除（如我所想）的原因是`[=$'%-mp4mp3]`因为`=, $, ', everything from % to m (72 characters actually!), p, 3, 4`.

第二：您的正则表达式不会抓取“坏”字符/关键字。实际上，您在坏字符/关键字之后删除标点符号，因为负前瞻是元序列（它不包含在匹配中）。

将您的正则表达式更改为：

```
"/[=$'%-]|mp3|mp4/u" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:06:53.063

你不需要正则表达式。

```
$string = "Your original string here";
$keywords = array('mp3', 'mp4');
echo str_replace($keywords, '', $string); 
```

# .net - 将 VS11 Beta 升级到 VS2012 RC 后 app.config 中支持的 runtime v4.0

> ID：11710195
> 
> 赞同：14
> 
> 时间：2012-07-29T14:55:40.450
> 
> 标签：.net, .net-4.0, visual-studio-2012, .net-4.5

从 VS11 Beta 升级到 VS2012 RC 后 - 我已从面向 .NET 4.0 修改为 .NET 4.5。我在 app.config 以下部分中注意到

```
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup> 
```

以上是为了什么？

当我尝试从 VS2012 RC 中创建一个新项目（不是升级现有项目）时，我在 app.config 中看不到上述部分

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T16:20:32.267

这是永恒的 .NET 版本控制泥潭的副作用。.NET 4.5 不是 .NET 框架的并行版本，它完全取代了 .NET 4.0 安装。很像 3.0 和 3.5 取代了 .NET 2.0 安装。

3.0 和 3.5 的更新相当温和，框架刚刚获得了一堆新的程序集。CLR 和核心基类程序集没有改变。很多。

4.5 版本框架附带的 clr.dll 文件仍然有 4.0.30319 版本号。CLR 4.0 版本的版本号相同。并且可以轻松执行以 .NET 4.0 框架为目标的 .NET 应用程序。

然而，该框架版本在内部进行了大量修改。它获得了语言投影，可以使用托管语言编写在 Windows 8 上运行的 Metro 应用程序。重大变化包括将课程从一个程序集移动到另一个程序集，允许在手机或平板电脑上进行适度部署。添加到项目的 app.exe.config 文件可确保您的用户拥有所需的版本。部署 .config 文件是可选的，但是当用户只安装了 .NET 4.0 时，他会看到一条非常不透明的异常消息。实际上不确定那是什么样子。当他没有 4.5 时触发的自动安装可能也不起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-23T21:17:03.743

尽管 Hans Passant 所说的一切都是正确的，但他忽略了一个关键点，那就是 PE 头在这场崩溃中的作用。

因为 Dotnet 4.5 是在 Dotnet 4.0 之上的就地安装，并且因为它不更新 Dotnet 版本号，所以结果是使用 Dotnet 4.5 构建的二进制文件在其二进制文件的 PE 标头中具有旧的 Dotnet 4.0 版本号 ( 4.0.30319）。

因为 CLR 在 PE 标头中使用此值来确定要加载哪个版本的 Dotnet 框架，并且因为对于针对 Dotnet 4.5 构建的程序集，此值不会更改，因此在没有任何附加信息的情况下，CLR 无法知道 PE 标头中包含 4.0.30319 的程序集是否需要链接到 Dotnet 4.0 或 4.5。

正是 app.config 中的 supportedRuntime 元素向 CLR 提供了这些额外信息。因此，如果您在仅安装了 Dotnet 4.0 的系统上启动了带有 supportedRuntime 条目的 Dotnet 4.5 应用程序，则 CLR 将弹出一条有用的消息，通知您没有安装所需的 Dotnet 版本。然而，如果您在仅安装了 Dotnet 4.0 的系统上启动相同的 Dotnet 4.5 应用程序*而没有*supportedRuntime 条目，则该应用程序可能会开始运行，但在稍后尝试使用 Dotnet 4.5 功能时会崩溃。

虽然使用 VS2012 RC 构建并以 Dotnet 4.5 为目标的项目可能缺少 supportedRuntime 条目，但使用 VS2012 RTM 构建的项目确实具有该条目。

# android - Android：以编程方式将按钮添加到布局

> ID：11710200
> 
> 赞同：25
> 
> 时间：2012-07-29T14:56:13.373
> 
> 标签：android, android-layout

我正在尝试获取一个添加按钮，以根据按钮左侧的编辑文本将另一个按钮添加到布局中。重点是让一个人列出他们家中的房间，然后当他们输入每个房间时，会生成一个新按钮，以便他们可以单击房间，然后开始处理下一页。

我已经完成了一个 xml 布局，然后我意识到我正在“以编程方式”添加按钮，所以我以编程方式重新设计了布局，然后在我尝试添加的添加按钮的 switch/case 中（这就是我执行 onclicks 的方式）视图的按钮，但它变得非常棘手。我想在edittext下方有一个滚动视图并添加按钮，当他们将所有房间添加到他们的房子时，它最终会填充他们整个家的可滚动按钮列表。有没有办法以编程方式将按钮添加到 xml 布局。我以为你可以，但我正在尝试的一切都不起作用。

感谢大家的帮助，您的任何建议将不胜感激。

第一次编辑（响应 Tanuj 的解决方案）

我的 XML 文件（不确定我们是要使用它还是只使用 java）：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" >

<TextView
    android:id="@+id/tvAddARoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tvAddARoom" />

<EditText
    android:id="@+id/etAddARoom"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/etAddARoom" />

<Button
    android:id="@+id/btnAddARoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/btnAdd" />

<TextView
    android:id="@+id/tvSelectARoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tvSelectARoom" />

<TextView
    android:id="@+id/tvNoRooms"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tvNoRooms" />

<Button
    android:id="@+id/btnViewAll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/btnViewAll" />

 </LinearLayout> 
```

和爪哇。这根本不正确，因为在 java 中我正在创建整个布局而不是使用上面的布局。只是不确定我是否可以在两者之间架起桥梁。

```
package com.bluej.movingbuddy;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
//import android.widget.ScrollView;
import android.widget.TextView;

public class EstimatorByRoom extends Activity implements OnClickListener {
String roomName;
EditText etAddARoom;
LinearLayout layout;
LinearLayout.LayoutParams layoutParam;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.estimatorbyroom);

    LayoutParams params = 
            new LinearLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT);

    //create a layout
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    //create a text view
    TextView tvAddARoom = new TextView(this);
    tvAddARoom.setText("Add a Room");
    tvAddARoom.setLayoutParams(params);

    //create an edittext
    EditText etAddARoom = new EditText(this);
    etAddARoom.setHint("Living Room, Dining Room, etc.");
    etAddARoom.setLayoutParams(params);

    //create a button
    Button btnAddARoom = new Button(this);
    btnAddARoom.setText("Add");
    btnAddARoom.setLayoutParams(params);

    //adds the textview
    layout.addView(tvAddARoom);

    //add the edittext
    layout.addView(etAddARoom);
    //add the button
    layout.addView(btnAddARoom);

    //create the layout param for the layout
    LinearLayout.LayoutParams layoutParam = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT);

    this.addContentView(layout, layoutParam);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {

    case R.id.btnAddARoom:
        //add a room

        //this part isn't working!
        roomName = etAddARoom.getText().toString();
        Button createdButton = new Button(this);
        createdButton.setText(roomName);
        layout.addView(createdButton);
        this.addContentView(layout, layoutParam);

        //if no rooms make tvnorooms disappear

        break;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-29T15:03:27.560

尝试这个 ：

```
 //the layout on which you are working
    LinearLayout layout = (LinearLayout) findViewById(R.id.linear_layout_tags);

    //set the properties for button
    Button btnTag = new Button(this);
    btnTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    btnTag.setText("Button");
    btnTag.setId(some_random_id);

    //add button to the layout
    layout.addView(btnTag); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-15T11:50:56.347

试试这个代码：

```
LinearLayout l_layout = (LinearLayout) findViewById(R.id.linear_layout); 
l_layout.setOrientation(LinearLayout.VERTICAL); // or HORIZONTAL

Button btn1 = new Button(this);
btn1.setText("Button_text");

l_layout.addView(btn1);

btn1.setOnClickListener(new OnClickListener() {
     @Override
     public void onClick(View v) {
           // put code on click operation
     }
}); 
```

这是一种动态创建按钮并添加到布局中的方法。

请记住，当您以编程方式创建按钮时，您只需使用**this**而不是**Class_name.this**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-17T06:48:55.160

```
public class AndroidWalkthroughApp1 extends Activity implements View.OnClickListener {

    final int TOP_ID = 3;
    final int BOTTOM_ID = 4;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // create two layouts to hold buttons
        LinearLayout top = new LinearLayout(this);
        top.setId(TOP_ID);
        LinearLayout bottom = new LinearLayout(this);
        bottom.setId(BOTTOM_ID);

        // create buttons in a loop
        for (int i = 0; i < 2; i++) {
            Button button = new Button(this);
            button.setText("Button " + i);
            // R.id won't be generated for us, so we need to create one
            button.setId(i);

            // add our event handler (less memory than an anonymous inner class)
            button.setOnClickListener(this);

            // add generated button to view
            if (i == 0) {
                top.addView(button);
            }
            else {
                bottom.addView(button);
            }
        }

        // add generated layouts to root layout view
        LinearLayout root = (LinearLayout)this.findViewById(R.id.root_layout);
        root.addView(top);
        root.addView(bottom);
    }

    @Override
    public void onClick(View v) {
        // show a message with the button's ID
        Toast toast = Toast.makeText(AndroidWalkthroughApp1.this, "You clicked button " + v.getId(), Toast.LENGTH_LONG);
        toast.show();

        // get the parent layout and remove the clicked button
        LinearLayout parentLayout = (LinearLayout)v.getParent();
        parentLayout.removeView(v);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-29T16:31:58.683

我会在 xml 中为您的 LinearLayout 添加一个 id：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@id/llContainer"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" > 
```

然后将您的 onClick 更改为：

```
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.btnAddARoom:
        //add a room
        //Find you parent layout which we'll be adding your button to:
        LinearLayout layout = (LinearLayout) findViewById(R.id.llContainer);

        roomName = etAddARoom.getText().toString();
        Button createdButton = new Button(this);
        createdButton.setText(roomName);
        createdButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,         LayoutParams.WRAP_CONTENT));
        layout.addView(createdButton);

        //if no rooms make tvnorooms disappear

        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-31T14:47:38.993

每个按钮都需要有一个 onclicklistener 来告诉它该做什么。这可以添加到您声明按钮的Java代码中。

```
Button createdButton = new Button(this);
createdButton.setOnClickListener(new OnClickListener()
{

code you want implemented

} 
```

# ios - 如何在 iOS 中模拟命令行或终端？

> ID：11710203
> 
> 赞同：0
> 
> 时间：2012-07-29T14:56:22.770
> 
> 标签：ios, command-line

如何制作模拟命令行或终端的应用程序？我可以使用内置控件还是必须自定义一些东西？有人可以指点我一些示例代码吗？我进行的所有搜索都是与 Cisco 相关的 iOS 内容，而不是与 Apple 相关的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:55:20.393

我试图做同样的事情。我发现了这个项目：

[http://code.google.com/p/mobileterminal/](http://code.google.com/p/mobileterminal/)

可能这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:34:19.887

不确定你在问什么，但你可以调用 system(); 调用 bash 脚本（命令行的东西）。Apple 的 iOS SDK 中没有预构建的终端 shell 视图。您必须调用一些弹出命令。您还需要学习如何使用线程，否则您的某些进程将被中断。

我还听说有时 system() 可能不是出于性能、安全原因等原因调用 bash 脚本的最佳方式。

如果您打算提交到 App Store，请尝试查看 NSTask 类。这个类将脚本保存在受控代码中，但它没有提升权限。

# javascript - 某些 Raphael 标记未出现在 Linechart Mouseover 上

> ID：11710204
> 
> 赞同：1
> 
> 时间：2012-07-29T14:56:28.130
> 
> 标签：javascript, raphael, graphael

可以看出，第 2、第 10 和第 13 个标签（Raphael 语言中的标签）不会出现在其各自图形点的鼠标悬停上（至少不在可视区域中）。当您添加更多点时，问题会变得更糟（即缺少更多标签）。有谁知道可能是什么问题？

```
var r = Raphael("holder"),
   txtattr = {
      font: "12px sans-serif"
   };
r.text(65, 25, "Basis Points").attr(txtattr);

lines = r.linechart(100, 40, 600, 260, [
   [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]
], [
   [12, 32, 23, 15, 17, 27, 22, 12, 32, 23, 15, 17, 27]
],
{
   nostroke: false,
   axis: "0 0 1 1",
   symbol: "circle",
   smooth: true
}).hoverColumn(function ()
{
   this.tags = r.set();

   for (var i = 0, ii = this.y.length; i < ii; i++)
   {
      this.tags.push(
        r.tag(this.x, this.y[i], this.values[i], 160, 10).insertBefore(this)
        .attr([
        {
           fill: "#fff"
        },
        {
           fill: this.symbols[i].attr("fill")
        }]));
   }
}, function ()
{
   this.tags && this.tags.remove();
});

lines.symbols.attr(
{
   r: 3
});
r.width = 650; 
```

[jsfiddle](http://jsfiddle.net/QrSWz/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:14:12.977

问题是由于正确计算了悬停列宽度，下面的错误报告中描述了代码修复：

[折线图列宽错误](https://github.com/DmitryBaranovskiy/g.raphael/issues/163)

# forms - 简单的asp表格

> ID：11710205
> 
> 赞同：0
> 
> 时间：2012-07-29T14:56:40.220
> 
> 标签：forms, asp-classic, contact-form

试图在 123-reg 上启动并运行一个非常简单的经典 asp 表单。

123-reg 提供了一个脚本来完成这项工作，但我不知道这个脚本如何连接到我制作的表格。

这是我的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>

<form id="form" target="_blank" action="script.asp" method="post">

Name: <input name="Name" type="text" /><br />
Customer ID: <input name="Customer ID" type="text" /><br />
Email Address: <input name="Email" type="text" /><br />
Comments:<br />
<textarea name="Comments" rows=5 cols=50></textarea>
<input type="submit" value="Submit" />
<input type="reset" value="Clear" />
</form>

</body>
</html> 
```

这是简单的脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Secure Mail (ASP)</title>

</head>
<body>
<div id="container" class="index" style="padding:10px">

<br />
<br />
<h2>Secure Mail (ASP)</h2>
<br />

<%
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'To get the script for work please set the following values:

'Set the credentials for your email account to send the email from
username="MYUSERNAME"     'Insert your email account username between the double quotes            
password="MYPASSWORD"     'Insert your email account password between the double quotes              

'Set the from and to email addresses
sendFrom = "admin@MYURL.co.uk"   'Insert the email address you wish to send from   
sendTo = "MYEMAIL"     'Insert the email address to send to in here

'DO NOT CHANGE ANY SCRIPT CODE BELOW THIS LINE.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'This script demonstrates how to send an email using asmtp

'Create a CDO.Configuration object
Set objCdoCfg = Server.CreateObject("CDO.Configuration")

'Configure the settings needed to send an email
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") ="intmail.atlas.pipex.net"
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 0
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = username
objCdoCfg.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = password
objCdoCfg.Fields.Update

'Create the email that we are going to send
Set objCdoMessage = Server.CreateObject("CDO.Message")
Set objCdoMessage.Configuration = objCdoCfg
objCdoMessage.From = sendFrom
objCdoMessage.To = sendTo
objCdoMessage.Subject = "This is a test email."

'Add the email body text
objCdoMessage.TextBody = "Email sent using ASMTP from a ASP script."

On Error Resume Next

'Send the email
objCdoMessage.Send

'Check if an exception was thrown       
If Err.Number <> 0 Then
    'Response.Write "<FONT color=""Red"">Error: " & Err.Description & " (" & Err.Number & ")</FONT><br/>"
Else
    Response.Write "<FONT color=""Green"">The email has been sent to " & sendTo & ".</FONT>"
End If

'Dispose of the objects after we have used them
Set objCdoMessage = Nothing
Set objCdoCfg = Nothing
Set FSO = nothing
Set TextStream = Nothing
%>

</div>
</body> 
</html> 
```

我知道脚本在发送电子邮件时有效，但是似乎没有包含 HTML 表单中包含的任何信息。

通常不使用表格，因此我们将不胜感激地收到任何建议。

谢谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:57:53.383

在 asp 中，您没有请求将表单数据包含在您的电子邮件中。

例如，而不是在你的 asp 中：

```
sendTo = "MYEMAIL"     'Insert the email address to send to in here 
```

您应该使用表格中的电子邮件：

```
sendTo = Request.Form("Email")     'Insert the email address to send to in here 
```

您可能需要先验证电子邮件地址：

```
if isEmailValid(Request.Form("Email")) = true then
    '#### Send your email
else
    '#### Email was invalid, give the user an error
    response.write "Invalid email address"
end if

Function isEmailValid(email) 
    Set regEx = New RegExp 
    regEx.Pattern = "^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w{2,}$" 
    isEmailValid = regEx.Test(trim(email)) 
End Function 
```

为了确认，request.form 集合使用了 HTML 表单的 name="" 属性。即包括你的文本区域的内容：

```
'Add the email body text
objCdoMessage.TextBody = "The following comment was submitted via the feedback form:" & Request.Form("Comments") 
```

# objective-c - cocos2d 调度方法选择器的问题

> ID：11710208
> 
> 赞同：0
> 
> 时间：2012-07-29T14:57:01.497
> 
> 标签：objective-c, events, cocos2d-iphone, selector, scheduler

我有以下代码（应该是正确的）：

```
- (void) loadIntro:(ccTime)unused {
    [[GameManager sharedGameManager] runWithSceneID:kIntroScene]; // fade to the intro screen
}

- (void) loadAppScreen {
    CCSprite *commodoreScreenLoaded = [CCSprite spriteWithFile:@"CommodoreLoadedApp.png"];
    useBackgroundImage(commodoreScreenLoaded);
    [self addChild:commodoreScreenLoaded];
}

- (void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    // location = [[CCDirector sharedDirector] convertToGL:location];

    CGRect mySurface = (CGRectMake(100, 100, 320, 480));
    if (CGRectContainsPoint(mySurface, location)) {
        //[[CCDirector sharedDirector] stopAnimation];
        play(@"InsertGameCartridge.wav");

        [self removeChild:commodoreScreen cleanup:YES];
        [self loadAppScreen];
        [self schedule:@selector(loadIntro:) interval:2.5f]; // <-- Right here!
} 
```

但是当我运行它时，它会记录一个非常奇怪的错误：

```
2012-07-29 12:21:41.186 Apocanaut[7299:707] *** Assertion failure in -[CCTimer initWithTarget:selector:interval:repeat:delay:],/Users/chris/src/Apps/Games/Apocanaut/Apocanaut/libs/cocos2d/CCScheduler.m:111

2012-07-29 12:21:41.190 Apocanaut[7299:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Signature not found for selector - does it have the following form? -(void) name: (ccTime) dt' 
```

**编辑**：

它似乎来自`GameManager`类中的一个方法，我已经实现了一个名为`runWithSceneID`：

```
- (void) runWithSceneID:(SceneTypes)sceneID {
    SceneTypes oldScene = currentScene;
    currentScene        = sceneID;
    id sceneToRun       = nil;

    switch (sceneID) {
        case kMenuScene:
            sceneToRun = [MenuScene node];
            break;

        case kCommodoreScene:
            sceneToRun = [CommodoreScene node];
            break;

        case kIntroScene:
            sceneToRun = [IntroScene node];
            break;

        default:
            CCLOG(@"No scene ID to load");
            return;
            break;
    }

    if (sceneToRun == nil) {
        currentScene = oldScene;
        return;
    }

    if ([[CCDirector sharedDirector] runningScene] == nil) {
        [[CCDirector sharedDirector] runWithScene:sceneToRun];
    } else {
        [[CCDirector sharedDirector] replaceScene:
         [CCTransitionFade transitionWithDuration:kStandardTransitionDuration scene:sceneToRun]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:56:31.613

不知道为什么它会有所作为，但在某些情况下，这对我来说已经解决了一些这种性质的非常不透明的错误。在私有类别中声明您的方法（MPBattleSequencer 是我的场景之一，使用您自己的类）：

```
@interface MPBattleSequencer (private)

// snip-x-snip

-(void) loadIntro:(ccTime)unused;

@end 
```

# javascript - 下划线：用集合方法包装数组

> ID：11710209
> 
> 赞同：1
> 
> 时间：2012-07-29T14:57:10.843
> 
> 标签：javascript, underscore.js

我有一个充满对象的数组：

```
var myArray = [{ "user": "anton" }, { "user": "joe" }]; 
```

我现在想将数组包装到一个下划线集合对象中，这样我就可以自然地使用下划线的集合方法（删除、添加）：

```
myArray = _(myArray); // this only add object methods
myArray.add({ "user": "paul" }); 
```

那么如何用下划线包装数组以使用下划线集合方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T07:16:57.107

由于接受的答案具有误导性，因此记录在案：

下划线用作函数，**将**包装其参数，即

```
_([a, b, c]) 
```

相当于：

```
_.chain([a, b, c]) 
```

实际上`chain`定义为：

```
_.chain = function(obj) {
  return _(obj).chain();
}; 
```

现在回答你的问题：

您将提供 Collections 的 Backbone 与不提供 Collections 的 Underscore 混淆了。骨干集合可以很容易地从数组初始化，例如：

```
var c = new Backbone.Collection([{ "user": "anton" }, { "user": "joe" }]); 
```

会工作得很好。你可以进一步做：

```
c.add({ "user": "paul" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:17:00.653

通常下划线 api 不包装数组或对象。只是传递它的第一个参数。前任）

```
_.first([5, 4, 3, 2, 1]); //Note first argument
=> 5
var evens = _.filter([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
=> [2, 4, 6] 
```

但是chain( `_.chain(obj)`)返回一个包装的对象。在此对象上调用方法将继续返回包装的对象，直到使用值。

```
var stooges = [{name : 'curly', age : 25}, {name : 'moe', age : 21}, {name : 'larry', age : 23}];
var youngest = _.chain(stooges)
  .sortBy(function(stooge){ return stooge.age; })
  .map(function(stooge){ return stooge.name + ' is ' + stooge.age; })
  .first()
  .value();
=> "moe is 21" 
```

检查下划线 api：[http ://underscorejs.org/#](http://underscorejs.org/#)

# android - 在 Android 崩溃程序中声明组件

> ID：11710211
> 
> 赞同：0
> 
> 时间：2012-07-29T14:57:13.223
> 
> 标签：android, components, declaration

我试图在android中初始化组件，我搜索了互联网并找到了这种类型的声明，但它使我的程序在启动时强制关闭。我究竟做错了什么？

```
public class MainActivity extends Activity {

    private EditText edit =(EditText) findViewById(R.id.editText3); // This code makes my program come up totally empty and crash in few seconds after being blank.

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:59:38.030

在设置布局之前，您无法获得对任何小部件的引用。请尝试以下操作：

```
public class MainActivity extends Activity {

private EditText edit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        edit =(EditText) findViewById(R.id.editText3);
    }

    public void startScan(View view){
        //edit.append(seekBar1.getProgress()+"\n");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# zend-framework - Zend 表单数组表示法中的数字验证

> ID：11710214
> 
> 赞同：0
> 
> 时间：2012-07-29T14:57:33.877
> 
> 标签：zend-framework, zend-form, zend-form-element, php

我不知道在下面的代码中为数字验证写什么：

```
$row_form = new Zend_Form(array(
        'elements' => array(
            'fldName' => array(
                'type' => 'text',
                'options'=> array(
                                   'size'=>'15',
                                   'maxlength' => '8',
                                  ),
                'validators'=> array(

                  //Digits Validation

            ) 
            ),
        ),
    )); 
```

PS：我想维护数组表示法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:12:38.477

添加`array('Digits')`如下

```
'validators'=> array('Digits') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:21:53.493

```
$row_form = new Zend_Form(array(
        'elements' => array(
            'fldName' => array(
                'type' => 'text',
                'options'=> array(
                                  'size'=>'15',
                                  'maxlength' => '8',
                                  'validators'=> array('Digits'),
                                  ),

            ),
        ),
    )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:36:24.017

尝试这个：

->setFilters(Array('Digits'));

# javascript - Ajax 请求不工作 3 次然后工作

> ID：11710216
> 
> 赞同：0
> 
> 时间：2012-07-29T14:57:50.030
> 
> 标签：javascript, ajax, javascript-events

我的页面上有多个 javascript ajax 请求。现在，在特定的 ajax 调用（由 onclick 事件触发）上，我收到 3 条错误消息。在检查 reuest.readyState 时，我发现每次出现错误时，它的就绪状态分别为 1、2 和 3，然后它就可以工作了（显然，readyState=4）。

这是我发送到服务器的 ajax 请求：

```
function fetch(parameter){
var myrequest=new ajaxRequest()
myrequest.onreadystatechange=function(){
if (myrequest.readyState==4){    //This property is not equal to "4" for 3 calls
   if (myrequest.status==200 || window.location.href.indexOf("http")==-1){ 
       // Code to be executed for successful call
       }
   }
else{
    alert("Error in Request. Request State is: " + myrequest.readyState);
}
}

myrequest.open("GET", url, true)
myrequest.send(null)
} 
```

在触发 onclick 事件时，我收到以下错误：

请求中的错误。请求状态是：1

请求中的错误。请求状态是：2

请求中的错误。请求状态是：3

请求可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:01:01.990

这些是 XMLHTTPRequest (ajax) 状态，其中：

1 => 加载

2 => 加载

3 => 互动

4 => 准备好了

4，认为ajax请求完成，可以访问返回的数据。

你应该放弃这个`else`条件。

# php - Zend_Acl 规则基于 MVC 和 Propel 模型

> ID：11710221
> 
> 赞同：1
> 
> 时间：2012-07-29T14:58:22.783
> 
> 标签：php, zend-framework, zend-acl

我有一个 web 项目，其中一些访问决策取决于**页面本身**（例如`/logout`，它应该只对登录用户可见），有些取决于**动态模型对象**（例如`/article/delete/1234`，我们必须检查是否`1234`由登录用户编写用户或者如果他是管理员）。

现在，我面临如何将两者结合在一起的问题。无论我如何尝试，我都不能单独依靠两者中的任何一个：

*   有些页面不使用任何模型，所以我不能在那里设置任何*模型规则*
*   另一方面，我不能为*模块化方法创建**动态断言*，因为它只是 a而不是 a 。A不限于默认模块，也可以在管理模块中使用。*`Comment``comment``default/comment``Comment`*

 *使用**模块化 ACL**，我试图检查每个页面是否允许用户访问它，例如

```
if (!$acl->isAllowed($user, 'default/secrets', 'mysecrets')) {
    $this->forward('auth', 'login');
    $this->setDispatched(false);
} 
```

通过**动态断言**，我正在检查是否允许某人编辑特定的模型对象。

```
// $comment has a method getResourceId() returning 'comment'
if ($acl->isAllowed($user, $comment, 'delete')) {
    // display a link for deletion
} 
```

当然，如果检查

*   删除特定评论，以及
*   访问 /comment/delete/???? 页

会是一样的，但我想这是不可能的，我必须创建两个规则：

```
$acl->allow('member', 'default/comment', 'delete');
$acl->allow('member', 'comment', 'delete', new Acl_Assert_CommentAuthor());
$acl->allow('admin', 'comment', 'delete'); 
```

现在，这对我来说似乎并不完美，因为在某些情况下这会导致重复工作。

有没有更好的方法来解决这个问题？或者是至少创建一个连贯的命名方案的唯一方法，例如`mvc:default/comment`：`model:comment`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:30:09.670

我这样做的方式，限制结果的自定义 sql 查询，在插入/删除/修改 sql 之前检查的函数

然后我写了一个 ACL 插件来检查权限并使用这 5 个表

```
acl_groups
acl_permession
acl_permession_groups
acl_permession_risource
acl_risource 
```

代码：

```
class Abc_Controller_Plugin_Acl extends Zend_Controller_Plugin_Abstract
{

    /**
     * Return whether a given request (module-controller-action) exists
     *
     * @param Zend_Controller_Request_Abstract $request Request to check
     * @return boolean Whether the action exists
     */
    private function _actionExists(Zend_Controller_Request_Abstract $request)
    {
        $dispatcher = Zend_Controller_Front::getInstance()->getDispatcher();

        // Check controller
        if (!$dispatcher->isDispatchable($request)) {
            return false;
        }

        $class  = $dispatcher->loadClass($dispatcher->getControllerClass($request));
        $method = $dispatcher->formatActionName($request->getActionName());

        return is_callable(array($class, $method));
    }

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {

        // fetch the current user

        $controller = $request->controller;
        $action = $request->action;

        $logger = Zend_Registry::get('log');

        //prima controlla se sei autenticato e poi controlla se l'azione esiste, cosi non esponi il sito
        $auth = Zend_Auth::getInstance(); /* @var $auth Zend_Auth */
            if($auth->hasIdentity()) {

                if(! $this->_actionExists($request))//l'azione non esiste?
                {
                    $request->setControllerName('error');
                    $request->setActionName('pagenotfound');
                        $logger->notice( " IP: ". $_SERVER['REMOTE_ADDR']. " http://".$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"]. " ?" .http_build_query($_REQUEST));
                    return ;
                }

                $allowed = Abc_Action_Helper_CheckPermission::checkPermission($controller, $action);

                if ($allowed !== 1)
                {
                    $request->setControllerName('error');
                    $request->setActionName('noauth');
                }
                //fine azione esiste
            }else{
                                    $request->setControllerName('user');
                $request->setActionName('login');
                return ;
            }

    }//fine preDispatch

} 
```

然后，您可以添加您的代码（为了简短起见，我省略了）以记住请求并在登录后将您重定向到那里。*

# fdt - FDT平台有没有jangaroo实现

> ID：11710227
> 
> 赞同：0
> 
> 时间：2012-07-29T14:58:59.643
> 
> 标签：fdt

我想知道 FDT 是否实现了 jangaroo - as 2 js 编译器。几年来，我使用 FDT 作为我的编码工具。现在，当世界转向 html5 时，我有兴趣找到一个好的 JS 编码解决方案。FDT 有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:57:47.560

FDT 不支持[Jangaroo](http://www.jangaroo.net/home/)。只有通过[ActionScript](http://en.wikipedia.org/wiki/ActionScript)和[MXML](http://en.wikipedia.org/wiki/MXML)的 Flash ；它还支持使用[Haxe](http://haxe.org/)。

# php - 无法从数组中抓取对象，不输出任何内容，数组 print_r 工作正常

> ID：11710229
> 
> 赞同：1
> 
> 时间：2012-07-29T14:59:28.753
> 
> 标签：php, arrays

我确定缺少一些愚蠢的东西，但我很累，无法理解到底是什么。

我有一个 print_rs 很好的数组：

```
Array ( [0] => stdClass Object ( [comment_ID] => 20 [comment_post_ID] => 227 [comment_author] => admin [comment_author_email] => [comment_author_url] => [comment_author_IP] => ::1 [comment_date] => 2012-07-29 14:19:34 [comment_date_gmt] => 2012-07-29 14:19:34 [comment_content] => I'm attending this Event! [comment_karma] => 0 [comment_approved] => 1 [comment_agent] => [comment_type] => [comment_parent] => 0 [user_id] => 1 ) ) 
```

ps 删除了一些隐私值。

现在我想获取comment_ID，但没有任何输出到浏览器。

php 看起来像这样：

```
$current_user_comment = get_comments( array(
  'post_id' => $post->ID,
  'user_id' => get_current_user_id(),
  'number' => 1,
  'status' => 'approve',
  'type' => 'comment'
) );

print_r ( $current_user_comment );
echo $current_user_comment->comment_ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:01:45.923

从 的输出中可以看出`print_r`，`$current_user_comment`是数组，而不是对象。并且所需的对象`0`位于该数组中的索引处。

`$current_user_comment[0]->commentID`将工作。

# java - 写入包含现有信息的文件，并逐行插入，每个文件都有多个项目，用“;”分隔

> ID：11710230
> 
> 赞同：0
> 
> 时间：2012-07-29T14:59:34.650
> 
> 标签：java, file

在用户输入所有字段后，我试图将信息写入文本文件。我的文本文件中已经有一些信息。

> 安东尼·杜肯;安东尼;a123;55 彼得街;3321444;VISA;3213504011223 巴里·布莱克;巴里;a999;456 乔治街;23239876;VISA;435677779876 克莱尔·雷格;克莱尔;c678;925 爱德华·莱恩;67893344;MASTERCARD;2233445

我想将它们作为字符串输入到我的文本文件中，并且每行都有多个项目，由`;`.

在添加新信息之前我是否需要打开我的文件，阅读其中包含的内容，或者我可以简单地添加到其中？

我已经设置了一个用于输入值的构造函数，但是如何使用它呢？我需要为我的 main 制定一个新方法来调用它吗？

```
import java.io.*;
import java.util.*;

public class newCust{

    String name,username,password,address,contact,creditType,creditNum;
    Scanner input = new Scanner(System.in);

    public newCust(String name , String username, String password, String address, String contact, String creditType, String creditNum){

    this.name= name;
    this.username= username;
    this.password = password;
    this.address = address;
    this.contact = contact;
    this.creditType = creditType;
    this.creditNum = creditNum;
    System.out.println("Welcome to Kreg Hotel Booking System");
    System.out.println("==============================================");
    System.out.println("Please enter your name: ");
    name = input.nextLine();
    System.out.println("Please enter your login username: ");
    username = input.nextLine();
    System.out.println("Please enter your login password: ");
    password = input.nextLine();
    System.out.println("Please enter your address: ");
    address = input.nextLine();
    System.out.println("Please enter your contact: ");
    contact = input.nextLine();
    System.out.println("Please enter your credit card type: ");
    creditType = input.nextLine();
    System.out.println("Please enter your credit card number: ");
    creditNum = input.nextLine();

        try{
            PrintWriter fileout = new PrintWriter("customerinfo");
            newCust info = new newCust(name,username,password,address,contact,creditType,creditNum);
            fileout.print(info);

        }
        catch(IOException ex){

        }

  }

    public static void main(String[] args){

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:07:51.607

> ***我需要打开我的文件，在添加新信息之前阅读它包含的内容，还是我可以简单地添加到其中？***

您可以*追加*到文件，但不能在中间插入字符或行。

您可以使用例如[附加到它](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)`new FileWriter(file, true)`。

如果这是生产代码而不是简单的练习，我建议您查看[OpenCSV](http://opencsv.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:09:00.773

要写入文件，请使用`FileOutputStream`.

检查是否有[任何构造函数或方法允许您打开附加到它的文件而不是覆盖](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)

# android - Android jar 资源

> ID：11710236
> 
> 赞同：0
> 
> 时间：2012-07-29T15:00:09.957
> 
> 标签：android

我知道当我将 android 编译为 jar 时，我没有得到 jar 中的资源，但是资产呢？假设我的资产文件夹中有字体，是否可以将它们放在 jar 中并像在普通 APK 上一样处理它们？

```
 Typeface.createFromAsset(getAssets(), "fonts/somefont.ttf"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:02:37.170

不，抱歉，JAR 或 Android 库项目目前不支持资产。

# windows-phone-7 - Windows Phone 7 模拟器位置数据格式

> ID：11710237
> 
> 赞同：4
> 
> 时间：2012-07-29T15:00:10.117
> 
> 标签：windows-phone-7, geolocation, windows-phone-7-emulator

我正在寻找 Windowws Phone Emulator Additional Tools 使用的位置数据格式。在“位置”选项卡上有一个保存/打开记录仪数据的选项。我问这个问题是因为我需要模拟地理位置变化，但 Location Tab 对我不起作用。作为一种解决方法，我将创建一个位置数据文件并在模拟器中打开它。

![在此处输入图像描述](../Images/66bdeb5fb99179c9f037c7a9beae79b8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:47:50.220

这是一个简单的 XML 文件，格式如下：

```
<?xml version="1.0" encoding="utf-8"?> 
<WindowsPhoneEmulator xmlns="http://schemas.microsoft.com/WindowsPhoneEmulator/2009/08/SensorData"> 
    <SensorData> 
        <Header version="1" /> 
        <GpsData latitude="" longitude="" /> 
        <GpsData latitude="" longitude="" /> 
        <GpsData latitude="" longitude="" /> 
    </SensorData> 
</WindowsPhoneEmulator> 
```

感谢 AppHub 论坛 (http://forums.create.msdn.com/forums/p/91880/550593.aspx) 上的“Konaju Games”用户回答

# xmpp - 实时文本 GTalk

> ID：11710239
> 
> 赞同：2
> 
> 时间：2012-07-29T15:00:31.517
> 
> 标签：xmpp, google-talk, real-time-text

Google Talk 或 GTalk 是否支持实时文本 (RTT)？如果确实如此，那么在某处是否有任何示例或片段？我看过 Mark Rejhon 的提议，但没有找到 GTalk 支持 RTT 的可靠证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:25:25.960

[XEP-0301：实时文本](http://xmpp.org/extensions/xep-0301.html)是客户端到客户端的协议，不需要服务器支持。

如果您询问 Google 的客户，我不知道他们中的任何一个都支持 RTT - 这是一个非常新的 XEP，目前仍处于试验阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T18:03:04.013

*   [在http://tap.gallaudet.edu/rtt/](http://tap.gallaudet.edu/rtt/)有一个基于网络的 RTT 聊天客户端
*   [在http://www.realjabber.org/](http://www.realjabber.org/)上有一个 Windows RTT 聊天客户端

立即尝试 - 它可以在 Google 的服务器上运行。只需使用您的 GMAIL 帐户登录并显示您现有的好友列表，您就可以立即聊天 RTT。Google 自己的 GMAIL 客户端不支持 RTT，但是 Google 的 Talk Servers 很好地支持 RTT。正确实施的 XMPP 网络 (jabber.org) 也支持 RTT。这意味着任何第三方软件（支持 XEP-0301）都可以实现它。您只需使用您的 Google Talk ID 或 Jabber 兼容 ID 登录即可。

无需修改服务器；它是一个基于客户端的协议，可以通过 Google Talk 自己的服务器完美运行。RTT 通过现有的 Google Talk 服务器作为扩展数据；通过与现有 XMPP 消息相同的网络路由（Google Talk 消息传递）。

如果您尝试在 RTT 客户端（例如 Gallaudet 或 RealJabber）和 Google Talk 之间进行聊天，则逐行消息会通过，但输入不会实时显示。

PS 该标准将在不久的将来从 Experimental 升级。

# c++ - 第三种加载动态链接库的方法？别针

> ID：11710241
> 
> 赞同：1
> 
> 时间：2012-07-29T15:00:42.957
> 
> 标签：c++, windows, visual-c++

现在我可以使用静态加载（包括必要的标题，并使用#pragma 注释（lib，“xxx”））和动态加载（使用函数 LoadLibrary 或 LoadLibraryEx）加载动态链接库。

一些公司在他们的面试中询问加载动态链接库的其他方法。

但我想知道是否存在其他加载动态链接库的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:08:43.303

您的问题中有一个术语混淆。DLL 代表“*动态*链接库”。顾名思义，它们总是*动态加载的。*它们不能静态加载。术语“静态”通常与*静态*库一起使用，即根本不是 DLL 的库。

DLL 可以通过使用和函数*显式*加载（有时称为“运行时链接”或“手动链接”）或通过将所谓的*导入库*链接到程序中并以常规方式声明函数（有时称为“加载时链接”）来*隐式*加载”或“自动链接”）。后一种方法有两种：*pre-load*和*delay-load*。预加载的 DLL 会在程序开始时立即无条件地加载。延迟加载的 DLL 在（如果）首次使用时被加载。`LoadLibrary``GetProcAddress`

 ***因此，在这个术语中，加载 DLL 的主要方式仍然只有两种：显式和隐式。后一种加载方法恰好有两个子品种。有些人可能更愿意将这种分层分类解释为扁平分类，最终得到三种链接/加载方法。

顺便说一句，通过将导入库链接到您的程序中，再次实现了隐式链接。“包括标题”本身不会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:14:53.900

“加载”一词有点含糊。DLL 永远不会被“加载”。术语“动态加载库”来自 16 位 Windows 时代。今天，DLL 的内容使用分页映射到内存中。因此，如果他们的意思是通过加载将其内容复制到内存中，您甚至可以通过直接读取 DLL 来“加载”它。

如果他们的意思是调用他们的函数，你也可以“不”加载 DLL，例如通过使用`rundll32.exe`（它将 DLL 映射到它自己的进程空间，而不是你的）。

你当然可以通过分析 DLL 的 PE 结构、调用和扫描它的导出表`LoadLibrary`来初始化函数指针来模仿。`DllMain()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T15:03:37.477

另一种方法是[延迟加载](http://msdn.microsoft.com/en-us/library/151kt790.aspx)它们，这有点像静态链接，但在您实际调用驻留在其中的函数之前，不会加载 dll***

# javascript - 没有jquery的HTML文档分页

> ID：11710243
> 
> 赞同：4
> 
> 时间：2012-07-29T15:01:40.590
> 
> 标签：javascript, javascript-events

我有一个包含很多 div 的大页面，所有这些 div 都包含在一个 div 中。而且我在页面顶部的数字链接等于我拥有的总封闭 div。现在我想做的是，点击一个数字，我只想显示与该数字相对应的 div 并隐藏所有其他数字。

```
links--> 1 2 3 4 5 6 7 .....
<div id="all">
  <div id="mail1">..........</div>
  <div id="mail2">..........</div>
  <div id="mail3">..........</div>
  <div id="mail4">..........</div>
  <div id="mail5">..........</div>
  <div id="mail6">..........</div>
  .....and so on
</div> 
```

我必须在 HTML 中执行此操作，并且 HTML 将被存储并且也可以离线查看，因此不能在此处使用 jquery。必须使用 javascript 本身来完成。

谁能帮我这里的javascript代码.......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:27:46.913

```
<script type="text/javascript">
    var divIds = ["mail1", "mail2", ..., "mailn"];
    function showDiv(showId) {
         for(var i = divIds.length; i--; ) {
              if(divIds[i] === showId)
                  document.getElementById(showId).style.display = "block";
              else
                  document.getElementById(divIds[i]).style.display = "none";
         }
    }
</script> 
```

然后您在顶部的链接将如下所示：

```
<a href="#" title="Show Mail 1" onclick="showId('mail1');">1</a> 
```

没有测试过，但就是这个想法。缺点是您必须在代码中的 3 个位置维护 div

1.  在`var divIds`数组中。
2.  在 html 标记本身中。
3.  在顶部的链接中。

您可以编写一些 javascript 来生成所有 3 个，完全去掉它的维护部分。

至于在离线文档中使用 jQuery，最好的方法可能是将 jquery.min.js 文件的文本包含在文档本身的`<script></script>`标签内。这样您就不必担心路径之类的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:26:48.610

你可能会做这样的事情（不要以 js 编码风格来评判我，我不是 js 忍者）：

```
window.onload = function() {
    var outer = document.getElementById("all");

    for (var i=0; i < outer.childNodes.length; i++) {
        outer.childNodes[i].addEventListener("click", doSomething);
    }

    function doSomething() {
        // here you can run loop for changing display style for you divs
        console.log(this.id);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T15:39:40.773

我在不知道 div id 的情况下做了一个不显眼的例子：

[http://jsfiddle.net/8pQzx/2/](http://jsfiddle.net/8pQzx/2/)

它的代码更多，但如果你不想使用 js lib，这就是你得到的。;)

# android - 为什么我的 Android 应用程序会出现这些编译错误？

> ID：11710246
> 
> 赞同：-1
> 
> 时间：2012-07-29T15:01:47.813
> 
> 标签：android

我已经安装了 Android SDK，现在我收到了这些错误：

> 描述资源路径位置类型错误：
> 错误：找不到与给定名称匹配的资源（在“图标”处，值为“@drawable/ic_launcher”）。AndroidManifest.xml/Newbostton 第 10 行 Android

和

> 描述资源路径位置类型 R 无法解析为变量
> MainActivity.java /Newbostton/src/com/Newboston/bhargav 第 12 行

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:46:24.330

验证语法 /res/values/strings.xml。问题可能不在 MainActivity.java

检查此以获取详细信息。 [http://3thdev.blogspot.hk/2012/07/r-cannot-be-resolved-error.html](http://3thdev.blogspot.hk/2012/07/r-cannot-be-resolved-error.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:55:27.730

Just do one thing if you are using eclipse, CTRL + SHIFT + I or CTRL + SHIFT + O, that will import all used imports in class

# mongodb - Doctrine MongoDB ODM 身份验证，可能吗？

> ID：11710247
> 
> 赞同：2
> 
> 时间：2012-07-29T15:01:49.127
> 
> 标签：mongodb, doctrine-odm

有没有办法在 Doctrine MongoDB ODM 中使用 MongoDB 身份验证？等效于 shell 中的 db.auth(username,password)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:54:15.653

最可靠的方法是在连接 URI（例如`mongodb://username:password@localhost`）中指定您的用户名和密码，因为这将允许驱动程序在连接断开并且需要重新连接时重新进行身份验证。如果您需要在单个连接中对各种 DB 进行身份验证，您也可以使用[MongoDB::authenticate()](http://php.net/manual/en/mongodb.authenticate.php)，但如果连接断开，则必须手动重新进行身份验证。有关更多示例，请参阅[连接文档](http://php.net/manual/en/mongo.connecting.php)。

# php - Facebook Graph Api 用户信息

> ID：11710248
> 
> 赞同：0
> 
> 时间：2012-07-29T15:01:50.887
> 
> 标签：php, facebook, facebook-graph-api

通过 facebook graph api 我正在搜索某些事件，我还想获取有关用户如何参与这些事件的信息。使用 facebook graph api，我可以提取有关用户的基本信息 - 姓名、ID 和个人资料图片。问题是我想知道用户的年龄——问题是我不是在创建一个 facebook 应用程序，而是一个使用他们的 api 从 facebook 中提取数据的网站。为了获得用户的生日，我需要获得`user_birthday`许可。

我想知道我是否能够在没有此权限的情况下获取用户的年龄？这些用户参加某个活动的事实很重要吗？如果我必须拥有此特定权限，我该如何获得？请记住，我不会创建 Facebook 应用程序。

任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:27:32.180

*   你需要权限
*   你需要一个应用程序
*   所以改变你对什么是 Facebook“应用程序”的看法。您的网页必须调用 facebook 的*Graph*或*FQL*端点。您必须向用户显示标准*授权*窗口或网页。但是，以其他方式，您的用户将看到“网页”，而不是“应用程序”
*   [您的应用程序可以是仅网站应用程序，即http://apps.facebook.com/your-awesome-app](http://apps.facebook.com/your-awesome-app)上没有画布页面
*   首先，转到[https://developers.facebook.com](https://developers.facebook.com)并创建一个“应用程序”
*   然后在谷歌上搜索“facebook”“用户年龄”“网站身份验证”等...

# c# - 使用 TcpClient 绕过代理

> ID：11710251
> 
> 赞同：0
> 
> 时间：2012-07-29T15:02:16.437
> 
> 标签：c#, networking, proxy, tcpclient

我正在尝试编写本地代理应用程序。我知道代理应用程序在理论上是如何工作的。我已经完成了与处理传入连接相关的所有工作。但问题是我应该如何将客户端请求的请求发送到指定的 Url。当我尝试创建与`TcpClient`指定 URL 和端口的连接时，它会引发以下异常：

> 没有这样的主机是已知的

**编辑：**我想我应该绕过代理，比如 FireFox 正在做的甚至是系统代理集。

任何想法都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:36:27.907

这些链接可能会有所帮助：

*   [http://www.replicator.org/journal/201011170043-net-connecting-a-tcpclient-through-an-http-proxy-with-authentication](http://www.replicator.org/journal/201011170043-net-connecting-a-tcpclient-through-an-http-proxy-with-authentication)

*   [http://alandean.blogspot.co.uk/2010/06/routing-tcpclient-http-requests-through.html](http://alandean.blogspot.co.uk/2010/06/routing-tcpclient-http-requests-through.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:59:32.547

根据 colinsmith 提供的链接，我已经使用 TcpClient 绕过代理。我是这样做的：

```
 public static TcpClient CreateTcpClient(string url)
    {
        var webRequest = WebRequest.Create(url);
        webRequest.Proxy = null;

        var webResponse = webRequest.GetResponse();
        var resposeStream = webResponse.GetResponseStream();

        const BindingFlags flags = BindingFlags.NonPublic | BindingFlags.Instance;

        var rsType = resposeStream.GetType();
        var connectionProperty = rsType.GetProperty("Connection", flags);

        var connection = connectionProperty.GetValue(resposeStream, null);
        var connectionType = connection.GetType();
        var networkStreamProperty = connectionType.GetProperty("NetworkStream", flags);

        var networkStream = networkStreamProperty.GetValue(connection, null);
        var nsType = networkStream.GetType();
        var socketProperty = nsType.GetProperty("Socket", flags);
        var socket = (Socket)socketProperty.GetValue(networkStream, null);

        return new TcpClient { Client = socket };
    } 
```

希望这对其他人有帮助。

# c - 如何在 C 中获取用户输入的历史记录？

> ID：11710256
> 
> 赞同：2
> 
> 时间：2012-07-29T15:02:38.893
> 
> 标签：c, user-input

我有一个简单的计算器，可以让我不断输入新数字并计算出利润金额。但我希望能够使用箭头键（向上）来获取最后一个条目。

我有这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

// ------------------------------------------------

int main (int argCount, char *argv[]) {
    float 
        shares = atof(argv[1]),
        price = atof(argv[2]),

        // Commission fees
        fee = 4.95,

        // Total price paid (counts buy + sell commission)
        base = (price * shares) + (fee * 2),
        profit;

    printf("TOTAL BUY: %.3f\n", base);

    /**
     * Catch the input and calculate the 
     * gain based on the new input.
     */
    char sell[32];

    while (1) {
        printf(": ");
        fflush(stdout);
        fgets(sell, sizeof(sell), stdin);

        profit = (atof(sell) * shares) - base;
        printf(": %.3f", profit);

        // Show [DOWN] if the estimate is negative
        if (profit < 0)
            printf("\33[31m [DOWN]\33[0m\n");

        // Show [UP] if the estimate is positive
        else printf("\33[32m [UP]\33[0m\n");
    }

    return 0;
} 
```

**更新**：答案如下。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#include <readline/readline.h>
#include <readline/history.h>

// ------------------------------------------------

int main (int argCount, char *argv[]) {
    float 
        shares = atof(argv[1]),
        price = atof(argv[2]),

        // Commission fees
        fee = 4.95,

        // Total price paid
        base = (price * shares) + (fee * 2),
        profit;

    printf("TOTAL BUY: %.3f\n", base);

    /**
     * Catch the users input and calculate the 
     * gain based on the new input.
     *
     * This makes it easy for active traders or
     * investors to calculate a proposed gain.
     */
    char* input, prompt[100];

    for(;;) {
        rl_bind_key('\t', rl_complete);
        snprintf(prompt, sizeof(prompt), ": ");

        if (!(input = readline(prompt)))
            break;

        add_history(input);

        profit = (atof(input) * shares) - base;
        printf(": %.3f", profit);

        // Show [DOWN] if the estimate is negative
        if (profit < 0)
            printf("\33[31m [DOWN]\33[0m\n");

        // Show [UP] if the estimate is positive
        else printf("\33[32m [UP]\33[0m\n");
        free(input);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T15:04:49.840

您可以使用提供行编辑和命令历史记录的[GNU readline 库。](http://en.wikipedia.org/wiki/GNU_readline)[这](http://tiswww.case.edu/php/chet/readline/rltop.html)是该项目的主页。这似乎是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:05:00.460

您必须使用诸如[readline 之](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)类的东西来将该功能本地添加到您的应用程序中。然而，大多数人只使用[rlwrap](http://utopia.knoware.nl/~hlub/rlwrap/)。

```
$ rlwrap your_prog 
```

# jquery - 如何调用 javascript 函数并将行的对象传递给它？

> ID：11710257
> 
> 赞同：1
> 
> 时间：2012-07-29T15:02:44.423
> 
> 标签：jquery

我有以下 jQuery：

```
$('#dataTable').on('click', 'tbody tr', clickHandler); 
```

这是我的 gridClickHander 的前几行

```
function gridClickHandler(event) {
    $(oTable.fnSettings().aoData).each(function () {
        $(this.nTr).removeClass('row_selected');
    });
    $(this).addClass('row_selected');
    var rk = $(this).attr('data-rk');
    var pk = $(this).attr('data-pk'); 
```

这段代码现在工作得很好。

接下来，我想做与连续单击事件相同的事情，但使用调用 gridClickHandler 的 javascript/jQuery 代码。例如，在 id="row_25" 的行上。有没有办法我可以做到这一点？抱歉，但我再次对如何处理 $(this) 感到困惑。

这是我的代码：

```
 if (obj.entity == "City") {
                var html = obj.$form.find("#select-topic").html();
                var indx = obj.$form.find("#select-topic").index()
                $("#input_TempRowKey_" + obj.rownum).html(html);
                $("#input_TempRowKey_" + obj.rownum).eq(indx).attr('selected', 'selected');
                var title = obj.$form.find("#Title").val();
                $("#input_Title_" + obj.rownum).val(title);
                $("tr#row_" + obj.rownum).attr("data-rk", json.rowKey);
                // here I need to do the same as though a user just clicked on rownum
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:11:23.653

您可以`this`使用[`.call` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或[`.apply` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)显式设置：

```
gridClickHandler.call(referenceToDOMElement);
// example: gridClickHandler.call($('#row_25').get(0)); 
```

请注意，事件处理程序`this`应该是一个 DOM 元素，而不是一个 jQuery 对象。此外，如果您的处理程序将使用事件对象 ( `event`) 调用这样的函数当然是行不通的。

上述方式允许您执行*任何*DOM 元素的处理程序。但是由于您想为一行执行处理程序，您可以模拟对特定行的单击：

```
$('#row_24').trigger('click'); 
```

# objective-c - How to add a number to an integer

> ID：11710259
> 
> 赞同：0
> 
> 时间：2012-07-29T15:03:02.580
> 
> 标签：objective-c, nsuserdefaults, nsinteger

I am trying to make a NSInteger being abel to contain a number while the app is runing and that I can add numbers to that NSInteger hers my code

```
// in the .h
NSInteger *count;
// in the .m
count = 0; 
```

Then I save count in NSUserDefaults like so

```
[[NSUserDefaults standardUserDefaults] setInteger:count forKey:@"key"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

In the next view after calling NSUserDefaults I do this

```
count + 4; 
```

The problem is that in the end I always get zero.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:07:15.807

`NSInteger` is a primitive type, not an object type. So you don't want to use a pointer to `NSInteger`, but directly `NSInteger`:

```
// in the .h
NSInteger count;
// in the .m
count = 0; 
```

And to increase it:

```
count += 4; 
```

# php - 查询数据库后打印出部分唯一的数据

> ID：11710271
> 
> 赞同：0
> 
> 时间：2012-07-29T15:03:56.410
> 
> 标签：php, mysql

我无法弄清楚如何使用我需要的表数据...我的表包含一个类别名称列（对于许多子类别具有相同的值），另一列包含子类别名称。

例如：

```
col1        col2
------------------
apples      fruits
oranges     fruits
pears       fruits
honda       cars
volvo       cars
audi        cars 
```

我正在尝试编写一个 select 语句，该语句从数据库中选择所有数据并仅打印一次类别名称，同时打印出该特定类别名称包含的所有子类别。

就像是：

**水果：**

*   苹果
*   橘子
*   梨

**汽车：**

*   本田
*   沃尔沃
*   奥迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:08:31.103

```
SELECT
    col2,
    GROUP_CONCAT(col1 SEPARATOR ',') as stuff
FROM table1
GROUP BY col2 
```

如果您想在名称前使用“-”，则可以`CONCAT('-',col1)`使用`col1`.

此 php 代码会将结果转换为一维数组

```
$conn = new mysqli('host','user','pass','db_name');

if ($conn->connect_errno) {
    printf("Connect failed: %s\n", $conn->connect_error);
    exit();
}

if (!($rs = $conn->query("
        SELECT
            col2,
            GROUP_CONCAT(col1 SEPARATOR ',') as stuff
        FROM table1
        GROUP BY col2
    "))) {
    printf("Error: %s\n", $conn->error);
    exit();
}

$result = array();
while ($row = $rs->fetch_object()){
    $result[] = $row->col2;
    if(!empty($row->stuff)) $result = array_merge($result,explode(',',$row->stuff));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:08:07.750

你是什​​么推荐的。而且，它会让你的阵列生活变得非常困难。考虑尝试这样的事情：

```
$query = mysql_query("SELECT * FROM table");
$array = array();
while($row = mysql_fetch_assoc($query)) {
   $cat = $row['col2'];
   $item = $row['col1'];
   $array[$cat] = $item;
} 
```

现在您有一个数组，其中类别作为键，项目作为每个键的值。

祝你好运！

# eclipse - 缺少 WindowBuilder Eclipse GWT_HOME

> ID：11710273
> 
> 赞同：1
> 
> 时间：2012-07-29T15:04:20.647
> 
> 标签：eclipse, windowbuilder

我在 Eclipse 中成功安装了 Google WindowBuilder 插件（从某种意义上说它运行顺利并且没有报告错误）。

我有一个`host`运行良好的现有 Java 项目。

但是当我尝试`host`通过选择*将项目转换为 GWT 项目进行转换时...*它在构建时报告错误：

> 未绑定的类路径变量：项目“主机”中的“GWT_HOME/gwt-user.jar”

我看[这里](https://stackoverflow.com/questions/10283272/gwt-home-variable-setup-problems)：

这告诉我必须设置`GWT_HOME`为 WindowBuilder 安装目录。

但我找不到那个目录。更具体地说，我对整个用户空间进行了递归目录树搜索：

```
$ find . -name gwt-user.jar -print

$ 
```

这似乎意味着，尽管 WindowBuilder 插件的安装明显成功，但至少缺少一个文件。

我正在运行 Eclipse SDK 版本：3.5.2，Java 版本 1.6.0_22
OpenJDK 运行时环境（IcedTea6 1.10.6）（6b22-1.10.6-0ubuntu1）OpenJDK 客户端 VM（构建 20.0-b11，混合模式，共享）和我从[这里](http://dl.google.com/eclipse/inst/d2wbpro/latest/3.5)安装了 WindowBuilder ：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:54:37.813

您提到了这个[链接](https://stackoverflow.com/questions/10283272/gwt-home-variable-setup-problems)，是的，它描述了获取 GWT 安装路径的方法。它位于：

```
/opt/eclipse/plugins/ 
```

你必须 CD 到 /opt/eclipse/plugins/ 并且你会在那里找到它，例如在我的情况下它是：

```
/opt/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201206290132-rel-r37/gwt-2.4.0/doc/javadoc/com/google/gwt 
```

如果你找不到它，只需查看 Eclipse 主菜单中的安装路径：

```
Preferences >> Google >> Web Toolkit 
```

这个答案和@fachexot 一样，没什么新意。

# delphi - DBlookup 组合框

> ID：11710275
> 
> 赞同：1
> 
> 时间：2012-07-29T15:04:28.670
> 
> 标签：delphi, delphi-xe2, firemonkey

我知道这之前有人质疑过，但我无法让它发挥作用。在客户端数据集和指向可用客户端数据集的 FK 的组合框之间是否有任何带有 livebindigs (firemonkey) 的 dblookup 组合框示例。预先感谢您的任何帮助。

# sql - Rails 3 - 哪个sql查询相关标签

> ID：11710280
> 
> 赞同：1
> 
> 时间：2012-07-29T15:05:39.417
> 
> 标签：sql, ruby-on-rails-3, tags, tagging

我现在计划这个功能很长时间了，但我真的无法开始使用它，因为我不知道如何用代码来表达它。有时，当我认为我明白了自己想要什么时，我突然又被困住了，一切都变得毫无意义。

我有标签和标签，所以通过与文章的关系有一个 has_many。您可以调用 article.tags 和 tag.articles。

现在，每个标签都有自己的显示页面，基本上就像 stackoverflow。在这个展示网站上，我想列出相关标签等。我对这些相关标签的处理方法是，它应该是那些标签，它们最常被标记在一篇文章中，它被标记为 show 标签。我希望这有点道理。

示例：我在 /tags/obama，所以相关标签应该是文章中最常使用的标签，包括标签 obama。例如，如果我有 4 篇文章，其中 3 篇包含“obama”，并且所有这 3 篇都包含标签“united_states”，那么与标签“obama”最相关的标签将是“united_states”。对不起，如果我罗嗦..

我什至不确定这是否是查找相关标签的最佳方法，但这个想法对我来说很好。但是，我无法实现它。

首先，我需要获取所有包含显示标签的文章。所以tag.articles。但下一步是什么？

```
tag.articles.each do |article|
  article.tags 
```

...我只是在这一点上感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:50:29.837

我认为解决这个问题的最好方法是在标签之间建立多对多关系，所以一个标签可以有很多标签。然后在两个标签之间的关系中，存储它们一起出现的实例数。

每次标签出现在同一篇文章中时，您也可以简单地创建一个新的标签到标签连接。然而，这将在数据库中创建一些冗余。

如果你不想引入另一个表，你可以按照你开始的方式让它工作，除非它可能非常慢，即使是相当少量的标签。但是，如果您无法建立标签到标签的连接，我会这样做：

```
hash_storage = Hash.new(0) #0 is the default value
tag.articles.each do |article|
   if article.tags.each do |t|
      #we now know that this tag "t" is in the same article as our original tag
      if t!=tag #we don't care if t actually the same as our original tag
          hash_storage[t]+=1
      end
   end
end
#Now, this is a bit messy, but we need to sort the hash.
ordered_tags = hash_storage.map{|k,v| [v,k]}.sort.reverse.map{|a,b| b} #there might be a smarter way of doing this. 

ordered_tags.each do |t|
  #do whatever. the tags should now  be ordered by their relative frequence of occurrance together with the initial tag.
end 
```

希望这可以帮助 ：）

# asp.net-mvc - ASP.NET MVC 3 安装成功但不存在

> ID：11710287
> 
> 赞同：0
> 
> 时间：2012-07-29T15:06:39.107
> 
> 标签：asp.net-mvc, windows, iis-7

Win7：我打开了 iis-->web 安装程序

我安装了 ASP.net MVC 3。

我安装在机器节点级别和我的特定网站节点级别

但是，安装成功完成后，似乎仍未安装 MVC 3。

我再次获得“添加”选项。

尝试重新启动，但没有帮助。

任何想法？

# php - 如何使用 jquery simple modal 插件在 zend 框架中编辑表单数据？

> ID：11710290
> 
> 赞同：1
> 
> 时间：2012-07-29T15:07:25.043
> 
> 标签：php, jquery, zend-framework, simplemodal

我正在开发一个简单的学生信息应用程序。我的 index.phtml 中有学生列表，我可以在那里编辑学生信息表。它工作得很好，但我想使用模态来编辑学生信息。但我不知道该怎么做。下面我发布了我当前的代码：

/// 索引控制器.php

```
public function editAction()
    {
        $modelStudents = new Application_Model_DbTable_Students();
        $id = (int) $this->_getParam('id');

        $student = $modelStudents->fetch($id);

        $form = new Application_Form_Student($student->email);
        $form->submit->setLabel('Save');
        $this->view->form = $form;
       if ($this->getRequest()->isPost()) {
            $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {
                $id = (int)$form->getValue('id');
                $name = $form->getValue('name');
                $email = $form->getValue('email');
                $phone = $form->getValue('phone');
                $students = new Application_Model_DbTable_Students();
                $students->updateStudent($id, $name, $email, $phone);

                $this->_helper->redirector('index');
            } else {
                $form->populate($formData);
            }
        } else {
            $id = $this->_getParam('id', 0);
            if ($id > 0) {

                $form->populate($modelStudents->getStudent($id));
            }
        }

    } 
```

/// 索引.phtml

```
<html>
<head>
<style type="text/css" rel="stylesheet">
</style>
<script type="text/javascript" src="jQuery.js"> </script>
<script type ="text/javascript" src="jquery.simplemodal-1.4.2.js" ></script>
<script>

<?php         
echo "Student List";

?>
<p><a href="<?php echo $this->url(array('controller'=>'index', 
        'action'=>'add'));?>">Add new student</a></p>
<table border="1">
<tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>

    <th>Action</th>

</tr>
<?php foreach($this->students as $student) : ?>
<tr>

    <td><?php echo $student->name;?></td>
    <td><?php echo $student->email;?></td>
    <td><?php echo $student->phone;?></td>

    <td>
        <a href="<?php echo $this->url(array('controller'=>'index', 
            'action'=>'edit', 'id'=>$student->id));?>">Edit</a>
        <a href="<?php echo $this->url(array('controller'=>'index', 
            'action'=>'delete', 'id'=>$student->id));?>">Delete</a>
        <p id="delete" > Delete </p>
    </td>
</tr>
<?php endforeach; ?>
</table>

</center>
</html> 
```

////编辑.phtml

```
<center>
<?php 

echo "Edit Student List ";
echo $this->form ;
?>
</center> 
```

请让我知道如何使用 jQuery 简单模式插件来执行此任务。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:06:23.450

首先编辑您的 index.phtml 文件，将课程和学生 ID 添加到您的编辑链接：

```
<a href="<?php echo $this->url(array('controller'=>'index', 
            'action'=>'edit', 'id'=>$student->id));?>" class="editBtn" studentId="<?=$student->id?>">Edit</a> 
```

然后，在一个包含的 js 文件中：

```
$(document).ready(function() {

    $(function() {
        //Event triggered when clicking on the edit btn
        $('.editBtn').click(function(event) {
            event.preventDefault ? event.preventDefault() : event.returnValue = false;
            //Get the page and add it to the modal
            studentId = $(this).attr('studentId');
            var data={};
            data['id'] = studentId;
            url = "/index/edit/";
            $.get(url, data, function(resp) {
                $.modal(resp);
            });
        });
    });

}); 
```

这应该可以帮助您入门...

# objective-c - 在 Objective C 中使用属性作为计数

> ID：11710294
> 
> 赞同：0
> 
> 时间：2012-07-29T15:07:45.887
> 
> 标签：objective-c, cs193p

我是 Objective C 的新手。我在 2011-12 年跟随斯坦福大学讲授 iOS 开发，并在作业 1 中要求在计算器中实现小数点。这就是我的实现的样子：

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()

@property (nonatomic) BOOL userIsInTheMiddleOfEnteringNumber;
@property (nonatomic,strong) CalculatorBrain *brain;
@property (nonatomic) int userPressedDecimalPoint;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize userIsInTheMiddleOfEnteringNumber = _userIsInTheMiddleOfEnteringNumber;
@synthesize userPressedDecimalPoint = _userPressedDecimalPoint; 
@synthesize brain = _brain;

- (CalculatorBrain *) brain{
if (!_brain) _brain = [[CalculatorBrain alloc] init];
return _brain;
}

- (IBAction)digitpressed:(UIButton *)sender {

NSString *digit = sender.currentTitle;
if (digit == @"."){
    self.userIsInTheMiddleOfEnteringNumber = YES;
    self.userPressedDecimalPoint++;
}

if (self.userIsInTheMiddleOfEnteringNumber &&  self.userPressedDecimalPoint< 2){
    self.display.text = [self.display.text stringByAppendingString:digit];
    NSLog(@"decimal pressed: %d times",self.userPressedDecimalPoint);
} 
else{
    self.display.text = digit;
    self.userIsInTheMiddleOfEnteringNumber = YES;
    self.userPressedDecimalPoint = 1;
}
} 
```

所以基本上我已经设置了一个属性 userPressedDecimalPoint 并且每次按下小数点时我都尝试使用这个属性作为计数器。但是，从 NSLog 中我看到，无论我按小数点多少次，它都只显示 1 次按下。因此，如果输入，输出会显示多个小数点。任何建议，将不胜感激。谢谢！

完整版更正代码：

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()

@property (nonatomic) BOOL userIsInTheMiddleOfEnteringNumber;
@property (nonatomic,strong) CalculatorBrain *brain;
@property (nonatomic) int userPressedDecimalPoint;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize userIsInTheMiddleOfEnteringNumber = _userIsInTheMiddleOfEnteringNumber;
@synthesize userPressedDecimalPoint = _userPressedDecimalPoint;
@synthesize brain = _brain;

- (CalculatorBrain *) brain{
if (!_brain) _brain = [[CalculatorBrain alloc] init];
return _brain;
}

- (IBAction)digitpressed:(UIButton *)sender {

NSString *digit = sender.currentTitle;
if ([digit isEqualToString:@"."]){
    self.userIsInTheMiddleOfEnteringNumber = YES;
    self.userPressedDecimalPoint++;
}

if (self.userIsInTheMiddleOfEnteringNumber &&  self.userPressedDecimalPoint< 2){
    self.display.text = [self.display.text stringByAppendingString:digit];
   // NSLog(@"decimal pressed: %d times",self.userPressedDecimalPoint);
} 
else if (![digit isEqualToString:@"."]){
    self.display.text = digit;
    self.userIsInTheMiddleOfEnteringNumber = YES;
}
}

- (IBAction)operationPressed:(UIButton *)sender {
if (self.userIsInTheMiddleOfEnteringNumber) [self enterPressed];
double result = [self.brain performOperation:sender.currentTitle];
NSString *resultString = [NSString stringWithFormat:@"%g", result];
self.display.text = resultString;

}

- (IBAction)enterPressed {
self.userPressedDecimalPoint = 0;
[self.brain pushOperand:[self.display.text doubleValue]];
self.userIsInTheMiddleOfEnteringNumber = NO;
} 

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:20:40.060

除非有设置`userIsInTheMiddleOfEnteringNumber`为`NO`，否则只要数字大于一，您的代码就会执行`self.userPressedDecimalPoint = 1;`并将其设置回一。

# iphone - iOS 应用内购买。需要澄清

> ID：11710297
> 
> 赞同：-1
> 
> 时间：2012-07-29T15:07:54.207
> 
> 标签：iphone, ios

我打算使用订阅（自动续订）类型的应用内购买。我的想法是允许每台设备订阅一次。（即）如果有人在 iPhone 上购买订阅，他应该不能在 iPad 上使用相同的订阅。相反，我想强制用户订阅其他设备。但是从应用内购买我的理解是，如果用户订阅了一个特定的项目，如果他再次尝试购买同样的东西，应用商店允许用户恢复已经购买的项目。

根据我当前的设置，所有下载都将在单独的服务器上进行，我将把所有收据和内容保存在该服务器中。为了实现这个特定的东西，我应该在我的应用程序中做什么？有人可以帮我吗？

另外，如果我想限制使用应用内购买从服务器下载数据，仅适用于 3 台设备？Beyond 3 我希望用户再次通过应用内购买付款？我将如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:14:03.570

Apple 的[应用内购买指南](https://developer.apple.com/news/pdf/in_app_purchase.pdf)规定您*必须*支持恢复对用户所有设备的订阅（请参阅第 7 页）。

还要考虑您的内容是否是*偶发*的（例如电视节目或杂志），因为这是使用自动续订订阅的要求。对于某些功能的限时访问，例如导航应用程序中的语音指导，您需要使用非续订订阅。

# cassandra - 如何计算 cassandra 列族中的行数

> ID：11710298
> 
> 赞同：2
> 
> 时间：2012-07-29T15:07:55.487
> 
> 标签：cassandra, hector

我正在将带有用户配置文件的文件写入具有 5M 配置文件的 cassandra。我的写操作成功完成。我想计算列族中的行数。

```
Keyspace keyspaceOperator = HFactory.createKeyspace(KEY_SPACE, cluster);
CqlQuery<String,String,Long> cqlQuery = new CqlQuery<String,String,Long>(keyspaceOperator, se, se, new LongSerializer());
cqlQuery.setQuery("SELECT COUNT(*) FROM up");
QueryResult<CqlRows<String,String,Long>> result = cqlQuery.execute();
System.out.println(result.get().getAsCount()); 
```

但是下面的代码总是打印我 10000。我做错了什么？我怎样才能从cli进行这个操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:54:51.967

你暂时不能。每个查询的默认限制为 10K 行。对此（CASSANDRA-3702）有一张未解决的票，但目前还没有修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:08:08.547

只有其他选择是通过 RangeSlicesQuery 进行迭代。我创建了一个“人口普查”程序来计算行数和总列数；[这是长类型的版本](http://pastebin.com/h5zAUGsk)。但是，如果这是一项频繁的活动，传统的智慧似乎是使用单独的计数器列来跟踪；[在这里进行一些讨论](https://stackoverflow.com/questions/7406178/counting-columns-very-slow-countquery-vs-slicequery-operations)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:24:15.473

您只需要给出一个与您想计算的一样大的限制。如果您不希望计数超过 1e9，请执行

```
SELECT COUNT(*) FROM up LIMIT 1000000000; 
```

但请注意， COUNT（以及 RangeSlicesQuery 也是）根本没有性能，甚至不应该如此。它们本质上与关系数据库用语中的“顺序扫描”相同。计数器是解决分布式系统中此类问题的更好方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:17:01.723

请参阅[此处](https://github.com/kkopalle/cassandraAstyanax)以获取执行此操作的示例。

您可以自由使用代码。请注意，它`Astyanax`已被分支出来，`Hector`我们发现它是一个非常好的`Cassandra`客户端`Java`。

# java - 从 Java 打印失败，出现“pstopdffilter/pstocupsraster 失败，错误号 -31000”

> ID：11710300
> 
> 赞同：1
> 
> 时间：2012-07-29T15:07:58.150
> 
> 标签：java, macos, printing

在 Mac OS X 10.8.0 上尝试使用以下 Java 代码打印 JPEG 文件时，我收到错误消息：

```
Error: pstopdffilter/pstocupsraster failed with err number 31000 
```

谷歌搜索带来的建议似乎暗示问题不直接出现在 Java 上，例如 [http://forum.parallels.com/showthread.php?t=106337](http://forum.parallels.com/showthread.php?t=106337)

```
/**
 * http://stackoverflow.com/questions/7843338/printing-a-tif-file
 * 
 * @param graphicFile
 * @throws PrintException
 * @throws IOException
 */
public void printGraphic(File graphicFile) throws PrintException,
        IOException {

    PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
    pras.add(new Copies(1));
    pras.add(Chromaticity.COLOR);
    pras.add(MediaSizeName.ISO_A4);
    PrintService pss[] = PrintServiceLookup.lookupPrintServices(
            DocFlavor.INPUT_STREAM.JPEG, pras);

    if (pss.length == 0)
        throw new RuntimeException("No printer services available.");

    PrintService ps = pss[0];
    System.out.println("Printing to " + ps);
    DocPrintJob job = ps.createPrintJob();
    FileInputStream fin = new FileInputStream(graphicFile);
    Doc doc = new SimpleDoc(fin, DocFlavor.INPUT_STREAM.JPEG, null);
    job.print(doc, pras);
    fin.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:20:09.257

**作为一种解决方法，我建议使用 jpeg 而不是 tiff。**

```
/**
 * http://stackoverflow.com/questions/5338423/print-a-image-with-actual-size
 * -in-java
 * 
 * @param graphicFile
 */
public void printG(File graphicFile) {
    final Image img = new ImageIcon(graphicFile.getAbsolutePath())
            .getImage();
    PrinterJob printJob = PrinterJob.getPrinterJob();
    Printable printable = new Printable() {
        public int print(Graphics graphics, PageFormat pageFormat,
                int pageIndex) throws PrinterException {
            if (pageIndex != 0) {
                return NO_SUCH_PAGE;
            }
            graphics.drawImage(img, 0, 0, img.getWidth(null),
                    img.getHeight(null), null);
            return PAGE_EXISTS;
        }
    };
    printJob.setPrintable(printable, getPageFormat());
    if (printJob.printDialog()) {
        try {
            printJob.print();
        } catch (Exception prt) {
            handle(prt);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:33:19.380

您说您正在*“尝试打印 JPEG 文件”*。

但是，错误消息表明 CUPS（Mac OS X 打印子系统）尝试通过`pstopdffilter`（将 PostScript 转换为 PDF`pstocupsraster`的实用程序）或通过（将 PostScript 转换为 CUPS 光栅的实用程序）运行打印作业。

您应该首先启用`LogLevel debug`（编辑*/private/etc/cups/cupsd.conf*并重新启动 CUPS 打印服务）。

然后，在 CUPS 日志文件 (*/var/log/cups/error_log*) 中查找包含以下字符串的行：

```
Auto-typing file...
Request file type is
Started filter
Started backend
exited with
failed with 
```

您的发现***可能***类似于以下内容：

```
D [...timestamp...] [Job 9] Auto-typing file...
D [...timestamp...] [Job 9] Request file type is image/jpeg.
I [...timestamp...] [Job 9] Started filter /usr/libexec/cups/filter/imagetops (PID 25690)
I [...timestamp...] [Job 9] Started filter /usr/libexec/cups/filter/pstops (PID 25691)
I [...timestamp...] [Job 9] Started filter /usr/libexec/cups/filter/pstopdffilter (PID 25694)
I [...timestamp...] [Job 9] Started backend /usr/libexec/cups/backend/2dir (PID 25695)
D [...timestamp...] PID 25690 (/usr/libexec/cups/filter/imagetops) exited with no errors.
D [...timestamp...] PID 25691 (/usr/libexec/cups/filter/pstops) exited with no errors.
E [...timestamp...] PID 25694 (/usr/libexec/cups/filter/pstopdffilter) failed with err number -31000.
D [...timestamp...] PID 25695 (/usr/libexec/cups/backend/2dir) exited with no errors. 
```

我说“*类似于*以下内容”是因为我的水晶球现在正在维修中，而您没有提供有关打印环境设置的任何其他详细信息，否则将无法进一步分析您的问题。

此外，在日志文件中查找指示 PostScript 错误的行，例如：

```
D [...timestamp...] [Job 9] %%[ Error: ioerror; OffendingCommand: image ]%%
D [...timestamp...] [Job 9] 
D [...timestamp...] [Job 9] Stack:
D [...timestamp...] [Job 9] -dict-
D [...timestamp...] [Job 9] 
D [...timestamp...] [Job 9] %%[ Flushing: rest of job (to end-of-file) will be ignored ]%%
D [...timestamp...] [Job 9] 
D [...timestamp...] [Job 9] %%[ Warning: PostScript error. No PDF file produced. ] %% 
```

在这种情况下，您的*输入文件可能有问题*，可能太大或其他...

一般来说，重要的是要知道：

1.  打印服务的“自动键入”功能为打印作业的 MIME 类型返回了什么？
2.  在pstopdffilter（或 pstocupsraster）发挥作用*之前*，过滤器链中运行了哪些过滤器（如果有） ？

# node.js - 无法将图像上传到 node.js

> ID：11710303
> 
> 赞同：0
> 
> 时间：2012-07-29T15:08:24.737
> 
> 标签：node.js

**我正在学习“node.js”，我有项目上传图片和文件upload.js，但我已经开始upload.js，我有一个错误，因为我没有开始upload.js**

```
var http = require("http");
var url = require("url");
var multipart = require("multipart");
var sys = require("sys");
var events = require("events");
var posix = require("posix");

var server = http.createServer(function(req, res) {
    // Simple path-based request dispatcher
    switch (url.parse(req.url).pathname) {
        case '/':
            display_form(req, res);
            break;
        case '/upload':
            upload_file(req, res);
            break;
        default:
            show_404(req, res);
            break;
    }
});

// Server would listen on port 800
server.listen(8000);

/*
 * Display upload form
 */
function display_form(req, res) {
    res.sendHeader(200, {"Content-Type": "text/html"});
    res.sendBody(
        '<form action="/upload" method="post" enctype="multipart/form-data">'+
        '<input type="file" name="upload-file">'+
        '<input type="submit" value="Upload">'+
        '</form>'
    );
    res.finish();
}

/*
 * Write chunk of uploaded file
 */
function write_chunk(request, fileDescriptor, chunk, isLast, closePromise) {
    // Pause receiving request data (until current chunk is written)
    request.pause();
    // Write chunk to file
    sys.debug("Writing chunk");
    posix.write(fileDescriptor, chunk).addCallback(function() {
        sys.debug("Wrote chunk");
        // Resume receiving request data
        request.resume();
        // Close file if completed
        if (isLast) {
            sys.debug("Closing file");
            posix.close(fileDescriptor).addCallback(function() {
                sys.debug("Closed file");

                // Emit file close promise
                closePromise.emitSuccess();
            });
        }
    });
}

/*
 * Handle file upload
 */
function upload_file(req, res) {
    // Request body is binary
    req.setBodyEncoding("binary");

    // Handle request as multipart
    var stream = new multipart.Stream(req);

    // Create promise that will be used to emit event on file close
    var closePromise = new events.Promise();

    // Add handler for a request part received
    stream.addListener("part", function(part) {
        sys.debug("Received part, name = " + part.name + ", filename = " + part.filename);

        var openPromise = null;

        // Add handler for a request part body chunk received
        part.addListener("body", function(chunk) {
            // Calculate upload progress
            var progress = (stream.bytesReceived / stream.bytesTotal * 100).toFixed(2);
            var mb = (stream.bytesTotal / 1024 / 1024).toFixed(1);

            sys.debug("Uploading " + mb + "mb (" + progress + "%)");

            // Ask to open/create file (if not asked before)
            if (openPromise == null) {
                sys.debug("Opening file");
                openPromise = posix.open("./uploads/" + part.filename, process.O_CREAT | process.O_WRONLY, 0600);
            }

            // Add callback to execute after file is opened
            // If file is already open it is executed immediately
            openPromise.addCallback(function(fileDescriptor) {
                // Write chunk to file
                write_chunk(req, fileDescriptor, chunk, 
                    (stream.bytesReceived == stream.bytesTotal), closePromise);
            });
        });
    });

    // Add handler for the request being completed
    stream.addListener("complete", function() {
        sys.debug("Request complete");

        // Wait until file is closed
        closePromise.addCallback(function() {
            // Render response
            res.sendHeader(200, {"Content-Type": "text/plain"});
            res.sendBody("Thanks for playing!");
            res.finish();

            sys.puts("\n=> Done");
        });
    });
}

/*
 * Handles page not found error
 */
function show_404(req, res) {
    res.sendHeader(404, {"Content-Type": "text/plain"});
    res.sendBody("You r doing it rong!");
    res.finish();
} 
```

**但是我在启动时遇到了一个问题：“node upload.js: by emulator**

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Cannot find module 'multipart'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at Object.<anonymous> (/home/ht/Desktop/Test/mysite/test3.js:3:17)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:19:30.730

Multipart.js 现在是一个单独的模块，它不再随 node.js 一起提供。你可以在[这里](https://github.com/isaacs/multipart-js/)得到它。

或者您可以使用 express 来处理上传。在这里查看：http: [//howtonode.org/really-simple-file-uploads](http://howtonode.org/really-simple-file-uploads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T06:46:46.397

如果您是新手，我建议您最好使用[express](http://expressjs.com/)上传文件。Express 建立在多部分中间件之上。这是一个非常基本的例子：

```
var express = require('express'),
app = express(),
fs = require('fs');
app.listen(8000);

app.get('/', function(req, res) {
  res.send(
    '<form action="/upload" enctype="multipart/form-data" method="post">' +
    '<input type="text" name="title"><br>' +
    '<input type="file" name="upload"><br>' +
    '<input type="submit" value="Upload">' +
    '</form>'
  );
});
app.post('/upload', express.bodyParser(), function(req, res) {
  fs.rename(req.files.upload.path, path/to/your/upload/directory, function(err) {
  if(!err) res.send('uploaded!');
  });
}); 
```

# c - 在c中使用#pragma pack但无法理解

> ID：11710304
> 
> 赞同：2
> 
> 时间：2012-07-29T15:08:27.010
> 
> 标签：c

我已经使用#pragma 指令编写了一个代码来对齐，但我无法理解对齐是如何发生的。我在 ubuntu 上使用 gcc。

```
#include<stdio.h>

#define MALE 0;
#define FEMALE 1;
#define SINGLE 0;
#define MARRIED 1;
#pragma pack(3);

int main()
{
    struct emp
    {
        unsigned gender :1;
        unsigned mar:1;
        unsigned hobby:1;
        unsigned scheme :1;
    };
    struct emp e;
    e.gender=MALE;
    e.mar=SINGLE;
    e.hobby=1;
    e.scheme=1;
    printf("size of %d",sizeof(e));
    return 0;
} 
```

当我使用#pragma pack as 1 时，size 为 1，#pragma pack as 2 size 为 2，3 为 4。

你能告诉我发生了什么吗？如果我不使用它仍然 4 来。

`#pragma pack(1)`那么和 和有什么区别`#pragma pack(2)`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:11:41.183

`3`不是`#pragma pack`指令的有效参数。

例如，根据[此页面](http://publib.boulder.ibm.com/infocenter/cellcomp/v101v121/index.jsp?topic=/com.ibm.xlcpp101.cell.doc/compiler_ref/pragma_pack.html)，有效值为`1`、`2`、和。`4``8``16`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:29:35.847

`#pragma' 指令是 C 标准指定的方法，用于向编译器提供超出语言本身传达的信息的附加信息。

`#pragma`pack 指定结构、联合和类成员的打包对齐方式。

有效值为 1、2、4、8 和 16。成员的对齐方式将位于上述任何值的倍数或成员大小的倍数的边界上，以较小者为准。

有关更多详细信息，请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.71%29.aspx) 和[此处](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=/com.ibm.vacpp6m.doc/compiler/ref/rnpgpack.htm)。

此外，下面还有一些关于结构包装的信息[。](http://www.geeksforgeeks.org/archives/9705)

**什么是结构填料？**

有时必须避免结构成员之间的填充字节。例如，读取 ELF 文件头或 BMP 或 JPEG 文件头的内容。我们需要定义一个类似于标题布局的结构并映射它。但是，在访问此类成员时应小心谨慎。通常，逐字节读取是避免未对齐异常的一种选择。性能会受到打击。

大多数编译器提供非标准扩展来关闭默认填充，如编译指示或命令行开关。有关更多详细信息，请参阅相应编译器的文档。

```
i want to know that when i write #pragma pack(1) it set first bits and atart second from next one what if i write #pragma(2) , whats the difference 
```

要回答这个问题，当您将#pragma 设置为 2 时，如果结构中的数据小于 2 个字节，则对齐方式保持不变。但是，如果它超过 2 个字节（比如一个 4 字节整数），它将被拆分并在 2 个字节边界处对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:58:53.163

`#pragma pack(1)`和之间的区别在于`#pragma pack(2)`，在第一种情况下，您说您的结构可以从任何地址开始。

`#pragma pack(2)`你说起始地址必须能被 2 整除（偶数地址）。 编译器通过说结构的大小为 2 来执行此操作（通过用一些未使用的空间填充它）。

如果您创建一个 的数组`emp`，例如`emp a[10]`，`sizeof(emp)`则 也是数组中每个元素之间的距离。这就是编译器将大小四舍五入到该`#pragma pack`值的下一个倍数的原因。

# iphone - UITableView 部分背景？

> ID：11710305
> 
> 赞同：13
> 
> 时间：2012-07-29T15:08:30.990
> 
> 标签：iphone, objective-c, ios, uitableview

是否可以在 UITableView 的某个部分后面使用背景图像？

我想不出如何实现这一目标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T16:10:05.830

您可以在表格视图后面放置一个视图，将表格视图的背景颜色设置为 [UIColor clearColor]，您将看到后面的视图

```
[self.view addSubview:self.sectionBackgroundView];
[self.view addSubview:self.tableView];
self.tableView.backgroundColor = [UIColor clearColor]; 
```

这样做的缺点是，这不仅限于您想要的部分，我能想到的确保此背景视图仅限于一个部分的一种方法是将背景视图的框架调整为滚动表格视图时的部分

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGRect sectionFrame = [self.tableView rectForSection:sectionWithBackground];
    self.sectionBackgroundView.frame = sectionFrame;
} 
```

您还需要在开始时执行此操作（可能在 viewWillAppear:) 中，以确保视图正确启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-03T07:09:17.293

要在 UITableView 的部分后面添加背景图像以使其滚动，请在 viewDidAppear 中写入

```
let frame = tableView.rect(forSection: 0)
let view = UIView(frame: frame)
let imgView = UIImageView(frame: view.bounds)

// Assign image here ...

view.addSubview(imgView)

tableView.addSubview(view)
tableView.sendSubviewToBack(view) 
```

注意：保持表格视图单元格的背景颜色清晰，以便背景视图可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T14:45:27.143

**Swift 5**
在表格视图中更新数据后编写以下代码：

```
 let frame = tableView.rect(forSection: 0)
        let backgroundView = UIView(frame: frame)
        let imageView = UIImageView(frame: view.bounds)
        imageView.image = your image
        backgroundView.addSubview(imageView)
        tableView.addSubview(backgroundView)
        tableView.sendSubviewToBack(backgroundView)
        tableView.backgroundColor = .clear 
```

之后，您需要`willDisplaycell`按照以下方法将单元格置于最前面：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
        tableView.bringSubviewToFront(cell)
} 
```

# python - 将 Python 二进制模块安装到 Windows 中的自定义位置

> ID：11710308
> 
> 赞同：6
> 
> 时间：2012-07-29T15:08:38.540
> 
> 标签：python, windows, installation, packages, distutils

假设我想在 Windows 上安装 Python 的二进制模块。假设模块作为预构建安装程序分发`xxx-n.n.n.win32-py2.7.exe`，使用 distutils 准备。

我的问题是安装程序坚持将包安装到他在注册表中找到的任何 Python 目录中。但是，我在闪存驱动器上有一个很小的“便携式”Python 目录，我不时使用它，并且需要在那里安装软件包。该目录未在注册表中标记。

到目前为止，我所做的只是解压缩安装程序并将文件手动复制到`Lib/site-packages`. 但也许有更聪明的选择？我能否破解 distutils 安装程序以让我指定目标 Python 目录（就像其他一些安装程序一样）？

PS：请注意，easy-install 不是一个选项，因为它坚持从源代码编译包，而我想安装预编译的包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T18:35:41.980

您**可以**使用 easy_install 安装二进制包，它不需要编译：

`easy_install binary_installer_built_with_distutils.exe`

请参阅[我可以将 Python Windows 包安装到 virtualenvs 中吗？](https://stackoverflow.com/questions/3271590/)

# jquery-mobile - jQuery mobile，根据显示换出垂直和水平数据类型

> ID：11710310
> 
> 赞同：0
> 
> 时间：2012-07-29T15:08:44.277
> 
> 标签：jquery-mobile, responsive-design

有没有办法改变 jQuery 数据类型：

```
data-type="horizontal" 
```

至：

```
data-type="vertical" 
```

当显示器在手机上与 ipad 或台式机上时？我正在对其他所有内容使用媒体查询，但我想知道是否有 JavaScript 方法来更改这些或首选 jQuery Mobile 方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:10:28.627

想通了，很简单。

```
if ($('body').width()<=767) {
    $('.switch-type').attr('data-type', 'vertical');
} 
```

当分辨率达到 767 或更低时，只需将 switch-type 类添加到您想要更改的任何数据类型。

您也可以使用 screen.width，但是当浏览器屏幕非常小时，这不会改变类型。

# css - CSS Sprite 悬停定位

> ID：11710312
> 
> 赞同：0
> 
> 时间：2012-07-29T15:08:50.917
> 
> 标签：css, css-sprites, rollover

我正在尝试构建一个简单的导航，该导航具有翻转状态和每个项目的不同图标。我为图标的开/关状态使用了 3 种不同的精灵，并且我的一切工作都很好，除了我无法将图标本身定位为左对齐并与文本对齐。现在它们出现在每个列表项的左上角，我希望它们出现在文本的左侧。但是当我添加边距或填充或将其与精灵一起定位时，当翻过来时，您会看到整个图像而不是我想要的部分。这是我的代码：

```
<div id="navcontainer">
    <ul id="navlist">
        <li><a href="#" class="sub">Subscribe &cent;99/month</a></li>
        <li><a href="#" class="profile">My Profile</a></li>
        <li><a href="#" class="log last">Log Out</a></li>
    </ul>
</div> 
```

```
#navcontainer  {
    width: 243px;
    height: 200px;
    border: 1px solid #999;
    background-color: #fff;
}

#navcontainer ul  {
    margin: 0;
    padding: 0px;
    list-style-type:  none;
    font-family: 'FranklinGothic-Book', sans-serif;
}

#navcontainer a  {
    display: block;
    padding: 14px 0px 14px 45px;
    width: 198px;
    background-color: #fff;
    border-bottom: 1px solid #eee;
}

#navcontainer a: link, #navlist a:visited {
    color: #000;
    text-decoration: none;
}

#navcontainer a: hover {
    background-color: #cbcbcb;
    color: #000;
}

#navcontainer a.last  {
    border-bottom: 0px;
}

a.sub  {
    display: block;
    width: 20px;
    height: 20px;
    text-decoration: none;
    background: url("http://vpointproductions.com/images/sub.png") no-repeat;
}

a.profile  {
    display: block;
    width: 20px;
    height: 20px;
    text-decoration: none;
    background: url("http://vpointproductions.com/images/profile.png") no-repeat;
}

a.log  {
    display: block;
    width: 20px;
    height: 20px;
    text-decoration: none;
    background: url("http://vpointproductions.com/images/log.png") no-repeat;
}

a.sub: hover, a.profile:hover, a.log:hover  {
    background-position: -20px 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:33:43.807

你不能真正做你想做的事`a sprite`。唯一的方法是将项目真正隔开，`sprite`以便您看不到精灵的其他元素。

或者，您可以每个`a`标签只使用两个图像并将它们交换到`hover`.

您可以这样做的另一种方法是放置`a span`在`a`标签内并在标签上而不是`a`标签上设置背景。

# django - 在 Windows 2008 服务器上部署 Django

> ID：11710321
> 
> 赞同：1
> 
> 时间：2012-07-29T15:10:03.407
> 
> 标签：django, apache2, windows-server-2008, mod-wsgi, m2crypto

我将在 Windows 2008 Server 上部署一个现有的 Django 项目。已安装所有必需的 python 库。为了检查一切是否正常，我使用 python manage.py runserver 命令，所以项目运行良好。之后，我尝试为 Apache 2.2 + WSGI 配置该项目并收到以下错误：

```
异常值：DLL 加载失败：找不到指定的模块。
异常位置：C:\Python27\lib\site-packages\M2Crypto\__init__.py 在第 22 行

```

**环境** Windows 2008 Server R2 Enterprise x64 Python 2.7 x86 MySQL 5.5 x86 OpenSSL 1.0.0c x86 ...所有其他python库都是为x86构建的

系统 PATH 中有 OpenSSL/Python 库的路径。

如何解决这个问题？

先感谢您。

-维克托

# jsf - 可以打开用于显示检查的面行条件吗？

> ID：11710322
> 
> 赞同：0
> 
> 时间：2012-07-29T15:10:19.150
> 
> 标签：jsf, conditional, openfaces

我可以使用开放面行条件来检查输出结果吗？我尝试像这样在我的代码中使用，但无论条件如何，它都会打印所有值

```
<o:row condition="#{item.errorCode==5}" >
   <o:cell>
       <h:outputText value="Fail"  />
   </o:cell>
</o:row>
<o:row condition="#{item.errorCode==3}" >
   <o:cell>
       <h:outputText value="Success"  />
   </o:cell>
</o:row> 
```

有没有其他方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T20:52:46.637

您可以使用`rendered`属性中的验证来控制显示。

```
<o:row>
    <o:cell>
        <h:outputText value="Fail" rendered="#{item.errorCode==5}"  />
        <h:outputText value="Success" rendered="#{item.errorCode==3}" />
    </o:cell>
</o:row> 
```

# xcode4 - Xcode中IBOutlets弱的原因

> ID：11710323
> 
> 赞同：0
> 
> 时间：2012-07-29T15:10:39.707
> 
> 标签：xcode4, weak-references, iboutlet

我阅读了相关的帖子并不太明白。 [在 ARC 下，IBOutlets 应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc) 我的理解是，由于顶层视图已经自动有一个指向出口的强指针，所以我们不应该从控制器再创建一个指向它的强指针。因此，当顶层视图被移除时，出口也可能被移除。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:16:18.253

对，那是正确的。不过你应该记住，出口不一定是主视图的子视图——它们也可以是顶级对象，在这种情况下，你应该将它们的出口声明为`strong`.

# c++ - Eclipse C++：“printf”这个词拼写不正确

> ID：11710325
> 
> 赞同：2
> 
> 时间：2012-07-29T15:10:59.117
> 
> 标签：c++, eclipse

我正在尝试在 Windows 7 中使用 Eclipse 创建我的第一个 C++ 可执行程序。

```
#include <stdio.h>
int main( int argc, const char* argv[] )
{
printf( "arg" );
} 
```

我收到错误：

> “‘printf’这个词拼写不正确”。

以下是我的配置。如何克服这个错误？

![在此处输入图像描述](../Images/84ea1955ecd8637a164c4a2df0ee7e3e.png)

![在此处输入图像描述](../Images/fd5e56b41983897d2d53f91d92c0121d.png)

![在此处输入图像描述](../Images/289a5ad81ce21f06ddd97a153d4941f8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T15:13:47.677

似乎您没有为您的 C++ 源代码提供一个被识别为标准 C++ 文件扩展名的扩展名。

您能否将文件重命名为**main.cpp**以便 eclipse 相应地处理它？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T15:14:55.303

您可以尝试使用程序更改文件的扩展名。正如我所看到的，它目前只是 Main （没有任何扩展名），eclipse 将它视为一个简单的文本文件，从而执行拼写检查。如果将其更改为 Main.c 或 Main.cpp，一切都应该没问题。

# php - mysql数据库关闭与否

> ID：11710338
> 
> 赞同：0
> 
> 时间：2012-07-29T15:13:08.880
> 
> 标签：php, mysql

我将开发一个网站，可能有成千上万的用户**同时**使用它和数据库功能。近年来，我**从未**在我的应用程序中关闭我的数据库连接。在这种情况下，在运行每个查询后关闭数据库连接还是保持打开状态更好？

我知道如果没有关闭连接池等就会耗尽，但我试图寻找特别是 MySql 的答案，但我不是很幸运。

我正在使用 Codeigniter 2.1，MySql 和 PHP。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:16:52.420

您不必手动关闭连接。PHP 将在脚本执行结束时自动为您关闭它。

# php - 令人沮丧的 PDO 错误？

> ID：11710343
> 
> 赞同：0
> 
> 时间：2012-07-29T15:13:48.800
> 
> 标签：php, database, pdo

我只是第一次涉足PDO，我一直收到一个我真的无法弄清楚的错误，导致问题的代码如下：

```
 <?php
                try {
                    // Querying the database
                    $STH = $DBH->query("SELECT 'Group' from 'GroupTable'");
                    // Setting the fetch mode
                    $STH->setFetchMode(PDO::FETCH_ASSOC); 

                    while($row = $STH->fetch()) {
                        echo '<option value="',$row['Group'],'">',$row['Group'],'</option>';
                    }
                } 
                catch(PDOException $e) {
                    echo "Error connecting to Database";
                    file_put_contents('logs/logsDB.txt', $e->getMessage(), FILE_APPEND);
                }
            ?> 
```

我不断收到相同的错误，即：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“GroupTable”附近使用正确的语法

我尝试引用/取消引用表/列名，当未引用时出现此错误：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“Group FROM GroupTable”附近使用正确的语法

我检查并仔细检查了，该表绝对称为 GroupTable，该列绝对称为 Group。

很抱歉，如果这真的很明显或很笨拙，我只是想解决这个问题，看看我是否可以学习基础知识，如果代码不符合标准，请道歉等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:17:09.737

这里有两个问题：

*   `GROUP` [是 mySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此仅在引用时才有效。
*   表名和列名需要使用反引号引用，而不是简单的引号：

    ```
    SELECT `Group` from `GroupTable` 
    ```

# python - 自定义按升序对数字列表进行排序

> ID：11710345
> 
> 赞同：1
> 
> 时间：2012-07-29T15:13:55.667
> 
> 标签：python

> **可能重复：**
> [按内部列表的最后一项对列表列表进行排序的pythonic方法](https://stackoverflow.com/questions/8020408/pythonic-way-to-sort-a-list-of-lists-by-the-last-item-of-the-inner-list)

我有一个看起来像这样的数字列表：

```
rows = [[100,1.17902838317,4.30281847041,4.30598958666,4.31258472331,10.9269044537,1.17902838317]
[110,1.3978813526,1.39847341928,1.39950407438,1.4016475818,5.17927032236,1.3978813526]
[120,2.95045527752,2.95170493026,2.95388029498,2.95840451497,7.49578397746,2.95045527752]
[30,3.14439495993,3.145726755,3.14714447001,3.15196469714,7.9862122826,3.14439495993]
[40,3.35171204965,3.62204712952,3.62308999951,3.62767337976,8.49979359433,3.62120669609]
[50,2.63010055396,2.66403524005,2.66637361988,2.67045748911,6.76620535091,2.63010055396]
[60,3.09088634745,3.09219547918,3.09447438343,3.09921394005,9.71470661115,3.09088634745]
[70,1.42116996887,1.42199838776,1.42411423836,2.27074446576,3.60990507963,2.26985641041]
[80,1.7602934006,1.76103896537,1.76233682613,1.76503605518,4.4721162759,1.7602934006]
[90,1.27784662871,1.2783878552,1.27933000894,1.28128945544,3.24643534107,1.27784662871]
] 
```

我想编写一个排序函数，它将返回使用第一列中的整数排序的原始列表，因此排序列表如下所示：

```
30,3.14439495993,3.145726755,3.14714447001,3.15196469714,7.9862122826,3.14439495993
40,3.35171204965,3.62204712952,3.62308999951,3.62767337976,8.49979359433,3.62120669609
50,2.63010055396,2.66403524005,2.66637361988,2.67045748911,6.76620535091,2.63010055396
60,3.09088634745,3.09219547918,3.09447438343,3.09921394005,9.71470661115,3.09088634745
70,1.42116996887,1.42199838776,1.42411423836,2.27074446576,3.60990507963,2.26985641041
80,1.7602934006,1.76103896537,1.76233682613,1.76503605518,4.4721162759,1.7602934006
90,1.27784662871,1.2783878552,1.27933000894,1.28128945544,3.24643534107,1.27784662871
100,1.17902838317,4.30281847041,4.30598958666,4.31258472331,10.9269044537,1.17902838317
110,1.3978813526,1.39847341928,1.39950407438,1.4016475818,5.17927032236,1.3978813526
120,2.95045527752,2.95170493026,2.95388029498,2.95840451497,7.49578397746,2.95045527752 
```

如何编写这样的自定义排序函数？

到目前为止的尝试：

```
def mysort_func(row):
    # get the integer of row[1]
    # do something with it (simply return it?)
    pass

new_list = sorted(rows, key=mysort_func) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:16:44.413

```
sorted(rows, key=lambda x: x[0]) 
```

或者

```
import operator
sorted(rows, key=operator.itemgetter(0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:20:55.583

简单地可以使用排序功能：

```
rows.sort() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:18:49.343

```
from operator import itemgetter
print(sorted(rows, key=itemgetter(0))) 
```

# android - 从付费版本中排除 admob jar

> ID：11710346
> 
> 赞同：2
> 
> 时间：2012-07-29T15:13:57.443
> 
> 标签：android, admob

我正在开发应用程序的免费和付费版本。我目前将其设置为一个“android 库项目”和两个常规的 android 项目，它们都引用该库。

我的应用程序在竞争中的一个好处是 apk 的大小非常小。我也希望尽可能小，尤其是付费版本。

那么如何在库项目中保留一个公共源代码，并且只在我的应用程序的免费版本中包含 admob jar 呢？

我发现一个[答案](https://stackoverflow.com/questions/5627492/android-library-project)提到包装器是一种可能性。但它并没有具体说明您将如何实际实施该解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:47:09.677

当我弄清楚时，答案很简单。

在免费版本中，您只需使用还显示广告的活动来扩展您的活动。现在只在支持的广告中包含 admob 的 jar 文件。你已经准备好了。

```
public class AdNanoMusicActivity extends NanoMusicActivity {

private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (!getResources().getBoolean(R.bool.paid)) {
        // Create the adView
        adView = new AdView(this, AdSize.BANNER, "a1500167a6bde8a");

        // Lookup your LinearLayout assuming it's been given
        // the attribute android:id="@+id/mainLayout"
        LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

        // Add the adView to it
        layout.addView(adView,0);

        // Initiate a generic request to load it with an ad
        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        adView.loadAd(adRequest);
    }

}

@Override
public void onDestroy() {
    if (adView != null) {
        adView.destroy();
    }
    super.onDestroy();
}
} 
```

AdNanoMusicActivity 扩展了库项目中的 NanoMusicActivity。现在您只需要在应该使用广告的项目中包含 jar 文件。我想当我再次查看它时，现在不需要 R.bool.paid 了。

# php - 如何用新的 PHP 函数替换旧的 PHP 非函数函数？

> ID：11710348
> 
> 赞同：0
> 
> 时间：2012-07-29T15:14:39.063
> 
> 标签：php, mysql

从我的一个客户那里，我收到了一个大约在 6 到 7 年前使用 PHP 构建的旧数据库管理网站，现在我需要向它添加一些功能。问题是，它不能在本地服务器上运行，我认为问题在于旧的 PHP 代码恶化。除了手动查找代码并替换它之外，还有什么更简单的方法可以用当前使用的 PHP 函数替换旧的 PHP 非函数函数？我发现这很麻烦，并导致许多新错误。

有什么办法可以加快这个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:18:18.517

我从未听说过会自动更新您的 PHP 函数的脚本，并且我认为任何这样宣传的脚本都非常容易出错并最终导致更多错误。

如果您没有坐下来做这件事，您可能会查看像 freelancer.com 这样的网站，因为我敢打赌，您可以花不到 30 美元的价格付钱给孩子。不是很辛苦，就是很累！

如果您最终自己做，请确保您的错误报告已打开，`STRICT`以便您查看所有内容。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:21:51.933

我不认为有一个自动化的过程来现代化旧的 PHP 代码。

但是，您可以跟踪 PHP 输出的错误，并在 IDE 或文本编辑器中使用正则表达式搜索/替换来纠正每种类型的错误（与每个单一错误相反）。

这可能需要一些时间，但根据我的经验，这是唯一且最快的方法。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T18:00:40.670

我认为最好将您的 PHP 版本降级到您的客户端版本，然后添加新功能，对其进行测试，然后将其返回给您的客户。

永远不要改变多年来都能正常工作的东西。

# jquery - jCarousel 中剥离的元素样式

> ID：11710350
> 
> 赞同：0
> 
> 时间：2012-07-29T15:14:45.090
> 
> 标签：jquery, css, jcarousel

我遇到了一个非常奇怪的问题，即`div`放置在 a 中的任何元素（在本例中为 a ）的样式`jCarousel` `li`都被删除了。

可以看到该类（感谢 Firebug），但没有附加样式。当样式内联列出时，一切似乎都正常。

我创建了一个**jsfiddle**来尝试解决问题，但是在使用它时它似乎可以正常工作。无论如何，这是一个链接：[jsfiddle](http://jsfiddle.net/danielmeade/CWqWP/1/)

关于这里发生了什么的任何想法？

谢谢！

# css - CSS 定位 - 绝对/相对/？

> ID：11710355
> 
> 赞同：0
> 
> 时间：2012-07-29T15:14:59.193
> 
> 标签：css, css-position

问题与这里的小提琴有关：http: [//jsfiddle.net/k3QAC/1/](http://jsfiddle.net/k3QAC/1/)我和我的朋友正在做一个项目

我有三个相同的部分标签，如下所示：

```
<section id="1">
 <h3>This is a heading.</h3>
 <p>This is 1 of 1 p tags.</p>
 <p>This is 1 of 2 p tags.</p>
 <p>This is 1 of 3 p tags.</p>
</section>
<section id="2">
 <h3>This is a heading.</h3>
 <p>This is 1 of 1 p tags.</p>
 <p>This is 1 of 2 p tags.</p>
 <p>This is 1 of 3 p tags.</p>
</section>
<section id="3">
 <h3>This is a heading.</h3>
 <p>This is 1 of 1 p tags.</p>
 <p>This is 1 of 2 p tags.</p>
 <p>This is 1 of 3 p tags.</p>
</section> 
```

当您将鼠标悬停在我的 Fiddle 中的任何 H3 标签上时，我希望 < p > 标签显示在完全相同的位置。如，如果您有超过 section#1 h3，则 p 标签从顶部开始显示。如果您将鼠标悬停在第 #2 h3 部分，则 p 标签显示在完全相同的位置。与#3 h3 部分相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:26:55.847

如果您希望可见段落始终出现在页面顶部，标题列表旁边，您想`position: absolute;`在`p`标签上使用，并且`top: 0;`除了`left: 25%;`您不会在`section`标签上使用任何定位，以便段落相对于文档放置。如果您希望显示与 相关的段落`section`，只需添加`position: relative;`到`section`标签

```
section p { 
  position:absolute;
  left:25%;
  top: 0;
  width:75%;
  display: none;
} 
```

演示 1：http: [//jsfiddle.net/qemuK/](http://jsfiddle.net/qemuK/)

但是，您的规则`section h3:hover + p`仅适用于`h3:hover`. 按照设计，每个部分的第 2 和第 3 段将始终不可见。要显示所有三个段落，您需要将它们包装在另一个元素中并显示/隐藏该元素，而不是段落本身。

```
<section>
  <h3> This is a heading</h3>
  <div class="paragraphs">
    <p>1 1 This is Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin id tortor nulla, in placerat ligula. Fusce magna turpis, consequat ut tempus quis, elementum varius</p>
    <p>1 2 This is Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin id tortor nulla, in placerat ligula. Fusce magna turpis, consequat ut tempus quis, elementum varius</p>
    <p>1 3 This is Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin id tortor nulla, in placerat ligula. Fusce magna turpis, consequat ut tempus quis, elementum varius</p>
  </div>
</section> 
```

和CSS：

```
section .paragraphs { 
    position:absolute;
    left:25%;
    top: 0;
    width:75%;
    display: none;
}

section h3:hover + .paragraphs {
    display:block;
} 
```

演示 2：http: [//jsfiddle.net/YcDuu/](http://jsfiddle.net/YcDuu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:23:52.760

如果我对你的理解正确，试试[这个更新的 Fiddle](http://jsfiddle.net/k3QAC/2/)。`p`标签是 的子级，`section`因此`section`需要相对定位的是 ，而不是标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T16:28:22.810

或者：http: [//jsfiddle.net/k3QAC/2/](http://jsfiddle.net/k3QAC/2/)

# android - 如何从多台计算机进行 Android 开发？

> ID：11710357
> 
> 赞同：5
> 
> 时间：2012-07-29T15:15:08.830
> 
> 标签：android, eclipse, svn

好吧，我正在尝试 Android 开发，我想在多台 PC（例如办公室和家用 PC）上使用相同的 Android 代码。问题是，我正在使用 SVN 来同步 Android 工作区文件夹，但是当我在 PC 上进行 SVN 更新，然后在 Eclipse 中打开/导入项目，我得到各种错误..

以前我为通过 SVN 同步 Visual Studio 2010 的“项目”文件夹做了上述操作，效果非常好..

如何在多台 PC 之间共享相同的 Android 工作区，而不必手动将代码复制到另一台机器，并且每次切换 PC 时都必须手动导入它......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:55:08.407

我已经使用 SVN 或 git 进行了开发。

您需要在每台计算机中创建一个项目，但不要使用导入。仅将 java 文件 + proguard 文件 + manifest 文件 + .classpath 和 .project 保存在 SVN/git 中。然后，在每台计算机上（您只需要这样做一次）创建一个新项目并使用 eclipse 上的“从现有源创建项目”选项。

有时你需要使用 Build > Clean 来重建你的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T17:37:46.190

好吧，既然每个人都介绍了如何使用 SVN 来做到这一点。我想建议你别的。我曾经尝试使用云服务（例如 Google Cloud、Drobbox 等）来做到这一点。您可以在 Dropbox 文件夹中创建一个项目，每次切换计算机时只需清理您的项目。

问候，还有艾哈迈德 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T15:20:16.707

请提供有关您遇到哪种错误的信息。

我怀疑您正在尝试提交未更新的项目。
因此，在处理您的项目之前，强烈建议您进行“更新”

我认为发生错误是因为您尝试提交
可能会导致冲突的未更新文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T15:25:39.903

您需要安装[SVN Plugin](http://www.vogella.com/articles/EclipseSubversive/article.html)这里是[如何在 Eclipse 中安装 SVN 的教程](http://www.vogella.com/articles/EclipseSubversive/article.html)

然后在 SVN 服务器上只上传 Java 文件/src、资源文件夹和 Manifest 文件。

在其他 PC 上，您可以直接从 SVN 插件创建/导入项目。并且会自动生成一些像 gen/bin 这样的文件。现在你需要清理项目，你就可以使用了。

现在在 SVN 上提交文件/更改之前，您需要先从 SVN 插件更新您的代码，所以它不会导致冲突..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T16:12:24.197

据我了解，你在你的办公室和家里编码。所以现在你需要改变你在办公室所做的相同的代码来反映你的家用电脑。因为这第一件事是你的家用电脑也连接到 SVN。如果是 - 在办公室工作时始终“提交”您的更改。然后回家后总是对同一个项目进行更新，然后开始编码，如果您在 HOME 中对您的更改感到满意，那么在离开 HOME PC 之前提交您的更改。然后在开始使用您的 OFFICE PC 之前再次进行更新，然后开始编码。如果您这样做，那么它应该可以正常工作。如果您仍然遇到错误，那么在 Eclipse 中单击 WINDOW，然后单击 SHOW VIEW，然后选择 PROBLEMS... 即 WINDOW>SHOW VIEW>PROBLEMS，您会看到一些问题为错误，将它们粘贴到此处以便我们清楚了解。可能是一些类路径问题。您可以打开您的项目文件夹，查找类路径文件，查看类路径是否适合您可能正在使用的 JARS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-25T14:28:37.237

**如果您已经使用了独立的 SVN 客户端，例如 Cornerstone 或 Versions**，请确保您 svn 忽略以下目录，因为它们特定于您的工作区，并且当您尝试签出并导入另一台机器上的项目时会导致问题：

*   .settings
*   斌
*   创

在您签入没有这些源文件的源文件后，您可以在第二台机器上使用文件 > 导入 > 现有 Android 代码到工作区从工作副本创建一个新项目。

# google-apps-script - 是否可以更改元素的 ID 以响应带有应用程序脚本的事件？

> ID：11710360
> 
> 赞同：0
> 
> 时间：2012-07-29T15:15:44.743
> 
> 标签：google-apps-script, google-apps

我正在尝试更改元素的 id 以响应事件，但我似乎无法让它工作。我已经创建了一个简化的示例来说明我在下面尝试做的事情。

```
function handleEvent(e) {
  var app = UiApp.getActiveApplication();
  app = changeId_(app, 0, 1);
  return app;
}

function changeId_(app, idOld, idNew) {
  app.getElementById(idOld + "element").setId(idNew + "element");
  return app;
} 
```

我只是想知道是否真的可以这样做，因为我想不出代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:58:57.720

我不认为这是可能的。但是你为什么要这样做呢？如果您可以提供用例，也许社区可以为您提供另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T01:19:26.633

您应该能够使用网格并替换网格中的元素。当您替换网格中的元素时，您可以为新元素/“小部件”使用新 ID。就我而言，我重新填充了整个网格以简化代码，但我认为可以替换单个元素。

注意小部件 ID，如果您为新小部件重复使用旧 ID，请确保新旧小部件的小部件类型相同。

# c# - 如何在 javascript window.print() 函数中打印 MathML

> ID：11710361
> 
> 赞同：0
> 
> 时间：2012-07-29T15:15:54.933
> 
> 标签：c#, javascript, wpf, mathml

我意识到这个问题可能是一个很长的问题，但无论如何我都必须尝试。我正在 WPF c# 应用程序中做一个数学项目，可以在其中输入和求解数学方程。我在 Web 浏览器控件中渲染（显示）方程（因为它是唯一可以处理 MathML 的东西），并且我安装了 MathPlayer 3.0 以使 Internet Explorer 能够理解 mathML。

到目前为止，一切都顺利进行。我想根据用户过去所做的方程式生成报告，并希望此报告可打印。由于我使用的是 Web 浏览器控件，因此我想到了使用 Javascript window.print() 函数。唯一的问题是没有打印（可能是因为页面上的 mathML）。

那么有没有人可能对我有一些建议，关于如何在浏览器中打印 MathPlayer 呈现的 mathML（我在[http://www.dessci.com/en/products/mathplayer/tech/accessibility.htm](http://www.dessci.com/en/products/mathplayer/tech/accessibility.htm)上看到确实可以使用 MathPlayer mathML 打印页面，因为该页面是可打印的（右键单击，打印预览）。

非常感谢任何其他评论和任何形式的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:32:55.397

您也可以使用[MathJax](http://www.mathjax.org/)来呈现 MathML——打印应该可以正常工作。[免责声明：我是 MathJax 团队的一员}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:23:33.867

好的，所以这不是我想要的，但我找到了一个非常“肮脏”的解决方法来做我需要的事情。

由于 Firefox 是唯一在没有插件的情况下原生支持 MathML 的浏览器，因此我将 Firefox 包含在项目安装中。因此，当尝试从我的 WPF 应用程序打印文档时，我将所有 HTML 写入文件并包含 javascript 以在正文完成加载时调用 document.print() 函数。然后，我创建了一个进程来启动我刚刚用 Firefox 创建的 HTML 文件，当浏览器打开时，javascript 将调用打印对话框。

正如我所说，这远非完美，但它是我打印 mathML 的一种方式，它在 browserControl 中呈现。

注意：Peter Krautzberger 的建议会奏效，但我希望我的应用程序能够独立于 Internet 连接运行。

# ruby-on-rails - Rails - 查询数据库并且不显示错误

> ID：11710362
> 
> 赞同：1
> 
> 时间：2012-07-29T15:16:14.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Notifications`表，它使用 url 参数哈希提供的 ID 进行查询。

假设我有以下网址：`videos/11?notification=5`

`5`映射到通知。但假设用户更改并`5`提交`7`URL。如果 ID 为 7 的通知不存在，Rails 会发送一条错误消息`could not find a notification with ID 7`。我希望它简单地忽略错误并继续。发现后我正在做一些测试，所以不会发生任何不想要的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:13:24.817

在您的控制器中，您可能正在使用`Notification.find`. 如果找不到具有给定 id 的记录，这将引发错误。如果找不到记录，finder 方法`Notification.find_by_id`不会抛出异常，而是返回`nil`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:13:22.140

你可以这样做 ：

```
Notification.find_by_id 7 
```

如果没有 id 为 7 的记录，它将返回 nil。

# algorithm - 将 Fortran77 代码转换为 Matlab 代码以查找特征值/向量

> ID：11710366
> 
> 赞同：0
> 
> 时间：2012-07-29T15:16:40.513
> 
> 标签：algorithm, matlab, fortran, linear-algebra, eigenvalue

我将 fortran 77 中的书面代码转换为 Matlab 代码。此函数使用 QL 算法计算矩阵的特征值和特征向量。由于某些原因，我不能在 matlab 中使用 eig 函数的结果。该方法得到的特征值与 eig 函数得到的特征值不完全相同，有的相同，有的不同。我不知道问题出在哪里。感谢您的任何帮助和建议。如果需要运行和查看结果，我可以提供输入数组。

这是fortran代码：

```
 SUBROUTINE tqli(d,e,n,np,z)
      INTEGER n,np
      REAL d(np),e(np),z(np,np)
CU    USES pythag
      INTEGER i,iter,k,l,m
      REAL b,c,dd,f,g,p,r,s,pythag
      do 11 i=2,n
        e(i-1)=e(i)
11    continue
      e(n)=0.
      do 15 l=1,n
        iter=0
1       do 12 m=l,n-1
          dd=abs(d(m))+abs(d(m+1))
          if (abs(e(m))+dd.eq.dd) goto 2
12      continue
        m=n
2       if(m.ne.l)then
          if(iter.eq.30)pause 'too many iterations in tqli'
          iter=iter+1
          g=(d(l+1)-d(l))/(2.*e(l))
          r=pythag(g,1.)
          g=d(m)-d(l)+e(l)/(g+sign(r,g))
          s=1.
          c=1.
          p=0.
          do 14 i=m-1,l,-1
            f=s*e(i)
            b=c*e(i)
            r=pythag(f,g)
            e(i+1)=r
            if(r.eq.0.)then
              d(i+1)=d(i+1)-p
              e(m)=0.
              goto 1
            endif
            s=f/r
            c=g/r
            g=d(i+1)-p
            r=(d(i)-g)*s+2.*c*b
            p=s*r
            d(i+1)=g+p
            g=c*r-b
C     Omit lines from here ...
            do 13 k=1,n
              f=z(k,i+1)
              z(k,i+1)=s*z(k,i)+c*f
              z(k,i)=c*z(k,i)-s*f
13          continue
C     ... to here when finding only eigenvalues.
14        continue
          d(l)=d(l)-p
          e(l)=g
          e(m)=0.
          goto 1
        endif
15    continue
      return
      END 
```

以下是matlab代码：

```
function [d,z]=tqli(d,e,n,np,z)

for i=2:n
    e(i-1)=e(i);
end
e(n)=0.;
for l=1:n
    iter=0;
    for m=l:(n-1)
        dd=abs(d(m))+abs(d(m+1));
        if ((abs(e(m))+dd)==dd)
            break
        end
    end
    m=n;
    if (m~=l)
        if (iter==30)
            disp('too many iteration in tqli')
        end
        iter=iter+1;
        g=(d(l+1)-d(l))/(2.*e(l));
        r=pythag(g,1.);
        g=d(m)-d(l)+e(l)/(g+r*sign(g));
        s=1.;
        c=1.;
        p=0.;
        for i=(m-1):-1:l
            f=s*e(i);
            b=c*e(i);
            r=pythag(f,g);
            e(i+1)=r;
            if(r==0.)
                d(i+1)=d(i+1)-p;
                e(m)=0.;
                break
            end
            s=f/r;
            c=g/r;
            g=d(i+1)-p;
            r=(d(i)-g)*s+2.*c*b;
            p=s*r;
            d(i+1)=g+p;
            g=c*r-b;
            for k=1:n
                f=z(k,i+1);
                z(k,i+1)=s*z(k,i)+c*f;
                z(k,i)=c*z(k,i)-s*f;
            end
        end
        d(l)=d(l)-p;
        e(l)=g;
        e(m)=0.;
    end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:24:49.397

在您的 Fortran 代码中，您将一堆变量声明为`REAL`. 大多数编译器默认将这些实现为 32 位浮点数。默认情况下，您的 Matlab 版本中的相应变量是 64 位浮点数。

在没有看到您的输入或输出的情况下，很难判断这是否部分或全部是两个版本输出差异的原因。但是，更改浮点数的精度通常是您报告的这类问题的原因，尤其是在诸如特征值计算等棘手的数值方法中。

在我写作时，我还观察到您已经将比较浮点值的相等性的不良做法从 Fortran 转换为 Matlab。在 Fortran 中这是不好的做法，在 Matlab 中也是不好的做法。

在 Matlab 中编写表达式时要小心，例如

```
2.*c 
```

`c`在 Fortran 中，将标量或数组变量的每个元素乘以`REAL`value `2.0`。在 Matlab 中，它将标量或向量的每个元素乘以`c`整数`2`，`.*`是 Matlab 中的运算符（或运算符的组合，如果您愿意），意思是“逐个元素执行乘法”。您已经巧妙地更改了程序的语义，并且可能更改了您计算的某些数字的精确值。

这引出了我的最后评论：您所说的 Matlab 版本只不过是 Fortran 代码的音译，从一种语言到另一种语言的逐行复制。有时你可以侥幸逃脱，但这种幼稚的方法迟早会绊倒你。也许它已经有了。你真的应该把你的 Matlab 改写成 Matlab，就好像你打算写好的 Matlab 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:44:12.253

我看到了一些可能会导致您的 matlab 翻译出现问题的事情。一个是您对 fortran 符号的转换。您需要使用 abs(r) 而不仅仅是 r。

我看到的另一个更严重的问题是您尝试重构 goto 的流程结构。当我使用 f2matlab（以及我编写的一个未发布的工具 remgoto）转换它时，它提出了以下流程结构。我希望这对您有所帮助。请注意，这都是未经测试的！

```
function [d,e,n,np,z]=tqli(d,e,n,np,z);

remg([1:2])=true;

for i = 2 : n;
 e(i-1) = e(i);
end
e(n) = 0.;
for l = 1 : n;
 while (1);
  if(remg(2))
   if(remg(1))
    iter = 0;
   end;
   remg(1)=true;
   for m = l : n - 1;
    dd = abs(d(m)) + abs(d(m+1));
    if( abs(e(m))+dd==dd )
     remg(2)=false;
     break;
    end;
   end;
   if(~(remg(2)))
    continue;
   end;
   m = fix(n);
  end;
  remg(2)=true;
  if( m~=l )
   if( iter==30 )
    disp(['too many iterations in tqli',' -- Hit Return to continue']);
    pause ;
   end;
   iter = fix(iter + 1);
   g =(d(l+1)-d(l))./(2..*e(l));
   r = pythag(g,1.);
   g = d(m) - d(l) + e(l)./(g+(abs(r).*sign(g)));
   s = 1.;
   c = 1.;
   p = 0.;
   for i = m - 1 : -1: l ;
    f = s.*e(i);
    b = c.*e(i);
    r = pythag(f,g);
    e(i+1) = r;
    if( r==0\. )
     d(i+1) = d(i+1) - p;
     e(m) = 0.;
     remg(1)=false;
     break;
    end;
    s = f./r;
    c = g./r;
    g = d(i+1) - p;
    r =(d(i)-g).*s + 2..*c.*b;
    p = s.*r;
    d(i+1) = g + p;
    g = c.*r - b;
    %        Omit lines from here ...
    for k = 1 : n;
     f = z(k,i+1);
     z(k,i+1) = s.*z(k,i) + c.*f;
     z(k,i) = c.*z(k,i) - s.*f;
    end; k = fix(n+1);
    %        ... to here when finding only eigenvalues.
   end;
   if(~(remg(1)))
    continue;
   end;
   d(l) = d(l) - p;
   e(l) = g;
   e(m) = 0.;
   remg(1)=false;
   continue;
  end;
  break;
 end;
end;
end %subroutine tqli 
```

# java - 将 Objective-C 结构数组转换为 Java

> ID：11710368
> 
> 赞同：1
> 
> 时间：2012-07-29T15:16:47.910
> 
> 标签：java, android, objective-c

我正在将一些 Objective-C 移植到 Android。源应用程序将大量数据存储在结构数组中，并具有一些高性能方法来查找数组并计算结果集，以便在用户在图形周围拖动指针时提供近乎实时的点分析他们的手指。计算结果用于更新图形周围各种视图中的值。

这是一个包含大约 7.5k 结构的示例。

```
structDataFeedReduced gFeedData[7662] = {
1233,@"",12.466667,26.166667,@"AARS",0,0,0,1.000000,-1,1,1,
6760,@"",15.816667,41.033333,@"DCTT",1,1,1,12.000000,-1,1,2,
8117,@"",44.016667,144.283333,@"SKDD",2,1,2,9.000000,-1,1,1,
8666283,@"WS",42.676666,40.006668,@"DLCC",3,2,3,-5.000000,-1,1,6,
...
...
...
}; 
```

我的问题是在 Java 中静态存储这些数据的最佳方式是什么？

我尝试了以下性能不够高的方法，无论是在加载时还是在运行时为计算提供数据。

1.  SQL 精简版。
2.  从存储在资产中的文件中读取。
3.  静态存储为字符串数组，然后将它们初始化为对象，使用镜像 Objective-C 结构的类（例如从字符串数据转换为 int、bools、doubles 等）
4.  存储在 arrays.xml 中，然后将它们初始化为对象

还有其他我可以尝试的模式吗？如果没有，那么我会支持上面的 3 或 4，因为我会牺牲一些加载和初始化性能以获得良好的运行时响应。

我的后盾是使用 JNI 将其推送到本机代码中。也许这是唯一有意义的选择？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:51:23.870

您可以将该数据保留为代码。您可以定义一个`StructDataFeedReduced`类，然后将初始化代码更改为：

```
static StructDataFeedReduced[] gFeedData = new StructDataFeedReduced[] {
    new StructDataFeedReduced(1233,"",12.466667,26.166667,"AARS",0,0,0,1.000000,-1,1,1),
    new StructDataFeedReduced(6760,"",15.816667,41.033333,"DCTT",1,1,1,12.000000,-1,1,2),
    ...
} 
```

的构造函数`StructDataFeedReduced`可以适当地将数据存储在内部字段中。

# php - PHP语法错误需要帮助修复

> ID：11710372
> 
> 赞同：0
> 
> 时间：2012-07-29T15:17:11.403
> 
> 标签：php

我收到以下错误：

*第 2 行存在语法错误，在您修复此错误之前，代码提示可能无法工作*

任何人都可以帮我修复这个语法错误

这是代码：

```
$TMPL['comments'] .= '<div class="box shadow"></div>
<div class="comments">'.foreach((array)comments($page_id) as $comment){.'
        <div class="comment shadow effect">
            <p class="left tip" title="'.$comment[username].' Said">
                <img class="avatar" src="'.get_gravatar($comment[email],40).'" />
            </p>
            <p class="body right">'.nl2br($comment[comment]).'
            <div class="details small">
                <span class="blue">'.timeBetween($comment['time'],time()).'</span> · <a class="red" href="#" onclick="$(this).delete_comment('.$comment['id'].'); return false;">Remove</a>
            </div>
            </p>
        </div>
    '}'
</div>
<div class="add_comment">
    <div class="write shadow comment">
        <p class="left">
            <img class="avatar" src="#" />
        </p>
        <p class="textarea right">
            <textarea class="left" cols="40" rows="5"></textarea>
            <input class="left" value="SEND" type="submit" />
        </p>
    </div>
    <a onclick="$(this).add_comment('.$page_id.');return false;" class="right effect shadow" href="#">Add Comment</a>
</div>'; 
```

错误在第 2 行和第 13 行下...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:19:25.070

您不能`foreach`以您的方式使用，作为字符串连接中的产品。

你必须把事情分开，像这样：

```
foreach((array)comments($page_id) as $comment)
 {
   $TMPL['comments'] .= ......... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:20:06.507

那是因为您不能在附加到字符串的语句中使用 foreach 构造（如您的情况）。你需要有如下的东西：

```
$TMPL['comments'] .= '<div class="box shadow"></div><div class="comments">';
foreach (....){
    $TMPL['comments'] .= "more string..";
    $TMPL['comments'] .= "many more strings..";
} 
```

# c++ - 在现代游戏设计中，游戏的哪些部分被编写为可移植的？

> ID：11710373
> 
> 赞同：4
> 
> 时间：2012-07-29T15:17:39.407
> 
> 标签：c++, opengl, directx

假设您是一家大公司，并且正在制作一个针对 PC、Mac、Xbox 和 PS3 的巨大、轰动一时的游戏。假设您选择了 C++，大多数工作室都倾向于这样做。您将它的哪些部分编写为可移植代码？真的可以写出便携游戏吗？如果你去一个新的平台，你是否必须重写渲染引擎和用户界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:25:15.647

有根据的猜测是，除了硬件相关代码之外的所有内容都被编写为可移植的。即游戏逻辑、矢量图形、声音（？）是（相当）可移植的，图形输出、内存管理、计时不是（总是）。

有了一个好的库选择，您可能可以最大限度地增加可移植代码的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:21:56.130

您当然不能要求您的 PC 游戏玩家使用 360 控制器。

至少必须从头开始重新完成渲染和用户界面。此外，其他依赖操作系统的功能（如网络）很可能必须进行改革。毕竟，`boost::asio`可能无法在 PS3 上运行。其他一些特定于处理器的东西，比如矢量化

然而，理想情况下，游戏会使用尽可能多的可移植代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T15:22:08.733

通常，我会假设如果有一个物理引擎，那将是可移植的。玩家系统，例如健康、库存、NPC 行为等也将是独立于平台的。您很可能必须重写渲染引擎，具体取决于游戏的用途。由于必须与不同的控制器进行交互，因此用户交互可能会进行一些重写，而这些控制器很可能在每个控制台中以不同的方式访问。

一般来说，如果代码与控制台的 API 交互，则必须重写渲染、矢量化、用户界面、输入等。物理、基本行为、人工智能和健康库存管理等基本代码实际上不需要重写。

所以最后：**如果它依赖于硬件，则必须重写或重构。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T15:24:31.837

坚持 DRY 原则也会导致代码更加可移植，因为任何不可移植的代码都是本地化的。

例如，避免在代码中多次这样做：

```
#if defined(PC)
  // create a network connection PC-style
#elif defined(XBOX)
  // create a network connection XBox-style
#elif defined(MAC)
  // create a network connection Mac-style
#elif defined(PS3)
  // create a network connection PS3-style
#endif 
```

相反，做一次并创建一个函数

```
createNetworkConnection(); 
```

您在多个地方使用。

# javascript - js初学者-网页定义的文本节点中的文本内容是什么，实际上是2个div之间的空格

> ID：11710374
> 
> 赞同：1
> 
> 时间：2012-07-29T15:17:55.567
> 
> 标签：javascript, html, dom

考虑下面给出的网页的 HTML 片段——

```
<div id="divText">Text 1
    <div id="divText1_1">Text 1_1</div>
    <div id="divText1_2">Text 1_2</div>
    <div id="divText1_3">Text 1_3</div>
    <div id="divText1_4">Text 1_4</div>
</div> 
```

现在，如果用户选择了外部 div 中的前 2 个 div（即“Text 1_1”和“Text 1_2”），则有对应于 2 个 div 的节点 - 即 divText1_1 和 divText1_2，也有 2 个文本节点用于用户选择的 2 个文本片段。

但是，除了这些节点（2 个 text 和 2 个 divs ）之外，还有一个 text 节点，它出现在第二个 div 节点之前。据我了解，因为在第一个内部 div 的末尾和第二个外部 div 之前有空格，所以这个空格也被浏览器视为文本节点。

我想知道的是，如何过滤掉这样的节点？换句话说，这些文本节点的所有可能值是多少？null/“”/“”/其他值？我想知道所有可能的值，以便我可以正确过滤掉这些节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:23:47.110

文本节点总是有一个**字符串**作为它们的值。如果要过滤掉仅包含空白字符的文本节点，则可以[修剪该值](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)并将其与空字符串进行比较。

# javascript - 切换两个隐藏单选按钮的最佳方法是什么？

> ID：11710386
> 
> 赞同：0
> 
> 时间：2012-07-29T15:19:45.627
> 
> 标签：javascript, jquery, html

我有两个隐藏的单选按钮和一个可见的按钮。单击此按钮应切换选中的按钮。

我可以使用 if 语句来实现这一点，只需设置单选按钮 (ID) = 检查。

但是如何用最少的代码来实现呢？

**更新**
为了满足那些除了抱怨缺少代码之外无事可做的人。尽管如此，我不明白这会使问题变得更多`constructive`。

```
<div class="switch">
    <input id="check1" type="radio" name="search" class="rbtn-search" checked="checked" value="brand" />
    <input id="check2" type="radio" name="search" class="rbtn-search" checked="" value="store" />
</div>

$('.switch').click(function(){
  // Switch the radio buttons here
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:28:02.283

见[演示](http://jsfiddle.net/Tfdnh/16/)

**HTML**

```
<div id="container">
  ​&lt;input type="radio" checked="checked">
  <input type="radio">
  <a class="button" href="#">button</a>
</div> 
```

**JavaScript**

```
$('#container .button').click(function () {
    $('#container :radio').each(function () {
      $(this).attr('checked', !$(this).attr('checked'));
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:41:27.027

你可以使用地图：

```
 <input type="radio" checked="checked">
 <input type="radio">
 <a id="btn">I'm a bbutton</a>​

jQuery("#btn").click(function() {
    jQuery(":radio").map(function() { this.checked = !this.checked; });        
});​ 
```

[小提琴](http://jsfiddle.net/rc6wZ/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:33:58.253

```
$("#toggle").click(function(){
    $(':radio').each(function(){
        $(this).attr('checked', !$(this).attr('checked'));
    })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T15:41:44.423

你可以试试；

```
$('#button').click(function () {
    $(':radio').each(function () {
        $(this).attr('checked', !$(':radio').attr('checked'));
    });
}); 
```

这是工作**[小提琴](http://jsfiddle.net/Tfdnh/6/)**

或以这种方式使用类；

```
$('#button').click(function () {
    $('.radiobtn').each(function () {
        $(this).attr('checked', !$('.radiobtn').attr('checked'));
    });
}); 
```

这是工作[**小提琴**](http://jsfiddle.net/Tfdnh/14/)

# haskell - 生成与 Enum 类型关联的 Ints 列表

> ID：11710392
> 
> 赞同：6
> 
> 时间：2012-07-29T15:20:24.133
> 
> 标签：haskell, types

我有一个实用函数，它枚举一个类型的所有值，该类型既可枚举又是有界的：

```
enumerate :: (Enum a, Bounded a) => [a]
enumerate = [minBound .. maxBound] 
```

以及涉及将可枚举类型映射到整数的数据类型：

```
data Attribute a = Attribute { test :: a -> Int
                             , vals :: [Int]
                             , name :: String } 
```

where`vals`是表示所有可能的可枚举值的整数列表。例如，如果我有

```
data Foo = Zero | One | Two deriving (Enum,Bounded) 
```

那么`vals`将是`[0,1,2]`。

我希望能够以编程方式创建这些属性，只需给定一个将 an 映射`a`到可枚举类型的函数和一个名称。像这样的东西：

```
attribute :: (Enum b, Bounded b) => (a -> b) -> String -> Attribute a
attribute f str = Attribute (fromEnum . f) vs str
  where
    vs = map fromEnum enumerate 
```

这不会进行类型检查，因为无法将调用`enumerate`与`b`类型签名中的 连接起来。所以我想我可以这样做：

```
vs = map fromEnum $ enumerate :: [b] 
```

但这也不能编译 - 编译器将其重命名`b`为`b1`. 我试图变得更聪明，使用 GADTs 扩展：

```
attribute :: (Enum b, Bounded b, b ~ c) => {- ... -}
vs = map fromEnum $ enumerate :: (Enum c,Bounded c) => [c] 
```

但同样，`c`被重命名为`c1`.

我不想将类型`b`作为参数包含在`Attribute`类型中（主要是因为我想存储具有可能不同值的属性列表`b`- 这就是为什么`test`has type`a -> Int`和`vals`has type `[Int]`）。

我怎样才能编写这段代码，以便它完成我想要它做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:01:07.437

类型变量的问题在于它们只绑定在类型签名中。在定义中任何类型变量的使用都将引用新的、新鲜的类型变量（即使它与类型签名中的名称完全相同）。

有两种方法可以从签名中引用类型变量：`ScopedTypeVariables`扩展名和`asTypeOf`.

在定义中也可以使用`ScopedTypeVariables`显式绑定的类型变量，因此：`forall`

```
attribute :: forall a b. (Enum b, Bounded b) =>
             (a -> b) -> String -> Attribute a
attribute f str = Attribute (fromEnum . f) vs str
  where
    vs = map fromEnum (enumerate :: [b]) 
```

另一种方式涉及`asTypeOf`定义为的函数：

```
asTypeOf :: a -> a -> a
asTypeOf = const 
```

如果我们可以在第二个参数中得到一个类型的表达式`[b]`，统一将确保第一个参数也有 type `[b]`。因为我们有`f :: a -> b`和`f undefined :: b`，所以我们可以写：

```
attribute :: (Enum b, Bounded b) => (a -> b) -> String -> Attribute a
attribute f str = Attribute (fromEnum . f) vs str
  where
    vs = map fromEnum (enumerate `asTypeOf` [f undefined]) 
```

# wordpress - WordPress 页面布局

> ID：11710394
> 
> 赞同：0
> 
> 时间：2012-07-29T15:20:27.550
> 
> 标签：wordpress, themes

我想显示两列，右栏充满 google adsense。如何更改 wordpress 主题中页面的默认一列布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T00:53:01.343

您必须编辑 functions.php 文件，然后手动将区域和新侧边栏添加到您希望执行此操作的区域的页面中。

所以可以说它是 index.php

您将打开 functions.php 文件，然后添加此代码

在管理员中创建小部件和侧边栏部分

```
if ( function_exists('register_sidebar') )
register_sidebar(array('name'=>'YOUR NEW SIDEBAR',
'before_widget' => '<div class="block">',
'after_widget' => '</div><div class="blockfooter"></div>',
'before_title' => '<h3>',
'after_title' => '</h3>',
)); 
```

然后，您将此部分添加到您想要添加的区域中的页面中。用 Div 等设置样式，或者你需要它完成。

```
<?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('YOUR NEW SIDEBAR')); ?> 
```

让我知道这有帮助

# mysql - MySQL ODBC 驱动程序源代码

> ID：11710395
> 
> 赞同：0
> 
> 时间：2012-07-29T15:20:35.990
> 
> 标签：mysql, odbc

MySQL ODBC 源代码是否可以在线获得？我只能在 MySQL 官方网站上找到二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:36:18.497

现在在[https://code.launchpad.net/~myodbc-developers/myodbc/3.51](https://code.launchpad.net/~myodbc-developers/myodbc/3.51)找到它以供将来参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:33:28.073

它就在那里：下载-> MySQL 连接器-> 连接器/ODBC

进入下载页面后，在“选择平台”下拉列表中选择“源代码”。

# c# - 在单独的行中列出项目

> ID：11710396
> 
> 赞同：2
> 
> 时间：2012-07-29T15:20:38.937
> 
> 标签：c#, listview

我在使用`ListView`s 方面还很陌生，所以这似乎是一个基本问题，但是我将如何准确地每行列出一个项目？

例如，显示文件夹中所有文件的代码如下所示：

```
string[] files = Directory.GetFiles(Properties.Settings.Default.workspace + Path.DirectorySeparatorChar + "system" + Path.DirectorySeparatorChar + "app");
foreach (string file in files)
{
    string fileName = Path.GetFileName(file);
    ListViewItem item = new ListViewItem(fileName);

    item.Tag = file;

    listView1.Items.Add(item);
} 
```

反过来，输出如下所示：

```
SomeFile1 SomeFile2 SomeFile3 SomeFile4

SomeFile5 SOmeFile6 SOmeFile 7 SomeFile 8 
```

我的目标是尝试让它看起来像这样：

```
someFile 1

SomeFile 2

SomeFile 3

... 
```

我知道这与我添加项目的方式有关，但我仍然不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:27:53.370

设置`listView1.View= View.List`，它应该工作。

默认情况下，它设置为`LargeIcon`.

您可以在构造函数中或通过属性菜单设置此属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:14:07.357

谢谢Praveen，但我只是想出我需要将列表视图更改为平铺，这解决了它。

# javascript - jQuery - 如果 img 在单元格内

> ID：11710401
> 
> 赞同：0
> 
> 时间：2012-07-29T15:20:57.847
> 
> 标签：javascript, jquery, if-statement

```
$("#user_status").html('<img src="img/check_01.png">'); // puts img into a cell 
```

现在，如果使用 PHP 将 img 放入该单元格，我想执行一个代码。

```
if ($("#user_status").html('<img src="img/check_01.png">')) 
// syntax error 
```

请问什么是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:23:27.143

```
if ($("#user_status").html() == '<img src="img/check_01.png">'){
// do something
} 
```

**编辑：（**感谢@Esailija）如果您只是检查图像的存在，使用这样的东西会更安全，它适用于包括 IE 在内的所有浏览器。

```
if(typeof($("#user_status").find('img').attr('src')) !== 'undefined'){
//do something
} 
```

这**适用**于所有主要浏览器。示例：http: [//jsfiddle.net/zheT3/1/](http://jsfiddle.net/zheT3/1/)

**[（参考）](http://api.jquery.com/html/#html1)**

如果您尝试使用 PHP，则可以使用[SimpleHtmlDom Parser](http://simplehtmldom.sourceforge.net/)来操作和比较 html 的值。

```
$html = your_html;
$text = $html->find('div[id=user_status]', 0)->innertext;
if($text == '<img src="img/check_01.png">'){
//do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:28:47.667

```
if ($("#user_status").find('img').attr('src','check_01.png')) 
```

# sass - 编写返回字符串的 Sass/Scss 函数

> ID：11710406
> 
> 赞同：12
> 
> 时间：2012-07-29T15:22:02.990
> 
> 标签：sass

我正在尝试使用 Scss 中的两个自定义实用程序函数来优化与 CSS 相关的计算。

一个给 EM：

```
@function _em($wanted, $inherited) {
  @return ($wanted / $inherited) + 'em';
} 
```

...还有一个百分比：

```
@function _pc($wanted, $parent) {
  @return (($wanted / $parent) * 100) + '%';
} 
```

...然后内联调用它们：

```
body {
  margin: _pc(40,1024);
  font-size: _em(20,16);
  line-height: _em(26,20);
} 
```

但是，这些都没有返回预期的`Nem`或`N%`字符串。*（我认为这是我的字符串连接 - 即在计算结束时粘合单位声明 - 但我不确定。）*

谁能阐明我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-29T15:35:27.470

实际上，您的问题是mixin的名称。我自己刚刚发现了这一点，但显然你不能用下划线开始一个 mixin。

这有效：http: [//jsfiddle.net/B94p3/](http://jsfiddle.net/B94p3/)

```
@function -em($wanted, $inherited) {
  @return ($wanted / $inherited) + 'em';
}

@function -pc($wanted, $parent) {
  @return (($wanted / $parent) * 100) + '%';
}

p {
    font-size: -em(40,16);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T21:39:55.947

同样，我编写了这个函数来将单位从 转换`px`为`rem`。

您可以进行相应的修改。

```
$is-pixel: true;
$base-pixel: 16;

@function unit($value) {
  @if $is-pixel == true {
    $value: #{$value}px;
  } @else {
    $value: #{$value/$base-pixel}rem;
  }
  @return $value;
} 
```

现在，可以使用如下

```
.my-class {
  width: unit(60);
  height: unit(50);
} 
```

# java - 为 MIDlet 创建“扩展包”或“附加组件”？

> ID：11710420
> 
> 赞同：1
> 
> 时间：2012-07-29T15:23:56.443
> 
> 标签：java, mobile, midlet

**目前情况如何：**

我正在为支持 Java 的手机（基于 MIDlet 的“哑手机”，而不是 Android）制作一个小型应用程序。该应用程序的结构如下：

1.  “基础设施”，具有核心功能
2.  A 类模块（实现接口的类`ModuleA`）
3.  B 类模块（实现接口的类`ModuleB`）

A 和 B 类型的模块基本上是根据用户从列表中选择的内容在基础架构中实例化的类，它们以自己特定的方式做事。想想“战略模式”。当用户使用应用程序时，她浏览了基础设施提供的屏幕，然后来到 A 类型的模块列表（查看它们的标题）。然后她选择其中一个模块，该模块被实例化并为她做一些事情。

**我所希望的**

我想知道是否有可能（如果是，如何）将整个基础设施打包在一个 JAR 文件中，但将 A 类型的模块和 B 类型的模块保留在其他 JAR 文件中，将来可以安装在设备上（像基础设施的附加组件）。我正在考虑这种情况：

1.  用户安装基础架构
2.  用户安装“Starter”插件，该插件与基础设施同时可用
3.  几周后，开发人员创建了一个新的附加组件，例如“特殊圣诞节模块”，用户可以安装它，因此*已经安装在她设备上*的基础设施将列出附加组件中的模块
4.  一年后，发布了另一个附加组件，其中包含具有其他功能和想法的模块

首先，这样的插件可以安装在移动设备上吗？它们是否必须包含一个 MIDlet 类（什么都不做或通知基础设施）？基础设施能否检测到那些包含我的应用程序附加组件的 JAR？或者基础设施可以与其他 JAR 中的类交互吗？

*注意：只有 Infrastructure JAR 会包含有用的 MIDlet 类。此外，附加组件将包含类型 A 的模块和类型 B 的模块的任意组合。*

**可能的解决方案？（虽然不完整）**

也许附加组件的外观、行为和气味都像设备本身的 MIDlet 应用程序，因此它们可以像任何普通的 MIDlet 应用程序一样安装。附加组件可以将自己声明为与基础设施相同的套件的一部分，因此它们可以通过写入记录存储来通知基础设施的存在（我知道每个 MIDlet*套件*都有一个记录存储）。基础设施读取新记录并知道它现在有额外的模块。它能否访问捆绑在附加 MIDlet JAR 中的类并实例化它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:41:51.187

MIDP 规范不支持您所描述的目标。除此之外，您不能有多个 JAR 属于同一个 MIDlet 套件。

如果要实现某种模块化，则需要使用不同的运行时。一种您自己定义的并且可以在一个 MIDlet 中实现的。

您可以编写一个 MIDlet，在二进制文件可用时下载它们。同一个 MIDlet 可以解释这些二进制文件。二进制文件可以包含改变 MIDlet 行为的命令。MIDlet 需要支持二进制文件要求它执行的所有可能的操作（不过，可以升级 MIDlet）。

基本上，在您的 MIDlet 中，您需要编写一个虚拟机，该虚拟机是您定义的任何新编程语言的运行时实现。

这将是很多工作。您最终可能会制作一个太大而无法安装在很多手机上的 MIDlet。

# shell - SHA1 - 将字符串转换为整数

> ID：11710422
> 
> 赞同：2
> 
> 时间：2012-07-29T15:25:09.063
> 
> 标签：shell, type-conversion, sha1

我知道这是一个重复的问题：[链接](https://stackoverflow.com/questions/1699451/i-want-to-convert-160-bit-to-integer)

我试着做更多的研究，看看它是否可能。我看到这是可能的。

我唯一想得到的是`function`我需要`convert a string to an integer`在 shell 脚本中使用的东西。SHA1 是一个 160 位长整数。

在 shell 脚本上做这件事的动机：尝试学习它。

例如，我`sha1`通过将文件存储在这样的变量中来获取文件

```
store=`sha1 $blah | cut -d  ' ' -f 1` 
```

它给了我哈希。但是，如果我想将其转换为整数怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:32:44.410

不可能的。对于 shell，一切都是字符串。如果您离开 POSIX，并将 shell 变量声明为具有整数类型，则整数的宽度通常是底层 C 库的宽度，即 32 位或 64 位。不适合 160 位的 SHA1 哈希。但是，有`bc`和`dc`实用程序，它们允许任意精度算术。如果您只想将十六进制字符串转换为十进制数，请使用以下命令：

```
$ bc << EOF
obase=10
ibase=16
DA19BAC0F234635B6DE9362369DA07A6A4162865
1245133775210903227706347819370390008085985241189
EOF 
```

请注意，您必须使用大写十六进制数字，因为`bc`无法识别 af。

# ruby-on-rails - 路由错误没有路由匹配 [GET] "/static_pages/home"，教程

> ID：11710424
> 
> 赞同：4
> 
> 时间：2012-07-29T15:25:19.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我运行服务器浏览器时，会显示如下内容：

```
Routing Error

No route matches [GET] "/static_pages/home"

Try running rake routes for more information on available routes. 
```

耙路线向我展示了这一点：

```
root  /                  static_pages#home
help  /help(.:format)    static_pages#help
about  /about(.:format)   static_pages#about
contact  /contact(.:format) static_pages#contact 
```

我的 routes.rb 文件：

```
MyApp::Application.routes.draw do
root :to => 'static_pages#home'

match '/help',    :to => 'static_pages#help'
match '/about',   :to => 'static_pages#about'
match '/contact', :to =>'static_pages#contact'

end 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T15:28:05.533

没有为 url '/static_pages/home' 设置路由

尽管 root 指向带有动作 home 的 static_pages 控制器，但它仍然响应路径 '/' 而不是 '/static_pages/home'

如果你添加

```
match '/static_pages/home', :to =>'static_pages#home' 
```

您将获得“/static_pages/home”的预期响应

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-28T15:45:53.293

步骤 5.3.3 [Rails 教程](http://ruby.railstutorial.org/chapters/filling-in-the-layout#fig-about_page)

您不必刷新页面

```
http://localhost:3000/static_pages/home 
```

但只能通过

```
http://localhost:3000/ 
```

因为您将“static_pages/home”定义为根“/”。

对我来说它有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T03:09:53.830

当我遵循 Ruby on Rails 教程时，我遇到了与 szatan 相同的错误。错误是因为之前我们测试 URL 是`http://localhost:3000/static_pages/help`因为操作在 static_pages 中。但是，`routes.rb`从

```
get 'static_pages/help' to
match '/help',    to: 'static_pages#help 
```

URL 应该更改为，`http://localhost:3000/help` 因为我们告诉 Rails 服务器将路径路由`/help`到`static_pages#help`. 我们不应该期望用户知道路径`/static_pages/help`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T19:59:58.413

请记住删除*“public/index.html”*文件。

您可以正确定义所有路由，但如果您离开此文件，您将无法正确路由它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-20T16:04:20.323

当我在教程中到达这一点时，我遇到了这个问题。当我将浏览器指向`"http://localhost:3000/"`并重新加载时，它就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T17:37:56.810

您可以指向`"/"`或`root_path`代替`'/static_pages/home'`. 无需将两条路线指向同一个地方...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T01:41:54.290

您应该添加 :as 关键字来定义 XXX_path，例如 root :to => 'static_pages#home'

```
match '/', to: 'static_pages#home', :as => :home
match '/help',    to: 'static_pages#help', :as => :help
  match '/about',   to: 'static_pages#about', :as => :about
  match '/contact', to: 'static_pages#contact', :as => :contact 
```

# jquery - 为什么 bind.('paste' with "if" 必须执行两次才能激活

> ID：11710425
> 
> 赞同：0
> 
> 时间：2012-07-29T15:25:26.833
> 
> 标签：jquery, regex

当有人粘贴带有 URL 的文本时，我使用脚本来检测文本中的 url。

所以我使用这个脚本：

```
$("#post").bind('paste', function(){

   var $ptext = $('textarea#post').val();
   var regexText = /^http:\/\/www$/;
   if(regexText.test($ptext))
   {
    alert('URL DETECTED');
   }
}); 
```

但是当我重新加载页面并第一次粘贴文本时，脚本什么也不做，我不得不再次重新粘贴文本，然后脚本就可以工作了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:14:01.060

我不知道为什么，但出于某种原因 .bind() 需要 setTimeout(function(){ //现在执行 textarea val() 调用；}, 100); 为了访问更新的粘贴事件...但是如果您使用 .on() 代替，它将在没有 setTimeout 调用的情况下工作

[这是一个工作示例，展示了如何在任何一种情况下实现这一点](http://jsfiddle.net/NRNDe/)

感谢@Ohgodwhy

# visual-studio-2010 - 在组合框窗口窗体中获取所选项目的 ID

> ID：11710429
> 
> 赞同：0
> 
> 时间：2012-07-29T15:26:30.700
> 
> 标签：visual-studio-2010, c#-4.0

我正在开发一个 C# Windows 窗体应用程序。我想在组合框中获取所选项目的 ID。下面是我的代码。

```
 private void ProductForm_Shown(object sender, EventArgs e)
    {
        SqlCeConnection Connection = new SqlCeConnection(ConString);
        Connection.Open();
        SqlCeDataAdapter da = new SqlCeDataAdapter("Select * from CastingMaterial", Connection);
        DataTable dt = new DataTable();
        da.Fill(dt);
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            ProductsComboBox.Items.Add(dt.Rows[i]["PartName"]);

        }
        ProductsComboBox.DisplayMember = "PartName";
        ProductsComboBox.ValueMember = "PartId";
        Connection.Close();
    }

    private void ProductsComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        int ProductIndex = ProductsComboBox.SelectedIndex;
        string productName = ProductsComboBox.Text.ToString();
        int ProductId =Convert.ToInt32(ProductsComboBox.SelectedValue);
        SqlCeConnection Connection = new SqlCeConnection(ConString);
        Connection.Open();
        String Query = "SELECT * From CastingMaterial where PartId=@PartId";
        SqlCeDataAdapter da = new SqlCeDataAdapter(Query, Connection);
        da.SelectCommand.Parameters.AddWithValue("PartId", ProductId);
        DataSet ds = new DataSet();
        SqlCeCommandBuilder commandBuilder = new SqlCeCommandBuilder(da);

        BindingSource bsource = new BindingSource();

        da.Fill(ds, "CastingMaterial");
        bsource.DataSource = ds.Tables["CastingMaterial"];
        Productgv.DataSource = bsource;
        Connection.Close();
    } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:39:10.477

您应该将项目添加为 DataRows。相反，您正在从其中一列中提取值：

```
 ProductCombo.Items.Add( dt.Rows[i] ); 
```

然后您正确设置了 DisplayMember 和 ValueMember，但是，这没有任何效果，因为您错误地添加了项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:02:03.877

坦率地说，您需要更清楚地发布问题。

您想如何获取组合框的选定 ID？
您打算将该 ID 用于什么目的？

我认为您应该在这里更清楚地描述您的实际问题。因为，代码对我来说似乎工作正常。

而且，顺便说一句，您实际上不需要循环来设置组合框的数据项。您只需要将`DataSource`组合的属性分配给刚刚提取数据的 DataTable。

`ProductsComboBox.DataSource = dt`...工作得很好，你知道的！
然后，您可以将`DisplayMember`和设置`ValueMember`为各自的列。

# java - Spring 与 Java 反射

> ID：11710430
> 
> 赞同：8
> 
> 时间：2012-07-29T15:26:48.370
> 
> 标签：java, spring, reflection

我需要动态创建对象。我使用 Spring 创建类名映射。现在我可以使用

春天`ApplicationContext.getbean(className)`

或者

爪哇`Class.forName(className).newInstance()`。

哪种方法更有效？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T15:32:06.960

如果 spring bean 是一个原型范围的 bean，那么 Spring 将不得不用反射来实例化它，因此必须做你的第二个片段所做的事情。但是要求 Spring 上下文获取一个 bean 并不仅仅为您获取一个类的新实例。它返回一个 Spring bean，您可以在其上应用方面（安全性、事务性等）、注入依赖项等。

你不应该根据性能来选择调用什么，而是根据你想要得到什么。无论如何，与您的应用程序执行的其他操作（网络调用、数据库查询等）相比，这两个调用的成本可能可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:30:55.043

如果它是 Spring 托管 bean，则需要通过 ApplicationContext 创建它，否则将不会填充依赖项。如果它不是 Spring bean，只是一个普通的 Java 对象，那么这是不必要的开销，所以你可以使用后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T15:32:58.573

spring 解决方案还为您解决了已创建对象中的依赖关系。您还可以查看[Spring 查找方法注入](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-method-injection)功能

# python - 模板不显示 GAE 和 Jinja2

> ID：11710432
> 
> 赞同：0
> 
> 时间：2012-07-29T15:26:53.673
> 
> 标签：python, google-app-engine, jinja2

当我访问 /admin/newpost 时，我希望我的 edit.html 模板能够呈现和显示我的表单字段。相反，我得到一个没有错误的空白页。但是，当我查看源代码时，我看到以下内容。

```
<Template '/edit.html'> 
```

我没有收到任何错误，因此没有堆栈跟踪。

*   GAE 版本：1.7
*   视窗 7 64 位
*   jinja2最新版本
*   蟒蛇2.7

我的代码和模板如下

这是我的代码：

```
import os
import webapp2
import config
import jinja2

from google.appengine.ext import db

import fix_path
import config
import static
import wtforms
from wtforms.ext.appengine.db import model_form
from wtforms import Form, TextField, validators

def render_template(template_name, template_vals=None, theme=None):
    template_path = os.path.join(os.path.dirname(__file__) , \
            "themes", theme or config.theme)
    env = jinja2.Environment(
        loader=jinja2.FileSystemLoader(template_path))
    return env.get_template(template_name, template_vals or {})

class BlogPost(db.Model):
    #The URL path to the blog post. Posts have a path if they are published.
    path = db.StringProperty()
    title = db.StringProperty(required=True, indexed=False)
    body = db.TextProperty(required=True)
    published = db.DateTimeProperty(auto_now_add=True)
    updated = db.DateTimeProperty(auto_now=True)

    def render(self):
        template_vals = {
            'config': config,
            'post': self,
        }
        return render_template("post.html", template_vals)

form = model_form(BlogPost, Form)

class PostForm(form):
    pass

class PostHandler(webapp2.RequestHandler):

    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_to_response(
        self,
        template_name,
        template_vals=None,
        theme=None
        ):
        template_name = "admin/%s" % template_name
        self.response.out.write(render_template(
            template_name, template_vals, theme))

    def render_form(self, form):
        self.render_to_response("edit.html", {'form': form})

    def get(self):
        self.render_form(PostForm())

app = webapp2.WSGIApplication([('/admin/newpost', PostHandler)],
                              debug=True) 
```

这是我的模板：

```
{% extends "base.html" %}
{% block title %}Testing New Post Template{% endblock %}
{% block body %}
  <form method="post" action="">
    <table>

<div>{{ form.title.label }}: {{ form.title(class="css_class") }}</div>
{% if form.title.errors %}
        <ul class="errors">{% for error in form.name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

<div>{{ form.body.label }}: {{ form.body() }}</div>
{% if form.body.errors %}
        <ul class="errors">{% for error in form.body.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

    </table>
    <input type="submit" />
  </form>
{% endblock %} 
```

我的 app.yaml 文件

```
application: cmwo-blog
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:

- url: /admin/.*
  script: admin.app
  login: admin

- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /static/([^/]+)/(.*)
  static_files: themes/\1/static/\2
  upload: themes/[^/]+/static/.*

- url: .*
  script: static.app

builtins:
- remote_api: on

libraries:
- name: webapp2
  version: "2.5.1"

- name: jinja2
  version: latest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:37:12.900

我不使用 Jinja，但您的`render_template`方法似乎并没有真正呈现模板。它调用`env.get_template`，它可能会获取一个模板对象，但随后需要调用一些东西来实际呈现该模板 - 快速查看[文档](http://jinja.pocoo.org/docs/api/)，您应该这样做：

```
template = env.get_template(template_name)
return template.render(**(template_vals or {})) 
```

# servicestack - 在 ServiceStack 中测试插件

> ID：11710434
> 
> 赞同：3
> 
> 时间：2012-07-29T15:27:03.503
> 
> 标签：servicestack

我在 ServiceStack [TestHostBase.cs](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/tests/ServiceStack.Examples.Tests/TestHostBase.cs)中查看单元测试的源代码- 并让它在我自己的项目中运行。在没有实际启动侦听器的情况下进行单元测试时，我将如何启用我的插件？例如，我想测试我的 Web 服务是否正确验证，因此我将以下代码添加到 TestHostBase.cs 中的配置中。

```
Plugins.Add(new ValidationFeature());
container.RegisterValidators(typeof(CustomerModelValidator).Assembly); 
```

但是，当使用违反验证规则的 Customer 对象调用 base.send 时，不会进行验证。（注意：当我用监听器启动我的网络服务时，验证工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:03:19.903

因为插件可以改变 AppHost 的任何部分（即添加路由、内容类型、请求/响应过滤器、CatchAll 处理程序等）。如果不启动 HttpListener（或 ASP.NET 主机），他们就无法测试它与您的服务的集成。

当然，如果您的插件是可测试的，您可以独立于您的服务进行单元测试。

# php - 更改 mysql 中的 htmlentities

> ID：11710438
> 
> 赞同：0
> 
> 时间：2012-07-29T15:27:31.333
> 
> 标签：php, mysql, html-entities, html-encode

我在具有 htmlentities 的 mysql 数据库中有条目，因此，例如，`&ouml`而不是`ö`.

现在我意识到，接下来我必须使用该数据库做的事情，我将不得不摆脱所有 htmlentities 并将它们转换为相应的字符，例如`&ouml`将必须变为`ö`.

当然，我可以在 php 中执行此操作，并编写一个循环遍历不同列并写回解码字符串的脚本。

但我想知道是否有一种方法可以直接在 mysql 中使用单个更新语句来执行此操作，理想情况下甚至适用于所有列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:35:49.517

我前段时间读过这个，我希望这就是你要找的。您必须手动创建翻译规则：

[http://forums.mysql.com/read.php?98,246527,246527](http://forums.mysql.com/read.php?98,246527,246527)

翻译与符号的示例：

```
IF INSTR( x , '&amp;' ) 
THEN SET TextString = REPLACE(TextString, '&amp;','&') ; 
END IF ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:40:34.830

最好的方法是使用 PHP。虽然@Chris 的解决方案可以工作，但对于应该运行一次的人来说，它需要做太多的工作。

将 PHP 与事务和准备好的语句结合使用可以很好地完成这项工作。

# android - 调用函数在 onCreate android 中不起作用

> ID：11710451
> 
> 赞同：0
> 
> 时间：2012-07-29T15:29:02.423
> 
> 标签：android

我有两个函数，名称分别为 rounOne() 和 roundTwo()。在这两个函数中都会发生一些事情，然后会出现一个 AlertDialog。在我的 onCreate 函数中，我想像这样调用这些函数：roundOne()、roundTwo()、roundTwo()、roundOne()。我的意思是，首先，roundOne 函数执行，然后在 alertdialog 中按 ok 后，函数 roundTwo() 执行，依此类推。但它不以我实现它的方式工作。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:33:18.950

> 当您调用 RoundOne() 时，您会在其中显示 AlertDialog 对吗？现在，如果用户按下任何按钮，您想调用 roundTwo。

在 Android 中它会执行你的其余代码，不要等待 AlertDialog 结束。如果您想在 Button/ok Click on Dialog 上调用任何方法，请从 Dialog on Button click 本身调用您的方法。

# c# - 如何理解 MSStorageDriver_ATAPISmartData 数据？

> ID：11710454
> 
> 赞同：1
> 
> 时间：2012-07-29T15:29:20.593
> 
> 标签：c#, wmi

我找到了以下用于处理硬盘 SMART 数据的代码。见：[http](http://en.wikipedia.org/wiki/S.M.A.R.T) ://en.wikipedia.org/wiki/SMART 。

```
// (c) Microsoft Corporation
// Author: Clemens Vasters (clemensv@microsoft.com)
// Code subject to MS-PL: http://opensource.org/licenses/ms-pl.html 
// SMART Attributes and Background: http://en.wikipedia.org/wiki/S.M.A.R.T.
// SMART Attributes Overview: http://www.t13.org/Documents/UploadedDocuments/docs2005/e05171r0-ACS-SMARTAttributes_Overview.pdf

namespace SmartDataApp
{
    using System;
    using System.Collections.Generic;
    using System.Management;
    using System.Runtime.InteropServices;

    public enum SmartAttributeType : byte
    {
        ReadErrorRate = 0x01,
        ThroughputPerformance = 0x02,
        SpinUpTime = 0x03,
        StartStopCount = 0x04,
        ReallocatedSectorsCount = 0x05,
        ReadChannelMargin = 0x06,
        SeekErrorRate = 0x07,
        SeekTimePerformance = 0x08,
        PowerOnHoursPOH = 0x09,
        SpinRetryCount = 0x0A,
        CalibrationRetryCount = 0x0B,
        PowerCycleCount = 0x0C,
        SoftReadErrorRate = 0x0D,
        SATADownshiftErrorCount = 0xB7,
        EndtoEnderror = 0xB8,
        HeadStability = 0xB9,
        InducedOpVibrationDetection = 0xBA,
        ReportedUncorrectableErrors = 0xBB,
        CommandTimeout = 0xBC,
        HighFlyWrites = 0xBD,
        AirflowTemperatureWDC = 0xBE,
        TemperatureDifferencefrom100 = 0xBE,
        GSenseErrorRate = 0xBF,
        PoweroffRetractCount = 0xC0,
        LoadCycleCount = 0xC1,
        Temperature = 0xC2,
        HardwareECCRecovered = 0xC3,
        ReallocationEventCount = 0xC4,
        CurrentPendingSectorCount = 0xC5,
        UncorrectableSectorCount = 0xC6,
        UltraDMACRCErrorCount = 0xC7,
        MultiZoneErrorRate = 0xC8,
        WriteErrorRateFujitsu = 0xC8,
        OffTrackSoftReadErrorRate = 0xC9,
        DataAddressMarkerrors = 0xCA,
        RunOutCancel = 0xCB,
        SoftECCCorrection = 0xCC,
        ThermalAsperityRateTAR = 0xCD,
        FlyingHeight = 0xCE,
        SpinHighCurrent = 0xCF,
        SpinBuzz = 0xD0,
        OfflineSeekPerformance = 0xD1,
        VibrationDuringWrite = 0xD3,
        ShockDuringWrite = 0xD4,
        DiskShift = 0xDC,
        GSenseErrorRateAlt = 0xDD,
        LoadedHours = 0xDE,
        LoadUnloadRetryCount = 0xDF,
        LoadFriction = 0xE0,
        LoadUnloadCycleCount = 0xE1,
        LoadInTime = 0xE2,
        TorqueAmplificationCount = 0xE3,
        PowerOffRetractCycle = 0xE4,
        GMRHeadAmplitude = 0xE6,
        DriveTemperature = 0xE7,
        HeadFlyingHours = 0xF0,
        TransferErrorRateFujitsu = 0xF0,
        TotalLBAsWritten = 0xF1,
        TotalLBAsRead = 0xF2,
        ReadErrorRetryRate = 0xFA,
        FreeFallProtection = 0xFE,
    }

    public class SmartData
    {
        readonly Dictionary<SmartAttributeType, SmartAttribute> attributes;
        readonly ushort structureVersion;

        public SmartData(byte[] arrVendorSpecific)
        {
            attributes = new Dictionary<SmartAttributeType, SmartAttribute>();
            for (int offset = 2; offset < arrVendorSpecific.Length; )
            {
                var a = FromBytes<SmartAttribute>(arrVendorSpecific, ref offset, 12);
                // Attribute values 0x00, 0xfe, 0xff are invalid
                if (a.AttributeType != 0x00 && (byte)a.AttributeType != 0xfe && (byte)a.AttributeType != 0xff)
                {
                    attributes[a.AttributeType] = a;
                }
            }
            structureVersion = (ushort)(arrVendorSpecific[0] * 256 + arrVendorSpecific[1]);
        }

        public ushort StructureVersion
        {
            get
            {
                return this.structureVersion;
            }
        }

        public SmartAttribute this[SmartAttributeType v]
        {
            get
            {
                return this.attributes[v];
            }
        }

        public IEnumerable<SmartAttribute> Attributes
        {
            get
            {
                return this.attributes.Values;
            }
        }

        static T FromBytes<T>(byte[] bytearray, ref int offset, int count)
        {
            IntPtr ptr = IntPtr.Zero;

            try
            {
                ptr = Marshal.AllocHGlobal(count);
                Marshal.Copy(bytearray, offset, ptr, count);
                offset += count;
                return (T)Marshal.PtrToStructure(ptr, typeof(T));
            }
            finally
            {
                if (ptr != IntPtr.Zero)
                {
                    Marshal.FreeHGlobal(ptr);
                }
            }
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct SmartAttribute
    {
        public SmartAttributeType AttributeType;
        public ushort Flags;
        public byte Value;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
        public byte[] VendorData;

        public bool Advisory
        {
            get
            {
                return (Flags & 0x1) == 0x0; // Bit 0 unset?
            }
        }
        public bool FailureImminent
        {
            get
            {
                return (Flags & 0x1) == 0x1; // Bit 0 set?
            }
        }
        public bool OnlineDataCollection
        {
            get
            {
                return (Flags & 0x2) == 0x2; // Bit 0 set?
            }
        }

    }

    public class Program
    {
        public static void Main()
        {
            try
            {
                var searcher = new ManagementObjectSearcher("root\\WMI", "SELECT * FROM MSStorageDriver_ATAPISmartData");

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("MSStorageDriver_ATAPISmartData instance");
                    Console.WriteLine("-----------------------------------");

                    var arrVendorSpecific = (byte[])queryObj.GetPropertyValue("VendorSpecific");

                    // Create SMART data from 'vendor specific' array
                    var d = new SmartData(arrVendorSpecific);
                    foreach (var b in d.Attributes)
                    {
                        Console.Write("{0} :{1} : ", b.AttributeType, b.Value);
                        foreach (byte vendorByte in b.VendorData)
                        {
                            Console.Write("{0:x} ", vendorByte);
                        }
                        Console.WriteLine();
                    }

                }
            }
            catch (ManagementException e)
            {
                Console.WriteLine("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

但我不明白如何解析 `Value` 打印的`Console.Write("{0} :{1} : ", b.AttributeType, b.Value);`

我知道这是某种标准化值。

但如果我的温度是 187。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T10:28:27.823

*b.VendorData*保存您要查找的数据*字节数组。*该数据在*foreach*循环中以*十六进制*格式显示。第一个值是驱动器的当前温度。如果要获得正确的温度，则需要将数组中的第一个字节转换为数字...

 *> 温度：100：24 0 d 0 33 0 0 65

24 是从字节转换而来的 HEX 值，并保存以摄氏度 (36 °C) 为单位的温度值。您可以使用下面的示例将 byte 转换为 int。

> int 温度 = Convert.ToInt32(b.VendorData[0]);*

# actionscript-3 - 如何从 wrapper flash 电影中调用嵌入 swf 的函数？

> ID：11710456
> 
> 赞同：0
> 
> 时间：2012-07-29T15:29:37.900
> 
> 标签：actionscript-3

我创建了一个 test.fla，其中包含一个实例名称为“mc”的矩形符号，并在第一帧上有一些 as3 代码：

```
import com.greensock.*;
function forward() {
    TweenLite.to(mc, 1, {x:132});
}
function backward() {
    TweenLite.to(mc, 1, {x:12});
} 
```

这个 fla 现在以 test.swf 的形式发布。

然后我创建了一个**wrapper_fla**，创建了新符号并在这个符号中导入了 test.swf。将符号实例命名为“swf”。

然后添加两个按钮：btnForward 和 btnBackward 到 wrapper_fla（符号外），并将这段代码添加到 wrapper_fla 的第一帧：

```
btnForward.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandlerForward);
function mouseDownHandlerForward(event:MouseEvent):void {
    swf.forward();
}
btnBackward.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandlerBackward);
function mouseDownHandlerBackward(event:MouseEvent):void {
    swf.backward();
} 
```

当我测试电影并点击btnForward时，出现错误：

> TypeError: 错误 #1006: forward 不是一个函数。
> 在 wrapper_fla::MainTimeline/mouseDownHandlerForward()

如何正确执行？

# dart - 转换列表 进入 Dart 中的字符串？

> ID：11710459
> 
> 赞同：18
> 
> 时间：2012-07-29T15:30:24.747
> 
> 标签：dart

我已经阅读了一个文件并得到了一个整数列表。对于我的大部分工作，这是我想要得到的，但在一种情况下，我还需要将一些`List<int>`转换为`String`.

更具体地说，我想用 UTF-8 对字符串进行编码。

这是我刚刚尝试过的：

```
var decoder = new Utf8Decoder(figures);
print(decoder.decodeRest()); 
```

但我得到的只是一个整数列表。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-29T16:21:11.407

`String.fromCharCodes(List<int> charCodes)`可能是您正在寻找的。

```
 List<int> charCodes = const [97, 98, 99, 100];
  print(new String.fromCharCodes(charCodes)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-18T23:35:08.927

您可以使用提供[UTF-8 编解码器的](https://api.dartlang.org/stable/2.7.0/dart-convert/utf8-constant.html)[dart:convert](http://api.dartlang.org/docs/releases/latest/dart_convert.html)库：

```
import 'dart:convert';

void main() {
  List<int> charCodes = [97, 98, 99, 100];
  String result = utf8.decode(charCodes);
  print(result);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-29T18:08:22.457

如前所述`String.fromCharCodes(List<int> charCodes)`，如果您想将 unicode 字符转换为字符串，您可能正在寻找它。但是，如果您只想将列表合并成一个字符串，您可以使用`Strings.join(List<String> strings, String separator)`.

```
Strings.join([1,2,3,4].map((i) => i.toString()), ","))  // "1,2,3,4" 
```

**更新（新的 Dart 版本）： Strings.join 不再有效，因此您必须改用它：**

```
[1,2,3,4].map((i) => i.toString()).join(","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-08T06:09:00.843

您可以使用`dart:convert`提供 UTF-8 编解码器的库，但请务必使用**utf8 全部小**以使用其方法。

```
List<int> byteArray = [72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100];
String result = utf8.decode(byteArray);
List<int> orginal = utf8.encode(result); 
```

# php - Codeigniter 中的 PHP 标头重定向和服务器加载

> ID：11710460
> 
> 赞同：0
> 
> 时间：2012-07-29T15:30:32.500
> 
> 标签：php, codeigniter, redirect, header

我正在 PHP Codeigniter 框架中构建一个系统。我现在正在构建身份验证部分并使用尽可能多的示例来根据 Codeigniters 标准以“正确”的 MVC 方式进行操作。

Tank_Auth 是用作身份验证的流行插件，但它使用大量 php 重定向。据我说，这不是处理例如登录的正确方法。对我来说，登录流程如下：

提交到 index.php -> 使用 post 加载登录操作 -> 加载视图

但 tank_auth 使用如下：

提交到 login.php -> 重定向到 index.php -> 加载视图

哪个是最好的重要吗？我的意思是，对我来说，防止重定向似乎是合乎逻辑的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:35:39.253

那么 Tank_auth 在登录成功后如何知道要发送什么数据、使用什么控制器等？在所有`$_POST`s 等中进行编程将是很多无用的编码。

Tank_auth中的功能没有任何问题`redirect()`，尤其是因为 Tank_auth 已被证明是一种非常安全且强大的身份验证机制。

别担心了！

# iphone - 视图控制器添加子视图

> ID：11710463
> 
> 赞同：2
> 
> 时间：2012-07-29T15:30:43.053
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, addsubview

我快要疯了：

```
GolOlurActionViewController *golOlur = [[GolOlurActionViewController alloc] init];
[self.view addSubview:golOlur.view]; 
```

我有上面的代码，我在`IBACtion`里面调用它`ViewController`。`GolOlurActionViewController`是`ViewController`你们都可以猜到的。

当进程开始时，调用 golOlur`viewDidLoad`和`viewDidAppear`方法，但不显示视图。

我已经尝试了我所知道的一切，但无法解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T16:29:01.170

`addSubview`如果您的意图是在视图之间转换，您真的不应该使用。如果这样做，您将不会收到旋转事件，因为您允许视图控制器层次结构与视图层次结构不同步。您应该`addSubview`仅用于向视图添加真正的子视图（例如 a `UILabel`、 a `UIImageView`、 a`UIButton`等，或者，如果执行正确的视图控制器包含等，则为子视图）。视图之间转换的使用`addSubview`代表了视图控制器和视图之间的基本混淆。

正确管理视图的关键是确保视图控制器层次结构与视图层次结构同步。最简单的方法是在视图控制器之间进行转换，让它们处理视图的呈现。因此，如果您使用的是 NIB，通常是：

```
GolOlurActionViewController *golOlur = [[GolOlurActionViewController alloc] initWithNibName:nil bundle:nil];
[self presentViewController:golOlur animated:YES completion:nil]; 
```

或者，带有导航控制器的 NIB：

```
GolOlurActionViewController *golOlur = [[GolOlurActionViewController alloc] initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:golOlur animated:YES]; 
```

或者，如果您使用的是故事板（同样，如果您使用的是故事板，您可能会使用 segues 并且不需要任何这些，但只是为了完整起见）：

```
GolOlurActionViewController *golOlur = [self.storyboard instantiateViewControllerWithIdentifier:@"GolOlurActionView"];
[self presentViewController:golOlur animated:YES completion:nil]; 
```

如果您的故事板使用导航控制器：

```
GolOlurActionViewController *golOlur = [self.storyboard instantiateViewControllerWithIdentifier:@"GolOlurActionView"];
[self.navigationController pushViewController:pushViewController:golOlur animated:YES]; 
```

万一您尝试进行控制器遏制，请告诉我们，因为这略有不同（需要调用`addChildViewController`and `didMoveToParentViewController`），但是如果您正在视图之间进行基本转换，则控制器的正确初始化和随后的调用`presentViewController`或者`pushViewController`应该为你做。

**更新：**

顺便说一句，如果您使用的是故事板（我不认为您是，但以防万一），而不是`instantiateViewControllerWithIdentifier`，我实际上可能建议您在故事板上定义一个 segue，在 Interface Builder 中为其提供一个标识符字符串，然后使用以下代码过渡到下一个场景：

```
[self performSegueWithIdentifier:@"yourIdentifier" sender:self]; 
```

如果你这样做，它会为你实例化你的控制器，你的整个应用程序的流程将在故事板中准确地表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:29:45.073

我相信您的问题是，当您按照自己的方式创建 UIViewController 时，您期望情节提要或 .xib 中的视图出现，这将不起作用。您需要在情节提要中连接一个 push segue（这将需要一个`UINavigationController`），或者以模态方式呈现新控制器，您也可以在情节提要中执行此操作。如果你有这个 ViewController 的 nib，你可以这样做：

```
 CustomViewController *controller = [[CustomViewController alloc] initWithNibName:@"CustomViewController.xib" bundle:[NSBundle mainBundle]];

 [self presentViewController:controller animated:YES completion:NULL]; 
```

# asp.net - 大尺寸多图上传asp.net

> ID：11710465
> 
> 赞同：0
> 
> 时间：2012-07-29T15:30:50.550
> 
> 标签：asp.net, file-upload, size

我正在使用 asp.net c# fileupload 上传多个文件的可能性。这是用 jQuery 完成的。

```
<asp:FileUpload ID="FileUpload1" runat="server" class="multi"/> 
```

此链接中的更多详细信息，我在其中找到了源代码： http: [//www.codeproject.com/Articles/68374/Upload-Multiple-Files-in-ASP-NET-using-jQuery](http://www.codeproject.com/Articles/68374/Upload-Multiple-Files-in-ASP-NET-using-jQuery)

问题是我无法上传总大小超过 5 MB 的文件。在这种情况下会出现以下错误：

```
Error 101 (net::ERR_CONNECTION_RESET): 
```

例如，我想上传最多 30MB 的文件。任何人都可以帮助解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:34:57.683

最大请求长度：

[http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx)

# python - 如何让python显示当前时间（东部）

> ID：11710469
> 
> 赞同：20
> 
> 时间：2012-07-29T15:31:03.523
> 
> 标签：python, datetime, time

如何让 Python 显示东部时间？

我已经查看了 python 文档，但它非常令人困惑。我正在使用 Python 3。

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-03-30T10:18:49.550

当然，还有一种更直观的方法：

```
from datetime import datetime
from pytz import timezone
tz = timezone('EST')
datetime.now(tz) 
## this returns a datetime object pointing to right now 
## according to the timezone info object handed in as the tz variable. 
```

或者，您可以定义自己的`datetime`对象并传入`tz`as `tzinfo`，如下所示：

```
datetime(2016, 3, 30, 11, 13, 24, tzinfo=tz) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-29T16:17:50.070

如果您需要很多时区，您应该使用该软件包`pytz`，并且您需要正确处理夏令时的重复时间（即从午夜到凌晨 1 点发生的情况）。

不过，对于一些简单的事情，创建自己的时区类很容易：

```
import datetime

class EST5EDT(datetime.tzinfo):

    def utcoffset(self, dt):
        return datetime.timedelta(hours=-5) + self.dst(dt)

    def dst(self, dt):
        d = datetime.datetime(dt.year, 3, 8)        #2nd Sunday in March
        self.dston = d + datetime.timedelta(days=6-d.weekday())
        d = datetime.datetime(dt.year, 11, 1)       #1st Sunday in Nov
        self.dstoff = d + datetime.timedelta(days=6-d.weekday())
        if self.dston <= dt.replace(tzinfo=None) < self.dstoff:
            return datetime.timedelta(hours=1)
        else:
            return datetime.timedelta(0)

    def tzname(self, dt):
        return 'EST5EDT'

dt = datetime.datetime.now(tz=EST5EDT()) 
```

在这里，您使用抽象基类`datetime.tzinfo`创建一个`EST5EDT`类，该类描述“东部时区”的含义，即您的 UTC 偏移量（-5 小时）和夏令时生效的时间（顺便说一句，3 月的第 2 个星期日和11 月的第一个星期日）。

顺便说一句，上面的模板是从`datetime`文档中提取的：http: [//docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)

不确定您的意思是“让 Python 显示东部时间”，但使用`dt`上面最后一行中的对象：

```
 In [15]: print(dt)
2012-07-29 12:28:59.125975-04:00

    In [16]: print(dt.strftime('%Y-%m-%d %H:%M:%S'))
2012-07-29 12:28:59

    In [17]: print(dt.strftime('%H:%M:%S'))
12:28:59

    In [18]: print(dt.strftime('%s.%f'))  
1343579339.125975 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T17:26:03.227

[Pytz](http://pytz.sourceforge.net/)库应该很有用。使用下面的代码 Pytz（支持> 2.3）可以根据东部时区为您获取时间。

```
from datetime import datetime, timedelta
from pytz import timezone

eastern = timezone('US/Eastern')
fmt = '%Y-%m-%d %H:%M:%S %Z%z'
loc_dt = eastern.localize(datetime(2012, 10, 29, 6, 0, 0))
print loc_dt.strftime(fmt) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-12T17:24:49.427

如果由于某种原因您不能使用 pytz 模块并且需要简单的解决方案，那么您可以使用

```
from datetime import datetime, timezone

datetime.now(timezone(timedelta(hours=-5), 'EST')) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-20T20:19:47.567

如果您需要整个时间戳：

```
import datetime
print (datetime.datetime.utcnow() - datetime.timedelta(hours=4)) 
```

如果您只需要 YYYYmmdd 格式的日期

```
print (datetime.datetime.utcnow() - datetime.timedelta(hours=4)).strftime('%Y%m%d') 
```

# javascript - 使用 javascript 添加后刷新 document.element

> ID：11710470
> 
> 赞同：3
> 
> 时间：2012-07-29T15:31:31.013
> 
> 标签：javascript

我有一个 javascript 脚本，当我点击一个按钮时，它会在我的页面中添加元素。我想使用这些新元素，调用它们。

```
var e = document.getElementsByName('group'); 
```

当我在添加名为“组”的元素之前和之后执行该操作时（在源代码中检查），我有相同数量的元素..

```
e.length /* before : return 2 */
e.length /* after... 2 :/ */ 
```

我认为文件。没有更新，是真的吗，有解决办法吗？

**编辑 ：**

```
function newgroup() {
        var e = document.getElementsByName('group');
        var nb = e.length + 1;
        div = document.createElement("div");
        div.id = 'group'+nb;
        div.className = 'panel_drop';
        div.setAttribute('name', 'group');
        div.innerHTML = '<h5>Group '+nb+'</h5>';
        div.innerHTML += '<div class=\'drop_zone\'></div>';
        document.getElementById('groups').appendChild(div);
    } 
```

我使用属性`name`来计算组的数量，然后用它们的 id 选择它们。但是数字没有更新^^

**编辑 2：**

这是一个错误，我在使用 Chrome 开发工具时遇到了断点问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:37:07.183

`getElementsByName`返回一个 live [`NodeList`](https://developer.mozilla.org/En/DOM/NodeList)，这意味着结果会在您对 DOM 进行更改时自动更新。据我所知，这不是跨浏览器问题的问题。所以你看到的问题可能是无关的。从[规格](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#dom-document-getelementsbyname)：

> getElementsByName(name) 方法接受一个字符串名称，并且必须返回一个活动的 NodeList，其中包含该文档中的所有 HTML 元素，这些元素的值等于 name 参数（以区分大小写的方式），按树顺序. 当使用相同的参数再次在 Document 对象上调用该方法时，用户代理可能会返回与先前调用返回的对象相同的值。在其他情况下，必须返回一个新的 NodeList 对象。

示例：

[http://jsfiddle.net/hhdPB/](http://jsfiddle.net/hhdPB/)

```
var e = document.getElementsByName('group');

console.log(e.length); // 0

var el = document.createElement('span');
el.setAttribute('name', 'group');

document.body.appendChild(el);

console.log(e.length); // 1

document.body.appendChild(el.cloneNode(false));

console.log(e.length); // 2 
```

此外，您发布的代码似乎工作正常：

[http://jsfiddle.net/GyTBw/1](http://jsfiddle.net/GyTBw/1)

```
function newgroup() {
    var e = document.getElementsByName('group');
    var nb = e.length + 1;
    console.log(nb);
    div = document.createElement("div");
    div.id = 'group' + nb;
    div.className = 'panel_drop';
    div.setAttribute('name', 'group');
    div.innerHTML = '<h5>Group ' + nb + '</h5>';
    div.innerHTML += '<div class=\'drop_zone\'></div>';
    document.getElementById('groups').appendChild(div);
}

for (var i = 0; i != 5; i++) {
    newgroup(); // 1 2 3 4 5
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:41:06.533

这是我对 chrome 开发人员工具的操作出错，有中断.. 谢谢和抱歉

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-29T15:37:58.773

您应该使用 JQuery 和 Classes 而不是 ElementNames。

例如：

```
<div class="MyDivs">abc</div>
<div class="MyDivs">def</div>
<div class="MyDivs">ghi</div> 
```

将由以下人员选择：

```
var Divs = $(".MyDivs"); 
```

# iphone - 在objective-c中解析json文件

> ID：11710471
> 
> 赞同：0
> 
> 时间：2012-07-29T15:31:37.593
> 
> 标签：iphone, objective-c, xcode, sbjson

我有这个 json 链接 [Json_link](http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-29%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A366%7D)

我如何获得 (17 : 00) 和 (Amberg) 和 (Aubstadt) 值。并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:31:21.493

将 JSON 库添加到您的项目中并将代码放在解析文件中

```
NSArray* latestLoans = [(NSDictionary*)[responseString JSONValue] objectForKey:@"commands"];
[responseString release];

NSLog(@"%@",[[latestLoans objectAtIndex:0] objectForKey:@"name"]);
NSLog(@"%@",[[[latestLoans objectAtIndex:0] objectForKey:@"parameters"] objectForKey:@"container"]);
NSLog(@"%@",[[[latestLoans objectAtIndex:0] objectForKey:@"parameters"] objectForKey:@"content"]);
NSLog(@"%@",[[[latestLoans objectAtIndex:0] objectForKey:@"parameters"] objectForKey:@"position"]);

NSLog(@"%@",[[latestLoans objectAtIndex:1] objectForKey:@"name"]);
NSLog(@"%@",[[[[latestLoans objectAtIndex:1] objectForKey:@"parameters"] objectForKey:@"params"] objectForKey:@"date"]);
NSLog(@"%@",[[[[latestLoans objectAtIndex:1] objectForKey:@"parameters"] objectForKey:@"params"] objectForKey:@"display"]);
NSLog(@"%@",[[[[latestLoans objectAtIndex:1] objectForKey:@"parameters"] objectForKey:@"params"] objectForKey:@"timestamp"]); 
```

# tfs - 重命名服务器名称和 Team Foundation Server 2010

> ID：11710475
> 
> 赞同：1
> 
> 时间：2012-07-29T15:32:36.747
> 
> 标签：tfs, windows-server-2008, vmware, virtual-machine

我有一个带有 Team Foundation Server 2010 的 Win 2008 服务器，我只是想将服务器重命名为其他名称（因为我正在复制 VM 并希望每个 VM 具有唯一的名称）。

我尝试遵循这些指南：

*   [MSDN - 如何：重命名 Visual Studio 2008 的应用层服务器](http://msdn.microsoft.com/en-us/library/ms252469%28v=vs.90%29.aspx)
*   [如何：重命名数据层服务器](http://msdn.microsoft.com/en-us/library/ms253106%28v=vs.90%29.aspx)
*   其他一些论坛链接，但我的 SO Link 限制为 2

然而，这些指南中的大多数都是针对 TFS 2008 的，当我尝试相同或等效的命令时，我收到了多个问题，说明无法联系实例或权限错误和许多其他问题。SQL Server 运行良好，其他应用程序也运行良好，但 TFS 无法处理新的计算机名称。

有谁知道在不导致 TFS 停止工作的情况下更改 TFS 2010 服务器名称的直接指南？如果有像第一个链接这样的指南，但对于 TFS 2010，那就太好了。

# jquery - 制作 JS/CSS 菜单 - 悬停无法正常工作

> ID：11710481
> 
> 赞同：0
> 
> 时间：2012-07-29T15:33:25.697
> 
> 标签：jquery, css, menu, navigation, hover

现场示例在[这里](http://jsfiddle.net/c2SrW/)

我的问题是：

*   当鼠标从子菜单移到减号上时，子菜单再次淡入（这不应该发生）
*   通过将鼠标向上或向左移动加号将菜单离开子菜单时，子菜单不会淡出

这些问题可以通过交换`z-index`加号和子菜单来解决。但是，减号不会以我希望它显示的样式显示（因为它位于半透明子菜单的后面）。

相关JS代码为：

```
$(document).ready(function() {
    if ($(".nav").length) {
        $(".nav ul ul").css({ opacity: 0.9 }).mouseleave(function(e) {
            e.stopPropagation();
            $(this).fadeOut().parent().prev().children("div").html("+").css({ lineHeight: "30px", paddingBottom: 0 });
        });
        $(".nav > ul").find("li:first").each(function() {
            $(this).append($("<div>").html("+").mouseenter(function(e) {
                e.stopPropagation();
                $(this).html("&ndash;").css({ lineHeight: "26px", paddingBottom: "4px" }).parent().next().children("ul").fadeIn();
            }));
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:40:37.120

下拉菜单在`ul`语义上应该是下拉按钮的一部分，这样它就是下拉“按钮”的子项，我相信这会解决您的问题。

编辑：即您的下拉菜单`<ul>`应该是您的 +/- 按钮的子项，而不是兄弟项。

# java - 将 jar 添加到 maven exec:java 类路径

> ID：11710485
> 
> 赞同：6
> 
> 时间：2012-07-29T15:33:49.863
> 
> 标签：java, maven, java-7

我有一个批处理文件，它使用依赖于 tools.jar（来自 JDK）的 maven 运行 java 类。
例如：
mvn -f .\pom.xml -e exec:java -Dfile.encoding="UTF-8" -Dexec.mainClass=MyClass -Dexec.args="%1 %2 %3 %4 %5 %6 %7 %8 %9" -Dexec.classpathScope=runtime
我的程序使用来自 JDK 的 tools.jar，并且我在 maven 中添加了一个指向它的系统依赖项。
由于 exec:java 目标不包括系统依赖项，我想从命令行手动添加依赖项。
虽然我认为它是微不足道的，但我可以找到方法来做到这一点。任何帮助将不胜感激。
谢谢，
阿夫纳

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T18:53:04.483

根据我在[maven exec plugin](http://mojo.codehaus.org/exec-maven-plugin/examples/example-exec-using-plugin-dependencies.html)上阅读的内容，它允许您将可执行依赖项配置为插件依赖项。

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <configuration>
          <includeProjectDependencies>false</includeProjectDependencies>
          <includePluginDependencies>true</includePluginDependencies>
          <executableDependency>
            <groupId>com.example.myproject</groupId>
            <artifactId>mylib</artifactId>
          </executableDependency>
          <mainClass>com.example.Main</mainClass>
        </configuration>
        <dependencies>
          <dependency>
                <groupId>sun.jdk</groupId>
                <artifactId>tools</artifactId>
                <version>1.5.0</version>
                <scope>system</scope>
                <systemPath>${java.home}/../lib/tools.jar</systemPath>
          </dependency>
        </dependencies>
      </plugin> 
```

# persistence - 重定向的 Google Plus 页面的属性呈现片段

> ID：11710487
> 
> 赞同：0
> 
> 时间：2012-07-29T15:34:23.887
> 
> 标签：persistence, google-plus, doi

我想通过网站或通过 API 发布一个链接，以获得 DOI 的加一。对于不熟悉这一点的人，DOI 是指向出版物的稳定链接（参见[http://www.doi.org/faq.html](http://www.doi.org/faq.html)）。输入此内容后，它会通过 303 重定向将您重定向到该论文的出版商网站版本。例如：

```
curl -i http://dx.doi.org/10.1016/j.cryobiol.2012.06.009 
```

解决

```
HTTP/1.1 303 See Other
Server: Apache-Coyote/1.1
Location: http://linkinghub.elsevier.com/retrieve/pii/S0011224012001241
Expires: Mon, 30 Jul 2012 10:09:27 GMT
Content-Type: text/html;charset=utf-8
Content-Length: 208
Date: Sun, 29 Jul 2012 15:28:31 GMT

<HTML><HEAD><TITLE>Handle Redirect</TITLE></HEAD>
<BODY><A HREF="http://linkinghub.elsevier.com/retrieve/pii/S0011224012001241">http://linkinghub.elsevier.com/retrieve/pii/S0011224012001241</A></BODY></HTML> 
```

不幸的是，加一片段的元数据来自目标网址，据我所知，它不能单独提供。来自[https://developers.google.com/+/plugins/+1button/#plus-snippet](https://developers.google.com/+/plugins/+1button/#plus-snippet)：

> 填充 +Snippet
> 
> 单击 +1 按钮后，用户可以选择通过显示的共享气泡将页面共享到 Google+。此共享气泡与生成的 Google+ 活动帖子包含一个预览或 + 片段，其中包含页面标题、页面的简要说明和缩略图。这些数据片段是从在目标 URL 中找到的内容中提取的，并且可以由内容发布者轻松指定。
> 
> 有关详细信息和自定义您自己的代码片段，请参阅代码片段文档。

问题是为了聚合目的最好链接到 DOI，因为 DOI 是稳定的，而期刊网站链接可能不是。无论如何使用 DOI 作为与 google plus 的链接并且仍然正确填充弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:39:45.197

听起来最好的解决方案是让 doi.org 的重定向页面在 303 页面（当前链接所在的位置）上发布一些元数据信息。这样，跟随链接的机器人将从最终目标页面获取信息，而那些不遵循链接的机器人仍然能够从重定向页面获取元数据。

# jquery - 网页在销毁同位素并重置它的同时滚动到顶部位置

> ID：11710490
> 
> 赞同：0
> 
> 时间：2012-07-29T15:34:56.743
> 
> 标签：jquery, scroll, jquery-isotope

我正在使用[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)的`isotope`插件来创建网格布局。单击任何网格时，我会显示一个显示详细信息的模式弹出窗口。关闭模式弹出窗口后，控制返回到旧的同位素网格布局。模态弹窗的内容`hidden`在同位素项下。我无法正确显示模式弹出窗口中的内容。所以，我所做的是，在单击任何同位素的网格`<a>`项目时，我使用了`$.isotope('destroy');`. 只有这样，模态弹出窗口才能正常工作。此外，在关闭模式弹出窗口后，我使用以下代码重新初始化同位素网格：

```
 $("#container").isotope({
     itemSelector:".item",
     masonry:{
     columnWidth:100,
     gutterWidth:20
     },
     animationOptions:{
     duration: 750,
     easing: 'linear',
     queue: false
    }
    }); 
```

我在所有处理元素事件的`return false;`函数的末尾添加了（使用函数）。`<a>``onclick``jQuery``delegate()`

重新初始化后，页面滚动回顶部。除此之外，页面的可用性没有问题。我被困住了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:53:25.750

我对您使用的插件不太熟悉，但是**可以**`isotope`防止由于单击`<a>`元素而导致页面滚动。

 **而不是`return false`，你可以试试`preventDefault()`。

在点击处理程序（例如）上，你会这样做 -

```
$('a').on('click',function(e){
  // other code here
  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T23:34:09.993

您不应该使用模式窗口和同位素使用破坏方法或任何特殊技巧；您是否尝试过[这里](http://www.digitalia.be/software/slimbox2)或类似的方法来显示静态或动态内容？它在[这里](http://www.16percent.net/)确实可以揭示更多的东西。如果您只担心页面滚动，则 Lix 会获得绿色 :)**

# nutch - Nutch - 不抓取，说“在 depth=1 处停止 - 没有更多的 URL 可获取”

> ID：11710492
> 
> 赞同：0
> 
> 时间：2012-07-29T15:34:58.990
> 
> 标签：nutch, web-crawler

我已经很久没有尝试使用 Nutch 爬行了，但它似乎并没有运行。我正在尝试为网站构建 SOLR 搜索，并使用 Nutch 在 Solr 中进行爬网和索引。

最初存在一些权限问题，但现在已修复。我要爬取的 URL 是`http://172.30.162.202:10200/`，这是不可公开访问的。它是可以从 Solr 服务器访问的内部 URL。我尝试使用 Lynx 浏览它。

下面给出的是 Nutch 命令的输出：

```
[abgu01@app01 local]$ ./bin/nutch crawl /home/abgu01/urls/url1.txt -dir /home/abgu01/crawl -depth 5 -topN 100
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /opt/apache-nutch-1.4-bin/runtime/local/logs/hadoop.log (No such file or directory)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:136)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
        at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:216)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:544)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:440)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
        at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254)
        at org.apache.nutch.crawl.Crawl.<clinit>(Crawl.java:43)
log4j:ERROR Either File or DatePattern options are not set for appender [DRFA].
solrUrl is not set, indexing will be skipped...
crawl started in: /home/abgu01/crawl
rootUrlDir = /home/abgu01/urls/url1.txt
threads = 10
depth = 5
solrUrl=null
topN = 100
Injector: starting at 2012-07-27 15:47:00
Injector: crawlDb: /home/abgu01/crawl/crawldb
Injector: urlDir: /home/abgu01/urls/url1.txt
Injector: Converting injected urls to crawl db entries.
Injector: Merging injected urls into crawl db.
Injector: finished at 2012-07-27 15:47:03, elapsed: 00:00:02
Generator: starting at 2012-07-27 15:47:03
Generator: Selecting best-scoring urls due for fetch.
Generator: filtering: true
Generator: normalizing: true
Generator: topN: 100
Generator: jobtracker is 'local', generating exactly one partition.
Generator: Partitioning selected urls for politeness.
Generator: segment: /home/abgu01/crawl/segments/20120727154705
Generator: finished at 2012-07-27 15:47:06, elapsed: 00:00:03
Fetcher: starting at 2012-07-27 15:47:06
Fetcher: segment: /home/abgu01/crawl/segments/20120727154705
Using queue mode : byHost
Fetcher: threads: 10
Fetcher: time-out divisor: 2
QueueFeeder finished: total 1 records + hit by time limit :0
Using queue mode : byHost
Using queue mode : byHost
fetching http://172.30.162.202:10200/
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
-finishing thread FetcherThread, activeThreads=1
Using queue mode : byHost
Fetcher: throughput threshold: -1
-finishing thread FetcherThread, activeThreads=1
Fetcher: throughput threshold retries: 5
-finishing thread FetcherThread, activeThreads=0
-activeThreads=0, spinWaiting=0, fetchQueues.totalSize=0
-activeThreads=0
Fetcher: finished at 2012-07-27 15:47:08, elapsed: 00:00:02
ParseSegment: starting at 2012-07-27 15:47:08
ParseSegment: segment: /home/abgu01/crawl/segments/20120727154705
ParseSegment: finished at 2012-07-27 15:47:09, elapsed: 00:00:01
CrawlDb update: starting at 2012-07-27 15:47:09
CrawlDb update: db: /home/abgu01/crawl/crawldb
CrawlDb update: segments: [/home/abgu01/crawl/segments/20120727154705]
CrawlDb update: additions allowed: true
CrawlDb update: URL normalizing: true
CrawlDb update: URL filtering: true
CrawlDb update: 404 purging: false
CrawlDb update: Merging segment data into db.
CrawlDb update: finished at 2012-07-27 15:47:10, elapsed: 00:00:01
Generator: starting at 2012-07-27 15:47:10
Generator: Selecting best-scoring urls due for fetch.
Generator: filtering: true
Generator: normalizing: true
Generator: topN: 100
Generator: jobtracker is 'local', generating exactly one partition.
Generator: 0 records selected for fetching, exiting ...
Stopping at depth=1 - no more URLs to fetch.
LinkDb: starting at 2012-07-27 15:47:11
LinkDb: linkdb: /home/abgu01/crawl/linkdb
LinkDb: URL normalize: true
LinkDb: URL filter: true
LinkDb: adding segment: file:/home/abgu01/crawl/segments/20120727154705
Exception in thread "main" java.io.IOException: Job failed!
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1252)
        at org.apache.nutch.crawl.LinkDb.invert(LinkDb.java:175)
        at org.apache.nutch.crawl.LinkDb.invert(LinkDb.java:149)
        at org.apache.nutch.crawl.Crawl.run(Crawl.java:143)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

谁能建议爬行不运行的原因是什么？`depth`无论或`topN`参数的值如何，它总是以“停止在 depth=1 - 不再获取 URL”结束。而且我认为其原因是（查看上面的输出）Fetcher 无法从 URL 获取任何内容。

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:26:39.380

网站可以通过 robots.txt / 或 meta(name="robots" content="noindex") 标签阻止抓取。请检查。

PS。您的日志不清楚： 1\. java.io.FileNotFoundException: /opt/apache-nutch-1.4-bin/runtime/local/logs/hadoop.log （没有这样的文件或目录）
2\. solrUrl 未设置，索引将被跳过...

# c# - 如何将 html 友好的 ascii 代码转换为 c# 中的字符串？

> ID：11710500
> 
> 赞同：3
> 
> 时间：2012-07-29T15:35:58.870
> 
> 标签：c#, .net, xaml, ascii, windows-runtime

我正在从返回 html 友好的 ascii 代码而不是文本的 web 服务中读取数据。我正在尝试将其再次转换为 WinRT 应用程序的字符串，但我似乎找不到合适的解码器。

例如：

`&#39;`应该等于一个撇号。

我已经尝试过 htmldecode 和 urldecode，但它们不是我需要的。另外，我不知道我会得到什么，所以我不想硬编码任何字符。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T15:55:29.810

参考 System.Web 和使用：

```
 HttpUtility.HtmlDecode("htmlcode"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:06:23.100

好的，所以我有这段处理数字实体的代码。

```
 Regex r = new Regex("&#[^;]+;");
 str = r.Replace(str, delegate(Match match)
 {
     string value = match.Value.ToString().Replace("&#", "").Replace(";", "");
     int asciiCode;
     if (int.TryParse(value, out asciiCode))
     {
         return Convert.ToChar(asciiCode).ToString();
     }
     else
     {
         return value;
     }                 
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:53:12.840

如果您说`HttpUtility.HtmlDecode()`不能满足您的需要，您可能必须编写正则表达式或其他比较来循环遍历您的字符串，匹配[HTML 代码表中 HTML 编号或 HTML 名称列中的](http://www.ascii.cl/htmlcodes.htm)值，以便您可以转换它到相应的符号。

# ruby-on-rails-3 - 如何在 Rails 3+ 中为omniauth 提供程序正确定义密钥

> ID：11710506
> 
> 赞同：0
> 
> 时间：2012-07-29T15:37:18.393
> 
> 标签：ruby-on-rails-3, omniauth

我正在将omniauth 服务安装到我的Rails 3 站点中，并且需要知道在哪里定义这些键：

```
provider :twitter,  ENV["TWITTER_KEY"], ENV["TWITTER_SECRET"] 
```

大多数人都明确表示，出于安全原因，我不能在初始化程序中定义它。那么我在哪里定义它呢？

我不明白使用 Rails 开发的这一部分。请给出一些细节，甚至是一个例子。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:32:58.577

我在初始化程序中声明它（在一个单独的文件，_keys.rb 中）并签入以进行调试。然后，当我部署时，我可以：

*   手动替换初始化文件。

*   使用 bash 脚本在生产环境中声明密钥。

# api - XML-RPC 与 REST

> ID：11710507
> 
> 赞同：22
> 
> 时间：2012-07-29T15:37:28.283
> 
> 标签：api, rest, xml-rpc

这是一个更理论的问题。我即将在这里构建一个小服务器，并想为它创建一个 API。我正在决定什么更好，并且已经排除了 SOAP，因为在我看来那是一团糟。我只剩下 REST 和 XML-RPC。我真的很喜欢 XML-RPC，它实现起来真的很简单，而且它足够常规，所有客户都可以轻松使用它。这些天来，所有酷孩子都在做 RESTful 的东西，有时使用 JSON 有效负载或 XML 文档，甚至是 HTTP POST 变量。我认为那些人总是为每项服务重新发明轮子。我看不出通过使用 REST 而不是使用 XML-RPC 可以获得什么。

那么，这里有人可以提供使用 REST+JSON 而不是仅使用 XML-RPC 实现 API 的实际理由吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-06T01:06:42.943

REST 与 RPC 实现（如 XML-RPC）是错误的二分法。您可以使用 XML-RPC 实现 RESTful 接口（尽管您可能不想这样做）。也就是说，有很多原因可以说明您希望使用普通 HTTP 以 RESTful 方式公开资源，而不是使用 XML-RPC 之类的技术滚动您自己的 RPC 接口：

1.  未来的操作主要由服务器控制，而不是通过过程调用在客户端中硬编码，从而简化了部署和版本控制。
2.  可以开箱即用地使用缓存、限制和版本控制等现有实现。
3.  使用 RPC 接口滚动的自定义过程可能范围太窄。

有关更多信息，请参阅[此](https://web.archive.org/web/20201111192905/https://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/)博客文章。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T02:48:51.670

*   XML-RPC 受专利保护。你可能会发现有一天你被要求为使用它支付版税。据我所知，REST 不是。

*   XML-RPC 请求对安全基础设施是不透明的。而 HTTP 感知防火墙可以配置为允许 REST 调用读取数据，但不能更新或删除它。

REST 的其他优点更多地适用于处理大型数据集。

*   REST 在网络上要轻得多（尤其是在使用 JSON 而不是 XML 时）。

*   XML-RPC 忽略 HTTP 语义。所有 XML-RPC 调用都是 HTTP POST。这有很多含义。包括那个

    *   REST 请求受益于 HTTP 缓存基础架构，其中所有 XML-RPC 调用都必须由目标服务器处理。
    *   REST 使客户端能够使用简单的 HTTP HEAD 请求检查更新。要在 XML-RPC 中做同样的事情，您需要将它构建到您的 API 中。
*   XML-RPC 客户端必须将整个响应加载到内存中，以便可以作为返回值呈现，REST 客户端可以简单地在流到达时对其进行处理。这意味着 REST 调用可以响应任意数量的记录，其中 XML-RPC API 应该限制响应的大小。

# iis - 页面刷新时绕过字符集值

> ID：11710511
> 
> 赞同：1
> 
> 时间：2012-07-29T15:38:22.960
> 
> 标签：iis, utf-8, character-encoding

我在大多数 asp.net 页面上有一个 charset=UTF-8 的网站。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

如果我等待几个小时并加载我的页面，字符会显示为 UTF-8。然后，只要我刷新页面或重定向到页面，它就会显示为 ASCII：

`Léon`更改为`LÃ©on`

我的标题如下所示：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Expires: -1
Last-Modified: 7/29/2012 3:16:39 PM
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
X-Powered-By-Plesk: PleskWin
Date: Sun, 29 Jul 2012 15:16:39 GMT
Content-Length: 32795 
```

在 IIS 中，页面内容也配置为默认显示为 UTF-8。我从我的 asp.net 页面中删除了所有可以删除的内容，但我的 utf-8 字符串仍然显示已损坏。

# php - MySQL：根据同一表的一条记录中一个选定字段中的值删除表中的多行

> ID：11710513
> 
> 赞同：2
> 
> 时间：2012-07-29T15:38:37.207
> 
> 标签：php, mysql

我有一个如下表：

```
+---+----------+----------+---------+---------+
+ID + FIELD 1  + FIELD 2  + FIELD 3 + FIELD 4 +
+---+----------+----------+---------+---------+
+ 1 +  AAA     +  1234    +  ABC    +   Y     +
+ 2 +  AAA     +  1234    +  DEF    +         +
+ 3 +  AAA     +  1234    +  GHI    +         +
+ 4 +  BBB     +  1234    +  ABC    +         +
+ 5 +  CCC     +  1234    +  JKL    +         +
+---+----------+----------+---------+---------+ 
```

我有一个进程正在运行，它可以将 FIELD4 设置为“Y”，然后是第二个进程检查 FIELD4 中“Y”的值。

我需要编写一个查询（或可能的查询），它将删除 FIELD4 = 'Y' 的记录，然后删除 FIELD1 与最初删除的记录具有相同值的所有其他记录。

作为记录，FIELD4 最终将成为一个复选框，并且将从 PHP 脚本中调用所需的 MySQL。考虑到这一点，如果解决方案涉及 PHP，这将不是问题。

我在 PHP 和 MySQL 站点和论坛上进行了很好的搜索，但找不到一对多删除。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:59:19.197

尝试以下查询：

```
delete from table
where FIELD1 in (
    select a.FIELD1
    from (select * from table) a 
    where a.FIELD4='Y'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:54:03.527

我认为您需要一个 Delete Select 语句。它基本上是删除查询中的选择语句。例如：

```
DELETE FROM `tablename` WHERE FIELD1 IN ( SELECT FIELD1 FROM `tablename` WHERE FIELD4 = `Y` )   ); 
```

# objective-c - 这些系统头文件在哪里？

> ID：11710514
> 
> 赞同：2
> 
> 时间：2012-07-29T15:38:40.070
> 
> 标签：objective-c, header-files

这些文件是 float.h 和 limits.h。它们在 Xcode 中的某个地方吗？当给出这样的指示时：`/Developer/SDKs/<insert SDK here>/usr/include`我是在某处输入它们还是像地图一样逐个遵循指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:49:52.640

做这个：

*   写入`CHAR_MIN`使用 X-Code 打开的文件。

*   右键单击`CHAR_MIN`并选择`Jump to Definition`

*   右键单击里面的空白区域`limits.h`并选择`Show in Finder`

您可以这样做来查找任何此类文件的位置。

在我的系统`limits.h`中位于 X-Code 文件夹内。

# c# - WP7 中的主从绑定

> ID：11710515
> 
> 赞同：0
> 
> 时间：2012-07-29T15:38:54.707
> 
> 标签：c#, silverlight, windows-phone-7, data-binding, mvvm

我在 WP7 中遇到绑定问题，找不到有用的示例或博客。我的应用程序有一个 ViewModel，当从主页（列表）导航到编辑/详细信息页面时，我无法在同一页面上正确显示 ListPicker 和对象数据。我已经设法完成这项工作，但希望为此找到最佳实践。

例如我有一堂课：

```
public class Person
    {
        public string Name { get; set; }
        public string Gender { get; set; }
    } 
```

我的视图模型中也引用了该类：

```
public Person selectedPerson;
private Person _person
{
    get { return _person; }
    set
    {
        _person= value;
        NotifyPropertyChanged("selectedPerson");
    }
} 
```

我有一个 Detail.xaml 页面：

```
<StackPanel x:Name="PersonEditPanel">
    <TextBox x:Name="NameTextBox" Text="{Binding Name}" />
    <TextBox x:Name="GenderTextBox" Text="{Binding Gender}" />
</Stackpanel> 
```

在我后面的代码中，我有：

```
private void PhoneApplicationPage_Loaded(object sender, EventArgs e)
{
    DataContext = App.ViewModel.selectedPerson;
} 
```

上面的很好，但是我想为 Gender 属性添加一个 ListPicker 以改善用户体验。

为此，我添加了一个新类：

```
public class TypeList
    {
        public int ID { get; set; }
        public string Name { get; set; }
    } 
```

并向我的 ViewModel 添加一个可观察的集合：

```
private ObservableCollection<TypeList> _PersonGenderTypeList;
    public ObservableCollection<TypeList> PersonGenderTypeList
    {
        get { return _PersonGenderTypeList; }
        set
        {
            _PersonGenderTypeList = value;
            NotifyPropertyChanged("PersonGenderTypeList");
        }
    } 
```

我已经尝试了很多选项，我能找到在哪里可以看到正确绑定的人名和性别列表选择并在屏幕上（同时）填充的唯一方法如下：

```
private void PhoneApplicationPage_Loaded(object sender, EventArgs e)
{
    DataContext = App.ViewModel.selectedPerson;
    GenderTypeListPicker.ItemsSource = App.ViewModel.PersonGenderTypeList;
} 
```

这感觉就像一个真正的黑客，可能不是最佳实践。我是否在这里遗漏了一些东西，如果有，是否有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:28:00.520

我不会将您的代码归类为黑客，它很简单并且可以完成工作。您可以利用 MVVM 模式并创建一个“支持”页面的视图模型，其中包含所选人员和性别：

```
public PersonDetailsViewModel
{
  public Person SelectedPerson {get;set;}
  public ObservableCollection<TypeList> GenderList {get;set;}
} 
```

然后，您可以将此视图模型的实例设置为`DataContext`您的视图，然后在 XAML 中绑定各种 UI 控件。

但是，正如我之前所说，您当前的代码没有任何问题！

# android - Android：AutocompleteTextView 奇怪的行为

> ID：11710517
> 
> 赞同：0
> 
> 时间：2012-07-29T15:38:58.277
> 
> 标签：android, autocompletetextview

我在使用 AutoCompleteTextView 时遇到了一个奇怪的问题。我的代码如下，

```
 AutoCompleteTextView  searchText = //findView...
private ArrayList<String> suggestions = null;
private ArrayAdapter<String> suggestionAdapter = null;
suggestionAdapter = new ArrayAdapter<String>(this, R.layout.list, suggestions);
searchText.setAdapter(suggestionAdapter); 
```

在代码中，我在 for 循环中填充了 arrayList。

```
 for (int i = 0; i < nl.getLength(); i++) {
        Element suggestion = (Element)nl.item(i);
        String name = suggestion.getAttribute("data");
        suggestions.add(name);
    } 
```

当我在文本视图中键入内容时，这并没有向我显示建议。

但是，当我将任何字符串添加到 for 循环之外的数组列表中时（例如，就在循环之后），我能够看到建议。过去两个小时一直困扰着我。任何建议，将不胜感激。

相信我，我正在输入我在 for 循环中填充的已知文本之一。

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:27:22.197

不要在forloop之前设置适配器。将所有字符串添加到字符串的 ArrayList 中，然后在 for 循环之后使用：

```
suggestionAdapter = new ArrayAdapter<String>(this, R.layout.list, suggestions);
AutoCompleteTextView  searchText = //findView...
searchText.setAdapter(suggestionAdapter); 
```

希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:58:40.467

将以下行放在 for 循环之后。

```
suggestionAdapter.notifyDataSetChanged(); 
```

**或** 将以下行放在第一个代码中。

```
suggestionAdapter.setNotifyOnChange(true) 
```

更多细节 [setNotifyOnChange(boolean)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#setNotifyOnChange%28boolean%29) , [notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

# git - 无法使用 git 将 github 项目推送到天蓝色

> ID：11710522
> 
> 赞同：3
> 
> 时间：2012-07-29T15:39:29.987
> 
> 标签：git, azure

我已经注册了新的 azure 试用版。我在 github 上有一个项目，我想将其推送到我的新 azure 网站，因此按照 azure 站点上的说明，我将 azure 站点添加为新站点`remote`：

```
git remote add azure https://me@app.scm.azurewebsites.net/app.git
git push azure master 
```

当我推送时，我被要求输入密码，然后得到：

```
error: SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify faile
d while accessing https://me@app.scm.azurewebsites.net/app.git/info/refs
fatal: HTTP request failed 
```

这是一个普通的 git 设置，所以我没有设置任何时髦的东西。我唯一做的就是下载并使用 github windows 来处理 repo。

**更新：**

这似乎只是影响`North Europe`数据中心的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:49:35.750

您提到避免使用 的问题`GIT_SSL_NO_VERIFY=true`，但这不是正确的解决方案。

```
SSL certificate problem, verify that the CA cert is OK 
```

这意味着 ssl 事务在查找和管理[Windows Azure使用的根 CA（证书颁发机构）时遇到问题](http://www.windowsazure.com/en-us/)

所有受信任的 CA 都在 Git 中通过设置引用`http.sslcainfo`。确保你有：

```
git config –system http.sslcainfo /bin/curl-ca-bundle.crt 
```

如果这不起作用，您可以尝试提及完整路径：

```
git config --global http.sslcainfo "/c/Program Files (x86)/Git/bin/curl-ca-bundle.crt" 
```

或者：

```
git config --global http.sslcainfo "C:\Program Files(x86)\Git\Bin\curl-ca-bundle.crt" 
```

* * *

如果没有任何效果，那么，正如[dfowler（ASP.NET 团队的开发人员）](https://stackoverflow.com/users/45091/dfowler)的[回答](https://stackoverflow.com/a/11712796/6309)所暗示的那样，CA 链可能会以某种方式被破坏（即，Azure 方面不完整）：

![CA 链图](../Images/88bf715526c6584fab9179fdc2505742.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T20:44:52.463

我们目前正在研究这个问题。一切都解决后，我会更新这个答案。

**编辑**

我们的某些前端的证书存在问题，我们恢复了它们。

# c++ - 如何在 Qt Creator 上使用 pthread

> ID：11710524
> 
> 赞同：17
> 
> 时间：2012-07-29T15:40:06.540
> 
> 标签：c++, qt, c++11, qt-creator

我想执行以下代码。

```
#include <iostream>
#include <thread>

void output() {
    std::cout << "Hello World" << std::endl;
}

int main()
{
    std::thread t(output);
    t.join();

    return 0;
} 
```

我无法执行它。

Qt Creator 输出在抛出“std::system_error”实例后调用终止什么（）：不允许操作

但是我可以使用 -pthread 选项在终端上执行。您能告诉我如何在 Qt Creator 中使用 -pthread 选项吗？

我的开发环境是Ubuntu(12.04)、g++4.6.3、Qt Creator(2.4.1)。

谢谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T07:48:44.700

您还需要链接到`-pthread`. 如果您使用`g++ main.cpp -std=c++0x -pthread`，您将一步完成所有操作，因此它可以正常工作。要使 Qt 做正确的事情，请将以下内容添加到您的项目文件中：

```
QMAKE_CXXFLAGS += -std=c++0x -pthread 
LIBS += -pthread 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T15:57:16.547

这对我有用：

```
TEMPLATE = app
TARGET = 
DEPENDPATH += .
INCLUDEPATH += .

# Input
SOURCES += test.cpp

QMAKE_CXXFLAGS += -std=gnu++0x -pthread
QMAKE_CFLAGS += -std=gnu++0x -pthread 
```

您的示例使用我系统上的上述 .pro 文件正确编译和执行。

尝试将您的示例保存为 test.cpp，并将上述示例保存为同一目录中的 project.pro。然后输入：

```
$ qmake
$ make
$ ./project
Hello World 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:55:36.033

在此处添加命令行参数：http: [//doc.qt.nokia.com/qtcreator-2.4/creator-run-settings.html](http://doc.qt.nokia.com/qtcreator-2.4/creator-run-settings.html)

# matlab - 用已知初始值计算matlab中前几行的单元格值

> ID：11710528
> 
> 赞同：0
> 
> 时间：2012-07-29T15:41:17.757
> 
> 标签：matlab, matrix

我有 12 个 360 x 1000 的矩阵。

对于每个矩阵，我试图根据前一行的值计算每一行的值。每列的初始值是已知的。我真的不知道如何编写代码，有人可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:56:05.660

你的问题不是很清楚......这是一个可能有帮助的例子：

```
%# pre-allocate matrix
M = zeros(360,1000);

%# initialize first row
M(1,:) = rand(1,1000);

%# compute remaining rows, one-at-a-time, using previous row
for i=2:size(M,1)
    M(i,:) = myFunction( M(i-1,:) );
end 
```

where`myFunction`是一个自定义函数，它对一行执行某种计算，并返回下一行的新值。您当然可以在每次迭代中使用不止一个前一行，甚至所有之前的行：`M(1:i-1,:)`

# iphone - 音效滑块不起作用

> ID：11710534
> 
> 赞同：2
> 
> 时间：2012-07-29T15:42:11.820
> 
> 标签：iphone, objective-c, ios, xcode4, cocos2d-iphone

出于某种原因，这不适用于我的其他层，即使它在我的选项层中运行良好。我需要放什么东西才能让这个滑块在我的其他图层中工作吗？我在某些敌人产生时使用播放效果并且会播放音效。感谢我能得到的任何帮助。

```
 CCControlSlider *slider1 = [CCControlSlider sliderWithBackgroundFile:@"sound bar2.png" progressFile:@"sound bar2.png" thumbFile:@"sound icon.png"];
    slider1.minimumValue = 0.0f; // Sets the min value of range
    slider1.maximumValue = 1.0f; // Sets the max value of range

    // When the value of the slider will change, the given selector will be call
    [slider1 addTarget:self action:@selector(valueChanged1:) forControlEvents:CCControlEventValueChanged];

    [slider1 setPosition:ccp(240,8)];        

    [self addChild:slider1 z:1];

- (void)valueChanged1:(CCControlSlider *)sender
{
    // Change volume of your sounds
    [[SimpleAudioEngine sharedEngine] setEffectsVolume:sender.value];
} 
```

如果您需要更多文件或有任何问题，请随时问我。

# perl - Web 服务器如何解释“.cgi”？

> ID：11710536
> 
> 赞同：2
> 
> 时间：2012-07-29T15:43:22.457
> 
> 标签：perl, web, webserver, cgi, handler

我的问题是关于 cgi 的。我想知道我是否将 Perl 脚本保存为 .cgi 文件，让服务器知道它是 Perl 脚本而不是其他东西的实际机制是什么？我知道 `#!/usr/local/bin/perl`源文件的开头有一个，但这也是 Perl 编程语言的一部分，所以服务器在开始执行之前必须知道它是一个 Perl 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T20:57:59.847

HTTP 服务器通常只会[将](http://www.kernel.org/doc/man-pages/online/pages/man2/sendfile.2.html)指定的文件发送到客户端。服务器的配置决定了哪些文件将被运行并返回它们的输出。

例如，流行的[Apache httpd](http://httpd.apache.org)服务器的配置文件是[`httpd.conf`](http://httpd.apache.org/docs/configuring.html#main)，或者特别是`Include`来自那里的文件 d 之一。它随软件版本、主机操作系统和发行版的不同而有很大差异。

标准可以基于文件*在*文件结构中的位置，或者它的*名称*。

一个[ScriptAlias](http://httpd.apache.org/docs/mod/mod_alias.html#scriptalias)指令，如

```
ScriptAlias /cgi-bin 
```

表示`/cgi-bin`目录中的所有文件都将被视为 CGI 脚本。

或者，一个[AddHandler](http://httpd.apache.org/docs/mod/mod_mime.html#addhandler)指令，如

```
AddHandler cgi-script .cgi 
```

表示所有带有`.cgi`扩展名的文件无论在哪里都将作为 CGI 脚本运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T22:35:03.737

如果服务器被配置为识别`.cgi`后缀，那么它只是执行文件，可能使用[`exec*()`函数](http://en.wikipedia.org/wiki/Exec_%28operating_system%29)之一。

在类 Unix 系统上，如果文件是以 开头的文本文件[`#!`](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，则系统内核本身将使用该行来确定启动哪个解释器以将文件作为脚本运行。

您可以使用任何解释语言（Perl、Python、bash、sh、ruby 等）编写 CGI 脚本。

就此而言，您可以将任何可执行文件用作 CGI~~脚本~~程序。如果你编译一个 C、C++ 或 Ada 程序来创建一个可执行文件，然后将它安装在适当的目录中，`.cgi`并在文件名上加上后缀，Web 服务器可以直接执行它。这并不常见，因为脚本语言对于这类事情往往更方便，但是 Web 服务器并不关心它正在调用什么样的可执行文件，或者内核如何调用它。

（Windows 上的细节可能会有所不同，它通常使用文件扩展名来确定如何启动可执行文件。）

# javascript - 我可以选择属性名称（不是值）以某个字符串开头的所有元素吗？

> ID：11710541
> 
> 赞同：1
> 
> 时间：2012-07-29T15:44:01.283
> 
> 标签：javascript, css

假设我有这个标记摘录：

```
<p onblur="...">text 1</p>
<p class="myclass">text 2</p>
<p onfocus="...">text 3</p> 
```

是否有一个 CSS 选择器，我可以使用它们都具有以“on”开头的属性这一事实来获取第一个和最后一个元素（但不是中间元素）？我正在寻找一个通用的解决方案，而不是针对这个特殊情况的东西（因为，​​当然，对于这个特殊的例子，预期的结果可以通过更直接的方式实现）。

基于 Javascript 的解决方案也适用于我（尽管我希望避免使用蛮力检查每个元素的方法）。这实际上就是我正在寻找的（可以与 jQuery 或类似库一起使用的选择器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:02:38.310

正如尖锐指出的那样，这不是推荐的解决方法。只需使用一个类来对您想要立即定位的元素进行分组。

但是，您可以使用以下方法定位大多数事件处理程序：

```
[onabort],[onbeforecopy],[onbeforecut],[onbeforepaste],[onblur],[onchange],[onclick],[oncontextmenu],[oncopy],[oncut],[ondblclick],[ondrag],[ondragend],[ondragenter],[ondragleave],[ondragover],[ondragstart],[ondrop],[onerror],[onfocus],[oninput],[oninvalid],[onkeydown],[onkeypress],[onkeyup],[onload],[onmousedown],[onmousemove],[onmouseout],[onmouseover],[onmouseup],[onmousewheel],[onpaste],[onreset],[onscroll],[onsearch],[onselect],[onselectstart],[onsubmit] {
  color: #BADBAD;   
} 
```

见演示[http://jsfiddle.net/uwXgt/1/](http://jsfiddle.net/uwXgt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:49:41.957

有一个 CSS 选择器可以根据元素属性进行选择：

```
p[onfocus] { color:blue; }
p[class=myclass] { color:red; } 
```

但是 CSS 中没有办法根据属性名称的第一部分进行选择。

# ruby-on-rails - 等待 popen3 进程完成？

> ID：11710542
> 
> 赞同：2
> 
> 时间：2012-07-29T15:44:16.683
> 
> 标签：ruby-on-rails, ruby, process, popen

我有一个使用`Open3.popen3`. 它工作正常，但有时应用程序会继续运行而无需等待进程完成。

这是我使用的函数`Open3.popen3`的样子（本质上它运行一个`cat`函数）：

```
def cat_func(var)
  ## some stuff happens 
  exit = 0
  Open3.popen3(" #{cat_command}"){|stdin, stdout, stderr, wait_thr|
    pid = wait_thr.pid 
    error = std err.gets
    exit = wait_thr.value
  }
  #HERE IS TRYING TO INTERCEPT ERRORS:
  if error.match(/^cat:/)
    ### Do something
  end
  call_next_function
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:48:13.117

只是一个猜测：也许你还必须消耗*stdout*，所以也许添加一行像

```
def cat_func(var)
  exit = 0
  Open3.popen3(" #{cat_command}") do |stdin, stdout, stderr, wait_thr|
    pid   = wait_thr.pid 
    stdout.gets
    error = stderr.gets
    exit  = wait_thr.value
  end

  # more stuff...
end 
```

解决问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:45:24.930

作为记录，这是我的最终解决方案：

```
Open3.popen3(command) do |stdin, stdout, stderr|
  stdin.puts instructions
  stdin.close  # make sure the subprocess is done
  stdout.gets  # and read all output - EOF means the process has completed.
  stderr.gets
end 
```

# android - 为我的项目配置正确的 Android-API 级别

> ID：11710544
> 
> 赞同：1
> 
> 时间：2012-07-29T15:44:43.417
> 
> 标签：android, actionbarsherlock

在我的应用程序中，我想针对**所有 Android 版本 >= 8**（需要推送通知），但我很难理解我的项目设置所需的 API / 依赖项的正确组合。

该项目将需要用于基于位置的服务的 Google API，并且我需要/想要使用[ActionBarSherlock](http://actionbarsherlock.com)来支持 ActionBar。

这个设置正确吗？

* * *

AndroidManifest.xml：

(1)

> ```
> <uses-sdk
>     android:minSdkVersion="8"
>     android:targetSdkVersion="16" />
> 
> <application
>     android:theme="@style/Theme.Sherlock.Light" >
>     ... 
> ```

库：

(2) 我加了`android-support-v4.jar`

项目属性：

(3) 设置为**Google-APIs 16**

动作条夏洛克：

(4) 我按照 ActionBar-FAQ 上的视频将 ABS 设置为库项目，并在其项目探测器中将其设置为 Android Level 16，并添加`android-support-v4.jar`到其 lib 文件夹中。

* * *

我知道这是一个基本问题，但我不确定我是否选择了正确的设置。我特别想知道 (3) 是否正确，或者我是否应该将整体 API-Level 设置为 8？

**更新 1**：我在理解`support.jar`. 如果我将构建目标设置为最大值 - 系统如何确保高级功能（如片段）在较低的 API（如 8）中工作。这是自动完成的，还是我必须针对支持包手动编码？ **更新 2**关于`support.jar`我必须知道我正在使用哪些功能，并且必须针对 support.jar 进行编码。如果我失败并使用了一个太高级的功能，那么在较低 API 级别上的 ClassCastException 将被抛出......？

任何帮助表示赞赏。另外：我是初学者，因此具有一些背景信息的答案将受到高度重视:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:48:31.640

看起来是对的。如 ActionBarSherlock.com 上的视频所述，您希望将步骤 #3 设置为您的 ActionBarSherlock 版本可用的最高“项目构建目标”。所以如果你有 ABS 4.1.0，你需要 Platform 4.1，API 16。

您是否也将 ABS 项目设置为库？您的项目的依赖项应该同时具有：

*   <Your-ABS-Library >.jar
*   安卓支持-v4.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:52:36.303

你的设置是正确的。如果您将其设置为版本 8 (3)，您将无法编译它。由于 ActionBarSherlock 至少需要 api 级别 14。

但是这样设置，需要考虑的一件事是，您使用的所有 Android API 必须是 API <= 级别 8。也就是说，您不能使用 API 级别 8 中未包含的功能，否则应用程序将崩溃ClassNotFoundException 或 MethodNotFound 异常。

至于 Fragment，您应该始终选择支持库 Fragment。那就是你应该导入 android.support.v4.app.Fragment，而不是 android.app.Fragment。

**对于更新 2：**

是的，它会在运行时抛出，它会使您的应用程序无法运行。但可以肯定的是，您可以通过检查当前的电话 API 级别来避免这个陷阱。

例如

```
if(android.os.Build.VERSION.SDK_INT >= 11) {
    // API that supported in API >= 11
}
else {
    // API that supported in API < 11
} 
```

我自己确实验证了这一点。您也可以尝试使用 Emulator 进行验证，例如 Running version 8 Emulator 和 Run code with API version >= 8 code。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T15:49:36.423

我建议您将 Build SDK 设置为 API 15。我也将它与 Sherlock ActionBar 一起使用，一切正常。

# actionscript-3 - AS3 - 将图像另存为静态 GIF

> ID：11710549
> 
> 赞同：2
> 
> 时间：2012-07-29T15:45:29.313
> 
> 标签：actionscript-3, air, gif

对，所以我有一个可以编辑图像之类的程序。我已经设法允许用户使用 as3corelib 中的[PNGEncoder 类](https://github.com/mikechambers/as3corelib/tree/master/src/com/adobe/images/)保存为 PNG 文件，但我还希望允许用户将图像保存为 GIF 文件。问题是，我能找到的保存 GIF 的唯一信息是动画 GIF（使用[as3gif 之](https://github.com/audreyt/as3gif)类的库），但我想将它们保存为*静态*GIF。

有人知道这样做的库或方法吗？我正在使用带有 FlashDevelop 的 Flex 4 SDK 制作一个 AIR 应用程序。

编辑：我尝试使用 as3gif 制作单帧 GIF：

```
var encoder:GIFEncoder = new GIFEncoder();
encoder.setRepeat(0);
encoder.setDelay(500);
encoder.start();
encoder.addFrame(image);
encoder.finish();

imageBytes = encoder.stream; 
```

然后我继续使用 FileStream 保存字节，但它给了我一个无效的 GIF 文件。我也尝试了 Jonatan 的代码，但结果相同。

编辑：问题出在我的代码的其他地方。使用带有单帧的 as3gif 对 gif 进行编码可提供功能齐全的静态 gif。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:26:35.720

只需用一帧制作一个 gif，您就有了一个静态 gif。

编辑：代码看起来像这样；

```
var ge:GIFEncoder = new GIFEncoder();
ge.start();
ge.addFrame(myBitmapData);
ge.finish();

ge.stream; //This should now contain the image data 
```

（未经测试）

# shell - 猫没用？

> ID：11710552
> 
> 赞同：129
> 
> 时间：2012-07-29T15:46:04.340
> 
> 标签：shell, command-line, cat

这可能在许多常见问题解答中 - 而不是使用：

```
cat file | command 
```

（这被称为无用的猫），正确的方法应该是：

```
command < file 
```

在第二种“正确”方式中 - 操作系统不必产生额外的进程。
尽管知道这一点，但我继续使用无用的猫有两个原因。

1.  更美观——我喜欢数据只从左到右均匀移动。并且更容易`cat`用其他东西替换（`gzcat`, `echo`, ...），添加第二个文件或插入新过滤器（`pv`, `mbuffer`, `grep`...）。

2.  我“感觉”在某些情况下它可能会更快。更快，因为有 2 个进程，第一个 ( `cat`) 执行读取，第二个执行任何操作。它们可以并行运行，这意味着有时执行速度更快。

我的逻辑是否正确（出于第二个原因）？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-05-18T00:04:46.610

[直到今天，当一些新秀试图将UUOC](https://en.wikipedia.org/wiki/Cat_(Unix)#Useless_use_of_cat "UUOC")钉在我身上以获得我的答案之一时，我才知道该奖项。这是一个`cat file.txt | grep foo | cut ... | cut ...`. 我给了他一些想法，然后才访问了他给我的链接，其中提到了奖项的起源和这样做的做法。进一步的搜索使我想到了这个问题。有点不幸的是，尽管有意识地考虑，但没有一个答案包括我的理由。

我并不想在回应他时采取防御措施。毕竟，在我年轻的时候，我会写这个命令，`grep foo file.txt | cut ... | cut ...`因为每当你执行频繁`grep`的 single 时，你都会学习 file 参数的位置，并且很容易知道第一个是模式，后面的是文件名。

当我回答这个问题时，这是一个有意识的选择`cat`，部分原因是“品味高”（用 Linus Torvalds 的话），但主要是出于令人信服的功能原因。

后一个原因更重要，所以我先说出来。当我提供管道作为解决方案时，我希望它是可重用的。一条管道很可能会添加到另一条管道的末端或拼接到另一条管道中。在这种情况下，为 grep 提供一个文件参数会破坏可重用性，并且如果文件参数存在，很可能会*默默地*这样做而不会出现错误消息。IE。当您期望同时包含和的行数时，`grep foo xyz | grep bar xyz | wc`将为您提供`xyz`包含的行数。在使用管道之前必须将参数更改为管道中的命令很容易出错。再加上无声失败的可能性，它就变成了一种特别阴险的做法。`bar``foo``bar`

前一个原因也不是不重要的，因为很多“[好品味](https://medium.com/@bartobri/applying-the-linus-tarvolds-good-taste-coding-requirement-99749f37684a)”只是一种直觉的潜意识理由，比如上面那些无声的失败，当某个需要教育的人说“但不是那只猫没用”。

但是，我会尽量让我意识到我提到的前一个“好品味”的原因。这个原因与 Unix 的正交设计精神有关。`grep`没有`cut`，`ls`也没有`grep`。因此至少`grep foo file1 file2 file3`有悖于设计精神。正交的做法是`cat file1 file2 file3 | grep foo`。现在，`grep foo file1`只是 的一个特例`grep foo file1 file2 file3`，如果你不以同样的方式对待它，你至少会用尽脑时钟周期来试图避免无用的猫奖。

这导致我们的论点`grep foo file1 file2 file3`是连接，并且`cat`连接所以它是正确的，`cat file1 file2 file3`但是因为`cat`没有连接，`cat file1 | grep foo`所以我们违反了`cat`全能 Unix 的精神。好吧，如果是这种情况，那么 Unix 将需要一个不同的命令来读取一个文件的输出并将它的输出到标准输出（而不是对它进行分页或任何纯粹的输出到标准输出）。所以你会遇到这样的情况，你说`cat file1 file2`或者你说`dog file1`，并认真记住要避免`cat file1`以避免获得奖励，同时也要避免，`dog file1 file2`因为如果指定了多个文件，希望设计`dog`会抛出错误。

希望在这一点上，您对 Unix 设计者表示同情，因为他们没有包含单独的命令来将文件发送到标准输出，同时还`cat`为连接命名而不是给它其他名称。实际上，**`<edit>`**删除了不正确的注释是一种有效的无复制工具，可以将文件吐出到标准输出，您可以将其放置在管道的开头，因此 Unix 设计人员确实为此专门包含了一些内容`<``<`**`</edit>`**

下一个问题是，为什么只有将一个文件或多个文件串联到标准输出而不进行任何进一步处理的命令很重要？一个原因是要避免让每个在标准输入上运行的 Unix 命令都知道如何解析至少一个命令行文件参数并将其用作输入（如果存在）。第二个原因是避免用户必须记住：（a）文件名参数的去向；(b) 避免上面提到的静默管道错误。

这让我们明白为什么`grep`会有额外的逻辑。其基本原理是允许用户流畅地使用经常使用的命令并且*独立*地使用（而不是作为管道）。这是对正交性的轻微妥协，以显着提高可用性。并非所有命令都应该这样设计，不经常使用的命令应该完全避免文件参数的额外逻辑（记住额外的逻辑会导致不必要的脆弱性（可能出现错误））。例外情况是允许文件参数，例如`grep`. （顺便说一句，请注意，`ls`有一个完全不同的理由不仅要接受，而且还需要文件参数）

`grep`最后，如果在指定文件参数时标准输入也可用，那么如果像（但不一定`ls`）这样的异常命令会生成错误，本可以做得更好。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-07-29T15:49:35.447

没有！

首先，重定向发生在命令的哪个位置并不重要。因此，如果您喜欢重定向到命令左侧，那很好：

```
< somefile command 
```

是相同的

```
command < somefile 
```

其次，当您使用管道时，会发生*n + 1 个进程和一个子外壳。*它绝对是更慢的。在某些情况下， *n*会为零（例如，当您重定向到内置的 shell 时），因此使用`cat`您完全不必要地添加了一个新进程。

概括地说，每当您发现自己在使用管道时，都值得花 30 秒来看看是否可以消除它。（但可能不值得花费超过 30 秒的时间。）以下是一些经常不必要地使用管道和进程的示例：

```
for word in $(cat somefile); … # for word in $(<somefile); … (or better yet, while read < somefile)

grep something | awk stuff; # awk '/something/ stuff' (similar for sed)

echo something | command; # command <<< something (although echo would be necessary for pure POSIX) 
```

随意编辑以添加更多示例。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2018-03-13T10:46:39.600

为猫**辩护：**

是的，

```
 < input process > output 
```

或者

```
 process < input > output 
```

效率更高，但是很多调用没有性能问题，所以你不在乎。

### 人体工学原因：

我们习惯于从左到右阅读，所以像这样的命令

```
 cat infile | process1 | process2 > outfile 
```

很容易理解。

```
 process1 < infile | process2 > outfile 
```

必须跳过process1，然后从左到右读取。这可以通过以下方式治愈：

```
 < infile process1 | process2 > outfile 
```

看起来，好像有一个箭头指向左边，那里什么都没有。更令人困惑和看起来像花哨的引用是：

```
 process1 > outfile < infile 
```

并且生成脚本通常是一个迭代过程，

```
 cat file 
    cat file | process1
    cat file | process1 | process2 
    cat file | process1 | process2 > outfile 
```

您可以逐步看到自己的进步，而

```
 < file 
```

甚至不起作用。简单的方法不太容易出错，并且符合人体工程学的命令连接使用 cat 很简单。

另一个主题是，大多数人在使用计算机之前很久就已经接触过 > 和 < 作为比较运算符，并且在使用计算机作为程序员时，他们更经常接触到这些操作符。

并且用 < 和 > 比较两个操作数是反交换的，这意味着

```
(a > b) == (b < a) 
```

我记得第一次使用 < 进行输入重定向，我担心

```
a.sh < file 
```

可能意味着相同

```
file > a.sh 
```

并以某种方式覆盖我的 a.sh 脚本。这可能是很多初学者的问题。

### 罕见的差异

```
wc -c journal.txt
15666 journal.txt
cat journal.txt | wc -c 
15666 
```

后者可以直接用于计算。

```
factor $(cat journal.txt | wc -c) 
```

当然 < 也可以在这里使用，而不是文件参数：

```
< journal.txt wc -c 
15666
wc -c < journal.txt
15666 
```

但谁在乎 - 15k？

如果我偶尔遇到问题，我肯定会改变我调用 cat 的习惯。

当使用非常大或很多很多文件时，避免 cat 很好。对于大多数问题，cat 的使用是正交的、离题的，不是问题。

每隔一个shell话题就开始这些无用无用的cat讨论只会令人讨厌和无聊。在处理性能问题时，获得生命并等待成名。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-09-21T06:57:09.473

我不同意大多数过分自鸣得意的 UUOC 奖的例子，因为在教别人时，`cat`它是任何命令或硬壳复杂命令管道的方便占位符，这些命令产生适合正在讨论的问题或任务的输出。

在 Stack Overflow、ServerFault、Unix 和 Linux 等站点或任何 SE 站点上尤其如此。

如果有人特别询问优化，或者如果您想添加有关它的额外信息，那么很好，谈谈使用 cat 是如何低效的。但是不要因为他们选择在他们的例子中追求简单和易于理解而不是看着我，我是多么酷！复杂。

简而言之，因为猫并不总是猫。

也因为大多数喜欢到处授予 UUOC 的人这样做是因为他们更关心炫耀自己有多“聪明”，而不是帮助或教别人。实际上，他们证明他们可能只是另一个找到一根小棍子来击败同龄人的新手。

* * *

**更新**

这是我在[https://unix.stackexchange.com/a/301194/7696](https://unix.stackexchange.com/a/301194/7696)的答案中发布的另一个 UUOC ：

```
sqlq() {
  local filter
  filter='cat'

  # very primitive, use getopts for real option handling.
  if [ "$1" == "--delete-blank-lines" ] ; then
    filter='grep -v "^$"'
    shift
  fi

  # each arg is piped into sqlplus as a separate command
  printf "%s\n" "$@" | sqlplus -S sss/eee@sid | $filter
} 
```

UUOC 学究会说这是一个 UUOC，因为很容易将`$filter`默认设置为空字符串并让`if`语句执行`filter='| grep -v "^$"'`，但是 IMO，通过不将管道字符嵌入到 中`$filter`，这种“无用”`cat`服务于自我记录事实的极其有用的目的that `$filter`on `printf`line 不仅仅是 的另一个参数`sqlplus`，它是一个可选的用户可选择的输出过滤器。

如果需要有多个可选的输出过滤器，则选项处理可以根据需要随时追加`| whatever`-`$filter`管道`cat`中的额外一个不会损害任何东西或导致任何明显的性能损失。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2012-07-29T16:27:23.927

在 UUoC 版本中，`cat`必须将文件读入内存，然后将其写入管道，并且命令必须从管道中读取数据，因此内核必须将整个文件复制*3*次，而在重定向的情况下，内核只需复制文件一次。做一件事比做三遍要快。

使用：

```
cat "$@" | command 
```

是完全不同且不一定无用的`cat`. 如果命令是接受零个或多个文件名参数并依次处理它们的标准过滤器，它仍然没有用。考虑这个`tr`命令：它是一个纯粹的过滤器，忽略或拒绝文件名参数。要将多个文件提供给它，您必须`cat`如图所示使用。（当然，有一个单独的讨论认为 的设计`tr`不是很好；没有真正的理由不能将其设计为标准过滤器。）如果您希望命令将所有输入视为单个文件而不是多个单独的文件，即使该命令会接受多个单独的文件：例如，`wc`就是这样一个命令。

这种`cat single-file`情况是无条件无用的。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-07-29T15:56:27.157

另一个问题是管道可以默默地掩盖子外壳。对于此示例，我将替换`cat`为`echo`，但存在相同的问题。

```
echo "foo" | while read line; do
    x=$line
done

echo "$x" 
```

您可能希望`x`包含`foo`，但事实并非如此。您设置的`x`子shell 是为执行`while`循环而生成的。`x`在启动管道的 shell 中有一个不相关的值，或者根本没有设置。

在 bash4 中，您可以配置一些 shell 选项，以便管道的最后一个命令与启动管道的命令在同一个 shell 中执行，但是您可以试试这个

```
echo "foo" | while read line; do
    x=$line
done | awk '...' 
```

并且`x`再次位于`while`的子shell 的本地。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2017-12-11T05:28:47.183

作为经常指出这一点和许多其他 shell 编程反模式的人，我觉得有必要，迟来的，权衡一下。

Shell 脚本在很大程度上是一种复制/粘贴语言。对于大多数编写 shell 脚本的人来说，他们并不是在学习语言；这只是他们必须克服的障碍，才能继续用他们实际上有点熟悉的语言做事。

在这种情况下，我认为传播各种 shell 脚本反模式具有破坏性，甚至可能具有破坏性。理想情况下，某人在 Stack Overflow 上找到的代码应该可以复制/粘贴到他们的环境中，而只需最少的更改和不完全理解。

在网上众多的 shell 脚本资源中，Stack Overflow 的不同寻常之处在于，用户可以通过编辑网站上的问题和答案来帮助塑造网站的质量。但是，[代码编辑可能会出现问题](https://meta.stackoverflow.com/questions/260245/when-should-i-make-edits-to-code)，因为很容易进行代码作者不希望的更改。因此，我们倾向于留下评论以建议对代码进行更改。

UUCA 和相关的反模式注释不仅适用于我们注释的代码的作者；它们同样是一个*警告购买者*，可以帮助网站的*读者*了解他们在此处找到的代码中的问题。

我们不能希望在 Stack Overflow 上没有答案推荐无用`cat`的 s（或未引用的变量，或`chmod 777`，或大量其他反模式瘟疫）的情况，但我们至少可以帮助教育即将复制的用户/将此代码粘贴到执行数百万次的脚本的最内部紧密循环中。

就技术原因而言，传统观点是我们应该尽量减少外部进程的数量；在编写 shell 脚本时，这仍然是一个很好的一般指导。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-01-05T10:19:11.000

我经常`cat file | myprogram`在例子中使用。有时我被指责无用使用猫（[http://porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)）。我不同意，原因如下：

*   很容易理解发生了什么。

    读取 UNIX 命令时，您需要一个命令后跟参数，然后是重定向。可以将重定向放在任何地方，但很少见 - 因此人们将很难阅读该示例。我相信

    ```
    cat foo | program1 -o option -b option | program2 
    ```

    比阅读更容易

    ```
    program1 -o option -b option < foo | program2 
    ```

    如果你把重定向移到开头，你会让不习惯这种语法的人感到困惑：

    ```
    < foo program1 -o option -b option | program2 
    ```

    并且示例应该易于理解。

*   很容易改变。

    如果您知道程序可以读取`cat`，您通常可以假设它可以读取任何输出到 STDOUT 的程序的输出，因此您可以根据自己的需要调整它并获得可预测的结果。

*   它强调如果 STDIN 不是文件，程序不会失败。

    假设如果`program1 < foo`有效，那么`cat foo | program1`也将有效是不安全的。但是，可以安全地假设相反。如果 STDIN 是一个文件，这个程序就可以工作，但是如果输入是一个管道，这个程序就会失败，因为它使用了 seek：

    ```
    # works
    < foo perl -e 'seek(STDIN,1,1) || die;print <STDIN>'

    # fails
    cat foo | perl -e 'seek(STDIN,1,1) || die;print <STDIN>' 
    ```

# 性能成本

做额外的`cat`. 为了了解我运行了多少测试来模拟基线 ( `cat`)、低吞吐量 ( `bzip2`)、中等吞吐量 ( `gzip`) 和高吞吐量 ( `grep`)。

```
cat $ISO | cat
< $ISO cat
cat $ISO | bzip2
< $ISO | bzip2
cat $ISO | gzip
< $ISO gzip
cat $ISO | grep no_such_string
< $ISO grep no_such_string 
```

测试在低端系统 (0.6 GHz) 和普通笔记本电脑 (2.2 GHz) 上运行。它们在每个系统上运行 10 次，并选择最佳时间来模拟每次测试的最佳情况。$ISO 是 ubuntu-11.04-desktop-i386.iso。（这里更漂亮的表格：http: [//oletange.blogspot.com/2013/10/useless-use-of-cat.html](http://oletange.blogspot.com/2013/10/useless-use-of-cat.html)）

```
CPU                       0.6 GHz ARM
Command                   cat $ISO|                        <$ISO                            Diff                             Diff (pct)
Throughput \ Time (ms)    User       Sys        Real       User       Sys        Real       User       Sys        Real       User       Sys        Real
Baseline (cat)                     55      14453      33090         23       6937      33126         32       7516        -36        239        208         99
Low (bzip2)                   1945148      16094    1973754    1941727       5664    1959982       3420      10430      13772        100        284        100
Medium (gzip)                  413914      13383     431812     407016       5477     416760       6898       7906      15052        101        244        103
High (grep no_such_string)      80656      15133      99049      79180       4336      86885       1476      10797      12164        101        349        114

CPU                       Core i7 2.2 GHz
Command                   cat $ISO|           <$ISO             Diff          Diff (pct)
Throughput \ Time (ms)    User     Sys Real   User   Sys Real   User Sys Real User       Sys Real
Baseline (cat)                    0 356    215      1  84     88    0 272  127          0 423  244
Low (bzip2)                  136184 896 136765 136728 160 137131 -545 736 -366         99 560   99
Medium (gzip)                 26564 788  26791  26332 108  26492  232 680  298        100 729  101
High (grep no_such_string)      264 392    483    216  84    304   48 308  179        122 466  158 
```

结果表明，对于中低吞吐量，成本约为 1%。这完全在测量的不确定性范围内，因此在实践中没有区别。

对于高吞吐量，差异更大，两者之间存在明显差异。

这导致了结论：您应该使用`<`而不是`cat |`if：

*   处理的复杂度类似于简单的grep
*   性能比可读性更重要。

否则无论你使用`<`还是都没有关系`cat |`。

因此，只有在以下情况下，您才应该授予 UUoC 奖：

*   您可以衡量绩效的显着差异（在颁奖时公布您的衡量标准）
*   性能比可读性更重要。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-07-29T18:38:15.257

我认为（传统方式）使用管道要快一点；在我的盒子上，我使用`strace`命令查看发生了什么：

不带管道：

```
toc@UnixServer:~$ strace wc -l < wrong_output.c
execve("/usr/bin/wc", ["wc", "-l"], [/* 18 vars */]) = 0
brk(0)                                  = 0x8b50000
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb77ad000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=29107, ...}) = 0
mmap2(NULL, 29107, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb77a5000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/i386-linux-gnu/libc.so.6", O_RDONLY) = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0p\222\1\0004\0\0\0"..., 512) = 512
fstat64(3, {st_mode=S_IFREG|0755, st_size=1552584, ...}) = 0
mmap2(NULL, 1563160, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xb7627000
mmap2(0xb779f000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x178) = 0xb779f000
mmap2(0xb77a2000, 10776, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xb77a2000
close(3)                                = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7626000
set_thread_area({entry_number:-1 -> 6, base_addr:0xb76268d0, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
mprotect(0xb779f000, 8192, PROT_READ)   = 0
mprotect(0x804f000, 4096, PROT_READ)    = 0
mprotect(0xb77ce000, 4096, PROT_READ)   = 0
munmap(0xb77a5000, 29107)               = 0
brk(0)                                  = 0x8b50000
brk(0x8b71000)                          = 0x8b71000
open("/usr/lib/locale/locale-archive", O_RDONLY|O_LARGEFILE) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=5540198, ...}) = 0
mmap2(NULL, 2097152, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb7426000
mmap2(NULL, 1507328, PROT_READ, MAP_PRIVATE, 3, 0x2a8) = 0xb72b6000
close(3)                                = 0
open("/usr/share/locale/locale.alias", O_RDONLY) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=2570, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb77ac000
read(3, "# Locale name alias data base.\n#"..., 4096) = 2570
read(3, "", 4096)                       = 0
close(3)                                = 0
munmap(0xb77ac000, 4096)                = 0
open("/usr/share/locale/fr_FR.UTF-8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/fr_FR.utf8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/fr_FR/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/fr.UTF-8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/fr.utf8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/fr/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr_FR.UTF-8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr_FR.utf8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr_FR/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr.UTF-8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr.utf8/LC_MESSAGES/coreutils.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale-langpack/fr/LC_MESSAGES/coreutils.mo", O_RDONLY) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=316721, ...}) = 0
mmap2(NULL, 316721, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb7268000
close(3)                                = 0
open("/usr/lib/i386-linux-gnu/gconv/gconv-modules.cache", O_RDONLY) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=26064, ...}) = 0
mmap2(NULL, 26064, PROT_READ, MAP_SHARED, 3, 0) = 0xb7261000
close(3)                                = 0
read(0, "#include<stdio.h>\n\nint main(int "..., 16384) = 180
read(0, "", 16384)                      = 0
fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7260000
write(1, "13\n", 313
)                     = 3
close(0)                                = 0
close(1)                                = 0
munmap(0xb7260000, 4096)                = 0
close(2)                                = 0
exit_group(0)                           = ? 
```

并使用管道：

```
toc@UnixServer:~$ strace cat wrong_output.c | wc -l
execve("/bin/cat", ["cat", "wrong_output.c"], [/* 18 vars */]) = 0
brk(0)                                  = 0xa017000
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb774b000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=29107, ...}) = 0
mmap2(NULL, 29107, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb7743000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/i386-linux-gnu/libc.so.6", O_RDONLY) = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0p\222\1\0004\0\0\0"..., 512) = 512
fstat64(3, {st_mode=S_IFREG|0755, st_size=1552584, ...}) = 0
mmap2(NULL, 1563160, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xb75c5000
mmap2(0xb773d000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x178) = 0xb773d000
mmap2(0xb7740000, 10776, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xb7740000
close(3)                                = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb75c4000
set_thread_area({entry_number:-1 -> 6, base_addr:0xb75c48d0, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
mprotect(0xb773d000, 8192, PROT_READ)   = 0
mprotect(0x8051000, 4096, PROT_READ)    = 0
mprotect(0xb776c000, 4096, PROT_READ)   = 0
munmap(0xb7743000, 29107)               = 0
brk(0)                                  = 0xa017000
brk(0xa038000)                          = 0xa038000
open("/usr/lib/locale/locale-archive", O_RDONLY|O_LARGEFILE) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=5540198, ...}) = 0
mmap2(NULL, 2097152, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb73c4000
mmap2(NULL, 1507328, PROT_READ, MAP_PRIVATE, 3, 0x2a8) = 0xb7254000
close(3)                                = 0
fstat64(1, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
open("wrong_output.c", O_RDONLY|O_LARGEFILE) = 3
fstat64(3, {st_mode=S_IFREG|0664, st_size=180, ...}) = 0
read(3, "#include<stdio.h>\n\nint main(int "..., 32768) = 180
write(1, "#include<stdio.h>\n\nint main(int "..., 180) = 180
read(3, "", 32768)                      = 0
close(3)                                = 0
close(1)                                = 0
close(2)                                = 0
exit_group(0)                           = ?
13 
```

您可以使用更多和更长的命令进行一些测试，`strace`以`time`获得良好的基准测试。

# android - android - 关于gps定位的帮助

> ID：11710553
> 
> 赞同：2
> 
> 时间：2012-07-29T15:46:09.540
> 
> 标签：android, gps

在我的 android 程序中，我在请求 gps 时设置了最短时间和最短距离。但是，只有在我开始收听时才会发生“onLocationChanged”操作。

如果我停止收听然后开始收听，它是否会将新 gps 的值与过去的 gps 值进行比较？当我开始收听时，我需要以某种方式清除它吗？

注意：测试时我在同一个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:31:50.877

以此为例：

```
LocationManager loc = (LocationManager)this.getSystemService(
    Context.LOCATION_SERVICE
);
loc.requestLocationUpdates(
    LocationManager.GPS_PROVIDER, 2000, 10, locationListener
); 
```

`onLocationChanged()`处理的- 方法将在以下`LocationListener`情况下被调用：

*   *自上次更新以来，您至少*移动了10 米
*   自上次更新以来已过去*至少*2 秒

[`requestLocationUpdates()`-method](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)的文档提供了更多信息：

> [...]**位置更新之间的经过时间永远不会*少于* ，`minTime`**尽管它可能更多取决于位置提供程序的实现和其他应用程序请求的更新间隔。
> 
> [...] 该`minDistance`参数还可用于控制位置更新的频率。**如果它大于 0，那么位置提供程序只会在位置变化*至少* `minDistance`几米*并且至少* `minTime`经过几毫秒时才向您的应用程序发送更新。**

此外，它还包含以下信息：

> **在 Jellybean 之前， minTime 参数只是一个提示**，一些位置提供程序实现忽略了它。**从 Jellybean 及以后，Android 兼容设备必须遵守 minTime 和 minDistance 参数。**

这只是一种节省电池的机制，您不必自己做任何事情，然后为这两个参数选择适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:59:00.963

使用 getLastKnownLocation 来使用最后一个已知位置。

# java - 使用 Maven 和 GeoTools 构建问题 (com.sun.javadoc)

> ID：11710554
> 
> 赞同：2
> 
> 时间：2012-07-29T15:46:28.943
> 
> 标签：java, maven, geotools

我正在尝试使用 Maven 3.0.4 构建 GeoTools 8.0-RC2（本身，而不是教程项目等）。当我`mvn install`在根 pom 上运行时，它似乎工作正常，直到出现有关`com.sun.javadoc`并`com.sun.tools.doclets`发生构建错误。

完整的错误跟踪如下：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project javadoc: Compilation failure: Compilation failure:
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[22,22] error: package com.sun.javadoc does not exist
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[23,28] error: package com.sun.tools.doclets does not exist
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[33,37] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[40,50] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[160,33] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[171,33] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[20,22] error: package com.sun.javadoc does not exist
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[21,28] error: package com.sun.tools.doclets does not exist
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[32,39] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[38,49] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[130,33] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[141,33] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Source.java:[161,28] error: cannot find symbol
[ERROR] \GeoTools\GIT\build\maven\javadoc\src\main\java\org\geotools\maven\taglet\Tutorial.java:[131,28] error: cannot find symbol
```

不幸的是，我没有通过 Google 找到解决方案，但查看`lib\tools.jar`了我的 JDK 1.7.0 u5 并发现那里缺少的包。依赖的 pom`tools.jar`是`build\maven\javadoc\pom.xml`. 有两种配置文件，一种用于 SUN JDK，另一种用于 IBM JDK：

```
<profile>
    <id>default-tools.jar</id>
    <activation>
        <property>
            <name>java.vendor</name>
            <value>Sun Microsystems Inc.</value>
        </property>
    </activation>
    <dependencies>
        <dependency>
            <groupId>com.sun</groupId>
            <artifactId>tools</artifactId>
            <version>1.5</version>
            <scope>system</scope>
            <systemPath>${java.home}/../lib/tools.jar</systemPath>
  <!-- Note: a ${tools.jar} variable exists - we should try to use it. -->
        </dependency>
    </dependencies>
</profile> 
```

我在 Windows 7 x64 上，我`%JAVA_HOME%`的设置为`C:\Program Files\Java\jdk1.7.0_05`. 我试着弄乱它，但没有运气。错误仍然存​​在。可能`Sun Microsystems Inc.`是因为现在它来自 Oracle 还是`<version>1.5</version>`因为我安装了 1.7 版？

如果有人可以在这里帮助我，那就太好了！

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:26:38.530

这可能会有所帮助。而不是甲骨文尝试甲骨文公司。 [http://sunnytalkstech.blogspot.in/2011/08/maven-dependency-for-toolsjar-in-jdk7.html](http://sunnytalkstech.blogspot.in/2011/08/maven-dependency-for-toolsjar-in-jdk7.html)

# c# - 使用在 Threadpool 线程上创建的 BitmapImage

> ID：11710560
> 
> 赞同：2
> 
> 时间：2012-07-29T15:47:55.100
> 
> 标签：c#, wpf, multithreading

尝试使用在 ThreadPool 线程上创建的 BitmapImage 实例设置图像时，出现“无效的跨线程访问”异常。

事实证明，为了避免这种情况，我必须在 UI 线程上创建 BitmapImage 实例。但是生成 BitmapImage 非常耗时（需要 100 毫秒甚至更长的时间，这里它是从文件中加载的，只是为了演示），这就是为什么我想在 ThreadPool 线程上进行。

如果我在 UI 线程上实例化 BitmapImage 实例，并将引用传递给 ThreadPool 线程来操作它（如设置像素），我必须将其编组回 UI 线程以访问 BitmapImage，这将冻结 UI 线程并且正是我想要避免的。

建议？

```
 private void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        ThreadPool.QueueUserWorkItem((o) =>
        {
            var bitmapImage = new BitmapImage(new Uri("default.jpg", UriKind.Relative));
            TryToSetImage(bitmapImage);
        });
    }

    private void TryToSetImage(object obj)
    {
        if (this.Dispatcher.CheckAccess())
        {
            //Exception: The calling thread cannot access this object because a different thread owns it.
            image1.Source = obj as BitmapImage; 
        }
        else
        {
            this.Dispatcher.Invoke(new WaitCallback(TryToSetImage),
                System.Windows.Threading.DispatcherPriority.Render,
                obj);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:50:41.140

[`Freeze`](http://msdn.microsoft.com/en-us/library/ms557735.aspx)在创建它以使其他线程可以访问它之后，您需要它。

# c++ - C++ - 类方法/空隙的实现

> ID：11710564
> 
> 赞同：0
> 
> 时间：2012-07-29T15:48:14.590
> 
> 标签：c++, class, methods, void

我目前正在学习用 C++ 创建图形应用程序/游戏的 SDL，并且对如何在类中创建和使用 void 有一些疑问。

对于我目前的项目，我正在创建一个非常基本的乒乓球游戏，并希望创建一个类，它不仅包含有关对象位置、加载的位图和其他变量的信息，而且还包含一个涵盖 AI/运动引擎和另一个用于渲染。

我想对其进行编码，以便我可以像这样格式化我的代码：（下面的所有代码都是伪代码，只代表我想要实现的结构）

```
class Object
{
    private int stuff;
    private void manageStuff();
}

void Object::manageStuff()
{
    stuff++;
}

Object object = new Object();

object.stuff = 0;

for (int i = 0; i < 10, i++)
{
    object.manageStuff();
    cout << object.stuff;
} 
```

在 C++ 中是否有任何明显的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:53:38.717

我认为您正在寻找构造函数和初始化器列表。您展示的示例中还有许多其他问题，我已经修复并在适当的位置发表了评论。也许：

```
#include <iostream>

class Object
{
// Note: access modifier written like this:
public:
    int stuff;
    void manageStuff();
    Object(); // Constructor which takes no arguments
}; // note semicolon

void Object::manageStuff()
{
    stuff++;
}

Object::Object() : stuff(0) {
  // sets stuff to 0 upon initalization.  
  // could also have written:
  // stuff=0;
  // but in this case initalization is nicer.
}

Object object; // no need for new here

// initial value of stuff set via constructor now,
// you can't just write random statements anywhere

int main() {
  for (int i = 0; i < 10; i++) // note semicolon not comma
  {
      // if these were private this would fail:
      object.manageStuff();
      std::cout << object.stuff << "\n"; 
  }
} 
```

更像你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:57:06.203

不，如果你想使用 C++，你必须真正学习 C++。这至少涉及到学习 C++ 的语法。试图强迫它模仿另一种语言的语法是不可能的或有益的。

# maven - 使用 Maven 管理开源许可证

> ID：11710565
> 
> 赞同：2
> 
> 时间：2012-07-29T15:48:25.927
> 
> 标签：maven, open-source

任何项目通常都会使用多个开源 JAR。我的问题是，使用 Maven 组织部署中的所有许可证文件的最佳做法是什么？

例如，是否假设将许可证合并到一个超级许可证文件中/在每个文件的标题中单独提及/包含在每个 jar 的单独许可证中等。

当谈到开源许可证以及我应该如何使用它们时，我是一个新手。希望能在这方面提供一些帮助和指导。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:22:50.687

项目通常使用几个不同的 jar，这些 jar 通常具有某种开源许可证。但这取决于项目。此外，项目中使用的许可证的排序等取决于相应许可证的要求。一些许可证需要在项目本身中提及，其他许可证也允许在商业项目中使用。

您必须遵循的解决方案取决于许可证。包含所有不同许可证的单个文件。这可以通过使用[license-maven-plugin](http://mojo.codehaus.org/license-maven-plugin/)来实现。

# macos - OS X 10.8 - 尝试执行 '/usr/bin/i686-apple-darwin11-gcc-4.2.1' 时出错 - 安装 json gem

> ID：11710568
> 
> 赞同：14
> 
> 时间：2012-07-29T15:48:31.900
> 
> 标签：macos, gcc, rubygems

我刚刚升级到 OS X Mountain Lion（已经后悔了）。

安装 json gem 的本机扩展时遇到问题。

在 10.8 之前，我安装了命令行工具。带有 Ruby 1.9.2 的 RVM。

升级到 10.8 并做了以下事情：

*   sudo chown -R `whoami`/usr/local
*   酿造更新
*   brew tap homebrew/dupes
*   酿造安装苹果-gcc42
*   安装 XCode 4.4
*   为 XCode 4.4 安装的命令行工具
*   在 bash_profile 中导出 CC=/usr/local/bin/gcc-4.2
*   sudo ln -s /usr/local/bin/gcc-4.2 /usr/bin/gcc-4.2
*   编辑：sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer

安装 json gem 时，我仍然得到以下输出：

```
➽ gem install json -v '1.7.4'
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

        /Users/vincent/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb
creating Makefile

make
/usr/bin/gcc-4.2 -I. -I/Users/vincent/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/x86_64-darwin11.3.0 -I/Users/vincent/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1/ruby/backward -I/Users/vincent/.rvm/rubies/ruby-1.9.2-p320/include/ruby-1.9.1 -I. -DJSON_GENERATOR -I/Users/vincent/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -fno-common -pipe -O3 -Wall -O0 -ggdb  -o generator.o -c generator.c
gcc-4.2: error trying to exec '/usr/bin/i686-apple-darwin11-gcc-4.2.1': execvp: No such file or directory
make: *** [generator.o] Error 255

Gem files will remain installed in /Users/vincent/.rvm/gems/ruby-1.9.2-p320@hshmrk/gems/json-1.7.4 for inspection.
Results logged to /Users/vincent/.rvm/gems/ruby-1.9.2-p320@hshmrk/gems/json-1.7.4/ext/json/ext/generator/gem_make.out 
```

这里有什么帮助吗？如何调试我的构建环境？在这方面不是专家，但我认为 json gem 安装程序忽略了我的环境，因为它使用的 GCC 版本在我的系统上不存在，而且 brew 安装程序也没有创建它。

```
➽ gcc-4.2
i686-apple-darwin11-gcc-4.2.1: no input files

➽ which gcc-4.2
/usr/local/bin/gcc-4.2

➽ ls /usr/bin/i686-apple-darwin11-gcc-4.2.1
ls: /usr/bin/i686-apple-darwin11-gcc-4.2.1: No such file or directory 
```

我也尝试了符号链接`➽ sudo link /usr/local/bin/gcc-4.2 /usr/bin/i686-apple-darwin11-gcc-4.2.1`。但这给出了 vfork 超时错误。

编辑：

```
➽ brew doctor
gcc-4.2: error trying to exec '/usr/bin/i686-apple-darwin11-gcc-4.2.1': execvp: No such file or directory
Warning: X11 is not installed.
You don't have X11 installed as part of your OS X installation.
This is not required for all formulae, but is expected by some.
You can download the latest version of XQuartz from:
  https://xquartz.macosforge.org 
```

编辑2：

确实运行了 xcode-select XCode

编辑3：

```
sudo xcode-select -switch /usr/bin
sudo ln -sf /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

这解决了它！基本上，您告诉 OS X 使用 /usr/bin 文件夹进行编译，然后将 llvm-gcc-4.2 编译器链接到旧编译器所在的位置。作品！砰！

来源：http: [//jtimberman.housepub.org/blog/2012/02/26/xcode-command-line-tools/](http://jtimberman.housepub.org/blog/2012/02/26/xcode-command-line-tools/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-29T17:45:06.697

我的印象是，您需要做的就是：

```
sudo ln -sf /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

我尝试使用 xcode-select XCode 和命令行工具。他们都工作。我还卸载了 brew apple-gcc42，它仍然有效。也不需要导出 CC。

所以基本上只是链接。希望这能解决人们遇到的一些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:24:37.047

你跑了吗：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

让您的系统使用 Xcode 提供的命令行工具？

在这个[SO 答案](https://stackoverflow.com/questions/9904326/warning-the-command-line-tools-for-xcode-dont-appear-to-be-installed-most-por/9904403#9904403)中多一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T19:21:07.703

```
sudo xcode-select -switch /usr/bin
sudo ln -sf /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T17:27:34.860

更简单的方法..我只是通过编辑 rbconfig.rb 文件解决了根本问题 ~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/x86_64-darwin12.2.0

出于某种原因，该文件被设置为使用 gcc-4.2 进行 CC 而不是仅计划 gcc（即 llvm-gcc-4.2）。

# java - 无法找到语法错 误的原因

> ID：11710569
> 
> 赞同：2
> 
> 时间：2012-07-29T15:49:13.903
> 
> 标签：java

我是 Java 新手并编写了简单的代码：

```
1 package Rndom;
2 class Clmm{
3   
4 }
5 public class Clkk {
6  
7   Clmm klm;
8   klm = new Clmm();
9
10 } 
```

Eclipse 显示错误：

```
syntax error on token ";" , , expected on line 7 
```

我试图找出显示此错误的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:51:19.000

把这些线

```
 Clmm klm;
 klm = new Clmm(); 
```

在下面

公共静态无效主要例如

```
public static void main(String [] args)
{
 Clmm klm;
klm = new Clmm();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:50:40.033

让它`Clmm klm = new Clmm();`像

```
public class Clkk {

   private Clmm klm = new Clmm();

   // getter setter for klm
} 
```

或在构造函数中实例化`klm`，如：

```
public class Clkk {

   private Clmm klm;
   public Clkk() {
       klm = new Clmm();
   }
   // getter setter for klm
} 
```

或者你可以有块

```
public class Clkk {

   private Clmm klm;

   { // this is called block and this is equivalent to constructor. But you can not pass arguments to block. Prefer constructors.
       klm = new Clmm();
   }
   // getter setter for klm
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T15:52:55.770

您不能将语句放在类定义中的方法或构造函数之外：

```
klm = new Clmm(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T16:36:23.253

您可以在减速期间在方法之外初始化变量。这就是为什么

```
private Clmm klm = new Clmm(); //deceleration and initialization 
```

为你工作。但是，一旦它被声明（并初始化，即使它是默认值），您只能在方法或块内更改它的值。这就是为什么以下代码不适合您的原因：

```
Clmm klm; // deceleration and initialization to default value  
klm = new Clmm(); //assignment, which is a statement that cannot be outside of a block/method 
```

# php - 使用 SQL 连接表关系

> ID：11710570
> 
> 赞同：0
> 
> 时间：2012-07-29T15:49:17.803
> 
> 标签：php, mysql, php-5.3

我试图创建一个 facebook 风格的新闻提要，在其中显示来自您的朋友和您自己的内容。目前我真的很挣扎，不确定是否做得对。

我有一个名为 user_followers 的表

```
CREATE TABLE IF NOT EXISTS `user_Followers` (
  `user_follower_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `follower_id` int(11) NOT NULL,
  `date_followed` datetime NOT NULL,
  PRIMARY KEY (`user_follower_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

另一个叫做 usersActivity

```
CREATE TABLE IF NOT EXISTS `usersActivity` (
  `activity_id` int(11) NOT NULL AUTO_INCREMENT,
  `activity_identifier` enum('1','2','3') NOT NULL,
  `user_identifier` int(11) NOT NULL,
  `row_id` int(11) NOT NULL,
  `timestamp` datetime NOT NULL,
  PRIMARY KEY (`activity_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=24 ; 
```

user_id 存储用户的id，与另一个用户成为朋友/关注另一个用户，follower_id 是被关注的人的id

我想要做的是获取成员 1 关注的所有用户的 follower_id，然后获取他们的活动加上成员 1 的活动并将其显示在页面上。通过检查 user_identifier 是成员 1 还是他/她关注的人。

到目前为止，这是我得到的：

```
// Fetch userActivity data
$activites = mysql_query("
  SELECT 
    a.activity_id, 
    a.row_id, 
    a.activity_identifier, 
    b.follower_id
  FROM usersActivity a INNER JOIN user_Followers b ON a.user_identifier = b.follower_id
  WHERE a.user_identifier=b.follower_id
  ORDER BY activity_id DESC 
  LIMIT 0,20"); 
```

我希望你能明白我上面写的。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:10:01.560

在您的 sql 查询中，您编写了 'user_Followes' 而不是 'user_Followers'

这是sql查询中的错字吗？

并尝试使用 AS 为您的表添加别名

```
SELECT a.activity_id FROM usersActivity AS a 
```

# c++ - 二维可变大小数组c ++

> ID：11710572
> 
> 赞同：1
> 
> 时间：2012-07-29T15:49:30.570
> 
> 标签：c++, arrays

我想熟悉 C++ 中的 2D 可变大小数组，所以我写了一个小程序，但它不起作用。这是代码：

```
#include <iostream>

using namespace std;

int main(){
int a,i;
cin>>a; //the width of the array is variable
int **p2darray;
p2darray = new int*[2]; //the height is 2
for (i = 0; i < 2; i++){
    p2darray[i] = new int[a];
}
i=0;
while(i!=a){
    p2darray[0][i]=i; //filling some numbers in the array
    p2darray[1][i]=2*i;
    i++;
}
i=0;
while(i!=a){
    cout<<p2darray[0][i]<<endl;
    cout<<p2darray[1][i]<<endl;
    i++;
}
return 0;
} 
```

那么为什么它不起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:53:43.460

主要问题是，当您说 时`p2darray[i][0]`，您的索引是向后的，因为您将第二个维度设置为用户输入的大小，但是您将第一个维度增加到该数字。这通常会导致段错误。应该是`p2darray[0][i]`所有四种情况。在进入打印循环之前，您也没有设置`i`回 0，因此它跳过了整个打印过程。

有关说明上述更正的运行程序，[请参见此处](http://ideone.com/K5QsO)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:53:00.157

你忘了重置`i`。

```
i=0;
while(i!=a){
    p2darray[i][0]=i; //filling some numbers in the array
    p2darray[i][1]=2*i;
    i++;
}
// Now i == a, so the next loop doesn't run
while(i!=a){
    cout<<p2darray[i][0]<<endl;
    cout<<p2darray[i][1]<<endl;
    i++;
} 
```

`i = 0;`在两个循环之间插入。

此外，您的索引顺序错误，第一个索引只能取值 0 和 1，否则您访问分配区域之外的内存。

```
i=0;
while(i!=a){
    p2darray[0][i]=i; //filling some numbers in the array
    p2darray[1][i]=2*i;
    i++;
}
i = 0;
while(i!=a){
    cout<<p2darray[0][i]<<endl;
    cout<<p2darray[1][i]<<endl;
    i++;
} 
```

是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:13:59.297

为什么不将二维数组放入函数中。

```
#include <iostream>

using namespace std;

int** CreateArray(int valuea, int valueb)
{
     int** array;
     array = new int *[valuea];
     for(int i =0;i< row;i++)
     {
         array[i] = new int [valueb];
     }
     return array;
} 
```

那你一定不要忘记归还记忆。

```
int main(){
int a;
int i = 0;

cin>>a;
int** array = CreateArray(a,i);

while(i!=a){
  array[i][0]=i;
  array[i][1]=2*i;
  i++;
}
i=0;
    while(i!=a){
      cout<<array[i][0]<<endl;
      cout<<array[i][1]<<endl;
      i++;
 }
return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T07:58:01.230

C ++中的二维可变大小数组

```
 #include <bits/stdc++.h>
 using namespace std;

 int main(){

int row,col,i,j;
cin>>row;                    //no. of rows
string col_size;             //mapping index to no.of columns     

vector<vector<int> >Arr(row);

for(i=0; i<row ; i++){
  cin>>col;
  col_size.push_back(col);    // no. of columns at ith row 
  Arr[i]=vector<int>(col);
       for(j=0 ; j < col_size[i] ; j++)
             cin>>Arr[i][j];
}

                      //printing the 2D Array

for(i=0; i<row ; i++){
       for(j=0 ; j<col_size[i] ;j++){
              cout<<Arr[i][j]<<" ";
   }
    cout<<"\n";
   }
  return 0;
} 
```

# php - 为什么 PHP Simple HTML DOM Parser 找不到元素？

> ID：11710577
> 
> 赞同：0
> 
> 时间：2012-07-29T15:50:06.213
> 
> 标签：php, html, parsing, dom

我正在使用带有以下代码片段的 PHP Simple HTML DOM Parser：

```
<?php
include_once('../simple_html_dom.php');

$html = file_get_html('http://old.wowhead.com/npc=8404');

if ( $html->find('div.pin'))
echo 'Found';

?> 
```

但它根本找不到

```
'<div class="pin" style="left: 17.7%; top: 60.8%; "><a href="javascript:;"     style="cursor: default; "></a></div>' 
```

此 html 页面上的元素：http: [//old.wowhead.com/npc=8404](http://old.wowhead.com/npc=8404)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:02:27.527

我认为`div`带有类的元素是`pin`由 JavaScript 出现的，所以当你只下载静态 html 文件时没有这样的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:58:07.747

我打开了您提供的链接，没有带有“pin”类的 div。您必须为该方法提供一个有效的元素对象。

尝试更改选择器说

```
$html->find('div.pad1'); 
```

它有效......在我的情况下

# php - 更改配置文件夹中的 routes.php 后，如何修复这些 php 错误？

> ID：11710584
> 
> 赞同：0
> 
> 时间：2012-07-29T15:51:38.550
> 
> 标签：php, codeigniter, codeigniter-2

我正在努力使我的路线文件从数据库中动态更新。不幸的是，我狡猾的计划引起了一些问题。

我将此行添加到配置文件中 routes.php 的末尾：

```
include_once APPPATH . "cache/routes.php"; 
```

缓存文件夹中的 routes.php 文件会自动更新，这很好。目前，它看起来像这样：

```
$route["index"] = "pages/index/1"; 
```

$route["关于我们/subpagetest"] = "pages/index/4"; $route["关于我们"] = "pages/index/3";

问题是，我在每一页的顶部都收到了这些错误：

> > 遇到 PHP 错误 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /home/jshultz/public_html/application/cache/routes.php:3）
> 
> 文件名：core/Security.php
> 
> 行号：188
> 
> 遇到 PHP 错误 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /home/jshultz/public_html/application/cache/routes.php:3）
> 
> 文件名：库/Session.php
> 
> 行号：672

我想可能是权限错误，但我不知道？我已经尝试更改文件的权限，但这并没有改变任何东西。有任何想法吗？

编辑：

好的，所以应用程序/缓存文件夹中的routes.php需要有开头

这是在缓存文件夹中创建 routes.php 文件的更正代码：

```
public function save_routes()
        {

            // this simply returns all the pages from my database
            $routes = $this->Pages_model->get_all($this->siteid);

            // write out the PHP array to the file with help from the file helper
            if ( !empty( $routes ) )
            {
                // for every page in the database, get the route using the recursive function - _get_route()
                foreach( $routes->result_array() as $route )
                {
                    $data[] = '$route["' . $this->_get_route($route['pageid']) . '"] = "' . "pages/index/{$route['pageid']}" . '";';
                }

                $output = "<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n";

                $output .= implode("\n", $data);

                $this->load->helper('file');
                write_file(APPPATH . "cache/routes.php", $output);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:15:44.653

您可能需要`<?php`在文件开头添加并`Byte Order Mark`从中删除

```
/home/jshultz/public_html/application/cache/routes.php 
```

并且不要在该文件中使用 PHP 结束标记**?> 。**使用**?>**将强制解释器将标记后的字符视为文本输出。

# php - 在 JSON 上组合从 foreach 获得的数组

> ID：11710586
> 
> 赞同：0
> 
> 时间：2012-07-29T15:51:53.930
> 
> 标签：php, arrays, json

```
$data = json_decode($data, true); 
```

此 $data 变量上的 php foreach 循环

```
foreach($data as $names) {
  echo '<pre>';
  print_r($names);
  echo '</pre>';
} 
```

带回两个类似于我在下面生成的示例的多维数组

```
Array
(
 [0] => Array
    (
        [@attributes] => Array
            (
                [name] => responseHeader
            )

        [int] => Array
            (
                [0] => 0
                [1] => 1
            )

        [lst] => Array
            (
                [@attributes] => Array
                    (
                        [name] => params
                    )

                [str] => Array
                    (
                        [0] => Array
                            (
                                [@attributes] => Array
                                    (
                                        [name] => explainOther
                                    )

                            )

                        [1] => 0
                        [2] => on
                        [3] => content
                        [4] => Array
                            (
                                [@attributes] => Array
                                    (
                                        [name] => wt
                                    )

                            )

                        [5] => on
                        [6] => 2.2
                        [7] => 1000
                        [8] => *,score
                        [9] => on
                        [10] => 0
                        [11] => content
                        [12] => Array
                            (
                                [@attributes] => Array
                                    (
                                        [name] => fq
                                    )

                            )

                    )

            )

    )

[1] => Array
    (
        [@attributes] => Array
            (
                [name] => highlighting
            )

        [lst] => Array
            (
                [@attributes] => Array
                    (
                        [name] => 18900
                    )

                [arr] => Array
                    (
                        [@attributes] => Array
                            (
                                [name] => content
                            )

                        [str] => A paragraph of text right here number 1.
                    )

    )

)

Array
(
[@attributes] => Array
    (
        [name] => response
        [numFound] => 1
        [start] => 0
        [maxScore] => 0.4654925
    )

[doc] => Array
    (
        [float] => 0.4654925
        [str] => Array
            (
                [0] => nal
                [1] => another paragraph text 4
                [2] => 18900
                [3] => ma
                [4] => ran
                [5] => 5
                [6] => 18
            )

    ) 
```

)

我想将它们组合成一个数组，我怎样才能使用 php 做到这一点，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:57:48.670

你见过[array_merge](http://php.net/array_merge)吗？

```
$output = array();
foreach($data as $names) {
    $output = array_merge($output, $names);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:58:09.327

使用`array_merge()`php函数。类型转换，`(array) $array_from_json_decode`因为有时您最终会使用 stdClass 而不是数组。

# java - 删除数组列表元素

> ID：11710588
> 
> 赞同：0
> 
> 时间：2012-07-29T15:52:06.210
> 
> 标签：java, arraylist

我有两个arraylist fileWordList 和stopWordList。我想将 fileWordList 与 stopWordList 进行比较，并从 fileWordList 中删除任何相同的单词。我的代码如下：

```
ArrayList<String> fileWordList = new ArrayList<String>();
ArrayList<String> stopWordList = new ArrayList<String>();

for (Iterator<String> i = fileWordList.iterator(); i.hasNext(); ) {

    for(Iterator<String> j = stopWordList.iterator(); j.hasNext();){
        if (j.next() == i.next()){
           i.remove();
        }
    }

} 
```

错误是由：java.util.NoSuchElementException 引起的。如何解决这个问题？代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:56:51.350

你打电话的`i.next()`次数太多了。您应该在外循环的每次迭代中调用一次并记住结果。

```
for (Iterator<String> i = fileWordList.iterator(); i.hasNext(); ) {
    String s = i.next();
    for(Iterator<String> j = stopWordList.iterator(); j.hasNext();){
        if (j.next() == s){ // consider using equals here
           i.remove();
           break; // No need to continue checking.
        }
    }

} 
```

我怀疑你想用来`j.next().equals(s)`比较两个字符串是否相等。

您可能还想考虑使用`ArrayList.contains`. 或者使用 a[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)来存储停用词，因为您可能不关心它们的存储顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:15:30.420

为什么不使用 ArrayList`contains()`方法而不是嵌套循环？

```
for (Iterator<String> i = fileWordList.iterator(); i.hasNext(); ) {

    String word = i.next();

    // Only removes first occurence.
    if (stopWordList.contains(word)) {
        i.remove();
    }
}

// Better and simpler solution
for (String word : stopWordList) {
    while(fileWordList.contains(word)) {
        fileWordList.remove(word);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:19:10.790

```
for(String word : stopWordList) 
    if(fileWordList.contains(word)) 
        fileWordList.remove(word) 
```

# xcode - 如何在 Xcode 中更改目标？

> ID：11710594
> 
> 赞同：2
> 
> 时间：2012-07-29T15:53:11.873
> 
> 标签：xcode, target

我从 github 下载了一个项目，它包含 2 个目标、一个库和一个测试可执行文件。

我怀疑它的当前目标设置为库，因为 Xcode 的构建和运行被禁用。（我只能构建）

如何将目标更改为测试可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:43:36.290

只需单击“停止”按钮旁边的弹出窗口即可选择活动目标。

# bash - 这个 bash 片段在做什么？PHP/perl 等价物？

> ID：11710595
> 
> 赞同：1
> 
> 时间：2012-07-29T15:53:15.470
> 
> 标签：bash

我试图了解这段代码片段在做什么。这是我不太明白的 bash 语法。

```
# Static function
get_ofuscated_link() {
local VAR=$1
local I N C R

I=0
N=${#VAR}
while (( I < N )); do
    C=$((16#${VAR:$I:2} + 0x18))
    R="$R"$(printf \\$(($C/64*100+$C%64/8*10+$C%8)))
    (( I += 2 ))
done
echo "$R"
} 
```

由这个命令调用

```
JS_VAR=$(echo "$PAGE" |  parse 'function[[:space:]]*_' '"\([^"]\+\)";' 1) || return
FILE_URL=$(get_ofuscated_link "$JS_VAR" | parse_attr href) || return 
```

只是想知道冒号在该`C=$`行内的作用以及 R= 行的含义。

在 bash 中也确实`function[[:space:]]*_`具有特定含义，或者只是它正在查看的直字符串。

源文件来自[犁头](http://code.google.com/p/plowshare/source/browse/src/modules/mediafire.sh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:18:33.423

冒号是`${parameter:offset:length}`符号的一部分，bash 的子字符串函数版本。`${VAR:$I:2}`将转换为 perl 为`substr($VAR, $I, 2)`. 整个`C=`赋值相当于

```
$C = hex(substr($VAR, $I, 2) + 0x18); 
```

`$VAR`一串十六进制数字也是如此，循环一次取两个，添加幻数 0x18，并将其存储到 $C 中。

这`R=`条线很简单。首先，它的顶层结构是：

```
R="$R"stuff 
```

它只是将一些东西附加到 string `$R`。现在让我们看看这些东西。它的核心是：

```
$(($C/64*100+$C%64/8*10+$C%8))) 
```

这在 perl 中是完全一样的，没有它`$((...))`周围的。美元符号双括号是 shell 的“算术扩展”运算符。如果您研究该公式，您会发现它转换`$C`为三位八进制数（数字为`$C/64`、`$C%64/8`和`$C%8`），然后将其转换为具有相同三位数字的十进制数。所以这只是一种将数字输入`$C`并打印为八进制的奇怪方式。

现在我们已经解决了，附加的东西`$R`是：

```
$(printf \\000) 
```

其中八进制数字替换 000。这相当于 perl 的`chr(oct("000"))`.

因此`$R`，它被构建为一个字符串，输入中的每对十六进制数字都有一个字符`$VAR`，它表示一串字符代码，通过从它们中减去 0x18 来混淆，并且此函数将 0x18 重新添加。

`[[:space:]]`运算符是正则表达式的一部分。它是一个 POSIX 等价于 perl 的`\s`运算符，可以匹配各种空格。我们必须查看您的`parse`命令或函数才能确定，但​​看起来正则表达式与在 javascript 源文件中查找函数定义有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:12:58.770

在 bash 中，您可以选择参数的子字符串：

```
x=hello
y=${x:2:2}   # y = ll 
```

while 循环正在迭代`VAR`. 在算术扩展构造`$(( ... ))`中，“16#string”是被`string`视为以 16 为基数的符号。

R 行执行一些算术运算`C`并将结果附加到 的前一个值`R`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T16:15:45.680

顾名思义，它将 URL 转换为混淆符号（尽管名称中有错字，进一步混淆了所有内容）。

```
for (i = 0; i < length(url); i += 2)
{
     c = hex value of two characters of URL + 0x18
     r += character c interpreted as octal
} 
```

因此，给定`1234`，输出为`*L`。来自`*`0x12 + 0x18 = 0x2A = 42 [10] = 052 = ' `*`'。'L' 来自 0x34 + 0x18 = 0x4C = 76 [10] = 0114 = ' `L`'。

# c++ - 在 Qt 中读取具有多个不同流的同一文件

> ID：11710598
> 
> 赞同：3
> 
> 时间：2012-07-29T15:53:26.470
> 
> 标签：c++, qt, qt4, stream

是否可以使用 Qt 使用多个流读取文件以同时访问其中的不同数据部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:00:16.470

请注意，Qt 中的流（QTextStream / QDataStream）不处理底层设备中的位置。流类只是一个包装器，用于更轻松地解析设备内的二进制数据（QFile 实例）。

因此，同一设备（QFile）的两个流将不起作用。

但是，您可以为同一个底层文件拥有**多个设备**(QFile)，然后可以使用另一个流实例读取每个设备。

# php - 在同一页面上显示不同的内容

> ID：11710599
> 
> 赞同：-1
> 
> 时间：2012-07-29T15:53:29.003
> 
> 标签：php, html, wordpress

我试图在带有链接示例的 1 页中显示不同的结果。我有 4 个项目 - example1、example2、example3、example4 每个示例都有 3 或 4 页信息，具体取决于类型。

所以如果想查看 example3 type3 的信息，我会在 Example3 页面上获得该信息

我不想只为 4 个项目制作 30 页，我希望我的菜单看起来像

主要项目示例

子项目 Example1、Example2、Example3、Example4

然后将链接放在每个子页面中，操作如下： **php?example=1&type=1 show example1 type1 else if example=1&type=2 show example1 type2 else if example=2&type=1 show example2 type1 等等~**

如果有人可以给我一个如何做到这一点的例子，我会很高兴。

如果它可能与 Wordpress-plugin 或任何其他方式我想听到它。

编辑：这就是我尝试过的方法并且它有效，但我不知道操作是否适合与我在网上阅读的 Wordpress 网站一起使用，人们说这不是一个好的选择。

```
<?php
    $Example= $_GET['example'];
    if ($Example== 'example1')
    {
    echo "Hello example1";
    }
    if ($Example== 'example2')
    {
    echo "Hello example2";
    }
    if ($Example== 'example3')
    {
    echo "Hello example3";
    }
    if ($Example== 'example4')
    {
    echo "Hello example4";
    }           
</php> 
```

对不起，如果我犯了任何错字

在此先感谢，贾维多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:56:35.997

您将不得不使用自定义查询来检索取决于 url 查询字符串的信息。使用类别对帖子进行分组。例如，属于 example1 类别的帖子可以通过使用在页面上检索

```
 <?php

// The Query
$the_query = new WP_Query( 'category_name=example1' );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Post Data
wp_reset_postdata();

?> 
```

您可能需要浏览 Wp_Query [http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)的文档。

如果要获取单个页面的信息，请使用 get_post。

# jquery - 将内联 jQuery 与 Handlebars.js 模板一起使用？

> ID：11710608
> 
> 赞同：0
> 
> 时间：2012-07-29T15:55:02.497
> 
> 标签：jquery, handlebars.js, sammy.js

我正在使用 Sammy.js 来处理路由/应用程序逻辑，并使用 Handlebars.js 来进行模板化。我想设置一些简单的 jQuery 事件来使 UI 动态化（切换元素等）。例如：

```
$("#availability").click( function(e) {
    console.log("hi2");
    e.preventDefault();
}); 
```

目前，我可以通过将 jQuery 事件放在 Sammy.js 应用程序中来做到这一点，但这感觉非常混乱：

```
this.get('#q=:query', function(context) {
    var query = context.params.query,
    loadOptions =   {
                      type: 'get', 
                      dataType: 'json',
                      data: {query: query},
                      cache: CACHE_ENABLED
                    };

    context.load("search.php", loadOptions)
            .then(function(products) {
                 context.query = query;
                 context.products = products.hits.hits;                         
                 return context;
            })
            .partial('/js/templates/search.hb')
            .replace('body')
            .then( function () {
                $("#availability").click( function(e) {
                    console.log("hi2");
                    e.preventDefault();
                });
            });
}); 
```

有没有办法在 Handlebars 模板本身或使用 Helper 初始化这些类型的 jQuery 事件？我尝试注册一些自定义助手，但这些事件从未被触发。

我想将“UI Logic”与主应用程序逻辑分开，因为它会使我的主要 Sammy.js 代码变得混乱并且难以阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:06:24.157

仍然没有找到在 Handlebars 模板中包含内联 jQuery 的方法，但我找到了将其包含在 Sammy 应用程序中的更好方法。我已将代码删除到 Sammy Helper 并调用它，这有助于整理应用程序的主要部分。

```
var app = Sammy("body", function() {

    this.use('Handlebars', 'hb');

    this.helpers({
         jq_clickEvents: function() {
             $("#availability").click( function(e) {
                    console.log("hi2");
                    e.preventDefault();
              });

         }
    });

    this.get('#q=:query', function(context) {
        var query = context.params.query,
        loadOptions =   {
                  type: 'get', 
                  dataType: 'json',
                  data: {query: query},
                  cache: CACHE_ENABLED
                };

         context.load("search.php", loadOptions)
                .then(function(products) {
                    context.query = query;
                    context.products = products.hits.hits;                         
                    return context;
                 })
                .partial('/js/templates/search.hb')
                .replace('body')
                .then('jq_clickEvents');
     });
}); 
```

# javascript - 如何使用 JavaScript 隐藏和显示 div 的所有内容？

> ID：11710615
> 
> 赞同：1
> 
> 时间：2012-07-29T15:56:00.763
> 
> 标签：javascript

例如，div 包含：

```
 <div id="choices">
            <ul>
                <li><button onclick="Correct('incorrect, try again!')">simple, easy</button></li>
                <li><button onclick="Correct('Correct! Congratulations!')">influence, advantage</button></li>
                <li><button onclick="Correct('incorrect, try again!')">premium, fine</button></li>
                <li><button onclick="Correct('incorrect, try again!')">contrary, opposite</button></li>

            </ul>
            </div> 
```

我想用一个函数完全隐藏这个div的内容，用另一个函数让它重新出现。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:00:33.393

```
document.getElementById('choices').style.display = "none"; //hide
document.getElementById('choices').style.display = "block"; //show 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:06:02.627

您也可以使用 jQuery 来完成任务。有了它，您也可以使用一些效果。看看：http: [//jsfiddle.net/davidbuzatto/wZTs7/](http://jsfiddle.net/davidbuzatto/wZTs7/)

# php - MaxMind GeoIP 重定向一切？

> ID：11710620
> 
> 赞同：0
> 
> 时间：2012-07-29T15:56:29.950
> 
> 标签：php, redirect, geoip

我想将用户从特定国家重定向到另一种语言。因此，我在我的网页文件夹中上传了 MaxMind 的 GeoIPv6.dat 和 geoip.inc。

我在 index.php 的标头中使用以下脚本：

```
<?php

require_once('geoip.inc');

$gi = geoip_open('GeoIPv6.dat', GEOIP_MEMORY_CACHE);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
geoip_close($gi);

$my_countries = array('AT', 'DE');
if (!in_array(strtolower($country), $my_countries))
{
header('Location: http://www.de.mywebsite.com');
}
else
{
header('Location: http://www.mywebsite.com');
}
?> 
```

奇怪的是，脚本将所有人转发到 de.mywebsite.com？这是为什么？我该如何解决这个问题？

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:59:51.993

您正在将*除*德国和奥地利访客之外的所有人重定向到德国网站。

你可能想要

```
if (in_array(strtolower($country), $my_countries)) 
```

没有反转条件的感叹号。

哦，还有@Alex 在他的回答中所说的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:59:59.793

您正在将国家/地区代码转换为小写，但使用大写为您的数组播种：

```
$my_countries = array('AT', 'DE');
if (!in_array(strtolower($country), $my_countries)) 
```

# sql - 在多个条件下从 1 个表中查询而不生成多行

> ID：11710621
> 
> 赞同：0
> 
> 时间：2012-07-29T15:56:30.760
> 
> 标签：sql, sql-server-2008, tsql, join, conditional-statements

我正在使用的数据库（我无法更新或修改其中的任何内容，我只应该查询它以获取我正在创建的报告）以一种相当奇怪的方式设置。有时信息需要一百万个中间表才能获取，而其他时候一切都在同一个表中。

为了获得我需要的唯一地址，我必须加入 3 个表（包含发票信息的表到包含将数字分配给每个组织的键的表到包含数据库中所有组织的表）。三张表中的最后一张包含每家公司，但公司可以具有相同的不同角色（例如，一家公司可以是供应商，一个可以是客户，一个可以是合作伙伴等），因此该表有“类型”列表示角色，其中 1 = 供应商、2 = 客户等。

示例代码和数据如下（抱歉，我似乎无法在此处正确格式化表格）：

```
select * from a
join b on a.id=b.id
join c on b.orgid=c.orgid 
```

数据：

```
a.OrderID    b.Organization    c.Role
-----------------------------------------    
   123       Acme Inc.            1
   123       Roadrunner Inc.      2
   123       Venture Co.          2 
```

我正在进行的查询需要提取订单 ID、供应商、客户和合作伙伴，但无论我如何加入它或如何尝试使用`WITH`语句，它都会生成 3 行，在每行中，三个角色之一是已命名，其余为 NULL。

有人能帮忙吗？

非常感谢您花时间阅读这个冗长的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:53:58.380

这会让你更接近你想要的结果吗

```
;with cteOrgRoles as
(
select b.id, b.orgid, organization, role
from b 
    inner join c on b.orgid = c.orgid
)
    select 
        a.*,
        r1.organization as role1,
        r2.organization as role2
    from a
        left join cteOrgRoles r1 on a.id = r1.id and r1.role=1
        left join cteOrgRoles r2 on a.id = r2.id and r2.role=2 
```

如果您在其他角色中有多个条目，您将在各个角色列中获得重复项

# c# - 洪流理论？

> ID：11710624
> 
> 赞同：1
> 
> 时间：2012-07-29T15:56:56.080
> 
> 标签：c#, sockets

我一直想编写自己的 torrent 客户端，但从来没有找到任何关于如何做到这一点的好信息。我现在正在使用 C# 4.0，而且我确实有一些网络技能。

我真正需要的是对洪流理论的简短描述，这意味着对其内部表示的解释。

**我想知道我可以向服务器和客户端发送什么样的数据包以及它们是如何构建的，它们的结构等等？**

我已经知道如何通过套接字下载和上传文件到网络，所以我想我也应该能够处理 torrent 文件。

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:10:04.177

您是否尝试过查看其他客户端的一些源代码？

看看[这个 GIT 回购](http://git.deluge-torrent.org/deluge/)

Torrent 客户端不容易构建，在帖子中解释它们也很困难。做大量的研究，谷歌是你的朋友！

# .net - 使用 Web.config 重写 URL

> ID：11710628
> 
> 赞同：0
> 
> 时间：2012-07-29T15:57:19.200
> 
> 标签：.net

我需要重写 URL：

[http://www.mydomain.com/test.aspx?pagename=quotes&companycode=324543](http://www.mydomain.com/test.aspx?pagename=quotes&companycode=324543) 到 [http://www.mydomain.com/test/quotes/324543](http://www.mydomain.com/test/quotes/324543)

我正在使用 IIS 7.5 和 VS 2008。

我需要在 web.config 中编写规则代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:18:45.443

在 IIS GUI 中使用向导这里是重定向和相应的重写规则。它可能不是你想要的，但应该给你一个好主意。

```
 <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
                <match url="^test\.aspx$" />
                <conditions>
                    <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
                    <add input="{QUERY_STRING}" pattern="^pagename=([^=&amp;]+)&amp;companycode=([^=&amp;]+)$" />
                </conditions>
                <action type="Redirect" url="{C:1}/{C:2}" appendQueryString="false" />
            </rule>
            <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
                <match url="^([^/]+)/([^/]+)/?$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="test.aspx?pagename={R:1}&amp;companycode={R:2}" />
            </rule> 
```

# c - 关于linux中匿名映射内存的问题

> ID：11710629
> 
> 赞同：7
> 
> 时间：2012-07-29T15:57:31.993
> 
> 标签：c, linux, memory-mapped-files, memoization

我正在尝试使用虚拟内存系统来允许我对我拥有的一些数字数据进行透明的数据转换（例如 int 到 float）。基本思路是我写的库mmaps你想要的数据文件，同时mmaps一个合适大小的匿名区域来保存转换后的数据，这个指针返回给用户。

匿名区域是读/写保护的，所以每当用户通过指针访问数据时，每个新页面都会导致一个段错误，我可以捕获它，然后透明地转换 mmaped 文件中的数据并修复允许的权限访问以继续。到目前为止，整个事情的这一部分效果很好。

但是，有时我映射非常大的文件（数百 GB），并且通过匿名内存代理访问它，很快你就会开始消耗交换空间，因为匿名页面被放到磁盘上。我的想法是，如果我可以在将转换后的数据写入匿名页面后将其显式设置为 false，则操作系统只会删除它们并在稍后重新访问它们时按需填零。

不过，要使其正常工作，我认为我必须将脏位设置为 false*并*说服操作系统在页面被换出时将页面设置为读保护，这样我就可以重新捕获随后的段错误并重新转换数据一经请求。在做了一些研究之后，我认为如果没有内核黑客，这是不可能的，但我想我会问一下，看看是否有人对虚拟内存系统了解更多，知道一种可以实现的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:48:13.767

这是一个想法（尽管完全未经测试）：对于转换后的数据，`mmap`以及`munmap`您需要的各个页面。由于页面由匿名内存支持，因此在未映射时应将其丢弃。Linux 会将相邻的映射合并到单个 VMA 中，因此这可能具有可接受的开销。

当然，需要有一种机制来触发取消映射。您可以维护一个 LRU 结构并在需要引入新页面时逐出旧页面，从而保持映射区域的大小不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T01:02:00.273

扩展我在您之前的相关问题中提到的建议，我认为以下（Linux 特定，绝对不可移植）方案应该非常可靠地工作：

*   `socketpair(AF_UNIX, SOCK_DGRAM, 0, &sv)`使用和 的信号处理程序设置数据报套接字对`SIGSEGV`。（您无需担心`SIGBUS`，即使其他进程可能会截断数据文件。）

*   信号处理程序用于`write()`将其写入`size_t addr = siginfo->si_addr;`套接字的末尾。然后信号处理程序`read()`从它写入的套接字中取出一个字节（阻塞——这基本上只是一个可靠的`sleep()`——所以记住要处理`EINTR`），然后返回。

    请注意，即使有多个线程同时或几乎同时出现故障，也没有竞争条件。在映射修复之前，信号只会被重新提升。

    如果套接字通信出现任何问题，您可以使用`sigaction()`with`.sa_handler = SIG_DFL`来恢复默认`SIGSEGV`信号处理程序，这样当重新引发相同的信号时，整个进程都会正常终止。

*   一个单独的线程读取套接字对的另一端以查找出错的地址`SIGSEGV`，执行所有必要的映射和文件 I/O，最后将零字节写入套接字对的同一端，让真正的信号处理程序知道映射现在应该修复。

    这基本上是“真正的”信号处理程序，没有实际信号处理程序的缺点。请记住，同一个线程将不断地重新引发同一个信号，直到映射被修复，所以单独的线程和`SIGSEGV`信号之间的任何竞争条件都是无关紧要的。

*   有一个`PROT_NONE`，`MAP_PRIVATE | MAP_ANONYMOUS | MAP_NORESERVE`映射匹配原始数据文件的大小。

    为了降低实际 RAM 的成本——使用`MAP_NORESERVE`你既不使用 RAM 也不使用 SWAP 进行映射，但对于千兆字节的数据，页表条目本身需要相当大的 RAM——你也可以尝试使用`MAP_HUGETLB`。它会使用大页面，因此条目会显着减少，但我不确定当正常页面大小的孔最终被打入映射时是否存在问题；你可能不得不一直使用大页面。

    这是您的“用户空间”将用于访问数据的“完整”映射。

*   有一个`PROT_READ`or `PROT_READ | PROT_WRITE`，`MAP_PRIVATE | MAP_ANONYMOUS`映射原始或脏（分别）转换的数据。如果您的“用户空间”几乎总是修改数据，则您始终可以将转换后的数据视为“脏数据”，否则您可以通过首先`PROT_READ`仅映射转换后的数据来避免不必要的未修改数据写入；如果出现故障，`mprotect()`则将其`PROT_READ | PROT_WRITE`标记为脏（因此需要转换并保存回文件）。我将这两个阶段分别称为“干净”和“脏”映射。

*   当专用线程在“干净”页面的“完整”映射中打孔时，您首先`mmap(NULL, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, ...)`需要一个合适大小的新内存区域，`read()`将所需数据文件中的数据放入其中，转换数据，`mprotect(..., PROT_READ)`如果您分开“干净”和“脏”映射，最后`mremap(newly_mapped, size, size, MREMAP_MAYMOVE | MREMAP_FIXED, new_ptr)`是“完整”映射部分。

    请注意，为避免任何意外，您应该使用*global* `pthread_mutex_t`，在这些`mremap()`s 和`mmap()`其他地方的任何调用期间抓取它，以避免内核意外地将打孔给错误的线程。互斥锁将防止任何其他线程进入。（否则，内核可能会将另一个线程请求的小映射放入临时孔中。）

*   当丢弃“干净”页面时，您调用`mmap(NULL, length, PROT_NONE, MAP_PRIVATE | MAP_ANONYMOUS | MAP_NORESERVE, -1, 0)`以获得合适长度的新映射，然后获取上面提到的全局互斥锁，并将`mremap()`新映射放在“干净”页面上；内核做了一个隐含的`munmap()`. 解锁互斥锁。

*   丢弃“脏”页面时，您调用`mmap(NULL, length, PROT_NONE, MAP_PRIVATE | MAP_ANONYMOUS | MAP_NORESERVE, -1, 0)`*两次以获得*两个*合适长度的新地图*。然后获取上面提到的全局互斥锁，以及`mremap()`第一个新映射上的脏数据。（基本上它只是用来找到一个合适的地址来移动脏数据。）然后，`mremap()`第二个新映射到脏数据所在的位置。解锁互斥锁。

* * *

使用单独的线程来处理故障情况可以避免所有异步信号安全功能问题。`read()`, `write()`, 和`sigaction()`都是异步信号安全的。

您只需要一个全局`pthread_mutex_t`即可避免内核将最近移动的孔（`mremap()`从内存区域 ped）交给另一个线程的情况；您还可以使用它来保护您的内部数据结构（指针链，如果您支持多个并发文件映射）。

不应该有竞争条件（除了其他线程使用`mmap()`or `mremap()`，由上面提到的互斥锁处理）。当一个“脏”页面或页面组被移走时，在转换和保存之前，其他线程将无法访问它；即使是另一个线程的完美并发访问也应该得到完美处理：页面将简单地从文件中重新读取，并重新转换。（如果这种情况经常发生，您可能希望缓存最近保存的页组。）

我确实建议使用大页面组，比如 2M 或更多，而不是单页，以减少开销。最佳大小取决于您的应用程序访问模式，但巨大的页面大小（如果您的架构支持）是一个非常好的起点。

如果您的数据结构未与页面或页面组对齐，则应缓存完整转换的第一条和最后一条记录（仅部分位于页面或页面组内）。它通常使转换回存储格式更容易。

如果您知道或可以检测到文件中的典型访问模式，您可能应该使用`posix_fadvise()`来告诉内核；`POSIX_FADV_WILLNEED`并且`POSIX_FADV_DONTNEED`最有用。它有助于内核避免在页面缓存中保留实际数据文件的不必要页面。

最后，您可能会考虑添加第二个特殊线程，用于异步转换脏记录并将其写回磁盘。如果您注意确保当第一个线程想要重新读回仍然由第二个线程写入磁盘的记录时两个线程不会混淆，那么那里也不应该有其他问题——但是异步写入大多数访问模式可能会增加您的吞吐量，除非您无论如何都受 I/O 限制，或者 RAM 真的很短（相对而言）。

为什么使用`read()`and`write()`而不是另一个内存映射？由于所需的虚拟内存结构的内核开销。

# r - 如何根据索引号对数据框中的列进行求和？

> ID：11710632
> 
> 赞同：3
> 
> 时间：2012-07-29T15:57:49.267
> 
> 标签：r, statistics

我有许多需要读入 R 并汇总的 dbf 表（来自不同程序中的分析的输出）。每个 dbf 都有许多代表不同边缘或核心栖息地类别的列。根据先前的分析，不同的 dbf 文件将具有不同数量的核心和边缘类（列），因此我不能简单地对一致的索引值范围进行求和，例如 [2:4]。

为了确定存在哪些列（用于求和）以及这些列的索引号，我编写了以下循环。这将根据主列表 (ae) 检查当前表名称，如果该列存在，则获取当前数据框中该列的索引号：

```
#read in all the possible edge column names
    ae<-c("VALUE_1","VALUE_3","VALUE_5","VALUE_9","VALUE_33","VALUE_35","VALUE_37","VALUE_65","VALUE_67","VALUE_69","VALUE_101","VALUE_103","VALUE_105","VALUE_109","VALUE_133","VALUE_135","VALUE_137","VALUE_165","VALUE_167","VALUE_169")

#Create and empty data frame and turn off stringsAsFactors:
options(stringsAsFactors=FALSE)
edgeIndices<-data.frame()

#for each column name, get the index number 
for (i in ae) {
  index<-which(colnames(currfile)==i)

  #check to see if ae is in currfile
  #if it is, get the index number, if not skip ahead
  if (length(index)>0){ edgeIndices<-rbind(edgeIndices,c(index, i)) }
  else {}
}

#for some reason the index number is coming in as a character
#also, I need to figure out how to bring in the label without 
# it forcing to factor (I     have changed the global parameter for now)

#name the columns
names(edgeIndices)=c("Index","Label")

#change the index to a number:
edgeIndices$Index<-as.numeric(edgeIndices$Index) 
```

这是我的输出：

```
 Index   Label
1 3       VALUE_1
2 4       VALUE_3
3 5       VALUE_9
4 7       VALUE_33
5 8       VALUE_35
6 9       VALUE_65
7 10      VALUE_67
8 12      VALUE_101 
```

所以，现在我的问题是，如何将索引值传递给`rowSums()`函数，以便仅对具有适当索引 # 的列求和？

例如，在下面的例子中，只有值 1,3 和 9 应该相加，这将是索引 3,4 和 5

```
OID_    VALUE_0 VALUE_1 VALUE_3 VALUE_9 SUM
4473    181800  15300   200700  0   216000
4474    239400  6300    153000  0   159300
4475    296100  13500   86400   0   99900 
```

# macos - 错误：找不到 GCC - brew install git

> ID：11710634
> 
> 赞同：2
> 
> 时间：2012-07-29T15:58:04.660
> 
> 标签：macos, homebrew

我正在尝试让自制软件在我的 osx 10.5.8 上运行，在解决了所有 brew doctor 的问题后，我正在尝试使用 brew 安装 git：

```
 Mac-mini:~ Dagmara$ brew install git
    Error: GCC could not be found
    /usr/local/Library/Homebrew/extend/ENV.rb:142:in `gcc'
    /usr/local/Library/Homebrew/extend/ENV.rb:35:in `send'
    /usr/local/Library/Homebrew/extend/ENV.rb:35:in `setup_build_environment'
    /usr/local/Library/Homebrew/build.rb:23
    /usr/local/Library/Formula/git.rb:86
    Error: Suspicious installation failure 
```

这是一个痛苦的屁股，因为如果我运行 which gcc 我得到：

```
 /usr/bin/gcc 
```

在查看 /usr/bin 时，我看到了 2 个 gcc 安装：

```
 gcc      gcc-4.0 
```

导出 $PATH：

```
 Mac-mini:~ Dagmara$ export $PATH
    -bash: export:`/usr/local/mysql/bin:/usr/local/git/bin/git:/usr/bin/gcc:/usr/local/mysql/bin:/usr/local/git/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/opt/local/bin:/usr/local/git/bin': not a valid identifier 
```

不过，不确定该有效标识符问题是怎么回事。所以我需要帮助解决我的 GCC 问题 :) 提前谢谢，亚历克斯

# wpf - wpf中的自定义滑块

> ID：11710636
> 
> 赞同：1
> 
> 时间：2012-07-29T15:58:08.670
> 
> 标签：wpf, wpf-controls, slider

在底线中，我描述了这些滑块的操作方式：当滑块的引脚移动到顶部时，对于最小引脚，该引脚下方的整个位置的颜色对于彩色滑块变为红色，对于黑白滑块和最大引脚变为白色，当此图钉移至底部，此图钉顶部的整个颜色对于彩色滑块变为蓝色，对于黑白滑块变为黑色 如何在滑块拇指之前更改颜色？（表示这部分文本：对于最小引脚，此引脚下的整个位置的颜色对于彩色滑块变为红色，对于黑白滑块变为白色）

![图片](../Images/1ce45e98fe65c7f32a7abd237c257247.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:57:03.413

这称为范围选择器。有示例项目[Here](http://www.codeproject.com/Articles/28717/A-custom-range-selector-control-in-C-with-a-little)、[Here](http://www.componentone.com/SuperProducts/RangeSliderWPF/)和[Here](http://marlongrech.wordpress.com/2007/09/06/wpf-range-slider-control/)

# php - PHP 表单未提交值

> ID：11710638
> 
> 赞同：0
> 
> 时间：2012-07-29T15:58:32.133
> 
> 标签：php

请检查代码，我在哪里错了。表单没有提交值。页面正在刷新但没有发布值。我不知道发生了什么。请检查代码并找出错误。我也使用过此代码也在另一个应用程序上。它在那里工作但不在这里

```
<?php
    if ($username && $userid) {
        echo "you are already logged in as $dbuser.<a href='w-post.php'> Click here to go to Post area</a>";
    }

    else {
        $form = "<form method=post action=123.php autocomplete=off enctype=multipart/form-data>

    <table width=759 border=1>
        <tr>
            <td width=749>
                <table width=756 border=1>
                    <tr>
                        <td colspan=3 bgcolor=#d9d9d9>
                            <div align=center class=style1><font color=#003366>PERSONAL INFORMATION</font></div>
                        </td>
                    </tr>
                    <tr>
                        <td width=196>
                            <div class=label-text>Email Address</div>
                        </td>
                        <td width=297>
                            <div class=accountboxes><input type=text class=accounttextboxes id=txtemail name=txtemail
                                                           size=50/>
                            </div>
                        </td>
                        <td width=241>&nbsp;</td>
                    </tr>
                    <tr>
                        <td width=196>
                            <div class=label-text>Password</div>
                        </td>
                        <td width=297>
                            <div class=accountboxes><input type=password class=accounttextboxes id=txtpass name=txtpass
                                                           size=50/>
                            </div>
                        </td>
                        <td width=241>&nbsp;</td>
                    </tr>
                    <tr>
                        <td width=196></td>
                        <td width=297><input name=submit type=submit id=submit value=submit/>

                        <td width=241>&nbsp;</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    </td>
    </tr>
    </table>
</form>";

        if (isset($_POST['submit'])) {
            $user = $_POST['txtemail'];
            $pass = $_POST['txtpass'];
            if ($user) {
                if ($password) {
                    $password = md5($pass);
                    //echo $epassword;
                    $query   = mysql_query("SELECT * from users where email='$user'");
                    $numrows = mysql_num_rows($query);
                    if ($numrows == 1) {
                        $row      = mysql_fetch_assoc($query);
                        $id       = $row['id'];
                        $dbuser   = $row['name'];
                        $dbpass   = $row['password'];
                        $activate = $row['activation'];
                        if ($password == $dbpass) {
                            if ($activate == '1') {
                                $_SESSION['name']  = $dbuser;
                                $_SESSION['id']    = $id;
                                $_SESSION['email'] = $email;
                                header('location:forms.php');
                                exit();
                            }
                            else {
                                $error_account = 'Your Account is not activated yet';
                            }
                            echo $form;
                        }
                        else {
                            $error_pass = 'You entered an incorrect password';
                        }
                        echo $form;
                    }

                    else {
                        $error_email = 'Email Address not found';
                        echo $form;
                    }

                }

                else {
                    $enter_pass = 'Enter your password';
                    echo $form;
                }

            }
            else {
                $enter_email = 'Enter email address';
                echo $form;
            }

        }

        else {
            echo $form;
        }

    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:02:04.623

`post`为了安全起见，您应该`123.php`在整个 HTML 中引用所有属性值，例如等。否则（假设您使用的是 HTML 而不是 XHTML - 其中引用的字符串是强制性的）任何无效字符都会使 HTML 无效并且您的代码可能会中断，这肯定是您的代码可能发生的一件事。

使用 HEREDOC 语法：

```
$form = <<<EOD
<form method="post" action="123.php" autocomplete="off" enctype="multipart/form-data">
<table width="759" border="1">
  <tr>

<!-- Rest of HTML code -->

EOD; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:36:59.757

如果你这样做，你的代码会简单得多：

```
if (isset($_POST['submit'])) {
 $error = 0;
 $errorMessages = array();
 $user = $_POST['txtemail'];
 $pass = $_POST['txtpass'];
 if (!$user) {
  $errors++;
  $errorMessages[] = "Please enter your email address";
 }
 ...//rest of the form check
 if($errors == 0) {
  //do what you want with the data
 }
} 
```

所以你没有那么多括号等等。

# javascript - node.js 正则表达式提取事件

> ID：11710639
> 
> 赞同：4
> 
> 时间：2012-07-29T15:58:35.160
> 
> 标签：javascript, regex, node.js

我有这个正则表达式...

```
/user/([A-Za-z0-9]*) 
```

与此输入字符串匹配的...

```
/user/me 
```

这在控制台中带来了这个结果......

```
['/user/me', 'me', index: 0, input: '/user/me'] 
```

另请参阅此示例...

```
Regex: /user/([A-Za-z0-9]*)/([A-Za-z0-9]*)
Input: /user/me/you
Result: ['/user/me/you', 'me', 'you', index: 0, input: '/user/me/you'] 
```

第一个结果只返回**我**，但第二个返回**我**和**你**，node.js 中是否有一个内置函数可以提取这些事件，或者我需要在条件下循环遍历这个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T02:39:14.960

只需使用`Array.slice`：

```
results=mystring.match(myregex).slice(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:25:27.927

你用的是什么版本的节点？匹配的结果`/user/me/you`似乎不合理。无论如何，我在 Node.js 0.8.4 上运行下面的代码

```
> r = /\/user\/([A-Za-z0-9]*)/
  /\/user\/([A-Za-z0-9]*)/
> r.exec('/user/me')
  [ '/user/me',
    'me',
    index: 0,
    input: '/user/me' ]
> r.exec('/user/me/you')
  [ '/user/me',
    'me',
    index: 0,
    input: '/user/me/you' ] 
```

# scala - ScalaQuery 和 Play 框架：处理未分配 (AutoInc) 主键的最佳实践

> ID：11710642
> 
> 赞同：1
> 
> 时间：2012-07-29T15:58:46.143
> 
> 标签：scala, playframework, playframework-2.0, scalaquery

我正在使用带有 ScalaQuery 0.9.5 的 Play 2.0.2。

我有以下简单的模型代码：

```
case class Task(id: Long, name: String)

object Task extends Table[(Long, String)]("task") {

lazy val database = Database.forDataSource(DB.getDataSource())

def id = column[Long]("id", O PrimaryKey, O AutoInc)
def name = column[String]("name", O NotNull)

def create(task: Task) = database.withSession {
  implicit db: Session => {
    Task.name insert(task.name)
  }
} 
```

以下代码用于处理表单提交：

```
val taskForm: Form[Task] = Form(
  mapping(
    "name" -> nonEmptyText
  ) {
    (name) => Task(-1L, name)
  } {
    task => Some(task.name)
  }
)

def newTask = Action {
  implicit request =>
    taskForm.bindFromRequest.fold(
      errors => BadRequest(views.html.index(Task.all, errors)),
      task => {
        Task.create(task)
        Redirect(routes.Application.tasks())
      }
    )
} 
```

几个问题：

1）有没有比传入常量更好的方法来处理瞬态主键值？类似于 Anorm 的 NotAssigned 的东西？

2) 将“id”->ignore(-1L) 添加到表单映射并使用任务的提取器函数会更好吗？

3) 是否应该在没有 id 字段的情况下定义案例类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T21:17:33.153

如果 a`Task`有一个 id，你不应该使用这个类来表示一个没有 id 的值（还）。无论如何，创建的对象通常包含与表单中填写的数据不同的数据（例如创建日期等），因此使用相同的类来表示创建对象和创建的对象所需的值**通常没有意义**本身。

因此，您可以定义另一个案例类，例如`TaskForm`（最终可能从 的公共基础继承`Task`），或者在您的情况下，只使用产生`String`值的表单：

```
// Task
case class Task(id: Long, name: String)

object Task extends Table[(Long, String)]("task") {
  lazy val database = Database.forDataSource(DB.getDataSource())

  def id = column[Long]("id", O PrimaryKey, O AutoInc)
  def name = column[String]("name", O NotNull)

  def create(name: String) = database.withSession { implicit db: Session =>
    Task.name insert(name)
  }
}

// Application
object Application extends Controller {
  val taskForm = Form("name" -> nonEmptyText)
  def newTask = Action { implicit request =>
    taskForm.bindFromRequest.fold(
      errors => BadRequest(views.html.index(Task.all, errors)),
      name => {
        Task.create(name)
        Redirect(routes.Application.tasks())
      }
    )
  }
} 
```

# python - Python 2.7 - 使用不同函数在 Tkinter 画布上绘图

> ID：11710643
> 
> 赞同：-1
> 
> 时间：2012-07-29T15:58:48.340
> 
> 标签：python, tkinter, python-2.7

在 python 中，你可以从不同的函数中绘制 Tkinter Canvas 吗？

如果可能的话，有人可以给我一个超级简单的语法结构说明。

谢谢！

进一步解释我在做什么（想知道这是否是正确的方法，将表单传递给另一个函数：

```
def function1:
    self.root=Tk()
    self.root.title("Form Title")
    cw = 318 # canvas width
    ch = 453 # canvas height
    form = Canvas(self.root, width=cw, height=ch,background="orange")
    drawShapes(form)
    form.pack()

def drawShapes(form):
    form.create_rectangle()
    form.create_arc()
    form.create_unicorns() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:30:58.197

我知道在画布上绘图的两种不同方式：Tkinter.Canvas 和 Canvas

```
import Tkinter
c = Tkinter.Canvas()
lineId = c.create_line(1,1,2,2) 
```

或者

```
import Tkinter
import Canvas
c = Tkinter.Canvas()
line = Canvas.Line(c, 1,1,2,2) 
```

# cassandra - cassandra-1.1.2 的推荐 cassandra gui 客户端是什么

> ID：11710647
> 
> 赞同：69
> 
> 时间：2012-07-29T15:59:04.503
> 
> 标签：cassandra

我正在寻找一些用于 cassandra 的 gui 客户端（如 sqlDeveloper）来调用一些基本方法，并运行 cql 查询

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-07-08T09:47:34.770

免费企业版（非开源）中的[Dbeaver是 Cassandra 的良好 GUI 客户端。](http://dbeaver.jkiss.org/)无需安装。它的便携。此客户端还支持 20 多个数据库。

Dbeaver 的社区版不支持 Cassandra，但我们可以使用第三方驱动程序，例如[Cdata](https://www.cdata.com/kb/tech/cassandra-jdbc-dbvr.rst)来连接。

也试试下面的 GUI 客户端

**最新**：

*   [数据税](http://www.datastax.com/products/datastax-opscenter)
*   [Netflix 数据资源管理器](https://github.com/Netflix/nf-data-explorer)
*   [RazorSQL](http://razorsql.com/features/cassandra_database_client_gui.html)
*   [数据库模式](https://www.dbschema.com/cassandra-designer-tool.html)
*   [Aquafold](http://www.aquafold.com/dbspecific/apache_cassandra_client)
*   [松鼠-sql](https://sourceforge.net/projects/squirrel-sql/)
*   [Cassandra-UI-编辑器](https://github.com/parag3gwl/Cassandra-UI-Editor)
*   [卡桑德拉网](https://github.com/avalanche123/cassandra-web)

**付费工具**

*   [Cassandra 的 NoSQL 管理器](https://www.mongodbmanager.com/cassandra/#)
*   [表加](https://tableplus.com)
*   [数据夹](https://www.jetbrains.com/datagrip/)

**开发停止**

*   [http://code.google.com/a/apache-extras.org/p/cassandra-gui/](http://code.google.com/a/apache-extras.org/p/cassandra-gui/)
*   [http://blog.shelan.org/2012/06/cassandra-gui-20-making-things-little.html](http://blog.shelan.org/2012/06/cassandra-gui-20-making-things-little.html)
*   [https://github.com/sebgiroux/Cassandra-Cluster-Admin](https://github.com/sebgiroux/Cassandra-Cluster-Admin)
*   [https://github.com/libjack/cassandra-gui](https://github.com/libjack/cassandra-gui)
*   [https://github.com/tomekkup/helenos#readme](https://github.com/tomekkup/helenos#readme)
*   [https://github.com/Kindrat/cassandra-client](https://github.com/Kindrat/cassandra-client)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T22:00:23.323

查看[Helenos](https://github.com/tomekkup/helenos#readme) - 这是一个简单的基于 Web 的工具。现在支持 Cql（从 1.3 版开始）。

# mysql - MySQL INSERT INTO 语法

> ID：11710648
> 
> 赞同：8
> 
> 时间：2012-07-29T15:59:15.037
> 
> 标签：mysql, sql

我有以下结构

```
user_id int(11)
right   int(11)
group_id int(11)
value   tinyint(1) 
```

和 3 个查询

```
INSERT INTO  user_rights (`user_id`,`right`,`group_id`,`value`)
VALUES ( '42',  '160',  '1',  '1' );

INSERT INTO  user_rights ('user_id','right','group_id','value')
VALUES ( '42',  '160',  '1',  '1' );

INSERT INTO  user_rights (user_id,right,group_id,value)
VALUES ( '42',  '160',  '1',  '1' ); 
```

解释一下为什么只有第一部作品？？？？

我一生都在使用第三个！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T16:01:48.607

`RIGHT`是一个[mySQL 的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。它只有在包裹在反引号中时才会起作用。

当您不使用保留字时，它也可以在没有反引号的情况下工作。

第二种方法永远不会起作用，因为引号用于引用字符串，但从不用于引用数据库、表或列标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:13:33.010

第二个也不起作用，因为“Right”是 mysql [http://drupal.org/node/141051](http://drupal.org/node/141051)的保留关键字，如果你想使用该查询，你必须使用 ` 来表示它也不起作用

# sql - 用逗号分隔的单个字段中的多行 SQL Server

> ID：11710656
> 
> 赞同：0
> 
> 时间：2012-07-29T16:00:08.967
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)

实现此结果的 SQL Server 代码是什么：

```
SO number  Line number            
123           6
123          189
456           34 
```

需要输出：

```
SO number  Line number 
 123            6,189
 456               34 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:12:28.807

尝试这个 ：-

```
CREATE TABLE #Sample ([SO Number] INT, [Line Number] INT)

INSERT INTO #Sample ([SO Number],[Line Number]) VALUES (123,6)
INSERT INTO #Sample ([SO Number],[Line Number]) VALUES (123,189)
INSERT INTO #Sample ([SO Number],[Line Number]) VALUES (456,34)

SELECT ID,
STUFF((
SELECT ', ' + cast([Line Number] as varchar(max) )
FROM #Sample 
WHERE ([SO Number] = a.[SO Number]) 
FOR XML PATH (''))
,1,2,'') AS b
FROM #Sample a
GROUP BY [SO Number] 
```

编辑 ：

```
XML PATH (''):Is used to retrieve the column values seperated by comma 
Ex:- ,6,189,34 
```

[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)：用于将一个字符串插入到另一个字符串中。表达式为

```
STUFF ( character_expression , start , length ,character_expression ) 
```

起始长度为 1，因为我们必须替换 XML PATH 创建的第一个逗号。`''`插入的空间长度为 1

因此，即使您有 20K 行，表达式仍将与 1,2 用于插入空间相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:36:06.003

```
DECLARE @Sample Table([SO Number] INT, [Line Number] INT)

INSERT INTO @Sample ([SO Number],[Line Number]) VALUES (123,6)
INSERT INTO @Sample ([SO Number],[Line Number]) VALUES (123,189)
INSERT INTO @Sample ([SO Number],[Line Number]) VALUES (456,34)

select * from @Sample

select [SO Number],STUFF((select ','+cast([Line Number] as varchar(100)) from  @Sample s1 where s1.[SO Number] =s.[SO Number]  FOR XML path('')),1,1,'' )  as [Line Number]     from  @Sample s
group by [SO Number] 
```

# wso2 - 需要在 Eclipse 中设置 WSO2 ESB 代码库的步骤

> ID：11710657
> 
> 赞同：0
> 
> 时间：2012-07-29T16:00:10.277
> 
> 标签：wso2, wso2esb

谁能告诉我在eclipse中设置代码库的步骤。我希望调试一些组件功能。请让我知道包或结构如何找到特定组件或中介的源代码？

提前致谢。

* * *

尝试构建丰富代码时出现以下错误

C:\Enrich_Workspace>mvn clean install [INFO] 扫描项目... 下载：[http ://repo.maven.apache.org/maven2/org/wso2/carbon/mediators/3.2.0/mediators-3.2.0 .pom](http://repo.maven.apache.org/maven2/org/wso2/carbon/mediators/3.2.0/mediators-3.2.0.pom) [错误] 构建无法读取 1 个项目 - > [帮助 1] [错误] [错误] 项目 org.wso2.carbon:enrich-mediator:3.2.0 (C:\Enrich_Workspace\pom.xml) 有1 错误 [错误] 不可解析的父 POM：在中央找不到工件 org.wso2.carbon:mediators:pom:3.2.0 ( [http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2) ) 和 'parent.relativePath' 指向错误的本地 POM @ line 22, column 13 -> [Help 2] [ERROR] [ERROR] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR] [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException](http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException) [ERROR] [帮助2] [http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException](http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:09:35.167

[使用 SVN https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0/components/mediators/enrich/](https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0/components/mediators/enrich/)从这里查看源代码。

使用 Maven 2 构建源代码。然后将项目导入 Eclipse。

# ruby-on-rails - rspec 简单示例在集成测试中获取请求变量错误

> ID：11710660
> 
> 赞同：2
> 
> 时间：2012-07-29T16:00:37.097
> 
> 标签：ruby-on-rails, rspec

这是一个没有测试的被采用的 Rails 应用程序。我正在尝试在集成测试中测试omniauth，但出现错误（我基于此进行**编辑：** [https](https://github.com/intridea/omniauth/wiki/Integration-Testing) ://github.com/intridea/omniauth/wiki/Integration-Testing ）。这反映了我对Rspec缺乏了解。看起来请求对象默认是可用的。

我在我的 spec/spec_helper.rb 中有：

```
config.include IntegrationSpecHelper, :type => :request
Capybara.default_host = 'http://localhost:3000'

OmniAuth.config.test_mode = true
OmniAuth.config.add_mock(:facebook, {
  :uid => '12345'
}) 
```

在我的规范/集成/登录规范中：

```
require 'spec_helper'

describe ServicesController, "OmniAuth" do
  before do
    puts OmniAuth.config.mock_auth[:facebook]
    puts request # comes back blank
    request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
  end

  it "sets a session variable to the OmniAuth auth hash" do
    request.env["omniauth.auth"][:uid].should == '12345'
  end
end 
```

我收到以下错误：

> {"provider"=>"facebook", "uid"=>"12345", "user_info"=>{"name"=>"Bob 示例"}}
> 
> F
> 
> 失败：
> 
> 1) ServicesController OmniAuth 将会话变量设置为 OmniAuth 身份验证哈希失败/错误：request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook] NoMethodError: undefined method `env' for nil:NilClass # ./login_spec.rb:8:in`block (2 levels) in '
> 
> 在 22.06 秒内完成 1 个示例，1 个失败
> 
> 失败的例子：
> 
> rspec ./login_spec.rb:11 # ServicesController OmniAuth 将会话变量设置为 OmniAuth 身份验证哈希

默认情况下，请求对象是否应该在此处可用？这个错误可能意味着别的吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T11:44:51.750

你得到`nil`是因为你还没有提出任何请求。

为了使测试工作，你必须做三件事：

1.  设置模拟
2.  提出请求
3.  测试附加到回调的任何代码

这是我的做法。先在block中设置mock `before`，然后访问provider对应的URL（本例为facebook）：

```
before do
  OmniAuth.config.add_mock(:facebook, {:uid => '12345'})
  visit '/auth/facebook'
end 
```

从[维基](https://github.com/intridea/omniauth/wiki/Integration-Testing)：

> 对 /auth/provider 的请求将立即重定向到 /auth/provider/callback。

所以你必须有一个匹配'/auth/:provider/callback'的路由。无论您映射做什么，都必须执行上述步骤 3 中的内容。

如果您想测试会话变量是否设置为 uid，您可以执行以下操作（因为您在上面的模拟中将 uid 设置为“12345”）：

```
it "sets a session variable to the OmniAuth auth hash" do
  session['uid'].should == '12345'
end 
```

这是一个应该通过的路线和行动：

路线.rb

```
match '/auth/:provider/callback' => 'sessions#callback' 
```

控制器/sessions_controller.rb

```
def callback
  session['uid'] = request.env["omniauth.auth"][:uid]
end 
```

这就是它的要点。希望有帮助。

# android - 图像视图调整大小

> ID：11710662
> 
> 赞同：0
> 
> 时间：2012-07-29T16:00:51.723
> 
> 标签：android, image, android-layout

所以我一直面临这个问题一段时间，但我仍然无法找到解决方案。希望你们能帮我解决这个问题。我有一个纸牌游戏，玩家可以像任何其他纸牌游戏一样看到他的牌。

问题是很多人抱怨卡片太小。当我在我的 devicr (galaxy s2) 上运行它时，卡片的大小很好。碰巧有人给我发了一张他 HTC 的截图，这些卡确实比我的小。

请注意，我有这 3 个不同密度的文件夹，并且我的图像视图设置为包装内容。

我有 2 个解决方案，如果您能提供进一步帮助，我将不胜感激

1）我没有包装内容，而是为每个屏幕尺寸（而不是密度）使用预定义的宽度。这将在大屏幕上显示一个特定的尺寸（它占据的空间），例如

2）使图像视图的大小相对于屏幕的宽度。我不知道该怎么做，所以任何指针都值得赞赏。

3）有什么建议吗？

请帮助陷入这种困境的程序员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:14:24.997

您可以使用 DesplayMetrics 在运行时获取设备的尺寸，并使用您获得的宽度和高度。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
int width = metrics.widthPixels;
int height = metrics.heightPixels;

ImageView iv = (ImageView)findViewById(R.id.yourImageViewId);
iv.setWidth(width);
iv.setHeight(height * 2/3); 
```

或类似的东西。这样，您将永远不会遇到此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:06:31.913

您是否有针对不同密度的不同尺寸的图像？`ImageView`您为s使用哪种比例类型？您可以为密度创建不同的布局，但我将从尝试比例类型开始 - [http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# mysql - 这个数据库需要多对多吗？

> ID：11710673
> 
> 赞同：1
> 
> 时间：2012-07-29T16:02:18.530
> 
> 标签：mysql, database, database-design, relational-database

我正在为我可能正在进行的一个可能的 PHP MySQL 项目设计一个数据库。我是关系数据库设计的新手，之前只使用过单表数据库。

这是表格的示意图：

![我的桌子](../Images/dd4ce6f2df977d39b3edf970eb50f52d.png)

因此，'Cars' 包含汽车的每个型号，而其他 3 个表包含汽车可以安装的部件。因此，每辆汽车都可以从三个表中获得不同的零件，并且每个零件都可以安装到零件表中的不同汽车上。实际上，大约有 10 个这样的零件表。

那么，将这些链接在一起的最佳方式是什么？我需要在中间等另一张桌子吗？以及在链接方面我需要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:08:36.683

我会这样做。而不是为汽车零件提供三个不同的表：

*   表 - 汽车表 - 零件（这可能只有一个 id 和一个零件号和一个类型）
*   表 - part_connections（用零件连接汽车）
*   表 - part_options（包含所有不在部件表中的选项，如“功率增益”）
*   表 - part_option_connections（将零件连接到各种零件选项）

通过这种方式，添加新部分要容易得多（因为您不需要新表）并且它也更接近于标准化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:16:06.797

你的部分有一些继承。共同的属性似乎是：

*   零件号
*   价格

您的零件类型排气、软件和进气有一些细节。有两种策略： - 拥有三个表格和三个表格的一个视图 - 拥有一个带有 parttype 列的表格，并且可能是表格的三个视图。

如果你想玩你的设计，你可能想看看我公司的网站[http://www.uml2php.com](http://www.uml2php.com)。UML2PHP 会自动将您的 UML 设计转换为数据库设计，并让您“玩”这个结果。

在： [http](http://service.bitplan.com/uml2phpexamples/carparts/) ://service.bitplan.com/uml2phpexamples/carparts/ 您会在您的设计中找到一个示例应用程序。菜单还不允许您通过菜单访问所有表。

通过： [http ://service.bitplan.com/uml2phpexamples/carparts/index.php?function=dbCheck](http://service.bitplan.com/uml2phpexamples/carparts/index.php?function=dbCheck)

表定义是可访问的：

```
mysql> describe CP01_car;
+-------------+---------------+------+-----+---------+-------+
| Field       | Type          | Null | Key | Default | Extra |
+-------------+---------------+------+-----+---------+-------+
| oid         | varchar(32)   | NO   |     | NULL    |       |
| car_id      | varchar(255)  | NO   | PRI | NULL    |       |
| model       | varchar(255)  | YES  |     | NULL    |       |
| description | text          | YES  |     | NULL    |       |
| model_year  | decimal(10,0) | YES  |     | NULL    |       |
+-------------+---------------+------+-----+---------+-------+ 
```

mysql> 描述 CP01_part;

```
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| oid         | varchar(32)  | NO   |     | NULL    |       |
| part_number | varchar(255) | NO   | PRI | NULL    |       |
| price       | varchar(255) | YES  |     | NULL    |       |
| car_car_id  | varchar(255) | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+ 
```

mysql> 描述 cp01_exhaust；

```
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| oid         | varchar(32)  | NO   |     | NULL    |       |
| type        | varchar(255) | YES  |     | NULL    |       |
| part_number | varchar(255) | NO   | PRI | NULL    |       |
| price       | varchar(255) | YES  |     | NULL    |       |  
+-------------+--------------+------+-----+---------+-------+ 
```

mysql> 描述 CP01_intake；

```
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| oid         | varchar(32)  | NO   |     | NULL    |       |
| part_number | varchar(255) | NO   | PRI | NULL    |       |
| price       | varchar(255) | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+ 
```

mysql> 描述 CP01_software;

```
+-------------+---------------+------+-----+---------+-------+
| Field       | Type          | Null | Key | Default | Extra |
+-------------+---------------+------+-----+---------+-------+
| oid         | varchar(32)   | NO   |     | NULL    |       |
| power_gain  | decimal(10,0) | YES  |     | NULL    |       |
| part_number | varchar(255)  | NO   | PRI | NULL    |       |
| price       | varchar(255)  | YES  |     | NULL    |       |
+-------------+---------------+------+-----+---------+-------+ 
```

上面的表格是从 UML 模型生成的，结果还不能满足您的需要。特别是如果您想拥有 10 个或更多这样的表。将您的零件链接到汽车表的字段 car_car_id 应该在所有表中都可用。根据设计方案，零件的基本“表”应该是这样的视图：

mysql>

```
create view partview as 
select       oid,part_number,price from CP01_software 
union select oid,part_number,price from CP01_exhaust 
union select oid,part_number,price from CP01_intake; 
```

当然 car_car_id 列也需要选择；

现在您可以单独编辑每个表格，partview 将一起显示所有部分。为了能够区分零件类型，您可能需要添加另一列“part_type”。

# c++ - 对 `_imp__glewInit@0' 的未定义引用

> ID：11710677
> 
> 赞同：9
> 
> 时间：2012-07-29T16:02:40.980
> 
> 标签：c++, opengl, codeblocks, mingw32, glew

我已经多次构建了 glew lib。我的上一个版本删除了对所有着色器函数的未定义引用，例如`glCreateShader()`. 我认为这个构建是正确的，因为我发现它`Code:Blocks`可以打开 Visual Studio 6.0 项目，所以它为我准备了一切。

我可以在不调用的情况下编译我的应用程序，`glewInit()`但它会在调用时导致 SEGFAULT `glCreateShader()`。这是由于未初始化 glew 引起的。

我需要打开它，但它不会让我XD

链接：mingw32、glew32、opengl32、glu32、glut32

IDE：代码::块

编译器：MinGW32

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-29T17:19:08.650

为自己省去很多麻烦，只需将其`glew.c`直接添加到您的项目中即可。我不明白为什么人们如此努力地与外部链接。许可证是友好的，它只有一个源文件。只记得`#define GLEW_STATIC`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:04:13.460

`glew32`在使用它的库之后链接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-06T09:41:06.193

在 Ubuntu 18.04 中要使用 OpenGL，应该安装 GLEW：

```
apt-get install libglew-dev 
```

它在添加链接器选项时起作用：“-lGLEW”到链接器调用，就像在 FLTK 的 Makefile 中一样：

```
...
# HOW TO LINK
.o$(EXEEXT):
  @echo "*** Linking $@..."
  $(CXX) $< $(LINKFLTK_ALL) -lGLEW -o $@ 
```

# java - 片段添加不起作用

> ID：11710678
> 
> 赞同：0
> 
> 时间：2012-07-29T16:02:51.460
> 
> 标签：java, android, android-fragments

这是我的主要内容：

```
package com.example.frags;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;

public class NewMessage extends FragmentActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_message);

        //Set new fragment
        FragA fragA = new FragA();
        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();
        transaction.add(R.id.container_id, fragA);
        transaction.commit();

    }

} 
```

我的 FragA 课程：

```
package com.example.frags;

import android.os.Bundle;
import android.text.style.SuperscriptSpan;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragA extends android.support.v4.app.Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.choose_pill_frag, container, false);
    }
} 
```

[这个问题与我几天前](https://stackoverflow.com/questions/11619573/fragment-add-or-replace-not-working)遇到的问题非常相似，但是我将该解决方案应用于此应用程序，但仍然无法使其正常工作。

我在下面有一条红线，上面`.add`有消息说`The method add(int, Fragment) in the type FragmentTransaction is not applicable for the arguments (int, fragA)`

这很严重，因为在另一个示例应用程序中，我编写了[这段代码](http://pastebin.com/AVRCa8G9)。看起来相同，但它有效！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:15:01.823

嗯...我刚刚做了一个清理，删除了我的 R.java 并重新启动了 eclipse。现在它可以工作了。好家伙。

# tomcat - 在 tomcat 7 上使用上下文部署 Web 应用程序

> ID：11710681
> 
> 赞同：1
> 
> 时间：2012-07-29T16:03:13.023
> 
> 标签：tomcat, deployment, war

似乎我无法弄清楚如何将 Web 应用程序部署到我想要在 tomcat 7 上的路径。以下是详细信息：

1.  我有一个名为 myapp.war 的 war 文件，我希望它位于 /home/user/myapp.war 下（不是安装 tomcat 的位置）。
2.  我想将它部署在路径 /api/1/ 下的 tomcat 上

如果我将 myapp.war 直接放在 tomcat 的 webapps 目录下，它将部署，但在路径 /myapp 下，这不是我需要的。我也试图避免编辑 tomcat 的 server.xml 文件。

我知道有一些方法可以使用上下文文件来做到这一点，但是我尝试过的任何东西都不起作用，看起来我错过了一些东西。如果有人可以描述精确的配置以使其正常工作，将不胜感激。

谢谢！爱丽儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:18:57.560

这个链接有解释和如何做。 [http://www3.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_More.html](http://www3.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_More.html)

如果您坚持使用与预期 URL 不匹配的 webapp 名称，那么您必须将 webapp 保留在 appBase 目录*之外*，并创建一个包含以下元素的 conf/Catalina/[host]/[appName].xml 文件指向部署位置的 docBase 属性。请注意，上面的 [appName] 是您希望出现在 URL 中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:16:30.123

我有一个类似的问题，我尝试了以下方法，它对我有用：
重命名 war 文件以匹配上下文路径并替换`"/"`为`"#"`. 例如：`api#1#myapp.war`

如果您使用的是 context.xml，那么您还必须将其重命名为`api#1#myapp.xml`

我希望它也适用于你。如果您找到其他解决方案，请分享。

# httpresponse - 在 Java 中流式传输 HTTP 响应

> ID：11710683
> 
> 赞同：2
> 
> 时间：2012-07-29T16:03:31.180
> 
> 标签：httpresponse, fileinputstream

我想将 HTTP 请求的响应写入文件。但是，我想将响应流式传输到物理文件，而无需等待加载整个响应。

实际上，我将向 JHAT 服务器发出请求，以从转储中返回所有字符串。我的浏览器在响应完成之前挂起，因为有 70k 这样的对象，我想将它们写入文件以便我可以扫描。

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T16:23:50.983

从 HTTP 流中读取有限数量的数据并将其写入文件流。执行此操作，直到处理完所有数据。

这是演示原理的示例代码。在这个例子中，我不处理任何 i/o 错误。我选择了一个 8KB 的缓冲区来比一次处理一个字节更快，但仍然限制每次迭代期间拉入 RAM 的数据量。

```
final URL url = new URL("http://example.com/");
final InputStream istream = url.openStream();
final OutputStream ostream = new FileOutputStream("/tmp/data.txt");

final byte[] buffer = new byte[1024*8];
while (true) {
    final int len = istream.read(buffer);
    if (len <= 0) {
        break;
    } 
    ostream.write(buffer, 0, len);
} 
```

# javascript - 在 javascript 中，如何搜索“–”（短划线）？

> ID：11710684
> 
> 赞同：0
> 
> 时间：2012-07-29T16:03:37.183
> 
> 标签：javascript, search

我正在使用 javascript 在 HTML 页面中搜索文本。我正在寻找的一件事是包含“en-dash”的 HTML 字符的行——在 HTML 页面中看起来像这样（它是一个项目列表，用一个破折号分隔）：

项目一
项目二
–
项目三

如何在 Javascript 中搜索它？我尝试了以下方法，但不起作用：

itemList.search("–");
itemList.search("–");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:14:25.590

有一个函数 indexOf。这将返回您搜索的字符（或字符串）的位置，返回 -1 of 不存在。

用法：

```
var str = "this is a dash - ...";
alert(str.indexOf('-'));
// or
alert(str.indexOf("\u2013")); // EN DASH unicode 
```

如果你不知道如何将 – 转换为 \u2013 你可以使用这个函数

```
function myUnescape(ampstr) {
  const span = document.createElement('SPAN');
  span.innerHTML = ampstr
  return span.textContent
}

myUnescape('&#8211') -> '-'
escape(myUnescape('&#8211')) -> '%u2013' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:17:04.597

搜索是每个字符串对象都可用的功能。它返回匹配的位置，如果没有找到 -1。

所以 "abc-de".search("-"); 返回 3，因为它位于位置 0123。

[http://www.w3schools.com/jsref/jsref_search.asp](http://www.w3schools.com/jsref/jsref_search.asp)

# javascript - 在 Jquery 中查询一个表

> ID：11710685
> 
> 赞同：0
> 
> 时间：2012-07-29T16:03:41.230
> 
> 标签：javascript, jquery, jquery-selectors

我遇到过这段代码

```
$("#search").keyup(function(){
  var val = $.trim(this.value).toLowerCase();
   $("table > tbody > tr:gt(0) ").hide();

   if(val.length){
     $("table > tbody > tr:gt(0) > td").filter(function(){
       return this.innerHTML.toLowerCase().indexOf(val) >=0;
     }).parent().show();
   } else $("table > tbody > tr:gt(0)").show();
}); 
```

用于在 jQuery 中查询一个表。这是 HTML 标记

```
<p>
  <input id = "search" type = "text">
</p>
<table id ="accounts">
  <tr>
    <th>Username</th>
    <th>Password</th>
  </tr>         
  <tr>
    <td>Metasm</td>
    <td>password1992</td>
  </tr>
  <tr>
    <td>superadmin</td>
    <td>adminpassword</td>
  </tr>         
  <tr>
    td>skyrocketeer</td>
    <td>thejetsons</td>
  </tr>
</table> 
```

基本上它有效。但我对 jQuery 代码感到非常困惑。

我的问题：在这部分代码中

```
$("table > tbody > tr:gt(0) > td").filter(function(){
  return this.innerHTML.toLowerCase().indexOf(val) >=0;
}).parent().show(); 
```

这部分具体做什么？它返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:10:59.407

*   `$("table > tbody > tr:gt(0) > td")`- 这行代码表明你想要一个元素中的所有`<td>`元素`<table>`都在一个`<tbody>`元素中，谁的`<tr>`元素的索引大于`0`（即 - 跳过第一行。 `gt()`是简单的大于）。选择`>`器声明我们只需要第一级子元素中的元素——我们不想深入到第一组子元素之外。

*   该[`.filter()`](http://api.jquery.com/filter/)函数会将匹配元素的集合减少为匹配选择器或通过函数测试的元素。

*   `val`这里的条件语句是在每个元素的 innerHTML 中查找搜索字符串的某个索引。
    `this.innerHTML.toLowerCase().indexOf(val) >=0`

所以这就是说（记住我们正在遍历我们从第一个选择器中找到的所有元素）是我们正在寻找元素中的字符串`val`的`innerHTML`出现。innerHTML 也通过`toLowerCase()`函数传递，顾名思义就是函数——将所有字符转换为它们的小写形式。

呼……毕竟，我们留下了一定的元素列表。符合上述所有规格的元素。对于这些元素中的每一个，代码将使用函数定位它们的父级（记住我们在谈论`<td>`元素，所以它们的父级应该是`<tr>`），并使用`.parent()`函数将它们显示在屏幕上`.show()`。

* * *

对于第一个选择器 - `$("table > tbody > tr:gt(0) > td")`，我发现有时更容易向后阅读（在您的脑海中）以理解层次结构......

返回 -

1.  我正在寻找`<td>`元素，
2.  是内部`<tr>`元素（但不是第一个），
3.  在`<tbody>`元素内部
4.  都驻留在一个`<table>`元素中。

* * *

现在进行一些示例输入和输出。

*   给定的值为`val`“jet”，该函数将显示最后一个`<tr>`- 带有字符串的那个 - `thejetsons`。
*   给定的值为`val`“密码”，该函数将显示`<tr>`中间的两个元素。包含“password1992”和“adminpassword”的那些。

* * *

我希望这对您的问题有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:11:34.563

`$("table > tbody > tr:gt(0) > td")`将选择 tr:gt(0) 内的所有 td ...这是一个基本的 jquery 选择器。

选择这些 td 后，根据函数的返回值应用过滤器，如果返回 true，则选择 td。

那么你的函数：`return this.innerHTML.toLowerCase().indexOf(val) >=0`意味着如果`td`包含一个字符串（val）将返回true，否则。

这一切都等于

```
$("table > tbody > tr:gt(0) > td:contains('"+val+"')").parent().show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:13:15.613

此代码选择除第一个元素之外的所有`td`元素中的所有`tr`元素，然后我们为每个元素执行函数作为上下文，如果对于元素，函数返回 false，则将其从 jquery 'array' 中排除，然后对于所有过滤的元素，我们获取`tr`元素它们是什么并展示它们。在函数中，我们获取内部文本并在搜索查询中搜索它。

# php - 保护文件免受直接访问

> ID：11710686
> 
> 赞同：0
> 
> 时间：2012-07-29T16:03:49.243
> 
> 标签：php, security, .htaccess

我托管了一个站点，文件建议将文件放在文件夹下`public_html`。我有三个文件`index.php`（查看页面）`common.js`， 和`result.php(php)`在根文件夹中。单击`index.php`（查看）文件中的按钮将触发 ajax 函数到`result.php`.

问题是每个人都可以`result.php`直接访问...

我试图制作文件夹结构，所有 php 文件（`result.php`）都在根目录后面的文件夹中。所以它不会使用重写规则或其他任何东西直接从浏览器访问。

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:08:40.367

要使文件只能通过 ajax 访问，您可以使用：

```
public static function isAjax() {
    return (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']=="XMLHttpRequest");
} 
```

它返回真或假。基本上，如果它返回 true，则让用户继续，否则停止它们。

注意事项：并非所有 JS 库/框架实际上都设置了此标头，但大多数（JQuery、Mootools 等）都设置了此标头，并非所有版本，因此请确保在使用之前拥有最新版本的库/框架。

另外，如果用户欺骗了您的标题，那么就没有真正的方法可以阻止它们。

我倾向于将此作为阻止 AJAX 页面公开可见的前兆。我还使用参数完整性检查和存储在会话中的随机哈希（CSRF 类型的东西）来检查用户是否合法地访问 AJAX 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:10:48.500

您无法通过移动它来保护它，因为除了会话（或其他类型的令牌）之外，无法区分请求`result.php`是否由合法的 AJAX 调用触发。 您需要使用 php 会话（或等效的东西）来： `index.php`

1.  存储用户可以访问的内容（在 index.php 中）。
2.  检查他是否可以在（result.php）中访问它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:09:59.450

您无法通过 ajax 访问文件，然后无法通过正确的浏览器请求访问文件，因为 Ajax 调用正在执行与 Web 浏览器相同的行为。

# objective-c - 最大值和最小值的算法？（目标-C）

> ID：11710687
> 
> 赞同：4
> 
> 时间：2012-07-29T16:03:57.750
> 
> 标签：objective-c, max, min

这是我正在阅读的学习 Objective-C 的书的一部分。

> 下面定义了一个名为 MAX 的宏，它给出了两个值的最大值：`#define MAX(a,b) ( ((a) > (b)) ? (a) : (b) )`

然后书中有一些练习要求读者定义一个宏`MIN`（`MAX3`我认为这两个定义看起来类似于`MAX`，但我不明白`MAX`公式如何找到最大值。我的意思是如果我这样做

```
int limits = MAX (4,8) 
```

它只会分配`limits`值 8。这与找到变量的最大值有什么关系？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T16:20:58.153

将其分开：

声明：

```
#define MAX(a,b) 
```

如果`a`大于`b`，使用`a`else 使用`b`：

```
( ((a) > (b)) ? (a) : (b) ) 
```

然后创建一个`MIN`表达式，使用类似的形式：

```
#define MIN(a,b) ( ((a) < (b)) ? (a) : (b) )
                        ^ 
```

然后要创建一个`MAX3`表达式，您可以将它们组合起来：

```
#define MAX3(a,b,c) ( MAX(a, MAX(b,c)) ) 
```

具体来说，此宏旨在与标量（C 内置函数）一起使用，可以使用`<`or进行比较`>`。如果您传递了一个 objc 变量，它将导致地址比较，并且 MAX 将返回具有较高地址的那个（如果您真的想比较 objc 实例的地址，这将是非常罕见的）。

另请注意，这是宏如何咬你的经典示例。使用宏，预处理器只需将参数扩展（文本复制/粘贴）到位，因此：`int limits = MAX (4,8)`从字面上扩展为`int limits = (4 > 8 ? 4 : 8)`. 如果你写`MAX(x,++y)`， then如果大于或等于，`y`则将增加两次，因为它扩展为：。`y``x``int limits = (x > ++y ? x : ++y)`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-29T16:14:39.110

我认为您混淆了价值和变量。您列出的宏示例扩展为两个值之间的比较，并返回两个值中的较大者（即较大者`a`或`b`）。所以你是对的，`int limits = MAX(4,8)`只是分配`8`给`limits`并与找到你可以存储的最大值无关`limits`。

标题limits.h 定义了许多类似`INT_MAX`的值，这些值将告诉您有关系统上变量类型的最小/最大值的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:11:10.700

通常，您将使用 MAX() 或 MIN() 宏来获取一对变量、一个变量和一个常量、甚至一对宏常量或其他非文字常量表达式中较高/较低的那个. 您通常不会像您在问题中所做的那样提供 2 个文字常量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-08T07:19:34.087

最大值算法（Objective-C）

```
 // get max value
- (float)maxValue:(NSArray *)arrValue
{
    float maxValue = 0.0;
    for (NSString *value in arrValue) {
        float compareValue = [value floatValue];

        if (compareValue > maxValue) {
            maxValue = compareValue;
        }

    }

    return maxValue;
}

NSArray *number=[NSArray arrayWithObjects:[NSNumber numberWithFloat:57.02], [NSNumber numberWithFloat:55.02], [NSNumber numberWithFloat:45.02], nil];

NSLog(@"%f", [self maxValue:number]);

result 57.020000 
```

# java - Java Applet 不显示在 HTML 页面上

> ID：11710694
> 
> 赞同：0
> 
> 时间：2012-07-29T16:04:47.640
> 
> 标签：java, html

当我加载我的 HTML 页面时，我的 Java 小程序（称为 NameInLights.class）不显示。.class 文件肯定存在，并且我的 HTML 的其他部分显示在页面上的正确位置。在我的浏览器中启用了 Java，并且小程序在 AppletViewer 中运行良好。

这是我的java代码：

```
import java.util.Random;
import java.awt.*;
import java.applet.*;
public class NameInLights extends Applet {

    private static final long serialVersionUID = 1L;
    Random r = new Random();
    String name = "Imulsion";//must keep my real name secret! :)
    public void init(){
        setSize(500,500);
    }
    public void paint(Graphics g){
    g.setColor(new Color(r.nextInt(255),r.nextInt(255),r.nextInt(255)));
    g.setFont(new Font("Comic sans ms",Font.BOLD,55));  
    g.drawString(name,125,250);
    for(int loop=0;loop<500;loop++)
    {
        int red = r.nextInt(255);
        int green = r.nextInt(255);
        int blue = r.nextInt(255);
        int x = r.nextInt(500);
        int y = r.nextInt(500);
        g.setColor(new Color(red,green,blue));
        g.setFont(new Font("Times New Roman",Font.BOLD,24));
        g.drawString("*",x,y);
    }
    }
} 
```

这是我的 HTML：

```
<html>
 <body>
    <p>
     Here comes an awesome applet!
    </p>
    <br />
    <br />
    <applet code="NameInLights.class" width = 500 height = 500>
    </applet>
    <button type = "button" onclick = "window.location.reload()">
     Change applet colours
    </button>
 <body>
<html> 
```

为什么不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:46:36.090

好的，谷歌浏览器官方不支持 deprecated tag `applet`。改用标签`object`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:43:35.557

乍一看，您可以使用：

```
appletviewer your_html_file.html 
```

然后，您可能需要为您的浏览器下载一个插件：

```
http://www.oracle.com/technetwork/java/index-jsp-141438.html 
```

# iphone - 缩放标签时如何调整多行或单行文本的大小

> ID：11710696
> 
> 赞同：1
> 
> 时间：2012-07-29T16:05:00.743
> 
> 标签：iphone, ios, uilabel

我一直在寻找解决此问题的方法，但一直找不到。我有一个标签，我想根据缩放自动调整大小。

如果您知道如何执行此操作，请提供几行代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:38:19.900

由于您没有提供任何代码，我不能保证这会奏效。但是，我发现[这个](https://stackoverflow.com/questions/9439541/how-do-you-dynamically-resize-two-text-label-widths-inside-of-a-uitableviewcell)先前的问题处理了您遇到的相同问题。

这是一些自动调整标签大小的代码：

```
cell.dateLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin;

cell.nameLabel.text = @"A name that should be truncated";
cell.dateLabel.text = @"A long date to use as an example"; 
```

希望这可以帮助！

# php - DOMElement::setAttribute 不起作用 php

> ID：11710699
> 
> 赞同：1
> 
> 时间：2012-07-29T16:05:18.013
> 
> 标签：php, xml

我有一个包含这样的标签的 xml 文件。

```
<server>
  <conversation ip="12.0.0.1" email="none">
     <chat userstatus="1" adminstatus="2" username="admin">muja</chat>
  </conversation>
</server> 
```

现在我想更新对话标签的电子邮件属性。当我使用`$conv->getAttribute("email")`它时，我得到了正确的结果，即无。但如果我尝试使用`$conv->setAttribute("email","abc")`它来设置它，它不会更新值。这就是我正在做的事情。

这是 GetClientConversation()：

```
private function GetClientConversation()
{
    foreach($this->conversation as $convTag)
    {
        if($convTag->getAttribute("ip") == $this->clientip)
        {
            return $convTag;
        }
    }

    return "noConversation";
} 
```

此函数返回我需要的正确对话标签。

我得到这些对话标签数组使用

```
 $this->conversation=$this->xmlDom->getElementsByTagName("conversation"); 
```

编辑：

```
public function GetConversation()
{
        $conv=$this->GetClientConversation();
        if($conv!="noConversation")
        {
            if($conv->getAttribute("email")=="none")   
            {
                $conv->setAttribute("email","abc");    // -- Here
                return json_encode($this->RetrieveConversation($conv));
            }
            else if($conv->getAttribute("email")==$this->adminEmail)
            {
                return json_encode($this->RetrieveConversation($conv));
            }
            else
            {
                return "Admin Already Chatting";
            }
        }
        else
        {
            $this->CreateNewConversation();
            return "no";
        }
} 
```

这是我尝试设置属性的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:26:10.157

您已正确使用`setAttribute()`.

您正在检索您的 XML 并将字符串传递回`json_encode()`. 但是，如果在返回字符串之前`RetrieveConversation()`没有正确调用该方法，则您的修改将不会在输出 XML 字符串中可用。`saveXML()`确保您已致电`saveXML()`.

# jpa - 从 EclipseLink 获取 JDBC 连接

> ID：11710700
> 
> 赞同：15
> 
> 时间：2012-07-29T16:05:20.490
> 
> 标签：jpa, jdbc, connection, eclipselink

使用 EclipseLink 作为 JPA 2.0 提供程序，我可以通过简单地调用来获得 JDBC 连接

```
Connection con = entityManager.unwrap(Connection.class); 
```

但我不确定我要负责什么。提交查询后是否必须关闭连接？还是我不允许关闭连接，因为 EclipseLink 也在内部使用这个连接。还是它不在乎，因为 EclipseLink 会观察我的行为并在我不这样做时自动关闭连接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T14:55:02.367

如果您在 JPA 事务的上下文中，则连接将由提供者 (EclipseLink) 管理。如果您在事务之外，您有责任自己管理连接。

有关其他信息，请参阅以下链接：

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager](http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T15:04:22.540

> 但我不确定我要负责什么。提交查询后是否必须关闭连接？还是我不允许关闭连接，因为 EclipseLink 也在内部使用这个连接。

一个好的和有效的问题。似乎文档缺少`unwrap()`调用的语义。

**关于 EclipseLink**，根据我从[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.persistence/eclipselink/2.4.2/org/eclipse/persistence/internal/jpa/EntityManagerImpl.java#2533)中得到的信息：

EclipseLink 为您提供了对当前活动的**引用**`connection`，它用于当前**活动的客户端会话事务**。如果没有事务处于活动状态，**则将创建一个新**事务，与会话相关联并从`unwrap()`方法返回。

因此，恕我直言，此类获得的提交/回滚`Connection`可能会导致未定义的行为和/或异常。执行 DML 也是如此，更改的记录先前已由 eclipselink 内部缓存缓存或存在托管实体。
所以在使用这个 API 的时候，尤其是底层事务脏的时候，**要小心**。

如果你可以参考内部的eclipselink类，你可以访问eclipselink内部连接池来获得一个`Connection`独占（看看`org.eclipse.persistence.sessions.server.ServerSession.getConnectionPool(String)`）。

# c++ - 如何从选定的行（QTableView）中获取单元格值？

> ID：11710705
> 
> 赞同：10
> 
> 时间：2012-07-29T16:07:12.780
> 
> 标签：c++, qt, qtableview

我有一个`QTableView`并且我需要从所选行的第一个单元格中获取值（字符串）（可以选择该行上的任何单元格）。*但是只有当恰好选择了一行时*我才需要这个值。

我想 - 我需要获取所选行的索引，然后获取该行上第一个 сell 的值，但我找不到办法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-29T16:41:15.030

```
myTableView->selectionModel()->currentIndex().row() 
```

将为您提供当前选定行的索引。从那里您应该有足够的信息来查找模型中的行/列对。

此外，`QItemSelectionModel::selectedRows()`还会让您知道选择了多少行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-12-18T07:35:22.010

Python 代码将如下所示：

```
 self.tableView.clicked.connect(self.on_Click) 
```

当用户单击表格单元格时，将调用 on_Click() 方法

```
 def on_Click(self):
        # #selected cell value.
        index=(self.tableView.selectionModel().currentIndex())
        # print(index)
        value=index.sibling(index.row(),index.column()).data()
        print(value) 
```

解释。

“value”包含所选单元格的单元格值。

```
 index.row() # gives current selected row.
       index.column() # gives current selected column.
       index.sibling(index.row(),index.column()).data() # will return cell data 
```

# xcode - 通用应用程序中的标签栏图标显示问题

> ID：11710708
> 
> 赞同：0
> 
> 时间：2012-07-29T16:07:20.373
> 
> 标签：xcode, uitabbaritem, ios5.1

我有一个奇怪的问题，现在让我发疯。希望这里有人可以帮助我或遇到类似的事情。我上下搜索，但没有找到类似的东西。

我正在创建一个带有情节提要的通用应用程序（Xcode 4.3.3），其中包括一个带有 4 个图标的 UITabBar。这些图标来自免费的字形集，在 iPhone 模拟器中看起来很好。然而，在 iPad 模拟器中，它们看起来被放大了，并且只有大约上半部分在标签栏中可见。

除了原始图标​​之外，我还创建了@2X、~ipad 和@2X~ipad 版本（我通过 Photoshop 中的批处理对几乎所有艺术作品进行了此操作）。然而，即使我删除了这些其他版本并且只保留了字形原件，iPad 模拟器中的图标看起来还是一样的（即太大）。

我查看了情节提要源代码，我在情节提要中更改了一堆 Tabbar 和 TabbarItem 设置，似乎没有任何帮助。帮助！

编辑：我刚刚注意到 iPad（Retina）模拟器中的图标看起来不错！？！？

解决了：好的，我自己解决了。不确定这些步骤中的哪一个做到了，但这是我所做的：

*   从模拟器中删除应用程序
*   清理项目
*   重新编译并运行

现在图标显示正确。去搞清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:01:02.523

解决了：好的，我自己解决了。不确定这些步骤中的哪一个做到了，但这是我所做的：

1.  从模拟器中删除应用程序
2.  清理项目
3.  重新编译并运行

现在图标显示正确。去搞清楚。

# c# - 输入框中的图片框

> ID：11710709
> 
> 赞同：1
> 
> 时间：2012-07-29T16:07:35.287
> 
> 标签：c#, picturebox, inputbox

我想在一个InputBox中放一个PictureBox，我用这种方式试了下，还是不行（图片不出现）：

InputBox 的原始代码是这样的：[http](http://www.csharp-examples.net/inputbox/) ://www.csharp-examples.net/inputbox/ 我只是改变了一点。

**InputBox 中包含 PictureBox 的代码：**

```
public static DialogResult Show(string title, string luna_text, ref string luna_continut, string zi_text, ref string zi_continut, string ora_text, ref string ora_continut, string minut_text, ref string minut_continut, string mesaj, ref string imagine)

PictureBox picture = new PictureBox();

picture.ImageLocation = imagine;

picture.SetBounds(14, 60, 128, 128);

picture.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

form.Controls.AddRange(new Control[] { label1, textBox1, label2, textBox2, label3, textBox3, label4, textBox4, label5, picture, buttonOk });

imagine = picture.ImageLocation; 
```

**包含来自 Form1 的 PictureBox** *的代码：（代码在**私有 void**函数中）*

图片被添加到**资源**中！！

```
string inputbox = "";
string imagine = "alarma.png";

inputbox = CeasAlarma.InputBoxAnuntareAlarma.Show("CEAS ALARMA", "Luna:", ref luna, "Zi:", ref zi, "Ora:", ref ora, "Minut:", ref minut, "------ Ai o alarma care sunt in acest moment ! ------", ref imagine).ToString();

if (inputbox == "Cancel" || inputbox == "OK")
   //will do something 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:13:34.617

尝试使用此代码来构建您的图片框

```
picture.Width = 100;

picture.Height = 100;//just an example

Bitmap image = new Bitmap("alarma.png");

picture.Image = (Image)image;

picture.SetBounds(14, 60, 128, 128);

picture.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

form.Controls.AddRange(.....); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:38:33.440

此代码将使您的图像进入您`InputBox`确保表单的大小足够大以显示您的图像，您还必须使用定位。我所做的是将另一个参数添加到 InputBox 的 New 方法中，以将图像传递给您的控件。看看这对你有什么作用。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            string value = "Document 1";

            if (Tmp.InputBox("New document", "New document name:", ref value, new Bitmap("Your Image Here") == DialogResult.OK)
            {
                this.Text = value;
            }
        }
    }

    public static class Tmp  //Note new field called bitmap for passing your picture to the InputBox
    {
        public static DialogResult InputBox(string title, string promptText, ref string value, Bitmap image)
        {
            Form form = new Form();
            Label label = new Label();
            TextBox textBox = new TextBox();
            Button buttonOk = new Button();
            Button buttonCancel = new Button();
            PictureBox picture = new PictureBox();

            form.Text = title;
            label.Text = promptText;
            textBox.Text = value;
            picture.Image = image;

            buttonOk.Text = "OK";
            buttonCancel.Text = "Cancel";
            buttonOk.DialogResult = DialogResult.OK;
            buttonCancel.DialogResult = DialogResult.Cancel;

            label.SetBounds(9, 20, 372, 13);
            textBox.SetBounds(12, 36, 372, 20);
            buttonOk.SetBounds(228, 72, 75, 23);
            buttonCancel.SetBounds(309, 72, 75, 23);
            picture.SetBounds(14, 60, 128, 128);

            label.AutoSize = true;
            textBox.Anchor = textBox.Anchor | AnchorStyles.Right;
            buttonOk.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
            buttonCancel.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
            picture.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

            form.ClientSize = new Size(396, 400); //Changed size to see the image
            form.ClientSize = new Size(Math.Max(300, label.Right + 10), form.ClientSize.Height); //Changed position so you are not shrinking the available size after the controls are added
            form.Controls.AddRange(new Control[] { label, textBox, buttonOk, buttonCancel, picture});
            form.FormBorderStyle = FormBorderStyle.FixedDialog;
            form.StartPosition = FormStartPosition.CenterScreen;
            form.MinimizeBox = false;
            form.MaximizeBox = false;
            form.AcceptButton = buttonOk; 
            form.CancelButton = buttonCancel;

            DialogResult dialogResult = form.ShowDialog();
            value = textBox.Text;
            return dialogResult;
        }

    }
} 
```

* * *

请注意在您的代码中，您在添加控件后设置了 ClientSize，因此图像显示为负 X 位置值。您可以确保 ClientSize 不小于 Form Size 或在添加控件之前设置 ClientSize。我对上面的例子做了修改，请看一下。

# objective-c - 带有块、ARC 和非 ARC 的 Objective C 内存管理

> ID：11710710
> 
> 赞同：6
> 
> 时间：2012-07-29T16:07:37.543
> 
> 标签：objective-c, memory-management, automatic-ref-counting, objective-c-blocks, afnetworking

我使用块已经有一段时间了，但我觉得在 ARC 和非 ARC 环境中我都想念一些关于内存管理的事情。我觉得更深入的了解会让我避免很多内存泄漏。

AFNetworking 是我在特定应用程序中主要使用 Blocks。大多数时候，在操作的完成处理程序中，我会执行类似“[self.myArray addObject]”的操作。

[根据Apple 的这篇文章，](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)在 ARC 和非 ARC 启用的环境中，“self”将被保留。

这意味着，每当调用 AFNetworking 网络操作的完成块时，self 会保留在该块内，并在该块超出范围时释放。我相信这适用于 ARC 和非 ARC。我已经运行了 Leaks 工具和 Static Analyzer，以便我可以发现任何内存泄漏。没有显示任何。

然而，直到最近我才偶然发现了一个我无法理解的警告。我在这个特定的例子中使用了 ARC。

我有两个实例变量指示网络操作的完成和失败

```
@property (nonatomic, readwrite, copy) SFCompletionBlock completionBlock;
@property (nonatomic, readwrite, copy) SFFailureBlock failureBlock;
@synthesize failureBlock = _failureBlock;
@synthesize operation = _operation; 
```

在代码的某处，我这样做：

```
[self.operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id
                                                    responseObject) {
NSError *error = [NSError errorWithDomain:@"com.test" code:100 userInfo:@{@"description": @"zero results"}];
            _failureBlock(error);
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"nothing");
        }]; 
```

Xcode抱怨调用failureBlock的那一行，在这个块中强烈地捕获“self”的消息很可能导致一个retain循环。我相信Xcode是对的：failure块保留了self，self持有它自己的副本该块，因此两者都不会被释放。

但是，我有以下问题/意见。

1）如果我将 _failureBlock(error) 更改为“self.failureBlock(error)”（不带引号），编译器将停止抱怨。这是为什么？这是编译器遗漏的内存泄漏吗？

**2) 一般来说，在使用作为实例变量的块**时，在启用 ARC 和非启用 ARC 的环境中使用块的最佳实践是什么？似乎在 AFNetworking 中的完成和失败块的情况下，这两个块**不是**实例变量，因此它们可能不属于我上面描述的保留周期的类别。但是当在 AFNetworking 中使用进度块时，可以做些什么来避免像上面那样的保留循环？

我很想听听其他人对 ARC 和非 ARC 的想法，包括内存管理的块和问题/解决方案。我发现这些情况容易出错，我觉得有必要对此进行一些讨论以澄清问题。

我不知道这是否重要，但我使用 Xcode 4.4 和最新的 LLVM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:41:55.557

> 1）如果我将 _failureBlock(error) 更改为“self.failureBlock(error)”（不带引号），编译器将停止抱怨。这是为什么？这是编译器遗漏的内存泄漏吗？

在这两种情况下都存在保留循环。如果你的目标是 iOS 5+，你可以传入一个对 self 的弱引用：

```
__weak MyClass *weakSelf;
[self.operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSError *error = [NSError errorWithDomain:@"com.test" code:100 userInfo:@{@"description": @"zero results"}];
    if (weakSelf.failureBlock) weakSelf.failureBlock(error);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"nothing");
}]; 
```

现在 self 不会被保留，如果它在调用回调之前被释放，则回调是空操作。但是，它可能会在后台线程上调用回调时进行释放，因此这种模式可能会导致偶尔的崩溃。

> 2) 一般来说，在使用作为实例变量的块时，在启用 ARC 和非启用 ARC 的环境中使用块的最佳实践是什么？似乎在 AFNetworking 中的完成和失败块的情况下，这两个块不是实例变量，因此它们可能不属于我上面描述的保留周期的类别。但是当在 AFNetworking 中使用进度块时，可以做些什么来避免像上面那样的保留循环？

大多数时候，我认为[最好不要将块存储在实例变量](http://twobitlabs.com/2012/05/block-initialization-for-testability-and-reuse/)中。如果您改为从类中的方法返回块，您仍然会有一个保留周期，但它只存在于调用方法到释放块的时间。因此，它将防止您的实例在块执行期间被释放，但保留周期在块被释放时结束：

```
-(SFCompletionBlock)completionBlock {
    return ^(AFHTTPRequestOperation *operation , id responseObject ) {
        [self doSomethingWithOperation:operation];
    };
}

[self.operation setCompletionBlockWithSuccess:[self completionBlock]
                                      failure:[self failureBlock]
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:56:22.037

> 这意味着，每当调用 AFNetworking 网络操作的完成块时，self 会保留在该块内，并在该块超出范围时释放。

不，`self`在创建块时由块保留。当块被释放时它被释放。

> 我相信 Xcode 是对的：故障块保留了 self，而 self 拥有自己的块副本，因此两者都不会被释放。

保留的有问题`self`的块是传递给的完成块`setCompletionBlockWithSuccess`。`self`不包含对此块的引用。相反，`self.operation`（可能是某种`NSOperation`）在执行时保留块。所以暂时有一个循环。但是，当操作执行完成时，循环将被打破。

> 1）如果我将 _failureBlock(error) 更改为“self.failureBlock(error)”（不带引号），编译器将停止抱怨。这是为什么？这是编译器遗漏的内存泄漏吗？

应该没有区别。`self`在这两种情况下都被捕获。编译器不能保证捕获所有保留周期的情况。

# ruby-on-rails - rails的facebook链接识别器？

> ID：11710712
> 
> 赞同：-2
> 
> 时间：2012-07-29T16:08:01.120
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, gem, ruby-on-rails-plugins

我正在开发一个应用程序，它允许用户非常像 facebook 或经典论坛一样发布到墙壁/群组。我真的很喜欢您可以在 facebook 上发布链接的方式，该链接将被识别为视频、图片或其他媒体并自动显示。这是一个很棒的功能 b/c 它让用户留在 facebook 上而不是离开网站。在那张纸条上，我希望为我正在开发的应用程序实现类似的东西。是否有任何 Rails 插件/宝石可以做这种事情？

是的，我知道如何使用谷歌搜索并且已经这样做了。我意识到我可以编写正则表达式来扫描链接，然后采取相应的措施。但是，我正在寻找一个现有的实现来节省大量时间。

任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:26:20.797

现有的实现可能会使用某种形式的正则表达式，尽管另一种方法是使用自定义的“Markdown”语法或 BB 代码来使正则表达式更容易。

# c# - 泛化控制的设计策略

> ID：11710713
> 
> 赞同：0
> 
> 时间：2012-07-29T16:08:19.937
> 
> 标签：c#, .net

我有一个需要概括的 GUI 控件，以便它可以在不同的情况下使用，我需要建议。让我先给你一些背景。我有一个模型可以存储特定应用程序的所有数据。我通过此模型中的属性访问和设置数据点。

现在我将模型的实例传递给 GUI 控件，客户端可以在控件中设置/重置/读取两个特定的数据（在我使用属性的代码中）。这一切都很好，但现在模型多了 3 组这两个“列”（六个新字段），在其他 3 个新的不同情况下也需要由相同的控件进行操作。显然，我不想再为同一个控件创建 3 个副本（是的，最初设计控件时没有考虑可扩展性，我知道，我知道）。因此，我尝试在控件构造函数中传递对属性的引用，这当然不起作用（编译器错误：属性、索引器或动态成员访问可能不会作为 out 或 ref 参数传递）。所以，我的问题是，在这种情况下，什么是好的设计策略？如何概括此控件以便可以重用它并且可以在模型中设置/编辑这些其他属性？

谢谢！

# iphone - textLabel 和 contentView 的关系

> ID：11710715
> 
> 赞同：1
> 
> 时间：2012-07-29T16:08:26.833
> 
> 标签：iphone, objective-c, ipad, uitableview

两者都使用是否有意义，`textLabel`或者一个“覆盖”另一个？`contentView``UITableViewCell`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:41:07.497

`UILabel`首次访问该`textLabel`属性时，会创建一个实例并将其添加到内容视图中。通常，您要么通过自己添加子视图来自定义内容视图，要么使用内置`textLabel`（和可选`detailTextLabel`）属性。

# mysql - 创建触发器时出现语法错误

> ID：11710720
> 
> 赞同：4
> 
> 时间：2012-07-29T16:08:57.033
> 
> 标签：mysql, sql

我正在尝试在 MySQL 中创建一个新触发器，但无论我尝试什么，我都会遇到语法错误。我想在列中插入一个值，该值`html_id`将是字母`f`和列的串联`id`：

```
CREATE TRIGGER htmlid 
BEFORE INSERT ON makelist_food
FOR EACH ROW
BEGIN
  IF (NEW.html_id IS NULL) THEN
  NEW.html_id = CONCAT('f', NEW.id);
  END IF;
END 
```

我也试过这个：

```
CREATE TRIGGER htmlid 
BEFORE INSERT ON makelist_food
FOR EACH ROW
BEGIN
  IF (NEW.html_id IS NULL) THEN
  INSERT INTO makelist_food SET html_id = CONCAT('f', NEW.id);
  END IF;
END 
```

而这个（改变分隔符）：

```
DELIMITER $$

CREATE TRIGGER htmlid 
BEFORE INSERT ON makelist_food
FOR EACH ROW
BEGIN
  IF (NEW.html_id IS NULL) THEN
  NEW.html_id = CONCAT('f', NEW.id);
  END IF;
END$$

DELIMITER ; 
```

我得到的错误：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 '.html_id = CONCAT('f', NEW.id)' 附近使用正确的语法

我正在运行 MySQL 5.5.22。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:15:22.727

试试这个查询：

```
delimiter |

    CREATE TRIGGER htmlid 
    BEFORE INSERT ON makelist_food
    FOR EACH ROW
    BEGIN
      IF (NEW.html_id IS NULL) THEN
      INSERT INTO makelist_food SET html_id = CONCAT('f', NEW.id);
      END IF;
    END
    |
    delimiter ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:34:38.293

我认为区别在于 SET 关键字。试试这个

```
DELIMITER $$

CREATE TRIGGER htmlid 
BEFORE INSERT ON makelist_food
FOR EACH ROW
BEGIN
  IF (NEW.html_id IS NULL) THEN
     SET NEW.html_id = CONCAT('f', NEW.id);
  END IF;
END$$

DELIMITER ; 
```

# entity-framework - 类和数据表示

> ID：11710722
> 
> 赞同：0
> 
> 时间：2012-07-29T16:09:00.740
> 
> 标签：entity-framework, dbcontext

我希望有人可以就如何最好地处理这种情况给我一些指导。我正在使用 dbcontext、wpf 和 sql 服务器。我遇到的情况是数据的呈现需要其他数据，而不仅仅是来自单个表的数据。例如，如果我有一个人员表，但还想显示他们从相关数据中阅读了多少本书，例如字段将是姓名、地址、NoOfBooks。我目前创建了一个名为 PersonBookPM 的新类，我用来自 linq 查询的数据填充了该类，该查询组合了包含上述三个字段的两个表。我创建了一个 observablecollection 并使其成为网格/列表框的 itemssource。然后，当我向其中添加数据时，我需要使用所选项目，将其转换回个人的单个实体，并将其附加回上下文中。似乎这些类已经由代码生成定义了，我重复这个过程只是略有不同。我要绕过这里的房子吗？谢谢斯科特

# jquery - Kickstarter.com “顶部”-bar 小图片 HOW TO？

> ID：11710724
> 
> 赞同：0
> 
> 时间：2012-07-29T16:09:15.937
> 
> 标签：jquery, css

我一直在尝试让我的 Kickstarter.com 的顶栏看起来很酷的小图像炫耀 - 没有任何运气。

我试图绝对定位项目，但无论我做什么，它都不是“工作”。

以下是已完成的操作：

```
$('#holder .box').each(function(n){
   var pLeft = $(this).position().left;

   $(this).css({
     position: 'absolute',
     left: pLeft
   });
}); 
```

但随后所有项目都堆叠在一起。

顺便说一句：我知道这还不足以解决问题，但我需要帮助才能进一步解决这个问题。换句话说：我被困住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:21:33.067

我想你想要这样的东西：

[http://fiddle.jshell.net/sfkzY/](http://fiddle.jshell.net/sfkzY/)

不确定为什么要尝试使用 JS 进行布局？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:21:53.980

当你看到一些很酷的东西时，你会想“他们是怎么做到的？” ...您的第一反应应该是什么？

在 Firebug 中查看它。或者 Chrome 的开发工具。或者其他的东西。看看 HTML 结构是什么。查看适用于所有内容的 CSS 是什么。如果有一个 CSS 规则你不明白它的作用，只是暂时关闭它或弄乱它的值。使用 Firebug 的能力来实时操纵内容对您有利。

在这种情况下，实际上并没有那么困难。里面的项目只是使用图像`float:left; width:120px; height:90px`——它们有很多。包装器为 2640 像素宽且居中，因此它是`position:absolute; margin-left:50%; width:2640px; left:1320px`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:35:09.760

这是一个网格，所以我会选择一张桌子，比如这个[jsFiddle](http://jsfiddle.net/UE9nm/)。

# javascript - 立即使用 Javascript 中的异步（动态加载）类的实例

> ID：11710729
> 
> 赞同：0
> 
> 时间：2012-07-29T16:09:46.283
> 
> 标签：javascript, oop, asynchronous, methods, placeholder

当时的情况是我想创建一个帮助类的实例，但是这个帮助类需要通过外部脚本进行初始化，所以它本质上是异步的。和

```
var obj = new myObj(); 
```

显然是呼吁

```
obj.myMethod(); 
```

将产生未定义的结果，因为 obj 将是空的或未定义的，直到外部脚本加载其方法和参数。

是的，可以重组事物以具有回调模式并在其中使用新对象，但是当我一直在使用具有许多动态对象的大型多样 API 时，它会变得既麻烦又尴尬。

我的问题是，有没有办法巧妙地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:09:46.283

我想那里受过学术训练的程序员对这种方法有一个名字，但我把它放在这里以防它在某个地方写得不好。

我所做的是修改我的加载器类以使用占位符+队列系统来立即返回可行的对象。

这是组件。抱歉，混入了 jQuery 位，您可以轻松地将其设为纯 JS 脚本，但无论如何我已经加载了它，而且我很懒。

'Client' 发出此请求，其中 'caller' 是我的处理程序类：

```
var obj = caller.use('myObj',args); 
```

在 Caller 中，我们有

```
Caller.prototype.use = function(objname,args) {
    var _this = this;
    var methods = ['method1','method2'];
    var id = someRandomString();
    this.myASyncLoader(objname,function(){
        var q = [];
        if (_this.objs[id].loadqueue) {
            q = _this.objs[id].loadqueue;
        }
        _this.objs[id] = new myRemotelyLoadedClass(args);
        //realise all our placeholder stuff is now gone, we kept the queue in 'q'
        _this.objs[id].isloaded = true;
        //once again, the jquery is unnecessary, sorry
        $.each(q,function(a,b){
            _this.objs[id][b['f']](b['a']);
        });       
    });
    _this.objs[id] = _this.createPlaceholderObj(methods,id);
    return _this.objs[id];
} 
```

这个函数基本上启动加载器函数，然后加载所需类的新实例。但与此同时，它会立即返回一些东西，一个占位符对象，我们将使用所有远程加载对象的方法来加载它。在这个例子中，我们必须在一个数组中显式地声明它们，这有点麻烦但可以生存，尽管我相信你可以为你自己的目的想出更好的方法来做到这一点。

您会看到我们将临时对象和未来对象都保存在一个类全局数组“objs”中，并与一个随机键相关联。

这是 createPlaceholderObj 方法：

```
Caller.prototype.createPlaceholderObj = function(methods,id) {
var _this = this;
var n = {};
n.tempid = id;
n.isloaded = false;
$.each(methods,function(a,methodCalled){
        n[methodCalled] = function(){
        _this.queueCall(id,methodCalled,arguments);
    }
});
return n;
 } 
```

在这里，我们只是用所需的方法加载新的 obj，同时存储 ID，这很重要。我们为新方法分配了第三个函数 queueCall，我们将调用的方法及其发送时的任何参数传递给该函数。这是那个方法：

```
Caller.prototype.queueCall = function(id,methodName,args) {
if (this.objs[id].isloaded == true) {
    this.objs[id][methodName](args);
} else {
    if (this.objs[id].loadqueue) {
        this.objs[id].loadqueue.push({'f':methodName,'a':args});    
    } else {
        var arr = [{'f':methodName,'a':args}];
        this.objs[id].loadqueue = arr;
    }
}
} 
```

每次客户端脚本调用我们的新对象实例的方法时，都会调用此方法，无论其逻辑是否已实际加载。此处的 IF 语句检查是哪种情况（异步函数完成后，调用方方法中的 isloaded 设置为 true）。如果对象没有加载，methodName 和参数将作为占位符的属性添加到队列数组中。如果它被加载，那么我们可以简单地执行该方法。

回到调用者方法，最后一个无法解释的位是我们检查是否有队列的地方，如果有，则循环遍历它并执行存储的方法名称和参数。

就是这样！现在我可以这样做：

```
var obj = caller.use('myObj',args);
obj.someMethod('cool');
obj.anotherMethod('beans'); 
```

虽然在这些方法实际执行之前可能会有一点延迟，但它们会毫无怨言地运行！

不是太短的解决方案，但如果你在做一个大项目，你可以把它放在一个地方，它会带来很多好处。

我希望对这个问题进行一些跟进。例如，我想知道你们中的一些人如何使用延迟承诺模式来做到这一点？或者如果有其他方法？或者如果有人知道这种技术叫什么？非常感谢来自 JS 高手的输入。

# java - 是否可以从 Web 浏览器访问 JAX-WS？

> ID：11710735
> 
> 赞同：0
> 
> 时间：2012-07-29T16:10:42.503
> 
> 标签：java, web-services, jax-ws, webservice-client

我只是想知道，是否可以部署 JAX-WS 并从浏览器访问它而无需安装任何软件或代理类..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:27:59.677

当然，JAX-WS 只是一个建立在 SOAP 之上的库，它是建立在 XML 之上的，XML 是建立在 HTTP 之上的（呵呵！）

如果您有 SOAP Web 服务（它是使用 JAX-WS 开发的这一事实无关紧要），任何能够通过 HTTP 发送和接收 XML 的应用程序都可以调用它。我们正在使用 AJAX POST 成功访问我们的后端 Web 服务（由于[same-origin-policy](/questions/tagged/same-origin-policy "显示标记为“同源策略”的问题") ，Web 服务必须部署在与您的前端相同的域中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:10:42.503

据我所知，这是不可能的，因为您需要有代理类才能调用 JAX-WS 函数……但也许我错了！

# c# - 列表中的无效演员表 到 IEnumerable 返回目录 ， 为什么？

> ID：11710740
> 
> 赞同：5
> 
> 时间：2012-07-29T16:11:01.747
> 
> 标签：c#, .net, linq, ienumerable

所以基本上我有这个方法。

```
public List<Customer> FilterCustomersByStatus(List<Customer> source, string status)
{
    return (List<Customer>)source.Where(c => c.Status == status);
} 
```

我向我抛出了一个它无法转换的错误：

> 无法将“WhereListIterator`1[AppDataAcces.Customer]”类型的对象转换为“System.Collections.Generic.List`1[AppDataAcces.Customer]”类型。

为什么...？由于基础类型相同，Enumerable.Where 是否会创建 WhereListIterator 的新实例，如果是，为什么会有人这样做，因为这是不必要的性能和功能损失，因为我总是必须创建一个新列表 (.ToList( ))

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T16:17:31.023

> Enumerable.Where 创建一个新的实例`WhereListIterator`

是的。

> 如果是这样，为什么有人会这样做

因为它允许延迟流式传输行为。`Where`如果其消费者只想要第一个或第二个条目，则不必过滤所有列表。这对于 LINQ 来说是正常的。

> 因为那是不必要的性能和功能损失，因为我总是必须创建一个新列表（.ToList（））

“性能和功能的损失”来自您的设计。过滤后就不需要`List<Customer>`了，因为对它做任何修改都是没有意义的。

**更新：“为什么这样实现”** 因为它实现了`IEnumerable`，而不是`IList`。因此它看起来像`IEnumerable`，它嘎嘎叫`IEnumerable`。

此外，以这种方式实现它要容易得多。想象一下，你必须重写`Where`。`IList`哪个必须返回`IList`。它应该怎么做？返回原始列表的代理？您每次访问都会遭受巨大的性能损失。返回带有过滤项目的新列表？这和做的一样`Where().ToList()`。返回原始列表但删除了所有不匹配的项目？这就是`RemoveAll`为什么，为什么要另一种方法。

请记住，LINQ 尝试发挥功能，并尝试将对象视为不可变对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:16:41.643

正如其他人指出的那样，您需要使用`ToList`将结果转换为`List<T>`.

原因是`Where`懒惰评估，所以`Where`并没有*真正*过滤数据。它所做的是创建一个`IEnumerable`根据需要过滤数据的方法。

惰性评估有几个好处。它可能更快，它允许使用`Where`无限`IEnumerable`s 等。

`ToList`强制将结果转换为`List<T>`，这似乎是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:13:24.990

Where 扩展过滤并返回，`IEnumerable<TSource>`因此您需要调用 .ToList() 将其转换回来

```
public List<Customer> FilterCustomersByStatus(List<Customer> source, string status)
{
    return source.Where(c => c.Status == status).ToList();//This will return a list of type customer
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:36:15.457

IEnumerable 和 IList 之间的区别在于，可枚举不包含任何数据，它包含一个[迭代器](http://en.wikipedia.org/wiki/Iterator)，在您请求新数据时遍历数据（例如，使用 foreach 循环）。另一方面，列表是数据的副本。在您的情况下，要创建 List，ToList() 方法会遍历整个数据并将它们添加到 List 对象。

根据您计划的用途，两者都有优点和缺点。例如，如果您计划多次使用整个数据，则应该使用列表，但如果您计划使用一次或计划使用 linq 再次查询，则可以选择 enumerable。

编辑：为什么返回类型是 WhereListIterator 而不是 List 的问题的答案是，部分原因是 Linq 的工作方式。例如，如果在第一个之后有另一个 Where 或另一个 Linq 语句，编译器将使用整个方法链创建一个查询，然后返回最终查询的迭代器。另一方面，如果第一个 Where 将返回一个 List，这将导致链中的每个 Linq 方法在数据上单独执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-29T16:12:47.890

试试这个：

```
public List<Customer> FilterCustomersByStatus(List<Customer> source, string status)
{
    return source.Where(c => c.Status == status).ToList();
} 
```

# asp.net - 在 asp.net 中显示来自 SQL Server 2008 的表格数据的最佳方法是什么？

> ID：11710745
> 
> 赞同：0
> 
> 时间：2012-07-29T16:12:13.590
> 
> 标签：asp.net, ajax, sql-server-2008

我听说有很多方法可以将 SQL Server 2008 数据库中的数据显示到 asp.net 页面。

我听到的其中一些是这样的：

1.  使用 jQuery 调用 Web 服务，该服务将抛出可以压缩到 html div 中的预制 html 表。
2.  使用数据集并将其绑定到数据网格。
3.  使用脚本管理器和更新面板进行异步数据检索。
4.  使用以下链接 [http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/displaying-a-table-of-database-data-cs给出的方法](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/displaying-a-table-of-database-data-cs)

我正在开始一个大项目，不知道该遵循哪种方法。就像一个非常安全并且也在以某种方式使用 ajax 的方法。

如果您想建议最好的方法，请在此处启发我。一种同样安全且使用 ajax 的方法。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:17:02.367

如果您致力于 asp.net，我建议您查看 Daniel Roth 的[这篇文章](http://code.msdn.microsoft.com/ASPNET-Web-API-JavaScript-d0d64dd7)和其他文章，并使用[WebApi](http://www.asp.net/web-api)和[KnockoutJS](http://knockoutjs.com/)以及 jQuery。

# javascript - Socket.io console.log 多次

> ID：11710753
> 
> 赞同：1
> 
> 时间：2012-07-29T16:12:57.727
> 
> 标签：javascript, node.js, socket.io

我目前正在将 Socket.io 用于我的一个项目，我有一些问题，为什么我的更新之一。

当我收到新数据时，我正在控制台中创建日志（console.log(data)），但问题是我没有一个日志，而是 7 到 9 个日志，其中包含相同的内容。

```
io.sockets.on( 'connection', function ( socket ) {
  fs.watch( 'example.xml', function ( curr, prev ) {
    fs.readFile( 'example.xml', function ( err, data ) {
      if ( err ) throw err;
      parser.parseString( data );
    });
  });
  parser.addListener('end', function( result ) {
    result.time = new Date();
    socket.volatile.emit( 'notification' , result );
  });
}); 
```

result.time 每次都不同（仅用于我的测试）

有没有人有同样的“问题”，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:32:51.717

我可以想象问题是每次套接字连接时，您都会将新的**“结束”事件**附加到`parser`对象。

因此，第一个要连接的套接字将附加一个“结束”事件。下一个要连接的套接字将附加另一个套接字，并且因为它是[一个侦听器数组](http://nodejs.org/docs/v0.6.20/api/events.html#events_emitter_addlistener_event_listener)，所以它将被添加到堆栈中，因此您最终会收到 N 个“结束”事件，依此类推...

当解析完成时，它将发出“结束”事件。如果您附加了 2、3 个或更多“结束”事件，它将触发 N 次。所以你的逻辑有问题。除非您处理重复项，否则您不能将连接事件附加到已初始化的对象（可能是单例对象）。

我建议您在 io.sockets.on('connection') 事件之外附加“结束”事件，并在此处传递对套接字的引用，以便您知道向谁发送通知。

```
parser.parseString( data, **socket** ); 
```

我希望它对你有帮助。

# c# - 如何将数据表转换为相关数据集

> ID：11710760
> 
> 赞同：10
> 
> 时间：2012-07-29T16:13:30.090
> 
> 标签：c#, datatable, dataset

我在 DataTable 中对数据进行了非规范化。

数据包含员工姓名，以及他们在一系列薪酬周期中获得的薪酬。IE：

我的数据表包含：

```
Employee 1  &nbsp; Jan-1-2012  &nbsp;  $100
Employee 2  &nbsp; Jan-1-2012  &nbsp;  $300
Employee 1  &nbsp; Feb-1-2012  &nbsp;  $400
Employee 2  &nbsp; Feb-1-2012  &nbsp;  $200
Employee 1  &nbsp; Mar-1-2012  &nbsp;  $150
Employee 2  &nbsp; Mar-1-2012  &nbsp;  $325 
```

如何将此数据加载到父 DataTable 包含员工姓名而子 DataTable 包含薪水详细信息的 DataSet 中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-29T16:20:17.837

DataSet 只不过是 DataTables 的集合。所以要将数据表“加载”到 dataSet 中简单添加它：

```
 DataTable employees = new DataTable();
        DataTable payCheckes = new DataTable();
        DataSet ds = new DataSet();
        ds.Tables.Add(employees);
        ds.Tables.Add(payCheckes); 
```

你想以某种方式“组合”数据表吗？获取每个员工的薪水？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T16:52:06.313

无需手动插入的代码：

```
 DataSet ds = new DataSet();
        DataTable dtemploye = new DataTable();
        DataTable dtpayment = new DataTable();

        ds.Tables.AddRange(new DataTable[] { dtemploye, dtpayment });
        DataColumn dcIdemploye = dtemploye.Columns["ID_EMPLOYEE"];
        DataColumn dcIdemployeprice = dtpayment.Columns["ID_EMPLOYEE"];
        DataRelation drrelation = new DataRelation("relemploy_payment", dcIdemploye, dcIdemployeprice);
        ds.Relations.Add(drrelation); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T16:30:40.573

```
 DataSet ds = new DataSet();
        DataTable dtemploye = new DataTable();
        DataColumn dcnameemploye = new DataColumn();
        DataColumn dcIdemploye = new DataColumn();
        dtemploye.Columns.AddRange(new DataColumn[]{dcnameemploye,dcIdemploye});

        DataTable dtpayment = new DataTable();
        DataColumn dtprice = new DataColumn();
        DataColumn dtDate = new DataColumn();
        DataColumn dcIdemployeprice = new DataColumn();
        dtpayment.Columns.AddRange(new DataColumn[]{dcIdemployeprice,dtprice,dtDate});

        DataRow drrowemploy = dtemploye.NewRow();
        drrowemploy[0] = "1";
        drrowemploy[1] = "Employee 1";
        dtemploye.Rows.Add(drrowemploy);

        DataRow drrowpayment = dtpayment.NewRow();
        drrowpayment[0] = "1";
        drrowpayment[0] = "01/01/2012";
        drrowpayment[1] = " 300";

        ds.Tables.AddRange(new DataTable[]{dtemploye, dtpayment});

        DataRelation drrelation = new DataRelation("relemploy_payment", dcIdemploye, dcIdemployeprice);
        ds.Relations.Add(drrelation); 
```

# iphone - 在 iPhone 上处理用户自定义视图的标准方法？

> ID：11710764
> 
> 赞同：0
> 
> 时间：2012-07-29T16:13:56.660
> 
> 标签：iphone, ios, user-interface, user-experience

这是一个两部分的问题。

我们的 iPhone 应用程序有一个需要用户自定义的屏幕。这是一个带有 4-5 个可自定义插槽的简单屏幕。用户将能够从他们希望在视图中看到的 wiglets/控件列表中进行选择。他们应该能够重新排序小部件并在他们认为合适的时候添加/删除。

下面是一个 UI 模型，展示了这样的小部件屏幕是如何工作的。用户将按住屏幕上的任意位置，它将进入编辑模式，类似于删除应用程序的工作方式。然后，他们有机会从仪表板中删除应用程序，并使用底部的托盘添加新应用程序。

1.  这是在 iPhone 上处理此类视图的适当方式吗，如果不是，那么哪里是一个好的起点？任何要查看的链接或视图/控件将不胜感激。

2.  当然，这里描述的所有内容都可以使用 UIView 作为基础从头开始实现，但是 Apple 提供的现有视图可以帮助我吗？

**用户界面样机**

1 - 现有小部件
2 - 小部件可用的空白点
3 - 可用小部件

![用户界面样机](../Images/7715cf0d4878031d43a0258fb3d2baa8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:26:09.987

我会让每个小部件成为一个自定义的 UIView 子类，然后将它们作为子视图添加到主视图中。至于特定的类，您可以为小部件放置区域使用自定义的 UITableView（带有自定义 UITableViewCells）。您可以使用自定义 UIView 和四个定位的 UIView 轻松实现小部件选择区域。您也可以考虑[AQGridView](https://github.com/AlanQuatermain/AQGridView/)。

Apple 没有为此提供任何标准化的视图类。

# c# - 在 WPF 中保存动态创建的对象

> ID：11710770
> 
> 赞同：1
> 
> 时间：2012-07-29T16:14:15.030
> 
> 标签：c#, wpf, visual-studio, save

在我的 WPF 应用程序中，我有一个呈现给用户的表单，用户填写的表单是关于，例如一个位置。然后使用这些表单条目从自定义类构造对象，并在下一个视图中显示有关输入位置的详细信息。

我需要的是一种能够保存动态创建的对象的方法，这样当应用程序关闭并重新打开时，我可以显示以前输入的对象的名称属性，以便用户可以重新打开以前输入的对象中的数据。

认为我可以将它们序列化为 .osl 文件，但这只会保存公共值。所以我在想一定有一个更简单的方法

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:20:22.740

阅读有关`.Net Serialization`.

```
 [Serializable]
    class Person
    {
        public int Age { get; set; }
        public string Name { get; set; }
    }
    [Serializable]
    class Address
    {
        public string City { get; set; }
    }

static public void SerializeToXML(Person p, Address add)
        {
            IFormatter formatter = new BinaryFormatter();
            using (FileStream stream = new FileStream(@"C:\data.xml", FileMode.Create, FileAccess.Write, FileShare.None))
            {
                formatter.Serialize(stream, p);
                formatter.Serialize(stream, add);
            }
        }
        static void DeserializeFromXML()
        {
            IFormatter formatter = new BinaryFormatter();
            using (FileStream stream = new FileStream(@"C:\data.xml", FileMode.Open, FileAccess.Read, FileShare.None))
            {

                Person p = (Person)formatter.Deserialize(stream);
                Address add = (Address)formatter.Deserialize(stream);
            }
        } 
```

采用：

```
Person p = new Person { Age = 23, Name = "Ram" };
            Address add = new Address { City = "Khurja,India" };
            SerializeToXML(p, add);
            DeserializeFromXML(); 
```

这样你就可以序列化/反序列化你想要的任何东西。

# javascript - 执行延迟循环的 Javascript 对象

> ID：11710775
> 
> 赞同：0
> 
> 时间：2012-07-29T16:14:45.837
> 
> 标签：javascript

我想在页面加载时在我的网页上“旋转”多个数字，给人一种像水果机的印象。

这涉及一个带有延迟循环的简单函数。这样做的方法似乎是[递归地使用 setTimeout](https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop)。这仅适用于页面上的一个数字。

但是，对于同时旋转的多个数字，每个数字都需要自己的微调器对象。我使用了这样的原型：

```
var Spinner = function(id){
    this.element = $('#' + id);
    this.target_value = this.element.text()
    this.initial_value = this.target_value - 30;
};

Spinner.prototype.spinUp = function() {

    loop(this.element); 

    function loop(element) {
        element.html(this.initial_value += 1);
        if (this.initial_value == this.target_value) {
                return;
            };
        clr = setTimeout(loop(element), 30);  // 30 millisecond delay
    };
};

var Spinner1 = new Spinner('number')

Spinner1.spinUp(); 
```

然而，在原型方法中放置一个递归函数会导致很大的崩溃。你能找到解决办法吗？

非常感谢！

德里克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:17:39.543

当你说：

```
clr = setTimeout(loop(element), 30); 
```

您正在“调用”该函数（然后在那里），并将它作为第一个参数返回的值传递给`setTimeout(..)`.

您需要一个匿名函数来完成这项工作：

```
setTimeout(function(){loop(element);}, 30); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:21:18.117

几个问题：

*   `loop()`不是传递函数的方式，而是**调用**函数的方式。
*   您没有将函数作为对象的方法调用

试试这个：

```
Spinner.prototype.spinUp = function() {
    var loop = function() {
            this.element.html(this.initial_value += 1);
            if (this.initial_value == this.target_value) {
                return;
            };
            setTimeout(loop, 30); // 30 millisecond delay   
        }.bind(this); //Just flat out bind the function to this instance so we don't need to worry about it
    loop();
}; 
```

演示[http://jsfiddle.net/KAZpJ/](http://jsfiddle.net/KAZpJ/)

# c#-4.0 - 单一共享数据库，流畅的 NHibernate，许多客户端

> ID：11710776
> 
> 赞同：0
> 
> 时间：2012-07-29T16:14:57.393
> 
> 标签：c#-4.0, fluent-nhibernate

我正在开发库存应用程序（C# .net 4.0），它将同时清点数十个工作站并将结果写入中央数据库。为了让我不必编写 DAL，我正在考虑使用以前从未使用过的 Fluent NHibernate。

允许作为独立应用程序运行的库存应用程序使用 Nhibernate 直接与数据库对话是安全且良好的做法吗？或者我应该使用客户端服务器模型，其中对数据库的所有访问都是通过服务器读取/写入数据库。换句话说，如果当前盘点有 50 个工作站，那么将有 50 个活动数据库会话。我正在考虑使用 GUID-Comb 作为 PK ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:25:26.250

根据将部署应用程序的环境，您还应该考虑到出于安全原因，可能并不总是允许直接将数据库连接到中央服务器。

使用 WCF（使用 ）创建简单的 REST 服务`WebServiceHost`并简单地 POST 或 PUT 库存数据（使用`HttpClient`）可能会提供一个很好的选择。

因此，客户端可以变得非常简单，并且可以轻松地为其他系统（linux？android？）编写，并且服务器可以完全控制数据的存储方式和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:57:03.907

这取决于 ;）

NHibernate 具有乐观的并发控制 ootb，这对于许多情况来说已经足够了。因此，如果您只是在 50 个不同的站点上创建数据，应该没有问题。如果在一个站点上创建数据依赖于来自所有站点的数据，那么它会变得很棘手，而中央服务器会有所帮助。

# php - 从 Javascript 创建的 HTML 字符串中的 PHP 变量

> ID：11710777
> 
> 赞同：0
> 
> 时间：2012-07-29T16:15:01.013
> 
> 标签：php, javascript, html, ajax

我正在尝试使用一些简单的 AJAX，然后通过 HTML 字符串传递我的变量。

努力获取一些 PHP 以将值打印到字符串中。一直在尝试这样，即使有分配给 $user_id 的值，变量也会打印空白。

```
 xmlhttp.open("GET","update.php?user=<?php $user_id ?>&q="+str,true); 
```

关于如何做到这一点或更好的解决方案的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:16:34.070

你忘了`echo`：

```
xmlhttp.open("GET","update.php?user=<?php echo $user_id; ?>&q="+str,true) 
```

# wpf - 如何将应用程序语言切换为当前用户的语言？

> ID：11710781
> 
> 赞同：1
> 
> 时间：2012-07-29T16:15:41.203
> 
> 标签：wpf, xaml, localization

默认情况下，WPF 应用程序使用系统的语言。如何在我的 WPF 应用程序中使用当前用户的语言？

**编辑：**默认情况下，WPF 调度程序使用当前用户语言。这种行为是我程序中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:26:09.297

您可以查看[WPF 多语言](http://www.codeproject.com/Articles/20109/WPF-Multi-Lingual-at-Runtime)以了解如何在运行时动态切换应用程序区域设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:32:30.493

我需要通过编组使用 GetUserDefaultUILanguage 函数。C# CultureInfo 类包含 InstalledUICulture 属性，但它使用 GetSystemDefaultUILanguage 函数并返回系统语言。

**编辑：**我们也可以通过反射使用 CultureInfo.UserDefaultUICulture。

# java - Java HashTable 并发

> ID：11710782
> 
> 赞同：2
> 
> 时间：2012-07-29T16:15:43.617
> 
> 标签：java, multithreading, concurrency, hashtable

我有一个 Java 代码，它通过以下方式在哈希表中搜索值：

```
class HTDemo {
    public static void main(String args[]) {
        Hashtable balance = new Hashtable();
        double bal;
        balance.put("John Doe", new Double(3434.34));
        balance.put("Tom Smith", new Double(123.22));
        balance.put("Jane Baker", new Double(1378.00));
        balance.put("Todd Hall", new Double(99.22));
        balance.put("Ralph Smith", new Double(-19.08));

        **System.out.println("John Doe's balance: " + balance.get("John Doe"));**
        **System.out.println("Tom Smith's balance: " + balance.get("Tom Smith"));**
        **System.out.println("Jane Baker's balance: " + balance.get("Jane Baker"));**
    }
 } 
```

现在，我想在多个线程上运行它，即我想以这样的方式修改代码，因此 get 方法（在**内部）同时工作。任何人都可以帮助我如何做到这一点。实际上，我遇到了传递哈希表并在运行时使其并发的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:37:09.803

Hashtable 是同步的，因此已经是线程安全的。在多线程环境中，您不需要任何其他东西来安全地访问您的代码。

但是，HashTable 已经过时了，由于实现的线程安全机制（所有方法都是同步的），它在高并发环境中的性能会很差，并且提供的迭代器不是线程安全的，如果您在修改表时会失败迭代。

底线：使用 ConcurrentHashMap，并尽可能使用泛型：

```
Map<String, Double> balance = new ConcurrentHashMap<String, Double> (); 
```

您的其余代码应保持不变。

您还需要记住的一件事是，即使使用线程安全的数据结构（无论是 HashTable 还是 ConcurrentMap），您仍然需要处理诸如 atiomcity 之类的并发问题。

例如，如果您检查余额以授权这样的付款：

```
double johnBalance = balance.get("John");
if(johnBalance > paymentAmount) 
    authorisePayment();
else
    declinePayment(); 
```

存在原子性问题：John 帐户上的余额可能在调用`balance.get(...)`和付款授权之间发生了变化。

如果这是您的用例之一，您将需要引入额外的同步层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:17:32.897

看看[`ConcurrentHashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

> ...
> 
> ***支持检索**的完全并发和可调整的预期更新并发的哈希表。*
> 
> ...

要并行化这三行，你可以简单地做

```
String[] users = { "John Doe", "Tom Smith", "Jane Baker" };
for (final String user : users) {
    new Thread() {
        public void run() {
            System.out.println(user + "'s balance: " + balance.get(user));
        }
    }.start();
} 
```

如果您实际上有一个稍微复杂的场景，我建议您查看`ExecutorService`相关类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T16:19:28.680

你不能。HashTable 的所有方法都是同步的。请参阅 Javadoc。使用 HashMap，或者，如果您需要线程*安全（*您没有提到），则使用 ConcurrentHashMap。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T16:39:03.017

也许您在 hashmap 上使用 Hashtable 是因为您想要访问您的多线程环境。好吧，这些同步集合现在已经过时了，因为它们确实不能解决同步问题。他们实际上已经雾化了添加或删除。但他们没有解决一个简单的场景，即在地图中您需要先检查密钥是否存在，然后再添加。

Collection.synchronozimap() 在解决并发问题方面领先一步。但它们在密集的多线程环境中也失败了。

最终首选的方法是使用并发 API。他们通过方法 ConcurrentMap.putIfAbsent 解决了我上面描述的一些问题。

# c++ - 我应该对要包装的结构使用转换运算符吗？

> ID：11710791
> 
> 赞同：1
> 
> 时间：2012-07-29T16:16:34.340
> 
> 标签：c++, oop, type-conversion, operator-overloading

我在 C++ 类中包装了一个结构和与该结构相关的函数。

```
class Surface
{
public:
   operator SDL_Surface* () { return this->surf_; } // good idea?
private:
   SDL_Surface* surf_;      
} 
```

在这种情况下使用转换运算符是个好主意吗？还是我会遇到问题？有什么选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:22:27.223

这是一个非常糟糕的主意。`SDL_Surface*`应该完全封装在类中，只能由属于您的 SDL 抽象一部分的其他类访问。此外，您应该聪明地指向它以确保它被安全销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:19:21.597

我建议使用`std::shared_ptr<SDL_Surface>`with`SDL_FreeSurface`作为自定义删除器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T19:41:38.723

显式是好的，内式是坏的。

标准库中的示例：要将 a 转换`std::string`为`char const*`，您必须调用`c_str()`. 这使您免于在没有注意到涉及转换的情况下做不圣洁的事情，并且可以防止函数重载导致令人惊讶的结果。

作为任何经验法则，这条规则有例外。它不应该代替思考。但一般来说，隐式转换需要非常充分的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:44:52.017

**这取决于**.

**如果**您的表面旨在作为 SDL_Surface 的**扩展**，并且必须参与 SDL_Surface 涉及的所有操作/功能，您可能希望有一种方法来公开“基本”元素。

但是，与其从类返回指针（在表达式中具有不同间接级别的东西），您可能最好返回引用或成本引用或两者兼而有之：

```
class Surface
{
public:
   operator SDL_Surface& () { return *surf_; }
   operator const SDL_Surface& () const { return *surf_; }
private:
   SDL_Surface* surf_;      
} 
```

（注意：避免使用 C#-ish Javanese`this->xxxx`风格......）

**如果**您的 Surface**只是另一件事**，需要一个 SDL_Surface 才能使用，那么 bat 拥有所有其他应用程序域，那么应该没有可用的隐式转换。

**注意：** 在上面的注释中，我没有对 Surface 和 SDL_Surface 的生命周期或所有权做任何假设。我只是假设这两个对象在必须参与任何操作时都存在。谁创造和摧毁它们，以什么顺序和时间，都是另一回事。请注意，引用计数智能指针的使用并不能解决一般问题：除非您没有定义所有权方向，否则忘记支持的指针`shared_ptr`只是由于循环引用而导致内存泄漏的好方法。一个非常常见的错误，尤其是来自 Java 程序员的错误。

故事的寓意：在决定如何创建和删除它们之前，确定你想对这些对象做什么，“指针”的巫王用来保存它们，是否启用或不启用隐式转换以及哪个。

# java - 如何使用 Eclipse 构建 GUI？（我只想使用 swing/awt 而没有其他包）

> ID：11710793
> 
> 赞同：8
> 
> 时间：2012-07-29T16:16:45.500
> 
> 标签：java, eclipse, user-interface, ide

我通常使用简单的文本编辑器和 .bat 文件编写 java 代码来编译和运行。我不习惯 Eclipse 或 Netbeans 之类的 IDE，因此到目前为止我制作的每个 GUI 都是手工编写的。

问题：

*   我可以使用 eclipse 轻松构建 GUI（例如拖放功能）吗？

*   这个生成的代码能否只使用基本的 java 包（swing、awt）而不使用 IDE 提供的任何其他包？

我这样说是因为 - 如果我错了，请纠正我 - 从我目前所读的内容来看，我了解 Eclipse 和其他 IDE 使用它们自己的包（例如，为了实现更好的布局）。我想避免这种依赖，如果可能的话，复制粘贴 Eclipse 生成的代码，然后以我习惯的简单方式工作。

提前致谢。

**[编辑]**
尝试了几天后，我现在可以说**WindowsBuilder**正是我想要的。感谢您的所有回复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T16:25:09.277

Eclipse 使用 Standard Widget Toolkit（SWT，默认情况下不包含在 JRE 中），Netbeans 使用 Swing（包含）。
从最近的 Eclipse 版本开始，它包括[WindowBuilder](http://www.eclipse.org/windowbuilder/)以通过拖放创建 Swing 或 SWT。WindowBuilder 甚至是双向的，因此支持代码生成以及反映手工更改。它不知道 Netbeans 是否也包含此功能。在 Eclipse 的“新建”对话框中，您可以在 WindowBuilder 类别下找到所需的一切。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-17T11:24:01.690

是的，您可以通过以下几个步骤使用java中的拖放功能：

`Help`→ `Eclipse MarketPlace`→`WindowBuilder(Install)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T16:37:23.130

> 我可以使用 eclipse 轻松构建 GUI（例如拖放功能）吗？

是的，去 Marketplace 并拉入 WindowsBuilder；它支持双向GUI拖放/直接代码编辑。

> 这个生成的代码能否只使用基本的 java 包（swing、awt）而不使用 IDE 提供的任何其他包？

Swing 设计工具生成的代码严格基于 Swing/AWT。

它也为 SWT 和 GWT 提供设计工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T16:20:40.990

如果你想创建 Drag n Drop Swing GUI，你应该试试 Netbeans。Eclipse 可能有一个插件，但我通常发现 netbeans 在 GUI 中非常好，Sun 也推荐它用于制作 Swing/AWT GUI

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T17:17:15.420

我还没有在 Eclipse 中看到这样的内容。在 Netbeans 你当然可以。但是我警告你！手动创建 GUI。Netbeans 正在使用 GroupLayout 构建拖放 GUI，当您看到它时，那简直就是一场噩梦！！！如果eclipse也有同样的功能，别指望超过这个了！！除此之外，不像 .NET，大多数 Java 开发人员都是手工创建的（是的，真正的编程......这就是为什么大多数人说 Java 很难）。所以，如果你能习惯它会更好:)

# javascript - 使用ajax提交动态创建的复选框的值

> ID：11710797
> 
> 赞同：0
> 
> 时间：2012-07-29T16:17:08.827
> 
> 标签：javascript, jquery

我有大约二十个使用以下模式动态创建的复选框：

```
<input type="checkbox" id="cb01" name="vehicle" /> 
```

我给它一个 cb + index 的 ID 和一个对应于数据库条目的 name 属性。

那么回到我的问题：

循环检查复选框性能的最佳方法是什么？我需要发送复选框的名称和值。

我更喜欢将数据作为 jsonstring ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:21:22.550

首先，我会给他们一个共同的课程。比方说`cb`。

然后：

```
var json = {};
var checkboxes = document.querySelectorAll('.cb');
for ( var i = 0, l = checkboxes.length; i < l; i++ )
    json[ checkboxes[i].name ] = checkboxes[i].checked; 
```

或者使用 jQuery：

```
var json = {};
$('.cb').each(function(){
    json[ this.name ] = this.checked;
}); 
```

# magento - 未找到帮助程序类

> ID：11710802
> 
> 赞同：1
> 
> 时间：2012-07-29T16:17:41.977
> 
> 标签：magento, admin

我正在尝试开发一个扩展来在 Magento 的管理端添加一个表单，但是，由于某种原因，我似乎无法在安装我的模块时加载 Magento 管理。我正处于开发的最开始，我遇到了一个在 StackOverflow 上多次报告的错误。不幸的是，在我的情况下，这些答案似乎都没有帮助。

我得到的错误是 *Fatal error: Class 'Mage_Mycompany_Logviewer_Helper_Data' not found in C:\XAMPP\htdocs\magento\app\Mage.php on line 546*。这应该意味着 Magento 找不到帮助程序类，但它在那里并且它的名称与它正在寻找的那个匹配（除了开头的“Mage_”，我从来没有在任何其他扩展中使用过）。

**更新 2012/07/29**
一旦我登录到 Magento Admin，就会发生错误。当我单击“登录”时，我得到的只是一个错误页面，没有呈现任何内容。

这是我到目前为止所有文件的内容。

**配置文件**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mycompany_Logviewer>
            <version>0.1.0</version>
        </Mycompany_Logviewer>
    </modules>

    <global>
        <models>
            <logviewer>
                <class>Mycompany_Logviewer_Model</class>
            </logviewer>
        </models>
        <blocks>
            <logviewer>
                <class>Mycompany_Logviewer_Block</class>
            </logviewer>
        </blocks>
        <helpers>
            <logviewer>
                <class>Mycompany_Logviewer_Helper</class>
            </logviewer>
        </helpers>
    </global>

    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <mycompany_logviewer after="Mage_Adminhtml">Mycompany_Logviewer_Adminhtml</mycompany_logviewer>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>

    <adminhtml>
        <menu>
            <mycompany translate="title" module="mycompany_logviewer">
                <title>Mycompany</title>
                <sort_order>90</sort_order>
                <children>
                    <form translate="title" module="mycompany_logviewer">
                        <title>Form</title>
                        <sort_order>10</sort_order>
                        <action>adminhtml/logviewer</action>
                    </form>
                </children>
            </mycompany>
        </menu>

        <acl>
            <resources>
                <all>
                    <title>Allow Everything</title>
                </all>
                <admin>
                    <children>
                        <mycompany>
                            <title>Mycompany</title>
                            <sort_order>90</sort_order>
                            <children>
                                <form>
                                    <title>Form</title>
                                    <sort_order>10</sort_order>
                                </form>
                            </children>
                        </mycompany>
                    </children>
                </admin>
            </resources>
        </acl>
    </adminhtml>
</config> 
```

**Data.php（助手）**

```
class Mycompany_Logviewer_Helper_Data extends Mage_Core_Helper_Abstract
{
} 
```

**LogviewerController.php（控制器）**

```
class Mycompany_Logviewer_Adminhtml_LogviewerController extends Mage_Adminhtml_Controller_Action
{
    /**
    * View form action
    */
    public function indexAction() {
        $this->loadLayout();
        $this->_setActiveMenu('Mycompany/form');
        $this->_addBreadcrumb(Mage::helper('Mycompany_Logviewer')->__('Form'), Mage::helper('Mycompany_Logviewer')->__('Form'));
        $this->renderLayout();
    }

    /**
    * Check allow or not access to ths page
    *
    * @return bool - is allowed to access this menu
    */
    protected function _isAllowed()
    {
        return Mage::getSingleton('admin/session')->isAllowed('Mycompany/form');
    }
} 
```

**Mycompany_Logviewer.xml（配置文件）**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mycompany_Logviewer>
            <active>true</active>
            <codePool>local</codePool>
        </Mycompany_Logviewer>
    </modules>
</config> 
```

[以上所有内容都是从我在网上找到](http://turnkeye.com/blog/magento-admin-form/#more-1789)的示例中复制的，我只是将 Namespace 和 Module 名称分别替换为*Mycompany*和*Logviewer*。我很确定这很明显我忘记了，但我不知道它可能是什么。谢谢您的帮助。

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:36:24.193

跳出来的第一件事是您正在注册一个名称为的模块 `Procedo_Logviewer`- 实际上它应该是`Mycompany_Logviewer`

所以，`Mycompany_Logviewer.xml`应该如下：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mycompany_Logviewer>
            <active>true</active>
            <codePool>local</codePool>
        </Mycompany_Logviewer>
    </modules>
</config> 
```

更改后清除缓存

**编辑**

更仔细地查看您的控制器，我还可以看到您正在调用您的助手，如下所示：

```
Mage::helper('Mycompany_Logviewer') 
```

你应该像这样调用你的助手：

```
Mage::helper('logviewer') 
```

**编辑 2**

您的 config.xml 中存在另一个问题

```
module="mycompany_logviewer" 
```

应该

```
module="logviewer" 
```

这与您在 xml 中声明的辅助节点相关，即

```
<helpers>
    <logviewer>
        <class>Mycompany_Logviewer_Helper</class>
    </logviewer>
</helpers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T11:19:54.903

我有类似的问题。解决方案是这样输入公司名称：

```
<helpers>
    <Mycompany_Logviewer>
        <class>Mycompany_Logviewer_Helper</class>
    </Mycompany_Logviewer>
</helpers> 
```

* * *

```
$myHelper= Mage::helper('Mycompany_Logviewer'); 
```*

# asp.net - 多个按钮可以使用相同的 ModalPopupExtender 窗口吗？

> ID：11710808
> 
> 赞同：0
> 
> 时间：2012-07-29T16:18:20.733
> 
> 标签：asp.net, .net, ajax, modalpopupextender

我的页面上有一个地址列表，每个地址都有一个编辑按钮。单击编辑时，我想使用相同的 ModalPopupExtender。这可能吗？

谢谢。我正在使用 asp .net 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:43:18.247

你是从数据库中获取列表吗？如果是，请使用 gridview 之类的数据控件并使用模板字段作为编辑按钮。[使用模式弹出添加编辑 Gridview](http://www.aspsnippets.com/Articles/Add-Edit-Update-Records-in-GridView-using-Modal-Popup-in-ASP.Net.aspx)

# javascript - jquery .html中的html标签

> ID：11710809
> 
> 赞同：1
> 
> 时间：2012-07-29T16:18:22.397
> 
> 标签：javascript, jquery, html

我对以下代码有问题，显然我需要以某种方式逃避一些 html contet，但我不明白问题出在哪里以及如何解决它，请帮助:)

```
$(".alert_window_content").html('<div style="margin-top:15px; position:absolute; right:5; width:250px; z-index:2; opacity:0;"><input type="file" id="X" name="X" onChange="GetDiretory()"\>
</div>
    <div class="X">
<form><input class="X" type="button" value="X"></input><div class="X" style="background-color:white; width:160px; height:19px; float:right; margin-right:3px; margin-top:2px;">
</div>
    <div style="display:inline-block;"><input class="X" type="submit" name="X" value="X"\></div>
</form>
</div>
<div class="X" style="display:inline-block; margin-top:10px;"></div>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:19:32.200

不确定我是否正确理解了您的问题，但如果您希望 html 标签显示为可读内容，您应该使用`.text()`而不是`.html()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:24:22.967

如果您想在 .alert_window_content 中包含 HTML 代码，那么您需要使您的 HTML 代码更有效：

```
$(".alert_window_content").html('<div style="margin-top:15px; position:absolute; right:5; width:250px; z-index:2; opacity:0;"><input type="file" id="X" name="X" onChange="GetDiretory()"></div><div class="X"><form><input class="X" type="button" value="X"><div class="X" style="background-color:white; width:160px; height:19px; float:right; margin-right:3px; margin-top:2px;"></div><div style="display:inline-block;"><input class="X" type="submit" name="X" value="X"></div></form></div><div class="X" style="display:inline-block; margin-top:10px;"></div>'); 
```

不知道是不是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:26:15.930

我认为这是因为您所有的输入标签都由 \ 即关闭，

你写

```
<input ...... \> 
```

而不是

```
<input ....... /> 
```

# java - 使用 JDBC 读取 Oracle DB 中的 XMLType 列

> ID：11710811
> 
> 赞同：0
> 
> 时间：2012-07-29T16:18:36.240
> 
> 标签：java, sql, oracle, jdbc, xmltype

我正在尝试`Clob`使用 JDBC 将 XMLType 列读入类型变量。执行此操作时出现错误....有什么想法吗？

```
java.sql.SQLException: Invalid column name
    at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
    at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:131)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:197)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:269)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:490)
    at oracle.jdbc.driver.OracleStatement.getColumnIndex(OracleStatement.java:3353)
    at oracle.jdbc.driver.OracleResultSetImpl.findColumn(OracleResultSetImpl.java:1883)
    at oracle.jdbc.driver.OracleResultSet.getClob(OracleResultSet.java:358)
    at persistance.FilmDAO.findFilmsWithXML(FilmDAO.java:626) 
```

这是我的代码：

```
public ArrayList<FilmBean> findFilmsWithXML() throws SQLException {

        ArrayList<FilmBean> filmList = new ArrayList<FilmBean>();

        try {
            currentConnection = ConnectionPool.getInstance().getConnection();

            String searchQuery = SqlHelper.getInstance().getSqlQuery(705);

            System.out.println("Query: " + searchQuery);

            currentStatement = currentConnection.prepareStatement(searchQuery);

            currentResultSet = currentStatement.executeQuery();

            while (currentResultSet.next()) 
            {
                FilmBean filmDTO = new FilmBean();
                filmDTO.setFilmId(Integer.parseInt(currentResultSet.getString("PK_ID_FILM")));
                filmDTO.setPoster(currentResultSet.getString("POSTER"));
                filmDTO.setTitle(currentResultSet.getString("TITLE"));
                filmDTO.setXml(currentResultSet.getClob("MYXML"));
                filmList.add(filmDTO);
            }
        }
        [...]
    } 
```

该`setXml()`方法将`Clob`类型值设置到`filmDTO`模型中的对象中。

**编辑**

查询缺少别名：

```
SELECT to_clob("MYXML") As MYCLOB, PK_ID_FILM, POSTER, TITLE FROM FILM Where MYXML is not null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:44:34.180

您在 之后缺少别名`to_clob(XMLElement("MYXML"))`。该列`MYXML`在查询中不存在。

# ruby - 通过正则表达式对数组进行排序的更好方法？

> ID：11710820
> 
> 赞同：2
> 
> 时间：2012-07-29T16:19:41.797
> 
> 标签：ruby, regex, arrays, sorting

我有这个数组：

```
arr = ["/Users/user/Documents/public/170/41/texts/10.txt",
        "/Users/user/Documents/public/170/41/texts/11.txt",
        "/Users/user/Documents/public/170/41/texts/12.txt",
        "/Users/user/Documents/public/170/41/texts/14.txt",
        "/Users/user/Documents/public/170/41/texts/15.txt",
        "/Users/user/Documents/public/170/41/texts/18.txt",
        "/Users/user/Documents/public/170/41/texts/6.txt",
        "/Users/user/Documents/public/170/41/texts/8.txt"] 
```

我想按 .txt 文件的整数值对其进行排序。我正在这样做：

```
arr.sort_by{|h| h.scan(/(\d+)\.txt/).flatten[0].to_i} 
```

我想知道 - 有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T16:30:58.273

使用[`basename`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-basename)而不是自己解析路径：

```
arr.sort_by { |path| File.basename(path, '.txt').to_i } 
```

这会显着提高性能（`arr`大小为 20,000）：

```
require 'benchmark'

Benchmark.bm(12) do |x|
    x.report("regex: ") { arr.sort_by { |h| h.scan(/(\d+)\.txt/).flatten[0].to_i } }
    x.report("basename: ") { arr.sort_by { |path| File.basename(path, '.txt').to_i } }
end

#                   user     system      total        real
# regex:        0.170000   0.010000   0.180000 (  0.169097)
# basename:     0.020000   0.000000   0.020000 (  0.022535) 
```

# actionscript-3 - 在 Actionscript 3 中的两个静态类之间共享信息

> ID：11710822
> 
> 赞同：0
> 
> 时间：2012-07-29T16:19:57.067
> 
> 标签：actionscript-3, class, singleton

我有一个复杂的情况需要解决，因为这超出了我的范围。

我创造：

*   **游戏：****A 类的**实例（使用单例模式构建的静态类）
*   **问题：****B**类的实例（使用单例模式构建的静态类，每次用户从 A 类实例中选择一个选项时都会创建和删除该类）
*   **分数：****C类**实例（公共功能）

问题是**Score**实例是在**Game**实例中创建的，因为分数一直显示。**问题**实例具有每个问题的结果，具体取决于用户选择，因此，我需要知道这一点，因为我拥有所有代码，但只保留了这一部分，因此很难在此处粘贴：

有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:09:16.233

你应该：

```
//document class
package 
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class DocumentClass extends Sprite 
    {
        public static var GAME;
        public function DocumentClass() {
            addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event){
            removeEventListener(Event.ADDED_TO_STAGE, init);
            GAME = new Game();
        }
    }
}
//Game class
package 
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Game extends Sprite 
    {
        public var score:int;
        public function Game() {
            addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event){
            removeEventListener(Event.ADDED_TO_STAGE, init);
            //some functions/listeners & variable settings.
            score = 0;
        }
        private function someFunction() {
            stage.addChild(new HighscoreTable(score));//passing score to the highscore table...
        }
    }
} 
```

静态类（仅包含静态变量和没有构造函数的函数）通常没用..尝试将它与其他“技巧”结合起来。

# sql-server - 创建新客户时出错 - MVC ADO.NET

> ID：11710830
> 
> 赞同：0
> 
> 时间：2012-07-29T16:20:35.027
> 
> 标签：sql-server, asp.net-mvc, ado.net

在 MVC 应用程序中填写表单时出现以下错误：

```
UpdateException was unhandled by user code

Unable to update the EntitySet 'Customer' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation. 
```

我的客户表有：**ID (PK)、姓名、年龄、地址和时间戳。**

该表格只允许填写姓名和地址（不知道为什么 - 我是 MVC 的新手，ADO.NET 顺便说一句）

这是我的代码：

```
 [HttpPost]
    public ActionResult Create(Customer customer)
    {
        customer.ID = 5;
        db.Customers.AddObject(customer);
        db.SaveChanges();
        return View();
    } 
```

我暂时将 customer.ID = 5 作为硬编码的临时解决方案留下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:38:35.510

您的客户表中有**主键吗？**当您的表上没有主键或您的实体集与数据库视图映射时，会出现此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:43:56.893

如果`ID`是您的主键，为什么要更新它？您应该更新其余的属性。

```
[HttpPost]
public ActionResult Create(Customer customer)
{
    customer.Name= "New name";
    db.Customers.AddObject(customer);
    db.SaveChanges();
    return View();
} 
```

# winforms - 在搜索文本框中键入字符时如何突出显示 datagridview 行

> ID：11710835
> 
> 赞同：0
> 
> 时间：2012-07-29T16:21:11.243
> 
> 标签：winforms, c#-4.0, linq-to-sql, datagridview

使用文本框在给定的 datagridview 列中搜索值，下面的代码将所选行定位在包含输入文本的列上。

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        //if (Char.IsLetter(e.KeyChar))
        //{
            for (int i = 0; i < (productDataGridView.Rows.Count); i++)
            {

                if (productDataGridView.Rows[i].Cells[1].Value.ToString().StartsWith(textBox1.Text, true, CultureInfo.InvariantCulture))
                {
                    productDataGridView.FirstDisplayedCell = productDataGridView[1, i];
                    productDataGridView.CurrentRow.DefaultCellStyle.BackColor = System.Drawing.Color.Red;
                    return; // stop looping 
                }
            }
     } 
```

问题是在文本框中输入时我无法突出显示或更改所需行的背景颜色，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:16:57.430

试试这个

```
 //restore backcolor of rows to default e.g. loop through grid and set backcolor to white
       foreach(DataGridViewRow row in productDataGridView.Rows)
        {
           if (row.Cells[1].Value.ToString().StartsWith(textBox1.Text, true,     CultureInfo.InvariantCulture))
            {
                //productDataGridView.FirstDisplayedCell = productDataGridView[1, i];
                row.DefaultCellStyle.BackColor = System.Drawing.Color.Red;
                return; // stop looping 
            }
            else
              //Set backcolor to default
        }

        //return; //move return here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T23:01:55.367

尝试了这个解决方案，这最终就像一个魅力：

```
 try
        {
            productDataGridView.ClearSelection();   //or restore rows backcolor to default
            for (int i = 0; i < (productDataGridView.Rows.Count); i++)
            {
                if (productDataGridView.Rows[i].Cells[1].Value.ToString().StartsWith(textBox1.Text, true, CultureInfo.InvariantCulture))
                {
                    productDataGridView.FirstDisplayedScrollingRowIndex = i;
                    productDataGridView.Rows[i].Selected = true; //It is also possible to color the row backgroud
                    return;
                }
            }
        }
        catch (Exception) 
        { 
        } 
```

# php - 使用 Dreamweaver（或其他软件）编辑根目录外的文件夹

> ID：11710844
> 
> 赞同：0
> 
> 时间：2012-07-29T16:22:04.293
> 
> 标签：php, dreamweaver, root

我使用一个名为“IP-Symcon”的基于 Windows 的家庭控制软件。它的核心是一个使用 PHP 控制各种设备的调度程序/后台处理程序。此外，它还提供了一个 Web 服务器，可公开目录“C:\IP-Symcon\Webfront\User”。所有 Symcon 特定的变量和命令也可用于内部网站。

我使用 Dreamweaver 构建黄色站点中的所有内容。有记录温度、风和雨的东西，用于归档的 postgres 接口，以及用于可视化的 Jquery 东西。

问题是蓝色目录（C:\IP-Symcon\scripts）。该目录包含所有 IP-Symcon 内部脚本，它们都使用 PHP。我也想为此使用 Dreamweaver，因为内部 IP-Symcon 编辑器非常可悲。但是，该目录位于网站之外，因此不受限制。有没有办法说服 Dreamweaver 合并 Web 根目录之外的文件夹？

![在此处输入图像描述](../Images/371fc96ec7d42b9d87e496b61a28353a.png)

# django - 在 Django 1.4 中，未记录的 Form.has_changed() 和 Form.changed_data 是否按预期工作？

> ID：11710845
> 
> 赞同：20
> 
> 时间：2012-07-29T16:22:05.370
> 
> 标签：django, django-forms

从源代码中，您可以看到 Django 1.4 的`Form`类有一个`has_changed()`方法和`changed_data`属性，看起来相当有用，但没有记录。我的问题是：按预期进行这些工作，即：

*   在`Form.clean()`,如果任何表单数据发生变化则`Form.has_changed()`返回，否则`True``False`
*   在`Form.clean()`,`Form.changed_data`中是值已更改的字段名称列表。

如果是这样，除了关于使用未记录功能的常见警告/危险（即可能会更改、不受支持等）之外，是否有任何不使用它们的具体原因？

注意 1：要使这些与自定义小部件一起使用，这些小部件需要有一个`_has_changed()`方法，该方法是为内置小部件定义的。

注 2：有趣的是，文档确实包含了对该方法的临时提及`Formset.has_changed()`，但没有提及`Form.has_changed()`.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-14T14:12:53.820

在进一步研究了 Django 源代码之后，借助 Florian 的回答中的有用提示，我可以报告这一点`has_changed`并`changed_data`按照我的问题中描述的方式进行工作，*只要*表单有办法获取初始数据来比较新数据。

那么问题来了，从 POST 数据创建的表单如何知道 GET 表单的初始值是什么？简短的回答是它没有——除非你以某种方式告诉它。有两种方法可以告诉它：

1.  通过`initial`表单的关键字参数和/或`initial`字段的关键字参数，与您告诉 GET 表单初始值的方式完全相同。注意：如果你这样做，你需要确保你的 GET 和 POST 表单使用相同的值。这是唯一真正可靠的方法，因为您可以直接控制初始值。

2.  您让 Django 通过为每个适用字段设置`show_hidden_initial`关键字参数来完成从 GET 中记住初始值的工作。`True`对于这些字段，Django 将具有初始值的隐藏输入元素呈现到 GET 表单的 HTML 中。稍后，当您调用POST 表单时`has_changed`，`changed_data`对于任何带有`show_hidden_initial`as的字段， `True`Django 将自动从 POST 数据中的隐藏输入元素中获取初始值（取代来自`initial`表单或字段参数的任何初始值）。注意：与任何依赖 POST 数据的方法一样，这种方法最终是不可靠的，因为隐藏输入的值尽管被隐藏，但仍然可以更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T15:09:26.120

您可以在两个条件下依赖这些方法：

1.  您也可以在发布请求期间将初始数据字典传递给表单构造函数。
2.  您不使用带有`show_hidden_initial=True`. （这些字段的问题是用户也可以提交用于比较的初始值，因此它不可信。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-31T07:03:13.540

这是一段代码，可以满足@Ghopper21 的建议。为了获取初始数据，我使用 QueryDict 上的 values() 函数。它返回一个包含属于该对象的数据的字典。一个重要的警告是我没有检查它如何处理外键引用。

```
saveStudentView(request,studentID):
    existingData = Student.objects.filter(id=paperID).values()[0]
    form = StudentForm(request.POST)
    if form.is_valid():
        form = StudentForm(request.POST, initial=existingData)
        if not form.has_changed():
            //Tell the user nothing has changed
        else:
            //Do other stuff 
```

# jquery - 将转义的 HTML 内容渲染为 DOM 中的 HTML

> ID：11710847
> 
> 赞同：3
> 
> 时间：2012-07-29T16:22:09.743
> 
> 标签：jquery, html

我有一个转义的 html 。我希望使用 js 或 jquery 将其呈现为 HTML 组件。任何想法？

要渲染的 HTML `"&lt;strong&gt;Direct Cost Savings, Oracle CRM ReplacementÂ &lt;/strong&gt; &lt;ul&gt;&lt;li&gt;x users, y portal users&lt;/li&gt;&lt;li&gt;Integrations: Cisco (CTI), Cognos &lt;/li&gt;&lt;li&gt;Replacements: Oracle CRM (on-premise), RightNow&lt;/li&gt;&lt;li&gt;First of five phased deployments completed&lt;/li&gt;&lt;/ul&gt;"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:24:44.760

用于`.text()`通过首先渲染等来获取括号输出`&lt;`，并将该文本设置为 html 源：

```
var container = $('#render-target');
container.html(htmlToRender);
container.html(container.text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:27:48.293

你可以这样做：

```
$('#item').html($("<div/>").html(yourString).text()); 
```

# jsf - 限制复合组件的放置

> ID：11710849
> 
> 赞同：2
> 
> 时间：2012-07-29T16:22:36.177
> 
> 标签：jsf, composite-component

是否可以以可以将其放置在某些标签内的方式声明复合组件？

例如：

```
<span>
    <n:myComponent/>
</span> 
```

将是非法的，而：

```
<div>
    <n:myComponent/>
</div> 
```

将是合法的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:53:37.873

不是在构建时，而是在渲染时，您可以检查组件的兄弟姐妹。

```
public void encodeChildren(FacesContext context) {
    List<UIComponent> children = getParent().getChildren();
    // Loop over children until you find a child which equals to "this".
    // Then check if the previous and next sibling contains <span> and </span>.
    // ...

    if (valid) {
        super.encodeChildren(context);
    } else {
        throw new IllegalArgumentException("n:myComponent can't be placed inside <span>");
    }
} 
```

您可以在引用的`UINamingContainer`实现中执行此操作。`@FacesComponent``<cc:interface componentType>`

# php - PHP MYSQL 更新表

> ID：11710850
> 
> 赞同：0
> 
> 时间：2012-07-29T16:22:45.883
> 
> 标签：php, mysql

我正在使用 MYSQL 和 php 将数据插入到我的 sql 中。

我有两个表用户和用户权限。

我正在使用复选框在用户编辑页面上显示权限。当取消选择或选择权限时，我不会更新我的用户权限表。

```
CREATE TABLE userrights (
  userid int(11) NOT NULL default '0',
  right_name varchar(50) collate latin1_general_ci NOT NULL default '',
  PRIMARY KEY  (userid,right_name)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci;

INSERT INTO userrights (userid, right_name) VALUES
(1, 'add'),
(1, 'delete'),
(1, 'edit'),
(1, 'view'),
(2, 'add'),
(2, 'delete'),
(2, 'edit'),
(2, 'view');

CREATE TABLE users (
  id int(11) NOT NULL,
  `name` varchar(100) collate latin1_general_ci default NULL,
  email varchar(100) collate latin1_general_ci default NULL,
  pass varchar(42) collate latin1_general_ci default NULL,
  PRIMARY KEY  (id)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci;

INSERT INTO users (id, name, email, pass) VALUES
(1, 'name', 'email@email.com', '5f4dcc3b5aa765d61d8327deb882cf99'),
(2, 'name name', 'email2@email.com', '1a1dc91c907325c69271ddf0c944bc72'); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:24:42.560

我以前也遇到过类似的问题。

我想出的解决方案是截断表格并重新插入所有选定的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:08:54.103

你得到复选框的数据（真或假）

```
$rows = mysql_num_rows(mysql_query("SELECT * FROM userrights WHERE id = 'x' and right_name = 'y'"); // Please use insted of mysql_* PDO or MySQLi 
if ($rows > 0)
{
        if ($checkbox == false)
        {
        mysql_query("DELETE FROM userrights WHERE id = 'x' AND right_name = 'y'");
        }
}
else
{
// Recht nicht vorhanden --> if checkbox == true
      if ($checkbox == true)
      {
      mysql_query("INSERT INTO... VALUES ($id, $right_name)
      }
} 
```

首先，您检查用户是否有权。如果是，您需要检查右侧（来自复选框的数据）是否设置为 false --> 从表中删除该行。如果用户没有该权限并且复选框为真，则必须将其插入到 mysql_table 中。注释必须更改为代码中的 if 子句。

# jquery - 如何将事件和参数传递给 javascript 函数？

> ID：11710855
> 
> 赞同：0
> 
> 时间：2012-07-29T16:23:31.313
> 
> 标签：jquery

我有以下内容：

```
var oTable = $('#dataTable').dataTable({
    iDisplayLength: -1,
    ...
    ...

$("#dataTable tbody").on("click", "tr", gridClickHandler);

function gridClickHandler(oTable) {
    $(oTable.fnSettings().aoData).each(function () {
        $(this.nTr).removeClass('row_selected');
    });
    $(this).addClass('row_selected'); 
```

有人告诉我 $(this) 事件将传递给函数，但我还需要传递其他内容，因为我发现它给出了与 oTable 相关的错误。

如何修改对 gridClickHandler 和 gridClickHandler 函数的调用，以便它传递对 oTable 的引用，并且 $(this) 也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:31:47.097

您可以使用匿名函数：

```
$("#dataTable tbody").on("click", "tr", function(event) { gridClickHandler(oTable); } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:32:29.187

如果变量`oTable`在外部范围内声明，`gridClickHandler`函数将可以访问它，因此您不需要手动传递它。事实上，事件处理程序接收事件对象作为第一个参数，因此您实际上是在*隐藏*TABLE 引用。

例如：

```
var foo = 123;

var clickHandler = function ( foo ) {    
    // here, foo is not 123, but the event object  
    // the outer variable foo is shadowed by the local variable foo  
}; 
```

只需删除第一个参数：

```
var gridClickHandler = function () { 
```

现在，`oTable`从外部范围检索。

（另请注意，我如何将匿名函数表达式分配给变量，而不是使用函数声明。）

顺便说一句，在函数内部，`this`指的是 TR 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:42:50.833

试试这个：

```
$("#dataTable tbody").on("click", "tr", gridClickHandler);
gridClickHandler.oTable = oTable;

function gridClickHandler(event) {
    $(oTable.fnSettings().aoData).each(function () {
        $(this.nTr).removeClass('row_selected');
    });
    $(event.target).addClass('row_selected');
} 
```

# windows-8 - 使用 MVVM Light 在 Windows 8 中实现状态处理

> ID：11710859
> 
> 赞同：6
> 
> 时间：2012-07-29T16:24:30.283
> 
> 标签：windows-8, mvvm-light, windows-runtime

我如何使用 mvvm light 实现状态处理（运行/恢复/终止状态）。面临的主要问题是导航。我完全不受导航堆栈的控制。我如何使用 MVVM Light 有效地管理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:08:16.387

使用 GridView 或 SplitView 模板启动一个新项目，并查看**Common**文件夹中的**SuspensionManager.cs 。**它有一个名为 RegisterFrame 的方法，当被调用时，它会开始跟踪框架中的所有导航事件，并在应用程序挂起和恢复时尝试保存关闭和恢复状态。

 **应用程序主框架在 App.OnLaunched (App.xaml.cs) 中向 SuspensionManager 注册，并在 App.OnSuspending 中完成保存。

最后，看看**LayoutAwarePage.cs**，也在**Common**文件夹中。您可以从 LayoutAwarePage 继承来获得 Portrait 和 Snapped 设计时支持。它还尝试通过利用 SuspensionManager 来处理导航状态缓存。因此，无论您的页面是从另一个页面导航到还是作为简历的一部分，都会使用正确的数据调用虚拟方法**LoadState 。**

显然，这种模式直接在页面本身中管理导航状态，但是您可以调整这种模式以创建一种“SuspensionService”，您的 ViewModel 可以以同样的方式利用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:10:08.847

您可能对 CodePlex 和 NuGet 上免费提供的开源[Okra App Framework](http://okra.codeplex.com)感兴趣（免责声明：我是该项目的首席开发人员）。这是从头开始为 Windows 8 应用程序设计的，特别是那些使用 MVVM 模式的应用程序（您仍然可以使用 MVVM Light 基类来定义您的视图模型）。

特别感兴趣的包括，

*   了解 Windows 8 导航模型的导航管理器
*   可以在应用程序终止时自动保持其状态的导航堆栈
*   一种视图模型保持自己状态的机制（通过一个简单的接口）
*   自动视图和视图模型构建和连接（默认使用 MEF 属性）**

# java - 搜索引擎地址查询

> ID：11710861
> 
> 赞同：2
> 
> 时间：2012-07-29T16:24:41.873
> 
> 标签：java, html

我正在使用 Java 应用程序构建搜索引擎。我设法让它在 BING 上工作

```
 String BingaSearch = "http://www.bing.com/search?q=";
 String AskaSearch = "http://www.ask.com/web?q=";
String YahooaSearch = "http://sg.search.yahoo.com/search?fr=chr-greentree_ie&ei=utf-8&type=937811&p="; 
```

Ask和yahoo搜索不起作用，如果有人可以为我提供正确的查询或像bing这样的搜索引擎，我正试图让我的项目在2个引擎而不是1个引擎上搜索。

非常感谢您的帮助，谢谢！如果您有任何简单易用的 API，也请分享，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:52:38.540

好吧，看看雅虎！他们有一个名为[Yahoo!的网站。](http://developer.yahoo.com/search/boss/)搜索带有定价关税的[BOSS 。](http://developer.yahoo.com/search/boss/)所以我猜他们不希望人们能够以您尝试的方式简单地向 URL 发出请求。查看他们编码的搜索 URL，旧的 q= 查询字符串似乎不再有效。

如果雅虎！不希望您直接向他们的搜索 URL 发出请求，那么如果他们检测到来自应用程序的严重流量，他们可能会禁止来自您的应用程序的请求。所以我认为你需要看看他们的 Search BOSS 服务，看看它是否能满足你的需求。这样您就不必担心您的应用程序被阻止。

# facebook - 优化 FB 社交插件性能

> ID：11710871
> 
> 赞同：1
> 
> 时间：2012-07-29T16:25:32.700
> 
> 标签：facebook

我正在阅读这篇关于优化社交插件性能的文章

[http://developers.facebook.com/blog/post/530/](http://developers.facebook.com/blog/post/530/)

本文介绍了如何使用`channelUrl`文件`channel.html`。

问题是这篇文章是关于 XFBML 社交插件的，而我正在使用 HTML5 社交插件。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://example.com" data-num-posts="2" data-width="470"></div> 
```

我的问题是如何和/或是否仍需要将`channelUrl`with`channel.html`与 HTML5 社交插件一起使用？我找不到任何关于`channelUrl`HTML5 社交插件上下文的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:24:48.413

无论您是通过 XFBML 还是 HTML5 标签嵌入插件，都没有太大区别。它们都被 JS SDK 解析，这就是在后台发出一些跨域请求的原因，而 channel.html 文件是加速这些请求的一种手段~~在旧浏览器中~~.

因此，为了清楚地回答您的问题：**是**的，您应该为您的 channel.html 文件提供一个地址，无论您是使用 XFBML*还是*HTML5 标签来嵌入社交插件。

# npapi - NPAPI 加载第三方 DLL

> ID：11710876
> 
> 赞同：0
> 
> 时间：2012-07-29T16:26:12.017
> 
> 标签：npapi

我正在开发一个 NPAPI Firefox 插件，我有一个问题。

我需要加载第三方 DLL（例如 D:\mydll.dll），但在某些计算机上 mydll.dll 不在系统路径或 c:\windows\system32 中，并且出现加载错误。

这是代码：

```
SetCurrentDirectory ("d:\");
m_hModule = LoadLibrary ("mydll.dll"); 
```

LoadLibrary 返回 126。我检查了 DEPENDS.EXE 以查看依赖模块，一切看起来都很好。我不知道问题是什么。

另一个问题是我希望插件在 Safari 中工作（我的 safari 是 5.17 版）。我将它复制到 Safari 的插件目录中，它告诉我找不到插件。我想知道如何解决这个问题。

谢谢，请原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:00:37.813

在插件中设置当前目录并不总是有效，因为您不拥有该进程。您想要的命令是[SetDllDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)。

```
SetDllDirectory("D:\");
m_hModule = LoadLibrary("mydll.dll"); 
```

当然，我不建议您假设 DLL 位于驱动器的根目录中 =] 我要做的是将您需要的 DLL 与插件 DLL 放在同一目录中，然后您可以获得DLL 使用[GetModuleFilename](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)。

对于安装，而不是将插件放在 firefox（或 safari）目录中的 plugins/ 目录中，您应该[通过 windows 注册表安装它](https://developer.mozilla.org/en/Gecko_Plugin_API_Reference/Plug-in_Development_Overview#Windows_Installation_Using_the_Registry)。这将使它对 firefox、chrome 和 safari 可见。

您可能需要考虑使用[FireBreath](http://firebreath.org)而不是自己实现 NPAPI 接口；它处理了大部分棘手的部分，让您可以专注于插件的重要部分。

# html - 转换为无表布局

> ID：11710879
> 
> 赞同：0
> 
> 时间：2012-07-29T16:26:22.543
> 
> 标签：html, css, css-tables

我目前正在使用 1 个表格来对齐网站的 2 个主要部分。它现在给我带来了问题，所以我想使用纯 CSS。

我在左侧有一个 205px 宽的导航栏。占据右边的其余空间，我想要一个容器（所以在屏幕的右侧，占用屏幕宽度 - 200 像素）这个容器没有固定的高度，但我想要它的顶部与导航栏的顶部对齐。

这是我目前拥有的[**演示**](http://jsfiddle.net/jcmRM/)`。`

 `我希望解决方案与此类似，但不使用表格，并使容器的顶部与侧边栏的顶部对齐。

我已经做了几次尝试（在我开始使用桌子之前和之后），但他们都没有远程工作。我作为最后的手段来到这里，所以我希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:35:22.473

[小提琴](http://jsfiddle.net/dipaks2011/jcmRM/1/)

```
.container{height: 100%; border: 1px solid #0f0; display: table;}
#sidebar{
    width:40%; height: 100%; display: table-cell; background: #ccc;    
}
#sidebar2{
    width:60%; height: 100%; display: table-cell; background: #f00;    
}
body, html {
    height:100%;
} 
```

HTML

```
<div class="container">
  <div id="sidebar">links and whatnot go here</div>
  <div id="sidebar2">this is the container (but its top is not aligned with the sidebar as I would like)</div>    
</div> 
```

注意：支持 IE8+ 支持 table-cell 属性

**编辑：** 如果您不能使用表格单元格，那么您必须使用一些 jquery 来计算高度。检查[这个小提琴](http://jsfiddle.net/f3k95/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:45:12.717

我会做这样的事情：

. HTML：

```
<div id="container">
    <aside id="sidebar">Links and whatnot</aside>
    <section id="content">Content and whatnot</section>
</div> 
```

. CSS：

```
html, body {
    width: 100%;
    height: 100%;
}

div#container {
    height: 100%;
}

aside#sidebar {
    background-color: #f00;
    width: 205px;
    min-height: 100%;
    float: left;
}

section#content {
    background-color: #0f0;
    min-height: 100%;
} 
```

你可以看到它在[**这个 fiddle**](http://jsfiddle.net/6Jh7V/)中工作。`

# c# - 如何在单个控制台主机中托管多个 WCF 服务？

> ID：11710893
> 
> 赞同：3
> 
> 时间：2012-07-29T16:28:41.857
> 
> 标签：c#, .net, visual-studio-2010, wcf, wcf-hosting

我在两个单独的 DLL 文件中有两个 WCF 服务。我想将它们托管在一个自托管项目（控制台主机）中。

我正在尝试使用以下代码执行此操作，但出现此异常：

> 'System.ServiceModel.Diagnostics.TraceUtility' 的类型初始化程序引发了异常。

C#代码：

```
public static void Main(string[] args)
{
    new Program().inital();
}

private void inital()
{
    ServiceHost myService = new ServiceHost(typeof(ClientNotificationService));
    ServiceHost myService2 = new ServiceHost(typeof(ServerNotificationService));

    try
    {
        myService.Open();
        myService2.Open();
        Console.ReadLine();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
        Console.ReadLine();
    }
} 
```

在`App.config`：

```
<system.serviceModel>
<services>
  <service name="ClientNotification.ClientNotificationService">
    <endpoint address="net.tcp://localhost:7081/CVClientNotificationService"
      binding="netTcpBinding" contract="ClientNotification.IClientNotification">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/ClientNotification/ClientNotificationService/" />
      </baseAddresses>
    </host>
  </service>
</services>
<services>
  <service name="ServerNotification.ServerNotificationService">
    <endpoint address="net.pipe://localhost/ServerNotificationService" binding="netNamedPipeBinding"
    contract="ServerNotification.IServerNotification">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/ServerNotification/ServerNotificationService/" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T12:25:54.090

此错误的原因

> `The type initializer for 'System.ServiceModel.Diagnostics.TraceUtility' threw an exception.`

当`TraceUtility`尝试在名为 的内部方法中初始化其事件跟踪时触发`SetEtwProviderId()`。

检查内部异常显示：

> `Configuration system failed to initialize`

其内部异常显示：

> 每个配置文件中的部分只能出现一次。

因此，错误的不是您的代码，而是您的配置文件。

我可以看到这方面的混乱可能从哪里开始。当您将 Wcf 库项目添加到解决方案时，您会在其 app.config 中找到它：

```
 <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="WcfServiceLibrary2.Service1">
      <!-- rest omitted for brevity --> 
```

所以指令是将该配置添加到您的托管应用程序的 app.config 中，但对于要复制的内容并不是很明确。

您最终需要一个有效的 app.config。您将元素复制`<services>`到应用程序主机的 app.config 中。现在您有 2 个`<services>`元素，这是一个无效的配置部分。而是将 的子元素复制`<services>`到 app.config 中的单个`<services>`元素。

所以要清楚：

```
<!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <!-- COPY FROM HERE ...  -->
      <service name="WcfServiceLibrary2.Service1">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8733/Design_Time_Addresses/WcfServiceLibrary2/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address="" binding="basicHttpBinding" contract="WcfServiceLibrary2.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. --> 
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
      <!--
     .... TO HERE to the app.config of your application hosts config file
       -->
    </services> 
```

假设您已经有一个基本`system.serviceModel`配置。

如果 Visual Studio 没有抱怨您的配置文件，您始终可以启动 WCF 服务配置编辑器（在 VS 的工具菜单下或配置文件的上下文菜单中）来检查 WCF 配置。如果它坏了，它会向你吠叫。

# android - 套接字无法在android中连接

> ID：11710900
> 
> 赞同：0
> 
> 时间：2012-07-29T16:29:13.950
> 
> 标签：android, sockets, port

所以我有这段代码，我在任何地方都成功使用过，直到我在 android 项目中尝试过。这是代码，它是最简单的代码。

```
try {
   Socket socket = new Socket();
   socket.connect(new InetSocketAddress(ip, port), timeout);
   socket.close();
   openPorts.add(port);
    } catch (Exception ex) {

    } 
```

这段代码似乎在每个端口上都失败了，并认为它们已关闭，即使相同的代码在桌面上运行良好。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:43:12.427

您应该修改您的`AndroidManifest.xml`文件并请求一个名为`INTERNET`：http: [//developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

# javascript - 在书签中转义原始的、未转义的字符串

> ID：11710901
> 
> 赞同：1
> 
> 时间：2012-07-29T16:29:14.353
> 
> 标签：javascript, string, google-chrome, escaping, bookmarklet

我正在尝试编写一个搜索引擎书签（用于 Chrome），但在转义字符串时遇到了麻烦。

例如，如果搜索引擎书签如下：

```
javascript:alert("%s"); //%s is the search engine query, passed literally by chrome. 
```

然后在以下字符串上运行它会得到不正确的结果：

```
c:\zebra

c:zebra instead of c:\zebra 
```

如果斜线后面的字符恰好是一个实际的转义字符，那么结果会因字符而异。

我已经尝试转义和取消转义字符串，我尝试对其进行 reg-ex'ing，并用双斜杠替换斜杠，但我无法找到一种方法来让它工作，因为第一次原始string 进入脚本，未转义，之后的任何操作都会看错。

如何正确处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:22:54.327

到目前为止，我只能在 chrome 中完成这项工作：

```
javascript: var str = (function(){STARTOFSTRING:/*%s*/ENDOFSTRING:;}).toString().match( /STARTOFSTRING:\/\*([\s\S]*)\*\/ENDOFSTRING:/ )[1]; alert(str); 
```

写 c:\zebra 将提醒 c:\zebra。

不幸的是，Firefox 在反编译时不支持函数体内的注释。

您也不能`*/`在字符串中写入序列，但其他所有内容都应按字面意思传递，包括引号`"` `'`等

# javascript - 我可以创建一个链接，如果它已安装，它将在我的应用程序中打开，如果没有，则回退到不同的 URL？

> ID：11710902
> 
> 赞同：10
> 
> 时间：2012-07-29T16:29:19.330
> 
> 标签：javascript, html, ios, url-scheme

用户可以通过 twitter 从我们的应用程序中共享文件。推文包含一个指向我们服务器的 URL，它检测用户是否在移动设备上，并使用我们应用程序的自定义方案重定向到一个 URL，以便在我们的应用程序中打开链接。

这适用于桌面用户和安装了我们应用程序的移动用户；但它不适用于不这样做的移动用户。所以我们想要做的是向所有用户显示一个包含链接的页面，当按下该链接时，如果支持，它将使用自定义 URL 方案打开应用程序，并打开一个不同的 URL，用户可以在其中下载我们的如果没有应用程序。

所以我正在寻找的是一个看起来有点像这样的 HTML 或 JS 的答案：

```
<a href="ourapp://www.ourdomain.com/files/12345"
   fallbackhref="http://www.ourdomain.com/buyourapp">Click to download</a> 
```

那可能吗？如果是这样，我们该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-10T08:29:06.220

您可以使用以下代码在 Android 中实现此目的：

```
function openLink () {
    var appWindow = window.open("ourapp://www.ourdomain.com/files/12345","_blank");
    setTimeout( function () {if (appWindow) {
        appWindow.location ="http://www.ourdomain.com/buyourapp";
            }
            },1000);
} 
```

`openLink()`单击链接时调用该函数（否则浏览器将阻止新窗口弹出）。

iOS 会因为它处理自定义方案的方式而有所不同。

对于 iOS，您需要执行以下操作：使用以下代码片段创建 2 个 HTML 文件

文件 #1：这是您打开应用程序/回退到网站的链接

```
<script type="text/javascript">
function openLink (url,customURI) {
    window.open("file2.html?lp="+url+"&customURI="+customURI,"_blank");
}
</script>
<img src="IMAGE SOURCE" onclick="openLink('LANDING PAGE','CUSTOM URI')"> 
```

文件#2：

```
<html>
<script>
function openApp () {
    var start, end, elapsed;
    var params =   window.location.href.split("lp=")[1];
    var url     =   params.split("&customURI=")[0];
    var customURI     =   params.split("&customURI=")[1];
    var time = (new Date()).getTime();
    document.location       =       customURI+url;        
    setTimeout(function(){
            var now = (new Date()).getTime();
            if((now - time)<2550) {
            javascript: console.log(new Date().getTime());
                            document.location = url;
            }
            else{
            window.open('', '_self', '');
                    window.close();
        }
    }, 2000);

}
</script>
<body onload="openApp()">
    <a onclick="openApp()" id="newButton">Click Here to open the App</a>
</body> 
```

希望这可以帮助 ：）

# php - 访问 SimpleXMLElement 对象值

> ID：11710903
> 
> 赞同：1
> 
> 时间：2012-07-29T16:29:29.647
> 
> 标签：php, xpath, simplexml, associative-array

我有以下 SimpleXMLElement 对象[http://pastebin.com/qEP0UUPJ](http://pastebin.com/qEP0UUPJ)

我可以使用 xpath 查询它，`$xaugbp = $xml->xpath("/query/results/rate");`但这只会缩小搜索范围：

[http://pastebin.com/Xwezx4bZ](http://pastebin.com/Xwezx4bZ)

我希望访问以下对象：

```
[0] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [id] => XAUGBP
            )

        [Name] => XAU to GBP
        [Rate] => 1030.5784
        [Date] => 7/27/2012
        [Time] => 5:55pm
        [Ask] => 1027.5662
        [Bid] => 1033.5896 
```

我可以使用

```
$ob = $xmlObject->xpath("//query/results/rate[contains(@id, 'XAUGBP')]"); 
```

我可以通过使用“询问”

```
$ob = $xmlObject->xpath("//query/results/rate[contains(@id, 'XAUGBP')]/Ask"); 
```

但是我如何把那个对象变成一个变量。例如，以便我可以对其进行计算？

xpath 是唯一的方法吗？有没有更好/更有效/更快的方法？是否可以将其转换为关联数组以便于访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:17:33.497

**前言**

在您做*任何事情*之前，（重新）熟悉一下 SimpleXML 独特的做事方式。最好的起点是[**SimpleXML 基本使用**](http://php.net/simplexml.examples-basic)手册页。

* * *

下面的示例向您展示：

*   `<rate>`根据属性的值获取单个元素对象，以及如何显示它。
*   循环遍历所有`<rate>`元素并显示它们的值。

**基本示例代码**

```
$query = simplexml_load_file('…');

// Get a <rate> element by its id attribute
$rates = $query->xpath('results/rate[@id = "XAUGBP"]');
$rate  = $rates[0];
echo "$rate->Name was at $rate->Rate at $rate->Time on $rate->Date\n";

echo "-----\n";

// or, loop over all of the <rate> elements
foreach ($query->results->rate as $rate) {
    echo "$rate->Name was at $rate->Rate at $rate->Time on $rate->Date\n";
} 
```

上面的示例输出：

```
XAU to GBP was at 1030.5784 at 5:55pm on 7/27/2012
-----
XAU to GBP was at 1030.5784 at 5:55pm on 7/27/2012
XAG to GBPZ 999 N was at 17.4502 at 5:55pm on 7/27/2012
XPT to GBPZ 999 was at 893.3414 at 5:55pm on 7/27/2012
XPD to GBP1 UZ was at 362.652 at 5:55pm on 7/27/2012 
```

（[见这个在线运行的例子](http://so.viperpad.com/bbxl9q)）

* * *

**XML 到数组**

我看到这个问题一次又一次地被问到。与其把对象树变成一些“友好的”数组，不如`SimpleXMLElement`花时间学习如何使用 SimpleXML：一旦你做到了，就不需要采取将对象变成数组的中间步骤来使用. 上面提到的“基本用法”页面应该可以帮助您入门，但要了解的关键点是：

1.  子节点使用属性语法：`$parent->child`
2.  属性使用数组样式的语法：`$element["attr_name"]`
3.  在需要时将对象转换为友好类型：`(string) $element->child`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:33:21.400

XPath 查询应该是`"//query/results/rate[contains(@id, 'XAUGBP')]"`

# alfresco - 如何通过 RESTful API 在 Alfresco 中创建文件夹

> ID：11710908
> 
> 赞同：4
> 
> 时间：2012-07-29T16:30:42.103
> 
> 标签：alfresco

我正在为 Android使用[Freshdocs](https://github.com/freshdocs/cmsandroid)

我可以使用这个 API 调用登录到 Alfresco 服务器：

```
GET /alfresco/service/api/login?u={username}&pw={password?} 
```

但是如何在 Alfresco 中创建一个新文件夹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:48:03.813

有两个主要选项，但这取决于您还想做什么，以及您正在运行什么版本的 Alfresco。

假设你想让事情变得非常简单，并且你只想创建一个文件夹，并且你使用的是 Alfresco 4.1 或更高版本，那么你可以使用`org.alfresco.repository.node.folder.post`webscript。为此，只需像这样发布 JSON

```
 { "name": "NewNodeName" } 
```

或者

```
{  
   "name": "NewNodeName",
   "title": "New Node Title",
   "description": "A shiny new node",
   "type": "cm:folder"
} 
```

到 API，它需要一个类似的 URL`/api/site/folder/{site}/{container}/{path}`

或者，如果您想要执行许多不同的文件和文件夹操作（例如导航文件夹结构、创建文件夹、上传文件等），那么您应该改用[CMIS](http://cmis.alfresco.com/)。[Apache Chemistry](http://chemistry.apache.org/)是一个用于 CMIS 的优秀库，它甚至还有一个 Android 客户端！android 客户端的文档仍在编写中（仅添加了 Android 端口），因此如果您没有时间等待文档，您可能需要在[邮件列表中询问。](http://mail-archives.apache.org/mod_mbox/chemistry-dev/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T08:08:31.923

要通过 api 创建文件夹，您可以使用以下查询：

a) 使用父文件夹的完整路径创建定义类型的文件夹

```
 url: "/../alfresco/service/api/site/folder/" + siteName + "/documentLibrary/" + parentFolderPath
       method: "POST"
       json: {
           name: name
           type: folderType
       } 
```

siteName - 在 Alfresco 中创建的网站名称；

parentFolderPath - 父文件夹的路径；

名称 - 文件夹名称；

类型 - 文件夹类型。

例子：

```
 url: "/../alfresco/service/api/site/folder/example/documentLibrary/books"
       method: "POST"
       json: {
           name: "Pushkin"
           type: "cm:folder"
       } 
```

发出请求后，将创建“Pushkin”文件夹。此文件夹位于“示例”网站上文档库的“books”文件夹中。

b) 通过 nodeRef 创建文件夹

nodeRef 是 Alfresco 中的对象 id。每个对象都有自己的 nodeRef。此请求在文件夹类型的给定对象内创建新对象。

```
 xml = '<?xml version="1.0" encoding="utf-8"?>' + '<entry xmlns="http://www.w3.org/2005/Atom"
    xmlns:cmisra="http://docs.oasis-open.org/ns/cmis/restatom/200908/"
    xmlns:cmis="http://docs.oasis-open.org/ns/cmis/core/200908/">' +
           '<title>' + folderName + '</title>' +
           '<summary>' + folderName + '</summary>' +
           '<cmisra:object>' +
           '<cmis:properties>' +
           '<cmis:propertyId
    propertyDefinitionId="cmis:objectTypeId">' +
           '<cmis:value>' + folderType + '</cmis:value>' +
           '</cmis:propertyId>' +
           '</cmis:properties>' +
           '</cmisra:object>' +
           '</entry>';
       url: "/../alfresco/service/api/node/workspace/SpacesStore/" +
    nodeRef + "/children"
       method: "POST"
       headers: {
           "Content-Type": "application/atom+xml;type=entry"
       },
       xml: xml 
```

folderName - 文件夹名称；

folderType - 文件夹类型；

nodeRef - Alfresco 中的文件夹 ID。

例子：

```
 nodeRef = b544cd67-e839-4c60-a616-9605fa2affb7;
       xml = '<?xml version="1.0" encoding="utf-8"?>' +
           '<entry xmlns="http://www.w3.org/2005/Atom"
    xmlns:cmisra="http://docs.oasis-open.org/ns/cmis/restatom/200908/"
    xmlns:cmis="http://docs.oasis-open.org/ns/cmis/core/200908/">' +
           '<title>Example of creating a folder</title>' +
           '<summary>Example of creating a folder</summary>' +
           '<cmisra:object>' +
           '<cmis:properties>' +
           '<cmis:propertyId propertyDefinitionId="cmis:objectTypeId">' +
           '<cmis:value>cm:folder</cmis:value>' +
           '</cmis:propertyId>' +
           '</cmis:properties>' +
           '</cmisra:object>' +
           '</entry>';
       url: "/../alfresco/service/api/node/workspace/SpacesStore/" + nodeRef + "/children"
       method: "POST"
       headers: {
           "Content-Type": "application/atom+xml;type=entry"
        },
       xml: xml 
```

您可以在此处找到其他服务及其描述：

[http://jazzteam.org/en/technical-articles/list-of-alfresco-services/](http://jazzteam.org/en/technical-articles/list-of-alfresco-services/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T16:49:10.040

你应该使用 `POST /alfresco/service/api/path/{store_type}/{store_id}/{id}/children`

阅读文档以获取详细信息：

[http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Create_folder_or_document_.28createDocument.2C_createFolder.29](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Create_folder_or_document_.28createDocument.2C_createFolder.29)

# iis - IIS 创建网站

> ID：11710909
> 
> 赞同：0
> 
> 时间：2012-07-29T16:30:57.400
> 
> 标签：iis, iis-7

我正在尝试在我的 IIS 管理器上添加一个新网站。

-> 我的网站名称是“teorikolarak.com”

-> 应用程序池是“DefaultAppPool”

-> 物理路径是“C:\inetpub\wwwroot\teorikolarak.com”

teorikolarak.com 是一个文件，它包含“default.html”页面。

当我单击“测试设置...”按钮时，它不会返回任何错误。一切似乎都很好。

-> 绑定类型：http

-> IP 地址：192.168.2.4

-> 端口：80

-> 主机名：www.teorikolarak.com

我还更新了主机文件。“192.168.2.4 teorikolarak.com”

现在，当我在地址栏上键入 www.teorikolarak.com 时，找不到该站点。另外，我在地址栏输入了 192.168.2.4，默认 IIS7 页面正在打开。为什么会这样？为什么我的 default.html 文件没有出现在我的浏览器上？

Windows7 & IIS7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:42:16.197

你能试着去吗

```
 http://teorikolarak.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:22:54.657

单击 IIS 管理器中的网站，然后按“操作”面板中的“探索”按钮。你看到你的 default.html 文件了吗？如果是这样，请双击“默认文档”功能（在中间面板中）。检查 Default.html 是否被列为有效的默认文档。可能不是。单击“操作”面板中的“添加...”按钮，将“default.html”添加为有效的默认文档。现在它应该可以工作了。

# javascript - div 刷新不能正常使用 ie8

> ID：11710912
> 
> 赞同：0
> 
> 时间：2012-07-29T16:31:20.430
> 
> 标签：javascript, jquery, html, css

我想使用 jquery 每 1 秒从另一个页面获取 div 中的内容它在 Firefox 中运行良好但与 ie8 冲突的问题是它不是每 1 秒后获取内容

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#load_tweets').load('home_add_img.php?v=1').fadeIn("slow");
}, 1000); // refresh every 10000 milliseconds
</script>
<div id="load_tweets" style="width:100px; height:200px;"> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:36:10.587

把它包裹在 $(document).ready(); 它可能会起作用。

```
$(document).ready(function(){
 var auto_refresh = setInterval(function (){
 $('#load_tweets').load('home_add_img.php?v=1').fadeIn("slow");
 }, 1000);
}); 
```

JavaScript 提供了在页面完全加载时执行代码的 load 事件，直到页面的所有内容都渲染到 DOM 中才会触发该事件。所以使用 document.ready 始终是最佳实践。

# c# - 如何捕获 mvc-3 中的 url 进行重定向？

> ID：11710914
> 
> 赞同：2
> 
> 时间：2012-07-29T16:31:54.087
> 
> 标签：c#, asp.net-mvc-3

我正在开发 MVC-3 应用程序。在我的应用程序中，如果用户尝试访问任何装饰为`[Authorize]`的视图，则用户重定向到登录视图，用户将在那里输入凭据并重定向到授权视图（用户想去的地方）。

**问题：**现在如果用户没有帐户，那么他将使用注册链接创建一个。但是在创建新帐户后，用户将重定向到主页。我希望他重定向到授权视图而不是主页。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:40:30.083

您必须将 url 从登录视图传递给注册控制器，然后在控制器周围传递它，直到用户注册，然后重定向回来。相当麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:46:34.840

创建一个派生自 的类`AuthorizeAttribute`，并重写该`OnAuthorization`方法。在此方法中，进行适当的授权检查，如果用户未获得授权，则执行以下代码：

```
var route = new RouteValueDictionary(new { controller = "Account", action = "LogOn", returnUrl = filterContext.RequestContext.HttpContext.Request.RawUrl });
filterContext.Result = new RedirectToRouteResult(route); 
```

然后，在您的授权控制器的登录操作中，添加一个名为`returnUrl`. 在验证用户提供了正确的凭据后，执行以下操作：

```
if (Url.IsLocalUrl(returnUrl))
     return Redirect(returnUrl); 
```

确保注册 MVC 使用的类，方法是将其添加到 Global.asax.cs 中的 Application_start：

```
GlobalFilters.Filters.Add(new AuthorizationAttribute()); 
```

`AuthorizationAttribute`您的派生类的名称在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:53:35.753

You can save in the user's session the authorization page he wanted to see before redirection ... Request.Url.AbsoluteUri. Try using a Filter.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:54:06.247

One simple solution to your problem is to pass the current url to query string from login page (in register link) like this;

```
@Html.ActionLink("Register", "Index", "Account", new { returnUrl Request.Url.PathAndQuery }, null) 
```

so, now you can catch this returnUrl like others in controller method parameter and you can then redirect user back to this returnUrl

# asp.net-mvc - 如何从淘汰赛 mvc 购物车样本中计算购物车总价值

> ID：11710926
> 
> 赞同：5
> 
> 时间：2012-07-29T16:32:57.920
> 
> 标签：asp.net-mvc, knockout.js, knockout-mvc

我正试图了解淘汰赛 mvc 框架。我正在查看[购物车的样本](http://knockoutmvc.com/CartEditor)并试图弄清楚：

1.  **如何计算总成本**
2.  **在哪里添加客户端业务规则（例如折扣和优惠券）**

要计算小计，代码读取

```
@using (lines.If(m => m.ProductId != -1))
{
    using (var product = lines.With(m => ko.Model.DataBase[m.CategoryId].Products[m.ProductId]))
    {
        @product.Html.Span(m => "\\$" + m.Price)                  
    }
} 
```

当我尝试从那里获取总数时，我通常会在运行时遇到编译器异常或 NullReferenceException。例如

```
@using (lines.If(m => m.ProductId != -1))
{
    using (var product = lines.With(m => ko.Model.Categories[m.CategoryId].Products[m.ProductId]))
    {
        @product.Html.Span(m => "\\$" + (lines.Model.Quantity * m.Price))                                                       
        @{double total = lines.Model.Quantity * m.Price;}
    }
} 
```

给我

> 编译器错误消息：CS1501：方法 'Write' 没有重载需要 0 个参数

好像我做错了。有人会指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T00:11:45.400

您是否尝试过从每行的开头删除 @ 符号？我敢肯定，一旦你打开了一个剃刀代码块，你就不需要在每一行前面加上@。另外，不确定为什么“双总数”行包含在 {} 中？

```
@using (var product = lines.With(m => ko.Model.Categories[m.CategoryId].Products[m.ProductId]))
{
    product.Html.Span(m => "\\$" + (lines.Model.Quantity * m.Price));
    double total = lines.Model.Quantity * m.Price;
} 
```

# html - 仅来自一侧的内部阴影，模糊

> ID：11710932
> 
> 赞同：-2
> 
> 时间：2012-07-29T16:34:13.237
> 
> 标签：html, css

我怎样才能在模糊的情况下只从一侧制作**内阴影**`div`？当我使用`blur`阴影在另一边。我正在尝试在[http://inter-dom.com.pl/?page_id=14上的](http://inter-dom.com.pl/?page_id=14)*infotextgorny中使用它* `div`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:40:09.133

尝试使用`:before`或`:after`伪选择器：在对它们应用所需的效果之后，调整它们的大小和位置。因此，通过这种方式，您仍然可以使用主 div 的样式而无需模糊或任何您需要的样式。

# php - 使用php更新mysql不起作用

> ID：11710938
> 
> 赞同：0
> 
> 时间：2012-07-29T16:35:22.223
> 
> 标签：php, mysql, arrays, sql-update

我正在尝试在 foreach 循环中更新我的数据库表，但它似乎不起作用

我不知道问题出在哪里或做错了什么。

```
foreach($ids as $id_number=>$id)
{
    $request = "http://api.twitter.com/1/users/lookup.json?user_id=".$id."";
    $response = file_get_contents($request); 
    $ok = json_decode($response,true);/*print_r($ok);*/
    foreach($ok as $p)
    {
        $location=$p['location'];
        $query=mysql_query("UPDATE tweets SET location=$location 
                        WHERE from_user_id=$id");
    }
    if($query)
        echo'ok';
    else
        echo'no';
} 
```

如果有人知道另一种方法会很有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:36:55.330

尝试`'$location'`代替`$location`：

```
$query=mysql_query("UPDATE tweets SET location='$location' 
                    WHERE from_user_id=$id"); 
```

请记住，这些`mysql_*`功能已弃用，最好使用`MySQLi`或`PDO`

反而

# c - 插件系统中的错误代码和消息处理

> ID：11710939
> 
> 赞同：0
> 
> 时间：2012-07-29T16:35:29.170
> 
> 标签：c, plugins, error-code

我正在思考 C 项目中错误代码的最佳设计和相应的错误消息。该项目由一个提供核心功能的小内核组成，可以通过各种插件进行扩展。内核已经定义了最通用的错误代码，例如 PROJ_NOERR（无错误）或 PROJ_ENOMEM（无可用内存）。此外，插件还应该能够定义特殊的错误代码及其相应的消息，例如，Web 服务器插件可以定义 WEBSERV_ESOCKET（套接字错误）。在我看来，内核还应该提供一个将错误代码转换为相应错误消息的功能，例如 extern char* proj_err2str(enum err_t); 这个函数还应该能够处理所有加载插件的定义错误代码。您将如何实施这样的系统？欢迎任何提示！

在此先感谢，/*乔纳斯*/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:39:22.447

我不太明白你的意思，但这里有一个关于如何创建插件的示例代码：

```
/* This struct  is common to all plugins and the functions defined here must be implemented by all plugins*/
typedef struct
{
  int (*plugin_function_one) (char *str);
  void (*plugin_function_two) (int fd);
  void (*plugin_handle_error) (char *err, int status);
  char plugin_errors_codes[ERR_CODES_NUM]; // Each plugin can add errors code here
} plugin_t; 
```

然后，您可以创建一个插件（plugin_one），例如：

```
int plugin_function_one(char *str)
{
    // Body of function_one
}

void plugin_function_two(int fd)
{
    Body of function_two
}

// Here you have your error handling function for plugin_one

void plugin_handle_error(char *err, int status)
{
    fprintf(stderr,"Plugin --> Got this error: %s and errno = %d", strerror(err), errno);
    // depend on status, we can exist or not for exampe
    if (status)
        exit(EXIT_FAILURE);
} 
```

现在初始化你的插件：

```
plugin_t * plugin_init (plugin_t * p)
{
  /* Plugin init */
  p-> plugin_function_one = plugin_function_one;
  p-> plugin_function_two = plugin_function_two;
  p-> plugin_handle_error = plugin_handle_error;

  /* init the array of errors here */
  init_plugin_errors(p->plugin_errors_codes);
  /* return the newly created plugin */
  return (p);
} 
```

您可以像这样加载和上传所有插件：

```
int plugin_load (char *path_to_your_plugin)
{
    void *dh;
    plugin_t *(*p_init) (plugin_t * p);
    plugin_t dp;

    /* opening plugin */
    dh = dlopen (path_to_your_plugin, RTLD_LAZY);
    if (NULL == dh)
    {
        fprintf (stderr,  "Failed to load '%s' (errno=%d, msg='%s')\n",path_to_your_plugin, errno, strerror (errno));
            exit (EXIT_FAILURE);
        }

    /* Now we look for plugin_init function */
     p_init = dlsym (dh, "plugin_init");
    if (NULL == p_init)
        {
            fprintf (stderr, "Failed to get 'plugin_init'\n");
            dlclose (dh);
            exit (EXIT_FAILURE);
        }

    /* We init the plugin */
    if (NULL == p_init (&dp))
        {
            fprintf (stderr, "Error plugin_init()\n");
            dlclose (dh);
            exit (EXIT_FAILURE);
        }

    …..

    /* Calling plugin functions */
    dp.plugin_handle_error(char *err, int status);
} 
```

并卸载插件：

```
int plugin_unload (char * path_to_your_plugin)
{
    /* Need the address of the loaded plugin to call dlclose, let's call it the_address */
    if (the_adress != NULL)
        fprintf(stdout, "This plugin will be unloaded : %p", the_adress);
    /* close plugin. */
    dlclose (the_adress);

    return 0;
} 
```

要处理不同插件之间的重复错误代码，函数 err2str 需要知道哪个插件正在提交请求：

```
int err2str (plugin_t *plugin, int error_code)
{
    // Lookup in the plugin_errors_codes array
    char *my_error;
    my_error = error_lookup(plugin->plugin_errors_codes, error_code);
    print_error(my_error); 
} 
```

希望这有帮助。

问候。

# android - 未在 Android 应用程序中使用 SD 卡权限，但安装时仍会询问

> ID：11710950
> 
> 赞同：0
> 
> 时间：2012-07-29T16:37:10.760
> 
> 标签：android, android-sdcard, android-permissions

我开发了一个使用以下权限的应用程序。

1.  CALL_PHONE
2.  互联网
3.  ACCESS_NETWORK_STATE

我没有访问整个应用程序中的外部存储，但在设备上安装时它仍然要求存储权限。代码或设备或Android有问题吗？

### 清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nirajburde.free"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3" />
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/ic_logo"
        android:label="@string/app_name"
        android:theme="@style/My_Theme" >
        <activity
            android:name=".MainActivity"
            android:label=""
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SplashScreen"
            android:theme="@style/Theme.Transparent"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"></action>
                <category android:name="android.intent.category.LAUNCHER"></category>
            </intent-filter>
        </activity>
        <activity
            android:name=".NumberList"
            android:label=""
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name=".About"
            android:label=""
            android:screenOrientation="portrait" >
        </activity>
        <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize">
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T21:14:49.317

在[Android DONUT](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#DONUT)之前，SDK 会自动将[`WRITE_EXTERNAL_STORAGE`](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)和添加[`READ_PHONE_STATE`](http://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE)到您的应用程序的权限，因此您可以将您的应用程序定位到 SDK 1.6 或更高版本以避免这种情况。

# facebook - FQL 查询以检索具有特定类别的“页面”的 ID、名称

> ID：11710953
> 
> 赞同：0
> 
> 时间：2012-07-29T16:37:34.810
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我可以通过 Facebook 上的 FQL 页面（ID 和名称）列表查询大学或其他类别的类别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:42:15.940

[https://graph.facebook.com/search?type=page&q=university](https://graph.facebook.com/search?type=page&q=university)

这将返回页面的名称、ID 和类别。然后，您可以过滤掉您的结果，以显示类别中包含特定单词“大学”的结果。

# oop - 基于角色的行为模式

> ID：11710960
> 
> 赞同：0
> 
> 时间：2012-07-29T16:38:52.007
> 
> 标签：oop, design-patterns

我参与了一个应用程序迁移项目。这个应用程序应该根据当前用户角色执行一些逻辑，所以像这样的片段在代码中无处不在：

```
if ("Role1".equals(user.getUserRole())){
    operationVersionForRole1();
} else if ("Role2".equals(user.getRole())){
    operationVersionForRole2();  
} else if ("Role3".equals(user.getRole())){
    operationVersionForRole3();
} 
```

大约有五个角色和近五十个操作，有些角色的操作非常复杂（将近 1000 行代码），因此这种编程风格使源代码变得混乱且难以遵循。是否有任何已知的设计模式可以帮助在这种情况下组织源代码？嵌套的“if-else”感觉不对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:10:38.957

它不是一个*抽象工厂*，它提供了一个接口来创建相关或依赖对象的系列，而无需指定它们的具体类吗？指定的角色将是创建具体实现的参数。并且`operationVersionForRoleX`可以设计为不同的`IOperation`接口实现或策略。

```
interface IOperation  
{ 
    void Execute();
}

class OperationVersionForRoleX : IOperation
{
    public void Execute()
    {
        // …
    }
}

string role = "roleX";
IOperation operation = operationFactory.Create(role);
operation.Execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T17:27:20.950

类似于卡萨布兰卡的回答。

*   我通常会避免枚举内部的业务逻辑，因为它们的工作只是唯一性，而且在其他所有方面都比不上类。

    公共枚举角色{

    ```
    ROLE1 { public Actions getActions(){ return new Role1Actions() } },
    ROLE2 { public Actions getActions(){ return new Role2Actions() } },
    ROLE3 { public Actions getActions(){ return new Role3Actions() } }; 
    ```

    }

*   我会使用尽可能多的方法创建 Actions 接口，每个角色可以执行的操作类型

公共接口操作{

```
void action1();
// useful when there are more than 1 different actions per role
// even if only 1 now, there will be more in the future
vpod action2();
} 
```

*   然后，只需使用您可以从角色中获得的操作

    user.getUserRole().action1();

    user.getUserRole().action2();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:07:44.567

你可以做这样的事情，其中​​所有操作都扩展了`Operation`超类并且`Role`是一个实际的对象而不是一个字符串：

```
public abstract class Operation {
  public void execute(User user) {
    user.getRole().apply(this);
  }

  public abstract void operationForRole1();
  public abstract void operationForRole2();
  public abstract void operationForRole3();
}

public enum Role {
  ROLE1 { public void apply(Operation op) { op.operationForRole1(); } },
  ROLE2 { public void apply(Operation op) { op.operationForRole2(); } },
  ROLE3 { public void apply(Operation op) { op.operationForRole3(); } };

  public abstract void apply(Operation op);
} 
```

然后每个都`Operation`实现各种角色的逻辑，客户端只需调用`operation.execute(user)`. 没有`if-else`任何地方。

# c# - 构建正则表达式，如何删除多余的换行符？

> ID：11710966
> 
> 赞同：0
> 
> 时间：2012-07-29T16:39:29.697
> 
> 标签：c#, regex

我有一个这样的字符串

```
"a           a            a  a aaa b c d e f a g a aaa  aa           a       a" 
```

我想把它变成

```
"a b c d e f a g a" 
```

或者

```
"a                        b c d e f a g a                   " 
```

（哪个更容易，没关系，因为它将是 HTML）

`"a"`s 是换行符 ( `\r\n`)，以防发生任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:52:13.847

*通常你的代码应该是：*

```
s.replace(new RegExp("(\\S)(?:\\s*\\1)+","g"), "$1"); 
```

检查[这个](http://jsfiddle.net/5hghq/)小提琴。

*但是，取决于这些字符**a**、**b**、**c**、 ... 在您的案例/问题中代表什么，您可能需要更改`\\S`为其他类，例如`[^ ]`，然后`\\s`更改为`[ ]`，如果您想包含**\r**和**\n**到也倒塌了>>*

```
s.replace(new RegExp("([^ ])(?:[ ]*\\1)+","g"), "$1"); 
```

检查[这个](http://jsfiddle.net/WPfPG/)小提琴。

*但是，如果**a**要表示字符串**\r\n**，那么您将需要更复杂的模式>>*

```
s.replace(new RegExp("(\\r\\n|\\S)(?:[^\\S\\r\\n]*\\1)+","g"), "$1"); 
```

检查[这个](http://jsfiddle.net/ddNWz/)小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T18:40:04.930

带着这个去：

```
private string GetDescriptionFor(HtmlDocument document)
{
    string description = CrawlUsingMetadata(XPath.ResourceDescription, document);
    Regex regex = new Regex(@"(\r\n(?:[ ])*|\n(?:[ ])*){3,}", RegexOptions.Multiline | RegexOptions.IgnoreCase);//(?:[^\S\r\n|\n]*\1)+

    string result = regex.Replace(description, "\n\n");
    string decoded = HttpUtility.HtmlDecode(result);
    return decoded;
} 
```

它确实，正如它应该做的那样，忽略所有换行符，除非它匹配三个或更多连续换行符，忽略空格，并将这些匹配替换为`\n\n`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:54:35.797

如果我正确理解问题，目标是删除特定字符/字符串的重复副本，可能用空格分隔。您可以通过将正则表达式替换`(a\s*)+`为`a `; `+`对于多个连续副本，`a\s*`对于`a`s 后跟空格，您执行该操作的精确程度取决于语言：在 Perl 中它是`$str =~ s/(a\s*)+/a /g`，在 Ruby 中它是`str.gsub(/(a\s*)+/, "a ")`，等等。

事实上`a`is 实际上`\r\n` *不应该*使事情复杂化，但可能意味着替换会更好地工作`s/(\r\n[ \t]*)+/\r\n/g`（因为与and`\s`重叠）。`\r``\n`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T17:28:33.000

如果您需要 C# 代码并且想要折叠带有前导和尾随空格的**JUST** \r\n 字符串，那么解决方案非常简单：

```
string result = Regex.Replace(input, @"\s*\r\n\s*", "\r\n"); 
```

[在此处](http://ideone.com/gBkrM)检查此代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-29T17:27:28.500

试试这个：

```
Regex.Replace(inputString, @"(\r\n\s+)", " "); 
```

# c# - AJAX 函数调用成功

> ID：11710970
> 
> 赞同：3
> 
> 时间：2012-07-29T16:39:47.447
> 
> 标签：c#, javascript, jquery, ajax

我的 JavaScript 代码 -

```
function updateWhatIfPrivacyLevelRemove(recordId, correspondingDetailIDs) {
    var ajaxCall = $.ajax({ data: { Svc: cntnrRoot,
        Cmd: 'updateWhatIfPrivacyLevel',
        updatePrivacyAction: 'Remove',
        recordID: recordID
        },
        dataType: "text",
        context: this,
        cache: false
    });

    $.when(ajaxCall).then(updateWhatIfPrivacyLevelRemoveSuccess(recordID, correspondingResidentDetailIDs));
}

function updateWhatIfPrivacyLevelRemoveSuccess(recordID, correspondingResidentDetailIDs) {
    //several other lines of non-related code
            $.ajax({ data: { Svc: cntnrRoot,
                Cmd: 'handleResidentRow',
                recordID: 1,
                active: 0
            },
                dataType: "text",
                context: this,
                cache: false
            });
} 
```

在我的 C# 代码中，我处理“updateWhatIfPrivacyLevel”和“handleResidentRow”的回调。我可以看出，handleResidnetRow 的 AJAX 回调是在 updateWhatIfPrivacyLevel 之前调用的。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:41:41.940

当您尝试设置回调时，您实际上是在**调用**该函数。换句话说，您没有将“updateWhatIf...”函数作为回调传递，而是传递了它的返回值（看起来总是如此`undefined`）。

试试这个：

```
$.when(ajaxCall).then(function() {
  updateWhatIfPrivacyLevelRemoveSuccess(recordID, correspondingResidentDetailIDs);
}); 
```

对函数名的引用是对作为对象的函数的引用，可用于将函数作为回调传递。但是，对函数的引用`( )`是对该函数的**调用**，该函数将被评估，以便可以在周围表达式的上下文中使用返回值。因此，在您的代码中，您将`undefined`（函数调用的结果）传递给`.then()`方法，这当然不会做您想要的。

重要的是要记住 jQuery 只是 JavaScript，尤其是 JavaScript 函数库。尽管这个`.then()`东西*看起来*像一个语言结构，但它不是——JavaScript 解释器不会以任何方式特别对待它。

在我的建议中使用匿名函数的另一种`.bind()`方法是在较新的浏览器中使用函数原型上的方法。这基本上为您做同样的事情，但它在风格上更像传统的函数式编程。

# c# - 为什么扩展方法调用不明确？

> ID：11710971
> 
> 赞同：3
> 
> 时间：2012-07-29T16:39:51.020
> 
> 标签：c#, parameters, struct, extension-methods

我得到了这些扩展：

```
internal static TResult With<TInput, TResult>
    (this TInput? o, Func<TInput, TResult> selector, TResult defaultResult = null)
    where TInput : struct
    where TResult : class
{
    selector.ThrowIfNull("selector");
    return o.HasValue ? selector(o.Value) : defaultResult;
}
internal static TResult? With<TInput, TResult>
    (this TInput? o, Func<TInput, TResult> selector, TResult? defaultResult = null)
    where TInput : struct
    where TResult : struct
{
    selector.ThrowIfNull("selector");
    return o.HasValue ? selector(o.Value) : defaultResult;
} 
```

第一个面向引用类型的结果，第二个面向结构的 Nullable。

那么现在为什么在第一行我得到编译错误而在第二行却没有？

1.

```
TimeSpan? time = ((int?)4).With(T => TimeSpan.FromSeconds(T))
// Error. The call is ambiguous. 
```

2.

```
TimeSpan? time = ((int?)4).With(T => TimeSpan.FromSeconds(T), null)
// No errors. Normally calls the second extension. 
```

TimeSpan （作为 a `TResult`）是一个结构，它在每个扩展的最顶部指定，这不是很明显吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:44:59.587

因为[约束不是签名的一部分](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:43:23.220

第一个错误的原因是返回类型不是 Nullable 并且您将 4 转换为可为 null 的 int

```
int? time = ((int?)4).With(T => TimeSpan.FromSeconds(T))
// Error. The call is ambiguous. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:45:51.693

因为`return type` and`constraints`不是方法签名的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:47:57.470

通用约束不影响过载结果。当你省略第二个参数时，编译器很难确定会发生什么。

# geometry - 大圆距离加上高度变化

> ID：11710972
> 
> 赞同：1
> 
> 时间：2012-07-29T16:39:58.790
> 
> 标签：geometry, geospatial

你如何准确计算球体上不同高度的两点之间的距离？如果这两个点在同一高度，则这是一个简单的大圆计算。但是，精确地解释稳定爬升或下降的附加术语是什么？假设我们正在谈论一架太空飞机，它在起飞后在很长一段距离内稳定地爬升到一个很大的高度。

插图：http:
[//i.imgur.com/nAp1S.png](http://i.imgur.com/nAp1S.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:47:56.067

国家大地测量局 (NGS)（NOAA 的一个部门）对此有一些信息，甚至在他们的网站和 PC 上提供了 Fortran 代码示例和工作程序。

见：
[http ://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html](http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html)

您想要的程序是 INVERS3D：
[http ://www.ngs.noaa.gov/PC_PROD/Inv_Fwd/](http://www.ngs.noaa.gov/PC_PROD/Inv_Fwd/)

您需要查看他们的代码以了解具体信息，但他们使用纬度/经度/高度计算“椭圆体距离、标记到标记距离和椭圆体高度差”。

从他们的网站：

> **INVERS3D**
> 
> 程序 INVERS3D 是程序 INVERSE 的三维版本，它不仅是计算大地方位角和椭球距离的工具，而且是计算标记到标记距离、椭球高差、DX、DY、DZ（差分 X , Y, Z 用于表示 GPS 向量），以及 DN、DE、DU（差分​​北、东、上，使用 FROM 站作为 NEU 坐标系的原点）。该程序需要大地坐标作为输入，表示为：1) 以度、分、秒或十进制度为单位的纬度和经度以及两个站的椭球高度，或 2) 直角坐标（常规坐标系中的 X、Y、Z每个站的地面参考系统）。该程序仅适用于 GRS80 椭球，单位为米。两种类型的坐标都可以在同一计算中使用。该程序读取输入的大地坐标位置，默认半球的纬度和经度设置为北和西。

# c - 为什么这个 C 程序的输出？

> ID：11710973
> 
> 赞同：0
> 
> 时间：2012-07-29T16:40:01.490
> 
> 标签：c

程序：

```
 int main( )
    {
    printf("%d",printf("%d %d",5,5)&printf("%d %d",7,7));
    return 0;
    } 
```

输出：

```
5 57 73 
```

我是 C 新手，我可以猜到 5 57 7 来自哪里，但不知道 3 来自哪里。有人可以解释输出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T16:41:35.670

如果您将二进制`AND`应用于`3`and `3`（这是两个嵌套`printf`调用的返回值），您将得到`3`结果。

请注意，代码实际上包含未定义的行为，因为未定义嵌套调用的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T16:42:13.767

该`printf`函数的返回值是传输的字符数，如果有错误则返回负值。

`printf("%d %d",5,5)``3`如果没有错误则返回

`printf("%d %d",7,7)``3`如果没有错误也返回

哪个`printf("%d %d",5,5) & printf("%d %d",7,7)`被`3 & 3`评估为`3`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T16:43:46.047

3 是两个 printf 返回的值的[按位与](http://en.wikipedia.org/wiki/Bitwise_operation#AND)。

printf 返回打印的字符数。在您的情况下，`printf("%d %d",5,5)`打印了两个 5 和一个空格的三个字符，同样`printf("%d %d",7,7)`也打印了两个 7 和一个空格。因此两个 printf 都返回 3。

所以，3是结果`3 & 3`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T17:51:56.543

如您在此处看到的：[http://en.wikipedia.org/wiki/Printf_format_string](http://en.wikipedia.org/wiki/Printf_format_string)， printf 返回打印字符的数量，因此：

```
printf("%d",printf("%d %d",5,5)&printf("%d %d",7,7)); 
```

由...组成 ：

```
printf("%d %d",5,5) return 3 (5 space and 5) and print 5 5

printf("%d %d",7,7) return 3 (7 space and 7) and print 7 7 
```

在这个阶段我们得到：`5 57 7`

而且`3 & 3 = 3`，最后你得到了这个输出：

```
5 57 73 
```

问候。

# r - 如何使用另一列的出现数将列添加到 data.frame

> ID：11710978
> 
> 赞同：1
> 
> 时间：2012-07-29T16:40:41.817
> 
> 标签：r, dataframe

我有以下data.frame

```
 x y   
1 t1 5                  
2 t2 2   
3 t2 7  
4 t3 9  
5 t1 6 
```

如何在第一列中添加具有值出现次数的列，如下所示？：

```
 x y occ  
1 t1 5 1  
2 t2 2 1  
3 t2 7 2  
4 t3 9 1  
5 t1 6 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:01:31.577

不是 100% 确定，但这是你的意思吗？

```
> my.df <- data.frame(x=c("t1","t2","t2","t3","t1"), y=c(5,2,7,9,6))
> my.df <- data.frame(x=my.df$x,
+                     y=my.df$y,
+                     occ=sapply(1:nrow(my.df), function(i) sum(my.df$x[1:i] == my.df$x[i])))

> my.df
   x y occ
1 t1 5   1
2 t2 2   1
3 t2 7   2
4 t3 9   1
5 t1 6   2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T17:16:23.937

在您的 sorted 上使用`sequence`和：`rle``data.frame`

```
my.df <- data.frame(x=c("t1","t2","t2","t3","t1"), y=c(5,2,7,9,6))
# Order by x
my.df = my.df[order(my.df$x), ]
my.df$occ = sequence(rle(as.vector(my.df$x))$lengths)
my.df
#    x y occ
# 1 t1 5   1
# 5 t1 6   2
# 2 t2 2   1
# 3 t2 7   2
# 4 t3 9   1
# Uncomment if you want to go back to original row order
# my.df[order(rownames(my.df)), ] 
```

# 更新：我今天学到的东西

我见过，但没用过这个`ave`功能。看起来您可以在不重新排序原始文件的情况下执行此操作`data.frame`：

```
my.df$occ = ave(as.numeric(my.df$x), as.numeric(my.df$x), FUN=seq_along) 
```

# java - tomcat/conf/context.xml 中的上下文是做什么用的？虚拟主机？

> ID：11710981
> 
> 赞同：0
> 
> 时间：2012-07-29T16:41:21.193
> 
> 标签：java, jsp, tomcat, context.xml

我正在读一本关于 jsp 的书（教科书），有些东西我听不懂。在本书中，我们必须执行一个 jsp 页面，为此他们在 tomcat 5.5 的 servlet.xml 中设置了一个上下文：

```
<Context path="JSPTEST" docBase = "G:\Tomcat5.5"\webapps\JSPTEST"></Context> 
```

并且该文件夹中的jsp在以下位置访问`http://localhost:8080/JSPTEST/filename.jsp`

我意识到的第一件事是 docBase 实际上是服务器上的 web 应用程序，因此无论是否设置此上下文，它仍然会在相同的环境下运行，`url`那么有什么意义呢？

我安装了一个 tomcat 7 并添加了一个上下文`conf/context.xml`

```
Context docBase="F:\work\bscit\serverside\practical" path="serverside" reloadable="true" /> 
```

我将 hello.jsp 放在`practical`文件夹下，重新启动了 tomcat 并且没有 response.server[在 catalina_log 中出现此问题](http://pastie.org/4354291)。对我来说，这是另一种设置虚拟主机的方法（我对如何在 apache httpd 下创建虚拟主机有一个好主意）所以我现在有点困惑。

**问题 1**究竟上下文是用来做什么的？我看过[tomcat doc](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)它没有响铃

**问题 2**如何使“相同”的东西在 tomcat 7 上工作（当然不将文件放入 tomcat）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:15:24.980

1- 上下文是描述 web 容器内的 webb 应用程序的内容。在那里，您可以定义用于访问 web-app 的路径、`path="JSPTEST"`资源所在的位置（文档库/根目录）`docBase = "G:\Tomcat5.5"\webapps\JSPTEST"`以及用于访问数据库的 JNDI 资源等其他内容。

因此，您在 Tomcat 5 中所做的配置应如下读取：

当我向服务器询问路径时`JSPTEST`（witch 是您的网络应用程序的根目录），他会查看`docBase`相应上下文元素中定义的物理目录。一旦在那里，服务器就会查找资源`filename.jsp`进程（由于它不是静态内容，因此需要首先编译并运行 jsps 以生成 html）并将其提供给客户端。

以同样的方式，您可以阅读为 Tomcat 7 制作的配置。

2-为了能够`hello.jsp`从 Tomcat 7（或 wahtever 版本）中检索资源，url 应该是`http://localhost:8080/serverside/hello.jsp`

内容物理存储的目录名称在访问内容的 url 中没有任何作用。它是元素`path`和之间的组合`docbase`。

# 回复 2

将 context 元素放在 中`conf/context.xml`，它本身有一个`context`元素作为 root 是错误的，这就是导致您得到错误的原因（读取时的 xml 解析错误`conf/context.xml`）。有两种方法可以使用 context.xml 配置 web-app，看看[这里](http://tomcat.apache.org/tomcat-5.5-doc/deployer-howto.html#A_word_on_Contexts)。仔细阅读第 1 点和第 2 点！

所以要让事情发挥作用：

任何一个

1-将一个以`serverside.xml`内容命名的文件`<Context docBase="F:\work\bscit\serverside\practical" path="serverside" reloadable="true" ></Context>`放入`conf/Catalina/localhost/`

或者

`webapps`2-在named中创建一个目录`serverside`并将你的jsps放入其中。在这种情况下，不需要`serversid/META-INF/context.xml`文件，除非您想为 Web 应用程序定义其他资源，`docBase`并且`path`元素可能不会出现在其中。

然后打电话`http://localhost:8080/serverside/hello.jsp`

(1) 有利于开发，(2) 有利于生产。

# javascript - 这会找到另一个 div 的父级并使用 jQuery 切换其子级

> ID：11710983
> 
> 赞同：2
> 
> 时间：2012-07-29T16:41:34.500
> 
> 标签：javascript, jquery

我做了一些研究，但似乎没有任何效果。这是 HTML，后面是我整理的 JavaScript。我要做的是设置它，以便每当单击dashboard_gear_options 时，它都会切换适当的隐藏选项行。每个代码块在页面上的不同位置多次存在。我尝试使用它，find，parent，next 和 children 无济于事。

HTML：

```
// start block
<div class="content_block_holder">
   <div class="content_top">
      <div class="dashboard_gear_options"></div>
      <div class="dashboard_gear_divider"></div>
   </div>
   <div class="dashboard_holder">
      <div class="hidden_options_row"></div>
   </div>
</div>
// end block

// start block
<div class="content_block_holder">
   <div class="content_top">
      <div class="dashboard_gear_options"></div>
      <div class="dashboard_gear_divider"></div>
   </div>
   <div class="dashboard_holder">
      <div class="hidden_options_row"></div>
   </div>
</div>
// end block (etc..) 
```

JS：

```
$(document).ready(function(){
   $('.dashboard_gear_options').click(function(){
       $(this).parent('.content_block_holder').find('.hidden_options_row').toggle();        
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:46:09.493

尝试在选择器中使用`closest([selector])`( [http://api.jquery.com/closest/ ) 而不是 parent。](http://api.jquery.com/closest/)它将遍历树并找到“content_block_holder”。`parent([selector])`如果它与提供的选择器不匹配，将只检查直接父级并返回一个空集。

```
$(document).ready(function(){
   $('.dashboard_gear_options').click(function(){
       $(this).closest('.content_block_holder').find('.hidden_options_row').toggle();        
   });
}); 
```

基于您的代码的 JSFiddle：http: [//jsfiddle.net/gK7yM/](http://jsfiddle.net/gK7yM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T16:43:55.120

试试这个

```
$(this).closest('.content_block_holder').find('.dashboard_holder').find('.hidden_options_row').toggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:57:05.757

[这条链也有效](http://jsfiddle.net/gJCcw/)：

```
$(this).parent().next('.dashboard_holder').children('.hidden_options_row').toggle(); 
```

或者

```
$(this).parent().next('.dashboard_holder').find('.hidden_options_row').toggle(); 
```

# facebook - Facebook 隐私政策错误

> ID：11710989
> 
> 赞同：2
> 
> 时间：2012-07-29T16:42:18.897
> 
> 标签：facebook

在 Facebook 开发人员帐户中，我正在为我的一个 android 应用程序创建一个应用程序 ID。在 Settings -> auth-dialog 中，我在隐私政策中复制了以下 URL。

[http://developers.facebook.com/policy/](http://developers.facebook.com/policy/)

我有一个错误说...

错误 必须提供有效的隐私政策 URL 才能符合 Facebook 平台政策。

几个月前，我为我的其他应用程序提供了相同的 URL，并且它有效。请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T16:58:19.647

如果您复制到该问题中的 URL 是您在自己的应用程序上尝试的 URL，那是完全无效的，它需要是您应用程序的真正隐私政策 - 您不能只链接到 Facebook 的开发者政策，这没有任何内容与您如何使用从应用用户那里检索到的数据有关

如果不是，并且您使用的是真实的隐私政策 URL：

1.  检查它绝对是[Facebook 的调试工具](https://developers.facebook.com/tools/debug)可以访问的有效 URL

2.  尝试保存基本设置 - 包括隐私政策 URL，然后返回并更改您需要的其他设置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-19T23:07:36.337

使用给定的 URL [http://developers.facebook.com/policy/](http://developers.facebook.com/policy/)您指向的是 facebook 隐私政策，而不是您自己的应用程序的政策，但是为了使您的应用程序上线或公开，您必须输入有效的您的应用程序的**隐私政策**和**条款和条件政策**的 url 。
通过提供一些基本信息，有许多在线工具可用于为特定应用程序生成这些策略，我建议您使用[https://termsfeed.com/](https://termsfeed.com/)对于这项特殊的工作。我也在我的应用程序中使用它，我向你保证它会正常工作。该站点将为您提供这两个策略的最终 URL，您只需将其简单地复制并粘贴到 facebook 开发人员应用程序设置框中，然后全部设置。

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-08-02T09:48:46.117

问题是该字段必须填写涉及您的应用程序而不是 Facebook 的隐私政策。

# php - 脸书注销错误

> ID：11710991
> 
> 赞同：0
> 
> 时间：2012-07-29T16:42:40.397
> 
> 标签：php, facebook, oauth-2.0

我正在尝试使用 facebook 登录网站[https://www.mysite.com](https://www.mysite.com)

在 www.mysite.com/login.php 上，我使用 Javascript SDK 打印了一个 facebook 登录按钮。登录工作正常。

在记录的页面中，我使用以下方法打印注销按钮：

```
require_once 'oauth2/facebook/facebook.php';
require 'admin/inc/facebook.inc.php'; //contains setting as secret sky, app id, etc

$facebook = new Facebook(array(
'appId' => $fb_app_id,
'secret' => $fb_secret_key
));

$fb_user=null;
$fb_user = $facebook->getUser();

if ($fb_user) {

$fb_user_profile=$facebook->destroySession();

$params = array( 'next' => 'https://www.mysite.com/logout.php' );

echo="<a href=\"".$facebook->getLogoutUrl($params))."\" >"."logout"."</a>";
}

else echo="<a href=\"/logout.php\" >"."logout"."</a>"; 
```

但是当我按下注销时，它只会重定向到 www.facebook.com/home.php

我尝试使用注销，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:17:56.607

`Facebook::destroySession`您的错误是在构建注销 URL 之前调用。

`destroySession`清除访问令牌，但需要访问令牌来构建有效的注销 URL。

# javascript - 添加新的 Javascript 后菜单样式损坏

> ID：11710992
> 
> 赞同：0
> 
> 时间：2012-07-29T16:42:42.923
> 
> 标签：javascript, jquery, drop-down-menu, mootools

我有如下所示的下拉菜单：

![](../Images/6b2a07824c1915066a40da7c0cda8a8b.png)

但是，我想要一个 div 元素将页面顶部粘贴在某个滚动范围内，所以我在头部添加了以下代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
// <![CDATA[
$(window).scroll(function(e){
    $el = $('.fixedElement');
    if ($(this).scrollTop() > 1437 && $el.css('position') != 'fixed'){
        $('.fixedElement').css({'position': 'fixed', 'top': '0px'});
    }
    if ($(this).scrollTop() < 1437 && $el.css('position') != 'absolute'){
        $('.fixedElement').css({'position': 'absolute', 'top': '1437px'});
    }
});
// ]]>
</script> 
```

`.fixedElement`在我的`CSS`文件中定义，然后引用

```
<div class="fixedElement"> 
```

现在，我的下拉菜单如下所示：

![](../Images/2188a2701aa14fa48907acd1452e2b69.png)

当我注释掉 new`javascript`时，菜单恢复正常。

关于如何`javascript`使用下拉菜单制作新作品的任何想法？

谢谢！

编辑：

与下拉菜单有关的一个控制台错误`javascript`是：

```
Uncaught TypeError: Object #<Object> has no method 'getElements' 
```

那就是引用这一行：

```
var links = $(this.options.id).getElements('a'); 
```

在这个 javascript 中：[MenuMatic](http://code.google.com/p/erptrojas-caja-chica/source/browse/trunk/+erptrojas-caja-chica+--username+miguel.cornejo/MenuMatic/MenuMatic_0.68.3-source.js?r=2)

当我注释掉新`javascript`的错误消失并且我的菜单回来了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:55:48.453

知道了。

我的下拉菜单`javascript`使用的是 MooTools 库，而我的粘性 div 使用的是 jQuery。

jQuery 使用“$”作为“jQuery”的快捷方式，因此该行

```
var links = $(this.options.id).getElements('a'); 
```

从 MooTools 库引用`javascript`会引发错误，因为 jQuery 已经覆盖了 "$" 的定义

这个冲突是通过插入来解决的

```
jQuery.noConflict(); 
```

在我的 jQuery 脚本之前并将我的 jQuery 脚本中的所有“$”替换为“jQuery”

更多信息在这里：[http ://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

也可以看看：

[jQuery等库，以及'$'的用法](https://stackoverflow.com/questions/1158606/jquery-and-other-libraries-and-the-usage-of)

[jQuery中符号$的含义是什么？](https://stackoverflow.com/questions/1049112/what-is-the-meaning-of-symbol-in-jquery/1050433#1050433)

# node.js - 如何在 Node.js 项目中包含 css 和 js 文件

> ID：11710995
> 
> 赞同：9
> 
> 时间：2012-07-29T16:42:55.010
> 
> 标签：node.js, express, ejs

在 express 项目中包含 css 和 js 文件的正确方法是什么？

我正在使用 ejs 模板引擎。我见过一个使用 connect-assetmanager 的例子，但很难理解。

在 index.ejs（不是 layout.ejs）中包含 css 和 js 的小示例项目将非常有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T18:32:52.600

静态文件可以使用 express 的静态中间件提供服务。我通常为从根目录提供的所有静态文件创建一个目录。

如果您已经使用 npm ( ) 全局安装了 express，`npm install -g express`您可以在命令行中键入以下内容。

```
express <project_name> 
```

这将为您创建一个小型示例项目。此示例项目有一个名为 的文件夹`public`，它从该文件夹中提供静态文件。它还包含名为`javascripts`和的文件夹`stylesheets`。

用于设置的示例项目的相关部分是`app.js`传递给的函数文件中的以下行`app.configure`。

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

示例来自 express 3.0.0rc1

Express 建立在 Connect 之上。它的静态中间件的文档可能会有所帮助：[Connect : Static](http://www.senchalabs.org/connect/static.html)

# ruby-on-rails - Rails - 如何呈现我自己的动作？

> ID：11710999
> 
> 赞同：1
> 
> 时间：2012-07-29T16:43:14.547
> 
> 标签：ruby-on-rails, templates, action, render

我正在构建简单的购物车。这是路线，数据在哪里：

> 匹配 'kosik/osobni-udaje' => 'home#cart_personal_data', :as => :cart_personal_data

在这部分是**订单**表格（`= form_for @order do |f|`） - 此表格用于：

```
 def update
    @order = Order.find(params[:id])
    fname = Order.check_attribute(params[:order][:first_name], 3, 40)
    lname = Order.check_attribute(params[:order][:last_name], 3, 40)

    if fname.nil? || lname.nil?
      @err = ''
      @err += 'Name is required<br />'
      @err += 'Surname is required<br />'
      render action: "/kosik/osobni-udaje"

    else
      respond_to do |format|
        if @order.update_attributes(params[:order])
          format.html { redirect_to cart_summary_path }
          format.json { head :no_content }
        else
          format.html { render action: "/kosik/osobni-udaje" }
          format.json { render json: @order.errors, status: :unprocessable_entity }
        end
      end
    end
  end 
```

如果应用程序转到第一个**if**块（变量在哪里`@err`），那么应用程序会呈现到 URL **/orders/9**。但我需要转到上一个 URL - 到**kosik/osobni-udaje**。

另外，我试图检查日志，但只有以下错误消息：

```
ActionView::MissingTemplate (Missing template orders/update, application/update with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:57:29.827

尝试这样做：

```
 def update
    @order = Order.find(params[:id])
    fname = Order.check_attribute(params[:order][:first_name], 3, 40)
    lname = Order.check_attribute(params[:order][:last_name], 3, 40)

    if fname.nil? || lname.nil?
      @err = ''
      @err += 'Name is required<br />'
      @err += 'Surname is required<br />'
      render action: "/kosik/osobni-udaje"

    else
      if @order.update_attributes(params[:order])
        respond_to do |format|
          format.html { redirect_to cart_summary_path }
          format.json { head :no_content }
        end
      else
        respond_to do |format|
          format.html { render action: "/kosik/osobni-udaje" }
          format.json { render json: @order.errors, status: :unprocessable_entity }
        end
      end
    end 
```

只需更改“respond_to”结束的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:20:25.310

好的，所以我这样解决了：

```
if fname.nil? || lname.nil?
  @err = ''
  @err += '...'
  @err += '...'

  flash[:error] = @err
  redirect_to :back
... 
```

在视图中

```
- if flash[:error]
  %p #{flash[:error]} 
```

这可能不是最好的解决方案，但它绝对有效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:28:00.717

你可以使用：

```
render 'home/cart_personal_data' 
```

URI`"/kosik/osobni-udaje"`并不是一个真正的动作，即使有一个指向它的路由。`render`想要控制器和动作或文件方面的东西。有关详细信息，请参阅[导轨指南](http://guides.rubyonrails.org/layouts_and_rendering.html)。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T19:06:44.040

我认为你的代码是错误的。

您应该将验证放在自定义验证器中，如指南中的示例：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)。之后，您可以这样做：

```
def update
  @order = Order.find(params[:id])
  if @order.update_attributes(params[:order])
    respond_to do |format|
      format.html { redirect_to cart_summary_path }
      format.json { head :no_content }
     end
   else
     respond_to do |format|
       format.html { render action: "/kosik/osobni-udaje" }
       format.json { render json: @order.errors, status: :unprocessable_entity }
     end
   end
end 
```