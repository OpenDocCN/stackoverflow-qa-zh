# StackOverflow 问答 1021000-1021999

# performance - Drupal 与 WordPress 性能比较

> ID：1021003
> 
> 赞同：4
> 
> 时间：2009-06-20T05:13:29.290
> 
> 标签：performance, wordpress, drupal, content-management-system

一开始，我在 Wordpress 上建立了我的网站 - bemcapaz.net。但是在不得不通过直接编程破解核心并构建大量东西之后，我决定转向 Drupal。

Drupal 除了作为一个更专注于社区网站的 CMS 之外，它还非常适合以非常简单的方式做任何你能想象到的事情，甚至是我创建的博客。

我现在的问题是，哪一个提供最好的性能？我认为 Drupal 看起来确实比 Wordpress 重，但由于我不是高级程序员，我不知道如何评估哪个提供最快的 MySQL 请求和网页加载时间。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-20T13:14:18.997

Drupal 绝对更重，因为一旦您对其进行了自定义，它每页运行更多的查询。使用视图等模块，您还可以构建自己的动态查询来驱动小部件和页面。这些可以像连接的基础组合所允许的那样快或慢。

另一方面，Drupal 确实有更强大的缓存控制。匿名用户的全页输出缓存、小部件输出的细粒度缓存以及视图查询检索到的任何数据的细粒度缓存都可以结合起来提供相当多的帮助。还有像“Boost”或“Memcached”这样的插件模块，可以让你用文件系统中的物化HTML文件来扩充底层缓存系统（绕过Drupal直接支持apache），或者将所有缓存信息存储在内存中的memcached服务器而不是数据库。

如果您希望在 Drupal 站点中发现热点，您还应该安装 Devel 模块；它允许您获取站点上每个页面的查询计数和详细查询时间，并将它们跟踪到运行它们的模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T08:40:36.363

不了解 Drupal，但在 WP 中，您可以使用以下代码估计查询时间：在任何查询之后将其添加到您的页脚。

```
<?php echo get_num_queries(); ?> queries. <?php timer_stop(1); ?> seconds. 
```

我想，CMS 的性能取决于查询和缓存机制的数量和复杂性。如果你明智地使用它们，你的表现会很好。我的意思是 - 只向您的数据库询问您真正需要的信息；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T05:33:23.273

我听说 Drupal 的缓存机制与其他 CMS 系统相比非常激进，但我不知道任何具体的东西。您最好的选择是对两者进行快速基准测试。在大多数情况下，无论哪一个执行较少的 SQL 查询都会更快。由于使用了缓存，Drupal 应该进行更少的查询，所以我的猜测是 Drupal 更快，即使只是一点点。

但老实说，我认为这并不重要，除非你每天获得数百万的独特点击。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-26T03:32:21.657

如果有人（比如我）想要一个*原始而简单*的时间比较，我写了 3 次完全相同的应用程序（使用 3 个框架），结果将在下面分享。

> 但请注意，我没有进行任何繁重的查询。
> 或者任何会影响结果的东西。

在我的本地使用 Core-i7 CPU 和 SSD 存储：

*   Drupal需要**5 秒**来显示一个简单的页面：

    *   因为缓存，
    *   如果我手动清除缓存，需要 25 秒（并重新创建缓存，因此下一次运行再次需要 5 秒），
    *   但是别担心服务器比我的本地强得多（>ლ）
*   虽然为所述页面`WordPress`花费了**17 秒**（并且总是如此）。

    *   同样，不要担心服务器比我的本地强得多（>ლ）
*   重写`Laravel`，同一个应用程序需要**850 毫秒**;-)

因此，如果您没有时间、金钱或知识来使用 Laravel 创建基本的 CMS，那么 Drupal 显然是赢家（但与 WordPress 相比更难学习）。

# unit-testing - 应该是“安排-断言-行动-断言”吗？

> ID：1021007
> 
> 赞同：98
> 
> 时间：2009-06-20T05:16:54.057
> 
> 标签：unit-testing, language-agnostic, arrange-act-assert

关于[Arrange-Act-Assert](http://c2.com/cgi/wiki?ArrangeActAssert)的经典测试模式，我经常发现自己在 Act 之前添加了一个反断言。这样我就知道传递的断言确实是作为动作的结果传递的。

我认为它类似于 red-green-refactor 中的红色，只有当我在测试过程中看到红色条时，我才知道绿色条意味着我编写的代码有所作为。如果我写了一个通过测试，那么*任何*代码都会满足它；同样，关于 Arrange-Assert-Act-Assert，如果我的第一个断言失败，我知道任何 Act 都会通过最终 Assert - 因此它实际上并没有验证关于该 Act 的任何内容。

您的测试是否遵循这种模式？为什么或者为什么不？

**更新**说明：初始断言本质上与最终断言相反。这不是断言 Arrange 有效。这是一个断言Act还没有奏效。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-06-20T05:39:04.827

这不是最常见的事情，但仍然很常见，可以拥有自己的名字。这种技术称为*Guard Assertion*。*您可以在 Gerard Meszaros 的优秀书籍xUnit Test Patterns*（强烈推荐）的第 490 页找到它的详细描述。

通常，我自己不使用这种模式，因为我发现编写一个特定的测试来验证我认为需要确保的任何先决条件更正确。如果前提条件失败，这样的测试应该总是失败，这意味着我不需要将它嵌入到所有其他测试中。这提供了更好的关注点隔离，因为一个测试用例只验证一件事。

对于给定的测试用例，可能需要满足许多先决条件，因此您可能需要多个 Guard Assertion。不是在所有测试中重复这些，而是​​对每个前提条件进行一个（并且只有一个）测试，这样可以使您的测试代码更具可维护性，因为这样您将减少重复。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2010-08-19T18:59:04.650

它也可以指定为 Arrange - *Assume* -Act-Assert。

在 NUnit 中有一个技术处理，如这里的示例：http: [//nunit.org/index.php ?p=theory&r=2.5.7](http://nunit.org/index.php?p=theory&r=2.5.7)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-23T18:59:14.287

这是一个例子。

```
public void testEncompass() throws Exception {
    Range range = new Range(0, 5);
    assertFalse(range.includes(7));
    range.encompass(7);
    assertTrue(range.includes(7));
} 
```

可能是我写信`Range.includes()`只是为了返回 true。我没有，但我可以想象我可能有。或者我可能以任何其他方式写错了。我希望并期望使用 TDD 时我实际上做对了——这`includes()`很有效——但也许我没有。所以第一个断言是一个健全性检查，以确保第二个断言是真正有意义的。

单独阅读，`assertTrue(range.includes(7));`就是说：“断言修改后的范围包括 7”。在第一个断言的上下文中阅读，它是说：“断言*调用包含（）*会导致它包含 7。由于包含是我们正在测试的单元，我认为这是一些（小）价值。

我接受我自己的回答；许多其他人误解了我的问题是关于测试设置。我认为这略有不同。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-28T15:43:42.190

一个`Arrange-Assert-Act-Assert`测试总是可以重构为两个测试：

```
1\. Arrange-Assert 
```

和

```
2\. Arrange-Act-Assert 
```

第一个测试只会断言在安排阶段设置的内容，第二个测试只会断言发生在动作阶段的内容。

这样做的好处是可以更准确地反馈是安排阶段还是行动阶段失败，而在原始版本中，`Arrange-Assert-Act-Assert`这些是混为一谈的，您必须深入挖掘并准确检查哪些断言失败以及失败的原因才能知道是否失败的是安排或法案。

它还更好地满足了单元测试的意图，因为您将测试分成更小的独立单元。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-09-21T04:31:50.917

我现在正在这样做。不一样的AAAA

```
Arrange - setup
Act - what is being tested
Assemble - what is optionally needed to perform the assert
Assert - the actual assertions 
```

更新测试示例：

```
Arrange: 
    New object as NewObject
    Set properties of NewObject
    Save the NewObject
    Read the object as ReadObject

Act: 
    Change the ReadObject
    Save the ReadObject

Assemble: 
    Read the object as ReadUpdated

Assert: 
    Compare ReadUpdated with ReadObject properties 
```

原因是 ACT 不包含 ReadUpdated 的读取是因为它不是该行为的一部分。行为只是改变和拯救。所以真的，ARRANGE ReadUpdated 用于断言，我正在调用 ASSEMBLE 进行断言。这是为了防止混淆 ARRANGE 部分

ASSERT 应该只包含断言。这样就在 ACT 和设置断言的 ASSERT 之间留下了 ASSEMBLE。

最后，如果你在安排中失败了，你的测试是不正确的，因为你应该有其他测试来防止/发现这些*微不足道*的错误。因为对于我目前的场景，应该已经有其他测试 READ 和 CREATE 的测试。如果你创建一个“Guard Assertion”，你可能会破坏 DRY 并创建维护。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-26T05:15:58.700

我不使用那种模式，因为我认为做类似的事情：

```
Arrange
Assert-Not
Act
Assert 
```

可能毫无意义，因为假设您知道您的 Arrange 部分工作正常，这意味着 Arrange 部分中的任何内容都必须进行测试，或者足够简单以至于不需要测试。

使用您的答案示例：

```
public void testEncompass() throws Exception {
    Range range = new Range(0, 5);
    assertFalse(range.includes(7)); // <-- Pointless and against DRY if there 
                                    // are unit tests for Range(int, int)
    range.encompass(7);
    assertTrue(range.includes(7));
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T05:23:23.490

在执行您正在测试的操作之前，加入“健全性检查”断言来验证状态是一种古老的技术。我通常将它们写为测试脚手架，以向自己证明测试符合我的预期，然后将它们删除以避免测试脚手架使测试变得混乱。有时，留下脚手架有助于测试作为叙述。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-20T17:31:03.157

我已经读过这种技术——可能来自你的btw——但我不使用它；主要是因为我习惯了用于单元测试的 AAA 格式。

现在，我开始好奇，并且有一些问题：您如何编写测试，是否导致此断言失败，遵循红-绿-红-绿-重构循环，还是之后添加？

你是否有时会失败，也许是在你重构代码之后？这告诉你什么？也许你可以分享一个有帮助的例子。谢谢。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-08-05T10:57:35.910

我之前在调查失败的测试时已经这样做了。

在相当头疼之后，我确定原因是“安排”期间调用的方法没有正常工作。测试失败具有误导性。我在安排后添加了一个断言。这使得测试在突出实际问题的地方失败。

如果测试的 Arrange 部分太长太复杂，我认为这里也会有代码味道。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-08-03T23:20:06.573

总的来说，我非常喜欢“Arrange, Act, Assert”，并将其作为我的个人标准。然而，它没有提醒我做的一件事是，当断言完成时，我已经安排好了。在大多数情况下，这不会引起太大的烦恼，因为大多数事情会通过垃圾收集等自动消失。但是，如果您已经建立了与外部资源的连接，您可能希望在完成后关闭这些连接根据您的断言，或者您的许多人在某处拥有服务器或昂贵的资源，这些资源可以保持连接或重要资源，它应该能够赠送给其他人。如果您是[不使用 TearDown 或 TestFixtureTearDown 的开发人员之一，这一点尤其重要](http://jamesnewkirk.typepad.com/posts/2007/09/why-you-should-.html)在一项或多项测试后进行清理。当然，“Arrange, Act, Assert” 不对我没有关闭我打开的内容负责；我只提到这个“gotcha”是因为我还没有找到一个好的“dispose”的“A-word”同义词来推荐！有什么建议么？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-01T00:05:00.823

查看 Wikipedia 关于[按合同设计](http://en.wikipedia.org/wiki/Design_by_contract)的条目。Arrange-Act-Assert 三位一体是对一些相同概念进行编码的尝试，是关于证明程序正确性的。来自文章：

```
The notion of a contract extends down to the method/procedure level; the
contract for each method will normally contain the following pieces of
information:

    Acceptable and unacceptable input values or types, and their meanings
    Return values or types, and their meanings
    Error and exception condition values or types that can occur, and their meanings
    Side effects
    Preconditions
    Postconditions
    Invariants
    (more rarely) Performance guarantees, e.g. for time or space used 
```

在设置它所花费的精力和它增加的价值之间需要权衡。AAA 是对所需最少步骤的有用提醒，但不应阻止任何人创建额外步骤。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-20T05:22:07.623

取决于您的测试环境/语言，但通常如果 Arrange 部分中的某些内容失败，则会引发异常并且测试失败并显示它而不是启动 Act 部分。所以不，我通常不使用第二个 Assert 部分。

此外，如果您的 Arrange 部分非常复杂并且并不总是抛出异常，您可能会考虑将其包装在某个方法中并为其编写自己的测试，这样您就可以确保它不会失败（没有抛出异常）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-26T00:51:19.573

如果您真的想测试示例中的所有内容，请尝试更多测试...例如：

```
public void testIncludes7() throws Exception {
    Range range = new Range(0, 5);
    assertFalse(range.includes(7));
}

public void testIncludes5() throws Exception {
    Range range = new Range(0, 5);
    assertTrue(range.includes(5));
}

public void testIncludes0() throws Exception {
    Range range = new Range(0, 5);
    assertTrue(range.includes(0));
}

public void testEncompassInc7() throws Exception {
    Range range = new Range(0, 5);
    range.encompass(7);
    assertTrue(range.includes(7));
}

public void testEncompassInc5() throws Exception {
    Range range = new Range(0, 5);
    range.encompass(7);
    assertTrue(range.includes(5));
}

public void testEncompassInc0() throws Exception {
    Range range = new Range(0, 5);
    range.encompass(7);
    assertTrue(range.includes(0));
} 
```

因为否则你会错过很多错误的可能性......例如，在包含之后，范围仅包括 7 等......还有范围长度的测试（以确保它不包含随机值），并且另一组完全试图在范围内包含 5 的测试......我们会期望什么 - 包含异常，或者范围保持不变？

无论如何，关键是如果您想要测试的行为中有任何假设，请将它们放在自己的测试中，是吗？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-10T11:55:23.153

我用：

```
1\. Setup
2\. Act
3\. Assert 
4\. Teardown 
```

因为干净的设置非常重要。

# jquery - jQuery 替换 Prototype 方法

> ID：1021008
> 
> 赞同：0
> 
> 时间：2009-06-20T05:17:31.110
> 
> 标签：jquery

我有以下脚本，如果内容是 emapty，它将更改焦点上的文本框的背景图像并保留以前的图像 ob 模糊。图像类似于水印。这是使用原型 javascript 库。

```
 <div class="searchfield">
                <asp:TextBox ID="txtStoreId" runat="server" class="username searchbg"></asp:TextBox>

                <script type="text/javascript">
//<![CDATA[
var storeidLabel = new FormLabel('txtStoreId', {image:'../lib/images/store_id.gif', emptyImage:'../lib/images/bg_userpw_notext.gif'});
//]]>
</script>

  </div> 
```

现在我想用 jQuery 替换这个。我已经在我的页面中使用 jQuery。我想把原型从我的页面中拿走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T05:45:46.957

您可以在焦点和模糊事件上操作元素的背景图像 css 属性：

```
$(document).ready(function(){
    var image = '../lib/images/store_id.gif';
    var emptyImage = '../lib/images/bg_userpw_notext.gif';

    $('#inputId').focus(function(){
      $(this).css('background-image', 'url('+image+')');
    });

    $('#inputId').blur(function(){
      if ($(this).val().length === 0){
        $(this).css('background-image', 'url('+emptyImage+')');
      }
    });
}); 
```

# sql - 复杂的 Rails 查询 - 工会？子选择？我还能使用named_scope吗？

> ID：1021018
> 
> 赞同：6
> 
> 时间：2009-06-20T05:26:27.853
> 
> 标签：sql, mysql, ruby-on-rails, activerecord, union

我喜欢 Rails 的部分原因是我讨厌 SQL——我认为它更像是一种汇编语言，应该使用 ActiveRecord 等更高级的工具来操作。然而，我似乎已经达到了这种方法的极限，而且我对 SQL 的理解不够深入。

我有一个包含很多子记录的复杂模型。我还有一组 30-40 个 named_scopes 来实现来自客户端的业务逻辑。这些范围有条件地链接在一起，这就是为什么我有这些`joins_`范围，所以连接不会被破坏。

我有几个不能正常工作，或者至少不是客户希望他们工作的方式。这是模型结构的粗略概念，有几个命名范围（示例并非全部需要）来说明我的方法并指出我的问题。 *（请原谅任何语法错误）*

```
class Man < ActiveRecord::Base
  has_many :wives

  named_scope :has_wife_named       lambda { |n| { :conditions => { :wives => {:name => n}}}}
  named_scope :has_young_wife_named lambda { |n| { :conditions => { :wives => {:name => n, :age => 0..30}}}}
  named_scope :has_yw_named_v2      lambda { |n| { :conditions => ["wives.name = ? AND wives.age <= 30", n]}}
  named_scope :joins_wives         :joins => :wives

  named_scope :has_red_cat          :conditions => { :cats => {:color => 'red'}}        
  named_scope :has_cat_of_color     lambda { |c| { :conditions => { :cats => {:color => c}}}}
  named_scope :has_7yo_cat          :conditions => { :cats => {:age => 7}}
  named_scope :has_cat_of_age       lambda { |a| { :conditions => { :cats => {:age => a}}}}
  named_scope :has_cat_older_than   lambda { |a| { :conditions => ["cats.age > ?", a] }}
  named_scope :has_cat_younger_than lambda { |a| { :conditions => ["cats.age < ?", a] }}
  named_scope :has_cat_fatter_than  lambda { |w| { :conditions => ["cats.weight > ?", w] } }
  named_scope :joins_wives_cats     :joins => {:wives => :cats}
end

class Wife < ActiveRecord::Base
  belongs_to :man
  has_many :cats
end

class Cat < ActiveRecord::Base
  belongs_to :wife
end 
```

1.  我可以找到妻子的猫是红猫和七岁的男人

    ```
    @men = Man.has_red_cat.has_7yo_cat.joins_wives_cats.scoped({:select => 'DISTINCT men'}) 
    ```

    我什至可以找到妻子的猫体重超过 20 磅且超过 6 岁的男人

    ```
    @men = Man.has_cat_fatter_than(20).has_cat_older_than(5).joins_wives_cats.scoped({:select => 'DISTINCT men'}) 
    ```

    但这不是我想要的。我想找到妻子中至少有一只红猫和一只七岁的猫的男人，它们不必是同一只猫，或者找到妻子中至少有一只超过给定重量的猫的男人，并且一只比给定年龄大的猫。
    *（在随后的示例中，请假设存在适当的`joins_`和`DISTINCT`）*

2.  我可以找到有妻子叫以斯帖的男人

    ```
    @men = Man.has_wife_named('Esther') 
    ```

    我什至可以找到有妻子的男人叫 Esther、Ruth 或 Ada（真甜！）

    ```
    @men = Man.has_wife_named(['Esther', 'Ruth', 'Ada']) 
    ```

    但我想找到有妻子的男人叫 Esther AND Ruth AND Ada。

3.  哈哈，开个玩笑，其实我需要这个：我能找到老婆30岁以下叫Esther的男人

    ```
    @men = Man.has_young_wife_named('Esther') 
    ```

    寻找有年轻妻子的男人，名叫 Esther、Ruth 或 Ada

    ```
    @men = Man.has_young_wife_named(['Esther', 'Ruth', 'Ada']) 
    ```

    但如上所述，我想找到有年轻妻子的男人，名叫 Esther AND Ruth AND Ada。幸运的是，在这种情况下，最小值是固定的，但最好也指定一个最小年龄。

4.  有没有办法用哈希语法测试不等式，还是你总是必须恢复- 注意和`:conditions => ["", n]`之间的区别- 我更喜欢第一个，但范围只适用于有限值。如果您正在寻找一位老太太，我想您可以使用，但是当一位妻子年满 101 岁时，她会放弃搜索。*（嗯。她会做饭吗？j/k）*`has_young_wife_named``has_yw_named_v2``a..100`

**   有没有办法在范围内使用范围？`:has_red_cat`如果可以`:has_cat_of_color`以某种方式使用它，或者如果有某种方法可以使用其父项中子记录的范围，我会喜欢它，这样我就可以将与猫相关的范围放入`Wife`模型中。* 

 *我真的不想在不使用的情况下直接使用 SQL 执行此操作`named_scope`，除非还有其他更好的东西 - 对插件的建议和非常感谢的东西，或者指导我需要学习的那种 SQL。一位朋友建议 UNION 或子搜索可以在这里工作，但在 Rails 的上下文中似乎没有太多讨论。我对视图一无所知-它们有用吗？有没有一种让他们满意的方法来制作它们？

谢谢！

*当我要去圣艾夫斯时，
我遇到了一个有七个妻子的男人
每个妻子有七个麻袋
每个麻袋有七只猫
每只猫有七个工具
包 工具包，猫，麻袋，妻子
有多少人要去圣艾夫斯？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T13:18:01.813

好吧，我用`named_scope`s 得到了很好的结果，如下所示：

```
named_scope :has_cat_older_than   lambda { |a| { :conditions => ["men.id in ( select man_id from wives where wives.id in ( select wife_id from cats where age > ? ) )", a] } } 
```

和

```
named_scope :has_young_wife_named lambda { |n| { :conditions => ["men.id in ( select man_id from wives where name = ? and age < 30)", n] } } 
```

我现在可以成功地做

```
Member.has_cat_older_than(6).has_young_wife_named('Miriam').has_young_wife_named('Vashti') 
```

并得到我所期待的。这些作用域不需要使用连接，而且它们似乎与其他风格的连接配合得很好。

w00t！

评论引出了这是否是一种有效的方法，或者是否有更“rails-y”的方法。将另一个模型的范围作为 sql 子查询片段包含在内的某种方法可能很有用......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-23T21:32:33.960

我使用construct_finder_sql 在另一个named_scope 中完成子选择。它可能不适合所有人，但使用它可以让我们干掉我们用于报告的几个 named_scopes。

```
Man.has_cat_older_than(6).send(:construct_finder_sql,{}) 
```

在您的脚本/控制台中尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T07:38:17.287

您使用了最原生的 Rails 解决方案。直接 SQL 将具有相同的性能，因此没有理由使用它。*

# c - 在C中访问超出数组末尾的元素

> ID：1021021
> 
> 赞同：19
> 
> 时间：2009-06-20T05:27:26.480
> 
> 标签：c, pointer-arithmetic

我一直在阅读 K&R 关于 C 的书，发现 C 中的指针运算允许访问数组末尾之外的一个元素。我知道 C 几乎可以用内存做任何事情，但我就是不明白，这种特性的目的是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-20T05:32:18.797

C 不允许**访问**超出数组末尾的内存。但是，它确实允许指针指向数组末尾之外的一个元素。区别很重要。

因此，这没关系：

```
char array[N];
char *p;
char *end;

for (p = array, end = array + N; p < end; ++p)
    do_something(p); 
```

（这样做`*end`将是一个错误。）

这说明了此功能有用的原因：指向数组末尾（不存在的）元素的指针对于比较有用，例如在循环中。

从技术上讲，这就是 C 标准所允许的一切。但是，在实践中，C 实现（编译器和运行时）不会检查您是否访问了超出数组末尾的内存，无论是一个元素还是多个元素。必须进行边界检查，这会减慢程序的执行速度。C 最适合的程序类型（系统编程、通用库）往往比安全和安全边界检查更能从速度中受益。

这意味着 C 可能不是通用应用程序编程的好工具。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-06-20T05:30:52.043

通常，表示“结束”位置很有用，它是实际分配之后的位置，因此您可以编写如下代码：

```
 char * end = begin + size;
 for (char * curr = begin; curr < /* or != */ end ; ++curr) {
    /* do something in the loop */
 } 
```

C 标准明确指出该元素是有效的内存地址，但取消引用它仍然不是一个好主意。

为什么有这个保证？假设您有一台具有 2^16 字节内存、地址 0000-FFFF、16 位指针的机器。假设您创建了一个 16 字节数组。内存可以分配在 FFF0 吗？

有 16 个字节连续空闲，但是：

```
begin + size == FFF0 + 10 (16 in hex) == 10000 
```

由于指针大小，它会包装到 0000。现在循环条件：

```
curr < end == FFF0 < 0000 == false 
```

循环不会对数组进行迭代，而是什么都不做。这会破坏很多代码，所以 C 标准说分配是不允许的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T11:50:36.567

如果您在分配的内存之外读取或写入，则 C 标准会说它的“未定义行为”。这意味着几乎任何事情都可能发生，可能是现在，可能在一周内，或者可能在 5 年后，或者可能永远不会发生，而你却侥幸逃脱。

我的老板有几句格言：“没有正确的 C 程序，只有一个还没有出错的东西”

他总是对的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-06-20T05:31:18.173

例如，您可以远远超出数组 1 的范围`

```
int main()
{
        char *string = "string";
        int i = 0;
        for(i=0; i< 10;i++)
        {
                printf("%c\n", string[i]);
        }
        return 0;
} 
```

将在单词字符串结束后打印垃圾，无论之前坐在内存中的任何内容。

# filesystems - 文件系统文件名转义？C＃

> ID：1021022
> 
> 赞同：8
> 
> 时间：2009-06-20T05:27:35.527
> 
> 标签：filesystems, escaping

我允许用户选择他想要的任何用户名，它可以是任何用户名，例如

```
AC♀¿!$"Man'@ 
```

现在我需要为他创建一个目录。我用什么函数来转义文本，所以我没有 FS 问题/异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-20T06:02:00.613

无论您是替换无效字符还是删除它们，总是有可能发生冲突。如果我是你，我会为用户设置一个单独的主键（也许是一个 GUID）并将其用作目录名称。这样您就可以使用任何您想要的用户名，而不必担心无效的目录名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-20T05:55:37.270

根据您的字符是否为 ASCII/Unicode，您可以使用字节/字符值作为替换，并使用一些字符来标记这些替换的字符（如下划线），为您提供类似`_001_255_200ValidPart_095_253`. 请注意，您也必须替换标记字符（`_095`在示例中，95 是下划线的 ASCII 代码）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T05:31:15.973

使用`Path.GetInvalidFileNameChars`或`Path.GetInvalidPathChars`检查要删除的字符。

[http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T05:42:22.310

我认为您最好的选择是创建一个将无效文件系统字符映射到有效替换字符串的字典。然后扫描字符串中的无效字符，随时替换为有效字符串。这将允许用户选择他们想要的任何东西，并让您在需要时将其转换回用户名的一致性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T06:23:55.487

您不会找到一种方法来逃避在每个实例中都会给出有效的非冲突目录名称的用户名。

更可靠的方法是使用任意约定创建目录，然后存储两者之间的映射。这也为您的用户希望能够更改名称的情况提供支持。

查看问题 # [663520](https://stackoverflow.com/questions/663520/is-it-a-good-idea-to-let-your-users-change-their-usernames/663614#663614)了解更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T05:45:22.917

用户是否需要知道他/她的目录的确切名称？如果不是，为什么不使用任意规则创建目录并将每个目录与数据库中的所有者相关联？

# security - 完全保护目录

> ID：1021026
> 
> 赞同：1
> 
> 时间：2009-06-20T05:30:41.873
> 
> 标签：security, apache, hosting

保护目录的不同方法是什么？

> 包括索引页面，因此无法查看内容

这样做的问题是，如果人们知道他们所追求的文件名，他们仍然可以访问这些文件

> 包括一个 htaccess 文件以拒绝所有

这似乎是最好的方法，但是有没有可以通过 htaccess 文件的情况？是否还有 htaccess 不可用的情况？

> 限制文件夹访问

这也是一个不错的解决方案，但问题是，我要保护的文件夹应该可以由程序查看和写入。

还有其他方法可以实现文件夹安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T06:20:07.520

Apache 的最佳实践是使用 htaccess 进行限制——这只限制来自网络服务器——但这应该是你所需要的。您可以在其中添加身份验证 - 但对于大多数需要，您可以拒绝所有访问 - 这会完全隐藏目录。

另一种可以很好地使用 htaccess 拒绝直接访问的方法是在路由目录中使用 htaccess 来重写 url。这意味着像 /example/listItems/username/ted 这样的请求可以重写为对 php 或其他文件的调用，例如：

/application/index.php?module=listItems&username=ted

这样做的好处是网络服务器不会给出任何目录的路径，因此人们更难四处寻找目录。

如果要保护图像目录，还可以使用 htaccess 重定向到不同的目录，以便 /images/image5.png 实际上是对：

/应用程序/图像/image5.png

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T06:50:04.717

您也可以尝试不将受保护的目录放在 www 目录下，而是放在其他“非 www 可见”位置。如果您的应用需要读取/写入数据，请告诉它在其他位置进行。修改其属性，以便只有应用程序具有执行此操作的适当权限。

# objective-c - 命名空间冲突真的是 Objective-C 中的一个问题吗？

> ID：1021035
> 
> 赞同：10
> 
> 时间：2009-06-20T05:37:02.817
> 
> 标签：objective-c, namespaces

Objective-C 没有命名空间，许多（例如[CocoaDevCentral 的 Cocoa Style Guide](http://cocoadevcentral.com/articles/000082.php)）建议在你的类名前加上首字母，以避免命名空间冲突。

引用上面的链接：

> Objective-C 没有命名空间，所以在你的类名前加上首字母。这避免了“命名空间冲突”，即两段代码具有相同名称但执行不同操作的情况。

我想这是有道理的。但老实说，在相对较小的应用程序（比如 iPhone 游戏）的背景下，这真的是个问题吗？我真的应该将 MyViewController 重命名为 ZPViewController 吗？如果不是，那么命名空间冲突在什么时候真正成为一个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-20T05:44:55.850

如果您正在编写一个使用一组库的应用程序，那么您已经知道您的命名空间是什么样的，您只需要选择与现有可用函数不冲突的名称。

但是，如果您正在编写一个供他人使用的*库*，那么您应该选择一个合理唯一的前缀来尽量避免与其他库的名称冲突。只有两个字符可能仍然存在名称冲突，但频率会降低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T05:45:27.487

小型应用程序不应使用所有好名称，因此命名空间不会有问题。

但习惯于编写语言的一般风格是个好主意。这样可以更容易地阅读其他人的代码，并让其他人更容易阅读你的代码。

例如，在 Java 中使用 camelCase 变量，但在 C# 中使用 CamelCase vars，在 C 中使用 hyphen_separated_names 等。

从长远来看，这将使您更容易学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T23:59:13.500

我已经阅读（但尚未验证）Apple 在其框架中有私有类，这些私有类的名称不包含任何前缀。因此，如果您的应用程序类的名称没有前缀，您就有可能与这些名称发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-27T05:12:14.883

我使用过没有类前缀的存储库。（或者只有一些类是前缀的。）

我发现痛苦的一件事是有时很难判断代码是由公司内部还是外部的人编写的。使用一致的前缀可以让第一次阅读代码的人立即明白这一点。

请记住，代码的阅读次数要比编写次数多得多。

`grep`此外，在使用和之类的工具时，它肯定会派上用场`sed`。

# batch-file - 使用 .bat 文件从 .xls 文件中读取值

> ID：1021039
> 
> 赞同：1
> 
> 时间：2009-06-20T05:43:32.807
> 
> 标签：batch-file, xls

我只想知道是否有任何方法可以使用 .bat 文件从 .xls 文件中读取值。例如：如果我有一个名为 test.xls 的 .xls，它有两列，即“EID”，然后是“邮件 ID”。现在，当我们向 .xls 输入 EID 名称时，它应该提取邮件 ID对应于 EID 并回显结果。

```
**EID**                  **MailID**
E22222                    MynameisA@company.com

E33333                    MynameisB@company.com

...
... 
```

因此，通过上表，当我使用我的 .bat 文件作为 E22222 向 xls 文件输入输入时，它应该读取相应的邮件 ID 作为 MynameisA@company.com 并且它应该回显该值。

所以我希望我能够提出我的疑问。请回复我以获得更多说明。

感谢和问候麦迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T05:50:36.480

无法直接使用传统`.bat`文件执行此操作。但是，您可能会调查[PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)，它旨在能够执行此类操作。PowerShell 与现有的 Windows 应用程序（如 Excel）很好地集成，并且可以提供您轻松完成此操作所需的工具。

快速搜索发现了[从 PowerShell 读取 Excel 文件的示例](http://blogs.msdn.com/krishkp/archive/2008/03/06/powershell-script-to-access-an-excel-file.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T07:14:52.793

您不能直接从批处理文件中执行此操作。此外，要在脚本中使用 Excel 文件，您需要安装 Excel。

您可以做的是将特定于 Excel 的内容包装在 VBScript 中，然后从您的批处理中调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T05:50:36.607

这在 BAT 中很难（非常接近不可能），尤其是在使用原始 XLS 文件时，但即使在导出为 CSV 之后，使用脚本/编程语言（Perl、C 等）会*更*容易做到这一点.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-21T16:30:48.507

您可以使用 Alacon - [Alasql](http://github.com/agershun/alasql)数据库的命令行实用程序来完成。

它适用于 Node.js，因此您需要安装[Node.js](http://nodejs.org/)，然后安装[Alasql](https://www.npmjs.com/package/alasql)包：

要从 Excel 文件中获取数据，您可以使用以下命令：

```
> node alacon "SELECT VALUE [mail ID] FROM XLS('mydata.xls', {headers:true}) 
                   WHERE EID = ?" "E2222" 
```

第一个参数是一个 SQL 表达式，它从带有标题的 XLSX 文件中读取数据，并搜索第二个参数值的数据：“E22222”。该命令返回邮件 ID 值。

# asp.net-mvc - 使用 SubSonic 2.2 实现 IDataErrorInfo

> ID：1021049
> 
> 赞同：0
> 
> 时间：2009-06-20T05:52:39.240
> 
> 标签：asp.net-mvc, model-view-controller, subsonic

我正在移动 1 个项目，只是数据层，该项目正在使用 MVC 1.0 和访问 mdb :S

现在我正在转移到 SubSonic + Sql 服务器，一切都很好，除了当我尝试对我的类 IDataErrorInfo 实施验证消息时，我总是得到每条错误消息的 2 次

我有一个由 subsonic:MyTable 生成的表类，然后我扩展它。

```
public partial class myTable : IDataErrorInfo{
public string this[string columnName]{
    get{
        switch (columnName.ToUpperInvariant()){
            case "MYFIELD":
                if (string.IsNullOrEmpty(myField)){
                    return "Incorrect MyField";
                }
                break;
            case "ANOTHER":
                if (string.IsNullOrEmpty(myField)){
                    return "Incorrect Another";
                }
                break;
        }
        return "";
    }
}

public string Error{
    get{
        return "";
    }
} 
```

}

在我的控制器中，我将以下代码添加到我的帖子操作中：

```
public class mycontroller...{
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult myAction(int id, MyTable data)
{
    try
    {
        UpdateModel(data, new[] { "MyField","Another" });
        data.Save();
        return RedirectToAction("Admin");
    }
    catch (Exception ex)
    {
        //ViewData["Error"] = ex.Message;
        return View(data);
    }
} 
```

我的视图有一个生成为 Html.ValidationSummary("Attention:") 的摘要

当我得到无效数据时，我的摘要得到的错误是它的 2 倍：

**注意：**
不正确的MyField 不
正确的MyField
不正确的另一个
不正确的另一个

我不想重写验证表单，这里有很多视图（大约130）。我认为问题出在亚音速的某个地方，但我不知道在哪里：S，请帮助我:)

最好的问候和提前感谢。

没有办法捕捉到这个错误:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-21T15:01:44.193

您使用的是哪个版本的 SubSonic？IIRC，v2.0.3 中的 Save() 可以调用两次验证方法。

# javascript - Stackoverflow 如何处理“您获得了新徽章”窗口？

> ID：1021053
> 
> 赞同：2
> 
> 时间：2009-06-20T05:58:24.303
> 
> 标签：javascript, ajax, notifications

> **可能重复：**
> [通知面板类似于 stackoverflow 的](https://stackoverflow.com/questions/366857/notify-panel-similar-to-stackoverflows)
> [How to show popup message like in stackoverflow](https://stackoverflow.com/questions/659199/how-to-show-popup-message-like-in-stackoverflow)

Stackoverflow 如何处理“您获得了新徽章”窗口？（屏幕顶部弹出的橙色，我相信它会在您未登录时向您显示常见问题解答）。

有人有代码示例可以做到这一点吗？（也有关闭窗口的按钮？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T06:08:46.203

**这是一个非常简单的 HTML、CSS 和 DOM 操作练习。** 看看[http://jquery.com](http://jquery.com)添加效果等...

在你的 CSS 中使用这些样式：

```
#banner
{
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: #aaf;
    color: #000;
    font-size: 1.5em;
    padding: .5em;
    z-index: 100;
} 
```

你页面上的这个HTML：

```
<div id="banner">
    Your text here
    <a href="#" onclick="document.getElementById('banner').style.display = 'none'; return false;">close</a>
</div> 
```

应该做的伎俩。使用样式等...使其看起来不错。

# actionscript-3 - 如何在 Flex 3 中纯粹从 Actionscript 使用 SWFLoader 并动态加载内容？

> ID：1021054
> 
> 赞同：0
> 
> 时间：2009-06-20T05:58:42.943
> 
> 标签：actionscript-3, flex3, swfloader

我正在做一个 Flex 3 项目，其中我必须根据所需文件的可用性加载 SWF。并且加载的 SWF 文件将被放置在特定位置（即坐标）的容器（面板）中。我不想在 MXML 中这样做，因为如果文件不可用，SWFLoader 容器会显示一个交叉标记框。

所以朋友们有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T07:16:13.743

*   使用文件的 url 创建一个新的 URLRequest 对象。
*   创建一个新的 Loader 对象。
*   调用 Loader 对象的 load() 方法，将 URLRequest 实例作为参数传递。
*   在显示对象容器（如 Flash 文档的主时间线）上调用 addChild() 方法，将 Loader 实例添加到显示列表中。

来源：[加载外部 SWF 文件](http://livedocs.adobe.com/flex/3/html/help.html?content=Working_with_MovieClips_7.html)。

# jquery - 在 AJAX 调用中使用 success() 或 complete()

> ID：1021062
> 
> 赞同：63
> 
> 时间：2009-06-20T06:09:25.467
> 
> 标签：jquery, ajax

我想了解下面的AJAX调用，就`complete()`方法而言；

当我替换`complete()`为 时`success()`，我得到一个空的*responseText*，就像使用 AJAX`error()`方法一样。

另一方面，当我将`complete()`方法保留原样时，一切都按预期工作。

是不是`success()`早于返回`complete()`？

```
$("#formnaw").submit(function() {
  var fnc = invoerFnc.attr("value");
  var vnaam = invoerVnaam.attr("value");
  var anaam = invoerAnaam.attr("value");
  var str1 = invoerStr1.attr("value");
  var nr1 = invoerNr1.attr("value");
  var pc1 = invoerPc1.attr("value");
  var pl1 = invoerPl1.attr("value");
  var tel1 = invoerTel1.attr("value");
  var mob1 = invoerMob1.attr("value");
  var em1 = invoerEm1.attr("value");
  var goknop = $("#formnaw > .instelling_go");
  //we deactiveren de submit knop tijdens het verzenden 
  goknop.attr({
    disabled: true
  });
  goknop.blur();
  //stuur de post variabelen naar livetabs.php
  $.ajax({
    type: "POST",
    url: "registraties/instellingenact.php",
    data: "actie=wijzignaw&vnaam=" + vnaam + "&anaam=" + anaam + "&functie=" + fnc + "&straat=" + str1 + "&nr=" + nr1 + "&postcode=" + pc1 + "&plaats=" + pl1 + "&tel=" + tel1 + "&mob=" + mob1 + "&email=" + em1,
    timeout: 5000,
    success: function(data, textStatus) {
        alert('bij success');
        //doe iets
      } //EINDE success
      ,
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        if (textStatus == 'timeout') {
          //doe iets
        } else if (textStatus == 'error') {
          //doe iets
        }
        //her-activeer de zend knop
        goknop.attr({
          disabled: false
        });
      } //EINDE error
      ,
    complete: function(data) {
        updatelijst.append(data.responseText + "<br>");
        if (data.responseText.indexOf("Fout") != -1) {
          $('#formnaw').find('td.foutnr1').prepend(data.responseText);
        } else {
          updatelijst.animate({
            opacity: 'show'
          }, 1000, function() {});
        }
        //her-activeer de zend knop
        goknop.attr({
          disabled: false
        });
      } //EINDE complete
  }); //EINDE ajax
  //we stoppen het standaard gedrag van een submit, zodat de pagina niet wordt vernieuwd.
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2017-02-14T15:14:30.977

> 是不是`success()`早于返回`complete()`？

**是的**；AJAX`success()`方法在方法之前运行`complete()`。

下图说明了处理流程：

[![AJAX调用过程流程图。](../Images/2cc302e957f4a268296b603fc0db9978.png)](https://i.stack.imgur.com/JogVo.png)

需要注意的是

*   （`success()`本地事件）仅在请求成功时才被调用（服务器没有错误，数据没有错误）。

*   另一方面，`complete()`无论请求是否成功，都会调用（本地事件）。您将始终收到完整的回调，即使是同步请求也是如此。

*...有关 AJAX 事件的更多详细信息，请[点击此处](https://api.jquery.com/Ajax_Events/)。*

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-06-20T06:22:28.110

`complete`在`success`or`error`回调被执行后执行。

也许您也应该检查第二个参数`complete`提供。它是一个字符串，保存 ajaxCall 的成功类型。

这里更详细地描述了不同的回调[`jQuery.ajax( options )`](http://docs.jquery.com/Ajax/jQuery.ajax#options)

* * *

我猜你错过了一个事实，即`complete`函数`success`（我知道 API 不一致）传入不同的数据。`success`只获取数据，`complete`获取整个`XMLHttpRequest`对象。当然`responseText`，数据字符串没有属性。

因此，如果您替换`complete`为，则`success`也必须仅替换`data.responseText`为`data`。

**成功**

> 该函数传递了两个参数：从服务器返回的数据，根据“dataType”参数格式化，以及一个描述状态的字符串。

**完全的**

> 该函数获得两个参数：XMLHttpRequest 对象和描述请求成功类型的字符串。

`XMLHttpRequest`如果您需要在成功回调中访问整个对象，我建议您尝试一下。

```
var myXHR = $.ajax({
    ...
    success: function(data, status) {
        ...do whatever with myXHR; e.g. myXHR.responseText...
    },
    ...
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-06-20T06:15:47.513

“完成”在 ajax 调用完成时执行。当 ajax 调用以成功的响应代码结束时执行“成功”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-09T12:13:18.350

好吧，从隔离区来看，`complete()`$.ajax 中的内容就像`finally`try catch 块中的内容。

如果您在任何编程语言中使用 try catch 块，无论您是成功执行某件事还是在执行过程中出错都没有关系。finally{} 块将始终被执行。

`complete()`在 $.ajax 中也是如此，无论您是得到`success()`响应还是在执行完成后总是会调用`error()`该函数。`complete()`

# exception-handling - When do you write your exception handlers?

> ID：1021063
> 
> 赞同：4
> 
> 时间：2009-06-20T06:12:19.487
> 
> 标签：exception-handling

At what point during development do you typically implement your exception handlers? Do you write them at the same time as you write the surrounding code, or do you write your code and then come back to "harden" it later?

I typically do the latter so that I can see exactly where and how my code fails, but I worry that my code isn't as resilient as it could be if I would have written the exception handlers right away.

At the same time, I don't want to spend a whole bunch of development time figuring out all the possible ways that my code could fail when there are other implementation details that I haven't settled on yet.

I'm curious as to how other developers do this.

**Update: I just wanted to thank everyone for their answers!**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T06:34:38.210

I either write the exception handlers immediately, or I allow the exceptions to propagate upwards. I'm a big fan of what I call the "You're Not Going To Go Back And Fix It Later, Are You?" principle. You say you will, but honestly, once you get it working, you're not going to go back and fix it later, are you? Just get it right right now! Write your exception handlers right away, or add a `throws` clause and make it somebody else's problem. Do the right thing right now.

But you know what, sometimes you can't. Whatever you do, **do not swallow exceptions** with empty exception handlers! This is evil:

```
try {
    connection.close();
}
catch (Exception e) {
    // TODO Auto-generated code
} 
```

I drop kick anybody on my team who checks that in.

If you really don't know what to do about an exception and cannot add a `throws` clause to propagate it upwards, at least do *something* halfway responsible. Print a stack trace, if nothing else. It's not ideal but at least you're not hiding errors.

```
catch (IOException exception) {
    exception.printStackTrace();
} 
```

Logging it via your application's logging system is better, though you shouldn't make a habit of it. It's supposed to be the caller's responsibility to handle these kinds of things.

```
catch (IOException exception) {
    log.error(exception, "Unable to open configuration file %s.", fileName);
} 
```

As a last resort, you can do an end run around your `throws` clause by wrapping your exception in a `RuntimeException`. At least you're giving somebody higher up the call chain a chance to handle the error, which is normally the Right Thing To Do.

```
catch (IOException exception) {
    throw new RuntimeException(exception);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T06:25:01.193

If I am calling an API then I look at what exceptions can be thrown and decide based on the list. The exceptions that can be thrown generally fall into categories:

*   Improbable in my view this will get thrown - make sure that code fails nicely
*   Realistic that this will get thrown - what should I do if this gets called?
*   Certain that this will get thrown based on current inputs - add validation to inputs to stop it getting thrown
*   Could I raise a more relevant exception? - if an exception is likely to get to get called would it be clearer for other calling code if I raised a new/different exception

In general I think it is always good practice to have catch all try catch blocks high up in the call stack that can catch general exceptions (Throwable) and then report these nicely to the user - perhaps with an interface that will then email the error and stacktrace to the development team and ask for user comments.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T06:26:39.163

In my exception handler I usually raise a higher-level exception. For example, when parsing a file in Python, some string, list and dict operations may raise ValueError, IndexError or KeyError. These exceptions are usually not helpful for the caller, so I write an exception handler, which raises a descriptive MyParseError. I do this at the same time when writing the method, but later, when writing the test, I sometimes make the exception message more verbose.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T06:17:40.367

**during development**, when:

*   a unit test require it
*   when some presentation/persistence code require it

**EDIT**

in Java **sometimes**, you must take care error handling at very early stage (**checked exceptions**) and **sometimes** this is very annoying.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T06:19:04.467

Sometimes both. In some cases I know of the exceptions that can be thrown and I want to handle as I'm writing the code, and so I write the handlers right then and there. Other times I don't know of all of the exceptions and find them later, either through documentation, testing or both.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T06:19:28.537

It's a combination of both. There are things that I know can go wrong like database connections, configuration settings, file read/writes as well as the red flags from the functional/tech specifications. I try to setup the try/catch for those ASAP.

As the application gets bigger over time I then start to see patterns and trends with either how the user is using the application and or how me and or the team has developed it and add those try/catches as needed.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T06:19:43.387

It kind of depends on the nature of the project you are working on. In my case, if I'm familiar with the logic of the system, I should know where, and how, to handle exceptions even before writing code. On the other hand, I would write my stuff, test it and then write the handlers.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T07:24:17.547

My approach is to address exception handling immediately, since it's not some aimless burden that you can happily postpone.

Just handle the exceptions that apply at the point that you write your code, propagate all those that do not matter, and only come back later to fix whatever is broken, saves you a lot of tears.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T07:29:22.140

As a rule, not only do I write my exception handling when I'm writing the code, but I try to write the code to avoid exceptions in the first place. The advantages are that if I know I need to handle an exception I remember to and if I can avoid an exception that is always a plus. I also test my code after I've written it using boundary conditions to see if there's any possible exceptions that I may have missed.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-20T08:40:24.837

Writing the handlers when you are writing the actual code is the best habbit i guess because you are very clear of the failures that may occur although you can add others when you discover it.

handling the exception may be tedious for the first time but it would save lot of time while debugging for some error i.e support.

# memory - MIPS 上的“对齐”指令

> ID：1021068
> 
> 赞同：7
> 
> 时间：2009-06-20T06:17:12.003
> 
> 标签：memory, assembly, alignment, mips, instruction-set

这条指令具体是做什么的？我知道它会尝试将数据与特定数字的倍数对齐，但为什么需要这样做？其他汇编程序中是否有等效指令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T06:19:36.367

您通常对齐数据以获得更好的性能。对于大多数处理器，内存访问在不访问特定字节边界时会受到一些惩罚。对于其他汇编程序，通常有某种[伪操作](http://www.nersc.gov/vendor_docs/ibm/asm/align.htm) `.align`。大多数编译器还对齐它们的数据结构（尽管您可以出于调试目的禁​​用它）。

另请参阅此[Wikipedia 条目](http://en.wikipedia.org/wiki/Packed)。

请注意，如果您尝试访问未对齐的内存单元，非仿真 MIPS 系统甚至可能崩溃（请参阅[此处](http://en.wikibooks.org/wiki/MIPS_Assembly/MIPS_Instructions)和[此处](http://gcc.gnu.org/ml/gcc/2006-05/msg00122.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T06:45:29.110

> 其他汇编程序中是否有等效的指令？

MASM 有一个对齐指令： http: [//msdn.microsoft.com/en-us/library/dwa9fwef (VS.80).aspx](http://msdn.microsoft.com/en-us/library/dwa9fwef(VS.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T22:04:43.423

它将所有内容与 2 的 n 次方对齐。它不是指令，而是将被翻译成指令的指令

至于它的用法，例如：

mips32 指令总是 32 位长。所以每条指令都应该从字边界开始。在代码开始之前添加 .align 指令，将事物对齐到 32 位。这有很多好处，包括它只需要 1 次内存访问来获取指令，并且它可能对指令缓存有益。

# sql - SQL 问题

> ID：1021076
> 
> 赞同：0
> 
> 时间：2009-06-20T06:21:47.283
> 
> 标签：sql

```
<?php

$query = mysql_query("SELECT * FROM threads
                      INNER JOIN users
                      ON threads.poster = users.id
                      WHERE threads.forum_id = 11");

while($row = mysql_fetch_array($query)) {

<a href="thread.php?id=<?=$row['id']?>">Link</a>

} ?> 
```

在线程和用户中都有一个名为 id 的列。它打印用户 ID。无论如何，我得到它来打印线程 id 而无需重新命名其中一个。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T06:25:11.117

选择 *，threads.id 作为 thread_id FROM ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T06:25:41.753

选择 *，threads.id 作为 thread_id ...

然后你可以从 $row 中引用 thread_id。

$row['thread_id']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T07:24:50.167

为什么在查询中使用 *？最好只调用您需要的字段，而不是提取不需要的额外数据。您还需要通过调用上面列出的 table_name.field_name 格式来指定要使用的 ID。

当你开始获得一些复杂的连接时，我喜欢做的是用短字母给表名起别名。只是帮助简化一些事情。

> SELECT t.ID FROM threads t INNER JOIN users ON t.poster = users.id WHERE t.forum_id = 11

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T06:27:13.887

您需要明确命名该列。如果你输入：

```
SELECT USERS.*, 
       THREADS.ID, 
       USERS.ID 
FROM threads 
     INNER JOIN users 
           ON threads.poster = users.id 
WHERE threads.forum_id = 11 
```

那应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T12:14:43.520

看下面的代码：

```
$query = mysql_query("SELECT * FROM threads
                  INNER JOIN users
                  ON users.poster = threads.id
                  WHERE threads.forum_id = 11");

while($row = mysql_fetch_array($query)) {

<a href="thread.php?id=<?=$row['id']?>">Link</a>

} ?> 
```

它将打印线程ID

# java - 从哪里获得 org.apache.* 类型的库以及如何配置它们？

> ID：1021084
> 
> 赞同：1
> 
> 时间：2009-06-20T06:25:58.710
> 
> 标签：java, import, classpath

我的 Java 代码使用 log4j，例如。它试图：

```
import org.apache.log4j.logger, 
import org.apache.commons.lang.StringUtils, 
import org.testng.Assert 
```

还有很多。有什么常见的地方可以买到吗？另外，如何配置它们？我从 apache 站点下载了 log4j，但无法正确配置。任何帮助将不胜感激！

问候， 多编码器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T06:29:32.730

你会在一秒钟内踢自己，因为答案就在问题中！

要获取有关**org.apache.commons**库的更多信息，您需要访问：

[http://commons.apache.org/](http://commons.apache.org/)

- 更新 -

重新阅读您的问题，我认为您实际上是在询问**org.testng**，您可以在以下位置找到：

[http://testng.org](http://testng.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T06:30:04.287

在你的类路径中添加 log4j.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T07:19:42.283

这是我将提取的文件 C:\Program Files\Java\apache-log4j-1.2.15 即放在 java 的安装中的地方，并将类路径指定为 C:\Program Files\Java\apache-log4j-1.2.15\log4j -1.2.15.jar 与 C:\Program Files\Java\jdk1.6.0_14\lib 一起在现有类路径中；所以我将类路径设置为 C:\Program Files\Java\jdk1.6.0_14\lib;C:\Program Files\Java\apache-log4j-1.2.15\log4j-1.2.15.jar; 也这样。还尝试将 CLASSPATH 创建为单独的环境变量（我用大写字母注明了它！）并给出 C:\Program Files\Java\apache-log4j-1.2.15\log4j-1.2.15.jar; 对它的价值。但到目前为止，这两种方法都没有奏效......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T13:33:25.523

如果您不使用 Maven 自动下载它们，您可以从 [Maven repo](http://repo1.maven.org/maven2/)手动获取它们。这是除了原始项目站点之外的可信 jar 源。

# javascript - 读取 utf-8 文件（javascript XMLHttpRequest）会给出错误的欧洲字符

> ID：1021086
> 
> 赞同：11
> 
> 时间：2009-06-20T06:26:56.837
> 
> 标签：javascript, encoding, utf-8, xmlhttprequest

谁能帮忙？我有一个小程序可以使用 XMLHttpRequest 读取带有 javascript 的 UTF-8 文件。这个文件有欧洲字符，如 miércoles sábado 等。注意重音..

但是在读入的时候..字符都乱了..我检查了文件，它是完美的..一定是读入的程序..

这是我有一个包含文件的示例，该文件是完美的，它恰好是javascript，但这没关系..任何带有特殊字符的UTF-8编码文件都会给我同样的问题

this.weekDays = new Array("Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo");

但是当通过下面的过程返回并阅读时，它是这样的（注意 sabado 和 miercoles 中的有趣字符）

this.weekDays = new Array("Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo");

这是我的程序 - 它非常小......

```
var contentType = "application/x-www-form-urlencoded; charset=utf-8";

var request = new XMLHttpRequest(); 
request.open("GET", path, false);
request.setRequestHeader('Content-type', contentType)

if (request.overrideMimeType) request.overrideMimeType(contentType);

try { request.send(null); }
catch (e) { return null; }
if (request.status == 500 || request.status == 404 || request.status == 2 || (request.status == 0 && request.responseText == '')) return null;

//PROBLEM HERE is with european charcters that are read in

print(request.responseText);

return request.responseText; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-02-15T14:29:29.803

可能您的文件不在 UTF-8 中，然后从 javascript 中尝试：

```
var request = new XMLHttpRequest();
request.open("GET", path, false);
request.overrideMimeType('text/xml; charset=iso-8859-1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-19T11:07:39.333

我有同样的问题，我以这种方式修复。

如果您将包含西班牙日的 js 文件作为 UTF-8 提供，并且 if 未保存为 UTF-8，它将无法工作。

将 IDE 中的文件保存为 UTF-8（即 js 文件的 eclipse 默认值为 cp1252），并将其作为 UTF-8 字符编码提供。

如果您的应用程序是 java，请使用以下代码进行过滤：

```
response.setCharacterEncoding("UTF-8"); 
```

祝你有个好的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T06:32:54.720

编辑：似乎这个答案虽然被接受，但不是最理想的，所以对于任何来到这里有类似问题的人，请查看[里卡多的答案](https://stackoverflow.com/a/21798825/34065)

[我认为您必须使用不同的方式来打印字符，例如，请参阅本讨论](http://www.codingforums.com/archive/index.php/t-4588.html)末尾的代码：

```
<script>
  function getUnicode(num) {
    num = num.toString(16);
    if (num.length < 3) {
      for ( var i = num.length; i < 4; i++) {
        num = '0' + num;
      }
    }
    return ( "&#" + num + ";" );
  }

  for ( var i = 0; i < 65355; i++) {
    document.write(getUnicode(i));
  }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T09:19:12.697

我也遇到了同样的问题，我是这样解决的

在 Get 请求中，我们通过 url 发送数据所以我解码了 url 并通过字符串操作获取请求的参数

考虑一下你是否发送这样的 url，var ur1="getSubjectList.jsp"; ur1 +="?subjectlist=" +str+"&examId="+examId;

xmlHttp.open("GET", ur1, true); xmlHttp.send(null);

在 getSubjectList.jsp 中，使用这个 -- String decodedParams= U​​RLDecoder.decode(request.getQueryString(),"utf-8" );

字符串参数[]=decodedParams.split("&");

```
 String subjectlist[]=params[0].split("=");
     String examId[] = params[1].split("=");
     String center = subjectlist[1];
    String exam = examId[1]; 
```

这样，就可以得到请求的值

# visual-studio-2008 - 如何将自定义“项目项节点”添加到 Visual Studio Flavored Project

> ID：1021095
> 
> 赞同：4
> 
> 时间：2009-06-20T06:32:11.773
> 
> 标签：visual-studio-2008

我为 Visual Studio 2008 编写了一个简单的项目，我想在解决方案资源管理器中添加一个自定义的“文件夹”项，类似于“参考”文件夹。此文件夹将包含更多“自定义”节点，这些节点实际上并不代表文件，而是内存中的对象。如何挂钩解决方案资源管理器中显示的内容？我似乎找不到任何简单的代码示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-08T03:45:01.040

您应该编辑您的 .vcproj 文件。Google Mock 这样做是为了拥有一个假的“公共头文件”和一个“私人头文件”过滤器。

[http://code.google.com/p/googlemock/source/browse/trunk/msvc/gmock.vcproj#199](http://code.google.com/p/googlemock/source/browse/trunk/msvc/gmock.vcproj#199)

# ios - 在 iOS 中解析 XML？

> ID：1021102
> 
> 赞同：8
> 
> 时间：2009-06-20T06:37:34.943
> 
> 标签：ios, xml, parsing

我需要解析来自我的网络服务器的简单 XML 并将其存储在数据库中。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T08:15:44.620

请看一下[Touch XML](https://github.com/TouchCode/TouchXML)，这是一个用于读写 XML 的 Objective-C 框架。它的用法与 Apple 的 NSXMLDocument（不适用于 iPhone SDK）类似（直接替换）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-21T16:52:02.567

Apple 有两个内置的解决方案用于在 iphone 上解析 XML 数据：

1) Apple 有一个名为 NSXMLParser 的 XML 解析器的 Objective-C 实现。 [请参阅此处的文档。](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

2) Apple 也有一个基于 C 的 XML 解析器实现，称为 libXML2。 [请参阅此处的文档。- 向下滚动查看 XML 支持部分](http://developer.apple.com/iphone/library/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/iPhoneOSTechnologies/iPhoneOSTechnologies.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-11-04T15:10:52.647

在文章末尾，您可以找到完整的项目示例。

[http://www.hivestudio.cat/index.php?option=com_content&view=article&id=60:xml-parser-for-iphone&catid=35:technical-note-category&Itemid=76](http://www.hivestudio.cat/index.php?option=com_content&view=article&id=60:xml-parser-for-iphone&catid=35:technical-note-category&Itemid=76)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T11:47:04.003

你可以在这里查看，可能会对你有所帮助。 [http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.html](http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-15T14:25:27.527

上面提到的*Touch XML*，似乎打折了。[KissXML](http://code.google.com/p/kissxml/)是一种替代方法。它基于*Touch XML*，但具有更多功能。

[GDataXML](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/XMLSupport/)也可以是一种替代方案，它由 Google 开发。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-24T11:16:15.380

查看[http://www.tbxml.co.uk](http://www.tbxml.co.uk)以获得超快速、轻量级、易于使用的 XML 解析器！

# java-me - 运行 j2me 应用程序时出现 Netbeans OutOfMemoryError

> ID：1021103
> 
> 赞同：0
> 
> 时间：2009-06-20T06:39:08.123
> 
> 标签：java-me, netbeans6.5

当我尝试在 Netbeans 中运行任何 J2ME 程序（带有大的绿色播放图标）时，我总是得到 java.lang.OutOfMemoryError: Java heap space error。如何修复？（我可以在netbeans中构建J2ME程序并双击生成的JAD文件后运行它们。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T06:55:48.247

尝试增加允许的堆空间

检查[调整 JVM 开关的性能](http://performance.netbeans.org/howto/jvmswitches/index.html)

调整 Eclipse 有一个很好的线程：[Eclipse 3.4 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-eclipse-34-jvm-settings#144349)

其中一些可能对您有用

# .net - Visual Studio 的未处理异常检查器插件

> ID：1021104
> 
> 赞同：6
> 
> 时间：2009-06-20T06:39:39.807
> 
> 标签：.net, visual-studio, exception, plugins, exception-handling

我希望能够在编译时询问任何给定的方法，通过调用它可能会抛出什么异常。异常列表应包括任何可能在任何嵌套方法调用中抛出的未捕获异常。捕获的异常不应包含在列表中，因为我只对可能出现在我自己的代码中的异常感兴趣。

是否存在具有该功能或类似功能的 Visual Studio 插件？

如果这个插件也能够帮助我编写代码文档，那就太好了。

**编辑：**
类似的问题：[C#中的检查异常捕获](https://stackoverflow.com/questions/232318/checked-exception-catching-in-c)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T07:44:14.090

实际上，我刚刚找到了该站点，它是[Red-Gate](http://www.red-gate.com/)，它有一个名为[Exception Hunter](http://www.red-gate.com/products/Exception_Hunter/index.htm)的工具，它几乎可以做到这一点。

**不对：**
我相当肯定[DevExpress](http://www.devexpress.com/Products/)产品中的一个包含一个可以做到（类似？）这个的插件。

# architecture - Technorati 是用什么语言/技术/框架构建的？

> ID：1021111
> 
> 赞同：0
> 
> 时间：2009-06-20T07:03:50.727
> 
> 标签：architecture, web-applications

我没有看到像 .php 或 .jsp 或 .aspx 文件扩展名这样的明显指标。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T07:23:28.937

他们的搜索页面表单发布到[http://www.technorati.com/query.php](http://www.technorati.com/query.php)，所以我认为它至少部分是 PHP。

[他们的广告系统](http://beta.technoratimedia.com/)似乎也是由 ColdFusion 驱动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T07:29:08.943

这里有一些关于架构的信息：

[http://blogs.zdnet.com/Newton/?p=20](http://blogs.zdnet.com/Newton/?p=20)

我相信它是基于 PHP 的。

# c - 在 CGI 应用程序中维护会话状态的最佳 C/C++ 库？

> ID：1021112
> 
> 赞同：5
> 
> 时间：2009-06-20T07:03:59.650
> 
> 标签：c, c++

我听说过 Boost 和 ACE 作为两个著名的 C++ 库。还有哪些其他可用的优秀 C/C++ 库？

Boost 和 ACE 是否支持用 C/C++ 编写的 Web 应用程序的会话管理？

编辑：好的，我会尝试成为特定领域的。我正在寻找一个 C/C++ 库，它可以帮助我维护基于 C++ 的 CGI Web 应用程序的会话状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-20T08:06:09.023

当您尝试在 C++ 中构建 Web 应用程序时，我推荐[Wt](http://www.webtoolkit.eu/)，这是一个类似 Qt 的框架，用于在 C++ 中创建 Web 应用程序。它在每个会话一个进程中处理会话（当安全很重要时）或每个进程多个会话。您可以使用内置的网络服务器，也可以将其与任何支持 FastCGI 的网络服务器一起使用。

（另外，我会推荐它而不是 Boost.CGI，因为它似乎得到维护并且功能完整）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-20T07:17:26.283

取决于您是在谈论通用库还是特定于域的库。出于通用目的，Boost 是同类产品中最好的（不要忘记好的旧 STL），所以我看不出寻找其他可以覆盖大部分相同领域但没有那么完美的东西的意义。至于特定域，您必须指定域:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T13:27:39.547

如果您也对 C（不是 C++）感兴趣，[glib](http://library.gnome.org/devel/glib/)（Gnome 项目的实用程序库）提供了许多有用的数据结构和构造。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T07:46:06.100

如果您需要 gui 或使用 unicode，也有[GTK 。](http://library.gnome.org/devel/gtk/stable/)（尽管当标准完成时， [c++0x](http://en.wikipedia.org/wiki/C%2B%2B0x)应该有更好的原生 unicode 支持）。

Boost 还不支持会话，但是已经提出了一个应该有会话的[CGI 库。](https://launchpad.net/cgi)

如果您想将 C++ 用于 Web 应用程序，请考虑使用[CGICC](http://www.gnu.org/software/cgicc/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-20T07:25:07.670

C++ 有你能想象到的任何东西的库，所以你的问题的范围是相当不确定的。你对什么感兴趣？Web 应用程序、科学程序、GUI？如果您想要一个好的答案，请准确说明您需要什么。

Boost 是用于相对低级事物的通用库。虽然它相当复杂和高级，所以在开始之前你应该很好地掌握 C++。[ACE](http://www.cs.wustl.edu/~schmidt/ACE-overview.html)主要用于线程/进程/应用程序之间的同步和通信。

如果您需要 Web 应用程序，我建议您强烈考虑您选择的语言。C++ 可能不是最好的方向，除非你有非常具体的约束来强迫你的手。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-21T04:26:47.217

> 好的，我将尝试针对特定领域。我正在寻找一个 C/C++ 库，它可以帮助我维护基于 C++ 的 CGI Web 应用程序的会话状态。

[CppCMS](http://cppcms.sourceforge.net) ?

*   会话管理示例：[http ://cppcms.sourceforge.net/wikipp/en/page/tut_sessions](http://cppcms.sourceforge.net/wikipp/en/page/tut_sessions)
*   参考：[http ://cppcms.sourceforge.net/wikipp/en/page/ref_cppcms_session_iface](http://cppcms.sourceforge.net/wikipp/en/page/ref_cppcms_session_iface)
*   配置：[http ://cppcms.sourceforge.net/wikipp/en/page/ref_config#sessions](http://cppcms.sourceforge.net/wikipp/en/page/ref_config#sessions)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T16:40:21.413

Poco 是一个出色的 C++ 库，具有数据访问、xml、网络、压缩和加密功能，所有这些都包含在一个漂亮的小包中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-20T16:56:27.163

显然，如果你想做科学计算，可以使用 QT for GUI（我知道这不是一个库）、 [Electronic Arts 标准模板库](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)和 [Blitz++ ：](http://www.oonumerics.org/blitz/)

> Blitz++ 是一个用于科学计算的 C++ 类库，提供与 Fortran 77/90 相当的性能。
> 
> C++ 编程语言提供了许多有用的功能来解决复杂的科学计算问题：继承、多态、泛型编程和运算符重载是其中最重要的。不幸的是，这些高级特性伴随着高昂的性能价格标签：直到最近，C++ 的性能落后于 Fortran 的性能从 20% 到 10 倍不等。因此，C++ 用于科学计算的速度很慢。
> 
> 有没有办法让 C++ 变得更好，这样我们就可以保留高级语言特性，但又能摆脱糟糕的性能？这是 Blitz++ 项目的目标：开发使 C++ 能够与 - 在某些情况下甚至超过 - Fortran 在数值计算方面的速度相媲美的技术，同时保留面向对象的接口。Blitz++ 数值库正在构建为这些技术的测试平台。
> 
> 最近的基准测试表明，C++ 正在稳步蚕食 Fortran 的高性能垄断，而对于某些基准测试，C++ 甚至比 Fortran 还要快！这些结果不是通过更好地优化编译器、预处理器或语言扩展获得的，而是通过使用模板技术获得的。通过巧妙地使用模板，可以在编译时自动执行循环融合、展开、平铺和算法特化等优化。
> 
> Blitz++ 的另一个目标是扩展传统的密集阵列模型以包含新的有用的功能。此类扩展的一些示例是灵活的存储格式、张量表示法和索引占位符。

# lolcode - 使用哪个 LOLCODE 解释器？

> ID：1021118
> 
> 赞同：36
> 
> 时间：2009-06-20T07:06:34.463
> 
> 标签：lolcode

这类似于[这个问题](https://stackoverflow.com/questions/585551/what-is-the-best-open-source-lolcode-interpreter)。我要问的是，我应该根据这些标准选择哪个[LOLCODE解释器：](http://en.wikipedia.org/wiki/LOLCODE)

1) 运行良好并且是最新的

2) 易于安装 - 我以前看过，但找不到一个我觉得易于安装的。

请随时提出您的建议和意见，我已经有几个月没有看过了，很好奇人们的想法，我期待着学习它。

编辑：我这样做只是为了学习 LOLCODE。为什么？因为我可以而且我认为用 ICANHAZ 声明变量并用 KTHXBAI 结束程序会很有趣。我真的只是好奇。我真的希望它尽可能接近规范。我不在乎它是开源的还是闭源的，它可以在 Windows（我的台式机）或 Linux（我的笔记本电脑）中运行。希望这可以帮助！

编辑 2：我已经下载了[此处](http://www.iunknown.com/2007/11/lolcode-on-dlr.html)可用的 LOLCODE 编译器。但是，我无法弄清楚一些说明，所以我仍然愿意接受任何其他解释器/编译器的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-03-13T13:38:13.277

我强烈推荐[repl.it](http://repl.it)。它是在线的，但可以下载。它还有其他语言，如 Emoticon、Python、JavaScript 和许多其他语言。这是一个完整的列表...

> *   红宝石
> *   Python
> *   卢阿
> *   方案
> *   QBasic
> *   向前
> *   Javascript
> *   Javascript.next
> *   移动
> *   咖啡因
> *   咖啡脚本
> *   图释
> *   脑残***
> *   大声笑
> *   无拉姆达
> *   布卢普

与名称所暗示的不同，它在 REPL 旁边有一个脚本框。我相信一个完美的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-20T21:18:21.600

我的朋友为我们大学的某个项目创建了一次 LOLCODE 解释器。它需要带有一些宝石的 Ruby，但我不记得具体是哪个。当我有时间自己检查时，我可以稍后更新答案。这是[github 存储库](http://github.com/qoobaa/lol)的链接。

# pdf - 您将如何以编程方式将 SWF 嵌入 PDF 中？

> ID：1021124
> 
> 赞同：6
> 
> 时间：2009-06-20T07:11:42.707
> 
> 标签：pdf, flash, pdf-generation

是否可以通过 C# 应用程序以编程方式将 SWF 嵌入 PDF 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-07-08T01:33:51.120

您可以使用 iText 库的 c# 端口。它被称为 iTextSharp。

[http://itextsharp.com/](http://itextsharp.com/)

代码可能如下所示的示例：

```
 // create an output file stream which will be used to capture the generated file 
    string outputFileName = "output.pdf"; 
    FileStream outputFile = new FileStream(outputFileName, FileMode.Create); 

    // open the original pdf file as a PdfReader 
    PdfReader reader = new PdfReader("inputfile.pdf"); 

    // open the output pdf file as a PdfStamper 
    PdfStamper stamper = new PdfStamper(reader, outputFile); 

    // inserts a blank page at the start of the document 
    stamper.InsertPage(1, PageSize.A4); 

    // add the flash file to the output document as an annotation 
    PdfFileSpecification fs = PdfFileSpecification.FileEmbedded(stamper.Writer, flashFileTextBox.Text, flashFileTextBox.Text, null); 
    PdfAnnotation flashInsert = PdfAnnotation.CreateScreen(stamper.Writer, new Rectangle(50f,791f,545f,420f),"Flash Insert",fs, "application/x-shockwave-flash", true); 

    stamper.AddAnnotation(flashInsert,1); 

    stamper.Close(); 
    reader.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-02T02:46:29.250

Flash SWF 文件可以通过编程方式嵌入到 PDF 文档中。看看来自[webSupergoo](http://www.websupergoo.com/abcpdf-flash-swf.htm)的 PDF 库。该文档包括 C# 和 VB.NET 中的示例。

# dependency-injection - Lua I/O 依赖注入

> ID：1021125
> 
> 赞同：0
> 
> 时间：2009-06-20T07:14:15.930
> 
> 标签：dependency-injection, mocking, lua

我是 Lua 新手。我正在使用 Lua和[LeMock](http://lua-users.org/lists/lua-l/2008-11/msg00423.html)[对](http://lemock.luaforge.net/userguide.html)Lua 5.1 代码进行单元测试。

我的课是 StorageManager。我正在对它的 load() 方法进行单元测试，该方法从磁盘加载文件。我不希望我的单元测试依赖于实际磁盘上的实际文件来测试它。

因此，我尝试使用模拟对象注入 I/O 依赖项，并在测试期间验证该对象的行为。我不知道如何使用 I/O 对象，其语法在我的基于模拟的单元测试和“真实代码”调用时都有效。

如何更改代码（最好是 load() 方法），以便在从任一单元测试调用时它都能完成工作（没有模拟的那个是临时的，直到我弄清楚这一点 - 它类似于将后来实际调用了被测方法）？

注意 1：如果您运行这些测试，请记住“无模拟”测试需要磁盘上的文件名与 VALID_FILENAME 匹配的文件。

注意 2：我考虑过使用 pcall 的类似 try/catch 的行为来执行一行或另一行（参见 storageManager.lua 第 11 和 12 行）。假设这甚至是可能的，它感觉就像一个 hack，它会捕获我以后可能想要抛出的错误（超出负载（））。如果您没有其他选择，请详细说明此选项。

**test_storageManager.lua：**

```
 1 require "StorageManager"
 2 require "lunity"
 3 require "lemock"
 4 module("storageManager", package.seeall, lunity)
 5 
 6 VALID_FILENAME = "storageManagerTest.dat"
 7 
 8 function setup()
 9     mc = lemock.controller()
10 end
11 
12 function test_load_reads_file_properly()
13     io_mock = mc:mock()
14     file_handle_mock = mc:mock()
15     io_mock:open(VALID_FILENAME, "r");mc:returns(file_handle_mock)
16     file_handle_mock:read("*all")
17     file_handle_mock:close()
18     mc:replay()
19     storageManager = StorageManager:new{ io = io_mock }
20     storageManager:load(VALID_FILENAME)
21     mc:verify()
22 end
23 
24 function test_load_reads_file_properly_without_mock()
25     storageManager = StorageManager:new()
26     storageManager:load(VALID_FILENAME)
27 end
28 
29 runTests{useANSI = false} 
```

**storageManager.lua:**

```
 1 StorageManager = {}
 2 
 3 function StorageManager.new (self,init)
 4     init = init or { io=io } -- I/O dependency injection attempt
 5     setmetatable(init,self)
 6     self.__index = self
 7     return init
 8 end
 9 
10 function StorageManager:load(filename)
11     file_handle = self['io'].open(self['io'], filename, "r") -- works w/ mock
12     -- file_handle = io.open(filename, "r") -- works w/o mock
13     result = file_handle:read("*all")
14     file_handle:close()
15     return result
16 end 
```

**编辑：**

这些类通过了这两个测试。非常感谢RBerteig。

**test_storageManager.lua**

```
 1 require "admin.StorageManager"
 2 require "tests.lunity"
 3 require "lib.lemock"
 4 module("storageManager", package.seeall, lunity)
 5 
 6 VALID_FILENAME = "storageManagerTest.dat"
 7 
 8 function setup()
 9     mc = lemock.controller()
10 end
11
12 function test_load_reads_file_properly()
13     io_mock = mc:mock()
14     file_handle_mock = mc:mock()
15     io_mock.open(VALID_FILENAME, "r");mc:returns(file_handle_mock)
16     file_handle_mock:read("*all")
17     file_handle_mock:close()
18     mc:replay()
19     local saved_io = _G.io
20     _G.io = io_mock
21     package.loaded.io = io_mock
22     storageManager = StorageManager:new()
23     storageManager:load(VALID_FILENAME)
24     _G.io = saved_io
25     package.loaded.io = saved_io
26     mc:verify()
27 end
28
29 function test_load_reads_file_properly_without_mock()
30     storageManager = StorageManager:new()
31     storageManager:load(VALID_FILENAME)
32 end
33
34 runTests{useANSI = false} 
```

**存储管理器.lua**

```
 1 StorageManager = {}
 2 
 3 function StorageManager.new (self,init)
 4     init = init or {}
 5     setmetatable(init,self)
 6     self.__index = self
 7     return init
 8 end
 9 
10 function StorageManager:load(filename)
11     file_handle = io.open(filename, "r")
12     result = file_handle:read("*all")
13     file_handle:close()
14     return result
15 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T07:51:05.233

我认为你让问题变得比它必须的更困难。

假设模块 storageManager.lua 本身没有本地化`io`模块，那么你需要做的就是`io`在运行测试时用你的模拟对象替换全局。

如果模块确实为了性能对对象进行了本地化`io`，那么您需要`io`在加载模块之前注入新值。这可能意味着您需要调用`require`部分测试用例设置（以及从`package.loaded`and中删除模块所有痕迹的匹配清理`_G`），以便可以在不同的测试用例中以不同方式模拟它。WinImage

**编辑：**

通过本地化模块以提高性能，我的意思是将模块的方法复制到模块名称空间中的局部变量中的 Lua 习惯用法。例如：

```
-- somemodule.lua
需要“io”
需要“数学”

-- 复制 io 和 math 到局部变量
本地 io,math=io,math

-- 开始模块本身，注意 package.seeall 没有被使用，所以全局变量是
-- 在此之后不可见
模块（...）

函数 doMathAndIo()
    -- 在这里做一些有趣的事
结尾

```

如果您这样做，对库存模块的引用将`io`在`math`执行时进行`require "somemodule"`。在调用之后`require()`用模拟版本替换这些模块中的任何一个都不会有效。

要有效地模拟与此习惯用法一起使用的模块，您必须*在*调用`require()`.

这是我在测试用例中在调用期间替换 io 对象的方法：

```
函数 test_load_reads_file_properly()
    io_mock = mc:mock()
    file_handle_mock = mc:mock()
    io_mock:open(VALID_FILENAME, "r");mc:returns(file_handle_mock)
    file_handle_mock:read("*all")
    文件句柄模拟：关闭（）
    麦克：重播（）

    本地已保存_io = _G.io
    _G.io = io_mock
    package.loaded.io = io_mock
    存储管理器 = 存储管理器：新{ }
    存储管理器：加载（VALID_FILENAME）
    _G.io = 已保存_io
    package.loaded.io = saved_io
    麦克：验证（）
结尾

```

I may not be restoring the real object at exactly the right moment, and this is untested, but it should point you in the right direction.

# c++ - 抽象基类 (C++) 中的嵌套类定义

> ID：1021135
> 
> 赞同：2
> 
> 时间：2009-06-20T07:19:00.133
> 
> 标签：c++

关于如何在 C++ 的[ABC中使用嵌套类](http://www.parashift.com/c++-faq-lite/abcs.html)~~迭代器有什么建议吗？~~请注意，我还希望有一个返回此类实例的虚函数。

更具体地说，这是我的方法：

```
class ABC {
        typedef iterator<forward_iterator_tag, MyType> MyTypeIter;
        virtual MyTypeIter *begin() = 0;
};

class Foo : ABC {
        MyTypeIter : public ABC::MyTypeIter;
        virtual MyTypeIter *begin();
};

ABC::MyTypeIter *Foo::begin()
{
        Foo::MyTypeIter *ret;
        ret = new Foo::MyTypeIter(...);
        return ret;
} 
```

有没有比这更好的方法（例如不使用指针的方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T07:54:00.063

你有什么问题？嵌套类的行为方式与顶级类相同，因此您可以像返回任何其他对象一样返回其对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T08:13:53.097

我更喜欢将*迭代器*保留在类内部，并且只公开一个接口进行迭代。
例如，您可以`List<>`使用以下方法实现 a：

*   `void prepare_iteration() // reset the internal iterator`
*   `bool step_iteration() // move internal iterator`
*   `DATA_TYPE & read() // return the data by using the iterator`
*   `write( DATA_TYPE & ) // update the data by using the iterator`

在这个例子中，迭代器可以是一个简单的节点指针，它永远不会暴露给用户。我发现这种方法比迭代器对象更容易、更安全。
（好吧，“更安全”的部分需要大量讨论）

1.  上述接口可以实现为抽象类。
2.  您的*容器*（或其他）类可以继承并实现它。

我知道这不是您要寻找的答案，但这只是设计课程的另一种想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T07:40:43.897

例如，看一下如何为 std::vector 类实现迭代器。

# c++ - 动态内存和“普通”内存的区别

> ID：1021138
> 
> 赞同：11
> 
> 时间：2009-06-20T07:20:56.727
> 
> 标签：c++, memory, memory-management

使用运算符分配的内存和通过简单的变量声明分配的内存之间有哪些技术差异`new`，例如`int var`？c++ 是否有任何形式的自动内存管理？

特别是，我有几个问题。首先，由于使用动态内存，您必须声明一个指针来存储您使用的实际内存的地址，动态内存不是使用*更多*内存吗？我不明白为什么指针是必要的，除非你声明一个数组。

其次，如果我要制作这样一个简单的功能：

> ```
> int myfunc() { int x = 2; int y = 3; return x+y; } 
> ```

...并调用它，该函数分配的内存是否会在其存在范围结束后立即被释放？那么动态内存呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-20T09:00:37.027

**注意：**这个答案太长了*。*有时间我会删减的。同时，如果您能想到有用的编辑，请发表评论。

* * *

要回答您的问题，我们首先需要定义两个内存区域，称为**堆栈**和**堆**。

# 堆栈

将堆栈想象成一堆盒子。每个框代表一个函数的执行。一开始，当`main`被调用时，地板上有一个盒子。您定义的任何局部变量都在该框中。

## 一个简单的例子

```
int main(int argc, char * argv[])
{
    int a = 3;
    int b = 4;
    return a + b;
} 
```

在这种情况下，地板上有一个盒子，其中包含变量`argc`（整数）、`argv`（指向 char 数组的指针）、`a`（整数）和`b`（整数）。

## 不止一盒

```
int main(int argc, char * argv[])
{
    int a = 3;
    int b = 4;
    return do_stuff(a, b);
}

int do_stuff(int a, int b)
{
    int c = a + b;
    c++;
    return c;
} 
```

现在，您在地板上有一个盒子（用于`main`），其中有`argc`、`argv`、`a`和`b`。在那个盒子的顶部，你有另一个盒子（for `do_stuff`），里面有`a`、`b`和`c`。

这个例子说明了两个有趣的效果。

1.  您可能知道，`a`并且`b`是按值传递的。这就是*为什么*在`do_stuff`.

2.  请注意，您不必为这些变量做任何事情`free`。`delete`当您的函数返回时，该函数的框被销毁。

## 盒子溢出

```
 int main(int argc, char * argv[])
    {
        int a = 3;
        int b = 4;
        return do_stuff(a, b);
    }

    int do_stuff(int a, int b)
    {
        return do_stuff(a, b);
    } 
```

在这里，地板上有一个盒子（`main`如前所述）。然后，您有一个带有和的框（用于`do_stuff`）。然后，您有另一个框（用于调用自身），再次使用and 。然后另一个。很快，你就会有一个堆栈*溢出*。`a``b``do_stuff``a``b`

 *## 堆栈摘要

将堆栈想象成一堆盒子。每个框代表一个正在执行的函数，并且该框包含该函数中定义的局部变量。当函数返回时，那个盒子就被销毁了。

## 更多技术内容

*   每个“盒子”被正式称为一个*栈帧*。
*   有没有注意到你的变量是如何具有“随机”默认值的？当一个旧的堆栈帧被“销毁”时，它就不再相关了。它不会被归零或类似的东西。下一次堆栈帧使用该部分内存时，您会在局部变量中看到旧堆栈帧的位。

# 堆

这就是动态内存分配发挥作用的地方。

把堆想象成一片无尽的绿色记忆草地。当您调用`malloc`or`new`时，会在堆中分配一块内存。您将获得一个访问此内存块的指针。

```
int main(int argc, char * argv[])
{
    int * a = new int;
    return *a;
} 
```

在这里，在堆上分配了一个新整数的内存。您会得到一个名为`a`指向该内存的指针。

*   `a`是一个局部变量，所以它在`main`“盒子”中

# 动态内存分配的基本原理

当然，使用动态分配的内存似乎会在这里和那里浪费一些字节用于指针。但是，如果没有动态内存分配，有些事情是无法（轻松）完成的。

## 返回一个数组

```
int main(int argc, char * argv[])
{
    int * intarray = create_array();
    return intarray[0];
}

int * create_array()
{
    int intarray[5];
    intarray[0] = 0;
    return intarray;
} 
```

这里会发生什么？您在`create_array`. 实际上，您返回一个指针，它只指向`create_array`包含数组的“盒子”部分。返回时会发生什么`create_array`？它的盒子被破坏了，你可以预料到你的阵列随时会损坏。

相反，使用动态分配的内存。

```
int main(int argc, char * argv[])
{
    int * intarray = create_array();
    int return_value = intarray[0];
    delete[] intarray;
    return return_value;
}

int * create_array()
{
    int * intarray = new int[5];
    intarray[0] = 0;
    return intarray;
} 
```

因为函数返回不会修改堆，所以您的宝贵`intarray`逃脱毫发无损。不过，完成后记住`delete[]`它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T07:26:00.150

动态内存位于堆而不是堆栈上。动态内存的生命周期是从分配时间到释放时间。对于局部变量，它们的生命周期仅限于定义它们的函数/块。

关于您关于函数中内存使用的问题，在您的示例中，局部变量的内存将在函数结束时被释放。但是，如果内存是用 动态分配的`new`，它不会被自动释放，您将负责显式地使用`delete`来释放内存。

关于自动内存管理，C++ 标准库为此提供了 auto_ptr。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T07:26:06.250

“new”分配的内存最终在堆上。

在函数中分配的内存驻留在函数被放置在堆栈上的函数内部。

在此处阅读有关堆栈与堆分配的信息：[http ://www-ee.eng.hawaii.edu/~tep/EE160/Book/chap14/subsection2.1.1.8.html](http://www-ee.eng.hawaii.edu/~tep/EE160/Book/chap14/subsection2.1.1.8.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T07:28:23.623

使用 new 运算符分配的内存从称为“堆”的内存部分获取，而变量的静态分配使用与过程/函数调用（“堆栈”）共享的内存部分。

您只需要担心您自己使用新的动态内存分配，在编译时已知的变量（在源代码中定义）会在其范围结束时自动释放（函数/过程结束，块，.. .)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T07:40:28.357

**“动态”和“普通”记忆之间的巨大差异很好地反映在问题本身上。**

C++ 根本不支持动态内存。

当您使用动态内存时，您完全需要自己负责。你必须分配它。当您忘记这样做并尝试访问它时，您会抛出指针，您将有很多负面的惊喜。此外，你必须释放记忆——当你以任何方式忘记它时，你会有更多的惊喜。此类错误属于 C/C++ 程序中最难发现的错误。

你需要一个额外的指针，因为你需要以某种方式访问​​你的新内存。一些内存（无论是否动态）首先是编程语言无法处理的。您需要有权访问它。这是由变量完成的。但是像 C++ 这样的语言中的变量存储在“普通”内存中。所以你需要有“指针”——指针是一种间接形式，它表示“不，我不是你要搜索的值，但我指向它”。指针是 C++ 中访问动态内存的唯一可能性。

相比之下，“普通”内存可以直接访问，分配和释放由语言本身自动完成。

动态内存和指针是 C++ 中问题的最大根源——但它也是一个非常强大的概念——如果你做得对，你可以比普通内存做更多的事情。

这也是为什么很多库都有处理动态内存的函数或整个模块的原因。auto_ptr-example 也在一个并行答案中被提及，它试图解决这个问题，即动态内存应该在方法结束时可靠地释放。

通常只有在真正需要的情况下才会使用动态内存。您不会使用它来拥有单个整数变量，而是拥有数组或在内存中构建更大的数据结构。*

# hudson - 如何使用 MSTest 深入了解 Hudson 上的数据驱动单元测试结果

> ID：1021159
> 
> 赞同：0
> 
> 时间：2009-06-20T07:31:31.497
> 
> 标签：hudson, mstest, data-driven

我们的[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)服务器由[Hudson](http://en.wikipedia.org/wiki/Hudson_%28software%29)和[MSTest](http://en.wikipedia.org/wiki/MSTest)提供支持。我们使用 Hudson MSTest 插件。

一切正常，除了数据驱动的单元测试失败时出现问题。MSTest 插件不知道进一步钻取数据行，就像 Visual Studio 在单击失败的数据驱动单元测试时所做的那样。

因此，当数据驱动的单元测试失败时，Hudson 中的错误报告绝对没有用 - 没有堆栈，没有理由 - 什么都没有。

我如何解决它？如果有其他解决方案，我很乐意放弃 MSTest 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-20T20:43:38.923

我认为这个只需要作为 RFE 提交给问题跟踪器，以便相关方最终可以对其进行处理。

# c# - 为什么我不能在发布模式下运行我的 C# 程序？

> ID：1021160
> 
> 赞同：1
> 
> 时间：2009-06-20T07:32:27.860
> 
> 标签：c#, deployment, windows-mobile

我有示例代码（用于处理摩托罗拉 HC700 中的扫描仪）

问题是我只能在调试模式下运行这个程序

如果我尝试在发布模式下运行，我会收到此错误：

找不到类型或命名空间名称“Mot”（您是否缺少 using 指令或程序集引用？）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T08:24:34.713

如果您使用的是标准 csproj，请注意文件和引用可以是有条件的 - 即仅在某些配置中存在。您必须竭尽全力做到这一点（VS IDE 不允许您这样做 - 只能通过直接文件编辑），所以这似乎不太可能，但有*可能*。

不幸的是，如果没有一些具体的例子，很难进行调查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T08:02:12.200

您可以解决问题的方法：

1.  在您的代码中搜索#if 指令和条件属性。有时它们用于禁用调试/发布配置中的部分代码。情况可能是这样。
2.  还要在错误列表中查找编译器警告（即：未找到程序集，这可能会在以后破坏您的代码）。由于脚本/构建配置，您的发布构建中可能缺少某些库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:25:07.920

克里斯汤普森的评论至少对我来说是一个答案。类似的问题也发生了。在将解决方案配置从调试切换到发布时，外部 dll 引用将会丢失。我将它们从调试文件夹中的dll复制粘贴到发布文件夹，然后回到VS，选择发布并按F6进行调试，没关系。

使用 VS 2010 DotNet 框架：4

# sql - 我应该为不同的查询类型设置单独的 SQL 帐户吗？

> ID：1021161
> 
> 赞同：4
> 
> 时间：2009-06-20T07:32:30.060
> 
> 标签：sql

我开始在工作中开发一个小型内部 Web 应用程序，主要是概念验证，但我们希望将其视为“真实”应用程序。作为一名 DBA，我没有太多经验，我的团队中的任何人也没有（拥有一个并不是特别重要，因为它是一个 PoC）。

不过我想知道，如果这个网络应用程序公开，我们是否应该为不同的查询类型在数据库服务器上设置单独的帐户？例如，有一个用于 SELECT 查询的 SQL 帐户，而另一个用于 UPDATE/DELETE？我无法说服自己这样做有什么特别的好处，但我以前听说过这种技术，所以一定有一些价值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T08:54:05.200

为不同类型的任务（例如，批处理作业与 Web 服务）设置不同的帐户并限制每个帐户的连接数等是很有用的。这意味着，如果您的批处理作业发疯了，它就无法取出您的 Web 应用程序。

您还需要不同的帐户来获得不同的权限。例如，如果您的管理员和用户应用程序是分开的，他们应该有自己的帐户。这有助于确保如果您的用户应用程序受到攻击，它不会对您的数据造成太大的损害。

在这两个方面，拥有一个“只读”用户很有用，但前提是您的应用程序不执行写入操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T07:38:53.290

您可以限制匿名用户访问站点时使用的主帐户有权访问的查询类型。但是，我认为该子集中的每个查询不需要不同的用户。

您要关注的是每个用户可以访问哪些数据库/表，而不是特定类型的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T07:57:15.703

如果应用程序使用这两种帐户类型，我想您所指的做法是试图抵御[sql 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。如果您确保清理输入，则可能没有必要。记住[鲍比桌](https://stackoverflow.com/questions/84556/whats-your-favorite-programmer-cartoon/84629#84629)！

只读帐户的另一个原因是允许管理员用户直接在数据库上运行有关系统活动和调试生产问题的报告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T18:03:00.133

是的。请参阅[最小特权原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)。

> 在信息安全、计算机科学等领域，最小特权原则，也称为最小特权原则或最小特权原则，要求在计算环境的特定抽象层中，每个模块（如进程、基于我们正在考虑的层的用户或程序）必须能够仅访问其合法目的所必需的此类信息和资源。[1](http://en.wikipedia.org/wiki/Principle_of_least_privilege) [2] 当应用于用户时，也使用术语最少用户访问或最小特权用户帐户 (LUA)，指的是所有用户在任何时候都应以尽可能少的权限运行，并启动应用程序的概念尽可能少的特权。

有很多技术可以帮助公司接受这一原则。许多技术与专注于在每一层保留最终用户身份并回答问题的技术属于同一类别：

'谁是“真正的”用户'？

您至少应该了解忽略最小权限原则并使用单个共享数据库用户帐户进行中间层/应用程序服务器与数据库之间的所有交互的决定的后果和风险。作为数据库应用程序开发人员，有一些技术可以保持高效，并且仍然在您的应用程序中提供强大的安全功能。

该领域的技术示例包括但不限于：

1.  Kerberos 票证或 X.509 证书 (SSL)。
2.  代理身份验证 - 允许您继续池连接，但代理每个会话的不同角色。

除了安全性之外，采用最小特权原则还有其他好处。在许多数据库中，只读连接可以更好地执行，因为它不需要了解和/或参与事务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T07:38:25.243

查询类型不需要单独的帐户。通常，与数据库的连接使用与访问 Web 应用程序的用户无关的数据库用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T14:40:25.453

在“公共”应用程序中，一个好的做法是使用服务帐户访问数据库（运行查询、执行存储过程），并在代码级别计算用户访问控制。

这可以防止您需要将新用户添加到数据库的安全管理器中。

我什至看到使用单独的 SQL 数据库帐户的唯一一次是分离应用程序功能，即使那样，它们也是服务帐户。IE

*   将选择授予 ReportService
*   将选择、更新、删除权限授予 TransactionService

然后，您可以根据需要将 Web 应用程序作为 ReportService 或 TransactionService 运行。

通过将这两个概念加在一起（代码中的用户访问、服务的功能区分），您可以有效地对您的用户访问控制机制是否有效进行单元测试。否则，您需要在数据库中设置一个用户，然后查看您从数据库中获得了什么样的行为。

# java - 刷新视图 Android

> ID：1021167
> 
> 赞同：8
> 
> 时间：2009-06-20T07:40:11.977
> 
> 标签：java, android

我想刷新一个列表视图。当我从不同的类中获取值时，我希望它更新为列表视图。我正在创建一个用于刷新列表的线程，但出现异常：

`Only the original thread that created a thread a view hierarchy can touch its views`

如何进行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-29T05:16:24.850

无需尝试刷新视图以更新列表，只需获取 Adapter 对象并调用 notifyDataSetChanged() API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T09:31:27.713

每当您在 Android GUI 中使用多个线程时，您都应该使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html)s. Android 开发指南有一个很好的示例，说明如何在[此处](http://developer.android.com/guide/topics/ui/dialogs.html#ProgressDialog)*使用第二个线程展开示例 ProgressDialog*小节时如何将`Handler`s 与 a一起使用。`ProgressDialog`

 *该示例应该易于理解并帮助您将相同的概念应用于列表视图。*

# javascript - 在Javascript中将图像拖入文本字段

> ID：1021171
> 
> 赞同：3
> 
> 时间：2009-06-20T07:41:28.217
> 
> 标签：javascript, image, drag-and-drop, dom-events

我想允许用户将图像从网页拖到我的网络应用程序中，然后在应用程序的其他地方存储和使用图像 url。所以我正在创建一个输入字段作为拖动目标。

但由于这允许放置任何可拖动的 Web 对象（如链接），我需要进行一些错误检查。我可以在那里放一个按钮，但如果自动检测到下降会更好。

所以问题是......是否有任何事件处理程序 - 主要在 IE7 和 Firefox3 中支持 - 在删除图像时触发？它只是在现场触发更改事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:05:50.340

不，据我所知，没有任何事件会在您下线后立即触发。

这是一个可能的解决方案：

```
var input = document.getElementById("input");
var lastVal = input.value;

setInterval(function() {
  if (input.value !== lastVal) {
    if (input.value) {
      if ( /\.(jpe?g|gif|bmp|png)(\?.*)?$/.test(input.value) ){
        alert('It\'s an image URL!!!');
      } else {
        alert('Not an image URL...');
      }
    }
    lastVal = input.value;
  }
}, 100); 
```

演示在这里：http: **[//jsbin.com/izake](http://jsbin.com/izake)**

注意：似乎某些浏览器 (IE) 不允许您像其他浏览器一样将项目拖放到字段中。从头开始创建一个可能值得 - 页面上的所有内容都是可拖动的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T07:47:54.910

拖放后您不会直接获得标准事件（仅在单击文本字段外部之后），但也许您可以使用某种 DragListener ...

要检查 URL 是否为有效图像，最好检查扩展名（JPG、PNG、GIF...）并检查 URL 是否以“file:”开头 - 如果是，则链接到本地图像文件，你应该忽略它。

# iphone - 如何在 iPhone 应用程序中检查网络类型

> ID：1021172
> 
> 赞同：3
> 
> 时间：2009-06-20T07:41:36.123
> 
> 标签：iphone

上周我们向苹果提交了我们的应用程序。昨天我们收到了他们的回复。基本上我们的应用程序播放来自 IIS 的视频。现在我们根本不检查网络类型。它也在播放没有 wi-fi 的视频。但苹果要求我们将其限制为仅使用 wi-fi 播放。所以现在我需要检查我的网络连接类型。

有些人可以发布代码或任何现有的库来执行此功能。

非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T08:10:26.393

您可以使用：

```
SCNetworkReachabilityFlags flags;
SCNetworkReachabilityGetFlags (target,&flags)
); 
```

获取网络状态：

```
if (flag & kSCNetworkReachabilityFlagsIsWWAN)
  // 3G/Edge/GPRS
else
  // Wifi 
```

# c++ - SendInput() 键盘字母 C/C++

> ID：1021175
> 
> 赞同：11
> 
> 时间：2009-06-20T07:46:01.793
> 
> 标签：c++, c, winapi, keyboard

我正在尝试使用`SendInput()`将句子发送到另一个应用程序（记事本），然后将其发送到`Enter`按键。

有代码片段吗？或帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T02:08:09.460

```
INPUT input;
WORD vkey = VK_F12; // see link below
input.type = INPUT_KEYBOARD;
input.ki.wScan = MapVirtualKey(vkey, MAPVK_VK_TO_VSC);
input.ki.time = 0;
input.ki.dwExtraInfo = 0;
input.ki.wVk = vkey;
input.ki.dwFlags = 0; // there is no KEYEVENTF_KEYDOWN
SendInput(1, &input, sizeof(INPUT));

input.ki.dwFlags = KEYEVENTF_KEYUP;
SendInput(1, &input, sizeof(INPUT)); 
```

[虚拟键码列表](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx) ......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-09T09:26:06.053

我在阅读@Nathan 的代码、[此参考](https://batchloaf.wordpress.com/2012/04/17/simulating-a-keystroke-in-win32-c-or-c-using-sendinput/)并结合@jave.web 的建议后进行了修改。此代码可用于输入字符（大写和小写）。

```
#define WINVER 0x0500
#include<windows.h>
void pressKeyB(char mK)
{
    HKL kbl = GetKeyboardLayout(0);
    INPUT ip;
    ip.type = INPUT_KEYBOARD;
    ip.ki.time = 0;
    ip.ki.dwFlags = KEYEVENTF_UNICODE;
    if ((int)mK<65 || (int)mK>90) //for lowercase
    {
        ip.ki.wScan = 0;
        ip.ki.wVk = VkKeyScanEx( mK, kbl );
    }
    else //for uppercase
    {
        ip.ki.wScan = mK;
        ip.ki.wVk = 0;

    }
    ip.ki.dwExtraInfo = 0;
    SendInput(1, &ip, sizeof(INPUT));
} 
```

下面是按回车键的功能：

```
 void pressEnter()
{
    INPUT ip;
    ip.type = INPUT_KEYBOARD;
    ip.ki.time = 0;
    ip.ki.dwFlags = KEYEVENTF_UNICODE;
    ip.ki.wScan = VK_RETURN; //VK_RETURN is the code of Return key
    ip.ki.wVk = 0;

    ip.ki.dwExtraInfo = 0;
    SendInput(1, &ip, sizeof(INPUT));

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T08:16:35.867

SendInput 函数接受一个 INPUT 结构数组。INPUT 结构可以是鼠标或键盘事件。[键盘事件结构](http://msdn.microsoft.com/en-us/library/ms646271(VS.85).aspx)有一个名为 wVk的成员，它可以是键盘上的任何键。Winuser.h 头文件为每个键提供宏定义 (VK_*)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-20T20:43:57.173

这里有一个简单的 C++ 示例[http://nibuthomas.wordpress.com/2009/08/04/how-to-use-sendinput/](http://nibuthomas.wordpress.com/2009/08/04/how-to-use-sendinput/)

还有一个更完整的 VB 示例[http://vb.mvps.org/samples/SendInput/](http://vb.mvps.org/samples/SendInput/)

# asp.net - 寻找 .Net 框架

> ID：1021178
> 
> 赞同：1
> 
> 时间：2009-06-20T07:47:37.157
> 
> 标签：asp.net

有没有办法找出哪个 .Net 版本（即 1.1 或 2.0 或 3.0 等）用于创建 Web 项目。我有 .aspx、.aspx.vb、web.config 等文件，但需要弄清楚。

还有如何在 Visual Studio 环境中打开现有的 ASP.Net 项目。我收到了另一个人的文件，但出于安全原因，他不想共享整个项目，而只想共享选定的文件。我们都想知道打开现有项目需要共享的最少文件是什么（我的意思是除了需要修改的 .aspx、.aspx.vb 文件）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T09:17:33.247

如果它的 ASP.NET 项目检查 web.config 中的 <assemblies> 元素，它必须包含您使用的每个程序集的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T08:38:26.883

请试试这个：

打开 Visual Studio。

单击文件 -> 打开 -> 网站（或按 Alt+Shift+O）。

选择包含您的文件的文件夹（aspx、aspx.vb、web.config）

在大多数情况下，它会将文件夹作为网站打开，您可以使用 F5 运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T09:09:46.853

我认为您提到的文件不会包含对它们所构建的 .NET 版本的任何引用，除非它们具有特定于版本的代码和功能（3.0+ 的 LINQ。2.0+ 的泛型等）。

为了在 Visual Studio中打开一个实际的 Web**项目，您需要该项目文件。**否则，您将只能打开单个文件。

# java - Eclipse 插件外的 Eclipse 工作区参考

> ID：1021181
> 
> 赞同：2
> 
> 时间：2009-06-20T07:50:19.353
> 
> 标签：java, eclipse, workspace

我正在运行以下代码：

```
import org.eclipse.core.resources.IWorkspace;
import org.eclipse.core.resources.ResourcesPlugin;

public class WorkspaceTest {
    public static void main(String[] args) {
        IWorkspace workspace = ResourcesPlugin.getWorkspace();
    }
} 
```

我收到以下错误：

```
Exception in thread "main" java.lang.IllegalStateException: Workspace is closed. 
```

如何获取对非 Eclipse 插件工作区的引用？

（为了能够在这里运行代码：）

[http://www.ssw.uni-linz.ac.at/Teaching/Lectures/KompTech/JDT.pdf](http://www.ssw.uni-linz.ac.at/Teaching/Lectures/KompTech/JDT.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T08:09:33.917

首先，它可能只是意味着您不是在 Eclipse 下运行，而是在标准 Java 应用程序下运行。

对于 Eclipse 插件，您需要不要过早调用它（例如在创建工作区之前）。对于非 Eclipse 插件的含义，您可能必须以某种方式*创建*一个工作区，因为您将无法引用 Eclipse 中已经存在的那些。

另外，您必须确保您没有`org.eclipse.core.resources`在构建路径中，而是在插件 manifest.mf 文件中作为依赖插件。（请参阅[此线程](http://dev.eclipse.org/newslists/news.eclipse.platform/msg49860.html)）
因此`ResourcePlugin`eclipse 没有实例化 （尽管您仍然可以`ResourcePlugin`使用代码调用该类）。

另请参阅[此答案](https://stackoverflow.com/questions/938439/programatically-modify-eclipse-workspace-and-cdt-options-from-a-plugin)以了解其他想法。

# asp.net - 为什么 Request.Cookies 在 foreach 循环中返回字符串而不是 HttpCookie 对象？

> ID：1021183
> 
> 赞同：24
> 
> 时间：2009-06-20T07:51:46.730
> 
> 标签：asp.net, httpcookie

今天早上我无意中看到了下面的代码片段，我很惊讶，因为它运行得很好。

请不要看它的逻辑，我只是​​好奇为什么 HttpCookieCollection（在这种情况下为 Request.Cookies）在 foreach 循环中返回一个字符串（cookie 名称）而不是一个 HttpCookie 对象。这是一个一致性问题，因为我们通常通过索引/名称获取此集合中的 HttpCookie 对象吗？

谢谢，

```
foreach (string cookieKey in System.Web.HttpContext.Current.Request.Cookies)
{
    HttpCookie tmpCookie = System.Web.HttpContext.Current.Request.Cookies[cookieKey];
    if (tmpCookie != null && tmpCookie["RecentlyVisited"] != null)
    {
       cookie.Add(tmpCookie);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T07:57:13.037

通过键遍历集合更有意义。这样您就可以访问这两个键，并且可以通过调用轻松访问该值`System.Web.HttpContext.Current.Request.Cookies[cookieKey];`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-20T08:07:59.067

您可能希望按索引循环浏览您的 cookie：

```
HttpCookieCollection MyCookieColl;
HttpCookie MyCookie;

MyCookieColl = Request.Cookies;

// Capture all cookie names into a string array.
String[] arr1 = MyCookieColl.AllKeys;

// Grab individual cookie objects by cookie name.
for (int i = 0; i < arr1.Length; i++) 
{
   MyCookie = MyCookieColl[arr1[i]];
   Debug.WriteLine("Cookie: " + MyCookie.Name);
   Debug.WriteLine("Expires: " + MyCookie.Expires);
   Debug.WriteLine("Secure:" + MyCookie.Secure);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-13T08:42:21.857

由于您也可以通过它们的数字索引获取 cookie，因此实际上可以扫描多个具有相同名称的 cookie，而无需复制到 CookieCollection 或类似的东西。

这应该可以解决问题：

```
var cookieName = "yourcookie";
var matches = cookies.AllKeys
    .Select((name, i) => new {name, i})
    .Where(x => x.name == cookieName)
    .Select(x => DoSomethingWithEachMatch(cookies[x.i])); 
```

# java - 支持良好的 Java ADSI 包装库？

> ID：1021187
> 
> 赞同：0
> 
> 时间：2009-06-20T07:54:34.710
> 
> 标签：java, wrapper, jna, adsi

有谁知道适用于 Java 的 Windows ADSI 库的良好包装器？

（我试图避免在 JNA 中编写自己的 - 我想使用一些标准的东西。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-17T07:54:45.960

ADSI-java 的良好支持库的方式并不多。

如果您想要支持和您想要实现的内容 - 那么 Spring 的 Acegi 库将帮助您对 Web 应用程序进行活动目录身份验证：[http ://www.acegisecurity.org/](http://www.acegisecurity.org/)

如果您想为您的 Web 服务提供活动目录身份验证 - 请尝试以下操作： [安全 Java SOAP Web 服务 - 活动目录身份验证信任](https://stackoverflow.com/questions/325637/secure-java-soap-web-service-active-directory-authentication-trust) （同样是基于 Spring 安全性的解决方案）

纯粹包装 ADSI 库本身 - 您可以使用 JNA： [https ://github.com/twall/jna/](https://github.com/twall/jna/)

其他实现包括：

*   通过 JNI ( [http://www.isocra.com/2005/05/adsi-from-java/](http://www.isocra.com/2005/05/adsi-from-java/) ) 执行此操作，尽管尝试执行此操作而不是 JNA 会浪费您的时间
*   作为 JNA 的替代品 - 您可以尝试这个库：[http ://weblogs.java.net/blog/kohsuke/archive/2008/01/updates_on_com4.html](http://weblogs.java.net/blog/kohsuke/archive/2008/01/updates_on_com4.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-08T10:31:35.630

Kosuke 有一篇关于通过 com4j 调用 ADSI Activex/COM 组件的好文章，因此您可以查询活动目录。

[https://community.oracle.com/blogs/kohsuke/2008/01/10/active-directory-authentication-hudson](https://community.oracle.com/blogs/kohsuke/2008/01/10/active-directory-authentication-hudson)

不确定它的支持程度。

# inheritance - 限制自定义属性，使其只能应用于 C# 中的特定类型？

> ID：1021190
> 
> 赞同：13
> 
> 时间：2009-06-20T07:57:41.037
> 
> 标签：inheritance, attributes, c#-2.0

我有一个应用于类属性和类本身的自定义属性。现在，必须应用我的自定义属性的所有类都派生自一个基类。

如何限制我的自定义属性，使其只能应用于那些必须从我的基类派生的类？我该怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-20T08:28:07.717

该死，当我证明自己错了时，我讨厌它……如果您将属性定义为基类的**受保护嵌套类型，它就会起作用：**

```
abstract class MyBase {
    [AttributeUsage(AttributeTargets.Property)]
    protected sealed class SpecialAttribute : Attribute {}
}

class ShouldBeValid : MyBase {
    [Special]
    public int Foo { get; set; }
}
class ShouldBeInvalid {
    [Special] // type or namespace not found
    [MyBase.Special] // inaccessible due to protection level
    public int Bar{ get; set; }
} 
```

* * *

（原答案）

你不能这样做——至少在编译时不能。

属性可以被限制（例如）“类”、“结构”、“方法”、“字段”等——但没有更细化的了。

当然，由于属性本身不做任何事情（忽略 PostSharp），它们将对其他类型惰性（并且对您的类型惰性，除非您添加一些代码以在运行时查看属性）。

您可以编写 FxCop 规则，但这似乎有点过头了。

但是，我想知道属性是否是最佳选择：

> 现在，必须应用我的自定义属性的所有类都派生自一个基类。

如果他们**必须**应用您的自定义属性，也许`abstract`（或可能只是`virtual`）属性/方法会是更好的选择？

```
abstract class MyBase {
    protected abstract string GetSomeMagicValue {get;}
}
class MyActualType : MyBase {
    protected override string GetSomeMagicValue {get {return "Foo";}}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T09:03:17.473

我不知道有任何方法可以使用自定义属性来做到这一点。
更好的方法是让类实现具有通用约束的接口

所以

```
class MyAttribute
{
     // put whatever custom data you want in here
}

interface IAttributeService<T> where T : MyBaseClass
{
     MyAttribute Value{get;}
} 
```

那么你的基类会这样做

```
class MyBaseClass : IAttributeService<MyBaseClass>
{
     private MyAttribute m_attrib;

     IAttributeService<MyClass>.Value
     {
         get {return m_attrib;}
     }
} 
```

这样，编译器将在编译时强制执行约束，以便只有
从 MyBaseClass 派生的类才能实现接口。
我通过定义一个 MyAttribute 类使它变得相当可扩展，但是如果你需要更简单的东西，你当然可以只返回一个字符串或一个布尔值

我还将 MyAttribute 成员设为私有，以便派生类看不到它并对其进行更改，但可以使其受到保护并允许派生类访问（如果您愿意）。

# sifr - 如何使用 sIFR 生成粗体 MyriadPro 字体？

> ID：1021191
> 
> 赞同：0
> 
> 时间：2009-06-20T07:57:44.347
> 
> 标签：sifr

我想制作粗体 MyriadPro 字体。我单击了**B**（切换粗体样式）按钮并使白框中的文本变为粗体。但是 Flash 8 总是输出一个常规样式的字体文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T20:28:18.360

当你用 sIFR 替换 HTML 元素时，你仍然需要指定粗体字重：

```
sIFR.replace(font, {
  css: '.sIFR-root { font-weight: bold; }
}); 
```

但是，如果您的意思是生成的 Flash 影片不包含 Myriad Pro Bold 版本，请尝试选择该特定字体。我认为 Flash 通常会应用假粗体。

# mp3 - rm和mp3格式的区别

> ID：1021208
> 
> 赞同：2
> 
> 时间：2009-06-20T08:16:00.877
> 
> 标签：mp3

rm 文件的大小相对要小得多。他们如何比较质量？

对于一个歌曲仓库应用程序，是否建议在归档之前将所有 mp3 转换为 rm 以节省存储空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T08:40:41.123

我第二个[Lunatiks](https://stackoverflow.com/questions/1021208/difference-between-rm-and-mp3-formats/1021214#1021214)回答，但建议使用[FLAC](http://en.wikipedia.org/wiki/Free_Lossless_Audio_Codec)而不是 WAV。

FLAC 是一种无损压缩方法。引用自[http://flac.sourceforge.net/](http://flac.sourceforge.net/)：

> FLAC 代表 Free Lossless Audio Codec，一种类似于 MP3 的音频格式，但无损，这意味着音频在 FLAC 中被压缩而没有任何质量损失。这类似于 Zip 的工作方式，除了使用 FLAC，您将获得更好的压缩，因为它是专为音频设计的，并且您可以在您最喜欢的播放器（或您的汽车或家庭立体声，查看支持的设备）中播放压缩的 FLAC 文件就像你想要一个 MP3 文件一样。

您想要使用无损方法（FLAC 或 WAV）在仓库中存储的原因如下：

像 MP3 或 RM 这样的有损方法在质量方面是完全可以的。当您必须将一种无损格式转换为另一种无损格式时，就会出现问题。如果你这样做，例如 WAV -> MP3 -> RM，你最终会得到一个文件，其中包含来自 MP3 编码和 RM 编码的工件。

存储文件的正确方法是无损存储并将其转换为适合您客户的格式。

```
 OGG
          ^
          |
RM  <--  FLAC  -->  MP3
          |
          v
         WAV 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T08:20:17.327

请远离 Real Media 文件——即使是像 mplayer 这样的高级编码应用程序也对它们的支持很差。

我会坚持使用 MP3，或者至少将它们重新编码为较低的比特率。您也可以将它们重新编码为[.ogg](http://www.vorbis.com/)，这是一种开源格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T08:20:32.927

除非音频质量是次要考虑因素，否则我会说您最好以最高质量、压缩最少的格式存储所有音频；尽可能使用 16 位 44kHz WAV。这确保您可以在将来以您希望的任何格式进行编码，而不会在转码过程中丢失更多信息。

哦，还有真正的媒体？这是1999年吗？跑步，不要走路，以任何其他形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T08:59:36.390

*   对于[无损](http://en.wikipedia.org/wiki/Lossless)数据存储，请使用[FLAC](http://en.wikipedia.org/wiki/FLAC)。
*   对于[松散的](http://en.wikipedia.org/wiki/Lossy_data_compression)数据存储，请使用[OGG](http://en.wikipedia.org/wiki/Ogg_Vorbis)。

甚至不要接近 RM ......你会遇到问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T09:08:48.227

Real Media 不擅长压缩；但还有其他更好的编解码器，Real Media 存在专利和许可问题，以及文档和支持不充分的协议。

Xiph（Ogg Vorbis 背后的人）发布[了领先编解码器](http://www.xiph.org/vorbis/listen.html)（rm、mp3、wma、aac 和 ogg）之间的比较 - 您可以收听和比较每个编解码器。

If your data is already in mp3 (a lossy format) it would not be advisible to convert it, particularly to another lossy format. You won't gain anything much in storage, and you will automatically lose quality.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T08:24:41.967

我回应 Artem Rusakovskii 和 Lunatik 的回复。不要使用`rm`，而是使用`ogg`。

# c++ - 为 Windows 编写超薄 C++ 程序（如 uTorrent）

> ID：1021210
> 
> 赞同：42
> 
> 时间：2009-06-20T08:18:10.170
> 
> 标签：c++, windows

我一直很欣赏最初的 uTorrent 程序。它看起来很棒，不到 64kb，速度非常快，并且具有我需要的所有功能。不幸的是，该程序是封闭源代码的（并且一天比一天臃肿），所以我来到 Stackoverflow 寻求灵感。

**在 Windows 上编写快速、内存高效且优雅的程序时，您推荐哪些方法？**

虽然 C#（和整个 .NET 概念）是很酷的想法，但我对“纯粹”的答案以及为 Windows 平台编写高效、快速的软件的挑战更感兴趣，就像最初的 uTorrent 客户端一样。我不介意分配自己的内存、进行自己的垃圾收集和创建自己的数据结构。

欢迎对书籍、文章、图书馆、IDE（甚至是让更多咖啡因进入我的系统的有效方法）提出建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-20T08:24:30.797

Windows 模板库适合您想要做的事情。它是 Win32 API 的轻量级、基于模板的 C++ 包装器。有了它，你不必经历直接 Win32 编码的痛苦，但它不会像 MFC 那样增加很多开销。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-20T10:10:21.893

uTorrent 是用 C++ 编写的，并使用老式的 Win32 API。谷歌浏览器也是这样写的，为什么不下载源代码，学习他们的代码呢？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-20T08:25:29.907

如果您想优化尽可能小的内存占用，并且您不介意跳过 .NET CLR 为您处理的一堆麻烦，那么编写一个直接的 Win32API 应用程序并连接到[GDI+](http://en.wikipedia.org/wiki/Graphics_Device_Interface#GDI.2B)是一种方式去。[Petzold](http://www.charlespetzold.com/pw5/)是权威的参考。

但实际上，这有点像傻瓜的差事，因为无论您的应用程序是否使用 .NET 运行时都将被加载到操作系统的内存中，因此您不妨链接到它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-20T09:39:54.403

[Demo Scene](http://en.wikipedia.org/wiki/Demoscene)是一群花费空闲时间尝试制作令人印象深刻且非常小的可执行文件的人，这些可执行文件通常以 3D 形式呈现音乐。通常，整个演示（代码、音乐、3d 数据）会编译成单个可执行文件，该可执行文件被压缩到 64k 或内容的非常小的尺寸。

您可能会从演示中获得一些灵感，并了解它们是如何制作的，这将使您痴迷于创建小型可执行文件。

通常，关键是尽可能多地利用随 Windows 一起安装的第 3 方 DLL。此外，还需要对其他所有内容进行低级自定义编码。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-20T09:16:32.300

常规：对于较小的可执行文件，#define WIN32_LEAN_AND_MEAN 和 VC_EXTRALEAN（假设 VS）。不要使用调试符号进行编译（您可能知道这一点）。使用更少的库，并且只链接您需要的库的部分用户（VC 的链接器对此非常好，但如果您能提供帮助，请不要触摸 optlink）。

剥离重定位标头：转到[http://www.paehl.de/cms/oldtools](http://www.paehl.de/cms/oldtools)并搜索“ReduceEXE”（直接下载链接： http: [//www.paehl.de/reduce.zip](http://www.paehl.de/reduce.zip)）。

运行一个可执行的打包程序： http: [//upx.sourceforge.net/](http://upx.sourceforge.net/) ...它在运行时占用更多内存并且启动速度有点慢，但文件要小得多。

如果你关心文件大小而不是速度，VC 有一个“优化大小”的选项，它会关闭一些东西，比如循环展开和函数内联。

如果您想成为硬核（并且不关心所有软件工程优势），请尝试使用更少的类，而更喜欢没有虚拟功能的 POS 类型。Wikipedia 建议程序执行时间的 6-13% 用于执行虚拟调用。此外，vtables 本身占用（少量）内存，并且在每个类实例（具有虚函数）开始时为 vtable 指针分配了 size_t 值的内存。IOW，“纯 C”最终可能会稍微快一些（尽管如果您发现自己使用函数指针模拟类，请回到 C++）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-06-29T09:52:36.027

旧的[“LIBCTiny”](http://msdn.microsoft.com/en-us/magazine/cc301696.aspx)技巧仍然有效。对于现代 VC++ 版本，您可能需要关闭一些功能。

另一个要知道的好技巧是`lstr*`Kernel32 中的函数集合。这已经在内存中了，所以这些函数可能是一个更精简的选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T10:23:50.103

[Notepad++](http://notepad-plus.sourceforge.net/) 也是一个非常快速、高度优化且非常有用的操作系统程序，可以激发您的灵感。它的理念类似于 uTorrent。它使用良好的旧 Win32 api，它仍然应该是 Windows 上最快的。

如果你想要真正的艺术，演示场景是一个完美的去处。尽管他们的代码并不总是开放的。

# ruby-on-rails - Twitter 搜索 API 仅在 Ruby 中被 Amazon EC2 阻止，而不是 curl……这是 Net::HTTP 吗？

> ID：1021212
> 
> 赞同：1
> 
> 时间：2009-06-20T08:19:57.373
> 
> 标签：ruby-on-rails, twitter, amazon-ec2

这是一个奇怪的，任何人都可以在家复制（我认为） - 我正在尝试编写一个简单的服务来在 EC2 上托管的服务上在 Twitter 上运行搜索。Twitter 在 ruby​​ 中运行时 100% 会返回错误，但在其他语言中则不会，这表明这不是 IP 阻塞问题。这是一个例子：

```
admin@ec2-xx-101-152-xxx-production:~$ irb
irb(main):001:0> require 'net/http'
=> true
irb(main):002:0> res = Net::HTTP.post_form(URI.parse('http://search.twitter.com/search.json'), {'q' => 'twitter'})
=> #<Net::HTTPBadRequest 400 Bad Request readbody=true>
irb(main):003:0> exit
admin@ec2-xx-101-152-xxx-production:~$ curl http://search.twitter.com/search.json?q=twitter
{"results":[{"text":"&quot;Social Media and SE(Search Engine) come side by side to help promote your business and bran...<snip/> 
```

如您所见，CURL 有效，而 irb 无效。当我在 irb 的本地 Windows 框中运行时，成功：

```
$ irb
irb(main):001:0> require 'net/http'
=> true
irb(main):002:0> res = Net::HTTP.post_form(URI.parse('http://search.twitter.com/search.json'), {'q' => 'twitter'})
=> #<Net::HTTPOK 200 OK readbody=true> 
```

这令人困惑……如果 Net::HTTP 中存在某种核心错误，我认为它会同时出现在 windows 和 linux 上，并且如果我被我的 IP 阻止，那么 curl 也不应该工作. 我也在一个新的亚马逊实例上用一个新的 IP 地址尝试了这个。

任何人都应该能够重现这个，因为我正在使用 ec2onrails ami：

```
ec2-run-instances ami-5394733a -k testkeypair 
```

之后只需 ssh 并运行上面的那些简单行。有人知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-05T07:05:28.613

检查 Twitter API 更改日志。他们正在阻止来自 EC2 的请求，这些请求在 HTTP 请求中没有 User-Agent 标头，因为人们正在使用 EC2 查找垃圾邮件术语。

Twitter 建议将 User-Agent 设置为您的域名，这样他们就可以检查导致问题的网站并与您取得联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T12:23:30.767

当单个客户端超过每小时最大请求数时，twitter 会返回 HTTP 400 错误消息。我不知道您的 ec2 实例是如何配置的，因此我不知道您的请求是由共享 Amazon IP 还是自定义 IP 标识的。在第一种情况下，认为在很短的时间内达到限制是合理的。

Twitter API 文档中提供了更多详细信息：

*   [错误代码](http://apiwiki.twitter.com/HTTP-Response-Codes-and-Errors)
*   [限速](http://apiwiki.twitter.com/Rate-limiting)

要了解有关错误响应原因的更多详细信息，请阅读您的响应内容或标题。您应该会找到一条错误消息和一些 X-RateLimit twitter 标头。

```
require 'net/http'
response = Net::HTTP.post_form(URI.parse('http://search.twitter.com/search.json'), {'q' => 'twitter'})

p response.headers
p response.body 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-20T15:20:38.560

谢谢（你的）信息。将我的域放在 USER-AGENT 标头中为我解决了同样的问题。我在 EC2 服务器上运行[http://LocalChirps.com 。](http://LocalChirps.com)

CURL 代码片段 (PHP):

```
 $twitter_api_url = 'http://search.twitter.com/search.atom?rpp='.$count.'&page='.$page;
$ch = curl_init($twitter_api_url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, 'LocalChirps.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$twitter_data = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);
if ($httpcode != 200) {
    //echo 'error calling twitter';
    return;
} 
```

# ruby - Ruby gem LoadError - ruby gems/defaults/operating_system

> ID：1021216
> 
> 赞同：7
> 
> 时间：2009-06-20T08:22:17.603
> 
> 标签：ruby, operating-system, gem

我已经在我的 winxp sp3 机器上安装了 ruby​​ 1.8.6 p368 和 gems 1.3.4 以及 zlib、ssl 或 readline 等所需的库。问题是，当我现在尝试使用一些 gem 时，我收到以下错误：

```
Exception `LoadError' at D:/ruby/lib/ruby/site_ruby/1.8/rubygems.rb:1112 - no su
ch file to load -- rubygems/defaults/operating_system
Exception `LoadError' at D:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.
rb:31 - no such file to load -- mysql 
```

似乎从修复丢失的“rubygems/defaults/operating_system”文件开始是有意义的。我怎样才能做到这一点？TIA

PS：宝石环境是

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.4
  - RUBY VERSION: 1.8.6 (2009-03-31 patchlevel 368) [i386-mswin32]
  - INSTALLATION DIRECTORY: D:/ruby/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: D:/ruby/bin/ruby.exe
  - EXECUTABLE DIRECTORY: D:/ruby/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mswin32-60
  - GEM PATHS:
 - D:/ruby/lib/ruby/gems/1.8
 - C:/Documents and Settings/fluffy/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://gems.rubyforge.org/ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-12-05T05:34:57.147

你在跑步`-d`吗？如果是这样，[这封电子邮件](http://osdir.com/ml/ruby-talk/2009-11/msg01916.html)认为即使在获救时也会显示异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T08:39:05.790

看起来你也需要 mysql gem。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T09:15:43.580

以下错误

```
Exception 'LoadError' at D:/ruby/lib/ruby/site_ruby/1.8/rubygems.rb:1112 - no such file to load -- rubygems/defaults/operating_system 
```

可以与任何一个有关

1.  安装损坏（检查**ruby​​gems.rb**文件并确保它需要“rubygems/defaults/operating_system”。如果需要，请检查它是否存在）或
2.  您正在尝试在服务器仍配置为使用 Rails 2.1.x 时运行 2.3.x 应用程序

我希望这有帮助。如果没有，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-04T16:32:01.437

你试过 InstantRails 吗？它在一个不错的包中包含 rails/apache/mysql，并且在我尝试过的每个 XP 机器上都可以开箱即用。

我还将 NetBeans 安装为开发环境，并将其指向 InstantRails“bin/ruby”二进制文件。

# saml - 有人使用带有 SAML 身份验证的 Spring-ws 吗？

> ID：1021218
> 
> 赞同：5
> 
> 时间：2009-06-20T08:23:41.983
> 
> 标签：saml, spring-ws

我们正在考虑将 spring-ws 作为实现将部署在 weblogic 上的 web 服务的平台。我们需要将 WS-Security 与我们的身份管理平台 (TFIM) 发布的 SAML 令牌一起使用。

XwsSecurityInterceptor 的 Spring-ws 文档没有提到 SAML，我不清楚是否可以在这种情况下工作。

我想替代方案可能是做我们自己的拦截器，它使用 OpenSAML 或以某种方式利用 weblogic 中的 SAML 支持。

这个事情谁有经验？以已知可行的解决方案为目标会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T08:31:31.813

Apache WSS4J 确实支持 SAML 令牌，并且 Spring-WS 带有 Wss4jSecurityInterceptor，所以我猜你可以让它开箱即用。

# c# - 有没有办法使用 c# 代码按下或启动键盘中的键？

> ID：1021227
> 
> 赞同：0
> 
> 时间：2009-06-20T08:26:17.593
> 
> 标签：c#

我希望通过代码按下“Alt”。这就像通过代码使用“Alt”键触发按键事件，而不是手动点击它。需要的是，我已经为菜单设置了“快捷键”，但除非用户按下“alt”，否则它（键字母上的单个下划线）对用户不可见。所以我需要默认按下Alt。

有没有办法使用 c# 代码“按下”或“启动”键盘中的键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T08:30:40.207

查看[System.Windows.Forms.SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)类。

您可以使用静态`Send`方法将击键发送到活动窗口。如果您尝试将击键发送到另一个窗口，则需要先使用 Windows API 激活另一个窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T13:15:58.243

如果您对部署程序的操作系统有任何控制权，显然您可以通过转到控制面板->显示->外观->效果->隐藏带下划线的键盘字母来强制始终显示带下划线的快捷方式字母导航。

( [http://www.chinhdo.com/20080902/underlined-letters-windows/](http://www.chinhdo.com/20080902/underlined-letters-windows/) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T08:34:04.723

[这是关于在codeproject](http://www.codeproject.com/KB/cs/SendKeys.aspx)上使用 SendKeys 的完整文章

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T08:34:52.350

这是模拟输入（鼠标和键盘）的方式。 [http://msdn.microsoft.com/en-us/library/ms171548.aspx](http://msdn.microsoft.com/en-us/library/ms171548.aspx)

如果您查看 System.Windows.Forms.SendKeys 类，您会发现它为您提供了您想要的。 [http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)

# nhibernate - 缓存使用 NHibernate 加载的数据

> ID：1021230
> 
> 赞同：1
> 
> 时间：2009-06-20T08:30:52.563
> 
> 标签：nhibernate, caching

在我的应用程序中，我想缓存使用 NHibernate 加载的数据。我不想使用 NHibernate 的二级缓存，因为这个缓存并不是真的要缓存整个对象图。但是，确保我的图表中没有任何延迟加载代理和/或集合的最佳策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T08:42:59.887

NHibernate.NHibernateUtil.Initialize(object proxy)
"强制初始化代理或持久集合。"

# css - 如何让 IE6 尊重 class 属性？

> ID：1021237
> 
> 赞同：1
> 
> 时间：2009-06-20T08:34:28.733
> 
> 标签：css, internet-explorer, class, internet-explorer-6

长期读者，第一次发帖问：

经过数周的谷歌和论坛拖网，我仍然不知所措。我有一系列嵌套的 div，有些带有 id，有些带有类，有些带有 id 和类。

它是 XHTML 严格的，并且经过验证。原始代码[http://www.drewsonne.com/melonstack/?topic=brisbane](http://www.drewsonne.com/melonstack/?topic=brisbane)

例如。

```
<div id="main">
  <div class="rEntry" id="r1">
    <a href="http://www.brisbane.com">City of Brisbane</a><br>
    <span id="rSum1" class="rSum">This is a website summary</span>
  </div>
  <div class="rEntry" id="r2">
    <a href="http://www.brisbane.gov.au">City of Brisbane</a><br>
    <span id="rSum2" class="rSum">This is a website summary as well</span>
  </div>
    ... et cetera ...
</div> 
```

出于测试目的，我的 CSS 目前看起来像这样

```
.rEntry{
    padding:10px;
    margin:10px;
} 
```

对于我的生活，我根本无法在 IE6 中使用这种风格。如果我更改为#r1、#r2 或 div，样式将应用于适当的元素，但 div.rEntry 和 .rEntry 都不会使样式保持不变。有谁知道我哪里出错了？

DJ。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T08:59:49.680

我有三点建议：

1.  使用[重置 CSS](http://meyerweb.com/eric/tools/css/reset/)（周围有几个）；
2.  [使用 DOCTYPE 声明](http://hsivonen.iki.fi/doctype/)（如果您还没有的话）强制 IE 进入标准兼容模式（以及，与 IE 一样兼容标准）而不是 quirks 模式。我通常为此使用 HTML 4.01 过渡，但如果您遵守严格，那就更好了；
3.  使用元素名称限定您的样式。

例如：

```
div.rEntry {
    padding:10px;
    margin:10px;
} 
```

样式越具体，它在 CSS 中确定应用哪个样式的重要性就越大。您可以通过以下方式对其进行测试来查看是否是问题所在`!important`：

```
div.rEntry{
    padding:10px !important;
    margin:10px !important;
} 
```

如果这样可以解决问题，那么您将获得其他优先的 CSS。我怀疑这是问题，因为`#id`选择器的优先级高于`.class`选择器，这就是您所看到的行为。

**注意：**我不建议将`!important`其用作一般规则，只是为了查找 CSS 优先级的问题。一旦确定，通常最好以“正确”的方式修复它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T10:15:36.330

现在，查看您提供的链接中的 HTML，我没有看到任何带有 rEntry 类的 div。然后我意识到，它们是动态生成的。这提醒了我对于 IE6，当通过 DOM 添加 CSS 类时，你必须使用 className 属性，而不是 class。换句话说，IE6 DOM 根本看不到 div 属于 rEntry 类。

这些 div 是如何生成的？如果是通过您自己的代码，您可能想尝试修改元素的 class 和 className 属性。

**编辑**：看起来它在脚本/REsultsList.js 中。尝试更改显示以下内容的行：

```
entry_div_element.setAttribute('class', 'rEntry'); 
```

到：

```
entry_div_element.setAttribute('class', 'rEntry');
entry_div_element.className = 'rEntry'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T09:54:08.243

我刚刚转到“原始代码”链接，您的 CSS 内容如下：

```
div.rEntry{
    margin:10px !important;
}   padding:10px !important; 
```

看起来您的填充样式在括号之外。你确定这不仅仅是因为一个错字吗？

# c# - 未创建控制台应用程序的设置文件

> ID：1021241
> 
> 赞同：2
> 
> 时间：2009-06-20T08:38:51.657
> 
> 标签：c#, .net, settings, config

我有一个包含 3 个项目的解决方案。一个是控制台应用程序，另外两个是 Windows 应用程序。两个 Windows 应用程序都使用控制台应用程序，因此我在两个 Windows 应用程序项目中添加了控制台应用程序的引用。现在，当我构建 Windows 项目时，控制台应用程序被复制到输出目录中，但问题是它的配置文件“consoleapp.exe.config”没有被复制！

如果我使用库（程序集）而不是控制台应用程序，它将在输出文件夹中创建该程序集的配置文件。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T08:44:06.763

尝试这个：

1.  在解决方案树中选择 consoleapp.exe.config。

2.  在属性网格中为“**构建操作”**选项选择“**内容**” 。

***   为**复制到输出目录**选项选择**始终**复制。** 

 ****希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T09:27:03.823

在VS2008中快速创建一个控制台项目并添加一个“ `App.config`”，它有设置：

构建操作：无
复制到输出目录：不复制
自定义工具：<*空白*>
自定义工具命名空间：<*空白*>

但是我不确定添加对控制台项目的引用会有什么影响，因为控制台项目是一个应用程序而不是类库。

如果您希望控制台应用程序与 Windows 应用程序一起启动以进行调试，那么比项目引用更好的方法是将解决方案设置为启动多个应用程序。右键单击解决方案，选择属性，然后在 Start Project 节点上选择多个项目。（并删除对控制台应用程序的引用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-18T22:05:03.870

您的应用程序使用引用项目的编译代码中的默认值进行设置。

您应该将您的 app.config 从其他项目（或至少复制您希望能够更改的设置）复制到调用项目，然后当应用程序编译时，您将拥有一个 [YourAppName].exe.config你可以修改。

这一切都是因为 C# 中的应用程序域只能有一个程序集级 app.config 文件。这是有关[MSDN](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.configurationfile.aspx)的更多信息。****

# c# - 文件上传问题

> ID：1021243
> 
> 赞同：6
> 
> 时间：2009-06-20T08:40:01.187
> 
> 标签：c#, asp.net, iis, upload

我将需要客户端（最终用户）通过浏览器上传大文件（例如类似于 Youtube 上传大视频文件的场景），文件大小应不大于 500M 字节。

我使用 ASP.Net + C# + VSTS + IIS 7.0 作为我的开发平台。关于如何处理大文件上传问题的任何想法或良好做法？任何参考样品或文件表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T12:36:54.750

```
 <system.web>
        <httpRuntime executionTimeout="300" maxRequestLength="512000" />
    </system.web> 
```

这在 IIS7 中不起作用！httpRuntime 适用于 IIS6 及以下版本。在 IIS7 中允许大文件上传的正确方法是：

1) 将以下行添加到 web.config 文件中：

[Web.config] IIS7 的 maxAllowedContentLength 属性

```
<system.webServer>
   <security >
      <requestFiltering>
          <requestLimits maxAllowedContentLength="1024000000" />
      </requestFiltering>
   </security>
</system.webServer> 
```

2）然后打开文件 C:\Windows\System32\inetsrv\config\applicationHost.config 并找到该行：

```
<section name="requestFiltering" overrideModeDefault="Allow" /> 
```

overrideModeDefault 应该是允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T08:50:44.020

[此相关问题](https://stackoverflow.com/questions/285120/upload-large-files-in-net)的答案建议使用[SWFUpload](http://swfupload.org/)或 [NeatUpload](http://www.brettle.com/neatupload)通过浏览器上传大文件。NeatUpload 是一个很适合您的环境的 ASP.NET 组件。

还有[JUpload](http://jupload.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T08:51:13.707

您需要在 web.config 文件中设置**maxRequestLength**以适当处理大文件并设置**executionTimeout**以便 IIS 不会放弃请求

```
<system.web>
     <httpRuntime executionTimeout="300" maxRequestLength="512000" />
</system.web> 
```

Jon Gallowy 关于上传大文件的文章中[有](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)更多详细信息。

这是[MSDN](http://www.google.com.sg/url?sa=t&source=web&ct=res&cd=5&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Faa479405.aspx&ei=76E8SqjRMJCTkAXVzZmmDg&usg=AFQjCNFHf9AiItNsVdbVwKlC5Lh7UWflUQ&sig2=blTvkdSDiTkUBU5VSoU7dg)上关于在 asp.net 2.0 中上传文件的文章

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T08:52:38.570

几乎所有处理超大型上传的网站都默认使用 Adob​​e Flash。通常他们会退回到简单的浏览器上传，但管理当前上传进度的事情在 Flash 中要容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-30T18:09:03.157

我遇到了这个问题，并在这里找到了基于[Jonathan 的代码](https://forums.asp.net/t/1742612.aspx?How+to+upload+a+big+file+in+Mvc+)的解决方案。他的代码有一些问题，但这是我的解决方案。如果你想上传一个大文件，比如 1GB 的文件，你必须把文件夹起来并通过几个请求发送（一个请求会超时）。首先，您设置客户端和服务器端的最大限制。

```
<system.webServer>
 <security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="2147483647" />
  </requestFiltering>
 </security>
<system.webServer> 
```

和

```
<system.web>
  <httpRuntime targetFramework="4.5" maxRequestLength="2147483647" />
</system.web> 
```

然后分块文件，并发送每个卡盘，等待响应并发送下一个块。这是javascript和控制器代码。

```
 <div id="VideoDiv">
        <label>Filename:</label>
        <input type="file" id="fileInput" /><br/><br/>
        <input type="button" id="btnUpload" value="Upload a presentation"/><br/><br/>
        <div id="progressbar_container" style="width: 100%; height: 30px; position: relative; background-color: grey; display: none">
            <div id="progressbar" style="width: 0%; height: 100%; position: absolute; background-color: green"></div>
            <span id="progressbar_label" style="position: absolute; left: 35%; top: 20%">Uploading...</span>
        </div>
    </div> 
```

用于卡盘、调用控制器和更新进度条的 Javascript 代码：

```
 var progressBarStart = function() {
            $("#progressbar_container").show();
        }

        var progressBarUpdate = function (percentage) {
            $('#progressbar_label').html(percentage + "%");
            $("#progressbar").width(percentage + "%");
        }

        var progressBarComplete = function() {
            $("#progressbar_container").fadeOut(500);
        }

        var file;

        $('#fileInput').change(function(e) {
            file = e.target.files[0];
        });

        var uploadCompleted = function() {
            var formData = new FormData();
            formData.append('fileName', file.name);
            formData.append('completed', true);

            var xhr2 = new XMLHttpRequest();
            xhr2.onload = function() {
                progressBarUpdate(100);
                progressBarComplete();
            }
            xhr2.open("POST", "/Upload/UploadComplete?fileName=" + file.name + "&complete=" + 1, true);
            xhr2.send(formData);
        }

        var multiUpload = function(count, counter, blob, completed, start, end, bytesPerChunk) {
            counter = counter + 1;
            if (counter <= count) {
                var chunk = blob.slice(start, end);
                var xhr = new XMLHttpRequest();
                xhr.onload = function() {
                    start = end;
                    end = start + bytesPerChunk;
                    if (count == counter) {
                        uploadCompleted();
                    } else {
                        var percentage = (counter / count) * 100;
                        progressBarUpdate(percentage);
                        multiUpload(count, counter, blob, completed, start, end, bytesPerChunk);
                    }
                }
                xhr.open("POST", "/Upload/MultiUpload?id=" + counter.toString() + "&fileName=" + file.name, true);
                xhr.send(chunk);
            }
        }

        $("#VideoDiv").on("click", "#btnUpload", function() {
            var blob = file;
            var bytesPerChunk = 3757000;
            var size = blob.size;

            var start = 0;
            var end = bytesPerChunk;
            var completed = 0;
            var count = size % bytesPerChunk == 0 ? size / bytesPerChunk : Math.floor(size / bytesPerChunk) + 1;
            var counter = 0;
            progressBarStart();
            multiUpload(count, counter, blob, completed, start, end, bytesPerChunk);
        }); 
```

这是将 chucnk 存储在（“App_Data/Videos/Temp”）中的上传控制器，然后将它们合并并存储在（“App_Data/Videos”）中：

```
public class UploadController : Controller
{
    private string videoAddress = "~/App_Data/Videos";

    [HttpPost]
    public string MultiUpload(string id, string fileName)
    {
        var chunkNumber = id;
        var chunks = Request.InputStream;
        string path = Server.MapPath(videoAddress+"/Temp");
        string newpath = Path.Combine(path, fileName+chunkNumber);
        using (FileStream fs = System.IO.File.Create(newpath))
        {
            byte[] bytes = new byte[3757000];
            int bytesRead;
            while ((bytesRead=Request.InputStream.Read(bytes,0,bytes.Length))>0)
            {
                fs.Write(bytes,0,bytesRead);
            }
        }
        return "done";
    }

    [HttpPost]
    public string UploadComplete(string fileName, string complete)
    {
        string tempPath = Server.MapPath(videoAddress + "/Temp");
        string videoPath = Server.MapPath(videoAddress);
        string newPath = Path.Combine(tempPath, fileName);
        if (complete=="1")
        {
            string[] filePaths = Directory.GetFiles(tempPath).Where(p=>p.Contains(fileName)).OrderBy(p => Int32.Parse(p.Replace(fileName, "$").Split('$')[1])).ToArray();
            foreach (string filePath in filePaths)
            {
                MergeFiles(newPath, filePath);
            }
        }
        System.IO.File.Move(Path.Combine(tempPath, fileName),Path.Combine(videoPath,fileName));
        return "success";
    }

    private static void MergeFiles(string file1, string file2)
    {
        FileStream fs1 = null;
        FileStream fs2 = null;
        try
        {
            fs1 = System.IO.File.Open(file1, FileMode.Append);
            fs2 = System.IO.File.Open(file2, FileMode.Open);
            byte[] fs2Content = new byte[fs2.Length];
            fs2.Read(fs2Content, 0, (int) fs2.Length);
            fs1.Write(fs2Content, 0, (int) fs2.Length);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message + " : " + ex.StackTrace);
        }
        finally
        {
            if (fs1 != null) fs1.Close();
            if (fs2 != null) fs2.Close();
            System.IO.File.Delete(file2);
        }
    }
} 
```

但是，如果两个用户同时上传同名的文件，就会出现一些问题，你必须处理这个问题。通过阅读responseText，您可以捕捉到一些错误和异常并对其进行修整。

# blackberry - 黑莓中有任何 API 可以拨打电话和发送数据吗？

> ID：1021253
> 
> 赞同：1
> 
> 时间：2009-06-20T08:46:45.713
> 
> 标签：blackberry, gsm

黑莓中的任何 API 都可以进行调用和发送数据。我想拨打一个号码并使用 GSM 数据（不是 GPRS）发送一些数据。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-17T00:28:29.210

您可以使用 StreamConnection

```
String url = "socket://" + host + ":" + port
                                        + (checked ? "":";deviceside=true");
StreamConnection connection =  (StreamConnection) Connector.open(url,
                                        Connector.READ_WRITE, true); 
```

deviceside=false 表示黑莓将通过您的 MDS 中的代理连接到 Internet

deviceside=true 打开直接 TCP 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T06:26:23.780

您可以通过 SMS 发送和接收数据：

[BlackBerry KB - 什么是 - 发送 SMS 消息的不同方式](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_is_-_Different_ways_to_send_SMS_messages.html?nodeid=1588663&vernum=0)
[BlackBerry KB - 什么是 - 收听 SMS 消息的不同方式](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Different_ways_to_listen_for_SMS_messages.html?nodeid=1357551&vernum=0)
[BlackBerry KB - 操作方法 - 使用 SMS 通知应用程序](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/How_To_-_Use_SMS_to_notify_an_application.html?nodeid=1266974&vernum=0)

如果需要，您可以自动挂断电话并发送短信：
[BlackBerry KB - 操作方法 - 实现 PhoneListener 接口](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800536/How_To_-_Implement_the_PhoneListener_interface.html?nodeid=817212&vernum=0)

# iphone - 苹果手机开发

> ID：1021268
> 
> 赞同：1
> 
> 时间：2009-06-20T09:00:18.430
> 
> 标签：iphone

在 iPhone 不可用的情况下，您将如何测试 iPhone 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T09:02:13.123

[SDK](http://developer.apple.com/iPhone/program/download.html)附带一个模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T06:24:20.273

当然模拟器并不能真正提供真正的反馈，如果你没有真正的 iPhone 或 iPod，最好在真正的 iPhone 或 iPod 上进行大部分测试，你可以使用一些 beta 测试程序并在那里发布你的应用程序，使用临时配置并根据请求添加 UDID。你可以试试“机械​​土耳其人”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T09:58:55.157

可以使用模拟器（在一定程度上）测试 iPhone 应用程序，它包含在 iOS SDK 中。iPhone 应用程序只有在您拥有可用的源代码时才能在模拟器上运行，但不能直接在模拟器上运行 iPhone 构建（IPAfiles）。

模拟器在测试目的方面有以下限制 1\. 加速度计，2\. 电话，3\. GPS，4\. 最多只能模拟两个手势， 5\. 硬件和内存，因为模拟器使用 MAC 硬件和内存等。因此，理想情况下，在真实设备上进行测试比使用模拟器更可靠。

# sql - 是否可以使用从另一个索引视图中选择的 SQL Server 2008 创建索引视图？

> ID：1021270
> 
> 赞同：1
> 
> 时间：2009-06-20T09:01:55.293
> 
> 标签：sql, sql-server, sql-server-2005, sql-server-2008, indexed-view

是否可以使用从另一个索引视图中选择的 SQL Server 2008 创建索引视图？

```
create view V1 as (select 1 as abc)
create view V2 as (select abc from V1 group by abc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-20T15:06:26.803

以下是索引视图的[要求](http://msdn.microsoft.com/en-us/library/ms188783.aspx)（它们很丰富）：

*   视图必须仅引用同一数据库中的基表，不能引用其他视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T09:22:22.177

我认为答案是“不，这是不可能的”。

来自 Microsoft TechNet 站点，在一篇关于性能的文章中：

**问**。我在另一个视图之上定义了一个视图。SQL Server 不允许我索引顶级视图。我能做些什么？

**一个**。考虑手动将嵌套视图的定义扩展为顶级视图，然后对其进行索引，索引最内层视图，或者不索引视图。

祝你好运。

# c# - LINQ to SQL - 使用抽象基类时的映射异常

> ID：1021274
> 
> 赞同：21
> 
> 时间：2009-06-20T09:03:30.080
> 
> 标签：c#, linq-to-sql, abstract-class

问题：我想在多个程序集之间共享代码。此共享代码需要与 LINQ to SQL 映射的类一起使用。

我在[这里](https://stackoverflow.com/questions/156113/linqtosql-and-abstract-base-classes)遇到了同样的问题，但我也找到了一个我觉得麻烦的解决方法（我不会说“错误”）。

**以下所有代码都可以在[此解决方案](http://www.filehosting.org/file/details/40226/TestLinq2Sql.zip)中下载。**

鉴于此表：

```
create table Users
(
      Id int identity(1,1) not null constraint PK_Users primary key
    , Name nvarchar(40) not null
    , Email nvarchar(100) not null
) 
```

和这个 DBML 映射：

```
<Table Name="dbo.Users" Member="Users">
  <Type Name="User">
    <Column Name="Id" Modifier="Override" Type="System.Int32" DbType="Int NOT NULL IDENTITY" IsPrimaryKey="true" IsDbGenerated="true" CanBeNull="false" />
    <Column Name="Name" Modifier="Override" Type="System.String" DbType="NVarChar(40) NOT NULL" CanBeNull="false" />
    <Column Name="Email" Modifier="Override" Type="System.String" DbType="NVarChar(100) NOT NULL" CanBeNull="false" />
  </Type>
</Table> 
```

我在一个“共享”程序集中创建了以下基类：

```
namespace TestLinq2Sql.Shared
{
    public abstract class UserBase
    {
        public abstract int Id { get; set; }
        public abstract string Name { get; set; }
        public abstract string Email { get; set; }
    }

    public abstract class UserBase<TUser> : UserBase where TUser : UserBase
    {
        public static TUser FindByName_Broken(DataContext db, string name)
        {
            return db.GetTable<TUser>().FirstOrDefault(u => u.Name == name);
        }

        public static TUser FindByName_Works(DataContext db, string name)
        {
            return db.GetTable<TUser>().FirstOrDefault(u => u.Name == name && 1 == 1);
        }

        public static TUser FindByNameEmail_Works(DataContext db, string name, string email)
        {
            return db.GetTable<TUser>().FirstOrDefault(u => u.Name == name || u.Email == email);
        }
    }
} 
```

这些类在另一个程序集“Main”中引用，如下所示：

```
namespace TestLinq2Sql
{
    partial class User : TestLinq2Sql.Shared.UserBase<User>
    {

    }
} 
```

DBML 文件也位于“Main”程序集中。

调用时`User.FindByName_Broken(db, "test")`，抛出异常：

> System.InvalidOperationException：类成员 UserBase.Name 未映射。

但是，其他两个基本静态方法有效。

此外，调用生成的 SQL`User.FindByName_Works(db, "test")`正是我们在中断调用中所希望的：

```
SELECT TOP (1) [t0].[Id], [t0].[Name], [t0].[Email]
FROM [dbo].[Users] AS [t0]
WHERE [t0].[Name] = @p0
-- @p0: Input NVarChar (Size = 4; Prec = 0; Scale = 0) [test] 
```

虽然我愿意将此`1 == 1`“hack”用于单个谓词查询，但是否有更好的方法在基本/共享/核心程序集中共享 LINQ to SQL 感知代码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-07-01T10:58:19.603

我过去曾多次遇到过这个问题，因为我们在我们公司使用的框架中有类似的架构。您可能已经注意到，如果您使用声明式风格的 LINQ 查询，您将不会遇到这个问题。例如，以下代码将起作用：

```
return (from i in db.GetTable<TUser>() where i.Name = "Something").FirstOrDefault(); 
```

但是，由于我们使用的是动态过滤器表达式，我们不能使用这种方法。另一种解决方案是使用这样的东西：

```
return db.GetTable<TUser>().Select(i => i).Where(i => i.Name == "Something").SingleOrDefault(); 
```

这个解决方案解决了我们的问题，因为我们可以在几乎所有表达式的开头注入“.Select(i => i)”。这将导致 Linq 引擎不查看映射的基类，并强制它查看实际的实体类并找到映射。

希望能帮助到你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-18T21:42:57.080

尝试在 Where 子句之前包含 OfType

`return _dbContext.GetTable<T>().OfType<T>().Where(expression).ToList();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-29T05:14:15.710

我很幸运在共享程序集中定义数据类并在许多程序集中使用它们，而不是将许多程序集的数据类映射到共享合同。使用您的示例命名空间，将自定义 DataContext 和您的共享数据类放在 TestLinq2Sql.Shared 中：

```
namespace TestLinq2Sql.Shared
{
    public class SharedContext : DataContext
    {
        public Table<User> Users;
        public SharedContext (string connectionString) : base(connectionString) { }
    }

    [Table(Name = "Users")]
    public class User
    {
        [Column(DbType = "Int NOT NULL IDENTITY", IsPrimaryKey=true, CanBeNull = false)]
        public int Id { get; set; }

        [Column(DbType = "nvarchar(40)", CanBeNull = false)]
        public string Name { get; set; }

        [Column(DbType = "nvarchar(100)", CanBeNull = false)]
        public string Email { get; set; }
    }
} 
```

然后使用来自任何其他程序集的 DataContext：

```
using (TestLinq2Sql.Shared.SharedContext shared = 
    new TestLinq2Sql.Shared.SharedContext(
        ConfigurationManager.ConnectionStrings["myConnString"].ConnectionString))
{
    var user = shared.Users.FirstOrDefault(u => u.Name == "test");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-07-23T02:50:23.993

这看起来像一个错误 - 我们将主键上的特殊情况 Single 进行本地查找，但看起来此代码路径没有正确获取元数据。

1=1 hack 将意味着它通过正常的数据库往返，但实际上应该提交一个错误......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-24T10:59:24.853

你在这里问了几个问题 Jarrod，你能更具体一点吗？也就是说，您是否只想知道您的方法失败的原因？或者，也许您想要一种在不同项目中使用数据对象的方法？我假设您没有尝试将 LINQ to SQL 用作数据库映射层，而是将其用作域模型？在这种情况下，两个应用程序是否实现相同的域（业务流程、验证等）？

# php - 如何使用变量访问多维数组中的某些元素？

> ID：1021281
> 
> 赞同：1
> 
> 时间：2009-06-20T09:11:03.980
> 
> 标签：php, path, variables, multidimensional-array

我在 PHP 中使用数组来修改 xml 数据并将其写回。这是 xml 结构（为演示目的而简化）：

```
<docs>
  <folder>
    <name>Folder name</name>
    <date>20.06.2009</date>
    <folder>
      <name>Subfolder1</name>
      <date></date>
    </folder>
    <folder>
      <name>Subfolder1</name>
      <date></date>
    </folder>
    <file>
      <name></name>
    </file>
  </folder>
  <name></name>
  <date></date>
</docs> 
```

使用[此代码](http://mysrc.blogspot.com/2007/02/php-xml-to-array-and-backwards.html)，然后将其解析并转换为多维数组：

```
Array
(
    [docs] => Array
        (
            [_c] => Array
                (
                    [folder] => Array
                        (
                            [_c] => Array
                                (
                                    [name] => Array
                                        (
                                            [_v] => Folder name
                                        )

                                    [date] => Array
                                        (
                                            [_v] => 20.06.2009
                                        )

                                    [folder] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [_c] => Array
                                                        (
                                                            [name] => Array
                                                                (
                                                                    [_v] => Subfolder1
                                                                )

                                                            [date] => Array
                                                                (
                                                                    [_v] => 
                                                                )

                                                        )

                                                )

                                            [1] => Array
                                                (
                                                    [_c] => Array
                                                        (
                                                            [name] => Array
                                                                (
                                                                    [_v] => Subfolder1
                                                                )

                                                            [date] => Array
                                                                (
                                                                    [_v] => 
                                                                )

                                                        )

                                                )

                                        )

                                    [file] => Array
                                        (
                                            [_c] => Array
                                                (
                                                    [name] => Array
                                                        (
                                                            [_v] => 
                                                        )

                                                )

                                        )

                                )

                        )

                    [name] => Array
                        (
                            [_v] => 
                        )

                    [date] => Array
                        (
                            [_v] => 
                        )

                )

        )

) 
```

很长，我知道。但现在到了实际问题。在这种情况下，如果我想将另一个文件添加到名为**Subfolder2**的子文件夹中，那么当您看到结构时手动执行它不是问题：

```
array_push($array['docs']['_c']['folder']['_c']['folder'][1], $newfile); 
```

现在，当我想通过只知道文件夹路径的函数（如**docs/Folder name/Subfolder2**）来执行此操作时，算法必须分析数组结构（检查每个 [文件夹] 的名称，检查是否有一个或多个文件夹 ['_c'] 或 [number]) - 都很好，但我找不到一种方法来创建一个变量，该变量将具有该新文件的“*数组*”路径。

我在沿着这些思路思考：

```
$writepath = "['docs']['_c']['folder']...[1]"; // path string
array_push($array{$writepath}, $newfile); 
```

当然，这不是一个有效的语法。

那么，如何创建一个包含通过数组元素的路径的变量？我对 w3c 和 php.net 做了一些研究，发现没有关于多维数组的有用信息......

如果有人对结构、xml 转换/操作等有任何其他建议，我知道这远远不够数据处理的方式。

感谢您的任何意见，

埃里克

* * *

编辑：关于参考，是否可以参考参考？因为那将是通过一组数组移动“指针”的方式？像这样的东西：

```
$pointer = &$array['docs'];
if (key($pointer) == '_c') { $pointer = &$pointer['_c']; }
else (
  // create an array with '_c' key instead of empty '_v' array
) 
```

~~此语法不起作用。~~

编辑：语法有效，没关系...感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-20T09:30:34.500

尽管这不*完全*是您问题的答案：您*可以*使用[SimpleXML](http://php.net/simplexml)及其 XPath 功能来代替 xml<->array 代码。

```
<?php
$xml = '<docs>
  <folder>
    <name>Folder name</name>
    <date>20.06.2009</date>
    <folder>
      <name>Subfolder1</name>
      <date></date>
    </folder>
    <folder>
      <name>Subfolder2</name>
      <date></date>
      <folder>
        <name>Subfolder3</name>
        <date></date>
      </folder>
    </folder>
  </folder>
</docs>';`$doc = new SimpleXMLElement($xml);
$pathToParentelement = '//folder[name="Subfolder3"]';
$element = $doc->xpath($pathToParentelement);
isset($element[0]) or die('not found');

$newFolder = $element[0]->addChild("folder");
$newFolder->name = "Subfolder4.1";
$newFolder->date = date(DATE_RFC822);

// let's see the result
echo $doc->asxml();`
```

$pathToParentelement 或多或少是你的 $writepath。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T09:30:25.640

使用参考可能会有所帮助。

您可以首先编写一个函数，该函数返回对路径字符串数组给定部分的引用。例如，`get_path_array("Documents")`将返回`$array['docs']['_c']['folder']['_c']['folder'][1], $newfile)`

```
<?php
function &get_path_array($path_str)
{
    // your code to seek to seek the path in the array
    return $result;
}
>?php 
```

现在要添加一个元素，你可以这样做

```
array_push(get_path_array("docs/Folder name/Subfolder2"), $newfile); 
```

那是你要找的吗？

（有关更多信息，请参阅[php 参考资料](http://us3.php.net/manual/en/language.references.pass.php)）

编辑：回复 Eric 的评论（有点难以融入评论）

我认为您可能对数组的工作方式感到困惑。php 中实际上没有多维数组之类的东西，只有存储其他数组的数组。例如，

```
<?php
$a = array(array(1,2,3), array(4,5,6));
$b = $a[1];
echo $b[0];
?> 
```

将输出“4”。

请注意，在上面的代码中，`$b`是 的副本`$a[1]`，更改`$b`不会影响`$a[1]`. 但是，使用引用，这可以工作：

```
<?php
$a = array(array(1,2,3), array(4,5,6));
$b = &$a[1]; // the & make $b a reference to $a[1]
$b[0] = 4242;
print_r($a);
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [1] => Array
        (
            [0] => 4242
            [1] => 5
            [2] => 6
        )

) 
```

所以永远不需要生成字符串`$array['doc']['path']`，你只需使用循环来寻找正确的数组。

# javascript - 使用 Tomcat 引用 Javascript 库

> ID：1021290
> 
> 赞同：3
> 
> 时间：2009-06-20T09:17:39.240
> 
> 标签：javascript, jquery, eclipse, tomcat, ganymede

我正在使用**Eclipse Ganymede**和**Tomcat 5.5**。我想向动态 Web 项目添加一些 javascript，尤其是 ajax 功能，需要一些帮助。

我想使用 jquery （但我愿意接受其他建议，如果你告诉我为什么在这种情况下另一个库会更好，但我选择 jquery 是因为它应该很简单（乍一看似乎是））。

我有两个问题：

1- Tomcat 找不到 jquery 库。我在我的 jsp 文件中尝试了几件事，例如：

```
 <script type="text/javascript" src="WEB-INF/lib/jquery-1.3.2.min.js"></script>
   <script type="text/javascript" src="/WEB-INF/lib/jquery-1.3.2.min.js"></script>
   <script type="text/javascript" src="./WEB-INF/lib/jquery-1.3.2.min.js"></script> 
```

如您所见，我将 jquery 库放入`/WEB-INF/lib`. 在没有tomcat（使用最后一个路径版本）的浏览器中执行jsp文件有效，因此路径是正确的。

2- 在 jquery 的动态 Web 项目中没有适当的语法突出显示，也没有弹出建议。我也尝试了[这篇文章](http://tkramar.blogspot.com/2008/02/add-jquery-autocompletion-to-your.html)中的信息，但没有太大变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-01-30T21:05:38.590

更具体地说（因为我花了大约半个小时才弄清楚这一点）：

当您在 Eclipse 中使用 Tomcat 创建动态 Web 项目时，您会在项目中获得一个名为“WebContent”的文件夹。这是部署到 Tomcat 服务器的实际文件夹，在 Eclipse 中相当于`Tomcat/webapps/<project name>`（我不确定它真正存在的位置）。出于安全原因，作为特殊情况，没有人可以访问其中的`META-INF`和`WEB-INF`文件夹，因此将脚本放在这些地方将无济于事。

您需要做的是在 WebContent 中创建一个文件夹，并将您的 Javascript 粘贴在其中。此文件夹将是全局可见的，因此您网站的访问者（如您，当您测试它时）实际上可以访问 Javascript。

例如，我所做的是在 WebContent 中创建一个名为“script”的文件夹并将我的 Javascript 放在那里；然后，当我需要在页面中引用它时，我输入`src="ProjectName/script/AwesomesauceJavascript.js"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:39:11.687

我想补充一下@Tacroy 的回应。在 Eclipse 中使用的服务器中，检查 server.xml。确保：

`Context docBase="SomeProjectName" path="/SomeProjectName"`<-- path 和 docBase 属性需要相同。

我在那里有两个不同的东西，并且必须使它们相同才能使 src 属性在 jsp 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T14:16:42.663

首先，您必须将资源映射添加到放置 jquery.js 脚本库的文件夹中。该文件夹必须是公共的。

要公开文件夹，请使用以下代码行：

```
<resources mapping="/scripts/**" location="/WEB-INF/scripts/**" /> 
```

现在你只需要在你的页面中添加对这个路径的引用：

```
<script type="text/javascript" src="scripts/jquery-1.10.2.js" ></script> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2011-07-04T10:16:52.633

下面是在 Eclipse 中启用 jQuery 语法高亮和内容辅助高亮的步骤。

1.  下载[jqueryWTP0.40foEn.jar](http://sourceforge.net/projects/jquerywtp/files/jquerywtp/jquerywtp0.40/jqueryWTP0.40foEn.jar/download)。

2.  找到你的 Eclipse 插件`org.eclipse.wst.jsdt.core_version.jar`，备份插件。（例如 C:\DEV\EclipseIndigo37\eclipse\plugins\org.eclipse.wst.jsdt.core_1.1.100.v201104272153.jar）

3.  双击 JAR 文件或使用命令 java -jar jqueryWTP0.40foEn.jar 运行。

4.  在打开的 swing UI 上，选择`org.eclipse.wst.jsdt.core_version.jar`，然后输出目录。

5.  单击生成按钮。

6.  用生成的文件替换旧`org.eclipse.wst.jsdt.core_version.jar`文件。

7.  删除目录`workspace/.metadata/.plugins/org.eclipse.wst.jsdt.core`

8.  启动 Eclipse。

9.  打开 HTML 文件或 JavaScript 文件，编辑 JavaScript 内容。

jQuery 内容辅助现在可用。
[插件开发者和来源](http://www.langtags.com/jquerywtp/index.html)

# java-me - 当用户触发取消命令时停止线程

> ID：1021294
> 
> 赞同：4
> 
> 时间：2009-06-20T09:21:58.653
> 
> 标签：java-me

移动应用程序为用户提供了从远程下载电子邮件附件的选项。与远程服务器连接并下载内容是在单独的线程中执行的。使用取消命令向用户显示一个对话框。这里我提供伪代码。

```
new Thread(new Runnable()
   public void run(){
     try{
     //open connection to remote server
     //get data input stream
     //create byte array of length attachment size
     //show modeless dialog with the message "Downloading..."
     for(int i=0;i<attachmentSize;i++){
       //set the progress indicator of the modeless dialog based upon for iteration
       //read the byte from input stream and store it in byte array
     }
       //open file connection outputstream and store the downloaded content as a file in mobile file system
       //show dialog with the message "attachment successfully downloaded"
      }
      catch(IOException ioe) { }
      catch(Exception ex) { }
   }
).start(); 
```

现在我正在将取消命令添加到带有进度指示器的对话框中。当用户在手机中点击“取消”命令时，可以通过调用 dispose() 方法来处理无模式对话框。如何突然停止通过流媒体获取电子邮件附件的线程？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T10:52:34.257

你可以突然停止它——但它会带来更多的麻烦，这是值得的。

这样做的规范方法是在 Runnable 中检查一个标志：

```
public class ClassHoldingRunnable {

    private volatile boolean stopRequested = false;

    public void executeAsync() {

        Runnable r= new Runnable() {

            public void run() {

                while ( !stopRequested ) {
                    // do work
                 }
            }
        }

        new Thread(r).start();
    }

    public void cancel() {
        stopRequested = true;
    }
} 
```

几点注意事项：

*   stopRequested标志必须是或*具有*`volatile`另一个可见性保证（`synchronized`, `Lock`, `Atomic`），因为它被多个线程访问；
*   `stopRequested`如果最终用户拥有响应式 GUI 很重要，您应该经常检查；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-22T19:06:19.920

有几种互补的方法可以中断从连接读取的线程。

*   您可能通过循环调用 InputStream.read 来读取远程数据，因此您可以重用单个相对较小的 byte[] 对象。您可以在每次迭代之前检查布尔成员变量。您实际上并不需要围绕该布尔值进行同步，因为它只应该在 Thread 构造后更改一次值。

*   关闭 Connection 意味着您的 Thread 在下次尝试访问它时将抛出 IOException 。即使另一个线程正在从 Connection 的 InputStream 中读取，正确的 JavaME 实现也不会使 Connection.close() 阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T17:15:44.330

我在 C# 方面的经验更多，但这可能仍然适用......

我认为找到某种“杀死线程”的方法比删除一个对象并跳过它的析构函数更不是一个好主意。

您可以通过中断告诉线程自杀。然后，您可以使用线程的中断标志作为指示器，或者，如果您在那里有睡眠/等待，您可以捕获中断的异常并在捕获时正确关闭（在 finally 块中）。这应该或多或少地提供您正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T09:35:13.040

我不是这方面的专家，所以请对我的建议持保留态度，因为我在 Java 线程方面的经验非常有限。

您不能停止正在运行的线程。您可以尽快退出它。因此，您可以做的是拥有一个共享标志，您可以在辅助线程中定期测试它。当主线程设置它以响应取消单击时，辅助线程返回。

# c# - .NET 4.0 中动态语言运行时的限制是什么？

> ID：1021296
> 
> 赞同：6
> 
> 时间：2009-06-20T09:23:26.980
> 
> 标签：c#, .net, dynamic-language-runtime

我知道不支持匿名函数作为动态方法调用的参数。.NET 4.0 中 DLR 的其他此类限制是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-20T09:32:54.620

你*可以*使用匿名函数，你只需要先转换它们：

```
dynamic list = new List<string>() { "10", "20" };
dynamic converted = list.ConvertAll((Func<string, int>) (x => int.Parse(x))); 
```

方法组转换也是如此：

```
foo.Click += (EventHandler) MyClickHandler; 
```

到目前为止我遇到的其他限制：

*   静态方法和构造函数在类型方面不能是动态的，但在参数方面*可以*是动态的
*   您不能`dynamic`在类型约束中使用
*   您不能`dynamic`在类声明的接口中用作类型参数，但*可以*将其用作基类的类型参数，即

    ```
    class Invalid : IEnumerable<dynamic>
    class Valid : List<dynamic> 
    ```

*   在执行时无法发现扩展方法（但您可以使用动态参数直接调用静态方法）

*   4.0b1 中有一个错误，您无法从`dynamic[]`to转换`IEnumerable<dynamic>`- 这将在发布时修复。
*   您不能`dynamic`用作基类

（请注意，这些是 C# 4.0 和 DLR 本身的限制。我的印象是你的意思。）

# qt - 在 Qt 中关闭新的非子窗口

> ID：1021297
> 
> 赞同：3
> 
> 时间：2009-06-20T09:23:28.477
> 
> 标签：qt, qwidget

我正在尝试制作 2 个窗口。2nd 应该在 1st 中调用。我不连接他们的孩子->父母。但是当我调用第二个窗口并关闭它时，第一个窗口也关闭了。我该怎么办？两个窗口都继承自 QWidget。C++ 和 Qt

* * *

对不起我的描述不佳。我有一个主窗口。类继承自 QMainWindow。我创建了第二个窗口。类继承自 QWidget。在第一个（主窗口）中，我正在创建并调用第二个窗口

```
ConfigWindow *ConfWindow = new ConfigWindow();
ConfWindow->show(); 
```

没有给父母的链接。一切正常，但是当我关闭第二个窗口（配置窗口）时，我的主窗口也正在关闭。我不需要这个。在配置窗口关闭后我应该怎么做才能阻止关闭主窗口。

## 希望描述好一点。

我的第一个窗口有这个标志：

```
this->setWindowFlags(Qt::Tool | Qt::FramelessWindowHint); 
```

没有他们一切都很好。如果我需要窗口中的标志，我可以改变一些东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-22T21:30:12.250

你需要类似的东西：

```
QApplication app(argc, argv);
app.setQuitOnLastWindowClosed(false); 
```

这是测试程序： http: [//pastebin.com/f5903c5f4](http://pastebin.com/f5903c5f4)。

请注意，现在您需要在主窗口的析构函数中**显式**调用[quit()](http://doc.trolltech.com/4.5/qcoreapplication.html#quit)。

如果您阅读[QApplication::quitOnLastWindowClosed 文档](http://doc.trolltech.com/4.5/qapplication.html#quitOnLastWindowClosed-prop)，您会发现：

> 如果该属性为真，当最后一个可见的主窗口（即没有父窗口）与 Qt::WA_QuitOnClose 属性集关闭时，应用程序将退出。默认情况下，为所有小部件设置此属性，子窗口除外

因为您的主窗口是一个（无框）工具窗口，所以它很重要。这使得 ConfWindow 成为唯一的非子窗口顶级小部件。因此，如果您关闭 ConfWindow，它会促使应用程序实例退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T07:24:23.197

如果这是代码，那么 Qt 中有一个巨大的错误。
上面的代码不应该关闭你的第一个 Windows，肯定有其他问题。
应用程序是关闭还是崩溃？

**备注**
谁在删除 configWindow？有一个`Qt::WA_DeleteOnClose`属性可以在关闭后删除窗口。

```
ConfigWindow *confWindow = new configWindow();
configWindow->setAttribute(Qt::WA_DeleteOnClose, true);
confWindow->show(); 
```

# mysql - 为什么 ActiveRecord 生成的 SQL 包含时间列的日期？

> ID：1021300
> 
> 赞同：3
> 
> 时间：2009-06-20T09:28:14.663
> 
> 标签：mysql, ruby-on-rails, time

当我创建一个 SQL Time 列时，我得到一个纯时间，即。未注明日期的。但是当我使用 Ruby Time 类时，我也会得到一个日期。问题是什么时候“查找”生成的 SQL 包含一个日期，我似乎得到了奇怪的结果。

*桌子*

```
start_date: time
end_time: time
day_of_week: string 
```

*活动记录*

```
def self.now_playing
    self.find(:first, :conditions => ['day_of_week = ? AND end_time > ? AND start_time < ?',  Time.now.strftime('%A'), Time.now, Time.now])
end 
```

*SQL*

```
SELECT * FROM `schedules` WHERE (day_of_week = 'Saturday' AND end_time > '2009-06-20 10:19:59' AND start_time < '2009-06-20 10:19:59') LIMIT 1 
```

生成的 SQL 包含一个日期，这可能是我得到奇怪结果的原因吗，例如在给定时间有计划时没有返回记录？但是，如果该列是纯时间列，MySQL 不应该忽略日期部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-12-17T16:27:12.473

Ruby 中的时间更像是时间戳……总是有一个日期。ActiveSupport 对此有内置的转换，所以如果日期搞砸了你的结果，你可以使用#to_s(:format) 来获得你需要的结果。默认情况下，有一个 :time 选项，但它只返回小时/分钟 (%H:%M) ，如果您还需要秒，则必须添加另一种格式...

创建一个名为 time_formats.rb 或其他东西的初始化程序并添加：

### Rails 2-ish

```
ActiveSupport::CoreExtensions::Date::Conversions::DATE_FORMATS.merge!({
  :time_long => "%H:%M:%S"
}) 
```

### 导轨 3

```
Time::DATE_FORMATS.merge!(
  :time_long => "%H:%M:%S"
) 
```

然后在你的取景器中，这样做：

```
def self.now_playing
  time = Time.now
  self.find(:first, :conditions => ['day_of_week = ? AND end_time > ? AND start_time < ?',  time.strftime('%A'), time.to_s(:time_long), time.to_s(:time_long)])
end 
```

更多信息可以在这里找到：http: [//jasonseifer.com/2010/03/10/rails-date-formats](http://jasonseifer.com/2010/03/10/rails-date-formats)

或在这里：[http ://brian.rarevisions.net/extending-date-formats-in-rails-3](http://brian.rarevisions.net/extending-date-formats-in-rails-3)

# jquery - 使用jQuery限制列表元素的数量

> ID：1021306
> 
> 赞同：6
> 
> 时间：2009-06-20T09:32:07.197
> 
> 标签：jquery, list, limit

我有一个包含 20-30 个事件的列表元素。我只想展示其中的 5 个，并且有一个“更多”链接，我可以点击观看接下来的五个。是否附加了五个 next 事件并不重要。

找不到实际执行此操作的 jQuery 脚本，还是我只是瞎了眼？我不想使用轮播插件或类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T10:15:56.657

好吧，幸运的是，对于我们这些为食物和名声编写代码的程序员来说，并不是所有可以想象的功能都被编写为插件 :)

但这很容易：

```
var from = 0, step = 5;

function showNext(list) {
  list
    .find('li').hide().end()
    .find('li:lt(' + (from + step) + '):not(li:lt(' + from + '))')
      .show();
  from += step;
}

function showPrevious(list) {
  from -= step;
  list
    .find('li').hide().end()
    .find('li:lt(' + from + '):not(li:lt(' + (from - step) + '))')
      .show();
}

// show initial set
showNext($('ul'));

// clicking on the 'more' link:
$('#more').click(function(e) {
  e.preventDefault();
  showNext($('ul'));
}); 
```

当然，最好将其提取到类似插件的功能中，但我将把它作为练习留给读者；）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-20T10:33:59.990

```
<html>
<head><title>Test</title></head>
<body>
<ul class="more">
  <li>one</li>
  <li>two</li>
  <li>three</li>
  <li>four</li>
  <li>five</li>
  <li>six</li>
  <li>seven</li>
  <li>eight</li>
  <li>nine</li>
  <li>ten</li>
</ul>
<script type="text/javascript" src="jquery-1.3.1.js"></script>
<script type="text/javascript">
$(function() {
  $("ul.more").each(function() {
    $("li:gt(4)", this).hide(); /* :gt() is zero-indexed */
    $("li:nth-child(5)", this).after("<li class='more'><a href='#'>More...</a></li>"); /* :nth-child() is one-indexed */
  });
  $("li.more a").live("click", function() {
    var li = $(this).parents("li:first");
    li.parent().children().show();
    li.remove();
    return false;
  });
});
</script>
</script
</body>
</html> 
```

基本上这是做什么的：

1.  隐藏第 6 个和后续列表项；
2.  在第 5 个之后插入一个列表项，说“更多...”；
3.  使用实时事件将事件处理程序添加到“更多...”链接，以便在单击它们时显示该列表中的所有列表项，然后将其删除。

**编辑：**修正了一些小错误。上面现在是一个完整的示例（只需确保 jquery 链接正确）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T10:16:36.297

您希望从隐藏列表中的每个元素开始（CSS：显示：无）。然后在列表元素下方添加更多链接。

```
$(document).ready(function()
{
    $("a#myMoreLink").click(function()
    {
        var items = $("ul#myList > li:hidden");

        if(items.length > 0)
            items.slice(0, 5).show();
        else
            $(this).html("No more");

        return false;
    });

    $("a#myMoreLink").click();
}); 
```

使用 HTML：

```
<ul id="myList">
    <li style="display: none"></li>
    <li style="display: none"></li>
</ul>
<a href="http://" id="myMoreLink">More</a> 
```

类似的东西。$("a#myMoreLink").click(); 被调用以在加载页面时显示最初的 5 个项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T10:15:30.447

这可行，但肯定你将不得不对其进行一些调整:)

html:

```
<div style="width:200px;border:3px groove blue;">
   <ul id="list">
    <li>Thai</li>
    <li>Turkish</li>
    <li>Portuguese</li>
    <li>American English</li>
    <li>Arabic</li>
    <li>Canadian French</li>
    <li>Chinese Simplified</li>
    <li>Chinese Traditional</li>
    <li>Czech</li>
    <li>Danish</li>
    <li>Dutch</li>
    <li>English</li>
    <li>Finnish</li>
    <li>French</li>
    <li>German</li>
    <li>Greek</li>
    <li>Hebrew</li>
    <li>Hungarian</li>
    <li>Italian</li>
    <li>Japanese</li>
    <li>Norweigan</li>
    <li>Polish</li>
    <li>Russian</li>
    <li>Spanish</li>
   </ul>    
   <a href="#" id="lnkMore">More</a>
</div> 
```

javascript:

```
<script type="text/javascript">
    var len = 0;
    var curStart = 0;
    var count = 5;
    var items=new Array();
    function BackupList() {
        var lst = $("ul#list");
        len= $("ul#list li").length;
        if (len <= count)
            return;

        $("ul#list li").each(function() {
            items.push($(this));
            $(this).remove();
        });

        var html="";
        for (curStart; curStart < count && curStart < len; curStart++) {
            html += "<li>" + $(items[curStart]).html() + "</li>";
        }
        $(html).appendTo($(lst));
    }

    function ShowMore() {
        if (curStart >= len) {
            curStart = 0;
        }

        $("ul#list li").each(function() {
            $(this).remove();
        });

        var l = curStart;
        var html = "";
        for (curStart; curStart < (l + count) && curStart < len; curStart++) {
            html += "<li>" + items[curStart].html() + "</li>";
        }
        $(html).appendTo($("ul#list"));
    }
</script> 
```

为事件连接 jquery：

```
<script type="text/javascript">
    $(document).ready(function() {
        BackupList();
        $("a#lnkMore").click(function() { ShowMore(); });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-14T17:38:33.440

我写了一个 hideMaxListItems 插件，它可能是您正在寻找的。您可以设置列表项的最大数量、幻灯片动画的动画速度以及展开/折叠按钮 HTML。幻灯片动画是按列表项顺序完成的，以提供流畅的动画。

[http://www.joshuawinn.com/maximum-list-items-jquery-hide-after-x-number-bullets/](http://www.joshuawinn.com/maximum-list-items-jquery-hide-after-x-number-bullets/)

# c# - 自动登录到站点并单击按钮

> ID：1021310
> 
> 赞同：0
> 
> 时间：2009-06-20T09:35:04.913
> 
> 标签：c#

要登录一个站点，请转到特定页面（例如本地路由器页面）并单击按钮进行操作（例如连接）。因为我几乎每天都这样做，所以我想通过小型 C# 应用程序来自动化它。我不知道该怎么做。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T09:39:29.913

使用 Fiddler 等工具捕获 HTTP 请求的内容。使用此信息，您可以构建执行这些 HTTP 请求的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T09:40:25.900

跟踪您发送的 HTTP 请求

*   浏览器插件（Firebug、httpwatch、tamperdata 等）
*   一个 Web 调试代理（fiddler、charles 等）
*   数据包嗅探器（wireshark 等）

然后使用`System.Net`命名空间中的类（例如[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)）来执行相同的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T09:46:58.710

为什么`C#`要一键打码？试试[AutoIt](http://www.autoitscript.com/autoit3/)。

这是一个[入门教程](http://www.technibble.com/automation-with-autoit-tutorial-part-2/)。这将帮助您快速自动单击应用程序的默认按钮。AutoIt 提供了更多技巧，您几乎可以通过电话告诉别人在 GUI 上做的任何事情。

如果您正在使用 GUI 测试或梦想编写大量常规 GUI 活动的脚本，AutoIt 是一个非常有用的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-21T03:44:34.017

您还可以使用[Selenium IDE](http://seleniumhq.org/projects/ide/)，这是一个 FireFox 插件，可让您录制宏之类的脚本以在浏览器中播放。它专为网页的自动化测试而设计，但您可以在 C# 中导出脚本，然后可以从控制台应用程序运行该脚本。

如果您打算将其作为 C# 应用程序运行，您还需要查看[Selenium RC](http://seleniumhq.org/projects/remote-control/)。

快乐的脚本:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T15:30:50.337

我在 C# 中创建了应用程序，它使用 Microsoft 提供的 WebBrowser 控件并使用它来打开网站并尝试操作它的 html 并尝试将值放入某些文本框中并尝试点击它对我有用的按钮，希望它有帮助也适合你 示例代码如下

```
internal void LoginToSite()
        {
            WebBrowser.Navigate("some site login Page");
            _Processing = true;
            var username = ConfigurationManager.AppSettings["username"];
            var password = ConfigurationManager.AppSettings["password"];
            while (_Processing)
            {
                Application.DoEvents();
                if (WebBrowser.ReadyState == WebBrowserReadyState.Complete || WebBrowser.ReadyState == WebBrowserReadyState.Interactive)
                {
                    var htmlDocument = this.WebBrowser.Document;
                    if (htmlDocument != null)
                    {
                        foreach (HtmlElement tag in htmlDocument.GetElementsByTagName("input"))
                        {
                            switch (tag.Name)
                            {
                                case "username":
                                    tag.InnerText = username;
                                    break;
                                case "password":
                                    tag.InnerText = password;
                                    break;
                                case "cmdlogin":
                                    tag.RaiseEvent("onclick");
                                    tag.InvokeMember("Click");
                                    break;
                            }

                        }
                    }
                    _Processing = false;
                }
            }
        } 
```

# mysql - 如何优化 MySQL 视图

> ID：1021319
> 
> 赞同：2
> 
> 时间：2009-06-20T09:40:43.933
> 
> 标签：mysql, optimization, views

我有一些使用视图的查询，这些查询的运行速度比我预期的要慢得多，因为所有相关的表都已编入索引（而且不是那么大）。

我希望我能解释一下：

我的主要查询看起来像这样（大大简化）

```
select [stuff] from orders as ord 
left join calc_order_status as ors on (ors.order_id = ord.id) 
```

`calc_order_status`是一个视图，定义如下：

```
create view calc_order_status as
select ord.id AS order_id,
(sum(itm.items * itm.item_price) + ord.delivery_cost) AS total_total
from orders ord 
left join order_items itm on itm.order_id = ord.id
group by ord.id 
```

订单 (ord) 包含订单，`order_items`包含与每个订单关联的单个项目及其价格。

所有表都已正确编入索引，但事情运行缓慢，当我执行 EXPLAIN 时，我得到

```
 # id  select_type  table  type  possible_keys  key  key_len  ref  rows  Extra  
  1 1 PRIMARY ord ALL customer_id NULL NULL NULL 1002 Using temporary; Using filesort 
  2 1 PRIMARY <derived2> ALL NULL NULL NULL NULL 1002   
  3 1 PRIMARY cus eq_ref PRIMARY PRIMARY 4 db135147_2.ord.customer_id 1 Using where 
  4 2 DERIVED ord ALL NULL NULL NULL NULL 1002 Using temporary; Using filesort 
  5 2 DERIVED itm ref order_id order_id 4 db135147_2.ord.id 2 
```

我的猜测是，“derived2”指的是视图。单个项目 (itm) 似乎工作正常，由 order_id 索引。问题似乎出在第 4 行，这表明系统没有使用订单表 (ord) 的键。但在 MAIN 查询中，订单 id 已经定义：left join calc_order_status as ors on (ors.order _ id = ord.id) 和 ord.id（在主查询和视图内）指的是主键.

我在某处读过 MySQL 简单并没有很好地优化视图，并且即使在可用的情况下也可能在某些条件下不使用键。这似乎是其中一种情况。

我将不胜感激任何建议。有没有办法让 MySQL 意识到“这一切都比你想象的要简单，只要使用主键就可以了”？或者意见是完全错误的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-24T17:09:33.380

如果完全可以删除这些连接，请将它们删除。用子查询替换它们会大大加快速度。

你也可以尝试运行这样的东西，看看它是否有任何速度差异。

```
select [stuff] from orders as ord 
left join (
  create view calc_order_status as
  select ord.id AS order_id,
  (sum(itm.items * itm.item_price) + ord.delivery_cost) AS total_total
  from orders ord 
  left join order_items itm on itm.order_id = ord.id
  group by ord.id
) as ors on (ors.order_id = ord.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T11:14:37.990

索引对于在大表中查找几行很有用，但是当您查询每一行时，索引只会减慢速度。所以这里 MySQL 可能希望使用整个 [order] 表，所以最好不要使用索引。

[您可以通过强制](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)MySQL 使用索引来尝试是否会更快：

```
from orders as ord force index for join (yourindex) 
```

# java - 计算闰年的Java代码

> ID：1021324
> 
> 赞同：41
> 
> 时间：2009-06-20T09:48:00.363
> 
> 标签：java, leap-year, acm-java-libraries

我正在关注“Java 的艺术与科学”一书，它展示了如何计算闰年。本书使用 ACM Java Task Force 的库。

这是书籍使用的代码：

```
import acm.program.*;

public class LeapYear extends ConsoleProgram {
    public void run()
    {

        println("This program calculates leap year.");
        int year = readInt("Enter the year: ");     

        boolean isLeapYear = ((year % 4 == 0) && (year % 100 != 0) || (year % 400 == 0));

        if (isLeapYear)
        {
            println(year + " is a leap year.");
        } else
            println(year + " is not a leap year.");
    }

} 
```

现在，这就是我计算闰年的方法。

```
import acm.program.*;

public class LeapYear extends ConsoleProgram {
    public void run()
    {

        println("This program calculates leap year.");
        int year = readInt("Enter the year: ");

        if ((year % 4 == 0) && year % 100 != 0)
        {
            println(year + " is a leap year.");
        }
        else if ((year % 4 == 0) && (year % 100 == 0) && (year % 400 == 0))
        {
            println(year + " is a leap year.");
        }
        else
        {
            println(year + " is not a leap year.");
        }
    }
} 
```

我的代码有什么问题还是应该使用本书提供的代码？

编辑 :: 上述两个代码都可以正常工作，我想问的是哪个代码是计算闰年的最佳方法。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-06-20T10:21:47.517

正确的实现是：

```
public static boolean isLeapYear(int year) {
  Calendar cal = Calendar.getInstance();
  cal.set(Calendar.YEAR, year);
  return cal.getActualMaximum(Calendar.DAY_OF_YEAR) > 365;
} 
```

但是，如果您要重新发明这个轮子，那么：

```
public static boolean isLeapYear(int year) {
  if (year % 4 != 0) {
    return false;
  } else if (year % 400 == 0) {
    return true;
  } else if (year % 100 == 0) {
    return false;
  } else {
    return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-05-22T22:32:21.430

# `java.time.Year::isLeap`

我想[`java.time`](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/time/package-summary.html)用[`Year`](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/time/Year.html)类和方法添加新的[`isLeap`](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/time/Year.html#isLeap())方法：

```
java.time.Year.of(year).isLeap(); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-06-20T09:57:13.900

我建议你把这段代码放到一个方法中并创建一个单元测试。

```
public static boolean isLeapYear(int year) {
    assert year >= 1583; // not valid before this date.
    return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);
} 
```

在单元测试中

```
assertTrue(isLeapYear(2000));
assertTrue(isLeapYear(1904));
assertFalse(isLeapYear(1900));
assertFalse(isLeapYear(1901)); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2010-05-28T20:40:00.050

来自维基百科的伪代码翻译成最紧凑的 Java

```
(year % 400 == 0) || ((year % 4 == 0) && (year % 100 != 0)) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-17T07:45:28.597

```
new GregorianCalendar().isLeapYear(year); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-21T23:53:59.933

# 最有效的闰年测试：

```
if ((year & 3) == 0 && ((year % 25) != 0 || (year & 15) == 0))
{
    /* leap year */
} 
```

[这是我在https://stackoverflow.com/a/11595914/733805](https://stackoverflow.com/a/11595914/733805)上的详细回答的摘录

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-01T14:18:16.667

来自 JAVA 的 GregorianCalendar 源代码：

```
/**
 * Returns true if {@code year} is a leap year.
 */
public boolean isLeapYear(int year) {
    if (year > changeYear) {
        return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);
    }

    return year % 4 == 0;
} 
```

其中 changeYear 是儒略历变为公历 (1582) 的年份。

> 儒略历每四年指定闰年，而公历省略不能被 400 整除的世纪年。

在[公历文档](https://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)中，您可以找到有关它的更多信息。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-03-04T07:52:52.723

如果您使用的是 java8 ：

```
java.time.Year.of(year).isLeap() 
```

上述方法的Java实现：

```
public static boolean isLeap(long year) {
        return ((year & 3) == 0) && ((year % 100) != 0 || (year % 400) == 0);
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-20T10:07:16.800

在软件中重复几乎总是错误的。在任何工程学科中，形式都应该遵循功能，并且对于具有两种可能路径的事物具有三个分支-要么是闰年，要么不是闰年。

在一行上进行测试的机制没有这个问题，但通常最好将测试分成一个函数，该函数接受一个表示年份的 int 并返回一个表示该年份是否为闰年的布尔值. 这样你就可以用它做一些其他的事情，打印到控制台上的标准输出，并且可以更容易地测试它。

在已知超出其性能预算的代码中，通常会安排测试以使它们不是多余的，并按照提前返回的顺序执行测试。维基百科的例子就是这样做的——对于大多数年份，您必须计算模 400,100 和 4，但对于少数情况，您只需要模 400 或 400 和 100。这是性能方面的一个小优化（充其量，只有百分之一）输入受到影响），但这也意味着代码的重复次数更少，程序员输入的次数也更少。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-06-01T14:46:28.583

您可以为此向[GregorianCalendar](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#isLeapYear(int))类询问：

```
boolean isLeapyear = new GregorianCalendar().isLeapYear(year); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-31T15:06:57.950

随着课程：[TestMyCode Programming assignment evaluator](https://tmc.mooc.fi/)，其中一个练习就是这种问题，我写了这个答案：

```
import java.util.Scanner;

public class LeapYear {

    public static void main(String[] args) {
        Scanner reader = new Scanner(System.in);
        System.out.println("Type a year: ");

        int year = Integer.parseInt(reader.nextLine());

        if (year % 400 == 0 && year % 100 == 0 && year % 4 == 0) {
            System.out.println("The year is a leap year");
        } else
         if (year % 4 == 0 && year%100!=0 ) {
            System.out.println("The year is a leap year");
        } else 
        {
            System.out.println("The year is not a leap year");
        }

    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-23T04:47:52.277

这就是我想出的。有一个附加功能可以检查 int 是否超过了施加异常的日期（年 100 美元，年 %400）。在 1582 年之前，这些例外情况并不存在。

```
import java.util.Scanner;

public class lecture{

public static void main(String[] args) {
    boolean loop=true;
    Scanner console = new Scanner( System.in );
    while (loop){
        System.out.print( "Enter the year: " );

        int year= console.nextInt();
        System.out.println( "The year is a leap year: "+ leapYear(year) );
        System.out.print( "again?: " );
        int again = console.nextInt();
        if (again == 1){
            loop=false;
        }//if
    }
}
public static boolean leapYear ( int year){
    boolean leaped = false;
    if (year%4==0){
        leaped = true;
        if(year>1582){
            if (year%100==0&&year%400!=0){
                leaped=false;
            }
        }
    }//1st if
    return leaped;
}
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-23T14:41:31.397

```
public static void main(String[] args)
{

String strDate="Feb 2013";
        String[] strArray=strDate.split("\\s+");        

        Calendar cal = Calendar.getInstance();
        cal.setTime(new SimpleDateFormat("MMM").parse(strArray[0].toString()));
        int monthInt = cal.get(Calendar.MONTH);
        monthInt++;
        cal.set(Calendar.YEAR, Integer.parseInt(strArray[1]));          
        strDate=strArray[1].toString()+"-"+monthInt+"-"+cal.getActualMaximum(Calendar.DAY_OF_MONTH);

        System.out.println(strDate);    

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-22T19:19:58.117

```
 import java.util.Scanner;

    public class LeapYear {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Scanner input = new Scanner(System.in);
        System.out.print("Enter the year then press Enter : ");
        int year = input.nextInt();

        if ((year < 1580) && (year % 4 == 0)) {
            System.out.println("Leap year: " + year);
        } else {
            if ((year % 4 == 0) && (year % 100 != 0) || (year % 400 == 0)) {
                System.out.println("Leap year: " + year);
            } else {
                System.out.println(year + " not a leap year!");
            }

        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-24T15:45:47.357

正如[维基百科](http://en.wikipedia.org/wiki/Leap_year#Algorithm)所说的闰年算法应该是

```
(((year%4 == 0) && (year%100 !=0)) || (year%400==0)) 
```

[这是一个如何检查闰年](http://codeforwin.blogspot.in/2015/05/c-program-to-check-leap-year.html)的示例程序。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-21T16:37:00.207

您的代码，因为它没有额外的类，似乎不适用于通用 java。这是一个可以在任何地方工作的简化版本，更倾向于您的代码。

```
import java.util.*;
public class LeapYear {
    public static void main(String[] args) {
        int year;
        {
            Scanner scan = new Scanner(System.in);
            System.out.println("Enter year: ");
            year = scan.nextInt();

            if ((year % 4 == 0) && year % 100 != 0) {
                System.out.println(year + " is a leap year.");
            } else if ((year % 4 == 0) && (year % 100 == 0)
                    && (year % 400 == 0)) {
                System.out.println(year + " is a leap year.");
            } else {
                System.out.println(year + " is not a leap year.");
            }
        }
    }
} 
```

您的代码在上下文中也同样有效，但请注意书本代码*始终有效*，并且经过了彻底的测试。不是说你的不是。:)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-11-12T14:13:59.680

让java闰年更容易理解的最简单方法`enter code here`

```
import  java.util.Scanner; 
```

类 que19{

```
public static void main(String[] args) {

    Scanner input=new Scanner(System.in);

    double a;

    System.out.println("enter the year here ");
    a=input.nextDouble();
    if ((a % 4 ==0 ) && (a%100!=0) || (a%400==0)) {
        System.out.println("leep year");

    }
    else {
        System.out.println("not a leap year");
    }
} 
```

}

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-10T20:07:20.267

[这个答案](https://stackoverflow.com/a/1021373/274677)很好，但在基督之前几年（使用预测的公历）它不会起作用。如果您希望它在 BC 年内工作，请使用以下改编：

```
public static boolean isLeapYear(final int year) {
    final Calendar cal = Calendar.getInstance();
    if (year<0) {
        cal.set(Calendar.ERA, GregorianCalendar.BC);
        cal.set(Calendar.YEAR, -year);
    } else
        cal.set(Calendar.YEAR, year);
    return cal.getActualMaximum(Calendar.DAY_OF_YEAR) > 365;
} 
```

您可以通过考虑假定公历为闰年 -5 年（即公元前 4 年）来验证这一点。与 -1 年（公元 1 年之前的一年）相同。链接到答案不处理这种情况，而上述改编的代码可以。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-12T00:21:36.657

在 Kotlin 中回答：

```
fun isLeapYear(year: Int): Boolean =
    when {
        year % 4 != 0 -> false
        year % 100 == 0 -> year % 400 == 0
        else -> true
    } 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-04-15T17:54:20.173

```
import javax.swing.*;
public class LeapYear {
    public static void main(String[] args) {
    int year;
String yearStr = JOptionPane.showInputDialog(null, "Enter radius: " );

year = Integer.parseInt( yearStr );

boolean isLeapYear;
isLeapYear = (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);  

 if(isLeapYear){ 
JOptionPane.showMessageDialog(null, "Leap Year!"); 
 }  
 else{
JOptionPane.showMessageDialog(null, "Not a Leap Year!"); 
    }
    }
    } 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2012-12-06T20:02:03.827

```
boolean leapYear = ( ( year % 4 ) == 0 ); 
```

# c++ - 如何告诉 std::set '刷新'它的排序？

> ID：1021331
> 
> 赞同：8
> 
> 时间：2009-06-20T09:57:09.033
> 
> 标签：c++, stl

如果集合中元素的值发生更改，则排序可能不再正确。如这个小程序所示：

```
#include <algorithm>
#include <iostream>
#include <set>
#include <string>

struct Comp
{
    bool operator()(const std::string * lhs, const std::string * rhs)
    {
        return *lhs < *rhs;
    }
};

int main()
{
    typedef std::set<std::string*, Comp> MySet;
    MySet mySet;

    std::string * a = new std::string("a");
    mySet.insert(a);

    std::string * c = new std::string("c");
    mySet.insert(c);

    std::string * b = new std::string("b");
    mySet.insert(b);

    for (MySet::iterator it = mySet.begin(); it != mySet.end(); ++it)
    {
        std::cout << *(*it) << std::endl;
    }

    // Ouput has correct order:
    // a
    // b
    // c

    *b = "z";
    std::cout << std::endl;

    std::string * d = new std::string("d");
    mySet.insert(d);    

    for (MySet::iterator it = mySet.begin(); it != mySet.end(); ++it)
    {
        std::cout << *(*it) << std::endl;
    }

    // Output no longer ordered correctly:
    // a
    // d
    // z
    // c

    return 0;
} 
```

如何告诉集合“刷新”其内部排序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-20T10:02:32.550

这里非常相似的主题（虽然不是完全重复，因为您使用自定义比较存储指向可变对象的指针）：

[修改 std::set 的元素时会发生什么？](https://stackoverflow.com/questions/908949/what-happens-when-you-modify-an-element-of-an-stdset)

基本上，不要做你想做的事。相反，当你想修改一个`set`持有指针的对象时，首先删除指针，然后修改对象，然后重新插入指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-20T10:03:18.180

简单地说，你不能。如果您将一个项目放入一个集合中，则不应以更改其顺序的方式更改该项目。如果您需要以这种方式更改项目，则需要将其从集合中删除 (set::erase)，并重新插入具有新值的新项目 (std::insert)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-18T16:07:42.030

> 如果集合中某个元素的值发生变化

**停止！**这在法律上是不可能发生的。

`std::set`不提供任何方法来执行您的要求，因为它已经是永远不需要手动重新订购的先决条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T21:25:46.497

值得指出的是，如果您使用的是 vs 2008，则该`std::set`实现支持非常量迭代器，从而使您描述的代码可以使用该库成功编译。在其他 stl 实现中（例如[sgi's](http://www.sgi.com/tech/stl/set.html)），`set::const_iterator`并且`set::iterator`属于同一类型，会抱怨显式设置新键值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T21:38:40.137

使用不同的比较谓词将其复制到自身中。

```
std::set MySet();

/* add entries*/

MySet = std::set(MySet.begin(), MySet.end(), Comp); 
```

通常这用于指定不同的比较操作，例如使用存储的类/结构的不同部分对其进行排序。

# jquery - 使用jQuery滚动div“左右”和“上下”

> ID：1021336
> 
> 赞同：3
> 
> 时间：2009-06-20T10:01:53.580
> 
> 标签：jquery, html, scroll

我在[www.alwaystwisted.com](http://www.alwaystwisted.com)上工作。该页面有 4 个 div，它们通过主链接向下或向上滚动，具体取决于您所在的 div。

我需要它在 div 内工作，但左或右取决于你所在的 div。我无法解决它，它正在煎炸我的大脑。

```
<script type="text/javascript">
$(document).ready(function() {
  function filterPath(string) {
    return string
      .replace(/^\//,'')
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
      .replace(/\/$/,'');
  }
  $('a[href*=#]').each(function() {
        if ( (filterPath(location.pathname) == filterPath(this.pathname))
        && (location.hostname == this.hostname)
        && (this.hash.replace(/#/,'')) ) {
            var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
            var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
             if ($target) {
             var divOffset = $target.parent().offset().top;
             var pOffset = $target.offset().top;
             var pScroll = pOffset - divOffset;
             $(this).click(function() {
                 $target.parent().animate({scrollTop: pScroll + 'px'}, 600);
                 return false;
             });
            }
        }
  });
});
</script> 
```

我期待一个有用的答案。在此先感谢，斯图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:40:11.673

**注意：我没有测试您的代码的准确性，也没有检查我的更改是否有效。我只是拿了你的代码，把“top”改成了“left”，基本上希望是最好的:)**

在对代码进行一些重新格式化后：

```
$(document).ready(function() { 
    function filterPath(string) 
    { 
        return string.replace(/^\//,'')
            .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
            .replace(/\/$/,''); 
    } 
    $('a[href*=#]').each(function() { 
        if ( (filterPath(location.pathname) == filterPath(this.pathname)) 
            && (location.hostname == this.hostname) 
            && (this.hash.replace(/#/,'')) ) 
            { 
                var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']'); 
                var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false; 
                if ($target) 
                { 
                    var divOffset = $target.parent().offset().top; 
                    var pOffset = $target.offset().top; 
                    var pScroll = pOffset - divOffset; 
                    $(this).click(function() 
                    { 
                        $target.parent().animate({scrollTop: pScroll + 'px'}, 600); 
                        return false;
                    });
                } 
            } 
    }); 
}); 
```

我认为是的，事实上，您可以通过修改以下行来重用此代码来使 div 左右移动：

```
var divOffset = $target.parent().offset().top; 
var pOffset = $target.offset().top; 
$target.parent().animate({scrollTop: pScroll + 'px'}, 600); 
```

类似于：

```
var divOffset = $target.parent().offset().left; 
var pOffset = $target.offset().left; 
$target.parent().animate({scrollLeft: pScroll + 'px'}, 600); 
```

我在这个问题上交叉手指；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T14:39:47.700

你应该把你的 4 个菜单内容放在一个 <ul> 中，每一个放在一个 <li> 中。为它们设置精确的宽度和高度并溢出：隐藏，并在 <li>s 上留下一个浮点数。这样，它们将排成一行，您的容器作为视口。在 jquery 中，您应该为 <ul> 的 marginLeft 属性设置动画

# c++ - 哪个是首选：C++ 中的 foo(void) 或 foo()

> ID：1021337
> 
> 赞同：4
> 
> 时间：2009-06-20T10:02:01.503
> 
> 标签：c++, void

我见过两种在 C++ 中定义转换运算符重载的方式，

1.  `operator int* (void) const`
2.  `operator int*() const`

问题1.我认为这两种样式（无论是否添加`void`）具有相同的功能，对吗？
问题 2\. 有更好的偏好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-20T10:09:23.627

这不仅适用于转换运算符，还适用于 C++ 中不带参数的所有函数。就个人而言，我更喜欢省略`void`一致性。

这种做法起源于 C。最初，当 C 没有原型时，在函数声明中使用了一对空大括号，并且没有提供有关函数预期参数的任何信息。

添加原型时，为函数声明保留了空括号，以表示“未指定的参数”，以实现灵活性和向后兼容性。为了提供一个明确的原型，意思是“不带参数”，`(void)`添加了语法。

在 C++ 中，所有函数声明都必须有原型，因此`()`和`(void)`具有相同的含义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-01-06T02:29:57.630

引用 ISO C++ FAQ，[我应该使用`f(void)`or`f()`吗？](https://isocpp.org/wiki/faq/newbie#void-in-param-list)

> `f(void)`C 程序员在声明不带参数的函数时经常使用，但是在 C++ 中，这被认为是不好的风格。事实上，这种`f(void)`风格被 C++ 的创造者 Bjarne Stroustrup、C 的共同创造者 Dennis Ritchie 和 Unix 诞生的研究部门负责人 Doug McIlroy 称为“可憎”。
> 
> 如果您正在编写 C++ 代码，则应使用`f()`. 这种`f(void)`风格在 C++ 中是合法的，但只是为了更容易编译 C 代码。

向当局上诉 FTW :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T10:10:01.113

在 C++ 中 foo() 和 foo(void) 是相同的——“无参数”。在 C99 标准中，前者的意思是“未定义的参数个数”，而后者的意思是“没有参数”。

但是，如果您依赖 C 中的 foo() 行为，您应该会被击中。

所以这意味着你可以使用任何一个。现在就个人而言，我更喜欢 foo() 而不是 foo(void)，因为我讨厌视觉上的混乱，但这只是偏好。我是一个 Python 人 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-06T02:40:20.377

我相信'旧'C（不知道什么版本）`foo()`意味着'任何参数'而`foo(void)`意味着没有参数。`foo()`“任何参数”版本已被弃用，我相信 c99。

快速谷歌搜索发现[这篇维基百科](http://en.wikipedia.org/wiki/Void_type)文章提到了类似的事实。

C++ 将接受，但它的含义与“无参数”的`foo(void)`含义相同。`foo()`

所以在 C++ 中，首选的方法是使用`foo()`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2010-01-06T02:35:50.720

省略空白。在旧式 C 中，所有函数都假定为`int name(...)`. 指定 void 意味着它不是可变长度参数。该默认值已被删除，并且必须指定所有功能（谢天谢地。这是狂野的西部，什么都可以是任何东西）。在 C++ 中，您永远不需要编写 (void)。省略它。就像 C++ 库一样。

# cruisecontrol.net - 为从 .xls 读取值而编写的 nant 脚本

> ID：1021338
> 
> 赞同：2
> 
> 时间：2009-06-20T10:02:06.013
> 
> 标签：cruisecontrol.net, nant

无论如何，我们可以使用 nant 脚本从 .xls 文件中读取值吗？ ，它应该复制相应的邮件 ID 并将该邮件 ID 回显到其他文件，并且该回显值应放置在 Cruise control.NET 的邮件部分中。

请回复我以获得更多说明

谢谢 GNR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T02:47:10.643

您应该编写一个 NAnt 扩展。这相对容易做到。

[在此处](http://www.atalasoft.com/cs/blogs/jake/archive/2008/05/07/writing-custom-nant-tasks.aspx)查看本教程

作为示例项目，请参阅我的问题[here](https://stackoverflow.com/questions/851203/nant-vault-windows-integrated-authentication)和[here](http://support.sourcegear.com/viewtopic.php?f=5&t=11663)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-24T03:22:46.970

我将重新表述我的答案：

“无论如何我们可以使用 nant 脚本从 .xls 文件中读取值”

如果您正在谈论使用“核心”NAnt 功能，即在 NAnt 的基本安装中提供的功能，那么我会说“不”或“不太容易”。

但是，您可以使用 .NET 库扩展 NAnt 以执行您想要的任何功能，只要您可以使用 .NET 语言编写该功能。

因此，为了您解决问题，我认为您需要采取的步骤是：

(a) 编写一个 .NET 库，其中包含执行您描述的功能的方法

(b) 使用 NAnt 的“可扩展性”将 (a) 中的库转换为自定义任务，然后您可以直接从 NAnt 脚本调用

显然，您需要能够分解您的问题，以便为 (a) 部分编写代码。一旦你这样做了，（b）部分就相当简单了，我在链接中提供的教程应该很容易引导你完成这个。

# c# - 复习 C++、C#、ASP.NET 和设计模式的知识

> ID：1021341
> 
> 赞同：5
> 
> 时间：2009-06-20T10:03:00.770
> 
> 标签：c#, asp.net, c++, design-patterns

我做了 10 年的软件开发人员，一路从汇编语言编程的狂野世界，然后是 C++ 和 COM 的服务器端，在过去的 5 年里，我舒适地安顿在一个安静的 .NET 世界中， C# 和业务应用程序的开发。

问题是 - 过去几年很舒服，而且我几乎一半的时间都花在做 BA 的工作上，我觉得我忘记了低级 C# 语言、设计模式和 ASP.NET 的大部分内容。在将近 5 年没有使用 C++ 进行大型项目之后，我在该语言方面的技能更加糟糕。

这并不意味着我不会编程——我每天都在做，而且非常成功——但我觉得如果需要，我将无法通过大多数艰难的工作面试，这在当前的经济衰退中很可能发生。我认为我不会通过的原因是我忘记了面试时人们通常会被问到的所有标准内容（例如，我使用设计模式——但如果你问我——哪种模式是什么——我可能不会给你正确的名字，因为他的所有 DP 对我来说只是一种使用静态函数和虚拟函数的聪明方法）。

**有人可以指点我一个资源或给我一个建议（我可以两者兼得吗？），我怎样才能快速（在一周左右）可以提高我对 C#/.NET、DP 和 ASP.NET 的了解非常优秀的高级开发人员（两年前我是）的水平**。至于 C++——我愿意花一个月的时间来恢复我的知识，但这是次要的。

请正确理解我 - 我不是新手，我以前知道的所有这些事情 - 只是想再次 100% 恢复业务。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T10:35:55.820

对于设计模式，我建议获取一份 Head First Design Patterns。关于 ASP.NET、C# 和一些模式的使用，观看 Rob Connerys ASP.NET MVC Storefront Webcasts 将是一个好的开始。

您还可以查看 Scott Hanselmanns 的采访问题，您可以在他的博客上找到这些问题。尝试找到所有问题的答案，您的状态应该很好;-)

另外，我想看看一些成功的开源项目的代码，比如 subtext、DasBlog、Oxite ...

它们是一个很好的学习资源。

下一步可能是为其中一些项目做出贡献（向项目管理员发送一些补丁），因为没有什么可以代替实践......

但是你应该记住，一周的时间可能不足以重新磨练你的技能。

总之祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T11:09:49.370

好吧，既然你知道这一切，我猜这意味着以前“已经使用过所有这些”，你可以回顾一下你自己的代码作为起点。

真的问自己：

*   我为什么要这样做？
*   这是什么时候，我是什么情况？
*   我现在可以做得更好吗？

取出程序中一个棘手而有趣的小部分，并尝试重新编码。

这一切都是为了让你在精神上回到那个时代，在记忆中捡起一些废弃的线索。我发现这些方法对于重新激活知识非常有用。

然后阅读博客和书籍上的新发展/最佳实践，并浏览曾经对您有用的书籍（也许有当前版本）

我使用 scott meyer 的“Effective C++...”系列让我重新回到并提升我对 C++ 的了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-22T02:47:02.267

我发现 www.asp.net/learn 上的 asp.net 视频非常适合快速学习（或记住）许多 asp.net 主题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T11:10:34.800

当今许多书籍都介绍了设计模式。[标准当然是名为“设计模式”](https://rads.stackoverflow.com/amzn/click/com/0201633612)的“四人帮”一书 。

**将 OO、敏捷和模式放在一起**

另一本书更加实用，将设计模式与另一门新事物——“敏捷开发”结合起来。好消息是，设计模式以实时示例的形式呈现，并在上下文中有趣地呈现。我认为 Robert C. Martin 对许多 OO 开发原则也带来了很多见解。这本书叫做[敏捷软件开发](https://rads.stackoverflow.com/amzn/click/com/0135974445)。

但当然，这取决于你想走多远。你真的想复习你的知识（然后我可能会提供进一步的提示）或者你只是想了解最新的面试吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T12:04:27.030

[C# 中的设计模式幻灯片](http://nesteruk.org/seminars/DesignPatterns.pdf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T12:05:27.497

好吧，如果你有两个月的时间来学习 C++ 和设计模式，那么我会向你推荐以下书籍。

```
- C++ FAQ Second Edition
 - Effective C+++
 - Effective STL 
```

我认为对于 C++ 这应该足够了，如果你有更多的时间你也可以试试

```
 Inside c++ Object Mode 
```

对于设计模式，我认为一口气读完一本书并不是一个好主意。尝试从每个类别中列出您从事过的或您想在面试中谈论的创建性、结构性和行为性的几个设计模式。网上有很多关于它们的资源，并尝试完全理解它们中的每一个，而不是跳进书本而几乎迷路。

# cocoa - 表格视图中的复选框

> ID：1021346
> 
> 赞同：3
> 
> 时间：2009-06-20T10:04:47.660
> 
> 标签：cocoa, checkbox, tableview

我在将复选框放入 UITableView 时遇到了麻烦。我在这里发布了我的一部分代码。

```
- (NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSButtonCell *cell=[[NSButtonCell alloc] init];
    NSString *strDisplayPlaylistName;
    strDisplayPlaylistName=[playListNameArray objectAtIndex:row];
    [cell setTitle:strDisplayPlaylistName];
    [cell setAllowsMixedState:YES];
    [cell setButtonType:NSSwitchButton];
    return cell; 
}

- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {          
    NSCell *aCell = [aTableColumn dataCellForRow:rowIndex];
    [aCell setNextState];
    //NSCell *aCell=[aAddedCells objectAtIndex:rowIndex];
    //[aCell setNextState];
} 
```

我得到了 UITableView 中的复选框。但问题是我无法取消选中这些按钮。有没有更多的事情要做。我是可可编程的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T20:18:28.533

你错过了几个重要的部分。您需要更新模型（数据结构）以响应 tableValue:setObjectValue:forTableColumn:row: 消息，以便您可以正确地从 tableView:objectValueForTableColumn:row: 方法返回新值。

以下是一些表数据源方法，假设您有一个“myRows”数组，其中填充了具有“booleanAttribute”属性的对象。

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return [myRows count];
}

- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    BOOL value = [[myRows objectAtIndex:row] booleanAttribute];
    return [NSNumber numberWithInteger:(value ? NSOnState : NSOffState)];
}

- (void)tableView:(NSTableView *)tableView setObjectValue:(id)value forTableColumn:(NSTableColumn *)column row:(NSInteger)row {          
    [[myRows objectAtIndex:row] setBooleanAttribute:[value booleanValue]];
} 
```

您还应该在界面生成器中设置表格单元格。您可以将配置为标准复选框的按钮单元格直接拖到表格列之一上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T23:31:25.680

我不确定您为什么要在代码中创建单元格。您只需将单元格拖到 Interface Builder 中的表格列上即可。

此外，setObjectValue: 是您响应单元格状态变化的地方。用户已经将单元格的状态更改为关闭；然后你发送`setNextState`并改回来。这就是单元格似乎没有取消选中的原因：您不断重新检查它。

您需要做的是根本不触摸单元格，而是将对象值（对于此列，它可能是一个布尔 NSNumber，包含`YES`或`NO`）作为模型中适当属性的新值。

当然，还要确保该列设置为可编辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T01:24:51.993

如果您将 NSTableView 内容模式设置为“基于单元格”，则当您将复选框移到上方时，它将是“基于视图”。

# ruby-on-rails - content_for 内部表单生成器

> ID：1021353
> 
> 赞同：0
> 
> 时间：2009-06-20T10:08:49.790
> 
> 标签：ruby-on-rails, formbuilder, content-for

我有一个专门用于使用 jQuery 进行 DateTime 的表单构建器字段。我想做的是让助手能够通过 content_for 将内容推送到我的 <head> 中。有任何想法吗？

谢谢，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T12:07:22.703

您可以在 @template 实例变量上调用任何辅助方法。它保存当前的模板上下文。

```
class MyBuilder < ActionView::Helpers::FormBuilder

  def this_method_appends_content_for(content)
    @template.content_for(:head, content)
  end

end 
```

# c++ - 在#ifndef 中包装#includes - 增加任何价值？

> ID：1021357
> 
> 赞同：4
> 
> 时间：2009-06-20T10:10:20.460
> 
> 标签：c++, include, c-preprocessor

我继承了**C** /C++ 代码库，并且在许多 .cpp 文件中，`#include`指令被包装在 #ifndef 中，并且标头内部单个 include `#define`。

例如

```
#ifndef _INC_WINDOWS
#include <windows.h>
#endif 
```

和 windows.h 看起来像

```
#ifndef _INC_WINDOWS
#define _INC_WINDOWS
...header file stuff....
#endif // _INC_WINDOWS 
```

我认为这样做是为了加快代码的编译/预处理。

我认为这很丑陋并且过早的优化，但是由于该项目从干净开始有 5 分钟的构建时间，我不想让事情变得更糟。

那么这种做法是否会增加任何价值或加快速度呢？清理它们可以吗？

更新：编译器是 MSVC (VS2005)，平台是 Win32/WinCE

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-20T10:28:12.373

值得知道的是，某些实现具有`#pragma once`和/或 header-include-guard 检测优化，并且在这两种情况下，预处理器将自动跳过打开、读取或处理它之前包含的头文件。

所以在那些编译器上，包括 MSVC 和 GCC，这种“优化”是没有意义的，它应该是头文件的责任来处理多重包含。但是，这可能是对#include 效率非常低的编译器的优化。代码是否具有病态可移植性，并且`<windows.h>`不是指众所周知的Win32头文件，而是一些用户定义的同名头文件？

头文件也可能没有多重包含保护，并且此检查实际上是必不可少的。在这种情况下，我建议更改标题。标题的全部意义在于替代有关该位置的复制和粘贴代码：包含标题不应占用三行。

编辑：

既然你说你只关心 MSVC，我会：

*   do a mass edit, time the build just to make sure the previous programmer doesn't know something I don't. Maybe add `#pragma once` if it helps. Use precompiled headers if all this really is slowing things down.
*   Ignore it, but don't use the guards for new files or for new `#include`s added to old files.

Depending on whether I had more important things to worry about. This is a classic Friday-afternoon job, I wouldn't spend potentially-productive time on it ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T10:14:30.183

如果包含一个文件，则必须读取整个文件，甚至打开/关闭文件的开销也可能很大。通过将保护指令放在`include`语句周围，它永远不必打开。与这些问题一样，正确的答案是：尝试取出指令周围的`ifndef`/守卫并获取秒表......`endif``include`

# c# - 帮助驾驶执照号码验证正则表达式

> ID：1021362
> 
> 赞同：6
> 
> 时间：2009-06-20T10:14:56.907
> 
> 标签：c#, regex

我正在尝试验证我正在制作的表格的驾驶执照。我试图使用单个正则表达式。

1.  最大长度 9 个字符
2.  仅限字母数字字符
3.  必须至少有 4 个数字字符
4.  不得超过 2 个字母字符
5.  第三个和第四个字符必须是数字

我是正则表达式的新手，我正在谷歌上搜索试图解决它。对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T10:27:27.570

它必须是一个正则表达式吗？我会通过将它们分开来保持简单：

```
static bool IsValid(string input)
{
    return Regex.IsMatch(input, @"^[A-Za-z0-9]{4,9}$") // length and alphanumeric
        && Regex.IsMatch(input, "^..[0-9]{2}") // 3rd+4th are numeric
        && Regex.IsMatch(input, "(.*[0-9]){4}") // at least 4 numeric
        && !Regex.IsMatch(input, "(.*[A-Za-z]){3}"); // no more than 2 alpha
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T10:24:35.610

尝试仅使用一个正则表达式来解决此问题可能有点困难，因为您需要跟踪多个事物。我建议您尝试分别验证每个属性（除非这样做有意义）。

例如，您可以通过检查包含所有字母数字字符和[量词的](http://www.regular-expressions.info/repeat.html)[字符类](http://www.regular-expressions.info/charclass.html)来轻松验证第一个和第二个属性，该量词告诉它最多应该出现 9 次：

```
^[0-9a-zA-Z]{4,9}$ 
```

[锚点](http://www.regular-expressions.info/anchors.html) `^`并确保这`$`实际上将匹配整个字符串，而不仅仅是它的一部分。正如 Marc Gravell 指出的那样，字符串`"aaaaa"`将匹配表达式`"a{3}"`，因为它也可以部分匹配。

检查第五个属性可以类似地完成，尽管这次我们不关心其余的：

```
^..[0-9]{2} 
```

这里`^`字符是字符串开头的[锚点](http://www.regular-expressions.info/anchors.html)，[点 ( `.`)](http://www.regular-expressions.info/dot.html)是任意字符的占位符，我们再次使用字符类和重复量词检查第三个和第四个字符是否为数字。

属性 3 和 4 可能最容易通过遍历字符串并保持计数器进行验证。

**编辑：** [Marc Gravell](https://stackoverflow.com/questions/1021362/noob-need-help-with-regex-im-lost/1021382#1021382)也为这两种使用正则表达式的情况提供了一个非常好的解决方案。没有想到那些。

如果您绝对需要在一个正则表达式中执行此操作，这将有点工作（并且可能既不快也不更具可读性）。基本上我会从枚举所有可能的选项开始，这样一个字符串可能看起来像。我在`a`这里用作字母字符`1`的占位符和数字的占位符。

我们至少需要四个字符 (3)，第三个和第四个总是固定为数字。对于四个字符的字符串，这让我们只有一个选择：

```
1111 
```

但是，五个字符的字符串可能会引入一个字母，但位置不同：

```
a1111
1a111
1111a 
```

和以前一样，全数字变体：

```
11111 
```

像这样继续下去，您可能可以为每种情况创建特殊规则（基本上我会将其分为“无字母”，“一个字母”和“两个字母”并为此枚举不同的模式。然后您可以将所有模式串在一起管道[( `|`)](http://www.regular-expressions.info/alternation.html)字符在正则表达式中用作替代字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-23T22:36:26.230

这可能会让你开始......

```
function utilities() {
function validateLicense(stateCode, licenseNumber) {
    // from http://www.uiia.org/documents/license_guidelines_08.pdf
    var oneToSevenNumeric = /^[0-9]{1,7}$/;
    var oneAlpha = /(.*[A-Za-z]){1}/;
    var oneAlphaPlusSeven = /^.[0-9]{7}$/;
    var twoAlpha = /(.*[A-Za-z]){2}/;
    var alphaPlusSixNumeric = /(.*[0-9]){6}$/;
    var threeToFiveNumeric = /(.*[0-9]){3,5}$/;
    var fiveToNineNumeric = /(.*[0-9]){5,9}/;
    var sixNumeric = /^[0-9]{6}$/;
    var sevenNumeric = /^[0-9]{7}$/;
    var sevenToNineNumeric = /^[0-9]{7,9}$/;
    var eightAreNumbers = /(.*[0-9]){8}/;
    var nineNumeric = /^[0-9]{9}$/;
    var nineAlphaChars = /^[A-Za-z0-9]{9}$/;
    var tenNumeric = /^[0-9]{10}$/;
    var elevenNumeric = /^.[0-9]{11}$/;
    var twelveNumeric = /^.[0-9]{12}$/;
    var hPlusEight = /([H][0-9]{8})$/;
    var sevenPlusX = /([H][0-9]{7}X)$/;

    if (stateCode == undefined || licenseNumber == undefined) {
        return "";
    }
    if (stateCode == 'AK') {
       return validateExpression(oneToSevenNumeric, licenseNumber, "Must be 1-7 numeric");
    }
    if (stateCode == 'AL') {
      return validateExpression(sevenNumeric, licenseNumber, "Must be 7 numeric");
    }
    if (stateCode == 'AR' || stateCode == 'MS') {
      return validateExpression(nineNumeric, licenseNumber, "Must be 9 numeric");
    }
    if (stateCode == 'AZ') { 
        if (nineNumeric.test(licenseNumber) == true) {
            return "";
        }
        if (oneAlpha.test(licenseNumber) && eightAreNumbers.test(licenseNumber)) {
            return "";
        }
        if (twoAlpha.test(licenseNumber) && threeToFiveNumeric.test(licenseNumber) && licenseNumber.length < 8) {
            return "";
        }
        return "Must be 1 Alphabetic, 8 Numeric; or 2 Alphabetic, 3-6 Numeric; or 9 Numeric";
    }
    if (stateCode == 'CA') {

        if (oneAlpha.test(licenseNumber) && oneAlphaPlusSeven.test(licenseNumber)) {
            return "";
        }
        return "Must be 1 alpha and 7 numeric";
    }
    if (stateCode == 'CO' || stateCode == 'CN' || stateCode == 'CT') {
        return validateExpression(nineNumeric, licenseNumber, "Must be 9 numeric");
    }
    if (stateCode == 'DC') {
        if (sevenNumeric.test(licenseNumber) || nineNumeric.test(licenseNumber)) {
            return "";
        }
        return  "Must be 7 - 9 numeric";
    }
    if (stateCode == 'DE') {
        if (oneToSevenNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 1 - 7 numeric";
    }
    if (stateCode == 'FL') {
        if (oneAlpha.test(licenseNumber) && twelveNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 1 alpha, 12 numeric";
    }
    if (stateCode == 'GA') {
        if (sevenToNineNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 7 - 9 numeric";
    }
    if (stateCode == 'HI') {
        if (nineNumeric.test(licenseNumber) || hPlusEight.test(licenseNumber)) {
            return "";
        }
        return "Must 'H' + 8 numeric; 9 numeric";
    }
    if (stateCode == 'ID') {
        if (nineNumeric.test(licenseNumber) || sixNumeric.test(licenseNumber) || (twoAlpha.test(licenseNumber) && alphaPlusSixNumeric.test(licenseNumber))) {
            return "";
        }
        return "Must 9 numbers or 6 numbers; or 2 char, 6 numbers ";
    }

    if (stateCode == 'IL') {
        if (oneAlpha.test(licenseNumber) && elevenNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must 1 character 11 numbers";
    }
    if (stateCode == 'IN') {
        if (tenNumeric.test(licenseNumber) || nineNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 9-10 numbers";
    }
    if (stateCode == 'IA') {
        if (nineAlphaChars.test(licenseNumber) || nineNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 9 alpha numbers";
    }
    if (stateCode == 'KS' || stateCode == 'KY') {
        if (nineNumeric.test(licenseNumber) || (oneAlpha.test(licenseNumber) && eightAreNumbers.test(licenseNumber) && licenseNumber.length == 9)) {
            return "";
        }
        return "Must be 1 alpha and 8 numeric";
    }
    if (stateCode == 'LA') {
        if (nineNumeric.test(licenseNumber) == true) {
            return "";
        }
        return "Must be 9 numeric";
    }
    if (stateCode == 'ME') {
        if (sevenNumeric.test(licenseNumber) || sevenPlusX.test(licenseNumber)) {
            return "";
        }
        return "Must be 7 numeric";
    }
    if (stateCode == 'MD' || stateCode == 'MI' || stateCode == 'MN') {
        if (oneAlpha.test(licenseNumber) && twelveNumeric.test(licenseNumber)) {
            return "";
        }
        return "1 Alphabetic, 12 Numeric";
    }
    if (stateCode == 'MA') {
        if ((oneAlpha.test(licenseNumber) && eightAreNumbers.test(licenseNumber) && licenseNumber.length == 9) || nineNumeric.test(licenseNumber)) {
            return "";
        }
        return "Must be 1 alpha, 8 numeric; 9 numeric";
    }

    if (stateCode == 'MO') {
        if ((oneAlpha.test(licenseNumber) && fiveToNineNumeric.test(licenseNumber) && licenseNumber.length < 11) || nineNumeric.test(licenseNumber)) {
            return "";
        }
        return "1 alpha - 5-9 Numeric or 9 numeric";
    }
    return "";
}

function validateExpression(expression, value, error) {
    if (expression.test(value) == true) {
        return "";
    }
    return error;
}

return {
    validateLicense: validateLicense,
    validateExpression: validateExpression
}; 
```

}

# xcode - Xcode：将现有文件添加到组和文件窗格会导致构建错误

> ID：1021371
> 
> 赞同：0
> 
> 时间：2009-06-20T10:20:14.510
> 
> 标签：xcode

我正在开发一个托管在 Beanstalk 中的项目，并且想访问我的 subversion 存储库中的一个文件。

我可以在基于 Web 的浏览器目录中清楚地看到文件“SoundEffect.h”和“SoundEffect.m”，但是在刷新和更新后，这些文件不会出现在 Xcode 左侧的“组和文件”窗格中Xcode。

我尝试“右键单击文件，然后为 SoundEffect.(h|m) 添加->现有文件”，它们都出现了。但是现在我的项目无法构建，并且出现奇怪的错误，例如

“_AudioServicesPlaySystemSound”，引用自：“_AudioServicesCreateSystemSoundID”，引用自：“_AudioServicesDisposeSystemSoundID”，引用自：

即使我没有使用这些文件。我很确定这些文件没有错误，因为我已在另一个项目中成功使用它们。

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T11:06:15.963

好的，找到了这个有帮助的[线程](https://stackoverflow.com/questions/683940/referencing-error-to-the-audiotoolbox-in-objective-c)。

我需要在 XCode 中添加框架 AudioToolbox.Framework。

# html - XHTML：为什么我的嵌套 UL 无效？

> ID：1021372
> 
> 赞同：3
> 
> 时间：2009-06-20T10:21:42.980
> 
> 标签：html, css, validation, xhtml

以下菜单在浏览器中运行良好，但我无法将其验证为 XHTML。我从我的 CSS Book 中取出了这个例子。它说它是对的，但似乎不是。

```
<ul id="leftNavi">
  <li>
    <a href="#" class="SCL">left menu1</a>
  </li>
  <li class="SCNL">left menu2</li>
  <ul id="subnavi">
    <li>
      <a href="#" class="inactive">menu2/1</a>
    </li>
    <li>
      <a href="#" class="inactive">menu2/2</a>
    </li>
    <li>
      <a href="#" class="inactive">menu2/3</a>
    <li>
  </ul>
  <li> 
    <a href="#" class="HCL">left menu3</a>
  </li>
</ul> 
```

这里是页面的链接：[http](http://www.yiip.de/arbeit/testlayout/standard_template.html) ://www.yiip.de/arbeit/testlayout/standard_template.html我说的是左侧菜单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T10:25:14.407

```
<ul id="leftNavi">
  <li ><a href="#" class="SCL">left menu1</a></li>
  <li class="SCNL">left menu2
    <ul id="subnavi">
      <li><a href="#" class="inactive">menu2/1</a></li>
      <li><a href="#" class="inactive">menu2/2</a></li>
      <li><a href="#" class="inactive">menu2/3</a></li>
    </ul>
  </li>
  <li><a href="#" class="HCL">left menu3</a></li>
</ul> 
```

你有几个问题：

1.  以 3 作为列表项的行没有正确的结束`<li>`元素；和
2.  该`subnav1`列表未包含在`<li>`元素中。它不能是另一个列表的直接子级，这是验证 HTML 的主要问题。

# java - 我如何在 Java 中进行补间？

> ID：1021374
> 
> 赞同：12
> 
> 时间：2009-06-20T10:23:22.960
> 
> 标签：java, animation

我正在研究用 Java 制作 2D 游戏，但遇到了动画问题：如何在 Java 中进行[补间](http://en.wikipedia.org/wiki/Tweening)？是否有任何库或者我可以找到绑定的东西？

另外，请理解我不想简单地移动图像，我想以一种在制作动画绘图时可以使用一些关键帧来填充中间帧以生成动画的方式进行变形。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2011-04-11T13:25:38.740

我为 Java 构建了一个通用补间引擎： [http ://code.google.com/p/java-universal-tween-engine/](http://code.google.com/p/java-universal-tween-engine/)

![标识](../Images/29c1478f4016da5a8d7cd8b47d23a37b.png)

补间可以应用于每个对象（不仅仅是图形对象，一切！），每个对象属性都可以补间，它也支持每个 Robert Penner 缓动方程。

此外，引擎被优化为在运行时不实例化任何东西（初始化期间除外），因此它可以用于 Android 游戏而不必担心垃圾收集器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T12:54:53.683

我认为您正在寻找[时间框架。](https://timingframework.dev.java.net/)

如果你想写富应用程序，我也可以推荐这本书《[肮脏的富客户端》。](http://filthyrichclients.org/)

另一种选择也是[jgoodies:Animation 库](http://www.jgoodies.com/freeware/animation/index.html)

# javascript - ASP.NET：在表单中按 Enter 键调用代码隐藏方法

> ID：1021386
> 
> 赞同：1
> 
> 时间：2009-06-20T10:28:46.630
> 
> 标签：javascript, asp.net

我有一个 asp.net 表单，它有 3 个文本框和一个 asp.net 链接按钮控件。我想在用户按下回车键时调用按钮单击事件处理程序方法。我使用 asp.net 面板及其默认按钮属性.它在 IE 中工作。但不能在其他浏览器中，如 firefox 等。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T12:28:12.363

这似乎是 FF3 的错误（不确定），但下面给出了修复的脚本 将其保留在页面末尾，以便它覆盖 ASP.NET 呈现的 WebForm_FireDefaultButton 方法。

var __defaultFired = false;

函数 WebForm_FireDefaultButton(event, target) { var element = event.target || 事件.srcElement；

```
if (!__defaultFired && event.keyCode == 13 && !(element && (element.tagName.toLowerCase() == "textarea"))) {
    var defaultButton;

    if (__nonMSDOMBrowser)
        defaultButton = document.getElementById(target);
    else
        defaultButton = document.all[target];

    if (defaultButton) {
        if(typeof(defaultButton.click) != "undefined")
            defaultButton.click();
        else
            eval(unescape(defaultButton.href.replace("javascript:", "")));

        event.cancelBubble = true;

        if (event.stopPropagation) event.stopPropagation();
        return false;
    }
}
return true; 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T16:47:03.990

您可以尝试**DefaultButton**属性（ASP.Net 2.0 及更高版本）。ASP.Net 窗体和面板控件都有一个**DefaultButton**属性。默认操作意味着回车键应该触发按钮单击。

```
<form id="Form1" defaultbutton="SubmitButton" runat="server">
  <asp:panel id="panel1" defaultbutton="anotherbutton" runat="server">
  </asp:panel>
</form> 
```

有一个已知的 FireFox 问题可以通过添加： `UseSubmitBehavior="False"` 到您的提交按钮来解决。此[博客](http://weblogs.asp.net/rternier/archive/2007/10/17/updatepanel-firefox-and-the-defaultbutton.aspx)描述了 UpdatePanel 中的问题和解决方案，它也可能在这里工作。

还要检查这个[问题](https://stackoverflow.com/questions/50033/asp-net-form-defaultbutton-error-in-firefox)，它与其他可能的解决方案有链接。

# html - POST'ing 到服务器以获取

> ID：1021394
> 
> 赞同：0
> 
> 时间：2009-06-20T10:39:34.237
> 
> 标签：html, iframe, xhtml

(First posting, so please be merciful if I'm off on some of the etiquette, markup, etc. :))

Server-side:

iframe-contents.php:

```
<?PHP

if($_POST['test-post-parameter'] == 'test-post-value'){
echo 'test-post-parameter successfully detected as "test-post-value".';
} else {
echo 'test-post-parameter either absent or of a different value than "test-post-value". :(';
}
?> 
```

* * *

OK, so lets say i request iframe-contents using

`bash$ wget --post-data='test-post-parameter=test-post-value' -O - http://example.com/iframe-contents.php`

The result would be:

```
test-post-parameter successfully detected as "test-post-value". 
```

* * *

If, however, I requested it using

```
`bash$ wget -O - http://example.com/iframe-contents.php` 
```

I would end up getting:

```
test-post-parameter either absent or of a different value than "test-post-value 
```

* * *

Now - lets say I have another file on the server, called `index.html`:

```
<html><head><title>PAGE_TITLE</title></head>
<body>
<iframe width="100%" height="100%" src="iframe-contents.php" />
</body> 
```

* * *

If I tried typing `http://example.com/index.html` into my browser, I would get `PAGE_TITlE` in my titlebar, with `test-post-parameter either absent or of a different value than "test-post-value". :(` in the body.

My question is this: How can I modify the iframe element so that I get?

`test-post-parameter successfully detected as "test-post-value".`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T10:52:45.833

You cannot. You can do it by using GET.

With POST: Maybe only if you make a temporary .php page, that has a form with that post value, and a javascript script that automatically post the form and redirects you to the iframe-contents.php

Something like this:

temp-iframe.php

```
<html><head>
</head>
<body onLoad="document.forms.myForm.submit()">
<form name="myForm" id="myForm" method="POST" action="iframe-contents.php">
<input type="hidden" name="test-post-parameter" value="test-post-value">
</form>
</body>
</html> 
```

And in the iframe src you add the: temp-ifram.php

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T10:49:30.597

I'm not sure you can do it for post parameters, but in case you will use get method you can pass parameters explicitly:

```
<html><head><title>PAGE_TITLE</title></head>
<body>
<iframe width="100%" height="100%" src="iframe-contents.php?test-post-parameter=value" />
</body> 
```

# php - Mediawiki：无效的编辑令牌

> ID：1021406
> 
> 赞同：1
> 
> 时间：2009-06-20T10:52:39.437
> 
> 标签：php, http, wiki, mediawiki, wikipedia

我使用带有 HTTP POST 的 API 在 Mediawiki (1.14) 中创建一个 wiki 页面：

1.  我需要一个编辑令牌
2.  它有效，我得到了一个新的令牌（例如：d96d72fae5e6c43b0b9f63d82ace366）
3.  我发送 HTTP POST 以使用我的新令牌创建新站点（类似于“d96d72fae5e6c43b0b9f63d82ace366+\”
4.  我收到一条错误消息**“无效令牌”**

我不明白为什么会收到此消息，因为我在 POST 请求中发送了一个新创建的令牌。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-22T14:30:59.853

您是否对令牌的终止字符进行了 URL 编码？您必须将其转换`+\`为`%2B%5C`. 您的 POST 请求应该类似于（减去换行符）：

```
action=edit&title=Talk:River%20Otters
&section=new
&summary=Otters%3F
&text=Anyone%20see%20any%20otters%20lately%3F
&watch
&basetimestamp=2009-06-22T13:52:41ZZ
&token=d96d72fae5e6c43b0b9f63d82ace366%2B%5C 
```

# python - 用于在 Python 中创建和验证 HTML 表单的包？- 用于 Google Appengine

> ID：1021411
> 
> 赞同：1
> 
> 时间：2009-06-20T11:01:14.863
> 
> 标签：python, html, google-app-engine, forms

Python 中是否有维护良好的包用于创建和验证 HTML 表单？我最终会在 Google Appengine 上部署它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T11:41:10.773

对于客户端验证，请查看[http://plugins.jquery.com/search/node/form+validate](http://plugins.jquery.com/search/node/form+validate)；对于服务器端，实际上几乎每个 Web 框架（web.py、django 等）都有自己的表单生成和验证库供您使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T16:15:31.157

您可以[通过](http://code.google.com/appengine/articles/djangoforms.html)`db.djangoforms.ModelForm`.

为了将客户端[Dojo](http://www.dojotoolkit.org/)功能与 Django 服务器端 Web 应用程序顺利集成，我会查看[dojango](http://code.google.com/p/dojango/)，它在 GAE（以及没有）下都可以正常工作。然而，dojango（目前为 0.3.1 版）还没有自动提供 Django 表单的客户端验证——这是即将发布的 0.4 版 dojango 的路线图，但我不知道你可以期待的时间范围它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T11:29:34.823

AppEngine 包括 Django 的表单框架（或其变体），我觉得它非常好。它还可以很好地与您的 ORM 配合使用（即获取模型的表单非常干燥）。唯一的潜在问题是缺乏客户端验证。

# iphone - xml解析器中奇怪的iPhone内存泄漏

> ID：1021413
> 
> 赞同：3
> 
> 时间：2009-06-20T11:02:46.030
> 
> 标签：iphone, objective-c, xml, memory-leaks, touchxml

**更新**：我编辑了代码，但问题仍然存在......

大家好，
这是我在这里的第一篇文章——我发现这个地方是解决我许多问题的好资源。通常我会尽力自己解决任何问题，但这次我真的不知道出了什么问题，所以我希望有人能帮助我。
我正在构建一个使用 TouchXML 解析几个 xml 文件的 iPhone 应用程序。我有一个类 XMLParser，它负责下载和解析结果。当我使用同一个 XMLParser 实例多次解析一个 xml 文件时，我遇到了内存泄漏。这是解析片段之一（只是相关部分）：

```
for(int counter = 0; counter < [item childCount]; counter++) {  
        CXMLNode *child = [item childAtIndex:counter];
        if([[child name] isEqualToString:@"PRODUCT"]) 
        {
            NSMutableDictionary *product = [[NSMutableDictionary alloc] init];
            for(int j = 0; j < [child childCount]; j++) {
                CXMLNode *grandchild = [child childAtIndex:j];
                if([[grandchild stringValue] length] > 1) {
                    NSString *trimmedString = [[grandchild stringValue] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
                    [product setObject:trimmedString forKey:[grandchild name]];
                }
            }

            // Add product to current category array
            switch (categoryId) {
                case 0:
                    [self.mobil addObject: product];
                    break;
                case 1:
                    [self.allgemein addObject: product];
                    break;
                case 2:
                    [self.besitzeIch addObject: product];
                    break;
                case 3:
                    [self.willIch addObject: product];
                    break;
                default:
                    break;
            }
            [product release];
        }

    } 
```

第一次，我解析 xml 没有泄漏显示在仪器中，下次我这样做时，我得到了很多泄漏（NSCFString / NSCFDictionary）。当我深入研究泄漏的对象时，
仪器将我指向**CXMLNode.m 中的这一部分：**

```
theStringValue = [NSString stringWithUTF8String:(const char *)theXMLString];
if ( _node->type != CXMLTextKind )
   xmlFree(theXMLString);
}

return(theStringValue); 
```

我真的花了很长时间并尝试了多种方法来解决这个问题，但到目前为止无济于事，也许我错过了一些重要的东西？

任何帮助都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T11:18:55.593

问题可能出在这一行：

```
[self.mobil addObject:[product copy]]; 
```

通过调用副本，`product`您正在创建一个保留计数为 1 的新 NSMutableDictionary 实例。`mobil`但是，当您向其发送消息时，该实例将增加副本的保留计数`addObject:`，因此副本的保留计数现在为 2。一般来说，一个对象负责处理它自己的对象内存，所以任何时候你发消息`setFoo:`或`addObject:`，你可以直接传递对象，即使它是自动释放的，或者你打算在调用后立即释放它；如果需要保留它，接收者有责任保留您传递的对象。

因为您没有将副本分配给任何变量，所以您没有指针可用于减少副本的保留计数，因为您不再对它感兴趣，因此即使`mobil`在某个时候释放产品副本，副本永远不会达到 0 的保留计数。您`[product release]`在 for 循环末尾的语句会释放原始`product`对象，而不是您创建的副本。

相反，请尝试以下方法，看看仪器是否更快乐：

```
[self.mobil addObject:product]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T11:54:14.617

简单来说，每次使用时`copy`，还得在某处使用`release`/ 。`autorelease`

在这种情况下，更简单的答案是一开始就不要使用，因为在复制`copy`原始版本之后，您没有对原始版本做任何事情。`product`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T15:41:05.300

我自己解决了这个问题。这有点愚蠢，但也许有人可能会遇到同样的事情，所以我要把它贴在这里。

1）我将可变数组设置为这样的实例变量：

```
@interface XMLParser : NSObject {

// ...  
NSMutableArray *mobil;  
// ...  
}   
@property(nonatomic, retain) NSMutableArray *mobil;  
@end 
```

每次我想恢复里面的新数据时，我都会这样做：
self.mobil = nil;
这不是我想做的，所以这是更好的方法：
[self.mobil removeAllObjects];

2) dealloc 方法必须像这样来修复泄漏（因为 mobil 被定义为属性）：
-(void)dealloc {
[mobil release];
self.mobil = 无；
}

唷，这需要做很多工作才能找到 - 希望它可以节省其他人一些时间:-)

# delphi - 德尔福 2009 文档

> ID：1021414
> 
> 赞同：0
> 
> 时间：2009-06-20T11:03:24.500
> 
> 标签：delphi, documentation, delphi-2009

新的 Delphi IDE (2009) 是否附带一些文档？（有点像带有 VS 的 MSDN）。你在哪里可以得到它？（想看看）

文档好吗？

我在 21 天内拿到了一份 Delphi。Delphi对初学者有好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T11:09:07.657

这一切都可以从 Embarcadero 网站获得：http: [//docs.embarcadero.com/products/rad_studio/](http://docs.embarcadero.com/products/rad_studio/) CHM (WinHelp) / PDF / HTML 格式。（不知道好不好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T13:12:52.960

有一个[公共 wiki](http://delphi.wikia.com/wiki/Delphi_Wiki)是由 Nick Hodges（*当时*的 Delphi 产品经理）创建的。虽然不确定内容的质量！

关于这本书：这不是您问题的完全答案，而是尝试通过[Marco Cantu](http://www.marcocantu.com/)掌握 Mastering Delphi 。它真的是我读过的关于 Delphi 的最好的书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-22T13:40:36.850

Delphi 2009 的一件很酷的事情是，当您将鼠标悬停在源代码上时，它们会在您获得的提示中加载写在每个函数上方的摘要标签。如果你按下 F1，你会得到同样的东西，但是这样可以节省点击和等待。

# php - 在 PHP 中分割文本

> ID：1021417
> 
> 赞同：5
> 
> 时间：2009-06-20T11:08:52.103
> 
> 标签：php, regex, text, split

我想知道有没有办法像这样拆分文本：

123456789 转 123-456-789

至于每3个字符后添加“-”？

只是想知道，因为我知道相反，但如何做到这一点是我的头。;)

如果文本是

```
ABCDEFGHI OR A1B2C3D4E or any other format 
without any space between the characters ! 
```

语言：仅限 PHP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-20T11:43:04.110

```
<?php
$i = '123456789';
echo 'result: ', wordwrap($i, 3, '-', true);
```

印刷

```
结果：123-456-789
```

见[http://php.net/wordwrap](http://php.net/wordwrap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T11:22:56.677

我不是简单字符串提取（尤其是固定长度提取）的正则表达式的忠实粉丝，更喜欢它们用于稍微复杂的东西。几乎每种语言都有一个子字符串函数，因此假设您的输入已经过验证，这是一个简单的（伪代码，因为您没有指定语言）：

```
s = substring (s,0,3) + "-" + substring (s,3,3) + "-" + substring (s,6,3) 
```

如果你想要一个可变长度字符串的每三个字符（最后是奇数大小）：

```
t = ""
sep = ""
while s != "":
    if s.len <= 3:
        t = t + sep + s
        s = ""
    else:
        t = t + sep + substring (s,0,3)
        s = substring (s,3)
    sep = "-"
s = t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T11:19:43.347

为了完整起见，这里有一个 Python 解决方案：

```
>>> a = "123456789"
>>> a[0:3] + "-" + a[3:6] + "-" + a[6:9]
'123-456-789' 
```

由于您更新了问题以指定 PHP 解决方案，因此应该可以：

```
substr($a, 0, 3) . "-" . substr($a, 3, 3) . "-" . substr($a, 6, 3) 
```

有关此功能的更多信息，请参阅[`substr`](http://nz.php.net/substr)。这不仅适用于数字，也适用于字母字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T11:32:08.623

我认为这可以在具有前瞻性的正则表达式中完成：

```
s/(.{3})(?=.)/$1-/g 
```

既然您在评论中提到了 PHP：

```
preg_replace ("/(.{3})(?=.)/", "$1-", $string); 
```

*编辑*：VolkerK 显示后`wordwrap`，我`chunk-split`在文档中找到：

```
$new_string = chunk_split ($string, 3, '-'); 
```

这样做的好处是，当字符串中有空格时它也可以工作（自动换行更愿意在空格处中断）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T11:39:44.490

另一个 Python 版本：

```
>>> x="123456789"
>>> out=[x[i:i+3] for i in xrange(0, len(x), 3)]
>>> print "-".join(out)
123-456-789 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-20T11:40:52.757

对于任何语言：

*   创建一个名为“result”的空字符串变量
*   创建一个整数计数器变量“i”，它会递增直到*原始*字符串的长度（带有数字的字符串）
*   将原始字符串中的每个字符附加到“结果”
*   如果 i 模 3（通常是 % 或 mod）为零，则在“结果”后添加一个破折号

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T11:15:25.727

在 Perl 中：

```
#!/usr/bin/perl

use strict;
use warnings;

my $string = "123456789";
$string =~ /(\d{3})(\d{3})(\d+)/;

print "$1-$2-$3" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T11:17:43.193

您可以使用（以及其他方式）正则表达式匹配和替换来做到这一点。确切的语法取决于您使用的工具或编程语言。例如，在 Perl 中执行此操作的一种方法是

```
$a = "123456789";
$a =~ s/(\d{3})/$1-/g;
chop($a);
print $a; 
```

第 2 行将每 3 位数字替换为相同的 3 位数字和一个破折号。使用chop() 我们删除尾随的破折号。

这里还有一个问题。当字符串不包含 3 位数的倍数时该怎么办？如果允许使用此类字符串，则需要修改上述代码段。

此外，根据案例的具体情况，您可能会使用简单的子字符串替换或字符串切片来摆脱困境。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T11:37:59.207

另一个 Perl 示例。这不会删除小于三位数的最终组，而只会留下小于三位数的初始组。*它基于Learning Perl*（第 5 版第 212 页）中的“货币数字”示例（相当无耻）：

```
#!/usr/bin/env perl
use strict;
use warnings;

print "Gimme' a number: ";
chomp(my $number = <STDIN>);

1 while ($number =~ s/([0-9]{3})([0-9]+)/$1-$2/);

print "Now it's $number\n"; 
```

# c# - 如何以编程方式在 C# 中为字符串/文本分配 Control.Text 属性下划线？

> ID：1021422
> 
> 赞同：3
> 
> 时间：2009-06-20T11:13:32.470
> 
> 标签：c#

如何以编程方式在 C# *windows 应用*程序中为字符串/文本分配 Control.Text 属性下划线（使用粗体和斜体）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T11:30:44.463

控件提供属性“字体”。您可以通过使用现有字体作为原型来分配它并定义所需的样式信息。

此代码段使所有顶部控件的所有字体变为粗体、下划线和斜体：

```
foreach (Control item in this.Controls)
{
   item.Font = 
      new Font
         (
            item.Font, 
            FontStyle.Underline | FontStyle.Bold | FontStyle.Italic
         );
} 
```

弗洛

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T11:24:17.190

您需要 Font 属性。

您不能将 Font 的下划线与其他属性一起设置 - 因为它们是只读的 - 所以您需要创建一个新的 Font 对象并将其分配给 Font 属性。有几个构造函数采用粗体、斜体和下划线属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T11:25:32.960

假设您的控件是一个名为 myLabel 的标签

```
Font myFont = new Font(myLabel.Font,FontStyle.Bold|FontStyle.Italic|FontStyle.Underline);
myLabel.Font = myFont; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T11:22:06.087

只需更改 Control.Font 属性。Font 类具有用于创建粗体/斜体/下划线字体的构造函数。

# java - 圆形包装 - java

> ID：1021426
> 
> 赞同：1
> 
> 时间：2009-06-20T11:15:07.910
> 
> 标签：java, swing, math, packing

我的任务是画一个圆圈，然后在不接触边的情况下用最多的圆圈填充。我可以画圆，我可以制作循环以六边形/蜂窝格式打包圆，但无法控制它们是在圆内还是在圆外。

我用过这个：g.drawOval(50, 50, 300, 300); 指定我的圈子。鉴于我实际上指定了一个正方形作为我的边界，我实际上无法确定圆的边界在哪里。所以我基本上是在包装满是圆圈的正方形而不是满是圆圈的圆圈。

有人可以指出我正确的方向吗？我是java新手，所以不确定我是否以完全错误的方式完成了这项工作。我的代码如下。我有另一个框架类和另一个主类。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class DrawCircle extends JPanel
{
    private int width, height, diameter;
    public DrawFrame d;

    public DrawCircle()
    {
        width = 400;
        height = 400;
        diameter = 300;
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(Color.blue);
        g.drawOval(50, 50, 300, 300);

        for(int i=50; i<200; i=i+20)
        {
            for(int j=50; j<350; j=j+10)
            {
                g.drawOval(j, i, 10, 10);
            }
        }

        for(int i=60; i<200; i=i+20)
        {
            for(int j=55; j<350; j=j+10)
            {
                g.drawOval(j, i, 10, 10);
            }
        }

        for(int i=330; i>190; i=i-20)
        {
            for(int j=340; j>40; j=j-10)
            {
                g.drawOval(j, i, 10, 10);
            }
        }

        for(int i=340; i>190; i=i-20)
        {
            for(int j=345; j>40; j=j-10)
            {
                g.drawOval(j, i, 10, 10);
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T11:46:25.193

所有这些神奇的数字让我有点畏缩。您是 Java 新手，而且它是家庭作业，所以我理解您为什么要这样做，但如果您将来进行大量编程，我不建议您这样做。

您需要一种算法或配方来确定内部的小圆圈何时落在您要打包的大圆圈之外。想想你可能会这样做的方式：

1.  如果大圆和小圆的圆心距离大于它们的半径差，则小圆将与大圆重叠或完全落在大圆之外。

您可以将此检查添加到您的代码中：就在绘制圆圈之前，执行此检查。仅当该圆圈通过时才绘制。

暂时不用担心 Java；在一张纸上给自己画一幅画，画出封闭的圆圈，看看这个说法是否正确。然后考虑它可能无法涵盖的任何角落情况，就像检查一样。

我再提两个建议。首先，在没有计算机的情况下手动完成一次，这样您就会看到“正确”答案的样子。其次，看看是否可以将圆的计算与绘图部分分开。它可能会使您的工作更轻松，因为您可以一次专注于一件事。这叫做“分解”。您可以通过将复杂问题分解成更小、更易于管理的部分来解决它们。在这种情况下，也称为“模型-视图分离”。有一天你可能需要知道这一点。

Maybe another way to think about this problem would be to imagine a 2D arrangement of circles, packed in their closest arrangement, extending to infinity in both the x- and y-directions. Now take your enclosing circle, put it on top of the 2D arrangement, and eliminate all the circles that overlap the big circle. I don't know if it'll be optimal, but it's easy to visualize.

# c++ - 类 COM 接口警告非虚拟析构函数

> ID：1021430
> 
> 赞同：2
> 
> 时间：2009-06-20T11:16:17.767
> 
> 标签：c++, com, abstract-class, virtual-destructor

有没有办法告诉 gcc 它正在编译的抽象类不需要虚拟析构函数（就像 COM 对象从来没有一样）？例如 nsISupports 总是抱怨缺少虚拟析构函数。关闭警告无济于事，因为我可能有非 COM 类，我想要这个警告。

因此 __attribute__((com_interface)) 已被弃用，仅更改了 vtable 布局。是否还有另一个 __attribute__ 可以告诉编译器我不想被警告该类缺少析构函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T12:56:41.450

缺少虚拟 dtor 警告是有原因的 - 主要是因为它是追踪调试的噩梦，尤其是在大型和复杂的代码库中
您可能有一个非常具体的原因这样做，但问问自己，如果一个类被重构会发生什么这样它的用法会在以后发生变化？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T14:57:14.263

我认为您应该重新考虑禁用此警告。它的存在是有原因的。今天不在您的类中放置虚拟析构函数可能是正确的，但您无法准确预测您的类将来将如何使用。

类使用方式的细微变化可能会导致下一个开发人员花费数小时来寻找资源泄漏。帮那个人一个忙，现在让析构函数成为虚拟的。

你也可能想问问自己

> 通过使其非虚拟化我可以获得什么

你提到有一个抽象类，所以我假设它至少有一个虚拟函数。因此，使析构函数为虚拟不会向对象添加 v-table，它只是将其扩展为包含另一个成员。

我看不出使这个非虚拟化有什么真正的好处。只有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T12:38:57.007

您可能想要使用一对[诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas)。否则，`#pragma GCC system_header`将禁用给定文件中的*所有*警告。

# iphone - UIStringDrawing 更改字体颜色 - 可可触摸

> ID：1021433
> 
> 赞同：3
> 
> 时间：2009-06-20T11:19:31.583
> 
> 标签：iphone, cocoa-touch

UIFont 似乎没有管理颜色，有没有办法使用 UIStringDrawing.h 或特别是更改字体颜色：

```
- (CGSize)drawInRect:(CGRect)rect withFont:(UIFont *)font 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T13:30:34.237

看看`UIColor`。具体来说：

```
- (void) setFill; 
```

例如：

```
[[UIColor redColor] setFill];
[myString drawInRect:rect withFont:font]; 
```

其他方法包括`setStroke`并且仅`set`设置填充和描边。字体使用填充颜色。

# jquery - Jeditable 异步恢复错误

> ID：1021444
> 
> 赞同：4
> 
> 时间：2009-06-20T11:24:41.760
> 
> 标签：jquery, jeditable

我一直在使用 JQuery 的 JEditable 插件，我想向插件返回错误以指示它恢复到以前的值并向用户显示错误。我使用同步 ajax 调用来工作，但我更喜欢使用异步回调。我必须到目前为止的代码如下。

```
$("#editbox").editable(submitEdit, { 
     indicator : "Saving...",
     tooltip   : "Click to edit...",
     name : "Editable.EmailAddress",
     id   : "elementid",
     type : "text",
     submit  : "<span class=\"mini_button\">Ok</span>",
     cssclass : "edit_text"
});
function submitEdit(value, settings)
{ 
     var edits = new Object();
     var origvalue = this.revert;
     var textbox = this;
     edits[settings.name] = [value];
     var returned = $.ajax({
                        url: "http://someurl.com/edit/", 
                        type: "POST",
                        /*async: false,*/
                        data : edits,
                        dataType : "json",
                        complete : function (XMLHttpRequest, textStatus) 
                                   {
                                       alert("Setting back to original value " +origvalue);
                                       $(textbox).html(origvalue);
                                   }
                     });

      /*var response = $.secureEvalJSON(returned.responseText);
      if (response.errorMsg != '')
      {    
          $("#ajaxNotify").addClass("ajax_error").html(response.errorMsg); 
          return(this.revert);                     
      }*/
      return(value);
 } 
```

我还在评论中包含了我的同步实现，效果很好。在服务器负载较高的情况下，这将锁定浏览器，直到后端编辑完成。如果编辑失败，我宁愿返回值并在稍后恢复它。

谢谢，

**编辑**

在尝试了 jitters 建议并让它在 IE8 中运行后，我意识到问题出在 FF 和 chrome 上，仅当我单击按钮**时**。如果我单击该字段，编辑然后按 Enter 一切都很好。回调触发并且值被重置。

如果我单击该字段，编辑然后单击确定按钮并且不接收和验证错误，则表单将保持活动状态并坐在那里。如果收到该部分执行的错误，则文本值将恢复为原始值，但是我无法再次单击该字段，似乎 jeditable 已解除绑定。

我可以确认在 firebug 中收到了帖子和响应，因此 ajax 正在触发。

{"errorMsg":""}

如果我按下回车键，为什么这在所有浏览器中都能完美运行，但如果我单击确定按钮则不行？无论哪种方式都执行相同的代码，并且按钮肯定会正确提交表单。

解除绑定的事情也只发生在按下按钮时。

有没有人有任何使用 jeditable 和处理诸如此类的服务器端验证问题的示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T12:12:24.567

这根本行不通？

```
...
complete : function (xhr, textStatus) {
  $.secureEvalJSON(xhr.responseText);
  if (response.errorMsg != '') {
    $("#ajaxNotify").addClass("ajax_error").html(response.errorMsg);
    alert("Setting back to original value " +origvalue);
    $(textbox).html(origvalue);
  }
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-09T17:44:27.443

还有另一种方式，可以考虑 jeditable onerror 函数。

```
...
onerror: function(settings, original, xhr) {
  $.secureEvalJSON(xhr.responseText);
  if (response.errorMsg != '') {
    var origvalue = ...;
    $("#ajaxNotify").addClass("ajax_error").html(response.errorMsg);
    console.log("Setting back to original value " + origvalue);
    $(original).html(origvalue);
  }
}
... 
```

# c# - 反映属性以获取属性。当它们在别处定义时怎么办？

> ID：1021447
> 
> 赞同：4
> 
> 时间：2009-06-20T11:26:22.520
> 
> 标签：c#, reflection, attributes, instance, propertyinfo

我有一个这样的类酒吧：

```
class Foo : IFoo {
  [Range(0,255)]
  public int? FooProp {get; set}
}

class Bar : IFoo
{
  private Foo foo = new Foo();
  public int? FooProp { get { return foo.FooProp; }
                       set { foo.FooProp= value; } } 
} 
```

我需要找到仅反映在属性 Bar.FooProp 上的属性 [Range(0,255)]。我的意思是，当我当前正在解析时，道具是在类实例（.. new Foo()）中而不是在类中装饰的。事实上 Bar.FooProp 没有属性

编辑

我在接口的定义上移动了属性，所以我要做的是解析继承的接口来找到它们。我可以这样做，因为 Bar 类必须实现 IFoo。在这种特殊情况下，我很幸运，但是当我没有接口时问题仍然存在......我会注意下次

```
foreach(PropertyInfo property in properties)
{
  IList<Type> interfaces = property.ReflectedType.GetInterfaces();
  IList<CustomAttributeData> attrList;
  foreach(Type anInterface in interfaces)
  {
    IList<PropertyInfo> props = anInterface.GetProperties();
    foreach(PropertyInfo prop in props)
    {
      if(prop.Name.Equals(property.Name))
      { 
        attrList = CustomAttributeData.GetCustomAttributes(prop);
        attributes = new StringBuilder();
        foreach(CustomAttributeData attrData in attrList)
        {
            attributes.AppendFormat(ATTR_FORMAT,
                                        GetCustomAttributeFromType(prop));
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-19T19:55:53.807

不久前我遇到过类似的情况，我在接口中的方法上声明了一个属性，我想从实现该接口的类型的方法中获取该属性。例如：

```
interface I {
  [MyAttribute]
  void Method( );
}

class C : I {
  void Method( ) { }
} 
```

下面的代码用于检查该类型实现的所有接口，查看给定`method`实现的接口成员（使用`GetInterfaceMap`），并返回这些成员的任何属性。在此之前，我还检查了方法本身是否存在该属性。

```
IEnumerable<MyAttribute> interfaceAttributes =
  from i in method.DeclaringType.GetInterfaces( )
  let map = method.DeclaringType.GetInterfaceMap( i )
  let index = GetMethodIndex( map.TargetMethods, method )
  where index >= 0
  let interfaceMethod = map.InterfaceMethods[index]
  from attribute in interfaceMethod.GetCustomAttributes<MyAttribute>( true )
  select attribute;

...

static int GetMethodIndex( MethodInfo[] targetMethods, MethodInfo method ) {
  return targetMethods.IndexOf( target =>
         target.Name == method.Name
      && target.DeclaringType == method.DeclaringType
      && target.ReturnType == method.ReturnType
      && target.GetParameters( ).SequenceEqual( method.GetParameters( ), PIC )
  );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T11:37:51.297

在查看 时`FooProp`，没有任何东西可以识别 a 的存在`Foo`（在任何时候）。也许您可以添加一个属性来识别该`foo`字段，并对其进行反思（通过`FieldInfo.FieldType`）？

# java - 片段澄清字节数组到端口号

> ID：1021463
> 
> 赞同：1
> 
> 时间：2009-06-20T11:37:10.080
> 
> 标签：java, arrays, byte

我有一个字节数组，其中包含 6 个字节，最后 2 个表示端口号，同时搜索两种将这些最后一个字节转换为端口号的方法，我遇到了这个片段，

```
 int port = 0;
        port |= peerList[i+4] & 0xFF;
        port <<= 8;
        port |= peerList[i+5] & 0xFF; 
```

它有效，但我需要澄清它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T11:42:32.707

```
 int port = 0;                       // Start with zero
    port |= peerList[i+4] & 0xFF;       // Assign first byte to port using bitwise or.
    port <<= 8;                         // Shift the bits left by 8 (so the byte from before is on the correct position)
    port |= peerList[i+5] & 0xFF;       // Assign the second, LSB, byte to port. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T11:42:54.483

> ```
>  =======================
>   |  byte 5  |  byte 6  |
>   |----------|----------|
>   | 01010101 | 01010101 |
>   ======================= 
> ```

基本上，它需要字节＃5，向左移位8位，`0101010100000000`然后使用按位或运算符将字节6放在零的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T11:41:03.583

代码只是从数组中取出最后 2 个字节并将它们用作大端数。

通常在网络数据包中，端口号以大端序传输（意味着地址较低的字节更重要）。

该代码将字节号 i+4 用作端口号的 MSB，字节 i+5 用作端口号的 LSB。

# python - 如果该属性在派生类中被覆盖，如何调用基类的属性？

> ID：1021464
> 
> 赞同：93
> 
> 时间：2009-06-20T11:37:14.667
> 
> 标签：python, inheritance, properties, overloading, descriptor

我正在将我的一些类从广泛使用 getter 和 setter 更改为更 Pythonic 使用属性。

但是现在我被卡住了，因为我以前的一些 getter 或 setter 会调用基类的相应方法，然后执行其他操作。但是如何通过属性来实现呢？如何调用父类中的属性getter或setter？

当然，仅调用属性本身就会产生无限递归。

```
class Foo(object):

    @property
    def bar(self):
        return 5

    @bar.setter
    def bar(self, a):
        print a

class FooBar(Foo):

    @property
    def bar(self):
        # return the same value
        # as in the base class
        return self.bar # --> recursion!

    @bar.setter
    def bar(self, c):
        # perform the same action
        # as in the base class
        self.bar = c    # --> recursion!
        # then do something else
        print 'something else'

fb = FooBar()
fb.bar = 7 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2009-06-20T11:51:38.787

您可能认为您可以调用由属性调用的基类函数：

```
class FooBar(Foo):

    @property
    def bar(self):
        # return the same value
        # as in the base class
        return Foo.bar(self) 
```

虽然这是我认为最明显的尝试 -**它不起作用，因为 bar 是一个属性，而不是一个可调用的。**

但是属性只是一个对象，用getter方法找到对应的属性：

```
class FooBar(Foo):

    @property
    def bar(self):
        # return the same value
        # as in the base class
        return Foo.bar.fget(self) 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2009-06-20T11:46:49.080

[`super()`](http://docs.python.org/3.0/library/functions.html?highlight=super#super)应该做的伎俩：

```
return super().bar 
```

在 Python 2.x 中，您需要使用更详细的语法：

```
return super(FooBar, self).bar 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-06-06T17:14:41.853

有一种替代方法`super`不需要显式引用基类名称。

## 基类 A：

```
class A(object):
    def __init__(self):
        self._prop = None

    @property
    def prop(self):
        return self._prop

    @prop.setter
    def prop(self, value):
        self._prop = value

class B(A):
    # we want to extend prop here
    pass 
```

## 在B中，访问父类A的属性getter：

正如其他人已经回答的那样，它是：

```
super(B, self).prop 
```

或者在 Python 3 中：

```
super().prop 
```

这将返回属性的 getter 返回的值，而不是 getter 本身，但它足以扩展 getter。

## 在B中，访问父类A的属性setter：

到目前为止，我看到的最好的建议如下：

```
A.prop.fset(self, value) 
```

我相信这个更好：

```
super(B, self.__class__).prop.fset(self, value) 
```

在此示例中，两个选项是等效的，但使用 super 的优点是独立于`B`. 如果`B`要从也扩展属性的类继承，`C`则不必更新`B`'s 代码。

## B扩展A属性的完整代码：

```
class B(A):
    @property
    def prop(self):
        value = super(B, self).prop
        # do something with / modify value here
        return value

    @prop.setter
    def prop(self, value):
        # do something with / modify value here
        super(B, self.__class__).prop.fset(self, value) 
```

## 一个警告：

除非您的属性没有 setter，否则`B`即使您只更改其中一个的行为，您也必须同时定义 setter 和 getter。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-20T11:50:09.320

尝试

```
@property
def bar:
    return super(FooBar, self).bar 
```

虽然我不确定python是否支持调用基类属性。属性实际上是一个可调用对象，它使用指定的函数进行设置，然后在类中替换该名称。这很容易意味着没有可用的超级功能。

不过，您始终可以切换语法以使用 property() 函数：

```
class Foo(object):

    def _getbar(self):
        return 5

    def _setbar(self, a):
        print a

    bar = property(_getbar, _setbar)

class FooBar(Foo):

    def _getbar(self):
        # return the same value
        # as in the base class
        return super(FooBar, self)._getbar()

    def bar(self, c):
        super(FooBar, self)._setbar(c)
        print "Something else"

    bar = property(_getbar, _setbar)

fb = FooBar()
fb.bar = 7 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-19T22:51:59.263

[对马克西姆的回答](https://stackoverflow.com/a/37663266/102441)进行了一些小的改进：

*   使用`__class__`避免书写`B`。请注意，这`self.__class__`是 的运行时类型`self`，但`__class__` *没有* `self`是封闭类定义的名称。`super()`是 的简写`super(__class__, self)`。
*   使用`__set__`而不是`fset`. 后者特定于`property`s，但前者适用于所有类似属性的对象（描述符）。

```
class B(A):
    @property
    def prop(self):
        value = super().prop
        # do something with / modify value here
        return value

    @prop.setter
    def prop(self, value):
        # do something with / modify value here
        super(__class__, self.__class__).prop.__set__(self, value) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-05T13:01:49.093

您可以使用以下模板：

```
class Parent():
    def __init__(self, value):
        self.__prop1 = value

    #getter
    @property
    def prop1(self):
        return self.__prop1

    #setter
    @prop1.setter
    def prop1(self, value):
        self.__prop1 = value

    #deleter
    @prop1.deleter
    def prop1(self):
        del self.__prop1

class Child(Parent):

    #getter
    @property
    def prop1(self):
        return super(Child, Child).prop1.__get__(self)

    #setter
    @prop1.setter
    def prop1(self, value):
        super(Child, Child).prop1.__set__(self, value)

    #deleter
    @prop1.deleter
    def prop1(self):
        super(Child, Child).prop1.__delete__(self) 
```

**笔记！**所有的属性方法必须一起重新定义。如果不想重新定义所有方法，请改用以下模板：

```
class Parent():
    def __init__(self, value):
        self.__prop1 = value

    #getter
    @property
    def prop1(self):
        return self.__prop1

    #setter
    @prop1.setter
    def prop1(self, value):
        self.__prop1 = value

    #deleter
    @prop1.deleter
    def prop1(self):
        del self.__prop1

class Child(Parent):

    #getter
    @Parent.prop1.getter
    def prop1(self):
        return super(Child, Child).prop1.__get__(self)

    #setter
    @Parent.prop1.setter
    def prop1(self, value):
        super(Child, Child).prop1.__set__(self, value)

    #deleter
    @Parent.prop1.deleter
    def prop1(self):
        super(Child, Child).prop1.__delete__(self) 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2009-06-20T11:51:44.030

```
 class Base(object):
      def method(self):
        print "Base method was called"

    class Derived(Base):
      def method(self):
        super(Derived,self).method()
        print "Derived method was called"

    d = Derived()
    d.method() 
```

（除非我从你的解释中遗漏了什么）

# java - GAE For Java：邮 件 API

> ID：1021474
> 
> 赞同：3
> 
> 时间：2009-06-20T11:43:29.303
> 
> 标签：java, google-app-engine, email

我开发了一个发送邮件和短信的应用程序。我的问题是如何使用 Google App Engine for Java 发送格式良好的邮件，请向我推荐任何人。

谢谢， 阿比吉特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T11:54:08.127

当然，您使用[GAE 邮件服务](http://code.google.com/appengine/docs/java/overview.html)发送电子邮件。

如果您询问格式化，一种方法是使用[Velocity](http://velocity.apache.org/)模板。这也将为您提供一个不错的邮件合并功能：使用数据库中的值填充模板并发送您的邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T12:19:09.653

除了 duffymo 的回答之外，您还可以尝试使用[freemarker](http://freemarker.org/)或[StringTemplate](http://www.stringtemplate.org/)，它们是其他得到很好支持和有据可查的 Java 模板库。

# iis - 在 IIS 中运行 ASP.NET 页面时无法映射路径“MyAppName/App_GlobalResources”

> ID：1021475
> 
> 赞同：1
> 
> 时间：2009-06-20T11:44:31.687
> 
> 标签：iis, .net-3.5

我收到错误“无法映射路径 'MyAppName/App_GlobalResources'”，其中 MyAppName 是在 IIS 中注册的名称。我运行了 aspnet_regiis -i，还删除了 .NET 3.5 并重新安装了它，因为后来安装了 IIS。但是，当我运行 aspx 页面时，这是我得到的错误。

这个错误的真正含义是什么，解决方法是什么？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T14:48:03.363

我按照其他人面临的类似问题的建议修复了它

“在 RegEdit 中，授予 ASPNET 帐户对以下内容的完全访问权限：

HKEY_CLASSES_ROOT\接口{70B51430-B6CA-11D0-B9B9-00A0C922E750}"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-17T07:42:18.460

如果您使用的是 Windows 7，则右键单击 Visual Studio 并以管理员身份运行。它会解决你的问题。

# c# - 如何使用我的项目部署数据库？

> ID：1021481
> 
> 赞同：1
> 
> 时间：2009-06-20T11:49:44.017
> 
> 标签：c#, database, visual-studio-2008, deployment, windows-mobile

我有一个 Windows 移动项目，并在其中添加了一个小型 sqlite 数据库。我已将 db 文件上的“复制到输出目录”设置为“始终复制”。但是如何让数据库与项目一起部署？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T12:37:53.343

如果您的意思是“当我按 F5 时如何让 Visual Studio 部署文件”，那么您需要将“构建操作”设置为“内容”。如果您的意思是“如何将数据库与我的应用程序一起部署到最终用户”，那么答案是您需要在应用程序部署 CAB 中包含数据库文件。

# delphi - 我在哪里可以找到许多 Delphi 7 软件包？

> ID：1021483
> 
> 赞同：1
> 
> 时间：2009-06-20T11:50:38.010
> 
> 标签：delphi, installation, packages

对于我的自动安装 Delphi 7 包的程序，我需要找到大约 50 个包（用于测试将它们安装到调色板所需的时间）。也许有人在存档中有很多包，可以将其上传到免费文件托管或 FTP 服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-20T11:57:54.283

有很多很好的网站可以找到免费的 Delphi 组件。较大的一个是[Torry 的 Delphi Pages](http://www.torry.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T12:47:54.103

[delphi超级页面delphi 7部分](http://delphi.icm.edu.pl/newl/d70.htm)

# django - 在不更改原始 Django App 的情况下向 Django FlatPages 添加功能

> ID：1021487
> 
> 赞同：18
> 
> 时间：2009-06-20T11:54:00.327
> 
> 标签：django, django-models, monkeypatching

我想在 Django FlatPage 数据库模型中添加一个字段，但我真的不知道如何在不编辑原始应用程序的情况下扩展它。

我想要做的是将以下字段添加到模型中：

```
 from django.db import models
from django.contrib.flatpages.models import FlatPage as FlatPageOld

class FlatPage(FlatPageOld):
    order = models.PositiveIntegerField(unique=True) 
```

如何将它添加到 FlatPage 模型？

提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-21T13:32:33.827

您的方法很好-您只是看不到结果，因为旧的平面模型已在管理员中注册，而新的则没有。以下是您可能在新应用程序的 admin.py 中执行的操作（使用的命名比您上面的更清晰）：

```
from django.contrib import admin
from django.contrib.flatpages.admin import FlatPageAdmin
from django.contrib.flatpages.forms import FlatpageForm
from django.contrib.flatpages.models import FlatPage

from models import ExtendedFlatPage

class ExtendedFlatPageForm(FlatpageForm):
    class Meta:
        model = ExtendedFlatPage

class ExtendedFlatPageAdmin(FlatPageAdmin):
    form = ExtendedFlatPageForm
    fieldsets = (
        (None, {'fields': ('url', 'title', 'content', 'sites', 'order')}),
    )     

admin.site.unregister(FlatPage)
admin.site.register(ExtendedFlatPage, ExtendedFlatPageAdmin) 
```

显然这里发生了一些事情，但最重要的是，FlatPage 模型正在取消注册，而 ExtendedFlatPage 模型正在其位置注册。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-20T13:02:07.927

而且您帖子中的方法不起作用，因为...？

如果由于某种原因你*真的*需要摆弄内置的 FlatPage 类并动态编辑它，你可以挂钩到 class_prepared 信号：

[http://docs.djangoproject.com/en/dev/ref/signals/#class-prepared](http://docs.djangoproject.com/en/dev/ref/signals/#class-prepared)

**编辑**

这是使用 class_prepared 的方法：

```
from django.db.models.signals import class_prepared
from django.db import models

def alter_flatpages(sender, **kwargs):
    if sender.__module__ == 'django.contrib.flatpages.models' and sender.__name__ == 'FlatPage':
        order = models.IntegerField()
        order.contribute_to_class(sender, 'order')

class_prepared.connect(alter_flatpages) 
```

将它放在与您的 settings.py 相同的目录中的“signals.py”中，并将“信号”添加到 INSTALLED_APPS 列表的**顶部**（这很重要，以确保及时安装信号处理程序）。

但是，这仍然不会在 Admin 中显示该字段，因为 FlatPages 有一个自定义 ModelAdmin 类，它明确列出了这些字段。因此，在它在 flatpages 应用程序中注册后，您需要在某处取消注册 (admin.site.unregister) 并注册您自己的 ModelAdmin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T06:04:42.127

1.  在您将应用程序`settings.py` [的迁移文件夹的位置更改为](https://docs.djangoproject.com/en/3.0/ref/settings/#migration-modules)`django.contrib.flatpages`默认文件夹之外的另一个文件夹。例如：

`settings.py`：

```
MIGRATION_MODULES = {'flatpages': 'yourproject.flatpages.migrations'} 
```

*请记住，您必须在文件夹中创建空文件`__init__.py`，`yourproject`并将`flatpages`这些字典视为包。`migrations``Python`*

2.  执行`makemigrations`管理命令将初始迁移填充到您的`MIGRATION_MODULES`文件夹。它应该与[默认](https://github.com/django/django/blob/master/django/contrib/flatpages/migrations/0001_initial.py)的相似。

3.  在`apps.py`您的一个应用程序中（最好是使用 flatpages 功能的应用程序）添加 oggy 的`class_prepared`解决方案：

`apps.py`：

```
from django.apps import AppConfig
from django.db.models.signals import class_prepared
from django.db import models

def alter_flatpages(sender, **kwargs):
    if sender.__module__ == 'django.contrib.flatpages.models' and sender.__name__ == 'FlatPage':
        meta_description = models.CharField(max_length=255, blank=True, null=True)
        meta_description.contribute_to_class(sender, 'meta_description')

class TexteConfig(AppConfig):
    name = 'marlene.texte'

    def __init__(self, app_name, app_module):
        super().__init__(app_name, app_module)
        class_prepared.connect(alter_flatpages) 
```

4.  `makemigrations`通过再次执行添加另一个迁移。这次您已将 添加`CharField` `meta_description`到模型中。`migrate`将更改应用到数据库。

5.  修改`FlatPageAdmin`：

`admin.py`：

```
from django.contrib.flatpages.admin import FlatPageAdmin
from django.contrib.flatpages.models import FlatPage

class MarleneFlatPageAdmin(FlatPageAdmin):
    fieldsets = (
        (None, {'fields': ('url', 'title', 'content', 'meta_description', 'sites')}),
        (_('Advanced options'), {
            'classes': ('collapse',),
            'fields': ('registration_required', 'template_name'),
        }),
    )

admin.site.unregister(FlatPage)
admin.site.register(FlatPage, MarleneFlatPageAdmin) 
```

此解决方案的最大缺点是，如果`Django`将来向平面应用程序添加新的迁移，您将负责管理它们。我建议大家不要使用平面应用程序，无论它是否适合您当前的情况。

# delphi - 更好的选择是什么？

> ID：1021498
> 
> 赞同：9
> 
> 时间：2009-06-20T12:07:04.200
> 
> 标签：delphi, coding-style

```
procedure MyProc(Eval: Boolean);  
begin       
    if not Eval then  
        Exit;  
    /* do stuff */  
    /* do more stuff */
end; 
```

或者

```
procedure MyProc(Eval: Boolean);  
begin  
   if Eval then  
      begin  
         /* do stuff */  
         /* do more stuff */  
      end;

  /* no Exit needed, but now we got what I think unpleasing code:
  having a indentation level and a begin-end statement */
end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-20T12:13:03.597

在某些情况下，任何一种方法都适用。然而，通常，第一个提供更易读的代码和更好的控制流。我对 Delphi 编程不是很熟悉，但在 C# 中，我总是尽可能尝试使用前者。从表面上看，我认为 Delphi 中的方法应该不同。

列出一些优点：

*   无需缩进后续代码。
*   更容易扩展到多种条件。（只需添加额外的 if 语句而不是逻辑运算符，这使 IMO 更清楚。）
*   您“选择退出”该方法而不是选择加入的想法在美学上更令人愉悦，因为以下代码应在“正常”情况下执行。

不过，在某些情况下，第二种选择更合适。特别是，当需要将方法分解为子部分时（尽管这通常表明您需要重构）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-20T12:13:14.733

我认为这是一个偏好问题。但是，如果您在进行“实际工作”之前必须执行多项检查，那么第一种形式 (IMO) 看起来更整洁，并且更容易遵循流程。例如：

```
procedure MyProc(Eval: Boolean);
begin
    if not Eval then
        Exit;
    if not Eval2 then
        Exit;
    /* do stuff */
    /* do more stuff */ 
end; 
```

对比

```
procedure MyProc(Eval: Boolean);
begin
    if Eval then
    begin
        if Eval2 then
        begin
            /* do stuff */
            /* do more stuff */
        end;
    end;
end; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T12:18:02.010

有些人会争辩说你的职能应该只有一个出口点，但我不在那个阵营。

我经常使用多重返回，它不会影响经过深思熟虑的简短函数的可读性，所以我想说只要你认为更具可读性就去吧。

我已经让人们重构我编写的代码以遵循“规则”，并且由于缩进过多，它几乎总是以一堆不可读的代码告终。他们应该把它留给它，或者把它做好，把它分解成更多的功能。

我看到的一个特别的烦恼是这样的`"else"`：

```
if (some condition)
    return false;
else
    keep going; 
```

他们是否认为控制流会以某种方式从`"then"`条款中逃脱？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-20T12:19:59.027

我经常使用第一种形式。这是前置条件的一点文字编程，特别是因为在第二个示例中的实际检查之间插入代码时，确切的条件不太清楚。

我确实尝试将 EXIT 的使用限制在程序的第一个条件检查部分，以避免过多的意大利面条，但我认为第一种形式比跳跃的箍更干净，以保留一个退出点。

考虑到在 D2009 中添加了 exit(returnvalue) （并且 FPC 已经使用了十年），它似乎被使用了很多

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-25T05:09:40.797

我更喜欢：

```
if not Eval then Exit; 
```

因为这样代码看起来更干净。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-20T16:38:12.570

我认为代码段的退出点越少越好，因此更容易阅读和理解。注意到比调试别人的 100 行函数并发现其中有 12 种不同的情况可能导致它提前返回更糟糕。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T16:35:05.047

我可以恳求一下，如果您确实使用第二种形式，则不要添加无缘无故的 ectra 缩进级别。所以代替：

```
procedure MyProc(Eval: Boolean);  
begin  
   if Eval then  
      begin  
         /* do stuff */  
         /* do more stuff */  
      end;

  /* no Exit needed, but now we got what I think unpleasing code:
  having a indentation level and a begin-end statement */
end; 
```

说：

```
procedure MyProc(Eval: Boolean);  
begin  
   if Eval then  
   begin  
      /* do stuff */  
      /* do more stuff */  
   end;

  /* no Exit needed, but now we got what I think unpleasing code:
  having a indentation level and a begin-end statement */
end; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T13:15:48.760

现实情况是，这是一个太简单的例子，无法推诿。您将根据您现有的约定来选择您的方法——这个例子太简单了，无法就约定做出决定。更有趣的是如何处理多个立即退出选项和嵌套的 IF 语句 - 这是一个真正的灰色区域。

那么我的约定是什么？啊……我是务实的，我没有任何规则。如果可以在前几行中跳出窗口，我会接受它，因为我不必记住每当我编辑代码时，一些“无回报的函数调用”在函数期间的任何时候仍然存在。

随着时间的推移，这个功能将被错误和增强功能塑造和揉捏。后一种方法比前一种方法更容易引入新的错误，因为快速退出在开始时很明显，在你的脸上，你不必担心它会“忘记”函数的 50 行. 当然，在我的错误介绍经验中。

如果您设置好并且必须拆除它们，这是一个更棘手的调用，因为跳出可能会迫使您在进行更改时在脑海中处理 17 种薛定谔的猫状态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T16:16:18.740

在我看来，两者都不是正确的答案。

正确的解决方案是在过程中只包括“做事”和“做更多事”部分。然后，将过程调用包装在 if 语句中，仅在必要时调用它。

如果，正如您在评论中所说，“做事”和“做更多事”涵盖两个不同的领域，那么也许您需要两个程序——一个“做事”，另一个“做更多事”。如果您足够频繁地同时执行这两个过程，您还可以包含第三个过程，它只调用其他两个过程。

# c# - 如何使用 c# 从 yahoo messenger 检索聊天对话文本？

> ID：1021516
> 
> 赞同：0
> 
> 时间：2009-06-20T12:23:30.657
> 
> 标签：c#

我正在使用 c# 开发一个窗口应用程序。我想使用 c# 从 yahoo messenger 检索聊天转换文本。我应该用什么api来做到这一点？如果您有任何想法，请告诉我，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T12:27:29.870

这是关于 CodeGuru 的帖子，它提供了代码来做到这一点：[http](http://www.codeguru.com/cpp/i-n/internet/instantmessaging/comments.php/c6225/?thread=15297) ://www.codeguru.com/cpp/in/internet/instantmessaging/comments.php/c6225/?thread=15297 （虽然我没有尝试过）。

# c++ - STL 算法如何独立于迭代器类型工作？

> ID：1021521
> 
> 赞同：3
> 
> 时间：2009-06-20T12:29:24.610
> 
> 标签：c++, algorithm, stl, iterator

STL 算法如何独立于迭代器类型工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-20T12:45:35.887

真的，他们只是工作。它们使用模板的一些非常基本的属性，有时称为静态多态性。如果你熟悉这个术语，它本质上是一种鸭式打字。（如果它长得像鸭子，叫起来像鸭子，那它一定是鸭子）

诀窍很简单。这是一个非常简单的例子：

```
template <typename T>
void say_hello(const T& t) {
  t.hello();
} 
```

该`say_hello`函数不关心它的参数是哪种类型。它不必从接口派生或对它是什么做出任何其他类型的“承诺”。重要的是该类型*在*这种情况下有效。我们对类型所做的只是调用它的`hello`函数。这意味着此代码将为具有`hello`成员函数的任何类型编译。

STL 算法的工作原理类似。这是一个简单的实现`std::for_each`：

```
template <typename iter_type, typename func_type>
void for_each(iter_type first, iter_type last, func_type f){
  for (iter_type cur = first; cur != last; ++cur) {
    f(*cur);
  }
} 
```

只要模板类型满足对它们的要求，此代码就会编译；`iter_type`必须具有预增量 ++ 运算符。它必须有一个复制构造函数，它必须有 != 运算符，它必须有 *-dereference-operator。

`func_type`必须实现函数调用运算符，采用与通过取消引用类型的对象获得的相同类型的参数`iter_type`。如果我调用`for_each`满足这些要求的类型，代码将编译。`iter_type`可以是满足这些要求的任何类型。代码中没有任何内容说“这适用于向量迭代器、列表迭代器和映射迭代器”。但只要向量、列表或映射迭代器实现我们使用的运算符，它就可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T12:37:32.393

STL 算法是模板函数，这意味着它们可以被任何类型调用。

当调用具有特定类型的函数时，编译器将尝试编译该特定类型的函数实例并报告任何编译错误（缺少方法、类型检查错误等）

对于 STL 算法，只要使用的类型表现得像一个迭代器（支持 ++，取消引用），它就可以工作。这就是为什么这些算法也适用于本机指针的原因，因为它们支持与迭代器相同类型的操作（这就是它们最初的设计方式）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T12:31:13.793

[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-20T12:34:32.633

任何 STL 算法都是由编译器为您使用的每个迭代器类型自动生成的。

它被称为 C++ 模板或静态多态性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T12:33:56.550

每个 STL 算法都是一个模板函数，它以迭代器类型作为其模板参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T13:26:25.087

并非所有 STL 容器/迭代器算法都具有这种独立性。那些被称为通用算法，但这些通常只是被称为 STL 算法。

只有使用迭代器，您才能：

*   检查序列，以便您可以执行诸如 find、count、for_each 之类的操作……</li>
*   更改迭代器引用的值，以便您可以执行变换、复制、旋转、交换、替换等操作……</li>
*   重新排序迭代器的值，以便您可以执行排序、合并、nth_element 之类的操作。

一些非泛型算法可以分为两个阶段，一个 STL 泛型部分和一个容器相关部分。因此，为了销毁向量中所有大于 7 的值，我们可以执行 remove_if （仅对元素进行排序的通用部分），然后执行擦除（破坏值的非通用部分）。

# emacs - Emacs Lisp：在函数返回之前使新创建的缓冲区可见？

> ID：1021523
> 
> 赞同：5
> 
> 时间：2009-06-20T12:32:20.577
> 
> 标签：emacs, lisp, buffer, visibility

在 emacs Lisp 的以下函数中，

```
(defun show-life ()
  (interactive)
  (switch-to-buffer "*Life-Window*") ; show how life goes on while living
  (live)) ; it takes 70 years to finish and return! 
```

我想创建缓冲区“ *Life-Window* ”，并在 live 继续时连续显示由 (live) 生成的生活事件。

不幸的是，缓冲区仅在 (live) 返回后才可见（当它结束时！）

我也尝试了 pop-to-buffer，行为是一样的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T14:40:03.877

`'sit-for`在调用 to之前添加调用 to `'live`，例如

```
(defun show-life ()
  (interactive)
  (switch-to-buffer "*Life-Window*")    ; show how life goes on while living
  (sit-for 0)                           ; perform redisplay
  (live))                               ; it takes 70 years to finish and return! 
```

而且，如果您想查看 的结果`'live`，它也应该定期调用`'sit-for`。

的文档字符串`'sit-for`是：

> sat-for 是在 `subr.el' 中编译的 Lisp 函数。（坐几秒钟和可选的nodisp）
> 
> 执行重新显示，然后等待几秒钟或直到输入可用。秒可能是一个浮点值。（在不支持等待几分之一秒的操作系统上，浮点值会向下舍入到最接近的整数。）
> 
> 如果可选的 arg nodisp 为 t，则不重新显示，等待输入。如果输入在开始之前可用，则不会重新显示。
> 
> 如果等待完整时间而没有输入到达，则值为 t，否则为 nil。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T14:41:18.070

我找到了解决方案。我必须使用`(sit-for <time-to-wait>)`获取缓冲区来显示生活事件的更新。

所以代码段应该修改如下：

```
(defun show-life ()
  （交互的）
  (switch-to-buffer "*Life-Window*") ; 展示生活中的生活如何继续
  （坐 0 人）
  （居住）） ; 完成并返回需要70年！

```

也许在`live`体内，`sit-for`应该定期调用。

# validation - 在 struts2 验证中需要帮助

> ID：1021532
> 
> 赞同：0
> 
> 时间：2009-06-20T12:38:59.317
> 
> 标签：validation, struts2

我的 struts.xml 文件中有以下内容

```
<action name="ProductVerification" class="com.frontend.ProductVerification">
    <result name="success">/jsp/product_verification.jsp</result>
    <result name="input">/jsp/product_verification.jsp</result>
    <result name="error">/jsp/product_verification.jsp</result>
</action> 
```

我的 html 代码中有以下内容

```
<s:form name="frmVerification" id="frmVerification" onsubmit="Javascript: return checkFrmVerification(this);"  >

<s:select name="countryId" id="cmbcountryid"  headerKey="0"  headerValue="%{getText('label.Please_Select')}" list="%{countryListCombo}" listKey="countryId" listValue="country" value="countryId" cssClass="style2" onchange="Javascript: GetCities();" required="true" />

<s:submit name="submit" src="images/submit_btn.jpg" type="image" value="submit" />

</form> 
```

我有如下执行方法。

```
public String execute() throws Exception {

    Session session = this.getHibernateSession();

    Transaction tx = session.beginTransaction();

    //Following will set combo box containing country list
    this.setCountryListCombo();

    tx.commit();

    return SUCCESS;
} 
```

我正在重写验证方法，如下所示。

```
@Override
public void validate() {
 HttpServletRequest request = this.getServletRequest();

     if(request.getParameter(countryId) == 0){
          addFieldError("countryId", "Please select country");
     }

} 
```

现在，当我执行我的操作时，它会显示带有 countryId 组合框的表单，其中包含国家/地区。

现在，当我在不选择组合框的情况下提交表单时，它应该会显示错误。

但不是显示错误“请选择国家”它给了我以下错误。

Struts 问题报告

Struts 检测到一个未处理的异常：

**消息：**标记“选择”、字段“列表”、名称“国家 ID”：请求的列表键“%{countryListCombo}”无法解析为集合/数组/地图/枚举/迭代器类型。示例：人或人。{name}

**文件：** org/apache/jasper/servlet/JspServletWrapper.java

**行号：** 522

谁能告诉我为什么会这样？

似乎在 validate() 方法给出 result="input" 之后，它没有调用 execute() 方法，而是尝试直接显示“/jsp/product_verification.jsp”页面。

请帮我解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-25T13:11:30.917

您的假设是正确的，当添加字段错误时，默认情况下会返回“INPUT”结果，从而导致输入结果被渲染。我建议研究实现 preparable，这将允许您始终在页面呈现之前填充组合框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-14T10:50:35.840

您需要在方法中添加您的组合框代码，如下所示：

```
public String execute() throws Exception {

//add this code also as per your comobobx code
countryList = new ArrayList<Country>();
        countryList.add(new Country(1, "India"));
        countryList.add(new Country(1, "Shri Lanka"));
        countryList.add(new Country(1, "USA"));
        countryList.add(new Country(1, "Pakistan"));
        countryList.add(new Country(1, "NewsLnad"));

//add this code also as per your comobobx code

    Session session = this.getHibernateSession();

    Transaction tx = session.beginTransaction();

    //Following will set combo box containing country list
    this.setCountryListCombo();

    tx.commit();

    return SUCCESS;
} 
```

并在您的jsp页面中添加以下标签

`<s:actionerror />`

# asp.net - 如何解决这个转换类型错误？

> ID：1021535
> 
> 赞同：1
> 
> 时间：2009-06-20T12:42:40.573
> 
> 标签：asp.net

如何解决此转换类型错误？

> 无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.List”
> 
> 错误 2 无法将类型 ' `System.Collections.Generic.List<AnonymousType#1>`' 隐式转换为 ' `System.Collections.Generic.List<Product>`' D:\Fortune\App_Code\BL\StoreController.cs 204 45 D:\Fortune\

```
public static List<Product> GetProductsByCategoryID(int productCategoryId )
{
    FortuneDataContext db = SiteController.GetNewFortuneDataContext();
    List<Product>  prods = (from p in db.Products
                        join pc in db.ProductCategories 
                        on p.ProductCategoryId equals pc.ProductCategoryId 
                        where pc.ParentProductCategoryId == productCategoryId
                        select new
                        {
                           p.ProductId,
                           p.ProductCategoryId,
                           pc.ParentProductCategoryId,               
                           ProductName = p.Name,
                           Category = pc.Name,
                           p.Price,
                           p.ProductYear
                           }).ToList();  
    return prods;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T12:50:56.483

将选择更改为

```
select new Product {ProductId = p.ProductID
                       ...}).ToList(); 
```

或者

```
 select p ... 
```

如果要提取所有产品字段

错误是您的列表项不是产品

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T13:10:17.023

问题是您的 ling 查询没有返回产品。它返回一个匿名类型，因为您正在使用 select new {} 投影一个新类型。

```
select new { ... } 
```

您可以在对象中创建一个具有类别名称的新类型并更改方法以返回它，或者如果您使用 linq to sql，您可能可以对返回的项目执行类似 product.category.name 的操作。

```
 List<Product>  prods = (from p in db.Products
                           join pc in db.ProductCategories on p.ProductCategoryId equals pc.ProductCategoryId
                            where pc.ParentProductCategoryId == productCategoryId
                           select p).ToList<Product>(); 
```

# django - 具有 i18n 支持的完整 CMS（或 CMS 框架）

> ID：1021539
> 
> 赞同：2
> 
> 时间：2009-06-20T12:44:57.293
> 
> 标签：django, google-app-engine, content-management-system, internationalization, joomla

我们正在寻找一种以不同语言发布文章的方法，包括写作方向（*RTL/LTR*）的差异，当然还有字符集。当前站点的维护者使用 Mambo/Joomla，但在可扩展性方面已经发现了严格的限制。

已经提出了[类似的问题，但我将添加功能和系统要求。](https://stackoverflow.com/questions/749758)

在功能方面，我们需要以下功能：

*   CMS 标准特性（两阶段发布、权限、不同的发布机制……）
*   除了标准分类，文章还应该有**语言元属性**
*   应该可以**用一种或多种语言提供一篇文章**
    *   文章之间的链接应指明目标文章的语言，如果它与源文章的语言不匹配。
    *   应该可以直接链接到以某种语言（例如`mysite.com/article/23423/my-cool-title?lang=ar`）发表的文章。
*   作者应该对他们的语言能力有所了解

在系统需求层面，我们想到了以下备选方案：

*   Apache 上的标准 PHP/MySQL (LAMP)
*   谷歌应用引擎（首选 django）

我们正在寻找一个可以轻松扩展和管理的完整 CMS，或者一个涵盖大部分功能的框架。请考虑我们已经阅读了[前面提到](https://stackoverflow.com/questions/749758)的问题的答案。

谢谢，

卡里姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-22T11:44:32.687

你看过[Django-CMS](http://django-cms.org/)吗？

我不认为它会包含你提到的所有内容，但大部分都在那里，其余的你可以自己添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-23T18:25:34.427

Drupal 可以很容易地满足您对 LAMP 堆栈的需求。从 Drupal 6 开始，几乎所有你需要的东西都可用了。你可以有：

*   使用贡献的 Workflow 模块进行多阶段发布和工作流
*   新内容可以用特定语言标记，或创建为语言中立
*   我不知道是否可以让 CMS 自动列出链接的目标语言，但使用几行代码添加过滤器应该不难，例如 [链接：文章 ID 或名称]插入指向另一篇文章的链接，该链接将列出链接目标的语言
*   链接到文章的特定语言/翻译是没有问题的，大多数人在 Drupal 中使用路径前缀进行设置，因此英文文章将在 example.com/en/article/path 上，而在 example.com/fr 上说法语/文章/路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-23T18:16:05.237

我用过[Sitellite CMS](http://www.sitellite.org)，它是一款支持 I18n 的好软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T19:11:15.627

我不知道 App Engine 上当前有什么可以满足您的要求。不过，您可以自定义诸如[Blog 之](http://bloog.billkatz.com/)类的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-08T09:30:16.223

结帐[django-blocks](http://code.google.com/p/django-blocks/)。拥有多语言菜单、平面页面，甚至还有一个简单的购物车！！

# user-interface - 手工编码的 GUI 应用程序设计和可视化

> ID：1021542
> 
> 赞同：2
> 
> 时间：2009-06-20T12:45:42.440
> 
> 标签：user-interface, language-agnostic

我们有像 Netbeans/Visual Studio 这样的工具来为我们的项目在 java/C# 中做 GUI 应用程序。但是当我们通过在文本编辑器/IDE 上编写代码而不使用组件来创建应用程序时。那么如何可视化 GUI 应用程序项目？我的意思是说我想用 C#/java 构建一个联系人管理器应用程序。现在使用 GUI 构建器工具，我可以管理多个文件，但通过硬编码，我必须单独考虑每个文件。

现在应该如何可视化项目并着手进行呢？什么设计程序员需要记住？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T13:17:46.117

过去没有像 Delphi 和 VB（以及后来的 C#）这样的 RAD 工具，因此有面向对象或非 OO 框架仅使用代码构建屏幕。

我特别记得 Borland Turbo Pascal 的基于对象的文本 UI，在哪里创建一个对话框，你必须从 TDialog 继承并手动填充它的 OnDraw，其中包含要创建的组件和放置它们的位置，并在运行时将它们的回调给 OnClick 等。

我不确定你为什么问你的问题，因为我肯定会推荐使用 RAD 工具。但是，如果您必须手动创建所有内容，您当然可以这样做。

在这种情况下，我建议为每个对话框创建一个单独的文件和类，并持有一个逻辑管理器来根据需要创建所有屏幕。您可能还需要一个包含所有其余内容的“主屏幕”，这可能是该逻辑管理器创建的第一个屏幕。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T23:26:30.340

这取决于您使用的库和提供的小部件......有些提供布局类，允许以有序的方式将其他控件放入其中，而另一些则没有。

在命名文件/类/方法/函数时需要一个约定，以便它们在文件之间保持一致。这将简化在另一个文件中使用一个文件中的某些内容。

# java - jsp:this指的是jsp页面的jave代码块<%%>中的哪个对象？

> ID：1021543
> 
> 赞同：0
> 
> 时间：2009-06-20T12:46:47.773
> 
> 标签：java, jsp, servlets, servletconfig

我在 jsp 中使用这个引用。我可以调用类似的函数

this.getServletConfig();

谁能告诉我它返回的servletconfig对象是哪个servlet。它指的是哪个对象？

如果它是 servlet 对象，它指的是从哪个 requestdispatch dn 到这个 jsp 页面。然后它会返回这些参数的返回值，我可以在 servlet 代码中访问这些参数。但它返回null。

```
 out.print("<br>"+this.getInitParameter("GmailId"));
   out.print("<br>"+this.getServletConfig().getInitParameter("GmailId")); 
```

* * *

web.config 文件

* * *

```
 <servlet>
    <description></description>
    <display-name>MyServlet</display-name>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>MyServlet</servlet-class>
    <init-param>
        <param-name>GmailId</param-name>
        <param-value>sahilvk87</param-value>    
    </init-param>
    <init-param>    
        <param-name>YahooId</param-name>
        <param-value>sahilvk11</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/MyServlet</url-pattern>
</servlet-mapping>
<context-param>
<param-name>GlobalName</param-name>
<param-value>Sahil Garg</param-value>
</context-param> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T12:49:16.550

为 JSP 页面生成的 servlet。

# javascript - 在调用堆栈中较高的方法中访问“this”对象

> ID：1021545
> 
> 赞同：1
> 
> 时间：2009-06-20T12:48:59.217
> 
> 标签：javascript, callstack

我有以下 JavaScript：

```
function b() {
    alert(arguments.caller[0]);
}

function X(x) {
    this.x = x;
}

X.prototype.a = function(i) {
    b();
}

new X(10).a(5); 
```

这将显示消息“5”。但是，我想显示“10”，即在函数 b 中我想访问调用者的“this”属性。这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:09:31.813

您可以将调用者作为参数传递给函数：

```
function b(caller) {
    alert(caller.x);
};

function X(x) {
    this.x = x;
};

X.prototype.a = function(i) {
    b(this);
};

new X(10).a(5); 
```

请注意，arguments.caller 在 JS 1.3 中已被弃用，并在 JS 1.5 中被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T13:10:06.710

```
function b() {
    alert(this.x);
}

function X(x) {
    this.x = x;
}

X.prototype.a = function(i) {
    b.call(this); /* <- call() used to specify context */
}

new X(10).a(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T13:37:40.930

您通过将对函数 b 的调用包装在匿名函数中来引入间接级别。如果可能，您应该直接设置它。

```
function b() {
  alert(this.x);  // 10
  alert(arguments[0]); // 5
}

function X(x) {
  this.x = x; /* alternatively, set this.x = arguments to capture all arguments*/
}

X.prototype.a = b;

new X(10).a(5); 
```

否则，您需要传递对象，这可以通过 JP 或 balpha 建议的任何一种方式来完成。

# iphone - 在 iPhone 的移动 Safari 中嵌入 WAVE 文件

> ID：1021548
> 
> 赞同：1
> 
> 时间：2009-06-20T12:50:32.290
> 
> 标签：iphone, html, safari, quicktime, mobile-safari

我托管了一个播放良好的 WAVE 文件，它的 URL 直接输入到 Mobile Safari 中。尝试将其嵌入一个简单的 HTML 页面会显示一个“无法播放”图标：

![](../Images/da8dcdf0051cfceeb9fc26fa2cbb7638.png)

我的嵌入代码有什么问题？

```
<embed href="http://localhost/test.wav" type="audio/wav"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-12T22:54:51.063

这是一个服务器问题。Apache 有一种特殊的文件下载模式。正如我在上面发布的那样，您需要它来嵌入音频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T03:25:53.033

MobileSafari 不支持嵌入标签。不过，正如您所提到的，您可以链接到受支持的音频文件，当用户按下链接时，它将使用本机音乐播放器播放。

[此页面](http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-DontLinkElementID_2)包含支持的文件类型列表。

# java - 有没有办法在 servletconfig 或 servletContext 对象中设置 init 参数？

> ID：1021550
> 
> 赞同：1
> 
> 时间：2009-06-20T12:50:43.020
> 
> 标签：java, servlets, set, servletconfig, init-parameters

如果我想修改任何 ServletContext 或 ServletConfig 中的初始化参数值。任何人都希望在 servlet 被容器销毁后对其进行更新。有什么出路吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2015-08-13T09:28:01.280

您可以在访问时以编程方式设置参数`ServletConfig`

```
config.getServletContext().setInitParameter("foo", "bar") 
```

# php - 有什么好的php5 OOP 教程网站吗？

> ID：1021552
> 
> 赞同：12
> 
> 时间：2009-06-20T12:52:12.877
> 
> 标签：php, oop, web

有什么好的**php5** OOP 教程网站吗？

我用谷歌搜索了一会儿，
发现到处都是**PHP4** OOP 站点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-07-07T11:18:30.470

它不是免费的，但是我发现的关于 PHP5 + OO 的最佳资源是 Matt Zandstras PHP Objects, Patterns and Practice。

它不仅向您展示了基础知识（类与对象、继承、多态性等，这是大多数人在学习 OO 时停止的地方），而且还通过设计模式向您展示了如何正确地进行 OO。

所谓“正确”，我只是指像接口编码、DRY、组合而不是继承等。至关重要的是，它超越了基本的 UML（类和序列图），这确实有助于让您对 OO 有一个直观的理解。彻底推荐。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-24T13:51:27.097

您可以在几个地方了解 PHP 中的面向对象编程 (OOP)：

[PHP 中的 OOP](http://www.vbforums.com/showthread.php?t=378700)

[类和对象 (PHP 5)](http://php.net/zend-engine-2.php)

[PHP5 中的 OOP（警告 - pdf！）](http://ilia.ws/files/frankfurt_oop.pdf)

[在 scribd.com 上的演示文稿对比 PHP4 与 PHP5 中的 oop](http://www.scribd.com/doc/17730/PHP-5-OOP)（在 scribd.com 上也很少有其他演示文稿可用）

[关于从 PHP4 到 PHP5 的迁移 oop 的 php.net 指南](http://php.net/manual/en/migration5.php)

也有几本书，即： [Object-Oriented Programming with PHP5](http://www.packtpub.com/oop-php-5/book)

当您使用 google 时，您会发现很多关于此的网站，如果您真的想学习它，只需购买并学习一本关于 php5 中 oop 的新书 - 通常它们有很好的信息，用简单的语言编写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-06T10:10:54.057

这是一个很好的教程，概念解释得很清楚。
[http://www.sunilb.com/php/php-tutorials/php-5-tutorial-final-class-and-methods](http://www.sunilb.com/php/php-tutorials/php-5-tutorial-final-class-and-methods)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T13:28:07.237

这是官方的 php.net 教程/概述...

[http://at2.php.net/manual/en/language.oop5.php](http://at2.php.net/manual/en/language.oop5.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T12:56:47.987

这里有一个[PHP 5 OOP 教程](http://www.vbforums.com/showthread.php?t=378700)。

*“我希望通过这些教程向您介绍 PHP 5 对象模型的一些新特性。”*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T11:55:26.993

[我在Codecademy.com](http://codecademy.com)学到了很多基础知识

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-11T11:54:50.267

[http://www.sysexecutive.com/category/online-tutorials/php](http://www.sysexecutive.com/category/online-tutorials/php)提供最好的 PHP5 教程

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T10:44:54.047

我在这里编写了一些 PHP5 教程，并附有示例下载：

[http://blog.jordanleigh.co.uk/category/php-5/](http://blog.jordanleigh.co.uk/category/php-5/)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-02-20T16:48:40.300

我发现 W3Schools 上的教程有助于初学者学习 PHP 5： [https ://www.w3schools.com/php/](https://www.w3schools.com/php/)

# hibernate - 如果我索引相同的数据，为什么 lucene 索引的大小会增加？

> ID：1021554
> 
> 赞同：0
> 
> 时间：2009-06-20T12:54:04.373
> 
> 标签：hibernate, search, indexing, lucene, hibernate-search

我在我的应用程序中实现了 Hibernate Search，即基于 Lucene。每当我索引数据库时，lucene 索引的大小都会增加。但是，查询的结果每次都返回相同的结果。

如果我每次索引相同的数据，为什么 lucene 的大小每次都会增加？

```
FullTextSession fullTextSession = Search.getFullTextSession(getSession());
    org.hibernate.Transaction tx = fullTextSession.beginTransaction();

    Criteria criteria = fullTextSession.createCriteria(getPersistentClass())
    .setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY)
    .setCacheMode(CacheMode.IGNORE)
    .setFetchSize(pageSize)
    .setFlushMode(FlushMode.MANUAL);

    int i = 0;
    List<ProdAttrAssociationVO> results = null;
    do {
      criteria = criteria.setFirstResult(i)
        .setMaxResults(pageSize);
      results = criteria.list();

      for (ProdAttrAssociationVO entity : results) {
        fullTextSession.delete(entity);
        fullTextSession.index(entity);
      }

      // flush the index changes to disk so we don't hold until a commit
      if (i % batchSize == 0) {
        fullTextSession.flushToIndexes();
        fullTextSession.clear();
      }

      i += pageSize;
    } while (results.size() > 0);

    System.out.println("ProdAttrAssociation Indexing Completed");
    tx.commit(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-21T09:08:14.563

我对 Hibernate 一无所知，但通常在 Lucene 中，删除的文档会保留在索引上，直到它被优化。这可以解释为什么你看到指数只会增长。

尝试在索引上运行 optimize()。不知道你是如何从 Hibernate 做到的（我看到它是[SearchFactory](http://docs.jboss.org/hibernate/stable/search/api/org/hibernate/search/SearchFactory.html#optimize())的一种方法）。

希望这可以帮助。

# zip - 如何使用命令行解压缩文件？

> ID：1021557
> 
> 赞同：176
> 
> 时间：2009-06-20T12:55:02.483
> 
> 标签：zip, cmd

可以通过命令行使用哪些命令来解压缩文件？
最好是内置于 Windows 或开源/免费工具中的东西。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2009-06-20T13:14:10.773

如果您的 PC 上已经有 Java 开发工具包并且 bin 目录在您的路径中（在大多数情况下），您可以使用命令行：

```
jar xf test.zip 
```

或者如果不在您的路径中：

```
C:\Java\jdk1.6.0_03\bin>jar xf test.zip 
```

[此处](https://docs.oracle.com/javase/6/docs/technotes/tools/windows/jar.html)提供了 jar 工具的完整选项集。

例子：

```
Extract jar file
    jar x[v]f jarfile [inputfiles] [-Joption] 
    jar x[v] [inputfiles] [-Joption] 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-06-20T12:59:57.340

你可以使用：

[http://membrane.com/synapse/library/pkunzip.html](http://membrane.com/synapse/library/pkunzip.html)

或者

7zip：[http ://www.7-zip.org/download.html](http://www.7-zip.org/download.html)

免费字节[zip：http://www.freebyte.com/fbzip/](http://www.freebyte.com/fbzip/)

或 infozip：http: [//infozip.sourceforge.net/](http://infozip.sourceforge.net/)

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2009-06-20T13:08:56.917

[7-Zip](http://www.7-zip.org/download.html)，它是开源的、免费的并且支持多种格式。

```
7z.exe x myarchive.zip 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2011-10-30T19:23:53.913

首先，使用 vbscript 编写一个解压缩实用程序来触发 Windows 中的本机解压缩功能。然后从批处理文件中输出脚本，然后调用它。然后它和独立一样好。我过去曾为许多任务做过它。这样它就不需要第三方应用程序，只需一个批处理文件即可完成所有工作。

我在我的博客上放[了一个关于如何使用批处理文件解压缩文件的示例](http://jagaroth.livejournal.com/69147.html)：

```
' j_unzip.vbs
'
' UnZip a file script
'
' By Justin Godden 2010
'
' It's a mess, I know!!!
'

' Dim ArgObj, var1, var2
Set ArgObj = WScript.Arguments

If (Wscript.Arguments.Count > 0) Then
 var1 = ArgObj(0)
Else
 var1 = ""
End if

If var1 = "" then
 strFileZIP = "example.zip"
Else
 strFileZIP = var1
End if

'The location of the zip file.
REM Set WshShell = CreateObject("Wscript.Shell")
REM CurDir = WshShell.ExpandEnvironmentStrings("%%cd%%")
Dim sCurPath
sCurPath = CreateObject("Scripting.FileSystemObject").GetAbsolutePathName(".")
strZipFile = sCurPath & "\" & strFileZIP
'The folder the contents should be extracted to.
outFolder = sCurPath & "\"

 WScript.Echo ( "Extracting file " & strFileZIP)

Set objShell = CreateObject( "Shell.Application" )
Set objSource = objShell.NameSpace(strZipFile).Items()
Set objTarget = objShell.NameSpace(outFolder)
intOptions = 256
objTarget.CopyHere objSource, intOptions

 WScript.Echo ( "Extracted." )

' This bit is for testing purposes
REM Dim MyVar
REM MyVar = MsgBox ( strZipFile, 65, "MsgBox Example" 
```

像这样使用它：

```
cscript //B j_unzip.vbs zip_file_name_goes_here.zip 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2011-12-13T23:36:53.437

正如其他人所暗示的那样，7-zip 很棒。

注意：我将压缩然后解压缩文件。解压在底部。

我的贡献：

获取

**7-Zip 命令行版本**

当前网址

[http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)

语法？

您可以将以下内容放入 .bat 文件中

```
"C:\Program Files\7-Zip\7z.exe" a MySuperCoolZipFile.zip "C:\MyFiles\*.jpg" -pmypassword -r -w"C:\MyFiles\" -mem=AES256 
```

我已经展示了几个选项。

-r 是递归的。通常是你想要的 zip 功能。

a 用于“存档”。这是输出 zip 文件的名称。

-p 用于密码（可选）

-w 是源目录。这会将您的文件正确嵌套在 zip 文件中，而无需额外的文件夹信息。

-mem 是加密强度。

完整的文档（对于“a”又名“Add”）在这里

[https://sevenzip.osdn.jp/chm/cmdline/commands/add.htm](https://sevenzip.osdn.jp/chm/cmdline/commands/add.htm)

还有其他的。但是上面的内容会让你跑起来。

注意：添加密码会使 zip 文件在通过 Windows 资源管理器查看文件时变得不友好。客户端可能需要自己的 7-zip（或 winzip 或其他）副本来查看文件的内容。

编辑::::::::::::(只是额外的东西)。

有一个“命令行”版本可能更适合这个： [http ://www.7-zip.org/download.html](http://www.7-zip.org/download.html)

（当前（撰写本文时）直接链接） [http://sourceforge.net/projects/sevenzip/files/7-Zip/9.20/7za920.zip/download](http://sourceforge.net/projects/sevenzip/files/7-Zip/9.20/7za920.zip/download)

所以**zip 命令**将是（使用 7 zip 工具的命令行版本）。

```
"C:\WhereIUnzippedCommandLineStuff\7za.exe" a MySuperCoolZipFile.zip "C:\MyFiles\*.jpg" -pmypassword -r -w"C:\MyFiles\" -mem=AES256 
```

现在**解压缩部分**：（解压缩您刚刚创建的文件）

```
"C:\WhereIUnzippedCommandLineStuff\7zipCommandLine\7za.exe" e MySuperCoolZipFile.zip "*.*" -oC:\SomeOtherFolder\MyUnzippedFolder -pmypassword -y -r 
```

作为“e”参数的替代方案，还有 ax 参数。

```
 e: Extract files from archive (without using directory names)
  x: eXtract files with full paths 
```

此处的文档：

完整的文档（对于“e”又名“Extract”）在这里

[http://sevenzip.sourceforge.jp/chm/cmdline/commands/extract.htm](http://sevenzip.sourceforge.jp/chm/cmdline/commands/extract.htm)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2011-11-22T07:52:20.927

谢谢 Rich，我会注意的。所以这是我自己的解决方案的脚本。它不需要第三方解压缩工具。

在批处理文件的开头包含以下脚本以创建函数，然后调用该函数，命令是... `cscript /B j_unzip.vbs zip_file_name_goes_here.zip`

这是要添加到顶部的脚本...

```
REM 将工作文件夹更改回当前目录以兼容 Vista 和 7
%~d0
光盘 %~dp0
REM 文件夹已更改

REM 这个脚本upzip的文件...

    > j_unzip.vbs 回声'
    >> j_unzip.vbs ECHO '解压文件脚本
    >> j_unzip.vbs ECHO '
    >> j_unzip.vbs ECHO ' 这是一团糟，我知道！！！
    >> j_unzip.vbs ECHO '
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO ' Dim ArgObj, var1, var2
    >> j_unzip.vbs ECHO 设置 ArgObj = WScript.Arguments
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO If (Wscript.Arguments.Count ^> 0) Then
    >> j_unzip.vbs ECHO。var1 = ArgObj(0)
    >> j_unzip.vbs ECHO Else
    >> j_unzip.vbs ECHO。var1 = ""
    >> j_unzip.vbs ECHO End if
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO 如果 var1 = "" 那么
    >> j_unzip.vbs ECHO。strFileZIP = "example.zip"
    >> j_unzip.vbs ECHO Else
    >> j_unzip.vbs ECHO。strFileZIP = var1
    >> j_unzip.vbs ECHO End if
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO '压缩文件的位置。
    >> j_unzip.vbs ECHO REM 设置 WshShell = CreateObject("Wscript.Shell")
    >> j_unzip.vbs ECHO REM CurDir = WshShell.ExpandEnvironmentStrings("%%cd%%")
    >> j_unzip.vbs ECHO Dim sCurPath
    >> j_unzip.vbs ECHO sCurPath = CreateObject("Scripting.FileSystemObject").GetAbsolutePathName(".")
    >> j_unzip.vbs ECHO strZipFile = sCurPath ^& "\" ^& strFileZIP
    >> j_unzip.vbs ECHO '内容应该被解压到的文件夹。
    >> j_unzip.vbs ECHO outFolder = sCurPath ^& "\"
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO。WScript.Echo ("解压文件" ^& strFileZIP)
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO Set objShell = CreateObject("Shell.Application")
    >> j_unzip.vbs ECHO 设置 objSource = objShell.NameSpace(strZipFile).Items()
    >> j_unzip.vbs ECHO 设置 objTarget = objShell.NameSpace(outFolder)
    >> j_unzip.vbs ECHO intOptions = 256
    >> j_unzip.vbs ECHO objTarget.CopyHere objSource, intOptions
    >> j_unzip.vbs ECHO。
    >> j_unzip.vbs ECHO。WScript.Echo（“已提取。”）
    >> j_unzip.vbs ECHO。

```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2011-03-23T14:54:04.120

这里有一篇关于使用 VBscript 处理内置 Windows .ZIP 文件的文章：

[https://www.aspfree.com/c/a/Windows-Scripting/Compressed-Folders-in-WSH/](https://www.aspfree.com/c/a/Windows-Scripting/Compressed-Folders-in-WSH/)

（最后一个代码简介涉及提取）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-06-20T13:11:39.437

最初 ZIP 文件是使用 PKWare 的 MS-DOS 命令行软件创建的，这两个程序是 PKZIP.EXE 和 PKUNZIP.EXE。我认为您仍然可以在 PKWare 网站上下载 PKUNZIP：

[http://www.pkware.com/software-pkzip/dos-compression](http://www.pkware.com/software-pkzip/dos-compression)

实际的命令行可能如下所示：

```
C:\>pkunzip c:\myzipfile.zip c:\extracttothisfolder\ 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-20T12:59:22.800

[从info-zip 获取](http://info-zip.org/)可执行文件。

> Info-ZIP 支持从微型计算机一直到 Cray 超级计算机的硬件，可在几乎所有版本的 Unix、VMS、OS/2、Windows 9x/NT/等上运行。(aka Win32), Windows 3.x, Windows CE, MS-DOS, AmigaDOS, Atari TOS, Acorn RISC OS, BeOS, Mac OS, SMS/QDOS, MVS and OS/390 OE, VM/CMS, FlexOS, Tandem NSK和 Human68K（日语）。还有一些（旧的）对 LynxOS、TOPS-20、AOS/VS 和 Novell NLM 的支持。共享库 (DLL) 可用于 Unix、OS/2、Win32 和 Win16，图形界面可用于 Win32、Win16、WinCE 和 Mac OS。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-24T11:08:22.257

将以下代码复制到批处理文件并执行。下面需要从您的机器安装/访问 Winzip。根据您的需要更改变量。

```
@ECHO OFF
SET winzip_path="C:\Program Files\WinZip"
SET source_path="C:\Test"
SET output_path="C:\Output\"
SET log_file="C:\Test\unzip_log.txt"
SET file_name="*.zip"

cd %source_path%
echo Executing for %source_path% > %log_file%

FOR /f "tokens=*" %%G IN ('dir %file_name% /b') DO (
echo Processing : %%G
echo File_Name : %%G >> %log_file%
%winzip_path%\WINZIP32.EXE -e %%G %output_path%
)

PAUSE 
```

# ms-access - 将记事本文件保存到数据库 (Microsoft Access)

> ID：1021558
> 
> 赞同：1
> 
> 时间：2009-06-20T12:56:00.123
> 
> 标签：ms-access, vb6, file-import

如何将记事本文件导入 VB 6.0，然后将文件内容保存到数据库（Microsoft Access 数据库）中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:02:06.510

基本步骤（适用于任何语言/数据库）：

1.  读取文件

2.  使用连接字符串连接到数据库

3.  插入表格

有关特定信息和代码，请参阅[使用 Visual Basic 6 连接 Access 2003 。](http://visualbasic.ittoolbox.com/documents/connecting-access-2003-with-visual-basic-6-11826)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T20:29:16.617

我将在这里阅读两行之间的内容，并猜测您指的是文本文件中保存的某种表格数据。

如果是这种情况，那么[此处](http://connectionstrings.com/textfile)找到的 Jet（或 ODBC）连接字符串（连同 schema.ini 文件）可能就是您要查找的内容。

然后，您可以使用 ADODB 记录集从文本文件中选择数据并将其插入您的 Access 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-30T14:15:36.840

好的，我最近经常这样做。所以，假设你有一个对 SCRRUN.DLL 的引用，这个第一个函数将读取文件（并且会处理 ANSI 和 Unicode）：

```
Function ReadFileE(Filename As Variant) As String
    Dim oStream As scripting.TextStream
    Dim sData As String

    Set oFSO = New scripting.FileSystemObject
    sData = vbNullString
    On Error Resume Next
    Set oStream = oFSO.OpenTextFile(Filename, ForReading, False, TristateMixed)
    If Err.Number = 0 Then
        sData = oStream.ReadAll
        oStream.Close
    Else
        sData = vbNullString
        End If
        On Error GoTo 0
        ReadFileE = sData
End Function 
```

我使用以下函数打开数据库并查询它：

```
Function OpenMDB(sFile As Variant) As Variant  ' ADODB.Connection
    Dim nErr As Long
    Dim sErr As String
    Dim oConnection As Object 'ADODB.Connection
    Set oConnection = CreateObject("ADODB.Connection")
    On Error Resume Next
    oConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sFile
    nErr = Err.Number
    sErr = Err.Description
    On Error GoTo 0
    If nErr <> 0 Then
    Err.Raise OPENDATABASE_E_NOTFOUND, , sErr
    End If
    Set OpenMDB = oConnection
End Function

Function QueryMDB(ByRef oDB As Variant, sQuery As Variant, Optional bCmdText As Boolean = False) As Variant ''ADODB.Connection ADODB.Recordset
    Const adOpenForwardOnly  As Long = 0
    Const adOpenStatic As Long = 3
    Const adOpenDynamic As Long = 2
    Const adOpenKeyset As Long = 1
    Const adLockOptimistic As Long = 3
    Const adCmdText As Long = 1
    Dim oRecordSet As Object 'ADODB.Recordset
    Set oRecordSet = CreateObject("ADODB.RecordSet")
    oRecordSet.Open sQuery, oDB, adOpenKeyset, adLockOptimistic
    Set QueryMDB = oRecordSet
End Function 
```

现在是一些示例代码：

```
Dim sText As String
sText = ReadFileE("c:\windows\system32\SQLSRDME.TXT")
Dim db As Variant
Dim rs as Variant
set db = OpenMDB("c:\users\bruce\documents\database.mdb")
set rs = QueryMDB( db, "SELECT * FROM Table1" )
rs.Find "Field1='SQLSRDME.TXT'"
If Not rs.EOF Then
    rs("Field2") = sText
    rs.Update
End If
rs.Close
db.Close 
```

最后一点是从我的头顶上打出来的，所以它可能有洞。另一个代码是每天使用的 Class 文件。

此外，类文件代码在 COM 对象中公开，因此`Variant`声明占优势。

HTH。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-06-20T13:04:57.173

您可以尝试使用 Microsoft Excel 加载记事本文件，然后尝试从那里将其导入 Microsoft Acces。

# sharepoint - Sharepoint 中长时间运行的工作流，它们是否会阻止 w3wp 进程

> ID：1021561
> 
> 赞同：3
> 
> 时间：2009-06-20T12:57:38.547
> 
> 标签：sharepoint, workflow, zip, locking, w3wp

我们有一个带有 Search Server 的 WSS 3.0 安装，用于搜索文档并保存搜索定义以便稍后重复搜索。用户希望能够将搜索结果中的所有文件下载为一次性 Zip 文件。

我有一个非常基本的解决方案，当用户单击按钮时，文件的压缩是在 Web 部件中完成的，但是如果 zip 文件需要一段时间来创建用户等待（我怀疑，任何其他用户访问该站点将等待，因为我想文件的压缩是由 w3wp 进程完成的）。

我想也许我可以将 zip 文件创建作为一个工作流开始，一旦工作流完成，用户就可以下载文件，但我现在意识到工作流也在 w3wp 进程下运行。

如果工作流任务需要很长时间才能执行（例如，如果用户选择了要下载的大量文档），是否会影响 sharepoint 站点的其他用户并阻止他们访问任何页面，直到工作流完成？

显然，我们将对用户可以压缩下载的文件的最大大小设置一些限制，这样我们就不会杀死机器，但我仍然担心无论我们设置什么限制，工作流程仍然会结束锁定其他用户。是这样吗？有没有更好的建议来创建这样一个不会影响其他用户的任务？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T15:03:55.297

在创建 ZIP 的活动之前在工作流中放置一个延迟活动。这会将工作流从交互式 W3WP 流程推送到 WSSTimerV3 服务，因为它需要在未来运行。

问候，保罗

[http://blogs.msdn.com/pandrew](http://blogs.msdn.com/pandrew)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T16:40:01.150

1.  如果压缩时间少于 5 秒，我会在同一个线程中同步执行并完成它。最少的复杂性，最佳的用户体验，不会阻塞其他用户（受 ASP.NET 线程池大小的限制）。一堆点击会杀死服务器。

2.  如果您有大文件或大量流量，您可以在数据库中保留一个*先进先出*队列，并让 Windows 服务将它们取出并执行它们。这样您就可以控制用于压缩文件的线程数。此解决方案为您提供 O(1) 算法复杂度，但大大增加了设计的复杂性。您可能需要考虑使用 AJAX 之类的东西来告诉用户“您是队列中 45 人中的 4 人......”。

3.  如果您的文件大小变化很大，您可能希望将前两个解决方案作为策略实施，并通过查看解压缩文件大小和服务器资源可用性等因素来实施第三个自适应策略，该策略遵循前面提到的策略之一。用户体验和资源可用性之间的良好折衷，但最复杂（昂贵）。

格罗特，汉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T15:27:43.547

即使您在 Web 部件中进行压缩，也不会阻止其他用户。处理请求的 w3wp 工作线程在等待 zip 完成时被阻塞，但所有其他工作线程都能够继续。

尽管如此，如果有许多等待 zip 线程，这可能会成为一个可伸缩性问题：最终，传入请求可能会阻塞等待工作线程可用。这就是在 ASP.NET 中使用异步处理的原因。

使用工作流会有所帮助，因为工作流已启动，请求已完成，允许处理其他请求。

您担心在 w3wp 中运行的工作流。但是，我不知道它是在 w3wp 中的一个工作线程上运行的。我不知道 SharePoint 如何配置其工作流主机，但我怀疑它使用了一组不同的线程。

您可能想要对此进行一些负载测试以找出答案。创建一个虚拟 Web 部件，只要您请求包含它的页面，它就会运行一个 zip。运行该页面的负载并找出在它们开始排队等待工作线程可用之前可以获得多少请求。然后做同样的事情，但让 Web 部件启动工作流。同样，查看在请求开始排队之前可以同时运行多少个请求。

# asp.net-mvc - ASP.NET MVC 控制器方法必须返回 ActionResult 吗？

> ID：1021568
> 
> 赞同：58
> 
> 时间：2009-06-20T13:01:43.297
> 
> 标签：asp.net-mvc, polymorphism, actionresult, viewresult

作为 ASP.NET MVC 的新手，我一直想知道 Controller 方法的签名。在我见过的所有示例中，它们似乎总是返回 ActionResult，即使它们实际上返回了 ViewResult 实例或类似实例。

这是一个常见的例子：

```
public ActionResult Index()
{
    return this.View();
} 
```

`public ViewResult Index()`在这种情况下，将方法声明为并获得更强的类型支持不是更有意义吗？

实验表明这是可行的，所以它似乎是可能的。

我确实意识到可能存在需要多态性的情况（例如，如果您只想在某些情况下重定向，但在其他情况下显示视图），但如果该方法*总是*返回一个视图，我会找到一个 ViewResult 更多可取的。

就未来的兼容性而言，ActionResult 显然提供了更健壮的签名，但如果一个人控制了整个代码库，那么如果将来需要的话，总是可以将方法的签名更改为更通用的返回类型。

是否还有其他我不知道的注意事项，或者我应该继续使用特定的返回类型声明我的控制器方法？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-06-20T13:33:59.313

您绝对可以使用特定的返回类型，即使网络上的大多数示例似乎都返回**ActionResult**。唯一一次我会返回**ActionResult**类是当 action 方法的不同路径返回不同的子类型时。

Steven Sanderson 还建议在他的书[Pro ASP.NET MVC Framework](https://rads.stackoverflow.com/amzn/click/com/1430210079)中返回特定类型。看看下面的报价：

> *此操作方法特别声明它返回 ViewResult 的一个实例。如果方法返回类型是 ActionResult（所有操作结果的基类），它的工作方式也一样。事实上，一些 ASP.NET MVC 程序员将他们所有的操作方法声明为返回一个非特定的 ActionResult，即使他们确定它总是会返回一个特定的子类。然而，在面向对象编程中，方法应该返回它们可以返回的最具体的类型（以及接受它们可以接受的最通用的参数类型），这是一个公认的原则。遵循这一原则可以最大限度地提高调用方法的代码的便利性和灵活性，例如单元测试。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-06-20T13:18:21.733

始终返回您可以返回的最准确的类型。因此，当操作始终显示视图时，您应该返回 ViewResult。我只会在某些情况下（无效的发布数据）或 RedirectToRouteResult 在其他情况下返回 ViewResult 时使用 ActionResult 。

使用一些高级动作过滤器/执行场景，您甚至可以返回与 ActionResult 无关的完全不同的东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-20T13:13:06.580

[部分答案]：您并不总是返回 ActionResult，不。以下是您可以返回的其他一些结果的列表：

*   查看结果
*   部分查看结果
*   重定向结果
*   重定向到路由结果
*   内容结果
*   json结果
*   JavaScript结果
*   文件结果
*   空结果

有关更多信息，请参阅[文档](https://docs.microsoft.com/en-us/previous-versions/aspnet/dd410269(v=vs.98))。

也许这会有所帮助。祝你好运！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-20T13:40:42.327

是的，您可以定义您的操作，例如：`public ViewResult Index()`. 但有时您的操作可能会返回不同的结果（如果不将结果声明为基类，这是不可能的`ActionResult`）。例如：

```
public ActionResult Show()
{
    ...

    if(Request.IsAjaxRequest())
    {
        return PartialView(...);
    }

    return View(...);
} 
```

或者：

```
public ActionResult Show()
{
    ...

    try
    {
        ...
    }
    catch(Exception)
    {
        return RedirectToAction(...);
    }

    return View(...);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-20T14:12:45.650

ActionResult 是各种返回类型的基类。因此，您的操作必须返回一个 ActionResult*或从它派生的类*才能工作。常见的有`ViewResult`,`JsonResult`等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-14T21:18:51.997

是的，我有 Sanderson 的书，我喜欢关于具体的部分，因为当我查看其他控制器动作示例时，这让我很烦恼。我的哲学甚至 b4 学习 MVC 是，因为函数（返回值的方法）应该被视为好像你在声明一个变量/在上下文中可以替换相同类型的变量/引用，所以要具体说明类型，因为你如果声明一个 var （将其视为希望避免在应用程序中将所有变量定义为“对象”类型 - 更健壮，但您会失去一些设计时检查和类型安全性）。也有助于正确返回类型的控制器单元测试。

有关相关参考，请查看 Listkov 的替换原则（“SOLID”中的“L”）。

# ms-access - office 2003 和 2007 之间的 VBA 版本有区别吗？

> ID：1021571
> 
> 赞同：7
> 
> 时间：2009-06-20T13:02:56.100
> 
> 标签：ms-access, vba, ms-office

我是否可以不受惩罚地使用 access 2007 VBA 参考（具体而言，就基本语言和旧的 com 接口而言）为 access 2003 开发基于 VBA 的解决方案？

或者是否有一些新的/修改的语法添加到我需要注意的语言中？

Office 2007 中的对象模型是否得到了显着增强？

还有其他注意事项吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T13:32:20.597

VBA 语言本身在 Microsoft Office 的最新版本之间没有改变（将来也可能不会改变）。Access2000 以后的VBA 版本是VBA6。

然而，Office 应用程序的对象模型略有修改。Microsoft 通常只通过额外的方法和属性来扩展 OM。就 Access 而言，我无法向您提供任何详细信息，但您会在此处找到修改列表：

> *   [自 Microsoft Office 2003 以来的对象模型更改](http://msdn.microsoft.com/en-us/library/bb243750.aspx)（Access 开发人员参考）
> *   [新对象、集合和枚举](http://msdn.microsoft.com/en-us/library/bb243753.aspx)

通常，针对特定版本的 Office 开发的 VBA 解决方案将适用于较新的版本。魔鬼在于细节。由于错误修复和新功能，应用程序的行为可能与旧版本*略有*不同。找出一切是否仍然有效的唯一方法是进行详尽的测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-11-06T04:30:29.877

Excel 2007 中有一些新的属性、方法和对象。

但是，Excel 2003 中的大多数程序在 Excel 2007 中运行良好

VBA Excel 2003 中的一些东西在 Excel 2007 中不起作用。

我发现了4个问题。

*   "Chart.Add" give automation error in Excel 2007 when there are more than 1 cell selected

*   错误不会自行重置，必须在命令之前使用 Err.clear 才能释放错误。

    ```
     On Error Resume Next
            Intruction_That_Could_be_buggy_1
            if Err.Number <>0 Then
                 Err.Clear     '  <<<<==== This command is necessary
                 Intruction_That_Could_be_buggy_2                  
                 if Err.Number <>0 Then
                       .... 
    ```

*   Range(...).Paste(xlFormulas) 现在在存在可能的名称冲突时停止，必须使用

    ```
     Application.displayalerts = False
        Range(....).Paste(xlFormulas)
        Application.displayalerts = True 
    ```

*   在 Excel 2007 中保留了几个热键（如 Alt+N）。 Application.Onkey("%n","rotina") 在这种情况下不起作用。现在它是 ALT+Letra 样式的许多功能区快捷方式。我找不到任何方法来抑制这种行为。它应该使用其他热键来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-23T13:57:47.330

如果您将 accdb/mdb 编译为 accde/mde，则需要确保将它们编译为与主应用程序相同的版本。我在使用 Access 2003 MDE 和 Access 2007 时遇到了一些麻烦（显然反之亦然）。

# iphone - 创建 iPhone UI 元素

> ID：1021577
> 
> 赞同：2
> 
> 时间：2009-06-20T13:08:28.213
> 
> 标签：iphone, graphics, user-interface, interface-builder

我在界面生成器中找到了一堆 iPhone 对象，但我认为会有一个标准的图标包、渐变等来使事情更像苹果。

我应该如何创建这些图形，只需使用 png 或是否有我可以在界面生成器中使用的特殊绘图工具形状？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T13:23:45.217

您可以使用 iPhone SDK 原生支持的任何类型的图像。[在这里](https://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)您会找到一份清单。但。为了您的方便，我也会在这里列出：

*   标记的图像文件格式 (TIFF) .tiff, .tif
*   联合图像专家组 (JPEG) .jpg、.jpeg
*   图形交换格式 (GIF) .gif
*   便携式网络图形 (PNG) .png
*   Windows 位图格式 (DIB) .bmp、.BMPf
*   Windows 图标格式 .ico
*   Windows 光标 .cur
*   XWindow 位图 .xbm

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T14:35:18.613

不，您不会在界面生成器本身中找到任何形状工具。

您可能会在开发人员连接中四处搜索，例如： [https](https://developer.apple.com/iphone/library/samplecode/UICatalog/) ://developer.apple.com/iphone/library/samplecode/UICatalog/ 有一些带有类似苹果按钮的图像文件。这些可以以编程方式“拉伸”到任何大小，查看 [UIImage stretchableImageWithLeftCapWidth: topCapHeight:]

某些图像，例如出现在选项卡控制器中的图像（请参见世界时钟应用程序中屏幕的底部），是为您设计的。您提供图像，例如仅形状的 alpha 通道，当它被选中时，它会自动获得蓝色渐变。

此外，据称 XCode 对 .png 进行了优化以在 iPhone 上使用，因此尽管它可以支持过多的格式，但您可能会坚持使用 .png

# mysql - 考勤系统数据库设计

> ID：1021580
> 
> 赞同：8
> 
> 时间：2009-06-20T13:09:48.693
> 
> 标签：mysql, database

我正在为一所学校开展一个项目，其中特定模块处理考勤系统。我正在使用 LAMP(PHP 5.2+ MYSQL 5+) 堆栈进行开发。现在学校的实力在1500人左右，每年的工作日总天数在250人左右。另外，我要保留5年的记录才能抹去。

表结构为

```
studentId varchar(12) 
date date
fn varchar(1) *forenoon*
af varchar(1) *afternoon* 
```

如果我只使用一个表，这意味着 5 年期间有 1,875,000 条记录。现在，我考虑为每个类（而不是部分）制作一个表，而不是这样一个庞大的数据库。因此，考虑到有 12 个类，我将有 12 个表，这意味着每个表平均有 1,55,000 条记录，这是可管理的。

这是正确的方法吗？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-20T13:15:50.273

您正在做的事情称为过早优化。这是一个常见的错误。

你最好让你的数据库结构接近现实，如果将来需要优化或提高速度，你总是可以这样做。

根据经验并查看您的示例，单表解决方案看起来不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T13:19:18.097

几点。

*   200 万条记录*并不是*一张大桌子。
*   每个班级有一个单独的表格*绝对*不是标准化的。

您还没有真正提供足够的信息来重新链接到其他表以及该表将存储的其他内容（如果有的话）。但是您应该从所有表的 3NF 开始，并且只有在发现性能问题时才更改它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T13:14:21.460

只要您正确索引表列，第一个表就不应该有大问题。

我不同意将它分成 12 个类的想法，因为你不能保证它会保持这种方式（添加类、合并类等）。

为了提高效率而破坏数据库规范化是您应该只在极端情况下才考虑的事情（如果有的话）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T13:25:33.577

我建议没有必要拆分这张桌子。如果您为可能需要执行的任何选择性查询创建适当的索引，系统应该能够非常快速地找到所需的行。即使对于涉及所有行的分析查询，200 万条这样的记录也应该只需要一两秒钟的时间来扫描，我想这不会造成很大的问题。

MySQL 现在还支持将数据分区作为可选功能。分区类似于您将表拆分的建议，但它是在物理级别完成的，因此使用您的架构的用户或开发人员看不到它。如果您发现单表实现仍然太慢，这可能是一种有用的方法。 [本文档](http://dev.mysql.com/doc/refman/5.4/en/partitioning-overview.html)概述了 MySQL 5.4 中的分区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T13:32:30.580

校验和，

我赞同 Michiel 的观点，认为这是过早的优化。

您以后基本上可以做的提高性能的事情是使用数据库归档和分区功能，以便您的数据库读取高效。我也可以建议在此表上创建索引。无论如何，我不相信 100 万条记录是巨大的。今天的数据库能够处理如此大的数字。此外，您只会在 3 年内遇到性能问题

所以继续写代码，而不是去想出了什么问题！

# php - 如何找到包含方括号的字符串？

> ID：1021591
> 
> 赞同：1
> 
> 时间：2009-06-20T13:14:02.617
> 
> 标签：php, regex, square-bracket

我正在使用正则表达式在文本中搜索一堆关键字。

找到了所有关键字，但只有一个：[DAM]Berlin。我知道它包含一个方括号，所以我逃脱了它，但仍然没有运气。我究竟做错了什么？

这是我的php代码。

搜索关键字的文本：

```
$textToSearch= '<p><br>
Time ¦ emit LAb[au] <br>
<br>
[DAM]Berlin gallery<br>
<br>
Exhibition: February 21st - March 28th, 2009 <br>
<br>
Opening: Friday,  February 20th, 2009 7-9 pm <br>'; 
```

正则表达式：

```
$find='/(?![^<]+>)\b(generative art console|Game of Life|framework notations|framework|Floating numbers|factorial|f5x5x3|f5x5x1|eversion|A-plus|16n|\[DAM\]Berlin gallery)\b/s'; 
```

替换回调函数：

```
function replaceCallback( $match )
{
      if ( is_array( $match ) )
      {
        $htmlVersion = htmlspecialchars( $match[1], ENT_COMPAT, 'UTF-8' );
        $urlVersion  = urlencode( $match[1] );
        return '<a class="tag" rel="tag-definition" title="Click to know more about ' . $htmlVersion . '" href="?tag=' . $urlVersion. '">'. $htmlVersion  . '</a>';
      }
      return $match;
} 
```

最后，电话：

```
$tagged_content = preg_replace_callback($find, 'replaceCallback',  $textToSearch); 
```

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T13:22:21.303

我认为这是因为`[`不是“单词字符”，所以`\b[`无法`[`匹配`[DAM]Berlin`. 您可能需要将您的正则表达式更改为：

```
$find='/(?![^<]+>)(\b(?:generative art console|Game of Life|framework notations|framework|Floating numbers|factorial|f5x5x3|f5x5x1|eversion|A-plus|16n)|\[DAM\]Berlin gallery)\b/s'; 
```

* * *

**编辑：**来自丹尼尔詹姆斯的评论：

> 这可能更接近最初的意图，因为它仍然会检查 '[Dam]' 不跟随单词字符：
> 
> ```
> $find='/(?![^<]+>)(?<!\w)(generative art console|Game of Life|framework notations|framework|Floating numbers|factorial|f5x5x3|f5x5x1|eversion|A-plus|16n|\[DAM\]Berlin gallery)\b/s'; 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T13:52:43.630

正则表达式的第一部分是 '/(?![^<]+>)\b' 所以如果它之前的字符是 '>'，它不会只匹配“[DAM]柏林画廊”吗？

尝试：

```
$find='/(?![^<]+>)\b(generative art console|Game of Life|framework notations|framework|Floating numbers|factorial|f5x5x3|f5x5x1|eversion|A-plus|16n|\[DAM\]Berlin gallery)\b/sm' 
```

这会将 m 修饰符添加到您的正则表达式中，以便它忽略新行

> [http://www.phpro.org/tutorials/Introduction-to-PHP-Regex.html#8](http://www.phpro.org/tutorials/Introduction-to-PHP-Regex.html#8)
> 
> “[m 修饰符] 将字符串视为末尾只有一个换行符，即使我们的字符串中有多个换行符。”

# c# - C# 到 VB.NET 事件转换

> ID：1021599
> 
> 赞同：0
> 
> 时间：2009-06-20T13:16:18.260
> 
> 标签：c#, vb.net, event-handling

将应用程序从 C#（1.1 框架）移植到 VB.NET（3.5 框架），我遇到了最后一个基于事件的问题，我无法理解。

这是原始的 C# 代码

```
public delegate void SpecialEventHandler(object sender,SpecialEventArgs e);
public event SpecialEventHandler SpecialEvent = null;

_SpecialLogWriter  SpecialWriter = new _SpecialLogWriter(this.SpecialEvent); 
```

这是转换后的 VB.NET 代码

```
Public Delegate Sub SpecialEventHandler(ByVal sender as Object, ByVal e as SpecialEventArgs)
Public Event SpecialEvent as SpecialEventHandler

Dim SpecialWriter as New _SpecialLogWriter(Me.SpecialEvent) 
```

SpecialLogWriter 构造函数需要一个 SpecialEventHandler，但是 SpecialLogWriter 的构造函数中的 Me.SpecialEvent 给了我错误消息，这是一个事件，不能直接调用。

我是否错过了另一位代表，或者这只是语言之间的声明问题之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T13:27:50.090

您说构造函数需要事件处理程序，但您传递的是事件，而不是事件处理程序。你不应该使用：

```
Dim SpecialWriter as New _SpecialLogWriter(New SpecialEventArgs()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T13:15:42.847

我不得不怀疑原始代码是否一开始就可以正常工作。我只是从 SpecialEvent 声明中删除了事件标签，此时似乎一切正常。

# asp.net-mvc - ASP.Net MVC 路由策略

> ID：1021606
> 
> 赞同：4
> 
> 时间：2009-06-20T13:19:12.963
> 
> 标签：asp.net-mvc, routing

我玩 ASP.Net MVC 已经有一段时间了。我发现最困难的事情是路由表。

我发现大多数示例都保留了默认路由。我发现这会导致很多错误，其中默认路由重定向到 HomeController 的操作不存在。导致奇怪的错误消息，您希望看到一个简单的 404。

我最终选择了一个路由设置，在该设置中我明确定义了我想要允许的所有控制器/操作组合，并在最后使用一个 catch-all 重定向到一个显示合理错误消息的 404 页面。

我在这里错过了什么吗？或者这确实是一种做事的好方法？

* * *

看着我得到的答案，我想我最好澄清一下这个问题。

我正在尝试对我正在构建的网站的路由方案进行防呆。我注意到，当我离开默认的 {controller}/{action}/{id} 路由时，我想显示 404 错误的各种 URL 实际上被路由到带有无效操作的 HomeController 并导致一些丑陋的错误改为消息。

我有点困惑，因为大多数代码示例都保留在默认路由中。它的存在是有原因的还是可以删除它？

我现在使用的方案看起来有点像这样

```
 routes.MapRoute( "About", "About", new {controller = "Page", action = "About"} );
        routes.MapRoute( "SignIn", "SignIn", new {controller = "Page", action = "SignIn"} );
        routes.MapRoute( "SignOut", "SignOut", new {controller = "Page", action = "SignOut"} );
        routes.MapRoute( "Authenticate", "Authenticate", new { controller = "Authentication", action = "Authenticate" });

        routes.MapRoute("CatchAll", "{*url}", new { controller = "Error", action = "Http404" }); 
```

我为系统中的每个操作指定了一条路线。并在最后显示 404。这是做到这一点的好方法还是有更简单的方法可以使路由方案万无一失？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-20T14:48:31.443

如果这是您使用的默认路由：

```
routes.MapRoute(
            "Default",                                             
            "{controller}/{action}/{id}",                           
            new { controller = "Home", action = "Index", id = "" } 
        ); 
```

然后默认使用“HomeController”和“Index”操作，除非您的 URL 另有说明。

例如：

“ [http://www.something.com/](http://www.something.com/) ” 将使用 Home 控制器的 Index 动作，因为它们是默认的控制器和动作。

“ [http://www.something.com/foo](http://www.something.com/foo) ”将使用 Foo 控制器的 Index 操作，因为“Index”是默认操作。

" [http://www.something.com/foo/bar](http://www.something.com/foo/bar) " 将使用 Foo 控制器的 "bar" 动作

" [http://www.something.com/foo/bar/1](http://www.something.com/foo/bar/1) " 将使用 Foo 控制器的 "bar" 动作，将 "1" 作为 "id" 参数传递

如果你没有“FooController”，任何以“ [http://www.something.com/foo](http://www.something.com/foo) ”开头的东西都会失败。同样，如果您的 FooController 没有“Bar”动作，那么“ [http://www.something.com/foo/bar](http://www.something.com/foo/bar) ”将失败。

您可能已经知道我在上面发布的所有内容。如果是这种情况，您会发布失败的 URL，以便我们更好地提供帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T14:59:51.920

我更喜欢为每个操作方法显式设置路由。

看看[这个](https://stackoverflow.com/questions/894779/asp-net-mvc-routing-via-method-attributes)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-20T16:36:03.853

这是一个非常好的实用程序，可以帮助您调试路由：

[Phil Haack 的路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-18T14:16:41.873

这个问题有点老了，但我刚刚遇到它，有同样的问题。

我不太热衷于手动定义大量路由，也不热衷于添加一堆属性来自动为我创建路由（Arnis 的链接）。

经过一番考虑，我决定使用我创建的简单 RouteConstraint。我修改了默认路由以使用它，并将我的 404 总括添加到默认路由之下，如下所示：

```
路线.MapRoute(
    “默认”，
    "{controller}/{action}/{id}",
    新的{控制器=“家”，动作=“索引”，id=“”}，
    新的 { 控制器 = 新的 ExistingControllerActionConstraint() }
);

路线.MapRoute(
    “一网打尽”，
    "{*catchall}",
    新{控制器=“家”，动作=“未找到”}
);

```

和约束类：

```
公共类 ExistingControllerActionConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        类型 t = Type.GetType("MvcApplication_BareMinimum7.Controllers." + values["controller"] + "Controller");

        如果（t == null）
        {
            返回假；
        }

        MethodInfo mi = (from m in t.GetMethods() where m.Name == values["action"].ToString() select m).FirstOrDefault();

        返回（mi！= null）；
    }
}

```

使用反射和 LINQ 的成本可能超过注册数以百计的路由的成本，但这对我来说似乎更干净。

# iphone - UIProgressView：如何获得旧样式？

> ID：1021608
> 
> 赞同：1
> 
> 时间：2009-06-20T13:20:17.627
> 
> 标签：iphone, cocoa-touch, uikit, uiprogressview

我正在寻找 UIProgressView 的旧样式：

[替代文字 http://img.skitch.com/20090620-dagnbt6eh2s884nfkbkqgne1re.jpg](http://img.skitch.com/20090620-dagnbt6eh2s884nfkbkqgne1re.jpg)

我能够展示的唯一 UIProgressViewStyle 是：

[替代文字 http://img.skitch.com/20090620-ewujnw3r62qnb91qpbdh8iktne.jpg](http://img.skitch.com/20090620-ewujnw3r62qnb91qpbdh8iktne.jpg)

旧的还在吗？设置属性`UIProgressViewStyle`总是会导致蓝色的 UIProgressView。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-10-08T16:40:11.223

值得一提的是，访问旧式进度条的另一种方法是以通常的方式创建 UIProgressView 控件。从 iOS 4.1 开始，您可以通过将进度视图的样式设置为未记录的值 100 来获得旧外观。

这避免了使用未记录的类，甚至调用未记录的方法。但是，我敢肯定苹果仍然不会批准.. ;-)

戴夫

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-01T21:59:27.647

我认为 UIProgressView 有两种样式。默认值称为 UIProgressViewStyleDefault，而您所指的默认值称为 UIProgressViewStyleBar。

这些设置如下 yourUIProgressView.ProgressViewStyle = UIProgressViewStyleBar;

或者

没有设置任何默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T21:43:30.453

She wrote her book when the SDK was still NDA and before it used IB. Many, many changes occurred after that time.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-29T01:50:16.927

它是**UIProgressBar**，一个 UIProgressView 的私有子类。

您可以通过这种方式使用它，但 Apple 可能会拒绝您的应用：

```
[[NSClassFromString(@"UIProgressBar") alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 90.0f)]; 
```

# php - CodeIgniter URI 中的百分比符号

> ID：1021609
> 
> 赞同：5
> 
> 时间：2009-06-20T13:20:24.863
> 
> 标签：php, regex, codeigniter

我需要将编码字符串传递给 CodeIgniter 控制器。

**示例**：

```
DOSOMETHING/Coldplay/Fix+You/273/X+%26+Y/ 
```

我的问题是百分比符号是不允许的字符。我尝试使用以下内容更改配置文件：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-\+\%'; 
```

可以，`+`但`%`无效。你能帮我改变这个reg exp，让它允许`%`符号吗？提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-20T14:02:27.353

将“ **-** ”放在字符串的末尾，否则它会被解释为范围。如您所见， % 已经在允许的字符列表中。

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_+-'; 
```

* * *

嗯......再次查看您的示例字符串后。这就是你得到“ `The URI you submitted has disallowed characters`”的原因。

**简短说明**：将 & 符号添加**到**允许的字符列表中

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_+&-'; 
```

* * *

**长解释**

有 2 个东西一起玩。

**A)** CodeIgniter 检查所有 URI**段**是否存在不允许的字符。这是通过将允许的字符列入白名单来实现的。哪些是允许的，可以在*/system/application/config/config.php*`$config['permitted_uri_chars']`变量中查看。默认值设置为类似`'a-z 0-9~%.:_-'`. 因此，允许从 a 到 z 的所有字母、空格、所有数字和以下字符 *~%.:_-。

好的，让我们将其与您所说的示例 URI 进行比较

```
a-z 0-9~%.:_-
DO_SOMETHING/Coldplay/Fix+You/273/X+26+Y/   //note the missing % 
```

所有字符都可以...但是等一下加号**+**呢？它不在允许的字符列表中！然而URI没有被抱怨？这是解决您问题的关键。

**B)** CodeIgniter在白名单字符检查之前对 URI 段进行[urldecode ，以防止有人通过简单地对 URI 进行 urlencoding 来绕过检查。](http://www.php.net/urldecode)因此**+**被解码为空格。这种行为是因为[urlencode](http://www.php.net/urlencode)（将空格编码为**+**号，偏离[RFC 1738](http://www.faqs.org/rfcs/rfc1738.html)）。这就解释了为什么允许使用**+**号。

这两件事结合起来也解释了为什么这个特定的 URI 不起作用。

```
urldecode(DO_SOMETHING/Coldplay/Fix+You/273/X+%26+Y/) //evaluates to
//DO_SOMETHING/Coldplay/Fix You/273/X & Y/ 
```

哎呀... urldecoding 将**%26**转换为**&**

这不是一个允许的字符。谜团;-) 解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T22:37:43.807

试试这个： $config['uri_protocol'] = "PATH_INFO";

# php - 奇数类问题

> ID：1021611
> 
> 赞同：0
> 
> 时间：2009-06-20T13:21:04.270
> 
> 标签：php, mysql

在使我的代码面向对象的过程中，遇到了这个问题。下面的课程给了我一个奇怪的问题。当我创建函数 CartTotal() 时，它回显了正确的值，但函数 DisplayListings(); 没有显示任何 MySQL 数据（都使用 $this->displaylistings）。如果我更改页面上调用这两个函数的顺序，CartTotal(); 什么都没有，并且 DisplayListings(); 正常工作。所以看起来好像使用 $this->displaylistings 搞砸了。如果你知道我在做什么，请告诉我。这是课程：（仍然没有完成它并且需要进行一些规范化）。

```
class Listing {

    public $displaylistings;
    public $displaycount;
    public $viewall;
    public $ShopperID;
    public $numrows;

    public function __construct() {

        $Person = new User();

        $ShopperID = mysql_query("SELECT * FROM users WHERE Username = '$Person->username'");
        $row_ShopperID = mysql_fetch_object($ShopperID);
        $this->ShopperID = $row_ShopperID->UserID;

        $this->displaylistings=mysql_query("SELECT * FROM nordstromlisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM saksfifthavenuelisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM guesslisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM gnclisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM urbanoutfitterslisting WHERE ShopperID = '$tnis->ShopperID'
        UNION ALL SELECT * FROM bananarepubliclisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM americaneaglelisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM neimanmarcuslisting WHERE ShopperID = '$this->ShopperID'
        UNION ALL SELECT * FROM footlockerlisting WHERE ShopperID = '$this->ShopperID'");
        if (mysql_num_rows($this->displaylistings) == 0) {
            echo "<div id='nolistings'><a href='shop.php'>You have no active listings, <br />click here to get started.</a></div>";
            $this->numrows = mysql_num_rows($this->displaylistings);
        }
        elseif (mysql_num_rows($this->displaylistings) == 1 ) {
            $this->displaycount = 1;
            $this->numrows = mysql_num_rows($this->displaylistings);
        }
        elseif (mysql_num_rows($this->displaylistings) == 2 || mysql_num_rows($this->displaylistings) > 2) {
            $this->displaycount = 2;
            $this->numrows = mysql_num_rows($this->displaylistings);
        }
    }

    public function CartTotal() {
        for ($i=0;$i<$this->numrows;$i++) {
            $row = mysql_fetch_assoc($this->displaylistings);
            echo $row['DiscountedPrice'];
        }
    }

    public function DeleteListing() {
        if ($_POST['deletelisting'] == 'yes') {
            $deleteid = $_POST['deleteid'];
            $deletestore = "$_POST[storename]";
            $idstorehistory = str_replace("listing", "history", $deletestore);
            $movetohistory = mysql_query("INSERT INTO $idstorehistory SELECT * FROM $identifystore WHERE id = $deleteid");
            $userdelete = mysql_query("DELETE FROM $deletestore WHERE id = $deleteid");
        }
    }

    public function DisplayListing() { 

            for($i=0;$i<$this->displaycount;$i++) {
            $row=mysql_fetch_assoc($this->displaylistings);

            // Check to what store this listing belongs to
            $nordstromtest=mysql_query("SELECT * FROM nordstromlisting WHERE ShopperID = '$this->ShopperID'");
            $nordstromstore=mysql_fetch_assoc($nordstromtest);
            if ($row == $nordstromstore) {
                $storename = "Nordstrom";
                $storetbl = "nordstromlisting";
            }

            $saksfifthavenuetest=mysql_query("SELECT * FROM saksfifthavenuelisting WHERE ShopperID = '$this->ShopperID'");
            $saksfifthavenuestore=mysql_fetch_assoc($saksfifthavenuetest);
            if ($row == $saksfifthavenuestore) {
                $storename = "Sak's Fifth Avenue";
                $storetbl = "saksfifthavenuelisting";
            }

            $neimanmarcustest=mysql_query("SELECT * FROM neimanmarcuslisting WHERE ShopperID = '$this->ShopperID'");
            $neimanmarcusstore=mysql_fetch_assoc($neimanmarcustest);
            if ($row == $neimanmarcusstore) {
                $storename = "Neiman Marcus";
                $storetbl = "neimanmarcuslisting";
            }

            $guesstest=mysql_query("SELECT * FROM guesslisting WHERE ShopperID = '$this->ShopperID'");
            $guessstore=mysql_fetch_assoc($guesstest);
            if ($row == $guessstore) {
                $storename = "GUESS";
                $storetbl = "guesslisting";
            }

            $americaneagletest=mysql_query("SELECT * FROM americaneaglelisting WHERE ShopperID = '$this->ShopperID'");
            $americaneaglestore=mysql_fetch_assoc($americaneagletest);
            if ($row == $americaneaglestore) {
                $storename = "American Eagle";
                $storetbl = "americaneaglelisting";
            }

            $gnctest=mysql_query("SELECT * FROM gnclisting WHERE ShopperID = '$this->ShopperID'");
            $gncstore=mysql_fetch_assoc($gnctest);
            if ($row == $gncstore) {
                $storename = "GNC";
                $storetbl = "gnclisting";
            }

            $footlockertest=mysql_query("SELECT * FROM footlockerlisting WHERE ShopperID = '$this->ShopperID'");
            $footlockerstore=mysql_fetch_assoc($footlockertest);
            if ($row == $footlockerstore) {
                $storename = "Foot Locker";
                $storetbl = "footlockerlisting";
            }

            $bananarepublictest=mysql_query("SELECT * FROM bananarepubliclisting WHERE ShopperID = '$this->ShopperID'");
            $bananarepublicstore=mysql_fetch_assoc($bananarepublictest);
            if ($row == $bananarepublicstore) {
                $storename = "Banana Republic";
                $storetbl = "bananarepubliclisting";
            }

            $urbanoutfitterstest=mysql_query("SELECT * FROM urbanoutfitterslisting WHERE ShopperID = '$this->ShopperID'");
            $urbanoutfittersstore=mysql_fetch_assoc($urbanoutfitterstest);
            if ($row == $urbanoutfittersstore) {
                $storename = "Urban Outfitters";
                $storetbl = "urbanoutfitterslisting";
            }

            //Delete old listings (test with minutes...)

            $timenow = date("Y-m-d");
            $time = strtotime($timenow);
            $storehistory = str_ireplace("listing","history","$storetbl");
            $movetohistory = mysql_query("INSERT INTO $storehistory SELECT * FROM $storetbl WHERE $time - datecreated >= 432000") or die ("Query failed: " . mysql_error() . " Actual query: " . $query);
            $deltefromlisting = mysql_query("DELETE FROM $storetbl WHERE $time - datecreated >= 432000") or die ("Query failed: " . mysql_error() . " Actual query: " . $query);

            //Item link modifactions
            if ($row['link'] != null) {
                $shortlink = substr($row['link'],0,30);
                $shortlink .= '...';
            }

            if ($row['itemsize'] != null ) {
                $mensshirt = $row['itemsize'];
            }

            if ($row['waistsize'] != 0) {
                $waistsize = $row['waistsize'];
                $w = 'Waist';
            }

            if ($row['lengthsize'] != 0) {
                $lengthsize = $row['lengthsize'];
                $l = 'Length';
            }

            if ($row['ladystopsize'] != null) {
                $ladystopsize = $row['ladystopsize'];
            }

            if ($row['ladysdresssize'] != 0) {
                $ladysdresssize = $row['ladysdresssize'];
            }

            if ($row['ladysbottomsize'] != 0) {
                $ladysbottomsize = $row['ladysbottomsize'];
            }

            if ($row['shoesize'] != 0) {
                $shoesize = $row['ladysshoesize'];
            }

            echo "<b><div id='storenametab'><span class='storename'>$storename</span></div></b>";
            echo "<div id='listings1'><span id='orderdetails'>Item Number : $row[itemnum] <br />";
            echo "Discount Price: $$row[DiscountedPrice] <br />";
            echo "Item Type : $row[itemtype]<br />";
            echo "Item Size :
            $mensshirt 
            $waistsize $w 
            $lengthsize $l 
            $ladystopsize 
            $ladysdresssize 
            $ladysbottomsize 
            $shoesize
            <br />";
            echo "Item Color: $row[itemcolor] <br />";

            if ($row['link'] != null) {
            echo "Item URL: <a href='$row[link]' target='_blank'>$shortlink</a><br />";
            }           
        //STATUS

            if ($row['VillainID'] == 0)
                echo "Status: Unclaimed <br />";

            else {

                $VillainPaypalEmail = mysql_query("SELECT PaypalEmail FROM villains WHERE VillainID = '$row[VillainID]'");
                $fetchVillain = mysql_fetch_assoc($VillainPaypalEmail);
                $VillainPaypal = $fetchVillain['PaypalEmail'];

                $itemname = "Item Number: $row[itemnum] -- $row[itemtype] -- $mensshirt $waistsize $w $lengthsize $l $ladystopsize $ladysdresssize $ladysbottomsize $shoesize -- $row[itemcolor]";
                $discprice = $row['DiscountedPrice'];
                $state = mysql_query("SELECT state from users WHERE Username = '$username'");
                $fetchstate = mysql_fetch_assoc($state);
                $state = $fetchstate['state'];

                switch ($storetbl) {
                    case "nordstromlisting":
                        $shipping = 8;
                        if ($state == 'AZ' || 'CA' || 'CO' || 'CT' || 'FL' || 'GA' || 'HI' || 'IA' || 'ID' || 'IL' || 'IN' || 'KS' || 'MA' || 'MD' || 'MN' || 'MO' || 'NC' || 'NJ' || 'NV' || 'NY' || 'OH' || 'PA' || 'RI' || 'SD' || 'TX' || 'UT' || 'VA' || 'WA') {
                            $tax = $discprice * .09;
                        }
                        else {
                            $tax = $discprice * .02;
                        }
                        break;
                    case "saksfifthavenuelisting":
                        switch ($discprice) {
                            case ($discprice <= 25):
                                $shipping = 5;
                                break;
                            case ($discprice > 25 && $discprice <= 50):
                                $shipping = 8;
                                break;
                            case ($discprice > 50 && $discprice <= 100):
                                $shipping = 10;
                                break;
                            case ($discprice > 100 && $discprice <= 200):
                                $shipping = 13;
                                break;
                            case ($discprice > 200 && $discprice <= 300):
                                $shipping = 15;
                                break;
                            case ($discprice > 300 && $discprice <= 500):
                                $shippig = 17;
                                break;
                            case ($discprice > 500):
                                $shipping = 20;
                                break;
                        }
                        if ($state == 'AL' || 'AZ' || 'CA' || 'CO' || 'CT' || 'FL' || 'GA' || 'IL' || 'IN' || 'LA' || 'MA' || 'MD' || 'MN' || 'MO' || 'NC' || 'NJ' || 'NV' || 'NY' || 'OH' || 'OK' || 'PA' || 'SC' || 'TX' || 'VA' || 'DC') {
                            $tax = $discprice * .09;
                        }
                        else {
                            $tax = .02;
                        }
                        break;
                    case "neimanmarcuslisting":
                        switch ($discprice) {
                            case ($discprice <= 25):
                                $shipping = 6;
                                break;
                            case ($discprice > 25 && $discprice <= 50):
                                $shipping = 9;
                                break;
                            case ($discprice > 50 && $discprice <= 100):
                                $shipping = 11.50;
                                break;
                            case ($discprice > 100 && $discprice <= 200):
                                $shipping = 16.50;
                                break;
                            case ($discprice > 200 && $discprice <= 300):
                                $shipping = 18.50;
                                break;
                            case ($discprice > 300 && $discprice <= 500):
                                $shippig = 21.50;
                                break;
                            case ($discprice > 500 && $discprice <= 700):
                                $shipping = 25.50;
                                break;
                            case ($discprice > 700 && $discprice <= 1000):
                                $shipping = 29.00;
                                break;
                            case ($discprice > 1000):
                                $shipping = 32.00;
                                break;
                        }
                        if ($state == 'AZ' || 'CA' || 'CO' || 'FL' || 'GA' || 'HI' || 'IL' || 'MA' || 'MD' || 'MI' || 'MN' || 'MO' || 'NC' || 'NJ' || 'NV' || 'NY' || 'PA' || 'TX' || 'VA' || 'WA' || 'DC') {
                            $tax = $discprice * .09;
                        }
                        else {
                            $tax = $discprice * .02;
                        }   
                        break;
                    case "urbanoutfitterslisting":
                        switch ($discprice) {
                            case ($discprice <= 50):
                                $shipping = 6;
                                break;
                            case ($discprice > 25 && $discprice < 50):
                                $shipping = 8;
                                break;
                            case ($discprice >= 50 && $discprice < 100):
                                $shipping = 10;
                                break;
                            case ($discprice >= 100 && $discprice < 150):
                                $shipping = 12;
                                break;
                            case ($discprice > 150):
                                $shipping = 0;
                                break;
                        }
                        if ($state == 'AL' || 'AZ' || 'CA' || 'CO' || 'CT' || 'FL' || 'GA' || 'IL' || 'IN' || 'KS' || 'LA' || 'MA' || 'MD' || 'MI' || 'MN' || 'MO' || 'NB' || 'NM' || 'NC' || 'OH' || 'OR' || 'NV' || 'NY' || 'PA' || 'RI' || 'SC' || 'TN' || 'TX' || 'UT' || 'VA' || 'VT' || 'WA' || 'WI' || 'DC') {
                            $tax = $discprice * .09;
                        }
                        else {
                            $tax = $discprice * .02;
                        }
                        break;
                    case "gnclisting":
                        $shipping = 6;
                        break;
                    case "bananarepubliclisting";
                        $shipping = 7;
                        //call Banana Republic for list of taxable states
                        break;
                    case "guesslisting":
                        $shipping = 7.95;
                        if ($state == 'AZ' || 'CA' || 'CO' || 'CT' || 'FL' || 'GA' || 'HI' || 'IL' || 'IN' || 'KS' || 'LA' || 'MA' || 'MD' || 'MI' || 'MN' || 'MO' || 'NJ' || 'NV' || 'NY' || 'NC' || 'OH' || 'PA' || 'RI' || 'SC' || 'TN' || 'TX' || 'VA' || 'WA') {
                            $tax = $discprice * .09;
                        }
                        else {
                            $tax = $discprice * .02;
                        }
                        break;
                    case "footlockerlisting";
                        $shipping = 6.99;
                        if ($state == 'AK' || 'DE'|| 'MT' || 'NH' || 'OR') {
                            $tax = $discprice * .02;
                        }
                        else {
                            $tax = $discprice * .09;
                        }
                        break;
                    case "americaneaglelisting":
                        switch($discprice) {
                            case ($discprice < 100):
                            $shipping = 7.00;
                            break;
                            case ($discprice > 100):
                            $shipping = 0;
                            break;
                        }
                            $tax = $discprice * .09;
                        break;
                }

                echo "Status: Claimed!"?>
                <form action='https://www.paypal.com/cgi-bin/webscr' target='blank' method='post'> 
                <input type='hidden' name='business' value='<?php echo $VillainPaypal ?>'> 
                <input type='hidden' name='cmd' value='_xclick'> 
                <input type='hidden' name='item_name' value="<?php echo $itemname ?>"> 
                <input type='hidden' name='shipping' value="<?php echo $shipping ?>"> 
                <input type='hidden' name='tax' value="<?php echo $tax ?>"> 
                <input type='hidden' name='amount' value='<?php echo $row['DiscountedPrice'] ?>'> 
                <input type='hidden' name='currency_code' value='USD'> 
                <input type='image' name='submit' border='0' 
                src='https://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif' 
                alt='PayPal - The safer, easier way to pay online'> 
                <img alt='blahblah' border='0' width='1' height='1' 
                src='https://www.paypal.com/en_US/i/scr/pixel.gif' > 
                </form>
                <br />
                <?php ;
        //STATUS
        }           
            ?><br /><form action="MyAccountNEW.php" method="POST">
                <input type="hidden" name="deletelisting" id="deletelisting" value="yes">
                <input type="hidden" name="deleteid" id="deleteid" value="<?php echo $row['id']; ?>">
                <input type="hidden" name="storename" id="storename" value="<?php echo "$storetbl"; ?>">
                <input type="submit" class="deletelistingbutton" value="Delete listing">
               </form>

            <?php

            echo "</span></div>";

            $mensshirt = "";
            $waistsize = "";
            $lengthsize = "";
            $ladystopsize = "";
            $ladysdresssize = "";
            $ladysbottomsize = "";
            $shoesize = "";
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T13:35:41.277

您正在从两个不同的函数中消耗相同的资源。

**如果您在查询句柄（在本例中为 $this->displaylistings** ）读取带有 mysql_fetch_something 的行，您将无法再次读取它。

尝试将此行放在 DisplayListing 和 CartTotal 的开头

```
mysql_data_seek($this->displaylistings, 0) 
```

**它应该将 mysql 内部游标重新定位到与$this->displaylistings**关联的结果集的第一行。让我知道它是否有效

# python - 退出守护进程的问题

> ID：1021613
> 
> 赞同：4
> 
> 时间：2009-06-20T13:22:22.567
> 
> 标签：python, daemon, multiprocessing

我正在编写一个生成其他几个子进程的守护程序。运行`stop`脚本后，主进程在打算退出时继续运行，这让我很困惑。

```
import daemon, signal
from multiprocessing import Process, cpu_count, JoinableQueue
from http import httpserv
from worker import work

class Manager:
    """
    This manager starts the http server processes and worker
    processes, creates the input/output queues that keep the processes
    work together nicely.
    """
    def __init__(self):
        self.NUMBER_OF_PROCESSES = cpu_count()

    def start(self):
        self.i_queue = JoinableQueue()
        self.o_queue = JoinableQueue()

        # Create worker processes
        self.workers = [Process(target=work,
                                args=(self.i_queue, self.o_queue))
                        for i in range(self.NUMBER_OF_PROCESSES)]
        for w in self.workers:
            w.daemon = True
            w.start()

        # Create the http server process
        self.http = Process(target=httpserv, args=(self.i_queue, self.o_queue))
        self.http.daemon = True
        self.http.start()

        # Keep the current process from returning
        self.running = True
        while self.running:
            time.sleep(1)

    def stop(self):
        print "quiting ..."

        # Stop accepting new requests from users
        os.kill(self.http.pid, signal.SIGINT)

        # Waiting for all requests in output queue to be delivered
        self.o_queue.join()

        # Put sentinel None to input queue to signal worker processes
        # to terminate
        self.i_queue.put(None)
        for w in self.workers:
            w.join()
        self.i_queue.join()

        # Let main process return
        self.running = False

import daemon

manager = Manager()
context = daemon.DaemonContext()
context.signal_map = {
        signal.SIGHUP: lambda signum, frame: manager.stop(),
        }

context.open()
manager.start() 
```

该`stop`脚本只是一个单行脚本`os.kill(pid, signal.SIGHUP)`，但之后子进程（工作进程和http服务器进程）很好地结束，但主进程只是停留在那里，我不知道是什么让它无法返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T22:49:26.867

您创建了 http 服务器进程，但没有创建`join()`。如果不是执行 an`os.kill()`来停止 http 服务器进程，而是向它发送一个停止处理标记（`None`就像您发送给工作人员一样）然后执行 a 会发生 `self.http.join()`什么？

**更新**：您还需要**为每个工作人员**`None`将哨兵发送到输入队列一次。你可以试试：

 **```
 for w in self.workers:
        self.i_queue.put(None)
    for w in self.workers:
        w.join() 
```

注意您需要两个循环的原因是，如果您将`None`放入队列中的同一循环中，则`join()`可能`None`会被除 之外的工作人员拾取`w`，因此加入`w`将导致调用者阻塞。

您没有显示工作人员或 http 服务器的代码，因此我假设这些在调用 task_done 等方面表现良好，并且每个工作人员都会在看到 a`None`时立即退出，而不会 `get()`从输入中获取更多内容队列。

另外，请注意，至少存在[一个开放的、难以重现的问题](http://bugs.python.org/issue4660)，`JoinableQueue.task_done()`这可能会困扰您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-23T19:34:59.787

我尝试了一种不同的方法，这似乎有效（注意我删除了代码的守护进程部分，因为我没有安装该模块）。

```
import signal

class Manager:
    """
    This manager starts the http server processes and worker
    processes, creates the input/output queues that keep the processes
    work together nicely.
    """
    def __init__(self):
        self.NUMBER_OF_PROCESSES = cpu_count()

    def start(self):

       # all your code minus the loop

       print "waiting to die"

       signal.pause()

    def stop(self):
        print "quitting ..."

        # all your code minus self.running

manager = Manager()

signal.signal(signal.SIGHUP, lambda signum, frame: manager.stop())

manager.start() 
```

一个警告是 signal.pause() 将对任何信号取消暂停，因此您可能需要相应地更改代码。

**编辑：**

以下对我来说很好：

```
import daemon
import signal
import time

class Manager:
    """
    This manager starts the http server processes and worker
    processes, creates the input/output queues that keep the processes
    work together nicely.
    """
    def __init__(self):
        self.NUMBER_OF_PROCESSES = 5

    def start(self):

       # all your code minus the loop

       print "waiting to die"
       self.running = 1
       while self.running:
           time.sleep(1)

       print "quit"

    def stop(self):
        print "quitting ..."

        # all your code minus self.running

        self.running = 0

manager = Manager()

context = daemon.DaemonContext()
context.signal_map = {signal.SIGHUP : lambda signum, frame: manager.stop()}

context.open()
manager.start() 
```

你用的是什么版本的python？**

# php - 如何阻止 html 标头内容包含在 jquery 帖子结果中？

> ID：1021617
> 
> 赞同：1
> 
> 时间：2009-06-20T13:24:47.710
> 
> 标签：php, jquery, html, ajax

我正在使用[jquery 的“$.post()”](http://docs.jquery.com/Ajax/jQuery.post#urldatacallbacktype)函数在 php 中向 mysql 数据库中添加一个列表条目。

```
$(document).ready(function(){
    $(".theSubmit").click(function(){

        var content = $("textarea").val();
        var listn = $("input[name='list_name']").val();
        var groupn = $("input[name='group_name']").val();

        $.post("/secret_url/lists/add_to_list",
            {list_item: content, list_name: listn, group_name:groupn},
            function(html){$("li:last").after(html);});
        });
   }); 
```

一切正常，新的列表项被添加到页面中。但是，使用萤火虫，我观察到我得到了这个额外的 html 头信息（见下文）以及我返回的数据。我想要并呈现给页面的信息在下面的“li”内。在我想删除或阻止包含之后的文档类型中的所有内容，因为它在页面上的可编辑的就地编辑输入中变得[可见](http://www.appelsiini.net/projects/jeditable)。

```
<li>
   <input type="checkbox" name="row" class="checkbox">
   <input type ="hidden" name="id" value="60" class="contentId">
   <div id="60" class="editable">test Item 4</div>
</li>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"  
    "http://www.w3.org/TR/html/strict.dtd">
<html>
    <head>
    <title>Checklists</title>
    <link  href="http://checklist.css" rel="stylesheet" type="text/css" />  
    <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.7.custom.min.js"></script>
    <script type="text/javascript" src="jquery.jeditable.js"></scrip >
    </head>
    <body> 
```

我可以剥离 html 头内容或阻止它与相关信息一起发回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:45:27.000

只需添加一个

```
exit; 
```

输出响应数据的文件中的语句。在你输出所有你想要的作为响应体之后。

简化示例

```
<?php .... do something do process request ... ?>
    <li>
       <input type="checkbox" name="row" class="checkbox">
       <input type ="hidden" name="id" value="60" class="contentId">
       <div id="60" class="editable">test Item 4</div>
    </li>
<?php exit; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T13:28:50.450

你用什么？ASP.NET，PHP？

在您编写完所需的响应后，您必须告诉您的服务器停止处理请求。服务器似乎继续为该 URL 添加正常的 GET/POST 内容。（就好像你会在没有 AJAX 的情况下提交表单）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T13:38:08.823

我会使用 $.postJSON 而不是 $.post 因为，就像在您的示例中一样，我总是忘记设置服务器将响应您的请求的数据类型。JSON 类型将帮助您呈现数据，就像您喜欢在客户端格式化它一样。

# wpf - 从其他 XAML 访问 XAML 项

> ID：1021618
> 
> 赞同：0
> 
> 时间：2009-06-20T13:25:20.580
> 
> 标签：wpf, xaml

我有一个小问题。

我有一个主要内容是用户控件的窗口。用户控件是一个格式化列表的 ItemsControl。在窗口中，我有一个缩放 ItemsControl 的滑块。

问题是在窗口中我创建了 UserControl，并且我没有直接访问 ItemsControl，如果我缩放 UserControl，我会缩放所有内容（包括滚动查看器）。

问题是：¿如何访问窗口上 UserControl 内的 ItemsControl？我正在考虑绑定 UC 并使用 de Path 去 ItemsControl，但我认为这是一个错误的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T13:48:47.413

您可以在 UserControl 上为缩放级别创建一个依赖属性，并将 ItemsControl 缩放绑定到该属性。然后，您可以从窗口操作（或绑定到）缩放属性。

附带说明一下，也许滑块属于 UserControl ...

# c++ - C++：多态复制构造函数可以工作吗？

> ID：1021626
> 
> 赞同：6
> 
> 时间：2009-06-20T13:29:06.923
> 
> 标签：c++, copy-constructor

考虑：

```
class A
{
public:
    A( int val ) : m_ValA( val ) {}
    A( const A& rhs ) {}
    int m_ValA;
};

class B : public A
{
public:
    B( int val4A, int val4B ) : A( val4A ), m_ValB( val4B ) {}
    B( const B& rhs ) : A( rhs ), m_ValB( rhs.m_ValB ) {}
    int m_ValB;
};

int main()
{
    A* b1 = new B( 1, 2 );
    A* b2 = new A( *b1 ); // ERROR...but what if it could work?
    return 0;
} 
```

如果“new A( *b1)”能够解决创建新的 B 副本并返回 A ，* C++ 会被破坏吗？

这甚至会有用吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-20T13:35:14.443

您是否需要此功能，或者这只是一个思想实验？

如果你需要这样做，常见的习惯用法是有一个`Clone`方法：

```
class A
{
public:
    A( int val ) : m_ValA( val ) {}
    A( const A& rhs ) {}
    virtual A *Clone () = 0;
    int m_ValA;
};

class B : public A
{
public:
    B( int val4A, int val4B ) : A( val4A ), m_ValB( val4B ) {}
    B( const B& rhs ) : A( rhs ), m_ValB( rhs.m_ValB ) {}
    A *Clone() { return new B(*this); }
    int m_ValB;
};

int main()
{
    A* b1 = new B( 1, 2 );
    A* b2 = b1->Clone();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T13:37:31.117

您真正要寻找的是[虚拟副本构造函数](https://isocpp.org/wiki/faq/virtual-functions#virtual-ctors)，而 eduffy 发布的是标准的执行方式。

使用模板也有一些[巧妙的方法](http://nerdland.net/2009/06/covariant-templatized-virtual-copy-constructors/)。（免责声明：自我推销）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-29T18:43:51.517

eduffy 对答案的一个小补充：而不是

```
class B : public A {
  ...
  A *Clone() { return new B(*this); } 
  ... 
```

};

你可以这样声明：

```
class B : public A {
  ...
  B *Clone() { return new B(*this); } // note: returning B *
  ... 
```

};

它仍然被认为是对 virtual 的有效覆盖，`A::Clone();`如果直接通过调用会更好`B *`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T13:36:48.653

表达方式

```
new A(*b1) 
```

已经有了意义，假设你有适当的重载。

如果它被赋予了不同的含义，则您必须提供另一种方式来获得其他含义。鉴于已经有一种方法可以获得您想要的含义，这有点毫无意义：

```
new B(*b1) 
```

并猜测哪个更清晰易读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T19:58:34.377

如上所述，有多种实现方式。

要回答您的问题，如果`new A( *b1 )`返回 B 的新实例，那么这将不起作用。

```
int main()
{
    A* b1 = new B( 1, 2 );
    A a( *b1 ); // What size would 'a' be if it was polymorphicly constructed?
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T13:36:31.697

是的。不。

在不改变现有程序的含义或无法创建派生类在编译单元中已知时的基类。

构造函数和析构函数足够复杂，对于初学者来说可以理解。向它们注入更多的复杂性是不明智的。

# orm - 是否应该将 ID 作为持久化到数据库的对象的属性包含在内？

> ID：1021638
> 
> 赞同：5
> 
> 时间：2009-06-20T13:35:06.973
> 
> 标签：orm

我正在为 Web 应用程序创建模型。这些表将 ID 字段作为主键。我的问题是是否应该将 ID 定义为类的属性？

我在这个问题上存在分歧，因为我不清楚我是否应该将对象视为表结构的表示，或者我是否应该将表视为持久化对象的一种手段。

如果我采用前一种方法，那么 ID 就成为一个属性，因为它是数据库表结构的一部分，但是如果我采用后一种方法，那么 ID 可以被视为属于数据库的元数据的一部分，它不是严格意义上的一部分的对象模型。

然后我们到达中间地带。虽然 ID 并不是我要建模的对象的一部分，但我确实意识到对象是从数据库中检索并保存到数据库中的，并且数据库中对象的 ID 对于许多操作至关重要系统，因此包含它以简化使用 ID 的交互可能是有利的。

我是一个单独的开发者，所以我真的很想在这个问题上有一些其他的，可能更有经验的观点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T13:38:48.197

基本上：是的。我使用的所有持久性框架（包括 Hibernate、Ibatis）都要求 ID 位于对象上。

我理解您关于元数据的观点，但是来自数据库的对象应该以与数据库相同的方式真正派生其*身份- 通常是 int 主键。*那么对象级别的相等性应该由此派生。

有时您有复合的主键，例如名字和姓氏（永远不要这样做！），在这种情况下，主键不会成为“元数据”，因为它是对象身份的一部分。

我通常为数据库保留对象的 ID 列。我的观点是，如果要将其用于任何“面向客户”的目的（例如，使用主键 ID 作为客户编号），您以后总会自取其辱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-20T13:40:00.253

如果您曾经对现有数据进行更改（而不是专门添加新数据），则需要 PK。否则，您不知道要更改数据库中的哪条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T13:44:54.550

您应该在对象中有 ID。这是必不可少的。

举个例子最简单的用例是测试相等性：

```
public bool Equals(Object a, Object b) {  return {a.ID = b.ID}; } 
```

其他任何事情都会出错，当您开始违反主键或开始覆盖现有数据时，您会发现这一点。

通过反驳：

假设您在对象中没有 ID。一旦您更改了一个对象，但没有从数据库中获得它的 ID，您如何知道要更新哪条记录？

* * *

同时，您应该注意，我提到的操作实际上是对象实例私有的，因此 ID 不一定必须是公共属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T13:43:44.833

我将 ID 作为属性包含在内。无论对象是否保存在数据库中，拥有一个简单的对象唯一标识符通常都非常方便。它还使您的数据库查询更加简单。

我会说表只是持久化对象的一种方式，但这并不意味着对象不能有 ID。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T13:57:31.700

我非常认为表是一种持久化对象的方法，但即便如此，我*总是*在我的对象上公开 ID，主要有两个原因：

1.  数据库 ID 是唯一标识对象的最方便的方法，无论是在一个类中（如果您使用的是每表序列号/自动编号 ID），还是通用（如果您要维护一个单独的“ID-to-class”）映射）。在 Web 应用程序的上下文中，如果您的表单能够仅指定`<input type=hidden name=id value=12345>`而不是必须提供多个字段，这些字段共同包含足够的信息来识别目标对象（或者，更糟糕的是，使用某种方案连接足够的识别信息到单个字符串中，然后在提交表单时将其分解）。

2.  无论如何，它需要有一个 ID 才能维护一个健全的数据库结构，并且没有理由*不*公开它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-08-09T20:11:12.060

对象中的 ID 是否应该是只读的？在我看来，它应该是只读的，因为根据定义，ID 永远不会改变（因为它唯一地标识了数据库中的一条记录）。
当您创建一个新对象（尚未设置 ID）时，这会产生一个问题，通过返回新创建的 ID 的存储过程将其保存在数据库中，然后如果 ID 属性是只读的，如何将其存储回对象中?

示例：
员工员工 = 新员工（）；
雇员.FirstName="约翰";
employee.LastName="史密斯";

EmployeeDAL.Save（雇员）；

如果该属性是只读的，Save 方法（实际上连接到数据库以保存新员工）如何更新 Employee 对象中的 EmployeeId 属性（这应该是因为一旦创建，EmployeeId 就永远不会改变）。

# c# - c# 中有类似 java 的 Character.digit(char ch, int radix) 的东西吗？

> ID：1021645
> 
> 赞同：5
> 
> 时间：2009-06-20T13:36:55.160
> 
> 标签：c#, java, character

```
Character.digit(char ch, int radix) 
```

返回指定基数中字符 ch 的数值。

c#中是否有等效的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-20T13:51:04.617

我不知道直接等效
我能找到的最接近的匹配是

```
Convert.ToInt32(string s, int baseFrom); 
```

因此，您可以将 char 转换为字符串，然后将其传递给上述函数以获取 int32 或 Int16 或 Byte 或者您想要处理它：

```
char c = 'F';

int digit = Convert.ToInt32(c.ToString(),16); 
```

注意 - 如果 char 不是数字，Convert 将抛出 FormatException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-28T12:52:06.430

如果您使用十六进制字符，您可以执行以下操作：

```
if (System.Uri.IsHexDigit(c)) {
  int v = System.Uri.FromHex(c);
} 
```

# delphi - 你如何设置结果值？

> ID：1021666
> 
> 赞同：3
> 
> 时间：2009-06-20T13:45:41.663
> 
> 标签：delphi, coding-style

```
function MyFunc: Boolean;
begin
    if eval then
    Result := True
    else
        Result := False;

    /* Note it's a fancy example, I know that in this case I can do: Result := Eval */
end; 
```

或者

```
function MyFunc: Boolean;
begin
    Result := False;

    if eval then
        Result := True;

/* good by else statement */

end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T14:38:57.687

这真的取决于方法的复杂性，你应该始终以可读性为目标，这些例子对我来说都很好

```
function MyFunc: Boolean;
begin
   Result := False;
   if (Something or SomethingElse) and Whatever then
     Result := True;
end;

function MyFunc: Boolean;
begin
  Result := (Something or SomethingElse) and Whatever;
end;

function MyFunc: Boolean;
begin
   Exit((Something or SomethingElse) and Whatever);
end;

function MyFunc: Boolean;
begin
  if (Something or SomethingElse) and Whatever then
     Result := True
  else
     Result := False;
end; 
```

我个人喜欢避免使用其他语句并编写尽可能少的代码行，所以我会使用示例 2，但示例 1 也很好，选项 3 和 4 不太可读 IMO。

我认为如果你把这 4 个例子给初学者，第一个是最容易理解的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T13:53:45.500

为什么不使用。

```
function MyFunc: Boolean;
begin
    Result := eval;
/* good by if-else statement */
end; 
```

结果与 3 个变体中的任何一个都相同。性能方面基本上没有区别。

唯一的区别在于可读性。如果函数真的这么简单，为什么还要使用 if 语句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T13:53:13.427

这实际上并不重要，因为现代编译器知道如何“吃”它并优化它，因此您将收到几乎相同的指令，可能以不同的执行顺序。就我的口味而言，第二种方式更易于阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-21T19:34:52.280

我喜欢避免不必要的分配，所以我倾向于使用

```
if eval then
begin
  // yada yada
  Result := True
end
else    
  Result := False; 
```

或者，当没有周围的代码时，这个：

```
Result := eval; 
```

不过要记住的另一件事是，时间关键代码中的分支可能会对性能产生负面影响。在某些情况下，如果可以与分支预防结合使用，多次更新值会更快。这是一个例子：

```
for i := 0 to Length(aArray) - 1 do
  if Assigned(aArray[i]) then
    Inc(AssignedCounter); 
```

如果这样写，这段代码可以运行得更快：

```
for i := 0 to Length(aArray) - 1 do
  Inc(AssignedCounter, Ord(Assigned(aArray[i]))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T14:11:49.987

是真正的答案-您只需将结果设置为一个值:)

请注意，您可以将结果用作函数中的普通变量。

例如

```
function DoSomeStuff: Boolean;
Begin
  Result := (evaulate some conditions);
  if Result then
  begin
   //Do good stuff
  end;
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T14:31:29.137

当函数有很多时，我使用第二种方式：

```
 if (...) then
 begin
   [...]
   result := default_value;
   exit
 end; 
```

检查（或错误）条件。我不想`result := default_value;`在每种情况下都重复“”。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-22T17:20:33.233

你也可以做 MyFunc := true; 其含义与 Result := true; 相同；

# html - 图层不会拉伸到包含图像的高度

> ID：1021667
> 
> 赞同：0
> 
> 时间：2009-06-20T13:45:43.317
> 
> 标签：html, css, height, layer

见[http://www.martenminkema.nl](http://www.martenminkema.nl)

每个条目的图层仅获得其包含的文本的高度。没有考虑图像的高度，在某些情况下会导致一些布局标记出现问题。

html:

```
<div id="entry-296" class="hentry entry gedachten">
<a href="http://www.martenminkema.nl/gedachten/2009/06/autobahnbar-1.html" rel="bookmark"><span class="date">12.06.09</span></a><h2 class="entry-title"><a href="http://www.martenminkema.nl/gedachten/2009/06/autobahnbar-1.html" title="Geplaatst onder Gedachten op 12 juni 2009 23:32 in de categorie(&euml;n): buitenland, met de volgende tags: berlijn">Autobahnbär</a></h2><div class="icoontje" title="Gedachten"><div class="linkwrapper transparent"><a href="http://www.martenminkema.nl/gedachten/2009/06/autobahnbar-1.html" class="clickable">&nbsp;</a></div></div>
<div class="entry-content">
<a href="http://www.martenminkema.nl/gedachten/Afbeeldingen/Autobahnb%C3%A4r-in-Berlijn.jpg" rel="lightbox" title="Beer aan de snelweg in Berlijn (foto: M. Minkema)"><img src="http://www.martenminkema.nl/gedachten/assets_c/2009/06/Autobahnbär-in-Berlijn-thumb-150xauto.jpg" width="150" height="112" alt="" class="icoon"/></a>
Beer met uitzicht, Tierpark Berlin op een vroege ochtend.</div>
</div> 
```

CSS：

```
div.entry {
clear: both;
display: block;
font-size: 12px;
margin-bottom: 10px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
position: relative;
text-align: left;
width: 350px;
}

a[rel='lightbox'] {
color: black;
cursor: auto;
display: block;
font-size: 12px;
font-weight: bold;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 200px;
margin-top: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
text-decoration: none;
width: 150px;
} 
```

灯箱链接包含图像。图片高度在html中给出，但是根据我的safari web开发工具，灯箱链接没有获取图片高度，导致div.entry层只获取文字高度，图片高度为不考虑。

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T13:49:35.790

给 div overflow: hidden 并确保 DIV 有一个宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T13:49:23.263

您的问题有点不清楚，但根据经验，您的 DIV 中有一个浮动到左侧的图像。

您可以使用一种称为 clearfix 的流行技术来确保外部 DIV 与其中的文本和图像具有相同的高度。

查看您提到的站点，您可以按如下方式解决此问题（注意我添加了“clearfix”类）：

```
<div class="entry-content clearfix">
<a href="...">
<img class="icoon" width="150" height="147" alt="" src="..."/>
</a>
Sommige verkeersborden krijgen een totaal andere lading als je ze een stukje kantelt.
</div> 
```

可以在此处找到 clearfix CSS 代码和解释您的问题的文章：

[http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

# linq - Linq to XML Noob 问题 - 不同并按属性排序

> ID：1021679
> 
> 赞同：3
> 
> 时间：2009-06-20T13:54:51.363
> 
> 标签：linq

我刚刚开始使用 Linq to XML，我有一个包含如下记录的简单文档：

```
<record date="6/27/2002" symbol="DG" price="15.00" /> 
```

我想要一个不同符号的列表作为字符串，按顺序排列。

这给了我所有属性的无序列表，但我被卡住了

```
var query =
  from e in xml.Elements()
  select e.Attribute("symbol"); 
```

如何修改它以给我想要的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-20T14:04:21.483

怎么样：

```
 var query = (from e in xml.Elements()
                 let symbol = (string)e.Attribute("symbol")
                 where symbol != null
                 orderby symbol
                 select symbol).Distinct(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T14:05:38.127

我会用 lambda 语法来做到这一点：

```
var query = xml.Elements()
               .Select(e => (string)e.Attribute("symbol"))
               .Distinct()
               .OrderBy(x=>x); 
```

# entity-framework - 实体框架映射问题

> ID：1021692
> 
> 赞同：3
> 
> 时间：2009-06-20T14:04:24.043
> 
> 标签：entity-framework, orm

尝试使用实体框架映射以下架构。

*   一个客户可以有许多关联的商店。
*   一个商店可以有许多关联的客户
*   每个 Store 可以有 0 个或 1 个且只有 1 个 TopCustomer（成为 TopCustomer 的条件在业务逻辑中确定）

![替代文字](../Images/140ac9d1158956007f01899c9ac1fac2.png)

这会在 VS 中产生以下映射。

![替代文字](../Images/216d5c28cd78751679e5fbb66f50ecbb.png)

* * *

这是数据库脚本：

```
 USE [TestDb]
GO
/****** Object:  Table [dbo].[Customer]    Script Date: 06/20/2009 09:53:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Customer](
    [CustomerId] [uniqueidentifier] NOT NULL,
    [FirstName] [nvarchar](50) NOT NULL,
    [LastName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Customer] PRIMARY KEY CLUSTERED 
(
    [CustomerId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Store]    Script Date: 06/20/2009 09:53:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Store](
    [StoreId] [uniqueidentifier] NOT NULL,
    [StoreName] [nvarchar](50) NOT NULL,
    [TopCustomer] [uniqueidentifier] NULL,
 CONSTRAINT [PK_Store] PRIMARY KEY CLUSTERED 
(
    [StoreId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CustomerStore]    Script Date: 06/20/2009 09:53:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CustomerStore](
    [CustomerId] [uniqueidentifier] NOT NULL,
    [StoreId] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_CustomerStore] PRIMARY KEY CLUSTERED 
(
    [CustomerId] ASC,
    [StoreId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_CustomerStore_Customer]    Script Date: 06/20/2009 09:53:52 ******/
ALTER TABLE [dbo].[CustomerStore]  WITH CHECK ADD  CONSTRAINT [FK_CustomerStore_Customer] FOREIGN KEY([CustomerId])
REFERENCES [dbo].[Customer] ([CustomerId])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[CustomerStore] CHECK CONSTRAINT [FK_CustomerStore_Customer]
GO
/****** Object:  ForeignKey [FK_CustomerStore_Store]    Script Date: 06/20/2009 09:53:52 ******/
ALTER TABLE [dbo].[CustomerStore]  WITH CHECK ADD  CONSTRAINT [FK_CustomerStore_Store] FOREIGN KEY([StoreId])
REFERENCES [dbo].[Store] ([StoreId])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[CustomerStore] CHECK CONSTRAINT [FK_CustomerStore_Store]
GO
/****** Object:  ForeignKey [FK_Store_TopCustomer]    Script Date: 06/20/2009 09:53:52 ******/
ALTER TABLE [dbo].[Store]  WITH CHECK ADD  CONSTRAINT [FK_Store_TopCustomer] FOREIGN KEY([TopCustomer])
REFERENCES [dbo].[Customer] ([CustomerId])
GO
ALTER TABLE [dbo].[Store] CHECK CONSTRAINT [FK_Store_TopCustomer]
GO 

```

* * *

**问题 ：**

如何在不为 Customer 类创建额外导航属性的情况下将 TopCustomer 关联映射到 Customer 的单个实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-20T16:17:47.070

听起来您已经有模型工作和映射？

但是您只需要删除额外的导航属性吗？

如果您想删除导航属性，这非常简单（尽管您不能使用标准的 EF 设计器）。

您只需在 XML 编辑器中打开您的 EDMX 文件（在 VS 中很简单），然后`<NavigationProperty .../>`从客户实体中删除不需要的文件。

这样关系仍然存在于模型中，但在类中你只能从 Store.TopCustomer

你不能走另一条路。

希望这可以帮助

亚历克斯

项目经理实体框架团队，Microsoft。

# javascript - Silverlight 事件参数上的 JSON 字符串化错误

> ID：1021697
> 
> 赞同：0
> 
> 时间：2009-06-20T14:10:54.013
> 
> 标签：javascript, silverlight, json, events, asp.net-ajax

我有以下 Silverlight 代码：

```
[ScriptableType]
public partial class Page : UserControl
{
    [ScriptableMember]
    public event EventHandler<UploadChangedEventArgs> OnFileProgressChanged;

    private void FileProgressChanged_Click(object sender,RoutedEventArgs e)
    {   // test reasons only
        OnFileProgressChanged(null, new UploadChangedEventArgs()
        {
            Id = Guid.NewGuid(),
            Sent = 12345,
            Started = DateTime.Now
        });
    }
} 
```

事件参数具有以下结构：

```
[ScriptableType]
public class UploadChangedEventArgs : EventArgs
{
    public Guid Id { get; set; }
    public long Sent { get; set; }
    public DateTime Started { get; set; }
} 
```

在 Javascript 方面，我编写了事件回调（它被触发了）：

```
function onFileUploadProgressChanged(sender, e) {
    alert(JSON.stringify(e)); // shows "{}"
    alert(e.Sent);            // shows "12345"
} 
```

我需要对该数据进行字符串化以通过回发事件发送它。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T16:17:34.217

查看您的代码，您可能需要明确获取属性（Id、Sent、Started）并自己构建 JSON 字符串。

```
function onFileUploadProgressChanged(sender, e) 
{    
    var json = "{\""Id\":\"" + e.Id + 
        "\", Sent:" + e.Sent + 
        ", \"Started\":\" + e.Started + "\"}";
} 
```

或者，您可以向 UploadChangedEventArgs 添加一个属性以获取 JSON（使用 Silverlight 的 JsonObject 类或实现 UploadChangedEventArgs.ToString() 方法以返回 JSON 属性：

```
using System.Json;

class UploadChangedEventArgs : EventArgs
{
   public string JSON
   {
       get
       {
            var json = new JsonObject();

            json.Add("Id", this.Id);
            json.Add("Sent", this.Sent);
            json.Add("Started", this.Started);

            return json.ToString();
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-24T01:22:58.853

我以下面的代码结束；它类似于 Michael 代码，但它更安全，因为它不必处理字符转义序列。

```
function onFileListChanged(sender, e) {
  var files = [];
  for (var i = 0; i < e.Files.length; i++) {
      files[i] = {
           Id    : e.Files[i].Id, 
           Name  : e.Files[i].Name,
           Size  : e.Files[i].Size
      };
  }
  __doPostBack(
        "<%= RadGrid1.UniqueID %>", 
        "OnFileListChanged:" + JSON.stringify(files));
  } 
```

# python - 概率时间序列，观察到的数据概率（似曾相识）

> ID：1021704
> 
> 赞同：1
> 
> 时间：2009-06-20T14:16:21.880
> 
> 标签：python, probability, time-series, data-analysis

好的，伙计们...感谢您查看这个问题。我记得在大学里做了以下事情，但是我忘记了确切的解决方案。任何接受者都要朝着正确的方向前进。

我有一个 N 的时间序列数据（我们将使用三个）。数据序列按时间顺序是连续的（例如 obsOne[1] 与 obsTwo[1] 和 obsThree[1] 一起发生）

obsOne[47, 136, -108, -15, 22, ...], obsTwo[448, 321, 122, -207, 269, ...], obsThree[381, 283, 429, -393, 242, ...]

第 2 步。从数据系列中，我为每个数据系列创建了一系列宽度为 Z 的 X 范围箱。（例如观察 obsOne：bin1 = [<-108, -108] bin2 = [-108, -26] bin3 = [-26, 55] ... binX = [136, > 136]

步骤 3。现在创建一个包含数据系列所有可能组合的表。因此，如果我有 4 个 bin 和 3 个数据系列，所有组合将总计 4x4x4 = 64 个可能的结果。（例如 row1 = obsOne bin1 + obsTwo bin1 + obsThree bin1, row2 = obsOne bin1 + obsTwo bin1 + obsThree bin2, ... row5 = obsOne bin1 + obsTwo bin1 + obsThree binX, row6 = obsOne bin1 + obsTwo bin2 + obsThree bin1, row7 = obsOne bin1 + obsTwo bin1 + obsThree bin2, row9 = obsOne bin1 + obsTwo bin2 + obsThree binX, ...)

第 4 步。我现在回到数据系列，找出数据系列中的每一行在表格中的位置，并计算观察次数。（例如 obsOne[2] obsTwo[2] obsThree[2] = 表上的第 30 行，obsOne[X] obsTwo[X] obsThree[X] = 表上的第 52 行。

第 5 步。然后我只取表中具有正匹配的行，计算有多少观察落在该行上，除以数据系列中的观察总数，这给了我在观察数据上该范围的概率。

我为这个基本问题道歉，而不是数学专家。很多年前我已经这样做了。我忘记了我用的是哪种方法，它比这种漫长的（古老的“手工”）方法要快得多。当时我没有使用 python，它是 c++ 中的其他一些专有包。我想看看是否有什么东西可以用python（现在是python商店）解决这个问题，总是可以扩展，所以它是软约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T19:10:47.640

你在谈论这样的事情吗？

```
from __future__ import division
from collections import defaultdict

obsOne= [47, 136, -108, -15, 22, ]
obsTwo= [448, 321, 122, -207, 269, ]
obsThree= [381, 283, 429, -393, 242, ]

class BinParams( object ):
    def __init__( self, timeSeries, X ):
        self.mx= max(timeSeries )
        self.mn= min(timeSeries )
        self.Z=(self.mx-self.mn)/X
    def index( self, sample ):
        return (sample-self.mn)//self.Z

binsOne=  BinParams( obsOne, 4 )
binsTwo=  BinParams( obsTwo, 4 )
binsThree= BinParams( obsThree, 4 )

counts= defaultdict(int)
for s1, s2, s3 in zip( obsOne, obsTwo, obsThree ):
    posn= binsOne.index(s1), binsTwo.index(s2), binsThree.index(s3)
    counts[posn] += 1

for k in counts:
    print k, counts[k], counts[k]/len(counts) 
```

# c# - 如何在 SilverLight 项目 (C#) 中使用 XDocument 类

> ID：1021709
> 
> 赞同：5
> 
> 时间：2009-06-20T14:21:19.673
> 
> 标签：c#, xml, silverlight

我正在尝试创建一个 Silverlight 应用程序（第一次），该应用程序涉及从站点解析 XML 并显示信息。为此，我在 Windows XP Service Pack 3 上使用 Visual Studio 2008。我还安装了 .NET Framework 3.5 SP1。

我的问题是我在互联网上看到的任何 XML 解析器都没有工作。我的代码顶部有两行我认为是必要的（使用“System.xml;”和使用“System.linq;”）但是 XDocument、XMLReader、XMLDocument 和我发现的任何其他行都不起作用，返回错误找不到类型或命名空间。我确实有 .NET 框架。

关于这个问题，我在互联网上完全没有任何信息。有没有人有任何想法？

编辑：**我刚刚发现，当我在 Silverlight 项目的上下文之外打开文件时，它可以使用 XDocument。只有当我打开整个项目时才会出现我的问题**

这是一些显示问题的示例代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Xml.Linq; //Error 1 (See below)

namespace LastfmAmazon
{
    public partial class Page : UserControl
    {
        public Page()
        {
            InitializeComponent();
        }

        public void DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            XDocument doc = XDocument.Parse(e.Result); //Error 2: see below

        } 

        public void Button_Click(object sender, RoutedEventArgs e)
        {

            if (uname.Text != String.Empty)
            {
                App app = (App)Application.Current;
                app.UserName = uname.Text;
                String getTopArtists = "http://ws.audioscrobbler.com/2.0/?method=user.gettopartists&user=" + app.UserName + "&api_key=d2d620af554a60f228faed8d502c4936";
                uname.Text = "Try Another One!";
                WebClient web = new WebClient();
                WebClient client = new WebClient();
                client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
                client.DownloadStringAsync(new Uri(getTopArtists));
            }
        }
    }   
} 
```

错误 1：此行包含以下错误：名称空间“System.Xml”中不存在类型或名称空间名称“Linq”（您是否缺少程序集引用？）

错误 2：此行包含以下错误：名称空间“System.Xml”中不存在类型或名称空间名称“XDocument”（您是否缺少程序集引用？）

编辑2：一旦我用谷歌搜索“添加参考”到图书馆的含义，安东尼的回答就解决了这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T21:43:20.237

默认情况下，Silverlight 项目将包含 System.Xml dll，但 XDcoument 包含在 System.Xml.Linq dll 中，您必须将其添加到您的项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T14:35:15.150

确保添加对适当 XML 库的引用

*   对于 XMLDocument、XMLReader 等……：System.Xml.Dll
*   对于 XDocument、XNode 等...：System.Xml.Linq.dll

# regex - 如何从文件名中消除点，除了文件扩展名

> ID：1021710
> 
> 赞同：4
> 
> 时间：2009-06-20T14:21:43.523
> 
> 标签：regex, total-commander

我有一堆看起来像这样的文件：

```
A.File.With.Dots.Instead.Of.Spaces.Extension 
```

我想通过正则表达式转换为：

```
A File With Dots Instead Of Spaces.Extension 
```

它必须在一个正则表达式中（因为我想将它与 Total Commander 的批量重命名工具一起使用）。

帮助我，正则表达式大师，你是我唯一的希望。

**编辑**

有几个人提出了两步解决方案。两个步骤真的使这个问题变得微不足道，我真的希望找到一个可以在 TC 中工作的一步解决方案。顺便说一句，我确实设法找到了一个只要文件名中有偶数个点就可以工作的一步解决方案。所以我仍然希望有一个灵丹妙药的表达方式（或证明/解释为什么绝对不可能）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-20T14:36:11.873

看来 Total Commander 的正则表达式库不支持环视表达式，因此您可能必须一次替换多个点，直到没有点为止。代替：

```
([^.]*)\.([^.]*)\.([^.]*)\.([^.]*)$ 
```

和

```
$1 $2 $3.$4 
```

（重复顺序和反向引用的数量以获得更高的效率。您最多可以达到 9 美元，这可能不够，也可能不够。）

抱歉，在 Total Commander 中似乎没有任何方法可以用一个明确的表达来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T14:29:29.983

基本上：

```
/\.(?=.*?\.)// 
```

将用纯正则表达式来完成。这意味着，替换后面跟着一串字符（非贪婪）的任何句点，然后是一个没有任何内容的句点。这是一个[积极的展望](http://www.regular-expressions.info/lookaround.html)。

在 PHP 中，这是这样完成的：

```
$output = preg_replace('/\.(?=.*?\.)/', '', $input); 
```

其他语言各不相同，但原理是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T16:54:58.023

这是基于您的几乎解决方案的一个：

```
/\.([^.]*(\.[^.]+$)?)/\1/ 
```

粗略地说，这是“任何点的东西，减去点，也许再加上行尾的另一个点。” 我不能完全确定您是要删除点还是将其转换为空格-如果是后者，请将替换更改为“ \1”（当然要减去引号）。

[编辑将 + 更改为 *，如下面的海伦。]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-07T13:38:01.317

另一种在 Mass File Renamer 中找到对我有用的（windows）文件名中除最后一个点之外的所有点的模式是：

```
(?!\.\w*$)\. 
```

我不知道这对其他用户有多大用处，但这个页面是一个早期的搜索结果，如果它出现在这里，它会为我节省一些时间。

如果结果后面是连续的字母数字字符序列，导致输入（文件名）的结尾，则它会排除结果，否则会找到点字符的所有实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-28T20:06:51.557

或者用空格替换所有点，然后用 .[Extension] 替换 [space][Extension]

A.File.With.Dots.Instead.Of.Spaces.Extension 到带有点而不是空格的文件 扩展到带有点而不是 Spaces.Extension 的文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T14:33:25.920

您可以使用 Lookahead 做到这一点。但是我不知道你有哪种正则表达式支持。

```
/\.(?=.*\.)// 
```

这大致翻译为任何点`/\./`，之后有一些东西和一个点。显然，最后一个点是唯一不符合要求的点。我省略了点之间某些东西的“可选性”，因为数据看起来总是介于两者之间，并且“可选性”具有性能成本。

检查： [http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# perl - 如何循环遍历 Perl 中类的所有方法？

> ID：1021713
> 
> 赞同：9
> 
> 时间：2009-06-20T14:23:12.943
> 
> 标签：perl, reflection, introspection

在 Perl 中如何循环遍历一个类的所有方法？有没有关于 Perl 内省或反射的好的在线参考资料？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T19:51:41.617

Todd Gardner 给出的使用 Moose 的建议是一个很好的建议，但他选择的示例代码并不是很有帮助。

如果您正在使用类检查非 Moose，您将执行以下操作：

```
use Some::Class;
use Class::MOP;

my $meta = Class::MOP::Class->initialize('Some::Class');

for my $meth ( $meta->get_all_methods ) {
    print $meth->fully_qualified_name, "\n";
} 
```

有关如何进行自省的更多详细信息，请参阅[Class::MOP::Class 文档。](http://search.cpan.org/dist/Class-MOP/lib/Class/MOP/Class.pm)

您还会注意到我使用了 Class::MOP 而不是 Moose。Class::MOP (MOP = Meta-Object Protocol) 是 Moose 构建的基础。如果您正在使用非 Moose 类，使用 Moose 进行内省不会给您带来任何好处。

如果你愿意，你可以`use Moose ()`代替`Moose::Meta::Class->initialize`CMOP。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-21T13:03:53.510

您可以使用已经提供的答案轻松获取类的已定义方法的列表。但是，Perl 是一种动态语言，这意味着以后可能会定义更多的方法。确实没有办法获得任何特定类将处理的所有方法的列表。有关此类内容的更多详细信息，我在[Mastering Perl](http://oreilly.com/catalog/9780596527242)中有几章。

人们在没有告诉你限制的情况下给你（和支持）答案。

Adam 提到了他的[Class::Inspector](http://search.cpan.org/dist/Class-Inspector)，但它并没有真正起作用，因为它试图做一些动态语言不做的事情（而且那是静态的 :) 例如，这是一个片段，其中 Class::Inspector 不返回任何方法，但我仍然可以调用该`VERSION`方法（以及`isa`and `can`）：

```
 BEGIN {

package Foo;

our $VERSION = '1.23'
}

use Class::Inspector;

my $methods = Class::Inspector->methods( 'Foo' );

print "Methods are [@$methods]\n"; # reports nothing

print Foo->VERSION, "\n"; 
```

这是另一种情况，我可以调用任何我喜欢的方法，但 Class::Inspector 只返回`AUTOLOAD`（并且仍然缺少`VERSION`、`isa`和`can`）：

```
BEGIN {

package Foo;

our $VERSION = '1.23';

my $object = bless {}, __PACKAGE__;

sub AUTOLOAD { $object }

}

use Class::Inspector;

my $methods = Class::Inspector->methods( 'Foo' );

print "Methods are [@$methods]\n"; # reports only "AUTOLOAD"

print Foo->dog->cat->bird, "\n"; 
```

奇怪的是，每个人似乎都忽略了 UNIVERSAL，可能是因为他们没有明确处理它，因为它实际上只是在 @ISA 中。我可以`debug`为每个类添加一个方法，而 Class::Inspector 仍然会错过它，即使它是一个已定义的方法：

```
BEGIN {

sub UNIVERSAL::debug { "Hello debugger!\n" }    
package Foo;
}

use Class::Inspector;

my $methods = Class::Inspector->methods( 'Foo' );

print "Methods are [@$methods]\n"; # still reports nothing

print Foo->debug, "\n"; 
```

[Class::MOP](http://search.cpan.org/dist/Class::MOP)也有同样的限制。

不是每个模块都会使用 AUTOLOAD，但它也不是一个晦涩或罕见的功能。如果你不介意你会错过一些方法，那么 Class::Inspector 或 Class::MOP 可能没问题。它只是不会为您提供在每种情况下您可以在类或对象上调用的每个方法的列表。

如果您有一个类或一个对象，并且想知道是否可以调用特定方法，请使用 can()。将它包装在一个 eval 块中，以便可以在那些甚至不是对象的东西上调用 can() 仍然返回 false，而不是死亡，在这些情况下：

```
if( eval { $object->can( 'method_name' ) } )
    {
    $object->( @args );
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-20T15:17:58.433

在一般情况下，您必须检查符号表（除非您使用 Moose）。例如，列出`IO::File`包中定义的方法：

```
use IO::File;
no strict 'refs';
print join ', ', grep { defined &{"IO::File::$_"} } keys %{IO::File::}; 
```

哈希`%{IO::File::}`是 的符号表，`IO::File package`过滤`grep`掉非子程序条目（例如包变量）。

要将其扩展为包含继承的方法，您必须递归搜索父类的符号表 ( `@IO::File::ISA`)。

这是一个完整的例子：

```
sub list_methods_for_class {
    my $class = shift;
    eval "require $class";
    no strict 'refs';
    my @methods = grep { defined &{$class . "::$_"} } keys %{$class . "::"};
    push @methods, list_methods_for_class($_) foreach @{$class . "::ISA"};
    return @methods;
} 
```

有关包和符号表的更多信息，请参阅[perlmod](http://perldoc.perl.org/perlmod.html)手册页。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-21T05:04:44.707

你可能想要 Class::Inspector->methods('Your::Class')。

纳夫说。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-20T14:59:45.897

取决于您的意思是任何课程，或者您是否正在实施自己的课程。对于后者，我使用[Moose](http://www.iinteractive.com/moose/)，它为这些特性提供了非常简洁的语法。来自食谱：

```
my %attributes = %{ $self->meta->get_attribute_map };
for my $name ( sort keys %attributes ) {
   my $attribute = $attributes{$name};

   if (   $attribute->does('MyApp::Meta::Attribute::Trait::Labeled')
   # ... keeps on 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-12T03:45:44.903

当我忘记它时，我会把它留在这里。这是非常强大的；太糟糕了，它是如此的偏僻，以至于大多数 Perl 程序员从未体验过它。

```
package Foo;
use strict;
sub foo1 {};
sub foo2 {};
our $foo3 = sub{};
my $foo4 = "hello, world!";

package Bar;
use strict;

# woo, we're javascript!
(sub {
    *Bar::foo1 = sub { print "hi!"; };
    *Bar::foo2 = sub { print "hello!"; };
    $Bar::foo1 = 200;
})->();

package main;
use strict;
use Data::Dumper;      
$Data::Dumper::Deparse = 1;

print Dumper \%Data::Dumper::;
print Dumper \%Foo::;
print Dumper \%Bar::; 
```

# vb.net - winforms菜单作为数组

> ID：1021715
> 
> 赞同：0
> 
> 时间：2009-06-20T14:23:44.737
> 
> 标签：vb.net, winforms

我知道最有可能访问像数组这样的 winforms 菜单，但我在 VS2008 的菜单设计器中没有看到它？我的意思是，我的应用程序顶部有一个典型的菜单栏，每个下拉菜单上有多个项目。如其所写（我继承了此代码），每个菜单项都是一个单独的名称，即

```
myMenuOption1MenuItem
myMenuOption2MenuItem
myMenuOption3MenuItem
myMenuOption4MenuItem 
```

ETC...

我需要能够根据用户权限启用或禁用（甚至隐藏/取消隐藏）菜单选项，例如：

```
For I = 0 to maxIndex
    myMenuOption(I).Enabled = myUser.IsAdministrator
Next 
```

显然，我可以按名称设置/取消设置每个菜单项，但出于很多原因，我更喜欢使用循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-21T05:13:42.777

`ToolStripMenuItem`s被暴露通过`ContextMenuStrip.Items`

```
For Each myItem As ToolStripMenuItem In myContextMenuStrip.Items
    myItem.Enabled = myUser.IsAdministrator
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-21T05:07:00.010

每个子菜单项都在 DropDownItems 集合中 - 因此您可以循环访问它（如果您使用的是 ToolStripMenuItems 而不是旧式菜单）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-23T15:53:25.907

```
For Each Menu As ToolStripMenuItem In MenuPrincipal.Items

    For Each Item As ToolStripItem In Menu.DropDownItems
        If TypeOf (Item) Is ToolStripMenuItem Then
            AddHandler Item.Click, AddressOf Menu_OnClick
        End If

    Next

Next 
```

这样，您可以按如下方式访问每个事件：

```
Private Sub Menu_OnClick(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim Frm As Form = GetFormByName(sender.name)
    If sender.Tag = "Modal" Then
        Frm.ShowDialog(Me)
    ElseIf sender.Tag = "Modeless" Then
        Frm.Show(Me)
    Else
        OpenForm(Frm, True)
    End If

End Sub 
```

# c - “包括 *.c 文件”样式 C 编程中可能存在的缺陷

> ID：1021717
> 
> 赞同：3
> 
> 时间：2009-06-20T14:24:55.360
> 
> 标签：c

我通过以下方式遇到了一些代码

```
//file.c  
#include <stdlib.h>

void print(void){

    printf("Hello world\n");
} 
```

和

```
//file main.c  
#include <stdio.h>
#include "file.c"

int main(int argc, char *argv[]){

    print();

    return EXIT_SUCCESS;
} 
```

这种编程风格有什么缺陷吗？尽管我感觉如此，但我无法找出缺陷，因为在某处我读到将实现分为 *.h 和 *.c 文件有助于编译器检查一致性。我不明白一致性是什么意思。
我会非常感谢一些建议。

- 谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-20T14:32:47.357

没有什么可以阻止您包含 .c 文件。但是，分离声明（在 .h 文件中）和实现（以及 .c 文件）然后只包含 .h 文件有几个优点：

*   编译时间。您的声明通常比您的实现更改更少。如果您仅包含 .h 文件，并在实现中进行了更改（在 .c 文件中），那么您只需重新编译一个 .c 文件，而不是包含修改后的文件的所有文件。

*   界面的可读性和管理。您的所有声明都可以在（通常）小的 .h 文件中一目了然地检查，而 .c 文件则充满了代码行。此外，它还可以帮助您确定哪个文件查看哪些函数和变量。例如，为了避免在不需要的地方包含全局变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-20T14:33:33.033

`.c`编译器应该编译文件是一个普遍的期望。`.h`文件不直接提供给编译器。它们通常只包含在`.c`文件中。

因此，您的代码预计将通过以下方式编译：

```
gcc main.c file.c 
```

而不仅仅是`gcc main.c`. 该命令将在链接阶段失败，因为它看到重复的符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-20T14:31:59.463

如果您将 file.c 包含在多个源代码文件中，这些文件组合成一个库/可执行文件，您将会遇到问题，因为您将拥有重复的方法实现。以上让我觉得共享/重用代码的方式很差，不推荐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T14:38:10.107

是的，这是允许的。

使用这是一个高级主题。

*   它减慢了开发编译时间（只编译必要的东西更便宜）。
*   它加快了部署编译时间（所有文件都已过期）。
*   它允许编译器跨模块边界内联函数。
*   它允许在保持模块化的同时控制从库中导出的符号。
*   它可能会混淆调试器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-20T14:41:26.153

如果将数据与代码分开更方便，则将数据包含在另一个文件中并不少见。例如，可以包含 char 数组中的 XPM 或原始 BMP 数据，以便以这种方式将图像嵌入程序中。如果数据是从另一个构建步骤生成的，那么包含该文件是有意义的。

我建议使用不同的文件扩展名以避免混淆（例如 *.inc、*.dat 等）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-22T23:18:04.217

对于这种长度的程序来说很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T16:10:14.340

宏的弊端可能会加剧：

文件1.c

```
#define bottom arse 
```

文件2.c

```
int f()
{
    int arse = 4;
    bottom = 3;
    printf("%d", arse);
} 
```

主程序

```
#include "file1.c"
#include "file2.c"

void main()
{
    f();
} 
```

确实是一个令人费解的例子。但通常你不会注意到它，因为宏的作用域是它所在的文件。

我确实遇到了这个错误，我正在将一些 lib 代码导入到一个新项目中，并且懒得编写 Makefile，所以我只生成了一个 all.cpp，其中包含了库中的所有源。由于宏观污染，它没有按预期工作。我花了一段时间才弄清楚。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T15:06:12.187

这是一种糟糕的风格，但这样做的另一个原因是它可以用作使用[`##`令牌连接运算符](http://en.wikipedia.org/wiki/C_preprocessor#Token_concatenation)的技巧的一部分，以在 C 中执行一种穷人的模板。

请注意，这是相当邪恶的，不推荐使用，并且会生成难以调试和维护的代码，但您*可以*执行以下操作：

我的模板.c：

```
MyTemplateFunction_ ## MYTYPE(MYTYPE x)
{
  // function code that works with all used TYPEs
} 
```

主.c：

```
#define MYTYPE float
#include "mytemplate.c"
#undef MYTYPE

#define MYTYPE int
#include "mytemplate.c"
#undef MYTYPE

int main(int, char*)
{
  float f;
  int i;
  MyTemplateFunction_float(f);
  MyTemplateFunction_int(i);
  return 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T14:31:37.967

在 .h 文件中，您应该放置函数原型。例如，在您的代码中，您应该具有：

```
//file.h
void print(void);

//file.c
void
print(void)
{
   printf("Hello world\n");
}
//file main.c  
#include <stdio.h>
#include "file.h"

int main(int argc, char *argv[]){

    print();

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-20T14:33:42.313

从 C 语言的角度来看，在程序中包含 .c 文件并没有错。C 语言不关心文件的扩展名，实际上 C++ 通常会省略某些头文件的扩展名以避免冲突。

但是从程序员的角度来看，是的，这很奇怪。大多数程序员会在不包含 .c 文件的假设下进行操作，这可能会因错误的假设而导致问题。最好避免这种做法。如果你发现你必须使用它，这是糟糕设计的标志。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-20T14:52:47.003

我只知道包含 C 文件的两个原因（并且这是有道理的）：

*   非平凡的内联函数，但这确实是风格问题
*   通过在其他几个文件中包含相同的文件来共享私有（静态）函数的实现。这实际上是以完全独立于平台的方式执行此操作的唯一方法（但工具链特定的技巧，如 gcc 的隐藏属性等......如果它们可用的话会更好）

缺陷：

*   你编译多次相同的代码
*   如果不谨慎使用，它很快就会导致公共符号的多个定义符号，以一种难以调试的方式（包括包含其他文件的文件......）

# python - 生成 3D 验证码 [图片]

> ID：1021721
> 
> 赞同：12
> 
> 时间：2009-06-20T14:30:17.733
> 
> 标签：python, graphics, captcha

我想编写一个 Python 脚本来生成像这样 的 3D [CAPTCHA ：](http://en.wikipedia.org/wiki/CAPTCHA)![茶包验证码](../Images/6601ee0aa5253bd079f646a9627eb51e.png)

我可以使用哪些图形库？

资料来源：[ocr-research.org.ua](http://ocr-research.org.ua/teabag.html)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-06-20T19:04:57.247

有很多方法。我会亲自使用[ImageDraw](http://www.pythonware.com/library/pil/handbook/imagedraw.htm)的 draw.text 在 Python Imaging Library 中创建图像，转换为[NumPy](http://en.wikipedia.org/wiki/NumPy)数组（使用 NumPy 的[asarray](http://effbot.org/zone/pil-changes-116.htm)），然后使用[Matplotlib](http://matplotlib.sourceforge.net/examples/mplot3d/wire3d_demo.html)进行渲染。（需要 Matplotlib[维护包](http://sourceforge.net/project/showfiles.php?group_id=80706&package_id=82474&release_id=608756)）。

完整代码（在 2.5 中）：

```
import numpy, pylab
from PIL import Image, ImageDraw, ImageFont
import matplotlib.axes3d as axes3d

sz = (50,30)

img = Image.new('L', sz, 255)
drw = ImageDraw.Draw(img)
font = ImageFont.truetype("arial.ttf", 20)

drw.text((5,3), 'text', font=font)
img.save('c:/test.png')

X , Y = numpy.meshgrid(range(sz[0]),range(sz[1]))
Z = 1-numpy.asarray(img)/255

fig = pylab.figure()
ax = axes3d.Axes3D(fig)
ax.plot_wireframe(X, -Y, Z, rstride=1, cstride=1)
ax.set_zlim((0,50))
fig.savefig('c:/test2.png') 
```

![替代文字](../Images/d04f4b0a1232d55b33bf1630f5ff9524.png)

显然还有一些工作要做，消除轴，改变视角等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T15:59:12.557

使用 opengl 进行渲染时要考虑的另一个绑定是[pyglet](http://www.pyglet.org/)。它的最大特点是只需一次下载。我认为它包含了实现 Anurag 所阐述的一切所需的一切。

我会提醒你，你要做的并不是一个简单的第一个 3d 图形项目。如果这是您第一次接触 OpenGL，请考虑一系列教程，例如[NeHe 教程](http://nehe.gamedev.net/lesson.asp?index=01) 和[OpenGL 网站](http://wwww.opengl.org/)提供的其他帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T14:43:12.170

我不确定我是否会为您上面所拥有的完整的 3D 库而烦恼。只需生成一个 3D 点矩阵，用 PIL 之类的东西生成文本，扫描它以找出网格上的哪些点被抬起，选择一个随机的摄像机角度，然后将这些点投影到 2D 图像中，然后用 PIL 将它们绘制到最终图像。

话虽这么说……如果您不想自己进行 3D 数学运算，则可以使用[VPython 。](http://vpython.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T14:51:05.337

为 OpenGL 使用 Python 绑定，[http](http://pyopengl.sourceforge.net/) ://pyopengl.sourceforge.net/ 。

[使用PIL](http://en.wikipedia.org/wiki/Python_Imaging_Library)在黑色表面上创建白色文本的 2D 图像。从中制作一个 3D 网格，增加颜色为白色的点的 z，也许设置 z=color 值，因此通过模糊图像，您可以获得 z 方向的真实曲线。

从这些点创建一个 OpenGL 三角形，在渲染时使用线框模式。

将 OpenGL 缓冲区抓取到图像中，例如 [http://python-opengl-examples.blogspot.com/2009/04/render-to-texture.html](http://python-opengl-examples.blogspot.com/2009/04/render-to-texture.html)。

# php - 第一次 Web 程序员的 PHP 实践

> ID：1021724
> 
> 赞同：0
> 
> 时间：2009-06-20T14:31:27.967
> 
> 标签：php

我有一个网站的想法，该网站已经在我脑海中漂浮了很长一段时间，现在终于决定开始工作了。由于项目的性质和我的经验，我对在 Apache 服务器上将其作为 PHP+MySQL 应用程序运行的想法感到满意。

这是我第一次进行任何类型的 Web 编程（我有系统管理员和大型机系统编码方面的背景），我非常不确定要考虑哪些实践，这样我就不会在以后发现自己撤消/重做事情项目。考虑到该语言对 StackOverflow 的所有抨击（可以在[此处](https://stackoverflow.com/questions/233030/worst-php-practice-found-in-your-experience)和[此处查看](https://stackoverflow.com/questions/309300/defend-php-convince-me-it-isnt-horrible)），对于像我这样的初学者来说，有一组常见的错误需要提防会很好。我确实发现这个[线程](https://stackoverflow.com/questions/694246/how-is-php-done-the-right-way)概述了在 PHP 中要避免的事情，但是对于像我这样刚开始使用 PHP 的人来说，大多数观点都没有意义。

您是否有任何建议、提示或教程概述了该语言中的常见问题，这些问题可能会在项目后期出现，要求进行整个重写。

对于它的价值，我目前正在通过[Programming PHP(O'Reilly)](http://oreilly.com/catalog/9780596006815/)和[PHP in Action(Manning)](http://www.manning.com/reiersol/)工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T18:53:51.857

几年前我处于一个非常相似的位置，我自己来自 NOS 背景。

我实际上是从 PHP 和 MySQL 开始的。一旦我吸收了其中包含的知识，我就上网（我经常使用 SitePoint，就像 Boushley 推荐的那样）并阅读了 O'Reilley 的几本关于该主题的书。

有一次我要告诉你的是，如果你想简化你的理解和效率，我发现许多 MVC 框架（CodeIgnitor、CakePHP 等）取得了巨大的成功。如果您不知道 MVC 是什么，我建议您了解一下。现在我使用了 MVC，我的代码更容易理解、修改、排除故障等。

老实说，PHP 学习的一半是遇到这些常见错误并从中学习。在你犯之前很难理解那些“常见错误”。

不要担心你将如何学习，只需开始学习！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-22T02:57:56.007

虽然仍在开发中，但是否显示所有错误：

```
ini_set('display_errors', '1');
error_reporting(E_ALL | E_STRICT); 
```

可以节省很多时间（例如，变量名中的拼写错误）。根据站点的类型和所涉及的安全级别（您不希望每个人都知道路径和变量名等），在它上线时将其更改为不显示或仅显示“真实”错误。

找到适合您的变量/函数命名约定（under_scores vs camelCase vs..）并坚持下去。此外，类位于 /class 目录中，包含在 /inc 等中。这两者都使您更容易从现在开始理解您自己的代码。哦，我猜编码风格也是如此：选择一种并坚持下去（缩进，括号风格，..）。

评论您的代码 :-) 就我个人而言，我在较长文件的末尾还有一个小日志，显示我什么时候做了什么以及为什么。每个添加都带有时间戳，并且相同的时间戳也在更改本身的注释中，因为它所在的行号很容易更改。同样，在包含一堆函数的包含文件中，我在文件顶部的注释中有函数名称列表，后面有一行描述。

最后在安全方面（尽管这确实应该是您首先关心的 ;-) ），将*所有*用户输入视为可疑。那是 POST & GET 数据、cookie、用户代理字符串、搜索字符串——浏览器提供的任何内容。更改 cookie 数据或更改/添加表单项是微不足道的。阅读 SQL 注入和 XSS 攻击，并查看 PHP 相对较新的数据过滤功能： http: [//php.net/manual/en/intro.filter.php](http://php.net/manual/en/intro.filter.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T19:14:22.750

如果我能给你一个建议，那就是使用一个框架——它们会让你的生活变得更轻松。他们从编程网站中删除了所有重复的代码，处理安全问题并抽象了很多东西，并让您使用诸如模型-视图-控制器之类的模式来构建您的网站。

我强烈推荐[CodeIgniter](http://codeigniter.com)框架，因为它简单、强大、文档丰富且易于使用，但也有很多其他好的框架。关于这个有很多关于 SO 的问题，所以快速搜索一下。BinaryCake 的 CodeIgniter（即将成为系列）上有一个精彩的介绍性截屏视频，[请在此处查看](http://binarycake.com/screencasts/mastering-codeigniter-part-1/)。

我希望这有帮助！如果您有任何 PHP 问题，请随时给我发消息 - 这是我的专业领域（以及 CodeIgniter），我喜欢它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T19:03:05.783

使用框架并使用面向对象编程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-22T03:09:32.520

书籍非常适合学习其他语言，但对于您的第一个语言，好的视频教程是一个很好的方法！

注册一个 Lynda.com 帐户（谷歌：lynda 试用版）并根据需要注册尽可能多的一日试用版（或者做一个诚实的人并购买一周）。他们有一个很好的初学者和高级 PHP 系列视频教程，这是（恕我直言）学习第一语言的好方法。

提示：如果您可以从一开始就开始面向对象编程，那么您将来会节省一些时间并从一开始就学习良好的实践，幸运的是高级教程涵盖了这一点！

这是一个链接：[http ://www.lynda.com/home/DisplayCourse.aspx?lpk2=435](http://www.lynda.com/home/DisplayCourse.aspx?lpk2=435)

我从来没有上过这门特别的课程（几年前我学的时候，情况有所不同），但我只是把这门推荐给了一个朋友（他刚刚开始），他真的很喜欢！

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T15:31:20.810

一本好书也可以[在这里](http://www.computer-books.us/php_2.php)免费下载，涵盖从初学者到高级 PHP 技术，是学习良好标准的好方法 :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T14:40:07.810

谷歌其中任何一个以获得一些好的阅读

*   不要使用 register_globals
*   关闭 magic_quotes - 转义所有用户在 SQL 语句中输入的输入
*   转义使用 htmlspecialchars() 打印的任何用户输入的输入

还有更多……不过，这些都是需要注意的常见事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T14:42:23.403

有很多很棒的网站，里面有很多教程。想到的一个是站点点。当您在那里时，他们会尽力向您推销一两本书，但他们确实有一些不错的文章。例如，本文讨论了 php 中的一些常见安全错误。

[http://www.sitepoint.com/article/php-security-blunders/](http://www.sitepoint.com/article/php-security-blunders/)

他们有很多...

[http://www.sitepoint.com/search/search.php?ps=10&q=php&submit=Search](http://www.sitepoint.com/search/search.php?ps=10&q=php&submit=Search)

nettuts.com 也有大量类似性质的教程。不过，它们更全面。

[http://nettuts.com/](http://nettuts.com/)

而且我认为几乎在任何地方你都会看到常见的，比如注意 register_globals，magic_quotes ......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-22T03:16:08.107

如果您是一般编程的新手，那么数据库支持的 Web 应用程序可能会很坎坷。您可能会使用至少两种真正的编程语言（PHP 和 SQL）进行编程，如果您打算做任何适度复杂的事情，JavaScript 也是如此。让他们保持冷静是很困难的，因为他们都是完全不同的。

只是为了热身编程，您可能希望开始使用更集中的学习练习，例如解决[欧拉项目](http://projecteuler.net/)问题或[Code Kata](http://codekata.com/)。

无论哪种方式，无论你在哪里了解它们，都尽量养成良好的习惯，包括这里流行的建议，即使用 MVC 框架来完成繁重的工作。

# windows - 如何为程序设置超时？

> ID：1021728
> 
> 赞同：4
> 
> 时间：2009-06-20T14:32:37.933
> 
> 标签：windows, linux, command-line, timeout

我目前正在尝试为各种编程任务制作一个小型测试应用程序。它将运行可执行文件，该文件将在另一个文件上生成输出，然后将其与答案进行比较。到目前为止，我认为我将能够轻松，但我有一个问题......

我想限制这个可执行文件可以运行的时间，例如1秒或2秒。所以我想知道是否有一个选项可以在达到时间限制时停止/退出程序。

操作系统现在不是问题，它可以是 windows 或 linux，尽管我稍后会将程序切换到 linux，所以如果有人能给我一些关于如何做到这一点的提示会更好。

已经够“喋喋不休”了，我只想问一个问题： **有没有办法为程序在 Linux 或 Windows 上运行多长时间设置时间限制？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T14:39:50.430

[这个脚本](http://www.pixelbeat.org/scripts/timeout)看起来可以为 Linux 完成工作（摘录如下）。

```
cleanup()
{
    kill %1 2>/dev/null             #kill sleep $timeout if running
    kill %2 2>/dev/null && exit 128 #kill monitored job if running
}

set -m               #enable job control
trap "cleanup" CHLD  #cleanup after timeout or command
timeout=$1 && shift  #first param is timeout in seconds
sleep $timeout&      #start the timeout
"$@"                 #start the job 
```

它设置一个运行超时的睡眠命令，然后执行给定的程序。当睡眠退出时，脚本将清理并退出（从而取消您生成的进程）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T21:37:53.023

在 Windows 中，Job 对象可以限制其包含的进程运行的时间。下面是一个开源项目的示例：[sandbox.cpp](https://svn.dre.vanderbilt.edu/viewvc/autobuild/trunk/win32sandbox/sandbox.cpp?view=markup) 请参阅文件底部的帮助消息以获取使用信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T14:55:31.210

您可以使用线程，也可以设置警报（）。下面是如何在 Linux 中设置警报（）的快速示例。

[http://www.aquaphoenix.com/ref/gnu_c_library/libc_301.html#SEC301](http://www.aquaphoenix.com/ref/gnu_c_library/libc_301.html#SEC301)

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

void 
catch_alarm (int sig){
    printf("Alarm event triggered\n");
    signal(sig, catch_alarm);
    exit(EXIT_SUCCESS);
}

int 
main(int argc, char *argv[]){

    signal (SIGALRM, catch_alarm);
    printf("set alarm\n"); 
    alarm(3);

    while(1){
        printf("hello world\n");
    }

    return 0;
} 
```

# c# - 为什么第二个 for 循环总是比第一个执行得快？

> ID：1021737
> 
> 赞同：6
> 
> 时间：2009-06-20T14:35:28.490
> 
> 标签：c#, winforms, performance, diagnostics

我试图弄清楚 for 循环是否比 foreach 循环更快，并且正在使用 System.Diagnostics 类来计时任务。在运行测试时，我注意到我首先放置的循环总是比最后一个循环执行得慢。有人可以告诉我为什么会这样吗？我的代码如下：

```
using System;
using System.Diagnostics;

namespace cool {
    class Program {
        static void Main(string[] args) {
            int[] x = new int[] { 3, 6, 9, 12 };
            int[] y = new int[] { 3, 6, 9, 12 };

            DateTime startTime = DateTime.Now;
            for (int i = 0; i < 4; i++) {
                Console.WriteLine(x[i]);
            }
            TimeSpan elapsedTime = DateTime.Now - startTime;

            DateTime startTime2 = DateTime.Now;
            foreach (var item in y) {
                Console.WriteLine(item);
            }
            TimeSpan elapsedTime2 = DateTime.Now - startTime2;

            Console.WriteLine("\nSummary");
            Console.WriteLine("--------------------------\n");
            Console.WriteLine("for:\t{0}\nforeach:\t{1}", elapsedTime, elapsedTime2);

            Console.ReadKey();
      }
   }
} 
```

**这是输出：**

```
for:            00:00:00.0175781
foreach:        00:00:00.0009766 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-20T14:45:51.650

可能是因为类（例如控制台）需要在第一次通过时进行 JIT 编译。通过首先调用所有方法（对它们进行 JIT（热身然后预热）），然后执行测试，您将获得最佳指标。

正如其他用户所指出的，4 次通行证永远不足以向您展示差异。

顺便说一句，for 和 foreach 之间的性能差异可以忽略不计，使用 foreach 的可读性优势几乎总是超过任何边际性能优势。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-20T14:42:57.117

1.  我不会使用 DateTime 来衡量性能 - 试试这个`Stopwatch`课程。
2.  仅通过 4 次测量永远不会给您带来好的结果。更好地使用 > 100.000 次传球（您可以使用外循环）。不要`Console.WriteLine`在你的循环中做。
3.  更好的是：使用分析器（如 Redgate ANTS 或 NProf）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T14:47:28.183

我不太熟悉 C#，但当我没记错的时候，微软正在为 Java 构建“即时”编译器。当他们在 C# 中使用相同或相似的技术时，“一些次之的构造执行得更快”是很自然的。

例如，JIT 系统可能会看到执行了一个循环并决定临时编译整个方法。因此，当到达第二个循环时，它还没有被编译并且执行速度比第一个快得多。但这是我的一个相当简单的猜测。当然，您需要对 C# 运行时系统有更深入的了解才能了解正在发生的事情。也可能是，RAM-Page 在第一个循环中首先被访问，而在第二个循环中它仍然在 CPU 缓存中。

*插件：另一个评论是：输出模块可以在第一个循环中第一次 JITed 对我来说比我的第一个猜测更有可能。现代语言只是非常复杂地找出引擎盖下做了什么。我的这个陈述也符合这个猜测：*

但是您的循环中也有终端输出。他们让事情变得更加困难。也可能是，在程序中第一次打开终端需要一些时间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-20T14:57:31.423

我只是在执行测试以获得一些实数，但与此同时，Gaz 击败了我的答案——对 Console.Writeline 的调用在第一次调用时被忽略，所以你在第一个循环中支付了这笔费用。

仅供参考 - 使用秒表而不是日期时间和测量刻度数：

在第一个循环之前没有调用 Console.Writeline 的时间是

```
为：16802
前锋：2282

```

通过调用 Console.Writeline 他们是

```
为：2729
前锋：2268

```

尽管由于运行次数有限，这些结果并不能始终如一地重复，但差异的大小始终大致相同。

* * *

编辑后的代码供参考：

```
 int[] x = new int[] { 3, 6, 9, 12 };
        int[] y = new int[] { 3, 6, 9, 12 };

        Console.WriteLine("Hello World");

        Stopwatch sw = new Stopwatch();

        sw.Start();
        for (int i = 0; i < 4; i++)
        {
            Console.WriteLine(x[i]);
        }
        sw.Stop();
        long elapsedTime = sw.ElapsedTicks;

        sw.Reset();
        sw.Start();
        foreach (var item in y)
        {
            Console.WriteLine(item);
        }
        sw.Stop();
        long elapsedTime2 = sw.ElapsedTicks;

        Console.WriteLine("\nSummary");
        Console.WriteLine("--------------------------\n");
        Console.WriteLine("for:\t{0}\nforeach:\t{1}", elapsedTime, elapsedTime2);

        Console.ReadKey(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-20T14:40:32.113

为什么在 foreach 版本中有几种形式的开销在 for 循环中不存在

*   使用 IDisposable。
*   每个元素都有一个额外的方法调用。必须通过使用`IEnumerator<T>.Current`which 是方法调用来访问每个元素。因为它在接口上，所以不能内联。这意味着 N 个方法调用，其中 N 是枚举中的元素数。for 循环只使用和索引器
*   在 foreach 循环中，所有调用都通过一个接口。一般来说，这比通过具体类型慢一点

请注意，我上面列出的东西**不一定**是巨大的成本。它们通常是非常小的成本，可能会导致很小的性能差异。

另请注意，正如 Mehrdad 指出的那样，编译器和 JIT 可能会选择针对某些已知数据结构（例如数组）优化 foreach 循环。最终结果可能只是一个 for 循环。

注意：您的性能基准通常需要更多的工作才能准确。

*   您应该使用 StopWatch 而不是 DateTime。对于性能基准，它要准确得多。
*   您应该多次执行测试，而不仅仅是一次
*   您需要在每个循环上进行一次虚拟运行，以消除第一次 JITing 方法带来的问题。当所有代码都在同一个方法中时，这可能不是问题，但它不会造成伤害。
*   您需要在列表中使用超过 4 个值。试试 40,000。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-20T14:46:43.630

您应该使用 StopWatch 来计时行为。

从技术上讲，*for*循环更快。*Foreach*在 IEnumerable 的迭代器上调用 MoveNext() 方法（从调用中创建方法堆栈和其他开销），而*for*只需要增加一个变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T15:09:15.050

我不明白为什么这里的每个人都说这`for`会比`foreach`这种特殊情况更快。对于 a `List<T>`，它是（`foreach`通过 List 比`for`通过 a慢大约 2 倍`List<T>`）。

事实上，`foreach`会比这里稍微*快*`for`一点。因为`foreach`在数组上基本上编译为：

```
for(int i = 0; i < array.Length; i++) { } 
```

使用`.Length`作为停​​止条件允许 JIT 删除对数组访问的边界检查，因为这是一种特殊情况。Using`i < 4`使 JIT 插入额外的指令来检查每次迭代是否`i`超出数组的范围，如果是则抛出异常。但是，使用`.Length`，它可以保证您永远不会超出数组边界，因此边界检查是多余的，从而使其更快。

然而，在大多数循环中，与内部完成的工作相比，循环的开销是微不足道的。

您看到的差异只能由我猜的 JIT 来解释。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-20T15:20:13.407

我不会对此进行过多解读——这不是很好的分析代码，原因如下
： 1\. DateTime 不适用于分析。您应该使用使用 CPU 硬件配置文件计数器的 QueryPerformanceCounter 或 StopWatch
2\. Console.WriteLine 是一种设备方法，因此可能会有微妙的影响，例如要考虑缓冲
3\. 对每个代码块运行一次迭代永远不会给您准确的结果因为您的 CPU 进行了很多动态优化，例如乱序执行和指令调度
4\. 两个代码块的 JIT 代码可能非常相似，因此很可能在第二个代码的指令缓存中堵塞

为了更好地了解时间，我做了以下

1.  将 Console.WriteLine 替换为数学表达式 (e^num)
2.  我通过 P/Invoke 使用了 QueryPerformanceCounter/QueryPerformanceTimer
3.  我将每个代码块运行 100 万次，然后将结果取平均值

当我这样做时，我得到了以下结果：

for 循环耗时 0.000676 毫秒
foreach 循环耗时 0.000653 毫秒

所以 foreach 稍微快一点，但不是很多

然后我做了一些进一步的实验，首先运行了 foreach 块，然后运行了 for 块
。当我这样做时，我得到了以下结果：

foreach 循环耗时 0.000702 毫秒
for 循环耗时 0.000691 毫秒

最后，我将两个循环一起运行了两次，即 for + foreach 然后 for + foreach 再次
当我这样做时，我得到了以下结果：

foreach 循环花费了 0.00140 毫秒
for 循环花费了 0.001385 毫秒

所以基本上在我看来，无论您第二次运行什么代码，运行速度都会稍微快一些，但不足以产生任何意义。
--Edit--
这里有几个有用的链接
[How to time managed code using QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/ms979201.aspx)
[指令缓存乱](http://en.wikipedia.org/wiki/CPU_cache)
[序执行](http://simple.wikipedia.org/wiki/Out-of-order_execution)

# api - 使用 PC 控制飞利浦 Living Colors

> ID：1021738
> 
> 赞同：17
> 
> 时间：2009-06-20T14:36:00.250
> 
> 标签：api, interface, hardware-interface, zigbee, philips-hue

有没有一种方法（硬件/软件组合）可以让我使用 PC 来控制一个或多个“Philips Living Colors”灯 - 例如充当“遥控器”的 USB 记忆棒。通过这种方式，我可以通过软件（例如网络应用程序 - 通过 iPhone / 远程）控制灯，甚至可以创建飞利浦在他们的一些电视中构建的内容并称为“流光溢彩”（图形驱动程序检测主颜色以控制灯）。

我想这更像是一个硬件而不是一个软件问题——但我在网上找不到任何关于这个的东西，而且我肯定不是第一个在昨天打开我的 LivingColors 灯时提出这个想法的人；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-11T22:40:59.127

LivingColors 灯有两个版本，Gen1 灯可以用一个小套件控制，据我所知 Gen2 不能用 3rd 方产品控制。

有一个 Arduino shield 可以控制 Gen1 灯，描述这个的文章是荷兰语。简而言之：屏蔽，以及扩展的灯，可以通过 USB 串行控制。谷歌翻译可能会有所帮助：

硬件：[http ://www.knutsel.org/2010/04/11/assemble-the-cc2500-arduino-shield/](http://www.knutsel.org/2010/04/11/assembling-the-cc2500-arduino-shield/)

软件链接在文末。（我只能发一个链接。）

有一个架构和软件，有足够的信息来构建您自己的 Gen1 灯控制器。

一些备注：

1.  我是这些帖子的作者。
2.  这些盾牌在荷兰和比利时作为套件出售（因此是荷兰博客文章）。
3.  **Gen2**使用IEEE802.15.4（手册中这样说），据说使用加密的 Zigbee。Zigbee 和加密 Zigbee 使用 IEEE802.15.4。
4.  我可能应该更好地翻译这些帖子。

[ 2010 年 4 月 11 日编辑：将博文翻译成英文并更改了此处的链接]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T22:16:02.593

LivingColors 使用 802.15.4 的实现，这是专为消费电器设计的“ZigBee”网状网络无线协议。

可以说服第二代 LivingColors 灯与[飞利浦 Hue](http://meethue.com/)无线网桥通信并与 Hue 设置集成。可以在此处获得有关如何完成此操作的许多轶事信息：

[http://www.everyhue.com/?page_id=38#/discussion/7/hue-and-living-colors](http://www.everyhue.com/?page_id=38#/discussion/7/hue-and-living-colors)

... 出于您的目的，与 Hue 集成是您最好的选择，因为该桥公开（到目前为止，非官方）一个全面的 RESTful JSON API，它很容易编写脚本 — 可以在此处找到使用此 API 的更好资源之一：

[http://rsmck.co.uk/hue](http://rsmck.co.uk/hue)

使用 Hue 桥和 LivingColors 灯，我个人在做你想做的事情时获得了很多乐趣。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-07T20:05:48.350

我也会对通过 2.4Ghz USB 发射器从计算机控制我的 Living Colors 感兴趣（主要是为了好玩；）

我有两个 Living Colors，一个“Generation 1”和一个“Generation 2”，坏消息是远程硬件和（可能）协议已被 Philips 在此过程中完全修改（可能添加了“褪色效果” “第二代）。所以现在更复杂了，这样的发送器必须处理 2 个协议。

关于官方控制器内部内容的另一个链接（除了上面给出的 Elektor 文章）：

*   第 1 代：[http ://www.knutsel.org/2009/01/01/livingcolors-1st-generation/](http://www.knutsel.org/2009/01/01/livingcolors-1st-generation/)
*   第 2 代：[http ://www.knutsel.org/2009/12/01/philips-redesigns-livingcolors-breaks-compatibility/](http://www.knutsel.org/2009/12/01/philips-redesigns-livingcolors-breaks-compatibility/)
*   Elektor（协议的逆向工程：[http ://www.ideetron.nl/Livcol/UK2008110661.pdf](http://www.ideetron.nl/Livcol/UK2008110661.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T17:33:37.897

我查看了飞利浦网站，您可以在其中下载用户[文档](http://www.lighting.philips.com/microsite/living_colors/)。以下故障排除提示提供了线索：

> ```
> LivingColors doesn’t respond quickly to the remote control.
> - The communication between the remote control and the
>   LivingColors can be affected by heavy traffic on a wireless data
>   network, for example a wireless router.You should move Living-
>   Colors away from the wireless access point and switch your
>   wireless router to channels 8-11 for minimum interference. 
> ```

所以控制器使用无线通信。这显然是一个相当复杂的通信链路，一个控制器最多可以控制 6 个灯。

除非它是一个完整的 WiFi 链接，否则需要一台计算机来控制灯光，否则需要一些严重的硬件黑客攻击。如果它是 WiFi 链接，则可以编写驱动程序。

如果有人有这些，他们可以进行 WiFi 扫描以查看灯和控制器是否出现？

# c++ - 一个类可以自引用吗？

> ID：1021740
> 
> 赞同：4
> 
> 时间：2009-06-20T14:36:20.327
> 
> 标签：c++

**如果结构可以是自引用的。喜欢

```
struct list
{
     struct list *next;
}; 
```

因为除了默认的访问说明符之外，类和结构之间没有区别。那么是否可以写一个类...

```
class list
{
     class list *next;
}; 
```

或者可能有任何不同的语法来获得自引用类。？如果是，那么如何？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T14:37:27.953

是的，但您只能自引用指针或对类（或结构）的引用

典型的方式就是：

```
class list { list* next; } 
```

如果你需要两个类相互引用，你只需要转发声明类，像这样：

```
class list;
class node;

class list { node* first; }
class node { list* parentList; node* next; } 
```

当您没有完整的声明（只是前向声明）时，您只能声明指针或引用。这是因为编译器总是知道指针或引用的大小，但不知道类或结构的大小，除非它具有完整的声明。

# php - 为什么 sprintf() 不输出任何东西？

> ID：1021743
> 
> 赞同：17
> 
> 时间：2009-06-20T14:38:29.903
> 
> 标签：php, printf

我以前从未使用过这些函数，但在阅读了很多关于 sprintf() 的内容后，我决定我应该了解它。

所以我继续做以下事情。

```
function currentDateTime() {
  list($micro, $Unixtime) = explode(" ",microtime());
  $sec= $micro + date("s", $Unixtime);
  $sec = mb_ereg_replace(sprintf('%d', $sec), "", ($micro + date("s", $Unixtime)));
  return date("Y-m-d H:i:s", $Unixtime).$sec;
}

sprintf(currentDateTime()); 
```

它什么也不打印。另一方面，使用 printf() 函数：

```
printf(currentDateTime()); 
```

它打印结果就好了。那么这两个函数有什么区别，我该如何正确使用 sprintf() 函数呢？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-06-20T14:40:37.463

`sprintf()`返回一个字符串，`printf()`显示它。

以下两个是相等的：

```
printf(currentDateTime());
print sprintf(currentDateTime()); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-20T14:40:36.717

`sprintf()`将结果打印到字符串。`printf()`将其打印到标准输出，即：

```
printf(currentDateTime()); 
```

相当于：

```
echo sprintf(currentDateTime()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-20T14:44:44.790

sprintf() 返回一个字符串，而 printf() 输出一个字符串。因此，您必须执行以下操作：

```
function currentDateTime() {
  list($micro, $Unixtime) = explode(" ",microtime());
  $sec= $micro + date("s", $Unixtime);
  $sec = mb_ereg_replace(sprintf('%d', $sec), "", ($micro + date("s", $Unixtime)));
  return date("Y-m-d H:i:s", $Unixtime).$sec;
}

$output = sprintf(currentDateTime());
printf($output); 
```

[http://www.php.net/sprintf](http://www.php.net/sprintf)

[http://www.php.net/printf](http://www.php.net/printf)

# c# - 将 SQL Server 中的两个日期时间值与 c# 进行比较

> ID：1021755
> 
> 赞同：5
> 
> 时间：2009-06-20T14:40:56.870
> 
> 标签：c#, datetime, comparison

我想知道如何比较两个日期时间值，一个是从 sql 数据库中检索的，另一个是使用 c# 的当前值

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-20T16:45:44.210

比较 C# 中生成的日期时间时要小心。C# 中的[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)结构比SQL Server 中的[datetime](http://msdn.microsoft.com/en-us/library/ms187819.aspx) ¹类型具有更高的精度。因此，如果您在 C# 中生成 DateTime（例如 from `DateTime.Now`），将其存储在数据库中，然后将其取回，它很可能会有所不同。

例如，下面的代码：

```
using(SqlConnection conn = new SqlConnection("Data Source=.;Integrated Security=SSPI"))
using(SqlCommand cmd = new SqlCommand("SELECT @d", conn)){
    DateTime now = DateTime.Now;
    cmd.Parameters.Add(new SqlParameter("@d", now));
    conn.Open();
    DateTime then = (DateTime)cmd.ExecuteScalar();
    Console.WriteLine(now.ToString("yyyy/MM/dd HH:mm:ss.fffffff"));
    Console.WriteLine(then.ToString("yyyy/MM/dd HH:mm:ss.fffffff"));
    Console.WriteLine(then - now); 
```

}

返回以下示例结果。

```
2009.06.20 12:28:23.6115968
2009.06.20 12:28:23.6100000
-00:00:00.0015968

```

因此，在这种情况下，您需要检查差异是否在某个 epsilon 内：

```
Math.Abs((now - then).TotalMilliseconds) < 3 
```

请注意，如果您要比较从数据库中检索到的两个日期时间，或者比较从具有第二个或更大粒度的组件构造的日期时间，这不是问题。

另见：[这篇博文](http://seesharper.wordpress.com/2008/07/08/sql-server-datetime-vs-net-datetime-battle-of-accuracy/)

¹^([请参阅关于准确性的说明，其中提到“四舍五入到 0.000、0.003 或 0.007 秒的增量”])

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-20T14:48:50.833

标准的比较运算符（例如相等、小于、大于）为该[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)类型重载。因此，您可以简单地执行如下测试：

```
var foo = DateTime.Parse("01/01/1900");
var bar = DateTime.Now;

var test1 = foo == bar; // false
var test2 = foo != bar; // true
var test3 = foo < bar; // true
var test4 = foo > bar; // false 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-20T14:42:30.190

您可以使用[DateTime.CompareTo](http://msdn.microsoft.com/en-us/library/system.datetime.compareto.aspx)方法。

用法是这样的：

```
firstDateTime.CompareTo(secondDatetime); 
```

并返回一个 int 作为结果，它表示

> 小于零 - 此实例早于值。
> 
> 零 - 此实例与值相同。
> 
> 大于零 - 此实例晚于值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-20T14:48:44.157

假设您要检查两个 DateTimes 是否相等，则有以下方法：

```
TimeSpan span = dateTime2 - dateTime1;
if (span == TimeSpan.Zero)
{
    // The times are the same
} 
```

[正如 echosca 在他的回答](https://stackoverflow.com/questions/1021755/compare-two-datetime-values-from-sql-server-with-c/1021838#1021838)中指出的那样，您当然需要将其转换`System.Data.SqlTypes.SqlDateTime`为第一个。`System.DateTime`

尽管应该存在一些允许的舍入误差（例如在毫秒范围内），因为这些可能是真实世界的派生值，因为简单的等式还不够好。你需要这样的东西：

```
if (Math.Abs(span.TotalMilliseconds) < 10.0)
{
    // The times are within the allowed range
} 
```

如果您只想比较一个日期是在另一个日期之前还是之后，请使用`DateTime.CompareTo`其他人建议的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T15:22:44.463

System.Data.SqlTypes.SqlDateTime 和 System.DateTime 使用不同的底层结构来表示日期。

SqlDateTime 表示从 1753 年 1 月 1 日到 9999 年 12 月 31 日的范围，精度为 3.33 毫秒

DateTime(.NET Framework 类型) 表示 0001 年 1 月 1 日至 9999 年 12 月 31 日之间的范围，精度为 100 纳秒

在比较日期时，您应该注意这些界限。缓解比较问题的一种策略是将所有内容都转换为 System.DateTime，然后执行比较。

您可以使用 SqlDateTime 结构（返回 System.DateTime）的 Value 属性来优雅地进行比较，而无需显式强制转换。

您可能会发现[这篇文章内容](http://codebetter.com/blogs/peter.van.ooijen/archive/2008/08/21/valid-date-time-values-in-sql-server-sqldatetime-vs-datetime.aspx)丰富。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-20T14:50:23.670

您需要将 sql 中的值放入 C# DateTime 对象，然后在 C# 中进行比较。这是来自 MSDN 的有关如何执行此操作的[链接。](http://msdn.microsoft.com/en-us/library/system.datetime.compare(VS.71).aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-20T14:50:38.473

从数据库中检索时，您应该能够使用 SqlDataReader 转换为正确的 .NET 类型。（或使用自动执行此操作的 DataTable/DataSet）。

```
SqlDataReader dr = cmd.ExecuteReader();
DateTime dt = dr.GetDateTime(dr.GetOrdinal("someDateTimeColumn")); 
```

然后你可以正常比较：

```
DateTime otherDate = DateTime.Now;
int compResult = dt.CompareTo(otherDate);

if(compResult > 0) { Console.Write("dt is after otherDate"); }
else if(compResult < 0) { Console.Write("dt is before otherDate"); }
else { Console.Write("dt is equal to otherDate"); } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T15:38:24.367

我希望这篇文章 ( [DATEDIFF Function Demystified](http://www.sqlteam.com/article/datediff-function-demystified) ) 对您有用，虽然它专门针对 SQL 中的 datetime，但有助于理解它在数据库端的处理方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T14:57:30.333

DateTime 结构覆盖 GreterThen、GreaterThenOrEqual、LesserThen、LesserThenOrEqual 运算符、Equalty 运算符。

```
DateTime dateTime1, dateTime2;
dateTime1 = DateTime.Now;
dateTime2 = //set value from database;

// all this operations are legal
if(dateTime1 == dateTime2){}
if(dateTime1 > dateTime2){}
if(dateTime1 < dateTime2){} 
```

# command-line - 在 Common Lisp 中获取命令行参数

> ID：1021778
> 
> 赞同：22
> 
> 时间：2009-06-20T14:50:44.417
> 
> 标签：command-line, lisp, common-lisp

如何在 Common Lisp 中获取命令行参数（特别是在 GNU 中，如果有任何差异）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-20T15:25:46.983

[http://cl-cookbook.sourceforge.net/os.html](http://cl-cookbook.sourceforge.net/os.html)提供了一些见解

```
 (defun my-command-line ()
  (or 
   #+CLISP *args*
   #+SBCL *posix-argv*  
   #+LISPWORKS system:*line-arguments-list*
   #+CMU extensions:*command-line-words*
   nil)) 
```

是你要找的，我想。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-06-20T16:08:57.053

我假设您正在使用 CLisp 编写脚本。您可以创建一个包含

```
#! /usr/local/bin/clisp
(format t "~&~S~&" *args*) 
```

通过运行使其可执行

```
$ chmod 755 <filename> 
```

运行它给出

```
$ ./<filename>
NIL
$ ./<filename> a b c
("a" "b" "c")
$ ./<filename> "a b c" 1 2 3
("a b c" "1" "2" "3") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T17:23:09.313

你说的是 Clisp 还是 GCL？似乎在 GCL 中，命令行参数传入`si::*command-args*`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-19T15:27:34.137

一种可移植的方式是`uiop:command-line-arguments`（在 ASDF3 中可用，默认情况下在所有主要实现中提供）。

库方面，有提到的为每个实现抽象机制的 Clon 库，现在还有更简单的[unix-opts](https://github.com/mrkkrp/unix-opts)和[Cookbook 上的教程](https://lispcookbook.github.io/cl-cookbook/scripting.html#parsing-command-line-arguments)。

```
(ql:quickload "unix-opts")

(opts:define-opts
    (:name :help
       :description "print this help text"
       :short #\h
       :long "help")
    (:name :nb
       :description "here we want a number argument"
       :short #\n
       :long "nb"
       :arg-parser #'parse-integer) ;; <- takes an argument
    (:name :info
       :description "info"
       :short #\i
       :long "info")) 
```

然后使用 完成实际解析`(opts:get-opts)`，它返回两个值：选项和剩余的自由参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-18T13:14:10.150

在 SBCL 中，我们可以使用 sb-ext:*posix-argv* 从通用 lisp 脚本中获取 argv。sb-ext:*posix-argv* 是一个包含所有参数的列表，第一个参数是脚本文件名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-03T21:44:11.500

如[https://stackoverflow.com/a/1021843/31615](https://stackoverflow.com/a/1021843/31615)所示，每个实现都有自己的机制。处理这个问题的常用方法是使用一个为您提供统一接口的包装库。

这样的库不仅可以在读取内容方面提供进一步的帮助，还可以在转换它们并向用户提供有用的输出方面提供帮助。一个非常完整的包是 CLON（请不要与 CLON 或 CLON 混淆，抱歉），[命令行选项 Nuker](https://www.lrde.epita.fr/~didier/software/lisp/clon.php)，它还带来了大量的文档。但是，如果您的需求更轻量级，还有其他一些，例如[command-line-arguments](https://github.com/fare/command-line-arguments)和[apply-argv](https://github.com/pve1/apply-argv)。

quicklisp 中的包分别命名为`net.didierverna.clon`、`command-line-arguments`和`apply-argv`。

# java - 让 J2ME Midlet 在没有线程的情况下休眠？

> ID：1021779
> 
> 赞同：0
> 
> 时间：2009-06-20T14:50:47.537
> 
> 标签：java, java-me, scheduling, midlet, midp

快速提问......使用 J2ME（CLDC 1.1，MIDP-2.1）是否可以让 Midlet 休眠一段时间（不使用线程）......例如：

```
public class myMidlet extends MIDlet{
    public void startApp() {
        /* Sleep for 10 seconds */

        /* The answer was: */
        try {
            Thread.sleep(time_ms);
        } catch (Exception e) {}
    }
... 
```

我不太使用Java，也不想仅仅为了简单的睡眠而编写线程。

**提前致谢**

**答案摘要**

我缺乏Java知识。我看到的使用 Thread.sleep() 的示例让我相信它只能在由 Midlet 生成的线程对象中使用……而不是 midlet 本身。我不想将 midlet 逻辑假脱机到一个线程中以使其休眠......但现在我知道 midlet 在默认线程中运行 :)**去寻找我从未读过的 Java 书，因为我不认为我会一直使用这种语言**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T15:20:29.413

我不明白您是说将 midlet 置于暂停状态还是仅在指定时间内停止执行。

如果是后者，其实我不明白，为什么你不想使用线程，这没什么大不了的。您只需在需要的地方插入以下三行：

```
try {
    Thread.sleep(10000);
} catch (Exception ex) {} 
```

就是这样，没什么太复杂的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T15:20:00.363

我不知道确切的答案，但我也不明白调用静态方法 Thread.sleep(milliseconds) 有什么问题“导致当前执行的线程休眠（暂时停止执行）指定的毫秒数” . 你称之为编程线程吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T15:26:54.860

我会选择 Malcolm 的方法，因为您的线程可能会引发异常。

> [...]并且不想仅仅对线程进行编程[...]

呃，您将很难编写 J2ME 并试图避免线程化编程。如果您的应用程序变得有点复杂，尤其是在使用网络连接时，您将不得不使用线程。此外，如果某些操作花费超过 2-3 秒，则强烈建议在单独的线程中运行它，可能（同时）通知用户正在进行的工作。

顺便说一句，我忘记了什么。我最近为大学课程编写了 J2ME 应用程序。在那里我构建了我称之为“ExecutableTask”的东西，它允许我以一种方便和简单的方式处理线程。如果您想[查看源代码](http://aroundj2me.googlecode.com)...不幸的是，由于 Google 托管解决方案的一些错误（我的项目的某些名称是我的原因），您无法在 Google 存储库中在线浏览它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-26T21:16:10.467

您可以尝试使用`Object.wait()`, `Object.wait(long timeoutValue)`。尽管我不建议您尝试延迟主 startApp() / 系统线程。

# algorithm - 并行算法和数据结构

> ID：1021781
> 
> 赞同：3
> 
> 时间：2009-06-20T14:51:25.603
> 
> 标签：algorithm, data-structures, parallel-processing

根据我对算法的兴趣（请参阅[此处](https://stackoverflow.com/questions/654771/algorithms-and-data-structures-that-are-not-mainstream-closed)），我想知道（与我之前的问题相反）是否存在并行编程*中的主流算法和数据结构。*现在询问主流并行算法和 ds 可能还为时过早，但这里的一些大师可能对其中的一些有过好的经历/不好的经历。

**编辑**：我对 algos 和 ds 的成功实际应用比对学术论文更感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T15:32:13.383

也许，我完全没有抓住重点，但是有很多主流的并行算法和数据结构，例如[矩阵乘法](http://www.mcs.anl.gov/~itf/dbpp/text/node45.html#SECTION02560000000000000000)、[FFT](http://www2.cs.uh.edu/~mirkovic/fft/parfft.htm)、[PDE](http://www.mcs.anl.gov/~itf/dbpp/text/node10.html#SECTION02241000000000000000)和[线性方程](http://www.mcs.anl.gov/~itf/dbpp/text/node90.html#SECTION03480000000000000000)求解器、集成和模拟（[蒙特卡洛](http://www.phy.hr/~laci/para/mc/mc.html)/[随机数](http://www.mcs.anl.gov/~itf/dbpp/text/node116.html#SECTION04200000000000000000)）、[搜索](http://www.mcs.anl.gov/~itf/dbpp/text/node10.html#SECTION02243000000000000000)和[排序](http://www.mcs.anl.gov/~itf/dbpp/text/node127.html#SECTION04340000000000000000)，以及很快。查看[Designing and Building Parallel Programs](http://www.mcs.anl.gov/~itf/dbpp/) or [Patterns for Parallel Programming](http://www.pearsoned.co.uk/Bookshop/detail.asp?item=100000000052063)。然后是[CUDA](http://www.nvidia.com/object/cuda_home.html)之类的。你追求什么？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-20T15:33:55.390

许多 Google 的白皮书，尤其是但不限[于此页面](http://research.google.com/pubs/DistributedSystemsandParallelComputing.html)链接的白皮书，描述了并行分布式计算和/或其 DS 和算法基础的成功实际应用。例如，[本文](http://portal.acm.org/citation.cfm?id=1328671.1328673)涉及修改 DBMS 的数据结构以提取事务内并行性；[这个](http://labs.google.com/papers/mapreduce.html)（和其他一些）介绍了流行的`mapreduce`架构，因为在[hadoop](http://hadoop.apache.org/core/)中实现了；[这](http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?tp=&arnumber=4284890&isnumber=4284553)是关于高度可并行化的近似矩阵分解，适用于机器学习的“内核方法”；等等等等……

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-20T18:06:58.067

排序：

*   [超大数据集的标准模板库](http://stxxl.sourceforge.net/)
*   [排序基准](http://sortbenchmark.org/)

# c - 使用 MPI_Cart_create、MPICH 获取 NULL 通信器

> ID：1021783
> 
> 赞同：1
> 
> 时间：2009-06-20T14:51:54.977
> 
> 标签：c, parallel-processing, mpi

我为我的家庭作业（并行编程）编写了这个程序，但我在运行时遇到了一些错误。

这是来源：

```
/****************************************
 * Program:                 *
 *  ALL_TO_ALL_BROADCAST_MESH       *
 *                      *
 * Author:                  *
 *  -------------------         *
 *  -------------------         *
 ****************************************/

/*
 * Program's using MPI_Send, MPI_Recv and cartesian topology functions
 *
 * Compile using: mpicc -o all_to_all_bc all_to_all_bc.c
 */

#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include "mpi.h"

/* Number of dimensions */
#define NUMB_DIMS 2

/* Max value for the rand() function */
#define MAX_NUMB 128

#define TRUE 1
#define FALSE 0

/* Checks if square root of n can be calculated     *
 * Returns the square root on success or -1 on failure  */
int is_sqrt(int n);

int main(int argc, char **argv) {

    int my_rank;            /* Rank of the current process          */
    int size;           /* Number of processes in the mesh      */
    int mesh_size;          /* Size of a single mesh row            */
    int my_numb;            /* Message                  */
    int *all_numbs;         /* All numbers owned by the current process */
    int numb_numbs;         /* Number of numbers in the all_numbs array */
    int left, right, up, down;  /* Neighbourghs of the process as rank numbers  */

    /* Neighbourghs as cartesian coords */
    int *my_coords, *left_coords, *right_coords, *up_coords, *down_coords;

    /* Allocate memory for cartesian coords */
    my_coords = (int *)malloc(NUMB_DIMS*sizeof(int));
    left_coords = (int *)malloc(NUMB_DIMS*sizeof(int));
    right_coords = (int *)malloc(NUMB_DIMS*sizeof(int));
    up_coords = (int *)malloc(NUMB_DIMS*sizeof(int));
    down_coords = (int *)malloc(NUMB_DIMS*sizeof(int));

    MPI_Comm grid_comm; /* Mesh Communicator */

    int *dim_size = (int *)malloc(NUMB_DIMS*sizeof(int));   /* Sizes of mesh dimensions     */
    int *peroids = (int *)malloc(NUMB_DIMS*sizeof(int));    /* True if the column wraps around  */
    int reorder;                        /* I have no idea what this does ;) */

    int i,j; /* counters */

    /* MPI initialization */
    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&my_rank);

    /* Check if p^2=N */
    if (mesh_size=is_sqrt(size)<0) {
        perror("Square root of the number of processes can't be calculated!");
        MPI_Finalize();
        return -1;
    }

    /* Configure parameters for MPI_Cart_Create() */
    for (i=0;i<NUMB_DIMS;i++) {
        dim_size[i]=mesh_size;
        peroids[i]=TRUE;
    }
    reorder=FALSE;

    /* create new communicator */
    if (MPI_Cart_create(MPI_COMM_WORLD,NUMB_DIMS,dim_size,peroids,reorder,&grid_comm)<0) {
        perror("Unable to create new communicator!");
        MPI_Finalize();
        return -1;
    }

    /* calculate the coords and ranks */
    MPI_Cart_coords(grid_comm,my_rank,NUMB_DIMS,my_coords);

    /* !!this block is for 2D grid only!! */
        memcpy(left_coords,my_coords,NUMB_DIMS*sizeof(int));
        memcpy(right_coords,my_coords,NUMB_DIMS*sizeof(int));
        memcpy(up_coords,my_coords,NUMB_DIMS*sizeof(int));
        memcpy(down_coords,my_coords,NUMB_DIMS*sizeof(int));

        left_coords[0]=(left_coords[0]-1)%mesh_size;
        right_coords[0]=(right_coords[0]+1)%mesh_size;
        up_coords[1]=(up_coords[1]+1)%mesh_size;
        down_coords[1]=(down_coords[1]-1)%mesh_size;

        MPI_Cart_rank(grid_comm,left_coords,&left);
        MPI_Cart_rank(grid_comm,right_coords,&right);
        MPI_Cart_rank(grid_comm,up_coords,&up);
        MPI_Cart_rank(grid_comm,down_coords,&down);
    /* !!this block is for 2D grid only!! */

    /* get a random number for this process */
    my_numb = rand()%MAX_NUMB;

    all_numbs = (int *)malloc(size*sizeof(int));

    MPI_Status status;

    /****************
     * BROADCASTING *
     ****************/

    printf("I'm process (%d,%d),\nMy number is %d\n\n",my_coords[0],my_coords[1],my_numb);

    all_numbs[0]=my_numb;
    numb_numbs=1;

    /* Communication along rows */
    for (i=0;i<mesh_size-1;i++) {

        printf("I'm process (%d,%d),\nI'm sending %d to process (%d,%d)\n\n",my_coords[0],my_coords[1],my_numb,right_coords[0],right_coords[1]);
        MPI_Send(&my_numb,sizeof(int),MPI_INT,right,99,grid_comm);

        printf("I'm process (%d,%d),\nI'm recieving data from process (%d,%d)\n\n",my_coords[0],my_coords[1],left_coords[0],left_coords[1]);
        MPI_Recv(&my_numb,sizeof(int),MPI_INT,left,99,grid_comm,&status);

        all_numbs[numb_numbs]=my_numb;
        numb_numbs++;

        printf("My current numbers are:\n");
        for (j=0;j<numb_numbs;j++)
            printf("%d, ",all_numbs[j]);
        printf("\n\n");
    }

    /* Communication along columns */
    my_numb=all_numbs[0];

    for (i=0;i<mesh_size-1;i++) {

        printf("I'm process (%d,%d),\nI'm sending %d to process (%d,%d)\n\n",my_coords[0],my_coords[1],my_numb,up_coords[0],up_coords[1]);
        MPI_Send(&my_numb,sizeof(int),MPI_INT,up,99,grid_comm);

        printf("I'm process (%d,%d),\nI'm recieving data from process (%d,%d)\n\n",my_coords[0],my_coords[1],down_coords[0],down_coords[1]);
        MPI_Recv(&my_numb,sizeof(int),MPI_INT,down,99,grid_comm,&status);

        all_numbs[numb_numbs]=my_numb;
        numb_numbs++;

        printf("My current numbers are:\n");
        for (j=0;j<numb_numbs;j++)
            printf("%d, ",all_numbs[j]);
        printf("\n\n");
    }

    printf("I'm process %d\nBroacasting performed!\nMy numbers are:\n");
    for (i=0;i<numb_numbs;i++)
        printf("%d, ",all_numbs[i]);
    printf("\n\n");

    MPI_Finalize();
    return 0;
}

int is_sqrt(int n) {

    double a=n;
    double b=sqrt(a);
    double c=b*b;

    int result;

    if (a==c) {
        result=(int)b;
        return result;
    }
    else
        return -1;
} 
```

这是我得到的错误：

```
% mpirun -np 4 all_to_all_bc
[cli_1]: [cli_3]: aborting job:
Fatal error in MPI_Cart_coords: Invalid communicator, error stack:
MPI_Cart_coords(130): MPI_Cart_coords(MPI_COMM_NULL, rank=3, maxdims=2, coords=0x6a9010) failed
MPI_Cart_coords(74).: Null communicator
aborting job:
Fatal error in MPI_Cart_coords: Invalid communicator, error stack:
MPI_Cart_coords(130): MPI_Cart_coords(MPI_COMM_NULL, rank=1, maxdims=2, coords=0x6a9010) failed
MPI_Cart_coords(74).: Null communicator
[cli_0]: aborting job:
Fatal error in MPI_Cart_coords: Invalid communicator, error stack:
MPI_Cart_coords(130): MPI_Cart_coords(MPI_COMM_NULL, rank=0, maxdims=2, coords=0x6a9010) failed
MPI_Cart_coords(74).: Null communicator
[cli_2]: aborting job:
Fatal error in MPI_Cart_coords: Invalid communicator, error stack:
MPI_Cart_coords(130): MPI_Cart_coords(MPI_COMM_NULL, rank=2, maxdims=2, coords=0x6a9010) failed
MPI_Cart_coords(74).: Null communicator
rank 3 in job 18  ---host---_58157   caused collective abort of all ranks
  exit status of rank 3: killed by signal 9 
rank 2 in job 18  ---host---_58157   caused collective abort of all ranks
  exit status of rank 2: return code 1 
rank 1 in job 18  ---host---_58157   caused collective abort of all ranks
  exit status of rank 1: killed by signal 9 
rank 0 in job 18  ---host---_58157   caused collective abort of all ranks
  exit status of rank 0: return code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T22:04:14.857

**编辑：**

查看您的错误消息：

```
Fatal error in MPI_Cart_coords: Invalid communicator, error stack:
MPI_Cart_coords(130): MPI_Cart_coords(MPI_COMM_NULL, rank=3, maxdims=2, coords=0x6a9010) failed
MPI_Cart_coords(74).: Null communicator 
```

看起来沟通者`MPI_Cart_coords`为空。回过头来看，这是通过调用`MPI_Cart_create`上面约 5 行来初始化的。

从`MPI_Cart_create`手册页（我的重点）：

> 描述
> 
> MPI_Cart_create 将句柄返回给附加了笛卡尔拓扑信息的新通信器。如果 reorder = false 则新组中每个进程的排名与其在旧组中的排名相同。否则，该功能可能会重新排序进程（可能是为了选择将虚拟拓扑良好地嵌入到物理机器上）。**如果笛卡尔网格的总大小小于 comm 组的大小，则返回一些进程 MPI_COMM_NULL，类似于 MPI_Comm_split。** 如果调用指定的网格大于组大小，则调用是错误的。

看起来这可能是你的问题。

# c# - 有没有好的市售串口库

> ID：1021788
> 
> 赞同：0
> 
> 时间：2009-06-20T14:56:27.057
> 
> 标签：c#

我在使用 .net 3.5 sp1 中可用的串行端口组件时遇到问题。似乎很多人都面临着同样的问题。有谁知道微软组件的优质替代品？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T14:59:02.903

我在 CodeProject 上找到了这个[替代方案。](http://www.codeproject.com/KB/showcase/SerialPortDotNet.aspx)

希望这可以帮助！

# c++ - 如何转发声明内部类？

> ID：1021793
> 
> 赞同：186
> 
> 时间：2009-06-20T14:58:35.820
> 
> 标签：c++, forward-declaration

我有这样的课...

```
class Container {
public:
    class Iterator {
        ...
    };

    ...
}; 
```

在其他地方，我想通过引用传递一个 Container::Iterator，但我不想包含头文件。如果我尝试转发声明该类，则会出现编译错误。

```
class Container::Iterator;

class Foo {
    void Read(Container::Iterator& it);
}; 
```

编译上面的代码给出...

```
test.h:3: error: ‘Iterator’ in class ‘Container’ does not name a type
test.h:5: error: variable or field ‘Foo’ declared void
test.h:5: error: incomplete type ‘Container’ used in nested name specifier
test.h:5: error: ‘it’ was not declared in this scope 
```

如何转发声明这个类，这样我就不必包含声明 Iterator 类的头文件？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-06-20T15:07:15.040

这根本不可能。您不能在容器外转发声明嵌套结构。您只能在容器内转发声明它。

您需要执行以下操作之一

*   使类非嵌套
*   更改您的声明顺序，以便首先完全定义嵌套类
*   创建一个既可以在函数中使用又可以由嵌套类实现的通用基类。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-06-20T15:09:15.863

我不相信在不完整的类上向前声明内部类（因为没有类定义，就无法知道是否真的*存在*内部类）。因此，您必须包含 Container 的定义，以及前向声明的内部类：

```
class Container {
public:
    class Iterator;
}; 
```

然后在一个单独的头文件中，实现 Container::Iterator：

```
class Container::Iterator {
}; 
```

然后 #include 仅容器标头（或不担心前向声明而只包含两者）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T15:11:32.550

我知道没有办法完全按照您的意愿行事，但如果您愿意使用模板，这里有一个解决方法：

```
// Foo.h  
struct Foo
{
   export template<class T> void Read(T it);
}; 
```

* * *

```
// Foo.cpp
#include "Foo.h"
#include "Container.h"
/*
struct Container
{
    struct Inner { };
};
*/
export template<> 
  void Foo::Read<Container::Inner>(Container::Inner& it)
{

} 
```

* * *

```
#include "Foo.h"
int main()
{
  Foo f;
  Container::Inner i;
  f.Read(i);  // ok
  f.Read(3);  // error
} 
```

希望这个成语可能对您有所帮助（希望您的编译器是基于 EDG 的并实现了 export ;)）。

# ruby - 控制 Merb 身份验证错误

> ID：1021798
> 
> 赞同：0
> 
> 时间：2009-06-20T15:00:55.100
> 
> 标签：ruby, merb, merb-auth

嘿，我对在登录控制器处理无效的用户身份验证请求有点困惑。所以，我已经修改了登录视图，但不知道在哪里放置异常处理块。它应该像这样工作：您登录 - 如果它不正确，您将在 /login 看到警告消息。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-14T12:59:03.137

你选择了什么策略？在我的自定义策略中，我在我的 User 类上调用类方法“authenticate”：

```
class User
  def self.authenticate(login, password)
    u = User.first(:conditions => ['email = ?', login]) # find a user with this login
    if u && u.authenticated?
      return u
    else
      nil
    end
  end
end 
```

此外，您可能想查看 merb-auth-more/mixins/salted_user 的源代码，这是一个自动混合到您的 User 类中的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-07T04:37:38.917

你会把你的异常处理动作放在异常控制器中

```
# handle NotAuthorized exceptions (403)
def not_authorized
    render :format => :html
end 
```

并自定义视图，您将在 app/views/exceptions/not_authorized.html.haml 中创建一个模板

# iphone - CGPathRef 交点

> ID：1021801
> 
> 赞同：9
> 
> 时间：2009-06-20T15:03:45.217
> 
> 标签：iphone, cocoa, cocoa-touch, core-graphics

有没有办法找出两个 CGPathRefs 是否相交。在我的例子中，所有的 CGPaths 都有 closePath。

例如，我有两条路径。一条路径是旋转一定角度的矩形，另一条路径是弯曲路径。两条路径的原点会经常变化。在某些时候，它们可能会相交。我想知道它们何时相交。如果您有任何解决方案，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T20:04:39.983

将一条路径设置为剪切路径，绘制另一条路径，然后搜索在剪切过程中幸存下来的像素：

```
// initialise and erase context
CGContextAddPath(context, path1);
CGContextClip(context);

// set fill colour to intersection colour
CGContextAddPath(context, path2);
CGContextFillPath(context);

// search for pixels that match intersection colour 
```

这是有效的，因为裁剪 = 相交。

不要忘记交集取决于内在性的定义，其中有几个。此代码使用缠绕数填充规则，您可能需要奇偶规则或其他规则。如果内在性不能让你彻夜难眠，那么这段代码应该没问题。

我之前的回答涉及将透明曲线绘制到 RGBA 上下文中。此解决方案优于旧解决方案，因为它是

1.  更简单
2.  使用四分之一的内存作为 8 位灰度上下文就足够了
3.  消除了对毛茸茸、难以调试的透明代码的需求

谁还能要求更多？

我想你可以要求一个完整的实现，准备好剪切粘贴，但这会破坏乐趣并混淆一个原本简单的答案。

**年龄较大、更难理解且效率较低的答案**

以 50% 的透明度将两者`CGPathRefs` **分别**绘制到一个归零的`CGBitmapContextCreate`-ed RGBA 内存缓冲区中，并检查任何大于 128 的像素值。这适用于任何支持 CoreGraphics 的平台（即 iOS 和 OSX）。

在伪代码中

```
// zero memory

CGContextRef context;
context = CGBitmapContextCreate(memory, wide, high, 8, wide*4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);
CGContextSetRGBFillColor(context, 1, 1, 1, 0.5);  // now everything you draw will be at 50%

// draw your path 1 to context

// draw your path 2 to context

// for each pixel in memory buffer
if(*p > 128) return true; // curves intersect  
else p+= 4; // keep looking 
```

让光栅化版本的分辨率成为您的精度，并选择适合您性能需求的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T19:12:18.747

1）没有任何`CGPath`API可以做到这一点。但是，你可以做数学来弄清楚。查看这篇关于[Bezier 曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)的维基百科文章，了解 CGPath 中的曲线是如何实现的。

2) 这在 iPhone 上会很慢，但您可以将两条路径填充到不同颜色的缓冲区中（例如，红色和蓝色，alpha=0.5），然后遍历缓冲区以查找发生的任何像素在十字路口。这将非常缓慢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2011-12-22T16:10:42.667

对于 iOS，alpha 混合似乎被忽略了。

相反，您可以进行颜色混合，这将达到相同的效果，但不需要 alpha：

```
CGContextSetBlendMode(context, kCGBlendModeColorDodge);
CGFloat semiTransparent[] = { .5,.5,.5,1}; 
```

输出图像中的像素将是：

*   RGB = 0,0,0 = (0.0f) ... 没有路径
*   RGB = 64,64,64 = (0.25f) ... 一条路径，没有交叉点
*   RGB = 128,128,128 = (0.5f) ... 两条路径，找到交点

完整的绘图代码：

```
-(void) drawFirst:(CGPathRef) first second:(CGPathRef) second into:(CGContextRef)context
{
    /** setup the context for DODGE (everything gets lighter if it overlaps) */
    CGContextSetBlendMode(context, kCGBlendModeColorDodge);

    CGFloat semiTransparent[] = { .5,.5,.5,1};

    CGContextSetStrokeColor(context, semiTransparent);
    CGContextSetFillColor(context, semiTransparent);

    CGContextAddPath(context, first);
    CGContextFillPath(context);
    CGContextStrokePath(context);

    CGContextAddPath(context, second);
    CGContextFillPath(context);
    CGContextStrokePath(context);
} 
```

检查输出的完整代码：

```
[self drawFirst:YOUR_FIRST_PATH second:YOUR_SECOND_PATH into:context];

// Now we can get a pointer to the image data associated with the bitmap
// context.
BOOL result = FALSE;
unsigned char* data = CGBitmapContextGetData (context);
if (data != NULL) {

    for( int i=0; i<width; i++ )
        for( int k=0; k<width; k++ )
        {
    //offset locates the pixel in the data from x,y.
    //4 for 4 bytes of data per pixel, w is width of one row of data.
    int offset = 4*((width*round(k))+round(i));
    int alpha =  data[offset];
    int red = data[offset+1];
    int green = data[offset+2];
    int blue = data[offset+3];

            if( red > 254 )
            {
                result = TRUE;
                break;
            }
        } 
```

最后，这是来自另一个 SO 答案的稍微修改的代码......用于在 iOS 4、iOS 5 上创建 RGB 空间的完整代码，它将支持上述功能：

```
- (CGContextRef) createARGBBitmapContextWithFrame:(CGRect) frame
{
   /** NB: this requires iOS 4 or above - it uses the auto-allocating behaviour of Apple's method, to reduce a potential memory leak in the original StackOverflow version */
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace;
    void *          bitmapData;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    // Get image width, height. We'll use the entire image.
    size_t pixelsWide = frame.size.width;
    size_t pixelsHigh = frame.size.height;

    // Declare the number of bytes per row. Each pixel in the bitmap in this
    // example is represented by 4 bytes; 8 bits each of red, green, blue, and
    // alpha.
    bitmapBytesPerRow   = (pixelsWide * 4);
    bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

    // Use the generic RGB color space.
    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL)
    {
        fprintf(stderr, "Error allocating color space\n");
        return NULL;
    }

    // Create the bitmap context. We want pre-multiplied ARGB, 8-bits
    // per component. Regardless of what the source image format is
    // (CMYK, Grayscale, and so on) it will be converted over to the format
    // specified here by CGBitmapContextCreate.
    context = CGBitmapContextCreate (NULL,
                                     pixelsWide,
                                     pixelsHigh,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedFirst
                                     //kCGImageAlphaFirst
                                     );
    if (context == NULL)
    {
        fprintf (stderr, "Context not created!");
    }

    // Make sure and release colorspace before returning
    CGColorSpaceRelease( colorSpace );

    return context;
} 
```

# c# - 哪些因素促使您在应用程序中使用嵌入式脚本？

> ID：1021806
> 
> 赞同：2
> 
> 时间：2009-06-20T15:06:26.117
> 
> 标签：c#, design-patterns, inversion-of-control, embedded-language

当您选择嵌入式脚本时，您在决策过程中会考虑哪些因素？配置和变化问题是否可以完全通过 IOC 和插件模式来克服？

很多时候，策略模式和装饰器模式是驯服领域逻辑变化的好方法。我面临的问题是，工作流的计算和起点会根据不同的营销活动在一年中有所不同，并且直到活动开始之前才知道所有数据要求和业务规则。作为一家小商店，我们希望有一个解决方案，我们可以在其中进行配置更改、严格测试，而不是被迫不断地编译/链接和重新部署。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T15:11:14.937

很多时候，我通过 Python 或 Lua 使内部数据结构可变。有时将业务逻辑外部化为可加载模块。这也使您的解决方案成为一个**可重用的框架，您可以****廉价地**部署到其他客户端。它还使“现场”修复更快（只需更新文本文件），并让客户可以自由修改自己的动态数据。

如果您可以**安全地公开 API**而不会破坏任何东西……为什么不呢？

我的两个担忧是：

1.  我可以外部化**特定于客户的**逻辑吗？或者以后可能会**定制**？
2.  我可以在满足**性能**和**知识产权**限制的同时做到这一点吗？

一个干净的框架 == 可重用的代码和一个平台，您可以快速修改以解决相同问题而无需重新编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T15:14:37.490

我在 2 个场景中使用了这种技术：

1.  我想为客户/客户提供一些设施，以便能够自己提供一些（有限的）定制。例如，如果值超过 50，则将图表着色为红色，因此允许他们键入一个简短的脚本，例如“if val > limit then 'red'”等。但是，您必须小心限制用户可以编程的内容（显然原因）
2.  当我需要在现场对软件进行一些定制时（即重新编译不是一种选择），我知道我需要的不仅仅是能够打开/关闭组件。所以我将实现一些机制，让应用程序通过可编写脚本的组件来配置自己

（本人主要是Java为主，所以使用Java 6嵌入式脚本加多种语言实现以上，视重点而定）

# iphone - 是否可以从另一个 iPhone 应用程序中浏览 Safari 书签？

> ID：1021812
> 
> 赞同：1
> 
> 时间：2009-06-20T15:08:30.747
> 
> 标签：iphone, safari, bookmarks

我希望我忽略了一些东西，但是在使用另一个应用程序时我无法找到任何有关阅读/加载 Safari 书签的信息。这可能吗？我希望用户能够将现有书签复制到我的应用程序中的列表中。非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T17:35:01.780

不是通过现有的 SDK 或 API，而是一些线程建议，通过越狱，您可以在以下位置访问该文件：

> /var/mobile/Library/Safari/Bookmarks.plist

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T15:40:49.870

这会很有用，但不，我不知道导入 Safari 书签的任何官方方法。

# regex - 正则表达式需要 # 个非空白字符

> ID：1021818
> 
> 赞同：0
> 
> 时间：2009-06-20T15:13:24.310
> 
> 标签：regex, textarea, whitespace

我有一个文本区域。我正在尝试检查它是否在 javascript 中包含至少 3 个非空白字符，如果包含，我需要重新检查在 php.ini 中发布的消息。

我想一旦我让它在 php 中工作，我可以对 javascript 使用相同的正则表达式。然而，空格把它搞砸了。

我不明白为什么以下内容在 php 中不起作用：

```
$msg = mysql_real_escape_string($_POST["msg"]);

if(!preg_match('/[\S]{3,}/',$msg)){
     echo 'too short';
} 
```

在我看来，这似乎需要至少 3 个“非空白字符”。但是，如果我输入：

```
f f f 
```

它说它太短了。和

```
f 

d 
```

通过。我尝试添加“g”标志，并在正则表达式周围使用 ^ 和 $。

感谢您的任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T15:16:43.383

您的正则表达式匹配 3 个**后续**的非空白字符。

以下匹配 3 个非空白字符，由任何字符分隔：

```
/(\S.*){3,}/ 
```

要跨多行执行验证，请添加`s`修饰符：

```
/(\S.*){3,}/s 
```

您还应该在调用**之前**`mysql_real_escape_string`进行验证。在您的示例中，第二个字符串被转换为`f\r\nd`或`f\nd`首先。它现在包含 3 个后续的非空白字符！如您所见，这搞砸了验证。

# sharepoint - 共享点访问

> ID：1021820
> 
> 赞同：1
> 
> 时间：2009-06-20T15:15:46.427
> 
> 标签：sharepoint

是否有任何可用于 sharepoint 的方法可以执行以下操作：

创建一个起诉 wss3.0 的网站。使用 fba 登录。无需登录即可编辑登录用户有权访问的库中的文档。

从网站更改用户的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-22T16:48:44.613

您可以在 WSS 3.0 下使用 FBA 创建 Internet 站点。您将需要适当的许可证，我相信在 WSS 的情况下称为“互联网连接器”许可证。我不确定您所说的“无需登录即可编辑登录用户有权访问的库中的文档”是什么意思。您可以向匿名用户公开文档库，即使经过身份验证的用户对它具有特定权限，如果这就是您的意思的话。您可以编写自定义 Web 部件，允许管理员或用户自己从站点内更改用户密码。

# wpf - 将 ContextMenu 的 MenuItem 可见性绑定到 ListView 选择

> ID：1021825
> 
> 赞同：8
> 
> 时间：2009-06-20T15:17:10.637
> 
> 标签：wpf, binding, contextmenu, visibility, menuitem

我有一个带有 ListView 的用户控件，其中包含来自 ObservableCollection 的简单项目。我希望该 ListView 的 ContextMenu 包含项目，具体取决于在 ListView 中选择的内容。如果未选择任何项目，则某些 MenuItems 不应可见。

当我打开 ContextMenu 时，甚至没有调用我的转换器。绑定似乎是错误的，我在输出窗口中找到了这个：

> System.Windows.Data 错误：4：找不到与引用“ElementName = listView”绑定的源。绑定表达式：路径=选定项；数据项=空；目标元素是'MenuItem'（名称=''）；目标属性是“可见性”（类型“可见性”）

我不明白出了什么问题，也无法通过搜索网络来弄清楚。

这是一些简化的代码：

```
<UserControl x:Class="MyApp.DatabaseControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:l="clr-namespace:MyApp"
Height="Auto" 
Width="Auto">

<UserControl.Resources>
    <l:ValueToVisibilityConverter x:Key="valueToVisibility" />
</UserControl.Resources>

<Grid>
    <ListView x:Name="listView" ItemsSource="{Binding Persons}">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="140" Header="First Name" DisplayMemberBinding="{Binding FirstName}"/>
                <GridViewColumn Width="140" Header="Last Name" DisplayMemberBinding="{Binding LastName}" />
            </GridView>
        </ListView.View>

        <ListView.ContextMenu>
            <ContextMenu>
                <MenuItem 
                    Header="Open" 
                    Visibility="{Binding SelectedItem, ElementName=listView, Converter={StaticResource valueToVisibility}}"/>
                <Separator/>
                <MenuItem Header="Add..."/>
                <MenuItem Header="Remove"/>
            </ContextMenu>
        </ListView.ContextMenu>
    </ListView>
</Grid> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T18:13:08.147

问题是 与`ContextMenu`不在同一可视树中`ListBox`，因此绑定找不到`ListBox`. 如果你绑定反对`PlacementTarget`，那应该可以解决问题：

```
<MenuItem Header="Open"
    Visibility="{Binding RelativeSource={RelativeSource FindAncestor,
        AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItem,
        Converter={StaticResource valueToVisibility}}" /> 
```

# java - 如何为 Java 文件构建编译图？

> ID：1021835
> 
> 赞同：0
> 
> 时间：2009-06-20T15:22:05.370
> 
> 标签：java, dependencies, compilation

我在一个项目中有大量的类，我想从一个脚本中编译所有的类。问题是，类应该按一定的顺序编译，例如：我有一个名为**A**的类，它依赖于一个名为**B**的类。假设**B**类依赖于名为**C**的类。为了让我编译 A 类，我必须先编译 B 和 C。

是否有一些工具可以用来建立类的编译顺序，这样我就不必解析每个类并自己确定这一点？我希望该工具可以按照要编译的文件的顺序保存文件，以便我可以从我的脚本中解析它。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T15:24:09.950

如果您同时编译所有它们（在同一`javac`调用中），则不需要执行您所描述的任何事情。`javac`足够聪明，可以同时编译你给它的所有文件，所以乱序编译没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T15:28:54.887

Java 编译器 (Javac) 已经为您需要编译的所有类文件构建了一个依赖关系列表。这里真正的依赖是***包之间的——而不是******同一个包中的***单个 java 文件（这由编译器自动处理）。

使用**Ant**或**Maven**之类的工具来指定和编译各种包中的所有文件并生成您的最终发行版。

如果您使用的是像 NetBeans 这样的 IDE，它会自动为您执行此操作。或者，如果使用**[JDepend 之类的工具](http://clarkware.com/software/JDepend.html)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T15:46:04.307

这类 DAG 排序问题通常通过拓扑排序来解决。有关说明，请参见[Wikipedia](http://en.wikipedia.org/wiki/Topological_sort)。我不知道是否有您正在寻找的工具，但是自己实现它应该没有那么困难。

# c# - 如何从 C# 打印 Word 文档

> ID：1021836
> 
> 赞同：0
> 
> 时间：2009-06-20T15:22:08.287
> 
> 标签：c#, .net, printing, ms-word

如何从 C# .NET 应用程序启动文档的打印？Word 文档已存在于硬盘中。我只想在按钮单击事件时开始打印该 Word 文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T15:40:38.107

```
 ProcessStartInfo psi = new ProcessStartInfo(wordFilename)
 {
    UseShellExecute = true,
    Verb = "print",
    RedirectStandardOutput = false,
    CreateNoWindow = true
 };

 using (Process p = new Process {StartInfo = psi})
 {
     p.Start();
     p.WaitForExit();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T15:44:58.990

要执行此类操作，您需要了解 System.Diagnostics.Process ，MSDN 页面以如何打印 Word 文档为例。一个简短的版本：

```
 System.Diagnostics.Process printProcess = new System.Diagnostics.Process();
 printProcess.StartInfo.FileName = @"X:\test\print this.doc";
 printProcess.StartInfo.Verb = "Print";
 printProcess.StartInfo.CreateNoWindow = true;
 printProcess.Start(); 
```

# javascript - jquery tablerow点击功能

> ID：1021837
> 
> 赞同：1
> 
> 时间：2009-06-20T15:22:10.440
> 
> 标签：javascript, jquery, event-handling

我有一个功能，允许用户通过在模式中打开数据来编辑表格中的一行。现在整行将触发模态。我想要的是隔离最后一个 td ，其中包含一个链接，该链接触发一个准备数据进行处理的函数。

发生的情况是，当单击最后一个 td 时，模态打开并且 ready 函数触发。我试图阻止模式打开。

我还在表格的每一行上突出显示了鼠标悬停行。

这就是我将表格行与模态函数相关联的方式：

```
$("#table").find("tr").click(function(e) {

 //code to open model
 } 
```

这就是我触发准备功能的方式：

```
$("#table tr td:last-child a").click(function(e) {
//code to open model
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T15:30:07.223

只需添加“ `return false;`”：

```
$("#table tr td:last-child a").click(function(e) {
    // whatever should happen when clicking the anchor
    return false;
} 
```

这可以防止事件传播到周围`tr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T15:38:03.650

我相信您需要调用 e.stopPropogation() 以防止事件传播：

```
$("#table tr td:last-child a").click(function(e) {
    //code to open model
    e.stopPropagation();
    return false;
} 
```

**说明**：

事件从最“特定”的元素传播到它们的父元素。这称为冒泡，在这种情况下，您的第二个模式被触发，因为单击事件从 A 元素冒泡到 TR 元素。

我相信所有事件都会传播和冒泡。Return false 只是取消了 A 元素的默认操作，即跟随链接……它不会停止事件对象。

这是对整个事情的一个[很好的解释。](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T17:54:58.947

为什么不是在表中任何行的最后一个单元格中找到链接，而是为您的链接分配一个 id 或一个类

像 ...

然后从 css 添加 display : block 属性，使锚点填充它包含的整个区域。

然后简单地

```
$('.anchorclass').click(function(){ 
```

// 在这里做点什么

});

# .net - 关于 .NET 内存泄漏的问题

> ID：1021839
> 
> 赞同：-1
> 
> 时间：2009-06-20T15:23:18.080
> 
> 标签：.net, memory-leaks

我的 C# 代码中有一些内存泄漏 我有一个类，里面有一些 SqlCommand 字段。我还有一个分配这些 SqlCommands 字段的 Initialize() 公共方法。

在分配之前，我检查（在 Initialize 的代码中）是否不是第一次进行分配（即不是第一次调用 Initialize），如果这不是我第一次在 SqlCommands 上调用 Dispose，它似乎会导致内存泄漏....

现在重要的是要提到所有的 SqlCommands 都使用相同的 SqlConnection 并且这个连接在程序的整个生命周期中都是活动的。连接是通过某个静态类的静态属性访问的......（我们称之为 ConnectionManager）

知道可能是什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T15:34:44.250

[Krembo，使用 SqlConnection 和 SqlCommand 对象的推荐方法是在 using 语句中，如MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx1)中的示例代码所示 ：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();
    // Do work here; connection closed on following line.
} 
```

您可能应该在使用完 SqlConnection 对象后立即处理它，虽然这看起来会很慢，但在幕后，连接池将消除大部分开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T15:41:33.113

您可能应该发布一些相关代码。没有它，我只是猜测。但是，这里有一个猜测：

您在这里遵循错误的模式。由于您的类维护实现 IDisposable 的对象，因此您的类应该实现 IDisposable 本身。然后，您的调用者应该在完成后更改为调用您的类的 Dispose 方法：

```
using System;
using System.Data.SqlClient;

public static class ConnectionManager
{
    private static readonly SqlConnection _connection =
        new SqlConnection("connectionString");
    public static SqlConnection Connection { get { return _connection; } }
}

public class HoldsCommands : IDisposable
{
    private readonly SqlCommand _commandOne = new SqlCommand("Command1");
    private readonly SqlCommand _commandTwo = new SqlCommand("Command2");

    public void DoSomethingWithAConnection()
    {
    }

    public void Dispose()
    {
        if (_commandOne != null)
        {
            try
            {
                _commandOne.Dispose();
            }
            catch (Exception)
            {
            }
        }

        if (_commandTwo != null)
        {
            try
            {
                _commandTwo.Dispose();
            }
            catch (Exception)
            {
            }
        }
    }
} 
```

然后，您的来电者会这样称呼您：

```
using (var commands = new HoldsCommands()) {
    commands.DoSomethingWithAConnection();
} 
```

正如 Luke Girvin 所说，如果您只是想节省数据库连接，您可能不需要静态 ConnectionManager 类。.NET 为您处理这个问题。

# mysql - MySQL（InnoDB）最好的 Linux 文件系统是什么？

> ID：1021854
> 
> 赞同：9
> 
> 时间：2009-06-20T15:31:44.320
> 
> 标签：mysql, database, linux, filesystems, benchmarking

我试图用 MySQL InnoDB 寻找各种文件系统性能的基准，但找不到。

我的数据库工作负载是典型的基于 Web 的 OLTP，大约 90% 读取，10% 写入。随机 IO。

在 ext3、ext4、xfs、jfs、Reiserfs、Reiser4 等流行的文件系统中，您认为哪一个最适合 MySQL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-20T16:05:45.460

你应该看看[在构建高度可扩展的 MySQL 数据库中学到的教训](http://www.mysqlconf.com/mysql2008/public/schedule/detail/625)。他们用其中一些文件系统对 mysql 进行了基准测试，而 jfs 看起来显然是赢家。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-20T17:24:26.473

如果您正在使用[InnoDB](http://www.innodb.com/products/innodb/info/) [，请在 mysqlperformanceblog](http://www.mysqlperformanceblog.com/2007/10/26/heikki-tuuri-innodb-answers-part-i/)上与创建它的[Heikki Tuuri](http://www.mysqlconf.com/mysql2008/public/schedule/speaker/1311)进行这两个部分的交互，应该好好阅读。

# entity-framework - 有没有办法使用实体框架从表中一般返回所有记录

> ID：1021864
> 
> 赞同：1
> 
> 时间：2009-06-20T15:38:10.670
> 
> 标签：entity-framework, generics, subsonic3

基本上我希望实现这样的方法。

`IQueryAble GetQuery<T>(Entities db)` 或扩展方法`Entities.GetQuery<T>()`

这样你就可以做这样的事情

```
public IQueryable<T> GetAll()
{
return yourEntityClasses.GetQuery<T>();
} 
```

这将返回一个 SELECT * FROM 查询表达式，显然您可以从那里创建用于排序、分页、where 表达式等的附加通用方法，除此之外，您不必为每个表重复这些方法的代码。我知道 SubSonic3 在这方面做得很好，但试图在我正在处理的 EntityFramework 项目中复制一些功能。我在 EF 中看到的唯一内容是 CreateQuery 和 ObjectQuery，但这两者都需要您传递一个查询字符串，其中需要您知道表名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T16:09:30.220

好吧，可以自动获取您需要放入 CreateQuery 方法的字符串。

基本上它只是`string.Format("[{0}]",entitySetName)`;

你如何获得实体集名称，假设你没有使用称为 MEST 的东西，大多数人不使用，你可以使用我在[这个提示](http://blogs.msdn.com/alexj/archive/2009/04/15/tip-13-how-to-attach-an-entity-the-easy-way.aspx)中编写的一些函数来获取 T 的 EntitySet 并从中获取名称。

一旦你这样做了，编写扩展方法对你来说应该很简单

IE

```
public static IQueryable<T> GetAll<T>(this ObjectContext context)
{
    var wkspace = context.MetadataWorkspace;
    EntitySet set = wkspace
       .GetEntitySets(wkspace.GetCSpaceEntityType<T>())
       .Single(); 
    return context.CreateQuery<T>(string.Format("[{0}]",set.Name);
} 
```

有关使用的其他功能，请参阅上面的提示。

希望这可以帮助

亚历克斯

# c# - 高效插入和搜索字符串

> ID：1021873
> 
> 赞同：3
> 
> 时间：2009-06-20T15:41:47.403
> 
> 标签：c#, search

在一个应用程序中，我将有大约 3000 到 30000 个字符串。创建后（从无序的文件中读取）不会经常添加很多字符串（但有时会有！）。字符串的删除也不会经常发生。将字符串与存储的字符串进行比较会经常发生。

我最好使用哪种结构，哈希表、树（Red-Black、Splay、....）或仅在有序列表上（可能是 StringArray？）？

（补充说明：一个好的 C# 实现的链接也将不胜感激）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-20T15:45:30.953

听起来您只需要一个哈希表。因此[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)，这似乎是理想的选择。（您似乎不需要密钥，但`Dictionary<T>`如果您这样做，那将是正确的选择，当然。）

以下是对 a`HashSet<T>`大小的不同操作的时间复杂度的总结`n`。它们部分基于该类型使用数组作为支持数据结构的事实。

*   **插入：**通常`O(1)`，但`O(n)`如果需要调整数组大小，则可能。
*   **删除：** `O(1)`
*   **存在（包含）：（** `O(1)`给定理想的哈希表桶）

如果其中有任何错误，请有人纠正我。根据我对实现/哈希表的了解，它们只是我最好的猜测。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T15:44:40.953

[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)非常适合快速插入和搜索速度。添加、删除和包含是 O(1)。

Edit-Add 假定数组不需要调整大小。如果是诺多林所说的情况，那就是 O(n)。

我在最近的 VB 6（我没有编写）到 .NET 3.5 升级项目中使用了 HashSet，在该项目中我正在迭代一个包含子项的集合，并且每个子项都可以出现在多个父项中。该应用程序处理了我想发送到 API 的项目列表，每次调用都会收取大量费用。

我基本上使用 HashSet 来跟踪我已经发送的项目，以防止我们产生不必要的费用。由于该过程被多次调用（它基本上是一个包含多个命令的批处理作业），我在调用之间序列化了 HashSet。这工作得很好——我需要尽可能多地重用现有代码，因为这已经过彻底的测试。HashSet 确实执行得非常快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T19:10:53.100

如果您正在寻找实时性能或最佳内存效率，我建议您使用基数树或显式后缀或前缀树。否则我可能会使用哈希。

树的优点是对最坏情况的查找、插入和删除时间有固定的界限（基于您正在查找的模式的长度）。基于哈希的解决方案的优点是更容易编码（您可以在 C# 中直接使用这些），初始构建成本更低，并且如果配置正确，则具有相似的平均情况性能。但是，它们确实倾向于使用更多内存并且具有不确定的时间查找、插入（并且取决于实现可能会删除）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T17:45:13.157

`HashSet<T>`如果您的比较只是“此字符串是否存在于集合中”，则建议的答案是正确的。您甚至可以使用不同`IEqualityComparer<string>`的实现（可能从 中的实现中选择`StringComparer`）来区分大小写等。

这是您需要的唯一比较类型，还是需要诸如“如果该字符串实际上是有序列表，该字符串将出现在集合中的什么位置？”之类的内容？如果您需要这种检查，那么您可能需要进行二进制搜索。(`List<T>`提供了 BinarySearch 方法；我不知道为什么也不知道`SortedList`，`SortedDictionary`因为两者都可以很容易地搜索。诚然，`SortedDictionary`搜索与普通的二分搜索*不太*一样，但它通常仍然有相似的我相信的特征。）

正如我所说，如果您*只想*“在集合中与否”检查，那`HashSet<T>`是您的朋友。我只是想我会提出其余的以防万一:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T18:38:54.943

如果您需要知道“如果该字符串实际上是有序列表，它将出现在集合中的什么位置”（如 Jon Skeet 的回答），您可以考虑使用[trie](http://en.wikipedia.org/wiki/Trie)。此解决方案只能用于某些类型的“类似字符串”的数据，如果“字母”与字符串的数量相比很大，它会很快失去其优势。缓存位置也可能是一个问题。

然而，对于一组只有 N = 30,000 个大部分是预先计算的事物，这可能会被过度设计。您甚至可能会做得更好，只需分配一个 k * N Optional 数组并通过在每个实际事物之间跳过 k 个空格来填充它（从而减少您的罕见插入需要重新分配的可能性，仍然给您留下二进制搜索的变体，并保持您的项目按排序顺序。但是，如果您需要*精确*的“该字符串将出现在集合中的哪个位置”，那么这将不起作用，因为您需要 O(n) 时间来检查每个空格，然后再检查项目是否为空白或O(n) 插入时间来更新每个插槽中的“我面前有多少项目”计数器。它可以为您提供非常快速的*不精确*但是，索引，并且这些索引在插入/删除之间是稳定的。

# c++ - 如何生成 C++ 动态对象名称？

> ID：1021875
> 
> 赞同：7
> 
> 时间：2009-06-20T15:44:23.483
> 
> 标签：c++, arrays, dynamic, pointers, object

我想根据用户输入的数量/数量生成一些对象（在 C++ 中）。

现在我听说它必须使用指针技巧来完成，创建一个指向所需对象类型数组的指针，然后动态增加数组的大小（在运行时）。

没有直接使用像 Object1, Object2 ..... ObjectX 这样的名称而不是 Classname *Object[] 然后使用数组索引来获取对象的解决方法吗？

无论哪种情况，如果有人能澄清这个问题，那就太好了。

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T15:51:58.077

如果您想要动态大小的数组，请使用 std::vector。您将无法调整内置数组的大小。如果您希望能够通过字符串名称获取对象，那么您应该使用 std::map，它有一个索引器：

```
std::map<string, Classname> myMap;
myMap["Object1"] = Classname();
Classname newClassname = myMap["Object1"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-20T16:15:57.943

到目前为止，没有人解释为什么你的想法是有缺陷的。C++ 是一种编译语言，它竭尽全力将源程序转换为高效的机器代码。出于这个原因，你给变量的名字只有在编译时才对程序可用，当你把它从源代码转换成可执行文件时。之后，当您想要动态创建对象时，这些信息不再可用。程序只知道机器指令的操作数所在的机器地址。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T15:52:44.957

不，没有。此外，您不需要；使用`std::vector`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-20T16:07:59.410

当我 9 年前开始编程时，我问过自己同样的问题。答案是：你不能。

您确实可以使用数组并动态调整其大小，但是使用 stl 向量要容易得多（一旦您学会了如何使用它）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-20T16:14:57.367

您不能这样做，因为 C++ 没有变量（和元数据）可以驻留的“环境”（[反射）。](http://en.wikipedia.org/wiki/Reflection_(computer_science))此外，在 C++ 中，所有变量名在代码编译时都会*消失。*

实现所需效果的一种方法是使用键为字符串的[Map 。](http://en.wikipedia.org/wiki/Associative_array)

# iphone - iPhone 操作系统 3.0 + OpenGL ES 2.0。有没有人看到更好的抗锯齿？

> ID：1021878
> 
> 赞同：0
> 
> 时间：2009-06-20T15:45:27.257
> 
> 标签：iphone, opengl-es, 3d, antialiasing

我一直无法找到一种方法来消除我在 iPhone OS 3.0 + OpenGL ES 2.0 上的渲染的锯齿。我曾假设会有多重采样，但似乎并非如此。有人告诉我，片段着色器可以通过偏导数扩展来了解投影像素，但我不知道该功能在哪里，也不知道苹果是否真的支持它。

我的背景是 RenderMan，在那里我可以显着控制如何衰减高频伪影。没有适当的抗锯齿 - 在着色器级别和光栅化级别。顶点和片段着色器将遭受明显的锯齿和各种视觉 schmutz 的影响。

有人可以澄清抗锯齿的状态。谢谢。

-道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-21T15:49:06.127

我在 Apple 开发论坛上得到了我担心的答案： [https ://devforums.apple.com/message/85973#85973](https://devforums.apple.com/message/85973#85973)

没有屏幕空间抗锯齿。是的着色器抗锯齿（虽然我还没有确认着色器抗锯齿）。

至少可以说有点令人失望。叹。

-道格@dugla

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T15:52:15.800

我猜它只是硬件不支持。我最近试图在我的 MacBook（参见[`glEnable(GL_POLYGON_SMOOTH)`](http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/gl/enable.html)）上使用抗锯齿功能，在尝试了我能想到的一切之后，我最终发现它根本不受我的硬件支持，根据[这个线程](http://lists.apple.com/archives/Mac-opengl/2007/Aug/msg00003.html)。我不知道您是否可以使用顶点或片段着色器实现抗锯齿，因为我不熟悉它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-05T15:21:23.927

它现在有了伴侣。iOS4 我认为是 4x 多重采样或其他。希望很多人使用它...杀死那些像素锯齿线

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-31T12:15:40.427

iphone 3gs 没有任何屏幕空间 aa 真的很奇怪。根据图形处理器供应商的规范。1.1.6。改进的抗锯齿" POWERVR SGX 通过提供 4 样本稀疏网格多重采样抗锯齿 (MSAA) 进一步提高了上一代 MBX 系列的抗锯齿性能和质量，其质量通常接近 16 样本有序网格抗锯齿-aliasing。” 硬件应该支持更好的抗锯齿。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-23T15:34:06.213

MBX 和 SGX 芯片上都有硬件支持的多采样抗锯齿 - 查看[Imagination 网站](http://www.imgtec.com)上提供的文档，其他 SGX/MBX 设备上也有。但是，Apple 目前尚未在 iPhone 上公开此功能，因此遗憾的是，您目前无法使用它。

# grammar - 如何构建生成这种语言的语法？

> ID：1021882
> 
> 赞同：5
> 
> 时间：2009-06-20T15:48:49.403
> 
> 标签：grammar, context-free-grammar, automata

我正在学习有限自动机和语法测试，但我遇到了这个问题：

```
Construct a grammar that generates L:
L = {a^n b^m c^m+n|n>=0, m>=0} 
```

我相信我的作品应该遵循以下原则：

```
 S->aA | aB
    B->bB | bC
    C->cC | c Here's where I have doubts 
```

我的 C 产品如何记住 m 和 n 的数字？我猜这一定是一个上下文无关的语法，如果是这样，它应该是怎样的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T16:02:18.237

似乎应该是这样的：

```
A->aAc | aBc | ac | epsilon
B->bBc | bc | epsilon 
```

您需要在构建过程中强制计算 C'c。为了显示它是无上下文的，我会考虑使用[Pump Lemma](http://en.wikipedia.org/wiki/Pumping_lemma_for_context-free_languages)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-12-04T08:00:33.740

```
S -> X
X -> aXc | Y
Y -> bYc | e 
```

哪里`e == epsilon`和`X`是不必要的，但为了清楚起见添加

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T15:58:05.880

是的，这听起来确实像家庭作业，但有一个提示：

每次匹配“a”时，都必须匹配“c”。与匹配“b”相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T04:15:18.227

S->aSc|A A->bAc|λ

这意味着当你得到 a 时，至少你有 1 c，或者如果你得到 a 和 b，你必须有 2 c。我希望它有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T14:58:21.867

好吧，伙计们，我将这样做：

```
P={S::=X|epsilon,
   X::=aXc|M|epsilon,
   M::=bMc|epsilon} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-07T15:52:45.853

我的答案：

S -> aAc | aSc

A -> 公元前 | bAc

其中 S 是起始符号。

# python - 我可以使用 pywikipedia 来获取页面的文本吗？

> ID：1021884
> 
> 赞同：1
> 
> 时间：2009-06-20T15:49:27.750
> 
> 标签：python, wiki, mediawiki, pywikibot

是否有可能，使用 pywikipedia，只获取页面的文本，没有任何内部链接或模板，也没有图片等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-21T06:00:55.330

如果您的意思是“我只想获取 wikitext”，请查看`wikipedia.Page`类和`get`方法。

```
import wikipedia

site = wikipedia.getSite('en', 'wikipedia')
page = wikipedia.Page(site, 'Test')

print page.get() # '''Test''', '''TEST''' or '''Tester''' may refer to:
#==Science and technology==
#* [[Concept inventory]] - an assessment to reveal student thinking on a topic.
# ... 
```

这样您就可以从文章中获得完整的原始 wikitext。

如果你想去掉 wiki 语法，就像转换`[[Concept inventory]]`成概念清单等等，那会有点痛苦。

这个麻烦的主要原因是MediaWiki wiki 语法没有定义语法。这使得解析和剥离变得非常困难。我目前知道没有软件可以让你准确地做到这一点。当然还有 MediaWiki Parser 类，但它是 PHP，有点难以掌握，而且它的用途非常不同。

但是，如果您只想删除链接，或者非常简单的 wiki 构造使用正则表达式：

```
text = re.sub('\[\[([^\]\|]*)\]\]', '\\1', 'Lorem ipsum [[dolor]] sit amet, consectetur adipiscing elit.')
print text #Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
```

然后对于管道链接：

```
text = re.sub('\[\[(?:[^\]\|]*)\|([^\]\|]*)\]\]', '\\1', 'Lorem ipsum [[dolor|DOLOR]] sit amet, consectetur adipiscing elit.')
print text #Lorem ipsum DOLOR sit amet, consectetur adipiscing elit. 
```

等等。

但是，例如，没有可靠的简单方法从页面中去除嵌套模板。评论中包含链接的图片也是如此。这非常困难，并且涉及递归地删除最内部的链接并用标记替换它并重新开始。`templateWithParams`如果需要，可以查看 wikipedia.py 中的函数，但它并不漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T01:35:27.357

Github 上有一个名为[mwparserfromhell](https://github.com/earwig/mwparserfromhell)的模块，它可以根据您的需要让您非常接近您想要的。它有一个名为 strip_code() 的方法，可以去除很多标记。

```
import pywikibot
import mwparserfromhell

test_wikipedia = pywikibot.Site('en', 'test')
text = pywikibot.Page(test_wikipedia, 'Lestat_de_Lioncourt').get()

full = mwparserfromhell.parse(text)
stripped = full.strip_code()

print full
print '*******************'
print stripped 
```

比较片段：

```
{{db-foreign}}
<!--  Commented out because image was deleted: [[Image:lestat_tom_cruise.jpg|thumb|right|[[Tom Cruise]] as Lestat in the film ''[[Interview With The Vampire: The Vampire Chronicles]]''|{{deletable image-caption|1=Friday, 11 April 2008}}]] -->

[[Image:lestat.jpg|thumb|right|[[Stuart Townsend]] as Lestat in the film ''[[Queen of the Damned (film)|Queen of the Damned]]'']]

[[Image:Lestat IWTV.jpg|thumb|right|[[Tom Cruise]] as Lestat in the 1994 film ''[[Interview with the Vampire (film)|Interview with the Vampire]]'']]

'''Lestat de Lioncourt''' is a [[fictional character]] appearing in several [[novel]]s by [[Anne Rice]], including ''[[The Vampire Lestat]]''. He is a [[vampire]] and the main character in the majority of ''[[The Vampire Chronicles]]'', narrated in first person.   

==Publication history==
Lestat de Lioncourt is the narrator and main character of the majority of the novels in Anne Rice's ''The Vampire Chronicles'' series. ''[[The Vampire Lestat]]'', the second book in the series, is presented as Lestat's autobiography, and follows his exploits from his youth in France to his early years as a vampire. Many of the other books in the series are also credited as being written by Lestat. 

*******************

thumb|right|Stuart Townsend as Lestat in the film ''Queen of the Damned''

'''Lestat de Lioncourt''' is a fictional character appearing in several novels by Anne Rice, including ''The Vampire Lestat''. He is a vampire and the main character in the majority of ''The Vampire Chronicles'', narrated in first person.   

Publication history
Lestat de Lioncourt is the narrator and main character of the majority of the novels in Anne Rice's ''The Vampire Chronicles'' series. ''The Vampire Lestat'', the second book in the series, is presented as Lestat's autobiography, and follows his exploits from his youth in France to his early years as a vampire. Many of the other books in the series are also credited as being written by Lestat. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T17:56:29.820

Pywikibot 能够删除任何 wikitext 或 html 标签。textlib 里面有两个函数：

1.  **移除 HTMLParts**`(text: str, keeptags=['tt', 'nowiki', 'small', 'sup']) -> str:`

    返回没有 HTML 标记被禁用的部分的文本，但在 html 标记之间*保留*文本。例如：

    ```
     from pywikibot Import textlib
     text = 'This is <small>small</small> text'
     print(removeHTMLParts(text, keeptags=[])) 
    ```

    这将打印：

    ```
     This is small text 
    ```

2.  **removeDisabledParts**`(text: str, tags=None, include=[], site=None) -> str:` 返回没有禁用 wiki 标记部分的文本。这*将删除*wikitext 文本中的文本。例如：

    ```
     from pywikibot Import textlib
     text = 'This is <small>small</small> text'
     print(removeDisabledPartsParts(text, tags=['small'])) 
    ```

    这将打印：

    ```
     This is  text 
    ```

    有很多预定义的标签要删除或保留，例如 `'comment', 'header', 'link', 'template'`；

    标签参数的默认值为`['comment', 'includeonly', 'nowiki', 'pre', 'syntaxhighlight']`

    其他一些例子：

    `removeDisabledPartsParts('See [[this link]]', tags=['link'])`给`'See '` `removeDisabledPartsParts('<!-- no comments -->', tags=['comment'])`给给`''` `removeDisabledPartsParts('{{Infobox}}', tags=['template'])`了`''`，但仅适用于 Pywikibot 6.0.0 或更高版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-04T05:25:05.730

您可以使用[wikitextparser](https://pypi.org/project/wikitextparser/)。例如：

```
import pywikibot
import wikitextparser
en_wikipedia = pywikibot.Site('en', 'wikipedia')
text = pywikibot.Page(en_wikipedia,'Bla Bla Bla').get()
print(wikitextparser.parse(text).sections[0].plain_text()) 
```

会给你：

```
"Bla Bla Bla" is a song written and recorded by Italian DJ Gigi D'Agostino. It heavily samples the vocals of "Why did you do it?" by British band Stretch. It was released in May 1999 as the third single from the album, L'Amour Toujours. It reached number 3 in Austria and number 15 in France. It was sampled in the song "Jump" from Lupe Fiasco's 2017 album Drogas Light. 
```

# google-app-engine - Google App Engine 和 Amazon Cloud，哪个更好？

> ID：1021885
> 
> 赞同：-2
> 
> 时间：2009-06-20T15:49:42.727
> 
> 标签：google-app-engine, amazon-ec2, platform

我将在其中一个上部署我的应用程序，但不知道哪个更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-20T15:59:56.567

目前，亚马逊的云服务更加通用和灵活，而 Google App Engine 基本上适合某些特定类别的应用程序，这些应用程序可以在其特定限制内运行（这些限制正在逐渐放宽，因为 GAE 添加了功能并允许您付费超过某些配额，但这并不意味着 GAE 将成为一个完全通用的平台，就像亚马逊的服务一样）。

如果您的应用程序可以在 GAE 的限制范围内运行，那么 GAE 就具有优势：释放到一定的配额，几乎没有系统配置/管理开销等。但是如果您需要完全的灵活性 - 例如，如果您想编写您的部分代码使用 C 或 C++ 编写的应用程序，这只是众多示例之一 - 然后 GAE 不适合，而亚马逊（以金钱和 sysadm 开销为代价）可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:28:00.087

No one is king in this field because both amazon and google have their own pros and cons. for the finally decision you have to study deep about both or you have to analyze what you required for you apps. no doubt aws is old in this field and they have lot of good quality stuff but remember google is fast growing in cloud computing.

personally aws is easy to use and training and support is easily available on the other side google is his early stage and bit complex interface for newbie

so you can learn from you requirement

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T19:08:20.313

如果您已经编写了应用程序，并且只想部署它，我不得不说 AWS 是您最好的选择。AWS 是一个平台（或者更确切地说，EC2 是一个平台），部署现有应用程序很容易。另一方面，App Engine 提供了一个完整的开发环境，具有更高的抽象级别，在扩展方面具有显着优势，但需要您编写应用程序才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-05T14:59:51.413

现在如何免费使用 Amazon EC2 一年来做一个更好的比较。看一下这个。

[http://www.buzzingup.com/2010/10/amazon-announces-free-cloud-services-for-new-developers/](http://www.buzzingup.com/2010/10/amazon-announces-free-cloud-services-for-new-developers/)

# text - 2D 文本如何反映到 3D 网格表面上？

> ID：1021888
> 
> 赞同：0
> 
> 时间：2009-06-20T15:51:52.743
> 
> 标签：text, 3d, 2d, mesh, geometry-surface

如何在 C# 中将 2D 文本反映到 3D 网格表面上？

提前致谢。

切莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T15:59:06.363

将文本渲染为纹理并在网格上使用纹理。

# linux - 从 linux 脚本显示对话框

> ID：1021893
> 
> 赞同：4
> 
> 时间：2009-06-20T15:55:14.193
> 
> 标签：linux, scripting

我有一个每天在特定时间运行脚本的 cron 条目。该脚本设置`DISPLAY`并`:0`启动一个程序供用户运行（这是一个单用户桌面）。我想更改它，以便用户首先看到一个对话框，以便他可以指示他是否要运行该程序。

我正在使用带有 Gnome 的 Ubuntu。是否有某种对话框命令可以返回是否单击了确定或取消？还是有其他方法可以达到这种效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T15:56:16.393

你可以使用[Zenity](http://freshmeat.net/projects/zenity)。它允许您使用 GTK 对话框，我认为是/否对话框只是将它们的值存储在 $? 中。您可以使用：

```
if zenity --question --text="Are you sure?"; then
    sudo rm -rf / # kidding!
fi 
```

和往常一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-20T15:56:47.393

`zenity --question`

# java - 我可以将额外的 Spring 配置文件动态加载到现有的 WebApplicationContext 中吗？

> ID：1021899
> 
> 赞同：8
> 
> 时间：2009-06-20T15:59:30.530
> 
> 标签：java, spring, tomcat, migration, servletconfig

在 Tomcat 6.0.18 中启动我的 web 应用程序后，我只使用*初始化*系统所需的东西来引导 Spring——即，目前是数据库迁移。在迁移成功完成之前，我不希望系统的任何部分加载。这可以防止其他 bean 在操作甚至实例化之前必须等待迁移完成。

我有一个配置了 dbMigrationDAO 的 startup-appcontext.xml，一个是[ThreadPoolExecutor](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的 startupManager ，最后是一个 FullSystemLauch bean。我通过 setter 注入将配置位置列表传递给 FullSystemLaunch bean。FullSystemLaunch bean 实现[ServletContextAware](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/ServletContextAware.html)，获取对当前[WebApplicationContext](http://static.springframework.org/spring/docs/2.5.6/api/org/springframework/web/context/WebApplicationContext.html)的引用，因此我可以拥有一个[ConfigurableListableBeanFactory](http://static.springframework.org/spring/docs/2.5.6/api/org/springframework/beans/factory/config/ConfigurableListableBeanFactory.html)。不幸的是，这个 bean 工厂 isConfigurationFrozen() 返回 true，所以调用 beanFactory.setConfigLocations(configLocations) 没有任何效果。

我可以做到这一点，还是 Spring 阻止我这样做是因为它有点不寻常？如果理解的话似乎是合理的，但也有点危险。是的，我愿意删除当前的上下文 b/c 一旦初始化完成，就不需要当前加载的单例。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-23T06:59:26.483

我的意见是允许 Spring 在它认为合适的情况下初始化你的 bean - 按照它们声明的依赖关系的顺序。

如果您需要数据库迁移，有几种模式可以让它们首先运行：

*   如果您使用的是 Hibernate/JPA，请让您的 sessionFactory/persistenceManager*依赖于*迁移 bean；
*   如果您使用的是普通 JDBC，请创建一个包装器 DataSource 并在其*init 方法*中调用迁移（[代码示例](https://stackoverflow.com/questions/959547/short-way-of-making-many-beans-depend-on-one-bean/980913#980913)）

优点很明显：简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-21T15:22:41.203

您可以将现有上下文用作其他上下文的父上下文，尽管我怀疑您是否可以替换现有的 WebApplicationContext。

如果您使用 EAR - WAR 打包，您可以通过从 EAR 加载应用程序上下文然后在 WAR 中添加一个来获得这种开箱即用的（有点）。

不确定这是否适用于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T10:19:31.203

[延迟初始化](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#beans-factory-lazy-init)可以替代您想要实现的目标吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-23T06:40:05.957

可能[的 XmlBeanDefinitionReader](http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/beans/factory/xml/XmlBeanDefinitionReader.html)可以帮助你吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-19T10:27:53.123

您可以将 WebApplicatonContext 升级到 ConfigurableWebApplicationContext 然后使用 setConfigurations 方法。

不要忘记刷新；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-19T10:42:17.743

有相同的任务，我创建了两个上下文：`startUpContext.xml`和`applicationContext.xml`. 里面有`startUpContext.xml`一个 bean，它触发加载`appliationContext.xml`. （应用程序上下文位置被配置`startUpContext.xml`为触发器的属性）。最后触发器**替换**当前上下文的位置并刷新它：

```
applicationContext.setConfigLocations(locations);
applicationContext.refresh(); 
```

（startUpContext.xml 使用标准的 spring 上下文加载器侦听器加载）

# ocr - OCR 方格纸

> ID：1021900
> 
> 赞同：1
> 
> 时间：2009-06-20T15:59:53.743
> 
> 标签：ocr

我想将扫描的方格纸笔记本（带手写）的 pdf 格式转换为文本文件。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T18:52:38.490

有可以转换类型的 OCR 库（OCRopus、tesseract 等）

还有基于 Java 的手写库。我不确定 OCRopus 是否具有这种能力，我正在研究的一个用于进行手写识别的库是：

[在线视频](http://developers.sun.com/learning/javaoneonline/j1sessn.jsp?sessn=TS-3690&yr=2006&track=coolstuff)

[Java 神经网络](http://www.jeffheaton.com/ai/)

可以想象，您可以获取 pdf，如果需要（根据软件）将其转换为 tiff，它会给您一些东西..

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T16:03:38.050

查看 OCR 库，例如[OCRopus](http://code.google.com/p/ocropus/)。我认为它不需要 PDF，因此您可能必须先将其转换为 TIFF 或 JPEG。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T16:20:07.010

如果它是作为 PDF 文件的笔记本，您可以将其通过电子邮件发送到 gmail 帐户，然后 gmail 允许您在浏览器中以 HTML 文件的形式“查看”PDF。页面仍然是图像。

如果您想从中提取文本，OCR 可能会起作用，但也可能无法从中提取文本。

# java - 将 Statement.RETURN_GENERATED_KEYS 与 MS-Access JDBC-ODBC 一起使用会引发异常

> ID：1021904
> 
> 赞同：1
> 
> 时间：2009-06-20T16:02:55.273
> 
> 标签：java, ms-access, jdbc, odbc

```
import java.sql.* ;
import java.util.* ;
import java.io.* ;

class DataBaseFactory{
    public static Connection getConnection() {
        // ...
    }
}

class Demo{
    public static void main(String []args) throws SQLException {
        Connection con = DataBaseFactory.getConnection() ;

        // This is throwing exception
        // PreparedStatement ps = con.prepareStatement("insert into user values(?,?)", Statement.RETURN_GENERATED_KEYS) ;

        // But this is working fine
        PreparedStatement ps = con.prepareStatement("insert into user values(?,?)") ;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T16:49:01.400

我的猜测是您使用的数据库驱动程序不支持 RETURN_GENERATED_KEYS。您要连接的数据库是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T10:53:29.317

JDBC-ODBC 桥已过时，已从 Java 8 中删除。幸运的是，我们可以使用免费的开源[UCanAccess](http://ucanaccess.sourceforge.net/site.html) JDBC 驱动程序从 Java 处理 Access 数据库，并且 UCanAccess 支持`RETURN_GENERATED_KEYS`. 有关详细信息，请参阅

[在没有 ODBC 的情况下从 Java 操作 Access 数据库](https://stackoverflow.com/q/21955256/2144390)

# security - 如何在 http url 中安全地传递凭据？

> ID：1021909
> 
> 赞同：0
> 
> 时间：2009-06-20T16:04:37.300
> 
> 标签：security

我在 .Net 中有一个面向公众的网页，我想在其中放置锚标记，以访问由我的分布式系统中的 Java 服务器生成的网页。例如，Bob 从 WWW 登录并转到主页。我想在主页中有一个指向[http://javaserver/form.jsp?username:Bob的链接。](http://javaserver/form.jsp?username:Bob)但如果内部网络上有人在窥探，那将是不安全的。他们可以输入那个 url 并通过重放攻击充当 Bob。对用户名进行编码也容易受到重放攻击。有任何想法吗？谢谢！

**https** ://javaserver/form.jsp?username:Bob 仍然通过输入该 url 让我面临重放攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T16:11:20.377

*   `https`在公共和私人服务器上使用
*   发送用户 id 并添加一个长且随机的令牌，用于验证用户（如有必要，将委托给原始服务器）。
*   如果可以，请使用 POST 请求

应使用加密安全的随机数生成器创建随机令牌。它也应该在一定时间后更改/失效。如果您要将验证委托给公共服务器，您还需要以安全的方式对委托（本地）服务器进行身份验证。为了防止暴力攻击，阻止重复的无效尝试。

有很多陷阱，所以要小心自己实施任何类型的安全机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T16:08:06.833

在您的身份验证中使用 cookie 和 SSL。如果你还没有，我会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T16:08:31.217

嗯-只是大声思考-如果不是https，则可以窥探。您可以使用时间戳加密用户名，以便窗口简短。不是一个很好的答案，但由于 http 不安全....

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-06-20T16:07:29.143

我认为最好的解决方案是使用 https。这样，您发送给 Bob 的任何内容都不会被窥探。

# class - 我如何使用课程？

> ID：1021911
> 
> 赞同：3
> 
> 时间：2009-06-20T16:07:21.780
> 
> 标签：class

我对编程很陌生，有一件事让我感到困惑。什么是类，我该如何使用？我明白了一点，但我似乎无法找到完整的答案。

顺便说一句，如果这是特定于语言的，那么我正在用 PHP 编程。

编辑：还有一点我忘了说。具体来说，我的意思是问如何在类中使用定义函数。我已经看到了在类中定义函数的 PHP 代码示例，但我真的不明白为什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-06-20T16:19:14.637

尽可能简洁：一个类描述了可以对自身执行操作的数据集合。

例如，您可能有一个表示图像的类。此类的对象将包含描述图像所需的所有数据，然后还将包含旋转、调整大小、裁剪等方法。它还具有可用于询问对象自身属性的方法，像 getColorPalette 或 getWidth。这与能够直接访问原始（非对象）数据集合中的调色板或宽度相反 - 通过让数据访问通过类方法，对象可以强制执行保持一致性的约束（例如，您不应该能够更改宽度变量而不实际将图像数据更改为该宽度）。

这就是面向对象编程与过程编程的不同之处。在过程式编程中，你有数据，你有函数。函数作用于数据，但没有数据的“所有权”，数据与使用数据的函数之间也没有基本联系。

在面向对象的编程中，您拥有的对象是数据与动作的结合。每种类型的数据都有一组定义好的可以对自己执行的操作，以及一组定义好的属性，它允许函数和其他对象以定义的、尊重约束的方式读取和写入。

关键是将程序的各个部分相互分离。使用 Image 类，您可以确保操作图像数据的所有代码都在 Image 类的方法中。您可以确定没有其他代码会以意想不到的方式处理图像的内部结构。另一方面，图像类之外的代码可以知道有一种已定义的方式来处理图像（调整大小、裁剪、旋转方法等），而不必担心图像数据是如何存储的，或者图像是如何存储的功能得以实现。

编辑：有时难以掌握的另一件事是术语“类”和“对象”之间的关系。“类”是对如何创建特定类型的“对象”的描述。Image 类将描述存储图像数据所需的变量，并为所有 Image 方法提供实现代码。Image 对象，称为图像类的“实例”，是该描述的一种特殊用途，用于存储一些实际数据。例如，如果您有五个要表示的图像，那么您将有五个不同的图像“对象”，它们都是相同的图像“类”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T16:19:20.207

类是面向对象编程 (OOP) 范式中使用的术语。它们为您的代码提供抽象、模块化等等。OOP 不是特定于语言的，支持它的其他语言示例是 C++ 和 Java。

我建议 youtube 了解基础知识。例如[这个视频](http://www.youtube.com/watch?v=wpGJz4o2abs&feature=PlayList&p=B4BB4D8A4D229D1C&playnext=1&playnext_from=PL&index=4)和其他相关讲座。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-20T16:20:47.993

由于您使用的是 PHP，我将在我的代码示例中使用它，但大多数情况下都应该适用。OOP 将一切都视为一个对象，它是方法（函数）和变量的集合。在大多数语言中，对象在代码中表示为类。采取以下代码：

```
class person
{
   $gender = null;
   $weight = null;
   $height = null;
   $age = null;
   $firstName = null;
   $lastName = null;
   function __CONSTRUCT($firstName, $lastName)
   {
      //__CONSTRUCT is a special method that is called when the class is initialized
      $this->firstName = $firstName;
      $this->lastName = $lastName;
   }
} 
```

这是一个有效的（如果不是完美的）类，当您使用此代码时，您首先必须初始化该类的一个实例，这就像在变量中复制它一样：

```
$steve = new person('Steve', 'Jobs'); 
```

然后，当您想更改某些属性时（在技术上不是正确的词，因为 PHP 中没有属性，但在这种情况下请耐心等待我的意思是变量）。我们可以像这样访问它们：

```
$steve->age = 54; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-20T16:26:51.987

注意：这假设你对编程有点熟悉，我猜你是。

一个类就像一个蓝图。假设您正在制作一个包含房屋的游戏。你会有一个“House”课程。这门课描述了房子，并说明了它可以做什么以及可以对它做什么。您可以拥有属性，例如高度、宽度、房间数量、所在城市等。您还可以拥有“方法”（类内函数的花哨名称）。例如，您可以有一个“Clean()”方法，它会告诉屋内的所有人清洁它。

现在假设有人在玩您的游戏并单击“新建房屋”按钮。然后，您将从该类创建一个新对象。在 PHP 中，您将编写“ `$house = new House;`”，现在 $house 具有类的所有属性和方法。

您可以根据需要建造任意数量的房屋，并且它们都将具有相同的属性，然后您可以对其进行更改。例如，如果住在一个房子里的人决定再增加一个房间，你可以写“ `$house->numberOfRooms++;`”。如果一所房子的默认房间数是 4，那么这所房子将有 5 个房间，而其他所有房间将有 4 个。如您所见，属性在一个*实例*与另一个实例之间是独立的。

这是基础；还有很多关于类的东西，比如继承、访问修饰符等。

现在，您可能会问自己为什么这很有用。好吧，面向对象编程（OOP）的重点是将程序中的所有事物都视为独立的对象，并尝试将它们设计为无论上下文如何都可以使用它们。例如，您的房子可能是一个独立变量，可能位于一系列房屋中。如果你有一个带有“residence”属性的“Person”类，那么你的房子可能就是那个属性。

这是类和对象背后的理论。我建议您四处寻找代码示例。如果你愿意，你可以看看我为我编写的乒乓球游戏制作的课程。它是用 Python 编写的，可能会用到一些你不理解的东西，但你会得到基本的想法。课程在[这里](http://pastebin.com/m50c0d24e)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-20T16:54:00.350

类本质上是一个抽象。

您有内置的数据类型，例如“int”或“string”或“float”，每一种都有特定的行为和可能的操作。

例如，您可以取浮点数的平方根，但不能取字符串的平方根。您可以连接两个字符串，也可以添加两个整数。这些数据类型中的每一种都代表一个一般概念（整数、文本或具有固定数量有效数字的数字，可能是小数，也可能不是小数）

一个类只是一个用户定义的数据类型，它可以表示一些其他概念，包括对其合法的操作。

例如，我们可以定义一个“密码”类来实现密码的预期行为。也就是说，我们应该能够获取一个文本字符串并从中创建一个密码。（如果我输入“secret02”，那是合法密码）。它可能应该对这个输入字符串进行一些验证，确保它至少有 N 个字符长，并且可能它不是字典单词。它不应该让我们**读取**密码。（密码通常`******`在屏幕上表示）。相反，它应该只允许我们将密码与其他密码进行比较，看看它是否相同。

如果我刚刚输入的密码与我最初注册的密码相同，我应该被允许登录。但密码实际上*是*什么，我登录的应用程序不应该知道。所以我们的密码类应该定义一个比较函数，而不是一个“显示”函数。

一个类基本上保存了一些数据，并定义了对该数据的哪些操作是合法的。它创建了一个抽象。

在密码示例中，数据在内部显然只是一个文本字符串，但该类只允许对该数据进行少量操作。它阻止我们将密码用作字符串，而只允许对密码有意义的特定操作。

在大多数语言中，类的成员可以是私有的也可以是公有的。任何私有的东西都只能由该类的其他成员访问。这就是我们如何实现存储在密码类中的字符串。它是私有的，所以它仍然对*我们*在类中定义的操作可见，但类外的代码不能只访问密码内的字符串。他们只能访问类的公共成员。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-01T06:04:30.040

类是您可以想到的一种结构形式，例如 int、string 等，可以使用面向对象的编程语言创建实例。就像模板或蓝图一样，该类具有结构。您将这个结构与类的每个关联一起编写。类中的某些内容将用作 Main() 方法中的对象实例，所有 sysync 编程步骤都在该方法中发生。

这就是为什么您会看到人们编写代码喜欢`Car car = new Car();`从类中提取新对象的原因。我个人不喜欢这种类型的代码，它非常糟糕和循环，并且没有解释哪一部分是类语法（排列）。太糟糕了，许多程序员都使用这种语法，初学者很难理解他们所感知的内容。

把它想象成，

```
CarClass theCar = new CarClass(); // 
```

类本质上具有无限多种形式。您可以编写描述 CarClass 的属性，并且生成的每辆汽车都将具有这些属性。要从“获取”什么（读取）和“设置”什么（写入）数据的属性中获取它们，您只需在 Main() 中生成的对象实例上使用点运算符，并将描述性属性声明为实际名词。类是本体（数学和数字之类的词，您无法通过感官感知它，但它像#1 一样的思想）。类使我们能够编写要使用的对象的定义，而不是将每个项目写为变量。有能力写无限多的东西有很大的责任！就像“你好世界！” 这个小小的第一个陈述如何充分说明我们作为程序员的观众。

所以

```
CarClass theCar = new CarClass(); //In a way this says this word "car" will be a car
theCar.Color = red; //Given the instance of a car we can add that color detail. 
```

现在这些只是 CarClass 的实现，而不是如何构建一个。您一定想知道还有哪些其他术语、字段、构造函数和类级别的方法，以及我们为什么使用它们和索引。

**字段**是属性的另一个修饰符。这些往往是在私有类级别上编写的，因此外部没有任何影响它，并且往往专注于属性本身的功能。它位于另一个区域，您通常在其前面使用下划线声明它。该字段将添加维护数据完整性所需的约束，这意味着您将阻止人们编写在上下文中没有意义的值。（就像负数中的真实测量一样……那不是真实的。） **构造函数** 描述构造函数的最简单方法是在构造函数作用域所在的对象属性上声明一些默认值。例如，汽车具有颜色、最大速度、型号和公司。但是这些值应该是什么，并且应该在 CarClass 的数百万份副本中使用一些值，还是只使用一些？构造函数使人们能够做到这一点，通过建立基本质量来生成副本。这些值是分配给构造函数块中属性的默认值。设计构造函数块类型 ctor[tab][tab]。在这里面简单地引用你在上面写的那些属性并在上面放置一个赋值。颜色=“红色”；如果您转到 main() 并现在在任何书写输出组件（例如控制台窗口或文本框）中使用 car.Color 属性，您应该会看到单词“Red”。因此，细节是隐含的和隐藏的。您只需参考这本书，而不是提供书中的每个单词，然后计算机就会获取剩余的信息。这使得代码脚本紧凑且易于使用。

类级别的方法应该解释如何一遍又一遍地执行某些过程。通常是一个字符串或一些文字，您可以为一个类格式化一些书面信息，并使用占位符格式化它，这些占位符在写作中以您的类属性表示。当您创建一个对象实例然后需要使用该对象以 .ToString() 形式显示详细信息时，这是有道理的。在某种意义上，类对象实例也可以包含像书或盒子这样的信息。当我们在类级别使用 ToString 覆盖方法编写 .ToString() 时，它将打印您的自定义 ToString 方法以及它应该如何解释代码。您还可以编写一个属性 .ToString() 并读取它。下面是一个字符串应该可以正常阅读... Console.Writeline(theCar.Color); 一旦你得到许多对象，一次一个，您可以将它们放在允许您添加或删除它们的列表中。等等...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T16:12:00.737

这是一个关于类和对象的好页面：

[http://ficl.sourceforge.net/oo_in_c.html](http://ficl.sourceforge.net/oo_in_c.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-20T16:36:31.850

这是一个资源，我很乐意推荐 [http://www.cplusplus.com/doc/tutorial/](http://www.cplusplus.com/doc/tutorial/)

不知道为什么，但是从 C++ 开始应用 OOP 可能是任何其他语言的*自然*优先，至少当我开始时，上面的链接对我有很大帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-20T16:48:20.793

类是程序员在代码上标记其领域的一种方式。
他们被认为是编写大型项目所必需的。
Linus 和他的团队一定错过了开发 linux 内核的备忘录。

但是，我猜它们可能有利于组织和分类代码。它使使用对象浏览器在诸如 Visual Studio 之类的 IDE 中导航代码变得更加容易。

[这是rosettacode](http://rosettacode.org/wiki/Classes)上31种语言的类的一些使用演示

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-09T10:17:45.807

首先回到定义：

类定义：

*   事物的抽象定义，用户类型，蓝图；
*   具有状态/字段/属性（对象知道什么）和方法/行为/成员函数（对象做什么）；
*   定义对象行为和默认值；

对象定义：

*   类的实例，数据的存储库；
*   具有唯一性：一个对象区别于其他对象的属性；
*   有自己的状态：描述对象中存储的数据；
*   表现出一些明确定义的行为：遵循类的描述；

实例化：

*   是实例化类创建对象的方式；
*   使对象处于有效状态；
*   由构造函数执行；

要使用类，您必须通过构造函数实例化该类。在 PHP 中，一个简单的例子可能是：

```
<?php
class SampleClass {
   function __construct() {
       print "In SampleClass constructor\n";
   }
}

// In SampleClass constructor
$obj = new SampleClass ();
?> 
```

# c# - WPF 应用程序的自动冒烟测试？

> ID：1021915
> 
> 赞同：0
> 
> 时间：2009-06-20T16:08:10.080
> 
> 标签：c#, wpf, smoke-testing

我们有一个 WPF 应用程序，我们想在它上面运行自动冒烟测试。简单的测试，如加载文档、保存文档等。我想知道是否有人可以建议现有的框架或应用程序来帮助解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T16:44:01.477

对于测试框架，NUnit 和 MSTest 都很好。MSTest 确实有一个优势，它与 Visual Studio 非常集成，所以这让事情变得更容易一些。（有可用于 vs 的 nunit 插件，但它们与 mstest 一样完全集成）。

就你如何编写测试而言，如果你已经根据[MVVM](http://www.orbifold.net/default/?p=550)模式编写了你的​​应用程序，那么让你的测试使用视图模型和命令来创建和运行你的应用程序非常简单，而无需实际创建视图。

即使您没有使用过 MVVM，希望您仍然将逻辑层从您的 gui 中抽象出来，这样您的测试就可以毫不费力地调用它们。

在实际的 GUI 测试方面，您可以查看[MS UI 自动化](http://msdn.microsoft.com/en-us/library/ms753388.aspx)框架，它应该允许您自动化部分 UI 以针对它运行测试。[这里](http://blogs.msdn.com/llobo/archive/2007/09/06/testing-using-wpf-ui-automation.aspx)有一篇关于如何开始的博客文章，还有一篇文章[在这里](http://www.codeproject.com/KB/WPF/WPF_UI_Automation.aspx)。还有一些商业框架覆盖了 UI 自动化的东西，使它更容易一些。一个例子是[testautomationfx](http://www.testautomationfx.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-03T12:15:09.147

由于辐条测试应该是“端到端”的，所以我会考虑自动化 UI 测试工具，比如 Test Complete，而不是单元测试工具——编写 VM 的创建脚本然后运行你的安装程序是另一个不错的选择。你说了test 应该包括应用程序的安装程序，因为它们往往不会被单元测试覆盖，也不会被开发人员使用。

您试图避免测试人员将时间花在“无望”的构建上——因此需要包含安装程序。

想想所有“愚蠢”的原因，这些原因会在您的测试团队花费时间安装新构建之后阻止他们的生产力——您可以将其中的多少包含在自动化系统中，而不会由于应用程序的更改而导致测试失败。

A lot of people make the error of trying to cover too much in a spoke test – “deep testing” that covers all your logic should be in unit tests and/or “story tests” not your spoke test.

# wcf - 在 WAS 中托管 wcf 服务

> ID：1021920
> 
> 赞同：0
> 
> 时间：2009-06-20T16:09:18.490
> 
> 标签：wcf, windows-vista, was

我编写了我的 WCF 服务，我需要在我的 vista 机器的 Windows 激活服务 (WAS) 中托管它。

请告诉如何在 WAS 中托管我的服务..

还有如何使用这个客户端应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T16:31:16.247

请参阅MSDN 上[WCF 开发人员中心的](http://msdn.microsoft.com/wcf/)[为 TCP 端点配置 WAS](http://channel9.msdn.com/shows/Endpoint/endpointtv-Screencast-Configuring-WAS-for-TCP-Endpoints/)和其他资源。

# sql - 查找具有具有特定属性的关联对象的所有对象

> ID：1021925
> 
> 赞同：0
> 
> 时间：2009-06-20T16:12:53.373
> 
> 标签：sql, ruby-on-rails, activerecord, join

我有一`Order`堂课`has_many :shipments`。我如何使用`Order.find`返回在特定时间（例如，在最后一小时）之后创建*最新装运的所有订单对象？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T19:06:41.863

```
Order.find(
  :all,
  :joins => :shipments, 
  :select => 'distinct orders.*', 
  :conditions => ['shipments.created_at > ?', Time.now - 1.hour]) 
```

这`:joins`可确保您获得有发货的订单，并`:conditions`确保您仅获得最近一小时内创建的发货。

这`:select`意味着如果订单在过去一小时内有多个通知，您只会获得每个订单的一个实例。

我不确定“最新”规定是否重要，因为如果在最后一小时内创建了任何货​​件，那么最新货件也将符合该条件。

# .net - 如何将我自己的连接类与强类型数据集一起使用？

> ID：1021926
> 
> 赞同：1
> 
> 时间：2009-06-20T16:14:36.133
> 
> 标签：.net, visual-studio, dataset, strongly-typed-dataset

我设计了一个带有 sqlClient.SqlCommand 包装器的类来实现诸如超时自动重试、异步（线程安全）、错误日志记录和一些 sql 服务器功能（如 WhoAmI）等功能。

我使用了一些强类型数据集，主要仅用于显示目的，但我希望拥有与我的班级相同的数据库功能。是否有我可以实现的接口或在设计或运行时将我的命令/连接类挂接到数据集的方法？

或者我是否需要以某种方式为数据集编写一个包装器来实现这些类型的功能？如果这是唯一的选择，是否可以通用包装从数据集继承的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-05-08T18:43:00.587

这是一种将事务功能扩展到您的类型化数据集的方法。您可以更改它以包含您的特殊 SQLCommand 包装器。

在此示例中，我有一个名为“dsMain”的数据集和“QueriesTableAdapter”中的一些直接查询。我使用一个函数扩展 TableAdapter 的部分类，该函数将基于第一个 (0) 连接创建事务，然后将其应用于表适配器中的每个连接。

```
Namespace dsMainTableAdapters
    Partial Public Class QueriesTableAdapter
        Public Function CreateTransaction() As Data.IDbTransaction   
            Dim oConnection = Me.CommandCollection(0).Connection
            oConnection.Open()

            Dim oTrans = oConnection.BeginTransaction()

            For Each cmd In Me.CommandCollection
                cmd.Connection = oConnection
                cmd.Transaction = oTrans
            Next

            Return oTrans
        End Function
    End Class
End Namespace 
```

您通过调用新函数开始事务

```
Dim qa As New dsMainTableAdapters.QueriesTableAdapter
Dim oTrans = qa.CreateTransaction() 
```

然后您可以在事务中调用 TableAdapter 查询

```
qa.Query1
qa.Query2 
```

完成查询后，您将提交事务

```
oTrans.Commit() 
```

您可以对为数据集创建的任何 TableAdapter 执行相同的操作。如果您有多个 TableAdapter 需要使用相同的事务，那么除了“CreateTransaction”之外，您还应该创建一个“SetTransaction”并将 Transaction 作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-15T02:26:09.537

这是一个更具体的答案。这演示了如何将基类用于类型化数据集，以便交换您自己的连接或命令类。

将此设置为每个键入的 TableAdapter 的“BaseClass”，替换“System.ComponentModel.Component”。通过使用“MustInherit/MustOverride”（C# 中的“Abstract”），您可以获得其他方式无法访问的属性。

```
Public MustInherit Class SuperTableAdapter
    Inherits System.ComponentModel.Component

    Public MustOverride ReadOnly Property MyCommandCollection As Data.SqlClient.SqlCommand()

    Public Sub New()
        MyBase.New()
        'With the command collection exposed, you can replace it with your own.'

        For i = 0 To MyCommandCollection.Length - 1
            'Now you can put in your special command class here'
            Dim myspecialCommand As New Data.SqlClient.SqlCommand()
            MyCommandCollection(i) = myspecialCommand
        Next
    End Sub
End Class 
```

对于您设置为继承 BaseClass 的每个表适配器，您必须覆盖所需的“MustOverride”属性。没有它，它将无法编译。如果添加代码但不设置 TableAdapter 基类，它也不会编译。那是好事；它确保你做对了。

```
Namespace DataSet1TableAdapters
    Partial Public Class Table1TableAdapter
        Public Overrides ReadOnly Property MyCommandCollection As System.Data.SqlClient.SqlCommand()
            Get
                Return Me.CommandCollection
            End Get
        End Property
    End Class

    Partial Public Class Table2TableAdapter
        Public Overrides ReadOnly Property MyCommandCollection As System.Data.SqlClient.SqlCommand()
            Get
                Return Me.CommandCollection
            End Get
        End Property
    End Class
End Namespace 
```

现在您可以将各种特殊代码放入您的 SuperTableAdapter。如果您需要访问未公开的内容，只需使用“MustOverride”来保证它可用。

# java - 文本区域文本要根据条件拆分

> ID：1021933
> 
> 赞同：0
> 
> 时间：2009-06-20T16:17:09.317
> 
> 标签：java, string, split

我有一个文本区域，用户可以在其中输入自由文本。我想根据以下条件分离出我的 Java 类中的行/出现：

当用户不按回车键时，我想获得每个 10 个字符的子字符串（文本）。当用户确实按下回车键时，我想将该部分分开并重新开始计数直到 15 以获取新的子字符串，直到我到达自由流动文本/字符串的末尾。

例如，如果用户输入：

```
你好我想要
输入要被抓住的钥匙。

```

我希望将此文本分成以下子字符串：

1.  你好我想要（假设用户此时按下回车键）
2.  输入要成为的键（因为限制是 15）
3.  抓住

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T16:48:27.767

```
if( text.contains("\n") ) {

  counter = 15;
  String[] splitText = text.split("\n");
  ArrayList<String> chunks - new ArrayList<String>(text.length%counter+1);
  StringBuilder current = new StringBuilder(counter);

  for( int i = 0; i < splitText.length; i++ ) {
    for( int j = 0; j < splitText[i].length; j++ ) {
      current.append(text.charAt(j));
      if( j%15 == 0 ) {
        chunks.add(current.toString());
        current = new StringBuilder(counter);
      }
    }
    chunks.add(current.toString());
    current = new StringBuilder(counter);
  }

} 
```

有了它，您可以找出您的其他要求。基本相同，只是没有 15 个或嵌套循环。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-20T16:25:50.723

我假设当您说“10 个字符”时，您的意思是 15 个字符，对吧？

在这种情况下，我首先使用 StringTokenizer 在换行符上拆分它，然后将每个结果分成 15 个字符的块。这将为您提供两个循环，一个用于 StringTokenizer 的外部循环和一个用于 15 字符分块的内部循环。

# assembly - 汇编：Y86 堆栈和调用、pushl/popl 和 ret 指令

> ID：1021935
> 
> 赞同：4
> 
> 时间：2009-06-20T16:17:38.040
> 
> 标签：assembly, stack, y86

除非我抄错了，否则上面的代码是一个学生在课堂上在老师的帮助/纠正下写在黑板上的：

```
int array[100], sum, i;

void ini() {
  for(i = 0; i < 100; i++)
    array[i] = i;
}

int main() {
  ini();

  sum = 0;

  for(i = 0; i < 100; i++)
    sum += array[i];
}

.pos 0
  irmovl Stack, %esp
  rrmovl Stack, %ebp

  jmp main

array:
.pos 430

sum: .long 0
i: .long 0

main:
  call ini                     //

  irmovl $0, %eax              // %eax = 0
  irmovl sum, %esi             // %esi = 0xsum
  rmmovl %eax, 0(%esi)         // 0(%esi) = %eax <=> 0(0xsum) = 0 [sum = 0]
  rmmovl %eax, 4(%esi)         // 4(%esi) = %eax <=> 4(0xsum) = 0 [i = 0]

compare:
  irmovl $100, %ebx            // %ebx = 100
  subl %eax, %ebx              // %ebx = %ebx - %eax <=> %ebx = 100 - i
  jle finish                   // Jumps to "finish" if SF=1 pr ZF=0

  mrmovl 0(%esi), %edx         // %edx = 0(%esi) <=> %edx = 0(0xsum) = sum
  addl %eax, %edx              // %edx = %edx + %eax <=> %edx = sum + i => sum
  rmmovl %edx, 0($esi)         // 0(%esi) = %edx <=> 0(0xsum) = sum

  irmovl $1, %ecx              // %ecx = 1
  addl %ecx, %eax              // %eax = %eax + %ecx <=> %eax = i + 1 => i
  rmmovl %eax, 4(%esi)         // 4($esi) = %eax <=> 4(0xsum) = i

  jmp compare                  // Jumps unconditionally to "compare"

ini:
  pushl %ebp                   //
  rrmovl %esp, %ebp            //
  pushl %ebx                   //
  pushl %eax                   //

  irmovl $0, %eax              // %eax = 0
  rmmovl %eax, -8(%ebp)        //

ini_compare:
  irmovl $100, %ecx            // %ecx = 100
  subl %eax, %ecx              // %ecx = %ecx - %eax <=> %ecx = 100 - i
  jle ini_finish               // Jumps to "ini_finish" if SF=1 pr ZF=0

  rrmovl %eax, %ebx            // %ebx = %eax <=> %ebx = i
  addl %eax, $ebx              // %ebx = %ebx + %eax <=> %ebx = i + i = 2i
  addl %ebx, %ebx              // %ebx = %ebx + %ebx <=> %ecx = 2i + 2i = 4i
  rmmovl %eax, array(%ebx)     // array(%ebx) = %eax <=> array(0x4i) = i

  irmovl %1, %ecx              // %ecx = 1
  addl %ecx, %eax              // %eax = %eax + %ecx <=> %eax = i + 1 => i
  rmmovl %eax, -8(%ebp)        //

  jmp ini_compare              // Jumps unconditionally to "ini_compare"

ini_finish:
  irmovl $4, %ebx              //
  addl %ebx, %esp              //
  popl %ebx                    //
  popl %ebp                    //

  ret                          //

.pos 600
  Stack .long 0 
```

如您所见，所有指令中都有一堆注释，我（我认为）其中大部分都得到了，让我感到困惑的是 call、pushl/popl 和 ret 指令。我不太了解它们，也不了解堆栈发生了什么以及所有记录指向的位置。基本上，带有注释（//）的行没有写任何内容。

我了解这一切是如何运作的，这非常重要，希望你们中的一些人能够对所有这些混乱局面有所了解。

**关于我的评论的一些注释：**

*   **0xsum：**这并不意味着地址是“sum”，这是不可能的。这只是一种在不使用确切内存地址的情况下理解我在说什么的方法。
*   **[sum = 0]：**这意味着在我们的 C 代码中，此时变量 sum 将被设置为 0。
*   **i + 1 => i：**这意味着我们将 'i' 的值加 1，并且在下面的行中，'i' 实际上将代表那个增加的值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T17:06:23.017

让我们看一些代码：

```
main:
  call ini 
```

这会将指令指针的值压入堆栈（以便您稍后可以在代码中返回到该位置），并跳转到 ini 标签的地址。“ret”指令使用堆栈中存储的值从子程序返回。

以下是子程序的初始化顺序。它将一些寄存器的值保存在堆栈上，并通过将堆栈指针（esp）复制到基指针寄存器（ebp）来建立堆栈帧。如果子程序有局部变量，则堆栈指针递减，为堆栈上的变量腾出空间，基指针用于访问堆栈帧中的局部变量。在示例中，唯一的局部变量是（未使用的）返回值。

push 指令将堆栈指针 (esp) 递减为将要被压入的数据大小，然后将值存储在该地址。pop 指令则相反，首先获取值，然后递增堆栈指针。（注意堆栈是向下增长的，所以堆栈增长时堆栈指针地址会变低。）

```
ini:
  pushl %ebp             // save ebp on the stack
  rrmovl %esp, %ebp      // ebp = esp (create stack frame)
  pushl %ebx             // save ebx on the stack
  pushl %eax             // push eax on the stack (only to decrement stack pointer)
  irmovl $0, %eax        // eax = 0
  rmmovl %eax, -8(%ebp)  // store eax at ebp-8 (clear return value) 
```

代码遵循标准模式，因此在没有局部变量并且有未使用的返回值时看起来有点尴尬。如果有局部变量，将使用减法来递减堆栈指针，而不是压入 eax。

以下是子程序的退出顺序。它将堆栈恢复到创建堆栈帧之前的位置，然后返回到调用子例程的代码。

```
ini_finish:
   irmovl $4, %ebx   // ebx = 4
   addl %ebx, %esp   // esp += ebx (remove stack frame)
   popl %ebx         // restore ebx from stack
   popl %ebp         // restore ebp from stack
   ret               // get return address from stack and jump there 
```

回应您的评论：

ebx 寄存器被压入和弹出以保留其值。编译器显然总是把这段代码放在那里，可能是因为寄存器非常常用，只是不在这段代码中。同样，堆栈帧总是通过将 esp 复制到 ebp 来创建，即使它并不是真正需要的。

推送 eax 的指令只是为了减少堆栈指针。对于小的递减，它是这样做的，因为它比减去堆栈指针更短、更快。它保留的空间用于返回值，即使不使用返回值，编译器也显然总是这样做。

在您的图表中，esp 寄存器始终指向内存中过高的四个字节。请记住，堆栈指针在压入一个值后会递减，因此它将指向压入的值，而不是下一个值。（内存地址也很差，它类似于 0x600 而不是 0x20，因为这是声明堆栈标签的地方。）

# asp.net - ASP.NET C#：裁剪图像

> ID：1021943
> 
> 赞同：1
> 
> 时间：2009-06-20T16:20:28.273
> 
> 标签：asp.net

谁能告诉我在 ASP.NET C# 中，我如何对保存在服务器中的图像进行裁剪。我想从图片左侧删除 10 像素。提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-12-16T06:31:03.493

这里代码解决方案

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
 <link href="css/jquery.Jcrop.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.Jcrop.js"></script>
</head>
<body>
  <form id="form2" runat="server">
  <div>
    <asp:Panel ID="pnlUpload" runat="server">
      <asp:FileUpload ID="Upload" runat="server" />
      <br />
      <asp:Button ID="btnUpload" runat="server" OnClick="btnUpload_Click" Text="Upload" />
      <asp:Label ID="lblError" runat="server" Visible="false" />
    </asp:Panel>
    <asp:Panel ID="pnlCrop" runat="server" Visible="false">
      <asp:Image ID="imgCrop" runat="server" />
      <br />
      <asp:HiddenField ID="X" runat="server" />
      <asp:HiddenField ID="Y" runat="server" />
      <asp:HiddenField ID="W" runat="server" />
      <asp:HiddenField ID="H" runat="server" />
      <asp:Button ID="btnCrop" runat="server" Text="Crop" OnClick="btnCrop_Click" />
    </asp:Panel>
    <asp:Panel ID="pnlCropped" runat="server" Visible="false">
      <asp:Image ID="imgCropped" runat="server" />
    </asp:Panel>
  </div>
  </form>
    <script type="text/javascript">
  jQuery(document).ready(function() {
    jQuery('#imgCrop').Jcrop({
      onSelect: storeCoords
    });
  });

  function storeCoords(c) {
    jQuery('#X').val(c.x);
    jQuery('#Y').val(c.y);
    jQuery('#W').val(c.w);
    jQuery('#H').val(c.h);
  };

</script>
</body>
</html> 
```

用于上传和裁剪图像的 C# 代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using SD = System.Drawing;
using System.Drawing.Imaging;
using System.Drawing.Drawing2D;

namespace WebApplication1
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        String path = HttpContext.Current.Request.PhysicalApplicationPath + "images\\";
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        protected void btnUpload_Click(object sender, EventArgs e)
        {
            Boolean FileOK = false;
            Boolean FileSaved = false;

            if (Upload.HasFile)
            {
                Session["WorkingImage"] = Upload.FileName;
                String FileExtension = Path.GetExtension(Session["WorkingImage"].ToString()).ToLower();
                String[] allowedExtensions = { ".png", ".jpeg", ".jpg", ".gif" };
                for (int i = 0; i < allowedExtensions.Length; i++)
                {
                    if (FileExtension == allowedExtensions[i])
                    {
                        FileOK = true;
                    }
                }
            }

            if (FileOK)
            {
                try
                {
                    Upload.PostedFile.SaveAs(path + Session["WorkingImage"]);
                    FileSaved = true;
                }
                catch (Exception ex)
                {
                    lblError.Text = "File could not be uploaded." + ex.Message.ToString();
                    lblError.Visible = true;
                    FileSaved = false;
                }
            }
            else
            {
                lblError.Text = "Cannot accept files of this type.";
                lblError.Visible = true;
            }

            if (FileSaved)
            {
                pnlUpload.Visible = false;
                pnlCrop.Visible = true;
                imgCrop.ImageUrl = "images/" + Session["WorkingImage"].ToString();
            }
        }

        protected void btnCrop_Click(object sender, EventArgs e)
        {
            string ImageName = Session["WorkingImage"].ToString();
            int w = Convert.ToInt32(W.Value);
            int h = Convert.ToInt32(H.Value);
            int x = Convert.ToInt32(X.Value);
            int y = Convert.ToInt32(Y.Value);

            byte[] CropImage = Crop(path + ImageName, w, h, x, y);
            using (MemoryStream ms = new MemoryStream(CropImage, 0, CropImage.Length))
            {
                ms.Write(CropImage, 0, CropImage.Length);
                using (SD.Image CroppedImage = SD.Image.FromStream(ms, true))
                {
                    string SaveTo = path + "crop" + ImageName;
                    CroppedImage.Save(SaveTo, CroppedImage.RawFormat);
                    pnlCrop.Visible = false;
                    pnlCropped.Visible = true;
                    imgCropped.ImageUrl = "images/crop" + ImageName;
                }
            }
        }

        static byte[] Crop(string Img, int Width, int Height, int X, int Y)
        {
            try
            {
                using (SD.Image OriginalImage = SD.Image.FromFile(Img))
                {
                    using (SD.Bitmap bmp = new SD.Bitmap(Width, Height))
                    {
                        bmp.SetResolution(OriginalImage.HorizontalResolution, OriginalImage.VerticalResolution);
                        using (SD.Graphics Graphic = SD.Graphics.FromImage(bmp))
                        {
                            Graphic.SmoothingMode = SmoothingMode.AntiAlias;
                            Graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
                            Graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
                            Graphic.DrawImage(OriginalImage, new SD.Rectangle(0, 0, Width, Height), X, Y, Width, Height, SD.GraphicsUnit.Pixel);
                            MemoryStream ms = new MemoryStream();
                            bmp.Save(ms, OriginalImage.RawFormat);
                            return ms.GetBuffer();
                        }
                    }
                }
            }
            catch (Exception Ex)
            {
                throw (Ex);
            }
        }
    }
} 
```

这是github上的工作演示

[https://github.com/SystematixIndore/Crop-SaveImageInCSharp](https://github.com/SystematixIndore/Crop-SaveImageInCSharp)

# html - 为什么我的图像都过大？

> ID：1021946
> 
> 赞同：-1
> 
> 时间：2009-06-20T16:21:44.250
> 
> 标签：html, css, wordpress, image

我刚刚建立了一个wordpress论坛，我发现所有的图像都过大了，为什么会这样？

[http://rasaasa.com/forum/](http://rasaasa.com/forum/)

另外我该如何解决这个问题？

谢谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-20T16:24:06.370

检查你的样式表！

style.css（第 159 行）包含一行，它使图像变为 200 像素。

```
#content .latest img {
float:left;
margin:0 10px 5px 0;
width:200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T16:26:46.887

规则

```
#content .latest img 
```

在文件中

> wp-content/themes/slickpress_theme/slickpress_theme/style.css

宽度规格为 200px。

删除它，你应该很好。

# sql - 如何在 MySQL 中计算日期的平均值？

> ID：1021947
> 
> 赞同：21
> 
> 时间：2009-06-20T16:22:05.560
> 
> 标签：sql, mysql

如何在 MySQL 中的日期之间求平均值？我对时间值、小时和分钟更感兴趣。

在一张桌子上：

```
| date_one   | datetime |
| date_two   | datetime | 
```

执行如下查询：

```
 SELECT AVG(date_one-date_two) FROM some_table WHERE some-restriction-applies; 
```

* * *

### 编辑：

有效，`AVG(date1-date2)`但我不知道它返回的是什么数据。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-20T16:28:58.433

这似乎有点骇人听闻，但适用于 1970 年和 2030 年之间的日期（在 32 位拱门上）。您实际上是将日期时间值转换为整数，对它们进行平均，然后将平均值转换回日期时间值。

```
SELECT
    from_unixtime(
        avg(
            unix_timestamp(date_one)-unix_timestamp(date_two)
        )
    )
FROM
    some_table
WHERE
    some-restriction-applies 
```

那里可能有更好的解决方案，但这会让你在紧要关头。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-09-28T21:25:16.950

```
select avg(datediff(date1,date2))
select avg(timediff(datetime,datetime)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-20T17:06:25.730

```
SELECT date_one + (date_two - date_one) / 2 AS average_date
FROM thetable
WHERE whatever 
```

您不能将日期相加，但您可以减去它们并获得一个时间间隔，您可以将其减半并加回第一个日期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-02-23T11:53:33.390

```
SELECT TIMESTAMPADD(MINUTE, TIMESTAMPDIFF(MINUTE, '2011-02-12 10:00:00', '2011-02-12 12:00:00')/2, '2011-02-12 10:00:00') 
```

结果是'2011-02-12 11:00:00'

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-20T16:47:29.580

```
CREATE TABLE `some_table`
(
  `some_table_key` INT(11) NOT NULL AUTO_INCREMENT,
  `group_name` VARCHAR(128) NOT NULL,
  `start` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `finish` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY  (`some_table_key`)
);

SELECT
    group_name,
    COUNT(*) AS entries,
    SEC_TO_TIME( AVG( TIME_TO_SEC( TIMEDIFF(finish, start) ) ) ) AS average_time
FROM some_table
GROUP BY
    some_table.group_name
; 
```

在使用组函数时，您应该始终指定您想要的组，如果您稍后使用 JOIN 等扩展查询并假设 MySql 会为您选择正确的组，您最终可能会与组函数产生一些令人讨厌的混乱。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-20T16:24:37.370

大声思考你可以在设定时间的几分钟内做一个日期差异，平均然后将这些分钟加回到设定的时间......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-20T16:32:32.567

AVG 是一个分组函数，这意味着它将表中的所有行相加并除以行数。但听起来你想要两个不同列的平均值，为每一行单独报告。在这种情况下，您应该自己计算：(date1+date2)/2。（MySQL 可能需要一些额外的语法来正确添加这些列。）

您编写的代码将为您提供表格在 date1 和 date2 之间的平均**经过时间。**

# ruby-on-rails - 似乎无法在我的控制器中运行“脚手架：产品”

> ID：1021948
> 
> 赞同：0
> 
> 时间：2009-06-20T16:22:33.000
> 
> 标签：ruby-on-rails, ruby

在对 Rails 有一些早期经验但想要一种更结构化的方法之后，我最近开始阅读实用程序员编写的“使用 Rails 进行敏捷 Web 开发”一书。

当他们要求我做一个控制器管理员以便我可以编辑我已经创建的标准 CRUD 产品模型时，我很高兴地遵循这本书。根据这本书，我应该将“脚手架：产品”行添加到我的 admin_controller 中，它应该像魅力一样运行。好吧，我的 rails 只说：“AdminController:Class 的未定义方法 `scaffold'”。

我知道他在书中使用的是较旧的 rails 版本，例如 1.8 或其他版本，并且我知道如何运行普通的脚手架，但不知道如何让 admin_controller 像书籍声明所暗示的那样从 Product 继承所有多汁的 CRUD 细节。我尝试将所有视图和脚手架生成的控制器代码从 product_controller 复制到管理员，并且效果很好，但我真的想知道这样做的正确方法是什么。

我的管理员控制器：

```
class AdminController < ApplicationController
 scaffold:product
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T16:33:52.880

您提到的*动态脚手架*功能已在 Rails 2 中删除。

如果您是 Rails 新手，我建议您使用常规脚手架并从那里开始。一旦您获得更多经验，就可以轻松快速地制作您自己的控制器操作。

有一些动态脚手架的替代方案可能有助于快速原型设计，或者如果您开发了许多类似的功能：

*   [主动式脚手架](http://activescaffold.com/)
*   [流浪汉](http://www.hobocentral.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T16:35:43.020

现在更好的方法是使用脚手架生成器而不是脚手架方法。在 Rails 最初开发时，脚手架方法是一个令人印象深刻的展示，但它隐藏的太多，你不能只修改你需要的部分。为了解决这个问题，脚手架改为生成器，因为它们公开代码并允许您更轻松地编辑它。然后从 Rails 中删除了脚手架方法，以防止它被使用。

# c++ - 如何在 configure.in 中测试 C++ 库的可用性？

> ID：1021962
> 
> 赞同：12
> 
> 时间：2009-06-20T16:28:52.970
> 
> 标签：c++, autotools, configure, usability, autoconf

我正在 GNU/Linux 上开发一个 C++ 项目，我正在寻找一种方法来使用 Autotools 测试 IBM Informix 库的存在性和可用性 - 即编辑一个`configure.in`. 我没有使用 Autotools 的经验，所以基本上我是从项目的`configure.in` *et al 中学习的。*脚本和复制和更改我觉得需要更改的地方。IOW，我一直在改编`configure.in`.

到目前为止，我一直在成功地使用`AC_CHECK_LIB`in`configure.in`来测试某个库是否既存在又可用。但这似乎只适用于具有*函数*的库，而不是类。即，在测试 Informix 的`libifc++.so`库时失败：

```
AC_CHECK_LIB(ifc++, ITString, 
        INFORMIX_LIB="-L$INFORMIX_LIB_LOCATION/c++ -lifc++ -L$INFORMIX_LIB_LOCATION -L$INFORMIX_LIB_LOCATION/dmi -L$INFORMIX_LIB_LOCATION/esql -lifdmi -lifsql -lifasf -lifgen -lifos -lifgls -lifglx $INFORMIX_LIB_LOCATION/esql/checkapi.o -lm -ldl -lcrypt -lnsl",
        echo "* WARNING: libifc++.so not found!"
        INFORMIX_INC=""
        INFORMIX_LIB=""
) 
```

我也尝试过使用其他组合，例如`ITString::ITString`等。

我没有在 Informix 的 API 中找到“纯”函数（即，在 C++ 类中没有上下文的函数）。所以我希望要么有一种`AC_CHECK_LIB`在这种情况下使用的方法，要么有另一个`autoconf`/ `configure.in`“命令”用于这个特定用途。

提前感谢您的反馈。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-20T16:48:26.830

您已经发现了自动工具的一个缺点，但它确实无济于事。Autotools 检查库二进制文件中的符号名称，与 C 中函数的符号名称与函数名称相同的 C 不同，C++“修改”函数的符号名称以完成函数重载等事情。更糟糕的是，C++ 甚至没有真正的“标准”修改约定，因此不同的 C++ 编译器可能会为同一个函数生成不同的符号名称。因此，autotools 无法以可靠的方式检查 C++ 符号名称。

您尝试使用的库是否有任何用 声明的函数`extern "C"`？这会导致 C++ 编译器生成标准化的 C 样式符号名称，并且 autotools 将能够找到它们。

我在尝试使用 Autotools 检测[gtest](http://code.google.com/p/googletest/)和[gmock](http://code.google.com/p/googlemock/)（Google 单元测试和对象模拟框架）时遇到了这个问题，这就是我想出的：

```
# gtest has a main function in the gtest_main library with C linkage, we can test for that.
AC_CHECK_LIB([gtest_main], [main], [HAVE_GTEST=1] [TEST_LIBS="$TEST_LIBS -lgtest_main"], 
      AC_MSG_WARN([libgtest (Google C++ Unit Testing Framework) is not installed. Will not be able to make check.])) 

# gmock has no functions with C linkage, so this is a roundabout way of testing for it. We create a small test
# program that tries to instantiate one of gmock's objects, and try to link it with -lgmock and see if it works.
if test "$HAVE_GTEST"                                                                 
then                                                                                  
  saved_ldflags="${LDFLAGS}"                                                          
  LDFLAGS="${LDFLAGS} -lgtest -lgmock"                                                
  AC_LINK_IFELSE([AC_LANG_PROGRAM([#include <gmock/gmock.h>], [testing::Cardinality dummy])],
    [TEST_LIBS="$TEST_LIBS -lgmock"] [HAVE_GMOCK=1],                                           
    [AC_MSG_WARN([libgmock (Google C++ Object Mocking Framework) is not installed. Will not be able to make check.])])
  LDFLAGS="${saved_ldflags}"                                                                                          
fi 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-20T16:44:57.470

可能有一种更简洁的方法来实现这一点，但我认为您的问题是 C++ 方法被“破坏”以允许对有关方法（参数和返回类型等）的附加信息进行编码。例如; 该方法`int A::foo(void)`将被破坏为`__ZN1A3fooEv`.

因此，您需要在库中找到方法的错位名称。您可以通过在类 Unix 操作系统上使用以下[`nm`命令来执行此操作：](https://en.wikipedia.org/wiki/Nm_(Unix))

```
$ nm libifc++.so | grep ITString 
```

值得一提的是，不同的编译器的准确修饰格式会有所不同。因此，通过在您的中嵌入某个编译器的损坏符号，`configure.in`它可能无法在其他平台上运行 - YMMV。

注意：您可以使用该[`c++filt`](https://sourceware.org/binutils/docs/binutils/c_002b_002bfilt.html "c++filt（GNU 二进制实用程序）")实用程序将名称恢复为人类可读的形式；所以对于我之前给出的例子：

```
$ c++filt __ZN1A3fooEv
A::foo() 
```

有关更多信息，请参阅Wikipedia 上[的 C++ 中的名称修饰。](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-03-24T08:31:16.883

如果您正在检查的库支持[pkg-config](http://pkg-config.freedesktop.org/wiki/)，这将变得非常容易。这是我添加到我的所有内容`configure.in`以检查和启用`gtest`and `gmock`：

```
dnl ************************************
dnl Check for googletest and googlemock
dnl ************************************

PKG_CHECK_MODULES(gtestmock, libgtest >= 0.4.0, libgmock >= 0.4.0)
AC_SUBST(gtestmock_LIBS)
AC_SUBST(gtestmock_CFLAGS) 
```

然后在我的`Makefile.am`某个地方：

```
sometarget_CXXFLAGS = $(gtestmock_CFLAGS) $(AM_CXXFLAGS)
sometarget_LDADD    = $(gtestmock_LIBS) 
```

很琐碎，嗯？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:28:06.427

```
AC_LANG_CPLUSPLUS
AC_CHECK_LIB(Sockets, main) 
```

警告： http: [//lists.gnu.org/archive/html/autoconf/2006-09/msg00019.html](http://lists.gnu.org/archive/html/autoconf/2006-09/msg00019.html)

# iphone - iPhone：将图像保存到特定相册

> ID：1021965
> 
> 赞同：2
> 
> 时间：2009-06-20T16:30:16.513
> 
> 标签：iphone, cocoa-touch

我正在开发的应用程序为用户处理图像，用户完成后，他们可以保存该照片。我捕获屏幕并保存它没有问题（因为我想要一些与图像一起保存的标签）但是这个调用：

UIImageWriteToSavedPhotosAlbum([self getScreenAsImage] , nil, nil, nil);

似乎只允许我保存到“保存的照片”相册。理想情况下，我想创建一个以我正在开发的应用程序命名的专辑并将其保存在那里，以便它们全部存储在一起（例如，像夏威夷或模拟器上的毕业日专辑）。然后在该特定专辑中启动图像选择器也很好。有人知道怎么做吗？最重要的部分是能够将其保存在专辑中，能够在该专辑中启动选择器是次要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T18:37:05.087

有办法做到这一点，苹果只是没有让它变得简单。

有一个自定义类别可将功能添加到 ALAssetsLibrary。

**可以在[此处找到该类别的](https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum)**Git存储库****

 **如果您使用的是 Cocoapods，您可以使用

```
pod 'ALAssetsLibrary-CustomPhotoAlbum' 
```

您将需要实例化一个 ALAssetsLibrary 对象并调用以下方法

```
- (void)saveImage:(UIImage *)image
      toAlbum:(NSString *)albumName
   completion:(ALAssetsLibraryWriteImageCompletionBlock)completion
      failure:(ALAssetsLibraryAccessFailureBlock)failure 
```

像下面的东西

进口：

```
#import "ALAssetsLibrary+CustomPhotoAlbum.h" //Source Included (Git) 
```

或者

```
#import <ALAssetsLibrary+CustomPhotoAlbum.h> //Cocoapods 
```

称呼：

```
ALAssetsLibrary *assetsLib = [[ALAssetsLibrary alloc] init];
[assetsLib saveImage:imageToSave
                      toAlbum:@"AlbumName"
                   completion:completionBlock
                      failure:failureBlock]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:14:09.057

您可以使用[**ALAssetsLibrary**](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)来执行此操作：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library saveImage:image toAlbum:@"Midhun" withCompletionBlock:^(NSError *error) {
        if (error!=nil) {
            NSLog(@"Error: %@", [error description]);
        }
    }]; 
```

还可以查看本教程：[**自定义相册**](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-20T18:50:47.480

据我所知，Apple 并没有公开 SDK 来实现这一点。在查看 UIKit 函数参考后，我的恐惧似乎得到了证实。**

# c# - 我可以将链接列表从 C# Web 服务传递到 JavaScript 函数吗？

> ID：1021967
> 
> 赞同：0
> 
> 时间：2009-06-20T16:31:01.210
> 
> 标签：c#, javascript, web-services, linked-list

**我在我的 JavaScript 代码中创建了一个链表类**，然后将该代码翻译成 C#。

现在，我有一个 JavaScript 函数，它调用 Web 服务以获取名称数组，`onComplete`然后 JavaScript 函数获取该数组并将其制成链表。

有什么方法可以在 Web 服务中创建链接列表并将其传回以供 JavaScript 代码使用，或者链接列表不能正确传输？

**编辑：**让我把我的问题改写成更有意义的东西。如果您有一个由类创建的自定义对象，请说....类用户，并且该类有一个名为用户名的变量。如果您将一个用户对象：objUser，从 C# 传回 JavaScript，那么 JavaScript 如何知道它可以访问`objUser.userName`？它可以在这个用户对象上调用的可能方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T17:04:46.840

在创建 ASP.NET MVC 应用程序时，我遇到了类似的问题。基本上答案是 JavaScript 没有与 C# 中相同的类型概念。

假设您决定使用 JSON 在应用程序中的客户端和服务器之间传递数据。JSON、XML、YAML 或其他格式的选择并不重要。

**服务器端**

在您的服务器端，在您的 C# 代码中，您可以执行以下操作（假设您使用的是某种 JSON 库）：

```
var myLinkedList = JsonConvert.DeserializeObject<LinkedList>(json); 
```

现在你有一个类型为 LinkedList 的 myLinkedList 变量。myLinkedList 现在的行为类似于所有 LinkedList 实例。

**客户端**

但是在客户端站点上，在您的 JavaScript 代码中，您可能会执行以下操作：

```
function LinkedList(){
    //Constructor for your LinkedList
};

LinkedList.prototype = {
    //Various functions to operate on your linked list
}; 
```

您需要编写类似这样的代码来反序列化从服务器返回的数据：

```
var linkedList = JSON.parse(jsonString); 
```

请注意，没有办法表明您希望此反序列化数据进入您之前定义的 LinkedList “类”。JavaScript 不理解 LinkedList 是一个“类”，您使用原型添加了功能。

你得到的是一个 JavaScript 对象。

解决此问题的一种方法是执行以下操作：

```
var linkedList = new LinkedList();
var deserializedObject = JSON.parse(jsonString);

linkedList.Items = deserializedObject.Items; 
```

Basically, you'd have to copy over all the state from your deserialized object into your linkedList variable.

# java - 启动嵌入式 Jetty 服务器的最短代码

> ID：1021971
> 
> 赞同：13
> 
> 时间：2009-06-20T16:33:29.370
> 
> 标签：java, jetty, embedded-jetty

我正在编写一些示例代码，其中启动了嵌入式 Jetty 服务器。服务器必须只加载一个 servlet，将所有请求发送到 servlet 并监听 localhost:80

到目前为止我的代码：

```
static void startJetty() {
        try {
            Server server = new Server();

            Connector con = new SelectChannelConnector();
            con.setPort(80);
            server.addConnector(con);

            Context context = new Context(server, "/", Context.SESSIONS);
            ServletHolder holder = new ServletHolder(new MyApp());
            context.addServlet(holder, "/*");

            server.start();
        } catch (Exception ex) {
            System.err.println(ex);
        }

    } 
```

我可以用更少的代码/行做同样的事情吗？（使用码头 6.1.0）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-20T16:39:09.980

```
static void startJetty() {
    try {
        Server server = new Server();
        Connector con = new SelectChannelConnector();
        con.setPort(80);
        server.addConnector(con);
        Context context = new Context(server, "/", Context.SESSIONS);
        context.addServlet(new ServletHolder(new MyApp()), "/*");
        server.start();
    } catch (Exception ex) {
        System.err.println(ex);
    }
} 
```

删除了不必要的空格并移动了 ServletHolder 创建内联。删除了 5 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-20T17:43:43.283

您可以在 Spring applicationcontext.xml 中以声明方式配置 Jetty，例如：

[http://roopindersingh.com/2008/12/10/spring-and-jetty-integration/](http://roopindersingh.com/2008/12/10/spring-and-jetty-integration/)

然后只需从 applicationcontext.xml 检索服务器 bean 并调用 start ...我相信这使它成为一行代码... :)

```
((Server)appContext.getBean("jettyServer")).start(); 
```

它对于涉及 Jetty 的集成测试很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-26T23:21:39.507

适用于 Jetty 8：

```
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.webapp.WebAppContext;

public class Main {
    public static void main(String[] args) throws Exception {
            Server server = new Server(8080);
            WebAppContext handler = new WebAppContext();
            handler.setResourceBase("/");
            handler.setContextPath("/");
            handler.addServlet(new ServletHolder(new MyApp()), "/*");
            server.setHandler(handler);
            server.start();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-05T10:53:29.940

我编写了一个库[EasyJetty](https://github.com/renatoathaydes/easy-jetty)，它使嵌入 Jetty 变得更加容易。它只是 Jetty API 之上的一个薄层，非常轻量级。

您的示例如下所示：

```
import com.athaydes.easyjetty.EasyJetty;

public class Sample {

    public static void main(String[] args) {
        new EasyJetty().port(80).servlet("/*", MyApp.class).start();
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T00:43:35.693

```
 Server server = new Server(8080);
        Context root = new Context(server, "/");
        root.setResourceBase("./pom.xml");
        root.setHandler(new ResourceHandler());
        server.start(); 
```

# sql - 为用户列中的每个字段选择与用户列不同的日期和最小值

> ID：1021973
> 
> 赞同：8
> 
> 时间：2009-06-20T16:34:56.920
> 
> 标签：sql, distinct, aggregate-functions, minimum

我有一些这样的数据，但超过 1500000 条记录和 700 多个用户：

```
usercolumn   ,       datecolumn\     
a1            ,      1998/2/11\
a2            ,      1998/3/11\
a1            ,      1998/2/15\
a4            ,      1998/4/14\
a3            ,      1999/1/15\
a2            ,      1998/11/12\
a2            ,      1999/2/11\
a3            ,      2000/2/9\
a1            ,      1998/6/5\
a3            ,      1998/7/7\
a1            ,      1998/3/11\
a5            ,      1998/3/18\
a2            ,      1998/2/8\
a1            ,      1998/12/11\
a4            ,      1998/12/1\
a5            ,      1998/2/11\
.... 
```

我想从 usercolumn 中获得不同的数据和每个用户的日期最小值，如下所示：

```
usercolumn      ,    datecolumn \        
a1              ,    1998/2/11\
a2              ,    1998/2/8\
a3              ,    1998/7/7\
a4              ,    1998/4/14\
a5              ,    1998/2/11\
.... 
```

请帮我编写一个 SQL 命令来为 c# 中的 oledb 适配器执行此操作，谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-06-20T17:22:48.440

```
SELECT usercolumn, MIN(datecolumn) FROM tablename GROUP BY usercolumn; 
```

请注意，如果您想要其他列，它们必须要么出现在 GROUP BY 子句中，要么跨行保持不变。否则结果将是不确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-20T17:18:30.927

这适用于 SQLServer 2008 和 DB2：

```
with temp as (
    select *, row_number() over (partition by usercolumn order by datecolumn) as rownum
    from table)
select * from temp 
where rownum = 1 
```

即使您需要在选择中包含多个列，它也会给出正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-20T16:39:19.247

像这样的事情应该做的

```
 SELECT usercolumn
         , MIN(datecolumn)
      FROM YouTable
     GROUP BY usercolumn
         , MIN(datecolumn) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T18:00:59.733

你可以试试这个：

```
SELECT DISTINCT a.username, a.date
FROM tablename AS a INNER JOIN tablename AS b
ON(a.username = b.username AND a.date < b.date) 
```

至于 C#，帮不了你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-20T21:52:27.677

SELECT DISTINCT USERNAME, DATE FROM TABLENAME AS A.DATE=(SELECT MIN(DATE) FROM TABLENAME WHERE USERNAME=A.USERNAME)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-20T16:57:42.857

如果您的列不止这两列，那么要使用的最佳 SQL 取决于您在该 OleDB 适配器的另一端拥有的服务器，但这里有一些适用于许多（唉，不是全部！）这样可能的东西服务器：

```
SELECT t.*
FROM thetable t
LEFT JOIN thetable taux
  ON(t.usercolumn=taux.usercolumn
     AND t.datecolumn>taux.datecolumn)
WHERE taux.usecolumn IS NULL 
```

您可以将其读作“发出表格的那些行，以使表格中没有其他行具有相同的用户和严格的日期”。如果给定用户的最短日期可以多次出现，这将为该用户提供尽可能多的行 - 如果这对您来说是个问题，那么也有解决方案......但我会等你澄清你的问题在我对此进行更多工作之前！-)

# sqlite - 如何将 CakePHP 连接到 SQLite 数据库？

> ID：1021980
> 
> 赞同：10
> 
> 时间：2009-06-20T16:39:07.420
> 
> 标签：sqlite, cakephp

我有一个相当基本的问题：我似乎无法将 CakePHP 连接到我的 SQLite 数据库。令人惊讶的是，我在互联网上没有找到很多关于它的信息，尽管我可能正在查找错误的关键字。不过，这是我的连接代码：

```
var $default = array(
        'driver' => 'sqlite',
        'connect' =>'sqlite_popen',
        'persistent' => false,
        'host' => 'localhost',
        'port' => '',
        'login' => '',
        'password' => '',
        'database' => '/home/MY_USER_NAME/public_html/my_database.sqlite',
        'schema' => '',
        'prefix' => '',
        'encoding' => ''
); 
```

尽管如此，Cake 只说“Cake 无法连接到数据库”。另外，我不知道在哪里可以看到“真实”日志（即从 SQLite“驱动程序”返回的错误）。所以，我遇到了死胡同。我该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-01T23:46:23.430

从[CakePHP 2.0 开始](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)，Sqlite 3 支持开箱即用。

确保在您的 PHP 配置中启用了 sqlite：

```
phpinfo(); 
```

在里面`app/Config/databases.php`你可以像这样定义 Sqlite 数据库：

```
public $default = array(
        'datasource' => 'Database/Sqlite',
        'persistent' => false,
        'database' => 'my_database_name',
        'prefix' => '',
        'encoding' => 'utf8',
); 
```

现在检查你的`app/webroot/my_database_name.sqlite`文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-07-30T04:05:57.210

CakePHP 尚未正式支持 SQLite3……可能是因为附加到此错误/增强功能的文件有效。

[https://trac.cakephp.org/ticket/3003](https://trac.cakephp.org/ticket/3003)

获取文件的最新版本，使用任何更新的补丁对其进行更新，将其上传到您的`cake/libs/model/datasources/dbo`目录并在您的 database.php 文件中进行配置。

我正在使用一个名为 dbo_sqlite3.php 的文件

我的配置文件将其用于驱动程序设置：

```
 'driver' => 'sqlite3', 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-02-11T00:19:19.183

如何使用 SQLite3 编写 CakePHP：

要求：

*   CakePHP 1.3 版
*   [数据源插件](http://github.com/cakephp/datasources)

脚步：

解压 Datasources 插件。

编辑 dbo_sqlite3.php 并添加：

```
App::import('Datasource','DboSource'); 
```

...就在“类”定义之前。

在您的 database.php 文件中使用以下配置：

```
var $default = array(
    'datasource' => 'Datasources.DboSqlite3',
    'login' => '',
    'password' => '',
    'database' => '/full/path/to/db.sqlite'); 
```

完毕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-20T16:41:36.813

您是否尝试连接到 SQLite 3 数据库？[CakePHP](https://trac.cakephp.org/ticket/3003)还不支持它们。

除此之外，您可能想尝试`/`在路径中添加前导。似乎您正在尝试执行绝对路径，但如果没有前导斜杠，它就不会做您认为会做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-07T09:39:12.460

对于 cakephp 3.6 它应该是这样的：

```
'default' => [
    'className' => 'Cake\Database\Connection',
    'driver' => 'Cake\Database\Driver\Sqlite',
    'persistent' => false,
    'host' => 'localhost',
    'port' => '',
    'login' => '',
    'password' => '',
    'database' => 'C:\Bitnami\wampstack-5.6.39-0\apache2\htdocs\cake36\cake36.sqlite',
    'schema' => 'test',
    'prefix' => '',
    'encoding' => ''
], 
```

# asp.net - 使用javascript在Gridview的列中隐藏/取消隐藏控件

> ID：1021983
> 
> 赞同：0
> 
> 时间：2009-06-20T16:40:00.650
> 
> 标签：asp.net, javascript, gridview

在 gridview 的列中，我有一个链接按钮和一个标签。

单击链接按钮时，我想隐藏/取消隐藏标签。我想使用 javascript，因为我不想要任何回发。

我的 java 脚本函数需要接收与单击的链接按钮相对应的标签的引用。（然后我将使用 document.getElementById(inputRef).style.display) 来切换状态。

如何将所需标签的引用传递给 javascript 函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T16:44:01.010

一种方法是在网格的 ItemDataBound 事件处理程序中管理它，并将标签的 ClientID 作为该 JavaScript 调用的字符串参数传递。

例如 myLinkBut​​ton.attributes.Add("onclick","javascript:HidColumn('" + myLabel.ClientID + "');");

# sql - 在 SQL 中，BETWEEN 语句是否必须采用 BETWEEN 最低和最高形式？

> ID：1021988
> 
> 赞同：1
> 
> 时间：2009-06-20T16:43:41.057
> 
> 标签：sql, sql-server, select, between

例如，如果我这样做：

```
SELECT * FROM Users WHERE UserId BETWEEN 100 AND 1 
```

结果会是什么？

**编辑：**对不起，你是对的，我应该指定。我不想知道将返回的确切行数，我只想知道它是否会返回介于 1 和 100 之间的行，或者它是否会返回从 t​​o `min(UserId)`1 和 100 to 的行`max(UserId)`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-20T16:49:50.590

```
a BETWEEN b AND c 
```

是简写

```
b <= a and a <= c 
```

所以 BETWEEN 100 and 1 不会匹配任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T16:49:39.840

这可能取决于您的 RDBMS，但为什么不尝试一下呢？在 MySQL 上，我从 BETWEEN 100 AND 1 查询中没有得到任何行，而我确实从要求 BETWEEN 1 和 100 中得到行。

# c# - 客户端无法通过无线 n/w 联系 Web 服务器 - 通过 CODE

> ID：1021994
> 
> 赞同：0
> 
> 时间：2009-06-20T16:45:02.507
> 
> 标签：c#, wireless, getresponsestream

```
//code in the client
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://192.168.0.5/test");
WebResponse response = request.GetResponse(); 
```

我的工作组中有两台机器的 LAN 设置。- 192.168.0.1（那是客户端） - 192.168.0.5（那是网络服务器）

上面的代码在简单的有线网络中运行良好。

当我在无线网络上运行它时，即使用 wi-fi 路由器而不是交换机进行网络设置时，代码不起作用 - 它卡在 GetResponse 上。

奇怪的是，当我打开浏览器并输入 - [http://192.168.0.5/test](http://192.168.0.5/test) - 它可以工作......页面出现了！

我错过了什么？为什么客户端无法通过代码联系服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-20T17:32:39.223

“卡住”是指它挂起吗？

这是程序中的第一个请求，还是有其他请求？“挂起”Web 请求的一个常见原因是未能关闭/处理 Web 响应。一旦您向同一服务器发出了两个（默认情况下）请求，您就必须等待响应最终确定。

我不知道为什么这只会在无线网络连接而不是有线连接的情况下影响您，但如果您不关闭网络响应（最好使用`using`语句），我建议您从一开始就修复它。

接下来，使用[WireShark](http://wireshark.org)跟踪网络。这应该可以很容易地查看请求是否实际发送、响应是否返回等。