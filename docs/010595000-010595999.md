# StackOverflow 问答 10595000-10595999

# android - Android模拟器显示大小

> ID：10595000
> 
> 赞同：0
> 
> 时间：2012-05-15T06:06:37.673
> 
> 标签：android, size, emulation, resolution

我正在开发一个在android上运行的应用程序。我有一个像素分辨率为 10.1 英寸平板显示器的模拟器，但模拟器一直在这个大屏幕上更小的区域运行我的应用程序。有人知道如何使用 AVD 正确配置模拟器吗？顺便说一句，我使用 IntelliJ 作为 ide 而不是日食。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:10:20.367

假设您必须为 Galaxy Tab 10.1 英寸申请，那么您必须执行以下操作：

*   打开 Android SDK 和 AVD 管理器
*   点击可用包
*   展开第三方加载项。在那里你会看到三星电子的附加组件。
*   安装插件后，创建一个新的模拟器。在 Target 下，您将看到新的 Samsung Tab 设置，选择它。

# android - 启动服务后视图未显示

> ID：10595002
> 
> 赞同：0
> 
> 时间：2012-05-15T06:06:45.217
> 
> 标签：android, service

我正在从活动启动服务。这里的问题是服务开始启动但活动没有显示。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);
           startService(new Intent(this, ServerActivity1.class));

        } 
```

在服务中，我使用计时器通过这样的简单功能打开套接字。服务启动，因为我可以在日志中看到，但视图（R.layout.main）永远不会显示，并且在一段时间后强制显示关闭弹出。

```
 @Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "sasa", Toast.LENGTH_SHORT).show();
    timer.scheduleAtFixedRate( new TimerTask() {
        public void run() {
            read();

        } 
    }, 0,50000);
    Log.i("NoServer","Started1");   
    read();

}

@Override
public void onDestroy() {

}

@Override
public void onStart(Intent intent, int startid) {
     Log.i("Home","Listening on IP: " + SERVERIP+"\n");
}

public  void  read()
{
    SERVERIP = getLocalIpAddress();
   Log.i("Home","Listening on IP: " + SERVERIP+"\n");
               if (SERVERIP != null) {
                Log.i("Home","Listening on IP: " + SERVERIP+"\n");
                }
                try {
                    serverSocket = new         ServerSocket(SERVERPORT);
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
                   while (true) {
                      Socket client;
                      Log.i("Home","Listening on IP: " + SERVERIP+"\n");
                    try {
                            client = serverSocket.accept();
                            Log.i("Home","Listening on IP: " + SERVERIP+"\n");
                           BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                            while ((line = in.readLine()) != null) {                                                            
                            serverSocket.close();
                            read();
                        }

                       } catch (Exception e) {

                           e.printStackTrace();
                       }
                   }
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:29:48.450

这是因为您的 UI 线程 ( **main** ) 正在由服务共享，除非您在清单中的单独进程中定义您的服务。如果您在活动的**onResume**方法中启动服务，那么在此之前您的服务将可见，但仍可能导致*ANR*，具体取决于完成服务请求所需的时间（最多 5 秒）。

最好将服务的所有套接字内容（或任何昂贵的调用）放在单独的**线程**中。在这种情况下，您的应用不会因 ANR 而挂起或崩溃。

您应该在 Service 内的单独线程中使用`ThreadHandler`and`Handler`来执行**消息**和/或**Runnables 。**

# android - 捕获 IP 摄像机流并在我的网站上发布

> ID：10595005
> 
> 赞同：4
> 
> 时间：2012-05-15T06:06:48.777
> 
> 标签：android, html, networking, camera, video-streaming

我正在使用 IP Cam（适用于 Android 手机的应用程序）流式传输实时视频。它基本上用作基本的 IP 摄像机。它给了我提要所在的 URL。`http://192.168.2.32:8080/`当我连接到我的 WiFi 网络时，它看起来像这样。视频流位于`http://192.168.2.32:8080/videofeed`。

我想捕获相机的视频源`http://192.168.2.32:8080/videofeed`并将其嵌入到 HTML5 播放器（我打算使用的是 Video JS）或如果 HTML5 不起作用（但更喜欢 HTML5）的 Flash 播放器。HTML5 播放器要求我提供源文件（例如 .mp4、webm、mov 等），但`http://192.168.2.32:8080/videofeed`没有源文件。它只是 HTML 流。

我的问题是如何将该视频流嵌入到我的 HTML5 播放器中并将其发布在我的网站上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:51:45.873

据我所知，该应用程序已经将流式传输到网页，并且此页面有视频供您查看。因此，您想要流式传输已经在流式传输的内容。

您可以尝试注册像 www.no-ip.com 这样的动态 dns 来获取您的网络的 url，将您的路由器更改为接受端口 8080 上的传入连接，然后在您的网站上使用带有动态 dns url 的 iframe。

我曾经将很多现场音乐会流式传输到网站，但我有一个连接到计算机的相机，并使用 Adob​​e Flash Media Streaming（免费）连接到运行 Wowza 流的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:45:11.890

您需要获取相机正在捕获的数据，将其解码为某种常见格式。RGB 或 YUV2 或其他。将其编码为 Vp8/webm 或 thora/ogg 。h264/Mp4 不会这样做，因为它需要一个名为 mdat 的 mp4 文件中的特殊标头（除非它是分段的 mp4）。

客户端视频标签向您的手机 ip/您处理该应用程序的 http GET 的位置发出请求，持有该 http 连接并开始流式传输到它。这有点像长轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T01:02:42.260

大多数 IP 摄像机都有获取原始视频流的方法。使用 RTSP 或 RTMP

我建议您获取 «camera» 的 steeam URI，类似于`rtsp://<camera-ip>:<some-port>`or `rtmp://<camera-ip>:<some-port>`。这是 IP 摄像头的一个常见功能，即使是那些在手机上模拟的摄像头，所以可能在文档中提到它，或者可以在应用程序配置中启用/设置。

如果没有文档，您可以使用 Chrome 访问网页上的提要并打开开发者工具以查看页面的实际代码来进行一些研究，URI 可能在他们提供的嵌入式播放器上可见。

获得它后，使用 VLC 打开该流并查看属性（编码、帧速率、大小等），然后您可以为您的站点选择兼容的嵌入式播放器。

希望能帮助到你！

///巴勃罗

# clojure - 使用 clojure.data.xml 从 Clojure 发出 XML。

> ID：10595007
> 
> 赞同：2
> 
> 时间：2012-05-15T06:07:08.993
> 
> 标签：clojure, xml-serialization, lisp

我需要将 Clojure 数据结构序列化为 XML，但我对如何发出集合感到困惑。为了更具体，假设我有一个 Clojure 映射，如下所示：

```
 (def parking-lot {:parking-lot #{
                         {:car {:color "red", :make "nissan", :year 2003}}
                         {:car {:color "blue", :make "toyota", :year 2001}}
                         {:car {:color "black", :make "honda", :year 2010}}}}) 
```

这只是一张地图，其中一个元素的值是一组“汽车”项目。现在，假设我想序列化这个映射以生成以下 XML：

```
 <? xml version="1.0" ?>
    <parking-lot>
      <car color="red" make="nissan" year="2003" />
      <car color="blue" make="toyota" year="2001" />
      <car color="black" make="black" year="2010" />
    </parking-lot> 
```

在网上搜索有关如何在 Clojure 中最好地解析/发出 XML 的文档使我找到了[clojure.data.xml](https://github.com/clojure/data.xml)库，这就是我正在使用的。

这是一个关于如何使用 clojure.data.xml 发出一些 XML 的简单示例：

```
 REPL> (use 'clojure.data.xml)

        => nil
    REPL> (emit-str (element :parking-lot {}))

        => "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
            <parking-lot></parking-lot>" 
```

一个稍微复杂一点的例子：

```
 REPL> (emit-str (element :parking-lot {}
              (element :car {:color "yellow" :make "ford" :year "2000"})
              (element :car {:color "purple" :make "chevrolet" :year "1977"})))

        => "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
            <parking-lot>
                <car color=\"yellow\" year=\"2000\" make=\"ford\"></car>
                <car color=\"purple\" year=\"1977\" make=\"chevrolet\"></car>
            </parking-lot>" 
```

在这里，您看到“元素”函数的第三个参数确实可以是对“元素”的可变数量的调用。在没有深入查看“元素”函数的文档的情况下，我想我假设“元素”将被重载，以将一系列元素项作为其第三个参数。因此，没有查看文档，我只是继续编写了一小段代码来做到这一点：

```
 REPL> (emit-str (element :parking-lot {}
              (map (fn [car] (let [carattrs (:car car)]
                       (element :car {:color (:color carattrs),
                                      :make (:make carattrs),
                                      :year (:year carattrs)}))) 
                   (:parking-lot parking-lot)))) 
```

我希望这会奏效，但可惜它没有。问题是“元素”函数的第三个参数不能是序列本身。

所以，在这一点上，我有点不知道该怎么做。我对 Lisp 和 Clojure 还是比较陌生，所以如果我的下一个想法是白痴，请放轻松。所以我的想法是，这会是宏的用例吗？即，我是否应该创建一个宏，将一组汽车（或任何 coll）作为其输入，并将其项目作为单独的 s 表达式输出？例如，我在想一个行为如下的宏：

```
 REPL> (defmacro flatten-as-elements [coll-of-cars] ...)
    REPL> (flatten-as-elements #{ {:color "blue" :model "honda" year "2000"}
                                  {:color "yellow" :model "ford" year "2011"}})
        => (element :car {:color "blue" :model "honda" year "2000"})
           (element :car {:color "yellow" :model "ford" year "2011"}) 
```

至少在我看来，这样一个宏的输出将适合作为“元素”函数的第三个参数，并且会产生我想要的目标。当然，我担心的是我忽略了一些完全明显的解决方案，并且在这里使用宏是被误导的。非常感谢 SO 社区的任何帮助！先感谢您！

-保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:50:42.473

您要求的转换通常是不可能的，因为您有关于什么应该是属性和什么是子元素的“隐藏”信息。您可以编写这个自定义的 flatten-as-elements 函数或任何其他函数，然后如果您在整个过程中插入一堆特定于领域的知识，您就可以进行序列化。

但实际上，您应该在 clojure 中使用 XML 的两种流行“表示”之一：或者将您的数据写为

```
{:tag :parking-lot
 :content [{:tag :car :attrs {:color "red", :make "nissan", :year 2003}}
           {:tag :car :attrs {:color "blue", :make "toyota", :year 2001}}
           {:tag :car :attrs {:color "black", :make "honda", :year 2010}}]} 
```

我认为 data.xml 可以很简单地为您发出，或者使用更简洁的打嗝样式，带有标签的向量和多个元素的列表：

```
[:parking-lot (list [:car {:color "red", :make "nissan", :year 2003}]
                    [:car {:color "blue", :make "toyota", :year 2001}]
                    [:car {:color "black", :make "honda", :year 2010}])] 
```

您可以使用`(emit (sexp-as-element [...]))`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T07:04:21.380

您可以使用`apply`将参数拼接到函数调用中：

```
(emit-str
 (apply element :parking-lot {}
        (map (fn [car] (let [carattrs (:car car)]
                         (element :car {:color (:color carattrs),
                                        :make (:make carattrs),
                                        :year (:year carattrs)}))) 
                           (:parking-lot parking-lot)))) 
```

# mono - mono_delegate_to_ftnptr：函数调用挂起

> ID：10595008
> 
> 赞同：1
> 
> 时间：2012-05-15T06:07:15.310
> 
> 标签：mono, interop, unmanaged, managed, internal

我正在将单声道 2.10.8 嵌入到我的应用程序中，并且在注册时遇到了一些功能问题`mono_add_internal_call`

假设我有托管方法：

```
internal delegate void Win32ServiceHandler(long statusCode);

internal static class Win32Service
{
  [MethodImpl(MethodImplOptions.InternalCall)]
  public static extern void Test(Win32ServiceHandler handler);
} 
```

这是非托管定义：

```
void icall_TestDelegateCallback(MonoDelegate *ftn) {
  LPHANDLER_FUNCTION f = (LPHANDLER_FUNCTION)mono_delegate_to_ftnptr(ftn);
  f(SERVICE_CONTROL_STOP);
} 
```

和一些代码来测试：

```
protected virtual void ServiceHandler(Win32ServiceControl statusCode)
{   
  Console.WriteLine("here");
}

public void MakeTest()
{
  Console.WriteLine("before");
  Win32Service.Test(this.ServiceHandlerInternal);
  Console.WriteLine("after");
} 
```

我从控制台应用程序运行它，当我调用 MakeTest() 时，输出是：

```
before
here 
```

并且应用程序永远不会返回。

实际上这是一个简化的例子。在实际程序中，我需要将函数指针作为回调传递给`RegisterServiceCtrlHandler`诸如`mono_runtime_invoke`（顺便说一句工作正常）之类的东西不是我需要的。

问题是调用从 MonoDelegate 获得的函数指针的正确方法是什么？还是将其作为回调传递的任何其他正确方法？

我的平台是 Windows 7 x64

**升级版：**

有趣的发现。一旦我将代码更改为：

```
internal static class Win32Service
{
  [MethodImpl(MethodImplOptions.InternalCall)]
  public static extern void Test(Action handler);
} 
```

和

```
typedef VOID (*TESTFTN)();

void icall_TestDelegateCallback(MonoDelegate *ftn) {
  TESTFTN f = (TESTFTN)mono_delegate_to_ftnptr(ftn);
  f();
} 
```

和：

```
public void MakeTest()
{
  Console.WriteLine("before");
  Win32Service.Test(() => Console.WriteLine("here"));
  Console.WriteLine("after");
} 
```

一切都很好。所以问题在于将 long 编组为 DWORD？在这如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:54:44.083

DWORD 是 32 位整数类型，而 C# 中的 long 是 64 位类型。

# java - 从mysql表中获取元素到arraylist

> ID：10595011
> 
> 赞同：1
> 
> 时间：2012-05-15T06:07:20.450
> 
> 标签：java, mysql, jdbc, arraylist

我有一个看起来像这样的 ArrayList：

```
[
1 2011-05-10  1  22.0, 
2 2011-05-10  2  5555.0, 
3 2011-05-11  3  123.0, 
4 2011-05-11  2  212.0, 
5 2011-05-30  1  3000.0, 
6 2011-05-30  1  30.0, 
7 2011-06-06  1  307.0, 
8 2011-06-06  1  307.0, 
9 2011-06-06  1  307.0, 
10 2011-06-08  2  3070.0, 
11 2011-06-03  2  356.0, 
12 2011-05-10  2  100.0, 
13 2011-05-30  1  3500.0, 
14 2011-05-10  3  1000.0, 
15 2011-05-10  3  1000.0, 
16 2011-05-07  1  5000.0, 
17 2011-05-07  4  500.0, 
18 2011-08-07  3  1500.0, 
19 2011-08-08  6  11500.0, 
20 2011-08-08  4  11500.0, 
21 2011-08-08  7  11500.0, 
22 2011-06-07  8  3000.0] 
```

这是我如何得到这个数组列表的代码：

```
@Override
    public ArrayList<Expenses> getExpenses() {
        ArrayList<Expenses> expenses = new ArrayList<Expenses>();
        try {
            Statement stmt = myConnection.createStatement();
            ResultSet result = stmt.executeQuery("SELECT * FROM expenses");
            while(result.next()){

                Expenses expense = new Expenses();
                expense.setNum(result.getInt(1));
                expense.setPayment(result.getString(2));
                expense.setReceiver(result.getInt(3));
                expense.setValue(result.getDouble(4));

                expenses.add(expense);

                }
        }
            catch (SQLException e){
                 System.out.println(e.getMessage());
             }
        return expenses;
    } 
```

但我想得到一个数组列表，这样数组的每个元素都不是表格的行（我现在拥有的），但表格的每个单独元素都应该是数组的元素（[1, 2011-05 -10, 1, 22.0, 2, 2011-05-10, 2, 5555.0, 3, 2011-05-11, 3, 123.0,]. 有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:13:18.230

您可以添加到不同类型的 ArrayList 元素的唯一方法是将它们视为一般对象。但是，您已经拥有的代码要好得多。

```
@Override
public ArrayList<Object> getExpenses() {
    ArrayList<Object> expenses = new ArrayList<Object>();
    try {
        Statement stmt = myConnection.createStatement();
        ResultSet result = stmt.executeQuery("SELECT * FROM expenses");
        while(result.next()) {

            expenses.add(new Integer(result.getInt(1)));

            expenses.add(result.getString(2));
            expenses.add(new Integer(result.getInt(3)));
            expenses.add(result.getDouble(4));
        }
    }
    catch (SQLException e) {
        System.out.println(e.getMessage());
    }
    return expenses;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:15:48.457

由于您在评论中说您希望获得`ArrayList`of `Strings`，因此以下内容应该有效：

```
@Override
public ArrayList<String> getExpenses() {
    ArrayList<String> expenses = new ArrayList<String>();
    try {
        Statement stmt = myConnection.createStatement();
        ResultSet result = stmt.executeQuery("SELECT * FROM expenses");
        while (result.next()) {
            expenses.add(result.getString(1));
            expenses.add(result.getString(2));
            expenses.add(result.getString(3));
            expenses.add(result.getString(4));
        }
    }
    catch (SQLException e) {
        System.out.println(e.getMessage());
    }
    return expenses;
} 
```

[JDBC 规范](http://download.oracle.com/otndocs/jcp/jdbc-4.0-fr-eval-oth-JSpec/)要求（在附录 B 中）大多数 SQL 类型（包括此处使用的所有类型）都可以使用`Statement.getString()`.

PS 完成后立即关闭每个 JDBC 语句被认为是一种很好的做法。这通常在一个`finally`块中完成（或在 Java 7 中，使用`try`-with-resources 构造）。见[https://stackoverflow.com/a/10514079/367273](https://stackoverflow.com/a/10514079/367273)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T06:16:14.860

```
@Override
public ArrayList<String> getExpenses() {
    ArrayList<String> expenses = new ArrayList<String>();
    try {
        Statement stmt = myConnection.createStatement();
        ResultSet result = stmt.executeQuery("SELECT * FROM expenses");
        while(result.next()){

            String expense = null;
            setExpense(result.getInt(1).toString());
expenses.add(getExpense());                
setExpense(result.getString(2));
expenses.add(getExpense());                
setExpense(result.getInt(3).toString());
expenses.add(getExpense());                
setExpense(result.getDouble(4).toString());
expenses.add(getExpense());                

            }
    }
        catch (SQLException e){
             System.out.println(e.getMessage());
         }
    return expenses;
}
// make getter setters of expense accordingly 
```

# c - 同步父子进程

> ID：10595012
> 
> 赞同：0
> 
> 时间：2012-05-15T06:07:41.540
> 
> 标签：c, unix, synchronization, systems-programming

我想同步父进程和子进程以交替将 1 到 10 打印到文件中。并输出哪个进程打印了这个数字。以下代码交替打印，但数字相同。请帮帮我！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <unistd.h>

#define MSGSIZE 16
int parent= 1;
int n=-1;
main ()
{
  int i;
  char *msg = "How are you?";
  char inbuff[MSGSIZE];
  int p=0;
  FILE *fp1,*fp2;
  pid_t ret;

  ret = fork ();
  if (ret > 0)
    {
      i = 0;
      while (i < 10)
    {

      n++;
     // sprintf(msg, "%d", n);
     // fp=fopen("abc.txt","a");
     // write (p[1], itoa(n,msg,MSGSIZE), MSGSIZE);
     // sleep (2);
    // fclose(fp);
      //read (p[0], inbuff, MSGSIZE);

    fp1=fopen("abc.txt","r");
    fscanf(fp1,"%d",&n);
    fclose(fp1);
    fp1=fopen("abc.txt","w");
     fprintf(fp1,"%d",n); 
    printf("Parent: %d\n", n);
      i++;
    fclose(fp1);
    sleep(2);

    }
    exit(1);
    }
  else
    {
      i = 0;
      while (i < 10)
    {

      n++;
      //sleep (1);
     // read (p[0], inbuff, MSGSIZE);

     fp2=fopen("abc.txt","r");
     fscanf(fp2,"%d",&n);
     fclose(fp2);
     fp2=fopen("abc.txt","w");

     fprintf(fp2,"%d",n);        
      printf("Child: %d\n", n);
           i++;

     sleep(2);

    }
    }
  exit (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:23:26.363

那是因为进程不共享内存，所以基本上`n`每个进程的你都是不同的。为此，您需要使用`inter-process-communication`，Linux 提供了几种方法来做到这一点：

[http://tldp.org/LDP/lpg/node7.html](http://tldp.org/LDP/lpg/node7.html)

一般来说，您只需要找到一种`n`在父进程和子进程之间共享值的方法。

注意：对于用户线程，此问题不会出现，因为同一进程上的用户线程共享内存。您只需要同步对它的访问。此外，请小心，因为根据您对进程使用的方法，您可能还需要同步访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:29:49.297

如果您正在考虑更改变量的相同内存位置，那么这是不可能的，因为两个进程具有不同的地址空间。在线程的情况下你可以实现同样的事情。

# c - 为参数“类型名称”指定的 C 函数指针错误存储类

> ID：10595013
> 
> 赞同：1
> 
> 时间：2012-05-15T06:07:50.223
> 
> 标签：c, gcc, callback, function-pointers, nesc

我目前有一段代码，我正在使用函数指针作为回调。我遇到了来自 gcc 的错误，说明“为参数‘类型名称’指定了存储类”相关的代码部分是：

```
error_t addCommand(uint8_t command, void  (*callback)(uint16_t,uint8_t)){ 
```

这实际上是使用 TinyOS 的 nesC 语言，但它似乎是一个 C 问题。在我对该问题的研究中，我发现建议主要来自以下两个问题之一：

1.  标头有问题（缺少分号）
2.  传递具有静态或易失性值的函数指针（即`void (*callback)(volatile int, uint8_t)`

据我所知，我已经消除了问题 1。问题 2 只是一个问题，如果`uint16_t`或者`uint8_t`是 volatile 的静态（我对这些类型没有太多经验）。非常感谢有关如何解决此问题的任何提示/答案。

此外，如果有人熟悉 nesC，确切的代码看起来更像这样：

```
command error_t CommandEngine.addCommand(uint8_t command,
                                         void  (*callback)(uint16_t,uint8_t)) { 
```

nesC 添加到 C 语言中的内容可能会导致此错误，但我认为情况并非如此。

编辑：在某种程度上，它是 nesC。事实证明，我是个白痴，当 nesC 使用 command 并在编译之前转换为某个 C 代码块时，我使用 command 作为变量名。感谢大家将其转换为 C 代码的想法，因为这让我意识到了这个问题。我真的应该想到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:52:42.923

将 typedef 用于函数指针通常很好。它可能会解决您的问题，并且肯定会更具可读性：

```
typedef void (*callback_t)(uint16_t,uint8_t);
error_t addCommand(uint8_t command, callback_t callback)){ 
```

如果它不能解决问题，它至少会缩小范围——你会看到问题出在 typedef 还是函数上。

您还应该尝试弄清楚它是 nesC（我对此一无所知）还是 C。尝试删除 nesC 的特定部分并使用 gcc 编译，看看会发生什么。

# python - Virtualenv 和 Python ucs-4

> ID：10595014
> 
> 赞同：6
> 
> 时间：2012-05-15T06:07:52.440
> 
> 标签：python, virtual

如何将现有的 virtualenv python 转换为与 UCS4 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-07T18:05:01.713

Your question does not make much sense to me as it does lacks a lot of information.

Based on my Unicode experience, I would believe that you are using Python on Windows, probably a Python 2\.

UCS-4 is just one Unicode encoding, which happens not to be the one used internally by Python.

Here is something that would help you debug the issue [How to find out if Python is compiled with UCS-2 or UCS-4?](https://stackoverflow.com/questions/1446347/how-to-find-out-if-python-is-compiled-with-ucs-2-or-ucs-4)

And regarding modules, you need to reinstall all the binary ones, the pure python ones would not need any change.

# image-processing - 如何从相机捕获的图像中计算对象的总像素数？

> ID：10595015
> 
> 赞同：1
> 
> 时间：2012-05-15T06:07:53.503
> 
> 标签：image-processing, opencv, image

我有一个颜色的对象，我需要计算捕获图像中对象占用的确切像素数。我怎样才能做到这一点？我想在 Opencv 中做到这一点。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:59:34.527

OpenCV 中有内置函数。

1）阈值图像，使您需要的对象是白色的，而所有其他的东西都是黑色的。

既然你已经有了对象，我想你已经完成了这一步。如果没有，请在 opencv 中使用[阈值函数](http://opencv.itseez.com/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#threshold)

2）在图像中找到轮廓

为此使用[FindContours 函数](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)。

3）现在找到你需要的物体轮廓的面积，也就是它占据的像素数。

为此使用[ContourArea 函数](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#contourarea)

**额外的 ：**

不仅是一个区域，您还可以找到很多关于对象的其他信息，例如周长、质心、平均值、方向等。[查看这篇文章以查看它们](http://opencvpython.blogspot.in/2012/04/contour-features.html)。代码是用 Python 编写的，但你不会发现它有任何难以理解的地方。

# database - 用于关键任务应用程序的 Cubrid DB

> ID：10595016
> 
> 赞同：0
> 
> 时间：2012-05-15T06:07:56.917
> 
> 标签：database, scalability, cubrid

我想知道你们中有多少人听说过或使用过 Cubrid 数据库？

1.  Cubrid 从事数据库业务多久了？
2.  有可用的基准吗？
3.  Cubrid 可以在生产中使用吗？
4.  扩展它有多容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:05:30.240

您可以在此演示文稿中找到您需要的信息：[在野外生长。CUBRID 数据库开发人员的故事。](http://www.slideshare.net/profyclub_ru/growing-in-the-wild-the-story-by-cubrid-database-developers-esen-sagynov-eugene-stoyanovic)

# android - 纬度和经度的格式是什么？

> ID：10595017
> 
> 赞同：0
> 
> 时间：2012-05-15T06:07:58.710
> 
> 标签：android, google-maps, google-maps-api-3

我从客户端获得了 sql lite 数据库。在该数据库中存在纬度和经度。我看到了很多 lat & long 格式，但我不明白这种格式。相同的格式在 iphone 应用程序中工作。我不知道如何将这种格式用于地图活动。请帮助我解决这个问题。检查我在数据库中得到的格式

```
latitude=5.128.220.813.451.690 longitude=4.842.159.586.816.360 
```

数据库中的一些地方，比如

```
lat=50.556.213 & long=-96.633.602 
```

如何解决这个问题呢。帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:27:30.323

检查这个

[http://www.accessgrid.org/node/767](http://www.accessgrid.org/node/767)

![在此处输入图像描述](../Images/cefa9cf82fd8688779be63b93ebb40a3.png)

# iphone - 在 iPhone 中绘制高尔夫球场地图

> ID：10595019
> 
> 赞同：2
> 
> 时间：2012-05-15T06:08:16.767
> 
> 标签：iphone

我正在为 iPhone 做一个高尔夫 gps 应用程序。为此，我需要在 iPhone 设备上显示高尔夫球场地图。我在互联网上搜索过。有很多方法和服务提供商可以进行高尔夫球场测绘（航拍图）。

供你参考 ：

[http://sites.google.com/site/mapmakerpedia/maps-101/how-to-map-a-golf-course](http://sites.google.com/site/mapmakerpedia/maps-101/how-to-map-a-golf-course)

有人说我们可以使用谷歌图像。但我的问题是

```
 1\.  How we could bring that golf course map data into iPhone app?
 2\.  Is there any API or method available for that?
 3\.  In which format, that golf course map data file will be? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:21:13.087

首先，您需要为您的高尔夫球场收集经纬度点。如何做到这一点取决于您，而不是真正的 iPhone 问题。根据您拥有的点数，要定义球道和果岭（可能还有危险？），您可能希望将所有点存储在一个 XML 文件中，该文件将作为资源捆绑在您的应用程序中。或者，如果内容需要定期更新，也许您将其存储在网络服务器上。或两者。但是，该文件可能是这样的：

```
<golf-courses>
  <golf-course>
     <name>Pebble Peach</name>
     <par>72</par>
     <fee>$200</fee>
     <holes>
        <hole>
           <number>1</number>
           <par>4</par>
           <fairway>
              <points>
                 <point><lat>-122.1231231</lat><lon>36.0131231</lon></point>
                 <point><lat>-122.1231232</lat><lon>36.0131235</lon></point>
                 <point><lat>-122.1231237</lat><lon>36.0131235</lon></point>
                   ...
              </points>
           </fairway>
           <green> 
              ...
           </green>
        </hole>
     </holes>
  </golf-course>
...
</golf-courses> 
```

或者，您可以选择使用[KML 之](https://developers.google.com/kml/documentation/kml_tut)类的格式，该格式专为地图叠加层设计。如果您能够获取已存储在 KML 中的现有高尔夫球场数据，这将特别有用。但是，从你的问题来看，听起来你是想自己从一组航空地图中推断出数据。

然后，您需要在启动时将 XML 数据（或 KML，或 plist 数据，或[Core Data](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)，或者您存储它的方式）读取到您的应用程序中。

然后，您可能会有一个 UIViewController 遍历数据，并将课程绘制为多边形。为此，您的视图控制器将使用[MapKit](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)框架，并且您可能会将课程绘制为一堆绿色阴影多边形，使用`MKPolygon`. 您可以看到我在最简单的示例中[发布的其他答案。](https://stackoverflow.com/a/10595682/119114)`MKPolygon`

# c++ - 优先队列堆实现

> ID：10595020
> 
> 赞同：3
> 
> 时间：2012-05-15T06:08:21.870
> 
> 标签：c++, data-structures, priority-queue

我正在编写代码来使用堆实现优先级队列。当我以这个特定的顺序将具有这些优先级的项目输入队列时，`8 10 4 3 7 6 9 5`一旦我开始使用该`get_front()`函数将它们弹出，就会出现错误。

`swap_with_parent()`问题是函数的`while`-loop 中的函数的断言失败`get_front()`。该参数以某种方式增长大于数组中的项目数 many_items。我会发布整个代码，如果有人能发现问题，如果你能告诉我，我将不胜感激。对于缺乏评论，我提前道歉，我希望我所发生的事情足够清楚。

```
// INVARIANT for the PriorityQueue Class:
//   1\. The member variable many_items is the number of items in the
//      PriorityQueue.
//   2\. The items themselves are stored in the member variable heap,
//      which is a partially filled array organized to follow the usual
//      heap storage rules from Chapter 11 of the class notes.
// NOTE: Private helper functions are implemented at the bottom of this
// file along with their precondition/postcondition contracts.

#include <assert.h>    // Provides assert function
#include <iomanip>   // Provides setw
#include <iostream>  // Provides cin, cout
#include <math.h>      // Provides log2
#include "pqueue2.h"

using namespace std;

PriorityQueue::PriorityQueue( )
{
    heap[CAPACITY];
    many_items=0;
}

void PriorityQueue::insert(const Item& entry, unsigned int priority)
{
    if(many_items==0)
    {
        heap[many_items].data= entry;
        heap[many_items].priority= priority;
        many_items++;
    }
    else
    {
        heap[many_items].data= entry;
        heap[many_items].priority= priority;
        unsigned int i= many_items;
        many_items++;
        while(parent_priority(i)<priority)
        {
            swap_with_parent(i);
            i=parent_index(i);
        }
    }
}

PriorityQueue::Item PriorityQueue::get_front( )
{
    assert(many_items>0);
    if(many_items==1)
    {
        Item front_value=heap[0].data;
        many_items--;
        return front_value;
    }
    else
    {
        Item front_value=heap[0].data;
        heap[0]=heap[many_items-1];
        unsigned int priority= heap[many_items-1].priority;
        unsigned int k=0;
        while( (k<many_items) && !is_leaf(k) && big_child_priority(k)>priority)
        {
            unsigned int j=big_child_index(k);
            swap_with_parent(big_child_index(k));
            k= j; 
        }
        many_items--;
        return front_value;
    }
}

bool PriorityQueue::is_leaf(size_t i) const
// Precondition: (i < many_items)
// Postcondition: If heap[i] has no children in the heap, then the function
// returns true. Otherwise the function returns false.
{    
    if(((2*i)+1)>many_items)
        return 1;
    else 
        return 0;
}

size_t PriorityQueue::parent_index(size_t i) const
// Precondition: (i > 0) && (i < many_items)
// Postcondition: The return value is the index of the parent of heap[i].
{
    //assert( /*(i>0) && */(i<many_items));
    return (i-1)/2;
}

unsigned int PriorityQueue::parent_priority(size_t i) const
// Precondition: (i > 0) && (i < many_items)
// Postcondition: The return value is the priority of the parent of heap[i].
{
    return heap[ (i-1)/2].priority;
}

size_t PriorityQueue::big_child_index(size_t i) const
// Precondition: !is_leaf(i)
// Postcondition: The return value is the index of one of heap[i]'s children.
// This is the child with the larger priority.
{
    assert(!is_leaf(i));
    if((2*i)+2<many_items)
    {
        if(heap[(2*i)+1].priority>heap[(2*i)+2].priority)
        {
            return (2*i)+1;
        }
        else
        {
            return (2*i)+2;
        }
    }
    else
    {
        return(2*i)+1;
    }
}

unsigned int PriorityQueue::big_child_priority(size_t i) const
// Precondition: !is_leaf(i)
// Postcondition: The return value heap[big_child_index(i)].priority
{
    return heap[big_child_index(i)].priority;
}

void PriorityQueue::swap_with_parent(size_t i)
// Precondition: (i > 0) && (i < many_items)
// Postcondition: heap[i] has been swapped with heap[parent_index(i)]
{
    assert( i>0 && i<many_items);
    OneItemInfo temp_parent=heap[parent_index(i)];
    OneItemInfo temp_child=heap[i];
    heap[i]=temp_parent;
    heap[parent_index(i)]=temp_child;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:25:09.773

I think `is_leaf` is incorrect. The condition should be `(2*i+1 >= many_items)`.

# javascript - 如何获得变化值元素？

> ID：10595023
> 
> 赞同：0
> 
> 时间：2012-05-15T06:09:06.737
> 
> 标签：javascript, asp.net

我在 datalist 中有一个输入

```
<input type="text" value="1" id="txtcount"> 
```

我想在文本更改时获得它的新价值。

我使用此代码，但不适合我。

```
<script>
//look no global needed:)

$(document).ready(function(){
    // Get the initial value
   var $el = $('#txtcount');
   $el.data('oldVal',  $el.val() );

   $el.change(function(){
        //store new value
        var $this = $(this);
        var newValue = $this.data('newVal', $this.val());
   })
   .focus(function(){
        // Get the value when input gains focus
        var oldValue = $(this).data('oldVal');
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:40:57.670

这个怎么样

```
$('#txtcount').change(function() { ... }); 
```

或这个

```
$("#txtcount").keypress(function() { .......}); 
```

或这个

```
$('#txtcount').keyup(function() {..........}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:16:09.370

用这个 ：-

```
$('#txtcount').keyup(function(event) {
  if (event.keyCode == 13) {
    var message =  $('#txtcount').val();
    alert(message);
  } else {
    return true;
  }
}); 
```

或者您可以获取 TextField 的“onTextChanged”事件的值

# php - 我怎样才能让记住我更安全

> ID：10595024
> 
> 赞同：4
> 
> 时间：2012-05-15T06:09:11.307
> 
> 标签：php, session, cookies, passwords

我正在尝试在我的网站上执行“记住我”并将以下代码添加到我的登录脚本中。

密码通过 sha1() 函数运行，用户名在分配给 SESSION 之前被修剪并通过 mysql_real_escape_string() 运行。

我怎样才能使它更安全，防止劫持。

谢谢。

```
if($_POST['remember']) {
    setcookie("CookieUser", $_SESSION['usrename'], time() + 60 * 60 * 24      100, "/");
    setcookie("CookiePass", $_SESSION['password'], time() + 60 * 60 * 24       100);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:19:25.307

记住我，我们使用令牌设置。当用户使用用户名和密码登录系统时，会在数据库中生成一个**令牌**，其中包含相应的用户名、ip 和其他因素。我使用相同的令牌和用户名保存为 cookie，当用户从 cookie 中返回令牌和用户名时，我们再次使用指定的 ip、用户名和其他因素验证令牌，并设置用户登录状态是否匹配所有。

这样我就跳过了将密码存储在 cookie 中并且有点安全的方法。

# python - ctypes 中的 python 和 cdll。无法使用 printf

> ID：10595026
> 
> 赞同：3
> 
> 时间：2012-05-15T06:09:23.860
> 
> 标签：python, printf, ctypes

我是学习Python的初学者。我使用的 python 版本是 3.2.1.1 我正在尝试按照 docs.python.org 的教程学习 ctypes

在交互式提示中，

```
import ctypes
libc = cdll.msvcrt
printf = libc.printf
printf("%d", 42) 
```

它应该返回值 42，但在我的情况下，它返回 0。那么问题是什么？非常感谢。

* * *

现在，在我添加一个 >>>from ctypes import cdll 之后，结果变成了显示这个

```
>>>from ctypes import *
>>>libc = cdll.msvcrt 
>>>printf = libc.printf 
>>>printf("%d", 42)
Traceback (most recent call last):
  File "<stdin>", line1, in <module>
TypeError: 'CDLL' object is not callable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:21:16.053

实际上，它应该返回`2`写入的字节数`stdout`。它似乎在我的 Windows 安装上运行良好（在我添加了缺失的`from ctypes import cdll`. 你在使用 Windows 吗？`msvcrt`是一个仅限 Windows 的 DLL。

# ruby - 以下字符串修改中的引用发生了什么？

> ID：10595029
> 
> 赞同：0
> 
> 时间：2012-05-15T06:09:39.480
> 
> 标签：ruby, reference

[我从本教程](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html)中了解到如何在 Ruby 中进行引用：

```
1.9.3-p194 :007 > person1 = "Tim"
 => "Tim" 
1.9.3-p194 :008 > person1.class
 => String 
1.9.3-p194 :009 > person1.object_id
 => 73847870 
1.9.3-p194 :010 > person2 = person1
 => "Tim" 
1.9.3-p194 :011 > person2.class
 => String 
1.9.3-p194 :012 > person2.object_id
 => 73847870 
1.9.3-p194 :013 > person1[0] = "J"
 => "J" 
1.9.3-p194 :014 > person1
 => "Jim" 
1.9.3-p194 :015 > person2
 => "Jim" 
1.9.3-p194 :016 > person3 = person2.dup
 => "Jim" 
1.9.3-p194 :017 > person3.object_id
 => 75146000 
1.9.3-p194 :018 > person2 = "John"
 => "John" 
1.9.3-p194 :019 > person1
 => "Jim" 
1.9.3-p194 :020 > person1.object_id
 => 73847870 
1.9.3-p194 :021 > person2.object_id
 => 75134230 
```

当我试图分配 p​​erson2 在 IRB 中携带不同的字符串时，它变成了一个不同的对象。就 Ruby 的工作方式而言，这是否正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:16:10.583

`person1`，`person2`并且`person3`不是对象——它们是变量。字符串本身就是对象。变量只是引用对象的名称。因此，当您将不同的对象（在本例中为字符串）分配给变量时，是的，该变量然后引用了不同的对象。

# jquery - Jquery Tablesorter 插件和拖放功能

> ID：10595030
> 
> 赞同：1
> 
> 时间：2012-05-15T06:09:43.707
> 
> 标签：jquery, tablesorter, droppable

我在正在构建的站点上使用 Jquery Tablesorter 插件，并且遇到了使用 Jquery 可拖放功能拖放内容的问题。

如果表格有 20 行，并且我已将表格设置为每页仅显示 10 行，我发现我可以拖入和拖出表格的第一页，但是一旦我翻页到第二页，我就失去了拖放。

任何帮助都会很棒。

```
<script type="text/javascript">
$(document).ready(function() {
$("#news-table") 
.tablesorter({widthFixed: false, widgets: ['zebra']}) 
.tablesorterPager({container: $("#pager"), size: 5});
});
</script> 
```

这是初始化表的脚本。这是表格中的一行。具有“news_draggable”类的图像是可以拖动的元素。

```
<div style="width: 100px; height: 100px;" class="droppable ui-droppable" id="target_11">
<img src="../uploads/thumb_p16t4fe2urr012g31e671garcto7.jpg" class="news_draggable ui-draggable" id="11">
</div> 
```

我认为更改表格时需要调用可拖动函数，可以通过单击另一个页面或通过对表格进行排序。我只是不确定如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:52:44.147

寻呼机插件存储和排序内存中的数据，因此在寻呼机插件初始化后，第二页中的行实际上并不存在。您可以*不使用*寻呼机插件，也可以尝试我在[tablesorter](http://mottie.github.com/tablesorter/docs/index.html)的 github 分支中拥有的寻呼机的修改版本。

这是[寻呼机插件](http://mottie.github.com/tablesorter/docs/example-pager.html)演示页面。只需将`removeRows`选项设置为`false`，它应该可以解决此问题。

# box-api - 谁可以使用即时令牌？

> ID：10595031
> 
> 赞同：1
> 
> 时间：2012-05-15T06:09:48.587
> 
> 标签：box-api

我对使用盒子即时令牌感兴趣。文档说它处于“私人测试版”中。内测是什么意思，谁可以参与内测？

另外，我需要做什么才能使我的应用程序进行 /tokens 端点调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:20:08.533

私人测试版 == 如果您有好的用例，请通过 apiATbox[dot]com 联系我们，以便我们为您的 API 密钥启用它。我们仍在处理一些边缘案例，并与测试版的开发人员密切合作以解决这些问题。

# c - 为什么MTK只显示'F'

> ID：10595032
> 
> 赞同：0
> 
> 时间：2012-05-15T06:09:56.157
> 
> 标签：c, serial-port, hex, ascii, microcontroller

我的程序会将 IR 信号作为“0”或“1”存储到 DS89C450 的 xdata 1kByte SRAM 中，然后将其显示在我的 MTK 上。

但是，无论我在红外遥控器上按什么按钮，显示的数据都只显示字符“F”。（我有一个将数据转换为 ASCII 码的 CASE 函数，对于这种情况，“F”= 0x0F）。 [http://img193.imageshack.us/img193/1410/66647882.png](http://img193.imageshack.us/img193/1410/66647882.png)

首先：当接收到 IR 信号时，下降沿中断将触发，每 38us 将每个数据从 pin 存储到 x[i]，并且 Data_Ready 设置为 1。

```
/******************************FALLING EDGE INTERRUPT*************************/
void ex_int0(void)interrupt 0     
{
       unsigned char p;
       unsigned int u;
       unsigned int i;
       EA=0;

       for(i=0;i<500;i++)       //Loop for 500 bytes
       {
          for(u=0;u<8;u++)      //Bit Shift Loop
          { 
             timer0();          //Call timer0 function(38us)    
             x[i] = x[i] << 1;  //Left Bit Shift by 1
             p = Tsignal;       //Store Tsignal to Buffer p
             x[i] |= p;         //OR Masking of p with x[i]

          } 
       }

   EA=1;
   IE1 = 0;              
   Data_Ready = 1;             //Set Data_Ready = 1

 }//end 
```

接下来，将存储数据逐字节转换为 ASCII 码。（例如 1111 1111 = FF）

```
/******************************DISPLAY_BYTE***********************************/
void Display_Byte()
{
   unsigned char Data_LK;
   unsigned char MSB;
   unsigned char LSB;
   unsigned int v;  
   TR1=1;                          //Enable Serial Port                                              
   for(v=0;v<500;v++)
   {    
      Data_LK = x[v];                      //Store x[v] in Data_LK
      MSB = Data_LK >> 4;                  //Shift Right Bits by 4      
      MSB &= 0x0F;                         //Mask bits of MSB
      MSB = lookuptable(MSB);              //Send MSB to lookuptable function                           
      SerialTx(MSB);                       //Send Converted Data to transmit

      LSB = x[v];                          //Store x[v] in LSB
      LSB &= 0x0F;                         //Mask bits of LSB
      LSB = lookuptable(LSB);              //Send LSB to lookuptable 
      SerialTx(LSB);                       //Send converted data to transmit
   }

   Data_Ready = 0;                         //Set Data_Ready to 0
   TR1 = 0;                                //Turn off Serial Port   
} 
```

这是查找表：

```
/***********************LOOKUP TABLE*************************************/
unsigned char lookuptable(unsigned char t)
{
  switch(t)
  {
     case 0x00 : return '0';
     break;
     case 0x01 : return '1';
     break;
     case 0x02 : return '2';
     break;
     case 0x03 : return '3';
     break;
     case 0x04 : return '4';
     break;
     case 0x05 : return '5';
     break;
     case 0x06 : return '6';
     break;
     case 0x07 : return '7';
     break;
     case 0x08 : return '8';
     break;
     case 0x09 : return '9';
     break;
     case 0x0A : return 'A';
     break;
     case 0x0B : return 'B';
     break;
     case 0x0C : return 'C';
     break;
     case 0x0D : return 'D';
     break;
     case 0x0E : return 'E';
     break;
     case 0x0F : return 'F';
     break;
     default: break;
 }// end switch
}// end function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:52:37.123

至少其中一个错误是您没有对调用 lookuptable() 的结果做任何事情，因此您正在传输未转换的 MSB 和 LSB 值。

你可能打算做这样的事情：

```
MSB = lookuptable(MSB);
SerialTx(MSB);
/* ... etc ... */
LSB = lookuptable(LSB);
SerialTx(LSB); 
```

# android - 单击主页键时应用程序关闭所有活动？

> ID：10595035
> 
> 赞同：0
> 
> 时间：2012-05-15T06:10:12.363
> 
> 标签：android

大家好，我正在开发一个有 7 个屏幕的 android 应用程序。当我调试我的应用程序时它工作正常，当我在 4 屏幕上单击主页按钮并再次启动我的应用程序时，它从应用程序进入后台的同一个屏幕/4 屏幕开始，但是当我为我的用户创建 app.apk 文件和当他们使用该应用程序并假设在第 4 个屏幕上按主页键时，他/她重新启动应用程序从登录屏幕/1 屏幕的起始屏幕开始。有没有朋友可以告诉我这里面有什么问题，我能做些什么来解决这个问题。

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.dblist);
    setTitle("Databases");

    try {
        jsonObj = new JSONObject(getIntent().getStringExtra("key"));
        nameArray = jsonObj.names();
        valArray = jsonObj.getJSONArray("DbList");
    } catch (JSONException e1) {

        e1.printStackTrace();
    }

    ArrayAdapter<String> dbName = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1);

    for (Integer i = 0; i < valArray.length(); i++) {

        try {
            String obj = valArray.getJSONObject(i)
                    .getString("DataBaseName").toString();
            dbName.add(obj);
        } catch (JSONException e) {

        }

    }
    setListAdapter(dbName);
}

@Override
protected void onResume() {

    super.onResume();

    // versionUpdate();

    Logout lo = new Logout();
    lo.Check();
    processThreadLogoutTime();

}

final Handler handler = new Handler() {

    @Override
    public void handleMessage(Message msg) {

        super.handleMessage(msg);

        int compareTime = 1;

        if (diff >= compareTime) {

            Intent intent = new Intent(ShowDbList.this, LoginActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);

        }

    }

};

protected void processThreadLogoutTime() {

    new Thread() {

        public void run() {

            cw = new ConnectToWebService();
            getMethod gm = getMethod.GetApplicationDetails;
            String result = cw.getUrl("", gm);
            String urlLogoutTime = result.replaceAll(" ", "%20");
            cw.LogoutTime(urlLogoutTime);
            Logout logout = new Logout();

            diff = logout.LogoutFun();

            handler.sendEmptyMessage(0);

        }

    }.start();

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    String item = (String) getListAdapter().getItem(position);
    Entities.DataBaseName = item;
    try {
        String webAdmin = valArray.getJSONObject(position)
                .getString("WebAdmin").toString();
        Integer uId = Integer.parseInt(valArray.getJSONObject(position)
                .getString("UserID"));
        Entities.webAdmin = webAdmin;
        Entities.userId = uId;
    } catch (JSONException e) {
        // TODO Auto-generated catch block

    }
    Intent intent = new Intent(v.getContext(), Menu.class);
    startActivity(intent);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:04:15.313

仅出于测试目的，我允许通过 URL 下载和安装我的应用 APK。在手机上下载后，可以使用 Android 应用程序安装程序启动它，用户可以选择将其安装到他们的设备上，然后运行它。

考虑我们是否以上述方式下载并运行应用程序。我的应用程序中的主/启动器活动是登录页面（活动 Act1）。一旦用户通过身份验证，他们就会被带到应用程序的主要区域，例如 Activity Act2。所以现在这个任务的当前活动栈是Act1> Act2。

然后我按下手机上的主页按钮并被带到 Android 主屏幕。我通过菜单中的图标重新启动我的应用程序，然后我被带到活动 A，而不是活动 B。活动堆栈现在是 Act1> Act2> Act1，或者现在有两个单独的任务与活动堆栈 Act1> Act2 和 Act1 分别。我想要的是在我重新启动应用程序时回到活动 B。在此状态下按回将带我回到活动 Act2。

这种不良行为仅在我首先通过安装程序打开应用程序时发生，而不是在我通过主屏幕/菜单打开应用程序时发生。

这是由于用于启动应用程序的意图不同。Eclipse 使用没有操作和类别的意图启动应用程序。Launcher 使用具有 android.intent.action.MAIN 动作和 android.intent.category.LAUNCHER 类别的意图启动应用程序。安装程序使用 android.intent.action.MAIN 操作启动一个应用程序，并且没有类别。

从 Eclipse 部署应用程序后，只需继续按下并完全退出应用程序。从手机再次启动它。这可以解决您的问题，但它是临时解决方案。

检查 FLAG_ACTIVITY_BROUGHT_TO_FRONT 效果很好。

```
 @Override  
protected void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) {  
        // Activity was brought to front and not created,  
        // Thus finishing this will get us to the last viewed activity  
        finish();  
        return;  
    }  

    // Regular activity creation code...  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:35:35.363

Kazekage Gaara 是对的：你的应用程序被杀死了。如果您坚持从上次的位置启动应用程序，即使它已关闭，您也需要处理此问题。每次调用 onStop 时都会持久保存状态，并确保将用户发送到 onCreate/onStart 中的正确位置。

# javascript - For 循环中的 getElementById

> ID：10595036
> 
> 赞同：0
> 
> 时间：2012-05-15T06:10:14.207
> 
> 标签：javascript, for-loop, getelementbyid

我正在使用 For 循环遍历数组并返回相关字符串。当我使用 getElementById 时，我只得到最后一个字符串，但如果我使用 document.write，一切都很好。

```
var names = ["John","Jamie","Jessica","Judy","Jeffery","Joy"];
for (i=0,tot=names.length; i < tot; i++) {
 document.getElementById("namelist").innerHTML = names[i];
} 
```

HTML是 `<p id="namelist">list of names go here</p>`

当我跑步时，我得到的是“欢乐”。在这种情况下不能使用 getElementById 吗？有没有其他方法可以在一个元素中获取返回的列表？

我已经阅读了这里的其他一些问题和答案，但没有一个是我想要的

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:13:05.763

您正在循环中设置一个值。

首先，您将其设置为 John。然后你将它设置为 Jamie（所以它不再是 John）等等。

如果要附加一个值，则需要执行以下操作：

```
document.getElementById("namelist").innerHTML = document.getElementById("namelist").innerHTML + names[i]; 
```

（使用`+=`运算符会更短）

如果您只想将全部内容放入其中，则无需使用循环：

```
document.getElementById("namelist").innerHTML = names.join(' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:15:10.850

```
var names = ["John","Jamie","Jessica","Judy","Jeffery","Joy"];
for (i=0,tot=names.length; i < tot; i++) {
 document.getElementById("namelist").innerHTML += names[i];
} 
```

+= 而不是 =

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:16:24.877

如果要打印所有名称，则需要在元素的 innerHTML 中附加所有名称。

```
var names = ["John","Jamie","Jessica","Judy","Jeffery","Joy"];
for (i=0,tot=names.length; i < tot; i++) {
 document.getElementById("namelist").innerHTML += names[i]+"<br/>" ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T06:16:50.210

```
document.getElementById("namelist").innerHTML += names[i] + "<br/>" 
```

很可能是你想要的

我使用的运算符是`+=`where

```
a += b; 
```

是相同的

```
a = a + b; 
```

更简单的方法是

```
var names = ["John","Jamie","Jessica","Judy","Jeffery","Joy"];
document.getElementById("namelist").innerHTML = names[i].join(", "); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T06:18:56.200

快速写下将 = 替换为 +=

```
var names = ["John","Jamie","Jessica","Judy","Jeffery","Joy"];
for (i=0,tot=names.length; i < tot; i++) {
 document.getElementById("namelist").innerHTML += names[i];
} 
```

# mysql - MySQL中是否可以有基于函数的索引？

> ID：10595037
> 
> 赞同：71
> 
> 时间：2012-05-15T06:10:16.127
> 
> 标签：mysql, indexing

我记得在 Oracle 中可以基于函数进行索引，例如`SUBSTRING(id,1,8)`.

MySQL 支持这个吗？如果没有，有没有其他选择？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-15T06:15:21.597

不，不是一般意义上的，我什至不相信 5.6（首次编写此答案时的最新版本）具有此功能。值得注意的是，8.0.13 及以上版本现在支持[功能索引](https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-functional-key-parts)，让您无需下文介绍的触发方法即可实现您所需要的。

如果您运行的是旧版本的`mysql`，*则*可以仅使用列的*前导*部分（此功能已存在很长时间），但不能从第二个或后续字符开始，或任何其他更复杂的功能.

例如，以下使用名称的前五个字符创建索引：

```
create index name_first_five on cust_table (name(5)); 
```

*对于更复杂的表达式，您可以通过在其中包含可索引数据的另一*列来实现类似的效果，然后使用插入/更新触发器来确保正确填充它。

除了为冗余数据浪费空间之外，这几乎是一回事。

而且，虽然它在技术上违反了 3NF，但通过使用触发器来保持数据同步可以缓解这种情况（这是为了提高性能而经常做的事情）。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2016-02-13T14:13:32.150

MySQL 自**8.0.13起支持此功能**

[https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-functional-key-parts](https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-functional-key-parts)

MySQL 8.0.13 和更高版本支持索引表达式值而不是列或列前缀值的功能键部分。使用功能键部分可以对未直接存储在表中的值进行索引。例子：

```
CREATE TABLE t1 (col1 INT, col2 INT, INDEX func_index ((ABS(col1))));
CREATE INDEX idx1 ON t1 ((col1 + col2));
CREATE INDEX idx2 ON t1 ((col1 + col2), (col1 - col2), col1);
ALTER TABLE t1 ADD INDEX ((col1 * 40) DESC); 
```

具有多个关键部分的索引可以混合非功能性和功能性关键部分。

对于 8.0.13 之前的版本，有以下替代方案：

**1\. MySQL 5.7.6 起**

您可以使用自动生成的列来保存带有索引的子字符串：

```
CREATE TABLE SomeTable (
    id CHAR(10),
    sub_id CHAR(8) AS SUBSTRING(id, 1, 8) STORED, INDEX(sub_id)
) 
```

*正如[Benjamin](https://stackoverflow.com/users/759866/benjamin "本杰明")所指出的，InnoDB 支持虚拟列上的二级索引，因此可以省略 STORED 关键字。事实上，虚拟列上的二级索引可能更可取。更多信息在这里：[二级索引和生成的列](https://dev.mysql.com/doc/refman/5.7/en/create-table-secondary-indexes.html "二级索引和生成的列")*

**2\. MySQL 5.7.6之前**

您可以使用由触发器更新的列及其索引：

```
CREATE TABLE SomeTable (
    id CHAR(10),
    sub_id CHAR(8) , INDEX(sub_id)
);

CREATE TRIGGER TR_SomeTable_INSERT_sub_id
    BEFORE INSERT
    ON SomeTable FOR EACH ROW 
    SET NEW.sub_id = SUBSTRING(NEW.id, 1, 8);

CREATE TRIGGER TR_SomeTable_UPDATE_sub_id
    BEFORE UPDATE
    ON SomeTable FOR EACH ROW 
    SET NEW.sub_id = SUBSTRING(NEW.id, 1, 8); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-11-10T00:01:41.183

从 MySQL 5.7.5 开始，这可以使用新的[Generated Columns](http://mysqlserverteam.com/generated-columns-in-mysql-5-7-5/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-20T05:59:45.397

是的，我们可以在 MySQL 中创建功能索引。此功能可从 MySQL 8.0.13 获得。（其他 RDBMS 在其早期版本中具有此功能，但 MySQL 在其版本 8.0.13 中引入了它）。[功能指标](https://mydbops.wordpress.com/2019/06/30/mysql-functional-index-and-use-cases/)

这里我给出了一个在 MySQL8.0 中创建函数索引的例子

这是查询

```
SELECT * FROM app_user WHERE month(createdOn) = 5;

mysql> SELECT * FROM app_user WHERE month(createdOn) = 5;
7e9e2b7bc2e9bde15504f6c5658458ab - 74322 rows in set (5.01 sec) 
```

即使我在 createdOn 列上有索引，它也会执行超过 5 秒以获取 74322 条记录。（优化器不使用 createdOn 列上的索引，因为它被 month() 函数屏蔽）

现在，我使用以下语法在列上创建了一个功能索引。

```
mysql> ALTER TABLE app_user ADD INDEX
         idx_month_createdon((month(createdOn)));
Query OK, 0 rows affected (1 min 17.37 sec) Records: 0 Duplicates: 0
Warnings: 0

mysql> SELECT * FROM app_user WHERE month(createdOn) = 5;
7e9e2b7bc2e9bde15504f6c5658458ab - 74322 rows in set (0.29 sec) 
```

创建功能索引后，它在 0.29 秒内执行。

在Mysql网站上很难找到功能索引文档，以[功能关键部件的名义](https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-functional-key-parts)

而且我们不能删除具有功能索引的列。为此，我们需要首先删除功能索引。

```
mysql> ALTER TABLE app_user DROP COLUMN createdOn;
Cannot drop column 'createdOn' because it is used by a functional
index. In order to drop the column, you must remove the functional
index. 
```

如果您使用 MySQL > 5.7.5，则可以使用[生成的列](http://mysqlserverteam.com/generated-columns-in-mysql-5-7-5/)来实现相同的目的。

# visual-studio-2010 - Openspan 5.2 Visual Studio 2010 插件问题

> ID：10595040
> 
> 赞同：0
> 
> 时间：2012-05-15T06:10:53.673
> 
> 标签：visual-studio-2010

我最近将 openspan 5.1 升级到 5.2，它与框架 4.0 和 Visual Studio 2010 SP1 兼容。现在这给出了错误

## Remotesoft Protector 运行时错误——尚未处理多个 .NET 框架运行时

这似乎是第三方插件错误。签入“clrver”后显示

OpenSpan.Runtime.exe v2.0.50727

我在某些搜索中找不到任何将其更改为 v4.0 版本的选项我刚刚得到一个链接

> [http://www.geospecialling.com/index.php/2011/11/remotesoft-protector-runtime-error-yet-to-handle-multiple-net-framework-runtime/](http://www.geospecialling.com/index.php/2011/11/remotesoft-protector-runtime-error-yet-to-handle-multiple-net-framework-runtime/)

它表明只有“protector.exe”命令才能改变它！因为它嵌入到openspan插件中，所以我只能在那里找到一些dll。请帮助我。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:11:52.153

您需要针对 .NET 3.5 运行时而不是 4.0，此错误将消失

# html - 能不能显示一半 ?

> ID：10595045
> 
> 赞同：1
> 
> 时间：2012-05-15T06:11:47.343
> 
> 标签：html, css, web

使用`<ul>`+ `<li>`：http: [//jsfiddle.net/FsmcM/](http://jsfiddle.net/FsmcM/)

使用`<div>`+ `<span>`：http: [//jsfiddle.net/z47LM/](http://jsfiddle.net/z47LM/)

是否可以显示一半`<li>`？（如`<div>`+ `<span>`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:20:43.640

`float:left`从[http://jsfiddle.net/FsmcM/2/](http://jsfiddle.net/FsmcM/2/)中删除`li`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 <body>
  <ul>
    <li>1234567890</li>
    <li>1234567890</li>
    <li>1234567890</li>
  </ul>
 </body>
</html> 
```

这是您的带有 float:left 注释的 CSS：

```
ul{
    border:1px solid blue;
    width:230px;
    overflow:hidden;
    list-style: none;
    margin: 0;
    padding: 0;
}
ul li{
    /*float:left;*/
    border:1px solid red;
    height:20px;
    display:inline;
    word-break:break-all;
}​ 
```

**请注意，IE 只会将文本换行在空白字符处。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:22:05.023

如果您删除它，`float: left;`那么它应该可以工作。

[js小提琴](http://jsfiddle.net/FsmcM/3/)。

作为一个仅供参考，你不需要向左浮动`display:inline;`

```
ul{
    border:1px solid blue;
    width:230px;
    overflow:hidden;
    list-style: none;
    margin: 0;a
    padding: 0;
}
ul li{
    border:1px solid red;
    height:20px;
    display:inline;
    word-break:break-all;
    word-break: break-all;
}​

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 <body>
  <ul>
    <li>1234567890</li>
    <li>1234567890</li>
    <li>1234567890</li>
  </ul>
 </body>
</html>
​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T06:24:14.000

只需`float: left`从`ul li`. `li`但是，如果您这样做，您可能会注意到每个元素之间有一点空格。这是因为 HTML 在`li`标签之间有一些空格。

```
<ul>
... <li>A</li>
... <li>B</li>
</ul>
<!-- "..." denotes the spaces I'm talking about --> 
```

要删除这些空格，您可以：

*   从 HTML 中删除空格，这当然会影响源代码的可读性。
*   或者，将`font-size`父级 ( `ul`) 的 设置为 0。然后，将`font-size`属性添加到`li`. [http://jsfiddle.net/FsmcM/6/](http://jsfiddle.net/FsmcM/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T06:18:06.897

你可以这样写：

```
ul {
    border:1px solid blue;
    width:230px;
    list-style: none;
    margin: 0;
    padding: 0;
    white-space:nowrap;
    font-size:0;
}
ul li {
    display:inline-block;
    *display:inline; /*For IE*/
    *zoom:1;
    white-space:noraml;
    font-size:16px;
    border:1px solid red;
    height:20px;
    display:inline;
    word-break:break-all;
} 
```

检查这个[http://jsfiddle.net/FsmcM/1/](http://jsfiddle.net/FsmcM/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T06:22:49.203

通过以下更改，它看起来像您的`div`示例`span`：

html:

```
<ul>
    <li>1234567890</li><li>1234567890</li><li>1234567890</li>
</ul> 
```

CSS：

```
ul{
    border:     1px solid blue;
    width:      210px;
    list-style: none;
    margin:     0;
    padding:    0;
}
li{
    border:  1px solid red;
    height:  20px;
    display: inline;
} 
```

另请参阅[我的示例](http://jsfiddle.net/FsmcM/4/)。

# visual-studio - 在 Visual Studio 宏汇编器中从十进制 ascii 转换为二进制

> ID：10595048
> 
> 赞同：2
> 
> 时间：2012-05-15T06:12:14.253
> 
> 标签：visual-studio, assembly, masm

我得到了一个项目，要求我添加两个一位或两位数字并返回结果。我得到了大部分代码，但我应该填写我们将从命令提示符读取的十进制 ascii 值转换为其二进制等效值的部分。子程序如下：

```
;input decimalbuffer, BufLength
;OutPut BinValue
RETURN_BIN_VALUE PROC NEAR C USES eax ebx ecx edx esi edi ebp,
decimalbuffer:ptr byte, Blength:ptr word, BinValue:ptr word
CALCULATE_BIN_VALUE: 
```

如果只有 2 位数字，那么 数组 decimalbuffer 的第二个元素是哪里，并且`BinaryValue = (D0 = 30h) + 0Ah * (D1 - 30h)` 是第一个元素`D0``D1`

```
DONE:
    Ret
RETURN_BIN_VALUE ENP 
```

我的问题是我不理解宏汇编器的语法。我应该如何表明我想访问第一个和第二个元素？我环顾了所有笔记和互联网，但找不到任何东西。上周我几乎没有开始使用微型汇编器。在那之前，我一直在 DOSBox 中使用调试。任何帮助表示赞赏。

# iphone - Flash CS5.5：在 iPhone 上使用 CameraUI 拍摄照片时照片旋转

> ID：10595050
> 
> 赞同：1
> 
> 时间：2012-05-15T06:12:38.323
> 
> 标签：iphone, ios, actionscript-3, flash, flash-cs5

请帮助，我已经成功地通过 iPhone 的相机访问和拍摄照片。但问题是当我通过“loadFilePromise”加载它时，照片旋转方向错误。

```
import flash.media.CameraUI;
import flash.media.MediaType;
import flash.media.MediaPromise;
import flash.events.MediaEvent;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.display.Loader;
import flash.display.Bitmap;
import flash.media.CameraRoll;
import flash.display.StageOrientation;
import flash.events.StageOrientationEvent;
import flash.media.Camera;
import flash.media.Video;

var currentOrientation:String = "";

var cam:CameraUI = new CameraUI();
cam.addEventListener(MediaEvent.COMPLETE, captured);
cam.addEventListener(Event.CANCEL, cancelled);

var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, photoLoaded);
addChild(loader);

captureBtn.addEventListener(MouseEvent.MOUSE_UP, pressed);

function pressed(e:MouseEvent){
    if(CameraUI.isSupported){
        cam.launch(MediaType.IMAGE);
    }
}

function captured(e:MediaEvent){
    var mediaPromise:MediaPromise = e.data;
    if(mediaPromise != null)
    {
        output.text = "Photo captured.";
        loader.loadFilePromise(mediaPromise);
    }
}

function cancelled(e:Event):void {
    output.text = "Cancelled.";
}

stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING,orientationChanging);
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChanged);

function orientationChanging(e:StageOrientationEvent){
    currentOrientation = e.afterOrientation;
    trace(currentOrientation);
    switch(currentOrientation)
    {
        case StageOrientation.DEFAULT :
            currentOrientation = "DEFAULT";
            //set rotation value here
            stage.rotation = 0;
            break;

        case StageOrientation.ROTATED_RIGHT :
            currentOrientation = "ROTATED_RIGHT";
            //set rotation value here
            stage.rotation = -90;
            break;

        case StageOrientation.ROTATED_LEFT :
            currentOrientation = "ROTATED_LEFT";
            //set rotation value here
            stage.rotation = 90;
            break;

        case StageOrientation.UPSIDE_DOWN :
            currentOrientation = "UPSIDE_DOWN";
            //set rotation value here
            stage.rotation = 180;
            break;
    }
}

function orientationChanged(e:StageOrientationEvent){

}

function photoLoaded(e:Event){
    var img:Bitmap = e.currentTarget.content as Bitmap;
    img.smoothing = true;
    img.width = 350
    img.scaleY = img.scaleX;

    /* TRY THIS TO FIX BUT IT DIDN'T WORK:
        switch(currentOrientation){

        case "rotatedLeft":
            img.rotation = 90;
        break;

        case "rotatedRight":
            img.rotation = 90;
        break;

        case "upsideDown":

        break;

    }*/

    /* THESE LINE ARE JUST USED TO SAVE PHOTO IN CAMERA ROLL:
        if(CameraRoll.supportsAddBitmapData)
    {
        cameraRoll.addBitmapData(img.bitmapData);
    }*/
}

function camRollSaved(e:Event){
    output.text = "Your photo is saved to a camera roll."
} 
```

我已经在发布设置中取消选中“自动方向”，尝试更正 StageOrientation 但它仍然不起作用。

```
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING,orientationChanging);
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChanged); 
```

只有当我将 iphone 旋转到横向（相机的位置在 TOP-RIGHT）然后拍照时才正确。

有没有人有同样的问题或知道如何解决？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:15:41.317

这在 Android 上为我解决了这个问题： [http ://blog.flexnroses.com/?p=95](http://blog.flexnroses.com/?p=95)

我认为 iOS 的库存在问题，因此它可能无法解决您的问题，但也许您可以从中获得所需的灵感。祝你好运！

# java - 如果不清除 ThreadLocal 变量，会发生什么？

> ID：10595053
> 
> 赞同：5
> 
> 时间：2012-05-15T06:12:57.683
> 
> 标签：java, thread-local

在一个类中定义了一个线程局部变量来维护一些实例。设置和获取递归方法。当请求完成时，我有点无法清除 threadlocal 变量（我已经以所有其他方式进行了分析。我无法清除 threadlocal）。

我的问题是，如果我没有为每个请求清除 threadlocal 变量，会发生什么？有什么影响？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T06:55:05.857

javadoc 说：

> 在线程消失后，它的所有线程本地实例副本都将受到垃圾回收（除非存在对这些副本的其他引用）。

例如，这里[的实现](http://www.javadocexamples.com/java/lang/java.lang.ThreadLocal-source.html)由使用[弱引用](http://en.wikipedia.org/wiki/Weak_reference)作为键的 HashTable 支持。在这种情况下，关键是线程。如果线程终止，则映射中的条目将有资格进行垃圾回收。

垃圾收集可能仅在系统开始耗尽内存空间时发生。但是这种考虑适用于系统中的所有对象：对象何时开始被回收取决于 GC 策略，该策略是 VM 特定的并且需要进行调整。

这是我对线程局部变量的好坏使用的看法：

*   如果要解决并发问题，**最好使用线程局部变量。**例如，[通过为每个线程保留一份副本来避免非线程安全对象的](https://stackoverflow.com/questions/817856/when-and-how-should-i-use-a-threadlocal-variable)同步。或者解决与并发相关的其他设计问题。

*   如果重点是以廉价的方式在调用链中“传递参数”，那就太**糟糕了。**您应该更好地重构代码并将对象作为常规方法参数传递到调用链中。

*   可以使用本地**线程**来存储某种形式的“当前”上下文，例如当前请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:18:15.683

如果线程死了，对 ThreadLocal 条目的引用也会死，因此您的对象（假设没有其他引用）将被垃圾收集。

只要线程存在，您的对象也会存在。

您必须评估长期存在的对象的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:19:43.063

您有内存泄漏，并且 ThreadLocal 可能已经设置，下次调用您的代码时。ThreadLocals 有点像 imo 的代码味道。

# cuda - GPU 架构 (英伟达)

> ID：10595054
> 
> 赞同：3
> 
> 时间：2012-05-15T06:13:05.547
> 
> 标签：cuda, gpu, nvidia

在我正在阅读的所有论文中，我看到 GPU 由多处理器组成，每个多处理器有 8 个处理器，它们能够并行执行单个扭曲。
我使用的 GPU 是 Nvidia 560，它只有 7 个多处理器，但每个多处理器中有 48 个处理器。这是否意味着 Nvidia 560 中的每个多处理器都能够并行执行 6 个扭曲？
我可以说在 Nvidia 560 上并行执行的最大线程数是 32*6*7=1344 个并行线程吗？（32=warp，7=multipricessors，6=warp 并行执行）

最快的 Nvidia GPU 中有多少个多处理器？这是什么GPU？最大的 GPU 拥有的最大全局内存量是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:42:58.730

从[CUDA 编程指南 4.2](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)：

> [...] 在每个指令发出时间，warp 调度程序选择一个线程准备好执行其下一条指令的线程（warp 的活动线程）并将指令发布给这些线程。

因此，每个 SM 的最大并发运行 wapr 数等于 warp 调度程序 (WS) 的数量。

GeForce 580 具有 2.1 架构：

> 对于计算能力为 2.x 的设备，多处理器包括：[...] 2 个 warp 调度程序

这意味着，GPU 的每个 SM 可以同时运行 2 个 warp = 64 个线程，总共 448 个线程。但是请注意，强烈建议使用比这更多的线程：

> 一个warp准备好执行其下一条指令所需的时钟周期数称为延迟，并且当所有warp调度程序在该延迟期间**的每个时钟周期总是有一些指令要为某个warp发出一些指令时，就可以实现充分利用**，或者换句话说，当延迟完全“隐藏”时。

关于您的其他问题：[GeForce GTX690](http://videocardz.com/nvidia/geforce-600/geforce-gtx-690)有 3072 个 CUDA 核心。然而，对于 CUDA 来说，它看起来像是两个独立的 GPU，每个都有 1536 个内核，所以它并不比两个 GeForce 680 好，而且从众多在线评论来看，后者很容易超频。GPU 中最大的内存安装在[nVidia Tesla M2090](http://www.nvidia.com/object/tesla-servers.html)中：6GiB 的 GDDR5（512 个 CUDA 核心）。我猜，不久之后，基于 GeForce 6xx 等 Kepler 架构的全新 Teslas 家族将发布，但我还没有听说任何官方宣布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:43:20.150

您正在阅读的论文很旧。前两代 CUDA GPU 每个 MP 有 8 个内核，并从单个 warp 发出指令（如果要简化，每条指令在 8 个内核上执行四次以服务单个 warp）。

您拥有的费米卡更新且不同。它从每个多处理器的两个不同的 warp 中“双重发布”指令（因此每个 warp 指令在 16 个内核上执行两次）。当代码流允许时，可以将来自这两个 warp 之一的附加指令发布到剩余的 16 个内核上，即。一种有限形式的无序执行。后一个功能仅在计算能力 2.1 设备上可用。在计算能力 2.0 设备上，每个多处理器只有 32 个内核。但是，*在任何给定的着色器时钟周期上，每个多处理器的每个 MP 退休指令*的扭曲数都是两个，这两种情况都是如此。请注意，有一个相当深的指令流水线，因此在发出和退出之间存在相当大的延迟，最多有 48 个处于*活动状态*每个多处理器在任何时刻。

因此，您的答案是 GTX 560 中的 7 个多处理器上的 14 个 warp 或 336 个 warp，具体取决于您希望采用的“并行执行”的定义。我用来回答这个问题的信息主要来自当前编程指南的附录 F。

# apache - 在端口 8080 上访问 WAMP

> ID：10595056
> 
> 赞同：0
> 
> 时间：2012-05-15T06:13:08.760
> 
> 标签：apache, port, wamp

IIS 已安装在我的服务器上。我已将 WAMP 配置为侦听端口 8080。当我访问时，它在服务器的 LocalHost 上工作正常`[http://localhost:8080]`

但是，当我尝试访问该网站`[http://production.myurl.com:8080/]`时，它不会显示页面并显示`"Connection timed out"`消息。除了 HTTP 配置之外，我还需要配置什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:16:44.603

如果您在防火墙或路由器后面，则需要在 FW 中打开端口或在路由器中配置端口转发到您的计算机。

# python - 在内存中为 Django-Python 维护一个大字典？

> ID：10595058
> 
> 赞同：10
> 
> 时间：2012-05-15T06:13:26.763
> 
> 标签：python, django, dictionary, memcached, redis

我有一个大的`key-value`转储，我需要查找我的 django-Python webapp。

所以，我有以下选择：

*   将其存储为**json**转储并将其加载为 python dict。
*   将其存储在**dump.py**中并从中导入字典。
*   使用一些有针对性的系统来解决这个问题：**[这些真的适用于这个用例吗？]**
    *   **内存缓存**
    ***   雷迪斯**
    *   **还有其他选择吗？**

**从上面哪个是正确的方法？**

**你将如何比较 memcache 和 redis ？**

**更新：**

*   我的字典大小约为**5 MB**，并且会随着时间的推移而增长。
*   使用 Redis/Memcache 会增加每次访问套接字的开销，因此**dump.py**会更好，因为将其加载到内存需要时间，但之后它只会进行内存查找。

*   我的字典需要每天更新，考虑到**dump.py**会有问题，因为我们必须重新启动 django-server 才能重新加载，我猜它会在**redis 和 memcache**中即时反映。

*   仅当您拥有大量数据并且必须非常频繁地查找时才使用像**redis这样的系统，在这种情况下，套接字会产生开销，那么我们如何实现优势呢？**

请分享您在这方面的经验！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:51:38.417

对于选择 Memcache 或 REDIS，它们能够在低端硬件上每秒处理数万个请求（例如[，C2D Q8300 上的 REDIS 为](http://antirez.com/post/redis-memcached-benchmark.html)[**80,000 个请求/秒**](http://antirez.com/post/redis-memcached-benchmark.html)）。延迟远低于 1 毫秒。您是说您正在以每秒 20 个请求的顺序执行某项操作，因此从性能方面来说，这真的不是问题。

如果您选择`dump.py`选项，则无需重新启动 Django 即可重新加载。您可以制作自己的简单重新加载器：

转储.py：

```
[ dict code...]

mtime = 0 
```

djago代码：

```
import dump #this does nothing if it's already loaded
stat = os.stat(dump_filename)
if(stat.mtime > dump.mtime):
    reload(dump)
    dump.mtime = stat.mtime 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:23:08.833

Memcached 虽然是一个很棒的产品，但在我的书中被 Redis 打败了。它提供了许多 memcached 没有的东西，比如持久性。

它还提供更复杂的数据结构，如哈希。您的特定数据转储是什么？它有多大，有多大/什么类型的值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:31:24.737

5Mb 没那么大。您可以将其保存在内存中，我建议您这样做，直到通过分析和测试清楚地表明该方法不能满足您的需求。永远做最简单的事情。

套接字通信本身不会引入太多开销。您可能可以通过使用 unix 域套接字来减少它。在任何情况下，如果您不将数据保存在进程中，您将不得不通过某种管道进行讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T06:23:25.387

过去，对于类似的问题，我使用了 dump.py 的想法。我认为所有其他数据结构都需要一个层来将一种对象转换为 python 对象。但是我仍然认为这取决于数据大小和您正在处理的数据量。当涉及到非常大的数据集和基于正则表达式的查找时，Memcache 和 redis 应该有更好的索引和查找。所以我的建议是

json - 如果您通过 http 将数据提供给其他服务 python 文件 - 如果数据结构不是太大并且您不需要任何特殊类型的查找

memcache 和 redis——如果数据变得非常大

# java - 在android中调整字节数组的大小

> ID：10595064
> 
> 赞同：3
> 
> 时间：2012-05-15T06:14:44.190
> 
> 标签：java, android

我是android的新手。我想在函数中调整字节数组的大小。有没有可能。如果有任何问题，请提出解决方案。

```
public void myfunction(){
    byte[] bytes = new byte[1024];
    ....................
    .... do some operations........
    ................................
    byte[] bytes = new byte[2024];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-09T07:19:27.507

为了达到在不丢失内容的情况下调整字节数组大小的效果，Java中已经提到了几种解决方案：

**1）** `ArrayList<Byte>`（见 a.ch. 和 kgiannakakis 的答案）

**2）** `System.arraycopy()`（见 jimpic、kgiannakakis 和 UVM 的答案）

就像是：

```
byte[] bytes = new byte[1024];
//
// Do some operations with array bytes
//
byte[] bytes2 = new byte[2024];
System.arraycopy(bytes,0,bytes2,0,bytes.length);
//
// Do some further operations with array bytes2 which contains
// the same first 1024 bytes as array bytes 
```

**3）**我想添加第三种我认为最优雅的方式：`Arrays.copyOfRange()`

```
byte[] bytes = new byte[1024];
//
// Do some operations with array bytes
//
bytes = Arrays.copyOfRange(bytes,0,2024);
//
// Do some further operations with array bytes whose first 1024 bytes
// didn't change and whose remaining bytes are padded with 0 
```

当然还有其他解决方案（例如，在循环中复制字节）。关于效率，[看这个](https://stackoverflow.com/questions/2589741/how-to-effectively-copy-an-array-in-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T06:21:18.160

您无法在 Java 中调整数组的大小。你可以使用[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)做你想做的事：

```
List<Byte> bytes = new ArrayList<Byte>(); 
```

另一种方法是使用[System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。在这种情况下，您将创建第二个数组并将第一个数组的内容复制到其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T06:21:15.023

你不能这样做。但是您可以创建一个新数组并使用 System.arraycopy 将旧内容复制到新数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T06:22:50.580

你可以这样做：

```
bytes = new byte[2024]; 
```

但是您的旧内容将被丢弃。如果您还需要旧数据，则需要创建一个具有差异大小的新字节数组并调用`System.arrayCopy()`方法将数据从旧数据复制到新数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T06:20:30.973

`ArrayList<Byte>`相反，Java 数组不允许调整大小，ArrayLists 允许，但让它有点不同。您不能指定它们的大小（实际上您不需要 - 它是自动完成的），您可以指定初始容量（如果您知道将`ArrayList`包含多少个元素，这是一个很好的做法）：

```
byte myByte = 0;
ArrayList<Byte> bytes = new ArrayList<Byte>(); //size is 0
ArrayList<Byte> bytes2 = new ArrayList<Byte>(1024); //initial capacity specified
bytes.add(myByte); //size is 1
... 
```

我建议您阅读这个[Java 集合教程](http://docs.oracle.com/javase/tutorial/collections/index.html)。

# android - 如何让安卓手机手电筒闪烁？

> ID：10595072
> 
> 赞同：1
> 
> 时间：2012-05-15T06:15:15.750
> 
> 标签：android, android-intent, android-activity, android-hardware

我正在尝试根据二进制代码使 android 手机的 LED 手电筒闪烁，例如如果 char = 1 则打开 LED 灯，否则如果 char = 0 则关闭 LED。

```
if ( char == '1'){ params.setFlashMode(Parameters.FLASH_MODE_ON); }              
if ( char == '0'){ params.setFlashMode(Parameters.FLASH_MODE_OFF);} 
```

因此，我从`String str ="101010101"`char 获取值 1、0、1 等，这应该使手电筒闪烁，但它会闪烁，仅此而已。我应该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T07:31:46.633

尝试这个 ：

```
String myString = "0101010101";
long blinkDelay = 50; //Delay in ms
for (int i = 0; i < myString.length(); i++) {
   if (myString.charAt(i) == '0') {
      params.setFlashMode(Parameters.FLASH_MODE_ON);
   } else {
      params.setFlashMode(Parameters.FLASH_MODE_OFF);
   }
   try {
      Thread.sleep(blinkDelay);
   } catch (InterruptedException e) {
      e.printStackTrace();
   }
} 
```

如果没有“Thread.sleep()”，您的代码可能太快了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T06:31:47.590

使用这种方法有效，我在我的应用程序中使用

```
private void blink(final int delay, final int times) {
        Thread t = new Thread() {
            public void run() {
                try {

                    for (int i=0; i < times*2; i++) {
                        if (isFlashOn) {
                            turnOffFlash();
                        } else {
                            turnOnFlash();
                        }
                        sleep(delay);
                    }

                } catch (Exception e){ 
                    e.printStackTrace(); 
                }
            }
        };
        t.start();
        }

     private void turnOnFlash() {
        if (!isFlashOn) {
            if (camera == null || params == null) {
                return;
            }

            params = camera.getParameters();
            params.setFlashMode(Parameters.FLASH_MODE_TORCH);
            camera.setParameters(params);
            camera.startPreview();
            isFlashOn = true;
        }

    }

    private void turnOffFlash() {
        if (isFlashOn) {
            if (camera == null || params == null) {
                return;
            }
            params = camera.getParameters();
            params.setFlashMode(Parameters.FLASH_MODE_OFF);
            camera.setParameters(params);
            camera.stopPreview();
            isFlashOn = false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T06:31:10.420

```
String[] list1 = { "1", "0", "1", "0", "1", "0", "1", "0", "1", "0" };
        for (int i = 0; i < list1.length; i++) {
            if (list1[i].equals("0")) {
                params.setFlashMode(Parameters.FLASH_MODE_ON);
            } else {
                params.setFlashMode(Parameters.FLASH_MODE_OFF);
            }

        } 
```

可能你的问题解决了，但我觉得这个太快了，不能眨眼……

# iphone - How to remove white background of UIImageView?

> ID：10595080
> 
> 赞同：0
> 
> 时间：2012-05-15T06:15:53.667
> 
> 标签：iphone, uiimageview

I am making an application in which i am trying to add an image of a circle

but when i am adding the image ,it comes with white background..

How to remove the white background.

Even i have set background color to clear and even opaque property to NO but it seems,has

has no effect.

Kindly provide some valid solution.

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:40:44.383

In order for an image to have a transparent background the image itself must have a transparent background. Then when loading the image from file into an `UIImageView` the background will also be transparent.

Try using the image I've provided:

![Circle](../Images/c860a59199f6980a733b0058aefe5edf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:34:21.903

user should take an image having no background color...then it will work properly

# mysql - 以各种 SQL 语法创建自动关系

> ID：10595085
> 
> 赞同：0
> 
> 时间：2012-05-15T06:16:05.423
> 
> 标签：mysql, sql, oracle, tsql, postgresql

我有许多数据库，外键（非正式）字段名称和主键字段名称对于以下代码中可见的示例是相同的。

```
CREATE TABLE Customer(
   CustomerId int PRIMARY,
   CustomerName varchar(200),
...
)
CREATE TABLE Invoice(
      InvoiceID int PRIMARY KEY,
      InvoiceType int ,
      CustomerID int)
CREATE TABLE InvoiceDet(
      InvoiceDetId int PRIMARY KEY,
      InvoiceId int ...) 
```

我想要一个程序（或脚本）来读取我的表、列并创建外键引用。应该产生关系的样本： `Customer.CustomerId<=>Invoice.CustomerID`和 `InvoiceDet.InvoiceId<=>Invoice.InvoiceId`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:18:31.403

创建这样的自动化脚本是一项*艰巨*的任务，尤其是对于您提到的所有数据库。您应该考虑聘请几个具有 perl/python 知识的优秀 DBA 来为您做这件事。

使用最少的检查（键中的列数和列的类型没有交叉检查），以下可能是 PostgreSQL 的[概念证明](http://www.sqlfiddle.com/#!1/cd008/2)：

```
WITH colnames(oid,colnum,colname) AS (
    SELECT a.attrelid AS oid, a.attnum AS colnum, a.attname AS colname
      FROM pg_attribute a WHERE a.attnum > 0 AND NOT a.attisdropped),
pkcols(oid,colnum) AS (
    SELECT c.conrelid AS oid, unnest(c.conkey)
      FROM pg_constraint c
     WHERE contype = 'p'),
pks(oid,colnum,colname) AS (
    SELECT pkc.oid, pkc.colnum, cn.colname
      FROM pkcols pkc
      JOIN colnames cn ON pkc.oid = cn.oid AND pkc.colnum = cn.colnum),
pktabs AS (
    SELECT t.oid AS oid, n.nspname AS sname, t.relname AS tname,
           pks.colnum AS colnum, pks.colname AS colname
      FROM pg_class t
      JOIN pg_namespace n ON n.oid = t.relnamespace
      JOIN pks ON pks.oid = t.oid
     WHERE t.relkind = 'r'),
coltabs AS (
    SELECT t.oid AS oid, n.nspname AS sname, t.relname AS tname,
           cn.colnum AS colnum, cn.colname AS colname
      FROM pg_class t
      JOIN pg_namespace n ON n.oid = t.relnamespace
      JOIN colnames cn ON cn.oid = t.oid
     WHERE t.relkind = 'r')
SELECT 'ALTER TABLE '||quote_ident(ct.sname)||'.'||quote_ident(ct.tname)||
       ' ADD FOREIGN KEY ('||string_agg(quote_ident(pk.colname),',')||
       ') REFERENCES '||
       quote_ident(pk.sname)||'.'||quote_ident(pk.tname)||' ('||
       string_agg(quote_ident(pk.colname),',')||');'
  FROM pktabs pk
  JOIN coltabs ct ON pk.oid != ct.oid AND pk.colname = ct.colname
 GROUP BY pk.sname,pk.tname,ct.sname,ct.tname; 
```

# macos - Mac OS X 10.7 上的 Derelict2：SDL 无法构建

> ID：10595090
> 
> 赞同：1
> 
> 时间：2012-05-15T06:16:33.577
> 
> 标签：macos, makefile, osx-lion, d

我正在尝试按照随附的[安装说明](http://svn.dsource.org/projects/derelict/branches/Derelict2/doc/build.html)在 Lion上构建[Derelict2](http://www.dsource.org/projects/derelict)。当我运行命令时，以下库构建良好：`make -fmac.mak DC=dmd`

*   遗弃快板
*   遗弃FMOD
*   被遗弃的FT
*   遗弃GL
*   遗弃IL
*   遗弃ODE
*   遗弃的Ogg
*   遗弃PA

不幸的是，一旦脚本升级到 DerelictSDL，它就会吐出以下内容：

```
make -C DerelictSDL all PLATFORM=mac
dmd -release -O -inline -I../DerelictUtil -c derelict/sdl/sdl.d derelict/sdl/sdlfuncs.d derelict/sdl/sdltypes.d -Hd../import/derelict/sdl
dmd -release -O -inline -I../DerelictUtil -c derelict/sdl/macinit/CoreFoundation.d derelict/sdl/macinit/DerelictSDLMacLoader.d derelict/sdl/macinit/ID.d derelict/sdl/macinit/MacTypes.d derelict/sdl/macinit/NSApplication.d derelict/sdl/macinit/NSArray.d derelict/sdl/macinit/NSAutoreleasePool.d derelict/sdl/macinit/NSDictionary.d derelict/sdl/macinit/NSEnumerator.d derelict/sdl/macinit/NSEvent.d derelict/sdl/macinit/NSGeometry.d derelict/sdl/macinit/NSMenu.d derelict/sdl/macinit/NSMenuItem.d derelict/sdl/macinit/NSNotification.d derelict/sdl/macinit/NSObject.d derelict/sdl/macinit/NSProcessInfo.d derelict/sdl/macinit/NSString.d derelict/sdl/macinit/NSZone.d derelict/sdl/macinit/runtime.d derelict/sdl/macinit/SDLMain.d derelict/sdl/macinit/selectors.d derelict/sdl/macinit/string.d     -Hd../import/derelict/sdl/macinit
derelict/sdl/macinit/NSString.d(134): Error: cannot implicitly convert expression (this.length()) of type ulong to uint
derelict/sdl/macinit/NSString.d(135): Error: cannot implicitly convert expression (str.length()) of type ulong to uint
derelict/sdl/macinit/NSString.d(140): Error: cannot implicitly convert expression (cast(ulong)(selfLen + aStringLen) - aRange.length) of type ulong to uint
make[1]: *** [dmd_mac_build_sdl] Error 1
make: *** [DerelictSDL_ALL] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:33:43.830

Derelict 的最新版本是[Derelict3，它位于 GitHub 上](https://github.com/aldacron/Derelict3)。

至于您的错误，您似乎正在为 64 位进行编译，而 Derelict2 中显然没有考虑到这一点。

您只需要修复源代码。这样做的正确方法是将这些实例更改为使用`size_t`而不是`uint`，但`cast(size_t)`在错误消失之前，这些表达式可能更容易:-) 长度不太可能超过 40 亿，所以你应该很好，直到你切换到 Derelict3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:22:40.013

尝试在 32 位模式下编译。我相信这是 dmd 和 gdc/gdmd 的 -m32 选项

# java - 使用 jaxb2 时如何根据 type 属性构造 xml 元素？

> ID：10595096
> 
> 赞同：1
> 
> 时间：2012-05-15T06:16:57.193
> 
> 标签：java, xml, jaxb2

我`java jaxb2.0`用来做`xml marshalling`和`unmarshalling`。
我遇到了这样的问题。
示例 xml 是这样的* *(fruit.xml)* *:

```
<fruitPacks>
  <fruit name="apple1" type="apple" isApple="true"/>
  <fruit name="banana1" type="banana" isBanana="true"/>
  <fruit name="apple2" type="apple" isApple="true"/>
</fruitPacks> 
```

和这样的java类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "fruitPacks")
@XmlRootElement
public class FruitPacks
{
   @XmlElement(name = "fruit")
   private List<Fruit> fruits
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "fruit")
@XmlSeeAlso({ Apple.class, Banana.class })
public class Fruit{
 @XmlAttribute
 private String name;
 @XmlAttribute
 private String type;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "apple")
public class Apple extends Fruit{
  @XmlAttribute
  private boolean isApple = true;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "banana")
public class Banana extends Fruit{
  @XmlAttribute
  private boolean isBanana = true;
} 
```

和解组代码是：

```
public class JAXBTest {

public static void main(String [] args) throws Exception{
    JAXBContext jc = JAXBContext.newInstance(FruitPacks.class,Fruit.class,Apple.class, Banana.class);

    Unmarshaller unmarshaller = jc.createUnmarshaller();
    Object obj = unmarshaller.unmarshal(new File("fruit.xml"));
    System.out.println(obj);
}   
} 
```

所以我想要做的是：
在解组xml时，水果的构造将根据类型属性自动完成到子类（Apple，Banana）。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:25:53.410

您需要确保您`JAXBContext`知道子类。一种方法是使用`@XmlSeeAlso`注释，请参见下面的示例：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "fruit")
@XmlSeeAlso({Apple.class, Banana.class})
public class Fruit{
 @XmlAttribute
 private String name;
 @XmlAttribute
 private String type;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

* * *

**更新**

我刚刚意识到您使用的是`type`属性而不是标准`xsi:type`属性。对于任何 JAXB 实现，您都可以利用以下方式映射此用例`XmlAdapter`：

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

如果您使用的是 EclipseLink JAXB (MOXy)，那么您可以利用`@XmlDescriminatorNode`/`@XmlDescriminatorValue`扩展：

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:24:46.867

@Gang 尝试在标签 XML 中获取**递归代码**和 id 属性。:)

# sql-server - 如何在 sql server 中快速创建演示数据库的副本？

> ID：10595097
> 
> 赞同：0
> 
> 时间：2012-05-15T06:17:14.813
> 
> 标签：sql-server, database

我有一个演示数据库，可供许多用户同时使用。用户可以查询和修改数据，查询修改后的数据。但其他用户应该只能看到他们自己所做的更改。当用户注销时，我会清除该用户所做的所有更改。
我知道我可以复制数据库，并在用户登录时连接到不同的数据库。但是如果用户太多，我最终会在一台服务器上获得很多数据库。
我想知道是否有任何方便的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:46:04.483

在 SQL 中创建临时表怎么样

并且一旦用户注销就将它们放下。

从原始表创建临时表

```
Declare @usera varchar(10)
set @usera = 'Ham'

Declare @sql varchar(70)
set @sql = 'use NorthTemp select * into ##temptable_' + @usera + ' from originaltable'

exec (@sql) 
```

并允许用户使用 TempTables

我正在使用##，以便表是全局的

# ios - Phonegap n00b 样本不起作用？

> ID：10595100
> 
> 赞同：0
> 
> 时间：2012-05-15T06:17:29.737
> 
> 标签：ios, cordova

刚开始使用最新的 XCode 和最新的 phonegap (Cordova) 玩 phonegap 的东西。

我按照“入门”的内容进行操作，一切似乎都正常。我从 Camaera API 示例中复制了测试代码，但没有一个按钮起作用。它们在模拟器中显示得很好，但是当我点击时什么也没有发生。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:20:45.667

我认为相机的东西在模拟器上不起作用。在真实设备上试用。还可以尝试使用其他 API，例如音频捕获。

# mysql - Rails 每日/每月报告

> ID：10595101
> 
> 赞同：-1
> 
> 时间：2012-05-15T06:17:30.250
> 
> 标签：mysql, ruby-on-rails

报告

我需要用这些记录创建一个每日报告+每月报告。所有记录都来自一个表和一个字段（'nature'是我的字段的名称）..

```
Calls
Texts
Emails 
```

是否有任何可能的方法来创建将生成此每日报告 + 每月报告的单个查询。？

前任。

```
 Day1    Day2    Day3    etc..    Total
Calls     20      23      23      ...      66

Texts     120     125     130     ...      375

Emails    50      60      55      ...      165

Total     190     208     208     ...      606 
```

如果没有，请告诉如何以最简单的方式进行操作，以及如何在 Rails 上进行操作。？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:32:41.487

一个月

```
$todayDate = date("Y-m-d");
$thismonth = strtotime($todayDate);
 $next_month =  mktime(0, 0, 0, date("m")+1, date("d"), date("Y")); 
```

询问

```
select colum_name from table_name where month(table_field_name) BETWEEN month($thismonth) AND month($next_month) AND year(table_field_name) BETWEEN year($thismonth) AND year($next_month) 
```

# javascript - 需要帮助让 javascript/html 滑块工作

> ID：10595102
> 
> 赞同：0
> 
> 时间：2012-05-15T06:17:34.940
> 
> 标签：javascript, html, slider

我试图让下面的 html 代码工作，但无法弄清楚。我不认为 domready 事件被触发并且无法弄清楚原因。

```
<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<style>
.slider {
    background: #CCC;
    height: 16px;
    width: 200px;
}

    .slider .knob {
        background: #000;
        width: 16px;
        height: 16px;
    }

​&lt;/style>
    <script type="text/javascript">

window.addEvent('domready', function(){

    var slider = $('slider');

    new Slider(slider, slider.getElement('.knob'), {
        range: [0, 100],
        initialStep: 100, steps: 11, wheel: true,
        onChange: function(value){
alert(value);
        }
    });
});

    </script>
  </head>
<body>

<div id="slider" class="slider">
    <div class="knob"></div>
</div>

</body>
</html> 
```

我只想在我的网页上有一个滑块，并且由于浏览器限制而不能使用 html 5。我可以用来执行此操作的最简单的滑块是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:24:06.847

我看到的第一个问题是在`var slider = $('slider');`声明中。

您需要将其更改为`var slider = $('#slider');`或`var slider = $('.slider');`取决于是否要通过 ID 或 CLASS 名称访问它。

您还可以使用[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)作为滑块，这是我一直在使用的一个很好的 jQuery 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:33:45.437

而不是使用`window.addEvent();`，为什么不使用

```
$(function(){
    // your code here.
}); 
```

它使用 jQuery 的 on ready 事件，因此您可以确定它会在文档就绪时触发

正如上面 Odinn 所说，您使用的是 $('slider')，这意味着 jquery 正在寻找一个 . 如果要搜索 ID`$('#slider')`或按类别，则需要指定`$('.slider');`

除此之外，我会保持您的控制台打开以查找任何错误并发布这些错误。希望有帮助。

# php - MySQL / PHP / SugarCRM 调度

> ID：10595104
> 
> 赞同：0
> 
> 时间：2012-05-15T06:17:43.127
> 
> 标签：php, mysql, sql

我又带着新问题回来了。可能有一个简单的查询来找出我需要什么。

我有 SugarCRM，我正在使用 SOAP WebUI 在日历上创建会议

我试图弄清楚如何检查 meeting.date_start 和 meeting.date_end 之间的时间是否已经占用。

目前，我可以使用以下查询检查我从网络表单输入的日期是否与 meeting.date_start 相等：

```
$query="select id, date_start, date_end from meetings where  date_start='$dateToCheck' AND assigned_user_id='$stylist'"; 
```

其中 $dateToCheck 是 DateTime 格式

使用：

```
$resource=mysql_query($query,$connect)
if(mysql_num_rows($resource)>0)
{
        echo '<script type="text/javascript">';
        echo 'alert("Time is Taken.");';
        echo '</script>';
} 
```

我可以检查 $dateToCheck = date_start

例如，如果我有一个从上午 9:30 开始到 10:45 结束的约会，我不能为 9:30 创建一个约会，但我可以为 9:45 创建一个约会

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:21:31.097

试试这个

```
select id, date_start, date_end 
from meetings 
where  date_start<='$dateToCheck' 
    AND date_end>='$dateToCheck' 
    AND assigned_user_id='$stylist' 
```

# clojure - 遍历向量树

> ID：10595105
> 
> 赞同：3
> 
> 时间：2012-05-15T06:17:45.580
> 
> 标签：clojure, tree, multimethod, hiccup

我想遍历代表打嗝数据结构的向量树：

```
[:div {:class "special"} [:btn-grp '("Hello" "Hi")]] 
```

然后我想对向量的关键字进行调度，如果已经为关键字定义了多方法，那么它将返回另一组向量，它将替换原始标签。

例如，上面的结构将转换为：

```
[:div {:class "special"} [:div [:button "Hello"] [:button "Hi"]]] 
```

自定义多方法将接收列表（“hello”“hi”）作为参数。然后它将返回包含按钮的 div。

如何编写一个遍历向量并以表单中的所有其他内容作为参数调度关键字的函数，然后用返回的表单替换当前表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:18:40.080

```
(ns customtags
  (:require [clojure.walk :as walk]))

(def customtags (atom {}))

(defn add-custom-tag [tag f]
  (swap! customtags assoc tag f))

(defn try-transform [[tag & params :as coll]]
  (if-let [f (get @customtags tag)]
    (apply f params)
    coll))

(defmacro defcustomtag [tag params & body]
  `(add-custom-tag ~tag (fn ~params ~@body)))

(defn apply-custom-tags [coll]
  (walk/prewalk
    (fn [x]
      (if (vector? x)
        (try-transform x)
        x)) coll)) 
```

使用它：

```
(require '[customtags :as ct])
(ct/defcustomtag :btn-grp [& coll] (into [:div] (map (fn [x] [:button x]) coll)))
(ct/defcustomtag :button [name] [:input {:type "button" :id name}])

(def data [:div {:class "special"} [:btn-grp "Hello" "Hi"]])

(ct/apply-custom-tags data)
[:div {:class "special"} [:div [:input {:type "button", :id "Hello"}] [:input {:type "button", :id "Hi"}]]] 
```

# python - 如何以有效的方式使用 python 解析 HTML 或 XHTML 或 XML？

> ID：10595107
> 
> 赞同：0
> 
> 时间：2012-05-15T06:17:55.430
> 
> 标签：python, html, xml, xhtml

我的 python 环境是 2.7

我知道这是一个老问题，但是当我搜索和阅读其他人的问题和答案时，我已经失去了理智。其中一些确实已经过时了。就像下面的代码：

```
import lxml #wrong
import xml #correct 
```

所以，由于我是 python 的新手，对伟大的 python 历史一无所知，我想让事情更清楚。比如，现在python中所谓的标准xml-parser模块是什么？当我需要使用 xpath 语法解析一些 HTML 时，我该怎么办。如果我有一个格式错误的 HTML 源代码，如何不使用 BeautifulSoup 或其他类似的东西来处理它。如果你能向我介绍一些东西，我将不胜感激。

好吧，总而言之，我只有一个问题。如何使用带有 python2.7 的标准 python 模块来解析格式错误的 html 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:33:33.523

如果您需要坚持使用标准库，请阅读[python 库文档。](http://docs.python.org/library/markup.html)

如果你不这样做，一定要看看[lxml](http://lxml.de)，它做得更多。

# rss - 如何在python中读取网站内容

> ID：10595113
> 
> 赞同：0
> 
> 时间：2012-05-15T06:19:04.797
> 
> 标签：rss, html-parsing, python-2.7, beautifulsoup, lxml

我正在尝试编写一个程序来读取任何网站的文章（帖子），这些网站的范围可能来自 Blogspot 或 Wordpress 博客/任何其他网站。至于编写与几乎所有可能用 HTML5/XHTML 等编写的网站兼容的代码。我想使用 RSS/Atom 提要作为提取内容的基础。

但是，由于 RSS/Atom 提要通常可能不包含网站的整篇文章，我想从提要中收集所有“帖子”链接`feedparser`，然后想从相应的 URL 中提取文章内容。

我可以获得网站中所有文章的 URL（包括摘要。即提要中显示的文章内容），但我想访问我必须使用相应 URL 的整个文章数据。

我遇到了各种库，例如`BeautifulSoup`，`lxml`等等。（各种 HTML/XML 解析器），但我真的不知道如何获得文章的“确切”内容（我假设“确切”是指具有所有超链接、iframe、幻灯片等仍然存在；我不想要 CSS 部分）。

那么，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:06:28.537

获取所有链接页面的 HTML 代码非常容易。

困难的部分是准确提取您正在寻找的内容。如果您只需要标签内的所有代码`<body>`，这也不应该是一个大问题；提取所有文本同样简单。但是如果你想要一个更具体的子集，你还有更多的工作要做。

我建议您下载 requests 和 BeautifulSoup 模块（都可以通过`easy_install requests/bs4`或更好`pip install requests/bs4`）。requests 模块使获取页面变得非常容易。

以下示例获取 rss 提要并返回三个列表：

*   `linksoups`是从提要链接的每个页面的*BeautifulSoup*实例的列表
*   `linktexts`是从提要链接的每个页面的可见文本列表
*   `linkimageurls`是一个列表列表，其中`src`包含从提要链接的每个页面中嵌入的所有图像的 -url
    *   例如`[['/pageone/img1.jpg', '/pageone/img2.png'], ['/pagetwo/img1.gif', 'logo.bmp']]`

```
import requests, bs4

# request the content of the feed an create a BeautifulSoup object from its content
response = requests.get('http://rss.slashdot.org/Slashdot/slashdot')
responsesoup = bs4.BeautifulSoup(response.text)

linksoups = []
linktexts = []
linkimageurls = []

# iterate over all <link>…&lt;/link> tags and fill three lists: one with the soups of the
# linked pages, one with all their visible text and one with the urls of all embedded
# images
for link in responsesoup.find_all('link'):
    url = link.text
    linkresponse = requests.get(url) # add support for relative urls with urlparse
    soup = bs4.BeautifulSoup(linkresponse.text)
    linksoups.append(soup)

    linktexts.append(soup.find('body').text)
    # Append all text between tags inside of the body tag to the second list

    images = soup.find_all('img')
    imageurls = []
    # get the src attribute of each <img> tag and append it to imageurls
    for image in images:
        imageurls.append(image['src'])
    linkimageurls.append(imageurls)

# now somehow merge the retrieved information. 
```

这可能是您项目的粗略起点。

# c++ - typedef 参数的重载

> ID：10595114
> 
> 赞同：4
> 
> 时间：2012-05-15T06:19:08.443
> 
> 标签：c++, typedef, overloading

> **可能重复：**
> [使用 typedef 别名作为参数重载成员方法](https://stackoverflow.com/questions/10582519/overloading-member-methods-with-typedef-aliases-as-parameters)

我有以下方法 `void setField(char x);`和另一个重载方法这在所有平台上`void setField(int8_t x);` 编译，除了`solaris``solaris` `int8_t``typedef as char`

有什么办法可以解决这个问题，因为我不想更改`method` 我得到编译器错误的名称说`method already exists`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:29:45.477

没有办法解决这个问题。typedef 只是同一类型的另一个名称。但是你只能重载不同的类型。所以在你的情况下 - 编译器会看到 setField(char x)。

为什么需要这两种方法？由于 sizeof(char) 根据标准为 1，因此这些名称之间实际上没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:22:42.610

我不认识 int_8。stdint.h 有 int8_t。你试过吗？否则，在 Solaris 上找到定义 int_8 的头文件，并在 Solaris 构建中使用适当的预处理器定义有条件地排除它。

# javascript - 为什么我会收到错误“错误未定义'http ....'不是函数”？

> ID：10595115
> 
> 赞同：1
> 
> 时间：2012-05-15T06:19:16.810
> 
> 标签：javascript, html

```
<div class="ui-block-b"><a href="#" data-theme="b" data-role="button" onclick="proceed()" >Proceed</a></div> 
```

```
 function proceed() 
   {
       window.location.href("CreditCard.aspx");
   } 
```

大家好，我在本地服务器上测试了这个代码，它可以工作，但是我在移动服务器上测试了这个。它抛出一个错误 undefine 'http....' is not a function

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:21:35.107

`window.location.href`是一个字符串，而不是一个函数。

给它赋值`=`

```
function proceed() {
   location.href = "CreditCard.aspx";
} 
```

虽然，在这种情况下，你不应该。没有必要在其中涉及 JavaScript。

```
<div class="ui-block-b">
    <a href="CreditCard.aspx" data-theme="b" data-role="button">
        Proceed
    </a>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:21:53.853

Window.location 接受一个字符串。当你作为一个函数制作时，请检查 MDN 以获取文档[Window.location](https://developer.mozilla.org/en/DOM/window.location)

```
function proceed()       
{
   window.location.href="CreditCard.aspx"; // change like this 
} 
```

# animation - Cocos2D Sprite 动画批处理节点问题

> ID：10595117
> 
> 赞同：0
> 
> 时间：2012-05-15T06:19:28.400
> 
> 标签：animation, cocos2d-iphone

我收到以下错误：`'CCSprite is not using the same texture id'`

这就是我正在做的事情：

```
.h file

@interface GameplayLayer : CCLayer <GameplayLayerDelegate> { 
    CCSpriteBatchNode* pointbb;
}

.m file

pointbb = [CCSpriteBatchNode batchNodeWithFile:@"pointsbb.png"];

[self addChild:pointbb];

[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"pointsbb.plist"];

CCSprite* spa = [CCSprite spriteWithSpriteFrameName:@"poi2500001.png"];

[pointbb addChild:spa]; 
```

确切的语法适用于其他动画，但这个。我的正确做法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:48:31.800

如果您要添加 a`CCSprite`作为`CCBatchNode`.. 的子级，请使用来自 batchnode.. 的纹理

用这个方法。。

```
[CCSprite spriteWithBatchNode: rect:] 
```

如果您将精灵添加到图层中，例如`[self addChild:]`..您的代码将完美..

希望这可以帮助。:)

# r - R：plot() 中的 ylim 和 xlab/ylab 用于 grofit 包不起作用

> ID：10595119
> 
> 赞同：0
> 
> 时间：2012-05-15T06:19:31.473
> 
> 标签：r, plot

我正在尝试[为该](http://dl.dropbox.com/u/1791181/grofit.csv)数据中的变量“ipen”与“year”绘制增长样条曲线。我正在使用的代码是：

```
grofit <- read.csv('http://dl.dropbox.com/u/1791181/grofit.csv')
# install.packages(c("grofit"), dependencies = TRUE)
require(grofit)
growth = gcFitSpline(grofit$year, grofit$ipen)
plot(growth) 
```

这工作正常，并产生下面的情节。但问题是（a）我无法使用`xlab`or`ylab`选项更改默认标签，并且（b）我无法`ylim=c(0,100)`在`plot()`语句中将 x 轴的比例更改为（0,100）。`grofit()`我在文档 中找不到任何指针。![这](../Images/7c8e9f7d35e31f40dff6a96a84411c17.png).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:23:27.197

不要直接`plot`在`gcFitSpline`结果上使用，而是`str(growth)`用于探索曲线拟合对象的结构并确定要绘制的内容，或者查看`plot.gcFitSpline`代码（只需在控制台中输入不带括号的函数名称，然后按 Enter！ )

例如：

```
growth = gcFitSpline(grofit$year, grofit$ipen)

plot (grofit$year, grofit$ipen, pch=20, cex=0.8, col="gray", ylim=c(0, 100),
     ylab="Growth", xlab="Year", las=1)
points(growth$fit.time, growth$fit.data, t="l", lwd=2) 
```

这给出了：

![结果grofit图](../Images/0219bb1e572b53239b95e8fa2f87d20b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:09:31.200

实际上，我认为`grofit`文档确实有关于此的指针：

> ...其他图形参数也可以作为参数传递[原文如此]。这目前没有任何效果，仅用于满足通用功能的要求。

您可能必须重写`plot.gcFitSpline`特定于您想要的图形参数的函数，但可能有一个原因，该函数就是它的样子。

顺便说一句，我不确定给您的数据提供与您正在使用的包相同的名称是个好主意。

# assembly - gcc 内联汇编中的绝对和相对寻址

> ID：10595121
> 
> 赞同：1
> 
> 时间：2012-05-15T06:19:40.210
> 
> 标签：assembly, relative-addressing

我无法理解汇编中绝对寻址和相对寻址的概念，尤其是在 gcc 内联汇编中。我在教程中看到了以下代码：

```
asm volatile("         \ 
     cli;                 \ 
     mov %0, %%ecx;       \ 
     mov %1, %%esp;       \ 
     mov %2, %%ebp;       \ 
     mov %3, %%cr3;       \ 
     mov $0x12345, %%eax; \ 
     sti;                 \ 
     jmp *%%ecx           "
                : : "r"(eip), "r"(esp), "r"(ebp), "r"(current_directory->physicalAddr)); 
```

这里最后一条指令 jmp *%%ecx 使用 *. 除了它用于绝对寻址之外，我找不到一个很好的描述星号的意义是什么。我得到这样的想法，绝对意味着实际的物理地址，而相对意味着从程序开始的偏移量。但是我不清楚相对寻址。我在汇编中阅读了有关 PC 相对寻址的信息，但我并不完全理解它，而且我不清楚相对和 PC 相对是否相同。请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:43:56.053

星号没有任何意义。没有星号的指令无效。它是 AT&T 语法的产物，基本上是“将解引用的值加载`ecx`到指令解码器”的助记符，相当于“跳转到 ecx”。

在 Intel 语法中，同样的指令是`jmp ecx`.

寄存器中没有偏移距离的偏移跳转指令。“PC”`ip`在 x86 上被称为（指令指针），“相对”没有任何进一步的上下文通常意味着“相对于`ip`”。

# android - 我如何在 Titanium 中使用 SMTP 邮件？

> ID：10595127
> 
> 赞同：1
> 
> 时间：2012-05-15T06:20:18.680
> 
> 标签：android, iphone, titanium

我想通过 SMTP 服务器的帮助发送邮件。目前我正在使用 CreateEmailDailog 但在此，当按下发送按钮时，会发送邮件。我想通过任何媒体将我的邮件在后台发送。我想使用设置收件人、主题和邮件正文默认值。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:36:32.897

Titanium SDK 中没有现成的 SMTP 支持。您需要使用 TCPSocket 操作来实现自己。

检查[http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.Network.Socket.TCP](http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.Network.Socket.TCP)以获取文档和示例代码。

SMTP 协议很简单。像这样的命令很少；EHLO，发件人，RCPT 至，授权登录，数据，退出。您可以在 RFC 文档中找到所有协议规范。

# spring - 使用加密密码登录在 Spring 安全数据库中不起作用

> ID：10595128
> 
> 赞同：1
> 
> 时间：2012-05-15T06:20:21.190
> 
> 标签：spring, spring-security, spring-3

我制作了一个应用程序，其中我使用了弹簧安全数据库驱动和加密密码。但它不工作。如果我将用户凭据配置为 xml 文件作为加密密码，它可以正常工作。如果有人知道解决方案，请提供帮助。

我使用 org.springframework.security.authentication.encoding.ShaPasswordEncoder.encodePassword("password",null); 对密码进行了编码 如果有人知道解决方案，请重播。谢谢你。

## 这是我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<!-- ADD PERSISTENCE SUPPORT HERE (jpa, hibernate, etc) -->
<bean class="org.apache.commons.dbcp.BasicDataSource" id="dataSource" destroy-method="close" >
        <property name="driverClassName">
            <value>com.microsoft.sqlserver.jdbc.SQLServerDriver</value>
        </property>
        <property name="url">
            <value>jdbc:sqlserver://192.162.101.111;databaseName=test</value>
        </property>
        <property name="username">
            <value>root</value>
        </property>
        <property name="password">
            <value>testroot</value>
        </property>
        <property name="maxActive" value="100"/>
        <property name="maxWait" value="10000"/>
    <property name="maxIdle" value="10"/>
    </bean>

<!--- Spring security configuration --->
<security:http auto-config="true"  >
<!-- Restrict URLs based on role -->
<security:intercept-url pattern="/POC/" access="IS_AUTHENTICATED_ANONYMOUSLY" />
<security:intercept-url pattern="/common/reportgenerator/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />

<security:intercept-url pattern="/common/**" access="ROLE_BIDDER,ROLE_OFFICER" />

<security:intercept-url pattern="/bidder/**" access="ROLE_BIDDER" />
<security:intercept-url pattern="/officer/**" access="ROLE_OFFICER" />

<!--  Override default login and logout pages -->
<security:form-login login-page="/Login"
login-processing-url="/j_spring_security_check"
default-target-url="/"
always-use-default-target="true"
authentication-failure-url="/loginfailed" />
<security:logout logout-success-url="/logout" />
</security:http>

<security:authentication-manager>
       <security:authentication-provider user-service-ref=""  >
       <security:user-service >
        <security:user   name="krupa@egp.com"                           password="c06d3569e5cb23eea69c8e264cbb43d817b95c2d"                     authorities="ROLE_OFFICER" />
    </security:user-service>
    <security:jdbc-user-service data-source-ref="dataSource"
    users-by-username-query="select  emailid username,lower(password)   password,'true' enabled from tbl_LoginDetails where emailid=?"
    authorities-by-username-query="select a.emailid username,b.authority from   tbl_LoginDetails a,tbl_UserRoles b where a.userId=b.userId and a.emailid=?"     />
       <security:password-encoder ref="passwordEncoder" base64="false"/>
    </security:authentication-provider>
</security:authentication-manager>

<bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder"></bean>
</beans> 
```

* * *

## WEB.xml 包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/</url-pattern>
    </filter-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <listener>
            <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
        </listener>
<listener>
        <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<listener>
    <listener-class>
        org.springframework.web.util.Log4jConfigListener
   </listener-class>
</listener>

 <!-- Spring Security filter entry -->
 <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
    </filter-mapping>
</web-app> 
```

* * *

## 控制器详细信息：

```
package com.abc.controller;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.User;

@Controller
@RequestMapping("/")
public class HomeController  
{
    private static Logger logger = Logger.getLogger("controller");
    @RequestMapping
    public String showHome(ModelMap model) {
        logger.debug("this is a sample log message.");

    if(SecurityContextHolder.getContext().getAuthentication().isAuthenticated() && !SecurityContextHolder.getContext().getAuthentication().getPrincipal().toString().equalsIgnoreCase("anonymousUser"))
    {
    User user = null;
    user=(User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();

    System.out.println(SecurityContextHolder.getContext().getAuthentication().getCredentials());

    if(user !=null )
    {
    String name = user.getUsername();
    model.addAttribute("username", name);
    }

 }
return "home";
}

    @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
    public String loginerror(ModelMap model) {
        logger.debug("login failed");
        model.addAttribute("error", "true");
        return "login";

    }

    @RequestMapping(value="/logout")
    public String logout(ModelMap model) {
        logger.debug("log out");
        return "login";
    }

    @RequestMapping(value="/bidder/dashboard")
    public String bidderDashboard(ModelMap model) {
        return "bidder/dashboard";
    }

    @RequestMapping(value="/officer/dashboard")
    public String officerDashboard(ModelMap model) {
        return "officer/dashboard";
    }

} 
```

* * *

## 我的登录 Jsp 页面如下所示：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<html>
<head>
<title>Login Page</title>
<style>
.errorblock {
    color: #ff0000;
    background-color: #ffEEEE;
    border: 3px solid #ff0000;
    padding: 8px;
    margin: 16px;
}
</style>
</head>
<body onload='document.f.j_username.focus();'>
    <h3>Login </h3>

    <c:if test="${not empty error}">
        <div class="errorblock">
            Your login attempt was not successful, try again.<br />                 Caused :<spring:message code="SPRING_SECURITY_LAST_EXCEPTION"           text="Default Text" />
        </div>
    </c:if>

    <form name='f' action="<c:url value='j_spring_security_check' />"
        method='POST'>
        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value=''>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="reset" type="reset" />
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:48:49.700

那真的是您正在运行的配置文件吗？看起来它有一些问题，它

您发布的语法`<authentication-manager>`不正确。您应该有多个`authentication-provider`元素才能配置多个用户数据源进行身份验证。您只有一个，并且`jdbc-user-service`可能会被忽略以支持该`user-service`元素。

该元素没有`password-encoder`关联`user-service`，因此它不适用于编码密码，尽管您说它可以。你确定吗？

确保从 SQL 查询中检索到的密码值与密码编码器为正确密码计算的值完全匹配（手动检查）。

如果这些都没有帮助，请更清楚地解释实际出了什么问题。什么不起作用，您使用的是什么版本号？最重要的是，登录期间调试日志的输出是什么？这很可能为正在发生的事情提供一些指示。

此外，`web.xml`、 控制器和登录页面不太可能与密码编码问题相关（如果您可以使用一种配置成功登录但不能使用另一种配置），因此您可能可以删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:10:24.737

我相信缺少两件事！

1\. on 中不能有两个不同的元素。因此，要么删除其中一个，要么添加另一个身份验证提供者。

2\. 我看不到用户提供的密码在哪里加密。您知道，两个密码（数据库中的密码和用户提供的密码）都应该加密并且相同。

# java - 图像缓存不在列表视图android中

> ID：10595135
> 
> 赞同：0
> 
> 时间：2012-05-15T06:20:54.667
> 
> 标签：java, android, image, caching

大家好，我被图像缓存困住了。我需要使用来自网络的图像填充线性布局。

我正在搜索如何在 android 中缓存图像的示例，并找到了这些示例：

*   [http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html](http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html)
*   [ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

我尝试为我的代码实现它。

```
 String picPath = "https://www.google.lt/logos/classicplus.png";

    try {
        /*
        View v = null;//new View(this);

        ImageLoader loader = new ImageLoader(this);
        ImageView im = (ImageView)this.findViewById(R.id.image);

        loader.DisplayImage(picPath, im);
        addImage( im);*/

          LayoutInflater inflater =(LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           View convertView = inflater.inflate(R.layout.item, null);

        ImageView image = (ImageView)convertView.findViewById(R.id.image);
        ImageDownloader down = new ImageDownloader();
        down.download(picPath, image);
        addImage(image);

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
    public void addImage( View view){

        LinearLayout pubLayout = (LinearLayout)findViewById( R.id.scrollerLinearlayout);

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                 LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

        //setting layout_margin
        params.setMargins(15, 30, 15, 30);
        pubLayout.addView(view,params);

} 
```

然而这并没有奏效。我相信是因为我将视图添加到线性布局并且下载图像时无法重新绘制它？

有一些示例如何使用 ListView 进行图像缓存。但是如果我不使用列表视图该怎么办。

我会编写自己的缓存，但是如何对下载的图像进行回调，因为我想首先将图像添加到布局并在回调时更新它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:38:16.577

你必须在父视图上调用无效

```
 pubLayout.getParent().invalidate(); 
```

# android - 使用 iText 在 Android 中将文本转换为 PDF

> ID：10595138
> 
> 赞同：1
> 
> 时间：2012-05-15T06:20:59.240
> 
> 标签：android, pdf

我尝试使用 iText（[此处](http://www.geek-tutorials.com/java/itext/setup_itext.php)）在 Android 中将文本转换为 PDF，但它给出了“找不到文件”异常。这是代码：

```
try
        {

            PdfWriter.getInstance(document, new FileOutputStream("hello.pdf"));
            document.open();
            document.add(new Paragraph("Hello World"));
            document.close();
            Log.d("OK", "done");
        }
        catch (FileNotFoundException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (DocumentException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:38:03.750

这对我来说很完美，

```
try
    {
        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream(Environment.getExternalStorageDirectory() + "/hello.pdf"));
        document.open();
        document.add(new Paragraph("Hello World"));
        document.close();
        Log.d("OK", "done");
    }
    catch (FileNotFoundException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (DocumentException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

在清单文件中，

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T04:25:51.993

这段代码对我有用......试试这个

尝试 {

```
 String path = Environment.getExternalStorageDirectory()+"/hello/";
        File file = new File(path+"hello.pdf"); 
        if(!file.exists()){
            file.getParentFile().mkdirs();
            try { 
                file.createNewFile(); 

            }
            catch (IOException e) 
            { 
                // TODO Auto-generated catch block e.printStackTrace(); } 
            }
        }

        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream(Environment.getExternalStorageDirectory()
                 +File.separator
                 +"hello" //folder name
                 +File.separator
                 +"hello.pdf"));
        document.open();
        document.add(new Paragraph("Hello World "+txt.getText() ));
        document.add(new Paragraph("Hello World" +txt.getText()));
        document.add(new Paragraph("Hello World" +txt.getText()));
        document.add(new Paragraph("Hello World "+txt.getText()));
        document.close();
        Log.d("OK", "done"); 
```

# c++ - qt项目文件库包括

> ID：10595140
> 
> 赞同：0
> 
> 时间：2012-05-15T06:21:04.483
> 
> 标签：c++, qt, qt-creator

我知道可以加载所需的库

```
LIBS += -L/path/to/lib 
```

最近我发现了这样的东西

```
LIBS        += -L. -L/usr/lib -lphonon -lcurl -ltag -fopenmp -lsayonara_gstreamer 
```

“ **-L.** ”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:34:08.283

大写**-L**增加库*搜索路径*，而小写**-l**添加*库*。然后**-L。**将构建目录添加为一些列出的库的可能配方。

# jquery - （jQuery Highchart）如何使它成为水平条？

> ID：10595141
> 
> 赞同：1
> 
> 时间：2012-05-15T06:21:08.913
> 
> 标签：jquery, graph, charts, highcharts

我需要的正是下面这张图表。
[http://www.highcharts.com/demo/column-stacked](http://www.highcharts.com/demo/column-stacked)

但不幸的是它是垂直的，因为我需要**水平的**。但是，当我更改 时`type: bar`，它会以**分隔条**出现，而原始条则组合在一起。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:41:12.617

在 jsfiddle 上使用以下编码。代码有细微的变化

[http://jsfiddle.net/ayJYV/2/](http://jsfiddle.net/ayJYV/2/)

# database-design - Amazon Web Services：垂直数据库扩展魔法？

> ID：10595145
> 
> 赞同：1
> 
> 时间：2012-05-15T06:21:24.613
> 
> 标签：database-design, amazon-web-services, scalability

我的团队正在考虑使用 AWS 来托管我们的 Ruby on Rails 应用程序。该应用程序完成的大部分工作将在数据库中存储大量数据（现在我们假设它将是 PostgreSQL，因为 RDBMS 非常适合我们的需求），检索它，对其进行一些分析，然后显示在屏幕上向用户显示结果。

我们担心长期的可扩展性。我不认为 CPU 在任何时候都会成为问题（取决于我们决定在哪里进行处理，在数据库中进行处理可能是一个非常糟糕的主意），但我相信数据库本身将成为瓶颈。我了解水平扩展：获取更多数据库，对数据进行分片，完成。但是，我听说有人声称 AWS（或者在这种情况下是 S3？）是如此神奇，以至于您可能不需要水平扩展，至少暂时不需要。

虽然我看不到魔法。我只能说，至少在垂直方面，你能做的最好的事情就是租用具有高 IO 优先级的 60gb RAM 实例之一。不仅您最终要多付一吨（与在问题上扔一打便宜的分片数据库实例相比），而且您仍然有一个瓶颈会被整个系统敲打。根据我的经验，拥有一台单独的数据库机器根本无法很好地扩展，但你可以在没有用户或仍在原型设计时一开始就摆脱它。

我是否正确理解了这一点，还是有更多的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:58:41.253

如果您使用基本上是运行数据库服务器的 EC2 实例的 Amazon RDS，则无法实现垂直扩展。
选择非托管解决方案意味着您设置自己的解决方案并负责不同 EC2 实例上的集群。亚马逊云只是帮助你获得尽可能多的“实例”，你需要扩展，但对软件本身没有帮助。
其他选项是选择 Amazon DynamoDB，它确实为您做垂直扩展

# javascript - 在 IE7 中模拟 localStorage 的问题

> ID：10595150
> 
> 赞同：4
> 
> 时间：2012-05-15T06:21:42.577
> 
> 标签：javascript, internet-explorer-7, local-storage

我有一个带有顶部框架和顶部框架内的两个框架集的应用程序。在导航到其他页面时，顶部框架保持不变，只有框架集发生变化。我使用 localStorage 来存储一些数据（也存储在服务器上，但如果是在客户端我们不会每次都进行往返），这个功能在 IE7 上不可用，所以我们决定尝试模拟 localStorage IE7。

这个想法是在顶部框架上存储一个变量 localStorage（仅当 localStorage 不可用时）。每当 localStorage 在顶部框架上不可用时，我们将创建一个带有 _data、getItem()、setItem()、removeItem() 的虚拟 localStorage 对象。该对象的生命周期将与顶部框架的生命周期一样长，这将为我们节省大量往返服务器的时间，因此在 IE7 中提供了极大的性能提升。

我遇到的问题是，每当我更改框架（不是顶部框架）并且我从顶部框架获取 localStorage 并尝试使用 window.top.localStorage.getItem('...'); 我收到错误消息无法从已释放的脚本中执行代码。

任何想法为什么我得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:33:40.077

我建议您查看[jStorage](http://www.jstorage.info/)`localStorage` ，它为、旧的`globalStorage`或[userData](http://msdn.microsoft.com/de-de/subscriptions/ms531424.aspx)行为提供通用接口。可能您可以直接使用 jStorage（参见[此处](http://www.jstorage.info/#other)）并节省编写相应代码的时间，或者您可以将相同的想法用于您自己的实现。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms533015%28v=vs.85%29.aspx)找到有关旧 userData 行为的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T13:34:07.840

也许我会重复 Brilliand 已经分享的内容，但由于我不完全理解他的回答，我也会分享一些想法/建议：

*   首先确保所有相关框架都托管在同一个域上（包括打开 www.domain.com 上的顶级框架集以及没有“www.”的内部链接）
*   如果您需要跨域脚本，请查看互联网以获取一些相关技巧来实现这一点（[理论](http://tagneto.blogspot.com/2006/06/cross-domain-frame-communication-with.html)）。
*   尝试将所有对 localStorage 的访问包装在顶部框架中的几个函数中可能是值得的（我可以想到一些原因，这些原因理论上可能会导致直接访问顶部框架中的对象出现问题......尽管这应该到目前为止据我所知工作）。
*   尝试重新初始化对子帧的所有引用，例如，您可能忘记在 window.frames 引用前添加“var”，并且在导航后没有重新初始化它（它会解释错误消息，尽管这似乎不太可能发生错误）。
*   *确保不要*在任何子框架内保留对自身的任何引用可能也是值得`top.localStorage`的（尽管同样，它不应该引起任何问题）。
*   您可能需要考虑使用跨平台本地存储包装器。他们倾向于使用IE 中的[专有功能，](http://msdn.microsoft.com/en-us/library/ms531424%28v=VS.85%29.aspx)允许在 IE 中使用类似 localStorage 的功能（最大 1MB，但这应该足够了）。此类库的一个示例是[store.js](https://github.com/marcuswestin/store.js)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:48:10.860

请参阅[导致错误“无法从已释放的脚本中执行代码”的原因](https://stackoverflow.com/questions/83132/what-causes-the-error-cant-execute-code-from-a-freed-script)

当访问由子框架（此后已关闭）创建的代码时，会出现该错误消息。这意味着，至少，在它们来自的窗口关闭后，您不能保留 JavaScript 函数。我不确定这也适用于数据对象，但它可能。如果是这样，那么在顶部窗口中简单地存储 JavaScript 对象将不起作用。

通过确保在存储数据之前将数据与子窗口完全分离，应该可以解决此问题。这可以通过让存储函数（必须由父窗口单独创建）JSON 编码该数据并存储编码字符串来完成。检索将不那么挑剔，因为检索到的对象不需要比检索它的子窗口保留更长的时间。

# c# - 如何将我的时间格式更改为自定义格式

> ID：10595154
> 
> 赞同：-4
> 
> 时间：2012-05-15T06:21:58.940
> 
> 标签：c#, winforms

我正在读取一个时间格式为 10:00 的文本文件为 100000

和 10.30 为 103000。

我想将此 103000 更改为 10:30 和 104500 为 10:45，我不知道该怎么做。

谁能帮帮我吗。

如果有人可以帮助我，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:31:59.737

```
string text = "104500";
var date = DateTime.ParseExact(text, "HHmmss", CultureInfo.InvariantCulture);
var formattedDate = date.ToString("HH:mm"); // "10:45" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T06:32:34.897

看看'DateTime.TryParse'

DateTime parsedTime = DateTime.ParseExact (@"103000", @"HHmmss", null);

然后您可以以您想要的任何格式打印日期。

格式化字符串 = parsedTime.ToString ( "HH:mm:ss" );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:28:28.970

```
string mytext = "103000";
int hour = int.Parse(mytext.Substring(0,2));
int minutes = int.Parse(mytext.Substring(2,2));
int seconds = int.Parse(mytext.Substring(4,2));
string formattedTime = int.hour.ToString() + ":" + int.minutes.ToString().PadLeft(2,'0'); 
```

# java - 是否有用于图像处理的简单 Java 框架？

> ID：10595155
> 
> 赞同：-3
> 
> 时间：2012-05-15T06:22:01.910
> 
> 标签：java, image-processing, frameworks

我需要获得一个包含图像像素的矩阵并对其进行操作。有没有为此编写的/用于Java的框架或库？

或者JDK中有这个功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:27:31.640

[缓冲图像](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)：

> BufferedImage 子类描述具有可访问的图像数据缓冲区的图像。BufferedImage 由 ColorModel 和 Raster 图像数据组成。Raster 的 SampleModel 中波段的数量和类型必须与 ColorModel 表示其颜色和 alpha 分量所需的数量和类型相匹配。

[光栅](http://docs.oracle.com/javase/6/docs/api/java/awt/image/Raster.html)：

> 表示像素矩形阵列的类。Raster 封装了一个存储样本值的 DataBuffer 和一个描述如何在 DataBuffer 中定位给定样本值的 SampleModel。

[图像IO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)：

> 包含用于定位 ImageReaders 和 ImageWriters 并执行简单编码和解码的静态便捷方法的类

# java - 捕获通过 shell 脚本调用的程序抛出的 java NoClassDefFoundError

> ID：10595157
> 
> 赞同：0
> 
> 时间：2012-05-15T06:22:17.147
> 
> 标签：java, shell, unix

我有一个 java 程序，它是 Jasper Reports 的编译器和执行器，通过我们的报告服务器上的 shell 脚本调用。

我刚刚修复了一个由缺少依赖项引起的错误，但我花了一段时间才弄清楚出了什么问题。通常，由编译过程引起的问题会被捕获，记录到日志文件并通过电子邮件发送给相关人员。由于这是一个 NoClassDefFoundError，因此从用户的角度来看，它基本上退出了程序并以静默方式失败。

有什么方法可以让我捕捉到这样的错误，以便它们也可以通过电子邮件发送出去？我有权修改正在执行的 shell 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:45:12.147

通常，错误不会被应用程序代码捕获，而是被抛出到 JVM 级别，并在此打印到 STDERR。因此，跟踪此错误的方法是将 STDERR 重定向到文件：

`java -cp YourMain 1>stdout.log 2>stderr.log`

您还可以将 STDOUT 和 STDERR 放在一起：

`java -cp YourMain 1>&2 2>wholelog.log`

在 web 中有很多关于流重定向的参考资料。如果我的例子不能满足你，你可以看看那里。这取决于您的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:11:48.157

只是可以捕捉到错误，即

```
try {
        numericDefinition = new net.sf.cb2xml.def.BasicNumericDefinition(
                    binName, binarySizes, SynchronizeAt, usePositive, floatSynchronize, doubleSynchronize
            );
} catch (NoClassDefFoundError e) {
        System.out.println("Class Not Found: " + e.getMessage());
} 
```

不过，您确实需要非常小心您的编码，在类初始化时很容易抛出**NoClassDefFoundError**而不会进入 try .. catch 块。

**NoClassDefFoundError**将在第一次引用一个类时抛出，这可能是当一个类使用一个使用一个类的类时，该类使用一个类......它使用一个引用不存在的类的类。

由于导入，以下可能会在类初始化时因**NoClassDefFoundError而失败。**

```
import net.sf.cb2xml.def.BasicNumericDefinition; // could cause the NoClassDefFoundError

     ...........
 try {
            numericDefinition = new BasicNumericDefinition(
                        binName, binarySizes, SynchronizeAt, usePositive, floatSynchronize, doubleSynchronize
                );
    } catch (NoClassDefFoundError e) {
            System.out.println("Class Not Found: " + e.getMessage());
    } 
```

# php - 提交按钮触发的下拉列表过滤器

> ID：10595160
> 
> 赞同：0
> 
> 时间：2012-05-15T06:22:31.363
> 
> 标签：php, html-table, edit

我已经创建了一个过滤器功能，但是我在使用起始表时遇到了问题，如果没有为过滤器选择类别，我希望显示从表中选择的所有数据。到目前为止，如果选择了一个类别，我可以显示所有需要的数据，但前提是选择了一个类别。如果没有选择，它会显示一个空白表。请帮忙，...

这是功能

```
 function listhistoryHost(){
    $accountid=$_SESSION['userid'];
    if(isset($_POST['button'])){

    $filter=$_POST['historyfilter'];

    if($filter==$filter){
    $sql="select * from webhostrequest where status='$filter' order by webhostrequest.recentact desc";
    $result=mysql_query($sql) or die("Error in selecting items ".mysql_error());
        $out="<ul>";
            while($row=mysql_fetch_array($result)){

                $accountid=$row['userid'];
                $requesttitle=$row['requesttitle'];
                $requestid=$row['requestid'];

                echo "<table width=\"100%\" border=\"0\" cellpadding=\"2\">";
                echo "<tr class=\"rowcolor1\">";
                    echo "<td width=\"70%\"><span style=\"padding-left:20px\">Requested Web Hosting for  ".$row["requesttitle"]. "</td>";
                    echo "<td width=\"20%\"><span style=\"padding-left:20px\">Status: " .$row["status"]. "</td>";
                    echo "<td>
                    <center>
                        <form id = \"form1\" method = \"post\" action = \"viewhistorywebhost.php?webhost=$requestid\">
                            <input type = \"submit\" name = \"button\" id = \"button\" value = \"Details\" />
                        </form>
                    </center>";
                echo "</tr>";   
            }
            echo "</table>";
    return $out;
    }
    }
    } 
```

这是表单和触发器

```
 <form id = "form1" method = "post" action = "#">
        <select id="select1" name="historyfilter">
        <option value='' selected disabled>Select item type</option>
            <?php
                $options = array('approved' => 'Approved',
                                'cancelled'=>'Cancelled',
                                'rejected' => 'Rejected');
                foreach($options as $value => $type){
                    echo "<option value=\"$value\">$type</option>";
                }
            ?>
        </select>   
            <input type = "submit" name = "button" id = "submit" value = "Go" />
        </form>
    <?php
        $webhost=new requisition2();
        echo $webhost->listhistoryHost();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:29:10.300

您需要检查 $filter 是否为空

```
if (empty($filter)) {
    $sql="select * from webhostrequest order by webhostrequest.recentact desc";
} else {
    $sql="select * from webhostrequest where status='$filter' order by webhostrequest.recentact desc";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:29:41.327

只需输入 if 条件进行查询

```
function listhistoryHost(){
    $accountid=$_SESSION['userid'];
    if(isset($_POST['button'])){

    $filter=$_POST['historyfilter'];
    $sql="select * from webhostrequest order by webhostrequest.recentact desc";
    if(isset($filter))
       $sql="select * from webhostrequest where status='$filter' order by webhostrequest.recentact desc";

    $result=mysql_query($sql) or die("Error in selecting items ".mysql_error());
        $out="<ul>";
            while($row=mysql_fetch_array($result)){

                $accountid=$row['userid'];
                $requesttitle=$row['requesttitle'];
                $requestid=$row['requestid'];

                echo "<table width=\"100%\" border=\"0\" cellpadding=\"2\">";
                echo "<tr class=\"rowcolor1\">";
                    echo "<td width=\"70%\"><span style=\"padding-left:20px\">Requested Web Hosting for  ".$row["requesttitle"]. "</td>";
                    echo "<td width=\"20%\"><span style=\"padding-left:20px\">Status: " .$row["status"]. "</td>";
                    echo "<td>
                    <center>
                        <form id = \"form1\" method = \"post\" action = \"viewhistorywebhost.php?webhost=$requestid\">
                            <input type = \"submit\" name = \"button\" id = \"button\" value = \"Details\" />
                        </form>
                    </center>";
                echo "</tr>";   
            }
            echo "</table>";
    return $out;
    }
} 
```

# c++ - 在 OpenCV 中将图像转换为彩色铅笔素描

> ID：10595161
> 
> 赞同：4
> 
> 时间：2012-05-15T06:22:32.547
> 
> 标签：c++, c, opencv, image-processing

我想使用 OpenCV 将图像转换为彩色铅笔素描。我已经阅读了[我想在 OpenCV 中将图像转换为铅笔素描](https://stackoverflow.com/questions/5675151/i-want-to-convert-an-image-into-pencil-sketch-in-opencv)的页面 。我寻求的效果就像[http://www.showandtell-graphics.com/photosketch.html](http://www.showandtell-graphics.com/photosketch.html) 我通过代码使用了颜色减淡

```
b_d = (b_2==255? 255: min(255, b_1*255 /(255- b_2)));        
g_d = (g_2==255? 255: min(255, g_1 *255/(255- g_2)));             
r_d = (r_2 ==255? 255: min(255, r_1 *255/(255- r_2))); 
```

似乎工作不太好。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T12:33:38.963

整个过程在您给我们的链接中有详细说明，因此您需要 3 张图像来实现此效果。

制作原始图像的副本并将其转换为[灰度](https://stackoverflow.com/a/9977647/176769)。

制作灰度图像的副本并[反转](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#bitwise-not)此图像。

此时，**图像#1**为原图，**图像#2**为灰度图像，**图像#3**为倒置图像。

然后，将*[颜色减淡](https://stackoverflow.com/a/5925219/176769)*应用于图像**#3**（使其变为白色）并[执行模糊](http://opencv.itseez.com/modules/imgproc/doc/filtering.html?highlight=gaussianblur#gaussianblur)。仅此一项就可以为您提供灰度铅笔素描效果。

如果您希望最终结果是彩色的，则必须将图像#3 与图像#1[混合。](http://opencv.itseez.com/doc/tutorials/core/adding_images/adding_images.html)

寻找有关混合的信息？检查[这个](https://stackoverflow.com/a/3460287/176769)，[这个](http://pt.scribd.com/doc/88285388/21/Adding-blending-two-images-using-OpenCV)和[这个](http://www.aishack.in/2010/07/transparent-image-overlays-in-opencv/)。

# c# - 如何在 Visual Studio 2010 的工具箱中显示自定义属性的帮助？

> ID：10595162
> 
> 赞同：0
> 
> 时间：2012-05-15T06:22:37.353
> 
> 标签：c#, visual-studio-2010

我在 c# 中有一个自定义控件，在其中我定义了两个属性垂直对齐和水平对齐，现在我想在用户设置此属性时在编辑器中显示帮助，如文本框的 textalignment 属性设置。在帮助中我想显示以下选项：

**剩下**

**中心**

**中间**

像组合框帮助我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:43:05.270

我想你正在寻找这个：

您可以提供该物业的摘要，例如

```
/// <summary>
/// Horizontal Alignment : Left, Middle, Right
/// </summary>
public int HorizontalAlign { get; set; } 
```

现在，当您在任何类中访问此属性并将鼠标悬停在编辑器中的水平对齐上时，摘要将显示

摘要标签生成的快捷方式是“///”（就像一个片段）

当您在属性上方键入此内容时，它会自动生成标签，您可以提供描述。

# performance - 提交次数是否会影响 svn 性能

> ID：10595171
> 
> 赞同：2
> 
> 时间：2012-05-15T06:23:08.030
> 
> 标签：performance, svn

经过几次重构之后，我打算一次提交大约 1000 个文件。是否建议提交如此大量的文件，或者我应该分批提交它们。我试图看看利弊。

优点之一是我的所有更改都将在 SVN 中具有相同的条目，并且易于导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:32:32.760

SVN 一次可以处理 1000 个文件。批量检查的唯一原因是为每个批次提供不同的提交消息，例如“已修复错误 #22”和“添加天赋”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:12:34.070

对于小至 1000 个的文件，我不必担心性能，而更多地担心正确的工作流程。1000 个文件是很多文件，因此会有很多变化，但是 Subversion 应该可以很好地处理它。

但是，如果所有更改实际上都不是 1 次更改，那么它不应该是一次提交。例如，如果您要重命名 3 个函数，我会让每个重命名都成为一个单独的提交。根据您具体在做什么，您可能可以通过一次提交侥幸逃脱，但一年后，当您浏览日志时，如果您倾向于坚持小的提交，您的生活将会变得更轻松. 如果真的只有一次更改，那么一次提交绝对是您的最佳选择（例如，重命名一个函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:15:14.333

文件的数量并不重要。当您提交对代码仓库的更改时，您应该考虑构建稳定性和测试合规性。

*这回答了您的问题*：如果您对 n 个文件进行了更改并且只提交了其中一些文件，那么您很可能会破坏构建（甚至不谈论测试）。因此，您应该提交所有必要的文件以至少保证构建完整性。

svn 和其他工具能够很好地处理此类 nb 文件，这将代表服务器上的单个事务。

# c++ - 使用 Code::Blocks、plink 和 makefile 进行远程编译时无法访问环境变量

> ID：10595174
> 
> 赞同：0
> 
> 时间：2012-05-15T06:23:15.497
> 
> 标签：c++, makefile, environment-variables, codeblocks, plink

我正在尝试在 Windows 7 Professional SP1 下设置 Code::Blocks 以在 linux 服务器上进行远程编译（使用 PuTTY 链接-> plink），但我对该主题不太熟悉。这是我使用的手册：

[http://wiki.codeblocks.org/index.php?title=Using_Xming_for_remote_compilation](http://wiki.codeblocks.org/index.php?title=Using_Xming_for_remote_compilation)

我配置代码块如下：

* * *

设置->编译器和调试器->全局编译器设置->工具链可执行文件：

程序文件->制作程序：plink.exe

* * *

项目->属性->项目设置：

生成文件：makefile_name

[检查] 这是一个自定义的 makefile

执行方向：Z:\Path\to\Samba\Share

* * *

项目的构建选项->调试->“制作”命令：

构建项目/目标：

`$make -X -ssh user@linux_server -pw my_great_password make -f $makefile -C /path/to/my/makefile`

编译单个文件：

`$make -X -ssh user@linux_server -pw my_great_password make -f $makefile -C /path/to/my/makefile $file`

清洁项目/目标：

`$make -X -ssh user@linux_server -pw my_great_password make -f $makefile clean -C /path/to/my/makefile`

询问是否需要重建：

`$make -X -ssh user@linux_server -pw my_great_password make -q -f $makefile -C /path/to/my/makefile`

静音构建：

`$make -X -ssh user@linux_server -pw my_great_password make -s -f $makefile -C /path/to/my/makefile`

顺便说一句，我是在 linux 服务器上调用编译器/链接器，还是 Code::Blocks 本身在 linux 服务器上编译和链接源代码？原谅我的无知。

* * *

我现在面临的问题是我无法访问makefile中的环境变量：

`include $(MY_ENV_VAR)/path/to/another/makefile`

我收到的错误让我假设，它`MY_ENV_VAR`仍然是空的：

`/path/to/another/makefile: No such file or directory`

我检查了 Code::Blocks 是否尝试解析我的 Windows 计算机的环境变量，但事实并非如此。

* * *

附加信息：

代码::块版本：

`Version: 10.05, Build: May 27 2010, 19:10:05 - wx2.8.10 (Windows, unicode) - 32 bit`

Linux服务器：

`Linux linux_server 2.6.18-238.el5 #1 SMP Sun Dec 19 14:22:44 EST 2010 x86_64 x86_64 x86_64 GNU/Linux`

如果需要，我可以提供更多信息。我也欢迎其他建议，以在 Windows 上实现在 linux 机器上的远程编译。或者是另一个IDE更适合做远程编译？

感谢阅读/帮助。

* * *

编辑：

我发现有人对 NetBeans IDE 有类似的问题：

[http://forums.netbeans.org/topic37974.html](http://forums.netbeans.org/topic37974.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:56:16.690

根据[this stackoverflow post](https://stackoverflow.com/questions/3407386/plink-does-not-source-bashrc-or-bash-profile-on-connect)和[this fixunix post](http://fixunix.com/ssh/74174-different-remote-environment-variables-putty-plink.html)我可以弄清楚，当您通过putty连接时，plink不会执行启动脚本。所以我意识到 Code::Blocks 在我尝试远程编译时遇到的困难是无辜的。

就我而言，我必须显式获取登录脚本`~/.login`才能访问我的环境变量。例如，对于 make 命令，这意味着：

```
$make -X -ssh user@linux_server -pw my_great_password "source ~/.login;make -f $makefile" -C /path/to/my/makefile 
```

这样就可以远程编译我的软件。为了启动应用程序，我添加了一个构建后步骤：

```
cmd /c "C:\Program^ Files\PuTTY\putty.exe -load my_session -pw my_great_password" 
```

在密码中，我不得不转义一个 & 字符：（`^&`顺便说一下，使用私钥而不是硬编码密码的原因有很多）。这会加载一个存储的 PuTTY 会话，该会话具有以下远程命令：

```
source ~/.login;/path/to/my/application/my_application;$< 
```

我正在使用 C shell。因此，我曾经`$<`等待用户输入（回车键）。现在我可以通过点击构建按钮来编译和运行我的应用程序。希望这有助于其他人配置 Code::Blocks 以进行远程编译。如果您遇到更多问题或想提供更多信息/建议，请发表评论。

# ios - ios dev以编程方式增加单元格内容大小

> ID：10595179
> 
> 赞同：2
> 
> 时间：2012-05-15T06:23:39.830
> 
> 标签：ios, uiimageview

我想增加我这样设置的单元格图像的大小，在表格视图的索引路径代表处的行单元格中

```
UIImageView * imgGrayCell = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 90)];
imgGrayCell.tag = 95;
[imgGrayCell setImage:[UIImage imageNamed:@"cell.png"]];
[cell.contentView addSubview:imgGrayCell];
[imgGrayCell release]; 
```

现在在某些单元格中我有很多文本要显示，现在我面临的问题是，如果我使用 heightForRowAtIndexPath 增加单元格大小，单元格图像的大小保持不变并且不会增加我想增加两者的大小，如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:56:46.103

排序方式如下...

写入**CellForRowAtIndexPath**

```
UIImageView * imgGrayCell = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, cell.frame.size.height)]; 
```

**这里在创建 imageview 的单元格高度时动态确定**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:43:15.293

您还可以动态设置图像大小并在 .h 类中声明，当您以相同的方法增加单元格的高度时，您可以根据单元格的高度增加图像高度并刷新您的表格。

# linux - 在 windows 环境下运行 Linux Shell 脚本

> ID：10595182
> 
> 赞同：1
> 
> 时间：2012-05-15T06:23:52.880
> 
> 标签：linux, bash, shell, unix, scripting

我一直在尝试在 Windows 机器上运行 Linux shell 脚本。要在 windows 环境下运行脚本，我选择了 Cygwin。

当我第一次开始使用 cygwin 运行脚本时，我首先遇到了以下问题。

```
line 12: $'\r': command not found 
```

但第 12 行没有任何命令

```
 08  #
  09  ######################################################################
  10  #### PARAMETERS TO SET BEGIN
  11  ######################################################################
  12  
  13  # archive setttings
  14  ARCHIVE_USER=abc                      # archive storage user name  (default)
  15  ARCHIVE_GROUP=app                     # archive storage user group (default)
  16  ARCHIVE_PATH=/test/file               # archive storage directory (default)
  17  ARCHIVE_DELAY=+8 
```

为了解决这个问题，使用了 dos2unix 命令并从旧的生成了新的 shell 脚本

当我运行这个新生成的脚本时，它再次返回错误

```
housekeeper.sh: 2: Syntax error: newline unexpected 
```

以下是 dos2unix 生成的脚本。

```
>#!/bin/bash
>>#
>># Date  : 2012-03-22 (yyyy-mm-dd) 
```

有人可以解释一下这里的第 2 行有什么问题吗？

提前感谢您的帮助

以下是我尝试运行的脚本的顶部，这是我使用 dos2unix 命令转换后得到的脚本

```
>#!/bin/bash
>>#
>># Date  : 2012-03-22 (yyyy-mm-dd)
>># Modified by   : ABC
>># Goal          : Draft version for X house keeping environment
>>#
>># Description : This script perform housekeeping of XYS products.
>>#
>>######################################################################
>>#### PARAMETERS TO SET BEGIN
>>######################################################################
>>
>># archive setttings
>>ARCHIVE_USER=user1                               # archive storage user name (default)
>>ARCHIVE_GROUP=gapp                              # archive storage user group (default)
>>ARCHIVE_PATH=/product/file                        # archive storage directory (default)
>>ARCHIVE_DELAY=+8                              # archive files older than delay (in days)
>>
>># purge setttings
>>PURGE_DELAY=+30                                   # purge files older than delay   (in days) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:39:01.577

它看起来好像你的脚本在每一行的开头都有一个“>”。

那是行不通的。

你的第一行必须是`#!/bin/bash`，不是`>#!/bin/bash`。

要删除前导 '>' 字符，请尝试以下命令：

```
sed -i.bak 's/^>*//' housekeeper.sh 
```

（假设您的脚本名为 housekeeper.sh）。

这将制作带有`.bak`扩展名的脚本的备份副本，并从文件中的每一行中删除所有前导大于号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:39:34.583

这听起来像是一个换行问题（Windows 使用回车，换行和 Unix 只使用换行）。`dos2unix`您可以使用(and )更正这些问题`unix2dos`，它会转换行终止符。

尝试：

```
$ dos2unix myscript.sh 
```

# eclipse-plugin - Eclipse RCP 依赖突然被忽略

> ID：10595188
> 
> 赞同：1
> 
> 时间：2012-05-15T06:24:20.293
> 
> 标签：eclipse-plugin, dependencies, eclipse-rcp, dependency-management

我正在使用 Eclipse 3.5 开发 Eclipse RCP 应用程序。

我的问题是，当我在两个插件之间添加依赖项时，另一个插件的类突然似乎被忽略并显示编译错误。这是设置：

*   一个核心插件
*   一个依赖core的插件M1
*   一个插件 M2 也依赖于核心

当我将依赖项从 M2 添加到 M1 时，来自 M2 中“核心”的每个类都显示为编译错误。

当我删除此依赖项时，一切都会恢复正常：M2 中使用的核心类现在可以正确编译。

有人见过这个吗？:-)

谢谢你的帮助！

按照要求：

**核心清单：**
清单版本：1.0
捆绑清单版本：2
捆绑名称：mysoftware 核心
*捆绑符号名称：com.mycompany.mysoftware.core;singleton:=true*
捆绑版本：2.7.2.qualifier
要求捆绑：组织。 eclipse.core.runtime,
org.eclipse.ui,
org.eclipse.gef,
org.eclipse.ui.views.log,
org.eclipse.equinox.p2.artifact.repository,
org.eclipse.equinox.p2.core,
org.eclipse.equinox.p2.director、
org.eclipse.equinox.p2.engine、
org.eclipse.equinox.p2.metadata、
org.eclipse.equinox.p2.metadata.repository、
org.eclipse.equinox.p2。存储库，
org.eclipse.equinox.p2.updatesite，
org.eclipse.equinox.p2.extensionlocation、
org.eclipse.ecf、
org.eclipse.ecf.filetransfer、
org.eclipse.ecf.identity、
org.eclipse.ecf.provider.filetransfer、
org.eclipse.ecf.provider。 filetransfer.httpclient、
org.apache.commons.codec、
org.apache.commons.httpclient、
org.eclipse.equinox.frameworkadmin.equinox、
org.eclipse.equinox.simpleconfigurator.manipulator、
org.eclipse.equinox.p2.touchpoint。 natives,
org.eclipse.equinox.frameworkadmin,
org.eclipse.equinox.p2.touchpoint.eclipse,
org.eclipse.equinox.p2.garbagecollector
Bundle-RequiredExecutionEnvironment: J2SE-1.5
Bundle-ClassPath: .,
libs/jaxb-api- 2.1.jar,
libs/jaxb-impl-2.1.8.jar、
libs/activation-1.1.jar、
libs/persistence-api-1.0.jar、
libs/stax-api-1.0-2.jar、
libs/jcalendar-1.3.2。 jar、
libs/log4j-1.2.13.jar、
libs/miglayout-3.7.jar、
libs/xalan-2.6.0.jar、
libs/xercesImpl-2.4.0.jar、
libs/glazedlists-1.7.0_java15.jar、
libs/jcommon-1.0.16.jar、
libs/jfreechart-1.0.13-experimental.jar、
libs/jfreechart-1.0.13-swt.jar、
libs/jfreechart-1.0.13.jar、
libs/swtgraphics2d.jar、
libs/org.sf.feeling.swt.win32.extension_1.0.5.v20081205.jar、
libs/junit-4.5.jar、
libs/dsn.jar、
libs/imap.jar、
libs/mailapi.jar、
libs/smtp。罐，
libs/jnotify-0.93.jar、
libs/groovy-all-1.7.6.jar、
libs/joda-time-2.0.jar、
libs/commons-io-2.0.1.jar
捆绑激活器：com.mycompany.mysoftware .rcp.main.Activator
导出包：ca.odell.glazedlists、
ca.odell.glazedlists.event、
ca.odell.glazedlists.gui、
ca.odell.glazedlists.impl、
ca.odell.glazedlists.impl.adt、
ca.odell.glazedlists.impl.adt.barcode2、
ca.odell.glazedlists.impl.adt.gnutrove、
ca.odell.glazedlists.impl.beans、
ca.odell.glazedlists.impl.ctp、
ca.odell.glazedlists。 impl.filter、
ca.odell.glazedlists.impl.gui、
ca.odell.glazedlists.impl.io、
ca.odell.glazedlists.impl.java15、
ca.odell.glazedlists.impl.matchers、
ca.odell.glazedlists.impl.nio、
ca.odell.glazedlists.impl.pmap、
ca.odell.glazedlists.impl.rbp、
ca.odell.glazedlists.impl.sort、
ca.odell.glazedlists.impl.swing、
ca.odell.glazedlists.impl.swt、
ca.odell.glazedlists.io、
ca.odell.glazedlists.jfreechart、
ca.odell.glazedlists.matchers、
ca.odell.glazedlists。 migrationkit、
ca.odell.glazedlists.migrationkit.swing、
ca.odell.glazedlists.migrationkit.swt、
ca.odell.glazedlists.nachocalendar、
ca.odell.glazedlists.swing、
ca.odell.glazedlists.swt、
ca.odell。 glazedlists.util.concurrent,
com.mycompany.mysoftware.config.common,
com.mycompany.mysoftware.config.extensions,
com.mycompany.mysoftware.config.generators.common,
com.mycompany.mysoftware.core,
com.mycompany.mysoftware.core.configs,
com.mycompany.mysoftware.core.extensions,
com.mycompany.mysoftware.core.jobs、
com.mycompany.mysoftware.core.logging、
com.mycompany.mysoftware.core.preferences、
com.mycompany.mysoftware.exception、
com.mycompany.mysoftware.model、
com.mycompany。 mysoftware.model.common,
com.mycompany.mysoftware.model.extensions,
com.mycompany.mysoftware.model.interfaces,
com.mycompany.mysoftware.model.utils,
com.mycompany.mysoftware.properties,
com.mycompany.mysoftware.rcp.actions.common,
com.mycompany.mysoftware.rcp.common,
com.mycompany.mysoftware.rcp.common.ui,
com.mycompany.mysoftware.rcp.common.ui.actionicons,
com. mycompany.mysoftware.rcp.common.ui.components,
com.mycompany.mysoftware.rcp.dialogs.common,
com.mycompany.mysoftware.rcp.dialogs.components,
com.mycompany.mysoftware.rcp.dialogs.components.validators,
com.mycompany.mysoftware.rcp.dialogs.editors、
com.mycompany.mysoftware.rcp.dialogs.misc、
com.mycompany.mysoftware.rcp.editors.appmap、
com.mycompany.mysoftware.rcp.extensions、
com.mycompany。 mysoftware.rcp.gef.actions,
com.mycompany.mysoftware.rcp.gef.common,
com.mycompany.mysoftware.rcp.gef.editpolicies,
com.mycompany.mysoftware.rcp.gef.extensions,
com.mycompany.mysoftware.rcp.gef.figures.common,
com.mycompany.mysoftware.rcp.gef.parts,
com.mycompany.mysoftware.rcp.gef.parts.common、
com.mycompany.mysoftware.rcp.main、
com.mycompany.mysoftware.rcp.views、
com.mycompany.mysoftware.rcp.views.common、
com.mycompany。 mysoftware.rcp.views.logs，
com.mycompany.mysoftware.security.providers.extensions，
com.mycompany.mysoftware.services.providers.extensions，
com.mycompany.mysoftware.tools，
com.mycompany.mysoftware.tools.compare，
com.mycompany.mysoftware.tools.groovy，
com.mycompany.mysoftware.utils.misc，
com.mycompany.mysoftware.utils.misc.convert、
com.mycompany.mysoftware.utils.misc.xml、
javax.activation、
javax.mail、
javax.xml.bind、
javax.xml.bind.annotation、
javax.xml。 bind.annotation.adapters,
javax.xml.bind.attachment,
javax.xml.bind.helpers,
javax.xml.bind.util,
net.miginfocom.swt,
org.apache.log4j,
org.apache.log4j.spi,
org.apache.xml.serializ
捆绑本地化：插件
捆绑供应商：mycompany

**Module1 Manifest**
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: mysoftware mycompany Module1 Plug-in
*Bundle-SymbolicName: com.mycompany.mysoftware.mycompanyModule1;singleton:=true*
Bundle-Version: 2.7.2.qualifier
Eclipse-RegisterBuddy : com.mycompany.mysoftware.deps.mycompany
Bundle-Activator: com.mycompany.mysoftware.mycompanyModule1.Activator
Require-Bundle: org.eclipse.ui,
org.eclipse.core.runtime,
*com.mycompany.mysoftware.core,*
com .mycompany.mysoftware.weblogic,
com.mycompany.mysoftware.shares,
com.mycompany.mysoftware.deps.mycompany,
com.mycompany.mysoftware.jboss,
com.mycompany.mysoftware.jee,
com.mycompany.mysoftware.deps.jboss
Bundle-ActivationPolicy：惰性
Bundle-RequiredExecutionEnvironment：JavaSE-1.6
Bundle-ClassPath：.,
libs/commons-collections-3.2.jar,
libs/groovy-all-1.7.6.jar,
libs /velocity-1.7.jar、libs/commons-lang-2.4.jar、libs/axis-1.4.jar、libs/commons-discovery-0.2.jar 捆绑供应
商
： mycompany 出口包装：com.mycompany.mysoftware.mycompanyModule1 .cmdb， com.mycompany.mysoftware.mycompanyModule1.jboss， com.mycompany.mysoftware.mycompanyModule1.jboss.deployment， com.mycompany.mysoftware.mycompanyModule1.jmx.engine， com.mycompany.mysoftware.mycompanyModule1.naming，

com.mycompany.mysoftware.mycompanyModule1.network,
org.apache.commons.collections

**Module2 Manifest**
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: mysoftware mycompany Module2
*Bundle-SymbolicName: com.mycompany.mysoftware.mycompanyModule2;singleton:=true*
Bundle-Version: 2.7.2.qualifier
Bundle-Activator: com. mycompany.mysoftware.mycompanyModule2.Activator
Bundle-Vendor: mycompany & Cie
Require-Bundle: org.eclipse.ui,
org.eclipse.core.runtime,
*com.mycompany.mysoftware.core,*
org.eclipse.gef,
com.mycompany。 mysoftware.deps.jboss
Bundle-RequiredExecutionEnvironment：JavaSE-1.6
Bundle-ActivationPolicy：惰性
导出包：com.mycompany.mysoftware.mycompanyModule2
Bundle-ClassPath：.,
库/junit-4.5.jar

添加依赖项只是在 Module2 清单的“Require-Bundle”部分中在线添加，符号名称为 Module1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:26:44.860

您是否尝试过将 core 的依赖从 m1 重新导出到 m2？您可以通过打开 m1 的清单编辑器来执行此操作，然后在依赖项选项卡中，选择核心并单击属性按钮。然后可以选择重新导出插件的代码。

例如，如果您有`m2 <- m1 <- core`，那么“通过”m1 重新导出核心依赖项应该使它们在 m2 中可见。

希望这可以帮助

# jquery - 查找具有某些 id 模式的元素

> ID：10595192
> 
> 赞同：0
> 
> 时间：2012-05-15T06:24:56.990
> 
> 标签：jquery, jquery-selectors

我动态生成标记并`id`为输入元素生成标记：

```
<div class="wrap_input fancy_form" style="margin-bottom: 10px; margin-top: 28px;">
        @foreach(var seatType in Model.UsingSeatType)
        {
            int i = 1;
            <p class="inp_label" style="width: 50px;">@(seatType.Value):</p>
            <i>&nbsp;</i>
            <input type="text" id="type@(i)" value="" data-price=""  style="width: 50px;" />
            i++;
        }
    </div> 
```

如何找到所有这些输入（type1、type2、type3 等）？

```
 $("#type?").spinner(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:26:50.247

试试这段代码

```
$('.wrap_input.fancy_form input[type=text][id^=type]').spinner(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:28:32.230

您如何进行以下更改：

为您的输入添加一个类：

```
<input class="seat_type" type="text" id="type@(i)" value="" data-price=""  style="width: 50px;" /> 
```

在类上使用 jQuery 选择器

```
$(".seat_type").spinner(); 
```

我建议进行这些更改，因为它对大多数人来说更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:27:07.640

你可以试试这个：

```
$('input[id^="type"]').spinner(); 
```

更多信息[在这里](http://api.jquery.com/attribute-starts-with-selector/)。

# iphone - 在 iPhone 中计算精确距离

> ID：10595196
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:17.163
> 
> 标签：iphone, core-location

我正在尝试使用 Core Location 框架计算从开始的距离，但是当我将应用程序放在 iPhone 设备上时，数据不正确。距离不断波动并显示随机数据。请帮帮我。此外，高度显示为零。

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{

    //Altitude
    if(startingPoint==nil)
        self.startingPoint=newLocation;

    NSString *currentAltitude = [[NSString alloc] initWithFormat:@"%g",                                                          
                                 newLocation.altitude];

    heightMesurement.text=currentAltitude;
    [currentAltitude release];

    //Distance

    if(startingPoint==nil)
        self.startingPoint=newLocation;
    //if(newLocation.horizontalAccuracy <= 100.0f) { 
    //    [locationManager stopUpdatingLocation]; 
    //}

    //test start.......................................................

    //startlocation
    NSString *sp = [[NSString alloc] 
                            initWithFormat:@"%f",startingPoint];
    NSLog(@"\nStarting point=%@",startingPoint);
    ssp.text=sp;

    //endlocation

    NSString *ep = [[NSString alloc] 
                    initWithFormat:@"%f",newLocation]; 
    NSLog(@"\nStarting point=%@",newLocation);
    eep.text=ep;
    //test end............................................................

    CLLocationDistance mydistance=[newLocation distanceFromLocation:startingPoint];

    NSString *tripString = [[NSString alloc] 
                            initWithFormat:@"%f",mydistance]; 
    distLabel.text=tripString;

    [tripString release];
    //test........................

    [sp release];
    [ep release];

}//Location Manager ends..

//Time interval of 3 sec....
-(void)locationUpdate:(NSTimer*)timer{

    if(timer != nil) [timer invalidate];

    [self.locationManager startUpdatingLocation];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:48:18.863

至于为什么您的高度可能为零，请[参阅this answer to a similar question](https://stackoverflow.com/questions/4870480/ios-corelocation-altitude)。

这可能只是您的`NSLog`陈述的问题，但是起点和终点都打印出带有以下内容的`NSLog`陈述

```
NSLog(@"\nStarting point=%@", 
```

您似乎安排了一个 3 秒计时器的方式并不是 iOS 真正希望您使用的方式`CLLocationManager`。首选方法是告诉`CLLocationManager`您的位置标准是什么，然后开始更新。您实际上不需要一直告诉它每 3 秒开始更新一次。您可以只执行一次，然后如果您决定不再需要更新，请致电

```
[locationManager stopUpdatingLocation]; 
```

如果操作系统没有新的位置信息，那么继续询问可能没有意义。当它有新的位置信息时，它会通过 告诉你`locationManager:didUpdateToLocation:fromLocation`。所以，我建议更像这样开始这个过程：

```
 CLLocationManager* locationManager = [[CLLocationManager alloc] init];
    if ([locationManager locationServicesEnabled]) {
        Reachability* netStatus = [Reachability sharedReachability];
        if (([netStatus internetConnectionStatus] != NotReachable) || ([netStatus localWiFiConnectionStatus] != NotReachable)) {
            locationManager.delegate = self;
            locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
            locationManager.distanceFilter = 100.0;  // 100 m, or whatever you want
            [locationManager startUpdatingLocation];
        } else {
            // TODO: error handling
        }
    }
    self.locMgr = locationManager;
    [locationManager release]; 
```

位置管理器通常会为您提供多个结果，随着它在您的位置上不断增加准确性。如果你不断地重新启动它，我想知道这是否会导致它出现问题。

# wix - 为什么卸载后没有删除开始菜单快捷方式？

> ID：10595197
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:18.187
> 
> 标签：wix, windows-installer

当我安装 .msi 文件时，我在开始菜单和桌面上生成了快捷方式，但是当我卸载桌面快捷方式时，桌面快捷方式被删除但开始菜单。我的代码如下。请帮我解决我的问题。我已经花了将近 1 天的时间。

```
<Directory Id="ProgramMenuFolder">
   <Directory Id="ProgramMenuSubfolder" Name="Kiosk">
      <Component Id="ApplicationShortcuts" Guid="12345678-1234-1234-1234-333333333333">
         <Shortcut Id="ApplicationShortcut1" Name="Kiosk" Description="Solusoft Product" Target="[INSTALLDIR]AMP\1.0.0.0\mpkiosk.exe" WorkingDirectory="INSTALLDIR"/>
         <RegistryValue Root="HKCU" Key="Software\Kiosk" Name="installed" Type="integer" Value="1" KeyPath="yes"/>
         <RemoveFolder Id="ApplicationShortcut1" On="uninstall"/>
      </Component>
   </Directory>
</Directory> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-04T09:50:22.067

就我而言，在组件上，我有 GUID="*" 并且没有删除快捷方式。

我使用了硬编码的 GUID，例如： Guid="cc509cb7-c1a1-46cf-8c62-7cbb0017783c" 并删除了快捷方式。

问候。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T12:22:16.573

你的代码有错误。

代替：

```
<RemoveFolder Id="ApplicationShortcut1" On="uninstall"/> 
```

利用：

```
<RemoveFolder Id="ProgramMenuSubfolder" On="uninstall"/> 
```

这应该这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-16T06:02:19.350

就我而言，我尝试了不同的选项，并且有一个注释掉的部分具有相同的 GUID。将其更改为不同的 GUID，即使另一个被注释掉，也有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:02:44.590

下面是我在我的项目中使用的代码。希望，它会有所帮助。我认为您可以使用**“RemoveFile”**而不是**“RemoveFolder”**，并且不要忘记将**“Name”**属性放入其中。

```
 <RegistryKey Action="createAndRemoveOnUninstall" Root="HKCU"
                         Key="Software\$(var.ManufacturerEng)\$(var.ProductName)\$(var.ApplicationName)">
                <RegistryValue Name="ShortcutService"
                               Type="integer" Value="1"
                               KeyPath="yes">
                </RegistryValue>
            </RegistryKey>
            <Shortcut Advertise="no" Directory="ApplicationProgramsFolder"
                      Name="ServiceCC"
                      Target="[INSTALLLOCATION]Service.exe"
                      Id="SHORTCUT_serv"
                      WorkingDirectory="INSTALLLOCATION">
            </Shortcut>
            <RemoveFile Id="remove_serviceshort" Name="ServiceCC" On="uninstall"/>
            <RemoveFolder Id="ApplicationProgramsFolder" On="uninstall"/>
        </Component> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-16T10:24:46.363

就我而言，这是一个复制粘贴错误。我为组件使用的 Guid 与我在该文件夹中为其创建快捷方式的另一个产品相同。因此在卸载时删除图标失败

# shell - 在 Suse linux 10 中自动（Shell 脚本）安装 RPM 包？

> ID：10595199
> 
> 赞同：1
> 
> 时间：2012-05-15T06:25:22.883
> 
> 标签：shell, rpm

我正在尝试编写一个 shell 脚本来安装某些 RPM 包，但是其中一个包触发了一个需要用户干预的配置窗口。我想自动安装软件包。rpm中是否有任何开关或任何使其自动化的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:55:37.467

RPM 打包中的黄金法则之一是您的安装/卸载永远不会，绝对永远不会是交互式的。我不会触摸打开带有 10 英尺杆的配置窗口的 RPM 包。如果它们是您的，您需要重做这些 RPM。如果它们不是您的，我也会通过提供某种默认配置而不是执行该配置窗口来重做它们。

# python - Python字符串操作

> ID：10595200
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:25.933
> 
> 标签：python, string

我想得到以下输出：

```
"my_www.%first_game_start_time%("REN", "233_736")" 
```

请你告诉我下面的代码有什么问题：

```
u = "my_www.%%first_game_start_time%%(%s, %s)" %("REN", "233_736") 
```

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:37:15.007

如果您询问如何嵌入`"`字符串，三引号是一种简单的方法

```
u = """my_www.%%first_game_start_time%%("%s", "%s")"""%("REN", "233_736") 
```

`"`另一种方法是逃避`\`

```
u = "my_www.%%first_game_start_time%%(\"%s\", \"%s\")"%("REN", "233_736") 
```

由于您`'`在字符串中没有，您也可以使用它们来分隔字符串

```
u = 'my_www.%%first_game_start_time%%("%s", "%s"))'%("REN", "233_736") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:28:36.097

通常，您需要发布您的预期输出并指出该输出与您收到的输出之间的区别，或者包含您收到的错误消息，以获得可用的答案。但是，我怀疑问题是您希望将 的值`c`插入到字符串中`u`，而不是插入文字字母`c`。如果是这种情况，解决方案是：

```
c = "222"
u = "my_www.%%first_game_start_time%%(%s, %s, %s)" %("REN", "233_736", c) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:29:34.557

我猜你想要这个：

```
c = "222"
u = "my_www." + first_game_start_time("REN", "233_736", c) 
```

# api - Whiskerboard 的 REST API

> ID：10595202
> 
> 赞同：2
> 
> 时间：2012-05-15T06:25:29.340
> 
> 标签：api, rest, status

在使用 REST API 实现状态板时，我需要一些帮助。我已经找到了两个最好的选择（在我看来）：Stashboard 和 Whiskerboard。

我已经尝试过 Whiskerboard，我发现它很容易安装和部署，因为它不需要在本地使用 Google App Engine 的 SDK。但是，我需要类似 Stashboard 的 REST API：[http ://readthedocs.org/docs/stashboard/en/latest/restapi.html](http://readthedocs.org/docs/stashboard/en/latest/restapi.html)

我知道 Whiskerboard 是基于 Stashboard 的，所以它们可能具有相同的 REST API。但我似乎找不到关于 Whiskerboard 的 REST API 的任何文档。此外，我查看了每个状态板的模型，并且有很多差异，与 Stashboard 相比，Whiskerboard 的模型要简单得多，因此它们不能具有相同的 REST API。

如果有人能给我提供一个指向 Whiskerboard 的 REST API 的链接，我将不胜感激，这应该很像 Stashboard 的。如果真的没有，仍然可以建议其他一些解决方案。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:22:34.887

不，它没有相同的 REST API。你可以通过阅读代码找到这一点。如果您想要一个类似的 REST API，您有以下选项：

1.  自己编写功能代码。
2.  向 Whiskerboard 的开发人员询问该功能。
3.  请组织中的其他人编写代码并贡献该功能。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:36:22.707

您可以查看由 sijis 和我本人 jvasallo 分叉的这个解决方案，我们一直在努力。他为whiskerboard 分叉了repo，并为其添加了一个API。仍然使用 Django，最近我做了一些将它移植到 1.5.1 的工作。最初，Whiskerboard 是一个 1.3 的 Django 应用程序。

[https://github.com/sijis/whiskerboard](https://github.com/sijis/whiskerboard)

# android - 如何在 Android 中播放实时流媒体视频

> ID：10595204
> 
> 赞同：3
> 
> 时间：2012-05-15T06:25:37.203
> 
> 标签：android, streaming, live, android-video-player

在我的项目中，我需要播放实时流媒体视频。我看到很多评论说“仅从 3.0 开始支持直播”，所以我必须使用模拟器 3.0。但它不播放。任何人都可以帮我..这是我的代码：

```
String SrcPath="http://akamedia2.lsops.net/live/smil:cnbc_en.smil/playlist.m3u8";
myVideoView = new VideoView(this);
myVideoView.setVideoURI(Uri.parse(SrcPath));
setContentView(myVideoView);
myVideoView.setMediaController(new MediaController(this));
myVideoView.requestFocus();
myVideoView.setOnErrorListener(new OnErrorListener() {

    public boolean onError(MediaPlayer mp, int what, int extra) {
        // TODO Auto-generated method stub

        return false;
    }
});
myVideoView.setOnPreparedListener(new OnPreparedListener() {

    public void onPrepared(MediaPlayer mp) {
        // TODO Auto-generated method stub
         myVideoView.start();
    }
}); 
```

以下 logcat 用于此：

```
Generated scanline__00000177:03515104_00001002_00000000 [ 87 ipp] (110 ins) at [0x477ba6f0:0x477ba8a8] in 606126 ns
V/TLINE   (  360): new: android.text.TextLine@40643358
D/MediaPlayer(  360): Couldn't open file on client side, trying server side
I/ActivityManager(   65): Displayed com.leadapps.android/.LivestreamTest: +1s834ms
D/MediaPlayer(  360): getMetadata
E/MediaPlayerService(   33): getMetadata failed -38
I/LiveSession(   33): onConnect 'http://akamedia2.lsops.net/live/smil:cnbc_en.smil/playlist.m3u8'
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/playlist.m3u8 @0
D/dalvikvm(  144): GC_EXPLICIT freed 929K, 13% free 14528K/16583K, paused 3ms+3ms
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/chunklist-b33000.m3u8?wowzasessionid=1036169757 @0
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/media-b33000_7023.aac?wowzasessionid=1036169757 @0
E/LiveSession(   33): This doesn't look like a transport stream...
I/LiveSession(   33): Retrying with a different bandwidth stream.
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/chunklist-b120000.m3u8?wowzasessionid=1036169757 @0
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/media-b120000_7092.ts?wowzasessionid=1036169757 @0
D/dalvikvm(  192): GC_EXPLICIT freed 148K, 5% free 6720K/7047K, paused 4ms+4ms
I/NuHTTPDataSource(   33): connect to akamedia2.lsops.net:80/live/smil:cnbc_en.smil/media-b120000_7093.ts?wowzasessionid=1036169757 @0
I/avc_utils(   33): found AVC codec config (480 x 256, Baseline-profile level 3.0)
I/ESQueue (   33): found AAC codec config (24000 Hz, 1 channels)
F/ACodec  (   33): frameworks/base/media/libstagefright/ACodec.cpp:1594 CHECK_EQ( omx->allocateNode(componentName.c_str(), observer, &node),(status_t)OK) failed: -2147483648 vs. 0
I/DEBUG   (   31): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   31): Build fingerprint: 'generic/sdk/generic:3.0/HONEYCOMB/104254:eng/test-keys'
I/DEBUG   (   31): pid: 33, tid: 371  >>> /system/bin/mediaserver <<<
I/DEBUG   (   31): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
I/DEBUG   (   31):  r0 deadbaad  r1 0000000c  r2 00000027  r3 00000000
I/DEBUG   (   31):  r4 00000080  r5 aff46658  r6 40706d3c  r7 00000000
I/DEBUG   (   31):  r8 a801c211  r9 00013000  10 00100000  fp 00000001
I/DEBUG   (   31):  ip ffffffff  sp 407068e0  lr aff193e9  pc aff15f58  cpsr 00000030
I/DEBUG   (   31):          #00  pc 00015f58  /system/lib/libc.so
I/DEBUG   (   31):          #01  pc 00001466  /system/lib/liblog.so (__android_log_assert)
I/DEBUG   (   31):          #02  pc 00008d90  /system/lib/libstagefright_omx.so (_ZN7android3OMX18CallbackDispatcherC1EPNS_15OMXNodeInstanceE)
I/DEBUG   (   31): 
I/DEBUG   (   31): libc base address: aff00000
I/DEBUG   (   31): 
I/DEBUG   (   31): code around pc:
I/DEBUG   (   31): aff15f38 68241c23 d1fb2c00 68dae027 d0042a00 
I/DEBUG   (   31): aff15f48 20014d18 6028447d 48174790 24802227 
I/DEBUG   (   31): aff15f58 f7f57002 2106ea02 eb6ef7f6 0563aa01 
I/DEBUG   (   31): aff15f68 60932100 91016051 1c112006 eed4f7f5 
I/DEBUG   (   31): aff15f78 2200a905 f7f52002 f7f5eee0 2106e9ee 
I/DEBUG   (   31): 
I/DEBUG   (   31): code around lr:
I/DEBUG   (   31): aff193c8 b0834a0d 589c447b 26009001 686768a5 
I/DEBUG   (   31): aff193d8 220ce008 2b005eab 1c28d003 47889901 
I/DEBUG   (   31): aff193e8 35544306 d5f43f01 2c006824 b003d1ee 
I/DEBUG   (   31): aff193f8 bdf01c30 00028168 ffffff8c 1c0fb5f0 
I/DEBUG   (   31): aff19408 43551c3d a904b087 1c16ac01 604d9004 
I/DEBUG   (   31): 
I/DEBUG   (   31): stack:
I/DEBUG   (   31):     407068a0  00100000  
I/DEBUG   (   31):     407068a4  0000035f  
I/DEBUG   (   31):     407068a8  aff416f0  /system/lib/libc.so
I/DEBUG   (   31):     407068ac  aff41690  /system/lib/libc.so
I/DEBUG   (   31):     407068b0  00000000  
I/DEBUG   (   31):     407068b4  aff193e9  /system/lib/libc.so
I/DEBUG   (   31):     407068b8  00000009  
I/DEBUG   (   31):     407068bc  aff18459  /system/lib/libc.so
I/DEBUG   (   31):     407068c0  afc01199  /system/lib/liblog.so
I/DEBUG   (   31):     407068c4  00000000  
I/DEBUG   (   31):     407068c8  aff46658  
I/DEBUG   (   31):     407068cc  40706d3c  
I/DEBUG   (   31):     407068d0  00000000  
I/DEBUG   (   31):     407068d4  aff186e7  /system/lib/libc.so
I/DEBUG   (   31):     407068d8  df002777  
I/DEBUG   (   31):     407068dc  e3a070ad  
I/DEBUG   (   31): #00 407068e0  407068dc  
I/DEBUG   (   31):     407068e4  00000001  
I/DEBUG   (   31):     407068e8  a2c386b7  /system/lib/libstagefright.so
I/DEBUG   (   31):     407068ec  00000007  
I/DEBUG   (   31):     407068f0  40706914  
I/DEBUG   (   31):     407068f4  fffffbdf  
I/DEBUG   (   31):     407068f8  00000000  
I/DEBUG   (   31):     407068fc  a2c386b7  /system/lib/libstagefright.so
I/DEBUG   (   31):     40706900  00000080  
I/DEBUG   (   31):     40706904  afc01469  /system/lib/liblog.so
I/DEBUG   (   31): #01 40706908  a2c386b7  /system/lib/libstagefright.so
I/DEBUG   (   31):     4070690c  afc01469  /system/lib/liblog.so
I/DEBUG   (   31):     40706910  40706d2c  
I/DEBUG   (   31):     40706914  6d617266  
I/DEBUG   (   31):     40706918  726f7765  
I/DEBUG   (   31):     4070691c  622f736b  
I/DEBUG   (   31):     40706920  2f657361  
I/DEBUG   (   31):     40706924  6964656d  
I/DEBUG   (   31):     40706928  696c2f61  
I/DEBUG   (   31):     4070692c  61747362  
I/DEBUG   (   31):     40706930  72666567  
I/DEBUG   (   31):     40706934  74686769  
I/DEBUG   (   31):     40706938  6f43412f  
I/DEBUG   (   31):     4070693c  2e636564  
I/DEBUG   (   31):     40706940  3a707063  
I/DEBUG   (   31):     40706944  34393531  
I/DEBUG   (   31):     40706948  45484320  
I/DEBUG   (   31):     4070694c  455f4b43  
I/DEBUG   (   31):     40706950  6f202851  
I/DEBUG   (   31):     40706954  3e2d786d  
I/DEBUG   (   31):     40706958  6f6c6c61  
I/DEBUG   (   31):     4070695c  65746163  
I/DEBUG   (   31):     40706960  65646f4e  
I/DEBUG   (   31):     40706964  6d6f6328  
I/DEBUG   (   31):     40706968  656e6f70  
I/DEBUG   (   31):     4070696c  614e746e  
I/DEBUG   (   31):     40706970  632e656d  
I/DEBUG   (   31):     40706974  7274735f  
I/DEBUG   (   31):     40706978  202c2928  
I/DEBUG   (   31):     4070697c  6573626f  
I/DEBUG   (   31):     40706980  72657672  
I/DEBUG   (   31):     40706984  6e26202c  
I/DEBUG   (   31):     40706988  2965646f  
I/DEBUG   (   31):     4070698c  7473282c  
I/DEBUG   (   31):     40706990  73757461  
I/DEBUG   (   31):     40706994  4f29745f  
I/DEBUG   (   31):     40706998  6620294b  
I/DEBUG   (   31):     4070699c  656c6961  
I/DEBUG   (   31):     407069a0  2d203a64  
I/DEBUG   (   31):     407069a4  37343132  
I/DEBUG   (   31):     407069a8  36333834  
I/DEBUG   (   31):     407069ac  76203834  
I/DEBUG   (   31):     407069b0  30202e73  
I/DEBUG   (   31):     407069b4  00000000  
I/DEBUG   (   31):     407069b8  40706a40  
I/DEBUG   (   31):     407069bc  00000000  
I/DEBUG   (   31):     407069c0  ffffffff  
I/DEBUG   (   31):     407069c4  b00094e8  /system/bin/linker
I/DEBUG   (   31):     407069c8  00000000  
I/DEBUG   (   31):     407069cc  00000000  
I/DEBUG   (   31):     407069d0  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     407069d4  407069d4  
I/DEBUG   (   31):     407069d8  b00053d1  /system/bin/linker
I/DEBUG   (   31):     407069dc  b000a04c  
I/DEBUG   (   31):     407069e0  b000a087  
I/DEBUG   (   31):     407069e4  b000a34b  
I/DEBUG   (   31):     407069e8  0000003b  
I/DEBUG   (   31):     407069ec  40706a34  
I/DEBUG   (   31):     407069f0  00000002  
I/DEBUG   (   31):     407069f4  38303131  
I/DEBUG   (   31):     407069f8  00000000  
I/DEBUG   (   31):     407069fc  80008e83  /system/lib/libstagefright_foundation.so
I/DEBUG   (   31):     40706a00  00000000  
I/DEBUG   (   31):     40706a04  00000001  
I/DEBUG   (   31):     40706a08  00000003  
I/DEBUG   (   31):     40706a0c  40706b80  
I/DEBUG   (   31):     40706a10  00000070  
I/DEBUG   (   31):     40706a14  00000000  
I/DEBUG   (   31):     40706a18  40706aa8  
I/DEBUG   (   31):     40706a1c  000000c0  
I/DEBUG   (   31):     40706a20  b000952c  /system/bin/linker
I/DEBUG   (   31):     40706a24  00000454  
I/DEBUG   (   31):     40706a28  40706a8c  
I/DEBUG   (   31):     40706a2c  b0004c35  /system/bin/linker
I/DEBUG   (   31):     40706a30  b0007120  /system/bin/linker
I/DEBUG   (   31):     40706a34  b0006bb8  /system/bin/linker
I/DEBUG   (   31):     40706a38  00000454  
I/DEBUG   (   31):     40706a3c  a300b042  /system/lib/libstagefright_omx.so
I/DEBUG   (   31):     40706a40  00000018  
I/DEBUG   (   31):     40706a44  40706b80  
I/DEBUG   (   31):     40706a48  00000003  
I/DEBUG   (   31):     40706a4c  8000595b  /system/lib/libstagefright_foundation.so
I/DEBUG   (   31):     40706a50  40706b80  
I/DEBUG   (   31):     40706a54  40706a9c  
I/DEBUG   (   31):     40706a58  00000003  
I/DEBUG   (   31):     40706a5c  a2c25f9d  /system/lib/libstagefright.so
I/DEBUG   (   31):     40706a60  ffffffff  
I/DEBUG   (   31):     40706a64  00000000  
I/DEBUG   (   31):     40706a68  4089501b  
I/DEBUG   (   31):     40706a6c  b00094e8  /system/bin/linker
I/DEBUG   (   31):     40706a70  a78e7cd8  
I/DEBUG   (   31):     40706a74  00000000  
I/DEBUG   (   31):     40706a78  a78e7cd8  
I/DEBUG   (   31):     40706a7c  00000000  
I/DEBUG   (   31):     40706a80  000005f8  
I/DEBUG   (   31):     40706a84  00000002  
I/DEBUG   (   31):     40706a88  0001c2c0  [heap]
I/DEBUG   (   31):     40706a8c  7379732f  
I/DEBUG   (   31):     40706a90  2f6d6574  
I/DEBUG   (   31):     40706a94  2f62696c  
I/DEBUG   (   31):     40706a98  7362696c  
I/DEBUG   (   31):     40706a9c  65676174  
I/DEBUG   (   31):     40706aa0  67697266  
I/DEBUG   (   31):     40706aa4  77687468  
I/DEBUG   (   31):     40706aa8  006f732e  
I/DEBUG   (   31):     40706aac  afb04a3c  /system/lib/libcutils.so
I/DEBUG   (   31):     40706ab0  0000f438  [heap]
I/DEBUG   (   31):     40706ab4  40706afc  
I/DEBUG   (   31):     40706ab8  00000009  
I/DEBUG   (   31):     40706abc  a8015049  /system/lib/libutils.so
I/DEBUG   (   31):     40706ac0  0000f428  [heap]
I/DEBUG   (   31):     40706ac4  0000f438  [heap]
I/DEBUG   (   31):     40706ac8  00000009  
I/DEBUG   (   31):     40706acc  a8015165  /system/lib/libutils.so
I/DEBUG   (   31):     40706ad0  0000f3d8  [heap]
I/DEBUG   (   31):     40706ad4  40706afc  
I/DEBUG   (   31):     40706ad8  fffffffc  
I/DEBUG   (   31):     40706adc  00000000  
I/DEBUG   (   31):     40706ae0  40706afc  
I/DEBUG   (   31):     40706ae4  a81147b5  /system/lib/libbinder.so
I/DEBUG   (   31):     40706ae8  40706c48  
I/DEBUG   (   31):     40706aec  a811a575  /system/lib/libbinder.so
I/DEBUG   (   31):     40706af0  00000030  
I/DEBUG   (   31):     40706af4  00000000  
I/DEBUG   (   31):     40706af8  00024230  [heap]
I/DEBUG   (   31):     40706afc  0000f3d8  [heap]
I/DEBUG   (   31):     40706b00  40706b18  
I/DEBUG   (   31):     40706b04  40706c48  
I/DEBUG   (   31):     40706b08  00000000  
I/DEBUG   (   31):     40706b0c  40009028  /dev/binder
I/DEBUG   (   31):     40706b10  40009038  /dev/binder
I/DEBUG   (   31):     40706b14  a811a5a1  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b18  00000000  
I/DEBUG   (   31):     40706b1c  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706b20  40706c48  
I/DEBUG   (   31):     40706b24  00000010  
I/DEBUG   (   31):     40706b28  40009028  /dev/binder
I/DEBUG   (   31):     40706b2c  a811a5fb  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b30  40009038  /dev/binder
I/DEBUG   (   31):     40706b34  00000000  
I/DEBUG   (   31):     40706b38  ffffff20  
I/DEBUG   (   31):     40706b3c  a8123204  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b40  000241d0  [heap]
I/DEBUG   (   31):     40706b44  a81165b7  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b48  00000001  
I/DEBUG   (   31):     40706b4c  a81164c1  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b50  000241d0  [heap]
I/DEBUG   (   31):     40706b54  a8123204  /system/lib/libbinder.so
I/DEBUG   (   31):     40706b58  40706c78  
I/DEBUG   (   31):     40706b5c  000241d0  [heap]
I/DEBUG   (   31):     40706b60  00024200  [heap]
I/DEBUG   (   31):     40706b64  40706c48  
I/DEBUG   (   31):     40706b68  00000060  
I/DEBUG   (   31):     40706b6c  00000000  
I/DEBUG   (   31):     40706b70  00000000  
I/DEBUG   (   31):     40706b74  00000000  
I/DEBUG   (   31):     40706b78  00000000  
I/DEBUG   (   31):     40706b7c  00000000  
I/DEBUG   (   31):     40706b80  000003e8  
I/DEBUG   (   31):     40706b84  00000010  
I/DEBUG   (   31):     40706b88  00000004  
I/DEBUG   (   31):     40706b8c  40009028  /dev/binder
I/DEBUG   (   31):     40706b90  40009038  /dev/binder
I/DEBUG   (   31):     40706b94  4ab3df53  
I/DEBUG   (   31):     40706b98  00000009  
I/DEBUG   (   31):     40706b9c  0000f43c  [heap]
I/DEBUG   (   31):     40706ba0  ffffffff  
I/DEBUG   (   31):     40706ba4  40706bfc  
I/DEBUG   (   31):     40706ba8  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706bac  afb04a3c  /system/lib/libcutils.so
I/DEBUG   (   31):     40706bb0  0000f438  [heap]
I/DEBUG   (   31):     40706bb4  40706bfc  
I/DEBUG   (   31):     40706bb8  0000003b  
I/DEBUG   (   31):     40706bbc  0000003b  
I/DEBUG   (   31):     40706bc0  b000a04c  
I/DEBUG   (   31):     40706bc4  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706bc8  00013000  [heap]
I/DEBUG   (   31):     40706bcc  00100000  
I/DEBUG   (   31):     40706bd0  00000001  
I/DEBUG   (   31):     40706bd4  b00120d9  
I/DEBUG   (   31):     40706bd8  40706c2c  
I/DEBUG   (   31):     40706bdc  b0005405  /system/bin/linker
I/DEBUG   (   31):     40706be0  b00053d1  /system/bin/linker
I/DEBUG   (   31):     40706be4  00000006  
I/DEBUG   (   31):     40706be8  00000000  
I/DEBUG   (   31):     40706bec  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706bf0  00000000  
I/DEBUG   (   31):     40706bf4  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706bf8  00000033  
I/DEBUG   (   31):     40706bfc  000245d8  [heap]
I/DEBUG   (   31):     40706c00  000001b4  
I/DEBUG   (   31):     40706c04  c0000000  
I/DEBUG   (   31):     40706c08  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706c0c  00013000  [heap]
I/DEBUG   (   31):     40706c10  00100000  
I/DEBUG   (   31):     40706c14  aff1402b  /system/lib/libc.so
I/DEBUG   (   31):     40706c18  000001b4  
I/DEBUG   (   31):     40706c1c  c0000000  
I/DEBUG   (   31):     40706c20  00000000  
I/DEBUG   (   31):     40706c24  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706c28  000000da  
I/DEBUG   (   31):     40706c2c  00007a08  
I/DEBUG   (   31):     40706c30  000001b4  
I/DEBUG   (   31):     40706c34  c0000000  
I/DEBUG   (   31):     40706c38  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706c3c  00013000  [heap]
I/DEBUG   (   31):     40706c40  00100000  
I/DEBUG   (   31):     40706c44  aff12d45  /system/lib/libc.so
I/DEBUG   (   31):     40706c48  00000000  
I/DEBUG   (   31):     40706c4c  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706c50  00000013  
I/DEBUG   (   31):     40706c54  000245a8  [heap]
I/DEBUG   (   31):     40706c58  300001b4  
I/DEBUG   (   31):     40706c5c  4ab3df53  
I/DEBUG   (   31):     40706c60  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706c64  00000000  
I/DEBUG   (   31):     40706c68  00000000  
I/DEBUG   (   31):     40706c6c  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706c70  00000013  
I/DEBUG   (   31):     40706c74  000245d0  [heap]
I/DEBUG   (   31):     40706c78  000001b4  
I/DEBUG   (   31):     40706c7c  c0000000  
I/DEBUG   (   31):     40706c80  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706c84  00013000  [heap]
I/DEBUG   (   31):     40706c88  00100000  
I/DEBUG   (   31):     40706c8c  aff1402b  /system/lib/libc.so
I/DEBUG   (   31):     40706c90  7fffffff  
I/DEBUG   (   31):     40706c94  00000020  
I/DEBUG   (   31):     40706c98  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706c9c  00013000  [heap]
I/DEBUG   (   31):     40706ca0  00000000  
I/DEBUG   (   31):     40706ca4  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706ca8  000245c8  [heap]
I/DEBUG   (   31):     40706cac  000245c8  [heap]
I/DEBUG   (   31):     40706cb0  00000010  
I/DEBUG   (   31):     40706cb4  000000a0  
I/DEBUG   (   31):     40706cb8  00000000  
I/DEBUG   (   31):     40706cbc  aff10ed4  /system/lib/libc.so
I/DEBUG   (   31):     40706cc0  000245c8  [heap]
I/DEBUG   (   31):     40706cc4  000245c8  [heap]
I/DEBUG   (   31):     40706cc8  000000a8  
I/DEBUG   (   31):     40706ccc  000000c0  
I/DEBUG   (   31):     40706cd0  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706cd4  00013000  [heap]
I/DEBUG   (   31):     40706cd8  00100000  
I/DEBUG   (   31):     40706cdc  aff14461  /system/lib/libc.so
I/DEBUG   (   31):     40706ce0  00000000  
I/DEBUG   (   31):     40706ce4  000245d0  [heap]
I/DEBUG   (   31):     40706ce8  00000011  
I/DEBUG   (   31):     40706cec  000245a8  [heap]
I/DEBUG   (   31):     40706cf0  00000000  
I/DEBUG   (   31):     40706cf4  a801c211  /system/lib/libutils.so
I/DEBUG   (   31):     40706cf8  00013000  [heap]
I/DEBUG   (   31):     40706cfc  00100000  
I/DEBUG   (   31):     40706d00  00000001  
I/DEBUG   (   31):     40706d04  0002465f  [heap]
I/DEBUG   (   31):     40706d08  40706d3c  
I/DEBUG   (   31):     40706d0c  8000774b  /system/lib/libstagefright_foundation.so
I/DEBUG   (   31):     40706d10  40706d48  
I/DEBUG   (   31):     40706d14  4ab3df53  
I/DEBUG   (   31):     40706d18  000245a8  [heap]
I/DEBUG   (   31):     40706d1c  a3008d95  /system/lib/libstagefright_omx.so
I/DEBUG   (   31):     40706d20  40706d48  
I/DEBUG   (   31):     40706d24  a2b4d3a3  /system/lib/libstagefright.so
W/AudioSystem(   65): AudioPolicyService server died!
W/AudioSystem(  360): AudioFlinger server died!
W/IMediaDeathNotifier(  360): media server died
E/MediaPlayer(  360): error (100, 0)
E/MediaPlayer(  360): Error (100,0)
D/VideoView(  360): Error: 100,0
I/ee      (  360): ==============100
W/AudioSystem(  131): AudioFlinger server died!
W/AudioSystem(  131): AudioPolicyService server died!
I/ServiceManager(   28): service 'media.audio_flinger' died
I/ServiceManager(   28): service 'media.player' died
I/ServiceManager(   28): service 'media.camera' died
I/ServiceManager(   28): service 'media.audio_policy' died
I/BootReceiver(   65): Copying /data/tombstones/tombstone_01 to DropBox (SYSTEM_TOMBSTONE)
D/dalvikvm(  360): GC_FOR_ALLOC freed 62K, 3% free 6407K/6599K, paused 124ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:27:30.927

根据一些线程，2.3 和 3.0 版本应使用 httplive:// 方案，3.0+ 应使用 http:// 方案：[如何在 Android 上播放 m3u8？](https://stackoverflow.com/questions/6198995/how-to-play-m3u8-on-android)

它适用于我的 2.3 设备，但我不确定它是否适用于模拟器。[此外，我使用苹果的 m3u8 测试 URI ( http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8) )使它工作。我仍然无法使用我自己的 URI 使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:10:17.793

```
 String SrcPath="http://akamedia2.lsops.net/live/smil:cnbc_en.smil/playlist.m3u8";
        myVideoView = new VideoView(this);
        myVideoView.setVideoURI(Uri.parse(SrcPath));
        setContentView(myVideoView);
        myVideoView.setMediaController(new MediaController(this));
        myVideoView.requestFocus(); 
```

删除此行。

```
myVideoView.requestFocus(); 
```

# android - 活动中的图像捕获和显示

> ID：10595205
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:37.967
> 
> 标签：android

我有一个活动 A。从 A 开始一个活动 B。在活动 B 中，我使用设备中存在的相机捕获图像，并在该活动结束时返回活动 A。在此活动中必须显示捕获的图像。如何完成这项任务？在版本 2.3.3 上运行...已经在此处[查看从相机捕获图像并在 Activity 中显示，](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)但相同的 NullPointerException...在 LG 设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:52:06.567

您可以使用 intent.putExtras 方法将捕获的图像的 URL 从 Activity B 传递给 Activity A。

请参阅[在 android 活动之间传递字符串数组](https://stackoverflow.com/questions/4429036/passing-string-array-between-android-activities)

对于捕获图像，请参阅下面的代码

```
public class Camera extends Activity 
{
     private static final int CAMERA_REQUEST = 1888;
     private String selectedImagePath;
     WebView webview;
     String fileName = "capturedImage.jpg";
     private static Uri mCapturedImageURI; 

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
            webview=(WebView)findViewById(R.id.webView1);
    }

    public void TakePhoto()
    {   
            ContentValues values = new ContentValues();  
            values.put(MediaStore.Images.Media.TITLE, fileName);  
            mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
            Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
    }       
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK)
            {
              if (requestCode == CAMERA_REQUEST) 
              { 
                selectedImagePath = getPath(mCapturedImageURI);
                 //Save the path to pass between activities
              }
            }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

} 
```

# java - 如何突出显示树节点

> ID：10595209
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:55.720
> 
> 标签：java, javascript, jsf-1.2

我正在使用 Rich faces 3.3.2 和 JSF 1.2 显示两棵树，现在我需要比较两棵树并突出它们的区别。

示例：考虑两棵树，一棵在左侧，另一棵在右侧...
假设我在左侧树下有一个节点，但右侧树上不存在，那么我必须突出显示左侧的节点及其子节点树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:44:19.937

在构建树时，我会在同一时刻为每棵树创建一个哈希图，您可以在其中添加节点，同时将它们添加到树中。最后，您只需比较两张地图的差异并突出显示节点位置。

# jquery - 需要隐藏选择选项

> ID：10595210
> 
> 赞同：0
> 
> 时间：2012-05-15T06:25:56.610
> 
> 标签：jquery, html, select

**编辑**我认为这就是OP的意思

我有三个选择框，每个框有 5 个类似的选项。当我从任何选择框中选择一个选项时，它应该从其他两个选择框中消失。

我在这里完成了 js fiddle 链接：http: [//jsfiddle.net/thilakar/x66EN/13/](http://jsfiddle.net/thilakar/x66EN/13/)

**注意：**再次从任何选择框中选择一个选项。隐藏选项应显示在其他两个选择框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:31:29.290

```
$(function() {
    var sbox = $('select.selectArea[name=fromBox]');
    $('select.selectArea').change(function() {
        var val = this.value,
            allVals = [];
        sbox.each(function() {
            allVals.push(this.value);
        });
        sbox.each(function(index, sel) {
           $('option:hidden', this).show();
           $('option', this).map(function(i, x) {
                if(this.value != '0' && $.inArray(this.value, allVals) != -1) {
                   $(this).hide();
                }
           });
        });
    });
}); 
```

**[演示](http://jsfiddle.net/thesystemrestart/kGHH6/11/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:51:01.603

这个**[jsFiddle 示例](http://jsfiddle.net/j08691/x66EN/20/)**怎么样？它不会在您选择元素时删除它们，它只是禁用它们。这样，如果用户改变主意，他们可以返回并进行更改。

jQuery：

```
$('.selectArea').change(function() {
    var ary = new Array();
    $('.selectArea option:selected').each(function() {
        if ($(this).val().length > 0 && $(this).val() != 0) {
            ary.push($(this).val());
        }
    });
    $('.selectArea option').each(function() {
        if ($.inArray($(this).val(), ary) > -1) {
            $(this).attr('disabled', 'disabled');
        } else {
            $(this).removeAttr('disabled');
        }
    });
});​ 
```

# wordpress - 如何在推文中使用 Wordpress 短链接（仅具有帖子 ID）

> ID：10595213
> 
> 赞同：1
> 
> 时间：2012-05-15T06:26:07.070
> 
> 标签：wordpress, url, twitter

场景：我博客上帖子的网址和标题通常很长。每当我或其他任何人发布推文时，我都找不到任何空间来添加主题标签或引用的转发文本。我不想缩短帖子的标题，所以另一个选择是缩短网址。为此，我想以这种格式从 wordpress 帖子中获取短链接

[http://mydomain.com/?p=](http://mydomain.com/?p=(post) （帖子ID）

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-30T19:02:57.577

使用 wp 获取短链接

根据数字 ID 返回 URL，即[http://example.com/?p=1234](http://example.com/?p=1234)

[https://codex.wordpress.org/Function_Reference/wp_get_shortlink](https://codex.wordpress.org/Function_Reference/wp_get_shortlink)

用法 `<?php $short_link = wp_get_shortlink(); ?>` 或 `<?php echo wp_get_shortlink(); ?>`

源文件 wp_get_shortlink() 位于 wp-includes/link-template.php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:59:07.490

您可以转到**“设置”->“永久链接**”并将其设置为“默认”（或“数字”，如果您愿意），然后调用

```
<?php the_permalink() ?> 
```

在你的“tweet this”链接中。

或者你可以使用这个：[Twitter 友好链接 WordPress 插件](http://wordpress.org/extend/plugins/twitter-friendly-links/)

# image - ckeditor_image 上传错误

> ID：10595216
> 
> 赞同：0
> 
> 时间：2012-05-15T06:26:26.603
> 
> 标签：image, drupal, image-uploading

我配置 Ck 编辑器，我尝试从服务器路径上传图像和浏览图像，它会出错。
这里的错误声明：xml parse Error！并得到命运错误....

`cannot redeclare checnk authentication() in ckeditor/include/filemanager.config.php file & previously declared in ckfinder/config.php`

请为此提供解决方案以及我将做出什么改变！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:36:08.193

如果重新声明了某个函数，那么您可能导入了错误的文件。尝试按照安装说明逐步进行。

无论如何，您可能不需要这两个文件之一。所以你可以尝试删除一个。如果它不起作用删除另一个。

# javascript - 在 iframe 中加载 jQuery

> ID：10595217
> 
> 赞同：0
> 
> 时间：2012-05-15T06:26:29.630
> 
> 标签：javascript, jquery, html, iframe

我正在编写一个脚本，它需要在 iframe 中执行一些内容。这是一个我不拥有的网站的用户脚本，所以由于跨域问题，我不能只使用我自己的代码将其设置为页面`src`。`iframe`相反，我正在动态构建 iframe。

为此，我有

```
 function childScripts(){
  //Stuff that must be injected into the iframe.
  //Needs jQuery
 }

 //because I'm lazy:
 var iframeWin=$('#my-iframe')[0].contentWindow;

 //Load jQuery:
 var script = iframeWin.document.createElement("script");
 script.type = "text/javascript";
 script.src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
 iframeWin.document.head.appendChild(script);

 //Inject script
 var script = iframeWin.document.createElement("script");
 script.type = "text/javascript";
 script.textContent="("+childScripts.toString()+")()";
 iframeWin.document.body.appendChild(script); 
```

现在，注入的脚本需要 jQuery，但由于某种原因，注入的脚本运行时没有加载 jQuery——即使 jQuery 在`<head>`并且注入的脚本在 `<body>`.

我尝试了其他解决方法——使注入的脚本运行`onload`。我不喜欢设置超时并检查 jQuery 是否存在的想法，我更喜欢更优雅的解决方案。

我也尝试将`$`对象复制到`iframeWin.$`，但这当然不起作用，因为它只是反向引用父级`$`并操作父级文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:57:13.670

使用 jQuery 操作 iframe 更容易。请试试：

```
$('<iframe id="my-iframe"/>').load(function(){
  $('#my-iframe').contents().find('body').append('asd').end()
                            .find('body').append('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"><\/script>').end()
                            .find('body').append('<script>$(function() {alert("hello from jquery");console.log("hello from jquery"); })<\/script>');                             

}).appendTo("body"); 
```

放置：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
    <script> 
        $('<iframe id="my-iframe"/>').load(function(){..... 
    </script> 
</body> 
</html> 
```

# c# - 鼠标绘图时起点指向下角

> ID：10595220
> 
> 赞同：0
> 
> 时间：2012-05-15T06:26:34.817
> 
> 标签：c#, paint, picturebox

我如何更改在坐标的图片框上绘制时不是从第一次按下鼠标和从图片框的左下角开始的代码？

```
 private void Pic_MouseUp(object sender, MouseEventArgs e)
    {
        toDraw = false;
    }

    private void Pic_MouseMove(object sender, MouseEventArgs e)
    {
        if (toDraw)
        {
            topLeft = new Point
            {
                X = pointBegin.X < e.X ? pointBegin.X : e.X,
                Y = pointBegin.Y < e.Y ? pointBegin.Y : e.Y
            };
            bottomRight = new Point
            {
                X = pointBegin.X > e.X ? pointBegin.X : e.X,
                Y = pointBegin.Y > e.Y ? pointBegin.Y : e.Y
            };

            Pic.Invalidate();
        }
    }

    private void Pic_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawRectangle(new Pen(Color.DarkOrange, 2),
            new System.Drawing.Rectangle(topLeft.X, topLeft.Y,
                bottomRight.X - topLeft.X, bottomRight.Y - topLeft.Y));
        dotLeftX = topLeft.X;
        X1.Text = "X1: " + dotLeftX.ToString();
        dotLeftY = topLeft.Y;
        Y1.Text = "Y1: " + dotLeftY.ToString();
        dotRightX = bottomRight.X;
        X2.Text = "X2: " + dotRightX.ToString();
        dotRightY = bottomRight.Y;
        Y2.Text = "Y2: " + dotRightY.ToString();

    } 
```

[http://i.imgbox.com/aazyql16.gif](http://i.imgbox.com/aazyql16.gif)

# event-handling - Netty - 工作线程如何工作

> ID：10595221
> 
> 赞同：0
> 
> 时间：2012-05-15T06:26:41.970
> 
> 标签：event-handling, websocket, nio, netty, worker

我想了解 netty 工作线程是如何工作的。根据代码，对于每个新请求，我们都会获得 nextwoker() 任何一个工作线程并将其分配给处理客户端事件。所以根据我的理解，单个线程将能够处理来自不同客户端的不同请求。

我在这里有一个问题，对于客户端（通道/套接字），进入该特定通道的所有事件都是由同一个线程处理还是不同线程可以处理它们。我的假设是单线程处理所有事件（不包括未来事件）。但根据 MemoryAwareThreadPoolExecutor 的文档，他们告诉通道，不同的线程处理不同的事件。

为了验证这一点，我使用单个客户端和工作线程 ppol 编写了一个小程序，它有 50 个工作线程，但是当我在消息接收事件中保持睡眠时，我的客户端等待下一个消息接收调用。这确认为每个客户端分配了单个线程。请说清楚 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:23:03.693

同一个 Worker 线程将一直用于 Channel。所以可以安全地假设情况就是这样。

如果您使用 OrderedMemoryAwareThreadPoolExecutor，则可能不再如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:07:56.547

我认为只有假设同一个线程*不会*用于同一个客户端是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T00:54:42.703

据我了解，Netty 使用工作线程来处理传入连接。

您不应该阻塞（休眠）这些工作线程，否则您的客户端将等待响应，并且您还将浪费一个本可以用于处理另一个请求的线程。

您应该做的是使用 OrderedMemoryAwareThreadPoolExecutore 将您的工作分派到另一个线程池；或者您可以使用自己的 Executor 在`messageReceived()`.

# sql - 用oracle的sql数据透视？

> ID：10595222
> 
> 赞同：0
> 
> 时间：2012-05-15T06:26:43.397
> 
> 标签：sql, oracle, pivot, pivot-table

我有下表

```
 ID    p_name     p_value
   ----   ------     --------------
    1      name       index.htm
    1      path       c:\web\site1
    1      size       400
    1      date       2011-03-12
    1      note       'test site'
    2      name       login.htm
    2      path       c:\web\site1
    2      size       500
    ...    ...        ...
    ...    ...        ... 
```

我需要让它看起来像这样

```
 ID   Name         Path
   ---   ----------   -------------
    1     index.htm    c:\web\site1
    2     login.htm    c:\web\site1
    ...   ...          ... 
```

我正在阅读其他几篇文章，但我不知道如何在我的示例中应用它！我只需要主要的“名称”和“路径”，我可以在需要时添加其他！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:26:12.500

```
select t1.id, t1.p_value name, t2.p_value path
  from mytable t1, mytable t2
 where t1.id = t2.id
   and t1.p_name = 'name'
   and t2.p_name = 'path' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:38:37.983

最简单的方法是将其排除，因为对于给定的 ID，您似乎有有限数量的 p_name。

尝试 2 - 修改

```
Select ID, T1.P_Name as Name, T2.P_value as Path
FROM YourTableName T1
INNER JOIN yourTableName T2 
  ON T1.ID = T2.ID 
  and T1.P_Name = 'name' 
  and T2.P_name = 'path' 
```

尝试 1 - 失误

```
SELECT Id,
CASE p_name when 'name' THEN P_value end as Name,
CASE p_name when 'path' THEN p_value end as Path
FROM yourTableNameHere 
```

# linux - GLUT 键盘反应迟钝

> ID：10595223
> 
> 赞同：1
> 
> 时间：2012-05-15T06:26:44.107
> 
> 标签：linux, haskell, glut, pong

我正在测试在这里找到的简单乒乓球游戏：[https ://github.com/shangaslammi/frp-pong](https://github.com/shangaslammi/frp-pong)

问题是键盘控制工作非常糟糕 - 按键非常无响应并且通常有几秒钟的延迟。我假设作者为 Windows 编写了代码，因为他包含了一个 .bat 文件，所以这是一个特定于 Linux 的问题。

为什么会这样？

我不确定问题出在哪里，但这里是文件 Keyboard.hs：

```
import Data.Set (Set)
import qualified Data.Set as Set
import Graphics.UI.GLUT (Key(..), KeyState(..))

-- | Set of all keys that are currently held down
newtype Keyboard = Keyboard (Set Key)

-- | Create a new Keyboard
initKeyboard :: Keyboard
initKeyboard = Keyboard Set.empty

-- | Record a key state change in the given Keyboard
handleKeyEvent :: Key -> KeyState -> Keyboard -> Keyboard
handleKeyEvent k Down = addKey k
handleKeyEvent k Up   = removeKey k

addKey :: Key -> Keyboard -> Keyboard
addKey k (Keyboard s) = Keyboard $ Set.insert k s

removeKey :: Key -> Keyboard -> Keyboard
removeKey k (Keyboard s) = Keyboard $ Set.delete k s

-- | Test if a key is currently held down in the given Keyboard
isKeyDown :: Keyboard -> Key -> Bool
isKeyDown (Keyboard s) k = Set.member k s 
```

并设置回调：

```
type KeyboardRef = IORef Keyboard
type TimeRef     = IORef POSIXTime
type AccumRef    = TimeRef
type PrevTimeRef = TimeRef
type GameRef     = IORef (Rects, GameLogic)

type CallbackRefs = (AccumRef, PrevTimeRef, KeyboardRef, GameRef)

initCallbackRefs :: IO CallbackRefs
initCallbackRefs = do
    accum <- newIORef secPerTick
    prev  <- getPOSIXTime >>= newIORef
    keyb  <- newIORef initKeyboard
    cont  <- newIORef ([],game)
    return (accum, prev, keyb, cont)

-- | Update the Keyboard state according to the event
handleKeyboard :: CallbackRefs -> KeyboardMouseCallback
handleKeyboard (_, _, kb, _) k ks _ _ = modifyIORef kb (handleKeyEvent k ks) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:44:25.487

缺少 GLUT 计时器似乎是问题所在。

这是 Rian Hunter 的正确工作版本：

[https://github.com/rianhunter/frp-pong](https://github.com/rianhunter/frp-pong)

# javascript - 如何调用 jquery / java 脚本变量 acuretly

> ID：10595228
> 
> 赞同：-2
> 
> 时间：2012-05-15T06:27:13.960
> 
> 标签：javascript, jquery

我有`#cross_1 , #cross_2 , #cross_3 , #cross_4` ，每个`#cross_id`都有`#id_green`

没有显示任何结果或任何错误...

```
var setId = 2; 

var defaultTime = 3000;

$(document).ready(function () { 

    setLight(setId,defaultTime);

});

function setLight(setId,defaultTime) {

    //deactivateAll();

    activeGreen(setId,defaultTime);

}

function deactivateAll() {

    $('#cross_1 #id_red').addClass('red');

    $('#cross_2 #id_red').addClass('red');

    $('#cross_3 #id_red').addClass('red');

    $('#cross_4 #id_red').addClass('red');

}

function activeGreen(setId,defaultTime) {

    alert('#cross_'+setId+ '#id_green');

    $('#cross_'+setId+ '#id_green').addClass('green');

}

function activeYellow() {

    //$('#cross_'+setId+ ',#id_yellow').addClass('yellow');

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:29:52.997

在每个选择器之间加一个逗号

```
$('#cross_'+setId+ ',#id_green').addClass('green'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:30:22.873

我认为它只是你在 jQuery 选择器中的空间在错误的位置

```
function activeGreen(setId,defaultTime) {
    $('#cross_'+setId+' #id_green').addClass('green');
} 
```

如果你的结构是：

```
#cross_1
    #id_green
#cross_2
    #id_green 
```

依此类推，就是别人提到的无效html

# magento - 无法显示模板中的块 - magento

> ID：10595229
> 
> 赞同：1
> 
> 时间：2012-05-15T06:27:24.553
> 
> 标签：magento

我正在从模板中调用一个块，如下所示。我知道这不是推荐的方式，但 layout.xml 方法给我带来了麻烦

```
echo $this->getLayout()->createBlock('shoppingbasket/options')
                    ->setTemplate('shoppingbasket/cart/item/default/options.phtml')
                    ->setBlockId('options')
                    ->setProduct($_item->getProduct())
                    ->setSelectedOptions($this->getOptionList())
                    ->toHtml() ?> 
```

块被渲染。现在我正在尝试通过 layout.xml 方法添加它

我已将块添加到 layout.xml，如下所示：

```
<layout>    
    <checkout_cart_index>    
        <reference name="checkout.cart">
            <block type="shoppingbasket/options" template="shoppingbasket/cart/item/default/options.phtml" name="options"></block>
            <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>shoppingbasket/cart/item/default.phtml</template></action>
        </reference>
    </checkout_cart_index>
</layout> 
```

我从模板中调用块如下：

```
 <?php echo $this->getChildHtml('options') ?> 
```

该块没有出现，我尝试在 layout.xml 中的任何地方移动块。我究竟做错了什么？还有一种方法可以像我一样使用 layout.xml 方法将参数传递给块

```
->setProduct($_item->getProduct())
                    ->setSelectedOptions($this->getOptionList()) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:38:46.753

你做的一切都是对的，除了一件事：你应该设置块别名 - 块的“as”属性。

```
<block type="shoppingbasket/options" template="shoppingbasket/cart/item/default/options.phtml" name="options" as="options"></block> 
```

方法`getChild`或`getChildHtml`使用块别名从布局中检索块实例。

# java - 基本布尔状态问题

> ID：10595234
> 
> 赞同：0
> 
> 时间：2012-05-15T06:27:39.130
> 
> 标签：java, swing

我正在尝试编写一段代码，以便在按下某个键时它会执行某些操作，但随后必须释放该键，然后再次按下该键以重新触发事件。因此，如果用户只是按住键，它不会一遍又一遍地这样做，而是他们必须反复按下和释放。
到目前为止，我有：

```
if(keyLifted)
{
    if(Keyboard.isKeyDown(45))
    {
        keyLifted = false;
        dostuff;
    }
    else if(Keyboard.isKeyDown(46))
    {
        keyLifted = false;
        dostuff();
    }
    else
    {
        keyLifted = true;
    }
} 
```

但是由于明显的原因，这是有缺陷的（如果键已经被抬起，它只会将键重置为未抬起：如果键被按下，则不会被设置为未按下）。我尝试了几种变体，但我无法让它发挥作用。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:47:16.930

您应该使用 a[`KeyListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html)来捕获键盘事件。干得好：

```
public class KeyListenerExample extends JFrame {
    public KeyListenerExample() {
        addKeyListener(new KeyAdapter() {
            private boolean keyLifted;

            public void keyReleased(KeyEvent e) {
                keyLifted = true;
            }

            public void keyPressed(KeyEvent e) {
                keyLifted = false;
                switch (e.getKeyChar()) {
                    case 45:
                        doStuff();
                        break;

                    case 46:
                        doStuff();
                        break;
                }
            }
        });
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    private void doStuff() {
        System.out.println("stuff");
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        new KeyListenerExample();
    }
} 
```

我只是保留了，`keyLifted`因为它在您的示例中。但我认为对于通常的键盘东西，你不需要它。

# iphone - iOS - 获取 Info.plist 文件

> ID：10595237
> 
> 赞同：2
> 
> 时间：2012-05-15T06:27:48.817
> 
> 标签：iphone, objective-c, ios, plist

我有一个从应用程序的 Info.plist 文件加载数据的方法。现在我正在硬编码名称和类型，即使用`pathForResource`但是，如果 plist 文件的名称已更改，则此方法将失败，例如 MyAppSettings.plist 有没有一种方法可以获取正在使用的 info.plist 文件的名字？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T06:33:50.710

主要的应用程序设置文件，主要命名为`MyApp-info.plist`，将始终`info.plist`在应用程序编译和捆绑后命名。

还有一种访问的简短方法`info.plist`：

```
NSNumber *version =  [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

# oracle - pl/sql 获取oracle上的所有结构表

> ID：10595241
> 
> 赞同：0
> 
> 时间：2012-05-15T06:28:15.033
> 
> 标签：oracle, list, plsql

我对如何使用循环 pl/sql 获取所有列表结构表有疑问，

我有如下语法循环：

```
 BEGIN 
             FOR x IN (SELECT table_name FROM user_tables) 
                LOOP
                      EXECUTE IMMEDIATE 'DESC' || x.table_name;
                END LOOP; 
             COMMIT; 
END; 
```

这是 sql developer 的日志输出

```
Error starting at line 14 in command:
BEGIN 
             FOR x IN (SELECT table_name FROM user_tables) 
                LOOP
                      EXECUTE IMMEDIATE 'DESC' || x.table_name;
                END LOOP; 
             COMMIT; 
END;
Error report:
ORA-00900: invalid SQL statement
ORA-06512: at line 4
00900\. 00000 -  "invalid SQL statement"
*Cause:    
*Action: 
```

帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:48:25.890

该`DESC`命令既不是 SQL 也不是 plsql，而是 sqlplus 命令，因此您不能在 plsql 代码中使用它。
不止于此，为什么呢？您可以从[USER_TAB_COLUMNS](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2091.htm#I1020277)获取您需要的所有值...
改用`DBMS_OUTPUT.put_line()`：

```
BEGIN 
             FOR x IN (SELECT COLUMN_NAME, DATA_TYPE, NULLABLE FROM USER_TAB_COLUMNS) 
                LOOP
                      DBMS_OUTPUT.put_line(COLUMN_NAME || ' ' || DATA_TYPE || ' ' || NULLABLE );
                END LOOP; 
             COMMIT; 
END; 
```

当然，这可以更好地格式化，并且您可以选择更多列...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:29:26.383

考虑一下：

`Select * from All_tab_Cols` 或者更接近从描述返回的内容：

```
Select Owner, Table_name, ColumN_Name, Data_Type, Data_Length, Nullable 
from all_tab_Cols; 
```

为了解决您的具体问题，不应该是：

```
EXECUTE IMMEDIATE 'DESC ' || x.table_name|| ';'; 
```

desc & 表名和 ; 之间缺少空格 是要运行的 SQL 的一部分，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:38:41.750

如果您尝试对架构进行逆向工程，请使用 DBMS_Metadata 包来执行此操作，因为它还可以提取约束、权限、用户等。

# iphone - id为initWithFrame的基于SimpleView的应用程序不工作

> ID：10595247
> 
> 赞同：0
> 
> 时间：2012-05-15T06:28:32.090
> 
> 标签：iphone, objective-c, xcode

我有应用程序来创建图表我已经创建了一个基于视图的应用程序，然后在其中添加了用于创建图表的代码，但它没有显示图表。如果使用相同的代码创建一个单独的 UIView 那么它的工作原理不是

```
 #import <UIKit/UIKit.h>
  #import "ECGraph.h"
  #import "ECGraphItem.h"
 @class GraphsViewController;
 @interface Display : UIView {

NSArray *percentages;

int myY;
ECGraph *graph;
ECGraphItem *item1;
ECGraphItem *item2;

   }
  @property(nonatomic,retain)NSArray*percentages;

 -(void) setPercentageArray:(NSArray*) array;

 @end

 #import "Display.h"
 #import "ECGraph.h"
 @implementation Display
 @synthesize percentages;

- (id)initWithFrame:(CGRect)frame {

self = [super initWithFrame:frame];
if (self) {
    // Initialization code.
}
return self;
}

- (void)drawRect:(CGRect)rect {

CGContextRef _context = UIGraphicsGetCurrentContext();

graph = [[ECGraph alloc] initWithFrame:CGRectMake(500,-320,320, 200) withContext:_context isPortrait:NO];

item1 = [[ECGraphItem alloc] init];

item2 = [[ECGraphItem alloc] init];
/*
ECGraphItem *item1 = [[ECGraphItem alloc] init];

ECGraphItem *item2 = [[ECGraphItem alloc] init];*/

item1.isPercentage = YES;

item1.yValue=myY;

item1.width = 35;
item1.name = @"item1";

item2.isPercentage = YES;
item2.yValue =17;

item2.width = 35; 
item2.name = @"item2";

[graph setXaxisTitle:@"name"];
[graph setYaxisTitle:@"Percentage"];
[graph setGraphicTitle:@"Histogram"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,nil];

[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];

} 
```

我在 GraphsViewController 中添加了这个视图，但它没有显示任何内容

// 实现 viewDidLoad 以在加载视图后进行额外的设置，通常来自 nib。

```
 - (void)viewDidLoad {
[super viewDidLoad];

[self createGraph];

percentages = [NSArray arrayWithObjects:@"80",@"17", nil];

display = [[Display alloc] init];

[self.view addSubview:display];

[display setPercentageArray:percentages];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:35:36.833

您应该在单独的`UIView`对象中进行绘图并将其作为子视图添加到视图控制器的视图中。这就是它应该工作的方式。

> UIView 类使用按需绘制模型来呈现内容。

来源：[查看 iOS 编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html)

与

> UIViewController 类为所有 iOS 应用程序提供了基本的视图管理模型。...视图控制器管理构成应用程序用户界面一部分的一组视图。

来源：[UIViewController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

编辑：

```
// ...
display = [[Display alloc] init];
CGRect dFrame = CGRectMake(50, 50, 320, 200); // change these to whatever values you need
[display setFrame:dFrame];
[self.view addSubview:display]; 
```

# android - Android 演示应用程序可以在一段时间后自行删除吗

> ID：10595254
> 
> 赞同：0
> 
> 时间：2012-05-15T06:29:07.187
> 
> 标签：android, package, demo

我可以理解一个Android应用程序没有权限删除手机上的任何其他内容，但一个应用程序可以删除它自己的数据，然后通过包管理器删除它自己。

我正在考虑让应用程序在时间段到期后自行删除。在检测到应用程序从手机中消失后，Google Play 会自动将应用程序重新推送到手机上吗？

如果您以编程方式卸载应用程序，这可能与用户选择卸载应用程序相同。

有没有人这样做并且可能有一些他们可以分享的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:34:57.120

你为什么要这样做？只需对您的应用程序进行编码，使其在触发事件后不会做任何有用的事情，用户最终将自己删除它，因为它对他们无用。

这样，当他们尝试开始您的演示时，您甚至可以弹出一个对话框：

```
+----------------------------------------------------+
| 此演示已过期，请访问 |
| dodgybrothers.com 进行升级。|
+----------------------------------------------------+

```

尝试追加销售。并为 ASCII 艺术道歉，如果我擅长图形设计，我就不会成为代码猴子 :-)

这是基本的营销。您*不想*终止与潜在客户的关系。更好地维持关系并“推动”（当然不是太咄咄逼人）升级的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T22:53:14.203

对不起，

应用程序不能自行删除。您也许可以在 root 设备上找到解决方法，但您不能假设所有用户都拥有 root 设备。

# wordpress - 移动兼容与移动分离移动版本

> ID：10595257
> 
> 赞同：0
> 
> 时间：2012-05-15T06:29:22.817
> 
> 标签：wordpress, jquery-mobile, mobile-website

我正在建立一个移动版和电脑版的网站。但我正在修复应该使用什么来做这件事。我有一些我很困惑的问题：1.制作一个具有单独的移动版和电脑版的网站并渲染页面取决于用户使用的设备？2\. 另一个是单一版本的网站，所有设备都兼容。这可以根据设备分辨率调整布局吗？3\. 如果我做我在第 1 点提到的事情，我可以用 wordpress 和手机版用 jquery mobile 建立一个网站吗？4\. 如果我使用第 2 点中提到的与移动设备兼容的 wordpress 模板，我可以在外面使用所有其他插件形式吗？

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:02:04.140

> 所以我该怎么做？构建两个不同的版本？？如果是，我可以同时使用 wordpress 吗？您知道在 wordpress 中制作 PC 版和移动版的任何插件或方法吗？

这就是我为实现您的目标所做的事情：

*   正常安装 WordPress。
*   添加[Mobile Smart 插件](http://wordpress.org/extend/plugins/mobile-smart/)- 或者可能是 mobile smart pro。
*   为常规桌面浏览器创建主题并在 WordPress 中激活它
*   为移动浏览器创建一个完全独立的主题。您可能希望使用插件随附的示例代码；我从头开始创建自己的。
*   更改 Mobile Smart 的设置，让它知道您的手机主题
*   添加内容并享受！

请阅读 Mobile Smart 的文档。了解它在做什么很重要。

另外，请记住，您的两个主题是完全独立的，位于完全独立的目录中，因此您可以根据需要使用完全不同的函数。php、页眉、页脚、脚本等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:48:37.407

来自我同意的[https://github.com/ChristianPeters/crispy-mobile](https://github.com/ChristianPeters/crispy-mobile)的引用：

> CSS 媒体查询很好。但不适用于手机。
> 
> 他们只是添加您发送给客户的代码，而不是减少移动设备的代码。
> 
> 想象一下，您想制作一个响应式产品页面。
> 
> ```
> Do you really want to deliver a big 90KB product photo, if a 15KB photo would already fill the mobile screen?
> Do you really want to compute personalized product recommendations if they are just hidden afterwards?
> Do you really want mobile devices to download and interpret your whole stylesheet if half of the interface elements are going to be hidden anyway? 
> ```
> 
> 你没有。
> 
> 如果您首先开始移动设备，请不要让您的移动性能受到其他桌面功能的影响。
> 
> 善良，为客户提供他们需要的服务。

如果移动互联网足够快并且限制没有那么低，我可能会认为另一种方式。但我们必须等待几年。目前我认为最好建立单独的移动网站。但响应式设计也非常有用——即使使用单独的移动设计也不会受到伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:36:28.473

这里我要避免过多的主观性，因为每个人都会有不同的看法。

1.  是的，这种方法在我的公司网站 (www.achaleon.com) 上运行良好。我参与了一个名为 Mobile Smart Pro 的 WordPress 插件的 beta 测试。它实现了一个更大的开源项目中的元素，以检测移动设备并将完全不同的主题应用于移动站点。它的优点是您可以创建两个完全独立的主题，并针对设备和使用它的环境优化它们的各个方面。如果您愿意，您甚至可以在两个版本中提供不同的内容。
2.  这种方法需要仔细的计划和彻底的测试。对设计师的要求也更高。我在 WP 社区中有朋友以这种方式构建网站。我的理解是，这需要更强的编程技能（您需要比标准的“静态”css 实现更仔细地计划）。他们使用 cssgrid.net 作为起点

# ios - UIPageController 和手势识别器

> ID：10595274
> 
> 赞同：0
> 
> 时间：2012-05-15T06:30:23.740
> 
> 标签：ios, uigesturerecognizer

我正在使用 UIPageController 来实现基于页面的导航应用程序。我想仅在页面边缘启用滑动手势，并阻止内部内容视图中的滑动手势。页面的边距为 20 像素：

```
contentView.frame = CGRectInset(self.view.frame, 20, 20); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:46:26.257

识别手势后，您应该能够检索[locationInView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationInView%3a)，然后如果这是一个可接受的值，则继续，否则不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:48:59.787

首先在类接口中添加。

```
@interface MyPageViewController :UIViewController<UIPageViewControllerDelegate, UIGestureRecognizerDelegate> 
```

然后在 viewDidLoad 添加

```
for (UIGestureRecognizer *recognizer in self.pageViewController.gestureRecognizers) {

        recognizer.delegate = self;

} 
```

然后实现 shouldReceiveTouch 方法

```
#pragma mark - UIGestureRecognizer delegate methods
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{

    CGPoint touchPoint = [touch locationInView:self.pageViewController.view];

    CGRect innerRect =  CGRectInset(self.pageViewController.view.frame, 40, 40);

   if (CGRectContainsPoint(innerRect, touchPoint)) {
        return NO;
   }

   return YES;
} 
```

# regex - JSF2 验证器正则表达式

> ID：10595275
> 
> 赞同：2
> 
> 时间：2012-05-15T06:30:27.957
> 
> 标签：regex, validation, jsf

我正在使用以下正则表达式验证器，如果仅输入并允许列表 az 和 AZ 和 _ 和“空白”和 0-9 中的字符，我希望空白出现验证错误

目前我对这个 exp 有问题，它不允许在 b/w 中使用空格，也不允许在开始时使用空格。

```
<f:validateRegex pattern="^\s[a-zA-Z\s_0-9]+"/> 
```

请提出任何快速建议

例如。

```
" " (When user pass empty string it should fail)
" Abc hello" (It should pass)
"Hello world" (It should pass) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:11:18.473

试试这个：

```
^[a-zA-Z\s_0-9]+\b\s*$ 
```

# android - 是否可以以编程方式阻止除 android 上的一个网站之外的所有网站？

> ID：10595277
> 
> 赞同：3
> 
> 时间：2012-05-15T06:30:34.537
> 
> 标签：android, browser, block

如果用户在他的设备中打开任何浏览器，是否有任何方法可以在 Android 设备上以编程方式阻止网站。实际上我的要求是我只有一个网站，该网站将在浏览器中打开，除了该网站，如果用户打开不应该打开（阻止）的任何网站，它会显示一些警报。请任何人解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-13T07:07:09.270

是的。我终于找到了一种方法。

[从Play 商店](https://play.google.com/store/apps/details?id=com.kiwibrowser.browser&hl=iw)下载 kiwi 浏览器。

使用此浏览器，您可以在 Android 上添加 chrome 扩展。
然后，`stayfocusd`从[chrome 商店](https://chrome.google.com/webstore/detail/stayfocusd/laankejkbhbdhmipfmgcngdelahlfoji?hl=iw)
下载扩展程序 转到扩展程序设置，您可以使用它来阻止任何您想要的站点（当然也允许一些站点）。
但是，我没有一个一个地阻止所有你不想要的网站，而是找到了一种方法来阻止互联网上的所有网站，方法是添加一个被阻止的站点 - `https://`。
添加`https://`到阻止的站点列表后，只需在列表中添加您想要允许的站点`Allowed sites`，就是这样！

PS 还有`Nuclear option`在扩展设置中，可以让你阻止除允许的网站之外的所有网站，但不幸的是，这个选项在 android 上不起作用......

还有另一种浏览器称为 yandex 浏览器。您可以在哪里使用核选项。此扩展程序中还有一个`Max time allowed`选项，因此您可以设置在扩展程序阻止它们之前要使用被阻止站点的时间。不幸的是，在 Android 上设置后，您无法将时间更改为超过当前的时间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:44:46.113

不可以。除非您有特殊的应用程序或代理设置，否则您不能这样做。

您可能必须在 android 上安装代理服务器，您可以控制打开或不打开哪个网站。

[试试 proxoid](http://code.google.com/p/proxoid/)

# java - 使用多个线程迭代和修改 jtree

> ID：10595278
> 
> 赞同：-1
> 
> 时间：2012-05-15T06:30:43.667
> 
> 标签：java, swing

我有一个非常大的 JTree，我想浏览从根到叶子的所有节点。

我需要根据用户输入进行某种重新组合。

例如，我希望将用户对象字符串以“a”开头的所有节点重新组合到树内的一个新节点中。

首字母 : Root - Ann, John, Andrew

之后：Root - A - Ann Andrew J - John

我正在考虑开始迭代并为每个节点启动一堆线程并在创建新节点时进行同步。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:20:19.873

*一堆线程*......除非您的意思是您要`TreeModel`通过使用多个`Thread`s 在后台构建一个新线程，然后一次性替换您在 EDT 上的全部`TreeModel`线程，否则`JTree`这将是一个非常糟糕的主意。

Swing 组件只能在 EDT 上更改，因此如果您要`Thread`直接在`TreeModel`放置在您的 s 上的多个 s 上重新排序节点，您`JTree`很可能会以损坏的`JTree`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:49:13.833

正如 Robin 所说，在多个线程中直接在 JTree 上执行会导致竞争条件。

您可以复制您的 TreeModel 并更改它。但请注意，您仍然必须在线程之间进行同步。之后，您可以简单地调用 SwingUtilities.invokeLater 并将复制和更改的模型设置为 JTree 的新模型。

另一个想法是多线程分析数据，使用结果创建（线程安全）集合，并在 EDT 中使用结果更改模型。拥有一棵大树和少量修改，这将是最快的方式（没有复制，没有完全重建树）

提示：如果您使用的是 Java 7，请查看 Fork/Join-Framework。如果没有，请尽管这样做以获得这个想法。实现应该很容易，否则周围有实现。

# php - 在javascript中查找错误的字符

> ID：10595280
> 
> 赞同：0
> 
> 时间：2012-05-15T06:30:45.860
> 
> 标签：php, javascript

由于我要编写一个小的 php 脚本，我喜欢调用它来获取我页面的所有 javascript，这会导致客户端出现奇怪的错误。该脚本确实使用了一个配置 xml 文件和一些 xsl 样式表来生成一个大的 Javascript 字符串。有时会发生“未终止的字符串文字”错误，有时会出现错误提示：“尝试使用不可用或不再可用的对象”，就在 javascript 执行文档之后。写操作。是否有任何资源，或者是否有任何教程，只是揭示了将一堆 javscript 文件复制到一个字符串或文件时遇到此类问题的陷阱？

问候菲利普

编辑:: 以下错误：

![错误信息](../Images/a8f27c903342ce808811d1d0a8e2492b.png)

在以内容类型交付的网页中抛出：'application/xhtml+xml'。实际生成的 Javascript 如下所示：

[生成的源代码](http://pastebin.com/8V302mz9)

脚本本身一直运行到第一个 document.write 命令被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:49:33.873

听起来字符串没有完全/正确地转义。如果你照顾

*   将所有撇号转义为 \'
*   将所有引号转义为 \"
*   将所有换行符转义到 \n

你不应该有任何错误。

# iphone - 如何从已包含在xcode项目中的.txt文件中搜索单词

> ID：10595281
> 
> 赞同：-2
> 
> 时间：2012-05-15T06:30:49.550
> 
> 标签：iphone, ios, xcode, search, nsstring

我在我的项目中包含了一个 .txt 文件，我必须通过在搜索栏中输入关键字来从该文件中找到一个关键字。帮助我使用一段代码来搜索文件中存在的关键字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:49:32.020

试试看

```
//Get the contents of the file
NSString *contentString = [NSString stringWithContentOfFile:<i>path/to/your/file.txt</i> encoding:<i>textEncoding<i> error:<i>&error</i>];

if (!error) {
    NSRange range = [contentString rangeOfString:<i>yourKeyword</i>];

    if (theRange.location != NSNotFound)
       //do whatever you want
} 
```

注意：只要您的文本文件不是“太大”，这将起作用。如果您必须处理更大的文件，请查看 NSInputStream 以仅解析文件块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T10:39:04.320

尝试这个：

```
-(void)searchWord:(NSString *)wordToBeSearched{
NSString* path = [[NSBundle mainBundle] pathForResource:@"wordFile"
                                             ofType:@"txt"];

NSString* content = [NSString stringWithContentsOfFile:path
                                          encoding:NSUTF8StringEncoding
                                             error:NULL];

NSString *delimiter = @"\n";
NSArray *items = [content componentsSeparatedByString:delimiter];
NSString *character = @" ";
BOOL isContain = NO;
for (NSString *wordToBeSearched in items) {
isContain = ([string rangeOfString:wordToBeSearched].location != NSNotFound);
}
return isContain; 

} 
```

你可以去这里了解更多[详情](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/SearchingStrings.html#//apple_ref/doc/uid/20000149-CJBBGBAI)

# jsf - JSF, EL, Managed Beans - 如何判断 getter 和 setter 签名是什么？

> ID：10595282
> 
> 赞同：8
> 
> 时间：2012-05-15T06:30:58.480
> 
> 标签：jsf, javabeans, el

对于 JSF、Managed Beans 和 EL 2.2，我通常知道以下形式的表达式：

```
#{bean.value} 
```

将映射到托管 bean 类中的一组相应函数，如下所示：

```
@ManagedBean
class Bean {
    private String value;
    public String getValue() { return value; }
    public void setValue( String s ) { value = s; }
} 
```

也可以获取和设置地图的属性：

```
#{bean.value['key']} 
```

由以下内容支持：

```
@ManagedBean
class Bean {
    private Map<String, Boolean> kvMap;
    public boolean getValue( String key ) { return kvMap.get( key ); }
    public void setValue( String key, boolean value ) { kvMap.put( key, value ); }
} 
```

到现在为止还挺好。

随着我花更多时间在 JSF 上，我发现我正在尝试编写可重用的代码块。`<ui:composition>`具体来说，我可以通过包含的块中的小块 xhtml `<ui:include>`。更重要的是，对我来说，许多更有用的东西是嵌套的复选框集（我们的 UI 设计师对它们很感兴趣 ;-)，它们`<ui:repeat>`变得非常方便。

总是，为了使用`<ui:repeat>`并且`<ui:include>`没有大量的打字，我一直在使用别名，无论是通过创建`<ui:param>`还是内联类似的`var`属性`<ui:repeat>`。

随着我一直在编写越来越多的嵌套 UIComponent，尤其是从地图中的地图获取其值的东西，我发现越来越难以推断出 JSF 在提交表单时将寻找的正确 setter 方法签名（对于某些原因写 getter 似乎更自然）。

那么我对各位大师的问题是：

有什么方法可以让 JSF 告诉我它期望 setter 签名的样子吗？由于 JSF 通常不会抱怨解析为 getter-only 的表达式（认为它是只读属性），因此我发现缺乏反馈令人沮丧，而且在我之前似乎需要大量摆弄不同的方法签名终于击中了那个魔法*吧*。

我希望有一些技术，比如在运行时进行 FacesContext... 查询，或者查看一些编译的中间体（如类文件），这将指向深度嵌套属性的正确设置器签名。如果有这样的事情，我认为它会为我节省很多时间来试图弄清楚如何通过反复试验来构建一个 setter。

希望我已经清楚地表达了我所追求的，在此先感谢您的回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:07:17.143

我知道您的问题基本上可以归结为*“二传手的`Map`外观应该如何？”* .

答案很简单：你不需要任何人。EL对自身使用该[`put()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29)方法。[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)您只需要为整体提供一个吸气剂`Map`。在获取地图值时，EL 将使用自身的[`get()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#get%28java.lang.Object%29)方法`Map`。这都是由内置的幕后完成的[`MapELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/MapELResolver.html)。

所以这应该这样做：

```
@ManagedBean
class Bean {
    private Map<String, Boolean> kvMap;
    public Map<String, Boolean> getValue() { return kvMap; }
} 
```

这将用作`#{bean.value['key']}`或`#{bean.value.key}`如果密钥不包含句点。您也可以在输入组件中使用它。

```
<h:selectBooleanCheckbox value="#{bean.value.key}" /> 
```

至于工具，Eclipse 的 JBoss Tools 插件对普通 javabean 有很好的 EL 自动完成支持，但它不能自动完成映射键。此外，Eclipse 有自己的工具来自动生成 bean 属性以及基于列表或现有属性的 getter 和 setter。

# c++ - 调用析构函数的顺序和点

> ID：10595283
> 
> 赞同：7
> 
> 时间：2012-05-15T06:31:06.580
> 
> 标签：c++, compiler-construction, destructor

可以说我有两个本地对象。当函数返回时，是否保证哪个会先出作用域？

例如：

我有这样的课：

```
class MutexLock
{
    /* Automatic unlocking when MutexLock leaves a scope */
    public:
      MutexLock (Mutex &m)      { M.lock();   }
      ~MutexLock(Mutex &m)      { M.unlock(); }
}; 
```

这是一个非常常见的技巧，用于在超出范围时自动释放互斥锁。但是如果我在作用域中需要两个互斥锁怎么办？

```
void *func(void *arg)
{ 
    MutexLock m1;
    MutexLock m2;

    do_work();

}  // m1 and m2 will get unlocked here. But in what order? m1 first or m2 first? 
```

这真的不会造成任何僵局。但在某些情况下，释放资源的顺序可能对用户有用。在那种情况下，显式而不是依赖析构函数重要吗？

另外，编译器在任何情况下都可以延迟销毁吗？我的意思是

```
func()

{

     {
         foo f();
     } ---------> Can compiler choose to not destroy f here, rather do it at the time when func() is returning. 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T06:32:41.367

> `// m1 and m2 will get unlocked here. But in what order? m1 first or m2 first?`

析构函数将按构造的相反顺序调用：`m2`然后`m1`。

> 在那种情况下，显式而不是依赖析构函数重要吗？

破坏顺序是明确指定的，因此您可以依赖它。

> 另外，编译器在任何情况下都可以延迟销毁吗？

不，如果是这样，那会破坏很多基于[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的代码（你的`MutexLock`类就是一个很好的例子）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T06:44:16.233

**在那种情况下，显式而不是依赖析构函数重要吗？**
不，这不是必需的。
范围内对象的销毁顺序是明确定义的。
这与它们的构建顺序完全相反。

* * *

**另外，编译器在任何情况下都可以延迟销毁吗？**
不
，编译器不能，这就是**RAII**的目的。它提供了一种隐式清理和释放资源的机制，而无需程序员进行任何显式的手动操作。
您延迟销毁的要求与 RAII 的目的是平行的，它需要*手动资源管理*。
如果您需要手动资源管理，您可以在堆上分配指针，`new`并且它们指向的对象将是有效的，除非您通过`delete`调用和调用它们的顺序显式取消分配它们。
当然，这样做既不建议也不鼓励这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T06:34:10.037

破坏以相反的构造顺序发生：首先`m2`然后`m1`。

编译器永远不能将对象的生命周期延迟到作用域 end ( `}`) 之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T06:34:46.630

当对象超出范围时，它总是被销毁——这不是java。f 将在您指定的地方被销毁，并且永远不会在 func 结束时被销毁。通常，析构函数的调用顺序与它们的构造顺序相反。

# jquery - 在 JQuery 中调用 getJSON 中的另一个函数

> ID：10595285
> 
> 赞同：2
> 
> 时间：2012-05-15T06:31:11.997
> 
> 标签：jquery

```
function myFunction(param)
{
    $.getJSON('/url', {'param':param}, function(data)
    {
        confirm(data);
    });
} 
```

我在调用 myFunciton 时遇到问题，除了调用另一个函数（如（确认））之外，响应函数会执行所有操作

我将 myFunction 称为按钮的单击事件，并且正确发送了 ajax 请求，当我更改响应函数中的一些全局变量时，就可以了调用另一个函数的主要问题

有关详细信息的实际功能

```
function display (gameid,index)
{
  $.getJSON('/games/play.json', {'game':gameid,'index':index,'data':'X'},function(data)
  {
    confirm(data)
    if(data=="X_Win")
    { 
       gameEnded=true;
       $("#result").innerHTML="You won";
    }
    else if(data=="Y_Win")
    {
       gameEnded=true;
       $("#result").innerHTML="You Lost";   
     }
 } 
```

gameEnded 设置为 true
但 confirm() 和 $("#result") >>> 都没有调用

谁能帮我。

在此先感谢
M.SH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:46:35.873

你不能调用确认函数，因为你在 getJson 函数的回调中。这意味着您不再处于相同的上下文中。

你需要这样做：

```
 function myFunction(param)
{
    $.getJSON('/url', {'param':param}, $.proxy(function(data)
    {
        this.confirm(data);
    }, this));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:29:18.773

如何使用[jsonp](http://en.wikipedia.org/wiki/JSONP)而不是 json，通过附加 url`callback=?`

这是一个**[演示](http://jsfiddle.net/dhirajbodicherla/vX2YQ/2/)**

希望这可以帮助

# mongodb - 仅在一个分片中创建数据库

> ID：10595286
> 
> 赞同：0
> 
> 时间：2012-05-15T06:31:26.657
> 
> 标签：mongodb

在 Mongo 中，可以将数据库仅驻留在一台服务器中（但没有分片）？

*   我想使用 Mongo 来存储我们的**应用程序日志**，但我想将它们放在与其余数据不同的机器上。

*   这样，如果我们开始发送太多的日志消息，只有拥有日志数据库的机器会变慢。

*   理想情况下，它应该对应用程序是透明的，并且应该由 MongoS 进程管理 which-machine-has-which-database。

*Nb：我们还不想对整个数据库进行分片，因为我们目前的性能还不错，我们只想将数据库与日志记录集合隔离开来。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:28:12.917

是的，您可以在您的应用程序服务器上运行 mongos，并在另一台机器上运行 mongod 进程来存储您的日志。但是如果你想使用 mongos，你必须使用分片——但你可以使用单个分片。您需要以 --shardsvr 身份运行 mongod 进程，并将这个单个分片添加到 mongos 进程中。您还需要运行至少 1 个配置服务器。使用此设置存在数据冗余问题 - 因此您可能希望在 mongod 进程上运行更多 - 在单个分片中使用副本集并在不同机器上运行这些 mongod 进程。如果您打算这样做，您还可以运行 3 个配置服务器（可以选择 1 个或 3 个并设置分片）- 2 个在副本集的 1 个节点上，1 个在另一个节点上。也用于记录人们经常使用封顶集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:01:14.273

是的，您可以将 2 个 mongoD 与 2 个不同的服务器一起使用，一个与您的实际数据库一起使用，一个与日志数据库一起使用。

诀窍是分片每个数据库，但**不分**片集合。

然后使用 movePrimary 命令，您可以选择这些非分片集合的实际存储位置。

（见：[http](http://www.mongodb.org/display/DOCS/movePrimary+Command) ://www.mongodb.org/display/DOCS/movePrimary+Command ）

在您的情况下，您将执行以下操作：

```
db.adminCommand({movePrimary:applicationdb, to:application_shard})
db.adminCommand({movePrimary:loggingdb, to:logging_shard}) 
```

但是请注意，当您决定对 applicationdb 进行分片时，mongo 将自动开始将您的数据也传播到 loggingdb_shard

# android - 如何通过单击按钮和每个元素的 id 添加布局

> ID：10595291
> 
> 赞同：0
> 
> 时间：2012-05-15T06:31:52.103
> 
> 标签：android, android-layout, android-contacts, viewgroup

这是我的图像

![这是我的图像](../Images/342dcbe25bab85665fe21e82afc7b34e.png)

![在此处输入图像描述](../Images/738866ec8698e8d670d3184ba6082b50.png)

如何在单击“+”按钮时以编程方式添加新布局（带有按钮和 EditText），并为每个孩子设置一个唯一的 ID（如图所示）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:41:32.903

```
private Button buttonItemArray[] = new Button[50];
private EditText edtValueArray[] = new EditText[50];

            int itemId = itemCounter;
            int valueId = valueCounter;

            LinearLayout linearLayout = new LinearLayout(
                    getApplicationContext());
            linearLayout.setOrientation(0);

            buttonItemArray[j] = new Button(NewVendorDetailActivity.this);
            buttonItemArray[j].setLayoutParams(edtName.getLayoutParams());
            buttonItemArray[j].setId(itemId);
            buttonItemArray[j].setText(name);

                    edtValueArray[j] = new EditText(NewVendorDetailActivity.this);
        edtValueArray[j].setLayoutParams(edtName.getLayoutParams());
        edtValueArray[j].setId(valueId);
           edtValueArray[j].setBackgroundResource(android.R.drawable.editbox_background_normal);
        edtValueArray[j].setSingleLine(true);
        edtValueArray[j].setText(value);

        linearLayout.addView(txtItemArray[j]);
        linearLayout.addView(edtValueArray[j]);

            layout.addView(linearLayout);
            itemCounter++;
            valueCounter++;
            j++; 
```

试试这种类型的添加按钮自定义............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:41:16.793

请阅读以下内容，

[http://www.learn-android.com/2010/01/05/android-layout-tutorial/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:47:54.113

在 xml 中创建一个按钮，并在 Activity 中调用 xml，如下所示 Button contacts = (Button) findViewById(R.id.contacts); 然后为按钮 contacts.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(Contacts.Intents.Insert.ACTION,
                    Contacts.People.CONTENT_URI);
            intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
            intent.putExtra(ContactsContract.Intents.Insert.NAME, entryname);
            intent.putExtra(ContactsContract.Intents.Insert.PHONE, phone);
            startActivity(intent);
            finish();
        }
    }); 
```

# android - 选择器的奇怪行为

> ID：10595296
> 
> 赞同：1
> 
> 时间：2012-05-15T06:32:06.850
> 
> 标签：android, android-layout

我想用带有渐变填充颜色的圆角矩形边框创建布局，所以我使用了以下选择器

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item>

    <shape>

        <gradient
            android:angle="90"
            android:startColor="#FFFF0000"
            android:endColor="#FF00FF00"
            android:type="linear" />

        <padding android:left="7dp" android:top="7dp" 
            android:right="7dp" android:bottom="7dp" /> 

        <corners android:radius="4dp" /> 

    </shape>

</item>

</selector> 
```

布局看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"  android:background="@drawable/buttonsborder">

</LinearLayout> 
```

但它并没有填充所有的屏幕，只有我放在布局上的控件，知道如何让选择器填充整个布局，即使没有控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:35:58.277

将布局高度更改为`fill_parent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:39:42.710

请

在 xml 中使用它

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >
<gradient
    android:angle="225"
    android:endColor="#FF0E2E57"
    android:paddingLeft="20dip"
    android:startColor="#FF0E2E57" />

<corners
    android:bottomLeftRadius="40dp"
    android:bottomRightRadius="40dp"
    android:paddingLeft="20dip" 
    android:topLeftRadius="40dp"
    android:topRightRadius="40dp"/> 
```

并将其用作您的背景。在布局中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:41:16.630

嗨，将此 xml 用于圆角矩形边框，然后将其设置为 android:background

```
<
?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item>        
            <shape>
                <gradient
                    android:endColor="#ffffff"
                    android:startColor="#ffffff"
                    android:angle="270" />
                <stroke
                    android:width="0.5dp"
                    android:color="#808080" />
                <corners
                    android:radius="10dp" />
                <padding
                    android:top="10dp"
                    android:bottom="10dp"
                    android:left="10dp" />
            </shape>
        </item>
    </selector> 
```

# jquery - 为什么在将列表元素标签的克隆添加到 标签

> ID：10595298
> 
> 赞同：0
> 
> 时间：2012-05-15T06:32:23.807
> 
> 标签：jquery, html, jquery-ui, jquery-ui-draggable

为什么 jquery 可拖动克隆不“克隆”要添加到列表的元素的 id。列表标签 9-12 将自己克隆到 ul 标签 id=sortable (list tags 1-8) 中，这是正确的，目前如果我唯一要做的是将列表标签元素 9-12 添加到列表标签元素 1-8 它的 id单击按钮后，不会显示在我正在创建的 id 数组上，因此它只打印出 ids “1,2,3,4,5,6,7,8,9,10,11,12”。尽管我可以看到克隆已创建，但列表元素显示但它的 id 丢失了，我错过了什么吗？

我的html代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Draggable + Sortable</title>
    <link rel="stylesheet" href="themes/base/jquery.ui.all.css">
    <script src="jquery-1.7.2.js"></script>
    <script src="ui/jquery.ui.core.js"></script>
    <script src="ui/jquery.ui.widget.js"></script>
    <script src="ui/jquery.ui.mouse.js"></script>
    <script src="ui/jquery.ui.draggable.js"></script>
    <script src="ui/jquery.ui.sortable.js"></script>
    <link rel="stylesheet" href="../demos.css">
    <style>
    .demo ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; }
    .demo li { margin: 5px; padding: 5px; width: 150px; }
    </style>
    <script>
    $(function() {
        $( "#sortable" ).sortable({
            revert: true,
        });
        $( "#containedSortable" ).sortable({
            revert: true,
            containment: "parent" 
        });

        $( "#draggable li" ).draggable({
            connectToSortable: "#sortable",
            helper: "clone",
            revert: "invalid",
        });
        $( "ul, li" ).disableSelection();
    });
    function listOrder()
    {
    var arr = $("ul li").map(function() { return $(this).attr('id') }).get();
    alert (arr);
    }
    </script>

</head>
<body>

<div class="demo">

<!--<ul>
    <li id="draggable" class="ui-state-highlight">Drag me down</li>
</ul> -->

<ul id="sortable">
    <li id="1" class="ui-state-default">Item 1</li>
    <li id="2" class="ui-state-default">
    Contained List:
    <ul id="containedSortable">
    <li id="3" class="ui-state-default">contained 3</li>
    <li id="4" class="ui-state-default">contained 4</li>
    <li id="5" class="ui-state-default">contained 5</li>
    </ul>
    </li>
    <li id="6" class="ui-state-default">Item 6</li>
    <li id="7" class="ui-state-default">Item 7</li>
    <li id="8" class="ui-state-default">Item 8</li>

</ul>

</div><!-- End demo -->

<button type="button" onclick="listOrder()">save list order</button>

<!--<div class="demo-description">
<p>Draggables are built to interact seamlessly with <a href="#">sortables</a>.</p>
</div><!-- End demo-description -->
<div class="demo">

<ul id="draggable">

<li id="9" class="ui-state-default">item 9</li> 
<li id="10" class="ui-state-default">item 10</li> 
<li id="11" class="ui-state-default">item 11</li> 
<li id="12" class="ui-state-default">item 12</li> 
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:37:47.543

尝试使用 refreshPositions。[refreshPositions - 可排序](http://jqueryui.com/demos/sortable/#method-refreshPositions)

```
 $( "#containedSortable" ).sortable({
            revert: true,
            containment: "parent"
           refreshPositions: true;

        }); 
```

# android - Android 上的文档阅读器

> ID：10595308
> 
> 赞同：0
> 
> 时间：2012-05-15T06:32:53.883
> 
> 标签：android

我想写一个只读文档阅读器。
该文档是在线文档。
文件格式包含*.doc、*.docx、*.ppt、*.pptx、*.xls、*.xlsx、*.pdf、*.txt。
现在我通过将文件下载到手机来做到这一点。
并使用下面的代码打开它。
但是这个方法打开文件是可以修改的，我想以只读方式打开。

```
File file = new File(TempFilePath);
String mimetype = mime_type(TempFileName);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), mimetype);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

public String mime_type(String name) {
String type = null;
String[] mime = {".htm\ttext/html", ".html\ttext/html", ".doc\tapplication/msword", ".ppt\tapplication/vnd.ms-powerpoint", ".xls\tapplication/vnd.ms-excel", ".txt\ttext/plain", ".pdf\tapplication/pdf", ".xlsx\tapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet", ".pptx\tapplication/vnd.openxmlformats-officedocument.presentationml.presentation", ".docx\tapplication/vnd.openxmlformats-officedocument.wordprocessingml.document"};

int i;
for(i = 0; i < mime.length; i++) {
if(name.toLowerCase().endsWith(mime[i].split("\t")[0])) {
return mime[i].split("\t")[1];
}
}
return type;
} 
```

因为文档的 URL 和手机的 wifi 可能在同一个本地网络中，所以 GoogleDocs 对我没有用。
如何以只读方式阅读在线文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:16:04.950

我认为您应该在 Android 的 AndroidManifest.xml 中定义权限。使用以下权限：android.permission.WRITE_EXTERNAL_STORAGE android.permission.READ_PHONE_STATE

# c# - 黑白公共变量和公共汽车属性有什么区别

> ID：10595309
> 
> 赞同：2
> 
> 时间：2012-05-15T06:32:54.410
> 
> 标签：c#

> **可能重复：**
> [C# 中属性和字段的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp)

我知道这是一个非常基本的问题，但搜索后我无法阅读任何有效的答案

例如

```
public string abc;

public string abc { get; set; } 
```

请描述一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:00:51.223

变量存储直接值，但属性是您的类及其变量的窗口。

尽管它们的工作方式相同（几乎），但字段的一件非常好的事情是，如果您想对字段进行一些额外的工作（例如验证或进行任何计算），您可以这样做。

这将为您解释

```
public string _abc;

public string abc 
{ 
  get
  {        
    return _abc;
  };

  set
  {
    if (value == null)
      _abc = "";
    else
      _abc = value;
  }; 
} 
```

这里如果`null`传递给属性`abc`，那么它将被检查并分配一个空值`_abc`。否则价值。

如果我们想要这个有一个变量。我们必须这样做的每一个地方。

```
if(foo == null) // here foo is some string
    _abc = ""
else
    _abc = foo; 
```

有了属性，这可以像 abc = foo;

现在它将在属性的 set 部分进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:07:35.740

属性可以包含一些设置/获取值的代码。当您访问公共变量时，它们不能也不会包含任何代码。这是一个巨大的差异。

使用您对使用您的任何人说的属性是代码，现在或将来可能在值后面有一些代码。

使用公共变量你说它只是一个无聊的旧字段，将包含一些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:31:02.183

使用自动属性而不是字段的一个原因是兼容性。
例如，当您分配一个字段时，CLR 就是这样做的。它设置字段。
当您拥有一个属性（无论是否自动），并且您键入

```
someObject.Whatever = "Value"; 
```

看起来您正在分配一个字段，但实际上，C# 编译器会为您插入如下内容：

```
someObject.set_Whatever("Value"); 
```

这与设置字段不同。如果您有一个字段并稍后将其更改为属性（例如，如果您想实现更改通知或类似的东西），您将不得不重新编译所有使用原始字段的程序集，因为分配字段需要与设置不同的代码一个属性（无论是否自动）。

几乎没有理由使用公共领域。自动属性可以在运行时内联，因此不会有性能差异。并且它们可以为您的 get/set 方法添加额外的逻辑，而无需重新编译相关程序集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:32:34.900

*（关于我的术语：“field” = 公共变量，“property” = get/set）*

*除了用法*上的差异之外，还要提到一件事：与字段不同，属性被编译为方法（我认为它在内部被称为类似的东西`get_abc`）。因此，从一开始就声明汽车财产有两个好处：

1）反射没有问题。如果某些反射代码基于作为字段的值，然后您认为“好吧，现在我想添加空测试”并更改为属性，那么反射代码最终会失败（除非您在反思，但这将是额外的努力，恕我直言）

2）可能的副作用的“警告”。字段只能更改*其*值，方法可以对类做任意事情。因此，从一开始就声明一个属性意味着在后台发生其他变化的可能性。（当然不应该在 setter 中做奇怪的事情，但有时从提供的一个值中获取额外的初始化并不是不切实际的；例如测量列表的长度）

我还要说尽可能使用属性是一种很好的风格。特别是为了提供这两个原因，也是为了一致性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T07:39:44.443

与公共变量上的属性相同的区别，例如属性支持绑定但变量不支持。

# c# - 从 linq 查询返回 ObservableCollection

> ID：10595310
> 
> 赞同：1
> 
> 时间：2012-05-15T06:32:58.550
> 
> 标签：c#, .net, wpf, linq, windows-runtime

我有以下 linq 片段

**注意**-> 这是 Metro 应用程序，[ICollectionView](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br209846.aspx)无法按预期进行分组/排序。

```
 ObservableCollection<int> ints = new ObservableCollection<int>();
        ints.Add(3);
        ints.Add(4);
        ints.Add(5);
        ints.Add(6);
        ints.Add(3);
        ints.Add(4);
        ints.Add(1);
        ints.Add(2);

        var groupedInts = ints.GroupBy(i=>i).Select(i=>  new {Key=i.Key, Count=i.Count()}); 
```

我要关注

1.  订阅与之对应的 groupedInts 或 ObservableCollection（基本上是从 WPF/Metro UI 到 groupInts 的数据绑定）

2.  ints（原始 observablecollection）的任何更改都应由 groupedInts 反映（以便订阅 groupInts/相关 ObservableCollection 的 UI 可以显示更改）。

在实际场景中，数据结构稍微复杂（6-7个属性），但问题归结为上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:48:42.910

处理`ints.CollectionChanged`事件并在那里使用相同的 LINQ 查询刷新您的`groupedInts`变量...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:53:52.017

我能想到的方法有两种。

**1st** : 使用 Bindable Linq / Continuous Linq

**第二**：为 groupedInts 创建一个单独的 CollectionView。当原始集合发生变化时，它应该随之变化。[这是一个漂亮而整洁的教程](http://www.abhisheksur.com/2010/08/woring-with-icollectionviewsource-in.html)

AngelWPF 将 LINQ 属性通知为已更改的想法也是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-19T09:27:20.983

你需要我的[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)库。使用这个库，您可以像这样编写代码：

```
ObservableCollection<int> ints = new ObservableCollection<int>();

ints.Add(3);
ints.Add(4);
ints.Add(5);
ints.Add(6);
ints.Add(3);
ints.Add(4);
ints.Add(1);
ints.Add(2);

var groupedInts = ints.Grouping(i=>i).Selecting(ig =>  new {Key=ig.Key, Count=ig.Count}); 
```

groupedInts 是[ObservableCollection](https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.observablecollection-1?view=netframework-4.8)，反映了 ints 集合中的所有变化。

# windows - 如何在 Windows 上获取 CPU 的型号，如 Core i7-860？

> ID：10595312
> 
> 赞同：9
> 
> 时间：2012-05-15T06:33:00.840
> 
> 标签：windows, cpu

i7 CPU型号有多种如下：

> [http://en.wikipedia.org/wiki/List_of_Intel_Core_i7_microprocessors#Desktop_processors](http://en.wikipedia.org/wiki/List_of_Intel_Core_i7_microprocessors#Desktop_processors)

如何知道我在 Windows 上使用的是哪个版本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T06:37:10.927

通过以下方式打开“系统信息”

```
Start Menu > Accessories > System Tools > System Information 
```

然后在“系统信息”中打开一次：

```
System Information > System Summary 
```

右侧将是“处理器”，它将为您提供 CPU 的完整描述。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-04T17:02:01.440

`Windows Key` + `R` 将打开运行命令

键入`CMD`并按下

类型`wmic CPU get NAME`和 `enter`

对我来说，它给出了：

```
 Intel(R) Core(TM) i7 CPU  **920**  @ 2.67GHz 
```

920 是我认为 您
正在寻找`wmic CPU`的 `enter` ...那个。 祝你好运
`wmic CPU get (whatever entry interests you)`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-15T06:43:34.330

您可以检查WMI 类的`Name`属性[`Win32_Processor`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)

试试这个 C# 示例

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);
                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT Name FROM Win32_Processor");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);
                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0}",WmiObject["Name"]);                     
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-15T06:34:10.017

[CPU-Z（免费软件）](http://www.cpuid.com/softwares/cpu-z.html)可以为您提供这些信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-15T06:37:16.537

最简单的方法就是打开“开始”->“计算机”->“系统属性”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-25T16:35:55.677

打开 Windows PowerShell，键入以下内容：

```
 > gwmi -query "SELECT Name FROM Win32_Processor"

Name       : Intel (R) Cor.....i7-2670QM CPU @2.20GHz 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-10T18:47:35.487

使用外壳上的“wmic”工具：

```
>wmic cpu get name
Name
Intel(R) Core(TM) i7-6820HQ CPU @ 2.70GHz 
```

请注意：在一些相对罕见的情况下，您可能会看到对这些值的访问限制。

# html - SWF Flash 动画无法正常工作

> ID：10595313
> 
> 赞同：0
> 
> 时间：2012-05-15T06:33:01.653
> 
> 标签：html, object, flash

在我的[页面上](http://www.vazaky.com/)是一个 Flash 动画 - 在徽标下。问题是，动画不能正常工作 - 很慢，动画中的图像模糊等。如果我在**Elmedia Player**中播放动画，效果很好，但在网站上不行。

我以这种方式将动画包含在页面中：

```
<div>
  <object type="application/x-shockwave-flash" data="/images/intro.swf" width="986" height="110">
    <param name="movie" value="/images/intro.swf" />
  </object>
</div> 
```

问题可能出在哪里/我该如何解决这个问题？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:37:55.020

当我在两个不同的浏览器中尝试您的页面时，GMap2 出现错误。也许这会阻止您的闪存被嵌入？

```
 var map = new GMap2(document.getElementById("map_canvas")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:42:56.913

您的嵌入代码显然不起作用。为了与所有主流浏览器兼容以及在 HTML 页面中轻松嵌入 Flash 电影，我真的推荐[SWFObject](http://code.google.com/p/swfobject/)。

它有一个[方便的生成器 GUI](https://code.google.com/p/swfobject/downloads/list)，可以为您设置所有代码，您所要做的就是复制+粘贴。

# android - 将 Android 中的 SharedPreferences 备份到本地服务器或设备

> ID：10595315
> 
> 赞同：0
> 
> 时间：2012-05-15T06:33:11.717
> 
> 标签：android, backup, sharedpreferences, android-backup-service

我正在为很多设备开发应用程序，因此它们没有注册到 Google 帐户。

但我想备份我的`SharedPreferences`某个地方。最好在设备上的文件夹中。

所以我尝试使用`BackupAgentHelper`，但这仅备份到 Google 还是可以备份到其他地方？

或者有没有办法复制`SharedPreferences`到SD卡上的一个地方？

问题是当我更新我的应用程序（不是通过市场）时，我丢失了所有数据。

PS：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:56:25.193

使用`BackupAgentHelper`仅使用内置的 Google 备份系统，如果您在设备上没有 Google 帐户，则不会对您做任何有用的事情。

`SharedPreferences`文件只是应用程序数据目录中的常规文件。如果您想根据命令将它们复制到 SD 卡或您自己的服务器，您可以使用普通`File`API 来完成。听起来你想要实现的目标，最简单的方法可能是调用[`Context.fileList()`](http://developer.android.com/reference/android/content/Context.html#fileList%28%29)以获取应用程序内部存储中的文件数组，然后遍历该数组，将每个文件复制到 SD 卡上的文件夹中。

# android - Android从url性能加载图像

> ID：10595317
> 
> 赞同：0
> 
> 时间：2012-05-15T06:33:26.390
> 
> 标签：android

我有经典的 AsyncTask 来加载图像：

```
private class DownloadImageTask extends AsyncTask<String,Void,Bitmap> {

    Bitmap  bitmap = null;

    @Override
    protected Bitmap doInBackground(String... str) {
        try{   

            InputStream in = new java.net.URL(picture).openStream();
            bitmap = BitmapFactory.decodeStream(new SanInputStream(in));
            //viewPicture.setImageBitmap(bitmap);
            viewPicture.setBackgroundDrawable(new BitmapDrawable(bitmap));

        }
        catch(Exception e){
            e.printStackTrace();
        }
        return bitmap;
    }
} 
```

但是图像的加载时间很长。当我开始此活动时，除了图像之外的所有内容都已加载，仅在等待一秒钟后我才能看到它。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:38:15.073

很简单……因为打开到资源 URL 的连接并下载所有需要的字节需要时间。此外，性能也可能因 Internet 连接速度而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:38:26.003

```
viewPicture.setBackgroundDrawable(new BitmapDrawable(bitmap)); 
```

应该在 UI 线程上完成，在 AsyncTask 的 onPostExecute 方法中。

此外，使用 try/catch 的一个不错的 finally 块关闭您使用的流（如果！null）。

不要担心时间，这是要走的路。

# vb.net - 在未安装 Outlook 的情况下从 pst 获取 Outlook 约会

> ID：10595323
> 
> 赞同：0
> 
> 时间：2012-05-15T06:33:46.817
> 
> 标签：vb.net, winforms

如何在未安装 Outlook 的情况下从 pst 文件中获取约会。只要它是免费的（与 independetsoft 不同），它就可以在 3rd 方 API 的帮助下使用。我真的需要这个工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:37:51.137

你试过 Mozilla Sunbird 吗？ [http://www.mozilla.org/projects/calendar/sunbird/](http://www.mozilla.org/projects/calendar/sunbird/)

[http://www.tech-recipes.com/rx/2479/mozilla_sunbird_import_outlook_calendar_appointments/](http://www.tech-recipes.com/rx/2479/mozilla_sunbird_import_outlook_calendar_appointments/)

他们似乎也有一个便携式应用程序版本，你可以从 USB 记忆棒运行。

[http://portableapps.com/apps/office/sunbird_portable](http://portableapps.com/apps/office/sunbird_portable)

# java - 子包的spring aop表达式

> ID：10595326
> 
> 赞同：4
> 
> 时间：2012-05-15T06:33:51.193
> 
> 标签：java, spring, aop, spring-aop

我已经围绕类型编写了 spring aop 表达式，例如

```
@Around("execution(* com.mycomp.proj.parent.child1.*.*(..))
|| execution(* com.mycomp.proj.parent.child2.*.*(..))") 
```

但是，如果新包将在 parent 下创建，则此表达式不会应用于新包`(e.g.:com.mycomp.proj.parent.child3`）。如何开发包含这一点且不适用于直接位于父包中的类的表达式？（仅适用于所有子包中的类的表达式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:53:41.880

排除父母：

```
@Around("execution(* com.mycomp.proj.parent.*.*(..))
&& ! execution(* com.mycomp.proj.parent.*(..))") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T06:35:04.610

@Around("执行(* com.mycomp.proj.parent.child1\. *.* (..)) || 执行(* com.mycomp.proj.parent.child2 *..* (..))")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-03T09:56:29.243

申请一个额外的时间如下

```
@Around("execution(* com.mycomp.proj.parent..*.*(..))") 
```

它将允许对 com.mycomp.proj.parent 的所有子包进行切入点

# python - Pandas：排序数据透视表

> ID：10595327
> 
> 赞同：4
> 
> 时间：2012-05-15T06:34:02.517
> 
> 标签：python, pandas

只是第一次尝试熊猫，我试图先按索引对数据透视表进行排序，然后按系列中的值排序。

到目前为止，我已经尝试过：

```
table = pivot_table(sheet1, values='Value', rows=['A','B'], aggfunc=np.sum)

# Sorts by value ascending, can't change to descending
table.copy().sort()
table

# The following gives me the correct ordering in values, but ignores index 
sorted_table = table.order(ascending=False)
sorted_table

# The following brings me back to the original ordering
sorted_table = table.order(ascending=False)
sorted_table2 = sorted_table.sortlevel(0)
sorted_table2 
```

按索引然后值对数据透视表进行排序的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T18:43:27.950

这是一个可以做你想做的解决方案：

```
key1 = table.index.labels[0]
key2 = table.rank(ascending=False)

# sort by key1, then key2
sorter = np.lexsort((key2, key1))

sorted_table = table.take(sorter) 
```

结果将如下所示：

```
In [22]: table
Out[22]: 
A    B    
bar  one      0.698202
     three    0.801326
     two     -0.205257
foo  one     -0.963747
     three    0.120621
     two      0.189623
Name: C

In [23]: table.take(sorter)
Out[23]: 
A    B    
bar  three    0.801326
     one      0.698202
     two     -0.205257
foo  two      0.189623
     three    0.120621
     one     -0.963747
Name: C 
```

将其作为 API 方法构建到 pandas 中会很好。不知道它应该是什么样子。

# c - 当程序开始运行时，所有通用寄存器的值是多少？

> ID：10595335
> 
> 赞同：2
> 
> 时间：2012-05-15T06:34:53.830
> 
> 标签：c, assembly, operating-system, linux-kernel, x86

> **可能重复：**
> [程序启动时的默认寄存器状态是什么（asm，linux）？](https://stackoverflow.com/questions/9147455/what-is-default-register-state-when-program-launches-asm-linux)

我知道 %esp 和 %eip 应该由操作系统内核设置为正确的值，以便程序可以运行，但其他寄存器包括 %ebp、%eax、%ebx、%ecx、%edx、%esi、%edi。操作系统内核会在程序运行之前初始化它们吗？他们应该有什么价值观？

**当程序开始运行时 %esp 应该有什么值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:45:04.957

如果您询问 C 程序 - 您不知道，这不关您的事。

对于装配，我也不认为它们具有有意义的价值。
执行所需的信息`main`——参数计数、参数向量和环境指针——都在堆栈上。

[在这篇 Linux Gazette 文章](http://linuxgazette.net/issue84/hawk.html)中查看更多信息。

# performance - Oracle Cursor 输出需要很长时间

> ID：10595337
> 
> 赞同：0
> 
> 时间：2012-05-15T06:35:16.197
> 
> 标签：performance, oracle, plsql

我在存储过程中有问题。存储过程产生游标输出。产生输出的 SQL 查询在不到 1 秒内执行。但过程需要超过 10 分钟才能执行。存储过程没有任何其他查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:04:37.073

这种行为的一个常见原因是将返回第一（几）行的时间与所有行所需的时间混淆。如果您只是在大多数 sql 工具中发出选择，您会在第一行可用时立即获得它们。这并不意味着sql语句被完全处理。仅当您向下滚动到最后一行时，sql 处理才完成。

# infix-notation - 从中缀转换为后缀时，如何在单进制和二进制 +/- 之间指定

> ID：10595338
> 
> 赞同：1
> 
> 时间：2012-05-15T06:35:25.657
> 
> 标签：infix-notation, unary-operator, postfix-notation, binary-operators

在这个语法下：

```
^ + -  *  /  <  >  =  <= >=  and  or  not 
```

我正在使用一个函数（分流码算法）从中缀转换为后缀并且它有效！除了它不包括一元 - 意思是否定和一元 + 这并没有真正做任何事情。

一旦转换为 post fix，一元 + 将是 ap，一元 - 将是 m。例如：

```
3 + 3     ->     3 3 +
+3 + 3    ->     3 p 3 +
-(3-3)    ->     3 3 - m 
```

因此，如果我正在阅读中缀表达式，如何在一元和二进制加减之间指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:46:40.447

在我看来，以下规则将适用。

第一个`+`或`-`后面的非运算符是二元运算符。后续出现（或出现在表达式开头）是一元的。

因此，在您的（以及一些额外的）示例中：

```
3 + 3             --> 3 binary+ 3
+ 3 + 3           --> unary+ 3 binary+ 3
- ( 3 - 3)        --> unary- ( 3 binary- 3)
-9--4             --> unary- 9 binary- unary- 4 
```

# php - 在主服务器上删除图像时出现禁止错误，本地主机：它工作正常

> ID：10595348
> 
> 赞同：0
> 
> 时间：2012-05-15T06:36:34.537
> 
> 标签：php, html, .htaccess

我开发了一个网站。在 1 页上有一个图片库，图片上传完美，但一旦我删除图片，就会出现此错误：

* **Forbidden 您无权访问此服务器上的 /fdccms/backend/project_categories/view_image.php。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。*** 删除图像在 localhost 上运行良好，但我不知道服务器的问题。在 .htaccess 中，我还包括了 rewriterule：

```
RewriteRule ^view_image/([^/]*)/?(.*)$ http://fdc-int.com/fdccms/backend/project_categories/view_image.php?id=$1&del=$2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:25:38.587

检查您的文件夹权限。确保您对该文件夹具有读取、写入和执行权限。（那将是 777）

如果是你的`.htaccess`，试试这个：

```
RewriteRule ^view_image/([^/]*)/?(.*) /backend/project_categories/view_image.php?id=$1&del=$2 [L] 
```

因为你说 fdccms 是你的 webroot。

无论哪种方式，`$`都不需要，因为`.`匹配任何字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:27:10.643

我猜你的 rewriteRule 有问题。

可能**?(.*)**不能按预期工作。QUERY_STRING 应该自动添加，但有时不会发生。我不确定，如果它不起作用，是否有？在重写目标中。

所以试试这个：

```
RewriteRule ^view_image/([^/]*)/ /backend/project_categories/view_image.php?id=$1&del=%{QUERY_STRING} [L] 
```

# jquery - jQuery 移动输入字段错误样式

> ID：10595350
> 
> 赞同：3
> 
> 时间：2012-05-15T06:36:49.890
> 
> 标签：jquery, jquery-mobile

我正在为我正在开发的基于 HTML5 的移动网站上的几个表单页面使用 jQuery mobile。jQuery mobile 有一些开箱即用的良好表单样式，但是当字段包含错误时，我看不到太多突出显示。

我希望您可以用红色背景颜色突出显示错误的输入字段，并在字段上方弹出一个工具提示，通过一些额外的类和输入字段属性向用户解释什么是错误的。

没有自己实现所有这些，jQuery mobile 没有开箱即用的东西。谁能指出我在 jQuery 移动表单中显示错误的一些不错的样式库的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:39:12.747

您可以更改数据主题类。使用 jQuery Mobile Themeroller ( [http://jquerymobile.com/themeroller/index.php](http://jquerymobile.com/themeroller/index.php) ) 创建一个主题，将输入标记为错误。然后看这里：[Jquery mobile: Change theme on click](https://stackoverflow.com/questions/7972140/jquery-mobile-change-theme-on-click) 这个组合帮助我意识到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:55:53.740

默认情况下，如果您的模型中有 validates_presence_of :name

如果出现错误，您会在 JQM 中获得此 html。问题是标签和输入被具有类 field_with_errors 的 div 包装。这打破了 JQM 的布局

```
<fieldset data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
  <div class="field_with_errors">
    <label for="case_name" class="ui-input-text">Name</label>
  </div>
  <div class="field_with_errors">
    <input type="text" value="" size="30" name="case[name]" id="case_name" class="ui-input-text ui-body-d ui-corner-all ui-shadow-inset">
  </div>
</fieldset> 
```

有几个选项可以解决这个问题，[Rails 3：“field-with-errors”包装器改变了页面外观。如何避免这种情况？](https://stackoverflow.com/q/5267998/1416023)

我用这个答案为 JQM 重写了标签的默认包装和无效字段的输入，[https: //stackoverflow.com/a/8380400/1416023](https://stackoverflow.com/a/8380400/1416023)

在 config/initializers 中创建了文件 error_output.rb，内容如下

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  class_attr_index = html_tag.index 'class="'
  if class_attr_index
    html_tag.insert class_attr_index+7, 'field_with_errors '
  else
    html_tag.insert html_tag.index('>'), ' class="field_with_errors"'
  end
end 
```

将以下 css 添加到我的 app/assets 中的 application.css

```
label.field_with_errors{
 color:#C45457;
} 
```

现在无效字段的标签为红色。

额外：我在 JQM 中输出验证错误，可通过部分布局/error_messages.html.haml 折叠

将其放入您的表单文件中。

```
=render "layouts/error_messages", entity: @case 
```

布局/error_messages.html.haml

```
- if entity.errors.any?
  %div{:data => {:role=>"collapsible", :collapsed=>"false", :theme=>"e", :'content-theme'=>"b"}}
    %h4
      = pluralize(entity.errors.count, "error")
      prohibited saving:
    - entity.errors.full_messages.each do |msg|
      %p= msg 
```

希望这可以帮助您在 JQM 中实现错误报告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:23:28.310

[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)为这种性质的事物提供了一些非常吸引人的样式。它形成了一些特定于表单的类、工具提示以及内置的警报功能。我建议您使用[自定义](http://twitter.github.com/bootstrap/download.html)功能仅使用您需要的框架部分。

我也偶然发现了[Formee](http://www.formee.org/)，但我仍然更喜欢 bootstrap。

# jquery - 链接到 JQuery 选项卡式内容中的锚点

> ID：10595351
> 
> 赞同：0
> 
> 时间：2012-05-15T06:36:54.303
> 
> 标签：jquery, hyperlink

[您可以在[此处]](http://www.canberra.edu.au/media/test/bookmark.html)找到我的示例 选项卡运行良好，但只需要额外的功能。

我`<a name="test"></a>`在“Stuff”选项卡中的标题“Anchor”旁边。

默认情况下，第一个选项卡被选中，但如果有人点击链接`<a href="#test">Go to anchor</a>`，那么我想将他们带到第三个选项卡并向下滚动到`<a name="test"></a>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:05:29.943

我所做的一些更改在锚标记中添加了 goto 属性，以便我们知道要移动到哪个选项卡。

`<a href="#test" goto="stuff">`

添加了以下代码以导航到`stuff`选项卡内的锚标记

```
$('html, body').animate({
   scrollTop: x // where a tag is 
}); 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/TGMDd/2/)**

### 更新：[演示如何工作](http://jsfiddle.net/dhirajbodicherla/TGMDd/2/)

在演示中有 3 个选项卡和内容。在第一个选项卡内容中是指向选项卡“东西”的链接。如果您单击此链接，选项卡会发生变化，并且将显示选项卡“Stuff”的内容。更改选项卡的链接如下所示`<a href="#test" goto="stuff">switch to Tab Stuff</a>` 。goto 的值必须与 tab 的 hash tag 的值相同`<li><a href="#stuff">Stuff</a></li>`。下面的函数获取属性'goto'的值，将值放入`var whereTo`并执行点击选择器匹配`'a[href=#' + whereTo + ']'`

```
$('a').not('.tabs li a').on('click', function(evt) {
    evt.preventDefault();
    var whereTo = $(this).attr('goto');
    $tabs = $("ul.tabs li");
    $tabs.find('a[href=#' + whereTo + ']').trigger('click');
    // code shortened to keep explanation simple
} 
```

希望这可以帮助

# zend-framework - 如何将 Zend Framework 网站转换为移动网站？

> ID：10595352
> 
> 赞同：3
> 
> 时间：2012-05-15T06:36:56.710
> 
> 标签：zend-framework, mobile-website

我在 Zend Framework 中创建了一个巨大的网站（前端和管理端），现在我想在 ZF 中做同样的项目，但用于移动设备。

我肯定会使用 HTML5 和 jQuery 移动版，但在继续并开始我的移动网站开发之前，我想问专家什么是好的、简单、高效和优化的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:54:07.353

您可能需要[查看 ContextSwitch View Helper](https://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch) - 它允许您根据“格式”参数切换视图脚本。您可以使用它（或扩展它）将视图切换到更适合移动设备的模板。

具体看一下[JSON Context](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.json)，它禁用了布局——如果检测到移动请求，可以使用相同的技术来切换布局。

当然，如果你可以通过一些 CSS 媒体查询来完成你需要的事情，那肯定是要走的路。

您可能还会发现[`Zend_Http_UserAgent`](http://framework.zend.com/manual/1.12/en/zend.http.user-agent.html)检测移动设备的可用功能很有用。同样，类似于媒体查询的可能性，但仍然可能有用。

但底线是不需要“转换”网站，有很多工具可以让桌面和移动用户都可以访问同一个网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:01:50.730

[点击](http://www.web-punk.com/2010/03/zend-framework-applications-for-iphone-blackberry-co/) 我，阅读我，我相信你会喜欢我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T11:22:18.943

正如 Fawad Ghafoor 的回答者一样从互联网上消失了（仍然可以在网络档案中找到[https://web.archive.org/web/20110225213957/http://www.web-punk.com/2010/03/zend-框架-应用程序-for-iphone-blackberry-co/](https://web.archive.org/web/20110225213957/http://www.web-punk.com/2010/03/zend-framework-applications-for-iphone-blackberry-co/)）

我不知道这样行不行，但我会在这里复制并格式化网站的内容。

**适用于 iPhone、BlackBerry 和 Co 的 Zend Framework 应用程序**

在过去的几年里，移动设备变得非常重要。本教程将向您展示如何修改您的网站并使其为 iPhone、BlackBerry 等移动设备做好准备。

在我们开始之前：与本博客的所有其他帖子一样，我希望您是一名软件工程师，并使用 MVC（模型/视图/控制器）模式实现您的 Web 应用程序，并且可能还使用 Zend_Layout。

**1\. 我们需要什么**

基本上，在为移动设备准备好 Web 应用程序时，您唯一需要做的就是 a) 检测用户是使用移动设备还是非移动设备浏览您的网站，以及 b) 根据结果更改 MVC 中的 V一）。

但是，我发现稍微扩展这种方法非常有用。除了用移动设备的视图替换视图之外，我们还将做两件事：我们还将替换用于 Web 应用程序的布局 (Zend_Layout)，我们将使用不同的翻译文件 (Zend_Translation)。很明显为什么替换布局很有用，但为什么我们需要使用不同的翻译文件呢？好吧，实际上我们不必这样做，但我发现如果你有大屏幕的翻译文件（你可能想要使用 looong 文本描述）和移动设备的翻译文件（有清晰的描述，错误消息、标签等）

正如我们稍后将看到的，Zend 框架的上下文切换（[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html)）是（几乎）我们所需要的…… ContextSwitch 是一个动作助手，它“旨在促进根据请求返回不同的响应格式”。这个动作助手带有两种不同的即用型上下文：JSON 和 XML。对于我们的示例，我们将创建一个名为“mobile”的附加上下文。

控制流模式丢失了......在某些时候它在这里：[http ://www.web-punk.com/wp-content/uploads/2010/03/mobile_wf-300x94.png](http://www.web-punk.com/wp-content/uploads/2010/03/mobile_wf-300x94.png)

基本上，我们的控制流必须按照图“控制流”中的描述工作（点击图放大）。如果用户浏览[http://mobile.example.com/controller/action](http://mobile.example.com/controller/action)，我们直接设置正确的上下文“mobile”。如果用户浏览[http://www.example.com/controller/action](http://www.example.com/controller/action)，我们会检查他是否使用移动设备。如果他使用的是移动设备，我们会询问用户他是想使用我们的网络应用程序的移动版还是桌面版。由于我们不想在用户每次请求页面时询问他是否要使用移动版本，我们会将她/他的决定存储在会话变量中（并且只会再次询问她，如果她不活动几分钟）。

作为此工作流程的示例，请查看[http://www.qulpa.com](http://www.qulpa.com)

**2\. 创建我们的移动插件** 为了实现我们的目标，我们将实现一个小插件。在实现这个插件之前，我们需要一个函数来检查当前用户是否在使用移动设备。您可以使用 WURFL 之类的智能解决方案来执行此操作。但是，对于我们的示例，我们将使用一个简单的函数，如果用户正在使用移动设备，则返回 true，否则返回 false。如果你用谷歌搜索它，你会发现几十个可以完成这项工作的函数。我将使用我在 Brain Handles 找到的一个函数。

现在，让我们创建我们的插件。在您的 \plugins 文件夹中，创建一个名为 Mobile.php 的文件，然后复制并粘贴以下源代码：

```
<?php
class Plugin_Mobile extends Zend_Controller_Plugin_Abstract
{
    // instead of defining all these parameters here,
    // you could also put them into your application.ini

    // if user is inactive for X minutes and surfs to
    // www.example.com, we'll ask him again if he wants
    // to user mobile or desktop version
    private $ask_again_after_x_minutes = 10;

    // used to test your mobile layout. Set this
    // to 1 to emulate a mobile device
    private $test_mobile = 0;

   public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
    {
        // did we already ask the user?
        if (isset($_SESSION['mobileasked'])) {
            // is mobile session still valid?
            if (time() < $_SESSION['mobileasked']) {
                // update session
                $_SESSION['mobileasked'] = time() + $this->ask_again_after_x_minutes * 60;
                // continue with requested page
                return $request;
            }
        }

        // otherwise, check if user is using a mobile device
        // or if we are in test mode.
        if ($this->checkmobile() || ($this->test_mobile == 1)) {
            // if requested page != MOBILE.example.com
            if (!(Zend_Registry::isRegistered('directmobile') && Zend_Registry::get('directmobile') == '1')) {
                // set mobile session
                $_SESSION['mobileasked'] = time() + $this->ask_again_after_x_minutes * 60;
                // ask user if he wants to use mobile or desktop version
                $request->setControllerName('index')
                        ->setActionName('askmobile')
                        ->setParam('format', 'mobile')
                        ->setParams($request->getParams())
                        ->setDispatched(false);
            }
        }
        return $request;
    }

/**
  * This function returns true if user is using a mobile device. False otherwise.
  * (c) by http://www.brainhandles.com/techno-thoughts/detecting-mobile-browsers
  */

private function checkmobile(){
   if(isset($_SERVER["HTTP_X_WAP_PROFILE"])) return true;
   if(preg_match("/wap\.|\.wap/i",$_SERVER["HTTP_ACCEPT"])) return true;
   if(isset($_SERVER["HTTP_USER_AGENT"])){
      // Quick Array to kill out matches in the user agent
      // that might cause false positives
      $badmatches = array("OfficeLiveConnector","MSIE\  8\.0","OptimizedIE8","MSN\ Optimized","Creative\ AutoUpdate","Swapper");

      foreach($badmatches as $badstring){
        if(preg_match("/".$badstring."/i",$_SERVER["HTTP_USER_AGENT"])) return  false;
      }

      // Now we'll go for positive matches
      $uamatches = array("midp", "j2me", "avantg", "docomo", "novarra",  "palmos", "palmsource", "240x320", "opwv", "chtml", "pda", "windows\  ce", "mmp\/", "blackberry", "mib\/", "symbian", "wireless", "nokia",  "hand", "mobi", "phone", "cdm", "up\.b", "audio", "SIE\-", "SEC\-",  "samsung", "HTC", "mot\-", "mitsu", "sagem", "sony", "alcatel", "lg",  "erics", "vx", "NEC", "philips", "mmm", "xx", "panasonic", "sharp",  "wap", "sch", "rover", "pocket", "benq", "java", "pt", "pg", "vox",  "amoi", "bird", "compal", "kg", "voda", "sany", "kdd", "dbt", "sendo",  "sgh", "gradi", "jb", "\d\d\di", "moto","webos");

      foreach($uamatches as $uastring){
        if(preg_match("/".$uastring."/i",$_SERVER["HTTP_USER_AGENT"])) return  true;
      }
   }
   return false;
} 
```

确保你注册了这个插件！为此，您需要在引导程序中执行以下操作：

```
// init PluginLoader. Adopt folder to your application...
$loader = new Zend_Loader_PluginLoader(array(
    'Plugin' => APPLICATION_PATH . '/application/controllers/plugins',
));

// define plugin names and classes
$pluginList = array(
    'plugin1' => $loader->load('Plugin1'),
    'plugin2' => $loader->load('Plugin2'),
//  [...]
    'mobile'      => $loader->load('Mobile'),
);

// get your front controller
$frontController = Zend_Controller_Front::getInstance();

// Register your plugins
foreach ($pluginList as $pluginClass) {
    $frontController->registerPlugin(new $pluginClass());
} 
```

**3.上下文检测**

这就是您在移动插件中所要做的一切。接下来我们要做的是确保我们检测到正确的上下文。我们将在我们的引导程序中执行此操作。打开你的 bootstrap.php 并在里面放这样的东西：

```
// set correct context
$domains = explode('.', $_SERVER['HTTP_HOST']);
if ($domains[0] == 'mobile' || $frontController->getParam('format') == 'mobile') {
    if ($domains[0] == 'mobile') {
        // if set, user will be redirected directly to requested page
        Zend_Registry::set('directmobile', '1');
    }
    Zend_Registry::set('context', '\mobile');
} else {
    Zend_Registry::set('context', '');
} 
```

**4.询问用户**

由于我们想询问用户是否想使用我们应用程序的移动版或桌面版，我们将在索引控制器中创建一个简单的操作。我们将在我们的移动插件中将用户重定向到这个控制器/动作（见第 2 章）。

打开您的 IndexController.php 并创建一个 askmobileAction：

```
public function askmobileAction()
{
    // nothing to do here...
} 
```

这个动作基本上是……好吧，没什么;-)。现在，让我们看一下 askmobile 视图。在您的视图文件夹中，可能是 \views\scripts\index，创建一个名为 askmobile.mobile.view 的文件，并在其中放入如下内容：

```
How do you want to use this application?<br/>
<a href="<?= 'http://mobile.fopp.de' . $_SERVER["REQUEST_URI"]?>">MOBILE VERSION</a>
<br></br>
<a href="<?= 'http://dev.fopp.de' . $_SERVER["REQUEST_URI"] ?>">DESKTOP VERSION</a> 
```

这并不复杂，不是吗？如您所见，此视图的名称与所有其他视图的名称不同。正如我们将在本教程后面看到的那样，如果我们在上下文 MOBILE 中，ContextSwitch 将确保调用视图 name.MOBILE.phtlm 而不是 name.phtml。

**5.您的移动布局**

下一步是为我们的移动版本创建一个独特的布局。这是否必要取决于您的应用程序。但是，在大多数情况下，对应用程序的桌面版本进行复杂布局和对移动版本进行轻量级布局是有意义的。首先，在您的\layouts 文件夹中创建一个名为\mobile 的目录（完整路径可能类似于\application\layouts\mobile，但这取决于您的应用程序）。在此文件夹中创建一个名为 layout.phtml 的文件，并在其中放入以下内容：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>        
 <?php echo $this->headTitle() . "\n" ?>
 <?php echo $this->headLink() . "\n" ?>
</head>
<body>
 <div id="header">This is your header</div>    
 <div id="content"><?= $this->layout()->content ?></div>
 <div id="footer">This is your footer</div>
</body>
</html> 
```

这是我们非常简单的移动环境布局。即使您为移动设备创建布局，您的布局也很可能会更加复杂，因为您可能会包含 CSS 文件等。

**6\. 把所有东西放在一起**

我们已经快完成了。最后一步是在控制器中使用上下文。在本教程中，我们将使用 IndexController 的 init() 方法，您可以将其用作应用程序中所有其他控制器的模板。实际上，与其将这段代码复制到所有控制器，我更喜欢一种更智能的方式，它利用 OO 设计范例（例如，创建一个扩展 Zend_Controller_Action 并从 application.ini 获取所有必要参数的 MyMobileController 类），但是，这将完成本教程的工作。

打开您的 IndexController.php 文件并将以下源代码复制并粘贴到其中： /** * 初始化控制器和上下文 * * @return void */ public function init() { parent::init();

```
 // are we in the mobile context?
   if (Zend_Registry::get('context') == '\mobile' || $this->getRequest()->getParam('format') == 'mobile')
   {
        // Mobile format context
        $mobileConfig =
            array(
             'mobile' => array(
                    'suffix'  => 'mobile',
                    'headers' => array(
                        'Content-type' => 'text/html; charset=utf-8')),
            );

        // Init the action helper
        $contextSwitch = $this->_helper->contextSwitch();

        // Add new context
     $contextSwitch->setContexts($mobileConfig);

        // This is where you have to define
        // which actions are available in the mobile context
        // ADOPT THIS TO YOUR NEEDS!
        $contextSwitch->addActionContext('index', 'mobile');
        $contextSwitch->addActionContext('askmobile', 'mobile');

        // enable layout but set different path to layout file
        $contextSwitch->setAutoDisableLayout(false);
        $this->getHelper('layout')->setLayoutPath(APPLICATION_PATH . '/application/layouts/mobile');

        // Initializes action helper
        $contextSwitch->initContext('mobile');
    }
} 
```

**7\. 创建您的移动视图**

最后，您必须创建移动视图。对于移动上下文中可用的每个视图（如控制器的 init() 方法中定义的那样），您必须创建一个移动视图。因此，如果您有一个名为 myaction 的操作，您将需要一个用于桌面版的 myaction.phtml 和一个用于移动版应用程序的 myaction.mobile.phtml。

恭喜！您刚刚创建了您的第一个移动 Web 应用程序；-)

**附录：移动设备的翻译文件**

正如第 1 章所承诺的，我们将为我们的移动设备/移动上下文使用不同的翻译文件。这非常方便，因为您可能想要更短的标签、描述文本、错误消息等。当然，如果你不需要这样的东西，你可以直接跳过这个附录。

基本上，您需要做的就是检查应用程序在哪个上下文中并加载相应的翻译文件。

假设您将翻译文件存储在 \application\translations\ 文件夹中，并且您的应用程序有英语和法语版本。除了你的 fr.php 和 en.php 文件，你应该在你的翻译文件夹中为每种语言提供一个移动版本：mobile_en.php 和 mobile_fr.php。以下代码片段将加载相应的翻译文件：

```
// Init Zend_Locale with corresponding language (assuming that $lang is set to 'en' or 'fr')
// and store the Zend_Locale object in the registry
Zend_Registry::set('Zend_Locale', new Zend_Locale($lang));

// Load translation file and store it in the registry
$langFile = APPLICATION_PATH . '/application/translations/';
if (Zend_Registry::get('context') == '\mobile') {
    // if context = mobile, get translation file for mobile device
    $langFile.= 'mobile_' . Zend_Registry::get('Zend_Locale')->getLanguage() . '.php';
} else {
    $langFile.= Zend_Registry::get('Zend_Locale')->getLanguage() . '.php';
}
Zend_Registry::set(
'Zend_Translate', new Zend_Translate('array', $langFile)
); 
```

# multithreading - pthread_cond_wait 没有 while 循环

> ID：10595363
> 
> 赞同：3
> 
> 时间：2012-05-15T06:37:32.347
> 
> 标签：multithreading, pthreads, mutex, condition-variable

```
global variable 'temp';

**threadA**   
    -pthread_mutex_lock-  
            if (temp == 'x')  
                    -pthread_cond_wait-
                    do this     
        -pthread_mutex_unlock-      

**threadB**  
    -pthread_mutex_lock-  
            if (someCondition == true)            
                        temp = 'x'  
                -pthread_cond_signal-  
    -pthread_mutex_unlock- 
```

就我而言，我可能没有任何循环，我只有一个 if 条件。所以，我希望当 temp == 'x' 时，threadA 应该这样做/这个。

*   处理 ? 时循环是强制性的`pthread_cond_wait`吗？
*   如果我们不需要循环，另一种编写代码的方法是什么？
*   这是编写代码的正确方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T06:45:55.173

循环是强制性的，因为根据[http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_cond_wait.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_cond_wait.html)：

> 可能会发生来自 pthread_cond_timedwait() 或 pthread_cond_wait() 函数的虚假唤醒。由于 pthread_cond_timedwait() 或 pthread_cond_wait() 的返回并不意味着该谓词的任何值，因此应在此类返回时重新评估谓词。

# django - Django 自定义模型管理器数据库错误

> ID：10595372
> 
> 赞同：3
> 
> 时间：2012-05-15T06:38:10.263
> 
> 标签：django, django-models

我正在尝试构建自定义模型管理器，但遇到了错误。代码如下所示：

```
class LookupManager(models.Manager):
    def get_options(self, *args, **kwargs):
        return [(t.key, t.value) \
                for t in Lookup.objects.filter(group=args[0].upper())]

class Lookup(models.Model):
    group = models.CharField(max_length=1)
    key = models.CharField(max_length=1)
    value = models.CharField(max_length=128)
    objects = LookupManager() 
```

（我玩过`get_options`很多使用`super()`和其他过滤结果的方法）

当我运行时`syncdb`，我收到以下错误（`ops_lookup`对应的表）：

```
django.db.utils.DatabaseError: no such table: ops_lookup 
```

我注意到，如果我将管理器更改为返回`[]`而不是过滤器，那么就`syncdb`可以了。另外，如果我已经运行`syncdb`并且所有表都存在，那么将代码更改为上面的代码，它也可以正常工作。

如何让 Django`syncdb`在第一次运行时不期望该表存在？

**更新** 查看回溯后，我意识到发生了什么。查找表旨在包含填充其他表中某些列的选择的值。我认为会发生什么是在创建其他表时调用管理器，这似乎发生在创建查找表之前。

有没有办法强制 django 首先创建查找表（没有重命名它？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:08:18.290

发生的事情是您试图在模块加载期间访问数据库。例如：

```
class MyModel(models.Model):
    name = models.CharField(max_length=255)

class OtherModel(models.Model):
    some_field = models.CharField(
        max_length=255,
        # Next line fails on syncdb because the database table hasn't been created yet
        # but the model is being queried during module load time (during class definition)
        choices=[(o.pk, o.name) for o in MyModel.objects.all()]
    ) 
```

这等同于您正在做的事情，因为正如您所说，您正在使用 manager 方法（传递地）为其他模型生成选择。

用生成器表达式替换列表推导将返回一个可迭代的，但在第一次迭代之前不会评估过滤的查询集。因此，这将修复上面的示例：

```
choices=((o.pk, o.name) for o in MyModel.objects.all()) 
```

**使用您的示例，它将是：**

```
class LookupManager(models.Manager):
    def get_options(self, *args, **kwargs):
        return ((t.key, t.value) for t in Lookup.objects.filter(group=args[0].upper())) 
```

（注意使用`(`and`)`而不是`[`and `]`）（外部的） - 这是创建生成器表达式的语法。

# php - 如何使用 ImageMagick 获得总 pdf 页数？

> ID：10595373
> 
> 赞同：0
> 
> 时间：2012-05-15T06:38:12.060
> 
> 标签：php, imagemagick

我在脚本下面运行。问题是我怎样才能得到 pdf 中有多少页。

```
<?php  // read page 1  $im = new imagick( 'test.pdf[1]' );

// convert to jpg  $im->setImageColorspace(255);  $im->setCompression(Imagick::COMPRESSION_JPEG);  $im->setCompressionQuality(60);  $im->setImageFormat('jpeg'); 

//resize  $im->resizeImage(290, 375, imagick::FILTER_LANCZOS, 1);  

//write image on server  $im->writeImage('thumb1.jpg');  $im->clear(); $im->destroy();  ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:08:03.787

您可以使用该方法`getnumberimages()`获取PDF的页数。

```
$Image = new Imagick($pathdir.'Padrões de Projeto.pdf');
$num_page = $Image->getnumberimages(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:43:17.513

您可以使用[Imagick::identifyImage](http://php.net/manual/en/imagick.identifyimage.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T02:59:11.663

## 我的即时通讯版本：

> ImageMagick 6.7.2-7 2016-06-16 Q16

获取pdf页数的方法：

1.  `$im = new imagick( 'test.pdf' ); $page_count = count($im);`
2.  `$im = new imagick( 'test.pdf' ); $page_count = $im->getNumberImages();`

如果你想一次写入图像，你可以这样做：

```
$im->writeImages("thumb.jpg", false); 
```

# php - 如何知道代理在 curl/php 中工作

> ID：10595377
> 
> 赞同：0
> 
> 时间：2012-05-15T06:38:24.220
> 
> 标签：php, curl, proxy

如何知道代理是否在 curlphp 中工作

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_TIMEOUT, 0);
        curl_setopt($ch, CURLOPT_PROXYPORT,8080);
    curl_setopt($ch, CURLOPT_PROXYTYPE, 'HTTP');
    curl_setopt($ch, CURLOPT_PROXY,'218.213.90.92');
        $head = curl_exec($ch);
        curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:38:18.803

你可以设置你`$url`的`"https://soulogic.com/ip/"`

如果 return `::ffff:218.213.90.92`，则表示代理正在工作。

或者在您的服务器端，编写一个 PHP 文件：

```
<?php
echo $_SERVER["REMOTE_ADDR"]; 
```

# gmail - 即使在使用脚本删除文件后，Gmail 计量器（Google 应用程序脚本）也会发送错误通知

> ID：10595379
> 
> 赞同：1
> 
> 时间：2012-05-15T06:38:28.953
> 
> 标签：gmail, google-apps-script, google-sheets

我已经在 Google Documents 中安装了 Gmail Meter 脚本并启动了它。它需要许多权限和对许多 google 帐户元素的访问权限。脚本运行得很慢，同时我决定收回这些权限，因为它们太宽了。一小时后，我收到有关错误的邮件通知，没有权限脚本无法运行。我试图关闭这个工作脚本，但没有找到方法，所以我（永久）删除了我安装脚本的文件。从那时起，我每天都会收到 3 个错误通知。我可以关闭它们（邮件中有链接）但我对终止脚本更感兴趣？我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:16:42.277

实际上，一旦将电子表格移至垃圾箱，就应该终止触发器。这是一个已知问题： [问题 143：删除电子表格时不应再触发具有时间触发脚本的电子表格](http://code.google.com/p/google-apps-script-issues/issues/detail?id=143)

您可以对此问题加注星标并通过电子邮件中的链接关闭触发器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:40:16.243

You can access all your script projects by opening [the script editor](https://docs.google.com/macros/) and selecting **Resources > All your triggers**. Find the triggers you want to delete and click the 'x' icon next to them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:22:54.370

您应该删除触发器...

# javascript - 使用 JSON.parse reviver 混淆字段

> ID：10595386
> 
> 赞同：4
> 
> 时间：2012-05-15T06:39:16.090
> 
> 标签：javascript, json, debugging, reviver-function

我正在尝试使用 JSON.parse 滥用 reviver 函数。

我基本上想让某些字段为“null”。

如果我这样做：

```
var json_data = JSON.parse(j, function(key, value) {
  if (key == "name") {        
    return value;
  } else {
    return null;    
  }    
}); 
```

整个 json_data 对象最终为空。事实上，不管我做什么，它定义了 json_object 的值。

有趣的是，这按预期工作：

```
var json_data = JSON.parse(j, function(key, value) {
  if (key == "name") {        
    return "name";
  } else {
    return value;    
  }    
}); 
```

属性“name”现在的值为“name”。

有问题的JSON：

```
var j = '{"uuid":"62cfb2ec-9e43-11e1-abf2-70cd60fffe0e","count":1,"name":"Marvin","date":"2012-05-13T14:06:45+10:00"}'; 
```

**更新**

我刚刚意识到与我想做的相反的事情也有效，所以我可以取消 name 字段：

```
var json_data = JSON.parse(j, function(key, value) {
  if (key == "name") {        
    return null;
  } else {
    return value;    
  }    
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:51:49.257

它有一个相当有趣的行为，即整个对象都包含在传递给 reviver 的对象中。

传递整个对象时，键为空。

[http://jsfiddle.net/sGYGM/7/](http://jsfiddle.net/sGYGM/7/)

```
var j = '{"uuid":"62cfb2ec-9e43-11e1-abf2-70cd60fffe0e","count":1,"name":"Marvin","date":"2012-05-13T14:06:45+10:00"}';

var json_data = JSON.parse(j, function(k, v) {
    if (k === "" || k == "name") {
        return v;
    } else {
        return null;
    }
});

console.log(json_data); 
```

根据[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)

> 最终使用空字符串和最高值调用 reviver 以允许转换最高值。一定要正确处理这种情况，通常通过返回提供的值，否则 JSON.parse 将返回 undefined。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T06:52:44.670

通过一些实验，看起来最终调用了一个函数，其中键是空字符串，值是顶级对象：

```
> JSON.parse('{"hello": "world"}', function(k, v) { console.log(arguments); return v; })
["hello", "world"]
["", Object] 
```

所以你可以使用：

```
var json_data = JSON.parse(j, function(key, value) {
  if (key == "name" || key === "") {        
    return value;
  } else {
    return null;    
  }    
}); 
```

现在，由于`""`确实似乎是一个有效的 JSON 密钥，因此要 100% 正确，最好使用以下内容：

```
var json_data;
JSON.parse(j, function(key, value) {
  if (key == "name") {        
    return value;
  } else if (key === "") {
    json_data = value;
    return null;
  } else {
    return null;    
  }    
}); 
```

但这可能有点偏执；）

# c - ARM ABI 希望使用 GCC 在寄存器中返回结果

> ID：10595387
> 
> 赞同：0
> 
> 时间：2012-05-15T06:39:19.640
> 
> 标签：c, gcc, assembly, arm

类似于这里的问题： [Returning structs in registers - ARM ABI in GCC](https://stackoverflow.com/questions/2901488/returning-structs-in-registers-arm-abi-in-gcc)

我希望我可以告诉 GCC 结果是已注册的（不要理会它们）并且保持堆栈不变，但它只是“大部分”有效，我怀疑这只是运气。

编译时，我留下了未定义的引用 __aeabi_uldivmod()，我正在尝试对其进行补充。谷歌有一个不错的 _uldivmod.S，但我正在寻找一个 C 解决方案。

目前，我正在尝试类似：

```
res = __udivdi3(u, v);
mod = __umoddi3(u, v);
{
register uint32_t r0 asm("r0") = (res&0xFFFFFFFF);
register uint32_t r1 asm("r1") = (res>>32);
register uint32_t r2 asm("r2") = (mod&0xFFFFFFFF);
register uint32_t r3 asm("r3") = (mod>>32);

printk("r0 %08X : %08X : %08X : %08X\n",r0, r1, r2, r3);

asm volatile(""
             : "=r"(r0), "=r"(r1), "=r"(r2),"=r"(r3)  // output             
             : "r"(r0), "r"(r1), "r"(r2), "r"(r3));   // input              
return r0;
}

kernel: [ 3457.959207] r0 00000000 : 00000000 : 00000000 : 70000000
udivdi3: 7000000000000000/7000000080000000 != 000000000000003f rem dfffffe080000000 
```

__udvi3() 和 __umoddi3() 是标准的 C 函数。

我不仅返回了一些东西（堆栈），而且并不总是单独留下 r1-r3，因为我认为 ASM 语句的“输出字段”只影响 ASM 语句本身，而不影响我的 __aeabi_uldivmod 的函数声明。

海合会 4.4.3

不能做吗？

# c# - 在 ASP.net C# 中查询 Google GData Blogger API 以查找下一篇博客

> ID：10595388
> 
> 赞同：0
> 
> 时间：2012-05-15T06:39:20.717
> 
> 标签：c#, asp.net, gdata, blogger

目前，我正在向一个 ASP.net C# 应用程序添加“上一个博客”和“下一个博客”链接，该应用程序从 blogspot 上托管的客户博客提供其博客。一旦我抓取了一个特定的博客，我就想立即获取它的上一个博客和下一个博客。获取以前的博客并不难。

```
// THIS IS MY CALL TO GET THE PREVIOUS BLOG    
FeedQuery prevQuery = new FeedQuery();
prevQuery.Uri = new Uri(String.Format("{0}", blogCred.feedUri));
    // {0} This is automatically retrieved from the database [ https://www.blogger.com/feeds/XXXXXXXXXXXXXXXXXX/posts/default/ ]
prevQuery.MaxPublication = entry.Published.AddSeconds(-1);
prevQuery.NumberToRetrieve = 1;
AtomFeed prevFeed = googleService.Query(prevQuery);
AtomEntry prevEntry = prevFeed.Entries.FirstOrDefault();
prevBlog(prevEntry); 
```

这让我得到了我想要的结果。问题是获取下一个博客。

```
// THIS IS MY CALL TO GET THE NEXT BLOG   
FeedQuery nextQuery = new FeedQuery();
nextQuery.Uri = new Uri(String.Format("{0}", blogCred.feedUri)); 
    // {0} This is automatically retrieved from the database [ https://www.blogger.com/feeds/XXXXXXXXXXXXXXXXXX/posts/default/ ]
nextQuery.MinPublication = entry.Published.AddSeconds(1);
nextQuery.NumberToRetrieve = 1;
AtomFeed nextFeed = googleService.Query(nextQuery);
AtomEntry nextEntry = nextFeed.Entries.FirstOrDefault();
nextBlog(nextEntry); 
```

我遇到的问题是我无法让 Blogger 按降序排列这些帖子。它不断按升序对它们进行排序，并抓取最新发布的博客，而不是下一篇文章。我不想抓取包含所有博客文章的 FULL xml 文件并抓取最后一项。我想以与此 LINQ to SQL 调用类似的方式获取最后一项：

```
var query = from f in nextEntry
            where f.date > desiredDate
            orderby date descending
            select f; 
```

如果有人有任何想法或我遗漏的任何东西 - 希望像从谷歌回复中吐出的条目中的某处获取“下一篇文章”链接一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T12:39:10.087

Kiquenet，我无法发布完整的解决方案，但我可以发布实现此目的所需的代码片段。

```
FeedQuery nextQuery = new FeedQuery();
nextQuery.Uri = new Uri(String.Format("{0}", blogCred.feedUri));
DateTime dateToFind = entry.Published.AddSeconds(1);
int numberOfDates = (int)(DateTime.Now - dateToFind).TotalDays;
nextQuery.MinPublication = dateToFind;
nextQuery.NumberToRetrieve = 1;
AtomFeed nextFeed = null;
AtomEntry nextEntry = null;
for (int i = 0; i < numberOfDates; )
{
    nextQuery.MaxPublication = dateToFind.AddDays(i);
    nextFeed = googleService.Query(nextQuery);
    if (nextFeed.TotalResults >= 1)
    {
        nextEntry = nextFeed.Entries.FirstOrDefault();
        break;
    }
    i = i + 10;
} 
```

因此，这对您而言，它会查看您刚刚抓取的最后一个帖子 10 天后是否有任何帖子。如果在该时间段内没有任何帖子，请再增加 10 天。它将继续以 10 为增量进行搜索，直到到达今天的日期。dateToFind 和 Now 之间的日期数。

希望这可以帮助您。这是我目前 - 并且一直在 - 使用的。

# php - 为什么我需要使用 Kohana 表单辅助函数？

> ID：10595390
> 
> 赞同：0
> 
> 时间：2012-05-15T06:39:37.580
> 
> 标签：php, kohana, kohana-3

我在我正在从事的项目中使用 Kohana 3.2。我是这个框架的新手。在搜索验证文档时，我发现了这个页面：

[http://kohanaframework.org/3.1/guide/kohana/security/validation](http://kohanaframework.org/3.1/guide/kohana/security/validation)

在该页面中，他们使用内置的辅助函数来生成表单。我按照该教程进行操作，但我惊讶地发现，即使在使用表单辅助函数之后，我也必须遍历错误数组并一一显示错误。这与 Yii 非常不同，它会在表单字段旁边自动显示错误消息，并且还智能地应用基本的 javascript 验证。

因此我的问题是在 Kohana 框架中使用表单辅助函数有什么意义？还是我错过了其他一些目的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:46:00.923

它是完全可选的，它们只是为了“简化”表单元素的创建，这样您就不必手动转义每个属性 HTML 字符等。您可以添加一个函数来显示错误，`echo Form::errors($errors, 'field_name')`如果您愿意。

您将了解到 Kohana 本身并没有做任何“神奇”的事情，这完全取决于开发人员来决定。IMO 这是一种力量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:45:19.020

Kohana 3.2 具有表单助手的唯一原因是因为它们在以前并且被保留以保持兼容。实际上，建议您不要使用表单助手，因为不需要它。

您可以随时登录 IRC #Kohana 并询问开发人员。大多数人会同意。

# javascript - jQuery 在大量文本中查找/替换

> ID：10595392
> 
> 赞同：0
> 
> 时间：2012-05-15T06:39:45.927
> 
> 标签：javascript, jquery, regex, replace, find

我正在使用 jQuery，我需要为从文本文件“example.txt”中提取的文本创建一个查找/替换表单。

首先，这里是 HTML：

```
<div id="outbox" class="outbox">
<h3>Output</h3>
<div id="output"></div>
</div>
<div class="content">
<h3>Text File Location</h3>
<br />
<form id="prac" action="prac9.html">
    <input id="locator" type="text" value="example.txt" /> <br />
    <input id="btnlocate" value="Load" type="button" />
</form>
<br />
<h3>String Search</h3>
<form id="prac2" action="prac9.html">
    <div id='input'><input type='text' id='fancy-input'/> ...Start Typing</div> <br />

</form>
<br />
<h3>Find / Replace String</h3>
<form id="prac3" action="prac9.html">
    <input id="findtxt" type="text" value="" /> Find <br />
    <input id="replacetxt" type="text" value="" /> Replace<br />
    <input id="btnreplace" value="Find & Replace" type="button" />
</form>
</div> 
```

这是 jQuery/JS：

```
<script type="text/javascript">

$('#btnlocate').click(function () {

    $.get($('#locator').val(), function (data) {
        var lines = data.split("\n");
        $.each(lines, function (n, elem) {
            $('#output').append('<div>' + elem + '</div>');
            // text loaded and printed
        });
    });
});

/* SEARCH FUNCTION */

$(function () {       

    $('#fancy-input').keyup(function () {
        var regex;
        $('#output').highlightRegex();
        try { regex = new RegExp($(this).val(), 'ig') }
        catch (e) { $('#fancy-input').addClass('error') }

        if (typeof regex !== 'undefined') {
            $(this).removeClass('error');
            if ($(this).val() != '')
                $('#output').highlightRegex(regex);
        }
    })
});

 /* SEARCH FUNCTION FOR FIND REPLACE */
 $(function () {
    $('#findtxt').keyup(function () {
        var regex;
        $('#output').highlightRegex();
        try { regex = new RegExp($(this).val(), 'ig') }
        catch (e) { $('#findtxt').addClass('error') }

        if (typeof regex !== 'undefined') {
            $(this).removeClass('error');
            if ($(this).val() != '')
                $('#output').highlightRegex(regex);
        }
        })
    });

 /* regexp escaping function */

  RegExp.escape = function (str) {
      return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
  };

    $('#btnreplace').click(function () {
        var needle = $('#findtxt').val();
        var newneedle = $('#replacetxt').val();
        var haystack = $('#output').text();
      //  var regex = new RegExp(needle, "g");
        haystack = haystack.replace(new RegExp(RegExp.escape(needle), "g"), newneedle);
        console.log(haystack);
    }); 
```

您可能已经注意到，如果相关的话，我使用了一个插件“jQuery Highlight Regex Plugin v0.1.1”。

[http://pastebin.com/HmqWmKsy](http://pastebin.com/HmqWmKsy)是“example.txt”，如果这也相关的话。

我所需要的只是一种简单的查找/替换方法，但网络上的所有东西还没有帮助我。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T06:49:42.767

你在正确的轨道上使用`replace`和正则表达式。您想添加“全局”标志 ( `g`)，并且您必须通过创建表达式，`new RegExp(string)`因为 your`needle`是一个字符串。例如：

```
haystack = haystack.replace(new RegExp(needle, "g"), newNeedle); // BUT SEE BELOW 
```

以上*几乎*可以工作，除了如果`needle`在正则表达式中有任何特殊字符（`*`，，`[]`等），显然`new RegExp`会尝试解释它们。不幸的是，`RegExp`没有标准方法来转义字符串中的所有正则表达式字符，但您可以添加它：

```
RegExp.escape = function(str) {
  return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
}; 
```

（这来自[Prototype](http://prototypejs.org)，但我们可以只复制它而不是实际使用整个库，它是 MIT 许可的。一定要在你的源代码中注明属性。或者从其他地方使用[这个版本](http://simonwillison.net/2006/Jan/20/escape/#p-6)。）

所以我们最终得到：

```
haystack = haystack.replace(new RegExp(RegExp.escape(needle), "g"), newNeedle); 
```

* * *

这是一个完整的工作示例：[Live copy](http://jsbin.com/ugetas) | [来源](http://jsbin.com/ugetas/edit)

HTML：

```
<div>
  <label>Haystack:
    <br><textarea id="theHaystack" rows="5" cols="50">Haystack with test*value more than once test*value</textarea>
  </label>
</div>
<div>
  <label>Needle:
    <br><input type="text" id="theNeedle" value="test*value">
  </label>
</div>
<div>
  <label>New Needle:
    <br><input type="text" id="theNewNeedle" value="NEW TEXT">
  </label>
</div>
<div>
  <label>New haystack:
    <br><textarea readonly id="theNewHaystack" rows="5" cols="50"></textarea>
  </label>
</div>
<div>
  <button id="theButton">Replace</button>
</div> 
```

JavaScript：

```
RegExp.escape = function(str) {
  return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
};
jQuery(function($) {

  $("#theButton").click(function() {
    var haystack = $("#theHaystack").val(),
        needle   = $("#theNeedle").val(),
        newNeedle = $("#theNewNeedle").val(),
        newHaystack;

    if (!haystack || !needle) {
      display("Please fill in both haystack and needle");
      return;
    }

    newHaystack = haystack.replace(
      new RegExp(RegExp.escape(needle), "g"),
      newNeedle);
    $("#theNewHaystack").val(newHaystack);
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

# c# - 如何在网络技术上将倒计时计时器设为特定日期和时间

> ID：10595394
> 
> 赞同：2
> 
> 时间：2012-05-15T06:39:49.367
> 
> 标签：c#, javascript, jquery, asp.net, css

![在此处输入图像描述](../Images/7f272fe473eb67e6bc5517cee5de737d.png)

如何将计时器倒计时设置为特定日期和时间，例如日期为 6 月 1 日 00:00:00 代码必须显示该特定日期或时间的剩余时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:42:13.967

你可以使用[jQuery 倒计时插件](http://keith-wood.name/countdown.html "jQuery 倒计时插件")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:54:11.423

或者这里是一个非常好的免费正在建设中的模板，带有倒数计时器

[http://demo.ourtuts.com/site-under-construction/](http://demo.ourtuts.com/site-under-construction/)

在演示中，倒数计时器设置如下（从源代码中获取）

```
$(function () {
var austDay = new Date("December 10, 2012 02:15:00");
    $('#defaultCountdown').countdown({until: austDay, layout: '{dn} {dl}, {hn} {hl}, {mn} {ml}, and {sn} {sl}'});
    $('#year').text(austDay.getFullYear());
    }); 
```

您可以更改日期字符串

```
var austDay = new Date("December 10, 2012 02:15:00"); 
```

根据您的需要，您也可以根据需要更改设计。

下载链接位于[http://www.ourtuts.com/free-site-under-construction-template/](http://www.ourtuts.com/free-site-under-construction-template/)

# c# - 在 C#.net 中更新设计器文件窗口窗体上的文本框值

> ID：10595395
> 
> 赞同：0
> 
> 时间：2012-05-15T06:39:52.637
> 
> 标签：c#, .net

我想以编程方式更新设计器文件默认值中的文本框值，帮助我如何在 C#.net 上的表单设计器文件中更新文本框值。

帮助我任何代码或教程！

谢谢！

# oop - 如何分离长数学算法的各个部分？

> ID：10595398
> 
> 赞同：0
> 
> 时间：2012-05-15T06:40:17.393
> 
> 标签：oop

我有几页代码。它非常难看，因为它正在做很多“计算”等。但它包含几个阶段，就像许多算法一样，就像这样：

1.  计算我想离开的订单
2.  杀死订单我想离开但由于数量限制我不能离开
3.  计算我要添加的订单
4.  杀死我想离开的其他订单，但由于新订单我不能
5.  调整新订单数量以适应所需数量

我总共有 5 页丑陋的代码，我想至少分阶段分开。但是我不想为每个阶段引入单独的方法，因为这些阶段只有在一起才有意义，阶段本身是无用的，所以我认为为每个阶段创建单独的方法是错误的。

我想我应该使用 c#`#region`进行分离，你怎么看，你会建议更好的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:42:24.120

使用私有方法将逻辑拆分为小任务，即使该逻辑只用在一个地方，也能大大提高代码的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:12:07.830

为此目的避免使用#region 指令，它们只会扫除地毯下的污垢。

我赞同@RasmusFranke 的建议，divide et impera：在将功能分离为方法时，您可能会注意到一堆方法恰好代表了一个值得类的概念，然后您可以将这些方法移动到一个新类中。**可重用性并不是创建方法的唯一原因**。

重构，重构，重构。在使用[Refactoring](https://rads.stackoverflow.com/amzn/click/com/0201485672)和[Working Effectively with Legacy Code](https://rads.stackoverflow.com/amzn/click/com/0131177052)中的技术时，请牢记[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)等原则。

如果可以使用 Resharper 或 Refactor 等工具，请慢慢使用！Pro 有助于最大程度地减少重构时可能发生的错误。

使用您的测试来检查您是否破坏了任何东西，特别是如果您无法访问前面提到的工具或者您正在进行一些重大的重构。如果您没有测试，请尝试编写一些测试，即使为遗留代码编写测试可能会令人生畏。

最后但同样重要的是，如果不需要，请勿触摸它。如果它有效，但它是“丑陋的”，并且它不是需要更改的代码的一部分，那就顺其自然吧。

# android - 视频没有播放

> ID：10595403
> 
> 赞同：-1
> 
> 时间：2012-05-15T06:40:45.633
> 
> 标签：android

在我的活动中，我想播放在线视频，但此功能在我的代码中不起作用。视频流未启动？

这是代码：

```
 private String getDataSource(String path) throws IOException {
        if (!URLUtil.isNetworkUrl(path)) {
            return path;
        } else {
            URL url = new URL(path);
            URLConnection cn = url.openConnection();
            cn.connect();
            InputStream stream = cn.getInputStream();
            if (stream == null)
                throw new RuntimeException("stream is null");
            File temp = File.createTempFile("mediaplayertmp", "dat");
            temp.deleteOnExit();
            String tempPath = temp.getAbsolutePath();
            FileOutputStream out = new FileOutputStream(temp);
            byte buf[] = new byte[128];
            do {
                int numread = stream.read(buf);
                if (numread <= 0)
                    break;
                out.write(buf, 0, numread);
            } while (true);
            try {
                stream.close();
            } catch (IOException ex) {
                Log.e(TAG, "error: " + ex.getMessage(), ex);
            }
            return tempPath;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T06:51:55.043

试试这个[http://www.pocketjourney.com/downloads/pj/video/着名.3gp](http://www.pocketjourney.com/downloads/pj/video/famous.3gp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:47:42.177

```
VideoView mVideoView = (VideoView) findViewById(R.id.vdoTest);
mVideoView.setMediaController(new MediaController(this));
String viewSource ="http://view.vzaar.com/923037/video";
mVideoView.setVideoURI(Uri.parse(viewSource)); 
```

如果视频编码正确，这应该可以工作：（AAC+H.264，基线）

# websphere - 问题 cxf 与 websphere

> ID：10595407
> 
> 赞同：1
> 
> 时间：2012-05-15T06:40:59.890
> 
> 标签：websphere, cxf, webservices-client

我想通过 JaxWsProxyFactoryBean 调用 Web 服务。我在 tomcat 6 中进行了测试，一切正常，但是当我在 WAS 7 上部署时，它不起作用。

我的问题是：当我调用此代码的 factory.create() 方法时：

```
 JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
        factory.setServiceClass(CustomerServices.class);
        factory.setAddress("http://host:port/MyServices");
        factory.getInInterceptors().add(new LoggingInInterceptor());
        factory.getOutInterceptors().add(new LoggingOutInterceptor());
        CustomerServices client = (CustomerServices) factory.create(); 
```

我得到了这个异常：ServiceConstructionException，它告诉我'e.getMessage() = null'

我下面的 pom 与 WAS 7 之间是否有任何不兼容？

--pom.xml--

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>

    <!--log-->
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>${log4j.version}</version>
    </dependency>

    <!--commons-->
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <!--Spring-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Spring AOP + AspectJ -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>3.3</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- AOP -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.2</version>
    </dependency>

    <!-- db connection and  pooling -->
    <dependency>
        <groupId>com.ibm.db2</groupId>
        <artifactId>db2jcc</artifactId>
        <version>9.1.0</version>
    </dependency>
    <dependency>
        <groupId>com.ibm.db2</groupId>
        <artifactId>db2jcc-license-cisuz</artifactId>
        <version>9.1.0</version>
    </dependency>
    <dependency>
        <groupId>com.jolbox</groupId>
        <artifactId>bonecp</artifactId>
        <version>0.6.7.2</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>

    <!-- Apache CXF dependencies -->
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-databinding-aegis</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-bindings-soap</artifactId>
        <version>${cxf.version}</version>
    </dependency>

    <dependency>
        <groupId>quartz</groupId>
        <artifactId>quartz</artifactId>
        <version>1.5.2</version>
    </dependency>

    <!--date & time-->

    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>1.6.2</version>
    </dependency>

    <dependency>
        <groupId>com.persianCalender</groupId>
        <artifactId>simpleCalender</artifactId>
        <version>1.4.0</version>
    </dependency>

    <dependency>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
        <version>1.3.1</version>
    </dependency>

    <dependency>
        <groupId>com.sun.xml.messaging.saaj</groupId>
        <artifactId>saaj-impl</artifactId>
        <version>1.3.2</version>
    </dependency>

    <dependency>
        <groupId>wsdl4j</groupId>
        <artifactId>wsdl4j</artifactId>
        <version>1.6.2</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.woodstox</groupId>
        <artifactId>wstx-asl</artifactId>
        <version>3.2.9</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.woodstox</groupId>
        <artifactId>woodstox-core-asl</artifactId>
        <version>4.1.1</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.woodstox</groupId>
        <artifactId>stax2-api</artifactId>
        <version>3.1.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.ws.xmlschema</groupId>
        <artifactId>xmlschema-core</artifactId>
        <version>2.0</version>
    </dependency>

    <dependency>
        <groupId>xml-resolver</groupId>
        <artifactId>xml-resolver</artifactId>
        <version>1.2</version>
    </dependency>

</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:34:12.027

我在 WebSphere 7 上部署 JAX-WS Web 服务时或多或少遇到了相同的问题，使用 CXF 进行 WS 和 Maven 进行构建。

你可以在网上找到很多信息；[我试图将它们全部收集起来，并在http://bit.ly/1wCyjfx](http://bit.ly/1wCyjfx)上发布了一篇博文。

在这里，您可以找到现在对我有用的依赖项和 WAR 打包部分（在我的应用程序中，我发布了一些服务并使用了一些其他服务）以及对 WAS 7 配置的具体引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:18:12.153

Apache CXF 网站上针对特定应用程序服务器的说明是否有帮助？

[http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-ForWebSphere6.1.0.29%2CV7andV8](http://cxf.apache.org/docs/application-server-specific-configuration-guide.html#ApplicationServerSpecificConfigurationGuide-ForWebSphere6.1.0.29%2CV7andV8)

你能试试这些吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:13:17.403

最后，我找到了另一个解决方案，而不是使用 JaxWsProxyFactoryBean 作为客户端。我们应该使用另一个客户端；

```
public final static QName SERVICE_NAME = new QName("URL", "MyServiceImplService");

        MyServiceImplService ss = new MyServiceImplService (wsdlURL, SERVICE_NAME);
        CustomerServices port = ss.getMyServiceImplPort();
        port.myMethod(input); 
```

# php - 如何从返回的 php 结果中删除标签？

> ID：10595410
> 
> 赞同：0
> 
> 时间：2012-05-15T06:41:05.097
> 
> 标签：php, android

在我的 android 应用程序中，我通过 php 脚本从我的 MYSQL 数据库返回一些数据，如果返回的结果为 null：它将以这种格式返回到我的应用程序：

```
result<br /><font size='1'><table class='xdebug-error' dir='ltr' border='1' cellspacing='0' cellpadding='1'><tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Notice: Undefined variable: output in C:\wamp\www\y.php on line <i>16</i></th></tr><tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr><tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr><tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0005</td><td bgcolor='#eeeeec' align='right'>368264</td><td bgcolor='#eeeeec'>{main}(  )</td><td title='C:\wamp\www\y.php' bgcolor='#eeeeec'>..\y.php<b>:</b>0</td></tr></table></font>" not exist" 
```

这个词：“不存在”我通过if语句将它添加到我的php中以检查结果是否为null，我想用字符串值替换它“不存在”，在我的应用程序中我将处理它而不是处理空值将导致 JSON 异常，因为此格式中的空值或值无法解析为 JSON 数组我的问题是：如何删除结果返回的所有标签？如果 $output 为空，我将其替换为“不存在”，但它没有以 JSON 格式返回，因为它有值，为什么？请帮助我，因为我是 php 新手...

**php代码**

```
$name=$_REQUEST['Name'];          
     mysql_connect("localhost","user","pass")or OnError('database connection failed', mysql_error());
    mysql_select_db("MYDB")or OnError('database selection failed', mysql_error($mysql));
    mysql_query("SET NAMES utf8"); 
   $sql=mysql_query("select  burnedCalories   from Exercise where  Name='$name' ");
   while($row=mysql_fetch_assoc($sql))
   $output[]=$row;
   if (is_null($output))  // if the exercise name not exist the result will be null
    {                                
      $output = ' not exist';
    }
    print(json_encode($output));
     mysql_close();
    define('DEBUG_DETAILS', true);
    function onError($msg, $details) {
    $msg = array(
    'status'=>'error',
    'message'=>$msg);
if ( defined('DEBUG_DETAILS') && DEBUG_DETAILS ) {
    $msg['details'] = $details;
}
die(json_encode($msg));}
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:55:30.800

尝试使用

```
$text = strip_tags($text); 
```

为了这。这正是您所需要的。

[http://www.php.net/manual/de/function.strip-tags.php](http://www.php.net/manual/de/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:25:21.600

Few things to keep in mind, some of these are opinions but they may help:

```
<?php
// Constants are usually defined first and foremost, or stored in classes and accessed statically.
define('DEBUG_DETAILS', true);
function onError($msg, $details) {
    $msg = array('status'=>'error', 
                 'message'=>$msg);
    if( defined('DEBUG_DETAILS') && DEBUG_DETAILS ) {
        $msg['details'] = $details;
    }
    die(json_encode($msg));
}

// try to use the specific request method, and always sanitize!
$name = filter_var($_POST['Name'], FILTER_SANITIZE_STRING);

/* Best to put this into a separate file, but not necessary, of course.
    Handling MySQL errors should fail a bit more gracefully in a "live" environment,
    such as setting the 'error' field to your $output array to 'true'.
*/
mysql_connect("localhost","user","pass") or OnError('database connection failed', mysql_error());
mysql_select_db("MYDB") or OnError('database selection failed', mysql_error());
mysql_query("SET NAMES utf8"); 

$sql = mysql_query("SELECT burnedCalories FROM Exercise WHERE Name='$name'");

if(!$sql){
    // clear the $output by assigning an array
    onError("The query failed.", mysql_error());
}

// set the status
$output['status'] = 'result';

// otherwise... perform usual loop
while($row = mysql_fetch_assoc($sql))
    $output[] = $row;

print(json_encode($output));
mysql_close();
?> 
```

When you return a JSON result back to, well, anything, it's helpful to make sure the structure of the JSON string has similar members.

If your query is successful:

```
{
  status: 'result',
  {
    data: [
      'bench press': '900kCal/hr'
    ],
    [
      'pullup': '1100kCal/hr'
    ]
  }
} 
```

And if not:

```
{
  status: 'error',
  {
    data: [
      'reason': 'Database error.'
    ]
  } 
```

This way, when you go to extract the data on the device, page, whatever your end-result is, you have one format to follow, i.e. `getReason()`, `getResultCode()`, etc.

# javascript - Facebook 在发布 Open Graph 操作时返回空数据属性

> ID：10595413
> 
> 赞同：0
> 
> 时间：2012-05-15T06:41:13.313
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-opengraph

我正在尝试将新的 Open Graph[对象](https://developers.facebook.com/docs/opengraph/define-objects/)、[操作](https://developers.facebook.com/docs/opengraph/define-actions/)和[聚合集成](https://developers.facebook.com/docs/opengraph/define-units/)到我们的站点中。

我有：

1.  创建了一个对象和一个关联的动作
2.  向我的页面添加了正确的标记
3.  验证 #2 中的标记在[Facebook 调试工具中有效](https://developers.facebook.com/tools/debug/)

尝试提交操作以供批准时，它告诉我我需要至少发布一次操作。[我尝试使用文档](https://developers.facebook.com/docs/opengraph/actions/)中的以下请求来执行此操作：

```
https://graph.facebook.com/me/<my-namespace>:<my-action>?<my-object>=<url-to-object>&access_token=<my-access-token> 
```

响应没有给我任何错误，而是以空数据属性响应。

```
{
    data: [ ],
    paging: {
        next: "<paging-url-here>"
    }
} 
```

我认为也许`data`响应中的空白是告诉我它成功的间接方式，但是当我查看我的个人资料时，该操作没有发布，Facebook 也不会让我提交该操作（他们仍然告诉我需要发布该操作至少一次）。

我已经验证了访问令牌是有效的，事实上，我通过删除几个字符搞砸了它，并且请求失败告诉我访问令牌无效。

我显然在这里遗漏了一些明显的东西，所以希望得到一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:33:08.807

Facebook 有一个错误使得 GET 的行为与 POST 不同。如果您遇到与我相同的问题并使用 GET，请切换到 POST，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:46:32.743

那应该行得通。请在developers.facebook.com/bugs 提交您具体看到的错误，我们将进行调查。

# mysql - 将 MySQL 数据库导出到 SqlServer 数据库的最佳方法

> ID：10595418
> 
> 赞同：1
> 
> 时间：2012-05-15T06:41:47.100
> 
> 标签：mysql, sql-server

我有一个 MySQL 数据库，我需要 MS SqlServer 中的那个数据库。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:06:14.350

很少有方法像

安装 mysql 驱动 --> 使用 ODBC 连接到 mysql --> 创建链接服务器 --> 使用 openquery

[http://www.codeproject.com/Articles/29106/Migrate-MySQL-to-Microsoft-SQL-Server](http://www.codeproject.com/Articles/29106/Migrate-MySQL-to-Microsoft-SQL-Server)

另一种方法从mysql导出到excel工作表，然后导入excel工作表。

我通常使用的方法，我认为对我来说是可靠的，是一个手动和漫长的过程

我使用 phpmyadmin 在 sql 脚本中导出数据库

而不是我手动调整脚本

例如更改`table name`为 [tablename] 和其他 sql 语法等

# c# - 如何使用 SQL Server 数据库中的值填充列表？

> ID：10595419
> 
> 赞同：4
> 
> 时间：2012-05-15T06:41:48.420
> 
> 标签：c#, sql-server, list

该列表将根据我的数据库中有多少项目而增长和缩小。

我需要填充列表而不是列表框。我知道我需要打开一个连接。

```
using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
{
    using (var cmd = conn.CreateCommand())
    {
        conn.Open(); 

        List<string> TagList = new List<string>();
        for (int i = 0; i < TagList.Count; i++)
            TagList[i].Add("Data from database");

        cmd.ExecuteNonQuery();
    }
} 
```

我真的不知道该怎么做，而且我确定我在这里的方法看起来很错误，所以我真的需要帮助。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-28T08:05:21.287

我想分享我的解决方案，希望将来对某人有所帮助：

```
public List<string> getFromDataBase() 
{
    List<string> result = new List<string>();
    using(SqlConnection con = new SqlConnection("connectionString"))
    {
        con.Open();
        DataTable tap = new DataTable();
        new SqlDataAdapter(query, con).Fill(tap);
        result = tap.Rows.OfType<DataRow>().Select(dr => dr.Field<string>("columnName")).ToList();
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T06:51:18.533

```
public IEnumerable<string> GetTagList()
{
    using (var connection = new SqlConnection(Properties.Settings.Default.DBConnectionString))
    using (var cmd = connection.CreateCommand())
    {
        connection.Open();
        cmd.CommandText = "select Tag from TagsTable"; // update select command accordingly
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return reader.GetString(reader.GetOrdinal("Tag"));
            }
        }
    }
} 
```

那么你可以如下调用它

```
List<string> tags = GetTagList().ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T07:14:55.237

这会照原样做（如果我没有做任何错别字......）

```
private void LoadList()
    {
        List<string> tagsList = new List<string>();

        using (IDbConnection connection = new SqlConnection(Properties.Settings.Default.DBConnectionString))
        {
            connection.Open();    

            using (IDbCommand command = connection.CreateCommand())
            {
                command.CommandText = "SELECT TAGCOLUMN FROM TAGSTABLE";

                using (IDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        if (!reader.IsDBNull(0))
                            tagsList.Add(reader.GetString(0));
                    }

                    reader.Close();
                }
            }

            connection.Close();
        }
    } 
```

**编辑：**

当然，您必须从数据库中将 select 语句更改为正确的语句。我只是用一个伪的来向你展示放在那里的东西。

# webdriver - WebDriver - 用于 32 位 IE 的 InternetExplorerDriver 独立服务器，目的是什么，我该如何使用它

> ID：10595420
> 
> 赞同：0
> 
> 时间：2012-05-15T06:41:53.220
> 
> 标签：webdriver

在 WebDirver 下载页面，我看到了 InternetExplorerDriver 独立服务器。这样做的实际目的是什么。我该如何使用它？我在哪里可以找到文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:50:16.503

这是一个与 IE 驱动程序一起使用的独立服务器，很像与 Chrome 驱动程序一起使用的独立服务器。目前还没有必要，但在 Selenium 库的未来版本中将需要它。[WebDriver 面向用户的邮件列表](https://groups.google.com/d/msg/webdriver/lFNs89v2cBw/DilIhQafvOwJ)中对独立服务器的内容进行了非常彻底的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:04:23.340

用于在 InternetExplorer 浏览器中运行脚本的独立 IEdriver，要运行脚本，您必须下载 internetExplorerDriver 独立服务器，如果您使用 Eclipse，则必须设置驱动程序的路径，然后调用 IEdriver 它打开 IE 浏览器

```
 System.setProperty("webdriver.ie.driver", "path of driver");
 WebDriver driver = new InternetExplorerDriver(); 
```

或者

```
 DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer(); 
       ieCapabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);
         WebDriver driver = new InternetExplorerDriver(ieCapabilities); 
```

# javascript - 更新 Rally.data.custom.Store

> ID：10595423
> 
> 赞同：1
> 
> 时间：2012-05-15T06:42:15.270
> 
> 标签：javascript, extjs, rally

我创建了一个 Rally.data.custom.Store 并用它来填充一个 Rally Grid。

后来（当一些迟到的查询进来时），我通过从存储中获取记录对象并调用来更改一些记录：

```
record.set(field, newValue); 
```

这就像一个冠军，适当地更新列 hi 照明。但是，当用户稍后使用自定义网格的任何列时，所有记录都会恢复为其原始值。

我试过 record.commit() 和 record.save() 无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:02:24.647

看起来这是 Rally.data.custom.Store 代码的缺陷。我会把它归档，以便我们有机会时解决它。

感谢您抽出宝贵时间帮助我们测试新 SDK 的预览版。

# git - Git 文件重命名产生错误：“警告：目标存在；将覆盖！”

> ID：10595425
> 
> 赞同：3
> 
> 时间：2012-05-15T06:42:20.057
> 
> 标签：git, shell

我想在本地重命名我的存储库中的文件。所以我这样做：

```
git mv -f hashpq.py HashPQ.py 
```

得到这个：

```
warning: destination exists; will overwrite! 
```

然后我通过以下方式获取 git 的状态：

```
git status 
```

并得到这个响应：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    hashpq.py
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   hashpq.py 
```

但是在我列出我的目录之后：

```
ls 
```

我有这个：

```
CHANGLELOG  hashpq.py  NEXTPLAN  README  TODO 
```

我仍然有 hashpq.py 与以前的名称保持不变。如何将文件重命名为 HashPQ.py？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T06:47:42.380

尝试将其重命名为某个临时名称，然后重命名为您想要的名称：

```
git mv hashpq.py _hashpq.py
git mv _hashpq.py HashPQ.py
git commit 
```

`mv`当文件系统不区分大小写时，这与常规命令的行为相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-27T08:04:11.683

您不再需要`-f`git 2.0.1（2014 年 6 月 25 日）。

A`git mv hashpq.py HashPQ.py`仅适用于不区分大小写的操作系统，如[David Turner的](https://github.com/dturner-tw)[提交 baa37bf](https://github.com/git/git/commit/baa37bff9a845471754d3f47957d58a6ccc30058)中所述（ [）](https://github.com/dturner-tw)[`dturner-tw`](https://github.com/dturner-tw)

### `mv`：允许重命名以修复不区分大小写的文件系统的大小写

" `git mv hello.txt Hello.txt`" 在不区分大小写的文件系统上总是会触发 " `destination already exists`" 错误，因为这两个名称从文件系统的角度来看是指同一个路径，并且需要用户`--force`在更正索引中记录的路径的大小写时给出 " "下一次提交。

> 检测这种情况并允许它而不需要“ `--force`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:05:35.750

我的文件系统是 NTFS，你知道它基本上对文件名不区分大小写。因此，我需要先将其更改为 asghar.py，然后将其更改为 HashPQ.py。

谢谢大家。

# javascript - Ajax 日历扩展器不选择上一个日期

> ID：10595440
> 
> 赞同：1
> 
> 时间：2012-05-15T06:43:21.260
> 
> 标签：javascript, asp.net, ajax

我正在使用 ajax calendarextender 和 javascript 来限制用户不会选择过去的日期，但在这里我遇到了一个问题：

*   如果用户选择过去的日期，那么它工作正常
*   如果用户选择未来日期，那么它也可以正常工作

**但是**，如果用户正在选择当前日期，那么他也会收到不需要的警报。

我的要求是用户可以选择当前日期和未来日期，但限制输入任何以前的日期。请帮我解决这个问题，您可以在下面找到代码：-

```
<div id="formload" >
    <!-- ============================== Fieldset 1 ============================== -->
    <fieldset>
        <legend>Enter Date</legend>
        <table>
        <tr>
        <td><label for="input-one" class="float"><strong>Date</strong></label>
        </td><br />
        <td><asp:TextBox ID="txtDate" runat="server" CssClass="inp-text" Width="300px"></asp:TextBox> </td>
        <td><asp:Image runat="server" ID="btnDate2" AlternateText="cal2" ImageUrl="~/App_Themes/Images/icon_calendar.jpg" />
            <ajaxtoolkit:calendarextender runat="server" ID="calExtender2" Format="dddd, MMMM dd, yyyy" PopupButtonID="btnDate2" TargetControlID="txtDate"  OnClientDateSelectionChanged="CheckDateEalier" /> </td>
        </tr></table>

    </fieldset>
    <!-- ============================== Fieldset 1 end ============================== --> 
```

**Javascript**

```
 <script type="text/javascript">
        function CheckDateEalier(sender, args)
            {
                if (sender._selectedDate < new Date())
                 {
                    alert("Day earlier than today cannot be selected.");
                    sender._selectedDate = new Date();
                    sender._textbox.set_Value(sender._selectedDate.format(sender._format))
                }
            }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:52:00.777

这是因为日期相同但时间不同将小时分钟秒和毫秒设置为 0 然后它将起作用。

```
<script type="text/javascript">
            function CheckDateEalier(sender, args) {
                var toDate = new Date();

           var selectedDate = sender._selectedDate;

            toDate.setMinutes(0);
            toDate.setSeconds(0);
            toDate.setHours(0);
            toDate.setMilliseconds(0);

            selectedDate.setMinutes(0);
            selectedDate.setSeconds(0);
            selectedDate.setHours(0);
            selectedDate.setMilliseconds(0);

            //alert(sender._selectedDate < toDate);
            //var difference = sender._selectedDate - toDate;

            if (selectedDate > toDate) {

                    alert("Ticket issue date must be greater than current date.");
                    sender._selectedDate = toDate; //set the date back to the current date
                    sender._textbox.set_Value(sender._selectedDate.format(sender._format));

            }             
        } 
```

# c# - 解析数学表达式

> ID：10595442
> 
> 赞同：1
> 
> 时间：2012-05-15T06:43:32.823
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在设计一个应用程序，让用户输入一个复杂的数学表达式，涉及各种数学运算（sin、cos、ln、阶乘、幂等）。用户将在文本块中看到表达式，稍后将对其进行解析以进行进一步的操作。

现在，这个解析部分是我卡住的地方。我想要我的代码中的表达式。

例如，如果用户输入 sin(x)+cos(x)，我希望能够对我的代码中的某个 x 值实际执行此操作。

我知道那里有很多类似的问题。但是，我想要一些特定于 windows phone SDK 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:47:04.550

您可能想查看[CodeDom Calculator - Evaluating C# Math Expressions dynamic](http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx)。这基本上是一个使您能够评估数学表达式的类，而不仅仅是。

# php - 如何列出 Moodle 1.9 课程并与其他 (PHP) 系统集成？

> ID：10595444
> 
> 赞同：0
> 
> 时间：2012-05-15T06:43:42.817
> 
> 标签：php, moodle

我想获得 Moodle 1.9 课程的列表。我应该使用哪些函数或 api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:25:42.637

您可以使用 OK Tech API，这是链接：

[https://github.com/patrickpollet/moodlews/blob/master/wspp/mdl_baseserver.class.php](https://github.com/patrickpollet/moodlews/blob/master/wspp/mdl_baseserver.class.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:51:35.947

您可以使用 lib/datalib.php 中定义的 get_courses() 函数来获取整个站点或类别中所有课程的列表。

# excel - Excel vb项目-最佳实践

> ID：10595446
> 
> 赞同：1
> 
> 时间：2012-05-15T06:43:47.640
> 
> 标签：excel, vba

我不是 vb 开发人员，对 excel 也不熟悉。无论如何，我有一个项目要使用 MS Excel 完成（不能使用访问）。系统是为需要将年度报告中的数据输入系统的公司提供比率分析（以及其他一些分析）。然后根据几个报告数据，我可以得出图表和所有其他信息。

我的问题现在我可以将数据存储在单个工作表中，就像将其用作数据库一样。会像

```
CompanyName     Year     Data1     Data2    Data3... 
```

此处 CompanyName 可以重复，因为可以输入许多年数据。如果我使用这种方法 每次导出公司数据时，我都必须在工作表中搜索相关行，并在读取这些行并生成最终结果时将大量数据保存在数组中。

或者我可以为每家公司使用单独的工作表。然后我只需要搜索相关的工作表名称并在该工作表中轻松执行操作即可。

那么最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:14:49.200

无论哪种方式都有效。IMO 您可以创建一个定义的范围（或多个）并针对它发出 SQL，就像它是 Access 表一样。我支持将所有类似的数据保存在同一个工作表上，即使对于不同的公司也是如此；但这只是我的 2 美分。您可以创建一个支点来分离信息并根据需要对其进行切片/切块

由于有人喜欢评论作为答案：...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T07:50:32.127

仅使用公式和 Excel 函数来完成其中的一些操作可能会更简单。基本方法是将数据保存在一张纸上，并在公司内部按年份排序，以便将公司的所有年份组合在一起。然后使用过滤器创建唯一公司列表。
每次添加新数据时，这些步骤都会重复。
然后为每个公司创建 2 个公式：第一个使用 MATCH 查找包含公司名称的第一行，第二个使用 COUNTIF 查找公司有多少行。
然后您可以使用 OFFSET(firstrow,ColumnIndex,NumberOfRows,1) （或类似的）来获取图表和比率分析等所需的数据范围。

# c++ - 为什么这里调用的是 Copy Constructor 而不是普通的 Constructor 和重载的赋值运算符？

> ID：10595451
> 
> 赞同：4
> 
> 时间：2012-05-15T06:44:17.703
> 
> 标签：c++, copy-constructor

> **可能重复：**
> [复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)
> [复制构造函数和赋值运算符](https://stackoverflow.com/questions/2027873/copy-constructors-and-assignment-operators)

我有一个 C 类，我在其中重载了 Normal、复制构造函数和赋值运算符，以打印被调用的内容。

我编写了以下代码来测试什么时候被调用？

```
C c1;                --> Normal Constuctor .. // understood Fine

C c2;
c2 = c1;             --> Normal constructor + assignment operator .. //understood Fine

C * c3 = new C(C1)   --> Copy constructor  // Understood Fine

C c4 = c1          --> copy constructor // Not Able to understand 
```

这似乎让我感到困惑，因为在这段代码中虽然我在声明时进行了初始化，但它是通过赋值运算符而不是复制构造函数..我理解错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T06:45:25.097

因为`C c4 = c1;`在~~语法~~语义上等价于：

```
C c4(c1); 
```

在这种特殊情况下，两者都会调用复制构造函数。但是，“复制初始化”（第一种语法）和“直接初始化”（第二种语法）之间存在细微差别。看看[这个](https://stackoverflow.com/a/1051468/514235)答案。

[**注意**：在“外行的术语”中，构造一个变量（这里`c4`）直到遇到第一个`;`（或`,`' 对于多个对象）；到那时，一切都是一种或另一种类型的构造函数。]

在这种情况下`C c4 = c1;`，编译器不必检查[最麻烦的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。
但是，可以`C c4 = c1;`通过声明复制构造函数来禁用一种语法**`explicit`**。就此而言，任何构造函数都可以显式化，并且您可以防止`=`在构造中签名。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T06:49:28.743

```
C c4 = c1; 
```

是**复制初始化**。

如果它已经不是该类型，它会尝试通过找到合适的转换函数来转换`c1`为该`C`类型，然后使用创建的`C`实例来复制构造一个新`C`实例。

请注意，虽然，

```
C c4(c1); 
```

是**直接初始化**

重要的是要注意复制初始化和直接初始化之间有区别，**[它们是不一样的！](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)**

**为什么`C c4 = c1;`在语法上等同于`C c4(C1)`而不是`C C4; c4 = c1;`为什么它是这样制作的？**
首先，复制初始化和直接初始化是不一样的。
至于为什么不调用赋值运算符的基本原理，只有在将两个完全形成的对象相互赋值时才会发生赋值。

的情况下：

```
C c4 = c1; 
```

`c1`是一个完全构造的对象，`c4`但并不完全存在，当这种情况出现并`=`存在时，它并不真正意味着赋值，而是意味着初始化。
所以基本上，这里发生的是初始化而不是赋值，C++ 标准定义了关于如何进行初始化的特定规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:47:36.870

因为没有赋值运算符：

```
C c4 = c1; 
```

与逗号一样，等号可以是运算符或标点符号。在表达式中，它始终是一个运算符，但在上面，初始化表达式很简单`c1`；符号是`=`标点符号，表示要使用复制初始化，而不是直接初始化。（直接初始化将是

```
C c4( c1 ); 
```

并且，恕我直言，通常更可取。但是，在初始化表达式与新对象具有相同类型的情况下，没有区别。）

# filter - IP提取谷歌分析

> ID：10595462
> 
> 赞同：1
> 
> 时间：2012-05-15T06:45:22.473
> 
> 标签：filter, google-analytics

我尝试在谷歌分析中添加 IP 提取过滤器以显示访问者 ip！但我在自定义下拉列表中看不到`Visitor IP Address`价值！**`Field A -> Extract A`**什么问题？如何使用谷歌分析来显示访问者 ip？！

如何进行 IP 提取：

```
google analytics->admin->filtersTabs->newfilter 

name : IP Extraction
Filter Type : Custom filter -> Advanced
Field A -> Extract A : Visitor IP Address / (.*) //problem !!!
Output To -> Constructor: User Defined / $A1 
```

屏幕 ： ![在此处输入图像描述](../Images/9c7f5ac808b6e568c3ed88cc6b07a595.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:58:56.627

`Visitor IP`使用 Google Analytics无法获得：

> 由于用户隐私问题，Google Analytics 不会报告个人身份信息，包括访问者的 IP 地址。...

来源：[是否有显示 IP 地址的报告？](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=86214)

# assembly - 链接描述文件中的 ORG 汇编指令和位置计数器

> ID：10595467
> 
> 赞同：0
> 
> 时间：2012-05-15T06:45:56.110
> 
> 标签：assembly, linker, nasm, linker-scripts

据我了解，在程序集（特别是 NASM 程序集）中使用 ORG 指令并将链接器脚本中的位置计数器设置为某个值执行相同的功能。但是我想知道如果我同时使用 org 指令和具有优先权的位置计数器。例如，如果我有一个以开头的汇编代码`ORG 0x10000`和以开头的链接器脚本

```
SECTIONS {
 . = 0xC0000000 
```

代码将链接到哪个地址？

# eclipse-rcp - 如何将 Equinox p2 应用于包含 DLL 的 RCP 应用程序

> ID：10595469
> 
> 赞同：1
> 
> 时间：2012-05-15T06:46:10.680
> 
> 标签：eclipse-rcp, auto-update, equinox, p2

我正在尝试将 p2 更新机制实现到包含 DLL（通过 JNI 集成）的 RCP 应用程序中。整个 RCP 应用程序（包括这些 DLL）必须保持最新。

目前 PDE 构建不知道 DLL - make/gcc 生成并将它们复制到最后的交付中。

如何让 p2 知道 DLL？必须将它们添加到 p2 存储库中，并且当有更新的版本可用时，RCP 应用程序中的 p2 必须更新它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:04:47.990

在插件中包含 DLL。

生成它们后，将它们复制到插件项目中的文件夹中。然后将包含 DLL 的文件夹添加到 plugin.xml 编辑器中的 Binary Build 部分。您可以使用插件`Bundle-NativeCode:`的 Mainfest.mf 中的条目使插件了解 DLLS。这样，DLL 将包含在插件的 jar 中，因此会自动包含在您的 p2 存储库中。

# android - 如何维护 MediaPlayer 的单个实例 [Android]

> ID：10595470
> 
> 赞同：5
> 
> 时间：2012-05-15T06:46:17.227
> 
> 标签：android, android-mediaplayer

我正在使用 android 媒体播放器类在我的 android 应用程序中播放通知声音。

```
MediaPlayer player = MediaPlayer.create(getApplicationContext(), R.raw.notify);
player.setLooping(false);
player.start(); 
```

我需要在不同的活动中播放不同的通知声音，所以每次我需要播放声音时，我都需要创建媒体播放器实例，然后我需要说开始。

但不是这样做，我如何在整个应用程序中维护媒体播放器的单个实例并在所有活动中使用它来播放声音。

有人可以建议我更好的实施方式。从我的角度来看，我将创建一个单例类，并在该类中添加所有与 MediaPlayer 相关的函数。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T06:53:01.737

您应该考虑**[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)**。创建一个类 MyPlayer，它有一个静态方法`getMediaPlayer()`，每次调用都返回相同的 MediaPlayer 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T06:54:36.317

[我总是对Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)的修改版本做类似的事情。由于 Android 中到处都需要上下文，因此我将上下文传递给实例：

```
public class Asset{
     public static Asset(Context context);
} 
```

在此实现中，您还可以在不同的上下文范围内拥有不同的单例，例如：

```
private static Hashtable<Context, Asset> instances;

public static Asset(Context context){
    if (!instances.containKey(context)){
        instances.put(context, new Asset(context));

    return instances.get(context);
} 
```

与经典单例相比，它的优点是您可以定义单例的范围。有时您只需要将实例留在同一个 Activity 中，但第二个 Activity 可能有不同的实例。如果你需要跨不同的Activity，你只需要传递context.getApplicationContext()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T07:55:06.027

## 详细说明单例注意事项：

*注意：这里也解决了连续创建一系列播放器（比如 20 个 mediaPlayers）时 Audioservice 失败的问题。*

**创建播放器：**单例类应该创建另一个线程来处理媒体播放器操作（不是主 UI 线程）

**Create Player Runnable**：这个线程（由单例实例创建的应该被赋予后台优先级，在创建逻辑之前延迟“Thread.sleep(500);”以允许 MediaPlayer.create() 使用的 AudioService- 完成其工作，因为后一种方法立即返回。

**创建 Player Runnable 代码**：

```
/**
 * Created by George hannuneh on 10/12/2015.
 * Holds the background work for creating a media player
 */
public class CreatePlayerRunnable implements Runnable {

static final int CREATE_STATE_FAILED = -1;
static final int CREATE_STATE_STARTED= 0;
static final int CREATE_STATE_COMPLETED= 1;
private static final String TAG ="CreatePlayerRunnable";
private static int sRunnablesCount = 1;

final TaskRunnableCreatePlayerMethods mPlayerTask;

/**
 *
 * An interface that defines methods that PlayerCreationTask implements. An instance of
 * CreatePlayerTask passes itself to an CreatePlayerRunnable instance through the
 * CreatePlayerRunnable constructor, after which the two instances can access each other's
 * variables.
 */
interface TaskRunnableCreatePlayerMethods {
    /**
     * Sets the Thread that this instance is running on
     * @param currentThread the current Thread
     */
    void setCreatePlayerThread(Thread currentThread);

    Context getActivity();

    Uri getMediaUri();

    void handleCreationState(int createStateFailed);

    void setPlayer(MediaPlayer returnMediaPlayer);

    String getPlayerId();

    MediaPlayer getPlayer();
}
/**
 * This constructor creates an instance of CreatePlayerRunnable and stores in it a reference
 * to the CreatePlayerTask instance that instantiated it.
 *
 * @param createPlayerTask The CreatePlayerTask
 */
CreatePlayerRunnable(TaskRunnableCreatePlayerMethods createPlayerTask) {
    mPlayerTask = createPlayerTask;
}
@Override
public void run() {
    /*
     * Stores the current Thread in the CreatePlayerTask instance,
     * so that the instance
     * can interrupt the Thread.
     */
    mPlayerTask.setCreatePlayerThread(Thread.currentThread());
    // Moves the current Thread into the background
    android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_BACKGROUND);
    MediaPlayer returnMediaPlayer = null;

    try {

        Thread.sleep(500);
        // Before continuing, checks to see that the Thread hasn't
        // been interrupted
        if (Thread.interrupted()) {
            throw new InterruptedException();
        }
        returnMediaPlayer = MediaPlayer.create(mPlayerTask.getActivity(), mPlayerTask.getMediaUri());
        if (returnMediaPlayer == null) {
            Log.e("CreatePlayerRunnable", mPlayerTask.getMediaUri()+ " - failed to create player");
            return;
        }
        PlayerEventsHandler playerEvents = new PlayerEventsHandler(mPlayerTask.getPlayerId());
        returnMediaPlayer.setLooping(true);
        returnMediaPlayer.setOnCompletionListener(playerEvents);
        returnMediaPlayer.setOnErrorListener(playerEvents);
        returnMediaPlayer.setVolume(0f, 0f);
        returnMediaPlayer.start();
    } catch (InterruptedException e1) {
        // Does nothing
    } catch(Exception e)
    {
        returnMediaPlayer = null;
        e.printStackTrace();
    }
    finally {
        if(MainActivity.DEBUG_MODE_ENABLED){
            Log.d(TAG, "end of runnable: "+ sRunnablesCount++);
        }
        if (null == returnMediaPlayer){
            mPlayerTask.handleCreationState(CREATE_STATE_FAILED);
        } else {
            mPlayerTask.setPlayer(returnMediaPlayer);
            // Reports a status of "completed"
            mPlayerTask.handleCreationState(CREATE_STATE_COMPLETED);
        }

        // Sets the current Thread to null, releasing its storage
        mPlayerTask.setCreatePlayerThread(null);
        // Clears the Thread's interrupt flag
        Thread.interrupted();
    }

} 
```

}

# android - 在android ics中加载url时webview变为空白

> ID：10595471
> 
> 赞同：2
> 
> 时间：2012-05-15T06:46:19.933
> 
> 标签：android, webview

我正在一个应用程序中工作，该应用程序具有用于在 webview 中加载的 url，在 andorid api 级别 13 之前，一切都可以正常工作，但是对于 andorid ics，它的行为不同，一些 url 正确加载，但有些在加载时会导致屏幕闪烁，我没有 url https 这些是简单的 http url。我不明白为什么会这样，请帮助我。我的代码是-

```
 progressDialog = ProgressDialog.show(WebViewActivity.this, "",
                   "Loading...");
                  progressDialog.setCancelable(true);

                  webview = (WebView) findViewById(R.id.webview);
                  webview.getSettings().setJavaScriptEnabled(true);
                  webview.setWebViewClient(new MyWebViewClientICS());
                  webview.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
                  PluginState state = WebSettings.PluginState.ON;
                  webview.getSettings().setPluginState(state);
                  webview.getSettings().setDomStorageEnabled(true);
                  webview.setBackgroundColor(0);
                  webview.getSettings().setSupportZoom(true);

                  webview.setWebChromeClient(new WebChromeClient() {
                  public void onProgressChanged(WebView view, int progress) {
                    if (view.getProgress() == 100) {
                         progressDialog.dismiss();
                            }
                   }
                  webview.loadUrl(url);

                   }

       private class MyWebViewClientICS extends WebViewClient {
       @Override
       public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        Log.d("onReceivedError", errorCode + "" + description
                + "failingUrl" + failingUrl);
        Toast.makeText(WebViewActivity.this,
                "Sorry, error in loading page, please try again",
                Toast.LENGTH_SHORT).show();
        finish();
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        return false;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:54:39.193

尝试这个

```
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().supportZoom(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:51:33.720

你的设置对我来说看起来不错。您是否尝试过使用标准的“WebViewClient”而不是自己的“MyWebViewClientICS”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:00:11.440

尝试这个

```
progressBar = ProgressDialog.show(WebPage.this, "", "Loading...");
url = getIntent().getStringExtra("website");
System.out.println("Url is " + url);
web = (WebView) findViewById(R.id.webView1);

web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setBuiltInZoomControls(false);

web.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.i(TAG, "Processing webview url click...");
        view.loadUrl(url);
        return true;
    }

    public void onPageFinished(WebView view, String url) {
        Log.i(TAG, "Finished loading URL: " + url);
        if (progressBar.isShowing()) {
            progressBar.dismiss();
        }
    }
});
web.loadUrl("http://"+url) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-12T11:02:26.777

老问题。但这就是为我解决问题的方法。

```
 webView.setBackgroundColor(0x77000000); 
```

# windows - 通过 Go 写入 Windows 注册表

> ID：10595476
> 
> 赞同：2
> 
> 时间：2012-05-15T06:46:49.103
> 
> 标签：windows, winapi, registry, go

我需要通过 Go 写入 Windows 注册表，但找不到这样做的机制。

我发现[https://github.com/lxn/go-winapi在](https://github.com/lxn/go-winapi)*advapi32.go*文件中提供了对注册表的只读访问权限。我已经提交了一份错误报告，要求也能够写入注册表，以便将来将其添加到某人的愿望清单或任务清单中。

我认为这种能力甚至可能不存在于现有的 Go 库中，需要创建它。如果它已经存在，我在这里问。如果它不存在，但您有兴趣增强*go-winapi*或其他类似库，请这样做。或者，如果您知道写入注册表背后的机制，那么共享该信息以便我（或其他人）可以将其用于*go-winapi*库的补丁中，当然会受到赞赏。

如果不出意外，如果我自己能够将它添加到*go-winapi*或类似的库中，我会回到这里回答这个问题（如果没有其他人回答）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:52:20.127

在[bitbucket.org/kardianos/service/src/service_windows.go](https://bitbucket.org/kardianos/service/src/0393d1b93afa/service_windows.go)中找到，还有可用的 Windows 注册表代码以及（奖励！）Windows 服务管理代码。这是该代码的示例：

```
var regSetKeyValueExProc = advapi.MustFindProc("RegSetValueExW")
func regSetKeyValue(h syscall.Handle, keyName string, data interface{}) error {
        var dataPtr, dataLen, dataType uintptr
        switch v := data.(type) {
        case uint32:
                dataPtr, dataLen = uintptr(unsafe.Pointer(&v)), 4
                dataType = _REG_DWORD
        case string:
                // The comment on MSDN regarding escaping back-slashes, are c-lang specific.
                // The API just takes a normal NUL terminated string, no special escaping required.
                dataPtr, dataLen = StringToUTF16PtrLen(v)
                dataType = _REG_SZ
        }
        r0, _, e1 := regSetKeyValueExProc.Call(
                uintptr(h),
                uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(keyName))),
                0,
                dataType,
                dataPtr,
                dataLen,
        )
        if r0 != 0 {
                return e1
        }
        return nil
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:16:03.053

这是一些示例

[https://github.com/axgle/go/tree/master/regedit](https://github.com/axgle/go/tree/master/regedit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:52:21.980

另一种选择是使用 WMI 来读/写注册表，这也可以通过 Go 访问。

[WMIC：使用注册表](http://www.robvanderwoude.com/wmic.php#Registry)描述了如何通过 Windows 中的 WMIC 命令行工具执行此操作。这可以适用于任何可以与 WMI 交互的编程环境。

我将 user1391070 的答案作为标记的答案，但这可能会帮助需要走 WMI 路线的人。

# php - 来自 PHP 的 APNS Openssl 连接用于 Apple 推送通知？

> ID：10595481
> 
> 赞同：0
> 
> 时间：2012-05-15T06:47:02.373
> 
> 标签：php, ios, openssl, apple-push-notifications

最后，我从本地服务器向我的设备发送了一条通知。我按照本教程[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)和堆栈溢出的许多人帮助我实现了这一目标。我感谢我所有的朋友。

我对服务器设置有一个疑问。对于我的本地使用，我使用过`MAMP for Apache and MySQL servers`. 最后`i open the ssl from Terminal used certificate.pem and key.pem`。有什么办法`open ssl from php script`。但是，我不知道任何单一的 php 脚本，因为我是 ios 开发人员。非常遗憾。

昨天我在终端中使用以下命令打开 ssl 并连接到 APNS，

```
unknownc42c032e8297:~ gopi$ /Applications/MAMP/bin/php/php5.3.6/bin/php /Users/gopi/Desktop/PushChatServer/push/push.php development
unknownc42c032e8297:~ gopi$ cd /Users/gopi/Desktop/PushChatServer/push
unknownc42c032e8297:push gopi$ telnet gateway.sandbox.push.apple.com 2195
Trying 17.149.34.66...
Connected to gateway.sandbox.push-apple.com.akadns.net.
Escape character is '^]'.
Connection closed by foreign host.
unknownc42c032e8297:push **gopi$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert gopiAPNCert.pem -key gopiAPNKey.pem**
Enter pass phrase for gopiAPNKey.pem:
CONNECTED(00000003)
.
.
.
.
Verify return code: 0 (ok)
---
creagx
closed

unknownc42c032e8297:push gopi$ /Applications/MAMP/bin/php/php5.3.6/bin/php /Users/gopi/Desktop/PushChatServer/push/push.php development
^C 
```

有没有办法从我们的 php 文件中打开 openssl？有可能还是终端使用更好，这是唯一的方法吗？谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:39:37.200

要将命令的终端输出发布到 PHP ，您可以使用[exec()](http://php.net/manual/en/function.exec.php)、[system()](http://www.php.net/manual/en/function.system.php)或[passthru()](http://www.php.net/manual/en/function.passthru.php)。这些函数的用法略有不同，但它们的工作基本相同。

# jquery - CSS 选择器匹配更多具有相同 id 的项目

> ID：10595488
> 
> 赞同：1
> 
> 时间：2012-05-15T06:47:33.940
> 
> 标签：jquery, jquery-selectors

我正在使用 Razor 和部分视图在我的 MVC 项目中创建阅读电子邮件功能。我正在通过我的站点模拟 Tab 导航，并且在某一时刻可能会出现多个相同视图的实例（我想要阅读的电子邮件内容），如下所示。

```
<div id="MainContainer" class="contentBg">
     <div id="d2773254">
          <div id="divEmail"> .... </div>
     </div>
     <div id="d2342353" style="display:none">
          <div id="divEmail"> .... </div>
     </div>
     ...
</div> 
```

我的 css 选择器仅使用对“divEmail”和此 div 的所有子项的引用。当页面中有多个与选择器匹配的 HTML 项目时，就会出现问题。

我还尝试将新 div 预先设置为页面顶部的第一个匹配项。它适用于 80% 的情况，这就是我正在寻找解决此问题的方法的原因。我想更改所有选择器（添加顶级选择器 $('#divEmail').parent()）以保证匹配的 HTML 元素是唯一的。

还有其他解决方案吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:48:34.033

在任何情况下，您都不能两次使用同一个 ID。因此，如果您这样做，行为可能完全是随机的。

在你的情况下使用`class="divEmail"`。

# inheritance - 命名查询 (JPA) 中布尔表达式中的编译错误

> ID：10595495
> 
> 赞同：0
> 
> 时间：2012-05-15T06:47:51.880
> 
> 标签：inheritance, entity, jpa-2.0, jpql, named-query

在我的项目中，我在 eclipse Indigo 中使用 JPA2 和 Hibernate。
我有一个抽象 BaseEntity 类，它提供了我项目中所有实体所需的一些字段。因此，这个类被我在项目中使用的所有其他实体扩展。
BaseEntity 中的字段之一是布尔字段`deleted`，用于将条目标记为已删除（不允许从数据库中物理删除对象）。现在，当我尝试在子类中设置命名查询并在 WHERE 子句中使用“NOT u.deleted”时，我从编译器收到以下错误消息：
**无法解析状态字段路径“r.deleted”为有效类型。**

在 BaseEntity 的代码下方：

```
@MappedSuperclass
public abstract class BaseEntity {

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  protected Long id;

  @Version
  protected int version;

  @Column(nullable = false, columnDefinition = "boolean default false")
  protected boolean deleted;

  public boolean isDeleted() {
      return deleted;
  }

  public boolean getDeleted() { // for test-purposes introduced both - isDeleted() & getDeleted()
      return deleted;
  }

  public void setDeleted(boolean deleted) {
      this.deleted = deleted;
  }

  // some other attributes, getters & setters

} 
```

继承类的代码：

```
@Entity
@Table(name = "User")
@NamedQueries({
    @NamedQuery(name = "getAllUsers", query = "SELECT u FROM User u WHERE NOT u.deleted")
})
public class User extends BaseEntity {
    // some other fields and getter/setters
} 
```

任何猜测可能是什么问题？

编辑：根据下面的评论更新代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:55:00.347

我认为getter和setter很重要。我不确定，关于命名流行，但应该是“ `getIsDeleted()`”或“ `isIsDeleted()`”方法。

尝试将您的布尔值重命名为“ `deleted`”

**更新：** 不要使用*NOT*

```
SELECT u FROM User u WHERE u.deleted = FALSE 
```

有一个[关于 JPA 的教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbqa.html#bnbqc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:20:48.497

实际上，您将表“**用户**”与“**角色**”类映射。所以你的查询应该是这样的：

@NamedQuery(name = "getAllUsers", query = "SELECT r FROM **Role** r WHERE NOT r.deleted")

结果：已删除角色的返回列表 = false

# asp.net-mvc - Telerik MVC Grid：一些更新后如何刷新 Grid？

> ID：10595497
> 
> 赞同：0
> 
> 时间：2012-05-15T06:48:05.183
> 
> 标签：asp.net-mvc, telerik, telerik-grid

我有两个网格：

*   动物
*   地点。

`Location`有外键`AnimalId`。在我插入行后`Animal`，表中的下拉列表`Location`是旧的 - 它没有被刷新（它没有新的动物）。我试着打电话`ajaxRequest()`，但没有。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:53:38.053

尝试这样的事情：

```
var grid = $('#LocationGrid').data('tGrid');
grid.rebind(); 
```

它应该工作:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T01:18:26.010

这对我也不起作用。我有一个绑定到网格的项目列表。

我修改了数据，并在 javascript 中调用了 rebind()。但它什么也没做。

如果我使用它可以工作的按钮或刷新页面来刷新网格。

# actionscript - ActionScript 的 writeInt 如何与整数一起使用？

> ID：10595500
> 
> 赞同：1
> 
> 时间：2012-05-15T06:48:17.607
> 
> 标签：actionscript, bytearray

我想知道 writeInt 如何处理传递给它的 32 位无符号或有符号整数？

很容易理解它是如何与十六进制数一起工作的。Util.Print 将打印相应的 ASCII 字符。

0x41424344 将被分解为 4 个 1 字节字符，A、B、C 和 D。

将整数传递给 writeInt 时似乎有所不同。

例如，

```
var test: ByteArray = new ByteArray();
test.writeInt(0x41424344); // prints ABCD
test.writeInt(2590463591); // prints gVg
test.writeInt(1119885898);  // prints BÀJ 
```

我不清楚 Util.Print 函数如何处理 writeInt 写入 ByteArray 的整数。

字符 gVg 不对应整数 2590463591

根据这里 writeInt 的定义：

[http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/utils/ByteArray.html#writeInt%28%29](http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/utils/ByteArray.html#writeInt%28%29)

它声明它适用于 32 位有符号整数。

如果有人可以详细说明它将整数转换为字符的方式，那将会很有帮助。

编辑：它如何处理负整数？

例如，

```
test.writeInt(-11338743); // prints ÿRü 
```

所以，

```
-11338743 = 0xFF52FC09 
```

那是对的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:57:59.770

如果将编码字节解释为 ASCII

```
dec          hex          ascii
1094861636 = 0x41424344 = ABCD
2590463591 = 0x9A675667 = gVg
1119885898 = 0x42C01A4A = BÀJ 
```

另外，请注意 int 与 unsigned int 将实现不同的功能：

```
var test:ByteArray = new ByteArray();
test.writeInt(0x41424344);
test.writeUnsignedInt(0x41424344); 
```

# asp.net - 如何在asp .net中保留具有不同内容页面的母版页的控制状态

> ID：10595502
> 
> 赞同：1
> 
> 时间：2012-05-15T06:48:25.993
> 
> 标签：asp.net

当从内容页面跳转到组合框的其他状态时，我在母版页和一些内容页面中有一些组合框。

如何在母版页中保留组合框的状态。

提前致谢。

# java - java中的for循环错误

> ID：10595504
> 
> 赞同：0
> 
> 时间：2012-05-15T06:48:28.880
> 
> 标签：java, for-loop

我得到了一个任务，我必须获取`i`id 并显示`j`该 id 下的所有值。但是我有一个问题：`i`第一个值`j`的值正确出现，但在`i`第二个 id`j`上出现了相同的值，它在第一个 id 上显示；它没有更新。

代码片段是：

```
for (int i = 0; i <= assignment.getValue().size(); i++){

        TableRow tr = new TableRow(this);
        tr.setPadding(2, 2, 2, 2);

        TableLayout.LayoutParams tableRowParams=
              new TableLayout.LayoutParams
              (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.FILL_PARENT);

        int leftMargin=0;
        int topMargin=2;
        int rightMargin=0;
        int bottomMargin=1;

        tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

        tr.setLayoutParams(tableRowParams);

        value[i]= new TextView(this);
        value[i].setText(assignment.getValue().get(i));
        System.out.println(value[i].getText().toString());
        value[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        tr.addView(value[i]);

   for(int j= 0; j < assignment.getScore().size()/assignment.getValue().size(); j++){
         scr[i]= new TextView(this);
             scr[i].setText(categorylist.getScore().get(j));
             System.out.println(scr[i].getText().toString());
             scr[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
             tr.addView(scr[i]);
   }  t1.addView(tr, tableRowParams); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:40:02.873

有点不清楚 assignment.getValue() assignment.getScore() 和 categoryList.getScore() 之间存在什么样的关系。如果正确建立了关系，您可能会得到更好的答案。

scr[i].setText(categorylist.getScore().get(j));

无论“i”是什么，您总是将相同的 categorylist.getScore().get(j) 设置为 scr[i] ，

会像

scr[i].setText(categorylist[i].getScore().get(j)) 可能是解决您的问题的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:09:13.400

```
>>> on i 1st value j values are coming properly but on i 2nd id j same values are coming which it is showing on 1st id. its not updating 
```

如果我正确理解您的问题，您希望 j 根据 i 工作。但是如果我看到您的代码，则 i & j 之间没有关系。

```
for(int j= 0; j < assignment.getScore().size()/assignment.getValue().size(); j++){   
 ...
 ...
} 
```

要使第二个循环正常工作，请依赖 i （根据您的逻辑）。

# html - 如何自动调整框的大小以适应内容——使用 jQuery Mobile

> ID：10595512
> 
> 赞同：1
> 
> 时间：2012-05-15T06:48:44.470
> 
> 标签：html, css, jquery-mobile

我正在使用 jQuery Mobile 构建一个 Web 应用程序。

几乎应用程序的每个页面都有一个单独的框，包含页面的内容；目前，这些盒子有一个固定的高度。

我想要的是重新缩放这些框，以便每个框的大小都适合其特定内容。任何人都知道如何做到这一点？

我的 CSS 目前看起来像这样：

```
.ui-grid-g-login {
    overflow: hidden;
    background-color:#FFFFFF;
    margin-right: 10px;
    margin-left: 10px;
    height: 350px;
    padding-top:20px;
    padding-bottom:20px;
    padding-right:30px;
    padding-left:30px;
    border:2px solid;
    border-radius:20px;
} 
```

该类被分配给单个 div：

```
<div class="ui-grid-g-login"> content </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:56:34.857

检查这个：

```
min-height:350px;
height:auto; 
```

# python - 如何在 Windows 上引导 virtualenv？

> ID：10595513
> 
> 赞同：0
> 
> 时间：2012-05-15T06:48:45.343
> 
> 标签：python, virtualenv

我正在设置测试和登台服务器，为 Django 升级项目做准备。在阅读了有关 virtualenv 的信息后，听起来应该可以自动创建安装了正确软件包的环境，例如通过将 pip freeze 的输出通过管道传输到 pip install 中。这似乎适用于大多数软件包，但是，某些软件包不可 pip 安装（在 Windows 上），例如 PIL、pycrypto、MySQLdb、lxml、pymssql、psyco ......我是不是走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:00:53.913

要构建 C 模块，您需要[一个有效的工具链](http://wiki.python.org/moin/Building%20Python%20with%20the%20free%20MS%20C%20Toolkit)。如果您愿意，也可以在 Linux 虚拟机中使用 Python。

# eclipse - Eclipse + JBoss - 一些 JAR 文件未部署

> ID：10595517
> 
> 赞同：5
> 
> 时间：2012-05-15T06:49:33.143
> 
> 标签：eclipse, maven, jboss

我有一个由它管理的 JBoss 6 服务器的 Eclipse Indigo 安装。我有一个带有几个模块的 Maven 项目。这些模块都可以从命令行构建。

其中一个模块是 EAR。这取决于两个 JAR 模块和几个 WAR 模块。当我从命令行（mvn clean package）打包 EAR 时，EAR 包含所有必要的 JAR 和 WAR 文件。但是，当我从 Eclipse 部署它时，JBoss 中缺少两个模块 JAR 文件。WAR 文件很好。在“添加和删除...”对话框中，JAR 文件也存在，但在部署时不存在。我检查了 JBoss 的部署文件夹，它们确实不见了。奇怪的是，使用完全相同的 POM 和代码，我所有具有相同（？）设置的同事都没有这个问题。

这两个 JAR 模块在父 POM 的依赖管理部分中列出。它们也被列为 EAR POM 中的依赖项。尽管如此，Eclipse 拒绝将它们与 EAR 一起部署。

有谁知道我该如何解决这个问题？我可以手动打包和部署 EAR，但是 1) 需要更长的时间，以及 2) 我不能以这种方式使用 Eclipse 的调试功能。

[注意：之前在http://www.coderanch.com/t/580959/vc/Eclipse-JBoss-some-JAR-files](http://www.coderanch.com/t/580959/vc/Eclipse-JBoss-some-JAR-files)询问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-20T13:59:37.787

项目上的鼠标右键 -> Maven -> 更新项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:23:01.110

我遇到了类似的问题，但是我的环境要简单得多——作为一个 web 项目，有一个实用程序项目。根本不使用maven并部署到tomcat7。

尽管引用了实用程序项目并标记为要导出，但类文件并未按预期部署到 web-inf。

但是，由于您的问题，我遇到了这篇文章：

[http://blog.frankel.ch/better-maven-integration-leads-to-unforeseen-consequences-bugs#comments](http://blog.frankel.ch/better-maven-integration-leads-to-unforeseen-consequences-bugs#comments)

这可能会提供一个线索。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-08T16:51:36.103

我遇到了完全相同的问题，不同的日食（Eclipse Mars，WildFly 8.1）。

令人不安的是，我没有更改代码或 IDE 中的任何内容（据我所知），它开始出现故障。

我怀疑它与 eclipse 的插件的缓存内存有关，无论如何，经过数小时尝试不同的事情后，**我们通过在 Windows 中删除用户下的文件夹 .eclipse 来修复它。**

看起来很傻，但我们尝试了除此之外的所有方法，而那件事成功了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T03:52:10.370

我遇到过同样的问题。我根本没有修改我的代码，我从工作空间中删除了所有项目，关闭了eclipse并重新打开它。然后我对项目进行了清理和构建（比以前花费了更长的时间）。这一次，当我去添加 EAR 项目时，它列出了所有依赖项，并且确实有效。

# python - 在 python smtplib 中为 gmail TLS 打开哪个端口

> ID：10595519
> 
> 赞同：0
> 
> 时间：2012-05-15T06:49:36.997
> 
> 标签：python, smtplib

我尝试执行以下操作：

```
import smtplib
smtplib.SMTP("smtp.gmail.com",587) 
```

我得到了错误：`socket.error: [Errno 10060]`

连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

经过一番挖掘，我觉得我的防火墙是罪魁祸首。我试图打开端口`587`（在转发到我的机器的端口上）但仍然没有运气

我需要打开的响应是否有不同的端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:54:25.260

一定是您的机器/网络有问题。我可以毫无问题地连接：

```
In [1]: import smtplib

In [2]: smtplib.SMTP("smtp.gmail.com",587)
Out[2]: <smtplib.SMTP instance at 0x104519d40> 
```

也许是代理问题？

# php - 日期范围数组，不包括 PHP 中的星期日和节假日

> ID：10595524
> 
> 赞同：2
> 
> 时间：2012-05-15T06:49:51.643
> 
> 标签：php, date, date-range

我有一个函数可以返回数组中两个日期之间的所有日期，但我需要在该数组中排除星期日。

```
public function dateRange($first, $last, $step = '+1 day', $format = 'd/m/Y' ) { 
    $dates = array();
    $current = strtotime($first);
    $last = strtotime($last);
    while( $current <= $last ) { 
        $dates[] = date($format, $current);
        $current = strtotime($step, $current);
    }
    return $dates;
} 
```

排除星期日后，我有一个表格，我将在其中存储一些日期，我也需要从数组中排除这些日期。

比如，如果我输入日期范围为 01-05-2012(DD-MM-YYYY) 到 10-05-2012，则 06-05-2012 将是星期日，日期为 01-05-2012 和 08-05- 2012 将在我上面提到的表格中，最终输出应该是这样的，

```
02-05-2012
03-05-2012
04-05-2012
05-05-2012
07-05-2012
09-05-2012
10-05-2012 
```

如何在 PHP 中做到这一点？我尝试了一些，但找不到正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:04:31.977

对于周日部分：

```
public function dateRange($first, $last, $step = '+1 day', $format = 'd/m/Y' ) { 
    $dates = array();
    $current = strtotime($first);
    $last = strtotime($last);
    while( $current <= $last ) { 
        if (date("D", $current) != "Sun")
            $dates[] = date($format, $current);
        $current = strtotime($step, $current);
    }
    return $dates;
} 
```

对于假期部分：

首先，您需要将日期加载到某种数组中，然后循环遍历每个日期的数组并检查它们是否匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:44:32.910

我找到了问题的答案，感谢帮助我的人。

```
public function dateRange($first, $last, $step = '+1 day', $format = 'd/m/Y' ) { 
    $dates = array();
    $current = strtotime($first);
    $last = strtotime($last);
    while( $current <= $last ) {
        $sql = "SELECT * FROM ost_holidays where holiday_date='".date('Y-m-d', $current)."' LIMIT 1";
        $sql = db_query($sql);
        $sql = db_fetch_array($sql);
        if($sql['holiday_date'] != date('Y-m-d',$current))
            if (date('w', $current) != 0)
            $dates[] = date($format, $current);
            $current = strtotime($step, $current);
    }
    return $dates;
} 
```

上面的代码用于删除给定范围内的节假日和星期日。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-27T15:14:09.020

我在 Jquery 中做了同样的上述方法

```
//Convert dates into desired formatt
 function convertDates(str) {
     var date = new Date(str),
         mnth = ("0" + (date.getMonth() + 1)).slice(-2),
         day = ("0" + date.getDate()).slice(-2);
     return [date.getFullYear(), mnth, day].join("-");
 }

 // Returns an array of dates between the two dates
 var getDates = function(startDate, endDate, holidays) {
     var dates = [],
         currentDate = startDate,
         addDays = function(days) {
             var date = new Date(this.valueOf());
             date.setDate(date.getDate() + days);
             return date;
         };
     while (currentDate <= endDate) {
         dates.push(currentDate);
         currentDate = addDays.call(currentDate, 1);
     }
     return dates;
 };
 //Indise Some Function
 var datesTemp = [];
 var dates = getDates(new Date(prodDet.details.date1), new Date(prodDet.details.date2));
 dates.forEach(function(date) {
     if (date.getDay() != 0) {
         datesTemp.push(convertDates(date));
     }
 });
 datesTemp.forEach(function(date) {
     for (var j = 0; j < prodDet.holidays.length; j++) {
         if ((prodDet.holidays[j] != date)) {
             ideal.idates.push(date);
         }
     }
 });
 console.log(ideal.idates);
 //Function Ends Here 
```

# java - java中的动态方法调度

> ID：10595527
> 
> 赞同：2
> 
> 时间：2012-05-15T06:49:58.963
> 
> 标签：java, inheritance, casting

```
class A{
int a=10;   
public void show(){ 
    System.out.println("Show A: "+a);
    }
}

class B extends A{
public int b=20;    
public void show(){
    System.out.println("Show B: "+b);
    }
}

public class DynamicMethodDispatch {

    public static void main(String[] args) {

    A aObj = new A();       
    aObj.show();    //output - 10

    B bObj = new B();
    bObj.show();   //output - 20

    aObj = bObj;   //assigning the B obj to A..         
    aObj.show();  //output - 20 

    aObj = new B();
    aObj.show();  //output - 20
             System.out.println(bObj.b);  //output - 20 
    //System.out.println(aObj.b); //It is giving error

     }
} 
```

在上面的程序中，当我尝试调用**aObj.b 时出现**错误。
1.为什么我无法通过 aObj 访问该变量，尽管它是指 B 类？
2\. 为什么我能够访问方法show()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:00:15.773

您必须区分 的静态**类型**和**运行时**类型。`aObj`**`aObj`**

 **代码如

```
A aObj = new B(); 
```

产生一个`aObj`具有静态类型`A`和运行时类型的变量`B`。

在决定允许或不允许什么时，编译器只会费心查看*静态类型。*

对于您的问题：

> 1.为什么我无法通过 aObj 访问该变量，尽管它是指 B 类？

因为（通常）编译器无法*知道*在运行时`aObj`将引用一个`B`对象，只能知道它将引用某种形式的`A`对象。由于`.b`并非对所有`A`对象都可用，因此编译器会认为*“比抱歉更安全”*并禁止它。

> 2.为什么我能够访问方法show()？

因为这个方法在所有对象中都可用*（*`A`如果没有在子类中声明，它仍然是继承自`A`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:54:04.683

`aObj`是类型的局部变量`A`。`A`没有被调用的成员`b`，那只是在你的子类`B`中。如果你想使用`b`，你需要声明一个 type 的变量`B`，但当然你只能分配它的实例`B`（或子类，如果有的话）。

`A`声明了一个方法`show()`，但是您覆盖了子类中的实现`B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:05:36.517

这种行为被称为`virtual method invocation`，它是 Java 的一个重要方面`polymorphism`。你应该看看这个[教程](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:03:32.660

方法和字段具有不同的多态行为。

将调用的方法是实例的运行时类型的方法

```
aObj=new B(); //new B() 
```

将被调用的字段是您声明的引用类型的字段

```
A aObj = new A(); // A aObj 
```

即使 A 中没有 show() 方法，以下内容也可以使用。

```
aObj = new B();
aObj.show(); //calls B's show() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T07:05:53.363

```
class A{ // class A has variable a and method show();
int a=10;   
public void show(){ 
    System.out.println("Show A: "+a);
    }
}

class B extends A{ //class B inherits variables and methods of A.
   // so class B has variable a, b and show(). Also, show is overridden by class B.
public int b=20;    
public void show(){
    System.out.println("Show B: "+b);
    }
} 
```

1.  因为A里面没有变量b，即使你将B传递给A，你仍然有一个里面没有变量b的对象。所以，尝试访问 b 会给你编译时错误。

2.  在 show() 的情况下，A 和 B 都有这个方法，所以你在这里所做的实际上是在运行时覆盖它。这不过是[多态性](http://www.tutorialspoint.com/java/java_polymorphism.htm)。因此，由于 A 已经有方法 show()，并且稍后被 B 覆盖，

A a = 新 B(); 一场表演（）;

这将在运行时运行 B 的 show() 方法。**

# mysql - 加入以下查询？

> ID：10595528
> 
> 赞同：0
> 
> 时间：2012-05-15T06:49:59.253
> 
> 标签：mysql, sql

我正在执行这两个查询。

1.

```
select widget_uid,param_value as campaign_name
from widget_config_value
where widget_uid in (select widget_uid
                     from widget_config_value
                     where param_name="active"
                           and param_value="1"
                           and widget_uid in (select widget_uid
                                              from partner_widget
                                              where partner_uid=4)
                    )
       and param_name="widgetCampaignName"; 
```

2.

```
select widget_uid,param_value as campaign_type
from widget_config_value
where widget_uid in (select widget_uid
                     from widget_config_value
                     where param_name="active"
                           and param_value="1"
                           and widget_uid in (select widget_uid
                                              from partner_widget
                                              where partner_uid=4)
                    )
      and  param_name="widgetType"; 
```

我怎样才能在 widget_uid 上加入这个？所以，我可以获得常见widget_uid的结果？？

或者有什么办法可以改善上述查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:18:08.600

您可以通过以下方式尝试 -

```
select widget_uid, campaign_name, campaign_type from
(select widget_uid,param_value as campaign_name from widget_config_value 
where widget_uid in 
(select widget_uid from widget_config_value 
where param_name="active" 
and param_value="1" 
and widget_uid in (select widget_uid from partner_widget where partner_uid=4)) 
and param_name="widgetCampaignName") tbl1,
(select widget_uid,param_value as campaign_type 
from widget_config_value 
where widget_uid in 
(select widget_uid 
from widget_config_value 
where param_name="active" 
and param_value="1" 
and widget_uid in (select widget_uid from partner_widget where partner_uid=4)) 
and param_name="widgetType") tbl2
where tbl1.widget_uid = tbl2.widget_uid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:56:19.303

我认为查询不起作用，因为不可能

```
param_name="active" and param_name="widgetCampaignName" 
```

在同一时间。也查询没有。2

查看您的查询

```
select 
    widget_uid,param_value as campaign_name 
from widget_config_value
where 
    widget_uid in (
        select widget_uid 
        from 
            widget_config_value 
        where 
            param_name="active" and 
            param_value="1" and 
            widget_uid in (
                select widget_uid 
                from partner_widget 
                where partner_uid=4)
            ) and
     param_name="widgetCampaignName"; 
```

在这部分

```
select widget_uid 
        from 
            widget_config_value 
        where 
            param_name="active" and 
            param_value="1" and 
            widget_uid in (
                select widget_uid 
                from partner_widget 
                where partner_uid=4)
            ) 
```

给你`widget_config_value`不可能拥有的数据`param_name not equal to "active"`。所以`param_name="widgetCampaignName"`没用。

# json - 为什么 express.js 会生成 JSON.parse 错误？

> ID：10595531
> 
> 赞同：1
> 
> 时间：2012-05-15T06:50:32.597
> 
> 标签：json, node.js, express

我安装了 node.js 和 express.js，我正在尝试使用：

```
var str = { test: 'info'};
obj = JSON.parse(str); 
```

但它会导致错误：**SyntaxError: Unexpected token 0 at Object.parse (native)**

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:56:57.583

你解析`Object`到`Object`？

`JSON.parse()`期望`string`：

```
var str = '{"test": "info"}';
obj = JSON.parse(str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T06:59:25.930

基本上 JSON.parse() 需要字符串，但您正在传递对象，所以改为这样做：

```
var original = { test: 'info'};
var str = JSON.stringify(original);
var restored = JSON.parse(str); 
```

这是关于 JSON 的有用文档[https://developer.mozilla.org/en/Using_native_JSON](https://developer.mozilla.org/en/Using_native_JSON)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T06:57:49.833

str 不是字符串，而是对象。首先将整个东西放入一个字符串中，即：

```
var str = '{ "test": "info"}';
obj = JSON.parse(str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-03T04:55:48.333

express.js 无法自行解析 JSON 对象。尝试使用 body-parser

```
var app = require('express')();
var bodyParser = require('body-parser');
var multer = require('multer'); // v1.0.5
var upload = multer(); // for parsing multipart/form-data

app.use(bodyParser.json()); // for parsing application/json
app.use(bodyParser.urlencoded({ extended: true })); // for parsing application/x-www-form-urlencoded

app.post('/profile', upload.array(), function (req, res, next) {
  console.log(req.body);
  res.json(req.body);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:51:48.170

如果要创建 JSON，则需要使用`JSON.stringify`.

```
var thing = { test: 'info' };
var json = JSON.stringify(thing); 
```

如果要将 JSON 解析为需要使用的对象，请使用`parse`. Parse 希望您使用有效的 JSON。

```
var json = '{ "test": "info" }'; //Use double quotes for JSON
var thing = JSON.parse(json); 
```

测试您是否使用有效 json 的一种简单方法是使用以下内容：http: [//jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-17T06:22:25.350

你调用的东西`str`实际上已经是一个对象。JSON 不是必需的，您只需要纯 JavaScript：

```
var obj = { test: 'info'}; 
```

* * *

```
console.log( JSON.stringify(obj) );  // JSON output 
```

# magento - Magento 分层导航 (Manadev.com) 对可配置产品表现得很奇怪

> ID：10595533
> 
> 赞同：0
> 
> 时间：2012-05-15T06:50:36.100
> 
> 标签：magento, configurable-product, layered-navigation

我正在使用 Manadev SEO Layered Navigation Plus (http://www.manadev.com/seo-layered-navigation-plus) 作为我的分层导航，但它与可配置产品的行为很奇怪。

我的可配置产品仅使用一个属性来创建可配置产品（尺寸）。但是我有一个颜色属性，也用于分层导航（下拉菜单不用于创建配置，因为每个产品都有一种颜色和多种尺寸）。

问题是 Size 属性显示了可配置产品的所有简单内容，即使它们在管理员中被禁用。当您看到产品页面时，禁用的简单组件不会显示，但它们会在分层导航中显示。你认为可能是什么问题？

顺便说一句，我可能在可配置产品及其简单产品中导入了 Color 的值。并且重新索引不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:06:54.983

SEO Layered Navigation Plus 扩展依赖于标准的 Magento 功能，该功能准备用于分层导航的特殊索引表（并决定在选择选项时应显示哪些产品）。不幸的是，此功能在为可配置产品准备索引表时并未考虑简单产品的数量。

标准 Magento 分层导航也有同样的问题，因为它依赖于相同的索引。

没有快速解决办法。我们考虑改变 Magento 索引功能来解决这个问题。

为了让您了解此问题，请通过 www.manadev.com 网站与我们联系。

# perl - 通过 perl 脚本登录亚马逊帐户

> ID：10595534
> 
> 赞同：0
> 
> 时间：2012-05-15T06:50:38.027
> 
> 标签：perl, amazon

我正在尝试通过 perl 脚本将计算机上的书籍直接添加到我的亚马逊帐户中。有谁知道如何实现这一点。我找不到任何 api 或任何使这项任务更简单的 cpan 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:26:22.647

看起来您可能想要[Net::Amazon::RemoteCart](https://metacpan.org/module/Net%3a%3aAmazon%3a%3aRemoteCart)。

**更新：**从下面的评论来看，您似乎不想将一本书添加到购物车，而是添加到您的 Kindle 帐户。

我认为最简单的方法可能是将这本书通过电子邮件发送到您的 Kindle 地址。

下次您想询问有关 Kindle 的问题时，最好包含“Kindle” :-)

# mongodb - Mongoid/mongodb 索引

> ID：10595535
> 
> 赞同：0
> 
> 时间：2012-05-15T06:50:38.307
> 
> 标签：mongodb, mongoid

我正在使用 mongodb/mongoid 实现一个 ruby​​ on rails 应用程序，我对更好的索引/搜索结构有点困惑。我`staff`在模型中有一个字段，工作人员可以是任何一种类型 - 生产、经纪人、办公室。每个员工都是一个`Person`。每种类型可以有多个员工。

所以我有两种方法：

1）。制作`staff as an array`和储存它

> `[{:key => 'broker', :name => "Broker Name", :person_id => "654978"},
> {:key => 'office', :name => "Office Staff 1", :person_id => "564654"},
> {:key => 'office', :name => 'another office', :person_id => '79878'}]`

2）。Make 是 a`Hash`并且 store 是 as
`{:brokers => [{:person_id => 2134, :name => 'Broker 1'}],
:office =>> [{:person_id => 2131, :name => 'Office 1'}, {:person_id => 1231, :name => 'Office 2'}]}`

我想为这些文档编制索引，并且应该能够搜索诸如 office = '465456' 之类的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:31:07.603

如果将其存储为哈希，则需要多个索引。因为您必须为散列中的每个键索引办公室名称。如果将其存储为数组，则只需要 1 个索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T18:30:04.367

看起来您真的想存储*多个*索引；@bjartek 是对的，您需要将这些存储为数组：

```
class Office
  include Mongoid::Document
  embeds_many :people, as: :staff

  # unsure for polymorphic embeds; perhaps this needs 'staff.name'
  index "people.name"
  index "people.person_id"
  index "people.key"
end 
```

[http://mongoid.org/docs/indexing.html](http://mongoid.org/docs/indexing.html)

# c# - System.Web.HttpContext 无法识别

> ID：10595543
> 
> 赞同：34
> 
> 时间：2012-05-15T06:51:14.967
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个带有 C# Web 应用程序的 ASP.NET。我创建的其中一个类需要使用 HttpContext。

根据[http://msdn.microsoft.com/en-us/library/system.web.httpcontext(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext(v=vs.90).aspx)， HttpContext 存在于 .NET 3.5 的 System.Web 命名空间中（这是版本我已经安装）。

但是，当我写 HttpContext. --> 我没有看到自动完成。这就是告诉我 HttpContext 无法识别的原因。

我做了功课并寻找常用的解决方案： 1\. 我添加了 System.Web 参考（通过右键单击参考 -> 选择 .NET 选项卡和特定参考）。2\. 我还确保在课程中包含这一行：using System.Web；

请告诉我我还能做什么。如果一切顺利，当我写 HttpContext. - 我应该看到一个下拉列表，并能够从那里的几个属性/元素中选择“当前”。我是 C# 和 Visual Studio (2008) 的新手，但我认为自动完成功能不能很好地表明缺少引用/命名空间/加载错误/其他任何东西。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-15T07:41:31.553

当您要实例化**HttpContext** 类时，很少使用构造函数。我总是使用静态属性**HttpContext.Current**，它是所有 ASP.Net 应用程序使用的当前实例。

要使用它，请确保您已经添加了对 System.Web.dll 程序集的引用并导入**System.Web**命名空间

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T12:12:13.047

这是一个没有使用正确框架的简单案例，我的意思是完整的胖版本而不是默认的“轻”版本。

右键单击项目，然后单击属性并确保选择了最新框架的完整版本，即“.NET Framework 4”，*而不是*“.NET Framework 4 Client Profile”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T07:27:22.103

1.  Make sure the assembly is included
2.  Make sure the reference for the dll is there
3.  Try "resolve" and have the Visual Studio include the reference
4.  Debug, close and restart the application.

This class should work.

UPDATE:

```
using System.Web

class YourClass {
  public YourClass() {
    HttpContext _context = new HttpContext(your parameters)
  }
} 
```

# javascript - 我已设置 services.sync.prefs.sync.dom.disable_window_move_resize;false 但 resizeTo() 仍然不起作用

> ID：10595547
> 
> 赞同：1
> 
> 时间：2012-05-15T06:51:19.197
> 
> 标签：javascript, html, firefox

我使用 Aurora 14.0a2 作为我的默认浏览器（它是 firefox 的早期版本）我进入了我的 about:config 并更改了 services.sync.prefs.sync.dom.disable_window_move_resize 的值；为假然而，当我运行我的网站时，resizeTo(); 功能仍然不起作用

这是我的代码： [jsfiddle_link](http://jsfiddle.net/fiddlerOnDaRoof/ZVmpn/2/)

```
function onload(){
    window.resizeTo(600,800);
} 
```

我还在其他浏览器中尝试过：Chrome（难怪它不起作用，因为 chrome 从不支持它）opera IE 8 Safari

没有一个有效

我还尝试从另一个网站链接我的网站然后点击它，但它没有成功

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:03:37.117

我认为 javascript 的调整大小功能仅在您在弹出窗口上打开它时才起作用，而不是在您在主浏览器窗口上打开它时尝试检查此链接[http://www.javascripter.net/faq/windowresizeto.htm](http://www.javascripter.net/faq/windowresizeto.htm)它有我认为对你有帮助的样本。

# database-design - 对于前端和后端分离的网站，管理员和用户记录是否应该存储在同一个表中？

> ID：10595549
> 
> 赞同：0
> 
> 时间：2012-05-15T06:51:27.320
> 
> 标签：database-design, admin, record

我有 2 个独立的部分：前端和后端及其登录页面。前端是供用户注册并使用他们的东西做某事的。后端供管理员管理资源。有人告诉我，如果我们想将普通用户提升为管理员角色，如果我使用 1 个表会更方便。但是，例如，我想创建一个新的管理员，我必须依次填写普通用户需要注册的所有相关详细信息。这太浪费时间了。

您认为在一般情况下以及在我的情况下将管理员和用户记录存储在一个表中是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:55:35.177

是的，您可以将它们都存储在同一个表中，并为管理员用户添加一列，如“Y”“N”的 isAdmin 以避免填充用于普通用户的所有字段。

# c# - 无法将 XML 反序列化为对象

> ID：10595551
> 
> 赞同：2
> 
> 时间：2012-05-15T06:51:45.790
> 
> 标签：c#, .net, xml-serialization

我在反序列化从 Web 服务收到的 XML 响应时遇到问题。响应如下所示：

```
<CreateSubscribersResultCollection xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <CreatedSubscriberIds xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
        <a:long>206464306</a:long>
        <a:long>306664316</a:long>
    </CreatedSubscriberIds>
    <FailedCreatedSubscribers xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
</CreateSubscribersResultCollection> 
```

我用来反序列化 XML 的代码如下所示：

```
internal T GetQueuedResults<T>(string url)
{
    WebRequest request = GetRequestObject(url, "GET");
    var httpResponse = (HttpWebResponse)request.GetResponse();

    using (var responseStream = httpResponse.GetResponseStream())
    {
        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));
        var response = (T)xmlSerializer.Deserialize(responseStream);

        return response;
    }
} 
```

当我反序列化（传递 type `CreateSubscribersResultCollection`）时，我根本没有收到**任何错误**，而是`CreatedSubscriberIds`长度为`0`. 我很确定错误在于我设计`CreateSubscribersResultCollection`课程的方式，但我无法弄清楚错误可能是什么。该类如下所示：

```
[DataContract]
public class CreateSubscribersResultCollection : RequestBase
{
    [XmlArray("CreatedSubscriberIds")]
    [XmlArrayItem(typeof(long))]
    public List<long> CreatedSubscriberIds { get; set; }

    [XmlElement("FailedCreatedSubscribers")]
    public string FailedCreatedSubscribers { get; set; }
} 
```

当我实例化该类并对其进行序列化时，出于调试目的，我得到以下结果：

```
<CreateSubscribersResultCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <CreatedSubscriberIds>
        <long>206464306</long>
        <long>306664316</long>
    </CreatedSubscriberIds>
    <FailedCreatedSubscribers />
</CreateSubscribersResultCollection> 
```

我希望有人知道我做错了什么。我一直在努力反对这个问题太久了，谷歌对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:45:56.840

尝试像这样指定命名空间：

```
 [DataContract]
public class CreateSubscribersResultCollection : RequestBase
{
    [XmlArray("CreatedSubscriberIds")]
    [XmlArrayItem(typeof(long), Namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays")]
    public List<long> CreatedSubscriberIds { get; set; }

    [XmlElement("FailedCreatedSubscribers")]
    public string FailedCreatedSubscribers { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:46:55.823

确保`GetResponseStream()`其中有数据。要测试尝试将其保存到文件中，而不是进行网络连接。将其保存到数据文件并反序列化。如果它正在被连载，那是大部分的战斗。如果正确序列化，反序列化应该不是问题。

# c# - 线程在 C# 中突然停止工作

> ID：10595555
> 
> 赞同：0
> 
> 时间：2012-05-15T06:51:56.773
> 
> 标签：c#, .net, multithreading, tcp

我有一个多线程应用程序 ( `TCPListener`)。如果请求在列表中可用，则有一个线程查看请求列表并发送数据。代码如下所示：

```
private void HandleClientRequestsTask()
{
    try
    {
        while (true)
        {
            if (ClientRequests.Count > 0)
            {
                ClientRequest ActiveClientRequest = ClientRequests.First();

                int DataLen = ActiveClientRequest.CommPacket.PacketStr.Length;
                int TxDataLen = 0;

                try
                {
                    TxDataLen = ActiveClientRequest.CommPacket.TCPClient.Client.Send(ConvertPacketToRawData(ActiveClientRequest.CommPacket.PacketStr));
                }
                catch (Exception ex)
                {
                    AddLog(LogIndex.TCPClientNotExist, ex.ToString());
                }

                if (DataLen != TxDataLen)
                    AddLog(LogIndex.TCPClientDataSendErr, ActiveClientRequest.CommPacket.TCPClient.Client.RemoteEndPoint.ToString(), ActiveClientRequest.CommPacket.CmdType, ActiveClientRequest.CommPacket.RXDevID.ToString());

                ClientRequests.Remove(ActiveClientRequest);
            }

            Thread.Sleep(HANDLE_CLIENT_REQ_TASK_SLEEP_VALUE);
        }
    }
    catch (Exception ex)
    {
        AddLog(LogIndex.UnhException, ex.ToString());
    }
} 
```

*我想*，上面的线程突然停止了。当我在线上放置一个调试点时`if (ClientRequests.Count > 0)`，程序不会停止，断点也不会被命中。当我暂停调试并查看线程窗口时，没有看到线程。

你认为问题出在哪里？我认为，线程随时停止运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:21:33.337

如果您确实需要两个 try-catch 块，请将外部 try-catch 移动到 while 循环内。

> 我知道它开始了，因为我在客户端看到了一些数据。如果捕获到异常，是否有可能停止线程？

是的，如果它跳转到外部 catch 块线程将不再执行 while 循环。

# php - Facebook Like 自定义个人资料 URL PHP

> ID：10595556
> 
> 赞同：1
> 
> 时间：2012-05-15T06:52:06.367
> 
> 标签：php, facebook, profile

制作一个网站，我想为我网站上的所有用户（如 facebook）输入一个自定义配置文件 URL。

在我的网站上，人们已经有了一个类似[http://sitename.com/profile.php?id=100224232的页面](http://sitename.com/profile.php?id=100224232)

但是，我想为那些与其用户名相关的页面制作一个镜像。例如，如果你去[http://sitename.com/profile.php?id=100224232](http://sitename.com/profile.php?id=100224232)它会重定向到你[http://sitename.com/myprofile](http://sitename.com/myprofile)

我将如何使用 PHP 和 Apache 进行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T06:55:13.680

没有文件夹，没有 index.php

看看这个[教程](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)。

**编辑：** 这只是一个摘要。

## 0) 上下文

我假设我们需要以下 URL：

> [http://example.com/profile/userid](http://example.com/profile/userid)（通过 ID 获取配置文件）
> [http://example.com/profile/username](http://example.com/profile/username)（通过用户名获取配置文件）
> [http://example.com/myprofile](http://example.com/myprofile)（获取当前登录用户的个人资料）

## 1) .htaccess

在根文件夹中创建一个 .htaccess 文件或更新现有文件：

```
Options +FollowSymLinks
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php 
```

*那有什么作用？*

如果请求是针对真实目录或文件（存在于服务器上的），则不提供 index.php ，否则每个 url 都会重定向到**index.php**。

## 2) 索引.php

现在，我们想知道要触发什么动作，所以我们需要读取 URL：

在 index.php 中：

```
// index.php    

// This is necessary when index.php is not in the root folder, but in some subfolder...
// We compare $requestURL and $scriptName to remove the inappropriate values
$requestURI = explode(‘/’, $_SERVER[‘REQUEST_URI’]);
$scriptName = explode(‘/’,$_SERVER[‘SCRIPT_NAME’]);

for ($i= 0; $i < sizeof($scriptName); $i++)
{
    if ($requestURI[$i] == $scriptName[$i])
    {
        unset($requestURI[$i]);
    }
}

$command = array_values($requestURI); 
```

使用 URL [http://example.com/profile/19837](http://example.com/profile/19837)， $command 将包含：

```
$command = array(
    [0] => 'profile',
    [1] => 19837,
    [2] => ,
) 
```

现在，我们必须发送 URL。我们在 index.php 中添加：

```
// index.php

require_once("profile.php"); // We need this file
switch($command[0])
{
    case ‘profile’ :
        // We run the profile function from the profile.php file.
        profile($command([1]);
        break;
    case ‘myprofile’ :
        // We run the myProfile function from the profile.php file.
        myProfile();
        break;
    default:
        // Wrong page ! You could also redirect to your custom 404 page.
        echo "404 Error : wrong page.";
        break;
} 
```

## 2）profile.php

现在在 profile.php 文件中，我们应该有这样的内容：

```
// profile.php

function profile($chars)
{
    // We check if $chars is an Integer (ie. an ID) or a String (ie. a potential username)

    if (is_int($chars)) {
        $id = $chars;
        // Do the SQL to get the $user from his ID
        // ........
    } else {
        $username = mysqli_real_escape_string($char);
        // Do the SQL to get the $user from his username
        // ...........
    }

    // Render your view with the $user variable
    // .........
}

function myProfile()
{
    // Get the currently logged-in user ID from the session :
    $id = ....

    // Run the above function :
    profile($id);
} 
```

## 总结

我希望我足够清楚。我知道这段代码不漂亮，也不是 OOP 风格，但它可以提供一些想法......

# c++ - 这是复制构造函数省略吗？

> ID：10595558
> 
> 赞同：2
> 
> 时间：2012-05-15T06:52:13.540
> 
> 标签：c++, optimization, constructor, copy-elision

以下代码不调用复制构造函数。

```
struct X
{
   int x;
   X(int num)
   {
      x = num;
      std::cout << "ctor" << std::endl;
   }
   X(const X& other)
   {
      std::cout << "copy ctor" << std::endl;
   }
};

int main(int argc, _TCHAR* argv[])
{
   X* x = new X(3);
   X* y(x);
} 
```

输出：

```
ctor 
```

是copy-ctor省略吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T06:53:02.027

编码

```
X* x = new X(3);
X* y(x); 
```

不一样

```
X x(3);
X* y = new X(x); 
```

**您不是在复制对象，而是在复制指针。**之后`X* y(x);`，两个指针都指向同一个对象。

# postgresql - Postgresql 数据库链接

> ID：10595560
> 
> 赞同：0
> 
> 时间：2012-05-15T06:52:33.157
> 
> 标签：postgresql, dblink

看例子时试图偷懒

```
SELECT realestate.address, realestate.parcel, s.sale_year, s.sale_amount, 
        FROM realestate INNER JOIN 
                dblink('dbname=somedb port=5432 host=someserver 
                user=someuser password=somepwd',
                'SELECT parcel_id, sale_year, 
                    sale_amount FROM parcel_sales')
            AS s(parcel_id char(10),sale_year int, sale_amount int) 
```

有没有办法从表格中填写 AS 部分？

我正在从不同服务器上具有相同名称和结构的表中复制数据。如果我可以从现有表中复制结构，它将为我节省很多时间

谢谢布鲁斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:01:05.807

答案是：不。请参阅文档：

> 由于 dblink 可用于任何查询，因此声明它返回记录，而不是指定任何特定的列集。这意味着**您必须**在调用查询中指定预期的列集——否则 PostgreSQL 将不知道会发生什么。

[http://www.postgresql.org/docs/9.1/static/contrib-dblink-function.html](http://www.postgresql.org/docs/9.1/static/contrib-dblink-function.html)

* * *

编辑：顺便说一句，对于表或视图，您可以获取字段名称并在第一个查询中键入：

```
select column_name 
from information_schema.columns
where table_name = 'your_table_or_view'; 
```

然后，您可以使用它来填写字段声明。

亚历克西斯

# ekevent - NSKeyedUnarchiver unarchiveObjectWithData 转换问题

> ID：10595567
> 
> 赞同：1
> 
> 时间：2012-05-15T06:53:02.417
> 
> 标签：ekevent

我正在使用以下代码转换`NSArray` `EKEvent`为，`NSData`转换`NSData`为. 转换时，对象被更改并保存该值。`unarchiveObjectWithData``NSArray``null`

为什么会显示 **`NULL`**。（请参阅输出）。任何知道解决方案的人告诉我。提前致谢。

我写的代码，

```
NSArray *events = [[self.eventStore eventsMatchingPredicate:predicate]retain];

NSData *arrayData = [NSKeyedArchiver archivedDataWithRootObject:events];

NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithData:arrayData]; 
```

输出是

> 事件：（“EKEvent <0x4ad840> {EKEvent <0x4ad840> {title =**检查日历**；日历 = EKCalendar <0x4bf2f0> {title = 日历；类型 = 本地；帐户 =（空）；allowsMo​​dify = YES；颜色 = 0.443137 0.101961 0.462745 1.000000}; 警报 = (\n \"EKAlarm <0x4be630> {triggerInterval = -300.000000}\"\n); URL = (null); lastModified = 2012-05-14 12:15:32 +0000}; 位置 = (null); startDate = 2012-05-11 01:30:00 +0000; endDate = 2012-05-19 17:30:00 +0000; allDay = 0; float = 0; 重复 = (null); 参加者 = (null)}" )
> 
> 数组: ( "EKEvent <0x4c1e60> {EKEvent <0x4c1e60> {title = ( **null**); 日历 = (null); 警报 = (null); URL = (null); lastModified = (null)}; 位置=（空）；开始日期 = (null); endDate = (null); allDay = 0; 浮动 = 1; 复发=（空）；参加者 = (null)}" )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:56:18.530

最后通过创建自定义 EKEvent 类并获取每个值（如标题、开始日期、结束日期）到 NSCoding 来解决。然后它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:42:05.887

虽然`NSArray`确认`NSCoding`协议，`EKEvent`但不确认。运行代码时没有出现异常，这有点令人惊讶，该类必须确认`NSCoding`存档才能工作。

# rss - RSS atom:link - 自引用与文档位置不匹配

> ID：10595570
> 
> 赞同：3
> 
> 时间：2012-05-15T06:53:13.797
> 
> 标签：rss, rss2

我正在尝试创建一些有效的 RSS 2.0 数据，但无法让“atom:link”进行验证。

是因为我还没有完成页面，还是因为我有一些无效的格式？

```
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
<channel>
<atom:link href="http://www.lasseedsvik.se/rss" rel="self" type="application/rss+xml" />
<title>Test Test</title>
<link>http://www.lasseedsvik.se/rss</link>
<description>test</description>
<language>sv-se</language>
<item>
<title>test</title>
<link>
http://www.lasseedsvik.se/123
</link>
<guid>
http://www.lasseedsvik.se/123
</guid>
<description>
<![CDATA[test]]>
</description>
</item>
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:34:13.833

验证器错误页面的链接将有助于您进行调试。

但我认为您可能需要将版本放在 nanemspace 声明之前，如下所示：

```
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"> 
```

验证器可能还想查看 XML 序言。也许您有一个，只是没有在您的示例中包含它。

请注意，没有验证器是完美的。例如，在 feedvalidator.org 上的那个，对完全有效的提要表示不满，这些提要没有实现验证器创建者定义的“最佳实践”。因此，最重要的是确保您的提要是有效的 XML，然后确保它符合[RSS 2.0 规范](http://cyber.law.harvard.edu/rss/rss.html)。

# iphone - 如何知道应用程序是否已安装在 ios 设备上？

> ID：10595573
> 
> 赞同：0
> 
> 时间：2012-05-15T06:53:25.040
> 
> 标签：iphone, objective-c, ios, ipad, in-app-purchase

有什么方法可以识别该用户正在再次安装我的应用程序？实际上，在我的应用程序中，我有一个功能用户可以免费翻译一些单词，但之后他必须付费。我正在使用相同的应用程序购买。但是如果用户删除应用程序并重新安装怎么办？他将能够再次免费翻译。如何知道该设备上之前安装了应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:01:02.017

应用程序进入 App Store 进行应用内购买。如果用户已经购买了该商品，它会返回 true 以响应您的请求。用户不会每次都再次付款。

![图表](../Images/249a1ce89601531dc1896a71c9711bc4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:15:31.807

正如您提到的，应用内购买的一些实现使用钥匙串来记录购买标志或免费赠品标志。

[此](http://useyourloaf.com/blog/2010/3/29/simple-iphone-keychain-access.html)博客条目将向您展示如何存储和检索钥匙串中的内容。

在我看来，这种方法确实不适合沙盒应用程序的原则，所以我希望它会被 Apple 和纯粹主义者所反对，但如果你搜索 SO，那么你会发现其他与应用程序购买和使用钥匙串相关的帖子。

请参阅[此](https://stackoverflow.com/q/4978852/741626)答案，因为它似乎在该主题上非常明确。

# proxy - 透明代理的 IPTables 配置

> ID：10595575
> 
> 赞同：5
> 
> 时间：2012-05-15T06:53:30.740
> 
> 标签：proxy, iptables

我很困惑为什么我的 IPTable 在路由器中不起作用。我正在尝试做的是将任何数据包从源 ip 发往端口 80 和 443 重定向到 192.168.1.110:3128。但是当我尝试这个时：

```
 iptables -t nat -A PREROUTING -s 192.168.1.5 -p tcp --dport 80:443 -j DNAT --to-destination 192.168.1.110:3128 
```

不起作用。但是当我添加这个时，

```
iptables -t nat -A POSTROUTING-j MASQUARADE 
```

有用。但伪装的问题是我没有得到真实的IP，而是路由器的IP。我需要获取源 ip，以便我的代理服务器可以记录连接到它的所有 ip。有人可以告诉我如何在不使 POSTROUTING 跳转到 Masquarade 的情况下使其工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:57:17.227

如果我没记错的话，规则的正确语法是：

```
iptables -t nat -A PREROUTING -s 192.168.1.5 -p tcp -m multiport --dports 80,443 -j DNAT --to-destination 192.168.1.110:3128 
```

`--dport 80:443`将转发从 80 到 443 的所有端口
`--dports 80,443`将仅转发端口 80 和 443。

如果您希望在端口 80 和 443 上访问 192.168.1.5 的流量被转发到 192.168.1.110 的 3128 端口，那么您应该使用以下规则：

```
iptables -t nat -A PREROUTING -d 192.168.1.5 -p tcp -m multiport --dports 80,443 -j DNAT --to-destination 192.168.1.110:3128 
```

您还应该确保 192.168.1.110 上的网关指向您的路由器 ip。

最后，您可以使用以下伪装规则。

`iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth1 -j MASQUERADE`

eth1 应该是您的传出接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-25T00:45:24.730

对于**真正的透明代理，您需要使用 TPROXY 目标**（在 mangle 表中，PREROUTING 链中）。所有其他 iptables 机制，如任何 NAT、MASQUERADE、REDIRECT 都会重写数据包的 IP 地址，这使得无法找出数据包最初的目标位置。

代理程序必须像任何其他服务器一样在套接字上绑定（）和监听（），但需要一些特定的套接字标志（这需要一些 Linux 功能（权限类型）或 root）。– 连接后，可以通过某种方式从操作系统获取“预期服务器”。

抱歉，我对细节有点懒，但是搜索“TPROXY”作为关键字会让你快速上手！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T15:39:56.277

我遇到了同样的问题，解决方案是告诉透明代理在正确的标头字段中转发源 ip。在我的 nginx 代理的情况下，规则接近：

```
location / {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $host;
    proxy_set_header X-NginX-Proxy true;
    proxy_pass http://name_of_proxy;
    proxy_redirect off;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T22:27:28.787

我使用了`iptables -t nat -A PREROUTING -p tcp -s foreign ip to your device --dport 80:443 -j DNAT --to-destination your application or local ip:port`。我认为您在设备中预先路由了从未连接到端口 80 或 443 的数据包，这些是用于 Web 服务器连接到设备的。192.168.1.5 就像我的本地地址。

并记得配置`echo 1 > /proc/sys/net/ipv4/ip_forward`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T12:00:27.953

我认为您通过不指定接口来双向进行 NAT。尝试添加`-o eth0`到您的`-j MASQUERADE`行。`eth0`（根据您的设置，替换您的“外部”接口，而不是。）

# html - 调整浏览器窗口大小会干扰页面流

> ID：10595577
> 
> 赞同：1
> 
> 时间：2012-05-15T06:53:45.187
> 
> 标签：html, css

我已将 css 应用于我的页面，当浏览器最大化时它看起来不错，但是每当我减小浏览器窗口的大小时，元素的流动就会受到干扰：

**示例：http: [//jsfiddle.net/rTjyV/](http://jsfiddle.net/rTjyV/)**

我的代码如下：

**CSS**

```
body{
   background:#eff3f6;
   border: 1px solid #C3D4DB;
}
.content{margin-top:1px;
    margin-right:200px;
    margin-left:200px;
    background:#fefefe;}
.box
{
    background:#fefefe;
    border: 1px solid #C3D4DB;
    border-top:1px;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
    -moz-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    -webkit-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    color:#444;
    font:normal 12px/14px Arial, Helvetica, Sans-serif;
    margin:0 auto 30px ;
    width:auto;
}
.box.login
{
    height:260px;
    width:332px;
    position:absolute;
    left:50%;
    top:50%;
    margin:-130px 0 0 -166px;
}
.boxBody
{
    background:#fefefe;
    border-top:1px solid #dde0e8;
    border-bottom:1px solid #dde0e8;
    padding:10px 20px;
}

.box footer
{
    background:#eff4f6;
    border-top:1px solid #fff;
    padding:22px 26px;
    overflow:hidden;
    height:32px;
}
.box label
{
    display:block;
    font:14px/22px Arial, Helvetica, Sans-serif;
    margin:10px 0 0 6px;
}
.box footer label{
    float:left;
    margin:4px 0 0;
}
.box footer input[type=checkbox]{
    vertical-align:sub;
    *vertical-align:middle;
    margin-right:10px;
}
.box input[type=text],
.box input[type=password],
.txtField, textarea,
.cjComboBox,select
{
    border:6px solid #F7F9FA;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;
    border-radius:3px;
    -moz-box-shadow:2px 3px 3px rgba(0, 0, 0, 0.06) inset, 0 0 1px #95a2a7 inset;
    -webkit-box-shadow:2px 3px 3px rgba(0, 0, 0, 0.06) inset, 0 0 1px #95a2a7 inset;
    box-shadow:2px 3px 3px rgba(0, 0, 0, 0.06) inset, 0 0 1px #95a2a7 inset;
    margin:3px 0 4px;
    padding:8px 6px;
    width:270px;
    display:inline;
}
.box input[type=text]:focus,
.box input[type=password]:focus,
.txtField:focus, textarea:focus,
.cjComboBox:focus, select:focus
{
    border:6px solid #f0f7fc;
    -moz-box-shadow:2px 3px 3px rgba(0, 0, 0, 0.04) inset, 0 0 1px #0d6db6 inset;
    -webkit-box-shadow:2px 3px 3px rgba(0, 0, 0, 0.04) inset, 0 0 1px #0d6db6 inset;
    box-shadow:2px 3px 3px rgba(0, 0, 0, 0.04) inset, 0 0 1px #0d6db6 inset;
    color:#333;
}
.cjComboBox, select
{
    width:294px;
}
.cjComboBox.small, select.small
{
    padding:3px 2px 3px 6px;
    width:100px;
    border-width:3px !important;
}
.txtField.small,textarea:small
{
    padding:3px 6px;
    width:200px;
    border-width:3px !important;
}

.rLink{padding:0 6px 0 0; font-size:11px; float:right;}
.box a{color:#999;}
.box a:hover, .box a:focus{text-decoration:underline;}
.box a:active{color:#f84747;}
.btnLogin
{
    -moz-border-radius:2px;
    -webkit-border-radius:2px;
    border-radius:15px;
    background:#a1d8f0;
    background:-moz-linear-gradient(top, #badff3, #7acbed);
    background:-webkit-gradient(linear, left top, left bottom, from(#badff3), to(#7acbed));
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#badff3', EndColorStr='#7acbed')";
    border:1px solid #7db0cc !important;
    cursor: pointer;
    padding:11px 16px;
    font:bold 11px/14px Verdana, Tahomma, Geneva;
    text-shadow:rgba(0,0,0,0.2) 0 1px 0px; 
    color:#fff;
    -moz-box-shadow:inset rgba(255,255,255,0.6) 0 1px 1px, rgba(0,0,0,0.1) 0 1px 1px;
    -webkit-box-shadow:inset rgba(255,255,255,0.6) 0 1px 1px, rgba(0,0,0,0.1) 0 1px 1px;
    box-shadow:inset rgba(255,255,255,0.6) 0 1px 1px, rgba(0,0,0,0.1) 0 1px 1px;
    margin-left:12px;
    float:right;
    padding:7px 21px;
}

.btnLogin:hover,
.btnLogin:focus,
.btnLogin:active{
    background:#a1d8f0;
    background:-moz-linear-gradient(top, #7acbed, #badff3);
    background:-webkit-gradient(linear, left top, left bottom, from(#7acbed), to(#badff3));
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#7acbed', EndColorStr='#badff3')";
}
.btnLogin:active
{
    text-shadow:rgba(0,0,0,0.3) 0 -1px 0px; 
}
footer#main{
    position:relative;
    left:0;
    bottom:10px;
    text-align:center;
    font:normal 11px/16px Arial, Helvetica, sans-serif;
    width:100%;
}
menuli{
    background: none;
    width: auto;
    height: auto;
    float: none;

    float: none;
    width: auto;
    line-height: 50px;
    background: none;
    text-align: none;
    font-family: Arial, Verdana, Helvetica, sans-serif;
    font-size: 16px;
    color: #fff;
    list-style-type: none;

    width: auto;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 15px;
    color: #fff;
    float: none;
    list-style: none;
    text-decoration: none;
    display: none;
} 
```

**HTML**

```
<body>

<table width="100%" height="100%" border="0" align="center"
    cellpadding="0" cellspacing="0" bgcolor="#63B8FF">
        <tr>
            <td width="40%" align="justify"><img
                src="/traineeApp/images/Yell.jpg"
                style="float: left; position: relative;" alt="Yell Adworks"
                title="Yell Adworks" height="50px" /></td>
            <td width="30%" style="text-align: center;vertical-align: middle;">
                <h2>
                    <font color=#ffffff >Trainning Information&nbsp;System</font>
                </h2>
            </td >

            <td width="30%" align="center" style="text-align: center;vertical-align: bottom;">Welcome,&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;&nbsp;<a
                href="/traineeApp/logout.htm"><span style="text-decoration: underline;">Logout</span></a>
            </td>
        </tr>
    </table>

<div class="content" >
<div id="content" style="position:absolute;">
<div id="navigation" >
    <div id="nav-lt-curve"><img src="/traineeApp/css/blue-images/blue-lt-curve.png" alt="" width=auto; height="50" /></div>

  <div id="navigation-mid" style="width: auto;">
    <ul style="width: auto;" id="nav">
        <li style="width: 175px; background:none;"><a href="/traineeApp/DashBoard/dashBoard.htm">DashBoard</a></li>
        <li style="width: 170px; background:none;"><a href="/traineeApp/CreateTraining/training.htm">Create Training</a></li>
        <li style="width: 170px; background:none;"><a href="/traineeApp/CreateFeedBack/feedback.htm">Create FeedBack</a></li>
        <li style="width: 170px; background:none;"><a href="/traineeApp/JasperReports/reports.htm">Reports</a></li>
        <li style="width: 164px; background:none; display: inline;"><a href="/traineeApp/Customized/customizedproperties.htm">Options</a>

        </li></ul>
   </div>
<div id="nav-rt-curve">
    <img src="/traineeApp/css/blue-images/blue-rt-curve.png" alt="" width="14" height="50" />
</div>
  </div>
  </div>

<br /><br /><br />

<form id="commonBean" action="submit.htm" method="post">

                <div class="content" align="center">
                <div class="box">
                    <br>
                    <h2>
                        <label>Training Creation</label></h2>
                        <label>(<span style="font-style: italic;color: red;">*</span> Mandatory Fields)</label>

                    <hr>

                        <table>

                        <tr><td>

                        <label><span style="font-style: italic;color: red;">*</span>Training Name: </label>
                        </td><td>
                        <input id="trainingName" name="trainingName" type="text" value=""/>
                        <span style="font-style: italic;color: red;"></span>
                        </td></tr>

                        <tr><td>
                        <label><span style="font-style: italic;color: red;">*</span>Training Type: </label>
                        </td>
                        <td>
                        <select id="trainingtype" name="trainingtype">
                            <option value="">--Select--</option>
                            <option value="internal">Internal</option>

                            <option value="External">External</option>
                        </select>
                        <span style="font-style: italic;color: red;"></span>

                    </td></tr>
                    <tr><td>
                        <label><span style="font-style: italic;color: red;">*</span>Department Name: </label>
                        </td>

                        <td>
                        <select id="departmentName" name="departmentName"><option value="">--Select--</option>
                         </select>
                    <span style="font-style: italic;color: red;"></span>
                    </td></tr>
                    <tr><td>
                        <label>Trainer Name: </label>
                        </td>

                        <td>
                        <select id="trainerName" name="trainerName"><option value="">--Select--</option>

                     --%>
                        </select>
                        <span style="font-style: italic;color: red;"></span>
                    </td></tr>
                    <tr><td>
                        <label>Group Name: </label>

                        </td>
                        <td>
                        <select id="group" name="group"><option value="">--Select--</option>
                         </select>
                        <span style="font-style: italic;color: red;"></span>
                    </td></tr>
                    <tr><td>
                        <label><span style="font-style: italic;color: red;">*</span>Starting Date: </label>

                        </td><td>
                        <input id="trFrom" name="trFrom" type="text" value=""/>
                        <span style="font-style: italic;color: red;"></span>
                        </td></tr>
                    <tr><td>
                        <label><span style="font-style: italic;color: red;">*</span>Ending Date: </label>
                        </td><td>
                        <input id="trEnd" name="trEnd" type="text" value=""/>

                        <span style="font-style: italic;color: red;"></span>
                        </td></tr>
                        <tr><td>
                    </table>
                <br>

            <input type="submit" value="Submit" class="btnLogin" style="align:center; float:none;"/>
            <input type="button" value="Reset" class="btnLogin" style="align:center; float:none;" onclick="window.location.href='training.htm'"/>
            <br><br>    
            </div>

    </div>
</form>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:33:33.327

您的 css 有很多问题，例如：

1）我猜你想在浏览器中间对齐你的 div.content ，
因此

```
 margin-right:200px;  
 margin-left:200px; 
```

这不是标准方式，而是这样做：

```
 body{  
 background:  
 border:  
 ..........  
 margin:0 auto;  
 text-align:center;  
 }  
 .content{  
  margin:0 auto;
  margin-top:5px;  

//don't include margin-left or margin-right instead set a width for the div  

  width:800px;  
  .............  
  } 
```

并根据为div.content设置的宽度设置其他元素的宽度.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:54:11.540

正如@mukund 所提到的 - 主要问题在于 CSS`.content`以及您尝试将其居中的方式。

尝试将您的 CSS 更改为以下内容：

```
body{
  background:#eff3f6;
  border: 1px solid #C3D4DB;
  text-align: center;   /* added this to center any children */
}

.content{
    margin-top:1px;
    display: inline-block;  /* this is key */
    *display: inline;
    *zoom: 1;
    background:#fefefe;
} 
```

注意：`*display: inline;`和`*zoom: 1;`是为 IE7 支持而添加的

**工作示例：http: [//jsfiddle.net/wR2FL/](http://jsfiddle.net/wR2FL/)**

# serialization - 二进制序列化比 XML、CSV 等有哪些限制（缺点）？

> ID：10595578
> 
> 赞同：1
> 
> 时间：2012-05-15T06:53:46.603
> 
> 标签：serialization, binary

二进制序列化比 XML、CSV 等有哪些限制（缺点）？你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:09:04.517

Unix 和 Web（历史上）偏爱文本格式（XML、JSON、YAML、...）和协议（HTTP、SMTP、...），因为它们更容易调试（和理解），因为您可以使用文本格式工具和编辑器。许多库函数（例如`fscanf`和`fprintf`...）都支持文本格式。

并且有几个工具可能偏向于文本文件（无论这意味着什么）。例如，文本文件可能可以在诸如`git`or之类的版本控制系统下更有效地管理`svn`......（并且  `diff`和`patch`实用程序需要文本数据，用换行符来分隔行）。

文本格式的一个可能缺点是编码/解码可能需要更多的 CPU 时间，以及更多的磁盘空间。（但是磁盘空间很便宜，文本数据是可压缩的，瓶颈是真正的 I/O）。

如果您希望二进制数据在各种处理器或编译器（或系统）之间具有兼容性，您应该明确地处理它，使用“中性”数据格式，如 XDR 或 ASN1 和序列化库（例如[s11n](http://s11n.net/)）。

# .net - 在 vb.net 中使用窗口大小更改按钮的大小

> ID：10595582
> 
> 赞同：0
> 
> 时间：2012-05-15T06:54:01.847
> 
> 标签：.net, vb.net, visual-studio-2010, button, window

如何将表单中任何按钮的大小连接到窗口大小，以便它与窗口大小成比例变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:01:01.997

*   按钮上的停靠和锚点属性应该可以解决问题。

*   如果一切都失败了，您可以使用窗口的 Resize 事件并在该事件中相应地调整您想要的按钮大小。在此活动中可以找到更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.resize.aspx#Y0](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resize.aspx#Y0)

# ruby-on-rails - 未初始化的常量 Supplier::Categories

> ID：10595585
> 
> 赞同：0
> 
> 时间：2012-05-15T06:54:07.260
> 
> 标签：ruby-on-rails, ruby, project

我的问题是我尝试调用与表的关联。我获得了 ID 号，但想从中获得不同的字段。这个问题什么时候会出现模型

```
class Category < ActiveRecord::Base
 has_many :suppliers 
```

end class Supplier < ActiveRecord::Base belongs_to :categories end

```
class Supplier < ActiveRecord::Base
  belongs_to :categories
 end 
```

控制器

```
def index
 @suppliers = Supplier.all
end
View :
 <% @suppliers.each do |s|%> 
                <td><%= s.name %></td>
                <td><%= s.inspect %></td>
                <% s.categories.each do |c|%> 
                    <td><%= c.inspect %></td>
                    <%end%>
                <% end %>

errormesseage : uninitialized constant Supplier::Categories 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:09:24.150

如果您的供应商表中有 category_id 列，那么您应该声明如下的 belongs_to 关联。

```
class Supplier < ActiveRecord::Base
  #not
  #belongs_to :categories
  belongs_to :category
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:21:28.530

您的供应商模型应该有一个`category_id`字段（单数），*而不是*一个`categories_id`字段（复数）。

完成后，将模型更改为

```
class Supplier < ActiveRecord::Base
  belongs_to :categories
end 
```

一切都将开始工作。

如果英语不是您的第一语言，这可能并不明显，但 Rails 会尝试坚持英语语言约定。因此，由于供应商只属于一个类别，因此在谈论关系时使用单数形式。

这是相同的逻辑，这意味着您的类是 [单个]`Supplier`但数据库表包含`suppliers`

# django - 如何在 Django 中生成单元测试

> ID：10595588
> 
> 赞同：0
> 
> 时间：2012-05-15T06:54:20.310
> 
> 标签：django, django-forms, django-views, django-testing

我阅读了生成单元测试的官方文档，但它太乱了。`AdminPasswordChangeForm`我必须为, 和两个定义的函数生成一个单元测试用例，`views.py`其中正在改变 和 的`is_staff`状态`is_active`。

我还编写了简单的测试用例来注册用户。Follow 是定义的方法`views.py`（使用 更新密码`AdminPasswordChangeForm`）

```
def user_change_password(request, id):
     user = User.objects.get(pk=id)
     form = AdminPasswordChangeForm(user, request.POST)
     if form.is_valid():
         new_user = form.save()
         msg = _('Password changed successfully.')
         request.user.message_set.create(message=msg)
         return HttpResponseRedirect('../../user/users')
     else:
         form = AdminPasswordChangeForm(user)
     extra_context = {            
         'form': form,
         'change': True
         }
     return direct_to_template(request,"users/user_password_change.html",
                 extra_context = extra_context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:41:47.437

有很多关于如何编写测试的教程。Django 文档（像往常一样）在解释他们的框架在测试方面提供了什么方面做得很好。 [https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs) 此外，还有许多文章/幻灯片介绍了要测试的内容。 [http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/](http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/)

至于如何测试视图，您有几个选择

您可以使用内置的请求工厂来生成请求对象并直接调用您的函数。您可以确保在适当的情况下返回重定向或模板或您期望的任何内容。

或者，您可以向 urls.py 文件中的 url 发出请求。

我的意思是`AdminPasswordChangeForm`用一个用户对象和一个 POST 字典来测试实例化它。检查以确保它正在创建正确的表单，如果您没有对它进行太多自定义，您可以跳过测试它，因为 django 在测试他们的代码方面做得很好。

# gwt - GWT - 将复合材料对齐到右侧

> ID：10595589
> 
> 赞同：1
> 
> 时间：2012-05-15T06:54:22.327
> 
> 标签：gwt, alignment

在 GWT 中，我需要一个类似于 Eclipse View 的组合

*   视图复合包含垂直放置的其他复合。

*   第一行是一个带有多个按钮的视图工具栏。用户单击它们以执行某些操作。工具栏必须与视图组合的右侧对齐。

*   放置在第二行和后续行中的组合用于显示一些值。这些将与视图组合的左侧对齐。

    *   ![看法](../Images/ebcc489199eb5999726305793fa6507d.png)

使用以下代码片段，我可以将工具栏向右对齐并将其余的复合材料放在左侧

```
CaptionPanel view = new CaptionPanel("Eclipse like view");
VerticalPanel vPanel = new VerticalPanel();
view.setContentWidget(vPanel);

ViewToolbar toolbar = new ViewToolbar();   // custom composite
vPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
vPanel.add(toolbar);        

ViewContent viewContent = new ViewContent(); // custom composite
vPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_LEFT);
vPanel.add(viewContent); 
```

这按要求工作。但我不知道像这样调整水平对齐是否是个好主意。

有没有更好的方法可以将一些复合材料对齐到面板的右侧，而将其他复合材料对齐到面板的左侧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:10:01.693

`HasHorizontalAlignment.ALIGN_LEFT`在我看来，如果它必须永远不会改变，那么使用类似的东西是一个好方法。

另一种方法是使用 CSS 声明和方法，例如`myThing.addStyleName( myCustomStyle )`

或使用 uibinder 的方式与样式声明

# node.js - 如何在翡翠中包含一个css文件（不链接它）

> ID：10595593
> 
> 赞同：10
> 
> 时间：2012-05-15T06:54:26.573
> 
> 标签：node.js, pug

我有这个玉文件：

```
!!! 5
html
  head
    title test include
    style(type='text/css')
      //- DOES NOT WORK!
      include test.css
  body
    //- works
    include test.css
    div 
      //- works
      include test.css 
```

输出：

```
$ jade -P test.jade 
rendered test.html
$ cat test.html
<!DOCTYPE html>
<html>
  <head>
    <title>test include</title>
    <style type="text/css">
      //- DOES NOT WORK!
      include test.css
    </style>
  </head>
  <body>body { color: peachpuff; }

    <div> body { color: peachpuff; }

    </div>
  </body>
</html> 
```

当然，我可以简单地链接 css 文件，但我不想这样做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T12:18:44.090

我还没有测试它（不是在我的开发计算机 ATM 上）但是有机会做这样的事情可以工作：

```
!!!
head
  title test include
  | <style type='text/css'>
  include test.css
  | </style> 
```

顺便说一句，我找到了 HTML2Jade 在线转换器，但没有找到 Jade2HTML。知道在哪里可以找到它吗？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-09T09:14:32.280

来自[玉文档](http://jade-lang.com/reference/includes/)：

```
doctype html
html
  head
    style
      include style.css
  body
    h1 My Site
    p Welcome to my super lame site. 
```

它工作完美。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-01T00:13:08.203

Arnaud 的回答对我有用，但我发现这更干净一些：

```
doctype
head
  title test include
  style(type="text/css"): include test.css 
```

这`(type="text/css")`也是可选的，具体取决于您的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-04T02:01:07.173

作为数据传入`fs`，你可以

```
style !{fs.readFileSync("index.css").toString()} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T07:15:07.223

在当前版本的 Jade (0.35.0)**中，只需编写** `include style.css`.

完整示例（考虑到您正在编写 index.jade，它位于`views`文件夹中，而您的样式位于`assets`文件夹中）：

```
!!!
html
   head
       include ../assets/bootstrap3/css/bootstrap-theme.css
       include ../assets/bootstrap3/css/bootstrap.css
body
   h1 Hi! 
```

**请注意模板中没有`style`标签**，它会被玉自动插入（多么好的功能！）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T13:26:21.407

```
style(type="text/css").
  #{css} 
```

试试这个`pug.render(..., { css: yourCssString })`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-15T07:58:35.500

一个可能的解决方案是：

```
style(type="text/css")
    #{css} 
```

`res.render(...)`然后在调用中传递 css-text 。

# android - 在android中使用地理编码器从纬度经度中查找城市名称和国家名称

> ID：10595595
> 
> 赞同：1
> 
> 时间：2012-05-15T06:54:36.417
> 
> 标签：android

我从当前位置获取纬度和经度，并使用地理编码器从纬度经度显示城市国家和州名

> 日志错误

```
05-15 12:13:40.584: E/Running(309): Mehod getBestProvider
05-15 12:13:40.674: E/Running(309): Mehod getBestProvider
05-15 12:13:57.083: E/Running(309): C Latitude27.422006
05-15 12:13:57.083: E/Running(309): C Longitude22.084095
05-15 12:13:57.093: E/Running(309): try called
05-15 12:13:57.093: E/Running(309): Exception called
05-15 12:13:57.093: W/System.err(309): java.io.IOException: Service not Available
05-15 12:13:57.113: W/System.err(309):at
     ndroid.location.Geocoder.getFromLocation(Geocoder.java:117)
05-15 12:13:57.113: W/System.err(309):  at 
```

> 活动类

```
 public class CitycountrymapActivity extends Activity implements LocationListener {
 private LocationManager locationManager;
 //private GeoPoint currentPoint;
 private Location currentLocation;
 double currentlatitude;
 double currentlongitude;
 String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    getLocation();

}

 public void getLocation()
    {
        provider=getBestProvider();

        currentLocation=locationManager.getLastKnownLocation(provider);

        if(currentLocation!=null)
        {
            setCurrentLocation(currentLocation);

        }
        else
        {
            Toast.makeText(this, "Location not yet acquired", Toast.LENGTH_LONG).show();
        }

    }

    public String getBestProvider()
    {
        locationManager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);
        criteria.setAccuracy(Criteria.NO_REQUIREMENT);
        String bestprovider=locationManager.getBestProvider(criteria, true);
        Log.e("Running","Mehod getBestProvider");
        return bestprovider;
    }

    public void setCurrentLocation(Location location)
    {

        //currentlatitude=(double)(location.getLatitude());
        //currentlongitude=(double)(location.getLongitude());

        currentlatitude =27.422006;
        currentlongitude=22.084095;

        currentLocation = new Location("");

        //currentPoint = new GeoPoint((int)(72.454565* 1E6),(int)(23.4572448 * 1E6)); 
        //currentPoint  = new GeoPoint((int)(72.454565),(int)(23.4572448));

         Global.clat=currentlatitude;
         Global.clon=currentlongitude;

        Log.e("Running","C Latitude"+Global.clat);
        Log.e("Running","C Longitude"+Global.clon);

        try
        {

        Log.e("Running","try called");  

        Geocoder geocoder = new Geocoder(this, Locale.getDefault());
        List<Address> addresses=geocoder.getFromLocation(currentlatitude, currentlongitude, 1);  

        Log.e("Running","geocoder set");
        Log.e("Running","addresses");

        String address = addresses.get(0).getAddressLine(0); 
        String city = addresses.get(0).getAddressLine(1); 
        String country = addresses.get(0).getAddressLine(2);

        Log.e("Running","Latitude"+currentlatitude);
        Log.e("Running","Longitude"+currentlongitude);
        Log.e("Running","Address"+address);
        Log.e("Running","City-->"+city);
        Log.e("Running","Country->"+country);

        }
        catch(Exception e)
        {
            Log.e("Running","Exception called");
            e.printStackTrace();
        }
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

        Toast.makeText(this, "Loction Changed", Toast.LENGTH_SHORT).show();
        setCurrentLocation(location);
    }

    protected void onResume()
    {
        super.onResume();
        locationManager.requestLocationUpdates(getBestProvider(), 1000, 1, this);
    }

    protected void onPause()
    {
        super.onPause();
        locationManager.removeUpdates(this);

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Provider Disabled", Toast.LENGTH_SHORT).show();
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Provider Enabled", Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Staus Changed", Toast.LENGTH_SHORT).show();
    }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:10:10.683

请参阅发布的[这个答案](https://stackoverflow.com/a/5206936/506879)`@ddewaele`。它将为您解决问题，也许解决方法也将帮助您启动并运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:16:08.373

```
 locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        if (locMan.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 0,
                    this);
            curLocation = locMan
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            Log.v("Gps", "on");
        } else if (locMan.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
            locMan.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                    100, 0, this);
            curLocation = locMan
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            Log.v("network", "on");

        } else {
            Log.v("setting", "on");
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings",
                    "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3"));
            sendBroadcast(poke);

            locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 0,
                    this);
            curLocation = locMan
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        }

        if (curLocation != null) {
            clat = curLocation.getLatitude();
            clng = curLocation.getLongitude();
            Log.v("TAG  ", clat + "  " + clng);
        //  GeoPoint srcgeopoint = new GeoPoint((int) (clat * 1E6),
        //          (int) (clng * 1E6));

        } else {
            Toast.makeText(new_map.this, "No Location Find", Toast.LENGTH_SHORT);
        }

  //  srcLat = geoPoint.getLatitudeE6() / 1E6;
   //       srcLong = geoPoint.getLongitudeE6() / 1E6;

            Geocoder gCoder = new Geocoder(this);
            List<Address> addresses;
            try {
                addresses = gCoder.getFromLocation(clat, clng, 5);
                Log.e("get adderess", addresses + "");
                if (addresses != null && addresses.size() > 0) {
                    addres = addresses.get(0).getLocality();
                    System.out.print(addresses.get(0).getLocality());
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

在城市名称集中添加您的代码并获得一个......

# ruby-on-rails - 是否可以使用 Ruby on Rails 中的 Guard 关闭 selenium 测试？

> ID：10595597
> 
> 赞同：0
> 
> 时间：2012-05-15T06:54:38.797
> 
> 标签：ruby-on-rails, selenium, cucumber, guard

我目前正在使用`guard-cucumber`gem，因此在我使用 Ruby on Rails 进行开发时，它会在后台不断运行黄瓜测试。其中一些测试是`cucumber`打开浏览器以运行 selenium 测试的测试。是否可以关闭这些测试但仍然使用硒？

```
rails 3.0.3
guard 1.0.2
guard-cucumber 0.7.5 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:38:40.067

我认为 Selenium 驱动程序不可能做到这一点。从他们的自述文件中：

> 目前，Capybara 支持 Selenium 2.0 (Webdriver)，而不是 Selenium RC。**如果安装了 Firefox**，一切都为您设置好了，您应该可以立即开始使用 Selenium。

你真的应该试试 capybara-webkit (https://github.com/thoughtbot/capybara-webkit)：

> capybara-webkit 驱动程序用于真正的无头测试。它使用 QtWebKit 来启动渲染引擎进程。它也可以执行 JavaScript。它比 Selenium 等驱动程序快得多，因为它不会加载整个浏览器。

这一切都在终端中运行，非常棒。

# php - 在 PHP 中生成 excel 输出的最佳方法是什么？

> ID：10595599
> 
> 赞同：16
> 
> 时间：2012-05-15T06:54:40.847
> 
> 标签：php, excel, cakephp-2.0

是否有任何其他 PHP 组件，如 PHPExcel？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T06:57:57.350

有一些类可以生成 PHP Excel 文件（真正的 excel 文件，而不是 .csv 文件）。我使用**（已删除）**请参阅编辑 2：

[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)

但是：我在尝试使用 java excel READER 读取这些生成的 excel 文件时遇到了问题，因此这个 PHP 脚本中可能存在错误。

1.  编辑：不错的一个：[http ://www.phpclasses.org/package/2037-PHP-Generate-spreadsheet-files-Excel-xls-XML-format.html](http://www.phpclasses.org/package/2037-PHP-Generate-spreadsheet-files-Excel-xls-XML-format.html)

2.  > PhpSpreadsheet 是 PHPExcel 的下一个版本。它打破了兼容性以显着提高代码库质量（命名空间、PSR 合规性、使用最新的 PHP 语言功能等）。[https://github.com/PHPOffice/PhpSpreadsheet](https://github.com/PHPOffice/PhpSpreadsheet)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T06:59:45.777

一些应用程序生成 HTML 表格或 CSV 文件而不是真正的 Excel 文件，并假装它是 Excel 文件，以便 Excel 打开它。使用 HTML 表格，这工作得非常好，甚至支持一些格式。但是，使用最新的 Excel 版本时，您会收到一条消息，询问您是否真的要打开该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:31:44.060

有一个 PHP Excel 扩展：http: [//ilia.ws/archives/222-PHP-Excel-Extension.html](http://ilia.ws/archives/222-PHP-Excel-Extension.html)

# css - 显示：具有多行的表格单元格（等高列，多行）

> ID：10595601
> 
> 赞同：13
> 
> 时间：2012-05-15T06:54:58.193
> 
> 标签：css

给定一个列表：

```
<ul>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
</ul> 
```

这个CSS：

```
ul { display: table; width: 600px; }
li { display: table-cell; width: 33%; } 
```

您会期望 3 行 3 列，每列 200 像素宽。但似乎`li`宽度被忽略了。

有没有办法在`display: table-cell`不添加额外标记的情况下强制行？

**编辑：** 另外，我使用`table-cell`是因为我希望整行具有相同的高度（尽管内容不同），因为我想在每行的所有三个单元格中放置一些东西，但在最低单元格的底部。我知道这是一个令人困惑的句子。

**基本上我想把一堆`li`s 变成等高的列，但多行*只使用 CSS*。我见过的所有等高柱解决方案都无法做到这一点。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T07:03:57.717

你可以给`display:inline-table`而不是`display:table-cell`给李。像这样写：

```
ul { display: table; width: 600px; font-size:0;}
li { display: inline-table; width: 33%;background:red; font-size:15px;} 
```

检查这个[http://jsfiddle.net/56FGT/1/](http://jsfiddle.net/56FGT/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T00:31:00.897

[这是](http://jsfiddle.net/aUHpA/)我想出的解决方案。

标记稍作修改，以删除空格。这是因为将`li`s 设置为`display: inline`时，它们之间的换行符将占用一些宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T07:03:22.523

如果您希望 css`<li>`在同一行中显示 3 个宽度，每个宽度`200px`相同`<ul>`，您可以使用上面的 html 尝试这样的操作：

```
ul { list-style: none outside none; width: 600px; }
li { float: left;display: block;width: 200px; height: 33px; }​ 
```

## [演示](http://jsfiddle.net/Ap5JW/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T16:01:22.013

我认为没有语义解决方案。它应该是每组项目的包装容器，以对其应用相同的高度。但是有可能解决设计问题（有点做一个网格）这里是一个如何制作它的例子：[一行上具有相同高度的多行](http://jsfiddle.net/dmitrismirnov/Fzjct/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T18:34:30.063

我正在使用`display: inline-block`和`vertical-align: top`

但是如果你想要背景也随着高度延伸，javascript是唯一的方法（我能想到的）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T07:03:11.640

如果您无法更改标记，则可以在不伪造表格的情况下完成。您可以制作列表项`display:block`而不是`display:table-cell`.

顺便说一句，33%`600px`不是 200 像素。使用`200px`！

编辑：
如果您知道内容的最大高度是多少，您当然可以将其用作所有列表项的高度，并使用 vertical-align 或 line-height 来对齐内容。（但由于这也不是一种选择，所以不改变标记的解决方案已经过时了。）

# jsp - SCRIPT438：对象不支持属性或方法“enablePaging”dhtmlxgrid

> ID：10595609
> 
> 赞同：0
> 
> 时间：2012-05-15T06:55:30.347
> 
> 标签：jsp, dhtmlx

我有一个jsp，其中有dhtmlxgrid 用于加载数据。
使用
var taskDetailsGrid = new dhtmlXGridFromTable('tablegrid');加载数据
taskDetailsGrid.enablePaging(true,20,20, "recinfoArea"); 它加载数据但分页不起作用。
它给出了以下脚本错误：
SCRIPT438：对象不支持属性或方法“enablePaging”
已经在使用 `<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`
无法找到问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:32:35.093

很可能您错过了再包含一个 js 文件 - ext/dhtmlxgrid_pgn.js

此外，要在从 html 初始化的情况下启用分页，您需要再调用一个命令

```
taskDetailsGrid.enablePaging(true,20,20, "recinfoArea");
taskDetailsGrid.setPage(0); 
```

# asp.net - 由于 asp.net 1.1 中对象的当前状态，操作无效

> ID：10595611
> 
> 赞同：1
> 
> 时间：2012-05-15T06:55:32.017
> 
> 标签：asp.net

我正在使用 aspnet 框架 1.1，但出现错误

```
Operation is not valid due to the current state of the object. 
```

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：由于对象的当前状态，操作无效。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[InvalidOperationException: Operation is not valid due to the current state of the object.]
System.Web.HttpValueCollection.FillFromEncodedBytes(Byte[] bytes, Encoding encoding) +126
System.Web.HttpRequest.FillInFormCollection() +154

[HttpException (0x80004005): The URL-encoded form data is not valid.]
System.Web.HttpRequest.FillInFormCollection() +213
System.Web.HttpRequest.get_Form() +50
System.Web.UI.Page.GetCollectionBasedOnMethod() +70
System.Web.UI.Page.DeterminePostBackMode() +128
System.Web.UI.Page.ProcessRequestMain() +63 
```

版本信息：Microsoft .NET Framework 版本：1.1.4322.2490；ASP.NET 版本：1.1.4322.2494

* * *

我尝试添加

```
<add key="aspnet:MaxHttpCollectionKeys" value="10000" /> 
```

但它仍然抛出同样的错误。

任何人都可以建议我解决这个问题吗？

问候，穆尔蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:52:29.323

将该行添加到 Web.Config 仅适用于 .NET 2.0 及更高版本。对于 1.1，您需要更改注册表设置、键的值

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\1.1.4322.0\MaxHttpCollectionKeys 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:04:08.173

使用 Fiddler 检查请求。

错误是：

```
[HttpException (0x80004005): The URL-encoded form data is not valid.] 
```

所以你的表单数据以某种方式被破坏了。

# mysql - 数据表和搜索表同时级联删除

> ID：10595618
> 
> 赞同：6
> 
> 时间：2012-05-15T06:55:49.397
> 
> 标签：mysql, innodb, myisam

我正在存储目录和文件的文件系统层次结构。

在 innodb 表中，我存储每个目录/文件的详细信息，并使用将在删除时级联的外键约束维护父子关系。

myisam 表用于通过全文搜索来搜索这些目录/文件。它包含每行的名称和 ID。

数据表（innodb 表）中的任何行都会在搜索表（myisam 表）中具有相应的行，并且从数据表中添加或删除行必须反映在搜索表中。

我试图找到在删除父目录时保持两个表之间数据一致性的最佳解决方案。innodb 表很好。我删除父级，删除级联通过子级，直到它们全部被删除。从 myisam 表中删除相应的行比较困难。

我的第一个想法是在 innodb 表上使用 on-delete 触发器。当一行被删除时，它会从 myisam 表中删除相应的行。然而，由于 MySQL 在级联删除期间不激活触发器（一个已知的 7 年错误，通过在手册中提到缺乏支持而得到修复），这不是一个选项。

我的第二个想法是在搜索表中放了一个父子关系，但它是一个myisam表，支持全文搜索功能，所以不支持外键约束。

我听说 innodb 现在支持全文搜索，所以我想也许我可以更改搜索表引擎，但它仅在实验室版本中可用。

我最后的想法是放弃外键约束，只使用触发器来保持数据一致性。删除时，从 innodb 和 myisam 表中删除 parent = OLD.id。但是，为了防止可能破坏表中所有数据的无限循环，MySQL 不支持操作激活触发器的同一个表中的数据。

我已经诉诸于通过请求循环以编程方式检索父目录下的所有子目录，但是，我觉得必须有更好的选择。**有没有其他更有效的解决方法？**在这一点上，我能想到的仅有的两个选项是等待上述方法之一被修复或更改为不同的 RDBMS，例如支持从级联删除触发触发器的 PostgreSQL。

任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:05:39.253

这些令人头疼的问题正是让我尽可能远离 mysql 的原因。

> ...我觉得必须有更好的选择...

**遗憾的是没有**。简单的问题是你不能删除级联并且让mysql知道它刚刚删除了什么。因此，您唯一的选择是在删除之前找出将要删除的内容（这是您最后建议的算法）。

由于级联会破坏您的数据，因此您不应使用`on update cascade`密钥，以免尝试删除父目录而不删除子目录将失败。

我建议您创建一个程序来为您完成繁重的工作（删除）。这将防止您的应用程序和数据库之间的大 IO，因为它回避所有目录。如果您曾经通过不同的应用程序访问同一个数据库（或者您只想手动执行某些操作），我还将为此提供通用代码。

正如我首先所说，这些天我主要使用 postgresql。这是为什么的一个例子。

# php - 如何使它成为数组？

> ID：10595622
> 
> 赞同：-2
> 
> 时间：2012-05-15T06:56:19.053
> 
> 标签：php, javascript, arrays

我正在尝试将我的数据放入 Highchart 库中。那里显示示例如下代码。

```
series: [
    {
    name: 'John',
    data: [5, 3, 4, 7, 2]
    },
    {
    name: 'Jane',
    data: [2, 2, 3, 2, 1]
    },
    {
    name: 'Joe',
    data: [3, 4, 4, 2, 5]
    }
] 
```

所以我需要它动态地作为动态输入的数组（来自 PHP）。那么我怎样才能使它成为一个 Javascript 数组呢？

使用，例如：

```
series: myArray; 
```

那么如何用数组实现它呢？

```
var myArray = new Array();
and .. ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:59:46.273

您可以简单地使用数组文字 ( `[]`)，如示例中所示：

```
var myArray = [
    {
        name: 'John',
        data: [5, 3, 4, 7, 2]
    },
    {
        name: 'Jane',
        data: [2, 2, 3, 2, 1]
    },
    {
        name: 'Joe',
        data: [3, 4, 4, 2, 5]
    }
]; 
```

这相当于：

```
var myArray = [];
myArray[0] = { name: 'John', data: [5,3,4,7,2] };
myArray[1] = { name: 'Jane', data: [2,2,3,2,1] };
myArray[2] = { name: 'Joe', data: [3,4,4,3,5] }; 
```

`myArray`对象数组也是如此。这些对象有两个属性，`name`和`data`，后者是另一个保存数字的数组。

要将数据从 PHP 发送到 Javascript，您可以使用该函数从 PHP 数组创建[JSON 。](http://www.json.org/)[`json_encode()`](http://php.net/manual/en/function.json-encode.php)例如，在你的 PHP 中，你可以有这样的东西：

```
<?php

$myArray = array(
    array('name' => 'John', data => array(5,3,4,7,2)),
    array('name' => 'Jane', data => array(2,2,3,2,1)),
    array('name' => 'Joe', data => array(3,4,4,3,5)),
);

?>

<script type="text/javascript">
var myArray = <?php echo json_encode($myArray); ?>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:01:54.630

如果源数组在 PHP 中，那么我会将其序列化为 JSON 并直接将其用作 JS 对象：

[http://ch2.php.net/json](http://ch2.php.net/json)

就像是：

```
var jsData = <?php echo json_encode($your stuff); ?>; 
```

**编辑**：改进的例子

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T07:02:37.170

我强烈推荐 JSON。因为它维护一个名称：值对。

# linux - 这正是Linux内核中的romfs所做的吗？

> ID：10595624
> 
> 赞同：2
> 
> 时间：2012-05-15T06:56:33.450
> 
> 标签：linux, linux-kernel, kernel

我必须使用 romfs 创建一个带有自定义可加载模块的文件系统。但是，我有一些困惑（我对内核的东西还是新手）：

*   看完`romfs`文档：[romfs](http://lxr.linux.no/#linux+v3.3.6/Documentation/filesystems/romfs.txt)，据我所知，`romfs`是一个类似于 的文件系统`ext2, ext3, ext4....`，用于创建内核启动时需要的init ramdisk。不过据说`romfs`从2.1.21版开始就被纳入内核了：[romfs homepage](http://romfs.sourceforge.net/)。在主页上，我们只能下载`genromfs`用于创建`romfs`图像文件的实用程序。所以，我想在这里明确一点：`romfs`内核中包含的模块是用来读取`romfs`文件系统的，`genromfs`是用来创建的，不是吗（我试过了`genromfs`，但我想确认一下）？

*   `initrd`由`mkinitrd -allow-missing -f initrd.img kernel-version`在源目录（要加载的文件系统）创建并由: 解包`gzip -dc initrd.img | cpio -idv`，在使用 romfs 时，我必须使用创建它的图像`mkinitrd`并使用: 解包它`genromfs -fdv romfs.img`。这与内核启动时的 initrd 相同吗？`initrd`涉及压缩，虽然`romfs`不是，这可以吗？

*   如果是这样，则必须将`romfs`模块内置到内核中，以便在内核启动的早期阶段进行读取，对吗？在我的系统中，我们有一台无盘机器，目前，`initrd`它被用作引导阶段文件系统以及最终的根文件系统。但是，由于`romfs`是只读的，使用`romfs`被拒绝的用户写入文件系统的能力（所以，我们不能做类似的事情`echo "something" > /tmp/something.txt`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:10:40.983

对于(1)，是的，模块`romfs`是支持简单只读文件系统的文件系统，实现起来非常简单。该程序`genroms`允许您创建一个 romfs 文件系统的实例，该文件系统可以在`romfs`加载了模块的内核下安装和访问。

genromfs 工具会生成一个文件系统映像，该映像可以放置在块设备上，也可以放置在预先存在的文件系统上的文件上。

对于 (2)，您可以使用`romfs`文件系统作为初始 ram 磁盘 - 只要有用于访问`romfs`文件系统的编译内核支持。不同之处在于 initrd 加载时间。对于标准`initrd`映像，它被解压缩到用于启动引导的 ramdisk 中，对于 romfs 映像，它不是未压缩的，它只是按原样使用。

使用映像作为文件系统的主要原因`romfs`是它可以放置在只读内存块上，并以这种方式直接访问，而无需为扩展的 ramdisk 映像使用物理内存。

对于（3），是的，您必须将文件系统作为内置组件编译到系统中，而不是作为可加载模块 - 即您在内核文件系统配置中选择' `Y`'作为选项。`rom file system`

我不建议将 romfs 文件系统用作根文件系统 - POSIX 属性（所有权、权限）不足以使其作为适合日常使用的文件系统运行（我不知道肯定的；我只是觉得使用这样的文件系统很*奇怪*）

initrd 在运行时被解压缩*到内存*中，因此在系统重新引导后不会保留对文件系统的任何写入。如果该扩展 ramdisk 上的文件系统具有适当的权限，则内核应防止普通用户对磁盘上的特定内容进行更改。您将不允许用户以 root 身份登录系统，并依靠文件系统的权限来阻止对文件的修改。

它是只读且不可修改的事实意味着，如果您想要一个 /tmp 文件，那么您需要创建目录作为`genromfs`调用的一部分，然后您必须将 tmpfs 挂载到该挂载点为了对该目录执行写入。

如果您正在寻找一种拥有只读根文件系统的方法，那么您应该考虑从远程文件系统挂载只读共享；这样，用户就没有实际的方法来修改文件系统——所有的写操作都会被服务器拒绝。通过使用类似的功能[`FS-Cache/CacheFS`](http://www.linux-mag.com/id/7378/)，性能会非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:12:17.283

该`romfs`文件系统今天基本上已经不再使用，因为它非常有限。如果你有一个大的只读介质并且对压缩不感兴趣，你只会使用它。

以前是initrd是`romfs`从加载它的RAM块挂载的镜像，卸载后，RAM块被释放；这已被一个`tmpfs`实例（基于读/写 RAM 的文件系统）替换，该实例使用来自`cpio`格式存档（类似于 ZIP 文件）中的数据进行初始化。

在启动过程中有一个点，内核会卸载所有不再需要的代码（“释放初始化内存”），这发生在进程 1 启动之前。使用这种`romfs`方法，此时 initrd 是从 initrd 映像挂载的，因此访问 romfs 映像所需的代码以及 initrd 代码必须在此处保持加载，这意味着您最终会在系统之后得到一些死内核代码已启动。

当前的 initrd 方法使用稍后也用于`/tmp`文件系统的相同 ramdisk 代码（如果您的系统是这样配置的），并且该文件系统的整个初始化在内存被释放之前运行，因此没有死代码保留initrd 启动后加载。

romfs 和 cpio 格式的 initrds 都不能写入；新的代码路径首先将数据复制到可写文件系统，这允许您的 initrd 脚本写入数据；但是，这永远不会写回图像中。

# android - 从android源代码中的蓝牙获取上下文

> ID：10595632
> 
> 赞同：1
> 
> 时间：2012-05-15T06:57:08.850
> 
> 标签：android, bluetooth, android-source

我正在修改 android 开源代码，我希望能够在 BluetoothAdapter 类中获取上下文信息。到目前为止，似乎没有直接的方法来做到这一点。比如有一个mService字段，但是它是一个接口而不是一个真正的Service对象，所以我不能从中调用getApplicationContext()。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:50:01.343

据我所知，上下文与服务、应用程序或活动相关联。在你的情况下，没有这样的事情。我会建议你看看`frameworks/base/core/java/android/server/BluetoothService.java`也许你可以实现你的功能。

# php - 尝试从数据库验证密码时页面空白

> ID：10595633
> 
> 赞同：0
> 
> 时间：2012-05-15T06:57:08.817
> 
> 标签：php, mysql, login

以下是 header.php 的开头，这是一个包含在我所有页面顶部的文件。就像现在一样，它包含的每个页面在浏览器中都是空白的——我做错了什么？（这里用 x:e​​s 替换的数据库登录凭据是正确的。）

```
session_start();

if (isset($_POST['log_out'])) {
    session_unset();
    session_destroy();
    $_SESSION = array();
}

if (isset($_POST['username']) && isset($_POST['password'])) {

    $salt1 = "ghjfdghpuaqXC"
    $salt2 = "GHLUYKRGrtuuh"
    $password = sha1($salt1 . $_POST['password'] . $salt2);

    $db_hostname = 'xxxxxxxx';
    $db_username = 'xxxxxxxx';
    $db_password = 'xxxxxxxx';
    $db_database = 'xxxxxxxx';

$db_server = mysql_connect($db_hostname, $db_username, $db_password);

if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

    mysql_select_db($db_database)
        or die("Unable to select database: " . mysql_error());

    $query = "SELECT password FROM users WHERE name = '" . $_POST['username'] . "'";
    $passwordindatabase = mysql_query($query);

    if ($password == $passwordindatabase) {
        $_SESSION['logged_in'] = true;
        $_SESSION['user'] = $_POST['username'];
        unset($_POST['username']);
        unset($_POST['password']);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:03:00.173

我想您应该在密码查询中使用 mysql_fetch_row 或 mysql_fetch_assoc 以使用输出

```
$passwordindatabase = mysql_fetch_row(mysql_query($query)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:04:20.313

线条

```
$passwordindatabase = mysql_query($query); 
```

和

```
if ($password == $passwordindatabase) { 
```

没有意义。你应该使用：

$passwordindatabase 只包含查询，而不是结果！然后，在获得结果后，您应该分配确切的结果变量，如下所示：

```
if (mysql_num_rows($passwordindatabase != 0) {
    $row = mysql_fetch_assoc($result);
    $passwordindatabase = $row["password"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:05:14.547

`mysql_query`返回一个 MySQL 资源。该资源必须首先“转换”为某个 PHP 值，例如字符串或数组。

您想将资源（由 返回`mysql_query`）与字符串（密码）进行比较。当然，这些永远不会匹配。因此，您必须首先将资源转换为字符串。对于具有多个选定列的任何未来查询，我将首先将其转换为数组：

`$resultarray = mysql_fetch_assoc($passwordindatabase);`

然后可以从此数组中获取密码：

`$resultstring = $resultarray['password'];`

作为旁注，我是否可以指出，在将原始 POST 结果输入数据库之前，您必须像with一样**绝对转义它们？**`$_POST['username']``mysql_real_escape_string`

# javascript - 当我向下滚动时，身高会发生变化

> ID：10595636
> 
> 赞同：0
> 
> 时间：2012-05-15T06:57:15.900
> 
> 标签：javascript, jquery, html, css

我正在寻找我的页脚的顶部位置。我努力了：

```
$('#footer').offset().top 
```

和

```
$(document.body).height() - $('#footer').height() 
```

这两个都给了我相同的答案，但答案是错误的。我注意到，当我滚动经过文档中的某个点时，正文高度（在 Firebug 布局中查看）从 5699 变为 11506。

我试过设置：

```
body { min-height: 100% }
head { height : 100% } 
```

没有成功。

我的问题是为什么身体高度会发生变化，如何确定身体或文档的实际高度（或页脚的顶部位置）？

*更新：奇怪的是，这似乎现在可以在我的 Windows >> Firefox 和 Chrome 浏览器上运行，但在我的 OSX >> Firefox 和 Chrome 浏览器上几乎翻了一番。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:00:03.777

继续故障排除：

```
console.log( $(document.body).height() );
console.log( $(document).height() );
console.log( $('body').height() ); 
```

看看这些是否提供了所需的值。

我只是自己尝试过，并注意到不同的结果。

```
$(document.body).height() > $(document).height() 
```

所以尝试不使用`.body`，看看你会得到什么。

# spring - 似乎使用spring时struts validate方法不再起作用

> ID：10595641
> 
> 赞同：0
> 
> 时间：2012-05-15T06:57:32.500
> 
> 标签：spring, validation, struts, action

我现在正在为我的表示层迁移到 Struts。我已经完成了一个单独使用 Struts 的简单示例（实际上，我在一个简单的 maven 项目中测试了一个示例）。从现在开始，我可能会使用 Struts 和 Spring，所以我尝试迁移我的简单应用程序，我的目标是使用服务层来处理具体操作。

在我的简单测试中，我从 Struts 动作中扩展动作，现在我使用的是 Spring，我从 ActionSupport 中扩展它，这样我就可以充分使用弹簧注入。现在似乎即使我覆盖了 validate 方法，它也不再被调用。这是正确的行为吗，如果是这样，应该在哪里执行检查我的必填字段是否已填充（内部操作或服务？）

感谢您的回答 ！

# java - 在本地和全局范围内使用具有相同异常的异常映射 - 哪个具有高优先级

> ID：10595653
> 
> 赞同：0
> 
> 时间：2012-05-15T06:58:30.380
> 
> 标签：java, struts2

我有动作级别的本地异常映射和全局异常映射，其中异常类型相同 - 那么无论执行全局异常还是本地异常，哪一个将具有高优先级？

```
<action name="User_save" class="">
    <exception-mapping exception="java.sql.SQLException"
            result="error"/>
    <result name="error">/jsp/Error.jsp</result>
    <result>/jsp/Thanks.jsp</result>
</action>

<global-results>
    <result name="error">/jsp/Error.jsp</result>
    <result name="sqlError">/jsp/SQLError.jsp</result>
</global-results>
<global-exception-mappings>
    <exception-mapping exception="java.sql.SQLException"
            result="error"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:11:21.743

在声明异常映射时，拦截器会在抛出的异常和声明的异常之间找到最接近的类继承匹配。拦截器将检查适用于动作映射的所有声明的映射，首先是本地映射，然后是全局映射。如果找到匹配项，则处理 Result，就像它已由 Action 返回一样。

此过程遵循与从 Action 返回的 Result 相同的规则。它首先在本地操作映射中查找 Result，如果未找到，则查找全局 Result。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:14:39.667

从您的操作中抛出一个 SQLException，您就会得到答案。

或阅读[文档](http://struts.apache.org/2.3.3/docs/exception-configuration.html)，其中说：

> 拦截器将检查所有适用于动作映射的声明映射，首先是本地映射，然后是全局映射

# javascript - d3.js 中奇怪的“初始”值

> ID：10595667
> 
> 赞同：3
> 
> 时间：2012-05-15T06:59:09.147
> 
> 标签：javascript, css, background, styles, d3.js

[通过执行与此](https://stackoverflow.com/questions/10593245/merging-data-in-d3-js)( )类似的代码`d3.select(..).append("div")`，我得到`div`具有此类样式属性的 s：

```
<div id="id6" 
  style="
    background-image: initial; 
    background-attachment: initial; 
    background-origin: initial; 
    background-clip: initial; 
    background-color: rgb(255, 255, 255); 
    background-position: initial initial; 
    background-repeat: initial initial; ">
5
</div> 
```

**问题：**

1.  a)`initial`从哪里来？b) 是否可以重新定义“默认值”？
2.  d3 在属性中乱扔[不必要的值](http://www.w3.org/TR/css3-cascade/#initial0)可以吗？
3.  Chrome 这么说`background-position: initial initial;`并且 `background-repeat: initial initial;`是`Invalid property value`s。是d3的bug吗？我们如何处理这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:16:13.417

这与 D3 无关，而是与 CSS 的隐含性质有关。当您指定 CSS[背景属性](http://www.w3.org/TR/CSS2/colors.html#propdef-background)时，您实际上是在简写指定多个属性。例如，

```
background: url(chess.png) gray 50% repeat fixed; 
```

实际上是简写

```
background-image: url(chess.png);
background-color: gray;
background-position: 50% 50%;
background-repeat: repeat;
background-attachment: fixed; 
```

So, when you set the style "background", your browser automatically expands this shorthand to the full form. That's why you see all of these additional styles; they represent the [computed values](https://developer.mozilla.org/en/CSS/computed_value).

# c# - WP7 本地数据库中的 List<> 对象

> ID：10595668
> 
> 赞同：-3
> 
> 时间：2012-05-15T06:59:18.787
> 
> 标签：c#, windows-phone-7

如何在 WP7 本地数据库中存储 List<> 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:26:08.470

```
List<CheckBox> lcb = myListBox.Items.OfType<CheckBox>()
                              .Where(c => c.IsChecked == true).ToList(); 
```

我使用`OfType`而不是`Cast`因为`OfType`即使有一个复选框项目或所有项目都是复选框，它也会起作用。

`Cast`如果即使单个项目不是复选框，它也会出错。

# mysql - Joomla 数据库导出问题

> ID：10595669
> 
> 赞同：1
> 
> 时间：2012-05-15T06:59:22.780
> 
> 标签：mysql, joomla, mysql-error-1064, joomla2.5

每当我导出数据库并将数据库迁移到另一台主机时，每次导入时都会出现 mysql 错误。特别是在进口问题`Usergroup table`。

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds
 to your MySQL server version for the right syntax to use near 'USING BTREE
    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=9' at line 17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:22:40.993

我得到了解决方案.....以“SQL 兼容模式”例如“MYSQL40”导出数据库并以相同的 SQL 兼容模式“MYSQL40”导入数据库

# javascript - 通过jquery加载页面右侧的弹出窗口

> ID：10595672
> 
> 赞同：0
> 
> 时间：2012-05-15T06:59:29.047
> 
> 标签：javascript, jquery

我在互联网上搜索了 j Query 或 java 脚本代码，它们为我做了一些工作，比如当页面完全加载一个弹出窗口从右侧出现一段时间，然后在特定时间后消失但我无法成功。在这方面我需要你的帮助和支持。（向我发送任何与我的问题相关的文件链接或任何你的管或任何其他媒体链接，我现在和将来可以从中获得帮助）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:03:57.967

你可以使用 jquery 的 anitmate 函数[Animate()](http://api.jquery.com/animate/)

像这样的东西：伪代码

```
$('#yourDivorModalBox').animate({
    right: '+=50',
    height: 'toggle'
  }, 5000, function() {
    // Animation complete.
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:05:39.977

你检查过 jQuery 的[ready()](http://api.jquery.com/ready/)函数吗？还有[window.open](http://www.w3schools.com/jsref/met_win_open.asp)

```
$(document).ready(function() {
    newwindow = window.open('http://www.google.com/','testme','height=200,width=300');
}); 
```

然后使用[setTimeout()](http://www.w3schools.com/jsref/met_win_settimeout.asp)关闭弹出窗口。

# java - 更改 Java 按钮 GridBayLayout 的大小

> ID：10595677
> 
> 赞同：1
> 
> 时间：2012-05-15T06:59:55.467
> 
> 标签：java, swing, gridbaglayout

你好我有一个大问题。我想制作“=”按钮 2*height 和“0”按钮 2*width（其他按钮应该只是正常大小），这就是我尝试了很多组合的全部，但我得到了奇怪的大小。

哦，我明白了

[我得到什么 http://desmond.imageshack.us/Himg684/scaled.php?server=684&filename=33109545.jpg&res=landing](http://desmond.imageshack.us/Himg684/scaled.php?server=684&filename=33109545.jpg&res=landing)

我想获得类似于我在网络中找到的东西（仅按钮布局）

![在此处输入图像描述](../Images/6f53fa4ac9bf45b4eba0a3066d482d06.png)

```
public void someMethod()
    Container cp = getContentPane();
    cp.setLayout(new BorderLayout());
    JPanel wyswietlacz = new JPanel();
    JTextField txt = new JTextField("123");
    txt.setPreferredSize(new Dimension(getWidth() - 10, 35));
    txt.setAlignmentX(JTextField.RIGHT_ALIGNMENT);
    wyswietlacz.add(txt);
    JPanel opcje = new JPanel();
    String[] etykiety = { "C", ".", "/", "*", "7", "8", "9", "-", "4", "5",
            "6", "+", "1", "2", "3", "=", "0", "+/-" };

    JButton[] przyciski = new JButton[18];
    for (int i = 0; i < przyciski.length; i++)
        przyciski[i] = new JButton(etykiety[i]);

    GridBagLayout gridbag = new GridBagLayout();
    GridBagConstraints c = new GridBagConstraints();
    c.fill = GridBagConstraints.BOTH;
    opcje.setLayout(gridbag);
    for (int i = 0; i < przyciski.length; i++) {
        if (((i + 1) % 4) == 0) {

            c.gridwidth = GridBagConstraints.REMAINDER;
        } else {
            c.gridwidth = GridBagConstraints.RELATIVE;

        }

        if (i == 15) {
            c.gridheight = 2;

            c.fill = GridBagConstraints.HORIZONTAL;
        }
        if (i == 16)
            c.gridy = GridBagConstraints.SOUTH;

        if (i == 16) {
            c.gridwidth = 2;
            c.fill = GridBagConstraints.HORIZONTAL;
        }

        makebutton(przyciski[i], gridbag, c, opcje);
    }

    add(wyswietlacz, BorderLayout.NORTH);
    add(opcje, BorderLayout.CENTER);

}

protected void makebutton(JButton button, GridBagLayout gridbag,
        GridBagConstraints c, JPanel jp) {
    gridbag.setConstraints(button, c);
    jp.add(button);
}

public static void main(String[] args) {
    new Kalkulator();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T08:23:35.843

试试这个代码示例，并提出任何可能出现的问题：

```
import java.awt.*;
import javax.swing.*;

public class GridBagTest
{
    private String[] buttonText = { "C", ".", "/", "*", "7", "8", "9", "-", "4", "5",
            "6", "+", "1", "2", "3", "=", "0", "+/-" };
    private JButton[] button = new JButton[18];
    private int counter = 0;

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout());

        JPanel northPanel = new JPanel();
        northPanel.setLayout(new BorderLayout(2, 2));
        JTextField tfield = new JTextField();
        northPanel.add(tfield, BorderLayout.CENTER);

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.PAGE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.insets = new Insets(2, 2, 2, 2);
        for (int i = 0; i < button.length; i++)
        {
            System.out.println("Button Text : " + buttonText[i]);
            button[i] = new JButton(buttonText[i]);
        }
        for (int i = 0; i < 3; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                    gbc.gridx = j;
                    gbc.gridy = i;
                    centerPanel.add(button[counter++], gbc);
            }
        }
        gbc.gridx = 0;
        gbc.gridy = 3;
        centerPanel.add(button[counter++], gbc);
        gbc.gridx = 1;
        gbc.gridy = 3;
        centerPanel.add(button[counter++], gbc);
        gbc.gridx = 2;
        gbc.gridy = 3;
        centerPanel.add(button[counter++], gbc);
        gbc.gridx = 3;
        gbc.gridy = 3;  
        gbc.gridwidth = 1;
        gbc.gridheight = 2;
        centerPanel.add(button[counter++], gbc);
        int count = counter;
        System.out.println(button[--count].getText());
        gbc.gridx = 0;
        gbc.gridy = 4;
        gbc.gridheight = 1;
        gbc.gridwidth = 2;
        centerPanel.add(button[counter++], gbc);
        gbc.gridwidth = 1;
        gbc.gridx = 2;
        gbc.gridy = 4;
        centerPanel.add(button[counter++], gbc);

        contentPane.add(northPanel, BorderLayout.PAGE_START);
        contentPane.add(centerPanel, BorderLayout.CENTER);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridBagTest().createAndDisplayGUI();
            }
        });
    }
} 
```

这是输出：

![计算器](../Images/d049c2c5e628b2ab07b82edae12da557.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T07:18:46.250

我看不出有什么问题，请阅读

*   [如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

*   [GridBagConstraints 和锚点](http://java2s.com/Tutorial/Java/0240__Swing/1480__GridBagConstraints.htm)

然后

![在此处输入图像描述](../Images/9a46d7a7a8d5e05d28ced564cd25dfae.png)

从代码

```
import java.awt.*;
import javax.swing.*;

public class GridBagButtons {

    private static final Insets insets = new Insets(0, 0, 0, 0);

    public static void main(final String args[]) {
        final JFrame frame = new JFrame("GridBagLayout");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridBagLayout());
        JButton button;
        // Row One - Three Buttons
        button = new JButton("One");
        addComponent(frame, button, 0, 0, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        button = new JButton("Two");
        addComponent(frame, button, 1, 0, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        button = new JButton("Three");
        addComponent(frame, button, 2, 0, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        // Row Two - Two Buttons
        button = new JButton("Four");
        addComponent(frame, button, 0, 1, 2, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        button = new JButton("Five");
        addComponent(frame, button, 2, 1, 1, 2, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        // Row Three - Two Buttons
        button = new JButton("Six");
        addComponent(frame, button, 0, 2, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        button = new JButton("Seven");
        addComponent(frame, button, 1, 2, 1, 1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        frame.setSize(500, 200);
        frame.setVisible(true);
    }

    private static void addComponent(Container container, Component component, int gridx, int gridy,
            int gridwidth, int gridheight, int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy, gridwidth, gridheight, 1.0, 1.0,
                anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

    private GridBagButtons() {
    }
} 
```

*   我会使用 NestedLayout 而不是使用 GrigBagLayout、SpringLayout 或 MigLayout

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T07:19:11.173

问题是您没有在 GridBagConstraints 上设置 weightx 和 weighty。将它们设置为 1.0 将为每个组件平均分配（水平/垂直）额外空间。

# java - RMI 重新绑定 JRMP 错误

> ID：10595679
> 
> 赞同：0
> 
> 时间：2012-05-15T07:00:08.927
> 
> 标签：java, rmi, policy, codebase

几天以来，当我尝试运行我的 java 服务器应用程序时，我收到以下错误：

```
SEVERE: Stratego server exception: java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
java.net.SocketTimeoutException: Read timed out 
```

我的主要方法如下：

```
Stratego stratego = new Stratego();
try
{
    if (System.getProperty("java.security.policy") == null)
    {
        System.setProperty("java.security.policy", "src/Server/Policy/server.policy");
    }
    if (System.getProperty("java.rmi.server.codebase") == null)
    {
        System.setProperty("java.rmi.server.codebase", "file:/D:/.../build/classes");
    }
    if (System.getSecurityManager() == null)
    { 
        System.setSecurityManager(new RMISecurityManager());
    }
    LocateRegistry.createRegistry(9292);
    Naming.rebind("rmi://localhost:9292/StrategoServer", stratego);

    Logger.getLogger(Stratego.class.getName()).info("Stratego server ready");
}
catch (Exception e)
{
    Logger.getLogger(Stratego.class.getName()).log(Level.SEVERE, "Stratego server exception: {0}", e.toString());
    } 
```

策略、代码库和 SecurityManager 是新的，但是当我将它们注释掉时，我仍然会收到此错误。以前一切都很好。谁能告诉我为什么？

哦，顺便说一句，我使用 Windows 7 x64 和 JDK 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:56:32.723

原来是端口被占用了（不知道怎么回事）。当我将端口从 9292 更改为 9288 时，它起作用了。

# iphone - 当我开始编辑文本字段时如何添加褪色视图

> ID：10595685
> 
> 赞同：1
> 
> 时间：2012-05-15T07:00:33.437
> 
> 标签：iphone, objective-c, ios

我想创建如下图所示的视图。
我的实现应该使用文本字段输入，我喜欢构建的行为是，一旦我单击文本输入，当前视图应该会褪色，因为一旦用户开始输入，我将显示自动完成表？

![在此处输入图像描述](../Images/d6efb38eed8ee20a8f31b06179834d02.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:05:14.180

首先，您需要`UITextFieldDelegate`为您的`UITextField`.

在`UITextFieldDelegate`'s`(void)textFieldDidBeginEditing:(UITextField *)textField`方法中，您可以将主视图的 alpha 设置为 0.7 左右。`UIView`或者，您可以在主视图顶部添加另一个 alpha 0.7 的黑色对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:08:23.603

为什么不使用 iOS SDK 提供的搜索栏？它包含您需要的所有内容，并将按照屏幕截图所示操作...如果您不想要它，那么@ugur 会回答您

# xcode - 如果语句不起作用 - 这种语法有什么问题？

> ID：10595687
> 
> 赞同：0
> 
> 时间：2012-05-15T07:00:40.357
> 
> 标签：xcode, if-statement

我收到一条针对 if 行的“预期标识符”消息。任何想法为什么？

```
 if ([inputA.text isEqualToString:@""]) && ([inputB.text <> isEqualToString:@""]) { 
        c = 1;
    } 
```

我想说这两个输入都是空的......我想没有更简单的方法来说明 Obj C++ 中的文本是否为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:06:48.457

```
if ([inputA.text length]==0 && [inputB.text length]==0)
{     
    c = 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:45:18.380

语句要求将`if`其条件表达式括在括号中。你有一个复合表达式。您已经在逻辑 AND 操作 (&&) 的子表达式周围使用了括号，但您没有将整个表达式括在括号中。（在这种情况下，子表达式实际上不需要括号，但它们不会造成伤害。）

`<>`接下来，您在第二个子表达式中有一个随机数。那在里面做什么？在某些语言中，它是“不等于”运算符，但是 a）它不是 C 或 Objective-C 中的运算符，b）它不会进入这样的消息发送表达式中，并且 c）你声称你正在尝试检查两个输入是否为空，所以我不希望您尝试用空字符串否定测试是否相等。

因此，仅解决这些问题会产生：

```
if ([inputA.text isEqualToString:@""] && [inputB.text isEqualToString:@""]) { 
    c = 1;
} 
```

也就是说，派的答案也很好。如果任何一个输入也具有`nil`文本属性，它也可以工作。

# ffmpeg - 如何在ffmpeg中将帧编码方法设置为CABAC

> ID：10595689
> 
> 赞同：3
> 
> 时间：2012-05-15T07:00:47.703
> 
> 标签：ffmpeg, h.264, lossless

我正在尝试使用 C 中的 ffmpeg 将视频帧编码为 H264 格式。在配置编码器属性时，我看不到如何将帧编码方法设置为 CABAC（无损）。任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:07:36.357

将`coder_type`编码器上下文的值设置为`FF_CODER_TYPE_AC`。

# vb.net - 错误：基于opencv的应用开发

> ID：10595690
> 
> 赞同：0
> 
> 时间：2012-05-15T07:00:49.247
> 
> 标签：vb.net, visual-studio-2008, opencv, opencvdotnet

我使用 Windows 控制台应用程序 vs2008 完成了我的 opencv 代码，而不是将其作为 dll 并在 Windows 应用程序 vb.net 中使用。运行时出现此错误。我没有得到我做错的地方。错误是这样的

```
unhandled exception has occurred in your application if you click continue the application will close immediately.unable to load aranga.dll.The application failed to start because its side by side configuration incorrect. 
```

aranga.dll 是我的 dll 有我的编码 opencv 编码部分。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:24:28.143

当你运行一个需要加载DLL的应用程序时，系统会先在应用程序所在目录（即与你的.exe相同的文件夹）中查找DLL，如果找不到则继续在定义的目录中查找。`PATH`环境变量，还有`C:\Windows\system32`.

如果您的 DLL 存在于这些位置中的任何一个，则问题可能是您的 DLL 具有未找到的依赖项。我建议您使用[Dependency Walker](http://www.dependencywalker.com/)来帮助您完成此任务。

# php - 在 PHP 中将 ASCII 转换为纯文本

> ID：10595691
> 
> 赞同：10
> 
> 时间：2012-05-15T07:00:49.513
> 
> 标签：php, html, ascii, plaintext

我正在抓取一些网站，并且有 ASCII 文本，我想将其转换为纯文本以存储在数据库中。例如我想要

```
I have got to tell anyone who will listen that this is
one of THE best adventure movies I&#x27;ve ever seen.
It&#x27;s almost impossible to convey how pumped I am
now that I&#x27;ve seen it. 
```

转换成

```
I have got to tell anyone who will listen that this is
one of THE best adventure movies I've ever seen. It's
almost impossible to convey how pumped I am now that
I've seen it. 
```

我用谷歌搜索了我的手指血腥，有什么帮助吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-15T07:31:02.903

您可以使用[`html_entity_decode`](https://secure.php.net/manual/en/function.html-entity-decode.php)：

```
echo html_entity_decode('...', ENT_QUOTES, 'UTF-8'); 
```

几点注意事项：

*   请注意，看起来您实际上想要从 HTML 编码的字符串（带有类似 的实体`&#27;`）转换为 ASCII AKA 纯文本。

*   此示例转换为[UTF-8](https://en.wikipedia.org/wiki/UTF-8)，这是所有 ASCII 字符（即低于 128 的字符代码）的 ASCII 兼容字符编码。如果您真的想要纯 ASCII（从而丢失所有重音字符和外语字符），您应该分别删除所有有问题的字符。

*   最后一个参数（'UTF-8'）对于保持与不同 PHP 版本的兼容性是必要的，因为自 PHP 5.4.0 以来默认值已更改。

更新：[ideone 中的文本示例](https://ideone.com/3ux0jk)。

更新 2：根据@Daan 的建议将 ENT_COMPAT 更改为 ENT_QUOTES。

# svn - SVN 存储库结构

> ID：10595692
> 
> 赞同：1
> 
> 时间：2012-05-15T07:00:50.473
> 
> 标签：svn

我的公司即将改用 svn，我正在寻找有关存储库结构的建议。

我们目前有大约 10 个项目和一个内部通用软件商店，其中一些项目使用，一些不使用。由于通用软件是在内部修改的，因此它本身就是一个项目。因此，尽管项目不相关，但它们可能共享相同的通用软件。

使用通用软件的项目总是指一个基线版本，即通用软件在任何项目下都不会被修改（除了通用软件项目本身）。

那么每个项目的单独存储库是否是最好的，使用 svn:externals 挂钩通用软件项目“标记”版本？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:03:08.197

我建议您根据[http://svnbook.red-bean.com/en/1.7/svn.reposadmin.planning.html](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.planning.html)中的第一个示例将所有内容放在一个存储库中。COMMON 将是所有其他项目中的一个。

然后将 COMMON 的发布标签复制到每个项目，反映每个项目当前使用的 COMMON 的版本。

示例布局：

```
/common
  /branches
    /common_improvements1
    /common_improvements2
  /tags
    /common-1.0.0
    /common-1.0.1
  /trunk
/projA
  /branches
    /stable-1.0
      /common (=copy of /projA/trunk@oldrev =copy of /common/tags/common-1.0.0)
    /stable-2.0
      /common (=copy of /projA/trunk@somerev =copy of /common/tags/common-1.0.1)
    /projA_ongoing_fix_branch
  /tags
    /1.0.1
    /1.0.2
    /1.1.0
    /2.0.0
    /2.0.1
  /trunk
    /common (=copy of /common/tags/common-1.0.1)
/projB
  (similar structures)
/projC
  (similar structures) 
```

好处：

1.  COMMON 和项目之间的轻松访问和可追溯性
2.  如果有用，用户可以轻松地进行交互、测试和支持彼此的努力
3.  COMMON 发布标签的副本回答了这个问题：我们目前在这个项目中使用的是哪个版本的 COMMON？

导入期间的可选步骤：

您今天的所有项目是否有一个共同的布局，例如服务器上的文件结构或另一个版本控制系统？如果是这样，我建议您：

1.  将整个布局导入新存储库中的文件夹，例如 /root/old_layout
2.  将项目文件和文件夹移动到 svn repos 内的新布局中

这样做的好处是修订日志回答了以下问题：这个文件在我们之前的结构中在哪里？这在向开发人员传授新结构时非常有用，如果临时资源（例如顾问）在布局更改后返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:46:02.917

所有开发人员都会在所有项目上工作吗？还是每个开发人员都只在一个特定的项目上工作？

如果是前者，我会考虑将每个项目作为一个分支（因为在分支之间切换比在存储库之间切换更容易）。您还可以非常轻松地为新项目创建新分支。

如果是后者，那么单独的存储库可能更清洁且更易于管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:50:42.863

不要使用单独的存储库，将它们全部放在一个中（SVN 可以非常愉快地处理非常大的存储库）。这将使您在将来共享通用代码和分支方面受益。

无论如何，区别实际上只是顶层的一个额外“目录”。好处是更少的维护和更容易的访问。

# cocoa - 在 Cocoa 中使用鼠标移动控件

> ID：10595701
> 
> 赞同：0
> 
> 时间：2012-05-15T07:01:31.863
> 
> 标签：cocoa, events, mouse

我想在 Cocoa 中构建一个简单的表单设计器，并且需要使用鼠标在表单上移动控件（单击、按住、移动、释放）。

我是否需要从所有控制类继承新类来拦截这些事件？有没有办法为任何控件通用地实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:54:53.940

编写自定义视图以包含控件。覆盖`-hitTest:`以忽略控件并返回`self`。然后，当您收到鼠标事件时，找出它们适用于哪个控件并酌情移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:02:04.380

一种方法可能是使用单个大型自定义视图来填充控件所在的所有空间。实现必要的方法以在此视图中实现鼠标事件，对控件视图进行命中检测并移动它们。这种方法只需要 NSView 的 1 个自定义子类，您可以使用任何想要移动的视图或控件，而无需对其进行子类化。

# php - 检查是否在字符串中找到数组中的任何项

> ID：10595702
> 
> 赞同：0
> 
> 时间：2012-05-15T07:01:36.527
> 
> 标签：php, arrays

我知道以前有人问过这个问题，但我无法让提供的解决方案发挥作用。

我正在尝试检查数组中的单词是否与提供的字符串中的任何单词（或部分单词）匹配。

我目前有以下代码，但它仅适用于数组中的第一个单词。其余的总是返回 false。

“输入”将是“干草堆”，“值”将是“针”

```
function check($array) {
    global $input;
    foreach ($array as $value) {
            if (strpos($input, $value) !== false) {
                    // value is found
                    return true;
            } else {
                return false;
            }
    }   
} 
```

例子：

```
$input = "There are three";
if (check(array("one","two","three")) !== false) {
     echo 'This is true!';
} 
```

在上面，“有一个”的字符串返回为真，但“有两个”或“有三个”的字符串都返回假。

如果可以使用不需要使用正则表达式的解决方案，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:16:12.960

这里的问题是 check**总是**在`$array`. 如果找到匹配项，则返回`false`，否则返回`true`。在该 return 语句之后，该函数完成，其余项目将不被检查。

```
function check($array) {
    global $input;
    foreach($array as $value) {
        if(strpos($input, $value) !== false) {
            return true;
        }
    }
    return false;
} 
```

上面的函数只在找到匹配项时返回 true，或者在遍历完`$array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:27:52.563

The reason your code doesnt work, is because you are looping through the array, but you are not saving the results you are getting, so only the last result "counts". In the following code I passed the results to a variable called `$output`:

```
function check($array) {
    global $input;
    $output = false;
    foreach ($array as $value) {
        if (strpos($input, $value) != false) {
            // value is found
            $output = true;
        } 
    }
    return $output;
} 
```

and you can use it like so:

```
$input = "There are two";
$arr = array("one","two","three");
if(check($arr)) echo 'this is true!'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:16:56.317

这里的问题是你在 return 语句中打破了函数。所以你总是在第一次比较之后被删掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:18:01.647

您将在 的每次迭代中返回`$array`，因此它只会运行一次。您可以使用`stristr`or`strstr`检查是否`$value`存在于`$input`.

像这样的东西：

```
function check($array) {
    global $input;
    foreach ($array as $value) {
        if (stristr($input, $value)) {
            return true;
        }
    }
    return false;
} 
```

然后，这将遍历数组的每个元素，`true`如果找到匹配则返回，如果没有，则在完成循环后将返回 false。

如果您需要检查**每个**单独的项目是否存在，`$input`您必须做一些不同的事情，例如：

```
function check($array) {
    global $input;
    $returnArr = array();
    foreach ($array as $value) {
        $returnArr[$value] = (stristr($input, $value)) ? true : false;
    }
    return $returnArr;
}

echo '<pre>'; var_dump(check($array, $input)); echo '</pre>';

// outputs

array(3) {
  ["one"]=>
  bool(false)
  ["two"]=>
  bool(false)
  ["three"]=>
  bool(true)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T07:09:05.413

strpos(); 这里完全错误，你应该简单地尝试

```
if ($input == $value) {
    // ...
} 
```

并通过

```
if ($input === $value) { // there are THREE of them: =
    // ...
} 
```

您甚至可以检查变量的类型是否相同（字符串、整数、...）

更专业的解决方案是

```
 in_array(); 
```

它检查键或值的存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T07:19:16.563

您应该使用 in_array() 来比较数组值。

```
function check($array) {
    global $input;
    foreach ($array as $value) {

        if (in_array($value,$input))
      {
        echo "Match found"; 
        return true;
      }
    else
      {
        echo "Match not found";
        return false;
      }
    }   
} 
```

# php - PHP 脚本不会将 CSV 导入 MySQL

> ID：10595703
> 
> 赞同：1
> 
> 时间：2012-05-15T07:01:37.017
> 
> 标签：php, mysql, csv

```
# download the file off the internet
    $file = file_get_contents("http://localhost/sample.csv");
    $filepath = "C:/xampp/htdocs/test/file/sample.csv";
    file_put_contents($filepath, $file);
# load the data into sample table
    $pt1 = "LOAD DATA LOCAL INFILE ";
    $pt2 = "'/C:/xampp/htdocs/test/file/sample.csv' INTO TABLE sample ";
    $pt3 = "FIELDS TERMINATED BY ',' ENCLOSED BY '\"' ";
    $pt4 = "LINES TERMINATED BY '\r\n' ";
    $pt5 = "(col1,col2,col3,col4)";
    $sqlquerynew = $pt1.$pt2.$pt3.$pt4.$pt5;
    mysql_query($sqlquerynew); 
```

这段代码适用于非 csv（好吧，我用文本文件对其进行了测试）。

在这部分运行之前，我必须创建一个表。现在已创建表，但未加载任何数据。路径中所述的文件存在。

可能是什么问题呢？

谢谢

这是我在网上找到的示例 csv

```
"REVIEW_DATE","AUTHOR","ISBN","DISCOUNTED_PRICE"
"1985/01/21","Douglas Adams",0345391802,5.95
"1990/01/12","Douglas Hofstadter",0465026567,9.95
       ....... etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:25:51.623

两个问题

```
$pt2 = "'/C:/xampp/htdocs/test/file/sample.csv' INTO TABLE sample "; 
```

去掉`/`C 前面的。

其次，

```
$pt5 = "(col1,col2,col3,col4)"; 
```

确保您有正确的列名称。如果要导入`*`所有列，只需将其删除。在您的情况下删除标题也是一个好主意，因为删除`$pt5`您会成功，但标题行将添加到表中。

# magento - 在 Magento 结帐中更改结帐步骤顺序

> ID：10595704
> 
> 赞同：6
> 
> 时间：2012-05-15T07:01:39.893
> 
> 标签：magento

我想知道是否可以更改结帐步骤顺序。默认情况下，步骤是： - 账单地址 - 送货地址 - 送货方式 - 付款方式 - 订单审核。

我想把帐单地址放在第三位，所以它是： - 送货地址 - 送货方式 - 帐单地址......

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:43:37.873

你可以去：

> app/code/core/mage/checkout/block/onepage.php

换行

```
$stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'review'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T05:59:47.403

**您不会直接在核心文件上进行更改：**

> app/code/core/mage/checkout/block/onepage.php

复制这个文件。

```
app/code/local/mage/checkout/block/onepage.php 
```

并更改此行：

```
$stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'review'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T07:27:54.417

这不是接触核心文件的好习惯。您可以通过覆盖模块来做到这一点。

参考：

[http://www.magentocommerce.com/wiki/5_-_modules_and_development/checkout/customizing_onepage_checkout_-_remove_shipping_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/checkout/customizing_onepage_checkout_-_remove_shipping_method)

# javascript - 2个事件的jquery函数

> ID：10595707
> 
> 赞同：0
> 
> 时间：2012-05-15T07:02:01.443
> 
> 标签：javascript, jquery

在下面的 jquery 中，当我在文本框中输入一个值（keyup）时，它会起作用：-

```
<script type="text/javascript">
$(function(){
    var minTenderNum;
    $("#tenmoney").keyup(function(){
        var minTenderMoney = $(this).val();
        if(minTenderMoney <=1000)
            minTenderNum = 3;
        else if(minTenderMoney > 1000)
            minTenderNum = 5;

        $('#sunum').children().remove().end();
        maxTenderNum = minTenderNum + 4;
        for(var i=minTenderNum;i <=maxTenderNum;i++)
        $('#sunum').append(new Option(i, i, true, true));

        $("#uniform-sunum>span").html('');
    });
});
</script>
     <select id="sunum" name="sunum">
     </select> 
```

有时，页面加载时已经存在一个值，但我必须修改该值并“向上键”以便函数再次启动。

如果我希望在加载时包含一个事件，我应该如何修改该功能？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:04:59.500

执行此操作的方法之一是准备好文档您可以像这样触发 keyup 事件

```
$("#tenmoney").trigger('keyup'); 
```

在文档就绪回调中添加这一行

```
$(function(){

}); 
```

或者甚至更好地调用[$.keyup()](http://api.jquery.com/keyup/)而不带任何参数，这会像这样在该元素上触发 keyup 事件

```
$("#tenmoney").keyup(); 
```

# iphone - abybody 知道以下代码片段的含义吗？

> ID：10595711
> 
> 赞同：1
> 
> 时间：2012-05-15T07:02:15.040
> 
> 标签：iphone, objective-c

abybody 知道以下代码片段的含义吗？

```
define insist(e) 
if(!(e)) 
    [NSException raise: @"assertion failed." format: @"%@:%d (%s)", [[NSString stringWithCString:__FILE__ encoding:NSUTF8StringEncoding] lastPathComponent], __LINE__, #e] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:05:59.627

它定义了一个用于异常处理的宏。如果`e`为 nil，则文件、行和哪个变量未通过测试将引发异常。

# jquery - 在ajax中使用for循环的Fullcalendar

> ID：10595713
> 
> 赞同：0
> 
> 时间：2012-05-15T07:02:31.443
> 
> 标签：jquery, ajax, fullcalendar

我想`for`在 AJAX 中使用带有 FullCalendar JQuery 插件的循环。
可能吗？

我的代码是

```
$("#frm").attr("action","readCountOfAdv.do");
$("#frm").ajaxSubmit(advCount);

var advCount = {
        success : function(resultData) {
            var result = JSONtoString(resultData);
            var array = result.split(",");

            data = {events: [
                for(i=1 ; i<=arry.length ; i++){
                    if(i < array.length){
                        {
                            title: 'a',
                            start: '2012-05-14'
                        },
                    }else if(i == array.length){
                        {
                            title: 'a',
                            start: '2012-05-14'
                        }
                    }
                }
            ]};
            calendar.fullCalendar( 'addEventSource', data );

        },
        type : "post",
        dataType : "json",
        error : function() {
            alert("error");
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:02:14.057

我能想到两种解决方案。第一个依赖于 Array.prototype.map - 在一些较旧的浏览器中不可用，但很容易替换（参见[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)）

```
data = {
    events: array.map(function(element,i){
        if(i < array.length){
            return {
                title: 'a',
                start: '2012-05-14'
            };
        }else if(i == array.length){
            return {
                title: 'a',
                start: '2012-05-14'
            };
        }
    }
}; 
```

第二个没有，而是使用 Array.prototype。它有点不那么优雅。

```
data = { events: [] };
array.forEach(function(element,i){
    if(i < array.length){
        data.events.append({
            title: 'a',
            start: '2012-05-14'
        });
    }else if(i == array.length){
        data.events.append({
            title: 'a',
            start: '2012-05-14'
        });
    }
}); 
```

编辑：有第三个选项，基于第二个，可能比第二个更优雅。

```
data = {
    events: (function(arrayIn){
        arrayOut=[];
        arrayIn.forEach(function(element,i){
            if(i < arrayIn.length){
                arrayOut.append({
                    title: 'a',
                    start: '2012-05-14'
                });
            }else if(i == array.length){
                arrayout.append({
                    title: 'a',
                    start: '2012-05-14'
                });
            }
        });
        return arrayOut;
    })(array)
} 
```

# php - php , 如何从 SOAP MTOM 附件中解码/保存文件？

> ID：10595714
> 
> 赞同：3
> 
> 时间：2012-05-15T07:02:33.450
> 
> 标签：php, soap, xml-parsing, mtom

我正在尝试获取内容/保存 webservice 返回的 zipfile 。但是，似乎 API 提供了以 Base64 二进制格式编码的文件，并根据 SOAP MTOM 标准包含在响应中。我已经尝试了 2 个小时的一些解决方法，因此我们将不胜感激任何帮助。响应如下所示：

```
--MIMEBoundaryurn_uuid_9ADB5E0C3BD2353F98133706376435374151
Content-Type: application/xop+xml; charset=utf-8; type="text/xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:9ADB5E0C3BD2353F98133706376435374152>
<?xml version='1.0' encoding='UTF-8'?><downloadFileResponse xmlns="http://www.pe.com/marketplace/services"><ack>Success</ack><version>1.1.0</version><timestamp>2012-05-15T06:36:04.353Z</timestamp><fileAttachment><Size>3204907</Size><Data><xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:urn:uuid:FED4FAD1B1E74C8B391337063821260"/></Data></fileAttachment></downloadFileResponse>

--MIMEBoundaryurn_uuid_9ADB5E0C3BD2353F98133706376435374151
Content-Type: application/zip
Content-Transfer-Encoding: binary
Content-ID: <urn:uuid:FED4FAD1B1E74C8B391337063821260>
here is some messy code   ADASLKDAKDNAKJDNAKDNKJNDSAKDJNAKDJADA which is actually the file content itself 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:17:17.737

我希望这对某人有所帮助......我只是在凌乱的字符之前删除了所有标记代码/mime 类型 xml 等，并将内容保存为 .zip 文件。这不是一个理想的解决方案，但它有效。

```
--MIMEBoundaryurn_uuid_9ADB5E0C3BD2353F98133706376435374151
Content-Type: application/xop+xml; charset=utf-8; type="text/xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:9ADB5E0C3BD2353F98133706376435374152>
<?xml version='1.0' encoding='UTF-8'?><downloadFileResponse xmlns="http://www.pe.com/marketplace/services"><ack>Success</ack><version>1.1.0</version><timestamp>2012-05-15T06:36:04.353Z</timestamp><fileAttachment><Size>3204907</Size><Data><xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:urn:uuid:FED4FAD1B1E74C8B391337063821260"/></Data></fileAttachment></downloadFileResponse>

--MIMEBoundaryurn_uuid_9ADB5E0C3BD2353F98133706376435374151
Content-Type: application/zip
Content-Transfer-Encoding: binary
Content-ID: <urn:uuid:FED4FAD1B1E74C8B391337063821260> 
```

# android - 无法刷新 ListView

> ID：10595717
> 
> 赞同：0
> 
> 时间：2012-05-15T07:02:46.763
> 
> 标签：android, listview

单击“更多”按钮后，它假设会将列表视图从 10 扩展到 20。

但是单击后，列表视图没有扩展并保持原始大小。

它只能保持滚动条的位置。这是我需要的一半。

```
newsid = new int[webservice.news.size()];
        title = new String[webservice.news.size()];
        date = new String[webservice.news.size()];
        imagepath = new String[webservice.news.size()];
        for (int i = 0; i < webservice.news.size(); i++) {
            newsid[i] = webservice.news.get(i).getID();
            title[i] = webservice.news.get(i).getNtitle();
            date[i] = webservice.news.get(i).getNArticalD();
            imagepath[i] = webservice.news.get(i).getImagePath();
        }
        adapter = new CustomAdapter_ParticularCategoryAllNews(this, title,
                date, imagepath);
        lv.addFooterView(footermore);
        if (constant.isOnline()) {
            lv.addFooterView(constant.AdMob());
        }
        TextView titletext = (TextView) findViewById(R.id.text_pagetitle);
        titletext.setText(pagetitletext.toString());
        lv.setAdapter(adapter); 
```

这是启动活动时的调用。

```
btnmore.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
for (int i = 0; i < webservice.news.size(); i++) {                                                                           
newsid[i] = webservice.news.get(i).getID();
title[i] = webservice.news.get(i).getNtitle();
date[i] = webservice.news.get(i).getNArticalD();
imagepath[i] = webservice.news.get(i).getImagePath();
}       
adapter.setTitle(title);
adapter.setDate(date);
adapter.setImagepath(imagepath);
position = lv.getFirstVisiblePosition();
lv.smoothScrollToPosition(position);
adapter.notifyDataSetChanged(); 
```

这就是我点击“更多按钮”后所说的。然而，该列表并未从 10 项扩展到 20 项。

```
public class CustomAdapter_ParticularCategoryAllNews extends BaseAdapter {

private Activity activity;
private String[] title, date, imagepath;
private static LayoutInflater inflater = null;
private ImageLoader_Loader imageLoader;
private WindowManager wm = null;
private Display display;
private Config_ConstantVariable constant;

public CustomAdapter_ParticularCategoryAllNews(Activity a, String[] title,
        String[] date, String[] imagepath) {
    activity = a;
    this.title = title;
    this.date = date;
    this.imagepath = imagepath;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    wm = (WindowManager) activity.getSystemService(Context.WINDOW_SERVICE);
    imageLoader = new ImageLoader_Loader(activity.getApplicationContext());
    constant = new Config_ConstantVariable(activity);
}

public int getCount() {
    return title.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public void setTitle(String[] title) {
    this.title = title;
}

public void setDate(String[] date) {
    this.date = date;
}

public void setImagepath(String[] imagepath) {
    this.imagepath = imagepath;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.main_particularcategoryallnewslist,
                parent, false);

    LinearLayout linear = (LinearLayout) vi.findViewById(R.id.layout_image);

    ImageView imageview = (ImageView) vi
            .findViewById(R.id.image_categoryallnewstitle);

    TextView titletext = (TextView) vi
            .findViewById(R.id.text_categoryallnewstitle);

    TextView datetext = (TextView) vi.findViewById(R.id.text_newsdate);

    if (!imagepath[position].toString().equals("no picture")) {
        imageview.setVisibility(View.VISIBLE);
        linear.setVisibility(View.VISIBLE);
        imageLoader.DisplayImage(imagepath[position], imageview);
    } else {
        imageview.setVisibility(View.GONE);
        imageview.setImageDrawable(null);
        linear.setVisibility(View.GONE);
        display = wm.getDefaultDisplay();
        int screenWidth = display.getWidth();
        titletext.setWidth(screenWidth);
    }
    if (constant.getscreenresolution() >= 800 && constant.ScreenOrientation() == 1) {
        titletext.setTextSize(TypedValue.COMPLEX_UNIT_PX, 30);
        datetext.setTextSize(TypedValue.COMPLEX_UNIT_PX, 20);
    }
    titletext.setText(title[position].toString());
    datetext.setText(date[position].toString());
    return vi;
} 
```

}

这是 CustomAdapter 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:45:26.627

适配器.notifyDataSetChanged(); 试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:33:40.273

在您的适配器中添加：

```
public void setTitle(String[] title) {
    this.title = title;
}

public void setDate(String[] date) {
    this.date = date;
}

public void setImagepath(String[] imagepath) {
    this.imagepath = imagepath;
} 
```

当按下更多按钮时，使用包含 20 个对象的数组调用上面的三个方法。然后调用`notifyDataSetChanged`您的适配器。

**更新：**

这对我有用：活动：

```
public class HelpProjectActivity extends Activity {

    private ArrayList<Item> items;
    private boolean extend = false;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        createArray();

        ListView lv = (ListView)findViewById(R.id.list);
        lv.setAdapter(new HelpListAdapter());
    }

    private void createArray() {
        items = new ArrayList<Item>();
        for(int i = 0; i < 20; i++) {
            Item item = new Item();
            item.title = "Title " + i;
            item.subtitle = "Subtitle " + i;
            item.image = "default";
            items.add(item);
        }
    }

    public void morePressed(View v) {
        extend = !extend;
        Button b = (Button) findViewById(R.id.button);
        b.setText(extend ? R.string.less_button : R.string.more_button);
        ListView lv = (ListView)findViewById(R.id.list);
        ((BaseAdapter)lv.getAdapter()).notifyDataSetChanged();
    }

    private class HelpListAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            if (extend) {
                return items.size();
            } 
            return items.size()/2;
        }

        @Override
        public Object getItem(int pos) {
            return items.get(pos);
        }

        @Override
        public long getItemId(int pos) {
            return pos;
        }

        @Override
        public View getView(int pos, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                v = View.inflate(getApplicationContext(), R.layout.litst_item, null);
            }
            Item item = items.get(pos);
            TextView titleText = (TextView) v.findViewById(R.id.list_item_title);
            titleText.setText(item.title);
            TextView subtitleText = (TextView) v.findViewById(R.id.list_item_subtitle);
            subtitleText.setText(item.subtitle);
            ImageView image = (ImageView) v.findViewById(R.id.list_image);
            if (item.image.equalsIgnoreCase("default")) {
                image.setImageResource(R.drawable.default_list_image);
            } else {
                // what ever
            }
            return v;
        }

    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_margin="10dp"
        android:onClick="morePressed"
        android:text="@string/more_button" />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/list_image"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_margin="5dp"
        android:layout_gravity="center_vertical"
        android:contentDescription="@string/list_image" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/list_item_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/list_item_subtitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="italic" />
    </LinearLayout>

</LinearLayout> 
```

项目.java：

```
public class Item {
    String image;
    String title;
    String subtitle;
} 
```

# linux - 当用户第一次打开网络浏览器时如何在局域网计算机上询问用户名和密码

> ID：10595718
> 
> 赞同：-1
> 
> 时间：2012-05-15T07:02:50.983
> 
> 标签：linux, ubuntu-10.04

我已经制作了 10 个用户和密码的数据库。现在我想在局域网计算机上提示一个对话框，他们每次打开浏览器访问互联网时都必须输入我提供的用户名和密码。我该怎么做？我还安装了一个 squid 代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:22:38.130

也许这会有所帮助：[http](http://wiki.squid-cache.org/ConfigExamples/Authenticate/Mysql) ://wiki.squid-cache.org/ConfigExamples/Authenticate/Mysql （假设你有一个 MySQL 数据库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:19:01.073

您可以只使用基本的用户名和密码身份验证。因为您只谈论 10 个用户。

[https://nodevine.com/library/messing-with-http-headers-in-squid-2-6-and-3-0-for-high-anonymity-in-centos-and-ubuntu](https://nodevine.com/library/messing-with-http-headers-in-squid-2-6-and-3-0-for-high-anonymity-in-centos-and-ubuntu)

# c# - WriteToEventLog 将异常记录到 sql aspnet_db 日志文件

> ID：10595729
> 
> 赞同：0
> 
> 时间：2012-05-15T07:03:44.493
> 
> 标签：c#, asp.net, .net, trace

有谁知道在下面的 aspnetdb_log 文件中写入事件日志是我在网上找到的带有原始代码行的代码片段，但是 Log.LogException(..) 不起作用或者我不知道该库使用所以我使用了EventLog。我想要做的是将错误或事件记录到 aspnetdb_log 文件中，我的代码是否可以正常工作我还没有测试过，因为我处于起步阶段，如果有人可以进行任何更正，请回复谢谢。这是针对自定义会员提供者

```
private void WriteToEventLog(Exception e, string action)
{
    string message = action + "-" + e.Message;

    if (!EventLog.SourceExists("aspnetdb_log"))
    {
        EventLog.CreateEventSource("aspnetdb_log", "aspnetdb_log");
    }

    EventLog log = new EventLog();
    log.Source = "aspnetdb_log";
    log.WriteEntry(message, EventLogEntryType.Error);

    // original code doesn't work 
    // Log.LogException(message, e, LogCategory.Membership, TraceEventType.Error);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:08:35.663

我建议查找或编写您自己的自定义[TraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)以写入您想要的数据库。

然后在你的类中使用[TraceSource](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx)，并在 Web.config 中进行配置。

班级：

```
public class SqlTraceListener : TraceListener
{
    ...
} 
```

用法：

```
private static TraceSource _traceSource = new TraceSource("MySource");

_traceSource.Trace(...); 
```

配置：

```
<system.diagnostics>
    <sources>
        <source name="MySource" />
    </sources>
    <sharedListeners>
        <add name="sql" type="SqlTraceListener" />
    </sharedListeners>
    <trace autoflush="true">
    </trace>
</system.diagnostics> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:19:56.090

您需要具有管理权限才能使用 CreateEventSource 创建 EventSource。

如果 aspnetdb_log 源已经存在，我相信您的代码应该可以正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:53:19.073

我建议看看[Log4Net](https://logging.apache.org/log4net/)，它有许多不同的附加程序，允许您登录到不同的位置，即数据库、事件日志以及文本文件。

[这](http://www.codeproject.com/Articles/140911/log4net-Tutorial)是一个关于使用不同附加程序的很好的教程

# javascript - 在Javascript中添加列表

> ID：10595731
> 
> 赞同：0
> 
> 时间：2012-05-15T07:03:54.880
> 
> 标签：javascript, jquery

我想在单击 Javascript 中的锚点或按钮时添加另一个列表，其中应包含多个文本框、一个选项列表和第二个和后续列表上的删除按钮。看着：

[http://jsfiddle.net/KMLkn/3/](http://jsfiddle.net/KMLkn/3/)

我们可以为此使用 clone(jquery) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:20:19.893

试试这个： http: [//archive.plugins.jquery.com/project/jquery-dynamic-form](http://archive.plugins.jquery.com/project/jquery-dynamic-form)
在此处查看演示：http: [//sroucheray.org/blog/jquery-dynamic-form/](http://sroucheray.org/blog/jquery-dynamic-form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:23:22.977

是的，可以使用 jquery 进行克隆。只是一个示例，请参见此处的小提琴[示例](http://jsfiddle.net/KMLkn/8/)

# debugging - Windows 内核调试 - 获取线程消息队列的地址？

> ID：10595735
> 
> 赞同：0
> 
> 时间：2012-05-15T07:04:00.290
> 
> 标签：debugging, windows-kernel

我想监视应用程序主线程的消息队列的内容，但我不知道如何获取它的地址（WinDbg，内核调试）。有人对我有提示吗？问题是，当我们的主线程在*WaitForSingleObject中停留更长的时间时，我们有时会在之后调用**PostMessage*时得到“配额不足...” 。我很清楚这是关于消息队列溢出的问题，但我无法找到（使用 Spy++）同时向主线程发布这么多消息的人。

不，我现在不能改变糟糕的设计 :) 我知道不能使用主线程来等待一个事件，但正如我所说 - 我不能在接下来的几个月内改变它。

我想找出哪些消息溢出队列，我的第二个想法（第一个是Spy++）是观察主线程的消息队列。

也许还有其他好主意？

问候， Maciej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:29:08.823

也许这篇文章[http://blog.airesoft.co.uk/2009/11/jumping-the-queues/](http://blog.airesoft.co.uk/2009/11/jumping-the-queues/)可以回答你的问题。

# mysql - Rails - MySQL大写表名的第一个字母

> ID：10595736
> 
> 赞同：0
> 
> 时间：2012-05-15T07:04:00.883
> 
> 标签：mysql, ruby-on-rails-3, uppercase

我是 Rails 新手，我正在连接到远程数据库。连接正常，但出现错误：

```
Mysql2::Error: Table 'catalogo.productos' doesn't exist: SHOW FULL FIELDS FROM `productos` 
```

我知道我要访问的表是 Productos 而不是 productos。我试过使用：

```
class Productos < ActiveRecord::Base
  establish_connection "catalogo"
  set_table_name "Productos"
end 
```

但我不断收到错误。我需要做什么？我不能修改表的名称，我只有 SELECT 权限。

我将向控制器显示错误显示的位置

```
require "Producto.rb"

class StoreController < ApplicationController
  def index
    Products = Producto.find(:all)
  end
end 
```

我正在使用 Rails 3.2.3 和 Ruby 1.9.3。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:49:38.913

您的型号名称应该是单数。更改`class Productos`为`class Producto`

```
class Producto < ActiveRecord::Base
 establish_connection "catalogo"
 set_table_name "Productos"
end 
```

# r - 用 R 语言计算列联表

> ID：10595737
> 
> 赞同：2
> 
> 时间：2012-05-15T07:04:06.657
> 
> 标签：r, statistics, frequency

我在R中有一个数据集如下

```
ID  Variable1  Variable2 Choice
1   1          2         1
1   2          1         0
2   2          1         1
2   2          1         1 
```

我需要得到它的输出表，如下所示

```
Id Variable1-1 Variable1-2 Variable2-1 Variable2-2
1  1           0           0           1
2  0           2           2           0 
```

请注意，只有选择为 1 的行才被计算（选择是二进制变量，但其他变量具有任何整数值）。目的是为变量提供与其级别一样多的列。

有没有办法在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:44:02.087

我花了一段时间才弄清楚你在追求什么，但我明白了（我想）。我已经按照您的要求完成了，但充其量只是令人费解。我认为这将帮助其他人了解您的需求，并且您现在会得到更好的答案。

```
dat <- read.table(text="ID  Variable1  Variable2 Choice
1   1          2         1
1   2          1         0
2   2          1         1
2   2          1         1", header=T)

A <- split(dat$Choice, list(dat$Variable1, dat$ID))
B <- split(dat$Choice, list(dat$Variable2, dat$ID))
C <- list(A, B)

FUN <- function(x) sapply(x, function(y) sum(y))

FUN2 <- function(x){
    len <- length(x)/2
    rbind(x[1:len], x[(len+1):length(x)])
}

dat2 <- do.call('data.frame', lapply(lapply(C, FUN), FUN2))
colnames(dat2) <- c('Variable1-1', 'Variable1-2', 'Variable2-1', 
    'Variable2-2')
dat2 
```

这不是你祖母的应急表，这是肯定的。可能有更好的方法来完成所有这些，也许使用`reshape`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:44:24.380

您可以使用包中的`melt`and ：`dcast``reshape2`

```
mydf<-read.table(text="ID  Variable1  Variable2 Choice
1   1          2         1
1   2          1         0
2   2          1         1
2   2          1         1",header=TRUE)

library(reshape2) 
```

首先融化data.frame，只选择那些行`Choice == 1`并删除`Choice`列

```
mydfM <- melt(mydf[mydf$Choice %in% 1, -match("Choice", names(mydf))], id = "ID")

# EDIT above: As @TylerRinker points out, using which could be avoided.
# I've replaced it with %in%

#   ID  variable value
# 1  1 Variable1     1
# 2  2 Variable1     2
# 3  2 Variable1     2
# 4  1 Variable2     2
# 5  2 Variable2     1
# 6  2 Variable2     1 
```

然后投射融化的data.frame，`length`用作聚合函数

```
(mydfC <- dcast(mydfM, ID ~ variable + value, fun.aggregate = length))

#   ID Variable1_1 Variable1_2 Variable2_1 Variable2_2
# 1  1           1           0           0           1
# 2  2           0           2           2           0 
```

# ios - 无法调用 UITabBarController 上的后退按钮

> ID：10595747
> 
> 赞同：0
> 
> 时间：2012-05-15T07:04:38.903
> 
> 标签：ios, ios5, uinavigationcontroller, uitabbarcontroller

我有一个标签栏控制器，在导航控制器中有一个视图。其中一个按钮会弹出一个模态视图。我将我的起始视图设置为模态的代表，并调用以下命令：

```
- (void)dischargeSaveComplete:(dischargeView *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

它正确地关闭了模态视图，但它不调用后退按钮。因为它在标签栏控制器内，我需要做其他事情吗？

我尝试将两者都设置为动画 no，如下所示，它也不起作用。

```
- (void)dischargeSaveComplete:(ehrxEncounterDischargeView *)controller
{
    [self dismissViewControllerAnimated:NO completion:nil];

    [self.navigationController popViewControllerAnimated:NO];
} 
```

根据一个答案找到了解决方案，因为我在标签栏控制器中，所以我必须从第一个视图调用 popviewcontroller，如下所示：

```
- (void)dischargeSaveComplete:(ehrxEncounterDischargeView *)controller
{
    [self dismissViewControllerAnimated:YES completion:^(void) 
    {
        demoView *e = [self.parentViewController.tabBarController.viewControllers objectAtIndex:0];
        [e.navigationController popViewControllerAnimated:YES];
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:13:12.057

您希望 2 个动画彼此跟随，这是不允许的，因为您这样做了。您要么必须取消其中一个动画，要么将 popViewController 放在第一个动画的完成块内。

```
[self dismissViewControllerAnimated:YES completion:^(void) {
    [self.navigationController popViewControllerAnimated:YES];
}
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:18:55.603

你可以尝试延迟执行第二个动作

```
[self.navigationController performSelector:@selector(popViewControllerAnimated:) withObject:@"YES" afterDelay:1]; 
```

希望它有效..快乐编码:)

# android - android - 要使用 listview 滚动的图像

> ID：10595748
> 
> 赞同：0
> 
> 时间：2012-05-15T07:04:49.477
> 
> 标签：android, listview, scrollview

在我的应用程序中，我想在顶部显示一个页面，并在其下方显示一个名称列表。图像可能覆盖 80% 的屏幕，我不想为图像视图或列表视图提供高度。

我尝试过以下方式，我有两个数组列表。一个数组包含图像的 url 和要显示的其他文本，如下所示

```
array 1 = ["http://....","A","B","C","D"......] 
```

下一个数组包含 0 和 1 如下

```
array 2 = [0,1,1,1,1.......] 
```

以下是我的列表视图代码

```
public class listViewHolder 
            {
                ImageView product_hold_image;
                TextView product_hold_subHeading;
            }
            public View getView(final int position, View convertView, ViewGroup parent) 
            {
                listViewHolder holder = null;
                try 
                {
                    if (convertView == null) 
                    {
                        convertView = mLayoutInflater.inflate(R.layout.lst_ly, null);           
                        holder = new listViewHolder();
                        holder.product_hold_image      = (ImageView)convertView.findViewById(R.id.imageView1);
                        holder.product_hold_subHeading = (TextView)convertView.findViewById(R.id.lst_textView1);

                        convertView.setTag(holder);
                    } 
                    else 
                    {
                        holder = (listViewHolder) convertView.getTag();
                    }
                    if(data.get(position).contains("0"))
                    {
                        img = data_phonetxt.get(position).toString();           
                        img = img.replaceAll(" ","%20");        

                        Drawable drawable = LoadImageFromWebOperations(img);
                        holder.product_hold_image.setImageDrawable(drawable);
                    }
                    populateListData(holder, position);
                    notifyDataSetChanged();
                } 
                catch (Exception e) 
                {
                    Log.e("list view holder - error: ",""+e);  
                }
                return convertView;
            }
            public void populateListData(listViewHolder viewHolder, int position) 
            {   
                if(data.get(position).contains("1"))
                {
                    Log.e("data.get(position).contains(0) ","is false");
                    viewHolder.product_hold_image.setVisibility(View.GONE);
                    viewHolder.product_hold_subHeading.setText(data_phonetxt.get(position).toString());
                }
                else if(data.get(position).contains("0"))
                {
                    img = data_phonetxt.get(0).toString();          
                    img = img.replaceAll(" ","%20");        

                    Drawable drawable = LoadImageFromWebOperations(img);
                    viewHolder.product_hold_image.setImageDrawable(drawable);
                }
            } 
```

根据上面的代码，我第一次使用顶部的图像和它下面的所有文本但是当我从上到下滚动列表视图并且当我再次移动到顶部时，图像被一些文本替换,

有没有其他简单的方法可以得到这个，任何建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:01:10.923

我通过在 ListActivity 中使用单独的视图来获得解决方案。

使用单独的视图作为图像视图并将图像视图添加到列表视图的标题中

```
localListView = getListView();
                    LayoutInflater localLayoutInflater = (LayoutInflater)getSystemService("layout_inflater");
                    View localView1 = localLayoutInflater.inflate(R.layout.img1, localListView, false);
                    this.mImageView = ((ImageView)localView1.findViewById(R.id.imageView1));

                    localListView.addHeaderView(localView1, null, false);
                    localListView.setCacheColorHint(0); 
```

# jquery - css中有没有办法选择倒数第二个孩子？

> ID：10595752
> 
> 赞同：3
> 
> 时间：2012-05-15T07:05:05.773
> 
> 标签：jquery, css, css-selectors

还需要确保浏览器兼容性（应该在 IE8 中工作）

我遇到了 - :nth-last-child(2)
但它与浏览器不兼容，因为它是一个 css3 选择器。

我还遇到了一个小贴士，让第二个、第三个、第四个孩子成为 - td:first-child + td + td
但没有办法像
td:last-child - td那样反转
来获得倒数第二个孩子。

我不想使用 jquery。
将类应用于倒数第二个元素是唯一的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:09:18.107

CSS3 nth-last-child 可能是要走的路，因为支持应该变得越来越普遍。

如果做不到这一点，您可以简单地将 CSS 类添加到标记中的元素，例如：

```
<tr>
  <td>...</td>
  <td class = "penultimate">...</td>
  <td>...</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:15:12.087

在指定的条件下，将`class`（或`id`）应用于倒数第二个元素是唯一的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T02:49:32.057

## 只是因为你暗示你正在使用一张桌子

你不清楚你想对倒数第二组做什么，但是，**仅仅因为你的例子是指表格单元格**，我提供了这个可能的解决方案——使用`<col />`样式。

它需要您知道列数。[这是一个解释](http://www.quirksmode.org/css/columns.html)。它对可以设置的样式有***非常严格的限制***（尽管它在 IE8 中确实有效）。[这是一个示例 fiddle](http://jsfiddle.net/FYxHL/2/)，它具有以下示例：

**HTML**

```
<table>
    <col span="2"/>
    <col class="secondToLast"/>
    <tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
    <tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
</table> 
```

**CSS**

```
.secondToLast {
    border: 1px solid blue;
    background-color: cyan;
    width: 100px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T16:39:10.623

nth-last-child 语法：

:nth-last-child(N) { } N 可以是：

number - 任何整数（1、2、10 等）。这将匹配该确切位置的孩子，从父母的底部向上计数。表达式 an+b 形式的代数表达式，允许您匹配更复杂的组合奇数 - 匹配所有其他子元素，从最后一个开始。even - 匹配所有其他孩子，从倒数第二个开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T11:11:32.297

**在CSS**中使用它很简单：

```
:nth-last-child(2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-15T17:59:14.173

**如果`:nth-last-child(2)`不适合您：**

您可以计算父级的所有子级 div：

```
var totalChildDivs = jQuery('.parent div').length; 
```

然后针对倒数第二个孩子：

```
jQuery('.parent div')[totalChildDivs-1].css("background: red;"); 
```

# node.js - Towerjs 中的 Cookie 和会话

> ID：10595756
> 
> 赞同：0
> 
> 时间：2012-05-15T07:05:32.277
> 
> 标签：node.js, connect, towerjs

是否有一些简单的示例如何在 towerjs 中使用 cookie 或会话？我读过关于 Connect Middleware 的文章，但我没有使用它的经验（不幸的是 node.js 也是如此）。

如果没有示例，我也将不胜感激任何提示。

马尔钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:23:06.953

**饼干**

[从此处](https://github.com/viatropos/tower/blob/master/src/tower/controller/instrumentation.coffee#L57-62)的 TowerJS 源代码，控制器具有以下属性：

*   `@request`
*   `@response`
*   `@cookies`（这只是 的快捷方式`@request.cookies`）
*   `@session`（这只是 的快捷方式`@request.session`）

[因此，要设置 cookie，您可以在此处](http://expressjs.com/guide.html)遵循快速文档

例如这个设置 cookie 'rememberme'

```
# "Remember me" for 15 minutes 
@response.cookie 'rememberme', 'yes', 
  expires: new Date(Date.now() + 900000)
  httpOnly: true 
```

并得到饼干

```
@request.cookies.rememberme 
```

**会议**

至于会话，看起来它只是在内存会话中连接。在此处查看源代码 [https://github.com/viatropos/tower/blob/master/src/tower/server/application.coffee#L39](https://github.com/viatropos/tower/blob/master/src/tower/server/application.coffee#L39)

所以你可以像这样使用它：

```
@request.session.something = 'something' 
```

或者

```
@session.something = 'something' 
```

好的，希望对您有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:15:11.277

在 Tower.js github 存储库中，他们在[此处](https://github.com/viatropos/tower/tree/master/test/example)的示例中使用会话。也许你可以在那里得到一些帮助。我不是咖啡脚本专家，所以我的帮助是有限的。;)

但这是他们配置会话/cookie 支持的地方：

```
// config/application.coffee
@use "cookieParser", Tower.config.session.key
@use "session", secret: Tower.config.session.secret, cookie: {domain: Tower.config.session.cookie.domain} 
```

我希望我能帮上一点忙！;)

# jsf - 使用 ExternalContext.redirect() 将人脸消息添加到重定向页面

> ID：10595760
> 
> 赞同：13
> 
> 时间：2012-05-15T07:05:44.253
> 
> 标签：jsf, redirect, jsf-2

我正在使用**ExternalContext.redirect(String);** 将用户重定向到另一个页面的方法：

```
FacesContext.getCurrentInstance().addMessage(new FacesMessage("Bla bla bla..."));
FacesContext.getCurrentInstance().getExternalContext().getFlash().setKeepMessages(true);
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
ec.redirect(ec.getRequestContextPath() + "/scenario.xhtml"); 
```

正如马特汉迪在他的回答中提到的那样，我使用**了 Flash.setKeepMessages(true);** 但它似乎不适用于 ExternalContext.redirect。（尽管当我通过从 bean 的操作方法返回页面名称进行重定向时它可以工作。）

现在如何添加 FacesMessage 以便它在重定向 (scenario.xhtml) 页面中可见？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T20:26:44.720

这似乎是一个时间问题。`preRenderView`在事件期间调用此侦听器方法。根据`ELFlash`（由返回的 Mojarra 的[`Flash`](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html)实现`ExternalContext#getFlash()`）的源代码，当您当前处于渲染响应阶段并且尚未为当前请求设置 flash cookie 时，它​​不会设置 flash cookie ：

以下是来自的相关行`ELFlash`：

```
if (currentPhase.getOrdinal() < PhaseId.RENDER_RESPONSE.getOrdinal()) {
    flashInfo = flashManager.getPreviousRequestFlashInfo();
} else {
    flashInfo = flashManager.getNextRequestFlashInfo(this, true);
    maybeWriteCookie(context, flashManager);
} 
```

仅当`maybeWriteCookie`Flash cookie 需要第二次通过时（即，当重定向的页面又重定向到另一个页面时）才会设置 cookie。

这是一个不幸的极端案例。这个`ELFlash`逻辑是有道理的，但这不是你真正想要的。*基本上*，您需要在`INVOKE_APPLICATION`阶段添加消息。然而，没有这样的事件`postInvokeAction`。使用新的 JSF 2.2`<f:viewAction>`标记应该是可能的，因为它确实在调用应用程序阶段运行。

```
<f:viewAction action="#{bean.onload}" /> 
```

只要您还没有使用 JSF 2.2，您就需要寻找替代方法。最简单的方法是创建一个自定义[`ComponentSystemEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ComponentSystemEvent.html).

```
@NamedEvent(shortName="postInvokeAction")
public class PostInvokeActionEvent extends ComponentSystemEvent {

    public PostInvokeActionEvent(UIComponent component) {
        super(component);
    }

} 
```

现在你需要一个钩子来发布这个事件。最明智的地方是[`PhaseListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/PhaseListener.html)听完后阶段`INVOKE_APPLICATION`。

```
public class PostInvokeActionListener implements PhaseListener {

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.INVOKE_APPLICATION;
    }

    @Override
    public void beforePhase(PhaseEvent event) {
        // NOOP.
    }

    @Override
    public void afterPhase(PhaseEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();
        context.getApplication().publishEvent(context, PostInvokeActionEvent.class, context.getViewRoot());
    }

} 
```

如果您按以下方式注册它`faces-config.xml`

```
<lifecycle>
    <phase-listener>com.example.PostInvokeActionListener</phase-listener>
</lifecycle> 
```

那么您将能够按如下方式使用新事件

```
<f:event type="postInvokeAction" listener="#{bean.onload}" /> 
```

* * *

**更新这在 JSF 实用程序库**[OmniFaces](http://omnifaces.org)中也可用，因此您不需要自制一个和另一个。另请参见[`InvokeActionEventListener`展示示例](http://showcase.omnifaces.org/eventlisteners/InvokeActionEventListener)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-15T07:17:47.113

使用闪存通过重定向保留消息。

*在重定向之前*将这两行添加到您的代码中：

```
FacesContext context = FacesContext.getCurrentInstance();
context.getExternalContext().getFlash().setKeepMessages(true); 
```

请注意，Mojarra 的闪存范围实现存在[一些问题](http://java.net/jira/browse/JAVASERVERFACES-1751)。如果您使用它，请记住这一点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-01-18T15:50:36.077

使用 Matt Handy 的示例作为参考，我创建了以下对我非常有效的方法。

```
public static void Message(String message) {
    FacesMessage fm = new FacesMessage(FacesMessage.SEVERITY_INFO, mensagem, null);
    FacesContext context = FacesContext.getCurrentInstance();
    context.getExternalContext().getFlash().setKeepMessages(true);
    context.addMessage(null, fm);
} 
```

# .net - XmlSerializer 序列化一个类，我想要公共属性中给出的子标签名称

> ID：10595765
> 
> 赞同：1
> 
> 时间：2012-05-15T07:06:40.460
> 
> 标签：.net, xmlserializer

我正在使用 XmlSerializer 序列化一个类，该类有一个对象列表作为它的一部分。现在发生的事情是，子标记名称从类名中获取名称，但我想要的是它从类名中获取名称子类中的公共字段。请帮助，我应该使用哪个 xml 属性来使其工作。

我有这个代码：

```
SessionAnalyser sa = new SessionAnalyser();
Circle c = new Circle();
c.Name = "AP";// I want this property as the TAG Name 
```

我得到的 XML O/P：

```
<SessionAnalyser>
<Circle>
<Name>AP</Name>
...
</Circle>
</SessionAnalyser> 
```

所需的 XML O/P：

```
<SessionAnalyser>
<AP>
...
</AP>
</SessionAnalyser> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:15:47.637

`XmlSerializer`不支持这一点，请注意，因为它无法提前知道`.Name`映射到 AP，所以它无法反序列化它。`<AP>`

要做到这一点，`XmlSerializer`您必须实施`IXmlSerializable`，这是很多工作；但是，我怀疑使用 DOM 之类的东西（`XElement`例如）会更容易。

**TL;博士;** 版本

> 不要用于对您没有帮助`XmlSerializer`的场景`XmlSerializer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:16:10.993

AFAIK，您可以通过实现[IXmlSerializable自行实现](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable%28v=VS.100%29.aspx)

# jquery-mobile - jQuery Mobile 页面中的 Google 地图，缩放功能无法正确呈现

> ID：10595766
> 
> 赞同：0
> 
> 时间：2012-05-15T07:06:47.607
> 
> 标签：jquery-mobile, google-maps-api-3, zooming

我正在构建一个包含 Google 地图（API v3）的 jQuery Mobile 页面。到目前为止，我已经成功地展示了地图并实现了很多功能。我的问题是谷歌地图上的缩放功能无法正确呈现（它看起来破碎且像素化）。

页面底部的代码演示了 jQuery Mobile 中 Google 地图的基本实现。如果您在最新版本的 Firefox 上测试它，您应该会看到缩放问题。请注意，如果您评论以下三个库中的任何一个，缩放功能会正确呈现，但 jQuery 移动功能会丢失。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"/>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script> 
```

我所做的研究表明，[这些](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html)示例中实现的库可能会解决这个问题，但这需要我重新编写大量方法。任何人都可以建议我用一种更简单的方法来解决这个问题。

示例代码：

```
<head>
    <style type="text/css">
        #map_canvas {
            height: 375px;
            width: 550px;
            padding:10px;
            border:1px solid gray;
            margin:10px;
        }
    </style>
    <link rel="stylesheet" href="../_assets/css/jqm-docs.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="//maps.googleapis.com/maps/api/js?sensor=false&libraries=places"
    type="text/javascript"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"/>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script>
</head>

<body onload="initialize()">
    <script type="text/javascript">
        function initialize() {
            map = new google.maps.Map(document.getElementById('map_canvas'), {
                center: new google.maps.LatLng(37.332619, -121.88440100000003),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
        }
    </script>
    <div data-role="page">
        <div data-role="header"></div>
        <div data-role="content">
            <div id="map_canvas"></div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:37:23.960

我正在使用您提到的插件（http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html）并建议您将其与 jQM 一起使用。该插件还与 jQM 上的一些渲染失败作斗争，并建议在`pageshow`.

导致代码如下：

```
jQuery(document).bind('pageshow', function(e, data) {
    var page = jQuery(e.target);
    page.find('.gmap').gmap('refresh');
}); 
```

您应该尝试在没有插件的情况下以某种方式执行此操作。

# javascript - 使用 Javascript 检测阿拉伯语？

> ID：10595769
> 
> 赞同：0
> 
> 时间：2012-05-15T07:06:54.723
> 
> 标签：javascript, asp.net

使用 Javascript 在文本框中键入时如何检测阿拉伯语？有没有办法做到这一点。

我想做一个系统，系统会自动检测网页文本框中写的阿拉伯语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:19:55.157

根据[Unicode 字符](http://en.wikipedia.org/wiki/List_of_Unicode_characters#Arabic)列表，您似乎需要检查 unicode 范围内的符号`U+0600-U+06FF`。因此，如果用户在文本框中输入其中一个符号，您就可以检测到阿拉伯语。另请注意，您可能希望允许许多 unicode 范围。除了阿拉伯语（0600—06FF，225 个字符）之外，您还有

*   阿拉伯语增补（0750—077F，48 个字符）
*   阿拉伯语扩展 A（08A0—08FF，39 个字符）
*   阿拉伯语演示表格-A（FB50-FDFF，608 个字符）
*   阿拉伯语演示表格-B（FE70—FEFF，140 个字符）
*   鲁米数字符号（10E60—10E7F，31 个字符）
*   阿拉伯数学字母符号（1EE00—1EEFF，143 个字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:15:14.887

试试这个： http: [//www.codeproject.com/Articles/301832/Custom-Text-box-Control-that-Switch-keyboard-langu](http://www.codeproject.com/Articles/301832/Custom-Text-box-Control-that-Switch-keyboard-langu)

# android - InApp Billing 无效信用卡

> ID：10595771
> 
> 赞同：1
> 
> 时间：2012-05-15T07:07:35.460
> 
> 标签：android, google-play, in-app-billing

我有一个应用程序可以在其中修复 InApp Billing，问题是当您尝试从该应用程序购买新商品时，市场打开商品页面，有“接受并购买”按钮，并且有一个“添加卡”就是这样显示我以前使用过的信用卡，但显示我的信用卡都没有处于活动状态，只是“添加卡”处于活动状态，所以我需要添加新的信用卡，但即使我添加了新的信用卡，它仍然处于非活动状态，我尝试使用同一张信用卡从市场上购买游戏，并且有效。

![在此处输入图像描述](../Images/763c8c4287fb0e2c15d4cf578c46d5b8.png)

*   我已经签署了应用程序
*   市场上相同的应用程序版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:41:04.277

问题出在商家帐户中，它必须处于活动状态

# mysql - 无法使用rails在mysql结果中获取信息

> ID：10595773
> 
> 赞同：0
> 
> 时间：2012-05-15T07:07:43.697
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, activeadmin

我正在使用带有 ActiveAdmin gem 的 Rails。我想从mysql数据库中选择一些信息。

```
sql = ActiveRecord::Base.connection();
s="SELECT word FROM dics WHERE word LIKE 'tung%'";
ten = sql.execute(s); 
```

但是当我在屏幕上打印出“十”时，它表明：

```
#<Mysql2::Result:0x4936260> 
```

如何获取记录信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:36:54.747

建议不要`ActiveRecord::Base.connection`直接使用。坚持使用 ARel 语法应该适用于大多数情况，并且您的示例看起来不像是边缘情况。

如上面评论中所述，请尝试以下操作：

```
dics = Dic.select(:word).where(["word LIKE ?", "tung%"]).all 
```

为了采摘对象的一些特殊领域，而不是对象本身，请使用`pluck`代替`all`：

```
# instead of .pluck(:word) use real field identifier
dics = Dic.where(["word LIKE ?", "tung%"]).pluck(:word) 
```

# cocoa - nstableview 自定义组行

> ID：10595774
> 
> 赞同：3
> 
> 时间：2012-05-15T07:07:50.057
> 
> 标签：cocoa, view, row, nstableview

我正在创建一个基于视图的表格视图，但在创建自定义组行时遇到了一些问题。我想在我的组行中有文本，Apple 提供的默认行为很好，但我需要更改实际行的颜色和外观。我有子类化`NSTableRowView`并且它有效，但不幸的是不是很好。特别是当它开始浮动时，我还没有弄清楚如何在不改变文本 alpha 的情况下更改视图的 alpha。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:12:39.267

这实际上很容易。创建一个新的 NSTableRowView 子类并覆盖方法 drawRect:。最好总是调用 [super drawRect:dirtyRect]; 一开始。然后你就拥有了 self.isGroupRow 属性。如果是，那么只需绘制您的自定义组行。

您可以使用 tableView:rowViewForRow: 方法在表视图委托中加载自定义行。只需在此处返回它的一个实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:26:12.970

如果我正确理解你的问题，这个解决方案应该适合你：

[根据下一行是否为组行绘制自定义 NSTableRowView](https://stackoverflow.com/questions/9324732/draw-a-custom-nstablerowview-depending-on-if-next-row-is-group-row/9405080#9405080)

# java - 在 jsp 文件中将 Content-Type 设置为 application/json

> ID：10595775
> 
> 赞同：39
> 
> 时间：2012-05-15T07:07:57.683
> 
> 标签：java, http, jsp, http-headers, content-type

我创建了一些 jsp 文件，它作为响应返回一些 json 字符串。但我看到 Content-Type 自动设置为 txt

我的jsp代码看起来像

```
<%@ page import="java.util.Random" %>
<%@ page language="java" %>
<%@ page session="false" %>

<%
  String retVal = "// some json string";

     int millis = new Random().nextInt(1000);
     //    System.out.println("sleeping for " + millis + " millis");
     Thread.sleep(millis);
%>
<%=retVal%> 
```

我怎样才能执行类似的操作

```
setHeader("Content-Type", "application/json"); 
```

在这个例子中？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-15T07:12:39.577

你可以通过[Page 指令](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm7.html)来做。

例如：

```
<%@ page language="java" contentType="application/json; charset=UTF-8"
    pageEncoding="UTF-8"%> 
```

*   contentType="mimeType [ ;charset=characterSet ]" | “文本/html；字符集=ISO-8859-1”

> JSP 文件用于发送给客户端的响应的 MIME 类型和字符编码。您可以使用对 JSP 容器有效的任何 MIME 类型或字符集。默认 MIME 类型为 text/html，默认字符集为 ISO-8859-1。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-15T07:13:58.023

试试这段代码，它也应该可以工作

```
<%
    //response.setContentType("Content-Type", "application/json"); // this will fail compilation
    response.setContentType("application/json"); //fixed
%> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-23T03:15:51.567

@Petr Mensik 和肯森约翰

谢谢，我无法使用页面指令，因为我必须根据某些 URL 参数设置不同的内容类型。我将在这里粘贴我的代码，因为它在 JSON 中很常见：

```
 <%
        String callback = request.getParameter("callback");
        response.setCharacterEncoding("UTF-8");
        if (callback != null) {
            // Equivalent to: <@page contentType="text/javascript" pageEncoding="UTF-8">
            response.setContentType("text/javascript");
        } else {
            // Equivalent to: <@page contentType="application/json" pageEncoding="UTF-8">
            response.setContentType("application/json");
        }

        [...]

        String output = "";

        if (callback != null) {
            output += callback + "(";
        }

        output += jsonObj.toString();

        if (callback != null) {
            output += ");";
        }
    %>
    <%=output %> 
```

提供回调时，返回：

```
 callback({...JSON stuff...}); 
```

内容类型为“文本/javascript”

当未提供回调时，返回：

```
 {...JSON stuff...} 
```

内容类型为“应用程序/json”

# c++ - 我可以使用 Crypto++ 解密 aes-cbc-essiv:sha256 吗（文件由 linux dm-crypt 加密）

> ID：10595778
> 
> 赞同：2
> 
> 时间：2012-05-15T07:08:02.737
> 
> 标签：c++, c, cryptography, crypto++

是否有人必须使用 Crypto++ 使用由 linux dm-crypt 加密的 aes-cbc-essiv:sha256 解密文件？我尝试使用以下代码解密文件。但这是不正确的。有没有人有过经验？你能帮助我吗？非常感谢。

```
void decrypt_file(const char* password,
                  const char* inputFileName, const char* outputFileName)
{
    byte pass[ AES::BLOCKSIZE ];
    byte iv[16];
    byte head_file[16]; 
    memset(iv, 0, 16);

    try
    {
      StringSource(password, true,
        new HashFilter(*(new CryptoPP::SHA256),
          new ArraySink(pass,AES::BLOCKSIZE)));

      CryptoPP::AES::Decryption
        aesDecryption(pass, CryptoPP::AES::DEFAULT_KEYLENGTH);

      CryptoPP::CBC_Mode_ExternalCipher::Decryption
        cbcDecryption( aesDecryption, iv );

      StreamTransformationFilter *decryptor =
        new StreamTransformationFilter(cbcDecryption,
          new FileSink(outputFileName),
          StreamTransformationFilter::BlockPaddingScheme::ZEROS_PADDING);

      FileSource(inputFileName, true, decryptor);
    }
    catch(CryptoPP::Exception &e)
    {
      printf("Exception \n");
      cout << "std::exception caught:" << endl << e.what();
      return;
    }
} 
```

# xml - 加载到 Marklogic 时更改 xml 元素？

> ID：10595783
> 
> 赞同：2
> 
> 时间：2012-05-15T07:08:40.047
> 
> 标签：xml, marklogic

我有以下xml：-

```
<?xml version="1.0" encoding="UTF-8"?>
<patent-assignment>
 <patent-assignors>
    <patent-assignor>
      <name>TSAI, YU-WEN</name>
    </patent-assignor>
  </patent-assignors>
  <patent-assignees>
    <patent-assignee>
      <name>FARADAY TECHNOLOGY CORP.</name>
    </patent-assignee>
  </patent-assignees>
</patent-assignment> 
```

现在，在将此 xml 文档加载到 Marklogic 中时，我想将专利转让人的名称元素更改为转让人名称，并将专利受让人的名称元素更改为受让人名称，以便我加载的 xml 应如下所示：-

```
<?xml version="1.0" encoding="UTF-8"?>
    <patent-assignment>
     <patent-assignors>
        <patent-assignor>
          <assignor-name>TSAI, YU-WEN</assignor-name>
        </patent-assignor>
      </patent-assignors>
      <patent-assignees>
        <patent-assignee>
          <assignee-name>FARADAY TECHNOLOGY CORP.</assignee-name>
        </patent-assignee>
      </patent-assignees>
    </patent-assignment> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:15:28.790

我建议看看 Information Studio。以下是 5 分钟演练的链接：

[http://community.marklogic.com/learn/5-minute-infostudio-walkthrough](http://community.marklogic.com/learn/5-minute-infostudio-walkthrough)

Information Studio 允许您选择输入收集器、应用任意数量的转换（您可以从界面中输入 XSLT 或 XQuery 代码）、选择任何目标数据库，甚至调整需要分配的 uri 等内容，所有这些都在内部进行那个界面。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:17:23.263

XSLT 非常适合这一点。由于您只想更改一个元素，因此您只需要创建一个样式表和两个简单​​的模板。首先，身份转换：

```
<xsl:template match="node() | @*">
<xsl:apply-templates match="node() | @*">
</xsl:template> 
```

这将简单地输出元素，就像它们进入一样。

二、name元素的模板：

```
<xsl:template match="name">
<xsl:choose>
<xsl:when test="local-name(parent::element())='patent-assignee'">
<patent-assignee>
<xsl:value-of select="."/>
</patent-assignee>
</xsl:when>
<xsl:when test="local-name(parent::element())='patent-assignor'">
<patent-assignor>
<xsl:value-of select="."/>
</patent-assignor>
</xsl:when>
<xsl:otherwise>
<xsl:copy-of select="."/>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

您可以在信息工作室或记录加载器中使用此样式表。要从记录加载器调用，请在属性文件中使用这些行：

```
CONFIGURATION_CLASSNAME=com.marklogic.recordloader.xcc.DelimitedDataConfiguration
CONTENT_FACTORY_CLASSNAME = com.marklogic.recordloader.xcc.XccModuleContentFactory
CONTENT_MODULE_URI = /path/to/module.xqy 
```

然后从 module.xqy 调用你的 xslt

# mysql - 为什么 mysql status key_reads,key_reads_request 的值为零？

> ID：10595784
> 
> 赞同：3
> 
> 时间：2012-05-15T07:08:42.910
> 
> 标签：mysql

我对我的mysql状态有些困惑。mysql> 显示类似 '%key%' 的状态；

```
+------------------------+-------+
| Variable_name          | Value |
+------------------------+-------+
| Com_assign_to_keycache | 0     |
| Com_preload_keys       | 0     |
| Com_show_keys          | 0     |
| Handler_read_key       | 2     |
| Key_blocks_not_flushed | 0     |
| Key_blocks_unused      | 13396 |
| Key_blocks_used        | 0     |
| Key_read_requests      | 0     |
| Key_reads              | 0     |
| Key_write_requests     | 0     |
| Key_writes             | 0     | 
```

但是，服务器上有大量（每天超过 10 亿次）插入、更新和查询，但是为什么状态的值为 0。服务器已经运行了将近 3 天。（正常运行时间：2 天 18 小时 54 分 19 秒） .我没有刷新服务器的状态。Some db config engine = innodb,key_buffer = 16M, innodb_buffer_pool_size = 2147483648。感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:10:49.523

也许您正在使用 InnoDB 表？

这些 Key_XXX 服务器状态值用于 MyISAM 表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:09:00.807

您正在查看的值适用于 MyISAM 表。它们代表 MyISAM 密钥缓存：

[http://dev.mysql.com/doc/refman/5.0/en/myisam-key-cache.html](http://dev.mysql.com/doc/refman/5.0/en/myisam-key-cache.html)

此缓存保存最近使用的密钥，并期望最近使用的密钥可能很快再次被重用——因此它们可能对缓存有价值。

由于您使用的是 innodb，因此未使用密钥缓存。

出于调优目的，您应该尽量减少专用于密钥缓存的内存量。从 innodb 处理中取出的任何内存都可能被浪费了 -

# perl - 如何计算 Perl 逻辑运算？

> ID：10595785
> 
> 赞同：-1
> 
> 时间：2012-05-15T07:08:52.113
> 
> 标签：perl, parsing, logical-operators

```
$text = (!a && !b) || (!c && !d) 
```

解析器由`()`, `!`, `&&`,组成`||`。实际上`a`, `b`,是函数中的替换符号`c`。`d`我已经声明了。在序列解析之后，将完成实际的解析。

通用解析器用于数字计算。但是我正在开发的解析器是针对一系列操作的。

如何知道操作顺序？

我已经阅读了一些关于[recdescent](http://search.cpan.org/search?query=recdescent)的 Perl 代码，但我无法理解并对其进行了修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:28:12.860

You want [`Math::Symbolic`](http://p3rl.org/Math%3a%3aSymbolic), it is built on [`Parse::RecDescent`](http://p3rl.org/Parse%3a%3aRecDescent) and [`Parse::Yapp`](http://p3rl.org/Parse%3a%3aYapp).

# templates - Grails：编写一个标签库，它使用模板来呈现数据并使其与控制器无关

> ID：10595787
> 
> 赞同：7
> 
> 时间：2012-05-15T07:08:55.147
> 
> 标签：templates, grails, views, taglib

我编写了一个 taglib，它执行一些逻辑并将一些数据呈现到 HTML 中。当我在视图中使用 taglib 时，taglib 希望在视图的相对子文件夹中找到模板。有没有一种方法可以让 taglib 从一个常见的文件夹中提取模板，比如视图中的 layouts/ 文件夹。这是 taglib 代码的外观：

```
class IconifiedTextTagLib { 

def renderIconText = { attrs, body ->   
                 //some processing logic to generate the modelMap
         out << render(template:"taglibTemplates/iconText", model:modelMap)
    }
} 
```

当我**`<g:renderIconText />`**在一个名为 A 的控制器中使用标签时，它希望**taglibTemplates/iconText**出现在**views/A/**文件夹中。这是一个问题，因为我需要能够从多个控制器中使用它。我需要一种将模板放在 layouts/ 之类的文件夹中的方法，以便可以在所有视图中使用它。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T07:10:59.107

将模板放入`views/taglibTemplates/`并尝试：

```
out << render(template:"/taglibTemplates/iconText", model:modelMap) 
```

或进入“views/A/”，以及

```
out << render(template:"/A/iconText", model:modelMap) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T17:47:49.797

在 grails 2.3.8 上我不得不这样使用

确保模板文件名以下划线开头

```
_mytemplate.gsp 
```

在您的标签库类中

```
out << g.render(template: '/taglibTemplates/mytemplate') 
```

# php - 错误报告 4983

> ID：10595788
> 
> 赞同：0
> 
> 时间：2012-05-15T07:08:55.983
> 
> 标签：php

当我使用 ini_set 检查我的 error_reporting 级别时，我得到一个奇怪的值（ 4983 ），我无法通过谷歌搜索找到任何地方。

有谁知道如何确定这个级别到底是多少？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:12:49.357

这是您可以在此处测试的标志的组合：

[http://www.bx.com.au/tools/ultimate-php-error-reporting-wizard](http://www.bx.com.au/tools/ultimate-php-error-reporting-wizard)

```
1 E_ERROR     
2 E_WARNING   
4 E_PARSE     
8 E_NOTICE    
16 E_CORE_ERROR    
32 E_CORE_WARNING  
64 E_COMPILE_ERROR     
128 E_COMPILE_WARNING   
第256章    
第512章  
第1024章   
第2048章    
4096 E_RECOVERABLE_ERROR     
第8192章    
16384 E_USER_DEPRECATED

```

`4983`是的**组合**`E_ERROR, E_WARNING, E_PARSE, E_CORE_ERROR, E_CORE_WARNING, E_COMPILE_ERROR, E_USER_ERROR, E_USER_WARNING, E_RECOVERABLE_ERROR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:16:58.523

这是二进制数 1001101110111

然后你必须在手册中查看哪个标志是什么。如果我没有错过，这些是您的 error_reporting 设置：

E_RECOVERABLE_ERROR E_USER_WARNING E_USER_ERROR E_COMPILE_ERROR E_CORE_WARNING E_CORE_ERROR E_PARSE E_WARNING E_ERROR

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:13:08.520

错误报告级别保存为位掩码。`E_ERROR`例如有值`1`，二进制是`0000 0001`。`E_WARNING`是`2`，在二进制中是`0000 0010`。它们结合起来形成位掩码`0000 0011`，即`3`十进制值。

基本上，您需要将[错误报告常量的值](http://php.net/manual/en/errorfunc.constants.php)和值 4983 转换为二进制才能弄清楚。您还可以遍历所有常量并检查是否使用`4983 & E_ERROR`.

# iphone - 如何通过按条形按钮隐藏键盘

> ID：10595789
> 
> 赞同：0
> 
> 时间：2012-05-15T07:09:04.177
> 
> 标签：iphone, cocoa

问题是光标在一个文本字段上。我想按栏按钮隐藏键盘。此条形按钮使用 IB 创建并连接一个 IBAction。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:17:55.920

```
-(IBAction)BarButtonMethod
{
   [yourTextFieldObject resignFirstResponder];
} 
```

就这样做，让你 o/p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:34:27.973

使用 [YourView endEditing:YES];

这将导致您视图中的任何文本字段退出第一响应者状态

# android - 按钮和文本大小

> ID：10595795
> 
> 赞同：2
> 
> 时间：2012-05-15T07:09:23.150
> 
> 标签：android, android-layout

我对按钮中的文本大小有疑问。我有使用 weightSum 的布局，我的按钮宽度与父级匹配，高度为 30%。一切正常，但是当我在模拟器上更改屏幕大小时，我的文本仍然很小。如何根据屏幕大小更改文本大小？这是xml：

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button"
        android:layout_weight="30" />

</LinearLayout> 
```

有什么办法可以自动做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:49:59.277

使用 sp 作为按钮文本大小的单位

```
<Button
android:id="@+id/button1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Button"
android:textSize="20sp"
android:layout_weight="30" /> 
```

如果这不能解决您的问题，请创建文件夹，如

1) 布局 2) 布局-小 3) 布局-大 4) 布局-xlarge

正如 Nikhil 所建议的那样，但同时考虑[这一点](https://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

与上面建议的文件夹相同，您可以为每种屏幕类型创建不同的值文件夹

1) 值 2) 值-小 3) 值-大 ...

在每个文件中创建名为dimens.xml 的xml文件，并使用dimen资源的引用指定按钮的textSize，如下所示

```
<Button
android:id="@+id/button1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Button"
android:textSize="@dimen/small_font"
android:layout_weight="30" /> 
```

这将根据屏幕大小设置字体大小

希望这对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:15:08.437

如果您在按钮中添加 XML：

```
<Button
    android:id="@+id/button1"
    android:text="click me"
    android:textSize="22dp" /> 
```

这应该可以解决问题。

如果你想动态改变文本大小，你应该得到屏幕大小，然后设置 textSize`button.setTextSize(size);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:21:24.957

对于不同的屏幕，如果你想让 UI 查找所有屏幕，那么在 android 中有不同的布局，那么你必须为布局创建 4 个文件夹

```
1) layout
2) layout-small
3) layout-large
4) layout-xlarge 
```

有关更多信息，您可以参考此链接：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-15T07:23:40.090

```
<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Button"
    android:textSize="22dp"
    android:layout_weight="30" /> 
```

# javascript - Mongoose 未能保存模型更改

> ID：10595797
> 
> 赞同：2
> 
> 时间：2012-05-15T07:09:24.833
> 
> 标签：javascript, node.js, mongoose

我正在尝试更新猫鼬中的用户文档，但我无法完成。这是我的用户模型

```
var UserSchema = new Schema({
email : {
    type : String,
    unique : true
},
salt : {
    type : String,
    required : true
},
hash : {
    type : String,
    required : true
},
account_no : {
    type : String,
    required : true,
    unique : true
},
activate_until:{
    date:{ type: Date, default: Date.now }  
    },
    valid : {
        type : Boolean,
        required : false
    },
    reset_token:{
        type : String 
    },
    reset_until:{
        date:{ type: Date, default: Date.now }  
        }

    });

    UserSchema.virtual('password').get(function() {
        return this._password;
    }).set(function(password) {
        this._password = password;
        var salt = this.salt = bcrypt.genSaltSync(10);
        this.hash = bcrypt.hashSync(password, salt);

        this.account_no = generateAccountNo();
        this.activate_until=new Date();
        this.valid = false;
    }); 
```

现在我正在尝试使用以下方法更新用户密码

```
resetAccount: function(key,password, callback) {
        User.findOne({
            reset_token : key
        }, function(err, user) {
            if(err) {
                console.error(err);
                return callback(err);
            }
            if(!user) {
                console.log("not user");
                return callback("not user", false);
            }
            var salt = user.salt = bcrypt.genSaltSync(10);
            user.hash = bcrypt.hashSync(password, salt);
            console.log(user);

            var upsertData = user.toObject();

    // Delete the _id property, otherwise Mongo will return a "Mod on _id not allowed" error
    delete upsertData._id;

    console.log( user._id);

    // Do the upsert, which works like this: If no Contact document exists with
    // _id = contact.id, then create a new doc using upsertData.
    // Otherwise, update the existing doc with upsertData
    User.update({
        _id : user._id
    },{$set:{ salt:salt,hash:user.hash}}, {
        upsert : false
    }, function(err) {
        if(err) {
            console.error(err);
            callback(err);
        }
         return callback("Password changed", user);
    });

        // this.update({account_no:key}, { $set: { valid: false }},{ upsert: true }, //function(err, user) {
        // if (err) { console.log(err);return callback(err); }
        // if (!user) { return callback(null, false); }
        // console.log(this.email);
        // return callback(user,true);
        //
        // });
    });
    }, 
```

有什么我错过的东西使它不起作用吗？

谢谢， 费拉斯

# c# - 解析字符串并创建字典

> ID：10595798
> 
> 赞同：5
> 
> 时间：2012-05-15T07:09:26.160
> 
> 标签：c#

我有以下字符串模式：`1:2,2:3`.

这就像一个字符串中的数组：
第一个元素是：`1:2`
第二个元素是：`2:3`

我想解析它并创建一个字典：

```
1,2 // 0 element in Dictionary  
2,3 // 1 element in Dictionary 
```

这是我的代码：

```
Dictionary<int,int> placesTypes = new Dictionary<int, int>();

foreach (var place in places.Split(','))
{
   var keyValuePair = place.Split(':');
   placesTypes.Add(int.Parse(keyValuePair[0]), int.Parse(keyValuePair[1]));
} 
```

有没有最好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T07:15:17.560

你可以把它改成这样：

```
var d = s.Split(',')
         .Select(x => x.Split(':'))
         .ToDictionary(x => int.Parse(x[0]), x => int.Parse(x[1])); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T07:12:10.727

```
Dictionary<int, int> dict = "1:2,2:3".Split(',')
                           .Select(x => x.Split(':'))
                           .ToDictionary(x => int.Parse(x[0]), 
                                         x => int.Parse(x[1])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:17:21.430

```
var result = input.Split(new[]{','})
    .Select(s => s.Split(new[]{':'})) 
    .ToDictionary(k => int.Parse(k[0]), v=> int.Parse(v[1])); 
```

现场示例：[http ://rextester.com/GTKO60478](http://rextester.com/GTKO60478)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T07:17:37.997

如果您使用的是 C# >= 3.5，则 ToDictionary LINQ 方法是可行的方法：

```
var dictionary = places.Split(',')
                       .Select(place => place.Split(':'))
                       .ToDictionary(keyValue => int.Parse(keyValue[0]), keyValue => int.Parse(keyValue[1])); 
```

否则，以下内容就足够了：

```
public static Dictionary<string, string> ToDictionary(string value, char pairSeperator, char valueSeperator) 
{
    Dictionary<int, int> dictionary = new Dictionary<int, int>();
    foreach (string pair in value.Split(pairSeperator))
    {
        string[] keyValue = pair.Split(valueSeperator);
        dictionary.Add(keyValue[0], keyValue[1]);
    }

    return dictionary;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T08:32:06.450

使用[MoreLinq](http://morelinq.googlecode.com/)只拆分一次。[批](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/Batch.cs)

```
 Dictionary<int, int> dict = places.Split(',', ':').Batch(2).Select(x=>x.ToArray()).ToDictionary(x=>int.Parse(x[0]),x=>int.Parse(x[1])); 
```

# python - 试图找到一个数组的标准会导致错误

> ID：10595802
> 
> 赞同：0
> 
> 时间：2012-05-15T07:09:51.520
> 
> 标签：python, arrays, numpy

我有一堆按以下顺序排列的文件（制表符分隔）：

```
h   local   average
1   4654    4654
2   5564    5564
3   6846    6846
... ...     ... 
```

我循环读取文件（附在下面）并将它们存储在二维列表中。然后我将列表转换为数组并将 std 应用于它。结果是：

```
Traceback (most recent call last):
  File "plot2.py", line 56, in <module>
    e0028 = np.std(ar, axis=0)
  File "/usr/lib/python2.7/site-packages/numpy/core/fromnumeric.py", line 2467, in std
    return std(axis, dtype, out, ddof)
TypeError: unsupported operand type(s) for /: 'list' and 'float' 
```

这让我很困惑。我试图在数组中找到一个不浮动且没有弹出的元素。

```
import numpy as np
import matplotlib.pyplot as plt
from math import fabs, sqrt, pow, pi

h0028 = []  
p0028 = []

headLines = 2

fig=plt.figure()  
ax1 = fig.add_subplot(1,1,1)  
for i in range (0,24):  

    n = 0  
    j = i + 560  
    p = []  
    f = open('0028/'+str(j)+'.0028/ionsDist.dat')  
    for line in f:  
        if n < headLines:  
            n += 1  
            continue  
        words = line.split()  
        p.append (float(words[1]))  
        if i == 0:  
            h0028.append (fabs(int(words[0])))  
        n += 1  
    print (n)  
    p0028.append(p)  
    f.close()  

ar = np.array(p0028)  
for a in ar:  
    for b in a:  
        if not isinstance(b,float):  
            print type(a)  

e0028 = np.std(ar, axis=0)  
p0028 = np.mean(ar, axis=0)  
h0028 = np.array(h0028)/10 -2.6  
p0028 /= max(p0028)  
e0028 /= (sum(p0028)*sqrt(23))  

ax1.errorbar(h0028 , p0028, yerr=e0028, color = 'red')  
ax1.set_xlim(-0.1,10)  

plt.show()  
plt.savefig('plot2.png', format='png') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:21:13.347

我发现了错误，我的文件长度不一样。这导致了我访问空元素的情况。我添加了一个循环，在每个列表的末尾添加零，直到我得到相同的长度。Schuh 指出，最后添加零可能会导致错误的标准。在我的数据中不是这种情况，但应该注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:24:15.203

我不知道为什么你的代码不起作用，但也许这会对你有所帮助。您可以像这样读取文件：

```
 >>>a = np.loadtxt("p0028.csv",dtype="float",skiprows = 1)
    >>> a
    array([[  1.00000000e+00,   4.65400000e+03,   4.65400000e+03],
    [  2.00000000e+00,   5.56400000e+03,   5.56400000e+03],
    [  3.00000000e+00,   6.84600000e+03,   6.84600000e+03]]) 
```

现在您可以像这样获得例如本地列的 std：

```
 >>>a_std = np.std(a[:1])
    2193.4452352406706 
```

当您遍历多个文件时，您可以使用 vstack 方法一起收集数据，这样您就不必依赖文件中的行数：

```
 >>>a = np.loadtxt("p0028.csv",dtype="float",skiprows = 1)
    >>> a
    array([[  1.00000000e+00,   4.65400000e+03,   4.65400000e+03],
    [  2.00000000e+00,   5.56400000e+03,   5.56400000e+03],
    [  3.00000000e+00,   6.84600000e+03,   6.84600000e+03]])
    >>>b = np.loadtxt("p0028.csv",dtype="float",skiprows = 1)
    >>> np.vstack((a,b))
    array([[   1, 4654, 4654],
    [   2, 5564, 5564],
    [   3, 6846, 6846],
    [   1, 4654, 4654],
    [   2, 5564, 5564],
    [   3, 6846, 6846]]) 
```

# java - 如何在流程完成之前提取 inputStream

> ID：10595816
> 
> 赞同：3
> 
> 时间：2012-05-15T07:10:52.940
> 
> 标签：java, process

我需要在启动后提取进程的输入流。今天我可以获得初始信息，但是在我关闭应用程序之前该方法不会返回（在这种情况下，应用程序由进程启动：gedit 和 firefox）。我的意思是，我知道它会在我关闭进程后返回，但我想有一个解决方法来在进程关闭之前得到它。请参阅下面的代码。

```
public class ProcessInvokerExtractingProcessInformation {

    public static void main(String args[]) {

        try {
            Process pOpenApp = new ProcessBuilder(new String[] { "gedit",
                    "/home/thais/Documents/gedit_doc1" }).start();

            printInformation("pOpenApp", pOpenApp);

            // * just for testing error message and input stream
            Process openFirefox = new ProcessBuilder(new String[] { "firefox" })
                    .start();
            printInformation("lsInstruction", openFirefox);

            deleteProcess(pOpenApp);
            deleteProcess(openFirefox);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    // method for testing information we can see regarding the process
    public static void printInformation(String id, final Process process) {

        System.out.println(" Process " + id + ":");

                    //tried to run in a separated thread but didn't work as well
            Runnable r = new Runnable(){
            public void run(){
                System.out.print("\n        Process error message -> ");
            printScannedStream(process.getErrorStream());
            System.out.println("\n        Process input message -> ");
            printScannedStream(process.getInputStream());
            }

            };

            Thread a = new Thread(r);
            a.start();

            /* other approaches to print the streams, tried before
                StringWriter writer = new StringWriter();

            try {
              PrintWriter pWriter = new PrintWriter(new
              BufferedOutputStream(process.getOutputStream()));
              pWriter.write("Hi"); pWriter.flush(); System.out.println(
              " Process output stream is for writing so there is no information "
              );
             *//*
            InputStreamReader isr = new InputStreamReader(
                    process.getErrorStream());
            BufferedReader br = new BufferedReader(isr);
            System.out.print("\n        Process error message -> ");
            while (br.readLine() != null) {
                System.out.print(br.readLine());
            }
            System.out.println("\n        Process input message -> ");

            isr = new InputStreamReader(process.getInputStream());
            br = new BufferedReader(isr);
            while (br.readLine() != null) {
                System.out.print(br.readLine());
            }

            br.close();
            isr.close();*/
            /*
             * IOUtils.copy(process.getErrorStream(), writer, null);
             * System.out.println("        Process error message -> " +
             * writer.toString());
             * 
             * IOUtils.copy(process.getInputStream(), writer, null);
             * System.out.println("        Process input stream message -> " +
             * writer.toString()+"\n");

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
*/
    }

    /**
     * Method that close all streams and after destroy the process It's
     * important to close the streams to avoid file descriptions leaking
     * 
     * @param process
     */
    public static void deleteProcess(Process process) {
        try {
            process.getInputStream().close();
            process.getOutputStream().close();
            process.getErrorStream().close();
            process.destroy();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void printScannedStream(java.io.InputStream is) {
        try {
            Scanner scanner = new Scanner(is);
            while(scanner.hasNext()) {
                System.out.print(scanner.next());

            }

        } catch (java.util.NoSuchElementException e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:20:03.647

我有同样的问题，我用一个额外的线程解决了这个问题。

```
class InputHandler implements Runnable {

    InputStream input_;

    InputHandler(InputStream input) {
        input_ = input;
    }

    public void run() {
        try {
            int c;
            String line = "";
            while ((c = input_.read()) != -1) {
             if (((char) c == '\r') || ((char) c == '\n')) {
             if (!line.isEmpty()) flushString(line);
             line = "";
             } else
             line += (char) c;
            }
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }

    private void flushString(String s) {
     // any code to process data from stream
     Logger.debug("library: " + getClass().getName() + ": compress: output: " + s);
    }

}

Process process = run.exec(ffmpegCmdString);
// read output
InputHandler stderrHandler = new InputHandler(process.getErrorStream());
new Thread(stderrHandler).start();
InputHandler stdoutHandler = new InputHandler(process.getInputStream());
new Thread(stdoutHandler).start();
process.waitFor(); 
```

# java - 需要帮助将字符串转换为十六进制字节

> ID：10595818
> 
> 赞同：0
> 
> 时间：2012-05-15T07:11:19.883
> 
> 标签：java

我正在用 Java 编程。该程序有一个字符串，如下所示。

```
String str = "byte." 
```

上面的字符串可以转换为如下的十六进制字节数组吗？

```
byte[] data = {0x62, 0x79, 0x74, 0x65}; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:13:01.117

没有“十六进制字节”之类的东西，而不仅仅是“十进制整数”与“十六进制整数”。

您当然可以将字符串转换为字节数组。例如：

```
byte[] data = str.getBytes("UTF-8"); 
```

这里的`UTF-8`部分是要使用的编码的名称 - 其中*编码*实际上是 Unicode 字符和字节之间的映射。（它比这更复杂，但它是一个很好的初步近似值。）

有*一个*无参数重载，`String.getBytes()`但我*强烈*建议您不要使用它 - 它会选择平台默认编码，这很少是一个好主意。

您还可以使用采用 a 的重载`Charset`，最终与[Guava](http://guava-libraries.googlecode.com)等库结合使用会更好，您可以在其中编写：

```
byte[] data = str.getBytes(Charsets.UTF_8); 
```

...因此您不再依赖字符串表示。

# mysql - Mysql从多个表中获取数据

> ID：10595823
> 
> 赞同：0
> 
> 时间：2012-05-15T07:11:51.323
> 
> 标签：mysql, database, join, sql

我有三张桌子

1.  `user(id,fname,lname)`
2.  `picture(picid,pic_path,userid)`
3.  `friends(friend_of,friends_id,status)`

我想提前获取`id,fname,lname,pic_path`所有 图片路径可能为空`friends_id`的 Thankx。`friends_of=1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:15:28.513

您要查找的内容称为[join](http://dev.mysql.com/doc/refman/5.5/en/join.html)。特别是，您正在寻找一个 JOIN 和一个 LEFT JOIN。

```
SELECT 
    user.id, user.fname, user.lname, picture.pic_path 
FROM 
    friends 
    JOIN user 
        ON user.id = friends_id 
    LEFT JOIN picture 
        ON userid = user.id 
WHERE 
    friends.friend_of = 1 
```

这只有在`picture`.

尽管这回答了您的直接问题，但我建议您对联接非常熟悉。它们是*关系*数据库的基本操作之一。（请注意，连接本质上是一种数学关系）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:25:55.280

试试这个

```
SELECT u.*,p.*,f.*
FROM USER u
LEFT JOIN picture p ON p.user_id = id
INNER JOIN friends f ON f.friends_of = u.id
WHERE f.friends_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:06:56.983

对于这样的查询，您需要了解和使用实体之间的关系。然后分两步工作：选择和投影，这与 SQL 语法可能暗示 FROM 关键字之前的部分是投影相反。

首先我们编译数据。很明显，我们需要所有三个表中的数据，而且只需要一次。因此，首先我们通过连接所有三个表来构建所有可能的组合。在 SQL 中，这是在 FROM 部分完成的，即

```
FROM friends f, picture p, user u 
```

f、p 和 u 是别名，目的是为我们节省在下面键入完整表名的工作。

现在我们有了所有可能的组合。让我们选择我们想要的：我想您数据库中的每张图片都属于一个用户，该用户也存储在您的数据库中。所以我的假设是你只想要与用户关联的图片。因此，我们对之前所做的所有组合都有第一个限制！限制源自存储在您的数据库中的数据的（可能）含义，并表示为：

```
u.id = p.userid 
```

（注意：通过将此限制应用于上述组合，我们仅“选择”某些组合。）

然后您已经将另一个限制声明为请求“friends_of=1”，以将此限制与我们编写的组合相关联：

```
f.friends_of=1 
```

然后我们通过以下方式将您的请求“friends_of=1”与其他数据结合起来：

```
f.friend_of = u.id 
```

此约束仅选择那些是某人朋友的用户。现在我们可以结合这些约束。由于我们希望满足所有约束，因此我们在 WHERE 语句中对它们进行 AND：

```
WHERE u.id = p.userid AND f.friend_of = u.id AND f.friends_of=1 
```

排序不会影响含义（在这种情况下。但是让我们重新考虑这些约束： u.id = p.userid ：我们想要有关用户的信息以及与该用户关联的图片 f.friend_of = u.id ：我们正在寻找作为某人朋友的用户 f.friends_of=1 ：我们正在寻找特定某人的朋友

现在我们将存储在数据库中的数据投影到我们想要的位置。我们想要所有的用户数据和图片路径。在 SQL 中：

```
SELECT u.*,p.pic_path 
```

现在我们把所有东西放在一起。

```
SELECT u.*,p.pic_path FROM friends f, picture p, user u WHERE u.id = p.userid AND f.friend_of = u.id AND f.friends_of=1 
```

为了允许没有与他们关联的图片的朋友（注意：这与 pic_path 为 NULL 非常不同），您需要一个外连接，这意味着您还需要与空集的组合。那是我的 MySQL 不太好的地方，但我猜你会生成你想要的所有组合（以及更多）：

```
FROM friends f JOIN user u LEFT JOIN picture p ON u.id = p.userid 
```

和

```
SELECT u.*,p.pic_path FROM friends f JOIN user u LEFT JOIN picture p WHERE  f.friend_of = u.id AND f.friends_of=1 
```

请注意，可能违反的约束已通过将其从一般选择移至数据组合的生成作为如何创建组合的规则而变得明确。是的，这是一条捷径，而不是遵循选择和投影的想法。

# php - google checkout，如何在 API 回调中找到已完成的付款

> ID：10595830
> 
> 赞同：0
> 
> 时间：2012-05-15T07:12:37.783
> 
> 标签：php, api, google-checkout

现在我正在使用 Google 结帐付款。我想使用 API 回调 url 找到付款完成，我需要向付款人发送电子邮件，当他完成付款时。谁能帮我一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:27:17.863

Use the Notification API to get transaction information back from Google Checkout.

[http://code.google.com/apis/checkout/developer/Google_Checkout_XML_API_Notification_API.html](http://code.google.com/apis/checkout/developer/Google_Checkout_XML_API_Notification_API.html)

When you get back the notification, you can read your custom ID from the merchant-private-data field.

Source [get value return in google checkout](https://stackoverflow.com/questions/5977151/get-value-return-in-google-checkout)

Thanks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:35:47.997

有关使用 Google Checkout API 的代码示例，请查看 Checkout 开发人员文档中的“客户端库和示例代码”部分：

[https://developers.google.com/checkout/samplecode](https://developers.google.com/checkout/samplecode)

# objective-c - 自定义 UITableViewCell 不响应 textLabel 触摸

> ID：10595832
> 
> 赞同：0
> 
> 时间：2012-05-15T07:12:42.813
> 
> 标签：objective-c, xcode, cocoa-touch, ipad

我有自定义`UITableViewCell`。它包含`UITextLabel`. 当我将此单元格按在标签上时，它没有响应，但如果我在空白区域触摸它，则会响应。可能是什么问题？

我的单元是在 IB 中制作的，用户交互已启用。另外，我注意到这个问题只发生在 iPad 上，在 iPhone 上一切正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:59:42.710

转到 CustomCell 的 IB 并禁用标签的用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:00:59.073

检查你的 textLabel 的框架。如果您的 textLabel 的框架超出了您的 UITableViewCell，它将不会响应触摸事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:49:26.237

问题是上面还有另一个视图`UITableView`

# ipad - 在 iPad 上，使用 HTML5 视频无法全屏显示

> ID：10595839
> 
> 赞同：1
> 
> 时间：2012-05-15T07:13:06.480
> 
> 标签：ipad, html, mobile-safari

我尝试使用 HTML5 在 iPad 上全屏显示视频，但得到的结果是：

1.  第一次点击视频正在播放
2.  第二次点击全屏视频播放它会出现。

激活后，我无法同时播放视频和全屏播放。

这是我一直在使用的来源：

```
$(document).ready(function() { 
    $("#te").bind('click', function() { 
        $('#myVideoTag')[0].play(); 
        $('#myVideoTag')[0].webkitEnterFullScreen(); 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:10:58.923

我遇到了同样的问题，而 setTimeout 似乎是我遇到的最佳解决方案。

这对我有用：

注意：videoEnable 函数是通过“a”标签中的 onclick 属性调用的

```
//define function

var videoEnable = function(videoCount) {

    //Play video
    $('video').get(videoCount).play(); 

    //Timeout before fullscreen registers
    setTimeout(function(){
        $('video').get(videoCount).webkitEnterFullscreen();
    }, 2000);
} 
```

那是你要找的吗？

# iphone - 在上传 iphone 应用程序期间验证导致错误

> ID：10595848
> 
> 赞同：0
> 
> 时间：2012-05-15T07:14:14.660
> 
> 标签：iphone

我正在尝试上传一个 iphone 应用程序。在最后一步中，我创建了一个存档文件，它也可以在管理器窗口中使用。但是当我单击验证按钮时，它会显示错误。“我的应用程序不包含单包应用程序或包含多个产品。请选择另一个存档，或调整您的方案以创建单包应用程序。”

在我的应用程序中没有静态库。

请给我一个解决方案...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:21:13.830

首先转到 Build Settings，将“Skip Install”设置为“Yes”，然后在 Build Phases 下，检查 Copy Headers 部分。如果有任何头文件列为 Private 或 Public，请将它们拖到 Project 部分。

# windows - 监控脚本并在崩溃时发送电子邮件

> ID：10595859
> 
> 赞同：0
> 
> 时间：2012-05-15T07:15:02.523
> 
> 标签：windows, perl, batch-file, crash, monitoring

我有一些使用 Windows 2003 R2 和 2008 中的任务调度程序安排的 perl 脚本。这些脚本直接使用 perl.exe 或通过批处理文件调用。

有时这些脚本无法执行（可能会崩溃），我们不知道这些崩溃。

当这些脚本崩溃时，有什么方法可以发送邮件？或多或少像监控这些脚本

提前致谢

卡尔提克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:56:04.280

当您可以让插件监控自己时，为什么还要从外部监控脚本？首先，您可以使用**eval**来捕获错误，如果发生错误，您可以按照 rpg 的建议发送带有**Net::SMTP 模块的电子邮件。**但是，我强烈建议您使用某种日志文件，以便跟踪错误之前发生的事情以及导致错误的原因。您的主要目标应该是避免错误。这当然需要您修改脚本，如果由于任何原因您不能这样做，那么情况可能会稍微复杂一些，因为您需要另一个脚本。

使用[Win32::Process::Info](http://search.cpan.org/~wyant/Win32-Process-Info-1.018/lib/Win32/Process/Info.pm)模块，您可以检索 Windows 上正在运行的进程并检查您的插件是否正在运行。

```
while(1) {
    my $found = false;
    my $p = Win32::Process::Info->new;
    foreach my $proc ($pi->GetProcInfo) {
        if ($proc->{Name} =~ /yourscriptname/i ) {
            found = true;
        }
    }
    if ($found eq 'false') {
        # send email
        my $smtp = Net::SMTP->new("yoursmtpserver");
        eval {
            $smtp->mail("sender@test.it");
            $smtp->recipient("recipient@test.it");
            $smtp->data;
            $smtp->datasend("From: sender@test.it");
            $smtp->datasend("\n");
            $smtp->datasend("To: recipient@test.it");
            $smtp->datasend("\n");
            $smtp->datasend("Subject: Plugin crashed!");
            $smtp->datasend("\n");
            $smtp->datasend("Plugin crashed!");
            $smtp->dataend;
            $smtp->quit;
        };
    }
    sleep(300);
} 
```

我没有测试这段代码，因为我没有在 Windows 上安装 Perl，但逻辑应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:43:40.507

您可以使用 PushMon 来监控您的脚本。您所做的是创建与您的 Perl 脚本计划相匹配的 PushMon URL。然后，当您的脚本成功运行时，您应该“ping”这些 URL。如果这些 URL 未被访问，可能是因为您的脚本崩溃或电源故障，PushMon 将通过电子邮件通知您。

免责声明：我与 PushMon 有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:38:56.420

用于监控 - 请检查错误代码。这将帮助你解决它的失败。

对于邮件发送 - 您可以使用 Net::SMTP 模块发送电子邮件。如果您需要代码片段，请告诉我。

# mysql - 在 CakePHP 中使用西班牙语单词作为文件/类名

> ID：10595860
> 
> 赞同：0
> 
> 时间：2012-05-15T07:15:04.490
> 
> 标签：mysql, cakephp, console, cakephp-1.3

我有一个带有西班牙语字符的项目，例如 (ñ,á) 并且我在一个模型中使用了“ñ”字符。然后我不得不将排序规则和字符集更改为 utf-8。我更改了默认设置 my.ini、httpd.conf 和 php.ini

在 my.ini 我有这个..

```
 **[mysqld]
 port=3306
 character_set_client='utf8'
 character-set-server='utf8'
 collation-server=utf8_general_ci** 
```

问题是当我尝试将控制台与蛋糕烘焙一起使用时......因为我有一个名为“Dueño”的模型，带有 (ñ) 字符并且没​​有正确显示（带有奇怪的字符，如“Due|-#o”）并且不能使用“蛋糕烘焙”创建应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:31:48.577

以这种方式命名文件和类是一种非常糟糕的编码习惯。最好的解决方案是对文件和类使用英文名称。此外，如果您使用除英语以外的任何语言，Cake 将失去它的“约定能力”，因为负责管理命名约定的 Inflector 类根本无法完成它的工作，因为它无法“复数/单化”任何西班牙语（或任何其他语言）您将用于文件/类的单词。

如果您对此感兴趣，请查看[Inflector的功能。](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html)

我并不是说这是不可能的，但这使得 CakePHP 的“约定优于配置”原则毫无用处。

# php - 如何在mysql中的更新语句后获取受影响的行？

> ID：10595865
> 
> 赞同：6
> 
> 时间：2012-05-15T07:15:17.187
> 
> 标签：php, mysql

如何在mysql中的更新语句后获取受影响的行（不仅仅是受影响的行数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:23:50.473

[mysql_info — 获取有关最近查询的信息](http://www.php.net/manual/en/function.mysql-info.php)

```
$recent = mysql_info(); 
```

有用的实现[示例](http://www.php.net/manual/en/function.mysql-info.php#36008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:25:43.467

如果您想要实际行而不是[受影响行](http://php.net/manual/en/function.mysql-affected-rows.php)的数量，只需在更新之前获取它们。

之后，您可以将更新值与选定值进行比较，并按差异过滤它们。

**CodeIgniter 示例：**

```
$arr_where = array('date >=' => date('Y-m-d H:i:s'));

$query = $this->db->get_where('table', $arr_where);

$arr_update = array('status' => 'TRUE');

if ($this->db->update('table', $arr_update, $arr_where)) {

    foreach($query->result() as $row)
        foreach(array_keys($arr_update) as $h)
            if ($row->$h != $arr_update[$h])
                echo "This row ({$row->id}) had it's {$h} changed!<br />";

} 
```

很抱歉在 CodeIgniter 中提供解决方案，但我发现它是最简单的示例。

要查看`$this->db`函数的作用，请参阅[Active Records](http://codeigniter.com/user_guide/database/active_record.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T17:19:08.563

您可以尝试使用：

```
SET @uids := '';
UPDATE <table>
 SET <column1> = <value>
 WHERE <column2> = <value> 
   AND ( SELECT @uids := CONCAT_WS(',', @uids, id) );
SELECT TRIM(LEADING ',' FROM @uids); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T07:20:08.760

由于您使用的是 php，因此您可以使用[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)来获取受影响的行数。

# iphone - 新 iPhone 标准按钮尺寸（640*960）

> ID：10595880
> 
> 赞同：1
> 
> 时间：2012-05-15T07:16:03.547
> 
> 标签：iphone

Apple Inc. 指定的 iPhone（640*960）中按钮的标准尺寸是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:21:19.540

按钮的大小为 44x44。

工具栏和导航图标的图像应为 20x20，

并且对于标签栏图标应该是 30x30。

# database - 用于高效搜索表格数据的 DB 技术？

> ID：10595885
> 
> 赞同：0
> 
> 时间：2012-05-15T07:16:14.393
> 
> 标签：database, search, full-text-search

我们有一个表存储库。大约 200 个表格，每个表格可以是数千行，所有表格最初都是 Excel 表格。

每个表都有不同的方案。所有数据都是文本或数字。

我们想创建一个应用程序，允许在所有表上进行自由文本搜索（我们定义将在每个表中搜索哪些列） - 速度很重要。
**主要的难题是我们应该选择哪种数据库技术。**

我们通过将所有表导入 MS SQL Server 并在它们之上创建全文索引来创建模型。搜索是使用 CONTAINS 关键字完成的。此解决方案适用于少量表，但无法扩展。

我们考虑过一个 NoSQL 解决方案，但我们还没有任何经验。

我们的限制（很遗憾我无法实现）：仅限 Windows 服务器。但是我们可以在它们上安装我们想要的任何东西。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:07:55.293

查看弹性搜索！它是一个基于 Apache Lucene 的搜索服务器，并且有一个干净的基于 REST 和 JavaScript 的 API。虽然它通常用作主数据库的搜索索引，但它也可以单独使用。因此，您可能想为一些表/数据编写备份例程并尝试一下。

[http://www.elasticsearch.org/](http://www.elasticsearch.org/) http://en.wikipedia.org/wiki/ElasticSearch

ElasticSearch 和 Apache Solr（另一个基于 Lucene 的搜索服务器）的比较： [https ://docs.google.com/present/view?id=dc6zhtt5_1frfxwfff&pli=1](https://docs.google.com/present/view?id=dc6zhtt5_1frfxwfff&pli=1)

# jquery - 将上下文传递给回调函数的最佳实践

> ID：10595888
> 
> 赞同：4
> 
> 时间：2012-05-15T07:16:25.883
> 
> 标签：jquery, jquery-ui

我有一个对象，它的方法很少，我想将其中一个绑定为事件处理程序，但它使用来自同一对象的其他方法。在回调函数中保留上下文的最佳做法是什么？正如我从 jQuery UI 核心看到的，为此目的常用的方法 $.proxy，说实话我不喜欢这种方法，不是很清楚。

你有什么建议吗？提前致谢！

```
var obj = {
   someMethod: function(){...},
   callback : function(){
       ...
       this.someMethod(); // or this.someMethod.call(...)
       ...
   },
};
// wrong
$.bind(elm, obj.callback);
// using $.proxy
$.bind(elm, $.proxy(obj.callback, obj)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:36:19.157

您的选择基本上是：

*   `$.proxy`（正如你所指出的）
*   JavaScript 1.8 的[`Function.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)
*   `Function.bind`（例如，[`_.bind`](http://documentcloud.github.com/underscore/#bind)）的非本地实现
*   内联匿名函数：`$.bind(elm, function() { obj.callback.apply(obj, arguments })`

这些都不是绝对比其他更好或更差（除了可能是内联匿名函数，它们有点冗长，`Function.bind`而且朋友比其他更通用`$.proxy`）。更重要的是选择一个并保持一致。

# vb.net - 可以从共享点列表中获取所需的列吗？

> ID：10595890
> 
> 赞同：0
> 
> 时间：2012-05-15T07:16:38.527
> 
> 标签：vb.net, sharepoint, caml

我正在使用以下 Caml 查询从共享点列表中获取数据。

```
 oSb.Append("         <OrderBy>")
    oSb.Append("              <FieldRef Name=""Title"" />")
    oSb.Append("         </OrderBy>") 
```

但是这个查询给了我列表的所有列。有没有办法使用 Caml Query 从共享点列表中只获取所需的列？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:22:13.440

查看有关视图字段的[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.viewfields.aspx)文章。您可以在运行 CAML 查询之前指定这些字段。

```
using (SPSite site = new SPSite("http://localhost"))
     {
        using (SPWeb web = site.OpenWeb())
        {
           // Build a query.
           SPQuery query = new SPQuery();
           query.Query = string.Concat(
                          "<Where><Eq>",
                             "<FieldRef Name='Status'/>",
                             "<Value Type='CHOICE'>Not Started</Value>",
                          "</Eq></Where>",
                          "<OrderBy>",
                             "<FieldRef Name='DueDate' Ascending='TRUE' />",
                             "<FieldRef Name=’Priority’ Ascending='TRUE' />", 
                          "</OrderBy>");                    

           query.ViewFields = string.Concat(
                               "<FieldRef Name='AssignedTo' />",
                               "<FieldRef Name='LinkTitle' />",
                               "<FieldRef Name='DueDate' />",
                               "<FieldRef Name='Priority' />");

           query.ViewFieldsOnly = true; // Fetch only the data that we need.

           // Get data from a list.
           string listUrl = web.ServerRelativeUrl + "/lists/tasks";
           SPList list = web.GetList(listUrl);
           SPListItemCollection items = list.GetItems(query);

           // Print a report header.
           Console.WriteLine("{0,-25}  {1,-20}  {2,-25}  {3}",
              "Assigned To", "Task", "Due Date", "Priority");

           // Print the details.
           foreach (SPListItem item in items)
           {
              Console.WriteLine("{0,-25}  {1,-20}  {2,-25}  {3}",
                 item["AssignedTo"], item["LinkTitle"], item["DueDate"], item["Priority"]);
           }
        } 
```

# php - 在 Joomla 中使用 Javascript 和 PHP 检测屏幕大小

> ID：10595896
> 
> 赞同：0
> 
> 时间：2012-05-15T07:17:17.737
> 
> 标签：php, javascript, jquery, joomla, joomla-template

我有一个具有挑战性的问题（无论如何这对我来说是:)）

我正在为想要包含 jQuery 幻灯片的客户开发 Joomla 模板，我还在使用响应式设计，最高可达 480、最高 800 和超过 801px。

我想做的是设置 3 个幻灯片模块（为了便于客户端使用，一个用于 480 宽的图像，一个用于 740 宽的图像，一个用于 940 宽的图像，然后我想根据用户调用该模块屏幕大小。我知道这需要在 Joomla 中使用 php 完成，并且它只是一个服务器端脚本，我不是 UA 嗅探的粉丝。

这就是我的想法，请评论你的想法。

1.  包含检测 $screenWidth 变量是否设置的 PHP 函数

2.  如果没有，请运行检测用户屏幕宽度的 javascript，将此变量设置为 URL（或保存该变量的另一种方式）。

3.  运行 AJAX 页面重新加载

4.  从 URL 中提取 $screenWidth 变量。

5.  原来的 isset 现在将返回 true，以便页面继续加载。

6.  然后使用该变量运行 PHP 代码以加载适当的幻灯片。

你怎么看？它会减慢页面速度吗？重新加载会起作用并将 URL 保留在 joomla 中吗？

请让我知道您的想法并提供任何建议。

谢谢

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:59:21.427

您确定需要重新加载页面吗？一旦您通过 AJAX 调用从客户端获取 screenWidth，您就不能生成幻灯片 HTML 并将其发送回来吗？然后客户端可以直接将其插入到 DOM 中，而无需重新加载页面，并且您不必为维护状态而烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:11:28.393

有很多可能性，但我认为越简单越好。我认为您应该执行以下步骤

> 编写一个启动 javascript 函数来检查屏幕宽度和高度（screen.availWidth 和 screen.availHeight）并将其发送到服务器并相应地创建幻灯片并发送回客户端

# c# - 使用 IP 地址连接到远程 SQL 服务器

> ID：10595898
> 
> 赞同：1
> 
> 时间：2012-05-15T07:17:29.213
> 
> 标签：c#, sql, sql-server, sql-server-2005

我在 SQL Server 方面没有太多经验。我正在尝试通过 IP 地址连接到 SQL Server 2005。我的连接字符串是：

```
"Data Source=117.213.4.155,1433;Network Library=DBMSSOCN;Initial Catalog=PostDB;User ID="<user>";Password="<password>" 
```

我收到此错误：

> 建立与服务器的连接时发生错误。连接到 SQL Server 2005 时，此故障可能是由于在默认设置下 SQL Server 不允许远程连接造成的。（提供者：TCP 提供者，错误：0 - 由于目标机器主动拒绝，无法建立连接。）

我已经使用 Surface 配置工具启用了 TCP/IP 连接，但我现在没有防火墙。

那么我该如何解决呢？请给我一些关于在远程 SQL 服务器中存储和检索数据的建议和见解。我没有其他办法来澄清这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:55:34.993

这篇文章应该有所帮助

[http://support.microsoft.com/kb/914277#method2](http://support.microsoft.com/kb/914277#method2)

在要从远程计算机连接的 SQL Server 实例上启用远程连接。打开 SQL Server Browser 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:24:57.487

确保您可以 ping 服务器并且远程服务器允许连接。仅仅拥有 SQL Server 的 IP 地址并不意味着它可以连接。确保服务器 ip 是外部的并且可以从 Internet 访问。这是一个互联网连接问题。还要检查端口和一切。

# windows - 在 C# 中以编程方式使用 git over ssh

> ID：10595912
> 
> 赞同：2
> 
> 时间：2012-05-15T07:18:23.690
> 
> 标签：windows, git, github

我需要从系统中的 GIT 存储库中提取源代码。我使用 C# 作为后端技术，到目前为止，我已经成功地使用了普通协议。我正在包装 Git.exe 以调用特定的 git 命令。调用 Git Clone "AnyUrlRepositoryOverSSH" 时，git.exe 失败。发生这种情况是因为调用不是通过 ssh 传输进行的，或者 ssh 协议无法传递我的公钥。我需要调用 SSH 客户端并通过该客户端调用 GIt.exe 。怎么做到呢？

# javascript - jQuery $( function() {} ) 和 $(document).ready 一样吗？

> ID：10595913
> 
> 赞同：27
> 
> 时间：2012-05-15T07:18:35.860
> 
> 标签：javascript, jquery

要在字段上使用有效的日期选择器，我必须将此脚本放在我的元素中

```
$( function() {
  $( "#date_datepicker" ).datepicker( { dateFormat: "yy-mm-dd" } );
}); 
```

删除 `$( function() {` 会使日期选择器不起作用。

那么这是否意味着`$( function() {`与 相同`$(document).ready`？

我正在尝试优化我的 javascript 代码，所以知道这可能会有所帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-15T07:19:57.747

请参阅以下来自[http://api.jquery.com/ready/的摘录](http://api.jquery.com/ready/)

> 以下所有三种语法都是等效的：
> 
> *   `$(document).ready(handler)`
> *   `$().ready(handler)`（不建议这样做）
> *   `$(handler)`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-15T07:21:14.713

.ready() 方法通常与匿名函数一起使用：

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

这相当于调用：

```
$(function() {
 // Handler for .ready() called.
}); 
```

[可以在这里阅读](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T07:20:02.083

是的，它是同一事物的简写版本。该函数在将函数作为参数传递时`$`调用该函数。`$(document).ready`

如果您尝试在速度方面进行优化 - 两者的性能几乎相同，但是`$(document).ready(handler)`如果执行很多次，则更长的时间会更快。

如果您尝试在文件大小方面进行优化 - 使用缩小器。

IMO 你能做的最好的事情就是在可读性和简单性方面“优化”。这使得代码更容易理解和维护。有一些工具可以获取未优化的版本并为您压缩和优化（查看 Google 的闭包编译器）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T07:20:29.930

是的，`$( function() {` 而且`$(document).ready`是一样的。

`$( function() {`用作速记语法，但`$(document).ready`使代码更具可读性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-14T08:14:06.623

这是一种在就绪状态下运行代码的非常安全的方法

```
jQuery(function($, undefined){
  // code to run onready
}); 
```

虽然我个人更喜欢这样做：

```
(function($){ // create scope and pass specific aliased variables

    $(function($, undefined){ // attach callback to run onready
       // code to run onready
    });

})(jQuery); 
```

通过这种方式，您可以制作自己的功能包，而不必担心破坏其他人的代码或让您的代码被松散的变量定义破坏。例如，您还可以调用您传递的变量以及您想要的任何名称，并准备好不运行的代码。

```
(function($){ // create scope and pass specific aliased variables

    $(document).on('click', 'a[href]', function(){
       // code to run when a link is clicked
    });
    $(window).on('load',function(){
       // code to run onload
    });
    $(function($, undefined){ // attach callback to run onready
       // code to run onready
    });

})(jQuery); 
```

请注意，这些是相同的

```
$(document).bind('ready', function(){});
$(document).on('ready', function(){});
$(document).ready(function(){});
$(function(){}); 
```

并且该文档没有加载事件

```
$(document).on('load', function(){}); // will not work 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T07:25:17.480

请注意，您还可以找到这样的脚本：

```
jQuery(document).ready(function(){ 
```

这里 $-sign 被 jQuery 替换以避免与其他库的冲突

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T07:24:09.627

你在使用 jQuerymobile 吗？如果是这样，而不是使用文档准备使用

```
$('#pageId').live('pageinit',function(){}); 
```

# asp.net - 如果标签的宽度超过 Div 标签的限制，则复选框标签显示在下一行

> ID：10595915
> 
> 赞同：2
> 
> 时间：2012-05-15T07:18:49.773
> 
> 标签：asp.net

我正在使用 CheckBoxList，如果值超过 div 标签宽度，复选框标签将显示在下一行。

有没有一种方法可以让我在同一条线上对齐？

```
 <table id="Table1">
                    <tr>
                        <td width="250px">
                            <asp:Label ID="deleteLabel" runat="server" Text="Select "></asp:Label>
                        </td>
                        <td width="900px">
                            <div style="border-style: solid; border-color: inherit; border-width: thin; overflow: auto;
                                width: 356px; height: 100px" class="ccodes" runat="server" id="deletePanel1">
                                <asp:CheckBox ID="CheckBoxSelectAll" runat="server" Text="All" />
                                <asp:CheckBoxList ID="checkBoxListDeleteEntities" runat="server" RepeatDirection="Vertical"
                                    Height="26px">
                                </asp:CheckBoxList>
                            </div>
                        </td>
                    </tr>   
    </table> 
```

值如下所示。（对于第三个值，如果它超过了 div 的宽度（356px））

```
[] test1
[] test2
[]
test test test test test test test test test test test test test 
```

任何建议如何使复选框标签与复选框内联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:22:58.873

你试过[`white-space: nowrap`](http://www.w3schools.com/cssref/pr_text_white-space.asp)吗？

```
.nowrap_list tr td label
{
    white-space:nowrap;
    overflow:hidden;
}

<asp:CheckBoxList ID="checkBoxListDeleteEntities"
    CssClass="nowrap_list"
    runat="server" RepeatDirection="Vertical"
    Height="26px">
</asp:CheckBoxList> 
```

# perl - 在多行上工作的 Perl 单行代码？

> ID：10595928
> 
> 赞同：1
> 
> 时间：2012-05-15T07:20:07.750
> 
> 标签：perl

我有一个文件，其中包含几对如下所示的行：

```
 FIRST PIECE OF INFO
 PIECE 2 | PIECE 3 | PIECE 4 | ... 
```

我需要输出这个：

```
FIRST PIECE OF INFO\tPIECE 2\tPIECE 3 ... 
```

我还需要对线路本身做更多的正则表达式魔术。

这可以使用 perl one-liner 来完成吗？我的问题是使用 -p 将一次处理一行文件，而我需要一次处理两行。我的解决方案是首先运行另一个单行，从文件中删除所有换行符（我在不同的行对之间有另一个分隔符）但这似乎太麻烦了，我相信有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:28:41.300

在不知道它是什么的情况下，我无法为您提供帮助`more regexp magic`，但这将结合您所描述的线条

```
perl -lne 'print join "\t", $_, split /\|/, <ARGV>' myfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:32:15.547

还有一种方法：

```
perl -pe'$"="\t";chomp;$_="@{[$_,split q(\|),<>]}"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:25:38.683

好吧，简单的解决方案是将所有换行符和管道转换为制表符。这听起来有点疯狂，但乍一看，它确实像你想要的那样：

```
perl -pwe 'tr/\n|/\t\t/' yourfile.txt 
```

但是有些东西与您的问题描述不符。你说：

> *我有一个包含成对**行的文件***

这意味着您的文件*实际上*看起来像这样：

```
FIRST PIECE OF INFO
PIECE 2 | PIECE 3 | PIECE 4 | ...
SECOND PIECE OF INFO
PIECE 2a | PIECE 3b | PIECE 4b | ...
THIRD... etc 
```

在这种情况下，盲目地音译换行符会将所有内容放在一行中。现在，我对此的解释是，你想要的是这样的（用字面表示的制表符和换行符）：

```
FIRST PIECE OF INFO\tPIECE 2\tPIECE 3\tPIECE 4 | ...\n
SECOND PIECE OF INFO\tPIECE 2a\tPIECE 3b\tPIECE 4b | ...\n 
```

这不是通过简单的音译来实现的。

```
perl -plwe 'next if !/\S/; $_ = join "\t", $_, split /\s*\|\s*/,<>;' file.txt 
```

注意：该`next if !/\S/;`语句只是为了防止流在文件包含奇数行的情况下在末尾暂停。如果是这样，文件句柄`<>`将尝试从 STDIN 读取，您将需要按`Ctrl-D`手动停止它。

[`Data::Dumper`](http://search.cpan.org/perldoc?Data%3a%3aDumper)输出如下所示，显示`$Data::Dumper::Useqq = 1`空白字符：

```
$VAR1 = "FIRST PIECE OF INFO\tPIECE 2\tPIECE 3\tPIECE 4\t...\n";
$VAR1 = "SECOND PIECE OF INFO\tPIECE 2a\tPIECE 3b\tPIECE 4b\t...\n"; 
```

上述输出的单行代码如下所示，稍作改写：

```
perl -MData::Dumper -nlwe '
    $Data::Dumper::Useqq=1; 
    next if !/\S/; 
    $_ = join "\t", $_, split /\s*\|\s*/,<>; 
    print Dumper $_;' file.txt 
```

# c++ - 我如何在 char[] 中设置二进制数据

> ID：10595930
> 
> 赞同：1
> 
> 时间：2012-05-15T07:20:11.377
> 
> 标签：c++, c

例如，我有需要插入缓冲的 const 二进制数据

```
 char buf[] = "1232\0x1"; 
```

但是当二进制数据最初如下所示时怎么办

```
 char buf[] = "\0x11232"; 
```

编译器把它看成一个很大的十六进制数，但我的目的是

```
 char buf[] = {0x1,'1','2','3','2'}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:25:00.037

您可以使用编译时字符串连接：

```
char buf[] = "\x01" "1232"; 
```

~~`\x`但是，在没有以下情况下也可以使用 2 位数字：~~

 ~~```
char buf[] = "\x011232"; 
```~~  ~~* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T07:31:12.743

您可以通过组合相邻的字符串来创建单个字符串文字 - 编译器会将它们连接起来：

```
char buf[] = "\x1" "1232"; 
```

相当于：

```
char buf[] = {0x1,'1','2','3','2', 0};  // note the terminating null, which may or may not be important to you 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:26:42.947

您必须以两字节或四字节格式编写它：

```
\xhh = ASCII character in hexadecimal notation

\xhhhh = Unicode character in hexadecimal notation if this escape sequence is used in a wide-character constant or a Unicode string literal. 
```

所以在你的情况下你必须写`"\x0112345"`~~

# google-maps - 如何告诉 KmlLayer 自定义地图投影？

> ID：10595931
> 
> 赞同：4
> 
> 时间：2012-05-15T07:20:13.547
> 
> 标签：google-maps, google-maps-api-3, kml, map-projections

我有一张带有自定义投影（用于 maps.yandex.ru 瓷砖）和默认投影（谷歌和 OSM 瓷砖）的地图。当我将 KmlLayer 添加到默认投影中的地图时，它似乎没问题： ![默认投影](../Images/4aff1a25727c0550478063cc523a3847.png)

但是将地图切换到 maps.yandex 层（在自定义投影中）...... ![自定义投影](../Images/c0971122277c40da2644be4286c9ca8b.png)

和 kml 对象放错了位置。

我如何告诉 KmlLayer 自定义投影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:41:39.340

我理解它的方式，在墨卡托投影下具有纬度/经度（a，b）的任何给定对象将具有与自定义投影下的（a，b）不同的值。例如，如果您的自定义投影是极坐标的，则该对象与固定点的距离和与固定方向的角度，根本没有纬度/经度。因此，告诉您的 KMLLayer 自定义投影的方法是转换每个对象的坐标并重写 KML。

# php - Sphinx RT 索引和 SphinxQL 查询

> ID：10595934
> 
> 赞同：3
> 
> 时间：2012-05-15T07:20:23.060
> 
> 标签：php, open-source, full-text-search, sphinx

我们正在我们的架构中部署 RT 索引。但是我们需要一些澄清和部署过程中遇到的一些困难。

索引中定义的架构：

```
 index logtable
        {
        type = rt
        path = /usr/local/sphinx20/var/data/logtable
        rt_attr_string = TransactionId
            rt_attr_uint = CustomerId
        rt_attr_timestamp = DateOfTransaction
        rt_attr_string = CustomerFeedback
        rt_field = TransactionType
        } 
```

面临的问题

问题 1：我们如何在 SPHINXQL 中获取 count() 查询结果。因为它对我们很重要，所以根据客户数量，我们必须将其显示在我们的应用程序中。

下面的例子，

```
Query - select count(*) from logtable where CustomerId='871'; 
```

在 SphinxQL - 我们没有得到这个结果并得到以下错误。错误 1064 (42000): index logtable: invalid schema: Count(*) or @count 被查询，但在模式中不可用。

问题 2：我在 conf 中为“TransactionId”字段声明为 STRING 属性，但如果该字段在 where 条件下使用，我无法检索记录。

```
 Example below, 

    select * from logtable where TransactionId='TRA23454'; 
```

出现以下错误，ERROR 1064 (42000): sphinxql: syntax error, unexpected $undefined, expecting CONST_INT or CONST_FLOAT or '-' near '"TRA23454"'

如果知道，请帮助我们关闭这些问题。

库马兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:39:09.537

在第一个示例中，您需要使用 'show meta;' 而不是 count(*) 搜索查询后查询，它将包含 total_count 字段。

```
select id from logtable where CustomerId='871';   
show meta; 
```

在第二个示例中，字符串属性不能在 WHERE、ORDER 或 GROUP 子句中使用。实际上您需要将 TransactionId 转换为整数并使用整数属性。使用 crc32 mysql 函数非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:20:35.423

```
select * from logtable where TransactionId='TRA23454'; 
```

回答 ：

```
select * from logtable where  MATCH('@TransactionId TRA23454') 
```

# actionscript-3 - AS3用画笔画线PNG图像图案

> ID：10595936
> 
> 赞同：0
> 
> 时间：2012-05-15T07:20:30.293
> 
> 标签：actionscript-3, drawing

此功能存在于 Adob​​e Illustrator 或 Painter 等桌面程序中。

您可以选择作为图像图案的画笔。开始在画布上绘画显示由一组不同大小和旋转的图像创建的线条（或任何图案）。大概是我在图片中描绘的样子（红线是画笔运动的路径）。

![在此处输入图像描述](../Images/0762a9d76704682a889383c2ccada5fd.png)

是否已经有一个用于这种效果的库，或者如何最好地实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:51:58.050

在您的绘图画布上听`MouseEvent.MOUSE_DOWN`，一旦它触发，添加一个`Event.ENTER_FRAME`开始绘图。绘图本身非常简单 - 在每一帧上，您获取 mouseX 和 mouseY 值并将 PNG 图像添加到画布上的确切位置，并针对该特定图像进行任何转换（缩放、旋转、alpha）。这是一个简单的例子：

```
private var PatternPNG:Class;
private var canvas:Sprite;

private function init() {
  canvas = new Sprite();
  addChild(canvas);
  canvas.graphics.beginFill(0xFFFFFF);
  canvas.graphics.drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
  canvas.graphics.endFill();
  canvas.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
}
private function onMouseDown(e:Event):void
{
  canvas.removeEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
  canvas.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
  canvas.addEventListener(Event.ENTER_FRAME, onEnterFrame);
}
private function onMouseUp(e:Event):void
{
  canvas.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
  canvas.removeEventListener(MouseEvent.MOUSE_UP, onMouseUp);
  canvas.removeEventListener(Event.ENTER_FRAME, onEnterFrame);
}
private function onEnterFrame(e:Event):void
{
  var patternPiece:DisplayObject = new PatternPNG();
  patternPiece.rotation = Math.random() * 360;
  patternPiece.alpha = Math.random();
  patternPiece.scaleX = patternPiece.scaleY = 0.2 + Math.random() * 0.8;
  patternPiece.x = mouseX;
  patternPiece.y = mouseY;
  canvas.addChild(patternPiece);
} 
```

# ruby - 删除 Sinatra 应用程序中的默认路由日志记录

> ID：10595938
> 
> 赞同：4
> 
> 时间：2012-05-15T07:20:36.423
> 
> 标签：ruby, logging, sinatra

我有一个带有 /health/api 端点的 Sintra 应用程序，如下所述，它被我的负载均衡器每秒调用多次。我想仅删除此路由的默认日志记录，或者相反仅将我关心的端点打印到日志中。

```
get '/health/api' do
  # Health Check
  'I keep quiet'
end

get '/members' do
  # get members data
  'This request gets logged'
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T21:54:42.347

您不能将默认的 Rack::CommonLogger 配置为只打印一些请求，而对其他请求保持安静。但是您可以禁用默认的 CommonLogger 并使用您自己的过滤功能：

```
require 'rubygems'
require 'rack'
require 'sinatra'

LOGGING_BLACKLIST = ['/health/api']

class FilteredCommonLogger < Rack::CommonLogger
  def call(env)
    if filter_log(env)
      # default CommonLogger behaviour: log and move on
      super
    else
      # pass request to next component without logging
      @app.call(env)
    end
  end

  # return true if request should be logged
  def filter_log(env)
    !LOGGING_BLACKLIST.include?(env['PATH_INFO'])
  end
end

disable :logging
use FilteredCommonLogger

get '/members' do
  # get members data
  'This request gets logged'
end

get '/health/api' do
  # Health Check
  'I keep quiet'
end 
```

您显然也可以编写只记录“白名单”请求的自定义记录器。

# .net - 使用 winform 而不是 WPF 的具体优势

> ID：10595940
> 
> 赞同：3
> 
> 时间：2012-05-15T07:21:00.970
> 
> 标签：.net, wpf, winforms

WPF 中是否包含 WinForm 的*所有*功能？使用传统的 WindowsForm 而不是 WPF 有什么特别的优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:48:29.473

从理论上讲，您可以使用 Winforms 完成几乎所有使用 WPF 所做的事情，但在某些情况下，您需要更多的代码，尤其是关于图形效果的代码。

与 WPF 相比，Winforms 的一些优势可能是：

*   更简单的技术
*   非常稳定的技术，因为非常陈旧。WPF 仍然有一些*子*问题，例如 XAML 绑定错误仅在输出窗口中比较并且您没有得到任何异常。
*   更少的自由可能会让你更务实。在 WPF 中，您在图形方面有很大的自由度，例如自定义控件，这可能非常有趣，但也可能给您带来太多*浪费*时间（即在颜色、画笔、动画等方面投入大量时间） . 在 Winforms 中，您可能花在图形上的时间更少（至少我的经验）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:33:27.593

这取决于你的问题。WPF 是一种较新的技术，它提供了更好的关注点分离、更容易灵活的渲染，并允许对 UI 进行硬件加速。

任何技术的优势都特定于项目的约束和要求。例如：WinForms 的一个优势是，如果您仅部署到没有/不能拥有 .NET 3+ 的 Windows XP 机器上，因为只有 WinForms 在 .NET 2 上可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T07:34:06.070

Winforms 与 WPF 相比只有几个优点：

*   有许多内置控件可供使用（但在 WPF 中自定义和创建新控件更容易，也有许多 3rd 方库）
*   它适合旧系统（Win2000）
*   有更多Winforms经验的开发者

所有其他在 WPF 上都更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T08:17:48.093

这有点像问为什么要在 Flash 电影中显示 HTML 表格。首先：您可以随意混合，甚至在元素级别（使用 WinFormsControlHosts）。但是你应该问问自己为什么要混合这些技术。

听起来您对 WPF 还很陌生，因此请注意，虽然 WPF 可以完成 WinForms 可以做的所有事情，但您的学习曲线非常陡峭。标记世界中的情况有所不同......

混合的原因只能是财务性质的。您要么没有时间/金钱/资源在 WPF 中实现它，要么学习如何去做，或者您的客户期望按时交付并且不关心代码的质量。也许您已经为可以节省数小时讨厌的开发的第 3 方 WinForms 组件支付了很多钱。

另一方面，也有不混的原因：

*   WPF 支持硬件加速，WinForms 仅呈现 Cpu。我还没有测试使用互操作时渲染模式到底发生了什么。

*   WPF is being updated. In .Net 4.5 it gets some more DataBinding facility (which is better than WinForms anyway). WinForms hasn't received mentionable Updates since .Net 2.0

To sum it up: Is there any reason for mixing in your case? If not so, don't. If absolutely necessary, I would add functionality to a Winforms App by adding WPF dialogs, but would always try to avoid the other way round.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T07:23:19.510

也许是因为它更容易？但我不会做winforms。使用 WPF。如果您认为 MVVM 太难，您也不必被迫执行 MVVM。而 MVVM 对于小型应用程序来说可能是多余的。

# c# - WCF 服务 - 从 https 迁移到 http

> ID：10595942
> 
> 赞同：2
> 
> 时间：2012-05-15T07:21:11.547
> 
> 标签：c#, wcf, iis, service, web

我在生产中有一个使用证书在 https 上运行的 Web 服务。我想将此部署到没有证书的登台服务器。

所以我相信我最好的方法是将它迁移到登台服务器上的 http 服务。我修改了web.config，把安全模式改成none，可以在IE中看到运行了。

当我使用 WebClient 访问服务时，我收到“远程服务器返回错误：(403) Forbidden。” 错误信息。

有人可以给我一些建议吗？

谢谢

铝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:47:31.617

检查您是否可以使用 WCF 测试客户端进行连接（您可以在 Visual Studio 的`Common7`文件夹中找到它，或者只搜索`wcftestclient.exe`）。如果它可以连接到该服务，您可以让它向您显示它使用的 .config 文件（并且您将能够与您的交叉检查它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:23:40.090

我认为这是一个许可问题。检查所有权限。如果您还有更多问题，您将收到大量错误，说明多件事。

# pdf - BIRT fontsConfig.xml 修改以正确导出 PDF - 何时生效？

> ID：10595956
> 
> 赞同：1
> 
> 时间：2012-05-15T07:21:34.813
> 
> 标签：pdf, fonts, birt

> **可能重复：**
> [PDF 中需要 Arial 字体（BIRT pdf 渲染器，Linux）](https://stackoverflow.com/questions/1058002/arial-font-required-in-pdf-birt-pdf-renderer-linux)

我有问题，因为我在 BIRT（在我的本地机器上）中创建的报告在预览中正确显示。此外，当我在服务器（IBM Maximo 应用程序）上导入它时，它会以 HTML 正确显示。但是当我因为西里尔语言将其导出为 PDF 时，它无法正确显示。

我找到了中欧的解决方案（对于 TCR，但我认为它是相似的）[http://www-01.ibm.com/support/docview.wss?uid=swg21370210](http://www-01.ibm.com/support/docview.wss?uid=swg21370210)

它说将编码从 encoding="Cp1252" 更改为 encoding="Cp1250"

所以我改变它。

```
<font-encodings>
    <encoding font-family="Times-Roman" encoding="Cp1250 " />
    <encoding font-family="Helvetica" encoding="Cp1250 " />
    <encoding font-family="Courier" encoding="Cp1250 " />
    <encoding font-family="Zapfdingbats" encoding="Cp1250 " />
    <encoding font-family="Symbol" encoding="Cp1250 " />
    <encoding font-family="STSong-Light" encoding="UniGB-UCS2-H" />
    <encoding font-family="STSongStd-Light" encoding="UniGB-UCS2-H" />
    <encoding font-family="MHei-Medium" encoding="UniCNS-UCS2-H" />
    <encoding font-family="MSung-Light" encoding="UniCNS-UCS2-H" />
    <encoding font-family="MSungStd-Light" encoding="UniCNS-UCS2-H" />
    <encoding font-family="HeiseiMin-W3" encoding="UniJIS-UCS2-H" />
    <encoding font-family="HeiseiKakuGo-W5" encoding="UniJIS-UCS2-H" />
    <encoding font-family="KozMinPro-Regular" encoding="UniJIS-UCS2-H" />
    <encoding font-family="HYGoThic-Medium" encoding="UniKS-UCS2-H" />
    <encoding font-family="HYSMyeongJo-Medium" encoding="UniKS-UCS2-H" />
    <encoding font-family="HYSMyeongJoStd" encoding="UniKS-UCS2-H" />
</font-encodings> 
```

我改变了这个，我重新启动了 BIRT（在我的本地机器上）我复制了一些旧报告（我想这个新报告现在是用新的 fontsConfig 文件创建的）我在服务器中导入了那个新报告，但 PDF 仍然没有正确显示。我的问题是我必须做什么才能使更改生效？我也更改了 fontsConfig_Pdf 文件但仍然没有效果

# magento - 导出产品的 csv 文件时出现“无效的实体模型”错误

> ID：10595957
> 
> 赞同：3
> 
> 时间：2012-05-15T07:21:48.920
> 
> 标签：magento, magento-1.6

**从后端 magento 管理面板导出产品 csv 文件**时，当我单击继续生成 csv 文件时，它提示我以下错误。

**“无效的实体模型”**

我正在使用 magento 1.6.2 CE。

** 已编辑 **

我正在使用magento默认导出/导入服务意味着来自管理系统->配置->导出/导入.....

如果还不清楚，请问我任何问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:44:20.480

打开**抽象类 Mage_ImportExport_Model_Export_Adapter_Abstract** 并替换

```
$destination = tempnam(sys_get_temp_dir(), 'importexport_'); 
```

至

```
$destination = tempnam(Mage::getBaseDir() . '/var/tmp/'  , 'importexport_'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:23:45.087

如果您使用的是 Windows PC，则可能是 Temp 文件夹的权限问题。我必须通过右键单击更新安全权限`C:\Windows\Temp`，然后选择`Properties->Security->Edit...`并适当地设置组/用户名的权限。我已将完全控制权授予所有用户，以对其进行测试。我在 Windows 7 电脑上。

# iphone - 从 Html 创建 pdf

> ID：10595959
> 
> 赞同：2
> 
> 时间：2012-05-15T07:21:54.313
> 
> 标签：iphone, objective-c

如何从html创建pdf而不在iphone应用程序的objective c中截取uiwebview的屏幕截图或图像？

当我创建 pdf 以捕获 UIwebView 的屏幕截图时，pdf 分辨率看起来不太好。放大或缩小其文本的像素被破坏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:36:54.773

[从 Html 页面生成 PDF。](http://www.ioslearner.com/convert-html-uiwebview-pdf-iphone-ipad/) 我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T11:01:41.387

### 加载html`UIWebView`

按照以下步骤使用`UIPrintPageRenderer`：`UIWebView`

### 添加`Category`用于`UIPrintPageRenderer`获取 PDF 数据

```
@interface UIPrintPageRenderer (PDF)
- (NSData*) printToPDF;
@end

@implementation UIPrintPageRenderer (PDF)
- (NSData*) printToPDF
{
  NSMutableData *pdfData = [NSMutableData data];
  UIGraphicsBeginPDFContextToData( pdfData, self.paperRect, nil );
  [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];
  CGRect bounds = UIGraphicsGetPDFContextBounds();
  for ( int i = 0 ; i < self.numberOfPages ; i++ )
  {
    UIGraphicsBeginPDFPage();
    [self drawPageAtIndex: i inRect: bounds];
  }
  UIGraphicsEndPDFContext();
  return pdfData;
}
@end 
```

### 为 A4 尺寸添加这些定义

```
#define kPaperSizeA4 CGSizeMake(595.2,841.8) 
```

### 现在在`UIWebView's` `webViewDidFinishLoad` `delegate`使用`UIPrintPageRenderer` `property`.`UIWebView`

```
- (void)webViewDidFinishLoad:(UIWebView *)awebView
{
  if (awebView.isLoading)
    return;

  UIPrintPageRenderer *render = [[UIPrintPageRenderer alloc] init];
  [render addPrintFormatter:awebView.viewPrintFormatter startingAtPageAtIndex:0];
  //increase these values according to your requirement
  float topPadding = 10.0f;
  float bottomPadding = 10.0f;
  float leftPadding = 10.0f;
  float rightPadding = 10.0f;
  CGRect printableRect = CGRectMake(leftPadding,
                                  topPadding,
                                  kPaperSizeA4.width-leftPadding-rightPadding,
                                  kPaperSizeA4.height-topPadding-bottomPadding);
  CGRect paperRect = CGRectMake(0, 0, kPaperSizeA4.width, kPaperSizeA4.height);
  [render setValue:[NSValue valueWithCGRect:paperRect] forKey:@"paperRect"];
  [render setValue:[NSValue valueWithCGRect:printableRect] forKey:@"printableRect"];
  NSData *pdfData = [render printToPDF];
  if (pdfData) {
    [pdfData writeToFile:[NSString stringWithFormat:@"%@/tmp.pdf",NSTemporaryDirectory()] atomically: YES];
  }
  else
  {
    NSLog(@"PDF couldnot be created");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:30:01.260

[从 UIWebView 或 UIView 获取 PDF/PNG 作为输出](https://stackoverflow.com/questions/2454309/get-a-pdf-png-as-output-from-a-uiwebview-or-uiview)

这是一个很好的问题，具有相同的方法..

但是，要以编程方式创建 pdf，您可以从此处开始在 iPhone 上生成 PDF：

[http://iphonesdksnippets.com/post/2009/02/13/Generate-PDF-on-iPhone.aspx](http://iphonesdksnippets.com/post/2009/02/13/Generate-PDF-on-iPhone.aspx)

和：

使用 Quartz2d 绘图：

[http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/drawingwithquartz2d.pdf](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/drawingwithquartz2d.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:34:13.560

您可以使用quartz core 在PDF 上下文中绘制UIwebview，而不是将其作为屏幕截图。[这](https://stackoverflow.com/a/6566696/641062)是代码。

# android - Android：JSON 或 XML，缓存

> ID：10595960
> 
> 赞同：1
> 
> 时间：2012-05-15T07:22:01.210
> 
> 标签：android, xml, json, spotify, asp.net-web-api

我正在用java开发一个小的Android项目，我正在使用spotify的webapi来获取数据来玩弄。

[我在访问https://developer.spotify.com/technologies/web-api/](https://developer.spotify.com/technologies/web-api/)时注意到的第一件事是开发人员可以选择使用[xml](http://ws.spotify.com/search/1/track?q=kaizers+orchestra)或[json](http://ws.spotify.com/search/1/track.json?q=kaizers+orchestra)。

我想做的是“缓存”我的数据，以便我可以执行以下操作：

*   从文件中读取一个值，或者根据不同的值构造一个对象
*   将上面创建的对象添加到 lisviewadapter
*   使用更新的适配器更新列表视图
*   迭代前面的步骤，直到文件解析完成

我希望我的用户尽可能快，以便在解析和加载数据时更新 ui。为此，我绘制了 2 个用例。

*   将项目添加到列表视图直到完成
*   显示 X 数量的项目并显示加载更多按钮

哪种文件类型更适合用于解决我的问题？xml解析还是json解析？

我该怎么做这个解析？哪些工具符合我的要求？

哪个用例似乎更好用？

如果您过去做过类似的事情，有什么建议吗？

任何指导表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:34:26.177

我不区分 XML 或 JSON。要缓存数据，您有两种选择。将数据写入文件（将需要重新解析文件以提取数据（除非您创建新文件，例如 CSV 数据））或在解析后将所需数据写入数据库。至于更新`ListView`，这取决于您拥有的条目数。

Android 内置了 XML 和 JSON 解析器。您不需要 GSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:25:03.150

我推荐 JSON，因为 JSON 使用较少的带宽进行传输，而且谷歌制作了一个很棒的 json 解析器库，称为[GSON](https://code.google.com/p/google-gson/)。

# nunit - NUnit 中的 DependsOn 属性

> ID：10595962
> 
> 赞同：1
> 
> 时间：2012-05-15T07:22:05.300
> 
> 标签：nunit

NUnit 中是否有等效于 TestNG 的“依赖属性”？或者还有其他方法可以在 nunit 测试中标记依赖关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:12:14.420

据我所知，没有这样的属性。您可以使用 TestFixtureSetup/TearDown 进行准备。顺便说一句，每个测试用例都应该是独立的。

# iphone - iPhone中的UIButton标签

> ID：10595966
> 
> 赞同：0
> 
> 时间：2012-05-15T07:22:11.253
> 
> 标签：iphone, objective-c, ios5, uibutton

我有 2 个按钮对象（UIButton *obtn，*ebtn），我创建了 12 个按钮（6 个按钮，6 个标记值用于 obtn，6 个按钮，6 个标记值用于 ebtn）...我有一个 btnClick：所有方法这 12 个按钮...当我单击标记值为 1 的按钮时...我通过使用发送器将所选按钮的属性获取到另一个按钮...我想获取未选择按钮的属性（示例 obtn 对象与标记价值 3) 进入另一个按钮 我怎样才能得到它...？

我的直接问题是：如何将具有标签值的按钮的属性分配给处于未选中状态的另一个按钮...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:03:25.123

听起来您希望能够获得指向具有特定标签的按钮的指针，而目前您所能做的就是获取向您发送操作的按钮。

您正在寻找的方法是`viewWithTag:`. 这将为您提供一个带有您想要的标签的按钮（或任何其他视图）。您将此方法传递给按钮的超级视图。因此，在您的操作方法中（假设所有按钮都在同一个超级视图中）：

```
UIView *superview = [sender superview];
UIButton *otherButton = [superview viewWithTag:3]; 
```

然后，您有`sender`，这是被点击的按钮，以及`otherButton`，这是带有标签 3 的按钮。您可以根据需要修改每个按钮。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-15T07:30:25.520

```
// Create textfield 5
        btn_select_Country = [UIButton buttonWithType:UIButtonTypeCustom]; 
        //btn_select_Client = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
        btn_select_Country.frame = CGRectMake(BTN_X_CORD, 228, BTN_WIDTH, BTN_HEIGHT);

        btn_select_Country.tag = 1;
        // [btn_select_Client setTitle:@"Button One" forState:UIControlStateNormal];
        [btn_select_Country addTarget:self action:@selector(countryListBtnTap:) forControlEvents:UIControlEventTouchUpInside];
        btn_Image_Select_Country= [UIImage imageNamed:@"drop-down.png"];
        [btn_select_Country setImage:btn_Image_Select_Country forState:UIControlStateNormal];    
        //btn_select_Client.tag=1205;
        [scrollview addSubview:btn_select_Country];

- (IBAction)currencyListBtnTap:(id)sender;
{
    button_Number = [sender tag];
    [self allTextFeildResignFirstResponder];

} 
```

# tsql - 在值中每隔 n 个字符添加逗号

> ID：10595970
> 
> 赞同：2
> 
> 时间：2012-05-15T07:22:26.033
> 
> 标签：tsql

我的问题很简单。我从 sql select 中得到一个值，如下所示：

```
ARAMAUBEBABRBGCNDKDEEEFOFIFRGEGRIEISITJPYUCAKZKG 
```

我需要这样的：

```
AR,AM,AU,BE,BA,BR,BG,CN,DK,DE,EE,FO,FI,FR,GE,GR,IE,IS,IT,JP,YU,CA,KZ,KG 
```

每个数据集中的长度不同。我用 format(), stuff() 等尝试了它，但没有给我带来我需要的结果。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:58:17.363

是时候更新你的简历了。

```
create function DontDoThis (
    @string varchar(max),
    @count int
)
returns varchar(max)
as
begin
    declare @result varchar(max) = ''
    declare @token varchar(max) = ''

    while DATALENGTH(@string) > 0
    begin
        select @token = left(@string, @count) 
        select @string = REPLACE(@string, @token, '')
        select @result += @token + case when DATALENGTH(@string) = 0 then '' else ',' end
    end

    return @result
end 
```

称呼：

```
declare @test varchar(max) = 'ARAMAUBEBABRBGCNDKDEEEFOFIFRGEGRIEISITJPYUCAKZKG'
select dbo.DontDoThis(@test, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:26:50.970

借助[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)和`for xml path`.

```
-- Sample table 
declare @T table
(
  Value nvarchar(100)
)

-- Sample data
insert into @T values
('ARAMAU'),
('ARAMAUBEBABRBGCNDKDEEEFOFIFRGEGRIEISITJPYUCAKZKG')

declare @Len int
set @Len = 2;

select stuff(T2.X.value('.', 'nvarchar(max)'), 1, 1, '')
from @T as T1
  cross apply (select ','+substring(T1.Value, 1+Number*@Len, @Len)
               from Numbers
               where Number >= 0 and 
                     Number < len(T1.Value) / @Len
               order by Number
               for xml path(''), type) as T2(X) 
```

试用[SE-Data](https://data.stackexchange.com/stackoverflow/query/70235)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:46:56.810

gbn 的评论是完全正确的，如果不是很圆滑的话 :) TSQL 是一种用于字符串操作的糟糕语言，但是如果您编写一个 CLR 函数来执行此操作，那么您将拥有两全其美：从纯 TSQL 调用的 .NET 字符串函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T03:31:43.130

我相信这就是QQping正在寻找的。

```
-- select .dbo.DelineateEachNth('ARAMAUBEBABRBGCNDKDEEEFOFIFRGEGRIEISITJPYUCAKZKG',2,',')

create function DelineateEachNth
(   
    @str varchar(max), -- Incoming String to parse
    @length int, -- Length of desired segment
    @delimiter varchar(100) -- Segment delimiter (comma, tab, line-feed, etc)
)
returns varchar(max)
AS
begin

    declare @resultString varchar(max) = ''
    -- only set delimiter(s) when lenght of string is longer than desired segment
    if LEN(@str) > @length
    begin
        -- continue as long as there is a remaining string to parse
        while len(@str) > 0
        begin
            -- as long as know we still need to create a segment...
            if LEN(@str) > @length
            begin
                -- build result string from leftmost segment length
                set @resultString = @resultString + left(@str, @length) + @delimiter
                -- continually shorten result string by current segment
                set @str = right(@str, len(@str) - @length)
            end
            -- as soon as the remaining string is segment length or less,
            --  just use the remainder and empty the string to close the loop
            else            
            begin
                set @resultString = @resultString + @str
                set @str = ''
            end
        end
    end
    -- if string is less than segment length, just pass it through
    else
    begin  
        set @resultString = @str
    end
    return @resultString 
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-20T08:50:27.157

在[Regex的帮助下](https://www.red-gate.com/simple-talk/sql/t-sql-programming/clr-assembly-regex-functions-for-sql-server-by-example/)

```
select Wow= 
(select case when MatchIndex %2 = 0 and MatchIndex!=0 then ',' + match else match end
  from dbo.RegExMatches('[^\n]','ARAMAUBEBABRBGCNDKDEEEFOFIFRGEGRIEISITJPYUCAKZKG',1)
  for xml path('')) 
```

# transactions - 处理费、最低存款等广泛的商业规则会放在哪里？

> ID：10595971
> 
> 赞同：0
> 
> 时间：2012-05-15T07:22:30.870
> 
> 标签：transactions, business-logic

我有一个电子商务网站，我喜欢我的项目非常 n-Tier/松耦合/高度可扩展。

这个项目在 MVC 3 中，一个域库、一个服务库和一个数据访问库（存储库模式）。

但是，我对大规模恒定业务规则的实施持谨慎态度，例如临时全店折扣，以及应该/应该支付的最低存款费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:09:45.450

在我看来，任何处理允许的数据*状态*的业务规则都应该在数据库中执行。这包括有效的个人价值以及价值之间的有效关系。当您进行*流程*验证时，应将其移至处理流程的层。例如，是否允许特定状态转换到另一个特定状态可能不属于数据库，但可能属于它的下一层。

SQL 中可用的各种约束以及数据库触发器非常适合强制执行有关允许状态的规则。如果验证涉及多行或多表，您可能需要担心事务隔离级别和/或显式锁定以使其正确，而这些都是数据库功能。

# c# - Oracle plsql 错误

> ID：10595974
> 
> 赞同：-4
> 
> 时间：2012-05-15T07:22:44.467
> 
> 标签：c#, sql, oracle, plsql

有谁知道那个错误指向什么？

```
ORA-06550: line 1, column 129:
PLS-00103: Encountered the symbol "," when expecting one of the following:

   ( - + case mod new not null <an identifier>
   <a double-quoted delimited-identifier> <a bind variable>
   continue avg count current exists max min prior sql stddev
   sum variance execute forall merge time timestamp interval
   date <a string literal with character set specification>
   <a number> <a single-quoted SQL string> pipe
   <an alternatively-quoted string literal with character set specification>
   <an alternatively 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:37:05.037

查看第一行的第 129 个字符。开发人员没有输出该信息，因为它没有用。他们输出它是因为它应该将您指向错误发生的确切位置。

这是某种语法错误，例如连续两个逗号，或关键字拼写错误，或其他十几种可能性。

指定位置的代码就是你需要看的，或者给我们看的，以便你找出问题所在。

# java - 如果实际对象是在运行时确定的，为什么在编译时解决早期绑定？

> ID：10595977
> 
> 赞同：4
> 
> 时间：2012-05-15T07:22:59.513
> 
> 标签：java, object, late-binding, early-binding

我知道所有对象都是在调用函数时在运行时创建的。

绑定是我们在类中绑定方法数据成员。

早期绑定是在编译时绑定所有方法实例变量。我认为所有对象都是在运行时创建的，所以它必须在运行时绑定所有方法数据成员。

为什么在早期绑定中对对象方法的调用是在编译时确定的？如果该对象是在运行时创建的。

例如。

```
class A{
    public void foo(){
        //some code here
    }
}

public static void main(String[] args){
    A aInstance = new A();
    aInstance.foo();
} 
```

foo() 是在编译时解析的，但 aInstance 是在运行时确定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:27:11.817

This is because to bind the call means to determine the method (or function) to be called, not to determine the instance to call it on.

Early binding is preferable, because the call then executes slightly faster.

The only reason to delay the binding to the runtime might be polymorphism, where even the exact type of the object is unknown at compile type; or a simple compiler implementation that does not care about the cost of the VMT lookup.

# ios - UIView 动画在设备上滞后

> ID：10595979
> 
> 赞同：2
> 
> 时间：2012-05-15T07:23:06.573
> 
> 标签：ios, animation, uiview, uiviewanimation, lag

我在我的应用程序中使用动画并且感到困惑，因为动画在设备上滞后，在模拟器上一切似乎都很好。首先我尝试使用

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut]; 
```

在提交动画之前，有大约 30 行带有“if”块的代码，所以我认为这可能会导致问题，但后来我开始使用

```
[UIView animateWithDuration:0.3
                                  delay:0.0
                                options: UIViewAnimationCurveEaseIn
                             animations:^{
                                 mainView.frame = CGRectMake(0, 0, 320, 420);
                                 buttonsView.transform = CGAffineTransformMakeTranslation(0, 68);
                                 radioBar.transform = CGAffineTransformMakeTranslation(0, -50);
                                 vk_controller.view.frame = CGRectMake(0, 0, 320, 440);
                             } 
                             completion:^(BOOL finished){
                                 button.isHiddenDown = YES;
                             }]; 
```

就“if”块而言，但滞后似乎仍然存在。当我按下按钮时，会有约 0.5-1 秒的延迟（为什么？），然后动画开始。但是当我在桌面视图时

```
[UIView animateWithDuration:0.3
                                  delay:0.0
                                options: UIViewAnimationCurveEaseIn
                             animations:^{
                                 mainView.frame = CGRectMake(0, 0, 320, 420);
                                 buttonsView.transform = CGAffineTransformMakeTranslation(0, 68);
                                 radioBar.transform = CGAffineTransformMakeTranslation(0, -50);
                                 goha_news_controller.view.frame = CGRectMake(0, 0, 320, 420);
                                 goha_news_controller.feed_table.frame = CGRectMake(0, 0, 320, 420);
                                 if(goha_news_controller.backgroundView)
                                 {
                                     goha_news_controller.backgroundView.frame = CGRectMake(0, 0, 320, 420);
                                     goha_news_controller.newsDetailView.frame = CGRectMake(0, 0, 320, 420);
                                 }

                             } 
                             completion:^(BOOL finished){
                                 button.isHiddenDown = YES;
                             }]; 
```

除了动画前的意外延迟外，还有连发的刺耳动画。
谁能解释它为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T18:30:25.660

另一个可能的原因。您是否在任何屏幕视图或图层中使用阴影？iOS 根本无法很好地处理带有阴影的动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:30:29.053

您不能使用模拟器来衡量性能。它具有与设备完全不同（不仅仅是更好或更差）的性能特征（并且设备也因代而异）。

如果陈述没有造成重大延误；它们非常便宜。

您的性能问题可能在其他地方。在您向我们展示的代码中，我看不到任何看起来像明显性能问题的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:38:05.683

如果在动画时调整控件中的图像大小，这可能会导致延迟，因为图像大小调整对于 CPU 来说是一个非常昂贵的过程。在运行动画和更改图像之前，您应该制作图像的缩略图。

此外，尝试使用开始动画 - 提交动画而不是使用块制作动画。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
// Here some more animation settings
// Here your animations 
[UIView commitAnimations]; 
```

# c# - Microsoft.Expression.Interactions 版本 4.0.0.0 运行时版本 v4.0.30319 在哪里下载？

> ID：10595980
> 
> 赞同：8
> 
> 时间：2012-05-15T07:23:07.173
> 
> 标签：c#, .net, wpf

我目前正在寻找：

> Microsoft.Expression.Interactions 版本 4.0.0.0 运行时版本 v4.0.30319

和

> Microsoft.Speech 版本 10.2.0.0 运行时版本 v2.0.50727

我可以下载它还是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T07:32:15.010

Microsoft.Expression.Interactions 在[Microsoft Expression Blend SDK for Silverlight 4](http://www.microsoft.com/download/details.aspx?id=3062)中，我认为您需要下载的第二个是[Speech SDK 5.1](http://www.microsoft.com/en-us/download/details.aspx?id=10121)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-21T13:56:33.587

你需要安装

> 适用于 .NET 4 的 Microsoft Expression Blend 软件开发工具包 (SDK)

或者

> 适用于 .NET 4.5 的 Microsoft Expression Blend 软件开发工具包 (SDK)

您可以在其中找到**Microsoft.Expression.Interactions.dll**

> C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\.NETFramework\v4.0\Libraries

或在

> C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\.NETFramework\v4.5\Libraries

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T20:32:41.990

请注意，我发现使用 NuGet 包管理器安装这个包解决了这个问题：

```
PM> Install-Package MicrosoftExpressionInteractions -Version 3.0.40218 
```

请参阅[https://www.nuget.org/packages/MicrosoftExpressionInteractions/](https://www.nuget.org/packages/MicrosoftExpressionInteractions/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:02:24.420

我知道第一个捆绑在 Nuget 中；对我来说总是最简单的方法。检查另一个。

# validation - 从 ZKOSS 的收件箱中删除默认验证消息

> ID：10595985
> 
> 赞同：1
> 
> 时间：2012-05-15T07:23:22.993
> 
> 标签：validation, input, zk

如果我在 中输入即“0000000” `<intbox>`，则某些默认验证器会显示错误工具提示“您必须指定一个整数，而不是 0000000”。我想完全摆脱该消息，只需将输入值更改为“0”。任何帮助都会很棒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:30:02.897

您可以`org.zkoss.zul.Intbox#coerceFromString`在您的自定义子类`IntboxCustomSubclass`（本示例中使用的名称）中覆盖，然后将其作为自定义组件添加到`lang.xml`您的应用程序中。对于自定义组件，请参见[http://books.zkoss.org/wiki/ZK_Client-side_Reference/Language_Definition](http://books.zkoss.org/wiki/ZK_Client-side_Reference/Language_Definition)。

```
<component>
  <component-name>intbox</component-name>
  <component-class>org.zkoss.zul.IntboxCustomSubclass</component-class>
  <widget-class>zul.inp.Intbox</widget-class>
  <mold>
    <mold-name>default</mold-name>
    <mold-uri>mold/input.js</mold-uri>
    <css-uri>css/input.css.dsp</css-uri>
  </mold>
  <mold>
    <mold-name>rounded</mold-name>
    <mold-uri>mold/input.js</mold-uri>
    <css-uri>css/input.css.dsp</css-uri>
  </mold>
</component> 
```

将您的测试放在此处，以测试值为 '0000000' 的字符串并返回 0：

```
// here.
try {
  int v = Integer.parseInt(val);
  int divscale = vals[1] != null ? ((Integer)vals[1]).intValue(): 0;
  while (v != 0 && --divscale >= 0)
    v /= 10;
  return new Integer(v);
} catch (NumberFormatException ex) {
  throw showCustomError(
    new WrongValueException(this, MZul.NUMBER_REQUIRED, value));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:55:27.287

我通过覆盖小部件默认`showError_`方法找到了一个解决方案，这就是创建错误消息的地方......现在看起来像

```
zk.$package("foo").MyIntbox = zk.$extends(zul.inp.Intbox, {
    $init: function() {   
        this.$super('$init', arguments);
        // some custom logic
    },
    showError_ : function(msg){
        console.log(msg);
    }
}); 
```

# asp.net - 在自定义模板字段中回发后复选框状态丢失

> ID：10595995
> 
> 赞同：0
> 
> 时间：2012-05-15T07:23:44.593
> 
> 标签：asp.net, checkbox, viewstate, templatefield, itemplate

我通过从 System.Web.UI.WebControls.TemplateField 派生创建了一个自定义复选框模板字段。该字段的模板是通过创建一个实现 ITemplate 接口的类来创建的。当页面上发生任何回发时，复选框中的值将丢失。

为了让这个临时工作，我使用 viewstate 将复选框的状态存储在复选框列中，但更进一步，我想完全避免这种情况，因为我将在我的应用程序中以相同的方式使用更多模板字段。

如果我遗漏了什么，请告诉我。

以下是代码：

```
namespace MyControls
{
    public class CheckBoxTemplateField : TemplateField
    {
        public CheckBoxTemplateField()
        {
            this.HeaderTemplate = new CheckBoxTemplate();
            this.ItemTemplate = new CheckBoxTemplate();
        }
    }

    public class CheckBoxTemplate : ITemplate
    {
        public void InstantiateIn(Control container)
        {
            CheckBox chk = new CheckBox();
            container.Controls.Add(chk);
        }
    }
} 
```

问候， 高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:46:04.343

复选框因其在回发中保持其价值的问题而闻名

一种解决方案是将其值存储在隐藏字段中并在服务器中读取它。

*ps这与viewstate无关。输入控件不会将它们的值保存在viewstate中（excpet文本框有'ontextchange'事件）*

# javascript - iframe 中的跨框架脚本

> ID：10595997
> 
> 赞同：0
> 
> 时间：2012-05-15T07:23:48.253
> 
> 标签：javascript, java, dom-events, jspx

我有一个jsp页面。它有 3 个 i 帧。我遇到了一个跨框架脚本问题。我可以将任何其他域的页面加载到我的 i-frame 中。你能告诉我如何克服这个问题吗？我试过以下代码：

```
 <style>
                html{display : none ; }
            </style>
            <script>
                if( self == top ) {
                    document.documentElement.style.display = 'block' ;
                } else {
                    top.location = self.location ;
                }

            </script> 
```

我还尝试了一个过滤器，它添加了标题“X-FRAME-OPTIONS”，SAMEORIGIN

两者都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:20:46.797

对于加载到 iframe 的不同来源的 html 页面，您无法访问该页面的窗口或任何其他对象。

为了在从不同来源加载到 iframe 的 html 页面之间进行通信，您必须使用“postMessage”功能。有关 javascript 中的 google postMessage 的详细信息和示例，您将获得大量的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T18:18:00.950

试试这个脚本，它不会让你的页面在其他域的 iframe 中使用。

```
function bust() {
    var urlRefer = (window.location != window.parent.location) ? document.referrer: document.location;
    var envName = window.location.hostname;
    var envNameNew = new RegExp(envName);
    if (!(envNameNew.test(urlRefer))) {
        window.top.location="http://"+envName;  
    }
}
bust(); 
```

# android - Cocos2d Android CCRenderTexture 示例

> ID：10595999
> 
> 赞同：2
> 
> 时间：2012-05-15T07:23:57.590
> 
> 标签：android, cocos2d-iphone, cocos2d-android

```
CCSprite texture1 = CCSprite.sprite("menu_background.png");
CCRenderTexture layerRenderTexture = CCRenderTexture.renderTexture(width, height);
layerRenderTexture.begin();
texture1.visit(CCDirector.gl);
layerRenderTexture.end();
this.addChild(layerRenderTexture); 
```

我还没有在 Internet 上看到任何 CCRenderTexture 示例。当我尝试如上所述使用它时，我希望看到一个漂亮的背景。相反，我看到黑色:)

我究竟做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:31:29.563

> 我还没有在 Internet 上看到任何 CCRenderTexture 示例。

我想你可能一直在寻找错误的互联网？:)

查看[我的文章](http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/)和[Ray 的文章](http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture)。当您在谷歌搜索 CCRenderTexture 时，两者都名列前茅。他们使用 cocos2d-iphone，但同样的原则也适用。

在您的特定情况下，我没有看到您将 layerRenderTexture 作为子节点添加到场景或其他节点中。这可以解释为什么你没有得到任何结果。